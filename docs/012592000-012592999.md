# StackOverflow 问答 12592000-12592999

# asp.net-mvc-4 - ASP.NET MVC 4 中的单页应用程序路由

> ID：12592001
> 
> 赞同：6
> 
> 时间：2012-09-25T22:25:33.663
> 
> 标签：asp.net-mvc-4

我正在使用 asp.net net mvc4 和 javascript 构建一个单页应用程序。

我的 javascript 有它自己的路由引擎，所以我希望根目录下的所有路由都由 javascript 处理，所有路由`api`都由服务器端处理。IE：

```
/             <--- javascript handles 
/api          <--- ASP.NET MVC handles 
```

但是，我不知道如何告诉 ASP.NET MVC 不处理这些路由，而且我到目前为止所尝试的甚至都没有运行：

```
 routes.MapRoute(
            name: "Client",
            url: "/",
            defaults: new { controller = "Home", action = "Index",  }
        );

        routes.MapRoute(
            name: "API",
            url: "api/{controller}/{action}/{id}",
            defaults: new { controller = "Tasks", action = "Index", id = UrlParameter.Optional }
        ); 
```

欢迎任何想法，谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-26T16:17:48.893

您不能为路由 URL 中不存在的参数设置默认值，除非您使用包罗万象的参数。您还需要首先创建您的 API 路由，以避免它被包罗万象的路由消耗。

```
routes.MapRoute(
    name: "API",
    url: "api/{controller}/{action}/{id}",
    defaults: new { controller="Tasks", action="Index", id=UrlParameter.Optional }
);

routes.MapRoute(
    "Default", // Route name
    "{*catchall}", // URL with parameters
    new { controller = "Home", action = "Index" } // Parameter defaults
); 
```

更新：我应该提到，在这种情况下，.NET MVC 仍会将任何与“API”不匹配的请求转发到“Home/Index”，在您的情况下，它应该为您的客户端 MVC 框架的入口点提供服务。

# oop - OOP 继承问题

> ID：12592004
> 
> 赞同：0
> 
> 时间：2012-09-25T22:25:39.853
> 
> 标签：oop

我有两个类，其中的方法如下所示；

```
|----AVL----| |-----RB--------|
| | | |
| | | |
| - 插入 | | -平衡 |
| | | |
| - 平衡| | |
| | | |
|-----------| |--------------|

```

在 AVL 的“插入”方法中，它称为“平衡”。
RB继承了AVL，所以我可以使用AVL的插入方法。现在当我调用 RB::insert() 时，它会调用 AVL::insert() 然后是 AVL::balance()，但我希望它从 AVL::insert() 调用 RB::balance()，当一个RB 对象调用“插入”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T22:28:05.347

这是虚拟方法的经典案例：`AVL.balance` `virtual`在`RB`. 然后将根据调用的对象类型调用正确的实现`balance`——调用的代码`balance`将作为`AVL`.

# ruby-on-rails - 您如何从需要凭据 (SSL) 的网站上抓取信息？

> ID：12592016
> 
> 赞同：5
> 
> 时间：2012-09-25T22:26:28.927
> 
> 标签：ruby-on-rails, ssl, screen-scraping, web-scraping

我想知道是否有人可以指出我正确的方向。我想从启用 SSL 的网站（URL 中的 https）中抓取 html/文本内容。所述站点的文件系统中将有多个分支。

我的问题是：

如何从我的 Rails 应用程序中为外部网站提供凭据？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T00:01:35.840

使用[Typhoeus 宝石](https://rubygems.org/gems/typhoeus)。

我之前也曾为这个问题而苦苦挣扎。

*回答*

但是，如果您使用 Typhoeus，

```
1.9.3p194 :001 > Typhoeus # Checking that Typhoeus gem is being used.
 => Typhoeus 
1.9.3p194 :002 > url = "https://twitter.com/"
 => "https://twitter.com/" 
1.9.3p194 :003 > response = Typhoeus::Request.get(url, :timeout => 5000)

 => #<Typhoeus::Response:0x007fdd8cc00488 @code=200, @curl_return_code=0, @curl_error_message="No error", @status_message=nil, @http_version=nil, @headers="HTTP/1.1 200 OK\r\nDate: Tue, 25 Sep 2012 23:56:32 GMT\r\nStatus: 200 OK\r\nX-Runtime: 0.08814\r\nX-MID: 0cfcab7a410834bf31115f9a5cd7fb62651aa568\r\nStrict-Transport-Security: max-age=631138519\r\nCache-Control: no-cache, no-store, must-revalidate, pre-check=0, post-check=0\r\nContent-Type: text/html; charset=utf-8\r\nX-Frame-Options: SAMEORIGIN\r\nLast-Modified: Tue, 25 Sep 2012 23:56:32 GMT\r\nETag: \"95db45f50f8dc1a45be3895e03a23d53\"\r\nExpires: Tue, 31 Mar 1981 05:00:00 GMT\r\nX-Transaction: 72253ef75f0755e1\r\nPragma: no-cache\r\nSet-Cookie: k=10.35.35.113.1348617392068257; path=/; expires=Tue, 02-Oct-12 23:56:32 GMT; domain=.twitter.com\r\nSet-Cookie: guest_id=v1%3A134861739271966362; domain=.twitter.com; path=/; expires=Fri, 26-Sep-2014 11:56:32 GMT\r\nSet-Cookie: _twitter_sess=BAh7CToPY3JlYXRlZF9hdGwrCFBS3P85AToMY3NyZl9pZCIlNTY2MzNjOTM0%250AOTIyMDE4ZmNkY2E4NjViZmE3ZTBkMDAiCmZsYXNoSUM6J0FjdGlvbkNvbnRy%250Ab2xsZXI6OkZsYXNoOjpGbGFzaEhhc2h7AAY6CkB1c2VkewA6B2lkIiViYjAw%250AY2Q1YWZkMDAwNmExNWJhNjAyYmNiNzBhOTA0Yg%253D%253D--5ffbea931432fe65a2128be90048e3bb6fc9dbca; domain=.twitter.com; path=/; HttpOnly\r\nX-XSS-Protection: 1; mode=block\r\nVary: Accept-Encoding\r\nContent-Encoding: gzip\r\nContent-Length: 13733\r\nServer: tfe\r\n\r\n", @body="<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"utf-8\">\n    \n    <script>document.domain='twitter.com'</script>\n\n      <title>Twitter</title>\n\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\">\n    \n      <meta name=\"description\" content=\"Instantly connect to what&#39;s most important to you. Follow your friends, experts, favorite celebrities, and breaking news.\">\n    \n    \n      <link href=\"/favicons/favicon.ico\" rel=\"shortcut icon\" type=\"image/x-icon\">\n    \n    \n          <link rel=\"stylesheet\" href=\"https://twimg0-a.akamaihd.net/a/1348559220/t1/css/t1_core_logged_out.bundle.css\" type=\"text/css\" media=\"screen\">\n    \n        <link rel=\"stylesheet\" href=\"https://twimg0-a.akamaihd.net/a/13485592

1.9.3p194 :005 >    response.body # returns html document
 => "<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"utf-8\">\n    \n    <script>document.domain='twitter.com'</script>\n\n      <title>Twitter</title>\n\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\">\n    \n      <meta name=\"description\" content=\"Instantly connect to what&#39;s most important to you. Follow your friends, experts, favorite celebrities, and breaking news.\">\n    \n    \n      <link href=\"/favicons/favicon.ico\" rel=\"shortcut icon\" type=\"image/x-icon\">\n    \n    \n          <link rel=\"stylesheet\" href=\"https://twimg0-a.akamaihd.net/a/1348559220/t1/css/t1_core_logged_out.bundle.css\" type=\"text/css\" media=\"screen\">\n    \n        <link rel=\"stylesheet\" href=\"https://twimg0-a.akamaihd.net/a/1348559220/t1/css/t1_more.bundle.css\" type=\"text/css\" media=\"screen\">\n    \n          <script>\n      (function() {\n        function getPhxPath(){var a=l.href.match(/#(.)(.*)$/);return a&&a[1]==\"!\"&&a[2]}function getEvent(a){return a?(a=a.replace(/^#|\\/$/,\"\").toLowerCase(),a.match(/^[a-z0-9_]+$/)?a:!1):!1}function redirectEventPath(a){var a=getEvent(a);if(a){var b=document.referrer||\"none\",c=\"ev_redir_\"+a+\"=\"+b+\"; path=/\";document.cookie=c,l.replace(\"/hashtag/\"+a)}}function resolveInlineRedirects(){var a=getPhxPath();a&&l.replace(a),l.hash!=\"\"&&redirectEventPath(l.hash.substr(1).toLowerCase())}var l=window.location;resolveInlineRedirects(),window.addEventListener?window.addEventListener(\"hashchange\",resolveInlineRedirects,!1):window.attachEvent&&window.attachEvent(\"onhashchange\",resolveInlineRedirects);\n      }());\n      </script>\n    \n    <script>\n      \n      \n      (func 
```

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T15:04:40.580

我可以帮你解决这个问题。其实没那么难。

```
open("http://...", :http_basic_authentication=>[user, password]) 
```

如果你想解析，你甚至可以调整我的爬虫。这是其中的主要方法。

```
require "open-uri"
require "zlib"

SHINSO_HEADERS = {
  'Accept'          => '*/*',
  'Accept-Charset'  => 'utf-8, windows-1251;q=0.7, *;q=0.6',
  'Accept-Encoding' => 'gzip,deflate',
  'Accept-Language' => 'bg-BG, bg;q=0.8, en;q=0.7, *;q=0.6',
  'Connection'      => 'keep-alive',
  'Cookie'          => '',
  'From'            => 'email@example.com',
  'Referer'         => 'http://svejo.net/',
  'User-Agent'      => 'Your user agent'
}

def crawl(url_address)
  self.errors = Array.new
  begin
    begin
      url_address = URI.parse(url_address)
    rescue URI::InvalidURIError
      url_address = URI.decode(url_address)
      url_address = URI.encode(url_address)
      url_address = URI.parse(url_address)
    end
    url_address.normalize!
    stream = ""
    timeout(8) { stream = url_address.open(SHINSO_HEADERS) }
    if stream.size > 0
      url_crawled = URI.parse(stream.base_uri.to_s)
    else
      self.errors << "Server said status 200 OK but document file is zero bytes."
      return
    end
  rescue Exception => exception
    self.errors << exception
    return
  end
end 
```

**url_crawled**是你最终需要的。

尝试使用此地址进行测试。 [https://developer.mozilla.org/en-US/docs/HTTP_access_control](https://developer.mozilla.org/en-US/docs/HTTP_access_control)

如果您仍然遇到错误，您的服务器可能配置不正确，证书明智，您应该检查一下。

在相关说明中，如果您认真对待解析，您还可以考虑使用 CharGuess gem 和 Zlib 来正确读取内容，然后使用 Iconv 转换有问题的内容。这是一个例子。

```
if    stream.content_encoding.include?('gzip')
  document = Zlib::GzipReader.new(stream).read
elsif stream.content_encoding.include?('deflate')
  document = Zlib::Deflate.new().deflate(stream).read
#elsif stream.content_encoding.include?('x-gzip') or
#elsif stream.content_encoding.include?('compress')
else
  document = stream.read
end
self.charset_guess = CharGuess.guess(document) 
```

然后只需在内容上使用 Iconv。

希望这对您有所帮助。

问候， 雅沃尔

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T23:10:24.830

```
require 'httpclient'
require 'nokogiri'

client = HTTPClient.new

client.set_auth("http://domain.com", "username", "password")

doc = Nokogiri::HTML(c.get_content("http://example.com")) 
```

嘿伙计们，很抱歉回复晚了，我已经被一些事情淹没了。上面的代码对我有用。（经过多次机械化探戈和其他一些基于 nokogiri 的宝石）。其他一些 gem，例如 openuri、mechanize 等，会导致错误，例如 MD5 Unknown hashing algorithm。感谢您的时间和帮助。

# javascript - 通过正则表达式替换 Javascript

> ID：12592017
> 
> 赞同：0
> 
> 时间：2012-09-25T22:26:36.267
> 
> 标签：javascript, regex, replace

我正在尝试用 3 个其他字符替换 3 个字符来构建/屏蔽表单的电子邮件地址。

这仅适用于一次或在第一次找到它时：

```
email = "email1#domain!com|email2#domain!com|email3#domain!com";
email.replace("#","@").replace("!",".").replace("|",","); 
```

上面的代码导致：email1@domain.com,email2#domain!com|email3#domain!com

在阅读了一些文章后，我读到了关于使用 RegEx 的内容，这是我永远无法理解的编码部分：

```
email.replace("/#/g","@").replace("/!/g",".").replace("/|/g",","); 
```

这也不起作用，并使其与原始 var 相同。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T22:29:11.080

不要在正则表达式周围加上引号。`/`正则表达式是用作边界的文字。

此外，您将需要转义，`|`因为它具有特殊含义。

最后，`.replace`不是变革性的。它返回结果。

```
email = email.replace(/#/g,'@').replace(/!/g,'.').replace(/\|/g,','); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T22:28:49.820

Using [regex literals](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions), you omit the quotes (and you'll need to escape the pipe):

```
email.replace(/#/g,"@").replace(/!/g,".").replace(/\|/g,","); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T22:34:10.257

```
email = "email1#domain!com|email2#domain!com|email3#domain!com";
email=email.replace(/#/g,"@").replace(/!/g,".").replace(/\|/g,","); 
```

# python - multiprocessing.Pool 进程锁定到单个核心

> ID：12592018
> 
> 赞同：5
> 
> 时间：2012-09-25T22:26:38.957
> 
> 标签：python, multiprocessing

我在 Ubuntu 12.04 上的 Python 中使用 multiprocessing.Pool，我遇到了一个奇怪的问题；当我调用`map_async`我的 Pool 时，我生成了 8 个进程，但它们都在争夺对我的 8 核机器的单个核心的控制权。完全相同的代码用尽了我在 Macbook Pro 中的两个内核，以及我的其他 Ubuntu 12.04 桌面的所有四个内核（`htop`在所有情况下都用 来衡量）。

我的代码太长，无法全部发布，但重要的部分是：

```
P = multiprocessing.Pool()
results = P.map_async( unwrap_self_calc_timepoint, zip([self]*self.xLen,xrange(self.xLen)) ).get(99999999999)
P.close()
P.join()
ipdb.set_trace() 
```

根据[本文](http://www.rueckstiess.net/research/snippets/show/ca1d7d90)的建议，哪里`unwrap_self_calc_timepoint`是一个包装函数，用于将必要的参数传递给一个类。`self`

所有三台计算机都使用 Python 2.7.3，我真的不知道从哪里开始寻找为什么那台 Ubuntu 计算机出现故障。关于如何开始缩小问题范围的任何帮助都会有所帮助。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-10T21:30:54.063

我遇到了同样的问题，在我的情况下，解决方案是告诉 linux 在整个处理器上工作，而不是只在一个处理器上工作：尝试在代码开头添加以下 2 行：

`import os os.system("taskset -p 0xfffff %d" % os.getpid())`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-05T21:44:50.603

这似乎是 numpy 和某些 Linux 发行版之间相当普遍的问题。在程序开始附近使用任务集我没有任何运气，但是在要并行化的代码中使用它确实可以解决问题：

```
import multiprocessing as mp
import numpy as np
import os

def something():
    os.system("taskset -p 0xfffff %d" % os.getpid())
    X = np.random.randn(5000,2000)
    Y = np.random.randn(2000,5000)
    Z = np.dot(X,Y)
    return Z.mean()

pool = mp.Pool(processes=10)
out = pool.map(something, np.arange(20))
pool.close()
pool.join() 
```

# excel - 在 Excel 中打开制表符分隔的文本文件会破坏特殊符号

> ID：12592021
> 
> 赞同：0
> 
> 时间：2012-09-25T22:26:46.673
> 
> 标签：excel, text, encoding, import

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T22:29:09.840

原始文件未使用 Excel 期望的字符编码。

看

[字符编码和问题](https://stackoverflow.com/questions/8421316/character-encoding-and-the-a-issue)

Excel 的导入向导更擅长处理编码问题，并且可能能够正确打开您的源文件。看

[Microsoft Excel 破坏 .csv 文件中的变音符号？](https://stackoverflow.com/questions/155097/microsoft-excel-mangles-diacritics-in-csv-files)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T22:29:46.497

没关系，在再次查看[在 Excel 中打开包含特殊字符的 .csv 文件](https://stackoverflow.com/questions/529287/open-csv-file-containing-special-characters-in-excel)后，我意识到不是右键单击 -> 使用 Excel 打开，如果我转到文件 -> 在 Excel 中打开，它可以让我选择编码。

# php - How can I allow admins to edit a db table on their site's backend?

> ID：12592022
> 
> 赞同：0
> 
> 时间：2012-09-25T22:26:46.440
> 
> 标签：php, html, mysql, database

I am developing a site where admins can log in and then view the database tables for various clients registered on the site. These admins should then be able to edit these values on the page that they're viewing it.

Is there a way that I can implement it so that they can simply click on the value that they want to edit, and then it will automatically update in the database? They shouldn't be redirected to a different page. It should be similar to phpmyadmin's inline editing.

I've tried to work with Editable Grid, but with very little documentation it is very difficult for me to understand how I can implement it correctly.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T22:33:12.800

您需要实现一个 AJAX 解决方案来完成此操作。Mozilla 的文档很好地概述了如何使用它：

**参考**：[https ://developer.mozilla.org/en-US/docs/AJAX](https://developer.mozilla.org/en-US/docs/AJAX)

`$.ajax`使用 jQuery，您可以通过调用轻松发送数据：

```
$.ajax({
  type: "POST",
  url: "insert_into_database.php",
  data: { name: "Foo", location: "bar" }
}).done(function( msg ) {
  alert( "Data Saved: " + msg );
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T22:37:16.287

如果您正在寻找一个好的库来完成此任务，那么我建议您将类似[http://www.sprymedia.co.uk/article/KeyTable](http://www.sprymedia.co.uk/article/KeyTable)的东西与 jQuery 和 Ajax 一起使用。KeyTable 库提供了非常好的行编辑。

# objective-c - iOS 6 appearance when contained in multiple classes

> ID：12592025
> 
> 赞同：18
> 
> 时间：2012-09-25T22:27:02.093
> 
> 标签：objective-c, xcode, ios6, uiappearance

I’m using the `appearanceWhenContainedIn` method on certain UI elements that I want to customise in my iOS 6 app. The problem I found is that none of my customisations are applied if I try to provide more than one container class, like so:

```
// Works neither for toolbar nor navbar items
[UIBarButtonItem appearanceWhenContainedIn:[UINavigationBar class], [UIToolbar class], nil]

// Works fine (but only for navbar items, obviously)
[UIBarButtonItem appearanceWhenContainedIn:[UINavigationBar class], nil] 
```

The official docs say that the parameter for this method can be a nil-terminated list of multiple classes, but in my case it never works the way it should. Am I missing something here?

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-09-25T22:44:08.873

从文档：

> **外观当包含在：**
> 
> ...
> 
> **给定包含层次结构**中接收器的外观代理。

这实际上意味着 nil-terminated list 定义的不是 UIBarButtonItem 的容器类列表，而是从上到下的容器层次结构，所以

```
[UIBarButtonItem appearanceWhenContainedIn:[UINavigationBar class], [UIToolbar class], nil] 
```

返回 UINavigationBar 内部的 UIBarButtonItem 的外观代理，而 UINavigationBar 又位于 UIToolbar 内部。

或者

```
[[UIBarButtonItem appearanceWhenContainedIn:[UIToolbar class],[ViewController class], nil] setTintColor:[UIColor redColor]]; 
```

为 ViewController 类中的任何 UIToolBar 中的 UIBarButtonItems 设置红色色调。

因此，要分别设置 UINavigationBar 和 UIToolBar 的外观，您需要 2 次单独调用该`+appearanceWhenContainedIn:`方法

# asp.net-mvc - ASP.NET MVC and Razor to display integer or blank when 0

> ID：12592027
> 
> 赞同：5
> 
> 时间：2012-09-25T22:27:29.770
> 
> 标签：asp.net-mvc, razor

If I have an integer value that I want to display on a page, I can do that a number of ways:

```
<span>@Html.DisplayFor(modelItem => item.UserId)</span>
<span>@item.UserId</span> 
```

But what is the best way to convert that to displaying the value IF UserId != 0\. But if UserId == 0, display an empty string. Is there a way to do it right in Razor syntax or do I need to head to code?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-27T07:46:42.913

为 int 创建一个扩展方法：

```
public static class IntExtensions
{
    public static string EmptyIfZero(this int value)
    {
        if(value == 0)
            return string.Empty;

        return value.ToString();
    }
} 
```

...然后在您的 Razor 视图中，执行以下操作：

```
<span>@item.UserId.EmptyIfZero()</span> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-25T23:21:43.513

```
<span>@((item.UserID == 0) ? "" : @item.UserID.ToString())</span> 
```

或者

```
<span>@if(item.UserID == 0) { <span></span> }
   else { @Html.DisplayFor(m => item.UserID); }
</span> 
```

我认为你可以在一个`if`条件下做到这一点

```
<span>@if(item.UserID != 0) { @Html.DisplayFor(m => item.UserID); } //the browser would render empty string by itself 
```

要呈现内容而不放置冗余（如您所说）`<span>`，请使用`@:`-MVC3 [Razor: Displaying html within code blocks](https://stackoverflow.com/questions/6602419/mvc3-razor-displaying-html-within-code-blocks)和[@: 用于显示内容](http://weblogs.asp.net/scottgu/archive/2010/12/15/asp-net-mvc-3-razor-s-and-lt-text-gt-syntax.aspx)

```
<span>
   @if(item.UserID == 0) {  } //this is redundant too
   else { @Html.DisplayFor(m => item.UserID); 
   }
</span> 
```

请注意，我已将其移至`}`下一行。ASP.Net MVC 不接受

```
<span>
   @if(item.UserID == 0) { @:Some content with no html tag wrapper 
   }
   else { @Html.DisplayFor(m => item.UserID); 
   }
</span> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-25T22:33:18.097

你可以这样做：

`<span>@(item.UserId != 0 ? item.UserId.ToString() : string.Empty)</span>`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-09T15:30:44.060

我认为最好和最可重用的是创建一个模板。

`UserId.vbhtml`因此，您`~/Views/Shared/DisplayTemplates` 使用以下内容创建例如：

在模板中构建所有逻辑，类似于（我在没有检查的情况下打字，我通常在 VB 中编码，所以可能会出现错误）：

```
@model int
@((Model == 0) ? "" : @Model) 
```

然后在您使用的代码中： `@Html.DisplayFor(modelItem => item.UserId, "UserId")`

您还可以在您的类中将 UIHint 属性放在 UserId 上：`[UIHint("UserId")]` 然后您不需要提供模板名称。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-11-10T13:52:33.867

我做了一些更全局的解决方案，显示空白： - 整数：0 - 小数：0.0 - 字符串：“0x0”或“0x0x0”

扩展类：

```
public static class DataTypesExtension
{
    static string[] Keywords = { "0", "0.0", "0.00", "0.000", "0.0000", "0,0", "0,00", "0,000", "0,0000", "0x0", "0x0x0" };
    public static string BlankIfZero(this object n)
    {
        string ret = string.Empty;

        if (n == null)
            return ret;

        string sn = n.ToString().Replace(" ", "");

        if (!DataTypesExtension.Keywords.Contains(sn))
            ret = n.ToString();

        return ret;
    }
} 
```

展示模板：

```
@model object

@using MyProject.Extensions;

@{
    string val = Model.BlankIfZero();
    @val;        
} 
```

在视图模型中：

```
[UIHint("BlankIfZero")]
public int? MyIntProperty { get; set; }

[UIHint("BlankIfZero")]
public decimal? MyDecimalProperty { get; set; }

[UIHint("BlankIfZero")]
public string MyStringProperty { get; set; } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-12-09T07:56:00.817

这是当模型值为**0时显示****整数**或**空白**的另一种方式。

 **模型：

```
[Display(Name = "User Id")]
public int UserId { get; set; } 
```

看法：

```
<span>
    @Html.DisplayNameFor(m => m.UserId)
</span>
<span>
    @Html.TextBoxFor(m => m.UserId, new { @Value = (Model.UserId > 0 ? Model.UserId.ToString() : string.Empty) })
</span> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-02-20T15:25:07.590

就我而言，我发现这更容易：

```
$(document).ready(function () {
        $("#myField").val("");
} 
```

不确定这是否是您正在寻找的东西，但对我来说效果很好。**

# grails - Json response is not coming while using jggrid in grails

> ID：12592028
> 
> 赞同：0
> 
> 时间：2012-09-25T22:27:39.697
> 
> 标签：grails

I am using jqgrid with grails first time and facing some problem.i set up jggrid in my gsp as below

```
<link rel="stylesheet" href="${resource(dir:'css',file:'ui.jqgrid.css')}" />
<link rel="stylesheet" href="${resource(dir:'css/ui-lightness',file:'jquery
ui-1.8.23.custom.css')}" />

<g:javascript library="jquery-1.7.2.min"/>
<g:javascript library="jquery.jqGrid.min"/>
<script type="text/javascript">
        $(document).ready(function() {
            jQuery("#g-grid").jqGrid({
                datatype: "json",
                mtype: 'GET',
                url:  '${createLink(controller: 'roadmap', action: 'listRequestsAsJSON')}',
                colNames: ['Entry Type', 'Life Cycle Status'],
                colModel: [
                            {name:'roadMapEntryTypeCode',index:'roadMapEntryTypeCode', editable:'true'},
                            {name:'lifeCycleStatusCode',index:'lifeCycleStatusCode',editable:'true'}    
                         ],  
                pager: jQuery('#g-pager'), 
                viewrecords: true,
                gridview: true  
                }); 
        });
</script> 
```

and the code in the controller for getting the response is

```
def listRequestsAsJSON = {

def r = AssetRoadmap.findAllByAsetIDAndRoadMapEntryTypeCode(Asset.get(10033),      CodeConstants.ROADMAP_ENTRY_TYPE_CODE_LIFECYCLE, [sort:"roadMapEventStartDate", order:"asc"])

    def jsonCells = r.collect {
        [ id: it.id,
                    cell: [
                        it.roadMapEntryTypeCode,
                        it.lifeCycleStatusCode                  
                    ]
                ]

    }

    def jsonData= [rows: jsonCells]
    render jsonData as JSON

} 
```

When I looked the response in Firefox (using with Firebugs) I am not seeing in it as response but when I manually render the jsp in browser I am getting

> {"rows":[{"id":10172,"cell":["LIFECYCLE","DESTROY"]},{"id":10173,"cell":["LIFECYCLE","ARCHIVE"]},{"id":10174,"cell":["LIFECYCLE","CONTAINMENT"]}]}

which seem to me correct so not sure where is the problem,Any help will be greatly appreciated.Thanks!!!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T23:27:23.140

该请求实际上是将请求重定向到其他地方，因此 json 响应没有到来。我得到了这个 302 状态的线索，虽然是一个很好的学习

# csv - Error #1060 when importing csv in phpmyadmin - extra null columns

> ID：12592029
> 
> 赞同：2
> 
> 时间：2012-09-25T22:27:42.517
> 
> 标签：csv, import, phpmyadmin, mysql-error-1060

How can I get rid of these null columns? I'm importing my csv file to create a table on phpMyAdmin. The sql query looks appropriate but at the end, I get...

```
`Category 1` VARCHAR( 97 ) ,
`Category 2` VARCHAR( 113 ) ,
`NULL` VARCHAR( 71 ) ,
`NULL` VARCHAR( 56 ) ,
`NULL` VARCHAR( 73 ) ,
`NULL` VARCHAR( 97 )
) ENGINE = MYISAM DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci;

MySQL said: 

#1060 - Duplicate column name 'NULL' 
```

Category 2 should be the last column. I can't figure out where the null columns are coming from, or how to get rid of them. The original file is given to me in .xls format. I make some changes and save as csv. I used to upload an xls file (never had problems) but I think our cPanel was upgraded so it's all changed.

So far I've tried deleting 4+ columns at the end while in OpenOffice. I've tried opening the csv in notepad and making sure there was no extra commas or spaces, adding in / to escape. I've tried fiddling with the import options in phpMyAdmin but I'm far from an expert so no luck there.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-23T18:20:35.493

对我来说，我必须选择：

**用,**分隔的列

 ****用"**括起来的列

 **列转义为**“**

**以auto**终止的行

 **并检查**文件的第一行包含表列名**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T20:45:38.170

遇到了这个问题，对我来说修复它的方法不是很直观。

在导入设置中，我检查了用[ " ]**括起来的列。**

这似乎解决了它并且所有导入都很好（据我所知）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T22:25:32.603

我上传了两个 cvs 也有类似的情况。PHPMyAdmin 抱怨一个最后有 2 个 NULL 列，另一个有 6 个。我以为我会通过添加额外的假列来“修复”它，但没有。

原来有些数据有双引号，让mysql误以为列数错误。

只需要检查所有数据以确保它是干净的......我知道它更多的是一种解决方法而不是修复。但我能在短时间内做到最好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-27T00:25:15.407

在我的情况下：我将列分隔符从“更改为”在格式特定选项中的 phpMyAdmin 中相同：从“更改为”******

# c# - How do I download a file by doing a webClient.DownloadFile() which requires a password?

> ID：12592030
> 
> 赞同：0
> 
> 时间：2012-09-25T22:27:49.183
> 
> 标签：c#, http-headers, http-get

The following code is not working because it downloads the actual log-in page of the URL. Yes, the text boxes for username/password. They come down as an .xls file. It's not downloading the actual file. If I go the URL myself, it DOES download the Excel file to my computer. PLEASE NOTE - When I click on the URL, it asks for my credentials.

```
private void btnGet_Click(object sender, EventArgs e)
{
    using (WebClient client = new WebClient()) 
    {
        client.Credentials = new NetworkCredential("username", "password");
        client.DownloadFile("longLink", @"C:\Report.xls");
     }
} 
```

Do I need to maybe provide a header with a session ID??

# c# - Excel 控件 - 动态删除组合框

> ID：12592031
> 
> 赞同：1
> 
> 时间：2012-09-25T22:27:57.950
> 
> 标签：c#, excel, controls, vsto

我已经在我的工作表中动态添加了一个组合框，我想在两个事件结束时动态删除组合框 - 特别是 combobox.LostFocus 和 combobox.KeyDown 事件。

它目前适用于两种情况：

1.  用户手动从下拉列表中选择一个项目
2.  用户部分输入项目并自动完成其余部分的填写，然后用户按键盘上的 Enter 键。

如果用户输入整个文本以进行选择，然后按回车键，则它不起作用。我收到消息：

> 用户代码未处理 COMException：无法获取 OLEObject 类的 Name 属性

Visual Studio 指向行'sheetVSTO.Controls.Remove(myBox);' 在 myBox_LostFocus 事件处理程序中作为失败的来源。

用户展示能够将整个文本键入组合框并按回车键。任何帮助，将不胜感激。

这是我所拥有的（如果需要更详细的信息，请告诉我）：

```
 private void AddComboBox(String[] list)
    {
        Excel.Worksheet sheet = Globals.ThisAddIn.Application.ActiveSheet;
        Microsoft.Office.Tools.Excel.Worksheet sheetVSTO = Globals.Factory.GetVstoObject(sheet);
        Excel.Range cell = Globals.ThisAddIn.Application.ActiveCell;
        Microsoft.Office.Tools.Excel.Controls.ComboBox myBox= new Microsoft.Office.Tools.Excel.Controls.ComboBox();
        myBox.Name = "button1";
        myBox.Items.AddRange(list);
        myBox.KeyDown += new KeyEventHandler(myBox_KeyDown);
        myBox.LostFocus += new EventHandler(myBox_LostFocus);
        myBox.AutoCompleteMode = AutoCompleteMode.SuggestAppend;
        myBox.AutoCompleteSource = AutoCompleteSource.ListItems;
        myBox.Focus();
        Microsoft.Office.Tools.Excel.ControlSite myBoxControl = sheetVSTO.Controls.AddControl(myBox, cell, boxName);
    }

    void myBox_KeyDown(object sender, KeyEventArgs e)
    {
        if (e.KeyCode == System.Windows.Forms.Keys.Enter)
        {
            Microsoft.Office.Tools.Excel.Controls.ComboBox myBox = sender as Microsoft.Office.Tools.Excel.Controls.ComboBox;
            Excel.Worksheet sheet = Globals.ThisAddIn.Application.ActiveSheet;
            if (myBox.SelectedIndex > -1)
            {
                Microsoft.Office.Tools.Excel.Worksheet sheetVSTO = Globals.Factory.GetVstoObject(sheet);
                sheetVSTO.Controls.Remove(myBox);
            }
        }
    }
    void myBox_LostFocus(object sender, EventArgs e)
    {
        Microsoft.Office.Tools.Excel.Controls.ComboBox myBox = sender as Microsoft.Office.Tools.Excel.Controls.ComboBox;
        Excel.Worksheet sheet = Globals.ThisAddIn.Application.ActiveSheet;
        Microsoft.Office.Tools.Excel.Worksheet sheetVSTO = Globals.Factory.GetVstoObject(sheet);
        sheetVSTO.Controls.Remove(myBox);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T14:54:22.213

我找到了答案！

我将我的 2 个删除调用更改为：

```
myBox.BeginInvoke(new MethodInvoker(delegate { sheetVSTO.Controls.Remove(myBox); })); 
```

# facebook - How facebook mobile autentication work

> ID：12592032
> 
> 赞同：0
> 
> 时间：2012-09-25T22:27:58.420
> 
> 标签：facebook, authentication

I'm curious to know how facebook has implemented authentication on mobile app.

The app is installed on the mobile device, then (the first time), it ask you email and password and store them. Where? In a file? Or in a sqlite db? And how facebook protect them?

The next time, the app doesn't prompt the login, so i think that user and password are sent automatically by the app. Also I read that, after the login, the facebook's api generate a token used during the request/responses between mobile and server.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T22:33:23.437

我猜这将是与您的帐户相关联的令牌，以允许移动客户端和 facebook 服务器之间进行通信。我怀疑您的密码和用户名是否存储在本地任何地方的文件中，但它们会存储在加密的 facebook 服务器中的某个地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:38:12.550

我相信它存储在 sqlite db 中。因为有时当我尝试通过慢速网络登录时，或者如果连接不成功，我会在 logcat 中收到此特定错误消息

“sqlite 代码返回 0”。

# c# - Taking a C# sha512 hash and compare it in php

> ID：12592036
> 
> 赞同：3
> 
> 时间：2012-09-25T22:28:24.077
> 
> 标签：c#, php, passwords, sha512

I have looked and found code to take a PHP sha512 hash and match it inside C#. I am currently looking for a way to go from a hash that was made in C# and get the same result in PHP. We are slowly moving away from asp.net to PHP and need a way to check our passwords in the database. Here is the C# code used to make the hash.

```
// Create a hash from a pwd and salt using sha512
    public static string CreatePasswordHash(string _password, string _salt)
    {
        string saltAndPwd = String.Concat(_password, _salt);
        SHA512 sha512 = new System.Security.Cryptography.SHA512Managed();

        byte[] sha512Bytes = System.Text.Encoding.Default.GetBytes(saltAndPwd);

        byte[] cryString = sha512.ComputeHash(sha512Bytes);

        string hashedPwd = string.Empty;

        for (int i = 0; i < cryString.Length; i++)
        {
            hashedPwd += cryString[i].ToString("X");
        }

        return hashedPwd;
    } 
```

In PHP I have tried to get it to match but it is off by just a few bytes it seems.

```
function CreatePasswordHash($_password, $_salt)
    {            
        $saltAndPwd = $_password . $_salt;            
        $hashedPwd = hash('sha512', $saltAndPwd);      
        return strtoupper($hashedPwd);
    } 
```

When using the above with the same salt and password here is the results I get. The first result is from C#, and the second result is from PHP:

```
60BB73FDA3FF7A444870C6D0DBC7C6966F8D5AD632B0A02762E0283051D7C54A5F4B01571D1A5BC8C689DBC411FEB92158383A56AFC6AE6074696AF36E16    
60BB73FDA3FF7A444870C6D0DBC7C609066F8D5AD632B0A02762E0283051D7C54A5F4B001571D1A5BC8C689DBC411FEB092158383A56AFC6AE6074696AF36E16 
```

Any ideas on why these are not matching up? Does it have to do with endian byte order?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T22:41:49.603

尝试

`hashedPwd += cryString[i].ToString("X2");`

编辑PHP：

```
function CreatePasswordHash($_password, $_salt)
{
    $saltAndPwd = $_password . $_salt;
    $hashedPwd = hash('sha512', $saltAndPwd);

    $hex_strs = str_split($hashedPwd,2);

    foreach($hex_strs as &$hex) {
        $hex = preg_replace('/^0/', '', $hex);
    }
    $hashedPwd = implode('', $hex_strs);

    return strtoupper($hashedPwd);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T22:41:53.947

C# 打印输出不包括前导零。

代替

```
hashedPwd += cryString[i].ToString("X"); 
```

和

```
hashedPwd += cryString[i].ToString("X2"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T22:45:43.213

仔细检查您在 C# 和 PHP 中使用相同的字符编码。GetBytes 根据编码返回不同的结果。System.Text.Encoding.Default 取决于操作系统的本地化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T22:36:45.637

你可以试试[open_ssl_digest](http://www.php.net/manual/en/function.openssl-digest.php)

```
echo openssl_digest($saltAndPwd, 'sha512'); 
```

如果你有 PHP >= 5.3

您还可以使用[hash_algos](http://php.net/manual/en/function.hash-algos.php)函数来查看您的系统支持哪些算法。

高温高压

# c++ - Exporting a static function

> ID：12592037
> 
> 赞同：1
> 
> 时间：2012-09-25T22:28:30.877
> 
> 标签：c++, visual-c++

I have a class defined in headerfile x.h in dll-1 which is

* * *

```
class A{
   public:
   static int val;
__declspec(dllexport) static void setval(int v) {val = v;} 
}; 
```

* * *

and x.cpp has

* * *

```
int A::val = 256; 
```

* * *

Now I built dll-1 and it went through, but the other dlls that link this dll failed to build with error unresolved external symbol **public: static int A::val** . This got resolved when I defined the exported function in x.cpp. but I don't understand why it broke. Thanks.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T23:11:59.750

因为您内联定义了函数，所以编译器可以在您调用它的地方自由地创建该函数的副本。这些副本无法看到变量，因为它没有被导出。

当您将函数定义移动到 .cpp 时，所有调用都会返回到 DLL，这可以在创建 DLL 时解析变量。

# r - Plotting a stacked bar plot?

> ID：12592041
> 
> 赞同：4
> 
> 时间：2012-09-25T22:28:52.693
> 
> 标签：r, charts, ggplot2, bar-chart

I have the following data:

```
structure(list(Time = c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 4L, 4L, 4L, 4L, 4L, 4L, 
4L, 4L, 4L, 4L, 4L, 4L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 
5L, 5L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 7L, 7L, 
7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 8L, 8L, 8L, 8L, 8L, 8L, 
8L, 8L, 8L, 8L, 8L, 8L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 
9L, 9L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 
10L), Type = c(1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 3L, 3L, 3L, 3L, 
1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 3L, 3L, 3L, 3L, 1L, 1L, 1L, 1L, 
2L, 2L, 2L, 2L, 3L, 3L, 3L, 3L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 
3L, 3L, 3L, 3L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 3L, 3L, 3L, 3L, 
1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 3L, 3L, 3L, 3L, 1L, 1L, 1L, 1L, 
2L, 2L, 2L, 2L, 3L, 3L, 3L, 3L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 
3L, 3L, 3L, 3L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 3L, 3L, 3L, 3L, 
1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 3L, 3L, 3L, 3L), Value = c(848565.34, 
1463110.61, 626673.64, 277708.41, 841422.11, 956238.14, 461092.16, 
208703.75, 800837.48, 1356164.25, 549509.34, 300241.53, 851247.9714, 
1353358.318, 598536.5948, 307485.0918, 332042.2275, 666157.8721, 
194981.1566, 79344.50328, 831003.6952, 1111311.517, 521632.3074, 
274384.1731, 1174671.569, 1070301.745, 454876.1589, 351973.2418, 
5631710.101, 279394.6061, 119034.4969, 39693.31587, 1166869.32, 
1156855.09, 369816.8152, 274092.5751, 924474.1129, 975028.0207, 
449213.7419, 213855.3067, 1967188.317, 178841.604, 43692.69319, 
12493.90538, 835142.6168, 876273.4462, 354154.644, 182794.3813, 
1158096.251, 998647.6908, 566726.9865, 195099.4295, 1798902.332, 
171519.4741, 81644.02724, 12221.41779, 1301775.314, 920464.9992, 
294140.4882, 175626.9677, 2179780.499, 1838687.535, 978775.2674, 
366668.3462, 5385970.324, 177527.1577, 65310.32674, 5986.871716, 
2250834.171, 1547858.632, 666444.2992, 251767.3006, 1786086.335, 
1597055.451, 563976.9719, 309186.1626, 487105.824, 279712.1658, 
86471.46603, 24434.05486, 1563940.414, 1409428.038, 531425.682, 
257056.5524, 1685501.271, 1371943.438, 881348.5022, 313355.8284, 
170771.9118, 155596.7479, 59881.60825, 12090.57989, 1668571.543, 
1150257.058, 563054.758, 306767.0344, 2214849.859, 1724719.891, 
822092.2031, 443194.4609, 8897796.235, 87491.42925, 10699.30103, 
18131.89738, 2137240.993, 1476873.778, 741685.9913, 549539.9735, 
1362085.657, 1266106.09, 448653.8889, 278236.8416, 1671665.39, 
95239.07396, 54173.57043, 10125.82011, 1335200.152, 1167824.903, 
426738.1845, 261255.2092)), .Names = c("Time", "Type", "Value"
), row.names = c(NA, -120L), class = "data.frame") 
```

I am trying to plot a stacked bar graph that looks like this:

![enter image description here](../Images/44015a83a4ca73a1ddd3d7b35e651aae.png)

I know that adding `position="identity"` or `position="dodge"` produces different types of bar plots but am not sure how to produce the above chart with both types. Any suggestions?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-25T22:50:29.207

```
ggplot(df, aes(x = factor(Time), y = Value, fill = factor(Type))) + 
geom_bar(stat="identity", position = "stack") 
```

![在此处输入图像描述](../Images/455739bddd5d1c947bd2ca6754a68726.png)

```
 ggplot(df, aes(x = factor(Time), y = Value, fill = factor(Type))) + 
 geom_bar(stat="identity", position = "dodge") 
```

![在此处输入图像描述](../Images/f61f64160d61b1a88339b957a39cff47.png)

你可以做一个或另一个，但不能同时做。当它们是 时`dodged`，将使用不同的类型值。通过添加颜色轮廓，您可以看到这一点。

```
 ggplot(df, aes(x = factor(Time), y = Value, fill = factor(Type))) + 
 geom_bar(stat="identity", position = c("dodge"), colour = 'black') 
```

![在此处输入图像描述](../Images/df2cfbbaec761d66723aa7049faa1622.png)

# html - CSS 表格，不同尺寸

> ID：12592058
> 
> 赞同：1
> 
> 时间：2012-09-25T22:30:19.913
> 
> 标签：html, css, responsive-design, css-float, css-tables

我正在开发一个响应式布局，将一些`<div>`框显示为矩形网格的一部分：

[http://sl.cosd.com](http://sl.cosd.com)

您可以在此页面上看到的六个框在 HTML 源代码中都未分组，都在一行中：

```
<div class="control">
<div class="controlContent">
<a>SOME VARIABLE-HEIGHT CONTENT including an image which might float</a>
</div>
</div> 
```

div首先`control`将框的百分比宽度分配给整体，然后是屏幕宽度的 1/2 或 1/3，因此随着屏幕尺寸的增加，它们会加倍或加倍成行。`controlContent`div 分配诸如填充、边距、背景`border-radius`等属性。

我把它想象成一组线性的框，符合标准且对屏幕阅读器友好，可以像表格一样通过 CSS 显示。我知道 CSS2.1 允许为元素分配属性，例如：

```
display: table;
display: table-row;
display: table-cell; 
```

***我的主要问题：***我已经分配`display: table-cell`给这些元素（通过`controlContent`div），这可以防止内容内的边距塌陷，但没有为类似单元格的 div 提供统一的高度。***我需要一种方法让同一行上的所有兄弟姐妹都具有匹配的高度。***

较小的单元格通常在其下方有间隙，其中渐变背景仅覆盖单元格的框高度。（更糟糕的是，这个单元格数组后面的文本有时会填补这些空白：另一个可以通过演示标记修复的问题，尽管当第一个问题解决后可能会消失。）

我想我理解了这个问题的基本原理：`<div>`我告诉过的每一个表现得像表格单元格的东西都没有任何东西可以匹配它的高度，因为我无法将元素分组到`<div>`我可以分配`display: table-row`属性的包含中，因为这个根据 CSS 媒体查询对更改进行分组。

在阅读有关该问题的信息时，我听说过正在创建*匿名表框*和*匿名表行*，但不知道在这种情况下如何使用它们。由于我使用 CSS`:nth-child()`选择器来清除每个新行开头的浮动框，我希望我也可以使用这些选择器在每个这样的点建立一个新的表格行......但是如何？

我没有嫁给任何特定的解决方案。我只是想知道这样做的最佳实践方式。我希望找到一个不涉及演示标记的解决方案，特别是因为通用解决方案应该为任意数量的单元格提供响应式可变维度表，而不仅仅是像 6 这样的小而容易分解的数字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T23:25:36.413

`display:table-cell;` *应该*给 div/columns 相同的高度，只要***父***div 已`display:table;`设置。

[检查这个小提琴](http://jsfiddle.net/gionaf/9DnWp/)（您可以根据需要添加/删除任意数量的列）。

* * *

另一种解决方案是给 .control 一个固定的高度，然后您可以`height:100%;`在 controlContent 上使用。

如果您只需要使用百分比，那么您必须在 .controlContent 的所有父容器上声明一个**高度****，**直到`html`和`body`：

```
html, body, .control, .controlContent {
    height:100%;
} 
```

显然，这只是一个简化。这是最可靠的方法，因为`table-cell`某些较旧的浏览器无法正确呈现。

另一方面，您总是必须知道所有容器的高度（以像素或百分比为单位）。

* * *

然后，有[假列方法](http://www.alistapart.com/articles/fauxcolumns/)，但我认为它不适合你的情况。

* * *

最后，还有 JavaScript / jQuery 方法，在您的情况下，它类似于

```
$(document).ready(function(){
    var higherContent = 0;
    $('.controlContent').each(function() {
        var currentHeight = $(this).height();
        if( currentHeight > higherContent ) higherContent = currentHeight;
    }).height(higherContent);

}); 
```

基本上（当页面加载时）通过所有 controlContent 并设置变量中最高的值`higherContent`。然后将此值分配给所有 controlContent。

无论如何，这可能不是最好的 jQuery 函数 :-) 并且您必须针对您的媒体查询所针对的每个分辨率进行调整。

* * *

如果我是你，我可能会选择这种`table-cell`方法，这样你就可以为不同的分辨率设置不同的宽度，并且布局将适应大多数现代桌面/移动浏览器。但一定要在尽可能多的设备上进行测试！

**编辑：**我看到您正在使用最小宽度媒体查询。您可以通过以下方式更改代码：

```
div.controlContent {
    /* other stuff */
    display: block;
    /* other stuff */
}
@media only screen and (min-width: 480px) {
    /* other stuff */
    div.controlContent {
        display: table-cell;
    }
    /* other stuff */
} 
```

# javascript - 未捕获的 TypeError：无法调用 null 的方法“get”

> ID：12592072
> 
> 赞同：0
> 
> 时间：2012-09-25T22:31:40.613
> 
> 标签：javascript, google-chrome, var

我知道有很多关于这个问题的线索，我一直在寻找我的具体案例，但我没有找到任何相关的东西。

我正在此[页面中实现此](http://tommywebdesigner.com/Producto%20copy.html)[javascript cashRegister 效果](http://tommywebdesigner.com/untitle.html)，但我收到此错误消息

“未捕获的 TypeError：无法调用 null 的方法 'get'”

它指向 plugin.js 的原始 18：

```
var current_value = this.element.get('text'); 
```

什么可能导致此错误？我现在应该尝试做什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T22:39:55.800

我认为您的问题出在这一行：

```
var total = $('total'); 
```

选择器的`total`意思是“查找名称为 'total' 的元素”。你真正想要的是找到*id*为“total”的元素，所以改为：

```
var total = $('#total'); 
```

**编辑**：

`$`我认为一些混乱源于您引用的网站中的`$`来自 MooTools的事实。在您的页面中，您包含 jQuery，它有一个完全不同的`$`对象，其行为也不同。我相信这`$('total')`就是您在 MooTools 中按 ID 选择元素的方式。

我不确定如何在没有命名冲突的情况下加载这两个库，但如果你能弄清楚，请确保你使用 MooTools 来选择总数而不是 jQuery。

**编辑 2**：

经过一番研究（我不熟悉 MooTools），我发现您可以替换`$('total')`为：

```
document.id('total') 
```

# asp.net - CookieContainer 和 Response.Cookies 集合有什么区别？

> ID：12592076
> 
> 赞同：6
> 
> 时间：2012-09-25T22:32:12.563
> 
> 标签：asp.net, asp.net-mvc, httpwebrequest, system.net.httpwebrequest

我一直在对此进行一些研究，但找不到直接的答案。

容器中是否存储了一些我无法使用 Response.Cookies 集合访问的 cookie？使用这些对象的请求之间的 cookie 是如何处理的？是否有一些 cookie 存储在容器中，而其他 cookie 则没有？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T22:36:20.723

从您在此问题上使用的标签来看，您似乎感到困惑。

`CookieContainer`并且在您的程序是 HTTP 客户端时`CookieCollection`使用。存储与单个域名关联的 cookie。将所有 cookie 存储在所有域名上。`HttpWebRequest``CookieCollection``CookieContainer`

在 ASP.NET 中，当您的程序是 HTTP 服务器时使用`HttpRequest.Cookies`is和 is 。`HttpCookieCollection`它存储客户端发送到服务器的cookie。因为只有一个域名（即您的），所以不需要二维集合。

两组类 (`CookieContainer`和`CookieCollection`vs `HttpCookieCollection`) 彼此完全不相关。

在这篇文章中，我提供了 .NET 中 cookie 集合类的一些基本背景，但我不明白你的问题。你想做什么？

# google-maps-api-3 - Google Maps API V3 -> 利用 MarkerCluster 但集群本身是否特定于绘制的多边形/区域？

> ID：12592079
> 
> 赞同：0
> 
> 时间：2012-09-25T22:32:40.397
> 
> 标签：google-maps-api-3, google-maps-markers, markerclusterer

好的，让我以我创建了很多谷歌地图的事实作为这个问题的开头，但它们严格来说是表示路线的标记和折线以及一些处理程序交互。

现在，我希望基本上展示一张世界地图，主要是北美，我想将这个大陆划分为我的预定义区域，其中包含我拥有的一些纬度/经度。使用这些区域，我想绘制类似多边形的东西，每个区域具有不透明和不同的颜色。

然后我想使用标记聚类，但我希望聚类特定于这些区域。我环顾四周，但没有找到这样的例子。我看过一些页面说你可以做到这一点，但不知道你将如何去做。同样，在绘制多边形和使用标记簇时​​，我绝对是个菜鸟。我知道这个问题相当模糊，但只是寻找一个示例/想法开始，所以我不想针对这个特定的 api 编写一堆代码，然后发现这是不可能的。

非常感谢任何想法或建议....谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T01:51:20.040

可以做到，但需要重写 MarkerClusterer（可能会简化它）。

您需要确定如何表示和加载集群边界多边形（KML、GeoJSON、原生 Google Maps API v3 多边形），并且可能使用[google.maps.geometry.poly.containsLocation(point:LatLng, polygon:Polygon )](https://developers.google.com/maps/documentation/javascript/reference#poly)而不是 LatLngBounds.contains 来确定哪个集群“拥有”一个标记。

# android - 在 WebView 中保持缩放级别

> ID：12592093
> 
> 赞同：1
> 
> 时间：2012-09-25T22:34:21.063
> 
> 标签：android, webview

> **可能重复：**
> [WebView：如何跨会话保留用户的缩放设置？](https://stackoverflow.com/questions/2959833/webview-how-to-preserve-the-users-zoom-settings-across-sessions)

我正在开发一个简单的 android 应用程序，它在我的 WebView 中加载一个初始 URL，然后用户可以自由放大/缩小和导航。

当用户点击链接时，“缩放级别”会丢失（或重置），用户必须再次放大/缩小！这让用户感到沮丧！我找不到如何保存/保留当前缩放。（我尝试过使用 onScaleChanged 事件，但似乎它是在用户点击后才生成的）

我已经使用 onPageFinished 解决了：

```
@Override
public void onPageFinished(WebView webView, String url) {
webView.loadUrl("javascript:(function() { " +  
"document.getElementsByTagName('body')[0].style.zoom='" + yourzoomvariable + "'; })()");
} 
```

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T01:41:29.110

你对你展示的 html 有权力吗？您也可以在 html 内使用标头内的元标记调整缩放和缩放：

例如：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=0.5,  maximum-scale=2.0"> 
```

编辑：

您还可以在每次加载完成时注入该元标记，如下面的代码，用于将背景颜色更改为渐变。

```
public void onPageFinished(WebView view, String url) {

            //styling

            webview.loadUrl("javascript:(function() { " +  
                    "document.getElementsByTagName('body')[0].style.background = '-webkit-gradient(linear, 0% 0%, 0% 100%, from(#143b8a), to(#266af3))'; " + 
                    "})()");  

        } 
```

您也可以使用此处解释的 zoomin 和 zoomout 值[如何以编程方式放大/缩小 WebView 的内容？](https://stackoverflow.com/questions/5741492/how-to-zoom-in-out-the-content-of-a-webview-programmatically) 然后你可以在那里保存状态，用户只需要调整它。

# ios - 遇到 NSFileManager defaultManager 时 iPhone 模拟器不工作

> ID：12592102
> 
> 赞同：0
> 
> 时间：2012-09-25T22:34:51.817
> 
> 标签：ios, xcode, simulator, nsfilemanager

我对iOS开发很陌生，但这让我非常困惑......

我的应用程序正在做一个简单的检查文件是否存在，如下所示：

```
if ([[NSFileManager defaultManager] fileExistsAtPath:[self.countDatabase.fileURL path]]) {.... 
```

这在上周运行良好，并且在 iOS 设备本身上仍然运行良好。但是当 iPhone 模拟器到达这行代码时，它就……停止了。没有错误，它不会冻结，它只是停止。我可以在其中启动其他操作，但它永远不会完成之前启动的操作。我不明白。自上周以来，这台 Macbook 上唯一发生的变化是我将 OSX 更新到 10.8.2 并更新到 iTunes 10.7。

有没有人遇到过这个或知道如何进一步调试这个？如果我单步执行代码，我会到达这一行，它会停止单步执行。就好像模拟器认为它已经完成了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T22:42:29.780

因为我用了很多次：

```
 [[NSFileManager defaultManager] fileExistsAtPath:[[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0] stringByAppendingPathComponent:[NSString stringWithFormat:@"file.pdf"]]] 
```

似乎`[self.countDatabase.fileURL path]`返回错误的值作为路径。我想`NSLog`看看里面有什么。

# python - Python - 将原始二进制转储转换为 ASCII HEX 字节

> ID：12592105
> 
> 赞同：0
> 
> 时间：2012-09-25T22:35:09.007
> 
> 标签：python, binary, ascii

除了这个问题：[使用python处理和使用二进制数据十六进制](https://stackoverflow.com/questions/12574587/handling-and-working-with-binary-data-hex-with-python) （感谢我收到的很棒的指针）我被困在工具的最后一个方面。

我基本上是在为我拥有超过 EOF 标记的数据的文件编写一个清洁器。这些额外的数据意味着他们无法通过某些验证工具。我需要剥离额外的数据，以便将它们呈现给验证器，但是我不想丢弃这些数据（实际上我必须保留它......）

我编写了一个 XML 容器来保存数据和其他一些出处/审计类型值，但我（仍然）坚持在原始二进制文件和我可以“烘焙”到文件中的东西之间优雅地移动。

例子：

jpg 文件以（十六进制编辑器视图）结尾 `96 1a 9c fd ab 4f 9e 69 27 ad fd da 0a db 76 bb ee d2 6a fd ff 00 ff d9 ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff`

jpg 的 EOF 标记是`ff d9`，因此清理器在文件中向后工作，直到它与 EOF 标记匹配。在这种情况下，它将创建一个新的 jpg 文件`ff d9`，然后尝试将剥离的数据写入 XML（通过 elementTree 库）：`changeString.text =str(excessData)`

当然这不会起作用，因为 XML 编写器正在寻找编写 ASCII 而不是二进制转储。

在上述情况下，`UnicodeDecodeError: 'ascii' codec can't decode byte 0xff in position 0: ordinal not in range(128)`我可以看到错误是因为它不是有效的 ASCII 字符

因此，我的问题是，我如何优雅地处理这些原始数据，以便将来可以存储和使用？（我打算接下来写一个'uncleaner'，它可以获取干净的文件和XML并重建原始文件......）

______编辑_______

使用下面的建议，这是回溯：

```
Traceback (most recent call last):
  File "C:\...\EOF_cleaner\scripts\test6.py", line 87, in <module> main()
  File "C:\...\EOF_cleaner\scripts\test6.py", line 73, in main splitFile(f_data, offset)
  File "C:\...EOF_cleaner\scripts\test6.py", line 60, in splitFile makeXML(excessData)
  File "C:\...\EOF_cleaner\scripts\test6.py", line 53 in makeXML ET.ElementTree(root).write(noteFile)
  File "c:\python27\lib\xml\etree\ElementTree.py", line 815, in write serialize(write, self._root, encoding, qnames, namespaces)
  File "c:\python27\lib\xml\etree\ElementTree.py", line 934, in _serialize_xml_serialize_xml(write, e, encoding, qnames, None)
  File "c:\python27\lib\xml\etree\ElementTree.py", line 934, in _serialize_xml_serialize_xml(write, e, encoding, qnames, None)
  File "c:\python27\lib\xml\etree\ElementTree.py", line 934, in _serialize_xml_serialize_xml(write, e, encoding, qnames, None)
  File "c:\python27\lib\xml\etree\ElementTree.py", line 932, in _serialize_xml write(_escape_cdata(text, encoding))
  File "c:\python27\lib\xml\etree\ElementTree.py", line 1068, in _escape_cdata  return text.encode(encoding, "xmlcharrefreplace")
  UnicodeDecodeError: 'ascii' codec can't decode byte 0xff in position 0: ordinal not in range(128) 
```

扔东西的那一行是`changeString.text = excessData.encode('base64')`（第45行）和`ET.ElementTree(root).write(noteFile)`（第53行）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T22:40:16.280

使用[Base64](https://en.wikipedia.org/wiki/Base64)：

```
excessData.encode('base64') 
```

`.decode('base64')`稍后通过简单的调用很容易将其转换回二进制数据。

Base64 编码为安全的 ASCII 数据，以合理紧凑的格式包含在 XML 中；每 3 个字节的二进制信息变成 4 个 Base64 字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T22:41:22.810

要将原始字节转换为空格分隔的 ASCII 十六进制，您可以使用以下内容：

```
>>> a = "abc\x01\x02"
>>> print(" ".join("{:02x}".format(x) for x in a))
61 62 63 01 02 
```

但是，正如其他答案中提到的那样，Base64 之类的东西可能会更高效，更容易使用。

# mysql - java.sql.Clob 阅读：奇怪的结果 b/w MySQL 和 Oracle

> ID：12592107
> 
> 赞同：0
> 
> 时间：2012-09-25T22:35:13.127
> 
> 标签：mysql, oracle, jdbc

我得到了一个用于读/写大文本的统一 JDBC 代码。列是 Oracle 上的 CLOB 和 MySQL 上的 TEXT。以下代码

```
java.sql.Clob aClob = resultSet.getClob(COLUMN_NAME);
java.io.InputStream aStream = aClob.getAsciiStream();
int av = aStream.available(); 
```

在 MySQL (Connector/J 5.0.4) 上给出相关值，但在 Oracle (Oracle JDBC driver 11.2.0.2) 上给出零。`Clob.length()`幸运的是，两者都给出了正确的值，`InputStream.read()`最多 -1 的作品也有，所以还有其他方法可以统一获取数据。

[Javadoc 给出了](http://docs.oracle.com/javase/6/docs/api/java/io/InputStream.html#available%28%29)这个奇怪的注释：

> InputStream 类的可用方法总是返回 0。

那么哪个司机是对的呢？不，我不想将供应商特定的包拖到代码中:-) 这个问题是 JDBC 中立的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T14:28:17.243

我很想说两位司机都是对的。

该`available()`方法的 Javadoc 似乎建议返回的值是 InputStream 当前已缓存的字节数的估计值，并且无需 I/O 操作即可返回给您。它缓存了多少字节，以及它如何进行缓存，在我看来是一个实现细节。这些值不同的事实仅表明这两个驱动程序的实现方式不同。该方法的 Javadoc 中没有任何`available()`内容向我表明任何一个驱动程序都做错了什么。

我猜 Oracle 驱动程序`CLOB`在执行查询后不会立即缓存任何数据，所以这可能是该`available()`方法返回 0 的原因。但是，一旦从流中读取数据，`available()`Oracle 驱动程序的方法就不会更长的返回 0，因为似乎 Oracle JDBC 驱动程序已进入数据库并从`CLOB`列中提取了一些数据。另一方面，一旦查询完成执行，MySQL 似乎更主动地从 TEXT 列中实际提取数据。

阅读了该`available()`方法的 Javadoc 后，我不确定为什么要使用它。你用它做什么？

# jquery - 在悬停和键入时隐藏输入标签

> ID：12592109
> 
> 赞同：0
> 
> 时间：2012-09-25T22:35:45.287
> 
> 标签：jquery, forms, hover

我创建了一个像这样的表单域：

```
<p>
<label for="your-name" style="display: block; ">Your name</label>
<span>
<input type="text" name="your-name" value="" class="" size="40">
</span>
</p> 
```

此代码无法更改。我已经将标签绝对定位在字段上，并且当我将鼠标悬停在字段上时，我已经应用了 jQuery 来隐藏它，如下所示：

```
jQuery('form p').hover(
   function() {
        jQuery(this).find("label").hide();
   },
   function() {
        jQuery(this).find("label").show();    
    }
); 
```

但是，这仅在鼠标悬停在字段上时有效。如果在字段中输入并悬停，有没有办法隐藏标签？

谢谢罗伯特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T22:41:59.220

那是一种非常混乱的方式..这就是我要做的事情：

HTML：

```
<input type="text" name="your-name" id="your_name" value="Your Name" class="" size="40"> 
```

jQuery：

```
$('#your_name').focus(function(){
  if ($(this).val() == 'Your Name'){
      $(this).val('');
  }
}).blur(function(){
  if ($(this).val() == ''){
      $(this).val('Your Name');
  }
}); 
```

或使用詹姆斯提到的占位符

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T22:42:37.793

如果你想使用你现有的方法，你可以这样做：

演示：http: [//jsfiddle.net/SLjMn/](http://jsfiddle.net/SLjMn/)

# php - 如何确保服务器与客户端保持连接

> ID：12592111
> 
> 赞同：0
> 
> 时间：2012-09-25T22:36:00.613
> 
> 标签：php, javascript, mysql, security, nowjs-sockets

我正在使用 PHP 框架、Red5 服务器和适用于 node.js 的 now.js 框架开发视频聊天应用程序。每当两个用户进入私人聊天时，其中一个正在付款，另一个正在接收该金额。现在，我需要确保每分钟更新一次现金余额的数据库——如果我要使用 javascript 来做 ajax 帖子，我如何确保收款人没有以某种方式阻止这些帖子？还是我应该使用不同的方法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T22:43:00.357

用于`setInterval()`调用使用 ajax 的函数

# c# - C# P\Invoke DLL 没有进入 C++ 的入口点？

> ID：12592113
> 
> 赞同：1
> 
> 时间：2012-09-25T22:36:15.040
> 
> 标签：c#, pinvoke, dllimport

我有一个带有方法“Foo()”的 C++ Dll“TheFoo.dll”

我可以通过简单地调用来访问使用此方法的其他 C++ 代码：

```
Foo(); 
```

我相信该方法确实具有：

```
 __declspec( dllexport ) 
```

因此，通过阅读我对 P/Invoke 所做的阅读，我认为我应该能够简单地从我的 C# 代码中调用相同的方法：

```
namespace PInvokeExample1
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

        }

        [DllImport(@"C:\MyFolder\TheFoo.dll")]
        public static extern
            void Foo();

        private void button1_Click(object sender, RoutedEventArgs e)
        {
            Foo();

        }

    }
} 
```

当我运行它时，我得到一个错误：

```
Unable to find an entry point named 'Foo' in DLL 'C:\MyFolder\TheFoo.dll'. 
```

任何想法为什么找不到它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-26T00:19:46.467

C++ 语言支持重载，就像 C# 一样。您可以导出一个函数`void Foo(int)`和一个函数`void Foo(double)`。显然这两个函数不能都导出为“Foo”，DLL 的客户端不知道该选择哪一个。所以不是。

*C++ 编译器通过修饰*函数名解决了这个问题。添加使 Foo(int) 与 Foo(double) 不同的额外字符。`Dumpbin.exe /exports foo.dll`您可以通过从列出导出函数名称的 Visual Studio 命令提示符运行来查看这些修饰名称。假设您的声明是相关的，您会看到`?Foo@@YAXXZ`.

因此，您的 C# 程序中的相应声明应为：

```
 [DllImport("foo.dll", EntryPoint = "?Foo@@YAXXZ", 
               ExactSpelling = true, CallingConvention = CallingConvention.Cdecl)]
    private static extern void Foo(); 
```

有一些方法可以更改 C++ 函数声明以使 C# 声明更容易。这实际上不是一个好主意，这些修饰名称实际上有助于发现错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T22:39:52.077

您应该提供有关 C++ 的更多信息。尝试`extern "C" __declspec(dllexport)`改用。C++ 以奇怪的名称导出，因此使用`extern "C"`可以避免这种情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T22:40:06.460

如果你没有在你的 dll 中声明它为 extern "C"，那么它的名字可能已经被“损坏”了。您可以使用 Dependency Walker 之类的工具来查看您的 dll 导出的符号。

# ios - UIScrollView 内 UIScrollView 内 UIScrollView

> ID：12592114
> 
> 赞同：1
> 
> 时间：2012-09-25T22:36:16.180
> 
> 标签：ios, uiscrollview, uikit

我有`UIScrollView`一个水平`UIScrollView`内一个垂直内的多向`UIScrollView`。当我达到最里面的滚动视图的水平内容限制时，包含的水平滚动视图开始按照我的意愿滚动​​。

但是当我达到最内层滚动视图的垂直内容限制时，我没有在顶级垂直滚动视图上获得任何操作。

如果所有垂直内容在最内层都可见（因此不可能垂直滚动），那么顶级垂直滚动视图就可以正常工作。关于如何解决这个问题的任何线索？

如果我将他们的照片分页滚动视图嵌入到垂直滚动视图中，我会在 Apple“PhotoScroller”示例代码中得到相同的行为。如果照片没有缩放，那么水平和垂直滚动视图都可以工作。如果照片已缩放但由于达到水平或垂直限制而停止平移，则只有水平滚动视图有效。

这是使用将照片分页实现为 UIScrollView 而不是 UIPageViewController 的示例代码的旧版本。使用当前 UIPageViewController 版本，缩放照片时无法进行分页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T16:09:29.663

为了回答我自己的问题，我使用了 gestureRecognizerShouldBegin: delegate 来确定平移手势开始时最里面的 scrollView 是否处于边界。如果是这样，我回复了 shouldRecognizeSimultaneouslyWithGestureRecognizer: delegate 以在内部 scrollView 和垂直 scrollView 上启用 UIPanGestureRecognizer。这允许一个手势同时滚动两者。然后，我在两个滚动视图上都覆盖了 setContentOffset 以抑制滚动错误的滚动视图。

我认为更好的答案可能是将内部 UIScrollView 上的 UIPanGestureRecognizer 替换为自定义手势识别器，该手势识别器在边界开始并拖过边界时会自行取消。但是，我无法让它发挥作用。

我仍然不清楚为什么它的水平版本只是自动工作。也许 UIScrollViewPanGestureRecognizer 中有一些特殊情况处理来处理水平情况，或者与即时 superView 交互。

# azure - 我的带有 WIF 的 MVC 4 不能在 Azure 上运行

> ID：12592116
> 
> 赞同：0
> 
> 时间：2012-09-25T22:36:22.817
> 
> 标签：azure

我一直在创建一个页面，该页面在本地机器上运行良好。是时候部署了。Application_Start() 中的异常。我做了一个检查并抛出一个新的异常来确认我相信什么：我的 FederatedAuthentication.WSFederationAuthenticationModule 为空。

```
protected void Application_Start()
{
    AreaRegistration.RegisterAllAreas();

    WebApiConfig.Register(GlobalConfiguration.Configuration);
    FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
    RouteConfig.RegisterRoutes(RouteTable.Routes);
    BundleConfig.RegisterBundles(BundleTable.Bundles);
    AuthConfig.RegisterAuth();
    if (FederatedAuthentication.WSFederationAuthenticationModule == null)
        throw new Exception("HELLO");

    FederatedAuthentication.WSFederationAuthenticationModule.SecurityTokenValidated += WSFederationAuthenticationModule_SecurityTokenValidated;

} 
```

我一直在使用 NET 4.0，这是我的 webconfig 没有数据库连接：

```
<?xml version="1.0" encoding="utf-8"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration>
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
    <section name="microsoft.identityModel" type="Microsoft.IdentityModel.Configuration.MicrosoftIdentityModelSection, Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
  </configSections>

  <appSettings>
    <add key="webpages:Version" value="2.0.0.0" />
    <add key="webpages:Enabled" value="false" />
    <add key="PreserveLoginUrl" value="true" />
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
    <add key="ida:FederationMetadataLocation" value="https://traffictheory.accesscontrol.windows.net/FederationMetadata/2007-06/FederationMetadata.xml" />
    <add key="ida:ProviderSelection" value="ACS" />
  </appSettings>
  <location path="FederationMetadata">
    <system.web>
      <authorization>
        <allow users="*" />
      </authorization>
    </system.web>
  </location>
  <system.web>
    <!--<authorization>
      <deny users="?" />
    </authorization>-->
    <authentication mode="None" />
    <compilation debug="true" targetFramework="4.0" />
    <!--Commented out by Identity and Access VS Package-->
    <!--<authentication mode="Forms"><forms loginUrl="~/Account/Login" timeout="2880" /></authentication>-->
    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Optimization" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages" />
      </namespaces>
    </pages>
    <httpRuntime requestValidationMode="2.0" />
    <customErrors mode="Off"/>

  </system.web>
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <modules runAllManagedModulesForAllRequests="true">
      <add name="WSFederationAuthenticationModule" type="Microsoft.IdentityModel.Web.WSFederationAuthenticationModule, Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
      <add name="SessionAuthenticationModule" type="Microsoft.IdentityModel.Web.SessionAuthenticationModule, Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
      <add name="ClaimsAuthorizationModule" type="Microsoft.IdentityModel.Web.ClaimsAuthorizationModule, Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
    </modules>
    <handlers>
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" />
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" />
      <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
    </handlers>
  </system.webServer>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Helpers" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="0.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework" />
  </entityFramework>
  <microsoft.identityModel>
    <service>
      <audienceUris>
        <!--<add value="http://traffictheory.cloudapp.net/" />-->
        <add value="http://localhost:48451/" />
      </audienceUris>
      <issuerNameRegistry type="Microsoft.IdentityModel.Tokens.ConfigurationBasedIssuerNameRegistry, Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35">
        <trustedIssuers>
          <add thumbprint="..." name="https://traffictheory.accesscontrol.windows.net/" />
        </trustedIssuers>
      </issuerNameRegistry>
      <claimsAuthenticationManager type="S_Innovations.TrafficTheory.Web.Security.TrafficTheoryClaimsAuthenticationManager, S-Innovations.TrafficTheory.Web.Security" />
      <federatedAuthentication>
        <cookieHandler requireSsl="false" />
        <wsFederation passiveRedirectEnabled="true" issuer="https://traffictheory.accesscontrol.windows.net/v2/wsfederation" realm="http://localhost:48451/" reply="http://localhost:48451/" requireHttps="false" />
      </federatedAuthentication>
      <certificateValidation certificateValidationMode="None" />
    </service>
  </microsoft.identityModel>
</configuration> 
```

我也将本地主机更新为部署。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T05:48:54.973

您可以尝试在`WSFederationAuthenticationModule`创建服务配置时访问吗？

```
void Application_Start()
{
    FederatedAuthentication.ServiceConfigurationCreated += OnServiceConfigurationCreated;
}    

private void OnServiceConfigurationCreated(object sender, ServiceConfigurationCreatedEventArgs e)
{
    FederatedAuthentication.WSFederationAuthenticationModule.SecurityTokenValidated += WSFederationAuthenticationModule_SecurityTokenValidated;
} 
```

如果您使用的是 Web 角色，您还需要确保正确安装了 WIF（使用[Azure 插件库](http://richorama.github.com/AzurePluginLibrary/)很容易做到）。

# clojure - 如何使用 core.logic 求解数学方程

> ID：12592118
> 
> 赞同：9
> 
> 时间：2012-09-25T22:36:47.347
> 
> 标签：clojure, clojure-core.logic

我尝试在 core.logic 中输入查询：

```
(run* [q] (== 0 (+ (* q q) (* 4 q) 4))) 
```

提示说，

```
error: lvar cannot be cast to a number 
```

如果我还没有完全误解什么是逻辑编程，有没有办法可以使用 core.logic 解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T23:44:11.353

您应该阅读 The Reasoned Schemer 以获取想法。基本上，在逻辑程序中进行数学运算的方法是创建基于列表的数字编码，逻辑引擎可以根据需要进行扩展以进行尝试。我手边没有这本书，但是它将整数编码为位列表，以某种我不太记得的奇怪方式：可能`(1)`代表 0，`(0)`是非法的，并且 MSB 是列表中的最后一个？

无论如何，这是很多工作；David Nolen 最近还在 core.logic 中引入了一些关于有限域的内容。我不知道它们是如何工作的，但我认为它们通过让您指定要考虑哪些类型的数字来解决您的问题，从而为您简化了很多问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-25T23:20:05.303

据我所知，core.logic 不能用代数来求解这个方程。它可以进行基本数学运算，尽管该数学运算的输入需要是实际值而不是`LVar`s，因为数学函数不能对这些进行运算：

```
user> (run* [q]
   (fresh [x]
        (== x 1)
       (project [x] (== q (+ (* x x) 4)))))
(5) 
```

当 x 有一个明确的值时工作，当 x 没有时失败：

```
user> (run* [q]
   (fresh [x]
        (== x q)
        (project [x] (== q (+ (* x x) 4)))))
ClassCastException clojure.core.logic.LVar cannot be cast to java.lang.Number 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-27T03:21:14.030

[当前形式的core.logic](https://github.com/clojure/core.logic)并非设计为数值方程求解器 - 它更适合求解逻辑和关系表达式。

您基本上有两种实用的方法来求解数学方程：

*   **解析求解器**- 对于简单的情况，可以很容易地找到解决方案，例如像上面那样的二次方程，但开始很快变得越来越复杂，然后对于许多方程变得不可能/不可行。这是一个巨大的开放研究课题。
*   **数值求解器**——这些技术更加通用，几乎可以用于任何类型的方程。然而，结果并不准确，如果方程具有“令人讨厌”的特征（不连续性、奇梯度、复杂的局部最小值集等），算法可能无法找到正确的解。

方程求解器需要特殊的智能来理解数学方程的“规则”，例如如何分解多项式表达式（用于解析解）或如何估计导数（用于数值解）。

一些可能有趣的链接：

*   [Incanter 中的二次方程求解器](http://clojuredocs.org/incanter/incanter.core/solve-quadratic)
*   [http://programming.wonderhowto.com/how-to/solve-equations-for-any-variable-with-clojure-1-1-380687/](http://programming.wonderhowto.com/how-to/solve-equations-for-any-variable-with-clojure-1-1-380687/)
*   [Clojure 中的简单数值求解器示例（Newton-Raphson 方法）](http://www.learningclojure.com/2010/02/clojure-dojo-3-from-heron-to-newton.html)

# javascript - 浏览器之间的填充文本（）画布文本位置差异

> ID：12592123
> 
> 赞同：8
> 
> 时间：2012-09-25T22:37:44.770
> 
> 标签：javascript, internet-explorer, firefox, canvas

从问题底部的屏幕截图或 [直接进入游戏](http://www.sunshinecompound.com/pages/beta2.html)中可以看出。文本的放置方式因浏览器而异（firefox 15.0.1 的呈现方式与 IE 9.9 和 Chrome 21 不同）。调用绘图函数：

```
context.fillText(this.wlines[i], this.xcoord, this.ycoord + y + (t) * this.sizey); 
```

对象的构造函数：

```
function textItem(text, xcoord, ycoord, sizex, sizey,style, context) {
this.wlines = [];
this.text = text;
this.xcoord = xcoord;
this.ycoord = ycoord;
this.sizex = sizex;
this.sizey = sizey;
this.style = style;

if (text == null) {
    text = "";
}
var lines = text.split("~");
// this is first line text
context.save();
if (this.style < 3) {
    context.shadowOffsetY = 2;
    context.font = 'bold 18px "palatino linotype"';
} else if (this.style == 4) {
    this.font = '16px "palatino linotype"';
    this.shadowOffsetX = 2;
    this.shadowOffsetY = 1;
    this.shadowColor = "rgba(255,255,255,1)";
}
if (this.style == 5) {
    this.wlines.push(text);
} else {
    for (j = 0; j < lines.length; j += 1) {
        var words = lines[j].split(" ");
        var lastLine = "";
        var l = sizex;
        var measure = 0;
        for (i = 0; i < words.length; i += 1) {
            var w = words[i];
            measure = context.measureText(lastLine + w).width;
            if (measure < l) {
                lastLine += (w + " ");
            } else {
                //this is body text
                if (this.style == 6) {
                    lastLine += "...";
                }
                this.wlines.push(lastLine);
                lastLine = (w + " ");
                if (this.style < 3) {
                    context.font = 'bold 14px "palatino linotype"';
                }
            }
            if (i == words.length - 1) {
                this.wlines.push(lastLine);
                break;
            }
        }
    }
}
context.restore();
} 
```

text,xcoorc,ycoord,xsize,ysize 从 xml 文件中解析。本例中的化合物名称：

```
<sizex>196</sizex>
<sizey>20</sizey>
<xcoord>383</xcoord>
<ycoord>14</ycoord> 
```

style 是基于所需文本效果的定义值， context 是要绘制的画布的 2d 上下文（用于分层效果）。

如图所示，所有值在浏览器之间完全相同。我在浏览器之间做的唯一检查是

```
<meta http-equiv="x-ua-compatible" content="ie=edge,chrome=1"/> 
```

在html页面的标题中。

我真的不知道线高差异来自哪里，对此问题的任何帮助将不胜感激。

行高差异根据文本而变化，但不是以我尚未弄清楚的方式变化。如果有任何我遗漏的信息，请随时询问。ff： [ff 屏幕 http://www.sunshinecompound.com/images/firefoxscreen.png](http://www.sunshinecompound.com/images/firefoxscreen.png) Chrome： [镀铬屏幕 http://www.sunshinecompound.com/images/googlescreen.png](http://www.sunshinecompound.com/images/googlescreen.png)

*更新*我的程序的解决方案至少是构建使用偏移量。此外，通过创建文本对象然后将文本对象另存为图像，我获得了巨大的性能提升。在 FF 中，它是最慢的浏览器，我看到整个程序运行时间减少了 5 倍多一点。尽管每次在程序中动态更改文本时都必须重新创建文本对象（我每 200 毫秒更改一次动态计数器和鼠标悬停效果，但根据我目前获得的性能，我可能会将其提高到 100 毫秒）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T02:44:21.447

是的。

它的放置方式不同，缩放不同，字距不同，别名不同，甚至`measureText`在浏览器之间的测量方式也不同（如 ）。

如果您***需要***游戏的像素一致性，那么您将不得不使用图像而不是文本。对不起。:(

保持一致的唯一方法`measureText`是预先计算。

保持一致的唯一方法`fillText`是使用图像而不是文本。[无论如何，它必须更快](http://simonsarris.com/blog/322-canvas-drawtext-considered-harmful)。

如果文本非常动态，那么这两种方法都是站不住脚的，但是如果你只在应用程序中写过少于 100 条不同的文本，那么图像可能是你最好的选择。

否则，您可以使用从图像生成的像素字体（对每个字母或常用词使用 drawImage）并希望性能良好，缓存较长的常用字符串。

# sql-server-2008 - 在 SQL Server 2008 上运行 3.5 GB .sql 文件

> ID：12592124
> 
> 赞同：5
> 
> 时间：2012-09-25T22:37:51.310
> 
> 标签：sql-server-2008

我在 Windows 8、32 位、2GB 内存上使用 SQL Server。我想执行一个`.sql`3.5 GB 大小的文件。

尝试做：

1.  SSMS - 通过 UI 查询 - 内存不足异常 - 没有运气
2.  sqlcmd - 内存不足异常 - 没有运气
3.  将文件拆分为 18 个 200 MB 的文件。sqlcmd 他们每个人 - 没有运气
    （顺便说一句，没有编辑器可以打开这么大的文件。即使是 200MB 的文件也包含 ~18,00,000 行。欢迎提出建议）
4.  将 GO 放在 中的每个 DML 语句之后`.sql`，以减少重做日志大小 - 没有
    运气（令人惊讶的是它确实适用于我的其他 280MB 文件）

`.bak`文件有帮助吗？

有没有（我希望有）一种方法来做我想做的事情，以一种好的方式？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-07-19T06:57:45.807

```
According to msdn  https://msdn.microsoft.com/en-us/library/ms170572.aspx

1) Open a command prompt window.
2) In the Command Prompt window, type: sqlcmd -S myServer\instanceName(local) -i C:\myScript.sql(path where sql script exists)
3) Press ENTER. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-15T14:55:46.800

通过从命令提示符本地运行它，我能够使用类似于以下命令行的[osql](http://msdn.microsoft.com/en-us/library/ms162806%28v=sql.100%29.aspx)`17.9 GB`运行文件。不过可能需要相当长的时间。

```
osql -S . -d Test -E -i script.sql 
```

# events - jquery $.on() 和使用 date() 时处理奇怪行为的触摸事件

> ID：12592125
> 
> 赞同：0
> 
> 时间：2012-09-25T22:37:57.507
> 
> 标签：events, jquery-mobile, mobile-safari, jquery

为了在移动设备上实现“*长按*”，我从一个简单的事件映射开始，其中`touchstart`设置一个时间，`touchend`设置另一个，然后计算差异以查看元素被按下了多长时间。这是我的旧代码：

```
 $('html')
            .on({
                touchstart : function(e){
                    g.tt.start = new Date();
                },
                touchend : function(e){
                    g.tt.end = new Date();
                    g.tt.delta = g.tt.end - g.tt.start;
                    alert(g.tt.delta);
                    g.tt = {};
                }
            })
        ; 
```

## 但不幸的是...

...每隔一段时间，就会一直计算从上一个触摸端到触摸开始的差异。我很确定我缺少一些基本的东西，因此最终过度设计了这个（恐怕没有正式的培训）。这是我的新代码：

```
 $('html')
            .on({
                touchstart : function(e){
                    g.tt = {};
                    g.tt.start = new Date();
                },
                touchend : function(e){
                    g.tt.end = new Date();
                    g.tt.delta = g.tt.end - g.tt.start;
                    if( isNaN(g.tt.delta) == false ) {
                        alert(g.tt.delta);
                    } 
                    else {
                        return false;
                    }
                    setTimeout(function(){g.tt = {}; });
                }
            })
        ; 
```

难道不应该有一个更简单的方法来用更少的子句来做到这一点吗？别介意我有趣的`g.tt`变量名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T23:50:36.403

我意识到我采取了错误的方法，并且还找到了一个不错的插件：

[http://aanandprasad.com/articles/jquery-tappable/](http://aanandprasad.com/articles/jquery-tappable/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T22:43:31.417

您正在计时两个事件之间的差异，因此无需使用 setTimeout，只需使用闭包在两个事件之间共享一些变量即可。这个例子取自这个[答案](https://stackoverflow.com/a/1360833/16959)：

```
(function () {
  var start, end;
  $('html').on({
    touchstart : function(e){
      start = +new Date(); // get unix-timestamp in milliseconds
    },
    touchend : function(e){
      end = +new Date();
      g.tt.delta = end - start;
      if( isNaN(g.tt.delta) == false ) {
        alert(g.tt.delta);
      }
    }
  });
})(); 
```

这是一个[带有鼠标事件和触摸事件的演示](http://jsfiddle.net/vHW2f/6/)

# ios - dispatch_get_current_queue() 处的 EXEC_BAD_INSTRUCTION

> ID：12592127
> 
> 赞同：0
> 
> 时间：2012-09-25T22:38:01.843
> 
> 标签：ios, core-data, objective-c-blocks, grand-central-dispatch

我正在使用核心数据做一个项目，据我所知，在核心数据线程中所做的任何事情都必须保留在所述线程中。

我调用一个 API 来下载一些新闻项目，然后将它们加载到数据库中：

```
 [self.database.managedObjectContext performBlock:^{
    for (NSDictionary *itemInfo in result) {
      NSLog(@"%@", itemInfo);
      [Item createItemWithInfo:itemInfo inManagedObjectContext:self.database.managedObjectContext];
    }

    [self.database.managedObjectContext save:nil];
  }]; 
```

在我的 create 方法中，除了设置对象中的所有数据外，我还有一个额外的调用来获取与相关新闻项目相关的图像：

```
+ (Item *)createItemWithInfo:(NSDictionary *)info inManagedObjectContext:(NSManagedObjectContext *)context {
  Item *item;

  NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Item"];
  request.predicate = [NSPredicate predicateWithFormat:@"itemId = %@", [info valueForKeyPath:@"News.id_contennoticias"]];
  NSSortDescriptor *sortDescriptor = [NSSortDescriptor sortDescriptorWithKey:@"itemId" ascending:YES];
  request.sortDescriptors = [NSArray arrayWithObject:sortDescriptor];

  NSError *error = nil;
  NSArray *matches = [context executeFetchRequest:request error:&error];

  if (!matches || ([matches count] > 1)) {
    // handle error
  } else if ([matches count] == 0) {
    item = [NSEntityDescription insertNewObjectForEntityForName:@"Item" inManagedObjectContext:context];
    item.itemId = [NSNumber numberWithInteger:[[info valueForKeyPath:@"News.id_contennoticias"] integerValue] ];
    item.title = [info valueForKeyPath:@"News.titulo_contennoticias"];
    item.summary = [info valueForKeyPath:@"News.sumario_contennoticias"];
    item.content = [info valueForKeyPath:@"News.texto_contennoticias"];

    NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
    dateFormat.dateFormat = @"yyyy-MM-dd hh:mm:ss";
    NSDate *creationDate = [dateFormat dateFromString:[info valueForKeyPath:@"News.fechacre_contennoticias"]];
    item.creationDate = creationDate;

    dispatch_queue_t imageDownloadQueue = dispatch_queue_create("image downloader", NULL);
    dispatch_async(imageDownloadQueue, ^{
      NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"%@/files/imagenprincipal/%@", BASE_PATH, [info valueForKeyPath:@"News.imgprincipal"]]];
      NSData *imageData = [NSData dataWithContentsOfURL:url];
      dispatch_async(dispatch_get_current_queue(), ^{
        item.image = imageData;
      });
    });
  } else {
    item = [matches lastObject];
  }

  return item;  
} 
```

在这部分：

```
dispatch_async(dispatch_get_current_queue(), ^{
  item.image = imageData;
}); 
```

我收到错误消息，我的应用程序就死在那里。它还说`dispatch_get_current_queue()`在 iOS 6 中已弃用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T15:00:12.813

既然`dispatch_get_current_queue()`是从 的块内调用的`imageDownloadQueue`，为什么不`imageDownloadQueue`直接使用？如果要在 moc 队列上运行它，请确保不要使用`dispatch_get_current_queue()`.

一般来说，使用`dispatch_get_current_queue()`. 引用 Apple Concurrency Programming guide 中的 Dispatch Queues 页面：

> 使用 dispatch_get_current_queue 函数进行调试或测试当前队列的身份。

# ruby-on-rails - 在运行时读取自定义 heroku 域

> ID：12592128
> 
> 赞同：0
> 
> 时间：2012-09-25T22:38:08.417
> 
> 标签：ruby-on-rails, heroku, environment-variables

好奇是否有人知道`heroku domains`在运行时访问（Rails）应用程序输出的方法。我想要一种方法来确定网站的首选网址，以编程方式和在请求 - 响应周期之外，而不需要额外的配置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:29:11.730

Heroku API 有一个用于[获取和设置域](https://api-docs.heroku.com/domains)的端点。您需要您的 API 密钥进行身份验证，并且您应该在配置环境中存储一次（而不是在 git 存储库中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T21:22:29.427

正如 Thomas 所提到的，如果没有 API，这似乎是不可能的。通过数据库中的设置而不是 env var 解决了我的特殊问题。

# svg - 在 SVG 中绘制一个带有阴影的圆圈会剪裁边缘

> ID：12592129
> 
> 赞同：11
> 
> 时间：2012-09-25T22:38:17.463
> 
> 标签：svg, svg-filters

我正在尝试在 SVG 中绘制一个带有阴影的简单圆圈，但由于某种原因，顶部和左侧边缘被剪裁了。这在 Chrome 和 Safari 中都会发生。

![在此处输入图像描述](../Images/9a83a5f935b90cb1769214e2f4401877.png)

我正在使用在 w3schools 教程[SVG Drop Shadows](http://www.w3schools.com/svg/svg_feoffset.asp)中找到的代码，修改为使用圆形。

```
<svg xmlns="http://www.w3.org/2000/svg" version="1.1">
  <defs>
    <filter id="f1" x="0" y="0" width="200%" height="200%">
      <feOffset result="offOut" in="SourceAlpha" dx="2" dy="2" />
      <feGaussianBlur result="blurOut" in="offOut" stdDeviation="1" />
      <feBlend in="SourceGraphic" in2="blurOut" mode="normal" />
    </filter>
  </defs>
  <circle r="30" cx="50" cy="50" style="stroke:gray; fill:aliceblue; stroke-width:3px" filter="url(#f1)" />
</svg> 
```

我尝试移动圆圈，增加 SVG 容器的大小等，但得到了相同的结果。我还尝试使用谷歌搜索各种阴影教程，并始终修改示例代码以使用圆圈。每次都是一样的结果。

那么如何在 SVG 中绘制一个带有阴影的简单圆圈呢？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-26T00:26:27.947

原来问题在于过滤器的偏移量。圆圈周围没有足够的填充来容纳新添加的过滤器。要添加它，请使用以下属性（根据需要进行调整）：

```
<filter id="f1" x="-20%" y="-20%" width="200%" height="200%"> 
```

x 和 y 将过滤器的框向上和向左放置一些，这是以前缺少的。然后宽度和高度指定盒子的大小。在这种情况下，200% 是多余的，但对于较大的阴影可能是必要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T00:31:43.707

替换这个： `<filter id="f1" x="0" y="0" width="200%" height="200%">`

对此： `<filter id="f1" x="-40%" y="-40%" height="200%" width="200%">`

见例子：http: [//jsfiddle.net/sRfck/1/](http://jsfiddle.net/sRfck/1/)

# actionscript-3 - AS3 ScrollPane MovieClips 删除其他

> ID：12592131
> 
> 赞同：0
> 
> 时间：2012-09-25T22:38:45.183
> 
> 标签：actionscript-3, flash

我有一个 ScrollPane，我正在尝试向其中添加 Movieclip。好吧，movieclip 确实添加了，但是当它添加时，它会删除以前添加的其他内容，因此一次只显示一个。

我的代码：

```
btnAdd.addEventListener(MouseEvent.CLICK, doadd);
var X = 0;
function doadd(Event):void {
    var S:MovieClip=new MovieClip()  
    var mp:oItem = new oItem();
    mpane.source=S;
    mp.y = X*25;
    mp.txtIn.text = X;
    MovieClip(mpane.content).addChild(mp);
    X++;
    mpane.update();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T22:51:36.340

ScrollPane 只能有一个来源 - 这是设计使然。

做你想做的事的好方法是创建一个容器 Sprite 并将其用作源，然后将所有内容作为子项添加到容器中。

```
btnAdd.addEventListener(MouseEvent.CLICK, doadd);
var X = 0;

var container:Sprite = new Sprite();  //this will hold all your items and be the source of the scrollPane
mpane.source = container;  //set the source outside of your recuring doadd function

function doadd(Event):void { 
    var mp:oItem = new oItem();
    mp.y = X*25;
    mp.txtIn.text = X;
    container.addChild(mp); //add to the container
    X++;
    mpane.update(); //you still need update everytime the contents of the scrollpane can potentially change size
} 
```

# php - 处理多个 OAuth2 令牌

> ID：12592133
> 
> 赞同：0
> 
> 时间：2012-09-25T22:39:14.160
> 
> 标签：php, gmail, oauth-2.0, google-plus

我很好奇在同一个应用程序中使用两个都使用 OAuth2 身份验证的 API。在这种情况下，以一个简单的网页为例就可以了。

我试图找到资源来解释 OAuth2 令牌的使用以及它们与会话的关系。您是否有多个 API 的多个令牌？您可以修改会话中的令牌以使其与多个 API 相关吗？即使你能做到这一点，这样做是一个好习惯吗？

我已经查看了几个使用[PHP](http://code.google.com/p/oauth2-php/)和 GMail 示例的 OAuth2 实现，但没有找到任何我想要的解释它。

任何信息或信息链接将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T21:03:47.937

您有两个选择：第一个是为每个 API 请求授权（例如 Drive 和 G+ 等），但第二个选项是扩大您的第一个请求的范围以包含两者。

在 G+ 平台文档中，基本步骤的第 2 步说明您可以在请求中使用多个范围：[https ://developers.google.com/accounts/docs/OAuth2](https://developers.google.com/accounts/docs/OAuth2)

理想情况下，您的用户只需为您需要的所有内容授予一次访问权限。

# java - 在 Java 中排序和交换元素的最快方法

> ID：12592134
> 
> 赞同：0
> 
> 时间：2012-09-25T22:39:15.000
> 
> 标签：java, swap, quicksort, bubble-sort

在 Java 中，我有一个不同正数的列表。

每个数字都用作哈希集中的键，`IntIntHashSet fs`并`cs`在下面的代码中用于检索一些条件值。然后我检查条件（if 语句），如果为真，则交换元素。

```
int[] list = // given list of positive different ints like [14, 2, 7, 19, 20, 3]
int l = list.length;
if (l > 1) {
    int elI, elJ, fI, fJ, swap;
    for (int i = 0; i < l; i++) {
        boolean swapped = false;
        for (int j = 1; j < l; j++) {
            elI = list[j - 1];
            elJ = list[j];
            fI = fs.get(elI);
            fJ = fs.get(elJ);
            if (fI > fJ || (fI == fJ && cs.get(elI) > cs.get(elJ))) {
                swap = list[j];
                list[j] = list[j - 1];
                list[j - 1] = swap;
                swapped = true;
            }
        }
        if (!swapped) break;
    }
} 
```

它看起来像一个*冒泡*排序，虽然我不太确定。我正在编写一个耗时的程序，这部分应该尽可能优化。

主要**问题：使用另一种排序方法（如***QuickSort*）会更快吗？

第二个问题：在没有临时变量的情况下使用**异**或交换方法会更快`swap`吗？

**[编辑]**：我可能有一个很长的列表，其中包含数千个数字。由于示例，上面的一个很简单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T22:41:58.500

对于部分排序的数组和少量数据，冒泡排序将是有效的方法。快速排序仅对大型（巨大）数据集有效。您似乎正在实施冒泡排序，这对于小型数据集就足够了。

[在此处](http://en.wikipedia.org/wiki/Sorting_algorithm)查看不同排序算法的效率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T22:42:34.920

使用 Java，除非您对它进行广泛的基准测试和分析，否则您不会知道。

一些适用于小集合的代码可能对大集合效果更差，反之亦然。取决于何时优化，以及有哪些先决条件。它可能会识别 XOR 可以在机器代码中有效编码的方式，或者它可能会以不同的方式对其进行编码。它甚至可能在客户端和服务器 VM 之间有所不同。

事实上，`sort`Java 中的集合方法已从 JDK 6 替换为 JDK 7（从 IIRC Quicksort 到 TimSort，这是一种来自 Python IIRC 的混合就地合并排序）。

*就在这几天，我一直在与逻辑上必须*更快的情况作斗争，但任何基准测试都显示相反的结果，这只能通过由于不同的热点而执行不同的 JIT 优化来解释。效率较低的代码显然触发了更好的优化。

# jquery - 需要 HTML5 Fileupload 的“鼠标悬停文件”事件

> ID：12592137
> 
> 赞同：3
> 
> 时间：2012-09-25T22:39:36.460
> 
> 标签：jquery, file-upload, hover

我正在为 jQuery 开发一个新的 HTML5 上传脚本，当用户“使用文件！！”“悬停”div 时，我必须识别该事件。我不想突出显示 div。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T08:37:59.177

对于 html5 浏览器中的文件拖动，您可以使用拖放事件。您需要的两个事件是`dragenter`（当您拖动并且鼠标到达元素`dragleave`时触发）和（当鼠标离开元素拖动时触发）。

另见： http: [//www.whatwg.org/specs/web-apps/current-work/multipage/dnd.html](http://www.whatwg.org/specs/web-apps/current-work/multipage/dnd.html)

# ruby-on-rails-3 - 获取 Instagram gem 请求的 Instagram 访问令牌

> ID：12592138
> 
> 赞同：3
> 
> 时间：2012-09-25T22:39:40.917
> 
> 标签：ruby-on-rails-3, omniauth, instagram

我试图允许用户在我的应用程序中从他们的 instagram 提要中选择照片。

我正在使用omniauth 通过omniauth-instagram gem 对用户进行身份验证。我也有官方的 instagram rails gem，当我运行 Instagram.user_recent_media(user_instagram_id) 时，它告诉我需要一个访问令牌。

我尝试在回调中保存代码参数，但我无法从该密钥创建访问令牌。关于拉取用户的媒体提要的任何提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T22:48:06.747

我已成功执行以下操作：

```
client = Instagram.client(:access_token => token)
client.user_recent_media(:count => 200) 
```

# node.js - 在 Cloudfoundry 上恢复“无效的 ELF 标头”

> ID：12592147
> 
> 赞同：2
> 
> 时间：2012-09-25T22:40:38.660
> 
> 标签：node.js, cloud-foundry, restify

我正在将 node.js 应用程序部署到 Cloudfoundry，唯一的模块依赖项是 restify。我试过用我的本地 node_modules 目录推送它，并在 cloudfoundry.json 中使用 npm shrinkwrap 和 'ignoreModules' 但总是在 stdout.log 中结束：

```
{ stack: [Getter/Setter],
  arguments: undefined,
  type: undefined,
  message: '/var/vcap/data/dea/apps/myapp-0-6f9cf62f9bbe58f5d2eb13a94acb5d3a/app/node_modules/restify/node_modules/dtrace-provider/build/Release/DTraceProviderBindings.node: invalid ELF header' } 
```

有任何想法吗？提前致谢 ：）

编辑：对不起，我的意思是'忽略**节点**模块'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T23:18:07.860

我的猜测是该模块是为您的本地架构（例如 x86）编译的，而尝试运行它的服务器是不同的架构（例如 64 位）。节点模块可以在其中包含 npm 将处理构建的 C++ 扩展，您不一定只是将 node_modules 文件夹中的二进制文件从一个平台移动到另一个平台，您需要重新编译它们。

我对 Cloudfoundry 的了解还不够，无法告诉您如何做到这一点，希望其他人有更好的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-31T16:34:13.827

我在设置开发 Docker 环境时遇到了类似的问题。我想将我的源文件挂载到 docker 映像上，但是为 docker 映像编译了一个 node_modules 目录。当我在 docker 映像上创建一个新目录时，`npm install`在该目录中，然后对我的一些源代码使用软链接，我看到了相同的行为。

解决方案：不要使用软链接。

# php - 根据日期/时间使用 PHP 设置问候语

> ID：12592149
> 
> 赞同：-1
> 
> 时间：2012-09-25T22:41:07.620
> 
> 标签：php

我有以下代码，用于根据时间向用户显示问候语。我得到的打印结果是“早上好，00 现在的日期和时间是 xx/xx/xx xx:xx”。问题显然是问候后的00。我做错了什么？

```
<?php 
    $hour = date("H");
    if ($hour <= '11' ) {
        echo 'Good Morning,';
    }

    else {
        echo 'Good Afternoon,';
    };

    echo $hour . ' the date and time now is  ' . date('d/m/y H:i');
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T22:42:38.910

摆脱“$hour”。在回声中。

代码应该是，

```
echo ' the date and time now is ' . date('d/m/y H:i'); 
```

请注意，“是”之后还有一个额外的空格，这可能不是故意的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T22:42:46.597

您的问题出在代码的最后一行：

echo $hour 导致它。你的代码应该是

```
echo 'the date and time now is  ' . date('d/m/y H:i'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T22:45:58.793

```
echo $hour . ' the date and time now is  ' . date('d/m/y H:i'); 
```

应该只是：

```
echo ' the date and time now is  ' . date('d/m/y H:i'); 
```

# java - 速度引擎忽略@字符？

> ID：12592153
> 
> 赞同：0
> 
> 时间：2012-09-25T22:41:37.523
> 
> 标签：java, velocity

我正在使用velocity v1.7 使用JDK v1.7 发送电子邮件

我有以下代码：

```
VelocityContext context = new VelocityContext();
String name = "myname@yahoo.com";
context.put("userName", name); 
```

在电子邮件模板（abc.vm）中，我使用了以下代码：

```
#if(${userName})        
    Dear ${userName},<br><br>
#end 
```

不知何故，当我收到电子邮件时，它只说

```
Dear 
```

代替

```
Dear myname@yahoo.com 
```

如果我将 java 代码更改为不带 @ 字符的正确名称，则电子邮件会正确显示

```
Dear myName 
```

谁能告诉我为什么@字符被跳过，事实上，为什么它跳过整个名字而不包括在电子邮件中？？？？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T19:15:35.293

我试图重现，问题似乎出在电子邮件发送的某个地方。速度本身就可以很好地解决这个问题。

您可以通过将 Velocity 的结果写入输出、日志或文件来缩小此类问题的范围，以便查看此时的文本内容。调试还将向您显示返回的速度以及在电子邮件发送中出现特殊字符问题的位置。

代码：VelocityContext context = new VelocityContext();

```
 context.put("name", "Velocity@mycompany.com");

    String name = "myname@yahoo.com";
    context.put("userName", name);

    Template template = null;

    template = Velocity.getTemplate("test.vm");

    StringWriter sw = new StringWriter();

    try {
        template.merge(context, sw);
    } finally {
        sw.close();
    }
    System.out.println(sw); 
```

模板：

```
Hello $name!

#if(${userName})        
    Dear ${userName},<br><br>
#end 
```

结果输出：

```
Hello Velocity@mycompany.com!

    Dear myname@yahoo.com,<br><br> 
```

# ajax - 重定向 ASP 包括不循环的页面

> ID：12592154
> 
> 赞同：2
> 
> 时间：2012-09-25T22:41:44.433
> 
> 标签：ajax, redirect, asp-classic, infinite-loop

我相信有一个简单的解决方案：

我们有一个使用 Ajax 供用户浏览内容的 ASP 页面。我们的问题是，当 Google 抓取我们的网站时，它会将其搜索结果链接到未设置样式的内容页面。我们希望能够将流量从内容页面重定向到调用它们的样式页面。我们如何在不将页面发送到无限重定向循环的情况下完成此操作？

我们已经考虑过解决问题的其他方法，但这正是我们想要完成的；将我们的 .ASP 页面重定向到包含它们的页面，而不会将它们发送到循环中。当然，任何人都有我们尚未考虑的任何建议。

我已经浪费了一整天的时间试图找到一个在 ASP 中运行但没有任何运气的解决方案，我可能会花费明天的所有时间做同样的事情......期待任何建议，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T11:47:45.250

当然会有助于查看代码，或者知道实时 URL，但这里有......

我想你已经有代码来做重定向，你只需要一个系统来知道什么时候重定向，什么时候不重定向？

几个建议：

*   检查内容页面中的引荐来源网址，如果它不是您的 AJAX 请求，则进行重定向（不确定您的 AJAX 代码是否会填充引荐来源网址，如果没有，则如果有引荐来源网址，则进行重定向，因为搜索引擎将始终有推荐人）
*   在调用 ASP 页面时存储一个 Session 变量，并检查它是否存在于内容页面中，如果不存在则进行重定向
*   在调用 ASP 页面时存储一个 Cookie，并检查它是否存在于内容页面中，如果不存在则进行重定向
*   将您的 AJAX 请求更改为表单 POST 而不是 GET，如果不是 POST，则在内容页面中进行重定向

**编辑：** 我没有想到的一件事是，如果您使用我的任何建议，搜索引擎可能无法抓取这些页面，因此我还建议您添加用户代理检查以允许抓取工具

查看您的代码后，我会将以下内容添加到您的 ASP 无样式页面的顶部。

```
strAgents = "Google|msnbot|Rambler|Yahoo|AbachoBOT|accoona|AcioRobot|ASPSeek|CocoCrawler|Dumbot|FAST-WebCrawler|GeonaBot|Gigabot|Lycos|MSRBOT|Scooter|AltaVista|IDBot|eStyle|Scrubby"
arrAgents = Split(strAgents, "|")
blnAgent = False
For i = 0 to UBound(arrAgents)
    If InStr(Request.ServerVariables("HTTP_USER_AGENT"), arrAgents(i)) <> 0 Then
        blnAgent = True
        Exit For
    End If
Next

If Not blnAgent Then
    If Request.ServerVariables("HTTP_REFERER") <> "http://www.uleth.ca/lib/archives/timeline/" Then
        Response.Redirect("http://www.uleth.ca/lib/archives/timeline/#19xx?zoom_highlight=19xx")
    End If
End If 
```

# javascript - javascript - 对象不可变？

> ID：12592157
> 
> 赞同：5
> 
> 时间：2012-09-25T22:41:53.947
> 
> 标签：javascript

我正在尝试创建一些树形结构。

我希望按如下方式访问我的数据：

```
data[key1][key2] 
```

但是key1和key2是对称关系；以下情况总是正确的：

```
data[key1][key2] == data[key2][key1] 
```

更具体地说，我拥有`data[key1][key2]`并`data[key2][key1]`指向同一个对象，因此对一个对象的更改会影响另一个对象。

我的问题出现是因为我希望删除底层对象。我知道我是否使用：

```
delete data[key1][key2]; 
```

`data[key2][key1]`仍然指对象。

我的问题是：有没有办法删除底层对象，或者用虚假的东西覆盖它，这样上面的两个属性都会评估虚假？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T22:52:34.920

可以这样想：

```
data[key1][key2] -----> object1
                          ^
data[key2][key1] ---------+ 
```

如果您将其中一个的密钥（比如后者）更改为一个新对象，您将得到以下信息：

```
data[key1][key2] -----> object1

data[key2][key1] -----------> object2 
```

（或者，如果您删除它，密钥将丢失：）

```
data[key1][key2] -----> object1

data[key2] 
```

也就是说，您将更改其中一个引用，但不会更改另一个。任何仅替换其中一个的尝试都可以实现这一点。你有两个选择：

a) 更改两个键以指向新对象：

```
data[key1][key2] -----> object2
                          ^
data[key2][key1] ---------+ 
```

（或删除两个键：）

```
data[key1][key2]       object1 (no references, will be garbage collected)

data[key2][key1] 
```

b) 修改对象本身的字段。这样，它们仍将指向同一个对象，但它的某些方面会有所不同。但是，您使用的任何代码都必须考虑到这一点。

```
data[key1][key2] -----> object1 with 'isDeleted'=true
                          ^
data[key2][key1] ---------+ 
```

考虑到您的用例，a) 选项似乎最有意义。如果您仍然拥有两个密钥，为什么不更新/删除两者？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T23:25:52.217

[valueOf()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/valueOf)方法可能会提供一个解决方案。如果您要与布尔值进行显式比较，则 valueOf 将作为布尔类型转换的一部分被调用。例如，假设您的数据结构引用了某个对象，`x`...

```
> x = {}
Object
> (x == false ? 'yes' : 'no')
"no"
> x.valueOf = function() {return false;}
function () {return false;}
> (x == false ? 'yes' : 'no')
"yes" 
```

...即如果`data[key1][key2] == data[key2][key1] == x`，那么分配`x.valueOf = function() {return false;}`将改变*当明确种姓为布尔值时的*`x`评估结果。因此，只要您正在测试,就应该看起来是虚假的。*`data[key1][key2] == false``x`*

 *但是，您需要注意这一点，因为`x`它比原始值更不虚假。例如，即使在如上所述分配 valueOf 之后，隐式强制仍然看起来是真实的......

```
(x ? 'yes' : 'no')
"yes" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T23:54:57.577

你可能已经从其他答案中得到了你需要的东西，但总结一下：

> 我的问题是：有什么方法可以删除底层对象

不可以。您可以删除对它的所有引用以使其可用于垃圾回收。当垃圾收集器运行时（在某个未指定的时间），它将删除该对象。

> 或者用虚假的东西覆盖它，这样上面的两个属性都会评估虚假？

不完全是。您只能为每个属性分配一个新值，以便它们评估为 false（false、null、undefined、0 等）。对象不会跟踪引用它们的标识符，因此没有通用的方法可以说“删除对此对象的所有引用”。如果你想这样做，你必须自己跟踪引用并更改它们的值。

另一种方法是给对象一个属性来指示是否应该使用它（例如“过时”），可以在访问其他属性时检查该属性。公共属性非常简单，或者您可以使用构造函数中的闭包创建“私有”成员：

```
function Foo() {
  var obsolete = false;

  this.obsolete = function (){
    return obsolete;
  };

  this.delete = function (){
    obsolete = true;
  };
}

var foo = new Foo();
var bar = new Foo();

alert(foo.obsolete() + ', ' + bar.obsolete()); // false, false

foo.delete();

alert(foo.obsolete() + ', ' + bar.obsolete()); // true, false 
```

这将与您想要的一样工作。如果你可以删除你需要做的对象：

```
if ( data[key1][key2] ) {
  // do stuff
} 
```

使用上面的方法你会做：

```
if ( !data[key1][key2].obsolete() ) {
  // do stuff
} 
```

注意到该对象实际上仍然存在。您可能希望将*obsolete*更改为*current*并反转布尔值，以便检查`if (obj.current())`而不是`if (!obj.obsolete())`. 什么都适合。*

# django - 如何在模板中提取与用户关联的属性？

> ID：12592166
> 
> 赞同：0
> 
> 时间：2012-09-25T22:42:42.417
> 
> 标签：django, templates, view, model

我正在尝试让与用户关联的图像正确显示。我需要帮助确定模板中应包含的内容。具体来说，我认为模板“{{review.user__image}} 中的代码不正确。基于特定评论和撰写该评论的用户，我如何提取与用户关联的图像？

# 视图.py

```
def view_reviews(request, product_name):
    product = get_object_or_404(Productbackup, url_friendly=product_name)
    product_id = product.id
    reviews = Reviewbackup.objects.filter(product_id=product_id).order_by("-created_on")
    return render_to_response('reserve/templates/view_reviews.html', {'reviews':reviews},
        context_instance=RequestContext(request)) 
```

# 模型.py

```
class Reviewbackup(models.Model):
    review = models.CharField('Review', max_length = 2000)
    user = models.CharField('Username', max_length =  200)
    rating = models.IntegerField(max_length=2, choices=RATING_OPTIONS)
    product = models.ForeignKey(Productbackup)
    def __unicode__(self):
        return self.review

class UserProfile(models.Model):
    user = models.ForeignKey(User, primary_key=True)
    image = models.ImageField(blank=True, null=True, max_length=255, upload_to="images/") 
```

# 模板

```
{% for review in reviews %} 
    <br><a href = "/user/{{review.user}}/">{{review.user}}</a><br>
    <img class = "thumbnail" src = "http://test.webfactional.com/static/{{review.user__image}}"><br>
    {{review}}
{% endfor %} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T03:24:36.207

对不起，答案很长。从你的代码来看，我假设你是 Django 的新手，所以这个答案希望能提供信息以及在过程中回答问题。

# 用户

在您的审查模型中，`user`应该是 a`ForeignKey`而不是 a `CharField`。我知道存储用户名似乎更自然，特别是如果您将自己查看数据库表，但是这种方法容易出错，除非您有充分的理由，否则这是一件坏事。

假设您有一个用户名为`foousername`. 然后该用户创建了几个评论。因此，此时您将有几个评论该`user`字段的位置`foousername`。现在，如果用户想要将他/她的用户名更改为`someotherfoousername`，为了不破坏评论和用户之间的链接，您必须更改`user`用户创建的所有评论的字段以使用新用户名。这是一个额外的步骤，您可能会忘记这样做，因此容易出错。使用`ForeignKey`立即解决了这个问题。即使用户更改了他/她的用户名，用户的主 id 也不会改变，因此如果评论链接到主键（即外键），则不必更新评论。所以工作量更少，方法更可靠。

所以这样做（`related_name`接下来会解释）：

```
user = models.ForeignKey(User, related_name='reviews') 
```

# `related_name`

当您使用`related_name`Django 时，您的生活会轻松很多。

考虑你的观点。首先查询产品。然后，一旦你得到它，你就得到它的 id，然后你构造一个查询，它将返回该产品的所有评论。使用 Django，您可以使用更少的代码完成所有这些工作。

```
product = get_object_or_404(Productbackup, url_friendly=product_name)
reviews = product.reviewbackup_set.all() 
```

`_set`然而，由于整个业务，这有点令人困惑。这就是`related name`进来的地方。如果您将`product`字段定义如下：

```
product = models.ForeignKey(Productbackup, related_name='reviews') 
```

那么你可以以更易读的方式做同样的事情（并且 Python 应该是可读的......）：

```
reviews = product.reviews.all() 
```

# 用户资料

外键允许实现一对多的关系。因此，对于产品和评论来说，这是非常有意义的。一个产品可以有很多评论。但是，用户配置文件通常不是这种情况。通常一个用户只有一个用户配置文件。因此，在您的用户配置文件中，您不应该`ForeignKey`对用户使用，而是应该`OneToOneField`像这样使用：

```
user = models.OneToOneField(User, primary_key=True, related_name='profile') 
```

这使您可以轻松访问用户的个人资料：

```
user_profile = User.objects.get(...).profile 
```

# 用户画像

对于每条评论，现在由于用户`ForeignKey`按照我的第一个解释，您可以非常轻松地访问用户的图像：

```
review = Reviewbackup.objects.all()[0]
user_image = review.user.profile.image   # <- see, very easy 
```

# 图片网址

每当您`FileField`在 Django 中使用时，它都会将文件上传到`upload_to`您的媒体文件夹下——`MEDIA_ROOT`在您的项目设置中定义的那个。因此，在您的情况下，Django 会将图像存储`images`在您的媒体文件夹中的文件夹中。此外，如果您配置`MEDIA_URL`，则允许访问文件的 url，例如：

```
user_profile.image.url 
```

# 硬编码的 URL

在模板中包含直接 url 是一个非常糟糕的主意。这就是 url 模式名称的用途。所以想法是您为 url 模式分配一个名称，以便稍后您通过引用名称来获取 url。这使得代码更易于维护。例如，以下是用户的 url 模式：

```
url(r'^user/(?P<username>\w+)/$', 'user_view', name='user_view') 
```

这允许您在模板中像这样使用它：

```
{% load url from future %}
link: <a href="{% url 'user_view' username=user.username %}">{{ user.username }}</a> 
```

# 把所有东西放在一起

```
# views.py
def view_reviews(request, product_name):
    product = get_object_or_404(Productbackup, url_friendly=product_name)
    reviews = product.reviews.all().order_by("-created_on")
    return render_to_response('reserve/templates/view_reviews.html',
                              {'reviews':reviews},
                              context_instance=RequestContext(request)) 
```

和

```
# models.py
class Reviewbackup(models.Model):
    review = models.CharField('Review', max_length = 2000)
    user = models.ForeignKey(User, related_name='reviews')
    rating = models.IntegerField(max_length=2, choices=RATING_OPTIONS)
    product = models.ForeignKey(Productbackup, related_name='reviews')
    def __unicode__(self):
        return self.review

class UserProfile(models.Model):
    user = models.OneToOneField(User, primary_key=True, related_name='profile')
    image = models.ImageField(blank=True, null=True, max_length=255, upload_to="images/") 
```

和

```
{# template #}
{% load url from future %}
{% for review in reviews %} 
    <br><a href="{% url user_view username=review.user.username %}">
        {{ review.user.username }}</a><br>
    <img class="thumbnail" src="{{ review.user.profile.image.url }}"><br>
    {{ review.review }}
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T00:10:05.090

看起来您不知道如何获取您的用户个人资料。以下是有关如何定义 UserProfile 以使其正常工作的一些信息：

[https://docs.djangoproject.com/en/dev/topics/auth/#storing-additional-information-about-users](https://docs.djangoproject.com/en/dev/topics/auth/#storing-additional-information-about-users)

简而言之，您将 UserProfile.user 设为 OneToOneField，然后您就可以使用 user.get_profile()。否则，您可以保持模型定义不变，并使用类似`UserProfile.objects.get(user=user)`或`user.userprofile_set.all()[0]`(eww) 之类的东西。

拥有 UserProfile 对象后，@Ignacio 是完全正确的。图片在那里。我怀疑问题`{{ review.user.userprofile.image }}`在于，由于 user 是 ForeignKey 而不是 OneToOneField 您的 User 而是带有一个`userprofile_set`属性。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-25T22:50:01.777

`image`没开`User`，开`UserProfile`。

```
{{ review.user.userprofile.image }} 
```

# ruby-on-rails-3 - 根据旧表栏的数据创建一个新表

> ID：12592170
> 
> 赞同：1
> 
> 时间：2012-09-25T22:43:07.267
> 
> 标签：ruby-on-rails-3

我有一个`users`包含每个用户详细信息的表。我想`users`根据条件（例如他们的年龄）创建一个仅包含表中某些行的新表。我如何在 rails 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T22:52:54.600

您必须创建迁移。在此迁移中，您首先必须创建新表，然后您可以在两个选项之间进行选择。

1.  您可以使用模型读取数据，使用 ruby​​ 过滤器方法过滤数据集，然后将剩余模型转换为新模型并保存。但我建议您不要这样做，因为当您删除当前模型后，您将无法稍后执行此迁移。（迁移使用旧模型读取数据，但在代码中不再可用）
2.  您使用纯 SQL：

    ```
    class XMigration < ActiveRecord::Migration
      def up
        execute <<-SQL
    CREATE TABLE new_table
    (id INTEGER AUTO_INCREMENT PRIMARY KEY, ...);

    INSERT INTO new_table (...)
    SELECT ... FROM old_table WHERE condition;
        SQL
      end

      def down
        raise ActiveRecord::IrreversibleMigration
      end
    end 
    ```

# esb - Mule ESB 自动生成 HTTP 参数

> ID：12592172
> 
> 赞同：0
> 
> 时间：2012-09-25T22:43:09.560
> 
> 标签：esb, mule

我是 Mule 的新手，一天中的大部分时间我都在用头撞墙来解决这个问题。我有以下流程：

```
 <flow name="flow1" doc:name="flow1">
        <poll frequency="1000">
            <logger message="starting" level="INFO" doc:name="Logger"/>
        </poll>
        <http:outbound-endpoint exchange-pattern="request-response" host="xxx.xxx.xxx.xxx" port="80" path="service_type/service?variable=epoch_timestamp" method="GET" doc:name="HTTP"/>
        <byte-array-to-string-transformer doc:name="Byte Array to String"/>
        <echo-component doc:name="Echo"/>
    </flow>
</mule> 
```

我需要自动生成纪元时间戳作为我的服务的参数。该值应该是调用时的系统时间。在 Mule 中执行此操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:28:02.277

这可以使用许多 mule [Expression Evaluator之一来实现](http://www.mulesoft.org/documentation/display/MULE3USER/Expressions+Configuration+Reference)

根据您可能想要使用 MEL (mule >= 3.3.0) 或函数 (mule < 3.3.0) 的版本

在这种情况下，您的出站端点将如下所示：

```
<http:outbound-endpoint exchange-pattern="request-response" host="xxx.xxx.xxx.xxx" port="80" path="service_type/service?variable=#[new Date().toString()]" method="GET" doc:name="HTTP"/> 
```

# video - 使用 youtube api 将 youtube 视频从私有更改为公共时，editLink 为空

> ID：12592181
> 
> 赞同：0
> 
> 时间：2012-09-25T22:44:03.263
> 
> 标签：video, youtube-api, gdata

我正在尝试将 youtube 视频从私人更新为公开。但是我得到的编辑链接是空的。

这是我的代码：

```
// returns a youtube service
GDataServiceGoogleYouTube *service = [self youtubeService];
[service setAuthToken:[self getRequestToken]];

NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"https://gdata.youtube.com/feeds/api/videos/%@?v=2&key=%@", youtube_id, DEVELOPER_KEY]];
GDataServiceTicket *ticket;
ticket = [service fetchFeedWithURL:url delegate:self didFinishSelector:@selector(didFinishFetchingVideo:withEntry:error:)]; 
```

在回调中，[videoEntry editLink] 为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T15:42:48.480

我相信只有[上传提要](https://developers.google.com/youtube/2.0/developers_guide_protocol_updating_and_deleting_videos)中的视频条目是可编辑的。因此，您需要使用以下 URL 模式：

`https://gdata.youtube.com/feeds/api/users/default/uploads/%@?v=2&key=%@`

# javascript - 用 CKEditor 发疯

> ID：12592185
> 
> 赞同：0
> 
> 时间：2012-09-25T22:44:16.240
> 
> 标签：javascript, ckeditor

说白了，剥这头野兽的皮简直就是一场噩梦。

无论如何，我试图将对话框窗口的 textName 作为一个类添加到它的容器中，以使我的生活更轻松。

我做错*了什么*，因为它似乎对我不起作用。有任何想法吗？我也尝试过jQuery方式，但没有成功。

```
CKEDITOR.on('dialogDefinition', function(ev){
                    var dialogName = ev.data.name;
                    var dialogBox = document.querySelector('table.cke_1_dialog');
                    dialogBox.setAttribute("class", dialogName);
                }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T23:18:24.373

弄清楚了。

```
CKEDITOR.on('dialogDefinition', function(ev){
    var dialogName = ev.data.name;
    ev.data.definition.onLoad = labeler;
    function labeler(){
        var dialogBox = document.querySelector('table.cke_dialog');
        dialogBox.className = dialogBox.className + " " + dialogName;
    }
}); 
```

# xcode - 在 Xcode 4.3.2 中设置滚动视图的内容

> ID：12592188
> 
> 赞同：0
> 
> 时间：2012-09-25T22:44:30.573
> 
> 标签：xcode

我是使用 Xcode 的初学者，我确信我的要求很简单，但我还不知道如何做到这一点：我想在滚动视图上附加显示图像。

细节：

我正在使用 Xcode 4.3.2，并通过将滚动视图从对象库拖放到视图中，将滚动视图添加到我的视图控制器中。

在我的头文件中，我有：

```
@property (weak, nonatomic) IBOutlet UIScrollView *scrollView; 
```

在我的实现文件中，我有：

```
@synthesize scrollView; 
```

我有一个大约 420 x 1900 的图像，我想将它添加到滚动视图中。我该怎么做呢？我创建了一个 UIImage 视图并将图像视图设置为图像：

```
UIImage *scrollViewImage = [UIImage imageNamed:@"fileName.png"];
[imageView setImage:scrollViewImage]; 
```

但我不知道如何执行将图像连接到滚动视图以便显示它的最后一步。任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T23:52:00.840

您需要`UIImageView`将`UIScrollView`.

```
[scrollView addSubview:imageView]; 
```

你也创建了 UIImageView 吗？您没有在问题中提及如何设置它。

# error-handling - 为什么 li3 HTML 助手有时不能生成正确的路径？

> ID：12592189
> 
> 赞同：0
> 
> 时间：2012-09-25T22:44:37.710
> 
> 标签：error-handling, helpers, lithium

## 问题

在`'default'`我的锂安装布局中，我有以下代码：

```
<?php echo $this->html->script(array('jquery-1.7.1-dev.js')); ?> 
```

对于所有正常请求（例如`/path/to/framework/users/login`，`Users`模型在哪里，`UsersController::login`方法在哪里），它正确呈现为：

```
<script type="text/javascript" src="/path/to/framework/js/jquery-1.7.1-dev.js"></script>` 
```

但是，在我的错误处理代码呈现的视图中，`/path/to/framework`省略了它，它呈现为：

```
<script type="text/javascript" src="/js/jquery-1.7.1-dev.js"></script> 
```

**为什么在这种情况下助手不能正确渲染路径？**

* * *

## 错误处理方法

我的错误处理方法基于许多在线教程。在`config/bootstrap/errors.php`我有：

```
$exampleConditions = array('type' => 'Exception');
ErrorHandler::apply('lithium\action\Dispatcher::run', $exampleConditions, function($info, $params) {
    return ErrlogsController::handleError($info, $params);
});
ErrorHandler::run(); 
```

在`ErrlogsController`课堂上我有：

```
public static function handleError($info, $params) {
    // (Code to save error info to DB omitted from example)
    $view = new View(array(
        'paths' => array(
            'template' => '{:library}/views/{:controller}/{:template}.{:type}.php',
            'layout'   => '{:library}/views/layouts/{:layout}.{:type}.php'
        )
    ));
    return $view->render('all', array(), array(
        'template' => '404',
        'controller' => 'errlogs',
        'layout' => 'default',
        'type' => 'html'
    ));
} 
```

我已经深入研究了代码`lithium\template\view\Renderer::applyHandler`以及`File`执行实际渲染的适配器以尝试理解这种行为，并且我也尝试向数组添加一个`'elements'`键，但我有点卡住了。非常感谢任何建议或帮助。`'paths'``$view`

* * *

## 背景

下面的两个链接显示了如何使用`ErrorHandler::apply`函数（如上面的代码）和`ErrorHandler::config`. 两者都使用与上述代码相同的方法来渲染视图，第一种方法对这篇文章也很有趣，因为它还展示了如何以不同的方式处理不同类型的错误。

*   [示例一 - masom](http://masom.posterous.com/handling-404-and-uncatched-exceptions-in-lith)
*   [示例二 - Lithium wiki](http://li3.me/docs/manual/handling-http-requests/controllers.wiki) - 显示如何使用该`ErrorHandler::apply`功能

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T19:19:25.607

框架的组件从`Request`对象中获取它们的应用程序基路径信息，`View`类将其委托给它的助手，当然除非它自己没有收到它。

在您的情况下，您可以将其传递`'request'`给`View`的构造函数，或者更新为更现代版本的错误处理代码，如下所示：[https ://github.com/UnionOfRAD/framework/blob/master/app /config/bootstrap/errors.php](https://github.com/UnionOfRAD/framework/blob/master/app/config/bootstrap/errors.php)

# c# - 解析 Json 字符串

> ID：12592190
> 
> 赞同：3
> 
> 时间：2012-09-25T22:44:56.533
> 
> 标签：c#, json

是否有本机库可以让我解析 Json 格式的字符串？比如说，我有字符串：

```
string inp = "{ \"title\": \"My Title\" }"; 
```

是否有一个类，我可以使用该 Json 格式的字符串构造一个对象并找到 的值`title`？

编辑：我的应用程序是一个控制台应用程序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T22:46:53.787

您可以使用 DataContractJsonSerializer 将 Json 格式的字符串反序列化为对象

[http://msdn.microsoft.com/en-us/library/bb410770.aspx](http://msdn.microsoft.com/en-us/library/bb410770.aspx)

为了获得更好的性能，如果你愿意安装 NuGet 包，

[http://json.codeplex.com/](http://json.codeplex.com/)

很受欢迎。

这两种选择都适用于**控制台应用程序**。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T22:47:48.480

不是原生而是强大的：[Json.NET](http://json.codeplex.com/)

*   灵活的 JSON 序列化器，用于在 .NET 对象和 JSON 之间进行转换
*   LINQ to JSON 用于手动读写 JSON
*   高性能，比 .NET 的内置 JSON 序列化程序更快
*   编写缩进、易读的 JSON
*   将 JSON 与 XML 相互转换
*   支持 .NET 2、.NET 3.5、.NET 4、Silverlight、Windows Phone 和 Windows 8。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T22:47:42.177

根据项目的类型，[JavaScriptSerializer](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)可能可用。还允许您创建可以填充自定义对象的解析器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T22:50:52.557

你应该看看 Json.Net [http://json.codeplex.com/](http://json.codeplex.com/) 它有各种很棒的工具来支持 Json 在.Net

# php - 防止zend控制器/ajax刷新页面

> ID：12592192
> 
> 赞同：1
> 
> 时间：2012-09-25T22:45:00.433
> 
> 标签：php, ajax, zend-framework

我有一个带有下拉选择框的页面。选择某事后，有一个Ajax调用，该调用调用Zend Controller，该控制器返回一些数据，然后页面的另一部分将带有数据填充。问题是页面刷新，我想阻止这种情况。

我已经尝试了几件到目前为止不起作用的事情。

推杆

```
event.preventDefault();
return false; 
```

在我的 javascript/jquery/ajax

推杆

```
$this->disableRender();
$this->_helper->layout->disableLayout();
$this->_helper->viewRenderer->setNoRender(TRUE); 
```

在控制器本身..并且还放

```
return false; 
```

在控制器的末端。

有没有人有什么建议？

编辑：这是下面的ajax和控制器代码

```
<script>

$(document).ready(function() {

    $("#advDropdown").change(function (event) {
        //event.preventDefault();
        //return false;
        var advertiser_id;
        advertiser_id = $("#advDropdown").val();

        $.ajax({
            type: 'POST',
            dataType: 'json',
            //url: '/dashboard/reporting/getallcampaigns',
            url: '/admin/ajax/getallcampaigns?format=json',
            data: { advertiser_id: advertiser_id },
            success: function(data) {
                //alert(adv_data);
                //var data = jQuery.parseJSON(adv_data);
                var count = 0;
                // loop through the returned data object
                for(var key in data) {
                    if(typeof data[key] === "object") {
                        for(var i = 0; i < data[key].length; i++) {
                            for(var property in data[key][i]) {
                                 //alert(property + " = " + data[key][i][property]);
                                if(count == 0){

                                    $('#campaign').html('<table id="campaign">');
                                    $('#campaign').append('<thead><tr><th width="100"><input type="checkbox"></th><th width="500">Campaign Name</th>');
                                    $('#campaign').append("</tr></thead>");

                                } else {
                                     $('#campaign').append('<tr><td><input type="checkbox" id=' + property +'"></td><td>' + property + " - " + data[key][i][property] + "</td></tr>" );

                                }
                                count = count + 1;
                            }
                        }
                        $('#campaign').append("</table>");

                    } else if(typeof data[key] === "string") {
                       // alert(key + " = " + data[key]);
                    }
                }

                //alert("campaigns: " + campaigns);
                //this.preventDefault();
                event.preventDefault();
                return false;

            },
            error: function() {
                alert("could not change the status indicator color");
            }
        });  

        return false;  
    });

</script> 
```

下面是控制器代码

```
<?php

class Admin_AjaxController extends Zend_Controller_Action{

    public function init(){

        $this->_helper->layout->disableLayout();

        $this->_helper->viewRenderer->setNoRender();
    }

    public function getallcampaignsAction(){

            $this->_helper->layout->disableLayout();

            $this->_helper->viewRenderer->setNoRender();

            $campaign = new Campaign();

            $data = $this->_request->getPost();

            $campaigns = $campaign->getCampaigns($data['advertiser_id']);

            $result = array();

            $db = Zend_Db_Table_Abstract::getDefaultAdapter();
            foreach($campaigns as $campaign){

                // get campaigns id and get the name

                $c_sql = 'SELECT * FROM campaigns WHERE ext_id =  ' . $campaign['ext_id'];
                error_log("c_sql2: " .   $c_sql );

                $campaign_name = $db->query($c_sql)->fetchAll();

                $campaign_name2 = $campaign_name[0]['name'];

                $temp_array = array( $campaign['ext_id'] => $campaign_name[0]['name'] );
                array_push($result, $temp_array );

            }
            $final_array = array('data' => $result);

            //header('Content-type: application/json');

            echo json_encode($final_array);
            //Zend_Controller_Action_HelperBroker::removeHelper('viewRenderer')
            //$this->_helper->sendJson($data, array('keepLayouts' => false));
            //$this->_helper->json($data, true, array('keepLayouts' => false);

            //error_log("");
            //return $final_array;
            //$response = $this->_helper->autoCompleteDojo->sendAutoCompletion($data);

            //$view = new ViewModel();
            //$view->setTerminate(true);
            //return $view;
            //return $this->response;
            //exit();

            //return false;
            //die();

        }

}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T05:58:30.537

我为 ajax 创建了一个仅称为 AjaxController.php 的控制器

```
public function init()
{
    $this->_helper->layout->disableLayout();
    $this->_helper->viewRenderer->setNoRender();
}

private function __isAjax() {
    return (isset($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest');
}

public function onselectAction(){
    if (self::__isAjax()) {
        if ($this->getRequest()->isPost()){
            $selected = $this->getRequest()->getPost('selected');
            $getModel = new Application_Model_DbTable_City();
            $this->view->data = $getModel->getData($selected);
            $this->renderScript('ajax/result.phtml');
        }

    }else{
        echo "some error occured";
    }
} 
```

我通过这个 jquery 调用了这个函数

```
jQuery.ajax({
            type: "POST",
            url: "<?php echo $this->url(array('controller'=>'ajax','action'=>'onselect'),null,true) ?>",
            data: 'selected='+selected,
            success: function(data) {
                jQuery('#result').html(data);
            }
        }); 
```

它对我来说很好。

# ruby-on-rails - 同一个 rails 引擎的多个实例

> ID：12592193
> 
> 赞同：3
> 
> 时间：2012-09-25T22:45:19.607
> 
> 标签：ruby-on-rails, rails-engines

为什么 Rails 引擎设计得像单例？有没有办法多次安装相同的引擎，例如为每个安装的应用程序使用不同的数据库？

这里：[在 Rails 3 中安装同一引擎的多个实例](https://stackoverflow.com/questions/3312892/mounting-multiple-instances-of-the-same-engine-in-rails-3) 是关于命名空间的答案，但我认为我可以通过配置重新定义视图路径。那么 - 有没有办法干净地实现多实例安装？

# ruby-on-rails - 为什么 Grails findOrSaveBy* 动态查找器不接受第二个参数进行创建？

> ID：12592200
> 
> 赞同：2
> 
> 时间：2012-09-25T22:46:12.240
> 
> 标签：ruby-on-rails, grails, dynamic, grails-2.0

来自 Rails 背景，我很高兴看到 Grails 2.0.x 支持表单的动态查找器`Model.findOrSaveBy*`和`Model.findOrCreateBy*`. 但是，该功能受到极大的人为限制——根据[文档](http://grails.org/doc/2.1.0/ref/Domain%20Classes/findOrSaveBy.html)，该方法接受*n 个*参数，其中*n*是方法调用中列出的属性的确切数量。例如：

```
class Car {
  String color
  String license

  static constraints = {
    license blank: false, unique: true
    color blank: false, inList: ["red", "black"]
  }
}

/* If there exists a Car(color: red, license: "ABCDEF") */

// WORKS
Car.findOrSaveByColor("red")  // will find the car
Car.findOrSaveByLicense("ABCDEF")  // will find the car
Car.findOrSaveByLicenseAndColor("UVWXYZ", "black")  // will persist a new car

// DOES NOT WORK
Car.findOrSaveByLicense("UVWXYZ")  // will fail because the color is not provided
Car.findOrSaveByLicense("UVWXYZ", color: "black")  // will fail due to an extra parameter
Car.findOrSaveByLicenseAndColor("ABCDEF", "black")  // will fail due to persisting a new instance because the color does not match, which then has a unique collision 
```

我只关心通过唯一`license`值定位，但如果对象不存在，我需要用所有必需的属性填充它。[Rails 允许您](http://api.rubyonrails.org/classes/ActiveRecord/Base.html)通过`Hash`参数来执行此操作，如下所示：

```
// Using findOrSaveBy* because Grails:"save"::Rails:"create" and "create" does not persist in Grails
Car.findOrSaveByLicense("ABCDEF", color: "red")  // will find a car with that license plate regardless of color or persist a new entry with the license and color "red" 
```

这个功能没有在 Grails 中实现是有原因的吗？在我看来，这极大地限制了这些动态查找器的有用性。我想我可以`methodMissing`在域类中添加一个拦截调用并委托给类似的东西：

```
def car = Car.findByLicense("UVWXYZ") ?: new Car(license: "UVWXYZ", color: "red").save(flush: true) 
```

但它似乎非常重复。有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T20:30:51.563

根据您的示例，一个简单的解决方案是在您的域类中为颜色提供默认值：

```
class Car {
  String color = "red"
  String license

  static constraints = {
    license blank: false, unique: true
    color blank: false, inList: ["red", "black"]
  }
} 
```

然后以下应该工作：

```
Car.findOrSaveByLicense("UVWXYZ") 
```

# html - 如何将 html 加载到也已从外部 html 文件加载的“皮肤”中？

> ID：12592203
> 
> 赞同：0
> 
> 时间：2012-09-25T22:46:25.720
> 
> 标签：html, load, external, jquery

我正在尝试将 html 加载到也已从外部 html 文件加载的皮肤（带有导航按钮的页眉/页脚）中。这是 jsfiddle 中的代码，虽然它不起作用，因为我无法将两个外部文件放入 jsfiddle：

[http://jsfiddle.net/J4yUt/1/](http://jsfiddle.net/J4yUt/1/)

这是两个外部文件中的内容：

medbox.html：

```
<div id="medBox"></div> 
```

小盒子.html：

```
<div id="smallBox"></div> 
```

当我单击按钮时，中框出现在大框中，但小框没有出现在中框中。我认为加载 smallbox.html 的代码在 medBox.html 完全加载之前执行，那么如何让它等待 medBox.html 完全加载？

这就是我想要的结果：

[http://jsfiddle.net/Sv4yf/2/](http://jsfiddle.net/Sv4yf/2/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T22:49:32.567

只需使用`.load()`' 回调：

```
$("#bigBox").load("medBox.html", function(response, status, xhr) {
    if (status == 'success') {
        $("#medBox").load("smallBox.html");
    }
}); 
```

`.load()`发送一个 AJAX 请求，该请求是异步的，并且不会阻止其后代码的执行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T22:49:49.463

```
$("#bigBox").load("medBox.html", function(){
   $("#medBox").load("smallBox.html");
}); 
```

在您的第一个负载处理程序中使用回调函数。

阅读更多：[http ://api.jquery.com/load](http://api.jquery.com/load)

# c++ - Qt QLabel setPixmap 不需要的填充

> ID：12592205
> 
> 赞同：0
> 
> 时间：2012-09-25T22:47:04.067
> 
> 标签：c++, qt, margin, padding, qpixmap

我有一个 QLabel，其 sizepolicy 的`QSizePolicy::Expanding`两个维度都为，我想在其中显示图像`QLabel::setPixmap`。不应调整主窗口的大小，这就是我在设置为 QLabel 大小之前缩放像素图的原因。

图像设置正确，但在顶部和底部有一个我不想要的填充，顶部 12 像素，底部 13 像素。-`setPixmap`命令调整 QLabel 和主窗口的大小。我不知道为什么。QLabel 的样式表是空的。我可以为 QLabel 背景着色，以查看额外的空间是 QLabel 的填充（或像素图的边距）。当我尝试调整主窗口的大小时，我不能把它弄小以至于这个额外的边框消失，我可以放大它并且所有边的填充都会增加（如预期的那样），但我不能让它变小来摆脱这个额外的保证金。

有人知道是什么原因造成的吗？

编辑：

添加了一些代码。在这些行之前`ui->label_title`是空的，并且`label_title`在相同的垂直布局中，就在`label_main`. 我只是想，当一些文本设置为 label_title 时，布局还没有更新，所以下一行返回旧大小，然后图像太大，因为标题占用了一些空间，主窗口必须调整大小。是否有更新布局的命令，因此其中的所有小部件都会获得新的大小？`layout->update();`没用。

```
ui->label_title->setText(imgNames.at(crntItemNr));
QSize size = ui->label_main->size();
ui->label_main->setPixmap(images.at(crntItemNr).scaled(size, Qt::KeepAspectRatio, Qt::SmoothTransformation)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T11:25:07.993

问题是[doc](http://harmattan-dev.nokia.com/docs/platform-api-reference/xml/daily-docs/libqt4/layout.html#layout-issues)`wordwrap`中解释的 label_title 。label_main 的行为很奇怪，很难在 label_title 中找到原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T23:07:25.903

这可能是因为您对窗口大小使用了错误的测量值。您正在考虑盒子模型，并访问几何图形，它的测量方式不同：

[http://qt-project.org/doc/qt-5.0/stylesheet-customizing.html](http://qt-project.org/doc/qt-5.0/stylesheet-customizing.html)

[http://qt-project.org/doc/qt-4.8/application-windows.html#window-geometry](http://qt-project.org/doc/qt-4.8/application-windows.html#window-geometry)

如果没有代码示例，很难确切地看出哪里出了问题。

我希望这会有所帮助。

# dns - 域名命名法

> ID：12592206
> 
> 赞同：3
> 
> 时间：2012-09-25T22:47:07.293
> 
> 标签：dns, nomenclature

我想引用域的不同部分，但不知道各个部分的名称。DNS 上的[RFC](http://www.ietf.org/rfc/rfc1034.txt)似乎没有明确说明这个问题。

*   给定域：www.google.com

    “com”被称为通用顶级域。我们如何称呼“谷歌”和“www”？

*   给定域：api.yahoo.co.uk

    “uk”被称为国家代码顶级域。我们怎么称呼“co”、“yahoo”、“api”？

*   给定域：sales.corporate.ge

    “ge”被称为赞助顶级域名（它是虚构的）。什么叫“企业”和“销售”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T22:53:42.787

第一个和第三个示例：google 和corporate 将是[二级域](http://en.wikipedia.org/wiki/Second-level_domain)

第二个例子：co 是[国家代码二级域 (ccSLD)](http://en.wikipedia.org/wiki/Country_code_second-level_domain)

在此之下，术语将只是“子域”或偶尔的“三级域”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T22:55:05.543

一切都是其父域的子域。

隐藏的秘密：从技术上讲，每个完全合格的域名都以点“.”结尾，但您可以放心地将其省略。所以“www.google.com”应该是“www.google.com.”。有时您需要终端点来消除相对域名的歧义，但现在让我们忽略它。

由点分隔的域名的每一部分都是一个“标签”——但您只能在 DNS 服务器文档的上下文中看到该术语，通常是因为每个标签的长度限制为 63 个字符。

不幸的是，您列出的“人类可识别”部分没有标准命名法，但我遇到的一般术语是：

“。” - 根
“.com” - （通用）顶级域
“google” - （在某些圈子中）顶级域（因为它是消费者可以注册的顶级域），否则是“.com TLD 的子域”
"www" - "google.com" 的子域
"something.www.google.com" - "google.com 的子域，子域为 "something.www"

现在从技术上讲，如果标签只是 CNAME 或 A 记录，则它不一定是“子域”，但这是一个实现细节。从技术上讲，如果标签有自己的 SOA 记录，则它只能引用真正的子域，但这是语义上的争论。

总体？我不会担心的。当您说“子域”时，人们通常会知道您的意思，即使一个子域被拆分为多个标签。

# jquery - Jquery AJAX 在 IE9 中不起作用

> ID：12592209
> 
> 赞同：11
> 
> 时间：2012-09-25T22:47:17.077
> 
> 标签：jquery, ajax

我正在编写一个 ajax Web 应用程序，但是无论出于何种原因，当我对 Internet Explorer 9 (IE9) 中的内部数据服务执行 GET 时，它都不起作用。同样的调用在 Chrome、Firefox 和 Safari 中运行良好。我正在使用 localhost Web 服务器 (wamp) 进行开发，并在与我尝试访问的数据服务相同的网络上进行开发。我正在使用 Jquery 1.8.1（我已经返回了几个版本，但仍然看到问题）。我的代码如下所示：

```
$(document).ready(function() {

                    var loginUrl = "http://omittedurl.com";
                    console.log(loginUrl);
                    $.ajax({
                        type : "GET",
                        url : loginUrl,
                        dataType : "json",
                        success : function(response) {
                            console.log("RESPONSE: " + response);

                        }
                    });
            }); 
```

正如我之前所说，这段代码在 Chrome 和 Firefox 上运行良好。在 IE9 中，当我查看 Web 调试器时，日志中没有错误。就像 IE9 完全忽略了 .ajax 块。我尝试过的事情：

*   关闭 Ajax 缓存
*   URL 编码我的请求 URL
*   回到三个旧版本的 Jquery
*   从 IE9 手动 ping 我的 URL（能够得到响应）

有任何想法吗？？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-25T23:10:15.343

看起来像它的一个问题

**控制台.log()**

当开发人员工具未打开时，IE 没有控制台对象。尝试通过注释您的 console.log 来运行您的代码，然后重试..

```
$(document).ready(function () {

    var loginUrl = "http://omittedurl.com";
    //console.log(loginUrl);
    $.ajax({
        type: "GET",
        url: loginUrl,
        dataType: "json",
        success: function (response) {
           // console.log("RESPONSE: " + response);
           alert("RESPONSE: " + response)
        }
    });
}); 
```

如果你想使用控制台，如果开发者工具没有打开，你需要先定义它。

```
if (typeof console === "undefined" || typeof console.log === "undefined") {
     console = {}; 
```

# sql - 每次 vs 查询覆盖值以查看值是否已更改

> ID：12592211
> 
> 赞同：2
> 
> 时间：2012-09-25T22:47:28.237
> 
> 标签：sql, sql-server, performance, tsql

我有一列，只有当我传递给存储过程的值与列中的值不同时，我才想更新该列。如果重要的话，它恰好是一个 NVARCHAR(255) 列。

每次都写这个值有什么好处和坏处？首先检查值并仅在我传入的内容与数据库中的内容不同时才写入的优缺点是什么？

我在编写之前进行比较的简化示例：

```
-- @URL and @ContentName are parameters of the sproc    

SET @ExistingURL =
    (SELECT TOP 1 C.URL
    FROM Content C
    WHERE ContentName = @ContentName)

-- update only if the parameter and existing value are different
IF(@ExistingURL != @URL)
BEGIN
    UPDATE Content
    SET URL = @URL
    WHERE ContentName = @ContentName
END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T23:59:15.643

看起来您的查询可以按如下方式重写，而无需将任何内容放入局部变量中。

```
UPDATE dbo.Content
  SET URL = @URL
  WHERE ContentName = @ContentName
  AND URL <> @URL; 
```

假设它`ContentName`是唯一的，这将影响 0 或 1 行。无需通过将 URL 的检查拉到单独的查询中来使逻辑更复杂。“仅在需要时写入”部分由该`WHERE`子句处理。

现在，如果您要将其扩展到多个列进行更新，那么您所追求的并不是那么简单（而且我认为这不值得）。例如，假设有另一个列 name `title`，并且您有一个名为的变量`@title`。您预测仅`URL`在更改时才更新，并且仅在更改时才更新将是明智的`title`。理论上，您可以通过多种方式完成此操作（请记住，这一切都假设变量和列都不可为空 - 如果它们是，它不会改变这些方法，只是使语法有点更令人生畏）：

1.  运行两个独立的更新

    ```
    UPDATE dbo.Content SET URL = @URL
      WHERE ... -- actual where clause
      AND URL <> @URL;

    UPDATE dbo.Content SET title = @title
      WHERE ... -- same where clause
      AND title <> @title; 
    ```

2.  有条件地更新

    ```
    UPDATE dbo.Content
      SET URL = CASE WHEN URL <> @URL THEN @URL ELSE URL END,
          title = CASE WHEN title <> @title THEN @title ELSE title END
    WHERE ... -- same where clause
    AND (URL <> @URL OR title <> @title); 
    ```

我怀疑后者不会比写这个更自然的方式表现更好，因为无论如何你都在锁定并写入行（但除了迈克的认可之外，我没有任何可靠的证据上面的评论）：

```
UPDATE dbo.Content
  SET URL = @URL, title = @title
WHERE ... -- same where clause
AND (URL <> @URL OR title <> @title); 
```

换句话说，只需更新所有值，而不管哪些值实际发生了变化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T00:33:50.800

名义上，写入的时间是读取的两倍。
写入将放置一个锁，因此它可能会阻止读取。
它将在事务日志中放置一个条目。
如果您对该值有触发器怎么办。

作为实践，我在任何活动数据库上测试 <>。

如果表处于活动状态，则对每一行进行锁定可能会受到很大影响。
您的更新必须获取锁。
其他查询必须等待您的锁（除非它们接受脏读）。

如果您实际上只更新大型活动表上 10% 的行，并且通过不测试 <> 来盲目更新所有行，那么这是一个很大的打击。

如果您要更新 99% 的行，那么您会受到一点打击。
测试 <> 需要时间。

过牌你可能会受到小打击，但不过牌你（和其他人）可能会受到很大打击。

检查 <> 的示例更新

```
Update [docSVsys] set [ftsStatus] = 5 where [ftsStaus] <> 5 
```

锁在整行上 - 而不是单个列。如果您要更新超过 1 个值，那么仍然重要的是行的百分比。

```
Update [docSVsys] set [ftsStatus] = 5, [wfID] = 3 
where [ftsStatus] <> 5 or [wfID] <> 3 
```

如果只有一个值更改，则更新两者都不是命中，因为它必须获取行上的更新锁。

几个小时后发布的实际声明。

正如 Aaron 所说，左连接什么都不做。

就目前而言，第一个查询返回 @URL 或 null。
而且它不是基于 ContentName。

所以看着

```
if(@ExistingURL != @URL) 
```

仅当表中没有行具有该值时，这才是正确的。

唯一约束与它只允许一个空值不同。

我很惊讶你的问题不是。这次更新失败？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T00:59:38.270

有一个简单的模式可以解决这个问题：

```
update my_table set
my_col = 'newValue'
where id = 'someKey'
and my_col != 'newValue'; 
```

此查询具有索引读取的性能，并且重要的是，如果值不需要更新，则不会锁定任何行。

只有当值需要更新时，where 子句才会命中一行并将其锁定（尽管是短暂的）以进行更新。

您可以扩展它以使用相同的逻辑处理多个列：

```
update my_table set
my_col1 = 'newValue1',
my_col2 = 'newValue2'
where id = 'someKey'
and (my_col1 != 'newValue1'
    or my_col2 != 'newValue2'); 
```

# macos - 在 Mac OS X 上为 Zend Framework 2 安装和配置 Apache 2 的 mod_rewrite

> ID：12592215
> 
> 赞同：36
> 
> 时间：2012-09-25T22:47:56.940
> 
> 标签：macos, apache, zend-framework2

我开始使用 zend 框架 2，他们有安装和配置 apache 的 mod_rewrite的[先决条件。](http://framework.zend.com/manual/2.0/en/user-guide/overview.html)Apache 2.2.22 预装在 Mac OS X 10.8.2 上。有没有一种简单的方法来为 apache 安装和配置 mod_rewrite？

我遇到的唯一帮助建议重新编译 apache。这是唯一的方法吗？

* * *

## 回答 #1

> 赞同：152
> 
> 时间：2012-09-27T06:19:39.773

要检查 mod_rewrite 和 PHP 是否已启用，请查看*/etc/apache2/httpd.conf*并确保这些行：

```
LoadModule rewrite_module libexec/apache2/mod_rewrite.so
LoadModule php5_module        libexec/apache2/libphp5.so 
```

未注释。

还要确保`AllowOverride`设置为`All`在该`<Directory "/Library/WebServer/Documents">`部分内。

进行这些更改后，使用以下命令重新启动 Apache：`sudo apachectl restart`

如果您随后将项目放在`/Library/WebServer/Documents`文件夹中，那么它应该可以工作。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-07-20T16:03:16.353

如果您从 为您的网站提供服务`~/Sites`，那么对我来说，诀窍就是修改我的`/private/etc/apache2/users/USERNAME.conf`文件。最初，内容是：

```
<Directory "/Users/USERNAME/Sites/">
    Options Indexes MultiViews FollowSymLinks ExecCGI
    AllowOverride None
    Order allow,deny
    Allow from all
</Directory> 
```

更改`AllowOverride`为`all`然后快速重新启动服务器`sudo apachectl restart`使我能够开始使用 mod_rewrite 在`.htaccess`下面的文件中`~/Sites`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-08-22T03:55:07.357

除了 Rob Allen 的响应之外，两个行号都位于 168 和 169 附近（以节省您滚动 500 多行文本的时间）。另外，要解释每一行的确切作用：

```
LoadModule rewrite_module libexec/apache2/mod_rewrite.so 
```

> 这会覆盖文档根目录中使用的任何 .htaccess 文件的默认设置

```
LoadModule php5_module        libexec/apache2/libphp5.so 
```

> 这允许永久链接的 URL 重写

来源：[链接](http://coolestguidesontheplanet.com/get-apache-mysql-php-phpmyadmin-working-osx-10-10-yosemite/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-06T08:36:55.247

将此添加到 http-vhosts.conf 文件

```
<Directory "/Library/WebServer/Documents">
  Options Indexes FollowSymLinks MultiViews
  AllowOverride All
  Order allow,deny
  Allow from all
</Directory> 
```

不要忘记使用这个命令重新加载你的 apache

```
sudo apachectl restart 
```

祝你好运

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-11-15T12:44:30.433

优胜美地 os x 应该是这样的：

```
<VirtualHost *:80>
    ServerAdmin enzo@enzolutions.com
    DocumentRoot "/Users/enzo/www/drupal8"

    ServerName drupal8

    #ServerAlias www.dummy-host.example.com
    <Directory /Users/enzo/www/drupal8>
        Require all granted
        Options Includes FollowSymLinks
        AllowOverride All
        Order allow,deny
        Allow from all
    </Directory>

    ErrorLog "/private/var/log/apache2/drupal8-error.log"
    CustomLog "/private/var/log/apache2/drupal8-access.log" common
</VirtualHost> 
```

从[这篇博文中得到](http://enzolutions.com/articles/2014/10/19/apache-issues-after-upgrade-to-mac-os-x-yosemite/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-08T18:22:42.197

我的选择

```
<VirtualHost *:80>
    <Directory />
            Options Indexes FollowSymLinks MultiViews
            AllowOverride All
            Order allow,deny
            Allow from all
    </Directory>
    ServerAdmin user@domain.ru
    DocumentRoot "/Users/r00we/sites/buytocoins.ru"
    ServerName site.ru
    ServerAlias www.site.ru
    ErrorLog "/private/var/log/apache2/myfaketestsite.com-error_log"
    CustomLog "/private/var/log/apache2/myfaketestsite.com-access_log" common
</VirtualHost> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-04-27T06:25:43.993

我知道这是一个旧线程，但这也可能引发这个问题：

确保`DocumentRoot`并`Directory`链接到**同一**文件夹，`/etc/apache2/extra/httpd-vhosts.conf`如下所示：

[![在此处输入图像描述](../Images/0de945d80a5546a1617fb9da0132bdb3.png)](https://i.stack.imgur.com/9zliI.jpg)

如果您从现有站点复制虚拟主机块，这是一个无辜的错误。

干杯!

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-10-12T01:45:21.350

Rob Allen 的回答*听起来*不错，但我从未在我的 Mac 上使用过默认安装的 Apache，所以我无法验证。我会推荐[MAMP](http://www.mamp.info/en/index.html)或[Zend Server CE](http://www.zend.com/en/products/server-ce/)。

我花了一点时间来配置 Zend Server CE 并在我的 Mac 上正确运行，但那是第 4 版，它有问题，无论哪种方式都值得。相反，ZSCE 的 5.6 版本似乎要好得多！

[Zend Server CE for Mac OS X 的一些注意事项](http://akrabat.com/php/some-notes-on-zend-server-ce-for-mac-os-x/)

如果您使用 MAMP，除了[配置虚拟主机](http://foundationphp.com/tutorials/vhosts_mamp.php)之外，它应该是一个非常快速的安装。

请注意，这两个都已经安装了**mod_rewrite 。**

# eclipse - 如何将变量作为参数嵌入到 Eclipse 的外部工具中？

> ID：12592217
> 
> 赞同：0
> 
> 时间：2012-09-25T22:48:18.763
> 
> 标签：eclipse, external-tools

我正在尝试为 eclipse 配置一个外部工具，并且我想提示用户在他/她的工作区下选择一个文件夹。Eclipse提供了一个`${folder_prompt}`可以使用的变量，它的第二个参数是起始目录。所以，我想我可以做类似的事情：`${folder_prompt:"Choose a Folder":${workspace_loc}}`但这似乎不起作用。还有另一种方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T16:12:22.570

您的示例对我来说很好（作为外部工具配置中的基本目录条目）。我建议在您的外部工具配置中寻找其他问题。

# sharepoint-2010 - 在母版页中嵌入连接的 WebPart

> ID：12592218
> 
> 赞同：0
> 
> 时间：2012-09-25T22:48:21.620
> 
> 标签：sharepoint-2010

我创建了 2 个连接的 webparts（提供者/消费者）。我现在想将 Provider 插入到我的母版页中，并将 Consumer 插入到页面上的 webpart 区域中。我发现的每个示例都在谈论通过 UI Webpart 属性区域连接它们。但是由于 1 将在母版页上，而另一个将添加到区域中，因此我没有那么奢侈。有谁知道如何在 xml 属性中设置这些属性？

例如，我有这个自定义 webpart 作为提供者：

```
<TeamsiteDropdownlistWebPart:TeamsiteDropdownlistWebPart 
runat="server" 
XmlQuery="" 
Description="My Visual WebPart" 
SiteUrl="http://spdev01:25706" 
Title="TeamsiteDropdownlistWebPart" 
ListName="Teamsite List" 
AllowConnect="true"
__MarkupType="vsattributemarkup" 
__WebPartId="{e4e8cd86-5b32-46bc-a8dc-341c06354787}" 
WebPart="true" 
__designer:IsClosed="false" id="g_e4e8cd86_5b32_46bc_a8dc_341c06354787">
</TeamsiteDropdownlistWebPart:TeamsiteDropdownlistWebPart> 
```

我不知道除此之外该怎么做。

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T00:39:30.240

我们需要 SPLimitedWebPartManager 将 Web 部件与 ASP.NET 样式接口连接起来。步骤如下：

1.  获取页面上的SPLimitedWebPartManager实例；
2.  获取需要连接的提供者和消费者Web部件；
3.  获取提供者和消费者 Web 部件的连接点；
4.  使用 SPConnectWebParts 方法连接它们。如有必要，需要对兼容接口进行某些转换

你的代码：

```
SPWeb web = (SPWeb)properties.Feature.Parent;      
SPLimitedWebPartManager mgr = web.GetLimitedWebPartManager("default.aspx", PersonalizationScope.Shared);      
System.Web.UI.WebControls.WebParts.WebPart provider= mgr.WebParts["TeamsiteDropdownlistWebPart"];   
System.Web.UI.WebControls.WebParts.WebPart consumer= mgr.WebParts["ConsumerWebPart"];  
ConsumerConnectionPoint addConsumerConnPoint = mgr.GetConsumerConnectionPoints(consumer)["AddressConsumer_ot"];   
ProviderConnectionPoint addProviderConnPoint = mgr.GetProviderConnectionPoints(provider)["AddressProvider_ot"];      
mgr.SPConnectWebParts(provider, addProviderConnPoint, consumer, addConsumerConnPoint); 
```

这来自[http://www.dhirendrayadav.com/2010/06/connecting-web-parts-programmatically.html](http://www.dhirendrayadav.com/2010/06/connecting-web-parts-programmatically.html)，似乎是共识。不幸的是，我没有可以测试的香草环境，

# mysql - MySQL ON 重复更新不起作用

> ID：12592223
> 
> 赞同：0
> 
> 时间：2012-09-25T22:49:26.200
> 
> 标签：mysql

我正在运行以下插入语句：

```
INSERT INTO list_subscribers (subscriberid, listid, emailaddress, domainname, format, confirmed, confirmcode, requestdate, requestip, confirmdate, confirmip, subscribedate, unsubscribed, unsubscribeconfirmed) 
VALUES ('203404', 1, 'blah@gmail.com', '@gmail.com', 'h', 1, '1234', 1282196458, '', 1282196458, '', 1282196458, 0, 0 ) 
ON DUPLICATE KEY UPDATE emailaddress='blah@gmail.com', domainname = '@gmail.com', unsubscribed = 0, unsubscribeconfirmed = 0 
```

我收到以下错误：

```
Error Code: 1062\. Duplicate entry 'blah@gmail.com-1' for key 'subscribers_email_list_idx' 
```

这是我的桌子的样子：

```
CREATE TABLE `list_subscribers` (
    `subscriberid` int(11) NOT NULL AUTO_INCREMENT,
    `listid` int(11) NOT NULL DEFAULT '0',
    `emailaddress` varchar(200) DEFAULT NULL,
    `domainname` varchar(100) DEFAULT NULL,
    `format` char(1) DEFAULT NULL,
    `confirmed` char(1) DEFAULT '0',
    `confirmcode` varchar(32) DEFAULT NULL,
    `requestdate` int(11) DEFAULT '0',
    `requestip` varchar(20) DEFAULT NULL,
    `confirmdate` int(11) DEFAULT '0',
    `confirmip` varchar(20) DEFAULT NULL,
    `subscribedate` int(11) DEFAULT '0',
    `bounced` int(11) DEFAULT '0',
    `unsubscribed` int(11) DEFAULT '0',
    `unsubscribeconfirmed` char(1) DEFAULT '0',
    `formid` int(11) DEFAULT '0',
    PRIMARY KEY (`subscriberid`),
    UNIQUE KEY `subscribers_email_list_idx` (`emailaddress`,`listid`),
    KEY `list_subscribers_sub_list_idx` (`subscriberid`,`listid`),
    KEY `subscribe_date_idx` (`subscribedate`),
    KEY `list_subscribers_listid_idx` (`listid`),
    KEY `confirmed_idx` (`confirmed`)
) ENGINE=InnoDB AUTO_INCREMENT=4687107 DEFAULT CHARSET=utf8 
```

我认为这正是“ON DUPLICATE KEY UPDATE”语句的用途？为什么由于重复索引而中止查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T23:37:31.370

好的，看起来重复的问题实际上与更新有关。由于为 emailaddress,listid 定义了一个唯一键，因此当它尝试进行更新时，实际上有另一个条目具有不同的订阅者 id，但具有相同的 emailaddress 和 listid。

这对我来说更有意义，因为实际上是 Update 语句产生了重复错误，而不仅仅是 insert 语句。

# asp.net - asp.net从谷歌应用程序帐户发送邮件不起作用

> ID：12592224
> 
> 赞同：1
> 
> 时间：2012-09-25T22:49:30.217
> 
> 标签：asp.net, smtp, gmail, send

我试图使用我的谷歌应用程序帐户发送电子邮件，但我不断收到此错误：

SMTP 服务器需要安全连接或客户端未通过身份验证。服务器响应是：5.5.1 Authentication Required

当我使用普通的 gmail 帐户尝试相同的代码时，这是可行的。

```
 var msg = new MailMessage();
        msg.IsBodyHtml = true;
        msg.Subject = "subject here";
        msg.Body = "body here";
        msg.To.Add("email adress here");

        var client = new SmtpClient();
        client.EnableSsl = true;
        client.Send(msg); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T22:51:26.870

您需要在端口 587 上连接到 Gmail 的 SMTP 服务器并指定 SSL 连接

[http://support.google.com/mail/bin/answer.py?hl=en&answer=13287](http://support.google.com/mail/bin/answer.py?hl=en&answer=13287)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T22:56:01.480

您不发送凭据，也不为 SMTP 服务指定 SSL 端口

```
 var msg = new MailMessage();  
    msg.IsBodyHtml = true;  
    msg.Subject = "subject here";  
    msg.Body = "body here";  
    msg.To.Add("email adress here");  

    var client = new SmtpClient();  
    client.EnableSsl = true;  
    client.Port = 465;         
    client.Host = "smtp.gmail.com"; 
    client.Credentials = new NetworkCredential("xxxxxx@gmail.com", "mypassword"); 
    client.Send(msg) 
```

# jsf-2 - 将新组件放入其中后更新数据网格大小

> ID：12592227
> 
> 赞同：1
> 
> 时间：2012-09-25T22:49:32.277
> 
> 标签：jsf-2, xhtml, primefaces

我正在编写一个拖放组件，用户可以将一个简单的面板拖放到 dataGrid 中，我的问题是当我放下一个新面板时，datagrid 没有动态改变大小。那么是否有要设置的属性或其他东西。这是我遵循的示例[http://www.primefaces.org/showcase/ui/dndGrid.jsf](http://www.primefaces.org/showcase/ui/dndGrid.jsf) 提前谢谢。

这是我的代码：

```
<h:panelGrid columns="2" cellpadding="10">   
 <p:column>
    <p:fieldset id="belongTo" legend="Belong To" >  
     <p:dataGrid id="userGroups"
              var="userGroup"
              value="#{projectAdminisrationMB.selectedUserMemberOfGroups}"
              columns="3">  
    <p:column>  
      <p:panel id="pnl1"
               header="#{userGroup.name}"
               style="text-align:center">
        <h:panelGrid columns="1" style="width:100%">  
          <p:graphicImage value="/images/group/adminGroup.gif"/> 
        </h:panelGrid>  
      </p:panel>  
      <p:draggable for="pnl1"
                   revert="true"
                   handle=".ui-panel-titlebar"
                   stack=".ui-panel"/>
    </p:column>  
  </p:dataGrid>  
</p:fieldset>  
<p:droppable for="belongTo"
             tolerance="touch"
             activeStyleClass="ui-state-highlight"
             datasource="userNotGroups" >
  <p:ajax listener="#{projectAdminisrationMB.onExcludeFromGroupDrop}" />
 </p:droppable> 
 </p:column>
 <p:column>  
   <p:fieldset id="excludeFrom"
            legend="Exclude From"
            style="margin-top:20px">  
  <p:dataGrid id="userNotGroups"
              var="userNotGroup"
              value="#{projectAdminisrationMB.selectedUserNotMemberOfGroups}"
              columns="3">  
    <p:column>  
      <p:panel id="pnl2"
               header="#{userNotGroup.name}"
               style="text-align:center">  
        <h:panelGrid columns="1" style="width:100%">  
          <p:graphicImage value="/images/grou/defaultGroup.gif"/> 
        </h:panelGrid>  
      </p:panel>  
      <p:draggable for="pnl2"
                   revert="true"
                   handle=".ui-panel-titlebar" 
                   stack=".ui-panel"/>  
    </p:column>  
  </p:dataGrid>  
</p:fieldset>   
<p:droppable for="excludeFrom"
             tolerance="touch"
             activeStyleClass="ui-state-highlight"
             datasource="userGroups"  >  
  <p:ajax listener="#{projectAdminisrationMB.onBelongToGroupDrop}"  />  
  </p:droppable>  
  </p:column>
</h:panelGrid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T04:36:51.493

尝试将“更新”参数添加到您的两个 p:ajax 调用中。

```
<p:ajax listener="#{projectAdminisrationMB.onExcludeFromGroupDrop}" update="userNotGroups userGroups" />

<p:ajax listener="#{projectAdminisrationMB.onBelongToGroupDrop}"  update="userNotGroups userGroups"  /> 
```

您引用的链接正在使用这种技术。update 参数采用您要更新的组件的 id。[PrimeFaces DnD 演示](http://www.primefaces.org/showcase-labs/ui/dndGrid.jsf)

希望这可以帮助。

# mysql - MySQL 列索引与单独的表

> ID：12592233
> 
> 赞同：3
> 
> 时间：2012-09-25T22:50:18.073
> 
> 标签：mysql

我正在做一个项目，其中一个表可能有数百万行。但是，目前，根据行的使用，它被拆分为具有相同设置的多个表。每个表接近一百万行。

这可以通过再添加一个具有特定状态的列并向该列添加索引来完成。

我的问题是——什么是经验法则？我应该*始终*坚持设计带有索引“用例”列的单个表，还是基于偏好、基于性能或无关紧要的决策类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T01:03:05.090

使用关系数据库的关键在于使用它的关系能力。

传统上，将根据问题的限制创建 ER 模型，然后将其转换为适当的模式。以我的经验，最好有一个规范化的数据库，因为它提供了健壮性，就像在一个软件中使用按合同编程的设计一样，但是在不锁定数据库的情况下引入更改变得更加困难。

如果您需要性能，那么您将不得不做任何事情来获得它，并且您有很多选择。也许是 NoSQL 数据库或像 MonetDB 这样的列式存储数据库。

# ruby - 与 String 相比，在 Ruby 中使用 StringIO 有哪些优势？

> ID：12592234
> 
> 赞同：49
> 
> 时间：2012-09-25T22:50:20.107
> 
> 标签：ruby, string, stringio

什么时候使用 Ruby 的 StringIO 而不是仅仅使用 String 才是合适的？

我想我理解它们之间的根本区别，正如“ [What is ruby​​'s StringIO class really?](https://stackoverflow.com/questions/1211461/what-is-rubys-stringio-class-really) ”所强调的那样，StringIO 使人们能够以面向流的方式读取/写入字符串。但这实际上意味着什么？

当简单地使用 String 并不能真正削减它时，使用 StringIO 的实际用途的一个很好的例子是什么？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-09-25T23:19:41.977

基本上，它使字符串看起来像一个 IO 对象，因此命名为 StringIO。

StringIO[类](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/stringio/rdoc/StringIO.html)具有`read`和`write`方法，因此可以将其传递给设计用于从文件或套接字读取和写入的代码部分。如果你有一个字符串并且你希望它看起来像一个文件来测试你的文件代码，那就太好了。

```
def foo_writer(file)
  file.write "foo"
end

def test_foo_writer
  s = StringIO.new
  foo_writer(s)
  raise "fail" unless s.string == "foo"
end 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-11-12T02:17:35.163

我真的很喜欢 StringIO 用于逐行附加文本的用例，而不必`"\n"`一遍又一遍地使用。例如，而不是这个：

```
s = ''
s << "\n" << "some text on a new line"
s << "\nthis is pretty awkward"
s = "#{s}\neven more ugly!" 
```

我可以做这个

```
s = StringIO.open do |s|
  s.puts 'adding newlines with puts is easy...'
  s.puts 'and simple'
  s.string
end 
```

哪个更干净。不必使用 的块形式`String.IO`，您可以像这样创建一个对象：`s = StringIO.new`但无论如何，请务必记住实际字符串是通过该`StringIO#string`方法访问的。

# perl - DBIx::Class 如何处理布尔值？

> ID：12592241
> 
> 赞同：5
> 
> 时间：2012-09-25T22:51:27.593
> 
> 标签：perl, orm, perl-module, dbix-class

我在我的 perl 脚本中使用 DBIx::Class 与 sqlite 数据库进行交互。

在进行插入/搜索时，DBIx::Class 会考虑“真”和“假”吗？

例如：

`$schema->resultset('SomeObject')->create({ some_boolean => 1, primary_key => 1 });`

`$schema->resultset('SomeObject')->search({ some_boolean => 'true' });`

感谢任何帮助或文档（我无法在 DBIx::Class 文档中找到它，但也许我遗漏了一些东西。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-12-14T16:52:03.337

`DBIx::Class`[在DBIx::Class::InflateColumn::Boolean](http://search.cpan.org/~graf/DBIx-Class-InflateColumn-Boolean/lib/DBIx/Class/InflateColumn/Boolean.pm)的帮助下处理布尔值：

加载此组件并将列声明为布尔值。

```
 package Table;
  __PACKAGE__->load_components(qw/InflateColumn::Boolean Core/);
  __PACKAGE__->table('table');
  __PACKAGE__->true_is('Y');
  __PACKAGE__->add_columns(
      foo => {
          data_type => 'varchar',
          is_boolean  => 1,
      },
      bar => {
          data_type => 'varchar',
          is_boolean  => 1,
          true_is     => qr/^(?:yes|ja|oui|si)$/i,
      },
      baz => {
          data_type => 'int',
          is_boolean  => 1,
          false_is    => ['0', '-1'],
      },
  ); 
```

然后您可以将指定的列视为布尔值：

```
 print 'table.foo is ', $table->foo ? 'true' : 'false', "\n";
  print 'table.bar is ', $table->bar ? 'true' : 'false', "\n"; 
```

布尔对象仍然字符串化为实际的字段值：

```
 print $table->foo;  # prints "Y" if it is true 
```

**UPD**如何选择字段为真的行
因为`DBIx::Class`用于`SQL::Abstract`搜索具有`TRUE`值的字段，所以您应该参考[`bool`](https://metacpan.org/pod/SQL::Abstract#Unary-operators:-bool)一元运算符：

```
my %where  = (
    -bool       => 'is_user',
    -not_bool   => 'is_enabled',
); 
```

会给你：

```
WHERE is_user AND NOT is_enabled 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T23:16:31.047

[http://sqlite.org/datatype3.html](http://sqlite.org/datatype3.html)说 SQLite 没有布尔数据类型，但 false 存储为整数 0，而 true 存储为整数 1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-08T15:46:35.363

由于人们发现这很有帮助，我想我会加入我为将 perl 值转换为 DBIx 可接受的格式而编写的 get_bool() 函数：

```
sub get_bool {
  my $self = shift;
  my $bool = shift;
  return undef if(!defined $bool || $bool =~ m/^null$/i);
  return 0 if($bool =~ m/^(fail|not_ok|error|0)/i || $bool =~ m/^\s*$/);
  return 1;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T22:59:43.347

DBIx::Class 会像 perl 那样处理真假... 0、''、undef、() 和 {} 是“假”，而其他任何东西都是“真”。

# apache - 修复 .svn 目录权限

> ID：12592246
> 
> 赞同：1
> 
> 时间：2012-09-25T22:51:46.173
> 
> 标签：apache, svn, ubuntu

关于如何使用命令行（Ubuntu）更正我的 webroot 中的所有 .svn 目录（及其内容）权限的任何建议？我正在将文件添加到 www-data，但忘记过滤掉 .svn 目录：p

更多详情：

我想将 .svn 目录及其内容归还给原始所有者。user:group 不是问题，用于 chown 所有 .svn 目录的递归命令以及其中包含的所有内容都是我正在寻找的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-26T07:03:23.107

如果您只想更改所有 .svn 目录的所有权，您可以执行以下操作：

```
find /dir/to/repo -name .svn -exec chown user:group -R {} ; 
```

根据您的外壳，您可能需要转义 ; （使用 \;）和/或 {}（使用 \{\}）

# ruby - 添加到datamapper json的末尾

> ID：12592248
> 
> 赞同：0
> 
> 时间：2012-09-25T22:51:56.683
> 
> 标签：ruby, ruby-datamapper

`.to_json`我想知道如何在 DataMappers方法生成的 JSON 末尾添加另一个键值对。当我尝试调用`to_json(:methods => [:total_pages])`时，它会忽略所有方法。

我希望它产生这样的东西：

```
{
  'data':        [rows go here],
  'total_pages': X
} 
```

有没有办法只做内联方法或其他方法？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T02:34:42.387

你可以做的更简单。

```
{
    data:   YourModel.your_whatever,
    total_pages: YourModel.total_pages
}.to_json 
```

DM 序列化 to_json 尝试调用它自己调用的同一对象的选项中提供的方法（在您的情况下 - 可能是结果集合，没有定义 total_pages 方法）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T23:06:07.243

您可以编辑 JSON 字符串，但据我所知，没有简单的方法可以将任意值注入 JSON。

调用`your_dm_resource.to_json(:methods => [:total_pages])`是做你想做的事的正确方法，检查你的`some_dm_resource.total_pages`方法是否以你期望的方式工作。

如果你使用的是现代 Ruby，你可以放下哈希火箭：

```
your_dm_resource.to_json(methods: [:total_pages]) 
```

# c - floor() 和 ceil() 的可表示结果

> ID：12592249
> 
> 赞同：6
> 
> 时间：2012-09-25T22:52:02.410
> 
> 标签：c, floating-point, ieee-754, floor, ceil

对于浮点类型（float/double/long double）的任意值 'v'，C89 是否保证 floor(v) 和 ceil(v) 的数学精确整数结果是 'v 类型的可表示值'？

任何后来的 C 或 C++ 标准都可以保证这一点吗？

IEEE 754 能保证这一点吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T01:10:53.457

这是由 IEEE-754 编号的构造来保证的。（要明确：C 不保证 IEEE-754，但以下分析适用于我熟悉的所有其他浮点格式；关键属性是格式中所有足够大的数字都是整数）。

* * *

回想一下，一个普通的 IEEE-754 数字的形式`±1.xxx...xxx * 2^n`是 ，其中有效位字段（`xxx...xxx`部分）的宽度由数字的类型定义（单精度为 23 个二进制位，双精度为 52 个二进制位）。`n`在允许范围内具有指数 ( ) 的所有此类数字都是可表示的。

假设 WLOG`v`是正数（如果`v`是负数，我们可以交换`ceil`并`floor`在下面的分析中）。

让`v`有`k`有效位，并写出`v`二进制定点数；有三种可能性：

情况 1：所有有效位都是整数。当我们写出来时`v`，它看起来像这样

```
xxxxxxxxxxxxxxxxxxxxxxxx000000...00000.0 
```

then`v`是一个整数，所以`ceil(v) = floor(v) = v`，所以两者都是平凡可表示的。

情况 2：所有有效位都是小数。当我们写出来时`v`，它看起来像

```
0.000000...00000xxxxxxxxxxxxxxxxxxxxxxxx 
```

then`v`在 [0,1) 范围内，所以`floor(v) = 0`是可表示的，并且`ceil(v)`是零或一，两者都是可表示的。

情况 3：`v`同时包含整数和小数有效位：

```
xxxxxxxxxxxxxx.xxxxxxxxxx 
```

那么`floor(v)`就是：

```
xxxxxxxxxxxxxx. 
```

因为我们已经丢弃了至少一个小数位，`floor(v)`最多有一个`k-1`有效位，并且与 相同的指数`v`，所以它是可表示的。

如果`v`是整数，则`ceil(v) = floor(v) = v`, so`ceil(v)`是可表示的。否则，`ceil(v) = floor(v) + 1`, and so 也最多`k-1`具有有效位并且也是可表示的。

# security - 应该对 AJAX 调用的 ID 进行加密吗？

> ID：12592250
> 
> 赞同：1
> 
> 时间：2012-09-25T22:52:19.200
> 
> 标签：security

我正在构建一个通过 AJAX 做很多事情的应用程序，其中很多都必须接受 userId、documentid、photoid 等。

这些 ID 的最佳实践是什么，它们应该被加密（甚至在被放入 html 页面之前？），还是只是按原样发送它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T22:58:03.883

这取决于您对 ID 的处理方式。我们正在服务器上构建一个无状态的应用程序，因此我们将 ID 作为请求的一部分发送，以便检索实体、应用必要的业务逻辑并将其持久化。在这种情况下，我们肯定需要加密 ID 以防止[不安全的直接对象引用](https://www.owasp.org/index.php/Top_10_2010-A4)。

还有其他选项，例如，您可以在对该实体应用任何更改之前对服务器上的实体应用授权。这当然假设您具有身份验证功能。在我们的例子中，我们不进行身份验证，因此这种授权无论如何都不起作用。

只是对此的更新，我们不需要在客户端上未加密的 ID，因此它是加密它并在第一个响应中发送的服务器。发出包括加密 ID 的后续请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T22:59:26.810

如果您真的想隐藏某些行的 id（来自数据库？），您可以简单地异步加密它们并将它们设置为 cookie。这样，您在执行 ajax 请求时就不必关心它们，因为它们无论如何都是可用的。

如果您想进行一些选择并作为表单提交的结果发送它们，那么没有 cookie 的相同加密方法可以工作。

但老实说，我几乎看不到任何加密数据库 id 的理由。

# html - contentEditable 不会在标签中换行第一行

> ID：12592254
> 
> 赞同：6
> 
> 时间：2012-09-25T22:52:55.783
> 
> 标签：html, contenteditable

我有一个设置了属性 contentEditable 的 div。

我遇到的问题是我输入的第一行没有被标签包裹，但后面的行会。

所以输入：

```
qwerty
zxcv
asdfg 
```

结果是：

```
<div class="editable" contentEditable="true">
    qwerty
    <div>zxcv</div>
    <div>asdfg</div>
</div> 
```

所以我需要这`qwerty`条线成为`<div>qwerty</div>`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-07-18T14:22:48.313

我在 Chrome 中遇到了问题，只是添加了一个 div。仅当您的 div 包含 br 标签时才有效：

```
<div class="editable" contentEditable="true">
  <div>
    <br>
  </div>
</div> 
```

@nicholas_r 是对的，删除可编辑 div 中的最后一个字符也会删除开头添加的 div。您可以通过捕获最后一个“退格”来避免这种情况。使用 jquery 的简单解决方案：

```
$(".editable").on('keydown', function(event) {
  if (event.keyCode === 8 && $(this).html() == '<div><br></div>') {
    event.preventDefault();
  }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-18T06:51:50.317

如果有帮助，运行以下命令将让您包装展开的 divs 。如果您在按键或类似的情况下触发它，即使用户从 div 中删除所有内容，它也会起作用。

```
 $(".editable").contents().filter(function() {
    return this.nodeType == 3;
 }).wrap('<div></div>'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T12:52:12.410

如果你从一个内部包含 a 的元素开始，`div`如下所示：

`<div class="editable" contentEditable="true"> <div></div> </div>`

您键入的第一行最终将被包裹在`div`.

**更新：**

这是特定于浏览器的。虽然在发布问题时它在大多数浏览器中都可以使用，但在最新的浏览器版本中不一定可以使用。最好的判断方法是测试它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-24T01:01:54.530

我做了这样的事情，它非常适合确保在第一行文本上总是有一个 div 包装器。

这样，如果用户单击该字段及其空白（初始状态），它将在其中放置一个空格，以确保他们的光标位于新 div 内。

```
$editable.on('focus', function() {
  if ($(this).text().trim() === '') {
    console.log('editable is blank, insert a div');
    $(this).append($('<div>&nbsp;</div>'));  
  }
}); 
```

您可以在保存数据之前删除前导空格（如果重要）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-02-04T14:41:01.580

对于在 2017 年或之后遇到此问题的任何人，这些答案在 Chrome 中都不适合我，而那些试图提出智能解决方案的人并没有涵盖我的所有案例。

虽然只在 Chrome 中测试过，而且有点粗糙，但它涵盖了 3 个主要场景：

1.  用户尝试删除空`contenteditable`div 中的内容。
2.  用户尝试使用或删除`contenteditable`div中的所有内容。`ctrl+a Delete``ctrl+a Backspace`
3.  用户尝试通过用他们选择的字母`contenteditable`替换完整选择来删除 div中的所有内容。`ctrl-a`

一个[JSFiddle](https://jsfiddle.net/hcn4015d/)演示。

```
document.getElementById("editor").addEventListener("keydown", function(e){
  if(e.which == 8 && document.getElementById("editor").innerHTML=="<div><br></div>"){  // 8 is backspace
    e.preventDefault()
  }
  if (window.getSelection && e.which == 8 || e.which == 46 && window.getSelection){ // 8 is backspace, 46 is delete
    let selection = window.getSelection().toString();
    let editorText = document.getElementById("editor").innerText;

    if (editorText == selection){
      document.getElementById("editor").innerHTML="<div><br></div>"
      console.log("prevented a ctrl+a delete")
    }
  else if (window.getSelection){
    let selection = window.getSelection().toString();
    let editorText = document.getElementById("editor").innerText;

    if (editorText == selection){
      document.getElementById("editor").innerHTML="<div>"+e.which+"</div>";
      console.log("safely did a ctrl+a " + e.which)
    }
  }

  e.preventDefault()
  }
}) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-10-05T15:54:16.220

大多数这些解决方案在 2017 年的 Chrome（版本 61.x）中都不适用于我，而且[Kasper 的回答](https://stackoverflow.com/a/42041626/136590)对我来说似乎太混乱了。

据我所知，对事件的`""`或`<br>`对`input`事件的简单检查可以处理所有可能的情况，包括退格、删除和复制粘贴：

```
$("[contenteditable='true']")
  .on("input", function ()
  {
    var $editable = $(this);
    if ($editable.html().trim() === "" || $editable.html().trim() === "<br>")
      $editable.html($("<div><br></div>"));
  })
  .trigger("input"); 
```

请注意，我还会`input`在初始化时触发事件，以确保正确设置初始内容，但这可能是必要的，也可能不是必要的，具体取决于您的特定需求。

[https://jsfiddle.net/25ujvrn0/](https://jsfiddle.net/25ujvrn0/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-12-06T23:52:35.740

**上下文**
这是 OP 的解决方案，可确保内容可编辑 div 中的第一行始终被包装并修复常见错误，例如：

*   擦除编辑器并立即键入后展开第一行。
*   删除编辑器后添加换行符。
*   Kasper Fredenslund 提到的所有问题：
    *   Ctrl + A + 德尔
    *   Ctrl + A + 退格
    *   Ctrl + A + 用户输入的任何内容

它使用事件侦听器来捕捉用户何时关注编辑器以及何时离开。有关更多上下文，请阅读代码中的注释。

**下面的代码**
是代码的完整工作小提琴。我的原始示例可以在这个[JS Fiddle 页面上](https://jsfiddle.net/blizzardengle/xLgtt1oq/2/)找到。

```
// On Dom Ready
document.getElementById('editor').addEventListener('focusin', checkEditor);
document.getElementById('editor').addEventListener('focusout', checkEditor);

function checkEditor() {
  // Get the DOM element that the user is in
  // Allows you to have multiple editos on one page
  // Next 3 lines of code from: https://stackoverflow.com/a/1553668/3193156
  var e = event || window.event;
  var elem = e.target || e.srcElement;
  if (elem.nodeType == 3) {
    elem = elem.parentNode;
  } // Defeat Safari bug
  // Grab the elements inner HTML
  var html = elem.innerHTML
    // If html is empty or does not start with a div see if we need to fix something
  if (html == '' || html.substr(0, 5) != '<div>') {
    notify('Running editor checks.');
    var index;
    // Catch bug where a line break is added after a user uses backspace to wipe the editor
    if (html.substr(0, 4) == '<br>') {
      notify('Removed line break.');
      index = html.indexOf('\n');
      // If there are any lines after this line break save them
      if (index > -1) {
        html = html.substr(html.indexOf('\n') + 1);
      } else {
        html = '';
      }
      elem.innerHTML = html;
      // If everything is ok return otherwise keep processing
      if (html != '' && html.substr(0, 5) == '<div>') {
        return;
      }
    }
    // Catch bug where first line after erasing editor does not get wrapped
    index = html.indexOf('\n');
    if (index > -1) {
      notify('Wrapped the fist line, did not check the rest.');
      html = html = '<div>' + html.substr(0, html.indexOf('\n') + 1) + '</div>' + html.substr(html.indexOf('\n') + 1);
      elem.innerHTML = html;
      return;
    } else {
      html = html.trim();
      if (html.length > 0) {
        notify('Wrapped the fist line');
        html = '<div>' + html.trim() + '</div>';
        elem.innerHTML = html;
        return;
      }
    }
    // If we made it here the editor shold be considered empty, reset it
    notify('Editor reset.');
    var div = document.createElement('DIV');
    div.innerHTML = '<br>';
    elem.appendChild(div);
  }
}

function notify(msg) {
  var div = document.createElement('DIV');
  div.innerHTML = msg;
  document.getElementById('messages').appendChild(div);
}
```

```
#editor {
  width: 90%;
  height: 200px;
  padding: 1rem;
  border: 1px solid #000;
}
```

```
<div id="editor" contenteditable="true">

</div>
<div id="messages">
</div>
```

**To-Do / Missing**
此解决方案回答了 OP，但不考虑以下用例：

*   粘贴内容后检查结果；这需要逐行包装所有内容。
*   检查第一行之后的任何其他行；不常见，但我相信您最终可能会在内容的末尾加上未换行的行，具体取决于浏览器。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-05-06T17:53:16.840

简单`<div></div>`是行不通的。

如果您正在寻找 jQuery 解决方案，这里是代码：

```
$('.contenteditable').on 'focus', ->
  if $(@).text().trim() == ''
    $(@).append($('<div><br /></div>')) 
```

# javascript - 隐藏的输入被覆盖或删除

> ID：12592255
> 
> 赞同：0
> 
> 时间：2012-09-25T22:53:06.213
> 
> 标签：javascript, jquery

基本上以下代码导致了问题：

```
 var imagecounter = 0;

function stopImageUpload(success, imagefilename){

      var result = '';
      imagecounter++;

      if (success == 1){
         result = '<span class="imagemsg'+imagecounter+'">The file was uploaded successfully</span><br/><br/>';      
         $('.listImage').eq(window.lastUploadImageIndex).append('<div>' + htmlEncode(imagefilename) + '<button type="button" class="deletefileimage" image_file_name="' + imagefilename + '">Remove</button><br/><hr/></div>'); 
      }
      else if (success == 2){
          result = '<span class="imagemsg'+imagecounter+'"> The file upload was canceled</span><br/><br/>';
      }
      else {
         result = '<span class="imagemsg'+imagecounter+'">There was an error during file upload</span><br/><br/>';
      }

      $(sourceImageForm).find('.imagef1_upload_process').css('visibility','hidden');
      $(sourceImageForm).find('.imagef1_cancel').css('visibility','hidden');
//THIS LINE BELOW
      $(sourceImageForm).find('.imagef1_upload_form').html(result + '<label>Image File: <input name="fileImage" class="fileImage" type="file"/></label><br/><br/><label><input type="submit" name="submitImageBtn" class="sbtnimage" value="Upload" /></label><label><input type="button" name="imageClear" class="imageClear" value="Clear File"/></label>');
//THIS LINE ABOVE
      $(sourceImageForm).find('.imagef1_upload_form').css('visibility','visible');

  var _imagecounter = imagecounter;

      return true;   
} 
```

上面的代码取自在成功/错误上传发生后运行的代码。此代码继续覆盖负责上传图像的表单。现在这对于成功来说很好，因为界面为每个图像使用单独的表单......一旦成功，您就不会再次重复使用该表单（因此服务器端不会出现错误以进行后续上传）。

但是，当图像上传错误或取消时，我尝试重新使用该表单再次上传图像？如果是这样，您已经覆盖并删除了 numimage 输入 html：

```
<input type='hidden' class='numimage' name='numimage' value='" numimage "' /> 
```

这意味着我会收到一个错误，因为该字段不再存在。

我的问题是我该如何解决这个问题？我怎样才能解决这个问题，这样我就不会丢失隐藏输入表单中的值并且该字段仍然存在？

以下是上传文件的完整表单（每次用户单击按钮时，每个表单都会附加到表中，因此可能有多个表单，每行一个表单：

```
 var $fileImage = $("<form action='imageupload.php' method='post' enctype='multipart/form-data' target='upload_target_image' onsubmit='return imageClickHandler(this);' class='imageuploadform' >" + 
    "<p class='imagef1_upload_process' align='center'>Loading...<br/><img src='Images/loader.gif' /><br/></p><p class='imagef1_upload_form' align='center'><br/><label>" + 
    "Image File: <input name='fileImage' type='file' class='fileImage' /></label><br/><br/><label class='imagelbl'>" + 
    "<input type='submit' name='submitImageBtn' class='sbtnimage' value='Upload' /></label>" + 
    "<input type='hidden' class='numimage' name='numimage' value='" + numimage + "' />" +
    "</p><p class='imagef1_cancel' align='center'><label>" +
    "<input type='reset' name='imageCancel' class='imageCancel' value='Cancel' /></label>" +
    "</p><p class='listImage' align='left'></p>" +
    "<iframe class='upload_target_image' name='upload_target_image' src='#' style='width:300px;height:300px;border:0px;solid;#fff;'></iframe></form>");     

    $image.append($fileImage); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T23:28:01.393

两个最明显的选择是：

*   替换表单时，在新内容中包含隐藏字段。

*   不要替换表单，只需将结果放入已经存在的元素中。

在表单中放置一个空元素：

```
...<p class='imagef1_upload_form' align='center'><br/><span class='msg'></span><label>... 
```

然后将结果放入元素中：

```
$(sourceImageForm).find('.imagef1_upload_form .msg').html(result); 
```

# java - 无法识别的选项： -cp 仅在 Windows 上使用 ProcessBuilder

> ID：12592258
> 
> 赞同：9
> 
> 时间：2012-09-25T22:53:47.837
> 
> 标签：java, windows, classpath, processbuilder

所以我正在开发一个跨平台引导程序，该程序可以在 OSX/Linux 上正常工作，但在 Windows 中返回以下错误消息：

> 错误：无法创建 Java 虚拟机。错误：发生了致命异常。程序将会退出。无法识别的选项：-cp C:/myapp/realm/bin/Launcher.jar;C:/myapp/_jvm/jre/../lib/tools.jar;C:/myapp/realm/shared/lib/jetty-util -8.1.4.v20120524.jar

如果我打印出我的 ProcessBuilder 参数列表并在命令行上运行这些参数，它将成功运行。命令应该是

> C:/myapp/_jvm/jre\bin\java -javaagent:C:/myapp/realm/bin/spring-agent.jar -cp C:/myapp/realm/bin/Launcher.jar;C:/myapp/_jvm /jre/../lib/tools.jar;C:/myapp/realm/shared/lib/jetty-util-8.1.4.v20120524.jar -Xmx256m -Xms200m -Xss128k -XX:+UseBiasedLocking -XX:+UseNUMA -DprocessType=realm -Dcert.framework.license=C:/myapp/realm/license/my.license -Djav a.security.policy=C:/myapp/realm/security/java.policy -Djava.security.properties= C:/myapp/realm/security/java.security -Djava.security.auth.login.config=C:/myapp/realm/security/jaas.conf -Drealm.home=C:/myapp/realm -Duser。 dir=C:/myapp/realm/ bin -Djava.endorsed.dirs=C:/myapp/realm/endorsed;C:/myapp/_jvm/jre/lib/endorsed -Djava.ext.dirs=C:/myapp/领域 /ext;C:/myapp/_jvm/jre/lib/ext -Dlog4j.configuration=file:C:/myapp/realm/conf/log4j.properties -Dorg.apache.commons.logging.Log=或 g.apache .commons.logging。impl.Log4JLogger com.myapp.launcher.ProviderLauncher

我尝试在类路径周围放置引号，使用双斜杠等无济于事，将不胜感激..这是代码：

> ```
>  String mainClass = args[0];
>    String propFile = args[1];
>    FileInputStream fis =new FileInputStream(propFile);
>    BufferedReader br = new BufferedReader(new InputStreamReader(fis));
>    String line = null;
>    ArrayList<String> argList = new ArrayList<String>();
>    while((line = br.readLine()) != null){
>        if(line.startsWith("#"))
>            continue;
>        String trimmedLine = line.trim();
>        if(trimmedLine.isEmpty())
>            continue;
>        Matcher m = p.matcher(trimmedLine);
>        StringBuffer sb = new StringBuffer();
>        while(m.find()){
>            String content = m.group(1);
>            String envContent = System.getenv(content);
>            if(envContent == null || envContent.isEmpty())
>                envContent = System.getProperty(content);
>            m.appendReplacement(sb, envContent);
>        }
>        m.appendTail(sb);
>        if(!sb.toString().startsWith("\"-") && !sb.toString().startsWith("-") && argList.size() > 0)
>            argList.set(argList.size()-1, argList.get(argList.size()-1)+File.pathSeparator+sb.toString());
>        else argList.add(sb.toString());
>    }
> 
>    ArrayList<String> cmdList = new ArrayList<String>();
>    cmdList.add(System.getenv("JAVA_HOME") + File.separator + "bin" + File.separator + "java");
>    cmdList.addAll(argList);
>    cmdList.add(mainClass);
>    System.out.println(cmdList.toString());
>    ProcessBuilder pb = new ProcessBuilder(cmdList);
>    new ProcessBuilder(line);
>    File f = new File(System.getenv("MY_DIR") + File.separator + "logs" +File.separator + "provider-console.log");
>    if(!f.exists())
>        f.createNewFile();
>    pb.redirectErrorStream(true);
>    pb.redirectOutput(f);
>    pb.directory(new File(System.getenv("MY_DIR") + File.separator + "bin"));
>    Process p = pb.start(); 
> ```

这是 toStringed cmdList：

> [C:/myapp/_jvm/jre\bin\java, -javaagent:C:/myapp/realm/bin/spring-agent.jar, -Xmx256m, -Xms200m, -Xss128k, -XX:+UseBiasedLocking, -XX: +UseNUMA, -cp C:/myapp/realm/bin/Launcher.jar;C:/myapp/_jvm/jre/../lib/tools.jar;C:/myapp/realm/shared/lib/jetty-util -8.1.4.v20120524.jar，-DprocessType=realm，-Dcert.framework.license=C:/myapp/realm/license/jericho.license，-Djava.security.policy=C:/myapp/realm/security/ java.policy, -Djava.security.properties=C:/myapp/realm/security/java.security, -Djava.security.auth.login.config=C:/myapp/realm/security/jaas.conf, -Drealm .home=C:/myapp/realm, -Duser.dir=C:/myapp/realm/bin, -Djava.endorsed.dirs=C:/myapp/realm/endorsed;C:/myapp/_jvm/jre/lib / 认可，-Djava.ext.dirs=C:/myapp/realm/ext;C:/myapp/_jvm/jre/lib/ext，-Dlog4j.configuration=file:C:/myapp/realm/conf/log4j。属性，-Dorg.apache.commons.logging.Log=org。apache.commons.logging.impl.Log4JLogger, com.myapp.launcher.ProviderLauncher]

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-25T23:04:49.860

“-cp”和实际的类路径需要是 args 列表中的单独条目，您目前似乎将它们作为一个由空格分隔的条目。

# c++ - 如何将位图字体从 C 标头格式转换为原始位

> ID：12592260
> 
> 赞同：0
> 
> 时间：2012-09-25T22:54:19.777
> 
> 标签：c++, c, embedded

我有一个 C 头文件，其中包含 2x12 数组中的 10x12 像素位图字体字符（对于单色 lcd）。这浪费了每个其他字节的低 6 位，更不用说因为必须跳过填充而更难渲染。

将其转换为没有填充位的简单序列化位的最简单方法是什么？

我看到的解决方案有很多复杂的问题。有没有一种简单的方法来执行此操作？

```
0x00,0x00,  /*  ................  */
0x30,0x00,  /*  ..@@............  */
0x78,0x00,  /*  .@@@@...........  */
0x48,0x00,  /*  .@..@...........  */
0xCC,0x00,  /*  @@..@@..........  */
0xCC,0x00,  /*  @@..@@..........  */
0xCC,0x00,  /*  @@..@@..........  */
0xFC,0x00,  /*  @@@@@@..........  */
0xCC,0x00,  /*  @@..@@..........  */
0xCC,0x00,  /*  @@..@@..........  */
0x00,0x00,  /*  ................  */
0x00,0x00   /*  ................  */ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T23:47:44.333

你所拥有的本质上是一个 8x15[稀疏矩阵](http://en.wikipedia.org/wiki/Sparse_matrix)。

有一个 boost 库 - [uBLAS](http://www.boost.org/doc/libs/1_51_0/libs/numeric/ublas/doc/index.htm) - 可以帮助您处理稀疏矩阵。例如，如果您的字体尺寸发生变化，这将有所帮助。

[这个问题](https://stackoverflow.com/questions/9284005/boost-sparse-matrix-memory-requirement)也可能有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T23:58:41.650

至于“复杂的位碰撞”......是的，它很复杂，但如果你写下你的打包字节和索引到它们来自的解包数组中，很容易弄清楚如何构造每个值...

```
|........|........|........|........|........|
|00000000|11222222|22334444|44445566|66666677| 
```

上述循环重复3次。

```
char a[24] = {
    0x00,0x00,  /*  ................  */
    0x30,0x00,  /*  ..@@............  */
    0x78,0x00,  /*  .@@@@...........  */
    0x48,0x00,  /*  .@..@...........  */
    0xCC,0x00,  /*  @@..@@..........  */
    0xCC,0x00,  /*  @@..@@..........  */
    0xCC,0x00,  /*  @@..@@..........  */
    0xFC,0x00,  /*  @@@@@@..........  */
    0xCC,0x00,  /*  @@..@@..........  */
    0xCC,0x00,  /*  @@..@@..........  */
    0x00,0x00,  /*  ................  */
    0x00,0x00   /*  ................  */
};

void pack( char ap[15], const char a[24] )
{
    ap[0] = a[0];
    ap[1] = a[1] | (a[2] >> 2 );
    ap[2] = (a[2] << 6) | (a[3] >> 2 ) | (a[4] >> 4);
    ap[3] = (a[4] << 4) | (a[5] >> 4) | (a[6] >> 6);
    ap[4] = (a[6] << 2) | (a[7] >> 6);
    ap[5] = a[8];
    ap[6] = a[9] | (a[10] >> 2 );
    ap[7] = (a[10] << 6) | (a[11] >> 2 ) | (a[12] >> 4);
    ap[8] = (a[12] << 4) | (a[13] >> 4) | (a[14] >> 6);
    ap[9] = (a[14] << 2) | (a[15] >> 6);
    ap[10] = a[16];
    ap[11] = a[17] | (a[18] >> 2 );
    ap[12] = (a[18] << 6) | (a[19] >> 2 ) | (a[20] >> 4);
    ap[13] = (a[20] << 4) | (a[21] >> 4) | (a[22] >> 6);
    ap[14] = (a[22] << 2) | (a[23] >> 6);
} 
```

如果您愿意，您可以在一个小循环中执行上述操作，以减少犯错的范围......只需从 0 循环到 2，并相应地推进您的数组。你知道，有点像这样（除非你需要正确的指针）：

```
for( int i = 0; i < 3; i++ ) {
    ap[0] = a[0];
    ap[1] = a[1] | (a[2] >> 2 );
    ap[2] = (a[2] << 6) | (a[3] >> 2 ) | (a[4] >> 4);
    ap[3] = (a[4] << 4) | (a[5] >> 4) | (a[6] >> 6);
    ap[4] = (a[6] << 2) | (a[7] >> 6);
    ap += 5;
    a += 8;
} 
```

我希望我把所有这些转变都做对了=）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T22:58:35.290

嗯，10 × 12 = 120，你可以在 15 个字节中存储 120 个像素。每 5 个字节编码 4 行像素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T13:48:56.533

[这当然正是JBIG CODEC](http://en.wikipedia.org/wiki/JBIG)旨在处理的那种问题——但会涉及大量的位碰撞。

使用运行长度为的字典编码算法，您可能还会获得不错的结果`0`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T17:21:21.190

一个简化的版本可以创建一个生产者消费者，一次只做一点，这让一点点保持在一个理智的水平。这就是我最终做的事情：

```
#define CHAR_W 10
#define CHAR_H 12
#define NUM_CHARS 100
#define CEILING(x,y) (((x) + (y) - 1) / (y))
#define BYTES CEILING(CHAR_W, 8)
#define BIT(x, n) ( ((1 << n) & x) >> n )
#define COPYBIT(b,x,n) (((0x1 & b) << n) | x)
#define CHAR_BYTES CEILING(CHAR_H * CHAR_W, 8)
#define OUTBYTES NUM_CHARS * CHAR_BYTES

int main()
{
    int totinbit = 0;
    int locinbit = 0;
    int locoutbit = 7;  // start with msb 
    int totoutbit = 0;
    int bytes = BYTES;

    unsigned char c = 0;
    unsigned char o = 0;
    unsigned char buf[OUTBYTES];

    while (totoutbit < NUM_CHARS * CHAR_H * CHAR_W)
    {
        c = fontArray[totinbit / 8];
        locinbit = 7 - totinbit % 8;

        o = COPYBIT(BIT(c,locinbit),o,locoutbit);

        // reset out counter, full byte produced
        if (--locoutbit < 0)
        {
            locoutbit = 7;
            buf[totoutbit  / 8] = o;
            o = 0;
        }

        // skip over the padding bits
        if ((totoutbit % CHAR_W) == (CHAR_W - 1))
            totinbit =  CEILING(totinbit,8) * 8 - 1;

        totinbit++;     
        // character boundary
        if ( (totinbit % (bytes * 8 * CHAR_H)) == 0 && totinbit > 0)
        {
                            // pad the last byte in the character if necessary
            if (locoutbit != 7)
                    locoutbit = 7;
        }

        totoutbit++;

        }
 // at this point buf contains the converted bitmap array
} 
```

# javascript - jQuery ajax 响应显示在浏览器中，而不是传递给回调函数

> ID：12592261
> 
> 赞同：2
> 
> 时间：2012-09-25T22:54:24.487
> 
> 标签：javascript, ajax, json, jquery

我有一个 Web 应用程序，它登录到另一个 Web 服务并可能为用户执行一些操作。

我正在使用 codeigniter 和 jQuery。我在 codeigniter 中设置了一个控制器，专门用于处理 ajax 请求。控制器做它需要做的任何事情，然后`echo`是 json.

下面的 ajax 调用应该获取其他 Web 服务的用户名和密码，并将它们发布到我的 ajax 控制器。控制器使用这些值尝试登录到其他服务（使用 curl）。json 响应反映了登录是否成功。

我的问题是有时我的浏览器被重定向到 ajax 控制器，所以 json 响应被`echo`编辑到浏览器。我无法确定发生这种情况的原因或时间。发生这种情况时，不会调用该`success`函数。

```
/* Verify login credentials
 *
 * @param username, password
 * @param activityElement - element in which to place activity indicator
 * @param location - location to refresh after success
 * @return none
*/
function verify_login(username, password, activityElement, location) 
{  
    $.ajax({
        type: 'POST',
        url: '<?=site_url('ajax/eval_login')?>',
        data: { username: username, password: password },
    beforeSend:function() {
        window.savedHtml = $(activityElement).html();
        $(activityElement).html('<div id="activity"></div><div class="text-center">Verifying </div>');
        $('#activity').activity(); //neteye activity indicator plugin
    },
    success:function(data) {
        data = $.parseJSON(data);
        if (data.success) {
            $(activityElement).html(window.savedHtml);

            //fades in success message then performs function
            set_message('Success!',function() {
                alert(location);
                window.location.href = "<?=site_url()?>/" + location;
            });
        } else {
            $(activityElement).html(window.savedHtml);
            set_message(data.error);
        }    
        $('#activity').activity(false);
        set_clicks();
    },
    error:function(){
        set_message('<strong>Oops!</strong> Try that again in a few moments.</p>');
        $('#activity').activity(false);
        $(activityElement).html(window.savedHtml);
    }
    });
} 
```

编辑：我很困惑。我真的不认为ajax请求是问题......对我来说没有意义

再次走过它..

1.  请求随`.ajax`通话一起发送
2.  有时一切都按预期工作（请求返回，ui 已更新）
3.  有时浏览器只是转到`http://yadayada.local/index.php/ajax/eval_login`显示正确 json 响应的位置（请参见下面的屏幕截图..）。有趣的是正在显示正确的 json 响应。如果浏览器只是被重定向，则不会有输出，因为`$_POST`它将是空的......

[![截屏](../Images/3069eb028d6e3cd49108c1c5f47e73d9.png)](https://i.stack.imgur.com/BMiy1.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T02:57:59.737

问题是我出于某种原因将表单操作指向了 ajax 控制器，并且`event.preventDefault()`有时只能工作。不敢相信我做到了..我想我应该因为草率的逻辑

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T23:05:10.787

我会使用您的浏览器网络检查器来查看对其中一个失败请求的响应，这可能会对您的应用程序响应中的问题有所了解。

@see [http://docs.jquery.com/Ajax_Events](http://docs.jquery.com/Ajax_Events) “只有在请求成功时才会调用此事件（服务器没有错误，数据没有错误）。”

所以要么是响应代码要么是响应数据导致失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T23:07:36.263

我认为你不需要这条线：

```
data = $.parseJSON(data); 
```

尝试在没有它的情况下运行它。

# iphone - 我应该从 UIActivity activityImage 返回什么 UIImage？

> ID：12592262
> 
> 赞同：5
> 
> 时间：2012-09-25T22:54:45.343
> 
> 标签：iphone, objective-c, ios, ipad, uiactivity

我创建了 UIActivity 的子类，以在我的应用程序的活动表上呈现自定义活动。但是我无法让它显示我的图标。

我尝试了一些典型图标大小的不同图像，例如：

```
- (UIImage *)activityImage { 
    return [UIImage imageNamed:@"my_app_icon.png"]; 
} 
```

但我只是得到一个灰色方块，我的图标根本不显示。

编辑：真正的问题是我的 XCode 文档已经过时，所以我没有关于最大图像大小非常有限的信息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T23:21:05.360

看起来你不能为你的`UIActivity`. 根据官方[文档](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIActivity_Class/Reference/Reference.html)：`any color data in the image itself is ignored`仅考虑 alpha 作为掩码。

# c# - 如何获得与 ASP.NET MVC 4 中的常规控制器相同的 ApiController 路由逻辑？

> ID：12592263
> 
> 赞同：1
> 
> 时间：2012-09-25T22:54:47.790
> 
> 标签：c#, controller, asp.net-mvc-4, asp.net-web-api

我从一个控制器开始，它采用如下过滤器参数：

```
public class CampaignsController : Controller
{
    public ActionResult List(string searchstring, string pid, string country, string vertical, string traffictype)
    {
         var query = db.Campaigns;
         if(!string.IsNullOrWhiteSpace(country))
         {
              query = query.Where(c => c.CountryCode == country);
         }
         // and so on...      
         var viewModel = new CampaignListViewModel { Campaigns = query.ToList(); }
         return View(viewModel);
    }
} 
```

我喜欢这一点的是，即使某些参数为空，操作也会映射到它。

然后我转换为 Ajax 样式，发现 ApiController 可以方便地生成我需要的 JSON 响应。

但是，我发现*所有*参数都需要出现在查询字符串中，以便路由与 Action 匹配。

这是示例代码：

```
 public class CampaignsApiController : ApiController
    {
        public IQueryable<CampaignViewModel> Get(string vertical, string traffictype, string search, string country, int? pid)
        {
            var campaigns = db.Campaigns.AsQueryable();
            if (!string.IsNullOrWhiteSpace(vertical))
            {
                var cr = db.Verticals.Where(v => v.Name == vertical).FirstOrDefault();
                if (cr != null)
                    campaigns = campaigns.Where(c => c.Vertical.Name == vertical);
            }
            // and so on...
            var query = campaigns.AsEnumerable()
                       .Select(c => new CampaignViewModel(c))
                       .AsQueryable();
            return query;
        }
   } 
```

是否有可能为 ApiController 获得相同的行为？

或者，是否可以修改我的设计方法或我使用 ApiController 的方式以将 ApiController 默认行为合并到我所追求的结果？

这是这两个类的[要点以供参考。](https://gist.github.com/3784952)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T01:00:45.013

尝试为可能丢失的参数输入一些默认值，例如

```
public IQueryable<CampaignViewModel> Get(string vertical = null, string traffictype = null, string search = null, string country = null, int? pid = null) {

 ...

} 
```

# c - 使用模数计算

> ID：12592271
> 
> 赞同：0
> 
> 时间：2012-09-25T22:56:12.017
> 
> 标签：c

目前正在处理一项要求用户提供学生人数的作业，然后计算需要多少个部分，以便需要最少的部分（每个部分有 35 名学生）。

我一直在弄清楚如何使用模数来执行其中一项计算（我们提供了所需程序的示例运行）。

这就是我所拥有的，我知道这并不多，但即使只是一个一般性的想法也会有所帮助。

```
if (stdnt % std == 0) {
        sec = stdnt / std;

}
# of students  # of sections  standard section  last section 
 351             11              32               31 
```

这只是该计划的一部分。

**我的问题：**

我不知道如何进行计算，以便如果有剩余部分，则部分大小会缩小以适合所有学生。

*例如* 用户输入 350，每个部分最多有 35 个点，因此有 10 个部分。如上表所示，我无法弄清楚如何获得 351。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T23:03:22.780

模运算计算除法后的余数。记住公式

x = (x DIV n) + (x MOD n)

其中“x”和“n”是整数，“DIV”表示整数除法，“MOD”表示模运算。从中，您可以获得 C 代码：

```
int of_students       = 351;
int standard_section  = 35;

int last_section      = of_students % standard_section;
int of_sections       = of_students / standard_section;
if(last_section != 0) ++of_sections; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T23:10:43.533

那么模数给你余数，如果余数大于零，你需要为剩下的学生准备另一个部分。因此，例如，将您的 351 名学生除以每个部分的学生人数 (35) 将得到 10 个部分，然后使用模运算符：351%35 将返回余数 1，因此您需要一个额外的部分来容纳它一名学生。

因此，所需部分数量的伪代码是：

```
number_of_sections = 351/35
if( 351%1 > 0 ) number_of_sections += 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T23:24:27.777

每个部分最多有`MAX_PER_SECTION`（35 名）学生。然后写

```
number_of_students = q * MAX_PER_SECTION + r 
```

与`0 <= r < MAX_PER_SECTION`. 如果`r == 0`, 那么`q`部分就足够了，否则我们需要`q+1`. 您可以简单地获得该数字

```
number_of_sections = (number_of_students - 1) / MAX_PER_SECTION + 1; 
```

现在剩下的就是确定学生在各个分区之间的最佳分布，以使最大分区和最小分区的学生数量之间的差异最小化。（您始终可以将差异设为 0 或 1。）同样，使用除以余数来编写

```
number_of_students = s * number_of_sections + t 
```

与`0 <= t < number_of_sections`. 然后我们需要`t`有学生的部分`s+1`，其余`number_of_sections - t`部分将带`s`学生。

在示例中

```
351 = 10 * 35 + 1, number_of_sections = (351 - 1) / 35 + 1 
```

所以我们需要 11 个部分，并且

```
351 = 31 * 11 + 10, 
```

因此我们需要 10 个部分 32 名学生和 1 个部分 31 名学生。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T01:14:26.090

```
int numOfSections = numOfStudent / sizeOfSection; 
```

基本上，如果没有余数，这将为您提供部分的数量，然后您要创建一个 if 语句来检查是否有余数。如果是这样，请将 1 添加到 numOfSection。

```
if(numOfStudent % sizeOfSection != 0)
   numOfSection++; 
```

# qt - 使用 QOpenGLFrameBufferObject 类的 Qt5 OpenGL 多重采样

> ID：12592273
> 
> 赞同：4
> 
> 时间：2012-09-25T22:56:22.923
> 
> 标签：qt, opengl, multisampling, qt5

我需要在 Qt5 项目中执行多重采样，但我不确定如何使用[QOpenGLFrameBufferObject](http://qt-project.org/doc/qt-5.0/qopenglframebufferobject.html)来执行 FSAA。就我搜索而言，没有关于如何执行此操作的示例，文档仅提到：“如果您想使用启用了多重采样的帧缓冲区对象作为纹理，您首先需要使用 QOpenGLContext 从它复制到常规帧缓冲区对象::blitFramebuffer()。” 我的代码目前如下所示：

```
//Enable FSAA for better output
int vp[4];
glGetIntegerv(GL_VIEWPORT, vp);
if(m_lpFBO == NULL)
{
    //MultiSampling set to 4 now
    QOpenGLFramebufferObjectFormat format;
    format.setAttachment(QOpenGLFramebufferObject::CombinedDepthStencil);
    format.setMipmap(true);
    format.setSamples(4);
    format.setTextureTarget(GL_TEXTURE_2D);
    format.setInternalTextureFormat(GL_RGBA32F_ARB);

    //Create the FBO
    m_lpFBO = new QOpenGLFramebufferObject(vp[2], vp[3], format);
    m_lpFBOSurface = new QGLFramebufferObjectSurface(m_lpFBO);
}

QRect rc(0, 0, vp[2], vp[3]);
QGLSubsurface sub(lpPainter->currentSurface(), rc);

m_lpFBO->bind();
sub.setFramebufferObject(m_lpFBO);
lpPainter->pushSurface(&sub);

//Draw as usual
.
. 
.

lpPainter->popSurface();

//Now Copy
QOpenGLFramebufferObject::blitFramebuffer(lpPainter->currentSurface()->framebufferObject(), rc, m_lpFBO, rc); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T06:20:50.323

您不需要使用 a`QGLFramebufferObjectSurface`来执行必要的下采样，因为您可以只使用两个`QGLFramebufferObject`s。`QOpenGLFramebufferObject::blitFramebuffer`（调用`glBlitFramebuffer`）将自动管理从源帧缓冲区目标到目标帧缓冲区目标的下采样（或上采样）。还允许您指定如何使用 (或)`blitFramebuffer`计算转换以及要传输哪些附件（, ,的按位组合）。`GL_NEAREST``GL_LINEAR``GL_COLOR_BUFFER_BIT``GL_DEPTH_BUFFER_BIT``GL_STENCIL_BUFFER_BIT`

因此，根据您的需要，您需要创建 2 个`QOpenGLFramebufferObject`，其中一个将包含要渲染的多重采样纹理，另一个将包含下采样结果纹理。然后，您将使用`QOpenGLFramebufferObject::blitFramebuffer`将源纹理下采样到结果纹理中。

这是一个简单的例子：

```
// MultiSampling set to 4 now
QOpenGLFramebufferObjectFormat muliSampleFormat;
muliSampleFormat.setAttachment(QOpenGLFramebufferObject::CombinedDepthStencil);
muliSampleFormat.setMipmap(true);
muliSampleFormat.setSamples(4);
muliSampleFormat.setTextureTarget(GL_TEXTURE_2D);
muliSampleFormat.setInternalTextureFormat(GL_RGBA32F_ARB);
QOpenGLFramebufferObject multiSampledFBO(width, height, format);

QOpenGLFramebufferObjectFormat downSampledFormat;
downSampledFormat.setAttachment(QOpenGLFramebufferObject::CombinedDepthStencil);
downSampledFormat.setMipmap(true);
downSampledFormat.setTextureTarget(GL_TEXTURE_2D);
downSampledFormat.setInternalTextureFormat(GL_RGBA32F_ARB);
QOpenGLFramebufferObject downSampledFBO(width, height, downSampledFormat); 
```

然后，每次您需要下采样（在渲染到多重采样纹理之后）时，只需执行以下操作即可。（使用您喜欢的过滤器）

```
QOpenGLFramebufferObject::blitFramebuffer(
    &downSampledFBO, &multiSampledFBO,
    GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT | GL_STENCIL_BUFFER_BIT, GL_NEAREST); 
```

# visual-c++ - IJetCompact 数据库限制

> ID：12592275
> 
> 赞同：0
> 
> 时间：2012-09-25T22:56:26.400
> 
> 标签：visual-c++, ms-access

我正在使用 IJetCompact 压缩/修复 access 2003 数据库。它适用于小于 100 MB 的较小数据库，但对于大于 <200 MB 的数据库，它在执行一段时间后崩溃。我可以使用的数据库大小是否有限制？

# javascript - TypeError: p.easing[this.easing] 不是函数

> ID：12592279
> 
> 赞同：106
> 
> 时间：2012-09-25T22:56:39.763
> 
> 标签：javascript, jquery, html

尝试使用 jQuery 显示 div 元素时，出现此错误：

```
[23:50:35.971] TypeError: p.easing[this.easing] is not a function @ file:///D:/html5%20puzzle/jquery.js:2 
```

相关功能是这样的：

```
function showWithAnimation(){                  
  console.log('animation called');
  $('#popup').show();
  $("#popup").css({"top": "30%", "left": "30%"})
             .animate({top:(($(window).height()/2)-($('#popup')
             .outerHeight()/2))-70}, 1000, 'easeOutBounce')
             .show();
} 
```

该函数负责显示带有弹跳动画的 div，但是，显示了 div 但没有弹跳效果。

**编辑：**

我包括来自 CDN 的 jQuery 和 jQueryUI 库，如下所示（按顺序）：

```
<script src='http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js'></script>
<script src='http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.5/jquery-ui.min.js'>
</script> 
```

* * *

## 回答 #1

> 赞同：152
> 
> 时间：2012-09-25T22:59:25.980

您需要为扩展的缓动选项包括 jQueryUI。

我认为可能有一个选项可以只在下载中包含缓动，或者至少只是基本库加上缓动。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-12-22T08:15:20.040

对于那些拥有自定义 jQuery UI 构建（例如 bower）的用户，添加位于`..\jquery-ui\ui\effect.js`.

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2016-10-12T11:38:38.680

包括这对我有用。

请在本节中包括下面提到的行。

```
<script src='http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.5/jquery-ui.min.js'> 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-11-12T16:01:17.337

Jquery easing plugin renamed their effect function names from version 1.2 on. If you have some javascript depending on easing and it is not calling the right effect name it will throw this error.

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-02-02T23:27:39.807

我今天在尝试在 div 上启动幻灯片效果时遇到此错误。感谢上面“我讨厌懒惰”的回答（我已经投票了），我去寻找一个自定义的 jQuery UI 脚本，实际上你可以直接在 jQuery ui 网站[http://jqueryui 上构建你自己的文件。 com/下载/](http://jqueryui.com/download/)。您所要做的就是标记您正在寻找的效果，然后下载。

我正在寻找幻灯片效果。所以我首先取消选中所有复选框，然后单击“幻灯片效果”复选框，然后页面会自动检查使幻灯片效果工作所需的其他组件。很简单。

easeOutBounce 是一种缓动效果，您需要选中“Effects Core”复选框。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-09-25T23:12:06.143

如果您使用的是 Bootstrap，那么 Bootstrap 的 jQuery（如果包含在您的 jQuery 脚本标签下方）也可能会用另一个版本覆盖您的 jQuery 脚本标签。包括 jQuery 自己的 CDN 和删除 Bootstrap 提供的 jQuery 脚本标签是唯一对我有用的东西。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2020-05-03T19:41:36.060

导入`jquery.easing`cdn 对我有用。

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js"></script> 
```

您可以添加网页底部。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-01-28T15:40:31.740

对于任何遇到此错误并且您已尝试更新版本并确保存在效果核心等但仍然摸不着头脑的人。检查 animate() 和其他语法的文档。

我所做的只是写“线性”而不是“线性”并得到 [this.easing] 不是一个函数

$("#main").animate({ scrollLeft: '187px'}, 'slow', 'Linear'); //坏的

$("#main").animate({ scrollLeft: '187px'}, 'slow', 'linear'); //好的

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-06-29T10:54:19.303

我发现了问题：不要使用 CDN（这是导致问题的原因！），而是将 jquery 文件本地保存在您的服务器上，然后问题就消失了。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-09-11T12:43:03.650

我发现了一件很奇怪的事情，但重要的是要知道：当你安装 jQuery ui (1.12.1) 时，很多缓动工作，例如：

```
jQuery('#my-elm').animate({marginLeft:500},1000,'linear');
jQuery('#my-elm').animate({marginLeft:500},1000,'easeOutBounce'); 
```

工作，但默认值：

```
jQuery('#my-elm').animate({marginLeft:500},1000,'swipe'); 
```

产生很多错误

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-09-03T14:26:35.433

使用最新的 bootstrap 4 及更高版本，这不会影响您的 UI

# f# - 如何在 F# 中测试序列是否无限？

> ID：12592281
> 
> 赞同：0
> 
> 时间：2012-09-25T22:57:17.493
> 
> 标签：f#

如果我有一个由递归函数生成的序列，如下所示：

```
let rec genConst t = seq { yield t ; yield! genConst (t) }
let inf = genConst 1 
```

如何测试 inf 的长度是否为无限？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T23:25:06.880

基本上是不可能的。
F# 序列本质上~~是~~对`IEnumerable<'T>`. [(MSDN)](http://msdn.microsoft.com/en-us/library/9eekhta0.aspx) 和[(MSDN)](http://msdn.microsoft.com/en-us/library/system.collections.ienumerator.aspx)
都没有提供任何检索其长度的方法。`IEnumerable<'T>` `IEnumerator`

UPD 感谢@svick 的重要更正。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T17:23:37.103

如果它有助于您的特定情况，您可以定义一个标记序列无限的包装器类型：

```
type InfiniteSeq<'T> = private Infinite of seq<'T> with
  interface seq<'T> with
    member x.GetEnumerator() = let (Infinite s) = x in s.GetEnumerator()
  interface System.Collections.IEnumerable with
    member x.GetEnumerator() = let (Infinite s) = x in s.GetEnumerator() :> _

module Seq =
  let infinite source = Infinite source

let rec genConst t = seq { yield t ; yield! genConst (t) } |> Seq.infinite

let firstFive = genConst 1 |> Seq.take 5 
```

你得到多态性，`seq<_>`类型表示附加行为。

# c# - 不使用 IIS 的 Http 重定向

> ID：12592283
> 
> 赞同：0
> 
> 时间：2012-09-25T22:57:25.547
> 
> 标签：c#, iis, redirect, configuration

我想知道，在不使用 IIS http 重定向的情况下，我可以通过哪些方式将任何用户从[http://www.mywebsite.com](http://www.mywebsite.com)重定向到[http://www.mywebsite.com/login 。](http://www.mywebsite.com/login)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T23:04:32.243

您可以只使用 html 代码来执行此操作：

```
<html>
<head>
<meta http-equiv="refresh" content="5; URL=http://www.mywebsite.com/login">
</head>
<body>
Please wait - redirecting...
</body>
</html> 
```

内容部分描述了要做什么。第一个数字是重定向应该开始的时间。这里是 5 秒。URL= 部分告诉浏览器去哪里。

第二种方法是使用带有 body.onload 的 javascript：

```
<html>
<head>
</head>
<body onLoad='location.href="http://www.mywebsite.com/login"'>
Please wait - redirecting...
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T23:58:20.927

您始终可以使用 JavaScript 执行此操作。使用以下代码在您的 html 标头中添加一个脚本部分：

```
<head> 
  <script type="text/javascript">   
    window.location.href = "http://stackoverflow.com";
  </script>
</head> 
```

欲了解更多信息：[如何在 JavaScript/jQuery 中重定向到另一个网页？](https://stackoverflow.com/questions/503093/how-can-i-make-a-redirect-page-in-jquery-javascript)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T23:04:20.963

通过“IIS 重定向”，我假设您指的是 IIS 的“将所有请求重定向到此文件系统目录”功能。自 IIS7 以来，此配置已存储在`web.config`or`applicationHost.config`文件中。在 IIS6 中，这存储在二进制元数据库中。

如果你想要便宜又讨厌的东西，你可以使用经典的 ASP 或 PHP 脚本，如下所示：

### 经典的 ASP。称它为“Index.asp”

```
<% Response.Redirect("http://mywebsite.com/login") %> 
```

### PHP，称之为“index.php”

```
<?php header("Location: http://mywebsite.com/login"); header("Status: 303 See Other"); %> 
```

请注意，PHP 重定向比 ASP 更便携，因为它应该适用于大多数 Apache 服务器。请注意我使用了语义正确的 HTTP 303 重定向，而不是不正确的 301 或 302 重定向（Classic ASP 使用）。

还有基于 HTML/Javascript 的重定向，但它们不是真正的重定向，因为客户端最初会收到 HTTP 200 响应。

# plsql - Oracle BETWEEN DATE RANGE 语法正确

> ID：12592284
> 
> 赞同：-1
> 
> 时间：2012-09-25T22:57:26.423
> 
> 标签：plsql

再会，

我有以下 PL-SQL 查询：

```
SELECT 
    "FileProcessStatus"."ProcessStatusId"
    , "ProcessStatus"."Name"
    , COUNT("FileProcessStatus"."Id") AS Occurrences
FROM "FileProcessStatus" INNER JOIN "ProcessStatus" 
ON "FileProcessStatus"."ProcessStatusId" = "ProcessStatus"."Id"
GROUP BY "FileProcessStatus"."ProcessStatusId", "ProcessStatus"."Name"

WHERE "FileProcessStatus"."CreatedDate" 
BETWEEN TO_DATE('01-SEP-12','DD-MON-YY') AND TO_DATE('01-OCT-12','DD-MON-YY'); 
```

现在，当我在*没有*WHERE 子句的情况下运行查询时，查询会给出我正在寻找的结果，但是当我包含 WHERE BETWEEN 因为我试图根据日期范围从两个表中提取数据时，然后我得到：

```
ORA-00933: SQL command not properly ended. 
```

我研究了这个问题，我理解查询的格式不正确，但我正在尝试坚持使用 ANSI-SQL，因为我正在使用 PL-SQL。

建议，有人吗？

TIA,

科森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T02:07:42.067

SQL 子句的顺序为：

```
WITH     ...
SELECT   ...
FROM     ...
WHERE    ...    
GROUP BY ...
HAVING   ...    
ORDER BY ... 
```

# java - Java枚举-在定义之前无法引用字段

> ID：12592286
> 
> 赞同：10
> 
> 时间：2012-09-25T22:58:01.063
> 
> 标签：java, enums

我有一个像下面这样的枚举，但是 eclipse 说每个相反对的第一个定义中有错误。

```
public enum Baz{
  yin(yang),    //Cannot reference a field before it is defined
  yang(yin),
  good(evil),   //Cannot reference a field before it is defined
  evil(good);

  public final Baz opposite;

  Baz(Baz opposite){
    this.opposite = opposite;
  }
} 
```

我想要完成的是能够*用来*`Baz.something.opposite`获取. 有没有可能的解决方法？也许在这个例子中定义了一个空的占位符 for and before and ？*`Baz.something``yang``bad``yin``good`*

 ** * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-25T23:20:45.230

使用 switch 语句：

```
public enum Baz{
  yin,
  yang,
  good,
  evil;

  public Baz getOpposite() {
    switch (this) {
        case yin: return yang;
        case yang: return yin;
        case good: return evil;
        case evil: return good;
    }
    throw new AssertionError();
} 
```

或延迟初始化：

```
public enum Baz{
  yin,
  yang,
  good,
  evil;

  public Baz opposite;

  static {
    yin.opposite = yang;
    yang.opposite = yin;
    good.opposite = evil;
    evil.opposite = good;
  }
} 
```

您可能希望将可变字段设为私有并提供一个 getter。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-25T23:05:05.113

您可以尝试以下方法：

```
public enum Baz{
  yin("yang"),    
  yang("yin"),
  good("evil"),   
  evil("good");

  private String opposite;

  Baz(String opposite){
    this.opposite = opposite;
  }

  public Baz getOpposite(){
     return Baz.valueOf(opposite);
  }
} 
```

然后将其引用为

```
Baz.something.getOpposite() 
```

这应该通过它的字符串表示查找枚举值来完成您想要做的事情。我认为你不能让它与对 Baz 的递归引用一起工作。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-25T23:26:41.403

EnumMap 怎么样？

```
public enum Baz {
  yin,
  yang,
  good,
  evil;
  private static final Map<Baz, Baz> opposites = new EnumMap<Baz, Baz>(Baz.class);

  static {
    opposites.put(yin, yang);
    opposites.put(yang, yin);
    opposites.put(good, evil);
    opposites.put(evil, good);
  }

  public Baz getOpposite() {
    return opposites.get(this);
  }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-03-22T20:01:54.813

您还可以使用抽象方法来延迟，这比公认的答案具有类型安全的好处。

```
public enum Baz {

    yin(new OppositeHolder() {
        @Override
        protected Baz getOpposite() {
            return yang;
        }
    }),
    yang(new OppositeHolder() {
        @Override
        protected Baz getOpposite() {
            return yin;
        }
    }),
    good(new OppositeHolder() {
        @Override
        protected Baz getOpposite() {
            return evil;
        }
    }),
    evil(new OppositeHolder() {
        @Override
        protected Baz getOpposite() {
            return good;
        }
    });

    private final OppositeHolder oppositeHolder;

    private Baz(OppositeHolder oppositeHolder) {
        this.oppositeHolder = oppositeHolder;
    }

    protected Baz getOpposite() {
        return oppositeHolder.getOpposite();
    }

    private abstract static class OppositeHolder {
        protected abstract Baz getOpposite();
    }

} 
```

并测试代码，因为我需要它......

```
import org.junit.Test;
import static org.junit.Assert.fail;

public class BazTest {

    @Test
    public void doTest() {
        for (Baz baz : Baz.values()) {
            System.out.println("Baz " + baz + " has opposite: " + baz.getOpposite());
            if (baz.getOpposite() == null) {
                fail("Opposite is null");
            }
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-25T23:28:58.040

另一种选择:) 使用地图。这很冗长，但这样你可以**只定义每对一次**，推断出另一个方向。

```
enum Baz {

    YIN, YANG, GOOD, EVIL;

    private static final Map<Baz, Baz> opposites = new EnumMap<>(Baz.class);

    static {
        opposites.put(YIN, YANG);
        opposites.put(GOOD, EVIL);

        for (Entry<Baz, Baz> entry : opposites.entrySet()) {
            opposites.put(entry.getValue(), entry.getKey());
        }
    }

    public Baz opposite() {
        return opposites.get(this);
    }
} 
```

就个人而言，我最喜欢*Meriton*的第二个例子。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-25T23:25:00.630

还有另一种可能的实现（类似于其他一些解决方案，但使用 HashMap）。

```
import java.util.Map;
import java.util.HashMap;

public enum Baz {
 yin,
 yang,
 good,
 evil;

 private static Map<Baz, Baz> opposites = new HashMap<Baz, Baz>();
 static {
    opposites.put(yin, yang);
    opposites.put(yang, yin);
    opposites.put(good, evil);
    opposites.put(evil, good);
 }

 public Baz getOpposite() {
  return  opposites.get(this);
 }

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-25T23:47:45.497

然后是完全 OTT 解决方案。

```
public enum Baz {
  yin,
  yang,
  good,
  evil,
  right,
  wrong,
  black,
  white;

  private static class AutoReversingMap<K extends Enum<K>> extends EnumMap<K, K> {
    public AutoReversingMap(Class<K> keys) {
      super(keys);
    }

    // Make put do both the forward and the reverse.
    public K put(K key, K value) {
      super.put(key, value);
      super.put(value, key);
      // Better to return null here than a misleading real return of one of the supers.
      return null;
    }
  }
  private static final Map<Baz, Baz> opposites = new AutoReversingMap<Baz>(Baz.class);

  static {
    // Assume even and odd ones are opposites.
    for (int i = 0; i < Baz.values().length; i += 2) {
      opposites.put(Baz.values()[i], Baz.values()[i + 1]);
    }
  }

  public Baz getOpposite() {
    return opposites.get(this);
  }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-05-20T08:47:35.330

多年后，最短和最 hacky 的解决方案

```
public enum Baz {
    YIN, // Use uppercase for enum names!
    YANG,
    GOOD,
    EVIL;

    public Baz opposite() {
        return values()[ordinal() ^ 1];
    }
} 
```

它依赖于每个成员都有对立面并且成对排列的假设。它用一种方法替换了该字段，希望 JVM 将优化整个开销。这在桌面上是合理的，在 Android 上不太合理。

为了消除开销，我可以在这里使用静态初始化程序作为许多其他解决方案。*

# android - 浮动视图，因此它们不会占用布局中的空间

> ID：12592291
> 
> 赞同：10
> 
> 时间：2012-09-25T22:58:28.450
> 
> 标签：android, android-layout, layout

是否可以将元素浮动到 Android 中的其他元素之上，这样它们就不会影响其容器的布局？

我想要达到的效果是一个浮动的类似气泡的元素：

![在此处输入图像描述](../Images/c23b37f23fd4608b1981907104d039a5.png)

上面的黄色框是我想要漂浮在其他元素之上的元素，但正如您所见，它会将其容器向下推，在绿色条下方创建黑色空间，而不是漂浮在其下方的灰色区域上方。

RelativeLayout 可以适当地定位元素，但我找不到使定位的元素不扩展其容器边界的方法。这在Android上甚至可能吗？

**类比**

*   在网络世界中，等价物是具有“位置：绝对”的元素，因此不被视为“流”的一部分（即：布局）
*   在 WPF 世界中，等效的元素是位于 Canvas 内的元素。Canvas 有自己的边界，它占用布局中的空间，但它的子元素可以位于其边界之外并且不会影响布局
*   在 iOS 世界中，每个视图都被定位为画布（因为没有布局管理器），所以这种行为是通过简单地偏移元素框架的 x 和 y 属性来实现的

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-25T23:03:15.147

> RelativeLayout 可以适当地定位元素，但我找不到使定位的元素不扩展其容器边界的方法。

那么你有错误的容器。

例如：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <Button
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:text="@string/big"
        android:textSize="120dip"
        android:textStyle="bold"/>

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:text="@string/small"/>

</RelativeLayout> 
```

![浮动按钮](../Images/e1a00419bd8fa198c9fc55d5028c1e6c.png)

在这里，小按钮漂浮在大按钮之上。小按钮并没有“扩展其容器的边界”，仅仅是因为容器是整个内容视图。

您将`RelativeLayout`（或`FrameLayout`）容器设置为包含您的孩子可以漂浮的可能区域的容器。无论是整个屏幕还是只是一个子集都取决于您。反之，如果你的孩子影响了其容器的边界，则说明你使用了错误的容器，或者需要专门为这个角色设置一个容器。

在另一个例子中，[Roman Nurik 展示了如何实现一个浮动的“撤消栏”](https://plus.google.com/113735310430199015092/posts/RA9WEEGWYp6)，类似于 Gmail 的：

![浮动撤消栏](../Images/f5857f34581d7ca9bbd3af95cff83b37.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T23:05:17.673

看看 android 中的相对布局：例如，当您没有在相对布局中的所有视图上指定位置时，它们将浮动在彼此之上。

[http://developer.android.com/guide/topics/ui/layout/relative.html](http://developer.android.com/guide/topics/ui/layout/relative.html)

例子：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/update"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:background="#444444"
        android:text="Update"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/lost_of_text"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/some_button"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:text="text view with lots of text"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <Button
        android:id="@+id/some_button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:text="Some Button" />

</RelativeLayout> 
```

编辑：CommonsWare 更快；）看看他漂亮的答案！

# django - 创建对象时如何自动创建 Django 关系？

> ID：12592295
> 
> 赞同：0
> 
> 时间：2012-09-25T22:58:39.123
> 
> 标签：django, django-models, django-admin

我希望用户能够创建一个`Store`对象。创建时，它应该自动创建此用户/商店组合的`EmploymentRelationship`类型`Owner`。稍后`Owner`，商店的 可以添加`Employee`。在管理界面中创建对象时，如何建立这种初始关系？

```
class Store(models.Model):
    description = models.CharField('Description of Store',max_length=45, null=False, blank=False)

class EmploymentRelationship(models.Model):
    OWNERTYPECHOICES = (
        (constants.OWNER, 'Owner'),
        (constants.EMPLOYEE, 'Employee'),
    )

    sid = models.ForeignKey(Store, null=False, blank=False)
    uid = models.ForeignKey(User, null=False, blank=False)
    employment_type = models.IntegerField('Ownership Type',default=constants.EMPLOYEE, choices=OWNERTYPECHOICES) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T00:00:25.007

您可以在管理类中覆盖 save_model：

```
class StoreAdmin(ModelAdmin):

    def save_model(self, request, obj, form, change):
        super(StoreAdmin, self).save_model(request, obj, form, change)
        if not change:
            EmploymentRelationship.objects.create(
                sid=obj, uid=request.user, employment_type=constants.OWNER) 
```

更多信息[在这里](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.save_model)。

# xml - “文件.docx 无法打开，因为内容存在问题。” 位置部分：/word/document.xml

> ID：12592296
> 
> 赞同：3
> 
> 时间：2012-09-25T22:59:00.463
> 
> 标签：xml, ms-word, drawing, corruption, word-2010

一些用户反复面临文档损坏问题。

我们有一个使用 Webdav 在服务器上存储 Word 文档的应用程序。在服务器上访问和编辑这些文档的用户可能在 office 2007 和 office 2010 上。大多数文档是共享的，并且可以由 office 2007 和 office 2010 用户点击进行编辑。

许多用户遇到文档损坏问题并出现以下错误。==>“无法打开文件 xxx，因为”内容有问题“详细信息：没有可用的错误详细信息。位置部分：/word/document.xml 行：1 列 0

在为此文档格式化 document.xml 文件后，我发现错误指向 line => <wp:docPr id="1026" />

有问题的 XML 节点位于下面提供的 XML 节点中。所有损坏的文档都具有相同的行为。它们都指向同一个 XML 标签。如果我取出完整的节点，文档就会打开。

```
 <w:drawing>
          <wp:inline distT="0" distB="0" distL="0" distR="0">
            <wp:extent cx="4572638" cy="3429479" />
            <wp:effectExtent l="0" t="0" r="0" b="0" />
            <wp:docPr id="1026" />
            <wp:cNvGraphicFramePr>
              <a:graphicFrameLocks xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" noChangeAspect="1" />
            </wp:cNvGraphicFramePr>
            <a:graphic xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main">
              <a:graphicData uri="http://schemas.openxmlformats.org/drawingml/2006/picture">
                <pic:pic xmlns:pic="http://schemas.openxmlformats.org/drawingml/2006/picture">
                  <pic:nvPicPr>
                    <pic:cNvPr id="0" />
                    <pic:cNvPicPr>
                      <a:picLocks noChangeAspect="1" />
                    </pic:cNvPicPr>
                  </pic:nvPicPr>
                  <pic:blipFill>
                    <a:blip r:embed="rId4" />
                    <a:stretch>
                      <a:fillRect />
                    </a:stretch>
                  </pic:blipFill>
                  <pic:spPr>
                    <a:xfrm>
                      <a:off x="0" y="0" />
                      <a:ext cx="4572638" cy="3429479" />
                    </a:xfrm>
                    <a:prstGeom prst="rect">
                      <a:avLst />
                    </a:prstGeom>
                  </pic:spPr>
                </pic:pic>
              </a:graphicData>
            </a:graphic>
          </wp:inline>
        </w:drawing> 
```

在我的本地机器上保存文档并使用打开和修复选项打开它后，有问题的标签看起来像这样 => <wp:docPr id="1026" name="Picture 1026"/> 并且完整的节点如下所示。

```
 <w:drawing>
          <wp:inline distT="0" distB="0" distL="0" distR="0">
            <wp:extent cx="4572638" cy="3429479"/>
            <wp:effectExtent l="0" t="0" r="0" b="0"/>
            <wp:docPr id="1026" name="Picture 1026"/>
            <wp:cNvGraphicFramePr>
              <a:graphicFrameLocks xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" noChangeAspect="1"/>
            </wp:cNvGraphicFramePr>
            <a:graphic xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main">
              <a:graphicData uri="http://schemas.openxmlformats.org/drawingml/2006/picture">
                <pic:pic xmlns:pic="http://schemas.openxmlformats.org/drawingml/2006/picture">
                  <pic:nvPicPr>
                    <pic:cNvPr id="0" name=""/>
                    <pic:cNvPicPr>
                      <a:picLocks noChangeAspect="1"/>
                    </pic:cNvPicPr>
                  </pic:nvPicPr>
                  <pic:blipFill>
                    <a:blip r:embed="rId8"/>
                    <a:stretch>
                      <a:fillRect/>
                    </a:stretch>
                  </pic:blipFill>
                  <pic:spPr>
                    <a:xfrm>
                      <a:off x="0" y="0"/>
                      <a:ext cx="4572638" cy="3429479"/>
                    </a:xfrm>
                    <a:prstGeom prst="rect">
                      <a:avLst/>
                    </a:prstGeom>
                  </pic:spPr>
                </pic:pic>
              </a:graphicData>
            </a:graphic>
          </wp:inline>
        </w:drawing> 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-26T04:10:37.370

简短的回答是“名称”是 docPr 和 cNvPr 元素的必需属性：

```
<xsd:complexType name="CT_PictureNonVisual">
  <xsd:sequence>
    <xsd:element name="cNvPr"    type="a:CT_NonVisualDrawingProps"/>
    ...
  </xsd:sequence>
</xsd:complexType>

<xsd:complexType name="CT_Inline">
  <xsd:sequence>
    ...
    <xsd:element name="docPr" type="a:CT_NonVisualDrawingProps"/>
    ...
  </xsd:sequence>
  ...
</xsd:complexType>

<xsd:complexType name="CT_NonVisualDrawingProps">
  ...
  <xsd:attribute name="id"   type="ST_DrawingElementId" use="required"/>
  <xsd:attribute name="name" type="xsd:string"          use="required"/>
  ...
</xsd:complexType> 
```

我将不得不猜测该属性在过程中的哪个位置被遗漏或删除。但没有它，document.xml 部分的架构无效，这将解释所需的修复步骤。

# android - android“无法执行活动的方法”NullPointerException，但为什么呢？

> ID：12592299
> 
> 赞同：1
> 
> 时间：2012-09-25T22:59:11.820
> 
> 标签：android, nullpointerexception, android-linearlayout

在最初只有一个标题和一个“+”按钮的活动中，我想在每次单击按钮时添加包含更多视图的线性布局。

我不知道如何解决这个问题，所以我尝试了以下操作：最多有七个 LinearLayouts 要添加，所以我将它们添加到 layout-xml-file 中并将它们全部设置为`android:visibility="gone"`

这是我的布局 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:paddingTop="5dp"
    android:paddingBottom="5dp"
    android:paddingLeft="15dp"
    android:paddingRight="15dp" >

    <LinearLayout 
        android:id="@+id/layout_ppe2" 
        android:orientation="vertical"
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content"        
        >

         (...)

        <Button 
        android:id="@+id/bt_ppe2_newset"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:onClick="onClickAddNewSet"
        android:text="@string/plus"
        />

        (...)

        <LinearLayout 
            android:id="@+id/lin_ppe2_2"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="15dp"
            android:orientation="horizontal"
            android:visibility="gone">
            (...)
        </LinearLayout>

        <LinearLayout 
            android:id="@+id/lin_ppe2_3"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="2dp"
            android:orientation="horizontal"
            android:visibility="gone">
            (...)
        </LinearLayout>

        (...)

    </LinearLayout>

</ScrollView> 
```

有LinearLayouts lin_ppe2_2 - lin_ppe2_8，这是七个通过单击按钮一个接一个设置可见的布局。

现在`onClickAddNewSet`我得到了以下（`int counter`初始化=1）：

```
public void onClickAddNewSet(View v){
        ScrollView scrollView = (ScrollView) getLayoutInflater().inflate(R.layout.all_completed_bets, null);
        LinearLayout layout = (LinearLayout) scrollView.findViewById(R.id.layout_ppe2);
        LinearLayout layout2 = null;
        switch(counter){
        case 1:
            layout2 = (LinearLayout) layout.findViewById(R.id.lin_ppe2_2);
            break;
        case 2:
            layout2 = (LinearLayout) layout.findViewById(R.id.lin_ppe2_3);
            break;
        case 3:
            layout2 = (LinearLayout) layout.findViewById(R.id.lin_ppe2_4);
            break;
        case 4: 
            layout2 = (LinearLayout) layout.findViewById(R.id.lin_ppe2_5);
            break;
        case 5:
            layout2 = (LinearLayout) layout.findViewById(R.id.lin_ppe2_6);
            break;
        case 6:
            layout2 = (LinearLayout) layout.findViewById(R.id.lin_ppe2_7);
            break;
        case 7: 
            layout2 = (LinearLayout) layout.findViewById(R.id.lin_ppe2_8);
            break;
        }
        if(counter>0 && counter <8){
            layout2.setVisibility(LinearLayout.VISIBLE);
        }
        counter++;  
    } 
```

这总是给我提到的错误与 a `NullPointerException`at the line `layout2.setVisibility(LinearLayout.VISIBLE);`。我也试过

```
LinearLayout layout = (LinearLayout) scrollView.findViewById(R.id.layout_ppe2);
LinearLayout layout2 = (LinearLayout) layout.findViewById(R.id.lin_ppe2_2);
layout2.setVisibility(LinearLayout.VISIBLE); 
```

检查是否发生错误，因为 layout2 是用 null 初始化的，但计数器工作正常（我用`setText(counter)`活动标题-TextView 对其进行了测试）。所以现在我真的不知道为什么这让我这个`NullPointerException`。我是否忽略了一些非常明显的东西？还是有更好的方法来实现我的目标？注意：我不仅要添加这个LinearLayouts，稍后我还必须读出一些值（每个LinearLayout中有2个EditText）。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-25T23:28:07.337

尝试更改 `<android:visibility="gone">` 为 `<android:visibility="invisible">`

我相信该`gone`属性会强制它在布局期间被完全忽略，您希望它被布局但不可见。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-25T23:28:33.377

而不是膨胀一个新的 Scrollview 实例，只需操纵附加到您的活动的实际 Scrollview。

因此，将所有的`scrollview.findViewById()`and更改`layout.findViewById()`为只调用不`findViewById()`带预定义限定符的调用。这样，您将获得对用户按下按钮时正在查看的实际布局对象的引用。

# javascript - jQuery 颜色动画 - 不会褪色回背景颜色

> ID：12592304
> 
> 赞同：0
> 
> 时间：2012-09-25T22:59:38.050
> 
> 标签：javascript, jquery

我正在尝试使用 jQuery 彩色动画插件[http://www.bitstorm.org/jquery/color-animation/](http://www.bitstorm.org/jquery/color-animation/)。当我们调用它并传递它时，比如说`#FFFF00`（黄色），我们看到它变成黄色并逐渐消失。但它永远不会完全变回元素的原始背景颜色，即白色`#FFFFFF`。在进行 DOM 检查后，我注意到元素最终添加了各种样式，例如：

*   `style="background-color: rgb(255, 255, 215);`
*   `style="background-color: rgb(255, 255, 149);`
*   `style="background-color: rgb(255, 255, 207);`

我们需要做些什么才能让插件以这样的方式工作，最后，背景颜色是原始颜色。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T23:05:22.240

## *[jsBin 演示](http://jsbin.com/ajibej/1/edit)*

你可以使用**jQuery UI**和这个：

```
$('.box').hover(function(){
   $(this).stop().animate({backgroundColor: '#ff0'});
},function(){
   $(this).stop().animate({backgroundColor: '#fff'});
}); 
```

或者您的问题可能只是您没有
使用清除动画队列`.stop()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T05:27:19.377

问题出在插件上。作者已经解决了这个问题。

# mongodb - 来自 DOS 或 Windows 的 MongoDB 命令

> ID：12592305
> 
> 赞同：9
> 
> 时间：2012-09-25T22:59:42.047
> 
> 标签：mongodb, mongodb-.net-driver

我正在尝试从 C# 程序自动将 4 个集合从一个 Mongo 数据库复制到同一台机器上的另一个。我怎么做？MongoDB C# 驱动程序中是否有简单的复制集合/数据库命令？还是我必须先输入 ? 来使用 Mongo shell `./mongo`？如果是这样，我如何在 MS-DOS 命令行窗口中执行此操作？喜欢`./mongo -copycollection from to`？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-25T23:04:19.610

使用 mongodump，类型：

```
./mongodump --db your_db_name --collection collection_name 
```

然后是 mongorestore：

```
./mongorestore --db=new_db_name 
```

阅读更多：[mongodump](http://docs.mongodb.org/manual/reference/mongodump/) 和[mongorestore](http://docs.mongodb.org/manual/reference/mongorestore/)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-26T01:36:15.493

你可以使用[mongodump 和 mongorestore](http://www.mongodb.org/display/DOCS/Import+Export+Tools#ImportExportTools-DataImportandExport)

1-> 备份单个数据库
`mongodump -h localhost -d database_name -o C:\DestinationFolder`（备份到 DestinationFolder ）

2-> 恢复数据库

`mongorestore -h localhost C:\DestinationFolder` （从 DestinationFolder 恢复）

**或者**

3->你可以一次备份和恢复一个集合

备份单个集合

```
mongodump -h localhost -d database_name -c Collection_name -o C:\Dest_SingleCollBkp 
```

4->恢复单个集合

```
mongorestore -h localhost C:\Dest_SingleCollBkp 
```

**或者**

5->你可以在当时复制一个集合

复制->

```
use source_database;
var docs = db.source_collection.find({ accessed: {
       '$gte': new Date(2012, 4, 1), '$lt': new Date(2012, 5, 1)
         } }); 
```

过去-> :)

```
use new_database;
//switched to db new_database
 docs.forEach(function(doc) { db.new_collection.insert(doc) }); 
```

6->[复制整个数据库](http://www.mongodb.org/display/DOCS/Copy+Database+Commands)

```
db.copyDatabase('from_database_name', 'to_databasename', 'from_hostname') 
```

# java - Java：具有重叠 JComponents 的鼠标命中检测

> ID：12592307
> 
> 赞同：0
> 
> 时间：2012-09-25T22:59:53.193
> 
> 标签：java, swing, jpanel, java-2d

我有一个空布局的 JPanel。在这个面板上，我绘制了一些自定义 JComponents 作为标记、红色小圆和线条。

当线不是水平或垂直时，JComponent 的“敏感区域”是一个矩形，其本身具有斜边。这个过多的区域通常会“窃取”MouseEvents 到标记。

如果用户没有点击实线，我怎样才能让 MouseEvents “传递”给被覆盖的对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T00:44:32.813

正确的方法是由moonwave99 建议的。

1) 创建并维护一系列行。

2) 使用 Graphics2D 基元绘制数组中覆盖 JPanel 的paintComponent 方法的每一行。

3) 向JPanel 添加一个MouseListener，在行的数组中带有一个研究函数，以知道选择了哪一行。

# assembly - 在 GDB 中跳转到内存导致 SIGSEGV

> ID：12592309
> 
> 赞同：0
> 
> 时间：2012-09-25T23:00:12.507
> 
> 标签：assembly, gdb, code-injection

我正在尝试使用 GDB 将代码注入正在运行的进程中，并且每次尝试运行我的代码时都会得到一个 SIGSEGV。我在ubuntu（Oneiric）上。我使用 python 脚本将代码导出到环境变量以将它们打印出来，然后在 gdb 中，使用类似的东西找到所需的代码`x/50s *((char**)environ)`，然后选择一个更好的地址来检查指令。

所以，当我这样做时`x/30i *(addressOfCode)`，汇编指令与我想要运行的指令完全匹配。所以，如果我在我的代码的起点插入一个断点，然后跳转到那里，然后 stepi，我会得到一个段错误。此外，如果我在内存中选择一个位置并插入一些 NOP，在其中一个处中断，跳转到它，然后 stepi，我也会遇到段错误。

我怎样才能避免这种情况？我是否只是因为我跳出了进程的指定内存而出现了段错误？我有什么选择可以解决这个问题？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:06:00.453

> 我是否只是因为我跳出了进程的指定内存而出现了段错误？

我不知道上面的说法是什么意思。没有“进程指定内存”之类的东西。

最有可能的是，`SIGSEGV`因为您没有可执行堆栈（Linux 和许多其他 UNIX 变体上的环境变量在堆栈上传递）。

如果您使用的是 Linux，请尝试使用`gcc main.c ... -Wl,-z,execstack`. 如果这使您的代码注入工作，那么非可执行堆栈确实是您的问题。

# php - PHP - 在第二次爆炸数组后回显所有内容

> ID：12592310
> 
> 赞同：0
> 
> 时间：2012-09-25T23:00:33.587
> 
> 标签：php, arrays, explode

我有一个爆炸输入的脚本，见下文：

```
$message = explode(" ", $_GET['message']);
switch($message[0])
{
    case "/commands":
        echo "N/A";
    break;
    case "/mute":
        $player = $message[1];
        $time = $message[2]; // seconds
        $reason = $message[3];
        echo "Mute {$player} for {$time} seconds because {$reason}";
    break;
    default:
        echo "Invalid command";
    break;
} 
```

我偶然发现了一个问题，说用户要使用“/mute Steve 500 For being an idiot”——它会返回给我`"Mute Steve for 500 seconds because For"`，而不是为我提供完整的理由，因为我使用过`$message[3]`，我在问你这个：

之后我如何退回所有东西`$message[2]`？

我是否必须运行一个 foreach 循环，将所有单词组合在一起，还是有更简单的方法？

抱歉，如果很难理解，我会尽力解释，但这是一个很难解释的话题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T23:05:30.137

> 之后我如何退回所有东西`$message[2]`？

[`array_slice(...)`](http://php.net/manual/en/function.array-slice.php)像这样使用：

```
$reason = join(' ', array_slice($message, 2)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T23:05:39.173

您可以使用 array_slice 轻松完成此操作 - [http://php.net/manual/en/function.array-slice.php](http://php.net/manual/en/function.array-slice.php)

在你的情况下，

```
$reason = implode(' ', array_slice($message, 3)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T23:07:34.457

如果您可以`$message`以稍微不同的方式格式化，那会容易得多。如果您的消息看起来像这样，而不是使用空格（然后在它们上爆炸）：

```
/ban||Steve||500||For being an idiot 
```

然后你可以像这样在双管上爆炸：

```
$message = explode("||", $_GET['message']); 
```

并且您的其余代码将按预期工作。如果您根本无法更改正在发送的消息，它将变得更加棘手，您将不得不使用循环、第二次内爆或一些正则表达式来实现这一点。

# ruby-on-rails - 绿色托管 Rails 应用托管德国/欧洲

> ID：12592311
> 
> 赞同：0
> 
> 时间：2012-09-25T23:00:33.830
> 
> 标签：ruby-on-rails, hosting

是否有任何绿色网络托管提供商可以在虚拟/共享服务器上使用 mysql 的 rails 应用程序，优先在德国（或一般欧洲，但不太受欢迎）？（小型企业解决方案）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T07:09:58.360

[https://shellycloud.com/](https://shellycloud.com/)拥有来自德国 Hetzner 的数据中心，该数据中心使用绿色能源：[http](http://www.hetzner.de/en/hosting/unternehmen/umweltschutz) ://www.hetzner.de/en/hosting/unternehmen/umweltschutz 。它是在虚拟服务器上托管的 Rails，但 SQL 数据库目前仅支持 PostgreSQL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T06:34:36.580

railscomplete.de[在德国提供 Rails 托管](http://railscomplete.de)- 在虚拟服务器和专用硬件上。

# ms-office - MS Visio - 插件（通过注册表禁用）

> ID：12592312
> 
> 赞同：0
> 
> 时间：2012-09-25T23:00:43.853
> 
> 标签：ms-office, visio

我正在使用 MS Visio 2007（在 Windows XP sp3 上）

我只是想知道是否有一个注册表项可以控制 COM 加载项的“打开和关闭”？我有一个插件，想为我的“一些”用户禁用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T23:12:07.440

是的，对于每个 COM 插件，都有一个相应的注册表项。

尤其是：

```
HKEY_CURRENT_USER\Software\Microsoft\Visio\AddIns\YourAddinName\LoadBehavior 
```

请参阅：http: [//msdn.microsoft.com/en-us/library/bb386106 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/bb386106(v=vs.100).aspx)

# sql-server-2005 - 如何在 SQL Server 2005 中指定特定的表列区分大小写

> ID：12592319
> 
> 赞同：-1
> 
> 时间：2012-09-25T23:01:48.143
> 
> 标签：sql-server-2005

```
 String dmlString="INSERT INTO table VALUES('Rxyz');
 SqlCommand comObj = new SqlCommand(dmlString, conObj);
                comObj.ExecuteNonQuery(); 
```

表-> Rxyz

如何验证它，作为 Rxyz（区分大小写）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T23:37:47.670

您可以将列的排序规则指定为区分大小写，例如

```
create table tbl (
str varchar(10) collate Latin1_General_CS_AS
) 
```

例子

```
insert tbl select 'Rxyz';
select * from tbl where str = 'rxyz';
select * from tbl where str = 'Rxyz';

Results

str
----------

(0 row(s) affected)

str
----------
Rxyz

(1 row(s) affected) 
```

但是，将此表列连接到不区分大小写的其他表时要小心。您将需要专门将 COLLATE 子句添加到列比较中。

# mumps - 我在哪里可以找到 Mumps 全局变量的实现细节？

> ID：12592322
> 
> 赞同：3
> 
> 时间：2012-09-25T23:02:02.290
> 
> 标签：mumps

我正在寻找 Mumps 全局实现的详细定义/讨论。有一个名为“MUMPS Globals 及其实施”的文档，但我找不到任何订购它的方法，更不用说访问数字副本了。（它是在 75 年印刷的）

一般来说，我试图找到对 Mumps 数据库内部结构的深入讨论。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T16:45:06.497

看一看Frank Brown的这篇论文，[*腮腺炎微型计算机系统的统一本地、全局和常规设计。*](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.12.8872)Brown 博士是 COMP Consultants Standard MUMPS 全球系统的设计师。我是执行者，在 8086 汇编中！是的，早在 1981 年。

它本质上是一个带有压缩键的简单[B 树。](http://en.wikipedia.org/wiki/B-tree)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T15:38:17.420

我假设数据库内部结构在各种 MUMPS 实现之间会有很大差异。所以，我认为你最好的选择是看看它是如何在开源 MUMPS 实现中完成的：

*   [GT.M](http://sourceforge.net/projects/fis-gtm/)
*   [腮腺炎 V1](http://sourceforge.net/projects/mumps/)
*   [腮腺炎-MDH](http://www.cs.uni.edu/~okane/source/MUMPS-MDH/)
*   [GUMP / FreeM](http://sourceforge.net/projects/gump/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T17:06:16.663

我不确定你在追求什么。Mumps 全局变量只是一个稀疏的多维数组。程序员可以自由地实施他们认为合适的数据库策略。例如，客户数据库可以实现为：

```
^CUSTOMER(custnum,"NAME")=name
^CUSTOMER(custNum,"ADDRESS")=address
^CUSTOMER(CustNum,"PHONE")=phone 
```

或者，客户数据库可以实现为：

```
^CUSTOMER(custNum)=name|address|phoneNum 
```

在这里，我使用了竖线字符“|” 作为客户记录中的分隔符。在大多数 mumps 实现中，记录字符串长度限制为 32k。

在关系意义上，可以将 CUSTOMER 全局视为一个表，其中 custNum 为键，名称、地址和电话为列。

类似的方案可用于订单表：

```
^ORDERS(orderNum)=date|invoiceNum|totalPrice 
```

要将客户与订单相关联，我们可以使用单独的全局：

```
^custOrders(custNum,orderNum)="" 
```

或者将它们添加到客户全局：

```
^CUSTOMER(custNum)=name|address|phone
^CUSTOMER(custNum,orderNum)="" 
```

甚至将这两个表合并为一个全局表：

```
^CUSTOMER(custNum)=name|address|phone
^CUSTOMER(custNum,orderNum)=date|invoiceNum|totalPrice 
```

使用的策略取决于开发人员，它非常灵活和强大。

除了您上面引用的文档之外，我还推荐其他一些文档。对于全局变量及其含义的一些基础知识，我建议：

[使用 MUMPS 全局变量进行极限数据库编程](http://gradvs1.mgateway.com/download/extreme1.pdf "使用 MUMPS 全局变量进行极限数据库编程")

对于更高级的主题，我建议：

[通用 NoSQL 引擎，使用久经考验的技术](http://www.mgateway.com/docs/universalNoSQL.pdf "通用 NoSQL 引擎，使用久经考验的技术")

这两份文件均由 Rob Tweed 撰写，他是[M/Gateway Developments](http://www.mgateway.com "M/网关发展")公司的一名腮腺炎传道者。第一个文档提供了有关腮腺炎全局变量的良好背景，第二个文档介绍了在包括 noSQL 在内的各种策略中使用它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T21:00:51.910

同意前面的回答；问题指向供应商认为专有的实施细节。对开源/历史版本有洞察力，但缓存和当前版本会随着它们的现代扩展能力而偏离。

# php - 使用未定义的常量

> ID：12592325
> 
> 赞同：0
> 
> 时间：2012-09-25T23:02:40.793
> 
> 标签：php

嗨，我有一段代码在我的服务器上使用了一段时间，但现在突然出现此错误：

> 使用未定义的常量国家 - 假定为“国家”

我已经阅读了之前的几篇文章，但是每次我尝试将这些更改应用于我的代码时都没有任何区别，所以我迷路了。错误指向此项目here

```
'{$ip[country]}' 
```

任何建议将不胜感激，我已阅读有关添加引号的信息，但是当我将它们应用于此时，它没有任何区别。

这是我的插入查询，如果我把这个变量拿出来就可以了。

```
 INSERT INTO ip_stats (ip, time, hostname, page, referer, string, agent, member,   server_name, company_name, company_address) VALUES ('$ip', '$time', '$hostname', '$page1','$request_uri', '$query_string', '$http_user_agent', '$member', '$server_name', '$netname, '{$ip[$country]}') 
```

这就是我生成变量的地方

```
 $country = implode( ", ", (array) $ip['country'] ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T00:21:04.030

尝试

`INSERT .... '$netname', '" . $ip[country] . "')";`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T23:31:03.643

您需要将它放在双引号中才能扩展 {} 表达式

```
"{$ip[$country]}" 
```

实际上，查看您的插入， $netname 缺少一个结束单引号

困惑时，只需使用常规字符串 concat

```
"INSERT ......... '$netname', '" . $ip[$country] . "')..." 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T23:05:59.463

或者`$ip[$country]`如果您想访问以变量 country 表示的键，而不是字符串 'country'

# webdriver - Webdriver 切换到覆盖窗口

> ID：12592327
> 
> 赞同：0
> 
> 时间：2012-09-25T23:02:50.183
> 
> 标签：webdriver, frame

Webdriver 无法在覆盖中定位对象。

我正在尝试切换到框架并单击框架中的对象。但我做不到。

我尝试了以下 HTML 中的所有“id”。但我没有找到它。

请帮我

下面是代码

```
driver.switchTo().frame(driver.findElement(By.id("fancybox-outer")));
driver.findElement(By.xpath(OR.getProperty("ContactSaveConfirmYes_Button"))).click();
driver.switchTo().defaultContent(); 
```

这是HTML：

我想单击此叠加层中的“是”按钮。

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<body onload="showLossHistoryLink();  contactTypeDisplay();openInsuredContact();showErrorMessages();checkInjuryFields();">
<div class="billboardWindow124">
<div id="fancybox-tmp" style="padding: 50px;"/>
<div id="fancybox-loading" style="display: none;">
<div id="fancybox-overlay" style="background-color: rgb(119, 119, 119); opacity: 0.2;  cursor: auto; height: 850px; display: block;"/>
<div id="fancybox-wrap" style="width: 319px; height: auto; top: 574px; left: 452px; display: block;"> 
<div id="fancybox-outer">
<div id="fancybox-bg-n" class="fancybox-bg"/>
<div id="fancybox-bg-ne" class="fancybox-bg"/>
<div id="fancybox-bg-e" class="fancybox-bg"/>
<div id="fancybox-bg-se" class="fancybox-bg"/>
<div id="fancybox-bg-s" class="fancybox-bg"/>
<div id="fancybox-bg-sw" class="fancybox-bg"/>
<div id="fancybox-bg-w" class="fancybox-bg"/>
<div id="fancybox-bg-nw" class="fancybox-bg"/>
<div id="fancybox-content" style="border-width: 10px; width: 299px; height: auto;">
<div style="width:auto;height:auto;overflow: auto;position:relative;">
<form id="formSaveContact" action="#">
<div id="confirmSaveContact" class="confirmSaveContact">
<p>Are you sure you want to save this contact?</p>
<input type="hidden" value="" name="policyType"/>
<input id="yesBtn2" type="image" src="img/eng-usa/button_yes.jpg" value="yes"/>
<input id="noBtn2" type="image" src="img/eng-usa/button_no.jpg" value="no"/>
</form>
</div>
</div>
<a id="fancybox-close"/>
<div id="fancybox-title" class="" style="display: none;"/>
<a id="fancybox-left" href="javascript:;">
<a id="fancybox-right" href="javascript:;">
</div>
</div>
<div id="ui-datepicker-div" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all ui-helper-hidden-accessible"/>
</body>
</html>** 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:12:12.383

```
@driver.switch_to.window( @driver.window_handles.last ){

@driver.find_elemnt(:id,name)
@driver.find_elemnt(:id,age)

@driver.find_elemnt(:id,eid)
@driver.find_elemnt(:id,company)

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T17:13:01.143

它对我有用......我不确定这是否适用于其他人......基于 UI 设计师。

叠加对象被视为驱动程序，而不被视为框架。

所以无需切换到框架并找出对象......而是无需切换即可找到对象。

阿里夫

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T06:47:52.117

我在输入 iframe 时遇到问题。如果 js 适合你，试试我的解决方案。

[网络驱动程序中的 IFrame。输入 RTE](https://stackoverflow.com/questions/12508125/iframe-in-webdriver-typing-in-rte)

# openssl - 使用 libcurl 时出现“_ERR_remove_thread_state”链接器错误

> ID：12592328
> 
> 赞同：0
> 
> 时间：2012-09-25T23:03:00.813
> 
> 标签：openssl, libcurl

1.  在这里获得 OpenSSL (Win32) [http://slproweb.com/products/Win32OpenSSL.html](http://slproweb.com/products/Win32OpenSSL.html)
2.  下载并编译了带有以下标志的 libCURL
    *   使用_SSLEAY；
    *   使用_OPENSSL；
    *   CURL_DISABLE_LDAP；
3.  在我的项目中包含头文件和库

...现在我得到了这个丑陋的错误。

```
1>libcurl.lib(ssluse.obj) : error LNK2001: Nicht aufgelöstes externes Symbol "_ERR_remove_thread_state".
1>C:\[...].exe : fatal error LNK1120: 1 nicht aufgelöste externe Verweise. 
```

我想这应该让我想起一个丢失的库，但我认为没有。谷歌结果不再帮助我。有任何想法吗？

问候曼努埃尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T11:31:51.330

对我来说，这看起来像是一个损坏的 openssl 包。ERR_remove_thread_state() 是在 1.0.0 中引入的，libcurl 源代码会检查版本，并且只在足够新的 openssl 上使用该函数...您可以在 curl/lib/ssluse.c 中轻松看到自己

# c - 使用 Cache-Line 对齐对 C 中全局共享状态的修改进行无锁检查

> ID：12592342
> 
> 赞同：10
> 
> 时间：2012-09-25T23:04:48.267
> 
> 标签：c, memory, memory-management, cpu-cache, false-sharing

编辑：ST 不允许为新手发布两个以上的链接。很抱歉缺少参考资料。

我正在尝试减少 C 应用程序中的锁定开销，其中检测全局状态的更改与性能相关。尽管我最近读了很多关于这个主题的书（例如，很多来自 H. Sutter 的书，等等），但我对自己的实施没有信心。我想使用类似*CAS*的操作和*DCL*的组合来检查*Cache-Line Aligned*全局变量，从而避免错误共享，以从多个线程之间共享的数据更新线程本地数据。我缺乏信心主要是因为

1.  我未能解释关于[类型属性的 GNU 文档](http://gcc.gnu.org/onlinedocs/gcc-4.7.2/gcc/Type-Attributes.html#Type-Attributes)
2.  我似乎无法找到任何可以轻松翻译为 C 的文献和示例，例如ST 或[1上](https://stackoverflow.com/questions/7281699/aligning-to-cache-line-and-knowing-the-cache-line-size)*的 aligning-to-cache-line-and-knowing-the-cache-line-size*（尽管*1*似乎可以回答我的问题有点我对我的实施没有信心）
**   我对 C 的经验有限*

 *我的问题：

1.  类型属性文档指出：

    > 此属性为指定类型的变量指定最小对齐方式（以字节为单位）。例如，声明：
    > 
    > （请参阅类型属性文档进行声明）
    > 
    > 强制编译器确保（尽可能地）每个变量的类型已经`struct S` 或`more_aligned_int`将被分配并至少在`8-byte`边界上对齐。在 SPARC 上，将所有类型的变量与边界`struct S`对齐`8-byte`允许编译器在将一个 struct S 类型的变量复制到另一个变量时使用 ldd 和 std（双字加载和存储）指令，从而提高运行时效率。

    这是否意味着开始`struct S`或`more_aligned_int`将始终与`8-byte`边界对齐？这并不意味着数据将被填充为正好使用 64 个字节，对吧？

2.  假设 1\. 的每个实例`struct cache_line_aligned`（参见下面的代码*示例 1*）在边界上对齐`64-byte`并恰好使用一个高速缓存行（假设高速缓存行的`64 bytes`长度）为真

3.  使用`typedef`类型声明不会改变的语义`__attribute__ ((aligned (64)))`（参见下面的代码*示例 2*）

4.  如果`aligned_malloc`struct 声明为`__attribute__ ...`

```
// Example 1
struct cache_line_aligned {
  int version;
  char padding[60];
} __attribute__ ((aligned (64)));

// Example 2
typedef struct {
  int version;  
  // place '__attribute__ ((aligned (64)))' after 'int version'
  // or at the end of the declaration 
  char padding[60];
} cache_line_aligned2 __attribute__ ((aligned (64))); 
```

最后是一个函数的草图，它使用缓存行对齐的方法来有效地检查全局状态是否已被其他线程修改：

```
void lazy_update_if_changed(int &t_version, char *t_data) {
  // Assuming 'g_cache_line_aligned' is an instance of 
  // 'struct cache_line_aligned' or 'struct cache_line_aligned2' 
  // and variables prefixed with 't_' being thread local 
  if(g_cache_line_aligned.version == t_version) {
    // do nothing and return
  } else {
    // enter critical section (acquire lock e.g. with pthread_mutex_lock) 
    t_version = g_cache_line_aligned.version
    // read other data that requires locking where changes are notified 
    // by modifying 'g_cache_line_aligned.version', e.g. t_data
    // leave critical section
  }
} 
```

对不起，很长的帖子。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T06:03:50.187

当您定义对齐类型时，例如，对齐到 8 字节边界，编译器应通过填充使该类型的大小成为对齐的倍数（此处为 8 字节的倍数）。

这样做的理由很简单。假设您要定义该对齐类型的数组。自然，它的每个元素也应该对齐。这就是为什么可能有填充。

这是一个小演示：

```
#include <stdio.h>

struct cache_line_aligned {
  int version;
//  char padding[60];
} __attribute__ ((aligned (64)));

int main(void)
{
  struct cache_line_aligned s;
  struct cache_line_aligned a[2];
  printf("sizeof(struct cache_line_aligned) = %d\n", (int)sizeof(struct cache_line_aligned));
  printf("sizeof(s) = %d\n", (int)sizeof(s));
  printf("sizeof(a[0]) = %d\n", (int)sizeof(a[0]));
  printf("sizeof(a) = %d\n", (int)sizeof(a));
  return 0;
} 
```

输出（[ideone](http://ideone.com/E3Zgz)）：

```
sizeof(struct cache_line_aligned) = 64
sizeof(s) = 64
sizeof(a[0]) = 64
sizeof(a) = 128 
```

如果你创建一个`struct cache_line_aligned`非动态的实例（IOW，不是via`malloc()`等），就像上面的代码一样，它会被对齐。

C 标准（从 1999 年开始）规定`malloc()`,`calloc()`和`realloc()`:

```
The pointer returned if the allocation succeeds is suitably aligned so that
it may be assigned to a pointer to any type of object and then used to
access such an object or an array of such objects in the space allocated
(until the space is explicitly deallocated). 
```

Where`any type of object`不包括像上述结构这样的人为对齐/填充类型，因为`__attribute__ ((aligned (64)))`在 C 标准中没有任何东西。这是这里的 GNU 扩展。对于具有任意对齐的动态分配的对象，您必须使用适当的内存分配函数或手动进行对齐（通过分配更多内存然后“对齐”指针值）。*

# ios - iOS6 上的 GKLocalPlayer 身份验证崩溃并出现模态转换错误

> ID：12592346
> 
> 赞同：6
> 
> 时间：2012-09-25T23:05:07.790
> 
> 标签：ios, ios6, game-center

我的应用会记录它是否成功通过 Game Center 的身份验证。当它开始一个新游戏或当用户查看分数列表时，如果本地玩家没有成功验证，并且如果应用程序当时没有尝试验证用户，它会再次尝试.

（为什么？如果您从无网络区域移动到网络区域。）

不幸的是，在 iOS6/XCode 4.5 下，它开始崩溃。或者至少在某些有限的情况下似乎是这样：当用户使用错误的密码和/或不存在的帐户无法登录时。成功登录后，一切正常。

在登录失败后，当我去做一些导致重新验证检查发生的事情时，我得到了这个：

> 2012-09-25 15:54:47.829 应用程序名称 [1493:907] *** 断言失败 -[UIWindowController 转换：fromViewController:toViewController:target:didEndSelector:]，/SourceCache/UIKit/UIKit-2372/UIWindowController.m:211

然后这实际上崩溃了：

> 2012-09-25 15:55:25.569 应用程序名称 [1493:907] *** 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“尝试开始从 <GKModalRootViewController: 0x1cd8b2a0> 到 <GKHostedAuthenticateViewController: 0x1e31a350> 的模态转换过渡已经在进行中。等待viewDidAppear / viewDidDisappear知道当前的过渡已经完成了” ***第一掷调用堆栈：（0x394932a3 0x31db297f 0x3949315d 0x383fd2af 0x3640377b 0x36402fcf 0x394969c4 0x393edfeb 0x36521733 0x32a83d2d 0x3264b11f 0x3264a4b7 0x3264f1bd 0x39466f3b 0x393d9ebd 0x393d9d49 0x353132eb 0x3636b301 0x7e863 0x7e808）的libc ++ abi.dylib：终止叫抛出异常

这是麻烦的代码：

```
-(void)authenticateLocalUser {

    if (!self.checkingLocalPlayer) {
        self.checkingLocalPlayer = YES;
        GKLocalPlayer *thisPlayer = [GKLocalPlayer localPlayer];

        if (!thisPlayer.authenticated) {

            [[GKLocalPlayer localPlayer]
             authenticateWithCompletionHandler:^(NSError *error)
             {
                 [self finishGameCenterAuthWithError:error];
             }
             ];
        }
    }
} 
```

知道我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T09:23:17.217

Ggrrrhhh 同样的问题，我想我找到了...ios6 已弃用 authenticateWithCompletionHandler 参见链接，建议您使用 AuthenticateHandler。

[http://developer.apple.com/library/IOS/#documentation/GameKit/Reference/GKLocalPlayer_Ref/Reference/Reference.html#//apple_ref/occ/instp/GKLocalPlayer/authenticateHandler](http://developer.apple.com/library/IOS/#documentation/GameKit/Reference/GKLocalPlayer_Ref/Reference/Reference.html#//apple_ref/occ/instp/GKLocalPlayer/authenticateHandler)

这似乎工作......

```
GKLocalPlayer *localPlayer = [GKLocalPlayer localPlayer];
[localPlayer setAuthenticateHandler:(^(UIViewController* viewcontroller, NSError *error) {

//[localPlayer authenticateWithCompletionHandler:^(NSError *error) { OLD CODE!
    if (localPlayer.isAuthenticated)
    {
        //do some stuff
    }
    else {

        UIAlertView *alertView = [[UIAlertView alloc]
                                  initWithTitle:@"NOT AUTHORISED"
                                  message:@"YOUR'RE NOT LOGGED INTO GC."
                                  delegate:self
                                  cancelButtonTitle:@"OK"
                                  otherButtonTitles:nil];
        [alertView show];

    }
})]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T19:31:31.703

Jamie West 正确地指出，问题在于 iOS6 中的 authenticateHandler 转换，这似乎导致 authenticateWithCompletionHandler: 损坏。由于它已被弃用，Apple 不太可能修复他们的错误。

这就是我需要的一切。注意检查 iOS5 版本的条件（同时支持 5 和 6）以及在发送视图控制器时调用视图控制器的需要（例如，authenticateHandler: 不是 authenticateWithCompletionHandler: 的直接替代： - 你必须做一些额外的工作）。

```
-(void)authenticateLocalUser {

    if (!self.checkingLocalPlayer) {
        self.checkingLocalPlayer = YES;
        GKLocalPlayer *thisPlayer = [GKLocalPlayer localPlayer];

        if (!thisPlayer.authenticated) {

#define SYSTEM_VERSION_GREATER_THAN_OR_EQUAL_TO(v)  ([[[UIDevice currentDevice] systemVersion] compare:v options:NSNumericSearch] != NSOrderedAscending)

            if (SYSTEM_VERSION_GREATER_THAN_OR_EQUAL_TO(@"6.0")) {

                [thisPlayer setAuthenticateHandler:(^(UIViewController* viewcontroller, NSError *error) {

                    if (viewcontroller) {
                        [self.delegate presentViewController:viewcontroller];
                    } else {
                        [self finishGameCenterAuthWithError:error];
                    }

                })];

            } else {

                [[GKLocalPlayer localPlayer]
                 authenticateWithCompletionHandler:^(NSError *error)
                 {
                     [self finishGameCenterAuthWithError:error];
                 }
                 ];
            }

        }
    }
} 
```

presentViewController: 函数只是从我的顶视图控制器中调用新的视图控制器（我必须在我的程序中手动计算才能使所有这些工作）：

```
-(void)presentViewController:(UIViewController *)thisVC {

    [myTopVC presentModalViewController:thisVC animated:YES];

} 
```

不幸的是，从 iOS6 开始，如果 GameCenter 在当前会话中已经被取消，它似乎不会尝试重新验证用户，所以至少我在适当时重新验证的一些观点已经消失。但是，它仍然适用于 iOS5（可能还有其他情况，而不是取消？）。

如果用户已经离开并做了其他事情，它*会*在应用程序从睡眠中被调用时尝试重新验证。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T00:50:42.440

我有完全相同的问题和类似的崩溃消息，上面的答案并没有解决问题。

```
2012-09-25 15:55:25.569 APP NAME [1493:907] * Terminating app due to uncaught exception
'NSInternalInconsistencyException', reason: 'Attempting to begin a modal transition from
<GKModalRootViewController: 0x1cd8b2a0> to <GKHostedAuthenticateViewController: 0x1e31a350>
 while a transition is already in progress. Wait for viewDidAppear/viewDidDisappear to know
the current transition has completed' 
```

对我来说真正引起问题的是我从 -(void)viewDidLoad 调用了 -(void)authenticateLocalPlayer。一旦我将调用移至 -(void) viewDidAppear，它就修复了所有问题，即使是不推荐使用的调用方式。（[参考这个问题](https://stackoverflow.com/questions/12612643/ios-6-game-center-crash-on-authentication)）

```
- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];

    //Setup Game Center Manager
    if ([GameCenterManager isGameCenterAvailable]) {  
        delegate.gameCenterManager = [[GameCenterManager alloc] init];
        [delegate.gameCenterManager setDelegate:delegate];
        [delegate.gameCenterManager authenticateLocalUser];
    } else {
        // The current device does not support Game Center.
    }

    //... more things if you have
} 
```

# amazon-ec2 - 使用自定义的私有 AMI 进行自动扩展

> ID：12592353
> 
> 赞同：4
> 
> 时间：2012-09-25T23:05:36.160
> 
> 标签：amazon-ec2, amazon-web-services

我正在尝试设置一个自动扩展配置文件来自动扩展我自己的云。我创建了一个私有 AMI 映像，我想将其用作在此配置中创建新服务器时启动的映像。我正在使用自动缩放命令行控件来创建配置文件，但我似乎无法让它工作：

```
$ as-create-launch-config MyServerConfig --image-id "ami-12345678" --instance-type m2.4xlarge --monitoring-disabled
as-create-launch-config: Malformed input-AMI ami-12345678 is invalid: The AMI ID 'ami-12345678' does not exist 
```

我已验证我使用的 AMI ID 实际上存在于我的 EC2 控制台的 EC2/Images/AMIs 部分中。我在这里做错了什么？由于公司的隐私要求，我需要将图像设为私有，但我确实需要设置自动缩放以使事情顺利进行。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-25T23:46:10.617

确保您的 AMI 和 AutoScaling 组位于同一区域，并且您在命令行中正确指定了该区域。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T12:13:18.413

这可能是由于错误的区域。默认情况下，它会查看 us-east-1 端点。您可以指定区域，如下所示 -

as-create-launch-config your_autoscale_config --region us-west-2 --image-id "your_image_id" --instance-type m1.small

要获取区域名称列表，请访问此 url

[http://docs.aws.amazon.com/general/latest/gr/rande.html#as_region](http://docs.aws.amazon.com/general/latest/gr/rande.html#as_region)

# android - 如何从另一个片段中隐藏进度对话框 - Android

> ID：12592355
> 
> 赞同：1
> 
> 时间：2012-09-25T23:05:39.517
> 
> 标签：android, progressdialog, android-fragmentactivity

我有三个选项卡（使用 Fragments/ViewPager/SupportLibrary/FragmentActivity）。

左侧选项卡在初始加载时使用 ProgressDialog。但我默认使用中心选项卡。然而，当我第一次进入此活动并登陆该中心选项卡时，选项卡 #1 中的 ProgressDialog 显示在选项卡 #2（中心）上。

有没有办法防止这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-25T10:18:45.600

我使用布尔值阻止了这种情况。我不认为这是一个非常干净的方式。只需在选择选项卡时将布尔值设置为 true 并仅在选择选项卡时执行异步任务。

所以在我的 MainActivity 我有一个 3 的数组

`public static boolean[] selected = new boolean[3];`（静态与我使用的外部类有关，在您的情况下可能不需要）

我用描述指出每个标签

```
public void onTabSelected(Tab tab, android.app.FragmentTransaction ft)
    {
        getSupportFragmentManager().popBackStack();
        if (tab.getContentDescription() == "tab1")
        {
            mViewPager.setAdapter(mAppSectionsPagerAdapter);   
            selected[0] = true;
            selected[1] = false;
            selected[2] = false;
            mAppSectionsPagerAdapter.notifyDataSetChanged();
        }
        if (tab.getContentDescription() == "tab2")
        {               
            mViewPager.setAdapter(mAppSectionsPagerAdapter);
            selected[0] = false;
            selected[1] = true;
            selected[2] = false;
            mAppSectionsPagerAdapter.notifyDataSetChanged();
        }
        if (tab.getContentDescription() == "tab3")
        {
            mViewPager.setAdapter(mAppSectionsPagerAdapter);
            selected[0] = false;
            selected[1] = false;
            selected[2] = true;
            mAppSectionsPagerAdapter.notifyDataSetChanged();
        } 
```

在片段中：

```
 if (MainActivity.selected[0])
    {
               // asynctask fragment
    } 
```

# vb.net - 在 xml 配置文件中使用注册表值

> ID：12592356
> 
> 赞同：0
> 
> 时间：2012-09-25T23:05:43.797
> 
> 标签：vb.net, connection-string

我的应用程序使用 xml 配置文件将以下连接字符串存储到程序中使用的数据库中（括号中的信息已针对本文进行了更改）。

```
<add name="VetDAR.My.MySettings.VDARSQLDBASEConnectionString" connectionString="Data Source=[DATASOURCE];Initial Catalog=[INITIAL CATALOG];User ID=[UID];Password=[PASSWORD]" providerName="System.Data.SqlClient" /> 
```

我的程序还使用注册表项来获取大量信息和程序设置。是否可以利用 xml 文件中此连接字符串中的注册表项中存储的数据库连接信息？即，如果我有一个数据源键值，我可以将上述连接字符串中的 [DATASOURCE] 替换为注册表值吗？

我知道如何在我的应用程序中的普通 vb.net 表单中执行此操作，但我不知道如何（或者甚至可能）从 xml 文件中调用注册表值。或者，是否可以覆盖 Visual Studio 的默认行为并强制数据集使用我可以调用注册表值的硬编码连接字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T04:40:47.817

如何从配置文件中获取 connectionString，并将其传递给您的数据库连接对象。

但是在将它传递给数据库之前，您需要替换需要替换的值。因此，您的连接字符串将显示为：

`Data Source=[DATASOURCE];Initial Catalog=[INITIAL CATALOG];User ID=[UID];Password=[PASSWORD]`

然后你传递给数据库：

```
Dim connString As String = GetConnectionStringFromXML()
MyDatabase.ConnectionString = connString.Replace("[UID]", GetRegistryValue("UID").Replace("[INITIAL CATALOG]",GetRegistryValue("DatabaseName")) 
```

……

# php - 寻找一个只有 php 的电子邮件地址混淆器功能

> ID：12592363
> 
> 赞同：9
> 
> 时间：2012-09-25T23:06:37.690
> 
> 标签：php, email, obfuscation

是否有仅 php 的电子邮件地址混淆器功能？在网上找到的大多数是 JS 和 PHP 的混合体。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-25T23:06:37.690

这是我使用的几个函数。

第一个使用 html 字符代码混淆电子邮件地址：

```
function getObfuscatedEmailAddress($email)
{
    $alwaysEncode = array('.', ':', '@');

    $result = '';

    // Encode string using oct and hex character codes
    for ($i = 0; $i < strlen($email); $i++) {
        // Encode 25% of characters including several that always should be encoded
        if (in_array($email[$i], $alwaysEncode) || mt_rand(1, 100) < 25) {
            if (mt_rand(0, 1)) {
                $result .= '&#' . ord($email[$i]) . ';';
            } else {
                $result .= '&#x' . dechex(ord($email[$i])) . ';';
            }
        } else {
            $result .= $email[$i];
        }
    }

    return $result;
} 
```

例子：

```
echo getObfuscatedEmailAddress('firstname.last-name@example.com');
-->
firstn&#x61;m&#x65;&#x2e;la&#115;t-name&#x40;examp&#108;e&#46;&#x63;om 
```

第二个将返回电子邮件地址为 html 和 url 编码的链接：

```
function getObfuscatedEmailLink($email, $params = array())
{
    if (!is_array($params)) {
        $params = array();
    }

    // Tell search engines to ignore obfuscated uri
    if (!isset($params['rel'])) {
        $params['rel'] = 'nofollow';
    }

    $neverEncode = array('.', '@', '+'); // Don't encode those as not fully supported by IE & Chrome

    $urlEncodedEmail = '';
    for ($i = 0; $i < strlen($email); $i++) {
        // Encode 25% of characters
        if (!in_array($email[$i], $neverEncode) && mt_rand(1, 100) < 25) {
            $charCode = ord($email[$i]);
            $urlEncodedEmail .= '%';
            $urlEncodedEmail .= dechex(($charCode >> 4) & 0xF);
            $urlEncodedEmail .= dechex($charCode & 0xF);
        } else {
            $urlEncodedEmail .= $email[$i];
        }
    }

    $obfuscatedEmail = getObfuscatedEmailAddress($email);
    $obfuscatedEmailUrl = getObfuscatedEmailAddress('mailto:' . $urlEncodedEmail);

    $link = '<a href="' . $obfuscatedEmailUrl . '"';
    foreach ($params as $param => $value) {
        $link .= ' ' . $param . '="' . htmlspecialchars($value). '"';
    }
    $link .= '>' . $obfuscatedEmail . '</a>';

    return $link;
} 
```

例子：

```
echo getObfuscatedEmailLink('firstname.last-name@example.com');
-->
<a href="mailt&#111;&#58;%66i&#37;72stna%&#54;d&#x65;&#46;&#37;6c&#x25;6&#x31;st&#x2d;name&#64;&#101;&#x78;&#x61;mple&#46;co&#109;" rel="nofollow">f&#x69;&#114;s&#x74;na&#109;e&#x2e;&#108;a&#x73;t-name&#64;e&#x78;ample&#46;co&#109;</a> 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-25T23:20:36.123

我的最爱：

**标记 + PHP**

```
<span class="rev"><?php echo strrev($email); ?> </span> 
```

**CSS**

```
.rev{
    direction: rtl;
    unicode-bidi: bidi-override;
} 
```

[小提琴](http://jsfiddle.net/4hHGu/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-11-25T23:46:45.617

这是另一种非常严格且不会导致[https://validator.w3.org错误的方法](https://validator.w3.org)

```
function obfuscate($email){
$encoded_email = '';
for ($a = 0,$b = strlen($email);$a < $b;$a++)
{
    $encoded_email .= '&#'.(mt_rand(0,1) == 0  ? 'x'.dechex(ord($email[$a])) : ord($email[$a])) . ';';
}
return $encoded_email;} 
```

然后添加到页面使用：

```
<a href="mailto:<?= obfuscate(CONTACT_EMAIL.'?subject=Hello!') ?>"><?= CONTACT_EMAIL ?></a> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-04T03:02:56.390

这是带有 PHP 7 类型提示的一个。

只需调用它`$this->obfuscateEmail($email);`

```
/**
 * @param string $email
 * @return string
 */
private function obfuscateEmail(string $email) : string
{
    $em   = explode("@", $email);
    $name = implode(array_slice($em, 0, count($em) - 1), '@');
    $len  = floor(strlen($name) / 2);

    return substr($name, 0, $len) . str_repeat('*', $len) . "@" . end($em);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-09T15:12:26.380

如果主机之前有一个字符，这是另一种方法：

```
/**
* @param string $email
* @return string
*/

private function obfuscateEmail($email)
{
    $em   = explode("@", $email);

    $name = implode(array_slice($em, 0, count($em)-1), '@');

    if(strlen($name)==1){
        return   '*'.'@'.end($em);
    }

    $len  = floor(strlen($name)/2);

    return substr($name,0, $len) . str_repeat('*', $len) . "@" . end($em);
} 
```

# eclipse - 如何强制为相同的输入打开第二个编辑器？

> ID：12592365
> 
> 赞同：5
> 
> 时间：2012-09-25T23:06:43.250
> 
> 标签：eclipse, eclipse-plugin

我正在编写一个 Eclipse 插件，它允许更轻松地为 Android 编辑资源。当用户单击项目内的任何 XML 资源文件时，将打开一个编辑器，允许一次编辑项目中的所有资源。

我想添加在单独的默认 Android 资源编辑器中打开同一文件的功能。我知道那个编辑器的 id，但我无权访问它的类。

调用 IDE.openEditor 什么都不做，因为已经为该文件打开了一个编辑器，即使我指定了另一个 Android 编辑器的 id。

如何强制 Eclipse 为相同的输入打开另一个编辑器？

另一方面，如果我只能访问它的 id 而不是它的类，是否可以在 MultiPageEditorPart 中嵌入另一个编辑器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T09:00:51.410

这些`IDE.openEditor`方法最后会调用相应的`IWorkbenchPage`方法来打开编辑器。

在您的情况下可能有用的方法是 `org.eclipse.ui.IWorkbenchPage.openEditor(IEditorInput, String, boolean, int)`

```
 /**
     * Opens an editor on the given input.
     * <p>
     * If this page already has an editor open that matches the given input
     * and/or editor id (as specified by the matchFlags argument), that editor
     * is brought to the front; otherwise, a new editor is opened. Two editor
     * inputs are considered the same if they equal. See
     * <code>Object.equals(Object)<code>
     * and <code>IEditorInput</code>. If <code>activate == true</code> the editor
     * will be activated.  
     * </p><p>
     * The editor type is determined by mapping <code>editorId</code> to an editor
     * extension registered with the workbench.  An editor id is passed rather than
     * an editor object to prevent the accidental creation of more than one editor
     * for the same input. It also guarantees a consistent lifecycle for editors,
     * regardless of whether they are created by the user or restored from saved 
     * data.
     * </p>
     * 
     * @param input the editor input
     * @param editorId the id of the editor extension to use
     * @param activate if <code>true</code> the editor will be activated
     * @param matchFlags a bit mask consisting of zero or more of the MATCH_* constants OR-ed together
     * @return an open editor, or <code>null</code> if an external editor was opened
     * @exception PartInitException if the editor could not be created or initialized
     * 
     * @see #MATCH_NONE
     * @see #MATCH_INPUT
     * @see #MATCH_ID
     * @since 3.2
     */
    public IEditorPart openEditor(final IEditorInput input,
        final String editorId, final boolean activate, final int matchFlags)
        throws PartInitException; 
```

您需要调用它并传递它，`MATCH_ID | MATCH_INPUT`以便在尝试确定是否应重用现有编辑器或创建新编辑器时将编辑器 ID 考虑在内。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T09:31:22.230

编辑器扩展点`org.eclipse.ui.editors`允许向扩展添加一个`matchingStrategy`。当 Eclipse 尝试确定给定 ID 和给定编辑器输入的编辑器是否已打开时，这使您能够影响行为。

实施相当容易。您只需提供 interface 的实现`org.eclipse.ui.IEditorMatchingStrategy`。它只有一种方法

```
boolean matches(IEditorReference editorRef, IEditorInput input); 
```

如果返回`false`这里，Eclipse 每次都会打开一个新的编辑器，即使编辑器 ID 和编辑器输入相等。

# sql - SQL 表矩阵

> ID：12592372
> 
> 赞同：-1
> 
> 时间：2012-09-25T23:07:39.723
> 
> 标签：sql, database, many-to-many, normalization

如果标题的术语不正确，请原谅我，我描述的是一个中间表，它可以在 2 个或多个表之间建立一种多对多的关系。

在这种情况下，单个表包含适用于其他不一定相互关联的表的数据。

具体是一个网站：

*   表 Pages 中的页面 A 和 B 属于站点 1。
*   表用户中的用户 A 也属于站点 1，但用户 B 属于站点 2

所以此刻的中间表是这样的：

```
id | site | page | user
-----------------------
 1 | 1    | A    | null
 2 | 1    | B    | null
 3 | 1    | null | A
 4 | 2    | null | B 
```

尽管这似乎成为许多问题的原因，但系统将得到完全规范化的数据库的支持，例如删除用户将删除矩阵中与其关联的任何记录，更新也会级联。

我知道这里的数据量可能会很高，这就是为什么它只用于链接包含 5-200 条记录的引用表。海量记录表（例如包含数千条记录和增长的帖子或媒体）连接到站点将被展平并直接存储站点 ID。

最后，我需要这样的解决方案的原因是因为我需要将元素分配给可自定义数量的站点，否则唯一的选择是：1 个站点、所有站点或没有站点。

所以我的问题是，这是一种有效的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T18:01:26.990

是的，您需要能够将页面/用户分配给多个站点。但是，这两者在其他方面并不相关（鉴于当前已知的要求）。即使他们是，也可能有更好的方式来展示任何关系。

无论出于何种原因，您似乎认为拥有规范化表不会启用关系；这是如何工作的。

```
UserSite
==========
userId  -- fk reference user.id
siteId  -- fk reference site.id 
```

元组 [ `userId`, `siteId`] 应该是唯一的。预计一个站点上会有很多用户，并且一个用户可能出现在多个站点上。这种关系将在用户和站点之间进行跟踪。想要为用户启用网站？将它们添加到此表中。想要为用户禁用网站？从这个表中删除它们（或有一个“禁用”列或类似的）。

您将需要一个*单独*的表来`PageSite`记录页面和站点之间的关系。除非您正在对关系进行其他操作- ，*否则*您不需要将它们放在同一张表中。`page``user`

# sync - 某些日历事件不会在 Jelly Bean 上同步？

> ID：12592374
> 
> 赞同：0
> 
> 时间：2012-09-25T23:07:51.870
> 
> 标签：sync, android-4.2-jelly-bean

在 Jelly Bean 之前，我有一个可以在任何版本的 android 上运行良好的应用程序。我已经把头发拔了好几天了。似乎我以编程方式创建并显示在我的设备上的事件拒绝发送到网络日历。看起来同步一般更快（因此更好），但它似乎坏了？？？是否必须在事件上设置任何内容以使其同步或防止其同步？

我问是因为我使用设备上的日历手动创建的事件 - 它们同步等。我以编程方式创建的新事件确实会触发设备上的 ChangeObserver 并显示在设备日历上，而不是远程显示。所以一定有一些魔法可以阻止这些事件被发送，从而节省带宽？？？——这是我可以想象的已添加到 Jelly Bean 中的优化。

如果您知道任何此类行为，请告诉我。如果没有，请让我知道在您参与的任何自定义应用程序中，Jelly Bean 上的同步是否正常工作。非常感谢您的帮助！

下一步将是构建一个可以演示此故障的小型测试应用程序。但我希望它更容易，你们中的一个人已经知道这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T23:24:22.790

这花了很长时间才找到。我希望它可以帮助别人。在添加一个事件时，我通常调用

```
ContentValues values = new ContentValues();
values.put(Events.DTSTART, startMillis);
values.put(Events.DTEND, endMillis);
values.put(Events.TITLE, title);
values.put(Events.DESCRIPTION, description);
values.put(Events.EVENT_LOCATION, location);
values.put(Events.CALENDAR_ID, mCalendarTag.mID);
values.put(Events.EVENT_TIMEZONE, TimeZone.getDefault().getDisplayName());
Uri uri = mContentResolver.insert(Events.CONTENT_URI, values); 
```

在果冻豆之前，这很好用。使用果冻豆，这条线：

```
values.put(Events.EVENT_TIMEZONE, TimeZone.getDefault().getDisplayName()); 
```

没有任何通知就失败了！这必须更改为：

```
values.put(Events.EVENT_TIMEZONE, TimeZone.getDefault().getID()); 
```

然后一切正常。真正的困难是使用 getDisplayName() 创建的事件是在本地创建的，但它永远不会远程同步。我当然希望其他人看到这一点，这可以节省他们几天的时间。

# mysql - MySQL：为什么不使用 zerofill 指定显示宽度

> ID：12592376
> 
> 赞同：8
> 
> 时间：2012-09-25T23:08:05.670
> 
> 标签：mysql, database, sqldatatypes

我最近深入研究了令人兴奋的 SQL 世界。我仍在尝试围绕这些概念进行思考。我一直在网上关注教程。这些教程中的许多都包含用于制作这样的表的 SQL。

```
CREATE TABLE `users` (
     `id` tinyint(4) NOT NULL AUTO_INCREMENT,
     `username` varchar(10) NOT NULL,
     `password` varchar(100) NOT NULL,
      PRIMARY KEY (`id`)
    ) ENGINE=MyISAM DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ; 
```

在看到像我这样的行之后，`id tinyint(4)`我想知道参数传递给数据类型的是什么。我想“这是否意味着 id 可以是 -128 到 127 之间的任何整数（不超过 4 个字符）？”

所以我查阅了文档。这就是[MySQL 文档对数字类型属性的看法](https://dev.mysql.com/doc/refman/5.0/en/numeric-type-attributes.html)。

> 显示宽度不限制可以存储在列中的值的范围。它也不会阻止正确显示比列显示宽度更宽的值。例如，指定为 SMALLINT(3) 的列的 SMALLINT 范围通常为 -32768 到 32767，超出三位数允许范围的值使用多于三位的数字完整显示
> 
> 当与可选（非标准）属性 ZEROFILL 结合使用时，空格的默认填充将替换为零。例如，对于声明为 INT(4) ZEROFILL 的列，值 5 被检索为 0005。

因此，如果我没看错的话，`INT(255)`除非您使用 zerofill，否则声明之类的东西是无用的。好的，您声明数据库为该数据库分配足够空间的数据类型是有道理的。

那么为什么人们会写这样的代码呢？它有目的吗？我完全误解了吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-23T23:24:29.880

这个额外的“功能”显示宽度非常令人困惑，因为在其他列类型中，比如`CHAR`is 指定了长度。

这是一个简短的细分：

*   最重要的是：它**没有**指定“存储空间”或“位数”。它只是说在返回之前如何**格式化该列中的数据。**INT(5) 可以存储与 INT(16) 或 INT(255)**相同**的值 - 这三个值都可以存储所有（且仅）对 INT 有效的值。INT(255) 不能存储 255 位数字。它们的存储空间都是一个INT占用的空间。
*   如果`ZEROFILL`在具有显示宽度的列上使用，并且存储的数字的字符串表示小于显示宽度，它将用零填充。如果它更长，则不会发生任何事情。如果选择 INT(5) 且值为 13，则返回 00013。如果值为 123456，则返回 123456。
*   如果您不使用`ZEROFILL`，则根本没有填充（没有空格等）
*   如果您使用`ZEROFILL`，您必须知道该列也将是`UNSIGNED`
*   无论如何，查询表格元数据时都会返回显示宽度。所以应用程序可以知道数据应该如何格式化。

我不喜欢显示宽度，因为存储层“知道”存储数据的视觉呈现。除此之外，我知道没有任何用处。

# uialertview - iOS6 UIAlertView.title 坏了？

> ID：12592377
> 
> 赞同：1
> 
> 时间：2012-09-25T23:08:07.147
> 
> 标签：uialertview, title, ios6

今天对我来说充满了惊喜......下面的简单代码不起作用。即使 NSLog 显示 title 属性与 if 条件匹配，它也不会进入 if 语句中的块。我今天要疯了......

```
-(void)alertView:(UIAlertView *)alertView willDismissWithButtonIndex:(NSInteger)buttonIndex
{
    NSLog(@"%@", alertView.title);

if (alertView.title == @"Warehouse") {
//.... never get in here even though NSLog above returns "Warehouse" 
```

编辑：我想通了。在这里回答这个问题，以防它帮助其他人。

显然，iOS 6 在比较字符串或其他东西方面更加严格。== 在 iOS 5 中可以正常工作，但在 iOS 6 中我不得不使用

```
if ([alertView.title isEqualToString:@"Warehouse"]) { 
```

然后它工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:46:07.873

你做得对，但有一个小问题 - 正确的代码将是 -

```
 -(void)alertView:(UIAlertView *)alertView willDismissWithButtonIndex:  
  (NSInteger)buttonIndex
    {
        NSLog(@"%@", alertView.title);

       if ([alertView.title isEqualToString:@"Warehouse"])

        {
          // Now it will go inside this condition
        }
   } 
```

现在它将为您工作。

# asp.net - 如何在回发时翻转面板的可见性？

> ID：12592380
> 
> 赞同：1
> 
> 时间：2012-09-25T23:08:11.973
> 
> 标签：asp.net, postback, panel, viewstate, visible

我有一个 asp.net 面板控件，我希望它出现在用户的所有其他页面加载中，所以我想我可以像这样更改 page_load 中的 Visible 属性：

panel.Visible = !panel.Visible。

但是，每次运行时，Visible 都会变回 true。面板的状态不是用视图状态维护的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T10:19:20.463

最后我使用会话状态来解决这个问题。

我在 session 中存储了一个 bool 来跟踪面板是否可见，然后在页面加载方法中将面板的 Visible 属性设置为与 session 中存储的相反。

# javascript - IE8 每次更改都会触发“onChange”

> ID：12592381
> 
> 赞同：0
> 
> 时间：2012-09-25T23:08:24.220
> 
> 标签：javascript, jquery, internet-explorer-8, jquery-events

我在工作中遇到了一个基本上有点像电子表格的网络应用程序的问题。我有一个带有一堆文本字段的表格，可以根据客户的要求复制“Excel”体验（为什么他们不能只使用 Excel 超出了我的范围，但这不是我要说的地方）

我认为通过让网络应用程序在输入数据时保存数据让我变得超级华丽（这样，忘记单击“保存”的用户很好，保存了。）由于 onChange 事件和 AJAX，这在所有主要浏览器中都能很好地工作来电（感谢jQuery！） 麻烦的是，我们必须支持IE8。这似乎只是`onChange`每隔一次应该触发一个事件。这意味着实际上只有第二个单元格被保存。

我做了一些研究，但找不到任何表明这是普遍现象的东西。所以我的问题是，IE8 一次只能处理一个 Javascript 吗？请记住，由于应用程序的行为类似于电子表格，因此用户会`onChange`非常迅速地引发事件（因此 AJAX 调用）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-01T19:41:13.003

您可以使用 keyup 事件，但每次击键都会保存单元格......也许使用 onblur？当细胞失去焦点时，你保存它！

# mysql - MYSQL：选择然后更新。双重处理问题

> ID：12592384
> 
> 赞同：3
> 
> 时间：2012-09-25T23:08:42.247
> 
> 标签：mysql, google-checkout

**问题：**

我正在构建一个谷歌结帐回调接口。我遇到的问题是谷歌同时将 2 个响应发送回站点，并且站点处理了这两个响应，所以我最终得到了 2 个更新。编写代码以检查条目是否存在，以及它是否没有根据需要插入或更新。

时间戳将是相同的，它将发布 2 笔交易。我在 Innodb 有数据库，但我将其更改为 MyISAM，希望它能解决问题。

**问题：**

是否可以选择 SQL 查询，然后根据条件进行更新。或者我还能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T23:13:28.983

您可以使用`EXIST`仅对`select`返回结果执行更新

```
 UPDATE TABLE1 SET col=`value` 
 where exists (select 1 from TABLE2 where condition) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T14:28:44.517

我认为您需要澄清“Google 同时发送 2 个响应”的含义。

我假设您指的是[Google Checkout API](https://developers.google.com/checkout/developer/Google_Checkout_XML_API_Processing#notification_api) - 如果是这样，Google 发送的每个*通知*都代表“某事”。您必须确定是什么`Notification`- 换句话说，您可能会根据您对 Google 发送的内容的看法“修复”一个不存在的问题（而不是注意到它们每个`Notification`都是不同的）。

嗯……

# php - 在 PHP 中检索和显示 RAW 数据？

> ID：12592385
> 
> 赞同：0
> 
> 时间：2012-09-25T23:08:55.137
> 
> 标签：php, curl

我正在使用 cURL 从服务器获取运输标签，它返回的部分数据应该是 RAW 格式。当我在浏览器中打印数据时，我会看到如下内容：

```
øøùžÌÏÀÏ3?ü?ðÏÏðÿÌ?ðyø†þ`x€g˜á™øøùžÌÏÀÏ3?ü?ðÏÏðÿÌ?ðyø†þ`x€g˜á™øøùžÌÏÀÏ3?ü?ðÏÏðÿÌ?ðyø†þ`x€g 
```

如何让它以 RAW 格式（即只有 1 和 0）正确显示？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T23:16:04.850

这是原始格式，只是解释为字符串。您想要的是读取字节并将每一位更改为它自己的字节。

我的第一种方法是将接收到的字符串拆分为单个字符数组，然后通过将 ord() 应用于每个元素来使其成为整数数组。然后，在遍历每个数字中的每一位时，将“0”或“1”添加到结果字符串中。

**编辑**：当您想将数据传递给另一个服务时，只需将这个字符串发送给他们。您是这样看的，因为您的输出将二进制数据解释为 UTF-8 字符串左右。但是该服务需要一个图像，因此他们会正确解释它。

# javascript - 使用 jquery 按值选择多选下拉菜单

> ID：12592389
> 
> 赞同：3
> 
> 时间：2012-09-25T23:09:26.653
> 
> 标签：javascript, jquery

今天早上我问了一个类似的[问题](https://stackoverflow.com/questions/12584387/select-a-dropdown-by-values-with-jquery)，如何按值而不是顺序选择下拉列表。

现在的问题是如何使用多选下拉菜单并按值而不是顺序选择选项。（例如，我想通过它们各自的主键 1 和 4 选择 a1 和 a3）

```
<select id="id_deals-sales_item" multiple="multiple">
  <option value="1">a1</option>
  <option value="2">a2</option>
  <option value="4">a3</option>
</select> 
```

按顺序排列的旧方法：

```
for (i=0; i<data[0].fields['sales_item'].length;i++)
    $('#id_deals-sales_item>option:eq(' + (data[0].fields['sales_item'][i]) + ')').prop('selected', true); 
```

我希望在这里使用 val() 应用相同的解决方案，但它不起作用。

```
for (i=0; i<=data[0].fields['sales_item'].length;i++)
    $('#id_deals-sales_item').val(data[0].fields['sales_item'][i]); 
```

我必须在这里应用不同的技巧吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T23:15:12.063

尝试这个

```
for (i=0; i<=data[0].fields['sales_item'].length;i++)
    $("#id_deals-sales_item option[value='" +data[0].fields['sales_item'][i] + "']").prop('selected', true);​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T23:16:33.013

那是因为您在每次迭代中都覆盖了先前选择的值，您应该将一个数组传递给该`val`方法，试试这个：

```
var vals = [];
for (i=0; i<=data[0].fields['sales_item'].length;i++) {
    vals.push(data[0].fields['sales_item'][i]); 
}

$("#id_deals-sales_item").val(vals); 
```

# javascript - 基于 HTML/Javascript 的 Metro 风格框

> ID：12592391
> 
> 赞同：4
> 
> 时间：2012-09-25T23:09:30.897
> 
> 标签：javascript, html, windows-8, microsoft-metro

我只是想知道是否有人知道那里有任何 JS 库，它们允许我创建一个网页，其功能类似于 Windows 8 Metro/现代 UI 面板（也根据可用的页面空间布局框）。基本上想在我的 Web 应用程序中制作一个 Metro 风格的菜单。

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T20:03:11.637

是的，有一个优秀的 MetroJS 可以处理平铺动画。但是由您来管理它们在页面上的显示。 [http://www.drewgreenwell.com/projects/metrojs](http://www.drewgreenwell.com/projects/metrojs)

工作出色！

我使用此应用程序在 Windows 应用商店中创建了我的应用程序 Tweaker，请查看社交类别中的免费试用版。所以它也适用于 Windows 8。

我有点失望的是，VariableSizedWrapGrid 控件在 WinJS 上不可用。这是您想要的控件，可以处理多个大小的图块并将它们整齐地包装在一起，不幸的是目前仅在 XAML 上可用。 [http://blog.jerrynixon.com/2012/08/windows-8-beauty-tip-using.html](http://blog.jerrynixon.com/2012/08/windows-8-beauty-tip-using.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T20:38:40.150

我正在使用 metroUI CSS ( [http://metroui.org.ua/windows8start.php](http://metroui.org.ua/windows8start.php) ) 并且喜欢它。简单的 html，由 CSS 样式化，许多功能，拖放 js 等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T16:32:58.837

我最近看到了这个并认为它非常棒：[http ://tholman.com/projects/tileJs/](http://tholman.com/projects/tileJs/)

当您单击窗口时，使用 HTML / CSS3 获得微妙的旋转窗口效果。那和 MetroJS 可以结合使用来获得你想要的效果。

让我知道你的决定，我打算自己做这样的事情！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T22:02:48.933

通常，您应该使用 Grid Application 项目。使用像 MetroJS 这样的第三方库意味着随着平台的发展，你会过时。

如果您曾经使用过 Photoshop 文件选择器，您就会知道为什么这是不可取的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T15:09:43.017

我建议您尝试 gridster.js 。这是它的演示[http://gridster.net/](http://gridster.net/)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-09T10:05:42.963

如果你是 Bootstrap 的粉丝，那么这个叫做[BootMetro](http://aozora.github.io/bootmetro/index.html)的你应该很熟悉。

# css - 带有白色文本的 CSS 灰色框

> ID：12592394
> 
> 赞同：0
> 
> 时间：2012-09-25T23:09:46.117
> 
> 标签：css

HTML 新手，我正在做一个课程项目。这是我所做的：

```
<font style="background-color: grey; color: white; display: block">Black and white copies $.10 per page letter/legal size</font>

 Color copies $.99 per page letter/legal size<br>

<font style="background-color: grey; color: white; display: block">Transparencies $1.98 per page full color</font>

Transparencies $.61 per page black and white<br> 
```

它在浏览器中测试良好，但是当我去验证文件时，WC3 验证器给我一条错误消息：*“第 33 行和第 37 行，第 71 列：字体元素已过时。改用 CSS。”*

如何将灰色框/反向文本写入我的 CSS 页面？

感谢您的任何帮助！格雷格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T23:13:26.517

使用块标签替换字体标签 - 使用`<div>`和删除`display:block`，因为它变得无用

# ruby - 在 ruby 中组合多个音频文件

> ID：12592402
> 
> 赞同：4
> 
> 时间：2012-09-25T23:10:59.390
> 
> 标签：ruby, audio

我正在尝试在 ruby​​ 中组合两个或多个音频文件。我不需要连接文件，而是合并或合并它们。例如，如果我有一个音频文件是一首歌的吉他部分，一个音频文件是贝司部分，我想合并这两个文件，并有一个包含吉他和贝司部分的文件。

这可能吗，如果可以的话，有人能指出我正确的方向吗？谷歌搜索没有多大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-29T16:59:31.453

存在`sox`可以帮助您的 Unix 工具。不幸的是，没有好的 ruby​​ 包装器。我发现两个已经过时了：

*   [https://github.com/afhbl/rsox](https://github.com/afhbl/rsox)
*   [https://github.com/Beirdo/sox-ruby](https://github.com/Beirdo/sox-ruby)

在 shell 中，您可以轻松地将这些文件与 sox 命令合并，如下所示：

> sox -m ./bass.mp3 ./guitar.mp3 ./rock-n-roll.mp3

因此，您可以通过包装 shell 命令在 Ruby 中执行此操作，例如：

```
def merge_sounds(file1, file2, output_file)
  system "sox -m #{file1} #{file} #{output_file}"
end 
```

# jsf-2 - 从操作方法结果调用页面时未调用 JSF 2 Prerenderview 侦听器

> ID：12592405
> 
> 赞同：4
> 
> 时间：2012-09-25T23:11:26.100
> 
> 标签：jsf-2, facelets, managed-bean

我在 f:metadata 元素中使用预渲染视图事件从另一个页面调用页面。

如果我使用它导航到页面`<h:link>`并调用侦听器方法。

但是，如果我使用属于调用页面的托管 bean 的操作方法的结果导航到该页面，则不会调用 prerenderview 中指定的侦听器（就像通过链接调用时一样）。它确实导航到第二页，只是没有侦听器调用。

我真的更喜欢从 action 方法调用，因为我用它来做一些工作，并在会话映射中放置一个变量供被调用页面使用。我不确定如何使用链接来实现相同的目的。该对象可能相当大...... kb 不是 Mb 但仍然不是我想放入请求中的东西。

我已经尝试使调用页面请求的托管 bean 范围和视图范围。

如果从托管 bean 结果调用 prerenderview 是否不可能触发它？正如我所说，我通过链接让它工作。

```
<body>
    <ui:define name="metadata">
        <f:view>
            <f:metadata>
                <f:event type="preRenderView" listener="#{businessBean.init}" />
            </f:metadata>
        </f:view>
    </ui:define>
    <ui:composition template="#{navigationprops.soulard_2col_uprefs_template}"> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T01:31:33.057

ui:composition 标记修剪它之外的所有内容，因此 facelets 编译器没有机会读取代码。相反，您应该使用 ui:decorate，但请记住 f:metadata 标签仅适用于顶级页面，而不适用于模板客户端。例如：

```
<ui:composition 
xmlns="http://www.w3.org/1999/xhtml"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core">
<f:metadata>
    <f:viewParam name="hotid" 
       value="#{hotelBooking.hotelId}" 
       converter="javax.faces.Long"/>
    <f:event type="preRenderView" listener="#{hotelBooking.selectHotel}"/>
</f:metadata>
<ui:decorate template="template.xhtml">
   <ui:define name="content">
   <!-- ... -->
   </ui:define>
</ui:decorate>
</ui:composition> 
```

有关详细信息，请参阅[此示例](https://github.com/lu4242/performance-comparison-java-web-frameworks/blob/master/perfbench-code/myfaces-jpa/src/main/webapp/hotel.xhtml)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T06:19:22.873

我尝试了另一个答案，这是我唯一要做的事情......那就是通过以编程方式调用重定向来模仿动作方法中的链接。

```
public void editArticle(Article article) {
    FacesContext fcontext = FacesContext.getCurrentInstance();
    ExternalContext context = fcontext.getExternalContext();
    Map<String, Object> sessionMap = context.getSessionMap();
    sessionMap.put("articleId", article.getArticleId());
    String urlString = navBundle.getString("ARTICLE_EDITOR");
    String url = context.encodeActionURL(fcontext.getApplication().getViewHandler().getActionURL(fcontext, urlString));
    try {
        context.redirect(url);
    } catch (IOException ex) {
        ELSLogger.LOG(Level.SEVERE, this.getClass().getName(), "checkEligableToLogin", "Couldn't Redirect to: " + url);
    }
} 
```

现在事实证明我改变了预渲染视图的想法，但这已经完成并且可以工作，所以我稍后会重构。但是，如果有人想查看将从支持 bean 以编程方式调用另一个页面的工作代码，这里就是。FWIW，“ARTICLE_EDITOR”是一个变量，包含一个从上下文根开始的 url。

# c++ - 通过 id 实现 hash_map & vector 的遍历和访问

> ID：12592406
> 
> 赞同：0
> 
> 时间：2012-09-25T23:11:28.613
> 
> 标签：c++, vector, hashmap

我正在设计我的程序的核心，并且有各种实体，我目前循环调用`update()`. 我有大约十个`vector`包含我的对象的 s，尽管将来这可能会增长到更大的数量。我刚刚意识到我需要通过`id`相当定期的方式查找这些，所以我不得不遍历所有元素以查找正确的 id。

我正在考虑创建一个`hashmap`包含`id`以及指向对象本身的指针。这是最有效的方法吗？id 是半随机的，尽管它们只会在整个程序中增加，每个列表中的每个元素都有一个唯一的 id（每次分配一个 id 计数器都会增加）。向量中的元素现在经常被删除和添加。除了在 java 中的一小部分之外，我对 hashmap 的工作并不多，所以我不确定这是否是一条有效的途径。我相信代码仍然是可读的，但是除了 hash_map 之外还有什么更适合这个的选项吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T23:19:22.533

我不知道为什么你有 10 `vector`s - 如果对象可以存储在一个 sorted`vector`中，你可以`binary_search`用来查找对象（记住在每次插入后对其进行排序）。

当然，这`hash_map`也可以，但以空间/内存为代价。

# javascript - 为背景图像设置动画，将 Y 位置保持在 0px

> ID：12592407
> 
> 赞同：1
> 
> 时间：2012-09-25T23:11:30.203
> 
> 标签：javascript, jquery, jquery-animate

我有一组代码通过操作 BackgroundPosition 来为容器的背景图像设置动画。

我一生都无法弄清楚如何将 Y 位置保持在 0px，因为我当前的代码默认为 %50。（意思是我得到背景位置：动画值，%50；）

```
Animate: function (target) {
    $('#wrapper').animate({ backgroundPosition: (((width / 10) * -1) * targetIndex) }, currentDuration, easing);
}, 
```

我需要改变什么？

# netsuite - NetSuite SuiteScript 修改文件柜中的文件

> ID：12592408
> 
> 赞同：3
> 
> 时间：2012-09-25T23:11:33.403
> 
> 标签：netsuite

我们在 NetSuite 文件库中有需要更新的文件（url 字段已更改）。我在此站点上找到了注释的文章，但没有执行请求的代码示例。它表示使用 nlapiLoadFile 和 nlapiSubmitFile 调用；有人可以提供代码示例吗？

链接： [Netsuite Suitescript 可以修改文件柜中的文件吗？](https://stackoverflow.com/questions/1765886/can-netsuite-suitescript-modify-a-file-in-the-file-cabinet)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T15:45:16.753

是的，这似乎有点奇怪。我找到的唯一方法是：

1.  加载文件
2.  使用以下命令创建文件句柄：
    *   将文件名设置为您想要的名称。
    *   将内容设置为预期的内容
3.  设置文件夹并提交。

***我附上了一个代码片段***

```
    var 文件 = nlapiLoadFile(file_id);
    var 内容 = file.getValue();
    content = '...把你的内容...';
    文件 = nlapiCreateFile(file.getName(), '文件类型', 内容);
    file.setFolder(required_folder_id);
    nlapiSubmitFile(文件);

```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-21T09:06:30.553

编辑现有文件没有特殊的 API 功能，您可以获取现有文件的详细信息并创建一个具有相同详细信息的新文件，但仅更改数据字段并删除旧文件。

```
var start = function(request, response)
{
    var fileId = "107524";//get the existing file id
    var file = nlapiLoadFile(fileId);
    var data = file.getValue();
    var name = file.getName();
    var folderId = file.getFolder();
    var fileType = file.getType();
    nlapiDeleteFile(fileId);//delete the older file

    data += ",this is the appended data";//change the data
    var newFile = nlapiCreateFile(name, fileType, data);//create a new file with the same details
    newFile.setFolder(folderId);
    nlapiSubmitFile(newFile);//submit it
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T22:59:59.100

你的意思是文件而不是字段？如果您使用 nlapiLoadFile(/path/file)，则可以使用 getURL() 提供指向该文件的链接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-23T13:31:04.067

NetSuite 没有 API 的编辑文件类型。您必须加载原始文件，根据需要修改内容，然后通过在同一文件夹中创建具有相同文件名的新文件来提交该数据。这只是覆盖现有文件。

这是代码示例：

```
var original = nlapiLoadFile(FILE_ID_OR_FILE_PATH_IN_FILE_CABINET);
var originalContent = original.getValue(); //Return the value (base64 encoded for binary types) of the file

var updated = nlapiCreateFile(original.getName(), FILE_TYPE, UPDATED_FILE_CONTENTS);
updated.setFolder(original.getFolder());
nlapiSubmitFile(updated); 
```

# php - 获取页面标题和 URL 并在 HTML 中回显

> ID：12592410
> 
> 赞同：-1
> 
> 时间：2012-09-25T23:11:37.257
> 
> 标签：php

我正在尝试动态抓取页面的标题和 URL 并`echo`转换为 HTML。这是我所拥有的：

```
<ul>
    <li><a href="mailto:?Subject=<?php echo $page_title?>&body=<?php echo "http://" . $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI']; ?>" class="email" title="Email">Email</a>
    </li>
</ul> 
```

网址成功`echos`，但我不确定这是否正确？而且我不知道如何通过打印页面标题`<?php echo $page_title?>`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T23:15:24.497

没有对应于页面的全局 PHP 变量`<title>`。除非您之前使用该`$page_title`变量来指定`<title>`...

```
<?php $page_title = "My Page Title"; ?>
<title><?php echo $page_title ?></title> 
```

...`<?php echo $page_title?>`不会做任何特别的事情。

如果您确实`$page_title`以这种方式使用了变量，则可能需要对数据进行编码。它应该按照 URI 编码和 HTML 编码的顺序进行。

```
<a href="mailto:?Subject=<?php echo htmlentities(urlencode($page_title)); ?>" class="email" title="Email">Email</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T23:14:48.687

`$page_title`只是一个变量。如果你定义它，那么它会回显。您可能希望`<title><?php echo $page_title?></title>`在您的`<head>`, 中再次假设您实际定义了该变量。

PHP 不是某种神奇的力量，它是一种编程语言，因此它会按照您的指示去做。

# jquery - jquery中的可搜索下拉/选择

> ID：12592415
> 
> 赞同：1
> 
> 时间：2012-09-25T23:12:09.967
> 
> 标签：jquery, select, drop-down-menu, searchable

我有一个可搜索的下拉列表 ( [http://jsearchdropdown.sourceforge.net/](http://jsearchdropdown.sourceforge.net/) ) 选择器。我用 jquery 动态填充了数据库中的选项。但是，当我更改类别时，它会保留以前的项目。（所以当我从类别 1-3 切换到类别 4-6 时，有选项 1-6）如果我尝试不使用此脚本，一切正常（但无法搜索）。我尝试 `$(this).empty() and $("<select/>").empty()`了源代码中的每个位置，以清空列表，但没有有用的结果。因此，当我初始化搜索插件时，它应该首先清除`<select>`. [http://jsfiddle.net/cociweb/RjVwh/3/](http://jsfiddle.net/cociweb/RjVwh/3/)

我应该在哪里将`$("<select/>").empty();`或类似的东西放入[searchabledropdown-1.0.7.src.js](http://jsearchdropdown.sourceforge.net/jquery.searchabledropdown.js)？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T01:40:12.617

使用这样的东西

`$('select option').remove()`;

这将清除所有选项。在此之后添加新值。

# javascript - SVG 元素的 outerHTML

> ID：12592417
> 
> 赞同：23
> 
> 时间：2012-09-25T23:12:21.713
> 
> 标签：javascript, dom, svg, outerhtml

为什么我们不能获得带有`element.outerHTML`属性的 svg 元素的 outerHTML？

这种方式是获取 svg 源代码的最佳[http://jsfiddle.net/33g8g/吗？](http://jsfiddle.net/33g8g/)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-12-13T05:39:49.780

SVGElements 没有 outerHTML 属性。

您可以在纯 Javascript 中这样定义

```
Object.defineProperty(SVGElement.prototype, 'outerHTML', {
    get: function () {
        var $node, $temp;
        $temp = document.createElement('div');
        $node = this.cloneNode(true);
        $temp.appendChild($node);
        return $temp.innerHTML;
    },
    enumerable: false,
    configurable: true
}); 
```

或者单行 jQuery 解决方案将是

```
$('<div>').append($(svgElement).clone()).html(); 
```

参考： [https ://gist.github.com/jarek-foksa/2648095](https://gist.github.com/jarek-foksa/2648095)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-07-15T15:54:00.080

这是一个更简单的解决方案，它在 FF、Chrome、IE 中运行良好。荣誉归[Philipp Wrann](https://stackoverflow.com/users/2524323/philipp-wrann)。

[outerHtml 在 IE 中不起作用](https://stackoverflow.com/questions/29888050/outerhtml-is-not-working-in-ie#answer-44943988)

```
new XMLSerializer().serializeToString(document.querySelector('#b')) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-12-13T13:13:09.753

**2013 年更新：**根据[DOM Parsing 规范](http://domparsing.spec.whatwg.org/#dom-element-innerhtml)，svg 元素也将支持`innerHTML`和。`outerHTML`

已在 Blink/Chrome 中发布了一个补丁，很快就会提供，请参阅[http://code.google.com/p/chromium/issues/detail?id=311080](http://code.google.com/p/chromium/issues/detail?id=311080)。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-09-16T16:02:36.790

它不能通过 outerHTML 访问，因为 SVG 不是 HTML——它是一个单独的[XML 规范](http://en.wikipedia.org/wiki/Scalable_Vector_Graphics)。

这就是为什么，例如，该示例中的 svg 节点定义了自己的命名空间 ( `xmlns="http://www.w3.org/2000/svg`)。

您的示例对于一次性查询可能是最方便的，但实际上可以使用本机属性进行挖掘。只是需要更多的工作。

让我们使用链接的示例节点：

```
 <svg xmlns="http://www.w3.org/2000/svg" version="1.1">
    <text x="0" y="15" fill="black">An SVG element.</text>
</svg> 
```

如果要提取名称空间和版本，请使用该`attributes`属性。

```
var svgElement = $('svg')[0]; // using your example
console.log(svgElement.attributes.xmlns); // outputs "http://www.w3.org/2000/svg"
console.log(svgElement.attributes.version); // outputs "1.1" 
```

如果要提取实际内容，请遍历子项。与上述类似，非文本节点的`attributes`集合将包含 x/y 值（等）。

不使用 jQuery，再次使用您的示例：

```
for (var i = 0; i < svgElement.childNodes.length; i++) {
    var child = svgElement.childNodes[i];
    if (child.nodeType == 1) {
        console.log(child.attributes[0].name); // "x"
        console.log(child.attributes[0].value); // "0"
        console.log(child.attributes[1].name); // "y"
        console.log(child.attributes[1].value); // "15"
    }
} 
```

这是一个更新的小提琴，更优雅地展示了可能性：http: [//jsfiddle.net/33g8g/8/](http://jsfiddle.net/33g8g/8/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-15T12:30:39.193

使用 jQuery，您可以轻松地在任何不支持 outerHTML 的元素周围创建一个临时 HTML 包装器：

```
function wrappedHtml(elt){
    var wrapped = elt.wrap("<wrap></wrap>").parent().html();
    elt.unwrap();
    return wrapped;
} 
```

# java - 如何在自定义 JUNG 布局中初始化顶点位置？

> ID：12592419
> 
> 赞同：0
> 
> 时间：2012-09-25T23:12:31.517
> 
> 标签：java, jung

如何使用事先已知的顶点位置初始化新布局？

我创建了一个自定义的 JUNG 布局类：

```
public class CustomLayout extends AbstractLayout {

    AbstractLayout subLayout = null;

    final int WIDTH = 500;
    final int HEIGHT = 500;

    public CustomLayout(Graph<Vertex, Edge> graph, Transformer<Vertex, Point2D> init) {
        super(graph, init);

        for (Vertex v : this.getGraph().getVertices()) {
            // Assign each vertex a random initial position.
            setLocation(v, new Point2D.Double(random * WIDTH, random * HEIGHT);
        }

        subLayout = new FRLayout(this.getGraph(), ...?, null);
        // How do I pass each vertices prior positions?

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T23:21:30.540

这就是初始化程序 ( `Transformer<V,Point2D>`) 的用途。这个转换器应该返回你传入它的任何顶点的初始位置。我看到 FRLayout 在其构造函数中不接受初始化程序，但看起来你可以调用`setInitializer()`.

在回答您的问题时，`Transformer`是一个通用接口，当给定输入时，会产生相应的输出。实现可以是任何你想要的。它可以提供一组静态定义的位置，或者即时计算位置。这为您提供了很大的灵活性。

您可能会注意到该接口与 具有传递相似性`Map<K,V>`，实际上可以按如下方式制作一个非常简单的包装器实现：

```
 public class MapTransformer<K,V> implements Transformer<K,V> {

    private final Map<K,V> map;

    public MapTransformer(Map<K,V> map) {
      this.map = map;
    }

    public V transform(K key) {
      return map.get(key);
    }

  } 
```

因此，您可以将您的位置放在地图中，然后将该地图包装在上面`MapTransformer`。

# javascript - 可以启动全屏 iframe 小部件吗？比。嵌入式？

> ID：12592420
> 
> 赞同：0
> 
> 时间：2012-09-25T23:12:36.380
> 
> 标签：javascript, html, css, iframe, cross-domain

我需要一个自定义小部件到我的应用程序网站的用户中，最初认为 iframe 会使其变得如此简单，原因如下：

1.  我可以使用为应用程序构建的自定义框架，它提供了大量预构建的代码和功能，我将在小部件中使用这些代码和功能，因此不必重新创建。跨浏览器事件处理程序和原型对象只是众多示例中的一小部分。
2.  我不必担心与 CSS 发生冲突，更具体地说，不必为我创建的每个 dom 元素使用内联 css。
3.  跨域请求不是问题，因为我已经为需要使用 jsonp 进行通信的所有内容构建了功能，所以不要让它成为嵌入式 dom 小部件的缺点。

目前的想法是编写一个快速的 javascript 片段，它本质上是一个按钮，并在全屏窗口上方加载一个透明的 iframe。这将使我能够控制整个视图，并允许我像编写父应用程序的任何其他部分一样编写小部件。保持相同的 json 通信，使用相同的样式，使用框架等。单击 iframe 中不属于小部件的任何部分（可能会在屏幕中间加载，如果打开，则为全屏移动设备）将关闭小部件并使用户恢复到他们在网站内的正常导航。但是，他们可以在我的小部件启动时与它进行交互，就像它是网站的嵌入部分，恰好加载了一个 javascript 弹出窗口。

小部件本身与服务器进行了大量的通信。加载时有一些请求，然后当用户交互时，它通常会发送一个请求，更改视图，然后等待另一个响应。

说了这么多，这是一个坏主意，还是不专业的主意？我是否应该将额外的工作直接嵌入到主机 DOM 中并重写所有方便的框架代码？我这样做没有问题，但如果 iframe 是一个更合适的选择，那么我想我宁愿这样做。我唯一的限制是我需要支持到 IE8，当然，小部件需要在桌面和移动设备上都可以查看，并且小部件不能对客户网站造成干扰。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T03:52:22.437

来自另一篇文章的一些好读物。尽管已关闭，但它提出了一些支持 iframe 的体面的论据。

[为什么开发人员讨厌 iframe？](https://stackoverflow.com/questions/1081315/why-developers-hate-iframes)

引起共鸣的几点：

1.  Gmail、live.com、Facebook 互联网上的任何其他主要网站都利用 iframe 并在正确使用它们的情况下......这就是它们的目的。
2.  在特别像我这样的情况下，它被认为是一种更好的做法，可以防止与我无法控制的远程网站出现任何可能的兼容性问题。我宁愿使用 iframe，还是销毁个人网站？当然，我可以采取所有可能的预防措施，并且实际上在另一个人的网站上引起问题的可能性很小，但是使用 iframe 是不可能的。因此，为什么它们首先被创建。
3.  在我的情况下，搜索引擎优化并不重要。我只是将 javascript 应用程序扩展到远程用户网站，而不是提供可搜索的内容。

基于以上原因，我认为采用更简单的方法实际上是更专业的选择。iframe 通常有一点误解，我认为是因为它们过去以丑陋的方式过度使用，但是表格也有同样的误解，不管你信不信，当数据最好以表格方式显示时，它使感觉使用...等待它...表。尽管我们在诸如 display: table-cell 之类的 css 值后面执行此操作。

现在 iframe 得到我的投票。如果在这个项目的开发道路上再往前走一点，我会更新这个答案，我会改变主意。

# cocos2d-iphone - 在 xcode 中禁用 Apple mach-o 链接器错误

> ID：12592421
> 
> 赞同：0
> 
> 时间：2012-09-25T23:12:59.860
> 
> 标签：cocos2d-iphone, compiler-errors, xcode4.5, kobold2d

是否可以禁用 xcode 检查苹果 mach-o 链接器错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T05:41:33.843

您可以做的是确保添加所有必要的框架并在必要时导入它们，并且在构建阶段下的编译源下检查您的类文件是否包含在其中，而 Mach-o-linker 永远不会挡你的道。

# ruby-on-rails-3 - rails slice-我做错了什么？

> ID：12592428
> 
> 赞同：0
> 
> 时间：2012-09-25T23:13:37.413
> 
> 标签：ruby-on-rails-3

我在控制台中执行以下操作：

```
 1.9.3p194 :062 > @user = [name: "Joe", age: "17"]
 => [{:name=>"Joe", :age=>"17"}] 

 1.9.3p194 :063 > @user.slice(:name)
 TypeError: can't convert Symbol into Integer 
```

为什么 slice 不返回 [name: "Joe"]？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T23:22:14.897

您正在将哈希嵌入到数组中！

试试这样：

```
@user = {name: "Joe", age: "17"}
@user.slice(:name) 
```

要获取仅包含 name 和 id 的数组`User.all`：

```
array = User.all.map { |u| u.attributes.slice(:name, :id) } 
```

`map`执行您在每个元素的代码块中提供的内容`u`并用它构建一个数组，该数组被返回并放入`array`上面示例中的变量中。

`u.attributes`给出一个包含 User 实例的 User 模型的所有属性的 Hash ... 保存在数据库中的所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T14:35:01.630

根据提供的有限信息，我不确定您为什么需要数组操作的开销。考虑改用 OStruct。

[http://www.ruby-doc.org/stdlib-1.9.3/libdoc/ostruct/rdoc/OpenStruct.html](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/ostruct/rdoc/OpenStruct.html)

您提供的示例在 OStruct 中将如下所示：

```
require 'ostruct'
@user = OpenStruct.new
@user.name    = "John Smith"
@user.age     = 17

puts @user.name     # -> "Joe"
puts @user.age     # -> 17 
```

没有切片和干净、快速执行的 Ruby 代码。

# objective-c - 导航栏中的自定义字体截断使用分号而不是省略号

> ID：12592429
> 
> 赞同：0
> 
> 时间：2012-09-25T23:13:42.807
> 
> 标签：objective-c, ios, uinavigationcontroller, uilabel, uinavigationitem

我正在尝试自定义导航栏上的字体。一切都很好，除了某种原因，当导航栏的标题太长时，它给了我一个分号而不是省略号（...）

如何让 ... 显示标题已被截断？

```
 UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(0, 20, 240, 24)];
    label.backgroundColor = [UIColor clearColor];
    label.font = [UIFont fontWithName:@"My Font" size:20.0];
    label.numberOfLines = 1;
    label.lineBreakMode = NSLineBreakByTruncatingTail;
    label.textAlignment = UITextAlignmentCenter;
    label.textColor =[UIColor whiteColor];
    label.text=@"Some Really Long Title Name That's Normally Dynamic";
    self.navigationItem.titleView = label; 
```

所以我想让导航栏说“一些非常长的标题......”但是它一直在说“一些非常长的标题；”

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T23:25:27.977

原因是您看到的“...”字形是一个 unicode 字形。您使用的字体要么定义错误，要么根本没有定义。如果你有一些字体编辑工具，你可能可以修复它，但我不知道如何。该字符可以在 Mac 上使用 option-; 来“输入”，这可能是您看到“;”的原因。

# ios - 从 UITableView 部分打开 Safari

> ID：12592431
> 
> 赞同：0
> 
> 时间：2012-09-25T23:13:57.710
> 
> 标签：ios, nsstring, mobile-safari

我有一个 TableView 有一个可点击的部分。在该部分下，我希望应用程序打开 Safari，并使用由我输入的一些数据确定的特定谷歌搜索。

我已经验证了我输入的字符串是有效的并且显示了正确的 URL，我也尝试了这段代码，同时将 URL 硬编码到最后一行，它打开得很好。但是，正如现在设置的那样，当我单击按钮时，什么也没有发生。

```
NSMutableString *searchString = [_venueInfo objectAtIndex:3];
NSMutableString *finalString = [NSMutableString stringWithFormat: @"http://www.google.com/search?q=%@",searchString];
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:finalString]]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T09:39:17.673

尝试使用 NSString ，不要使用 NSMutableString 。让我知道它是否有效......！

# eclipse - 如何在 Eclipse 中使用 Photran IDE 设置断点？

> ID：12592435
> 
> 赞同：2
> 
> 时间：2012-09-25T23:14:26.510
> 
> 标签：eclipse, gdb, fortran, photran

我知道这听起来像一个简单的问题，但尝试创建一个简单的“Hello World！” 使用 GDB 进行应用程序和调试似乎没有给我创建断点的选项。有没有其他人看到这个？有什么我想念的吗？

[最近在 bugzilla 中提交了](https://bugs.eclipse.org/bugs/show_bug.cgi?id=384187)一个错误。但我想确保问题不仅仅是我缺少一些必要的设置或插件。

**更新：** [此错误已针对 Juno SR2 修复](https://bugs.eclipse.org/bugs/show_bug.cgi?id=384187)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T15:52:37.580

事实证明，这个问题特定于 Eclipse 的 Juno 版本（以及相应的 PTP 包）。

现在使用 Indigo 和相关软件包可以解决问题，直到他们修复了这个错误。

**更新：** [此错误已针对 Juno SR2 修复](https://bugs.eclipse.org/bugs/show_bug.cgi?id=384187)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T11:58:59.217

我遇到了同样的情况，但能够使用单个断点。在 Debug 窗口中选择 -->Instruction Stepping Mode，此时您将看到选项 Toggle Break point 和 Toggle Line Break point active 可供选择。选择“切换换行点”，在“运行配置”中提供行号尝试手动放置后，您将看到分配在“箭头指针线”处的断点。

# actionscript-3 - 防止项目列表在向下滚动时被破坏

> ID：12592440
> 
> 赞同：0
> 
> 时间：2012-09-25T23:15:06.520
> 
> 标签：actionscript-3, flex4

我正在使用 Flex 4 中的 iPad 移动应用程序，我有一个呈现自定义项目的列表，数据取自外部 XML。在那个 XML 中，我得到了一个图像路径，所以当我向下滚动时，图像就会消失......

有没有办法防止项目列表在向下滚动时被破坏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T23:29:21.643

是的，我相信您所说的功能是项目渲染器回收。

出于性能原因，我不建议将其关闭，但如果必须，您可以 `useVirtualLayout="false"`在列表中设置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T23:29:38.950

将您的列表`useVirtualLayout`属性设置为`false`. 但要注意性能问题！

请参阅：http: [//flexponential.com/2010/01/10/caching-images-loaded-from-a-spark-item-renderer/](http://flexponential.com/2010/01/10/caching-images-loaded-from-a-spark-item-renderer/)

# tfs - TFS 2012 构建错误“CreateWorkspaceTask”任务没有为所需参数“BuildAgentUri”指定值

> ID：12592441
> 
> 赞同：7
> 
> 时间：2012-09-25T23:15:09.300
> 
> 标签：tfs

我们升级到 TFS 2012 并更改了旧版构建模板，以从 Activity 元素中删除对 Microsoft.TeamFoundation 命名空间的所有强名称引用。我们现在在构建时收到以下错误：

> C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\TeamBuild\Microsoft.TeamFoundation.Build.targets (801)：“CreateWorkspaceTask”任务没有被赋予所需参数“BuildAgentUri”的值。

有没有其他人遇到过这个错误？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-20T21:13:41.997

我今天早些时候刚刚解决了这个问题......

导航并打开：-

> C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\TeamBuild\Microsoft.TeamFoundation.Build.targets

找到类似于以下内容的部分：-

> CreateWorkspaceTask TeamFoundationServerUrl="$(TeamFoundationServerUrl)" BuildUri="$(BuildUri)" BuildDirectory="$(BuildDirectory)" SourcesDirectory="$(SolutionRoot)" Name="$(WorkspaceName)" Comment="$(CreateWorkspaceTaskComment)"

将其替换为：-

> ```
> <!-- Create the workspace for this build -->
>     <CreateWorkspaceTask
>           TeamFoundationServerUrl="$(TeamFoundationServerUrl)"
>           BuildUri="$(BuildUri)"
>           BuildDirectory="$(BuildDirectory)"
>           SourcesDirectory="$(SolutionRoot)"
>           Name="$(WorkspaceName)"
>           Comment="$(CreateWorkspaceTaskComment)"
>           Condition=" '$(ProjectFileVersion)' != '4'">
>       <Output TaskParameter="Name" PropertyName="WorkspaceName" />
>       <Output TaskParameter="Owner" PropertyName="WorkspaceOwner" />
>     </CreateWorkspaceTask>
>     <CreateWorkspaceTask
>           TeamFoundationServerUrl="$(TeamFoundationServerUrl)"
>           BuildUri="$(BuildUri)"
>           BuildDirectory="$(BuildDirectory)"
>           BuildAgentUri="$(BuildAgentUri)"
>           SourcesDirectory="$(SolutionRoot)"
>           Name="$(WorkspaceName)"
>           Comment="$(CreateWorkspaceTaskComment)"
>           Condition=" '$(ProjectFileVersion)' == '4'">
>       <Output TaskParameter="Name" PropertyName="WorkspaceName" />
>       <Output TaskParameter="Owner" PropertyName="WorkspaceOwner" />
>     </CreateWorkspaceTask> 
> ```

请特别注意文本的大小写，因为这是一个 XML 文档...

请让我知道这可不可以帮你...

干杯!

...雪佛兰

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-12T20:19:07.717

我们在我们的一台构建机器上遇到了同样的问题。构建机器一天工作正常，第二天就停止了。唯一的变化是完成了 Visual Studio 2010 Service Pack 1 的安装。

我们认为 MSBuild 可能会滚动到以前的版本。

因此，我们在另一台构建机器上查看了该文件，该部分看起来与 Chev 提供的片段完全相同。

因此，我们在构建机器上进入“程序和功能”，并对 TFS 2012 安装进行了修复。这更新了 Microsoft.TeamFoundation.Build.targets 文件，使其看起来就像 Chev 提供的代码片段。

现在构建再次正确运行。

# bash - 在 bash 中获取位置参数

> ID：12592443
> 
> 赞同：2
> 
> 时间：2012-09-25T23:15:12.947
> 
> 标签：bash

我有一个名为 foo 的 bash 脚本，其参数数量可变，第一个是必需的，即：

```
foo a1 b2 b3 b4 ... 
```

我知道在 bash 中 $1 会让我得到参数 a1，但是有没有办法得到所有其余的参数？$@ 或 $* 似乎让我得到了包括 a1 在内的所有论点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T23:19:52.027

切片`$@`数组。

```
echo "${@:2}" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T23:17:55.533

您可以为此使用[shift](http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_09_07.html)命令。这将删除 $1，您可以访问以 $1 开头的其余参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T23:19:21.150

```
#!/bin/sh

echo $*
shift
echo $* 
```

`shift`将移动所有参数，运行前面的示例将给出：

```
$ test_shift.sh a b c d e
a b c d e
b c d e 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T23:21:03.817

./foo.sh 1 2 3 4

```
#!/bin/bash
echo $1;
echo $2;
echo $3;
echo $4; 
```

将输出：

```
1
2
3
4 
```

# scheme - 校验和方案

> ID：12592445
> 
> 赞同：4
> 
> 时间：2012-09-25T23:15:29.453
> 
> 标签：scheme

好吧，我和我的朋友已经尝试过多次，但拒绝去找导师，因为他们所做的只是给我们答案，而这并不能帮助我们学习任何东西。

到目前为止，我可以获得代码来做两件事之一，返回列表的总和或返回列表本身，我们需要获取它，以便它返回列表和总和的最后一位。到目前为止，我们有两件事：

```
(define (add-checksum ls)
  (cond
    [(null? ls) 0]
    [else (+ (car ls) (add-checksum (cdr ls)))]))

(define (add-checksum-helper ls)
  (cond
    [(null? ls) 0]
    [else (cons (car ls) (add-checksum-helper (cdr ls)))])) 
```

第一组代码进行加法并返回总和。第二个返回列表加上`.0`总和的最后一位数字应该去哪里？任何人都可以帮助我们吗？谢谢！

**编辑：**

```
(define (checksum ls)
  (append ls ((cdr (add-checksum ls)))))

(define (add-checksum ls)
  (cond
    [(null? ls) 0]
    [else (+ (car ls) (add-checksum (cdr ls)))])) 
```

回报是：

```
(checksum '(4 5 6 7 8))
((4 5 6 7 8) . 30) 
```

我们需要它返回`(4 5 6 7 8 0)`而不是`(.30)`. 我们不知道如何获得`0`. 如果我们这样做，`(cdr 30)`我们会得到列表不是成对的。现在有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T23:52:58.910

该`add-checksum`过程很好，但是您可以通过使用原始列表中`apply`的过程来获得相同的结果。`+`

对于第二部分：是否有必要将校验和存储在最后一个位置？通过使用原始列表`cons`调用的结果，将它存储在第一个位置会简单得多。`add-checksum`

最后，如果您需要提取数字的最后一位，请使用`n`正整数尝试以下操作：

```
(remainder n 10) 
```

例如：

```
(remainder 28 10)
> 8 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T23:52:11.227

听起来最简单的方法是使用两个单独的函数作为最终函数的助手；一个计算总和，一个将那个数字放在最后。

可能您的任务要求您只遍历列表一次，并在向下的过程中计算它——不过，这是一个有点虚假的要求，因为在任何一种情况下，渐近复杂度都是相同的。

# php - 从 CLI 调用 PHP 脚本何时停止执行？

> ID：12592451
> 
> 赞同：1
> 
> 时间：2012-09-25T23:16:29.480
> 
> 标签：php, cron, command-line-interface, infinite-loop, terminate

我基本上有一个 cron 工作每分钟调用一个脚本。如果前一个脚本仍在运行，则脚本立即停止（检查前一个脚本的活动时间）。

所以我犯了一个错误，脚本进入了一个无限循环（我知道它至少被 cron 调用过一次）。我创建了一个修复程序并将其上传到服务器，但我仍然想知道：

1.  错误的脚本将运行多长时间？
2.  我怎么知道它是否仍在运行？
3.  什么会终止脚本，为什么？

该脚本只是`echo`一遍又一遍地输出相同的文本。

PS PHP 在脚本中的最大执行时间设置为 0（无限），我无法直接访问服务器，只有 FTP。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T16:38:15.943

> 我怎么知道它是否仍在运行？

只需设置一个新的 cron 作业，但让 cron 命令成为可以帮助您调试的东西：一个有用的命令是

```
ps -af | grep php > /some/path/to/mylogfile.txt 
```

该`ps`命令列出了正在运行的进程的信息。使用这些标志，部分输出将是启动该进程的原始 linux 命令，因此我们可以 grep 该行并查找，`php`因为原始命令可能类似于：

```
php myscript.php 
```

在 cron 作业运行后，输出被重定向到`mylogfile.txt`供您手动读取。

进程 ID 应该是输出的一部分。然后，您可以`kill`在该进程 ID 上使用该命令，同样只需将该命令作为假 cron 作业输入即可。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-25T23:18:44.253

1.  直到脚本超时（`max_execution_time`在 php.ini 文件或 set_time_limit 方法中定义）
2.  查看正在运行的进程
3.  向脚本发送 kill 命令或等待超时

PS：你必须 php.ini 文件 - 一个用于命令行，一个用于 Apache - 请务必更改命令行 ini 文件中的 max_execution_time

# c# - FindBy 注解用于查找 WebElements 列表

> ID：12592455
> 
> 赞同：3
> 
> 时间：2012-09-25T23:16:57.273
> 
> 标签：c#, list, selenium, webdriver

在 java 中，我使用这样的代码来获取具有相同标识符的 WebElements 列表：

```
@FindBy(how = How.CLASS_NAME, using = "name")
private List<WebElement> names; 
```

现在，我正在使用 c#，我正在尝试使用以下方法做同样的事情：

```
[FindsBy(How = How.ClassName, Using = "name")]
private List<IWebElement> names; 
```

但是，这给出了例外：

> System.ArgumentException：“Castle.Proxies.IWrapsElementProxy_1”类型的对象无法转换为“System.Collections.Generic.List`1[OpenQA.Selenium.IWebElement]”类型。

我已经尝试过 FindAllBy 和 FindBys，但是这些似乎无效。反正我能做到这一点吗

`names = getDriver().findElements(By.ClassNames("..."))`?

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-26T00:54:07.363

从 .NET 绑定的 2.29.0 开始，这[不再是 true](https://github.com/SeleniumHQ/selenium/blob/master/dotnet/CHANGELOG)。该`FindsBy`属性现在将找到单个元素或元素集合。请注意，由属性修饰的集合字段或`FindsBy`属性必须是类型`IWebElement`或`IList<IWebElement>`才能由`PageFactory`. 任何其他类型都会抛出异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T23:26:29.383

试试`[FindAllBy(How = How.ClassName, Using = "name")]`吧。

# asp.net-mvc-4 - 空响应的 ASP.NET Web API 和状态代码

> ID：12592456
> 
> 赞同：8
> 
> 时间：2012-09-25T23:17:10.563
> 
> 标签：asp.net-mvc-4, asp.net-web-api

如果服务层未找到请求的资源，则向 Web API 控制器返回 null；`HttpStatusCode.NotFound`将响应返回给客户端而不在控制器中硬编码并检查它是否为空的最佳方法是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-26T08:24:30.040

就我个人而言，我会根据反对派的评论对控制器进行检查，但你所要求的完全合理。再次使用每个控制器附加的动作过滤器（或全局注册），您可以按照以下方式执行操作：

示例模型：

```
public class Foo
{
    public string Bar { get; set; }
} 
```

示例控制器：

```
public class FoosController : ApiController
{
    [NullObjectActionFilter]
    public Foo Get(string id)
    {
        // - Returns model and 200
        //return new Foo() { Bar = "TEST" };

        // - Returns 404
        //return null;
    }
} 
```

过滤器：

```
public class NullObjectActionFilter : ActionFilterAttribute
{
    public override void OnActionExecuted(HttpActionExecutedContext actionExecutedContext)
    {
        object outValue = null;
        actionExecutedContext.Response.TryGetContentValue<object>(out outValue);
        if (outValue == null)
        {
            throw new HttpResponseException(HttpStatusCode.NotFound);
        }

        base.OnActionExecuted(actionExecutedContext);

    }
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-02-20T01:51:24.137

我同意 Mark 的观点，即 ActionFilter 是要走的路——小动作方法是一种好味道。

但是，`HttpActionExecutedContext.Response`可以`null`在发生异常时；并且上面显示的 NullObjectActionFilter 类可以掩盖错误 HTTP 状态代码。您最好检查成功退出和成功的 HTTP 代码。

这是我使用的动作过滤器：

```
/// <summary>
/// Converts <c>null</c> return values into an HTTP 404 return code.
/// </summary>
[AttributeUsage(AttributeTargets.Class | AttributeTargets.Method)]
public sealed class NullResponseIs404Attribute : ActionFilterAttribute
{

    public override void OnActionExecuted(HttpActionExecutedContext actionExecutedContext)
    {
        if ((actionExecutedContext.Response != null) && actionExecutedContext.Response.IsSuccessStatusCode)
        {
            object contentValue = null;
            actionExecutedContext.Response.TryGetContentValue<object>(out contentValue);
            if (contentValue == null)
            {
                actionExecutedContext.Response = actionExecutedContext.Request.CreateErrorResponse(HttpStatusCode.NotFound, "Object not found");
            }
        }
    }

} 
```

# css - CSS 固定位置相互重叠

> ID：12592458
> 
> 赞同：3
> 
> 时间：2012-09-25T23:17:21.810
> 
> 标签：css

基本上我正在制作一个导航栏，并且由于 Jquery 做了很多调整大小以使网站看起来“漂亮”，我不想使用水平列表，所以每个按钮都是这样创建的：

```
<a href="#" class="button" id="home"><img src="homeicon.png"><span id="homex"><br /><img src="home.png" /></span></a> 
```

（是的，它们都是图像按钮，有充分的理由）

但唯一的问题是它们已固定并在页面顶部设置为“top 0”，因此不能彼此相邻而是重叠，任何关于我如何仍然保持位置固定的想法和他们从最高到 0 却让他们彼此相邻？

HTML

```
<div id="top">
<a href="#" class="button" id="home"><img src="homeicon.png"><span id="homex"><br /><img src="home.png" /></span></a>
</div> 
```

CSS

```
#top a.button { position: fixed; top: 0; padding: 12px; background: url('glacial_ice.jpg'); text-decoration: none; color: black; border-radius: 0px 0px 25px 25px; }
#top { position: relative; top:0; padding-left: 25px; } 
```

初始化函数（在 $(document).ready() 上运行）

```
$('a.button').animate({
    height: '+=5px',
    }, 20, function() {
$('a.button').animate({
    opacity: 0.6,
    height: '-=5px',
}, 20);
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T23:29:16.487

将它们全部放在一个容器中，即`id="header"`，给出标题`position:fixed;top:0;etc...`

然后，对于每个链接/按钮，给他们：

`position:relative;display:inline-block;float:left;`

如果您希望它们居中，则在`#header`使用中并从链接`text-align:center;`中删除`float:left`

所以容器是固定的，但里面的按钮是相对的，不会重叠。

希望这可以帮助！

**非常粗略的例子**

[http://jsfiddle.net/6SCTZ/](http://jsfiddle.net/6SCTZ/)

```
<div id="header">
   <div class="button">button1</div>
   <div class="button">button2</div>
   <div class="button">button3</div>
</div> 
```

CSS：

```
#header { position:fixed;top:0;width:100%;height:30px;background:black; text-align:center }

.button {position:relative;display:inline-block;color:white;margin:0 5px 0 5px;} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T23:24:58.463

只需将需要修复的任何元素放入容器元素中（在这种情况下，我将使用 ID 为“top_fixed”的 div）。

考虑以下 html：

```
<div id='top_fixed'>
  <a href='http://google.com'>Google</a>
  <a href='http://yahoo.com'>Yahoo</a>
</div>
<div id='tall'></div> 
```

现在，下面的 CSS：

```
a { display: inline; }
#top_fixed { position: fixed; top: 0; left: 0; width: auto; }
#tall {height: 2000px; background: #000;} 
```

​</p>

演示：http: [//jsfiddle.net/mHKNc/1/](http://jsfiddle.net/mHKNc/1/)

# haskell - Haskell：为什么 GHC 不使用fundeps 在这个类型类中推断类型？

> ID：12592464
> 
> 赞同：2
> 
> 时间：2012-09-25T23:18:12.353
> 
> 标签：haskell, typeclass, functional-dependencies

我正在尝试使用类型类和函数依赖项来获取一个*类型函数*，该函数可以转换`Int` 为`Cont Int`下面的代码，然后在另一个类型类中使用它，如下所示。

```
{-# LANGUAGE KindSignatures, FunctionalDependencies, FlexibleInstances, FlexibleContexts #-}

newtype TestData a b = TestData b
newtype Cont a = Cont a

class TypeConv (repr :: * -> *) a b | repr a -> b where
class Lift repr a where
    liftOp :: (TypeConv repr a a') => a -> repr a'

instance TypeConv (TestData a) Int (Cont Int) where

instance Lift (TestData a) Int where
    liftOp i = TestData (Cont i) 
```

这是来自 ghci 7.4.2 的错误

```
src/Test.hs:13:26:
    Could not deduce (a' ~ Cont Int)
    from the context (Full (TestData a) Int a')
      bound by the type signature for
                 liftOp :: Full (TestData a) Int a' => Int -> TestData a a'
      at src/Test.hs:13:5-32
      a' is a rigid type variable bound by
         the type signature for
           liftOp :: Full (TestData a) Int a' => Int -> TestData a a'
         at src/Test.hs:13:5
    In the return type of a call of `Cont'
    In the first argument of `TestData', namely `(Cont i)'
    In the expression: TestData (Cont i) 
```

鉴于`TypeConv`typeclass 有一个我读为：“给定`repr`and `a`，我们可以推断`b`”并为 提供了一个实例`Int`，为什么 ghc 不能推断`a' ~ Cont Int`呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T23:21:57.750

如果您想要一个类型函数，请使用 Type Families - 这就是它们的用途。类型家庭很容易，做你所期望的。

通常编译器没有推断出你的类型的原因是你指定了一个函数依赖（逻辑关系）而不是一个函数（计算工具）。众所周知，使用fundeps 是违反直觉的，部分原因是您在类型级别进行逻辑编程，同时在值级别进行函数式编程。转变！使用类型级别的函数，以及可爱的类型族扩展。随附免费的 lambda 冰箱磁铁，只有四个令牌（不包括 p&p）。

* * *

我不确定您要达到的目标，但这是一个示例-如果我朝错误的方向前进，请纠正我。你需要

```
{-# LANGUAGE TypeFamilies #-} 
```

然后我们可以定义一个包含本地类型同义词的类，`TypeConv`这就是我们的类型函数：

```
class Lift a where
    type TypeConv a
    liftOp :: a -> TypeConv a 
```

然后我们可以创建一个实例

```
instance Lift Int where
    type TypeConv Int = TestData (Cont Int)
    liftOp i = TestData (Cont i) 
```

如果我们只是想换`Cont`行，我们可以这样做

```
instance Lift Integer where
    type TypeConv Integer = Cont Integer
    liftOp i = Cont i 
```

你可以疯狂

```
instance Lift Char where
    type TypeConv Char = [String]
    liftOp c = replicate 4 (replicate 5 c) 
```

这让你有

```
*Main> liftOp (5::Int)
TestData (Cont 5)

*Main> liftOp (5::Integer)
Cont 5

*Main> liftOp '5'
["55555","55555","55555","55555"] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T03:46:42.560

Andrew 不必要地批评`fundeps`，类型函数更容易，但函数依赖通常提供额外的灵活性。在这种情况下，您只需要接受更长的类定义

```
{-# LANGUAGE KindSignatures, 
             FunctionalDependencies, 
             FlexibleInstances, 
             FlexibleContexts #-}

newtype TestData a b = TestData b
newtype Cont a = Cont a

class TypeConv (repr :: * -> *) a b | repr a -> b
class TypeConv repr a b => Lift repr a b | repr a -> b where
    liftOp :: a -> repr b

instance TypeConv (TestData a) Int (Cont Int)

instance Lift (TestData a) Int (Cont Int) where
    liftOp i = TestData (Cont i) 
```

当然，基于类型函数的方法确实看起来更好，并且可能更可取。

# android - 我有一个基本的 ListView，但如何将它链接到活动？

> ID：12592465
> 
> 赞同：0
> 
> 时间：2012-09-25T23:18:12.617
> 
> 标签：android, listview, android-activity

我迷路了，所以我可以就如何将列表项链接到单独的活动提供一些帮助吗？我有它来解释我正在尝试做的不同物种。它展示了诸如矮人、人类之类的东西，所有有趣的东西。提前致谢。

```
 package com.apw.games.rpg.medieval;

 import java.util.ArrayList;
import java.util.Arrays;
import android.app.Activity;
import android.os.Bundle;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class Species extends Activity {

  private ListView mainListView ;
  private ArrayAdapter<String> listAdapter ;

  /** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.species);

    // Find the ListView resource. 
    mainListView = (ListView) findViewById( R.id.mainListView );

    // Create and populate a List of planet names.
    String[] planets = new String[] { "Human", "Dwarf", "Earth-Born", "Elf",
                                  "Sky Spirit", "Water Spritit", "Death Spirit", "War Spirit"};  
    ArrayList<String> planetList = new ArrayList<String>();
    planetList.addAll( Arrays.asList(planets) );

    // Create ArrayAdapter using the planet list.
    listAdapter = new ArrayAdapter<String>(this, R.layout.simplerow, planetList);

    // Add more planets. If you passed a String[] instead of a List<String> 
    // into the ArrayAdapter constructor, you must not add more items. 
    // Otherwise an exception will occur.
    listAdapter.add( "Troll- Coming Soon" );
    listAdapter.add( "Giant- Coming Soon" );
    listAdapter.add( "God- Coming Soon" );
    listAdapter.add( "Monster- Coming Soon" );

    // Set the ArrayAdapter as the ListView's adapter.
    mainListView.setAdapter( listAdapter );      
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T23:26:14.133

调用`setOnItemClickListener()`您的`ListView`, 然后`startActivity()`从该`onItemClick()`侦听器的方法调用。

`ListActivity`但是`Activity`，更多时候，您会发现开发人员`onListItemClick()`在他们的`ListActivity`. 见：[https ://github.com/commonsguy/cw-omnibus/tree/master/Selection/List](https://github.com/commonsguy/cw-omnibus/tree/master/Selection/List)

# javascript - 如果使用 preventDefault，如何继续下载？

> ID：12592469
> 
> 赞同：0
> 
> 时间：2012-09-25T23:18:23.530
> 
> 标签：javascript, jquery

我有一个 jQuery 模态 UI 基本上阻止用户下载文件。我`preventDefault`用来阻止下载管理器出现。但这会杀死`GET`.

用户点击后`Agree`，如何请求继续下载？

我用谷歌搜索了这个，他们中的大多数都在提交表单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T23:46:36.123

记住文件的 URL，然后将其设置为`window.location`用户单击时`Agree`。

**HTML：**

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1/themes/smoothness/jquery-ui.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1/jquery-ui.min.js"></script>
    </head>
    <body>
        <a href="http://google.com" id="btn">Button</a>
        <div id="dlg">Continue?</div>
    </body>
</html>​ 
```

**JavaScript：**

```
var dlg$ = $('#dlg').dialog({
    title: 'Confirm action',
    autoOpen: false,
    buttons: {
        'Agree': function() {
            dlg$.dialog('close');
            window.location = dlg$.data('url');
        }
    }
}),
btn$ = $('#btn').on('click', function(e) {
    e.preventDefault();
    dlg$.data('url', this.href).dialog('open');
});​ 
```

# angularjs - 如何突出显示当前菜单项？

> ID：12592472
> 
> 赞同：206
> 
> 时间：2012-09-25T23:18:57.440
> 
> 标签：angularjs

AngularJS 是否有助于在`active`当前页面的链接上设置一个类？

我想有一些神奇的方式可以做到这一点，但我似乎找不到。

我的菜单如下所示：

```
 <ul>
   <li><a class="active" href="/tasks">Tasks</a>
   <li><a href="/actions">Tasks</a>
 </ul> 
```

我的路线中有每个控制器的控制器：`TasksController`和`ActionsController`.

但是我想不出一种将`a`链接上的“活动”类绑定到控制器的方法。

有什么提示吗？

* * *

## 回答 #1

> 赞同：266
> 
> 时间：2012-09-25T23:46:44.670

正在查看

```
<a ng-class="getClass('/tasks')" href="/tasks">Tasks</a> 
```

在控制器上

```
$scope.getClass = function (path) {
  return ($location.path().substr(0, path.length) === path) ? 'active' : '';
} 
```

有了这个，任务链接将在任何以'/tasks'开头的url中都有活动类（例如'/tasks/1/reports'）

* * *

## 回答 #2

> 赞同：86
> 
> 时间：2012-09-27T22:38:27.463

我建议在链接上使用指令。

但它还不完美。当心hashbangs ;)

这是指令的javascript：

```
angular.module('link', []).
  directive('activeLink', ['$location', function (location) {
    return {
      restrict: 'A',
      link: function(scope, element, attrs, controller) {
        var clazz = attrs.activeLink;
        var path = attrs.href;
        path = path.substring(1); //hack because path does not return including hashbang
        scope.location = location;
        scope.$watch('location.path()', function (newPath) {
          if (path === newPath) {
            element.addClass(clazz);
          } else {
            element.removeClass(clazz);
          }
        });
      }
    };
  }]); 
```

以下是它在 html 中的使用方式：

```
<div ng-app="link">
  <a href="#/one" active-link="active">One</a>
  <a href="#/two" active-link="active">One</a>
  <a href="#" active-link="active">home</a>
</div> 
```

之后使用 css 进行样式设置：

```
.active { color: red; } 
```

* * *

## 回答 #3

> 赞同：48
> 
> 时间：2013-09-25T01:32:59.317

这是一种适用于 Angular 的简单方法。

```
<ul>
    <li ng-class="{ active: isActive('/View1') }"><a href="#/View1">View 1</a></li>
    <li ng-class="{ active: isActive('/View2') }"><a href="#/View2">View 2</a></li>
    <li ng-class="{ active: isActive('/View3') }"><a href="#/View3">View 3</a></li>
</ul> 
```

在您的 AngularJS 控制器中：

```
$scope.isActive = function (viewLocation) {
     var active = (viewLocation === $location.path());
     return active;
}; 
```

该线程有许多其他类似的答案。

[如何使用 Angular JS 设置引导导航栏活动类？](https://stackoverflow.com/questions/16199418/how-do-i-implement-the-bootstrap-navbar-active-class-with-angular-js/18071388#18071388)

* * *

## 回答 #4

> 赞同：33
> 
> 时间：2014-03-09T12:23:28.383

只是为了在辩论中增加我的两分钱，我制作了一个纯角度模块（没有 jQuery），它也适用于包含数据的哈希 url。（例如`#/this/is/path?this=is&some=data`）

您只需将模块作为依赖项添加`auto-active`到菜单的祖先之一。像这样：

```
<ul auto-active>
    <li><a href="#/">main</a></li>
    <li><a href="#/first">first</a></li>
    <li><a href="#/second">second</a></li>
    <li><a href="#/third">third</a></li>
</ul> 
```

模块如下所示：

```
(function () {
    angular.module('autoActive', [])
        .directive('autoActive', ['$location', function ($location) {
        return {
            restrict: 'A',
            scope: false,
            link: function (scope, element) {
                function setActive() {
                    var path = $location.path();
                    if (path) {
                        angular.forEach(element.find('li'), function (li) {
                            var anchor = li.querySelector('a');
                            if (anchor.href.match('#' + path + '(?=\\?|$)')) {
                                angular.element(li).addClass('active');
                            } else {
                                angular.element(li).removeClass('active');
                            }
                        });
                    }
                }

                setActive();

                scope.$on('$locationChangeSuccess', setActive);
            }
        }
    }]);
}()); 
```

（你当然可以只使用指令部分）

还值得注意的是，这不适用于空散列（例如`example.com/#`或只是`example.com`），它需要至少`example.com/#/`或只是`example.com#/`. 但这会在 ngResource 之类的情况下自动发生。

这是小提琴：http: [//jsfiddle.net/gy2an/8/](http://jsfiddle.net/gy2an/8/)

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2013-09-19T12:30:39.893

就我而言，我通过创建一个负责导航的简单控制器解决了这个问题

```
angular.module('DemoApp')
  .controller('NavigationCtrl', ['$scope', '$location', function ($scope, $location) {
    $scope.isCurrentPath = function (path) {
      return $location.path() == path;
    };
  }]); 
```

只需将 ng-class 添加到元素中，如下所示：

```
<ul class="nav" ng-controller="NavigationCtrl">
  <li ng-class="{ active: isCurrentPath('/') }"><a href="#/">Home</a></li>
  <li ng-class="{ active: isCurrentPath('/about') }"><a href="#/about">About</a></li>
  <li ng-class="{ active: isCurrentPath('/contact') }"><a href="#/contact">Contact</a></li>
</ul> 
```

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2014-04-08T17:35:56.037

对于[AngularUI](https://github.com/angular-ui/ui-router/)路由器用户：

```
<a ui-sref-active="active" ui-sref="app"> 
```

这将`active`在所选对象上放置一个类。

* * *

## 回答 #7

> 赞同：13
> 
> 时间：2013-03-18T13:19:28.470

@Renan-tomal-fernandes的[回答](https://stackoverflow.com/a/12592693/74865)很好，但需要一些改进才能正常工作。事实上，它总是会检测到主页 ( / ) 的链接被触发，即使您在另一个部分。

所以我对其进行了一些改进，这是代码。我使用[Bootstrap](http://twitter.github.com/bootstrap/)，所以活动部分在`<li>`元素中，而不是`<a>`.

**控制器**

```
$scope.getClass = function(path) {
    var cur_path = $location.path().substr(0, path.length);
    if (cur_path == path) {
        if($location.path().substr(0).length > 1 && path.length == 1 )
            return "";
        else
            return "active";
    } else {
        return "";
    }
} 
```

**模板**

```
<div class="nav-collapse collapse">
  <ul class="nav">
    <li ng-class="getClass('/')"><a href="#/">Home</a></li>
    <li ng-class="getClass('/contents/')"><a href="#/contests/">Contents</a></li>
    <li ng-class="getClass('/data/')"><a href="#/data/">Your data</a></li>
  </ul>
</div> 
```

* * *

## 回答 #8

> 赞同：13
> 
> 时间：2012-09-25T23:53:13.547

有一个`ng-class`指令，它绑定变量和 css 类。它还接受对象（类名与布尔值对）。

这是示例，[http ://plnkr.co/edit/SWZAqj](http://plnkr.co/edit/SWZAqj)

* * *

## 回答 #9

> 赞同：10
> 
> 时间：2013-04-16T17:27:41.063

这是我在阅读了上面的一些优秀建议后提出的解决方案。在我的特殊情况下，我试图使用[Bootstrap 选项卡组件](http://twitter.github.io/bootstrap/components.html#navs)作为我的菜单，但不想使用 Angular-UI 版本，因为我希望选项卡充当菜单，其中每个选项卡都可以添加书签，而不是作为单个页面导航的选项卡。（如果您对 Angular-UI 版本的引导选项卡的外观感兴趣，请参阅[http://angular-ui.github.io/bootstrap/#/tabs ）。](http://angular-ui.github.io/bootstrap/#/tabs)

我真的很喜欢 kfis 关于创建自己的指令来处理这个问题的答案，但是有一个需要放置在每个链接上的指令似乎很麻烦。所以我创建了我自己的 Angular 指令，它被放置在`ul`. 以防万一其他人尝试做同样的事情，我想我会把它贴在这里，尽管正如我所说，上述许多解决方案也可以工作。就 javascript 而言，这是一个稍微复杂的解决方案，但它创建了一个具有最少标记的可重用组件。

这是指令的 javascript 和路由提供程序`ng:view`：

```
var app = angular.module('plunker', ['ui.bootstrap']).
  config(['$routeProvider', function($routeProvider) {
    $routeProvider.
        when('/One', {templateUrl: 'one.html'}).
        when('/Two', {templateUrl: 'two.html'}).
        when('/Three', {templateUrl: 'three.html'}).
        otherwise({redirectTo: '/One'});
  }]).
  directive('navTabs', ['$location', function(location) {
    return {
        restrict: 'A',
        link: function(scope, element) {
            var $ul = $(element);
            $ul.addClass("nav nav-tabs");

            var $tabs = $ul.children();
            var tabMap = {};
            $tabs.each(function() {
              var $li = $(this);
              //Substring 1 to remove the # at the beginning (because location.path() below does not return the #)
              tabMap[$li.find('a').attr('href').substring(1)] = $li;
            });

            scope.location = location;
            scope.$watch('location.path()', function(newPath) {
                $tabs.removeClass("active");
                tabMap[newPath].addClass("active");
            });
        }

    };

 }]); 
```

然后在您的 html 中，您只需：

```
<ul nav-tabs>
  <li><a href="#/One">One</a></li>
  <li><a href="#/Two">Two</a></li>
  <li><a href="#/Three">Three</a></li>
</ul>
<ng:view><!-- Content will appear here --></ng:view> 
```

[这是它的插件： http](http://plnkr.co/edit/xwGtGqrT7kWoCKnGDHYN?p=preview) ://plnkr.co/edit/xwGtGqrT7kWoCKnGDHYN?p=preview 。

* * *

## 回答 #10

> 赞同：9
> 
> 时间：2014-11-11T09:34:12.827

您可以非常简单地实现这一点，这是一个示例：

```
<div ng-controller="MenuCtrl">
  <ul class="menu">
    <li ng-class="menuClass('home')"><a href="#home">Page1</a></li>
    <li ng-class="menuClass('about')"><a href="#about">Page2</a></li>
  </ul>

</div> 
```

你的控制器应该是这样的：

```
app.controller("MenuCtrl", function($scope, $location) {
  $scope.menuClass = function(page) {
    var current = $location.path().substring(1);
    return page === current ? "active" : "";
  };
}); 
```

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2018-09-14T12:56:16.730

**将 Angular 版本 6 与 Bootstrap 4.1 一起使用**

我能够完成它，如下所示。

在下面的示例中，当 URL 看到“/contact”时，将激活的引导程序添加到 html 标记中。当 URL 发生变化时，它会被删除。

```
<ul>
<li class="nav-item" routerLink="/contact" routerLinkActive="active">
    <a class="nav-link" href="/contact">Contact</a>
</li>
</ul> 
```

> 该指令允许您在链接的路由变为活动状态时向元素添加 CSS 类。

[在Angular 网站](https://angular.io/api/router/RouterLinkActive)上阅读更多信息

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2016-02-03T07:40:34.307

使用 angular-ui-router 的 ui-sref-active 指令 [https://github.com/angular-ui/ui-router/wiki/Quick-Reference#statename](https://github.com/angular-ui/ui-router/wiki/Quick-Reference#statename)

```
<ul>
  <li ui-sref-active="active" class="item">
    <a href ui-sref="app.user({user: 'bilbobaggins'})">@bilbobaggins</a>
  </li>
  <!-- ... -->
</ul>
```

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2013-03-18T15:41:25.247

我对位于控制器范围**之外的菜单**有类似的问题。不确定这是最好的解决方案还是推荐的解决方案，但这对我有用。我已将以下内容添加到我的应用程序配置中：

```
var app = angular.module('myApp');

app.run(function($rootScope, $location){
  $rootScope.menuActive = function(url, exactMatch){
    if (exactMatch){
      return $location.path() == url;
    }
    else {
      return $location.path().indexOf(url) == 0;
    }
  }
}); 
```

然后在视图中我有：

```
<li><a href="/" ng-class="{true: 'active'}[menuActive('/', true)]">Home</a></li>
<li><a href="/register" ng-class="{true: 'active'}[menuActive('/register')]">
<li>...</li> 
```

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2013-04-22T23:22:21.680

使用指令（因为我们在这里进行 DOM 操作）以下可能是最接近“角度方式”的处理方式：

```
$scope.timeFilters = [
  {'value':3600,'label':'1 hour'},
  {'value':10800,'label':'3 hours'},
  {'value':21600,'label':'6 hours'},
  {'value':43200,'label':'12 hours'},
  {'value':86400,'label':'24 hours'},
  {'value':604800,'label':'1 week'}
]

angular.module('whatever', []).directive('filter',function(){
return{
    restrict: 'A',
    template: '<li ng-repeat="time in timeFilters" class="filterItem"><a ng-click="changeTimeFilter(time)">{{time.label}}</a></li>',
    link: function linkFn(scope, lElement, attrs){

        var menuContext = attrs.filter;

        scope.changeTimeFilter = function(newTime){
          scope.selectedtimefilter = newTime;

        }

        lElement.bind('click', function(cevent){
            var currentSelection = angular.element(cevent.srcElement).parent();
            var previousSelection = scope[menuContext];

            if(previousSelection !== currentSelection){
                if(previousSelection){
                    angular.element(previousSelection).removeClass('active')
                }
                scope[menuContext] = currentSelection;

                scope.$apply(function(){
                    currentSelection.addClass('active');
                })
            }
        })
    }
}
}) 
```

然后您的 HTML 将如下所示：

```
<ul class="dropdown-menu" filter="times"></ul> 
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2015-04-07T07:49:16.053

我对这个问题的解决方案，`route.current`在角度模板中使用。

由于您有`/tasks`要在菜单中突出显示的路线，因此您可以将自己的属性添加`menuItem`到模块声明的路线中：

```
$routeProvider.
  when('/tasks', {
    menuItem: 'TASKS',
    templateUrl: 'my-templates/tasks.html',
    controller: 'TasksController'
  ); 
```

然后在您的模板中`tasks.html`，您可以使用以下`ng-class`指令：

```
<a href="app.html#/tasks" 
    ng-class="{active : route.current.menuItem === 'TASKS'}">Tasks</a> 
```

在我看来，这比所有提议的解决方案都要干净得多。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2014-01-24T00:09:51.837

我是这样做的：

```
var myApp = angular.module('myApp', ['ngRoute']);

myApp.directive('trackActive', function($location) {
    function link(scope, element, attrs){
        scope.$watch(function() {
            return $location.path();
        }, function(){
            var links = element.find('a');
            links.removeClass('active');
            angular.forEach(links, function(value){
                var a = angular.element(value);
                if (a.attr('href') == '#' + $location.path() ){
                    a.addClass('active');
                }
            });
        });
    }
    return {link: link};
}); 
```

这使您可以在具有 track-active 指令的部分中拥有链接：

```
<nav track-active>
     <a href="#/">Page 1</a>
     <a href="#/page2">Page 2</a>
     <a href="#/page3">Page 3</a>
</nav> 
```

对我来说，这种方法似乎比其他方法更干净。

另外，如果你使用 jQuery，你可以让它更整洁，因为 jQlite 只有基本的选择器支持。在角度包含之前包含 jquery 的更简洁的版本如下所示：

```
myApp.directive('trackActive', function($location) {
    function link(scope, element, attrs){
        scope.$watch(function() {
            return $location.path();
        }, function(){
            element.find('a').removeClass('active').find('[href="#'+$location.path()+'"]').addClass('active');
        });
    }
    return {link: link};
}); 
```

[这是一个jsFiddle](http://jsfiddle.net/48Zwh/)

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2014-06-04T10:12:55.050

如果您希望将指令的链接放在包装器中，而不是选择每个单独的链接（更容易查看 Batarang 中的范围），这也很有效：

```
 angular.module("app").directive("navigation", [
    "$location", function($location) {
      return {
        restrict: 'A',
        scope: {},
        link: function(scope, element) {
          var classSelected, navLinks;

          scope.location = $location;

          classSelected = 'selected';

          navLinks = element.find('a');

          scope.$watch('location.path()', function(newPath) {
            var el;
            el = navLinks.filter('[href="' + newPath + '"]');

            navLinks.not(el).closest('li').removeClass(classSelected);
            return el.closest('li').addClass(classSelected);
          });
        }
      };
    }
  ]); 
```

标记只是：

```
 <nav role="navigation" data-navigation>
        <ul>
            <li><a href="/messages">Messages</a></li>
            <li><a href="/help">Help</a></li>
            <li><a href="/details">Details</a></li>
        </ul>
    </nav> 
```

我还应该提到我在这个例子中使用了“全脂”jQuery，但是你可以很容易地改变我对过滤等所做的事情。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2014-04-17T16:05:50.763

这是另一个突出显示活动链接的指令。

## 主要特征：

*   适用于包含动态角度表达式的 href
*   与 hash-bang 导航兼容
*   与 Bootstrap 兼容，其中活动类应应用于父 li 而不是链接本身
*   如果任何嵌套路径处于活动状态，则允许使链接处于活动状态
*   如果链接不活动，则允许禁用链接

## 代码：

```
.directive('activeLink', ['$location', 
function($location) {
    return {
        restrict: 'A',
        link: function(scope, elem, attrs) {
            var path = attrs.activeLink ? 'activeLink' : 'href';
            var target = angular.isDefined(attrs.activeLinkParent) ? elem.parent() : elem;
            var disabled = angular.isDefined(attrs.activeLinkDisabled) ? true : false;
            var nested = angular.isDefined(attrs.activeLinkNested) ? true : false;

            function inPath(needle, haystack) {
                var current = (haystack == needle);
                if (nested) {
                    current |= (haystack.indexOf(needle + '/') == 0);
                }

                return current;
            }

            function toggleClass(linkPath, locationPath) {
                // remove hash prefix and trailing slashes
                linkPath = linkPath ? linkPath.replace(/^#!/, '').replace(/\/+$/, '') : '';
                locationPath = locationPath.replace(/\/+$/, '');

                if (linkPath && inPath(linkPath, locationPath)) {
                    target.addClass('active');
                    if (disabled) {
                        target.removeClass('disabled');
                    }
                } else {
                    target.removeClass('active');
                    if (disabled) {
                        target.addClass('disabled');
                    }
                }
            }

            // watch if attribute value changes / evaluated
            attrs.$observe(path, function(linkPath) {
                toggleClass(linkPath, $location.path());
            });

            // watch if location changes
            scope.$watch(
                function() {
                    return $location.path(); 
                }, 
                function(newPath) {
                    toggleClass(attrs[path], newPath);
                }
            );
        }
    };
}
]); 
```

## 用法：

带有角度表达式的简单示例，假设*$scope.var = 2 ，如果位置为**/url/2*，则链接将处于活动状态：

```
<a href="#!/url/{{var}}" active-link> 
```

引导示例，父 li 将获得活动类：

```
<li>
    <a href="#!/url" active-link active-link-parent>
</li> 
```

嵌套 url 示例，如果任何嵌套 url 处于活动状态（即*/url/1*、*/url/2*、*url/1/2/...*） ，则链接将处于活动状态

```
<a href="#!/url" active-link active-link-nested> 
```

复杂的示例，链接指向一个 url ( */url1* )，但如果选择另一个 ( /url2 ) 则将处于活动*状态*：

```
<a href="#!/url1" active-link="#!/url2" active-link-nested> 
```

禁用链接的示例，如果它不活动，它将具有*“禁用”*类：

```
<a href="#!/url" active-link active-link-disabled> 
```

所有*active-link-**属性都可以任意组合使用，因此可以实现非常复杂的条件。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2015-02-27T13:27:41.017

这是我的两分钱，这很好用。

*注意：这与子页面不匹配（这是我需要的）。*

**看法：**

```
<a ng-class="{active: isCurrentLocation('/my-path')}"  href="/my-path" >
  Some link
</a> 
```

**控制器：**

```
// make sure you inject $location as a dependency

$scope.isCurrentLocation = function(path){
    return path === $location.path()
} 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2013-07-22T13:39:22.720

这是我为允许不同级别的路径匹配所做的 kfis 指令的扩展。本质上，我发现需要将 URL 路径匹配到一定深度，因为精确匹配不允许嵌套和默认状态重定向。希望这可以帮助。

```
 .directive('selectedLink', ['$location', function(location) {
    return {
        restrict: 'A',
        scope:{
            selectedLink : '='
            },
        link: function(scope, element, attrs, controller) {
            var level = scope.selectedLink;
            var path = attrs.href;
            path = path.substring(1); //hack because path does not return including hashbang
            scope.location = location;
            scope.$watch('location.path()', function(newPath) {
                var i=0;
                p = path.split('/');
                n = newPath.split('/');
                for( i ; i < p.length; i++) { 
                    if( p[i] == 'undefined' || n[i] == 'undefined' || (p[i] != n[i]) ) break;
                    }

                if ( (i-1) >= level) {
                    element.addClass("selected");
                    } 
                else {
                    element.removeClass("selected");
                    }
                });
            }

        };
    }]); 
```

这是我使用链接的方式

```
<nav>
    <a href="#/info/project/list"  selected-link="2">Project</a>
    <a href="#/info/company/list" selected-link="2">Company</a>
    <a href="#/info/person/list"  selected-link="2">Person</a>
</nav> 
```

该指令将匹配指令属性值中指定的深度级别。只是意味着它可以在其他地方多次使用。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2015-10-06T09:31:35.677

根据@kfis 的回答，它的评论和我的建议，最终指令如下：

```
.directive('activeLink', ['$location', function (location) {
    return {
      restrict: 'A',
      link: function(scope, element, attrs, controller) {
        var clazz = attrs.activeLink;        
        var path = attrs.href||attrs.ngHref;
        path = path.substring(1); //hack because path does not return including hashbang
        scope.location = location;
        scope.$watch('window.location.href', function () {
          var newPath = (window.location.pathname + window.location.search).substr(1);
          if (path === newPath) {
            element.addClass(clazz);
          } else {
            element.removeClass(clazz);
          }
        });
      }
    };
  }]); 
```

> 以下是它在 html 中的使用方式：
> 
> ```
> <div ng-app="link">
>   <a href="#/one" active-link="active">One</a>
>   <a href="#/two" active-link="active">One</a>
>   <a href="#" active-link="active">home</a>
> </div> 
> ```
> 
> 之后使用 css 进行样式设置：
> 
> ```
> .active { color: red; } 
> ```

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2016-02-06T19:55:27.260

上述*指导*性建议对我都没有用。如果您有这样的引导导航栏

```
<ul class="nav navbar-nav">
    <li><a ng-href="#/">Home</a></li>
    <li><a ng-href="#/about">About</a></li>
  ...
</ul> 
```

（这可能是一个`$ yo angular`启动）然后你想添加`.active`到*父* `<li>`元素类列表，而不是元素本身；即`<li class="active">..</li>`。所以我写了这个：

```
.directive('setParentActive', ['$location', function($location) {
  return {
    restrict: 'A',
    link: function(scope, element, attrs, controller) {
      var classActive = attrs.setParentActive || 'active',
          path = attrs.ngHref.replace('#', '');
      scope.location = $location;
      scope.$watch('location.path()', function(newPath) {
        if (path == newPath) {
          element.parent().addClass(classActive);
        } else {
          element.parent().removeClass(classActive);
        }
      })
    }
  }
}]) 
```

用法`set-parent-active`；`.active`是默认的所以不需要设置

```
<li><a ng-href="#/about" set-parent-active>About</a></li> 
```

并且父`<li>`元素将`.active`在链接处于活动状态时出现。要使用类似的替代`.active`类`.highlight`，只需

```
<li><a ng-href="#/about" set-parent-active="highlight">About</a></li> 
```

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2016-01-05T06:46:00.680

对于那些使用 ui-router 的人，我的回答有点类似于 Ender2050，但我更喜欢通过州名测试来做到这一点：

```
$scope.isActive = function (stateName) {
  var active = (stateName === $state.current.name);
  return active;
}; 
```

对应的 HTML：

```
<ul class="nav nav-sidebar">
    <li ng-class="{ active: isActive('app.home') }"><a ui-sref="app.home">Dashboard</a></li>
    <li ng-class="{ active: isActive('app.tiles') }"><a ui-sref="app.tiles">Tiles</a></li>
</ul> 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2013-07-19T11:26:43.907

对我来说最重要的是根本不更改引导程序默认代码。这是我的菜单控制器，它搜索菜单选项，然后添加我们想要的行为。

```
file: header.js
function HeaderCtrl ($scope, $http, $location) {
  $scope.menuLinkList = [];
  defineFunctions($scope);
  addOnClickEventsToMenuOptions($scope, $location);
}

function defineFunctions ($scope) {
  $scope.menuOptionOnClickFunction = function () {
    for ( var index in $scope.menuLinkList) {
      var link = $scope.menuLinkList[index];
      if (this.hash === link.hash) {
        link.parentElement.className = 'active';
      } else {
        link.parentElement.className = '';
      }
    }
  };
}

function addOnClickEventsToMenuOptions ($scope, $location) {
  var liList = angular.element.find('li');
  for ( var index in liList) {
    var liElement = liList[index];
    var link = liElement.firstChild;
    link.onclick = $scope.menuOptionOnClickFunction;
    $scope.menuLinkList.push(link);
    var path = link.hash.replace("#", "");
    if ($location.path() === path) {
      link.parentElement.className = 'active';
    }
  }
}

     <script src="resources/js/app/header.js"></script>
 <div class="navbar navbar-fixed-top" ng:controller="HeaderCtrl">
    <div class="navbar-inner">
      <div class="container-fluid">
        <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span> <span class="icon-bar"></span> 
<span     class="icon-bar"></span>
        </button>
        <a class="brand" href="#"> <img src="resources/img/fom-logo.png"
          style="width: 80px; height: auto;">
        </a>
        <div class="nav-collapse collapse">
          <ul class="nav">
            <li><a href="#/platforms">PLATFORMS</a></li>
            <li><a href="#/functionaltests">FUNCTIONAL TESTS</a></li>
          </ul> 
        </div>
      </div>
    </div>
  </div> 
```

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2013-11-22T20:18:15.860

有同样的问题。这是我的[解决方案](https://gist.github.com/Naxmeify/7606111)：

```
.directive('whenActive',
  [
    '$location',
    ($location)->
      scope: true,
      link: (scope, element, attr)->
        scope.$on '$routeChangeSuccess', 
          () ->
            loc = "#"+$location.path()
            href = element.attr('href')
            state = href.indexOf(loc)
            substate = -1

            if href.length > 3
              substate = loc.indexOf(href)
            if loc.length is 2
              state = -1

            #console.log "Is Loc: "+loc+" in Href: "+href+" = "+state+" and Substate = "+substate

            if state isnt -1 or substate isnt -1
              element.addClass 'selected'
              element.parent().addClass 'current-menu-item'
            else if href is '#' and loc is '#/'
              element.addClass 'selected'
              element.parent().addClass 'current-menu-item'
            else
              element.removeClass 'selected'
              element.parent().removeClass 'current-menu-item'
  ]) 
```

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2016-08-06T09:00:22.997

```
$scope.getClass = function (path) {
return String(($location.absUrl().split('?')[0]).indexOf(path)) > -1 ? 'active' : ''
}

<li class="listing-head" ng-class="getClass('/v/bookings')"><a href="/v/bookings">MY BOOKING</a></li>
<li class="listing-head" ng-class="getClass('/v/fleets')"><a href="/v/fleets">MY FLEET</a></li>
<li class="listing-head" ng-class="getClass('/v/adddriver')"><a href="/v/adddriver">ADD DRIVER</a></li>
<li class="listing-head" ng-class="getClass('/v/bookings')"><a href="/v/invoice">INVOICE</a></li>
<li class="listing-head" ng-class="getClass('/v/profile')"><a href="/v/profile">MY PROFILE</a></li>
<li class="listing-head"><a href="/v/logout">LOG OUT</a></li> 
```

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2015-07-08T01:20:16.173

我刚刚为此写了一个指令。

用法：

```
<ul class="nav navbar-nav">
  <li active><a href="#/link1">Link 1</a></li>
  <li active><a href="#/link2">Link 2</a></li>
</ul> 
```

执行：

```
angular.module('appName')
  .directive('active', function ($location, $timeout) {
    return {
      restrict: 'A',
      link: function (scope, element, attrs) {
        // Whenever the user navigates to a different page...
        scope.$on('$routeChangeSuccess', function () {
          // Defer for other directives to load first; this is important
          // so that in case other directives are used that this directive
          // depends on, such as ng-href, the href is evaluated before
          // it's checked here.
          $timeout(function () {
            // Find link inside li element
            var $link = element.children('a').first();

            // Get current location
            var currentPath = $location.path();

            // Get location the link is pointing to
            var linkPath = $link.attr('href').split('#').pop();

            // If they are the same, it means the user is currently
            // on the same page the link would point to, so it should
            // be marked as such
            if (currentPath === linkPath) {
              $(element).addClass('active');
            } else {
              // If they're not the same, a li element that is currently
              // marked as active needs to be "un-marked"
              element.removeClass('active');
            }
          });
        });
      }
    };
  }); 
```

测试：

```
'use strict';

describe('Directive: active', function () {

  // load the directive's module
  beforeEach(module('appName'));

  var element,
      scope,
      location,
      compile,
      rootScope,
      timeout;

  beforeEach(inject(function ($rootScope, $location, $compile, $timeout) {
    scope = $rootScope.$new();
    location = $location;
    compile = $compile;
    rootScope = $rootScope;
    timeout = $timeout;
  }));

  describe('with an active link', function () {
    beforeEach(function () {
      // Trigger location change
      location.path('/foo');
    });

    describe('href', function () {
      beforeEach(function () {
        // Create and compile element with directive; note that the link
        // is the same as the current location after the location change.
        element = angular.element('<li active><a href="#/foo">Foo</a></li>');
        element = compile(element)(scope);

        // Broadcast location change; the directive waits for this signal
        rootScope.$broadcast('$routeChangeSuccess');

        // Flush timeout so we don't have to write asynchronous tests.
        // The directive defers any action using a timeout so that other
        // directives it might depend on, such as ng-href, are evaluated
        // beforehand.
        timeout.flush();
      });

      it('adds the class "active" to the li', function () {
        expect(element.hasClass('active')).toBeTruthy();
      });
    });

    describe('ng-href', function () {
      beforeEach(function () {
        // Create and compile element with directive; note that the link
        // is the same as the current location after the location change;
        // however this time with an ng-href instead of an href.
        element = angular.element('<li active><a ng-href="#/foo">Foo</a></li>');
        element = compile(element)(scope);

        // Broadcast location change; the directive waits for this signal
        rootScope.$broadcast('$routeChangeSuccess');

        // Flush timeout so we don't have to write asynchronous tests.
        // The directive defers any action using a timeout so that other
        // directives it might depend on, such as ng-href, are evaluated
        // beforehand.
        timeout.flush();
      });

      it('also works with ng-href', function () {
        expect(element.hasClass('active')).toBeTruthy();
      });
    });
  });

  describe('with an inactive link', function () {
    beforeEach(function () {
      // Trigger location change
      location.path('/bar');

      // Create and compile element with directive; note that the link
      // is the NOT same as the current location after the location change.
      element = angular.element('<li active><a href="#/foo">Foo</a></li>');
      element = compile(element)(scope);

      // Broadcast location change; the directive waits for this signal
      rootScope.$broadcast('$routeChangeSuccess');

      // Flush timeout so we don't have to write asynchronous tests.
      // The directive defers any action using a timeout so that other
      // directives it might depend on, such as ng-href, are evaluated
      // beforehand.
      timeout.flush();
    });

    it('does not add the class "active" to the li', function () {
      expect(element.hasClass('active')).not.toBeTruthy();
    });
  });

  describe('with a formerly active link', function () {
    beforeEach(function () {
      // Trigger location change
      location.path('/bar');

      // Create and compile element with directive; note that the link
      // is the same as the current location after the location change.
      // Also not that the li element already has the class "active".
      // This is to make sure that a link that is active right now will
      // not be active anymore when the user navigates somewhere else.
      element = angular.element('<li class="active" active><a href="#/foo">Foo</a></li>');
      element = compile(element)(scope);

      // Broadcast location change; the directive waits for this signal
      rootScope.$broadcast('$routeChangeSuccess');

      // Flush timeout so we don't have to write asynchronous tests.
      // The directive defers any action using a timeout so that other
      // directives it might depend on, such as ng-href, are evaluated
      // beforehand.
      timeout.flush();
    });

    it('removes the "active" class from the li', function () {
      expect(element.hasClass('active')).not.toBeTruthy();
    });
  });
}); 
```

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2017-04-04T18:10:41.593

我找到了最简单的解决方案。只是为了比较 HTML 中的 indexOf

```
var myApp = angular.module('myApp', []);

myApp.run(function($rootScope) {
    $rootScope.$on("$locationChangeStart", function(event, next, current) { 
         $rootScope.isCurrentPath = $location.path();  
    });
});

<li class="{{isCurrentPath.indexOf('help')>-1 ? 'active' : '' }}">
<a href="/#/help/">
          Help
        </a>
</li> 
```

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2015-09-10T15:46:45.433

路线：

```
$routeProvider.when('/Account/', { templateUrl: '/Home/Account', controller: 'HomeController' }); 
```

菜单html：

```
<li id="liInicio" ng-class="{'active':url=='account'}"> 
```

控制器：

```
angular.module('Home').controller('HomeController', function ($scope, $http, $location) {
    $scope.url = $location.url().replace(/\//g, "").toLowerCase();
... 
```

我在这里发现的问题是菜单项仅在加载整个页面时才处于活动状态。加载局部视图时，菜单不会更改。有人知道为什么会这样吗？

# css - 谷歌浏览器两种元素样式的区别

> ID：12592473
> 
> 赞同：83
> 
> 时间：2012-09-25T23:19:06.677
> 
> 标签：css, google-chrome, google-chrome-extension, styles, google-chrome-devtools

我使用 Google Chrome 开发者工具，并且不断地检查一个元素和另一个元素，以找出可能导致特定样式问题的原因。

比较元素 1 和元素 2 的风格差异会很好。

这可以通过当前的 chrome 或通过一些解决方法来完成吗？有没有可以做我正在寻找的工具？

*当前样式差异的示例是我在垂直对齐中出现更高的位置`H4`旁边有一个内联。我不是在寻找这个问题的解决方案，因为我会解决它。`A``A`*

* * *

## 回答 #1

> 赞同：148
> 
> 时间：2012-09-26T07:19:38.340

* * *

**更新：**作为讨论的结果，创建了“ [CSS Diff](https://chrome.google.com/webstore/detail/pefnhibkhcfooofgmgoipfpcojnhhljm) ”Chrome 扩展。

[![在此处输入图像描述](../Images/9bf8ea2ba245f8f5b6a6b46bf4434f29.png)](https://chrome.google.com/webstore/detail/pefnhibkhcfooofgmgoipfpcojnhhljm)

* * *

很好的问题和很酷的扩展想法！

**概念证明**

作为概念证明，我们可以在这里做一个小技巧，避免创建扩展。Chrome 将您通过“检查元素”按钮选择的元素保留在变量中。中的最后一个选定元素`$0`，在此之前的一个元素`$1`等。基于此，我创建了一个小片段，用于比较最后两个检查的元素：

```
(function(a,b){    
    var aComputed = getComputedStyle(a);
    var bComputed = getComputedStyle(b);

    console.log('------------------------------------------');
    console.log('You are comparing: ');
    console.log('A:', a);
    console.log('B:', b);
    console.log('------------------------------------------');

    for(var aname in aComputed) {
        var avalue = aComputed[aname];
        var bvalue = bComputed[aname];

        if( aname === 'length' || aname === 'cssText' || typeof avalue === "function" ) {
            continue;
        }

        if( avalue !== bvalue ) {
            console.warn('Attribute ' + aname + ' differs: ');
            console.log('A:', avalue);
            console.log('B:', bvalue);
        }
    }

    console.log('------------------------------------------');
})($0,$1); 
```

**如何使用它？**

依次检查要比较的两个元素，然后将上面的代码粘贴到控制台。

**结果**

![提供的片段的示例输出](../Images/e711fdee4b1d3e67da57a966d6c10e64.png)

# transactions - 扭曲的 adbapi 事务何时真正提交？

> ID：12592481
> 
> 赞同：4
> 
> 时间：2012-09-25T23:20:16.267
> 
> 标签：transactions, twisted, cyclone

我在旋风网络服务器中使用 adbapi。首先，我的处理程序将一些内容写入 SQL 数据库，然后向另一个 Web 服务器发出 HTTP 请求。如果该 HTTP 请求失败，我希望数据库事务回滚。但是，我没有得到那种效果。查看文档，它说

> 该函数将在线程中使用 twisted.enterprise.adbapi.Transaction 调用，它基本上模仿了 DB-API 游标。在所有情况下，数据库事务将在您的数据库使用完成后提交，除非引发异常，在这种情况下它将回滚。

这并不像我想要的那样精确。我的“数据库使用完成”到底是什么时候？是在调用处理程序的 self.finish() 方法时吗？传递给 ConnectionPool.runInteraction() 的方法何时完成？

这是我的代码

```
class AccountCreationHandler(BaseRequestHandler):
    @cyclone.web.asynchronous
    def post(self, accessKey, *args, **kwargs):
        try:    
            d = connPool.runInteraction(self.saveStuffToDatabase)
            d.addCallback(self.callWebServer)
            d.addCallback(self.formatResult)
            d.addErrback(self.handleFailure)

        except Exception, e:
            self.handleException(e)

    def saveStuffToDatabase(self, txn):
        txn.execute("INSERT INTO Table1 (f1) VALUES ('v1')")

    def callWebServer(self):
        agent = Agent(reactor)
        hdrs = Headers({ "Content-type": ["application/json"] })
        values = json.dumps({ "someField": 123 })
        body = SimpleProducer(values)
        url = "http://somewebserver.com"
        d = agent.request("POST", url, hdrs, body)
        d.addCallback(self.handleWebResponse)
        return d

    def handleWebResponse(self, response):
        if response.code == 200:
            d = Deferred()
            receiver = SimpleReceiver(d)
            response.deliverBody(receiver)
            d.addCallback(self.saveWebServerResults)
            return d
        else:
            raise Exception("web server failed with http status code %d" % response.code)

    def saveWebServerResults(self, body):
        self.results = body

    def formatResult(self):    
        self.finish(self.results)

class SimpleProducer(object):
    implements(IBodyProducer)

    def __init__(self, body):
        self.body = body
        self.length = len(body)

    def startProducing(self, consumer):
        consumer.write(self.body)
        return succeed(None)

    def pauseProducing(self):
        pass

    def stopProducing(self):
        pass

class SimpleReceiver(Protocol):
    def __init__(self, d):
        self.buf = ''
        self.d = d

    def dataReceived(self, data):
        self.buf += data

    def connectionLost(self, reason):
        if type(reason.value) == ResponseDone:
            self.d.callback(self.buf)
        else:
            self.d.errback(reason) 
```

如果 Web 服务器抛出错误或与它的连接超时，或者基本上如果代码通过 saveStuffToDatabase 方法，则在发生错误时不会回滚。

我猜这意味着当传递给 ConnectionPool.runInteraction() 的方法完成而没有抛出异常时，事务就被提交了。如果是这样的话，我想我必须把所有东西，包括对 web 服务器的调用同步放在 saveStuffToDatabase() 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:12:27.537

好吧，我使用同步调用重新实现了代码，它看起来确实可以正常工作。查看 runInteraction() 方法的文档，它变得更加清晰：

> def runInteraction(self, 交互, *args, **kw):
> 
> 与数据库交互并返回结果。“交互”是一个可调用对象，它将在使用池连接的线程中执行。它将作为参数传递一个 Transaction 对象（其接口与您选择的 DB-API 模块的数据库游标的接口相同），其结果将作为 Deferred 返回。**如果运行该方法引发异常，则事务将回滚。如果该方法返回一个值，则事务将被提交。**

# ruby-on-rails - Rails 更短的“time_ago_in_words”

> ID：12592485
> 
> 赞同：12
> 
> 时间：2012-09-25T23:20:52.603
> 
> 标签：ruby-on-rails, time

除了“time_ago_in_words”之外，rails 中是否有不同的时间计算？我希望能够只使用 'h' 几个小时 'd' 天 'm' 几个月......例如。3d，或 4h，或 5m

我的代码现在...

```
<%= time_ago_in_words(feed_item.created_at) %> ago. 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-26T08:34:45.343

构成此字符串的组件可以本地化，并且位于 datetime.distance_in_words 命名空间中

例如棍子

```
en:
  datetime:
    distance_in_words:
      x_minutes:
        one: "1m"
        other: "%{count}m" 
```

轨道会说 10m 而不是 10 分钟。根据需要重复数小时、数天等。您可以在 action_view 中检查[locales/en.yml](https://github.com/svenfuchs/rails-i18n/blob/master/rails/locale/en.yml)以获取所有键。

如果您只想要短格式，您可以创建一个仅使用这些键的伪语言环境并像这样使用它

```
time_ago_in_words created_at, false, :locale => :en_abbrev 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-06-17T16:44:10.733

在较新版本的 rails 中，您可以将范围指定为方法的选项，如下所示：

```
time_ago_in_words(company.updated_at, scope: 'datetime.distance_in_words.abbrv') 
```

然后你只需要像这样构造你的常规 i18n 文件：

```
en:
  datetime:
    distance_in_words:
      abbrv:
        about_x_hours:
          one: ~ 1h
          other: ~ %{count}h
        about_x_months:
          one: ~ 1mo
          other: ~ %{count}mo
        about_x_years:
          one: ~ 1y
          other: ~ %{count}y
        almost_x_years:
... 
```

文档中也提供了此信息： [https ://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-distance_of_time_in_words](https://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-distance_of_time_in_words)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-04-30T04:38:37.803

这里有一些其他的方法来做到这一点。您像平常一样运行该方法，然后在字符串上使用[gsub 。](https://ruby-doc.org/core-2.1.4/String.html#method-i-gsub)

链式

```
string.gsub(/ mi.*/, 'm')
      .gsub(/ h.*/, 'h')
      .gsub(/ d.*/, 'd')
      .gsub(/ mo.*/, 'mo')
      .gsub(/ y.*/, 'y') 
```

哈希

```
string.gsub(/ .+/, { 
  ' minute'=> 'm', ' minutes'=>'m', 
  ' hour' => 'h', ' hours' => 'h', 
  ' day' => 'd', ' days' => 'd', 
  ' month' => 'mo', ' months' => 'mo', 
  ' year' => 'y', ' years' => 'y' 
}) 
```

堵塞

```
string.gsub(/ .+/) { |x| x[/mo/] ? 'mo' : x[1] } 
```

除了字符串是`"less than a minute"`. 链式解决方案返回`"less than a minute"`。哈希解决方案返回`"less"`. 块解决方案返回`"lesst"`。

只需为这种情况更改语言环境文件

```
en:
  datetime:
    distance_in_words:
      less_than_x_minutes:
        one: '<1m' 
```

或者在方法的顶部添加一个 return to 子句

```
def my_method(string)
  return '<1m' if string == 'less than a minute'
  # code
end 
```

注意：不包括选项的解决`include_seconds: true`方案。

# cocoa - 在外观上指定在 NSPopover 内编辑 NSTextField

> ID：12592488
> 
> 赞同：3
> 
> 时间：2012-09-25T23:21:00.993
> 
> 标签：cocoa, popover, nstextfield, first-responder, nspopover

我正在开发一个应用程序，该应用程序提供一个包含许多 NSTextField 的 NSPopover。虽然我可以按预期在这些字段之间切换，但弹出框正在选择一个特定的文本字段，当它出现时处于编辑状态，这不是我要编辑的字段；我希望能够以编程方式（或在界面生成器中）定义弹出框外观上正在编辑的文本字段。我怎样才能做到这一点？

我已经通过为所有涉及的各种文本字段连接 IB 插座来设置适当的键视图循环，并且我已经将弹出框的`nextResponder`属性连接到我想首先编辑的文本字段，但这似乎没有效果 - 弹出框仍将选择其首选文本字段而不是我的。[Window Programming Guide](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/WinPanel/Tasks/KeyboardInterfaceWindows.html)建议我将窗口的出口设置`initialFirstResponder`为我想要选择的视图，但是 NSPopover 不是 NSWindow 并且没有`initialFirstResponder`属性（除非我遗漏了一些明显的东西）。

当出现 NSPopover 时，有什么方法可以指定我要编辑的 NSTextField 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-28T12:34:39.330

我想你说你尝试使用`-makeFirstResponder:`和传递文本字段。这将设置窗口的`firstResponder`，但这`initialFirstResponder`与窗口必须`initialFirstResponder`设置为不同的，而不是`nil`为了尊重关键视图循环。( [Source](http://lists.apple.com/archives/cocoa-dev/2007/Jan/msg01328.html) ) 对您尝试的内容进行轻微调整对我有用：

```
- (void)popoverWillShow:(NSNotification *)notification
{
    // Set the window's initialFirstResponder so that the key view loop isn't auto-recalculated.
    [[myField window] setInitialFirstResponder:myField];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T02:37:11.710

我认为您可以通过将所有您不想关注的文本字段设置为“可选择”而不是 IB 中的“可编辑”来完成这项工作，这应该将您想要开始的一个文本字段作为第一响应者. 然后，在您的 popoverDidShow: 方法中，将它们全部设置回可编辑状态，您应该能够像往常一样在它们之间切换。

# c# - 键入“this”后，ReSharper 7 自动完成错误地显示“无建议”。

> ID：12592491
> 
> 赞同：5
> 
> 时间：2012-09-25T23:21:08.250
> 
> 标签：c#, autocomplete, resharper, resharper-7.0

我正在使用带有 .NET 4.0 的 Visual Studio 2010 SP 1，并且刚刚升级到 ReSharper 7。升级后，当我键入“this.”时，Resharper 自动完成*始终*显示“无建议”，如下图所示：

![在此处输入图像描述](../Images/5d03bf0c20734f8bbd0ddf5307253c63.png)

如果我此时键入 ctrl+space，它会提出建议。如果我点击转义（退出自动完成）然后删除并重新键入点，我也可以获得建议。无论哪种方式，功能自动完成看起来像这样：

![在此处输入图像描述](../Images/1127c913a7b49f7a9b81b14212a97b76.png)

我真的非常希望自动完成功能在我输入“this”后立即自动工作。你能帮我吗？

我尝试过暂停和取消暂停 ReSharper、重新启动 Visual Studio、在 ReSharper 暂停的情况下重新启动 Visual Studio，以及组合 ReSharper 自动完成选项。我尝试清除 ReSharper 缓存，暂停 ReSharper，*然后*重新启动 Visual Studio。在我看来，它似乎与这些事情无关。

我也试过输入“this”。非常缓慢并且行为没有改变；这似乎不是竞争条件。Visual Studio 本身自动完成正确，但使用 ReSharper 自动完成总是有这个问题。

提前感谢您提供的任何建议！

**更新**：再次重新启动 Visual Studio 后，如果我键入“this” ，自动完成选择确实会正确显示*一次。*在 VS / ReSharper 似乎完全加载之前（它在我输入时打嗝，当它恢复时，自动完成是正确的）。随后的尝试恢复到不良行为。

这真的很奇怪。我在这里向 JetBrains 提出了问题：

[http://youtrack.jetbrains.com/issue/RSRP-330185](http://youtrack.jetbrains.com/issue/RSRP-330185)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T23:26:24.890

我正在使用相同的设置并且它有效。您的问题可能由以下原因引起：

*   有缺陷的 ReSharper 安装
*   干扰 Resharper IntelliSense 的其他插件
*   您的计算机速度有点慢，并且构建列表的速度不够快

编辑：我会重新安装 resharper （完全删除它 - 不要修复），然后再试一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-03T16:43:29.920

您可以禁用 ResharperIntellisense 或从 Resharper->Options->Intellisense->General 限制它。我认为这是因为我的计算机也太慢或VS2010有问题。

# java - 无法垂直检测connect 4 win

> ID：12592499
> 
> 赞同：1
> 
> 时间：2012-09-25T23:21:43.283
> 
> 标签：java, arrays

现在我有一个学校作业，我必须在没有使用数组的 gui 的情况下用 java 创建一个 connect 4 游戏。到目前为止，我已经能够让游戏连续检测到水平四个，但我似乎无法连续检测到垂直四个。最初我的阵列是 6x7，但我已将其更改为 5x5，只是为了测试交换阵列的概念。为了减少混乱，我只将代码的一部分包含在垂直检测中。

```
for (column = 0; column < board.length; column++) {

            count_piece = 0;
            max = 0;
            for (row = 0; row < board.length; row++) {
                if (max < count_piece) {
                    max = count_piece;
                }
                if (board[column][row] == 'X') {
                    count_piece++;
                } else {
                    count_piece = 0;
                }

            }

        }
        System.out.println(max);
        if (max == 4) {
            System.out.println("\nYou Win!");
            break;
        } 
```

如果您需要更多信息或有任何不清楚的地方，请告诉我，我很乐意提供更多信息。

编辑：这是一个倒循环。

```
for (row = 0; row < board.length; row++) {
        count_piece = 0;
        max = 0;
        for (column = 0; column < board.length; column++) {

            if (max < count_piece) {
                max = count_piece;
            }
            if (board[column][row] == 'X') {
                count_piece++;
            } else {
                count_piece = 0;
            }

        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T23:25:32.813

如何反转你的循环，这样你的内部循环改变将是列而不是行？

还要使您的内部循环采用您所在的单个数组的长度。

所以不要`board.length`使用类似的东西 `board[i].length`

**编辑**

我认为您内部循环中的逻辑是错误的...

试试这个：

```
if (board[row][column] == 'X') {
    count_piece++;
    if(count_piece == 4) {
        System.out.println("you win");
        return;
    }
} else {
    count_piece = 0;
} 
```

这是任何大小数组的水平和垂直检查

```
int count_piece = 0;

        //Checking Vertical Win
        for (int row = 0; row < board.length; row++) {
            count_piece = 0;
            for (int column = 0; column < board[row].length; column++) {

                if (board[row][column] == 'X') {
                    count_piece++;
                    if (count_piece == 4) {
                        System.out.println("you win");
                        return;
                    }

                } else {
                    count_piece = 0;
                }

            }
        }

        //Checking Horizontal Win
        for (int column = 0; column < board.length; column++) {
            count_piece = 0;
            for (int row = 0; row < board[column].length; row++) {

                if (board[row][column] == 'X') {
                    count_piece++;
                    if (count_piece == 4) {
                        System.out.println("you win");
                        return;
                    }

                } else {
                    count_piece = 0;
                }

            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T23:28:40.620

我看到的主要问题是在增加 count_piece 之前分配 max （这意味着您必须连续获得 5 个）。也正如其他人所说的长度可能有问题（不熟悉java所以你可能会逃脱它，因为长度将是5或25，这取决于它是否需要所有索引或只是第一列索引。不管你什么时候回到6x7它会中断。此外，您的代码当前正在执行的操作是遍历每一列并检查该行是否连续有 4 个。您想要的是在两个轴上连续检查 4 个（我的解决方案是计算行数变量和列计数变量（除非您需要对角线））。在第一个 for 循环上方添加 count_piece_Col=0; max=0; 并以类似于行数的方式递增它

*懒惰的方式

```
 for(column=0;column<board.length;column++)   
            {
                count_piece=0; max_r=0;
                for(row=0;row<board.length;row++)
                {

                if(max_r<count_piece) 
                    {
                        max_r=count_piece;
                    }
                    if(board[column][row]=='X')
                    {
                        count_piece++;
                    }
                    else
                    {
                        count_piece=0;
                    }

            }

        }   
    for(row=0;row<board.length;row++)   
            {
                count_piece=0; max_c=0;
                for(column=0;column<board.length;column++)
                {

                if(max_c<count_piece) 
                    {
                        max_c=count_piece;
                    }
                    if(board[column][row]=='X')
                    {
                        count_piece++;
                    }
                    else
                    {
                        count_piece=0;
                    }

            }

        } 
```

# java - 无法在未调用 looper.prepare() 的线程内创建处理程序？

> ID：12592500
> 
> 赞同：0
> 
> 时间：2012-09-25T23:21:45.620
> 
> 标签：java, android, handler, progressdialog

当我使用 eclipse 运行应用程序时，它显示一个错误： `"can't create handler inside thread that hos not called looper.prepare()"`我不明白为什么。

这是我的代码的一部分

```
public void execute_web_service() {
    progressd = ProgressDialog.show(liste_voyage.this, "", "Chargement...", true,
            false);

    Thread thread = new Thread(liste_voyage.this);
    thread.start();

} 

public void run() {

    get_liste_arrives();

    handler.sendEmptyMessage(0);
}

private Handler handler = new Handler() {
    @Override
    public void handleMessage(Message msg) {
        progressd.dismiss();
        afficher_liste_arrives();

   }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T23:23:39.427

如果创建此类实例的代码在主应用程序线程以外的线程上运行，则使用上述代码会出现此错误。

# python - 序列化 MD5 计算状态并稍后恢复？

> ID：12592501
> 
> 赞同：10
> 
> 时间：2012-09-25T23:21:52.697
> 
> 标签：python, security, hash, md5

我想序列化/反序列化 md5 上下文。但我不知道如何在 Python 中做到这一点。我想做的伪代码。

```
import md5
# Start hash generation
m = md5.new()
m.update("Content")

# Serialize m
serialized_m = serialize(m)

# In another function/machine, deserialize m
# and continue hash generation
m2 = deserialize(serialized_m)
m2.update("More content")
m2.digest() 
```

为此有 C+​​+ 库。有没有一个用于 Python 的？为什么 md5 库不支持它？是否存在安全问题？谢谢。

编辑：我想这样做是因为例如，HTTP 服务器想要接受不同 HTTP 请求中的流数据。在请求之间以某种方式序列化 md5 上下文会很方便。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T02:05:36.307

HASH 对象不可序列化：[如何在 Python 中序列化哈希对象](https://stackoverflow.com/questions/8962523/how-to-serialize-hash-objects-in-python)

假设您可以传递未散列的数据：

```
from Crypto.Hash import MD5

# generate hash
m = MD5.new()
s = "foo"
m.update(s)

# serialize m
serialized = s

# deserialize and continue hash generation
m2 = MD5.new(serialized)
if m2.hexdigest() == m.hexdigest():
    print "success"
m2.update("bar") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T17:00:54.830

我问了 Guido V Rossum 先生。他回答说：“我认为没有办法。但是它可能会提出一个不错的功能请求。你可以向 bugs.python.org 提交一个。” 所以我做了。

[http://bugs.python.org/issue16059](http://bugs.python.org/issue16059)

# python - 找不到 setup.py 文件来安装 PIL

> ID：12592505
> 
> 赞同：0
> 
> 时间：2012-09-25T23:23:03.367
> 
> 标签：python, python-imaging-library

我正在按照下一页上的说明进行操作，但我不确定它指的是哪个 setup.py 文件我需要更改的地方`JPEG_ROOT = libinclude(“/usr/local”)`（我是初学者）。Mac OS X，Python 2.7。

这是[链接](http://appelfreelance.com/2010/06/libjpeg-pil-snow-leopard-python2-6-_jpeg_resync_to_restart/)，下面是摘要：

> 接下来获取 PIL 并解压缩它
> 
> [http://effbot.org/downloads/Imaging-1.1.6.tar.gz](http://effbot.org/downloads/Imaging-1.1.6.tar.gz) tar -zxvf Imaging-1.1.6.tar.gz cd Imaging-1.1.6
> 
> 如果您已经有 PIL，我建议您运行
> 
> sudo rm -Rf 构建
> 
> 清理任何现有的构建，这给我带来了很多错误和白发！
> 
> 在你的 setup.py 文件中运行找到 JPEG_ROOT
> 
> 修改它，使它看起来如下
> 
> JPEG_ROOT = libinclude(“/usr/local”)
> 
> 接下来进入构建
> 
> 须藤 python setup.py 构建

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T23:25:59.130

当您解压缩档案时，位于 Imaging-1.1.6 的根目录中的是 setup.py。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T23:25:35.640

它指`setup.py`的是提取文件的根目录中的 。

# php - 如何在 wordpress 中按字段过滤自定义帖子？

> ID：12592506
> 
> 赞同：1
> 
> 时间：2012-09-25T23:23:24.840
> 
> 标签：php, wordpress, filter, field, custom-post-type

好的，非常简单的任务，我只是不擅长 PHP。

我有一个页面，我想在其中使用样式列表列出一些员工。这是页面 - [http://www.themontessoripeople.co.uk/montesori/?post_type=people](http://www.themontessoripeople.co.uk/montesori/?post_type=people)

我下载了一个“自定义内容类型”插件并添加了“人”的内容类型并添加了相应的字段。现在我想过滤我通过名为“层次结构”的自定义字段添加的帖子。

这是我希望页面显示的方式 - [http://i47.tinypic.com/oqymwh.jpg](http://i47.tinypic.com/oqymwh.jpg)

自定义字段“hierarchy”包含“management”、“babies_room”和“toddlers_room”的房间变量。

如何修改下面的代码以按其中包含的值过滤帖子`<?php print_custom_field('hierarchy'); ?>`？

```
<?php $col = 1; ?>      
    <?php if (have_posts()) : ?>        
        <?php while (have_posts()) : the_post(); ?>         
            <?php if ($col == 1) echo "<div class=\"row\">"; ?>

                <div class="post col<?php echo $col;?>" id="post-<?php the_ID(); ?>">

                            <div class="people-spacer">

                                <div class="people"><a class="animate" >
                                <div class="bio">
                                <p class="titles"><?php the_title(); ?><br/>
                                <span class="job"> <?php print_custom_field('job'); ?></span> </p><br />
                                </div>
                                <img src="<?php print_custom_field('staff_image:to_image_src'); ?>" width="160" height="160" alt="<?php the_title(); ?>-image" />
                                </div>
                                <div class="people-link-edit"><?php edit_post_link('Edit Post', ''); ?></div>
                            </div>
                </div>

            <?php if ($col == 1) echo "</div>"; (($col==1) ? $col=2 : $col=2); ?>   
        <?php endwhile; ?> 
```

谢谢，本。

这是显示两组过滤结果以供参考的工作代码 -

```
<?php $col = 1; ?>
<?php if (have_posts()) : ?>

<div class="text-box">

<h2>Management</h2>
<?php while (have_posts()) : the_post(); ?>
<?php if (get_custom_field('hierarchy') != "management") continue; ?>

<?php if ($col == 1) echo "<div class=\"row\">"; ?>
<div class="post col<?php echo $col;?>" id="post-<?php the_ID(); ?>">
 <div class="people-spacer">
  <div class="people"><a class="animate" >
   <div class="bio">
    <p class="titles">
     <?php the_title(); ?>
     <br/>
     <span class="job"> <?php print_custom_field('job'); ?></span> </p>
    <br />
   </div>
   <img src="<?php print_custom_field('staff_image:to_image_src'); ?>" width="160" height="160" alt="<?php the_title(); ?>-image" /> </div>
  <div class="people-link-edit">
   <?php edit_post_link('Edit Post', ''); ?>
  </div>
 </div>
</div>
<?php if ($col == 1) echo "</div>"; (($col==1) ? $col=2 : $col=2); ?>
<?php endwhile; ?>

</div><!-- close text box -->

<div class="text-box">

<h2>Babies Room</h2>

<?php while (have_posts()) : the_post(); ?>
<?php if (get_custom_field('hierarchy') != "babies_room") continue; ?>

<?php if ($col == 1) echo "<div class=\"row\">"; ?>
<div class="post col<?php echo $col;?>" id="post-<?php the_ID(); ?>">
 <div class="people-spacer">
  <div class="people"><a class="animate" >
   <div class="bio">
    <p class="titles">
     <?php the_title(); ?>
     <br/>
     <span class="job"> <?php print_custom_field('job'); ?></span> </p>
    <br />
   </div>
   <img src="<?php print_custom_field('staff_image:to_image_src'); ?>" width="160" height="160" alt="<?php the_title(); ?>-image" /> </div>
  <div class="people-link-edit">
   <?php edit_post_link('Edit Post', ''); ?>
  </div>
 </div>
</div>
<?php if ($col == 1) echo "</div>"; (($col==1) ? $col=2 : $col=2); ?>
<?php endwhile; ?>

</div><!-- close text box --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T23:41:06.923

我已经简化了你的代码。过滤器也被添加：

```
<?php
    $col = 1;
    while (have_posts())
    {
        the_post();
        if ($col == 1) echo "<div class=\"row\">";

        // filter
        $hierarchy = get_custom_field('hierarchy');
        // if it does not match continue (skip)
        if ($hierarchy != "boss") continue;
        // if it matches continue (skip)
        //if ($hierarchy == "notboss") continue;

        // needed fields
        $id = the_ID();
        $job = get_custom_field('job');
        $title = the_title();
        $img = get_custom_field('staff_image:to_image_src');
        $edit = edit_post_link('Edit Post', '');

        echo <<< END
                <div class="post col$col" id="post-$id">
                    <div class="people-spacer">
                        <div class="people"><a class="animate" >
                        <div class="bio">
                        <p class="titles">$title<br/>
                        <span class="job">$job</span> </p><br />
                        </div>
                        <img src="$img" width="160" height="160" alt="$title-image" />
                        </div>
                        <div class="people-link-edit">$edit</div>
                    </div>
                </div>
END;

        if ($col == 1) echo "</div>";
        (($col==1) ? $col=2 : $col=2);
    }
?> 
```

编辑：get_custom_field 而不是 print_custom_field。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T23:41:35.663

您可以定义查询参数`query_posts($args)`- 看看[query_posts](http://codex.wordpress.org/Function_Reference/query_posts)。也许你可以试试`get_posts`

# c# - 将 VB6 结构导入 C#

> ID：12592509
> 
> 赞同：2
> 
> 时间：2012-09-25T23:23:32.797
> 
> 标签：c#, struct, vb6, vb6-migration

我的任务是把一些遗留代码转换成一个新系统，我们这里有一些 VB6 结构。有没有办法轻松地将它们转换为 C# 结构？

我可以在 C# 中重新定义结构，但 C# 中没有固定的字符串。（或者也许我误解了）

有什么正确方向的刺激吗？

```
Private Type MapRec
    Name As String * NAME_LENGTH
    Revision As Long
    Moral As Byte
    Up As Integer
    Down As Integer
    Left As Integer
    Right As Integer
    Music As String
    BootMap As Integer
    BootX As Byte
    BootY As Byte
    Tile() As TileRec
    Npc(1 To MAX_MAP_NPCS) As Integer
    NpcSpawn(1 To MAX_MAP_NPCS) As SpawnRec
    TileSet As Integer
    Region As Byte
End Type 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T00:10:20.627

关于固定长度的字符串，哎呀。这不会发生，因为没有等效的构造。除非 Jon Skeet 或 Anders Hejlsberg 知道的不同，并且可以被援引来衡量——我认为即使他们知道方法，因为没有方法，我很确定。

另一方面，固定长度的字符串绝对是撒旦的。这就是为什么他们没有将它们包含在 .NET 中。:-)

如果您要问我如何*将*上述 MapRec 对象转换为 C# 中可用的对象，那么您可以在结构和类之间进行选择。就个人而言，我不喜欢结构。如果你使用了一个类，那么你可以通过你的 setter 和 getter 来实现一种混杂的固定字符串。如本例所示，我将如何实现您的 Type MapRec：

```
public class MapRec
{
    private const int MAX_MAP_NPCS = 25;
    private int fixedLength1 = 10;
    private string _name;

    public string Name
    {
        get
        {
            return _name;
        }
        set
        {
            if (value.Length != fixedLength1)
            {
                if (value.Length < fixedLength1)
                {
                    _name = value.PadRight(fixedLength1);
                }
                else
                {
                    _name = value.Substring(0,fixedLength1);
                    // or alternatively throw an exception if 
                    // a 11+ length string comes in
                }
            }
            else
            {
                _name = value;
            }
        }
    }

    // Constructor
    public MapRec()
    {
        Npc = new int[MAX_MAP_NPCS];
        NpcSpawn = new SpawnRec[MAX_MAP_NPCS];
    }

    public long Revision { get; set; }
    public byte Moral { get; set; }
    public int Up { get; set; }
    public int Down { get; set; }
    public int Left { get; set; }
    public int Right { get; set; }
    public string Music { get; set; }
    public int BootMap { get; set; }
    public byte BootX { get; set; }
    public byte BootY { get; set; }
    public TileRec[] Tile { get; set; }
    public int[] Npc { get; set; }
    public SpawnRec[] NpcSpawn { get; set; }
    public int TileSet { get; set; }
    public byte Region { get; set; }
} 
```

最后，除非确实需要一个固定长度的字符串（也许 Microsoft.VisualBasic.VBFixedStringAttribute 可以完成这项工作），否则我建议远离它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T23:42:23.647

您可能对[VBFixedStringAttribute](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.vbfixedstringattribute.aspx)和[VBFixedArrayAttribute](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.vbfixedarrayattribute.aspx)感兴趣，尽管它们只在少数地方使用。

另见[这个问题](https://stackoverflow.com/questions/11826460/converting-fixed-length-statement-from-vb6-to-vb-net)和[这个问题](http://social.msdn.microsoft.com/Forums/en-US/vbinterop/thread/e9b0e85b-2f3a-4be0-b65d-f7c6de89d7d7)。

# unix - 提取文件列表并创建包含此列表的新文件

> ID：12592513
> 
> 赞同：0
> 
> 时间：2012-09-25T23:24:22.173
> 
> 标签：unix, sed, awk

我是一名研究人员，我在 Unix 命令方面的技能有限。我目前正在处理一个包含大约 1000 个文件的文件夹，我必须从该文件夹中提取一些文件名并创建另一个包含这些文件名的文件（配置文件）。

基本上，该文件夹具有以下格式的文件名：

```
1_Apple_A_someword.txt 
1_Apple_B_someword.txt 
2_Apple_A_someword.txt 
2_Apple_B_someword.txt 
3_Apple_A_someword.txt 
3_Apple_B_someword.txt 
```

依此类推，直到

```
1000_Apple_A_someword.txt
1000_Apple_B_someword.txt 
```

我只想提取所有包含“Apple_A”的文件。另外，我想为这些“Apple_A”文件中的每一个创建另一个具有“标签”（Unix变量）的文件，其值是文件的名称。此外，“标签”是文件名的一部分（直到单词“Apple”）例如，

```
1_Apple=1_Apple_A_someword.txt
2_Apple=2_Apple_A_someword.txt
3_Apple=3_Apple_A_someword.txt 
```

等等……直到

```
1000_Apple=1000_Apple_A_someword.txt 
```

你能告诉我一个执行此操作的单行 Unix 命令吗？也许使用“awk”和“sed”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T23:28:41.993

尝试

```
ls *Apple_A* | sed 's/\(\(.*Apple\).*\)$/\2=\1/' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T05:58:36.270

这可能对您有用（GNU sed）：

```
ls -1 | sed '/^\([0-9]\+_Apple\)_A/!d;s//\1=&/' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T04:16:31.843

一个 awk 版本，仅供参考：

```
ls -1 | awk -vFS='_' '/Apple_A/ {print $1"_"$2"="$0}' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T06:00:13.620

```
ls -1|perl -F_ -ane 'if($_=~m/Apple_A/){print $F[0]."_".$F[1]."=".$_}' 
```

# factory-pattern - java jdk中的工厂模式示例

> ID：12592520
> 
> 赞同：1
> 
> 时间：2012-09-25T23:25:18.787
> 
> 标签：factory-pattern

在下面的链接 [中：Java 核心库中的 GoF 设计模式示例](https://stackoverflow.com/questions/1673841/examples-of-gof-design-patterns) java.lang.Object#toString() 是工厂模式的示例。我对此感到困惑。到目前为止我所了解的是工厂模式用于创建对象。有人可以更清楚地解释吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T23:44:02.090

本质上，工厂模式是一个抽象类或接口，它指定了一种生产*方法*。然后你有一个实现，并且从那个实现中，你可以构建那个*东西*。

在这里，我们有：

抽象类或接口：对象

构建方法：toString()

实现：任何java对象

产品：一根绳子

所以，是的，这是一个奇怪的例子，还有更好的例子，但它确实适合工厂的模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-03T13:22:32.523

当我们有一个具有多个子类的超类并且基于输入，我们需要返回一个子类时，使用工厂设计模式。通常，存在 getInstance() 方法，它根据提供的输入返回不同类型的对象。为了更好地理解它，您可以参考这个示例，在 Java API 中，calender 类根据输入返回不同的日历对象：

```
static Calendar getInstance()
Gets a calendar using the default time zone and locale.

static Calendar getInstance(Locale aLocale)
Gets a calendar using the default time zone and specified locale.

static Calendar getInstance(TimeZone zone)
Gets a calendar using the specified time zone and default locale.

static Calendar getInstance(TimeZone zone, Locale aLocale)
Gets a calendar with the specified time zone and locale. 
```

JDK中使用的工厂模式示例：

`java.util.Calendar, ResourceBundle and NumberFormat getInstance() methods`

# java - 如何在Java中将声音文件表示为字节数组

> ID：12592522
> 
> 赞同：1
> 
> 时间：2012-09-25T23:25:22.030
> 
> 标签：java, audio

我正在使用一些需要**以字节数组**表示的数据的算法，当我处理文本文件时没问题，但我不知道如何将声音文件放入那种数组中。我没有指定该声音文件的扩展名，所以它可以是最简单的。***那么：如何将声音文件放入 Java 中的字节数组中？***

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T23:47:17.013

或者，如果您可以使用 Apache 通用 IO 库，FileUtils 类包含一个[readFileToByteArray](https://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html#readFileToByteArray%28java.io.File%29)方法，用于在一行中将文件读入字节数组：

```
byte[] bytes = FileUitls.readFileToByteArray(file); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T23:39:24.283

> 那么：如何将声音文件放入 Java 中的字节数组中？

```
File f = new File(soundFilePath, soundFileName);
byte[] soundFileByteArray = new byte[f.length()];
FileInputStream fis = new FileInputStream(f);
fis.read(soundFileByteArray); 
```

# linux - Linux bash pidof 命令不起作用

> ID：12592527
> 
> 赞同：2
> 
> 时间：2012-09-25T23:25:36.700
> 
> 标签：linux, pid, webfaction

这是一个小错误，我无法弄清楚。当我输入`pidof`关闭进程的命令时，命令行只是执行 pidof 并转到下一行，没有任何反应。没有错误信息，什么都没有。

例子：

```
pidof supervisord 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T23:27:52.807

这是 pidof 未找到该名称的任何进程时的预期行为。

此外，它不会杀死进程，只是返回它的进程 ID。您想使用“killall”来实际杀死一个进程，或者结合使用“pidof”来获取 PID，并使用“kill”来杀死该 PID。

```
killall supervisord 
```

或者

```
kill $(pidof supervisord) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T06:09:59.933

pidof查看进程列表的方式如下

```
root       526  0.9  0.0  56556 11788 ?        Ss   Sep19  89:39 /usr/bin/python 
/usr/bin/supervisord 
```

所以，

```
 # pidof python  
 526 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-11-22T18:33:12.253

尝试

```
pgrep -f "supervisord" 
```

# math - 通过比较 3d 空间中的点来查找相机位置

> ID：12592529
> 
> 赞同：2
> 
> 时间：2012-09-25T23:25:38.363
> 
> 标签：math, 3d, geometry

我有两张由同一物体的深度相机拍摄的图像。我可以在对象上标记一些（比如 5 个）相同的点，并获取它们相对于相机位置的坐标。是否可以根据这些坐标在第二张图像中找到相机位置，假设第一张图像为 0,0,0？

例子：

**图 1**
摄像机位置：0,0,0
摄像机角度（俯仰、滚动、航向）：0,0,0

点 1： 21.3、33.2、44.1 点 2：
28.3、39.2、41.5
点 3：23.4、31.1、53.4

**图 2**
摄像头位置： ?
相机角度： ？

点1：23.4、31.2、44.7
...

我假设基于点之间以及点与相机之间的距离可以计算。可以用一个简单的脚本来完成吗，例如在 python 中，并且没有 3d 库？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:40:42.897

如果您对相机一无所知，我认为两张图像是不可能的。除了绝对缩放模糊性（例如：如果将场景中的所有内容缩小 10 倍，您的相机图像将是相同的......），显然存在深度缩放模糊性，没有匹配对的数量可以使固定。您可以通过在 3d 点集之间提供一定数量的绝对距离值，或通过提供必要的附加长度比例的其他方法来解决这种歧义。我找到了[一篇](http://users.cecs.anu.edu.au/~hartley/Papers/cvpr92/final.pdf)关于该主题的论文，但尚不清楚它解决的问题是否正是您正在寻找的问题。

如果您首先通过测量其几何成像特征来*校准*相机，您可以更轻松地计算两张照片的相对相机位置（尽管缺少额外的信息，您仍然会遇到绝对缩放问题！）。如果我没记错的话，您至少需要 3 分，但 4 分的数学要简单得多。关于该主题的一本书（在线示例章节）是[计算机视觉中的多视图几何](http://www.robots.ox.ac.uk/~vgg/hzbook/)；另一个是[多幅图像的几何](https://rads.stackoverflow.com/amzn/click/com/0262062208)。

[在OpenCV](http://opencv.willowgarage.com/documentation/python/camera_calibration_and_3d_reconstruction.html)中有一个做这种事情的库。但是，它并没有一个功能可以完全满足您的需求——弄清楚如何使用它确实需要对它背后的数学有一定的了解，因此您需要阅读有关该主题的书。

# javascript - Difference between object and function object | How to test for?

> ID：12592542
> 
> 赞同：0
> 
> 时间：2012-09-25T23:26:57.243
> 
> 标签：javascript, jquery

See this fiddle for a good example of a function object and the object that `$()` returns.

[http://jsfiddle.net/tFhFD/3/](http://jsfiddle.net/tFhFD/3/)

Reference:

[http://code.jquery.com/jquery-latest.js](http://code.jquery.com/jquery-latest.js)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T23:30:47.573

No, that's not how you create a function object, that's how you create an object.

To create a function object, you just create a function. For example:

```
var function_object = function(){}; 
```

Or:

```
function F(){}
var function_object = F; 
```

As a function is also an object, you can add properties to it just like any other object:

```
function_object.myProperty = 42;

function_object.doSomething = function(){}; 
```

# python - TypeError：期望一个字符缓冲区对象

> ID：12592544
> 
> 赞同：9
> 
> 时间：2012-09-25T23:27:03.813
> 
> 标签：python, csv, python-2.x

我正在尝试将列表列表写入新文件，但出现此错误：

> 回溯（最后一次调用）：文件“”，第 1 行，在 dowork() 文件“C:\Python27\work\accounting\formatting quickbooks file\sdf.py”，第 11 行，在 dowork WriteFile() 文件“C :\Python27\work\accounting\formatting quickbooks file\sdf.py", line 71, in WriteFile f.write(thefile) TypeError: expected a character buffer object

**如何将列表的列表写入文件？**

这就是我的写作方式：

```
def WriteFile():
    global thefile
    f = open("output"+'.csv','w')
    f.seek(0)
    f.write(thefile)
    f.close() 
```

如果您需要，这里是完整的源代码：

```
import csv

thefile = []
output = []

def dowork():
    sourceFile='e.csv'
    thefile=ReadFile(sourceFile)
    CleanFile(sourceFile)
    ProcessFile()
    WriteFile()

def ReadFile(filename):
    return list(csv.reader(open(filename, 'rb'), delimiter=',', quotechar='"'))[1:]

def CleanFile(sourceFile):
    global thefile
    thefiletmp=[]
    for i, line in enumerate(thefile):
        if line[2]=='':
            del thefile[i]
        else:
            thefiletmp.append(line[4:])
    thefile=thefiletmp

def ProcessFile():
    global thefile
    iCompany=1
    iNum=0
    iDate=2
    iAging=3
    iBalance=4
    COMPANIES=GetDistinctValues(1)
    mytemparray=[]
    mytempfile=[]
    for company in COMPANIES:
        for line in thefile:
            if line[iCompany]==company:
                mytemparray.append(line[iCompany])
                mytemparray.append(line[iNum])
                mytemparray.append(line[iDate])
                if line[2] in range(0,31):
                    mytemparray.append(line[iBalance])
                    mytemparray.append('0')
                    mytemparray.append('0')
                    mytemparray.append('0')
                if line[2] in range(31,61):
                    mytemparray.append('0')
                    mytemparray.append(line[iBalance])
                    mytemparray.append('0')
                    mytemparray.append('0')
                if line[2] in range(61,91):
                    mytemparray.append('0')
                    mytemparray.append('0')
                    mytemparray.append(line[iBalance])
                    mytemparray.append('0')
                if line[2] >90:
                    mytemparray.append('0')
                    mytemparray.append('0')
                    mytemparray.append('0')
                    mytemparray.append(line[iBalance])
                mytempfile.append(mytemparray)
                mytemparray=[]
    thefile=mytempfile

def WriteFile():
    global thefile
    f = open("output"+'.csv','w')
    f.seek(0)
    f.write(thefile)
    f.close()

def GetDistinctValues(theColumn):
    return sorted(list(set(line[theColumn] for line in thefile))) 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-26T00:10:28.690

错误消息的意思是您不能将列表写入文件，只能将“字符缓冲区对象”写入文件，这意味着字符串或其他类似于字符串的东西。

如果您只想以与将列表打印到控制台相同的方式将列表写入文件，则可以编写`str(thefile)`or `repr(thefile)`（甚至使用重定向语法`print`而不是 using `file.write`）。

但是您正在使用该`csv`模块来读取输入，并且可能希望输出格式相同，因此您可能也想使用`csv`它来编写它。

你是这样读的：

```
list(csv.reader(open(filename, 'rb'), delimiter=',', quotechar='"'))[1:] 
```

所以这样写：

```
csv.writer(open('foo.csv', 'wb'), delimiter=',', quotechar='"').writerows(thefile) 
```

我应该提一下，我一开始不会像这样构造代码；我会做这样的事情：

```
with open('input.csv', 'rb') as infile, open('output.csv', 'wb') as outfile:
  incsv = csv.reader(infile, delimiter=',', quotechar='"')
  outcsv = csv.writer(outfile, delimiter=',', quotechar='"')
  incsv.read() # skip first line
  for line in incsv:
    if line[3] != '':
      outcsv.write(ProcessLine(line)) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T23:28:46.090

您不能将列表写入文件；你只能写一个字符串。以某种方式将列表转换为字符串，或者遍历列表并一次写入一个元素。或者您正在使用该`csv`模块，使用它来写入文件。

顺便说一句，调用文件以外的东西（例如列表）`thefile`必然会导致混乱。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T23:29:00.090

thefile 是列表列表，而不是字符缓冲区。

```
for sublist in thefile:
    f.write("".join(sublist))  # perhaps 
```

这里有一些不好的地方，使用全局，命名文件列表，...

（正确答案是 abarnert 的）。

# ios - NSRange 给出无意义的位置

> ID：12592548
> 
> 赞同：3
> 
> 时间：2012-09-25T23:27:27.937
> 
> 标签：ios, nsstring

我正在经历这种奇怪的效果，在 rangeOfString 上调用 location 会返回一个非常大的值，而它不应该......

我的代码如下所示：

```
NSRange range = [string rangeOfString:subString];
NSLog(@"range is %@", NSStringFromRange(range)); 
```

这注销到`range is {2147483647, 0}`

无法弄清楚究竟是为什么。

可能导致这种情况的一些事情：

*   子字符串是使用 NSString 的 initWithBytes 方法从字节数组生成的
*   子字符串告诉我它是一个 NSCFString *，但也说“变量不是 NSString”
*   子字符串按预期登录控制台

非常感谢任何帮助

这里有一些让我觉得很奇怪的东西：

![在此处输入图像描述](../Images/18b639e480b98dc57b354da63a81f788.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T00:30:30.220

这只是意味着您的字符串中不存在您的子字符串，请执行以下操作来验证这一点：

```
NSRange range = [string rangeOfString:subString];
if (range.location == NSNotFound) {
  NSLog(@"String not found");
} else {
  NSLog(@"range is %@", NSStringFromRange(range));
} 
```

# python - Python 请求多部分 HTTP POST

> ID：12592553
> 
> 赞同：6
> 
> 时间：2012-09-25T23:27:57.527
> 
> 标签：python, urllib2, multipartform-data, python-requests

我想知道你如何使用 Python 请求翻译这样的东西？在 urllib2 中，您可以手动操作通过线路发送到 API 服务的数据，但 Requests 声称多部分文件上传很容易。但是，当尝试使用 Requests 库发送相同的请求时，我认为它没有正确地在内容类型中为两个部分中的每一个指定一些关键参数。有人可以对此事有所了解。先感谢您！

```
def upload_creative(self, account_id, file_path):
    """"""
    boundary = '-----------------------------' + str(int(random.random()*1e10))
    parts = []

    # Set account ID part.
    parts.append('--' + boundary)
    parts.append('Content-Disposition: form-data; name="account_id"')
    parts.append('')
    parts.append(str(account_id))

    # Set creative contents part.
    parts.append('--' + boundary)
    parts.append('Content-Disposition: form-data; name="userfile"; filename="%s"' % file_path)
    parts.append('Content-Type: %s' % mimetypes.guess_type(file_path)[0] or 'application/octet-stream')
    parts.append('')
    # TODO: catch errors with opening file.
    parts.append(open(file_path, 'r').read())

    parts.append('--' + boundary + '--')
    parts.append('')

    body = '\r\n'.join(parts)

    headers = {'content-type': 'multipart/form-data; boundary=' + boundary}
    url = self._resolve_url('/a/creative/uploadcreative')
    req = urllib2.Request(url, headers=headers, data=body)
    res = urllib2.urlopen(req)

    return json.loads(res.read()) 
```

当我从 UI 检查萤火虫时，我在 POST 源中得到以下信息。

```
-----------------------------662549079759661058833120391 
Content-Disposition: form-data; name="userfile"; filename="IMG_1377.jpg" Content-Type: image/jpeg 

ÿØÿáÃExif��MM�*���� �������ª���� ���°���������������������º�������Â(�������1�������Ê2�������Ú&lt;�������î�������i�������þ%������p��Apple�iPhone 4���H������H�����QuickTime 7.7.1�2012:08:17 11:47:11�Mac OS X 10.7.4�������������� "�������'�����P�������0220������(������<������ �����P������X������� ����� �� ������`������h �����0100 ������� ������  ������¢�������¤��������¤��������¤��������¤ ����������������������2011:10:01 17:19:23�2011:10:01 17:19:23���4��Á��¹��¡���M���Ç»¸������N����������Ê�����W����������â�������ú�����M�����������������!�����S���d����������T�����ÿ���d���������������������Ú����%Á��r��������������t������|(�������������������7������������H������H�����ÿØÿà�JFIF��H�H��ÿþ�AppleMark ÿÛ��  % #!,!#'(***.1-)1%)*( (((((((((((((((((((((((((((((((((((((((((((((((((((ÿÄ¢���������� ������� ���}�!1AQa"q2¡#B±ÁRÑð$3br %&'()*456789:CDEFGHIJSTUVWXYZcdefghijstuvwxyz¢£¤¥¦§¨©ª²³´µ¶·¸¹ºÂÃÄÅÆÇÈÉÊÒÓÔÕÖ×ØÙÚáâãäåæçèéêñòóôõö÷øùú��w�!1AQaq"2B¡±Á #3RðbrÑ $4á%ñ&'()*56789:CDEFGHIJSTUVWXYZcdefghijstuvwxyz¢£¤¥¦§¨©ª²³´µ¶·¸¹ð.¥ÛWíÇLòV³FcaoæÂÒ8§É¸(è3E¢"Ú×S^+yj�!òû0Oüµn- yè){[oÝ/¸?ÃÔMY¡ÃgÔò4êò4nÍ¸í¶={ÔM¤¸m¯K&ñæ«,©ù»zTÝ=öØô×6¶Ö:MÑi�,Û$Oö[ª÷ª©Æiîá»¤JAxj>ÞAõúu¥}lIf÷û^Â)#´y^)Ô"/·v>n~4ººµ­¬æ}FURì·Î 3¿Ãèh»ÐµÈÿ�·|Gu:ß²<ëlWäG·^+¡Ó¼gâ.-Þè|Ï¸*ª®  }é?Ú=(i:2½Ïg!ÊµÑi¤¼eþ!÷³ÍC'æCqv®ÖÊÕiçCë·øsQy#K_B´þ0s'¦|¿ÞÂ²lò¼?½ÿ�]rZ¶¨ø·6ñÆØ·mvV;þÿ�þ=ôª¿»r\zPñtHö÷>Ù¤R#+ Á òBôR;ú²¾)!àËn<.ÁÔlÏcRäÂ&§­eX´fTóLÅ¾Qßt§Zµ{â t·pK]ÈL1²îýúEüxþ÷j\î×-jÏÂ>!û:^,E­,>^ýêßwû+Ópæ»?i÷û5kéá¹^ 6Ddq°öÁ¯Rù¨¦yãjòÿÙ 
-----------------------------662549079759661058833120391 
Content-Disposition: form-data; name="account_id" 

69574 
-----------------------------662549079759661058833120391-- 
```

firebug 中的头文件如下：

```
Request Headersview source
Accept  text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Encoding gzip, deflate
Accept-Language en-us,en;q=0.5
Cache-Control   no-cache
Connection  keep-alive
Content-Length  1713991
Content-Type    multipart/form-data; boundary=---------------------------662549079759661058833120391
Cookie  instance_defaults=%7C%20%7Cen_US; access_token=75c48e
Host    ui.host.com
Pragma  no-cache
Referer http://ui.host.com/
User-Agent  Mozilla/5.0 (Macintosh; Intel Mac OS X 10.8; rv:14.0) Gecko/20100101 Firefox/14.0.1 
```

我想我的问题是有没有办法通过请求库来调整数据，以便：

```
Content-Disposition: form-data; name="userfile"; filename="IMG_1377.jpg" Content-Type: image/jpeg 
```

和

```
Content-Disposition: form-data; name="account_id" 

69574 
```

陈述都存在。我觉得我必须做一些事情，比如让文件成为一本字典

```
files = {'file': open('image.jpg', 'rb'), 'account_id': 12345} 
```

但以某种方式分别编辑每个部分的 Content-Disposition 元数据

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-25T23:45:49.413

，`requests`我相信你不必这么手动，简单地说：

```
import requests

# ...
url = self._resolve_url('/a/creative/uploadcreative')
files = {'file': ('userfile', open(filepath, 'rb'))}
data = {'account_id': account_id}
headers = {'content-type': 'multipart/form-data'}
res = requests.post(url, files=files, data=data, headers=headers)
return res.json 
```

我想你的担心在于你的：

```
parts.append('Content-Type: %s' % mimetypes.guess_type(file_path)[0] or 'application/octet-stream') 
```

我还没有毫无疑问地向自己证明这一点。但是，我认为这是内置于 requests [here](https://github.com/kennethreitz/requests/blob/develop/requests/packages/urllib3/filepost.py#L26)的。

编辑：[看起来](https://github.com/kennethreitz/requests/blob/develop/requests/packages/urllib3/filepost.py#L42)你可以在文件字典中拥有普通字段，正如你所建议的那样：

```
files = {'file': open('image.jpg', 'rb'), 'account_id': 12345} 
```

并且可以根据需要命名文件名：

```
files = {'file': ('userfile', open('image.jpg', 'rb')), 'account_id': 12345} 
```

但是，您会得到一个可能不是您想要`body.write(b'Content-Type: text/plain\r\n\r\n')`的`account_id`字段，并且无法为每个字段自定义 Content-Disposition（仍然不确定为什么需要）；对于文件和字段，您将获得：`Content-Disposition: form-data`- 这是您为两者显示的内容。

我不确定您是否可以完全按照自己的意愿进行操作`requests`，也许您应该尝试功能请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-08T04:46:25.617

```
 import requests

 import urllib

 def upload_creative(self, account_id, file_path):

    files = [('userfile', (file_path, open(file_path, 'rb'), "image/jpeg" ))]

    url = self._resolve_url('/a/creative/uploadcreative')

    url =  url + "?"  +  urlib.urlencode(account_id=account_id)

    reuests.post(url, files=files) 
```

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-09-26T22:09:56.497

我发现在 python-requests 库（v.0.13.3）中，如果您在请求调用本身的“文件”字段之前包含“数据”字段，您的数据将被擦除。

例如，

```
requests.post(url, headers=headers, data=data, files=files) 
```

将产生空的表单数据。但是，以下将数据字典作为表单数据发送

```
requests.post(url, headers=headers, files=files, data=data) 
```

谢谢大家的回答

# grails - find 和 findAll 在 grails 2.1.1/groovy 1.8.8 中不起作用

> ID：12592560
> 
> 赞同：3
> 
> 时间：2012-09-25T23:28:41.290
> 
> 标签：grails, groovy

我有一些在 grails 2.1.0/groovy 1.8.6 中工作但在 grails 2.1.1/groovy 1.8.8 中停止工作的例程。

此代码在 grails 2.1.0 中运行：

```
def items = []
Object[] item = ["Fluff", new Date(), 11235813]
items << item
println items
assert !items.findAll{it[0] == "Pelusa"}
assert items.findAll{it[0] == "Fluff"} 
```

当我在 grails 2.1.1 中运行它时，它会抛出这个异常：

```
groovy.lang.MissingMethodException: No signature of method: 
Script1$_run_closure1.doCall() is applicable for argument types: 
(java.lang.String, java.util.Date, java.lang.Integer) values: 
[Fluff, Wed Sep 26 01:02:23 ??? 2012, 11235813]
Possible solutions: doCall(), call(), doCall(java.lang.Object), findAll() 
```

那是一些环境信息：

```
java version "1.7.0_07"
OpenJDK Runtime Environment (IcedTea7 2.3.2) (7u7-2.3.2a-0ubuntu0.12.04.1)
OpenJDK 64-Bit Server VM (build 23.2-b09, mixed mode) 
```

我怎样才能让它再次工作？

编辑：我认为这可能是一个 Grails 问题，因为它在 Groovy Console 2.0.1 上运行良好

编辑：这可能是一个错误。[我提出了一个jira问题。](http://jira.grails.org/browse/GRAILS-9443)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:50:33.567

你应该做类似的事情

```
 assert !items.flatten().findAll{it[0] == "Pelusa"}
    assert items.flatten().findAll{it[0] == "Fluff"} 
```

“items”是一个列表列表，所以“it[0]”实际上是整个“item”列表，而不是“Fluff”。我不知道为什么这适用于旧版本的 grails 而不是 2.1.0

# python - 有没有更好的方法来控制子进程的 PYTHONPATH？

> ID：12592563
> 
> 赞同：7
> 
> 时间：2012-09-25T23:28:55.173
> 
> 标签：python, subprocess, pythonpath

我有一组必须即时修改 os.sys.path 的脚本。然后脚本启动一个子进程。理想情况下，子进程将具有与调用者相同的 os.sys.path。我想避免将它作为参数传递，因为这需要修改子进程脚本。

我有可以满足我所有需求的代码。我想知道是否有更好的方法来做到这一点，以及这种方法是否有任何陷阱。

主要流程

```
import os
import sys
import subprocess

#append a dir thats not on the sys path
sys.path.append('C:/pytest2/')

#convert the sys.path into env variable format
pypath = ''
for d in sys.path:
    pypath = pypath + d + ';'

#create a temp copy of the env variables
myenv = os.environ.copy()

#set PYTHONPATH to match this scripts sys.path
myenv['PYTHONPATH'] = pypath

#setup a python command to echo the sys.path
command = 'python C:/pytest/test_subprocess.py'

#launch the subprocess with the custom env
p = subprocess.Popen(command, env=myenv) 
```

C:/pytest/test_subprocess.py

```
import sys
print 'sys path'
print sys.path 
```

运行主进程导致此控制台输出

![在此处输入图像描述](../Images/aa3569e36f2e692b63a9be102741ad82.png)

如您所见， C:/pytest2/ 在 test_subprocess.py 的 os.sys.path 上

**编辑** 将 os.sys 更改为 sys

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-09-25T23:46:38.357

PYTHONPATH 环境变量只是附加到`sys.path`. Python 本身（和`site`模块）从各种来源初始化模块搜索路径。您只需要通过 PYTHONPATH 环境变量添加您的一个目录。更好的办法是把它安装在已经搜索过的通常的站点包目录中。这样你就不必在环境中做任何特别的事情了。

# ios - 过滤包含消息列表的 NSMutableArray

> ID：12592572
> 
> 赞同：2
> 
> 时间：2012-09-25T23:29:47.190
> 
> 标签：ios, uitableview, nspredicate, nssortdescriptor

我正在尝试对包含聊天消息列表的 NSMutableArray 进行过滤和排序。我正在尝试获取 2 个用户之间对话的最后一条消息。例如，如果 user1 与 2 个不同的用户有 2 个不同的对话，我想获取每个对话的最后一条消息。我使用 Parse.com 作为后端，这就是我保存和检索消息的方式。

**保存消息**

```
PFUser *user = [[PFUser currentUser] objectForKey:@"displayName"];
PFObject *newMessage = [PFObject objectWithClassName:@"Messages"];
[newMessage setObject:messageStr forKey:@"body"];
[newMessage setObject:self.mySelectedUser forKey:@"toUser"];
[newMessage setObject:user forKey:@"fromUser"];
[newMessage saveInBackground];
myMessageField.text = @"";
[self getTheNewMessages];
[self.myTView reloadData]; 
```

**检索消息**

```
-(void)GetmyNewMessages

{
PFQuery *query1 = [PFQuery queryWithClassName:@"Messages"];
[query1 whereKey:@"toUser"  equalTo:[[PFUser currentUser] objectForKey:@"displayName"]];
 [query1 whereKeyExists:@"date"];

PFQuery *query2 = [PFQuery queryWithClassName:@"Messages"];
[query2 whereKey:@"fromUser" equalTo:[[PFUser currentUser] objectForKey:@"displayName"]];
[query2 whereKeyExists:@"date"];

 PFQuery *query = [PFQuery orQueryWithSubqueries:[NSArray arrayWithObjects:query1, query2, nil]];

[query findObjectsInBackgroundWithBlock:^(NSArray *objects, NSError *error) {
        if (!error) {

             NSLog(@"Successfully retrieved %d chats.", objects.count);
            [premessagesList removeAllObjects];
            [premessagesList addObject:objects];
     } else {
            //Log details of the failure
            NSLog(@"Error: %@ %@", error, [error userInfo]);

        }

    }]; 
```

}

**NSMutableArray 的 NSLog (premessageList)**

```
 ( "<Messages:aS8tVIlsHc:(null)> {\n   
     body = hi;\n  fromUser = cnn;\n    toUser =FNC;\n    
     date = \"2012-09-19 02:40:29 +0000\";\n}",

    "<Messages:CPCa6VBmf7:(null)> {\n  
body = hello;\n  fromUser = FNC;\n    toUser =cnn;\n   
 date = \"2012-09-20 05:06:05 +0000\";\n}",

    "<Messages:Jz1cILt18Y:(null)> {\n   

     body = whatsgood;\n  fromUser = sleepy;\n    toUser =cnn;\n

  date =\"2012-09-20 05:06:05 +0000\";\n}",

    "<Messages:lXretmE1uK:(null)> {\n   
     body = lol;\n  fromUser = cnn;\n    toUser =sleepy;\n

 date =\"2012-09-20 05:13:16 +0000\";\n}", 
```

我尝试使用 NSSortDescriptor 和 NSPredicate，但我得到了一个空的 tableview。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T20:52:27.387

您可以限制结果并`PFQuery`像这样对自身进行排序：

```
[query1 orderByDescending:@"createdAt"];
query1.limit = 1;
[query2 orderByDescending:@"createdAt"];
query2.limit = 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T00:23:36.090

在这种类型的问题中，我会使用一些变量和快速迭代来遍历信息并获得你需要的东西：

```
id lastChat = ni;
... temps 

for(OneChat in allChats) {
  do tests and set variables
}

Now I know the last chat. 
```

PS：我决定不发这个了，但是看了很久没有人回复，总比没有好。这就是我将如何解决这个问题。

# powershell - 为什么这个 powershell 脚本不接受参数？

> ID：12592574
> 
> 赞同：0
> 
> 时间：2012-09-25T23:30:29.380
> 
> 标签：powershell, parameters

## 我的脚本.ps1

```
Param(
    [Parameter(Mandatory=$true,Position=1)]
    [string]$computerName
)

echo "arg0: " $computerName 
```

## 命令文件

```
C:\> myscript.ps1 -computerName hey 
```

输出：

```
    命令管道位置 1 处的 cmdlet myscript.ps1
    为以下参数提供值：
    计算机名称：ddd
    参数0：
    ddd

```

我只是想在 CMD 中使用 Powershell 参数，但我似乎无法获得一个脚本来获取一个。我看到网站说要在脚本之前使用，`.\`但这无济于事。我添加了强制行以查看 Powershell 是否正在读取参数，显然不是。参数`computerName`显然是“嘿”这个词。`Param`块是脚本中的第一件事。Powershell 似乎可以识别参数`computerName`，但无论我如何输入命令，它都不会认为我实际上是在输入参数。

我的语法到底有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T13:48:01.063

默认情况下，Powershell 不会运行它恰好在您当前目录中找到的脚本。这是微软打算作为一项安全功能的，我相信它模仿了 unix shell 中的行为。

Powershell 将运行在您的搜索路径中找到的脚本。您的搜索路径存储在`$env:path`.

我怀疑您在搜索路径上的某个其他目录中有一个名为“myscript.ps1”的脚本。

我以前也遇到过这种情况。我看到的症状是参数列表似乎与我定义的不同。每个脚本都有一个不同的参数列表，所以当我给它提供一个用于其他脚本的参数列表时，脚本被炸毁了。我的习惯是不依赖参数位置，所以这个问题很容易找到。

在脚本“.\myscript.ps1”中添加“.\”应该会强制 shell 使用当前目录中的 .ps1 文件。作为测试，我会指定您尝试执行的文件的完整路径（如果路径中有空格，请确保将路径包含在“引号”中）或将其更改为一些完全疯狂的名称，不会被其他文件（如“crazyfishpants.ps1”）复制并查看shell是否仍然找到该文件。

如果您有一个从与脚本文件（“Get-Foo.ps1”）同名的模块或配置文件中加载的函数（“Get-Foo”），您可能会遇到类似的问题。你可能会跑出你想要的东西之外的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T05:28:29.463

位置值应从 0 开始（第一个参数为 0）。也就是说，我无法复制您在 PowerShell 2.0 或 3.0 上看到的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T22:26:38.223

感谢大家提供的非常翔实的答复。看起来我的问题在我提交之前经过了轻微的编辑，因为文本让你相信我是直接在 Powershell 中输入这个命令的。

我实际上是在 CMD 中运行脚本的命令，这完全解释了为什么它没有将参数传递给 Powershell 脚本。谁为我的问题开了绿灯，可能认为我打错了，将 C:\> 更改为 PS>。

我假设如果我可以直接从 CMD 运行脚本，我可以在 CMD 的命令行上向它发送参数，但显然情况并非如此。如果我在 Powershell 中运行脚本，它确实工作得很好，我现在看到了。

我的最终目标是允许用户从 CMD 运行 Powershell 脚本。看起来我可以制作一个接受参数的批处理文件，然后启动 powershell 并将这些参数发送到 PS 脚本。因此，在批处理文件中，我应该执行以下操作：

```
powershell -File C:\myscript.ps -computerName %1 
```

这个谜可能在这个网站上被解决了 100 次，我为造成的混乱道歉。再次感谢您的回复。

# .net - .Net 将键作为键值发送

> ID：12592575
> 
> 赞同：0
> 
> 时间：2012-09-25T23:30:37.277
> 
> 标签：.net, keystroke

我有一个非常简短的问题。每次登录时，我的笔记本电脑都会激活其触摸板。这让我很恼火，因为我只想使用鼠标。我想编写一个非常小的应用程序（我将添加为计划任务）。这个小应用程序应该发送 FN + F6 组合键并自行关闭。我对 VB.Net 有一些经验，但我不知道如何发送键值。我用 textbox.keydown 捕获了这个组合： KeyCode: None KeyData: LButton, OemClear KeyValue: 255

如何使用 .Net 发送 KeyValue？

顺便说一句，我发现了这个：[http ://en.wikipedia.org/wiki/Fn_key](http://en.wikipedia.org/wiki/Fn_key)

在那篇维基百科文章中，它说 FN 键是在键盘的微控制器中解释的。然而，只有 lenovo 有机会捕捉到这一点，因为它在 CPU 中处理它。但为此，我需要更改 BIOS 等中的一些设置等。需要阅读更多内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T19:48:51.897

我不确定你 FN + F6 做了什么，但我很确定你可以通过[SendInput](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646310%28v=vs.85%29.aspx)方法发送你需要的东西

# asp.net-mvc - 调试 ASP.NET 应用程序导致“无法启动程序 'http://localhost:xxx'。系统找不到指定的文件”

> ID：12592577
> 
> 赞同：2
> 
> 时间：2012-09-25T23:30:52.847
> 
> 标签：asp.net-mvc, visual-studio-2012

我在 Windows 8 上使用 Visual Studio 2012。当我尝试使用 IE10 交互式调试任何 Web 项目时，会显示此错误消息：

> 无法启动程序“ `http://localhost:9999`”。该系统找不到指定的文件。

该应用程序配置为在 IIS Express 下运行。尝试使用 Visual Studio Development Server 时显示相同的错误消息。

使用 Chrome 和 Firefox 进行调试时，一切都很好。该问题仅在使用 IE 时出现。

如何解决？

# java - 引发不需要捕获的异常的方法

> ID：12592582
> 
> 赞同：0
> 
> 时间：2012-09-25T23:31:37.180
> 
> 标签：java

对不起，如果这是一个非常基本的问题

至于我的理解，如果您有一个引发异常的方法，则无论何时使用该方法，都需要捕获它（或抛出它）。

但是，一些引发异常的方法不需要我像这样捕获它：

```
int num = Long.parseInt(sampleString); 
```

有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T23:35:02.903

Java 中有两种类型的异常：**checked**和**unchecked**。前者需要`catch`编辑，而后者不需要。未选中`Exception`是扩展`RuntimeException`,`Error`或其子类之一的类。

[`Long#parseLong`](http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html#parseLong%28java.lang.String%29)抛出一个[`NumberFormatException`](http://docs.oracle.com/javase/7/docs/api/java/lang/NumberFormatException.html)which **IS-A** [`RuntimeException`](http://docs.oracle.com/javase/7/docs/api/java/lang/RuntimeException.html)。因此，这是一个未经检查的异常，不需要被捕获。

### 参考：

*   [未经检查的例外——争议](http://docs.oracle.com/javase/tutorial/essential/exceptions/runtime.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T23:34:55.573

有一些例外情况从`RuntimeException`. 这些被称为未经检查的异常，它们不必在您的方法签名中声明。通常，这些是为*真正*出错的事情保留的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T23:33:53.590

Java中有两种类型的异常。检查和未检查。不需要捕获未经检查的异常。未经检查的异常的一个很好的例子是 NullPointerException；您可以看到，如果开发人员需要捕获此异常代码将非常复杂。这将是疯狂的。引发未经检查的异常`parseInt`的异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T23:34:12.337

这些是[`RuntimeException`](http://docs.oracle.com/javase/7/docs/api/java/lang/RuntimeException.html). `RuntimeException`s 及其子类不需要被捕获。它们被称为未经检查的异常。

# cocos2d-iphone - 访问 GetTransform() 属性

> ID：12592586
> 
> 赞同：1
> 
> 时间：2012-09-25T23:32:14.227
> 
> 标签：cocos2d-iphone, box2d, box2d-iphone

如何访问在另一个类中创建的主体的 GetTransform 属性？这就是我所做的，我创建了一个距离关节。

```
distanceJointBodies.Initialize(b, secBody, b->GetTransform(), secBody->GetTransform()); 
```

我收到一条错误消息：

```
"No viable conversion from 'const b2Transform' to 'const b2Vec2' " 
```

指向距离关节参数：

```
b->GetTransform() 
```

其中 b 是我在另一个班级中创建的主体。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:19:33.847

我认为您需要`GetPosition()`功能，而不是`GetTransform()`，因为您必须传递`b2Vec2`给您的功能

# prolog - 检测是否指定了 Prolog Term 的谓词（变得更具体）

> ID：12592587
> 
> 赞同：1
> 
> 时间：2012-09-25T23:32:14.423
> 
> 标签：prolog

是否可以使用已经内置的谓词（在 swi-prolog 中）获得一个谓词，例如：

```
Wanted_Pred(X, a) %false
Wanted_Pred(b, a) %false
Wanted_Pred(X, Y) %true
Wanted_Pred(X, X) %true
Wanted_Pred(X, [Y|Z]) %false
Wanted_Pred([A|B], [X,Y|Z]) %false
Wanted_Pred([A,C|B], [X,Y|Z]) %true 
```

例如，如果两个参数都代表彼此自由变量重命名，则成功，请注意 copy_term 不会这样做，因为它最终统一了参数：

```
copy_term(X, a) %true 
copy_term(X, [Y|Z]) %true
copy_term([A|B], [X,Y|Z]) %true 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T07:16:50.230

[subsumes_term](http://www.swi-prolog.org/pldoc/man?predicate=subsumes_term/2) /2 完全符合您的要求，只需交换参数：

```
?- subsumes_term(a,X).
false.

?- subsumes_term(a,b).
false.

?- subsumes_term(Y,X).
true.

?- subsumes_term(X,X).
true.

?- subsumes_term([Y|Z],X).
false.

?- subsumes_term([X,Y|Z],[A|B]).
false.

?- subsumes_term([X,Y|Z],[A,C|B]).
true. 
```

我在 SWI-Prolog 邮件列表上看到了一个关于[(=@=)](http://www.swi-prolog.org/pldoc/doc_for?object=%28=@=%29/2) /2 的有效实现的相当新的线程，我认为它是相关的（实际上，它也满足您的要求）：充分利用它应该是可用的最佳选择。

**编辑**更正邮件列表的链接。最近将列表托管切换到 google 组使存档不可用...

[例如，您可以在存档讨论](http://article.gmane.org/gmane.comp.ai.prolog.swi/14101/match=kuniaki+mukai+subsumes_term)中找到该主题，搜索作者 Kuniaki Mukai

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T00:38:52.710

这是我正在搜索的谓词，但 **我想知道这种谓词是 BUILT_IN 还是 SWI-PROLOG**中的类似谓词。

```
true_copy(X, Y) :-
    (X == Y, !);
    (var(X), var(Y), !);
    ((var(X); var(Y)) -> !, fail);
    (atom(X), atom(Y) -> !, fail).

true_copy([X | L1], [Y | L2]) :-
    !,
    true_copy(X, Y),
    true_copy(L1, L2).

true_copy(Term1, Term2) :-
    Term1 =.. L1,
    Term2 =.. L2,
    true_copy(L1, L2). 
```

# c++ - 使用混合 const/non-const 三元运算符的编译时

> ID：12592588
> 
> 赞同：2
> 
> 时间：2012-09-25T23:32:15.183
> 
> 标签：c++, templates, optimization, ternary-operator, compile-time

考虑以下示例：

```
template<int X> class MyClass
{
    public:
        MyClass(int x) {_ncx = x;}
        void test() 
        {
            for (unsigned int i = 0; i < 1000000; ++i) {
                if ((X < 0) ? (_cx > 5) : (_ncx > 5)) {
                    /* SOMETHING */
                } else {
                    /* SOMETHING */
                }
            }
        }
    protected:
        static const int _cx = (X < 0) ? (-X) : (X);
        int _ncx;
}; 
```

我的问题是： MyClass<-6>::test() 和 MyClass<6>::test() 有不同的速度吗？

我希望如此，因为在模板参数为负的情况下，`if`可以在编译时评估 in test 函数，但我不确定如果存在编译时事物和非编译器，编译器的行为是什么- 三元运算符中的时间（这里就是这种情况）。

注意：这是一个纯粹的“理论”问题。如果有“是”的非空概率，我将为我的代码实现一些具有此类编译时模板参数的类，如果没有，我将只提供运行时版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T00:34:05.800

将条件移到循环外：

```
 ...
        if ((X < 0) ? (_cx > 5) : (_ncx > 5)) {
            for (unsigned int i = 0; i < 1000000; ++i) {
                /* SOMETHING */
            }
        } else {
            for (unsigned int i = 0; i < 1000000; ++i) {
                /* SOMETHING */
            }
        }
        ... 
```

这样您就不必依赖编译器优化来删除未使用的代码；如果编译器没有删除条件的未使用部分，则您只需为条件分支支付一次费用，而不是每次循环。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T01:40:38.893

对于我的编译器（ OS X 上的 clang++ v2.9 ）编译这个相似但不相同的代码：

```
void foo();
void bar();

template<int N>
void do_something( int arg ) {
  if ( N<0 && arg<0 ) { foo(); }
  else { bar(); }
}

// Some functions to instantiate the templates.
void one_fn(int arg) {
  do_something<1>(arg);
}

void neg_one_fn(int arg) {
  do_something<-1>(arg);
} 
```

这将生成以下程序集`clang++ -S -O3`。

### one_fn = do_something<1>

第一个函数程序集显然只有对`bar`.

```
 .globl  __Z6one_fni
    .align  4, 0x90
__Z6one_fni:                            ## @_Z6one_fni
Leh_func_begin0:
    pushl   %ebp
    movl    %esp, %ebp
    popl    %ebp
    jmp __Z3barv                ## TAILCALL
Leh_func_end0: 
```

### neg_one_fn = do_something<-1>

第二个函数已简化为一个简单的 if 调用`bar`or 或`foo`。

```
 .globl  __Z10neg_one_fni
    .align  4, 0x90
__Z10neg_one_fni:                       ## @_Z10neg_one_fni
Leh_func_begin1:
    pushl   %ebp
    movl    %esp, %ebp
    cmpl    $0, 8(%ebp)
    jns LBB1_2                  ## %if.else.i
    popl    %ebp
    jmp __Z3foov                ## TAILCALL
LBB1_2:                                 ## %if.else.i
    popl    %ebp
    jmp __Z3barv                ## TAILCALL
Leh_func_end1: 
```

### 概括

所以你可以看到编译器内联了模板，然后尽可能优化了分支。因此，您希望的那种转换确实发生在当前的编译器中。我也从旧的 g++ 4.0.1 编译器得到了类似的结果（但汇编不太清楚）。

## 附录：

我认为此示例与您的初始情况不太相似（因为它不涉及三元运算符）所以我将其更改为：（获得相同的结果）

```
template<int X>
void do_something_else( int _ncx ) {
  static const int _cx = (X<0) ? (-X) : (X);
  if ( (X < 0) ? (_cx > 5) : (_ncx > 5)) {
    foo();
  } else {
    bar();
  }
}

void a(int arg) {
  do_something_else<1>(arg);
}

void b(int arg) {
  do_something_else<-1>(arg);
} 
```

这会生成程序集

### a() = do_something_else<1>

这仍然包含分支。

```
__Z1ai:                                 ## @_Z1ai
Leh_func_begin2:
    pushl   %ebp
    movl    %esp, %ebp
    cmpl    $6, 8(%ebp)
    jl  LBB2_2                  ## %if.then.i
    popl    %ebp
    jmp __Z3foov                ## TAILCALL
LBB2_2:                                 ## %if.else.i
    popl    %ebp
    jmp __Z3barv                ## TAILCALL
Leh_func_end2: 
```

### b() = do_something_else<-1>

分支被优化掉了。

```
__Z1bi:                                 ## @_Z1bi
Leh_func_begin3:
    pushl   %ebp
    movl    %esp, %ebp
    popl    %ebp
    jmp __Z3barv                ## TAILCALL
Leh_func_end3: 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T23:37:29.103

这可能取决于您的编译器有多聪明。我建议您编写一个小基准程序，在您的环境中自己进行测试，以确保确定。

# javascript - jQuery idTabs - 向左滑动

> ID：12592589
> 
> 赞同：0
> 
> 时间：2012-09-25T23:32:26.010
> 
> 标签：javascript, jquery, idtabs

有谁知道我会如何——而不是让我的 idTab 褪色——让它们从左向右移动？可能需要在这里提供：[http ://codebins.com/bin/4ldqp7r/2](http://codebins.com/bin/4ldqp7r/2)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T01:29:57.130

基本思想是将滑出的内容放置在可见窗格的左侧。

```
#adv2 {
  ...
  overflow: hidden;
  position: relative;
}
#adv2 ul{
  ...
  position: relative;
  z-index: 3;
}    
#adv2 span {
  z-index: 1;
}
#adv2 span p {
  position: relative;
  margin: 0;
  left: -410px;
  z-index: 2;
} 
```

然后添加 javascript 以呈现滑出效果。

```
for (i in list) {
    $(list[i]).css({'left': '-410px', 'display': 'none'});
}
$(id).css({'display': 'none'}).animate({left: '+=410'}); 
```

# javascript - 在可内容编辑的 DIV 中选择图像

> ID：12592594
> 
> 赞同：2
> 
> 时间：2012-09-25T23:33:34.700
> 
> 标签：javascript

使用 Javascript，我想在内容可编辑的 DIV 中选择一个图像对象。选择后（在 Internet Explorer 中），所选图像应该有可以通过鼠标拖动的角。我的意思是当我手动单击图像时通常出现的相同角落。

这是应该选择的图像（应该出现角）：

```
<div id="editor" contenteditable="true">
<img src="//www.google.com/images/logos/google_logo_41.png" id="google_logo">
</div> 
```

我已经在[http://jsfiddle.net/4Ynvv/7/中进行了不成功的尝试](http://jsfiddle.net/4Ynvv/7/)

有人有（跨浏览器）解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T23:45:35.203

我不知道跨浏览器解决方案，但知道如何让它在 IE 中工作。

看看这个：http: [//jsfiddle.net/VJD5Q/](http://jsfiddle.net/VJD5Q/)

# java - 如何用数组元素声明变量？

> ID：12592596
> 
> 赞同：0
> 
> 时间：2012-09-25T23:33:43.530
> 
> 标签：java

我有一个元素数组，我想将数组中的元素用作变量。

我想这样做是因为我有一个方程，这个方程需要多个变量输入，我想初始化一个数组，遍历它，并为每个变量（或数组的每个元素）请求输入。

所以我有一个这样的数组：

```
String variableArray[] = {"a", "b", "c"} 
```

现在我正在遍历这个数组并从用户那里获取输入：

```
for(int i=0; i<3; i++) {
    System.out.printf("Enter value for %s: ", variableArray[i]);
    int variableArray[i] = keysIn.nextInt();
} 
```

问题是这一行无法编译：

```
int variableArray[i] = keysIn.nextInt(); 
```

本质上，我想使用数组 variableArray[] 的元素（即 a、b 和 c）作为变量，因此我不必对每个变量执行相同的过程。我无法想象当有很多变量要输入时它是如何完成的（我不想全部输入）。

tl;博士我想简化为多个变量输入值的过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T23:38:21.997

您将数组初始化为：

```
String variableArray[] = {"a", "b", "c"} 
```

即一个s数组`String`。

如果你想稍后引用`i`-th 元素，你只需写：

```
variableArray[i] 
```

没有任何`int`之前 - 你不能初始化数组中的单个条目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T23:45:45.643

两件事情;

首先，您已将数组声明为`String`s 数组，因此`variableArray[i] = keysIn.nextInt()`无法以任何方式工作，`int`不能存储在`String`数组中。

其次，`int variableArray[i] = keysIn.nextInt();`是不正确的，因为`variableArray`已经被声明（作为一个`String`数组并且`variableArray[i]`是`String`该数组的一个元素）

该行应为`variableArray[i] = keysIn.next();`，但这将存储用户输入的文本，而不是数值。

它可能看起来是......

```
String labelArray[] = {"a", "b", "c"}
int variableArray[] = new int[3];
// You could declare this as
// int variableArray[] = {0, 0, 0};
// if you wanted the array to be initialized with some values first.
for(int i=0; i<3; i++) {
    System.out.printf("Enter value for %s: ", labelArray[i]);
    variableArray[i] = keysIn.nextInt();
} 
```

**更新**

```
int a = variableArray[0];
int b = variableArray[1];
int c = variableArray[2]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T23:49:04.083

Java 不是那样工作的。`"a"`是一个字符串文字，你不能像变量一样使用它。没有什么神奇的方法可以从一个数组元素的值`"a"`变成一个`int`名为 的变量`a`。

但是，您可以执行的某些操作可能与您想要的相同。

```
String variableArray[] = {"a", "b", "c"}
int valueArray[] = new int[variableArray.length];

for(int i=0; i<3; i++) {
    System.out.printf("Enter value for %s: ", variableArray[i]);
    valueArray[i] = keysIn.nextInt();
} 
```

要获得 的值`"a"`，请执行`valueArray[0]`。

这是另一个更复杂的建议：

```
String variableArray[] = {"a", "b", "c"}
HashMap<String, Integer> variableValues = new HashMap<String, Integer>();

for(int i=0; i<3; i++) {
    System.out.printf("Enter value for %s: ", variableArray[i]);
    variableValues.put(variableArray[i],  keysIn.nextInt());
} 
```

要获得 的值`"a"`，请执行`variableValues.get("a")`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T23:56:54.493

您真正要寻找的是[**Map**](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html)。它是从一个值到另一个值的映射集合。在您的情况下，您可以使用它将整数值（变量的值）分配给表示变量名称的字符串。

因此，您将创建一个实例`Map<String, Integer>`- 读取“从字符串到整数的映射”。

有关该主题的详细信息，请参阅[本教程](http://docs.oracle.com/javase/tutorial/collections/interfaces/map.html)。

现在你的代码会是什么样子：

```
String[] variableNames = { "a", "b", "c" };
// create the map object
Map<String, Integer> variableValues = new LinkedHashMap<String, Integer>();

// read variable values and put the mappings into the map
for (int i = 0; i < variableNames.length; i++) {
    System.out.printf("Enter value for %s: ", variableNames[i]);
    variableValues.put(variableNames[i], keysIn.nextInt());
}

// print value of each variable
for (int i = 0; i < variableNames.length; i++) {
    String varName = variableNames[i];
    System.out.println(varName + " = " + variableValues.get(varName));
} 
```

输出：

```
Enter value for a: 5
Enter value for b: 4
Enter value for c: 8

a = 5
b = 4
c = 8 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T23:51:47.367

请谨慎使用，但在阅读您对其他答案的评论后，您可能会更接近使用反射的方式：

```
import java.lang.reflect.Field;
import java.util.Scanner;

public class VariableInput {
   public static class Input {
     public int a;
     public int b;
     public int c;
   }

   public static void main(String[] args) throws IllegalArgumentException,
       IllegalAccessException {
      Scanner keysIn = new Scanner(System.in);
      Field[] fields = Input.class.getDeclaredFields();
      Input in = new Input();
      for (int i = 0; i < 3; i++) {
         System.out.printf("Enter value for %s: ", fields[i].getName());
         fields[i].set(in, keysIn.nextInt());
      }
      int d = in.a + in.b + in.c;
      System.out.println("d=" + d);
   }
} 
```

# java - 使用 Java GregorianCalendar 类打印正确的日期

> ID：12592600
> 
> 赞同：6
> 
> 时间：2012-09-25T23:34:13.107
> 
> 标签：java

我正在尝试打印一些东西，例如今天的日期、星期几、从现在起 100 天后的日期、从现在起一百天后的星期几、我的生日和星期几，以及我生日和一周中的那一天之后的 10,000 天。现在，我知道 GregorianCalendar 一月从 0 开始，十二月到 11。我明白了，所以当我尝试打印日期时，它说今天的日期是 2012 年 8 月 25 日而不是 12 年 9 月 25 日，但我不知道如何在不提前设置日期的情况下更正此问题月，然后实际上将月份放入 10 月而不是 9 月。

这是我目前正在处理的内容。

```
 GregorianCalendar cal = new GregorianCalendar();
        int dayOfMonth = cal.get(Calendar.DAY_OF_MONTH);
        int month = cal.get(Calendar.MONTH);
        int year = cal.get(Calendar.YEAR);
        int weekday = cal.get(Calendar.DAY_OF_WEEK);
        cal.add(Calendar.DAY_OF_MONTH, 100);
        int dayOfMonth2 = cal.get(Calendar.DAY_OF_MONTH);
        int month2 = cal.get(Calendar.MONTH);
        int year2 = cal.get(Calendar.YEAR);
        int weekday2 = cal.get(Calendar.DAY_OF_WEEK);
        GregorianCalendar birthday = new GregorianCalendar(1994, Calendar.JANUARY, 1);
        int dayOfMonth3 = birthday.get(Calendar.DAY_OF_MONTH);
        int month3 = birthday.get(Calendar.MONTH);
        int year3 = birthday.get(Calendar.YEAR);
        int weekday3 = birthday.get(Calendar.DAY_OF_WEEK);
        birthday.add(Calendar.DAY_OF_MONTH, 10000);
        int weekday4 = birthday.get(Calendar.DAY_OF_WEEK);
        int dayOfMonth4 = birthday.get(Calendar.DAY_OF_MONTH);
        int month4 = birthday.get(Calendar.MONTH);
        int year4 = birthday.get(Calendar.YEAR);
        System.out.printf("Todays date is " +month + "/" +dayOfMonth +"/" +year +".");
        System.out.printf(" It is day " +weekday +" of the week");
        System.out.println("");
        System.out.printf("In 100 days it will be " +month2 + "/" +dayOfMonth2 +"/" +year2 +". ");
        System.out.printf("Day " +weekday2 +" of the week");
        System.out.println("");
        System.out.printf("My Birthday is " +month3 + "/" +dayOfMonth3 +"/" +year3 +". "+"Day " +weekday3 +" of the week");
        System.out.println("");
        System.out.printf("10,000 days after my birthday is " +month4 + "/" +dayOfMonth4 +"/" +year4 +". " +"Day " +weekday4 +" of the week"); 
```

所以我需要帮助更正今天日期、100 天后的日期、我的生日日期和生日后 10,000 天的月份。非常感谢任何帮助或见解。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-25T23:38:12.677

> 我明白了，所以当我尝试打印日期时，它说今天的日期是 2012 年 8 月 25 日而不是 12 年 9 月 25 日，但我不知道如何在不提前设置日期的情况下更正此问题月

如果您要通过以下方式打印月份

```
int month = cal.get(Calendar.MONTH);
...
 System.out.printf("Todays date is " + month + ... 
```

那你要打印`month + 1`，不只是`month`。

[`SimpleDateFormat`](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)最终，尽管您将通过将日期格式化为字符串来节省更多时间和头痛。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-25T23:38:03.867

是的，您需要知道 Calendar.JANUARY 等于零。对于日历，月份从零开始。

你在这里工作太辛苦了。你在处理原语太多了。

以下是如何打印今天的日期：

```
DateFormat formatter = new SimpleDateFormat("yyyy-MMM-dd");
formatter.setLenient(false);
Date today = new Date();
System.out.println(formatter.format(today)); 
```

以下是如何从现在开始获得 100 天：

```
Calendar calendar = Calendar.getInstance();
calendar.setTime(today);
calendar.add(Calendar.DAY_OF_YEAR, 100);
Date oneHundredDaysFromToday = calendar.getTime();
System.out.println(formatter.format(oneHundredDaysFromToday)); 
```

停止处理所有这些`int`价值观。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-02-06T02:36:25.493

# javascript - 如何在用户浏览表单时创建一个解释输入字段的框？

> ID：12592605
> 
> 赞同：-1
> 
> 时间：2012-09-25T23:34:41.540
> 
> 标签：javascript, html, forms

我想要一个非常类似于“提问”页面上的框，它解释/澄清了表单的每个字段应该输入什么样的数据。我试图在此页面上“查看源代码”，但我根本无法对正在发生的事情做出正面或反面。有人可以解释一下还是有我可以使用的教程？

例子：

1.  当用户单击文本输入框时，该框会解释应该去那里的内容

2.  标有公司类型的下拉菜单，其中包含多种公司。用户一直在对自己进行错误分类，因为他们不了解每种类型所指的内容。当用户单击下拉菜单时，框中的文本会解释每种公司类型。

请参阅表格部分截图的链接：http: [//imgur.com/TYOmT](http://imgur.com/TYOmT)

我还想让框沿着表单向下移动（以便它始终位于用户正在使用的字段的右侧）

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T01:18:53.207

给定 HTML 如下：

```
 <form>
        <select name="some_name" id="some_name">
            <option value="option1" data-description="Description of option1">option1</option>
            <option value="option2" data-description="Description of option2">option2</option>
        </select>
    </form>
    <div id="description">
        Default Description
    </div>​ 
```

以下 javascript 将采用`data-description`所选选项的值，并用它填充`#description`。

```
 var $description = $('#description');
    $('#some_name').on('change', function(event){
        var $option = $(event.currentTarget).find(':selected');
        $('#description').html($option.attr('data-description'));
    }); 
```

这是一个[工作示例](http://jsfiddle.net/bfSkn/)。

通过为每个输入创建额外的处理程序或为表单上的任何输入创建处理程序，您可以轻松地扩展它以创建一些内容以为每个特定输入提供更多信息。

有多种不同的方法可以使描述保持固定，使用`display:fixed`或类似 Twitter Bootstrap 的[affix](http://twitter.github.com/bootstrap/javascript.html#affix)。

# ios - 向iOS App添加大量动态格式化文本

> ID：12592607
> 
> 赞同：1
> 
> 时间：2012-09-25T23:34:58.760
> 
> 标签：ios, xcode, uiwebview, uilabel, uitextview

在我正在进行的项目中，我目前的开发阶段存在一个大问题。

我有一个 UIScrollView，它包含 50 个多行 UILabel，其中包含从 localizable.string 加载的动态内容。标签具有单独的格式（字体、粗体、斜体、颜色）。

问题是应用程序的实际内存使用量跃升至近 70MB（实时字节 3MB），这是不可接受的，按照我目前的概念，我必须使用 ~200 UILabel 才能实现我的目标。

我能做些什么 ？有没有办法延迟加载 UILabel 或重用它们？我应该使用 UITextView 还是 UIWebView ？

我怎样才能做到这一点 ？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T23:58:17.157

我建议使用[https://github.com/AliSoftware/OHAttributedLabel](https://github.com/AliSoftware/OHAttributedLabel)或 UIWebView OHAttributedLabel 之类的东西，OHAttributedLabel 的内存占用应该比 WebView 小得多，但这取决于您实际需要多少 Web 视图。

如果你使用 UIWebView

如果您使用 IB 创建并连接插座，然后在您的 .m 中通过 loadHTMLString:baseURL 加载 html 格式的文本，您将在视图中绘制一个 Web 视图：

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T13:31:27.927

伙计们，在您的帮助下，我想出了这个非常有效的解决方案！

我正在使用一个带有标记的html“模板”文件和一个UIWebView。

基本上我正在做的是以下内容：

1.  获取html文件路径。
2.  使用 html 模板的内容创建一个字符串。
3.  用我的字符串替换 html 中的标记（NSLocalized 字符串 - 大量文本）。
4.  使用“loadHTMLString”加载到新创建的字符串的 WebView 内容中。

结果：从 70MB 的内存占用，现在我有 12MB 的内存占用（相当于约 20 个 A4 文本页）。

这是代码：

```
 NSString *htmlFile = [[NSBundle mainBundle] pathForResource:@"yourhtmlfile" ofType:@"html"];
NSURL *baseURL = [NSURL fileURLWithPath:[[NSBundle mainBundle] bundlePath]];
[_webView setBackgroundColor:[UIColor clearColor]];
    [_webView setOpaque:NO];

NSString *htmlBody = [NSString stringWithContentsOfFile:htmlFile encoding:NSUTF16StringEncoding error:nil];

htmlBody = [htmlBody stringByReplacingOccurrencesOfString:@"//marker_1//" withString:NSLocalizedString(@"localizedKey_1", nil)];
htmlBody = [htmlBody stringByReplacingOccurrencesOfString:@"//marker_2//" withString:NSLocalizedString(@"localizedKey_2", nil)];
htmlBody = [htmlBody stringByReplacingOccurrencesOfString:@"//marker_3//" withString:NSLocalizedString(@"localizedKey_3", nil)];

[self.webView loadHTMLString:htmlBody baseURL:baseURL]; 
```

现在我可以使用像文本格式这样的 html 好东西 :D ！

我希望以上内容能帮助很多人:)！

谢谢大家的支持！

# android - onInterceptTouchEvent，onTouchEvent 只看到 ACTION_DOWN

> ID：12592610
> 
> 赞同：6
> 
> 时间：2012-09-25T23:35:06.190
> 
> 标签：android, scrollview, android-linearlayout, touch-event, motionevent

我有一个顶级 ViewGroup，我称之为 SliderView，我想在其中检测滑动。这主要是有效的，但一个奇怪的失败仍然存在。

SliderView 的本质是覆盖 onInterceptTouchEvent，一旦用户真正滑动，返回“true”以防止其他视图看到 MotionEvent。这是一段代码：

```
public class SliderView extends ViewGroup
{
  enum MoveState { MS_NONE, MS_HSCROLL, MS_VSCROLL };
  private MoveState moveState = MoveState.MS_NONE;

  ... other code ...

  public boolean onInterceptTouchEvent(MotionEvent e)
  {
    final int action = e.getAction();
    switch (action & MotionEvent.ACTION_MASK)
    {
      case MotionEvent.ACTION_DOWN:
        moveState = MoveState.MS_NONE;
        break;

      case MotionEvent.ACTION_MOVE:
        if (moveState == MoveState.MS_NONE)
        {
          if (motion is horizontal)
          {
            moveState = MoveState.MS_VSCROLL;
            return true;
          }
          else
            moveState = MoveState.MS_VSCROLL; // let child window handl MotionEvent
        }
        else if (moveState == MoveState.MS_HSCROLL)
          return true; // don't let children see motion event.
    }
    return super.onInterceptTouchEvent (e);
  }

  ... other code ...
} 
```

我的理解是我的 SliderView（这是最外层的视图）应该*始终*接收 onInterceptTouchEvent。在我的一项测试中，顶级子级是 a 但是，在以下情况下，这似乎不是。

当顶级子项是 ScrollView 时，onInterceptTouchEvent 会获取 ACTION_MOVE，并且我的代码会执行我想要的操作。在另一种情况下，顶级子级是 LinearLayout，它有时会失败：它总是获得 ACTION_DOWN 但只有当用户触摸 LinearLayout 内的小部件时才会获得 ACTION_MOVE；如果触摸空白区域，则只有 ACTION_DOWN 通过。

我会注意到它的行为就好像失败案例触摸发生在 SliderView 之外。但是，如果是这样，我为什么会收到 ACTION_DOWN 事件？

第二个注意事项：查看 ScrollView 的源代码，我看到它正在检查“inChild”；我还没有弄清楚那是什么以及它可能是如何相关的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T06:37:33.880

由于user123321[在这里的回答](https://stackoverflow.com/questions/13283827/onintercepttouchevent-only-gets-action-down)

> onInterceptTouchEvent 仅在父视图具有从 onTouchEvent 返回“true”的子视图时才被调用。一旦孩子返回 true，父母现在就有机会拦截该事件

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-01-11T11:13:58.510

你只需要打电话

```
requestDisallowInterceptTouchEvent(true); 
```

在父视图上，像这样 -

```
 @Override
        public boolean onTouch(View view, MotionEvent motionEvent) {
            view.getParent().requestDisallowInterceptTouchEvent(true);
            switch(motionEvent.getActio){
            }

            return false; 

         } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-01T04:40:00.793

来自 Android 开发人员的参考（[http://developer.android.com/reference/android/view/ViewGroup.html#onInterceptTouchEvent(android.view.MotionEvent)](http://developer.android.com/reference/android/view/ViewGroup.html#onInterceptTouchEvent(android.view.MotionEvent))）：

“2\. .... 另外，通过从 onTouchEvent() 返回 true，您将不会在 onInterceptTouchEvent() 中收到任何后续事件，并且所有触摸处理都必须像往常一样在 onTouchEvent() 中发生。”

也许是因为你的 onTouchEvent 总是返回 true ..？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-06T02:15:13.743

在拦截 onTouchEvent 时，需要做两件事来正确拦截触摸（其他都是默认的）。

1.  在 onInterceptTouchEvent() 中返回 false

    ```
    @Override
    public boolean onInterceptTouchEvent(MotionEvent me) {
        return false;
    } 
    ```

2.  在 onTouchEvent() 中返回 true

    ```
    @Override
    public boolean onTouchEvent(MotionEvent me) {

        switch (me.getAction()) {
        case MotionEvent.ACTION_DOWN:
            log("MotionEvent.ACTION_DONE");
            break;
        case MotionEvent.ACTION_MOVE:
            log("MotionEvent.ACTION_MOVE");
            break;
        case MotionEvent.ACTION_CANCEL:
            log("MotionEvent.ACTION_CANCEL");
            userActionDown = false;
            break;
        case MotionEvent.ACTION_UP:
            log("MotionEvent.ACTION_UP");
            break;
        }

        return true;
    } 
    ```

3.  然后，对于您的情况（和其他情况）。如上所示，在 onTouchEvent() 中进行所有计算。onInterceptTouchEvent() 只会为 ACTION_DOWN 调用一次。但是，onTouchEvent 也会得到 ACTION_DOWN 事件，你需要在那里返回 true，而不是 super。

有关 onInterceptTouchEvent() 的更多信息：http: [//developer.android.com/reference/android/view/ViewGroup.html#onInterceptTouchEvent(android.view.MotionEvent)](http://developer.android.com/reference/android/view/ViewGroup.html#onInterceptTouchEvent(android.view.MotionEvent))

ps - 当你在这里提问时，你也应该写下你想要做什么的描述。你很可能会找到更好的做事方式。对于您的导航情况，您正在寻找的真正答案是[ViewPager](http://developer.android.com/training/animation/screen-slide.html)。它工作得很好并且很容易实现。您还应该查看 Android 必须为开发人员提供的其他一些简单的导航模式：[链接](http://developer.android.com/design/patterns/app-structure.html#top-level-switching)。

# javascript - 将段落拆分为跨度

> ID：12592611
> 
> 赞同：1
> 
> 时间：2012-09-25T23:35:13.030
> 
> 标签：javascript, jquery, html

我有两段。首先，我想先将每个单词分开，用带有 id 的 span 包装它，然后将例如 5 个第一个单词移动到第二段（带空格）。问题是我不知道 append(' ') 是否是个好主意，第二个问题是在将 span 注入到第二段之后，它的宽度太大（应该是 100px，文本与下一个重叠像第一段一样行juz

这是我的尝试

```
 <body>
<script type="text/javascript">
    $(function(){
        var obj = $('.p1')
        var text = obj.html().split(' '), len = text.length, result = [];
                for( var i = 0; i < len; i++ ) {
                    result[i] = '<span id="'+i+'">' + text[i] + '</span>';
                }
                obj.html(result.join(' '));

            var words = $('.p1').find('span');
            for(var i = 0; i < 5; i++){
                $('.p2').append($(words[i]).clone());
                $('.p2').append('&nbsp;');
            }
    });
</script>

<div class="test" style="width:100px">
<p class="p1">
test1 test2 test3 test4 test5 test6 test7 test8
</p>
</div>
<div class="test" style="width:100px">
<p class="p2">
</p>
</div>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T23:46:53.640

像这样的东西？

```
$(function() {
    var txt = $('.p1').text().split(' ')
        len = txt.length,
        result = [];
    for (var i = 0; i < len; i++) {
        result[i] = '<span id="' + i + '">' + txt[i] + '</span>';
    }
    $('.p1').html(result.join(' '));
    $('.p1 span:gt(0)').appendTo('.p2');
});​ 
```

[http://jsfiddle.net/ULmVt/](http://jsfiddle.net/ULmVt/)

请注意，如果要移动元素，则不应克隆它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T23:48:45.940

使用`$('.p2').append(' ');`而不是`$('.p2').append('&nbsp;');`

`&nbsp;`= 非中断空间

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T23:50:55.740

**[jsBin 演示](http://jsbin.com/onoqix/1/edit)**

```
 var obj = $('.p1'),
       text = obj.html().split(' '),
       len = text.length,
       result = [];

   for( i=0; i<len; i++ ) {
        result[i] = '<span id="'+i+'">' + text[i] + '</span>';
   }
   obj.html(result.join(' '));

  $('.p1 span:lt(5)').clone().appendTo('.p2').after(' '); 
```

# copy - 在 Perforce Depot 的两个区域之间复制目录

> ID：12592613
> 
> 赞同：1
> 
> 时间：2012-09-25T23:35:41.660
> 
> 标签：copy, perforce

我有两个领域：

```
//depot/path/to/area1/...
//depot/another/path/to/area2/... 
```

我在这两个领域工作，需要来回复制这两个领域的文件。我假设一个

```
p4 copy //depot/path/to/area1/... //depot/another/path/to/area2 
```

会这样做，但是当我在第二个区域“p4 同步”时，没有任何下载。我签入 p4v，但在更改列表中看不到任何内容。

有谁知道如何做到这一点？

*是的，我知道我不应该在两个区域拥有相同的文件，但这不在我的控制范围内。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T08:55:50.590

为了集成/复制文件/从 //depot/path/to/area1/... 到 //depot/another/path/to/area2/... 您需要调用：

```
p4 copy //depot/path/to/area1/... //depot/another/path/to/area2/...
p4 submit 
```

您需要在其客户端视图中具有目标路径的客户端中执行此操作。目标路径是 //depot/another/path/to/area2/...

# actionscript-3 - Flash AS3 - 定时器在几个循环后发疯

> ID：12592624
> 
> 赞同：0
> 
> 时间：2012-09-25T23:36:26.490
> 
> 标签：actionscript-3, flash, random, timer, delay

我一直在制作一个“幻灯片”，其中 4 个图像以随机顺序进行动画处理。

为了防止一个图像连续出现多个动画，例如连续 3 次，我写了一些逻辑。

我的问题：在所有 4 个图像都被动画化了几次之后（在我认为第二次清除查询“数组”之后），计时器变得疯狂，`trace()`随机数以高序列率出现，而没有动画图像，看起来我认为令人毛骨悚然。

我的代码：

```
var myTimer:Timer = new Timer(2500);
myTimer.addEventListener(TimerEvent.TIMER, animate);
myTimer.start();

var array:Array = new Array();
var lastNum:int;

function animate(e:TimerEvent):void {
    var num:int = getRandomNumber( 1, 4 );
    trace( num );
    if( array.indexOf( num ) < 0 && num != lastNum ) {
        myTimer.delay = 2500;
        if( num == 1 ) {
            sideImg_start_1.play(); // comment this*
        } else if( num == 2 ) {
            sideImg_start_2.play(); // comment this*
        } else if( num == 3 ) {
            sideImg_start_3.play(); // comment this*
        } else if( num == 4 ) {
            sideImg_start_4.play(); // comment this*
        }
        array.push( num );
        if( array.length == 4 ) {
            array.splice(0, 4);
            trace(" array cleared - " + array.length);
            lastNum = num;
        }
    } else {
        myTimer.delay = 100; // I've also tryed so make a higher delay
                // like 500 but its the same problem...
    }
}

function getRandomNumber( min:int, max:int ):int {
    return Math.floor( Math.random() * ( 1 + max - min ) ) + min;
}

stop(); 
```

所以，伙计们，感谢您的所有回答和帮助：D

更新：

首先，我尝试简单地调用“animate()”函数，而不是为计时器定义更高的速度以快速调用下一个数字，而不会浪费时间，这会使随机动画看起来很奇怪。

我用过`animate(null);`而不是`myTimer.delay = 100;`以前，但后来我收到了一个 STACKOVERFLOW 错误：P

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T00:10:20.687

例如，如果您`lastNum`等于 4，并且您有 1,2 和 3 作为新值，那么您最终会出现无限循环，

因为你不能插入 4 （因为它等于`lastNum`）并且你不能插入 1,2 或 3 因为它们已经在数组中。

你需要做的是：

```
if (array.length == 4) {
    array.splice(0, 4);
    lastNum = num;
} else {
    lastNum = 0; //<-- HERE
} 
```

# android - 如何将字符串添加到嵌套的 Arraylist？

> ID：12592625
> 
> 赞同：0
> 
> 时间：2012-09-25T23:36:26.470
> 
> 标签：android, string, arraylist

我有这个代码：

```
ArrayList<ArrayList<String>> row = new ArrayList<ArrayList<String>>();
ArrayList<String> column = new ArrayList<String>(); 
```

我的问题是我无法向其中添加字符串。如何从 TextView（在 Android 中）添加字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T00:02:10.703

假设您已`TextView`在 xml 中声明（替换`myTextView`为您的 TextView 的 id）：

```
TextView tv = (TextView) findViewById(R.id.myTextView);
int index = 0;//change to index in row that you want to modify
String text = tv.getText().toString();
ArrayList<String> col = row.get(index);
if (col == null) {
    col = new ArrayList<String>();
    col.add(text);
    row.add(col);
}
else {
    col.add(text);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T23:47:37.290

```
ArrayList<ArrayList<String>> row = new ArrayList<ArrayList<String>>();
ArrayList<String> column = new ArrayList<String>();
row.add(column);
column.add(myString);

String theString = row.get(0).get(0); 
```

# objective-c - 分页 TableView，但 DataSource/Delegates 未执行

> ID：12592626
> 
> 赞同：0
> 
> 时间：2012-09-25T23:36:45.523
> 
> 标签：objective-c, uitableview, delegates, datasource, paging

我在获取数据源或委托方法执行时遇到问题。

我在我的 MainViewController 中使用了分页视图，它的页面很好，但是当涉及到 tableview 时是空白的，并且当我在数据源方法所在的位置放置断点时，它永远不会被调用。

MainViewController 加载视图

```
 if ((NSNull *)controller2 == [NSNull null])
{
    if(page == 2)
    {
        controller2 = [[requestDetailThreeViewController alloc] initWithRequestNumber:[request objectForKey:@"RequestID"]];
        [viewControllers replaceObjectAtIndex:page withObject:controller2];
        CGRect frame = scrollView.frame;
        frame.origin.x = frame.size.width * 2;
        frame.origin.y = 0;
        controller2.view.frame = frame;
        [scrollView addSubview:controller2.view];
    }

} 
```

TableViewController (requestDetailThreeViewController)

```
 - (void)viewDidLoad
 {
   [super viewDidLoad];

[History fullHistoryWithBlock:^(NSArray *netMessages, NSError *error) {
    if (error) {

        [[[UIAlertView alloc] initWithTitle:NSLocalizedString(@"Error", nil) message:   [error localizedDescription] delegate:nil cancelButtonTitle:nil otherButtonTitles:NSLocalizedString(@"OK", nil), nil] show];
    } else {
        NSLog(@"Number of Historical Entries: %d", [netMessages count]);

        self.historyFromNet = [NSMutableArray arrayWithArray:netMessages];
    }

} forID:requestNum];

}

   - (id) initWithRequestNumber:(NSString *)requestID
 {

     if (self = [super initWithNibName:@"View" bundle:nil])
  {
      self.requestNum = requestID;
  }
  return self;

} 
```

（为第二块代码的间距道歉，很难让它进入代码模式。它执行这两个方法，但它不执行我在课堂上也有的数据源方法。

在 XIB 文件中，我将 xib 的所有者设置为 requestDetailThreeViewController 将 tableView 设置为 datasource/delegate 并查看

如果我在 ViewDidLoad 中将 tableview 设置为隐藏，它确实会消失。

我只是无法让它执行填充表格的方法。

更新：

更多信息-

View XIB 里面只有一个 TableView，没有控制器。

谢谢！艾伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T00:14:43.053

您可以尝试 设置`self.tableView.delegate = self`为 `-(void)viewDidLoad`

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.tableView.delegate = self;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T00:01:16.450

您正在添加一个子视图控制器，因此您需要使用 UIViewController 包含方法。

就像是：

```
 controller2 = [[requestDetailThreeViewController alloc] initWithRequestNumber:[request objectForKey:@"RequestID"]];
    [viewControllers replaceObjectAtIndex:page withObject:controller2];
    [self addChildViewController:controller2];
    CGRect frame = scrollView.frame;
    frame.origin.x = frame.size.width * 2;
    frame.origin.y = 0;
    controller2.view.frame = frame;
    [scrollView addSubview:controller2.view];
    [controller didMoveToParentViewController:self];
} 
```

还可以考虑将 UIPageViewController 用于分页视图，而不是通过滚动视图手动执行

# ruby - PG::ERROR: 另一个命令已经在进行中

> ID：12592632
> 
> 赞同：4
> 
> 时间：2012-09-25T23:37:32.090
> 
> 标签：ruby, postgresql, activerecord, import, pg

我有一个导入器，它获取电子邮件列表并将它们保存到 postgres 数据库中。这是无表导入器类中的一段代码：

```
query_temporary_table = "CREATE TEMPORARY TABLE subscriber_imports (email CHARACTER VARYING(255)) ON COMMIT DROP;"
query_copy            = "COPY subscriber_imports(email) FROM STDIN WITH CSV;"
query_delete          = "DELETE FROM subscriber_imports WHERE email IN (SELECT email FROM subscribers WHERE suppressed_at IS NOT NULL OR list_id = #{list.id}) RETURNING email;"
query_insert          = "INSERT INTO subscribers(email, list_id, created_at, updated_at) SELECT email, #{list.id}, NOW(), NOW() FROM subscriber_imports RETURNING id;"

conn = ActiveRecord::Base.connection_pool.checkout
conn.transaction do
  raw = conn.raw_connection

  raw.exec(query_temporary_table)
  raw.exec(query_copy)
  CSV.read(csv.path, headers: true).each do |row|
    raw.put_copy_data row['email']+"\n" unless row.nil?
  end
  raw.put_copy_end
  while res = raw.get_result do; end # very important to do this after a copy

  result_delete = raw.exec(query_delete)
  result_insert = raw.exec(query_insert)

  ActiveRecord::Base.connection_pool.checkin(conn)
  {
    deleted:  result_delete.count,
    inserted: result_insert.count,
    updated:  0
  }
end 
```

我遇到的问题是，当我尝试上传时出现异常：

```
PG::ERROR: another command is already in progress: ROLLBACK 
```

这一切都在一个动作中完成，我所做的唯一其他查询是用户验证，并且我有一个数据库互斥锁来防止重叠导入。这个查询一直运行良好，直到我的最新推送包括将我的 pg gem 从 0.13.2 更新到 0.14.1（以及其他“不相关”代码）。

该错误最初是在我们的登台服务器上开始的，但后来我能够在本地重现它并且没有想法。

如果我需要更清楚我的问题，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-26T18:37:25.570

找到了我自己的答案，如果有人在使用“COPY”导入大量数据时发现同样的问题，这可能会很有用

在 CSV.read() 块中引发了一个异常，我确实抓住了它，但我没有正确结束这个过程。

```
 begin
    CSV.read(csv.path, headers: true).each do |row|
      raw.put_copy_data row['email']+"\n" unless row.nil?
    end
  ensure
    raw.put_copy_end
    while res = raw.get_result do; end # very important to do this after a copy
  end 
```

此块确保完成 COPY 命令。我还在最后添加了这个以将连接释放回池中，而不会在成功导入的情况下中断流程：

```
rescue
  ActiveRecord::Base.connection_pool.checkin(conn) 
```

# java - 由另一个 Thread Java smartcardio 建立的独占访问

> ID：12592634
> 
> 赞同：2
> 
> 时间：2012-09-25T23:37:52.620
> 
> 标签：java, multithreading, thread-safety, smartcard

全部，

我很欣赏这个网站上的许多有用的答案，但我发现有必要发布我的第一个问题（如果您发现我的帖子中有任何需要改进的地方，请告诉我）。

我有一个大小适中的 Java 程序，它带有 GUI，充当“中间人”和控制器。在信息流的一端，它通过 HTTP 服务器发送和接收数据。另一方面，它与 API 交互，其中数据最终与 SmartCard 交换。“中间”是 GUI、日志记录和其他一些功能。

还有一项功能（通过 GUI 启动）可以偶尔加载 SmartCard 的更新。否则，与智能卡的交换将通过 HTTP 启动。

问题是在这两种模式之间切换时（将 http 与智能卡通信，然后切换到加载更新，反之亦然）。

当我这样做时，我已经得出结论，我遇到了问题

> CardException：由另一个线程建立的独占访问

正如抛出的`sun.security.smartcardio`

在网上搜索显示异常似乎来自的代码是

```
void checkExclusive() throws CardException {
        Thread t = exclusiveThread;
          if (t == null) {
                return;
            }
             if (t != Thread.currentThread()) {
            throw new CardException("Exclusive access established by another Thread");
        }
    } 
```

我的第一个想法是我需要在`SmartCard API`每次需要时实例化它（然后将其设置回 null），而不是像最初那样为整个程序实例化一次。

这适用于通过 http 进行的交换，我认为这是因为对该`handle()`方法的每个请求都是一个新线程。

在 GUI 中，更新由`ActionEvent`创建`CardUpdate`. 然后在该类中获取`SmartCard API`.

我想如果在`actionPerformed`触发时我将操作放在不同的临时线程上，我可能会有更好的运气。到目前为止，没有。

我得到的最接近的是使用类似的东西：

```
SwingWorker worker = new SwingWorker<ImageIcon[], Void>() { 
```

在[Sun 的网站上可以找到](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/simple.html)

使用它我可以进行更新，然后返回 http 交换，但我无法进行另一次更新（按一次使用 SwingWorker 的规定）

然后我尝试`SwingWorker`根据需要制作多个做类似的事情

```
private class GUICardUpdate extends SwingWorker<Integer, Void > { 
```

但后来我又回到了原来的问题。我还尝试以这种方式在 GUI 类之外做一个简单的附加线程：

```
public class GUI extends javax.swing.JFrame implements ActionListener, Runnable 
```

但这也不例外。

也许我对线程的理解不够好，或者我忽略了一些简单的东西。有人有想法么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T00:50:07.003

据我所知，您正在使用`javax.smartcardio`包（直接或间接）来处理您的卡。某个线程（由您或您可能在其上使用的框架创建`javax.smartcardio`）在实例上调用`beginExclusive()`方法`Card`以确保对卡的独占访问。

独占访问是必要的，因为对保存在 IC 卡上的数据的处理是依赖于状态的，因此正确选择数据文件和读取它们的记录需要应用层的操作不干扰其他应用程序或线程的操作. 为此目的，这三个`Card`接口方法`beginExclusive()`，`endExclusive()`并`checkExclusive()`存在。

因此，您应该检查您的（框架）代码是否调用`beginExclusive()`然后不调用`endExclusive()`.

# perl - 是否可以使用 while(my($key, $value) ... ) {} 方法按排序顺序遍历哈希？

> ID：12592637
> 
> 赞同：4
> 
> 时间：2012-09-25T23:38:09.750
> 
> 标签：perl, perl-data-structures

对于这种格式的哈希：

```
my $itemHash = {
    tag1 => {
        name => "Item 1",
        order => 1,
        enabled => 1,
    },
    tag2 => {
        name => "Item 2",
        order => 2,
        enabled => 0,
    },
    tag3 => {
        name => "Item 3",
        order => 3,
        enabled => 1,
    },
    ...
} 
```

我有这段代码可以正确地遍历哈希：

```
keys %$itemHash; # Resets the iterator
while(my($tag, $item) = each %$itemHash) {
    print "$tag is $item->{'name'}"
} 
```

但是，这些项目的迭代顺序似乎非常随机。是否可以使用相同的`while`格式按照每个项目的哈希中的“订单”键指定的顺序遍历它们？

（我知道我可以先对键进行排序，然后对它进行 foreach 循环。只是想看看是否有更清洁的方法来做到这一点。）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-12T14:05:01.970

您可以执行以下操作：

```
foreach my $key (sort keys %{$itemHash}) {
    print "$key : " . $itemHash->{$key}{name} . "\n";
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-25T23:57:54.190

“有序散列”的概念是错误的。虽然数组是元素的有序列表，因此可以通过索引访问，但哈希是键值对的（无序）集合，其中键是一个集合。

要完成您的任务，您必须按`order`属性对键进行排序：

```
my @sorted = sort {$hash{$a}{order} <=> $hash{$b}{order}} keys %$itemHash; 
```

然后，您可以通过以下方式创建键值对`map`：

```
my @sortedpairs = map {$_ => $itemHash->{$_}} @sorted; 
```

我们可以把它包装成一个子：

```
sub ridiculousEach {
  my %hash = @_;
  return map
      {$_ => $hash{$_}}
        sort
          {$hash{$a}{order} <=> $hash{$b}{order}}
             keys %hash;
} 
```

获得一个大小均匀的键值元素列表，以及

```
sub giveIterator {
  my %hash = @_;
  my @sorted = sort {$hash{$a}{order} <=> $hash{$b}{order}} keys %hash;
  return sub {
     my $key = shift @sorted;
     return ($key => $hash{$key});
  };
} 
```

创建一个回调，该回调是每个的插入。

然后我们可以这样做：

```
my $iterator = giveIterator(%$itemHash);
while (my ($tag, $item) = $iterator->()) {
  ...;
} 
```

这种方法有一个严重的缺点：`each`一次只使用两个元素，因此在恒定内存中运行。该解决方案必须读取整个哈希并存储所有键的数组。小散列不明显，这对于大量元素来说很重要。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-25T23:55:45.153

哈希中的键的顺序是未定义的。所以你需要对键进行排序。正如您所说，一种方法是拉出密钥并对其进行排序，然后遍历密钥。

另一种方法是即时对它们进行分类。我不确定你会认为它更清洁。就像是：

```
for my $key ( sort { $itemHash->{$a}{order} <=> $itemhash->{$b}{order} } keys %$itemHash ) {
  print "$key is $itemHash->{$key}{name}";
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-27T08:29:16.223

这样会干净很多。我们必须使用 cmp 对字符串进行排序。

> ```
> my $itemHash = {
>     tag1 => {
>         name => "Item 1",
>         order => 1,
>         enabled => 1,
>     },
>     tag2 => {
>         name => "Item 2",
>         order => 2,
>         enabled => 0,
>     },
>     tag3 => {
>         name => "Item 3",
>         order => 3,
>         enabled => 1,
>     }
> };
> 
> foreach((sort{$a cmp $b}(keys(%$itemHash)))){
> print "$_ is $itemHash->{$_}->{'name'}\n";
> } 
> ```

# python - 带有 Tweepy 的 Twitter 流 API 拒绝 oauth

> ID：12592640
> 
> 赞同：5
> 
> 时间：2012-09-25T23:38:36.080
> 
> 标签：python, twitter, tweepy, twitter-streaming-api

我正在尝试访问我以前在不正确地使用 Tweepy 时工作过的 Twitter 流。现在我了解了 Tweepy 的用途，我编写了以下 Stream.py 模块。当我运行它时，我收到错误代码 401，告诉我我的身份验证已被拒绝。但我之前使用相同的消费者令牌和秘密让它工作。有任何想法吗？

```
from tweepy.streaming import StreamListener
from tweepy import OAuthHandler
from tweepy import Stream
from tweepy import TweepError
from tweepy import error

#Removed. I have real keys and tokens
consumer_key = "***" 
consumer_secret = "***"
access_token="***"
access_token_secret="***"

class CustomListener(StreamListener):
    """ A listener handles tweets are the received from the stream. 
        This is a basic listener that just prints received tweets to stdout."""

    def on_status(self, status):
        # Do things with the post received. Post is the status object.
        print status.text
        return True

    def on_error(self, status_code):
        # If error thrown during streaming.
        # Check here for meaning: 
        # https://dev.twitter.com/docs/error-codes-responses
        print "ERROR: ",; print status_code
        return True

    def on_timeout(self):
        # If no post received for too long
        return True

    def on_limit(self, track):
        # If too many posts match our filter criteria and only a subset is
        # sent to us
        return True

    def filter(self, track_list):
        while True:
            try:
                self.stream.filter(track=track_list)
            except error.TweepError as e:
                raise TweepError(e)

    def go(self):
        listener = CustomListener()
        auth = OAuthHandler(consumer_key, consumer_secret)
        self.stream = Stream(auth,listener,timeout=3600)
        listener.filter(['LOL'])

if __name__ == '__main__':
    go(CustomListener) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T20:25:57.830

对于碰巧遇到相同问题的任何人，我应该在初始化身份验证后添加此行：

```
auth.set_access_token(access_token, access_token_secret) 
```

# ruby-on-rails - 几个非常具体的elasticsearch问题

> ID：12592642
> 
> 赞同：2
> 
> 时间：2012-09-25T23:39:09.017
> 
> 标签：ruby-on-rails, ruby, lucene, elasticsearch, tire

我有一些关于 Rails + Tire + ElasticSearch 的非常具体的问题。

我已经看过 Railscast 关于它的内容，并且我已经阅读了很多文档，但老实说，这超出了我的想象。我希望有人能帮助我理解我无法完全掌握的细节。

这是我模型中的 Resource.rb elasticsearch 部分：

```
 include Tire::Model::Search
  include Tire::Model::Callbacks

  mapping do
    indexes :url
    indexes :title,       :boost => 3
    indexes :description, :boost => 2
    indexes :category,    :boost => 1.5, type: 'object',
              properties: {
                name: { type: 'multi_field',
                  fields: { name: { type: 'string', analyzer: 'keyword' } } } }
    indexes :user, type: 'object',
              properties: {
                  username: { type: 'multi_field',
                      fields: { username: { type: 'string', analyzer: 'keyword' } } } }
  end  

  def self.elasticsearch(params)
    tire.search(load: true, page: params[:page], per_page: 20) do
      query { string params[:e], default_operator: "OR" } if params[:e].present?
    end
  end

  def to_indexed_json
    to_json( include: { user: { only: [:username] }, 
                    category: { only: [:name] } 
           } )
  end 
```

1.  “未分析”是什么意思？在我正在阅读的许多教程中，他们都使用它。如果不进行分析，为什么将其包含在`mapping do`?
2.  使用索引的目的是什么。例如，类似`indexes :id, type: 'integer'`. 为什么需要对整数进行索引，这对性能有帮助吗？
3.  如何修改 URL 的分析器以使其更好地工作？例如，如果它存储为`http://www.dropbox.com`，搜索`dropbox.com`不会找到结果，但`www.dropbox.com`会。我尝试粘贴所有不同的分析器，但没有一个真正适用于 URL
4.  如果 my`category.name`存储为复数形式，例如“books”、“movies”、“tapes”，我如何告诉分析器根据单数和复数来查看这个词。搜索“电影”不起作用，但“电影”确实有效
5.  当我删除`load: true`时，我的整个网站都会中断。他在railscast中回顾了这一点，但只是片刻。这是否意味着我需要将每个属性（和关联）移动到映射中，并将其更改为 :not_analyzed？（我刚刚意识到......也许我只是回答了我自己的问题＃1！）。
6.  一般来说，哪种类型的数据最适合 OR，哪种数据最适合 AND？就获得更多结果而言，我正在考虑或似乎更宽容

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T08:38:25.797

这一切都与 Lucene 有关：索引字段是您要搜索的字段。当您索引一个字段时，您可以决定是否要分析它。这意味着您可以按原样对其进行索引，而无需对其进行标记或应用任何标记过滤器。否则，您可以对其应用分析器。Lucene 有一些开箱即用的分析器，在 elasticsearch 中也有。分析器由标记器和标记过滤器列表组成。分词器确定您如何以不同的术语拆分字段内容。使用令牌过滤器，您可以过滤这些术语和/或修改它们。

例如，最常见的标记方式是使用 WhitespaceTokenizer。然后，您可以应用词干提取，例如，以索引术语的词干。例如`running`变为`run`，复数词变为单数。

有时（实际上经常如此），您需要创建自己的分析器，将标记器和要使用的标记过滤器结合起来。您可以在定义自定义分析器的[设置中的弹性搜索中执行此操作。](http://www.elasticsearch.org/guide/reference/index-modules/analysis/)

有时您不想在 lucene 中索引某些字段，因为您不打算搜索它们，但您确实想存储它们。存储字段是您希望在搜索结果中返回的字段。实际上 lucene 可以搜索索引的字段，但只能返回存储的字段。幸运的是，elasticsearch 帮助我们存储了整个[_source](http://www.elasticsearch.org/guide/reference/mapping/source-field.html)文档，以便我们获取默认索引的整个文档。如果您不想将源存储在 elasticsearch 中，您可以随时禁用此功能。否则，如果您不想在查询时返回整个源，您只需指定[字段列表](http://www.elasticsearch.org/guide/reference/api/search/fields.html)你想要回来。如果它们被存储（您可以在映射中配置它，每个字段的默认值被索引但不存储）它们会立即返回，否则它们会从源本身提取（如果未禁用）。如果您有大文件，我建议配置您想要返回的字段，否则您每次都会取回整个源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T08:18:58.730

1.  未分析意味着该字段不使用分析器管道（标记器、过滤器等）。该字段仍可搜索。

2.  `indexes`是你如何告诉轮胎一个字段 - 它只是用于添加新字段的 dsl 关键字（如`column`在 activerecord 迁移中）。elasticsearch 中的所有内容都已编入索引

3.  您可能需要编写自己的分析器。这可以通过将现有的标记器、过滤器等串在一起作为索引设置来完成。

4.  设置一个使用 elasticsearch 提供的词干分析器作为其过滤器之一的分析器

5.  我看到你为此创建了一个单独的问题

6.  我不认为这是可以回答的。这取决于您要搜索的数据是什么

# php - 用php从mysql数据库中读取blob

> ID：12592643
> 
> 赞同：4
> 
> 时间：2012-09-25T23:39:10.623
> 
> 标签：php, mysql, blob

我在我的 php 代码中执行以下操作：

```
$q="SELECT * FROM {$table} where x;
$link = mysqli_connect("localhost", "test", "test","mytable");
$res = mysqli_query($link,$q);
 if($res)
   {
       $row = mysqli_fetch_assoc($res);
       header("Content-type: text/xml");
       header("Content-Disposition: attachment; filename=$name");
       echo $row['blob'];
   } 
```

我可以看到我上传到 mysql 的数据（xml 文件）没有任何前导空格，但是当我运行上面的代码 3 个新行并出现一个空格并且文件不再是格式良好的 xml 时。知道为什么没有从表格中读取确切的内容吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T21:49:27.880

想通了。一个愚蠢的错误。我打开的 php 标记从第 3 行第 2 列开始

```
> <?php 
```

这使得“回声”从同一行（第 3 行第 2 列）开始。回声应该是这样工作的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T01:02:56.763

您应该调查额外换行符的来源，但您可以通过运行来解决您的问题：

```
trim($row['blob']); 
```

# uitableview - 将捕获的图像存储在数组中？

> ID：12592646
> 
> 赞同：0
> 
> 时间：2012-09-25T23:39:34.520
> 
> 标签：uitableview, uiimagepickercontroller

我到处寻找这个问题的答案，我有一个相机屏幕，你可以在上面拍照，然后照片需要存储在某个地方，然后可以稍后从 tableview 访问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T01:04:13.907

将 a 中捕获的图像存储`UIImagePickerController`在 an`NSArray`中是有效的。

你可以有这样的东西：

```
/* ViewController.h */
@interface ViewController : UIViewController <UIImagePickerControllerDelegate>

@property (nonatomic, strong) UIImagePickerController *imagePicker;
@property (nonatomic, strong) NSMutableArray *photos;

/* ViewController.m */
@synthesize imagePicker = _imagePicker;
@synthesize photos = _photos;

// initialize imagePicker
UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
imagePicker.delegate = self;
self.imagePicker = imagePicker;

- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    UIImage *selectedImage = [info objectForKey:UIImagePickerControllerOriginalImage];
    [self.photos addObject:selectedImage];
} 
```

**编辑：**要在表格视图中查看数组中的图像，您可以使用以下内容：

```
// I'm assuming you only have 1 section for the table view

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [self.photos count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    // get / instantiate cell

    // This will use the default imageView in a UITableViewCell.
    cell.imageView.image = [self.photos objectAtIndex:indexPath.row];
} 
```

# vb.net - 使用 VB.NET 在 Windows 8 应用程序中实现 SQLite

> ID：12592647
> 
> 赞同：0
> 
> 时间：2012-09-25T23:39:34.853
> 
> 标签：vb.net, sqlite, microsoft-metro

我正在创建一个需要本地数据库支持的应用程序（因为我不知道如何编写和连接 Web 服务）。我正在使用 VB.NET 进行开发，因为它是我唯一使用过的编程语言。

我似乎已将 SQLite 正确添加到我的应用程序中；但我不知道如何创建数据库、创建表、创建列和设置属性。我的理解是，这一切都必须用代码来完成，是否有可能获得一些关于如何做到这一点的指导和示例代码？

除此之外，我需要知道如何添加用户输入的数据，向用户显示该数据，允许用户编辑数据并允许用户删除条目。如果可能的话，我再次寻找带有解释的编码示例。

我知道这是一个大而复杂的问题，但我已经搜索了高低，几乎每篇文章都是为 C# 编写的，我根本无法理解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:28:08.477

谷歌吐出一堆例子：
[SQLite in VB.net](http://www.kirupa.com/net/sqllite_vb_pg1.htm)
[Getting SQLite Working with VB.NET](http://orbisvitae.com/ubbthreads/ubbthreads.php?ubb=showflat&Number=42215)
[SQLite.NET](http://www.connectionstrings.com/Providers/sqlite-net-provider)
[SQL In VB.NET](http://www.daniweb.com/software-development/vbnet/code/216920/sql-in-vb.net)
[Simple VB.Net Sqlite Example](http://sqlitedev.blogspot.de/2006/09/simple-vbnet-sqlite-example.html)
[SQLite Visual Basic tutorial](http://zetcode.com/db/sqlitevb/)
[Connecting SQLite with VB.net](http://www.dotnetspider.com/resources/37438-Connecting-SQLite-with-VB-net.aspx)

# java - Java中日期到整数的转换

> ID：12592648
> 
> 赞同：7
> 
> 时间：2012-09-25T23:39:38.823
> 
> 标签：java, date

我有一个带有以下内容的 int 变量。如何将其转换为 Date 对象，反之亦然。

```
int inputDate=20121220; 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-25T23:40:41.060

将值转换为 a`String`并用于[`SimpleDateFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)将其解析为`Date`对象：

```
int inputDate = 20121220;
DateFormat df = new SimpleDateFormat("yyyyMMdd");
Date date = df.parse(String.valueOf(inputDate)); 
```

反之亦然，但不是使用[`parse`](http://docs.oracle.com/javase/7/docs/api/java/text/DateFormat.html#parse%28java.lang.String%29)、使用[`format`](http://docs.oracle.com/javase/7/docs/api/java/text/DateFormat.html#format%28java.util.Date%29)和从结果转换`String`为`Integer`：

```
String s = date.format(date);
int output = Integer.valueOf(s); 
```

另一种方法是使用`substring`并手动解析`String`您的`Int`eger 的表示，但我**强烈建议您不**要这样做：

```
Calendar cal = Calendar.getInstance();
String input = String.valueOf(inputDate);
cal.set(Calendar.YEAR, Integer.valueOf(input.substring(0, 4)));
cal.set(Calendar.MONTH, Integer.valueOf(input.substring(4, 6)) - 1);
cal.set(Calendar.DAY_OF_MONTH, Integer.valueOf(input.substring(6)));
Date date = cal.getTime(); 
```

# facebook - Typekit 字体在 Facebook 页面中不起作用

> ID：12592650
> 
> 赞同：1
> 
> 时间：2012-09-25T23:40:12.260
> 
> 标签：facebook, typekit

我正在创建一个必须在其中加载 typekit 字体的 facebook 页面。

在 typekit 的工具包编辑器中，我输入了 facebook 应用程序的 url（打开应用程序选项卡时显示的 url）。

然后，我将 typekit 中的 javascript 包含在 facebook 页面上。

但是字体不加载。我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T16:20:33.090

我最近遇到了类似的问题。诀窍是确保字体在可以加载的任何地方都被允许。您拥有的每个 typekit 都有一个 Typekit 设置，您可以在其中指定允许的域。它可能看起来像这样：

```
facebook.com,localhost,*.facebook.com,myapp.herokuapp.com,*.myapp.herokuapp.com 
```

我不确定您是否需要所有这些，但该设置对我有用。“localhost”适用于我的本地开发环境，而 myapp.herokuapp.com 是我的应用程序所在的位置。

# c# - 如何动态创建嵌套的网格视图

> ID：12592652
> 
> 赞同：0
> 
> 时间：2012-09-25T23:40:31.913
> 
> 标签：c#, asp.net, gridview

我必须创建嵌套的gridviews，其中父gridview 中的a 字段将决定那里有多少级别。

例如，如果父 gridview 行是为团队负责人形成的，我必须为开发人员制作 1 个子网格。但是如果父 gridview 对应于经理，则子 gridview 将为团队负责人，孙子网格将属于开发人员. 同样，对于高级经理，也会有 3 个层次结构。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T04:26:17.007

这是如何创建嵌套数据网格视图的简单工作流程。请按照其中的步骤和程序进行操作。

[http://www.codeproject.com/Articles/189997/Gridview-inside-Gridview-in-asp-net-Csharp](http://www.codeproject.com/Articles/189997/Gridview-inside-Gridview-in-asp-net-Csharp)

以下是在这种情况下可能对您有所帮助的视频链接

[http://www.youtube.com/watch?v=5LYyIZabghw&noredirect=1](http://www.youtube.com/watch?v=5LYyIZabghw&noredirect=1)

# vb.net - 如何遍历gridview中的特定列？

> ID：12592653
> 
> 赞同：2
> 
> 时间：2012-09-25T23:40:32.443
> 
> 标签：vb.net, loops, gridview, rowdatabound

我需要遍历gridview中的特定列。例如，我需要循环每个“%”列，然后根据它们的值分配颜色，有没有简单的方法来实现呢？谢谢。

网格视图表 ![在此处输入图像描述](../Images/845e7da057cd2a1561ea42e7d9ae871d.png)

行数据绑定事件

```
 Protected Sub gv_ssi_rzli_data_1_RowDataBound(sender As Object, e As EventArgs) Handles gv_ssi_rzli_data_1.RowDataBound

    Dim gv As GridView = gv_ssi_rzli_data_1

    For i As Integer = 0 To gv.Rows.Count - 1

        If gv.Rows(i).Cells(0).Text = "Oct" Or
            gv.Rows(i).Cells(0).Text = "Nov" Or
            gv.Rows(i).Cells(0).Text = "Dec" Then

            If gv.Rows(i).Cells(2).Text >= Session("rzli_avg_blue_1") Then
                gv.Rows(i).Cells(2).BackColor = System.Drawing.Color.LightBlue
            ElseIf gv.Rows(i).Cells(2).Text >= Session("rzli_avg_green_1") And gv.Rows(i).Cells(2).Text < Session("rzli_avg_blue_1") Then
                gv.Rows(i).Cells(2).BackColor = System.Drawing.Color.LightGreen
            ElseIf gv.Rows(i).Cells(2).Text >= Session("rzli_avg_yellow_1") And gv.Rows(i).Cells(2).Text < Session("rzli_avg_green_1") Then
                gv.Rows(i).Cells(2).BackColor = System.Drawing.Color.LightYellow
            ElseIf gv.Rows(i).Cells(2).Text <= Session("rzli_avg_red_1") Then
                gv.Rows(i).Cells(2).BackColor = System.Drawing.Color.LightPink
            End If

        End If

    Next

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T00:01:24.300

有很多方法可以做到这一点。

首先，我可能应该指出，每次绑定一行时，您似乎都在阅读整个网格，这似乎没有必要。

除此之外，也许最简单的方法是将与您的值范围进行比较的代码抽象到它自己的方法中，并将参数作为要测试和修改的单元格。由于我假设您使用列索引 2 知道哪些列是百分比列，因此您只需使用相关单元格调用新方法，如下所示：

```
For i As Integer = 0 To gv.Rows.Count - 1
    Dim row = gv.Rows(i)

    Dim rowHeaderCell = row.Cells(0)
    if rowHeadercell.Text = "Oct" Or 
       rowHeaderCell.Text = "Nov" or 
       rowHeaderCell.Text = "Dec" Then

       SetCellBackGround(row.Cells(2))
       SetCellBackground(row.Cells(4))
       ' etc.
    End If
Next 
```

我假设，无论出于何种原因，您只想突出显示 10 月至 12 月的数字。如果您想改变，或者想为其他季度使用不同的颜色，请说出来。

SetCellBackground 看起来像这样（从内存中输入）：

```
Sub SetCellBackground(TableCell cell) 

    If cell.Text >= Session("rzli_avg_blue_1") Then
            cell.BackColor = System.Drawing.Color.LightBlue
        ElseIf cell.Text >= Session("rzli_avg_green_1") And cell.Text < Session("rzli_avg_blue_1") Then
            cell.BackColor = System.Drawing.Color.LightGreen
        ElseIf cell.Text >= Session("rzli_avg_yellow_1") And cell < Session("rzli_avg_green_1") Then
            cell = System.Drawing.Color.LightYellow
        ElseIf cell <= Session("rzli_avg_red_1") Then
            cell.BackColor = System.Drawing.Color.LightPink
        End If

 End Sub 
```

# jquery - jQuery 文件未加载（http 状态=失败）

> ID：12592655
> 
> 赞同：1
> 
> 时间：2012-09-25T23:40:51.053
> 
> 标签：jquery

昨天我遇到了一些 jQuery 脚本的问题。我做了一些研究并意识到以下行（在`head`标签中）有一个错误：

```
<script type="text/javascript" src="/Scripts/jquery-1.7.2.min.js"></script> 
```

错误是：

> 对“http://ajax.aspnetcdn.com/ajax/jquery.templates/beta1/jquery.tmpl.min.js”的请求失败（HTTP 状态：失败）

我试图直接访问该文件，但没有成功。

我尝试升级到 1.8.2，但遇到了一些其他问题。几分钟后……我突然意识到问题已经解决了……奇怪……

现在我遇到了同样的问题......我查看了我的代码，不知道是什么导致了这个错误......突然......我提到的文件又可以访问了！错误消失了。

这可能是什么原因造成的？`ajax.aspnetcdn.com`服务器会出现故障吗？这些天有人遇到过这个问题吗？？？

提前致谢。PD：这是我的第一个社区问题。这些年来我一直回到这里，从你们那里学到了很多东西！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T23:45:04.257

相信谷歌:)

[https://developers.google.com/speed/libraries/devguide#jquery](https://developers.google.com/speed/libraries/devguide#jquery)

你可以从多个版本的 jquery 中挑选，我个人从来没有遇到过谷歌 CDN 的任何问题 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T23:56:59.733

您可以使用由 Google cdn 托管的 jQuery 文件。当您想将其用于您的项目时，这是最好的选择，因为它还有助于减少网站的带宽。只需将其包含在您的页面中，脚本就会为您加载

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script> 
```

# ruby-on-rails - Resque retry 立即重试

> ID：12592660
> 
> 赞同：0
> 
> 时间：2012-09-25T23:41:42.477
> 
> 标签：ruby-on-rails, resque, resque-retry

这是我拥有的代码

```
class ExampleTask
    extend Resque::Plugins::ExponentialBackoff
    @backoff_strategy = [0, 20, 3600]
    @queue = :example_tasks
    def self.perform
      raise
    end
  end 
```

我遇到了一个问题，每当我在本地将此任务排入队列时，Resque 似乎会立即重试该任务，而不考虑退避策略。有没有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T04:43:16.390

升级到 1.0.0 实际上解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-12T18:08:31.530

对于任何未来的读者，数组中的第一个整数`@backoff_strategy`是 Resque-Retry 在第一次重试之前将等待多长时间。来自[github 自述文件](https://github.com/lantins/resque-retry#exponential-backoff)：

```
key: m = minutes, h = hours

              no delay, 1m, 10m,   1h,    3h,    6h
@backoff_strategy = [0, 60, 600, 3600, 10800, 21600]
@retry_delay_multiplicand_min = 1.0
@retry_delay_multiplicand_max = 1.0

The first delay will be 0 seconds, the 2nd will be 60 seconds, etc... Again, tweak to your own needs. 
```

# jquery - 清理数据，包装数字 & 换行 用 jQuery

> ID：12592666
> 
> 赞同：2
> 
> 时间：2012-09-25T23:43:48.323
> 
> 标签：jquery, match

我能够将一个长字符串变成一个 dl 列表，如下所示：

```
 <div class="classA">
   <dl id="idA"> Display # 252215425:  </dl>
   <dl id="idB">3 Apples   </dl>
   <dl id="idC">3 Peaches   </dl>
   <dl id="idD">10 Seadless Watermelons   </dl>
   <dl id="idE">23 Bananas </dl>
 </div> 
```

我想要的结果是：

```
 <div class="classA">
   <dl id="idA"> 
       <dd>252215425</dd>
       <dt>Display #</dt>
   </dl>

   <dl id="idB"> 
       <dd>3</dd>
       <dt>Apples</dt>
   </dl>

   <dl id="idC"> 
       <dd>3</dd>
       <dt>Peaches</dt>
   </dl>

   <dl id="idD"> 
       <dd>10</dd>
       <dt>Seadless Watermelons</dt>
   </dl>

   <dl id="idE"> 
       <dd>23</dd>
       <dt>Bananas</dt>
   </dl>
 </div> 
```

我要实现的目标： 1\. 将每个 dl 内容拆分为一个数组 2\. 查找数字并将它们保存在“n”中 3\. 查找文本并将它们保存在“w”中 4\. 用“dd”标签包装“n” 5\. 用 'dt' 标签包裹 "w" 6\. "n" 和 "w" 不应有前导和尾随空格

这是我想出的代码，但它没有工作......

```
$("div.classA dl").each(function(){
      var a = $("div.classA dl").html();
      a = a.split(' ');
      var n = a.match(/d+/);
      var w = a.match(/D+/);
      $("div.classA dl").text('');
      $("div.classA dl").append('<dd>'n'</dd>');
      $("div.classA dl").append('<dt>'w'</dt>');

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T00:07:31.577

差不多就是这样，但是您的代码中有几个小问题：

1.  要匹配数字，请使用`\d`而不是仅使用`d`. 也一样`D`，应该在哪里`\D`；
2.  [`match`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/match)返回一个数组，因此您需要访问它的第一个位置以获得匹配的值；
3.  `$.each`已经遍历了所有`dl`s，不需要在循环的每次迭代中再次选择它们。只需引用正在迭代的元素，使用`this`.

这是固定代码和**[DEMO](http://jsfiddle.net/qun5d/3)**：

```
$("div.classA dl").each(function() {
  var $this = $(this);
  var text = $this.text();        
  var n = text.match(/\d+/)[0];
  var w = text.match(/\D+/)[0].replace(/^\s*|\s*$/g, '');

  $this.empty();

  $("<dd>").text(n).appendTo($this);
  $("<dt>").text(w).appendTo($this);
});​ 
```

# java - 良好的吸气剂命名约定

> ID：12592671
> 
> 赞同：1
> 
> 时间：2012-09-25T23:44:19.150
> 
> 标签：java, coding-style, naming-conventions

如果我有一个名为的变量`value`，并且如果我想编写它的 getter，这将`getvalue()`是 getter 的好名字。还是`getValue()`更好？

有人告诉我，getter 名称应该与变量名称匹配。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T23:52:05.507

根据[JavaBean 规范](http://download.oracle.com/otndocs/jcp/7224-javabeans-1.01-fr-spec-oth-JSpec/)中的第 8.3 节“属性的设计模式”，您的 getter 应该被调用`getValue`或`isValue`（如果它是`boolean`）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T23:45:50.867

如果您的值是布尔值，那么它应该是“isValue”，如果不是，那么它应该是“getValue”（根据 JavaBean 约定）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T23:48:53.973

根据[Java 代码约定](http://www.oracle.com/technetwork/java/javase/documentation/codeconvtoc-136057.html)，所有方法都应使用 Camel Case 命名。`getValue()`正确的名称也是如此。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T23:45:43.787

对于 getter，只有一个“好的”命名约定，即 JavaBean 约定：

```
public TheType getValue() { return value; } 
```

布尔值可以遵循`is`约定（它的设置器应该是`setValue`）：

```
public boolean isValue() { return value; } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T23:46:44.840

坚持`getValue()`标准 - 它被称为[camelCase](http://en.wikipedia.org/wiki/CamelCase)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-25T23:48:10.260

除非您有两个变量，命名为`value`and `Value`，否则约定与`getValue()`（或`isValue()`，如果`value`是类型`boolean`）一致。

# jquery - 从 jQueryMobile 应用程序启动 Ajax 调用

> ID：12592674
> 
> 赞同：1
> 
> 时间：2012-09-25T23:44:44.023
> 
> 标签：jquery, ajax, mobile, jquery-mobile

我正在尝试从 jQuery Mobile 应用程序进行 Ajax 调用。呼叫由目标服务器正确服务。但是，浏览器拒绝响应。

火狐 说：

```
x: [object Object], m: error, e: [Exception... "Component returned failure
code: 0x80004005 (NS_ERROR_FAILURE)"  nsresult: "0x80004005 (NS_ERROR_FAILURE)"
location: "JS frame :: file:///path/to/my/page/resources/js/jquery/jquery-1.7.1.min.js
:: <TOP_LEVEL> :: line 4"  data: no] 
```

Chrome 说：

```
x: [object Object], m: error, e: Error: NETWORK_ERR: XMLHttpRequest Exception 101
Origin null is not allowed by Access-Control-Allow-Origin. 
```

我的理解是这个错误与跨域调用问题有关。我已经完成了我在 jQuery 和 jQueryMobile 文档中找到的所有内容，但没有运气。

我的页面是

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Main Page</title>

    <link rel="stylesheet" href="./resources/css/jquery/jquery.mobile-1.1.1.min.css" />

    <script src="./resources/js/jquery/jquery-1.7.1.min.js"></script>
    <script type="text/javascript">
    jQuery(document).live("mobileinit", function(){
        jQuery.support.cors = true ;
        jQuery.mobile.allowCrossDomainPages = true ;
    });
    </script>
    <script src="./resources/js/jquery/jquery.mobile-1.1.1.min.js"></script>

    <script type="text/javascript">
    function send() {
        // the request
        jQuery.ajax({
            async:          false,
            contentType:    "application/x-www-form-urlencoded; charset=UTF-8",
            crossDomain:    true,
            data:           {data: "abcd"} ,
            dataType:       "text", 
            error:          function(x, m, e) {
                alert("x: " + x + ", m: " + m + ", e: " + e);
            },
            processData:    true,
            success:        function(data){
                alert("Received: " + data);
            },
            type:           "GET",
            url:            "http://my/servlet/url"
        });
    }
    </script>
</head>

<body>
    <div id="page1" data-role="page">
        <div data-role="header" data-position="fixed">
            <h1>Login</h1>
        </div>

        <div data-role="content">
            <a id="btn1" data-role="button" onclick="send();" >Go!!!</a>
        </div>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-07T07:00:30.457

我通过要求服务器将标题“Access-Control-Allow-Origin：*”附加到响应中来解决了这个问题。对于使用 Java EE 的人，解决方案是添加这行代码：

```
response.addHeader("Access-Control-Allow-Origin", "*"); 
```

其中 response 是 HttpServletResponse 的一个实例。

# django - 创建对象并设置 m2m 关系

> ID：12592675
> 
> 赞同：0
> 
> 时间：2012-09-25T23:44:46.513
> 
> 标签：django, django-orm

我遇到了鸡和蛋的情况。我有一个表单集，用户可以在其中修改现有数据。实例不应直接保存，而是应作为新对象添加。

```
for fm in attached_deals_formset:                
    if fm.has_changed():
        modified_deal = fm.save(commit=False)
        deal = Deal.objects.create(deal_id = modified_deal.deal_id, ... )
        for item in modified_deal.sales_item: #m2m
            deal.sales_item.add(item)
        deal.save_m2m(); 
```

我的问题是 sales_item 是一个 m2m 字段。只需遍历它就会崩溃：

```
for item in modified_deal.sales_item: 
```

> 'Deal' 实例需要有一个主键值才能使用多对多关系。

不过我不明白，这些是用户在 modified_deal 中选择的多选，为什么只遍历它就会抛出异常？我怎么能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T08:54:07.307

我找到了解决方案。 `modified_deal = fm.save(commit=False)`仅包含类值。m2m 字段指向单独的表，因此尚未设置。

为了访问用户的 m2m 选择，只需将该字段用作`form.cleaned_data[]`模型的相当部分的一部分：

```
 modified_deal = fm.save(commit=False)
    deal = Deal.objects.create(deal_id = modified_deal.deal_id, ... )
    for item in fm.cleaned_data['sales_item']:
         deal.sales_item.add(item)
    deal.save(); 
```

这对我有用。

# javascript - 在原型函数上调用 new | `this` 指的是什么？| 如何测试？

> ID：12592677
> 
> 赞同：0
> 
> 时间：2012-09-25T23:45:06.843
> 
> 标签：javascript, jquery

这在这个小提琴中意味着什么？

这会将 jQuery 的核心部分复制到一个简单的小提琴中。

我如何测试这指向什么？

[http://jsfiddle.net/tFhFD/3/](http://jsfiddle.net/tFhFD/3/)

**参考**

[http://code.jquery.com/jquery-latest.js](http://code.jquery.com/jquery-latest.js)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T23:49:21.257

```
var $A = function (test) {
    return new $A.prototype.init(test);
};
$A.prototype = {
    init: function (test) {
        var a = 'function_var';
        this[0] = a;
        this[1] = arguments[0];
    }
};
document.getElementById('foo').innerHTML = $A('hi_there')[0];
console.debug(jQuery('hi_there')); 
```

`this`在“this”情况下，指向`init`函数的实例。

调用`$A`的构造函数返回的原型 init 函数的`new`实例。`$A`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T00:02:06.647

将本介绍读[入`this`关键字](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)。你真的不知道`this`指向什么，这取决于函数的调用。

但是，由于使用[关键字](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/new)`init`调用该函数，因此将是一个从该对象继承的新对象 - init 构造函数的一个*实例*。[`new`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/new)`this``init.prototype`

 *要检查 的值`this`，请使用您的调试器。你也可以`console.log(this)`。*

# selenium - System.TimeoutException 使用 WebDriver

> ID：12592678
> 
> 赞同：0
> 
> 时间：2012-09-25T23:45:15.520
> 
> 标签：selenium, webdriver, selenium-webdriver

什么是最好的使用方法我得到了 Timeout excption，下面是我用于 FindElement 的代码。

如果我使用 Thread.Sleep(8000) 或 6000 它作为例外工作，但它分散在我的代码中并且难以维护......这个问题有什么优雅的解决方案吗？

```
 public IWebElement GetFindElement(By locator)
    {
        WebDriverWait wait = new WebDriverWait(driver, TimeSpan.FromSeconds(20));
        IWebElement myDynamicElement = wait.Until<IWebElement>((d) =>
        {
            return d.FindElement(locator);
        });
        return myDynamicElement;
    } 
```

错误：

```
[System.TimeoutException] = {"Timed out after 20 seconds"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T06:59:22.853

尽量避免 thread.sleep 结构。我可以推荐使用隐式等待

```
protected static void ImplicitlyWait(int timeToWait)
    {
        _driver.Manage().Timeouts().ImplicitlyWait(TimeSpan.FromSeconds(timeToWait));
    } 
```

# python - 如何解析xml中的多个根“n”节点并在python中提取根文本值

> ID：12592687
> 
> 赞同：0
> 
> 时间：2012-09-25T23:46:10.973
> 
> 标签：python, xml, parsing, xpath

我正在尝试使用 lxml 和 xpath 来提取存储在数据库中的 xml 包。每条记录都有相同的 xml 结构，除了“C”一些 C 有 3 个值节点，一些有更多..

![在此处输入图像描述](../Images/3595ba58a7016ad540998e8cf382f889.png)

Steve 有 3 个“C”值，而 Mel 有 5 个“C”，我想在 python 中找到一种方法来获得最终表格，该表格将在没有 [''] 的情况下打印出 C 并将数据存储在 C 变量下，并提取C以某种方式标记“is_R1”= 1

```
B = etree.xPath('/a/b/text()')(root)[0]
C = etree.xPath('/a/b/x/c/text()')(root)
C0 = etree.xPath('/a/b/x/c/text()')(root)[0]
C1 = etree.xPath('/a/b/x/c/text()')(root)[1] 
C2
C3
:
:
Cn

print B,C,C0,C1,C2,...Cn 
```

现在我可以在打印时看到下面的内容

![在此处输入图像描述](../Images/ad71f6e1352c83ef58c8663271be9633.png)

但我的问题是每条记录都有不同的“n”

我要完成的最终输出类似于..

![在此处输入图像描述](../Images/8388654f4833472c4b44f4f4cf4b4659.png)

# asp.net - DetailsView 编辑和新按钮不会改变 DetailsView 的模式

> ID：12592690
> 
> 赞同：1
> 
> 时间：2012-09-25T23:46:33.553
> 
> 标签：asp.net, vb.net, webforms, detailsview

我正在尝试对 DetailsView 进行编码，但缺少一些编码。你能看看这个编码，让我知道我缺少什么，因为点击编辑按钮或新建按钮不会改变 DetailsView 的模式，所以我可以在其中输入数据。

这是 DetailsView 的编码：

```
<asp:UpdatePanel 
    ID="UpdatePanelParentsSummary" 
    runat="server" 
    UpdateMode="Conditional">

    <ContentTemplate> 
        <asp:DetailsView 
            ID="DetailsViewParentsDetails" 
            runat="server" 
            Height="50px" 
            Width="404px"
            AutoGenerateRows="False">

            <Fields>
                <asp:TemplateField ShowHeader="False">

                    <ItemTemplate>
                        <asp:Button 
                            ID="ButtonEdit" 
                            runat="server" 
                            CausesValidation="False" 
                            CommandName="Edit" 
                            Text="Edit" />

                        &nbsp;
                        <asp:Button 
                            ID="ButtonNew" 
                            runat="server" 
                            CausesValidation="False" 
                            CommandName="New" 
                            Text="New" />

                        &nbsp;
                        <asp:Button 
                            ID="ButtonDelete" 
                            runat="server" 
                            CausesValidation="False" 
                            CommandName="Delete" 
                            Text="Delete" />

                            <AjaxToolKit:ConfirmButtonExtender ID="deleteButtonConfirmation" 
                                runat="server" 
                                ConfirmText='<%# "You are about to remove: " & vbcr & 
                                    Eval("FatherName") & vbcr & Eval("MotherName") & "!!!" &
                                    vbcrlf & "Are you sure you want to do this?" & vbcrlf &
                                    "Clicking the OK button will delete this parent." %>'
                                Enabled="True" 
                                TargetControlID="ButtonDelete">

                            </AjaxToolKit:ConfirmButtonExtender>
                    </ItemTemplate>

                    <EditItemTemplate>
                        <asp:Button 
                            ID="ButtonUpdate" 
                            runat="server" 
                            CausesValidation="True" 
                            CommandName="Update" 
                            Text="Update" />

                        &nbsp;
                        <asp:Button 
                            ID="ButtonCancelUpdates" 
                            runat="server" 
                            CausesValidation="False" 
                            CommandName="Cancel" 
                            Text="Cancel" />
                    </EditItemTemplate>

                    <InsertItemTemplate>
                        <asp:Button 
                            ID="ButtonInsert" 
                            runat="server" 
                            CausesValidation="True" 
                            CommandName="Insert" 
                            Text="Insert" />

                        &nbsp;
                        <asp:Button 
                            ID="ButtonCancelInsert" 
                            runat="server" 
                            CausesValidation="False" 
                            CommandName="Cancel" 
                            Text="Cancel" />
                    </InsertItemTemplate>

                </asp:TemplateField>

                <asp:BoundField DataField="ID" HeaderText="ID" InsertVisible="False" 
                    ReadOnly="True" SortExpression="ID" Visible="False" />

                <asp:BoundField 
                    DataField="FatherName" 
                    HeaderText="Father's Name:">

                    <ItemStyle ForeColor="Blue" />
                </asp:BoundField>

                <asp:BoundField 
                    DataField="MotherName" 
                    HeaderText="Mother's Name:">

                    <ItemStyle ForeColor="Blue" />
                </asp:BoundField>

                <asp:BoundField 
                    DataField="FatherOccupation" 
                    HeaderText="Father's Occupation:">

                    <ItemStyle ForeColor="Blue" />
                </asp:BoundField>

                <asp:BoundField 
                    DataField="FatherEmploymentPlace" 
                    HeaderText="Father's Employment Place:">

                    <ItemStyle ForeColor="Blue" />
                </asp:BoundField>

                <asp:BoundField 
                    DataField="FatherWorkPhone" 
                    HeaderText="Father's Work Phone:">

                    <ItemStyle ForeColor="Blue" />
                </asp:BoundField>

            </Fields>

            <HeaderTemplate>
                <%#IIf(Eval("FatherName") = Nothing,
                    "Adding New Student", "Details For: " & Eval("FatherName") & " *** " & Eval("MotherName"))%>             
            </HeaderTemplate>
        </asp:DetailsView>
    </ContentTemplate>
</asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T22:48:47.923

尝试将 OnItemCommand 事件处理程序添加到您的 DetailsView。

```
<asp:DetailsView 
        ID="DetailsViewParentsDetails" 
        OnItemCommand="DetailsViewParentsDetails_ItemCommand"
        runat="server" 
        Height="50px" 
        Width="404px"
        AutoGenerateRows="False"> 
```

在您的代码隐藏文件 (.cs) 中，您需要添加以下内容：

```
protected void DetailsViewParentsDetails_ItemCommand(object sender, DetailsViewCommandEventArgs e)
{
    if (e.CommandName.Equals("New"))
    {
         this.DetailsViewParentsDetails.ChangeMode(DetailsViewMode.Insert);
         this.DetailsViewParentsDetails.DataBind();
    }
    else if (e.CommandName.Equals("Edit"))
    {
         this.DetailsViewParentsDetails.ChangeMode(DetailsViewMode.Edit);
         this.DetailsViewParentsDetails.DataBind();
    }
} 
```

[有关 DetailsView.ItemCommand 的 MSDN 文档 - http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.detailsview.itemcommand(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.detailsview.itemcommand%28v=vs.100%29.aspx)

# java - 将图像作为背景放置在扩展的 JFrame 上是否有任何问题？

> ID：12592696
> 
> 赞同：2
> 
> 时间：2012-09-25T23:46:45.887
> 
> 标签：java, swing

我想在扩展的 JFrame 上放置一个图像以将其设置为背景，扩展的 jframe 仅包含菜单栏。问题是，它不显示图片，我不知道我可能做错了什么。任何想法都受到高度赞赏

```
public class VirtualViewGUI extends JFrame{

    public VirtualViewGUI()
      {
         super("Virtual View");

         JMenuBar jmenuBar = new JMenuBar();
         JMenu fileMenu = new JMenu("File");
         JMenu helpMenu = new JMenu("Help");
         JMenu feel = new JMenu("Look & Feel");

         JMenu layOutMenu = new JMenu("ConfigureCells");
         JMenuItem add_files = new JMenuItem("Select Directory.."); 
         JMenuItem minCellSize = new JMenuItem("height 260 X  width 260"); 
         JMenuItem moderateCellSize = new JMenuItem("height 320 X  width 320"); 
         JMenuItem maxCellSize = new JMenuItem("height 360 X  width 360"); 
         JMenuItem exit = new JMenuItem("Exit");
         JMenuItem help = new JMenuItem("Help Content");

         fileMenu.add(add_files);
         fileMenu.add(exit);
         layOutMenu.add(minCellSize);
         layOutMenu.add(moderateCellSize);
         layOutMenu.add(maxCellSize);
         helpMenu.add(help);

         jmenuBar.add(fileMenu);
         jmenuBar.add(layOutMenu);
         jmenuBar.add(helpMenu);

         ImageIcon myImage=new ImageIcon("grid_2.png");

         JLabel icon = new JLabel(myImage);
         icon.setIcon(myImage);
         setJMenuBar(jmenuBar); 

         add(icon);

         setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

      }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T05:29:34.340

您的代码没有任何缺陷，因为当我在我的计算机上运行它时，它工作正常，如果图像的路径是好的。因此，如果我使用`getClass().getResource("/pathToImageFolder/myImage.fileExtension")`，它会给我想要的结果。似乎您需要检查您指定的路径，即**“grid_2.png”**，实际上是否是正确的路径！看看我的这个关于[如何在 NETBEANS 中将图像添加到您的资源文件夹](https://stackoverflow.com/a/9583367/1057230)的答案，希望这可以帮助您更多。这是一个工作[示例](https://stackoverflow.com/a/11372350/1057230)

```
import javax.swing.*;

public class VirtualViewGUI extends JFrame
{
    public VirtualViewGUI()
    {
        super("Virtual View");

        JMenuBar jmenuBar = new JMenuBar();
        JMenu fileMenu = new JMenu("File");
        JMenu helpMenu = new JMenu("Help");
        JMenu feel = new JMenu("Look & Feel");

        JMenu layOutMenu = new JMenu("ConfigureCells");
        JMenuItem add_files = new JMenuItem("Select Directory.."); 
        JMenuItem minCellSize = new JMenuItem("height 260 X  width 260"); 
        JMenuItem moderateCellSize = new JMenuItem("height 320 X  width 320"); 
        JMenuItem maxCellSize = new JMenuItem("height 360 X  width 360"); 
        JMenuItem exit = new JMenuItem("Exit");
        JMenuItem help = new JMenuItem("Help Content");

        fileMenu.add(add_files);
        fileMenu.add(exit);
        layOutMenu.add(minCellSize);
        layOutMenu.add(moderateCellSize);
        layOutMenu.add(maxCellSize);
        helpMenu.add(help);

        jmenuBar.add(fileMenu);
        jmenuBar.add(layOutMenu);
        jmenuBar.add(helpMenu);

        ImageIcon myImage = new ImageIcon(
            getClass().getResource(
                    "/image/cow-cartoon.jpg"));

        JLabel icon = new JLabel(myImage);
        icon.setIcon(myImage);
        setJMenuBar(jmenuBar); 

        add(icon);

        pack();
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLocationByPlatform(true);    
        setVisible(true);
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            @Override
            public void run()
            {
                new VirtualViewGUI();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T00:01:29.860

不，一点问题都没有（除了可能没有使用正确的布局管理器）。

而是将图标“添加”到框架中，我会将图标作为框架的“内容”......

```
setContentPane(icon); 
```

这意味着当您向框架添加任何其他组件时，将添加到图像顶部...

```
public VirtualViewGUI() {
    super("Virtual View");

    JMenuBar jmenuBar = new JMenuBar();
    JMenu fileMenu = new JMenu("File");
    JMenu helpMenu = new JMenu("Help");
    JMenu feel = new JMenu("Look & Feel");

    JMenu layOutMenu = new JMenu("ConfigureCells");
    JMenuItem add_files = new JMenuItem("Select Directory..");
    JMenuItem minCellSize = new JMenuItem("height 260 X  width 260");
    JMenuItem moderateCellSize = new JMenuItem("height 320 X  width 320");
    JMenuItem maxCellSize = new JMenuItem("height 360 X  width 360");
    JMenuItem exit = new JMenuItem("Exit");
    JMenuItem help = new JMenuItem("Help Content");

    fileMenu.add(add_files);
    fileMenu.add(exit);
    layOutMenu.add(minCellSize);
    layOutMenu.add(moderateCellSize);
    layOutMenu.add(maxCellSize);
    helpMenu.add(help);

    jmenuBar.add(fileMenu);
    jmenuBar.add(layOutMenu);
    jmenuBar.add(helpMenu);

    ImageIcon myImage = new ImageIcon("your picture here");

    JLabel icon = new JLabel(myImage);
    icon.setIcon(myImage);
    setJMenuBar(jmenuBar);

    // Don't add the icon to the content pane, make it the content pane, then when you add
    // anything to the frame, they will be added ontop... ;)
    setContentPane(icon);

    pack();
    setVisible(true);

    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

} 
```

**更新示例**

我将以下代码添加到构造函数的末尾

```
setLayout(new GridBagLayout());
JLabel label = new JLabel("Look ma, no hands!");
label.setFont(label.getFont().deriveFont(Font.BOLD, 36f));
label.setForeground(Color.WHITE);
add(label); 
```

并得到了这个输出

![捕捉啤酒](../Images/7a99b34a4001bf9663e3f23b47ed306b.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T12:47:38.620

我设法做对了，就像我最初怀疑的 NetBeans 和其他 IDE 一样，它工作正常，我需要为图像路径添加“src\\grid_2.png”，即使它在我的工作目录中。感谢大家的宝贵时间，非常感谢。

# c - 将 C 头文件转换为 delphi

> ID：12592697
> 
> 赞同：3
> 
> 时间：2012-09-25T23:46:46.890
> 
> 标签：c, delphi, dll, header

```
int  WINAPI  BiMICRSetReadBackFunction(
    int  nHandle,
    int  (CALLBACK  *pMicrCB)(void),
    LPBYTE  pReadBuffSize,
    LPBYTE  readCharBuff,
    LPBYTE  pStatus,
    LPBYTE  pDetail);

    typedef int (CALLBACK* MICRCallback)(void);
    typedef int (CALLBACK* StatusCallback)(DWORD);

    int WINAPI BiSetInkStatusBackFunction(int nHandle,
        int (CALLBACK *pStatusCB)(DWORD dwStatus)
); 
```

我需要将此函数转换为 Delphi。

我尝试使用`headconv4.2`但生成的静态单元没有完成，编译时出现错误。

提前感谢您的帮助：D

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T00:29:19.127

假设`WINAPI`并且`CALLBACK`总是存在`__stdcall`，`DWORD`存在`unsigned int`和`LPBYTE`作为`unsigned char *`，你可以试试我做的这个*肮脏的转换*：

```
unit UHeader;

interface

// Data types

type
  PByte = ^Byte;
  PPByte = ^PByte;

// Prototypes

type
  TMICRCallback = function: Integer; stdcall;
  TStatusCallback = function(dwParam: Cardinal): Integer; stdcall;

// Functions

type
  TBiMICRSetReadBackFunction =
    function(nHande: Integer;
             pMicrCB: TMICRCallback;
             pReadBuffSize: PByte;
             readCharBuff: PByte;
             pStatus: PByte;
             pDetail: PByte
    ): Integer; stdcall;

var
  BiMICRSetReadBackFunction: TBiMICRSetReadBackFunction;

type
  TBiSetInkStatusBackFunction =
    function(nHandle: Integer;
             pStatusCB: TStatusCallback
    ): Integer; stdcall;

var
  BiSetInkStatusBackFunction: TBiSetInkStatusBackFunction;

implementation

end. 
```

不过，我不完全确定这是否正确……但这可能是您尝试自己转换它的途径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T01:24:03.550

直译为：

```
type
  MICRCallback = function: Integer; stdcall; 
  StatusCallback = function(dwStatus: DWORD): Integer; stdcall; 

function BiMICRSetReadBackFunction( 
  nHandle: Integer; 
  pMicrCB: MICRCallback; 
  pReadBuffSize: PByte; 
  readCharBuff: PByte; 
  pStatus: PByte; 
  pDetail: PByte
): Integer; stdcall; 

function BiSetInkStatusBackFunction(
  nHandle: Integer;
  pStatusCB: StatusCallback
): Integer; stdcall; 
```

如果要从 DLL 导入函数，则需要将 DLL 文件名添加到函数声明中：

```
function BiMICRSetReadBackFunction( 
  nHandle: Integer; 
  pMicrCB: MICRCallback; 
  pReadBuffSize: PByte; 
  readCharBuff: PByte; 
  pStatus: PByte; 
  pDetail: PByte
): Integer; stdcall; external 'filename.dll';

function BiSetInkStatusBackFunction(
  nHandle: Integer;
  pStatusCB: StatusCallback
): Integer; stdcall; external 'filename.dll'; 
```

# java - Android套接字输入流读取（后跟EPIPE）

> ID：12592707
> 
> 赞同：1
> 
> 时间：2012-09-25T23:48:06.500
> 
> 标签：java, android, sockets

我正在创建一些客户端套接字软件来从服务器读取事件。（例如，流式股票报价）。

**问题：** .read(b); **立即**返回值为**-1**。这会导致无限循环并且手机变得非常热。此外，对 s.isConnected()、isOpen()、isBound() 的所有检查都返回 true。基本上套接字*看起来已连接*。（这是一个错误场景，因此 .setSoTimeout(x) 的任何值都无效。12 分钟，或者留空。.read(b) 总是立即返回 -1）。

当我稍后通过 getOutputStream() 写入它时，我收到一个异常 EPIPE（管道损坏）。

这是核心代码（为简洁起见，省略了日志语句/值检查）。

```
s.connect(new InetSocketAddress(host, port), CONNECT_TIMEOUT_MILLIS);

byte[] b = new byte[1024];
while (s.isConnected()) {
    int bytesToRead = s.getInputStream().read(b);
    if (bytesToRead <= 0) {
        LOGGER.debug("no bytes read? trying again.");
        continue;
    }
    processFrame(b);
} 
```

如果我在手机上循环 3g，它工作正常。有时它会进入这种奇怪的状态。

**问题**

难道我做错了什么？这是*预期*的行为吗？我可以查看现有代码来展示在 Android 上进行套接字编程的*正确方法吗？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T00:54:13.243

我使用以下代码没有问题：

```
 BufferedReader in = new BufferedReader(new InputStreamReader(socket.getInputStream()));
        String line = null;
        while ((line = in.readLine()) != null) {
            myLineProcess(line); //here you process you line result
        } 
```

祝你好运。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T02:01:17.083

如果`read(byte[], ...)`返回 < 0，则对端已关闭连接，因此您必须关闭套接字并退出循环。永远不会有更多的数据。

输入流是阻塞的，因此返回零的唯一方法`read(byte[], ...)`是指定零长度缓冲区或零长度，具体取决于您调用的重载。因为你不这样做，它永远不会返回零。

相反，它将完全按照 Javadoc 中所说的那样：要么返回 -1 表示 EOS，要么阻塞直到至少有一个字节的数据可用。

> 难道我做错了什么？

几乎所有的。您的循环测试`<= 0`完全没有意义而且完全不正确。测试也是如此`isConnected()`。这只会告诉您是否曾经连接过 this `Socket`。它不会随着连接的状态而改变。-1 的返回码告诉你这一点。你的循环应该是：

```
while ((bytesToRead = s.getInputStream().read(b)) > 0)
{
    // do something with b[0..bytesToRead -1].
}
s.close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T05:37:37.710

好吧，我不知道这是否是合适的答案，但我仍然想给你代码，每次都很好用。

请保持简单，

尝试使用`InputStream, InputStreamReader, BufferedReader, OutputStream, PrintWriter.`

**客户端：**

```
Socket s = new Socket();
s.connect(new InetSocketAddress("Server_IP",Port_no),TimeOut); 
// Let Timeout be 5000 
```

**服务器端：**

```
ServerSocket ss = new ServerSocket(Port_no);
Socket incoming = ss.accept(); 
```

**从套接字读取：**

```
InputStream is = s.getInputStream();
InputStreamReader isr = new InputStreamReader(is);

BufferedReader br = new BufferedReader(isr);
boolean isDone = false;

String s = new String();

while(!isDone && ((s=br.readLine())!=null)){

     System.out.println(s);   // Printing on Console

 } 
```

**对于写入套接字：**

```
OutputStream os = s.getOuptStream();
PrintWriter pw = new PrintWriter(os)

pw.println("Hello"); 
```

# cas - 在 CAS 中更改 /tickets API 的逻辑

> ID：12592709
> 
> 赞同：0
> 
> 时间：2012-09-25T23:48:29.707
> 
> 标签：cas

参考：[https ://wiki.jasig.org/display/CASUM/RESTful+API](https://wiki.jasig.org/display/CASUM/RESTful+API)

我想改变背后的逻辑我将`POST /cas/v1/tickets` 如何去做？

基本上，我需要对不同软件进行 API 调用的逻辑。根据对该调用的响应，我决定用户是否正确验证。

我看到在 reslet-servlet.xml 中有一个与 /tickets 关联的 TicketResource 对象。我从继承它开始吗？我从哪里开始？我在看写文件吗？

```
<bean id="root" class="org.restlet.ext.spring.SpringRouter">
                <property name="attachments">
                        <map>
                                <entry key="/tickets">
                                        <bean class="org.restlet.ext.spring.SpringFinder">
                                                <lookup-method name="createResource" bean="ticketResource" />
                                        </bean> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T07:32:27.857

是的，这是一个很好的开始方式：从 TicketResource 继承并在 acceptRepresentation 方法中实现您自己的逻辑......

# iphone - 如何取消 UITapGestureRecognizer？

> ID：12592713
> 
> 赞同：0
> 
> 时间：2012-09-25T23:48:57.857
> 
> 标签：iphone, ios, touch, uitapgesturerecognizer

我注意到当快速执行触摸拖动时会发生单击。

如果用户移动触摸，我想取消单击。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T00:02:56.537

> 我注意到当快速执行触摸拖动时会发生单击。

我的建议是什么都不做。假设您已经正确设置了所有内容，那么您最终要做的就是创建一个特定于应用程序的拖动行为，以适应您的个人喜好。这可能会使您的客户感到困惑，并可能阻止您的应用获得批准。

如果您遇到的问题无法在其他应用程序中复制，那么我猜想您在响应者链方面做错了，您应该首先专注于解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T23:58:42.243

我将假设您不想取消点击手势本身（一旦点击手势触发，我认为您不能取消手势，它已经完成了！），而是从它触发的代码.

您可以做的是创建一个计时器，并将点击手势创建的动作延迟一两秒。然后，您有该时间间隔来取消该操作。

# algorithm - 如何在 H.264 中以低数据速率实现 CBR？

> ID：12592716
> 
> 赞同：0
> 
> 时间：2012-09-25T23:49:13.717
> 
> 标签：algorithm, video, video-streaming, video-capture, codec

我正在寻找解决该领域已经开展的众多研究工作之一的解决方案。我正在研究一个问题，该问题涉及找到一种能够为 h.264 编解码器设置恒定比特率的方法，这在某些情况下显然不支持相同的比特率。你能给我一些想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T01:03:24.260

[这个 x264 日记条目（包括下面的评论）](http://x264dev.multimedia.cx/archives/249)可能会有所帮助。注释中给出了一些示例命令行选项。使用 x264 编码 cbr 并不常见，但它对流式传输很有帮助，因此添加了支持。但是，对于给定的输入，可能的最低数据速率是多少尚不清楚。

# android - 为什么 Android Buttons 的呈现方式与 ImageButtons 不同？

> ID：12592720
> 
> 赞同：0
> 
> 时间：2012-09-25T23:49:52.680
> 
> 标签：android, android-layout, android-widget, imagebutton

为什么当我使用带有背景的[Button时我的 Android 布局可以工作，但当我使用](http://developer.android.com/reference/android/widget/Button.html)[ImageButton](http://developer.android.com/reference/android/widget/ImageButton.html)时会中断？我已通读文档，无法弄清楚为什么它们呈现不同。我看到一个是 TextView，一个是 ImageView，但我认为 dp 是一个 dp，无论上下文如何。在这两种布局之间，我唯一改变的是“ImageButton”到“Button”和“src”到“background”。

工作布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    android:orientation="vertical"
    android:background="@drawable/background">

. . .

<Button 
    android:contentDescription="@string/login_button_facebook"
    android:layout_width="200dp"
    android:layout_height="45dp"
    android:background="@drawable/first_thought_menu_2_facebook"
    android:onClick="loginWithFacebook"        
    />

<Button 
    android:contentDescription="@string/login_button_email"
    android:layout_width="200dp"
    android:layout_height="45dp"
    android:background="@drawable/first_thought_menu_3_email"
    android:onClick="loginWithEmail"        
    />

<Button 
    android:contentDescription="@string/login_button_anonymous"
    android:layout_width="200dp"
    android:layout_height="45dp"
    android:background="@drawable/first_thought_menu_4_anonymous"
    android:onClick="loginWithAnonymous"        
    />            

. . .   

</LinearLayout> 
```

工作布局图：

![工作布局](../Images/6a3e83562cd184fc3397d8db417e818d.png)

破碎的布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    android:orientation="vertical"
    android:background="@drawable/background">

. . .

<ImageButton 
    android:contentDescription="@string/login_button_facebook"
    android:layout_width="200dp"
    android:layout_height="45dp"
    android:src="@drawable/first_thought_menu_2_facebook"
    android:onClick="loginWithFacebook"        
    />

<ImageButton 
    android:contentDescription="@string/login_button_email"
    android:layout_width="200dp"
    android:layout_height="45dp"
    android:src="@drawable/first_thought_menu_3_email"
    android:onClick="loginWithEmail"        
    />

<ImageButton 
    android:contentDescription="@string/login_button_anonymous"
    android:layout_width="200dp"
    android:layout_height="45dp"
    android:src="@drawable/first_thought_menu_4_anonymous"
    android:onClick="loginWithAnonymous"        
    />          

. . .   

</LinearLayout> 
```

布局损坏的图片：

![破碎的布局](../Images/b96094745275d279000d0340012d98ef.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T23:52:54.750

使用`android:background`而不是 src。

# .htaccess - 将域和子文件夹重定向到新域 htaccess

> ID：12592723
> 
> 赞同：2
> 
> 时间：2012-09-25T23:50:35.867
> 
> 标签：.htaccess, mod-rewrite, redirect, dns, subdirectory

我有 4 个域，我希望其中 3 个重定向到最后一个。我已经使用了一些 htaccess 规则，它们运行良好，

```
RewriteEngine On

RewriteCond %{HTTP_HOST} ^first.com$ [NC]
RewriteRule ^(.*) http://www.forth.com/$1 [L,R=301]

RewriteCond %{HTTP_HOST} ^www.first.com [NC]
RewriteRule ^(.*)$ http://www.forth.com/$1 [L,R=301]

RewriteCond %{HTTP_HOST} ^second.com [NC]
RewriteRule ^(.*)$ http://www.forth.com/$1 [L,R=301]

RewriteCond %{HTTP_HOST} ^www.second.com [NC]
RewriteRule ^(.*)$ http://www.forth.com/$1 [L,R=301]

RewriteCond %{HTTP_HOST} ^www.third.com [NC]
RewriteRule ^(.*)$ http://www.forth.com/$1 [L,R=301]

RewriteCond %{HTTP_HOST} ^third.com [NC]
RewriteRule ^(.*)$ http://www.forth.com/$1 [L,R=301] 
```

唯一的问题是当我输入“www.first.com/about”时它不显示“www.forth.com/about”只是显示相同的东西。所有域都转发到了forth.com，他们没有托管，所以我不能为其他域放置htaccess文件，请指导。将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T20:44:41.187

这很可能是正在发生的事情，至少在我的测试用例中，这个修复处理了它。

而不是使用 [L,R=301] 颠倒顺序并执行 [R=301,L]。L 表示最后一个，它结束了评估此时要做什么的循环。我一直使用 [R=301,L] 和在任何地方都能找到的所有示例。可能您的 apache 可能会遇到该 L 并立即将新字符串传递回 URL 解析器，并且不会将其作为 301 重定向发送，因为它没有达到那么远。

同样在上面的 first.com 片段中，您省略了 ^(.*) 上的 $ - 虽然仅针对该行，但不确定这是拼写错误还是您的实际 .htaccess 文件中缺少它。

否则，您可以使用以下方法整理一下：

```
RewriteCond %{HTTP_HOST} ^((www.)?)first.com [NC,OR]
RewriteCond %{HTTP_HOST} ^((www.)?)second.com [NC,OR]
RewriteCond %{HTTP_HOST} ^((www.)?)third.com [NC]
RewriteRule ^(.*)$ http://www.forth.com/$1 [R=301,L] 
```

# java - 防止树形图在碰撞时合并

> ID：12592726
> 
> 赞同：0
> 
> 时间：2012-09-25T23:51:27.997
> 
> 标签：java, treemap

编辑：我可能应该提到我对 Java 编程非常陌生。大约两周前，我刚开始学习这种语言。

我试图寻找这个问题的答案，但到目前为止我还没有找到答案，所以这就是我在这里问它的原因。

我为 Dungeons and Dragons Initiative Tracker 编写了 Java 代码，并且我使用 TreeMap 来实现对条目进行排序的能力。我对java还是很陌生，所以我不知道那里的一切。

我的问题是，当我有两个相同的键时，树会合并这些值，使得其中一个值不再存在。我知道这可能是可取的行为，但就我而言，我不能发生这种情况。我希望有一个优雅的解决方案来解决这个问题。到目前为止，我所拥有的是：

```
 TreeMap<Integer,Character> initiativeList = new TreeMap<Integer,Character>(Collections.reverseOrder());
  Character [] cHolder = new Character[3];

  out.println("Thank you for using the Initiative Tracker Project.");

  cHolder[0] = new Character("Fred",2);
  cHolder[1] = new Character("Sam",3,23);
  cHolder[2] = new Character("John",2,23);

  for(int i = 0; i < cHolder.length; ++i)
  {         
     initiativeList.put(cHolder[i].getInitValue(), cHolder[i]);
  }

  out.println("Initiative List: " + initiativeList); 
```

Character 是我定义的一个类，用于跟踪玩家的角色名称和主动值。

目前的输出是这样的：

```
Initiative List: {23=John, 3=Fred} 
```

我考虑过使用带有某种 subCollection 的 TreeMap，但我也会遇到类似的问题。我真正需要做的只是找到一种禁用合并的方法。谢谢你们能给我的任何帮助。

编辑：在龙与地下城，一个角色掷一个 20 面的骰子，然后将他们的主动模式添加到结果中以获得他们的总主动权。有时两个玩家可以获得相同的值。我考虑过像这样格式化密钥：

```
Key = InitiativeValue.InitiativeMod 
```

因此，对于 Sam 来说，他的密钥是*23.3*，而 John 的密钥是*23.2*。我知道我需要将键类型更改为 float 而不是 int。

然而，即使有这两个玩家也可以拥有相同的主动模式并掷出相同的主动值。实际上，这种情况发生的次数比你想象的要多。例如，

假设彼得和斯科特都加入了游戏。他们都有 2 的先攻修正值，并且他们都在 20 面的骰子上掷出 10。这将使他们的倡议值都为 12。

当我将它们放入现有地图时，它们都需要显示，即使它们具有相同的值。

```
Initiative List: {23=John, 12=Peter, 12=Scott, 3=Fred} 
```

我希望这有助于澄清我需要什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T00:07:36.323

如果我理解正确的话，你有一堆角色和他们的主动权，并且想要通过主动ID“反转”这个结构以键，值是所有具有该主动权的角色。MultiMap 数据结构完美地捕捉到了这一点，其中一种实现是[Guava TreeMultimap](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/TreeMultimap.html)。

这没有什么神奇之处。您可以通过

```
TreeMap<Initiative,List<Character>> 
```

这并不完全是 Guava 多图的实现方式，但它是可以支持您需要的最简单的数据结构。

如果我这样做，我会编写自己的类来包装上述内容，`TreeMap`并提供一种`add(K key, V value)`根据您的特定要求处理重复检测和列表管理的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T23:59:33.553

您说您是“...a`TreeMap`因为它能够在输入时进行排序...”-但也许您可以只使用 a`TreeSet`代替。你需要在你的类上实现一个合适的`compareTo`方法来执行你想要的比较；`Character`我强烈建议您也`hashCode`实施`equals`。

然后，当您遍历 时`TreeSet`，您将以`Character`适当的顺序获取对象。请注意，`Map`类旨在用于查找目的，而不是用于排序。

# time - 如何在 d3.js 中随着时间的推移制作动画和播放？

> ID：12592730
> 
> 赞同：1
> 
> 时间：2012-09-25T23:52:03.410
> 
> 标签：time, d3.js

我是 d3.js 的新手。

我想知道我们如何根据时间对一些数据进行动画处理（例如更改颜色）。

例如。假设，在监控应用程序中，我将集群数据投影到美国地图上。投影是通过绘制一个圆圈并根据其状态用红色、绿色或黄色填充来完成的。

当我们开始监控时，理想情况下所有圆圈都将填充“绿色”颜色，然后随着时间的推移颜色可以根据集群的行为变为“黄色”或“红色”。

因此，如果我需要在某个时间窗口内随着时间的推移播放这些颜色变化，该怎么做？

如果你能指出任何类似的例子，那也会有帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T00:08:49.073

看看[http://mbostock.github.com/d3/tutorial/bar-2.html](http://mbostock.github.com/d3/tutorial/bar-2.html)。基本上，您需要一个`redraw`函数，每当您想更新图表时都会调用该函数。（注意：这个函数的名字没有什么特别的，你可以随便叫它。）

您可以使用`setInterval`创建一个基本计时器，这是您的图表将更新的速率。

```
setInterval(function() {
  redraw();  // call the function you created to update the chart
}, 1500); 
```

然后定义`redraw`更新图表数据。这是条形图的重绘功能，但您的功能类似。您只需根据数据而不是 y 位置和高度来调整颜色。

```
function redraw() {
  // Update…
  chart.selectAll("rect")
      .data(data)
    .transition()
      .duration(1000)
      .attr("y", function(d) { return h - y(d.value) - .5; })
      .attr("height", function(d) { return y(d.value); }); 
} 
```

请注意，这是一个简化版本，我建议阅读我上面链接的页面以获得更完整的示例。

# php - 获取有关成功的 ajax 发布数据

> ID：12592736
> 
> 赞同：0
> 
> 时间：2012-09-25T23:52:36.033
> 
> 标签：php, javascript, jquery, ajax, post

我有以下 ajax 调用。我想做的是在ajax请求期间设置变量“lan_setting”，并能够在成功时使用该变量。

实际上，我想将该变量设置为发布数据，这将根据表单输入而有所不同，但到目前为止，我什至无法仅使用这个基本示例。它只是返回“未定义”。

```
_jqXHR = $.ajax({
    url: url,
    data: {lan_setting: 'en'},
    scriptCharset: "UTF-8",
    contentType: "application/x-www-form-urlencoded;charset=UTF-8",
    success: function(lan_setting, data, textStatus, jqXHR) {
        alert(data.lan_setting);    
    }
}); 
```

如何在成功时使用通过 ajax 发送的 post 变量？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T00:09:48.363

好吧，如果你要发帖，你应该在[这里使用 jquery post 功能](http://api.jquery.com/jQuery.post/)

```
$.post(
    url,
    {lan_setting:"en"},
    function( data, status, jqXhr ){
        alert(data.lan_setting);
    },
    "json"
); 
```

然后是 php：

```
<?php
    // do stuff

    $response = new stdClass;
    $response->lan_setting = $_POST["lan_setting"];
    print json_encode($response);
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T00:11:34.557

好吧，您声明`success`函数错误（来自[jQuery .ajax() 文档](http://api.jquery.com/jQuery.ajax/)）：

> 成功（数据，文本状态，jqXHR）

换句话说，`success`函数得到`data`, `textStatus`，`jqXHR`没有别的。你不能只接受你的 POST 变量——它只会得到它得到的东西。您也不能通过在`config`对象中指定它来传递 POST 变量：您必须通过`data`属性传递它。最后，`.ajax()`默认为 GET 请求，因此您必须明确指定要使用 POST 请求。

我对你想做什么有点困惑；如果您`lan_setting`在进行 AJAX 调用之前知道 的值，为什么需要将其传递给`success`函数？只需使用它：

```
var lan_setting = 'en';
_jqXHR = $.ajax({
    url: url,
    type: "POST",
    data: {
        lan_setting: lan_setting
    },
    scriptCharset: "UTF-8",
    contentType: "application/x-www-form-urlencoded;charset=UTF-8",
    success: function(lan_setting, data, textStatus, jqXHR) {
        alert(lan_setting); 
    }
}); 
```

If, on the other hand, you want to pass the `lan_setting` value in, have it modified by the server, and passed back, you will have to somehow encode it in the response, probably with JSON.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T00:10:14.783

jQuery.ajax 中的 success() 方法接受 3 个参数。第一个是来自请求的响应。

> success(data, textStatus, jqXHR)Function, Array 请求成功时调用的函数。该函数获得三个参数： 从服务器返回的数据，根据 dataType 参数格式化；描述状态的字符串；和 jqXHR

此外，在使用 $.ajax 时，您可以传递一定数量的对象。见[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

至于你的帖子，你可以做...

```
$.post("service.php", {lan_setting: "en"}, function(response) { alert(response); } 
```

这会将第二个参数发布`{lan_setting: "en"}`到该 php 服务，并回显它的响应。

# php - 将字符串与值数组匹配并返回键

> ID：12592738
> 
> 赞同：0
> 
> 时间：2012-09-25T23:52:45.813
> 
> 标签：php, arrays

所以我有一个几个月的数组：

```
$arr_month = array(
    1=>'january',
    2=>'february',
    3=>'march',
    4=>'april',
    5=>'may',
    6=>'june',
    7=>'july',
    8=>'august',
    9=>'september',
    10=>'october',
    11=>'november',
    12=>'december'
); 
```

我也有字符串（我知道，它们看起来很奇怪......）看起来像：

```
23 de january del 2003
12 de may de 1976
6 de february de 1987 
```

我想要的是找到字符串中的月份并将其与数组匹配并返回数组键。

所以：

```
23 de january del 2003 returns 1
12 de may de 1976 returns 5
6 de february de 1987 returns 2 
```

等等...

知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T00:03:56.413

这应该适合你。

```
$dateString = "23 de january del 2003"; // as an example
$exploded = explode (" ", $dateString); // separate the string into an array of words
$month = $exploded[2]; // we want the 3rd word in the array;
$key = array_search ($month, $arr_month); // lets find the needle in the haystack
print $key; 
```

产量`1`。

有关更多信息，请参见[http://php.net/manual/en/function.array-search.php](http://php.net/manual/en/function.array-search.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T00:15:20.237

你应该可以这样做：

```
<?php

function getMonth($time){
    $matches = array();
    preg_match("/[0-9] de ([a-z]+) de/", $time, $matches);
    return date('n',strtotime($matches[1]));
}
?> 
```

那么你甚至不需要你的月份数组：D

**编辑**如果你出于某种原因想要阵列在那里：

```
<?php
function getMonth($time){
    $matches = array();
    $pattern = "/[0-9] de ([a-z]+) de/";
    preg_match($pattern, $time, $matches);
    $month = $matches[1];
    $arr_month (
        1=>'january',
        2=>'february',
        3=>'march',
        4=>'april',
        5=>'may',
        6=>'june',
        7=>'july',
        8=>'august',
        9=>'september',
        10=>'october',
        11=>'november',
        12=>'december'
    );
    return in_array($month, $arr_month) ? array_search($month, $arr_month) : false;
}
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T00:17:39.133

您可以使用带有数组键的可选搜索参数来做到这一点：

```
$matchedKeys = array_keys($arr_month, "november");
var_dump($matchedKeys);
// array(1) { [0]=> int(11) } 
```

如您所见，这将返回所有匹配键的*数组*。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T23:56:21.217

```
$index = -1;
foreach ($arr_month as $k => $v) {
   if (strstr($mystring, $v)) {
      $index = $k;
      break;
   }
}
// exists with $index set 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-26T00:32:31.473

如果您尝试解析日期，请记住 PHP 可以为您做到这一点（尽管这取决于您的输入数据的任意性 - 如果您提前知道日期格式，这显然更可靠）。

例如：

```
print_r(date_parse("6 de february de 1987")); 
```

给出：

```
Array
(
    [year] => 1987
    [month] => 2
    [day] => 
    [hour] => 
    [minute] => 
    [second] => 
    [fraction] => 
    [warning_count] => 2
    [warnings] => Array
        (
            [14] => Double timezone specification
            [22] => The parsed date was invalid
        )

    [error_count] => 2
    [errors] => Array
        (
            [0] => Unexpected character
            [2] => The timezone could not be found in the database
        )

    [is_localtime] => 1
    [zone_type] => 0
) 
```

所以它在当天被放弃了，但它确实正确地识别了月份和年份。

在您的输入中使用更现代的`DateTime`api 失败（是法语和英语的混合体吗？）

但它确实适用于以下情况：

```
$d = new DateTime("6th february 1987", new DateTimeZone("UTC"));
print $d->format("Y-m-d H:i:s") . "\n";' 
```

给出：

```
1987-02-06 00:00:00 
```

# vb.net - 在文本框中保留前导零

> ID：12592739
> 
> 赞同：0
> 
> 时间：2012-09-25T23:52:51.663
> 
> 标签：vb.net, textbox

我需要在将用于将数据输入数据库的文本框中保持前导零。它适用于 SKU 编号。我需要能够输入前导零（例如 001234567890），然后将它们输入数据库。

但是我不知道如何将前导零保持在双精度中。我不需要字符串格式，而是双精度。有没有办法在保持数字而不是字符串的同时做到这一点？

前任。

```
txtProductBarcode.Text = Format(txtProductBarcode.Text, "############")
'This does not work 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T00:08:51.570

使用`0`代替`#`将导致输出前导零。

例如：

```
Dim s as string = string.Format("{0:000###}", 12345d)
Console.WriteLine(s) 
```

将输出

```
012345 
```

请参阅MSDN 上[的用前导零填充数字。](http://msdn.microsoft.com/en-us/library/dd260048.aspx#Y1076)

顺便说一句，不知道你为什么担心在“双倍”时保留前导零。double 只是一个 double，显示格式无关紧要。0123 与 123 相同，否则您应该使用字符串数据类型而不是双精度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-26T05:50:11.643

Try this is one. You can convert the integer num to double.

```
Private Sub TextBox1_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles TextBox1.TextChanged

    Dim num As Integer
    Dim temp As String = ""
    Try
       If Regex.IsMatch(TextBox1.Text, "^[0-9 ]+$") Then
          num = Integer.Parse(TextBox1.Text)
          If num <> 0 then
             TextBox1.Text = num.ToString("D6")
             temp = num
          else
             TextBox1.ReadOnly = False
          End If
          If num.Length = 6 Then
             TextBox1.ReadOnly = True
             TextBox1.BackColor = Color.White
          ElseIf num = 0 Then
             TextBox1.ReadOnly = False
          End If
          TextBox1.SelectionStart = TextBox1.Text.Length
       End If
    Catch ex As Exception
       Msgbox(ex.Message)
    End Try
End Sub 
```

# r - 根据列值拆分数据并创建散点图。

> ID：12592742
> 
> 赞同：4
> 
> 时间：2012-09-25T23:53:10.823
> 
> 标签：r

我需要为`days vs age`f 组 (sex=1) 制作一个散点图，并`days vs age`使用 R 为 m 组 (sex=2)制作另一个散点图。

```
days  age sex
 306  74   1
 455  67   2
1000  55   1
 505  65   1
 399  54   2
 495  66   2
 ... 
```

如何按性别提取数据？之后我知道使用`plot()`函数创建散点图。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-25T23:54:54.140

您可以使用传统的 R 图形函数来做到这一点，例如：

```
plot(age ~ days, Data[Data$sex == 1, ])
plot(age ~ days, Data[Data$sex == 2, ]) 
```

如果您更喜欢为点着色而不是分开图（这可能更容易理解），您可以这样做：

```
plot(age ~ days, Data, col=Data$sex) 
```

然而，这种情节使用[ggplot2](http://ggplot2.org/)会特别容易（而且看起来更好） ：

```
library(ggplot2)
ggplot(Data, aes(x=days, y=age)) + geom_point() + facet_wrap(~sex) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-01T15:03:28.827

[`spread`](https://www.rdocumentation.org/packages/tidyr/versions/0.7.0/topics/spread)按列值拆分数据。这也称为[将数据从 "long" 转换为 "wide"](http://www.cookbook-r.com/Manipulating_data/Converting_data_between_wide_and_long_format/)。

我没有测试过这个，但是类似

```
spread(data, sex, age) 
```

应该得到你

```
days  1    2
 306  74   NA
 455  NA   67   
1000  55   NA
 505  65   NA
 399  NA   54   
 495  NA   66 
```

# css - 链接在分层 div 中不起作用

> ID：12592745
> 
> 赞同：1
> 
> 时间：2012-09-25T23:54:20.387
> 
> 标签：css, html, hyperlink, anchor, layer

我一直在试图弄清楚如何让我的链接在分层 div 中工作

**我有一个包含其他两个 div 的大 div：**

*   包含内容的主 div 和

*   我的菜单的导航 div

问题是它`main div`与导航 div 重叠，我希望我的链接成为（丝带），这样看起来它们在悬停时被拉出。但它们根本就不是活动链接吗？我的CSS如下：

```
 .navigate {
    width: 1020px;
    height: 300px;
    position: absolute;
    right: 0;
    left: 0;
    margin-left: auto;
    margin-right: auto;
    top: 190px;
    z-index: -1;
    border: 1px solid red;} 
```

和

```
.main {
background: url("../images/papir.png") no-repeat center; /* papir.png bredde=1020px */ 
margin-left: auto;
margin-right: auto;
margin-top: 150px;
margin-bottom: 7em;
width: 1020px; /* 1020px */
height: 752px; /* 752px */ 
z-index: 0;
border: 1px solid green; } 
```

就像`navigation div`是背后的东西：$

当我将其更改`z-index`为 0 时，`navigation div`它工作得很好，只是 div 不在`main div`..

我试图用

```
body {
position: relative;
z-index: 0; } 
```

在某处阅读它应该可以解决问题 - 但不适合我

**任何想法如何解决它？**

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T23:57:49.327

目前，您将`.navigate`div z-index 设置为 -1，因此它位于`.main`div 后面。使其大于其他 div，使其位于顶部。例如`z-index: 101;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T12:34:23.013

得到它的工作！

刚刚添加：

```
position: relative; 
```

到 .main-div

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T00:01:12.403

> 当我在导航 div 中将 z-index 更改为 0 时，它工作得很好，只是 div 不在主 div 后面。

如果我理解正确，如果链接顶部有另一个 div 重叠，则无法使链接正常工作，例如。如果导航 div 在主 div 下，则导航 div 上的链接将不起作用

但..

如果您想要链接在顶部的 div - 将它们相对或绝对或固定放置，并将 z-index 设置为高于您想要的 div 后面的任何数字

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T08:16:53.290

例如，对要覆盖的 div 使用负边距

```
.overlay-div{margin-top:-20px;} 
```

# asp.net-web-api - 为什么 WebApi 无法绑定 System.Version 参数？

> ID：12592746
> 
> 赞同：2
> 
> 时间：2012-09-25T23:54:30.713
> 
> 标签：asp.net-web-api, model-binding

**更新**：解决了！这里没什么可看的，请继续:-)

我有一个`ApiController`带`System.Version`参数的方法。参数以 JSON 格式在请求正文中传递。这是发送的内容：

{“主要”：0，“次要”：7，“构建”：0，“修订”：0，“主要修订”：0，“次要修订”：0}

路由有效 - 正在调用我的方法 - 但参数有一个空`Version`对象（所有值为零）。为什么？

这是控制器方法的声明：

```
 // POST api/service/details
    [HttpPost]
    [ActionName("Details")]
    public ServiceDto Get(Version version)
    {
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T13:26:26.070

为了防止其他人试图回答这个问题，答案是 System.Version 类的成员没有公共设置器。因此它不能被正确地反序列化，并且保持在它的初始状态。我必须使用我自己的具有可公开设置成员的“版本”类，并且效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T11:46:08.447

我不认为 [Serializable] 可能是一个问题。

尝试将 'Content-Type: application/json' 作为客户端的标头。也像这样使用 [FromBody] 属性。

```
[HttpPost]
[ActionName("Details")]
public ServiceDto Get([FromBody]Version version)
{
} 
```

# sql - 简单选择返回 null 而不是 value

> ID：12592755
> 
> 赞同：0
> 
> 时间：2012-09-25T23:55:38.653
> 
> 标签：sql

我有一张这样的桌子：

![在此处输入图像描述](../Images/764a891949a6ade1fc4ca27cc4b35347.png)

我需要的是给定部门在给定年份的金额总和。

我试过这个：

```
SELECT SUM(amount) FROM `spendings` WHERE dept_name='fiz' AND YEAR(date)=2012 
```

但它只会返回`NULL`。`dept_name`is a `varchar`, `amount`is a`double`和`date`- 好吧，它是 a ，真是`date`个惊喜。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T23:57:44.757

部门 fiz 在 2012 年没有任何记录，因此未找到查询的总和为 Null

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T23:57:55.607

如果该表实际上是您要查询的数据，则 2012 年没有记录（只有 2010 年和 2011 年）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T23:58:31.247

你没有任何记录`WHERE dept_name='fiz' AND YEAR(date)=2012`。dept 的两条记录`'fiz'`是 for`'2010'`和`'2011'`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T00:02:24.960

只是为了不重复其他答案，如果你期望一个cero，那么使用：

```
SELECT COALESCE(SUM(amount),0) FROM `spendings` WHERE dept_name='fiz' AND YEAR(date)=2012 
```

请注意`COALESCE`这里的功能

# gis - OpenLayers：仅在存在时加载缓存的切片，否则将它们联机

> ID：12592759
> 
> 赞同：0
> 
> 时间：2012-09-25T23:56:13.330
> 
> 标签：gis, openlayers

我有两层，用于在线切片的 OpenStreetMap 和用于来自不同切片源的缓存切片的 TMS。我知道如何分别显示每一层。

然而，TMS 并不包含所有的瓦片。因此，我想先显示 TMS 切片，然后再显示未使用 OpenStreetMap 缓存的所有其他内容。我怎么能做到两层的重叠？

结果应该如下所示： [一只忙碌的猫 http://tothchat.com/test/tiles.png](http://tothchat.com/test/tiles.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T09:11:05.740

这两个层必须是覆盖层（不是baseLayer）。你试过这个：

```
map = new OpenLayers.Map({
        div: "map",
        allOverlays: true  //<- all layers will have isBaseLayer set to false when they are added to the map.
    }); 
```

或者将这两层的`isBaseLayer`参数设置为**false 。**

# iphone - UIScrollView 快速点击没有被触发 *错误*

> ID：12592760
> 
> 赞同：0
> 
> 时间：2012-09-25T23:56:18.340
> 
> 标签：iphone, uiviewcontroller, uiscrollview, uikit

我发现 UITableViews 和 UIScrollViews 存在问题。要选择 UITableViewCell，您必须给它一个相当长的点击才能注册。快速点击屏幕不会完成这项工作。将 delayContentTouches 设置为 NO 也不是答案，因为与它应该如何正常工作相比，它“太快”突出显示单元格。

有谁知道这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T03:07:20.067

我正在使用一些奇怪的第 3 方代码，这些代码将类别添加到 UITouch.... 数字。

# objective-c - Urban Airship - 使用 NSURLConnection 发送推送

> ID：12592762
> 
> 赞同：3
> 
> 时间：2012-09-25T23:56:31.097
> 
> 标签：objective-c, ios, push, urbanairship.com

我正在开发一个简单的原型，需要测试从一台设备向另一台设备发送推送通知。

我已经通过电子邮件给 Urban Airship 发送了电子邮件，要求为我的应用程序打开“允许从设备推送”——他们确实打开了它。

我正在尝试使用 NSURLConnection 从设备发送推送通知。

这是我的代码：

```
- (void) test {
    NSMutableURLRequest * request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"https://go.urbanairship.com/api/push"]];
    [request setHTTPMethod:@"POST"];
    [request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];

    NSDictionary * push = @{@"device_tokens":@[@"<token>"], @"aps":@{@"alert":@"TEST", @"sound":@"default"}};
    NSData * pushdata = [NSJSONSerialization dataWithJSONObject:push options:0 error:NULL];
    [request setHTTPBody:pushdata];

    [NSURLConnection connectionWithRequest:request delegate:self];
}

- (void) connection:(NSURLConnection *) connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *) challenge {
    if([challenge.protectionSpace.authenticationMethod isEqualToString:NSURLAuthenticationMethodHTTPBasic]) {
        NSURLCredential * credential = [[NSURLCredential alloc] initWithUser:@"<app key>" password:@"<app secret>" persistence:NSURLCredentialPersistenceForSession];
        [[challenge sender] useCredential:credential forAuthenticationChallenge:challenge];
        [credential release];
    }
}

- (void) connection:(NSURLConnection *) connection didReceiveResponse:(NSURLResponse *) response {
    NSHTTPURLResponse * res = (NSHTTPURLResponse *) response;
    NSLog(@"response: %@",res);
    NSLog(@"res %i\n",res.statusCode);
} 
```

其他人成功地做到了这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T23:37:51.370

查看 Urban Airship 的[HTTP 状态代码故障排除指南](https://support.urbanairship.com/customer/portal/articles/60923-troubleshooting-http-status-codes)和[推送 API 的文档](https://docs.urbanairship.com/display/DOCS/Server:+iOS+Push+API)，我猜你需要在 URL 中添加一个斜杠：

```
[NSURL URLWithString:@"https://go.urbanairship.com/api/push/"] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-08T15:51:02.627

使用 V3 API 的示例...

```
-(void)richPushNotification{

NSDictionary *push = @{

                       @"audience" : @{
                               @"device_token" : deviceToken
                               },
                       @"device_types" : @[ @"ios" ],
                       @"notification" : @{
                               @"ios" : @{
                                       @"alert":Message,
                                       @"sound":@"default",
                                       @"badge":@"auto",
                                       }
                               },
                       @"message": @{
                               @"title": Message,
                               @"body": @"<html><body><h1>blah blah</h1> etc...</html>",
                               @"content_type": @"text/html",
                               @"extra": @{
                                       @"offer_id" : @"608f1f6c-8860-c617-a803-b187b491568e"
                                       }
                               }
                       };

NSMutableURLRequest * request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"https://go.urbanairship.com/api/push/"]];
[request setHTTPMethod:@"POST"];
[request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
[request setValue:@"application/vnd.urbanairship+json; version=3;" forHTTPHeaderField:@"Accept"];

NSString *authStr = [NSString stringWithFormat:@"%@:%@", appKey, appMasterSecret];
NSData *authData = [authStr dataUsingEncoding:NSASCIIStringEncoding];
NSString *authValue = [NSString stringWithFormat:@"Basic %@", [authData base64EncodedStringWithOptions:NSDataBase64EncodingEndLineWithLineFeed]];
[request setValue:authValue forHTTPHeaderField:@"Authorization"];

NSData *jsonData = [NSJSONSerialization dataWithJSONObject:push
                                                   options:0 // Pass 0 if you don't care about the readability of the generated string
                                                     error:NULL];

request.HTTPBody = jsonData;

[NSURLConnection connectionWithRequest:request delegate:self]; 
```

}

和回应：

```
- (void) connection:(NSURLConnection *) connection didReceiveResponse:(NSURLResponse *) response {
NSHTTPURLResponse * res = (NSHTTPURLResponse *) response;
NSLog(@"response: %@",res);
NSLog(@"res %li\n",(long)res.statusCode);

if (res.statusCode == 202) {

    //Show Alert Message Sent

}else{

    //Handle Error

} 
```

}

# twitter-bootstrap - 推特引导面包屑

> ID：12592767
> 
> 赞同：1
> 
> 时间：2012-09-25T23:56:58.670
> 
> 标签：twitter-bootstrap, breadcrumbs

对于在 twitter bootstrap 中工作的面包屑，我的理解是您只需将 ul 类设置为面包屑，这是一个示例：

```
<ul class="breadcrumb">
<li><a href="#">Home</a> <span class="divider">/</span></li>
<li><a href="#">Library</a> <span class="divider">/</span></li>
<li class="active">Data</li>
</ul> 
```

但是，这是我们在导航栏中进行下拉的代码：

```
<ul class="dropdown-menu">
              <% menu_item[:children].each do |submenu_item| %>
                <%= render :partial => 'cms/menus/bootstrap_menu_child', :locals => { :submenu_item => submenu_item } %>
              <% end %>
</ul> 
```

我只是添加类=“下拉菜单面包屑”吗？试过了，没有用。也许有什么地方可以“打开”面包屑？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T03:40:39.563

Bootstrap 面包屑只是一组 CSS 样式；下拉功能[作为 jQuery 插件包含在内](http://twitter.github.com/bootstrap/javascript.html)。
因此，添加`class="breadcrumb"`只会设置现有元素的样式，不会生成面包屑导航。您必须在代码中执行此操作。

# php - 访问数组内对象内的字符串

> ID：12592769
> 
> 赞同：0
> 
> 时间：2012-09-25T23:57:00.947
> 
> 标签：php, arrays, wordpress, object, chaining

在 wordpress 中，我有一个这样的数据结构：

```
array
  49 => 
    object(stdClass)[272]
      public 'ID' => int 49
      ...
      // I need this guid
      public 'guid' => string 'http://localhost/github/wordpress/wp-content/uploads/2012/09/3.png' (length=66)
      ...
  47 => 
    object(stdClass)[275]

  46 => 
    object(stdClass)[276]
      public 'ID' => int 46
      ...
      public 'filter' => string 'raw' (length=3) 
```

我正在尝试访问`guid`并且这有效：

```
$temp121212 = get_children($post->ID);
echo $temp121212[49]->guid; 
```

但这不是：

```
echo get_children($post->ID)[49]->guid; 
```

我究竟做错了什么？不能这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T00:03:30.250

在 php 5.3 之前，您不能 [例如在 javascript 中所做的那样] - 这称为数组取消引用。

因此，您必须将数组存储在某处：

```
$child = get_children($post->ID)[49];
echo $child -> guid; 
```

但是，在 php 5.4 中，您可以使用您的语法。

# perl - 在 tcl/tk 中为 GUI 按钮分配代码

> ID：12592774
> 
> 赞同：1
> 
> 时间：2012-09-25T23:57:51.130
> 
> 标签：perl, tcl, tk

我是这个“GUI”的新手，但我想用一个按钮和一个显示器在 tcl/tk 中创建一个 GUI 来显示输出。我已经浏览了几个 GUI 示例，但我找不到将代码/脚本分配给按钮的示例。那么有人可以帮助我吗？

是否可以将 perl 脚本分配给 tcl/tk GUI 代码？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T03:06:43.720

我不确定您的确切问题是什么，因为您想要做的非常简单。只需使用以下`-command`选项：

```
pack [button .b -text Hello -command {puts "Hello World"}] 
```

如果您要执行的代码在一个字符串中，那么您可以简单地执行以下操作：

```
set code {
    puts "Hello World"
}
pack [button .b -text Hello -command $code] 
```

如果你想执行一个函数：

```
proc say_hello {} {
    puts "Hello World"
}
pack [button .b -text Hello -command say_hello] 
```

如果要分配命令的按钮已经存在，则只需将其分配给`-command`选项：

```
# Assuming button .b already exist:
.b configure -command say_hello 
```

# c# - 自定义 XML 序列化 HashSet 中条目的元素名称

> ID：12592777
> 
> 赞同：1
> 
> 时间：2012-09-25T23:57:55.753
> 
> 标签：c#, web-services, .net-3.5, deserialization, webmethod

我们真的可以在哈希集输出问题上使用一些帮助。除了一件事之外，我们让 HashSet Web 方法与 HashSet 完美配合。输出是一个 Web 服务，如下所示：

```
<?xml version="1.0" encoding="utf-8" ?>
<ArrayOfString xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 'xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://localhost/webservices">
    <string>201210XXXX</string>
    <string>201211XXXX</string>
</ArrayOfString> 
```

这是完美的，除了客户要求字符串行的输出是“TN”和“/TN”标签行而不是字符串标签。认为这应该很容易并添加了我的额外课程，但我无法弄清楚如何做到这一点

```
HashSet<TN>; 
```

我们构建了 web 方法

```
[WebMethod]
public HashSet<string> GetFoneLines()
{
    HashSet<string> hs = new HashSet<string>();

    DataTable dt = new dal().GetPhoneLines();

    foreach (DataRow dr in dt.Rows)
    {
        hs.Add(dr[0].ToString());    
    }

    return hs;
} 
```

并试图扩展字符串类。学习字符串是密封的，我们只是试图创建自己的类

```
public class TN
{
    public string tnumber;
} 
```

这一定很简单，但是经过 48 小时敲出代码后，我看不出如何创建 TN 的哈希而不是字符串的哈希。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T00:13:46.157

尝试使用自定义 XML 序列化属性来装饰您的类，如下所示：

```
public class TN
{
    [XmlElement(ElementName="TN")]
    public string tnumber;

} 
```

请参阅[MSDN](http://msdn.microsoft.com/en-us/library/athddy89.aspx)。

# jquery - 可以在 jQuery 中多次声明相同的窗口事件吗？

> ID：12592781
> 
> 赞同：2
> 
> 时间：2012-09-25T23:58:35.193
> 
> 标签：jquery, performance, events

我有一些元素监听窗口调整大小和滚动事件。为了使代码清晰易读，我在不同的块中多次声明了相同的窗口事件，如下所示...

```
$('#foo')...
$(window).resize(function() {
    $('#foo')...
});

// lots of code...

$('#bar')...
$(window).resize(function() {
    $('#bar')...
});

// and so on.. 
```

我认为一般应该写成

```
$(window).resize(function() {
    $('#foo')...
    $('#bar')...
});

// lots of code

$('#foo')...

// lots of code

$('bar')... 
```

我的问题是，如果我多次声明窗口事件，它会对 jQuery 性能有什么影响吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T06:12:40.947

是的，但很少。JQuery 将不得不在调整大小队列中经过一个额外的回调。大不了，对吧？

也考虑一下，您的代码正在进行 2 个函数调用：

1.  `$()`
2.  `resize()`

你可以做这些来改善：

1.  将您的`$(window)`调用（如评论中的@undefined 所说）缓存到变量中。这样做会减少对`$()`.
2.  尝试使用`on('resize', function(){})`更好的优化（根据 jQuery 文档）

# iphone - 无法从视图控制器手动加载 xib？

> ID：12592785
> 
> 赞同：1
> 
> 时间：2012-09-25T23:59:17.047
> 
> 标签：iphone, objective-c, ios, xib, nsbundle

我正在使用[Blackboard SDK 制作应用程序。](https://confluence.medu.com/download/attachments/28148763/Blackboard_SDK_Basic_Installer_5.0.pkg.zip?version=1&modificationDate=1340732652648)如果您可以下载 SDK 并查看是否有相同的错误，这将非常有帮助。这是[说明](https://confluence.medu.com/download/attachments/28148763/Welcome.pdf?version=1&modificationDate=1340732748635)的链接，以防有人想跟随-不要太多页面。

说明说

“因为模块在启动器应用程序中运行，所以 MainWindow.xib 文件是启动器的文件。因此，模块不能有自己的 MainWindow.xib 文件，因为它会产生冲突。

此外，当模块首次启动时，不会从 nib 文件中自动加载视图。因此，从 nib 加载的所有视图都必须在您的代码中手动加载，并且所有 nib 文件必须遵循相同的命名约定并包含在您的资源文件中。

最初，我试图像这样实例化一个视图控制器

```
 testVC = [[LMU_LAL_ViewControllerTest alloc] initWithNibName:@"LMU_LAL_ViewControllerTest" bundle:nil]; 
```

但是，它导致了崩溃。我收到的错误消息是

```
Could not load NIB in bundle: 'NSBundle </Users/mahir/Library/Application Support/iPhone Simulator/6.0/Applications/2ABAAF9D-5141-41B2-8EFB-51C3E047AD67/testLauncher.app> (loaded)' with name 'LMU_LAL_ViewControllerTest 
```

有人说可以通过下载早期版本的xcode来解决这个问题，但这还没有帮助。此外，我将方法从`initWithNibName:bundle:`to更改为`init`并将其添加到视图控制器子类

```
- (void)loadView
{
[super loadView];

UINib *nib = [UINib nibWithNibName:@"LMU_LAL_ViewControllerTest" bundle:nil];
[nib instantiateWithOwner:self options:nil];
} 
```

再次，我收到类似的错误，但这次在线 `[nib instantiateWithOwner:self options:nil]`

我究竟做错了什么？？

编辑：

这是支持团队的某个人给我的摘录。

> 您的模块使用的所有资源，包括任何 .xib 文件，都必须包含在 LAUNCHER 的项目中。这意味着在您实际运行以测试模块的项目（启动器项目）中，所有资源文件都需要包含在该项目中。测试是否是这种情况的一种简单方法是通过查看启动器项目中 Xcode 的左侧栏来找到您的 .xib 文件。这将确保资源文件实际包含在项目中。我已经在 Xcode 的启动器项目中包含了它应该是什么样子的屏幕截图。

![在此处输入图像描述](../Images/15d7d6b88d5cdd688736ecdb69b1bd34.png)

这是我目前拥有的

![在此处输入图像描述](../Images/8bde5bf951da782b80b09a7cac3af701.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T02:53:45.567

从您对 Erfan 解决方案的回复来看，问题似乎只是文件 LMU_LAL_ViewControllerTest.xib 不在目标的构建阶段。这意味着目标（您的程序）在构建时永远不会看到该文件，即使您可以在导航器中看到它。

将 xib 文件添加到目标的另一种方法是执行以下操作：

*   在导航器窗格的顶部选择您的项目
*   在导航器右侧的下一个窗格中选择目标
*   open `Copy Bundle Resources`：您可能不会看到此处列出的 LMU_LAL_ViewControllerTest.xib，尽管它应该是
*   `+`从弹出窗口中选择并选择文件以添加它

如果这不起作用（可能不会，因为它相当于 Erfan 的解决方案），您可以尝试从项目中删除文件并将其重新添加。删除时，请确保`Move to Trash`. 当您再次将其复制到项目中时，在出现的弹出窗口中，确保选中 . 旁边的正确框`Add to Targets`。

如果您的构建阶段缺少此文件，您可能会发现其他文件也丢失了，并且会触发类似的错误。您可以检查所有构建阶段，尤其是其他资源文件的 Copy Bundle Resources 和 Objective-C 类的实现文件的 Compile Sources。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T00:04:35.163

您可以在以下文档中找到对此的解释[`initWithNibName:bundle:`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/initWithNibName%3abundle%3a)

> 在其中搜索 nib 文件的包。此方法首先在包的特定语言项目目录中查找 nib 文件，然后是 Resources 目录。**如果`nil`，此方法在主包中查找 nib 文件。**

至于错误，您可能在 xib 文件的名称或代码中存在拼写错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T05:41:47.580

我下载了您链接到的 Blackboard SDK，并成功添加了一个带有`.xib`文件的视图控制器，`ExampleModule`并从外部`SpringboardApplication`.

您需要的核心操作是**将文件的编译版本`.xib`放入输出文件夹**。我将在下面展示如何做到这一点。这是基于 CocoaPods 所做的。

1.  在您的模块子项目中创建一个视图控制器，如下所示。

    ![XCode 应用程序文件列表](../Images/edfd3643eb4226ba66b1ca0794c4add5.png)

2.  `Springboard Application`如上所示，使用下面列出的文件内容在您的项目中创建一个 shell 脚本。

3.  *将脚本标记为可执行！*否则它不会运行。这可以从命令行完成：

    chmod +x /path/to/your/script.sh

4.  打开`Build Phases`你的标签`Springboard Application`。添加`Run Script`构建阶段，并引用脚本，如下所示。

    ![XCode 应用程序的构建阶段选项卡](../Images/58a3a41fe53931dc3d0d7bd5453df7f3.png)

此脚本将用于`ibtool`创建`.xib`文件的编译版本并将它们放入已编译的应用程序中，以便应用程序可以引用它们。

*如果您无法控制 SpringboadApplication，您可能无法使用 XIB 文件，因为静态库只能包含已编译的目标代码，而不能包含资源或捆绑包。如果 SpringboardApplication 的所有者愿意与您合作，我的答案的变体或[此 StackOverflow 问题](https://stackoverflow.com/questions/2578496/creating-my-own-bundle-in-xcode-for-iphone-application/2580355#2580355)可能对您有用。*

以下是该脚本的内容，基于[CocoaPods 脚本](https://github.com/CocoaPods/CocoaPods/blob/master/lib/cocoapods/generator/copy_resources_script.rb)（MIT 许可证）：

```
#!/bin/sh

install_resource()
{
    case $1 in
        *.storyboard)
            echo "ibtool --errors --warnings --notices --output-format human-readable-text --compile ${CONFIGURATION_BUILD_DIR}/${UNLOCALIZED_RESOURCES_FOLDER_PATH}/`basename $1 .storyboard`.storyboardc ${SRCROOT}/$1 --sdk ${SDKROOT}"
            ibtool --errors --warnings --notices --output-format human-readable-text --compile "${CONFIGURATION_BUILD_DIR}/${UNLOCALIZED_RESOURCES_FOLDER_PATH}/`basename $1 .storyboard`.storyboardc" "${SRCROOT}/$1" --sdk "${SDKROOT}"
            ;;
        *.xib)
            echo "ibtool --errors --warnings --notices --output-format human-readable-text --compile ${CONFIGURATION_BUILD_DIR}/${UNLOCALIZED_RESOURCES_FOLDER_PATH}/`basename $1 .xib`.nib ${SRCROOT}/$1 --sdk ${SDKROOT}"
            ibtool --errors --warnings --notices --output-format human-readable-text --compile "${CONFIGURATION_BUILD_DIR}/${UNLOCALIZED_RESOURCES_FOLDER_PATH}/`basename $1 .xib`.nib" "${SRCROOT}/$1" --sdk "${SDKROOT}"
            ;;
        *)
            echo "cp -R ${SRCROOT}/$1 ${CONFIGURATION_BUILD_DIR}/${UNLOCALIZED_RESOURCES_FOLDER_PATH}"
            cp -R "${SRCROOT}/$1" "${CONFIGURATION_BUILD_DIR}/${UNLOCALIZED_RESOURCES_FOLDER_PATH}"
            ;;
    esac
}
install_resource `ls ../../Modules/ExampleModule/*.xib` 
```

请注意，最后一行必须自定义以包含**所有**需要从您的模块到应用程序的资源。显然，这可以使用多行来完成。

我根本没有改变 ViewController 的代码——它仍然是 XCode 生成的版本。

如果您无法在该`~/Blackboard Mobile SDK/Samples/Application/SpringboardApplication`项目上完成这项工作，请告诉我，如果需要，我会提供更多详细信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T05:07:56.903

选择导致错误的 NIB 文件（在您的情况下为 LMU_LAL_ViewControllerTest.xib），注意文件检查器并转到“目标成员”部分。在那里，您将看到您的项目名称，左侧有一个复选框。选中该框（标记为选中）并构建并运行您的应用程序。它以前发生在我身上，我已经以这种方式解决了这个问题。你可以试试这个，让我知道它是否对你有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T00:04:02.207

您没有指定捆绑包这一事实并不意味着它不会从“捆绑包”加载，它只是意味着它将从默认的应用程序捆绑包加载。我会确保 NibName 中的名称与 Interface Builder 中的 Xib 文件匹配。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-01T02:12:16.083

尝试指定扩展名。尝试加载@"LMU_LAL_ViewControllerTest.xib"

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-07T20:32:10.847

请进入应用程序构建设置并在捆绑资源中检查是否添加了 .xb 文件。如果未添加，则添加它。它会解决你的问题

# google-app-engine - 如何在 App Engine 中添加初始或默认数据

> ID：12592786
> 
> 赞同：1
> 
> 时间：2012-09-25T23:59:16.443
> 
> 标签：google-app-engine, google-cloud-datastore, default-database

嘿伙计们，App 引擎中的一个 n00b，我一直在为此苦苦挣扎，有没有一种方法可以将默认数据添加/批量添加到 Data Store。

我想创建目录或示例数据，以及用户或权限。我没有使用默认的 App 引擎用户，而是使用 webapp2 用户身份验证会话基础模型。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T01:07:45.320

您可以使用批量加载程序：[https](https://developers.google.com/appengine/docs/python/tools/uploadingdata) ://developers.google.com/appengine/docs/python/tools/uploadingdata 或将数据上传到 blobstore 并将其移动到数据存储区。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T15:52:02.090

这是一个很大的话题，但是我正在使用在任务队列中运行的 Java 代码来执行此操作。

1.  通过代码创建随机测试和演示数据要容易得多。
2.  对单元测试更加友好。
3.  这不需要依赖项。它只是运行和访问数据存储的代码。
4.  当更改涉及逻辑时，有时通过代码而不是脚本更容易操作数据存储。
5.  允许我们上传嵌入在新应用版本中的新任务定义（Java 类）。然后，我们通过调用 servlet URL 触发任务执行。然后从下一个应用程序版本中删除这些任务类。
6.  使用任务，您可以绕过请求执行超时。如果任务长时间运行，我们将其拆分为顺序任务。当一个任务完成时，它会自动将下一个任务排入队列。

当然，这需要大量的编码，但同时又非常简单和灵活。

# adobe - 在 FileMaker 中保存文件时的 PDF 访问问题

> ID：12592792
> 
> 赞同：1
> 
> 时间：2012-09-26T00:00:38.623
> 
> 标签：adobe, acrobat, filemaker

当我在 FileMaker Pro v11 中运行将布局另存为 PDF 的脚本时，我的同事无法访问这些 PDF。Adobe 打开并告诉用户出现错误并拒绝访问。有没有办法在 FileMaker 或 Adob​​e 中更改设置，允许我和我的同事将记录保存为 FileMaker 中的 PDF，以便我们都可以访问它们？

作为旁注，我们可以打印，选择 Adob​​e 作为打印机，然后毫无问题地以这种方式保存，但是脚本的重点是使整个过程简化为单击按钮。当我们使用打印脚本步骤以便自动选择 Adob​​e 时，我们仍然遇到必须手动保存的问题，这使得“打印”脚本步骤无法解决。

这是保存 PDF 的代码部分：

```
Save Records as PDF [ File Name: “$folder/$filename”; Current record ] 
[ Document - Compatibility: Acrobat 7 and later ]
[ Pages - Number Pages From: 1; Include: All pages ] 
[ Security - Printing: High Resolution; Editing: Any except extracting pages; Enable copying; Enable Screen Reader ] 
[ Initial View - Show: Page Only; Page Layout: Single Page; Magnification: 100% ]
[ Restore; No dialog ] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T16:13:46.553

根据文档，[将记录另存为 PDF](http://www.filemaker.com/help/html/scripts_ref1.36.71.html)：

> 注意：要将记录另存为 PDF 文件，您的权限集必须包括允许打印，或者您必须在编辑脚本对话框中选择以完全访问权限运行脚本。

那是，

1.  更改用户权限以允许打印：（
    `Manage > Security > Privileges Sets`并且您可以检查每组`Allow Printing`）。
2.  在编辑脚本页面中选中“以完全访问权限运行脚本”。

我要注意，有时您可能不希望用户能够打印所有内容，并且您可能不希望以完全访问权限运行整个脚本，因此我将提供第三种解决方案：

3\. 调用一个仅用于保存为 PDF 的子脚本，
选中其“以完全访问权限运行脚本”框。

# perl - 将授权机制 ClientLogin 迁移到 OAuth2 Google AdWords v201206 Perl

> ID：12592794
> 
> 赞同：1
> 
> 时间：2012-09-26T00:00:52.550
> 
> 标签：perl, authorization, oauth-2.0, google-ads-api

所以我之前在 Google AdWords API 中使用[ClientLogin](https://developers.google.com/accounts/docs/AuthForInstalledApps)进行授权，但是在查看[AuthForInstalledApps](https://developers.google.com/accounts/docs/AuthForInstalledApps)之后，它说这种机制已被弃用，取而代之的是[OAuth2.0](https://developers.google.com/accounts/docs/OAuth2)

我已经在[API Consoles](https://code.google.com/apis/console/)中注册了我的应用程序。现在我正在尝试按照 perl 示例进行设置：

[使用_oauth2.pl](http://code.google.com/p/google-api-adwords-perl/source/browse/trunk/examples/v201206/misc/use_oauth2.pl)

我无法将 AdWords 客户端、凭据放在 [~/adwords.properties](http://code.google.com/p/google-api-adwords-perl/source/browse/trunk/adwords.properties)中，因为我有多个帐户，我将对其进行广告系列管理操作，因此有多个客户端 ID。

但是现在我试图通过只使用我的一个客户的信息来遵循这个例子，如下所示：

```
my $client = Google::Ads::AdWords::Client->new(
    {
        version  => 'v201206',
        developer_token => TOKEN,
        client_id => $google_account_id
    }
);

$client->get_auth_token_handler()->set_email($login);
$client->get_auth_token_handler()->set_password($password); 
```

但是，当我逐步执行此操作时，当它尝试初始化`Client`对象时会引发此错误：

```
Can't use an undefined value as a HASH reference at (eval 845)[/usr/lib/perl5/vendor_perl/5.8.8/HTTP/Message.pm:371] line 1\. at (eval 845)[/usr/lib/perl5/vendor_perl/5.8.8/HTTP/Message.pm:371] line 1
HTTP::Message::__ANON__[(eval 845)[/usr/lib/perl5/vendor_perl/5.8.8/HTTP/Message.pm:371]:1]() called at /home/etienne/backend/libs/Google/Ads/Common/HTTPTransport.pm line 30
Google::Ads::Common::HTTPTransport::client('Google::Ads::Common::HTTPTransport=HASH(0xb59b830)', 'Google::Ads::AdWords::Client=SCALAR(0x9b9bb60)') called at /home/etienne/backend/libs Google/Ads/AdWords/Client.pm line 180
Google::Ads::AdWords::Client::START('Google::Ads::AdWords::Client=SCALAR(0x9b9bb60)', 1, 'HASH(0xb582e70)') called at /usr/lib/perl5/site_perl/5.8.8/Class/Std/Fast.pm line 251
Class::Std::Fast::__ANON__[/usr/lib/perl5/site_perl/5.8.8/Class/Std/Fast.pm:252]() called at /usr/lib/perl5/site_perl/5.8.8/Class/Std/Fast.pm line 287
Class::Std::Fast::new('Google::Ads::AdWords::Client', 'HASH(0xb54c210)') called at /home/etienne/backend/search_marketing/data_exchange/lib/GoogleAPIv2.pm line 3555
GoogleAPIv2::get_adwords_client('GoogleAPIv2=HASH(0xb556d10)', 4202697829) called at /home/etienne/backend/search_marketing/data_exchange/lib/GoogleAPIv2.pm line 230
GoogleAPIv2::add_campaign('GoogleAPIv2=HASH(0xb556d10)', 'name', 'API Upgrade Test Campaign - 1348613850', 'google_account_id', 4202697829, 'account_id', 207, 'country_code', 'US', ...) called at google_add_campaign.t line 110
main::main() called at google_add_campaign.t line 26
scalar context return from CODE(0x9b909c0): *Class::Std::Fast::_cache
1..3 
```

我正在使用`Perl v5.8.8`. 我已经安装了最新的`Adwords Perl Client Library v2.7.2`. 是否存在某种依赖问题？我该如何解决这个问题。您可以提供的任何信息都会非常有帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T21:42:23.300

看起来我只需要安装最新的[HTTP/Message.pm](http://search.cpan.org/~gaas/HTTP-Message-6.03/lib/HTTP/Message.pm) `v6.0.3`模块，因为我安装的版本没有`decode()`传递给模块`AUTOLOAD()`中子例程的方法`HTTP/Message.pm`。

# jquery - 循环更改图像不起作用

> ID：12592795
> 
> 赞同：1
> 
> 时间：2012-09-26T00:01:07.633
> 
> 标签：jquery, mouseover, mouseout

我在这个函数中使用 for 循环通过 jQuery 显示所有元素：

```
<script> 
$(function() {
    var number_menus = 9;
    for (i = 1; i <= number_menus; i++) {
        var p1 = +i;
        $(".wm_" + i).show()
            .css("background-image", "url(imagenes/footer/m/" + i + ".png)");

        $(".wm_" + i).mouseover(function() {
            $(this).css(
                "background-image", 
                "url(imagenes/footer/m/" + i + "_down.png)"
            );
            alert("this_down.png");
        });

        $(".wm_" + i).mouseout(function() {
            $(this).css(
                "background-image", 
                "url(imagenes/footer/m/" + i + ".png)"
            );
        });
    }
});​
</script> 
```

另一方面，我有此代码用于显示所有元素或图像加载并创建鼠标悬停效果：

```
<div id="web_footer_publi">
  <div id="web_footer_marks" class="wm_1"></div> 
  <div id="web_footer_marks" class="wm_2"></div> 
  <div id="web_footer_marks" class="wm_3"></div> 
  <div id="web_footer_marks" class="wm_4"></div>
  <div id="web_footer_marks" class="wm_5"></div> 
  <div id="web_footer_marks" class="wm_6"></div> 
  <div id="web_footer_marks" class="wm_7"></div> 
  <div id="web_footer_marks" class="wm_8"></div>
  <div id="web_footer_marks" class="wm_9"></div>
</div> 
```

当创建函数时，请考虑在循环中显示所有类的所有可能性，但是当我查看图像时，这会向我显示循环的其他图像并且效果不佳，我想请告诉我此代码中有什么不好与它一起使用

谢谢 ！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T00:16:28.203

而不是做 mouseover 和 mouseout 使用一点 CSS usign`:hover`选择器

```
<style>
.wm_1 {
  background-image: url(imagenes/footer/m/1.png);
}
.wm_1:hover {
  background-image: url(imagenes/footer/m/1_down.png);
}
</style> 
```

不需要 JS

对其余节点重复此 CSS - 2,3,4...9

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T00:13:16.443

我认为这是由于上下文造成的。在循环内创建一个闭包，以便代码立即执行。也应该有其他方法来解决这个问题。

```
 <script> 
    $(function() {
        var number_menus = 9;
        for (i = 1; i <= number_menus; i++) {

    (function(i){

            var p1 = +i;
            $(".wm_" + i).show().css("background-image", "url(imagenes/footer/m/" + i + ".png)").mouseover(function() {
                $(this).css("background-image", "url(imagenes/footer/m/" + i + "_down.png)");
                alert("this_down.png");
            }).mouseout(function() {
                $(this).css("background-image", "url(imagenes/footer/m/" + i + ".png)");
            });

    })(i);

        }
    });​
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T00:15:17.657

试试这个方法，看看它是否有效

```
$(function() {
    var number_menus = 9;
    (function() { for (i = 1; i <= number_menus; i++) {
        var p1 = +i;
        $(".wm_" + i).show().css("background-image", "url(imagenes/footer/m/" + i + ".png)");
        $(".wm_" + i).mouseover(function() {
            $(this).css("background-image", "url(imagenes/footer/m/" + i + "_down.png)");
            alert("this_down.png");
        });
        $(".wm_" + i).mouseout(function() {
            $(this).css("background-image", "url(imagenes/footer/m/" + i + ".png)");
        });
    } })(i);
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T00:22:17.323

通常，您将在所有元素上都有一个公共类，您可以使用它们来共同定位所有元素；例如，在您的情况下，它可能是`class='wm'`. 类属性不必是唯一的（而`id`确实如此），因此这是一个合理的类共有。但是，即使它们只是相似的，您也不需要 for 循环 - 只需使用[attribute-starts-with 选择器](http://api.jquery.com/attribute-starts-with-selector/)即可一次将它们全部定位。对于索引，属性设置器都有一个方法签名，它接受一个可以提供索引作为参数的函数。

```
$(document).ready(function() {
    var $specialDivs = $("div[class^='wm'");

    $specialDivs
        .show()
        .css("background-image", function (i) {
            return "url(imagenes/footer/m/" + i + ".png)";
        });
        .mouseenter(function() {
            $(this).css("background-image", function (i) {
                return "url(imagenes/footer/m/" + i + "_down.png)";
            });
            alert("this_down.png");
        });
        .mouseleave(function() {
            $(this).css("background-image", function (i) {
                return "url(imagenes/footer/m/" + i + ".png)";
            });
        });
}); 
```

**然而**，所有这些只有在你~~实际上有一些具体的事情要做~~ *（见更正）*使用这些节点，而不是悬停时的简单 css 效果；这些应该用简单的CSS来完成：

```
div[class^='wm']:hover {
    background-image: ...;
} 
```

`n`- 作为对上述内容的更正，我认为每个人都有不同的背景图像这一事实是使用 JS 而不是添加css 规则来处理每个特殊块的充分理由......

# javascript - ExtJS 4：两个管道的 applyIf 在 ExtJS 代码中有什么作用？

> ID：12592806
> 
> 赞同：1
> 
> 时间：2012-09-26T00:02:07.770
> 
> 标签：javascript, extjs, proxy

有关“Ext.applyIf”函数和双管道的参考，请参阅这些文章。

[http://docs.sencha.com/core/manual/content/utility.html](http://docs.sencha.com/core/manual/content/utility.html)

[http://homepage.ntlworld.com/kayseycarvey/controlflow4.html](http://homepage.ntlworld.com/kayseycarvey/controlflow4.html)

有人能解释一下这个逻辑在 ExtJS 框架中做了什么吗？我想确保我的解释在管道的第一行是正确的（尤其是）。

```
 var params = Ext.applyIf(operation.params || {}, this.extraParams || {}), request;
        params = Ext.applyIf(params, this.getParams(params, operation));
        if (operation.id && !params.id) {
            params.id = operation.id;
        } 
```

**取自 ASP.NET asmx 自定义服务器代理类：**

```
Ext.define('Ext.ux.AspWebAjaxProxy', {
    extend: 'Ext.data.proxy.Ajax',
    require: 'Ext.data',

    buildRequest: function (operation) {
        var params = Ext.applyIf(operation.params || {}, this.extraParams || {}), request;
        params = Ext.applyIf(params, this.getParams(params, operation));
        if (operation.id && !params.id) {
            params.id = operation.id;
        }

        params = Ext.JSON.encode(params);

        request = Ext.create('Ext.data.Request', {
            params: params,
            action: operation.action,
            records: operation.records,
            operation: operation,
            url: operation.url
        });
        request.url = this.buildUrl(request);
        operation.request = request;
        return request;
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T05:54:42.910

1.  双管道是指定默认值的 javascript 技巧。就像 Evan 建议的那样，它经常用于避免空指针问题。在`var a = b||{}`a 的示例中，即使 b 为空或未定义，也保证不为空。默认回退使`a = {}`（空对象）。
2.  `ApplyIf`方法将属性从源复制到目标，注意不要覆盖任何现有属性。在以下示例中，只要 params 没有定义这些属性，就会将 extraParams 属性添加到 params 属性中。

    Ext.applyIf（参数，extraParams）

实际代码是：

```
Ext.applyIf(operation.params || {}, this.extraParams || {}), 
```

它将 extraParams 添加到 params 对象中，小心避免任何空指针问题，并确保不覆盖 params。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T00:59:14.207

考虑：

```
function foo(cfg) {
    cfg = cfg || {};
    console.log(cfg.x);
}

foo({x: 1});
foo(); 
```

所以本质上，我们是说，如果传递给方法的 cfg 是“假的”（读取、未定义或 null），则将其设置为空对象，这样在读取“x”属性时就不会出现引用错误。

# objective-c - 图像和 CSS 未在 iPhone UIWebView 中加载

> ID：12592811
> 
> 赞同：1
> 
> 时间：2012-09-26T00:03:28.777
> 
> 标签：objective-c, html, uiwebview

当我的 UIWebView 加载我的 index.html 时，CSS 和 JavaScript 引用显示为损坏。下面的代码有什么问题？（我验证了 appUrlString 指向正确的目录）

```
NSString *htmlFile = [[NSBundle mainBundle] pathForResource:@"index" ofType:@"html" inDirectory:@""];
NSData *htmlData = [NSData dataWithContentsOfFile:htmlFile];

NSString *appUrlString = [NSString stringWithFormat:@"%@/web/", [[NSBundle mainBundle] resourcePath]];
NSURL *appUrl = [NSURL URLWithString:appUrlString];

[_appWebView loadData:htmlData MIMEType:@"text/html" textEncodingName:@"UTF-8" baseURL:appUrl]; 
```

这就是模拟器中显示的内容。

![在此处输入图像描述](../Images/c5608a6b77ea21dbc5e17ec3512963ff.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T07:10:24.697

你应该使用

`NSURL *appUrl = [NSURL fileURLWithPath:appUrlString];`

因为它是本地文件路径。在您的版本中，“appURL”返回零。所以没有设置baseurl。

# java - 有没有办法在 Java 中制作外观通用的按钮？

> ID：12592813
> 
> 赞同：0
> 
> 时间：2012-09-26T00:03:43.307
> 
> 标签：java, swing, jbutton, look-and-feel

> **可能重复：**
> [如何在 Java GUI 编程中获得 Windows 原生外观？](https://stackoverflow.com/questions/11425103/how-to-get-the-windows-native-look-in-java-gui-programming)

是否可以制作一个看起来像默认系统方案的 Java 按钮？例如，看起来像这样的东西？

![在此处输入图像描述](../Images/8210a539d400c3088acffa245269a783.png)

# sqlalchemy - 从单独的文件启动 SQLAlchemy 会话

> ID：12592814
> 
> 赞同：0
> 
> 时间：2012-09-26T00:03:46.750
> 
> 标签：sqlalchemy

我在一个文件中创建了我的模型，并且可以成功地添加和更改在模型声明下的函数中运行时成功提交到数据库的对象。当我将会话和模型类导入单独的脚本时，我可以成功运行查询，但如果我更新对象并运行更新，则数据库不会更新。同样的代码在我定义模型的地方运行时效果很好，我完全不明白为什么会这样。我是否对如何使用和更新数据库感到困惑？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T11:32:16.077

haha, I must have been looking at it too closely for too long. In the snippet of code that wasn't working I was calling session.commit, not session.commit().

# java - Java进程处理：输出+错误流保持正确顺序？

> ID：12592817
> 
> 赞同：1
> 
> 时间：2012-09-26T00:04:09.407
> 
> 标签：java, process, stream

假设我正在运行一个进程，并且我想通过经典技术重定向它的流：

```
ProcessBuilder pb = new ProcessBuilder("C:/folder/script.bat");
Process p = pb.start();
InputStreamReader out = p.getInputStream();
InputStreamReader err = p.getErrorStream();
OutputStreamWriter in = p.getOutputStream(); 
```

现在我的问题是：我想以黑色显示所有输出，以红色显示所有错误，并且我想保持正确的顺序。

*   我想到的第一种方法是使用`pb.redirectErrorStream(true);`，它以正确的顺序合并它们，但不再可能应用不同的颜色。
*   第二种方法是交替检查两个流的新输出。这里的问题是，当输出和错误几乎同时出现时，我无法确定应该先显示哪个。所以在这里我可以显示正确的颜色，但不是以正确的顺序。

所以两者都没有按预期工作。我应该如何以正确的顺序以不同的颜色显示输出/错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T00:07:22.873

您的问题是，使用您的技术，您可以保证阻止一个或另一个流，因为您正在同一个线程上收听它们。您应该在不同的线程上收听它们，并在数据通过它们时简单地显示它们。

# python - Python IndentationError - 如何重构？

> ID：12592820
> 
> 赞同：4
> 
> 时间：2012-09-26T00:05:07.467
> 
> 标签：python, nested-loops

我正在为编程练习做一个[Project Euler](https://projecteuler.net)问题，以便自学。我非常清楚*如何*以数学方式解决问题，*以及*如何以编程方式解决问题。

但是，我必须想出一些疯狂的代码才能做到这一点；100 个嵌套循环和 Python 在 100 个缩进级别上有趣地引发了这个错误，而且可能是正确的：

```
IndentationError: too many levels of indentation

tally = 0
ceiling = 100
for integer_1 in range(0, 100, 1):
    for integer_2 in range(0, 100 - integer_1, 2):
        for integer_3 in range(0, 100 - integer_1 - integer_2, 3):
            for integer_4 ....
                for integer_5 ....
                    etc.
                        etc.
                            all the way to integer_100 
```

我已经通过谷歌寻找解决方案，但这个问题非常罕见，几乎没有关于该主题的文献，我只能找到另一个堆栈溢出问题（[Python IndentationError: too many levels of indentation](https://stackoverflow.com/questions/8439572/python-indentationerror-too-many-levels-of-indentation)），我找不到太多有用的我的问题。

我的问题是 - 有没有办法采用我的解决方案并找到一些解决方法或以一种可行的方式对其进行重构？我真的很难过。

**编辑：**

感谢 nneonneo 的回答，我能够解决这个问题。我的代码在这里仅供寻找正确重构代码的方法的人们将来参考。

```
from time import time
t = time()
count_rec_dict = {}

# for finding ways to sum to 100
def count_rec(cursum, level):
    global count_rec_dict

    # 99 is the last integer that we could be using,
    # so prevent the algorithm from going further. 
    if level == 99:
        if cursum == 100:
            return 1
        else:
            return 0

    res = 0

    for i in xrange(0, 101-cursum, level+1):

        # fetch branch value from the dictionary
        if (cursum+i, level+1) in count_rec_dict:
            res += count_rec_dict[(cursum+i, level+1)]

        # add branch value to the dictionary
        else:
            count_rec_dict[(cursum+i, level+1)] = count_rec(cursum+i, level+1)
            res += count_rec_dict[(cursum+i, level+1)]        

    return res}

print count_rec(0, 0)
print time() - t 
```

它在我的电脑上运行了惊人的 0.041 秒。哇！！！！！我今天学到了一些新东西！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T00:08:30.050

递归解决方案应该做得很好，尽管我确信对于不需要这种操作的问题有一个完全不同的解决方案。

```
def count_rec(cursum, level):
    if level == 100:
        return 1
    res = 0
    for i in xrange(0, 100-cursum, level+1):
        res += count_rec(cursum+i, level+1)
    return res

print count_rec(0, 0) 
```

有趣的是，如果你*记住*这个函数，它实际上会有一个合理的运行时间（这就是*动态编程*的威力）。玩得开心！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T00:12:34.493

避免缩进错误的一种方法是将循环放在单独的函数中，每个函数只嵌套一层。

或者，您可以使用递归一遍又一遍地调用函数，每次都使用更小的范围和更高的嵌套级别。

话虽这么说，无论您如何编码，您的算法都将具有难以置信的长运行时间。你需要一个更好的算法:-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T00:36:50.567

要完全使用您的算法来做到这一点（将每个下一个数字限制为可能适合所需总和的一个），您确实需要递归 - 但真正的蛮力方法可以是单线：

```
sum(sum(i) == 100 for i in itertools.product(xrange(100), repeat=100)) 
```

自然，这将比真正重构您的算法要慢一些（事实上，正如评论中所提到的，它变得难以处理）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T01:29:26.740

最有效的解决方案是基于算术进位的思想。您有最大值和步骤的列表，以及当前值的列表。每次要更新这 100 个变量时，请执行以下操作：

```
inc_index = -1
currentvalue[inc_index] += stepval[inc_index]
# I use >= rather than > here to replicate range()s behaviour that range(0,100) generates numbers from 0 to 99.
while currentvalue[inc_index] >= maxval[inc_index]:
    currentvalue[inc_index] = 0
    inc_index -= 1
    currentvalue[inc_index] += stepval[inc_index]
# now regenerate maxes for all subordinate indices
while inc_index < -1:
    maxval[inc_index + 1] = 100 - sum (currentvalue[:inc_index])
    inc_index += 1 
```

当引发 IndexError 时，您已经完成了循环（用完“数字”可以进入。）

# c++ - C/C++ 分配 DWORD 数组的指针地址

> ID：12592821
> 
> 赞同：0
> 
> 时间：2012-09-26T00:05:29.950
> 
> 标签：c++, c, winapi, visual-c++, portable-executable

我正在编写一个 C/C++ PE 解析库，在其中我使用 DLL 或 exe 来提取有关目录和标题的信息。我的问题是当我提取导出地址并获取函数地址时，我不知道如何使用该地址将其指向具有导出导出函数数量的数组

```
DWORD ExportRVA = PEHeader->optional.data_directory[0].virtual_address;
image_export_directory* Exports = (image_export_directory*)(RVAToOffset(ExportRVA)+BaseAddress);

ExportTable.nNames = Exports->number_of_names;
ExportTable.nFunctions = Exports->number_of_functions;
ExportTable.pFunctions = Exports->address_of_functions;
ExportTable.nNames = Exports->address_of_names;
ExportTable.pNamesOrdinals = Exports->address_of_name_ordinals; 
```

我是否必须为数组分配一个指针，例如

```
DWORD * AddrFunctions; 
```

改变指针地址？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T01:52:28.660

`address_of_functions`和字段分别是实际函数入口点和名称的`address_of_names`RVA 数组的 RVA，而`address_of_name_ordinals`字段是 WORD 值数组的 RVA，例如：

```
#define RVAToPtr(RVA) ( ((LPBYTE)BaseAddress) + ((DWORD)(RVA)) )

image_export_directory* Exports = (image_export_directory*) RVAToPtr(PEHeader->optional.data_directory[0].virtual_address); 

ExportTable.nFunctions = Exports->number_of_functions; 
ExportTable.nNames = Exports->number_of_names; 
ExportTable.pFunctions = (PDWORD) RVAToPtr(Exports->address_of_functions); 
ExportTable.pNames = (PDWORD) RVAToPtr(Exports->address_of_names); 
ExportTable.pNamesOrdinals = (PWORD) RVAToPtr(Exports->address_of_name_ordinals); 

for (DWORD i = 0; i < ExportTable.nFunctions; ++i)
{
    void *FuncPtr = (void*) RVAToPtr(ExportTable.pFunctions[i]);
    char* FuncName = (char*) RVAToPtr(ExportTable.pNames[i]);
    WORD FuncOrdinal = ExportTable.Base + ExportTable.pNamesOrdinals[i]; 
    ...
} 
```

有关详细信息，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/ms809762.aspx)。

# java - 如何在 JAVA 中为音频文件生成 DSA 签名密钥

> ID：12592822
> 
> 赞同：0
> 
> 时间：2012-09-26T00:06:22.820
> 
> 标签：java, dsa

我有一个音频文件（选择最容易使用的扩展名）。如何为 DSA 算法准备数据（此代码中的消息）？

```
String alg = "DSA";
        KeyPairGenerator kg = KeyPairGenerator.getInstance(alg);//pobranie instancji algorytmu "DSA" rzuca wyjatek no such algorithm..
        KeyPair keyPair = kg.genKeyPair(); //pobieramy pare kluczy prywatny i publiczny
        Signature sign = Signature.getInstance(alg); // generowany zostaje podpis implementujacy konkretny algorytm w tym wypadku DSA
        SignedObject so = new SignedObject(message, keyPair.getPrivate(), sign); // podpisywanie otrzymywanej wiadomosci -> message, zwracany jest podpisany obiekt     
        BufferedWriter bw = new BufferedWriter(new FileWriter("wynikDSA.txt")); // tworze nowy bufferred writer ktory umozliwa zapis do pliku
        verify(so,new Czytelnik(keyPair.getPublic()),sign,bw); // weryfikujemy czy klucz publiczny nowoutworzonego czytelnika pasuje do podpisu, przekazujemy bw aby moc zapisac dane do pliku
        bw.write("klucz prywatny " + keyPair.getPrivate()  //wpisywanie do pliku klucza prywatnego i publicznego
                + "\nklucz publiczny " + keyPair.getPublic());
        ShortCuts.addShortcutsIntoTheFile(bw, message); //dopisanie skortow MD5 i SHA-1 do pliku
        System.out.println(keyPair.getPrivate()); //wyspianie na konsoli klucza prywatnego na konsoli, ponizej  publicznego
        System.out.println(keyPair.getPublic());
        bw.close(); 
```

# javascript - 我如何使用 slidetoggle 并一次只允许打开一个 div？

> ID：12592832
> 
> 赞同：3
> 
> 时间：2012-09-26T00:07:56.600
> 
> 标签：javascript, jquery, slidetoggle

代码：[http ://codepen.io/anon/pen/sumIx](http://codepen.io/anon/pen/sumIx)

```
$('.module article').hide();
});
$('.module-content, .module-photo').click(function() {
  for (var i = 0; i < 5; i++) {
     $('.module article').slideUp();
  } $(this).parent().children('article').slideToggle('slow');
}); 
```

如果单击任何框，先前活动的 div 将按预期关闭。

当您尝试关闭同一个处于活动状态的 div 时，它会立即打开。如何保持其他所有内容相同但纠正行为以使其不会重新打开？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T00:18:29.543

试试这个：

```
$('.module-content').click(function() {
   var $this = $(this).closest('section').find('article');
   $('.module article').not($this).slideUp();
   $this.slideToggle('slow');
}); 
```

[http://codepen.io/anon/pen/DBirp](http://codepen.io/anon/pen/DBirp)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-26T00:17:42.073

jQuery 自然地迭代元素集合，因此在这种情况下你的循环是无关紧要的。这是注释的更新代码：

```
$('.module-content').click(function() {
    //stores a reference to the clicked section's article
    var article = $(this).parent().children('article');
    //hides all other articles
    $('.module article').not(article).slideUp();
    //toggles the clicked one
    article.slideToggle('slow');
}); 
```

[http://codepen.io/anon/pen/dgJDr](http://codepen.io/anon/pen/dgJDr)

# c# - 实体框架 5 复杂类型和字段列表中的未知列错误

> ID：12592833
> 
> 赞同：2
> 
> 时间：2012-09-26T00:08:01.890
> 
> 标签：c#, entity-framework

请耐心等待，因为我是 C# 和一般编程的新手。

我正在尝试定义与主体类在同一个表中的复杂类型。基本上，这是一个很好的旧用户和地址示例。

```
public class Customer
{
    [Key]
    public int customerId { get; set; }

    //some attributes

    public string street { get; set; }
    public string city { get; set; }
    public string province { get; set; }
    public string country { get; set; }
    public string postal { get; set; }
} 
```

所以我尝试将地址信息分割成它自己的类：

```
public class Customer
{
    [Key]
    public int customerId { get; set; }

    //some attributes
    public Address address { get; set; }
}

[ComplexType]
public class Address
{
    public string street { get; set; }
    public string city { get; set; }
    public string province { get; set; }
    public string country { get; set; }
    public string postal { get; set; }
} 
```

我没有收到编译错误，当我加载访问 Customer 模型的视图时，我在字段集错误中收到一个未知列。

> “字段列表”中的未知列“Extent1.address_street”

我基本上遵循了这个例子：[http://weblogs.asp.net/manavi/archive/2010/12/11/entity-association-mapping-with-code-first-part-1-one-to-one-associations。 aspx](http://weblogs.asp.net/manavi/archive/2010/12/11/entity-association-mapping-with-code-first-part-1-one-to-one-associations.aspx)

EF5 有什么我遗漏的东西或有什么不同吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T14:37:20.120

默认情况下，EF 需要格式为 {complextypename_propertyname} 的复杂类型的属性列。如果您手动创建表并以不同的方式命名列，则会出现不匹配。您可以尝试相应地重命名列（即街道到address_street）并尝试它是否有效。或者，您应该能够向复杂类型的属性添加一个属性，以告诉 EF 不应使用约定，而是使用您指定的名称（例如，街道属性的 [Column("street")]）。

# node.js - 处理节点中的回调

> ID：12592841
> 
> 赞同：0
> 
> 时间：2012-09-26T00:08:34.220
> 
> 标签：node.js, callback

我仍在学习节点编程....我正在使用 express 构建一个 Web 应用程序，并希望围绕基于事件的非阻塞 I/O 来考虑将来自其他函数的回调嵌套在其他回调中。

关于在任何地方使用回调，这是我试图理解的一个问题：

在大多数情况下，我不能只这样做（crypo 将允许此方法同步工作，因此此示例可以）：

```
user.reset_password_token = require('crypto').randomBytes(32).toString('hex'); 
```

在我看到上面的例子有效之前，我不得不这样做：

```
User.findOne({ email: req.body.username }, function(err, user) {

  crypto.randomBytes(256, function(ex, buf) {
    if (ex) throw ex;
    user.reset_password_token = buf.toString('hex');
  });

  user.save(); // can I do this here?

  //will user.reset_password_token be set here??
  // Or do I need to put all this code into the randomBytes callback...
  //Can I continue programming the .findOne() callback here
    // with the expectation that
  //user.reset_password_token is set?
  //Or am I out of bounds...for the crypto callback to have been called reliably.
}); 
```

如果我在 randomBytes 代码（不在它的回调内）之后调用 user.save() 将始终设置令牌吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T00:17:39.310

```
//will user.reset_password_token be set here? 
```

不。在您的示例中，调用`crypto`是异步完成的，这意味着执行不会停止以让该调用完成，而是会继续在您的`findOne`方法中执行代码。

```
User.findOne({ email: req.body.username }, function(err, user) {

  crypto.randomBytes(256, function(ex, buf) {
    if (ex) throw ex;
    user.reset_password_token = buf.toString('hex');

    // only within this scope will user.reset_password_token be
    // set as expected
    user.save();
  });

  // undefined since this code is called before the crypto call completes
  // (at least when you call crypto async like you have)
  console.log(user.reset_password_token);
}); 
```

# struts2 - Struts 2：是否可以在拦截器中获取 html 内容？

> ID：12592848
> 
> 赞同：1
> 
> 时间：2012-09-26T00:09:31.773
> 
> 标签：struts2, interceptor

我想知道是否可以在拦截器中将 html 内容发送到浏览器？我的目标是获取一个 div 内容并将其转换为 pdf。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T01:27:23.123

我不确定您的问题，此外，如果它们与某些特定操作有关，我不赞成在拦截器中处理此类用例的方法，因为通常拦截器更倾向于横切关注点，并且它们适用于您已配置的整个堆栈，而不是针对某些特定操作。

此外，如果数据特定于操作，则数据将不是线程安全的，据说您仍然可以访问从 UI 发送到您的操作类的参数

```
Map parameters = ActionContext.getContext().getParameters(); 
```

请求参数在 ActionContext 实例上可用，该实例通过 ThreadLocal 可用。

您可以创建自己的拦截器并可以访问以下参数

```
actionInvocation.getInvocationContext().getParameters(); 
```

上面的行将为您提供来自您已调用任何操作的 jsp 页面的所有请求参数。

希望对您有所帮助。

# python - 如何在 Python 中构建游戏神经网络？

> ID：12592857
> 
> 赞同：2
> 
> 时间：2012-09-26T00:10:35.887
> 
> 标签：python, machine-learning, game-theory

我是神经网络初学者。我想通过教计算机下跳棋来学习神经网络的基础知识。其实我想学的游戏是[霸气](http://en.wikipedia.org/wiki/Domineering)和[妖术](http://en.wikipedia.org/wiki/Hex_%28board_game%29)。

这些游戏很容易存储，规则也比国际象棋简单得多，但玩的人并不多。如果我能把这个想法付诸实践，那对于试验[组合博弈论](http://www.math.ucla.edu/~tom/Game_Theory/comb.pdf)将是非常棒的。

[PyBrain](http://pybrain.org/)似乎是 Python 神经网络的明显赢家，但谁能指导我如何为我的游戏任务设置神经网络？谷歌搜索在 2001 年出现了[Blondie24](http://en.wikipedia.org/wiki/Blondie24)，但它使用了一些遗传算法——我不想让事情复杂化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T22:10:11.053

*一旦你用机器学习*（甚至*人工智能*，更确切地说，恕我直言）取代“神经网络”，正如评论正确建议的那样，我认为你最好从[Alpha-beta 剪枝](http://en.wikipedia.org/wiki/Alpha-beta_pruning)、[Minimax 算法](http://en.wikipedia.org/wiki/Minimax)和[分支定界](http://en.wikipedia.org/wiki/Branch_and_bound)思想开始。

基本上 ：

*   在每一步中，您都构建了所有可能的未来树，并使用*评估函数*（例如，棋盘支配、连通性、材料等）评估叶子位置。
*   将结果在树中向上传播，选择你能做出的最好的打法，以及你的对手能做出的最糟糕的打法（对他来说最好的），直到你知道在你所处的位置上该走什么棋。
*   冲洗，重复。如果您有一些好的启发式方法，分支定界可以为您节省大量计算，并且您的程序级别基本上将是它能够搜索游戏树的深度。

这很可能是任何人都会引入新想法的基本框架，所以如果你不熟悉它，那就去吧:-)

# c# - 在通过 .NET 发送的电子邮件中设置 Return-Path 的方法是什么？

> ID：12592859
> 
> 赞同：1
> 
> 时间：2012-09-26T00:10:41.750
> 
> 标签：c#, .net-3.5, smtpclient

我目前在我们的应用程序中实现的电子邮件系统面临着很多问题。有很多电子邮件从应用程序中退出并退回。这里我的 Return-Path 集默认是从地址。

如何将 Return-Path 设置为bounce@xxx.com？我尝试在标题中设置相同的内容，但它不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T00:52:41.507

我认为您想要做的是在 MailMessage 对象上设置 Sender 和 From 属性。Sender 属性应该是您希望退回邮件的地址，而 From 属性应该是您希望邮件出现的地址（在成功传递的情况下）。

# c# - 如何自动将某些内容添加到 ToolStripMenu，然后阅读该项目的文本？

> ID：12592861
> 
> 赞同：0
> 
> 时间：2012-09-26T00:10:52.540
> 
> 标签：c#, .net, toolstripmenu

比如说，我有一个 ToolStripMenu。我已经制作了一个标签（我们称之为下载），并希望自动制作它的子条（ [“在此处输入”部分）。](http://puu.sh/18EPS)我希望它是字符串`downloadedString`的文本。然后，稍后，当它被点击时，我希望它触发：

```
Process.Start("google.com/" + Text of the substrip clicked); 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T00:35:05.263

您可以通过`ToolStripMenuItem`.

**第 1 部分 - 以编程方式添加菜单项**

只需添加一个新`ToolStripMenuItem`的，`MenuStrip`这样：

```
ToolStripMenuItem mi = new ToolStripMenuItem("whatever");
mi.Click += new EventHandler(menuItemHandler_Click);

menuStrip1.Items.Add(mi); 
```

它们都可以引用相同的事件处理程序（见下文）。

**第 2 部分 - 启动您的流程的事件处理程序**

事件处理程序将使用单击的菜单项的文本启动该过程：

```
private void menuItemHandler_Click(object sender, EventArgs e)
{
    Process.Start("google.com/" + (sender as ToolStripMenuItem).Text);
} 
```

根据上面的代码，`Process.Start()`将`google.com/whatever`作为参数接收。

# c++ - 纯虚继承、多重继承、C4505

> ID：12592865
> 
> 赞同：6
> 
> 时间：2012-09-26T00:12:14.697
> 
> 标签：c++, destructor, multiple-inheritance, pure-virtual

所以我有一个没有抽象方法的抽象基类。为了强制执行抽象，我将（非平凡的）析构函数声明为纯虚拟：

```
class AbstractClass
{
public:
  AbstractClass()
  {
    std::wcout << L"AbstractClass::AbstractClass()" << std::endl;
  }
  virtual ~AbstractClass() = 0
  {
    std::wcout << L"AbstractClass::~AbstractClass()" << std::endl;
  }
};

class ConcreteClass : public AbstractClass
{
public:
  ConcreteClass()
  {
    std::wcout << L"ConcreteClass::ConcreteClass()" << std::endl;
  }
  virtual ~ConcreteClass()
  {
    std::wcout << L"ConcreteClass::~ConcreteClass()" << std::endl;
  }
}; 
```

这可以按预期构建和工作；简单定义 ConcreteClass 实例的代码块的输出是

```
    抽象类::抽象类()
    具体类::具体类()
    ConcreteClass::~ConcreteClass()
    AbstractClass::~AbstractClass()

```

现在，当我从另一个用作接口类的类派生 AbstractClass 时，它本身具有（微不足道的）虚拟析构函数（纯或其他），它仍然有效：

```
class IAlpha
{
public:
  virtual ~IAlpha() = 0 {}
};

class AbstractClass : public IAlpha
{
public:
  AbstractClass()
  {
    std::wcout << L"AbstractClass::AbstractClass()" << std::endl;
  }
  virtual ~AbstractClass() = 0
  {
    std::wcout << L"AbstractClass::~AbstractClass()" << std::endl;
  }
};

class ConcreteClass : public AbstractClass
{
public:
  ConcreteClass()
  {
    std::wcout << L"ConcreteClass::ConcreteClass()" << std::endl;
  }
  virtual ~ConcreteClass()
  {
    std::wcout << L"ConcreteClass::~ConcreteClass()" << std::endl;
  }
}; 
```

当我尝试以这种方式实现两个不同的接口时，就会出现问题：

```
class IAlpha
{
public:
  virtual ~IAlpha() = 0 {}
};

class IBeta
{
public:
  virtual ~IBeta() = 0 {}
};

class AbstractClass : public IAlpha, public IBeta
{
public:
  AbstractClass()
  {
    std::wcout << L"AbstractClass::AbstractClass()" << std::endl;
  }
  virtual ~AbstractClass() = 0
  {
    std::wcout << L"AbstractClass::~AbstractClass()" << std::endl;
  }
};

class ConcreteClass : public AbstractClass
{
public:
  ConcreteClass()
  {
    std::wcout << L"ConcreteClass::ConcreteClass()" << std::endl;
  }
  virtual ~ConcreteClass()
  {
    std::wcout << L"ConcreteClass::~ConcreteClass()" << std::endl;
  }
}; 
```

此时，在构建时，我收到以下警告：

```
警告 C4505：“AbstractClass::~AbstractClass”：
未引用的本地函数已被删除
```

然而，奇怪的是，输出仍然显示`AbstractClass::~AbstractClass()`被调用。

这是 MSVC9（VS 2008）中的错误吗？我可以放心地忽略此警告吗？

编辑：我也尝试将纯虚拟方法定义与类定义分开，因为显然`= 0 {}`语法实际上是无效的。不幸的是，无论我是否指定，C4505 仍然出现`inline`。

由于我找不到`#pragma`仅针对这些方法来消除此警告的方法（警告是从代码的其他部分触发的），因此我可能必须从中删除纯虚拟说明符`AbstractClass`并依赖于使构造函数受到保护。这不是一个理想的解决方案，但它胜过重新架构类层次结构以绕过错误警告。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-01T15:36:18.420

这是 MSVC++ 2010 及更早版本中的错误。即使编译器声称已删除代码，代码实际上也会被调用。它似乎已在 MSVC++ 2012 中修复。其他编译器（如 gcc 或 clang）不会发出警告。根据 C++03 标准第 10.4.2 节，语法“... = 0 {...}”是非法的（即使 MSVC++ 没有抱怨），正如已经指出的那样：

> 注意：函数声明不能​​同时提供纯说明符和定义

然而，定义一个纯虚析构函数通常不是非法的，第 12.4.7 节指出：

> 析构函数可以声明为虚拟（10.3）或纯虚拟（10.4）；如果在程序中创建了该类或任何派生类的任何对象，则应定义析构函数。如果一个类有一个带有虚拟析构函数的基类，那么它的析构函数（无论是用户声明的还是隐式声明的）都是虚拟的。

我禁用警告的方法是将以下几行添加到标题中：

```
#if defined(_MSC_VER) && (_MSC_VER <= 1600)
#  pragma warning(disable:4505)
#endif 
```

如果您想在本地更多地禁用警告，那么`#pragma warning( push )`可能`#pragma warning( pop )`会有所帮助。请参阅[http://msdn.microsoft.com/en-us/library/2c8f766e(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/2c8f766e%28v=vs.80%29.aspx)

由于代码似乎被调用，我认为您可以忽略警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T01:16:19.977

代码不应编译。纯虚函数不能在类定义中定义。将定义移到类之外：

```
struct IAlpha {
  virtual ~IAlpha() = 0;
};
inline IAlpha::~IAlpha() {}
// similarly for the rest. 
```

除此之外，代码是正确的，应该可以编译。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-01T16:15:32.147

您不能将虚函数定义为内联。

因为内联在编译中。虚拟在运行时。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T00:38:38.147

您是否尝试以非内联方式定义析构函数？也许警告与此有关。

比如[这段代码](http://codepad.org/AxK3FCrf)。

# iphone - 自动调整 UIview 的大小和位置

> ID：12592866
> 
> 赞同：1
> 
> 时间：2012-09-26T00:12:16.257
> 
> 标签：iphone, objective-c, xcode, ipad, uiview

Xode 是否可以在给定的框架内自动调整 UIview 的大小和位置？我希望用动画来完成。我可以手动执行此操作，当然只需使用动画更改框架，但这是唯一的方法吗？

[http://imgur.com/TfEem](http://imgur.com/TfEem)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T00:31:14.170

如果你想在不同的条件下隐藏/显示一些视图，你必须使用代码来做到这一点。但是如果你只是想让 Xcode 帮助你在给定的框架内自动调整 UIViews 的大小和位置，你可以在 Xcode 的 size inspector->constraints 中尝试这个。

# java - Java 在构建路径上添加和访问资源

> ID：12592867
> 
> 赞同：0
> 
> 时间：2012-09-26T00:12:16.777
> 
> 标签：java, classpath

我正在设置一个项目，该项目需要几个随应用程序一起提供的非 java 资源，我在项目根目录中创建了一个目录结构。

```
src/                           - Java packages and classes
resource/media/icons/          - Button, form and table icons
resource/media/images/         - Report and application images
resource/media/reports/        - Jasper report templates
resource/help/                 - Help documentation 
```

我通过将资源目录添加为源文件夹将其添加到类路径中，这是正确的方法吗？

当我导出项目时，资源是否也会导出？

我应该如何访问这些文件，访问 resource/media/reports/ 目录中的 ShippintTimes 报告模板的 URL 是什么？

```
// Current example accessing a report
String reportUrl = "resource/media/reports/ShippintTimes.jasper" 
```

我需要做些什么来使 URL 操作系统独立吗？

关于放置非 java 应用程序资源的位置是否有任何约定？

我知道有几个问题，关于我应该如何构建我的项目报告的任何提示帮助或示例将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-11-30T06:45:15.777

只要您的资源文件夹位于类路径中，您就可以通过以下方式引用项目中的资源：

```
getClass().getResourceAsStream("path"); 
```

请注意，这里的绝对路径没有 / 开头，而相对路径以 / 开头
请参阅：[File loading by getClass().getResource()](https://stackoverflow.com/a/14089228/10330374)

# silverstripe - 前端的 CMS 链接未转换即 href=[sitetree_link_id=xx]

> ID：12592872
> 
> 赞同：3
> 
> 时间：2012-09-26T00:12:54.533
> 
> 标签：silverstripe

在我们的一个运行 2.4 的旧站点上发现了一个问题，当用户在 CMS 内容中创建链接，选择要链接到的现有页面时，该链接没有被转换为前端的实际 URL 和所有链接以以下格式通过`<a href="[sitetree_link_id=12]">`

什么会导致这种情况，我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T22:35:54.063

标签看起来设置不正确。应该是`[sitetree_link id=12]`，不是`[sitetree_link_id=12]`。

我们后来添加了对解析器的支持，`[sitetree_link,id=12]`以便链接不需要包含空格，但我不记得是在 2.4 中还是仅在 3.0+ 中。

您能否确认您的 WYSIWYG 插入是否存在错误`_`？如果是这样，您可能需要检查`handleaction_insert`函数`tiny_mce_imporvements.js`以确认它有这样的一行：

```
case 'internal':
    href = '[sitetree_link id=' + this.elements.internal.value + ']'; 
```

如果插入的链接实际上没有错误`_`但没有被解析，那么请尝试检查您的 sapphire/_config.php 文件：

```
ShortcodeParser::get('default')->register('sitetree_link', array('SiteTree', 'link_shortcode_handler')); 
```

如果您的网站对所有内容进行了更改，`ShortcodeParser`您可能无意中关闭了`sitetree_link`支持。

如果所有这些看起来都井井有条，那么可能由于某种原因没有调用 ShortcodeParser。在`HTMLText::forTemplate()`中，放置一个调试语句（我喜欢`die("I got here!");`）以确认 HTMLText::forTemplate() 实际上被调用了。如果不是，您可能需要在对 Content 变量进行一些预处理时手动调用它。而不是这个：

```
$content = $this->Content; 
```

做这个：

```
$content = $this->obj('Content')->forTemplate(); 
```

我希望其中一个答案有所帮助。无论哪种方式，如果您可以回帖，那就太好了，这样我们就可以隔离造成这种情况的原因。它可能有助于我们使 API 在 SilverStripe 3.1 中更易于使用。

# function - F# 值不是函数错误

> ID：12592873
> 
> 赞同：1
> 
> 时间：2012-09-26T00:12:58.747
> 
> 标签：function, f#, pattern-matching

今天继续我的 F# 学习，尝试使用递归重新创建一个简单的二分法，这里我使用 MathNet 库从 Beta 发行版继承。

我收到有关“搜索”功能（二进制搜索方法）的错误消息`the value is not a function and cannot be applied`。

```
//Beta class inheriting from MathNet Beta distribution
//Extends the class by implementing an InverseCDF function

type newBeta(alpha:double, beta:double) =
    inherit MathNet.Numerics.Distributions.Beta(alpha, beta)

member this.InverseCDF(p: float) =
    let rec search (min: float, max: float, acc: uint32) = 
        let x = (min + max) / 2.0
        let error = 0.001
        let maxiters : uint32 = 1000u
        let cdf = this.CumulativeDistribution(x)

        match cdf, (Math.Abs(cdf - p) < error || acc > maxiters) with   //while statement
        | _ , true                  -> cdf      //auto match cdf and if while statement evaluates true then break and return cdf result
        | p , _                     -> cdf      //if exactly matches p then break and return cdf result
        | p , false when p > cdf    -> search (min) (x) (acc + 1)   //if p > cdf then set max = x and increment then call func with new params
        | p , false when p < cdf    -> search (x) (max) (acc + 1)   //if p < cdf then set min = x and increment then call func with new params

    search (0.0) (1.0) (0)  //Call the bisection method with initial parameters 
```

任何人都可以帮忙吗？同样显然，任何关于如何使其更具“功能性”的输入都会很酷。由于错误，尚未能够运行此测试。我的前 2 个匹配模式看起来很可疑，因为我试图返回`cdf`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T06:00:23.917

正如@John 所说，您的基本错误是您以元组形式声明了该函数，但以咖喱形式使用了它。

我注意到您`cdf`与`p`. 新值将隐藏`p`参数`p`；`this.InverseCDF`因此，该参数不再可用于比较。你居然`cdf`和`cdf`自己比，两个`when`守卫总是`false`，你根本不想要。

一些更正：

1.  从模式匹配中删除`cdf`，因为您只想将其值与 比较`p`，而不是与特定文字匹配。
2.  将两名`when`守卫向上移动。最后一个模式不应该是`when`守卫；在这种情况下，编译器会抱怨不完整的模式匹配。
3.  对（类型为 ）`u`的任何算术运算使用后缀。`acc``unint32`

新`search`功能：

```
let rec search (min: float) (max: float) (acc: uint32) = 
    let x = (min + max) / 2.0
    let error = 0.001
    let maxiters : uint32 = 1000u
    let cdf = this.CumulativeDistribution(x)

    match abs(cdf - p) < error || acc > maxiters with   // while statement
    | false when p > cdf    -> search min x (acc + 1u)   // if p > cdf then set max = x and increment then call func with new params
    | false when p < cdf    -> search x max (acc + 1u)   // if p < cdf then set min = x and increment then call func with new params 
    | _                     -> cdf      // if exactly matches p or returns true then break and return cdf result

search 0.0 1.0 0u  // call the bisection method with initial parameters 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-26T00:26:19.740

您的定义是元组风格，而不是咖喱风格 - 只需将其更改为

```
let rec search (min: float) (max: float) (acc: uint32) = 
```

这是因为当您调用该函数时，您使用了 curried 样式`f a b`，但您的定义具有元组样式`f (a,b)`

此外，您的匹配案例并不完全正确 - 最后两种情况永远不会匹配，因为第二种情况会抓住它们 - 您可能想要

```
 match cdf, (Math.Abs(cdf - p) < error || acc > maxiters) with   //while statement
    | _ , true                  -> cdf      //auto match cdf and if while statement evaluates true then break and return cdf result
    | p when p=cdf, _                     -> cdf      //if exactly matches p then break and return cdf result
    | p , false when p > cdf    -> search (min) (x) (acc + 1)   //if p > cdf then set max = x and increment then call func with new params
    | p , false when p < cdf    -> search (x) (max) (acc + 1)   //if p < cdf then set min = x and increment then call func with new params 
```

# recursion - 语言可以自己编写吗？

> ID：12592874
> 
> 赞同：1
> 
> 时间：2012-09-26T00:12:58.767
> 
> 标签：recursion, programming-languages

是否有可能以一种可以自己编写的方式来构建一种语言？你能用c写ac编译器，还是用python写一个python解释器？如果不是，那么源代码本身是否可以重新编写？如果是这样，您是否必须使用其他语言的任何组件（即在 python 脚本中运行编译的 c）？现实中有没有这样的例子？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T02:05:25.613

您正在寻找的关键词是[self-hosting](http://en.wikipedia.org/wiki/Self-hosting)。

> 通常自托管的其他程序包括内核、汇编程序、shell 和修订控制软件。
> 
> 自托管的编程语言包括 Ada、BASIC、C、CoffeeScript、F#、FASM、Forth、Haskell、Java、Lisp、Modula-2、OCaml、Oberon、Pascal、Python、Scala、Smalltalk 和 Vala。

另一个不在我使用过的列表中的编译器是[Mercury](http://www.mercury.csse.unimelb.edu.au/)。

以及相关术语[Self-interpreter](http://en.wikipedia.org/wiki/Self-interpreter)。

> 有一些语言有一个特别好的和优雅的自我解释器，比如 Lisp 或 Prolog。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T00:15:34.893

是的

[gcc C编译器是用C本身编写的吗？](https://stackoverflow.com/questions/5657454/is-gcc-c-compiler-written-in-c-itself)

它只需要前任。在某些时候，有人在 asm 中编写了一个没有编译器的编译器。我会假设。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T01:50:26.910

是的，一种方法是编写一个[元循环解释器](http://en.wikipedia.org/wiki/Metacircular_interpreter)，它的优点是非常容易理解或编写一个简单的解释器。这方面最著名的教科书示例可能是[计算机程序的结构和解释的](http://mitpress.mit.edu/sicp/full-text/book/book.html)第 4 章，它探讨了如何实现 Scheme 的一个子集。虽然如果您想了解一般的解释器和编程语言，我认为[PLAI](http://www.cs.brown.edu/~sk/Publications/Books/ProgLangs/2007-04-26/)是一个更好的起点。

对于生产语言，您通常需要的不仅仅是一个简单的解释器，但您仍然可以在某些时候引导实现。对于最近的一个例子，[Rust](http://www.rust-lang.org/)编译器是自己编写的。

# sockets - SOCK_STREAM 套接字是否会剥离数据周围的 TCP 位？

> ID：12592878
> 
> 赞同：0
> 
> 时间：2012-09-26T00:13:19.157
> 
> 标签：sockets, tcp, network-programming, bind

有人可以解释`socket(AF_INET, SOCK_STREAM, 0)`当您将其绑定到接口时实际执行的操作吗？

我有一个像这样在接口上侦听的套接字，例如，如果我从浏览器执行 http GET，当我`read()`在套接字上执行 a 时，我确实看到缓冲区从“GET /HTTP ...”开始数据与我的wireshark捕获相同事物的HTTP协议数据包中显示的数据相同。为什么我没有看到 TCP SYN、SYN/ACK、ACK 数据包作为缓冲区的开始？

我认为在接口上拥有这个套接字会向我展示所有内容，但它似乎只显示数据，而不是它周围的元数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T00:14:24.383

这是一个`SOCK_STREAM`插座。它在两个应用程序之间提供字节流。您*永远不会*在字节流套接字上看到数据包，只会看到字节流。字节流通过数据包交换发生是应用程序不可见的实现细节。（如果两个端点都在同一台机器上，甚至可能会被绕过。）

# java - 忽略 EclEmma 中单元测试的代码覆盖率

> ID：12592881
> 
> 赞同：39
> 
> 时间：2012-09-26T00:14:02.847
> 
> 标签：java, eclipse, code-coverage, eclemma

我已将[EclEmma 配置为不检测](http://emma.sourceforge.net/reference/ch02s06s02.html#n11405)运行良好的单元测试。但是，编辑器仍然会突出显示未覆盖的测试代码。我不想在单元测试中突出显示，因为它们没有检测到覆盖率。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2014-03-20T02:10:30.710

我做了以下步骤：

1.  转到**Preferences->Java->Code Coverage**和
2.  将**“仅路径条目匹配”**选项设置为`src/main/java`

它似乎工作得很好。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-10-04T22:46:39.173

“首选项”窗口中的包含/排除过滤器设置适用于所有项目的类名/包模式。要在文件夹/路径级别控制文件，您必须为每个项目设置它。

1.  右键单击项目
2.  选择**覆盖范围为 | 覆盖配置...**
3.  选择**Junit**子树下的项目
4.  选择右侧的**Coverage选项卡**
5.  取消选中包含您的测试的文件夹，例如，`src/test/java`
6.  单击**应用**
7.  单击**关闭**（或**Coverage**立即运行）

这些设置将在您以后每次运行覆盖时应用，而无需打开配置窗口。

# javascript - 从 WordPress 插件 + js 中的多个文件访问变量

> ID：12592883
> 
> 赞同：0
> 
> 时间：2012-09-26T00:14:32.623
> 
> 标签：javascript, wordpress, variables, plugins

大家好，我在 WordPress 插件开发中遇到问题...

基本上插件有

*   main_file.php
*   一个file2.php
*   和一个js文件

在主文件中，我定义了一些数据，我可以使用 get_option(xx); 来检索它们；main_file.php 还附加了一个调用 file2.php 的 js

我需要访问我在 file2.php 中设置到 main_file.php 中的一些数据，但是全局不起作用，并且 get_option 也给了我一个内部错误。

你有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:46:02.230

我不确定这是正确的方法，如果它安全......

但是经过很长时间我发现

```
include_once('../../../wp-config.php');
include_once('../../../wp-load.php');
include_once('../../../wp-includes/wp-db.php'); 
```

允许我访问 get_option(variable) sithin file2.php 等，通过 ajax 使用 js 访问它。

希望这对其他人有用，请不要犹豫提出进一步的方法。干杯

# objective-c - UISlider 和 CIFilter 使用过多导致应用崩溃

> ID：12592884
> 
> 赞同：2
> 
> 时间：2012-09-26T00:14:36.473
> 
> 标签：objective-c, ios, uislider, core-image, cifilter

我试图让用户选择使用几个滑块来编辑色调和亮度，这些滑块使用 CIFilters 来影响 UIImageView 中的图像。

我让它工作得很好，但有一个问题：如果滑块使用过多，内存警告开始弹出，然后，如果用户在那之后继续尝试，应用程序退出，但没有崩溃日志（？？？对此超级困惑）。

我对编程还是很陌生，尤其是对内存管理很陌生，但希望这里有人可以提供帮助。

这是我的代码：

在我的 .h 文件中：

```
@property (weak, nonatomic) IBOutlet UISlider *hueSlider;
@property (weak, nonatomic) IBOutlet UISlider *brightnessSlider;

@property (weak, nonatomic) CIImage *outputImage;
@property (strong, nonatomic) CIFilter *hueFilter;
@property (strong, nonatomic) CIFilter *brightnessFilter;
@property (strong, nonatomic) CIContext *ccontext;
@property (strong, nonatomic) CIImage *inputImage;

- (IBAction)hueValueChangedAction:(id)sender;
- (IBAction)brightnessValueChangedAction:(id)sender; 
```

而且我还有一个定义为“imageFilterUpdating”的实例 BOOL

以下是 .m 的相关部分：

```
- (IBAction)hueValueChangedAction:(id)sender {
    if (!imageFilterUpdating) {
        [self performSelectorInBackground:@selector(sliderValueChanged) withObject:nil];
    }
}

- (IBAction)brightnessValueChangedAction:(id)sender {
    if (!imageFilterUpdating) {
        [self performSelectorInBackground:@selector(sliderValueChanged) withObject:nil];
    }
}

- (void)sliderValueChanged {
    imageFilterUpdating = YES;

    if (inputImage == nil)
        inputImage = [[CIImage alloc] initWithImage:self.imageWithoutOverlayView.image];

    if (brightnessFilter == nil) {
        brightnessFilter = [CIFilter filterWithName:@"CIExposureAdjust"];
        [brightnessFilter setDefaults];
        [brightnessFilter setValue: inputImage forKey: @"inputImage"];
    }

    [brightnessFilter setValue: [NSNumber numberWithFloat:self.brightnessSlider.value] forKey: @"inputEV"];

    [self setOutputImage:[brightnessFilter valueForKey: @"outputImage"]];

    if (ccontext == nil)
        ccontext = [CIContext contextWithOptions:nil];

    CIImage *editedInputImage = [[CIImage alloc] initWithCGImage:[ccontext
                                                              createCGImage:outputImage
                                                              fromRect:outputImage.extent]];

    if (hueFilter == nil) {
        hueFilter = [CIFilter filterWithName:@"CIHueAdjust"];
        [hueFilter setDefaults];
    }
    [hueFilter setValue: editedInputImage forKey: @"inputImage"];
    [hueFilter setValue: [NSNumber numberWithFloat:self.hueSlider.value] forKey: @"inputAngle"];

    [self setOutputImage:[hueFilter valueForKey: @"outputImage"]];

    UIImage *endImage = [[UIImage alloc] initWithCGImage:[ccontext
                                                      createCGImage:outputImage
                                                      fromRect:outputImage.extent]];
    self.imageWithoutOverlayView.image = endImage;

    [self setOutputImage:nil];
    imageFilterUpdating = NO;
}

- (void)didReceiveMemoryWarning {
    self.brightnessSlider.enabled = NO;
    self.hueSlider.enabled = NO;
    [super didReceiveMemoryWarning];

    while (imageFilterUpdating); // this is because if you set the other parts nil in the middle of updating the image filter, the app crashes
    [self setHueFilter:nil];
    [self setBrightnessFilter:nil];
    [self setCcontext:nil];
    [self setOutputImage:nil];
    self.brightnessSlider.enabled = YES;
    self.hueSlider.enabled = YES;
} 
```

谁能帮我更有效地清理内存，以便用户可以无限使用滑块？否则，此代码一切正常。

我已经尝试过尽可能分配/初始化东西，因为我在很多地方读到 ARC 比使用 [UIImage imageNamed:@""] 之类的东西要好得多，而且似乎帮助了一些人，但经过大量编辑后，该应用程序仍然崩溃。我也开始重用实例变量，而不是每次运行方法时都创建新变量，这似乎也有帮助，但不是 100%。

UISliders 设置为连续的，这是我不想改变的。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T18:50:31.967

每次运行时，`[ccontext createCGImage:outputImage fromRect:outputImage.extent]`您都会创建一个`CGImageRef`不会自动发布且不受 ARC 管理的文件。将其拉出到它自己的变量中，并`CGImageRelease()`在创建`editedInputImage`.

```
CGImageRef tempImage = [ccontext createCGImage:outputImage fromRect:outputImage.extent];
CIImage *editedInputImage = [[CIImage alloc] initWithCGImage:tempImage];
CGImageRelease(tempImage); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T02:20:13.023

看起来您并没有处理您创建的各种图像。`editedInputImage`你至少需要释放。

# matlab - 使用 matlab 中的 dec2bin() 函数将图像转换为二进制形式

> ID：12592891
> 
> 赞同：-2
> 
> 时间：2012-09-26T00:15:22.697
> 
> 标签：matlab

我尝试使用`dec2bin()`MATLAB 中的函数将图像转换为二进制形式。在这里我得到一个错误显示

> '|| 的操作数 和 && 运算符必须可转换为逻辑标量值'。
> 
> ==> dec2bin 中的错误，如果有的话（d < 0）|| 31 任何（〜isfinite（d））

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T00:33:23.290

您可能想要使用`im2bw`用于转换为二进制图像的函数：

[http://www.mathworks.fr/help/images/ref/im2bw.html;jsessionid=ffd69b1a6ad7ebef254b7cb71ac6](http://www.mathworks.fr/help/images/ref/im2bw.html;jsessionid=ffd69b1a6ad7ebef254b7cb71ac6)

# facebook - 从我的网站分享给 Facebook 上的多个朋友墙

> ID：12592894
> 
> 赞同：0
> 
> 时间：2012-09-26T00:15:32.717
> 
> 标签：facebook, facebook-javascript-sdk, facebook-opengraph

我会尽量清楚地说明我的要求，但由于我仍然不确定我在寻找什么，我可能会觉得很模糊。

我希望我能得到一些帮助，了解允许用户将带有附加图像的链接发布到他们在 Facebook 上选择的朋友的墙上的最佳方法。有很多方法和答案，但我无法确定什么是最好的。

谢谢你帮我看清楚

标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T00:22:48.057

如果您使用 JS 工具包，这完全取决于用户。

点击您的问题下方的分享。然后，当弹出对话框时，您可以选择在哪里共享它。

所以解决方案1）把它留在用户手中。

如果你想强迫他们在朋友墙上分享，你需要找到可以做这个或 DIY 的东西。

DIY 方法是让您的站点 /app 进行 oAuth 身份验证。将其传递给 oauth 库，然后可能使用[https://github.com/mbrevoort/jquery-facebook-multi-friend-selector](https://github.com/mbrevoort/jquery-facebook-multi-friend-selector)列出用户朋友。

然后发出适当的图表请求以发布到每个人的时间线。

选择是你的，但这是我所知道的两种方法。

# facebook - Facebook SDK 3.1 presentShareDialogModally 失败

> ID：12592898
> 
> 赞同：5
> 
> 时间：2012-09-26T00:15:57.820
> 
> 标签：facebook, ios6, facebook-ios-sdk

我正在尝试在 iOS 6 上为 Facebook 测试新的内置共享“表格”，但是当我运行示例代码时，它没有显示表格。相反，它为我发布了一个状态，而不显示它首先要发布的内容。我还以为 Facebook 不允许你再把话放在用户嘴里？控制台打印此错误：HelloFacebookSample Error: HTTP status code: 400

我有 XCode 4.5 和 iOS 模拟器 6.0 和 Facebook SDK 3.1

我正在关注这个：http: [//developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/3.1/](http://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/3.1/)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-01T21:26:23.103

您是否在设备/模拟器上设置了 Facebook 帐户（在 Settings-> Facebook 下）？

仅当应用程序在 ios 6 上运行并且用户通过 ios 6 Facebook 帐户进行身份验证时，才会显示本机工作表对话框。否则，处理程序会报告该错误并`presentShareDialogModallyFrom`返回“NO”。此外，`FBNativeDialogResult result`处理程序中的 将等于`FBNativeDialogResultError`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T11:16:32.380

您缺少一些必需的框架：

AdSupport.framework

帐户框架

社会框架

```
BOOL displayedNativeDialog =
[FBNativeDialogs
 presentShareDialogModallyFrom:self
 initialText:self.shareText
 image:nil
 url:nil
 handler:^(FBNativeDialogResult result, NSError *error) {
     if (error) {
         /* handle failure */
         NSLog(@"error:%@, %@", error, [error localizedDescription]);
     } else {
         if (result == FBNativeDialogResultSucceeded) {
             /* handle success */
             NSLog(@"handle success");
         } else {
             /* handle user cancel */
             NSLog(@"user cancel");
         }
     }
 }];
if (!displayedNativeDialog) {
    /* handle fallback to native dialog  */
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T10:32:03.913

确保您没有使用已弃用的方法（即 openActiveSessionWithPermissions 而不是较新的 openActiveSessionWithReadPermissions/openActiveSessionWithWritePermissions）打开会话，否则 facebook sdk 不会使用本机 facebook 集成（即本机对话框）

# spring - SpringData Neo4J - 存储库不会改变@GraphId？

> ID：12592899
> 
> 赞同：0
> 
> 时间：2012-09-26T00:16:17.803
> 
> 标签：spring, neo4j, spring-data-neo4j

我升级到 Spring 3.1.2、Neo4J 1.8.RC1 和 SpringData 2.1.0.RC3 并遇到以下问题。

在解释问题之前，这是我的应用程序上下文的一部分：

```
<!-- Neo4J -->
<neo4j:config storeDirectory="target/graph.db" entityManagerFactory="entityManagerFactory"/>
<neo4j:repositories base-package="***.repository"/>

<!-- H2 -->
<jdbc:embedded-database type="H2" id="accountDataSource">
    <jdbc:script location="classpath:scripts/schema.sql" separator=";"/>
</jdbc:embedded-database>

<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="accountDataSource" />
    <property name="packagesToScan" value="***.domain" />
    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
            <property name="generateDdl" value="false" />
            <property name="showSql" value="false" />
            <property name="databasePlatform" value="${database.dialect}" />
        </bean>
    </property>
</bean>

<!-- transactions -->
<bean class="org.springframework.orm.jpa.JpaTransactionManager" id="transactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory" />
</bean>

<tx:annotation-driven mode="aspectj" /> 
```

我运行了一个非常基本的测试：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration("classpath:devinlove-core.xml")
@Transactional
public class MascotRepositoryTest {

    @Autowired
    private MascotRepository mascotRepository;
    private Mascot mascot;

    @Before
    public void setup() {
        mascot = new Mascot();
        mascot.setName("Tux");
    }

    @Test
    public void when_inserting_then_retrievable() {
        assertThat(mascotRepository).isNotNull();
        mascotRepository.save(mascot);
        assertThat(mascot.getId()).isGreaterThan(0L);
    }
} 
```

并且测试因 NPE 而失败。为什么保存操作后吉祥物ID仍然为空？

MascotRepository 定义如下：

```
public interface MascotRepository extends GraphRepository<Mascot> {} 
```

Mascot 本身是一个非常基本的 NodeEntity：

```
@NodeEntity
@TypeAlias("mascot")
public class Mascot {
    @GraphId
    private Long id;

    @Indexed(indexType= FULLTEXT, indexName = "mascotSearch")
    private String name;

    public Long getId() {
        return id;
    }

    public String getName() {
        return name;
    }

    public void setName(final String name) {
        this.name = name;
    }

    @Override
    public String toString() {
        return "Mascot{" +
            "id=" + id +
            ", name='" + name + '\'' +
            '}';
    }
} 
```

我不知道这是否与问题有关，但我的 NodeEntity 之一是部分的，因此被 AspectJ 修改（以添加基本的 ActiveRecord 方法）。您能否确认仅以这种方式修改了部分 NodeEntities 而不是纯 Neo4J 实体？如果不是，它会导致与存储库发生冲突吗？

如果您有任何想法，请提前致谢！罗尔夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:02:59.600

我认为 transactionManager bean 的正确定义是这样的：

```
<bean id="jpaTransactionManager"
        class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory"/>
</bean>
<bean id="jtaTransactionManager"
        class="org.springframework.transaction.jta.JtaTransactionManager">
    <property name="transactionManager">
        <bean class="org.neo4j.kernel.impl.transaction.SpringTransactionManager">
            <constructor-arg ref="graphDatabaseService" />
        </bean>
    </property>
    <property name="userTransaction">
        <bean  class="org.neo4j.kernel.impl.transaction.UserTransactionImpl">
            <constructor-arg ref="graphDatabaseService" />
        </bean>
    </property>
</bean>
<bean id="transactionManager"
        class="org.springframework.data.neo4j.transaction.ChainedTransactionManager">
    <constructor-arg>
        <list>
            <ref bean="jpaTransactionManager"/>
            <ref bean="jtaTransactionManager"/>
        </list>
    </constructor-arg>
</bean>

<tx:annotation-driven mode="aspectj" transaction-manager="transactionManager"/> 
```

# javascript - jquery remove 导致 mvc3 post 失败

> ID：12592907
> 
> 赞同：0
> 
> 时间：2012-09-26T00:17:09.820
> 
> 标签：javascript, jquery, asp.net-mvc-3, post

我有一个动态生成的行的 HTML 表（使用 MVC3 的 EditorFor）。用户在表格中填写数据（逐行），然后将表单提交到服务器（通过 MVC3 HTML 表单）。用户可以通过按下在 TR 元素上调用 $(tableRow).remove() 的按钮来删除行，然后调用从数据库中删除该行的异步服务器方法。

我发现如果我在表中有 5 行，然后删除第三行然后提交，则服务器方法会接收第 1 行和第 2 行，但会丢失其他行（原始的第 4 行和第 5 行）。

我尝试在线搜索回发为什么会收到前两行而错过最后两行，但我能找到的所有答案都围绕着我没有使用的 JQuery 帖子。

任何帮助或方向都会很棒，如果我需要澄清任何事情，请告诉我。

编辑：从我的项目中添加适用于该问题的代码。如果您需要更多上下文代码，请告诉我，我会添加它。

```
//////////////// VIEW ////////////////
// model info and initialization logic
@using (Html.BeginForm("EditTimesheet", "ControllerName", FormMethod.Post, new { enctype = "multipart/form-data", id = "editTimesheet" }))
{
@Html.ValidationSummary(true)
<fieldset>
<table width="100%">
<tr>
    <td colspan="14" align="right">
    // lots of code
    </td>
</tr>
@Html.EditorFor(m => m.Rows)
<tr>
    <td colspan="14" align="right">
    // lots of code
    </td>
</tr>
// closing statements

//////////////// EditorFor ////////////////
// model info and initialization logic
<tr class="timesheet-row">
    <td>
        <a href='#'>
            <img src='@Url.Content("~/Content/Images/delete.gif")' 
                     width='17' height='17' style='border: 0;' 
                     onclick="DeleteRow(this, @Model.RowId)" />
        </a>
    </td>  
    // other td's
</tr>

//////////////// JS file ////////////////
function DeleteRow(box, rowId)
{
    $(box).closest(".timesheet-row").remove();

    // HACK: despicable, detestable HACK!
    var url = deleteRowUrl;
    url += '?rowId=' + rowId;
    var ajaxData = {
        type: "POST",
        url: url,
        dataType: "json",
        contentType: "application/json; charset=utf-8",
        data: null,
        success: null,
        error: function (error) {
            alert("There was an error posting the data to the server: " + error.responseText);
        }
    };
    $.ajax(ajaxData);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T15:43:00.727

当您删除一行时，您将在集合中名称的索引中创建*孔*，并且默认模型绑定器停止工作，因为您不再遵守预期的格式。

因此，而不是具有以下顺序值：

```
<input type="text" name="Items[0].Id" value="1" />
<input type="text" name="Items[1].Id" value="2" />
<input type="text" name="Items[2].Id" value="3" />
<input type="text" name="Items[3].Id" value="4" />
<input type="text" name="Items[4].Id" value="5" /> 
```

如果您删除 TR 元素上的第三行，`$(tableRow).remove()`您最终会得到：

```
<input type="text" name="Items[0].Id" value="1" />
<input type="text" name="Items[1].Id" value="2" />
<input type="text" name="Items[3].Id" value="4" />
<input type="text" name="Items[4].Id" value="5" /> 
```

看到问题了吗？

下面[`an article`](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)说明了如何通过使用一个名为的自定义帮助程序来解决此问题，该帮助`Html.BeginCollectionItem`程序在集合的输入字段的名称中使用 GUID 而不是整数索引。还可以查看 Phil Haacks [`article`](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)，了解默认模型绑定器希望您的字段被命名的语法。最后有一节称为*非序列索引*，他在其中介绍了如何做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T02:46:06.367

听起来您的表单的一部分正在被删除。

1.  [检查 DOM](http://en.wikipedia.org/wiki/DOM_Inspector)
2.  找到你的表格
3.  删除一行，看看有什么变化

# javascript - 在 Derived.prototype = new Base 使用“new”关键字的原因是什么

> ID：12592913
> 
> 赞同：50
> 
> 时间：2012-09-26T00:17:47.843
> 
> 标签：javascript, constructor, prototype

以下代码有什么作用：

```
WeatherWidget.prototype = new Widget; 
```

where`Widget`是一个构造函数，我想用一个新函数来扩展 Widget 'class' `WeatherWidget`。

关键字在那里做什么**`new`**，如果它被遗漏会发生什么？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-09-26T01:15:55.723

```
WeatherWidget.prototype = new Widget; 
```

`new`关键字`Widget`作为构造函数调用，并将返回值分配给属性`prototype`。（如果省略，除非添加参数列表，否则`new`不会调用。但是，以这种方式调用可能是不可能的。如果它不是严格模式代码并且实现是，它肯定有可能*破坏全局命名空间*那里符合 ECMAScript Ed. 5.x，因为 then在构造函数中将引用 ECMAScript 的全局对象。）`Widget``()``Widget`*`this`*

 *但这种方法实际上来自[旧的 Netscape JavaScript 1.3 指南](http://docs.oracle.com/cd/E19957-01/816-6409-10/obj2.htm#1008404)（反映在 Oracle，以前的 Sun）中的一个[非常](https://www.google.com/search?q=%22prototype+%3D+new%22&filter=0) [*糟糕的例子。*](http://docs.oracle.com/cd/E19957-01/816-6409-10/obj2.htm#1008404)

这样，您的`WeatherWidget`实例都将继承自*同一个* `Widget`实例。原型链将是：

```
[new WeatherWidget()] → [new Widget()] → [Widget.prototype] → … 
```

这可能很有用，但大多数时候您不希望它发生。您不应该在此处这样做，除非您希望所有`WeatherWidget`实例*在它们之间共享它们*从该实例继承的*属性值*`Widget`，并且只能*通过它*，从`Widget.prototype`. 另一个问题是您需要以这种方式调用父构造函数，这可能不允许像您那样在没有参数的情况下调用，或者无法正确初始化。它当然与模拟基于类的继承毫无关系，例如从 Java 中。

在这些基于原型的语言中实现基于类的继承的正确方法是（最初由[Lasse Reichstein Nielsen`comp.lang.javascript`在 2003 年设计，用于克隆对象](https://groups.google.com/group/comp.lang.javascript/msg/5d06e72e55d5bf11)）：

```
function Dummy () {}
Dummy.prototype = Widget.prototype;
WeatherWidget.prototype = new Dummy();
WeatherWidget.prototype.constructor = WeatherWidget; 
```

原型属性也应该是固定的`constructor`，这样你的`WeatherWidget`实例`w`就会`w.constructor === WeatherWidget`像预期的那样，而不是`w.constructor === Widget`. 但是，请注意，它在之后是可枚举的。

这样，`WeatherWidget`实例将通过原型链继承属性，但不会在它们之间共享属性值，因为它们继承自`Widget.prototype`没有`Dummy`自己的属性：

```
[new WeatherWidget()] → [new Dummy()] → [Widget.prototype] → … 
```

在 ECMAScript Ed 的实现中。5 及更高版本，您可以并且应该使用

```
WeatherWidget.prototype = Object.create(Widget.prototype, {
  constructor: {value: WeatherWidget}
}); 
```

反而。这具有额外的优点，即生成的`constructor`属性[不可写、不可枚举或不可配置](http://www.ecma-international.org/ecma-262/5.1/#sec-8.6.1)。

仅当您显式调用父构造函数时才会调用它，`WeatherWidget`例如from

```
function WeatherWidget (…)
{
  Widget.apply(this, arguments);
} 
```

另请参阅[`Function.prototype.extend()`](https://github.com/PointedEars/JSX/blob/master/object.js#L3457-L3709)我的[JSX:object.js](https://github.com/PointedEars/JSX/blob/master/object.js)以了解如何概括这一点。使用该代码，它将变成

```
WeatherWidget.extend(Widget); 
```

My`Function.prototype.extend()`接受一个可选的第二个参数，您可以使用它轻松地扩充`WeatherWidget`实例的原型：

```
WeatherWidget.extend(Widget, {
  foo: 42,
  bar: "baz"
}); 
```

相当于

```
WeatherWidget.extend(Widget);
WeatherWidget.prototype.foo = 42;
WeatherWidget.prototype.bar = "baz"; 
```

但是，您仍然需要在子构造函数中显式调用父构造函数；该部分不能合理地自动化。但是我向实例`Function.prototype.extend()`添加了一个属性，这使得它更容易：`_super``Function`

```
function WeatherWidget (…)
{
  WeatherWidget._super.apply(this, arguments);
} 
```

其他人已经实现了类似的扩展。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-26T00:22:10.303

*根据一些奇怪的 Javascript 规则，`new Widget`实际上是调用构造函数而不是返回对构造函数的引用。`var a = new Widget()`这个问题实际上回答了和之间的区别的问题`var a = Widget()`。*

简单来说，`new`关键字告诉 Javascript 在与`Widget`常规函数调用不同的规则集下调用函数。在我脑海中浮现，我记得的是：

1.  创建了一个全新的对象
2.  `Widget`可以使用`this`关键字来引用该对象。
3.  如果`Widget`不返回任何内容，则将创建此新对象。
4.  该对象将继承一些额外的属性，这些属性表明它是由`Widget`用于跟踪属性链的创建的。

如果没有`new`关键字，对小部件的调用将

1.  如果在严格模式下，`this`将设置为`undefined.`
2.  否则，`this`将引用全局对象。`window`（由浏览器调用。）
3.  如果函数没有返回任何东西，那么`undefined`将被返回。

参考： [`new`关键词](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/new)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-26T00:38:56.927

```
WeatherWidget.prototype = new Widget; 
```

确实创建了`Widget`构造函数的一个新实例并将其用作`WeatherWidget`的原型对象。使用[`new`关键字](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/new)创建新对象，将其继承链设置为`Widget.prototype`，并在其上应用构造函数（您可以在其中设置单独的属性'n'方法，或创建私有范围的变量）。

如果没有`new`关键字，它将是将`Widget`函数分配给`prototype`属性 - 这没有任何意义。如果您添加可选的括号（即`Widget()`），它将正常调用该函数，但不是作为新实例的构造函数，而是将全局对象作为上下文。另请参阅[关键字的](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)[参考`this`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)。

请注意，您不应该真正使用此代码。如前所述，它通过调用构造函数创建一个新实例。但目的只是创建一个从 s 原型对象继承的*空*`Widget`对象，而不是实例化某些东西（这可能会造成一些伤害，具体取决于代码）。相反，您应该使用[`Object.create`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create)（或其[流行的 shim](https://stackoverflow.com/q/10141086/1048572)）：

```
WeatherWidget.prototype = Object.create(Widget.prototype); 
```

另请参阅[Javascript 基本继承与 Crockford 原型继承](https://stackoverflow.com/q/11812648/1048572)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-26T00:40:30.343

用简单的英语来说，你正在用另一个类扩展一个类。原型只能是一个对象，因此您将`WeatherWidget`的原型设置为 的新实例`Widget`。如果您删除了`new`关键字，您会将原型设置为不做任何事情的文字构造函数。

```
var Appendages = function(){
  this.legs = 2
};
var Features = function() {
   this.ears = 4;
   this.eyes = 1;
}

// Extend Features class with Appendages class.
Features.prototype = new Appendages;
var sara = new Features();
sara.legs;
// Returns 2. 
```

了解原型可以是任何对象，这样的事情也可以：

```
var appendages = {
  legs : 2
};
var Features = function() {
   this.ears = 4;
   this.eyes = 1;
}

// Extend Features class with Appendages class.
Features.prototype = appendages;
var sara = new Features();
sara.legs;
// Returns 2. 
```

在 JavaScript 中，如果在对象上找不到键，它会检查您扩展它的父对象。因此，您可以像这样动态更改父对象上的项目：

```
var appendages = {
  legs : 2
};
var Features = function() {
   this.ears = 4;
   this.eyes = 1;
}

// Extend Features class with Appendages class.
Features.prototype = appendages;
var sara = new Features();
sara.legs;
// Returns 2.
appendages.hair = true;
sara.hair;
// Returns true. 
```

请注意，这一切都发生在实例化期间，这意味着您不能在创建对象后直接切换原型：

```
var foo = {name : 'bob'};
var bar = {nachos : 'cheese'};
foo.prototype = bar;
foo.nachos;
// undefined 
```

但是，所有现代浏览器都带有这种较新的`__proto__`方法，它允许您这样做：

```
var foo = {name : 'bob'};
var bar = {nachos : 'cheese'};
foo.__proto__ = bar;
foo.nachos
// "cheese" 
```

[在此处](http://javascriptweblog.wordpress.com/2010/06/07/understanding-javascript-prototypes/)阅读有关理解 JavaScript 原型的更多信息。Pivotal Labs 的这篇[文章](http://pivotallabs.com/users/pjaros/blog/articles/1368-javascript-constructors-prototypes-and-the-new-keyword)也很不错。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-26T00:32:22.433

[`new`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/new) 对于*原型*继承很重要；即
用方法创建构造函数

```
var Obj = function(){};
Obj.prototype = {};
Obj.prototype.foo = function(){console.log('foo');}; 
```

制作第二个构造函数来扩展第一个构造函数

```
var ExObj = function(){}; 
```

现在，如果我们在没有 的情况下进行原型制作`new`，

```
ExObj.prototype = Obj;
(new ExObj).foo(); // TypeError: Object #<Object> has no method 'foo' 
```

这意味着我们没有从 的原型继承`Obj`，但是，如果我们使用`new`

```
ExObj.prototype = new Obj();
(new ExObj).foo(); // console logs 'foo' 
```

此外，向 的原型添加新内容`ExObj`不会对其基础进行任何更改，`Obj`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-13T18:23:43.613

JavaScript 函数是“MULTIPLE(2) PERSONALITIES”！！！

它们是具有输入和输出的常规函数​​，我们称之为`function()`.

`new`当我们使用关键字时，它们也是 JS 对象的构造函数。>>>BUT<<< 新创建的对象不是构造函数的实例（如基于类的继承中的类对象）。新对象是`prototype`构造函数属性对象的实例。

然后`WeatherWidget.prototype =`将要继承其属性的对象放入构造函数将创建的对象中，这通常是`new function()`而不是函数。

`instanceof`JavaScript 通过使用关键字命名构造函数创建的对象，它们的实例，在编程社区中造成了巨大的混乱。
`> function f(){}`
`undefined`
`> new f() instanceof f`
`true`*

# perl - 如何确定 Java 进程是否在 Perl 中运行

> ID：12592914
> 
> 赞同：3
> 
> 时间：2012-09-26T00:17:51.773
> 
> 标签：perl, process, grep, ps

我有一套小型 Java 应用程序，它们都编译/打包到`<name-of-the-app>.jar`我的服务器上并在我的服务器上运行。偶尔其中一个会抛出异常，窒息而死。我正在尝试编写一个 quick-n-dirty Perl 脚本，该脚本将定期轮询以查看所有这些可执行 JAR 是否仍在运行，如果其中任何一个不在运行，请给我发送电子邮件并通知我哪个已死。

要手动确定这一点，我必须为`ps -aef | grep <name-of-app>`要检查的每个应用程序运行一个。例如，要查看是否`myapp.jar`作为进程运行，我运行`ps -aef | grep myapp`并查找描述代表 的 JVM 进程的 grep 结果`myapp.jar`。这种手动检查现在变得乏味，是自动化的主要候选者！

我正在尝试实现检查进程是否正在运行的代码。我想让`sub`它接受可执行 JAR 的名称并返回`true`或`false`：

```
sub isAppStillRunning($appName) {
    # Somehow run "ps -aef | grep $appName"

    # Somehow count the number of processes returned by the grep

    # Since grep always returns itself, determine if (count - 1) == 1.
    # If so, return true, otherwise, false.
} 
```

我需要能够传递`sub`应用程序的名称，运行我的正常命令，并计算`grep`. 由于运行 a`grep`始终会产生至少一个结果（`grep`命令本身），因此我需要说明如果 (# of results - 1) 等于 1，那么我们知道应用程序正在运行。

我是 Perl 的新手，很难弄清楚如何实现这个逻辑。到目前为止，这是我最好的尝试：

```
sub isAppStillRunning($appName) {
    # Somehow run "ps -aef | grep $appName"
    @grepResults = `ps -aef | grep $appName`;

    # Somehow count the number of processes returned by the grep
    $grepResultCount = length(@grepResults);

    # Since grep always returns itself, determine if (count - 1) == 1.
    # If so, return true, otherwise, false.
    if(($grepResultCount - 1) == 1)
        true
    else
        false
} 
```

然后从同一个 Perl 脚本中调用该方法，我*想*我会运行：

```
&isAppStillRunning("myapp"); 
```

非常感谢任何有关定义 sub 然后使用正确的应用程序名称调用它的帮助。提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T00:37:46.040

使用CPAN的[Proc::ProcessTable](https://metacpan.org/module/Proc%3a%3aProcessTable)模块会容易十亿倍。这是它可能看起来的示例：

```
use strict;
use warnings;
use Proc::ProcessTable;

...
sub isAppStillRunning { 
    my $appname = shift;
    my $pt = Proc::ProcessTable->new;
    my @procs = grep { $_->fname =~ /$appname/ } @{ $pt->table };

    if ( @procs ) { 
        # we've got at least one proc matching $appname. Hooray!
    } else { 
        # everybody panic!
    }
}

isAppStillRUnning( "myapp" ); 
```

要记住的一些注意事项：

*   打开[`strict`](http://perldoc.perl.org/strict.html)和[`warnings`](http://perldoc.perl.org/warnings.html)。他们是你的朋友。
*   您不使用[原型](http://perldoc.perl.org/perlsub.html#Prototypes)指定子例程参数。（Perl 中的原型做一些完全不同的事情，这是您不想要的。）用于从数组`shift`中获取参数。`@_`
*   不要`&`用来调用子程序；只用它的名字。
*   在标量上下文中评估的数组（包括如果它在一个内部`if`）给你它的大小。[`length`](http://perldoc.perl.org/functions/length.html)不适用于数组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T00:43:35.327

您的 sub 几乎就在那里，但最终的 if-else 构造必须更正，在某些情况下，Perl 习语可以让您的生活更轻松。

### Perl 有原型，但它们很烂

```
sub isAppStillRunning($appName) { 
```

不管用。而是使用

```
sub isAppStillRunning {
  my ($appName) = @_; 
```

`@_`数组保存函数的参数。Perl 有一些简单的原型（`sub name(&$@) {...}`语法），但它们被破坏了，而且是一个高级主题，所以不要使用它们。

### Perl 有内置的 Grep

```
`ps -aef | grep $appName`; 
```

这将返回一 (1) 个字符串，可能包含多行。您可以在换行符处拆分输出，并手动 grep，这比插值变量更安全：

```
my @lines   = split /\n/ `ps -aef`;
my @grepped = grep /$appName/, @lines; 
```

您还可以使用该`open`函数显式打开管道`ps`：

```
my @grepped = ();
open my $ps, '-|', 'ps -aef' or die "can't invocate ps";
while (<$ps>) {
  push @grepped if /$appName/;
} 
```

这是完全平等的，但更好的风格。它从`ps`输出中读取所有行，然后将所有行与您一起推`$appName`送到`@grepped`数组中。

### 标量与列表上下文

Perl 有一个不寻常的东西叫做“上下文”。有*列表上下文*和*标量上下文*。例如，子例程调用采用参数列表 - 因此这些列表（通常）具有列表上下文。相反，连接两个字符串是一个标量上下文。

Arrays behave differently depending on their context. In *list context*, they evaluate to their elements, but in *scalar context*, they evaluate to the number of their elements. So there is no need to manually count elements (or use the `length` function that works on strings).

So we have:

```
 my @array = (1, 2, 3);
 print "Length: ", scalar(@array), "\n"; # prints "Length: 3\n"
 print "Elems: ", @array, "\n";          # prints "Elems: 123\n";
 print "LastIdx: ", $#array, "\n";       # prints "LastIdx: 2\n"; 
```

The last form, `$#array`, is the last index in the array. Unless you meddle with special variables, this is the same as `@array - 1`.

The `scalar` function forces scalar context.

### Perl Has No Booleans

Perl has no boolean data type, and therefore no `true` or `false` keywords. Instead, all values are true, unless stated otherwise. False values are:

空字符串`""`、数字 zero `0`、字符串 zero `"0"`、特殊值`undef`以及其他一些您不会遇到的怪事。

所以一般用`1`as true 和`0`as false。

### if/else 结构需要花括号

所以你可能的意思是：

```
if (TEST) {
  return 1;
} else {
  return 0;
} 
```

这与 相同`return TEST`，其中 TEST 是一个条件。

### 终极还原

使用这些技巧，你的 sub 可以写成

```
sub isAppStillRunning {
   return scalar grep /$_[0]/, (split /\n/, `ps -aef`);
} 
```

这将返回包含您的应用名称的行数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T00:39:45.797

你可以像这样修改你的例程：

```
sub isAppRunning {
    my $appName = shift;
    @grepResults = `ps -aef | grep $appName`;
    my $items = 0;
    for $item(@grepResults){
        $items++;
    }
    return $items;
} 
```

这将遍历 @grepResults 并允许您在必要时检查 $item。

像这样调用它应该返回进程数：

```
print(isAppRunning('myapp') . "\n"); 
```

# android - 如何使用 EditText 和 ICS 实现特定的电话号码格式？

> ID：12592915
> 
> 赞同：2
> 
> 时间：2012-09-26T00:18:17.110
> 
> 标签：android, android-edittext, android-4.0-ice-cream-sandwich

我的应用要求电话号码的格式为 xxx-xxx-xxxx。下面的代码在 ICS 之前工作，但 ICS 设备完全忽略了格式化文本观察器。为什么它会忽略格式化程序，我怎样才能让 ICS 遵循预期的格式？

我将过滤器和文本侦听器设置为：

```
final EditText phoneNumber = (EditText) findViewById(R.id.phoneNumber);
phoneNumber.addTextChangedListener(new PhoneNumberFormattingTextWatcher());
phoneNumber.setFilters(new InputFilter[] { new PhoneNumberFilter(), new InputFilter.LengthFilter(12) }); 
```

PhoneNumberFilter 的代码：

```
import android.text.InputType;
import android.text.Spanned;
import android.text.method.NumberKeyListener;

public class PhoneNumberFilter extends NumberKeyListener {

    @Override
    public int getInputType() {
        return InputType.TYPE_CLASS_PHONE;
    }

    @Override
    protected char[] getAcceptedChars() {
        return new char[] { '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '-' };
    }

    @Override
    public CharSequence filter(CharSequence source, int start, int end,
            Spanned dest, int dstart, int dend) {

        // Don't let phone numbers start with 1
        if (dstart == 0 && source.equals("1")) 
            return "";

        return super.filter(source, start, end, dest, dstart, dend);
    }
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-27T20:44:08.143

我用以下方法解决了这个问题：

```
final EditText phoneNumber = (EditText) findViewById(R.id.phoneNumber);
phoneNumber.addTextChangedListener(new PhoneNumberTextWatcher());
phoneNumber.setFilters(new InputFilter[] { new PhoneNumberFilter(), new InputFilter.LengthFilter(12) }); 
```

PhoneNumberFilter - 确保电话号码匹配 XXX-XXX-XXXX：

```
public class PhoneNumberFilter extends NumberKeyListener {

    @Override
    public int getInputType() {
        return InputType.TYPE_CLASS_PHONE;
    }

    @Override
    protected char[] getAcceptedChars() {
        return new char[] { '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '-' };
    }

    @Override
    public CharSequence filter(CharSequence source, int start, int end,
            Spanned dest, int dstart, int dend) {

        // Don't let phone numbers start with 1
        if (dstart == 0 && source.equals("1")) 
            return "";

        if (end > start) {
            String destTxt = dest.toString();
            String resultingTxt = destTxt.substring(0, dstart) + source.subSequence(start, end) + destTxt.substring(dend);

            // Phone number must match xxx-xxx-xxxx
            if (!resultingTxt.matches ("^\\d{1,1}(\\d{1,1}(\\d{1,1}(\\-(\\d{1,1}(\\d{1,1}(\\d{1,1}(\\-(\\d{1,1}(\\d{1,1}(\\d{1,1}(\\d{1,1}?)?)?)?)?)?)?)?)?)?)?)?")) { 
                return "";
            }
        }
        return null;
    }
} 
```

PhoneNumberTextWatcher - 如果用户正在删除，则处理自动插入破折号和自动删除破折号：

```
public class PhoneNumberTextWatcher implements TextWatcher {

    private boolean isFormatting;
    private boolean deletingHyphen;
    private int hyphenStart;
    private boolean deletingBackward;

    @Override
    public void afterTextChanged(Editable text) {
        if (isFormatting)
            return;

        isFormatting = true;

        // If deleting hyphen, also delete character before or after it
        if (deletingHyphen && hyphenStart > 0) {
            if (deletingBackward) {
                if (hyphenStart - 1 < text.length()) {
                    text.delete(hyphenStart - 1, hyphenStart);
                }
            } else if (hyphenStart < text.length()) {
                text.delete(hyphenStart, hyphenStart + 1);
            }
        }
        if (text.length() == 3 || text.length() == 7) {
            text.append('-');
        }

        isFormatting = false;
    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count, int after) {
        if (isFormatting)
            return;

        // Make sure user is deleting one char, without a selection
        final int selStart = Selection.getSelectionStart(s);
        final int selEnd = Selection.getSelectionEnd(s);
        if (s.length() > 1 // Can delete another character
                && count == 1 // Deleting only one character
                && after == 0 // Deleting
                && s.charAt(start) == '-' // a hyphen
                && selStart == selEnd) { // no selection
            deletingHyphen = true;
            hyphenStart = start;
            // Check if the user is deleting forward or backward
            if (selStart == start + 1) {
                deletingBackward = true;
            } else {
                deletingBackward = false;
            }
        } else {
            deletingHyphen = false;
        }
    }

    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {
    }
} 
```

# python - 加快我的费马分解函数（Python）

> ID：12592916
> 
> 赞同：3
> 
> 时间：2012-09-26T00:18:22.350
> 
> 标签：python, factorization

[我的任务是使用费马分解方法分解](http://en.wikipedia.org/wiki/Fermat%27s_factorization_method)非常大的合数。这些数字是 1024 位大，大约是 309 个十进制数字。

我想出了下面的 Python 代码，它使用该[`gmpy2`](http://code.google.com/p/gmpy/)模块来确保准确性。[它只是Wikipedia 页面](http://en.wikipedia.org/wiki/Fermat%27s_factorization_method#The_basic_method)上显示的伪代码的 Python 实现。我阅读了该页面上的“[筛选改进](http://en.wikipedia.org/wiki/Fermat%27s_factorization_method#Sieve_improvement)”部分，但不确定如何实施。

```
def fermat_factor(n):
    assert n % 2 != 0  # Odd integers only

    a = gmpy2.ceil(gmpy2.sqrt(n))
    b2 = gmpy2.square(a) - n
    while not is_square(b2):
        a += 1
        b2 = gmpy2.square(a) - n

    factor1 = a + gmpy2.sqrt(b2)
    factor2 = a - gmpy2.sqrt(b2)
    return int(factor1), int(factor2) 

def is_square(n):
    root = gmpy2.sqrt(n)
    return root % 1 == 0  # '4.0' will pass, '4.1212' won't 
```

此代码对于小数字运行得相当快，但对于与问题中给出的数字一样大的数字则需要很长时间。如何提高此代码的速度？我不是在寻找为我编写代码的人，但希望能得到一些建议。感谢您的任何回复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T08:11:22.513

你需要避免做这么多的平方和平方运算，尤其是在大数字上。

避免它们的简单方法是注意 a^2 - N = b^2 必须为真，所有模数才能成为解决方案。例如，

a^2 mod 9 - N mod 9 = b^2 mod 9

假设你的 N 是 55，所以 N mod 9 = 1。

现在考虑 (a mod 9) 的集合，并将其平方，模 9。得到的 a^2 mod 9 是集合：{​​0, 1, 4, 7}。b^2 mod 9 也必须如此。

如果 a^2 mod 9 = 0，则 0 - 1 = 8（所有 mod 9）不是解，因为 8 不是模 9 的平方。这消除了 (a mod 9) = {0, 3 和6}。

如果 a^2 mod 9 = 1，则 1 - 1 = 0（所有 mod 9），因此 (a mod 9) = {1, 8} 是*可能的*解决方案。

如果 a^2 mod 9 = 4，则 4 - 1 = 3（所有 mod 9）不是可能的解决方案。同上 a^2 mod 9 = 7。

因此，一个模数消除了“a mod 9”的 9 个可能值中的 7 个。

你可以有*许多*模数，每一个模数都至少消除了一半的可能性。例如，使用一组 10 个模数，您只需检查大约 1,000 个 a 中的 1 个是否是完美平方或具有整数平方根。（我的工作使用了大约 10,000 个模数）。

注意：作为素数幂的模数通常比素数更有用。此外，模数 16 是一个有用的特殊情况，因为当 N mod 4 为 1 时，'a' 必须是奇数，而当 N mod 4 为 3 时，'a' 必须是偶数。“证明留给学生练习。”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T01:34:29.740

考虑重写此脚本以仅使用整数而不是任意精度浮点数。

gmpy 支持整数平方根（返回平方根的下限，有效计算）。这可以通过测试平方根的平方是否等于原始值来用于 is_square() 函数。

我不确定 gmpy2，但在 gmpy.sqrt() 中需要一个整数参数，并返回一个整数输出。如果您使用浮点数，那么这可能是您的问题（因为与整数相比，浮点数非常慢，尤其是在使用扩展精度时）。如果您实际上使用的是整数，那么每次调用 is_square() 时都必须进行从整数到浮点数的繁琐转换（以及 gmpy2.sqrt() ！= gmpy.sqrt()）。

对于那些一直说这是一个难题的人，请记住，使用这种方法是一个提示：费马分解算法是基于一个弱点，即当要分解的合数有两个接近的质因数时彼此。如果这是作为提示给出的，那么提出问题的实体很可能知道情况就是这样。

编辑：显然， gmpy2.isqrt() 与 gmpy.sqrt() （sqrt 的整数版本）相同，而 gmpy2.sqrt() 是浮点版本。

# java - Java：发现很长，需要 int

> ID：12592918
> 
> 赞同：0
> 
> 时间：2012-09-26T00:18:43.223
> 
> 标签：java, casting, int, long-integer

我正在尝试使用这一行对 Java 中的一些数组进行排序：

```
a = sortFacade.sort(2, false, a); 
```

其中 'a' 是一个已经初始化的 int 数组。当我尝试编译它时，我被告知 2 是 long，而不是 int。我试过用 (int)2 铸造它，但没有运气。

我也试过这条线

```
sortFacade.sort(2, false, a); 
```

并且代码编译。

有谁知道解决这个问题？

编辑：这是我在终端中收到的消息：

```
Experimenter.java:146: incompatible types
found   : long
required: int[]
        a = sortFacade.sort(2, false, a);
                           ^ 
```

在这样的代码中可以找到这一行：

```
public static void Experiment1()
{
   for(int size = 5000; size <= 100000; size = size + 5000)
   {
     int[] a randomArray(size, 1000); //a random array of size 'size' and values from 1 - 1000
     a = sortFacade.sort(2, false, a);
     /** This is where the error occurs. 2 specifies insertion sort (error occurs 
      with other acceptable numbers here as well,false specifies descending
      order, 'a' specifies the array to be sorted.*/
   }
} 
```

SortFacade 是一个与我所有不同的排序算法交互的外观。2 是一个可接受的值，并且对相同方法（具有不同参数）的调用在代码的其他部分确实有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:08:10.473

这基本上不言自明。

```
Experimenter.java:146: incompatible types
found   : long
required: int[] 
```

你自己说变量`a`是一个整数数组。上面的错误告诉您，尽管该方法返回一个`long`，但您要求它返回一个整数数组`int[]`，因为您尝试将该`long`值分配给`a`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T01:21:38.800

如果`a`是一个`int[]`数组，那么您收到的错误似乎是因为`sortFacade.sort`返回类型为`long`并且您试图将其分配给`a`数组 - 这是非法的。

编译的原因`sortFacade.sort(2, false, a);`是因为您没有将它分配给任何东西。如果你说：`long b = sortFacade.sort(2, false, a);`它应该编译并工作。

# ruby-on-rails - 是否建议在用户表上使用单表继承？

> ID：12592919
> 
> 赞同：1
> 
> 时间：2012-09-26T00:18:50.153
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

对于我当前的一个项目，我正在尝试首先为应用程序设计数据库模式。但是，我无法决定是否在我的应用程序的用户模型上使用[单表继承](http://api.rubyonrails.org/classes/ActiveRecord/Base.html#label-Single+table+inheritance)。

用户可以是：所有者、居民或管理员，由于他们共享相同的属性和不同的功能，我认为 STI 在这里适用。我是否朝着正确的方向前进？如果没有，请提出更好的替代方案。多态关联在这里合适吗？请注意，身份验证和访问控制是针对用户的，就像通常那样。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T00:36:43.800

我相信你是对的——STI 在这种情况下是合适的。而且由于身份验证是针对用户的，它会给您提供更简单的解决方案。此外，由于它们也共享属性，所以我会说 STI 而不是多态关联——唯一不同的是处理的用户类型。

# wordpress - 将 wordpress 移动到子目录链接不起作用

> ID：12592922
> 
> 赞同：0
> 
> 时间：2012-09-26T00:19:30.087
> 
> 标签：wordpress, http-status-code-301

我将一个 wordpress 博客从站点的根目录移动到 /blog 目录。

现在这样的链接： domain.com/link-to-post 不要重定向到这个 domain.com/blog/link-to-post

问题是我现在想在根目录中放置一个完全不同的应用程序，所以我不能在那里执行 301 重定向到 /blog 文件夹。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T02:08:30.780

我认为问题可能在于存储在 WordPress 数据库中的旧链接。您需要将它们更改为指向新的 URL。有几种方法可以做到这一点。

此链接的第二部分将逐步告诉您如何操作。

[http://codex.wordpress.org/Moving_WordPress](http://codex.wordpress.org/Moving_WordPress)

# excel - 有条件地平均excel数据列

> ID：12592926
> 
> 赞同：0
> 
> 时间：2012-09-26T00:20:17.233
> 
> 标签：excel, conditional, average

我有一个健康项目电子表格，其中有一列患者正在服用的症状和药物。这些实际上是列，但我不知道如何在堆栈溢出中写入列。

```
symptom   drug1    drug2
7         150       0
6         150       0
7         150       0
6         150       0
2         75        25
3         75        25
2         75        25
3         75        25 
```

我需要帮助编写一个公式，该公式将平均症状级别 6 及以上的所有天数与症状级别 3 及以下的所有天数。然后将它应用到药柱天。例如，在上面的案例中，当服用更多的药物 1 和更少的药物 2 时，症状水平似乎更高。现在我通过手动标记日期来手动执行此操作。

由于症状可能由药物价值的最后 x 天确定，我希望药物价值也是 X 天前的平均值。每次我标记这些日子时，我都会手动返回几天。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T01:19:52.703

如果我理解正确，那么这是绝对可能的。下面是我能够创建的屏幕截图：

![Excel 工作表1](../Images/8a08cc103a2b8bb4598b01591887fe24.png)

这为您提供每种药物用量的平均值，仅当它是`>=`或`<=`指定的症状水平时。

公式如下，但不是`ENTER`在键入后点击，而是必须点击`CTRL + SHIFT + ENTER`：

```
=AVERAGE(IF($B$1:$I$1<=3,B2:I2)) 
```

这是它在 Excel 中的样子：

![Excel 工作表2](../Images/0f5cb3a4ed041a7e5219b5a9cc4d1603.png)

如您所见，该公式仅对满足要求的数据进行平均。对于此条件函数的其他用途，可以替换逻辑测试（数字、字符串、日期等），该函数也可以（、、、、、、`sum`等）`average``min``max``count`

如果您尝试此操作并最终完成，`#VALUE`那么您跳过了重要的步骤！

**输入公式后，HIT`CTRL+SHIFT+ENTER`**

通过点击该组合键，Excel 知道表单中的数据应该是单元格或区域的数组，而不是单个单元格或单个区域。

[查看此链接以获取有关 Excel 数组公式的更多信息](http://www.ozgrid.com/Excel/arrays.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T00:29:38.417

`AVERAGEIF`我认为您正在寻找的公式是。

像这样的东西：

```
=AVERAGEIF(R2C1:R9C1,">=6",R2C2:R9C2)
=AVERAGEIF($A$2:$A$9,">=6",$B$2:$B$9) 
```

# facebook - 如何在不使用 ifame 插件的情况下将 Facebook Page feed 拉到我的网站上？

> ID：12592927
> 
> 赞同：0
> 
> 时间：2012-09-26T00:20:20.493
> 
> 标签：facebook, facebook-graph-api

我还是开发新手，从未使用过 Facebook API。我想在不使用“iframe”插件的情况下将 Facebook 页面的状态提要放到我的网站上。我可以访问这个 Facebook 页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T10:19:19.533

经过更多研究，我设法按照以下教程提取页面提要。

[http://johndoesdesign.com/blog/2011/php/adding-a-facebook-news-status-feed-to-a-website/](http://johndoesdesign.com/blog/2011/php/adding-a-facebook-news-status-feed-to-a-website/)

# android - 在 http url 中发送 json 字符串

> ID：12592928
> 
> 赞同：2
> 
> 时间：2012-09-26T00:20:31.117
> 
> 标签：android, json, rest, asp.net-web-api, restful-architecture

我正在将数据从我的 Android 应用程序发送到编写为 asp.net web api 的 REST 服务。我已经成功发送了诸如

[http://www.deanblakely.com/REST/api/products/3](http://www.deanblakely.com/REST/api/products/3)并处理 web.api 中的参数。

现在，在 Android 客户端中，我使用 GSON 将复杂对象转换为 json 字符串，字符串如下：

[{"TStamp":"Sep 25, 2012 5:04:46 PM","emailaddress":"webapi@restserver.com","altitude":0.0,"latitude":3.3743984E7,"longitude":-1.18107841 E8,"legnum":1}]

如何将此 json 字符串放入 url？例如我可以把它放在斜线之间吗？例如[http://www.deanblakely.com/REST/api/objects/](http://www.deanblakely.com/REST/api/objects/) {"TStamp":"Sep 25, 2012 5:04:46 PM","emailaddress":"webapi@restserver.com","altitude ":0.0,"纬度":3.3743984E7,"经度":-1.18107841E8,"legnum":1} ??

PS。我在 web.api 上的所有方法都是 Gets。我想保持这种方式，因为它更简单。如果您对此策略有疑问，请参阅：[http ://forums.asp.net/t/1843826.aspx/1?Web+api+CRUD+Operations](http://forums.asp.net/t/1843826.aspx/1?Web+api+CRUD+Operations)

谢谢，院长

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T00:41:15.180

对于 RESTful Web api，[get](https://stackoverflow.com/questions/2198514/get-or-put-for-a-rest-request)不应[修改](https://stackoverflow.com/questions/1619152/how-to-create-rest-urls-without-verbs)服务器上的状态或资源。

将参数放在查询字符串 URL 中通常是针对 REST 资源的 GET 请求完成的。

正如您的问题所见，通过 GET 完成所有操作并不简单。当您尝试通过更适合作为 GET 上的过滤器选项的查询字符串发布更复杂的对象和图形时，这并不典型并且会引入许多问题。

如果您将此类对象的 JSON 表示形式发送到服务器 Web api，则通常是在进行创建或更新。将其序列化为 JSON 并将其放入正文中会更容易。

如果您正在创建资源，请执行 POST 并将 JSON 对象放入请求的正文中。

如果您正在进行更新，（可能因为您有 /3），然后对 url 执行 POST、PUT 或 PATCH 请求，并将 json 对象放入正文中。PUT 意味着完全替换资源，而不是部分更新的 PATCH。

由于您使用的是 ASP.net web api，因此这里是使用 CRUD 操作的演练。通过 fiddler 运行：

[http://www.asp.net/web-api/overview/creating-web-apis/creating-a-web-api-that-supports-crud-operations](http://www.asp.net/web-api/overview/creating-web-apis/creating-a-web-api-that-supports-crud-operations)

# colors - 将其转换为另一种颜色类型？

> ID：12592932
> 
> 赞同：1
> 
> 时间：2012-09-26T00:21:31.647
> 
> 标签：colors, hex

因此，我正在使用的这个脚本使用`0x333333`. 我所知道的只是简单的十六进制颜色代码，例如`#EEEEEE`. 这种奇怪的格式会是什么颜色？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T00:24:00.880

没有什么奇怪的。特别是那种颜色将是非常浅的灰色阴影 - 接近白色。

读取十六进制颜色的方法是，从左边开始，有一个表示红色的字节、一个表示绿色的字节和一个表示蓝色的字节。

`0xEEEEEE`意味着您有`0xEE`红色、`0xEE`绿色和`0xEE`蓝色的值。它们都是一样的，所以你不会得到任何不同的原色或二次色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T00:26:24.903

字符串中的每个字节（2 个十六进制字符）代表一个颜色分量（红色、绿色或蓝色）。如果每个组件都相同，那么您将获得灰度颜色。在 的情况下`EEEEEE`，它几乎是白色的。

通常，当我们使用 HTML 语法指定颜色时`(#EEEEEE)`，这些字节是按顺序排列的 (RRGGBB)。但是，如果您使用的是十六进制表示法（*ie* `0x......`），它可能取决于您系统的字节序。周围的许多计算机都是 little-endian，因此实际值`0x112233`在内存中将表示为`33221100`.

最后，内存中的表示取决于显示该颜色的设备。它可能需要按顺序排列的字节，`B-G-R`也可能需要`R-G-B`.

# c - 将0连接到C中的字符串

> ID：12592934
> 
> 赞同：0
> 
> 时间：2012-09-26T00:21:49.227
> 
> 标签：c, string

我正在尝试在 ac 字符串的末尾添加 0，以使总长度为 100。

例如，如果字符串是“hi”，我想添加 98 个 0。

最简单的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T00:25:10.463

100 个字符的 Malloc 内存。Mem 将所有字符设置为 '0'，然后将前 2 个字符设置为 hi。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T03:03:03.923

提示一个衬垫！

```
// this does exactly what you want
// first two chars are 'h' and 'i', all the rest are 0.
char myString[100] = {'h', 'i'}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T00:26:32.577

尝试这样的事情：

```
static inline char *newPaddedStringToLength(const char *string, const char character, unsigned length) {
    if(strlen(string) >= length) return NULL;

    char *newString = malloc(sizeof(char) * length);
    memset(newString, character, length);
    for(unsigned i = 0; i < strlen(string); ++i) {
        newString[i] = string[i];
    }
    return newString;
}

char *string = "Blah";
char *padded = newPaddedStringToLength(string, '0', 100);

//...

if(padded) free(padded); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T00:28:26.513

1）我可以建议你使用 NULL 代替吗？

2）C中没有字符串。

我假设您正在使用某种二进制格式。

如果你有一个 char 数组，你想要 100 个字符长，那么一个 char 在 ascii 中表示为一个字节。

您可以分配一个 100 字节长的 char 数组

并写入 h 和 i 字节，你应该有 98 个空字节。如果您实际上想要零，则将 0 字节写入其余部分。

你可以使用循环。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T03:51:40.120

```
string name[100] = {'h', 'i'}' 
```

这是初始化字符串的最简单方法。

在这里，编译器将但前 2 个带有`h`and`i`的字符和其他带有空字符（`\0`或`0`）的字符都是相同的。

# php - mySQL 加载数据 INFILE - T_CONSTANT_ENCAPSED_String 错误

> ID：12592935
> 
> 赞同：-2
> 
> 时间：2012-09-26T00:21:52.300
> 
> 标签：php, mysql

我有这个代码

`LOAD DATA INFILE '$filename' INTO TABLE`选择列表`FIELDS TERMINATED BY ',' ENCLOSED BY '"' LINES TERMINATED BY '\n';`

但是当我执行它时，会显示此错误：

`Parse error: syntax error, unexpected T_CONSTANT_ENCAPSED_STRING in C:\wamp\www\dX\csvImport-picklist.php on line 20`

我的 SQL 查询有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T00:23:51.677

可能您有一个未转义的“”（在所附），但如果没有看到更多就不可能说出来。

```
$sql = "LOAD DATA INFILE '$filename' INTO TABLE `picklist` FIELDS TERMINATED BY ',' ENCLOSED BY '\"' LINES TERMINATED BY '\n'";  // Added the escape character (slash) before the double quotes 
```

# scala - Play 2.0 - 检查传递的参数是否为空

> ID：12592942
> 
> 赞同：1
> 
> 时间：2012-09-26T00:22:59.570
> 
> 标签：scala, view, playframework, playframework-2.0

我正在使用 Play 2.0 和 scala 进行一个小项目，并且在显示逻辑方面有些困难。我想检查我传递的参数在我的视图引擎中是否为空。

我试过了：

```
@if(pmem.isEmpty()) {
 there are no past members who won in this branch
} else {
 <table>
etcc...
 <table>
} 
```

但它没有用，给了我一个

> **布尔不带参数**错误

我也试过

```
@if(pmem == null) {
 there are no past members who won in this branch
} else {
    } else {
     <table>
    etcc...
     <table>
    } 
```

它没有用，也许我错过了什么？或者我可能做错了。我正在使用 Scala/Play 2.0 框架。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T08:17:48.373

```
@if(pmem.isEmpty) {
 there are no past members who won in this branch
} else {
 <table>
etcc...
 <table>
} 
```

试过并给了我答案:)

# macos - GIT 无法提取：无法符号链接“路径/文件名”：文件名太长

> ID：12592948
> 
> 赞同：4
> 
> 时间：2012-09-26T00:24:44.237
> 
> 标签：macos, git, pull

感觉很傻，但我不知道在这里做什么。

我有一个存储在远程服务器上的存储库的本地副本。远程服务器有我需要的更改，我已经在本地副本上提交了更改。我无法推送，因为我需要合并服务器上存在的较新版本的更改。当我拉，我得到这个错误：

```
 git pull origin master
 From server.name:reponame
  * branch            master     -> FETCH_HEAD
 fatal: failed to symlink 'path/to/filename ': File name too long 
```

不确定这里会发生什么。疯狂的是该文件`path/to/filename`是实际文件，而不是符号链接。此外，`path/to/filename`甚至不是最长的路径。

真的很困惑从哪里开始调试这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T06:10:24.213

我看到符号链接失败的唯一地方是[merge-recursive.c 文件](https://github.com/git/git/blob/master/merge-recursive.c#L776-L783)：

```
if (S_ISLNK(mode)) {
  char *lnk = xmemdupz(buf, size);
  safe_create_leading_directories_const(path);
  unlink(path);
  if (symlink(lnk, path))
    die_errno(_("failed to symlink '%s'"), path);
  free(lnk);
} 
```

看起来您从中提取的远程存储库包含`filename`符号链接，而您的本地存储库包含与`filename`普通文件相同的内容。
这可能是致命错误消息的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-17T09:37:38.590

我遇到了同样的问题，但就我而言，我没有时间检查它会如何发生。我通过使用下面的命令解决了它 - 可能会对某人有所帮助：

```
git config core.symlinks false 
```

但是，我不知道这对整个项目是如何工作的，所以你只能将它用于你的责任。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-12T21:31:33.320

我会从开始调试开始，`git fetch`只有在成功之后，去`git merge`。大概（正如@VonC 指出的那样）错误只会发生`git merge`（这是有道理的，因为 pull 在这里只是 fetch-then-merge ）。由于`fetch`将成功，您可以检查导致失败合并的提交，并可能在`strace`或类似的情况下运行整个事情以观察失败的系统调用。

（不需要拆分成 fetch+merge，你可以 strace 一个 pull，只是它应该有助于减少不相关的 crud 梳理。）

[编辑：而且，SO再次复活了一个老问题......必须开始查看这些时间戳！并且，注意 OSX 标签，`dtruss`而不是 strace。]

# ruby-on-rails - 对查询字符串使用高级约束的路由的 Rspec？

> ID：12592950
> 
> 赞同：2
> 
> 时间：2012-09-26T00:25:07.960
> 
> 标签：ruby-on-rails, rspec, rspec-rails

在我的 Rails 应用程序中，我需要一种非常快速的方法来阻止包含特定查询字符串值的请求。我能够在使用高级约束的路线中做到这一点。它在现实世界中效果很好，但我不知道如何为它编写测试。

这是我的 routes.rb 中的代码：

```
class BlockedConstraint
  @@block_ids = []
  @@block_ids << '12345'
  @@block_ids << '67890'
  def self.matches?(request)
    @@block_ids.include?(request.query_parameters["app_id"])
  end
end

namespace :api do
  match "*path" => "block#block_request", :constraints => BlockedConstraint
  match 'ads' => 'status#get_status', :via => :get
  match 'init' => 'init#get_init', :via => :get
  #etc.
end 
```

这是我的规格：

```
describe "BlockController" do
  it "blocks app_id 12345" do
    { :get => 'api/status', :app_id => '12345' }.should route_to(
      :controller => 'api/block',
      :action => 'block_request'
    )
  end
end 
```

但我得到这个错误：

```
Failure/Error: { :get => 'api/status', :app_id => '12345' }.should route_to(
Test::Unit::AssertionFailedError:
   The recognized options <{"action"=>"get_status", "controller"=>"api/status"}> did not match <{"action"=>"block_request", "controller"=>"api/block"}>, difference: <{"action"=>"block_request", "controller"=>"api/block"}> 
```

我还在 routing/routes_spec.rb 中尝试过，使用 describe Routing。结果相同。（我实际上不确定是否最好将其与路由规范或控制器规范一起使用。）

我正在运行 Rails 3.0.10 和 Rspec 2.11.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T06:10:38.960

在使用 route_to 测试之前我从未测试过约束，但匿名控制器可能对您的测试有用。

[https://www.relishapp.com/rspec/rspec-rails/v/2-4/docs/controller-specs/anonymous-controller](https://www.relishapp.com/rspec/rspec-rails/v/2-4/docs/controller-specs/anonymous-controller)

您可以为应用程序控制器编写规范，例如：

```
require 'spec_helper'

describe ApplicationController do
  controller do
    def index
    end
  end

  describe 'handling block constraints' do
    before { get :index, :app_id => '100' }

    it "should block request" do
      should redirect_to(:controller => 'blocks', :action => 'block_request')
    end
  end
end 
```

# actionscript-3 - AS3 TimerEvents - 子级监听父级定时器事件

> ID：12592952
> 
> 赞同：0
> 
> 时间：2012-09-26T00:25:11.753
> 
> 标签：actionscript-3

我怎样才能让我的孩子有一个`actionListener`倾听`TimerEvent`父母内心的声音？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T01:17:54.137

当父计时器滴答作响时，您为什么不在每个孩子中调用一个函数？基本上只是让您的孩子实现您创建的具有特定功能的接口（我们称之为`IHaveTickingParent`），如下所示：

[IHaveTickingParent.as]

```
public interface IHaveTickingParent
{
    function onParentTick(event:TimerEvent):void;
} 
```

[HaveTickingParentImpl.as]

```
public class HaveTickingParentImpl /* extends XYZ */ implements IHaveTickingParent
{
    public function onParentTick(event:TimerEvent):void
    {
    }
} 
```

在您父母的 TimerEvent 处理程序中，只需执行以下操作：

```
for(var i:int = 0; i < numChildren; i++)
{
    var child:DisplayObject = getChildAt(i);

    if(child is IHaveTickingParent)
    {
        // Make children update as well.
        (child as IHaveTickingParent).onParentTick(event);
    }
} 
```

# sql - 如何通过 ODBC 更新 Access 表而不加载整个表

> ID：12592953
> 
> 赞同：1
> 
> 时间：2012-09-26T00:25:22.113
> 
> 标签：sql, ms-access, odbc

我正在尝试通过使用 ODBC 连接从远程 PostgreSQL 数据库中提取数据来更新本地 Access 2010 表。当我在 Access 更新查询中手动指定`WHERE`条件时，我可以在数据库服务器上看到有限数量的行正在传递给 Access。但是，当我`WHERE`根据本地 Access 表中的最后一行使条件动态化时，整个表似乎被拉入 Access 并且条件应用到内存中（我假设，因为它永远不会完成）。

例如，此查询仅从远程数据库中获取 2012 行，我可以`WHERE`在删除服务器上看到该子句：

```
INSERT INTO local (dt, latitude, longitude)
SELECT dt, latitude, longitude
FROM remote_odbc
WHERE remote_odbc.dt > #2011-12-31 23:59:59#; 
```

但我真正想要的是查看`dt`本地表中的最后一个日期时间（），并且只从远程数据库中检索这些行。

这是我尝试过的：

```
INSERT INTO local (dt, latitude, longitude)
SELECT dt, latitude, longitude
FROM remote_odbc, (SELECT max(dt) AS max_dt FROM local) AS sub
WHERE remote_odbc.dt > max_dt; 
```

当我这样做时，在服务器上运行的查询根本没有`WHERE`子句，这让我认为 Access 正在检索*整个*远程表，然后在`WHERE`本地应用该子句。表太大，互联网太慢，不实用。

如何重写我的更新查询，以便它只通过 ODBC 链接检索我想要的行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T00:32:52.863

“FROM remote_odbc, (...) AS sub”让我怀疑这是问题的原因。试试这个`INSERT`语句......

```
INSERT INTO local (dt, latitude, longitude)
SELECT dt, latitude, longitude
FROM remote_odbc
WHERE remote_odbc.dt > DMax("dt", "local"); 
```

由于您报告该建议并未限制发送回 Access 的服务器行，因此请使用参数查询将单个日期/时间值放入`WHERE`子句中。以下过程可能不太适合您当前的应用程序上下文，但我提供它更像是一个诊断测试......看看我们是否可以让某些东西正常工作。

```
Dim db As DAO.Database
Dim qdf As DAO.QueryDef
Dim dteLast As Date
Dim strInsert As String

dteLast = DMax("dt", "local")
Debug.Print "dteLast: " & dteLast
Set db = CurrentDb
strInsert = "PARAMETERS which_date DateTime;" & vbCrLf & _
    "INSERT INTO local (dt, latitude, longitude)" & vbCrLf & _
    "SELECT dt, latitude, longitude" & vbCrLf & _
    "FROM remote_odbc" & vbCrLf & _
    "WHERE remote_odbc.dt > which_date;"
Debug.Print "strInsert:" & vbCrLf & strInsert
Set qdf = db.CreateQueryDef("", strInsert)
qdf.Parameters("which_date") = dteLast
qdf.Execute dbFailOnError
Set qdf = Nothing
Set db = Nothing 
```

请注意，代码未经测试，因为我没有您的表格和示例数据可供使用。但是，它从 Access 2007 编译时不会出错。

# r - 在R中不换行打印

> ID：12592956
> 
> 赞同：0
> 
> 时间：2012-09-26T00:25:48.700
> 
> 标签：r, printing

如何在 R 中打印没有换行符？

```
> for (i in 1:3)
 +   print(i)
[1] 1
[1] 2
[1] 3 
```

我想得到的是：1 2 3，我可以用 cat

```
> for( i in 1:3)
+   cat(i," ")
1  2  3  > 
```

我怎么能用 print 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T01:32:33.413

如果你必须这样做`print`，你可以创建一个`integer`方法`print`

```
> print.integer <- function(x, ...) cat(x, " ") 
> for(i in 1:3) print(i)
1 2 3 > 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T00:31:19.163

因为您正在使用 `print`, 这就是 print 对原子向量的工作方式。（的行为`print.default`）

您的选择是使用`cat`（如您的示例）或使用`message`（`appendLF == FALSE`感谢@GSee for the `appendLF = FALSE`）

```
for( i in 1:3)message(i, appendLF = FALSE) 
```

正如 GSee 所说，如果您坚持使用`print`，那么您需要为您的 data.type 定义一个打印方法（它将在后台调用`cat`或`message`类似）

# c# - 异步任务正在冻结 UI

> ID：12592957
> 
> 赞同：4
> 
> 时间：2012-09-26T00:25:51.803
> 
> 标签：c#, .net-4.5, async-await

我有这样的方法：

```
private async Task DoSomething()
{
    // long running work here.
} 
```

当我调用这样的方法时，它会阻止 UI：

```
Task t = DoSomething(); 
```

我必须执行其中一项以使其成为非阻塞：

```
Task t = new Task(() => DoSomething());
t.Start();

// Or

Task t = Task.Factory.StartNew(() => DoSomething()); 
```

那么，当您可以像在框架 4 中一样使用任务并使用它们`Task.Wait()`代替时，异步/等待的意义`await`何在？

编辑：我理解你所有的答案 - 但没有一个真正解决我的最后一段。谁能给我一个基于任务的多线程示例，其中 async / await 提高了程序的可读性和/或流程？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T00:42:09.357

你怎么用`await`？这不会阻止 UI：

```
 private async Task DoSomething()
    {
        await Task.Delay(5000);
    }

    private async void button1_Click(object sender, EventArgs e)
    {
        await DoSomething();
        MessageBox.Show("Finished");
    } 
```

请注意，我不必编写任何冗长的回调内容。这就是`async`/的意义所在`await`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T02:44:30.120

`async`方法同步开始执行。`async`对于组合异步操作很有用，但除非您告诉它，否则它不会神奇地使代码在另一个线程上运行。

您可以使用`Task.Run`将 CPU 密集型工作安排到线程池线程。

有关更多信息，请参阅我的[`async`/`await`介绍帖子](http://nitoprograms.blogspot.com/2012/02/async-and-await.html)或[`async`常见问题解答](http://blogs.msdn.com/b/pfxteam/archive/2012/04/12/10293335.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T01:59:17.033

如果没有实际代码，很难告诉您发生了什么，但您可以使用“await Task.Yield();”开始您的 DoSomething 强制它立即返回，以防在第一次等待之前运行的内容是导致您的 UI 问题的原因。

# javascript - Javascript：从被删除的元素接收事件的可能性

> ID：12592962
> 
> 赞同：4
> 
> 时间：2012-09-26T00:26:43.423
> 
> 标签：javascript, events, scheduler

假设 JavaScript 调度程序在其队列中有一项将删除 div 元素。早些时候，我们为这个 div 元素上的点击事件设置了监听器。调度程序将在完成当前工作（可以是任何事情）后立即安排此删除任务。此时我们点击了即将被删除的div，并且对该点击的监听器的回调被添加到队列中。

我假设调度队列是先进先出（我是对的吗？），所以 div 将首先被删除，在删除之后，将引发 div 单击侦听器的回调。

我是否正确捕获了事件序列，或者删除此元素会导致单击侦听器回调从队列中拉出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T22:20:22.530

感谢 Royce Feng 的指点

[如果你删除了一个 DOM 元素，任何以该元素开始的事件是否会继续冒泡？](https://stackoverflow.com/questions/2732818/if-you-delete-a-dom-element-do-any-events-that-started-with-that-element-contin#answer-2732982)

答案是：这取决于浏览器。检查该链接以获取详细信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T17:47:55.590

点击事件将在队列末尾进入队列。所以元素不应该在被点击的 DOM 中。不应捕获任何事件。

# wpf - 如何获取 WPF 元素的样式触发器

> ID：12592963
> 
> 赞同：1
> 
> 时间：2012-09-26T00:27:02.030
> 
> 标签：wpf, triggers, styles

我是 WPF 新手，所以，我开始开发一些测试应用程序，我的问题是如何在样式触发器中设置可能的属性，例如，对于 TextBox，我知道一些属性，如“IsFocused”和“IsMouseOver "

```
 <Style.Triggers>
        <Trigger Property="IsFocused" Value="True">
             ...

        </Trigger>
        <Trigger Property="IsMouseOver" Value="True">
             ...
        </Trigger>
    </Style.Triggers> 
```

，但是，其他元素呢？如果将来我需要设置另一个控件的样式，如何发现您的属性

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T00:32:09.500

您阅读[了文档](http://msdn.microsoft.com/en-us/library/system.windows.controls.textbox_properties)。（仅[依赖属性](http://msdn.microsoft.com/en-us/library/ms752914.aspx)适用，因此请检查它们是否有关于此的部分。）

# objective-c - 我怎样才能像 ios6 一样实现卫星 mkmapview

> ID：12592964
> 
> 赞同：1
> 
> 时间：2012-09-26T00:27:15.493
> 
> 标签：objective-c, mkmapview, ios6

这是一个很奇怪的问题。在 iOS6 中，如果您打开地图图钉，您可以看到一个带有标题的视图，其中地图处于卫星模式，并在地图图钉的位置周围画圈。有什么办法可以以编程方式实现这一目标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T20:34:02.280

我还没有加载 iOS 6，所以我猜你描述的外观。如果屏幕顶部有静态卫星图像，您需要找到卫星图像的来源。谷歌静态 API 许可证说你只能在网页中使用他们的静态图像（即不是应用程序），我不知道苹果公司提供静态地图（即在 MKMapView 之外）。因此，您可能需要在顶部放置一个小的 MKMapView，然后以编程方式或使用 Interface Builder 关闭用户与它的交互。

# expressionengine - 使用表达式引擎解析 PHP

> ID：12592965
> 
> 赞同：0
> 
> 时间：2012-09-26T00:27:27.060
> 
> 标签：expressionengine

有没有人找到一种方法或插件来减少表达式引擎解析 php 所需的时间？

使用 EE1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:00:15.870

是的 - 将您的 PHP 代码从模板中移出并移到自定义插件或模块中。

# c# - 为什么 Amazon .Net SDK 看不到任何作业流？

> ID：12592971
> 
> 赞同：2
> 
> 时间：2012-09-26T00:28:01.047
> 
> 标签：c#, .net, amazon-web-services, elastic-map-reduce

我的公司已经厌倦了不断使用 AWS 控制台来设置我们的 map reduce 集群，并且需要比控制台提供的更多的可配置性。我正在使用 .Net AWS SDK 编写一个简单的应用程序，允许我们创建和控制工作流。不幸的是，我的调用`DescribeJobFlows`总是返回空的（尽管我可以在 AWS 控制台中看到作业）。这是一些示例代码：

```
public static void Main()
{
    var amazonClient = new AmazonElasticMapReduceClient( "<redacted>", "<redacted>" );
    var response = amazonClient.DescribeJobFlows( new DescribeJobFlowsRequest() );
    Console.WriteLine( response.DescribeJobFlowsResult.JobFlows.Count );
} 
```

这个简单的程序总是打印 0。

我已经三重检查了我的 aws 访问密钥和密钥是否正确，并且我有在该帐户下运行的工作流。我今天创建了几个正在运行的工作流程，所以至少这些应该包含在结果中。我没有看到任何按区域过滤的内容，也没有看到请求中可能包含有趣的默认值的任何内容。

为什么我看不到我的工作流程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T00:52:54.863

写完之后真的很困惑一段时间，我`ServiceURL`在`AmazonElasticMapReduceConfig`. 一旦我[查找了](http://docs.amazonwebservices.com/general/latest/gr/rande.html)我所在地区的端点并设置了适当的值，我就能得到我期望的结果。

# c# - Sharepoint Services 3.0：itemAttachmentAdded 方法：如何在将附件添加到列表项后更新列

> ID：12592972
> 
> 赞同：1
> 
> 时间：2012-09-26T00:28:17.200
> 
> 标签：c#, wss-3.0

我有一个名为“NameList”的自定义列表。我只有两列。说出名字（单行/文本）和姓氏（单行/文本）。我想要做的是当用户将“新项目”添加到列表中时。他只需要填写名字。然后他使用“附加文件”选项添加一个附件并单击“确定”。当他单击“确定”时，我希望姓氏自动更新为“Matthews”。因为我想要完成的是能够在添加附件时更新列（字段）。这是我的代码。有人可以告诉我哪里出错了。

它也没有一点工作。我也是共享点开发的新手，在来这里之前我确实尽可能多地搜索了信息。不会填充姓氏列。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Microsoft.SharePoint;

namespace UpdateNameList
{
    public class NameListItemEventReceiver : SPItemEventReceiver
    {
    public override void ItemAttachmentAdded(SPItemEventProperties properties)
    {
        base.ItemAttachmentAdded(properties);
        try
        {
        SPSecurity.RunWithElevatedPrivileges(delegate()
        {
            using (SPSite site = new SPSite("http://cse-sp01/sites/SPPilot"))
            {
            using (SPWeb web = site.OpenWeb())
            {
                try
                {

                web.AllowUnsafeUpdates = true;
                SPList list = web.Lists["NameList"];
                int listItemId = properties.ListItemId;
                SPListItem listItem = list.Items.GetItemById(listItemId);
                listItem["Last Name"] = "Matthews";
                listItem.Update();
                web.AllowUnsafeUpdates = false;
                }
                catch (Exception ex)
                {
                properties.ErrorMessage = "Something went wrong??";

                }

            }
            }
        });

        }
        catch (Exception ex)
        {

        properties.Cancel = true;
        properties.ErrorMessage = "Error encountered";
        }

    }//End of Void ItemAttachmentAdded
    }
}//End of namespace 
```

# r - R在vioplot中表示状态概率

> ID：12592980
> 
> 赞同：2
> 
> 时间：2012-09-26T00:29:43.717
> 
> 标签：r

我有一个显示三个状态的vioplot：

```
library(vioplot)
state1 <- rnorm(100,5,2)
state2  <- rnorm(100,8,3)
state3 <- rnorm(100,12,0.5)
vioplot(state1,state2, state3, names=c("a", "b", "c"), col="green") 
```

如何添加到该图中以图形方式显示 state1 发生的概率为 0.3，state2 为 0.2，state3 为 0.5？

或者有没有更好的方法以图形方式表示这一点？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T01:10:04.763

```
 text(x=(1:3)+.2, y=-0.5, 
      labels=paste0( "prob=\n", 
                    round( sapply(list(state1, state2, state3), mean)/
                                      length(c(state1, state2, state3)) 
                           ,2) ) ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T15:52:16.893

这是 Ben Bolker 建议根据给定状态概率对密度估计区域进行加权的示例（我相信）。我使用 ggplot2 的 weights 参数来做到这一点，似乎需要一些黑客攻击来允许该`vioplot`函数允许一个权重函数（尽管这很有用，请参阅[有关 crossvalidated 的相关讨论](https://stats.stackexchange.com/questions/13555/how-to-scale-violin-plots-for-comparisons)）。

![在此处输入图像描述](../Images/584d4b8496ff2cee16ba0328460019f8.png)

```
library(ggplot2)
library(reshape2)

state1 <- rnorm(100,5,2)
state2  <- rnorm(100,8,3)
state3 <- rnorm(100,12,0.5)
state1_w <- rep(0.3, 100)
state2_w <- rep(0.2, 100)
state3_w <- rep(0.5, 100)

state_df1 <- data.frame(cbind(state1,state2,state3))
state_df2 <- data.frame(cbind(state1_w,state2_w,state3_w))
#now to reshape and merge
state_melt1 <- melt(state_df1, measure.vars = c("state1","state2","state3"), variable.name = "State_Num", value.name = "State_Value")
state_melt2 <- melt(state_df2, measure.vars = c("state1_w","state2_w","state3_w"), variable.name = "State_W", value.name = "State_WValue")
state_melt <- data.frame(state_melt1,state_melt2)

#now making the plot
p1 <- ggplot(data = state_melt, aes(State_Num,State_Value,weight = State_WValue))
p1 + geom_violin(fill = "green") 
```

您会收到一些错误消息，说权重不加为一，但这里我们希望这些区域与其状态空间概率成正比。

# design-patterns - UPS 和 USPS 费率 api 结果的缓存策略

> ID：12592982
> 
> 赞同：0
> 
> 时间：2012-09-26T00:29:47.010
> 
> 标签：design-patterns, caching, ups, usps

在尝试成为一名务实的程序员时，我正在尝试为从 UPS 和 USPS api 返回的服务和费率制定缓存策略。

我的第一个想法是存储以下内容：

*   邮政编码（规范化，无空格，仅作为键）
*   载体
*   重量
*   服务
*   成本
*   运输时间
*   国家代码（ISO 3166-1 alpha-2）

我的主要目标是为 API 调用设置一个短暂的超时，并故障转移到缓存的数据。对于可以接受“估计”费率的情况（例如：购物车上的运费计算器），我首先使用缓存的数据。

**编辑**我完全打算定期从现有用户数据中启动此缓存。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T17:09:32.793

好像你回答了你自己的问题。在查看重量时，如果您拥有它，我会根据 DIM 大小缓存可计费重量，因为这是最大的差异。

# twitter - 桌面应用程序中的 Twitter 身份验证

> ID：12592983
> 
> 赞同：0
> 
> 时间：2012-09-26T00:30:00.190
> 
> 标签：twitter, twitter-oauth

我正在开发适用于 Twitter 帐户的桌面应用程序。它是用 C#/WinForms 编码的。

我在其中创建了一个 Twitter 帐户和一个应用程序。这样，我就拥有了身份验证所需的所有令牌。我的应用程序在使用 twitter API 并将令牌传递给它时运行良好。

我想在只知道用户名和密码的 Twitter 帐户上启动用户流。
将用户名和密码发送到 Twitter，我可以收到用于身份验证的令牌吗？我该怎么做？

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T02:13:07.917

阅读[Twitter 开发人员](https://dev.twitter.com)的相应文档：[https](https://dev.twitter.com/docs/auth/implementing-sign-twitter) ://dev.twitter.com/docs/auth/implementing-sign-twitter和[https://dev.twitter.com/docs/auth/obtaining-access-tokens](https://dev.twitter.com/docs/auth/obtaining-access-tokens)。第一个链接是针对网站的“使用 Twitter 登录”，但它与您必须为桌面执行的操作没有太大区别。

# php - 如何连接 PHP 变量以在菜单中使用

> ID：12592985
> 
> 赞同：0
> 
> 时间：2012-09-26T00:30:18.853
> 
> 标签：php, html, string-concatenation, concat

我不是 PHP 人，但我相信 PHP 可以用来完成此任务。

基本上我在我的主菜单 + /about、/blog 等中使用相同的绝对路径，所以我的文件已经是 PHP 为什么不使用 Var 来执行此操作:) （我来自 Flash AS 背景）

测试链接：[http ://s433108212.onlinehome.us/](http://s433108212.onlinehome.us/)

这是我在下面尝试过的，但无济于事:(

```
<div id="nav_bar">

<?php $athenasweburl = 'http://s433108212.onlinehome.us/'; ?>

<ul class="nav">
    <li class="<?php echo $page === 'home' ? "selected" : "" ?>"><a href="<?php $athenasweburl; ?>">Home</a></li>
    <li class="<?php echo $page === 'about' ? "selected" : "" ?>"><a href="<?php echo ($athenasweburl+'about'); ?>">About</a></li>
    <li class="<?php echo $page === 'blog' ? "selected" : "" ?>"><a href="<?php $athenasweburl+'blog'; ?>">Blog</a></li>
    <li class="<?php echo $page === 'book' ? "selected" : "" ?>"><a href="<?php $athenasweburl+'book'; ?>">Book</a></li>
    <li class="<?php echo $page === 'events' ? "selected" : "" ?>"><a href="<?php $athenasweburl+'events'; ?>">Events</a></li>
    <li class="<?php echo $page === 'services' ? "selected" : "" ?>"><a href="<?php $athenasweburl+'services'; ?>">Services</a></li>
    <li class="<?php echo $page === 'contact' ? "selected" : "" ?>"><a href="#dialog" name="modal">Contact</a></li>
    <li class="search"><input type="text" onfocus="if(this.value == 'Search') { this.value = ''; }" value="Search" /></li>
    <li class="search_btn"><a href="#" title="Lets find it!"><div class="search_go">Go</div></a></li>
</ul> 
```

任何人的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T00:33:48.067

您不输出 URL。注意`echo`第二节中的添加。

```
<li class="<?php echo $page === 'home' ? "selected" : "" ?>"><a href="<?php echo $athenasweburl; ?>">Home</a></li> 
```

并且串联使用`.`，而不是`+`。

```
<li class="<?php echo $page === 'about' ? "selected" : "" ?>"><a href="<?php echo $athenasweburl . 'about'; ?>">About</a></li> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T00:35:25.843

在 PHP + 中将数字加在一起..您要寻找的是粘合字符串.. 将 + 符号替换为 . （点），每个字符串前面都有一个回声，它应该可以工作。

```
<div id="nav_bar">

<?php
$menu = array("home","about","blog","book","events","services");
function echoListItem($item){
    global $page;
    $url = 'http://s433108212.onlinehome.us/';
    if($item != "home") $url .= $item;
    $selected = $item == $page ? 'selected' : '';
    echo '<li class="'.$selected.'"><a href="'.$url.'">'.ucfirst($item).'</a></li>';
}
?>

<ul class="nav">
    <?php array_walk($menu, 'echoListItem'); ?>
    <li class="<?php echo $page === "contact" ? "selected" : "" ?>"><a href="#dialog" name="modal">Contact</a></li>
    <li class="search"><input type="text" onfocus="if(this.value == 'Search') { this.value = ''; }" value="Search" /></li>
    <li class="search_btn"><a href="#" title="Lets find it!"><div class="search_go">Go</div></a></li>
</ul> 
```

这应该做的差不多！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T00:39:33.810

PHP 使用点符号“.” 要连接变量和字符串等。要将字符串“blog”连接到 $athenasweburl，您可以使用

```
 $athenasweburl = $athenasweburl."blog/";
  echo $athenasweburl; //http://s433108212.onlinehome.us/blog/ 
```

希望有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T00:35:45.217

不久前我遇到了类似的问题。

假设您在其他地方也定义了 $page ......

```
<div id="nav_bar">

<?php $athenasweburl = 'http://s433108212.onlinehome.us/'; ?>

<ul class="nav">
    <li class="<?php echo ($page === "home" ? "selected" : "") ?>"><a href="<?php $athenasweburl; ?>">Home</a></li>
    <li class="<?php echo ($page === "about" ? "selected" : "") ?>"><a href="<?php echo ($athenasweburl+'about'); ?>">About</a></li>
    <li class="<?php echo ($page === "blog" ? "selected" : "") ?>"><a href="<?php $athenasweburl.'blog'; ?>">Blog</a></li>
    <li class="<?php echo ($page === "book" ? "selected" : "") ?>"><a href="<?php $athenasweburl.'book'; ?>">Book</a></li>
    <li class="<?php echo ($page === "events" ? "selected" : "") ?>"><a href="<?php $athenasweburl.'events'; ?>">Events</a></li>
    <li class="<?php echo ($page === "services" ? "selected" : "") ?>"><a href="<?php $athenasweburl.'services'; ?>">Services</a></li>
    <li class="<?php echo $page === "contact" ? "selected" : "") ?>"><a href="#dialog" name="modal">Contact</a></li>
    <li class="search"><input type="text" onfocus="if(this.value == 'Search') { this.value = ''; }" value="Search" /></li>
    <li class="search_btn"><a href="#" title="Lets find it!"><div class="search_go">Go</div></a></li>
</ul> 
```

# iphone - iOS - 在 PDF 上搜索和替换

> ID：12592988
> 
> 赞同：2
> 
> 时间：2012-09-26T00:30:57.260
> 
> 标签：iphone, ios, ipad

我必须基于模板创建 PDF 文件。我的想法是使用“text1”、“text2”等占位符构建该模板。该模板将保存为 PDF 文件并放在应用程序包中。

在运行时，模板会被复制到一个新的 PDF 上下文中，然后我会搜索占位符，用我想要的真实文本替换它们。

[我找到了这个页面](https://stackoverflow.com/questions/1333710/how-to-edit-a-pdf-in-objective-c)，展示了如何从模板创建新的 PDF，以及[如何](http://blog.random-ideas.net/?p=184)在 PDF 上搜索。

现在的问题是：如何替换新 PDF 中的内容（文本或图像）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T07:21:12.413

真的没那么简单，除非替换文本和模板一样长。

如果替换与模板的长度相同，您可以使用您提供的第一个链接中突出显示的方法，然后只需使用核心图形在坐标的正确位置绘制替换。

如果替换文本是可变的，那么您正在尝试将文本插入到旧的 pdf 中。据我所知，这很重要，除非您使用非常低级的库，例如 libharu。

这是您的替代解决方案，它可能适合您的需求，并且我正在使用。

首先，将您的模板存储为 HTML 文件。在 HTML 文件中为要替换的文本放置占位符。加载模板，替换文本，然后使用以下方法获取您的 pdf。

```
NSString *html = @"<html><head></head><body>all my awesome html</body></html>" 
```

为数据创建 PDF 上下文。

```
NSMutableData *pdfData = [NSMutableData data];
UIGraphicsBeginPDFContextToData( pdfData, CGRectMake(0, 0, kPDFPageWidth, kPDFPageHeight), nil ); 
```

创建一个标记文本打印格式化程序，在这种情况下，参数 html 是您完全替换的 html 模板页面。

```
 UIMarkupTextPrintFormatter *fmt = [[UIMarkupTextPrintFormatter alloc]
                                           initWithMarkupText:html]; 
```

标记格式化程序是苹果为您提供打印 html 的工具，但您也可以使用它来打印 pdf。您需要子类化 UIPrintPageRenderer 才能执行此操作。所以假设你已经创建了你的子类，下面是调用的其余部分，我将在下面向你展示子类。

```
PDFPrintPageRenderer *renderer = [[PDFPrintPageRenderer alloc] init];

        // Render the html into a PDF
        [renderer addPrintFormatter:fmt startingAtPageAtIndex:0];
        [renderer printToPDF:1]; 
```

print to pdf 是一个调用，它获取您要打印的页数。如果您事先不知道这一点，确保一切看起来不错的最佳方法是将您的模板分成页面，并为每个页面执行此过程。无论如何，在这个电话之后，你应该有一个 pdf，你可以用以下内容保存它。

```
 UIGraphicsEndPDFContext();

    //store the pdf
    [pdfData writeToFile:basePath atomically:YES]; 
```

这是我使用的子类渲染器。

```
#define kPDFPageWidth 595
#define kPDFPageHeight 842

@interface PDFPrintPageRenderer : UIPrintPageRenderer
@property (nonatomic) BOOL generatingPDF;
@property (nonatomic) NSInteger heightCount;
- (NSData*) printToPDF:(NSInteger) height;
@end 
```

执行

```
@implementation PDFPrintPageRenderer
@synthesize generatingPDF;
@synthesize heightCount;

- (CGRect) paperRect
{
    if (!generatingPDF)
        return [super paperRect];

    return UIGraphicsGetPDFContextBounds();
}

- (CGRect) printableRect
{
    if (!generatingPDF)
        return [super printableRect];

    return CGRectInset( self.paperRect, 5, 5 );
}

-(NSInteger) numberOfPages {
    if (!generatingPDF) {
        return [super numberOfPages];
    }

    return self.heightCount;
}

- (NSData*) printToPDF:(NSInteger) height
{
    self.heightCount = height;
    generatingPDF = YES;

    [self prepareForDrawingPages: NSMakeRange(0, self.numberOfPages)];

    CGRect bounds = UIGraphicsGetPDFContextBounds();

    for ( int i = 0 ; i < self.numberOfPages; i++ )
    {
        UIGraphicsBeginPDFPage();

        [self drawPageAtIndex: i inRect: bounds];

    }

    generatingPDF = NO;

    return nil;
}

@end 
```

如果您有任何问题，或者它是否有帮助，或者没有，请告诉我。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-26T06:03:57.170

这是可能的。您可以拍摄要替换的文本的图像。

就像有两个文本-

text1 = pdf 中的实际文本 text2 = 要通过替换 text1 放入 pdf 中的文本

现在取 text2 的 imageview 并设置该文本的图像而不是 text1 的图像。首先，您需要搜索 text1 并获取该文本的图像。那么只有你可以用 text2 替换 text1 的图像。还有一件事你需要确保你不能直接更改文本。您必须拍摄该文本的图像，并且只能替换图像。

另一件事是在 pdf 图像中捕获该文本，您可以在 cgpoint 的帮助下使用 drwaing 中的确切点。因此，借助 x 和 y 坐标，您可以捕获要替换的文本。

# c++ - VS 2010 Qt 插件中的链接错误

> ID：12592990
> 
> 赞同：0
> 
> 时间：2012-09-26T00:31:16.347
> 
> 标签：c++, visual-studio-2010, qt, linker

我在 Visual Studio 2010 中遇到了 Qt 的一些问题。我已经从[这个站点](http://qt-windows-binaries.googlecode.com/svn/site/QtWindowsBinaries)下载了 qt 二进制文件，版本**为 Qt-4.7.3-dev-msvc2010-rdh**。这段代码编译没有任何问题。

```
class Widget : public QWidget
{
    Q_OBJECT

public:
    Widget(QWidget* parent);

protected:
     void paintEvent(QPaintEvent *e);
private:
}; 
```

当我添加这一行时：

```
void keyPressEvent(QKeyEvent *e); 
```

发生此错误

```
1>------ Build started: Project: lol, Configuration: Release Win32 ------
1>Build started 25/09/2012 21:04:40.
1>InitializeBuildStatus:
1>  Creating "Release\lol.unsuccessfulbuild" because "AlwaysCreate" was specified.
1>CustomBuild:
1>  Moc'ing lol.h...
1>ClCompile:
1>  All outputs are up-to-date.
1>  moc_lol.cpp
1>  lol.cpp
1>  main.cpp
1>  Generating Code...
1>lol.obj : error LNK2001: unresolved external symbol "protected: virtual void __thiscall lol::mousePressEvent(class QMouseEvent *)" (?mousePressEvent@lol@@MAEXPAVQMouseEvent@@@Z)
1>C:\Users\VTM\Documents\Visual Studio 2010\Projects\TC\Win32\Release\\lol.exe : fatal error LNK1120: 1 unresolved externals
1>
1>Build FAILED.
1>
1>Time Elapsed 00:00:04.68
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T00:49:01.830

链接器似乎无法找到 keyPressEvent 实现。您是否在 Widget 类中实现了 keyPressEvent() ？您必须这样做，因为您在类定义中声明了这一点。添加以下代码只是为了将事件转发到基类。

```
void Widget::keyPressEvent(QKeyEvent *e){ QWidget::keyPressEvent(e);} 
```

# html - CSS 类在渲染后未设置样式 标签

> ID：12592994
> 
> 赞同：2
> 
> 时间：2012-09-26T00:31:36.670
> 
> 标签：html, css

我有一个页面列出了指向其他网站的链接。每个链接后面都附有对所链接站点的简要说明。我希望链接文本比描述略大，所以我添加了一个 CSS 类定义 a.link，在其中我将 font-size 定义为 16px。完整列表位于标准标签内，每个列表项之间`<p>`都有标签。`<hr>`问题是只有列表中的第一个链接获得新的字体大小。第一个链接之后的每个链接都丢失了不仅在链接类定义中定义的所有样式，而且在`<p>`标签中也定义了所有样式。如果我删除`<hr>`标签，列表中的每个项目的样式都是正确的。如果我将列表中的每个链接包装在一个`<p>`标签内，它们的样式也会正确，但如果可能的话，我宁愿不要用额外的标签把列表弄乱

这是我的样式表代码：

```
#pane {
    float: right;
    width: 800px;
}

#pane p {
    margin-left: 15px;
    font-family: verdana;
    font-size: 12px;
}

#pane p a.link { font-size: 16px; } 
```

以下是生成的 HTML 示例：

```
<div id="pane">
<p>
    <a href="http://www.google.com" class="link">Google</a> - For finding stuff
    <hr>
    <a href="http://www.newegg.com" class="link">Newegg</a> - For buying stuff
    <hr>
</p>
</div> 
```

有没有其他人遇到过这种行为，并找到了一种通过在各处添加`<p>`标签来修复它的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T00:38:24.403

有必要把它包装成一个段落吗？如果没有，那么您可能会丢失该标签，然后它就可以正常工作。[http://jsfiddle.net/bqhC9/](http://jsfiddle.net/bqhC9/)

```
<div id="pane">
    <p>
        <a href="http://www.google.com" class="link">Google</a> - For finding stuff
    </p>
        <hr>
    <p>    
        <a href="http://www.newegg.com" class="link">Newegg</a> - For buying stuff
    </p>    
        <hr>

    </div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T00:40:42.637

您不能在标签`<hr>`中放置一个 inside 。`<p>`如果您尝试这样做，浏览器会通过`<p>`为您关闭标签来自动更正它。第二个链接不再位于`<p>`元素内，因此您的 CSS 规则不再适用。

这就是浏览器修复您的代码的原因，也是您的 CSS 类不再适用的原因。

```
<div id="pane">
<p>
    <a href="http://www.google.com" class="link">Google</a> - For finding stuff
    </p><hr>
    <a href="http://www.newegg.com" class="link">Newegg</a> - For buying stuff

<p></p>
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T01:37:40.483

你最好`<p>, <hr>` 不要使用`<p>`.

`a.link`设置将显示 a 标签的样式，`display:block`就像封闭`<p>`标签一样。

还自动关闭您的`<hr/>`

然后更正您的 css 选择器：`#pane > a.link`如果您实际上需要具有选择性。单独设置样式可能会更好`a.link`，这样您以后可以在需要时用另一个选择器覆盖它，而不会遇到[特异性](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T00:41:54.163

链接的集合可能更适合无​​序列表 ( `UL`)，可能位于`NAV`.

您的问题是由于`HR`内部`P`无法[验证](http://validator.w3.org/)（并且有充分的理由）引起的。为了确认，我使用了这个示例：

```
<!doctype html>
<html>
<head>
    <title>Test</title>
</head>
<body>
<div id="pane">
<p>
    <a href="http://www.google.com" class="link">Google</a> - For finding stuff
    <hr>
    <a href="http://www.newegg.com" class="link">Newegg</a> - For buying stuff
    <hr>
</p>
</div>
</body>
</html> 
```

> 如果 p 元素后面紧跟 ...HR...，则可以省略 p 元素的结束标记

^(来源：[http ://www.w3.org/TR/html-markup/p.html#p](http://www.w3.org/TR/html-markup/p.html#p))

正如@Bill 指出的那样，这会导致解析器`P`在您不期望的时候关闭它。

An`HR` [代表一个主题中断](http://www.w3.org/TR/html-markup/hr.html#hr)，它在段落内部在语义上是无效的。从逻辑上讲（至少在英语中），一个段落应该[包含关于单个主题的相关想法的集合](http://en.wikipedia.org/wiki/Paragraph)，所以这是有道理的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-26T00:45:52.053

hr 不能在 p 标签中。您可以将 p 标签更改为 div

```
 <!doctype html>
<html>
<head>
<style>
#pane {
float: right;
width: 800px;
}

#pane div {
  margin-left: 15px;
  font-family: verdana;
  font-size: 12px;
}

#pane div a.large    { font-size: 26px; }
</style>
</head>
<body>
<div id="pane">
<div>
    <a href="http://www.google.com" class="large">Google</a> - For finding stuff
    <hr/>
    <a href="http://www.newegg.com" class="large">Newegg</a> - For buying stuff
    <hr/>
</div>
</div>
</body>
</html> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-26T00:43:46.720

我认为您的 HR 标签有问题，在 XHTML 中您必须关闭标签。所以你的人力资源应该看起来像`<hr/>`

```
 <div id="pane">
<p>
    <a href="http://www.google.com" class="link">Google</a> - For finding stuff
    <hr/>
    <a href="http://www.newegg.com" class="link">Newegg</a> - For buying stuff
    <hr/>
</p>
</div> 
```

比它应该工作，没有理由不这样做。

# java - 如何在java中找到特定折叠下的文件夹？

> ID：12592996
> 
> 赞同：0
> 
> 时间：2012-09-26T00:31:43.633
> 
> 标签：java, jsp

我正在尝试通过spring和jsp查找和打印文件夹名称。我想查找文件夹的名称以及 /somefolder/ 文件夹下有多少个

我希望代码采用java风格，请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T00:35:03.017

[File#listFiles](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#listFiles%28%29)可以获取目录中的文件，您可以使用[File#isDirectory](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#isDirectory%28%29)来检查这些是文件还是目录，方法是循环遍历结果或使用传递给 listFiles的[FileFilter 。](http://docs.oracle.com/javase/6/docs/api/java/io/FileFilter.html)

# java - java vst主机库

> ID：12592997
> 
> 赞同：3
> 
> 时间：2012-09-26T00:31:46.020
> 
> 标签：java, vst

我正在用 java 编写一个简单的音序器，我也想托管 vst 仪器。
我可以用来添加 vst 功能的最佳库是什么？

我找到[了 jvsthost](https://github.com/mhroth/jvsthost)，但我想确定在我开始使用它之前没有更好的选择。特别是关于 jvsthost 的以下行让我很害怕：

> 注意：并非所有合成器都有效。如果您有一个您特别热衷于使用的软件，请给我们发送电子邮件，我们将尝试与您一起调试它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T13:10:53.227

据我所知，jvsthost 是托管 VST 的唯一 Java 方式，没有深入研究 JNI 并自己动手。所以我会说它可能值得一试，直到你遇到上述问题，在这种情况下它是开源的，你总是可以修补它。;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-24T10:42:21.423

There is [JVST](http://jvst.sourceforge.net/), though I did not try it yet.