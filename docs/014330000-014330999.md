# StackOverflow 问答 14330000-14330999

# android - ListFragment / CursorAdapter 显示为空（无数据）

> ID：14330002
> 
> 赞同：3
> 
> 时间：2013-01-15T01:55:45.613
> 
> 标签：android, listview, android-listfragment, android-cursoradapter

我无法让我的列表视图显示我的数据，它只显示空/无数据文本视图。

我一直在尝试解决这个问题，搜索了stackoverflow和网络。

尝试了很多不同的东西。

Logcat 显示我的 newView/bindView 没有被调用/到达。

我认为这要么是我的 XML 布局中的错误（我的 CursorAdapter 不知道膨胀我的行布局/视图）。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >

    <!-- <include layout="@layout/fragment_data_table_header" />  -->

    <ListView
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="1.0"
        android:orientation="vertical">
    </ListView>

    <TextView
        android:id="@android:id/empty"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:text="No Data"
        android:textColor="@color/accent"
        android:textSize="@dimen/text_xlarge" />

</LinearLayout> 
```

或者我错误地调用了 setListAdapter（或者使用了错误的导入？），因为我的游标测试显示它有数据。

```
package au.id.teda.broadband.usage.ui.fragments;

import com.actionbarsherlock.app.SherlockListFragment;

import android.app.Activity;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.database.Cursor;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ListView;
import au.id.teda.broadband.usage.R;
import au.id.teda.broadband.usage.authenticator.AccountAuthenticator;
import au.id.teda.broadband.usage.cursoradapter.DailyDataTableCursorAdapter;
import au.id.teda.broadband.usage.database.DailyDataDatabaseAdapter;
import au.id.teda.broadband.usage.helper.AccountInfoHelper;
import au.id.teda.broadband.usage.helper.AccountStatusHelper;
import au.id.teda.broadband.usage.ui.MainActivity;

public class DataTableFragment extends SherlockListFragment {

    // Debug tag pulled from main activity
    private final static String DEBUG_TAG = MainActivity.DEBUG_TAG;

    // View inflated by fragment
    private View mFragmentView;

    // Helper classes
    private AccountInfoHelper mAccountInfo;
    private AccountStatusHelper mAccountStatus;
    private AccountAuthenticator mAccountAuthenticator;

    // Receive sync broadcasts
    private SyncReceiver mSyncReceiver;
    private IntentFilter filter;

    // Activity context to be used
    private Context mContext;

    /**
     * Called 1st in the fragment life cycle
     */
    @Override
    public void onAttach(Activity activity) {
        super.onAttach(activity);

        // Load helper classes
        mAccountInfo = new AccountInfoHelper(activity);
        mAccountStatus = new AccountStatusHelper(activity);
        mAccountAuthenticator = new AccountAuthenticator(activity);
    }

    /**
     * Called 2nd in the fragment life cycle
     */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Set context for fragment. 
        // Activity extends context so we get it from there
        mContext = getActivity();

        // Setup broadcast receiver for background sync
        String BROADCAST = getString(R.string.sync_broadcast_action);
        filter = new IntentFilter(BROADCAST);
        mSyncReceiver = new SyncReceiver();
    }

    /**
     * Called 3rd in the fragment life cycle
     */
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        // Set fragment layout to be inflated
        mFragmentView = inflater.inflate(R.layout.fragment_data_table, container, false);

        return mFragmentView;
    }

    /**
     * Called 4th in the fragment life cycle
     */
    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

        DailyDataDatabaseAdapter mDatabase = new DailyDataDatabaseAdapter(mContext);
        mDatabase.open();

        String period = mAccountStatus.getDataBaseMonthString();
        //Log.d(DEBUG_TAG, "Period to query database:" + period);

        Cursor cursor = mDatabase.getPriodUsageCursor(period);
        Log.d(DEBUG_TAG, "Cursor Length:" + cursor.getCount());

        DailyDataTableCursorAdapter adapter = new DailyDataTableCursorAdapter(mContext, cursor, true);
        //adapter.testCursor(cursor);

        setListAdapter(adapter);
        //cursor.close();
        mDatabase.close();
    }

    /**
     * Called 5th in the fragment life cycle
     */
    @Override
    public void onResume() {
        super.onResume();

        // Register broadcast receiver for background sync
        getActivity().registerReceiver(mSyncReceiver, filter);
    }

    @Override
    public void onListItemClick(ListView l, View v, int position, long id) {
        Log.d(DEBUG_TAG, "Item clicked: " + id);
    }

    /**
     * First call in the death of fragment
     */
    @Override
    public void onPause() {
        super.onPause();

        // Unregister broadcast receiver for background sync
        getActivity().unregisterReceiver(mSyncReceiver);
    }

    public class SyncReceiver extends BroadcastReceiver {

        @Override
        public void onReceive(Context context, Intent i) {

            String MESSAGE = getString(R.string.sync_broadcast_message);
            String SYNC_START = getString(R.string.sync_broadcast_start);
            String SYNC_COMPLETE = getString(R.string.sync_broadcast_complete);

            String msg = i.getStringExtra(MESSAGE);
            if (msg.equals(SYNC_START)){
                // Nothing to see here move along
            } else if (msg.equals(SYNC_COMPLETE)){
            }
        }

    }

} 
```

还是我的 CursorAdapter 构造函数错了？所以它不知道开始膨胀和绑定视图/行

```
package au.id.teda.broadband.usage.cursoradapter;

import java.text.DateFormat;
import java.text.DecimalFormat;
import java.text.NumberFormat;
import java.text.SimpleDateFormat;
import java.util.Date;

import android.content.Context;
import android.database.Cursor;
import android.support.v4.widget.CursorAdapter;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TextView;
import au.id.teda.broadband.usage.R;
import au.id.teda.broadband.usage.database.DailyDataDatabaseAdapter;
import au.id.teda.broadband.usage.ui.MainActivity;

public class DailyDataTableCursorAdapter extends CursorAdapter {

    private final static String DEBUG_TAG = MainActivity.DEBUG_TAG;

    private LayoutInflater mLayoutInflater;
    private Cursor mCursor;
    private Context mContext;

    private int COLUMN_INDEX_DAY;
    private int COLUMN_INDEX_PEAK;
    private int COLUMN_INDEX_OFFPEAK;
    private int COLUMN_INDEX_UPLOADS;
    private int COLUMN_INDEX_FREEZONE;

    private int count;

    private int GB = 1000000;

    public DailyDataTableCursorAdapter(Context context, Cursor cursor, boolean autoRequery) {
        super(context, cursor, autoRequery);
        Log.d(DEBUG_TAG, "DailyDataCursorAdapter");

        this.mContext = context;
        this.mCursor = cursor;
        this.mLayoutInflater = LayoutInflater.from(context);

        this.COLUMN_INDEX_DAY = mCursor.getColumnIndex(DailyDataDatabaseAdapter.DAY);
        this.COLUMN_INDEX_PEAK = mCursor.getColumnIndex(DailyDataDatabaseAdapter.PEAK);
        this.COLUMN_INDEX_OFFPEAK = mCursor.getColumnIndex(DailyDataDatabaseAdapter.OFFPEAK);
        this.COLUMN_INDEX_UPLOADS = mCursor.getColumnIndex(DailyDataDatabaseAdapter.UPLOADS);
        this.COLUMN_INDEX_FREEZONE = mCursor.getColumnIndex(DailyDataDatabaseAdapter.FREEZONE);

    }

    @Override
    public int getCount() {
        return count;
    }

    @Override
    public Object getItem(int position) {
        return position;
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    /**

    private final class ViewHolder {
        public TextView day;
        public TextView peak;
        public TextView offpeak;
        public TextView uploads;
        public TextView freezone;
        public TextView total;
        public TextView accum;
    }

    @Override
    public View getView(int position, View view, ViewGroup parent) {

        Log.d(DEBUG_TAG, "DailyDataCursorAdapter.getView()");

        if (mCursor.moveToPosition(position)) {
            ViewHolder holder;

            if (view == null) {
                view = mLayoutInflater.inflate(R.layout.fragment_data_table_row, null);

                holder = new ViewHolder();
                holder.day = (TextView) view.findViewById(R.id.fragment_data_table_row_date);
                holder.peak = (TextView) view.findViewById(R.id.fragment_data_table_row_peak);
                holder.offpeak = (TextView) view.findViewById(R.id.fragment_data_table_row_offpeak);
                holder.uploads = (TextView) view.findViewById(R.id.fragment_data_table_row_uploads);
                holder.freezone = (TextView) view.findViewById(R.id.fragment_data_table_row_freezone);
                holder.total = (TextView) view.findViewById(R.id.fragment_data_table_row_total);
                holder.accum  = (TextView) view.findViewById(R.id.fragment_data_table_row_accum);

                view.setTag(holder);
            }
            else {
                holder = (ViewHolder) view.getTag();
            }

            String day = LongDateToString(mCursor.getLong(COLUMN_INDEX_DAY), "dateOfMouth");
            String peak = IntUsageToString(mCursor.getLong(COLUMN_INDEX_PEAK));
            String offpeak = IntUsageToString(mCursor.getLong(COLUMN_INDEX_OFFPEAK));
            String uploads = IntUsageToString(mCursor.getLong(COLUMN_INDEX_UPLOADS));
            String freezone = IntUsageToString(mCursor.getLong(COLUMN_INDEX_FREEZONE));
            String total = IntUsageToString( mCursor.getLong(COLUMN_INDEX_PEAK)
                    + mCursor.getLong(COLUMN_INDEX_OFFPEAK) );

            Log.d(DEBUG_TAG, "day:" + day);
            Log.d(DEBUG_TAG, "peak:" + peak);
            Log.d(DEBUG_TAG, "offpeak:" + offpeak);
            Log.d(DEBUG_TAG, "uploads:" + uploads);
            Log.d(DEBUG_TAG, "freezone:" + freezone);
            Log.d(DEBUG_TAG, "totalUsageLong:" + total);

            holder.day.setText(day);
            holder.peak.setText(peak);
            holder.offpeak.setText(offpeak);
            holder.uploads.setText(uploads);
            holder.freezone.setText(freezone);
            holder.total.setText(total);
        }

        return view;
    }
    **/

    @Override
    public View newView(Context context, Cursor cursor, ViewGroup parent) {
        Log.d(DEBUG_TAG, "DailyDataCursorAdapter.newView()");
        // Inflate the list view with the changes above
        View view = mLayoutInflater.inflate(R.layout.fragment_data_table_row, parent, false);
        return view;
    }

    @Override
    public void bindView(View row, Context context, Cursor cursor) {
        Log.d(DEBUG_TAG, "DailyDataCursorAdapter.bindView()");
        // Set usage text views
        TextView dateTV = (TextView) row.findViewById(R.id.fragment_data_table_row_date);
        TextView peakTV = (TextView) row.findViewById(R.id.fragment_data_table_row_peak);
        TextView offpeakTV = (TextView) row.findViewById(R.id.fragment_data_table_row_offpeak);
        TextView uploadTV = (TextView) row.findViewById(R.id.fragment_data_table_row_uploads);
        TextView freezoneTV = (TextView) row.findViewById(R.id.fragment_data_table_row_freezone);
        TextView totalTV = (TextView) row.findViewById(R.id.fragment_data_table_row_total);
        TextView accumTV = (TextView) row.findViewById(R.id.fragment_data_table_row_accum);

        // Set variables and pull data from database cursor
        // TODO: Change DailyDataDBAdapter to dailyDataDBHelper???
        long day = cursor.getLong(COLUMN_INDEX_DAY);
        long peak = cursor.getLong(COLUMN_INDEX_PEAK);
        long offpeak = cursor.getLong(COLUMN_INDEX_OFFPEAK);
        long uploads = cursor.getLong(COLUMN_INDEX_UPLOADS);
        long freezone = cursor.getLong(COLUMN_INDEX_FREEZONE);
        long total = (peak + offpeak);

        Log.d(DEBUG_TAG, "day:" + day);
        Log.d(DEBUG_TAG, "peak:" + peak);
        Log.d(DEBUG_TAG, "offpeak:" + offpeak);
        Log.d(DEBUG_TAG, "uploads:" + uploads);
        Log.d(DEBUG_TAG, "freezone:" + freezone);
        Log.d(DEBUG_TAG, "total:" + total);

        dateTV.setText(LongDateToString(day, "dateOfMouth"));
        peakTV.setText(IntUsageToString(peak));
        offpeakTV.setText(IntUsageToString(offpeak));
        uploadTV.setText(IntUsageToString(uploads));
        freezoneTV.setText(IntUsageToString(freezone));
        totalTV.setText(IntUsageToString(total));

    }

    public void testCursor(Cursor cursor){

        cursor.moveToFirst();
        if (cursor != null){
            while (cursor.moveToNext()){

                long day = cursor.getLong(COLUMN_INDEX_DAY);
                long peak = cursor.getLong(COLUMN_INDEX_PEAK);
                long offpeak = cursor.getLong(COLUMN_INDEX_OFFPEAK);
                long uploads = cursor.getLong(COLUMN_INDEX_UPLOADS);
                long freezone = cursor.getLong(COLUMN_INDEX_FREEZONE);
                long total = (peak + offpeak);

                Log.d(DEBUG_TAG, "dateLong:" + day);
                Log.d(DEBUG_TAG, "peakUsageLong:" + peak);
                Log.d(DEBUG_TAG, "offpeakUsageLong:" + offpeak);
                Log.d(DEBUG_TAG, "uploadUsageLong:" + uploads);
                Log.d(DEBUG_TAG, "freezoneUsageLong:" + freezone);
                Log.d(DEBUG_TAG, "totalUsageLong:" + total);

            }
            cursor.close();
        }
    }

    // Return string values for date long millisec stored in db
    private String LongDateToString(long millisecs, String convertTo) {
        DateFormat date_format = null;
        if (convertTo == "dayOfWeek") {
            date_format = new SimpleDateFormat("EEE");
        } else if (convertTo == "dateOfMouth"){
            date_format = new SimpleDateFormat("dd");
        } else if (convertTo == "mouthOfYear"){
            date_format = new SimpleDateFormat("MMM");
        }
        Date resultdate = new Date(millisecs);
        return date_format.format(resultdate);
    }

    // Return formated string value for int stored in db
    private String IntUsageToString (long usage){
        NumberFormat numberFormat = new DecimalFormat("#,###");
        return numberFormat.format(usage/GB);

    }

} 
```

任何帮助/建议将不胜感激。

# ruby - 将 ActiveRecord 从 3.0.3 更新到 3.2.3 后字符串序列化方法更改

> ID：14330012
> 
> 赞同：1
> 
> 时间：2013-01-15T01:56:54.723
> 
> 标签：ruby, activerecord

更新到 AR 3.0 后：分配给字符串属性的数组似乎被序列化为 YAML，以前它们只是转换为数组的字符串表示形式。

```
 Failure/Error: photo.associated_usernames.should == ["moo", "voo", "doo"]
   expected: ["moo", "voo", "doo"]
        got: ["---\n- moo\n- voo\n- doo\n"] (using ==)
   Diff:
   @@ -1,2 +1,2 @@
   -["moo", "voo", "doo"]
   +["---\n- moo\n- voo\n- doo\n"] 
```

所以使用旧 gem 的数据库中的字符串字段实际上看起来像 '["moo", "voo", "doo"]'

建议？

# python - 在 Python 中打印函数

> ID：14330016
> 
> 赞同：6
> 
> 时间：2013-01-15T01:57:11.013
> 
> 标签：python

我刚刚开始学习 Python，我目前正在阅读一本正在教我的书，在书中，一个函数就像我在下面所做的那样打印第一个函数中定义的实际文本，但是当我运行我的脚本，它说： `<function two at 0x0000000002E54EA0>`作为输出。我究竟做错了什么？我安装了错误的 Python 还是什么？我下载的是3.3.0版本

这是我的代码：

```
def one():
    print ("lol")
    print ("dood")

def two():
    print (one)
    print (one)

print (two) 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-15T02:27:28.340

这不是您要寻找的答案……</p>

但是为了完整性，假设您确实想要打印函数本身的代码。这仅在代码是从文件（而不是 REPL）执行时才有效。

```
import inspect
code, line_no = inspect.getsourcelines(two)
print(''.join(code)) 
```

也就是说，这样做的充分理由并不多。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-15T02:00:19.510

您的函数已经打印文本，您不需要打印函数。打电话给他们（不要忘记括号）。

```
def one():
    print ("lol")
    print ("dood")

def two():
    one()
    one()

two() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T01:59:47.607

您使用以下语法调用函数

```
def two():
    one()
    one()

two() 
```

括号内的内容是您将在本书后面学习的输入参数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T02:07:11.080

打印发生在您的函数内部。函数本身就是要执行的代码序列。在您的情况下，此代码正在打印`"lol"`并`"dood"`显示在屏幕上。为了执行此代码，您只需输入函数名称即可*调用该函数：*

```
def one():
   print("lol")
   print("dood")

def two():
   one() #simply type the function's name to execute its code
   one()

two() 
```

调用`print`函数本身会打印函数在调用时执行的代码在内存中的位置，因此会出现乱码输出。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-15T02:04:44.000

您正在打印函数本身，而不是函数应该打印的内容，也许您想以这种方式打印

```
def one():
    print ("lol")
    print ("dood")

def two():
    print one()
    print one()

print two() 
```

输出将是：lol dood

# java - 如何使用 Spring 管理多个“运行时注意到”与不同 jdbc（或休眠？）的数据库连接？

> ID：14330019
> 
> 赞同：2
> 
> 时间：2013-01-15T01:57:30.637
> 
> 标签：java, spring, hibernate, jdbc

我有一个 Web 应用程序访问数据库，它的连接信息（连接字符串、用户名、密码）由用户在运行时输入。

因此，我在部署时看不到任何信息。

系统应该支持多种不同jdbc的数据库

如何使用 spring/hibernate 管理这种情况（我怀疑 hibernate 可以处理这个问题，因为数据结构在运行时是已知的）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T17:11:49.010

您可以使用类似于[此处描述的方法](http://blog.springsource.com/2007/01/23/dynamic-datasource-routing/)

基本上只是继承 AbstractRoutingDataSource 并覆盖方法确定目标数据源（如果您需要从应用程序中创建数据源）或确定当前查找键（如果您的数据源将在应用服务器中创建）。

在 determineTargetDataSource 方法中，您可以返回您需要的任何数据源，或者在需要时创建一个新数据源。

# ruby-on-rails - 元编程对于在 Rails 或 django 上使用 ruby 构建网站有多大用处？

> ID：14330022
> 
> 赞同：-3
> 
> 时间：2013-01-15T01:57:42.520
> 
> 标签：ruby-on-rails, ruby, metaprogramming

几周前我开始在 Rails 上学习 Ruby。我还没有完全理解元编程，但首先我想问一下，如果我只想使用 ruby​​ on rails 来构建网站，元编程是否值得学习。我看到的元编程示例是动态生成未定义的类方法，但有必要吗？

我的背景：我每天都使用 python 进行科学计算，并且对 django 的经验有限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T02:08:01.720

这完全取决于网站的功能。学习元编程的基本思想，然后继续你正在做的事情。然后，您将知道您是否正在尝试解决元编程可以帮助解决的问题，并且您可以挖掘更多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T02:20:19.193

元编程绝不是编写网站的必要条件。

如果您开始使用 Ruby 进行编程，最好不要担心它，直到您对该语言更加熟悉为止。它为您提供的额外灵活性是以牺牲复杂性和模糊性为代价的。

# java - Android 多边形叠加 ontap

> ID：14330024
> 
> 赞同：0
> 
> 时间：2013-01-15T01:57:53.830
> 
> 标签：java, android, android-mapview

好的，我使用谷歌并没有发现任何问题可以解决我的问题，我在 a 上有多个多边形，`MapView`并且所有内容都正确显示在地图上。我想要做的是添加一个`onTap`以在点击时显示有关多边形的信息，但我无法让它识别多边形上的点击。以下是我目前拥有的。有人可以告诉我我在该`onTap`部分做错了什么吗？

```
public class Polygon extends Overlay {
ArrayList<GeoPoint> geoPoints;
static ArrayList<String> custCount;
static ArrayList<String> hexCode;
static ArrayList<String> custMin;
static ArrayList<String> custMax;
static String tester;
Point firstPoint;
static List<HashMap<String, String>> colorRanges;

private Path path;

public Polygon(ArrayList<GeoPoint> points){
    geoPoints = points;
}
public class setColorRanges{

public setColorRanges(List<HashMap<String, String>> colorData) {

     colorRanges = colorData;
  }

}

public class  CustCount{
    public CustCount(ArrayList<String> str) {
        custCount = str;
    }
 }

@Override
public void draw(Canvas canvas, MapView mapView, boolean shadow){

    //Set the color and style
    Paint paint = new Paint();
    Paint paint1 = new Paint();

    //Create path and add points

    int origin = 0;
    for(int i = 0; i < geoPoints.size()/5;i++){
        path = new Path();
        firstPoint = new Point();

        mapView.getProjection().toPixels(geoPoints.get(origin), firstPoint);
        path.moveTo(firstPoint.x, firstPoint.y);

        for(int j=0; j<5; j++) {
            Point nextPoint = new Point();
            mapView.getProjection().toPixels(geoPoints.get(origin+j), nextPoint);
            path.lineTo(nextPoint.x, nextPoint.y);

        }
        //loop thru array of color ranges
        int curCustCount = Integer.valueOf(custCount.get(i));
        String curColor = "";
        for(int z=0; z<colorRanges.size(); z++) {
            int custmin = Integer.valueOf( colorRanges.get(z).get("custmin") );
            int custmax = Integer.valueOf( colorRanges.get(z).get("custmax") );

            if( curCustCount >= custmin && curCustCount <= custmax) {
                curColor = colorRanges.get(z).get("hexcode");
                break;
            }
        }

        paint.setColor(Color.parseColor(curColor));
        paint.setAlpha(70);
        paint.setStyle(Paint.Style.FILL);
        paint1.setColor(Color.parseColor(curColor));
        paint1.setAlpha(100);
        paint1.setStyle(Paint.Style.STROKE);

        path.lineTo(firstPoint.x, firstPoint.y);
        path.setLastPoint(firstPoint.x, firstPoint.y);
        canvas.drawPath(path, paint);
        canvas.drawPath(path,paint1);

        origin += 5;
    }

    super.draw(canvas, mapView, shadow);
}
@Override
public boolean onTap(GeoPoint geoPoint, MapView mapView) {

    RectF rectF = new RectF();
    path.computeBounds(rectF, true);
    Region region = new Region();
    region.setPath(path, new Region((int) rectF.left, (int) rectF.top, (int) rectF.right, (int) rectF.bottom));

    Point point = new Point();
    mapView.getProjection().toPixels(geoPoint, point);

    if (region.contains(point.x, point.y)) {
        Log.d("onTap", point.x+" "+point.y);
    }

    return super.onTap(geoPoint, mapView);
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T02:40:54.097

你正在重用你的`path`变量`onDraw()`，你有 -

```
path = new Path(); 
```

当您到达`onTap()`仅绘制的最后一条路径时，将保存为`path`. 所以你只会在最后一个多边形上注册点击。如果您以后需要所有路径，则应将它们保存在一个`List`或其他集合中并在`onTap()`.

或者，您可以将多边形渲染为单个`Path`，并且只绘制并测试一次。问题是你不知道点击了哪个多边形，只知道其中一个。

# php - 简单代理无法获得 JSON 响应

> ID：14330027
> 
> 赞同：1
> 
> 时间：2013-01-15T01:58:23.783
> 
> 标签：php, javascript, json, proxy, cross-domain

我正在尝试通过 php 代理连接到一个站点（这个：[https](https://raw.github.com/cowboy/php-simple-proxy/master/ba-simple-proxy.php) ://raw.github.com/cowboy/php-simple-proxy/master/ba-simple-proxy.php ），这是 JavaScript对响应执行某些操作的函数：

编辑：代码现在看起来像这样。还是没有雪茄。

```
function exista(word) {

    alert(word);
    var proxy = 'ba-simple-proxy.php?url=';
    var uri = "http://api.wordreference.com/0.8/ff175/json/roen/" + word;
    uri = encodeURIComponent(uri);
    alert(proxy + uri);
    var cuvantulexista = 1;
    jQuery.ajax({
        "async": false,
        "url": proxy + uri,
        "dataType": 'json',
        "method": "GET",
        "success": function (data) {
            alert("HERE!");
            if (data.Error || data.Response)
                cuvantulexista = 0;
        }
    });
    return cuvantulexista;
} 
```

php 文件与包含上述函数的 js 文件位于同一文件夹中，并且位于包含 html 文件的 public 文件夹中。

问题是我没有得到任何回应，我真的不知道为什么。

我还在 html 中包含了 php，如下所示：

```
<?php
    include("js/ba-simple-proxy.php");
?> 
```

我很抱歉我的极端菜鸟，但这是我第一次使用 php 和跨域通信。谢谢你。:)

编辑：如果有帮助，该页面不会托管在域上。

Edit2：所以，我在没有 --disable-web-security 的情况下打开了 Google Chrome，我再次收到此错误：

```
XMLHttpRequest cannot load file:///home/bogdan/Scrabble-Online/public/ba-simple-proxy.php?url=http%3A%2F%2Fapi.wordreference.com%2F0.8%2Fff175%2Fjson%2Froen%2FRHE. Origin null is not allowed by Access-Control-Allow-Origin. 
```

但是，如果我在 localhost 上启动它，它不会显示该消息。它只是不连接。我现在很困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T12:25:39.707

要进行横向请求，您的目标页面需要允许您访问：

```
header('Access-Control-Allow-Origin: *'); 
```

您可以在代理脚本的顶部添加它。更好地替换`*`为您的域。

但是`file://`URL 不能被授权。所以你需要有一个真实的域名。

另请参阅[https://stackoverflow.com/a/3744697/956397](https://stackoverflow.com/a/3744697/956397)

# knockout.js - 用于 KnockoutJS 的智能感知

> ID：14330032
> 
> 赞同：3
> 
> 时间：2013-01-15T01:59:15.380
> 
> 标签：knockout.js, visual-studio-2012

我已经安装了 VS12 Update 1 的 RC，希望能够点亮 Intellisense for Knockout，正如 John Papa 所描述的那样： http: [//www.johnpapa.net/knockout-intellisense-in-visual-studio-2012/#comment-59581](http://www.johnpapa.net/knockout-intellisense-in-visual-studio-2012/#comment-59581) .

因为我正在使用 Razor：

```
@if (false)
{
     /// <reference path="~/Scripts/knockout-2.2.0.js" />
    <script src="~/Scripts/knockout-2.2.0.js"></script>    
} 
```

没有喜悦。有许多不同的 Nuget 包专门用于 Knockout - 是否正在发挥作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T14:18:57.903

你有对 */scripts/_references.js* 的引用吗？无论如何，我认为您仍然需要一个*///*用于淘汰文件的参考。并确保您正在使用 MVC4 项目。

# jquery - jqgrid 不能从 .change 工作

> ID：14330035
> 
> 赞同：0
> 
> 时间：2013-01-15T01:59:24.270
> 
> 标签：jquery, jqgrid

我有以下内容：

```
 function setupGrid(labId) {

       var url = '@Url.Action("GetProgData", "Prog")' + '?lId=' + lId;
       alert(url);

       $("#loginList").jqGrid({
         url: url,
         datatype: "json",
         colNames: ['PNum', 'Client', 'Salesperson', 'Email', ....
       .....
       ..... 
```

我也有以下代码：

```
 <script type="text/javascript">
      $(document).ready(function () {
       var labId;

       $("#LabId").change(function () {   // point1
        labId = $("#LabId").val();
        setupGrid(labId); // this goes to setupGrid but DOES NOT go to the given url( url = '@Url.Action("GetProgData", "Prog")' + '?lId=' + lId;)         
       });

       // point 2
       setupGrid(labId);  // this goes to setupGrid  and DOES go to the given url(url = '@Url.Action("GetProgData", "Prog")' + '?lId=' + lId;)
       ...... 
```

当程序第一次运行时，它会转到 point2，然后转到 setupGrid 函数并转到以下 url 值：

```
 url: url 
```

当我从 .change (point1) 调用它时，它再次转到 SetupGrid 并且警报显示正确的值，但不明白为什么当我在 url 处放置断点时它没有转到 url。为什么它第一次起作用但是当我从 .change 执行它时它不会转到 url。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T08:59:50.217

我看到 jqGrid 的工作方式存在共同的理解问题。

如果你使用`$("#loginList").jqGrid({...});`你需要有空`<table>`元素`id="loginList"`。jqGrid 将`<table>`元素转换为相对复杂的 div、表格等结构。所以 jqGrid 首先*初始化*网格。它构建网格的*外部*。

然后 jqGrid 使 Ajax 调用`url`（在使用`datatype: "json"`或的情况下`datatype: "xml"`）并填充网格*体*。一个可以`$("#loginList").trigger("reloadGrid")`用来刷新网格体。

我希望现在应该清楚**一个人只能调用`$("#loginList").jqGrid({...});`一次**。如果您确实尝试从现有网格再次创建网格， l 将被忽略。

您应该做的只是将代码重写为以下内容

```
$(document).ready(function () {
    var labId;

    $("#loginList").jqGrid({
        url: '@Url.Action("GetProgData", "Prog")',
        postData: {
            lId: function () {
                return $("#LabId").val();
            }
        },
        datatype: "json",
        colNames: ['PNum', 'Client', 'Salesperson', 'Email', ....
    });

    $("#LabId").change(function () {   // point1
        $("#loginList").trigger("reloadGrid");
    });
}); 
```

您可以[在此处](https://stackoverflow.com/a/2928819/315935)阅读更多关于`postData`. 在[另一个答案](https://stackoverflow.com/a/10408057/315935)中，如果需要将值从一种形式的所有控件发送到控制器操作，您将找到可行的替代方法。

# linux-kernel - 为什么将指针复制到变量中并再次读取？

> ID：14330040
> 
> 赞同：1
> 
> 时间：2013-01-15T01:59:48.407
> 
> 标签：linux-kernel

我正在阅读 linux 内核中的 attach_pid 函数。它的代码如下：

```
{
    struct pid_link *link;

    link = &task->pids[type];
    link->pid = pid;
    hlist_add_head_rcu(&link->node, &pid->tasks[type]);
} 
```

我不明白为什么它不直接像这样设置指针：task->pids[type]->pid = pid. 为什么将 task->pids 复制到链接变量中并再次读取链接变量？我发现许多代码将指针复制到变量中并间接读取。

它有同步问题还是对代码阅读有好处？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T05:11:24.970

可能只是`&task->pids[type]`在调用 hlist_add_head_rcu() 时让我们免于再次取消引用。但是聪明的编译器应该能够自己做到这一点。

# selenium - 基于父节点和子节点的CSS选择器？

> ID：14330042
> 
> 赞同：3
> 
> 时间：2013-01-15T01:59:53.677
> 
> 标签：selenium, webdriver, css-selectors

有没有办法可以将以下内容表达为单个 CSS 选择器？（或者除了使用 CSS 选择器之外，我是否必须找到其他方法来做到这一点，直到第 4 级成为现实？请参阅：[http](http://www.w3.org/TR/selectors4/#subject) ://www.w3.org/TR/selectors4/#subject ）

我想要……</p>

*   **唯一**的div（未知类）
*   有一个名为“foo”的 div 孙子
*   并且有一个带有“bar baz”类的祖父母div

页面上有两个 div 有一个名为“foo”的孙子。我只想将具有祖父母 div 的那个与“bar baz”类匹配。

这适用于 Selenium Webdriver。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T02:01:48.800

不幸的是，这对于单个 CSS 选择器是不可能的。

标准“有一个祖父 div”需要在选择器级别 4 中引入的主题选择器，这将导致以下选择器（假设“标题”意味着“具有`title`等于的属性”）：

```
div.bar.baz > * > !div > * > div[title="foo"] 
```

并且没有办法选择**整个页面中**第 n 个或唯一出现的元素，因此使用 CSS 选择器永远无法满足您的第一个标准。更不用说上述内容无论如何都不起作用，因为目前没有任何浏览器实现 Selectors 4。

使用 DOM 遍历或 XPath 可能会更好。我正在考虑的 XPath 表达式要复杂得多，但它*可以*找到整个页面中唯一出现的元素（如果我正确的话......你可能必须在你自己的页面上测试它）：

```
(
  //div[contains(concat(' ', @class, ' '), ' bar ') and contains(concat(' ', @class, ' '), ' baz ')]
    /*
      /div[child::*/child::div[@title="foo"]]
)[1][last()] 
```

如果您正在寻找与`class`祖父母的属性完全匹配的内容，请改用此 XPath（同样未经测试）：

```
(
  //div[@class="bar baz"]
    /*
      /div[child::*/child::div[@title="foo"]]
)[1][last()] 
```

# git - 如何在 Cygwin 中获取 Git 1.8？

> ID：14330050
> 
> 赞同：41
> 
> 时间：2013-01-15T02:00:37.630
> 
> 标签：git, cygwin

根据[http://cygwin.com/packages/git/](http://cygwin.com/packages/git/)最新可用的 Cygwin 包是 1.7.9-1。

我想将 git 更新到至少 1.8.0。

我可以这样做吗？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-11-19T20:43:18.177

[cygwinports](http://cygwinports.org/)有很多新版本的各种工具

在我写这篇文章的时候它有 1.8.3.4

> 新的、简化的安装说明：
> 
> *   使用最新的 Cygwin 安装程序（至少版本 2.829）：setup-x86.exe 用于 32 位，或 setup-x86_64.exe 用于 64 位。（请注意，许多软件包尚未移植到 x86_64。）
> *   使用 -K 标志启动 setup-*.exe，例如：
>     
>     
>     
>     cygstart -- /path/to/setup-x86.exe -K [http://cygwinports.org/ports.gpg](http://cygwinports.org/ports.gpg)
>     
>     
> *   在选择安装类型页面上，选择“从 Internet 安装”。
>     
>     
> *   在选择下载站点页面上，选择发行版镜像，然后在用户 URL 字段中输入[ftp://ftp.cygwinports.org/pub/cygwinports](ftp://ftp.cygwinports.org/pub/cygwinports)并按添加（确保两者都突出显示）。
>     1.  或者，您可以使用源软件镜像，但如果这样做，您必须使用托管在与您选择的发行版镜像不同的服务器上的镜像。
> *   继续选择和安装包，确保安装任何指定的依赖项。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-01-15T06:07:41.527

要安装`git 1.8.0`，您需要编译源代码。

您需要克隆 git 存储库 ( `git clone https://github.com/git/git.git`)，进入 git 目录，将当前版本更改为 1.8.0 或您想要的其他版本 ( `git checkout v.1.8.0`)，然后键入以下命令：

```
make configure
./configure --prefix=/usr/local
make
make install 
```

它将在`/usr/local`目录下安装 git。有关 git 安装的更多信息（如文档），您可以查看`INSTALL`本地化在 git 存储库根目录中的文件。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-10-13T08:08:50.397

[我按照这些说明](http://randomartifacts.blogspot.com/2013/04/compiling-git-on-cygwin.html)成功安装了 git 1.8.4.474 ；我正在运行 Windows 7 64 位，cygwin 版本 1.7.22(0.268/5/3)

> 1.  运行 Cygwin 设置实用程序并确保您已安装以下软件包：
>     
>     
>     
>     ```
>     gcc
>     autoconf
>     curl
>     libcurl-devel, required for http/https support 
>                    (NOTE: this is an obsolete package, you will need to
>                    uncheck "Hide obsolete packages" when selecting packages
>                    to install)
>     make
>     libiconv
>     python
>     perl
>     gettext 
>     ```
>     
>     
>     
>     您可能需要 libiconv-devel 和 cygwin32-liviconv（参见 Marek 的评论）
>     
>     
> 2.  使用 git clone [https://github.com/git/git.git](https://github.com/git/git.git)克隆 Git 源。关于 Git 配置的几点说明：
>     
>     
>     
>     确保`core.autocrlf=false`，否则您最终会得到 DOS 样式的行尾，这会导致构建中断。
>     
>     
>     
>     `http.sslcainfo`我的财产价值也很糟糕；要么取消设置，要么将其指向`/usr/ssl/certs/ca-bundle.crt`.
>     
>     
> 3.  从新克隆的 git 存储库中，运行以下命令：
>     
>     
>     
>     ```
>     make configure
>     ./configure
>     make
>     make install 
>     ```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-09-04T01:33:31.790

你的指示对我真的不起作用......

我遵循了这些说明（只要确保安装了所有正确的软件包）

[http://randomartifacts.blogspot.com/2013/04/compiling-git-on-cygwin.html](http://randomartifacts.blogspot.com/2013/04/compiling-git-on-cygwin.html)

修改了 Makefile

```
$ git diff Makefile
diff --git a/Makefile b/Makefile
index 3588ca1..90f337c 100644
--- a/Makefile
+++ b/Makefile
@@ -407,7 +407,7 @@ RPMBUILD = rpmbuild
 TCL_PATH = tclsh
 TCLTK_PATH = wish
 XGETTEXT = xgettext
-MSGFMT = msgfmt
+MSGFMT = msgfmt.py
 PTHREAD_LIBS = -lpthread
 PTHREAD_CFLAGS =
 GCOV = gcov 
```

然后

```
make configure NO_MSGFMT_EXTENDED_OPTIONS=1
./configure
make NO_MSGFMT_EXTENDED_OPTIONS=1
make install NO_MSGFMT_EXTENDED_OPTIONS=1 
```

不确定是否所有 make 命令都需要参数，但这对我有用

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-10-31T07:01:45.593

执行“make install”时出现问题。错误信息是：

> install -d -m 755 '/usr/local/bin'
> git: 'installation' 不是 git 命令。请参阅“git --help”。
> ./install：第 4 行：通常：找不到命令
> ./install：第 5 行：将：找不到命令
> ./install：第 6 行：to：找不到命令
> ./install：第 8 行：$：找不到命令
> ./安装：第 11 行：意外标记附近的语法错误（或前缀=/usr/local，当然）。就像任何程序套件一样' `.'
> ./install: line 11:`

这是由于 Windows 操作系统不区分大小写，如果您的 PATH 中有“./”。Cygwin 使用 git 源代码树中的 INSTALL 文件而不是 /usr/bin/install。我们必须将源树中的一些“安装”文件重命名为其他文件名。这是[http://zengrong.net/post/1817.htm提到的](http://zengrong.net/post/1817.htm)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-05-21T23:56:22.383

我在执行此操作时遇到了一个问题，我花了一个小时进行调试，所以我发布了一个答案，以防其他人来这里寻找。

实际上它与 Yorkwar 的原因相同，但错误不同。

一切顺利，直到`make install`输出：

```
$ make install
    GEN perl/PM.stamp
    SUBDIR gitweb
    SUBDIR ../
make[2]: 'GIT-VERSION-FILE' is up to date.
    GEN git-instaweb
    BUILTIN all
    SUBDIR git-gui
    SUBDIR gitk-git
    SUBDIR perl
    SUBDIR templates
install -d -m 755 '/usr/local/bin'
make: execvp: install: Permission denied
Makefile:2342: recipe for target 'install' failed
make: *** [install] Error 127 
```

在对 UAC、setuid、icacls、所有权等进行了大量处理之后，我发现`strace`实际的问题是在执行时`install`：因为我有`./`，`PATH`并且 Windows 不区分大小写，所以它尝试执行`INSTALL`，这是一个文本文件没有`x`设置位。所以“权限被拒绝”是指`x`没有在这个文件上设置的事实。

@Yorkwar 通过重命名所有`INSTALL`文件来解决这个问题，但是另一个选择是编辑`Makefile`和替换

```
INSTALL = install 
```

和

```
INSTALL = /usr/bin/install 
```

我在 Windows 7 64 位中使用 cygwin 32 位（在 cygwin64 出现之前安装它并且没有费心升级）。成功构建和安装`git version 2.0.0.rc4.dirty`，这是`git clone https://github.com/git/git.git`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-15T02:48:26.980

预构建的包不可用，因此您必须自己构建它。

或者，您可以下载[**非 Cygwin 构建**](http://code.google.com/p/msysgit/downloads/list)并将其添加到您的`PATH`.

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2014-01-27T16:32:38.490

[您可以从git-scm.com/download/win](http://git-scm.com/download/win)安装适用于 Windows 平台的最新版本。

将以下内容添加到您的`~/.profile`:

```
export PATH=$PATH:`cygpath 'C:\Program Files (x86)\Git\bin'` 
```

我使用 SourceTree`cygwin`中的这个 git 客户端并与 Gerrit/SSH 服务器结合使用，还没有遇到任何问题。

# iphone - iPhone Safari 和 JSONLoader

> ID：14330051
> 
> 赞同：0
> 
> 时间：2013-01-15T02:00:45.383
> 
> 标签：iphone, safari, three.js

我只想在 iPhone 上做一个 web3D 项目。但是，当我添加第 94 行的代码进行测试时，Safari 显示为“javascript 错误 INVALID_STATE_ERR：DOM 异常 11：尝试使用不可用或不再可用的对象。” 来自 safari 的调试控制台。它在 PC 的 chrome 浏览器中运行良好，但也出现错误“无法加载资源[http://cdn.viglink.com/api/vglnk.js](http://cdn.viglink.com/api/vglnk.js) ”

```
92 var loader = new THREE.JSONLoader();
93 var geo = function geometery(geom){}; 
94 loader.load("image/robot.js", geo); 
```

你能给我一些建议吗？我使用了画布渲染器

# css - 使用 Twitter 引导程序规范化样式表

> ID：14330054
> 
> 赞同：8
> 
> 时间：2013-01-15T02:01:15.363
> 
> 标签：css, twitter-bootstrap, normalize

我刚刚开始一个我正在使用 Twitters Bootstrap 的项目，并且想知道它是否有自己的重置规则。

通常我会使用规范化样式表来帮助我的网站在跨浏览器上看起来更一致，但 Bootstrap 需要这样做吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-15T02:05:45.437

Bootstrap 已经使用[normalize.css](https://github.com/necolas/normalize.css/)。查看[源代码](http://twitter.github.com/bootstrap/assets/css/bootstrap.css)（和[LESS 文件](https://github.com/twitter/bootstrap/blob/master/less/reset.less)）：

```
/*!
 * Bootstrap v2.2.2
 *
 * Copyright 2012 Twitter, Inc
 * Licensed under the Apache License v2.0
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Designed and built with all the love in the world @twitter by @mdo and @fat.
 */

article,
aside,
details,
figcaption,
figure,
footer,
header,
hgroup,
nav,
section {
  display: block;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-27T22:40:01.273

Bootstrap v3 现在明确了这一点，并且还包括版本号：

```
/*!
 * Bootstrap v3.0.3 (http://getbootstrap.com)
 * Copyright 2013 Twitter, Inc.
 * Licensed under http://www.apache.org/licenses/LICENSE-2.0
 */

/*! normalize.css v2.1.3 | MIT License | git.io/normalize */

article,
aside,
details,
figcaption,
figure,
footer,
header,
hgroup,
main,
nav,
section,
summary {
  display: block;
} 
```

请注意，normalize.css 现在是 v3.0.0-rc.1，因此您可能需要查看 CHANGELOG 或 diff 并评估您是否想在您的站点上使用它们。

# firefox - Firefox 布局损坏的引导程序

> ID：14330055
> 
> 赞同：0
> 
> 时间：2013-01-15T02:01:15.337
> 
> 标签：firefox, twitter-bootstrap

我的布局在 Chrome、Safari 和 IE 9 中运行良好，但 Firefox 似乎避免了所有 twitter 引导样式，从而使页面看起来发育不良和损坏。您能提供的任何帮助将不胜感激。我正在使用最新版本的 Firefox。(18.0)

[http://monooptical.com/](http://monooptical.com/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T02:15:46.397

你已经忘记了，就像在 css 上一样。你有：

```
<link href="http://monooptical.com/wp-content/themes/MonoTheme1.0/assets/bootstrap/css/bootstrap.css" type="text/cs" rel='stylesheet' media="screen"> 
```

代替：

```
<link href="http://monooptical.com/wp-content/themes/MonoTheme1.0/assets/bootstrap/css/bootstrap.css" type="text/css" rel='stylesheet' media="screen"> 
```

# ios - icarousel 中的 SIGABRT 错误

> ID：14330056
> 
> 赞同：0
> 
> 时间：2013-01-15T02:01:15.697
> 
> 标签：ios, xcode, sigabrt, icarousel

我仍然遇到 icarousel 的问题，我现在创建了一个故事板并复制了有效的确切代码。但是我的给出以下错误：

2013-01-14 23:56:00.755 testeiCarousel [2997:11303] Interface Builder 文件中的未知类 iCarousel。2013-01-14 23:56:00.757 testeiCarousel [2997:11303] *** 由于未捕获的异常“NSUnknownKeyException”而终止应用程序，原因：“[setValue:forUndefinedKey:]：此类不符合键数据源的键值编码。***第一掷调用堆栈：（0x1595012 0x12a2e7e 0x161dfb1 0xd4f711 0xcd0ec8 0xcd09b7 0x23a573 0xcfb428 0x4070cc 0x12b6663 0x159045a 0x405bcf 0x2cae37 0x2cb418 0x2cb648 0x2cb882 0x21aa25 0x21adbf 0x21af55 0x223f67 0x1e7fcc 0x1e8fab 0x1fa315 0x1fb24b 0x1eccf8 0x25f7df9 0x25f7ad0 0x150abf5 0x150a962 0x153bbb6 0x153af44 0x153ae1b 0x1e87da 0x1ea65c 0x29fd 0x2925）的libc ++ abi.dylib : 终止调用抛出异常

我搜索了信息，相信我做错了什么。 [iCarousel iOS 6 - 故事板](https://stackoverflow.com/questions/13153617/icarousel-ios-6-storyboarding) [https://github.com/nicklockwood/iCarousel/issues/119](https://github.com/nicklockwood/iCarousel/issues/119)

没有解决

我的错误[下载示例](http://www.leandrodavi.com/testeicarousel.zip)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-14T02:45:56.417

是由于连接检查器中的错误连接

# objective-c - 将#undef 放在#define 之前有什么好处？

> ID：14330060
> 
> 赞同：3
> 
> 时间：2013-01-15T02:02:14.133
> 
> 标签：objective-c, preprocessor

我发现了这些行：

```
#undef TAG
#define kTAG @"TestRegistration///: "
#define TAG kTAG 
```

如果 TAG 从来没有被使用过，为什么他们`#undef TAG`在他们之前`#define`呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T02:11:15.567

在某些版本的 C 中，重新声明宏是非法的，除非定义与之前的声明完全相同。

因此，这只是为了防止这个问题而进行的防御性编码（尽管快速测试表明这个限制没有出现在 Objective-C 中）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T02:15:47.740

如果之前未定义宏，则没有理由这样做。但是，如果您希望宏可以预先定义，那么最好先取消定义它，因为它使代码的读者清楚您打算覆盖宏的先前设置的值（如果有的话）。

如果您不希望已经定义了宏，则不应首先使用 undef。这样，如果它（令人惊讶！）已经定义，您将收到警告。

# iphone - 如何使用 UIActivityViewController 电子邮件共享设置电子邮件附件文件名

> ID：14330063
> 
> 赞同：6
> 
> 时间：2013-01-15T02:02:34.330
> 
> 标签：iphone, uiactivityindicatorview, email-attachments

我正在尝试使用 UIAcitivityViewController 电子邮件共享来共享相机胶卷图像。

以下是我的代码。

```
 ALAssetRepresentation *rep = [asset defaultRepresentation];
    CGImageRef iref = [rep fullScreenImage];
    UIImage *largeimage = [UIImage imageWithCGImage:iref scale:[rep scale] orientation:UIImageOrientationUp];
    NSData *imageData = UIImageJPEGRepresentation(largeimage, 1.0);
    NSArray *activityItems;

    if (largeimage != nil) {
        activityItems = @[imageData];
    }

    UIActivityViewController *activityController = [[UIActivityViewController alloc] initWithActivityItems:activityItems applicationActivities:nil];
    [self presentViewController:activityController animated:YES completion:nil]; 
```

我不知道如何设置附件图像文件名。有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T08:14:59.517

尝试将图像保存在本地，然后发送文件 url，它肯定会显示您的图像名称。

```
ALAssetRepresentation *rep = [asset defaultRepresentation];
CGImageRef iref = [rep fullScreenImage];
UIImage *largeimage = [UIImage imageWithCGImage:iref scale:[rep scale] orientation:UIImageOrientationUp];
NSData *imageData = UIImageJPEGRepresentation(largeimage, 1.0);
// Store imageData locally
NSString* documentsPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
NSString* filePath = [documentsPath stringByAppendingPathComponent:"@abc.jpg"];
[imageData writeToFile:filePath atomically:YES];
NSURL *fileUrl = [NSURL fileURLWithPath:filePath];

UIActivityViewController* activityViewController = [[UIActivityViewController alloc] initWithActivityItems:@[fileUrl]
                                          applicationActivities:nil];
[self.navigationController presentViewController:activityViewController animated:YES completion:^{}]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T12:02:51.360

试试这个...

```
NSString *text = @"write text here";
UIImage *image = [UIImage imageNamed:@"your image name"];
NSArray *activityItems = [NSArray arrayWithObjects:text,image , nil];
UIActivityViewController *activityController = [[UIActivityViewController alloc] initWithActivityItems: activityItems applicationActivities:nil];
[self presentViewController:activityController animated:YES completion:nil]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-11T07:11:49.577

例如，您可以像这样制作自己的内容，您可以在此链接中找到它：[https](https://github.com/nferocious76/NFActivityModel) ://github.com/nferocious76/NFActivityModel随便玩一下，您还可以添加密件抄送、抄送收件人。

```
NSURL *fileURL = [NSURL URLWithString:pdfFileURL];
NSData *pdfData = [NSData dataWithContentsOfFile:pdfFileURL];

NFActivityShareMailIAttachment *shareMailAttachment = [[NFActivityShareMailIAttachment alloc] initWithAttachmentData:pdfData attachmentDataMimeType:@"application/pdf" attachmentDataFilename:pdfFilename];

NSString *taskName = self.reportInfo[@"TaskName"] ?: @"PDF Share";
NSString *sharingUser = self.reportInfo[@"SharingUser"] ?: @"JV User";

// define ShareMail item
NSString *mailBody = @"ShareMail Body";
NFActivityShareMailItem *activityShareMailItem = [[NFActivityShareMailItem alloc] initWithShareMailSubject:taskName mailBody:mailBody isHTML:NO];
activityShareMailItem.attachments = @[shareMailAttachment];

// create ShareMail with the base view controller
NFActivityShareMail *shareMail = [[NFActivityShareMail alloc] initWithViewController:self];

UIActivityViewController *activityViewController = [[UIActivityViewController alloc] initWithActivityItems:@[pdfData, fileURL, activityShareMailItem] applicationActivities:@[shareMail]];
activityViewController.excludedActivityTypes = @[UIActivityTypeMail];

// present to user
[self presentViewController:activityViewController animated:YES completion:nil]; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-06-19T11:53:46.207

在您的共享方法中尝试此代码..

```
// add all objects in array which you want to attach. 
    NSArray *dataToShare =[[NSArray alloc] initWithObjects:title.text,notes.text,image,nil];
    UIActivityViewController *activityVC = [[UIActivityViewController alloc] initWithActivityItems:dataToShare applicationActivities:nil];
    [self presentViewController:activityVC animated:YES completion:^{

            }]; 
```

# c++ - Cycle链表的循环起始节点

> ID：14330064
> 
> 赞同：1
> 
> 时间：2013-01-15T02:02:35.173
> 
> 标签：c++, c, algorithm, data-structures

我正在尝试实现一个程序来查找循环链表的起始节点。我的代码是-

```
struct node
{
char data;
struct node *link;
} ;

char FindStartNode(struct node **q)
{
    struct node *r,*t;
 r = *q; 
 t = *q;
 while(t->link != NULL)
 {
     r = r->link;
     t = t->link->link;
     if(r == t)
     {
         break;
     }
 }
 if(t == NULL )
     return NULL;
 r = *q;
 while(r != t)
 {
     t = t->link;
     r = r->link;
 }
 return t->data;
}

int main()
{
struct node *p;
p = NULL;
char num;
Append(&p,'A');
Append(&p,'B');
Append(&p,'C');
Append(&p,'D');
Append(&p,'E');
Append(&p,'C');
Display(p);
 num = FindStartNode(&p);
printf("\nStarting node of the cycle linked list is:- %c",num);
_getch();
return 0;
}

int Append(struct node **q, char data)
{
struct node *r,*t;
r = (struct node *)malloc(sizeof(struct node));
r->data = data;
r->link = NULL;
if(*q == NULL)
    *q = r;
else
{
  t = *q;
  while(t->link != NULL)
  {
      t = t->link;
  }
  t->link = r;
    }
return 0;
}
int Display(struct node *q)
{
while(q != NULL)
{
    printf("%c\t",q->data);
    q = q->link;
}
return 0;
} 
```

这是我的代码。我在 return t->data 部分没有得到任何值，或者我无法找到循环墨水列表的起始节点。有帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T02:05:12.190

```
 t = t->link->link; // t->link can be null 
   //so t = t->link->link can be a crash or illegal reference 
```

将循环更改为：

```
 while(t != NULL)
 {
     r = r->link;
     t = t->link;
     if(t == NULL)
       break; // or return no circle
     else t = t->link;
     if(r == t)
     {
         break;
     }
 } 
```

我已经浏览了你的代码。与[这里](http://umairsaeed.com/2011/06/23/finding-the-start-of-a-loop-in-a-circular-linked-list/)的算法讨论相比，它似乎还可以。但是您正在返回一个`char`为什么不返回一个指针，以便您可以检查它是否为 NULL。如果它不为空，则发出 pt->tada。这更有意义。

我检查了你的代码，似乎你没有在`Append()`. 我在下面为您提供了一个有效的实现。看看我是如何修改的`Append()`

```
#include <stdio.h>
#include <stdlib.h>

struct node
{
char data;
struct node *link;
} ;

char FindStartNode(struct node **q)
{
    struct node *r,*t;
 r = *q;
 t = *q;
 while(t->link != NULL)
 {
     r = r->link;
     t = t->link->link;
     if(r == t)
     {
         break;
     }
 }
 if(t == NULL )
     return NULL;
 r = *q;
 while(r != t)
 {
     t = t->link;
     r = r->link;
 }
 return t->data;
}

int Append(struct node **q, char data);
int main()
{
struct node *p;
p = NULL;
char num;
Append(&p,'A');
Append(&p,'B');
Append(&p,'C');
Append(&p,'D');
Append(&p,'E');
Append(&p,'C');
//Display(p);
 num = FindStartNode(&p);
printf("\nStarting node of the cycle linked list is:- %c\n",num);
//_getch();
return 0;
}

int Append(struct node **q, char data)
{

struct node *r,*t, *startOfcycle=NULL;
r = (struct node *)malloc(sizeof(struct node));
r->data = data;

r->link = NULL;
if(*q == NULL)
    *q = r;
else
{
  t = *q;
  while(t->link != NULL)
  {
      if(t->data == data)
         startOfcycle = t;

      t = t->link;
  }

  if(startOfcycle == NULL)
  t->link = r;
  else {// there is a cycle point to the start of cycle
     t->link = startOfcycle;
     free(r);
  }
    }
return 0;
}
int Display(struct node *q)
{
while(q != NULL)
{
    printf("%c\t",q->data);
    q = q->link;
} 
```

请注意，该`Display`函数也是错误的，因为运行链表的无限循环是循环的。我没有修改它，因为它与你的问题无关。谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T02:45:32.253

...

```
 p = NULL;
 char num;
 Append(&p,'A'); 
```

...

您正在尝试分配给 Append 处理的 NULL，但您正在重复执行此操作，这意味着您不会创建列表，只是一堆悬空节点。

您需要在附加之外启动一个节点作为种子节点，然后将其传入。

# jquery - Jquery UI Accordian 没有开始折叠

> ID：14330066
> 
> 赞同：0
> 
> 时间：2013-01-15T02:02:46.287
> 
> 标签：jquery, jquery-ui, accordion

我正在使用 Jquery UI，它并没有开始全部折叠。

这是我的代码：

```
$j(function() {
    $j( "#accordion" ).accordion({
      collapsible: true
      active: false
    });

}); 
```

阅读有关此的 API 文档，它说我必须将可折叠设置为 TRUE 才能使 active: False 正常工作。我有这个。但是当我在我的网站上查看时，第一个项目没有折叠 - 它是打开的。

我在代码中哪里出错了？

提前感谢您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T02:21:32.690

您需要添加`,`到单独的选项。

```
$j=jQuery.noConflict();

$j(function() {

$j("#accordion").accordion({
collapsible: true,
active: false
});
}); 
```

[样本](http://jsbin.com/iquhih/1/edit)

# python - Python解析嵌套XML并展平数据

> ID：14330068
> 
> 赞同：1
> 
> 时间：2013-01-15T02:02:48.413
> 
> 标签：python, xml, xml-parsing, python-2.7, lxml

我正在尝试将以下 XML 数据展平为 CSV 类型的表数据。

我可以获取 Sal 元素及其属性中的数据，但我无法将 SalC 数据展平到父航行属性以生成平面表数据。

我想在 XML 数据下方展平，以便我可以写入数据库以进行进一步处理。

col1, col2, col3, col4, col5, col6, col6, col7, col8, col9, col10

XML 数据：

```
<Sal col1="a1" col2="C" col3="12/5/2012" col4="a" col5="8" col6="True">
    <SalC col7="A" col8="1" col9="2" col10="True"/>
    <SalC col7="A1" col8="1" col9="2" col10="False"/>
    <SalC col7="B" col8="1" col9="2" col10="False"/>
    <SalC col7="C" col8="1" col9="2" col10="False"/>
    <SalC col7="D" col8="1" col9="2" col10="False"/>
    <SalC col7="E" col8="1" col9="2" col10="False"/>
    <SalC col7="E1" col8="1" col9="2" col10="False"/>
    <SalC col7="F" col8="1" col9="2" col10="False"/>
</Sal>
<Sal col1="a1" col2="C" col3="12/9/2012" col4="b" col5="8" col6="True">
    <SalC col7="A" col8="1" col9="2" col10="False"/>
    <SalC col7="B" col8="1" col9="2" col10="False"/>
    <SalC col7="C" col8="1" col9="2" col10="True"/>
    <SalC col7="D" col8="1" col9="2" col10="False"/>
    <SalC col7="E" col8="1" col9="2" col10="False"/>
</Sal>
<Sal col1="a2" col2="C" col3="12/8/2012" col4="c" col5="15" col6="True">
    <SalC col7="A" col8="1" col9="2" col10="True"/>
    <SalC col7="A1" col8="1" col9="2" col10="False"/>
    <SalC col7="B" col8="1" col9="2" col10="False"/>
    <SalC col7="C" col8="1" col9="2" col10="True"/>
    <SalC col7="D" col8="1" col9="2" col10="False"/>
    <SalC col7="E" col8="1" col9="2" col10="False"/>
    <SalC col7="E1" col8="1" col9="2" col10="True"/>
    <SalC col7="F" col8="1" col9="2" col10="False"/>
</Sal>
<Sal col1="a3" col2="C" col3="12/9/2012" col4="d" col5="8" col6="True">
    <SalC col7="A" col8="1" col9="2" col10="False"/>
    <SalC col7="B" col8="1" col9="2" col10="False"/>
    <SalC col7="C" col8="1" col9="2" col10="False"/>
    <SalC col7="D" col8="1" col9="2" col10="True"/>
    <SalC col7="E" col8="1" col9="2" col10="False"/>
</Sal> 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:59:20.497

这可以使用 XSLT 轻松解决，而无需在您的工作流程中引入 Python，但是，如果您必须使用 Python，则可以`lxml.etree`方便地引入一个新类`lxml.etree.XSLT`，您可以利用它来发挥自己的优势。

假设您的`XML`数据位于名为***`xmlfile.xml`***以下代码的文件中应该可以工作。

***xslt文件.xsl***

```
<?xml version="1.0" encoding="utf-8" ?>
<xsl:stylesheet version="1.0"
        xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
        <xsl:output method="text" />
        <xsl:template match="SalC">
                <xsl:value-of select="concat(../@col1,',', ../@col2,',',../@col3,',',../@col4,',',../@col5,',',../@col6,',',@col7,',',@col8,',',@col9,',',@col10)" />
        </xsl:template>
</xsl:stylesheet> 
```

* * *

**示例代码**

```
from lxml import etree

xsltfile = etree.XSLT(etree.parse('xsltfile.xsl'))
xmlfile = etree.parse('xmlfile.xml')
output = xsltfile(xmlfile)
print(output) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T02:25:35.640

`sal.attrib`类似于dict：

```
row = dict(sal.attrib) 
```

`salc.attrib`也是dict-like。要“扁平化”——或者更确切地说，加入——这两个字典，你可以使用[dict.update](http://docs.python.org/2/library/stdtypes.html#dict.update)：

```
row.update(salc.attrib) 
```

假设每个`SalC`元素都有`col7`, `col8`,`cal9`和`col10`属性，你可以只调用`row.update(salc.attrib)`每个`salc`in `sal`：

* * *

```
import lxml.etree as ET
import csv

text = '''\
<root>
<Sal col1="a1" col2="C" col3="12/5/2012" col4="a" col5="8" col6="True">
    <SalC col7="A" col8="1" col9="2" col10="True"/>
...
    <SalC col7="D" col8="1" col9="2" col10="True"/>
    <SalC col7="E" col8="1" col9="2" col10="False"/>
</Sal>
</root>'''

fieldnames = ('col1', 'col2', 'col3', 'col4', 'col5', 'col6', 'col6', 'col7', 'col8', 
              'col9', 'col10')

with open('/tmp/output.csv', 'wb') as f:
    writer = csv.DictWriter(f, fieldnames, delimiter = ',', lineterminator = '\n', )
    writer.writeheader()
    root = ET.fromstring(text)
    for sal in root.xpath('//Sal'):
        row = dict(sal.attrib)
        for salc in sal:
            row.update(salc.attrib)
            writer.writerow(row) 
```

产量

```
col1,col2,col3,col4,col5,col6,col6,col7,col8,col9,col10
a1,C,12/5/2012,a,8,True,True,A,1,2,True
a1,C,12/5/2012,a,8,True,True,A1,1,2,False
a1,C,12/5/2012,a,8,True,True,B,1,2,False
...
a3,C,12/9/2012,d,8,True,True,B,1,2,False
a3,C,12/9/2012,d,8,True,True,C,1,2,False
a3,C,12/9/2012,d,8,True,True,D,1,2,True
a3,C,12/9/2012,d,8,True,True,E,1,2,False 
```

# list - 导管，替换列表？

> ID：14330071
> 
> 赞同：3
> 
> 时间：2013-01-15T02:03:00.590
> 
> 标签：list, haskell, conduit

我在考虑 Haskell 中的列表，我认为在其他语言中，不会对所有内容都使用列表。当然，如果您稍后需要这些值，您可能想要存储一个列表，但如果它只是一个关闭，比如说从 迭代`[1..n]`，为什么要使用一个真正需要的只是一个递增变量的列表？

我还阅读了有关“列表融合”的内容，并注意到虽然 Haskell 编译器尝试实现这种优化以消除中间列表，但它们通常不成功，导致垃圾收集器不得不清理只使用一次的列表。

此外，如果您不小心，很容易共享一个列表，这意味着垃圾收集器不会清理它，这可能导致内存不足，而以前设计为在恒定空间中运行的算法。

所以我认为最好完全避免列表，至少当一个人实际上不想“存储”列表时。

然后我遇到了[`conduit`](http://hackage.haskell.org/package/conduit-0.5.5)，上面写着：

> 流数据问题的解决方案，允许在恒定内存中生产、转换和消费数据流。

这听起来很完美。我知道`conduit`它是为`IO`资源获取和释放问题而设计的，但是可以将它用作列表的替代品吗？

例如，我可以执行以下操作：

```
fold f3 $ take 10 $ map f2 $ unfold f1 init_value 
```

并且通过一些适当放置的类型注释，在整个过程中使用管道而不是列表？

我希望这可能[`classy-prelude`](http://hackage.haskell.org/package/classy-prelude)会允许这样的代码，但我不确定。如果可能的话，有人可以举个例子，像上面说的那样吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T04:13:36.770

在与`conduit`. 中间数据结构的存在与否不影响它是否在常量内存中运行。它所改变的只是它所驻留的常量内存的效率和大小。

不要期望管道在比等效列表计算更少的内存中运行。它实际上应该占用更多内存，因为管道步骤比列表单元具有更大的开销。此外，导管目前没有流融合。前段时间有人[对此进行了实验，尽管没有将其合并到库中。](http://gereeter.blogspot.com/2012/10/steam-fusion-for-conduits.html)另一方面，列表可以并且确实在许多情况下融合以删除中间数据结构。

要记住的重要一点是，流式传输并不一定意味着砍伐森林（即删除中间数据结构）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-15T04:18:01.063

`conduit`绝对不是为这种用例设计的，但理论上可以这样使用。我亲自为这个`markdown`包裹做的，在那里有额外的`conduit`管道比直接处理列表更方便。

如果把它和 放在一起`classy-prelude-conduit`，就可以得到一些比较简单的代码。我们当然可以向 classy-prelude-conduit 添加更多导出，以更好地优化此用例。现在，这是一个遵循您上面列出的基本要点的示例：

```
{-# LANGUAGE NoImplicitPrelude #-}
{-# LANGUAGE OverloadedStrings #-}
import ClassyPrelude.Conduit
import Data.Conduit.List (unfold, isolate)
import Data.Functor.Identity (runIdentity)

main = putStrLn
     $ runIdentity
     $ unfold f1 init_value
    $$ map f2
    =$ isolate 10
    =$ fold f3 ""

f1 :: (Int, Int) -> Maybe (Int, (Int, Int))
f1 (x, y) = Just (x, (y, x + y))

init_value = (1, 1)

f2 :: Int -> Text
f2 = show

f3 :: Text -> Text -> Text
f3 x y = x ++ y ++ "\n" 
```

# apache-flex - Flex 火花微调器，交换箭头行为

> ID：14330077
> 
> 赞同：0
> 
> 时间：2013-01-15T02:04:17.277
> 
> 标签：apache-flex

有没有一种简单的方法来交换递增和递减按钮的行为？所以向上箭头减小值，向下箭头增加它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:38:45.797

这个皮肤，对于火花微调器组件，解决了这个问题。我反转了皮肤类属性和自上而下的属性值。

```
<?xml version="1.0" encoding="utf-8"?>

<s:SparkSkin xmlns:fx="http://ns.adobe.com/mxml/2009" xmlns:s="library://ns.adobe.com/flex/spark"
    xmlns:fb="http://ns.adobe.com/flashbuilder/2009" alpha.disabled="0.5" minHeight="23" minWidth="12">

    <fx:Metadata>
    <![CDATA[ 
        /** 
         * @copy spark.skins.spark.ApplicationSkin#hostComponent
         */
        [HostComponent("spark.components.Spinner")]
    ]]>
    </fx:Metadata> 

    <fx:Script fb:purpose="styling">
        /* Define the skin elements that should not be colorized. 
           For spinner, the skin itself is colorized but the individual parts are not. */
        static private const exclusions:Array = [ "incrementButton","decrementButton",];

        /**
         * @private
         */   
        override public function get colorizeExclusions():Array {return exclusions;}

        /**
         * @private
         */
        override protected function initializationComplete():void
        {
            useChromeColor = true;
            super.initializationComplete();
        }

        private var cornerRadiusChanged:Boolean;

        /**
         *  @private
         */
        override protected function commitProperties():void
        {
            super.commitProperties();

            if (cornerRadiusChanged)
            {
                var cr:Number = getStyle("cornerRadius");
                if (incrementButton)
                    incrementButton.setStyle("cornerRadius", cr);
                if (decrementButton)
                    decrementButton.setStyle("cornerRadius", cr);
            }
        }

        /**
         *  @private
         */
        override public function styleChanged(styleProp:String):void
        {
            var allStyles:Boolean = !styleProp || styleProp == "styleName";

            super.styleChanged(styleProp);

            if (allStyles || styleProp == "cornerRadius")
            {
                cornerRadiusChanged = true;
                invalidateProperties();
            }
        }
    </fx:Script>

    <s:states>
        <s:State name="normal" />
        <s:State name="disabled" />
    </s:states>

    <!--- decrement button with increment skin -->
    <s:Button id="decrementButton" left="0" right="0" top="0" height="50%" tabEnabled="false"  
              skinClass="spark.skins.spark.SpinnerIncrementButtonSkin" />

     <!--- increment button with decrement skin -->
    <s:Button id="incrementButton" left="0" right="0" bottom="0" height="50%" tabEnabled="false" 
              skinClass="spark.skins.spark.SpinnerDecrementButtonSkin" /> 

</s:SparkSkin> 
```

# java - 使一个 JPopupMenu 实际上弹出

> ID：14330079
> 
> 赞同：2
> 
> 时间：2013-01-15T02:04:34.020
> 
> 标签：java, actionlistener

我有一个`JFrame`看起来像一个典型的聊天框。为了连接和断开与服务器的连接，我实现了 a`JPopupMenu`并将 a 添加`MouseListener`到主窗口。
但是弹出菜单不会出现。

**主窗口中的各种 JComponents：**

*   `JTextArea`在一个`JScrollPane`*   `JTextField`输入消息*   `Send`按钮*   `JScrollPane`并`ArrayList`显示用户
无论您右键单击何处，都应该出现弹出窗口。无论是在`JTextArea`输入消息的字段上还是字段上。
我要向哪些所有组件添加侦听器，我要添加什么侦听器？

## 代码

**变量：**

```
 private static A_Chat_Client chatClient;
    public static String userName = "Anonymous";

//------------------------------------------------------------------------------
    public static JFrame mainFrame = new JFrame();
    public static JTextArea textArea = new JTextArea(30,30);
    public static JScrollPane pane = new JScrollPane(textArea);
    public static JTextField message = new JTextField(10);
    public static JButton send = new JButton("Send");

    public static JPopupMenu popup = new JPopupMenu();
    public static JMenuItem connect = new JMenuItem("Connect");
    public static JMenuItem disconnect = new JMenuItem("Disconnect");
    public static JMenuItem help = new JMenuItem("Help");

    public static JList usersOnline = new JList();
    public static JScrollPane userPane = new JScrollPane(usersOnline); 
```

**主要方法**

```
public static void main(String[] args) {
        buildMainWindow();
        initialize();
        addListeners();
        popup.show(mainFrame, 0, 0); //forcefully popup
    } 
```

**添加监听器（）**

```
public static void addListeners(){

        mainFrame.addMouseListener(new MouseHandler());

        send.addActionListener(new ActionListener(){
            @Override
            public void actionPerformed(ActionEvent e){
                actionSend();
            }
        });
        connect.addActionListener(new ActionListener(){
            @Override
            public void actionPerformed(ActionEvent e){
                actionConnect();
            }
        });
        disconnect.addActionListener(new ActionListener(){
            @Override
            public void actionPerformed(ActionEvent e){
                actionDisconnect();
            }
        });
        help.addActionListener(new ActionListener(){
            @Override
            public void actionPerformed(ActionEvent e){
                actionHelp();
            }
        });
    } 
```

**类 MouseHandler**

```
private static class MouseHandler extends MouseAdapter{
        @Override
        public void mouseClicked(MouseEvent e){
            if(e.isPopupTrigger()){
                popup.show(mainFrame, e.getX(), e.getY());
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T02:27:26.110

您可以使用附加[`AWTEventListener`](http://docs.oracle.com/javase/7/docs/api/java/awt/event/AWTEventListener.html)到主事件队列[`Toolkit#addAWTEventListener`](http://docs.oracle.com/javase/7/docs/api/java/awt/Toolkit.html#addAWTEventListener%28java.awt.event.AWTEventListener,%20long%29)

然后，您需要检查您收到的事件类型并检查它是否是弹出事件。

![在此处输入图像描述](../Images/bce4b377f290f6e82c8513439fabd7d7.png)

```
public class TestGlobalPopup {

    public static void main(String[] args) {
        new TestGlobalPopup();
    }

    public TestGlobalPopup() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        public TestPane() {
            Toolkit.getDefaultToolkit().addAWTEventListener(new AWTEventListener() {
                @Override
                public void eventDispatched(AWTEvent event) {
                    if (event instanceof MouseEvent) {
                        MouseEvent me = (MouseEvent) event;
                        if (me.isPopupTrigger()) {
                            Component component = me.getComponent();
                            JPopupMenu popup = new JPopupMenu();
                            popup.add(new JLabel("Clicked on " + component.getClass().getName()));
                            popup.show(component, me.getX(), me.getY());
                        }
                    }
                }
            }, AWTEvent.MOUSE_EVENT_MASK);

            setLayout(new GridBagLayout());
            GridBagConstraints gbc = new GridBagConstraints();
            gbc.gridx = 0;
            gbc.gridy = 0;
            add(new JLabel("Label: "), gbc);
            gbc.gridx++;
            add(new JTextField(10), gbc);

            gbc.gridy++;
            gbc.gridx = 0;
            gbc.gridwidth = 2;
            add(new JScrollPane(new JTextArea(5, 20)), gbc);
        }

    }

} 
```

# php - php变量为空时如何保护sql查询

> ID：14330083
> 
> 赞同：-2
> 
> 时间：2013-01-15T02:05:17.840
> 
> 标签：php, mysql, sql

> **可能重复：**
> [如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

我有以下 MySQL 查询：

```
if($obj->{'parentId'} == null){
    $parentID = 'NULL'; 
} else{
    $parentID = $obj->{'parentId'};
}

$q = 'UPDATE tasks SET 
    Name = "'.$obj->{'Name'}.'", 
    Cls = "'.$obj->{'Cls'}.'", 
    parentId = '.$parentID.', 
    PhantomId = '.$obj->{'PhantomId'}.', 
    PhantomParentId = '.$obj->{'PhantomParentId'}.', 
    leaf = "'.$leaf.'" WHERE Id = "'.$obj->{'Id'}.'"'; 
```

问题是，如果我的任何非字符串值为空，则整个查询都会引发错误。`$obj->{'PhantomId'}`例如，当没有任何附加库的情况下为空时，如何修复它崩溃？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T02:10:24.303

最好考虑选择退出绑定参数。但是如果你仍然想构造 SQL 查询使用条件

```
$q = "UPDATE ...";
...
if (!empty($obj->{'PhantomId'})) {
    $q .= ", PhantomId = '" . $obj->{'PhantomId'}. "'";
}
... 
```

# javascript - JavaScript 变量和同一个变量也是一个对象

> ID：14330084
> 
> 赞同：16
> 
> 时间：2013-01-15T02:05:39.710
> 
> 标签：javascript, arrays, variables, object

我对 JavaScript 有点陌生，我有一个问题。

我知道你可以设置变量和“子变量”。喜欢：

```
var msg = "Hello World";
alert(msg); 
```

并且

```
var msg = {
    lipsum: "Lorem Ipsum Dolor Sit Amet"
}
alert(msg.lipsum); 
```

但我想知道你是否可以*两者*都做，比如

```
var msg = "Hello World" || {
    lipsum: "Lorem Ipsum"
}
alert(msg + msg.lipsum); 
```

这样，您可以声明一个变量，并将相同的变量作为一个对象。显然它不能用我所做的来完成，但你明白了。

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-15T02:07:54.107

事实上，你可以。

```
var msg = {
    lipsum: "Lorem Ipsum",
    toString: function() {return "Hello World!"}
}; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-15T02:24:44.527

JavaScript 变量可以包含对象或原语。如果你有一个对象，你可以在它上面设置属性（子变量），如果你有一个原语，你不能。

回到您的示例，[JavaScript 字符串](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String)可以是基元也可以是对象，具体取决于您如何定义它，并且为了使事情更加混乱，当您尝试访问其属性时，基元将临时转换为对象。

以下代码将显示“bar”，因为我们的字符串被明确声明为带有`new`关键字的 String 对象：

```
a = new String("Hello World");
a.foo = "bar";
alert(a.foo); 
```

如果我们删除该`new String`部分，我们会得到一个原语。当我们尝试设置时，JavaScript 会为我们转换它`foo`，但没有保存任何内容，因为它实际上只是下面的一个原语，当我们调用时我们会返回结果“未定义” `alert(b.foo)`：

```
b = "Hello World";
b.foo = "bar";
alert(b.foo); 
```

这只是内置 JavaScript 类型令人困惑的许多事情之一，我建议阅读[Mozilla Javascript Reference 的 Global Objects 部分](https://developer.mozilla.org/en-US/docs/JavaScript/Reference#Global_Objects)以了解所有血腥细节。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-15T03:11:52.050

Kolink 是绝对正确的，只要您希望该值是一个字符串，那么您就可以将值“装箱”在一个对象中，然后覆盖[toString](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/toString)方法。但是，所做的只是**允许 javascript（*当它需要将对象输出为字符串*时）输出变量**（通过本机调用`toString`您）。它不是返回原始值，而是一个装在另一个对象中的值。

我想指出几件事情，让人们知道这两者是如何变化的（举几个例子）。所以，让我们看下面的部分：

```
var BoxedString = {
  value: 'Hello, world!',
  toString: function(){ return this.value; }
};
var BoxedNumber = {
  value: 3.14,
  toString: function(){ return this.value; }
};
var BoxedDate = {
  value: new Date(), // today
  toString: function(){ return this.value; }
}; 
```

很简单，我们可以在必要时将这些中的每一个输出为字符串（或者我们可以吗？）

```
// Each of these implicitly calls `.toString()` because we're concatenating
// them within another string. Metho calls (like `alert()` that look for a 
// string result have the same effect.
console.log('BoxedString: '+BoxedString); // BoxedString: Hello, world!
console.log('BoxedNumber: '+BoxedNumber); // BoxedNumber: 3.14
console.log('BoxedDate:   '+BoxedDate);   // fail! 
```

等等，`BoxedDate`失败；这是为什么？因为我们`toString`正在返回`Date`对象并且不能按原样输出。但是，如果我们将其更改`BoxedDate.toString`为 return `this.value.toString()`，我们会看到更好的结果（继续尝试，我会等待。）

让我们`BoxedDate`顺应潮流，试试日期法：

```
console.log(BoxedDate.getFullYear()); // BoxedDate.getFullYear is not a function 
```

再一次，它实际上不是一个`Date`，它是一个`Date`包裹在一个闪亮的盒子里。奇怪的是，Javascript 足够了解隐式转换`BoxedNumber`：

```
var sum = 38.86 + BoxedNumber; // 42 (works) 
```

但是，不要尝试任何`Number`对象方法，例如`toFixed()`. 与`BoxedString`和 字符串方法相同，例如`.replace()`,`toUpperCase()`和其他。

但是，如果我要在@Kolink 的答案中添加一些内容，那也将包括[`valueOf`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/valueOf)作为对象声明的一部分。就像是：

```
var BoxedValue = {
  value: 2013,
  toString: function(){ return this.value.toString(); }
  valueOf: function(){ return this.value; }
}; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-15T02:09:43.187

您可以通过创建一个新对象并扩展原型`toString()`方法来做到这一点。像这样的东西应该工作：

```
function Msg() {
    this.message = 'some message';
    this.lipsum = 'lipsum';
}

Msg.prototype.toString = function() {
    return this.message;
}

var msg = new Msg();

alert(msg + msg.lipsum); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-15T02:17:13.237

实际上`"Hello World"`是一个*字符串文字*（`typeof "Hello World" === "string"`），而不是任何东西的实例。

你可以创建一个

```
var s = new String("Hello World"); 
```

这就是现在`typeof s === "object"`和。`instanceof String``Object`

字符串对象还可以具有其他属性，例如

```
s.hint = "!";
// console.log(s + s.hint) prints "Hello World!" into console 
```

你真正需要的很可能是其他人回答的；）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-15T02:18:10.980

只要您的变量不是[原始](https://developer.mozilla.org/en-US/docs/Mozilla/js-ctypes/Using_js-ctypes/Declaring_types)变量，您就可以为其添加属性。

在你的情况下

```
var msg = "Hello World"; 
```

`msg`是一个原始变量，所以你无法实现你想要的。但是您可以创建一个真实的`String object`并添加它的属性。

```
var msg = new String("Hello World");
msg.lipsum = "lipsum";
alert(msg + msg.lipsum); 
```

# c# - 尝试将空白行添加到 Telerik RadGrid 的空引用异常

> ID：14330088
> 
> 赞同：0
> 
> 时间：2013-01-15T02:06:29.480
> 
> 标签：c#, wpf, observablecollection, radgridview, listcollectionview

有人可以告诉我为什么我在尝试执行下面的添加时不断收到 NULL 引用异常吗？这仅`ObservableCollection`在开始时为空时发生。如果从一开始就在集合中存在数据，则它可以正常工作。

加载`ObservableCollection`和设置集合`ViewSource`：

```
private void LoadCodeSets()
{
    this.codeSetData = new ObservableCollection<CodeSet>();

    var query = from c in context.CodeSets
                where c.LogicallyDeleted == 0
                orderby c.CodeSetID ascending
                select c;

    foreach (CodeSet c in query)
    {
        this.codeSetData.Add(c);
        this.codeSetView = (ListCollectionView)CollectionViewSource.GetDefaultView(codeSetData);
        this.codeSetRadGridView.ItemsSource = this.codeSetView;
    }
} 
```

将新记录添加到空数据网格

```
private void Add_CodeSet_Click(object sender, RoutedEventArgs e)
{
    try
    {
        bool doesCodeSetExist = false;

        if (codeSetView == null)
        {

            codeSetView.AddNewItem(new CodeSet());
        }
        else
        {
            foreach (CodeSet cs in codeSetView)
            {
                if (cs.CodeSetID == 0)
                {
                    doesCodeSetExist = true;
                    this.lblMessages.Foreground = Brushes.Red;
                    this.lblMessages.FontWeight = System.Windows.FontWeights.ExtraBold;
                    this.lblMessages.Content = "Please fill in new user form and click Save User.";
                    this.lblMessages.Visibility = Visibility.Visible;
                }
            }
            if (!doesCodeSetExist)
            {
                CodeSet newCodeSet = new CodeSet();
                codeSetView.AddNewItem(newCodeSet);
            }
        }
    }
    catch (Exception ex)
    {
        Error.LogError(ex);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T02:15:33.637

看起来这个代码块导致了这个问题

```
if (codeSetView == null)
{
    codeSetView.AddNewItem(new CodeSet());
} 
```

如果`codeSetView`是`null`你不能使用`codeSetView.AddNewItem`. 您必须`codeSetView`在添加项目之前启动。

例如：

```
if (codeSetView == null)
{
    codeSetView = new ...... or (ListCollectionView)CollectionViewSource.GetDefaultView(codeSetData);
    codeSetView.AddNewItem(new CodeSet());
} 
```

# java - 将原始二进制文件写入文件java

> ID：14330090
> 
> 赞同：1
> 
> 时间：2013-01-15T02:06:49.180
> 
> 标签：java, binary

假设我有一个二进制字符串（“0 和 1s”）并且我想将此字符串写入二进制文件，这如何在 java 中完成？我尝试转换为 ASCII 值字符串，然后从中创建一个 ByteArrayInputStream，但超过 127 的值无法正确显示。谁能帮我这个？我的 binaryToAscii 方法：

```
public static String BinaryToAscii(String bin){
    int num_of_bytes = bin.length()/8;
    StringBuilder sb = new StringBuilder();
    int index = 0;
    String byte_code;
    Character char_code;
    for (int i =0; i<num_of_bytes;i++){
        index = i*8;
        byte_code = bin.substring(index,index+8);
        int charCode = Integer.parseInt(byte_code, 2);
        char_code = new Character((char)charCode);
        sb.append(char_code);
    }
    return sb.toString();
} 
```

然后我将返回的字符串转换为 ByteArrayInputStream 使用

> InputStream is = new ByteArrayInputStream(ascii.toString().getBytes());

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T02:55:22.837

要将字符串转换为二进制，请使用以下命令：您首先需要将字符串分解为单独的字母，然后一次运行它们。

```
char letter = c;
  byte[] bytes = letter.getBytes();
  StringBuilder binary = new StringBuilder();
  for (byte b : bytes)
  {
     int val = b;
     for (int i = 0; i < 8; i++)
     {
        binary.append((val & 128) == 0 ? 0 : 1);
        val <<= 1;
     }
     binary.append(' ');
  }
  System.out.println(binary); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T02:13:11.377

您首先将 0 / 1 字符串转换为字节 []。

然后写出使用

```
DataOutputStream.writeByte().

read in with
DataInputStream.readUnsignedByte() // to get 0 - 255 
```

# kendo-ui - 当具有原始字段值的editRow为空时，外键字段获取'[object object]'值

> ID：14330091
> 
> 赞同：2
> 
> 时间：2013-01-15T02:06:53.720
> 
> 标签：kendo-ui

我有一个问题，我为我的外键字段使用下拉列表，如演示：[http ://demos.kendoui.c​​om/web/grid/foreignkeycolumn.html](http://demos.kendoui.com/web/grid/foreignkeycolumn.html)

不同之处在于，如果我的模型中的外键字段与其他任何人都不相关，则有时它可能为空。然后我的问题是，当我尝试用这个外键字段的原始值为 null 来编辑行时，我想更改为另一个值，这个字段总是会得到值'[object object]'。我不知道为什么。

请参阅以下代码中的 floor 字段：

```
<script>
    $(document).ready(function() {
        var template = kendo.template($("#detail_template").html());

        function show_menu_details(menuObj) {
            var tg = $("#details");
            tg.fadeOut(function(){
                tg.html(template(menuObj));
                tw = tg.find(".k-window");

                tw.css({width:tg.innerWidth()-30, height:tg.innerHeight()-55, "margin-top": 20, "margin-left":15});
            });
            tg.fadeIn();
        }

        $("#horizontal").kendoSplitter({
            panes: [{collapsible: true, size: "180px"},
                    { collapsible: true} ],
            height: 690
        });

        function onChange(e){
            e.preventDefault();
            selectedObj = this.dataSource.getByUid(this.select().data('uid'))
            //console.log(selectedObj);//(this.dataSource.data());
            show_menu_details(selectedObj);
        }

        var statuses = [
            {value:'', text:'--'},
            {value:'Available', text:'Available'},
            {value:'Locked', text:'Locked'},
            {value:'Reserved', text:'Reserved'},
            {value:'Occupied', text:'Occupied'}];
        var floors = new Array();
        floors[0]={text:'--',value:''};
        _DS_Floor.fetch(function(data){
            $.each(data.items,function(index,obj){
                floors[index+1] = {text: obj.name, value: obj.id};
            });

            var grid = $("#list").kendoGrid({
                dataSource: _DS_Room,
                selectable: "row",
                filterable: true,
                columnMenu: true,
                pageable: {refresh:true},
                editable: {mode:"popup",confirmation:"Sure to delete?"},
                height: 688,
                scrollable: {
                    virtual: true
                },
                sortable: true,
                toolbar: kendo.template($("#toolbar_template").html()), 
                columns: [//{field:'id',title:' ',width:40,template: '<input type="checkbox" id="#= id #" />'},
                          {field:'name',title:'Name'},
                          {field:'floor',title:'Floor',values:floors},
                          {field:'position',title:'Position'},
                          {field:'status',title:'Status',width:80,values:statuses}],//_Columns_Menu,//{ command: ['edit','destroy'], title: "", width: "200px" }
                //change: onChange
            });

            grid.find("#btn-add").click(function(e){
                e.preventDefault();
                grid.data("kendoGrid").addRow();
            });

            grid.find("#btn-save").click(function(e){
                e.preventDefault();
                grid.data("kendoGrid").saveChanges();//editRow(grid.data("kendoGrid").select());
            });

            grid.find("#btn-remove").click(function(e){
                e.preventDefault();
                grid.data("kendoGrid").removeRow(grid.data("kendoGrid").select());
            });

            grid.find("#btn-cancel").click(function(e){
                e.preventDefault();
                grid.data("kendoGrid").cancelChanges();//removeRow(grid.data("kendoGrid").select());
            });

        });

    });
</script> 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T11:44:03.263

不支持可空值。[这](http://www.kendoui.com/forums/ui/grid/foreignkey-field-get-object-object-value-when-editrow-with-original-field-value-is-null.aspx)是来自 KendoUI 论坛的问题，Vladimir Iliev 提供了解释和解决方案。我希望这有帮助。

# ios - ios如何将objective-c转换为c语言

> ID：14330097
> 
> 赞同：1
> 
> 时间：2013-01-15T02:07:14.110
> 
> 标签：ios, objective-c, compilation

伙计们。在C编程中，如果一个方法没有定义，就会出错。在 Objective-C 编程中，它只会是警告。为什么？例如“[对象方法]”，它是如何编译的？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T02:16:25.297

`[object method]`编译为'传递消息，'方法'到'对象''。

在运行时`object`会首先检查它是否有一个带有消息名称的方法。如果确实如此，那么它将执行它。否则，有各种备份机制可以将消息转发给其他人或根据名称发明响应。

`[object method]`明确没有编译成的是 C++ 风格的名称修饰之类的`__objectClass_Method@4(object)`。在 C 语言中，它会编译为一个`objc_msgSend`肯定存在的调用，因为它是由运行时定义的。

除了 Objective-C，JavaScript、Python 和 Ruby 等语言也使用动态调度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T03:22:48.247

汤米的回答是绝对正确的。但是您可以将警告视为项目设置中的错误

![在此处输入图像描述](../Images/731d42a2303f405d8de50b274bc41e44.png)

# django - Mac 上的 GeoDjango 和 Spatialite：C 扩展加载问题

> ID：14330102
> 
> 赞同：4
> 
> 时间：2013-01-15T02:08:38.057
> 
> 标签：django, sqlite, geodjango, pysqlite, spatialite

我正在按照[GeoDjango 教程](https://docs.djangoproject.com/en/dev/ref/contrib/gis/tutorial/)在我的家用机器上为我的项目设置开发空间数据库，这是一台运行 OSX 10.8.2 的 Mac Mini。我安装了 KyngChaos 包（UnixImageIO、PROJ、GEOS、SQLite3 和 GDAL）和 spatialite，详见本教程的[OSX 部分](https://docs.djangoproject.com/en/dev/ref/contrib/gis/install/spatialite/#spatialite-macosx)。

我通过 spatialite 创建了数据库，但是当我尝试`python manage.py sqlall world`检查模型时，出现以下错误：

`django.core.exceptions.ImproperlyConfigured: The pysqlite library does not support C extension loading. Both SQLite and pysqlite must be configured to allow the loading of extensions to use SpatiaLite.`

没有太多关于这个问题的内容（尤其是对于 OSX 没有） - 大多数解决方案都涉及安装 pysqlite 而没有`define=SQLITE_OMIT_LOAD_EXTENSION`选项（例如[这里](https://stackoverflow.com/questions/11093593/python-the-pysqlite-library-does-not-support-c-extension-loading)）。我尝试使用 spatialite 2.3.1 和 2.4，我在我的 virtualenv 中修补并安装了 pysqlite，但我总是遇到同样的问题。

`spatialite`和二进制文件似乎都`sqlite3`可以正确执行，并且为 django 设置一个非空间 sqlite 数据库也可以正常工作，所以我怀疑这是 SQLite 本身的问题。

任何关于如何使这项工作的提示都会很棒。谢谢。

# node.js - 测试 node.js 应用程序可以处理的并发连接数

> ID：14330108
> 
> 赞同：0
> 
> 时间：2013-01-15T02:09:11.343
> 
> 标签：node.js

我想测试一个 node.js 应用程序可以处理多少并发连接。做这个的最好方式是什么？我在 node.js 中准备好了一个应用程序。哪个是测试其容量的最佳方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T02:12:58.510

如果您的应用程序使用 HTTP，我推荐[Siege](http://www.joedog.org/siege-home/)。

# ios - iOS 商店审核指南：我可以在我的应用程序上使用 iTunes Search API 吗？

> ID：14330109
> 
> 赞同：5
> 
> 时间：2013-01-15T02:09:15.523
> 
> 标签：ios

我使用“iTunes Search API”的应用程序因违反审核指南 (12.1) 而被拒绝。我想知道“iTunes Search API”是否无法在 iOS 应用程序中使用。

如果某些使用 API 的应用程序已获得批准，我会尝试重新申请。任何帮助将不胜感激。

苹果的审批指南是这样的。

> 12.1 从 Apple 网站（例如 apple.com、iTunes Store、App Store、iTunes Connect、Apple Developer Programs 等）抓取任何信息或使用 Apple 网站和服务的内容创建排名的应用程序将被拒绝 [https://developer .apple.com/appstore/resources/approval/guidelines.html#scraping-aggregation](https://developer.apple.com/appstore/resources/approval/guidelines.html#scraping-aggregation)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T19:25:47.363

我认为您需要成为 iTunes 联盟计划的一部分才能使用预览。Search API 的“法律”部分的第一句话是：

> 关联公司可能会使用 Apple 可能提供的某些促销内容，包括歌曲和音乐视频的预览、专辑封面和应用程序图标

从联盟计划的页面：

> 附属工具：各种高级工具可用于帮助精通技术的合作伙伴创建指向 iTunes、App Store 和 Mac App Store 的链接。其中包括搜索 API、为整个商店提供高级数据馈送的企业合作伙伴馈送以及可用于创建动态播放列表的 Web iMix 工具。

目前还不清楚......但我不会冒险，加入附属公司！此外，如果您的应用导致购买，您还可以分享利润。 [苹果联盟计划](http://www.apple.com/itunes/affiliates/resources/documentation/app-store-affiliate-program.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-01T05:59:57.830

直接取自 iTunes API Page 的法律部分：

> 开发者可以使用 Apple 可能提供的某些促销内容，包括歌曲和音乐视频的预览、专辑封面和应用程序图标（“促销内容”），用于宣传促销内容的主题；提供此类促销内容：(i) 仅放置在宣传促销内容所基于的内容的页面上；(ii) 靠近“在 iTunes 上下载”、“在 App Store 上下载”或“在 iBooks Store 上下载”徽章（经 Apple 批准），作为直接链接到 iTunes 或 App Store 中的页面的链接，消费者可以在其中购买推广内容；(iii) 如果此类促销内容包括歌曲或音乐视频预览，则包括表明促销内容“由 iTunes 提供”的归属；(iv) 仅流式传输，不下载、保存、缓存，或与视频同步，如果此类促销内容包括歌曲或音乐视频预览；(v) 除宣传目的外，不用于独立娱乐价值；(vi) 不用于推广任何其他商品或服务。开发者承认 Apple “按原样”提供促销内容，并否认任何和所有陈述或保证，包括但不限于不侵权。开发者应在收到与促销内容有关的任何索赔后立即将其转发给 Apple，并应 Apple 的要求立即删除任何促销内容。开发者承认 Apple “按原样”提供促销内容，并否认任何和所有陈述或保证，包括但不限于不侵权。开发者应在收到与促销内容有关的任何索赔后立即将其转发给 Apple，并应 Apple 的要求立即删除任何促销内容。开发者承认 Apple “按原样”提供促销内容，并否认任何和所有陈述或保证，包括但不限于不侵权。开发者应在收到与促销内容有关的任何索赔后立即将其转发给 Apple，并应 Apple 的要求立即删除任何促销内容。

# json - 如何使用rails format.json

> ID：14330110
> 
> 赞同：13
> 
> 时间：2013-01-15T02:09:16.600
> 
> 标签：json, ruby-on-rails-3.2

```
def index
@cellphones = Cellphone.all

respond_to do |format|
  format.html # index.html.erb
  format.json { render json: @cellphones }
end 
```

*   请简单回答...

    *   **format.json**是做什么用的？

    *   我必须为它创建一个视图吗？

    *   它与**javascrip**有什么关系？

    *   它与**ajax**有什么关系？

    *   请举一个简单的例子来说明如何使用它...

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-15T02:21:19.047

1.  它用于返回 JSON。
2.  不，它呈现`@cellphones`为 JSON。但是，您*可以*创建一个视图，例如，使用 JSON 构建器来自定义超出 Rails 开箱即用的输出。
3.  JavaScript 通常用于发出 JSON Ajax 请求，例如客户端框架。
4.  Ajax 调用通常需要 JSON 作为结果。他们还可以请求 HTML 直接呈现。
5.  这*是*一个如何使用它的例子；向`/cellphones`.

# iphone - cordova 2.2 mapkit - 地图没有显示

> ID：14330122
> 
> 赞同：0
> 
> 时间：2013-01-15T02:10:19.003
> 
> 标签：iphone, cordova, mapkit

我正在尝试将 mapkit 放入我的 phonegap (Cordova 2.2) 应用程序中。我按照所有说明进行操作，但是当我构建应用程序时，我会在模拟器屏幕底部看到带有“显示、隐藏、缩小、缩放、清除”按钮的白屏。谁能帮助我如何显示地图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:59:33.520

我遇到了同样的问题，问题是我没有在 phonegap.plist 文件中输入插件名称 mapkitview

同样在js文件中，有时如果你下载了旧版本的插件，你需要在phonegap和cordova之间切换为javascript变量。

# ruby - 将 select_datetime 组件的值传递给控制器

> ID：14330129
> 
> 赞同：0
> 
> 时间：2013-01-15T02:11:36.323
> 
> 标签：ruby, ruby-on-rails-3

我有一个 Ruby on Rails Web 应用程序，其中视图中有几个 select_datetime 组件。

在控制器中，它返回 :date 参数中的 select_datetime 组件之一的值，但不能同时返回两者。

那么，如何将多个 select_datetime 组件的值传递到相应的控制器中呢？

谢谢，蒂姆

# javascript - 如何检查 iframe 中的文本字段是否为空？

> ID：14330132
> 
> 赞同：0
> 
> 时间：2013-01-15T02:12:05.613
> 
> 标签：javascript, iframe, textfield

这个问题几乎概括了它。我正在尝试做一些类似于 Gmail 的事情，如果您在文本字段中输入了内容，那么网站会提示您确认是否要离开该页面。

但是，如果有问题的文本字段在 iframe 中怎么办？显然我可以为 iframe 分配一个 id，但是是否有任何 javascript 命令或可以检查 iframe 中的字段是否为空的东西？这甚至可能吗？

**编辑：** iframe 源和嵌入 iframe 的页面来自同一个域。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T02:14:29.397

```
var value = document.getElementById('iframeID').contentDocument
                    .getElementById('theTextBoxId').value; 
```

是的，有可能，您只需要`<iframe>`使用`contentDocument`.

> 从 DOM iframe 元素，脚本可以通过 contentWindow 属性访问包含的 HTML 页面的 window 对象。contentDocument 属性指的是 iframe 内的文档元素（这相当于 contentWindow.document），但 IE8 之前的 Internet Explorer 版本不支持。
> 
> **试图访问框架内容的脚本受同源策略的约束**，并且如果它是从不同的域加载的，则无法访问其他窗口对象中的大部分属性。

[MDN](https://developer.mozilla.org/en-US/docs/HTML/Element/iframe#Scripting)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T02:16:09.617

就像`onbeforeunload`iframe'd 页面是顶级页面一样设置。如果您尝试在父框架或子框架中导航离开，则会被确认中断。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T02:19:13.467

使用 JQuery，您可以访问 iframe 内容：

```
$("#iFrame").contents().find("#text") 
```

# coldfusion - cfhttp如何不编码加号

> ID：14330134
> 
> 赞同：3
> 
> 时间：2013-01-15T02:12:33.683
> 
> 标签：coldfusion, linkedin, cfhttp

情况：我正在尝试从 ColdFusion CFC 调用 LinkedIn API 以获取用户的个人资料和网络（连接）。LinkedIn API 声明，要执行此操作，您必须调用范围=r_fullprofile+r_network 的 URL。

问题：ColdFusion 自动对 URL 进行编码，因此加号被编码，LinkedIn 拒绝了我的呼叫。有没有办法解决？我在下面发布了一个链接，指向 github 上的一些代码片段，我相信这说明了这个问题。

[https://gist.github.com/4535364](https://gist.github.com/4535364)

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T15:32:40.220

我已经对此进行了一些搜索，并且看到了很多 ColdFusion 无法很好地与 LinkedIn API 配合使用的示例。所以我担心如果你确实通过了这个问题（虽然我还没有想出替代方案）另一个会突然出现。在搜索时，我发现了一些人们使用[linkedin-j 的建议，这是一个用于 LinkedIn API 的 Java 包装器](http://code.google.com/p/linkedin-j/)。以下是我找到的一些参考资料：

[工作示例 Coldfusion 和 Linkedin API](https://stackoverflow.com/questions/4165443/working-example-coldfusion-and-linkedin-api)

[LinkedIn-J 不返回教育](https://stackoverflow.com/questions/9916711/linkedin-j-does-not-return-educations)

[401 未经授权的响应。API people/~ 和 people/id=; 冷融合，cfhttp](http://developer.linkedin.com/thread/2233)

[问题更新状态 - 401 未授权 - ColdFusion](http://developer.linkedin.com/thread/1551)

[linkedin-j 入门](http://code.google.com/p/linkedin-j/wiki/GettingStarted)

**Side Note** Your github code example is making a `cfhttp` call to 'receiver.cfm' but you called the file 'cfhttp_receiver.cfm'. In this line:

```
<cfhttp url="http://#cgi.http_host#/sandbox/receiver.cfm?scope=#url.scope#" method="post" resolveurl="no"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T05:19:51.063

范围字段是一个空格分隔的列表。

该`+`字符通常用作空格的快捷方式，因为它比`%20`（空格编码的内容）更具可读性。

如果使用加号导致发送编码的加号 (%2B)，那么您还有另外两种将空格放入 URL 的方法：

1.  使用文字空格字符，或
2.  使用编码空间`%20`

尝试这两个选项，最好使用网络嗅探器（例如[WireShark](https://www.wireshark.org/)），这样您就可以准确地看到正在发送的内容。

更新：根据下面的评论，`%20`是正确的，但是基于签名的字符串需要再次编码，因此`%`变成`%25`，给出`%2520`.

# javascript - KineticJS 调整文本大小以适应带有一些填充的矩形

> ID：14330136
> 
> 赞同：3
> 
> 时间：2013-01-15T02:12:56.010
> 
> 标签：javascript, html, canvas, kineticjs

这是一个链接：http: [//jsfiddle.net/6VRxE/11/](http://jsfiddle.net/6VRxE/11/)

我有一个固定大小的文本框，我想动态更改文本、文本大小和填充，以便文本适合矩形并垂直对齐。

```
 var messageText = new Kinetic.Text({
      x: .25*stage.getWidth(),
      y: .25*stage.getHeight(), 
      width: .5*stage.getWidth(),
      height: .5*stage.getHeight(),
      fontSize: 10,
      fontFamily: 'Lucida Grande',
      text: 'Hello, click to continue',
      align: 'center',
      textFill: '#006400',
      stroke: 'gray',
      draggable: true,
      fill: 'white',
 }); 
```

我想用这样的事件或函数更改文本：

```
 messageText.on('click',function(){
      messageText.setText('hi');
      messageText.setFontSize(messageText.getHeight()/2);
      messageText.setPadding(messageText.getHeight()/5); //this was one possibility to do some alignment but doesn't work great
      stage.draw();
  }); 
```

有没有人有一个很好的解决方案来计算取决于长度的文本大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-03T09:51:55.673

看看下面的`padText`函数是否完成了你正在寻找的东西：

```
<!DOCTYPE html>
<html>
    <head lang="en">
        <meta charset="UTF-8">
        <title>Text Container Test</title>
    </head>
    <body>
        <div id="container"></div>
        <script src="http://cdnjs.cloudflare.com/ajax/libs/kineticjs/5.0.6/kinetic.min.js"></script>
        <script>
            var layer = new Kinetic.Layer,
                text = new Kinetic.Text({
                    text: 'Fit Me',
                    fill: 'black',
                    align: 'center'
                }),
                rect = new Kinetic.Rect({
                    width: 400,
                    height: 200,
                    stroke: 'red'
                }),
                stage = new Kinetic.Stage({
                    width: rect.width(),
                    height: rect.height(),
                    container: 'container'
                });

            layer.add( text );
            layer.add( rect );

            stage.add( layer );

            padText( text, rect, 10 );

            layer.draw();

            function padText( text, container, amount ){
                while (( text.width() * 1.001 ) < container.width() - ( amount * 2 ))
                    text.fontSize( text.fontSize() * 1.001 );

                text.y(( container.height() - text.height() ) / 2 );

                text.width( container.width() );
                text.height( container.height() );
            }
        </script>
    </body>
</html> 
```

[例子](http://codepen.io/anon/pen/JrsHx)

# github - 我如何从 GitHub 的 post-receive 挂钩中知道重命名文件的原始文件名？

> ID：14330148
> 
> 赞同：3
> 
> 时间：2013-01-15T02:15:36.203
> 
> 标签：github, github-api

情况如下：

1.  我的仓库中有一个文件，比如说`something/foo.md`.
2.  我用 git 重命名它，所以它现在是`something/bar.md`.
3.  我提交然后推送
4.  我从 GitHub 获取接收后有效负载

问题是：提交显示`something/foo.md`为已删除和`something/bar.md`已添加，即使通过查看 GitHub 上的提交，它显示为重命名 from `something/foo.md`to `something/bar.md`。

有谁知道我如何从接收后挂钩中获取这些信息？

# backbone.js - 当我必须在多个地方设置模型的属性时的性能问题（模型绑定到更改事件）

> ID：14330153
> 
> 赞同：0
> 
> 时间：2013-01-15T02:16:16.647
> 
> 标签：backbone.js, bind, onchange, silent

我将我的模态绑定到更改事件

```
@model.bind('change', @someAction) 
```

如果我需要设置/更改模型和多个位置的属性，即@model.set({someAttr:'attributeA'})，我的应用程序的性能会受到影响吗？

做 {silent: true}, @model.set({someAttr:'attributeA'}, {silent: true}) 是否解决了应用程序的性能问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T13:10:28.533

答案是“视情况而定”。由您决定模型的哪些更改值得更改事件，哪些不值得。在这种情况下，没有什么神奇的方法可以提高性能。

传递`{silent:true}`是防止更改事件触发的一种方法。另一个优化是监听模型中特定属性的变化。

```
@model.bind('change:myAttr', @someAction) 
```

这样，只有在更改特定属性时才会触发您的操作，而在更改任何其他属性时不会触发您的操作。

# python - Python 命名元组切片

> ID：14330154
> 
> 赞同：3
> 
> 时间：2013-01-15T02:16:23.393
> 
> 标签：python, arrays, namedtuple

这是我在这里的第一个问题......

如果我有一个如下所示的命名元组

```
 FDResult = namedtuple('FDResult', ['S', 'Payoff', 'V']) 
```

我有一个数组，其中包含如下的 namedtuple 集合

```
 bla = [FDResult(S=100.0, Payoff=0.0, V=0.4693541525097441),
 FDResult(S=102.0, Payoff=1.0, V=0.4944046100897207),
 FDResult(S=104.0, Payoff=1.0, V=0.5188897967596792),
 FDResult(S=106.0, Payoff=1.0, V=0.5427339609362274),
 FDResult(S=108.0, Payoff=1.0, V=0.5658731041633024)] 
```

如何获得 S 的数组切片？

```
 bla[:].S #I want to get [100.0,102.0,104.0,...] as a result 
```

这不适用于错误：AttributeError：'list'对象没有属性'S'......

任何建议表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T02:20:17.180

我想你想要一个[列表理解](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)，例如

```
[x.S for x in bla[:]] 
```

您当然可以在其中替换列表中更通用的部分，例如`bla[1:-1:2]`.

# php - foreach 循环内的 while 循环

> ID：14330156
> 
> 赞同：-3
> 
> 时间：2013-01-15T02:16:52.840
> 
> 标签：php, loops, foreach, while-loop

也许我在混合苹果和橘子——$clist 是一个带有 csv 的字符串。我无法让 $row2['$cat'] 回显任何内容。提前致谢

```
$cats = explode(",", $clist);
foreach($cats as $cat) {
  $cat = trim($cat);
  $q = "SELECT * FROM contacts WHERE id = '$cat' ";
  $result = mysql_query($q, $link);

  $num2=mysql_num_rows($result2);

  $x = 0;
  while($x < $num2) {
    $row2 = mysql_fetch_array($result2);
    echo $row2['$cat'];
    $x++;
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T02:18:51.823

来自 Michael Berkowski 的评论：删除引号。`$row2[$cat]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T02:39:35.160

与其对数组中的每个值进行查询，不如只进行一次查询？

```
$cats = array('ginger','tabby','somthing');
$sql = "SELECT * FROM contacts WHERE id IN(\"".implode('", "',$cats)."\")";

//SELECT * FROM contacts WHERE id IN("ginger", "tabby", "somthing") 
```

# ios - 在打开的相机上展示相机胶卷 UIImagePickerController

> ID：14330159
> 
> 赞同：10
> 
> 时间：2013-01-15T02:17:07.597
> 
> 标签：ios, objective-c, uiimagepickercontroller

在我的应用程序上，我有一个`cameraOverlayView`打开的相机，带有相机按钮的自定义控件。该应用程序允许用户在关闭相机之前拍摄多张照片，因此快门按钮不会调用`dismissViewControllerAnimated`，而是在您完成拍照时有一个关闭按钮。

现在，相机覆盖层上的按钮之一是图库按钮，允许用户选择保存的图像而不是拍摄新图像。我尝试了两种不同的方法来完成这项工作，但都失败了。

**第一种方法**

`UIImagePickerController`使用当前呈现覆盖的同一实例并切换`sourceType`到库。然后它确实显示了画廊，但是当点击照片时，我无法在不关闭整个叠加层的情况下关闭厨房。

**第二种方法**

创建一个单独的实例`UIImagePickerController`，将其设置`sourceType`为画廊并尝试调用`presentViewController`，然后失败并显示警告：

> “警告：尝试呈现不在窗口层次结构中的视图！”

有没有人有这个问题的解决方案？这甚至可能吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-29T15:07:13.133

试试这个~~我认为这是你的目标。

```
#import "ViewController.h"

@interface ViewController ()

@property (nonatomic, strong) UIImagePickerController *imagePicker;

@end

@implementation ViewController

@synthesize imagePicker = _imagePicker;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:YES];

    sleep(2);

    _imagePicker = [[UIImagePickerController alloc] init];
    [_imagePicker setSourceType:UIImagePickerControllerSourceTypeCamera];
    [_imagePicker setDelegate:self];

    UIButton *button = [[UIButton alloc] initWithFrame:CGRectMake(10, 50, 100, 30)];
    [button setTitle:@"Library" forState:UIControlStateNormal];
    [button setBackgroundColor:[UIColor darkGrayColor]];
    [button addTarget:self action:@selector(gotoLibrary:) forControlEvents:UIControlEventTouchUpInside];

    [_imagePicker.view addSubview:button];

    [self presentViewController:_imagePicker animated:YES completion:nil];
}
- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

-(IBAction)gotoLibrary:(id)sender
{
    UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
    [imagePicker.view setFrame:CGRectMake(0, 80, 320, 350)];
    [imagePicker setSourceType:UIImagePickerControllerSourceTypeSavedPhotosAlbum];
    [imagePicker setDelegate:self];

    [_imagePicker presentViewController:imagePicker animated:YES completion:nil];
}

- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    [picker dismissViewControllerAnimated:YES completion:nil];
}
- (void)imagePickerControllerDidCancel:(UIImagePickerController *)picker
{
    [picker dismissViewControllerAnimated:YES completion:nil];
}
@end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-27T22:10:49.113

第二种方法是正确的。我没有看到您的代码，但我认为您的控制器层次结构类似于：

Main VC ---present---> Camera VC

所以，如果你打电话

```
[self presentViewController:picker animated:YES completion:^{}]; 
```

从您的主 VC 中，您正试图从“隐藏”的 VC 中显示另一个 VC（由相机 VC 覆盖）。

关键是参考您的相机VC（我们称之为cameraVC）并在Main VC中执行类似的操作：

```
 [cameraVC presentViewController:theOtherPicker animated:YES completion:^{}]; 
```

这样做，“当前”动作由 Camera VC（可见）完成，没有警告，而不是由隐藏的 Main VC。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T03:56:30.317

您可以编写自己的自定义图库视图以选择照片，然后将其添加到`cameraOverlayView`子视图层次结构中。

GitHub 上一定有开源项目，展示了如何在某个地方制作这些视图。或者，如果您不想从头开始，我碰巧[发布了一个与您正在寻找的控件非常相似的控件。](http://www.chupamobile.com/products/details/830/Multiple+Image+Selection+View+Controller/)

这真的是一个非常简单的过程——一个带有`AssetsLibrary`框架支持的数据源的集合视图。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T11:44:22.883

我展示了一个自定义相机视图控制器，我在其上添加了一个“SourceTypeCamera”UIImagePickerController 作为包含的子视图控制器。我的自定义视图控制器有一个按钮，该按钮又添加了另一个 UIImagePickerController 实例，这是一个“SourceTypePhotoLibrary”。

你最终得到一个嵌套的视图控制器层次结构：

*   根/主视图控制器*- 呈现：*
*   我的自定义相机视图控制器*- 添加为子视图控制器：*
*   *相机*或*照片库*UIImagePickerController**

 *像这样的东西：

```
- (void)viewDidLoad { (id<UIImagePickerControllerDelegate,UINavigationControllerDelegate>)theDelegate {
    [super viewDidLoad];
    [self startImagePickerWithSourceType:UIImagePickerControllerSourceTypeCamera
                                delegate:self];
    // configure button in camera overlay to call -pickPhotoTapped
}

- (void) pickPhotoTapped {
    [self startImagePickerWithSourceType:UIImagePickerControllerSourceTypePhotoLibrary
                                delegate:self];
}

- (BOOL) startImagePickerWithSourceType:(UIImagePickerControllerSourceType)sourceType
                               delegate:(id<UIImagePickerControllerDelegate,UINavigationControllerDelegate>)theDelegate {
    if (([UIImagePickerController isSourceTypeAvailable:sourceType] == NO)
            || (theDelegate == nil))
        return NO;

    self.cameraUI = [[UIImagePickerController alloc] init];
    self.cameraUI.sourceType = sourceType;
    self.cameraUI.view.frame = self.view.bounds;
    self.cameraUI.delegate = theDelegate;

    if (sourceType == UIImagePickerControllerSourceTypeCamera) {
        self.cameraUI.allowsEditing = NO;
        self.cameraUI.showsCameraControls = NO;
        self.cameraUI.cameraOverlayView = [self overlayView];
    }

    [self addChildViewController:self.cameraUI];
    [self.view addSubview:self.cameraUI.view];
    [self.cameraUI didMoveToParentViewController:self];

    return YES;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-28T07:07:10.820

我将按如下方式设置捕获会话：

```
- (void)setupCaptureSession
{
    NSError* error = nil;

    // Create the session
    _captureSession = [[AVCaptureSession alloc] init];    
    _captureSession.sessionPreset = AVCaptureSessionPresetMedium;
    AVCaptureDevice* device = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];

    AVCaptureDeviceInput* input = [AVCaptureDeviceInput deviceInputWithDevice:device error:&error];

    [_captureSession addInput:input];
    AVCaptureVideoDataOutput* output = [[AVCaptureVideoDataOutput alloc] init];
    [_captureSession addOutput:output];

    // Configure your output.
   dispatch_queue_t queue = dispatch_queue_create("myCameraOutputQueue", NULL);
   //If you want to sebsequently use the data, then implement the delegate.
   [output setSampleBufferDelegate:self queue:queue]; 
} 
```

完成后，您可以创建一个预览层，如下所示：

```
_previewLayer = [AVCaptureVideoPreviewLayer layerWithSession:_captureSession];
[_captureSession startRunning]; 
```

然后将预览层添加到您的视图中：

```
_myView.layer addSubLayer:_previewLayer]; 
```

现在您已经设置好了，我将添加一个自定义图像选择器，例如这个：[https ://github.com/arturgrigor/AGImagePickerController](https://github.com/arturgrigor/AGImagePickerController)*

# android - 远处的 AR 图像跟踪器？

> ID：14330161
> 
> 赞同：1
> 
> 时间：2013-01-15T02:17:44.040
> 
> 标签：android, augmented-reality, image-recognition, vuforia

我正在开发一个需要将图像跟踪器放置在远处的增强现实应用程序。目标是篮球比赛中的广告牌或记分牌。我已经尝试过高通的 Vuforia SDK，它似乎只在标记放置在距离相机 3 英尺范围内时才有效。当您进一步移动时，我认为它会丢失细节，并且 AR 引擎无法再识别跟踪器。

从理论上讲，如果标记足够大且足够亮，并且具有清晰定义的细节和边界标记以用于跟踪目的，它应该不起作用吗？

此外，AR 应用程序是否可以识别任何平面，例如具有各种颜色和纹理的桌子或硬木地板，只要它是平面即可。典型的应用是虚拟键盘或棋盘。

谢谢，乔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:54:49.853

AR 是关于识别标记，而不是形状。AR引擎输入是来自相机的图像，无法从中确定形状，因此您的第二个问题的答案是：否。

PS：在我的情况下（iOS），从大约 1,5m 检测到默认标记，并且可以跟踪到大约 4m。我认为，相机的分辨率很重要，会影响跟踪效率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T09:59:22.523

我们的经验是，大约 20x20cm 大小的标记在大约 5 米的距离内可以被 Vuforia SDK 读取。这似乎是极限。

# ruby - 从 beanstalkd 队列中保留多个作业

> ID：14330162
> 
> 赞同：1
> 
> 时间：2013-01-15T02:17:56.037
> 
> 标签：ruby, beanstalkd

有没有一种方法可以一次从 beanstalkd 队列中保留多个作业？

我正在向外部 API 发出请求，每个查询最多可以返回 10 个结果。它们限制了我每天可以提出的请求数量，因此每个请求获得的结果越多越好。

我在文档中找不到任何提及此功能的内容，因此我正在使用此解决方法。有谁知道实现这一目标的更好方法？还是比 beanstalkd 更适合这项工作的工具？

```
loop do
  sleep(0.3)

  while @beanstalk.tubes[example].peek(:ready)
    jobs = []

    catch(:done) do
      10.times do |i|
        if @beanstalk.tubes[example].peek(:ready) then
          job = @beanstalk.tubes[example].reserve(0)
          jobs << job.body
          job.delete
        else
          throw(:done)
        end
      end
    end

    process(jobs)

  end
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T04:00:59.067

您可以通过在删除或释放这些作业之前连续调用`reserve` 多次来同时保留多个作业。

根据您提供的代码示例，它可能大致如下所示：

```
loop do
  timeout = nil
  jobs = []

  begin
    10.times do |i|
      jobs << @beanstalk.tubes[example].reserve(timeout)
      timeout = 0
    end
  rescue Beaneater::TimedOutError
    # nothing to do
  end

  process(jobs.map{|j| j.body})

  jobs.map do |job|
    job.delete
  end
end 
```

# makefile - 带有标志的makefile规则

> ID：14330169
> 
> 赞同：0
> 
> 时间：2013-01-15T02:18:34.537
> 
> 标签：makefile, rule

```
_OBJ = hellomake.o hellofunc.o 
OBJ = $(patsubst %,$(ODIR)/%,$(_OBJ)) 
```

我正在尝试学习 makefile 语法。第二行在说什么？我一无所知。请问上面的每个操作员都有什么用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T02:24:13.627

是`pattern substitution`函数调用。这是手册的[链接](http://www.gnu.org/software/make/manual/make.html#Text-Functions)。

在您的情况下， line2 为所有文件名添加前缀`_OBJ`with`$(ODIR)/`并将结果存储到 variable`OBJ`中。

# sql-server - SQL Server：引用表和外键的报告

> ID：14330172
> 
> 赞同：0
> 
> 时间：2013-01-15T02:18:51.067
> 
> 标签：sql-server, documentation, foreign-keys, redgate

我想生成一个显示数据库中所有表的报告。对于每个表，报告将记录它所引用的表以及它所引用的表。还包括用于引用的外键。

我之前尝试过使用[Red Gate SQL Dependency Tracker](http://www.red-gate.com/products/sql-development/sql-dependency-tracker/)，它给了我一个易于阅读、可用的报告——缺少的只是每个表关联的外键。

如果有人可以成为一个很棒的替代软件，可以做我想做的事情，或者提供某种形式的替代方法，我将非常感激！我这样做的主要目的实际上是为客户提供某种形式的可读模式，以便客户能够理解数据库内的互连......我尝试过使用数据库图表，但由于可读性。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T05:35:25.963

我使用这个脚本查询一些系统目录视图

```
SELECT 
    fk.name 'FK Name',
    tpar.name 'Parent Table',
    colpar.name 'Parent Column',
    tref.name 'Referenced Table',
    colref.name 'Referenced Column',
    fk.delete_referential_action_desc 'Delete Action',
    fk.update_referential_action_desc 'Update Action'
FROM
    sys.foreign_keys fk
INNER JOIN 
    sys.foreign_key_columns fkc ON fkc.constraint_object_id = fk.object_id
INNER JOIN 
    sys.tables tpar ON fk.parent_object_id = tpar.object_id
INNER JOIN 
    sys.columns colpar ON fkc.parent_object_id = colpar.object_id AND fkc.parent_column_id = colpar.column_id
INNER JOIN 
    sys.tables tref ON fk.referenced_object_id = tref.object_id
INNER JOIN 
    sys.columns colref ON fkc.referenced_object_id = colref.object_id AND fkc.referenced_column_id = colref.column_id 
```

它会产生类似的输出：

```
FK Name   Parent Table   Parent Column   Referenced Table   Referenced Column   Delete Action   Update Action 
```

这对我来说非常有效。随意适应您自己的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T09:17:25.373

Dependency Tracker 默认情况下不显示外键，但如果单击“将约束显示为对象”按钮就会显示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T02:28:32.583

`sp_help <table_name>`输出表引用的外键以及引用其列作为外键的表。查询`sys.tables`和使用`sp_help`应该为您提供所需的所有信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T13:46:18.033

你试过[ApexSQL Clean](http://www.apexsql.com/sql_tools_clean.aspx)吗？它可以选择直观地显示所有参考，挖掘所有关系等等......

如果您的目标是只创建显示所有数据的文档，您应该查看一些文档工具，并且有很多这样的工具。我正在使用 ApexSQL Doc，但我想你不会错用来自其他大供应商的任何其他流行工具。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-24T20:59:51.420

一天结束时，我使用[了 Toad for SQL Server 。](http://toadforsqlserver.com/index.jspa)虽然数据库文档实际上可能不是 ace 标准，但它比 Red Gate 的可定制性更高。使用报告生成器，我能够提出每个外键的依赖关系，以及它们引用的列......

非常感谢您的所有回答，它们为我提供了宝贵的见解。

# c# - 将两个循环函数合二为一

> ID：14330174
> 
> 赞同：0
> 
> 时间：2013-01-15T02:18:55.100
> 
> 标签：c#, refactoring

我有一个定义列表的类和两个循环函数，它们在列表中找到具有某些属性的项目。这两个循环函数是否可以组合成一个更通用的循环函数，以内部 Bar.Function() 作为参数？

```
class Foo {
    List<Bar> bar;

    List<int> SomeFunc() {
        List<int> list;
        for (i...) {
           if (bar[i].IsSomething()) {
               list.Add(i);
           }
        }
        return list;
    }

    List<int> SomeOtherFunc() {
        List<int> list;
        for (i...) {
           if (bar[i].IsSomethingElse()) {
               list.Add(i);
           }
        }
        return list;
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T02:25:11.000

是的，如果您使用 lambda，这很容易：

```
class Foo 
{
        List<Bar> bar;

        List<int> SomeFunc()
        {
            return LoopedTest(b => b.IsSomething());
        }

        List<int> SomeOtherFunc()
        {
            return LoopedTest(b => b.IsSomethingElse());
        }

        private List<int> LoopedTest(Predicate<Bar> test)
        {
            List<int> list = new List<int>();
            for (int i = 0; i < bar.Count; i++)
            {
                if (test(bar[i]))
                {
                    list.Add(i);
                }
            }
            return list;
        }

} 
```

正如其他人所提到的，在这种特殊情况下，已经有一个相对简洁的结构用于您正在进行的过滤（根据 phoog 的建议进行了改进）：

```
return IEnumerable.Range(0, bar.Count).Where(i => bar[i].IsSomething()).ToList(); 
```

您还可以结合这两种解决方案来获得一些非常干净的代码：

```
class Foo 
{
        List<Bar> bar;

        List<int> SomeFunc()
        {
            return FindIndexes(b => b.IsSomething());
        }

        List<int> SomeOtherFunc()
        {
            return FindIndexes(b => b.IsSomethingElse());
        }

        private List<int> FindIndexes(Predicate<Bar> test)
        {
            return IEnumerable.Range(0, bar.Count).Where(i => test(bar[i])).ToList();
        }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T02:25:42.790

一个简单的 LINQ 调用怎么样：

```
 List<int> res = list.Select(x => x.SomeFunc).Union(list.Select(y => y.SomeFunc2)) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-15T02:25:19.360

如果您在获取匹配索引列表作为获取项目本身列表的前导，则可以使用 Linq：

```
var selection = bar.Where(b => b.IsSomething()).ToList(); 
```

由于这只是 Linq 的一条语句，您可能不需要将它放在它自己的方法中，但如果您这样做，它看起来会是这样的：

```
private List<Bar> SomeFunc(Predicate<Bar> test)
{
    return bar.Where(test).ToList();
} 
```

如果你真的很在意索引，那么使用 Linq 它会是这样的：

```
var selection = bar.Select((b, i) => new { b, i })
                .Where(x => x.b.IsSomething())
                .Select(x => x.i)
                .ToList(); 
```

并考虑到一种方法，那就是：

```
private List<Bar> SomeFunc(Predicate<Bar> test)
{
    return bar.Select((b, i) => new { b, i })
                .Where(x => test(x.b))
                .Select(x => x.i)
                .ToList();
} 
```

# ios - iOS JSON 解析错误

> ID：14330179
> 
> 赞同：2
> 
> 时间：2013-01-15T02:19:22.140
> 
> 标签：ios, json, parsing

我试图在这里解析一个json，但由于某种原因不断出现错误。我的代码是

```
 NSString *string = [NSString stringWithFormat:@"http://api.wunderground.com/api/3c158b3b3cd6ce90/hourly/q/11758.json"];//, query];
NSString *string2 = [string stringByReplacingOccurrencesOfString:@" " withString:@"_"];
NSData* data = [NSData dataWithContentsOfURL:
                [NSURL URLWithString:string]];
NSError* error;

NSDictionary *res = [NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingMutableLeaves error:&error];

NSArray* latestLoans = [res objectForKey:@"forecast"]; //2
NSArray *tmp = [latestLoans valueForKey:@"temp"];
NSLog(@"temp: %@", tmp); 
```

错误是

```
temp: (null)
Entity: line 2: parser error : Start tag expected, '<' not found
{
^ 
```

我没有得到这个，因为 URL 是真实的并且得到了响应，我需要这方面的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T02:34:06.473

您正在寻找的“预测”在响应中不存在。也许您正在寻找的是“hourly_forecast”。

```
NSArray* latestLoans = [res objectForKey:@"hourly_forecast"]; //2
NSArray *tmp = [latestLoans valueForKey:@"temp"]; 
```

# java - 拨打邮政编码 -- Android

> ID：14330185
> 
> 赞同：1
> 
> 时间：2013-01-15T02:21:02.927
> 
> 标签：java, android, eclipse

我在同一个 TextView 中有电话号码和地址（包括邮政编码）。我希望电话号码可以点击拨打；但是，这使得邮政编码也可以单击以拨打电话。如何在不创建另一个 TextView 的情况下使其不再可点击？谢谢！

```
tvInfo.setText(Html.fromHtml("John Smith<br>123 Fake Street<br>Faketown, FK 12345<br><b>(804) 932-3300</b><br>"));

Linkify.addLinks(tvInfo, Linkify.PHONE_NUMBERS); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T04:03:06.820

android 会将 count >=5 的数字视为电话号码。所以我认为至少会有2个解决方案：

1）一个简单的解决方法：如果您确定电话号码的长度超过 5 个，例如，至少 6 位，您可以解决一些问题：

```
private final static int MY_PHONE_NUMBER_MINIMUM_DIGITS = 6;

Linkify.addLinks(main, Patterns.PHONE, "tel:", new Linkify.MatchFilter() {
     public final boolean acceptMatch(CharSequence s, int start, int end) {
       int digitCount = 0;

       for (int i = start; i < end; i++) {
         if (Character.isDigit(s.charAt(i))) {
           digitCount++;
           if (digitCount >= MY_PHONE_NUMBER_MINIMUM_DIGITS ) {
             return true;
         }
       }
     }
      return false;
    }
  }, Linkify.sPhoneNumberTransformFilter); 
```

这个变通方法是基于Linkify的android源码，在Linkify中，方法：

```
gatherLinks(links, text, Patterns.PHONE, 
            new String[] { "tel:" },
            sPhoneNumberMatchFilter, sPhoneNumberTransformFilter); 
```

将被调用，而 sPhoneNumberMatchFilter 将过滤小于 5 的数字：

```
public static final MatchFilter sPhoneNumberMatchFilter = new MatchFilter() {
    public final boolean acceptMatch(CharSequence s, int start, int end) {
      int digitCount = 0;

      for (int i = start; i < end; i++) {
        if (Character.isDigit(s.charAt(i))) {
          digitCount++;
          if (digitCount >= PHONE_NUMBER_MINIMUM_DIGITS/*=5*/) {
            return true;
        }
      }
    }
    return false;
 } 
```

};

所以我们只需将“PHONE_NUMBER_MINIMUM_DIGITS”替换为 6

2）一个更复杂的解决方案是，如果您的电话号码是更具体的格式，例如，必须是“（xxx）xxx-xxxx”，您可以使用自己的模式替换Patterns.PHONE，提取和更准确地应用电话号码的链接

# java - Java - 在字符串中搜索字节码

> ID：14330186
> 
> 赞同：-1
> 
> 时间：2013-01-15T02:21:04.030
> 
> 标签：java, byte

我已经尝试了很多搜索来找到一种在字符串中搜索字节码的方法。这是一个例子：

```
String stringThatHasBytes = "hello world hello world[B@9304b1";

If stringThatHasBytes . Does have bytes {
return true or false
} 
```

有没有一种方法可以在字符串中搜索字节？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T02:29:00.960

简而言之，你不能这样做。因为每次打印出一个字节时，它的打印都会发生变化。打印出字节不会打印实际字节，如果您正在寻找字节的精确比较，它是没有意义的。

但是，如果您只查找字符串中的任何字节打印，只需控制字符串中的`[B@`s 并返回 true。

```
String stringThatHasBytes = "hello world hello world[B@9304b1";

if (stringThatHasBytes.indexOf("[B@") >= 0)
    return true;
} else return false; 
```

**编辑：**

如果您需要以有意义的方式打印字节的方法，您应该将字节转换为一些有意义的文本，例如：

```
public static String convertByteArrayToHexString(byte[] b) {
    if (b != null) {
        StringBuilder s = new StringBuilder(2 * b.length);

        for (int i = 0; i < b.length; ++i) {
            final String t = Integer.toHexString(b[i]);
            final int l = t.length();
            if (l > 2) {
                s.append(t.substring(l - 2));
            } else {
                if (l == 1) {
                    s.append("0");
                }
                s.append(t);
            }
        }

        return s.toString();
    } else {
        return "";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T02:29:42.990

看看这是否有帮助

```
 byte[] myByteArray = new byte[5];

        myByteArray[0] = 'a';
        myByteArray[1] = 'b';
        myByteArray[2] = 'c';
        myByteArray[3] = 'd';
        myByteArray[4] = 'e';

        for (byte x : myByteArray)
            System.out.println(x);

        String myString = "abcde";

        System.out.println(myString.equals(new String(myByteArray))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T02:30:41.600

包含对您来说太简单的答案吗？

```
boolean hasBytes = str.contains("[B@"); 
```

If so let me know I'll show you some good regex! but that should be sufficient.

# facebook - 如何解决 Visual Studio 的无法识别的命名空间警告？

> ID：14330192
> 
> 赞同：2
> 
> 时间：2013-01-15T02:21:49.793
> 
> 标签：facebook, visual-studio-2012, facebook-javascript-sdk, xml-namespaces

截图说明了一切。如何解决此类警告？

![在此处输入图像描述](../Images/46a2091793abd76dfa363340bfba3169.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:18:01.577

在您的母版页中，像这样使用 fb xmlns

```
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fb="http://www.facebook.com/2008/fbml"> 
```

# amazon-ec2 - Smartfoxserver 2X linux 64 通过 dotcloud 在 EC2 上运行 - 如何安装？

> ID：14330193
> 
> 赞同：0
> 
> 时间：2013-01-15T02:22:00.960
> 
> 标签：amazon-ec2, dotcloud, smartfoxserver

我目前正在尝试使用 dotcloud 在 EC2 上部署 smartfoxserver 2X。我已经能够检测到亚马逊网络实例的私有 ip，并且使用 dotcloud 工具我已经能够确定正确的端口。但是，我很难通过命令行正确安装服务器，以便我可以使用 AdminTool 登录它。

我的 postinstall 相当简单：

./SFS2X/sfs2x-service start-launchd

我发现在“dotcloud push”上，我的 cygwin 终端中有相当多的有希望的输出，但是在说 sfs2x-service 已正确启动之后，推送挂起，直到超时。

因此，我的问题是，有没有人找到通过 dotcloud 在 EC2 上成功安装 SFS2X 的方法？通过在我的 postinstall 中调用 ./jre/bin/java -jar installer.jar，我设法在 SFS Pro 上取得了部分成功，并完全推动了 dotcloud。我是否需要做额外的工作并为 SFS2X 构建安装程序 jar？有没有最好的方法来做到这一点？

我确实了解在 EC2 上使用 RightScale 使用 SFS2X 进行部署有一种标准方法，但是我对使用 dotcloud 平台进行部署很感兴趣。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T14:05:01.463

它挂起的原因是因为您试图在安装后启动您的进程，而这不是执行此操作的正确位置。安装后脚本应该完成，如果没有完成，部署将超时，然后被取消。

安装后脚本完成后，它将完成其余的部署。

有关 dotCloud 后安装脚本的更多信息，请参阅此页面：http: [//docs.dotcloud.com/0.9/guides/hooks/#post-install](http://docs.dotcloud.com/0.9/guides/hooks/#post-install)

最后注意这个警告。

> **警告**：如果您的安装后脚本返回错误（非零退出代码），或者如果它运行超过 10 分钟，平台将认为您的构建失败，并且不会部署您的新版本代码.

您应该将其添加为后台进程，而不是将其放在安装后脚本中，以便在部署过程完成后启动它。

有关将后台进程添加到 dotCloud 服务的更多信息，请参阅此页面：

[http://docs.dotcloud.com/0.9/guides/daemons/](http://docs.dotcloud.com/0.9/guides/daemons/)

**TL;DR：**您需要创建一个 supervisord.conf 文件，并将其添加到项目的根目录，然后将您的服务添加到其中。

*示例（您需要根据自己的情况进行更改）：*

```
[program:smartfoxserver]
command = /home/dotcloud/current/SFS2X/sfs2x-service start-launchd 
```

此外，请确保您在 dotcloud.yml 中指定了正确的 dotCloud 服务，以便为您的 smartfoxserver 应用程序安装正确的二进制文件和库。

# android - 在 Android 中获取 MP4/流 URL 的元数据？

> ID：14330196
> 
> 赞同：0
> 
> 时间：2013-01-15T02:23:16.853
> 
> 标签：android, video-streaming, mp4

我在应用程序中显示 MP4 视频。如何获取 MP4 的元数据？

[http://www.ooklnet.com/files/368/368007/video.mp4](http://www.ooklnet.com/files/368/368007/video.mp4)

像缩略图 URL、标题等。我主要是想获取 MP4 视频的中间帧。

# javascript - Javascript 对象属性未定义

> ID：14330200
> 
> 赞同：-1
> 
> 时间：2013-01-15T02:24:45.260
> 
> 标签：javascript, node.js

我正在尝试为 node.js 构建一个 reddit api 包装器。我对 OO javascript 相当陌生，并且在为我的 reddit 对象的属性分配值时遇到问题。

```
var request = require("request");
var subreddit = require("./subreddit").subreddit;

var reddit = function () {

  var self = this,
      userAgent = "node.js api wrapper - https://github.com/theyshookhands/rednode",
      debug = false,
      cookie = "",
      uh = "";  

  self.getJSON = function (url, data, callback) {
    data["api_type"] = "json";
    request(url, { qs: data }, function (error, response, body) {
      if (!error && response.statusCode == 200) {
        callback(body);
      }
    });
  };

  self.post = function (url, data, callback) {
    console.log("in post");
    console.log("cookie: " + self.cookie);
    console.log("uh: " + self.uh);
    data["api_type"] = "json";
    if (self.cookie) {
      request.cookie(self.cookie);
      console.log("cookie assigned");
    }
    if (self.uh) {
      data["uh"] = self.uh;
      console.log("uh assigned");
    }
    console.log("requesting");
    request.post(url, { form: data }, function (error, response, body) {
      if (!error && response.statusCode == 200) {
        console.log("no errors");
        callback(body);
      }
    });
  };

};

reddit.prototype = {

  login: function (username, password, callback) {
    var data = {
      "user": username,
      "passwd": password,
      "rem": false
    };

    this.post("http://www.reddit.com/api/login", data, function (body) {
      var response = JSON.parse(body);
      this.uh = response["json"]["data"]["modhash"];
      this.cookie = response.json.data.cookie;
      console.log("rednode --> logged in as: " + username);
      callback();
    });
  },

  setUserAgent: function (userAgent) {
    this.userAgent = userAgent;
  },

  r: function (name, callback) {
    var sr = new subreddit(name);
    if (callback) {
      sr.exec(callback);
    }
    return sr;
  },

  postLink: function (sr, title, url, callback) {
    var data = {
      "kind": "link",
      "sr": sr,
      "title": title,
      "url": url
    };
    console.log("calling post");
    this.post("http://www.reddit.com/api/submit", data, callback);
  }
}

exports.reddit = reddit; 
```

对象在第 15 行和第 16 行定义。它们在第 62 和 63 行给出值。为什么我没有使用

```
this.cookie, this.modhash 
```

句法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T02:35:35.077

当您使用关键字`this`来引用您在“对象”上定义的属性时，它们必须在函数/对象的相同范围内。

您错误地使用`this`关键字来引用函数/对象变量/属性，该函数/对象变量/属性实际上将`reddit.cookie`在未命名的回调函数的范围内调用。

但是，您必须声明 cookie`this.cookie ="";`才能访问它`reddit.cookie`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T03:52:39.060

在函数中：

```
var reddit = function () { 
```

为什么要在函数声明可以使用并且可能更清晰的地方使用函数表达式？按照惯例，构造函数以大写字母开头：

```
function Reddit() { 
```

在函数中：

```
 var self = this, 
```

函数的`this`值完全取决于函数的调用方式。由于这是一个构造函数，当调用`new`它时`this`将引用一个新构造的对象（构造函数的“实例”）。

```
 var self = this,
      userAgent = "...",
      debug = false,
      cookie = "", 
```

上面在本地执行对象的变量对象上创建了**变量。**您只能按名称访问变量，它们在执行对象的范围链上解析，以全局对象结尾。

```
...
self.post = function (url, data, callback) {
    console.log("in post");
    console.log("cookie: " + self.cookie); 
```

在这里，`self`在 LHS 上引用了 Reddit 实例。在 RHS 上，函数表达式对外部范围有一个闭包，因此它`self`也引用同一个实例，因此您正在寻找`cookie`对象及其`[[Prototype]]`链上的属性。

但是您声明`cookie`为构造函数的局部变量，因此标识符沿着错误的链解析（即您应该在范围链上查找变量，而不是在对象/`[[Prototype]]`链上的属性）。

碰巧由于关闭，您可以使用：

```
 console.log("cookie: " + cookie); 
```

`cookie`在作用域链上解决。

但是您似乎真的想将其作为属性访问，因此首先将其设为公共属性：

```
 var self = this,
      userAgent = "...",
      debug = false;

  this.cookie = "", // or self.cookie = '',
  ... 
```

现在您可以使用`self.cookie`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T02:35:56.797

在您尝试使用它们的方式中，JavaScript 并没有真正具有私有实例变量的概念。

只有公共成员（通过 this.whatever = "" 明确设置）可以通过这种方式访问​​。

否则，您仍然可以像任何其他变量一样通过删除 self 来访问它们。在他们面前。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T02:36:49.867

在您的`reddit`构造函数中，您定义私有变量，如`userAgent`, `cookie`。要为您的对象实例定义公共属性`reddit`，您必须在构造函数中像这样进行：

```
this.debug = false; 
```

有关更多信息，请参阅[这篇 Douglas Crockford 文章](http://javascript.crockford.com/private.html)。

# c - 增加字符串的字符值

> ID：14330201
> 
> 赞同：1
> 
> 时间：2013-01-15T02:24:48.330
> 
> 标签：c

> **可能重复：**
> [为什么在写入字符串时会出现分段错误？](https://stackoverflow.com/questions/164194/why-do-i-get-a-segmentation-fault-when-writing-to-a-string)

这是一个小功能，正在测试一些东西所以写了它。在这里，当我尝试增加字符串文字的字符值时，我遇到了分段错误。你能告诉我在这里做错了什么吗

```
#include <stdio.h>
int input_string(char *str)
{
  printf("%s\n", str);
  printf("%c\n", *str);
  printf("%c\n", (*str)++); // I get a segmentation fault here, cant i increment the value like this ?
}
void main()
{
  char *str = "andrew";
  input_string(str);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T02:26:29.887

这样`char *str = "andrew";`做是创建一个指向可能位于 .text （可执行代码所在的位置）上的字符串的指针，并尝试修改它是未定义的行为。

为此更改它：

```
char str[] = "andrew"; 
```

它将在堆栈分配的缓冲区中复制字符串，您可以安全地修改该缓冲区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T02:29:06.903

这：

```
char *str = "andrew"; 
```

表示 str 指向常量字符串文字的内容。如果您尝试更改它，您将获得未定义的行为。

如果要执行字符串操作，请定义一个字符数组。

# jpa - JPA 主键集合

> ID：14330203
> 
> 赞同：0
> 
> 时间：2013-01-15T02:25:18.840
> 
> 标签：jpa, jpa-2.0, primary-key, one-to-many

我正在寻找创建主键的集合（实际上是实体键的一对多关系，而不解析引用的实体）。

例如，

```
@Entity
public class BigObject {
   @EmbeddedId
   private BigObjectId id;
   // lots of other stuff
}

@Embeddable
public class BigObjectId {
    //fields here
}

@Entity
public class Referrer {
   // This won't work since BigObjectId is an embeddable. I would like a join table
   // REFERRER_BIGOBJECTS with a REFERRER_ID PK foreign key and a BIGOBJECT_ID PK
   // foreign key.
   @OneToMany
   private Set<BigObjectId> bigObjectIds;
} 
```

我意识到这似乎违背了 ORM 的目的，但是能够遍历大对象而不必完全解析它们是有益的（嵌入式 ID 对象在系统中的其他地方使用）。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T14:30:10.440

您应该能够使用 ElementCollection 映射。

见， [http ://en.wikibooks.org/wiki/Java_Persistence/ElementCollection#Basic_Collections](http://en.wikibooks.org/wiki/Java_Persistence/ElementCollection#Basic_Collections)

# javascript - Google Maps Javascript API V3如何仅显示名称地标

> ID：14330211
> 
> 赞同：1
> 
> 时间：2013-01-15T02:25:50.250
> 
> 标签：javascript, google-maps, google-maps-api-3, kml

作为标题，我想显示带有名称字段的地标。基本上，谷歌地图用蓝色气球显示地标。但我不想看到这个蓝色气球。只显示名称，如谷歌地球。谷歌地图javascript api可以吗？

=============KML================

```
<Folder>
   <name>Point Features</name>
   <description>Point Features</description>
   <Placemark>
     <description><![CDATA[LABEL<BR><BR><B>ELEVATION</B> = -2147483648.0000000]]></description>
     <name>lnd_a</name>
     <Point>
       <coordinates>126.3680042851,34.7669071990,-2147483648.000</coordinates>
     </Point>
   </Placemark>
   <!-- MY KML FILE HAS MORE LINE -->
</Folder> 
```

=============脚本源================

```
<script type="text/javascript"src="https://maps.google.com/maps/api/js?sensor=false"></script>

<script type="text/javascript">
  function initialize() {
    var latlng = new google.maps.LatLng(34.7958078334,126.4441270970);
    var myOptions = {
        zoom: 14,
        center: latlng,
        mapTypeId: google.maps.MapTypeId.SATELLITE
    };
    var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
    var ctaLayer = new google.maps.KmlLayer('http://MYSITES/kml/101.kml');
    ctaLayer.setMap(map);
  } 
```

![Chrome 网页版中的谷歌地图](../Images/21a8d24f4d84cb4b00193302a346ba14.png) 在 Chrome 谷歌地图中，​​地标以蓝色气球显示。

![Google 地球地标](../Images/67792d0551364702fbc72376f8eb4ff1.png) 在仅显示名称的 Google 地球地标中。

这些屏幕截图基于相同的 KML 文件。

如何在浏览器中使用谷歌地图仅显示名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T12:05:39.820

我从未使用过它，但有一个库可以在标记上显示标签。如果您使用带有标签的透明标记，您可能会得到想要的结果。

[带标签的标记](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerwithlabel/docs/reference.html)

如果这不起作用，我曾经使用 OverlayView 为标记创建自定义标签。

[在 Google Maps API v3 中使用自定义标签创建标记](http://www.tdmarketing.co.nz/blog/2011/03/09/create-marker-with-custom-labels-in-google-maps-api-v3/)

我猜这将是使用 KML 图层的替代方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T04:57:22.600

除了那里的图像之外，没有任何实现的方法可以显示任何其他内容。

所以 1 选项可能是：使用 iconStyle 将名称放在那里（包含名称的图像，这可以由接受参数的服务器端脚本创建，因此它们不需要是静态的）。

另一种选择（使用 Maps-JS-API）：不显示 KML 图层，而是自行解析图层并使用名称创建自定义叠加层。

# javascript - 使用 autoIncrement 时删除 IndexedDB 中的项目

> ID：14330213
> 
> 赞同：0
> 
> 时间：2013-01-15T02:25:56.073
> 
> 标签：javascript, firefox, indexeddb

我正在尝试实现这个[例子](http://www.codeproject.com/Articles/325135/Getting-Started-with-IndexedDB)。

在我尝试删除某个项目之前，一切正常。

使用这个：

```
request.onupgradeneeded = function(event) {
      console.log("upgrade", event);

      db = event.target.result;
      console.log("db", db);

      if (!db.objectStoreNames.contains("chatBot")) {
        var objectStore = db.createObjectStore("chatBot", {keyPath: "timeStamp", autoIncrement: true});
      }
    }; 
```

并设置删除：

```
btnDelete.addEventListener("click", function() {
      var id, transaction, objectStore, request;

      id = document.getElementById("txtID").value;
      console.log("id", typeof id);

      transaction = db.transaction("people", "readwrite");
      objectStore = transaction.objectStore("people");
      request = objectStore.delete(id);
      request.onsuccess = function(evt) {
        console.log("deleted content");
      };
    }, false); 
```

将项目添加到 indexedDB 没有问题，但由于某种原因，我无法弄清楚为什么它不能删除这些项目。

这`id`是一个字符串，`objectStore.delete(id)`是正确的实现。

这是示例的[pastebin](http://pastebin.com/2Va9DksV)

使用火狐 18

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T03:39:58.653

由于您使用的是 autoIncrement 键，因此该键是由用户代理生成的。在 FF 和 Chrome 中，它是从 1 开始的整数。如果您提供有效密钥并将您的密钥转换`id`为整数，您的代码运行良好。我在 FF 和 Chrome (dartium) 中都进行了测试。`'1'`并且`1`根据 IndexedDB API 密钥定义是不同的密钥。

另一个问题 IndexedDB API 设计。删除方法总是[返回成功](http://www.w3.org/TR/IndexedDB/#dfn-steps-for-deleting-records-from-an-object-store)事件处理程序，`undefined`结果是给定键是否被删除。所以调试起来非常困难。我认为它至少应该返回已删除记录的数量。

[编辑] mod 代码： http: [//pastebin.com/mLpU0VfP](http://pastebin.com/mLpU0VfP)
[编辑...也]注意`+`将`string``integer`
`request = db.transaction("people", "readwrite").objectStore("people").delete(+id);`

# unix - telnetd 只接受一个连接

> ID：14330216
> 
> 赞同：-1
> 
> 时间：2013-01-15T02:26:28.997
> 
> 标签：unix, telnet, freebsd, bsd

我在 bsd 目标上运行了 telnet 服务器。我想从多台其他机器连接到这个目标。令人惊讶的是，它不允许更多的连接。

我检查了原因，发现它没有在循环中听（听）。所以，我有点修好了。但我想知道为什么 telnetd 代码一次保持单个连接有什么具体原因吗？（我只能从一个特定端口的客户端连接到 telnetd 服务器。）

（我知道 telnet 不是一个安全的选择。但我只是在小型嵌入式平台上玩得很开心，此时让事情正常运行比安全更重要。）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T03:04:02.500

Telnet 应该由[inetd](http://en.m.wikipedia.org/wiki/Inetd)启动。您需要配置 inetd 来为您进行监听。

我链接到的维基百科文章解释了如何做到这一点。

# linux - 为什么我不能在 Vim 中复制粘贴此文本？

> ID：14330218
> 
> 赞同：4
> 
> 时间：2013-01-15T02:26:36.407
> 
> 标签：linux, vim

当我尝试在 vim 中复制粘贴此文本时，它会将一半放在命令行中，一半放在文本编辑器主窗口中

这是文本

`sub(/;;/," ",$0)`

我怎样才能复制粘贴

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T02:46:31.970

当您在控制台 Vim（不是 GVIM）中粘贴时，Vim 无法检测到您粘贴的内容是您输入的还是实际粘贴的。因此，任何（插入模式）映射都将适用。您可能有一个`;;`离开插入模式的映射（也许？），并且在粘贴期间触发，造成严重破坏。

有两种方法可以防止这种情况：

`"*p`通过（活动选择）或（系统剪贴板）以正常模式粘贴`"+p`，前提是 Vim 能够与它们交互。

或者，设置`'pastetoggle'`选项，例如

```
:set pastetoggle=<F2> 
```

然后`F2`在粘贴之前按 (in insert mode) （注意模式如何更改为`-- INSERT (paste) --`，然后再按一次。这样，你明确告诉 Vim “下一个字符不是我输入的，按字面意思对待它们”。

如果这种手动管理对您来说太麻烦，您也可以使用图形 GVIM。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T03:03:17.813

我不确定你是用哪种方式复制和粘贴（即从 Xorg 窗口（如 gnome-terminal）到 vim，反之亦然）。假设您想从 Xorg 窗口复制并粘贴到您的 vim 窗口中。有几种方法可以做到：

1.  使用鼠标选择要复制的文本，将 vim 置于插入模式，然后按鼠标中键。
2.  如果您在控制台中使用支持 X 的 vim（通常通过键入 vimx 开始），那么您可以使用鼠标选择要复制的文本，然后在 vimx 窗口中按`"*p`。鼠标选中的文本被放置在`*`寄存器中。
3.  如果您在控制台中使用带有 X 支持的 vim（通过键入 vimx 开始），那么您可以使用鼠标选择要复制的文本，右键单击鼠标，选择菜单项`Copy`，然后在 vimx 窗口中点击`"+p`粘贴。在这种情况下，因为您使用右键单击菜单项进行复制，所以文本被放置在`+`寄存器中。

上面的第 2 和第 3 项在使用 gvim 时也有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T02:33:29.617

您可以做的是确保您处于插入模式并在键盘上使用 ctrl+v 复制代码片段，然后左键单击 vim 窗口以使其重新聚焦，然后点击右键单击一次，您的文本应该会粘贴我刚刚测试了这个以确保它至少可以在 CentOS 6.3 上运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T02:37:45.293

在 vim 中，您有模式，要输入文本，您必须处于插入模式。在粘贴文本之前按`i`（在当前字符之前）或（在当前字符之后）。`a`

如果您不进入插入模式，第一个字符`s`将擦除当前字符并进入插入模式放入`ub(/;;/," ",$0)`您的文件。

按`ESC`退出插入模式。

此外，如果您碰巧有一个共享剪贴板，您的 GUI 按下`p`将粘贴。

要`set clipboard=unnamed`在`~/.vimrc`文件中插入 OSX 上的共享剪贴板。

# scala - Scala 异常选择查询

> ID：14330220
> 
> 赞同：0
> 
> 时间：2013-01-15T02:26:50.997
> 
> 标签：scala, playframework, playframework-2.0, anorm

使用以下数据库脚本：

```
# Tasks schema

# --- !Ups

CREATE TABLE HashToUrl  (
    hash integer,
    url  varchar(255)
);

# --- !Downs

DROP TABLE HashToUrl; 
```

...为什么我会收到此错误：

> [NoSuchElementException：找不到键：哈希]

...对于这种方法

```
def getTask(hash: Int): String = DB.withConnection { implicit c =>
    val result = SQL(
      """
        select count(*) as url from HashToUrl where hash={hash}
      """
      ).apply().head
    val url = result[String]("url")
    url
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T02:31:11.227

您的代码不包含将散列变量替换为格式字符串的任何内容。

以下是一些非常简单的异常示例，可帮助您了解该怎么做：

[https://github.com/dustingetz/orm-deep-dive/blob/master/app/models/Environment.scala](https://github.com/dustingetz/orm-deep-dive/blob/master/app/models/Environment.scala)

# ios - iAd 中的奇怪错误

> ID：14330221
> 
> 赞同：1
> 
> 时间：2013-01-15T02:27:10.150
> 
> 标签：ios, cocos2d-iphone, iad

我已将 iAd 添加到我的应用程序中，并且在我的模拟器/设备中对其进行测试时，我收到了一些错误`bannerView:didFailToReceiveAdWithError:`，以下是列出的错误：

`MyTest[11915:907] [iAd] Error di=3: The operation couldn’t be completed. Inventario annunci non disponibile`

`MyTestApp[11877:907] [iAd] Error di=4: The operation couldn’t be completed. L'applicazione presenta un errore di configurazione rete di iAd`

`2013-01-15 02:31:26.620 MyTestApp[11877:907] [iAd] Error di=5: The operation couldn’t be completed. Il banner è visibile ma non ha contenuto`

一段时间后（30-40 秒），横幅正确显示在设备中。我错过了什么？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-13T07:58:40.083

Apple 文档说：“在您开发应用程序时，iAd Network 会向您的应用程序发送测试广告。为了帮助您验证实施，iAd Network 偶尔会返回错误以测试您的错误处理代码。”
同样在我的应用程序中，iad 返回了正确横幅、错误 3、错误 5 的混合...我认为当 iAd 将从“iAd Network services test ads”更改为“iAd Network services”时，此问题将在应用程序发布后消失如果您签署了 iAd 网络协议并为您的应用程序启用了广告，则可以投放实时广告”

# php - php iphone/IOS6上传旋转问题：保存旋转图像的最佳方法是什么

> ID：14330231
> 
> 赞同：1
> 
> 时间：2013-01-15T02:28:22.710
> 
> 标签：php, iphone, rotation, orientation, exif

使用 IOS6 的 safari 移动浏览器，文件上传功能让用户可以选择拍照。不幸的是，在拍摄照片时，虽然照片拇指正确显示在浏览器中，但当您上传到服务器时，文件会旋转 90 度。这似乎是由于 iphone 设置的 exif 数据。我有通过在服务时旋转图像来固定方向的代码。但是，我怀疑保存旋转的、正确定向的图像会更好，这样我就不必再担心方向了。我的许多其他照片甚至都没有 exif 数据，如果可以避免的话，我不想弄乱它。

任何人都可以建议代码来保存图像以使其正确定向吗？

这是旋转图像的代码。以下代码将显示正确定向的图像，但是，我要做的是保存它，以便我可以随时提供它而无需担心方向。

另外我想替换`impagejpeg`下面代码中的调用，以便任何代码都适用于 gif 和 jpg。

感谢您的建议/代码！

PHP

```
//Here is sample image after uploaded to server and moved to a directory
$target = "pics/779_pic.jpg";
$source = imagecreatefromstring(file_get_contents($target));
$exif = exif_read_data($target);
if(!empty($exif['Orientation'])) {
    switch($exif['Orientation']) {
        case 8:
            $image = imagerotate($source,90,0);
//echo 'It is 8';
            break;
        case 3:
            $image = imagerotate($source,180,0);
//echo 'It is 3';
            break;
        case 6:
            $image = imagerotate($source,-90,0);
//echo 'It is 6';
            break;

    }
}
// $image now contains a resource with the image oriented correctly
//This is where I want to save resource properly oriented instead of display.
 header('Content-type: image/jpg');
imagejpeg($image);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-24T08:51:16.563

要保存图像，只需使用相同的函数`imagejpeg`和下一个参数来保存图像，例如：

```
imagejpeg($image, $target, 100); 
```

在这种情况下，您不需要指定标题，因为您没有显示任何内容。

参考： [http ://sg3.php.net/manual/en/function.imagejpeg.php](http://sg3.php.net/manual/en/function.imagejpeg.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T15:32:24.033

只有 JPEG 或 TIFF 文件可以携带 EXIF 元数据，因此无需担心使用您的代码处理 GIF（或 PNG）。

从我认为是官方规范的第 9 页开始：

> 压缩文件被记录为 JPEG (ISO/IEC 10918-1) 并插入了应用程序标记段（APP1 和 APP2）。未压缩文件以 TIFF Rev. 6.0 格式记录。

[http://www.cipa.jp/english/hyoujunka/kikaku/pdf/DC-008-2010_E.pdf](http://www.cipa.jp/english/hyoujunka/kikaku/pdf/DC-008-2010_E.pdf)

# mysql - MYsql 未知列中的查询

> ID：14330232
> 
> 赞同：-2
> 
> 时间：2013-01-15T02:28:25.890
> 
> 标签：mysql, database

我目前正在尝试创建一个查询，以便我可以显示哪些患者在特定日期进行了手术，但是我一直遇到这个问题

> [Err] 1054 - “字段列表”中的未知列“Patient.PatientSurname”

我要实现的查询是这样的

```
SELECT Patient.PatientSurname, 
  Patient.PatientSex, 
  Patent.PatientAge, 
  Doctor.DoctorSurname, 
  Doctor.DoctorSpecialism 
FROM Operation 
WHERE (Operation.Date = ‘21/12/2010’); 
```

这可能与索引有关吗？

这是我的病人表的代码

```
CREATE TABLE Patient 
(PatientCode VARCHAR (5) NOT NULL,
PatientSurname VARCHAR (15) NOT NULL,
PatientFirstName VARCHAR (15) NOT NULL,
PatientSex VARCHAR (6) NOT NULL,
PatientAge VARCHAR (3) NOT NULL,
PatientOccupation VARCHAR (15) NOT NULL,
PatientHeight VARCHAR (5) NOT NULL,
PatientWeight VARCHAR (6) NOT NULL,
PatientAddress VARCHAR (20) NOT NULL,
PRIMARY KEY (PatientCode),
);

CREATE TABLE Operation 
(OperationCode VARCHAR (6) NOT NULL, 
 PatientCode VARCHAR (5) NOT NULL, 
 DoctorCode VARCHAR (6) NOT NULL,
Date DATETIME NOT NULL,
 Result VARCHAR (10) NOT NULL, 
OperationType VARCHAR (15) NOT NULL, 
  PRIMARY KEY (OperationCode), 
  FOREIGN KEY (PatientCode) REFERENCES Patient(PatientCode) ON UPDATE CASCADE ON DELETE RESTRICT, 
 FOREIGN KEY (DoctorCode) REFERENCES Doctor(DoctorCode) ON UPDATE CASCADE ON DELETE RESTRICT ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T02:30:23.443

您的表`Patient`实际上称为`Operation`.

也许这就是你烦恼的根源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T02:36:53.577

编辑：删除代码片段。

即使您澄清了：Operation vs Patient 表，该查询也没有任何意义。您引用了 2 个表（让我们忽略 Operation，而专注于 Patient 和 Doctor），而您只从一个表中选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T02:54:27.447

您的查询的问题是您正在引用表`patients`并且`doctor`未加入该`operation`表。您需要加入这些其他表以获取所需的数据。根据您发布的详细信息，您只需要加入您的表格：

```
SELECT p.PatientSurname, 
  p.PatientSex, 
  p.PatientAge, 
  d.DoctorSurname, 
  d.DoctorSpecialism 
FROM Operation o
INNER JOIN patient p 
  on o.PatientCode = p.PatientCode
INNER JOIN doctor d
  on o.DoctorCode = d.DoctorCode
WHERE o.Date = '12-21-2010'; 
```

如果您在学习连接语法方面需要帮助，那么这里有一个很好[的连接可视化解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

# android - OpenGL Shader递归处理像素

> ID：14330235
> 
> 赞同：0
> 
> 时间：2013-01-15T02:28:30.760
> 
> 标签：android, opengl-es, shader

我有一个 OpenGL ES 程序来处理图片。如果我处理当前像素，我需要使用以前的像素值。但不是主图的像素值。它是已处理的先前像素值。

递归可以在片段着色器中进行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T02:51:45.823

片段着色器的应用顺序没有固定，对全局状态没有副作用。所以问题是你认为什么是前一个像素。

如果您要编写一种算法，该算法涉及从左到右的从上到下的图像扫描，那么您需要明确地对生成输出所需的所有源像素进行采样。如果它是某个像素加上该像素左侧的三个，那么您需要明确获取该像素加上左侧的三个。一个示例算法是 Floyd-Steinberg 抖动。

如果您在谈论之前的帧，那么您可以通过乒乓缓冲来实现，您可以使用渲染到纹理并在一个目的地和另一个目的地之间来回切换，以便您可以将前一帧视为输入纹理。一个示例应用程序可能是音乐可视化器通常做的事情，包括 iTunes 中的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T08:55:30.030

OpenGL ES 2.0 规范没有提供访问先前像素值的方法。

但是，一些 GPU 具有特定于供应商的扩展，允许访问帧缓冲区的当前片段值。我知道的是`NV_shader_framebuffer_fetch`（Apple 有类似的扩展名`APPLE_shader_framebuffer_fetch`）。在*Tegra 2*上，您可以从只读`gl_LastFragColor`变量中获取 GLSL 中片段的先前值。此功能旨在用于片段着色器中的自定义混合。但它仅在*nVidia Tegra* GPU 上可用。

此处有关此扩展的更多信息：[https ://developer.nvidia.com/sites/default/files/akamai/mobile/files/tegra_gles2_development.pdf](https://developer.nvidia.com/sites/default/files/akamai/mobile/files/tegra_gles2_development.pdf)

# android - ListView 内存泄漏：无法回收列表元素（ImageView + Bitmap）

> ID：14330236
> 
> 赞同：1
> 
> 时间：2013-01-15T02:28:31.960
> 
> 标签：android, memory-leaks, android-listview, listadapter

我有一个使用适配器填充 ImageView 列表的 ListView。我遵循以下标准做法：

a) 仅当 convertView 为空时才膨胀新视图，并且

b) 如果 convertView 不为空，则使用 viewHolder 避免调用 findViewById()

我还使用 AsyncTask 从数据库（或从磁盘缓存或 LRU 内存缓存，如果可能的话）填充 ImageViews。

一切都正常工作了一段时间（即，图像以平滑滚动填充在列表中），但我有一个泄漏，在加载大约 70 x 1.4M 图像后会出现 OOM 错误。

我的理解是，当 getView() 返回一个非空的 convertView 时，ListViews 会被回收，所以我不应该看到这样的内存堆积。就我而言，每次为 ImageView 分配位图时，应用程序的内存使用量都会增加。事实上，即使在我通过 list.clear() 清除了底层列表并通过 adapter.notifyDataSetInvalidated() 将适配器归零之后，Activity 仍保留此内存 - 两者都在 onStop() 函数中。

MAT 工具显示搁浅的位图和搁浅的 ImageView（加载图像时大约是一对一的），但我不知道是什么保存了会阻止对旧视图进行垃圾收集的引用。

我将不胜感激有关如何追踪此泄漏的任何建议。谢谢！

# google-app-engine - memcache 显式设置异常

> ID：14330238
> 
> 赞同：0
> 
> 时间：2013-01-15T02:28:46.567
> 
> 标签：google-app-engine

在我们的 gwt +GAE for java 应用程序中，我看到以下异常，但不知道为什么会发生。任何人？

/adminmodule/admin com.google.apphosting.api.ApiProxy$CancelledException：API 调用 memcache.Set() 被显式取消。在 com.google.apphosting.runtime.ApiProxyImpl$5.get(ApiProxyImpl.java:367) 在 com.google.apphosting.runtime.ApiProxyImpl$5.get(ApiProxyImpl.java:364) 在 com.google.appengine.tools.appstats .RecordingFuture.get(RecordingFuture.java:108) 在 com.google.appengine.tools.appstats.Recorder.processRecordingFuture(Recorder.java:431) 在 com.google.appengine.tools.appstats.Recorder.processAsyncRpc(Recorder.java :404) com.google.appengine.tools.appstats.RecordingFuture.maybeRecordStats(RecordingFuture.java:140) com.google.appengine.tools.appstats.RecordingFuture.get(RecordingFuture.java:110) com.google。 com.google 上的 appengine.tools.appstats.RecordingFuture.get(RecordingFuture.java:20)。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-29T02:05:40.090

这是由于不正确的 pm 状态。pm 状态有时甚至在其他操作完成之前就关闭了。

这是通过在本地启动 pm 对象来解决的。

# android - 尝试更新 SQLite 表时出现空指针异常

> ID：14330241
> 
> 赞同：0
> 
> 时间：2013-01-15T02:29:01.553
> 
> 标签：android, sqlite, sql-update, sqliteopenhelper

我正在尝试更新表中的项目。目前我有一个向用户显示联系人列表的活动。当他们单击联系人时，我会创建一个新活动，该活动显示一个表单，允许用户修改联系人的名字和姓氏。

每次我尝试更新表时，都会出现空指针异常。以下是错误：

**java.lang.NullPointerException at com.example.sqlitedemo.EditContact$1.onClick(EditContact.java:41)**

这是错误似乎链接到的代码：

```
update.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            adapter.updateContact(fName.getText().toString(), lName.getText().toString(), id);
            Toast.makeText(v.getContext(), "UPDATING", Toast.LENGTH_SHORT).show();
            Intent i = new Intent(v.getContext(), MainActivity.class);
            startActivity(i);
        }
    }); 
```

这是我在 ContactsDBAdapter 类中的 updateContact() 方法：

```
public boolean updateContact(String fName, String lName, int rowId){

    ContentValues values = new ContentValues();
    values.put(COLUMN_FNAME, fName);
    values.put(COLUMN_LNAME, lName);
    Toast.makeText(context, "Contact updated", Toast.LENGTH_SHORT).show();
    return db.update(DB_TABLE, values, COLUMN_ID + "=" + rowId, null) > 0;
} 
```

我通过意图将数据传递给编辑活动。我在下面的代码中检索它。正如我在日志中显示的那样，所有数据似乎都可以正常到达。

```
Intent i = this.getIntent();
    fName.setText(i.getStringExtra("fname"));
    lName.setText(i.getStringExtra("lname"));
    id = i.getIntExtra("_id", 0); 
```

有任何想法吗？

这是堆栈跟踪：

```
01-15 02:21:45.053: E/AndroidRuntime(26854): FATAL EXCEPTION: main
01-15 02:21:45.053: E/AndroidRuntime(26854): java.lang.NullPointerException
01-15 02:21:45.053: E/AndroidRuntime(26854):    at com.example.sqlitedemo.EditContact$1.onClick(EditContact.java:41)
01-15 02:21:45.053: E/AndroidRuntime(26854):    at android.view.View.performClick(View.java:4202)
01-15 02:21:45.053: E/AndroidRuntime(26854):    at android.view.View$PerformClick.run(View.java:17340)
01-15 02:21:45.053: E/AndroidRuntime(26854):    at android.os.Handler.handleCallback(Handler.java:725)
01-15 02:21:45.053: E/AndroidRuntime(26854):    at android.os.Handler.dispatchMessage(Handler.java:92)
01-15 02:21:45.053: E/AndroidRuntime(26854):    at android.os.Looper.loop(Looper.java:137)
01-15 02:21:45.053: E/AndroidRuntime(26854):    at android.app.ActivityThread.main(ActivityThread.java:5039)
01-15 02:21:45.053: E/AndroidRuntime(26854):    at java.lang.reflect.Method.invokeNative(Native Method)
01-15 02:21:45.053: E/AndroidRuntime(26854):    at java.lang.reflect.Method.invoke(Method.java:511)
01-15 02:21:45.053: E/AndroidRuntime(26854):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-15 02:21:45.053: E/AndroidRuntime(26854):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-15 02:21:45.053: E/AndroidRuntime(26854):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T02:38:45.980

我自己解决了这个问题。事实证明 NPE 是原因，因为我未能创建数据库适配器对象的实例并打开与数据库的连接。

通过将以下代码添加到我的 onClick 侦听器中，问题得到解决：

```
update.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            adapter = new ContactsDbAdapter(v.getContext());
            adapter.open();
            adapter.updateContact(fName.getText().toString(), lName.getText().toString(), id);
            Toast.makeText(v.getContext(), "UPDATING", Toast.LENGTH_SHORT).show();
            Intent i = new Intent(v.getContext(), MainActivity.class);
            startActivity(i);
        }
    }); 
```

# c++ - Qt 和 GoogleMaps - 持续时间类型

> ID：14330244
> 
> 赞同：0
> 
> 时间：2013-01-15T02:29:20.727
> 
> 标签：c++, qt, google-maps, google-maps-api-3

我使用此代码从 javascript 获取数据：

```
 const QVariant myvar = this->page()->mainFrame()->
     evaluateJavaScript("measureDistance("+QString::fromStdString(prev->marker_id)+","+QString::fromStdString(stop->marker_id+");"));
 bool ok;
 const int myint = myvar.toInt(&ok);
 if (!ok)
   qWarning() << "Error getting int from JS";
 qDebug() << myint;
 getMapTimeDistance(location, QString::fromStdString(prev->getName()), stop, 10); 
```

在 javascript 中，最后一行是：

```
function measureDistance(m1, m2) {
var wp = new Array();
var lstart = new google.maps.LatLng(markers[m1].position);
var lend = new google.maps.LatLng(markers[m2].position);
var request = {
    origin : lstart,
    destination : lend,
    waypoints : [],
    optimizeWaypoints: true,
    travelMode : google.maps.DirectionsTravelMode.DRIVING
};
directionsService.route(request, function(response, status) {
    if (status== google.maps.DirectionsStatus.OK) {
        response.routes[0].legs[0].duration.text;
    } else {
        document.getElementById('locationD').value = "drawRouteBad";
    }

}); 
```

}

你知道为什么这段代码对我不起作用吗？我尝试了不同的类型组合，但没有任何帮助。可能我不知道 javasscripts 值是什么类型。也许我应该以不同的方式将它传递给 qt？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T03:19:11.013

`response.routes[0].legs[0].duration.value;`来自Google Maps API v3 [Directions Service](https://developers.google.com/maps/documentation/javascript/directions)（根据[您的最后一个问题](https://stackoverflow.com/questions/14329473/google-maps-v3-api-getting-route-duration-fails)。该服务是异步的，您不能从调用中返回任何内容，您必须在回调函数中使用您需要的任何数据（当它已经从服务器返回并可用）。

# c - 如何将文件名列表传递给C程序

> ID：14330247
> 
> 赞同：0
> 
> 时间：2013-01-15T02:29:51.477
> 
> 标签：c, file, arguments

怎么说他们的 C 程序应该接受一个文件列表？

例如，我的程序`blah`应该`hello.txt`通过控制台中的以下调用接受：

```
blah hello.txt 
```

我不确定如何解析参数并将其标记为文件路径（getopt 没有谈论这个）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T02:34:17.753

`getopt()`置换`argv[]`，以便所有非选项都被打乱到最后，所以你只需调用`getopt()`解析所有选项，然后循环`argv[optind]`到`argv[argc]`. 这些应该是您的文件名，当然您需要检查这些文件是否确实存在，等等。C 没有文件的原语。这是一些关于[getopt()](http://www.gnu.org/software/libc/manual/html_node/Getopt.html)的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T02:31:13.020

只需解析参数，并在路径上执行 open() ，即参数本身，即在您的情况下为 hello.txt 。

# ruby-on-rails - rails skip_before_filter 方法内（在其他 before_filters 运行之后）

> ID：14330249
> 
> 赞同：0
> 
> 时间：2013-01-15T02:30:16.890
> 
> 标签：ruby-on-rails, controller, before-filter

在 application_controller.rb 我有以下内容：

```
before_filter :get_events
before_filter :get_sitemap
def login_required
    return true if session[:user]
    # If we get to this point, I want to avoid running get_events and get_sitemap
    flash[:warning] = 'Please login to continue'
    redirect_to login_users_url
    return false 
end 
```

在其他控制器中，例如：

```
before_filter :login_required, :except => [:show] 
```

所以基本上我有运行方法来访问所有页面的数据库，除了我不希望它在用户需要登录时发生（即，从通常需要 get_events 和 get_sitemap 的页面重定向）。

我意识到这样做的一种方法是在设置任何其他 before_filters 之前在所有控制器上运行 login_required 作为 before_filter，然后排除某些控制器模型，但我想知道是否有一种方法可以做到这一点而不必更改我的所有控制器.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T02:35:30.257

对于这样的事情，我通常会创建一个`AuthenticatedController`（在 app/controllers/authenticated_controller.rb 中）：

```
class AuthenticatedController < ApplicationController

  before_filter :require_login

end 
```

然后，我从中派生所有需要身份验证的控制器，`skip_before_filter :require_login`为我要逐个控制器排除的操作指定一个。例如：

```
class PlanetsController < AuthenticatedController

  skip_before_filter :require_login, only: [:index]

end 
```

这将要求您更改所有控制器，但仅出于从`AuthenticatedController`. 据我所知，这是一种完全可以接受的处理方式，而且我认为除了猴子修补 ActionController::Base 之外没有其他方法可以使其适用于所有控制器，这对于各种原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T03:38:52.923

好吧，在考虑了约书亚的回答之后，我仍然无法得到我想要的东西......所以我所做的就是做一个小混合解决方案。所有控制器仍然引用 ApplicationController，但在 ApplicationController 中，我总是`before_filter :login_required`在其他 before_filters 之前运行 FIRST。rails 中的重定向似乎会阻止其他 before_filters 运行，这正是我想要的。在其他控制器中，我`skip_before_filter :login_required, :only => [:this_time]`在必要时使用。

# ruby-on-rails-3 - Ruby on Rails Has_Many：通过关联

> ID：14330254
> 
> 赞同：0
> 
> 时间：2013-01-15T02:30:41.600
> 
> 标签：ruby-on-rails-3

我在使用 ruby​​ on rails 时遇到了一些问题，特别是通过 deal_event 建立与交易和事件的多对多连接。我已经检查了几个类似的 stackoverflow 问题，甚至[http://guides.rubyonrails.org/](http://guides.rubyonrails.org/)但我仍然没有得到任何东西..

这是我的模型：

交易.rb

```
class Deal < ActiveRecord::Base
  has_many :deal_events
  has_many :events, :through => "deal_events"
  attr_accessible :approved, :available, :cents_amount, :dollar_amount, :participants, :type
end 
```

事件.rb

```
class Event < ActiveRecord::Base
  has_many :deal_events
  has_many :deals, :through => "deal_events"
  attr_accessible :day, :image, :description, :location, :title, :venue, :remove_image
end 
```

交易事件.rb

```
class DealEvent < ActiveRecord::Base
  belongs_to :deal
  belongs_to :event
end 
```

这是我的迁移文件：

20130102150011_create_events.rb

```
class CreateEvents < ActiveRecord::Migration
  def change
    create_table :events do |t|
      t.string :title,     :null => false
      t.string :venue
      t.string :location
      t.text :description 
      t.date :day

      t.timestamps
    end
  end
end 
```

20130112182824_create_deals.rb

```
class CreateDeals < ActiveRecord::Migration
  def change
    create_table :deals do |t|
      t.integer :dollar_amount
      t.integer :cents_amount
      t.integer :participants
      t.string  :type, :default => "Deal"
      t.integer :available
      t.string  :approved

      t.timestamps
    end
  end
end 
```

20130114222309_create_deal_events.rb

```
class CreateDealEvents < ActiveRecord::Migration
  def change
    create_table :deal_events do |t|
      t.integer :deal_id, :null => false
      t.integer :event_id, :null => false

      t.timestamps
    end
  end
end 
```

在我用一笔交易和一项事件播种我的数据库后，我进入控制台并输入

```
deal = Deal.first # ok
event = Event.first # ok

DealEvent.create(:deal => deal, :event => event) # Error: ActiveModel::MassAssignmentSecurity::Error: Can't mass-assign protected attributes: deal, event

deal.events # Error: ActiveRecord::HasManyThroughAssociationNotFoundError: Could not find the association "deal_events" in model Deal 
```

关于弹出这两个错误我做错了什么的任何想法？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T02:33:09.190

您的 DealEvent 模型中需要此行：

```
attr_accessible :deal, :event 
```

尽管如果它只是一个关系表（看起来像），那么您就不会以这种方式创建关系。使用嵌套表格等。

# python - 偶尔的 Flask 服务器错误：“RuntimeError：调用 Python 对象时超出了最大递归深度”

> ID：14330256
> 
> 赞同：5
> 
> 时间：2013-01-15T02:30:58.853
> 
> 标签：python, flask

我试图找出在开发期间使用基本 Flask 服务器运行我的应用程序时导致此错误的原因。我从这个开始：

```
from myapp import app
app.run(debug=True, port=5001) 
```

一切都很好，我将继续编码和刷新等，但过了一会儿我得到递归错误，必须按 Ctrl-C 重新启动服务器。没什么大不了的，只是时不时地处理起来有点烦人。

这是完整的回溯，我试图用它来确定原因，但看不到任何突出的东西（可能与 werkzeug 使用 Cookie.py 的方式有关？）：

```
Traceback (most recent call last):
  File "/Users/jeff/.virtualenvs/fmll/lib/python2.7/site-packages/flask/app.py", line 1701, in __call__
    return self.wsgi_app(environ, start_response)
  File "/Users/jeff/.virtualenvs/fmll/lib/python2.7/site-packages/werkzeug/wsgi.py", line 411, in __call__
    return self.app(environ, start_response)
  (last bit repeated a bunch - trimmed to fit in posting size requirements)
  File "/Users/jeff/.virtualenvs/fmll/lib/python2.7/site-packages/flask/app.py", line 1685, in wsgi_app
    with self.request_context(environ):
  File "/Users/jeff/.virtualenvs/fmll/lib/python2.7/site-packages/flask/ctx.py", line 274, in __enter__
    self.push()
  File "/Users/jeff/.virtualenvs/fmll/lib/python2.7/site-packages/flask/ctx.py", line 238, in push
    self.session = self.app.open_session(self.request)
  File "/Users/jeff/.virtualenvs/fmll/lib/python2.7/site-packages/flask/app.py", line 792, in open_session
    return self.session_interface.open_session(self, request)
  File "/Users/jeff/.virtualenvs/fmll/lib/python2.7/site-packages/flask/sessions.py", line 191, in open_session
    secret_key=key)
  File "/Users/jeff/.virtualenvs/fmll/lib/python2.7/site-packages/werkzeug/contrib/securecookie.py", line 309, in load_cookie
    data = request.cookies.get(key)
  File "/Users/jeff/.virtualenvs/fmll/lib/python2.7/site-packages/werkzeug/utils.py", line 77, in __get__
    value = self.func(obj)
  File "/Users/jeff/.virtualenvs/fmll/lib/python2.7/site-packages/werkzeug/wrappers.py", line 418, in cookies
    cls=self.dict_storage_class)
  File "/Users/jeff/.virtualenvs/fmll/lib/python2.7/site-packages/werkzeug/http.py", line 741, in parse_cookie
    cookie.load(header)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/Cookie.py", line 632, in load
    self.__ParseString(rawdata)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/Cookie.py", line 665, in __ParseString
    self.__set(K, rval, cval)
  File "/Users/jeff/.virtualenvs/fmll/lib/python2.7/site-packages/werkzeug/_internal.py", line 290, in _BaseCookie__set
    morsel = self.get(key, _ExtendedMorsel())
  File "/Users/jeff/.virtualenvs/fmll/lib/python2.7/site-packages/werkzeug/_internal.py", line 271, in __init__
    Morsel.__init__(self)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/Cookie.py", line 438, in __init__
    dict.__setitem__(self, K, "")
RuntimeError: maximum recursion depth exceeded while calling a Python object 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:49:56.030

由于它发生在您的开发过程中，您可以在启动服务器之前增加递归限制，使用：

```
sys.setrecursionlimit(2000) # Choose the right figure for you here
# the value on my system is 1000 but this is platform-dependant 
```

但是，您应该非常小心地使用它，除非您充分了解它的影响，否则可能不会在生产中使用它。

参考：[http ://docs.python.org/2/library/sys.html#sys.setrecursionlimit](http://docs.python.org/2/library/sys.html#sys.setrecursionlimit)

# css - 编号网格 jquery 移动 css

> ID：14330258
> 
> 赞同：1
> 
> 时间：2013-01-15T02:31:10.080
> 
> 标签：css, html, jquery-mobile, grid

我想创建一个编号的网格。用户输入数字并生成网格。我想用 CSS、HTML 或 Jquery Mobile 来做。这是一个 ipad 项目。我不知道如何解决这个问题。我想要以下结果： ![自动生成的编号网格](../Images/2f43925b10e1e807a116b65f404417e0.png)

就目前而言，我有一个在页面上重复网格图像的 div。我必须为每个背景重新生成一个图像。即：用户想要一个 40X60 英尺的区域，我必须生成一个 40X60 的图像。（网格上 100px=5 英尺）我更希望用户输入两个数字并自动生成网格和数字。

```
<div style="background-image:url(/images/linegrid100.png);
width:980px;height:700px;
border:1px solid black;padding:10px;"> 
```

我看过大量的网格生成器。我考虑过使用表格而不是图像。那会更好吗？我如何处理数字生成的数学？似乎这一切都应该很简单，但我找不到太多信息。（现在用谷歌搜索了几天）这些类型的网格一直在图形程序和 CAD 程序中完成。

任何帮助，将不胜感激。

TIA-雷切尔

* * *

好的。这是您的代码的结果。它正在运行:-) 但不如预期。我整天都在处理代码。现在它更有意义了，但我仍然迷失在循环和数学中。有任何想法吗？很高兴能得到帮助，这很有趣。再次感谢-R

似乎影响事物的代码是：

```
w = parseInt($square.css('width'), 10) + 2; //the width of each square + 2 pixels for the borders; 
```

如果我保持原样： ![在此处输入图像描述](../Images/6e8db377e924290ea26576944ddfa33e.png)

如果我将 10 更改为 100：

![在此处输入图像描述](../Images/0cc979fd76a9d1fabd7f236c454dd4c3.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T04:13:36.187

假设您有以下表单，用户在其中输入两个数字：

```
<form>
    <input type="text" id="x">
    <input type="text" id="y">
</form> 
```

然后你可以使用 jQuery 来生成你的网格，如下所示：

```
var x = parseInt($('#x').val(), 10),
    y = parseInt($('#y').val(), 10);

grid(x, y);

function grid(x, y) {
   var i = -1,
       j = -1,
       step = 5, //assuming that each grid unit = 5
       $grid = $('<div>', {'id':'grid'}),
       $square = $('<div>', {'class':'square'}),
       $label,
       w = parseInt($square.css('width'), 10) + 2; //the width of each square + 2 pixels for the borders;

  $grid.width(w * x);

  while(++i < x) {
       while(++j < y) {
        if(j === 0) {
        $label = $('<span>', {'class':'label'});
        $label.css('top', j * w).css('left', i * w).html(i * step);
        }
        if(i === 0 && j > 0) {
            $label = $('<span>', {'class':'label'});
        $label.css('top', j * w).css('left', i * w).html(j * step);
            }
            $grid.append($square.clone(), $label);
       }
       j = -1;
  }
  $('body').append($grid);
} 
```

CSS：

```
#grid { overflow: hidden; border-left: 1px solid #000; border-top: 1px solid #000; position: relative; }
div.square { width: 50px; height: 50px; float: left; border-bottom: 1px dotted #000; border-right: 1px dotted #000; }
span.label { position: absolute; background: #fff; font-weight: bold; z-index: 10; } 
```

假设这是我们的叠加层（对话框）：

```
<div>
    <input type="text" id="x">
    <input type="text" id="y">
    <button id="build-grid" type="button">Build grid</button>
</div> 
```

然后，将 onclick 事件附加到 build-grid 按钮。因此，当单击按钮时，我们读取 x 和 y 值并构建网格。

```
$('#build-grid').on('click', function(e){
   e.preventDefault();
   var x = parseInt($('#x').val(), 10), //get our values from the input fields
       y = parseInt($('#y').val(), 10);

   grid(x, y); // build the grid
}); 
```

# java - 将两个数组组合在一起？

> ID：14330261
> 
> 赞同：0
> 
> 时间：2013-01-15T02:31:13.863
> 
> 标签：java, arrays

我正在编写这个程序，我想我已经写了所有东西，但是它会弹出“.class”，我不明白为什么。请帮我。谢谢。

```
import java.util.*;

public class JoinArrays
{
    public static void main(String[] args)
    {
        int[] x = { 5, 4, 3, 2, 1};
        int[] y = { 8, 7, 6};
        int[] z;
        int   i;

        System.out.println("Original arrays:");
        display(x);
        display(y);

        z = joinArrays(x, y);

        System.out.println("Result of join(x,y).");
        display(z);
   }

   private static void display( int[] x )
   {
       int i;

       System.out.print("Array: ");
       for(i=0; i < x.length; i++)
       {
           if( i < x.length-1 )
                System.out.printf("%3d, ", x[i]);
           else
                System.out.printf("%3d\n", x[i]);
       }
    }

    public static int[] joinArrays(int[] x, int[] y)
    {
        int i;
        return int x[i] + int y[i];
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T02:39:39.877

问题是你的`joinArrays`方法没有意义。

1.  `int x[i] + int y[i];`不是完整的表达。 `x[i] + y[i]`在*语法上*是有效的......

2.  该变量`i`未初始化，因此`x[i] + y[i]`不允许。

3.  即使`x[i] + y[i]`被允许，它实际上是添加两个整数......给出一个整数。

基本上，你在这里叫错了树。Java 没有用于连接或连接数组的运算符（或任何其他形式的语法）。您需要创建一个足够大的新数组来容纳 and 的元素，`x`并将and`y`的元素复制到新数组中；有关示例，请参见@ dicarlo2 的答案。`x``y`

* * *

我是否建议您最好阅读有关 Java 的教程或教科书，而不是尝试通过*猜测*语法应该是什么来学习 Java...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T02:39:28.087

```
public static int[] joinArrays(int[] x, int[] y) {
    int[] arr = new int[x.length + y.length];
    System.arraycopy(x, 0, arr, 0, x.length);
    System.arraycopy(y, 0, arr, x.length, y.length);
    return arr;
} 
```

是你想要的。请参阅@StephenC 的答案，了解您的实施不起作用的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T02:45:31.373

尝试这个：

```
package **YOUR PACKAGE NAME**;

import java.util.*;

public class **YOUR CLASS NAME** { public static void main(String[] args)

{

    int[] x = { 5, 4, 3, 2, 1};
    int[] y = { 8, 7, 6};
    int[] z;

    System.out.println("Original arrays:");
    display(x);
    display(y);

    z = joinArrays(x, y);

    System.out.println("Result of join(x,y).");
    display(z);
}

private static void display( int[] x )
{
   System.out.print("Array: ");
   for(int i=0; i < x.length; i++)
   {
       if( i < x.length-1 )
            System.out.printf("%3d, ", x[i]);
       else
            System.out.printf("%3d\n", x[i]);
   }
}

public static int[] joinArrays(int[] x, int[] y)
{
    int [] combination;
    if(x.length < y.length)
        combination = new int[x.length];
    else
        combination = new int[y.length];
    for(int i = 0; i < x.length && i < y.length; i++)
        combination[i] = x[i] + y[i];
    return combination;
}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T02:45:41.613

看看Apache Commons中的[ArrayUtils.addAll() ，如此处所建议](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/ArrayUtils.html#addAll%28int[],%20int[]%29)[的那样](https://stackoverflow.com/questions/754294/convert-an-array-of-primitive-longs-into-a-list-of-longs)。

# json - 是否可以使用 facebook graph api 点赞评论？

> ID：14330264
> 
> 赞同：1
> 
> 时间：2013-01-15T02:31:29.633
> 
> 标签：json, facebook-graph-api

我正在阅读与提要交朋友的人，并尝试使用 ID/Likes graph api 调用来喜欢他们的评论之一，但是我收到了 400 个错误请求。查看 JSON 提要中的对象后，评论中没有“喜欢”连接或操作数组。为什么当我通过 facebook 的前端知道这条评论有人喜欢时，为什么会这样？

# javascript - 使用 javascript 清除超时

> ID：14330265
> 
> 赞同：1
> 
> 时间：2013-01-15T02:31:59.743
> 
> 标签：javascript, jquery, hover, timeout

我有某种变量超出范围问题或其他东西。在下面的函数中，我根据鼠标是进入还是退出来创建或清除超时。不过，似乎即使创建了超时，它在重新进入时也会返回 undefined 。不知道我在这里做错了什么，感谢您的帮助！

[jsFiddle 示例](http://jsfiddle.net/ByuG3/)

JavaScript：（具体问题`else`在第 35 行的条件范围内

```
var navLinks = $('nav li.sub');

navLinks.mouseenter(function(){

  console.log('hovering on link');

  var thiis   = $(this),
      subList = thiis.find('ul'),
      autoClose;

  if (!thiis.hasClass('out')){

    console.log('isnt out');

    /* Link */

    thiis

    /* Show submenu when entering link */

    .addClass('out')

    /* Hide submenu when exiting link */

    .mouseleave(function(){

      autoClose = setTimeout(function(){

        thiis.removeClass('out');
      }, 1000);

      console.log('exiting link: timeout active', autoClose);
    });
  } else {

    console.log ('is out', autoClose);

    if (autoClose){

      console.log('is out: clear timeout');

      clearTimeout(autoClose);
    }
  }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T03:01:56.760

您应该使用全局对象来存储一些变量，例如超时和间隔的引用。例如，您可以声明这样一个对象：

```
// Declare the context object in the global scope
var myContext = {
    "myTimeout" : false
} 
```

然后在 mouseenter 和 mouseleave 处理函数中使用上下文对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T02:59:11.773

正如评论中指出的那样，每次鼠标悬停一个项目时，您都会有新的超时。让我们为每个项目创建新的超时变量：

```
$('nav li:has(ul)').each(function(){
  var par = $(this),
      sub = $("> ul", this),
      closeTO;

  par.hover(
    function(){
      clearTimeout(closeTO);
      par.addClass("out");
    },
    function(){
      closeTO = setTimeout(function(){
        par.removeClass("out");        
      }, 1000);
    }
  );
}); 
```

[http://jsfiddle.net/ByuG3/1/](http://jsfiddle.net/ByuG3/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T03:05:02.730

技术，

简单的答案就是转移`var autoClose`到外部范围，但我认为您可以（并且应该）做更多。

进一步来说，

*   我认为您不想将处理程序附加到`mouseleave`处理程序中`mouseenter`。它可以从一开始就永久连接。
*   在`mouseenter`处理程序中，`clearTimeout(autoClose)`并且`thiis.addClass('out')`可以无条件执行。测试没有真正的经济意义`.hasclass('out')`。

尝试这个 ：

```
var navLinks = $('nav li.sub');
var autoClose;
navLinks.hover(function(){
    var thiis = $(this);
    clearTimeout(autoClose);
    thiis.addClass('out');
}, function(){
    var thiis = $(this);
    autoClose = setTimeout(function(){
        thiis.removeClass('out');
    }, 1000);
}); 
```

# ios - 在 Xcode 目标中定义预处理器宏

> ID：14330268
> 
> 赞同：1
> 
> 时间：2013-01-15T02:32:34.267
> 
> 标签：ios, xcode, preprocessor

在我的代码中，我有一些条件：

```
#ifndef SOME_FLAG

// ...

#endif 
```

在 Xcode 项目中，在 target->Build settings->preprocessor macros 下：

我向 Debug 和 Release 以及 AppStore 添加了我之前设置的预处理器宏：SOME_FLAG

（调试已经`DEBUG=1 DEBUG=1`设置（作为一个条目？！！），我添加了另一个 SOME_FLAG 条目。

但这对我不起作用。该`#ifndef #endif`块仍然进入！我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-06-16T10:56:48.777

您可以将价值添加到您的 SOME_FLAG 以进行调试、应用商店和发布，因为 -

> 调试：SOME_FLAG = 0
> 
> 发布：SOME_FLAG = 1
> 
> 应用商店：SOME_FLAG = 2

```
#if SOME_FLAG == 0
NSString *appType = @"Debug Build" ;
#elif SOME_FLAG == 1
NSString *appType = @"Release Build" ;
#else
NSString *appType = @"App Store Build" ;
#endif

NSLog(@"My App Build is %@",appType); //My App Build is Release Build 
```

# javascript - 只允许粘贴到 HTML 表单中

> ID：14330269
> 
> 赞同：0
> 
> 时间：2013-01-15T02:32:38.550
> 
> 标签：javascript, html, forms, paste

我有一个 html 表单，我在其中`ajax.post()`为每个插入的字母运行一个 jQuery。

为了避免让服务器做很多不必要的工作，我考虑过“锁定”html 表单，只允许将数据粘贴到`<textarea>`?

这可能吗？

# android - 检测 ActionBarSherlock SubMenu 上的 KeyPress

> ID：14330270
> 
> 赞同：1
> 
> 时间：2013-01-15T02:32:56.810
> 
> 标签：android, android-actionbar, actionbarsherlock, submenu

如何检测按键以及在 SubMenu 上按下的按键用户？[用户按下的操作栏上的一个长列表将下拉]

```
 SubMenu subMenu1 = menu.addSubMenu("Option");
        subMenu1.add("Comments");
        subMenu1.add("More screens");
        subMenu1.add("Copy Website URL");
        subMenu1.add("Go to Website");

        MenuItem subMenu1Item = subMenu1.getItem();
        subMenu1Item.setIcon(R.drawable.icon_share);
        subMenu1Item.setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS | MenuItem.SHOW_AS_ACTION_WITH_TEXT);

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case android.R.id.home:
        finish();
        break;
    }

    return true;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T22:56:20.823

我想您的意思是菜单中的“用户选择了哪个项目”，而不是“用户按下了哪个键”。您可以在`onOptionsItemSelected()`已有的方法中提供操作。但在此之前，您必须...

*   *遵循以下解决方案，稍微*更改以编程方式将项目添加到子菜单的方式：[https ://stackoverflow.com/a/9080046/1140682](https://stackoverflow.com/a/9080046/1140682)

*   *或者* [在 XML 文件中定义您的菜单和子菜单，](http://developer.android.com/guide/topics/ui/menus.html#xml)然后使用`MenuInflater`将项目添加到您的`Activity`.

最后，只需使用方法中的`itemId`参数`add()`（第一个解决方案）*或*`android:id`XML 中的参数（第二个解决方案）来`switch`决定`onOptionsItemSelected()`.

# sql - PostgreSQL 意外触发行为

> ID：14330275
> 
> 赞同：0
> 
> 时间：2013-01-15T02:33:42.027
> 
> 标签：sql, postgresql, postgresql-9.1

## 情况：

我有一个`fn_SetFoo()`将记录插入表的函数`TableFoo`。

我还有一个触发功能，在每次插入`TableFoo`. 它`TableFooID`从新插入的行中获取新的主键并将其插入到第二个表中`TableFooBar`（具有外键约束）。

我创建了一个运行的触发器`AFTER INSERT ON TableFoo FOR EACH ROW EXECUTE PROCEDURE fn_SetFooBar();`

**如果我`fn_SetFoo()`直接打电话，那么一切都会按预期进行。**

但是，我有一个单独的函数`fn_NormalizeFoo()`来处理一些数据，然后调用`fn_SetFoo()`它处理的每条记录。

**如果我打电话`fn_NormalizeFoo()`，那么只有第一条记录被处理并且函数停止。**

* * *

## 问题：

为什么直接`fn_NormalizeFoo()`运行的内容在整个进程运行时调用时，进程会在第一条记录后停止？`fn_NormalizeFoo()`

* * *

## 一些代码：

```
--------------------------------------------------------
--                Insert Into TableFoo                --
--------------------------------------------------------
CREATE OR REPLACE FUNCTION "example"."fn_SetFoo" (
    IN "Foo1" INTEGER,
    IN "Foo2" INTEGER,
    IN "Foo3" INTEGER
) RETURNS "void" AS 
$$
BEGIN
    INSERT INTO 
        "example"."TableFoo"(
            "Foo1",
            "Foo2",
            "Foo3"
        )
    VALUES
        (
            $1, 
            $2, 
            $3
        );
    RETURN;

    EXCEPTION WHEN "unique_violation" THEN
        -- DO NOTHING
END;
$$
LANGUAGE plpgsql;

--------------------------------------------------------
--              Insert Into TableFooBar               --
--------------------------------------------------------
CREATE OR REPLACE FUNCTION "example"."fn_SetFooBar" (
    IN "FooPK" INTEGER,
    IN "BarPK" INTEGER
) RETURNS "void" AS 
$$
BEGIN
    INSERT INTO 
        "example"."TableFooBar"(
            "FooPK",
            "BarPK"
        )
    VALUES
        (
            $1, 
            $2
        );
    RETURN;

    EXCEPTION WHEN "unique_violation" THEN
        -- DO NOTHING
END;
$$
LANGUAGE plpgsql;

--------------------------------------------------------
--                  Trigger Function                  --
--------------------------------------------------------
CREATE OR REPLACE FUNCTION "example"."tr_SetFooBar"() RETURNS TRIGGER AS
$$
BEGIN
    PERFORM
        "example"."fn_SetFooBar"(
            "TableFoo"."FooPK",
            "TableBar"."BarPK"
        )
    FROM
        "example"."TableFoo" JOIN
        "example"."TableBar" ON [SOMETHING TRUE]
    WHERE
        NEW.SOMECOLUMN = SOMETHING AND 
        [MORE STUFF IS TRUE];

    RETURN NULL;
END;
$$ 
LANGUAGE plpgsql;

--------------------------------------------------------
--                      Trigger                       --
--------------------------------------------------------
CREATE TRIGGER "SetFooBar" AFTER INSERT ON "example"."Foo" FOR EACH ROW EXECUTE PROCEDURE "example"."tr_SetFooBar"();

--------------------------------------------------------
--                   Normalize Foo                    --
--------------------------------------------------------
CREATE OR REPLACE FUNCTION "example"."fn_NormaliseFoo" (
    IN "Param1" VARCHAR,
    IN "Param2" VARCHAR,
    IN "Param3" VARCHAR
) RETURNS "void" AS 
$$
SELECT
    "example"."fn_SetFoo" (
        "Foo1",
        "Foo2",
        "Foo3"
    )
FROM
    [TABLES]
WHERE
    [STUFF IS TRUE]
$$
LANGUAGE SQL; 
```

* * *

如您所见，这比我最初发布的要复杂一些。总体思路是在添加每条记录时创建多对多关系。

**重申一下，`"example"."fn_NormaliseFoo"`在第一行之后运行失败；但是，手动运行内容按预期工作。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T20:36:00.310

`fn_NormalizeFoo()`被描述为：

> 一个单独的函数 fn_NormalizeFoo() 处理一些数据，然后为它处理的每条记录调用 fn_SetFoo()。

但是，显示的代码`fn_NormaliseFoo`是用 SQL 语言声明的，因此它不是程序性的，因此它不能执行所声明的操作。它可以只运行一个查询并返回其结果（如果没有结果，则什么都不返回）。这样的代码必须与调用查询的内联兼容。

所以第一个问题是它`fn_NormaliseFoo`被声明为返回`void`，但它与它是一个 SELECT 的事实不兼容。`sql`通常，该语言的解释器甚至不应该接受函数创建。例子：

```
CREATE FUNCTION f(int) returns void as 'select $1;' language sql; 
```

这失败了：

> 错误：声明返回 void 的函数中的返回类型不匹配
> 详细信息：实际返回类型是整数。

第二个问题`fn_SetFoo`是可能只被调用一次，这是我从问题的*“第一条记录后停止的过程”中*理解的。尽管调用位于查询的选择列表中，其中一些连接表可能会生成`N`行，但这里没有理由让 SQL 引擎调用它`N`。更好的是它只调用一次并影响作为查询输出形成的每一行的相同结果。

`sql`尽管`plpgsql`. _ 为了确保一个函数被调用 N 次，在过程代码中循环 N 次，这将保证工作。

# php - 使用 PHP 中的类（PHP 5.4.9 版）

> ID：14330277
> 
> 赞同：0
> 
> 时间：2013-01-15T02:34:16.793
> 
> 标签：php, dto

我有一堂课如下

```
class DatabaseConnectionDTO {
    private $databaseServerName;

        public function set($dbServerName){
            $this->databaseServerName = $dbServerName;
        }

        public function get() {
            return $this->databaseServerName;
        }
    } 
```

此类位于主项目根文件夹下的 DTO 文件夹中。在项目根文件夹下，我有另一个调用此类的 PHP 文件。

根文件夹下的文件：

```
require('./DTO/DatabaseConnectionDTO.php');
$databaseDTO = new DatabaseConnectionDTO;
$databaseDTO->set('Blaise Pascal');
echo $databaseDTO -> get(); 
```

我的想法是设置属性的值并将其显示在页面上。但是，当我在浏览器上访问该页面时，我得到以下信息

```
 databaseServerName = $dbServerName;
    }
    public function get() {
        return $this->databaseServerName;
    }
}
?> 
```

我在这里缺少什么吗？

**编辑** 当我将 DTO 放在同一个 PHP 文件中时，它开始工作.. 但这不是我想要的.. 我希望每个 DTO 都位于特定位置。

**编辑 2** 添加一些快照

![在此处输入图像描述](../Images/ca069e152fc582fa8d91e1887d1d7e66.png)

![在此处输入图像描述](../Images/ddb2a781c1949bb487bc5228fd0068e1.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-15T03:17:44.783

你有`<? php`.

你需要有`<?php`.

# html - 位置之间的冲突：固定和溢出：css中的可见属性

> ID：14330279
> 
> 赞同：0
> 
> 时间：2013-01-15T02:34:26.253
> 
> 标签：html, css

这是情况。我正在构建一个网页，我将图像放置在页面的右侧。当我缩小浏览器窗口时，我希望出现水平滚动条，所以我包括溢出：可见属性。我还希望图像定位固定，这样当页面向下滚动时，中间的内容与背景一起滚动，但图像保持原样。但是我无法将这两个功能都带到我的页面上。这两个属性似乎相互冲突。有办法解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T02:53:29.203

你的代码太少。前面的问题以代码为例。尝试修复img：

```
img.fixed{
  position: fixed;
  right: 10px;
  top: 10px;
  width: 100px;
  z-index: 55;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T06:26:39.617

我认为您需要使用称为媒体类型的 css 概念....

你不能只使用`position:fixed`

将此CSS添加到您的页面

```
@media all and (max-width: 699px), (max-height: 500px){
.overflowDiv{
         position:fixed;top:100px;height:100px;width:100px;
         overflow:scroll;
         } 
```

根据您的需要更改最大宽度和最大高度

这是[jsfiddle 演示](http://jsfiddle.net/87B6f/)

希望它会帮助你。

谢谢

# sitecore - Sitecore ECM - 更改电子邮件发送的顺序

> ID：14330280
> 
> 赞同：0
> 
> 时间：2013-01-15T02:34:30.413
> 
> 标签：sitecore, sitecore6, sitecore-ecm

我正在尝试对 Sitecore ECM 发送电子邮件的顺序进行排序 - 我已将自定义处理器添加到 DispatchNewsletters 管道，就在 sendEmails 处理器之前。但我似乎无法更改发送电子邮件的顺序。我正在尝试做的一个基本示例：

```
 public void Process(DispatchNewsletterArgs args)
    {
        IOrderedEnumerable<Contact> orderedSubscribers = args.Message.Subscribers.OrderBy(x => x.Profile.UserName.Split('_')[1]);
        List<Contact> orderedList = orderedSubscribers.ToList();
        args.Message.Subscribers.Clear();

        //Add the sorted subscriber list. 
        args.Message.Subscribers.AddRange(orderedList);
    }
} 
```

似乎是从联系人或成员列表而不是订阅者列表设置发送。但我无法改变那里的顺序。任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:24:30.300

排队电子邮件的顺序基于**args.Message.SubscribersNames**属性（而不是**args.Message.Subscribers**）。

您仍然需要记住，电子邮件被安排为异步任务，因此您无法真正判断它们是否会按照排队的顺序进行处理。

您可以查看**Sitecore.Modules.EmailCampaign.Core.Pipelines.DispatchNewsletter.SendMessage**类的代码，以了解有关如何处理电子邮件的更多详细信息。

# python - 单独文件中的 PySide 信号

> ID：14330281
> 
> 赞同：0
> 
> 时间：2013-01-15T02:34:32.860
> 
> 标签：python, qt, pyside

我正在使用 Qt 和 PySide 编写一个 GUI 应用程序，我通常在我的类的**init**函数中连接我的信号。如何将所有信号放在一个单独的文件中，然后从我的主文件中的文件中调用该函数？像这样的东西。

```
import Signals
class Program(QtGui.QMainWindow, GUI.Ui_MainWindow):
    def __init__(self, parent=None):
        super(Program, self).__init__(parent)
        self.setupUi(self)

        Signals.ConnectSignals() 
```

信号.py

```
class ConnectSignals(QtGui.QMainWindow, VUI.Ui_MainWindow):
    def __init__(self, parent=None):
        super(ConnectSignals, self).__init__(parent)

        self.setupUi(self)

        self.actionClose.triggered(self.close) 
```

但是当我这样做时，我收到这条消息 self.actionClose.triggered(self.close) TypeError: native Qt signal is not callable

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T02:47:43.440

我不确定其余部分是否应该/将起作用，但错误是因为你失踪了`.connect` ，我认为它应该是

```
self.actionClose.triggered.connect(self.close) 
```

`self.actionClose.triggered`是一个信号（我假设`actionClose`是一个动作），错误告诉你信号没有`__call__`定义。

# ios - 防止 Dropbox 或任何应用程序显示在 UIDocumentInteractionController 上？

> ID：14330282
> 
> 赞同：0
> 
> 时间：2013-01-15T02:34:35.927
> 
> 标签：ios

我正在使用 UIDocumentInteractionController 显示菜单“在...中打开”。但我不希望任何应用程序出现在此菜单上。怎么做？非常感谢。

# ios - iPad应用程序中的CoreGraphics旋转错误

> ID：14330285
> 
> 赞同：2
> 
> 时间：2013-01-15T02:34:52.533
> 
> 标签：ios, objective-c, core-graphics, cgcontext

在 iPad 模拟器中测试我的通用应用程序时，当应用程序旋转时，我得到了一些奇怪的 Core Graphics 错误。该应用程序不会崩溃，但以下内容会输出到控制台：

```
<Error>: CGImageCreate: invalid image size: 0 x 0.
<Error>: CGContextSetFillColorWithColor: invalid context 0x0
<Error>: CGContextSetStrokeColorWithColor: invalid context 0x0
<Error>: CGContextGetCompositeOperation: invalid context 0x0
<Error>: CGContextSetCompositeOperation: invalid context 0x0
<Error>: CGContextFillRects: invalid context 0x0
<Error>: CGContextSetCompositeOperation: invalid context 0x0
<Error>: CGContextSaveGState: invalid context 0x0
<Error>: CGContextSetCompositeOperation: invalid context 0x0
<Error>: CGContextFillRects: invalid context 0x0
<Error>: CGContextRestoreGState: invalid context 0x0
<Error>: CGContextSaveGState: invalid context 0x0
<Error>: CGContextSetCompositeOperation: invalid context 0x0
<Error>: CGContextFillRects: invalid context 0x0
<Error>: CGContextRestoreGState: invalid context 0x0
<Error>: CGContextSaveGState: invalid context 0x0
<Error>: CGContextSetCompositeOperation: invalid context 0x0
<Error>: CGContextFillRects: invalid context 0x0
<Error>: CGContextRestoreGState: invalid context 0x0
<Error>: CGContextSaveGState: invalid context 0x0
<Error>: CGContextSetCompositeOperation: invalid context 0x0
<Error>: CGContextFillRects: invalid context 0x0
<Error>: CGContextRestoreGState: invalid context 0x0
<Error>: CGImageCreate: invalid image size: 0 x 0.
<Error>: CGContextSetFillColorWithColor: invalid context 0x0
<Error>: CGContextSetStrokeColorWithColor: invalid context 0x0
<Error>: CGContextGetCompositeOperation: invalid context 0x0
<Error>: CGContextSetCompositeOperation: invalid context 0x0
<Error>: CGContextFillRects: invalid context 0x0
<Error>: CGContextSetCompositeOperation: invalid context 0x0
<Error>: CGContextSaveGState: invalid context 0x0
<Error>: CGContextSetCompositeOperation: invalid context 0x0
<Error>: CGContextFillRects: invalid context 0x0
<Error>: CGContextRestoreGState: invalid context 0x0
<Error>: CGContextSaveGState: invalid context 0x0
<Error>: CGContextSetCompositeOperation: invalid context 0x0
<Error>: CGContextFillRects: invalid context 0x0
<Error>: CGContextRestoreGState: invalid context 0x0
<Error>: CGContextSaveGState: invalid context 0x0
<Error>: CGContextSetCompositeOperation: invalid context 0x0
<Error>: CGContextFillRects: invalid context 0x0
<Error>: CGContextRestoreGState: invalid context 0x0
<Error>: CGContextSaveGState: invalid context 0x0
<Error>: CGContextSetCompositeOperation: invalid context 0x0
<Error>: CGContextFillRects: invalid context 0x0
<Error>: CGContextRestoreGState: invalid context 0x0 
```

在我的应用程序中，我有一个`UITabBarController`作为我的根视图控制器，它在其选项卡中包含一个导航控制器和两个拆分视图控制器。我将旋转事件等转发到拆分视图控制器。

我认为问题出在拆分视图控制器的某个地方，因为其中一个控制器有一个包含图像视图（还有几个标签和一个文本视图）的详细视图，其中一个错误是`CGImageCreate`，但我可能会走得很远。另一个拆分视图控制器的详细视图控制器只是一个 Web 视图。两个详细视图都放在 IB 中。

有人有想法么？

谢谢。

# pointers - 内存对象 OpenCL 的基地址

> ID：14330291
> 
> 赞同：0
> 
> 时间：2013-01-15T02:35:35.720
> 
> 标签：pointers, opencl, base, memory-address

我想用**OpenCL**在 GPU 上遍历树，所以我将树组装在主机的一个连续块中，并更改所有指针的地址，以便在设备上保持一致，如下所示：

**TreeAddressDevice = (size_t)BaseAddressDevice + ((size_t)TreeAddressHost - (size_t)BaseAddressHost);**

我想要**内存缓冲区的基地址**：在主机上，我为缓冲区分配内存，如下所示： cl_mem tree_d = clCreateBuffer(...);

问题是 cl_mems 是跟踪数据内部表示的对象。从技术上讲，它们是指向对象的指针，但它们不是指向数据的指针。从内核中访问 c​​l_mem 的唯一方法是通过 setKernelArgs 将其作为参数传入。

在这里[http://www.proxya.net/browse.php?u=%3A%2F%2Fwww.khronos.org%2Fmessage_boards%2Fviewtopic.php%3Ff%3D37%26amp%3Bt%3D2900&b=28](http://www.proxya.net/browse.php?u=%3A%2F%2Fwww.khronos.org%2Fmessage_boards%2Fviewtopic.php%3Ff%3D37%26amp%3Bt%3D2900&b=28)我找到了以下解决方案，但它不起作用：

```
__kernel void getPtr( __global void *ptr, __global void *out )

    {
    *out = ptr;
    } 
```

可以如下调用

代码：

```
...

    cl_mem auxBuf = clCreateBuffer( context, CL_MEM_READ_WRITE, sizeof(void*), NULL, NULL );
    void *gpuPtr;

    clSetKernelArg( getterKernel, 0, sizeof(cl_mem), &myBuf );
    clSetKernelArg( getterKernel, 1, sizeof(cl_mem), &auxBuf );
    clEnqueueTask( commandQueue, getterKernel, 0, NULL, NULL );
    clEnqueueReadBuffer( commandQueue, auxBuf, CL_TRUE, 0, sizeof(void*), &gpuPtr, 0, NULL, NULL );

    clReleaseMemObject(auxBuf);

... 
```

现在“gpuPtr”应该包含“myBuf”在GPU内存空间中的开头地址。

解决方案很明显，我找不到？创建缓冲区时如何取回指向设备内存的指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T03:11:26.490

这是因为在 OpenCL 模型中，主机内存和设备内存是不相交的。设备内存中的指针对主机没有任何意义。

您可以使用 clEnqueueMapBuffer 将设备缓冲区映射到主机内存。映射会将设备同步到主机，取消映射会将主机同步回设备。

**更新**。正如您在评论中解释的那样，您希望将树结构发送到 GPU。一种解决方案是将所有树节点存储在一个数组中，用数组中的索引替换指向节点的指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-15T00:06:58.100

正如 Eric 指出的，有两组内存需要考虑：主机内存和设备内存。基本上，OpenCL 试图通过在主机端的程序中引入缓冲区对象来隐藏这种交互的细节。现在，正如您所指出的，这种方法的问题在于，当我们想要做一些比 OpenCL 开发人员在其范围内预期或允许的更棘手的事情时，它会隐藏我们设备的细节。这里的解决方案是记住 OpenCL 内核使用 C99，并且该语言允许我们毫无问题地访问指针。考虑到这一点，我们可以只要求将指针存储在一个无符号整数变量中以供以后引用。

您的实现是在正确的轨道上，但它需要更多的 C 语法来完成传输。

OpenCL 内核：

```
// Kernel used to obtain pointer from target buffer
__kernel void mem_ptr(__global char * buffer, __global ulong * ptr)
{
    ptr[0] = &buffer[0];
}

// Kernel to demonstrate how to use that pointer again after we extract it.
__kernel void use_ptr(__global ulong * ptr)
{
    char * print_me = (char *)ptr[0];
    /* Code that uses all of our hard work */
    /* ... */
} 
```

主机程序：

```
// Create the buffer that we want the device pointer from (target_buffer) 
//  and a place to store it (ptr_buffer).
cl_mem target_buffer = clCreateBuffer(context, CL_MEM_READ_WRITE, 
                                      MEM_SIZE * sizeof(char), NULL, &ret);
cl_mem ptr_buffer    = clCreateBuffer(context, CL_MEM_READ_WRITE,
                                      1 * sizeof(cl_ulong), NULL, &ret);

/* Setup the rest of our OpenCL program */    
/* .... */

// Setup our kernel arguments from the host...
ret = clSetKernelArg(kernel_mem_ptr, 0, sizeof(cl_mem), (void *)&target_buffer);
ret = clSetKernelArg(kernel_mem_ptr, 1, sizeof(cl_mem), (void *)&ptr_buffer);
ret = clEnqueueTask(command_queue, kernel_mem_ptr, 0, NULL, NULL);

// Now it's just a matter of storing the pointer where we want to use it for later.
ret = clEnqueueCopyBuffer(command_queue, ptr_buffer, dst_buffer, 0, 1 * sizeof(cl_ulong),
                          sizeof(cl_ulong), 0, NULL, NULL);
ret = clEnqueueReadBuffer(command_queue, ptr_buffer, CL_TRUE, 0,
                          1 * sizeof(cl_ulong), buffer_ptrs, 0, NULL, NULL); 
```

你有它。现在，请记住，您不必使用我使用的 char 变量；它适用于任何类型。但是，我建议使用 cl_ulong 来存储指针。对于可访问内存小于 4GB 的设备，这应该无关紧要。但对于地址空间较大的设备，则必须使用 cl_ulong。如果您绝对需要在设备上节省空间，但设备的内存 > 4GB，那么您可以创建一个结构，该结构可以将地址的低 32 LSB 存储到 uint 类型中，MSB 存储在小类型。

# ruby - 用于路由和测试 routes.rb 的 RSpec

> ID：14330293
> 
> 赞同：0
> 
> 时间：2013-01-15T02:36:02.677
> 
> 标签：ruby, ruby-on-rails-3, rspec

我正在尝试为我的服装路线以及不存在的路线编写测试。

对于此处的示例，我有两个问题：

1.  它匹配我的控制器上不存在的操作，因此它并不真正匹配以查看我的控制器是否具有这些操作，它只是匹配语法
2.  `should_not be_routable`不起作用，哪种可以追溯到上面的问题，它不会检查我的控制器或文件`routes.rb`以查看路由是否应该存在。

这个通过了，一切都很好：

```
it "should route to method1" do
   { :get => '/my_controller/method1' }.should route_to(:controller => 'my_controller',
                                                     :action => 'method1')
end 
```

这个失败了，所以它甚至不检查我的控制器或路由文件中是否定义了方法 zz 。

```
it "should not route to zz" do
  { :get => '/my_controller/zz' }.should_not be_routable 
end 
```

我得到的错误是：

```
MyController routing zz should route to rescan
     Failure/Error: { :get => '/my_controller/zz' }.should_not be_routable
       expected {:get=>"/client_rescan/zz"} not to be routable, but it routes to {:controller=>"my_controller", :action=>"zz"} 
```

所以它显然根本不看我的路线文件......

这是另一个不查看我的路由文件的示例，在我的路由中我有'资源：client_rescan，：only => [:index]'，当我这样做时，`rake routes`它没有按预期显示删除，但是测试不看那些：

```
it "should not have route to delete" do
  { :delete => '/my_controller/1'}.should_not be_routable
end 
```

我得到的失败如下。看起来它甚至没有看到删除功能：

```
 Failure/Error: { :delete => '/my_controller/1'}.should_not be_routable
   expected {:delete=>"/my_controller/1"} not to be routable, but it routes to {:controller=>"my_controller", :action=>"1"} 
```

另一个问题是我在测试中索引的发布路线：

```
it "should not have route to post" do
  { :post => '/my_controller' }.should_not be_routable
end 
```

我得到的失败是：

```
 Failure/Error: { :post => '/my_controller' }.should_not be_routable
   expected {:post=>"/my_controller"} not to be routable, but it routes to {:controller=>"my_controller", :action=>"index"} 
```

这是我的 routes.rb 文件的内容

```
require 'resque/server'
require 'resque_scheduler'

Cdc::Application.routes.draw do

  mount Resque::Server.new, :at => 'resque'
  Resque.schedule = YAML.load_file(File.join(File.dirname(__FILE__), 'resque_schedule.yml')) # load the schedule

  devise_for :users, :controllers => { :sessions => "sessions", :registrations => "registrations" }

  [:assessments, :security_assessments, :privacy_assessments].each do |assessment_type|
    resources assessment_type, :controller => :assessments do
      resources :rsz do
        post 'review', :on => :member
        get 'judgement', :on => :member
      end

      get :judgement, :on => :member

      resources :samples do
        get 'download', :on => :member
      end

      resources :asm_reviews do
        post :request_review, :on => :collection
      end
    end
  end

  resources :account_creator
  match "/images/captcha/*file_name" => "captcha#show"

  ## this is where my route is!! :)

  resources :my_controller, :only => [:index] do
    collection do
      get :rescan
      get :cancel
    end
  end

  match "alert_queue/words" => "alert_queue#words"
  resources :alert_queue

  match "calls_to_action/start/:id" => "calls_to_action#start", :id => /\d+/
  match "calls_to_action/close/:id" => "calls_to_action#close", :id => /\d+/
  match "calls_to_action/comment/:id" => "calls_to_action#comment", :id => /\d+/
  match "calls_to_action/multiclose" => "calls_to_action#multiclose"
  match "calls_to_action/multiscan" => "calls_to_action#multiscan"

  match "application_instances/multiclose" => "application_instances#multiclose"
  match "application_instances/multiscan" => "application_instances#multiscan"

  resources :code_categories do
    resources :code_families do
      resources :code_family_versions
    end
  end

  resources :code_policy_items

  resources :application_instances do
    collection do
      post :resque_statuses
    end

    resources :code_indices
    resources :application_analysis

    get "smali/:smali_path", :as => :smali, :on => :member, :action => :smali, :smali_path => /.*/
    member do
      get :file
      get :strings
      get :dump
      get :alerts
      get :correlations
      get :signers
      get :icon
      get :resque_status
      get :assets
      get :new_code_index
      get :class_list
      get :heuristic_hits
      get :engine_artifacts
      post :rescan
      post :attach_artifact
      post :engine_artifact, :action => :attach_engine_artifact
      resources :alerts
    end

    post "multiscan", :on => :collection, :action => :multiscan
    post "multiclose", :on => :collection, :action=> :multiclose
    post "engines/:engine_name/:engine_version/assertions/:cookie",
         :on => :member, :action => :register_assertion_set, :as => :register_assertion_set,
         :engine_name => /[^\/]+/, :engine_version => /[^\/]+/, :cookie => /[^\/]+/
    post "engines/:engine_name/:engine_version/network_data",
         :on => :member, :action => :register_network_data, :as => :register_network_data,
         :engine_name => /[^\/]+/, :engine_version => /[^\/]+/

    post "assets", :on => :member, :action => :register_asset_set, :as => :register_asset_set
  end

  # index gets the list of families, show gets the assertion types for that family
  resources :assertion_families

  resources :artifacts

  resources :dashboard do
    collection do
      get :last_app_instance
    end
  end

  match '/direct_downloads/' => 'direct_downloads#index'

  root :to => "stats#index"
  match '/' => 'stats#index'
  match 'explorer/query/:format' => 'explorer#query'
  match '/:controller(/:action(/:id))'
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T05:51:37.930

问题是这行routes.rb：

```
match '/:controller(/:action(/:id))' 
```

这是一条包罗万象的路线，例如将匹配 /abc/xyz 到控制器 abc 和动作 xyz。

最好不要使用 catch all routes，而是只公开你想要的功能。

# c# - Directory.Getfiles() 多搜索模式如何过滤 c#

> ID：14330295
> 
> 赞同：8
> 
> 时间：2013-01-15T02:36:03.890
> 
> 标签：c#, directory, getfiles

> **可能重复：**
> [您可以使用多个过滤器调用 Directory.GetFiles() 吗？](https://stackoverflow.com/questions/163162/can-you-call-directory-getfiles-with-multiple-filters)

我有一个字符串数组：

```
string[] pattern={"*.jpg","*.txt","*.asp","*.css","*.cs",.....}; 
```

这个字符串模式

```
string[] dizin = Directory.GetFiles("c:\veri",pattern); 
```

文件目录下的dizin变量C:\veri目录如何分配？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-15T02:47:58.947

你可以使用这样的东西

```
string[] extensions = { "jpg", "txt", "asp", "css", "cs", "xml" };

string[] dizin = Directory.GetFiles(@"c:\s\sent", "*.*")
    .Where(f => extensions.Contains(f.Split('.').Last().ToLower())).ToArray(); 
```

或者使用`FileInfo.Extension`比安全一点`String.Split`但可能更慢

```
string[] extensions = { ".jpg", ".txt", ".asp", ".css", ".cs", ".xml" };

string[] dizin = Directory.GetFiles(@"c:\s\sent", "*.*")
    .Where(f => extensions.Contains(new FileInfo(f).Extension.ToLower())).ToArray(); 
```

或者正如**juharr**提到的你也可以使用`System.IO.Path.GetExtension`

```
string[] extensions = { ".jpg", ".txt", ".asp", ".css", ".cs", ".xml" };

string[] dizin = Directory.GetFiles(@"c:\s\sent", "*.*")
    .Where(f => extensions.Contains(System.IO.Path.GetExtension(f).ToLower())).ToArray(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T02:53:31.690

你有不同的选择。

```
String[] files = Directory.GetFiles(path, "*.*", SearchOption.AllDirectories).Where(s => s.ToLower().EndsWith(".jpg") || s.ToLower().EndsWith(".txt") || s.ToLower().EndsWith(".asp")); 
```

或者：

```
String[] files = Directory.GetFiles(path).Where(file => Regex.IsMatch(file, @"^.+\.(jpg|txt|asp)$")); 
```

或者（如果您不使用 Linq 扩展）：

```
List<String> files = new List<String>();
String[] extensions = new String[] { "*.jpg", "*.txt", "*.asp" };

foreach (String extension in extensions)
{
    String[] files = Directory.GetFiles(path, found, SearchOption.AllDirectories);

    foreach (String file in files)
        files.Add(file);
} 
```

# google-apps-script - Google Apps 脚本持久性

> ID：14330297
> 
> 赞同：0
> 
> 时间：2013-01-15T02:36:11.707
> 
> 标签：google-apps-script, persistence

背景：我有一个谷歌网站，我一直在从一个包含我学生分数的谷歌电子表格中提取信息，但是我想让它更加动态，以便他们可以随时请求报告所有当前分数我喜欢。在我编写的脚本中，学生将输入密码，点击一个按钮，然后他们的分数就会生成。

问题：根据我的阅读，当他们单击按钮时，按钮的处理程序会导致脚本重新运行。当前电子表格无法存储，当我尝试访问电子表格时，它告诉我它为空。如何再次访问电子表格？我尝试过使用 ScriptProperties，但得到了相同的结果。顺便说一句，如果我不尝试将它作为 web 应用程序运行，它就可以工作。

这是 doGet() 函数和 getPassword() 函数的一部分，一旦按下 UI 上的按钮，就会调用该函数。

```
function doGet() {
  var app = UiApp.createApplication();
  app.add(app.loadComponent("MyGui"));

  var panel = app.getElementById("VerticalPanel1");
  var text = app.createPasswordTextBox().setName("text");
  var handler = app.createServerHandler("getResults").addCallbackElement(text);

  panel.add(text);
  panel.add(app.createButton("Get Record", handler));

  SpreadsheetApp.getActiveSpreadsheet().show(app);
}

function getResults(eventInfo) {
  var app = UiApp.createApplication();
  var password = eventInfo.parameter.text;

  var panel = app.getElementById("VerticalPanel1");
  var textArea = app.createRichTextArea();
  panel.add(textArea);

  var pointsSheet = SpreadsheetApp.getActiveSpreadsheet().getActiveSheet();
  var passwordCheckRange = pointsSheet.getRange("B70:C94").getValues();
  ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-20T23:44:13.840

问题可能是当脚本作为 webapp 运行时没有“activeSpreadSheet”所以 SpreadsheetApp.getActiveSpreadsheet().getActiveSheet(); 失败。另一种方法是将隐藏字段中的 SpreadSheet id 传递给回调。

在您的 doGet 函数中：

```
var hidden = app.createHidden('ssId', 'YOUR_SS_ID_HERE');
panel.add(hidden);
var handler = app.createServerHandler("getResults").addCallbackElement(text);
handler.addCallbackElement(hidden)` 
```

在您的回调函数中

```
var ssID = eventInfo.parameter.ssId;
var pointsSheet = SpreadsheetApp.openById(ssID).getSheetByName('SHEET_NAME'); 
```

# c# - 代理服务器缓存对私人数据有危险吗？

> ID：14330298
> 
> 赞同：7
> 
> 时间：2013-01-15T02:36:22.417
> 
> 标签：c#, asp.net-mvc, security, cache-control, webproxy

假设我有一个带有名为*/getdata*接口的 asp.net mvc 3 应用程序，不同的用户通过我的 PC 客户端软件连接到服务器并使用此接口获取私有数据。不同的用户由他们自己加密良好的令牌来识别。![在此处输入图像描述](../Images/35fadda31761571eeacbcf13094dce8f.png)

现在问题是 ClientA 告诉​​我们他得到了另一个用户的数据。从 ClientA 的日志中我们发现他得到了 ClientB 的（但他们彼此不认识，他们不能共享帐户）。我查看了我的 Web 应用程序的代码，但找不到任何混合它们的数据的机会。

所以我想知道这会不会发生：

(1) ClientB 通过 Web 代理向*[http://mysite.com/getdata](http://mysite.com/getdata)*发起一个 http 请求，其令牌位于 http 标头中。

(2) 网络代理访问我的网络服务器，获取ClientB的数据。

(3) 我的网络服务器批准请求并返回 ClientB 的数据，因为一切都正确。

(4) ClientB 获取他的数据并正确显示

(5) 几乎在ClientB 得到他的数据的同一时间，ClientA 开始了同样的请求，请求头中带有ClientA 的token。

(6) Web代理找到ClientA请求的url与ClientB的相同，结果还在缓存中，然后返回ClientB的数据。然后 ClientA 获取另一个数据。

在我的 Web 应用程序界面中，一开始我已经设置了所有响应 no-cache、max-age=0 等以防止客户端缓存。我的问题是：

1.  图像中的scanario会发生吗？

2.  如果是，如何防止 Web 代理返回缓存数据？我无法修改PC客户端的程序，Web代理服务器不在我的控制范围内。

3.  如果不是，A 获取 B 的数据的可能原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T08:49:42.653

> 图像中的scanario会发生吗？

是的，如果客户端使用 GET 动词访问`/getdata`端点，这是可能的。

> 如果是，如何防止 Web 代理返回缓存数据？我无法修改PC客户端的程序，Web代理服务器不在我的控制范围内。

使用属性装饰为 GetData 端点提供服务的控制器操作，[`[NoCache]`](https://stackoverflow.com/a/1705113/29407)以确保下游没有数据被缓存。

# html - CSS：如何防止文本对布局造成严重破坏？

> ID：14330300
> 
> 赞同：0
> 
> 时间：2013-01-15T02:36:30.680
> 
> 标签：html, css

这可能是一个非常简单的修复，但我似乎找不到它，所以我向你寻求帮助。此页面： http: [//www.prvlocksmiths.com.au/company/choosing-prv-locksmiths-for-sydney-commercial-projects](http://www.prvlocksmiths.com.au/company/choosing-prv-locksmiths-for-sydney-commercial-projects)缩小尺寸时存在对齐问题，这是由于某些文本上的文本太长造成的链接。这导致很好堆叠的图像的布局......好吧......不是很好堆叠。

![在此处输入图像描述](../Images/fcbb2e3570830d6524624f9580a9aa86.png)

我怎样才能解决这个问题？

编辑：这是 HTML 和 CSS

**CSS：**

```
#benimg {
    overflow:hidden;
}

.listleft {
    float: left;
    width: 50%; 

}

.listright {
    float: left;
    width: 50%; 

}

.listcentered {
    max-width: 700px;
    margin-left: auto;
    margin-right: auto;
}

.rowimg {
    display: block;
    clear: left;

}

.imglist {
    width: 100%;
    height: auto;
    width: auto\9; /* ie8 */

}

.txtlist{
    text-align: center;
    font-size: 95%;
    padding-bottom: 10px;

} 
```

**HTML：**

```
<div id="benimg">
<div class="listcentered">
    <div class="listleft">
        <div class="rowimg">
            <a href="[[~157]]">
<img class="imglist" src="img/benefits/keymarking.png" alt="Key Marking"></a>
            <p class="txtlist"><a href="[[~157]]">Professional Key Marking</a>
</p>
        </div>
        <div class="rowimg">
            <a href="[[~158]]">
<img class="imglist" src="img/benefits/cylindermarking.png" alt="Cylinder Marking"></a>
            <p class="txtlist"><a href="[[~158]]">Professional Cylinder Marking</a>
</p>
        </div>
        <div class="rowimg">
            <a href="[[~159]]">
<img class="imglist" src="img/benefits/keyterminalreseller.png" alt="Key Terminal Reseller"></a>
            <p class="txtlist"><a href="[[~159]]">Sydney Locksmith reseller for Keyterminal</a>
</p>
        </div>
        <div class="rowimg">
            <a href="[[~160]]">
<img class="imglist" src="img/benefits/autojobdispatch.png" alt="Automatic Job Dispatch"></a>
            <p class="txtlist"><a href="[[~160]]">Automated Job Dispatch System</a>
</p>
        </div>  
    </div>

    <div class="listright">
        <div class="rowimg">
            <a href="[[~156]]"><img class="imglist" src="img/benefits/pm7masterkeyingsoftware.png" alt="ProMaster 7 Master Keying Software"></a>
            <p class="txtlist"><a href="[[~156]]">PM7 Sydney Master Keying Software</a>
</p>
        </div>
        <div class="rowimg">
            <a href="[[~161]]"><img class="imglist" src="img/benefits/staffworkshops.png" alt="15 Staff and 8 Mobile Workshops"></a>
            <p class="txtlist"><a href="[[~161]]">Automatic key machines in all Sydney Workshops</a>
</p>
        </div>
        <div class="rowimg">
            <a href="[[~162]]"><img class="imglist" src="img/benefits/scecendorsed.png" alt="SCEC Endorsed Locksmiths"></a>
            <p class="txtlist"><a href="[[~162]]">SCEC endorsed Sydney Locksmiths</a>
</p>
        </div>
        <div class="rowimg">
            <a href="[[~163]]"><img class="imglist" src="img/benefits/automatickeymachines.png" alt="Automatic keying machines"></a>
            <p class="txtlist"><a href="[[~163]]">15 Staff and 8 Mobile Workshops</a>
</p>
        </div>  
    </div>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T03:05:58.290

简而言之，您有一个左列和一个右列。两列的内容之间不能有任何关系。我会放弃两个包含列的概念，而改用“行”概念。

请参阅此[小提琴](http://jsfiddle.net/FHE65/)以获取快速而肮脏的示例

代码，根据示例是 Quick and Dirty

**HTML**

```
<ul class="listcentered">
    <li class="rowClear"> <a href="[[~157]]">
        <img class="imglist" src="http://www.prvlocksmiths.com.au/img/benefits/keymarking.png" alt="Key Marking"></a>
        <p class="txtlist"><a href="[[~157]]">Professional Key Marking</a></p>
      </li>

      <li class="rowimg"> <a href="[[~156]]"><img class="imglist" src="http://www.prvlocksmiths.com.au/img/benefits/pm7masterkeyingsoftware.png" alt="ProMaster 7 Master Keying Software"></a>

        <p class="txtlist"><a href="[[~156]]">PM7 Sydney Master Keying Software</a></p>
      </li>

      <li class="rowClear"> <a href="[[~158]]">
        <img class="imglist" src="http://www.prvlocksmiths.com.au/img/benefits/cylindermarking.png" alt="Cylinder Marking"></a>
        <p class="txtlist"><a href="[[~158]]">Professional Cylinder Marking</a></p>
      </li>
<li class="rowimg"> <a href="[[~162]]"><img class="imglist" src="http://www.prvlocksmiths.com.au/img/benefits/scecendorsed.png" alt="SCEC Endorsed Locksmiths"></a>

        <p
        class="txtlist"><a href="[[~162]]">SCEC endorsed Sydney Locksmiths</a>

          </p>
      </li>        

      <li class="rowimg rowClear"> <a href="[[~161]]"><img class="imglist" src="http://www.prvlocksmiths.com.au/img/benefits/staffworkshops.png" alt="15 Staff and 8 Mobile Workshops"></a>

        <p
        class="txtlist"><a href="[[~161]]">Automatic key machines in all Sydney Workshops</a>

          </p>
      </li>
      <li  > <a href="[[~159]]">
        <img class="imglist" src="http://www.prvlocksmiths.com.au/img/benefits/keyterminalreseller.png" alt="Key Terminal Reseller"></a>
        <p class="txtlist"><a href="[[~159]]">Sydney Locksmith reseller for Keyterminal</a></p>
      </li>
      <li class="rowimg rowClear"> <a href="[[~160]]">
        <img class="imglist" src="http://www.prvlocksmiths.com.au/img/benefits/autojobdispatch.png" alt="Automatic Job Dispatch"></a>
        <p class="txtlist"><a href="[[~160]]">Automated Job Dispatch System</a></p>
      </li>

      <li class="rowimg"> <a href="[[~163]]"><img class="imglist" src="http://www.prvlocksmiths.com.au/img/benefits/automatickeymachines.png" alt="Automatic keying machines"></a>

        <p
        class="txtlist"><a href="[[~163]]">15 Staff and 8 Mobile Workshops</a>

          </p>
      </li>
    </ul> 
```

**CSS**

```
ul {
  position:relative
}

li
{
  float:left;
  width:47%;
  font-size:1.3em;
  padding:10px;

}

.rowClear
{
  clear:both;
} 
```

这应该足以让你继续前进。您需要`li`根据您的要求调整宽度和填充。[Firebug](https://getfirebug.com/)将成为您的朋友。

**更新**

受powerbouys回答的启发，我已经消除了[这个小提琴中对花车的需求](http://jsfiddle.net/FHE65/1/)

**更新2**

作为对您的评论的回应，将`li`元素的填充更改为`padding-bottom:10px;`将使列“重叠”（[http://jsfiddle.net/FHE65/3/](http://jsfiddle.net/FHE65/3/)）。就个人而言，我认为一旦达到图像的大小，流向一列会更有意义。

在合并您的调整图像 CSS 之后，现在应该可以完全满足您的需要 [(http://jsfiddle.net/FHE65/5/)](http://jsfiddle.net/FHE65/5/)。一旦您达到最长单个单词的宽度，它将转到一列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T03:01:23.130

将以下内容添加到您的 CSS 应该可以解决此问题：

```
.txtlist > a {
  width: 100%;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  display: block;
} 
```

以上将仅显示链接中的文本行，以防有更多文本（当您缩小浏览器时）。如果你渲染`<a>`它的`title` 属性也填充了文本，当有人将鼠标悬停在它上面时，它将显示为工具提示。

IE`<a href="..." title="This is the link text">This is the link text</a>`

即使文本显示为“This is the li...”，当将鼠标悬停在它上面时，您的用户也将能够看到全文。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T03:08:58.117

您可以`text-overflow`像某些人建议的那样使用：

```
.txtlist {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
} 
```

*或者*（如果您不想隐藏任何文本），您可以将每个文本显示`.rowimg`为`inline-block`with `vertical-align: top`。

这是更改后的 CSS：

```
.rowimg {
 /*  display: block;
    clear: left; */

    width: 45%; /* You might wanna play around with this as well as margin */
    display: inline-block;
    vertical-align: top;
 } 
```

而且您还必须从 HTML 中删除您的`div.listleft`和`div.listright`元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T03:01:40.820

试试这个：

```
.txtlist{
    text-align: center;
    font-size: 95%;
    padding-bottom: 10px;

    /* Add this css  */
    text-overflow: ellipsis;
    white-space: nowrap;

} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-15T03:28:35.113

只需将固定高度设置为`divs`

`height:300px;`或者不管它可能是什么

# filepicker.io - Filepicker.io - video/* mimetype 在 Chrome 中不起作用

> ID：14330308
> 
> 赞同：6
> 
> 时间：2013-01-15T02:38:09.243
> 
> 标签：filepicker.io

我最近注意到 Chrome 中有一个奇怪的地方，即`.mov`在选择文件时文件没有被识别为有效的视频文件。以下 JSFiddle 说明了我的观点

[http://jsfiddle.net/6aJBM/](http://jsfiddle.net/6aJBM/)

您显然需要更改 API 密钥。如果在 Firefox 中打开上述 JSFiddle，您可以从文件系统中选择图像和视频。另一方面，如果您在 Chrome 中打开它，.mov 文件将显示为灰色，因此不可选择。似乎 .mov 文件没有在 Chrome 中注册为视频文件。有没有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T01:50:04.910

这真的很愚蠢，但是如果您替换`video/*`为：

```
video/avi, video/quicktime, video/mpeg, video/mp4, video/ogg, 
video/webm, video/x-ms-wmv, video/x-flv, video/x-matroska,
video/x-msvideo, video/x-dv 
```

那会成功的。

Chrome 中有一个奇怪的错误/功能，不允许选择 .mov。我将不得不再次查找它，但是 iirc，chrome 的行为被认为是严格的，从字面上看，符合规范。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T15:07:26.283

在[Filepicker 博客上](http://blog.filepicker.io/post/45899334267/filepicker-io-zencoder-adding-video-to-your-app-in)，他们建议使用`extensions`过滤器而不是`mimetypes`.

```
var acceptedExtensions = [
  '3g2','3gp','3gp2','3gpp','3gpp2','aac','ac3','eac3','ec3','f4a',
  'f4b','f4v','flv','highwinds','m4a','m4b','m4r','m4v','mkv','mov',
  'mp3','mp4','oga','ogg','ogv','ogx','ts','webm','wma','wmv'
];
filepicker.pickAndStore({extensions: acceptedExtensions},... 
```

# php - 将 DIV 转换为输入元素并将数据保存到数据库中

> ID：14330309
> 
> 赞同：0
> 
> 时间：2013-01-15T02:38:29.990
> 
> 标签：php, javascript, jquery, mysql

我有一个简单的 div 用于显示用户帐户信息，例如名字：

```
<div id="firstNameChange"><?=$firstName?></div> 
```

我有用于将其转换为输入元素的 jquery 代码：

```
//execute when nameChange DIV is clicked
        $("#firstNameChange").click(function(){ 

                //check if there are any existing input elements
                if ($(this).children('input').length == 0){

                    $("#saveFirstName").css("display", "inline");

                    //variable that contains input HTML to replace
                    var inputbox = "<input type='text' class='inputbox' name='firstName' value=\""+$(this).text()+"\">";    
                    //insert the HTML intp the div
                    $(this).html(inputbox);         

                    //automatically give focus to the input box     
                    $("this .inputbox").focus();

                    //maintain the input when it changes back to a div
                    $("this .inputbox").blur(function(){
                        var value = $(this).val();
                        $("#firstNameChange").text(value);

                    });
                }               
        }); 
```

我创建了一个 PHP 变量来获取输入元素的内容，但它没有填充变量。出于某种原因，没有使用我在上面创建的 JS 输入元素的名称值设置该变量。任何想法为什么会这样？

```
if(isset($_POST['submit'])){
$firstName = $_POST['firstName'];
$sql = "UPDATE `user_accounts` SET `first_name`='$firstName' WHERE email='" . $_SESSION['email'] . "' AND user_id=" . $_SESSION['userID'] ;
$_dbConn->update($sql) or die(mysql_error());
Redirect_To('index.php?page=userProfile'); 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T02:54:42.587

问题是您在执行此操作时替换了输入元素：

```
$("#firstNameChange").text(value); 
```

一种解决方案是将您的 HTML 更改为：

```
<div id="firstNameChange"><?=$firstName?></div><input type="hidden" name="firstName" id="firstNameHidden"/> 
```

然后在你的模糊函数中将隐藏的输入值设置为文本输入值，如下所示：

```
$("#firstNameHidden").val( value ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T02:51:32.790

你为什么做这个？$("这个 .inputbox").focus();

首先，“这个.inputbox”一开始是没有意义的。

```
 $(inputbox).focus();

 //maintain the input when it changes back to a div
 $(inputbox).blur(function(){
     var value = $(this).val();
     $("#firstNameChange").text(value);
 }); 
```

另外，您是否意识到当您执行 $(this).html(inputbox); 时 你用新创建的输入元素替换你的 DIV 的所有内容？所以，你`<?=$firstName?>`在那一点上已经走了。

# python - 某些值在数组中被重新分配/更改，在 while 循环中它们不应该

> ID：14330311
> 
> 赞同：1
> 
> 时间：2013-01-15T02:38:35.667
> 
> 标签：python, arrays, loops

首先，我想为我的英语道歉。这不是我的第一语言。

这是我正在开发的一个程序，用于对重复负载三轴测试产生的数据进行排序。第一列是一个段。三段形成一个循环。加载、卸载、暂停。大约 50 个数据点用于加载，同样用于卸载，100 个用于暂停。我从 121 开始加载。对于本节，我需要第四列（索引 3）的加载和卸载阶段的最大值。

我的数组有：

```
[[  1.21000000e+02   1.00313720e+02   2.00015190e-02 ...,   2.25933480e-01
2.95645450e-01  -3.33373370e-01]
[  1.21000000e+02   1.00318600e+02   2.00071220e-02 ...,   2.25933600e-01
2.95629110e-01  -3.33358880e-01]
[  1.21000000e+02   1.00323490e+02   2.00045150e-02 ...,   2.25932690e-01
2.95642500e-01  -3.33374260e-01]
..., 
[  1.50000000e+02   1.10347900e+02   2.00072340e-02 ...,   2.24460500e-01
2.94727620e-01  -3.38975370e-01]
[  1.50000000e+02   1.10352780e+02   1.99971700e-02 ...,   2.24458930e-01
2.94705120e-01  -3.38966550e-01]
[  1.50000000e+02   1.10357670e+02   2.00063640e-02 ...,   2.24455860e-01
2.94704710e-01  -3.38963510e-01]] 
```

在我通过那个循环运行它之后：

```
g = np.loadtxt('test.txt')

Sigmad = []

DataCol = np.hsplit(g, g.shape[1])
DataCharge = DataCol[3] #Charge mean load
DataCycle = DataCol[0]

ld = 0 #ligne de début, start line of the load segment
fc = 0 #Fin de chargement, end line of the unload segment
seg1 = DataCycle[0] #Segment initial, numerical value of the first segment

chargemax = []
i = 0

while i < len(DataCycle):

    if DataCycle[i] == seg1 and DataCycle[i+1] == seg1 and DataCycle[i-1] == seg1 - 1:
        ld = i        

    elif DataCycle[i] == seg1 + 2 and DataCycle[i+1] ==  seg1 + 2 and DataCycle[i-1] == seg1 + 1 :

        fc = i
        print seg1
        chargemax.append(np.max(DataCharge[ld:fc]))
        ld = i + 1
        seg1 += 3

    i+=1

Sigmad.append(1000*np.mean(chargemax[:])/aire) 
```

g 被修改了，我不知道为什么， g 现在等于：

```
[[  1.51000000e+02,   1.00313720e+02,   2.00020000e-02, ...,
      2.25933000e-01,   2.95645000e-01,  -3.33373000e-01],
   [  1.21000000e+02,   1.00318600e+02,   2.00070000e-02, ...,
      2.25934000e-01,   2.95629000e-01,  -3.33359000e-01],
   [  1.21000000e+02,   1.00323490e+02,   2.00050000e-02, ...,
      2.25933000e-01,   2.95642000e-01,  -3.33374000e-01],
   ..., 
   [  1.50000000e+02,   1.10347900e+02,   2.00070000e-02, ...,
      2.24460000e-01,   2.94728000e-01,  -3.38975000e-01],
   [  1.50000000e+02,   1.10352780e+02,   1.99970000e-02, ...,
      2.24459000e-01,   2.94705000e-01,  -3.38967000e-01],
   [  1.50000000e+02,   1.10357670e+02,   2.00060000e-02, ...,
      2.24456000e-01,   2.94705000e-01,  -3.38964000e-01]] 
```

有人可以向我解释为什么会这样。第 4 列中的一些值也会被修改。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T02:49:46.303

在这个部分：

```
DataCol = np.hsplit(g, g.shape[1])
DataCharge = DataCol[3] #Charge mean load
DataCycle = DataCol[0]

[...]

seg1 = DataCycle[0] 
```

您不是在制作副本，您只是为原始数组的视图赋予新名称。所以当你这样做时

```
seg1 += 3 
```

在循环内部，您正在修改`g`自己。例如：

```
>>> a = np.array([[1,2,3], [4,5,6]])
>>> b = a[0]
>>> b
array([1, 2, 3])
>>> b += 100
>>> b
array([101, 102, 103])
>>> a
array([[101, 102, 103],
       [  4,   5,   6]]) 
```

如果你想要一个副本，你可以`.copy()`显式调用：

```
>>> a = np.array([[1,2,3], [4,5,6]])
>>> b = a[0].copy()
>>> b
array([1, 2, 3])
>>> b += 1000
>>> b
array([1001, 1002, 1003])
>>> a
array([[1, 2, 3],
       [4, 5, 6]]) 
```

# python - Python 参数和函数

> ID：14330312
> 
> 赞同：1
> 
> 时间：2013-01-15T02:38:45.660
> 
> 标签：python

我刚开始学习 Python，我一直在搞乱输入不同的代码来练习学习，我编写了以下代码：

```
import math
def lol():
    print (math.cos(math.pi))
    print ("I hope this works")

def print_twice(bruce):
    print bruce
    print bruce

print_twice(lol()) 
```

当我运行它时，我的输出是：

```
-1.0
I hope this works
None
None 
```

为什么它不打印函数 lol() 两次？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T02:41:49.053

您的代码`print_twice(lol())`说要执行`lol()`并将其返回值传递给`print_twice()`. 由于您没有为 指定返回值`lol()`，因此它返回`None`。因此，lol() 在执行时会打印一次，并且 print 中的两个`print`语句都`print_twice()`传递了`None`.

这就是你想要的：

```
def lol():
    print (math.cos(math.pi))
    print ("I hope this works")

def print_twice(bruce):
    bruce()
    bruce()

print_twice(lol) 
```

我们现在不是传递 的*返回值*，而是传递*函数*，然后我们在 中执行两次。`lol()` *`lol``print_twice()`*

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T02:42:09.253

您应该注意，打印不同于返回。

当您调用`print_twice(lol())`它时，它将首先调用`lol()`将打印`-1.0`并`I hope this works`返回`None`，然后它将继续调用`print_twice(None)`将调用`print None`两次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T02:44:36.950

您如何按预期运行：

```
def lol():
    print "lol"

def run_twice(func):
    func()
    func()

run_twice(lol) 
```*

# mysql - MYSQL 中的批量插入

> ID：14330314
> 
> 赞同：23
> 
> 时间：2013-01-15T02:38:50.613
> 
> 标签：mysql, insert

在 MS SQL 上，我可以使用下面的 sql 命令进行批量插入：

```
BULK INSERT myDatabase.MyTable FROM 'C:\MyTextFile.txt' WITH  FIELDTERMINATOR = ',' 
```

现在我想在 MySQL 上做同样的事情，但我似乎无法弄清楚它是如何工作的以及使用什么查询。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-15T02:45:38.883

在 MySQL 中，等价于

加载数据文件

[http://dev.mysql.com/doc/refman/5.1/en/load-data.html](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)

```
LOAD DATA INFILE 'C:\MyTextFile'
INTO TABLE myDatabase.MyTable
FIELDS TERMINATED BY ',' 
```

# html - 电子邮件客户端收件箱的 CSS

> ID：14330315
> 
> 赞同：1
> 
> 时间：2013-01-15T02:39:20.087
> 
> 标签：html, css, list

我正在创建一个电子邮件客户端，我希望收件箱类似于 Mac Mail![Mac 邮件收件箱](../Images/8a25d259dc2f862d086885e884ba7767.png)

我正在使用 ajax（输出到 XML）从数据库中提取电子邮件本身，然后遍历条目并提取相关元素。

我从来没有信心的是css。我想使用`<ul>`and创建元素`<li>`。我的理解是我需要嵌套这些。例如：

```
<ul>
<li>
    <ul>
        <li class="from">Mike @ Hotmail</li>
        <li class="subject">Hello</li>
        <li class="date">13/01/2013</li>
        <li class="preview">Lorem Ipsum....</li>
    </ul>
</li>
<li>
    <ul>
        <li class="from">Jame @ Gmail</li>
        <li class="subject">Out Of Office</li>
        <li class="date">12/01/2013</li>
        <li class="preview">Lorem Ipsum....</li>
    </ul>
</li> 
```

```
.from {

}

.subject {

}

.date {

}

.preview {

} 
```

我不知道我是否需要在 CSS 中引用`<ul>`和项目，这有什么不同吗？`<li>`另外，我需要什么东西来创造这种外观？

请不要回答这个问题。我想我已经解决了。当我对结果感到满意时，我会在这里发帖供其他人在未来工作......

好的，我放弃了，这就是我目前所拥有的：

```
<!DOCTYPE html>
<html>
<head>
<style type="text/css">
.inboxPanel {
    width: 420px;
}

ul.inbox {
    width: 100%;
    list-style-type: none;
}

ul.message {
    list-style-type: none;
    display: block;
}

.from {
    width: 50%;
    border: 1px solid #ccc;
    font-weight: 700;
    float: left;
    display: inline-block;
}

.subject {
    border: 1px solid #ccc;
}

.date {
    width: 50%;
    border: 1px solid #ccc;
    float: right;
    display: inline-block;
}

.preview {
    border: 1px solid #ccc;
}
</style>
<title></title>
</head>

<body>
<div class="inboxPanel">
    <ul class="inbox">
        <li>
            <ul class="message">
                <li class="from">Mike @ Hotmail</li>

                <li class="subject">Hello</li>

                <li class="date">13/01/2013</li>

                <li class="preview">Lorem Ipsum....</li>
            </ul>
        </li>

        <li>
            <ul class="message">
                <li class="from">Jame @ Gmail</li>

                <li class="subject">Out Of Office</li>

                <li class="date">12/01/2013</li>

                <li class="preview">Lorem Ipsum....</li>
            </ul>
        </li>

        <li>
            <ul class="message">
                <li class="from">Mike @ Hotmail</li>

                <li class="subject">Hello</li>

                <li class="date">13/01/2013</li>

                <li class="preview">Lorem Ipsum....</li>
            </ul>
        </li>

        <li>
            <ul class="message">
                <li class="from">Jame @ Gmail</li>

                <li class="subject">Out Of Office</li>

                <li class="date">12/01/2013</li>

                <li class="preview">Lorem Ipsum....</li>
            </ul>
        </li>
    </ul>
</div>
</body>
</html> 
```

![到目前为止的设计屏幕截图](../Images/e59a44369271555a5aed91f38678b227.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T03:17:38.487

好的，首先

```
<ul>
    <li class="from">Mike @ Hotmail</li>
    <li class="subject">Hello</li>
    <li class="date">13/01/2013</li>
    <li class="preview">Lorem Ipsum....</li>
</ul> 
```

在语义上没有意义。发件人、主题、日期和预览不是列表。您的电子邮件是一个列表，但电子邮件组件不是。

你应该做的是这样的：

```
<ul>
    <li>
        <span class="from"></span>
        <span class="date"></span>
        <p class="subject></p>
        <p class="preview"></p>
    </li>
<ul> 
```

CSS：

```
li { overflow: hidden; }
li span.from { float: left; font-weight: bold; }
li span.date { float: right; }
li p.subject { clear: both; font-weight: bold; }
li p.preview { color: #ccc; } 
```

这只是粗略的样式，使布局看起来像你想要的那样。您必须调整它以获得适当的填充、颜色等。

# android - Android java.lang.NullPointerException 错误

> ID：14330317
> 
> 赞同：0
> 
> 时间：2013-01-15T02:39:27.697
> 
> 标签：android, android-layout, admob, android-xml

> **可能重复：**
> [admob 6.2.1 空指针异常](https://stackoverflow.com/questions/13036188/admob-6-2-1-nullpointer-exception)

仅当我想在布局中添加广告横幅时才会显示此错误。

```
java.lang.NullPointerException
Exception details are logged in Window > Show View > Error Log

java.lang.NullPointerException
    at com.google.ads.AdView.onMeasure(SourceFile:670)
    at android.view.View.measure(View.java:15513)
    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4827)
    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1404)
    at android.widget.LinearLayout.measureVertical(LinearLayout.java:695)
    at android.widget.LinearLayout.onMeasure(LinearLayout.java:588)
    at android.view.View.measure(View.java:15513)
    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4827)
    at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
    at android.view.View.measure(View.java:15513)
    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4827)
    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1404)
    at android.widget.LinearLayout.measureVertical(LinearLayout.java:695)
    at android.widget.LinearLayout.onMeasure(LinearLayout.java:588)
    at android.view.View.measure(View.java:15513)
    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4827)
    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1404)
    at android.widget.LinearLayout.measureVertical(LinearLayout.java:695)
    at android.widget.LinearLayout.onMeasure(LinearLayout.java:588)
    at android.view.View.measure(View.java:15513) 
```

这是我的 xml 文件代码。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    tools:context=".MainActivity" >

    <Button
        android:id="@+id/bGoBack"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="GO BACK" />

    <Button
        android:id="@+id/bRefresh"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:minWidth="40dp"
        android:text="REFRESH" />

    <Button
        android:id="@+id/bForward"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:minWidth="48dp"
        android:text="GO FORWARD" />

    <WebView
        android:id="@+id/webView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="40dp" />

    <com.google.ads.AdView android:id="@+id/adView" 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        ads:adSize="BANNER"
        ads:adUnitId="can't show my publisher id"
        ads:loadAdOnCreate="true"
    />

</LinearLayout> 
```

如果我从我的 xml 文件中删除负责显示广告的代码，错误就会消失。

```
<com.google.ads.AdView android:id="@+id/adView" 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            ads:adSize="BANNER"
            ads:adUnitId="can't show my publisher id"
            ads:loadAdOnCreate="true"
        /> 
```

我无法修复错误，我希望有更多经验的人能指出问题。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T04:37:24.273

我遇到了这个问题，然后我从 xml 文件中删除了 adview 布局，并在那里放置了一个简单的线性布局，并通过我的活动中的代码动态附加了 adview。它解决了这个问题。这段代码可以帮助你-

```
AdView adView = new AdView(this, AdSize.BANNER, MY_AD_UNIT_ID);
LinearLayout layout = (LinearLayout)findViewById(R.id.mainLayout);//your linear layout
layout.addView(adView);// Add the adView to it
adView.loadAd(new AdRequest()); 
```

# ruby-on-rails - 放 Rails 中基于 URL 参数的活动类

> ID：14330324
> 
> 赞同：1
> 
> 时间：2013-01-15T02:40:16.880
> 
> 标签：ruby-on-rails

我有这样的导航：

```
<nav>
  <ul class='nav nav-pills'>
    <li>
      <%= link_to 'link1', '#' %>
    </li>
    <li>
      <%= link_to 'link1', '#' %>
    </li>
  </ul>
</nav> 
```

我的路由、视图和控制器的设置使得它们`root_url/.../action`都 `root_url/.../action/:page_id`将呈现相同的视图，并`@page`根据`:page_id`参数设置实例变量或为操作的根设置指定的默认值。稍后在视图中，我正在渲染与`@page`.

我要做的是`class='active'`在`<li>`其链接文本与`@page`.

我最初的倾向是保持 DRY 并设置`window.page_id`为匹配`@page`并使用 CoffeeScript 来添加类，但这给了我在页面加载和设置类之间非常明显的延迟。

有谁知道实现这一目标的最佳方法？现在我在每个`<li>`元素中都嵌入了红宝石，这是相当不可取的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T02:51:43.500

从另一个 SO 帖子借用并稍作修改以满足您的需求[在 Rails 3 中将“当前”类添加到导航的最佳方法](https://stackoverflow.com/questions/3705898/best-way-to-add-current-class-to-nav-in-rails-3)

```
def nav_link(link_text, page)
  class_name = link_text == page ? 'active' : ''

  content_tag(:li, :class => class_name) do
    link_to link_text, page
  end
end 
```

像这样使用：

```
nav_link 'Home', @page 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-22T05:17:55.080

扩展 Zeiv 的答案，您可以比较网址：

辅助方法：

```
def nav_link(link_text, link_path)
  content_tag(:li, class: ('active' if link_path == url_for(only_path: true)) ) do
    link_to link_text, link_path
  end
end 
```

现在在视图中你可以这样做：

```
<%= nav_link "Some Page", some_page_path %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T03:28:56.910

扩展 99miles 的答案，我把它放在相应的助手中：

```
def nav_link(link_text, link_path, current_page)
  content_tag(:li, class: ('active' if link_text.downcase.gsub(' ', '_') == current_page) ) do
    link_to link_text, link_path
  end
end 
```

这样`<li>`，不活动的元素就没有空类，即使链接文本包含空格，它也可以工作。

在视图中使用，例如：

```
<%= nav_link "My Page", page_path('my_page'), @page %> 
```

**编辑：**

或者，如果您想独立于`:page_id`

```
def nav_link(link_text, link_path, page_id, current_page)
  content_tag(:li, class: ('active' if page_id == current_page) ) do
    link_to link_text, link_path
  end
end 
```

然后你可以做

```
<%= nav_link "My Link", page_path('my_page'), 'my_page', @page %> 
```

# c++ - Windows XP 上的 Meteorite 安装错误 - 找不到“c:\Microsoft.Cpp.Default.props”

> ID：14330327
> 
> 赞同：4
> 
> 时间：2013-01-15T02:40:17.460
> 
> 标签：c++, node.js, meteor, npm, router

我现在正在学习在我的 Windows 机器上创建流星应用程序。一切正常，因为[http://win.meteor.com](http://win.meteor.com)有我可以尝试的 Windows 安装。我现在遇到的问题是我想在我的应用程序中具有路由功能。根据我的研究，Meteor-Router 包可以使用陨石添加。这就是我所做的

1.  为 windows 安装 node.js --> 一切正常，我可以输入 node -v 来查看节点版本

2.  按类型安装陨石`npm install -g meteorite`->每次工作正常，直到找不到抱怨“c：\ Microsoft.Cpp.Default.props”的异步模块安装

    我尝试用谷歌搜索寻找答案，但没有运气。我有什么想法可以解决这个问题吗？

![在此处输入图像描述](../Images/d076d2af4f13a0cde8024cfc853ad476.png)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-05-10T12:16:10.530

[根据陨石的官方文档](https://github.com/oortcloud/meteorite#installing-meteorite)，截至撰写本文时，Meteorite 无法在 Windows 中运行。对不起。

> ...但是，陨石基于 git 的方法与运行它所需的 MSI 安装背道而驰。所以陨石现在不能在窗户下工作。改变这一点的拉取请求将被欣然接受！

# java - 为什么 G1 Full GC 似乎被不必要地触发了？

> ID：14330329
> 
> 赞同：15
> 
> 时间：2013-01-15T02:40:24.683
> 
> 标签：java, garbage-collection, g1gc

我在用

```
java version "1.7.0_09"
Java(TM) SE Runtime Environment (build 1.7.0_09-b05)
Java HotSpot(TM) 64-Bit Server VM (build 23.5-b02, mixed mode) 
```

使用 G1 垃圾收集器。JVM 参数是

```
-server -Xss4096k -XX:MaxPermSize=512m -XX:PermSize=512m -Xms30G 
-Xmx30G -Xnoclassgc -XX:+UseNUMA -XX:+UseFastAccessorMethods 
-XX:ReservedCodeCacheSize=48m -XX:+UseStringCache 
-XX:+UseGCOverheadLimit -Duser.timezone=EET 
-Xmaxf1 -XX:+UseCompressedOops -XX:+DisableExplicitGC 
-XX:+AggressiveOpts -XX:CMSInitiatingOccupancyFraction=70 
-XX:+ParallelRefProcEnabled -XX:+UseAdaptiveSizePolicy 
-XX:MaxGCPauseMillis=500 -XX:+UseG1GC 
-XX:InitiatingHeapOccupancyPercent=0 
-XX:GCPauseIntervalMillis=10000 -XX:+PrintGCDetails 
-XX:+PrintHeapAtGC -XX:+PrintGCDateStamps -Xloggc:gc.log 
```

但是，我在没有任何明显原因的情况下经历了完整的 GC 扫描，如何摆脱它们？

GC 日志，带有来自先前事件的一些尾部：

```
{Heap before GC invocations=206 (full 8):
 garbage-first heap   total 31457280K, used 18323299K [0x00007fc6eb800000, 0x00007fce6b800000, 0x00007fce6b800000)
  region size 8192K, 768 young (6291456K), 31 survivors (253952K)
 compacting perm gen  total 524288K, used 145771K [0x00007fce6b800000, 0x00007fce8b800000, 0x00007fce8b800000)
   the space 524288K,  27% used [0x00007fce6b800000, 0x00007fce7465af18, 0x00007fce7465b000, 0x00007fce8b800000)
No shared spaces configured.
2013-01-16T11:45:31.290+0200: 20430.451: [GC pause (young), 0.54738500 secs]
   [Parallel Time: 510.7 ms]
      [GC Worker Start (ms):  20430451.7  20430451.8  20430451.8  20430451.8
       Avg: 20430451.8, Min: 20430451.7, Max: 20430451.8, Diff:   0.1]
      [Ext Root Scanning (ms):  22.3  68.3  21.8  20.8
       Avg:  33.3, Min:  20.8, Max:  68.3, Diff:  47.5]
      [Update RS (ms):  21.6  0.0  23.6  23.7
       Avg:  17.3, Min:   0.0, Max:  23.7, Diff:  23.7]
         [Processed Buffers : 77 0 18 55
          Sum: 150, Avg: 37, Min: 0, Max: 77, Diff: 77]
      [Scan RS (ms):  19.6  0.1  19.3  19.6
       Avg:  14.7, Min:   0.1, Max:  19.6, Diff:  19.5]
      [Object Copy (ms):  439.1  434.2  437.8  438.4
       Avg: 437.4, Min: 434.2, Max: 439.1, Diff:   4.9]
      [Termination (ms):  0.0  0.0  0.0  0.0
       Avg:   0.0, Min:   0.0, Max:   0.0, Diff:   0.0]
         [Termination Attempts : 1 1 1 1
          Sum: 4, Avg: 1, Min: 1, Max: 1, Diff: 0]
      [GC Worker End (ms):  20430954.5  20430954.6  20430954.5  20430954.4
       Avg: 20430954.5, Min: 20430954.4, Max: 20430954.6, Diff:   0.1]
      [GC Worker (ms):  502.7  502.8  502.7  502.6
       Avg: 502.7, Min: 502.6, Max: 502.8, Diff:   0.2]
      [GC Worker Other (ms):  8.0  8.0  8.0  8.1
       Avg:   8.0, Min:   8.0, Max:   8.1, Diff:   0.1]
   [Clear CT:   2.6 ms]
   [Other:  34.1 ms]
      [Choose CSet:   0.1 ms]
      [Ref Proc:  27.4 ms]
      [Ref Enq:   0.2 ms]
      [Free CSet:   5.4 ms]
   [Eden: 5896M(5896M)->0B(5688M) Survivors: 248M->456M Heap: 17893M(30720M)->12208M(30720M)]
 [Times: user=2.12 sys=0.02, real=0.55 secs]
Heap after GC invocations=207 (full 8):
 garbage-first heap   total 31457280K, used 12501684K [0x00007fc6eb800000, 0x00007fce6b800000, 0x00007fce6b800000)
  region size 8192K, 57 young (466944K), 57 survivors (466944K)
 compacting perm gen  total 524288K, used 145771K [0x00007fce6b800000, 0x00007fce8b800000, 0x00007fce8b800000)
   the space 524288K,  27% used [0x00007fce6b800000, 0x00007fce7465af18, 0x00007fce7465b000, 0x00007fce8b800000)
No shared spaces configured.
}
{Heap before GC invocations=207 (full 8):
 garbage-first heap   total 31457280K, used 19058524K [0x00007fc6eb800000, 0x00007fce6b800000, 0x00007fce6b800000)
  region size 8192K, 727 young (5955584K), 57 survivors (466944K)
 compacting perm gen  total 524288K, used 145775K [0x00007fce6b800000, 0x00007fce8b800000, 0x00007fce8b800000)
   the space 524288K,  27% used [0x00007fce6b800000, 0x00007fce7465bdd8, 0x00007fce7465be00, 0x00007fce8b800000)
No shared spaces configured.
2013-01-16T11:46:26.619+0200: 20485.781: [GC pause (mixed), 1.42356500 secs]
   [Parallel Time: 1385.9 ms]
      [GC Worker Start (ms):  20485786.6  20485786.6  20485786.6  20485786.7
       Avg: 20485786.6, Min: 20485786.6, Max: 20485786.7, Diff:   0.1]
      [Ext Root Scanning (ms):  22.1  70.0  22.2  21.3
       Avg:  33.9, Min:  21.3, Max:  70.0, Diff:  48.7]
      [Update RS (ms):  9.9  0.0  10.9  11.2
       Avg:   8.0, Min:   0.0, Max:  11.2, Diff:  11.2]
         [Processed Buffers : 13 0 25 17
          Sum: 55, Avg: 13, Min: 0, Max: 25, Diff: 25]
      [Scan RS (ms):  324.6  276.4  324.6  324.6
       Avg: 312.5, Min: 276.4, Max: 324.6, Diff:  48.2]
      [Object Copy (ms):  1021.1  1031.2  1019.8  1020.5
       Avg: 1023.1, Min: 1019.8, Max: 1031.2, Diff:  11.4]
      [Termination (ms):  0.0  0.0  0.0  0.0
       Avg:   0.0, Min:   0.0, Max:   0.0, Diff:   0.0]
         [Termination Attempts : 6 5 5 1
          Sum: 17, Avg: 4, Min: 1, Max: 6, Diff: 5]
      [GC Worker End (ms):  20487164.3  20487164.3  20487164.3  20487164.3
       Avg: 20487164.3, Min: 20487164.3, Max: 20487164.3, Diff:   0.0]
      [GC Worker (ms):  1377.7  1377.6  1377.6  1377.6
       Avg: 1377.7, Min: 1377.6, Max: 1377.7, Diff:   0.1]
      [GC Worker Other (ms):  8.2  8.3  8.3  8.3
       Avg:   8.3, Min:   8.2, Max:   8.3, Diff:   0.1]
   [Clear CT:   4.4 ms]
   [Other:  33.3 ms]
      [Choose CSet:   5.5 ms]
      [Ref Proc:   5.0 ms]
      [Ref Enq:   0.2 ms]
      [Free CSet:   9.1 ms]
   [Eden: 5360M(5688M)->0B(5784M) Survivors: 456M->360M Heap: 18616M(30720M)->11359M(30720M)]
 [Times: user=5.56 sys=0.01, real=1.42 secs]
Heap after GC invocations=208 (full 8):
 garbage-first heap   total 31457280K, used 11632594K [0x00007fc6eb800000, 0x00007fce6b800000, 0x00007fce6b800000)
  region size 8192K, 45 young (368640K), 45 survivors (368640K)
 compacting perm gen  total 524288K, used 145775K [0x00007fce6b800000, 0x00007fce8b800000, 0x00007fce8b800000)
   the space 524288K,  27% used [0x00007fce6b800000, 0x00007fce7465bdd8, 0x00007fce7465be00, 0x00007fce8b800000)
No shared spaces configured.
}
{Heap before GC invocations=208 (full 8):
 garbage-first heap   total 31457280K, used 11632594K [0x00007fc6eb800000, 0x00007fce6b800000, 0x00007fce6b800000)
  region size 8192K, 45 young (368640K), 45 survivors (368640K)
 compacting perm gen  total 524288K, used 145775K [0x00007fce6b800000, 0x00007fce8b800000, 0x00007fce8b800000)
   the space 524288K,  27% used [0x00007fce6b800000, 0x00007fce7465bdd8, 0x00007fce7465be00, 0x00007fce8b800000)
No shared spaces configured.
2013-01-16T11:46:28.060+0200: 20487.222: [Full GC 11359M->8807M(30720M), 32.4879420 secs]
 [Times: user=45.41 sys=0.21, real=32.48 secs]
Heap after GC invocations=209 (full 9):
 garbage-first heap   total 31457280K, used 9019206K [0x00007fc6eb800000, 0x00007fce6b800000, 0x00007fce6b800000)
  region size 8192K, 0 young (0K), 0 survivors (0K)
 compacting perm gen  total 524288K, used 145775K [0x00007fce6b800000, 0x00007fce8b800000, 0x00007fce8b800000)
   the space 524288K,  27% used [0x00007fce6b800000, 0x00007fce7465bdd8, 0x00007fce7465be00, 0x00007fce8b800000)
No shared spaces configured.
} 
```

其他类似的：

```
{Heap before GC invocations=105 (full 4):
 garbage-first heap   total 31457280K, used 12638024K [0x00007fcb22800000, 0x00007fd2a2800000, 0x00007fd2a2800000)
  region size 8192K, 56 young (458752K), 56 survivors (458752K)
 compacting perm gen  total 524288K, used 147352K [0x00007fd2a2800000, 0x00007fd2c2800000, 0x00007fd2c2800000)
   the space 524288K,  28% used [0x00007fd2a2800000, 0x00007fd2ab7e61f8, 0x00007fd2ab7e6200, 0x00007fd2c2800000)
No shared spaces configured.
2013-01-14T10:31:31.240+0200: 14185.812: [Full GC 12341M->7092M(30720M), 25.3417840 secs]
 [Times: user=35.12 sys=0.21, real=25.33 secs]
Heap after GC invocations=106 (full 5):
 garbage-first heap   total 31457280K, used 7262578K [0x00007fcb22800000, 0x00007fd2a2800000, 0x00007fd2a2800000)
  region size 8192K, 0 young (0K), 0 survivors (0K)
 compacting perm gen  total 524288K, used 147352K [0x00007fd2a2800000, 0x00007fd2c2800000, 0x00007fd2c2800000)
   the space 524288K,  28% used [0x00007fd2a2800000, 0x00007fd2ab7e61f8, 0x00007fd2ab7e6200, 0x00007fd2c2800000)
No shared spaces configured.
}

{Heap before GC invocations=248 (full 11):
 garbage-first heap   total 31457280K, used 12262418K [0x00007fcb22800000, 0x00007fd2a2800000, 0x00007fd2a2800000)
  region size 8192K, 37 young (303104K), 37 survivors (303104K)
 compacting perm gen  total 524288K, used 152608K [0x00007fd2a2800000, 0x00007fd2c2800000, 0x00007fd2c2800000)
   the space 524288K,  29% used [0x00007fd2a2800000, 0x00007fd2abd082e8, 0x00007fd2abd08400, 0x00007fd2c2800000)
No shared spaces configured.
2013-01-14T13:01:39.869+0200: 23194.441: [Full GC 11975M->7331M(30720M), 28.6147390 secs]
 [Times: user=40.31 sys=0.03, real=28.62 secs]
Heap after GC invocations=249 (full 12):
 garbage-first heap   total 31457280K, used 7507920K [0x00007fcb22800000, 0x00007fd2a2800000, 0x00007fd2a2800000)
  region size 8192K, 0 young (0K), 0 survivors (0K)
 compacting perm gen  total 524288K, used 152608K [0x00007fd2a2800000, 0x00007fd2c2800000, 0x00007fd2c2800000)
   the space 524288K,  29% used [0x00007fd2a2800000, 0x00007fd2abd082e8, 0x00007fd2abd08400, 0x00007fd2c2800000)
No shared spaces configured.
}

{Heap before GC invocations=399 (full 19):
 garbage-first heap   total 31457280K, used 13016093K [0x00007fcb22800000, 0x00007fd2a2800000, 0x00007fd2a2800000)
  region size 8192K, 54 young (442368K), 54 survivors (442368K)
 compacting perm gen  total 524288K, used 155475K [0x00007fd2a2800000, 0x00007fd2c2800000, 0x00007fd2c2800000)
   the space 524288K,  29% used [0x00007fd2a2800000, 0x00007fd2abfd4c70, 0x00007fd2abfd4e00, 0x00007fd2c2800000)
No shared spaces configured.
2013-01-14T15:31:36.484+0200: 32191.056: [Full GC 12711M->7543M(30720M), 29.5013210 secs]
 [Times: user=41.39 sys=0.06, real=29.50 secs]
Heap after GC invocations=400 (full 20):
 garbage-first heap   total 31457280K, used 7724994K [0x00007fcb22800000, 0x00007fd2a2800000, 0x00007fd2a2800000)
  region size 8192K, 0 young (0K), 0 survivors (0K)
 compacting perm gen  total 524288K, used 155475K [0x00007fd2a2800000, 0x00007fd2c2800000, 0x00007fd2c2800000)
   the space 524288K,  29% used [0x00007fd2a2800000, 0x00007fd2abfd4c70, 0x00007fd2abfd4e00, 0x00007fd2c2800000)
No shared spaces configured.
}

{Heap before GC invocations=476 (full 26):
 garbage-first heap   total 31457280K, used 14622246K [0x00007fcb22800000, 0x00007fd2a2800000, 0x00007fd2a2800000)
  region size 8192K, 27 young (221184K), 27 survivors (221184K)
 compacting perm gen  total 524288K, used 156716K [0x00007fd2a2800000, 0x00007fd2c2800000, 0x00007fd2c2800000)
   the space 524288K,  29% used [0x00007fd2a2800000, 0x00007fd2ac10b2b0, 0x00007fd2ac10b400, 0x00007fd2c2800000)
No shared spaces configured.
2013-01-14T18:46:41.545+0200: 43896.117: [Full GC 14279M->8107M(30720M), 31.6936770 secs]
 [Times: user=44.40 sys=0.18, real=31.69 secs]
Heap after GC invocations=477 (full 27):
 garbage-first heap   total 31457280K, used 8302054K [0x00007fcb22800000, 0x00007fd2a2800000, 0x00007fd2a2800000)
  region size 8192K, 0 young (0K), 0 survivors (0K)
 compacting perm gen  total 524288K, used 156551K [0x00007fd2a2800000, 0x00007fd2c2800000, 0x00007fd2c2800000)
   the space 524288K,  29% used [0x00007fd2a2800000, 0x00007fd2ac0e1fa0, 0x00007fd2ac0e2000, 0x00007fd2c2800000)
No shared spaces configured.
}

{Heap before GC invocations=522 (full 34):
 garbage-first heap   total 31457280K, used 16096219K [0x00007fcb22800000, 0x00007fd2a2800000, 0x00007fd2a2800000)
  region size 8192K, 30 young (245760K), 30 survivors (245760K)
 compacting perm gen  total 524288K, used 156869K [0x00007fd2a2800000, 0x00007fd2c2800000, 0x00007fd2c2800000)
   the space 524288K,  29% used [0x00007fd2a2800000, 0x00007fd2ac1315d8, 0x00007fd2ac131600, 0x00007fd2c2800000)
No shared spaces configured.
2013-01-14T22:31:40.711+0200: 57395.283: [Full GC 15718M->11933M(30720M), 42.0857250 secs]
 [Times: user=60.13 sys=0.07, real=42.08 secs]
Heap after GC invocations=523 (full 35):
 garbage-first heap   total 31457280K, used 12219927K [0x00007fcb22800000, 0x00007fd2a2800000, 0x00007fd2a2800000)
  region size 8192K, 0 young (0K), 0 survivors (0K)
 compacting perm gen  total 524288K, used 156869K [0x00007fd2a2800000, 0x00007fd2c2800000, 0x00007fd2c2800000)
   the space 524288K,  29% used [0x00007fd2a2800000, 0x00007fd2ac1315d8, 0x00007fd2ac131600, 0x00007fd2c2800000)
No shared spaces configured.
} 
```

其他类似问题报告：

[http://grokbase.com/t/openjdk/hotspot-gc-use/1192sy84j5/g1c-strange-full-gc-behavior](http://grokbase.com/t/openjdk/hotspot-gc-use/1192sy84j5/g1c-strange-full-gc-behavior) [http://grokbase.com/p/openjdk/hotspot-gc-use/123ydf9c92/puzzling -why-is-a-full-gc-triggered-here](http://grokbase.com/p/openjdk/hotspot-gc-use/123ydf9c92/puzzling-why-is-a-full-gc-triggered-here) [http://mail.openjdk.java.net/pipermail/hotspot-gc-use/2013-February/001484.html](http://mail.openjdk.java.net/pipermail/hotspot-gc-use/2013-February/001484.html)

我一直在使用 appdynamics profiler 分析这个问题，我发现每次发生 Full GC 时，代码缓存（配置为最大值）都是满的。这似乎是 GC 中的一个错误。

另请参阅分析器图像，在 24/5 和 25/5 之间的中间有两个不必要的 Full GC:s。更重要的是，它们扼杀了服务器的可用性，因为它们每个持续 60 秒：

[Profiler 日志图像 http://eisler.vps.kotisivut.com/logs/g1gc-code-cache-full-gc-bug-illustration.png](http://eisler.vps.kotisivut.com/logs/g1gc-code-cache-full-gc-bug-illustration.png)

另见关于 Azul 的无暂停 GC 的讨论，他们似乎已经解决了这类问题[http://www.artima.com/lejava/articles/azul_pauseless_gc.html](http://www.artima.com/lejava/articles/azul_pauseless_gc.html)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T15:05:14.040

请看我在 [G1GC long pause with initial-mark中的回复](https://stackoverflow.com/questions/14051323/g1gc-long-pause-with-initial-mark/14982456#14982456)

*你的每一个设置都应该有充分的理由来这里......不幸的是，其中一些没有，例如* `-XX:+UseBiasedLocking (used for combination of tenured and young generation GCs, but G1GC is capable to handle both) -XX:+DisableExplicitGC (its unpredictable, in my experience its never restrict explicit gc calls)`

请相应地使用/调整下面提到的设置以获得最佳结果，我为您提供了前进的基准，希望这些设置对您有用： [Java G1 垃圾收集在生产中](https://stackoverflow.com/questions/2254041/java-g1-garbage-collection-in-production/14983318#14983318)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-28T02:08:52.337

我们在 1.7._u06 上记录了这个 bug，并在几天前升级到 1.7.0_21-b11，自从升级以来我们还没有看到任何 Full GC，所以这个 bug 似乎在 JVM 中得到了修复。代码缓存内存配置文件现在在分析器中看起来也更好了。过去，这个问题曾经是每天一个，每天一到多次。

如果情况发生变化，我会回来报告。在那之前，我认为升级解决了这个问题。

# asp.net-mvc - 在 ASP.NET MVC 3 中使用 WebGrid 显示原始 HTML

> ID：14330330
> 
> 赞同：5
> 
> 时间：2013-01-15T02:40:46.087
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, razor-grid

我有一个这样的网格：

```
WebGrid grid = new WebGrid(source: Model, rowsPerPage: 5, ajaxUpdateContainerId: "GridContainer"); 
```

现在，我想将“MyContent”列显示为原始[HTML](http://en.wikipedia.org/wiki/HTML)。我应该怎么办？

```
<div id="GridContainer">
    @grid.GetHtml(columns:
        grid.Columns(
            grid.Column(
                columnName: "MyContent",
                //Format: What should I put here?
            )
        )
    )
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T02:45:12.670

利用

```
<div id="GridContainer">
    @grid.GetHtml(columns:
        grid.Columns(
            grid.Column(
                columnName: "MyContent",
                format: (item) =>
                    {
                       var links = Html.ActionLink("Edit",   "Edit",    new {id = item.PrimaryKey})  + " | " +
                                   Html.ActionLink("Details","Details", new { id = item.PrimaryKey}) + " | "+
                                   Html.ActionLink("Delete", "Delete",  new { id = item.PrimaryKey});

                       return Html.Raw(links);
                    }
                )
            )
        ) 
```

呈现为

```
<td>
    <a href="/Home/Edit/5">Edit</a> |
    <a href="/Home/Details/5">Details</a> |
    <a href="/Home/Delete/5">Delete</a>
</td> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-02T18:31:39.237

我认为使用模型中的注释要干净得多。

```
[GridColumn(Title="&nbsp;", SanitizeEnabled=false,EncodeEnabled=false)]
    public IHtmlString RateLink
    {
        get{
            return new HtmlString("<a href=\"" + BaseUrl + Id + "\" target=\"_blank\">Open</a>");
        }
    } 
```

如果您只使用注释，您的 html 只需要：

```
@Html.Grid(Model).AutoGenerateColumns() 
```

# java - 简单错误“（”预期

> ID：14330331
> 
> 赞同：0
> 
> 时间：2013-01-15T02:40:52.690
> 
> 标签：java

```
public void displayResults
{
    for(int i = 0; i < arrayLength; i++)
    {
          System.out.printf("Value %d = %.6f\n", i, list[i]);
    }

    System.out.printf("Sum of all values = %0.6f\n", sum);
    System.out.printf("Average of all values = %0.6f\n", average);
    System.out.printf("Largest value = %0.6f\n", largest);
    System.out.printf("Smallest value = %0.6f\n", smallest);
} 
```

我正在变老`error: '(' expected`

在`{`应该在的地方，我真的看不出我所拥有的有什么问题。盯着这个同样的错误差不多一个小时了。真的希望有一双新的眼睛能看到这个问题。

```
public void displayResults
 ==>   {
       for(int i = 0; i < arrayLength; i++)
       { 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T02:41:42.580

```
public void displayResults ()
                           ^^ 
```

即使没有参数，也需要添加参数列表括号。

# php - 用于双打的 PHP 模运算符

> ID：14330333
> 
> 赞同：3
> 
> 时间：2013-01-15T02:40:54.887
> 
> 标签：php, double, modulo

[我在这里](http://php.net/manual/en/language.operators.arithmetic.php#Hcom42066)读到：

> 具有非整数的模数将产生不可预测的结果。

然而，我试着[用它玩了一下](http://phpfiddle.org/main/code/qcb-ymi)，它似乎给出了相当可预测的结果：

```
function mod($a, $b) {
    echo "$a % $b = " . ($a % $b) . '<br>';
}
mod(10.3, 4);
mod(10.3, 2);
mod(-5.1, 3);

// OUTPUT:
//   10.3 % 4 = 2
//   10.3 % 2 = 0
//   -5.1 % 3 = -2 
```

换句话说，`double`似乎被转换为`integer`第一个。

`%`当第一个操作数是 时，是否有任何工作方式的定义`double`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T02:43:18.567

利用：

```
fmod(10.3, 4) 
```

我也必须做同样的事情，但我注意到双精度数被转换为 int 并且使用 fmod 返回一个双精度数。

如果这有帮助

来自[http://php.net/manual/en/language.operators.arithmetic.php](http://php.net/manual/en/language.operators.arithmetic.php)

`The result of the modulus operator % has the same sign as the dividend — that is, the result of $a % $b will have the same sign as $a.`

# android - 如何使用游标和交换值来打乱数据库表条目

> ID：14330334
> 
> 赞同：0
> 
> 时间：2013-01-15T02:41:11.503
> 
> 标签：android, database, sqlite, shuffle

这是一种基于特定列值随机打乱某些数据库表条目的简单方法。感谢**cbrulak**的帮助，它现在可以正常运行。它无论如何都不是最有效的，但我想我会在修复后发布它，因为有人可能会觉得它有点用。

```
/* The method will shuffle the specific entries in the table, based on column value */
public void shuffleDeck(int deck_id){

    int i, j, count;
    int loop1, loop2;
    int num;
    int id1, id2;
    Random rand = new Random();
    String front1, back1, front2, back2;

    /* Create two separate content values for swapping the values between the two rows */
    ContentValues updated_1 = new ContentValues();
    ContentValues updated_2 = new ContentValues();

    String[] columns = new String[]{CARD_ROWID, CARD_FRONT, CARD_BACK};

    /* Create two cursors pointing to the same query */
    Cursor cursor1 = Database.query(CARDS_TABLE, columns, DECK_ROWID + " = " + deck_id, 
            null, null, null, null);
    Cursor cursor2 = Database.query(CARDS_TABLE, columns, DECK_ROWID + " = " + deck_id, 
            null, null, null, null);

    cursor1.moveToFirst();
    cursor2.moveToFirst();

    int iRow = cursor1.getColumnIndex(CARD_ROWID);
    int iFront = cursor1.getColumnIndex(CARD_FRONT);
    int iBack = cursor1.getColumnIndex(CARD_BACK);

    /* Get total number of entries in the cursor */
    count = cursor1.getCount();

    /* Loop through  */
    for(i=1; i<=count; i++){
        num = rand.nextInt(count) + 1;

        /* Acquire the values from the current row that will be inserted into the randomly selected row */
        id1 = cursor1.getInt(iRow);
        front1 = cursor1.getString(iFront);
        back1 = cursor1.getString(iBack);

        /* Move to the next row in cursor2 for a random number of times */
        for (j=1; j<num; j++){

            cursor2.moveToNext();
            /* Fail safe to make sure it doesn't go out of bounds */
            if(cursor2.isLast())
                break;
        }

        /* Acquire the values from the random row */
        front2 = cursor2.getString(iFront);
        back2 = cursor2.getString(iBack);
        id2 = cursor2.getInt(iRow);

        /* Check to see if the second cursor is also pointing to the same position. */
        if(!(front1.equals(front2) && back1.equals(back2))){
            updated_1.put(CARD_FRONT, front2);
            updated_1.put(CARD_BACK, back2);
            updated_2.put(CARD_FRONT, front1);
            updated_2.put(CARD_BACK, back1);

            /* Call the database to UPDATE the values */
            Database.update(CARDS_TABLE, updated_1, CARD_ROWID + " = " + id1, null);
            Database.update(CARDS_TABLE, updated_2, CARD_ROWID + " = " + id2, null);

            /* Clear the content values */
            updated_1.remove(CARD_FRONT);
            updated_1.remove(CARD_BACK);
            updated_2.remove(CARD_FRONT);
            updated_2.remove(CARD_BACK);

            /* Requery the cursors */
            cursor1 = Database.query(CARDS_TABLE, columns, DECK_ROWID + " = " + deck_id, 
                    null, null, null, null);
            cursor2 = Database.query(CARDS_TABLE, columns, DECK_ROWID + " = " + deck_id, 
                    null, null, null, null);

            /* Move cursor1 to the same position it was, right before requerying it */
            for(loop1 = 1; loop1<=i; loop1++){
                cursor1.moveToNext();

                /* Fail save in case it tries to go out of bound */
                if(cursor1.isLast()) 
                    break;
            }
            /* Move cursor2 to the same position it was, right before requerying it */
            for(loop2 = 1; loop2<=j; loop2++){
                cursor2.moveToNext();

                /* Fail save in case it tries to go out of bound */
                if(cursor2.isLast()) 
                    break;
            }
        }
        /* Move the cursors to the new positions */
        cursor1.moveToNext();
        cursor2.moveToFirst();
    }
    cursor1.close();
    cursor2.close();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:56:25.743

更新后请求一个新的游标。

请参阅：[Android - 您可以为 SQLite 结果更新光标吗？](https://stackoverflow.com/questions/7973607/android-can-you-update-a-cursor-for-sqlite-results)

更重要的是：http: [//developer.android.com/reference/android/database/Cursor.html#requery()](http://developer.android.com/reference/android/database/Cursor.html#requery())（他们说要请求新的）

给您的奖励积分：使用内容提供商。为您节省大量头痛。

# winforms - DataGridView 单元格样式在一台机器上只读但在另一台机器上不读取？

> ID：14330336
> 
> 赞同：1
> 
> 时间：2013-01-15T02:41:32.500
> 
> 标签：winforms, datagridview

我有一个 Winforms .NET 程序并使用属性网格来编辑 DefaultCellStyle。这适用于我的开发箱，但我有一个在 VMware 下运行的测试，并且由于某种原因在这台机器上它是只读的。但是，我在其他机器下运行过它，以前没有见过。

我正在复制可执行文件，因此代码和所有属性都完全相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T02:47:37.107

我找到了答案。新机器只安装了 .NET 4.0，但没有安装 .NET 4.5。当我安装 .NET 4.5 时，即使它不需要 .NET 4.5 也可以运行。这是我看到的唯一“副作用”。很奇特。

# javascript - 将事件处理程序移动到单独的文档

> ID：14330337
> 
> 赞同：0
> 
> 时间：2013-01-15T02:41:40.033
> 
> 标签：javascript, html

我目前正在使用这个 HTML 代码：

```
<form onsubmit="return validateForm()" action="page.html" >
Name:  <input type="text" id="name" /><br />
Email: <input type="text" id="email" /><br />
<input type="submit" value="Submit" />
</form> 
```

但我想将我的事件处理程序移到我单独的 javascript 中，移到名为initial 的函数中。我的 javascript 看起来像这样：

```
function formValidator(){

    var name = document.getElementById("name");
    var email = document.getElementById("email");

    if(isAlphabet(name, "Fill in name"))
    {

        if(emailValidator(email, "Fill in email"))
        {
            return true;
        }
    }

    return false;

}

function isAlphabet(elem, helpMsg)
{
    var alphaExp = /^[a-zA-Z]+$/;
    if(elem.value.match(alphaExp))
    {
        return true;
    }
    else
    {
        alert(helpMsg);
        elem.focus();
        return false;
    }
}

function emailValidator(elem, helpMsg)
{
    var emailExp = /^[\w\-\.\+]+\@[a-zA-Z0-9\.\-]+\.[a-zA-z0-9]{2,4}$/;
    if(elem.value.match(emailExp))
    {
        return true;
    }
    else
    {
        alert(helpMsg);
        elem.focus();
        return false;
    }
}

function initiate {
    // ..
}
window.onload = initiate; 
```

到目前为止，我只知道如何编写代码以重定向到新网页，但它没有检查它是否是有效代码。我用过这个：

HTML

```
<form id="form">
Name:  <input type="text" id="name" /><br />
Email: <input type="text" id="email" /><br />
<input type="submit" value="Submit" />
</form> 
```

Javascript

```
document.getElementById("form").action = "page.html"; 
```

但我不知道如何编写以便 the`.action="page.html"`和 the`return validateForm()`都可以工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T02:56:27.063

您的表格需要`id`：

```
<form id="form">
Name:  <input type="text" id="name" /><br />
Email: <input type="text" id="email" /><br />
<input type="submit" value="Submit" />
</form> 
```

单独的 Javascript 文件：

```
function initiate()
{
    var form = document.getElementById("form");
    form.action = "page.html";
    form.onsubmit = function validateForm()
    {
        var name = document.getElementById("name");
        var email = document.getElementById("email");

        if(isAlphabet(name, "Fill in name"))
        {

            if(emailValidator(email, "Fill in email"))
            {
                return true;
            }
        }

        return false;
    };
}

window.onload = initiate; 
```

`validateForm()`如果某些内容未验证，请确保该函数返回 false。

# sockets - Solaris 11 上的套接字连接问题。

> ID：14330343
> 
> 赞同：0
> 
> 时间：2013-01-15T02:42:03.977
> 
> 标签：sockets, solaris, connect

在 Solaris 11 上，socket 连接到 localhost（端口 61024），并且没有人在这个端口（61024）上监听，但是 connect()/select() 返回成功。有谁知道为什么？

# javascript - jQuery 展开 折叠

> ID：14330348
> 
> 赞同：0
> 
> 时间：2013-01-15T02:42:24.600
> 
> 标签：javascript, jquery

我在使用 jquery 展开和折叠时遇到问题。

我计划在我的网站上有一个阅读更多功能，我想利用这个例子。

[http://www.designgala.com/demos/collapse-expand-jquery.html](http://www.designgala.com/demos/collapse-expand-jquery.html)

如果您可以看到单击标题会扩展内容并单击两次会产生最小化的结果，但我在这里的问题是显示部分内容，例如距 div 30px 的高度，当单击标题时，它会展开并显示整个内容.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T03:12:36.743

我创建了一个 jsfiddle，它展示了一种方法来做你想做的事情。

[http://jsfiddle.net/cSvAB/2/](http://jsfiddle.net/cSvAB/2/)

这是javascript：

```
$( '.section' ).each( function( index, value ){

    $( value ).data( 'height', $( this ).height() );
    $( value ).css( {height: 30} );
});

$( '.section .header' ).click( function(){

    if( $( this ).data( 'expanded' ) ){

      $( this ).parent().animate( {height: 30} );
      $( this ).data( 'expanded', false );
    }else{

      $( this ).parent( ).animate( {height: $( this ).parent().data( 'height' )} );
      $( this ).data( 'expanded', true );
    }
}); 
```

这是HTML：

```
<div class="section">
  <div class="header">Click to read more</div>
  <div>Lots of text here</div>
</div>

<div class="section">
  <div class="header">Click to read more</div>
  <div>Lots of text here</div>
</div> 
```

唯一重要的是 .section 被赋予 css 属性 overflow: hidden;

```
.section{ overflow: hidden; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-03T10:00:11.677

你想要的实际上是一架手风琴。如果您想要更专业的外观，可以使用 jQuery UI 的手风琴。这是：[jqueryui.com/accordion/](https://jqueryui.com/accordion/)

# r - R 中使用 nls() 和 SSlogis() 和 predict() 的未知错误消息

> ID：14330353
> 
> 赞同：3
> 
> 时间：2013-01-15T02:44:44.370
> 
> 标签：r, nls, predict

我正在使用 nls() 为多个鸟类种群的数据拟合一个逻辑模型（自启动；SSlogis）。我的目标是为数据拟合一个预期函数（仅使用每个数据集的一部分），并在图表上显示关于预期的方差的度量。然后，我想拟合并绘制观察到的函数（使用每个总体的整个数据集）以确定观察到的动态是否在期望的方差范围内。这是我目前为实现此目的而编写的代码：

```
 CE.mod = nls(CE.observed ~ SSlogis(t.CattleEgret, Asym, xmid, scal))

    with(collapse.data, plot(CE.time, CE.obs))

    CE.extrap = predict(CE.mod, data.frame(t.CattleEgret = CE.time))
    lines(CE.time, CE.extrap)

    CE.se.fit = sqrt(apply(attr(CE.extrap, "gradient"), 1, function(x) 
    sum(vcov(CE.mod)*outer(x,x))))

    matplot(CE.time, CE.extrap+outer(CE.se.fit, qnorm(c(0.5, 0.025, 0.975))),
    type = "l", lty = c(1,1,1), ylab = "Abundance (# per party hour)",
    xlab = "Time (year)", main = "Cattle Egret Collapse Analysis", 
    pch = 15, font.lab = 2, font.axis = 2, cex = 4, cex.lab = 1.5, 
    cex.axis = 2, cex.main = 2, frame.plot = FALSE, lwd = 4, 10)

    with(collapse.data, matpoints(CE.time, CE.obs, pch = 15, cex = 3))
    lines(CE.time, predict(nls(CE.obs ~ SSlogis(log(CE.time), 
    Asym, xmid, scal))), lty = 3, lwd = 4) 
```

哪里（来自“collapse.data”文件）：

```
 t.CattleEgret = c(1:20)
    CE.time = c(1:45)
    CE.obs = c(0.3061324, 0.0000100, 0.2361211, 0.5058240, 2.0685032, 2.1944544, 
               4.2689494, 4.9508297, 3.1334720, 3.6570752, 5.6753381, 10.9133183,
               5.4518257, 20.4166979, 15.9741054, 19.0970426, 13.7559959, 14.1358153, 
               15.9986416, 29.6762828, 10.3760667, 8.4284488, 6.1060359, 3.7099982, 
               3.3584060, 2.5981386, 2.5697082, 2.8091952, 5.5487979, 1.6505442,
               2.2696972, 2.1835692, 3.6747876, 4.8307886, 3.5019731, 2.8397137,
               1.8605288, 11.1848738, 2.6268683, 4.1215127, 2.3996210, 2.6569938, 
               2.1987387, 3.0267252, 2.4420927)
    CE.observed = c(0.3061324, 0.0000100, 0.2361211, 0.5058240, 2.0685032, 2.1944544, 
               4.2689494, 4.9508297, 3.1334720, 3.6570752, 5.6753381, 10.9133183,
               5.4518257, 20.4166979, 15.9741054, 19.0970426, 13.7559959, 14.1358153, 
               15.9986416, 29.6762828) 
```

该代码工作正常并产生如下图：

![牛背鹭塌陷分析](../Images/b84b06c1a3dffd29a9f24b88fe124e17.png)

但是，如果我从代码的最后一行中删除“log()”，以便编写以下代码：

```
 lines(CE.time, predict(nls(CE.obs ~ SSlogis(CE.time, 
    Asym, xmid, scal))), lty = 3, lwd = 4), 
```

该线不会绘制，我收到此错误：

```
 Error in nls(y ~ 1/(1 + exp((xmid - x)/scal)), data = xy, start = list(xmid = 
    aux[1L],  : step factor 0.000488281 reduced below 'minFactor' of 0.000976562 
```

即使我使用 nls.controls 并更改“minFactor”值，我也无法更改。我还在为某些人群定义 mod（##.mod 部分）的初始行之后收到此错误消息。

此外，对于某些人群，我在报告此问题的最后一行代码之后收到一条错误消息：

```
 Error in qr.solve(QR.B, cc) : singular matrix 'a' in solve 
```

我想不出自然对数转换数据的合理性，我只能假设我只是以允许 predict() 和 SSlogis() 的方式更改了数据（在这种情况下是任意记录的）功能正常，但我不知道为什么。对于此类问题，我无法在任何论坛中找到任何合适的答案。任何帮助将不胜感激。

***更新**：我已尝试按照 Roland 的建议实现 nlsLM 功能（如下）。这确实清理了使用令人​​困惑的 log() 的代码部分：

```
 lines(CE.time, predict(nlsLM(CE.obs ~ Asym/(1 + exp((xmid - CE.time)/scal)), start 
    = list(Asym = max(CE.obs), xmid = popsizetime[1], scal = 1), control = 
    nls.lm.control(maxiter = 1000)) 
```

但是，对于其他人群，我在初始模型规范中遇到了与上述相同的错误消息：

```
 ChMa.mod = nls(ChMa.observed ~ SSlogis(t.ChestnutMannikin, Asym, xmid, scal))

    Error in nls(y ~ 1/(1 + exp((xmid - x)/scal)), data = xy, start = list(xmid = 
    aux[1L],  : step factor 0.000488281 reduced below 'minFactor' of 0.000976562 
```

切换到：

```
 ChMa.mod = nlsLM(ChMa.observed ~ Asym/(1 + exp((xmid - t.ChestnutMannikin)/
scal)), start = list(Asym = max(ChMa.obs), xmid = popsizetime[2], 
scal = 1), control = nls.lm.control(maxiter = 1000)) 
```

在哪里

```
 ChMa.observed = c(4.02785074, 0.33847154, 0.99029776, 2.86516540, 0.59588068, 
    0.01334333, 2.07693362, 0.62485994, 3.48979515, 3.67785202, 20.84180181)
    t.ChestnutMannikin = c(1:11)
    popsizetime[2] = 11 
```

虽然此开关确实避免了错误消息，但 nlsLM 评估函数但不评估梯度。如果没有梯度评估，我无法使用 se.fit 代码，因此无法获得用于绘图的方差估计。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T02:45:43.983

我找到了问题的答案：我需要添加我的模型的一个组件，该组件为我正在使用 nlsLM 回归的函数生成渐变。

```
 log.model = function(t.RedventedBulbul, Asym, xmid, scal) {
            numericDeriv(quote(Asym/(1 + exp((xmid - t.RedventedBulbul)/scal))),
            c("Asym", "xmid", "scal"), parent.frame())
    } 
```

# java - 建立 SSL 连接时出现 EOFException 错误

> ID：14330354
> 
> 赞同：3
> 
> 时间：2013-01-15T02:44:45.587
> 
> 标签：java, ssl, eofexception

我正在用 java 编写一个程序，将官方发票信息发送到财政管理部门。该公共服务提供了证书以用于与 Web 服务的 SSL 连接，并加密请求正文消息中的一些特殊数据字段。

在客户端和服务器同意使用约定的密码套件（在本例中为 TLS_RSA_WITH_AES_128_CBC_SHA）进行通信后，我在握手阶段遇到 EOFException 错误。

遵循 SSL 协议，客户端使用新密码成功执行测试并将测试数据发送到服务器，因此服务器也可以重复相同的测试并确认它也能够加密和解密数据。并且此时服务器发送 EOFException。

这是 SSL 通信日志的最后一部分：

> ***向服务器发送一个快速确认，确认我们知道与我们刚刚发送的客户端证书对应的私钥......***
> 
> ***证书验证
> 
> [写入] MD5 和 SHA1 哈希：len = 262
> 
> *这里的二进制数据太大不显示*
> 
> 主要，写入：TLSv1 握手，长度 = 262
> 
> [原始写入]：长度 = 267
> 
> *这里的二进制数据太大不显示*
> 
> ***告诉服务器我们正在更改为新建立的密码套件。所有进一步的消息都将使用我们刚刚建立的参数进行加密。***
> 
> 主要，写入：TLSv1 更改密码规范，长度 = 1
> 
> [原始写入]：长度 = 6
> 
> 0000: 14 03 01 00 01 01
> 
> ***...并以成功结束***
> 
> ..完成的
> 
> ***我们发送一条加密的 Finished 消息以验证一切正常。***
> 
> 验证数据：{221、96、47、110、19、170、244、8、37、152、160、40}
> 
> ... ***客户端加密测试数据..***
> 
> [写入] MD5 和 SHA1 哈希：len = 16
> 
> 0000: 14 00 00 0C DD 60 2F 6E 13 AA F4 08 25 98 A0 28 .....`/n....%..(
> 
> 加密前填充明文：len = 48
> 
> 0000: 14 00 00 0C DD 60 2F 6E 13 AA F4 08 25 98 A0 28 .....`/n....%..(
> 
> 0010: 10 7F 85 11 EC 6D 5D ED 21 70 27 F4 DC 23 C0 9B .....m].!p'..#..
> 
> 0020：A7 6F C2 80 0B 0B 0B 0B 0B 0B 0B 0B 0B 0B 0B 0B .o.......
> 
> 主要，写入：TLSv1 握手，长度 = 48
> 
> *** ...并将测试数据发送到服务器，以便服务器可以进行相同的测试并确认可以建立加密通信（53 字节 = 48 来自测试数据 + 5 来自标头）***
> 
> [原始写入]：长度 = 53
> 
> 0000: 16 03 01 00 30 1C 17 08 0F 49 C9 6A 7A 8B 8C 48 ....0....I.jz..H
> 
> 0010: BA 57 2D CB 06 46 1E 65 61 7C 5F 74 F2 08 AB 12 .W-..F.ea._t....
> 
> 0020: 91 47 72 8C 8F 84 0A CB D7 29 E2 FD 84 B2 FD 9E .Gr......)......
> 
> 0030: 47 DC 13 60 B4 G...`。
> 
> **...并且服务器以 EOFException 错误响应**
> 
> 主要，收到EOFException：错误
> 
> 主要，处理异常：javax.net.ssl.SSLHandshakeException：远程主机关闭
> 
> 握手期间的连接
> 
> %% 无效：[会话 1，TLS_RSA_WITH_AES_128_CBC_SHA]
> 
> 主要，发送 TLSv1 警报：致命，描述 = handshake_failure
> 
> 加密前填充明文：len = 32
> 
> 0000: 02 28 BC 65 1A CA 68 87 79 84 5F 64 16 F5 28 72 .(.e..hy_d..(r
> 
> 0010: F7 8A 69 72 93 D8 09 09 09 09 09 09 09 09 09 09 ..ir............
> 
> 主要，写入：TLSv1 警报，长度 = 32
> 
> [原始写入]：长度 = 37
> 
> 0000: 15 03 01 00 20 0D 9A 35 18 B7 98 4B 7B AF 82 4E .... ..5...K...N
> 
> 0010: 1A EE 7D AC 5D D5 49 05 4E 74 B9 77 E4 CD 87 61 ....].I.Nt.w...a
> 
> 0020: 23 03 5C 9C 7E #...
> 
> 主要的，称为 closeSocket()
> 
> 主要，称为 close()
> 
> main，称为 closeInternal(true)

我不知道导致这种失败的原因是什么，以及如何以编程方式影响过程中这一步的结果。我尝试强制使用客户端和服务器都识别的其他密码，例如 SSL_RSA_WITH_RC4_128_MD5，但错误仍然存​​在。关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T02:54:17.413

> 关于如何解决这个问题的任何想法？

我建议您与运行该服务的人员联系，并让他们查看他们的日志，以了解他们的服务器在 SSL 设置期间关闭连接的原因。

^(（严格来说，服务器不会*“以 [an] EOFException 错误响应”*。它实际上是在关闭 TCP 连接并且客户端 Java 库正在抛出异常。您可能会从维护者那里得到更有帮助的响应如果您使用正确的术语，则服务。）)

# plsql - PLSQL 将特殊字符值从 Select 插入到表中

> ID：14330356
> 
> 赞同：0
> 
> 时间：2013-01-15T02:45:08.883
> 
> 标签：plsql

我正在使用带有插入的选择来添加以前的记录值。这需要我执行以下代码：

```
insert into My_table 
values ('a', select value_with_sp_char from table where criterion_to_guarantee_single_row=true), 'b','c') 
```

现在，只要 value_with_sp_char 有像 _,&,%,.,comma, 这样的字符，查询就会失败。

关于如何正确插入该值的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T04:12:09.447

是的，你是对的，我解决了这个问题。

我提出这个问题的方式并不完全真实。

我试图将值添加到这样的变量中

```
Declare
    lv_txt_var varchar2(255) := '';
Begin
    select value_with_sp_char into lv_txt_var from table where criterion_to_guarantee_single_row=true;
if (input_param = null)
    insert into table values ('a', lv_txt_var, 'b', 'c');
end if; 
```

当我使用上述查询时，由于特殊字符而失败。但是，当我修改它以使用选择查询时，它起作用了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T08:24:05.787

您真的不需要 PL/SQL 来进行此插入。最好这样写：

```
INSERT INTO table_a
SELECT 'a', value_with_sp_char, 'b', 'c'
FROM   table_b
WHERE  criterion_to_guarantee_single_row = true; 
```

# mysql - 在 MySQL 中查询存储为整数数组（Varchar）的游戏地图

> ID：14330363
> 
> 赞同：0
> 
> 时间：2013-01-15T02:45:36.947
> 
> 标签：mysql, sql, database

我正在尝试将有关游戏地图的信息存储在 MySQL 数据库中。为此，我将为每个包含整数数组的地图创建一个 VARCHAR 字段。这个整数数组可能包含 1000 个数字，对应于存储在数据库中的不同图形元素的 id。

例如，它可能包含一个像这样的二维数组（一个 3x3 单元格图）

```
1,1,4
2,5,6
1,1,1 
```

然后在我的数据库中会有一个像这样的表

```
tiles
id   |   file      |  desc          | other data //...
 1      grass.png     a grass tile
 2      water.png     a water tile 
```

当用户在数据库中查询地图时，我需要发送二维数组以及有关元素的信息。例如，如果数组包含数字 2，我需要返回信息，说明任何 id 为 2 的单元格都应绘制为水砖、文件名 water.png 等。

如何最好地有效地实施这一点？我真的不想在 php 中遍历整个数组，获取唯一的 id 值并在之后再次查询数据库以获取信息（对我来说似乎效率低下）。

我正在考虑拥有另一个包含唯一 id 的字段，其格式`4,1,2,5,6`会在 2d 数组更改时更新。如果这是一个好主意，我该如何使用它进行查询？下面这样的东西似乎对我不起作用

```
SELECT * FROM tiles WHERE id IN ( SELECT unique_ids FROM mapInfo WHERE id = ..) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T03:00:22.927

基本上，在列数据中使用逗号分隔的列表是非常不灵活的。每当您认为应该创建一个逗号分隔列表时，您可能应该创建一个新表并将该列表中的每个项目放在单独的行中，然后将该新表关联回原始表。

我建议您创建一个名为“单元格”的表格，其中包含以下列：

```
CREATE TABLE cell (
  row INT NOT NULL, 
  col INT NOT NULL, 
  tile_id INT NOT NULL,
  PRIMARY KEY (row, col)
); 
```

然后，您将使用如下图块信息查询二维数组：

```
SELECT c.row, c.col, t.*
FROM cell c
INNER JOIN tile t
  ON c.tile_id = t.id
ORDER BY c.row, c.col; 
```

如果您想拥有多个“级别”或“地图”，请在单元格表中添加一个 map_id 列，以便将它们分开。您还应该将该列添加到主键的开头，并且您会像这样查询：

```
SELECT c.row, c.col, t.*
FROM cell c
INNER JOIN tile t
  ON c.tile_id = t.id
WHERE c.map_id = 2  -- or whatever map you are looking for
ORDER BY c.row, c.col; 
```

您甚至可能想要保留一个地图表，以便您可以存储每个地图的名称，可能是尺寸（100x100、200x300 等）等。

只是一些想法。

# python - 使用 python 将 CSV 文件中的数据替换为来自 nslookup 的数据

> ID：14330366
> 
> 赞同：0
> 
> 时间：2013-01-15T02:45:48.143
> 
> 标签：python

所以基本上我有一个这样的CSV文件设置：

```
IP or HostName, Device Name,  Device Description
10.10.10.10,    Device A,     Firewall
10.10.10.11,    Device B,     Firewall
10.10.10.12,    Device C,     Firewall
VBHOST12C,      Device D,     VM 
```

我需要更正此列表，以便将主机名替换为 IP。我想我会让 Python 打开 csv，然后将 nslookup 用于有主机名而不是 IP 的行，并用该 IP 替换它们，并将其输出到新的更正的 csv。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T02:55:25.963

您所做的通常被称为“ping 扫描”，并且在谷歌上搜索 PythonPingSweeper 一词时获得了大量点击。

我在网上找到了这个，如果我声称我写了它，我会撒谎，我做了你在旧 DOS Batch 中寻找的东西，但 Python 不是我的事：

如果我违反了在此处附加脚本的一些礼貌规则，那么请默默地抱怨，因为这些人通常会抱怨没有上下文的单行 URL 响应。

[https://gist.github.com/4404340](https://gist.github.com/4404340)

```
#!/usr/bin/python

import time
import subprocess
import socket

class CannotResolve(Exception):
  pass

def resolve(host):
  start = time.time()
  try:
    ip = socket.gethostbyname(host)
  except Exception, e:
    import traceback
    traceback.print_exc()
    raise CannotResolve("Cannot resolve %s: %s" % (host, e))
  else:
    end = time.time()
    return (ip, (end-start)*1000)

def ping(host):
  cmd = ['ping', '-c', '1', host]
  start = time.time()
  try:
    p = subprocess.Popen(cmd, stdout = subprocess.PIPE, stderr = subprocess.PIPE)
    so, se = p.communicate()

  except Exception:
    # On error, return 0
    print "Error running %s" % cmd
    print "stderr:\n%s" % se
    return 0

  else:
    end = time.time()
    return (end-start)*1000

class Connection(object):
  def __init__(self, host, port):
    self.host = host
    self.port = port

  def connect(self):
    retries = 10

    for x in range(retries):
      try:
        self.sock = socket.socket()
        self.sock.connect( (self.host, self.port) )

      except Exception:
        import traceback
        traceback.print_exc()
        print "Retry %s" % (x+1)
        time.sleep(1)
      else:
        return True

      print "Giving up after %s attempts" % retries

  def send(self, msg):
    print "Send: %r" % msg
    self.connect()
    retries = 10
    for x in range(retries):
      try:
        self.sock.sendall(msg)
      except Exception:
        import traceback
        traceback.print_exc()
        print "Retry %s" % (x+1)
        time.sleep(1)
      else:
        return True
    print "Giving up after %s attempts" % retries

def main():
  delay = 1

  hosts = ["google.com", "stackoverflow.com"]

  conn = Connection('127.0.0.1', 2003)
  while True:
    for h in hosts:
      now = int(time.time())

      hostname = socket.gethostname()

      print "Resolving %s" % h
      try:
        ip, speedms = resolve(h)
      except CannotResolve, e:
        print "Cannot resolve", e
        # Zero values
        conn.send(
          "pings.%s.dns_%s %s %d\n" % (
            hostname, h.replace(".", "_"), 0, now))
        conn.send(
          "pings.%s.ping_%s %s %d\n" % (
            hostname, h.replace(".", "_"), 0, now))

        continue # Next host

      else:
        conn.send(
          "pings.%s.dns_%s %s %d\n" % (
            hostname, h.replace(".", "_"), speedms, now))

      now = int(time.time())
      print "Pinging %s (%s)" % (ip, h)
      p = ping(h)
      print "done"

      conn.send(
        "pings.%s.ping_%s %s %d\n" % (
          hostname, h.replace(".", "_"), p, now))

      time.sleep(delay)

if __name__ == '__main__':
  main() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T04:51:42.980

要将给定文件（或标准输入）中第一列中的主机名转换为 ip 并将结果打印到标准输出：

```
#!/usr/bin/env python
import csv
import fileinput
import socket
import sys
from multiprocessing import Pool

def ip(row):
    try:
        row[0] = socket.gethostbyname(row[0])
    except EnvironmentError:
        pass # return row as is if can't resolve address
    return row

def main():
    pool = Pool(20) # use concurrent connections
    rows = pool.imap(ip, csv.reader(fileinput.input()))
    csv.writer(sys.stdout).writerows(rows)

if __name__=="__main__":
    main() 
```

# android - android的百度地图是什么样的

> ID：14330367
> 
> 赞同：0
> 
> 时间：2013-01-15T02:46:21.373
> 
> 标签：android

我想知道 baidu lacate 和 gps locate 还是 wifi locate 是一样的，gps locate 和 baidu locate 有什么不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:23:07.407

几个月前我被派往中国工作。并且我已经试用了适用于 Android 的百度地图 API（从原来的谷歌地图 API 切换）。其背后的主要原因是位置。

在谷歌中使用默认查找当前位置不会显示我在地图上的正确位置。谷歌和百度的经纬度是有区别的。百度地图将显示更准确的当前位置。最重要的是，我还找到了显示纬度和经度与正确的差异的网站。（但我觉得很麻烦）

例如，[在这个文件中](http://www.doc88.com/p-908538504653.html)（希望你能看懂中文，如果不是我可以为你做一些翻译；））

如果纬度和经度读数来自 GPS（您知道 Android 是 Google 的移动版本），您将需要进行转换。

我已经在三星 Galaxy S2 和 HTC T528 上进行了测试。两款手机都显示出经纬度的差异。

希望这会有所帮助。

# php - Facebook 分享者 URL 被截断

> ID：14330369
> 
> 赞同：0
> 
> 时间：2013-01-15T02:46:37.927
> 
> 标签：php, facebook, facebook-sharer

我的网站上有以下链接，我想与包含的 php 值共享我的页面。Facebook 会在之后切断一切`xxxxx.com`吗？任何想法为什么？

```
<a  data-role="button" class="facebook" 
   href="http://www.facebook.com/sharer.php?u=http://xxxx.com/eventview.php?eventid=
   <?php echo $_GET['eventid']?>"  title="Share this xxxx Event on Facebook" ></a></li> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T03:02:30.447

首先是评论：`sharer.php`端点已经被弃用了一段时间。我不会使用它开发新网站。您应该改用[Feed 对话框](https://developers.facebook.com/docs/reference/dialogs/feed/)。

对于内容被切断的问题，您`og:url`在页面上是否有一个仅显示的标签`xxxxx.com`？如果是这样，这是您页面的规范网址。Facebook 会将每一页视为该页的副本。您需要将上面显示的完整路径引用为页面的规范 url。如果您在[调试器](https://developers.facebook.com/tools/debug/)中检查页面，您将看到这一点。

# c++ - C/C++ 是一种语言还是两种语言？

> ID：14330370
> 
> 赞同：32
> 
> 时间：2013-01-15T02:46:40.610
> 
> 标签：c++, c, c++-faq

C/C++ 是一种语言还是两种语言？我听说 C++ 只是带有类的 C。那正确吗？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-01-15T02:51:14.187

[C++](http://en.wikipedia.org/wiki/C++)在 1982-1983 年从 C 中分离出来，这在计算机时代已经很长一段时间了。但是，有许多 C 库与 C++ 兼容，包括 C 标准库本身，并且源源不断的程序从 C 移植到 C++。许多 C 程序员只知道或使用与 C++ 兼容的特性。

它们由不同委员会的不同 ISO 标准定义。即使他们定义了兼容的特性，它也经常用不同的术语来定义。

提及 C/C++ 与提及意大利语/西班牙语一样有效。您应该小心使用此类术语的对象和时间。但确实存在两个方向的思想传播，并且相似之处不仅仅是巧合。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-01-15T02:49:09.260

“C/C++”恰好是零种语言。它不存在。

另一方面，C 是一种语言。

C++ 是另一种语言，它有点像 C，但也有类和*许多其他差异*。

* * *

需要明确的是，@Zoidberg 出现在：

> C 和 C++ 是两种完全不同的语言。C with Classes 是 C++ 的前身，但该术语仍然经常用于非现代 C++（例如，到处使用原始指针）。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2013-01-15T02:49:01.793

它是两种语言。将 C++ 称为“C with classes”就像将大象称为四足动物。在您将其与鼠标进行比较之前，它似乎是正确的。

有许多从 C 派生的语言：C++、Java、C#、JavaScript、csh，不胜枚举。它们在许多方面都不同，但它们共享相似的语法。

当然 C 是从 B 派生的。但那是另一回事了（现在没人关心 B了。）

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-01-15T02:51:55.880

简单的答案：**两种语言**

它们是两种不同的语言，尽管几乎所有 C 代码都是有效的（不一定是好的）C++ 代码。

C++ 最初被认为是“C，但有类”，但随着时间的推移，它变得越来越不同，现在 C 代码是非常糟糕的 C++ 代码。您可以学习 C 或 C++ 或两者兼而有之，但**通常**不会将它们混淆（但您可以）。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-01-15T21:54:04.013

它们是两种不同的语言。C++ 之所以如此命名，是因为它的一部分源于 C，并且在某种意义上与 C 兼容。

根据 Scott Myers 的 Effective C++，我们可以将 C++ 视为具有以下 4 个组件的统一语言：

1.  C语言部分、块、语句、预处理器等
2.  面向对象的C++：包括类、封装、继承、多态等
3.  模板 C++：包括 C++ 模板、元编程的东西
4.  STL。

所以从某种意义上说，C++ 比 C 更强大。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-01-15T04:06:52.893

C/C++ 是两种语言。C 是一种语言，而 C++ 是另一种语言。C++ 被认为是“更好”的 C。C 是过程性的，而 C++ 是面向对象的。C++ 比 C 有很多改进，并且具有与 C 相似的语法。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-06-04T15:16:27.107

[“C”](http://en.wikipedia.org/wiki/C_(programming_language))这个名字是指一系列相关的语言，其中一些被正式化为国际标准。这些包括[K&R C](http://en.wikipedia.org/wiki/C_(programming_language)#K.26R_C)、[ANSI C](http://en.wikipedia.org/wiki/ANSI_C)、[C99](http://en.wikipedia.org/wiki/C99)和[C11](http://en.wikipedia.org/wiki/C11_(C_standard_revision))。

[“C++”](http://en.wikipedia.org/wiki/C%2B%2B)这个名字是指一系列相关的语言，其中一些被形式化为国际标准。这些包括 C++98、 [C++03](http://en.wikipedia.org/wiki/C%2B%2B03)、 [C++11](http://en.wikipedia.org/wiki/C%2B%2B11)、 [C++14](http://en.wikipedia.org/wiki/C%2B%2B14)和推测的[C++17](http://en.wikipedia.org/wiki/C%2B%2B17)。

*许多人使用*术语“C/C++”来非正式地指代 C 和 C++ 的交集，[由 C++ 的设计者有意维护](http://en.wikipedia.org/wiki/Compatibility_of_C_and_C%2B%2B)。

C++ 的直接前身实际上最初被称为“C with Classes”。这在 Bjarne Stroustrup 1994 年出版的“C++ 的设计和演变”一书中有详细说明（以及[这里](http://www.stroustrup.com/hopl2.pdf)）。这个名字最终改为“C++”，主要是为了对 C 社区的礼貌，因为人们将“C with Classes”缩短为“C”或“new C”变得太诱人了。

C++ 中有许多 C 语言没有的语言特性（反之亦然）。特别是，[基于类的模型](http://en.wikipedia.org/wiki/C%2B%2B_classes)，由于其调用隐式函数调用的能力，非常强大，以至于 C++ 已经（相当有机地）发展了更高级别的编程风格，这使得 C++ 的典型用法与 C 的用法*大不相同*。这方面最值得注意的例子与称为[*资源获取即初始化*](https://stackoverflow.com/questions/2321511/what-is-meant-by-resource-acquisition-is-initialization-raii)的概念相关联，该概念体现在标准类 [string](http://en.cppreference.com/w/cpp/string/basic_string)、[vector](http://en.cppreference.com/w/cpp/container/vector)和[shared_ptr](http://en.cppreference.com/w/cpp/memory/shared_ptr)以及[标准 I/O 库](http://en.cppreference.com/w/cpp/io)的流类中。

其他注意事项：

*   GCC[允许您指定](https://gcc.gnu.org/onlinedocs/gcc/C-Dialect-Options.html#index-std-108)要针对哪些语言变体进行编译（我敢肯定，其他编译器也是如此），但有一些限制。

*   C++98 和 C++03 的功能差异很小，通常被视为[本质上相同的语言](https://stackoverflow.com/questions/8285777/is-c03-a-new-version-of-the-c-standard-or-just-a-technical-corrigendum-tc)。

*   解决 C 和 C++ 的公共子集的热门问题：

    *   [在 C++ 源代码中，extern "C" 的作用是什么？](https://stackoverflow.com/questions/1041866/in-c-source-what-is-the-effect-of-extern-c)
    *   [C 哪里不是 C++ 的子集？](https://stackoverflow.com/questions/1201593/c-subset-of-c-where-not-examples)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-01-15T21:24:50.640

恕我直言，我认为答案是 C/C++ 不是一种语言，而是两种语言：

*   C 编程语言
*   C++ 编程语言

C++ 语言是从 C 语言衍生而来的。C++ 是添加了“类”功能的 C 编程语言的名称。这意味着基本的 C 语言体系结构已得到增强，可以进行面向对象的编程。它使用表示增量的“++”运算符。C++是C的一个增量，它允许您在编程方式中使用过程方式或面向对象方式或两者兼而有之。C++ 让我们比 C 更容易编写代码。但这并不意味着 C 语言现在不适合，因为我们有 C++。每种语言都用于实现程序员所需的软件目的。这就是 ANSI 将 C 设为标准的原因。

[参考](http://www.authenticsociety.com/blog/C_plusplus_History)

# jquery - Jquery mobile向左滑动两次

> ID：14330371
> 
> 赞同：3
> 
> 时间：2013-01-15T02:46:53.377
> 
> 标签：jquery, cordova, jquery-mobile, swipe

我有一个非常简单的用例。

在页面初始化加载一个html。

```
 $(document).on('pageinit',function(){
                window.localStorage.setItem("page",'intro_1');                              
                $('#navigation_main').load('html/intro_1.html');

            }); 
```

在滑动时只需更改 dom。

```
 var flag = 0;
              $("body").bind("swipeleft",function(event) {
                flag +=1;                               
                page = window.localStorage.getItem("page"); 
                alert(flag);            
                switch(page){
                    case 'intro_1':                         
                        window.localStorage.setItem("page",'intro_2');
                        $('#navigation_main').load('html/intro_2.html');                        
                        break;  

                    case 'intro_2':
                        window.localStorage.setItem("page",'challenges');
                        $('#navigation_main').load('html/challenges.html');                     
                        break;  

                    case 'challenges':
                        window.localStorage.setItem("page",'risk_areas');
                        $('#navigation_main').load('html/risk_areas.html');                     
                        break;

                    default:
                        window.localStorage.setItem("page",'intro_1');                              
                        $('#navigation_main').load('html/intro_1.html');
                        break;  
                }

            }); 
```

现在这个向左滑动被触发了两次，导致后续页面被加载。我怎样才能阻止这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T03:33:24.283

您可以尝试`$("body").one`而不是`$("body").bind`只调用一次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T11:55:42.740

我假设您已多次绑定事件，它可以通过几种方式解决。

1.  使用**$(body).unbind();** 在绑定事件之前。Unbind 将删除所有已绑定的事件。不幸的是，这不是一个好的预防措施，因为您不断地绑定/取消绑定，从而导致大量处理开销。

2.  除了使用事件绑定/取消绑定、live/die 和 on/off 之外，还有另一种方法。不要在再次绑定之前取消绑定，而是使用 jQuery 事件过滤器，它可以用来识别事件是否已经被绑定。不要忘记从下面发布的链接下载它（它不是 jQM 的标准部分）。

    [http://www.codenothing.com/archives/2009/event-filter/](http://www.codenothing.com/archives/2009/event-filter/)

    这是我的使用示例：

    ```
    $('#carousel div:Event(!click)').each(function(){
        //If click is not bind to #carousel div do something
    }); 
    ```

    我正在使用每个，因为我的轮播 div 有很多内部块，但原理是相同的。如果#carousel 内部 div 元素没有点击事件，则添加该事件。在您的情况下，这将防止多个事件绑定。

# syntax - 是否有不使用“=”表示将其设置为该值的语言？

> ID：14330373
> 
> 赞同：-1
> 
> 时间：2013-01-15T02:47:12.193
> 
> 标签：syntax

今天我在思考编程风格和等号，以及当人们不在他们周围放置空格时它看起来多么糟糕，这让我思考：

**是否存在不（主要）通过“=”符号表示设置值的语言？**

并不是要硬塞进去，但是有没有使用“=”进行比较操作的语言（而不是“==”）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T02:50:36.217

维基百科有一张很棒的表格，显示了各种语言的运算符：[http](http://en.wikipedia.org/wiki/Assignment_(computer_science)#Notation) ://en.wikipedia.org/wiki/Assignment_(computer_science)#Notation 。

下面复制的表格（截图）：

![在此处输入图像描述](../Images/afb1bcdd72b87475e8c7afe512f76ae0.png)

![在此处输入图像描述](../Images/f84c0ff00960571d020735be68f2157b.png)

![在此处输入图像描述](../Images/b5057eca08d099517cb66464208ecd75.png)

[来自维基百科](http://en.wikipedia.org/wiki/Assignment_%28computer_science%29#Notation)的所有表格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T02:52:49.000

当然！例如，许多 LISP 系列语言以从左到右的模式表达赋值（和其他操作）

```
(set! x (+ 1 2 3)) 
```

这称为*前缀*表示法，而`x = 1 + 2 + 3`另一种语言可能会是中*缀*表示法。未使用该符号的事实`=`是次要的，并且可能更多是因为它在前缀符号中看起来比其他任何东西都奇怪。

POSIX Shell 及其变体`=`在一种上下文中用于赋值，但在另一种上下文中用于比较，如在`[`命令之后：

```
[ "$x" = "abc" ] 
```

顺便说一句，`sh`不关心你的审美：如果你`=`用于赋值，你最好不要包含空格！

```
$ z = 1
-bash: z: command not found 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T02:48:39.960

是的，Pascal`:=`用于赋值。

Visual Basic`=`用于比较和赋值。

# regex - Pig Hadoop MATCHES 默认？

> ID：14330380
> 
> 赞同：1
> 
> 时间：2013-01-15T02:48:11.223
> 
> 标签：regex, hadoop, match, apache-pig

每个 RegExp 都略有不同。当谈到 Pig 的`match`功能时，会：

```
X = FILTER A BY (f1 matches 'apache'); 
```

==

```
X = FILTER A BY (f1 matches '^apache$'); 
```

或者

```
X = FILTER A BY (f1 matches '.*apache.*'); 
```

? 换句话说，是`.*`自动隐含在 a`match`中还是总是需要包含在内？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T02:51:34.197

Pig 中的正则表达式格式是 Java 支持的格式，如此处[所述](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/regex/Pattern.html)。

换句话说，没有任何暗示，如果您想像`.*`在`matches`Java 中的`Pattern.compile`.

# android - 单个项目上的 Android StickyListHeaders

> ID：14330381
> 
> 赞同：1
> 
> 时间：2013-01-15T02:48:21.333
> 
> 标签：android, android-layout, android-listview

我正在使用库[StickyListHeaders](https://github.com/emilsjolander/StickyListHeaders#stickylistheaders)，我很难弄清楚如何让它适用于我的特定应用程序。我只想在第二个列表项上有一个粘性标题。当我覆盖 getHeaderId() 方法并返回 1 时，它会将标题放在列表的最顶部，而不是第二项的顶部。滚动也很跳跃。有没有人使用这个库取得了一些成功，可能知道发生了什么？

我正在使用 MergeAdapter，那么这是否会导致获取我设置的 ListView 的位置时出现问题？

这是我的适配器代码：

```
private class ProfileMergeAdapter extends MergeAdapter implements StickyListHeadersAdapter{

    @Override
    public View getHeaderView(int position, View convertView, ViewGroup parent) {

        LayoutInflater nameInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = (RelativeLayout) nameInflater.inflate(R.layout.name_line, null);
        convertView.setLayoutParams(new LayoutParams(RelativeLayout.LayoutParams.MATCH_PARENT, RelativeLayout.LayoutParams.WRAP_CONTENT));
        profilePhotoBottom = (ImageView) convertView.findViewById(R.id.profile_pic_bottom);
        TextView userName = (TextView) convertView.findViewById(R.id.userName);
        userName.setText(Utility.userName);
        profilePhotoBottom.setImageBitmap(photoBMPbot);
        return convertView;
    }

    @Override
    public long getHeaderId(int position) {
        return 1;
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T14:23:30.983

> @Override public long getHeaderId(int position) { return 1; }

如果您在此处返回 1，则每个项目（在每个位置）的 headerId 都将为 1。因此，您只会在最顶部获得一个标题。这种行为是正确的。

您应该只为应该分组在同一标题下的项目返回相同的 id。例如，如果您要返回 position/3; 每三个项目都会有一个标题。

希望这可以解决问题:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-17T15:16:12.490

您将需要遵循他们的示例，因为他们完全按照您希望在他们的示例中执行的操作：

```
@Override
public long getHeaderId(int position) {
  if (position == 0) {
    return -1;
  } else {
    return 1;
  }
} 
```

这将跳过第一个位置并返回位置 1 的标题。

# c++ - MinGW 错误：不存在这样的文件或目录

> ID：14330383
> 
> 赞同：3
> 
> 时间：2013-01-15T02:48:33.690
> 
> 标签：c++, compilation, mingw

我在 Windows XP SP3 上运行 MinGW。我用 C++ 编写了一个简单的程序并将其保存为 .cpp 文件。当我尝试在 MinGW 中的正确目录中编译它时，出现一条消息，说“错误：不存在这样的文件或目录”，但我知道它在正确的目录中。

这是我在 MinGW 中输入的

```
cd C:\MinGW test  # Where I saved the .cpp file
g++ test.cpp -o test.exe 
```

之后出现错误。

我也确实将环境设置路径更改为 C:\MinGW\bin

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T03:01:42.700

为了让它工作，你应该从程序所在的文件夹运行编译器，而不是 MinGW 所在的文件夹。首先，您需要将 PATH 设置为包含 MinGW。您可以`set PATH = C:\MinGW\bin;%PATH%`在命令行上执行此操作。

然后，`cd`到程序所在的地方运行`g++ test.cpp -o test.exe`编译，`test`运行。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T03:00:11.960

`cd C:\MinGW test`看起来不对。

你的意思是`cd C:\MinGW\test\`？

另请记住，您必须`C:`在执行之前单独更改驱动器`cd`。你的提示说什么？它会告诉你你在哪个目录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T03:03:39.350

Windows 抱怨 mingw 编译器 (g++) 不在路径中。

通过转到控制面板-> 系统-> 高级系统设置-> 高级-> 环境变量将其添加到您的路径

查找 PATH 变量并对其进行编辑。最后添加分号分隔符，然后添加到 MingW bin 文件夹的正确路径。然后关闭，然后重新打开命令提示符。如果您现在单独键入 g++，它应该会抱怨您没有输入文件。然后使用您之前尝试过的命令。

# jquery - 隐藏一个 当导航链接悬停时

> ID：14330387
> 
> 赞同：-4
> 
> 时间：2013-01-15T02:49:02.863
> 
> 标签：jquery, html, css, drupal, superfish

当链接悬停时，我试图隐藏一个`<p>`元素。该网站正在运行`drupal`，我正在使用`superfish`导航栏的模块。当我将鼠标悬停在导航链接上时，辅助导航栏会下降。

我想要发生的是当辅助导航栏下降以使网站的标语消失时。换句话说，我希望辅助导航栏掩盖或取代口号。关于如何让它发挥作用的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T03:01:10.010

您可以使用 JavaScript，如下所示：

```
<a href="#" id="hoverthis" onmouseover='document.getElementById("disappear").style.display="none";'>When you over this, the second div with disappear.</a>

<p id="disappear">I will disappear when hoverthis is hovered.</p> 
```

上面的脚本设置元素（在本例中为`p`）以将 CSS 代码应用`display:none`到 id 的 div `disappear`。您可以设置 JavaScript 以虚拟地应用任何 CSS 属性。就像您可以使用 JavaScript 使 div 重新出现一样。这也可以使用 jQuery 来完成，如下所示：

```
$('#disappear').hide(); 
```

或从 DOM 中删除：

```
$('#disappear').remove(); 
```

或让它重新出现：

```
$('#disappear').show(); 
```

这是速记。你也可以设置 jQuery 来做这样的事情：

```
$('#disappear').css("display","none"); 
```

使用上面的代码，就像纯 JavaScript 解决方案一样，可以编辑以应用任何 CSS 属性。

您可以编辑此脚本以满足您的需要。告诉我这是否有效，或者您是否需要进一步的帮助。

如果这对您有帮助，请记住单击此答案附近的检查。这真的很有帮助。谢谢。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T03:05:26.763

那么这里是一个如何做你正在谈论的事情的例子。

```
$(document).ready(function(){
    $('a').live({
        mouseenter:function(){
            $('p').hide();
        },
        mouseleave:function(){
            $('p').show();
        }
    });
}); 
```

显然你会使用更具体的选择器。

小提琴[示例](http://jsfiddle.net/mtbottens/t6JVH/)

# asp.net-mvc-3 - MVC 3 按钮单击

> ID：14330389
> 
> 赞同：2
> 
> 时间：2013-01-15T02:49:14.290
> 
> 标签：asp.net-mvc-3, visual-studio-2010, buttonclick

我是 MVC 环境的新手，我正在研究在 VS 2010 中创建的 MVC3 示例应用程序（文件 -> 新建 -> 项目 -> MVC3 Web 应用程序）。

此应用程序在网页右上角有一个“登录”链接。单击登录页面会显示一个页面，其中包含您的基本用户 ID 和密码文本字段以及一个提交按钮。

在LogOn.cshtml页面中，提交按钮的html代码为：

```
 <p>
        <input type="submit" value="Log On" />
    </p> 
```

在 AccountController.cs 页面上，`public ActionResult LogOn(LogOnModel model, string returnUrl)`函数被调用。

**问题：*****提交按钮***如何知道要调用 AccountController.cs 上的哪个函数？

我的困惑是由于在 aspx 页面中可能有一个 Button.OnClick 方法，它告诉按钮要执行什么功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T02:59:00.633

通过路由引擎。该应用程序将具有类似于

```
routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

routes.MapRoute(
  "Default", // Route name
  "{controller}/{action}/{id}", // URL with parameters
  new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
); 
```

在这种情况下，表单使用的操作本质上是 /Account/LogOn。查看主要路线，这将转换为控制器 =“帐户”和操作 =“登录”。

这是机制的鸟瞰图。[ASPNET MVC](http://www.asp.net/mvc)站点有一系列很棒的教程来描述 MVC 的基础知识。

**编辑**

在 HTML 中，提交按钮用于将表单数据发送到服务器。数据被发送到表单的 action 属性中指定的页面。action 属性中定义的文件通常对接收到的输入做一些事情：

html代码

```
<input type="submit" value="Log On" /> 
```

将被包裹在cshtml页面中的一个form标签中

```
@using (Html.BeginForm(new { ReturnUrl = ViewBag.ReturnUrl })) {
   //html here
} 
```

在浏览器中呈现时，表单标签看起来像

```
<form action="/Account/Logon" class="form-horizontal well" method="post" novalidate="novalidate">
<input id="ReturnUrl" name="ReturnUrl" type="hidden" value="/"> 
<!-- other HTML elements here -->
<input type="submit" value="Log On" />     
</form> 
```

因此，当单击提交按钮时，表单被发布（HTTP Verb POST）到表单标签的 action 属性中的 url。在这种情况下/帐户/登录。

更多信息可以在[W3C 表单推荐中阅读](http://www.w3.org/TR/html401/interact/forms.html)

从 WebForms 到 MVC 的最大一步是 WebForms 从开发人员那里抽象出很多底层 HTML 规范。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T05:16:39.990

单击 mvc 中的提交按钮时，表单将被提交给在我们的表单动作属性中定义的动作。如果表单中未定义操作，它将提交表单到相同的操作名称，它来自哪个过滤器是 [Httppost]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T05:33:57.803

嗨，我会给你一个像下面这样的例子

在您的控制器中，您有 2 种操作方法，例如（在示例中，我有国家控制器）

```
(1) 

            [HttpGet]
            public ActionResult Create()
            {
                return View();
            }
(2)
        [HttpPost]
        public ActionResult Create(Country country)
        {
            if (ModelState.IsValid)
            {

                CountryRepository.InsertOrUpdate(country);
                CountryRepository.Save();                    
                 return RedirectToAction("Index");
            }

            return View(country);
        } 
```

在 asp.net web 表单中，您正在使用页面加载功能。在 mvc [HttpGet] Create Action 中，您使用的方式与页面加载功能相同。

在你看来

```
@using (Html.BeginForm("Create", "Country", FormMethod.Post))
{
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Country</legend>
        @Html.Partial("_CoutnryAddOrEdit", Model)
        <p>
            <input type="submit" value="Create" id="btnSave" />
        </p>
        <br />
        <p>
            <input type="submit" value="GetData" id="btnGetData" />
        </p>
    </fieldset>
} 
```

在 Html.BeginForm 函数中有不同的参数。在该函数中，您传递参数值，例如第一个参数是您的“动作名称”，第二个是“控制器名称”，第三个是“您的 FormMethod，如 GET 或 POST”

1) Get=> Get 方法在您的页面 Lode 时调用

2) POST => 单击按钮后调用的 Post 方法。

所以你的 Html.BeginForm 看起来像这样 Html.BeginForm("Create","Country",FormMethod.Post)。

因此，在单击您不会执行任何操作的按钮后，您将所有代码都写在 Post Method 上。

我想这会对你有所帮助。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-15T06:00:20.553

我建议您使用 jquery 处理 ajax 帖子来处理按钮单击事件。试试下面的方法。

```
 <input type="button" value="Button 1" class='button1' /> 
```

[脚本]

```
 <script type="text/javascript">

    $('.button1').click(function () {

    $.ajax({
       type: "POST",          
       url: '@Url.Action("ActionName", "ControllerName")',
       dataType: "html",
       success: function (result) {
          // after the post action
       }
    });
 }); 
```

# c - 错误：需要一个标识符

> ID：14330390
> 
> 赞同：1
> 
> 时间：2013-01-15T02:49:23.113
> 
> 标签：c, random, identifier

使用 Visual Studio 时出现以下错误：

41 IntelliSense：需要一个标识符

我不知道这是要说什么，任何帮助将不胜感激！:D

这是程序：

```
#include <stdio.h>
#include <math.h>

int
main(void)
{
         long long d;
     long long p;

     //Ask for numbers of days as long as input is not between 28 and 31

    do
    {
    printf("How may days are in your month?\n");
    d = GetInt();
    }
    while (d<28 || d>31);

    //Ask for numbers of pennies for day 1 as long as input is negative

    printf("How many pennies do you have");
    do
    {
        p = GetInt();
    }
    while ("p<0");

    //Sum up the pennies, pennies = (pennies*2)*2..*2

    int 1;
    for (i=0; i<= d-1; i++);
        {

            p=p*pow(2,i);
        }       
    printf("%lld\n", p);
    return 0;
}` 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T02:54:55.583

```
int 1;
for (i=0; i<= d-1; i++); 
```

在这里`int 1;`，编译器正在寻找一个变量名，例如`int x = 1;` 现在 for 循环，`;`从末尾删除它

在`main`您拥有的前两行内

```
long long d;
long long p; 
```

这`long`是一种类型，因此将这些行更改为

```
long d;
long p; 
```

在你文件的末尾我看到`}'`了，这里删除`'`字符

另外，我可以看到你有`while ("p<0");`while 条件，这里`"p<0"`是一个字符串，你可能想把它改成`p<0`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T02:59:49.137

您可能还想更换

```
while ("p<0"); 
```

和

```
while(p<0); 
```

（不带引号）。

# javascript - 绑定已经绑定到另一个元素的函数

> ID：14330393
> 
> 赞同：0
> 
> 时间：2013-01-15T02:50:11.130
> 
> 标签：javascript, jquery, jquery-selectors, jquery-events

我有一堆元素得到三个不同的类`neutral`：`markedV`和`markedX`。当用户单击这些元素之一时，类会切换一次：中性 -> 标记V -> 标记X -> 中性。每次点击都会切换类并执行一个功能。

```
$(document).ready(function(){
  $(".neutral").click(function markV(event) {
    alert("Good!");
    $(this).addClass("markedV").removeClass("neutral");
    $(this).unbind("click");
    $(this).click(markX(event));
  });
  $(".markedV").click(function markX(event) {
    alert("Bad!");
    $(this).addClass("markedX").removeClass("markedV");
    $(this).unbind("click");
    $(this).click(neutral(event));
  });
  $(".markedX").click(function neutral(event) {
    alert("Ok!");
    $(this).addClass("neutral").removeClass("markedX");
    $(this).unbind("click");
    $(this).click(markV(event));
  });
}); 
```

但显然这行不通。我认为我有三个障碍：

1.  如何正确地将更改的元素绑定到已经定义的函数，有时在它实际定义之前？

2.  如何确保将事件传递给新绑定的函数

3.  整个事情看起来是重复的，唯一改变的是警报动作（虽然每个函数的行为不同，不一定是警报）。有没有更优雅的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T03:03:56.980

无需不断地绑定和解除绑定事件处理程序。

对于所有这些选项，您应该有一个处理程序：

```
$(document).ready(function() {

    var classes = ['neutral', 'markedV', 'markedX'],
        methods = {
            neutral: function (e) { alert('Good!') },
            markedV: function (e) { alert('Bad!') },
            markedX: function (e) { alert('Ok!') },
        };

    $( '.' + classes.join(',.') ).click(function (e) {
        var $this = $(this);

        $.each(classes, function (i, v) {
            if ( $this.hasClass(v) ) {
                methods[v].call(this, e);
                $this.removeClass(v).addClass( classes[i + 1] || classes[0] );
                return false;
            }
        });
    });
}); 
```

这是小提琴：http: [//jsfiddle.net/m3CyX/](http://jsfiddle.net/m3CyX/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T03:06:06.003

对于这种情况，您需要将事件附加到更高的父级并**委托事件。**

**请记住，事件附加到元素而不是类。**

试试这个方法

```
$(document).ready(function () {
  $(document).on('click', function (e) {
    var $target = e.target;
    if ($target.hasClass('markedV')) {
      alert("Good!");
      $target.addClass("markedV").removeClass("neutral");
    } else if ($target.hasClass('markedV')) {
      alert("Bad!");
      $target.addClass("markedX").removeClass("markedV");
    } else if ($target.hasClass('markedX')) {
      alert("Ok!");
      $target.addClass("neutral").removeClass("markedX");
    }
  });
}); 
```

**或** @Bergi 建议

```
$(document).ready(function () {
  $(document).on('click', 'markedV',function (e) {
    alert("Good!");
    $(this).addClass("markedV").removeClass("neutral");
  });
  $(document).on('click', 'markedX',function (e) {
    alert("Bad!");
    $(this).addClass("markedX").removeClass("markedV");
  });
  $(document).on('click', 'neutral',function (e) {
    alert("Ok!");
    $(this).addClass("neutral").removeClass("markedX");
  });
}); 
```

这里的文档可以用任何静态父容器替换..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T03:07:03.800

> 如何正确地将更改的元素绑定到已经定义的函数，有时在它实际定义之前？

您不会将元素绑定到函数，而是将处理函数绑定到元素上的事件。您不能在定义之前使用函数（但您可以在代码中*声明*它的位置上方使用函数- 称为“提升”）。

> 如何确保将事件传递给新绑定的函数

这就是调用处理程序时隐式发生的事情。你只需要传递函数——[不要调用它](http://quirksmode.org/js/events_tradmod.html#link2)！然而，您的问题是您无法从外部访问命名函数表达式。

> 整个事情看起来是重复的，唯一改变的是警报动作（虽然每个函数的行为不同，不一定是警报）。有没有更优雅的解决方案？

是的。仅使用一个处理程序，并动态决定在当前状态下要做什么。不要稳定地绑定和解除绑定处理程序。或者使用[事件委托](http://api.jquery.com/on/#direct-and-delegated-events)。

# sql - 执行基本命令时出现 SQL 错误 ORA-00933

> ID：14330394
> 
> 赞同：0
> 
> 时间：2013-01-15T02:50:17.057
> 
> 标签：sql, select

刚开始学习 SQL，并使用 SQLPlus 做一些非常基本的事情。

我刚刚开始并在整个网络上搜索我似乎找不到任何答案。

我有一些预制表，我需要使用 SELECT 从它们中提取信息。

我的代码在下面，但每次我得到

> ORA-00933: SQL 命令未正确结束

我的代码如下。请你能告诉我哪里出错了。

```
SELECT * FROM staff WHERE wage > 20000 && < 350000; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T03:03:33.807

将查询用作：

```
SELECT * FROM staff WHERE wage>20000 AND wage<350000; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T03:14:57.093

这是另一种使用 的速记`BETWEEN`，但在功能上是相同的。

```
SELECT * 
FROM staff 
WHERE wage BETWEEN 20000 AND 350000; 
```

# xcode - 如何在 xcconfig 文件中为文件/包设置目标

> ID：14330395
> 
> 赞同：0
> 
> 时间：2013-01-15T02:50:17.460
> 
> 标签：xcode, configuration, target, xcconfig

众所周知，我们可以在 xcode 的右侧导航器中为某个文件/包设置目标成员资格。

但现在我想在某个配置中设置目标成员资格。那么如何在 xcconfig 文件中为文件/包设置目标？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T02:57:29.483

您可以附加一个构建阶段：

*   在复制捆绑阶段之前运行。
*   它会使用 ${CONFIGURATION} 检测配置是否是 Debug vs Release
*   然后将文件复制到一个位置/名称，然后它会被复制文件阶段拾取。

# zk - 如何在边框布局上隐藏西部区域？

> ID：14330396
> 
> 赞同：0
> 
> 时间：2013-01-15T02:50:19.110
> 
> 标签：zk, border-layout

当我隐藏边框布局时，我不想显示一个框架，有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T02:58:01.947

如果您将 west-Area 设置为 '0px'，您将如何将其恢复为原始宽度？west.setWidth("0px");

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T11:13:45.813

`borderlayout`您可以通过设置隐藏 a 部分的框架/边框`border="none"`。

```
 <borderlayout>
  <west border="none">
  </west>
</borderlayout> 

```

它在[ZK 边界布局示例](http://books.zkoss.org/wiki/ZK_Component_Reference/Layouts/Borderlayout)中，虽然不是很明确。请注意“这是一个无边框”面板。

* * *

PS：欢迎来到 StackOverflow。将来请更具体地提出您的问题；你会得到更好的兴趣和更有用的回应。

# python - Python 在元组中添加值

> ID：14330401
> 
> 赞同：1
> 
> 时间：2013-01-15T02:51:01.170
> 
> 标签：python

我已经搜索并找不到在处理元组时添加总和的方法。a 和 b 都是不可变的元组，我正在尝试添加它们的值，以便找到最大值。我知道如何通过调用 sum 函数和 max() 来使用字典，但不知道如何使用元组，所以请提供帮助。我知道这有点棘手，因为它的元组和元组是不可变的并且无法更改，但我没有更改它们，我只想知道总和并将最大的一个添加到另一个元组。

```
a = [(1,2),(4,5),(1,0)]
b = [(3,2),(9,4),(2,2)] 
```

输出：

```
a=[(3),(9),(1)]
b=[(5),(13),(4)] 
```

由于`(4,5) = 9`在元组 a 中这是 a 的最大值，将其移动到另一个元组，a 现在应该是这样的：

```
a = [(1,2),(1,0)] 
```

元组 b 也是如此。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T02:56:26.277

元组的不可变与此无关。你仍然可以在这里使用`max`和`sum`：

```
>>> max(a, key=sum)
(4, 5) 
```

然后用它做任何你想做的事情。完整的咒语可能如下所示：

```
maximums = []
for tuples in (a, b):
    max_tuple = max(tuples, key=sum)
    tuples.remove(max_tuple)
    maximums.append(tuples) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T03:01:42.717

如果要从每个列表中删除最大元组，则：

```
In [17]: a=[(1,2),(4,5),(1,0)]

In [18]: a.remove(max(a, key=sum))

In [19]: a
Out[19]: [(1, 2), (1, 0)]

In [20]: b = [(3,2),(9,4),(2,2)]

In [21]: b.remove(max(b,key=sum))

In [22]: b
Out[22]: [(3, 2), (2, 2)] 
```

或者如果你想从一个中删除最大元组并将其添加到下一个然后::

```
In [34]: a=[(1,2),(4,5),(1,0)]

In [35]: b = [(3,2),(9,4),(2,2)]

In [36]: b.append(a.pop(a.index(max(a,key=sum))))

In [37]: b
Out[37]: [(3, 2), (9, 4), (2, 2), (4, 5)]

In [38]: a
Out[38]: [(1, 2), (1, 0)] 
```

或者如果你想从每个列表中删除 maxx 元组；然后将它们添加到另一个列表::

```
In [44]: maxx=[]

In [45]: a=[(1,2),(4,5),(1,0)]

In [46]: b = [(3,2),(9,4),(2,2)]

In [47]: maxx.append(a.pop(a.index(max(a,key=sum))))

In [48]: maxx.append(b.pop(b.index(max(b,key=sum))))

In [49]: a
Out[49]: [(1, 2), (1, 0)]

In [50]: b
Out[50]: [(3, 2), (2, 2)]

In [51]: maxx
Out[51]: [(4, 5), (9, 4)] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T02:56:56.883

就像：

```
a.remove(max(a,key=lambda x:x[0]+x[1]))
b.remove(max(b,key=lambda x:x[0]+x[1])) 
```

?

# sql - Rails .joins 查询多个关联

> ID：14330402
> 
> 赞同：0
> 
> 时间：2013-01-15T02:51:12.490
> 
> 标签：sql, ruby-on-rails-3, postgresql, activerecord

我有这个按预期工作的查询：

`@dog.listings.joins(:address_country).merge(Country.where(permalink: 'uk'))`

此查询为我提供了国家与“英国”匹配的列表（列表 has_one :address_country，这是 Country 模型中的国家）

但是，当我在 cat 和列表（垃圾）之间的链中添加另一个关联时，它不起作用（垃圾属于列表，也属于猫）：

`@dog.litters.joins(:listing) & Listing.joins(:address_country) & Country.where(permalink: 'uk')`

在此查询中，我希望它获取国家（相关列表的）匹配的 Litters。但它只返回一个空数组。第一个查询有效，我想我只需要将它固定到`@cat.litters`？）

在 Rails C 中，我得到了这个：

```
 d.litters.joins(:listing) & Listing.joins(:address_country).merge(Country.where(permalink: 'uk'))

  Litter Load (0.6ms)  SELECT "litters".* FROM "litters" INNER JOIN "listings" ON "listings"."id" = "litters"."listing_id" WHERE "litters"."litterable_id" = 11 AND "litters"."litterable_type" = 'Dog'
  Listing Load (0.4ms)  SELECT "listings".* FROM "listings" INNER JOIN "countries" ON "countries"."id" = "listings"."address_country_id" WHERE "countries"."permalink" = 'uk'
=> [] 
```

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T18:04:42.163

绝对错误的一件事是假设它`&`与`merge`. 它曾经是但在[fbd917](https://github.com/rails/rails/commit/fbd917f50a6046d02dd6a64ccfb1aed0cbce68d8)中被删除- 现在它只是[ruby​​ 的数组交集](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-26)，这不是你想要的。

我不确定我是否遵循您提供的简要描述中的数据库架构，但只需将其重写为合并就值得一试：

```
@dog.litters.joins(:listing).merge(Listing.joins(:address_country)).merge(Country.where(permalink: 'uk')) 
```

再次没有实际运行代码，我猜这是等效的：

```
@dog.litters.joins(listing: :address_country).where(countries: {permalink: "uk"}) 
```

# mysql - 查询以对所有行以相同方式修改记录

> ID：14330410
> 
> 赞同：0
> 
> 时间：2013-01-15T02:51:50.670
> 
> 标签：mysql, sql

在名为“sunshine”的表的 img_path 列中存储了大约 4000 个文件路径。

所有这些路径的结构都以相同的方式发生了变化。

我想知道是否可以运行一个 mySQL 查询，它将所有当前图像路径记录更改为新更改的记录，用于“阳光”表中的所有记录？

注意：新旧路径的唯一区别是我需要在之前的所有img_paths中添加一个sunny目录。

当前的“img_path”列：

```
images/a/a1.jpg 
images/a/a2.jpg 
images/a/a3.jpg 
```

我要完成的工作：

```
images/sunny/a/a1.jpg
images/sunny/a/a2.jpg
images/sunny/a/a3.jpg 
```

提前谢谢了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T03:04:19.320

尝试这个

```
UPDATE Sunshine
SET img_paths = REPLACE(img_paths,'images/','images/sunny/'); 
```

# python - sublime text2 python 错误消息 /usr/bin/python: can't find '__main__' module in ''

> ID：14330411
> 
> 赞同：62
> 
> 时间：2013-01-15T02:51:52.833
> 
> 标签：python

我将 sublime text 2 安装到 OSX 10.8.2。在我的 Mac 中，安装了 python 2.7.3。

在 sublime text2 中，我只需输入

```
print 'Hello' 
```

但发生如下错误。

```
/usr/bin/python: can't find '__main__' module in ''
[Finished in 0.2s with exit code 1] 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2013-01-15T03:09:02.440

我得到了同样的错误，因为我在执行之前没有保存脚本。看看你有没有保存！

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2013-06-14T03:37:22.580

其他人请注意：

如果你有这样的目录，你可以添加一个`__main__.py`文件来告诉解释器如果你直接调用模块要执行什么。

```
my_module
  |
  | __init__.py
  | my_cool_file.py # print "Hello  World"
  | __main__.py # import my_cool_file 
```

`$ python my_module # Hello World`

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-04-21T04:08:03.343

您需要使用“.py”扩展名保存您的代码文件。然后，在“工具/构建系统”菜单上，确保您的构建系统设置为“自动”或“Python”。该消息告诉您的是没有有效的 Python 文件来“构建”（或者，在这种情况下只是运行）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-07-11T03:14:44.307

首先将您的程序文件类型保存为“example.py”，然后运行您的代码，它工作正常。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-15T12:24:59.973

您是否将shebang添加到文件顶部？

```
#!/usr/bin/python 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-05-05T03:20:54.553

不要在目录和文件名之间使用空格：

```
python /root/Desktop/1 hello.py 
```

使用 a`/`代替：

```
python /root/Desktop/1/hello.py 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-11-21T16:36:30.693

问题：文件的格式如何保存。使用适当的文本编辑器并将其与`.py`扩展名一起保存并在终端中运行。

```
eg: file name should be saved as `example.py`
run
python example 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-03-12T06:03:31.063

在构建 sublime 之前保存 .py 文件。例如将文件保存在桌面或其他文档中。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-05-26T14:07:59.510

确保您没有从“运行”选项卡中单击“运行未命名”。您必须点击“运行”。或者只需单击绿色快捷按钮。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-01-07T03:03:10.683

编辑配置，然后在框中：脚本路径，选择您的 .py 文件！

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2019-11-02T21:33:42.897

你得到这个错误是因为你没有保存你的文件，保存它例如“holamundo.py”然后运行它`Ctrl`+`B`

# r - 在 Kest (spatstat) 中如何计算 r？

> ID：14330415
> 
> 赞同：2
> 
> 时间：2013-01-15T01:50:34.833
> 
> 标签：r, spatial

我似乎无法找到如何在 R Kest 函数（spatstat）中计算搜索距离“r”。包[文档](http://www.inside-r.org/packages/cran/spatstat/docs/Kest)说明如下：

> r 可选。应评估 K(r) 的参数 r 的值向量。建议用户不要指定此参数；有一个合理的默认值。

计算中使用的“合理默认值”是什么？任何文档将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T02:53:40.583

因为`R`是开源的，你可以自己阅读代码。键入`Kest`列出代码。查找`r`分配的位置表明它是由一个名为 的子例程完成的`handle.r.b.args`。在提示符处键入它的名称`R`以阅读该过程——它只有六行：

```
 rmax <- if (missing(rmaxdefault)) 
        diameter(as.rectangle(window))
    else rmaxdefault
    if (is.null(eps)) {
        if (!is.null(window$xstep)) 
            eps <- window$xstep/4
        else eps <- rmax/512
    }
    breaks <- make.even.breaks(rmax, bstep = eps) 
```

显然，对该区域直径的估计除以 512。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T11:50:25.790

跟进@whuber 的非常有用的答案，我能够找到有关在 Kest 中用于 r 的确切计算的更多详细信息：

> *Kest(X) 中的 r 值是如何确定的？*
> 
> Kest 的默认 r 值计算如下：
> 
> 最大 r 值由函数 'rmax.rule' 计算，rmax <- rmax.rule("K", W, lambda) 其中 W 是包含数据的窗口，lambda 是每单位面积点的平均密度. 目前，该规则采用 Ripley 经验法则的最小值：rmax = 封闭矩形最小边的四分之一 大样本规则：rmax = sqrt(1000/(pi * lambda)) r 值从 0 到 rmax 等距步长值“eps”。如果未指定 eps，则 eps = rmax/512，因此有 513 个值或 512 个区间。如果需要，您始终可以覆盖“r”值。

资料来源：[spatstat](http://www.spatstat.org/spatstat/spatstatFAQ.html)

# python-2.7 - Python：两个数字的总和

> ID：14330418
> 
> 赞同：1
> 
> 时间：2013-01-15T02:52:31.427
> 
> 标签：python-2.7

对于从 1 到 50 的数字列表，我试图找到该范围内的哪些数字是另一个列表中其他两个特定数字的总和。另一个列表是 1、2、4、6、18、26。

我基本上是在尝试运行“for x in range(1,50):”类型的程序，然后列出从 1 到 50 的所有数字，如果它们是任何两个的总和，它们旁边会显示“TRUE”该列表中的数字（例如 1 + 1、1 + 4、1 + 26、4 + 18、18 + 26 等）。

有任何想法吗？？

谢谢！！

马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T03:03:50.237

遍历所有可能的数字对：

```
sums = []

for n1 in numbers:
    for n2 in numbers:
        # Add them together and store the result in `sums` 
```

然后检查是否每个数字`range(50)`都在您的总和列表中：

```
for n in range(50):
    if n in sums:
        # `n` is the sum of two numbers from your list 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2020-05-26T15:26:42.560

```
def solveMeFirst(a,b):
    # Hint: Type return a+b below

    return a+b
    num1 = int(input())
    num2 = int(input())
    res = solveMeFirst(num1,num2)
    print(res) 
```

# sql-server-2008 - Reporting Services 报告日志报告目标

> ID：14330419
> 
> 赞同：1
> 
> 时间：2013-01-15T02:52:36.717
> 
> 标签：sql-server-2008, reporting-services, ssrs-2008

我们有 SSRS 2008 并且有大量数据驱动的订阅。我们的任务是创建每个用户收到的所有报告的地图。

查询：

```
SELECT * FROM ReportServer.dbo.ExecutionLog2 
```

给了我们几乎我们想要的信息。对于我们想要的，它缺少报告的目的地。

有没有办法找出通过电子邮件发送报告的地方？

我想我的替代方法是查看分析 Exchange 日志。这是一个合理的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-12-26T06:35:03.507

您可以从报表服务器数据库的订阅表中的参数和数据设置列中获取数据驱动订阅的目标。2 列记录为 xml 格式，您可以在列参数中获取节点，并在列 DataSettings 中获取节点。然后您可以获得相应的接收者进行订阅。

# ruby - 在 Ruby 中获得 Lisp 样式添加 (+ *args) 的最简单方法是什么？

> ID：14330421
> 
> 赞同：1
> 
> 时间：2013-01-15T02:52:52.743
> 
> 标签：ruby, lisp

所以我真的很喜欢 Lisp 中的这种语法：

```
 (+ 1 1 2 3 5 8 13)
 => 33 
```

我想在 Ruby 中添加一个项目列表，并希望尽可能地近似它。现在，我最好的解决方案涉及一个数组和 collect/map 方法。

所以：

```
sum = 0; [1,1,2,3,5,8,13].collect { |n| sum += n } 
```

但...

我想为此添加可以返回 nil 的方法。

```
sum = 0; [1, booking_fee, 8,13].collect { |n| n = 0 if n.nil?; sum += n } 
```

这样做真的很好，中间的所有行都引用可能返回 nil 的方法，但我不能以这种方式完全构建数组。这只是我希望我的语法看起来像的一个想法。

```
def total
  Array.new do
    booking_fee
    rental_charges
    internationalization_charges
    discounts
    wild_nights
  end.collect { |n| n = 0 if n.nil?; sum += n }
end 
```

在我尝试破解并执行 Greenspun 规则之前有什么建议吗？（编程确实是一种强迫症。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-15T02:57:15.067

我真的不明白你的问题。如果你想要一个像`+`Lisp 中那样工作的方法，即接受任意数量的参数并且位于前缀位置而不是中缀位置，这很简单：

```
def plus(*nums)
  nums.inject(:+)
end

plus 1, 1, 2, 3, 5, 8, 13 # => 33 
```

如果你想变得更*花哨*，你可以覆盖 s 的一元前缀`+`运算符`Array`：

```
class Array
  def +@
    inject(:+)
  end
end

+[1, 1, 2, 3, 5, 8, 13] # => 33 
```

**请不要那样做！**

我看不出您的问题的其余部分与 Lisp 样式的加法操作有什么关系。

如果您想从 s 中删除`nil`s `Array`，那么就是`Array#compact`这样。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-15T02:56:10.500

*   已经有一种方法`inject`可以做你想做的事。
*   在不影响数字的情况下更改`nil`为数字很容易：使用`to_i`（或者`to_f`如果您正在处理浮点数）。

.

```
[
  booking_fee,
  rental_charges,
  internationalization_charges,
  discounts,
  wild_nights,
].inject(0){|sum, item| sum + item.to_i} 
```

# javascript - 如何遍历具有相同类名的每个图像？

> ID：14330422
> 
> 赞同：3
> 
> 时间：2013-01-15T02:52:56.450
> 
> 标签：javascript, jquery

> **可能重复：**
> [jQuery 循环遍历具有相同类的元素](https://stackoverflow.com/questions/4735342/jquery-to-loop-through-elements-with-the-same-class)

我正在尝试遍历具有类的图像。

```
for(var i=0; i<sizes.length; i++){
    var imageSize=sizes[i];
    $('.image').width(imageSize);
} 
```

我有 10 个具有相同类名的图像，但是，我希望它们具有不同的图像大小。

循环将循环 10 次，但我不确定如何使每个图像都有特定的`imagesize`.

有人可以帮我吗？我的大脑快要炸了。非常感谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-15T02:54:38.413

如果您所有的图像都有一个类`.image`，您可以简单地执行以下操作

```
$( '.image' ).each( function ( index ) {
    $( this ).css( 'width', sizes[ index ] );
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T02:57:17.080

你可以这样做：

```
$('.image').each(function(i) {
    $(this).width(sizes[i]);
}); 
```

但是您必须确保 size 数组包含正确的尺寸，其顺序与图像在页面上出现的顺序相同。

# tomcat - 在 cloudbees 中启动应用程序时，org.zkoss.zk.ui.http.DHtmlLayoutServlet 无法转换为 javax.servlet.Servle

> ID：14330424
> 
> 赞同：0
> 
> 时间：2013-01-15T02:53:15.547
> 
> 标签：tomcat, servlets, zk, cloudbees

当我尝试在 cloudbees SDK 的 tomcat 服务器中运行 ZK 应用程序时，我遇到了从 DHtmlLayoutServlet 到 Servlet 的类转换异常。

当我在本地 tomcat 服务器中启动我的应用程序时，这工作正常。

来自 cloubseed sdk 的异常跟踪...

> 信息：启动 Servlet 引擎：Apache Tomcat/6.0.35 2013 年 1 月 15 日上午 8:13:54 org.apache.catalina.core.ApplicationContext 日志信息：将 servlet zkLoader 标记为不可用 2013 年 1 月 15 日上午 8:13:54 org .apache.catalina.core.StandardContext loadOnStartup 严重：Servlet 抛出 load() 异常 java.lang.ClassCastException：org.zkoss.zk.ui.http.DHtmlLayoutServlet 无法在 org.apache.catalina 中转换为 javax.servlet.Servlet。 core.StandardWrapper.loadServlet(StandardWrapper.java:1149) at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1026) at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4421)在 org.apache.catalina.core.StandardContext.start(StandardContext.java:4734) 在 org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057) 在 org.apache.catalina.core.StandardHost.start(StandardHost.java:840) 在 org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057) 在 org.apache.catalina.core.StandardEngine .start(StandardEngine.java:463) 在 org.apache.catalina.startup.Embedded.start(Embedded.java:825) 在 com.staxnet.appserver.TomcatServerBase.startContainer(TomcatServerBase.java:120) 在 com.staxnet。 appserver.TomcatServerBase.start(TomcatServerBase.java:190) 在 com.staxnet.appserver.StaxSdkAppServer.launchServer(StaxSdkAppServer.java:69) 在 com.staxnet.mojo.tomcat.RunMojo.runWar(RunMojo.java:217) 在 com .staxnet.mojo.tomcat.RunMojo.execute(RunMojo.java:171) 在 org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101) 在 org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153) 在 org.apache.maven 的 org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209) .lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145) 在 org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84) 在 org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:59) 在 org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183) 在 org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161) 在org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320) 在 org.apache.maven.DefaultMaven。在 org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196) 的 org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196) 的 org.apache.maven.cli.MavenCli.execute(MavenCli.java:537) 执行(DefaultMaven.java:156) .maven.cli.MavenCli.main(MavenCli.java:141) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43) 在 java.lang.reflect.Method.invoke(Method.java:601) 在 org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290) 在 org.codehaus。 plexus.classworlds.launcher.Launcher.launch(Launcher.java:230) 在 org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:第409章）

我用谷歌搜索了一段时间并最终进入了这个[链接](http://www.zkoss.org/forum/listComment/10188)，但这对我的问题没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T07:25:16.467

这里也有类似的异常，例如 [启动 tomcat 加载 servlet 时的 java.lang.ClassCastException](https://stackoverflow.com/questions/13769429/java-lang-classcastexception-when-starting-tomcat-loading-servlets)或 [JBoss & Java 6 中 Annotated WebService 中的 ClassCastException](https://stackoverflow.com/questions/3116519/classcastexception-in-annotated-webservice-in-jboss-java-6) 等。你可以谷歌搜索关键字`standardwrapper` `servlet` `ClassCastException`。我不确定，但[这个答案](https://stackoverflow.com/a/13769910/546117)对类路径中同一库的多个副本或版本提出了建议。你的情况可能`zk.jar`就是这样。对您提供的链接的评论似乎是相同的：

> 我试图将 zk 集成到另一个框架中，并且我得到了由不同加载器加载的多个 servlet 库，这就是错误的原因。

因此，您可以尝试`zk.jar`从类路径中查找和删除额外版本，包括您的 app lib 文件夹或 tomcat 全局 lib 文件夹。

# sql-server - 无法通过 Microsoft SQL Server 2012 JDBC 驱动程序连接到 SQL Server

> ID：14330430
> 
> 赞同：1
> 
> 时间：2013-01-15T02:53:52.083
> 
> 标签：sql-server, macos, jdbc, virtualbox, jtds

这很奇怪。我在运行 VirtualBox 4.2.6 的 Mac OS X 10.7.5 64 位主机上。我有一个运行 Microsoft SQL Server Express 2012 的带有桥接网络的 Windows 7 SP1 来宾（64 位）。我将 SQL Server 配置为在端口 1433 上使用 TCP/IP，而不是动态端口（设置为空白，而不是 0）。Windows 7 来宾的 IPv4 地址为 192.168.99.132，并且 Windows 防火墙已关闭。

我下载了 Microsoft SQL Server 2012 JDBC 驱动程序以及适用于 Windows 和 Mac 的 Squirrel SQL 客户端 3.4.0。当我在 Windows 7 来宾操作系统本身上运行 Squirrel 时，我可以通过 Microsoft JDBC 驱动程序使用“winny”、“localhost”或“192.168.99.132”的来宾计算机名称（JDBC URL 像jdbc:sqlserver://winny\SQLEXPRESS:1433;databaseName=vha)。但是，当我尝试从 Mac 主机上运行的 Squirrel 连接到 SQL Server 时，出现异常（请参阅下面的堆栈跟踪）。

这是奇怪的部分。如果*从 Mac 主机*上，我使用 jTDS SQL Server 驱动程序（版本 1.2.7，因为我使用的是 JDK6，所以不能使用 jTDS 1.3.0 - 该版本仅是 JDK7），我会立即连接JDBC URL jdbc:jtds:sqlserver://192.168.99.132:1433/vha。

任何想法为什么 Microsoft 驱动程序失败但 jTDS 从远程主机成功？Microsoft 中的 jTDS URL 中唯一缺少的信息是实例名称（“SQLEXPRESS”）。是的，我尝试了带有和不带有实例名称的 Microsoft URL。

Mac 主机上的 Java 版本为：

```
java version "1.6.0_37"
Java(TM) SE Runtime Environment (build 1.6.0_37-b06-434-11M3909)
Java HotSpot(TM) 64-Bit Server VM (build 20.12-b01-434, mixed mode) 
```

Windows 7 客户机上的 Java 版本为：

```
java version "1.6.0_35"
Java(TM) SE Runtime Environment (build 1.6.0_35-b10)
Java HotSpot(TM) 64-Bit Server VM (build 20.10-b01, mixed mode) 
```

从 Mac 主机连接到 Windows 7 客户机时的堆栈跟踪：

```
java.util.concurrent.ExecutionException: java.lang.RuntimeException: com.microsoft.sqlserver.jdbc.SQLServerException: The TCP/IP connection to the host ﻿192.168.99.132, port 1433 has failed. Error: "null. Verify the connection properties. Make sure that an instance of SQL Server is running on the host and accepting TCP/IP connections at the port. Make sure that TCP connections to the port are not blocked by a firewall.".
    at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:232)
    at java.util.concurrent.FutureTask.get(FutureTask.java:91)
    at net.sourceforge.squirrel_sql.client.mainframe.action.OpenConnectionCommand.awaitConnection(OpenConnectionCommand.java:132)
    at net.sourceforge.squirrel_sql.client.mainframe.action.OpenConnectionCommand.access$100(OpenConnectionCommand.java:45)
    at net.sourceforge.squirrel_sql.client.mainframe.action.OpenConnectionCommand$2.run(OpenConnectionCommand.java:115)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:439)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680)
Caused by: java.lang.RuntimeException: com.microsoft.sqlserver.jdbc.SQLServerException: The TCP/IP connection to the host ﻿192.168.99.132, port 1433 has failed. Error: "null. Verify the connection properties. Make sure that an instance of SQL Server is running on the host and accepting TCP/IP connections at the port. Make sure that TCP connections to the port are not blocked by a firewall.".
    at net.sourceforge.squirrel_sql.client.mainframe.action.OpenConnectionCommand.executeConnect(OpenConnectionCommand.java:171)
    at net.sourceforge.squirrel_sql.client.mainframe.action.OpenConnectionCommand.access$000(OpenConnectionCommand.java:45)
    at net.sourceforge.squirrel_sql.client.mainframe.action.OpenConnectionCommand$1.run(OpenConnectionCommand.java:104)
    ... 6 more
Caused by: com.microsoft.sqlserver.jdbc.SQLServerException: The TCP/IP connection to the host ﻿192.168.99.132, port 1433 has failed. Error: "null. Verify the connection properties. Make sure that an instance of SQL Server is running on the host and accepting TCP/IP connections at the port. Make sure that TCP connections to the port are not blocked by a firewall.".
    at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDriverError(SQLServerException.java:190)
    at com.microsoft.sqlserver.jdbc.SQLServerException.ConvertConnectExceptionToSQLServerException(SQLServerException.java:241)
    at com.microsoft.sqlserver.jdbc.SocketFinder.findSocket(IOBuffer.java:2243)
    at com.microsoft.sqlserver.jdbc.TDSChannel.open(IOBuffer.java:491)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.connectHelper(SQLServerConnection.java:1309)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.login(SQLServerConnection.java:991)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.connect(SQLServerConnection.java:827)
    at com.microsoft.sqlserver.jdbc.SQLServerDriver.connect(SQLServerDriver.java:1012)
    at net.sourceforge.squirrel_sql.fw.sql.SQLDriverManager.getConnection(SQLDriverManager.java:133)
    at net.sourceforge.squirrel_sql.client.mainframe.action.OpenConnectionCommand.executeConnect(OpenConnectionCommand.java:167)
    ... 8 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T06:04:08.437

从理论上讲，您还需要 jTDS 连接字符串中的实例名称（例如，附加“;instance=SQLEXPRESS”）——但我不熟悉 jTDS，我可能错了，但如果您没有设置它并且您正在连接，那么也许你正在连接到别的东西？

您在上面显示了带有 IP 地址的 jTDS 连接字符串和带有服务器名称“winny”(jdbc:sqlserver://winny\SQLEXPRESS:1433;databaseName=vha) 的 Microsoft 连接字符串——您尝试过 IP 地址吗？(jdbc:sqlserver://192.168.99.132\SQLEXPRESS:1433;databaseName=vha)

我通常尝试的事情：

1.  验证端口——你可以远程登录到主机上的 localhost 端口 1433
2.  验证网络——确保主机响应 ping——你能从客户端按名称 ping 它吗？按 IP 地址？
3.  验证端口 1433 是否打开——您可以从客户端远程登录到端口 1433 上的主机吗？

因为您可以从 Mac 客户端与 jTDS 连接，所以您应该已经能够完成所有这三个操作，但值得仔细检查。

您还可以尝试在服务器上硬编码端口 1433（将其从空白更改）——也许存在另一个 SQL 实例？另请参阅[http://support.microsoft.com/kb/287932](http://support.microsoft.com/kb/287932)

以下是我通常会执行的一些步骤，也许这会有所帮助：

1.  （服务器）打开SSMS，右键SQL Server，属性；验证是否选中了允许远程连接。如果没有，请检查并重新启动 SQL Server。
2.  （服务器）打开 SQL Server 配置管理器（开始 -> SQL Server -> 配置工具）
    1.  验证 TCP/IP 是否已启用
    2.  对于默认实例，请验证是否设置了静态端口 1433（注意：命名实例将具有反斜杠，例如 MYSQLSERVER\MYINSTANCE，而默认实例仅使用服务器名称标识。）
    3.  对于命名实例，选择另一个静态端口，例如 1434+，并将其设置为静态端口。每个实例只有一个——不要在同一台机器上重复使用它们。
    4.  重新启动 SQL Server 服务
3.  （服务器）验证你所做的到目前为止是否有效；在 SQL Server 机器上：
    1.  打开CMD提示，“telnet localhost 1433”（根据情况将1433改为其他端口号）
        1.  如果你得到一个“挂起”的空白屏幕，它就起作用了！
        2.  如果你得到一个错误，它没有工作。回到广场 1。
    2.  尝试同样的事情，但使用机器名而不是 localhost
4.  （服务器）配置 Windows 防火墙以将例外添加到 TCP 端口 1433（或您在步骤 2 中选择的任何端口）
5.  （服务器）如​​果使用命名实例，还要向 UDP 端口 1433 添加另一个例外（对于使用 UDP 而不是 TCP 的 SQL Browser 服务 - 还要注意 SQL Browser 服务始终使用端口 1433，即使您为实例选择了不同的 TCP 端口在步骤 2)
6.  （客户端）从同一网络上的另一台机器验证
    1.  打开 CMD 提示，“ping”——如果你得到响应，机器可以互相看到。即使您没有收到响应，请尝试下一步 - 例如，Windows 7 可能默认不回复回显请求 (ping)
    2.  打开CMD提示，“telnet 1433”（根据情况将1433改为其他端口号）
        1.  如果你得到一个“挂起”的空白屏幕，它就起作用了！
        2.  如果你得到一个错误，它没有工作。回到广场 1。
7.  （客户端）现在尝试从另一个应用程序（如 Excel）连接到 SQL Server
8.  （客户端）另见[http://blogs.msdn.com/b/dataaccesstechnologies/archive/2010/01/29/testing-connection-to-sql-server-from-a-service-running-under-local-system -account.aspx](http://blogs.msdn.com/b/dataaccesstechnologies/archive/2010/01/29/testing-connection-to-sql-server-from-a-service-running-under-local-system-account.aspx)其他错误

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-04-13T17:55:37.190

```
 Step 1: Download jtds.jar from http://sourceforge.net/projects/jtds/files/

    Step 2: Add the jar into eclipse or any IDE.

    Step 3: 
    String driver="net.sourceforge.jtds.jdbc.Driver";
    Class.forName(driver).newInstance();

    String connString="jdbc:jtds:sqlserver://127.0.0.1:1433/database_name;encrypt=false;user=sa;password=yourpassword;integratedSecurity=true;instance=SQLEXPRESS;";
    String username="sa";
    String password="yourpassword";
OR
String connString="jdbc:jtds:sqlserver://192.168.1.198:1433/database_name;encrypt=false;user=sa;password=yourpassword;";
        String username="sa";
        String password="yourpassword"; 
```

# ruby - 替换标记（作为字符串），包括某些内联元素

> ID：14330432
> 
> 赞同：0
> 
> 时间：2013-01-15T02:54:15.860
> 
> 标签：ruby, nokogiri

我的意图是修改标签中的一个句子。

例如改变：

```
<div id="1">
  This is text in the TD with <strong> strong </strong> tags
  <p>This is a child node. with <b> bold </b> tags</p>
  <div id=2>
      "another line of text to a <a href="link.html"> link </a>"
     <p> This is text inside a div <em>inside<em> another div inside a paragraph tag</p>
  </div>
</div> 
```

对此：

```
<div id="1">
  This is modified text in the TD with <strong> strong </strong> tags
  <p>This is a child node. with <b> bold </b> tags</p>
  <div id=2>
      "another line of text to a <a href="link.html"> link </a>"
      <p> This is text inside a div <em>inside<em> another div inside a paragraph tag</p>
   </div>
</div> 
```

这意味着我需要遍历抓取标签的节点并获取所有文本和样式节点，但不抓取子标签。修改句子并将它们放回原处。在修改所有内容之前，我需要对每个带有全文的标签执行此操作。

例如，抓取文本和样式节点`div#1`将是：“这是 TD 中带有强标签的文本”，但如您所见，不会抓取下面的任何其他文本。它应该可以通过变量访问和修改。

```
div#1.text_with_formating= "This is modified text in the TD with <strong> strong </strong> tags" 
```

下面的代码会删除所有内容，而不仅仅是子标签，保留内容会留下所有内容，甚至是`div#1`. 因此，我不确定如何进行。

```
Sanitize.clean(h,{:elements => %w[b em i strong u],:remove_contents=>'true'}) 
```

你会建议如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:15:09.640

如果要查找元素下的所有[文本节点，请使用：](http://nokogiri.org/Nokogiri/XML/Text.html)

```
text_pieces = div.xpath('.//text()') 
```

如果您只想查找作为元素的直接子元素的文本，请使用：

```
text_pieces = div.xpath('text()') 
```

对于每个文本节点，您可以随意更改`content`。但是，您必须确保使用`my_text_node.content = ...`而不是`my_text_node.content.gsub!(...)`.

```
# Replace text that is a direct child of an element
def gsub_my_text!( el, find, replace=nil, &block )
    el.xpath('text()').each do |text|
        next if text.content.strip.empty?
        text.content = replace ? text.content.gsub(find,replace,&block) : text.content.gsub(find,&block)
    end
end

# Replace text beneath an element.
def gsub_text!( el, find, replace=nil, &block )
    el.xpath('.//text()').each do |text|
        next if text.content.strip.empty?
        text.content = replace ? text.content.gsub(find,replace,&block) : text.content.gsub(find,&block)
    end
end

d1 = doc.at('#d1')
gsub_my_text!( d1, /[aeiou]+/ ){ |found| found.upcase }

puts d1
#=> <div id="d1">
#=>   ThIs Is tExt In thE TD wIth <strong> strong </strong> tAgs
#=>   <p>This is a child node. with <b> bold </b> tags</p>
#=>   <div id="d2">
#=>       "another line of text to a <a href="link.html"> link </a>"
#=>      <p> This is text inside a div <em>inside<em> another div inside a paragraph tag</em></em></p>
#=>   </div>
#=> </div>

gsub_text!( d1, /\w+/, '(\\0)' )
puts d1
#=> <div id="d1">
#=>   (ThIs) (Is) (tExt) (In) (thE) (TD) (wIth) <strong> (strong) </strong> (tAgs)
#=>   <p>(This) (is) (a) (child) (node). (with) <b> (bold) </b> (tags)</p>
#=>   <div id="d2">
#=>       "(another) (line) (of) (text) (to) (a) <a href="link.html"> (link) </a>"
#=>      <p> (This) (is) (text) (inside) (a) (div) <em>(inside)<em> (another) (div) (inside) (a) (paragraph) (tag)</em></em></p>
#=>   </div>
#=> </div> 
```

* * *

**编辑**：这里的代码允许您将文本+内联标记的运行提取为字符串，在其`gsub`上运行 a，然后用新标记替换结果。

```
require 'nokogiri'

doc = Nokogiri.HTML '<div id="d1">
  Text with <strong>strong</strong> tag.
  <p>This is a child node. with <b>bold</b> tags.</p>
  <div id=d2>And now we are in <a href="foo">another</a> div.</div>
  Hooray for <em>me!</em>
</div>'

module Enumerable
  # http://stackoverflow.com/q/4800337/405017
  def split_on() chunk{|o|yield(o)||nil}.map{|b,a|b&&a}.compact end
end

require 'set'
# Given a node, call gsub on the `inner_html` 
def gsub_markup!( node, find, replace=nil, &replace_block )
  allowed = Set.new(%w[strong b em i u strike])
  runs  = node.children.split_on{ |el| el.node_type==1 && !allowed.include?(el.name) }
  runs.each do |nodes|
    orig   = nodes.map{ |node| node.node_type==3 ? node.content : node.to_html }.join
    next if orig.strip.empty? # Skip whitespace-only nodes
    result = replace ? orig.gsub(find,replace) : orig.gsub(find,&replace_block)
    puts "I'm replacing #{orig.inspect} with #{result.inspect}" if $DEBUG
    nodes[1..-1].each(&:remove)
    nodes.first.replace(result)
  end
end

d1 = doc.at('#d1')

$DEBUG = true
gsub_markup!( d1, /[aeiou]+/, &:upcase )
#=> I'm replacing "\n  Text with <strong>strong</strong> tag.\n  " with "\n  TExt wIth <strOng>strOng</strOng> tAg.\n  "
#=> I'm replacing "\n  Hooray for <em>me!</em>\n" with "\n  HOOrAy fOr <Em>mE!</Em>\n"

puts doc
#=> <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
#=> <html><body><div id="d1">
#=>   TExt wIth <strong>strOng</strong> tAg.
#=>   <p>This is a child node. with <b>bold</b> tags.</p>
#=>   <div id="d2">And now we are in <a href="foo">another</a> div.</div>
#=>   HOOrAy fOr <em>mE!</em>
#=> </div></body></html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T05:56:48.613

最简单的方法是：

```
div = doc.at('div#1') 
div.replace div.to_s.sub('text', 'modified text') 
```

# php - 使用 imageMagic 和 Yii 进行文件转换 - 无法上传图像

> ID：14330435
> 
> 赞同：0
> 
> 时间：2013-01-15T02:54:22.763
> 
> 标签：php, yii, imagemagick

我正在使用以下方法使用图像魔术上传和转换 PDF 文件。create 方法正在运行，但图像未上传到相应的目录中。

```
public function actionCreate()
{
    $model=new Alerts;

    // Uncomment the following line if AJAX validation is needed
    // $this->performAjaxValidation($model);

    if(isset($_POST['Alerts']))
    {
        $model->attributes=$_POST['Alerts'];
                    $model->infoFile=CUploadedFile::getInstance($model,'infoFile');
                    $pdf_file = $model->infoFile->name;
                    $save_to = $model->getUploadPath()."sample.jpg";
        if($model->save()){
                         exec('convert "'.$pdf_file.'" -colorspace RGB -resize 800 "'.$save_to.'"', $output, $return_var);

                    }
            $this->redirect(array('view','id'=>$model->id));
    }

    $this->render('create',array(
        'model'=>$model,
    ));
} 
```

您能否建议可能是什么问题。

我可以确保网络服务器具有写入权限`$model->getUploadPath()`，`Yii::getPathofAlias('webroot').'/uploads/';`并且 Image Magic 已在网络服务器中正确安装和配置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T08:46:52.427

出于安全原因，大多数主机上都禁用了 exec 功能。如果它有效，你可以试试这个吗？

```
$uploadedFile->saveAs($model->getUploadPath()."sample.jpg"); 
```

只是为了验证 Yii 保存文件的方式是否有效。如果这有效，您应该研究：

*   您的服务器上是否允许 exec()
*   Imagick 是否正确安装/配置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T16:35:05.743

我的 Ghostscript 安装出现了一些问题。所以我重新安装了ghostscript，现在一切都开始工作了。感谢大家调查此事。

# ruby-on-rails - 如何从 Rails 视图中检索时间值？

> ID：14330441
> 
> 赞同：0
> 
> 时间：2013-01-15T02:54:57.543
> 
> 标签：ruby-on-rails

我有一个`shows`带有时间列的表，称为`start_time`. 在视图中，当我这样做时：

```
<%= show.start_time %> 
```

我明白了

```
2000-01-01 21:00:00 UTC 
```

`21:00`仅作为时间正确存储在数据库中。如何仅在视图中显示时间减去日期？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T03:00:25.157

一种方法是

```
show.start_time.to_s(:time) 
```

[或使用http://www.ruby-doc.org/core-1.9.3/Time.html#method-i-strftime](http://www.ruby-doc.org/core-1.9.3/Time.html#method-i-strftime)中列出的任何选项，您可以执行以下操作：

```
show.start_time.to_s("%H:%M %P") 
```

# playn - PlayN 展示（java）不运行 - 没有错误或警告

> ID：14330443
> 
> 赞同：1
> 
> 时间：2013-01-15T02:55:08.823
> 
> 标签：playn

我昨天能够运行示例，但在尝试使用 Eclipse 后，它不再有效。它作为 HTML5 (mvn -Phtml integration-test) 正常运行。

这是我下载和运行 playn-samples/showcase 的完整输出：

```
$ ls -la
total 0
drwxr-xr-x   2 sean  staff   68 14 Jan 21:46 .
drwxr-xr-x  16 sean  staff  544 14 Jan 21:46 ..
$ git clone https://code.google.com/p/playn-samples
Cloning into 'playn-samples'...
remote: Counting objects: 4291, done.
remote: Finding sources: 100% (4291/4291), done.
remote: Total 4291 (delta 1766)
Receiving objects: 100% (4291/4291), 58.48 MiB | 4.26 MiB/s, done.
Resolving deltas: 100% (1766/1766), done.
$ cd playn-samples/showcase
$ mvn test
[INFO] Scanning for projects...
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Build Order:
[INFO] 
[INFO] PlayN Showcase Metaproject
[INFO] PlayN Showcase Core
[INFO] PlayN Showcase Android
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building PlayN Showcase Metaproject 1.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.0:enforce (enforce-maven) @ playn-showcase ---
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building PlayN Showcase Core 1.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.0:enforce (enforce-maven) @ playn-showcase-core ---
[INFO] 
[INFO] --- maven-resources-plugin:2.4.3:resources (default-resources) @ playn-showcase-core ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 53 resources
[INFO] skip non existing resourceDirectory /Users/sean/dev/playn/playn-samples/showcase/core/src/main/resources
[INFO] 
[INFO] --- maven-compiler-plugin:2.3:compile (default-compile) @ playn-showcase-core ---
[INFO] Compiling 28 source files to /Users/sean/dev/playn/playn-samples/showcase/core/target/classes
[INFO] 
[INFO] --- maven-resources-plugin:2.4.3:testResources (default-testResources) @ playn-showcase-core ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /Users/sean/dev/playn/playn-samples/showcase/core/src/test/resources
[INFO] 
[INFO] --- maven-compiler-plugin:2.3:testCompile (default-testCompile) @ playn-showcase-core ---
[INFO] No sources to compile
[INFO] 
[INFO] --- maven-surefire-plugin:2.7.2:test (default-test) @ playn-showcase-core ---
[INFO] No tests to run.
[INFO] Surefire report directory: /Users/sean/dev/playn/playn-samples/showcase/core/target/surefire-reports

-------------------------------------------------------
 T E S T S
-------------------------------------------------------
There are no tests to run.

Results :

Tests run: 0, Failures: 0, Errors: 0, Skipped: 0

[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building PlayN Showcase Android 1.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.0:enforce (enforce-maven) @ playn-showcase-android ---
[INFO] 
[INFO] --- android-maven-plugin:3.1.1:generate-sources (default-generate-sources) @ playn-showcase-android ---
[INFO] ANDROID-904-002: Found aidl files: Count = 0
[INFO] ANDROID-904-002: Found aidl files: Count = 0
[INFO] /Developer-3.2.5/androidsdk/platform-tools/aapt [package, -m, -J, /Users/sean/dev/playn/playn-samples/showcase/android/target/generated-sources/r, -M, /Users/sean/dev/playn/playn-samples/showcase/android/AndroidManifest.xml, -S, /Users/sean/dev/playn/playn-samples/showcase/android/res, --auto-add-overlay, -I, /Developer-3.2.5/androidsdk/platforms/android-11/android.jar]
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ playn-showcase-android ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /Users/sean/dev/playn/playn-samples/showcase/android/src/main/resources
[INFO] skip non existing resourceDirectory /Users/sean/dev/playn/playn-samples/showcase/android/target/generated-sources/extracted-dependencies/src/main/resources
[INFO] 
[INFO] --- maven-compiler-plugin:2.3:compile (default-compile) @ playn-showcase-android ---
[INFO] Compiling 2 source files to /Users/sean/dev/playn/playn-samples/showcase/android/target/classes
[INFO] 
[INFO] --- android-maven-plugin:3.1.1:proguard (default-proguard) @ playn-showcase-android ---
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ playn-showcase-android ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /Users/sean/dev/playn/playn-samples/showcase/android/src/test/resources
[INFO] 
[INFO] --- maven-compiler-plugin:2.3:testCompile (default-testCompile) @ playn-showcase-android ---
[INFO] No sources to compile
[INFO] 
[INFO] --- maven-surefire-plugin:2.13:test (default-test) @ playn-showcase-android ---
[INFO] No tests to run.
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary:
[INFO] 
[INFO] PlayN Showcase Metaproject ........................ SUCCESS [0.289s]
[INFO] PlayN Showcase Core ............................... SUCCESS [1.784s]
[INFO] PlayN Showcase Android ............................ SUCCESS [1.125s]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 4.034s
[INFO] Finished at: Mon Jan 14 21:48:18 EST 2013
[INFO] Final Memory: 15M/81M
[INFO] ------------------------------------------------------------------------ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-31T21:59:52.810

`-P`也可以使用开关指定平台。在你的情况下（Java）说：

`mvn test -Pjava`

如果您想尝试`HTML`端口，请说：

`mvn -Phtml integration-test`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T01:19:09.913

playn网站是愚蠢的。

`mvn test`只运行测试套件。相反，你应该运行`mvn install`，你会看到类似：

```
...
[INFO] Waiting for initial device list from the Android Debug Bridge
[INFO] Found 1 devices connected with the Android Debug Bridge
[INFO] android.device parameter not set, using all attached devices
[INFO] Successfully uninstalled playn.showcase.android from <DEVICENAME>
[INFO] Found 1 devices connected with the Android Debug Bridge
[INFO] android.device parameter not set, using all attached devices
[INFO] Successfully installed /home/wires/workdir/wordquiz-playn/playn-samples/showcase/android/target/playn-showcase-android-1.0-SNAPSHOT.apk to <DEVICENAME>
... 
```

然后，您可以在手机上找到该应用程序，它被称为“Showcase”，并带有一个圆形的绿色笑脸图标。

您也可以从命令行启动应用程序，只需`cd android`和`mvn android:run`. 请注意，这只会*运行*您之前安装的应用程序，不会安装它。

# winmain - 通过 WinMain 和 CommandLineToArgvW 的命令行参数

> ID：14330454
> 
> 赞同：0
> 
> 时间：2013-01-15T02:56:27.293
> 
> 标签：winmain, command-line-arguments

我在尝试使用 WinMain 时尝试通过命令行（例如 -w 1280 -h 1024）通过我的程序传递参数时遇到问题。我浏览了我能找到的每个主题，并创建了构建和运行的代码，但参数被完全忽略了！

我的代码：

```
LPWSTR *szArgList;
int argCount;

szArgList = CommandLineToArgvW(GetCommandLineW(), &argCount);

for(int i = 1;i < argCount;i++)
{
    if(i + 1 != argCount)
    {
        if(szArgList[i] == L"-w")
        {
            width = _wtoi(szArgList[i+1]);
        }
        else if(szArgList[i] == L"-h")
        {
            height = _wtoi(szArgList[i+1]);
        }
    }
}
MSG msg;
BOOL done=FALSE;
if(MessageBox(NULL,"Fullscreen?", "my window", MB_YESNO|MB_ICONQUESTION)==IDNO)
{
    fullscreen=FALSE;
}
if(!CreateGLWindow("Window",width,height,16,fullscreen))
{
    return 0;
} 
```

我*试图*将其传递为“window.exe -w 800 -h 600”（当然不带引号）我的睡眠堕落代码中缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-16T10:12:35.680

```
szArgList[i] == L"-w"
szArgList[i] == L"-h" 
```

C and C++ will compare by pointer instead of character. use strcmp.

# ruby-on-rails - 在 Windows 中运行 bundle exec rake db:migrate 时出错？

> ID：14330456
> 
> 赞同：1
> 
> 时间：2013-01-15T02:56:43.730
> 
> 标签：ruby-on-rails, windows

当我在 Windows CMD 中运行 bundle exec rake db:migrate 时，它​​显示“ruby.exe 未被识别为内部命令......但 ruby​​.exe -v 工作正常......我现在该怎么办？

# php - 将网络服务器设置为 EBS 目录

> ID：14330465
> 
> 赞同：1
> 
> 时间：2013-01-15T02:57:45.697
> 
> 标签：php, amazon-web-services, amazon-ec2, webserver, amazon-ami

在我之前的问题 [中，无需每次都注册 AMI 即可保存对 EC2 实例的更改？](https://stackoverflow.com/questions/14245436/saving-changes-to-an-ec2-instance-without-having-to-register-an-ami-each-time) 我问我如何将文件保存到我的现场实例而不必`AMI`每次都注册一个新的。我进行了研究，看起来附加`EBS`卷是一种持久保存数据的方式，而无需在`AMI`每次进行更改时都进行注册。

我遇到的新问题是我需要`EBS`通过 cron “调用”卷中的文件并将它们视为网页。它们主要是`PHP`文件。

我尝试设置我的`EBS`under`/var/www/html`但 AWS 阻止我这样做建议我`/dev/sdf`改用

无论如何我可以在我的网络服务器下设置我的音量，以便我可以使用 cron`EBS`调用我的文件并将它们解释为有效文件？`EBS``PHP`

任何正确方向的提示将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T03:04:42.260

`/dev/sdf`是块设备并且`/var/www/html`是挂载点。它们是完全不同的东西。类似于实体书和书签。

您首先必须将 EBS 卷附加到您的实例。它将显示为`/dev/sdf`（或您指定的任何设备名称）。然后，您必须使用`mkfs.ext4 /dev/sdf`. 然后，您使用`mount /dev/sdf /var/www/html`. 要让它在启动时自动挂载，请编辑`/etc/fstab`以下内容并将其附加到文件中：

```
/dev/sdf    /var/www/html     ext4      defaults,noatime    0      0 
```

# c - st_mode 值不正确 - C

> ID：14330466
> 
> 赞同：0
> 
> 时间：2013-01-15T02:57:54.313
> 
> 标签：c, posix

*   编译器：代码：：块（GNU GCC）
*   平台：Windows(x86)

更新：我通过在调用 opendir() 之前使用 chdir() 更改当前工作目录解决了这个问题。所以我假设 opendir() 只能打开当前工作目录中的目录。所以我的新问题是，我正确吗？

我目前正在编写对window dir 命令的基本模仿。当“。”时，我的程序可以正常工作。通配符用作 opendir() 的参数。但是当我不使用通配符并指定一个目录时。我的程序不会打开指定给它的目录。例如，如果我键入 c:\windows 它将打开 c:\ 而每个文件的 st_mode 将是相同的。至少我假设它们都是相同的，因为所有文件类型（DIR、FILE、OTHER）都是相同的。

```
#include <stdio.h>
#include <string.h>

#include <sys/stat.h>
#include <dirent.h>

int main(int argc, char* argv[])
{
//'directory' points to the directory | 'directory_contents' is used with readdir() to read the directory's('directory') contents.
DIR *directory;
struct dirent *directory_contents;
struct stat file_info;

//IF no argument is present display the contents of the current directory | IF there is an arugment display the contents of that argument | ELSE Too many arguments
if (argc == 1)
{
    directory = opendir(".");
}
else if (argc == 2)
{
    //New Code
    chdir(argv[1]); directory = opendir(".");

    //Old Code
    directory = opendir(argv[1]);
}
else
{
    printf("ERROR: Extra arguments\n");
}

//Checks to see if the directory opened above was actually opened.
if (directory == NULL)
{
    printf("ERROR: Failed to open '%s'.\n", argv[1]);
    return 2;
}
else
{
    //WHILE there are file names to be read THEN read the file names
    while (directory_contents = readdir(directory))
    {
        stat(directory_contents->d_name, &file_info);

        //Test for directory
        if(S_ISDIR(file_info.st_mode))
        {
            //File type
            printf("<DIR>   ");

            //File name
            if(strlen(directory_contents->d_name) <= 15)
            {
                printf("%-15s", directory_contents->d_name);
            }
            else if(strlen(directory_contents->d_name) > 15)
            {
                printf("%.12s.. ", directory_contents->d_name);
            }

            //File premissions
            printf("<%c%c%c>\n", ((file_info.st_mode & S_IRUSR)==0) ? '-' : 'r', ((file_info.st_mode & S_IWUSR)==0) ? '-' : 'w', ((file_info.st_mode & S_IXUSR)==0) ? '-' : 'x');
        }
        //Test for a regular file.
        else if(S_ISREG(file_info.st_mode))
        {
            //File type
            printf("<FILE>  ");

            //File name
            if(strlen(directory_contents->d_name) <= 15)
            {
                printf("%-15s", directory_contents->d_name);
            }
            else if(strlen(directory_contents->d_name) > 15)
            {
                printf("%.12s.. ", directory_contents->d_name);
            }

            //File premissions
            printf("<%c%c%c> ", ((file_info.st_mode & S_IRUSR)==0) ? '-' : 'r', ((file_info.st_mode & S_IWUSR)==0) ? '-' : 'w', ((file_info.st_mode & S_IXUSR)==0) ? '-' : 'x');

            //File size
            if (file_info.st_size < 1000)
            {
                printf("<%-3i B>\n", file_info.st_size);
            }
            else if ( (file_info.st_size > 1000) && (file_info.st_size < 1000000) )
            {
                printf("<%-3i KB>\n", file_info.st_size/1000);
            }
            else if ( (file_info.st_size > 1000000) && (file_info.st_size < 1000000000) )
            {
                printf("<%-3i MB>\n", file_info.st_size/1000000);
            }
            else
            {
                printf("<%-3i GB>\n", file_info.st_size/1000000000);
            }
        }
        //Symbolic Link etc.
        else
        {
            //File type
            printf("<OTHER> ");

            //File name
            if(strlen(directory_contents->d_name) <= 15)
            {
                printf("%-15s", directory_contents->d_name);
            }
            else if(strlen(directory_contents->d_name) > 15)
            {
                printf("%.12s.. ", directory_contents->d_name);
            }

            //File premissions
            printf("<%c%c%c>\n", ((file_info.st_mode & S_IRUSR)==0) ? '-' : 'r', ((file_info.st_mode & S_IWUSR)==0) ? '-' : 'w', ((file_info.st_mode & S_IXUSR)==0) ? '-' : 'x');
        }
    }
}
} 
```

是的，我知道我输出的权限完全不相关，因为 Window 使用了 ACL。我只在 Windows 上编写这个程序，因为我现在别无选择，但它是为 Linux 操作系统设计的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:45:56.700

`stat(directory_contents->d_name,`

这条线是问题所在。该`d_name`字段只是文件的名称，没有任何目录。因此，除非该目录恰好是当前目录，否则调用`stat()`不会找到该文件。

# ruby-on-rails - 根据从 collection_set 中选择的另一个模型的 id 显示数据列表

> ID：14330470
> 
> 赞同：1
> 
> 时间：2013-01-15T02:58:38.083
> 
> 标签：ruby-on-rails, drop-down-menu

我有一个应用程序，它有 2 个模型，City 和 Neighborhood。在根页面上，我使用 collection_set 显示所有城市

```
<%= form_tag('/sales/neighborhood', :method => :get) %>`
  <%= collection_select(:neighborhood, :city_id, City.all, :id, :name) %>
  <%= submit_tag 'Go' %> 
```

然后，我想在下面的视图页面中包含一个包含与第一页上选择的城市 id 匹配的 city_id 的所有社区的下拉列表。我认为我的这部分是正确的，并且城市 ID 正在参数中传递，因为我得到了这样的 url `http://localhost:3000/sales/neighborhood?utf8=%E2%9C%93&city%5Bid%5D=1&commit=Go`。我只是无法获得要显示的社区列表。我在销售#neighborhood 中试过这个

```
<%= form_tag('sales/locations', :method => :get) %>
<%= collection_select(:location, :neighborhood_id, @nbhds.all, :id, :name) %>
<%= submit_tag 'Go' %> 
```

但我在下拉框中什么都没有。我什至尝试这样做只是为了获取一个与这样选择的城市的 id 匹配的 city_id 的社区列表......

```
<ul>
<% @nbhds.each do |n| %>
<li>
<%= n.name %>,
<%= n.city.name %>
</li>
<% end %>
</ul> 
```

然后，我希望应用程序根据从第二页的 collection_set 中选择的 neighbor_id 列出一组位置。谁能指出我正确的方向？我想我刚刚得到它，只是错过了一些东西。

我的模型如下所示：

```
class City < ActiveRecord::Base
  attr_accessible :name, :state
  has_many :neighborhoods
end 
```

和：

```
class Neighborhood < ActiveRecord::Base
  attr_accessible :city_id, :name
  belongs_to :city
  has_many :locations
end 
```

这是调用的销售控制器操作：

```
def neighborhood
@nbhds = Neighborhood.where(:city_id => params[:id])
end 
```

我认为我的问题是在 sales#neighborhood 中的 where 子句中或在我看来，但我将 ul 的代码从视图中的 rails 控制台中列出，它列出了属于该城市的所有社区，唯一的区别在于我使用的控制台

```
nbhds = Neighborhood.where(:city_id => 1) 
```

而不是通过参数访问它

如果有人可以，我仍然需要帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T20:54:25.393

根据收藏选择

```
<%= collection_select(:neighborhood, :city_id, City.all, :id, :name) %> 
```

您应该在控制器中获取的参数将类似于

```
params[:neighborhood][:city_id] 
```

但是根据您的 GET url `http://localhost:3000/sales/neighborhood?utf8=%E2%9C%93&city%5Bid%5D=1&commit=Go,`，您发送的两个参数似乎是 city[id]=1 和 commit=Go "city%5Bid%5D=1&commit=Go"

%5B & %5D 分别是 '[' & ']' 的 HTML url 编码。

如果这是正确的请求 URL，那么在您的控制器中，您宁愿使用参数 [:city][:id] 而不是 [:id]

```
def neighborhood
  @nbhds = Neighborhood.where(:city_id => params[:city][:id])
end 
```

在您开始尝试我提到的任何解决方案之前，请检查您的 rails 日志以确定哪个是正确的参数键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T20:24:03.590

您有`city_id`一个查询参数，但您`params[:id]`在控制器中查找。

我会将其更改为

```
def neighborhood
  city = City.find(params[:city_id])
  @nbhds = city.neighborhoods
end 
```

如果那不能解决您的问题，我明天会更好看:)

# r - 无法读取摘要功能中的列

> ID：14330472
> 
> 赞同：0
> 
> 时间：2013-01-15T02:58:58.093
> 
> 标签：r

```
dput(x)
structure(c("2005-01-01:  1  ", "2005-01-02:  1  ", "2005-01-03:  1  ", 
"2005-01-04:  1  ", "2005-01-05:  1  ", "2005-01-06:  1  ", "(Other)   :724  ", 
"Min.   :  1.700  ", "1st Qu.:  3.062  ", "Median :  4.345  ", 
"Mean   :  6.267  ", "3rd Qu.:  7.435  ", "Max.   : 22.100  ", 
"NA's   :666.000  ", "Min.   :  0.2490  ", "1st Qu.:  0.6182  ", 
"Median :  1.0500  ", "Mean   :  2.2679  ", "3rd Qu.:  2.7825  ", 
"Max.   : 10.8000  ", "NA's   :666.0000  ", "Min.   :101  ", 
"1st Qu.:101  ", "Median :101  ", "Mean   :101  ", "3rd Qu.:101  ", 
"Max.   :101  ", NA), .Dim = c(7L, 4L), .Dimnames = list(c("", 
"", "", "", "", "", ""), c("Dat", "Var1", "Var2", "Name")), class = "table") 
```

我正在尝试这样做：

```
x$Var1 
```

并收到此错误：

```
Error in x$Var1 : $ operator is invalid for atomic vectors 
```

任何想法，我在这里做错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T03:28:18.053

我在这里读了一些字，但是要为每个变量获取所需的数据类型，最好执行以下操作：

```
# create some test data
> test <- data.frame(Dat=1:10,Var1=1:10)
> result <- lapply(test,summary)
> result
$Dat
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
   1.00    3.25    5.50    5.50    7.75   10.00 

$Var1
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
   1.00    3.25    5.50    5.50    7.75   10.00 
```

这将允许您执行以下操作：

```
> result$Var1
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
   1.00    3.25    5.50    5.50    7.75   10.00 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T03:03:33.457

这有效：

```
> x[,'Var1']

"Min.   :  1.700  " "1st Qu.:  3.062  " "Median :  4.345  " "Mean   :  6.267  " "3rd Qu.:  7.435  " 

"Max.   : 22.100  " "NA's   :666.000  " 
```

一个简单的例子：

```
y <- rep(letters[1:3], each=10)
table(y)
## y
##  a  b  c 
## 10 10 10 

table(y)$a
## Error in table(y)$a : $ operator is invalid for atomic vectors 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T04:49:05.873

马修是给你误导性的建议，而不是 R 是误导你的实体。错误消息是准确的，如果您注意，那么您可以学到宝贵的经验。R 表实际上是矩阵。它们从 is.matrix 返回 TRUE 并且所有常用的访问方法都有效。该`$`运算符用于列表（其中“数据框”是子类......但“矩阵”不是。）请注意，他为您提供了一种访问方法，该方法使用矩阵响应命名维度索引的访问这一事实。

# xml - 使用c#将数据从xml加载到组合框

> ID：14330476
> 
> 赞同：0
> 
> 时间：2013-01-15T02:59:01.070
> 
> 标签：xml, c#-4.0

我将使用 c# 将数据从 xml 文件加载到组合框???代码未运行

**代码 ：**

```
 private void GetIrama()
  DataAkses.EKG.Referensi referen = new DataAkses.EKG.Referensi(_conn);
        DataTable data;
        string msg;
        XmlDocument xmldoc = new XmlDocument();
        int i = 0;
        string str = null;
        FileStream fs = new FileStream("REF_IRAMA_DSR.xml", FileMode.Open, FileAccess.Read);
        xmldoc.Load(fs);
        ListItemPopup irm;
        DataSet ds = new DataSet();
        cbiramadasar.Items.Clear();
        XmlNodeList colorList = xmldoc.SelectNodes("config/dataSources/dataSource");
        foreach (XmlNode dataSources in colorList)
        {
            cbiramadasar.Items.Add(dataSources.Attributes["DESCRIP"].Value.ToString());
        }
} 
```

# javascript - window.localStorage 上的原子操作

> ID：14330477
> 
> 赞同：4
> 
> 时间：2013-01-15T02:59:07.967
> 
> 标签：javascript, cordova, local-storage

设置 2 个或更多值时可以这样做吗？我正在使用 phonegap 并担心用户可能会在应用程序完成设置这两个值之前将其终止。

我意识到我可以将 W3C web sql 与事务一起使用，但不希望 sql 用于我正在做的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T04:36:55.780

默认情况下，不，没有锁定机制。但是，您可能还想查看这个[问题](https://stackoverflow.com/questions/4528599/localstorage-and-locking)，以及它引用的[这个站点。](http://balpha.de/2012/03/javascript-concurrency-and-locking-the-html5-localstorage/)如果以原子方式持久化这些值对您的程序至关重要，那么使用 SQL 事务会更好。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2016-04-06T23:15:36.447

保护写入：

```
localStorage.setItem("writing", "1");

localStorage.setItem("k1", "v1");
localStorage.setItem("k2", "v2");
...

localStorage.removeItem("writing"); 
```

然后，在加载数据库时：

```
if (localStorage.writing != undefined)
{
    treat the DB as corrupted
} 
```

# html - 如何在 HTML 中进行简单的电子邮件表单提交？

> ID：14330486
> 
> 赞同：3
> 
> 时间：2013-01-15T03:00:35.223
> 
> 标签：html

我尝试了 w3schools 但没有帮助，我也尝试了其他网站。我只想制作一个简短的 html 脚本，将电子邮件发送到电子邮件地址，但我一直在重新加载我的电子邮件收件箱，但什么也没有出现。你能帮我吗？

```
<form action="MAILTO:MY_EMAIL@yahoo.com" method="post" enctype="text/plain">
<input type="text" name="email" value="Email">
<input type="text" name="message" value="Message">

<input value="Submit" type="submit">
</form> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T03:09:11.637

您需要在此处使用服务器端脚本。单独的 HTML 对您没有帮助。HTML 只是前端逻辑。您需要一些后端脚本来接受您提交的这些数据并实际发送电子邮件。以 PHP 中的示例为例，假设您已设置服务器并且所有或您共享的

```
<form action="sendmail.php" method="post" enctype="text/plain">
<input type="text" name="email" value="Email">
<input type="text" name="message" value="Message">

<input value="Submit" type="submit">
</form> 
```

## 发送邮件.php

```
$email=$_POST['email'];
$message=json_encode($_POST);
$receiver="MY_EMAIL@yahoo.com";
$mailer="mailer@myservice.com";

mail($email,"Message for enquiry or whatever",$message,  array("from"=>$mailer)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T03:08:40.483

在某些时候，浏览器支持这种类型的形式。但是，它们现在都消失了——您将需要一个服务器端脚本来发送电子邮件。单独使用 HTML 是不可能的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T03:13:42.763

你混淆了一些事情。当您提交表单时，它会从客户端（浏览器）发送到您的服务器，服务器会对其进行操作。表单操作需要是处理请求的 URL。mailto: URI 方案不是要使用的有效操作。

你有两个选择：

您可以创建一个 mailto: 链接，如下所示：发送电子邮件

这将打开您的默认电子邮件客户端，

或者

*   您可以在服务器上放置与端点相对应的 URL，例如

    表单动作=“/发送/邮件”...

并让您的服务器发送电子邮件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-29T02:11:23.083

我相信最简单的方法是使用像[Zapier](https://zapier.com)或[IFTTT](https://ifttt.com)这样的服务。它们都提供了一种创建 Zaps/Applets 的方法，当您发布到特定 url 时可以发送电子邮件。

这就是 IFTTT![IFTTT](../Images/c5e304bed8154979b0143cf6ecbb624b.png)和 Zapier中的配置![扎皮尔](../Images/28c20cc17626d30779b47a1a7b8302bd.png)。

IFTTT 设置更简单，Zapier 有更多选择，例如发送到多个电子邮件。我相信 IFTTT 只允许您发送到您帐户的电子邮件。

# python - 重写 Python 代码

> ID：14330487
> 
> 赞同：0
> 
> 时间：2013-01-15T03:00:36.113
> 
> 标签：python, list, dictionary

我有一个`List`统计数据（从原始文本中提取），结构如下：

```
list_stats = [u'site1.com', u'3,346', u'23', u'0.68%', u'\u20ac0.04', u'\u20ac0.25', u'\u20ac0.85', u'site2.com', u'45,784', u'243', u'0.56%', u'\u20ac0.34', u'\u20ac0.32', u'\u20ac0.43', u'site3.com', u'9,396', u'432', u'4.54%', u'\u20ac890.24', u'\u20ac9.87', u'\u20ac8.93'] 
```

我想要一个`Dict`这样的：

```
sites = {
    u'site1.com' : [u'3,346', u'23', u'0.68%', u'\u20ac0.04', u'\u20ac0.25'],
    u'site2.com' : [u'45,784', u'243', u'0.56%', u'\u20ac0.34', u'\u20ac0.32'],
    u'site3.com' : [u'9,396', u'432', u'4.54%', u'\u20ac890.24', u'\u20ac9.87', u'\u20ac8.93']
} 
```

到目前为止，我已经对此进行了编码并且它正在工作：

```
sites = {}
for field in list_stats:
    if 'count' not in locals(): count = 0
    if count == 0:
            sites[field] = []
            current = field
    else:
            sites[current].append(field)
    count = count + 1
    if count == 7:
            count = 0 
```

然而，它似乎并不完美。我相信我们可以想出更干净和优雅的东西。你能更好地重新编码吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T03:14:12.730

如果您的 python 版本支持[dict comprehensions](http://www.python.org/dev/peps/pep-0274/) (2.7+)

```
{k: list_stats[i*7+1:(i+1)*7] for i, k in enumerate(list_stats[::7])} 
```

在这种情况下，它给出了

```
{u'site1.com': [u'3,346',
                u'23',
                u'0.68%',
                u'\u20ac0.04',
                u'\u20ac0.25',
                u'\u20ac0.85'],
 u'site2.com': [u'45,784',
                u'243',
                u'0.56%',
                u'\u20ac0.34',
                u'\u20ac0.32',
                u'\u20ac0.43'],
 u'site3.com': [u'9,396',
                u'432',
                u'4.54%',
                u'\u20ac890.24',
                u'\u20ac9.87',
                u'\u20ac8.93']} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T03:06:10.647

我认为您正在寻找[模运算符](http://docs.python.org/2/reference/expressions.html#binary-arithmetic-operations)[`enumerate`](http://docs.python.org/2/library/functions.html#enumerate)，.[`%`](http://docs.python.org/2/reference/expressions.html#binary-arithmetic-operations)

```
sites = {}
for count, field in enumerate(list_stats):
    if count % 8 == 0:
            sites[field] = []
            current = field
    else:
            sites[current].append(field) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T03:58:45.440

使用字典理解和[itertools.grouper](http://docs.python.org/2/library/itertools.html#recipes)解决方案

```
from itertools import izip_longest
>>> from pprint import PrettyPrinter
>>> pp = PrettyPrinter(indent = 4)
>>> pp.pprint({e[0]: e[1:] for e in izip_longest(*[iter(list_stats)]*7)})
{   u'site1.com': (   u'3,346',
                      u'23',
                      u'0.68%',
                      u'\u20ac0.04',
                      u'\u20ac0.25',
                      u'\u20ac0.85'),
    u'site2.com': (   u'45,784',
                      u'243',
                      u'0.56%',
                      u'\u20ac0.34',
                      u'\u20ac0.32',
                      u'\u20ac0.43'),
    u'site3.com': (   u'9,396',
                      u'432',
                      u'4.54%',
                      u'\u20ac890.24',
                      u'\u20ac9.87',
                      u'\u20ac8.93')} 
```

# matlab - 在另一个功能中使用选定的单选按钮

> ID：14330492
> 
> 赞同：1
> 
> 时间：2013-01-15T03:00:58.557
> 
> 标签：matlab, switch-statement, matlab-guide

我用 GUIDE 创建了 GUI。我在一个组中有 3 个单选按钮。当我运行程序并输入一些计算值后，我会得到压力、温度、升力/阻力的图（取决于我按下的单选按钮）。程序结构如下：

主代码 (GUI)：按下“计算”按钮后，将值传递给名为 Apollo 的函数。

Apollo 代码：包含计算压力、温度和升/拖力计算所需值的子函数。最后一个子函数称为 plot_data。此功能在一个图形中绘制航天器的形状，并在选择相应的单选按钮时在另一个图形中绘制压力、温度、升力/阻力。

问题 - 我是 GUI 编程新手。我在弄清楚如何确定从 GUI 中选择哪个单选按钮以及在我的 plot_data 函数中使用某种逻辑作为开关时遇到问题。我希望选择案例在 plot_data 函数中。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T12:34:08.383

*   如果您想在用户单击单选按钮后执行某些操作，则应编辑对象的“回调”属性。

*   如果你想从你的代码中测试单选按钮的状态，你应该检查“值”属性。所选按钮为 1，否则为 0。

*   浏览[本](http://www.youtube.com/watch?v=LCFGtUvRX6w)教程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T12:36:07.080

假设您的单选按钮句柄是`rb1`并且`rb2`它们存储在`handles`结构中。`'Value'`然后，您可以使用该属性检查它们是否被选中。

```
function apollo(hObj, eventdata, handles)
    if get(handles.hrb1, 'Value')
        % do stuff
    elseif get(handles.hrb2, 'Value')
        % do other stuff
    end
end 
```

* * *

**更新：**回应 OP 的评论`SelectionChangeFcn`：

如果您没有大量数据，您可以在开始时将它们全部绘制出来，然后更改`Visible`绘图的属性。

```
function cbSelectionChange(hObj, eventdata, handles)
    rbTag = get(eventData.NewValue, 'Tag');
    switch rbTag
        case 'rb1'
            set(handles.plotHandle1, 'Visible', 'On');
            set(handles.plotHandle2, 'Visible', 'Off');
        case 'rb2'
            set(handles.plotHandle2, 'Visible', 'On');
            set(handles.plotHandle1, 'Visible', 'Off');
    end
end 
```

如果您确实有很多数据，您可以从`SelectionChangeFcn`回调中调用 plot_data 函数。

```
function cbSelectionChange(hObj, eventdata, handles)
    rbTag = get(eventData.NewValue, 'Tag');
    switch rbTag
        case 'rb1'
            plot_data(yourArguments1);
        case 'rb2'
            plot_data(yourArguments2);
    end
end 
```

除非您对其进行修改，否则传递数据不会影响代码的性能。道格赫尔[在这里](http://www.mathworks.com/matlabcentral/answers/152)说：

> MATLAB 使用通常称为“写入时复制”的系统来避免在函数工作区中复制输入参数，除非您修改输入参数。如果您不修改输入参数，MATLAB 将避免制作副本。

# ssl - 服务器设计：发送用于 SSLTCP 唤醒的 UDP 数据包？

> ID：14330494
> 
> 赞同：0
> 
> 时间：2013-01-15T03:01:15.080
> 
> 标签：ssl, tcp, udp

我有一个服务器，它会为每个安全连接的客户端创建一个新线程。如果我使用线程池，这意味着我将同时拥有有限数量的客户端。然而，这意味着我不能监听所有客户端的端口。

我的想法是让客户端发送一个带有链接到该连接的 ID 的 UDP 数据包，以便他们可以重新建立连接，而不是将线程锁定 10-60 秒（服务器会将 SSLsockets 保留在内存中）。*这是解决问题的好方法吗？*- 我没有看到任何安全漏洞。

服务器是java，客户端是C++，这不会影响问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T07:08:04.290

你的问题没有意义。如果客户端想要重新连接它应该只打开一个新的套接字。您设置了至少一个额外的线程来监听 UDP 端口，然后......什么？它仍然必须使用线程池来处理该客户端，如果这是您自己施加的约束，或者启动一个新线程，在这种情况下，您可能一开始就没有线程池约束。

> 然而，这意味着我不能监听所有客户端的端口。

不，它没有。这只是意味着一些客户端会在线程池满时延迟服务，而极少数客户端会在积压队列满时连接失败。它根本不会削弱您*倾听*客户的能力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T03:20:45.190

如果您拥有的唯一端口是 TCP/443 (HTTPS)，该怎么办？如果 UDP 有防火墙（很有可能）怎么办？换句话说，你不应该在这张图片中引入 UDP。

即使在线程池场景中，您仍然可以知道连接到同一服务器端口的多个客户端之间的区别。

典型的解决方案是创建一组你要立即观察的套接字（在一个线程中）——在 C/C++ 中，它通常使用//`select()`来完成，而在 Java 中你可以使用.`poll()``epoll()``java.nio`

这样，如果任何客户端对作为服务器的您有话要说，您的`select`循环将立即注意到，为这些客户端提供服务并返回到`select()`，这消耗很少（实际上是 0）CPU 使用率。

这是一个如何[在 C 中进行选择循环的示例](http://www.tenouk.com/Module41.html)[以及 Java](http://www.cordinc.com/blog/2010/08/java-nio-server-example.html)中的类似示例。

# c# - 在字符串上使用 += 的任何问题

> ID：14330502
> 
> 赞同：1
> 
> 时间：2013-01-15T03:02:22.880
> 
> 标签：c#

正如标题所暗示的那样，有什么理由我不应该执行以下操作将某些内容附加到字符串的末尾：

```
string someString = "test";
someString += "Test"; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T03:04:24.523

如果做一次，没什么大不了的。获取两个字符串的内容，创建一个新字符串并将其分配给`someString`. 如果你多次执行上述操作（例如，在一个循环中），那么就有问题了。对于每次执行，您都在堆中分配一个新对象，一个新的字符串实例。这就是为什么最好使用基于缓冲区的类型，例如`StringBuilder`，如果您必须多次将内容附加到字符串。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T03:14:22.630

如果您执行以下操作：

```
var s = "abc";
s += "def";
s += "ghi"; 
```

（或多或少）发生的是，在第 2 行，在创建新字符串时，将 的内容`abc`复制到其中，然后将 的内容`def`复制到其中，然后将这个新字符串 ( `abcdef`) 分配给多变的。

然后在第 3 行，创建另一个新字符串，将变量 ( ) 的先前值的内容`abcdef`复制到其中，`ghi`然后将结果分配给变量。

`+=`如果您反复执行此操作，您可以看到字符串的开头在每次操作中都被一次又一次地复制。在建立长字符串的循环中，这可能会产生影响。这可以通过使用 a[`StringBuilder`](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder%28v=VS.100%29.aspx)或 a `List<string>`with来优化[`string.Concat()`](http://msdn.microsoft.com/en-us/library/vstudio/dd784338%28v=vs.100%29.aspx)，这样您就只能复制最终结果的每个部分一次（或其他与循环迭代次数无关的常数）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T03:09:50.297

你的方法会很好用。您可以使用 StringBuilder 作为替代方案。

```
var sb = new StringBuilder();
sb.Append("Foo");
sb.Append(" - ");
sb.Append("Bar"); 

string someString = sb.ToString(); 
```

# wordpress - 如何在wordpress中将帖子插入页面？使用 [简码]

> ID：14330504
> 
> 赞同：0
> 
> 时间：2013-01-15T03:02:27.630
> 
> 标签：wordpress, post, embed, shortcode

我正在使用 wordpress 作为我们公司网站的 CMS。我们有大约 5-10 个页面，我们希望在其中插入相同的号召性用语内容。

如何创建允许我将帖子中的内容嵌入页面的简码？

谢谢史蒂文。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T03:37:19.467

我没有对此进行测试，但您可能需要以下内容：

```
function create_call_to_action_shortcode( $atts ) {
        $call_to_action_content = '';
        $query = new WP_Query( array( 'p' => $post_id, 'no_found_rows' => true ) );

        if( $query->have_posts() ) {
            $query->the_post();

            remove_filter( 'the_content', 'sharing_display', 19);

            $call_to_action_content = apply_filters( 'the_content', get_the_content() );

            add_filter( 'the_content', 'sharing_display', 19);

            wp_reset_postdata();
        }

        return $call_to_action_content;
}

add_shortcode( 'call_to_action', 'create_call_to_action_shortcode' );` 
```

在您的页面（或其他帖子）中，您可以简单地插入`[call_to_action]`页面/帖子内容。

[您可以在此处](http://codex.wordpress.org/Shortcode_API)找到有关 shorcode 的更多信息。:)

**编辑：**

为了从帖子内容中删除共享按钮，您需要调用`remove_filter( 'the_content', 'sharing_display', 19);`. 我已经更新了上面的代码。

# android - 如何打开一个只占据三分之二屏幕的活动？屏幕的其余部分显示父活动

> ID：14330509
> 
> 赞同：0
> 
> 时间：2013-01-15T03:03:20.813
> 
> 标签：android

我想实现这样的功能，当我在父活动中点击按钮时，父活动向右或向左推，就像它被子活动推一样。打开的子活动占据 80% 的屏幕。而左父Activity的小部分占据了20%的屏幕。

如何让父子activity同时显示？</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T04:08:29.150

您不想使用`Activity`s，但`Fragment`为此使用 s。这就是他们的设计目的。请参阅[使用 Fragments 构建动态 UI 以](http://developer.android.com/training/basics/fragments/index.html)开始使用。[构建灵活的 UI](http://developer.android.com/training/basics/fragments/fragment-ui.html)部分显示了您正在寻找的设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T04:16:59.893

我确切地知道你在找什么——它们被称为滑动抽屉。[这是](https://github.com/jfeinstein10/SlidingMenu)一个很棒的图书馆。[这是](https://github.com/SimonVT/android-menudrawer)另一个。我更喜欢 feinstein 的库，因为它的错误更少。Jake wharton 的版本仍处于早期阶段（Jake 是一位出色的开发人员——您可能已经使用/听说过他著名的 actionbarsherlock 库）。这两个库也适用于旧版本的 Android，并使用 Fragments（因此，您还需要下载 android 的 v4 支持库）。

无论如何，所以有两种方法可以实现你想要的。您可以启用滑动并允许用户将顶视图滑出到角落（以您自己的方式占用 20% 的空间）。否则，您可以禁用滑动，并允许用户单击将触发滑动行为的按钮。

它最终会看起来像这样，我相信这就是你想要的：

![我正在做的一个项目](../Images/debe7161486b68b1dbb4b39f4fc343ea.png)

# android - 如何在 google play 中为私人频道添加应用程序

> ID：14330510
> 
> 赞同：1
> 
> 时间：2013-01-15T03:03:24.880
> 
> 标签：android

我想为私人频道分享我的 android 应用程序，我阅读了[文档](http://support.google.com/a/bin/answer.py?hl=en&hlrm=ru&hlrm=en&answer=2494992)- 尝试使用公司电子邮件将应用程序添加到 google play，但我没有看到，在 google play 中我应该在私人频道和公共频道之间进行选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T01:09:11.393

开发者控制台的预览版尚不支持私有渠道。我暂时使用旧版本的开发者控制台将应用发布到私人频道。

# perl - 静态链接 DBD::Pg（针对 libpq.so）但针对 Perl 动态链接？

> ID：14330520
> 
> 赞同：2
> 
> 时间：2013-01-15T03:04:06.207
> 
> 标签：perl, postgresql, static-linking, dbd, makemaker

我正在尝试通过 Makefile.PL 在 linux 主机上构建 DBD::Pg；我的要求是，我必须能够动态链接到 perl，但静态链接到 libpq.so（因为它可能并非在所有盒子上都可用）。

是否有捷径可寻？我尝试更改 Makefile.PL 的 LIBS 指令中的链接选项，但 MakeMaker 忽略了我的选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T03:08:05.130

IMO 您错误地指定了您的要求。

您不需要静态链接，`libpq`因为它可能并非在所有系统上都可用。

您通常应该做的是*动态链接到`libq`*并`LD_LIBRARY_PATH`在包装脚本中设置或使用`rpath`链接以便`libpq`可以找到。

请注意，无论是静态链接还是动态链接，如果某个其他模块将 a 加载`libpq`到同一个 Perl 中，您要么将两个不兼容`libpq`的 s 链接到同一个可执行文件（boom）中，要么其中一个模块使用`libpq`与它编译的模块不同的模块反对（也繁荣）。如果您使用 rpath 链接，`ld.so`对链接范围的认识可能会让您侥幸逃脱，但设置`LD_LIBRARY_PATH`几乎肯定会导致问题。

您可能想考虑使用`rpath`with `$ORIGIN`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T05:07:55.913

不幸的是，尝试进行静态链接`libpq`不太可能解决您的问题。

`libpq`本身很可能取决于`libc`( `glibc`)。如果您静态链接它，但其他模块动态链接，则意味着您将拥有 2 个副本`libc`：一个 inside `libpq`，另一个由 Perl 本身引用并动态加载。这是非常危险的情况，特别是如果某些过程使用分配内存`malloc`并将指针传回给调用者。如果你有 malloc 从一个副本分配的内存`libc`，但`free`由另一个副本编辑，你的程序（和 Perl）肯定会崩溃。

换句话说，如果你想去静态，你*必须*从头到尾——所有的东西，100% 必须是静态编译的，所以`libc`你的应用程序只使用一个副本。反之亦然——如果你是动态的，那么一切都应该是动态的，因为只使用一个`libc`. 仅当您的库不使用来自`libc`（甚至不`sprintf`）的任何内容时，这些规则才适用。

即使你在静态`libpq`编译中成功并且它会工作（不太可能），如果`DBI`没有安装怎么办？我已经看到足够多的 Linux 机器默认不存在 DBI。您是否也静态编译 DBI？如果`Perl`不存在（在 Linux 上不太可能），或者它很旧怎么办？

正确的解决方案是使用本机操作系统包管理器安装它：

```
sudo apt-get install libdbd-pg-perl   # Ubuntu/Debian
sudo yum install perl-DBD-Pg          # Redhat/Fedora 
```

如果您在相关主机上没有 root，也许您应该考虑使用`perlbrew`- 在主目录中安装您自己的 Perl。有了这个，您应该能够编译您自己的副本`libpq`并将其与动态提供的 Perl 链接`perlbrew`。

# javascript - 为什么此指令中的所有键绑定都被最后一个覆盖？

> ID：14330527
> 
> 赞同：0
> 
> 时间：2013-01-15T03:05:21.557
> 
> 标签：javascript, angularjs

我正在尝试创建一个指令，将特定按键绑定到控制器范围内指定的函数，但所有回调函数似乎都被包含绑定的对象中的最后一个回调函数覆盖。我尝试使用 keymaster.js 和 mousetrap.js 将事件绑定到相同的结果。

[JSFiddle 中的代码](http://jsfiddle.net/jwGXs/ "JSFiddle")

Javascript代码：

```
angular.module('app', ['directives', 'controllers']);

angular.module('directives', [])
.directive('keypress', [function () {
    return function (scope, element, attrs) {
        // console.log(scope, element, attrs);
        var attribute = scope.$eval(attrs.keypress || '{}');
        for (var k in attribute) {
            console.log('binding ' + k + ' as ' + attribute[k]);
            Mousetrap.bind(k, function() { return attribute[k](scope, element); });
        }
    };
}]);

angular.module('controllers', [])
.controller('TodoController', function($scope) {
    $scope.shortcuts = {
        'w': function () { console.log('w'); },
        's': function () { console.log('s'); },
        'a': function () { console.log('a'); },
        'd': function () { console.log('d'); }
    };
}); 
```

HTML 文件：

```
<html>
  <head>
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.0.3/angular.js"></script>
    <script src="https://raw.github.com/ccampbell/mousetrap/master/mousetrap.min.js"></script>
    <script src="/javascript/app.js"></script>
  </head>
  <body>
    <div ng-app="app">
      <div ng-controller='TodoController' keypress='shortcuts'>Foo</div>
    </div>
  </body>
</html> 
```

为什么无论我按“w”、“a”、“s”还是“d”，总是将“d”写入控制台？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T03:14:47.347

你陷入了一个常见的陷阱：JavaScript 中的变量始终是函数范围的。当你这样做时：

```
for (var k in attribute) {
    console.log('binding ' + k + ' as ' + attribute[k]);
    Mousetrap.bind(k, function() { return attribute[k](scope, element); });
} 
```

这样`bind()`，您将创建四个关闭变量的闭包`k`——但它们都关闭*同一个变量*。每次循环运行都不会得到一个新的。`console.log`完美的作品，因为立即使用的*价值*。`k`闭包在实际运行之前不会进行评估`k`，到那时，它的值已更改为循环完成时的值。

根据您的目标受众，迄今为止解决此问题的最简单方法是`let`使用`var`. `let`确实阻止了作用域（它适用于您的期望），但这是一项相当新的发明，我不确定它的支持程度。

否则，要获得新范围，您需要一个新函数：

```
for (var k in attribute) {
    (function(k) {
        console.log('binding ' + k + ' as ' + attribute[k]);
        Mousetrap.bind(k, function() { return attribute[k](scope, element); });
    })(k);
} 
```

这会将外部传递`k`给函数的内部`k`，每次都是不同的变量。你也可以把它拆分成一个小的工厂函数，但是对于这么小的东西，我不会打扰。

# kendo-ui - Kendo UI Grid Hide Column.Template

> ID：14330528
> 
> 赞同：1
> 
> 时间：2013-01-15T03:05:26.113
> 
> 标签：kendo-ui, kendo-grid

我正在使用 Kendo UI 的组件，但在 Grid 中有问题

如果使用下面的代码列“命令”没有显示在页面上，但是页面上的Change Sort 或者by grid，有一个页面刷新。

```
@(Html.Kendo().Grid(Model)
.Name("Grid")
.Columns(columns =>
{
    columns.Bound(p => p.cd_empresa).Visible(false);
    columns.Bound(p => p.cd_grupo).Visible(false);
    columns.Bound(p => p.descricao);
    columns.Template
    (
        @<text>
    Text 1
    Text 2

    </text>
    ).Title("Command").Width(80);

})
.ColumnMenu()
 .Selectable(selectable => selectable.Mode(GridSelectionMode.Single))
.Pageable()
.Sortable()
.Scrollable(scr => scr.Height(240))
.Filterable()
.DataSource(dataSource => dataSource
    .Ajax()
    .ServerOperation(false)
    .PageSize(7)
    .Read(read => read.Action("Index", "GrupoFiscal"))
    .Model(model => model.Id(p => p.cd_grupo))
    .Model(model => model.Id(p => p.cd_empresa))
) 
```

)

如果我把     

```
. DataSource (dataSource => dataSource
         . Ajax ()
         . ServerOperation (false)
         . PageSize (7)
         . Read (read => read.Action ("Index", "GrupoFiscal"))
         . Model (model => model.Id (p => p.cd_grupo))
         . Model (model => model.Id (p => p.cd_empresa))
     ) 
```

Ajax 无需刷新页面即可工作，但“命令”列没有显示。注意 此列包含编辑、删除和详细信息的链接

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T07:16:14.303

请参阅[文档](http://docs.kendoui.com/getting-started/using-kendo-with/aspnet-mvc/helpers/grid/troubleshooting#a-column-template-is-not-displayed)：

> 不显示列模板
> 
> 如果设置了服务器模板但为 ajax 绑定配置了网格，则会发生这种情况。设置 ClientTemplate 为好。如果仅设置了客户端模板但为服务器绑定配置了网格，也会发生这种情况。也设置模板。

# c# - C# 到 VB 地址

> ID：14330532
> 
> 赞同：1
> 
> 时间：2013-01-15T03:05:28.810
> 
> 标签：c#, vb.net

我比 c# 更喜欢 VB，所以我在 c# 中有这段代码：

```
 MouseGesture _mg;

    public Form1()
    {
        InitializeComponent();

        // b) Load a file with the commands and keys once in your application
        MouseGestureData.Instance.Commands.ReadFile( 
            Environment.CurrentDirectory + @"\MouseGestureCommands.xml" );

        // c) For each Form you want to use mouse gestures...
        _mg = new MouseGesture( this, null ); 
        _mg.MouseGestureEntered += new MouseGestureEventHandler( 
            OnMouseGestureEntered );
    }

    private void OnMouseGestureEntered( object sender, MouseGestureEventArgs e )
    {
        // d) In your registered MouseGestureEventHandler, handle the commands
        // you want
        MessageBox.Show( string.Format( "OnMouseGestureEntered:\n" +
                                        "   Command:\t{0}\n" +
                                        "   Key:\t\t{1}\n" +
                                        "   Control:\t\t{2}\n" +
                                        "   Bounds:\t\t{3}", 
                                        e.Command, e.Key, e.Control,
                                        e.Bounds.ToString() ) );
    } 
```

这是我可以从 VB.net 提出的：

```
Private _mg As MouseGesture

Public Sub New()
    InitializeComponent()

    MouseGestureData.Instance.Commands.ReadFile(Environment.CurrentDirectory + "\MouseGestureCommands.xml")

    _mg = New MouseGesture(Me, Nothing)
    _mg.MouseGestureEntered += New MouseGestureEventHandler(AddressOf OnMouseGestureEntered)
End Sub

Private Sub OnMouseGestureEntered(sender As Object, e As MouseGestureEventArgs)
    ' d) In your registered MouseGestureEventHandler, handle the commands
    ' you want
    MessageBox.Show(String.Format("OnMouseGestureEntered:" & vbLf & "   Command:" & vbTab & "{0}" & vbLf & "   Key:" & vbTab & vbTab & "{1}" & vbLf & "   Control:" & vbTab & vbTab & "{2}" & vbLf & "   Bounds:" & vbTab & vbTab & "{3}", e.Command, e.Key, e.Control, e.Bounds.ToString()))
End Sub 
```

问题在于**_mg.MouseGestureEntered**它的说法：

*Public Event MouseGestureEntered(sender As Object, e As DcamMouseGesture.MouseGestureEventArgs)'是一个事件，不能直接调用。使用“RaiseEvent”语句来引发事件。*

我需要将其转换为什么才能使其在 VB 中工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T03:07:53.727

代替：

```
_mg.MouseGestureEntered += New MouseGestureEventHandler(AddressOf OnMouseGestureEntered) 
```

尝试使用：

```
AddHandler _mg.MouseGestureEntered, AddressOf OnMouseGestureEntered 
```

# grails - 强制 Grails 重新制作链接

> ID：14330535
> 
> 赞同：0
> 
> 时间：2013-01-15T03:05:58.743
> 
> 标签：grails, internationalization, url-mapping

生成链接时，我需要覆盖 Grails 的默认行为。目的是根据当前语言环境更改 url。

我已经成功地覆盖了 DefaultUrlMappingsHolder，但它只适用于第一次创建链接时的第一个 Web 请求。Grails 似乎将链接存储在某个位置，因此下次我`createLink`使用相同的控制器和操作时，它只会显示链接，而无需重新运行创建链接的过程。因此，更改区域设置时链接不会更改。

我做了什么：

*   为每种语言创建 UrlMapping。例如`http://myapp/search`，`http://myapp/suche`两者都指向“SearchController”
*   覆盖 DefaultUrlMappingsHolder，当通过反向 url 映射创建链接时，它会考虑语言环境并为每个语言环境选择正确的 urlmapping 并创建正确的 url。

我应该怎么做才能阻止 Grails 的这种行为并强制链接生成再次运行？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T05:25:33.433

你安装的是什么版本的 Grails？在 Grails 中有一个关于它的[jira 。](http://jira.grails.org/browse/GRAILS-3385?page=com.atlassian.jira.plugin.system.issuetabpanels%3achangehistory-tabpanel)它在以后的版本中得到修复。

# java - 在 Android 中使用主题

> ID：14330537
> 
> 赞同：0
> 
> 时间：2013-01-15T03:06:06.373
> 
> 标签：java, android, themes, settings, android-preferences

我试图在 Holo.Light 和 Holo (Dark) 之间切换，因此我的应用程序中的所有内容都更改为用户在首选项中设置的主题。

我一直在查看一些已完成的开源应用程序，但似乎无法使其与我的项目一起使用，对此的任何帮助将不胜感激。

我在 DashboardActivity.java 中遇到的 Current ISSUE 是：

*“我遇到了“setTheme（Integer.parseInt（pref.getString（”*

## 仪表板活动（更新）

```
public class DashboardActivity extends Activity {

public static final int THEME_BLACK = R.style.DarkThemeAndroid;
public static final int THEME_WHITE = R.style.LightThemeAndroid;
public static final int THEME_WHITE_BLACK = android.R.style.Theme_Holo_Light_DarkActionBar;

@Override
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
            // I've having issue with the "pref.getString" i've tried "Settings.getString" and get error about needing a getString method is needed in Settings.java
    setTheme(Integer.parseInt( pref.getString("selectedTheme", String.valueOf(R.style.LightThemeAndroid) )));
    setContentView(R.layout.dashboard_layout);
          // the rest of my code
      )
    ) 
```

## 设置更新）

```
public class Settings extends PreferenceActivity implements
    OnSharedPreferenceChangeListener {

final static String[] mThemeEntries = {
    "Default (Light)", 
    "Dark"
    };
final static String[] mThemeValues = {  
    String.valueOf(R.style.LightThemeAndroid), 
    String.valueOf(R.style.DarkThemeAndroid)
    };
    protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // Loads the XML preferences file.
    addPreferencesFromResource(R.xml.settings);
//  SharedPreferences pref = PreferenceManager.getDefaultSharedPreferences(getActivity());
    SharedPreferences pref = PreferenceManager.getDefaultSharedPreferences(this);

    ListPreference listPref = (ListPreference)findPreference("selectedTheme");

    listPref.setEntries(mThemeEntries);
    listPref.setEntryValues(mThemeValues);

    listPref.setValue( pref.getString("selectedTheme", String.valueOf(mThemeValues[0]) ) ); 
```

XML 资源

主题.xml

```
 <style name="LightThemeAndroid" parent="android:style/Theme.Holo.Light"> 
   </style>         

 <style name="DarkThemeAndroid" parent="android:style/Theme.Holo">
   </style> 
```

设置.xml

```
 <ListPreference
android:title="Themes"
android:summary="Change the UI of the application"
android:key="theme"
android:entries="@array/themesReturnValue"
android:entryValues="@array/themesDisplayWord" 
android:defaultValue="Theme1" /> 
```

数组.xml

```
 <string-array name="themesReturnValue">
   <item>Light</item>
    <item>Dark</item>
    <item>LightActionBar</item>
         </string-array>   
<string-array name="themesDisplayWord">
    <item>Theme1</item>
    <item>Theme2</item>
    <item>Theme3</item>
        </string-array> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T03:28:48.950

**ContextThemeWrapper**类存在非静态 getTheme() 方法，该方法返回 Theme 对象类型。将 getTheme() 方法的名称更改为不同的名称，例如 getThe()，您应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T15:16:36.120

首先就像codeMagic说的，你以非静态方式调用getTheme，我也会把主题相关的常量放在1个类中。尝试使 getTheme 成为静态方法（尽管我可能会为主题创建一个单独的类）。除此之外，这是我 2 天前正在研究的一个解决方案，因为我在 google 或这里找不到任何关于更动态的流体主题偏好的答案。

我从我的偏好片段开始（在你的情况下，活动）。然后将主题和值声明为数组...

```
public class LayoutFragment extends PreferenceFragment {

final static String[] mThemeEntries = {
    "Default (Light)", 
    "Dark"
    };
final static String[] mThemeValues = {  
    String.valueOf(R.style.Theme_Default), 
    String.valueOf(R.style.Theme_Dark)
    }; 
```

然后在我的 oncreate 方法中，我设置了这些值（注意，在 xml 中我没有设置这些值，并且在 xml 文件中没有对这些值的引用）

```
 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);                 
    addPreferencesFromResource(R.xml.pref_layout);
    SharedPreferences pref = PreferenceManager.getDefaultSharedPreferences(getActivity());

    ListPreference listPref = (ListPreference)findPreference("selectedTheme");

    listPref.setEntries(mThemeEntries);
    listPref.setEntryValues(mThemeValues);

    listPref.setValue( pref.getString("selectedTheme", String.valueOf(mThemeValues[0]) ) );

} 
```

请注意，我已将这些值转换为字符串，不要问为什么，但我在尝试存储这些资源 id 的 int 值时遇到了很多麻烦（这也是为什么不能选择 xml 值的原因）...

现在，当我需要根据用户偏好设置主题时......我只是打电话

```
setTheme(Integer.parseInt( pref.getString("selectedTheme", String.valueOf(R.style.Theme_Default) ))); 
```

当然，您可以在某处提供一个静态方法来进行铸件等，而无需为每个活动编写它。

编辑：你不需要数组是静态的，当我尝试不同的事情让它工作时，我必须像这样离开它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T03:24:15.870

`getTheme()`是一个非静态方法，您正试图以静态方式调用它（而不是从实例变量）。您需要一个对象实例来调用非静态方法。此外，文档状态

> 请注意，这应该在上下文中实例化任何视图之前调用（例如，在调用 setContentView(View) 或 inflate(int, ViewGroup) 之前）。

[文档](http://developer.android.com/reference/android/view/ContextThemeWrapper.html#getTheme%28%29)

# jquery - ScrollTo 与 Mousewheel.js 冲突，需要更具体的事件吗？

> ID：14330541
> 
> 赞同：0
> 
> 时间：2013-01-15T03:06:43.110
> 
> 标签：jquery, html, jquery-plugins, scrollto, side-scroller

我正在建立一个横向滚动网站。我正在使用[CSS-Tricks中的 Mousewheel.js 来启用](http://css-tricks.com/examples/HorzScrolling/)[Ariel Flesler](http://flesler.blogspot.com/2007/10/jqueryscrollto.html)中的sidescrolling 和 scrollTo以跳转到站点中的特定点（我还没有真正掌握，但我认为这不是重点）。当我尝试一起使用它们时，我在控制台中得到了这个：

```
Uncaught TypeError: Object #<Object> has no method 'mousewheel' 
```

鼠标滚轮利用这个脚本：

```
$(function(){
    $("#container").wrapInner("<table cellspacing='30'><tr>");
    $(".post").wrap("<td></td>");
    $("body").mousewheel(function(event, delta) {
        this.scrollLeft -= (delta * 30);
        event.preventDefault();
    });   
}); 
```

我怀疑该事件不够具体，但我不确定如何解决。如果我的问题还不是很明显，我是一个 jQuery 菜鸟。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-26T21:56:36.697

我没有包含对 html 页面可见的 scrollTo 副本。

# java - Selenium 无法在 html 页面中找到任何元素

> ID：14330546
> 
> 赞同：0
> 
> 时间：2013-01-15T03:07:24.087
> 
> 标签：java, selenium, selenium-webdriver

我正在尝试制作一个小型 Java 应用程序。可以登录我的大学门户网站，我在以下代码中使用了 Selenium：

```
 //some import statements 
 public class Portal{
     public Portal(){
          File file = new File("C:/chromedriver.exe");
          System.setProperty("webdriver.chrome.driver", file.getAbsolutePath());

          HtmlUnitDriver driver = new HtmlUnitDriver();
          String target = "http://portal.kfupm.edu.sa/cp/home/loginf";
          driver.get(target); 

          ArrayList <WebElement> inputs =   (ArrayList<WebElement>) driver.findElements(By.tagName("input"));
          System.out.println(inputs.size());
          for(WebElement input : inputs){
                System.out.println(input.getAttribute("value") + "  " + input.getAttribute("name"));

          // to insure the link is displaying something
               ChromeDriver driver1 = new ChromeDriver();
                driver1.get(driver.getCurrentUrl()); 

      }
      public static void main(String [] args){
          new Portal();
      }

 } 
```

问题是当我使用这个目标（我的大学门户网站）时，我得到 input.size() = 0; 虽然，我确信有（输入）tagName 的元素。此外，无论我使用 (By) 类的方法是什么，我都会得到相同的结果。
但是，当我将目标更改为任何链接时（例如：“http://www.google.com”或“http://www.facebook.com”，我会在输入 ArrayList 中获取元素（tagName 的所有元素） （输入）在目标 html 页面中）。任何人都可以告诉我问题是什么，我该如何解决？提前谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T04:19:07.077

使用标签输入找到零元素的原因是所有元素都位于框架标签内。Selenium 能够看到当前窗口，并且在框架标签内定义的所有元素（即在框架集内）对它是不可见的。

要查看元素，您需要先切换框架，以便 selenium 在目标框架内而不是在外部窗口中具有控制权。试试这个

```
driver.swtichTo().frame(0); // this will move selenium control inside first frame 
```

# jquery - 从生成的 jQuery 通过 AJAX 提交

> ID：14330551
> 
> 赞同：1
> 
> 时间：2013-01-15T03:08:30.310
> 
> 标签：jquery, ajax, form-submit

页面 dslogin.php 从侧面板加载到

```
<div id="workarea"> </div> 
```

加载页面的链接非常简单：

```
<a id=\"ds_action\" href=\"javascript:outputResults('dslogin.php','workarea','db=$k');\"> Connect to $k</a> 
```

但是当 dslogin 获取 $_GET["db"] 时，它会生成一个显示在工作区 div 中的表单。现在表格也很简单：

```
function getCredentials($db,&$u,&$p)
{
echo "Connecting to Database $db: <br/>\n";
echo "<form id=\"dblogin\"  action=\"dsconnect.php\" method='post'> \n" ;
echo" Please enter your username and password if you wish. <br/> \n" ;
echo "Username: <input type='text' name='username' > \n " ;
echo "Password: <input type='password' name='password' > \n" ;
echo "<input type='submit' value='Login' name='Login'> <br/> \n" ;
echo "<input type='hidden' value=$db name='database'> <br/> \n" ;
echo "</form>" ;
echo "<div id=\"local\"> </div>";
} 
```

用户提交表单后，应该在以下代码中拦截它的 ajax 代码

```
 <script>
 $(document).ready(function() 
 {
    $('#dblogin').submit(function() 
    { // catch the form's submit event
        $.ajax({ // create an AJAX call...
            data: $(this).serialize(), // get the form data
            type: $(this).attr('method'), // GET or POST
            url: $(this).attr('action'), // the file to call
            success: function(response) { // on success..
                $('#local').append(response); // update the DIV
            }
        });
        return false; // cancel original event to prevent form submitting
    });
    });
</script> 
```

这是行不通的。我的想法是，当页面第一次加载 ajax 脚本时：

```
$(document).ready(function() 
{
    $('#dblogin').submit(function()  ... 
```

没有指向 dblogin 表单的链接，因为它尚未加载。

当您单击提交时，您将获得操作页面 dsconnect.php，而不是按预期将其输出附加到表单页面。

有没有办法使这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T03:11:23.537

将其更改为委托事件：

```
$('#{containerid}').on('submit', '#dblogin', function()  ... 
```

我认为你的容器`#workarea`虽然不是很清楚。

# sockets - C 编程 - 发送 HTTP 请求

> ID：14330553
> 
> 赞同：2
> 
> 时间：2013-01-15T03:08:41.107
> 
> 标签：sockets, httprequest, rfc

我最近的任务是使用套接字编程在 C 中创建一个代理。代理只需要使用 HTTP/1.0 构建。经过几个小时的工作，我制作了一个可以与 Chromium 一起使用的代理。可以加载各种网站，例如google和几个.edu网站；但是，许多网站给我一个找不到页面的 404 错误（这些链接在不通过我的代理时工作正常）。这些 404 错误甚至发生在站点的根地址“/”上……这没有意义。

这可能是我的 HTTP 请求的问题吗？从浏览器发送的 HTTP 请求被解析为 HTTP 请求方法、主机名和端口。例如，如果从浏览器解析 GET 请求，则会与提供的主机名和端口建立 TCP 连接，并以以下格式发送 HTTP GET 请求：

```
GET /path/name/item.html HTTP/1.0\r\n\r\n 
```

此格式适用于少量网站，但会为其余网站创建 404 错误消息。这可能是问题吗？如果没有，还有什么可能给我这个问题？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T17:23:19.420

一个可能的解释是您设计了一个 HTTP/1.0 代理，而现在共享托管站点上的任何网站都只能使用 HTTP/1.1（嗯，不完全是，但我会在一秒钟内解决这个问题）。

这不是*唯一*可能的问题，但你必须举一个网站的例子，这个网站像这样失败，以获得更多的想法。

您似乎了解 HTTP 的基础知识，客户端与服务器建立 TCP 连接并通过它发送 HTTP 请求，该请求由请求行（例如`GET /path/name/item.html HTTP/1.0`）和一组可选的标头行组成，全部由 CRLF 分隔（即`\r\n`）。整个批次以两个连续的 CRLF 序列结束，此时另一端的服务器将请求与资源匹配并发回适当的响应。资源全部由路径（例如`/path/name/item.html`）标识，路径可以是真实文件，也可以是动态页面。

自从它第一次被发明以来，HTTP 的大部分内容几乎没有变化。但是，请考虑客户端如何找到要连接的服务器。你给它的是一个 URL，像这样：

```
http://www.example.com/path/name/item.html 
```

从这里它会看到**方案**是`http`，所以它知道它正在建立一个 HTTP 连接。下一部分是**主机名**。在原始 HTTP 下，假设每个主机名都解析为自己的 IP 地址，然后客户端连接到该 IP 地址并发出请求。由于当时每台服务器只有一个网站，因此效果很好。

然而，随着网站数量的增加，为每个网站分配不同的 IP 地址变得越来越困难，特别是因为许多网站非常简单，可以很容易地在同一台物理机器上共享。将多个域指向同一个 IP 地址很容易（DNS 系统使这变得非常简单），但是当服务器收到 TCP 请求时，它只会知道它有一个对其 IP 地址的请求——它不知道是哪个网站寄回。因此，添加了一个新`Host`标头，以便客户端可以在请求本身中指示它正在请求哪个主机名。这意味着一台服务器可以托管许多网站，并且网络服务器可以使用`Host`标头来告诉在响应中服务哪个网站。

现在这很常见 - 如果您不使用`Host`标头，那么许多网站将不知道您要使用哪个服务器。通常发生的情况是，他们假设他们拥有的列表中有一些默认网站，并且很可能没有您要的文件。即使您要求`/`，如果您不提供`Host`标头，那么网络服务器可能会给您一个 404，如果它是这样配置的 - 如果没有合理的默认网站给您，这并不是不合理的。

如果您想了解更多技术细节，可以[在 HTTP RFC](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.23)中找到`Host`标头的描述。

此外，网站可能只是简单地拒绝 HTTP/1.0 -如果这种情况发生在这么多网站上，我会*有点惊讶，但你永远不知道。*不过，请先尝试`Host`标题。

与某些人认为的相反，没有什么可以阻止您将`Host`标头与 HTTP/1.0 一起使用，尽管您可能仍然会发现一些不喜欢这样的服务器。它比支持完整的 HTTP/1.1 要容易一些，这需要您了解分块编码和其他复杂性，尽管对于简单的示例代码，您可能只需添加`Host`标头并将其称为 HTTP/1.1（我不建议这样做）但是，对于生产代码来说已经足够了）。

无论如何，您可以尝试添加`Host`标头来提出您的请求，如下所示：

```
GET /path/name/item.html HTTP/1.0\r\n
Host: www.example.com\r\n
\r\n 
```

为了便于阅读，我将它分成几行 - 你可以看到末尾仍然有空白行。

即使这不会导致您看到的问题，现在`Host`标题也是一个非常好的主意，因为肯定有一些网站没有它就无法工作。如果您仍然遇到问题，请给我一个不适合您的网站示例，我们可以尝试找出原因。

如果我所说的任何内容不清楚或需要更多详细信息，请询问。

# php - PHP crypt() Blowfish 函数不工作

> ID：14330555
> 
> 赞同：5
> 
> 时间：2013-01-15T03:08:58.263
> 
> 标签：php, bcrypt, blowfish, crypt

这是我第一次在 PHP 中使用 crypt() 函数，我不知道为什么它不起作用。我的代码基于这篇文章：[http ://www.techrepublic.com/blog/australia/securing-passwords-with-blowfish/1274](http://www.techrepublic.com/blog/australia/securing-passwords-with-blowfish/1274)

```
function blowfishHash ($pw) {
   //generate random salt
   $salt = "$2y$10$";
   for ($i = 0; $i < 22; $i++) {
       $salt .= substr("./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789", mt_rand(0, 63), 1);
   }
  $hash = crypt($pw, $salt);

  //printout to file
  $file = fopen("debug.txt", "w+");
  fwrite($file, "\n\n\n".$pw);
  fwrite($file, "\n\n\n".$salt);
  fwrite($file, "\n\n\n".$hash);
  fclose($file);

  return $hash;
} 
```

我用示例密码“password”调用了该函数。

结果盐是：`$2y$10$NzRQNjTRfP4jXKvb4TCO.G`
但密码是`"$2mV0NZp92R3g"`——这似乎太短了。

有人可以帮我弄清楚我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T17:33:50.543

正如您在评论中所说，您使用的是 PHP 5.2.x。

Blowfish 实现仅在 PHP >= 5.3.x 中可用。如果由于任何原因无法安装较新的 PHP 版本，您可以[在此处](https://stackoverflow.com/questions/11637445/to-use-crypt-blowfish-on-php-5-2-that-doesnt-support-it)查看有关如何使 Blowfish 与较旧的 PHP 版本一起工作的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T19:40:13.187

由于`crypt`在 PHP 5.2 中不支持 CRYPT_BLOWFISH，因此默认将 salt 解释为 CRYPT_DES 样式的 salt。请注意，输出以“$2”开头，这是 CRYPT_DES 从 salt 输入中选择并添加到散列之前的两个字符 salt，并且输出长度与 CRYPT_DES 输出长度精确匹配。

有趣的是，您可以通过简单地将盐截断为两个字符，在支持 CRYPT_BLOWFISH 的更高版本的 PHP 中实现相同的结果。IE：

```
crypt('password', '$2y$10$NzRQNjTRfP4jXKvb4TCO.G')   /* in PHP 5.2 */ 
 ==
crypt('password', '$2')   /* in PHP 5.4 */ 
```

从理论上讲，如果在 PHP 5.2 上错误地使用了 CRYPT_BLOWFISH 样式的盐，这对于向后兼容可能会派上用场。

这实际上让我最近有点困惑，因为根据[PHP crypt 文档](http://php.net/manual/en/function.crypt.php)，“$”字符不是 CRYPT_DES 的有效盐输入，其中说：

> 基于 DES 的标准哈希，带有来自字母表“./0-9A-Za-z”的两个字符盐。在 salt 中使用无效字符会导致 crypt() 失败。

`crypt()`但是这里的“$”字符显然在 v5.2 和 v5.4 中都被接受了。

`crypt`如果像文档所说的那样实际返回失败，而不是接受“$”并默认为 CRYPT_DES，这将更加清晰和安全。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-15T22:43:32.157

这是我的河豚加密功能....

```
<?php
    function bcrypt($input, $salt=null, $rounds=12) {
        if($rounds < 4 || $rounds > 31) $rounds = 12;
        if(is_null($salt)) $salt = sprintf('$2a$%02d$', $rounds).substr(str_replace('+', '.', base64_encode(pack('N4', mt_rand(), mt_rand(), mt_rand(), mt_rand()))), 0, 22);
        return crypt($input, $salt);
    }
    $hash = bcrypt('password');
    if($hash = bcrypt('password', $hash)) {
        // password ok
    }

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-01T19:33:07.833

最初只支持以 开头的盐的河豚散列`$2a$`。

`$2x$`PHP 5.3.7中`$2y$`添加了 Blowfish 模式以应对潜在的高位攻击。

您的 PHP 5.2.17 不支持`$2y$`Blowfish 模式。

这就是为什么您的代码不起作用的原因。

# facebook - FQL 查询以获取发布到我的页面的所有提要

> ID：14330556
> 
> 赞同：0
> 
> 时间：2013-01-15T03:08:58.540
> 
> 标签：facebook, facebook-fql, facebook-page

我正在管理这个 Facebook 页面。 [http://www.facebook.com/Ippintestpage](http://www.facebook.com/Ippintestpage)

我想通过在 Facebook 页面中显示为“Ippintestpage 上其他人的最新帖子”的 fql 获取所有提要。

我尝试在 Graph API Explorer 上进行此查询，

```
SELECT message FROM stream WHERE source_id = 200034893468318 
```

但得到的结果比我预期的要少。

```
{
  "data": [
    {
      "message": "Facebookページへの投稿テスト"
    }, 
    {
      "message": "testtesttest"
    }, 
    {
      "message": "テスト"
    }, 
    {
      "message": ""
    }
  ]
} 
```

fql 查询不正确吗？如何获取 Facebook 页面上的所有提要？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T03:19:00.600

在处理来自页面的提要时，您永远不要期望获得所有帖子。

一些用户在其隐私设置下阻止所有应用访问。您将在 Facebook Web 应用程序中看到这些，但它们永远不会被 Graph API 或 FQL 返回。

如果您作为应用程序进行身份验证，您也不会看到任何将隐私设置为“所有人”以外的帖子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T04:39:56.570

试试这个

> 从流中选择消息，其中 actor_id ！= 200034893468318 AND source_id = 200034893468318

# c# - 在 C# 中将 ID3v2 轨道号写为字符串的好方法？

> ID：14330564
> 
> 赞同：1
> 
> 时间：2013-01-15T03:10:02.900
> 
> 标签：c#, id3, taglib-sharp, id3v2

如果这个问题已经在这个网站的某个地方得到了回答，请原谅我，但是当我搜索它时我没有找到任何东西。我使用 taglib-sharp 为 C# 中的 .mp3 文件编写了 ID3v1/2 标记编辑器，并且 taglib-sharp 将轨道编号视为 uint 编号。根据[id3.org](http://id3.org/id3v2.3.0)：

> 'Track number/Position in set' 框架是一个数字字符串，其中包含音频文件在其原始录音中的顺序号。这可以用一个“/”字符和一个包含原始录音上轨道/元素总数的数字字符串进行扩展。例如“4/9”。

我个人不使用“/”，但我倾向于写“03”而不是“3”。有没有一种简单的方法可以直接将轨道号作为字符串写入标签，而不是通过 uint？

另外，附带问题：taglib 似乎不支持某些标签，特别是 URL、Orig。艺术家、出版商和编码。知道如何处理这些吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T05:05:20.920

**更新**：由于此答案最初是编写的，`GetTextAsString`因此已[公开](https://github.com/mono/taglib-sharp/commit/4699f75777500088a41d5b519cac54fd10e9843d)。此答案已更新以反映这一点。

TagLib# 中的 Track 字段是标签字段的各种标记规范意图的通用近似和简化。对于 ID3v2 标签，这是假设 TRCK 字段由一个或两个由斜杠分隔的数字字符串组成，并根据规范将它们转换为数字。

也就是说，它是一个文本字段，你可以用它做任何你想做的事情。您只需要访问文本框架即可读取或写入它。

写作很容易通过`Id3v2.Tag.SetTextFrame`：

```
var tag = (Id3v2.Tag)file.GetTag(TagTypes.Id3v2, true); // Get or create ID3v2 tag.
tag.SetTextFrame("TRCK", "03"); // Add or update TRCK frame. 
```

由于 TRCK 是一个单字符串文本框架，因此可以类似地使用以下命令读取它`Id3v2.Tag.GetTextAsString`：

```
var tag = (Id3v2.Tag)file.GetTag(TagTypes.Id3v2, false);
var trackNumber = tag?.GetTextAsString("TRCK"); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-15T04:33:29.700

不，您不能将 a 保存`string`到 a`int`或`uint`不先转换它。为什么不`uint`根据您正在使用的库将值 3 保存为 a 并使用以下内容：

```
uint track = 3;
string strTrack = track.ToString("00"); 
```

显示它？

如果其许可证允许，您仍然可以修改库以满足您的需要。

我在过去快速浏览了 taglib sharp，它远不能支持标签中的所有现有框架。它仅支持最常见的框架。对于其他类，我认为您可以使用某种默认类，但我不记得名称了。否则，您仍然可以自己去扩展库，除非有其他可用的此类库，我不知道。

# python - python未能将浮点数转换为int

> ID：14330565
> 
> 赞同：0
> 
> 时间：2013-01-15T03:10:06.900
> 
> 标签：python, casting

我在理解为什么 python 不会将浮点数转换为 int 时遇到了一点问题。以下是代码片段。

```
import time

now = time.time()
print type(now)
int(now)
print type(now) 
```

这就是我得到的结果，我不太明白为什么。有任何想法吗？提前致谢

```
<type 'float'>
<type 'float'> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T03:11:36.640

您必须`now`像这样重新分配：

```
now = int(now) 
```

`int()`转换不会就地进行 - 它仅返回转换结果，这就是您需要重新分配新`now`值的原因。

作为一般规则，**函数**返回一个新值，而**方法**在原地运行。关于函数和方法的区别，请看[这个问题](https://stackoverflow.com/q/155609/1907098)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T03:11:09.673

`int()`不能就地操作。您仍然必须覆盖`now`：

```
now = int(now) 
```

虽然我只是一次做这一切：

```
now = int(time.time()) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-15T03:12:08.093

您现在从未设置为 int 版本

```
import time
now = time.time()
print type(now)
now = int(now) # set now to int version
print type(now) 
```

# html - jquery mobile中的标签宽度

> ID：14330568
> 
> 赞同：0
> 
> 时间：2013-01-15T03:10:47.710
> 
> 标签：html, jquery-ui, css, jquery-mobile

我正在使用 jquery mobile 构建我的 ui，但问题是我无法调整标签的宽度，你能告诉我如何将我所有标签的宽度设置为 108px

[http://jsfiddle.net/GZaqz/](http://jsfiddle.net/GZaqz/)

下面的代码

```
<div data-role="fieldcontain" class="ui-field-contain ui-body ui-br">
<label data-role="none" for="basic">Zip</label>
<input style="width: 280px;" data-role="none" type="text"
    name="name" id="basic" value="">
</div> 
```

我正在尝试为所有具有恒定宽度的标签实现与此类似的事情

![在此处输入图像描述](../Images/76f66f0656909f2fd0d97d3fe97f50eb.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T03:18:32.403

您的标记存在一些问题 -`for`标签的属性与输入的名称不同。这会阻止 jQuery Mobile 正确设置您的内容的样式。例如，这个：

```
<div data-role="fieldcontain" class="ui-field-contain ui-body ui-br">
    <label data-role="none" for="basic">Phone</label>
    <input style="width: 280px;" data-role="none" type="text" name="name" id="basic" value=""  />
</div> 
```

应该改为这个（注意`for`和`name`属性现在匹配）：

```
<div data-role="fieldcontain" class="ui-field-contain ui-body ui-br">
    <label data-role="none" for="basic">Phone</label>
    <input style="width: 280px;" data-role="none" type="text" name="basic" id="basic" value=""  />
</div> 
```

完成此操作后，jQuery Mobile 应该使您的表单几乎按照您想要的方式工作。

# jsp - Struts2 JSP 映射

> ID：14330573
> 
> 赞同：2
> 
> 时间：2013-01-15T03:11:30.873
> 
> 标签：jsp, map, struts2

在jsp中，我有：

```
<s:set name="gender" value="#{'':'gender', 'm':'Male', 'f':'Female'}"/> 
```

该属性`user.gender`可以为空`m`、 或`f`。我想要的是显示`Male`或`Female`从定义的`gender`地图中显示。

我试过`<s:property value="gender[%{#user.gender}]"/>`但没有用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T05:07:00.110

OGNL 中的单引号单字符是实际`char`的 s，而不是`String`s。

如果用户的性别是 a `String`，则地图应使用双引号单字符作为键。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T08:46:52.890

您需要使用`#`符号来访问`<s:set>`标签中设置的值。

```
<s:property value="#gender[user.gender]"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T05:34:11.277

尝试这个

```
<s:property value="getText('properties.name')"/> //this is to fetch value from properties file 
```

所以你的问题的答案是这样的

```
<s:property value="getText('user.gender')"/> 
```

# c - 在 C 中使用 atoi() 函数

> ID：14330574
> 
> 赞同：-2
> 
> 时间：2013-01-15T03:11:35.057
> 
> 标签：c

我尝试阅读某些网站上的 atoi() 描述，但无法得到答案。什么会

```
int i = atoi("000000000000000000003");  
printf("%d", i); 
```

导致？它会是 3 还是会返回错误（在 atoi() 的情况下为 0）？
我目前没有任何可用的编译方法，所以我不能只测试它。

编辑：意外地将 000000000000000000003 而不是“000000000000000000003”作为参数。

Edit2：关于测试的部分不再相关，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T03:13:32.577

**根本**不要使用[`atoi()`](http://en.cppreference.com/w/cpp/string/byte/atoi)。它不安全，因为它不检查输入。

考虑[`strtol()`](http://en.cppreference.com/w/cpp/string/byte/strtol)改用。

关于你的问题：它不会工作。参数必须是 const char* ，您在示例中拥有的是 int。（编辑后，它将返回**3**）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T03:25:19.087

根据引用 C90 标准的[POSIX](http://pubs.opengroup.org/onlinepubs/009695399/functions/atoi.html)`atoi`是 base-10 的包装器[`strtol`](http://pubs.opengroup.org/onlinepubs/009695399/functions/strtol.html)，并且该函数期望

> 如果 base 的值介于 2 和 36 之间，则主题序列的预期形式是表示整数的字母和数字序列，其基数由 base 指定，可选地以“+”或“-”符号开头。…</p>
> 
> 主题序列被定义为输入字符串的最长初始子序列，从具有预期形式的第一个非空白字符开始。如果输入字符串为空或完全由空白字符组成，或者如果第一个非空白字符不是符号或允许的字母或数字，则主题序列不应包含字符。

所以零不会影响它；它将返回 3。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T03:25:25.307

根据[这个](http://en.cppreference.com/w/cpp/string/byte/atoi)参考：

> 该函数首先根据需要丢弃尽可能多的空白字符（如在 isspace 中），直到找到第一个非空白字符。

在您的示例中，找到的第一个字符是非空格（0！=空格字符）所以..

> 从此字符开始，采用可选的初始加号或减号，后跟尽可能多的以 10 为基数的数字，并将它们解释为数值。

这意味着该函数读取字符，只要它们是基于 10 作为基数的数字，直到 if 找到一个不是字符，例如 a`(`或`l`etter 或空终止字符`\0`。然后...

> 将其内容解释为整数，该整数作为 int 值返回。

所以你的例子是这样的： `int i=000000000000000000003;` 如果你`printf("%d", i)`这个值机器将输出`3`，就像你的问题一样。

# extjs - EXTJS 饼图.. 显示前 10 个值

> ID：14330576
> 
> 赞同：2
> 
> 时间：2013-01-15T03:11:47.610
> 
> 标签：extjs, extjs4.1

在 EXTJS PIE 图表中，我想对前 10 个值进行排序并以降序显示。

目前它从存储和显示中获取所有记录。我只需要前10名。

谁能指导我解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T07:02:49.683

我不认为显示前 10 个值是“饼图”的工作。您应该提供一个流程，将原始商店转变为您真正需要的东西。替换原始商店的插件可能是一个想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T12:17:18.650

您可以尝试对商店进行排序和过滤。我在 ExtJS 文档中操作了示例代码，并认为数据是按给定顺序显示的。也许如果您将分拣机应用于存储，您可能会获得预期的效果。至于过滤：找到前十个值的最小值并应用过滤器，只留下高于它的值。可能有效，但我没有尝试过。

# javascript - 分别滚动[上+下]和[左+右]的事件？

> ID：14330582
> 
> 赞同：0
> 
> 时间：2013-01-15T03:12:38.583
> 
> 标签：javascript, jquery, jquery-events, preventdefault

我想这样做，所以当用户向上/向下滚动时，它会向左/向右滚动。

我正在使用这个[jquery mousewheel 插件](https://github.com/brandonaaron/jquery-mousewheel)（我向其他实现相同的人开放）。

```
$("body").mousewheel(function(event, delta, deltaX, deltaY) {
    event.preventDefault();
    this.scrollLeft -= (delta * 30);
}); 
```

上`preventDefault()`/下和左/右都触发。事实证明，向上/向下的功能很好用，但是这段代码让左/右变得可怕，它的滚动非常不稳定。我只想`preventDefault()`向上/向下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-08T01:07:53.960

[使用鼠标滚轮水平滚动页面](https://css-tricks.com/snippets/jquery/horz-scroll-with-mouse-wheel/)

添加部门：

```
<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js?ver=1.3.2'></script>
<script type='text/javascript' src='/js/jquery.mousewheel.min.js'></script> 
```

添加此脚本：

```
$(function() {

   $("body").mousewheel(function(event, delta) {

      this.scrollLeft -= (delta * 30);

      event.preventDefault();

   });

}); 
```

[演示](https://css-tricks.com/examples/HorzScrolling/)

# java - java.net.InetSocketAddress 和 java.net.SocketAddress 支持 IPv6？

> ID：14330583
> 
> 赞同：1
> 
> 时间：2013-01-15T03:12:43.227
> 
> 标签：java, ipv6, ipv4

java.net.InetSocketAddress 和 java.net.SocketAddress 是否支持 IPv6？

因为我研究并尝试的两个类不能让我查看 ipv6 连接它只能查看 ipv4 连接任何人都尝试过并且能够编辑代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-06T15:36:25.030

对您的问题的部分回答，即使它可能为时已晚而无法立即使用 =)。

我有以下代码行尝试连接到两个不同的 IP 地址：

```
// Defined port must be 13; that is NIST's default listening port.
SocketAddress socketAddress = new InetSocketAddress(currentIpAddress, 13);
socket = new Socket();
socket.connect(socketAddress, nistServerTimeoutInMilliseconds); 
```

第一个地址工作正常：'206.246.122.250'

第二个地址在第三行抛出“java.net.SocketException：协议族不可用”。该地址是“2610:20:6F15:15::27”。

一开始我以为问题是Java 1.7中的InetSocketAddress不支持IPv6，但我发现Java中实际上有两个类继承自InetAddress类：Inet4Address和Inet6Address

[http://docs.oracle.com/javase/6/docs/api/java/net/Inet4Address.html](http://docs.oracle.com/javase/6/docs/api/java/net/Inet4Address.html) [http://docs.oracle.com/javase/7/docs/api/java/net/Inet6Address.html](http://docs.oracle.com/javase/7/docs/api/java/net/Inet6Address.html)

这解释了为什么我的代码在尝试使用 IPv6 格式构建 Inet4Address 失败时，它也可以解释您的问题。

希望这会有所帮助=)

PS InetAddress 和 InetSocketAddress 不是同一个类，但是通过测试您正在处理的 IP 地址类型，可能有办法解决这个问题。

# javascript - 图像未显示，高度和宽度调整为 0*0，但原始图像存在

> ID：14330585
> 
> 赞同：1
> 
> 时间：2013-01-15T03:12:54.327
> 
> 标签：javascript, html, image

我正在尝试为 CAKEPHP 实现一个静态 HTML 模板，但遇到了问题。主要问题是我无法弄清楚问题出现的原因。下面是可以说明更多信息的图像。

![图像滑块不显示](../Images/10f241e2429fc3a1f629c8bd80982448.png)

在静态 HTML 版本中显示的图像（滑块）没有在 CAKEPHP 版本上显示，虽然我已确保包含所有必要的 CSS 和 JS 文件，但还没有解决方案。以前没遇到过这个问题，请问是什么原因造成的呢？

我试图在代码中修复图像的宽度和高度，但图像仍未显示并显示为 0*0 像素，如图像中所示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T09:57:06.097

当您一次包含多个版本的 jquery 库时，可能会出现此问题。确保您只加载了单个 jquery 文件。

包含的 jquery-slider 可能在两个不同版本的 jquery 文件之间混淆了。

# javascript - 在 JavaScript 中全球化大量变量的快速方法？

> ID：14330586
> 
> 赞同：5
> 
> 时间：2013-01-15T03:12:57.150
> 
> 标签：javascript, global-variables

我需要对我的代码进行一些快速测试（在函数中获取一些变量的值），并且我想将它们全球化，这样我就可以通过控制台访问它们。

我知道这种方法：

```
function foo() {
  var foo = 'foo';
  window.foo = foo; // Make foo global
} 
```

但是，如果我有这样的事情怎么办：

```
function foo() {
  var foo1 = 'foo';
  var foo2 = 'foo';
  var foo3 = 'foo';
  var foo4 = 'foo';
  var foo5 = 'foo';
  var foo6 = 'foo';
  var foo7 = 'foo';
  var foo8 = 'foo';
} 
```

什么是全球化所有这些变量的更快方法，而不用`window.foo1 = foo1`,`window.foo2 = foo2`等？

我不希望这是一个代码高尔夫问题，只是一个普通的编程问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T03:17:21.593

我不认为有办法做到这一点。看到这个：

[访问所有局部变量](https://stackoverflow.com/questions/3831932/access-all-local-variables)

您是否尝试过在控制台中简单地调试？使用 Chrome，您可以设置断点，然后检查所有值。看看这个教程：

[https://developers.google.com/chrome-developer-tools/docs/scripts-breakpoints](https://developers.google.com/chrome-developer-tools/docs/scripts-breakpoints)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T03:22:18.170

为什么不是单个`globals`对象而不是一堆变量？

```
function foo() {
    window.globals = {
        foo1 = 'foo',
        foo2 = 'foo',
        foo3 = 'foo',
        foo4 = 'foo',
        foo5 = 'foo',
        foo6 = 'foo',
        foo7 = 'foo',
        foo8 = 'foo'
    };
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T03:21:48.750

如果它们都只是这样命名，您可以利用一个鲜为人知的技巧，变量实际上是字典：

```
function foo() {
  var foo1 = 'foo';
  var foo2 = 'foo';
  var foo3 = 'foo';
  var foo4 = 'foo';
  var foo5 = 'foo';
  var foo6 = 'foo';
  var foo7 = 'foo';
  var foo8 = 'foo';
  for (var i = 1; i <= 8; i++) {
    window["foo" + i] = eval("foo" + i);
  }
}

document.write("Running foo...<br/>");
foo();

document.write("Printing foo...<br/>");
for (var i = 1; i <= 8; i++) {
  document.write(window["foo" + i]);
}

document.write("<br/>Just one: " + foo3);// Normal variable notation 
```

# ruby - 在 JMS 队列中使用 Ruby，而不是 JRuby？

> ID：14330594
> 
> 赞同：5
> 
> 时间：2013-01-15T03:14:27.343
> 
> 标签：ruby, jms

使用 Ruby 而不是 JRuby 将消息推送到 JMS 队列（由 Tibco EMS 托管）的最简单方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-05T12:11:31.607

[Stomp](http://docs.codehaus.org/display/STOMP/Home)是一种允许[任意客户端](http://docs.codehaus.org/display/STOMP/Clients)附加到 Stomp 消息代理的机制。[StompConnect](http://docs.codehaus.org/display/STOMP/StompConnect)将 JMS 提供者转变为 Stomp 代理，包括 Tibco EMS（不是 Tibco RV）。

我不确定这是否是最简单的；其他选项包括使用 Tibco EMS 的 C++ 客户端并使用 Ruby FFI 机制连接它。我不知道哪个是“最好的”。

# ruby-on-rails - 调用倒数模型方法时出现“Nil 类的未定义方法”错误

> ID：14330596
> 
> 赞同：0
> 
> 时间：2013-01-15T03:14:54.263
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我目前有两种模式`School`，`Course`其中学校`has_many`课程和课程`belongs_to`学校。此外，School 和 Course 是嵌套资源，其中 School 是父资源，Course 是子资源。

我在 Rails 控制台中创建了几条测试记录，以便与诸如孩子何时调用父母`Course.first.school`成功执行并返回学校的所有相关信息等查询`Course.first`相关联。

但是，当放入控制器函数时，我会在以下行中收到错误“nil:NilClass 的未定义方法‘学校’”：

`redirect_to school_course_path(@course.school, @course)`

..好像该`.school`部分未被识别（在控制台中的位置）。为什么会这样，我该如何克服这个错误？谢谢！

编辑 - 正如建议的那样，可能是我的 @course 实例变量没有在控制器中的方法之间传递。我试图通过私有方法传递它们，但它仍然给我同样的错误。这是我的代码（背景：模型`Question`belongs_to `Course`，`Course`有很多问题。课程*不是*嵌套路线的一部分）

```
class QuestionsController < ApplicationController

  def new
    @course = Course.find(params[:course]) #confirmed working
    self.current_course = @course #I attempt to set current_course, a private method 
    @question = Question.new
  end

  def create
    @question = Question.new(params[:question]) #also works, in rails console all the questions confirms to have rails id
    if @question.save
      redirect_to school_course_path(current_course.school, current_course) #source of my frustrations - continues to returns same error message
    else
      render 'new'
    end
  end

  private 

  def current_course=(course)
    @current_school = course
  end

  def current_course
    @current_course
  end

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T04:23:41.640

如果您的关系按照我认为的方式建立，那么应该可以：

```
def create
  @question = Question.new(params[:question])
  @course = @question.course
  if @question.save
    redirect_to school_course_path(@course.school, @course)
  else
    render 'new'
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T03:56:34.410

确保您在创建操作中有类似的内容：

```
@course = Course.new(params[:course]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T04:17:26.683

您的代码没问题，您的重定向似乎有问题.. 将其重定向到 root_path 并检查它是否有效？

# jquery - 函数中的 jQuery 函数

> ID：14330602
> 
> 赞同：0
> 
> 时间：2013-01-15T03:15:35.320
> 
> 标签：jquery, function

我正在尝试编写一个具有多个回调函数的函数。我这样做是对的还是有更好的方法？

```
 $('.question a').click(function(ev) {
        $('.answers').load(url, function() {
            $('#AnswerBox').addClass('mceEditor', 
                function() {tinyMCE.init({
                    theme : "advanced",
                    mode : "specific_textareas",
                    editor_selector : "AnswerBox",
                    elements: "AnswerBox",
                    plugins : "fullpage",
                    theme_advanced_buttons3_add : "fullpage",
                });
            })
        })              
    return false;
    }); 
```

我知道你可以用这种方式做一个 2 层的功能，但你还能做更多吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T03:22:41.463

您可以嵌套超过“3 层深度”。但是，您使用的`jQuery.addClass`方法不正确。

见[http://api.jquery.com/addClass/](http://api.jquery.com/addClass/)

那很可能是您的问题所在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T03:26:11.907

任何函数范围都可以包含其他函数定义，然后可以包含更多定义等等，只要你想去。

当您这样做时，这些函数定义仅在该函数范围内是本地的。由于任何函数范围都可以包含其他函数定义，因此它可以随心所欲地深入，可能仅受给定 javascript 限制中的某些内部内存或堆栈限制的限制。实际上，除非您故意制作一些没有实际用途的曲折结构，否则您不太可能达到极限。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T03:26:46.820

是的，你可以嵌套更多的函数，但是回调函数用于知道异步事件何时完成。设置类不会异步发生，所以你在[addClass](http://api.jquery.com/addClass/)中没有任何回调函数。所以它应该是这样的，

```
$('.question a').click(function(ev) {
        $('.answers').load(url, function() {
            $('#AnswerBox').addClass('mceEditor'). 
                tinyMCE({
                    theme : "advanced",
                    mode : "specific_textareas",
                    editor_selector : "AnswerBox",
                    elements: "AnswerBox",
                    plugins : "fullpage",
                    theme_advanced_buttons3_add : "fullpage"
            });
        });         
    return false;
    }); 
```

# c++ - 使用 cmake 配置 SFML2 时出现“不支持的架构”

> ID：14330603
> 
> 赞同：1
> 
> 时间：2013-01-15T03:15:36.200
> 
> 标签：c++, makefile, cmake, mingw, sfml

我正在尝试让 SFML2 在 Windows 8 64 位下编译，但似乎 cmake 一直返回此错误：

```
CMake Error at cmake/Config.cmake:14 (message):
  Unsupported architecture
Call Stack (most recent call first):
  CMakeLists.txt:20 (include) 
```

这是在 Config.cmake 中失败的地方：

```
if(${CMAKE_SYSTEM_NAME} MATCHES "Windows")
    set(WINDOWS 1)

    # detect the architecture (note: this test won't work for cross-compilation)
    include(CheckTypeSize)
    check_type_size(void* SIZEOF_VOID_PTR)
    if("${SIZEOF_VOID_PTR}" STREQUAL "4")
        set(ARCH_32BITS 1)
    elseif("${SIZEOF_VOID_PTR}" STREQUAL "8")
        set(ARCH_64BITS 1)
    else()
        message(FATAL_ERROR "Unsupported architecture")
        return()
    endif() 
```

作为旁注，我使用 MinGW 作为编译器，cmake 中的配置是使用“MinGW MakeFiles”

我不知道为什么很难注意到我的系统架构。任何指针都会非常有帮助！

谢谢^^

# javascript - 我的 Backbone.js 应用程序在页面加载时抛出 JSON.Parse SyntaxError

> ID：14330604
> 
> 赞同：1
> 
> 时间：2013-01-15T03:15:44.423
> 
> 标签：javascript, jquery, json, backbone.js, icanhaz.js

我正在尝试用用 Backbone.js 编写的全新界面替换现有的 Web 应用程序。最终，这将是非常棒的，因为该应用程序由一个用 Python + CherryPy 编写的宁静 API 支持，并且讨厌刷新其主机页面。

我的第一步是尝试使用在 'net. 这是我想出的：

```
<!DOCTYPE html>
<html>
<head>
    <script type="application/javascript" src="/static/js/jquery-1.8.2.min.js"></script>
    <script type="application/javascript" src="/static/js/underscore-min.js"></script>
    <script type="application/javascript" src="/static/js/json.js"></script>
    <script type="application/javascript" src="/static/js/ICanHaz.min.js"></script>
    <script type="application/javascript" src="/static/js/backbone.js-0.9.9-min.js"></script>

    <script type="application/javascript">
        $(function() {
            //logical model of a user
            var User = Backbone.Model.extend({});

            //visual representation of a user
            var CurrentUserView = Backbone.View.extend({
                render: function() {
                    this.el = ich.user(this.model.toJSON());
                    return this;
                }
            })

            //create a user and drop its representation into the DOM
            var currentUser = new User({username: "hello world"});
            var view = new CurrentUserView({model: currentUser});
            $('.content').append(view.el.render());
        });
    </script>
</head>
<body>
    <div class='content'>
        <p>The user representation should show up below this paragraph</p>
    </div>

    <!--ICanHaz user template -->
    <script id="user" type="text/html">
        <ul class="user">
            <li><a href="#">{{ username }}</a></li>
            <li><a href="#" id="logout">logout</a></li>
        </ul>
    </script>
</body>
</html> 
```

不幸的是，当我在 Firefox 中加载此页面时，用户表示不会显示在 .content div 中，并且错误消息会`SyntaxError: JSON.parse: unexpected character`显示在 Web 控制台中。

该问题似乎与 CurrentUserView 有关，因为以下代码正是我想要的：

```
$(function() {
    //logical model of a user
    var User = Backbone.Model.extend({});

    //create a user and drop its representation into the DOM
    var currentUser = new User({username: "hello world"});
    $('.content').append(ich.user(currentUser.toJSON()));
}); 
```

这里发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T13:28:45.720

After a good night's sleep and a second pass at the code, it looks like I had downloaded the [json](https://github.com/douglascrockford/JSON-js/blob/master/json.js) library instead of the required [json2](https://github.com/douglascrockford/JSON-js/blob/master/json2.js) library. Everything is working as expected now.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T03:36:05.303

不知道为什么这会给你一个解析错误，但我认为`$('.content').append(view.el.render());`应该是`$('.content').append(view.render().el);`.

# java - 为什么 onClickListener 在我启动时会导致我的应用程序崩溃？

> ID：14330606
> 
> 赞同：0
> 
> 时间：2013-01-15T03:16:12.743
> 
> 标签：java, android, xml, android-viewpager, onclicklistener

我是一名新程序员，当我在启动画面上按下按钮时，我试图加载新视图。我的启动画面是一个有 4 个视图的 viewPager。我在那些视图上有一个按钮，当按下时我想要加载一个列表视图视图。但是当我添加 onClickListener 时，它会在应用程序启动后立即崩溃。这几天我一直在努力解决这个问题，现在我真的很绝望！提前致谢。

我试图找出致命异常 MAIN 的含义，但这似乎是每个程序的不同问题。

```
public class Splash extends Activity {

ImageButton listButton;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.splash);

    SplashPager adapter = new SplashPager();
    ViewPager myPager = (ViewPager) findViewById(R.id.splashPager);
    myPager.setAdapter(adapter);
    myPager.setCurrentItem(0);

    listButtonListener();
}

public void listButtonListener() {
    listButton = (ImageButton) findViewById(R.id.splashB);
    listButton.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View arg0) {
            startActivity(new Intent("com.example.survtest1.Main"));
        }
    });
}
} 
```

//崩溃日志

```
01-14 22:12:32.069: W/dalvikvm(14733): threadid=1: thread exiting with uncaught exception (group=0x40207560)
01-14 22:12:32.079: E/AndroidRuntime(14733): FATAL EXCEPTION: main
01-14 22:12:32.079: E/AndroidRuntime(14733): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.survtest1/com.example.survtest1.Splash}: java.lang.NullPointerException
01-14 22:12:32.079: E/AndroidRuntime(14733):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1658)
01-14 22:12:32.079: E/AndroidRuntime(14733):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1674)
01-14 22:12:32.079: E/AndroidRuntime(14733):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
01-14 22:12:32.079: E/AndroidRuntime(14733):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:942)
01-14 22:12:32.079: E/AndroidRuntime(14733):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-14 22:12:32.079: E/AndroidRuntime(14733):    at android.os.Looper.loop(Looper.java:130)
01-14 22:12:32.079: E/AndroidRuntime(14733):    at android.app.ActivityThread.main(ActivityThread.java:3733)
01-14 22:12:32.079: E/AndroidRuntime(14733):    at java.lang.reflect.Method.invokeNative(Native Method)
01-14 22:12:32.079: E/AndroidRuntime(14733):    at java.lang.reflect.Method.invoke(Method.java:507)
01-14 22:12:32.079: E/AndroidRuntime(14733):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:892)
01-14 22:12:32.079: E/AndroidRuntime(14733):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:650)
01-14 22:12:32.079: E/AndroidRuntime(14733):    at dalvik.system.NativeStart.main(Native Method)
01-14 22:12:32.079: E/AndroidRuntime(14733): Caused by: java.lang.NullPointerException
01-14 22:12:32.079: E/AndroidRuntime(14733):    at com.example.survtest1.Splash.listButtonListener(Splash.java:40)
01-14 22:12:32.079: E/AndroidRuntime(14733):    at com.example.survtest1.Splash.onCreate(Splash.java:31)
01-14 22:12:32.079: E/AndroidRuntime(14733):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-14 22:12:32.079: E/AndroidRuntime(14733):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1622)
01-14 22:12:32.079: E/AndroidRuntime(14733):    ... 11 more
01-14 22:12:32.079: E/AndroidRuntime(14733): [Blue Error Handler] Make Debugging Report file for main
01-14 22:12:32.079: E/AndroidRuntime(14733): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.survtest1/com.example.survtest1.Splash}: java.lang.NullPointerException
01-14 22:12:32.079: E/AndroidRuntime(14733):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1658)
01-14 22:12:32.079: E/AndroidRuntime(14733):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1674)
01-14 22:12:32.079: E/AndroidRuntime(14733):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
01-14 22:12:32.079: E/AndroidRuntime(14733):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:942)
01-14 22:12:32.079: E/AndroidRuntime(14733):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-14 22:12:32.079: E/AndroidRuntime(14733):    at android.os.Looper.loop(Looper.java:130)
01-14 22:12:32.079: E/AndroidRuntime(14733):    at android.app.ActivityThread.main(ActivityThread.java:3733)
01-14 22:12:32.079: E/AndroidRuntime(14733):    at java.lang.reflect.Method.invokeNative(Native Method)
01-14 22:12:32.079: E/AndroidRuntime(14733):    at java.lang.reflect.Method.invoke(Method.java:507)
01-14 22:12:32.079: E/AndroidRuntime(14733):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:892)
01-14 22:12:32.079: E/AndroidRuntime(14733):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:650)
01-14 22:12:32.079: E/AndroidRuntime(14733):    at dalvik.system.NativeStart.main(Native Method)
01-14 22:12:32.079: E/AndroidRuntime(14733): Caused by: java.lang.NullPointerException
01-14 22:12:32.079: E/AndroidRuntime(14733):    at com.example.survtest1.Splash.listButtonListener(Splash.java:40)
01-14 22:12:32.079: E/AndroidRuntime(14733):    at com.example.survtest1.Splash.onCreate(Splash.java:31)
01-14 22:12:32.079: E/AndroidRuntime(14733):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-14 22:12:32.079: E/AndroidRuntime(14733):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1622)
01-14 22:12:32.079: E/AndroidRuntime(14733):    ... 11 more 
```

//显现

```
<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.survtest1.Splash"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.example.survtest1.Main"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

//xml布局

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:id="@+id/splash" 
android:background="#000000" >

<ImageView

    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal"
    android:src="@drawable/intro__1" />

   <Button
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:text="aaaaaaaaaaaaaaaaaa" 
       android:layout_gravity="bottom" 
       android:layout_marginLeft="75dp"
       android:id="@+id/splashB" 
       android:onClick="startActivity" />

</FrameLayout> 
```

我只是尝试添加 android:onClick 并且它仍然崩溃

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T03:51:55.403

你的问题是这样的：

```
01-14 22:12:32.079: E/AndroidRuntime(14733): Caused by: java.lang.NullPointerException
01-14 22:12:32.079: E/AndroidRuntime(14733):    at com.example.survtest1.Splash.listButtonListener(Splash.java:40) 
```

如果我猜测（因为您没有粘贴活动的完整源代码，我不确定哪一行是第 40 行），我会说您的错误在这一行：

```
listButton = (ImageButton) findViewById(R.id.splashB); 
```

具体来说，您的布局很可能缺少`<ImageButton android:id="@+id/splashB" ...>`元素。因此，您的`listButton`为空，这会导致`NullPointerException`下一行出现。

**更新：**您的应用程序崩溃，因为虽然它`<Button>`的 id 为`splashB`，但该按钮*不是*，`<ImageButton>`这是您的代码所期望的。

您必须更改布局以使用`<ImageButton>`或更改此行：

```
listButton = (ImageButton) findViewById(R.id.splashB); 
```

至：

```
listButton = (Button) findViewById(R.id.splashB); 
```

要么应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T04:30:08.937

listButton = (ImageButton) findViewById(R.id.splashB); 在这里，它没有引用正确的 id 。根据我的猜测，splashB 引用了除图像按钮以外的其他东西，或者它没有被创建。因此，检查内部 xml 文件或粘贴您的 xml，以便我可以得出错误背后的主要原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T03:34:47.750

我可能在猜测，但我认为您的实际问题在于这段代码

```
public void onClick(View arg0) {
     startActivity(new Intent("com.example.survtest1.Main"));
} 
```

在这里，您正在开始一个新`Activity`的动作，但您没有给出有效的`Action`. 所以如果你想在那里开始一个新的活动你应该通过`Context`and `your valid class name`。或者，如果您开始`Activity`使用 an`Action`请确保您开始使用`valid action`.

请查看[开始另一个活动](http://developer.android.com/training/basics/firstapp/starting-activity.html)，以及[使用自定义操作开始活动](https://stackoverflow.com/questions/10921451/start-activity-using-custom-action)。

# javascript - 非突兀的 Javascript 弹出窗口

> ID：14330607
> 
> 赞同：-3
> 
> 时间：2013-01-15T03:16:35.487
> 
> 标签：javascript, html, popup, alert

如何在 javascript 中创建一个显示信息的弹出窗口/警报，同时允许用户在 HTML 表单的输入字段中输入数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T04:21:31.297

[http://jsfiddle.net/rwVGt/](http://jsfiddle.net/rwVGt/)

HTML：

```
<p>testingtestingtestingtestingtestingtestingtestingtestingtest ingtestingtestingtestingtestingtestingtestingtestingtestingt
  estingtestingtestingtestingtestingtestingt estingtestingtestingtestingtestingtesting</p>
<input
type="button" value="click for popup" onClick="popup()" /> 
```

CSS：

```
#pop
{
  width: 200px;
  height: 200px;
  border: solid 1px #000;
  margin-top: -30px;
  margin-left: 20px;
  position: fixed;
  background-color: #fff;
} 
```

Javascript：

```
window.onload = function () {
  var popup = document.createElement("div");
  var text = document.createTextNode("blah blah blah");
  popup.appendChild(text);
  popup.style.visibility = "hidden";
  popup.id = "pop";
  document.getElementsByTagName("body")[0].appendChild(popup);
};

window.popup = function () {
  var pop = document.getElementById("pop");
  pop.style.visibility = "visible";
  window.setTimeout(function(){document.getElementById("pop").style.visibility="hidden";},1000);
}; 
```

# css - 在 CSS 中更改悬停时的填充

> ID：14330608
> 
> 赞同：0
> 
> 时间：2013-01-15T03:16:41.313
> 
> 标签：css, css-selectors

好的，伙计们，这里是菜鸟，正在编写我的第一个 joomla 模块（或者无论如何都在尝试！）。出人意料地远了，但我的 css 样式有一些问题，我确定这与我的选择器和我对正在发生的事情缺乏了解有关！

基本上，我试图让 li 的填充权之一在悬停时增长，效果正在发挥作用，但目前两个 li 都在增长，而不仅仅是我悬停的那个。

任何帮助都是极好的！

HTML

```
<div>
<ul id="social">
<li>one</li>
<li>two</li>
</ul>
</div> 
```

CSS

```
#social{
    position:fixed;
    z-index:1000;
    top:50%;
    right:0px;
    list-style:none;
        }

#social li{
    padding-right: 5px;
    padding-top:5px;
    padding-bottom:5px;
    padding-left:5px;
    background-color: #202020;
    border-radius: 4px 0 0 4px;
    margin-top:15px;
    -moz-transition: padding-right .3s ease-in;
     -o-transition: padding-right  .3s ease-in;
     -webkit-transition: padding-right  .3s ease-in;
     transition: padding-right  .3s ease-in;
    }

#social li:hover{
    padding-right: 25px;
    padding-top:5px;
    padding-bottom:5px;
    padding-left:5px;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T03:22:15.410

我很确定这是因为`li`它是一个块元素，它填充它的父元素（the `ul`）当一个增长时，父元素被推出，导致另一个`li`填充空间。这样`li`s 将始终是相同的大小。

可能有更好的方法，但您可以将以下样式添加到`li`

```
float:right;
clear:both; 
```

这是有效的，因为它将元素更改为像内联元素一样，并使它们保持在右侧，但也将每个元素放在单独的行上。

`li`另一种方法是在(`span`或`a`)内放置一个内联元素，并将`li`样式更改为`a`，然后添加一个`li`样式以简单地设置`text-align:right`。您可能需要一些其他样式，但我只是做了足够的工作来获得其中的功能。

```
<div>
<ul id="social">
  <li><a href='#'>one</a></li>
  <li><a href='#'>two</a></li>
</ul>
</div>

#social{
    position:fixed;
    z-index:1000;
    top:50%;
    right:0px;
    list-style:none;
        }

#social li{
  text-align:right;
}

#social a{
    padding-right: 5px;
    padding-top:5px;
    padding-bottom:5px;
    padding-left:5px;
    background-color: #202020;
    border-radius: 4px 0 0 4px;
    margin-top:15px;
    -moz-transition: padding-right .3s ease-in;
     -o-transition: padding-right  .3s ease-in;
     -webkit-transition: padding-right  .3s ease-in;
     transition: padding-right  .3s ease-in;
    }

#social a:hover{
    padding-right: 25px;
    padding-top:5px;
    padding-bottom:5px;
    padding-left:5px;
    } 
```

# mysql - 更新表列 Where

> ID：14330610
> 
> 赞同：0
> 
> 时间：2013-01-15T03:17:04.327
> 
> 标签：mysql, sql, join, sql-update

我有`productinfo`桌子和`product_temp`桌子。我想更新`UpdateDate`表`productinfo`的字段`productinfo.ProductID = productinfo_temp.ProductID`

但是下面的代码不起作用。

```
UPDATE productinfo a 
SET UpdateDate = productinfo_temp.UpdateDate 
    WHERE EXISTS(SELECT NULL FROM productinfo_temp b WHERE a.ProductID = b.ProductID) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T03:19:03.230

采用`UPDATE with JOIN`

```
UPDATE  productinfo a  
        INNER JOIN productinfo_temp b
            ON a.ProductID = b.ProductID
SET     a.UpdateDate = b.UpdateDate 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T03:19:22.013

试试这个

```
UPDATE productinfo a JOIN productinfo_temp b ON a.ProductID = b.ProductID
SET a.UpdateDate = b.UpdateDate 
```

# c - C中的字符指针

> ID：14330615
> 
> 赞同：1
> 
> 时间：2013-01-15T03:18:12.407
> 
> 标签：c, arrays, pointers, character

```
 #include <stdio.h>

  int main(void){

  char *p = "Hello";  
  p = "Bye";              //Why is this valid C code? Why no derefencing operator?

  int *z;
  int x;
  *z = x
  z* = 2                 //Works
  z  = 2                 //Doesn't Work, Why does it work with characters?

 char *str[2] = {"Hello","Good Bye"};

 print("%s", str[1]);      //Prints Good-Bye.     WHY no derefrencing operator?
                          // Why is this valid C code? If I created an array with pointers
                         // shouldn't the element print the memory address and not the string?
  return 0;

  } 
```

评论中概述了我的问题。在一般情况下，我无法理解字符数组和指针。特别是为什么我可以在没有取消引用运算符的情况下访问它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T03:30:13.457

> 在一般情况下，我无法理解字符数组和指针。

这对于初级 C 程序员来说很常见。大约在 1985 年，我也有同样的困惑。

```
p = "Bye"; 
```

由于 p 被声明为 char*，p 只是一个包含 char 内存地址的变量。上面的赋值将 p 的值设置为常量字符串“Bye”的第一个字符的地址，即字母“B”的地址。

```
z  = 2 
```

z 被声明为 char*，因此您唯一可以分配给它的是 char 的内存地址。您不能将 2 分配给 z，因为 2 不是 char 的地址，它是一个常量整数值。

```
print("%s", str[1]); 
```

在这种情况下，str 被定义为两个 char* 变量的数组。在您的打印语句中，您将打印其中的第二个，即字符串“Good Bye”中第一个字符的地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T03:25:36.077

当您键入“Bye”时，您实际上是在创建所谓的[String Literal](http://msdn.microsoft.com/en-us/library/69ze775t%28v=vs.80%29.aspx)。这是一个**特例**，但本质上，当你这样做时

```
p = "Bye"; 
```

您正在做的是将此 String 文字的**地址**`p`分配给（字符串本身由编译器以与实现相关的方式存储（我认为））。正如 Richard J. Ross III 解释的那样，从技术上讲，它指向 char 数组的第一个元素。

由于它是一种特殊情况，它不适用于其他类型。

顺便说一句，您可能会收到**编译器警告**，例如`char *p = "Hello";`. 您应该需要定义它们，`const char *p = "Hello";`因为**修改它们是未定义**的链接解释。

* * *

至于打印代码。

```
print("%s", str[1]); 
```

这**不需要解引用操作**，因为内部**`%s`需要传递一个指针**（特别`char *`是），因此解引用由`printf`. 当 printf 需要一个指针时，您可以通过传递一个值来测试它。当它试图取消引用它时，您*应该会遇到运行时崩溃。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T03:27:52.740

```
 p = "Bye"; 
```

是将文字的**地址**分配给指针。

这

```
array[n] 
```

运算符的工作方式与将指针“array”的取消引用增加 n 类似。它不一样，但它是这样工作的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T03:29:32.940

请记住`"Hello"`，`"Bye"`一切都不`char *`是`char`。
所以这一行，`p="Bye";`意味着指针 p 指向一个`const char *`ie"Bye"
但在下一种情况下， with`int *`
`*z=2`意味着

> `z` 指向的`int` 被赋值为 2

而，`z=2`意味着指针`z`指向同一个`int`，由.指向`2`。但是，`2`不是`int pointer`指向其他`int`s。所以，编译器标记错误

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-15T03:28:44.087

你混淆了一些东西：它确实适用于字符，就像它适用于整数等一样。

它*不适*用于字符串，因为它们是字符*数组*，并且数组只能使用它们的第一个元素的地址存储在变量中。

稍后，您创建了一个字符指针*数组或字符串数​​组*。这意味着该数组的第一个元素是一个字符串，第二个元素也是一个字符串。当涉及到打印部分时，您使用的是数组的第二个元素。因此，不出所料，第二个字符串被打印出来。

如果你这样看，你会发现语法是一致的。

# jquery - 使用 jQuery 在点击时切换背景图像。多个事件

> ID：14330616
> 
> 赞同：1
> 
> 时间：2013-01-15T03:18:21.780
> 
> 标签：jquery, image, background, click, toggle

我有一个附有播放按钮的歌曲列表。使用下面的代码，我可以在单击时将“播放”按钮切换为“暂停”，如果单击另一个“播放”链接，则原始歌曲切换回“播放”并且新单击的曲目显示“暂停”应该。

但是，当我单击正在播放的曲目并且按钮变为“暂停”时，再次按下它不会将其切换回“播放”。

基本上我希望图像在点击时切换，如果按下另一个按钮，第一个按钮会恢复到原来的状态。

任何帮助将不胜感激！

```
$(function() {
    $('.play').click(function () {

       $('.play').css('background-image', 'url(My Play Button URL)');

       $(this).css('background-image', 'url(My Pause Button URL)');

    });
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T03:23:12.193

您可以使用类来检查当前状态

```
$(function() {
$('.play').click(function () {

   $('.play').not(this).css('background-image', 'url(My Play Button URL)').removeClass('playing');

    if(!$(this).is('.playing')){
       $(this).css('background-image', 'url(My Pause Button URL)').addClass('playing');
    }

});
}); 
```

小提琴：http: [//jsfiddle.net/arunpjohny/7a4ua/](http://jsfiddle.net/arunpjohny/7a4ua/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-17T06:35:11.320

受 Arun P Johny 启发的更快更简单的代码片段：

```
$('.play').click(function ()
{
    return $(this).is('.playing')
    ?
        $(this).css('background-image', 'url(My Play Button URL)').removeClass('playing')
    :
        $(this).css('background-image', 'url(My Pause Button URL)').addClass('playing')
    ;
}); 
```

# makefile - 有条件的makefile

> ID：14330617
> 
> 赞同：0
> 
> 时间：2013-01-15T03:18:25.243
> 
> 标签：makefile, conditional, rule

```
TOUCHFILE=.touch
NM = meow
.PHONY: extract
extract: $(TOUCHFILE)
$(TOUCHFILE): $(ARCHIVE) Makefile
   ifeq ($(wildcard TOUCHFILE),)
   rm -rf $NM
   touch $(TOUCHFILE)
   else
       @echo "nice going"; 
```

上述工作不应该吗？当我第一次没有 .touch 时，它会删除目录并创建 .touch。下次我使用 extract 运行时，它应该回显正确吗？我看到每次 make 都会删除 meow 目录并执行其他操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T03:32:23.627

请注意，Make if-then-else 必须以 结尾`endif`，并且指令*不能*以 TAB 开头，因为它们不是命令。（另请注意，您的通配符表达式是错误的——它搜索“TOUCHFILE”，而不是“.touch”）：

```
$(TOUCHFILE): $(ARCHIVE) Makefile
ifeq ($(wildcard $(TOUCHFILE)),)
    rm -rf $NM
    touch $(TOUCHFILE)
else
    @echo "nice going";
endif 
```

# ios - 将 JSON 主题拆分为 tableview 中的部分

> ID：14330619
> 
> 赞同：0
> 
> 时间：2013-01-15T03:18:28.837
> 
> 标签：ios, json

我正在阅读来自网络服务器的文章，这些文章采用 JSON 格式，并在表格视图中显示它们。我想实现部分标题，每个部分都是一个主题。到目前为止只有 3 个主题，下面的“numberOfSectionsInTableView”中的代码正确地确定了有 3 个部分。

我的麻烦在于下一个函数“numberOfRowsInSection”。我无法弄清楚如何确定每个部分中的行数。我查看了有关堆栈溢出的其他答案，但没有人帮助我的原因是我有可变数量的部分和行，而大多数其他提问者的部分​​数量是固定的。

有任何想法吗？

仅供参考“新闻”是 JSON 格式的文章数组。我遵循这个很棒的教程：[JSON](http://www.youtube.com/watch?v=RJZcD3hfs3k)

我的头文件如下所示：

```
NSDictionary *newsArticle;
NSArray *news;
NSMutableData *data;
NSString *tempTopic;
NSString *lastTempTopic;
NSMutableArray *topicList; 
```

我的实现文件如下所示：

```
- (int)numberOfSectionsInTableView:(UITableView *)tableView{
lastTempTopic = @"";
int numTopics = 0;
topicList = [[NSMutableArray alloc] init];
for (int i=0; i<news.count; i++) {
    newsArticle = [news objectAtIndex:i];
    tempTopic = [newsArticle objectForKey:@"topic"];
    if ([tempTopic isEqualToString:lastTempTopic])
    {
    }
    else
        numTopics++;
    lastTempTopic = tempTopic;
}
return numTopics;
}

- (int)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
return [news count];
} 
```

这是我正在解析的 JSON 代码的通用位。我希望主题 1、2、3 成为具有适当行数的相应部分。

[{"title":"title1","original_url":"http://originalurl1.html","topic":"主题 1","display_url":"display.url1","author":"Author1" ,"published_on":"date1","text_blocks":[{"TextBlock":"文章内容 1"}]},{"title":"title2","original_url":"http://originalurl2.html" ,"topic":"Topic 1","display_url":"display.url2","author":"Author2","published_on":"date2","text_blocks":[{"TextBlock":"文章内容2 "}]},{"title":"title3","original_url":"http://originalurl3.html","topic":"主题 1","display_url":"display.url3","author":"Author3","published_on":"date3","text_blocks":[{"TextBlock":"文章内容 3"}]},{"title":" title4","original_url":"http://originalurl4.html","topic":"主题 2","display_url":"display.url4","author":"Author4","published_on":"date4 ","text_blocks":[{"TextBlock":"文章内容4"}]}, {"title":"title5","original_url":"http://originalurl5.html","topic":"Topic 2","display_url":"display.url5","author":"Author5","published_on":"date5","text_blocks":[{"TextBlock":"文章内容 5"}]} {"title":"title6","original_url":"http://originalurl6.html","topic":"Topic 2","display_url":"display. url6","author":"Author6","published_on":"date6","text_blocks":[{"TextBlock":"文章内容 6"}]} {"title":"title7","original_url": "http://originalurl7.html","topic":"主题 3","display_url":"display.url7","author":"Author7","published_on":"date7","text_blocks":[ {"TextBlock":"文章内容 7"}]}]"http://originalurl6.html","topic":"主题 2","display_url":"display.url6","author":"Author6","published_on":"date6","text_blocks":[ {"TextBlock":"文章内容 6"}]} {"title":"title7","original_url":"http://originalurl7.html","topic":"Topic 3","display_url":" display.url7","author":"Author7","published_on":"date7","text_blocks":[{"TextBlock":"文章内容 7"}]}]"http://originalurl6.html","topic":"主题 2","display_url":"display.url6","author":"Author6","published_on":"date6","text_blocks":[ {"TextBlock":"文章内容 6"}]} {"title":"title7","original_url":"http://originalurl7.html","topic":"Topic 3","display_url":" display.url7","author":"Author7","published_on":"date7","text_blocks":[{"TextBlock":"文章内容 7"}]}]text_blocks":[{"TextBlock":"文章内容 6"}]} {"title":"title7","original_url":"http://originalurl7.html","topic":"主题 3"," display_url":"display.url7","author":"Author7","published_on":"date7","text_blocks":[{"TextBlock":"文章内容 7"}]}]text_blocks":[{"TextBlock":"文章内容 6"}]} {"title":"title7","original_url":"http://originalurl7.html","topic":"主题 3"," display_url":"display.url7","author":"Author7","published_on":"date7","text_blocks":[{"TextBlock":"文章内容 7"}]}]

# linux - 当我在 perl 中调用 shell 推荐时如何转义我的字符串？

> ID：14330622
> 
> 赞同：1
> 
> 时间：2013-01-15T03:18:56.013
> 
> 标签：linux, perl, shell, awk

我只想在我的 perl 脚本中使用 awk 命令，如下所示：

```
$linum = `awk -F "%" '/^\s*kernel/{print NR}' < $grubFile`; 
```

但它会说：`Unrecognized escape \s passed through at ./root line 36.`
我如何避免这种情况？谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T03:23:12.460

```
$x = `... \s ...`; 
```

没有意义

```
$x = "... \s ..."; 
```

如果你想要两个字符`\`and `s`，你需要转义`\`双引号中的文字和类似的。就像你会使用

```
$x = "... \\s ..."; 
```

你需要使用

```
$x = `... \\s ...`; 
```

请注意，您完全无法正确转义`$grubFile`too 的内容。如果文件名包含空格，您的命令将失败。并考虑如果它包含 shell 特有的其他字符（例如`|`.

正如@ysth 所示，以下内容等同于您的命令：

```
awk -F% '/^\s*kernel/{print NR}' "$grubFile" 
```

摆脱输入重定向意味着您可以简单地使用

```
use IPC::System::Simple qw( capturex );
my @line_nums = capturex('awk', '-F%', '/^\s*kernel/{print NR}', $grubFile);
chomp @line_nums; 
```

顺便说一句，纯粹用 Perl 做这件事并不难。

```
my @line_nums;
open(my $fh, '<', $grubFile) or die $!;
while (<$fh>) { 
   push @line_nums, $. if /^\s*kernel/;
} 
```

# c# - C# WindowsForms UserControl 的控件设计器支持

> ID：14330625
> 
> 赞同：5
> 
> 时间：2013-01-15T03:19:03.293
> 
> 标签：c#, winforms, user-controls, windows-forms-designer, editing

我正在寻找的是对用户控件内控件的相同类型的设计器支持。即 - 调整文本框的大小，移动标签，在将用户**控件放置到表单后位于用户控件内**。

我能做到的...

1.  创建用户控件
2.  使用设计器向它添加控件
3.  创建一个新的窗体应用程序
4.  将用户控件添加到工具箱
5.  将控件拖放到表单上

我被困在哪里...

1.  编辑 usercontrols 控件。IE - 能够使用设计器调整用户控件内的文本框的大小。

我在堆栈上发现了一个从未回答过的类似问题。因此，如果我太含糊，您可以点击此链接[https://stackoverflow.com/questions/10359772/example-make-constituent-controls-in-a-usercontrol-editable](https://stackoverflow.com/questions/10359772/example-make-constituent-controls-in-a-usercontrol-editable)。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T23:00:23.647

阅读 Nikita 的评论后，我找到了有关为控件创建自定义设计器的 Microsoft 支持页面。

如果您对设计时间支持的工作方式感兴趣，请参考以下报价

> 但是，.NET Framework 中组件的设计时支持并不是由 Microsoft Visual Studio .NET 等设计工具专门定义的。相反，开发环境支持设计时行为的扩展和定义，例如为组件提供设计时支持的设计器。对可扩展和可自定义的设计模式行为的支持是 .NET Framework 的一个集成部分。Visual Studio .NET 等工具还提供了一系列设计时服务供设计人员使用。

如果您想继续阅读和查看 Microsoft 的示例，请访问此网页

[增强设计时支持](http://msdn.microsoft.com/en-us/library/37899azc%28v=vs.71%29.aspx)

当你刚开始学习它时，一切似乎都很复杂，这里有一个 UserControl 的工作代码示例，它上面有一个 PictureBox 和一个 Label。这两个控件都可以在设计时进行编辑，即。调整大小和重新定位，并在单击它们时显示它们的所有事件和属性。

您将需要添加对 System.Design 的引用，只有在您的目标不是“.Net Client Profile”时才能引用它。您可以在 Proprieties/Application/TargetFramework 中更改您的目标配置文件。

将用户控件添加到您的项目并添加一个类来处理它的设计器。双击用户控件，然后从工具栏中添加标签和图片框。

接下来打开你创建的类作为它的设计师。添加这个...

```
using System.Windows.Forms;
using System.Windows.Forms.Design;

    public override void Initialize(IComponent component)
    {
        base.Initialize(component);

        if (this.Control is MyUserControl)  // replace this with your usercontrol type
        {
            // cast this.Control to you type of usercontrol to get at it's
            // controls easier
            var i = this.Control as MyUserControl; // replace ***

            this.EnableDesignMode(i.label1, "unique_name1");
            this.EnableDesignMode(i.pictureBox1, "unique_name2");
        }
    } 
```

# javascript - UIWebView、缩放和 elementFromPoint

> ID：14330633
> 
> 赞同：3
> 
> 时间：2013-01-15T03:20:07.730
> 
> 标签：javascript, ios, objective-c, events, uiwebview

当`UIWebView`我长按它时，我需要访问 DOM 元素的属性（来自 SVG 图）。为此，我添加了`UILongPressGestureRecognizer`以下内容：

```
UILongPressGestureRecognizer* longPress = [[UILongPressGestureRecognizer alloc] initWithTarget:self action: @selector(longPress:)];
[self.webView addGestureRecognizer: longPress]; 
```

当我长按视图时，将调用处理程序，我从中调用 JS 函数：

```
- (void) longPress: (UIGestureRecognizer *) gesture {
    CGPoint curCoords = [gesture locationInView:self.webView];

    if (!CGPointEqualToPoint(curCoords, self.lastLongPress)) {
        self.lastLongPress = curCoords;
        [self.webView stringByEvaluatingJavaScriptFromString:[NSString stringWithFormat:@"longPress(%f, %f)", curCoords.x, curCoords.y]];
    }
} 
```

这是我的 JS 处理程序：

```
function longPress(x, y) {

    x = x + window.pageXOffset;
    y = y + window.pageYOffset;

    var element = svgDocument.elementFromPoint(x, y);                                                                                                                                                                                                                           
    alert(element.localName + ' ' + x + ' ' + y + ' ' + window.innerWidth + ' ' +  window.innerHeight);
} 
```

但是，`UIWebView`坐标似乎是 != 来自 DOM 坐标（我单击的位置与警报中显示的 localName 不对应）。我已经设法弄清楚`UIWebView`坐标和 JS 之间存在 +/- 1.4 的因子（通过单击屏幕的右下角并将这些值与`window.innder{Width,Height}`.

我的猜测是`UIWebView`最初可能会应用默认的缩放比例，但我找不到这个值对应的值。

此外，当用户实际缩放/移动页面时，我还需要一种方法来完成这项工作。

有谁知道我做错了什么？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T06:52:48.880

好的，我终于找到了问题所在。

它来自缩放比例，这是我设法修复它的方法：

```
- (void) longPress: (UIGestureRecognizer *) gesture {
    int displayWidth = [[self.webView stringByEvaluatingJavaScriptFromString:@"window.innerWidth"] intValue];
    CGFloat scale = self.webView.frame.size.width / displayWidth;

    CGPoint curCoords = [gesture locationInView:self.webView];

    curCoords.x /= scale;
    curCoords.y /= scale;

    if (!CGPointEqualToPoint(curCoords, self.lastLongPress)) {
        self.lastLongPress = curCoords;

        [self.webView stringByEvaluatingJavaScriptFromString:[NSString stringWithFormat:@"longPress(%f, %f)", curCoords.x, curCoords.y]];
    }
} 
```

和 JS 处理程序：

```
function longPress(x, y) {
    var e = svgDocument.elementFromPoint(x, y);

    alert('Youhouu ' + e.localName);
} 
```

似乎不需要添加 pageOffset，因为现在`UIWebView`会自动添加它（我相信来自 iOS 5）。

干杯，

# iphone - 音频播放 AVPlayer 期间设备正在重启

> ID：14330634
> 
> 赞同：1
> 
> 时间：2013-01-15T03:20:09.843
> 
> 标签：iphone, objective-c, ios6, avplayer

我有一个适用于 iPhone 和 iPad 的应用程序，它使用 AVPlayer 播放音频流，我使用的是 Apple Sample StitchedStreamPlayer 的同一播放器，但我做了一些更改以播放音乐而不是视频。

当我运行应用程序时，我可以听几秒钟，然后设备重新启动并显示以下错误：

响应 SpringBoard 的终止而终止。

（当我在设备上使用 xcode 运行时，它会播放几分钟，但是当我拔下设备并再次运行应用程序时，应用程序崩溃）

我正在使用 iPhone 4 和 iPad mini 进行测试，它们都没有越狱，并且展台是 iOS 6。

代码很大，但这里有一些部分：

标题：

```
@interface NewPlayer : NSObject <AVAudioSessionDelegate>

@property (strong) AVPlayer *player;
@property (strong) AVPlayerItem *playerItem; 
```

一些重要的实现方法

```
-(void)play:(NSString *)audio
{
    /* Has the user entered a audio URL? */

    NSURL *audioUrl = [NSURL URLWithString:audio];
    if ([audioUrl scheme])  /* Sanity check on the URL. */
    {
        /*
         Create an asset for inspection of a resource referenced by a given URL.
         Load the values for the asset keys "tracks", "playable".
         */
        AVURLAsset *asset = [AVURLAsset URLAssetWithURL:audioUrl options:nil];

        NSArray *requestedKeys = [NSArray arrayWithObjects:kTracksKey, kPlayableKey, nil];

        /* Tells the asset to load the values of any of the specified keys that are not already loaded. */
        [asset loadValuesAsynchronouslyForKeys:requestedKeys completionHandler:
         ^{
             dispatch_async( dispatch_get_main_queue(),
                            ^{
                                /* IMPORTANT: Must dispatch to main queue in order to operate on the AVPlayer and AVPlayerItem. */
                                [self prepareToPlayAsset:asset withKeys:requestedKeys];
                            });
         }];
    }

}

- (void)prepareToPlayAsset:(AVURLAsset *)asset withKeys:(NSArray *)requestedKeys
{
    /* Make sure that the value of each key has loaded successfully. */
    for (NSString *thisKey in requestedKeys)
    {
        NSError *error = nil;
        AVKeyValueStatus keyStatus = [asset statusOfValueForKey:thisKey error:&error];
        if (keyStatus == AVKeyValueStatusFailed)
        {
            [self assetFailedToPrepareForPlayback:error];
            return;
        }
        /* If you are also implementing the use of -[AVAsset cancelLoading], add your code here to bail
         out properly in the case of cancellation. */
    }

    /* Use the AVAsset playable property to detect whether the asset can be played. */
    if (!asset.playable)
    {
        /* Generate an error describing the failure. */
        NSString *localizedDescription = NSLocalizedString(@"Item cannot be played", @"Item cannot be played description");
        NSString *localizedFailureReason = NSLocalizedString(@"The assets tracks were loaded, but could not be made playable.", @"Item cannot be played failure reason");
        NSDictionary *errorDict = [NSDictionary dictionaryWithObjectsAndKeys:
                                   localizedDescription, NSLocalizedDescriptionKey,
                                   localizedFailureReason, NSLocalizedFailureReasonErrorKey,
                                   nil];
        NSError *assetCannotBePlayedError = [NSError errorWithDomain:@"StitchedStreamPlayer" code:0 userInfo:errorDict];

        /* Display the error to the user. */
        [self assetFailedToPrepareForPlayback:assetCannotBePlayedError];

        return;
    }

    /* At this point we're ready to set up for playback of the asset. */

    /* Stop observing our prior AVPlayerItem, if we have one. */
    if (self.playerItem)
    {
        /* Remove existing player item key value observers and notifications. */

        [self.playerItem removeObserver:self forKeyPath:kStatusKey];

        [[NSNotificationCenter defaultCenter] removeObserver:self
                                                        name:AVPlayerItemDidPlayToEndTimeNotification
                                                      object:self.playerItem];
    }

    /* Create a new instance of AVPlayerItem from the now successfully loaded AVAsset. */
    self.playerItem = [AVPlayerItem playerItemWithAsset:asset];

    /* Observe the player item "status" key to determine when it is ready to play. */
    [self.playerItem addObserver:self
                      forKeyPath:kStatusKey
                         options:NSKeyValueObservingOptionInitial | NSKeyValueObservingOptionNew
                         context:MyStreamingAudioViewControllerPlayerItemStatusObserverContext];

    /* When the player item has played to its end time we'll toggle
     the movie controller Pause button to be the Play button */
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(playerItemDidReachEnd:)
                                                 name:AVPlayerItemDidPlayToEndTimeNotification
                                               object:self.playerItem];

    /* Create new player, if we don't already have one. */
    if (![self player])
    {
        /* Get a new AVPlayer initialized to play the specified player item. */
        [self setPlayer:[AVPlayer playerWithPlayerItem:self.playerItem]];

        /* Observe the AVPlayer "currentItem" property to find out when any
         AVPlayer replaceCurrentItemWithPlayerItem: replacement will/did
         occur.*/
        [self.player addObserver:self
                      forKeyPath:kCurrentItemKey
                         options:NSKeyValueObservingOptionInitial | NSKeyValueObservingOptionNew
                         context:MyStreamingAudioViewControllerCurrentItemObservationContext];

    }

    /* Make our new AVPlayerItem the AVPlayer's current item. */
    if (self.player.currentItem != self.playerItem)
    {
        /* Replace the player item with a new player item. The item replacement occurs
         asynchronously; observe the currentItem property to find out when the
         replacement will/did occur*/
        [[self player] replaceCurrentItemWithPlayerItem:self.playerItem];

        [self syncPlayPauseButtons];
    }

}

- (void)observeValueForKeyPath:(NSString*) path
                      ofObject:(id)object
                        change:(NSDictionary*)change
                       context:(void*)context
{
    /* AVPlayerItem "status" property value observer. */
    if (context == MyStreamingAudioViewControllerPlayerItemStatusObserverContext)
    {
        [self syncPlayPauseButtons];

        AVPlayerStatus status = [[change objectForKey:NSKeyValueChangeNewKey] integerValue];
        switch (status)
        {
                /* Indicates that the status of the player is not yet known because
                 it has not tried to load new media resources for playback */
            case AVPlayerStatusUnknown:
            {
                NSLog(@"desconhecido");
            }
                break;

            case AVPlayerStatusReadyToPlay:
            {
                /* Once the AVPlayerItem becomes ready to play, i.e.
                 [playerItem status] == AVPlayerItemStatusReadyToPlay,
                 its duration can be fetched from the item. */
                NSLog(@"ready to play");

                [player play];

                [self.delegate tocandoMusica];

            }
                break;

            case AVPlayerStatusFailed:
            {
                AVPlayerItem *thePlayerItem = (AVPlayerItem *)object;
                [self assetFailedToPrepareForPlayback:thePlayerItem.error];
                NSLog(@"falhou");

                [self.delegate acabouMusica];
            }
                break;
        }
    }
    /* AVPlayer "rate" property value observer. */
    else if (context == MyStreamingAudioViewControllerRateObservationContext)
    {
        //[self syncPlayPauseButtons];
    }
    /* AVPlayer "currentItem" property observer.
     Called when the AVPlayer replaceCurrentItemWithPlayerItem:
     replacement will/did occur. */
    else if (context == MyStreamingAudioViewControllerCurrentItemObservationContext)
    {
        AVPlayerItem *newPlayerItem = [change objectForKey:NSKeyValueChangeNewKey];

        /* New player item null? */
        if (newPlayerItem == (id)[NSNull null])
        {
            //[self disablePlayerButtons];
            //[self disableScrubber];

        }
        else /* Replacement of player currentItem has occurred */
        {

            /* Specifies that the player should preserve the video’s aspect ratio and
             fit the video within the layer’s bounds. */

            [self syncPlayPauseButtons];
        }
    }
    /* Observe the AVPlayer "currentItem.timedMetadata" property to parse the media stream
     timed metadata. */
    else if (context == MyStreamingAudioViewControllerTimedMetadataObserverContext)
    {
        //NSArray* array = [[player currentItem] timedMetadata];
        //for (AVMetadataItem *metadataItem in array)
        //{

        //}
    }
    else
    {
        [super observeValueForKeyPath:path ofObject:object change:change context:context];
    }

    return;
} 
```

如果您想深入了解，只需看看 StitchedStreamPlayer Sample，我不知道。我看过：

[在 iPhone 中使用 AVPlayer 播放音频文件失败](https://stackoverflow.com/questions/9063612/failed-to-play-audio-file-using-avplayer-in-iphone)

[AudioToolbox 库 AVAudioPlayer 中的内存泄漏](https://stackoverflow.com/questions/4915580/memory-leak-in-audiotoolbox-library-avaudioplayer)

[iOS6 中的 AudioToolBox 泄漏？](https://stackoverflow.com/questions/12553031/audiotoolbox-leak-in-ios6)

和许多其他..

我试图忘记所有这些实现并只使用

```
player = [AVPlayer playerWithURL:[NSURL URLWithString:url]];

[player play]; 
```

但它崩溃了！

有什么想法？

已编辑

我试过 MPMoviePlayerController 但同样的事情发生了，音乐开始了，然后设备重新启动。

这是我使用的代码：

```
[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error:NULL];

        player = [[MPMoviePlayerController alloc] initWithContentURL:[NSURL URLWithString:[[arrRadios objectAtIndex:indexPath.row] objectForKey:@"url"]]];

        [player play]; 
```

# jquery - 移动设备浏览器宽度纵向和横向

> ID：14330635
> 
> 赞同：1
> 
> 时间：2013-01-15T03:20:13.853
> 
> 标签：jquery, html, media-queries

我正在为桌面和移动设备做 HTML5 响应式网站。实际的浏览器宽度是多少（纵向和横向），例如三星 Galaxy S3 的分辨率为 720 像素，但我通常发现纵向浏览显示的比这少得多。对此有任何指示吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T04:20:14.360

您可能会遇到视口大小的问题。

移动浏览器的页面虚拟尺寸通常大于（有时小于）实际屏幕分辨率。可以使用元标记控制此视口缩放。

```
<meta name="viewport" content="width=device-width"> 
```

此页面有更多详细信息。它适用于 iOS，但这个概念被广泛应用：http: [//developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/UsingtheViewport/UsingtheViewport.html](http://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/UsingtheViewport/UsingtheViewport.html)

# c++ - scanf 格式输入的 cin 类比是什么？

> ID：14330637
> 
> 赞同：16
> 
> 时间：2013-01-15T03:20:21.280
> 
> 标签：c++, input, std

使用 scanf 通常有一种直接获取格式化输入的方法：

1) 实数大于 0 且小于 1 的行。以 'x' 结尾，例如：*0.32432523x*

```
scanf("0.%[0-9]x", &number); 
```

2) 行表示加法，格式为*：30+28=58*

```
scanf(":%d+%d=%99s", &number1, &number2, &total); 
```

什么是 cin 解决方案，只使用标准库？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T05:09:50.363

您可以创建一个简单的类来验证输入。

```
struct confirm_input {
    char const *str;

    confirm_input( char const *in ) : str( in ) {}

    friend std::istream &operator >>
        ( std::istream &s, confirm_input const &o ) {

        for ( char const *p = o.str; * p; ++ p ) {
            if ( std::isspace( * p ) ) {
                std::istream::sentry k( s ); // discard whitespace
            } else if ( (c = s.get() ) != * p ) {
                s.setstate( std::ios::failbit ); // stop extracting
            }
        }
        return s;
     }
}; 
```

用法：

```
std::cin >> x >> confirm_input( " = " ) >> y; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-15T04:34:37.437

使用 >> 运算符从 cin 中读取。

```
 int number1, number2;
  std::string text;
  char plus, equals;
  std::cin >> number1 >> plus >> number2 >> equals >> text;
  if (!std::cin.fail() && plus == '+' && equals == '=' && !text.empty())
    std::cout << "matched"; 
```

它不如 scanf 好，因为您必须自己验证 scanf 字符串中的任何文字。用流来做这件事几乎肯定会比 scanf 多得多的代码行。

我会使用scanf。

# python - 如何在小部件状态之间实现 QListWidget 项目的一致突出显示？

> ID：14330642
> 
> 赞同：8
> 
> 时间：2013-01-15T03:20:39.293
> 
> 标签：python, qt, pyqt, pyside

我正在使用 PyQT 4.8.3 创建一个包含两个 QListWidgets 的对话框，它们都允许多选。

1.  我发现如果启用了这些 QListWidgets，则仅当 QListWidget 具有焦点时，所选项目才会以蓝色突出显示，而没有焦点则突出显示为浅灰色。

2.  我还发现，如果 QListWidgets 被禁用，尽管缺乏焦点，所选项目仍以蓝色突出显示。

![在此处输入图像描述](../Images/cda9c1129bfafc051d66c202b9d7526b.png)

当用户从一个列表转到另一个列表时，他们会发现这*非常*令人困惑。

作为一名开发人员，我发现浅灰色/无焦点、蓝色/禁用行为是不可取的。我将不胜感激有关修改它们的任何建议。

我浏览了[QListWidget、QListView 和 QAbstractView](http://www.riverbankcomputing.com/static/Docs/PyQt4/html/classes.html)的文档，但没有找到任何适用的东西，我也浏览了[样式表](http://qt-project.org/doc/qt-4.8/stylesheet-reference.html)文档，但没有任何运气。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-15T08:13:59.260

我会在这里使用样式表。在此示例中，其中的选定项目`QListWidget`将以蓝色突出显示，当`QListWidget`禁用或没有焦点时，它们将变为灰色：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

from PyQt4 import QtCore, QtGui

class myWindow(QtGui.QWidget):

    def __init__(self, parent=None):
        super(myWindow, self).__init__(parent)

        self.setStyleSheet( """ QListWidget:item:selected:active {
                                     background: blue;
                                }
                                QListWidget:item:selected:!active {
                                     background: gray;
                                }
                                QListWidget:item:selected:disabled {
                                     background: gray;
                                }
                                QListWidget:item:selected:!disabled {
                                     background: blue;
                                }
                                """
                                )

        self.listWidget = QtGui.QListWidget(self)
        self.listWidget.setSelectionMode(QtGui.QAbstractItemView.MultiSelection)

        self.button = QtGui.QPushButton(self)
        self.button.setText("Disable the list!")
        self.button.clicked.connect(self.on_button_clicked)

        self.layout = QtGui.QVBoxLayout(self)
        self.layout.addWidget(self.button)
        self.layout.addWidget(self.listWidget)

        for itemNumber in range(5):
            item = QtGui.QListWidgetItem(self.listWidget)
            item.setText("Item {0}".format(itemNumber))
            self.listWidget.addItem(item)

    @QtCore.pyqtSlot()
    def on_button_clicked(self):
        enable = False if self.listWidget.isEnabled() else True

        self.listWidget.setEnabled(enable)

if __name__ == "__main__":
    import sys

    app = QtGui.QApplication(sys.argv)
    app.setApplicationName('myWindow')

    main = myWindow()
    main.show()

    sys.exit(app.exec_()) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T11:07:47.917

最简单的方法是更改[​​ QPalette](http://doc.qt.digia.com/qt/qpalette.html)（如果样式表不适合您）。
只需使用您想要更改的值（仅）为 QListView 设置调色板。

做这样的事情：

```
QPalette customPalette;
QPalette orginalPallete = listView->palette();
customPalette->setBrush(QPalette::Disabled, QPalette::Highlight,
                        orginalPallete.brush(QPalette::Active, QPalette::Highlight));
listView->setPalette(customPalette); 
```

我建议阅读调色板属性的工作原理（它合并了来自父级和 QApplication 的值，因此您只需要设置您想要更改的内容）。
您还可以通过更改 QApplication 的调色板来全局更改此颜色。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T05:23:35.573

[QItemDelegate](http://qt-project.org/doc/qt-4.8/qitemdelegate.html)可用于提供自定义显示功能。我希望它会帮助你。你可以重新实现

```
virtual void paint( QPainter *painter, const QStyleOptionViewItem &option, const QModelIndex &index ) const 
```

# javascript - 对大多数请求使用 socket.io 是不是很糟糕，或者我应该只使用它来将数据推送到客户端？

> ID：14330644
> 
> 赞同：2
> 
> 时间：2013-01-15T03:21:00.027
> 
> 标签：javascript, ajax, node.js, socket.io

替换 AJAX 路由（用 jquery 中的 $.Ajax 调用）是否不好，例如：

*   获取/动物
*   获取/动物/[id]
*   发布/动物

使用 socket.io 事件（事件绑定在客户端和服务器上，因此客户端可以有响应）：

*   发射（“动物：阅读”）
*   发射（“动物：阅读”，{id：asdasd}）
*   发射（“动物：写”，动物数据）

还是我应该“只”使用 socket.io 将数据推送到客户端？

[编辑] 如果我的 POST 路由不使用套接字 io，我可能会看到一个问题。问题是我不能轻松地使用客户端的套接字来广播数据：

服务器：

```
on("animals:write", function(data){ 
    saveAnimal(req.data)
    socket.broadcast(...)
    emit("animals:write", writenAnimal)  
}) 
```

VS

```
app.post(function(req,res){
    saveAnimal(data)
    // cant broadcast :(
    res.send(201,writenAnimal)
}) 
```

我肯定会在其他一些请求中将数据推送给客户端，因此所有客户端都至少有 1 个套接字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T10:15:20.263

`socket.io`如果您想为您的网站提供实时数据，应该使用恕我直言。以 Stackoverflow 为例。它使用 websocket 实时更新您的分数并更新您的通知。

但是，如果您真的想创建对 SEO 友好的应用程序（我的意思是支持`http`为您的页面提供服务）并且更重要的是，如果您意识到在 socket.io 中管理会话和权限的困难，我认为您会更喜欢`AJAX`您的页面和`socket.io`其他实时数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T04:09:17.417

如果您不想将数据推送到客户端，我不明白您为什么要`socket.io`使用`AJAX`. 我的意思是`AJAX`你不需要处理与客户端的会话，它可能会更好地扩展。

使用`socket.io`，对于每个连接的客户端，您都需要服务器上的某种对象与该客户端配对。如果永久连接是不必要或不需要的，它将无缘无故地使用服务器上的更多内存。

此外，`AJAX`如果您想在其他系统中重用您的代码，它会更好地与现有的庞大工具生态系统一起工作。

话虽如此，如果您需要`WebSocket`将数据推送到客户端或进行某种广播等功能，您可能会考虑使用`socket.io`而不是，`AJAX`因为很难实现这一点`AJAX`并`socket.io`提供这些功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T03:30:24.167

我会为此使用 ajax，它基于 http 的数据请求，不是实时的。

# content-management-system - 在 Rails 中向 CMS 添加新页面

> ID：14330646
> 
> 赞同：0
> 
> 时间：2013-01-15T03:21:06.177
> 
> 标签：content-management-system, ruby-on-rails-3.2, rails-migrations

我更多的是寻找最佳实践。我在一个相当大的项目的团队中工作。我正在做服务器端编码，而其他人正在做设计。我们决定做一个内部风格的 CMS，这样其他人就可以在不改变样式的情况下对内容进行一些更改。

我们需要添加一些新页面来为网站提供更多功能，但我正在寻找这样做的最佳实践。最初我考虑使用 db:seed 命令，但这更适用于加载初始数据，而不是新页面。现在，我开始考虑使用迁移文件，但我认为来回编辑迁移文件以更改 CMS 页面是一种不好的做法。

对于通过团队成员之间的数据库记录编辑静态页面的最佳实践有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T03:36:48.923

对于这样的事情，我通常会创建一些类`/lib`来处理创建不存在的必要数据。您可以通过执行以下操作来确保该过程是幂等的：

```
page = Page.find_or_create_by_name("blahdeblah") 
```

其中“名称”是页面的一些唯一标识符。

例子：

```
class CreateSamplePages
  def execute
    page = Page.find_or_create_by_name("blahdeblah", content: "This is an entirely awesome sample page.")
    ... (more stuff here)
  end
end 
```

然后在 rails 控制台（`rails c`在你的项目根目录中），你可以做`CreateSamplePages.new.execute`

# c# - 每次controltocompare的值改变时触发comparevalidator

> ID：14330648
> 
> 赞同：1
> 
> 时间：2013-01-15T03:21:21.370
> 
> 标签：c#, asp.net, comparevalidator

我的日历扩展器有一个比较验证器。每当用户选中/取消选中 gridview 中的框时，设置为 controltocompare 的文本框都会更改值。每次触发checkedchanged事件时，如何从后面的代码中触发comparevalidator？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T04:35:23.757

首先，从您的问题中不清楚您要比较什么。Second Compare 验证器会自行触发。你不能让它在复选框更改时触发。相反，您可以编写服务器端代码来实现这一点。希望能帮助到你。

# python - django 数据分析应用

> ID：14330649
> 
> 赞同：2
> 
> 时间：2013-01-15T03:21:23.247
> 
> 标签：python, django

我需要生成一个网页来显示一些数据分析，例如每天的错误消息计数，或者有多少访问者进行了付款。最好在图表中显示这些信息，我想我只需要设置图表和数据的一些属性，有没有任何应用程序可以帮助我做到这一点？

# wso2 - WSO2 GREG 中的 AuthenticationAdminService 在哪里？

> ID：14330651
> 
> 赞同：1
> 
> 时间：2013-01-15T03:22:00.337
> 
> 标签：wso2, axis2, wso2greg

我正在使用 WSO2 Governance and Registry 版本 4.1.1，我可以`AuthenticationAdminService`在 wso2greg-4.1.1-src 中找到 wsdl 文件，但我无法通过 url 找到任何内容：

> `https://127.0.0.1:9443/services/AuthenticationAdmin?wsdl`

即使在我修改`HideAdminServiceWSDLs`标签后`carbon.xml`，其他服务`ResourceAdminService`也可用。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T04:13:16.287

修改carbon.xml中的参数后需要重启服务器

```
 <HideAdminServiceWSDLs>false</HideAdminServiceWSDLs> 
```

之后你应该可以访问 wsdl（我用 4.1.1 服务器验证过）

`https://localhost:9443/services/AuthenticationAdmin?wsdl`或者

```
http://localhost:9763/services/AuthenticationAdmin?wsdl 
```

# linux - Unix命令删除第一列之后的所有内容

> ID：14330655
> 
> 赞同：19
> 
> 时间：2013-01-15T03:22:30.890
> 
> 标签：linux, unix, sunos

我有一个文本文件，其中有类似的内容-

```
10.2.57.44      56538154    3028
120.149.20.197  28909678    3166
10.90.158.161   869126135   6025 
```

在那个文本文件中，我有大约 1,000,000 行，与上面完全相同。我在 SunOS 环境中工作。我需要一种方法来从该文本文件中删除所有内容，只留下 IP 地址（上述文本文件中的第一列是 IP 地址）。所以在运行一些 unix 命令后，文件应该如下所示。

```
10.2.57.44
120.149.20.197
10.90.158.161 
```

谁能帮我解决一些 Unix 命令，该命令可以删除所有只留下 IP 地址（第一列）的东西，然后再次将其保存回某个文件。

所以输出在某些文件中应该是这样的 -

```
10.2.57.44
120.149.20.197
10.90.158.161 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-15T03:28:20.653

如果分隔符是空格字符，则使用

```
 cut -d " " -f 1 filename 
```

如果分隔符是制表符，则不需要 -d 选项，因为制表符是**`cut`**命令的默认分隔符

```
cut -f 1 filename 
```

**-d** 分隔符；-d 选项后面的字符是字段分隔符。

**-f** 指定一个字段列表，用分隔符分隔

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-15T03:24:34.343

```
 nawk '{print $1}' file > newFile && mv newFile file 
```

或者

```
 cut -f1 file > newFile && mv newFile file 
```

当您使用 SunOS 时，您会想要熟悉 nawk（不是 awk，它是 awk 的旧的、古怪的版本，而 nawk=new awk ;-)。

无论哪种情况，您都将文件中的第一个字段打印到 newFile。

(n)awk 是一种完整的编程语言，专为轻松操作文本文件而设计。表示每行的`$1`第一个字段，$9 表示第九个字段，以此类推，而 $0 表示整行。您可以告诉 (n)awk 使用什么来分隔字段，它可能是制表符字符或“|” 字符或多个空格。默认情况下，所有版本的 awk 都使用空格，即多个空格或 1 个制表符来分隔文件中的每一行的列/字段。

有关 awk 的非常好的介绍，请参阅[Grymoire 的 Awk 页面](http://www.grymoire.com/Unix/Awk.html)

`&&`意思是，只有在前一个命令没有问题的情况下才执行下一个命令。这样你就不会因为一些错误而意外删除你的好数据文件。

IHTH

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T03:34:58.217

如果你有`vim`，用它打开文件。然后在命令模式下写入替换（制表符或空格或任何分隔符）`%s:<delimiter>.*$::g`。现在用`:wq`.

像这样使用`sed`给命令`sed -e 's/<delimiter>.*$//' > file.txt`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T03:36:36.940

perl 脚本怎么样 ;)

```
#!/usr/bin/perl -w
use strict;

my $file = shift;
die "Missing file or can't read it" unless $file and -r $file;

sub edit_in_place
{
    my $file       = shift;
    my $code       = shift;
    {
        local @ARGV = ($file);
        local $^I   = '';
        while (<>) {
            &$code;
        }
    }
}

edit_in_place $file, sub {
    my @columns = split /\s+/;
    print "$columns[0]\n";
}; 
```

这将在原地编辑文件，因为您说它很大。`local $^I = '';`您还可以通过修改来创建备份`local $^I = '.bak';`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-15T04:05:51.267

尝试这个

`awk '{$1=$1; print $1}' temp.txt`

输出

```
10.2.57.44
120.149.20.197
10.90.158.161 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-15T03:24:23.743

```
awk '{ print $1 }' file_name.txt > tmp_file_name.txt
mv tmp_file_name.txt file_name.txt 
```

`'> tmp_file_name.txt'`表示重定向`STDOUT`到`awk '{ print $1 }' file_name.txt`一个名为`tmp_file_name.txt`

**供参考 ：**

```
$1 means first column based on delimiter. The default delimiter is whitespace
$2 means second column based on delimiter. The default delimiter is whitespace
..
..
$NR means last column based on delimiter. The default delimiter is whitespace 
```

如果要更改分隔符，请使用`awk`with`-F`

# sql - sql - 如何从列中删除一半的字符？

> ID：14330658
> 
> 赞同：1
> 
> 时间：2013-01-15T03:22:54.397
> 
> 标签：sql, sql-server, tsql, select

我有一个表格列，其中填充了来自调查的用户 ID，但不知何故，用户 ID 在每条记录中写入了两次。像下面

```
UserID
========
35863586
12341234
321321 
```

我已经看到 Aaron Alton 关于删除某些字符的建议，但在我的情况下，我必须删除一半的 ID 以使其正确，因为有时 id 是 8 位数字，有时是 6 位数字。

所以这不会有太大帮助，

```
SELECT RIGHT(MyColumn, LEN(MyColumn) - 4) AS MyTrimmedColumn 
```

有人可以提出解决我问题的方法吗？

非常感谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T03:25:02.560

因为你提到长度是6，有时是8，

将长度除以二

 ~~~~```
SELECT RIGHT(MyColumn, LEN(MyColumn) - (LEN(MyColumn) / 2)) AS MyTrimmedColumn 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!3/a4f5b/2)~~  ~~或者干脆

```
SELECT UserID, RIGHT(UserID, (LEN(UserID) / 2)) AS MyTrimmedColumn
FROM   table1 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!3/a4f5b/3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T03:46:16.450

```
update IDtable
set ID = LEFT(ID,(LEN(ID)/2)) 
```

这应该使用正确的字符串更新所有列。~~~~

# tcl - TCL找不到错误

> ID：14330663
> 
> 赞同：-7
> 
> 时间：2013-01-15T03:23:15.373
> 
> 标签：tcl

我的 TCL 代码有问题。请帮我找到它。我已经花了8个小时。谢谢

```
set QA1 array()
set QA2 array()
set QA3 array()
set COUNTER1 0
set COUNTER2 0

proc K1Axes { x y z } {
    global QA1
    global QA2
    global QA3
    global COUNTER1

    set fi [expr {2*4*atan(1.)*rand()}]
    set q1 [expr {0.707*cos($fi)}]
    set q2 [expr {0.707*sin($fi)}] 
    set q3 [expr {0.707}]  

    return [list $q1 $q2 $q3]

    set QA1($COUNTER1) [expr {-$q1}]
    set QA2($COUNTER1) [expr {-$q2}]
    set QA3($COUNTER1) [expr {$q3}]
    incr COUNTER1
}

proc K2Axes { x y z } {
    global QA1 
    global QA2
    global QA3
    global COUNTER2 

    set qq1  QA1($COUNTER2)
    set qq2  QA2($COUNTER2)
    set qq3  QA3($COUNTER2)

    return [list $qq1 $qq2 $qq3]

    incr COUNTER2
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T03:50:34.593

您的脚本有几个问题。其中第一个在第一行：

```
set QA1 array() 
```

这并不像你认为的那样。它所做的是创建一个包含七个字符串“array()”的标量变量（不是数组）。

稍后您尝试将其作为数组访问：

```
set qq1  QA1($COUNTER2) 
```

该语句应该抛出一个错误，指出 QA1 不是一个数组（毕竟它是一个字符串）。

要在 tcl 中创建数组，正确的语法是：

```
array set QA1 {} 
```

请阅读“array”命令的 Tcl 手册以获取有关 tcl 中数组的更多信息。请注意，如果您想使用其他语言所称的“数组”，则应改为查看列表，因为 tcl 数组是其他语言所称的“散列”或“映射”。

其次，您似乎在函数中间返回。一旦返回，在 return 语句之后发生的所有进一步的代码都不会被执行。因此`QA1($COUNTER1)`永远不会设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T03:37:35.580

除非您的代码不正确，否则该`return`语句将在修改全局变量之前导致`K1Axes`并`K2Axes`返回。该`return`语句导致 proc 立即退出。无条件`return`执行后什么都没有。

**编辑**
我还认为您误解了 tcl 中的数组。像这样的语句`set QA1 array()` **不**创建数组。 ~~尝试`set QA1()`创建一个空数组。~~ *[我不知道我在想什么。]* 使用[`array`命令](http://www.tcl.tk/man/tcl8.5/TclCmd/array.htm)来操作数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T15:32:20.470

## 这是正确的代码。

```
set COUNTER1 0
set COUNTER2 0

proc K1Axes { x y z } {
  global QA1 
  global QA2
  global QA3
  global COUNTER1
  set fi [expr {2*4*atan(1.)*rand()}]  
  set q1 [expr {0.707*cos($fi)}] 
  set q2 [expr {0.707*sin($fi)}] 
  set q3 [expr {0.707}]    
  set QA1($COUNTER1) [expr {-$q1}]
  set QA2($COUNTER1) [expr {-$q2}]
  set QA3($COUNTER1) [expr {$q3}]
  incr COUNTER1
  return [list $q1 $q2 $q3]
}

proc K2Axes { x y z } {
  global QA1 
  global QA2
  global QA3
  global COUNTER2 
  set qq1  $QA1($COUNTER2)
  set qq2  $QA2($COUNTER2)
  set qq3  $QA3($COUNTER2)
  incr COUNTER2
  return [list $qq1 $qq2 $qq3]
} 
```

# dojo - Dojo 1.8：加入列表 domConstruct.toDom

> ID：14330667
> 
> 赞同：0
> 
> 时间：2013-01-15T03:23:36.247
> 
> 标签：dojo

嗨，我在应用 domConstruct.toDom 之前将两个列表连接在一起时遇到问题。

我知道可以这样做，即：

```
 require(["dojo/text!, myListHtml.html", "dojo/domReady!"], 
    function(myListHtml){
     var list = domConstruct.toDom(myListHtml);
    }); 
```

但是，我想知道两个列表应该如何编码，即：-

```
require(["dojo/domReady!"], function(){
var list = domConstruct.toDom
('<ol>\
   <li class="odd">\
    <div class="bold">\
     <a class="odd">Odd</a>\
    </div>\
   </li>\
   <li class="even">\
    <div class="italic">\
     <a class="even">Even</a>\
    </div>\
   </li>\
  </ol>\

  <ol id="list2">\
   <li class="odd">Odd</li>\
  </ol>'); 
```

请指教。提前感谢克莱门特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T14:31:54.900

你为什么要加入这两个列表？domConstruct.toDom() 返回一个 domNode，但您在上面尝试的是两个 domNode。

如果您真的想“组合”它们，可以将它们嵌套在另一个 domNode 中，如下所示：

```
var lists = domConstruct.toDom(
'<div>\
   <ol>\
    <li class="odd">\
    ...
   </ol>\
   <ol id="list2">\
    <li class="odd">Odd</li>\
   </ol>\
 </div>'); 
```

如果您想在页面上“组合”它们，请考虑单独创建它们并使用 domConstruct.place() 将它们添加到页面中，如下所示：

```
domConstruct.place('<ol>\
    <li class="odd">\
    ...
   </ol>', "idOfWhateverYouWantToContainIt");

domConstruct.place('<ol id="list2">\
    ...
   </ol>', "idOfWhateverYouWantToContainIt"); 
```

# java - 如何使用一个数据源以编程方式更改 Spring 中的数据库？

> ID：14330668
> 
> 赞同：11
> 
> 时间：2013-01-15T03:23:37.557
> 
> 标签：java, spring, jdbc, datasource

我正在寻找在 Spring 中使用一个 DataSources 但能够从 Java 代码中切换数据库的最佳方法是什么？下面是我的两个数据源，它们转到同一个数据库服务器但不同的数据库。

```
<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource"
      destroy-method="close">
    <property name="driverClassName" value="com.sybase.jdbc3.jdbc.SybDataSource" />
    <property name="url"
              value="jdbc:sybase:Tds:10.20.30.40:50/DATABASE_EMS" />
    <property name="username" value="userid" />
    <property name="password" value="derp" />
</bean>

<bean id="dataSourceMain" class="org.apache.commons.dbcp.BasicDataSource"
      destroy-method="close">
    <property name="driverClassName" value="com.sybase.jdbc3.jdbc.SybDataSource" />
    <property name="url"
              value="jdbc:sybase:Tds:10.20.30.40:50/DATABASE" />
    <property name="username" value="userid" />
    <property name="password" value="derp" />
</bean> 
```

我将它们绑定到各自的 bean，但我正在查看我的遗留代码，用 2 个单独的 bean 实现它会非常尴尬。关于如何在需要时使用一个数据源并切换数据库有什么想法/想法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-15T03:50:30.340

您可以通过扩展 Spring`AbstractRoutingDataSource`并将现有数据源包装在其中来做到这一点。查看[这篇文章](http://blog.springsource.com/2007/01/23/dynamic-datasource-routing/)了解详情。引用文章：

> 一般的想法是路由数据源充当中介——而“真实”数据源可以在运行时根据查找键动态确定。

另请参阅关于 SO 的类似问题：

1.  [使用 AbstractRoutingDataSource 动态更改数据库架构/目录](https://stackoverflow.com/questions/7960397/using-abstractroutingdatasource-to-dynamically-change-the-database-schema-catalo)
2.  [从具有相同持久性单元的多个数据库中读取？](https://stackoverflow.com/questions/8402835/reading-from-multiple-dbs-with-same-persistence-unit)
3.  [如何使用 JDBC 在 Spring 中创建动态连接（数据源）](https://stackoverflow.com/questions/7494828/how-to-create-dynamic-connections-datasource-in-spring-using-jdbc)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T03:44:12.933

有很多方法可以做到这一点。例如，您可以创建一个服务类`DatasourceSelectorService`，并根据一些输入（例如：配置文件/用户输入）`datasource's`相应地选择 bean。

所有其他需要 a 的类`datasource`都应通过此 DatasourceSelectorService 获取它。

# database - 来自数据库错误Android的登录验证

> ID：14330670
> 
> 赞同：-1
> 
> 时间：2013-01-15T03:23:41.130
> 
> 标签：database, sqlite, validation, login

我创建了一个数据库表，其中有、`id`和作为列。我的 xml 有 3 个元素，用户名、密码编辑文本和登录按钮。DatabaseActivity.java 中的方法进行验证。`username``password``email``validateLogin`

错误

> 方法 getWritableDatabase() 未定义类型 DbHelper 行 ----- SQLiteDatabase db = mydb.getWritableDatabase();----

这是我的 DatabaseActivity.java 文件

```
 package com.login.recscores;
    import android.annotation.SuppressLint;
    import android.app.Activity;
    import android.content.Context;
    import android.content.Intent;
    import android.database.Cursor;
    import android.database.sqlite.SQLiteDatabase;
    import android.os.Bundle;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.widget.Button;
    import android.widget.EditText;
    import android.widget.Toast;

    @SuppressLint("Registered")
    public class DatabaseActivity extends Activity implements OnClickListener {

Button mLogin;
Button mNewUser;
Button mShowAll;
EditText mUsername;
EditText mPassword;
DbHelper mydb = null;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_login);

    mNewUser = (Button)findViewById(R.id.sign_in_button);
    mNewUser.setOnClickListener(this);

}

public void onClick(View v) {

    switch(v.getId()){

    case R.id.sign_in_button:
        mUsername = (EditText)findViewById(R.id.email);
        mPassword = (EditText)findViewById(R.id.password);

        String uname = mUsername.getText().toString();
        String pass = mPassword.getText().toString();

        if(uname.equals("") || uname == null){
            Toast.makeText(getApplicationContext(), "email Empty", Toast.LENGTH_SHORT).show();
        }else if(pass.equals("") || pass == null){
            Toast.makeText(getApplicationContext(), "Password Empty", Toast.LENGTH_SHORT).show();
        }else{
            boolean validLogin = validateLogin(uname, pass, DatabaseActivity.this);
            if(validLogin){
                System.out.println("In Valid");
                Intent i = new Intent(DatabaseActivity.this, UserHome.class);
                startActivity(i);
                finish();
            }
        }
        break;

    }
}

    //  @SuppressWarnings("deprecation")

public boolean validateLogin(String uname, String pass, Context context) {

    mydb = new DbHelper(this);
            SQLiteDatabase db = mydb.getWritableDatabase();
    //SELECT
    String[] columns = {"_id"};

    //WHERE clause
    String selection = "username=? AND password=?";

    //WHERE clause arguments
    String[] selectionArgs = {uname,pass};

    Cursor cursor = null;
    try{
    //SELECT _id FROM login WHERE username=uname AND password=pass
    cursor = db.query(DbHelper.RECSCORES_TABLE_NAME, columns, selection, selectionArgs, null, null, null);

    //  startManagingCursor(cursor);

    }catch(Exception e){
        e.printStackTrace();
    }
    int numberOfRows = cursor.getCount();

    if(numberOfRows <= 0){

        Toast.makeText(getApplicationContext(), "Wha Failed..\nTry Again", Toast.LENGTH_SHORT).show();
        return false;
    }

    return true;
}

public void onDestroy(){
    super.onDestroy();
    mydb.close();
}
} 
```

DbHelper.java 是

```
 package com.login.recscores;
    import android.content.ContentValues;
    import android.content.Context;
    import android.database.Cursor;
    import android.database.SQLException;
    import android.database.sqlite.SQLiteDatabase;
    import android.database.sqlite.SQLiteOpenHelper;
    import android.util.Log;

    public class DbHelper {

private static final String DATABASE_NAME = "recscores.db";
public static final String KEY_ROWID = "_id";
public static final String KEY_USERNAME = "username";
public static final String KEY_PASSWORD = "password";
public static final String KEY_EMAIL = "email";
private static final String TAG = "DbHelper";
private static final int DATABASE_VERSION = 1;
public static final String RECSCORES_TABLE_NAME = "users";
private static final String RECSCORES_TABLE_CREATE =
                "CREATE TABLE " + RECSCORES_TABLE_NAME + "(" +
                "_id INTEGER PRIMARY KEY AUTOINCREMENT,"+
                "username VARCHAR NOT NULL, password VARCHAR NOT NULL, email VARCHAR NOT NULL);";

    private final Context context;

    private DatabaseHelper DBHelper;
    private SQLiteDatabase db;

    public DbHelper(Context ctx)
    {
    this.context = ctx;
    DBHelper = new DatabaseHelper(context);
    }

    private static class DatabaseHelper extends SQLiteOpenHelper
    {
    DatabaseHelper(Context context)
    {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
            public void onCreate(SQLiteDatabase db)
    {
    db.execSQL(RECSCORES_TABLE_CREATE);
     }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion,
    int newVersion)
    {
    Log.w(TAG, "Upgrading database from version " + oldVersion
    + " to "
    + newVersion + ", which will destroy all old data");
    db.execSQL("DROP TABLE IF EXISTS titles");
    onCreate(db);
    }
    }

    //---opens the database---
    public DbHelper open() throws SQLException
    {
    db = DBHelper.getWritableDatabase();
    return this;
    }

    //---closes the database---
    public void close()
    {
    DBHelper.close();
    }

    //---insert a title into the database---
    public long insertTitle(String Id, String username, String password, String email)
    {
    ContentValues initialValues = new ContentValues();
    initialValues.put(KEY_ROWID, Id);
    initialValues.put(KEY_USERNAME, username);
    initialValues.put(KEY_PASSWORD, password);
    initialValues.put(KEY_EMAIL, email);
    return db.insert(RECSCORES_TABLE_NAME, null, initialValues);
    }

    //---deletes a particular title---
    public boolean deleteTitle(long rowId)
    {
    return db.delete(RECSCORES_TABLE_NAME, KEY_ROWID +
    "=" + rowId, null) > 0;
    }

    //---retrieves all the titles---
    public Cursor getAllTitles()
    {
    return db.query(RECSCORES_TABLE_NAME, new String[] {
    KEY_ROWID,
    KEY_USERNAME,
    KEY_PASSWORD,
    KEY_EMAIL},
    null,null,null,null,null);
    }

    //---retrieves a particular title---
    public Cursor getTitle(long rowId) throws SQLException
    {
    Cursor mCursor =
    db.query(true, RECSCORES_TABLE_NAME, new String[] {
    KEY_ROWID,
    KEY_USERNAME,
    KEY_PASSWORD,
    KEY_EMAIL
    },
    KEY_ROWID + "=" + rowId,
    null,null,null,null,null);
    if (mCursor != null) {
    mCursor.moveToFirst();
    }
    return mCursor;
    }

    //---updates a title---
    public boolean updateTitle(long rowId, String isbn,
    String title, String publisher)
    {
    ContentValues args = new ContentValues();
    args.put(KEY_USERNAME, isbn);
    args.put(KEY_PASSWORD, title);
    args.put(KEY_EMAIL, publisher);
    return db.update(RECSCORES_TABLE_NAME, args,
    KEY_ROWID + "=" + rowId, null) > 0;
    }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:45:40.290

`getWritableDatabase`是一种方法`DatabaseHelper`，不是`DbHelper`。例如：

在您的 DbHelper.java 中，您使用 get`getWritableDatabase`如下：

```
db = DBHelper.getWritableDatabase(); 
```

您在哪里声明：

```
private DatabaseHelper DBHelper; 
```

所以你正在调用`getWritableDatabase`一个实例`DatabaseHelper`

但是在问题线上你有这个：

```
mydb = new DbHelper(this);
        SQLiteDatabase db = mydb.getWritableDatabase(); 
```

这是试图调用您尚未声明`getWritableDatabase`的 实例。`DbHelper`

请注意，您在`DBHelper`声明中调用的类中使用变量`DbHelper`是极端混乱的，并且可能是造成误解的原因。

# php - 从网络/使用 php 访问数据

> ID：14330672
> 
> 赞同：-1
> 
> 时间：2013-01-15T03:24:03.157
> 
> 标签：php, file-exists

如果我尝试从我的计算机访问数据，它可以工作

```
$test = "\\\\Pcname\folder\blabla.txt";
or
$test = "D:\\folder\blabla.txt;
if (!file_exists($test)) {
    die("Could not find file.");
} 
```

但我想从本地网络（共享文件夹）访问数据，但我得到了错误，我不知道如何让它工作

我试试这段代码

```
$test= "http://10.0.0.107/folder/blabla.txt";
or using computer name
$test= "http://Another-Pc/folder/blabla.txt"; 
```

我还确保 permision 文件夹是否对每个人都是完全控制的，甚至可以创建一个组

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T03:34:10.407

如果您尝试在本地访问它，那绝对是一种负担，而且可能是不可能的。首先，因为 PHP 将没有这些设置（出于安全目的），其次取决于操作系统，操作系统可能允许也可能不允许这样做。

正如 NullUserException 所提到的，您应该将 Apache 或 IIS 安装到 PC 以提供 HTTP 并打开网络端口 80，然后您可以使用 http URL 检查文件。

我希望这有帮助。

# php - Javascript/jQuery 检查 PHP 输出是否为 json - 如何？

> ID：14330673
> 
> 赞同：2
> 
> 时间：2013-01-15T03:24:14.857
> 
> 标签：php, javascript, jquery, json

我有一个脚本，可以在需要时输出 JSON。PHP 将标头设置为 JSON，然后 JSON 对对象进行编码。

在 JS 方面，`$.getJSON`收到了它，一切都是花花公子。

问题是当我的 PHP 输出纯文本时（这是我必须处理的情况）。

更大的问题是，尽管我想使用代码来检查 PHP 端的输出类型，`getJSON`但不会触发回调函数，除非它接收到 JSON 类型的输出。

因此，如果我的 PHP 脚本输出错误代码（未编码为 JSON 例程），则 JS 不会做出反应。

我需要 JS 根据 PHP 的输出类型以某种方式做出反应。

我尝试执行`.get`or `.post`JS 函数，但同样，当我的 PHP 输出 JSON 时，这些回调不会被触发/触发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T03:29:32.597

你看过 .done() 和 .fail() 吗？

```
$.ajax({
    url: 'blah.php',
    data: blah,
    type: 'POST',
    dataType: 'json'
}).done(function(){
    console.log('OK');
}).fail(function(jqXHR, textStatus, errorThrown){
    console.log(textStatus+"\n"+ errorThrown);
}); 
```

...另外，这里有一些 JS 代码来验证 JSON ...

```
// validate JSON
function is_JSON(str) {
    try {
        var c = $.parseJSON(str);
    } catch (e) {
        return false;
    }
    return true;
} 
```

# asp.net - 在 asp.net 中填充动态创建的控件。

> ID：14330675
> 
> 赞同：0
> 
> 时间：2013-01-15T03:24:18.337
> 
> 标签：asp.net, web-controls

我正在使用 asp.net 4.0。

现在我想使用 javascript 在客户端创建一些内容，例如：

```
<div id="xx" runat="server"></div> 
```

然后在服务器端，我想得到这个控件并填充一些内容，比如：

```
FindControl("xx").Controls.Add(....); 
```

似乎这不起作用。由于服务器端进程在客户端进程之前工作。

有什么替代的想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T03:53:37.513

Asp.net 需要知道页面上有哪些控件。在 javascript 中添加元素并稍后将数据接收到后端的控件中并非易事。

正确的做法是将服务器端的控件添加到控件集合中。

请参阅：[如何：以编程方式将控件添加到 ASP.NET 网页](http://msdn.microsoft.com/en-us/library/kyt0fzt1%28v=vs.100%29.aspx)

```
Label myLabel = new Label();
myLabel.ID = "myLabel";
myLabel.Text = "Sample Label";
Panel1.Controls.Add(myLabel); 
```

当控件通过添加到控件集合中时，`someContainer.Controls.Add`您可以使用找到它们`someContainer.FindControl`

```
Label myLabel = (Label)someContainer.FindControl("myLabel"); 
```

如果您不希望在动态添加控件时出现任何意外，您还需要完全了解[asp.net 页面生命周期。](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.100%29.aspx)

# json - Ajax 调用引发解析错误

> ID：14330676
> 
> 赞同：0
> 
> 时间：2013-01-15T03:24:20.833
> 
> 标签：json, jquery, cross-domain, jsonp, parse-error

尝试执行以下调用时出现解析错误：

```
 $.ajax({
        cache: true,
        url: "http://localhost:3000/app/test/result1",
        data: "{}",
        type: "GET",
        jsonpCallback: "testCall",
        contentType: "application/jsonp; charset=utf-8",
        dataType: "jsonp",
        error: function (xhr, status, error) {
            alert(error);
        },
        success: function (result) {
            alert(result);
        },
        complete: function (request, textStatus) {
            alert(request.responseText);
            alert(textStatus);
        }
    }); 
```

如果我直接将请求url粘贴到浏览器地址栏中，返回的结果似乎是有效的JSON：

```
 {
      "name": "The Name",
      "description": "The Description"
    } 
```

我正在使用 IISnode、NodeJs 和 Express JS。我已经测试了这两种情况：

```
 // NODE JS CODE

    var app = express(); 

    app.get('/app/test/result1', function (req, res) {
    res.send({ name: "The Name", description: "The Description" });
    });

    app.get('/app/test/result2', function (req, res) {
    res.send(JSON.stringify({ name: "The Name", description: "the Description" }));
    }); 
```

任何建议表示赞赏，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T04:00:40.473

您的 dataType 列为`jsonp`。但是，您来自 node.js 的响应不是格式正确的 JSON-P 响应。JSON-P 响应需要包装在回调中，如下所示：

```
testCall({ name: "The Name", description: "The Description" }); 
```

node.js 代码看起来像这样：

```
res.send(
    'testCall(' + 
    JSON.stringify({ name: "The Name", description: "the Description" }) +
    ');'
); 
```

（另请注意，您不需要该`data: "{}"`行，因为该请求是 GET 请求并且不包含任何数据。它不应该伤害任何东西，但最好删除以避免混淆）。

# android - Android Facebook sdk 3.0 的应用

> ID：14330680
> 
> 赞同：1
> 
> 时间：2013-01-15T03:24:27.793
> 
> 标签：android, facebook, apprequests

我正在为 Android 使用更新的 Facebook SDK V3.0 final。我正在尝试向没有该应用程序的 Facebook 朋友发送应用程序请求。代码是：

```
public void fbookinvite(){

        Bundle postParams = new Bundle();
        postParams.putString("name", "X");
        postParams.putString("message", "DOWNLOAD X.");

        Session session = Session.getActiveSession();

        postParams.putString("access_token", session.getAccessToken());

        if (session==null||session.getState().isClosed()){
            System.out.println("session is null");
        }else{
            //meaning we are good to go.
            Request request = new Request(session,"/friend facebook id/apprequests", postParams, HttpMethod.POST, new Request.Callback() {

                @Override
                public void onCompleted(Response response) {

                    System.out.println("response was: "+response.toString());
                }

            });

            Request.executeBatchAsync(request);
        }       
    } 
```

当代码运行时，我从打印的响应中得到以下内容之一：

```
responseCode: 400, graphObject: null, error: {HttpStatus: 400, errorCode: 2, errorType: OAuthException, errorMessage: (#2) Failed to create any app request}, isFromCache:false 
```

... 或者：

```
Response:  responseCode: unknown, graphObject: null, error: {HttpStatus: -1, errorCode: -1, errorType: null, errorMessage: null}, isFromCache:false} 
```

我有以下权限：`publist_stream`和`publish_actions`.

解决问题后，我还想知道如何将一组收件人添加到应用请求中。

我不想使用 Facebook 对话框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T05:00:15.583

试试这个：

```
 Bundle params = new Bundle();   
        params.putString("message",
                "Learn how to make your Android apps social");
        params.putString("to", "YOUR_FRIEND_UID_HERE");
        WebDialog requestsDialog = (new WebDialog.RequestsDialogBuilder(
                this, Session.getActiveSession(), params))
                .setOnCompleteListener(new OnCompleteListener() {

                    @Override
                    public void onComplete(Bundle values,
                            FacebookException error) {
                        // your code here 
                    }

                }).build();
        requestsDialog.show(); 
```

这是向某人明确发送应用请求的正确方法。如果您不包含该`to`参数，用户可以选择他们想要发送给谁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T14:34:01.757

```
Response:  responseCode: unknown, graphObject: null, error: {HttpStatus: -1, errorCode: -1, errorType: null, errorMessage: null}, isFromCache:false} 
```

这种情况通常与在您自己的线程上同时运行 FB 请求有关。我学会了使用任何一种的艰难方法

```
Request.executeAsync() 
```

或者

```
RequestAsyncTask 
```

# jquery - 如何在不知道它的确切键的情况下使用 jQuery 解析 JSON 字符串？

> ID：14330681
> 
> 赞同：0
> 
> 时间：2013-01-15T03:24:31.190
> 
> 标签：jquery, json

我现在正在编写一个测试 html 程序来检查 Web 套接字发送的格式良好的 JSON 数据，我被困在这里：

解析 JSON 字符串，而我不知道它的确切键。

jQuery.parseJSON() 可以返回生成的 JavaScript 对象，但我需要知道每个键才能访问数据。

我可能无法澄清我的问题，对不起。我想要的是使数据更具可读性而不是长 JSON 字符串。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T03:26:16.930

```
for(i in json) {
 console.log(i);
 console.log(json[i]);
} 
```

这个结构有什么用吗？

正如其他人指出的那样，您也可以使用 jQuery .each() 对其进行迭代。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T03:30:52.520

您还可以使用[jQuery.each()](http://api.jquery.com/jQuery.each/)迭代抛出 json 对象中的所有键。

前任：

```
$.each({'key':'value'}, function(i, v) { 
    console.log(i, v)
}); 
```

# javascript - asp：Request.Form.GetValues 未获取 javascript 生成的复选框值

> ID：14330685
> 
> 赞同：0
> 
> 时间：2013-01-15T03:25:09.900
> 
> 标签：javascript, asp.net, jquery

我正在使用 jQuery 的 .serialize() 从 javascript 生成的复选框中获取值。序列化后，数据通过 AJAX 发送到一个 aspx 页面。然后，aspx 页面应使用 Request.Form.GetValues[] 捕获复选框值。我的问题是复选框是序列化的，但 Request.Form.GetValues[] 没有得到任何值。

我曾经在 Web 表单中生成复选框，效果很好。但是当它们变成 javascript 生成时，Request.Form.GetValues[] 无法再获取复选框值。

以下是代码片段：

（序列化和 ajax 函数）

```
$('a#upload-button-gp').live('click', function() {
var data = $('form#upload').serialize();
$.loader(true);
$.ajax({
    url: '/ptcProject/ajax.aspx',
    type: 'post',
    data: { data: data, upload: 1 },
    success: function(response) {
        if (parseInt(response) == 1) {
            $.loader(false);
            $('#confirmationUpload').modal('hide');
        }
        else if (parseInt(response) == 0) {
            alert("You have already uploaded this batch.");
            $('#confirmationUpload').modal('hide');
            $.loader(false);
        }
        else {
            alert('Please select at least one row to upload.');
            $('#confirmationUpload').modal('hide');
            $.loader(false);
        }
    }
}); 
```

（js生成的复选框）

```
$('tbody#table-data').append("<tr><td><input id='check' name='include[]' type='checkbox' class='input-field checkbox' value='" + buttonId + "' checked='checked' /></td>" + $(this).parent().parent().html() + "</tr>"); 
```

（aspx页面）

```
string[] claimsID = Request.Form.GetValues("include[]"); 
```

非常感谢您的帮助！

**更新：**

发现问题了！

添加代码：

```
data += "&upload=1";
...
$.ajax({
...
data: data,
... 
```

就是这样。感谢所有回答的人！

# sql-server - MSSQL，列出所有消息，但不同的发件人

> ID：14330691
> 
> 赞同：1
> 
> 时间：2013-01-15T03:26:05.570
> 
> 标签：sql-server, vb.net, facebook

我想在列表中列出用户的所有消息。我能够列出所有消息，但我想要一个不同发件人的列表。它类似于 facebook 消息视图

我有消息表的这个布局

```
CREATE TABLE [dbo].[messages](
    [id] [bigint] IDENTITY(1,1) NOT NULL,
    [reciever] [varchar](50) NULL,
    [sender] [varchar](50) NULL,
    [posted] [datetime] NULL,
    [message] [varchar](1000) NULL,
    [status] [varchar](1) NULL
) 
```

接收者和发送者是这个表的外键

```
CREATE TABLE [dbo].[accounts](
    [uname] [varchar](50) NOT NULL,
    [pword] [varchar](32) NULL,
    [fname] [varchar](50) NULL,
    [mname] [varchar](50) NULL,
    [lname] [varchar](50) NULL
) 
```

我试过做这个查询，但它不起作用

```
SELECT [status], posted, sender, (
    SELECT DISTINCT sender FROM [messages] b
    WHERE a.sender = b.sender
) AS sender FROM [messages] a 
```

目标是列出除不同/唯一发件人之外的所有消息。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:48:43.140

我终于明白了！大声笑我只是在 WITH 查询块中添加条件

```
WITH latestMessages
AS
(
    SELECT  ID, receiver, sender, posted, message, status,
        ROW_NUMBER() OVER (Partition BY Sender
                                ORDER BY posted DESC) RN
    FROM    messages
    WHERE   receiver = 'admin'

)
SELECT  ID, receiver, sender, posted, message, status
FROM    latestMessages 
WHERE   RN = 1 
```

这是一种非常简单快捷的方法，而不是执行两个单独的查询。

> PS：如何将其标记为已解决？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T03:39:02.917

```
;WITH latestMessages
AS
(
    SELECT  ID, receiver, sender, posted, message, status,
            ROW_NUMBER() OVER (Partition BY Sender
                                ORDER BY posted DESC) RN
    FROM    messages
)
SELECT  ID, receiver, sender, posted, message, status
FROM    latestMessages 
WHERE   RN = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T11:20:20.773

我能够解决这个问题。我所做的是列出收件人的所有消息

```
SELECT DISTINCT sender FROM messages WHERE receiver = 'someuser' 
```

然后获取接收者最近的消息

```
SELECT TOP (1) message, posted FROM messages WHERE receiver = 'someuser' AND sender = 'anotheruser' ORDER BY posted DESC 
```

我通过使用我使用的编程语言的一些功能来做到这一点，即 .NET

# arrays - MQL4 - 插入一维数组的函数中作为参数的多维数组

> ID：14330694
> 
> 赞同：0
> 
> 时间：2013-01-15T03:26:42.263
> 
> 标签：arrays, mql4, metatrader4, mt4

我认为这会容易得多，但我不能在简单的 mql4 函数中使用二维数组作为参数并在其中插入元素。我不知道问题出在哪里。

我有一个这样声明的函数：

```
void insert_array_in_multi(double simple_array[], double &multi_array[][]){

...
ArrayResize(multi_array,1);

ArrayCopy(multi_array[x][0],simple_array); // Here I want to copy the one-dimension array into the multidimensional one, in "x" position. And here is where I get the ERROR when executing.

// I use "multi_array[x][0]" because is the way I don't get errors when compiling; if I use  "multi_array[x]", meaning I want the one-dim array to be copied in the x pos of the multi-dim array, I get the error message "wrong dimension"

...
}

The other function calling this one, is like:

double bidiarray[0][10];

... as I put new elements, I resize the array to an array with 10 or more (primary) elements

... create a one-dimensional array like this:

double simple_array[10] = ...

... and then call to the previous function:

insert_array_in_multi(simple_array,bidiarray);

...

} 
```

我得到的错误消息是“ArrayCopy 函数的 1 个参数必须是数组”......但是，它是......不是吗？

有人知道怎么做吗？

提前致谢。

PD：执行时失败，而不是编译时

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T03:40:54.257

我尝试使用以下签名测试功能并编译，所以我认为它会起作用。试试看：

```
int foo(int something[][])
{
   return (0);
}

int somenumber[5][5];
somenumber[0][0]=7;
foo (somenumber); 
```

# java - 如何在java中创建一个非静态全局变量？

> ID：14330699
> 
> 赞同：1
> 
> 时间：2013-01-15T03:27:50.653
> 
> 标签：java, static, global-variables

我正在用Java制作乒乓球游戏，如果单击暂停按钮，我不知道如何暂停并观看手表：

```
fileItem5.addActionListener(new ActionListener() {
public void actionPerformed(ActionEvent arg0) {
psd = true; 
```

但我无法从其他班级访问它。我宣布它为

```
public boolean psd; 
```

但是当我在第二堂课上输入它时，它给了我一个“变量需要是静态错误”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T03:33:33.440

忘记单例，更好的是使用静态字段。没有其他可能，只有这两种。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T03:29:29.950

Java 中没有“全局变量”之类的东西。

您可以使用[Singleton](https://stackoverflow.com/questions/70689/what-is-an-efficient-way-to-implement-a-singleton-pattern-in-java)来处理该行为。类的静态字段也会给您类似的行为（尽管您在问题中排除了该选项）。

如果您没有多个线程读取和写入变量，并且*psd*应该在整个应用程序中具有一个值（这由“全局变量”暗示），我确实建议将其设为静态。

如果声明它的类的每个实例都必须有一个单独的*psd*副本，我建议*fileItem5*必须具有对*psd*定义的类的引用，以便能够设置它。

# python - 在 Jython/Python 中复制图片时，如何每行少复制 X 个像素

> ID：14330705
> 
> 赞同：1
> 
> 时间：2013-01-15T03:28:29.327
> 
> 标签：python, image-manipulation, jython

我正在 Jython 中编写代码，它将把一张图片的一部分复制到一张空图片中，但我希望它在下一行中复制（比方说）少 10 个像素。我觉得我说的没有道理，我举个例子来解释。一张 100 像素乘 100 像素的图片，程序会将第一行（100 像素）像素复制到新图片中，但是对于第二行像素，我希望它只复制 90 像素，然后是第三行 80 像素，依此类推在。

在这里，我有一个代码可以复制图片的一部分，但它复制了一个正方形。那么我应该添加什么来让它做我想做的事。我猜我应该对它做点什么，`for x in range`但我不知道是什么。

```
def copyPic():
  file=pickAFile()
  oldPic=makePicture(file)
  newPic=makeEmptyPicture(getWidth(oldPic),getHeight(oldPic))
  xstart=getWidth(oldPic)/2
  ystart=getHeight(oldPic)/2
    for y in range(ystart,getHeight(oldPic)):
       for x in range(xstart, (getWidth(oldPic))):
         oldPixel=getPixel(oldPic,x,y)
         colour=getColor(oldPixel)
         newPixel=getPixel(newPic,x,y)
         setColor(newPixel,colour)
  explore(newPic) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T04:20:11.827

您的代码看起来肯定会复制图像的右下角 1/4 ... 以制作您需要减少的那部分的三角形部分（或者如果我正确理解您的问题，则只是一个有角度的部分）每次通过的 X 最大值...类似于：

```
def copyPic():
  file=pickAFile()
  oldPic=makePicture(file)
  newPic=makeEmptyPicture(getWidth(oldPic),getHeight(oldPic))
  xstart=getWidth(oldPic)/2
  ystart=getHeight(oldPic)/2

  # The next line gets the max value x can be (width of pic)
  xmax = getWidth(oldPic)

    for y in range(ystart,getHeight(oldPic)):

       # Now loop from the middle (xstart) to the end (xmax)
       for x in range(xstart, xmax):

         oldPixel=getPixel(oldPic,x,y)
         colour=getColor(oldPixel)
         newPixel=getPixel(newPic,x,y)
         setColor(newPixel,colour)

       # Now the x-loop has finished for this line (this value of y)
       # so reduce xmax by 10 (or whatever value) ready for the next line
       xmax = xmax - 10

       # Then you should do some checking in your code to ensure
       # xmax is not < xstart... here is something crude that should work
       if xmax < xstart:
           xmax = xstart

  explore(newPic) 
```

我认为您的代码将拍摄这样的图像：

```
+------------+
|   1     2  |
|            |
|   3     4  |
|            |
+------------+ 
```

并给出这个：

```
+-----+
|  4  |
|     |
+-----+ 
```

因为你的 X 循环总是相同的长度

如图所示，通过每次减少 x，您应该得到如下结果：

```
+-----+
|  4 /
|  /
+- 
```

这不是很好的编码，我可以重写整个事情......但如果你只是学习python，那么至少我对你的代码所做的修改应该可以很好地与你已经拥有的东西一起工作，并且应该很容易理解。我希望它有所帮助，如果您需要，请随时要求澄清。

干杯

PS：我看到你问了两次 - 你不应该两次问同一个问题，因为它会分裂答案，并且让人们以后更难找到这样的答案......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-06T07:50:31.250

混淆 QR 扫描仪的一种简单方法是用随机单元格替换代码的三个定位方块。这已经完成`image3.png`，这是最小的形式。您的函数`addSquares(smallPic)`将添加三个定位方块和将它们与活动单元格分开的白色单元格。然后`fixCodes()`将展开生成的图像并保存。

# c# - 只接受一个“.” 在仅接受数值的文本框中

> ID：14330711
> 
> 赞同：2
> 
> 时间：2013-01-15T03:28:54.560
> 
> 标签：c#, asp.net, textbox

我怎么能只接受一个“。” 在只接受数值的文本框中？我正在使用一个名为**`FilteredTextBoxExtender`**

这是我的示例代码：

```
<asp:TextBox ID="txtMNumberOfHours" runat="server" 
Width="50px" MaxLength="10"></asp:TextBox>

<asp:FilteredTextBoxExtender ID="FilteredTextBoxExtender1" runat="server" 
 FilterType="Numbers, Custom" ValidChars="." 
 TargetControlID="txtMNumberOfHours" ></asp:FilteredTextBoxExtender> 
```

在这段代码中，我可以输入多个“。” 这不好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T03:35:57.730

使用 regexvalidator 或 maskededit 扩展器怎么样？

使用 maskededitextender 你可以做

```
<asp:MaskedEditExtender ID="MaskedEditExtender1" 
   runat="server" TargetControlID="txtMNumberOfHours"
   Mask="99.99" MaskType="Number" InputDirection="RightToLeft" /> 
```

这将允许总共有四位数字，左侧为 2，点右侧为 2。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T03:40:38.490

FilteredTextBoxExtender 在输入时一次只查看一个字符，因此它不会查看整个内容以查看输入了多少句点。

我建议使用 RegularExpressionValidator。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T03:39:59.033

在 asp.net 中处理此问题的最佳方法是编写一些自定义 javascript 验证。

您可以使用以下 reg-ex 来验证该值。

```
^[-]?((\d+)|(\d+\.\d+)|(\.\d+))$ 
```

如果你使用 jQuery，你可以使用[blur](http://api.jquery.com/blur/)事件在客户端进行验证。

当然，你应该总是在服务器端再次解析它，而不是假设客户端会给你正确的数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T03:35:40.203

这样做的一种方法是使用 RegEx 检查字符串是否有任何额外的 .'s，因为我不是 RegEx 专家，我绝不会将其留给其他成员。但是您会检查 TextBox 上的 OnTextChanged 事件。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-09-16T21:45:16.463

这是解决方案

```
 <ajaxToolkit:FilteredTextBoxExtender ID="txtPrice_Filter" runat="server" BehaviorID="txtPrice_Filter" FilterType="Custom, Numbers" TargetControlID="txtPrice" ValidChars="." /> 
```

# php - 将浮点小数转换为分数

> ID：14330713
> 
> 赞同：16
> 
> 时间：2013-01-15T03:29:09.303
> 
> 标签：php, math, floating-point, type-conversion, rational-numbers

我正在尝试将用户键入的具有小数结果的计算转换为分数。例如；66.6666666667 成 66 2/3。任何指针？提前感谢

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-16T11:19:46.000

[连分数](http://en.wikipedia.org/wiki/Continued_fraction)可用于找到严格意义上的“最佳”实数的有理逼近。这是一个 PHP 函数，它找到给定（正）浮点数的有理逼近，其相对误差小于`$tolerance`：

```
<?php
function float2rat($n, $tolerance = 1.e-6) {
    $h1=1; $h2=0;
    $k1=0; $k2=1;
    $b = 1/$n;
    do {
        $b = 1/$b;
        $a = floor($b);
        $aux = $h1; $h1 = $a*$h1+$h2; $h2 = $aux;
        $aux = $k1; $k1 = $a*$k1+$k2; $k2 = $aux;
        $b = $b-$a;
    } while (abs($n-$h1/$k1) > $n*$tolerance);

    return "$h1/$k1";
}

printf("%s\n", float2rat(66.66667)); # 200/3
printf("%s\n", float2rat(sqrt(2)));  # 1393/985
printf("%s\n", float2rat(0.43212));  # 748/1731 
```

我已经写了更多关于这个算法及其工作原理的内容，甚至还有一个 JavaScript 演示：[https ://web.archive.org/web/20180731235708/http://jonisalonen.com/2012/converting-decimal-numbers-to -比率/](https://web.archive.org/web/20180731235708/http://jonisalonen.com/2012/converting-decimal-numbers-to-ratios/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-15T03:40:27.067

在这种情况下，法雷分数可能非常有用。

它们可用于将任何小数转换为分母最小的分数。

抱歉 - 我没有 PHP 原型，所以这里有一个 Python 原型：

```
def farey(v, lim):
    """No error checking on args.  lim = maximum denominator.
        Results are (numerator, denominator); (1, 0) is 'infinity'."""
    if v < 0:
        n, d = farey(-v, lim)
        return (-n, d)
    z = lim - lim   # Get a "zero of the right type" for the denominator
    lower, upper = (z, z+1), (z+1, z)
    while True:
        mediant = (lower[0] + upper[0]), (lower[1] + upper[1])
        if v * mediant[1] > mediant[0]:
            if lim < mediant[1]:
                return upper
            lower = mediant
        elif v * mediant[1] == mediant[0]:
            if lim >= mediant[1]:
                return mediant
            if lower[1] < upper[1]:
                return lower
            return upper
        else:
            if lim < mediant[1]:
                return lower
            upper = mediant 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-10-31T23:44:41.703

根据@Joni 的回答，这是我用来提取整数的内容。

```
function convert_decimal_to_fraction($decimal){

    $big_fraction = float2rat($decimal);
    $num_array = explode('/', $big_fraction);
    $numerator = $num_array[0];
    $denominator = $num_array[1];
    $whole_number = floor( $numerator / $denominator );
    $numerator = $numerator % $denominator;

    if($numerator == 0){
        return $whole_number;
    }else if ($whole_number == 0){
        return $numerator . '/' . $denominator;
    }else{
        return $whole_number . ' ' . $numerator . '/' . $denominator;
    }
}

function float2rat($n, $tolerance = 1.e-6) {
    $h1=1; $h2=0;
    $k1=0; $k2=1;
    $b = 1/$n;
    do {
        $b = 1/$b;
        $a = floor($b);
        $aux = $h1; $h1 = $a*$h1+$h2; $h2 = $aux;
        $aux = $k1; $k1 = $a*$k1+$k2; $k2 = $aux;
        $b = $b-$a;
    } while (abs($n-$h1/$k1) > $n*$tolerance);

    return "$h1/$k1";
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-02-18T16:22:33.383

将答案中的 Python 代码从 @APerson241 转换为 PHP

```
<?php
function farey($v, $lim) {
    // No error checking on args.  lim = maximum denominator.
    // Results are array(numerator, denominator); array(1, 0) is 'infinity'.
    if($v < 0) {
        list($n, $d) = farey(-$v, $lim);
        return array(-$n, $d);
    }
    $z = $lim - $lim;   // Get a "zero of the right type" for the denominator
    list($lower, $upper) = array(array($z, $z+1), array($z+1, $z));
    while(true) {
        $mediant = array(($lower[0] + $upper[0]), ($lower[1] + $upper[1]));
        if($v * $mediant[1] > $mediant[0]) {
            if($lim < $mediant[1]) 
                return $upper;
            $lower = $mediant;
        }
        else if($v * $mediant[1] == $mediant[0]) {
            if($lim >= $mediant[1])
                return $mediant;
            if($lower[1] < $upper[1])
                return $lower;
            return $upper;
        }
        else {
            if($lim < $mediant[1])
                return $lower;
            $upper = $mediant;
        }
    }
}

// Example use:
$f = farey(66.66667, 10);
echo $f[0], '/', $f[1], "\n"; # 200/3
$f = farey(sqrt(2), 1000);
echo $f[0], '/', $f[1], "\n";  # 1393/985
$f = farey(0.43212, 2000);
echo $f[0], '/', $f[1], "\n";  # 748/1731 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-04-14T08:43:52.200

基于@APerson 和@Jeff Monteiro 的回答，我创建了Farey 分数的PHP 版本，它将被简化为具有最低分母的分数的整数：

```
<?php

class QuantityTransform
{
    /**
     * @see https://stackoverflow.com/questions/14330713/converting-float-decimal-to-fraction
     */
    public static function decimalToFraction(float $decimal, $glue = ' ', int $limes = 10): string
    {
        if (null === $decimal || $decimal < 0.001) {
            return '';
        }

        $wholeNumber = (int) floor($decimal);
        $remainingDecimal = $decimal - $wholeNumber;

        [$numerator, $denominator] = self::fareyFraction($remainingDecimal, $limes);

        // Values rounded to 1 should be added to base value and returned without fraction part
        if (is_int($simplifiedFraction = $numerator / $denominator)) {
            $wholeNumber += $simplifiedFraction;
            $numerator = 0;
        }

        return (0 === $wholeNumber && 0 === $numerator)
            // Too small values will be returned in original format
            ? (string) $decimal
            // Otherwise let's format value - only non-0 whole value / fractions will be returned
            : trim(sprintf(
                '%s%s%s',
                (string) $wholeNumber ?: '',
                $wholeNumber > 0 ? $glue : '',
                0 === $numerator ? '' : ($numerator . '/' . $denominator)
            ));
    }

    /**
     * @see https://stackoverflow.com/a/14330799/842480
     *
     * @return int[] Numerator and Denominator values
     */
    private static function fareyFraction(float $value, int $limes): array
    {
        if ($value < 0) {
            [$numerator, $denominator] = self::fareyFraction(-$value, $limes);

            return [-$numerator, $denominator];
        }

        $zero = $limes - $limes;
        $lower = [$zero, $zero + 1];
        $upper = [$zero + 1, $zero];

        while (true) {
            $mediant = [$lower[0] + $upper[0], $lower[1] + $upper[1]];

            if ($value * $mediant[1] > $mediant[0]) {
                if ($limes < $mediant[1]) {
                    return $upper;
                }
                $lower = $mediant;
            } elseif ($value * $mediant[1] === $mediant[0]) {
                if ($limes >= $mediant[1]) {
                    return $mediant;
                }
                if ($lower[1] < $upper[1]) {
                    return $lower;
                }

                return $upper;
            } else {
                if ($limes < $mediant[1]) {
                    return $lower;
                }

                $upper = $mediant;
            }
        }
    }
} 
```

然后你像这样使用它：

```
QuantityTransform::decimalToFraction(0.06); // 0.06
QuantityTransform::decimalToFraction(0.75); // 3/4
QuantityTransform::decimalToFraction(1.75, ' and '); // 1 and 3/4
QuantityTransform::decimalToFraction(2.33, ' and '); // 2 and 1/3
QuantityTransform::decimalToFraction(2.58, ' ', 5); // 2 3/5
QuantityTransform::decimalToFraction(2.58, ' & ', 10); // 2 & 4/7
QuantityTransform::decimalToFraction(1.97); // 2 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-26T04:29:10.950

这是我解决这个问题的方法。适用于有理数。

```
function dec2fracso($dec){
    //Negative number flag.
    $num=$dec;
    if($num<0){
        $neg=true;
    }else{
        $neg=false;
    }

    //Extracts 2 strings from input number
    $decarr=explode('.',(string)$dec);

    //Checks for divided by zero input.
    if($decarr[1]==0){
        $decarr[1]=1;
        $fraccion[0]=$decarr[0];
        $fraccion[1]=$decarr[1];
        return $fraccion;
    }

    //Calculates the divisor before simplification.
    $long=strlen($decarr[1]);
    $div="1";
    for($x=0;$x<$long;$x++){
        $div.="0";
    }

    //Gets the greatest common divisor.
    $x=(int)$decarr[1];
    $y=(int)$div;
    $gcd=gmp_strval(gmp_gcd($x,$y));

    //Calculates the result and fills the array with the correct sign.
    if($neg){
        $fraccion[0]=((abs($decarr[0])*($y/$gcd))+($x/$gcd))*(-1);
    }else{
        $fraccion[0]=(abs($decarr[0])*($y/$gcd))+($x/$gcd);
    }
    $fraccion[1]=($y/$gcd);
    return $fraccion;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-07-15T14:53:00.953

有时有必要只处理浮点数的小数。所以我创建了一个代码，它使用@Joni 创建的函数来呈现一种在烹饪食谱中很常见的格式，至少在巴西是这样。

因此，不是使用 3/2（即 1.5 的结果），而是使用我创建的函数，可以显示值 1 1/2，如果需要，还可以添加一个字符串来连接这些值，创建类似“1 和 1/2”。

```
function float2rat($n, $tolerance = 1.e-6) {
  $h1=1; $h2=0;
  $k1=0; $k2=1;
  $b = 1/$n;
  do {
      $b = 1/$b;
      $a = floor($b);
      $aux = $h1; $h1 = $a*$h1+$h2; $h2 = $aux;
      $aux = $k1; $k1 = $a*$k1+$k2; $k2 = $aux;
      $b = $b-$a;
  } while (abs($n-$h1/$k1) > $n*$tolerance);

  return "$h1/$k1";
}

function float2fraction($float, $concat = ' '){

  // ensures that the number is float, 
  // even when the parameter is a string
  $float = (float)$float;

  if($float == 0 ){
    return $float;
  }

  // when float between -1 and 1
  if( $float > -1 && $float < 0  || $float < 1 && $float > 0 ){
    $fraction = float2rat($float);
    return $fraction;
  }
  else{

    // get the minor integer
    if( $float < 0 ){
      $integer = ceil($float);
    }
    else{
      $integer = floor($float);
    }

    // get the decimal
    $decimal = $float - $integer;

    if( $decimal != 0 ){

      $fraction = float2rat(abs($decimal));
      $fraction = $integer . $concat . $fraction;
      return $fraction;
    }
    else{
      return $float;
    }
  }
} 
```

**用法例如：**

```
echo float2fraction(1.5);
will return "1 1/2" 
```

# java - Java 如何在 getCount() 中的 PageAdapter 中获取上下文？

> ID：14330717
> 
> 赞同：0
> 
> 时间：2013-01-15T03:29:32.960
> 
> 标签：java, android

我正在开发一个家庭替换应用程序，我需要获取上下文以访问共享首选项并获取我的应用程序应该在 getCount() 上使用它的屏幕数量。

在过去的几个小时里，我一直把头撞在墙上，但我无法弄清楚如何在 getCount() 被触发之前获取上下文。

这是我的代码：

```
public class MyPagerAdapter extends PagerAdapter {
    public Context context;

    public int getCount() {
        return 5;
    }

    @Override
    public Object instantiateItem(View container, int position) {
        Context context = container.getContext();
    } 
```

我在 instatiateItem 上获取上下文，但 instatiateItem 在 getCount() 之后运行，有没有办法直接在 pageAdapter 上获取上下文？或者如何在 getCount() 被触发之前运行 getContext() ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T03:37:34.937

为什么不将 传递给`Context`的构造函数`MyPagerAdapter`？创建`MyPagerAdapter`如下的构造函数：

```
public class MyPagerAdapter extends PagerAdapter
    {
        public Context  context;

        MyPagerAdapter(Context context)
        {
            this.context = context;
        }

        public int getCount()
        {
            return 5;
        }

    } 
```

在您的活动中，您应该将 PagerAdapter 初始化为

```
MyPagerAdapter adapter = new MyPagerAdapter(this); 
```

# android - 来自 Android 的实时音频流

> ID：14330725
> 
> 赞同：3
> 
> 时间：2013-01-15T03:30:43.450
> 
> 标签：android

知道如何实现从 Android 2.x 7 Android 4.x 设备到后端的实时音频流。

我可以使用像 VLC 播放器这样的应用程序作为后端吗？如何建立从设备到后端的连接并启动音频流？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T03:39:24.497

`MediaPlayer mp = new MediaPlayer();` `mp.setDataSource(context,Uri.parse("your url"));` `mp.prepare();` `mp.start();'`

# makefile - 如何使用源文件夹制作 makefile？

> ID：14330728
> 
> 赞同：0
> 
> 时间：2013-01-15T03:31:07.717
> 
> 标签：makefile

我想制作一个带有 PATH 参数的模块化 makefile，但我不知道如何。

这是我之前的：

```
CC=
CFLAGS=-c -stack-protect
LDFLAGS=
SOURCES=
SSOURCES=
OBJECTS=$(SOURCES:.cpp=.o)
SOBJECTS=$(SSOURCES:.s=.o)
DEBUGFLAGS=-g -DDEBUG
EXECUTABLE=

all: CC += -DNDEBUG
all: $(SOURCES) $(SSOURCES) $(EXECUTABLE)

$(EXECUTABLE): $(OBJECTS) $(SOBJECTS)
        $(CC) $(LDFLAGS) $(OBJECTS) $(SOBJECTS) -o $@

.cpp.o:
        $(CC) $(CFLAGS) $< -o $@

.s.o:
        $(CC) $(CFLAGS) $< -o $@

debug: CFLAGS += $(DEBUGFLAGS)
debug: $(SOURCES) $(SSOURCES) $(LDFLAGS) $(EXECUTABLE)
        $(CC) $(LDFLAGS) $(OBJECTS) $(SOBJECTS) -o $(EXECUTABLE)

clean:
        rm -rf *o $(OBJECTS) $(SOBJECTS) 
```

这就是我或多或少想做的事情：

```
PATH=
CC=
CFLAGS=-c -stack-protect
LDFLAGS=
SOURCES=./src1 ./src1
SSOURCES=./src1 ./src2
FSOURCES=$(SOURCES:./=$(PATH))
FSSOURCES=$(SSOURCES:./=$(PATH))
OBJECTS=$(SOURCES:.cpp=.o)
SOBJECTS=$(SSOURCES:.s=.o)
DEBUGFLAGS=-g -DDEBUG
EXECUTABLE=

all: CC += -DNDEBUG
all: $(FSOURCES) $(FSSOURCES) $(EXECUTABLE)

$(EXECUTABLE): $(OBJECTS) $(SOBJECTS)
        $(CC) $(LDFLAGS) $(OBJECTS) $(SOBJECTS) -o $@

.cpp.o:
        $(CC) $(CFLAGS) $< -o $@

.s.o:
        $(CC) $(CFLAGS) $< -o $@

debug: CFLAGS += $(DEBUGFLAGS)
debug: $(FSOURCES) $(FSSOURCES) $(LDFLAGS) $(EXECUTABLE)
        $(CC) $(LDFLAGS) $(OBJECTS) $(SOBJECTS) -o $(EXECUTABLE)

clean:
        rm -rf *o $(OBJECTS) $(SOBJECTS) 
```

我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-31T12:13:56.697

我假设您要制作的文件 .so 位于文件夹 src2 中，而您要构建和创建且可执行的文件位于文件夹 src1 中。

```
VPATH = src1:src2:objects:include:libs

CFLAGS= -I ./include -Wall -g -stack-protect

LDFLAGS = -lstdc++
# You can append more libs as required.

CC = gcc

target: $(patsubst ./src1/%.c,./objects/%.o,$(wildcard ./src1/*.c)) ./libs/libmylib.so  
    $(CC) $(patsubst ./src/%.c,./obj_dbg/%.o,$(wildcard ./src/*.c)) $(LDFLAGS) -L ./libs -lmylib -o target

./objects/%.o: ./src/%.c ./include/*.h 
    @mkdir -p ./objects
    $(CC) $(CFLAGS) -c $< -o $@

./libs/libmylib.so: ./src2/%.c ./include/*.h 
    @mkdir -p ./libs
    $(CC) $(CFLAGS) -c $< -o $@ 
```

对于 makefile 教程，您可以查看以下链接。 [http://www.tune2wizard.com/linux-makefiles/](http://www.tune2wizard.com/linux-makefiles/)

# c - 处理 doxygen 中的长链接

> ID：14330730
> 
> 赞同：1
> 
> 时间：2013-01-15T03:31:45.513
> 
> 标签：c, doxygen, long-parameter-list

给定一个带有长参数列表的函数声明，例如：

```
uint8 rtSetTime(RTIME *rtime, uint8 day, uint8 month, uint16 year,
    uint8 hour, uint8 minute, uint8 second); 
```

有没有办法将参数列表拆分为多行，以便 doxygen 仍能`@link`正确解析命令？目前，如果函数声明在一行上，我只能让它工作，即：

```
@link rtSetTime(RTIME *rtime, uint8 day, uint8 month, uint16 year, uint8 hour, uint8 minute, uint8 second) rtSetTime @endlink 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T19:04:10.450

您永远不应该在链接中使用参数名称。假设 rtSetTime 不是重载函数，也不需要指定所有参数类型。

这里有许多链接到函数的方法，从最短到最长。最后两个也适用于函数重载的情况。

```
/** @mainpage 
 *  - #rtSetTime 
 *  - @ref rtSetTime "rtSetTime"
 *  - @ref rtSetTime() "rtSetTime"
 *  - @link rtSetTime rtSetTime@endlink 
 *  - @link rtSetTime() rtSetTime@endlink
 *  - @ref rtSetTime(RTIME*,uint8,uint8,uint16,uint8,uint8,uint8) "rtSetTime"
 *  - @link rtSetTime(RTIME*,uint8,uint8,uint16,uint8,uint8,uint8) rtSetTime @endlink
 */ 
```

# java - Scala 与 Java 中的样条插值性能

> ID：14330737
> 
> 赞同：2
> 
> 时间：2013-01-15T03:33:00.097
> 
> 标签：java, performance, scala, interpolation, spline

我以我能想到的最直接的方式将[这个样条插值算法](http://commons.apache.org/math/api-2.2/src-html/org/apache/commons/math/analysis/interpolation/SplineInterpolator.html#line.53)从 Java 的 apache.commons.math 翻译成 Scala（见下文）。我最终得到的函数运行速度比原始 Java 代码慢 2 到 3 倍。我的猜测是问题源于来自对的调用的额外循环`Array.fill`，但我想不出一种直接的方法来摆脱它们。有关如何使此代码更好地执行的任何建议？（以更简洁和/或更实用的方式编写它也很好 - 在这方面的建议也会受到赞赏。）

```
type Real = Double

def mySplineInterpolate(x: Array[Real], y: Array[Real]) = {

  if (x.length != y.length)
    throw new DimensionMismatchException(x.length, y.length)

  if (x.length < 3)
    throw new NumberIsTooSmallException(x.length, 3, true)

  // Number of intervals.  The number of data points is n + 1\.                                                                         
  val n = x.length - 1

  // Differences between knot points                                                                                                   
  val h = Array.tabulate(n)(i => x(i+1) - x(i))

  var mu: Array[Real] = Array.fill(n)(0)
  var z: Array[Real] = Array.fill(n+1)(0)
  var i = 1
  while (i < n) {
    val g = 2.0 * (x(i+1) - x(i-1)) - h(i-1) * mu(i-1)
    mu(i) = h(i) / g
    z(i) = (3.0 * (y(i+1) * h(i-1) - y(i) * (x(i+1) - x(i-1))+ y(i-1) * h(i)) /
            (h(i-1) * h(i)) - h(i-1) * z(i-1)) / g
    i += 1
  }

  // cubic spline coefficients --  b is linear, c quadratic, d is cubic (original y's are constants)                                   
  var b: Array[Real] = Array.fill(n)(0)
  var c: Array[Real] = Array.fill(n+1)(0)
  var d: Array[Real] = Array.fill(n)(0)

  var j = n-1
  while (j >= 0) {
    c(j) = z(j) - mu(j) * c(j + 1)
    b(j) = (y(j+1) - y(j)) / h(j) - h(j) * (c(j+1) + 2.0 * c(j)) / 3.0
    d(j) = (c(j+1) - c(j)) / (3.0 * h(j))
    j -= 1
  }

  Array.tabulate(n)(i => Polynomial(Array(y(i), b(i), c(i), d(i))))
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T04:04:32.923

您可以摆脱所有这些，`Array.fill`因为新数组总是用 0 或 null 初始化，具体取决于它是值还是引用（布尔值用 false 初始化，字符用 初始化`\0`）。

您也许可以通过压缩数组来简化循环，但只会让它变慢。函数式编程（无论如何在 JVM 上）可以帮助您加快速度的唯一方法是，如果您将其设置为非严格的，例如使用 a`Stream`或视图，然后您继续*而不*使用所有它。

# object - Rebol 2 中对象上的位置 PICK 有什么作用，等效的 Rebol 3 是什么？

> ID：14330738
> 
> 赞同：3
> 
> 时间：2013-01-15T03:33:10.283
> 
> 标签：object, rebol

在 Rebol 2 中：

```
>> foo: make object! [a: 10 b: 20]

>> foo/a
== 10

>> foo/b
== 20

>> first foo
== [self a b]

>> second foo
== [make object! [
        a: 10
        b: 20
    ] 10 20]

>> third foo
== [a: 10 b: 20]

>> fourth foo
** Script Error: fourth expected series argument of type:
   series date port tuple event
** Near: fourth foo 
```

因此，您可以将其作为值 1、2、3 的块来选择。但是在 Rebol 3 中进行位置选择是正确的：

```
>> first foo
** Script error: cannot use pick on object! value
** Where: first
** Near: first foo 
```

我认为这现在已被弃用（比如选择一个函数来获取它的参数列表）。但是，我正在尝试翻译一些类似以下内容的代码：

```
bar: construct/with (third foo) mumble 
```

(a) 该代码的意义何在？

(b) 我如何将它翻译成 Rebol 3？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T04:06:54.437

确实不推荐使用`first`, `second`,等进行反射（原因可能很明显）。`third`

一般替换是[REFLECT](http://www.rebol.com/r3/docs/functions/reflect.html)，它采用 FIELD 参数来指定要提取的信息。

为方便起见，REFLECT 依次由一组函数（某些人称为“反射器”）包装：SPEC-OF、BODY-OF、WORDS-OF、VALUES-OF 等。这些是使用 FIRST 进行反射的首选替代品等。幸运的是，这些“反射器”也已向后移植到 R2 (2.7.7+)。

**如何翻译`third foo`成 Rebol 3？**

物体上反射 THIRD 的对应物是 BODY-OF。

**`construct/with (third a) b`成语的重点是什么？**

它允许您通过*合并*A 和 B 来构造一个新对象（A 中的值优先于 B）。

因此，例如，您可以使用此习惯用法通过将用户提供的实际选项与默认对象合并来创建完整的“选项”对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T04:06:34.683

a) Construct 在不评估规范块的情况下构建对象。这意味着规范是`some [set-word! any-type!]`形式的（如果您使用另一个对象的主体，它将始终如此）。Construct/with 使用第二个对象 ( `mumble`) 作为原型。

b) 对象操作似乎发生了如下变化：

i)`first object`被替换为`words-of object`

ii)`second object`被替换为`values-of object`

iii)`third object`被替换为`body-of object` ~~或`to block! object`~~

因此，您的代码可以替换为：

```
bar: construct/with body-of foo mumble 
```

# ios - 将照片应用程序添加到“打开方式”菜单 - IOS？

> ID：14330739
> 
> 赞同：0
> 
> 时间：2013-01-15T03:33:13.500
> 
> 标签：ios, uidocumentinteraction

我正在使用`UIDocumentInteractionController`. 我想将本机照片应用程序添加到此菜单，但我不知道该怎么做？谁能给我指路？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T03:44:42.170

您无法发送到相机胶卷`UIDocumentInteractionController`。您必须直接[使用](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIKitFunctionReference/Reference/reference.html)：

```
UIImageWriteToSavedPhotosAlbum(myImage, completeTarget, completeSelector); 
```

所以你需要有一个独立的菜单/图标项。

# php - 从 mysql_fetch_assoc 返回并解析结果

> ID：14330744
> 
> 赞同：1
> 
> 时间：2013-01-15T03:33:44.620
> 
> 标签：php, mysql

我无法从 MySQL 查询返回的数组中获取值。

返回的结果是包含以下列的表：

```
|team_id|name|pos|available| 
```

结果中有多行。我需要遍历每一行并提取`name`并`pos`放入它们各自的变量中。

这是我的代码：

```
$query = sprintf("SELECT * FROM `player_user` WHERE team_id = '$teamID[0]'");
    $answer = mysql_query($query);
    if ($answer === FALSE)
        die(mysql_error());

    while($row = mysql_fetch_assoc($answer)) 
    {
        $pname = $row['name'];
        $pos = $row['pos'];

     ... do something with $pname and $pos 
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T03:37:01.633

上面的例子应该可以工作，只要 mysql 查询会返回数据。`var_dump($row);`您应该在循环内使用来验证这一点。

尽管您应该使用 mysqli 扩展或 PDO 来访问 mysql 数据库。您当前使用的 mysql_* 函数已弃用，一旦从 PHP 中删除

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-15T03:39:50.647

您应该使用 mysqli_fetch_array 而不是 mysql_fetch_assoc。这应该返回你想要的结果。

[http://php.net/manual/en/mysqli-result.fetch-array.php](http://php.net/manual/en/mysqli-result.fetch-array.php)

# firefox - firefox字体问题

> ID：14330746
> 
> 赞同：1
> 
> 时间：2013-01-15T03:33:54.407
> 
> 标签：firefox, font-face

所以在火狐的字体上有一个非常奇怪的问题。我已经包含了所有不同的字体版本类型（.ttf、.woff 等），但没有看到它在浏览器中加载（在 chrome 中工作正常）。但是，当我用 firebug 检查它并将鼠标悬停在检查器中的字体名称上时，*它会正确预览它*。所以它在某种程度上加载了字体，但不是在主浏览器窗口中。有人见过这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T04:09:49.480

结果是，如果字体系列中有空格，则需要用双引号而不是单引号将其括起来：P

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T03:46:28.307

疯狂猜测：你使用 NoScript 吗？它默认阻止下载的字体。（理由是字体引擎不一定是为任意输入而设计的，并且可能与其他任何东西一样容易受到攻击。）

# java - Java项目查找不合格字符串所指的类--请求评论

> ID：14330747
> 
> 赞同：0
> 
> 时间：2013-01-15T03:33:57.950
> 
> 标签：java, class, reflection, project

我正在做一个个人项目，希望能发展成一个大而可怕的东西……

我想派生一个字符串引用的类，即使它不是完全限定的。我想尽可能地重现 JVM 的行为。例如，在代码中，我可以引用已导入或在同一个包中的不合格事物。我知道这可能并不完全可能，但我想试一试。我当前的代码有以下问题：

*   它很慢。它生成所有类的列表并在其中查找匹配项。 ~~在我的机器上大约需要 6 秒。~~ **更新：**我更改了反射代码以获取一组类名而不是类。现在快两倍了。
*   显然这也意味着我可以有重复的麻烦。有没有办法像 Java 用来消除歧义一样对列表进行排序？ **更新**这是剩下的唯一严重问题。如果发现歧义，至少我现在抛出异常。
*   我使用 Google Reflection 库来派生类列表。我使用`ClasspathHelper.forClassLoader()`and `ClasspathHelper.forJavaClassPath()`，但我仍然可能遗漏一些。 **更新**我正在联合四个不同的类集，它们似乎提供了很好的覆盖范围。
*   我当然想念 java.*. 这是因为这些类是由原始类加载器加载的，并且可以进行硬编码。因此它们不可用？作为最后的手段，是否有一个 java.* 中的类列表以机器可读的形式，我可以用它来查找它们？ **UPDATE** `http://docs.oracle.com/javase/7/docs/api/overview-summary.html`似乎是迄今为止最好的选择。显然我还可以编写一个 doclet，它会以机器可读的形式输出 javadocs。已经有了吗？

还有什么问题吗？这是当前代码：

```
/**
 * Attempts to return the class specified by a string even if the it is not
 * fully qualified.  It does this by going through all the classes there are.
 * Note: You may specify arrays in normal declaration form, e.g. myArray[][].
 * 
 * @param classString       The string rep of the class/type
 * @return                  The class I think it refers to
 */
private static Class<?> getClassOfString(String classString) {
    classString = convertTypeToCanonicalForm(classString);
    Matcher matcher = Pattern.compile("(\\[+(\\w))?((\\w+(\\.\\w+)*);?)?").matcher(classString);
    matcher.find();
    String arrayPrefix = matcher.group(2);
    String className = matcher.group(4);
    try {
        if (arrayPrefix == null || arrayPrefix.equals("L")) {
            String classFound = null;
            for (String clazz : getSetOfAllClasses()) {
                if (clazz != null) {
                    if (clazz.matches("(.*\\.)?"+Pattern.quote(className)))
                        if (classFound == null)
                            classFound = clazz;
                        else
                            throw new RuntimeException("Class name '" + className +
                                    "' is ambiguous: " + classFound + " vs " + clazz);
                }
            }
            if (classFound != null) {
                classString = classString.replaceAll(Pattern.quote(className), classFound);
                return Class.forName(classString);
            }
        }
    } catch (ClassNotFoundException e) {
        throw new RuntimeException();
    }

        if (arrayPrefix == null)
            if (className == "boolean") return(boolean.class);          // primitive types
            else if (className == "byte") return(byte.class);
            else if (className == "char") return(char.class);
            else if (className == "double") return(double.class);
            else if (className == "float") return(float.class);
            else if (className == "int") return(int.class);
            else if (className == "long") return(long.class);
            else if (className == "short") return(short.class);
            else if (className == "void") return(void.class);

        // hack for java.* types-- look 'em up
        if (className != null) {
            String prefixFound = null;
            for (String prefix : javaTypes.keySet())
                for (String type : javaTypes.get(prefix))
                    if ((prefix+"."+type).matches(".*" + className))
                        if (prefixFound == null)
                            prefixFound = prefix;
                        else
                            throw new RuntimeException("Class name '" + className +
                                "' is ambiguous: java." + prefixFound + "." + className +
                                " vs java." + prefix + "." + className);
            if (prefixFound == null) prefixFound = "util";      // temp hack
            classString = classString.replaceAll(Pattern.quote(className), 
                    "java." + prefixFound + "." + className);
        }

        try {
            return Class.forName(classString);
        } catch (ClassNotFoundException e) {
            throw new RuntimeException("Class '" + className + 
                    "' is unknown or somewhere in java.* that I don't know about");
        }
}

/**
 * Converts the type from standard declaration form to canonical internal form
 * if necessary.  Practically this just means doing array translation.
 * 
 * @param type
 * @return
 */
private static String convertTypeToCanonicalForm(String type) {
    Matcher matcher = Pattern.compile("^(\\w+(\\.\\w+)*)((\\[\\])+)$").matcher(type);
    if (matcher.find()) {
        String typeTemp = matcher.group(1);
        if (typeTemp.equals("boolean")) typeTemp = "Z";         // primitive typeTemps
        else if (typeTemp.equals("byte")) typeTemp = "B";
        else if (typeTemp.equals("char")) typeTemp = "C";
        else if (typeTemp.equals("double")) typeTemp = "D";
        else if (typeTemp.equals("float")) typeTemp = "F";
        else if (typeTemp.equals("int")) typeTemp = "I";
        else if (typeTemp.equals("long")) typeTemp = "J";
        else if (typeTemp.equals("short")) typeTemp = "S";
        else typeTemp = "L" + typeTemp + ";";

        matcher = Pattern.compile("\\[\\]").matcher(matcher.group(3));
        while (matcher.find())
            typeTemp = "[" + typeTemp;
        type = typeTemp;
    }
    return type;
}

/**
 * List of package classes for each prefix in the java.* domain
 */
@SuppressWarnings("serial") 
static final Map<String, List<String>> javaTypes = new HashMap<String , List<String>>() {{
    put("lang",         Arrays.asList(new String[]{"Boolean","Byte","Character","Class","Double",
            "Float","Integer","Long","Short","String","Void"}));
    // rest of java.* goes here
}};

/**
 * Gets and stores a set of all the classes we can find.  Missing the java.* domain.
 * Uses the Google Reflection library.
 * 
 * @return          The class set
 */
static Set<String> classStringSet = null;
private static Set<String> getSetOfAllClasses() {

    if (classStringSet == null) {
        List<ClassLoader> classLoadersList = new LinkedList<ClassLoader>();
        classLoadersList.add(ClasspathHelper.contextClassLoader());
        classLoadersList.add(ClasspathHelper.staticClassLoader());                      
        classLoadersList.add(ClassLoader.getSystemClassLoader());                      
        Reflections reflections = new Reflections(new ConfigurationBuilder()
            .setScanners(new SubTypesScanner(false), new ResourcesScanner())
            .setUrls(ClasspathHelper.forClassLoader(classLoadersList.toArray(new ClassLoader[0]))));
        classStringSet = reflections.getStore().getSubTypesOf(Object.class.getName());

        reflections = new Reflections(new ConfigurationBuilder()
            .setScanners(new SubTypesScanner(false), new ResourcesScanner())
            .setUrls(ClasspathHelper.forJavaClassPath()));
        classStringSet.addAll(reflections.getStore().getSubTypesOf(Object.class.getName()));

    }

return classStringSet;
} 
```

我为什么要这样做？那一定会很好玩！你会看到的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T04:00:50.020

> 它很慢。它生成所有类的列表并在其中查找匹配项。在我的机器上大约需要 6 秒。

该实现可能会遍历所有目录，以及类路径/引导类路径上所有档案的索引。（虽然 6 秒似乎过长了……除非你的类路径上有大量的类。）

如果每次需要 6 秒，则应考虑将类名集缓存在合适的数据结构中。

> 显然这也意味着我可以有重复的麻烦。有没有办法像 Java 用来消除歧义一样对列表进行排序？

Java 不会消除名称的歧义。如果发生冲突，则为编译错误。

（实际上，我过于简单化了。该语言有一些规则来管理处理名称的说法，但这些规则很大程度上取决于源代码中的*import*语句。你的用例中是否有类似于 import 语句的东西？）

> 我当然想念 java.*. 这是因为这些类是由原始类加载器加载的，并且可以进行硬编码。因此它们不可用？

您应该能够使用[`getSystemClassLoader()`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/ClassLoader.html#getSystemClassLoader%28%29)

# iphone - 在 Iphone 上测试基于 Web 的应用程序

> ID：14330748
> 
> 赞同：1
> 
> 时间：2013-01-15T03:33:58.650
> 
> 标签：iphone, web-applications

> **可能重复：**
> [有没有办法在没有 iPhone 的情况下在 iPhone 上测试网站？](https://stackoverflow.com/questions/510278/is-there-a-way-to-test-a-web-site-on-the-iphone-without-an-iphone)

我一直在寻找一种渗透测试基于 Iphone 的 Web 应用程序的方法。XCode 可以选择测试本机应用程序，但我将如何测试基于 Web 的应用程序？

如果你们建议用于测试的步骤和/或应用程序，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T03:37:31.263

iOS Simulator for mac 中的 Safari 应用程序与 XCode 捆绑在一起，还是只使用常规 safari？

# c# - 选择 DataGridView 单元格时出现 ObjectDisposedException？

> ID：14330750
> 
> 赞同：4
> 
> 时间：2013-01-15T03:34:12.717
> 
> 标签：c#, linux, winforms, mono, winforms-interop

我想我在单声道中发现了一个错误，但我还没有完全隔离它，我需要帮助来隔离我的问题。

重现此错误

*   运行 csharp HelloWorld.cs
*   单击任何单元格
*   修改该单元格的内容。
*   单击任何其他单元格。

注意：我认为我的问题与[这个问题](https://stackoverflow.com/questions/13406560/c-sharp-winforms-cannot-access-a-dispose-object)有关，但更接近于隔离问题。

注意：我已经在 linux 上的 mono 3.0.4 和 mono 3.0.1 和 mono 2.10.x 上尝试过这个注 2：我也尝试过将它编译成 .exe，但它仍然有相同的错误

它将产生此呼叫跟踪消息：

```
System.ObjectDisposedException: The object was used after being disposed.
  at System.Windows.Forms.Control.CreateHandle () [0x00000] in <filename unknown>:0 
  at System.Windows.Forms.TextBoxBase.CreateHandle () [0x00000] in <filename unknown>:0 
  at System.Windows.Forms.Control.CreateControl () [0x00000] in <filename unknown>:0 
  at System.Windows.Forms.Control.SetVisibleCore (Boolean value) [0x00000] in <filename unknown>:0 
  at System.Windows.Forms.Control.set_Visible (Boolean value) [0x00000] in <filename unknown>:0 
  at (wrapper remoting-invoke-with-check) System.Windows.Forms.Control:set_Visible (bool)
  at System.Windows.Forms.DataGridView.BeginEdit (Boolean selectAll) [0x00000] in <filename unknown>:0 
  at System.Windows.Forms.DataGridView.SetCurrentCellAddressCore (Int32 columnIndex, Int32 rowIndex, Boolean setAnchorCellAddress, Boolean validateCurrentCell, Boolean throughMouseClick) [0x00000] in <filename unknown>:0 
  at System.Windows.Forms.DataGridView.OnMouseDown (System.Windows.Forms.MouseEventArgs e) [0x00000] in <filename unknown>:0 
  at System.Windows.Forms.Control.WmLButtonDblClick (System.Windows.Forms.Message& m) [0x00000] in <filename unknown>:0 
  at System.Windows.Forms.Control.WndProc (System.Windows.Forms.Message& m) [0x00000] in <filename unknown>:0 
  at System.Windows.Forms.DataGridView.WndProc (System.Windows.Forms.Message& m) [0x00000] in <filename unknown>:0 
  at System.Windows.Forms.Control+ControlWindowTarget.OnMessage (System.Windows.Forms.Message& m) [0x00000] in <filename unknown>:0 
  at System.Windows.Forms.Control+ControlNativeWindow.WndProc (System.Windows.Forms.Message& m) [0x00000] in <filename unknown>:0 
  at System.Windows.Forms.NativeWindow.WndProc (IntPtr hWnd, Msg msg, IntPtr wParam, IntPtr lParam) [0x00000] in <filename unknown>:0 
System.ArgumentOutOfRangeException: Index is less than 0 or more than or equal to the list count.
Parameter name: index
0
  at System.Collections.ArrayList.ThrowNewArgumentOutOfRangeException (System.String name, System.Object actual, System.String message) [0x00000] in <filename unknown>:0 
  at System.Collections.ArrayList.get_Item (Int32 index) [0x00000] in <filename unknown>:0 
  at System.Windows.Forms.DataGridViewRowCollection.SharedRow (Int32 rowIndex) [0x00000] in <filename unknown>:0 
  at System.Windows.Forms.DataGridView.GetRowInternal (Int32 rowIndex) [0x00000] in <filename unknown>:0 
  at System.Windows.Forms.DataGridView.GetCellInternal (Int32 colIndex, Int32 rowIndex) [0x00000] in <filename unknown>:0 
  at System.Windows.Forms.DataGridView.OnCellLeave (System.Windows.Forms.DataGridViewCellEventArgs e) [0x00000] in <filename unknown>:0 
  at System.Windows.Forms.DataGridView.SetCurrentCellAddressCore (Int32 columnIndex, Int32 rowIndex, Boolean setAnchorCellAddress, Boolean validateCurrentCell, Boolean throughMouseClick) [0x00000] in <filename unknown>:0 
  at System.Windows.Forms.DataGridView.MoveCurrentCell (Int32 x, Int32 y, Boolean select, Boolean isControl, Boolean isShift, Boolean scroll) [0x00000] in <filename unknown>:0 
  at System.Windows.Forms.DataGridView.OnColumnCollectionChanged (System.Object sender, System.ComponentModel.CollectionChangeEventArgs e) [0x00000] in <filename unknown>:0 
  at System.Windows.Forms.DataGridViewColumnCollection.OnCollectionChanged (System.ComponentModel.CollectionChangeEventArgs e) [0x00000] in <filename unknown>:0 
  at System.Windows.Forms.DataGridViewColumnCollection.Clear () [0x00000] in <filename unknown>:0 
  at System.Windows.Forms.DataGridView.Dispose (Boolean disposing) [0x00000] in <filename unknown>:0 
  at System.ComponentModel.Component.Dispose () [0x00000] in <filename unknown>:0 
  at (wrapper remoting-invoke-with-check) System.ComponentModel.Component:Dispose ()
  at System.Windows.Forms.Control.Dispose (Boolean disposing) [0x00000] in <filename unknown>:0 
  at System.Windows.Forms.ContainerControl.Dispose (Boolean disposing) [0x00000] in <filename unknown>:0 
  at System.Windows.Forms.Form.Dispose (Boolean disposing) [0x00000] in <filename unknown>:0 
  at System.ComponentModel.Component.Dispose () [0x00000] in <filename unknown>:0 
  at (wrapper remoting-invoke-with-check) System.ComponentModel.Component:Dispose ()
  at System.Windows.Forms.Form.WmClose (System.Windows.Forms.Message& m) [0x00000] in <filename unknown>:0 
  at System.Windows.Forms.Form.WndProc (System.Windows.Forms.Message& m) [0x00000] in <filename unknown>:0 
  at System.Windows.Forms.Control+ControlWindowTarget.OnMessage (System.Windows.Forms.Message& m) [0x00000] in <filename unknown>:0 
  at System.Windows.Forms.Control+ControlNativeWindow.WndProc (System.Windows.Forms.Message& m) [0x00000] in <filename unknown>:0 
  at System.Windows.Forms.NativeWindow.WndProc (IntPtr hWnd, Msg msg, IntPtr wParam, IntPtr lParam) [0x00000] in <filename unknown>:0 
```

HelloWorld.cs 的内容：

```
using System.Data;
using System.Drawing;
using System.Windows.Forms;

public class HelloWorld : Form {
    public HelloWorld () {
        Button quit = new Button ();
        quit.Text = "quit";
        quit.Click += new EventHandler (OnClickQuit);
        quit.Location = new Point(500, 400);

        DataGridView dgv = new DataGridView();
        dgv.AutoSize = true;

        DataTable table1 = new DataTable("patients");
        table1.Columns.Add("name");
        table1.Columns.Add("id");
        table1.Rows.Add("sam", 1);
        table1.Rows.Add("mark", 2);

        DataSet ds = new DataSet("office");
        ds.Tables.Add(table1);

        dgv.DataSource = ds;
        dgv.DataMember = ds.Tables[0].TableName;
        Controls.AddRange(new Control[] { dgv, quit });
    } 
    void OnClickQuit(object sender, EventArgs e) {
        Close();
    }
}

Application.Run (new HelloWorld ()); 
```

# mysql - MySQL查询中的匹配组与包含一些单词但不包含其他单词的正则表达式

> ID：14330752
> 
> 赞同：0
> 
> 时间：2013-01-15T03:34:33.440
> 
> 标签：mysql, regex

我正在查询歌曲数据库，并且想要分离出包含歌曲“Tube”的行（它可能出现在它之前和之后的任意数量的字符，例如“Track 01\. Tube -> Another song”），但不是匹配歌曲“First Tube”或“Last Tube”，它们也可能包含无关字符。

我一直在用这个查询做这个：

```
SELECT * FROM `songs` WHERE `song` LIKE ('%Tube%') and song not like ('%first%') and song not like ('%last%'); 
```

但更喜欢使用正则表达式，以便我可以在其他地方使用相同的匹配（比如在 PHP 代码中）。

我试过这样的事情：

```
SELECT * FROM songs WHERE song REGEXP '.*(first|last){0}.*(tube).*'; 
```

但它显然不起作用，它也匹配“First Tube”歌曲。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T03:52:05.500

如果您想在这里使用正则表达式，我认为您可能正在寻找更符合这些方面的正则表达式：

```
SELECT * FROM songs WHERE song REGEXP ".*Tube.*" and NOT REGEXP ".*first.*|.*last.*" 
```

这与您上面的陈述相距不远`LIKE`，但它会给您一个开始。

# php - PHP表单提交返回空白

> ID：14330762
> 
> 赞同：0
> 
> 时间：2013-01-15T03:35:42.270
> 
> 标签：php, jquery, html

我是一个新手，所以请多多包涵:)...我已经设法创建了一个表单并使用 PHP 将数据发送到一个电子邮件地址。但是，一旦我点击提交；屏幕变为空白，而不是停留在当前页面并显示一条消息。我猜我错过了某种 PHP 代码？

另外，我想在我的表单上使用 JQuery 验证器插件，我怎样才能在不破坏表单的情况下添加它？

我的 HTML：

```
<div>
<form id="form_id" name="form_name" action="scripts/index.php" method="post">
                <div>
                    <label for="name">Name: </label>
                    <input type="text" name="name" id="name" placeholder="John Smith" required/>
                </div>

                <div>
                    <label for="email">Email: </label>
                    <input type="email" name="email" id="email" placeholder="name@mail.com" required/>
                </div>

                <div>
                    <label for="message">Message: </label>
                    <textarea name="message" id="message" rows="5" cols="30"></textarea>
                </div>

                <div>
                    <input id="submit" type="submit" name="submit" value="submit" />
                </div>
            </form>
            <p id="feedback"><?php echo $feedback; ?></p>
</div> 
```

我的PHP：

```
<?php

$to = 'example@gmail.com';
$subject = 'Message from The Rocket Factory';

$name = $_POST['name'];
$email = $_POST['email'];
$message = $_POST['message'];

$body = <<<EMAIL

Hi, my name is $name.

$message

From $name
My Address is $email

EMAIL;

$header = "From: $email";

if($_POST){
    mail($to, $subject, $body, $header);
    $feedback = 'Thanks for your message';
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T03:48:43.297

`PHP`您创建的脚本将返回一个空页面，因为该脚本只是用于发送电子邮件。我认为您需要将`PHP`脚本和`HTML`脚本与`PHP`脚本顶部的脚本结合起来以获得您想要的并将表单操作编辑为空，如下例所示：

```
<?php

$to = 'example@gmail.com';
$subject = 'Message from The Rocket Factory';

$name = $_POST['name'];
$email = $_POST['email'];
$message = $_POST['message'];

$body = <<<EMAIL

Hi, my name is $name.

$message

From $name
My Address is $email

EMAIL;

$header = "From: $email";

if($_POST){
    mail($to, $subject, $body, $header);
    $feedback = 'Thanks for your message';
}

?>

<div>
<form id="form_id" name="form_name" action="" method="post">
                <div>
                    <label for="name">Name: </label>
                    <input type="text" name="name" id="name" placeholder="John Smith" required/>
                </div>

                <div>
                    <label for="email">Email: </label>
                    <input type="email" name="email" id="email" placeholder="name@mail.com" required/>
                </div>

                <div>
                    <label for="message">Message: </label>
                    <textarea name="message" id="message" rows="5" cols="30"></textarea>
                </div>

                <div>
                    <input id="submit" type="submit" name="submit" value="submit" />
                </div>
            </form>
            <p id="feedback"><?php echo $feedback; ?></p>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T04:07:49.423

您可以通过两种方式实现这一点： 1\. 将 php 和 html 代码放在一个页面中。2.使用ajax提交表单。

```
 <div>
    <form id="form_id" name="form_name" action="scripts/index.php" method="post">
            <div>
                <label for="name">Name: </label>
                <input type="text" name="name" id="name" placeholder="John Smith" required/>
            </div>

            <div>
                <label for="email">Email: </label>
                <input type="email" name="email" id="email" placeholder="name@mail.com" required/>
            </div>

            <div>
                <label for="message">Message: </label>
                <textarea name="message" id="message" rows="5" cols="30"></textarea>
            </div>

            <div>
                <input id="submit" type="submit" name="submit" value="submit" />
            </div>
        </form>
 </div>

   <?php

     $to = 'example@gmail.com';
     $subject = 'Message from The Rocket Factory';

     $name = $_POST['name'];
     $email = $_POST['email'];
      $message = $_POST['message'];

      $body = <<<EMAIL
         Hi, my name is $name.
           $message
         From $name
        My Address is $email
       EMAIL;

  $header = "From: $email";

if($_POST){
     mail($to, $subject, $body, $header);
    $feedback = 'Thanks for your message';
    echo '<p id="feedback">'.$feedback.'</p>'; <-- Notice this..
 }
?> 
```

您还可以在 jquery ($.ajax) 或 javascript 中使用 ajax。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T03:41:43.850

您的表单会将用户带到 scripts/index.php。您正在使用 HTML 表单在页面上回显“$feedback”变量。
使用header("location: filelocation");从 scripts/index.php 重定向 出口（）;

# tfs - 团队系统 Web 访问 ADFS SSO

> ID：14330763
> 
> 赞同：4
> 
> 时间：2013-01-15T03:35:43.783
> 
> 标签：tfs, single-sign-on, adfs

我现在正在开发 TFS 2010。它有一个名为 Team System Web Access 的内置网站。团队系统 Web 访问应与 ADFS 集成以提供 SSO 支持。任何人都可以帮助展示一些解决方案吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-14T20:10:08.320

如果你想使用单点登录，你可以。只要连接用户最终获得 Active Directory 凭据，他们就能够访问 TFS 和 Web 访问。这适用于 TFS 2005、2008、2010、2012 和 2013。

正如 Ed 所说，只要对 TFS Web 门户或 TFS 本身的调用是在具有权限的 Active Directory 身份验证帐户的上下文中进行的，它就可以工作。您接收 AD 令牌的方式是您想要配置它的方式。证书、智能卡、登录或 ADFS，对 Windows 来说都是一样的。

# jquery - jquery删除表中带有复选框值的行

> ID：14330764
> 
> 赞同：3
> 
> 时间：2013-01-15T03:35:46.747
> 
> 标签：jquery

有几篇关于此的帖子，但我似乎无法为我的案例找到合适的组合。我使用 jquery 提交带有 AJAX 的表单：

```
<form id="deleteform" name="myform" action="">
<table id="webcam-table">
    <thead>
        <tr>
            <th>Name</th>
            <th>...</th>
            <th><input type="checkbox" name="checkboxselectall" title="Select All" />&nbsp;&nbsp;
                <button type="submit" class="deletebutton" name="delete_video" title="Delete the selected videos">Delete</button></th>
        </tr>
    </thead>
    <tbody>
        <tr >
            <td>some data</td>
            ...
            <td><input type="checkbox" value="<?php echo $this->result_videos[$i]["video_name"]; ?>" title="Mark this video for deletion"/></td>
        </tr>
    </tbody>
</table>
</form> 
```

我需要选择已选中复选框的表格行并将其删除。

```
var checked = jQuery('input:checkbox:checked').map(function () {
    return this.value;
}).get();
var $this = jQuery(this);
jQuery.ajax({
    type: 'POST',
    url: 'index.php?option=com_recordings&task=deletevideos&format=raw',
    data: {checkedarray:checked},
    success: function(data){
        jQuery('#deleteform input:checkbox').each(function(){
            if(this.checked){
                $this.parents("tr").remove();
            }
        });
    }
}); 
```

我已经`parents`按照上面的方法进行了尝试，`closest`但这会删除错误的行。另外，它只选择一行，而不是可以用复选框选择的多行。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-15T03:42:54.777

尝试：

```
jQuery('input:checkbox:checked').parents("tr").remove(); 
```

演示：[jsFiddle 示例](http://jsfiddle.net/seY3j/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T03:41:30.847

`jQuery('#deleteform input[type="checkbox"]:checked').parent().parent().remove()`

第一个`parent()`是`td` 第二个是`tr`

这是一个要演示的小提琴：http: [//jsfiddle.net/C2WMS/](http://jsfiddle.net/C2WMS/)

# c++ - 使用 decltype(var) 后跟“var”的内部类型时出现 C++11 编译器错误

> ID：14330768
> 
> 赞同：9
> 
> 时间：2013-01-15T03:36:33.443
> 
> 标签：c++, visual-studio-2010, c++11, compiler-errors, decltype

我正在使用 Visual C++ 2010，这是我的代码片段：

```
std::set<int> s;
decltype(s)::value_type param = 0; 
```

我收到以下错误消息，有人可以帮助我吗？

```
> error C2039: 'value_type' : is not a member of '`global namespace''
> error C2146: syntax error : missing ';' before identifier 'param' 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T04:20:44.680

这是去年在 Connect 上提出的 Visual Studio 错误。这是[问题 757545（“不能在范围运算符之前使用 decltype”）](http://connect.microsoft.com/VisualStudio/feedback/details/757545/cannot-use-decltype-before-scope-operator)。

该问题旁边列出了一个解决方法，它实际上与@iammillind 的相同，只是它使用了在 C++11 发布前不久`std::identity`被删除的解决方法，无论出于何种原因。`<functional>`（[`std::common_type`](http://en.cppreference.com/w/cpp/types/common_type)带有一个模板参数是等效的；[`std::remove_reference`](http://en.cppreference.com/w/cpp/types/remove_reference)在某些情况下是相同的。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-15T03:46:23.210

我看到使用 g++ 4.7.2 版本，代码编译得很好。所以它可能是 MSVS 中的**编译器错误**。
暂时你可以尝试以下技巧：

```
#ifdef COMPILER_BUG_STILL_THERE
template<typename T> struct Get { typedef T type; };
#define DECLTYPE(VAR) Get<decltype(VAR)>::type
#else
#define DECLTYPE(VAR) decltype(VAR)
#endif 
```

将其用作：

```
DECLTYPE(s)::value_type param = 0; 
```

*免责声明*：当然有了这个技巧，你可能不得不`typename`在模板中使用。为此，您可以再拥有 1 个宏，例如`#define TDECLTYPE(VAR) typename DECLTYPE(VAR)`

# ios - 如何在 iOS 6 中获得“打开 WiFi 以获得更准确的用户位置”

> ID：14330773
> 
> 赞同：3
> 
> 时间：2013-01-15T03:36:50.360
> 
> 标签：ios, gps, maps

在 Apple Maps 中，当您禁用 wifi 并打开 Cellar Data 时会出现此警报。如何在我自己的应用程序中实现此警报？

![在此处输入图像描述](../Images/9ae467d3518eba1a3d06a91186af0016.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T03:43:00.090

*注意：这个答案并没有完全达到你的目标。*

当 Wi-Fi 关闭时会弹出此警报消息。

使用[Apple 可达性代码](http://developer.apple.com/iphone/library/samplecode/Reachability/)来确定网络类型。如果不是 Wi-Fi，则提示此消息。但是，Reachability 只能确定您是否有 Wi-Fi 网络连接，而不是 Wi-Fi 是 ON 还是 OFF。

位置准确性要求 Wi-Fi 已打开，但不一定要连接到 Wi-Fi 热点。

更多信息：

*   没有 SDK 来确定 Wi-Fi 是打开还是关闭
*   无法保证启用 Wi-Fi 会有更准确的 GPS
*   定位精度取决于网络提供商的信号和更新频率

# c# - ASP.NET MVC3 - 显示 SQL 已触发

> ID：14330775
> 
> 赞同：0
> 
> 时间：2013-01-15T03:37:05.307
> 
> 标签：c#, asp.net-mvc-3, glimpse

我正在为 ASP.NET MVC3寻找类似于Rails 世界中的[Bullet的东西。](http://railscasts.com/episodes/372-bullet)

具体来说，我正在寻找一个轻量级插件来触发所有 SQL 来加载网页，而无需挖掘日志。

我在 ASP.NET MVC3 上使用 FluentNhibernate 和 SQL Server 2008 R2。

我用过[Glimpse](http://getglimpse.com)，可能还有一种方法可以添加一个插件来检查 SQL。但我正在寻找更轻的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T03:39:46.043

MiniProfiler 可能是您正在寻找的：http: [//miniprofiler.com/](http://miniprofiler.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T03:51:43.890

Glimpse 有多个引擎的插件，包括实体框架。

根据您的数据访问框架，您可能需要尝试：

*   [NHibernate 一瞥](http://nuget.org/packages/NHibernate.Glimpse/3.3.1.4000)
*   [RavenDB 一瞥](http://nuget.org/packages/Glimpse.RavenDb)
*   [实体框架一瞥](http://nuget.org/packages/Glimpse.Ef)
*   [PetaPoco 一瞥](http://nuget.org/packages/PetaPoco.Glimpse)
*   [LINQ2SQL 一瞥](http://nuget.org/packages/FlexLabs.Glimpse.Linq2Sql)

# gwt - 使用 gwt:run-codeserver 耗尽内存

> ID：14330780
> 
> 赞同：2
> 
> 时间：2013-01-15T03:37:49.183
> 
> 标签：gwt, maven, maven-3

我有一个大型 GWT 应用程序，我想通过 Super Dev Mode 进行测试。

运行应用程序时

```
mvn gwt:run-codeserver 
```

它将编译好并提供服务器的 URL。此时我在网络浏览器中启动我的应用程序并尝试使用小书签再次编译它。第二次编译带来了一系列内存错误，例如：

```
Caused by: java.lang.OutOfMemoryError: Java heap space    
...
[ERROR] Out of memory; to increase the amount of memory, use the -Xmx flag at startup (java -Xmx128M ...) 
```

因此，我需要为运行服务器的 Java 进程分配更多内存已不是什么秘密。我无法解决的是如何做到这一点。

我的 pom.xml 中有以下内容

```
<plugin>                                    
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>gwt-maven-plugin</artifactId>
    <version>${gwt.maven.version}</version>
    <configuration>
        <extraJvmArgs>-Xmx2048M -Xms1024M -Xss1024k -XX:MaxPermSize=256M -XX:PermSize=128M</extraJvmArgs>
    </configuration>
</plugin> 
```

我的 MAVEN_OPTS 环境变量设置为

```
MAVEN_OPTS=-Xmx2048M 
```

我试过用 maven 执行

```
mvn -Dgwt.extraJvmArgs=-Xmx2048M gwt:run-codeserver 
```

我还尝试使用 Oracle JDK 和 Fedora 提供的开源 JDK。

没有任何区别。我在这里做错了什么？

**更新**

我可以确认这是 Maven 插件的问题，而不是代码的问题。使用 IntelliJ 对 Super Dev Mode 的内置支持运行项目允许我很好地编译和重新编译应用程序。所以这归结为知道增加 Maven 插件也可以访问的内存的正确方法。这显然不是我上面尝试过的方法之一......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T04:37:03.630

好吧，这是我的错。POM.XML 有一些用于在针对配置文件进行编译时使用的 gwt 插件的设置，该配置文件已正确配置了内存设置，然后是另一组未绑定到配置文件的 gwt 插件设置（我没有注意到）。

因此，当我为特定配置文件（应用服务器）进行编译时，一切都很好。正在应用配置文件中定义的设置，并且一切都按您的预期工作。但是当我在没有设置任何配置文件的情况下以 superdevmode 运行时，第二个不太具体的设置被用于我在命令行上设置的任何内容之上。

我最终使用`-X`maven 标志调试了问题，它转储了 gwt 插件实际使用的配置。如果有人有同样的问题，请查找如下示例的输出。从这里你可以知道最终应用了什么设置，然后你可以用它来找出它的设置位置。

```
[DEBUG] --- exit fork of org.jboss.pressgang.ccms:pressgang-ccms-ui:1.0-SNAPSHOT for org.codehaus.mojo:gwt-maven-plugin:2.5.1-rc1:run-codeserver (default-cli) ---
[DEBUG] -----------------------------------------------------------------------
[DEBUG] Goal:          org.codehaus.mojo:gwt-maven-plugin:2.5.1-rc1:run-codeserver (default-cli)
[DEBUG] Style:         Regular
[DEBUG] Configuration: <?xml version="1.0" encoding="UTF-8"?>
<configuration>
  <bindAddress>${gwt.bindAddress}</bindAddress>
  <codeServerPort>${gwt.codeServerPort}</codeServerPort>
  <extraJvmArgs default-value="-Xmx1024m">-Xmx1024m</extraJvmArgs>
  <gen default-value="${project.build.directory}/.generated">${gwt.gen}</gen>
  <genParam default-value="true">${gwt.genParam}</genParam>
  <generateDirectory default-value="${project.build.directory}/generated-sources/gwt"/>
  <gwtSdkFirstInClasspath default-value="false">${gwt.gwtSdkFirstInClasspath}</gwtSdkFirstInClasspath>
  <inplace default-value="false">${gwt.inplace}</inplace>
  <jvm>${gwt.jvm}</jvm>
  <localRepository>${localRepository}</localRepository>
  <logLevel default-value="INFO">INFO</logLevel>
  <module>${gwt.module}</module>
  <persistentunitcache>${gwt.persistentunitcache}</persistentunitcache>
  <persistentunitcachedir>${gwt.persistentunitcachedir}</persistentunitcachedir>
  <pluginArtifacts>${plugin.artifacts}</pluginArtifacts>
  <project>${project}</project>
  <remoteRepositories>${project.remoteArtifactRepositories}</remoteRepositories>
  <style default-value="OBF">${gwt.style}</style>
  <version>${plugin.version}</version>
  <warSourceDirectory default-value="${basedir}/src/main/webapp"/>
  <webappDirectory default-value="${project.build.directory}/${project.build.finalName}">${gwt.war}</webappDirectory>
</configuration> 
```

# php - 调用超类中声明的函数时引用子类对象

> ID：14330782
> 
> 赞同：2
> 
> 时间：2013-01-15T03:38:29.883
> 
> 标签：php

如何使函数始终引用它的当前类对象，即使从子类调用时也是如此？

以下代码将回显 a：a

我需要回显 b: b

```
class superclass {

    private $a = 'a';

    public function getObjectVars() {
        return get_object_vars($this);
    }

}

class subclass extends superclass {

    private $b = 'b';

}

$obj = new subclass();

$vars = $obj->getObjectVars();
foreach ($vars as $name => $value) {

    echo $name . ': ' . $value;

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T04:05:55.280

我认为您需要使子类中的变量“受保护”而不是私有，以便父方法可以访问它们。

# woocommerce - Woo-commerce 商店页面删除了自定义 DIV

> ID：14330783
> 
> 赞同：2
> 
> 时间：2013-01-15T03:38:44.460
> 
> 标签：woocommerce

我正在制作一个基于二十二的自定义主题。我面临关于 woocommerce 商店页面的问题。我有一个可以正常工作的页面模板。但是，当我激活 woocommerce 插件并显示商店基本页面（使用我的自定义页面模板）时，它会删除我的所有自定义 div 和其他自定义内容。我使用了 woocommerce.php 和操作钩子，遵循[了 woocommerce 文档。](http://wcdocs.woothemes.com/codex/third-party-custom-theme-compatibility/)但它没有产生任何结果。这是我的页面模板代码。

```
 <?php
/**
 * Template Name: Front Page Template
 *
 * Description: A page template that provides a key component of WordPress as a CMS
 * by meeting the need for a carefully crafted introductory page. The front page template
 * in Twenty Twelve consists of a page content area for adding text, images, video --
 * anything you’d like -- followed by front-page-only widgets in one or two columns.
 *
 * @package WordPress
 * @subpackage Twenty_Twelve
 * @since Twenty Twelve 1.0
 */

get_header(); ?>

    <div id="primary" class="site-content">
        <div id="content" role="main">

<div class="rotator">
                <ul id="rotmenu">

                    <?php
                        $recentposts=get_pages('number=5');
                       // echo $recentposts;
                        $ii=0;
                        if ($recentposts) {

                            $ii=0;
                        //foreach($recentposts as $page) {
                        //setup_postdata($page);
                            for ($ii=1;$ii<=5;$ii=$ii+1){
                            //$ii=$ii+1;

                                $title='r_slideshow_0'.$ii.'_title';
                                $image='r_slideshow_0'.$ii.'_uploader';
                                $details='e_slideshow_0'.$ii.'_textarea';
                                $link='r_slideshow_0'.$ii.'_link';
                               // echo $page;
                                // echo $title;
                                //echo $image;
                                //echo $details;
                                //echo of_get_option($image, 'no entry');
                        ?>

                            <li>

                                <a href="<?php echo of_get_option($link, 'no entry');?>"><?php echo of_get_option($title, 'no entry');/*echo $page->post_title;*/ ?></a>
                                <div style="display:none;">
                                    <div class="info_image"><?php echo of_get_option($image, 'no entry');?></div>
                                    <div class="info_heading"><?php echo of_get_option($title, 'no entry'); ?></div>
                                    <div class="info_description">

                                        <?php echo of_get_option($details, 'no entry'); ?>
                                         <a href="<?php echo of_get_option($link, 'no entry');?>" class="more">Read Details >></a><br/>
                                     </div>
                                  </div>
                            </li>

                            <?php
                        //$ii=$ii+1;

                        }
                        }
                        ?>      
                    </ul>
                      <div id="rot1">
                    <img src="" width="100%" height="300" class="bg" alt=""/>
                    <div class="heading">
                        <h1></h1>
                    </div>
                    <div class="description">
                        <p></p>

                    </div>    
                </div>
            </div>

                    <!--#rotator on front static page-->

                    <?php 
                    if(of_get_option('boxchoice_radio', '0' )){
                        ?>
                        <!--box content-->
                     <div class="section_front_page group_front_page">
                         <div class="col_front_page span_1_of_3">

                            <img src="<?php echo of_get_option('frontpage_boximage_01' ); ?>"style=" ">
                                <?php if(of_get_option('frontpage_textarea_01' ) && of_get_option('frontpage_textarea_01' )!='Default Text') 
                                {
                                    ?>

                               <?php echo of_get_option('frontpage_textarea_01' ); ?>
                                <?php } ?>

                                <br/>
                                <?php if(of_get_option('frontpage_linkarea_01' ) && of_get_option('frontpage_linkarea_01' )!='Default') 
                                {
                                    ?>
                                <a href="<?php echo of_get_option('frontpage_linkarea_01' ); ?>">Read More >></a>
                                <?php } ?>
                         </div>
                         <div class="col_front_page span_1_of_3">

                           <img src="<?php echo of_get_option('frontpage_boximage_02' ); ?>" style="">
                                <?php if(of_get_option('frontpage_textarea_02' ) && of_get_option('frontpage_textarea_02' )!='Default Text') 
                                {
                                    ?>
                                    <p>
                               <?php echo of_get_option('frontpage_textarea_02' ); ?>
                                     </p>
                               <?php } ?>
                                <br/>
                                <?php if(of_get_option('frontpage_linkarea_02' ) && of_get_option('frontpage_linkarea_02' )!='Default') 
                                {
                                    ?>
                                <a href="<?php echo of_get_option('frontpage_linkarea_02' ); ?>">Read More >></a>
                                 <?php } ?>
                         </div>
                         <div class="col_front_page span_1_of_3">
                             <img src="<?php echo of_get_option('frontpage_boximage_03' ); ?>"style=" float:right; width:100%;" >

                               <br/>
                                <?php if(of_get_option('frontpage_textarea_03' ) && of_get_option('frontpage_textarea_03' )!='Default Text') 
                                {
                                    ?>
                               <?php echo of_get_option('frontpage_textarea_03' ); ?>
                               <?php } ?>
                               <?php if(of_get_option('frontpage_linkarea_03' ) && of_get_option('frontpage_linkarea_03' )!='Default') 
                                {
                                    ?>
                                <a href="<?php echo of_get_option('frontpage_linkarea_03' ); ?>">Read More >></a>
                              <?php } ?>

                         </div>
                  </div>    
                    <!--#end of box content-->
                    <?php
                    }  //end of boxes
                    ?>

                    <!--#end of box content-->

                    <!--default content on page-->
            <?php while ( have_posts() ) : the_post(); ?>
                <?php if ( has_post_thumbnail() ) : ?>
                    <div class="entry-page-image">
                        <?php the_post_thumbnail(); ?>
                    </div><!-- .entry-page-image -->
                <?php endif; ?>

                <?php get_template_part( 'content', 'page' ); ?>

            <?php endwhile; // end of the loop. ?>

        </div><!-- #content -->
    </div><!-- #primary -->

<?php get_sidebar( 'front' ); ?>
<?php get_footer(); ?> 
```

我在我的functions.php文件中使用了它来使它与woocommerce兼容，

```
remove_action( 'woocommerce_before_main_content', 'woocommerce_output_content_wrapper', 10);
remove_action( 'woocommerce_after_main_content', 'woocommerce_output_content_wrapper_end', 10);

add_action('woocommerce_before_main_content', 'my_theme_wrapper_start', 10);
add_action('woocommerce_after_main_content', 'my_theme_wrapper_end', 10);

function my_theme_wrapper_start() {
  echo '<div id="main">';
}

function my_theme_wrapper_end() {
  echo '</div>';
} 
```

但是，它没有用。只有产品在页面上显示为全宽，默认侧边栏位于其底部。

我需要一些帮助。你能给我一些想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T13:53:17.183

最好是你使用“[模板覆盖](http://wcdocs.woothemes.com/codex/template-structure/)”方法：

将主题文件夹中的 woocommerce/templates/ 文件夹复制到 yourtheme/woocommerce/

在该文件夹中，您可以根据自己的喜好修改 html 结构，它将代替 woocommerce 标准 html 模板使用。

完成后，打开这两个文件：

```
/wp-content/themes/your-theme/woocommerce/shop/wrapper-start.php
/wp-content/themes/your-theme/woocommerce/shop/wrapper-end.php 
```

并修改 html 以匹配您的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-08-17T09:45:05.947

有两种方法，一种是使用 woo commerce_content()，另一种是使用钩子，所以请按照第一种方法将 woo commerce 合并到您的主题中，如果您不遵循合并 woo commerce 到主题的文档，将对您的主题设计有害......

# javascript - 如何使用 Cleditor 修复尺寸

> ID：14330788
> 
> 赞同：2
> 
> 时间：2013-01-15T03:39:30.147
> 
> 标签：javascript, jquery, text-editor, cleditor

我到处寻找解决方案，但没有找到答案

大小上的 cleditor 存在问题（更改大小浏览器时）。字段将丢失。必须再次按下重新加载。这样数据就回来了。

单击工具栏时会显示错误。

> 执行 justify center 命令时出错。

![在此处输入图像描述](../Images/48840acb5d79761565ddf1738951dadf.png)

我该如何解决。

谢谢

# c++ - 为什么 (foobar>>x) 优先于 (! foobar.eof() )

> ID：14330789
> 
> 赞同：9
> 
> 时间：2013-01-15T03:39:37.557
> 
> 标签：c++, text-files, binaryfiles

> **可能重复：**
> [为什么循环条件内的 iostream::eof 被认为是错误的？](https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong)
> [eof() 不好的做法？](https://stackoverflow.com/questions/5837639/eof-bad-practice)

我的老师说我们不应该使用 EOF 来读取文本文件或二进制文件信息，而应该使用 (afile>>x)。他没有解释为什么，谁能给我解释一下。有人还可以解释这两种不同的阅读方法有什么区别吗

```
//Assuming declaration 
//ifstream foobar

( ! foobar.eof() )
{
    foobar>>x; // This is discouraged by my teacher

}

 while (foobar>>x)
{
  //This is encouraged by my teacher

} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-15T03:40:13.717

# highcharts - 如何完全禁用高图的鼠标/手指交互

> ID：14330793
> 
> 赞同：3
> 
> 时间：2013-01-15T03:39:55.543
> 
> 标签：highcharts

我搜索了文档，但找不到讨论这个的帖子。

我目前正在开发一个可用于移动和 PC 浏览器的项目。由于 iPhone 上的屏幕非常小，我想禁用它上的 highcharts 交互（即使向下滚动页面，交互也会让我失败）。

我想问一下是否有像“hasInteraction:false”这样的参数。

感谢您提供任何提示！

更新：

我尝试了 Ricardo Lohmann 的这段代码，它正在禁用鼠标跟踪：

```
plotOptions: {
    series: {
        enableMouseTracking: false
    }
} 
```

但是在移动设备上它仍然阻止我的手指向下滚动。我在 Google 上搜索并找到了一个帖子：[http](http://blog.rafael.jp/post/2958719820/div-mouseenabled-false) ://blog.rafael.jp/post/2958719820/div-mouseenabled-false但仍然无法正常工作（让图表不会阻止我的手指滚动）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-19T09:33:12.800

我也在寻找解决方案。
更准确地说，即使手指开始在图表上拖动，我也想启用页面滚动。我仍然希望触摸数据点会打开工具提示。

您可能对 v3.0.4 ["Added new option, tooltip.followTouchMove ..."](https://github.com/highslide-software/highcharts.com/commit/49e18e017f02c107714f3aae316dc1021bdbf288)中的这个提交感兴趣。~~我还是要试试~~。我在 iPhone 模拟器上试过了，它可以工作：

在您的 HTML 页面中的某处：

```
<script type="text/javascript" src="//code.highcharts.com/3.0.1/highcharts.js"></script> 
```

稍后，当您在 JavaScript 代码中创建图表时：

```
$('#chartdiv').highcharts({
    chart : {
        type : 'line',  // e.g. for a line chart
        zoomType: null,  // this is already the default, it's just to stress what's said in commit comments and make code "speak"
    },
    tooltip: {
        followPointer: false,  // this is already the default, it's just to stress what's said in commit comments and make code "speak"
        followTouchMove: false,  // this is already the default, it's just to stress what's said in commit comments and make code "speak"
    },
    // other options...
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-15T13:53:59.687

```
plotOptions: {
    series: {
        enableMouseTracking: false
    }
} 
```

[**演示**](http://jsfiddle.net/ricardolohmann/CDJVU/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-05-18T03:24:53.890

```
 plotOptions: {
           <your type of chart, for example "spline">: {
                enableMouseTracking: false
            }
        }, 
```

可以解决你的问题

# php - mysql order by rand() 性能问题及解决方案

> ID：14330798
> 
> 赞同：7
> 
> 时间：2013-01-15T03:40:26.307
> 
> 标签：php, mysql

我使用 rand() 的顺序从数据库生成随机行没有任何问题，但我意识到随着数据库大小的增加，这个 rand() 会导致服务器负载过重，所以我正在寻找一种替代方法，我尝试通过生成一个随机数使用 php rand() 函数并将其作为 id 在 mysql 查询中，它非常快，因为 mysql 知道行 id，但问题是在我的表中所有数字都不可用。例如 1、2、5、9， 12这样。

如果 php rand() 生成数字 3,4 等，则查询将为空白，因为没有数字 3、4 等的 id。

从 php 生成随机数的最佳方法是什么，但它应该在该表中生成可用的 no，因此它必须检查该表。请告知。

```
$id23=rand(1,100000000);
    SELECT items FROM tablea where status='0' and id='$id23' LIMIT 1 
```

上述查询速度很快，但有时会生成数据库中不可用的 no。

```
 SELECT items FROM tablea where status=0 order by rand() LIMIT 1 
```

上述查询速度太慢，导致服务器负载过重

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T03:49:33.417

首先，都生成一个从 1 到 MAX(id) 的随机值，而不是 100000000。

那么至少有几个很好的解决方案：

1.  `>`不使用`=`

    ```
    SELECT items FROM tablea where status='0' and id>'$id23' LIMIT 1 
    ```

    创建一个索引`(status,id,items)`以使其成为仅索引查询。

2.  使用`=`，但如果没有找到匹配项，请使用不同的随机值重试。有时需要多次尝试，但通常只需要一次尝试。`=`应该更快，因为它可以使用主键。如果它更快并且在 90% 的时间内一次尝试就可以完成，那么当需要多次尝试时，这可能会弥补另外 10% 的时间。取决于您的 id 值有多少差距。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-15T03:56:25.600

使用您的数据库从表中找到最大值，生成一个小于或等于该值的随机数，获取 id 大于或等于您的随机数的第一行。无需 PHP。

```
SELECT items
FROM tablea
WHERE status = '0' and
      id >= FLOOR(1 + RAND() * (SELECT MAX(id) FROM tablea))
LIMIT 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T03:47:09.227

你是对的，`ORDER BY RAND()`如果你正在处理大型数据集，这不是一个好的解决方案。根据需要随机化的频率，您可以生成一个带有随机数的列，然后以某个预定义的时间间隔更新该数字。

您将使用该列并将其用作您的排序索引。这适用于重读环境，并在一段时间内产生可预测的随机顺序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T03:52:30.433

一个可能的解决方案是使用限制：

```
$id23=rand(1,$numberOfRows);

SELECT items FROM tablea where status='0' LIMIT $id23 1 
```

这不会产生任何遗漏的行（但正如 hek2mgl 提到的）需要知道选择中的行数。

# php - 执行另一个 PHP 文件并从方法返回输出，这可能吗？

> ID：14330804
> 
> 赞同：3
> 
> 时间：2013-01-15T03:40:56.520
> 
> 标签：php, execute

假设我有一个 PHP 脚本 test.php 有一个方法

```
<?php
function execute($filename){
    //do something

    return $output;
}
?> 
```

我还有另一个 PHP 脚本`executable.php`

```
<?php 
    echo "I am executed";
?> 
```

`execute`那么我可以运行任何代码来执行第二个文件并在我调用时返回第一个方法的输出`echo execute('executable.php');`吗？

我想你们能明白我的意思。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T03:43:13.777

您可以使用[output buffering](http://php.net/manual/en/book.outcontrol.php)，只要包含的文件还没有这样做：

```
ob_start();

require $filename;

$content = ob_get_contents();

ob_end_clean();

return $content; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T03:45:32.647

使用`ob_Start`和`ob_get_contents`捕获脚本的输出。像这样的东西应该工作：

```
<?php

function execute($filename){
    ob_start();
    include $filename;
    $output = ob_get_contents();
    ob_end_clean();
    return $output;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T03:44:42.900

```
<?php#test.php
    include 'executable.php';
    echo $test;
?>

<?php#executable.php
    $test = "I am executed";
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T03:44:48.550

```
function execute($filename){
    include_once($filename);
    } 
```

$filename 是要包含的文件的名称。我认为这会对您有所帮助...

这是函数调用..

```
 execute('abc.php'); 
```

# html - 有图标时输入宽度不同

> ID：14330805
> 
> 赞同：0
> 
> 时间：2013-01-15T03:41:04.747
> 
> 标签：html, css, twitter-bootstrap

我正在尝试使用 twitter bootstrap 构建一个表单，并通过使用 .input-block-level 类来最大化输入字段的宽度。

这在以下示例中效果很好，取自官方网站。

*   [http://pastebin.com/Hi5nTDQq](http://pastebin.com/Hi5nTDQq) ![在此处输入图像描述](../Images/92e5e6b246e9e31bd08273b16ba3a48e.png)

但是，如果我以同样来自官方网站的图标为例，并在输入元素上使用 .input-block-level 类，它就不起作用。

*   [http://pastebin.com/2KMbyDxT](http://pastebin.com/2KMbyDxT) ![在此处输入图像描述](../Images/99b8a5f3c6122ef3ccb63a933efe5007.png)

如果我将 .input-block-level 类应用于*input-prepend*和*input*，它会变宽但比预期的宽一点。

*   [http://pastebin.com/uQd3QcBm](http://pastebin.com/uQd3QcBm) ![在此处输入图像描述](../Images/65f738c65846470646cdae30a657690a.png)

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T04:31:40.900

你没有做错什么。您拥有的额外空间是由于图标。我认为您将需要手动进行调整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T13:19:50.357

一个有趣的问题，这是迄今为止我能想到的最好的两个解决方案：http:
[//jsfiddle.net/panchroma/jckTk/](http://jsfiddle.net/panchroma/jckTk/)

两者的密码字段前都有一个空白。一种使用默认背景和边框，另一种使用一些简单的 CSS 删除背景和右侧边框。

```
.passwordAddon{
background-color:inherit !important;
border-right:none !important;
}

.password-With-Prepend{
border-left:none !important;
} 
```

祝你好运！

# ruby - 为什么我的 rspec 测试使我的对象加倍？

> ID：14330807
> 
> 赞同：2
> 
> 时间：2013-01-15T03:41:26.213
> 
> 标签：ruby, rspec2

这是我的代码工作但我的测试失败并且我需要知道我做错了什么的情况之一？

我有一个项目类，它的`all`方法只是吐出这个类的实例：

```
class Project

    @@all_projects = []

    def initialize(options)
      @@all_projects << self
    end

    def self.all
    @@all_projects
  end
end 
```

现在`Project.all`工作得很好，但我写的规范没有。

```
context "manipulating projects" do
    before do
        options1 = {
            name: 'Building house'
        }

        options2 = {
            name: 'Getting a loan from the Bank'
        }

        @project1 = Project.new(options1)
        @project2 = Project.new(options2)
    end
        it "can print all projects" do
      Project.all.should eq([@project1, @project2])
    end 
```

我收到的失败消息是：

```
Project manipulating projects can print all projects
     Failure/Error: Project.all.should eq([@project1, @project2])

       expected: [Building house, Getting a loan from the Bank]
            got: [Building house, Building house, Building house, Getting a loan from the Bank, Building house, Getting a loan from the Bank] 
```

这是要点中的完整规范：[https ://gist.github.com/4535863](https://gist.github.com/4535863)

我究竟做错了什么？我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T03:51:09.610

它使结果加倍，因为它为*每个*`before`测试运行块，其中修改了类属性（当初始化两个新项目时），并且（根据[要点](https://gist.github.com/4535863)）您所指的测试是第二个。

 *为避免该问题，您需要`@@all_projects`在 after 块中重置：

```
after do
  Project.class_variable_set :@@all_projects, []
end 
```

另请参阅：[如何在 ruby​​ 中清除 rspec 测试之间的类变量](https://stackoverflow.com/questions/8274865/how-can-i-clear-class-variables-between-rspec-tests-in-ruby)

（感谢[@iain](https://stackoverflow.com/users/335847/iain)将重置代码移动到`after`块而不是`before`块的建议。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T04:25:16.070

这不使用`before`块来设置臭名昭著的实例变量。

```
describe Project do
  let(:options1){ 
    {
      name: 'Building house',
      priority: 2,
      tasks: []
    }
  }
  let(:options2) {
    {
      name: 'Getting a loan from the Bank',
      priority: 3,
      tasks: []
    }
  }
  let(:project1) { Project.new(options1) }
  let(:project2) { Project.new(options2) }

  context "while starting up" do

    subject { Project.new options1 }
    its(:name) { should include('Building house') }

    its(:tasks) { should be_empty }
  end

  context "manipulating projects" do
    before :all do
      Project.all.clear
    end

    subject { Project.all }
    its(:count) { should be > 0 }

    it { should eq [project1, project2] }

  end

end 
```*

# java - 在对象上同步，需要澄清

> ID：14330809
> 
> 赞同：0
> 
> 时间：2013-01-15T03:41:34.707
> 
> 标签：java, synchronization

如果这里的目标是确保在 List 被序列化并写入文件时，不会对其进行任何更改，那么哪种方法做得更好？

```
private void save() throws IOException {
    FileUtils.deleteQuietly(f);
    synchronized (list_of_important_data) {
        FileManipulationUtils.writeObject(list_of_important_stuff, MY_FILE);
    }
}

private void synchronized save() throws IOException {
    FileUtils.deleteQuietly(f);
    FileManipulationUtils.writeObject(list_of_important_stuff, MY_FILE);
} 
```

他们是否都出于所描述的目的做同样的事情？一个比另一个好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T03:50:02.430

他们根本不做同样的事情。

第一个同步列表；您调用 save() 的对象上的第二个。当它们在不同的对象上同步时，它们可以抵御不同的并发竞争。

第一个防止列表在保存时发生突变，前提是所有突变功能/访问同样同步。

第二个防止 save() 与自身同时执行，或者（更重要的是）在已保存对象上同步的任何其他方法。

问哪个比另一个更好是不明智的。他们甚至没有远程做同样的事情，因此没有远程可比性。哪个是最好的将取决于您首先要通过同步来实现什么。

鉴于您的问题令人困惑，我怀疑答案很可能是“以上都不是”，实际上您需要重新考虑您的并发设计。为了帮助解决这个问题，我们需要查看更多您的代码，并更好地了解您想要实现的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T03:47:32.327

```
 private void synchronized save() throws IOException {
        FileUtils.deleteQuietly(f);
        FileManipulationUtils.writeObject(list_of_important_stuff, MY_FILE);
    } 
```

和

```
 private void save() throws IOException {
        synchronized(this){
            FileUtils.deleteQuietly(f);
            FileManipulationUtils.writeObject(list_of_important_stuff, MY_FILE);
        }
    } 
```

选择一个更短的锁

# ios - MapKit 的缩放行为在 iOS 模拟器中是否被破坏？

> ID：14330814
> 
> 赞同：0
> 
> 时间：2013-01-15T03:42:35.040
> 
> 标签：ios, cocoa, ios-simulator, mapkit

我正在开发一个试图保持两个 MKMapView 在比例方面同步的应用程序。我花了几天时间在 iOS 模拟器上调试，并且越来越沮丧地尝试设置地图视图的比例，无论是通过设置区域还是 MapRect，产生的结果与我预期的完全不同。

当我在手头最方便的 iOS 设备（iPad mini）上试用该应用程序时，MapKit 基本上可以按预期工作，并且我能够快速解决剩余的细微差别。此时，我可以让设备上的两张地图都显示相同的区域（每个维度都在 10m 或更小）；在模拟器上，设置地图的比例有时会产生超出预期比例 2 倍的结果。

有没有其他人经历过模拟器和设备之间的这种差异？如果是这样，有什么解释吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T03:55:36.167

mapkit 的比例不能准确设置，既不能用于一个视图，也不能用于两者。至少这在 ios 6 之前是有效的。原因是 mapkit 缩放到下一个合适的谷歌分辨率，如果你想要比下一个谷歌地图大 5% 的比例，它仍然会捕捉到谷歌分辨率。
所以直到并包括 ios 5，不可能以编程方式缩放到精确值。（我没有看到提到 ios 6 苹果地图中的行为的帖子）

因此，在您的情况下，一个视图可以匹配 16 个 google 缩放级别中的一个，而另一个视图则属于另一个缩放级别。

# php - Yii：在 mysql 服务器上使用活动记录并关闭自动提交

> ID：14330815
> 
> 赞同：1
> 
> 时间：2013-01-15T03:42:39.063
> 
> 标签：php, mysql, activerecord, yii

刚刚写了一个 Yii 应用程序，在开发 mysql 服务器上，自动提交设置为 true。现在，当应用程序投入生产时，我才意识到 mysql 服务器自动提交设置为 false。该应用程序正在使用活动记录进行保存（自动提交）。是否可以在配置数据库文件中设置一个变量，而不必在每次写入数据库时​​添加 beginTransaction 和提交？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T06:38:00.283

CDbConnection 有一个[`autoCommit`](http://www.yiiframework.com/doc/api/1.1/CDbConnection#autoCommit-detail)属性。虽然我还没有测试过。

**编辑**因为[PHP MySQL Yii - 数据库读取而不是写入](https://stackoverflow.com/questions/14288327/php-mysql-yii-database-reading-not-writing)

每次建立连接时尝试使用[`CDbConnection::initSQLs`](http://www.yiiframework.com/doc/api/1.1/CDbConnection#initSQLs-detail)并执行。`SET AUTOCOMMIT=1`

```
'db'=>array(
    ...
    'initSQLs'=>array('SET AUTOCOMMIT=1',),
    ...
); 
```

# android - 在 onDraw 中添加一个 int 变量和一个类来处理 if 语句

> ID：14330816
> 
> 赞同：-1
> 
> 时间：2013-01-15T03:42:41.603
> 
> 标签：android, canvas, ondraw

我正在尝试插入当前的西装，但以用户当前分数附近的文本形式。我创建了以下内容：

```
private int currentSuit = 0; 
```

我在 onDraw 部分输入了以下内容：

```
canvas.drawText("Suit: " + (currentSuit), 300,
    screenH-whitePaint.getTextSize()-12, whitePaint); 
```

还创建了以下内容：

```
 public void currentSuit() {
        String suitText = "";
        if (validSuit == 100) {
            suitText = "Dimonds";
        } else if (validSuit == 200){
            suitText = "Clubs";
        } else if (validSuit == 300){
            suitText = "Hearts";
        } else if (validSuit == 400){
            suitText = "Spades";
        }
    } 
```

我对java和android编码相当陌生。希望有人可以阐明我做错了什么。

我目前可以放入 validSuit 但我得到了当前西装的数值。

validSuit 来自discardPile

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T03:52:13.537

很难说出您的问题是什么（因为您没有明确说出错误），但我认为您想重命名`currentSuit`为`validSuit`，而是将以下内容添加到 onDraw：

```
canvas.drawText("Suit: " + currentSuit(), 300,
    screenH-whitePaint.getTextSize()-12, whitePaint); 
```

# javascript - 数组到函数数组

> ID：14330819
> 
> 赞同：0
> 
> 时间：2013-01-15T03:42:53.183
> 
> 标签：javascript

> **可能重复：**
> [循环内的 Javascript 闭包 - 简单的实际示例](https://stackoverflow.com/questions/750486/javascript-closure-inside-loops-simple-practical-example)

你有一个任意值的数组。在全局范围内编写一个转换函数，将数组转换为返回原始值的函数数组，因此我们将调用 a3，而不是调用 a[3]。

例如我想要：

```
var a = ["a", 24, { foo: "bar" }];
var b = transform(a);

a[1]; // 24
b[1](); // 24 
```

但是我得到：

```
b
[function () { 
              return this.temp;
         }, function () { 
              return this.temp;
         }, function () { 
              return this.temp;
         }] 
```

这是我的代码：

```
var a = ["a", 24, { foo: "bar" }];

var b = transform(a);

document.writeln(a[1]); // 24
document.writeln(b[0]()); // 24
document.writeln(b[1]()); // 24

function transform(array) {

  b = [];
  var i;
     for (i = 0; i < array.length; i += 1) {
        b[i] = function () { 
          return temp;
        };
     }
  return b;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T03:47:34.673

```
function transform(array) {

  b = [];
  var i;
  for (i = 0; i < array.length; i += 1) {
    b[i] = (function (x) { 
              return function () { return x; };
            })(array[i]);
  }
  return b;
} 
```

演示 [http://jsbin.com/udasoj/1/edit](http://jsbin.com/udasoj/1/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T03:45:04.093

如果你调用你的代码是正确`b[0]()`的，那么你应该得到返回的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T03:46:14.230

是什么`temp`？看起来实现这一点的方法是通过另一个函数生成函数：

```
function transform(array) {
  b = [];
  var i;
  for (i = 0; i < array.length; i += 1) {
     b[i] = createReturnFunction(a[i]);
    };
  }

  return b;
}

function createReturnFunction(value){
  return function(){ return value; }; 
} 
```

工作小提琴：http: [//jsfiddle.net/eFWyf/](http://jsfiddle.net/eFWyf/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T03:55:59.033

请注意，现有的答案都不会奏效；它们都将生成返回最后一个值的函数`a`。 `var`是函数范围的并且与闭包的交互很差。

请参阅我刚刚写的另一个答案，它解释了一个类似的问题：[https ://stackoverflow.com/a/14330595/17875](https://stackoverflow.com/a/14330595/17875)

# android - Android 凹凸 API

> ID：14330824
> 
> 赞同：4
> 
> 时间：2013-01-15T03:43:21.963
> 
> 标签：android, bump

当我第一次在我的应用程序上运行 Bump 时，我在 android Bump API 上遇到问题，但是当我第二次尝试它时，当我检查日志时我的应用程序自动关闭它说：

```
A/libc(12139): Fatal signal 11 (SIGSEGV) at 0xdeadbaad (code=1) 
```

我认为问题在于 onDestroy 方法的 unbindService(connection) 以某种方式没有停止服务，因此当您第二次尝试配置它时，由于已经配置的服务，它会收到致命的信号错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T08:07:46.690

您必须创建一个像位置服务这样的服务，并且只需在您的应用程序中调用它一次，然后在您想要使用碰撞并发送或接收数据的活动中使用碰撞注册和取消注册

# ios - 保存/加载函数未正确重新加载文本字段值

> ID：14330826
> 
> 赞同：0
> 
> 时间：2013-01-15T03:43:44.280
> 
> 标签：ios, objective-c, uitextfield, nsuserdefaults

我对开发 iOS 应用程序比较陌生。

我正在开发一个“note-app”，用户可以在其中在文本字段中输入信息，点击保存，然后有机会完全退出应用程序，重新打开，然后通过按钮加载信息。

我目前正在使用 Xcode 4.5。

我已经编写了所有代码并且发生了一些奇怪的事情。我在每个文本字段中输入一些内容（我有十二个），点击保存，然后退出应用程序。当我重新打开应用程序并点击加载时，文本字段 12 中的文本会加载到文本字段 1 中。所有其他文本都消失了。为什么会这样？

SecondViewController.h

```
@interface SecondViewController : UIViewController <UITextFieldDelegate> 
{
    IBOutlet UITextField *myTextField;
    IBOutlet UITextField *myTextField2;
    IBOutlet UITextField *myTextField3;
    IBOutlet UITextField *myTextField4;
    IBOutlet UITextField *myTextField5;
    IBOutlet UITextField *myTextField6;
    IBOutlet UITextField *myTextField7;
    IBOutlet UITextField *myTextField8;
    IBOutlet UITextField *myTextField9;
    IBOutlet UITextField *myTextField10;
    IBOutlet UITextField *myTextField11;
    IBOutlet UITextField *myTextField12;

    IBOutlet UILabel *loaded; 
}

-(IBAction)save:(id)sender;
-(IBAction)load:(id)sender; 
```

第二视图控制器.m

```
@implementation SecondViewController

-(IBAction)save:(id)sender
{    
    //First Save String
    NSString *savestring =myTextField.text;
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [defaults setObject:savestring forKey:@"saveString"];
    [defaults synchronize];

    //Second Save String
    NSString *savestring2 =myTextField2.text;
    NSUserDefaults *defaults2 = [NSUserDefaults standardUserDefaults];
    [defaults2 setObject:savestring2 forKey:@"saveString2"];
    [defaults2 synchronize];

    //Third Save String
    NSString *savestring3 =myTextField3.text;
    NSUserDefaults *defaults3 = [NSUserDefaults standardUserDefaults];
    [defaults3 setObject:savestring3 forKey:@"saveString3"];
    [defaults3 synchronize];

    //Fourth Save String
    NSString *savestring4 =myTextField4.text;
    NSUserDefaults *defaults4 = [NSUserDefaults standardUserDefaults];
    [defaults4 setObject:savestring4 forKey:@"saveString4"];
    [defaults4 synchronize];

    //Fifth Save String
    NSString *savestring5 =myTextField5.text;
    NSUserDefaults *defaults5 = [NSUserDefaults standardUserDefaults];
    [defaults5 setObject:savestring5 forKey:@"saveString5"];
    [defaults5 synchronize];

    //Sixth Save String
    NSString *savestring6 =myTextField6.text;
    NSUserDefaults *defaults6 = [NSUserDefaults standardUserDefaults];
    [defaults6 setObject:savestring6 forKey:@"saveString6"];
    [defaults6 synchronize];

    //Seventh Save String
    NSString *savestring7 =myTextField7.text;
    NSUserDefaults *defaults7 = [NSUserDefaults standardUserDefaults];
    [defaults7 setObject:savestring7 forKey:@"saveString7"];
    [defaults7 synchronize];

    //Eight Save String
    NSString *savestring8 =myTextField8.text;
    NSUserDefaults *defaults8 = [NSUserDefaults standardUserDefaults];
    [defaults8 setObject:savestring8 forKey:@"saveString8"];
    [defaults8 synchronize];

    //Ninth Save String
    NSString *savestring9 =myTextField9.text;
    NSUserDefaults *defaults9 = [NSUserDefaults standardUserDefaults];
    [defaults9 setObject:savestring9 forKey:@"saveString9"];
    [defaults9 synchronize];

    //Tenth Save String
    NSString *savestring10 =myTextField10.text;
    NSUserDefaults *defaults10 = [NSUserDefaults standardUserDefaults];
    [defaults10 setObject:savestring10 forKey:@"saveString10"];
    [defaults10 synchronize];

    //Eleventh Save String
    NSString *savestring11 =myTextField11.text;
    NSUserDefaults *defaults11 = [NSUserDefaults standardUserDefaults];
    [defaults11 setObject:savestring11 forKey:@"saveString11"];
    [defaults11 synchronize];

    //Twelvth Save String
    NSString *savestring12 =myTextField12.text;
    NSUserDefaults *defaults12 = [NSUserDefaults standardUserDefaults];
    [defaults12 setObject:savestring12 forKey:@"saveString12"];
    [defaults12 synchronize];

    loaded.text = @"Dine notater ble lagret!"; 
}

-(IBAction)load:(id)sender;
{    
    //First Load String
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    NSString *loadstring = [defaults objectForKey:@"saveString"];
    [myTextField setText:loadstring];
    [loaded setText:@"Dine notater ble lastet inn!"];

    //Second Load String
    NSUserDefaults *defaults2 = [NSUserDefaults standardUserDefaults];
    NSString *loadstring2 = [defaults2 objectForKey:@"saveString2"];
    [myTextField setText:loadstring2];
    [loaded setText:@"Dine notater ble lastet inn!"];

    //Third Load String
    NSUserDefaults *defaults3 = [NSUserDefaults standardUserDefaults];
    NSString *loadstring3 = [defaults3 objectForKey:@"saveString3"];
    [myTextField setText:loadstring3];
    [loaded setText:@"Dine notater ble lastet inn!"];

    //Forth Load String
    NSUserDefaults *defaults4 = [NSUserDefaults standardUserDefaults];
    NSString *loadstring4 = [defaults4 objectForKey:@"saveString4"];
    [myTextField setText:loadstring4];
    [loaded setText:@"Dine notater ble lastet inn!"];

    //Fifth Load String
    NSUserDefaults *defaults5 = [NSUserDefaults standardUserDefaults];
    NSString *loadstring5 = [defaults5 objectForKey:@"saveString5"];
    [myTextField setText:loadstring5];
    [loaded setText:@"Dine notater ble lastet inn!"];

    //Sixth Load String
    NSUserDefaults *defaults6 = [NSUserDefaults standardUserDefaults];
    NSString *loadstring6 = [defaults6 objectForKey:@"saveString6"];
    [myTextField setText:loadstring6];
    [loaded setText:@"Dine notater ble lastet inn!"];

    //Seventh Load String
    NSUserDefaults *defaults7 = [NSUserDefaults standardUserDefaults];
    NSString *loadstring7 = [defaults7 objectForKey:@"saveString7"];
    [myTextField setText:loadstring7];
    [loaded setText:@"Dine notater ble lastet inn!"];

    //Eight Load String
    NSUserDefaults *defaults8 = [NSUserDefaults standardUserDefaults];
    NSString *loadstring8 = [defaults8 objectForKey:@"saveString8"];
    [myTextField setText:loadstring8];
    [loaded setText:@"Dine notater ble lastet inn!"];

    //Ninth Load String
    NSUserDefaults *defaults9 = [NSUserDefaults standardUserDefaults];
    NSString *loadstring9 = [defaults9 objectForKey:@"saveString9"];
    [myTextField setText:loadstring9];
    [loaded setText:@"Dine notater ble lastet inn!"];

    //Tenth Load String
    NSUserDefaults *defaults10 = [NSUserDefaults standardUserDefaults];
    NSString *loadstring10 = [defaults10 objectForKey:@"saveString10"];
    [myTextField setText:loadstring10];
    [loaded setText:@"Dine notater ble lastet inn!"];

    //Eleventh Load String
    NSUserDefaults *defaults11 = [NSUserDefaults standardUserDefaults];
    NSString *loadstring11 = [defaults11 objectForKey:@"saveString11"];
    [myTextField setText:loadstring11];
    [loaded setText:@"Dine notater ble lastet inn!"];

    //Twelvth Load String
    NSUserDefaults *defaults12 = [NSUserDefaults standardUserDefaults];
    NSString *loadstring12 = [defaults12 objectForKey:@"saveString12"];
    [myTextField setText:loadstring12];
    [loaded setText:@"Dine notater ble lastet inn!"];
} 
```

对于那些*不是*挪威人的人，“Dine notater ble lastet inn！” 和“Dine notater ble lagret！” 意味着保存和加载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T03:58:47.113

在 myTextField 上设置数据的每个地方都`[myTextField setText:loadstring];` 应该是**myTextfield1,2,3....**等等。
  此外，您不必每次都初始化 NSUserDefaults 。`NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];`只需在函数顶部定义它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T04:00:34.487

当您加载每个字符串时，您会一遍又一遍地设置“myTextField”。那是第一个领域。

顺便说一句，没有必要为您要读取/写入的每个字段获取指向标准用户默认值的指针。

# c# - 分布式 Map/Reduce 框架

> ID：14330832
> 
> 赞同：2
> 
> 时间：2013-01-15T03:44:35.157
> 
> 标签：c#, wcf, hadoop, mapreduce, apache-storm

我正在寻找.net 分布式地图/减少框架。我打算将其用于实时数据查询并在多个节点上并行处理查询。我目前正在使用 WCF 进行 Web 层和应用层之间的通信。

例如，如果我有 5 个带有内存数据的节点。如果我将过滤器传递给 5 个节点。过滤器在节点拥有的数据块上执行，结果被还原为最终答案。

只是想知道是否已经有一个框架可以映射工作并减少结果。我看起来更像是风暴的雨云（Twitter 实时地图/减少）。由于许多并发症，不能使用 nimbus。而且 Zookeeper 的开销太大。

我正在尝试使用框架实现以下目标 1）将作业（主要是发送到所有可用节点的请求）映射到可用节点并减少结果。2) 在故障转移时，将作业映射到新节点。3) 管理集群。（如果节点已关闭，则将其从可用服务器列表中删除）

数据将在内存中，因此我不需要分布式文件系统。带有 WCF 作为底层通信的 .NET 将是理想的，但如果有其他框架（任何语言）请告诉我。

任何帮助（框架、代码项目、研究论文、实际代码:)）将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T21:46:14.870

不确定您对 nimbus/zookeeper 的评论是什么意思，因为这些是管理组件。

Storm 听起来确实适合您的用例，但像 Hazelcast 这样的其他人也是如此。我需要有关您需求的更多信息，以查看哪些解决方案可能适合。

我想重要的问题之一是你对实时的意思。如果您只需要较短的响应时间并且需要处理大量数据，Hazelcast 可能会更好。如果您有非结构化数据需要解析/处理并快速提供给用户，那么 Storm 可能更适合。

# postgresql - 用于匹配 URL 的最后两部分的 SQL 函数

> ID：14330838
> 
> 赞同：1
> 
> 时间：2013-01-15T03:45:21.437
> 
> 标签：postgresql, pattern-matching, postgresql-8.3

这是此处帖子的后续问题[Regex 用于匹配 URL 的最后两个部分](https://stackoverflow.com/questions/14313965/regex-for-matching-last-two-parts-of-a-url)

我想知道是否可以使用内置的 sql 函数来完成相同类型的模式匹配，而无需使用正则表达式。特别是我在想是否有办法将字符串说 www.stackoverflow.com 反转为 com.stackoverflow.www 然后将连接应用于 split('com.stackoverflow.www , '.', 1) || split('com.stackoverflow.www , '.', 2) 我会完成，但我不确定这是否可能。

以下是一般问题描述：

我试图找出最好的 sql 函数只匹配由 a 分隔的最后两个字符串。在一个网址中。

例如 www.stackoverflow.com 我只想匹配 stackoverflow.com

我遇到的问题是一些字符串可以有大量的句点，例如

a-abcnewsplus.i-a277eea3.rtmp.atlas.cdn.yimg.com

也应该只返回 yimg.com

我正在使用的 URL 集没有任何路径信息，因此可以假设字符串的最后一部分始终是 .org 或 .com 或类似性质的东西。

> 在上述条件下，哪些 sql 函数在针对 www.stackoverflow.com 运行时将返回 stackoverflow.com，而在针对 a-abcnewsplus.i-a277eea3.rtmp.atlas.cdn.yimg.com 运行时将返回 yimg.com？我不想在解决方案中使用正则表达式，只是 sql 字符串操作函数。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-15T04:09:50.427

看起来你不能用 8.3 函数集[http://www.postgresql.org/docs/8.3/static/functions-string.html](http://www.postgresql.org/docs/8.3/static/functions-string.html)

没有反向 - 9.1 中出现。你可以这样做：

```
select reverse(split_part(reverse(data), '.', 2)) || '.'
    || reverse(split_part(reverse(data), '.', 1))
from example; 
```

见[http://sqlfiddle.com/#!1/25e43/2/0](http://sqlfiddle.com/#!1/25e43/2/0)

你可以声明你自己的反向：[http](http://a-kretschmer.de/diverses.shtml) ://a-kretschmer.de/diverses.shtml然后解决这个问题。

但正则表达式更容易......

# windows - Windows Azure Mobile Services 多次插入，如何获取范围标识

> ID：14330845
> 
> 赞同：0
> 
> 时间：2013-01-15T03:46:27.447
> 
> 标签：windows, azure

在使用 Windows Azure 移动服务的其中一个表的插入脚本中，我想获取刚刚插入的 id 并将其用于在另一个表中插入子相关数据（一对多样式）

任何的想法？？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T00:57:07.197

```
function insert(item, user, request) {
request.execute({
    success: function() {
        var id = item.id;
        console.log("The new item's id is: ", id);
        request.respond();
    }
}); 
```

}

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-15T11:36:34.940

请注意，您还可以获取在服务器脚本中插入的项目的 ID：

```
 var theNewRow = {
        youProperty1: 'inserted',
        yourProperty2: 'in server script'
    };

    yourTable.insert(theNewRow, {
        success: function()
        {
            console.log('the row id' + theNewRow.id);
        } 
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T14:42:13.587

Carlos 在这篇文章中介绍了使用 1:n 关系：http: [//blogs.msdn.com/b/carlosfigueira/archive/2012/09/11/supporting-complex-types-in-azure-mobile-services-clients-实施-1-n-table-relationships.aspx](http://blogs.msdn.com/b/carlosfigueira/archive/2012/09/11/supporting-complex-types-in-azure-mobile-services-clients-implementing-1-n-table-relationships.aspx)

顺便说一句，您可以在此处找到一系列与移动服务相关的帖子：aka.ms/CommonWAMS

# javascript - 在javascript中获取元素的不同方法

> ID：14330848
> 
> 赞同：1
> 
> 时间：2013-01-15T03:46:44.890
> 
> 标签：javascript

两者之间的区别是：

```
document.body 
```

和

```
document.getElementsByTagName('body')[0] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T03:51:51.263

`document.body`只是对象上的一个属性，其中`document`包含对提供给您的相同元素的引用`document.getElementsByTagName('body')[0]`。这就是技术差异。真正的区别是`document.body`更容易输入...... :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T04:23:33.623

1.  in javascript 是对表示页面部分的DOM 元素的`document.body`直接引用。`<body>`

2.  我们可能会经常访问`<body>`标签，我们可以使用快捷方式（而不是像这样使用它的 tagName：`document.getElementsByTagName("BODY").item(0)`或者通过为其分配一个 ID 并使用它）：

# java - 在 Java 中使用特殊字符进行 SAX 解析

> ID：14330852
> 
> 赞同：0
> 
> 时间：2013-01-15T03:47:10.853
> 
> 标签：java, xml, parsing, sax

我正在尝试解析包含一些特殊字符的 xml 文件，`if (($a &gt; 7))`我正在使用 StringBuffer 来读取这些字符，但它没有读取整个字符串。之后的所有角色`&gt;`都被砍掉了。它返回给我的只是`if(($a`. 请给我建议。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T04:19:55.607

使用 SAX 解析 XML 时，可以在*多个*方法调用中获取元素的文本。您*必须*在所有呼叫中累积文本，直到您`endElement`接到呼叫。

# c# - WP8 后台任务可以传递一个 arg 吗？

> ID：14330859
> 
> 赞同：0
> 
> 时间：2013-01-15T03:47:50.760
> 
> 标签：c#, windows-phone-8, background-process

我需要前台应用程序中的一个值，以便在后台任务中使用的查询中使用。此值存储在 roamingSettings 中，并通过提示用户一次进入 roamingSettings。

我可以以某种方式将该值从前台应用程序传递给定期后台任务吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T04:36:03.190

您可以从后台任务中读取应用程序设置，因此只需存储您想要的参数（ApplicationSettings、IsolatedStorage 文件等）并从后台任务中读取它。

# ios - XCode 内存泄漏问题

> ID：14330860
> 
> 赞同：2
> 
> 时间：2013-01-15T03:47:58.570
> 
> 标签：ios, objective-c, memory-leaks, abrecord

我的项目快结束了，尽管在 XCode 中分析我的项目后，它向我表明这一行存在内存泄漏：

![http://i.imgur.com/uTkbA.png](../Images/33fb6605cc35b943121cbddeff41e6b3.png)

以下是相关代码的文本版本：

```
- (void)displayPerson:(ABRecordRef)person
{
    NSString* firstName = (__bridge_transfer NSString*)ABRecordCopyValue(person, kABPersonFirstNameProperty);

    NSString *lastName = (__bridge_transfer NSString*)ABRecordCopyValue(person, kABPersonLastNameProperty);

    NSMutableString *fullName = [NSString stringWithFormat:@"%@ %@", firstName, lastName];

    //NSLog(@"%@", fullName);

    NSString* phoneNum = nil;
    ABMultiValueRef phoneNumbers;
    phoneNumbers = ABRecordCopyValue(person,
                                                     kABPersonPhoneProperty);
    if (ABMultiValueGetCount(phoneNumbers) > 0) {
        phoneNum = (__bridge_transfer NSString*) ABMultiValueCopyValueAtIndex(phoneNumbers, 0);
    } else {
        phoneNum = @"Unknown";
    }

    NSLog(@"First name is %@ and last name is %@", firstName, lastName);
    NSLog(@"Phone is %@", phoneNum);

    phoneNum = [phoneNum stringByReplacingOccurrencesOfString:@"(" withString:@""];
    phoneNum = [phoneNum stringByReplacingOccurrencesOfString:@")" withString:@""]; 
```

谁能帮我解决这个问题？我不相信这会造成严重后果，但我不想给苹果一个理由拒绝我的应用程序从商店。谢谢你。

最好的...SL

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T03:55:13.820

`__bridge_transfer`除了`phoneNumbers`来自`ABRecordCopyValue`. _

您需要将所有权转让`phoneNumbers`给 ARC 或手动释放内存。

**更新：**仔细研究了这个问题后，我不确定您是否可以将所有权转让给 ARC，请参阅[__bridge_transfer 和 ABRecordCopyValue: 以及 ARC](https://stackoverflow.com/questions/9217548/bridge-transfer-and-abrecordcopyvalue-and-arc)了解更多详细信息。

添加`CFRelease(phoneNumbers)`会手动释放内存。

例如：

```
NSString* phoneNum = nil;
ABMultiValueRef phoneNumbers;
phoneNumbers = ABRecordCopyValue(person,
                                                 kABPersonPhoneProperty);
if (ABMultiValueGetCount(phoneNumbers) > 0) {
    phoneNum = (__bridge_transfer NSString*) ABMultiValueCopyValueAtIndex(phoneNumbers, 0);
} else {
    phoneNum = @"Unknown";
}

CFRelease(phoneNumbers); 
```

# javascript - 有没有更好的方法来声明一个对象

> ID：14330861
> 
> 赞同：1
> 
> 时间：2013-01-15T03:48:01.610
> 
> 标签：javascript

目前我检查 sed 对象是否已经存在，如果存在则不擦除它，然后创建该对象。

```
if (typeof result === 'undefined') {
    results = {};
} 
```

只是我来自使用 PHP，你不需要像在 JS 中那样声明太多东西。

虽然我倾向于使用 JS 对象，因为我在 PHP 中使用数组，作为临时存储我需要在脚本中进一步访问的信息的一种方式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T03:50:21.253

你可以这样做：

```
var results = window.results || {}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T03:50:30.977

如果不应该覆盖某些值（例如 、 或 ）`0`，`null`这将不起作用，但是：`false`

```
results = results || {}; 
```

这是有效的，因为`||`如果它是真值则返回第一个值，否则返回第二个值。`undefined`，以及上面部分列出的其他一些值，都是虚假的，但对象是真实的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T03:53:42.383

只需编写您的代码，这样您就不必猜测了。避免全局变量，不要有条件地创建变量，尽早设置默认值。您应该只在特殊情况下需要您的模式，例如为第三方编写库、使用模块系统等。

# ruby-on-rails - 动态更改 ActionMailer 电子邮件 URL 主机

> ID：14330863
> 
> 赞同：0
> 
> 时间：2013-01-15T03:48:11.500
> 
> 标签：ruby-on-rails, actionmailer

在我的 application.html.erb 我有`<%= render @objects %>`，它呈现了一堆`_object.html.erb`部分，每个部分都有一个`<%= link_to(object) %>`. 当有人发表评论时，我在发送的电子邮件中呈现相同的单个部分`<%= render @object %>`，但我希望链接以服务器 url 开头。

我已经尝试了一切：

```
link_to(object)

url_for(object)

before_filter :set_mailer_host
def set_mailer_host
  ActionMailer::Base.default_url_options[:host] = request.host_with_port
end

default_url_options[:host] = "example.com"

def default_url_options
  { host: 'example.com' }
end 
```

...没有任何作用。有还是没有`:only_links`

最后，我只是构建了一个愚蠢的助手，将主机名添加到链接：

```
# application_controller.rb
before_filter { App::request=request }

# application_helper.rb
def hostify obj
  "http://#{App::request.host_with_port}#{url_for obj}"
end

# _object.html.erb:
<%= link_to obj.title, hostify(object) %> 
```

有没有正常的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T03:55:18.717

我无法真正说出您要链接的内容或“obj”指的是什么，但您可以执行以下操作：

```
link_to obj.title, {:host => 'example.com'} 
```

或者

```
link_to obj.title, {:controller => 'store', :action => 'view_cart', :host => 'example.com'} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T05:34:09.923

好吧，在花了一些时间之后，我想我开始弄清楚了。

您必须使用 restful 路由，然后您可以`default_url_options[:host] = host`在 Mailer 操作中设置，并将 :only_path 设置为 true 以`default_url_options`供其他控制器使用。加`:locale`。

在我看来，我有：`objects_url(object)`

因为我有不同的主机名，所以我`request.host_with_port`在发送邮件时作为参数从控制器传递给邮件程序。

`link_to`不接受参数，`url_for()`只能从其中的一部分构建 url。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-22T19:10:10.447

```
def url_options
  { domain: 'example.com' }
end 
```

或者更好地合并以防您使用其他选项：

```
def url_options
  { domain: 'example.com' }.merge(super)
end 
```

# neo4j - Neo4j 中的密码查询返回“未定义”

> ID：14330864
> 
> 赞同：4
> 
> 时间：2013-01-15T03:48:12.600
> 
> 标签：neo4j, cypher

我使用 Neo4j 构建了一个图表，该图表由大约 1000 个节点和大约 270,000 个关系组成。该图是一个航班网络（机场是节点，航班是关系），因此节点与节点之间存在许多关系。我确定某些查询中也有很多循环（我不确定这是否有问题）。无论如何，某些查询可以正常工作，例如：

```
start a=node(1), b=node(2) match p=a-[:flys_to*..1]->b return p;
start a=node(1), b=node(2) match p=shortestPath(a-[:flys_to]->b) return p; 
```

但是当我尝试其他更复杂的查询时，没有友好的错误信息；它只挂了大约 3 分钟（取决于我在哪两个节点之间搜索）并返回“未定义”。

挂起的查询之一如下所示：

```
start a=node(1), b=node(2) match p=a-[:flys_to*..2]->b return p; 
```

另外，一个有趣的旁注是，当我键入以下查询时，它会立即返回“未定义”：

```
start a=node(1), b=node(2) match p=a-[:flys_to]->b return p; 
```

这是否有意义，或者是否有人对我可以从哪里开始故障排除有任何想法？

**有关此特定问题的更多信息**

这是数据库的压缩文件：[http ://www.opensourcebanking.org/neo4j/](http://www.opensourcebanking.org/neo4j/)

我在 VMware 上的虚拟环境中运行它。主机是 OSX 10.8.2，来宾是 Windows Server **2012。JRE 是 1.6.0_38**。此外，我在节点属性“iata”和关系属性“flys_to”上设置了自动索引。

以下是一些 Cypher 查询及其相关的日志消息：

以下查询几乎立即返回“未定义”：

```
start a=node(353), b=node(295)
match p=a-->b
return p; 
```

这是我在日志中得到的：

```
SEVERE: The exception contained within MappableContainerException could not be mapped to a response, re-throwing to the HTTP container
org.neo4j.helpers.ThisShouldNotHappenError: Developer: Andres claims that: Unexpected traversal state encountered
    at org.neo4j.cypher.internal.pipes.matching.BidirectionalTraversalMatcher$StepCollisionDetector.includePath(BidirectionalTraversalMatcher.scala:101)
    at org.neo4j.kernel.StandardBranchCollisionDetector.evaluate(StandardBranchCollisionDetector.java:74)
    at org.neo4j.kernel.StandardBranchCollisionDetector.evaluate(StandardBranchCollisionDetector.java:37)
    at org.neo4j.kernel.impl.traversal.BidirectionalTraverserIterator.fetchNextOrNull(BidirectionalTraverserIterator.java:157)
    at org.neo4j.kernel.impl.traversal.BidirectionalTraverserIterator.fetchNextOrNull(BidirectionalTraverserIterator.java:41)
    at org.neo4j.helpers.collection.PrefetchingIterator.hasNext(PrefetchingIterator.java:55)
    at scala.collection.JavaConversions$JIteratorWrapper.hasNext(JavaConversions.scala:574)
    at scala.collection.Iterator$$anon$21.hasNext(Iterator.scala:371)
    at scala.collection.Iterator$$anon$21.hasNext(Iterator.scala:371)
    at scala.collection.Iterator$$anon$19.hasNext(Iterator.scala:334)
    at scala.collection.Iterator$$anon$19.hasNext(Iterator.scala:334)
    at scala.collection.Iterator$$anon$19.hasNext(Iterator.scala:334)
    at org.neo4j.cypher.internal.ClosingIterator$$anonfun$hasNext$1.apply$mcZ$sp(ClosingIterator.scala:36)
    at org.neo4j.cypher.internal.ClosingIterator$$anonfun$hasNext$1.apply(ClosingIterator.scala:35)
    at org.neo4j.cypher.internal.ClosingIterator$$anonfun$hasNext$1.apply(ClosingIterator.scala:35)
    at org.neo4j.cypher.internal.ClosingIterator.failIfThrows(ClosingIterator.scala:87)
    at org.neo4j.cypher.internal.ClosingIterator.hasNext(ClosingIterator.scala:35)
    at scala.collection.Iterator$class.foreach(Iterator.scala:660)
    at org.neo4j.cypher.internal.ClosingIterator.foreach(ClosingIterator.scala:31)
    at scala.collection.generic.Growable$class.$plus$plus$eq(Growable.scala:48)
    at scala.collection.mutable.ListBuffer.$plus$plus$eq(ListBuffer.scala:128)
    at scala.collection.TraversableOnce$class.toList(TraversableOnce.scala:242)
    at org.neo4j.cypher.internal.ClosingIterator.toList(ClosingIterator.scala:31)
    at org.neo4j.cypher.PipeExecutionResult.createTimedResults(PipeExecutionResult.scala:73)
    at org.neo4j.cypher.PipeExecutionResult.dumpToString(PipeExecutionResult.scala:80)
    at org.neo4j.cypher.PipeExecutionResult.dumpToString(PipeExecutionResult.scala:125)
    at org.neo4j.cypher.javacompat.ExecutionResult.dumpToString(ExecutionResult.java:91)
    at org.neo4j.shell.kernel.apps.Start.exec(Start.java:71)
    at org.neo4j.shell.kernel.apps.ReadOnlyGraphDatabaseApp.execute(ReadOnlyGraphDatabaseApp.java:32)
    at org.neo4j.shell.impl.AbstractAppServer.interpretLine(AbstractAppServer.java:115)
    at org.neo4j.shell.kernel.GraphDatabaseShellServer.interpretLine(GraphDatabaseShellServer.java:92)
    at org.neo4j.shell.impl.AbstractClient.evaluate(AbstractClient.java:130)
    at org.neo4j.shell.impl.AbstractClient.evaluate(AbstractClient.java:114)
    at org.neo4j.server.webadmin.console.ShellSession.evaluate(ShellSession.java:101)
    at org.neo4j.server.webadmin.rest.console.ConsoleService.exec(ConsoleService.java:125)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)
    at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$ResponseOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:205)
    at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)
    at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:288)
    at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)
    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
    at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1469)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1400)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1349)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1339)
    at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:416)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:537)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:699)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:390)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:943)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:756)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:410)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) 
```

以下查询工作正常。它返回 426 行并且没有记录任何内容。

```
start a=node(353), b=node(295)
match p=a-[:flys_to*..1]->b
return p; 
```

以下查询在大约 10-15 分钟后返回“未定义”：

```
start a=node(353), b=node(295)
match p=a-[:flys_to*..2]->b
return p; 
```

日志：

```
SEVERE: The exception contained within MappableContainerException could not be mapped to a response, re-throwing to the HTTP container
java.lang.OutOfMemoryError: Java heap space
    at org.neo4j.cypher.internal.pipes.matching.AddedHistory.toSeq(History.scala:87)
    at org.neo4j.cypher.internal.pipes.matching.AddedHistory.toMap(History.scala:75)
    at org.neo4j.cypher.internal.pipes.matching.PatternMatcher.isMatchSoFar(PatternMatcher.scala:166)
    at org.neo4j.cypher.internal.pipes.matching.PatternMatcher.org$neo4j$cypher$internal$pipes$matching$PatternMatcher$$traverseNextNodeFromRelationship(PatternMatcher.scala:98)
    at org.neo4j.cypher.internal.pipes.matching.PatternMatcher$$anonfun$4.apply(PatternMatcher.scala:150)
    at org.neo4j.cypher.internal.pipes.matching.PatternMatcher$$anonfun$4.apply(PatternMatcher.scala:150)
    at scala.collection.immutable.Stream$$anonfun$map$1.apply(Stream.scala:175)
    at scala.collection.immutable.Stream$$anonfun$map$1.apply(Stream.scala:175)
    at scala.collection.immutable.Stream$Cons.tail(Stream.scala:634)
    at scala.collection.immutable.Stream$Cons.tail(Stream.scala:626)
    at scala.collection.immutable.Stream.foldLeft(Stream.scala:302)
    at org.neo4j.cypher.internal.pipes.matching.PatternMatcher.traverseRelationship(PatternMatcher.scala:150)
    at org.neo4j.cypher.internal.pipes.matching.PatternMatcher.traverseNextSpecificNode(PatternMatcher.scala:61)
    at org.neo4j.cypher.internal.pipes.matching.PatternMatcher.traverseNode(PatternMatcher.scala:72)
    at org.neo4j.cypher.internal.pipes.matching.PatternMatcher.foreach(PatternMatcher.scala:36)
    at scala.collection.generic.Growable$class.$plus$plus$eq(Growable.scala:48)
    at scala.collection.mutable.ArrayBuffer.$plus$plus$eq(ArrayBuffer.scala:99)
    at scala.collection.TraversableOnce$class.toBuffer(TraversableOnce.scala:250)
    at org.neo4j.cypher.internal.pipes.matching.PatternMatcher.toBuffer(PatternMatcher.scala:28)
    at scala.collection.TraversableLike$class.toStream(TraversableLike.scala:571)
    at org.neo4j.cypher.internal.pipes.matching.PatternMatcher.toStream(PatternMatcher.scala:28)
    at scala.collection.TraversableLike$class.toIterator(TraversableLike.scala:570)
    at org.neo4j.cypher.internal.pipes.matching.PatternMatcher.toIterator(PatternMatcher.scala:28)
    at scala.collection.Iterator$$anon$21.hasNext(Iterator.scala:371)
    at scala.collection.Iterator$$anon$19.hasNext(Iterator.scala:334)
    at scala.collection.Iterator$$anon$19.hasNext(Iterator.scala:334)
    at scala.collection.Iterator$$anon$19.hasNext(Iterator.scala:334)
    at org.neo4j.cypher.internal.ClosingIterator$$anonfun$hasNext$1.apply$mcZ$sp(ClosingIterator.scala:36)
    at org.neo4j.cypher.internal.ClosingIterator$$anonfun$hasNext$1.apply(ClosingIterator.scala:35)
    at org.neo4j.cypher.internal.ClosingIterator$$anonfun$hasNext$1.apply(ClosingIterator.scala:35)
    at org.neo4j.cypher.internal.ClosingIterator.failIfThrows(ClosingIterator.scala:87)
    at org.neo4j.cypher.internal.ClosingIterator.hasNext(ClosingIterator.scala:35) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T09:55:11.787

您是否尝试使用`shortestPath`或`allShortestPaths`查询？

```
 start a=node(1), b=node(2) match p=allShortestPaths(a-[:flys_to*..2]->b) return p;

+--------------------------------------------------------------------------------------------------------+
| p                                                                                                      |
+--------------------------------------------------------------------------------------------------------+
| [Node[1]{iata:"ABE"},:flys_to[224044] {},Node[546]{iata:"SFO"},:flys_to[24211] {},Node[2]{iata:"ABI"}] |
| [Node[1]{iata:"ABE"},:flys_to[224044] {},Node[546]{iata:"SFO"},:flys_to[24210] {},Node[2]{iata:"ABI"}] |
....
| [Node[1]{iata:"ABE"},:flys_to[66032] {},Node[146]{iata:"DFW"},:flys_to[1] {},Node[2]{iata:"ABI"}]      |
| [Node[1]{iata:"ABE"},:flys_to[66032] {},Node[146]{iata:"DFW"},:flys_to[0] {},Node[2]{iata:"ABI"}]      |
+--------------------------------------------------------------------------------------------------------+
28 rows
20 ms
 start a=node(1), b=node(2) match p=shortestPath(a-[:flys_to*..2]->b) return p;

+--------------------------------------------------------------------------------------------------------+
| p                                                                                                      |
+--------------------------------------------------------------------------------------------------------+
| [Node[1]{iata:"ABE"},:flys_to[224044] {},Node[546]{iata:"SFO"},:flys_to[24211] {},Node[2]{iata:"ABI"}] |
+--------------------------------------------------------------------------------------------------------+
1 row
1 ms 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T09:56:32.860

对我来说，这将返回 426 行：

```
start a=node(353), b=node(295)
match p=a-->b
return p; 
```

# java - Update() 方法不适用于 ORACLE 数据库

> ID：14330866
> 
> 赞同：1
> 
> 时间：2013-01-15T03:48:27.103
> 
> 标签：java, spring, sql-server-2008, oracle10g, jdbctemplate

我不知道为什么 update() 方法不适用于 ORACLE 数据库

> ```
> deleteQuery = "delete from USBRPF where upper(userid) = upper(?)" ;
> 
> String s= "ABC " ;
> getJdbcTemplate().update(deleteQuery, s.trim()); 
> ```

有一行 USERID 列具有数据“ABC”（“C”字符后有一些空格字符）

它似乎没有找到那一行。

但是，如果我将代码更改为下面，它可以工作

> ```
> deleteQuery = "delete from USBRPF where upper(userid) like upper(?)" ;
> String s= "ABC " ;
> getJdbcTemplate().update(deleteQuery, s.trim() +  "%"); 
> ```

或者

> ```
> deleteQuery = "delete from USBRPF where upper(trim(userid)) = upper(?)" ;
> String s= "ABC " ;
> getJdbcTemplate().update(deleteQuery, s.trim()); 
> ```

注意：所有都适用于 MSSQL 数据库，数据从 ORACLE 迁移。估计是数据库设置有问题。有人能弄清楚吗？谢谢

修改的：

栏目信息：

甲骨文

```
 BRANCH    CHAR(2 CHAR)          
  COMPANY   CHAR(1 CHAR)         
  DATIME    TIMESTAMP(6)          
  JOBNM CHAR(10 CHAR)          
  UNIQUE_NUMBER NUMBER(18,0)    
  USERID    CHAR(10 CHAR)         
  USRPRF    CHAR(10 CHAR) 
```

微软SQL

```
[UNIQUE_NUMBER] [bigint] IDENTITY(1,1) NOT NULL,    
[USERID] [nchar](10) NULL,  
[COMPANY] [nchar](1) NULL,  
[BRANCH] [nchar](2) NULL,   
[USRPRF] [nchar](10) NULL,  
[JOBNM] [nchar](10) NULL,   
[DATIME] [datetime2](6)> NULL, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T16:35:53.980

CHAR 是固定长度类型。因此，即使您的数据在数据库中看起来像“ABC”，它也会存储为“ABC”。CHAR 列将被[填充其大小的空格](http://psoug.org/definition/CHAR.htm)。

因此，在第一个示例中，您将“ABC”（存储在数据库中）与“ABC”（在 trim() 调用后从 Java 传递）进行比较。在您的第二个和第三个示例中，您正在解决这个问题。

我建议您使用 VARCHAR2，因为它更自然且更常用。如果不可能，您可以尝试将您从 Java 传递的值填充到 Oracle 中定义的 CHAR 大小。

# python - 我无法在我的 Eclipse pydev 中导入模拟

> ID：14330867
> 
> 赞同：1
> 
> 时间：2013-01-15T03:48:35.800
> 
> 标签：python, mocking, pydev

[我从http://pypi.python.org/pypi/mock](http://pypi.python.org/pypi/mock)下载了 mock1.0.1 。我安装了它'python setup.py install'好的。我在命令行中测试模拟运行良好。但是当我像这样在eclipse中使用它“from mock import Mock”时，它会报告错误“Unresolved import: Mock Unused import: Mock”

我换了低版本mock0.8.0都是一样的。

怎么了？

我的环境：win7
eclipse 3.7 ptthon 2.7.3 mock1.0.1

# javascript - Orderby 不能在 ng-repeat 上使用 dict 语法

> ID：14330878
> 
> 赞同：39
> 
> 时间：2013-01-15T03:50:18.547
> 
> 标签：javascript, angularjs, angularjs-orderby

我正在尝试将 ng-repeat 与字典样式语法一起使用，并将顺序应用于键值。

`(key, value) in something | orderBy:'key'`

看来 OrderBy 没有按预期工作

这里的例子 [http://jsfiddle.net/mhXuW/](http://jsfiddle.net/mhXuW/)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-15T05:10:08.280

orderBy 的参数必须与对象数组中的属性名称匹配。

您的数据需要看起来像这样：

```
$scope.list2 = [ { id:"2013-01-08T00:00:00", name:'Joe'},
                 { id:"2013-01-09T00:00:00", name:'Sue'}]; 
```

然后像这样的过滤器将起作用：

```
<div ng-repeat="item in list2 | orderBy:'id':true"> 
```

[小提琴](http://jsfiddle.net/mrajcok/8DWLB/)。

请注意， orderBy 适用于整个数组（`something`在上面的示例代码中），它返回一个排序数组。`key`orderBy 对and一无所知`value`。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-15T04:51:03.950

这没有实施。请看这里：

[https://github.com/angular/angular.js/issues/1286](https://github.com/angular/angular.js/issues/1286)

编辑（2013 年 8 月 27 日）：这个问题现在似乎已经解决了。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-07-11T01:30:25.433

我创建了一个自定义过滤器以使选择列表成为可能：

```
.filter('toDictionaryArray', function () {
    return function (obj) {
        if (!(obj instanceof Object)) return obj;

        var arr = [];
        for (var key in obj) {
            arr.push({ key: key, value: obj[key] });
        }
        return arr;
    }
}) 
```

选择列表 ng-options 的内容如下：

```
<select ng-options="kv.key as kv.value for kv in p.options | toDictionaryArray | orderBy:'value'"></select> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-07-14T15:51:28.513

[正如 akonsu 所说，这里](https://github.com/angular/angular.js/issues/1286)已经请求了该功能。但是，我仍然无法让它与最新的 (1.3.0) 测试版一起使用。

评论中有一个[很好的解决方法](https://github.com/angular/angular.js/issues/1286#issuecomment-14303275)（请注意，这需要[下划线](https://github.com/jashkenas/underscore)，并且您必须在上面的示例中用 'value.$key' 替换对 'key' 的引用）：

> [添加过滤器]：
> 
> ```
> app.filter('toArray', function() { return function(obj) {
>     if (!(obj instanceof Object)) return obj;
>     return _.map(obj, function(val, key) {
>         return Object.defineProperty(val, '$key', {__proto__: null, value: key});
>     });
> }}); 
> ```
> 
> 示例标记：
> 
> ```
> <div ng-repeat="val in object | toArray | orderBy:'priority' | filter:fieldSearch">
>   {{val.$key}} : {{val}} 
> </div> 
> ```
> 
> 潜在的缺点：
> 
> *   Object.defineProperty 在 IE8 中不会像这样工作（如果您不介意使 $key 可枚举，那么这是一个简单的更改）。
> *   如果您的属性值不是对象，那么您不能设置 $key 属性，这将失败。
> *   它没有直接集成到 orderBy 或 ngRepeat 中，因此语法不同。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-08-19T18:57:58.873

这是一个很好的解决方法（[angular-toArrayFilter](https://github.com/petebacondarwin/angular-toArrayFilter)）：

```
.filter('toArray', function () {
  return function (obj, addKey) {
    if ( addKey === false ) {
      return Object.keys(obj).map(function(key) {
        return obj[key];
      });
    } else {
      return Object.keys(obj).map(function (key) {
        if(typeof obj[key] == 'object') return Object.defineProperty(obj[key], '$key', {     enumerable: false, value: key});
      });
    }
  };
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-05T00:32:35.603

而不是使用仅支持数组而不支持对象的 orderby 过滤器。您可以像这样编写自己的过滤器，我从 Justin Klemm [http://justinklemm.com/angularjs-filter-ordering-objects-ngrepeat/](http://justinklemm.com/angularjs-filter-ordering-objects-ngrepeat/)获取代码，并添加了对指定多个排序字段的支持。下面的过滤器示例是基于值中的属性进行过滤，但您也可以轻松地将其更改为基于键进行过滤。

```
app.filter('orderObjectBy', function()
{
    return function(items, fields, reverse)
    {
        var filtered = [];
        angular.forEach(items, function(item)
        {
            filtered.push(item);
        });

        filtered.sort(function (a, b)
        {
            var result = 0;

            for (var i = 0; i < fields.length; ++i)
            {
                if (a[fields[i]] > b[fields[i]])
                {
                    result = 1;
                    break;
                }
                else if (a[fields[i]] < b[fields[i]])
                {
                    result = -1;
                    break;
                }
            }

            return result;
        });

        if (reverse)
        {
            filtered.reverse();
        }

        return filtered;
    };
}); 
```

然后在您的 html5 网页中使用它，其中统计数据是带有键值对的地图/字典。

```
<div class="row" ng-repeat="stat in statistics | orderObjectBy: 'NumTimesPartnered', 'NumTimesOpponent']:true">
    <div class="col col-33">{{stat.Name}}</div>
    <div class="col"><center>{{stat.NumTimesPartnered}}</center></div>
    <div class="col"><center>{{stat.NumTimesOpponent}}</center></div>
</div> 
```

# applescript - 在 Cocoa 中激活另一个应用程序的最佳方法是什么？

> ID：14330879
> 
> 赞同：0
> 
> 时间：2013-01-15T03:50:19.820
> 
> 标签：applescript, switch-statement, nsapplication

我有一个在另一个应用程序中生成键命令的应用程序。我以前在 Applescript 工作室做，但我用 Obj-C 重写了。现在我不知道如何让另一个在前台处于活动状态，这样我就可以开始生成键盘命令了。

目前我正在运行一个 Applescript 调用：

```
key = [[NSAppleScript alloc] initWithSource:@"tell application \"Pro Tools\" to activate"];
[key executeAndReturnError:nil] ; 
```

Protools 的 PID 是 14925。我想我可以使用 NSApplications，但我认为这不是正确的选择。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T13:43:39.843

尝试这个...

```
[[NSRunningApplication runningApplicationWithProcessIdentifier:PID] activateWithOptions:NSApplicationActivateIgnoringOtherApps]; 
```

# joomla - jdatabase没有出现在文章中的数字

> ID：14330886
> 
> 赞同：0
> 
> 时间：2013-01-15T03:50:45.603
> 
> 标签：joomla

我正在测试通过 Sorcerer 在 Joomla 3.0.2 中的一篇文章中输出查询。

当我输出存储查询的数组时，只出现没有数字的值。

例如，说我在一个名为“goofy”的表中有 2 行，就像这样

*   标识，描述
*   1、测试
*   2、测试2

然后我的代码看起来像这样

```
$query = "SELECT * FROM goofy";

$db->setQuery($query);

$results = $db->loadAssocList();

print_r($results); 
```

我在文章中得到的输出是这样的；

数组 ( [0] => 数组 ( [id] => [description] => test ) [1] => 数组 ( [id] => [description] => test2 ) )

任何想法为什么数字不会输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T05:30:51.273

您没有正确指定表名。使用数据库查询时，您必须在表名上添加前缀。您还需要使用调用数据库`$db = JFactory::getDBO();`

所以你的查询应该是这样的：

```
$db = JFactory::getDBO();
$query = "SELECT * FROM #__goofy";   
$db->setQuery($query);    
$results = $db->loadAssocList();   
print_r($results); 
```

如果您的数据库表与 Joomla 无关，那么您不需要使用`#__`前缀。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T22:47:41.740

```
$db = JFactory::getDBO();
$query = $db->getQuery(true);
$query->select('*');
$query->from('goofy');  
$db->setQuery($query);    
$results = $db->loadAssocList();   
print_r($results); 
```

# php - 使用 php header 功能播放 mp3 正在阻塞页面

> ID：14330896
> 
> 赞同：2
> 
> 时间：2013-01-15T03:52:16.423
> 
> 标签：php, header, block, webpage

我的测试服务器是 apache 2 来工作 php 编码。我想创建一个 mp3 服务器。

一切正常，但是今天我尝试通过获取 mp3 信息、更改它、删除等来构建一个管理页面。页面中有一个播放按钮用于选定的 mp3，当单击播放按钮时，文件加载带有标题选项并播放,

示例代码在这里：

```
session control &
$filename = '/home/bla..bla/mp3/'. $_GET['v'] . '.mp3';
if(file_exists($filename)) {
    header('Content-Type: audio/mpeg');
    header('Content-length: '.filesize($filename));
    header('X-Pad: avoid browser bug');
    header('Cache-Control: no-cache');
    readfile($filename);
}else{
    exit();
} 
```

一切看起来都很好，但是当我单击另一个按钮时（例如，使用 ajax 代码再次搜索 mp3 或在同一页面中使用 javascript 获取值）什么也没有发生。

页面正在等待加载 mp3 文件。看起来像阻止请求。当 mp3 加载 %60 或 %70 时，查询即将到来。

如果我找不到解决方案，我将成为杀手 :)

ps：我的系统建立`apache2, PHP5 , MySQL,`在管理页面中使用音频标签，但与`jplayer`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T04:37:47.867

很可能您遇到了*会话锁定*。当请求您所在的页面时`session_start()`，会打开并锁定会话文件以防止并发访问出现问题。该文件保持锁定状态，直到当前脚本完成。当文件被锁定时，其他进程无法访问它，并会等到它被解锁。

在您执行任何长时间运行的任务（例如流式传输 MP3 文件）之前，请使用[`session_write_close`](http://php.net/session_write_close).

更好的是，让 Web 服务器处理流文件的普通任务，不要让 PHP 进程忙于处理它。尝试[mod_xsendfile](https://tn123.org/mod_xsendfile/)。

# image - 为 Grails 中的每个控制器和 gsp 动态显示整个网络应用程序的配置文件图片

> ID：14330902
> 
> 赞同：0
> 
> 时间：2013-01-15T03:53:20.107
> 
> 标签：image, grails, spring-security, photo, profile

我正在使用它在系统的每个页面上显示个人资料图片，但仅适用于少数页面。

```
<g:if test="${userAccount?.photo != null  && !(userAccount?.photo.empty)}" >
      <g:link controller="userAccount" action="myInfo" id="${userAccount.id}">
        <img id="profile_photo" src="${createLink(controller:'image', action:'profilePhoto', id:userAccount.photo, params:[maxWidth:190.0,maxHeight:190.0])}" alt="${userAccount.photo}" title="${userAccount.displayName()}" />
      </g:link>
    </g:if>
    <g:else>
      <g:link controller="userAccount" action="myInfo" id="${userAccount.id}">
        <img id="profile_photo" src="${resource(dir:'images', file:'no_image_blue.gif')}" alt="No Image" width="200" height="200"/>
      </g:link>  
    </g:else> 
```

我也在`Spring security plugin`为这个项目使用 2 种布局。任何人都可以在这里帮助我使图像显示在整个系统上。

**

> 我只需要知道如何将用户照片变量存储到会话中，以便我可以在应用程序的任何位置访问它。

**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T05:11:33.930

将此代码放入两个布局视图中，例如，`layout/main.gsp`和`layout/custom.gsp`，并在每个 gsp 视图中声明使用它，如

```
<meta name="layout" content="main"> 
```

或者

```
<meta name="layout" content="custom"> 
```

要访问照片等用户信息，请利用 spring security 的`<sec:loggedInUserInfo>`标签：

```
<g:set var="photo"  value="${sec.loggedInUserInfo([field:'photo'])}"/>
<g:set var="userId"  value="${sec.loggedInUserInfo([field:'id'])}"/>

<g:if test="${photo != null  && !(photo.empty)}" >
    <g:link controller="userAccount" action="myInfo" id="${userId}">
        <img id="profile_photo" src="${createLink(controller:'image', action:'profilePhoto', id:photo, params:[maxWidth:190.0,maxHeight:190.0])}" alt="${photo}" />
    </g:link>
</g:if>
<g:else>
    <g:link controller="userAccount" action="myInfo" id="${id}">
        <img id="profile_photo" src="${resource(dir:'images', file:'no_image_blue.gif')}" alt="No Image" width="200" height="200"/>
    </g:link>  
</g:else> 
```

# java - Java：完全删除对象

> ID：14330908
> 
> 赞同：0
> 
> 时间：2013-01-15T03:53:53.630
> 
> 标签：java

我是Java新手，英语不够好，希望大家见谅。

问题 1：我有一个 ArrayList(J2SE) 或 Vector(J2ME)，我有一个类（例如：Bullet），当我开火时，我将该类的一个实例添加到列表中，在子弹击中目标后，我需要销毁它们并将它们从列表中删除。我想问：如何完全删除我需要删除的对象，我的意思是：释放该对象占用的所有内存（与 C++ 中的删除指针相同）。对于普通对象，我们可以使用“= null”，但是在这里，这个对象是在一个列表中，我们不能这样使用。我尝试使用 System.gc()，但这是个坏主意，与我不使用 gc() 相比，程序会变慢并且内存增加更多。如果我只使用 List.remove(bullet_index)，内存会增加一点，但不会减少。

问题2：有没有其他想法可以用“无限数量的子弹”和记忆安全的枪射击。

我做一个简单的2D射击游戏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T03:56:16.647

你根本做不到。[Java 在 JVM 上工作，它为通过垃圾收集器](http://en.wikipedia.org/wiki/Garbage_collection_%28computer_science%29)分配和释放内存提供了一个托管环境。

您可以通过释放未使用的对象来提示 JVM 清理内存，但这通常不是使用它的方式。只需`Bullet`从列表中删除该实例，如果没有其他对它的引用，那么最终它的内存将被释放。

如果您真的想节省内存，您应该考虑重用相同的实例，如果您计划在屏幕上最多同时显示精确数量的项目符号，则可以这样做，而不是从列表中删除过期的项目符号您可以将它们添加到另一个列表中，然后用于拾取新子弹（通过设置它们的属性）。通过这种方式，您可以避免超过某个阈值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T03:56:31.377

Java 是内存管理的，因此您无法可靠地释放内存。只要您有指向对象的指针，您就可以确定不会释放内存。将对象设置为 null 意味着没有任何东西指向它，但并不一定意味着它将在那时被垃圾收集。有关 Java 内存管理的深入解释，请查看[此](https://stackoverflow.com/questions/2070791/young-tenured-and-perm-generation)内容。

另外，避免使用向量——它们是同步的，通常不会在较新的代码中使用。

# css - 在 CSS 中缩放渐变背景

> ID：14330909
> 
> 赞同：2
> 
> 时间：2013-01-15T03:53:56.747
> 
> 标签：css, background, gradient

第一次问，请对我放轻松

我正在尝试为使用 JQuery Mobile 的 Web 应用程序制作背景渐变。一般来说，我对 CSS 和 UI 设计一无所知。

我希望渐变填充整个页面的空间。现在，它会填满原始窗口的大小，但向下滚动时会“切断”。

大多数建议都指向这一点：

```
html 
{
  height: 100%;
} 
```

...这对我不起作用。这是我所拥有的：

```
content: " ";
width: 100%;
height: 100%;
float: left;
position: relative;
z-index: -1;
top: 0;
left: 0;
background-repeat: no-repeat;
background-attachment: fixed;
background: -moz-linear-gradient(-45deg, rgba(0,0,0,1) 40%, rgba(0,0,0,0.5) 100%) fixed;
background: -webkit-gradient(linear, left top, right bottom, color-stop(0%,rgba(0,0,0,1)), color-stop(100%,rgba(0,0,0,0.5))) fixed;
background: -webkit-linear-gradient(-45deg, rgba(0,0,0,1) 40%,rgba(0,0,0,0.5) 100%)fixed;
 background: -o-linear-gradient(-45deg, rgba(0,0,0,1) 40%,rgba(0,0,0,0.5) 100%) fixed;     background: -ms-linear-gradient(-45deg, rgba(0,0,0,1) 40%,rgba(0,0,0,0.5) 100%) fixed;
 background: linear-gradient(135deg, rgba(0,0,0,1) 40%,rgba(0,0,0,0.5) 100%) fixed;
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#a6000000', endColorstr='#00000000',GradientType=1 ); /* IE6-9 fallback on horizontal gradient */ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T03:59:03.370

当您使用`height:100%;`. 因为这意味着填充 100% 的浏览器窗口，所以它不会填充其余部分，因为那将超过 100%。

试着稍微调整一下，然后这样写：

```
html 
{
  min-height: 100%;
} 
```

现在它可以填充超过 100%，所以它应该填充背景的其余部分。

# sql - 创建数据库以存储公司列表

> ID：14330917
> 
> 赞同：0
> 
> 时间：2013-01-15T03:55:53.260
> 
> 标签：sql, mysqli

因此，我正在考虑为我所居住的城镇创建一个非常小的应用程序，我希望让人们能够登录网站并创建一个商业列表，其中包含诸如（姓名、地址、电话、营业时间、形象标识）。

我在 sql 和创建数据库方面的知识有限，但能够阅读和时间。但是我想知道存储图像的最佳方法。

我打算只将图像上传到网络空间，然后将 URL 链接存储在数据库中……但不确定这是否是最佳选择？

所以我的问题首先是，这是最好的方法吗？其次我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T07:23:48.210

你已经做对了。

是的，去数据库中的普通表，包含所有必填字段。

插入另一个公司数据后，获取自动递增的 id，提取徽标的文件扩展名并将上传的文件移动到名为的文件中`"$id.$ext"`，一切就绪。

如何实现它 - 只需尝试一些在线手册。有很多关于数据库的工作，而处理文件最好从手册页[http://php.net/manual/en/features.file-upload.post-method.php学习](http://php.net/manual/en/features.file-upload.post-method.php)

# java - 活动目录（win server 2008） - 在 java 中创建用户设置“密码永不过期”和“InternetAccessEnabled”

> ID：14330922
> 
> 赞同：0
> 
> 时间：2013-01-15T03:56:30.463
> 
> 标签：java, active-directory

这是我的代码：

```
 public String addPerson(String userID, String surName, String givenName,String 
password,String email){
    //create user state
    String state = "0";
    String userName;
    String userPrincipalName;

    userName = String.format("%s%s", surName, givenName);
    userPrincipalName = String.format("%s@%s", userID, domainName);

    Attribute objectClass = new BasicAttribute("objectClass");
    objectClass.add("top");
    objectClass.add("person");
    objectClass.add("organizationalPerson");
    objectClass.add("user");

    Attributes attributes = new BasicAttributes();
    attributes.put(objectClass);
    attributes.put(new BasicAttribute("sn",surName));
    attributes.put(new BasicAttribute("cn",userID));
    attributes.put(new BasicAttribute("displayName",userName));
    attributes.put(new BasicAttribute("givenName",givenName));
    attributes.put(new BasicAttribute("mail",email));
    attributes.put(new BasicAttribute("description",userName));
    attributes.put(new BasicAttribute("userPassword",password));
    attributes.put(new BasicAttribute("userPrincipalName", userPrincipalName)); 
    attributes.put(new BasicAttribute("sAMAccountName", userID));
    attributes.put(new BasicAttribute("msRTCSIP-InternetAccessEnabled", true)); 
    attributes.put(new BasicAttribute("userAccountControl", 65536));

    try 
    {
        currentContextName = "CN=" + userID + "," + currentContextName;
        System.out.println("addPerson-currentContextName:" + currentContextName);
        currentCtx = ctx.createSubcontext(currentContextName, attributes);
    } 
    catch (NamingException e)
    {
        state = "-1"; 
        e.printStackTrace();
    }       

    return state;
} 
```

属性“ `msRTCSIP-InternetAccessEnabled`”和“ `userAccountControl`”不起作用，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T04:51:28.270

对于“userAccountControl”，此属性包含标志，如[Microsoft 文章](http://support.microsoft.com/kb/305144/en-us)中所述，您需要将其与其他标志结合使用（例如：NORMAL_ACCOUNT）

"msRTCSIP-InternetAccessEnabled" 来自 Live Communications Server 2005 或更高版本，您安装了这个产品吗？看看你的架构。

# android - 保留部分在生成时被删除

> ID：14330924
> 
> 赞同：2
> 
> 时间：2013-01-15T03:56:31.633
> 
> 标签：android, orm, greendao

我正在使用 GreenDAO v1.2.0 为 Android 应用程序生成实体类。

我已经在我的模式上设置了 enableKeepSectionsByDefault()，并且在我生成的类中得到了这些注释行：

```
// KEEP METHODS - put your custom methods here
// KEEP METHODS END 
```

我在注释之间放了一些自定义方法，但是每次重新生成时都会删除自定义方法。

我还需要做些什么才能使其正常工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-17T18:46:07.587

greenDAO 中有一个解析错误，会导致您的部分或全部`KEEP METHODS`通过运行该`DaoGenerator.generateAll()`方法（即使已`schema.enableKeepSectionsByDefault()`启用）而被清除

错误是您的`Entity`类（您添加了自定义导入、字段或方法的类）需要在文件末尾有一个空行。

例如

```
...
    //KEEP_METHODS_END
}
... end of file 
```

将失败，而

```
...
    //KEEP_METHODS_END
}

... end of file 
```

将工作。讨厌的小虫子。在修复之前（如果有的话），请确保您的实体类末尾有一个空行。

希望这可以挽救我所经历的折磨。

确保生成的实体类的最后一行为空。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T09:52:37.700

您需要调用`schema.enableKeepSectionsByDefault();`.

# ios - Phonegap SMSComposer 混淆

> ID：14330925
> 
> 赞同：1
> 
> 时间：2013-01-15T03:56:32.147
> 
> 标签：ios, cordova

卡住了`SMSComposer`插件。我已按照所有步骤将密钥添加到插件列表并下载文件。这是来自 github 的最新版本，它让我感到困惑。我更了解旧的。如何指定`toRecipients`和`body`？

```
function SMSComposer()
{
    this.resultCallback = null;
}

SMSComposer.ComposeResultType =
{
Cancelled:0,
Sent:1,
Failed:2,
NotSent:3
}

SMSComposer.prototype.showSMSComposer = function(toRecipients, body)
{

    var args = {};

    if(toRecipients)
        args.toRecipients = toRecipients;

    if(body)
        args.body = body;

    Cordova.exec("SMSComposer.showSMSComposer",args);
}

SMSComposer.prototype.showSMSComposerWithCB = function(cbFunction,toRecipients,body)
{
    this.resultCallback = cbFunction;
    this.showSMSComposer.apply(this,[toRecipients,body]);
}

SMSComposer.prototype._didFinishWithResult = function(res)
{
    this.resultCallback(res);
}

Cordova.addConstructor(function() {

                       if(!window.plugins)  {
                       window.plugins = {};
                       }
                       window.plugins.smsComposer = new SMSComposer();
                       }); 
```

.

```
 <body>
        <div class="app">
            <h1>Apache Cordova</h1>
            <div id="deviceready" class="blink">
                <p class="event listening">Connecting to Device</p>
                <p class="event received">Device is Ready</p>
                </div <center><button onclick="cordova.exec(null,null, 'SMSComposer','showSMSComposer',[args])">Compose SMS</button></center>

                >
            </div>
            <script type="text/javascript" src="cordova-2.2.0.js"></script>
            <script type="text/javascript" src="js/index.js"></script> <script type="text/javascript" charset="utf-8" src="SMSComposer.js"></script>

            <script type="text/javascript">
                app.initialize();

                var args;

                // cordova.exec(null,null, 'SMSComposer','showSMSComposer',[args]);

                </script>

            </body>
</html> 
```

编辑：当我按下`button`. 控制台中没有错误消息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T05:18:10.993

试试这个： [https](https://github.com/wesson818/SMSPluginForCordova2.3.0) ://github.com/wesson818/SMSPluginForCordova2.3.0 您可以在 Android 原生消息应用程序中传递消息正文并选择收件人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T05:52:28.700

@ PA Hemingstam 如果您在 SMSComposer.js 文件中将“Cordova”替换为“cordova”，那么它将起作用。:)

# java - 将 java 日期转换为 Javascript 日期

> ID：14330927
> 
> 赞同：1
> 
> 时间：2013-01-15T03:56:37.513
> 
> 标签：java, javascript, json, date

我有一张地图。我正在将地图转换为 JSON 对象。我正在读取 JSON 对象并希望将其转换为 Javascript 日期。

我发送的 Date 对象在 js 中被读取为 2012-12-19T06:00:00.000+0000 我不明白这个字符串中的 T 是什么。任何人都可以对此有所了解

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T03:58:56.503

[根据ISO 8601](http://en.wikipedia.org/wiki/ISO_8601)规范，它是日期的字符串表示形式。这里`T`代表日期时间表示的时间部分的开始。

您可以使用`new Date('2012-12-19T06:00:00.000+0000')`.

您可以使用正则表达式仅获取日期部分。正则表达式`/\d{4}-\d{2}-\d{2}/.exec('2012-12-19T06:00:00.000+0000')[0]`只会给你日期部分。

参考 [ISO 8601](http://www.w3.org/TR/NOTE-datetime)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-15T04:00:27.897

“T”是日期的 ISO 8601 序列化的一部分，它是[JavaScript Date String Format](http://es5.github.com/#x15.9.1.15)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-10-19T11:06:40.643

在java中将日期格式化为以下简单的日期格式化程序

```
SimpleDateFormat formatter = new SimpleDateFormat("EE MMM d y H:m:s ZZZ");
String dateString = formatter.format(new Date()); 
```

在java脚本端使用

```
new Date(dateString) 
```

# javascript - 地理位置 getCurrentPosition 在回调函数中表现奇怪

> ID：14330928
> 
> 赞同：0
> 
> 时间：2013-01-15T03:56:49.333
> 
> 标签：javascript, jquery, html, geolocation

我有 2 个 js 文件，1 个是将位置数据存储在一个对象中，另一个是单击事件等的事件处理程序。

这有效：

```
var Geology = {
    coords: {},
    error: '',
    setPosition: function (position) {
        Geology.coords = position.coords;
        // DEBUG
        for (var prop in Geology.coords)
            console.log(prop + ': ' + Geology.coords[prop]);
    },
    setError: function (error) {
        Geology.error = error;
    }
};

if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(Geology.setPosition,Geology.setError,{timeout:10000});
} 
```

但我希望能够在必要时通过点击或计时器更新位置数据。每当我尝试这样做时，它都不会像最初那样将变量分配给 Geology。

像这样：

```
jQuery(document).ready(function($){
    $('.toggle').click(function(){
        //- get geo location if available
        if (typeof Geology === 'object') {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(Geology.setPosition,Geology.setError,{timeout:10000});
            }
        }
    });
}); 
```

我在控制台中没有收到错误，但它只是失败并且不运行回调。但是，它确实运行 getCurrentPosition 方法，因为我已经测试过它是否能够通过条件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T04:13:53.780

我认为您需要设置`maximum_age`参数，否则结果将被永久缓存：

```
navigator.geolocation.getCurrentPosition( 
      geo_success, 
      geo_error, 
      { maximumAge:60000 } // set to 1min (in ms)
); 
```

您还有两个其他参数：`enableHighAccuracy`和`timeout`

更多信息：[https ://developer.mozilla.org/en-US/docs/Using_geolocation](https://developer.mozilla.org/en-US/docs/Using_geolocation)

编辑：我刚发现这个，它可能与您的问题有关[navigator.geolocation.getCurrentPosition 有时有效，有时无效](https://stackoverflow.com/questions/3397585/navigator-geolocation-getcurrentposition-sometimes-works-sometimes-doesnt)

# java - 为什么这个 Java Swing 键绑定不起作用？

> ID：14330929
> 
> 赞同：2
> 
> 时间：2013-01-15T03:56:50.040
> 
> 标签：java, swing, key-bindings

我已经阅读了有关键绑定的 Java 教程以及该站点上的六篇带有示例的帖子。我一生都无法弄清楚为什么以下代码段没有按预期工作：

```
 String ctrlSave = "CTRL Save";
    myPanel.getInputMap().put(KeyStroke.getKeyStroke('s', InputEvent.CTRL_DOWN_MASK), ctrlSave);
    myPanel.getActionMap().put(ctrlSave, new AbstractAction() {
        @Override
        public void actionPerformed(ActionEvent e) {
            int returnVal = chooserFileSave.showSaveDialog(myPanel);
            if (returnVal == JFileChooser.APPROVE_OPTION) {
                fileSave = chooserFileSave.getSelectedFile();
                myPanel.getActiveRoute().saveToGPXFile(fileSave);
            }
        }
    }); 
```

如果我替换这个：

```
myPanel.getInputMap().put(KeyStroke.getKeyStroke('s', InputEvent.CTRL_DOWN_MASK), ctrlSave); 
```

有了这个：

```
myPanel.getInputMap().put(KeyStroke.getKeyStroke('s'), ctrlSave); 
```

然后它工作正常（当然，我必须按's'而不是我想要的“ctrl+s”）。

我确定我遗漏了一些明显的东西。它是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T04:07:20.617

您是否尝试使用：

```
KeyStroke.getKeyStroke(KeyEvent.VK_S, InputEvent.CTRL_MASK); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T04:12:38.420

您的键绑定设置为仅在选择组件时。您需要将输入映射更改为：

```
myPanel.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke('s', InputEvent.CTRL_DOWN_MASK), ctrlSave); 
```

# structuremap - 在哪里可以找到最新的 StructureMap 文档？

> ID：14330930
> 
> 赞同：7
> 
> 时间：2013-01-15T03:56:51.677
> 
> 标签：structuremap

[http://docs.structuremap.net/](http://docs.structuremap.net/)似乎有使用已弃用成员的非常古老的示例。有没有可以找到最新的 StructureMap doco 的地方？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-24T15:32:43.443

我似乎在 [http://structuremap.github.io/找到了 3.1 版的一些最新文档](http://structuremap.github.io/)

看起来大部分基本信息都在那里。其他一些页面似乎还没有充实。但它看起来仍然很有帮助。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-20T17:50:53.707

没有新的发展。NuGet 上的最新版本是 2.6.4。所以所有这些例子都是你现在能得到的最好的例子。

我们使用它已经有几年了，因为原理是一样的，它（作为一个概念）仍然是最新的......

# android - 在可缩放范围内制作 android 布局和嵌套布局

> ID：14330935
> 
> 赞同：10
> 
> 时间：2013-01-15T03:57:27.400
> 
> 标签：android

我一直在开发具有复杂布局的应用程序。我最近意识到我需要使部分或全部布局可缩放。

我的一个主要 xml 文件具有线性布局，其中嵌套了多个布局以正确定位视图。有没有一种简单的方法可以使这种线性布局和其中的所有内容都可以缩放？还是让整个布局文件可缩放更容易？我有哪些选择？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T08:06:29.490

首先使用该特定视图扩展该类

```
 public class MyImageView extends ImageView{ 
```

覆盖以下方法。

```
 @Override
 protected void onDraw(Canvas canvas) {
super.onDraw(canvas);
 canvas.save();

 canvas.scale(mScaleFactor, mScaleFactor, midPoint.x, midPoint.y);
 if(appInitialized) {

 hsSide.draw(canvas);
 scaleA.draw(canvas);
 scaleB.draw(canvas);

  }

 canvas.restore();

} 
```

创建一个手势检测器，它将检测缩放对象的大小，您可以限制以避免重叠。

```
 private class ScaleListener extends    ScaleGestureDetector.SimpleOnScaleGestureListener {

 @Override
 public boolean onScale(ScaleGestureDetector detector) {

  mScaleFactor *= detector.getScaleFactor();
  pivotX = detector.getFocusX();
   pivotY = detector.getFocusY();
     // Don't let the object get too small or too large.
   mScaleFactor = Math.max(0.8f, Math.min(mScaleFactor, 2.0f));

    invalidate();
   return true;
   }
 } 
```

最后初始化对象

```
 ScaleGestureDetector mScaleDetector;

   mScaleDetector = new ScaleGestureDetector(context, new ScaleListener()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T04:31:31.233

您可能会看一下静态转换。`ViewGroup`可以自定义任何或子类以将转换应用于其子视图。您可以通过调用启用此功能`setStaticTransformationsEnabled(true)`，然后在您的自定义中覆盖`getChildStaticTransformation()`回调（[文档链接](https://developer.android.com/reference/android/view/ViewGroup.html#getChildStaticTransformation%28android.view.View,%20android.view.animation.Transformation%29)）`ViewGroup`。您可以应用您喜欢的任何转换，包括创建缩放效果的比例。每当视图需要重绘或失效时，都会调用此回调。

此外，在将其与硬件加速一起使用时要小心。根据您需要更新转换的频率，您可能会发现硬件无法按预期重绘。如果是这样，您将需要为此视图层次结构启用软件层。

# matlab - 如何在 BOOTSTRAP 之后查看重新采样的数据

> ID：14330936
> 
> 赞同：1
> 
> 时间：2013-01-15T03:57:32.897
> 
> 标签：matlab, statistics, statistics-bootstrap

我试图在 Matlab 中使用“bootstrap”重新采样（替换）我的数据库，如下所示：

```
D = load('Data.txt');
lead = D(:,1);
depth = D(:,2);
X = D(:,3);
Y = D(:,4);

%Bootstraping to resample 100 times
[resampling100,bootsam] = bootstrp(100,'corr',lead,depth);

%plottig the bootstraping result as histogram
hist(resampling100,10);
... ... ...
... ... ... 
```

尽管上面编写的脚本是正确的，但我想知道如何查看/加载通过引导程序创建的重新采样的 100 个数据集？'bootsam(:)' 显示为引导样本选择的数据/值的索引，但不显示新的样本值！我从原始数据中创建假数据，我什至看不到幕后创建的内容，这不是很有趣吗？！？

我的第二个问题：是否可以在不使用任何函数的情况下完全重新采样整个矩阵（在本例中为 D）？但是，我知道如何使用“unidrnd”从矢量数据中创建随机值。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T05:36:31.383

问题 1 的答案是`bootsam`提供重采样数据的索引。具体来说， 的`nth`列提供重采样数据集`bootsam`的索引。`nth`在您的情况下，要获取`nth`您将使用的重采样数据集：

```
lead_resample_n = lead(bootsam(:, n));
depth_resample_n = depth(bootsam(:, n)); 
```

关于第二个问题，我猜你的意思是，你将如何获得一个重新采样的数据集，而不用担心将函数应用于重新采样的数据。就个人而言，我会使用`randi`，但在这种情况下，您是否使用`randi`或无关紧要`unidrnd`。下面的示例假设某些数据矩阵的 4 列`D`（如您的问题中所示）：

```
%# Build an example dataset
T = 10;
D = randn(T, 4);

%# Obtain a set of random indices, ie indices of draws with replacement
Ind = randi(T, T, 1);

%# Obtain the resampled data
DResampled = D(Ind, :); 
```

要创建多个重新采样的数据，您可以简单地循环创建随机索引。或者您可以通过创建一个随机索引矩阵并将其用于索引来一步完成`D`。通过仔细使用，`reshape`您`permute`可以将其转换为`T*4*M`数组，其中`m = 1, ..., M`沿第三维索引会产生`mth`重新采样的数据集。示例代码如下：

```
%# Build an example dataset
T = 10;
M = 3;
D = randn(T, 4);

%# Obtain a set of random indices, ie indices of draws with replacement
Ind = randi(T, T, M);

%# Obtain the resampled data
DResampled = permute(reshape(D(Ind, :)', 4, T, []), [2 1 3]); 
```

# python - PIL：验证后如何重新打开图像？

> ID：14330938
> 
> 赞同：1
> 
> 时间：2013-01-15T03:57:36.313
> 
> 标签：python, image, python-imaging-library

我需要打开一个图像，验证图像，然后重新打开它（请参阅下面 PIL 文档引用的最后一句话）

> im.verify()
> 
> 尝试确定文件是否损坏，而不实际解码图像数据。如果此方法发现任何问题，它会引发适当的异常。此方法仅适用于新打开的图像；如果图像已经加载，则结果未定义。另外，如果您在使用此方法后需要加载图像，则必须重新打开图像文件。

这就是我的代码中`picture`的内容，django InMemoryUploadedFile 对象在哪里：

```
img = Image.open(picture)
img.verify()
img = Image.open(picture) 
```

前两行工作正常，但第三行出现以下错误（我试图“重新打开”图像）：

`IOError: cannot identify image file`

正如文档建议的那样，重新打开图像文件的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T04:18:10.580

这和做没有什么不同

```
f = open('x.png')
Image.open(f)
Image.open(f) 
```

上面的代码不起作用，因为 PIL 在读取文件的前几个字节以（尝试）识别其格式时在文件中前进。`Image.open`如前所述，在这种情况下尝试使用第二个将失败，因为现在文件中的当前位置已超过其图像的标题。要确认这一点，您可以验证`f.tell()`返回的内容。要解决此问题，您必须`f.seek(0)`在两次调用之间返回文件的开头`Image.open`，或者关闭并重新打开文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T04:08:20.377

尝试`del img`在 the`verify`和 second之间做一个`open`。

# oracle - 使用 case 语句的 oracle 查询问题

> ID：14330941
> 
> 赞同：2
> 
> 时间：2013-01-15T03:57:52.577
> 
> 标签：oracle, case

我有一个物化视图表，其中包含有关员工及其对系统的访问的信息，该表有一个“有效日期”列和“有效日期”列。这个物化视图每晚更新一次。

我想在此表中添加一个额外的列“current_flag”，以显示当前员工是否具有“Y”或“N”的访问权限。我正在考虑使用类似以下的“案例”声明：-

```
CASE WHEN  to_date(c.effective_date) < to_date(sysdate) 
and to_date      (effective_date_to) > to_date(sysdate)
THEN  'Y'
   ELSE 'N'            
END) AS current_flag 
```

这是最好的方法吗？如果是，正确的语法是什么，因为我正在努力让它工作..

原始物化视图表如下...

```
CREATE MATERIALIZED VIEW TC.employee_access 

(
EMPL_ID,
EFFECTIVE_DATE,
EFFECTIVE_DATE_TO,
DEPARTMENT,
JOB_DESCRIPTION,
TIME_STAMP,
MODIFIED_BY
)
TABLESPACE TC_TC_DATA
PCTUSED    0
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
NOCACHE
LOGGING
NOCOMPRESS
NOPARALLEL
BUILD IMMEDIATE
REFRESH FORCE
START WITH TO_DATE('16-Jan-2013','dd-mon-yyyy')
NEXT TRUNC(SYSDATE+1)
WITH PRIMARY KEY
AS 

SELECT C.EMPL_ID AS Empl_Id,
       C.EFFECTIVE_DT AS Effective_Date,
       DECODE (n.effective_dt,
               c.effective_dt, TO_DATE ('01/01/2099', 'DD/MM/YYYY'),
               n.effective_dt - 1)
              AS Effective_Date_To,
       C.DFLT_UDT06_ID AS Department,     
       C.DFLT_UDT08_ID AS Job_Description,
       C.TIME_STAMP,
       C.MODIFIED_BY
  FROM empl_history_mv c, empl_history_mv n
 WHERE n.effective_dt =
          (SELECT NVL (MIN (effective_dt), c.effective_dt)
             FROM empl_history_mv
            WHERE empl_id = c.empl_id AND effective_dt > c.effective_dt)
       AND c.empl_id = n.empl_id; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T08:39:27.460

-statement`CASE`需要访问您的计算值`effective_date_to`。您可以使用一组额外的括号来执行此操作：

```
SELECT empl_id,
       effective_date,
       effective_date_to,
       CASE WHEN effective_date < SYSDATE AND SYSDATE < effective_date_to
            THEN 'Y' ELSE 'N' END current_flag
  FROM (
        SELECT c.empl_id
               c.effective_dt as effective_date,
          FROM ...
       ); 
```

或者您将逻辑展开到一个查询中：

```
SELECT c.empl_id, 
       c.effective_dt as effective_date,
       NVL2(n.effective_dt, n.effective_dt - 1, DATE'2099-01-01') AS effective_date_to,
       CASE WHEN c.effective_dt <= sysdate
             AND (sysdate < n.effective_dt OR n.effective_dt IS NULL) 
            THEN 'Y' ELSE 'N' END AS current_flag
  FROM empl_history_mv c
  LEFT JOIN empl_history_mv n 
    ON c.empl_id = n.empl_id
   AND c.effective_dt < n.effective_dt
   AND NOT EXISTS (
       SELECT * 
         FROM empl_history_mv t
        WHERE c.empl_id = t.empl_id
          AND c.effective_dt < t.effective_dt
          AND t.effective_dt < n.effective_dt
       ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T07:59:07.577

除了您拥有的额外括号之外，错误的`to_Date()`It 对我来说似乎是有效的。

即你试过这个？

```
CREATE MATERIALIZED VIEW TC.employee_access 
(
EMPL_ID,
EFFECTIVE_DATE,
EFFECTIVE_DATE_TO,
DEPARTMENT,
JOB_DESCRIPTION,
TIME_STAMP,
MODIFIED_BY,
current_flag
)
...
WITH PRIMARY KEY
AS 

SELECT C.EMPL_ID AS Empl_Id,
       C.EFFECTIVE_DT AS Effective_Date,
       DECODE (n.effective_dt,
               c.effective_dt, TO_DATE ('01/01/2099', 'DD/MM/YYYY'),
               n.effective_dt - 1)
              AS Effective_Date_To,
       C.DFLT_UDT06_ID AS Department,     
       C.DFLT_UDT08_ID AS Job_Description,
       C.TIME_STAMP,
       C.MODIFIED_BY,
       CASE WHEN c.effective_date < sysdate
                 and effective_date_to > sysdate
       THEN  'Y'
       ELSE 'N'            
       END as current_flag
  FROM empl_history_mv c, empl_history_mv n
 .... 
```

# python - 对用户帖子做出反应

> ID：14330942
> 
> 赞同：0
> 
> 时间：2013-01-15T03:57:53.513
> 
> 标签：python, flask, jinja2, flask-sqlalchemy

不管我在下面的具体问题是什么，什么是多次响应同一页面上的用户帖子的有效方法。这样在页面上的每个渐进式帖子上都可以捕获新请求并显示新信息？*如果我没有正确描述问题，请原谅我。*

我正在尝试构建一个对用户帖子做出反应的页面。但我遇到了一个：

> 错误的请求
> 
> 浏览器（或代理）发送了此服务器无法理解的请求。

我猜是因为在我目前的解决方案中：

```
@app.route('/survey', methods = ['GET', 'POST'])$                              
@contributer_permission.require(403)$  
def survey():
    organization_id = None
    survey_header_id = None
    survey_section_id = None

    organization_selected = None
    survey_header_selected = None
    survey_section_selected = None

    if request.method== 'POST':
        if not organization_id:
            organization_id = request.form['organization_id']
            organization_selected = Organization.query.get(organization_id)

        elif not survey_header_id:
            survey_header_id = request.form['survey_header_id']
            survey_header_selected = SurveyHeader.query.get(survey_header_id)
        elif not survey_section_id:
            pass
        else:
            pass

    return render_template('survey.html',
        organization_class = Organization,
        organization_selected = organization_selected,
        organization_id = organization_id,
        survey_header_id = survey_header_id,
        survey_header_selected = survey_header_selected,
        survey_section_id = survey_section_id,
        survey_section_selected = survey_section_selected) 
```

一旦我收到带有survey_header_id 的帖子。它重新循环并

```
organization_id becomes none 
```

这是随附的 html/json

```
{% extends "base.html" %}
{% block content %}
    <div class ="entries"> <!-- should be a DIV in your style! -->
    <form action="{{url_for('survey') }}" method="post" class="add-entry"/>
            <dl>
            {% if not organization_id %}
                {% for organization in organization_class.query.all() %}
                    <dt><input type="radio", name="organization_id",
                    value="{{ organization.id }}"/>{{ organization.name }}</dt>
                {% endfor %}
                <dt><input type ="submit", name="submit_organization"/>
            {% elif not survey_header_id %}
                <h1>{{ organization_selected.name }}</h1>
                {% for survey_header in organization_selected.survey_headers.all() %}
                    <dt><input type="radio", name="survey_header_id"
                    value="{{ survey_header.id }}"/>{{ survey_header.name }}
                {% endfor %}
                <dt><input type ="submit", name="submit_survey_header"/>
            {% elif not survey_section_id %}
                <p>hi</p>
            {% else %}
            {% endif %}
            <dl>
    </form>
    </div>
{% endblock %} 
```

我应该做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T22:00:23.787

`Bad Request`通常是访问不存在的参数的结果，例如`request.form['organization_id']`当表单中没有具有该名称的元素时。

您的调查路线将始终尝试`organization_id`从表单中检索，因为您将其设置为`None`，并且在测试之前没有任何更改。在第二个 Post 中，您的模板根本没有创建`organization_id`元素，因为该值是从前一个 Post 传递的，因此当您`survey()`仍然尝试检索它时会看到错误。

您需要某种方法将您提交的值从一个步骤传递到下一步。例如，您可以将它们写入表单中的隐藏或禁用字段，这样您就可以在每次发布后抓取它们并将它们发送回模板，或者将您的状态存储在其他位置，例如`session`.

# logging - 使用 Nlog 进行“垂直”日志记录

> ID：14330952
> 
> 赞同：2
> 
> 时间：2013-01-15T03:59:04.077
> 
> 标签：logging, nlog

我们目前使用 NLog 作为我们的日志框架，它运行良好。我们想要添加的一项功能是能够在运行时强制记录单个对象，因此我们可以进行如下调用。

```
_logger.Trace(IForceLog obj, string msg) 
```

接口在哪里：

```
public interface IForceLog
{
   bool ForceLog { get; }
} 
```

如果日志记录级别为跟踪`||`obj.ForceLog，这将记录。这些调用大部分来自对象内部，但有些调用来自处理它的其他调用。

这个想法是我们有许多相同类型的对象，有时我们希望只查看一个对象的详细日志记录，并密切关注其行为而不会阻塞日志文件。

有没有标准的方法来处理这种事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:29:35.413

我不知道这是否有资格作为答案，但是您是否考虑过一种方法，每个对象都记录一个唯一的 id？这样，您可以使用 NLog 的过滤功能来限制日志记录的数量。这里有一个老例子：http: [//nlog-forum.1685105.n2.nabble.com/Config-examples-with-filters-td1685363.html](http://nlog-forum.1685105.n2.nabble.com/Config-examples-with-filters-td1685363.html)

**从 NLog 论坛开始复制：**

为了完整起见（如果链接变坏），这里是内联示例：

```
<?xml version="1.0" ?> 
<nlog>
    <targets>
        <target name="console" type="Console" layout="${logger} ${message}" />
    </targets>
    <rules>
        <logger name="*" minlevel="Debug" writeTo="console">
            <filters>
                <whenContains layout="${message}" substring="zzz" action="Ignore" />
            </filters>
        </logger>
    </rules>
</nlog> 
```

此示例代码：

```
using NLog; 
using NLog.Targets; 
using NLog.Targets.Wrappers; 

class Example 
{ 
    static void Main(string[] args) 
    { 
        Logger logger = LogManager.GetLogger("Example"); 
        logger.Debug("log message"); 
        logger.Debug("log zzz message"); 
    } 
} 
```

仅生成“示例日志消息”（第二条日志消息被

或者，您可以使用称为条件的新功能（在最新快照中提供），它允许您使用简单的符号编写过滤器：

```
<filters>
    <when condition="contains(message,'zzz') 
              or level >= LogLevel.Warn 
              or level == LogLevel.Trace" action="Ingore" /> 
</filters> 
```

**END 从 NLog 论坛复制**

这并不能直接回答您的问题（我认为这是执行某些日志记录语句，而不管配置的日志级别和使用的日志记录方法（信息、调试等）如何）。我怀疑很难覆盖/解决 NLog 内置的日志级别启用。

如果 NLog 的过滤确实给了您想要的结果，那么记录到数据库怎么样？您可以记录所有内容，使用唯一 ID 标记某些对象的记录语句。然后，您可以使用数据库的过滤/分组/排序功能仅查看某些对象的日志记录语句。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-20T23:58:22.407

可以使用 [EventContext-Layout-Renderer](https://github.com/nlog/NLog/wiki/EventContext-Layout-Renderer)  

```
LogEventInfo theEvent = new LogEventInfo(LogLevel.Debug, "", obj.ToString());

IForceLog supportsIForceLog = obj as IForceLog;
If (supportsIForceLog!=null)
{
    theEvent.Properties["ForceLog"] = supportsIForceLog.ForceLog;
}

log.Log(theEvent); 
```

并在您的 NLog.config 文件中使用 ${event-context:item="ForceLog"} 在 filter/when 条件下，如[wagooghe](https://stackoverflow.com/users/125439/wageoghe) [answer中所建议的那样](https://stackoverflow.com/a/14405298/52277)

# matlab - Mablab/Octave - 使用 cellfun 将一个矩阵与另一个矩阵索引

> ID：14330957
> 
> 赞同：3
> 
> 时间：2013-01-15T03:59:55.677
> 
> 标签：matlab, indexing, cell, octave, matrix-indexing

我有一个包含随机数矩阵的单元格，比如说`a = {[300*20],....,[300*20]};`。我有另一个相同格式的单元格，称为它`b`，其中包含`nan`术语在 中位置的逻辑`a`。

我想用来`cellfun`循环遍历单元格，基本上让`nan`术语等于`0`ie `a(b)=0`。

谢谢，j

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T04:30:02.797

您可以定义一个将任何 NaN 替换为零的函数。

```
function a = nan2zero(a)
  a(isnan(a)) = 0; 
```

然后您可以使用`cellfun`将此函数应用于您的单元格数组。

```
a0 = cellfun(@nan2zero, a, 'UniformOutput', 0) 
```

这样，您甚至不需要任何矩阵`b`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T05:06:09.377

首先，您可能应该给@s.bandara打勾，因为这是第一个正确答案并且它使用`cellfun`（如您要求的那样）。不要给这个答案。这个答案的目的是提供一些额外的分析。

我想我会研究解决这个问题的一些可能方法的效率。

第一种方法是@s.bandara 提倡的方法。

第二种方法类似于@s.bandara 提倡的方法，但它使用`b`转换`nan`为`0`，而不是使用`isnan`. 从理论上讲，这种方法可能更快，因为`b`函数内部没有分配任何内容，因此应该“按引用”处理。

第三种方法使用循环来绕过 using `cellfun`，因为[cellfun 通常比显式循环慢](https://stackoverflow.com/questions/12522888/arrayfun-can-be-significantly-slower-than-an-explicit-loop-in-matlab-why)

快速速度测试的结果是：

```
Elapsed time is 3.882972 seconds. %# First approach (a, isnan, and cellfun, eg @s.bandara)
Elapsed time is 3.391190 seconds. %# Second approach (a, b, and cellfun)
Elapsed time is 3.041992 seconds. %# Third approach (loop-based solution) 
```

换句话说，通过传入`b`而不是使用`isnan`. 通过使用循环而不是`cellfun`. 但我不会因此而失眠。请记住，任何模拟的结果都特定于指定的输入。

请注意，这些结果在多次运行中是一致的，我使用`tic`并`toc`执行此操作，尽管每种方法都有许多循环。如果我想真正彻底，我应该使用`timeit`FEX。如果有人感兴趣，这三种方法的代码如下：

```
%# Build some example matrices
T = 1000; N = 100; Q = 50; M = 100;
a = cell(1, Q); b = cell(1, Q);
for q = 1:Q
    a{q} = randn(T, N);
    b{q} = logical(randi(2, T, N) - 1);
    a{q}(b{q}) = nan;
end

%# Solution using a, isnan, and cellfun (@s.bandara solution)
tic
for m = 1:M
    Soln2 = cellfun(@f1, a, 'UniformOutput', 0);
end
toc

%# Solution using a, b, and cellfun
tic
for m = 1:M
    Soln1 = cellfun(@f2, a, b, 'UniformOutput', 0);
end
toc

%# Solution using a loop to avoid cellfun
tic
for m = 1:M
    Soln3 = cell(1, Q);
    for q = 1:Q
        Soln3{q} = a{q};
        Soln3{q}(b{q}) = 0;
    end
end
toc

%# Solution proposed by @EitanT
[K, N] = size(a{1});
tic
for m = 1:M
    a0 = [a{:}];       %// Concatenate matrices along the 2nd dimension
    a0(isnan(a0)) = 0; %// Replace NaNs with zeroes    
    Soln4 = mat2cell(a0, K, N * ones(size(a)));
end
toc 
```

在哪里：

```
function x1 = f1(x1)
x1(isnan(x1)) = 0; 
```

和：

```
function x1 = f2(x1, x2)
x1(x2) = 0; 
```

**更新：** @EitanT 提出了第四种方法。这种方法将矩阵元胞数组连接成一个大矩阵，对大矩阵执行运算，然后可选择将其转换回元胞数组。我已将此过程的代码添加到上面的测试例程中。对于我的测试代码中指定的输入，即`T = 1000`、`N = 100`、`Q = 50`和`M = 100`，定时运行如下：

```
Elapsed time is 3.916690 seconds. %# @s.bandara
Elapsed time is 3.362319 seconds. %# a, b, and cellfun
Elapsed time is 2.906029 seconds. %# loop-based solution
Elapsed time is 4.986837 seconds. %# @EitanT 
```

我对此感到有些惊讶，因为我认为@EitanT 的方法会产生最好的结果。在纸面上，这似乎非常明智。请注意，我们当然可以乱用输入参数来找到有利于不同解决方案的特定设置。例如，如果矩阵很小，但它们的数量很大，那么 @EitanT 的方法效果很好，例如`T = 10`, `N = 5`, `Q = 500`, 并`M = 100`产生：

```
Elapsed time is 0.362377 seconds. %# @s.bandara
Elapsed time is 0.299595 seconds. %# a, b, and cellfun
Elapsed time is 0.352112 seconds. %# loop-based solution
Elapsed time is 0.030150 seconds. %# @EitanT 
```

这里@EitanT 的方法占主导地位。

对于 OP 指出的问题规模，我发现基于循环的解决方案通常具有最佳性能。然而，对于一些`Q`，例如`Q = 5`，@EitanT 的解决方案设法领先。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T08:41:47.960

唔。

鉴于元胞数组内容的性质，可能存在*更快*的解决方案：您可以将元胞数据转换为单个矩阵并使用向量索引`NaN`一次替换其中的所有值，而无需`cellfun`or 循环：

```
a0 = [a{:}];       %// Concatenate matrices along the 2nd dimension
a0(isnan(a0)) = 0; %// Replace NaNs with zeroes 
```

如果要将其转换回元胞数组，那很好：

```
[M, N] = size(a{1});
mat2cell(a0, M, N * ones(size(a))) 
```

PS
如果可能，使用 3-D 矩阵而不是元胞数组。在 MATLAB 中，向量化操作通常要快得多。

# sql-server - 配置 sql server 作业代理

> ID：14330959
> 
> 赞同：0
> 
> 时间：2013-01-15T04:00:08.463
> 
> 标签：sql-server, sql-server-2008, jobs

我正在尝试使用以下脚本配置 SQL Server 作业代理：

```
USE [msdb]
GO
CREATE USER [mydbuser] FOR LOGIN [mydbuser]
GO
EXEC sp_addrolemember N'db_datareader', N'mydbuser'
GO
EXEC sp_addrolemember N'SQLAgentOperatorRole', N'mydbuser'
GO
EXEC sp_addrolemember N'SQLAgentReaderRole', N'mydbuser'
GO
EXEC sp_addrolemember N'SQLAgentUserRole', N'mydbuser'
go
sp_configure 'show advanced options',1
go
reconfigure with override
go
      sp_configure 'xp_cmdshell',1
go
reconfigure with override
go
sp_configure 'show advanced options',0
go
reconfigure with override

use master
go
GRANT EXECUTE on xp_cmdshell to db_job
go

use master
go
EXEC sp_xp_cmdshell_proxy_account 'mydomain\db_job', 'password-1'
go

CREATE CREDENTIAL [Job3] WITH IDENTITY = N'mydomain\mydomainuser', SECRET =               N'mydomain\mydomainuser'
GO

USE [msdb]
GO
EXEC msdb.dbo.sp_add_proxy @proxy_name=N'LW_JobRunner',@credential_name=N'Job', 
@enabled=1
GO
EXEC msdb.dbo.sp_grant_proxy_to_subsystem @proxy_name=N'LW_JobRunner', @subsystem_id=3
GO
EXEC msdb.dbo.sp_grant_login_to_proxy @proxy_name=N'LW_JobRunner',         @login_name=N'mydbuser'
GO

/* Setting up job Category */

DECLARE @ReturnCode INT
SELECT @ReturnCode = 0

EXEC @ReturnCode = msdb.dbo.sp_add_category @class=N'JOB', @type=N'LOCAL',             @name=N'MyJob'
go

USE MASTER
GO

EXEC master.dbo.xp_sqlagent_proxy_account N'SET',
     N'DEV',            -- agent_domain_name
     N'Administrator',  -- agent_username
     N'password'        -- agent_password 
```

但是执行的最后一步`sp xp_sqlagent_proxy_account`，说

> 找不到存储过程 xp_sqlagent_proxy_account。

我确定我正在使用凭据在`master`数据库上执行它......`sa`

因此，在添加工作时，我会收到这样的错误

> 在 sys.servers 中找不到服务器“myIpAddress”。验证是否指定了正确的服务器名称。如有必要，执行存储过程 sp_addlinkedserver 将服务器添加到 sys.servers

如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T04:19:33.373

当非系统管理员用户尝试执行 xp_cmdshell 时，通常会发生此错误。但是，您声明您确定您正在使用 sa 凭据在主数据库中执行。

你可能想尝试运行这个：

```
-- Enable non-system administrators to run the job and to execute xp_cmdshell.
EXECUTE msdb..sp_set_sqlagent_properties @sysadmin_only = 0
GO 
```

这将允许非 sa 用户访问 xp_cmdshell。如果它然后工作，那将意味着运行脚本的用户帐户是非 sa 帐户。

希望这可以帮助。

拉吉

# node.js - 在 Cygwin 中设置带空格的路径

> ID：14330962
> 
> 赞同：0
> 
> 时间：2013-01-15T04:00:18.147
> 
> 标签：node.js, cygwin, whitespace

我设置了 2 个环境变量来测试哪个对我有用，如下所示

.bash_profile

```
NODE_BIN1="/cygdrive/c/Program Files/nodejs"
NODE_BIN2=/cygdrive/c/Program\ Files/nodejs
export NODE_BIN1 NODE_BIN2 
```

然后在 Cygwin 终端中测试它们

```
$ cd $NODE_BIN1
kevin@kevin-HP /cygdrive/c/Program  (wrong!)

$ cd $NODE_BIN2
kevin@kevin-HP /cygdrive/c/Program  (wrong!)

$ cd C:/Program Files/nodejs
kevin@kevin-HP /cygdrive/c/Program  (wrong!)

$ cd "C:/Program Files/nodejs"
kevin@kevin-HP /cygdrive/c/Program Files/nodejs 
```

最后一个结果是我想要的，但实际上它是与 $NODE_BIN1 相同的字符串。

有什么办法解决这个问题吗？非常感谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T04:07:21.083

尝试使用cygpath？

```
export NODE_BIN1=`cygpath -w -s "/cygdrive/c/Program Files/nodejs"` 
```

这也提供了相同的输出

```
export NODE_BIN1=`cygpath -d "/cygdrive/c/Program Files/nodejs"` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T04:12:16.147

两种方法都将正确设置环境变量。您遇到的问题是当您尝试使用它时；默认情况下，bash 会在空格上拆分变量，并且您最终会`cd`使用两个参数进行调用：`/cygdrive/c/Program`和`Files/nodejs`.

解决方案当然是切换到 zsh。;)

好吧好吧。如果您的意图是能够轻松切换到此目录，请考虑编写别名。

```
alias cdnode='cd "/cygdrive/c/Program\ Files/nodejs"' 
```

如果您只想为了节点的利益而设置它，请不要担心；你已经可以走了。您可以绝对确定使用它`echo`。

```
$ echo "[$NODE_BIN1]"
[/cygdrive/c/Program\ Files/nodejs] 
```

# google-analytics - 谷歌分析自定义变量，键显示正确，值不正确

> ID：14330964
> 
> 赞同：0
> 
> 时间：2013-01-15T04:00:28.587
> 
> 标签：google-analytics

在 Web 服务上实现了一个过滤器，以对 GA 进行 gif 调用以跟踪方法调用。

在初始测试期间，我设置了一个包含帐户信息的自定义变量。但由于某种原因，几周后，该变量不再正确地进入标准报告。

测试 gif 网址：

```
http://www.google-analytics.com/__utm.gif?utmwv=4.4sj
&utmn=230567348
&utmhn=localhost
&utmr=-
&utmp=http%3A%2F%2Flocalhost%2Fv2svrmng%2FServiceManagerV2
&utmac=UA-12345678-9
&utmcc=__utma%3D999.999.999.999.999.1%3B
&utmvid=0x6ffa39da7d6bd0c7
&utmip=127.0.0.0
&utme=8(Account)9(testaccount-99999)11(2) 
```

帐户键似乎被正确读取，但`testaccount-99999`值显示为`(A`

这里是否发生了某种奇怪的截断？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T18:02:10.173

gif 请求不是受支持或记录在案的 API。您只能将它与提供的 javascript 库或与 Google Analytics 通信的其他 google 库一起使用。

好消息是，Universal Analytics 是对 Google Analytics（目前处于公共测试版）的新更新，它有一个文档化的协议，可以使用您想要的服务器端代码将数据发送到 GA。

在此处阅读有关它以及如何进入 Beta 的更多信息：

[https://developers.google.com/analytics/devguides/collection/protocol/v1/](https://developers.google.com/analytics/devguides/collection/protocol/v1/)

# postgresql - PL/Java - 用户函数执行错误

> ID：14330965
> 
> 赞同：1
> 
> 时间：2013-01-15T04:00:30.250
> 
> 标签：postgresql, pljava

我在 Ubuntu 上安装了 pl/java：

```
sudo apt-get install postgresql-9.1-pljava-gcj 
```

但是遇到了一个问题，我认为这是 jar 和 pl/java 之间的 gcj/jdk 1.7 不兼容。这些是在[http://www.javacodegeeks.com/2012/10/introduction-to-postgresql-pljava.html](http://www.javacodegeeks.com/2012/10/introduction-to-postgresql-pljava.html)的指导下使用的步骤：

```
select sqlj.install_jar('file:///home/me/temp/testJar.jar', 'sandbox', true);

select sqlj.set_classpath('public', 'sandbox');

CREATE FUNCTION public.hello(varchar) RETURNS varchar
AS 'sandbox.PLJava.hello'
LANGUAGE java; 
```

我们很高兴直到执行：

```
SELECT hello('world'); 
```

这会产生此错误：

错误：java.lang.ClassFormatError：sandbox.PLJava（无法识别的类文件版本） SQL 状态：XX000

jar 是使用标准 eclipse/export to jar (jdk 1.7.0) 制作的。

以前有人走过这条路吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T02:29:35.807

正如您所说，此问题是由您通过 pl/java 运行的 JVM 与您的 java 代码之间的不兼容引起的。因此，如果您从 repos 运行所有内容并且您可以跟进您的发行版或从源代码编译，这就是一个打包问题。

如果您可以从源代码编译，那可能是目前最好的选择。

# php - 使用函数从 select 语句将结果显示到另一个 php 页面

> ID：14330968
> 
> 赞同：-1
> 
> 时间：2013-01-15T04:00:42.273
> 
> 标签：php

我很难解决这个问题：需要帮助请..

这是我的原始代码：

* * *

**函数.php**

```
public function getTestScriptSummary($projectID){

    $sql = "SELECT * FROM tbl_test_script_header WHERE fld_projectID='$projectID'";
    $query = $this->DBH->prepare($sql);
    $query->execute();

    while($row = $query->fetch(PDO::FETCH_ASSOC)){
        $testResults .= "
            <tr>
                <td style=\"padding:3px;\">".$row['fld_dateEnded']."</td>
                <td style=\"padding:3px;\">".$row['fld_testerName']."</td>
                <td style=\"padding:3px;\">".$row['fld_scriptID']."</td>
                <td style=\"padding:3px;\">".$row['fld_testPhase']."</td>
                <td style=\"padding:3px;\">".$row['fld_status']."</td>
            </tr>"; 
    }
    return $testResults;
} 
```

**视图.php**

```
 echo $User->getTestScriptSummary($_POST['projectName']); 
```

* * *

使用此代码，我得到了正确的答案。但我不想在我的函数中显示表格（我的意思是 testResults 中的值）。相反，我希望它显示在 view.php 中。我将如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T04:03:44.923

尝试这个。这会将结果组合到单个数组中。

```
$testResults =array();
while($row = $query->fetch(PDO::FETCH_ASSOC)){
    $testResults[] = $row;
}
return $testResults; 
```

# java - 将文本文件中的段落匹配到 html 文件，忽略 html 标签

> ID：14330970
> 
> 赞同：-4
> 
> 时间：2013-01-15T04:00:54.147
> 
> 标签：java, regex

我需要一个正则表达式来匹配文本文件和 html 文件。

```
"<b>Dog</b> and Cat" 
```

这将等于

```
"Dog and Cat" 
```

我正在使用 Java。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T05:00:24.710

以下是您需要的代码段。

```
String text, html;
BufferedReader br;
int i;int tags=0;

br=new BufferedReader(new InputStreamReader(System.in));
System.out.println("Enter HTML code");//If you want to read ferom file, replace the code
html=br.readLine();
for(i=0;i<html.length();i++){
if(html.charAt(i)=='<'){tags++;continue;}
if(html.charAt(i)=='>'){tags--;continue;}
if(tags==0)text=text+html.charAt(i);
} 
```

# php - 获取上传文件的内容而不存储它

> ID：14330973
> 
> 赞同：2
> 
> 时间：2013-01-15T04:01:14.187
> 
> 标签：php, upload

假设用户在我的网站上使用 PHP 上传了一个文本文件。我只想获取这个文本文件的内容，然后处理它们，而不必在磁盘上的任何位置存储文件/执行 move_uploded_file() ，所以当我完成时我不必处理删除它它等等

有没有办法使用 tmp_name 或任何其他信息来获取文件的内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T05:29:49.100

您可以使用 $_FILES 超级全局数组检索与上传文件相关的信息。

$_FILES['input-field-name']['tmp_name'] 将上传文件的临时副本的名称存储在服务器上

因此，您可以使用 file_get_contents() 函数通过传递 $_FILES['input-field-name']['tmp_name'] 的值作为参数来检索上传文件的内容。

脚本执行终止后，临时副本将被删除。

请参考下面提到的示例代码片段。

```
<?php if($_SERVER['REQUEST_METHOD']=='POST')
      {
         if(isset($_FILES['input-field-name']))
         {

         $file_content=file_get_contents($_FILES['input-field-name']['tmp_name']);
         }
      }
  ?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T04:29:07.410

在这种情况下：

`file_get_contents()`可能就足够`tmp_name`了。`$_POST['filename']['tmp_name']`

假设您的文件的输入名称属性的值为“文件名”。

# plugins - safari中的NPAPI插件不能调用js函数？

> ID：14330974
> 
> 赞同：0
> 
> 时间：2013-01-15T04:01:21.463
> 
> 标签：plugins, safari, npapi

all.我想调用一个 js 函数来在我的插件中显示一些东西。这是我的代码

```
NPObject* npwindow = NULL; 
NPError ret = browser->getvalue(mInstanceForJS, NPNVWindowNPObject, &npwindow); 
if (ret != NPERR_NO_ERROR) 
    return ; 
// Get window object. 
NPVariant windowVar; 
NPIdentifier winID = browser->getstringidentifier("window"); 
bool bRet = browser->getproperty(mInstanceForJS, npwindow, winID, &windowVar); 
if (!bRet) 
{ 
    browser->releaseobject(npwindow); 
    return ; 
}
NPObject* window = NPVARIANT_TO_OBJECT(windowVar);
NPVariant voidResponse;

NPVariant elementId;
STRINGZ_TO_NPVARIANT([info UTF8String], elementId);
NPVariant args[] = {elementId};

NPIdentifier funcID= browser->getstringidentifier([funName UTF8String]);
bRet = browser->invoke(mInstanceForJS, window, funcID, args, 1, &voidResponse);
browser->releasevariantvalue(&windowVar); 
```

调用时 **bRet = browser->invoke(mInstanceForJS, window, funcID, args, 1, &voidResponse);** ,Safari 无法响应。是否有任何错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T04:47:07.390

npwindow 已经是窗口对象；您正在有效地查询“window.window”。当然，我不知道为什么这不起作用，但这似乎有点奇怪。

这就是问题#1。

问题 #2 是您使用 STRINGZ_TO_NPVARIANT 来存储 UTF8String 的结果。STRINGZ_TO_NPVARIANT 不会复制内存，因此如果函数想要挂在该字符串上，您可能会遇到麻烦，因为当您的自动释放池循环时，该函数返回的字符串将被释放。当然，这也可能是内存泄漏。无论哪种方式，将字符串传递给浏览器的正确方法是使用 NPN_MemAlloc 为其分配内存，然后将字符串复制进去。然后将该指针传递给浏览器。有关详细信息，请参阅[http://npapi.com/memory](http://npapi.com/memory)。

问题 #3 是您没有告诉我们何时运行此代码；您很可能在插件或页面生命周期中过早地运行此代码，因此它可能无法正常工作。

然后还有一个问题：“Safari 无法响应”是什么意思？忘记语法错误，我不确定你的意思。会挂吗？bRet 是假的吗？您的计算机是否突然被冰封住，从而停止了所有处理？如果以上没有帮助，请回答这些问题，我会再试一次。

# asp.net-mvc - 为什么 System.Web.Services.Protocols.LogicalMethodInfo 不能在 Azure 缓存中序列化？

> ID：14330976
> 
> 赞同：2
> 
> 时间：2013-01-15T04:01:35.013
> 
> 标签：asp.net-mvc, web-services, caching, serialization, azure

当我使用 azure 缓存但不使用 HttpRuntime.Cache 时出现错误：

无法序列化类型“ **System.Web.Services.Protocols.LogicalMethodInfo ”。**考虑使用 DataContractAttribute 属性对其进行标记，并使用 DataMemberAttribute 属性标记您想要序列化的所有成员。如果该类型是一个集合，请考虑使用 CollectionDataContractAttribute 对其进行标记。有关其他支持的类型，请参阅 Microsoft .NET Framework 文档。

搜索后我注意到这篇文章说**“HttpRuntime.Cache 根本不序列化数据”** ASP.net HttpRuntime.Cache 示例代码
[使用的默认序列化是什么：](https://stackoverflow.com/questions/2162943/what-is-the-default-serialization-used-by-the-asp-net-httpruntime-cache)

```
protected void Page_Load(object sender, EventArgs e)
{
List<myclass> items = new List<myclass>();
MyClass item1 = new MyClass() { ID = 1 };
items.Add(item1);

HttpRuntime.Cache.Insert("test1", items); //working

DataCache cache = new DataCache("default"); 
cache.CreateRegion("reg");

cache.Put("test2", items, "reg");//error
}

}

public class MyClass
{
public MyClass()
{

Type myType = typeof(MyService);
MethodInfo myMethodInfo = myType.GetMethod("Add");
_log = new **LogicalMethodInfo**(myMethodInfo);
}
public int ID { get; set; }
public **LogicalMethodInfo** _log;
}

public class MyService
{
public int Add(int xValue, int yValue)
{
return (xValue + yValue);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:32:53.030

您收到该错误是因为`System.Web.Services.Protocols.LogicalMethodInfo`不可序列化。为了添加到 Azure 缓存中，对象必须被序列化并通过网络发送到缓存服务器。显然，不可序列化的对象无法做到这一点。`HttpRuntime.Cache`是内存中的数据存储。因为它在内存中，所以不需要序列化对象，因此不关心缓存的对象是否可序列化。

# php - 写入文件后页面刷新内容不正确

> ID：14330977
> 
> 赞同：0
> 
> 时间：2013-01-15T04:01:49.017
> 
> 标签：php, page-refresh, writetofile

我有一个 PHP 页面，它从服务器读取文本文件并根据该文件的内容在页面上加载一些内容。然后，当用户单击提交按钮时，内容被重写到文本文件并重新加载页面。

但是，现在，根据我刚刚选择的内容，加载到页面的内容不正确。但是，如果我按 F5 并重新加载页面，那么页面会加载所有正确的内容，正如我所期望的那样。这就像页面必须第二次刷新，因为第一次只是重写文本文件。

无论如何要纠正这个问题，以便页面内容根据用户选择的内容正确加载，然后重写到文本文件中？

我正在使用以下内容编写文件，位于我的 php 代码的最底部：

```
echo "<form action='' method='post' enctype='multipart/form-data' name='saveChoices' id='saveChoices'>";
$userChoiceListWritable = fopen($userChoicesFile, 'w') or die("Couldn't open user's choice list file for writing.");

if (array_key_exists('save', $_POST)) 
{
    if(!empty($_POST['choiceCheckGroup'])) 
    {
        foreach($_POST['choiceCheckGroup'] as $check)
        {
            fwrite($userChoiceListWritable , $check."\n");
        }
    }
    fclose($userChoiceListWritable);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T04:32:49.840

您应该在文件内容输出之前写入文件，而不是之后。将您的文件编写代码放在脚本的顶部，因为它都在一个文件中。

# grails - Bootstrap.groovy 中的自定义 JSON 不返回域的此类属性错误

> ID：14330978
> 
> 赞同：0
> 
> 时间：2013-01-15T04:02:13.723
> 
> 标签：grails

我正在按照此[链接](http://manbuildswebsite.com/2010/02/15/rendering-json-in-grails-part-3-customise-your-json-with-object-marshallers/)上的说明进行操作，该说明建议我更新我的引导 groovy 类。

```
// Bootstrap.groovy
import grails.converters.JSON

class BootStrap {

    def init = { servletContext ->
        JSON.registerObjectMarshaller(UserMapping) {
            def rA = [:]
            ra['userId'] = it.id
        }
    }
    def destroy = {
    }
} 
```

但它返回错误：

```
ERROR context.GrailsContextLoader  - Error initializing the application: No such property: UserMapping for class: BootStrap
Message: No such property: UserMapping for class: BootStrap 
```

我的域类看起来像：

```
# UserMapping.groovy
package engagementlevels

class UserMapping {

    String username
    String email
    Date insertTime
    String type
    String flags

    static belongsTo = [groupMapping: GroupMapping]

    static mapping = {
        // Custom Mappings here
    }

    static hibernateFilters = {
        // Filters here
    }

    transient beforeInsert = {
        throw new RuntimeException('create not allowed')
    }
    transient beforeUpdate = {
        throw new RuntimeException('update not allowed')
    }
    transient beforeDelete = {
        throw new RuntimeException('delete not allowed')
    } 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T04:09:08.377

它在“engagementlevels”包中，但 BootStrap.groovy 在默认包中。为类添加导入：

```
import grails.converters.JSON
import engagementlevels.UserMapping

class BootStrap {

   def init = { servletContext ->
       JSON.registerObjectMarshaller(UserMapping) {
          def rA = [userId: it.id]
       }
   }
} 
```

# android - 如何在我自己的应用程序中使用 zxing core.jar

> ID：14330980
> 
> 赞同：0
> 
> 时间：2013-01-15T04:02:23.177
> 
> 标签：android, barcode, zxing

我正在开发一个应用程序，我需要存储产品的条形码，所以我需要阅读它们。我一直在阅读其他关于在无需安装 BarcodeScanner 的情况下应该如何读取条形码的帖子。我看到了帖子：

“完整的源代码可从 ZXing 项目获得。您想从 core/ 构建 core.jar 并将其放在您的 Android lib/ 文件夹中以在您的应用程序中包含核心解码器。您不想包含 javase。您可以查看 android/ 中的代码，因为它是 Barcode Scanner 的源代码，但作为作者，我们建议您不要只是复制和粘贴它。”

但是，我从 Android 开始，不知道该怎么做。有人可以更具体一点我是怎么做到的吗？

对不起，如果这是一个愚蠢的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-02-17T21:16:32.127

1.  [从https://repo1.maven.org/maven2/com/google/zxing/core/](https://repo1.maven.org/maven2/com/google/zxing/core/)获取最新的 core-xxxjar
2.  在 Android Studio 中切换到项目文件夹视图并将 .jar 复制到您的`app/libs`文件夹中[![切换到项目视图](../Images/ceea78cc93f42b60d1b96854bc51a068.png)](https://i.stack.imgur.com/gxTRi.png)
3.  右键单击 .jar 并选择“添加为库...”[![添加为库...](../Images/729d390e72463fd55bcc5bfde4d1b357.png)](https://i.stack.imgur.com/GqCd7.png)

这将自动将依赖项添加到您的`build.gradle`，因此您可以开始使用该库，例如生成和显示条形码，就像本例中一样简单：

```
 import com.google.zxing.BarcodeFormat;
    import com.google.zxing.WriterException;
    import com.google.zxing.common.BitMatrix;
    import com.google.zxing.qrcode.QRCodeWriter;
    ...
    ImageView qrImg = (ImageView)findViewById(R.id.qrImageView);

    int width = 512;
    int height = 512;
    QRCodeWriter writer = new QRCodeWriter();
    try {
        BitMatrix bitMatrix = writer.encode("Hello World", BarcodeFormat.QR_CODE,width,height);
        Bitmap bmp = Bitmap.createBitmap(width,height, Bitmap.Config.RGB_565);
        for (int x = 0; x < width; x++) {
            for (int y = 0; y < height; y++) {
                // Copy pixel-by-pixel
                bmp.setPixel(x, y, bitMatrix.get(x, y) ? Color.BLACK : Color.WHITE);
            }
        }
        qrImg.setImageBitmap(bmp);
    } catch (WriterException e) {
        // Handle exception
    } 
```

# ios - 令人困惑的 MKMapView 问题 - 需要在 locationManager 响应中有 addAnnotations

> ID：14330981
> 
> 赞同：0
> 
> 时间：2013-01-15T04:02:32.367
> 
> 标签：ios, objective-c, mkmapview

这可能看起来令人困惑，并询问是否有更多信息 - 我想我在这里没有得到任何东西。

我有一个应用程序，它有一个 MKMapView，它位于一个名为 VenueViewController 的 VC 中。尽管它实现了 CLLocationManagerDelegate，但在这个 VC 中，我们没有更新地图视图以响应用户的位置。

在第二个 VC 中，我扩展了 VenueViewController，我们通过调用 [super viewDidLoad] 创建了 MKMapView；应该在超类中添加注释，我们使用 locationManager 来显示用户的当前位置。非常令人困惑的部分是我们放置在超类中的 MKAnnotations 不会出现在这个类中。我必须添加

```
[self.mapView addAnnotations:self.venues]; 
```

在 locationManager 函数中。我不明白为什么这些注释不会被添加到父类中，它在iteslf 使用时可以正常工作。为什么父类中添加的这些注释没有显示出来？

提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T23:55:03.277

因为父类没有mapView。

# c# - 循环变量上的闭包的正确语义是什么？

> ID：14330982
> 
> 赞同：1
> 
> 时间：2013-01-15T04:02:47.647
> 
> 标签：c#, javascript, lua, closures, lambda-calculus

考虑以下 lua 代码：

```
f = {}

for i = 1, 10 do
    f[i] = function()
        print(i .. " ")
    end
end

for k = 1, 10 do
    f[k]()
end 
```

这将打印从 1 到 10 的数字。在这种情况下，`i`对外部循环的每次迭代的值都是封闭的。这就是我一直以来对闭包的理解，我很高兴......

...直到我将一些 lua 代码移植到 c# 中，我尝试做同样的事情：

```
var f = new Action[10];

for (int i = 0; i < 10; i++)
{
    f[i] = (new Action(delegate()
    {
        Console.Write(i + " ");
    }));
}
for (int k = 0; k < 10; k++)
{
    f[k]();
} 
```

现在我将数字 10 打印了 10 次（让我们忘记 lua 数组是基于 1 的）。实际上，在这种情况下，闭包对变量起作用，而不是对它的值起作用，这很有意义，因为我只是在第一个循环结束后才调用函数。

JavaScript 似乎具有相同的语义（关闭变量）：

```
var f = []

for (var i = 0; i < 10; i++)
{
    f[i] = function()
    {
        document.write(i + ' ');
    };
}

for (var k = 0; k < 10; k++)
{
    f[k]();
} 
```

实际上，这两种行为都很有意义，但当然是不相容的。

如果有“正确”的方法来做到这一点，那么 lua 或 c# 和 JavaScript 都是错误的（我还没有尝试过其他语言）。所以我的问题是：“在循环中关闭变量的“正确”语义是什么？

编辑：我不是在问如何“解决”这个问题。我知道我可以在循环中添加一个局部变量并关闭该变量以获得 c#/JavaScript 中的 lua 行为。我想知道关闭循环变量的理论上正确含义是什么，以及哪些语言以每种方式实现关闭的简短列表的奖励积分。

编辑：改写我的问题：“在 lambda 演算中关闭循环变量的行为是什么？”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T04:14:36.910

Lua 手册准确地解释了为什么这样做。它用 while 循环来描述索引 for 循环，如下所示：

```
 for v = e1, e2, e3 do block end

--Is equivalent to:

 do
   local var, limit, step = tonumber(e1), tonumber(e2), tonumber(e3)
   if not (var and limit and step) then error() end
   while (step > 0 and var <= limit) or (step <= 0 and var >= limit) do
     local v = var
     block
     var = var + step
   end
 end 
```

注意循环变量`v`是如何在循环范围内*声明*`while`的。这样做是为了准确地允许您正在做的事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T04:09:53.113

没有“正确”的方法。有不同的方法。在 C# 中，您可以通过将变量设置为循环范围来修复它：

```
for (int i = 0; i < 10; i++)
{
    int j = i;

    f[i] = (new Action(delegate()
    {
        Console.Write(j + " ");
    }));
} 
```

在 JavaScript 中，您可以通过创建和调用匿名函数来添加范围：

```
for (var i = 0; i < 10; i++) {
    (function(i) {
        f[i] = function() {
            document.write(i + ' ');
        };
    })(i);
} 
```

C# 中的迭代变量没有循环范围。JavaScript 没有块作用域，只有函数作用域。他们只是不同的语言，他们做的事情不同。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T16:57:09.600

> “在 lambda 演算中关闭循环变量的行为是什么？”

lambda 演算中没有循环变量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T18:08:06.633

关闭循环变量就像关闭任何其他变量。问题在于特定于语言的循环结构以及它们是否转换为将循环变量置于循环内部或外部的代码。

例如，如果您`while`在 C#、Lua 或 JavaScript 中使用循环，则所有三种语言的结果都是相同的 (10)。同样适用`for(;;)`于 JavaScript 或 C# 中的循环（在 Lua 中不可用）。

但是，如果您`for (i in x)`在 JavaScript 中使用循环，您会发现每个闭包都会获得`i`(output: `0 1 2 3 ...`) 的新副本。在Lua`for i=x,y`和`foreach`C# 中也是如此。同样，这与这些语言如何构建这些循环以及它们如何将循环变量的值暴露给循环体有关，*而不是*闭包语义上的差异。

实际上，在 C# 的情况下`foreach`，此行为[从 4.5](https://stackoverflow.com/questions/8898925/is-there-a-reason-for-cs-reuse-of-the-variable-in-a-foreach/12249317#12249317)[*更改*](https://stackoverflow.com/questions/8898925/is-there-a-reason-for-cs-reuse-of-the-variable-in-a-foreach/12249317#12249317)为 5 。这个构造：

```
 foreach (var x in l) { <loop body> } 
```

用于翻译成（伪代码）：

```
 E e = l.GetEnumerator()
 V v
 while (e.MoveNext()) {
      v = e.Current
      <loop body>
 } 
```

在 C# 5 中，这已更改为：

```
 E e = l.GetEnumerator()
 while (e.MoveNext()) {
      V v = e.Current
      <loop body>
 } 
```

这是一个突破性的变化，这样做是为了在关闭循环变量时更好地满足程序员的期望。闭包语义没有改变；循环变量的位置确实。

# embedded - ARM Cortex M3 (SAM3N4X) 的简单任务调度程序

> ID：14330988
> 
> 赞同：0
> 
> 时间：2013-01-15T04:03:13.750
> 
> 标签：embedded, arm, rtos

在过去的两天里，我一直在为上述 ARM Cortex M3 寻找一个简单的调度程序，虽然我找到了一些 RTOS 解决方案，但我没有找到一个独立的任务调度程序。

我不需要任何太花哨的东西，因为我的应用程序不一定需要一个，但它有助于将来证明产品（不要抨击这最后一句话，我很清楚它的问题）。

编辑：

正如@Clifford 所建议的那样，我不太清楚我所说的简单是什么意思。我会说它的代码很少，并且不会消耗太多 SRAM。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T10:20:19.723

最简单的 RTOS 内核包括一个调度程序和许多任务同步和 IPC 机制。由于这些通常作为库提供，因此如果您只使用此类库的调度程序组件，则不会将任何其他内容链接到您的代码。此外，稍后添加同步、计时器和 IPC 的选项将更真正地“面向未来”应用程序，或者至少是其架构。

不清楚您所说的“简单调度程序”是什么意思，但大多数 RTOS 调度程序支持相同优先级的任务的循环调度（uC/OS-II 是一个明显的例外）；如果您将所有任务都设置为相同的优先级，那么它不会比这更简单。

另请注意，[ARM CMSIS](http://www.arm.com/products/processors/cortex-m/cortex-microcontroller-software-interface-standard.php)包含一个非常低级的 RTOS API，旨在作为更高级别操作系统的基础，但它提供了为您的精确需求创建内核所需的所有构建块，包括线程控制（即调度）。

如果您真的想完全避免使用 RTOS，那么状态机架构（例如[Quantum Leaps 的 QP 框架](http://www.state-machine.com/qp/index.php)所支持的架构）是一种替代方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T16:19:22.983

在流行的 RTOS 中，ChibiOS/RT 声称非常小并且它是“静态的”（您必须将它使用的所有数据分配为普通变量，它不会调用 malloc() 或类似的东西）。乍一看，它可能看起来“很大”，因为它包含 HAL，但您也可以删除它 (;

# ios - ASIFormDataRequest + WCF 无法获取 responseData

> ID：14330990
> 
> 赞同：0
> 
> 时间：2013-01-15T04:03:25.003
> 
> 标签：ios, wcf, http, asihttprequest

我的代码如下：

```
-(void)testRMIS{
    NSString *loginString=@"http://192.168.1.109/Enjoy.ServicePortal/ServicePortal.svc/testOnly";
    NSURL *postUrl = [[NSURL alloc] initWithString:loginString];
    ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:postUrl];
    [request setResponseEncoding:NSUTF8StringEncoding];
    [request addRequestHeader:@"Content-Type" value:@"application/json"];
    [request setUsername:@"Login"];
    [request setRequestMethod:@"POST"];
    [request setDelegate:self];
    [request startAsynchronous];
    [postUrl release];
} 
```

在 wcf 代码中设置断点时，我无法捕捉到它。

但是在 Objc 代码中，我得到了这一行：

```
- (void)requestFinished:(ASIHTTPRequest *)request 
```

但是`responseData`is `"Error request"`，这意味着 HTTP 400。

欢迎任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T04:07:12.333

尝试使用浏览`http://192.168.1.109/Enjoy.ServicePortal/ServicePortal.svc`器窗口浏览。这实际上可能会给你答案。

# php - 如何使用循环将 MySQL 日期类型与 PHP 日期类型连接起来

> ID：14330996
> 
> 赞同：0
> 
> 时间：2013-01-15T04:04:52.600
> 
> 标签：php, mysql, database, relational-database

我正在尝试使用 PHP 和 mySQL 制作“历史上的这一天”类型的页面。在 mySQL 数据库中，每个条目都有以下列：id、日期、主题、事件。日期列使用 mySQL 日期类型，即 YYYY-MM-DD。我正在尝试使用 PHP 中的 date 函数来调用具有相同日期的相应 mySQL 条目，但我不知道如何连接它们。

第一部分成功返回数据库中的所有内容。

```
<?php

$config ['db'] = array (
'host'      =>  'localhost',
'username'  =>  'root',
'password'  =>  'root',
'dbname'    =>  'party'
);

$db = new PDO('mysql:host=' . $config['db']['host'] . ';dbname=' . $config['db']['dbname'] , $config['db']['username'] , $config['db']['password']);

$query = $db->query("SELECT `events`.`date`, `topic`, `event` FROM `events`");

$rows = $query->fetchAll(PDO::FETCH_ASSOC);

echo '<pre>', print_r($rows, true), '</pre>'; 
```

但是，我不想显示所有内容，只是包含与当前日期相同的月份和日期的行。我将如何正确循环并仅显示单行？这是我结束的地方。

```
//current day and month
$current_date = date("m d");

//select from database of events where matching month and day     
$statement = $db->prepare("SELECT * FROM `events` WHERE `date` = :md ");

$statement->execute(array(':md' => $current_date));

//echo out events that happened throughout history
echo "On ", date('F jS'), ", the following events took place:";

while($rows = $statement->fetch()){

    echo $rows['topic'];
    echo $rows['event'];
} 
```

它打印出来的唯一内容是“在*当前日期*，发生了以下事件：”此外，虽然这不是最重要的，但我当前的日期将在未来的某一天打印出来。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T04:31:56.220

我更喜欢使用 mysql 函数来提取月份、日期等。

**询问：**

```
 SELECT * FROM events WHERE EXTRACT(MONTH FROM date) = MONTH(NOW())
 AND EXTRACT(DAY FROM date) = DAY(NOW()) 
```

尝试检查 mysql 时区设置和 php 时区设置，以找出提前一小时的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T04:43:15.050

如果我理解正确，您需要选择在同一天和同一月但在不同年份发生的所有事件。如果是这样，您的选择语句应如下所示

```
SELECT * 
FROM events 
WHERE MONTH(events.date) = 2 AND DAY(events.date) = 2 
```

这将选择 2 月 2 日发生的所有事件

现在，如果您只需要获取当天和月份发生的事件，那么您根本不需要传递任何参数，并且可以通过这种方式完全在 SQL 中完成：

```
SELECT * 
FROM events 
WHERE MONTH(events.date) = MONTH(CURRENT_DATE) AND 
    DAY(events.date) = DAY(CURRENT_DATE) 
```

# iphone - 使 Rails 应用程序与 iPhone 一起工作

> ID：14330999
> 
> 赞同：0
> 
> 时间：2013-01-15T04:05:03.450
> 
> 标签：iphone, ruby-on-rails

在工作中，我们有一个不是为支持智能手机而构建的 Web 应用程序。现在，我们需要提供一些可以从智能手机访问的简单功能。我的问题是：是否可以检测智能手机的用户代理并为该代理提供不同的模板文件和/或布局？

我们没有时间/人力来编写 iPhone 应用程序，但如果我能在几个晚上使网络版本与 iPhone 分辨率兼容，我就可以做到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T04:24:13.340

我认为以下内容会对您有所帮助

[1) 使您的布局与twitter bootstrap](http://twitter.github.com/bootstrap/)之类的移动设备兼容，以下是[rails 的 gem](https://github.com/seyhunak/twitter-bootstrap-rails)

2）检测请求代理并相应地服务器页面，[railscasts](http://railscasts.com/episodes/199-mobile-devices)

3）这是一个可以帮助你的宝石（[mobile_fu](https://github.com/brendanlim/mobile-fu)），但看起来有点过时了

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T04:06:53.000

您只需要特定于 iPhone 的 CSS 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T04:09:02.860

有我使用和喜欢的 mobvious：

[https://github.com/jistr/mobvious](https://github.com/jistr/mobvious)

然后，当您想要覆盖另一个时，您可以将设备类型特定的布局放在它们自己的子目录下，例如 views/mobile/users/index.html.erb

但是快速的谷歌搜索会显示许多其他选项，例如：

[http://detectmobilebrowsers.com/](http://detectmobilebrowsers.com/)