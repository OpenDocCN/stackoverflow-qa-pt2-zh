# StackOverflow 问答 15806000-15806999

# iphone - 此类与键视图的键值编码不兼容

> ID：15806001
> 
> 赞同：0
> 
> 时间：2013-04-04T08:21:59.400
> 
> 标签：iphone, xcode4

我是 XCode 的新手，我正在尝试构建我的第一个（严肃的非示例应用程序）。最近几天，我参加了一个关于 XCode 的研讨会，我正在尝试按照我们在示例中所做的确切步骤来构建我自己的应用程序。

我面临以下问题：当我尝试运行应用程序时，出现以下错误：

**由于未捕获的异常“NSUnknownKeyException”而终止应用程序，原因：“[setValue:forUndefinedKey:]：此类与键视图的键值编码不兼容。”**

我正在创建一个新项目，并插入一个新的 .h、.m 和 xib 文件（新文件 --> Obkective-C 类、类：ASViewController、子类 UIViewController，我还检查了用户界面的 With XIB）

我将我的 xib 文件留空！里面没有控制。

我转到 ASAppDelegate.m 并将其与我的 xib 文件连接起来，以便使用此 xib 文件运行应用程序。

```
#import "AS_MainViewController.h" 
#import "ASAppDelegate.h"

@implementation INGAppDelegate

- (void)dealloc
{
    [_window release];
    [super dealloc];
}

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
// Override point for customization after application launch.

AS_MainViewController *MyrootViewController = [[AS_MainViewController alloc]
                        initWithNibName:@"AS_MainViewController" bundle: [NSBundle mainBundle]];

self.window.rootViewController = MyrootViewController;

self.window.backgroundColor = [UIColor whiteColor];
[self.window makeKeyAndVisible];
return YES;
} 
```

我的 ASAppDelegate.h 是这样的：

```
#import <UIKit/UIKit.h>

@interface ASAppDelegate : UIResponder <UIApplicationDelegate>
@property (strong, nonatomic) UIWindow *window;
@end 
```

最后，我转到应用程序摘要，在主*界面下拉列表中的***iPhone / iPod 部署信息**部分中，我检查了 AS_MainViewController

 *我建立并建立成功，我运行它，我收到了这个错误！

有人对可能的解决方案有任何想法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T09:46:26.040

您的问题在于这一步：

> 最后，我转到应用程序摘要，并在主界面下拉列表中的 iPhone / iPod 部署信息部分中选择 AS_MainViewController

不要这样做。然后它将起作用。

*如果您想通过在主界面*部分选择 xib 来运行应用程序，那么我在这里给出了答案： [iOS 应用程序的构建设置中主界面选项的用途是什么？](https://stackoverflow.com/questions/11375712/what-is-the-use-of-main-interface-option-in-the-build-settings-for-ios-applicati) 看看这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T08:43:04.680

打开您的 Xib 文件，右键单击 File's Owner。删除所有黄色警告标志，然后重新运行它*

# iphone - 网站有时只重定向

> ID：15806002
> 
> 赞同：0
> 
> 时间：2013-04-04T08:22:00.483
> 
> 标签：iphone, ios, http, user-agent

有一个网站正在被删除。每当我尝试在我的计算机上访问它时，它都会自动重新路由到新站点；但是，如果我尝试在手机上查看它，我可以完美地查看整个网站。

使用 HTTrack，我能够获得一些网站代码

```
<!-- Mirrored from www.pensacolachristiancollege.com/ by HTTrack Website Copier/3.x          [XR&CO'2010], Thu, 04 Apr 2013 08:07:40 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<HEAD>
<TITLE>Page has moved</TITLE>
</HEAD>
<BODY>
<META HTTP-EQUIV="Refresh" CONTENT="0; URL=http://www.pcci.edu/">
<A HREF="http://www.pcci.edu/"><B>Click here...</B></A>
</BODY>
<!-- Created by HTTrack Website Copier/3.46 [XR&CO'2010] -->

<!-- Mirrored from www.pensacolachristiancollege.com/ by HTTrack Website Copier/3.x     [XR&CO'2010], Thu, 04 Apr 2013 08:07:40 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type"  content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
</HTML> 
```

有人可以解释为什么会这样，也许我可以在我的电脑上查看该网站吗？起初我以为我可以欺骗用户代理字符串。`Apple-iPhone3C3/1001.523`是我为带有 ios 6 的 iPhone 4 CDMA 找到的；但是，它仍然不允许我查看该站点。

# oop - 使用组合的 RTTI

> ID：15806006
> 
> 赞同：1
> 
> 时间：2013-04-04T08:22:20.170
> 
> 标签：oop, inheritance, composition, rtti

据说程序员应该更喜欢组合而不是继承。我想知道是否可以使用组合轻松实现 RTTI？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:21:31.620

我想也许我现在明白了你的问题，尽管我相信你是从错误的角度来的。在继承树中，您可以使用 RTTI 检查对象的类型，而没有继承树（使用组合代替）则没有必要，因为您只有一种可能的类型。然后，您可以设置属性或方法来指示对象的“类型”，尽管在真正的 OOP 中您不需要检查类型，而应该让多态来处理它。

在复合对象中，方法调用被转发给它的子对象；在继承树中，方法调用是虚拟的，由派生类处理。

# c# - 使用 MSTest 时，如何将测试数据文件夹部署到 TestResults 目录？

> ID：15806008
> 
> 赞同：0
> 
> 时间：2013-04-04T08:22:23.073
> 
> 标签：c#, unit-testing, tfs, mstest, testrunconfig

使用 MSTest 时，如何将测试数据文件夹部署到 TestResults 目录？

在我的 UnitTests 项目中，我有一个 TestData 文件夹，其中包含一些 xml 文件作为测试数据。

我更新了 ci.testrunco​​nfig 以便在测试运行时部署 TestData 文件夹：

```
<Deployment>
    <DeploymentItem filename="TestData" outputDirectory="CustomFolder/TestData" />    
  </Deployment> 
```

但它不会部署文件夹。

如何解决？

例如，我可以通过将特定文件的“复制到输出目录”设置为“始终复制”来部署文件，但我想避免这种方法，因为我无法控制文件/文件夹的部署位置.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T08:37:06.853

您需要使用 DeploymentItem 标签。您可以在课堂上或特定的单元测试中进行。在您的测试项目中添加您需要部署的目录和文件（例如 MyFiles）。

在您的测试类 ass DeploymentItem 中，并为其提供您的目录名称。

```
[TestClass]
[DeploymentItem("MyFiles")]
public class MyClassTest
{
    [TestMethod]
    public SomeMethodTest()
    {
        // Your unit test.
    }

    [TestMethod]
    [DeploymentItem("MyFiles")]
    public AnotherMethodTest()
    {
        // Your unit test.
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:12:47.973

**已编辑**我错过了您使用 VS2005-VS2008 的情况，因为您`.testrunconfig`在 VS2010 及更高版本中使用的是`.testsettings`.

无论如何，我刚刚在非常相似的问题上苦苦挣扎。这就是我发现的。您可以通过以下方式之一将文件夹部署到 TestResults 目录：

1.  `.testrunconfig`在或 中设置启用部署复选框 `.testsettings`。选择您需要部署的文件夹。事情是不会部署文件夹，但会部署文件夹内容（如果文件夹为空，则不会部署任何内容）到 TestResults 目录。就在 TestResults 目录的根目录中。如果您需要部署文件夹和文件夹内容，则有选项 2

2.  `.testrunconfig`同样，在或 中设置启用部署复选框 `.testsettings`。使用`[DeploymentItem(pathOrigin, pathDest)]`属性。`PathOrigin`可以是绝对路径或相对路径。相对路径是相对于在or文件`RelativePathRoot`中找到的设置。默认情况下是您的解决方案文件夹，因此用于将目录部署到 TestResults。如果 MSTest 找不到目录（或文件），它会尝试在您的 TestProject 的文件夹中找到它。`.testrunconfig``.testsetting``RelativePathRoot``Projectname/DirectoryName``bin`

此外，在所有测试设置实验之后，您需要手动刷新`TestView`窗口

# winforms - 将自定义工具提示显示为气球

> ID：15806013
> 
> 赞同：1
> 
> 时间：2013-04-04T08:22:35.933
> 
> 标签：winforms, tooltip

我在我的 WinForm 应用程序中使用自定义工具提示类。它工作得很好。但我想把它展示为一个气球。这是我的代码-

```
class CustomToolTip : ToolTip
{
    public CustomToolTip()
    {
        this.OwnerDraw = true;
        this.Popup += new PopupEventHandler(this.OnPopup);
        this.Draw += new DrawToolTipEventHandler(this.OnDraw);
    }

    private void OnPopup(object sender, PopupEventArgs e) // use this event to set the size of the tool tip
    {
        e.ToolTipSize = new Size(200, 100);
    }

    private void OnDraw(object sender, DrawToolTipEventArgs e) // use this event to customise the tool tip
    {
        Graphics g = e.Graphics;

        LinearGradientBrush b = new LinearGradientBrush(e.Bounds,
            Color.GreenYellow, Color.MintCream, 45f);

        g.FillRectangle(b, e.Bounds);

        g.DrawRectangle(new Pen(Brushes.Red, 1), new Rectangle(e.Bounds.X, e.Bounds.Y,
            e.Bounds.Width - 1, e.Bounds.Height - 1));

        g.DrawString(e.ToolTipText, new Font(e.Font, FontStyle.Bold), Brushes.Silver,
            new PointF(e.Bounds.X + 6, e.Bounds.Y + 6)); // shadow layer
        g.DrawString(e.ToolTipText, new Font(e.Font, FontStyle.Bold), Brushes.Black,
            new PointF(e.Bounds.X + 5, e.Bounds.Y + 5)); // top layer

        b.Dispose();
    }
} 
```

有什么建议吗？

感谢你在期待。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T08:52:33.487

您可以只画一个椭圆，然后添加一块指向目标。

但是为什么不使用默认的工具提示控件。

它有一个`IsBalloon`标志，当设置为 true 时，如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/ogiCB.png)

# android - 全局开启或关闭声音

> ID：15806018
> 
> 赞同：1
> 
> 时间：2013-04-04T08:23:05.203
> 
> 标签：android

有没有办法“全局”控制您的应用程序的声音级别？

我不想在使用它的每个单独位置控制声音，我想要一个开/关按钮，例如，在设置页面中，为应用程序中的所有声音执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T08:27:42.413

只需在设置页面中设置一个全局布尔变量，并在声音之前使用 if 语句。

# asp.net - 从后面的代码更新标签

> ID：15806019
> 
> 赞同：1
> 
> 时间：2013-04-04T08:23:08.420
> 
> 标签：asp.net, asp.net-ajax, updatepanel

我对 ASP.NET/C# 比较陌生。我正在尝试在处理长时间运行的任务时从后面的代码更新更新面板中的标签标签。基本上有一些表是从数据库中加载的。我想更新标签以在每个表完成加载时通知用户。经过大量搜索后，我将其实现如下，

```
<div id="LockPage" class="LockOff">
        <div>
            <asp:ScriptManager ID="ScriptManager" runat="server"></asp:ScriptManager>
            <asp:UpdatePanel ID="UpdatePanel" runat="server" UpdateMode="Conditional">
                <ContentTemplate>
                    <asp:Image ID="LoadImg" AlternateText="Loading" runat="server" ImageUrl="Images/loading2.gif" />
                    <asp:Label ID="WaitMsg" runat="server" Text="Please Wait...." />
                    <br />
                </ContentTemplate>
            </asp:UpdatePanel>
        </div>
    </div> 
```

代码隐藏：当表格完成时在方法内部：

`WaitMsg.Text = WaitMsg.Text + "Table 1 Completed!"; UpdatePanel.Update();`

上面的代码不起作用。请帮忙。

# php - 使用查询创建高级搜索的问题

> ID：15806021
> 
> 赞同：4
> 
> 时间：2013-04-04T08:23:16.300
> 
> 标签：php, wordpress

我在使用自定义查询创建高级搜索和使用时遇到问题`$wpdb->get_results($query , OBJECT);`

在 wordpress 中的普通搜索中，当我们搜索`xxx yyyy`或搜索时，`yyyy xxx`我们会得到相同的结果，这很好。但是当我被迫使用查询来创建高级搜索时，搜索字段中的单词序列很重要，而且 `xxx yyyy`搜索`yyyy xxx`结果不一样。我想说一个例子：我创建了两个输入字段，一个用于标题，另一个用于我的帖子的作者（作者只是一个例子，在这个地方是一个自定义字段）我尝试阅读这些字段并在 wordpress 中搜索它们

```
<?php
$t = $_REQUEST['title'];
$a = $_REQUEST['author'];
global $wpdb;
$query = "SELECT DISTINCT wp_posts.* FROM wp_posts, wp_postmeta WHERE wp_posts.ID = wp_postmeta.post_id";

if ($t != '') {
    $t_sql = " AND wp_posts.post_title like '%$t%' ";
}

if ($a != '') {
    $a_sql = " AND wp_postmeta.meta_key = 'Author' AND wp_postmeta.meta_value like '%$a%' ";
}
$query .= $t_sql;
$query .= $a_sql;
$pageposts = $wpdb->get_results($query , OBJECT);
global $post;

if ($pageposts):
foreach ($pageposts as $post):
setup_postdata($post);
//...
endforeach;
endif;
?> 
```

在您的想法中，我必须做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T08:40:33.170

您可以按字符拆分搜索词`Space`，然后构建查询以查找每个可能的单词顺序。这是您所在`Title`领域的示例：

```
// Assuming the title is "One Two Three"
$t = $_REQUEST['title'];

// Split the TITLE by space character
$terms = explode(' ', $t); // $terms = ["One", "Two", "Three"]

// Concats each search term with a LIKE operator
$temp = array();
foreach ($terms as $term) {
    $temp[] = "title LIKE '%".$term."%'";
    // $temp = ["title LIKE %One%", "title LIKE %Two%", ...
}

// Adds an AND operator for each $temp to the query statement
$query = "SELECT * FROM titleTable WHERE (".implode(' AND ', $temp).")";
// $query = SELECT * FROM titleTable WHERE 
       // (title LIKE '%One%' AND title LIKE '%Two%' AND title LIKE '%Three%') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T08:35:17.360

在 WP DB 中进行自定义查询不是一个好方法。使用 WP_Query 来执行此操作。

这是某人遇到相同问题的链接：

[https://wordpress.stackexchange.com/questions/18703/wp-query-with-post-title-like-something](https://wordpress.stackexchange.com/questions/18703/wp-query-with-post-title-like-something)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T09:00:40.813

实际上，我已经在 Web 开发人员门户网站上查看了您的代码，特别是 SQL 查询。而且我也不知道为什么通过搜索*xxx yyyy*和*yyyy xxx*与您的 PHP 脚本的结果不同。但我能给你的唯一建议是：

```
$query .= $t_sql;
$query .= $a_sql;
// is to add an sql order by keyword like this
$query .= " ORDER BY wp_posts . post_title "; 
```

试试看！如果您的服务器的 PHP 没有在这些变量上运行，请不要忘记`addslashes()`何时使用`$_GET`,`$_POST`或变量。您可以使用该功能进行检查。`$_COOKIE``addslashes()``get_magic_quotes_gpc()`

# mysql - 在 groupby 中使用 groupby

> ID：15806022
> 
> 赞同：1
> 
> 时间：2013-04-04T08:23:16.980
> 
> 标签：mysql, sql

我有一张如下表

```
user_id HouseNo      Name   location_id
 1     0-0        aaa    1
 2     0-0        bbb    1
 3     0-1        ccc    1
 4     1-2        ddd    1
 5     2-1        eee    1
 6     1-2        fff    1
 7     2-1        ggg    1
 8     1-2        hhh    1
 9     2-1        iii    1
 10    3-0        jjj    1
 11    3-0        kkk    1
 12    3-0        lll    1 
```

我这里有 2 个问题

1）我需要按房屋编号获取用户数。为此，我使用了从用户组中选择房屋编号，计数（用户ID）的房屋编号；

然后我得到了结果

```
 house_no count(house_no)
    0-0        2
    0-1        1
    1-2        3
    2-1        3
    3-0        3 
```

这对我来说很好。

但我的问题是如何获得计数为 1 的家庭数和计数为 2 的家庭数......

```
Like as follows:

 count1   1
 count2   1
 count3   3 
```

这里count1表示没有一个用户的家庭，count2表示没有两个用户的家庭......

> 我这里有 3 个固定条件。它们是 count<=3 count >4 和 count<10 count >10

我需要如下结果

```
count1   count2 count3
1         1       3 
```

注意：这里相同的家庭是指包含相同 houseno 的用户。请帮助我......提前谢谢......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T08:25:58.407

下面的查询有两部分，第一部分是计算每个成员数的子查询`House_No`。然后再次计算子查询的结果，这次它将作为成员数分组。

```
SELECT  CONCAT('COUNT', totalMember) FamilyMember, COUNT(*) NumberOfFamilies
FROM
        (
            SELECT  House_No, COUNT(*) totalMember
            FROM    TableName
            GROUP   BY House_no
        ) x
GROUP   BY totalMember
ORDER   BY totalMember 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/d3e338/3)

输出

```
╔══════════════╦══════════════════╗
║ FAMILYMEMBER ║ NUMBEROFFAMILIES ║
╠══════════════╬══════════════════╣
║ COUNT1       ║                1 ║
║ COUNT2       ║                1 ║
║ COUNT3       ║                3 ║
╚══════════════╩══════════════════╝ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T08:56:57.907

要列出具有 N 个成员的族，您可以使用[HAVING](https://dev.mysql.com/doc/refman/5.0/en/group-by-modifiers.html) `GROUP BY`修饰符。

对于有 1 名成员的家庭：

```
SELECT Name, count(*) as c FROM Tablename GROUP BY Name HAVING c=1; 
```

对于有 2 名成员的家庭：

```
SELECT Name, count(*) as c FROM Tablename GROUP BY Name HAVING c=2; 
```

等等

# android - 完成发送邮件活动后如何返回

> ID：15806023
> 
> 赞同：0
> 
> 时间：2013-04-04T08:23:22.083
> 
> 标签：android, android-activity, start-activity

我有一个带有发送按钮的片段。

单击发送按钮后，将启动从设备选择电子邮件客户端的活动。

一旦我们选择了电子邮件客户端并发送了邮件，它就会按预期再次返回到片段。

但是当我们的邮件发送任务完成时，不需要有片段视图。

所以我们想在邮件发送成功后回到之前的活动。

怎么做？

我试过：

`getActivity().getSupportFragmentManager().popBackStack();`

但这不起作用。

我的发送按钮点击代码是：

```
view.findViewById(R.id.sendbtn).setOnClickListener(new OnClickListener() {
@Override
public void onClick(View arg0) {
startActivityForResult(Intent.createChooser(email, "Choose an Email client :"),2);
getActivity().getSupportFragmentManager().popBackStack(); //this is not working to go back.
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T08:27:21.690

您可以在发送邮件后尝试删除片段（已修复）：

```
getActivity().getSupportFragmentManager().beginTransaction().remove(MailFragment.this).commit(); 
```

`FragmentTransaction`但请记住，只有使用和方法动态添加它才能将其删除`.add()`。如果片段是在 XML 中添加的，remove 方法将不起作用。

要动态添加片段，您应该这样做：

```
MailFragment mailFragment = new MailFragment(); 

FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
fragmentTransaction.add(R.id.containerForFragments, mailFragment).commit(); 
```

`.remove()`然后您可以通过该方法删除此片段。

顺便说一句，您可以尝试隐藏它而不是删除片段（不会从内存中删除）：

```
 getActivity().getSupportFragmentManager().beginTransaction().hide(MailFragment.this).commit(); 
```

# c# - Zebra 打印没有空格的图像

> ID：15806025
> 
> 赞同：2
> 
> 时间：2013-04-04T08:23:25.630
> 
> 标签：c#, printing, frameworks

我正在使用 Zebra CPCL 打印机打印文本和图像 (.bmp)。我正在使用 Zebra SDK 的 C# 方法 PrintImage 来打印图形，但问题是它不断在图像前添加一些空白。我设法通过使用 SETFF 消除了打印图像后的空白，但是有没有办法消除图像前的空白？

```
 zebraTU.SendCommand("! U1 setvar \"device.languages\" \"line_print\"" + NL);
        zebraTU.SendCommand("! U1 setvar \"media.tof\" \"0\"");
        zebraTU.SendCommand("! U1 PAGE-WIDTH " + pagewidth + NL);
        ZebraPrintText(0, 2, 18, "After this line there is a white space");
        zebraTU.SendCommand("! UTILITIES" + NL + "IN-MILLIMETERS" + NL + "SETFF 0 0" + NL + "PRINT" + NL); 

        ZebraPrintImage("file.bmp", 0, 0, pagewidth, -1); 
```

# php - 在php中的json之后我得到stdClass并且不能使用数组

> ID：15806027
> 
> 赞同：0
> 
> 时间：2013-04-04T08:23:31.440
> 
> 标签：php, jquery, arrays, json, associative-array

我在 jquery 中使用 JSON.stringify(pageSettings) 将数组 ajax 到 php 并保存文件。文件内容：

```
{"MidHeight":367,"BotTop":502} 
```

我使用 json_decode 将其加载回 php 中的数组：

```
$pageSettings=json_decode(file_get_contents($path.$file); 
```

当我 print_r($pageSettings,true) 结果是：

```
stdClass Object
(
    [MidHeight] => 276
    [BotTop] => 411
) 
```

但是当我尝试从中读取时：

```
$pageSettings["MidHeight"] 
```

我得到：

```
PHP Fatal error:  Cannot use object of type stdClass as array. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T08:26:36.860

要么使用属性访问符号 ( `$pageSettings->MidHeight`) 要么告诉[`json_decode`](http://php.net/manual/en/function.json-decode.php)你总是使用第二个参数给你一个关联数组：`$pageSettings = json_decode($json_str, true);`

# wpf - 如何知道要在 FindWindowByClassName InnoSetup 函数中使用的 WPF 应用程序的类名

> ID：15806028
> 
> 赞同：3
> 
> 时间：2013-04-04T08:23:32.333
> 
> 标签：wpf, inno-setup, classname, spy++

在 InnoSetup 中，有一个函数“FindWindowByClassName”可以知道程序是否已经在使用中。就我而言，我想在运行 InnoSetup 更新之前知道我的 wpf 应用程序是否正在使用中，但我不知道如何知道我的 wpf 应用程序类名。当我在我的应用程序中使用 Spy++ 时，类名是：

```
HwndWrapper[MuProgram.exe;;1120a18a-2e29-4e19-8653-939c99b505c2] 
```

如您所见，我的类名中有一个 GUID，并且此 GUID 在每次启动时都会更改。但无论如何，当我运行 InnoSetup（在调试模式下）时，FindWindowByClassName 函数在我使用这个类名时返回 0。

```
FindWindowByClassName('HwndWrapper[MyProgram.exe;;1120a18a-2e29-4e19-8653-939c99b505c2]'); // returns 0 
```

我尝试只使用“MyProgram.exe”，但该函数总是返回 0（在测试期间启动应用程序“MyProgram.exe”）。你有什么想法来解决这个问题吗？我可以在我的 wpf 代码中设置类名吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-31T03:53:37.680

在[Inno Script 源代码](https://github.com/jrsoftware/issrc/blob/4c3f93dc55b4d6a133af0c86f0981edd809a13ee/Projects/ScriptFunc_R.pas#L1446)中，可以看到 FindWindowByClassName 调用了 Windows [FindWindow](https://msdn.microsoft.com/en-us/library/windows/desktop/ms633499(v=vs.85).aspx)函数。正如您已经注意到的，WPF 表单在每次调用时都会更改类名。根据[这个 StackOverflow 答案](https://stackoverflow.com/a/5262375/550712)，随机 GUID 使得无法在 WPF 类上使用 FindWindow。

不幸的是，搜索窗口时没有 RegEx 或通配符功能。[我想您可以通过使用GetWindowEx](https://msdn.microsoft.com/en-us/library/windows/desktop/ms633500(v=vs.85).aspx)之类的东西搜索*所有*窗口并循环遍历桌面窗口的所有子窗口来编写自己的代码。[这个 StackOverflow 答案](https://stackoverflow.com/a/4453697/550712)建议使用 UI 自动化而不是使用 WPF 的旧 API 调用。

如果您正在编写要搜索的应用程序，@TLama 建议的互斥锁替代方案非常棒。如果您尝试查找并关闭其他供应商的应用程序，这并不容易。CheckForMutexs[也不](http://www.jrsoftware.org/ishelp/topic_isxfunc_checkformutexes.htm)返回窗口句柄，因此如何关闭窗口并不简单。

# cuda - CUDA 2D 阵列英伟达

> ID：15806034
> 
> 赞同：0
> 
> 时间：2013-04-04T08:23:48.830
> 
> 标签：cuda, nvidia, cuda-gdb

我正在使用`cudaMallocPitch`and`cudaMemcpy2D`用于二维数组。即使我无法正确获得输出，我也不确定我的编码是否正确。有人可以帮忙吗？任何人都可以调试我的错误吗？提前致谢。

```
#include<stdio.h>
#include<cuda.h>
#define siz 4*sizeof(int)
__global__ void addmatrix(int *m1,int *m2,size_t pitch)
{
    int r=threadIdx.x;
    int *r1=m1+r*pitch;
    int *r2=m2+r*pitch;
    int c;
    for(c=1;c<=4;c++)
    {
        r1[c]+=r2[c];
    }
}
int main()
{
    int i,j;
    int **m1_c,**m2_c;
    int *m1_d,*m2_d;
    size_t pitch;
    cudaError_t err;
    m1_c=(int **)malloc(4*sizeof(int *));
    for(i=1;i<=4;i++)
    {
        m1_c[i]=(int *)malloc(siz);
    }
    m2_c=(int **)malloc(4*sizeof(int *));
    for(i=1;i<=4;i++)
    {
        m2_c[i]=(int *)malloc(siz);
    }
    for(i=1;i<=4;i++)
    {
        for(j=1;j<=4;j++)
        {
            m1_c[i][j]=rand()%10;
            m2_c[i][j]=rand()%10;
        }
    }
    for(i=1;i<=4;i++)
    {
        for(j=1;j<=4;j++)
        {
            printf("%d\t",m1_c[i][j]);
        }
        printf("\n");
    }
    printf("\n\n");
    for(i=1;i<=4;i++)
    {
        for(j=1;j<=4;j++)
        {
            printf("%d\t",m2_c[i][j]);
        }
        printf("\n");
    }
    err=cudaMallocPitch((void **)&m1_d,&pitch,siz,siz);
    err=cudaMallocPitch((void **)&m2_d,&pitch,siz,siz);
    err=cudaMemcpy2D(m1_d,pitch,m1_c,siz,siz,4,cudaMemcpyHostToDevice);
    err=cudaMemcpy2D(m2_d,pitch,m2_c,siz,siz,4,cudaMemcpyHostToDevice);
    dim3 grid(1);
    dim3 block(16);
    addmatrix<<<grid,block>>>(m1_d,m2_d,siz);
    cudaMemcpy2D(m1_c,siz,m1_d,pitch,siz,4,cudaMemcpyDeviceToHost);

    for(i=1;i<=4;i++)
    {
        for(j=1;j<=4;j++)
        {
            printf("%d\t",m1_c[i][j]);
        }
        printf("\n");
    }
    err=cudaFree(m1_d);
    err=cudaFree(m2_d);
    err=cudaDeviceReset();      
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T18:04:53.100

所以这段代码有几个问题。没有特别的顺序：

1.  您正在通过从 1 到 4 的各种数组进行索引，但这在 C 中是不正确的。C 索引从零开始，并且比维度小一。这与CUDA无关。
2.  [cudaMemcpy2D](http://docs.nvidia.com/cuda/cuda-runtime-api/index.html#group__CUDART__MEMORY_1g17f3a55e8c9aef5f90b67cdf22851375)需要两个指针 (`src`和`dst`)，它们都是指向内存中线性数组的指针。我意识到这很令人困惑，因为 2D 出现在整个描述中，但是这两个指针参数基本上都是相同类型的（指向内存的指针），并且您正在传递两种不同类型的指针（一个是指向内存的指针，另一个是指向内存的指针）是指向内存指针的指针）。从 cudaMemcpy2D 的定义很清楚，你的用法是不正确的。有很多关于如何使用 cudaMemcpy2D 的示例的已回答问题，我建议您搜索并查看其中的一些。请注意，修复此问题可能会导致您从根本上重新考虑如何将数据存储在主机矩阵上。有很多这样的[问题](https://stackoverflow.com/questions/15799086/cuda-how-to-copy-a-3d-array-from-host-to-device)关于处理多维矩阵——如果可能的话，你应该把它们展平。请注意，在您当前的代码中，使用 cudaMemcpy2D 的此错误正在破坏主机矩阵上的指针数组，这会在您尝试打印结果时导致段错误。
3.  您传递给[cudaMallocPitch](http://docs.nvidia.com/cuda/cuda-runtime-api/index.html#group__CUDART__MEMORY_1g80d689bc903792f906e49be4a0b6d8db)的参数不太正确。对于您传递的`width`和参数，它是以*字节*为单位的矩阵维度。但是您应该只传递参数的字节维度。对于参数，您应该传递行数，即在您的情况下为 4。对 cudaMemcpy2D 的调用也有类似的要求，但你在那里得到了它。`height``siz`*`width``height`*
**   现在让我们看看你的内核。在调用中，您将启动一个由 16 个线程组成的块的网格。由于您的矩阵有 16 个元素，这似乎是明智的。这意味着一个*线程策略*，其中每个线程将负责结果的单个元素。但是看看你的内核代码，你让每个线程计算一整行的结果，即 4 个元素。有两种方法可以解决这个问题：您可以将网格减少到 4 个线程而不是 16 个线程（从代码修改的角度来看可能更简单），或者您可以重新编写内核（消除 for 循环）并拥有每个线程计算*一个*输出元素（这可能会并行执行更多工作）。*   此外，在您的内核中，您`pitch`在基于指针算术的索引中使用该参数。但请记住，pitch 是以*字节*为单位的，对于指针算术索引，编译器希望参数以*元素*为单位——它会根据数据类型为您转换为字节。同样，这确实是一个 C 问题，而不是特定于 CUDA。您可以通过在内核中使用的`(pitch/sizeof(int))`任何位置来解决此问题。`pitch`*   您正在将`siz`音调传递给您的内核。您应该传递`pitch`pitch 参数。`siz`实际上是主机数据存储上的“间距”，但是`pitch`是设备上存储的间距。内核在设备存储上运行，因此它需要正确的音高。*   作为建议，对所有 cuda API 调用和内核调用进行[cuda 错误检查。](https://stackoverflow.com/questions/14038589/what-is-the-canonical-way-to-check-for-errors-using-the-cuda-runtime-api)*

 *这是一些以一种或另一种方式解决上述所有问题的代码：

```
#include<stdio.h>
#define siz (4*sizeof(int))

#define cudaCheckErrors(msg) \
    do { \
        cudaError_t __err = cudaGetLastError(); \
        if (__err != cudaSuccess) { \
            fprintf(stderr, "Fatal error: %s (%s at %s:%d)\n", \
                msg, cudaGetErrorString(__err), \
                __FILE__, __LINE__); \
            fprintf(stderr, "*** FAILED - ABORTING\n"); \
            exit(1); \
        } \
    } while (0)

__global__ void addmatrix(int *m1,int *m2,size_t pitch)
{
    int r=threadIdx.x;
    int *r1=m1+r*(pitch/sizeof(int));
    int *r2=m2+r*(pitch/sizeof(int));
    int c;
    for(c=0;c<4;c++)
    {
        r1[c]+=r2[c];
    }
}
int main()
{
    int i,j;
    int *m1_c,*m2_c;
    int *m1_d,*m2_d;
    size_t pitch;
    cudaError_t err;
    m1_c=(int *)malloc(16*sizeof(int));
    m2_c=(int *)malloc(16*sizeof(int));
    for(i=0;i<4;i++)
    {
        for(j=0;j<4;j++)
        {
            m1_c[(i*4)+j]=rand()%10;
            m2_c[(i*4)+j]=rand()%10;
        }
    }
    for(i=0;i<4;i++)
    {
        for(j=0;j<4;j++)
        {
            printf("%d\t",m1_c[(i*4)+j]);
        }
        printf("\n");
    }
    printf("\n\n");
    for(i=0;i<4;i++)
    {
        for(j=0;j<4;j++)
        {
            printf("%d\t",m2_c[(i*4)+j]);
        }
        printf("\n");
    }
    err=cudaMallocPitch((void **)&m1_d,&pitch,siz,4);
    cudaCheckErrors("cm1");
    err=cudaMallocPitch((void **)&m2_d,&pitch,siz,4);
    cudaCheckErrors("cm2");
    err=cudaMemcpy2D(m1_d,pitch,m1_c,siz,siz,4,cudaMemcpyHostToDevice);
    cudaCheckErrors("cm3");
    err=cudaMemcpy2D(m2_d,pitch,m2_c,siz,siz,4,cudaMemcpyHostToDevice);
    cudaCheckErrors("cm4");
    dim3 grid(1);
    dim3 block(4);
    addmatrix<<<grid,block>>>(m1_d,m2_d,pitch);
    cudaMemcpy2D(m1_c,siz,m1_d,pitch,siz,4,cudaMemcpyDeviceToHost);
    cudaCheckErrors("cm5");

    for(i=0;i<4;i++)
    {
        for(j=0;j<4;j++)
        {
            printf("%d\t",m1_c[(i*4)+j]);
        }
        printf("\n");
    }
    err=cudaFree(m1_d);
    err=cudaFree(m2_d);
    err=cudaDeviceReset();
} 
```*

# python - 如何关闭推特流

> ID：15806037
> 
> 赞同：2
> 
> 时间：2013-04-04T08:24:00.010
> 
> 标签：python, twitter, python-2.7, tweepy

我在下面包含了与 Tweepy 一起使用的代码，Tweepy 是 Python 的 Twitter API 库。虽然我正在尝试我在网上找到的大多数方法，但他们未能关闭连接或停止流。有什么办法吗？

在我的功能里面

```
 setTerms = s.split(',')
 streaming_api = tweepy.Stream(auth=auth, listener=StreamListener(), timeout=60 )
    if (s == '0'):
        streaming_api.disconnect()
        raise web.seeother('/dc')
        print "Failed to see this"
    try:
        twt = streaming_api.filter(track=setTerms)
    except:
        streaming_api.disconnect()
        #also cannot see this
    raise web.seeother('/stream') 
```

这是流侦听器类

```
class StreamListener(tweepy.StreamListener):
        def on_status(self, status):
            try:
                printer(status.text, status.created_at)
            except Exception, e:
                pass
        def on_error(self, status_code): 
            print >> sys.stderr, 'Encountered error with status code:', status_code
            return True
        def on_timeout(self): 
            print >> sys.stderr, 'Timeout...'
            return True 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-13T19:09:13.497

第一次调用`stream.disconnect()`（inside `if (s == '0'):`）时，你还没有调用`filter`，所以流永远不会连接。假设您使用的是最新版本的`tweepy`. 请注意，该`except`块几乎不会被调用，因为流运行时发生的任何错误都会传递给`on_error`回调。

# python - python语法日期时间

> ID：15806039
> 
> 赞同：0
> 
> 时间：2013-04-04T08:24:02.347
> 
> 标签：python, datetime

为什么这两个代码的日期输出格式不同？一个是 datetime 对象，另一个似乎是一个字符串（我更喜欢字符串看起来相似的格式）。我错过了什么？

```
def generator():

    i=0
    while (i<50000):
        yield random.randint(-1, 1), datetime.datetime.now()
        i=i+1

mynumber = 100

for random_number, current_time in generator():
    mynumber += random_number  

print mynumber,",", current_time 
```

输出：

```
>>> 100 , 2013-04-04 09:16:55.730000
101 , 2013-04-04 09:16:55.746000 
```

第二个例子：

```
def test(timestamp,interval = 1*60):
    xt = datetime.datetime(2013, 4,4)
    #dt = datetime.datetime.strptime(timestamp, '%d/%m/%Y %H:%M:%S')
    dt=timestamp
    delta_second =(dt - xt).seconds
    normalize_second = (delta_second / interval) * interval
    newtime = xt + timedelta(seconds=normalize_second)
    print (dt,newtime)

test(datetime.datetime.now()) 
```

```
>>> (datetime.datetime(2013, 4, 4, 9, 21, 12, 386000), datetime.datetime(2013, 4, 4, 9, 21))

```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T08:27:14.513

你正在打印*不同的东西*。在第一个示例中，您*直接*打印日期时间，因此`print`将其转换为`str()`.

在第二个示例中，您打印一个*tuple*，并且 tuples 总是与内容一起打印`repr()`：

```
>>> now = datetime.datetime.now()
>>> print now
2013-04-04 10:28:10.029566
>>> print (now,)  # tuple
(datetime.datetime(2013, 4, 4, 10, 28, 10, 29566),)
>>> print repr(now)
datetime.datetime(2013, 4, 4, 10, 28, 10, 29566) 
```

在这两种情况下，您仍在打印`datetime`对象。

# javascript - 使用控制台时在 mvim/vim 上突出显示不同的语法

> ID：15806041
> 
> 赞同：0
> 
> 时间：2013-04-04T08:24:08.037
> 
> 标签：javascript, vim, syntax-highlighting, macvim

在 GUI 上使用 MVIM 我得到了正确的语法。在控制台上使用`mvim -v\`or `vim`，我根本没有语法，但是在`:syntax on`if 变成左边的图像之后，这仍然不是我习惯的颜色。这是怎么回事？

![在此处输入图像描述](https://i.stack.imgur.com/XY2O8.png) ![在此处输入图像描述](https://i.stack.imgur.com/y5rNx.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T08:36:49.553

颜色方案由 定义`:colorscheme [scheme]`。如果你不带参数运行，你可以通过不带参数运行它来检查哪个正在使用。

通常使用两个文件来自定义 vim。然后您应该检查以查看`colorscheme`设置的位置。

*   常规 vim（GUI 和 CLI）定制继续进行`.vimrc`。
*   仅 GUI 定制继续进行`.gvimrc`。

脚本也可以覆盖这些文件中的选项。您可以使用`:scriptnames`来检查当前正在使用的那些，以帮助您找到正在发生的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T08:26:42.073

图形 vim 可以使用其他配置文件（`~/.gvimrc`vs `~/.vimrc`），并且由于`vim`星号后不同于`mvim`. 关于颜色的差异，控制台无法使用可用于图形界面的完整 RGB，因此您的配色方案在某种程度上是“近似的”。

# javascript - 如何自动播放这个 javascript 滑块？

> ID：15806044
> 
> 赞同：0
> 
> 时间：2013-04-04T08:24:13.333
> 
> 标签：javascript, jquery, slider, autoplay

我发现了这个不错的 js 滑块，它通过单击单选按钮、选择要查看的幻灯片来工作。

我希望它自动播放幻灯片，并给它一个幻灯片和过渡的时间，但老实说，我不确定将这些值放在哪里。

我已经看到有关类似问题的其他问题，但找不到我的问题的正确答案。请帮忙？

```
<script type="text/javascript">
    $(document).ready(function () {

        var showCaseItems = $('.show-case-item').hide();

        var splashes = $('.splash').hide();
        //get each image for each slide and set it as a background of the slide
        //            splashes.each(function () {
        //                var img = $(this).find('img');
        //                var imgSrc = img.attr('src');
        //                img.css('visibility', 'hidden');
        //                $(this).css({ 'background-image': 'url(' + imgSrc + ')', 'background-repeat': 'no-repeat' });
        //            });

        splashes.eq(0).show();
        showCaseItems.eq(0).show();

        var prevIndex = -1;
        var nextIndex = 0;
        var currentIndex = 0;

        $('#banner-pagination li a').click(function () {

            nextIndex = parseInt($(this).attr('rel'));

            if (nextIndex != currentIndex) {
                $('#banner-pagination li a').html('<img src="assets/img/slidedot.png" alt="slide"/>');
                $(this).html('<img src="assets/img/slidedot-active.png" alt="slide"/>');
                currentIndex = nextIndex;
                if (prevIndex < 0) prevIndex = 0;

                splashes.eq(prevIndex).css({ opacity: 1 }).animate({ opacity: 0 }, 500, function () {
                    $(this).hide();
                });
                splashes.eq(nextIndex).show().css({ opacity: 0 }).animate({ opacity: 1 }, 500, function () { });

                showCaseItems.eq(prevIndex).css({ opacity: 1 }).animate({ opacity: 0 }, 500, function () {
                    $(this).hide();
                    showCaseItems.eq(nextIndex).show().css({ opacity: 0 }).animate({ opacity: 1 }, 200, function () { });
                });

                prevIndex = nextIndex;
            }

            return false;
        });

    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:08:29.340

您可以使用 jquery 和 setTimeout

```
setTimeout(function() {$('#banner-pagination li a').trigger('click');}, 1500); 
```

此代码将每 1.5 秒循环一次并触发点击`#banner-pagination li a`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T10:05:14.947

您可以使用 jquery 触发事件并强行点击单选按钮单击事件

> $('#foo').trigger('click');
> 
> [http://api.jquery.com/trigger/](http://api.jquery.com/trigger/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-16T09:16:57.043

```
setInterval(function() 
  {$('#banner-pagination li a[rel='+((currentIndex+1)%3)+']').trigger('click');},5000); 
```

谢谢

# java - 获取编码区域名称-HBase

> ID：15806045
> 
> 赞同：0
> 
> 时间：2013-04-04T08:24:13.987
> 
> 标签：java, hadoop, hbase

我正在使用 hbase 0.94.0。我正在尝试使用以下功能

```
public void move(byte[] encodedRegionName,byte[] destServerName) 
```

`destServerName`我使用`getServerName`函数检索。

现在我如何得到`encodedRegionName`？有没有这方面的API？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:46:39.167

HBaseAdmin 类的 getOnlineRegions() 或 getTableRegions() 方法可以给出 HRegionInfo 的列表，其中有 getEncodedNameAsBytes() 方法。

# javascript - 加载完整网站而不是移动版本 - Javascript window.location

> ID：15806049
> 
> 赞同：0
> 
> 时间：2013-04-04T08:24:42.563
> 
> 标签：javascript, redirect, mobile

对于一个项目，如果 screen.width 低于 768px，我将使用重定向到移动版本：

```
if (screen.width < 768) {
window.location = "http://www.site.com/mobile";
} 
```

这很好，但现在如果我在移动网站上我无法返回正常网站，我该如何添加链接或更改 javascript，如果我在移动网站上，我可以点击“到完整视图页面”和是不是要去手机版？

谢谢你的帮助！皮森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T08:29:30.310

我建议一个饼干：

```
function setCookie(c_name,value,exdays)
{
    var exdate=new Date();
    exdate.setDate(exdate.getDate() + exdays);
    var c_value=escape(value) + ((exdays==null) ? "" : ";
    expires="+exdate.toUTCString());
    document.cookie=c_name + "=" + c_value;
} 
```

和：

```
function getCookie(c_name)
{
var i,x,y,ARRcookies=document.cookie.split(";");
for (i=0;i<ARRcookies.length;i++)
{
  x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
  y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
  x=x.replace(/^\s+|\s+$/g,"");
  if (x==c_name)
    {
    return unescape(y);
    }
  }
} 
```

改编自这里： [http ://www.w3schools.com/js/js_cookies.asp](http://www.w3schools.com/js/js_cookies.asp)

# c# - 在 ASP.NET 4.0 中收集和批处理 HTTP GET 请求

> ID：15806053
> 
> 赞同：2
> 
> 时间：2013-04-04T08:24:58.783
> 
> 标签：c#, asp.net, .net-4.0

*我有一个将* `HTTP GET`请求转换为 Web 服务调用的 ASP.NET 应用程序。

现在每个请求都会导致一个 Web 方法调用。我想从请求中**收集**或**分组**数据以执行更少的服务调用。所以每个请求都应该检查一个*处理器对象*是否存在并接受更多的数据。

然后将数据传递给这个对象或创建一个新的*处理器对象*。将请求传递给服务的最大等待时间通常在几秒或几分钟的范围内。

这有一个很好的模式吗？

# php - 如何使用 PDO 处理带有 ln 的文本

> ID：15806054
> 
> 赞同：-2
> 
> 时间：2013-04-04T08:25:03.823
> 
> 标签：php, javascript, html, sql, pdo

我正在使用 PDO 执行查询。我有这个问题：我有一个`<textarea>`来自女巫的元素，我正在获取文本并将其发布到服务器端，并在使用 PDO 准备后将其添加到数据库中：

```
$insertQuery = $db->prepare("INSERT INTO feedback (userName, comment, time_stamp, languageCode, userIp) VALUES (:usernaem, :comment, '". $now ."', :lang, '". $ip ."')");
$insertQuery->bindValue(':comment',nl2br($_POST['comment']));
... 
```

在我网络的其他地方，我从数据库中获取了这个“评论”并将其获取到 json 字符串：

```
 try {
    $commentQuery = $db->query("SELECT userName, time_stamp, comment, languageCode FROM feedback LIMIT 10");
  } catch (PDOException $ex) {
    die(json_encode(array('outcome' => false, 'message' => $ex->getMessage())));
  }

  $result = $commentQuery->fetchAll(PDO::FETCH_ASSOC);}
  $commentsJson = json_encode($result); 
```

我`$commentsJson`正在插入一些 javascript var：

```
var comments = JSON.parse('<?php echo $commentsJson; ?>'); 
```

在这里我的 chrome 浏览器抛出异常。

## 例如：

如果我的`<textarea>`: 中有此文本并将其提交给数据库：

> 这是一些评论
> 
> 这是新的评论

在数据库中它保存为：

```
This is some comment<br />
and this is new line of comment 
```

但是当我从数据库中取回它时，我得到了这个：

```
 var comments = JSON.parse('[{"userName":"Test","time_stamp":"2013-04-04 10:17:43","comment":"This is some comment<br \/>\nand this is new line of comment", ... 
```

之后我的浏览器异常说：

> “未捕获的语法错误：意外的令牌”

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-04T11:34:29.253

好的，经过半天的研究，我做了这个：

```
<?php
$result = $commentQuery->fetchAll(PDO::FETCH_ASSOC);
$commentsJson = json_encode($result);
?>
...
function replacetext(text, what, to){
      var searchfor = what.replace(/\r/gi,'').replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&");
      var replacewith = to.replace(/\r/gi,'');
      var flags = 'gi';
      var searchexp = new RegExp(searchfor,flags);
      text = text.replace(searchexp,replacewith);
      return text;
   }

    var tmp = '<?php echo $commentsJson; ?>';
    tmp = replacetext(tmp, "\n", '<br>'); 
```

谢谢您的帮助！

# php - 使用 PHP 连接数据库的最安全方法有哪些？

> ID：15806056
> 
> 赞同：13
> 
> 时间：2013-04-04T08:25:05.277
> 
> 标签：php, mysql, syntax

我对 PHP 和 MYSQL 还是很陌生，我正在尝试使用现代编码技术来学习这两者。我在网上找到的所有东西似乎都已经过时了。

任何人都可以为我提出任何建议吗？我也很好奇以下代码是否已过时？如果它确实已经过时，你能建议更新更安全的方法吗？

```
<?php
    $connection = mysql_connect("localhost", "root", "");
    if (!$connection) {
        die("Oops, error happened: " . mysql_error());
    }
?> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-04T08:27:39.667

使用[`PDO`](http://net.tutsplus.com/tutorials/php/php-database-access-are-you-doing-it-correctly/)函数。

**使用 PDO 连接数据库：**

```
$conn = new PDO('mysql:host=localhost;dbname=myDatabase', $username, $password); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T05:27:42.740

> 使用 PHP 连接数据库的最安全方法

如果您正在寻找安全的方法，您实际上需要从注入中防火您的查询。`MySQL`扩展将很快被弃用，这并不意味着它`safe`现在不会，只是社区放弃了对扩展的进一步发展的情况。

您可以尝试两者`PDO`，`mysqli`对于您的数据库查询，两者都很好。

您的选择应取决于您的数据库选择 -

`PDO`支持大约 12 种不同的驱动程序，而仅`MySQLi`支持`MySQL`。

**可用的 PDO 驱动程序列表**

```
CUBRID (PDO)
MS SQL Server (PDO)
Firebird/Interbase (PDO)
IBM (PDO)
Informix (PDO)
MySQL (PDO)
MS SQL Server (PDO)
Oracle (PDO)
ODBC and DB2 (PDO)
PostgreSQL (PDO)
SQLite (PDO)
4D (PDO) 
```

源 - [pdo-drivers-in-php](http://www.php.net/manual/en/pdo.drivers.php)

**API 支持**

`PDO`并且`MySQLi`两者都提供**了面向对象的 API**，但 MySQLi 也提供了一个`procedural API`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T08:29:03.137

是的，您的代码已过时。mysql_connect、mysql_query 等将很快被删除。

基本上有两种选择：（不安装第 3 方应用程序）

看看[http://php.net/manual/en/book.pdo.php](http://php.net/manual/en/book.pdo.php)

或者

使用 Mysqli [http://php.net/manual/en/book.mysqli.php](http://php.net/manual/en/book.mysqli.php)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-04T08:31:05.767

在 PHP 中访问数据库时，我们现在有两种选择：MySQLi 和 PDO。

要选择您要使用的，请看[这里！](http://net.tutsplus.com/tutorials/php/pdo-vs-mysqli-which-should-you-use/)

如果你想知道为什么你不应该使用 mysql_* 然后看看[这篇文章！](https://stackoverflow.com/questions/12859942/why-shouldnt-i-use-mysql-functions-in-php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T08:31:20.660

首先：

是的，这条线已经过时了。

您可以使用`mysqli_*`与`mysql_`.

其次，如果您对面向对象编程有所了解，则可以按照其他答案中的建议使用 PDO。

最后要提到的是，**永远不要向用户显示错误消息**。他不需要知道出了什么问题，也不需要知道出了什么问题。所以永远不会`die()`出现错误消息。

# java - 我怎样才能让这个方法返回一个数组？

> ID：15806057
> 
> 赞同：0
> 
> 时间：2013-04-04T08:25:06.327
> 
> 标签：java, arrays, multithreading

如何使以下方法返回 a `character array`？

```
public char[] startThread() {
    // arr declaration
    Runnable r = new Runnable() {
        @Override
        public void run() {
            arr = getArray(); // arr assignment
        }
    };
    new Thread(r).start();
    return arr;
}

char arrNew[] = startThread(); 
```

*注意：上面的代码片段会产生错误*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T08:28:06.557

查找 java.util.concurrent.Callable，它类似于 runnable，但返回一个值。

[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Callable.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Callable.html)

或者

如果在 1.6 JDK 中，您可以查找 Future 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T08:26:38.737

你不能这样做。

当你从你的方法返回时，你没有你的 char 数组。它尚未创建。*所以，作为参考*分配是行不通的。两者都`Callable`不会对此有所帮助。

您可以做的是创建一个持有者对象，然后返回它（这与`Future`对象非常相似）：

```
public static class ArrayHolder {
    public char[] arr;
}

public ArrayHolder startThread() {

    final ArrayHolder holder = new ArrayHolder();

    Runnable r = new Runnable() {
        @Override
        public void run() {
            holder.arr = getArray(); // arr assignment
        }
    };
    new Thread(r).start();
    return holder;
}

ArrayHolder h = startThread();
char arrNew[] = h.arr; 
```

请注意，这`h.arr`会随时间改变，所以你第一次调用它时它很可能会返回`null`

# javascript - CodeMirror 可以显示 Markdown 换行符吗？

> ID：15806062
> 
> 赞同：2
> 
> 时间：2013-04-04T08:25:15.990
> 
> 标签：javascript, markdown, codemirror

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T06:42:21.113

Here's a simple overlay that will style trailing whitespace:

```
editorInstance.addOverlay({
  token: function(stream) {
    if (stream.match(/^\s+$/)) return "trailing-whitespace";
    stream.match(/^\s*\S*/);
    return null;
  }
}); 
```

Then add a CSS rule like this to make it actually visible:

```
.cm-trailing-whitespace { color: #f80; text-decoration: underline; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-18T09:14:08.967

I wrote a MarkDown overlay that visualizes newlines with: · ↵ (a '·' for the first space, and '↵' for the second space). Example:

```
Violets are flowers·↵
Roses are also flowers 
```

(there are 2 trailing spaces on the first line.)

Here's a demo and links to the most recent source code files: (license: MIT)
[http://www.debiki.com/-1c250-visualizing-markdown-double-space-line-breaks](http://www.debiki.com/-1c250-visualizing-markdown-double-space-line-breaks)

Usage example: Include the above JS and CSS files, and:

```
var codeMirrorEditor = CodeMirror.fromTextArea(some-textarea, {
  mode: "markdown",
  showMarkdownLineBreaks: true,   // <---
  ...
}); 
```

Source code, as of today: CSS first, then JS:

```
------------ CSS:

/**
 * Makes the CodeMirror editor show newlines, in Markdown mode.
 *
 * Copyright (C) 2013 Kaj Magnus Lindberg (born 1979)
 *
 * Licensed under the MIT license.
 */

.cm-markdown-single-trailing-space-odd:before,
.cm-markdown-single-trailing-space-even:before,
.cm-markdown-line-break:before {
  font-weight: bold;
  color: hsl(30, 100%, 50%); /* a dark orange */
  position: absolute;
}

.cm-markdown-single-trailing-space-odd:before,
.cm-markdown-single-trailing-space-even:before {
  content: '·';
}

.cm-markdown-line-break:before {
  content: '↵';
}

------------ JS:

/**
 * Shows trailing Markdown spaces and line breaks, like so:·↵
 *
 * Copyright (C) 2013 Kaj Magnus Lindberg (born 1979)
 *
 * License: (MIT)
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */

CodeMirror.defineOption("showMarkdownLineBreaks", false,
    function(codeMirror, newValue, oldValue) {

  if (oldValue == CodeMirror.Init) {
    oldValue = false;
  }
  if (oldValue && !newValue) {
    codeMirror.removeOverlay("show-markdown-line-breaks");
  }
  else if (!oldValue && newValue) {
    codeMirror.addOverlay({
      name: "show-markdown-line-breaks",
      token: markMarkdownTrailingSpaces
    });
  }
});

function markMarkdownTrailingSpaces(stream) {

  // Possible stream.string:s and how they're handled: (`n` is text
  // with no trailing spaces)
  // ""
  // "n"    case 1
  // "_"    case 3
  // "n_"   case 1, case 3
  // "__"   case 2, case 3
  // "n__"  case 1, case 2, case 3
  // "___"  case 2, case 3
  // "n___" case 1, case 2, case 3

  // Returns separate CSS classes for each trailing space;
  // otherwise CodeMirror merges contiguous spaces into
  // one single <span>, and then I don't know how to via CSS
  // replace each space with exact one '·'.
  function singleTrailingSpace() {
    return stream.pos % 2 == 0 ?
      "markdown-single-trailing-space-even" :
      "markdown-single-trailing-space-odd";
  };

  if (!stream.string.length) // can this happen?
    return null;

  // Case 1: Non-space characters. Eat until last non-space char.
  var eaten = stream.match(/.*[^ ]/);
  if (eaten)
    return null;

  // Case 2, more than one trailing space left before end-of-line.
  // Match one space at a time, so each space gets its own
  // `singleTrailingSpace()` CSS class. Look-ahead (`(?=`) for more spaces.
  if (stream.match(/ (?= +$)/))
    return singleTrailingSpace();

  // Case 3: the very last char on this line, and it's a space.
  // Count num trailing spaces up to including this last char on this line.
  // If there are 2 spaces (or more), we have a line break.
  var str = stream.string;
  var len = str.length;
  var twoTrailingSpaces = len >= 2 && str[len - 2] == ' ';
  stream.eat(/./);
  if (twoTrailingSpaces)
    return "markdown-line-break";
  return singleTrailingSpace();
};

// vim: et ts=2 sw=2 list 
```

# ios - UIActivityController 在设备和模拟器上的行为不同

> ID：15806065
> 
> 赞同：1
> 
> 时间：2013-04-04T08:25:22.413
> 
> 标签：ios, facebook, twitter, ios6, weibo

我向我的应用程序添加了一个activityViewController，如下所示，传入一个图像

```
UIActivityViewController *avc = [[UIActivityViewController alloc]initWithActivityItems:[NSArray arrayWithObjects:img,nil] applicationActivities:[NSArray arrayWithObjects:nil]];
        [self presentModalViewController:avc animated:YES];
        [avc release]; 
```

**在模拟器上（推特、脸书和微博账号都没有配置）：**

选项邮件、推特、脸书、微博、分配给联系人、保存到相机胶卷、打印和复制默认显示。

**但在设备上：**

在我的应用程序中：twitter、facebook 和 weibo 仅显示帐户是否已配置。

在 safari 中：无论是否配置了帐户，都可以使用 twitter、facebook 和 weibo 选项。

我期望我的应用程序中的行为与 safari 相同。我错过了一个特定的步骤吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-26T08:10:38.773

好的，我已经找到了问题所在。

UIActivityViewController 中显示的选项完全取决于要共享的项目的类型。例如，如果有视频，则不会显示 Facebook 或 twitter 选项。但如果是图片和标题，肯定会显示相关选项。

以下将显示邮件、推特、Facebook、assignToContact、保存到相机胶卷、打印、复制等应用程序

```
// Create the content
NSString *message = @"The Upcoming App Scribble Talk";
UIImage *imageToShare = [UIImage imageNamed:@"createbtn.png"];

NSArray *objectsToShare = [NSArray arrayWithObjects:message, image, nil]; 
```

但是，以下应仅提供相机胶卷、邮件或副本。

```
NSString *message = @"The Upcoming App Scribble Talk";
NSString *videoToShare = @"myFirsScribble.mov";
NSURL *videoPath = [NSURL fileURLWithPath:videoToShare];

NSArray *objectsToShare = [NSArray arrayWithObjects:message, videoPath, nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T09:33:59.623

我认为您只想在 UIActivityViewController 中显示某些特定服务。您可以将调用的一个属性`excludedActivityTypes`定义如下，以避免某些默认活动。

```
UIActivityViewController *yourvc = [[UIActivityViewController alloc]initWithActivityItems:[NSArray arrayWithObjects:img,nil] applicationActivities:[NSArray arrayWithObjects:nil]];
yourvc.excludedActivityTypes = @[UIActivityTypePostToWeibo,UIActivityTypePrint,UIActivityTypeMail,UIActivityTypeCopyToPasteboard];//Try this code in simulator.. you can only see FB & Twitter.  
        [self presentModalViewController:yourvc animated:YES];
        [avc release]; 
```

同样，您可以从默认 UIActivityViewController 中排除..

# python - 我的 str(float) 在直方图字典转换时被破坏，我该如何阻止它？

> ID：15806066
> 
> 赞同：0
> 
> 时间：2013-04-04T08:25:22.687
> 
> 标签：python, dictionary, histogram

例如，当尝试对数字列表（以 str 格式）进行直方图时，我的所有数字都会被分解

```
a = ['1','1.5','2.5'] 
```

运行我的直方图函数后，我的字典看起来像

```
{'1': 2, '2': 1, '5': 2, '.': 2} 
```

我的直方图函数是

```
def histogram(a):
    d = dict()
    for c in a:
        d[c] = d.get(c,0)+1

    return d 
```

我正在为学校做一个项目并将所有内容都编码，但是当我开始执行模式部分并且我使用不是专门为 int 的数字时，我得到了上述返回如何调整/更改它以便它接受字符串与在 Windows 7x64 上键入的 Python 2.7 完全相同

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T08:29:48.760

您可以将每个字符串元素转换为浮点数，然后再将其传递给您的直方图函数。

```
a = ['1','1.5','2.5']

a = [float(i) for i in a]

def histogram(a):
    d = dict()
    for c in a:
        d[c] = d.get(c,0)+1

    return d

print histogram(a) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T08:40:08.317

您的列表定义中可能存在错误。运行你的代码我得到

```
{'1': 1, '1.5': 1, '2.5': 1} 
```

如果我改变`a`from的定义

```
a = ['1','1.5','2.5'] 
```

到

```
a = '1' '1.5' '2.5' 
```

我得到了你向我们展示的输出。

因此，请仔细检查您的列表是如何定义的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T10:10:09.637

你可以使用这样的东西：

```
>>> a = ['1','1.5','2.5']
>>> dict.fromkeys(a, 0)
{'1': 0, '1.5': 0, '2.5': 0} 
```

现在您可以遍历键来设置相应的值。

我使用以下 dict 理解来减少我的工作。

```
>>> {key: float(key)+1 for key in a}
{'1': 2.0, '1.5': 2.5, '2.5': 3.5} 
```

请享用 ：）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T03:52:38.657

histgram 函数确实按照它的编写方式工作。但是，如果您无意中 .join() 列出了您的直方图，则使用直方图生成的对象。例如......`t = ['1.0','2.0','2.5']`然后 `s = s.join(t)`s 将是 == '1.02.02.5' 并且直方图会将小数作为切片中的值计算。我的问题是我在调用直方图之前放置了一个 .join() 。我向在此浪费任何实时时间的任何人表示歉意。

# javascript - 创建无操作的表单按钮

> ID：15806069
> 
> 赞同：0
> 
> 时间：2013-04-04T08:25:30.953
> 
> 标签：javascript, forms, button, submit

我有一个简单的形式的按钮：

```
<input type="image" src="/img/search_ws.png" onClick="if (emptySearchField == true) doNothing()" id="search_btn" /> 
```

如果条件 ( `emptySearchField == true`) 按钮应该什么都不做，否则我们提交表单

我将如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T08:29:13.910

我认为 return false 会这样做

```
onClick="if (emptySearchField == true) return false;" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T08:31:42.233

```
<input type="image" src="/img/search_ws.png" onClick="if (emptySearchField == true) return false;" id="search_btn" /> 
```

# objective-c - 在 Objective-c 中重写 setter。为什么检查等于参数

> ID：15806070
> 
> 赞同：2
> 
> 时间：2013-04-04T08:25:34.980
> 
> 标签：objective-c, getter-setter

经常找到像这样的自定义 setter sintaxis：

```
- (void)setParentCatalog:(Catalog *)parentCatalog {
    if (_parentCatalog != parentCatalog) { //???
        _parentCatalog = parentCatalog;
        [self refresh];
    }
} 
```

为什么我要检查？

```
if (_parentCatalog != parentCatalog) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T08:30:54.283

这将检查两者是否`_parentCatalog`和`parentCatalog`都指向相同的内存位置。

如果两者都是同一个对象，则无需设置 objectValue。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T08:35:08.907

检查两者是否相等的原因是避免在不需要时执行代码。如果该方法被非常频繁地调用，这可能会带来性能优势。在非 ARC 下，您的代码可能看起来更像这样：

```
- (void)setParentCatalog:(Catalog *)parentCatalog {
    if (_parentCatalog != parentCatalog) {
        [_parentCatalog release];
        [parentCatalog retain];

        _parentCatalog = parentCatalog;

        [self refresh];
    }
} 
```

因此，通过检查您收到的实际上是一个新值，您可以避免发生保留和释放调用（ARC 仍然存在这些调用）。您也进入`[self refresh]`了那里，除非值实际发生了变化，否则这可能不需要发生。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T08:35:23.300

这里的想法是，如果传入setter的参数是已经存储在属性中的同一个对象，那么就不需要`[self refresh]`再次调用。

刷新方法通常会读取数据，对其进行处理，然后将其重新显示在应用程序的视图中。如果属性中的数据没有真正改变，则无需再次执行所有这些工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-04T08:39:02.090

这是一个取决于用例的决定。这个守卫背后的想法是防止做不必要的工作。

如果您想象自己`[self refresh]`开始了一项非常昂贵的手术，那么您将不愿意每次都这样做。因此，如果您仅在对象实际更改时才这样做，您可以节省一些工作。

当然，这很可能是您正在寻找的行为，在这种情况下，您需要将`[self refresh]`呼叫置于警卫之外。

像所有代码示例一样，您发现值得权衡实现的权衡，然后您可以更好地决定您需要什么。

# android - 在 xml 布局文件中声明片段并使用 FragmentTransaction.replace

> ID：15806071
> 
> 赞同：0
> 
> 时间：2013-04-04T08:25:42.720
> 
> 标签：android, xml, fragment

如果我在 xml 布局文件中声明一个片段，这是否意味着我不能使用任何 fragmentTransaction 方法？

我知道添加和删除方法都不能使用，但是使用替换，您不会删除片段。

我试图弄清楚这是否是我的错误的原因。

```
 FragmentManager fragmentManager = getFragmentManager();
     FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
     fragmentTransaction.remove(youTubePlayerFragment);
     fragmentTransaction.commit(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T08:28:40.320

您可以使用`fragmentTransaction`，但不能使用，`.remove()`或者`.replace()`不能删除或替换您在`XML`文件中静态添加的片段。相反，您可以`.hide()`和文件`.show()`中添加的片段`XML`来操纵它在屏幕上的存在。

# ruby - 对 gsub 中的每个插入实例使用不同的结果

> ID：15806073
> 
> 赞同：2
> 
> 时间：2013-04-04T08:25:49.780
> 
> 标签：ruby

说我的程序是这样的：

```
my_string = "I think we should implement <random_plan> instead of <random_plan>"

 def generate_random_plan

   #Some code that returns a string that is not the same every time the method is called, involving randomness.

 end

puts my_string.gsub("<random_plan>", generate_random_plan) 
```

因此，正如我所写的那样，它会打印出类似“我认为我们应该实施 H 计划而不是 H 计划”的内容。当我真正想要的是`gsub`在每次执行替换时调用该方法时，我最终会得出“我认为我们应该实施 D 计划而不是 Q 计划”。我有一个偷偷摸摸的怀疑，该`gsub`方法不是为此而构建的，而且无法完成，所以你能建议最简单的方法来实现这一点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T08:34:08.760

Ruby 的一个基本原则是“当有疑问时，尝试一个代码块”。事实上，`gsub()`它的第二个参数接受一个代码块来代替字符串。

这是一个类似于您正在寻找的示例：

```
'axbxcxdxe'.gsub( 'x' ) { rand(9) } 
```

试试这个代码，`irb`你会得到 x 的随机数字：

```
a0b6c0d3e 
```

替换代码块是一个强大的功能，特别是因为它接收原始匹配的字符串作为参数。作为一个人为的示例，假设您只想将字符串中的元音转换为大写：

```
def vowelup( s )
    s.gsub( /[aeiouy]/ ) { |c| c.upcase }
end

print vowelup( 'Stack Overflow' ) 
```

这打印：

```
StAck OvErflOw 
```

JavaScript 也具有基本相同的功能：

```
function vowelup( s ) {
    return s.replace( /[aeiouy]/g, function( c ) {
        return c.toUpperCase();
    });
}

console.log( vowelup('Stack Overflow') ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T08:35:43.893

`gsub`接受一个块，如果给定，则在每次匹配时调用它。从中返回您的随机值。

```
my_string = "I think we should implement <random_plan> instead of <random_plan>"

def generate_random_plan s
  plans = ('A'..'Z').to_a
  s.gsub('<random_plan>') do
    plans.sample # random plan
  end
end

generate_random_plan my_string # => "I think we should implement A instead of J"
generate_random_plan my_string # => "I think we should implement Q instead of A"
generate_random_plan my_string # => "I think we should implement Z instead of H" 
```

# c# - c# winrt如何等待异步函数完成

> ID：15806078
> 
> 赞同：0
> 
> 时间：2013-04-04T08:26:03.947
> 
> 标签：c#, windows-runtime

我有从网络摄像头获取照片的代码。我需要编写一个机制来完成这个过程。我该怎么做呢？我有以下代码：

```
ImageEncodingProperties imageProperties = ImageEncodingProperties.CreateJpeg();
var memStream3 = new Windows.Storage.Streams.InMemoryRandomAccessStream();
var mediaCaptureMgr1 = new MediaCapture();
await mediaCaptureMgr1.InitializeAsync();
mediaCaptureMgr1.SetPreviewMirroring(true);
await mediaCaptureMgr1.CapturePhotoToStreamAsync(imageProperties, memStream3);
await memStream3.FlushAsync();
memStream3.Seek(0);
WriteableBitmap wb1 = new WriteableBitmap(320, 240);
wb1.SetSource(memStream3);
//1
while (true)
{
    await Task.Delay(TimeSpan.FromSeconds(0.1));
    //if CapturePhotoToStreamAsync finished? OR memStream3 not null?
    //break;
}
//2 
```

如果我在 //1 开始对 wb1 进行任何操作，我将无法工作，因为 wb1 = null。如果我在 //2 开始做 wb1! = null 因为我等到所有异步功能都完成了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T14:52:33.573

而不是`wb1.SetSource(memStream3);`你应该打电话`await wb1.SetSourceAsync(memStream3);`，一切都应该很好。否则，您可以设置`var wb1 = new WriteableBitmap(1, 1);`并等待，直到完成`wb1.PixelWidth`时大于 1 `SetSource`，但是这种带有`Task.Delay`轮询的方法不是最理想的。

# php - 如何使用数据库值检查两个日期之间的日期是否存在

> ID：15806082
> 
> 赞同：0
> 
> 时间：2013-04-04T08:26:13.727
> 
> 标签：php

示例：我必须检查这些日期：-> from= `15 March 2013` &`15 April 2013` 在以下日期之间，无论是否有任何日子在这两个日期之间。

## 以下来自 db 表的数据

```
#       from date            to-date
-----------------------------------------
1     01 April 2013         30 April 2013   //here we will find as falling
2     01 May 2013           15 May 2013   
3     01 June 2013          20 June 2013 
```

我只知道以下技术可用于单次日期检查，但我不知道如何比较 2 天。

```
// set some example data
$referenceDate = '01 April 2013';
$fromDate = '01 January 2013';
$toDate = '01 June 2013';

// convert dates to timestamps (strings to integers)
$referenceTimestamp = strtotime( $referenceDate );
$fromTimestamp = strtotime( $fromDate );
$toTimestamp = strtotime( $toDate );

// isBetween is Boolean TRUE if reference date is greater or equal fromDate and smaller or       
  equal toDate
$isBetween = $referenceTimestamp >= $fromTimestamp and $referenceTimestamp <= $toTimestamp; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T08:33:58.810

如果您使用的是 mysql 数据库，则可以使用*BETWEEN 。*

```
SELECT * FROM `dt_tb` WHERE year( date_column ) between 2004 and 2005 
```

“date_column”是一个日期字段，“year”表示它只查看年份。对于完整的日期检查，试试这个：

```
SELECT * from `dt_tb` WHERE date_column BETWEEN "2001-01-05" AND"2001-01-10"; 
```

# java - org.postgresql.util.PSQLException：连接尝试失败

> ID：15806083
> 
> 赞同：30
> 
> 时间：2013-04-04T08:26:29.260
> 
> 标签：java, web-services, postgresql, jdbc

我正在使用带有**JDBC连接的 java Web 服务（** **apache 轴**）连接到 postgres 数据库以获取数据。但是在大多数情况下，我突然遇到了一个异常，有时它工作正常。在这里，我使用了许多准备好的语句。我的示例代码是**`org.postgresql.util.PSQLException: The connection attempt failed.`**

 **```
Connection connection=null;
try
{
    Class.forName(driver);
    connection = DriverManager.getConnection(url, username, password);
    ps1=connection.prepareStatement("select * from emp");
    rs1=ps1.executeQuery();
    while(rs1.next())
    {            
        ps2=connection.prepareStatement("select * from dept where dept_no="+rs1.getInt("dept_no"));
        rs2=ps2.executeQuery();
        while(rs2.next())
        {
            ................
            ................
        }
    }
}
catch(Exception e)
{
    System.out.println("Exception occurred is"+e.getMessage());            
}
finally
{
    try{if(rs1!=null)rs1.close();}catch(Exception e){ System.out.println("*1closing error--->"+e);}
    try{if(ps1!=null)ps1.close();}catch(Exception e){ System.out.println("**1closing error--->"+e);}
    try{if(rs2!=null)rs2.close();}catch(Exception e){ System.out.println("*2closing error--->"+e);}
    try{if(ps2!=null)ps2.close();}catch(Exception e){ System.out.println("**2closing error--->"+e);}
    try{if(connection!=null)connection.close();}catch(Exception e){ System.out.println("***closing error--->"+e);}
} 
```

关于此异常的堆栈跟踪是

```
org.postgresql.util.PSQLException: The connection attempt failed.
    at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:137)
    at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:66)
    at org.postgresql.jdbc2.AbstractJdbc2Connection.<init>(AbstractJdbc2Connection.java:124)
    at org.postgresql.jdbc3.AbstractJdbc3Connection.<init>(AbstractJdbc3Connection.java:30)
    at org.postgresql.jdbc3.Jdbc3Connection.<init>(Jdbc3Connection.java:24)
    at org.postgresql.Driver.makeConnection(Driver.java:386)
    at org.postgresql.Driver.connect(Driver.java:260)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at com.codon.service.WareHouseServer.get_picks(WareHouseServer.java:7415)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.axis.providers.java.RPCProvider.invokeMethod(RPCProvider.java:397)
    at org.apache.axis.providers.java.RPCProvider.processMessage(RPCProvider.java:186)
    at org.apache.axis.providers.java.JavaProvider.invoke(JavaProvider.java:323)
    at org.apache.axis.strategies.InvocationStrategy.visit(InvocationStrategy.java:32)
    at org.apache.axis.SimpleChain.doVisiting(SimpleChain.java:118)
    at org.apache.axis.SimpleChain.invoke(SimpleChain.java:83)
    at org.apache.axis.handlers.soap.SOAPService.invoke(SOAPService.java:454)
    at org.apache.axis.server.AxisServer.invoke(AxisServer.java:281)
    at org.apache.axis.transport.http.AxisServlet.doPost(AxisServlet.java:699)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at org.apache.axis.transport.http.AxisServletBase.service(AxisServletBase.java:327)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:857)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.net.SocketException: Connection reset
    at java.net.SocketInputStream.read(Unknown Source)
    at org.postgresql.core.VisibleBufferedInputStream.readMore(VisibleBufferedInputStream.java:135)
    at org.postgresql.core.VisibleBufferedInputStream.ensureBytes(VisibleBufferedInputStream.java:104)
    at org.postgresql.core.VisibleBufferedInputStream.read(VisibleBufferedInputStream.java:73)
    at org.postgresql.core.PGStream.ReceiveChar(PGStream.java:259)
    at org.postgresql.core.v3.ConnectionFactoryImpl.doAuthentication(ConnectionFactoryImpl.java:254)
    at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:95)
    ... 37 more 
```

我检查了 postgres 日志，在不同的情况下发现了以下语句

1.WARNING：worker启动时间过长；取消。

2.could not reattach to shared memory (key=...., addr=.....): 487.

3.无法从客户端接收数据：由于目标机器主动拒绝，无法建立连接。

4.客户端连接出现意外的EOF。

请帮助我。谢谢提前

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-04T11:28:27.580

真正的问题是：

```
Caused by: java.net.SocketException: Connection reset
    at java.net.SocketInputStream.read 
```

当 Java 尝试从中读取时，连接已关闭。这可能是由以下原因引起的：

*   正在重启的 PostgreSQL 服务器
*   您连接的 PostgreSQL 后端被终止
*   您连接到的 PostgreSQL 后端崩溃
*   狡猾的网络连接
*   行为不端的状态防火墙
*   NAT 防火墙/路由器的 NAT 连接表的空闲连接超时

......可能还有更多。检查 PostgreSQL 服务器日志，看看那里是否有任何信息；还可以考虑使用 Wireshark 之类的工具进行一些网络跟踪。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-02-28T03:03:25.730

Try chekin Postgresql version, in my case I deployed my app with:

```
 <dependency>
        <groupId>org.postgresql</groupId>
        <artifactId>postgresql</artifactId>
        <version>42.2.16</version>
    </dependency> 
```

But in local I used 42.2.18 and worked fine, so I din't know after checking version, so you should try another versions maybe.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-26T09:44:08.543

**为我修复：**

跳到`pg_hba.conf`文件并在 IPV4 连接下将其更改`127.xxxx`为`0.0.0.0/0`

仔细检查：跳上`postgresql.conf` 并更改`listenaddresses`为`*`（我确定您知道您需要先删除开始`#`以使其正常工作）

祝你好运！**

# wso2 - JDBC属性查找器

> ID：15806085
> 
> 赞同：-2
> 
> 时间：2013-04-04T08:26:34.493
> 
> 标签：wso2

知道如何在 WSO2 Identity Server 4.0.0 中插入 JDBCAttribute finder 吗？任何参考也会有所帮助

有一些在线资料指向较低版本的 IS，但我特别在寻找 4.0.0

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:54:48.060

您需要按如下方式更改 entitlement.properties。

```
PIP.AttributeDesignators.Designator.1=org.wso2.carbon.identity.entitlement.pip.DefaultAttributeFinder
PIP.AttributeDesignators.Designator.2=org.wso2.identity.samples.entitlement.pip.jdbc.JDBCAttributeFinder 
```

还使类公共类 JDBCAttributeFinder 扩展 AbstractPIPAttributeFinder

记得添加

```
@Override
public String getModuleName() {
    // TODO Auto-generated method stub
    return null;
} 
```

在这个班级

# xml - VB.Net - XML - 比较子元素名称以填充文本框

> ID：15806089
> 
> 赞同：2
> 
> 时间：2013-04-04T08:26:47.090
> 
> 标签：xml, vb.net

我正在 VB.Net 中开发一个应用程序。我是初学者，我正在努力解决这个问题：

我想将子元素的名称读入我的 xml 文件并进行比较。如果这个值匹配，我将用这个元素的值填充一个文本框。请在我的程序的这一部分下面找到（经过改进编辑）：

```
Private Sub ReadXMLFile(path As String)
Dim reader As XmlTextReader = New XmlTextReader(path)
Dim elements As ArrayList = New ArrayList

Do While (reader.Read())
    Select Case reader.Name
        Case "DistributorName"
            Do While (reader.Read())
                If XmlNodeType.Text Then
                    txtDistrName.Text = reader.Value
                End If
            Loop
    End Select
End Sub 
```

仅当元素名称为“DistributorName”时，我才必须使用元素的值填充文本框 txtDistrName。

感谢 Sam Rad 的帮助，现在它工作正常。

何塞。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T09:47:23.563

你需要改变你的`Case`陈述。我认为您将其误认为是`If`：

```
Private Sub ReadXMLFile(path As String)
    Dim reader As XmlTextReader = New XmlTextReader(path)

    Do While (reader.Read())
        Select Case reader.Name
            Case "DistributorName" // <------ Here
                txtDistrName.Text = reader.Value
        End Select
    Loop
end sub 
```

对于您的第二个问题，我已将循环更改为：

```
 Dim reader As XmlTextReader = New XmlTextReader("yourXmlPath")
    reader.WhitespaceHandling = WhitespaceHandling.None

    Do While (reader.Read())
        Select Case reader.NodeType
            Case XmlNodeType.Element
                If reader.Name = "DistributorName" Then
                    txtDistrName.Text = reader.ReadElementContentAsString()
                End If                          
        End Select
    Loop 
```

# jquery - 更改正则表达式以在 jquery 中获取 QueryString 值

> ID：15806090
> 
> 赞同：0
> 
> 时间：2013-04-04T08:26:55.503
> 
> 标签：jquery, regex, query-string

我获取查询字符串的功能是：

```
GetID: function(name) {
    return decodeURI((RegExp(name + '=' + '(.+?)(&|$)').exec(location.search) || [, null])[1]);
     }, 
```

当我得到一个网址时：

```
http://localhost/testsite/testB.aspx?ID=12 
```

并调用这个函数它的 return `12`。

但现在我的 url 模式发生了变化。

当前的网址格式是：

```
 http://localhost/testsite/testB.aspx/12 
```

现在我尝试更改正则表达式并替换`?`为`/`和其他东西以获得期望值`12`。

但我没有成功。我的知识`regex`不太好，所以帮助修改我的正则表达式以获得期望值。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T08:33:16.183

你以前的正则表达式根本不关心`?`你试图替换的`/`（因为我假设你的*名字*var 包含*ID*）。
关于您的 URL 的信息如此之少无法做很多事情（您切换到获取 URL 的参数，它们根本不以相同的方式工作，您的 URL 的一般形式是什么？），但我会试一试：

```
/\d+$/ 
```

只会在您的 URL 末尾为您提供数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T08:36:03.177

要`12`在两个 url 字符串中获取数字：

```
var myStr = "http://localhost/testsite/testB.aspx/12"; 
```

或者

```
var myStr = "http://localhost/testsite/testB.aspx?ID=12"; 
```

您只需要使用 1 个正则表达式：

```
var number = parseInt(myStr.match(/[0-9]+(?!.*[0-9])/), 10); 
```

或更简单：

```
var number = parseInt(myStr.match(/\d+$/), 10); 
```

演示：http: [//jsfiddle.net/RPjaq/](http://jsfiddle.net/RPjaq/)

演示：http: [//jsfiddle.net/RPjaq/1/](http://jsfiddle.net/RPjaq/1/)

# c++ - C++ windows 应用程序的“错误消息显示”最佳实践

> ID：15806092
> 
> 赞同：-1
> 
> 时间：2013-04-04T08:27:00.273
> 
> 标签：c++, winforms, user-interface, user-experience

在 Windows 应用程序中显示错误消息可以通过多种方式进行。

1.  `OK`带有按钮的默认错误消息弹出窗口。
2.  带有错误消息的自定义对话框（可能带有`cancel`和`ok`按钮）
3.  在其他元素处于活动状态时显示窗口中的某个位置。
4.  `ok`用透明面板遮住窗口并用按钮显示错误（类似[这样](http://1.bp.blogspot.com/-nDDrm68P10g/TV9EHBozRnI/AAAAAAAAAP8/RZX5jWSyHQI/s1600/Form.jpg)，但不完全是）。

那么哪种方法最适合错误信息的显示。我们必须考虑向用户显示错误消息或任何最佳实践的事项是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T08:31:57.077

这取决于错误的严重程度。
如果您对 a 的输入有误`Textfield`，您可能会显示带有红色字母的标签，其中显示“错误”或类似内容。对于更严重的错误，您可能会`MessageBox`在红底上显示一个带有漂亮白色十字的 a，表示确实出了问题。
考虑到只是轻微的输入错误弹出窗口可能会分散用户的注意力，甚至会激怒他/她。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T08:31:12.937

大多数语言都为您提供了使消息样式错误的选项。公认的做法似乎是一个好的按钮，只有一个错误消息“样式”。通常这意味着该图标是一个感叹号或类似的东西。

# php - 通过表单发布一组图像

> ID：15806097
> 
> 赞同：0
> 
> 时间：2013-04-04T08:27:17.520
> 
> 标签：php, javascript, html, forms, post

我有一个动态创建的 div 数组，每个 div 里面都有图像，并希望通过表单发布图像。

目前我没有收到任何警报

添加了一个 var_dump($_POST) 并得到了这个结果

```
 array(3) { 
   ["imagename"]=> array(1) 
         { 
        [5]=> string(35) "upload_pic/thumbnail_1365064772.jpg" 
         } 
       ["id"]=> array(1)
         { 
        [5]=> string(1) "5" 
         } 
       ["box_type"]=> array(1) 
         { 
        [5]=> string(5) "image" 
         } 
       } 
```

如何将其放入 for 循环中？

任何帮助，将不胜感激。

这是我的代码：

javascript:

```
function NewImgBox(imge, id)
        {
            id=id+i;
        var new1div = document.createElement('div');
        new1div.setAttribute('id', id);
        new1div.setAttribute('class', 'dragbox');
        new1div.setAttribute('iterate',i);
        new1div.style.position = "relative";
        new1div.style.top = p;
        new1div.style.left = p;
        new1div.style.cursor='move';
         new1div.innerHTML = "</div><br><input type='image' value='"+i+"' disabled name='image["+i +"]' src='"+imge+"' id='"+i+"'class='image1' style='width:300px; height:300px;'>";
        new1div.innerHTML=new1div.innerHTML+"<br><input type='hidden' value='"+imge+"' name='imagename["+i+"]'>"; 
        new1div.innerHTML=new1div.innerHTML+"<br><input type='hidden' value='"+i+"' name='id["+i+"]'><br><input name='box_type["+i+"]' type='hidden' value='image'/>";          
        document.getElementById("frmMain").appendChild(new1div);

        } 
```

html:

```
<form id="frmMain" name="frmMain" enctype="multipart/form-data" action="dynamic_div6.php" method="post">    
   <input id="btn2" type="button" value="Add New Image" onClick="popitup('upload_crop.php');"/>
   <input type="submit" value="Save Page"  >

   <div id="content"> 
    <?
     if($new_image!='')
    {
    ?><script>NewImgBox('<? echo $new_image; ?>','draggable')</script><?    
     $new_image=''; 
    }
    ?> 
   </div>
</form> 
```

php:

```
 if($_SERVER['REQUEST_METHOD'] == "POST")  
  {
    foreach($_POST['image'] as $j => $value)
    {

        $imagename=$_POST["imagename"][$j];
        $box_type=$_POST['box_type'][$j];
        $box_id=$_POST['id'][$j];

        ?><script>alert("imagename=<? echo $imagename; ?>");</script><?
        ?><script>alert("box_id=<? echo $box_id; ?>");</script><?
        ?><script>alert("box_type=<? echo $box_type; ?>");</script><?
    }   
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:25:26.590

意识到for循环应该是

```
 foreach($_POST['imagename'] as $j => $value) 
```

现在它可以工作了

# android - 如何动态地将无线电组添加到列表视图？（或可扩展的列表视图）

> ID：15806106
> 
> 赞同：1
> 
> 时间：2013-04-04T08:27:44.283
> 
> 标签：android, dynamic, android-listview, radio-button, expandablelistview

我想创建一个反馈表单，以便在可展开的列表视图而不是子列表中有单选按钮选项，列表中的单选按钮和元素的数量是动态的。我找到了很多带有单选按钮的简单列表视图的教程和工作示例，但没有什么能满足我的目的。

任何有关动态集成可扩展列表视图和单选按钮的帮助将不胜感激！

问候，加里马。

# java - Mediaplayer 应该只播放音频文件的最后几秒

> ID：15806108
> 
> 赞同：0
> 
> 时间：2013-04-04T08:27:48.787
> 
> 标签：java, android, media-player, seconds, playsound

我想实现一个只播放 Audiofile 的最后 5 秒（至多超过 5 秒）的函数。Mediaplayer 是否以某种方式支持这一点？

我知道如何正常播放音频文件 + 我知道如何获取文件的持续时间，但是如何将 Mediaplayer 设置为只播放最后的一小部分？这意味着从音频文件中的特定时间码播放。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T08:45:56.883

实现这一点的一种方法是使用[`MediaPlayer.getDuration()`](http://developer.android.com/reference/android/media/MediaPlayer.html#getDuration%28%29)方法来获取音频文件的持续时间，然后使用[`MediaPlayer.seetTo()`](http://developer.android.com/reference/android/media/MediaPlayer.html#seekTo%28int%29)API 移动到该位置。

在您的情况下，您可以尝试`mediaPlayer.seekTo(mediaPlayer.getDuration()-(5*1000));`...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T08:47:45.483

准备好之后就可以打电话了`seekTo`。

看看这个例子：

```
this._mediaPlayer = new MediaPlayer();
this._mediaPlayer.reset();
this._mediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
this._mediaPlayer.setDataSource( _data_source_ );
this._mediaPlayer.setOnSeekCompleteListener(this);
this._mediaPlayer.prepare();
this._mediaPlayer.start();
/* Seeking to 1 minute */
this._mediaPlayer.seekTo(60 * 1000);
/* Issue a start in the OnSeekCompleteListener */ 
```

调整此示例以获取准备好的流的持续时间并寻求持续时间 - 5 秒（在您的情况下，如果媒体至少 5 秒长）。

**但是**，似乎 Android`seekTo`在寻求无缓冲媒体时存在与使用相关的错误。看看[这个](http://code.google.com/p/android/issues/detail?id=4124)和[这个](https://stackoverflow.com/questions/3212688/mediaplayer-seekto-does-not-work-for-unbuffered-position)以获取更多信息。这个错误应该在*Android 2.2*中得到解决。

# ios - 如何在模型对象中存储许多图像？Objective-C

> ID：15806110
> 
> 赞同：0
> 
> 时间：2013-04-04T08:27:52.130
> 
> 标签：ios, objective-c, model-view-controller, structure, nsobject

我在 Objective-C 中的代码结构存在一些问题。我有一个名为 Item 的模型类（NSObject），它存储名称和描述：

```
-(id)initWithName:(NSString *)name desc:(NSString *)desc 
```

然后我有一个名为 ItemDoc 的模型，它存储图像和 Item-class。像这样：

```
-(id)initWithName:(NSString *)name desc:(NSString *)desc image:(UIImage *)image
{
    if((self = [super init]))
    {
        self.data = [[Item alloc]initWithName: name desc: desc];
        self.image = image;

    }

    return self;
} 
```

在 Appdelegate 中，我像这样创建对象（稍后我将从服务器获取数据）

```
Item *item1 = [[ItemDoc alloc] initWithName:@"Name" desc:@"NameDescription" image:[UIImage imageNamed:@"item.png"]];

Item *item2 = [[ItemDoc alloc] initWithName:@"Name2" desc:@"NameDescription2" image:[UIImage imageNamed:@"item2.png"]];

NSMutableArray *items = [NSMutableArray arrayWithObjects: item1, item2, nil]; 
```

现在我可以在我的视图中使用它来获取有关模型对象的正确信息，但我想在每个项目中存储多个图像。我不确定如何以一种好的方式做到这一点？请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T08:34:31.907

这可以通过创建图像数组来实现，例如：

```
-(id)initWithName:(NSString *)name desc:(NSString *)desc images:(NSMutableArray *)_imageArray
{
    if((self = [super init]))
    {
        self.data = [[Item alloc]initWithName: name desc: desc];
        self.imageArray = _imageArray;

    }

    return self;
} 
```

要调用它，只需将所有 UIImages 添加到数组中并使用数组初始化对象。

# java - 从 HTTP 请求中获取完整路径

> ID：15806112
> 
> 赞同：3
> 
> 时间：2013-04-04T08:28:00.517
> 
> 标签：java, path, httprequest

我想知道如何获取 HTTP 请求的完整路径。

如果有一个请求，`http://localhost:8080/path1/path2`我怎样才能得到完整的`/path1/path2`？

Using`request.getContextPath()`仅返回 /path1 部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T08:31:17.240

您需要使用[以下`getRequestURI()`方法](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getRequestURI%28%29)：

该文档是这样描述的：

> 返回此请求的 URL 从协议名称到 HTTP 请求第一行中的查询字符串的部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T08:35:04.240

您可以使用以下。

```
request.getRequestURI() 
```

你得到

> /路径1/路径2

作为结果。你明白我的意思了吗？或任何查询？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T08:37:26.607

也许您可以从请求中提取 HOST 标头，如下例所示：

[http://www.apl.jhu.edu/~hall/java/Servlet-Tutorial/Servlet-Tutorial-Request-Headers.html](http://www.apl.jhu.edu/~hall/java/Servlet-Tutorial/Servlet-Tutorial-Request-Headers.html)

然后，您可以将它与您的上下文路径连接起来。我唯一不确定的是它是否包含 https:// 以防它通过 SSL 运行，但如果你总是使用相同的协议，应该有办法找出或知道它......

问候

# bash - 从 bash 脚本运行可执行文件

> ID：15806113
> 
> 赞同：0
> 
> 时间：2013-04-04T08:28:01.053
> 
> 标签：bash, dos

如果这个问题很幼稚，我很抱歉。

是否可以在bash脚本中运行几行然后执行dos批处理文件和dos可执行文件，在完成批处理文件和可执行文件的执行后，继续执行bash脚本中的其余行？

我可以使用*dosemu*做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T08:42:43.817

bash 脚本将始终在完成任何调用的脚本或可执行文件后完成脚本。例子：

```
@echo off
echo hello
"C:\Program Files (x86)\Mozilla Firefox\firefox.exe"
echo hope you had fun browsing the web!
pause 
```

一旦 Firefox 关闭，这将始终回显最后一行代码。

# php - 使用 javascript onchange 执行 php 文件

> ID：15806115
> 
> 赞同：0
> 
> 时间：2013-04-04T08:28:10.770
> 
> 标签：php, javascript, onchange

我有一个动态创建的 dorpdown 列表，用户可以在其中选择时事通讯。我试图让它工作，所以当你从下拉列表中选择一些东西时，一个 php 文件就会被执行。我的下拉列表如下所示：

```
<?php
echo "<select id=\"NieuwsbriefSelect\" name=\"show\" onchange=\"what do I do here???  \">"; 
echo "<option size =30 selected>Select</option>";
if(mysql_num_rows($sql_result)) 
{ 
while($row = mysql_fetch_assoc($sql_result)) 
{ 
echo "<option value=\"$row[Titel]\">$row[Titel]</option>"; 
} 

} 
else {
echo "<option>No Names Present</option>";  
} 
?> 
```

我的 php 文件如下所示：

```
<?php 
ini_set('display_errors', 'On'); 
error_reporting(E_ALL); 
?>
<?php
$title = $_REQUEST["show"];
mysql_connect('localhost','root','root'); 
mysql_select_db('NAW') or die (mysql_error()); 
$strSQL = "SELECT Content from NAW.Mail where Titel = '".$title."' ";

$sql_result = mysql_query($strSQL); 

$row = mysql_fetch_assoc($sql_result);  

$file = 'nieuwsbrief.txt';

$current = urldecode($row["Content"]);

file_put_contents($file, $current);
?> 
```

目前这个： $title = $_REQUEST["show"]; 不起作用并给出错误未定义索引：显示。所以基本上我有 2 个问题：
-当我选择时事通讯时，如何让 php 文件执行？
-如何根据我选择的时事通讯从我的数据库中获取正确的数据？

我已经尝试了一些我在其他论坛等上找到的示例，但由于我几乎没有使用 javascript 的经验，所以我无法得到任何工作。如果有人能给我一个例子或把我推向正确的方向，那就太好了！如果您有任何其他问题，请在评论中提问！

***注意*** 我知道 mysql_* 已被弃用，一旦一切正常，我将更改为 PDO！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:30:44.600

使用ajax的简单方法。

```
 <?php
echo "<select id=\"NieuwsbriefSelect\" name=\"show\" onchange='hello(value)'>"; 
echo "<option size =30 selected>Select</option>";
if(mysql_num_rows($sql_result)) 
{ 
while($row = mysql_fetch_assoc($sql_result)) 
{ 
echo "<option value=\"$row[Titel]\">$row[Titel]</option>"; 
} 

} 
else {
echo "<option>No Names Present</option>";  
} 
?> 
```

比 javascript 文件是这样的

```
 function hello(value)
{
    var xmlhttp;

    if(window.XMLHttpRequest)
    {
        xmlhttp = new XMLHttpRequest();

    }
    else
    {
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange=function()
    {
        if(xmlhttp.readyState==4)
        {
            //nothing is here because you want to put the result in file
        }
    }
    xmlhttp.open("GET","yourphpcode.php?val="+value,true);
    xmlhttp.send();
} 
```

试试这个
如果出现问题，请原谅，因为我没有运行代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T08:45:09.997

在这一行

```
echo "<select id=\"NieuwsbriefSelect\" name=\"show\" onchange=\"what do I do here???  \">"; 
```

您应该在`onchange=""`属性中添加 JavaScript 代码。

例如，您可以调用一个函数，我们将其命名为`changeSelect()`（我猜）将加载 php 文件的内容。您可以通过 Ajax 做到这一点。我不会解释更多，因为这个主题非常广泛，你需要更多的研究。

我建议，如果您已更改为 PDO 或 mysqli，则通过(not )传递`titel`变量。例如，您的函数可以通过或类似的方式调用您的 php 文件（例如：“myfile.php”） 。`$_GET``$_REQUEST``changeSelect()``"myfile.php?titel="+document.getElementById("NieuwsbriefSelect").value`

# python - Python urllib2 抛出异常

> ID：15806117
> 
> 赞同：1
> 
> 时间：2013-04-04T08:28:12.730
> 
> 标签：python, web-services, urllib2

我有一个运行良好几个月的 python web-scraper 脚本。它使用 urllib2 访问远程 URL、提交数据、捕获结果等。

昨天突然 urlli2 开始在大多数（但不是全部）访问远程 URL 的尝试中抛出错误。错误是：

```
URLError: urlopen error [Errno -2] Name or service not known 
```

什么会导致 90% 的远程请求突然失败？究竟是什么`[Errno -2]`意思？？我搜索了`urllib2`文档，但没有找到真正的解释`[Errno -2]`，也在这里搜索了任何答案但没有成功。

请帮忙？

附加信息：

1.  我也可以从我自己的浏览器访问该 URL，所以它不是一个错误的 URL。
2.  我可以从我的服务器 ping 远程域，完全没有失败。
3.  正如我所提到的，它不会 100% 失败，而是大约 95%。

回溯堆栈如下所示：

```
File "/var/www/html/pylaw/http.py", line 8, in urlopen

X = urllib2.urlopen(url, data=d).read()

File "/usr/local/lib/python2.7/urllib2.py", line 126, in urlopen

return _opener.open(url, data, timeout)

File "/usr/local/lib/python2.7/urllib2.py", line 400, in open

response = self._open(req, data)

File "/usr/local/lib/python2.7/urllib2.py", line 418, in _open

'_open', req)

File "/usr/local/lib/python2.7/urllib2.py", line 378, in _call_chain
result = func(*args)

File "/usr/local/lib/python2.7/urllib2.py", line 1215, in https_open
return self.do_open(httplib.HTTPSConnection, req)

File "/usr/local/lib/python2.7/urllib2.py", line 1177, in do_open
raise URLError(err)

URLError: urlopen error [Errno -2] Name or service not known 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T01:06:54.603

答案几乎可以肯定是托管我们服务器的数据中心的网络配置问题。

问题（基本上是阻止出站 HTTP 请求）突然出现，在 60 小时内不一致，然后突然自行消失。在检查我们自己的日志时，我们还发现大约 6 个月前发生了同样的事情，但只持续了大约一个小时，没有人注意到。这次持续了 60 个小时，所以每个人都注意到了。

主机不会承认任何事情，但一切都指向他们数据中心的防火墙或路由器问题。房东的客户服务代表甚至不会意识到任何此类更改，因此他们当然无法确认或否认。从一切正常到大部分停止工作到一切重新开始工作，我们的服务器上没有任何变化。在过去，他们会每隔几天就重新启动我们的服务器。

我想我们需要搬家，嗯？

# ruby - 检查 ActiveRecord::Base 实例的测试代码

> ID：15806122
> 
> 赞同：0
> 
> 时间：2013-04-04T08:28:21.523
> 
> 标签：ruby, database, testing, activerecord

我正在测试我编写的 gem 中的 ActiveRecord::Base 实例。这使得没有数据库的测试非常困难，因为我的测试对象必须属于 ActiveRecord::Base 类，当连接不存在时会抛出错误 ActiveRecord::ConnectionNotEstablished

有问题的条件包含以下内容：

```
object.instance_of? ActiveRecord::Base 
```

我该如何测试呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:51:24.370

我认为您期待这样的事情：[伪造没有 db 的活动记录模型](https://stackoverflow.com/questions/7586813/fake-an-active-record-model-without-db)。

但是你为什么不为它设置一个真正的测试数据库呢？

# architecture - 选择用户选项作为扩展用例？

> ID：15806124
> 
> 赞同：0
> 
> 时间：2013-04-04T08:28:27.140
> 
> 标签：architecture, uml, software-design, use-case

我有一个很大的用例，即“管理订单”，我想将此用例扩展到更具体的用例。

当用户要求管理订单时，他可以做很多代表用例的选项，我的问题是：大用例`Extends`是新用例吗？ ![在此处输入图像描述](https://i.stack.imgur.com/JPEUr.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:18:13.090

另一种方式。具体子用例`extend`主要用例。这样看：当你想管理订单时，你总是调用主用例，但附加的行为可能会有所不同——`check order status`用例扩展了用例的核心功能`manage orders`。对于`order orders`. 在你的图中，`extend`关系方向应该是相反的。

使用规则`include`and `extend`:**总是**出现在用例中的公共部分可以被提取出来（并且可选地被其他用例使用）并被`include`更大的用例提取出来。应该提取用例中可能存在或不存在的可选部分，它们`extend`是更大的用例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T21:06:16.053

正如icepack 解释的那样，如果你想使用，`extend`那么关系就会以相反的方式绘制。但我不确定我会`extend`在这种情况下使用。

事实上，一个用例应该总是代表一个真正的功能。在这里，`Check order status`肯定`Order orders`有用例，但我不确定`Manage orders`。你确定它代表了自己的东西吗？还是只是将其他两个分组的一种方式？在第二种情况下，您应该使用包。

要回答这个问题，请想象描述用例内容的场景。如果，对于`Manage orders`，您的场景只不过是“在和之间`Check order status`进行选择`Order orders`”，那么`Manage orders`就不是用例。

# sql - 查询，检查哪里的值相同

> ID：15806126
> 
> 赞同：-1
> 
> 时间：2013-04-04T08:28:29.337
> 
> 标签：sql

我在这里有这个查询：

```
$strSQL = "SELECT formas.*, 
                  SMS_SERVISI.IDTICKET,
                  SMS_SERVISI.MBYLLUR,
                  SMS_SERVISI.time_added
             FROM formas 
        LEFT JOIN SMS_SERVISI ON 'formas.id_f' = 'SMS_SERVISI.IDTICKET' 
            WHERE (SMS_SERVISI.IDTICKET !='' or SMS_SERVISI.IDTICKET is not null)
              AND formas.sektori_pergjegjes ='K' 
         ORDER BY formas.id DESC;"; 
```

我的问题在 ON`'formas.id_f' = 'SMS_SERVISI.IDTICKET'`

它不起作用，这个值都是 varchar 类型，它会是 ie ON K3=K3 但它不起作用......也许它没有使用运算符 = 来查看两个字段是否相同。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T08:29:46.123

尝试将其更改为（删除“'”单引号符号）

```
ON formas.id_f = SMS_SERVISI.IDTICKET 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T08:30:31.237

删除子句周围的单引号

```
ON formas.id_f = SMS_SERVISI.IDTICKET 
```

否则，您只是对字符串进行字符串比较，`formas.id_f`而`SMS_SERVISI.IDTICKET`不是字段保存的值...

# xcode4 - Xcode4 上的 Sphero 构建失败

> ID：15806128
> 
> 赞同：1
> 
> 时间：2013-04-04T08:28:31.460
> 
> 标签：xcode4, sphero-api

我正在尝试为“ `Sphero`”创建一个用于 IOS 的应用程序，并且我想测试该`HelloWorld`示例，但是在创建一个新项目后，我单击了构建，但它失败了，我遇到了 4 个问题：

1）使用未声明的标识符' `viewDidLoad`'：

```
 -(void)viewDidLoad { 
```

2) 在消息发送表达式开始时缺少`"["`这是在以下代码行中，xcode 想要将 [ 放在第二个“选择器”之前

```
 [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(appDidBecomeActive:) name:UIApplicationDidBecomeActiveNotification object:nil]; 
```

3）错误的接收器类型`'SEL'` （与上面相同的行）

4）预期的外部声明：

最后一个大括号出现错误。

```
-(void)viewDidLoad {
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
-(void)viewDidLoad {
    [super viewDidLoad];

    /*Register for application lifecycle notifications so we known when to connect and disconnect from the robot*/
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(appDidBecomeActive:) name:UIApplicationDidBecomeActiveNotification object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(appWillResignActive:) name:UIApplicationWillResignActiveNotification object:nil];

    /*Only start the blinking loop when the view loads*/
    robotOnline = NO;

    calibrateHandler = [[RUICalibrateGestureHandler alloc] initWithView:self.view];
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T08:36:45.027

用这个替换你的代码。

```
-(void)viewDidLoad {
    [super viewDidLoad];

    /*Register for application lifecycle notifications so we known when to connect and disconnect from the robot*/
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(appDidBecomeActive:) name:UIApplicationDidBecomeActiveNotification object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(appWillResignActive:) name:UIApplicationWillResignActiveNotification object:nil];

    /*Only start the blinking loop when the view loads*/
    robotOnline = NO;

    calibrateHandler = [[RUICalibrateGestureHandler alloc] initWithView:self.view];
} 
```

# .htaccess - Drupal 7 RewriteRule 不起作用

> ID：15806131
> 
> 赞同：1
> 
> 时间：2013-04-04T08:28:55.557
> 
> 标签：.htaccess, theming, drupal-commerce

我的基本页面访问，即：mysite/aboutus，运行良好。

但是由于要求，除了主页之外的每个页面都需要以培训为前缀。

因此，如果我需要访问 mysite/aboutus，那么现在我需要访问 mysite/training/aboutus。

我通过重写 mypage.tpl.php 几乎编辑了我需要的每个页面，因此更改所有路径会很麻烦。

我尝试在项目文件夹中编辑 .htaccess，以下是我的一些尝试：

```
RewriteRule ^/training/about$ /about
RewriteRule ^(.*)/training/about$ $1/about 
```

没有工作。

有人能指出我正确的方向吗？

干杯！

```
 #
# Apache/PHP/Drupal settings:
#

# Protect files and directories from prying eyes.
<FilesMatch "\.(engine|inc|info|install|make|module|profile|test|po|sh|.*sql|themes|tpl(\.php)?|xtmpl)$|^(\..*|Entries.*|Repository|Root|Tag|Template)$">
  Order allow,deny
</FilesMatch>

# Make Drupal handle any 404 errors.
ErrorDocument 404 /index.php

# Set the default handler.
DirectoryIndex index.php index.html index.htm

# Override PHP settings that cannot be changed at runtime. See
# sites/default/default.settings.php and drupal_environment_initialize() in
# includes/bootstrap.inc for settings that can be changed at runtime.

# PHP 5, Apache 1 and 2.
<IfModule mod_php5.c>
  php_flag magic_quotes_gpc                 off
  php_flag magic_quotes_sybase              off
  php_flag register_globals                 off
  php_flag session.auto_start               off
  php_value mbstring.http_input             pass
  php_value mbstring.http_output            pass
  php_flag mbstring.encoding_translation    off
</IfModule>

# Requires mod_expires to be enabled.
<IfModule mod_expires.c>
  # Enable expirations.
  ExpiresActive On

  # Cache all files for 2 weeks after access (A).
  ExpiresDefault A1209600

  <FilesMatch \.php$>
    # Do not allow PHP scripts to be cached unless they explicitly send cache
    # headers themselves. Otherwise all scripts would have to overwrite the
    # headers set by mod_expires if they want another caching behavior. This may
    # fail if an error occurs early in the bootstrap process, and it may cause
    # problems if a non-Drupal PHP file is installed in a subdirectory.
    ExpiresActive Off
  </FilesMatch>
</IfModule>

# Various rewrite rules.
<IfModule mod_rewrite.c>
  RewriteEngine on

  # Block access to "hidden" directories whose names begin with a period. This
  # includes directories used by version control systems such as Subversion or
  # Git to store control files. Files whose names begin with a period, as well
  # as the control files used by CVS, are protected by the FilesMatch directive
  # above.
  #
  # NOTE: This only works when mod_rewrite is loaded. Without mod_rewrite, it is
  # not possible to block access to entire directories from .htaccess, because
  # <DirectoryMatch> is not allowed here.
  #
  # If you do not have mod_rewrite installed, you should remove these
  # directories from your webroot or otherwise protect them from being
  # downloaded.
  RewriteRule "(^|/)\." - [F]

  # If your site can be accessed both with and without the 'www.' prefix, you
  # can use one of the following settings to redirect users to your preferred
  # URL, either WITH or WITHOUT the 'www.' prefix. Choose ONLY one option:
  #
  # To redirect all users to access the site WITH the 'www.' prefix,
  # (http://example.com/... will be redirected to http://www.example.com/...)
  # uncomment the following:
  # RewriteCond %{HTTP_HOST} !^www\. [NC]
  # RewriteRule ^ http://www.%{HTTP_HOST}%{REQUEST_URI} [L,R=301]
  #
  # To redirect all users to access the site WITHOUT the 'www.' prefix,
  # (http://www.example.com/... will be redirected to http://example.com/...)
  # uncomment the following:
  # RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
  # RewriteRule ^ http://%1%{REQUEST_URI} [L,R=301]

  # Modify the RewriteBase if you are using Drupal in a subdirectory or in a
  # VirtualDocumentRoot and the rewrite rules are not working properly.
  # For example if your site is at http://example.com/drupal uncomment and
  # modify the following line:
  # RewriteBase /drupal
  #
  # If your site is running in a VirtualDocumentRoot at http://example.com/,
  # uncomment the following line:
  RewriteBase /

  # Pass all requests not referring directly to files in the filesystem to
  # index.php. Clean URLs are handled in drupal_environment_initialize().
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_URI} !=/favicon.ico
  RewriteRule ^ index.php [L]

  # Rules to correctly serve gzip compressed CSS and JS files.
  # Requires both mod_rewrite and mod_headers to be enabled.
  <IfModule mod_headers.c>
    # Serve gzip compressed CSS files if they exist and the client accepts gzip.
    RewriteCond %{HTTP:Accept-encoding} gzip
    RewriteCond %{REQUEST_FILENAME}\.gz -s
    RewriteRule ^(.*)\.css $1\.css\.gz [QSA]

    # Serve gzip compressed JS files if they exist and the client accepts gzip.
    RewriteCond %{HTTP:Accept-encoding} gzip
    RewriteCond %{REQUEST_FILENAME}\.gz -s
    RewriteRule ^(.*)\.js $1\.js\.gz [QSA]

    # Serve correct content types, and prevent mod_deflate double gzip.
    RewriteRule \.css\.gz$ - [T=text/css,E=no-gzip:1]
    RewriteRule \.js\.gz$ - [T=text/javascript,E=no-gzip:1]

    <FilesMatch "(\.js\.gz|\.css\.gz)$">
      # Serve correct encoding type.
      Header set Content-Encoding gzip
      # Force proxies to cache gzipped & non-gzipped css/js files separately.
      Header append Vary Accept-Encoding
    </FilesMatch>
  </IfModule>
</IfModule> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-15T23:18:36.800

以下适用于 Drupal 7

```
RewriteRule ^home/code/([^/]+) ?q=home/software/node/&code=$1 
```

确保在 RewriteRule ^ index.php [L] 之前排除您的条件

```
RewriteCond %{REQUEST_URI} !yourCustomReWriteRuleCondition
RewriteRule ^ index.php [L] 
```

见这里： [https ://drupal.stackexchange.com/questions/55006/rewrite-url-not-working/94372#94372](https://drupal.stackexchange.com/questions/55006/rewrite-url-not-working/94372#94372)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T02:56:53.003

我发现drupal 确实有它自己的方式来重新路由页面。

该函数位于`yoursite/includes/bootstrap.inc`并被调用`request_path()`。

是的，我确实操纵了该功能以省略任何`training/`. 我知道这是一种非常丑陋的做事方式，但我没有时间坐下来做所有的 htaccess 可能性。

# mysql - SSMA 迁移错误

> ID：15806133
> 
> 赞同：1
> 
> 时间：2013-04-04T08:29:01.507
> 
> 标签：mysql, sql, sql-server

我正在从 MYSQL 迁移到 SQL SERVER。我的一张表未迁移，原因如下

```
 CREATE TABLE `user_tb` (`user_id` int(11) NOT NULL AUTO_INCREMENT, `username`    
 varchar(30) NOT NULL, `password` text NOT NULL,  `salt_id` varchar(20) NOT NULL,
 `emailid` varchar(50) NOT NULL, `gender` enum('male','female') DEFAULT NULL,  
 `country` int(5) DEFAULT NULL, `pincode` int(8) DEFAULT '0', `dob` date NOT NULL   
 DEFAULT '0000-00-00', 
```

列“dob”不允许 DBNull.Value。

我正在使用 SQL SERVER 迁移助手 (SSMA) 请建议..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T08:31:32.817

```
int(8) DEFAULT '0', dob date NOT NULL DEFAULT '1500-01-01', >> YYYY-MM-DD 
```

你不能写默认值 0，但必须 1。因为你的`dob date NOT NULL`this 意味着它不能有 NULL 值，但是你的默认值的原因是 0 并变成`0000-00-00`，所以它就像 NULL 一样，试图将其更改为`1`

当然，日期值不会有 00 作为日和 00 作为月，甚至不可能有 0000 作为年。因此，请尝试将年份设置为默认值，作为数据库中的最小年份。像2000或你喜欢的东西

# javascript - 错误的输出到网络浏览器

> ID：15806140
> 
> 赞同：1
> 
> 时间：2013-04-04T08:29:39.233
> 
> 标签：javascript

我尝试显示到浏览器日期和时间，但输出错误。
也许我错过了一些东西，但我无法抓住它是什么？
编码是`ANSI`.

**输出：**
`Current date and time` - 都是输出。

**代码：**

```
<HTML>
    <HEAD><TITLE>Show date‹&lt;/TITLE></HEAD>
        <BODY>
            <H1>Current date and time</H1>
            <p>
                <SCRIPT LANGUAGE="JavaScript">
                    now = new Date();
                    localtime = now.toString();
                    utctime = now.toGMTString();
                    hours = now.getHours();
                    mins = now.getMinutes();
                    secs = now.getSeconds();
                     document.write("<b>Current time: </b>" + localtime + "<BR>");
                     document.write("<b>Asolute time: </b>" + utctime + "</p>");
                     document.write("<font size='+5'>");
                        document.write(hours + ":" + mins + ":" + secs);
                     document.write("</font>);
                </SCRIPT>
        </BODY>
</HTML> 
```

**问题：**

*   如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T06:23:51.697

从此代码部分：

```
 document.write("<font size='+5'>");
     document.write(hours + ":" + mins + ":" + secs);
  document.write("</font>);
</SCRIPT> 
```

你在这里错过了`"`标记=>`document.write("</font>");`

# z3 - 使用 SMTLIB v2 输入中的 :pattern 用法不断获得“未知”结果

> ID：15806141
> 
> 赞同：4
> 
> 时间：2013-04-04T08:29:39.967
> 
> 标签：z3, smt

在 Z3 中使用 SMTLIBv2 输入格式和模式时遇到问题：我不断通过以下输入获得结果“未知”：

```
(declare-datatypes () ((L L0 L1)))
(declare-fun path () (List L))
(declare-fun checkTransition ((List L)) Bool)

(define-fun isCons ((p (List L))) Bool
    (not (= p nil))
)

; configuration options for :pattern, taken from the Z3 tutorial
(set-option :auto-config false) ; disable automatic self configuration
(set-option :smt.mbqi false)    ; disable model-based quantifier instantiation

(assert (isCons path))
(assert (isCons (tail path)))
(assert (= nil (tail (tail path))))
(assert (= L0 (head path)))             ; initial state constraint

(assert
    (forall ((p (List L)))
    (!
        (implies
            (and    (isCons p)
                    (isCons (tail p)))
            (and    (=  L0  (head p))           ; transition from L0
                    (=  L1  (head (tail p)))))  ; to L1
    :pattern ((checkTransition p))
    )
    )
)
(assert (checkTransition path))

(check-sat)
(get-model) 
```

我使用一个列表来表示通过转换系统的可能路径。在这种情况下，转换系统仅由状态 L0 和 L1 组成，它们通过从 L0 到 L1 的转换链接。通过断言语句，我将路径限制为以 L0 开头并且长度为 2 的路径。我希望将路径 (L0 (cons (L1 (cons nil)))) 作为模型。

我已经尝试将其归结为一个仍然显示问题的最小示例，从而产生上面的代码。我想使用该模式对“路径”进行递归检查，以确保列表中的每两个连续节点都符合某些（转换）约束。检查连续 cons 用作此递归检查的停止条件。尽管在上面的示例中我通过 checkTransition 删除了递归检查，但它仍然不起作用。整个想法可以追溯到 Milicevic 和 Kugler 的一篇文章，他们使用 Z3 2.0 和 .net API 以这种方式表示模型检查问题。

我知道模式实例化会导致结果“未知”，但我想知道为什么它已经发生在这样一个简单的（？）示例中。我是否以错误的方式使用模式来实现量词支持？

任何关于这个问题的想法都非常受欢迎！

问候卡斯滕

PS：我在 MacOS X (10.8.3) 上使用 Z3 版本 4.3.2 提到的文章：Milicevic, A. & Kugler, H., 2011。使用 SMT 和列表理论进行模型检查。NASA 形式方法，第 282-297 页。

**根据 mhs 的评论进行编辑：**

4.3.2版本（不稳定）似乎出现了拿不到模型的问题。我对不同版本进行了一些故障排除：

*   Z3 4.3.0 32bit，WinXP 32bit，来自安装程序
    *   结果：未知，但给出了一个模型
*   Z3版本4.3.1，git checkout 89c1785b73225a1b363c0e485f854613121b70a7，MacOS X，自编译，这是master分支中的最新版本....
    *   结果：未知，但给出了一个模型
*   master 分支的各种其他结帐，所有 <= 4.3.1 产生相同的结果。
*   Z3 版本 4.3.2，夜间构建 z3-4.3.2.197b2e8ddb91-x64-osx-10.8.2，MacOS X...
    *   结果：未知，给出 NO 模型
*   Z3 版本 4.3.2，夜间构建 z3-4.3.2.96f4606a7f2d-x64-osx-10.8.2，MacOS X...
    *   结果：未知，给出 NO 模型

有趣的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T17:03:02.027

Z3 有很多求解器。当结果为 时，并非每个求解器都会生成“候选模型” `unknown`。默认求解器是自动选择要使用的求解器的投资组合。投资组合求解器在`unstable`(working-in-progress) 分支中进行了修改。使用`unstable`分支编译夜间构建。我将添加一个命令来指定执行时`(check-sat)`执行的求解器。因此，如果我们对`unknown`结果的“候选模型”感兴趣，我们可以指定一个生成它们的求解器。同时，您可以使用以下解决方法：

*   在. `(push)`_ `(check-sat)`这是一个小技巧，它迫使投资组合求解器选择产生“候选模型”的求解器。

补充说明：

*   Z3 v4.3.2 尚未发布。这就是为什么问题中的每晚构建具有 git 哈希`197b2e8ddb91`并附`96f4606a7f2d`加到它们的原因。这些哈希码标识了用于构建它们的精确 git 提交。

*   如果我们删除该命令`(set-option :smt.mbqi false)`，Z3 将使用该`mbqi`模块并成功显示断言是`unsat`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T08:43:31.483

我刚刚在 Win 7 x64 上的 Z3 4.3.0 上尝试了你的示例，我得到了结果

```
unknown

(model 
  (define-fun path () (List L)
    (insert L0 (insert L1 nil)))

  (define-fun checkTransition ((x!1 (List L))) Bool
    (ite (= x!1 (insert L0 (insert L1 nil))) true
      true))
) 
```

这不是`path`您期望的模型吗？

我假设你得到了`unknown`，因为你的问题没有明确说明，尽管我不能把手指放在一个具体的问题上。如果你给 Z3 一些反驳的东西，例如通过附加

```
(assert (not (= L1 (head (tail path)))))
(check-sat) 
```

到你的代码，那么你会得到`unsat`预期的结果。

# neo4j - Cypher Neo4j 查询

> ID：15806144
> 
> 赞同：0
> 
> 时间：2013-04-04T08:29:44.573
> 
> 标签：neo4j, cypher

我正在开发某种社交琐事游戏，我的主要数据库是 Neo4j。我在特定的用例中遇到了困难。

我有 Challenge 节点，其中有两个 Opponents 节点相关：

```
(opponent1)-[:OPPONENT]->(challenge)<-[:OPPONENT]-(opponent2) 
```

挑战与主题节点有关：

```
challenge-[:subject]->subject 
```

每个主题都涉及许多问题：

```
subject-[:HAS]->question 
```

如果对手在以下关系存在之前回答了特定问题：

```
opponent-[:ANSWER]->question 
```

**用例：**我需要为挑战检索 X 个问题（两个对手都没有回答过）

我有以下密码查询：

```
START challenge=node({0}) , subject=node({1}) 
MATCH (opponent1)-[:OPPONENT]->(challenge)<-[:OPPONENT]-(opponent2) 
WITH opponent1,opponent2,subject
MATCH (subject)-[:HAS]->(question) 
WHERE  length(opponent1-[:ANSWER]->question) = 0 and length(opponent2-[:ANSWER]->question) = 0 
return question limit {2} 
```

上面的查询可以正常工作并检索挑战的可能问题。

问题是问题是因此而不是随机检索的。

**说明：**与具有类别属性的模板节点相关的每个问题。

```
question-[:TEMPLATE]->template 
```

首先由模板创建的问题，这意味着来自特定类别的所有问题在数据库中都有序列 ID，因此上述查询检索来自同一类别的问题。

我希望能够随机检索挑战问题。此外，从性能角度来看，查询结构是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T08:41:39.533

我不知道如何获得随机结果的本地方式，这里已经有 smting 询问过： [neo4j: Is there a way/how to select random nodes？](https://stackoverflow.com/questions/12510696/neo4j-is-there-a-way-how-to-select-random-nodes)

关于查询，取决于数据，但我宁愿尝试这样：

```
START challenge=node({0}) , subject=node({1})
MATCH (opponent1)-[:OPPONENT]->(challenge)<-[:OPPONENT]-(opponent2)
WITH opponent1,opponent2,subject
MATCH (subject)-[:HAS]->(question)
WHERE not(opponent1-[:ANSWER]->question) and not (opponent2-[:ANSWER]->question)
return question limit {2} 
```

# java - 获取错误 java.lang.ArrayIndexOutOfBoundsException：RSA 块的数据过多

> ID：15806145
> 
> 赞同：6
> 
> 时间：2013-04-04T08:29:44.930
> 
> 标签：java, android, encryption, rsa

我有私人 pem 密钥文件，我正在使用该文件对数据进行签名和加密。签名工作正常，我也可以在另一个平台上进行验证，但是在加密数据时，我收到以下错误：

```
04-04 09:55:51.821: E/AndroidRuntime(2725): FATAL EXCEPTION: Thread-102
04-04 09:55:51.821: E/AndroidRuntime(2725): java.lang.ArrayIndexOutOfBoundsException: too much data for RSA block
04-04 09:55:51.821: E/AndroidRuntime(2725):     at com.android.org.bouncycastle.jce.provider.JCERSACipher.engineDoFinal(JCERSACipher.java:457)
04-04 09:55:51.821: E/AndroidRuntime(2725):     at javax.crypto.Cipher.doFinal(Cipher.java:1106)
04-04 09:55:51.821: E/AndroidRuntime(2725):     at com.example.testsigning.MainActivity.rsaEncrypt(MainActivity.java:185)
04-04 09:55:51.821: E/AndroidRuntime(2725):     at com.example.testsigning.MainActivity$1.run(MainActivity.java:51)
04-04 09:55:51.821: E/AndroidRuntime(2725):     at java.lang.Thread.run(Thread.java:856) 
```

以下是从私有文件中提取密钥的代码片段：

```
// Read the file into string
String privKeyPEM = readFile("/mnt/sdcard/rsa_key");

privKeyPEM = privKeyPEM.replace("-----BEGIN RSA PRIVATE KEY-----", "");
privKeyPEM = privKeyPEM.replace("-----END RSA PRIVATE KEY-----", "");

// Base64 decode the data
byte[] encoded = Base64.decode(privKeyPEM, Base64.DEFAULT);

// PKCS8 decode the encoded RSA private key
PKCS8EncodedKeySpec keySpec = new PKCS8EncodedKeySpec(encoded);
KeyFactory kf = KeyFactory.getInstance("RSA");
mPrivKey = kf.generatePrivate(keySpec);

RSAPrivateCrtKey privk = (RSAPrivateCrtKey) mPrivKey;

RSAPublicKeySpec pubKeySpec = new java.security.spec.RSAPublicKeySpec(
        privk.getPublicExponent(), privk.getModulus());

mPubKey = kf.generatePublic(pubKeySpec); 
```

以下是加密数据的代码片段：

```
Cipher cipher = Cipher.getInstance("RSA/None/OAEPWithSHA1AndMGF1Padding", "BC");
cipher.init(Cipher.ENCRYPT_MODE, mPubKey);
return cipher.doFinal("Hello World".getBytes()); // here is the problem 
```

任何解决该问题的帮助将不胜感激。

问候， 尤维

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:08:17.220

问题在于从私钥中检索公钥，应该是这样的：

```
RSAPublicKeySpec pubKeySpec = new java.security.spec.RSAPublicKeySpec(
                privk.getModulus(), privk.getPublicExponent()); 
```

代替 ：

```
RSAPublicKeySpec pubKeySpec = new java.security.spec.RSAPublicKeySpec(
        privk.getPublicExponent(), privk.getModulus()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:56:02.770

当输入缓冲区大于密码的输入块大小时，会出现该错误消息。输入字符串这么短似乎不太可能出现这种情况，因此首先要查看的是上一行。我认为密码没有正确初始化，或者更确切地说，没有按照您期望的方式进行初始化，因为它没有引发异常。在调用之后，我会首先对密码对象进行一些调试打印`init()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-18T16:49:11.247

该死的我有同样的错误，但原因是我正在阅读使用 StringBuilder 而不是 ByteArrayOutputStream 解密的材料（StringBuilder 的实例使用 append 方法来追加行并损坏原始源以进行解密）。

：/

# php - 为什么我的表单在忽略弹出警报时提交

> ID：15806148
> 
> 赞同：1
> 
> 时间：2013-04-04T08:29:49.480
> 
> 标签：php, javascript, jquery

我有一个表格，其中没有字段可以为空。当用户尝试提交带有空字段的表单时，我会弹出一个警告框。但是当用户在警报框中单击“确定”时，表单会被提交。

下面是我的代码：

js：

```
 function checkIt(f)
  {   
    if (f.elements['username'].value=="" && f.elements['text'].value=="") {      
        alert('Both fields are required');
        return false;   
    } else {
        return true;
    } 
  } 
```

形式：

```
<form method="POST" action="" onSubmit="return checkIt(this)" id="submit">
    <input type="text" name="username" />
    <label>Enter Your Name</label>
    <input type="text" name="text" />
    <label>Enter Your Text</label>

<input type="submit" value="Submit Comment"/>
</form> 
```

动作代码：

```
$('.submit').submit(function(){

          $.ajax({
              url : ....,
              data : $(' form').serialize(),
              type: "POST",
              success : function(){
              }
          })

          return false;
      }) 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T08:35:18.407

```
if (f.elements['username'].value=="" && f.elements['text'].value=="") { 
```

因为只有当两个字段都为空时，表单提交才会阻止。你应该使用 OR(||) 插入 AND(&&)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T10:05:08.817

这是对我有用的代码

```
 $('.submitComment').submit(function(){
      var username = document.getElementById("username").value;
      var text = document.getElementById("text").value;

      if (username != "" && text != "") {
          $.ajax({
              url : 
              data : $(' form').serialize(),
              type: "POST",
              success : function(){
              }
          })  
      } else {
          alert('Both fields are required');
      }

      return false;
  }) 
```

# html - 我想使用正则表达式匹配这个 HTML 标签

> ID：15806150
> 
> 赞同：-1
> 
> 时间：2013-04-04T08:30:00.887
> 
> 标签：html, regex

我想使用正则表达式匹配这个 HTML 标签并获取`<ul>`标签的内部文本

```
<ul class="test">

<li>Data</li>
<li>Data</li>
<li>Data</li>

</ul> 
```

鉴于这`<ul class="test">`是固定的，我想匹配这个标签的内部数据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T08:35:36.473

如果你确定你的 ul 标签中没有 ul 标签，你应该试试这个：

```
/<ul class="test">(.*?)<\/ul>/ 
```

但是，如果您确实有嵌套标签，那么这取决于您使用的语言。例如，在 PHP 中：

```
/<ul.*?>((?:(?R)|.)*?)<\/ul>/ 
```

# node.js - 如何覆盖嵌套的 NPM 依赖版本？

> ID：15806152
> 
> 赞同：448
> 
> 时间：2013-04-04T08:30:15.163
> 
> 标签：node.js, npm

我想使用`grunt-contrib-jasmine`NPM 包。它有各种依赖关系。部分依赖图如下所示：

```
─┬ grunt-contrib-jasmine@0.4.1
 │ ├─┬ grunt-lib-phantomjs@0.2.0
 │ │ ├─┬ phantomjs@1.8.2-2 
```

不幸的是，此版本`phantomjs`中存在一个错误，导致它无法在 Mac OS X 上正确安装。这已在最新版本中得到修复。

**我怎样才能`grunt-lib-phantomjs`使用更新版本的`phantomjs`?**

一些额外的上下文：

*   `grunt-contrib-jasmine`显式需要 的版本`"~0.2.0"`，`grunt-lib-phantomjs`这显式需要的版本`"~1.8.1"`。`phantomjs`
*   首先添加`phantomjs`到我的包的依赖项没有效果；两个版本都已安装并且`grunt-contrib-jasmine`仍然使用旧版本（请参阅：[当使用 NPM 安装包时，你能告诉它使用其依赖项之一的不同版本吗？](https://stackoverflow.com/questions/11233133/when-installing-a-package-with-npm-can-you-tell-it-to-use-a-different-version-o)）。

* * *

## 回答 #1

> 赞同：282
> 
> 时间：2013-07-02T11:05:01.800

您可以使用[npm shrinkwrap](https://docs.npmjs.com/cli/shrinkwrap)功能，以覆盖任何依赖项或子依赖项。

我刚刚在`grunt`我们的一个项目中做到了这一点。我们需要更新版本的连接，因为`2.7.3`. 给我们带来了麻烦。所以我创建了一个名为`npm-shrinkwrap.json`：

```
{
  "dependencies": {
    "grunt-contrib-connect": {
      "version": "0.3.0",
      "from": "grunt-contrib-connect@0.3.0",
      "dependencies": {
        "connect": {
          "version": "2.8.1",
          "from": "connect@~2.7.3"
        }
      }
    }
  }
} 
```

`npm`应该在为项目安装时自动选择它。

（参见：[https](https://nodejs.org/en/blog/npm/managing-node-js-dependencies-with-shrinkwrap/) ://nodejs.org/en/blog/npm/managing-node-js-dependencies-with-shrinkwrap/ ）

* * *

## 回答 #2

> 赞同：117
> 
> 时间：2018-01-30T15:03:22.517

对于 2018 年及以后的版本，使用 npm 5 或更高版本：编辑您的`package-lock.json`: remove the library from `"requires"`section 并将其添加到“依赖项”下。

例如，您希望`deglob`包使用`glob`包版本`3.2.11`而不是当前版本。您打开`package-lock.json`并看到：

```
"deglob": {
  "version": "2.1.0",
  "resolved": "https://registry.npmjs.org/deglob/-/deglob-2.1.0.tgz",
  "integrity": "sha1-TUSr4W7zLHebSXK9FBqAMlApoUo=",
  "requires": {
    "find-root": "1.1.0",
    "glob": "7.1.2",
    "ignore": "3.3.5",
    "pkg-config": "1.1.1",
    "run-parallel": "1.1.6",
    "uniq": "1.0.1"
  }
}, 
```

`"glob": "7.1.2",`从中删除`"requires"`，添加`"dependencies"`正确的版本：

```
"deglob": {
  "version": "2.1.0",
  "resolved": "https://registry.npmjs.org/deglob/-/deglob-2.1.0.tgz",
  "integrity": "sha1-TUSr4W7zLHebSXK9FBqAMlApoUo=",
  "requires": {
    "find-root": "1.1.0",
    "ignore": "3.3.5",
    "pkg-config": "1.1.1",
    "run-parallel": "1.1.6",
    "uniq": "1.0.1"
  },
  "dependencies": {
    "glob": {
      "version": "3.2.11"
    }
  }
}, 
```

现在删除您的`node_modules`文件夹，运行`npm ci`（或`npm install`旧版本的 node/npm），它将向该部分添加缺少的`"dependencies"`部分。

* * *

从 npm cli [v8.3.0](https://github.com/npm/cli/releases/tag/v8.3.0) (2021-12-09) 开始，这可以使用package.json[`overrides`字段来解决。](https://docs.npmjs.com/cli/v8/configuring-npm/package-json#overrides)*如[StriplingWarrior 的回答中所述](https://stackoverflow.com/a/70396201/1139105)*

* * *

## 回答 #3

> 赞同：84
> 
> 时间：2020-07-17T14:27:38.560

唯一对我有用的解决方案（节点 12.x，npm 6.x）是使用由[@Rogerio Chaves开发的](https://stackoverflow.com/users/996404/rogerio-chaves)[npm-force-resolutions](https://www.npmjs.com/package/npm-force-resolutions)。

首先，通过以下方式安装它：

```
npm install npm-force-resolutions --save-dev 
```

`--ignore-scripts`如果某些损坏的传递依赖脚本阻止您安装任何东西，您可以添加。

然后`package.json`定义应该覆盖的依赖项（您必须设置**确切的版本号**）：

```
"resolutions": {
  "your-dependency-name": "1.23.4"
} 
```

并在`"scripts"`部分添加新的预安装条目：

```
"preinstall": "npm-force-resolutions", 
```

现在，`npm install`将应用更改并强制所有依赖项`your-dependency-name`处于版本`1.23.4`。

* * *

## 回答 #4

> 赞同：68
> 
> 时间：2021-12-17T16:31:04.793

从 NPM [v8.3](https://github.com/npm/cli/releases/tag/v8.3.0)开始，处理此问题的正确方法是通过文件的`overrides`部分`package.json`。

> 如果您需要对依赖项的依赖项进行特定更改，例如用已知的安全问题替换依赖项的版本，用分叉替换现有的依赖项，或者确保在任何地方都使用相同版本的包，那么你可以添加一个覆盖。
> 
> 覆盖提供了一种将依赖关系树中的包替换为另一个版本或完全替换为另一个包的方法。这些更改的范围可以根据需要具体或模糊。
> 
> 为了确保软件包 foo 始终安装为 1.0.0 版本，无论您的依赖项依赖什么版本：
> 
> ```
> {
>   "overrides": {
>     "foo": "1.0.0"
>   }
> } 
> ```

还有许多其他更细微的配置，允许您仅在包是特定包层次结构的依赖项时覆盖包。有关更多详细信息，请查看[https://docs.npmjs.com/cli/v8/configuring-npm/package-json#overrides](https://docs.npmjs.com/cli/v8/configuring-npm/package-json#overrides)

* * *

## 回答 #5

> 赞同：63
> 
> 时间：2019-03-19T13:10:40.163

对于那些使用纱线的人。

我尝试使用 npm shrinkwrap，直到我发现 yarn cli 忽略了我的 npm-shrinkwrap.json 文件。

Yarn 对此有[https://yarnpkg.com/lang/en/docs/selective-version-resolutions/](https://yarnpkg.com/lang/en/docs/selective-version-resolutions/)。整洁的。

也看看这个答案：[https ://stackoverflow.com/a/41082766/3051080](https://stackoverflow.com/a/41082766/3051080)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-04-14T09:24:12.790

我遇到了一个问题，其中一个嵌套依赖项存在 npm 审计漏洞，但我仍然想维护父依赖项版本。npm shrinkwrap 解决方案对我不起作用，所以我做了什么来覆盖嵌套的依赖版本：

1.  删除 package-lock.json 中“requires”部分下的嵌套依赖项
2.  在 package.json 中的 DevDependencies 下添加更新的依赖项，以便需要它的模块仍然能够访问它。
3.  npm 我

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-10-15T20:24:33.847

我正要走这`npm-force-resolutions`条路，但似乎只需将依赖项包含在我自己的依赖项中`package.json`就可以解决我的问题。

我相信这对我来说是可行的，因为原始依赖项允许我想要更新的相关依赖项的补丁版本。因此，通过手动包含一个较新的版本，它仍然满足原始依赖项的依赖项，并将使用我手动添加的那个。

# 例子

## 问题

我需要更新到`plyr`版本`3.6.9``3.6.8`

## 矿

`package.json`

```
{
  "dependencies": {
    "react-plyr": "^3.2.0"
  }
} 
```

## 反应 Plyr

`package.json`

```
{
  "dependencies": {
    "plyr": "^3.6.8"
  }
} 
```

> 注意`plyr`它以这开头的依赖`^`意味着它可以接受任何小补丁。您可以在此处了解更多信息：
> 
> [https://docs.npmjs.com/about-semantic-versioning#using-semantic-versioning-to-specify-update-types-your-package-can-accept](https://docs.npmjs.com/about-semantic-versioning#using-semantic-versioning-to-specify-update-types-your-package-can-accept)

## 更新我的

这会更新`plyr`我的`package.json`.

`package.json`

```
{
  "dependencies": {
    "plyr": "^3.6.9",
    "react-plyr": "^3.2.0"
  }
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2021-11-30T23:11:45.997

## 使用完全不同的包进行嵌套替换

如果您只是对覆盖包的版本号感兴趣，那么此处其他答案中概述的大多数策略都可以很好地工作，但在我们的例子中，我们需要找到一种方法来完全覆盖具有**不同包**的嵌套 npm 子依赖项。有关您为什么要这样做的详细信息，请参阅以下问题：

[如何用不同的包完全覆盖嵌套的 npm 子依赖项（不仅仅是不同的包版本号）？](https://stackoverflow.com/questions/69548370/how-to-override-a-nested-npm-sub-dependency-with-a-different-package-altogether/69591894)

## 直接指定tarball

对于使用其他人提到的策略将包嵌套替换为完全不同的包`npm-force-resolutions`，您只需提供指向通常指定覆盖版本号的 tarball 的链接。

例如，对于用这个包`ansi-html`的固定分支替换易受攻击的包的情况`ansi-html-community`，您的解决方案部分`package.json`应该如下所示：

```
"resolutions": {
    "ansi-html": "https://registry.npmjs.org/ansi-html-community/-/ansi-html-community-0.0.8.tgz"
} 
```

要找到 tarball 的链接，请使用以下命令，根据需要修改您的注册表：

```
npm view ansi-html-community dist.tarball --registry=https://registry.npmjs.org/ 
```

另外，请注意，要`npm-force-resolutions`在运行时工作`npm install`，您需要在以下部分`preinstall`下输入一个条目：`scripts``package.json`

```
 "scripts": {
    "preinstall": "npx npm-force-resolutions"
  } 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-09-13T20:06:10.870

@user11153 的答案在本地对我有用，但是在尝试进行全新安装（又名删除`node_modules`）时，我会得到：

```
npm-force-resolutions: command not found 
```

我必须将`preinstall`脚本更新为：

```
"preinstall": "npm i npm-force-resolutions && npm-force-resolutions" 
```

这可确保`npm-force-resolutions`在尝试运行该软件包之前已安装该软件包。

话虽这么说，如果您能够改用纱线，我会这样做，然后使用@Gus 的答案。

# dojo - dojo1.8 - 从选择 1 填充选择 2

> ID：15806155
> 
> 赞同：0
> 
> 时间：2013-04-04T08:30:18.470
> 
> 标签：dojo

无法从meter_Select 填充card_Select。每次更改meter_Select时，我都使用set方法设置和存储。

请参阅我的代码如下：-

```
var store = new Memory({
data:[
{id:'', label:"Choose one of the cards"},
{id:'testdata1970_05', label:"Mk7ABC Card"},
{id:'testdata1970_10', label:"Mk7CBC Card"},
{id:'testdata2060_03', label:"Mk10BC Card"},
]});

var memoStore1 = new ObjectStore({objectStore:store});
var meter_Select = new Select
        ({store:memoStore1,
        style:{width:'140px'},
        }, "node_meterSelect");
        meter_Select.startup();

var card_Select = new Select
({style:{position: 'absolute', margin: '20px', left:'60px', width:'140px'},
id:'cardSelect'
}, "node_cardSelect");

on(meter_Select, 'change', function(evt)
console.debug('Selected Card = '+ meter_Select.value);
request.post('listofcards.php',{data:{cardX : meter_Select.value},
handleAs:"json"}).then(

function(response)
{var memoStore2 = new Memory({data:response});//ok
console.debug("Loaded into memoStore2 ->" +memoStore2);

var combx = registry.byId('cardSelect');//ok to be undefined.
combx.set('store', memoStore2);
combx.set('value',"");
combx.set('placeHolder',"Choose one of the batch...");
combx.set('searchAttr', 'mfg_code');
combx.startup();
},//function(response)

function(error)//ok
    alert('Getting a list of cards = '+error);
}//function(error)
)//then.});//meter_Select.on 
```

任何的想法？克莱门特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:32:58.617

在[这个 jsfiddle](http://jsfiddle.net/RbjZ3/1/)中，第二个选择是从第一个触发的 Ajax 请求中填充的。

它的症结在这个函数中，这里`ObjectStore`为select创建了一个新的，并且`setStore()`调用了该方法来更新dijit：

```
 function onDataLoaded(response) {
        var memory = new Memory({
            data: response
        });
        var store = new ObjectStore({
            objectStore: memory
        });
        console.log("response", response, "store", store);

        var cardSelect = registry.byId('cardSelect');
        console.log(cardSelect);
        cardSelect.setStore(store);
    } 
```

# c# - EWS 托管 API 使用 FindItems 的最佳方法

> ID：15806156
> 
> 赞同：2
> 
> 时间：2013-04-04T08:30:18.653
> 
> 标签：c#, exchangewebservices, ews-managed-api

在 EWS 托管 API 中，您可以执行以下操作：

```
Folder inbox = Folder.Bind(service, WellKnownFolderName.Inbox);
inbox.FindItems(...) 
```

或者你可以这样做：

```
service.FindItems(WellKnownFolderName.Inbox, filter, view); 
```

*如此处所述：http: [//msdn.microsoft.com/en-us/library/exchange/dd633693 (v=exchg.80).aspx](http://msdn.microsoft.com/en-us/library/exchange/dd633693(v=exchg.80).aspx)*

两种方法有什么区别？哪个是首选？ *（我认为您真的不需要绑定到文件夹吗？）*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-23T13:25:04.633

`Folder.Bind`允许您绑定所需的文件夹。如果您有权限，您甚至可以绑定到其他用户的文件夹。或恢复 FolderID 后的任何文件夹（您可以将其用作参数）

例如，如果我是一名 Exchange 管理员，并且我想获取具有 smtp 地址“john.snow@mail.com”的用户的根文件夹，我会以这种方式绑定到该文件夹​​：

```
Folder FolderBind =
                   Folder.Bind(service, new FolderId
                       (WellKnownFolderName.MsgFolderRoot, "john.snow@mail.com)); 
```

一旦您将 FolderBind 加载到您想要的任何文件夹，您就可以使用其他方法，因为它接收`Folder.ID`您可能不知道的参数。但是感谢 Folder.Bind，您拥有`MsgFolderRoot`“john.snow@mail.com”的 FolderID，因此您可以在他的项目中执行搜索：

```
FindItemsResults<Item> findResults = service.FindItems(FolderBind.Id, searchFilter, view); 
```

我不知道我是否说清楚了。我你有更多的疑问只是问。

**编辑：**

您可以为 FindItems 提供一个完善的 searchFilter，它允许您获取满足某些要求的项目。就像搜索带有附件的电子邮件一样。搜索早于某个日期的电子邮件。等。

这里有一个例子：

```
List<SearchFilter> searchORFilterCollection = new List<SearchFilter>();
            searchORFilterCollection.Add( new SearchFilter.IsEqualTo(EmailMessageSchema.HasAttachments, true));
            searchORFilterCollection.Add(new SearchFilter.IsLessThan(EmailMessageSchema.DateTimeReceived,DateTime.Now.AddMonths(-3)));

SearchFilter searchFilter= new SearchFilter.SearchFilterCollection(LogicalOperator.And,searchORFilterCollection.ToArray()); 
```

# .net - dotnet highcharts - 如何启用滚动条

> ID：15806168
> 
> 赞同：1
> 
> 时间：2013-04-04T08:30:57.957
> 
> 标签：.net, highcharts

如何在 dotnet highcharts 中启用滚动条。？

意思是如何在c#代码中的dotnet图表配置中添加以下js配置。？

滚动条：{启用：真}，

# java - 事件发生时绘制新的图形组件（即圆圈）

> ID：15806169
> 
> 赞同：0
> 
> 时间：2013-04-04T08:30:58.647
> 
> 标签：java, swing, graphics, event-handling, paintcomponent

我正在开发一个非常简单的程序。我想要做的是在按下 firstButton 时添加一个新圆圈（在确保我的事件正常工作后，程序当前是这样的）。

我知道我在`paintComponent`某个地方需要一种方法，并且可能需要使用`repaint`但不确定如何放入这些方法。

帮助将不胜感激，谢谢：

```
public class aGameForBella extends JPanel {

    private int count1 = 0, count2 = 0, count3 = 0;
    JButton firstButton, secondButton, thirdButton;
    JLabel firstLabel, secondLabel, thirdLabel;
    JPanel optionPanel;

    //constructor method
    public aGameForBella() {
        //create components
        optionPanel = new JPanel();
        firstButton = new JButton("Button option number one");
        firstLabel = new JLabel("You pushed the first button: " + count1
                + " times");
        secondButton = new JButton("Button option number two");
        secondLabel = new JLabel("You pushed the second button: " + count2
                + " times");
        thirdButton = new JButton("Button option number three");
        thirdLabel = new JLabel("You pushed the third button: " + count3
                + " times");
        //add listeners
        firstButton.addActionListener(new ButtonListener());
        secondButton.addActionListener(new ButtonListener());
        thirdButton.addActionListener(new ButtonListener());

        //add panels
        add(optionPanel);

        //add components to panels
        optionPanel.add(firstButton);
        optionPanel.add(firstLabel);
        optionPanel.add(secondButton);
        optionPanel.add(secondLabel);
        optionPanel.add(thirdButton);
        optionPanel.add(thirdLabel);

        //set size of things
        optionPanel.setPreferredSize(new Dimension(200, 200));
        setPreferredSize(new Dimension(250, 500));
        setBackground(Color.cyan);

    }

    //inner class
    private class ButtonListener implements ActionListener {
        public void actionPerformed(ActionEvent event) {
            if (event.getSource() == firstButton) {
                count1++;
                firstLabel.setText("You pushed the first button: " + count1
                        + " times");
            } else if (event.getSource() == secondButton) {
                count2++;
                secondLabel.setText("And you pushed the second button: "
                        + count2 + " times");
            } else if (event.getSource() == thirdButton) {
                count3++;
                thirdLabel.setText("And the last button: " + count3 + " times");

            }

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T09:39:13.070

根据您的需求将取决于您的整体方法。

例如，如果您想维护您正在绘制的内容，您需要生成一个列表，其中包含您需要的所有值，以便在重新绘制组件时重现输出。

下面的示例基本上包含一个基于对象的列表，`Shape`并在每次绘制组件时重新绘制它们。

![在此处输入图像描述](https://i.stack.imgur.com/c4CMp.png)

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Rectangle;
import java.awt.Shape;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.geom.Ellipse2D;
import java.util.ArrayList;
import java.util.List;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class DrawCircles {

    public static void main(String[] args) {
        new DrawCircles();
    }

    public DrawCircles() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                final CirclePane circlePane = new CirclePane();
                JButton btn = new JButton("Click");
                btn.addActionListener(new ActionListener() {
                    @Override
                    public void actionPerformed(ActionEvent e) {
                        circlePane.addCircle();
                    }

                });

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(circlePane);
                frame.add(btn, BorderLayout.SOUTH);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

    public class CirclePane extends JPanel {

        private List<Shape> circles;

        public CirclePane() {
            circles = new ArrayList<>(25);
        }

        public void addCircle() {
            int width = getWidth() - 1;
            int height = getHeight() - 1;
            int radius = (int) Math.round(Math.random() * (Math.min(width, height) / 4f));
            int x = (int) Math.round(Math.random() * getWidth());
            int y = (int) Math.round(Math.random() * getHeight());
            if (x + radius > width) {
                x = width - radius;
            }
            if (y + radius > height) {
                y = height - radius;
            }
            circles.add(new Ellipse2D.Float(x, y, radius, radius));
            repaint();
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g.create();
            int width = getWidth() - 1;
            int height = getHeight() - 1;
            for (Shape shape : circles) {
                g2d.draw(shape);
            }
            g2d.dispose();
        }

    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T14:47:13.180

[自定义绘画方法](http://tips4java.wordpress.com/2009/05/08/custom-painting-approaches/)展示了两种进行自定义绘画的标准方法。第一个是从 List 中绘制，第二个是在 BufferedImage 上绘制。

# amazon-ec2 - 无法在 EC2 实例上进行 RDP

> ID：15806171
> 
> 赞同：7
> 
> 时间：2013-04-04T08:31:00.457
> 
> 标签：amazon-ec2

我正在尝试从我的 Windows 7 机器 RDP 进入 EC2 实例，但总是得到

对于这些原因之一，远程桌面无法连接到远程计算机

1.) 远程桌面到服务器未启用

2.) 远程计算机已关闭

3.) 远程计算机在网络上不可用。

我能够 RDP 其他 EC2 实例。也是一种解决方法，我能够从其他 EC2 机器但不能从我的 Windows 7 机器和网络上的其他机器 RDP 进入受试实例。

检查了 RDP-working 和 RDP-non-working ec2 实例的安全组，它们的配置相同（启用了端口 3389）。

请有任何建议！！！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-05-09T01:40:53.433

1.  在 AWS 控制台中，编辑您的安全组或创建新的安全组并添加新的入站规则：“所有流量”和自定义 IP = {您的 IP}

2.  转到您要连接的实例，然后按连接并下载远程桌面文件或从 Web 浏览器打开它。

3.  在与第 2 点（连接到您的实例）相同的屏幕中，单击获取密码并上传您应该早先下载的 .pem 文件目录并解密我的密码

4.  使用管理员输入用户名和密码登录 RDP。

请务必注意，您在 AWS 中的默认安全组不允许 RDPing，这就是步骤 1 在这里很重要的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-14T12:42:24.227

我希望您已经尝试并测试了上述所有建议，例如-

1.  验证您的实例是否具有正确的 RDP 协议步骤。
2.  在您的安全组中添加了一个新的入站规则，即自定义 TCP 端口（即 3389）。

如果您仍然有问题，您可以尝试的一件事是检查您的**xrdp.ini**文件（对于 ubuntu，它位于 /etc/xrdp/xrdp.ini）是否应包含端口字段，如port **=ask-1**包含任何其他值（例如**port=askaskaskask-1**表示您已多次运行设置命令）将其更改为**port=ask-1**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-31T00:16:02.293

在通过 RDP 连接之前，您需要在“安全组”上创建一个入站规则类型 RDP（端口 3389 上的 TCP）。您可以将其添加到现有的安全组或创建一个新组，但是如果您创建一个新的安全组，您必须转到“网络接口”，选择接口，转到操作 > 更改安全组并包含新组。

# android - 本机消息传递android应用程序源代码

> ID：15806174
> 
> 赞同：4
> 
> 时间：2013-04-04T08:31:09.263
> 
> 标签：android, message

谁能告诉我在哪里可以看到android附带的本机消息传递应用程序源代码（如果它是开源的）

我正在寻找以下应用程序和版本的源代码

应用程序名称 - 消息

版本 - 2.3.6

我已经检查了这个链接 [http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/2.0_r1/com/android/mms/ui/ComposeMessageActivity.java# ComposeMessageActivity.MsgListMenuClickListener.onMenuItemClick%28android.view.MenuItem%29](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/2.0_r1/com/android/mms/ui/ComposeMessageActivity.java#ComposeMessageActivity.MsgListMenuClickListener.onMenuItemClick%28android.view.MenuItem%29)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-01T09:10:03.983

这是消息应用程序主屏幕的最新代码的链接： [https ://github.com/android/platform_packages_apps_mms/blob/master/src/com/android/mms/ui/ConversationList.java](https://github.com/android/platform_packages_apps_mms/blob/master/src/com/android/mms/ui/ConversationList.java)

这是它的布局文件： [https ://github.com/android/platform_packages_apps_mms/blob/master/res/layout/conversation_list_screen.xml](https://github.com/android/platform_packages_apps_mms/blob/master/res/layout/conversation_list_screen.xml)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-04T08:44:11.170

各种 Android 的源代码可从 github[获得](https://github.com/android?tab=repositories)。

我发现[这](https://github.com/android/platform_packages_apps_mms/tree/gingerbread/src/com/android/mms)似乎与您的请求相似，但您应该更准确地了解应用程序，也许应用程序的命名空间（如“com.google.mms.Messaging”的字符串）否则有点难以找到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-25T09:34:28.367

这是任何人都可以自定义的最佳原生消息传递 android 应用程序源代码

（它的名字是[Mesibo](https://github.com/mesibo/messenger-app-android) : [Open Source Messenger App For Android - Real-time Messaging, Voice and Video Calls](https://mesibo.com/)）。

> *Mesibo Messenger 是一款具有实时消息、语音和视频通话功能的开源应用程序。此 repo 包含 Mesibo Messenger App for Android 的源代码。iOS 版本的[GitHub 存储库在这里。](https://github.com/mesibo/messenger-app-android)*

**特征**

*   一对一消息和群聊

*   高品质语音和视频通话

*   丰富的消息（文本、图片、视频、音频、其他文件）

*   加密

*   位置分享

*   消息状态和输入指示器

*   在线状态（存在）和实时个人资料更新

*   推送通知

最新版本也可通过 Google Play Store 和 Apple App Store 获得：

[在 Google Play 上获取](https://play.google.com/store/apps/details?id=com.mesibo.mesiboapplication)

* * *

**下载源代码**

要下载，请打开终端并发出以下命令：

```
$ mkdir Messenger
$ cd Messenger
$ git clone https://github.com/mesibo/messenger-app-android.git
```

此外，如果您想要更多最好的应用程序，那么我推荐：15 款适用于隐私相关人士的最佳开源加密消息 Android 应用程序（2020 年列表）

1.  [信号](https://play.google.com/store/apps/details?id=org.thoughtcrime.securesms)
2.  [电报](https://play.google.com/store/apps/details?id=org.telegram.messenger)
3.  [对话](https://play.google.com/store/apps/details?id=eu.siacs.conversations)
4.  [沙伯](https://play.google.com/store/apps/details?id=com.xabber.android)
5.  [安妥克斯](https://play.google.com/store/apps/details?id=chat.tox.antox)
6.  [Kontalk 信使](https://play.google.com/store/apps/details?id=org.kontalk)
7.  [Surespot 加密信使](https://play.google.com/store/apps/details?id=com.twofours.surespot)
8.  [手机](https://play.google.com/store/apps/details?id=org.linphone)
9.  [野蔷薇](https://play.google.com/store/apps/details?id=org.briarproject.briar.android)
10.  [Wire——安全信使](https://play.google.com/store/apps/details?id=com.wire)

所有这些列出的应用程序都是开源的，可以在 GitHub 和 Playstore 上找到。（[在这里阅读更多......](https://techlog360.com/open-source-messenger-voip-android-apps/)）

# jquery - 我在从 json 响应中获取数据时遇到问题

> ID：15806175
> 
> 赞同：1
> 
> 时间：2013-04-04T08:31:11.403
> 
> 标签：jquery, ajax, json, google-maps-api-3

我试图从响应中获取经纬度值，响应来自[http://maps.googleapis.com/maps/api/geocode/json?address=ch3%209dq&sensor=false](http://maps.googleapis.com/maps/api/geocode/json?address=ch3%209dq&sensor=false)

我创建了一个小提琴来显示我在哪里：http: [//jsfiddle.net/JamesRand/H4ZzQ/2/](http://jsfiddle.net/JamesRand/H4ZzQ/2/)

我认为这可能是因为它是一个多层次的响应。

我需要的价值观是：

```
"location" : {
               "lat" : 53.07399710,
               "lng" : -2.80763780
}, 
```

我不是 100% 确定 json 以及如何获取数据？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T08:36:24.100

试试这个：

```
data.results[0].geometry.location.lat
data.results[0].geometry.location.lng 
```

此外，要调试，使用任何现代浏览器，`console.log(data)`然后您可以在 JavaScript 控制台中浏览对象属性

你的例子工作：

[http://jsfiddle.net/JamesRand/H4ZzQ/2/](http://jsfiddle.net/JamesRand/H4ZzQ/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T08:46:36.057

我在你的小提琴中试过这个，似乎有效：

```
$(document).ready(function() {
      $("#driver").click(function(event){
          $.getJSON('http://maps.googleapis.com/maps/api/geocode/json?address=cw69ee&sensor=false', function(data) {
             $('#stage').html('<p> location: ' +
                              data.results[0].geometry.location.lat + ' , ' +
                              data.results[0].geometry.location.lng + '</p>');
          });
      });
   }); 
```

# python - 图中的前 10 条最短路径 - Igraph 0.6 - Python 2.7

> ID：15806181
> 
> 赞同：0
> 
> 时间：2013-04-04T08:31:22.270
> 
> 标签：python, graph, path, shortest-path, igraph

自从我开始在我的编码中成功实现 Igraph 以来，我一直在想这个问题：你能用**get_all_shortest_paths**检索尽可能多的最短路径吗？让我们说前10个。

到目前为止，我已经理解在无向图中检索所有最短路径是没有意义的，因为在大多数情况下，您拥有无限数量的路径。

但是我可以**简单地检索前 10 条最短路径吗？**

我试图用无向的 g = Graph() 来实现这一点：

```
list = []
list.append(g.get_all_shortest_paths(index1,index2, "distance")[0])   # shortest path
list.append(g.get_all_shortest_paths(index1,index2, "distance")[1])   # second shortest path
list.append(g.get_all_shortest_paths(index1,index2, "distance")[2])   # third shortest path
list.append(g.get_all_shortest_paths(index1,index2, "distance")[3])   # forth shortest path
list.append(g.get_all_shortest_paths(index1,index2, "distance")[4])   # fifth shortest path
list.append(g.get_all_shortest_paths(index1,index2, "distance")[5])   # sixth shortest path
list.append(g.get_all_shortest_paths(index1,index2, "distance")[6])   # seventh shortest path
list.append(g.get_all_shortest_paths(index1,index2, "distance")[7])   # eigth shortest path
list.append(g.get_all_shortest_paths(index1,index2, "distance")[8])   # ninth shortest path
list.append(g.get_all_shortest_paths(index1,index2, "distance")[9])   # tenth shortest path

#"distance" is from g.es["distance"] 
```

**列表索引超出范围总是**会给我错误。实际上我什至无法得到`list.append(g.get_all_shortest_paths(index1,index2, "distance")[1])`，虽然我知道那里有超过 10 条路径。

图表没有什么特别之处。数以千计的顶点，都以某种方式连接，我的意思是各种顶点度数。

最后我想有一个 wx.spin 或 wx.ComboBox 在路径之间进行选择（即现实生活中最短的国道在冬天结冰，所以我想在 City1 之间走第二最短的路和 City2 ......然后哦不......有袋鼠在上面跳，所以我选择第三条，或者更好的第四条路，因为我知道麦当劳，我真的很喜欢吃垃圾食品 bla bla）

我知道最短！= 短，虽然我需要类似的东西：如果最短不好，那么忽略它，转到第二个等等。我已经搜索了谷歌，但我不清楚我该怎么做。

先感谢您！

编辑：我可能会提到，`list.append(g.get_all_shortest_paths(index1,index2, "distance")[1])`当恰好有 2 条最短路径自然具有完全相同的距离时，这当然是有效的。

**重要更新：**

由于我无耻地误解`g.get_all_shortest_paths`了这部分将在我的代码中更改为，`g.get_shortest_paths(index1, index2, weights=distance, mode=ALL, output="vpath")`并且我还提到该图是加权的，但无论如何这一点是显而易见的：

```
list = []
g.es["weight"] = distance
list.append(g.get_shortest_paths(index1, index2, weights=distance, mode=ALL, output="vpath")[0])   # shortest path
list.append(g.get_shortest_paths(index1, index2, weights=distance, mode=ALL, output="vpath")[1])   # second shortest path
list.append(g.get_shortest_paths(index1, index2, weights=distance, mode=ALL, output="vpath")[2])   # third shortest path
list.append(g.get_shortest_paths(index1, index2, weights=distance, mode=ALL, output="vpath")[3])   # forth shortest path
list.append(g.get_shortest_paths(index1, index2, weights=distance, mode=ALL, output="vpath")[4])   # fifth shortest path
list.append(g.get_shortest_paths(index1, index2, weights=distance, mode=ALL, output="vpath")[5])   # sixth shortest path
list.append(g.get_shortest_paths(index1, index2, weights=distance, mode=ALL, output="vpath")[6])   # seventh shortest path
list.append(g.get_shortest_paths(index1, index2, weights=distance, mode=ALL, output="vpath")[7])   # eigth shortest path
list.append(g.get_shortest_paths(index1, index2, weights=distance, mode=ALL, output="vpath")[8])   # ninth shortest path
list.append(g.get_shortest_paths(index1, index2, weights=distance, mode=ALL, output="vpath")[9])   # tenth shortest path

#"distance" is a list containing the weights
# graph is TRUE-ly weighted now 
```

**如何获得两个顶点之间的前 10 条或所有短路径？**

这个问题仍在寻找被接受的答案。谢谢你。

*（PS 我在问题的第一部分中一直使用错误的方法，因为可能有其他像我这样的巨大的 idiobooms 尝试同样的事情）*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T14:21:48.160

好的，我仍然不确定您所说的“前 10 条最短路径”是什么意思，但这是我*认为*您可能想要实现的目标。您有一个图表，其中边缘由两个端点的实际（例如，欧几里得）距离标记。你得到两点，你希望在它们之间找到一些替代路径，同时尽量保持这些路径尽可能短。请注意，由于您的图表是加权的，所以两点之间不太可能有许多*最短路径 - 为了使所有路径都是**最短*的，它们必须*完全具有*相同的总重量。如果您的权重“像乌鸦飞翔”那样测量实际距离，那么这种同时发生的情况就不太可能发生——您要寻找的十条路径的长度会略有不同。因此，`get_all_shortest_paths`对您没有用处，不仅因为它不使用权重，还因为即使使用权重，您也不太可能在长度完全相同的两点之间找到多条路径。

另一种方法是`get_shortest_paths`，它可以考虑权重，但它只会返回一对顶点之间的*一条路径。*（之所以调用它，`get_shortest_paths`是因为如果您指定多个目标顶点，它会返回*多个*路径 - 更准确地说，它为每个目标顶点提供一个路径）。所以，你不能用它`get_shortest_paths`来获得你正在寻找的十条路径。

经过一番谷歌搜索，我找到了一个可能对您有用[的 k-shortest-paths 算法的实现。](https://code.google.com/p/k-shortest-paths/)它不是 的一部分`igraph`，但您可以保存您的图形，使用 Python中的模块`igraph`调用 k-shortest-paths 算法的编译可执行文件，然后以某种方式解析结果。`os.system``subprocess`

# c++ - 声明一个“无符号 T”

> ID：15806182
> 
> 赞同：8
> 
> 时间：2013-04-04T08:31:24.803
> 
> 标签：c++, templates, integer, unsigned

我想在模板中使用无符号 T：

```
template<class T>
void signed2unsigned(const T* source, unsigned T* dest, size_t n)
    {
    do
        {
        intmax_t s=*source;
        s+=min(*source);

        *dest=s;

        ++dest;
        ++source;
        --n;
        }
    while(n!=0);
    } 
```

这不起作用，因为在考虑类型 T 之前， unsigned without 已扩展为 unsigned int。除了引入 U 并在文档中写入 U 必须是无符号 T 之外，还有其他解决方法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-04T08:33:19.683

`std::make_unsigned<T>::type`是您似乎正在寻找的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T08:34:16.813

您可以使用`std::make_unsigned<T>::type`

# android - 应用程序在菜单创建时启动

> ID：15806183
> 
> 赞同：0
> 
> 时间：2013-04-04T08:31:31.263
> 
> 标签：android, tabs, barcode

我正在使用应用程序在我正在开发的应用程序中读取 QR 码（条形码）。我的问题是我不希望在创建菜单时启动条形码（A TabActivity）。要清楚：我以这种方式创建菜单

```
public void createMenu(int current) {
    Resources res = getResources(); // Resource object to get Drawables
    TabHost tabHost = getTabHost(); // The activity TabHost
    TabHost.TabSpec spec;   // Resusable TabSpec for each tab
    Intent intent;  

    intent = new Intent().setClass(this, Scan.class);
    spec = tabHost.newTabSpec("scanner").setIndicator(null,res.getDrawable(R.drawable.barcode_scan)).setContent(intent);
    tabHost.addTab(spec);

    // Do the same for the other tabs
    intent = new Intent().setClass(this, Research.class);
    spec = tabHost.newTabSpec("research").setIndicator(null,
                              res.getDrawable(R.drawable.system_search))
                              .setContent(intent);
    tabHost.addTab(spec);
} 
```

并且，在 Scan 类中，我有以下内容：

```
@Override
public void onStart(){
    super.onStart();
    setContentView(R.layout.scan);
    try {
        Intent intent = new Intent("com.google.zxing.client.android.SCAN");
        intent.putExtra("SCAN_MODE", "QR_CODE_MODE"); // "PRODUCT_MODE for bar codes
        startActivityForResult(intent, 0);
    } catch (Exception e) {
        Uri marketUri = Uri.parse("market://details?id=com.google.zxing.client.android");
        Intent marketIntent = new Intent(Intent.ACTION_VIEW,marketUri);
        startActivity(marketIntent);

    }
} 
```

但是，在菜单创建时，Barcode 应用程序每次都会启动，即使选择不是扫描仪的当前选项卡也会跳过菜单显示。如何解决？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T08:49:05.553

```
 @Override
    public void onStart(){
        super.onStart();
        setContentView(R.layout.scan);
        try {
            Intent intent = new Intent("com.google.zxing.client.android.SCAN");
            intent.putExtra("SCAN_MODE", "QR_CODE_MODE"); // "PRODUCT_MODE for bar codes
            startActivityForResult(intent, 0);
        } catch (Exception e) {
            Uri marketUri = Uri.parse("market://details?id=com.google.zxing.client.android");
            Intent marketIntent = new Intent(Intent.ACTION_VIEW,marketUri);
            startActivity(marketIntent);

        }
} 
```

将其更改为

@覆盖

```
public void onStart(){
    super.onStart();
    setContentView(R.layout.scan);

} 
```

# java - 旧 jvm 的 SSL/TLS 重新协商，没有关键修复 RFC-5746

> ID：15806184
> 
> 赞同：0
> 
> 时间：2013-04-04T08:31:31.817
> 
> 标签：java, security, ssl

我有一个使用 Java 5 和 Java 6 的系统，但其版本尚未实现 Oracle RFC-5746 的修复。

我将来会更新 Java 版本来克服这个问题，但同时我想做一些事情来克服这个问题。

我已经阅读了文档和很多论坛，但我还没有看到解决这个问题的好方法。

# python - Python 中从 Web 中提取信息的解析器

> ID：15806187
> 
> 赞同：1
> 
> 时间：2013-04-04T08:31:39.350
> 
> 标签：python, html, html-parsing

我的任务是解析 HTML 页面（西里尔文）并提取某些单词。这是我必须解析的网页：[http](http://www.toponymic-dictionary.in.ua/) ://www.toponymic-dictionary.in.ua/ 。我只得到了页面：

```
import urllib
from lxml.html import fromstring
url = 'http://www.toponymic-dictionary.in.ua/'
content = urllib.urlopen(url).read()
doc = fromstring(content)
doc.make_links_absolute(url) 
```

HTML 代码对我来说相当复杂（使用 xpath），所以我不知道如何进行解析。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:47:27.893

看看这个库：[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)

及其[文档](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)

它最适合您的要求。

干杯!

# ios - 苹果拒绝了我的应用程序在 iphone 5 上崩溃

> ID：15806196
> 
> 赞同：1
> 
> 时间：2013-04-04T08:32:13.853
> 
> 标签：ios

我知道这个问题已经被问过好几次了，但我正在寻找一个更一般的答案。我为 iOS 6 开发了一个应用程序，我在模拟器（Retina 3.5 和 4 英寸）以及 iPhone 4 设备上对其进行了测试。它从未崩溃过，但是当我将应用程序提交给 Apple 时，他们回答说：

> 我们发现您的应用在运行 iOS 6.1.3 的 iPhone 5 上启动时崩溃，

查看崩溃日志![在此处输入图像描述](https://i.stack.imgur.com/TeWFV.jpg)

我们看到它在第 164 行从索引越界崩溃，这是有道理的，因为我在那里有这段代码：![在此处输入图像描述](https://i.stack.imgur.com/YjwUF.jpg)

我添加了“如果”以在`indexTimesArray`大于数组长度时停止执行并查看为什么会发生这种情况，但我无法重现该错误。我从来没有`index out of bounds`像他们那样...确实，我没有在 iPhone 5 设备上测试过，但我的电脑上有 XCode 4.6 和 iOS 6.1，还有带有 iOS 6.1.3 的 iPhone 4，但它是苹果公司的人也确实让应用程序崩溃了，那么如何重现错误呢？我尝试从[TestFlight](http://testflightapp.com/)安装该应用程序，因为它将它安装为一个全新的应用程序，就像他们在测试它时所做的那样，但仍然没有错误......

如何重现错误？这可能是构建设置的问题吗？

谢谢

[编辑] 我在对象的 init 方法中初始化 timesArray 的内容，如下所示：

> ```
> - (id)init{    
> self = [super init];    
> df = [[NSDateFormatter alloc] init];
> [df setDateFormat:@"yyyy-MM-dd HH:mm"];
> rangeDates = [[NSArray alloc]initWithObjects:@"2013-04-11 10:00", @"2013-04-12 10:00", @"2013-04-13 10:00", @"2013-04-14 10:00", nil];    
> timesArray = [[NSArray alloc]initWithArray:[NSArray arrayWithObjects:@"10:00", @"11:00", @"12:00", @"13:00", @"14:00", @"15:00", @"16:00", @"17:00", @"18:00", @"19:00", @"20:00", @"21:00", @"22:00", nil]];    
> colorDictio = [[NSDictionary alloc]initWithObjects:[NSArray arrayWithObjects:[UIColor colorWithRed:0.74 green:0.66 blue:0.37 alpha:1.0], [UIColor colorWithRed:0.64 green:0.15 blue:0.11 alpha:1.0], [UIColor colorWithRed:0.313 green:0.65 blue:0.69 alpha:1.0], [UIColor colorWithRed:0.79 green:0.4 blue:0.59 alpha:1.0], [UIColor colorWithRed:0.45 green:0.55 blue:0.53 alpha:1.0], [UIColor colorWithRed:0.14 green:0.27 blue:0.66 alpha:1.0], nil] forKeys:[NSArray arrayWithObjects:@"showers area", @"zinctalks", @"zincnetwork", @"zincshows", @"zinclabs", @"zinczone", nil] ];
> return self;
> } 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T08:53:00.870

要弄清楚如何重现该错误，您必须查看创建 timesArray 的代码。

发生越界错误`[timesArray count]`是因为小于 2（或整个数组为零）。所以你必须弄清楚哪个条件会导致一个包含一个或零个对象的数组。也许它发生是因为没有互联网连接。

包装 objectAtIndex: 以检查数组的实际大小总是一个好主意。

我将替换`else {`并`else if ([timesArray count] >= 2) {`添加一个额外的处理 <2 数组的 else 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T08:35:50.457

首先，这不是与操作系统相关的错误。您的应用程序正在崩溃，因为正在访问错误的数组索引。

1.  如何重现错误？：尝试使用您必须提供给苹果的相同凭据。
2.  这可能是构建设置的问题吗？： 不。

要调试错误，您可以尝试在 if 之前打印 indexTimesArray 的值。此外，尝试打印您传递的所有值以访问数组元素。这将帮助您跟踪正在发送的错误索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-01T11:04:12.700

感谢@mayur，他的评论是正确的答案，“我之前在Objective-C中遇到过类似的错误......我的建议是将self与NSMutableArrays或NSArrays一起使用”

# asp.net - 从 Session("date_time") 中获取登录时间的持续时间

> ID：15806200
> 
> 赞同：0
> 
> 时间：2013-04-04T08:32:24.180
> 
> 标签：asp.net, vb.net

我使用 Session("date_time") 存储登录日期和时间，在注销期间我只需要存储时间的持续时间，为此我使用 login_duration 作为整数作为 login_duration = (Session("date_time"). ToString - Now.ToString("hh:mm:ss"))...但它不能正常工作..请帮我解决问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T08:51:08.000

时间：`TimeValue(Now)` 日期和时间：`NOW`

关于格式，看[这里](http://www.vb6.us/tutorials/date-time-functions-visual-basic)

# android - Pushsharp 兼容 Phonegap 和支持的平台 + 服务器控制

> ID：15806201
> 
> 赞同：-5
> 
> 时间：2013-04-04T08:32:27.560
> 
> 标签：android, cordova, blackberry, windows-phone-8, pushsharp

pushsarp 是否与 phonegap 兼容我需要支持 IOS、Android、BlackBerry 和 windows phone 的所有支持平台，第二件事是我可以控制服务器端或在我的 PHP 服务器上发送推送通知控件，使用 pushsharp 还是不可能的？？？ ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:05:35.290

Pushsarp 是服务器端库，因此它与 phonegap 无关。您可以在服务器端使用任何您想要的东西来发送通知。

要为设备进行推送通知注册，您可以使用[https://github.com/bobeast/PushPlugin](https://github.com/bobeast/PushPlugin)之类的 phonegap 插件（仅支持 APNS 和 GCM）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T09:04:06.487

下到这个页面上的图片：[https](https://github.com/Redth/PushSharp) ://github.com/Redth/PushSharp 它清楚地表明它只适用于Android、iOS和Windows Phone。至于PhoneGap，它归结为PhoneGap 支持推送通知，因为PushSharp 只从服务器发送它们并且对它们在手机上的解释方式没有影响。

# opengl - 如何在纹理中使用 OpenGL LOD？

> ID：15806204
> 
> 赞同：5
> 
> 时间：2013-04-04T08:32:33.403
> 
> 标签：opengl, textures, texture-mapping

怎么做`GL_TEXTURE_MIN_LOD`，怎么`GL_TEXTURE_MAX_LOD`工作`LOD_BIAS`？

为了直观地检查它，我创建了带有 mipmapping 的 6*6 纹理，对于 > 0.5 的值，`MIN_LOD`我得到一个 3*3 纹理，而与`MAX_LOD`. 如果我改变`LOD_BIAS`它不会影响我的o/p。我无法弄清楚它是如何工作的。

任何人都可以通过举个例子来解释它吗？

编辑：我正在手动创建 mipmap 级别，以便我可以观察它正在拾取哪个级别。这是我的代码：

```
glTexImage2D(target, 0, GL_RGBA,9 ,9, 0, GL_RGBA, GL_BYTE,subpix);
glTexImage2D(target, 1, GL_RGBA,4 ,4, 0, GL_RGBA, GL_BYTE,&subpix[4]);
glTexImage2D(target, 2, GL_RGBA,2 ,2, 0, GL_RGBA, GL_BYTE,&subpix[10]);
glTexImage2D(target, 3, GL_RGBA,1 ,1, 0, GL_RGBA, GL_BYTE,&subpix[18]);
glSamplerParameterf(sampler,GL_TEXTURE_MIN_LOD,0.862);
glSamplerParameterf(sampler,GL_TEXTURE_MAX_LOD,0.99);
glSamplerParameterf(sampler,GL_TEXTURE_LOD_BIAS,0.0); 
```

在这种情况下，我预计它将采用 2*2 的第二个 mipmap 级别，但它选择 4*4 的第一个 mipmap 级别。当我设置 min lod < 0.5 时，它需要 9*9 的第 0 级。无论设置为 max lod 的值如何，都会发生这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T08:44:31.293

首先是一些参考资料：

> **`TEXTURE_MIN_LOD`**设置最小细节级别参数。这个浮点值限制了选择最高分辨率的 mipmap（最低的 mipmap 级别）。初始值为-1000。
> 
> **`TEXTURE_LOD_BIAS`**指定在纹理采样之前要添加到纹理细节级别参数的固定偏差值。指定的值被添加到着色器提供的偏差值（如果有的话），然后被钳制到实现定义的范围 - 偏差最大偏差最大值，其中偏差最大值是实现定义的常量的值`GL_MAX_TEXTURE_LOD_BIAS`。初始值为 0.0

因此，如果您对 mipmap 选择感到惊讶，我建议您执行以下步骤（不一定按顺序）：

*   手动创建 mipmap，使它们在视觉上彼此不同
*   验证您的 mipmap 是否正确提供。
*   验证您的`LOD_BIAS`设置不只是将所有值都放在范围之外，从而使采样器有效地始终使用最大或最小 LOD。

环顾四周，我发现[`textureQueryLod`](http://www.opengl.org/sdk/docs/manglsl/xhtml/textureQueryLod.xml) . 您也可能对帮助调试感兴趣。

# php - 如何使用 PHP sdk 在 Facebook 中进行重新身份验证？

> ID：15806205
> 
> 赞同：5
> 
> 时间：2013-04-04T08:32:37.007
> 
> 标签：php, facebook, authentication, login, connect

我希望用户在登录我的应用程序之前重新输入密码。facebook 文档仅使用 Javascript SDK 显示它。有人可以指导我或给我一些关于如何使用 php 的参考吗？

这是它在 js 中的样子：

```
FB.login(function(response) {
// Original FB.login code
}, { auth_type: 'reauthenticate' }) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-22T10:23:11.307

遵循[官方文档](https://developers.facebook.com/docs/php/howto/example_facebook_login/5.0.0)，但使用`getReAuthenticationUrl`方法而不是`getLoginUrl`.

[参数](https://developers.facebook.com/docs/php/FacebookRedirectLoginHelper/5.0.0#get-re-authentication-url)与getLoginUrl完全相同。

# ios - [NSOperationQueue mainQueue] 是否保证是串行的？

> ID：15806207
> 
> 赞同：4
> 
> 时间：2013-04-04T08:32:42.087
> 
> 标签：ios, objective-c, xcode4.5, nsoperationqueue

也就是说，如果我们多次将同一件事排队，则不会有并发。我们首先排队的将首先执行。

我的意思是只有一个主线程对吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T08:39:03.353

我在这里找到了一个很好的答案：

[NSOperationQueue 和并发与非并发](https://stackoverflow.com/questions/1646795/nsoperationqueue-and-concurrent-vs-non-concurrent)

因此，您可以随时设置所有添加的操作串行：

`[[NSOperationQueue mainQueue] setMaxConcurrentOperationCount:1];`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T08:42:43.193

答案是……是和否

当您创建一个新的 NSOperation 添加到您的队列时，您可以使用

```
- (void)setQueuePriority:(NSOperationQueuePriority)priority 
```

根据文档，队列将使用此优先级和其他因素作为相互依赖关系来决定接下来将执行什么操作。

只要您的操作具有相同的优先级并且没有相互操作依赖关系，它们就应该按照您添加它们的相同顺序执行，也许还有其他与系统相关的操作，插入它们之间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T08:37:05.090

从[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSOperationQueue_class/Reference/Reference.html)：

> 该类`NSOperationQueue`规范一组`NSOperation`对象的执行。被添加到队列后，操作将保留在该队列中，直到它被显式取消或完成其任务的执行。**队列中的操作（但尚未执行）本身是根据优先级和互操作对象依赖关系组织的，并相应地执行**。一个应用程序可以创建多个操作队列并向其中的任何一个提交操作。
> 
> 操作间的依赖关系为操作提供了绝对的执行顺序，即使这些操作位于不同的操作队列中。直到其所有相关操作都完成执行后，才认为操作对象已准备好执行。**对于准备执行的操作，操作队列总是执行相对于其他就绪操作具有最高优先级的操作**。有关如何设置优先级和依赖关系的详细信息，请参阅[NSOperation 类参考](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/NSOperation_class/Reference/Reference.html#//apple_ref/doc/uid/TP40004591)。

[关于线程](https://developer.apple.com/library/mac/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationObjects/OperationObjects.html#//apple_ref/doc/uid/TP40008091-CH101-SW1)：

> 尽管您通常通过将操作添加到操作队列来执行操作，但这并不是必需的。也可以通过调用其 start 方法手动执行操作对象，但这样做并不能保证该操作与您的其余代码同时运行。类的`isConcurrent`方法`NSOperation`告诉你一个操作相对于调用它的 start 方法的线程是同步运行还是异步运行。**默认情况下，此方法返回 NO，表示操作在调用线程中同步运行**。
> 
> **当您将非并发操作提交到操作队列时，队列本身会创建一个线程来运行您的操作。因此，将非并发操作添加到操作队列仍然会导致操作对象代码的异步执行。**

所以，如果我理解正确，这里将没有并发。

# c++ - 了解 glXCreateContextAttribsARB 属性设置

> ID：15806213
> 
> 赞同：1
> 
> 时间：2013-04-04T08:33:05.933
> 
> 标签：c++, linux, opengl

我正在为 Linux 手动创建 OpenGL 4.2 上下文。

我创建了一个上下文属性数组，如下所示：

```
 int context_attribs[] = {
        GLX_CONTEXT_MAJOR_VERSION_ARB, 4,
        GLX_CONTEXT_MINOR_VERSION_ARB, 2,
        GLX_CONTEXT_FLAGS_ARB, GLX_CONTEXT_DEBUG_BIT_ARB,
        GLX_CONTEXT_PROFILE_MASK_ARB, GLX_CONTEXT_COMPATIBILITY_PROFILE_BIT_ARB,
        None
    }; 
```

然后我将它传递给[glXCreateContextAttribsARB](http://www.opengl.org/registry/specs/ARB/glx_create_context.txt) () 。上下文创建得很好，但我有几个关于属性标志的问题。例如，对于基于文档的 GLX_CONTEXT_FLAGS_ARB，我有 2 个选项：

```
 GLX_CONTEXT_DEBUG_BIT_ARB       0x0001
GLX_CONTEXT_FORWARD_COMPATIBLE_BIT_ARB  0x0002 
```

如果我选择第一个，是否意味着 OpenGL 在调试模式下运行？如果是，那么如果我将此标志设置为第二个选项，是否意味着我将无法使用固定功能？如果是，那么如何在兼容性配置文件模式下设置“非调试”上下文？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T09:18:19.533

所有标志都是正交的。它们是*位标志*；您可以单独设置它们，或者根本不设置。

```
GLX_CONTEXT_FLAGS_ARB, GLX_CONTEXT_DEBUG_BIT_ARB, 
```

这意味着创建一个调试上下文。

```
 GLX_CONTEXT_FLAGS_ARB, GLX_CONTEXT_DEBUG_BIT_ARB | GLX_CONTEXT_ROBUST_ACCESS_BIT_ARB, 
```

这意味着创建一个也使用[健壮访问](http://www.opengl.org/registry/specs/ARB/glx_create_context_robustness.txt)的调试上下文（我使用这个例子而不是你的前向兼容性，因为你不应该*使用前向兼容性*）。它们是位标志；你按位或他们在一起。

```
 GLX_CONTEXT_FLAGS_ARB, 0, 
```

这意味着没有标志。所以它不会是一个调试上下文，它不会使用健壮的访问，等等。这可能是你正在寻找的。

此外，您可以选择根本不传递标志。

# apache-pig - 转义 Apache pig 数据中的特殊字符

> ID：15806221
> 
> 赞同：1
> 
> 时间：2013-04-04T08:33:28.013
> 
> 标签：apache-pig

我正在使用 Apache Pig 处理一些数据。
我的数据集有一些包含特殊字符的字符串，即`(#,{}[])`.

这本[编程猪书](http://ofps.oreilly.com/titles/9781449302641/load_and_store_funcs.html)说你无法逃脱那些字符。

**那么如何在不删除特殊字符的情况下处理我的数据呢？**

我考虑过更换它们，但想避免这种情况。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T08:35:59.857

最简单的方法是，

```
input = LOAD 'inputLocation' USING TextLoader() as unparsedString:chararray; 
```

TextLoader 只是将输入的每一行读入一个字符串，而不管该字符串中的内容。然后，您可以使用自己的解析逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T13:02:30.177

您是否尝试过加载数据？*当这些字符是 tuple、bag 或 map 值的一部分时，*没有办法转义这些字符，但是将这些字符加载到字符串的一部分时没有任何问题。只需将该字段指定为 type `chararray`。

您需要注意的唯一问题是您的字符串是否包含 Pig 用作字段分隔符的字符 - 例如，如果您是`USING PigStorage(',')`并且您的字符串包含逗号。但只要您不告诉 Pig 将您的字段解析为地图，`#`, `[`,`]`就可以很好地处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-16T13:28:23.373

在编写加载器函数时，不要返回元组，例如将地图作为字符串返回（因此稍后依赖[Utf8StorageConverter](http://pig.apache.org/docs/r0.11.1/api/org/apache/pig/builtin/Utf8StorageConverter.html)将转换为正确的地图）：

```
Tuple tuple = tupleFactory.newTuple( 1 );
tuple.set(0, new DataByteArray("[age#22, name#joel]")); 
```

您可以直接创建和设置 Java 地图：

```
HashMap<String, Object> map = new HashMap<String, Object>(2);
map.put("age", 22);
map.put("name", "joel");
tuple.set(0, map); 
```

这很有用，特别是如果您无论如何都必须在加载期间进行解析。

# c++ - 在调用 .str() 之前是否可以知道 std::wostringstream 的长度？

> ID：15806225
> 
> 赞同：3
> 
> 时间：2013-04-04T08:33:44.100
> 
> 标签：c++, c++11, wostringstream

我正在研究**std::wostringstream**以及如何正确使用它。我想知道是否有任何方法可以事先知道构造字符串的长度？[我尝试在 MSDN 和http://en.cppreference.com/w/](http://en.cppreference.com/w/)上搜索信息，最后在 google 上搜索，但找不到我要找的东西。

例如，如果我将**wostringstream的引用传递给一个函数，该函数是否可以通过调用****.str()**知道流是否为空，以及在不进行复制的情况下需要多长时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T08:59:18.637

您可以使用[`tellp()`](http://en.cppreference.com/w/cpp/io/basic_ostream/tellp)成员函数，它返回关联流缓冲区的输出位置指示符。例如：

```
#include <string>
#include <sstream>
#include <iostream>

int main()
{
    std::wostringstream oss;
    oss << L"Hello" << " World!" << std::endl;
    std::cout << oss.tellp();
} 
```

这是一个[活生生的例子](http://liveworkspace.org/code/4zgAes%2444)。

# javascript - 带有 SimpleMaps 的英国邮政编码

> ID：15806226
> 
> 赞同：1
> 
> 时间：2013-04-04T08:33:49.293
> 
> 标签：javascript, google-maps

我在我目前正在构建的网站上使用这个简单的地图插件[http://simplemap-plugin.com/demo/](http://simplemap-plugin.com/demo/)它基于谷歌地图API。我只有 Zip（在英国邮政编码中）输入可见，因此必须将其用作搜索的基础。如果您使用完整的邮政编码，例如 W1U *PZ，则搜索功能可以正常工作，但如果您只是输入 W1，您最终会得到阿尔及利亚道路的结果。有谁知道 gMaps API 中是否存在仅搜索邮政编码并排除任何道路的功能，因此键入邮政编码（区号）的开头将给出所需的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:01:07.443

也许最简单的方法是将结果简单地限制在特定国家/地区，在这种情况下，我假设是英国。

[https://developers.google.com/maps/documentation/geocoding/#RegionCodes](https://developers.google.com/maps/documentation/geocoding/#RegionCodes)

然而，这样的查询将遇到的问题是如何决定返回哪个结果，只需查询“W1”将返回一系列邮政编码包含“W1”的任意地址，例如 NW1。您可能最好指定最小长度？

# symfony - 实体字段类型 symfony 2.0 - 在编辑操作中显示来自数据库的数据

> ID：15806232
> 
> 赞同：0
> 
> 时间：2013-04-04T08:34:16.890
> 
> 标签：symfony, doctrine-orm, symfony-forms

情况如下：

我有 3 个表（一对多）：Product、ProductLabel、LabelTag（保留标签 -_-）

您可能已经猜到，一个产品可以有很多标签。

现在我有一个显示可用标签的表单产品。对于我的新操作和创建操作，我已经能够显示和保存选定的标签。当我尝试在数据库的编辑操作中显示标签 + 显示选定标签时，我的问题就出现了。

一些代码：

**实体产品：**

```
/**
 * @var Doctrine\Common\Collections\ArrayCollection $productLabels
 *
 * @ORM\OneToMany(targetEntity="Labeyrie\Bundle\MainsiteBundle\Entity\ProductLabel", mappedBy="product")
 */
protected $productLabels; 
```

**实体标签标签：**

```
/**
 * @var Doctrine\Common\Collections\ArrayCollection $productLabels
 *
 * @ORM\OneToMany(targetEntity="Labeyrie\Bundle\MainsiteBundle\Entity\ProductLabel", mappedBy="labelTag")
 */
protected $productLabels; 
```

**实体产品标签：**

```
/**
 * @var Labeyrie\Bundle\MainsiteBundle\Entity\Product $product
 * 
 * @ORM\Id
 * @ORM\ManyToOne(targetEntity="Labeyrie\Bundle\MainsiteBundle\Entity\Product", inversedBy="productLabels")
 */
protected $product;

/**
 * @var Labeyrie\Bundle\MainsiteBundle\Entity\LabelTag $labelTag
 * 
 * @ORM\Id
 * @ORM\ManyToOne(targetEntity="Labeyrie\Bundle\MainsiteBundle\Entity\LabelTag", inversedBy="productLabels")
 */
protected $labelTag; 
```

**产品形式：**

```
->add('productLabels', 'entity', array(
            'class' => 'LabeyrieMainsiteBundle:LabelTag',
            'property' => 'title',
            'multiple' => true,
            'expanded' => true,
        )) 
```

这是我在**创建操作中保存它的方式：**

```
if ($form->isValid()) {
        /* save product */
        $em->persist($product);
        $em->flush();

        /* save product labels */
        $labels = $product->getProductLabels();
        if (!empty($labels)) {
            foreach ($labels as $label) {
                $productLabel = new ProductLabel();
                $productLabel->setLabelTag($label);
                $productLabel->setProduct($product);

                $em->persist($productLabel);
            }
        }
        $em->flush();
    } 
```

没问题。

问题出在我的**编辑操作中：**

```
$entity = $em->getRepository('MyProjectBundle:Product')->find($id));   

    $form = $this->createForm(new ProductType(), $entity); 
```

如果我只是呈现表单，我只会看到标签，那些被选中的信息不会被传输（因为它在我管理的中间表中），因此不会显示。

我需要使用我的一对多架构来解决这个问题。表格配置错了吗？请帮忙。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:32:24.460

我终于找到了答案：

只需执行以下操作：

```
 $collection = new ArrayCollection();
    $labels = $entity->getProductLabels();
    if (!empty($labels)) {
        foreach ($labels as $label) {
            $collection->add($label->getLabelTag());
        }
    }

    $form->get('productLabels')->setData($collection); 
```

检索单个对象（LabelTag），将其放入数组集合中，将集合传递给表单字段的数据，您就完成了。

将显示该表单并显示选定的选项。

# xml - 使用 jQuery 发送 XML 请求

> ID：15806235
> 
> 赞同：3
> 
> 时间：2013-04-04T08:34:25.860
> 
> 标签：xml, jquery, asp-classic, xmlhttprequest

我想通过 jQuery 和 AJAX 与 UPS API 进行通信。XML 似乎格式正确，因为它在类似的 ASP 脚本中运行良好。但我想我会跳过 ASP 脚本并通过 jQuery 直接与 UPS 通信。但是，当我发送请求时，响应显示为：

方法：选项
状态：已取消加载

我假设我错过了 ajax 请求中的某种选项，告诉它将 xml 发送到 UPS 服务器。

```
 $(document).ready(function() {
            $.ajax({ type: "POST",
                            url: "https://wwwcie.ups.com/ups.app/xml/XAV",
                            data: "<?xml version=1.0?>" + 
                                "   <AccessRequest xml:lang='en-US'>" +
                                "       <AccessLicenseNumber>LICENSENUMBER</AccessLicenseNumber>" +
                                "       <UserId>USER</UserId>" +
                                "       <Password>PASS</Password>" +
                                "   </AccessRequest>" +
                                "   <?xml version=1.0?>" +
                                "   <AddressValidationRequest xml:lang='en-US'>" +
                                "       <Request>" +
                                "           <TransactionReference>" +
                                "               <CustomerContext>AddressValidationRequest</CustomerContext>" +
                                "               <XpciVersion>1.0</XpciVersion>" +
                                "           </TransactionReference>" +
                                "           <RequestAction>XAV</RequestAction>" +
                                "           <RequestOption>3</RequestOption>" +
                                "       </Request>" +
                                "       <AddressKeyFormat>" +
                                "           <AddressLine>1234 N. Main Street</AddressLine>" +
                                "           <PoliticalDivision2>Los Angeles</PoliticalDivision2>" +
                                "           <PoliticalDivision1>CA</PoliticalDivision1>" +
                                "           <PostcodePrimaryLow>90210</PostcodePrimaryLow>" +
                                "           <CountryCode>US</CountryCode>" +
                                "       </AddressKeyFormat>" +
                                "   </AddressValidationRequest>", 
                            contentType: "text/xml",
                            dataType: "xml",
                            cache: false,
                            error: function() { alert("No data found."); },
                            success: function(xml) {
                                alert("it works");
                                alert($(xml).find("project")[0].attr("id"));
                            }
            });
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T08:43:22.493

您似乎正在进行跨域呼叫。
您需要使用 jsonp 进行跨域调用。参考[ajax](http://api.jquery.com/jQuery.ajax/)

> **crossDomain**（默认：同域请求为 false，跨域请求为 true） 类型：Boolean 如果您希望在同一域上强制执行跨域请求（例如 JSONP），请将 crossDomain 的值设置为 true。例如，这允许服务器端重定向到另一个域。（添加的版本：1.5）

# html - 定义选择框的高度

> ID：15806237
> 
> 赞同：3
> 
> 时间：2013-04-04T08:34:29.230
> 
> 标签：html, css

我对选择框高度有疑问。是否可以使用 css 属性或其他方式使选择列表更短？见附件截图

![在此处输入图像描述](https://i.stack.imgur.com/RF6FK.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T09:58:33.027

也许你可以试试这个技巧：

```
<select onmouseover="this.size=10;" onmouseout="this.size=1;"> 
```

查看演示：http: [//jsfiddle.net/h9SKM/](http://jsfiddle.net/h9SKM/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-04T08:38:42.783

如果您没有在 select 元素上设置多个集合，则我之前建议的内容不起作用，这使得它不是解决问题的一般方法。

AFAIK，这个问题没有 CSS 方法。你必须使用 JavaScript，

# node.js - 如何将本地模块指定为 npm 包依赖项

> ID：15806241
> 
> 赞同：384
> 
> 时间：2013-04-04T08:34:35.703
> 
> 标签：node.js, npm

我有一个应用程序，它具有依赖关系下 package.json 文件中指定的第三方模块（例如“express”）的通常依赖项集。例如

```
"express"     : "3.1.1" 
```

我想以模块化方式构建我自己的代码，并通过 package.json 安装一组本地（即在我当前所在的文件系统上）模块。我知道我可以通过运行安装本地模块：

```
npm install path/to/mymodule 
```

但是，我不知道如何通过 package.json 依赖结构来实现这一点。使用`--save`此命令中的选项只需放入`"mymodule": "0.0.0"`我的 package.json 中（不引用文件路径位置）。如果我然后从 node_modules 中删除已安装的版本，并尝试从 package.json 重新安装，它会失败（因为它在中央注册表中查找“mymodule”，而不是在本地查找）。

我确定这是一种告诉`"dependencies": {}`结构我希望它从文件系统路径安装的方法，但不知道如何。

还有其他人有这个问题吗？谢谢。

* * *

## 回答 #1

> 赞同：591
> 
> 时间：2016-07-17T01:15:31.603

### `npm install`现在支持这个

```
npm install --save ../path/to/mymodule 
```

为此，`mymodule`必须将其配置为具有自己的模块`package.json`。请参阅[创建 NodeJS 模块](https://docs.npmjs.com/creating-node-js-modules)。

从 npm 2.0 开始，本机支持本地依赖项。请参阅[danilopopeye 对类似问题的回答](https://stackoverflow.com/a/14387210/451672)。我在这里复制了他的回答，因为这个问题在网络搜索结果中排名很高。

> 此功能在 npm 的 2.0.0 版本中实现。例如：

```
{
  "name": "baz",
  "dependencies": {
    "bar": "file:../foo/bar"
  }
} 
```

> 以下任何路径也是有效的：

```
../foo/bar
~/foo/bar
./foo/bar
/foo/bar 
```

### 同步更新

由于[`npm install <folder>`](https://docs.npmjs.com/cli/v7/commands/npm-install#:%7E:text=to%20a%20project.-,npm%20install%20%3Cfolder%3E,-%3A)将目录中的包作为符号链接添加到当前项目中，因此对本地包的任何更改都会自动同步。

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2013-10-07T11:28:42.893

请参阅：[package.json 中的本地依赖项](https://stackoverflow.com/questions/14381898/local-dependency-in-package-json)

看起来答案是`npm link`：[https ://docs.npmjs.com/cli/link](https://docs.npmjs.com/cli/link)

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-04-10T07:52:57.477

最后我找不到一个简洁的方法，所以我去创建一个名为的目录`local_modules`，然后将此 bashscript 添加到 scripts->preinstall 中的 package.json

```
#!/bin/sh
for i in $(find ./local_modules -type d -maxdepth 1) ; do
    packageJson="${i}/package.json"
    if [ -f "${packageJson}" ]; then
        echo "installing ${i}..."
        npm install "${i}"
    fi
done 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-10-19T10:30:00.363

在与`npm link`命令（不将它们发布到注册表或在 node_modules 文件夹中维护单独副本的情况下开发本地模块的建议解决方案）苦苦挣扎之后，我构建了一个小型 npm 模块来帮助解决这个问题。

修复需要**两个简单的步骤**。

第一的：

```
npm install lib-manager --save-dev 
```

其次，将此添加到您的`package.json`：

```
{  
  "name": "yourModuleName",  
  // ...
  "scripts": {
    "postinstall": "./node_modules/.bin/local-link"
  }
} 
```

更多详细信息，请访问[https://www.npmjs.com/package/lib-manager](https://www.npmjs.com/package/lib-manager)。希望它可以帮助某人。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-08-05T13:52:33.477

你可以在你的项目中添加到你的 package.json 文件中

```
"package-name" : "path/to/package" 
```

然后`npm i`在你的项目中运行

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-05T16:50:45.563

如果可以简单地将预先安装在 node_modules 中的模块与其他文件一起发布是可以接受的，则可以这样做：

```
// ./node_modules/foo/package.json
{ 
  "name":"foo",
  "version":"0.0.1",
  "main":"index.js"
}

// ./package.json
...
"dependencies": {
  "foo":"0.0.1",
  "bar":"*"
}

// ./app.js
var foo = require('foo'); 
```

您可能还想将模块存储在 git 上并告诉您的父 package.json 从 git 安装依赖项：[https ://npmjs.org/doc/json.html#Git-URLs-as-Dependencies](https://npmjs.org/doc/json.html#Git-URLs-as-Dependencies)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-11-16T23:52:17.880

在工作中，我们有一个公共库，供几个不同的项目使用，它们都在一个存储库中。最初我们使用已发布的（私有）版本（npm install --save rp-utils），但这会导致我们在开发过程中进行大量不必要的版本更新。该库位于应用程序的姊妹目录中，我们可以使用相对路径而不是版本。而不是 package.json 中的 "rp-utils": "^1.3.34" 现在是：

```
{ 
  "dependencies": { ...
    "rp-utils": "../rp-utils",
   ... 
```

rp-utils 目录包含一个可发布的 npm 包

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-12-16T07:55:59.710

**使用本地安装**

我遇到了来自本地依赖项的冲突反应安装问题。我通过使用`local-install`npm 包解决了这个错误。这个包不创建符号链接，这解决了我的问题。

**脚步：**

1.  跑`npm i -g local-install`
2.  在目标存储库中运行`npx local-install --save <local-path>`以安装本地依赖项

进一步阅读：[https ://www.npmjs.com/package/install-local](https://www.npmjs.com/package/install-local)

**我在尝试安装本地软件包时收到的错误`npm install --save <local-directory>`：**

> 错误：无效的挂钩调用。钩子只能在函数组件的主体内部调用。这可能由于以下原因之一而发生：
> 
> 1.  你可能有不匹配的 React 版本和渲染器（例如 React DOM）
> 2.  您可能违反了 Hooks 规则
> 3.  你可能在同一个应用程序中拥有多个 React 副本

# php - mysqli 不插入数据库

> ID：15806243
> 
> 赞同：-1
> 
> 时间：2013-04-04T08:34:51.907
> 
> 标签：php, pdo

再会，

我正在使用下面的代码：

```
$stmt = $dbh->prepare("INSERT INTO blogs (name, subject, message) VALUES (?,?,?)");
$stmt->bind_param('sss',$name, $subj, $msg); 
```

它可以正常工作，并且页面响应良好。

问题是，我认为它实际上并没有插入到我的数据库中？

有人可以建议可能导致这种情况的原因吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T08:55:10.740

这只是准备语句并绑定参数..你没有执行部分吗？

```
$stmt->execute(); 
```

这将指导解决方案

[http://php.net/manual/en/mysqli-stmt.bind-param.php](http://php.net/manual/en/mysqli-stmt.bind-param.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T08:56:56.250

您的代码中缺少执行：

```
 $stmt->execute(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T09:02:41.997

您没有以正确的方式绑定参数，也没有执行查询。

它应该是：

```
$stmt = $dbh->prepare("INSERT INTO blogs (name, subject, message) VALUES (?,?,?)");
$stmt->bindParam(1,$name);
$stmt->bindParam(2,$subj);
$stmt->bindParam(3,$msg);
$stmt->execute(); 
```

# wcf - WCF 服务绑定在 0:0:0:0 而不是 dns 别名

> ID：15806246
> 
> 赞同：1
> 
> 时间：2013-04-04T08:35:02.783
> 
> 标签：wcf, ip, net.tcp

我们有一个集群，其中 WCF 服务作为资源运行，每个资源都在一个单独的资源组中。这些组有一个 dns 别名，命名为 cap 名称，例如 APPQA en APPPROD，每个组都有一个 IP 10.110.250.1 和 10.110.250.2。

实际上，它是相同的 WCF 服务，但运行在另一个 baseAdress 上，例如我们的 baseAdress 示例：

```
<add baseAdress="net.tcp://appqa.domain.com:4504/.... 

and 

<add baseAdress="net.tcp://appprod.domain.com:4504/.... 
```

**但是当在同一个**节点上运行这些服务时，我们注意到我们收到了错误，比如有地址正在使用中。

我们发现这很奇怪，因为我们在基地址部分添加了我们的别名，这是我们两个别名的 nslookup，这给了我们两个正确的 IP 地址。

当只运行PROD服务时，我对QA的IP地址和4504端口做了一个telnet命令。我能够建立连接，这意味着我们实际上在两个 IP 地址（或所有地址和端口，如 0:0:0:0:4504）上运行。

作为一个额外的测试，我们将我们的基本地址更改为

```
<add baseAdress="net.tcp://10.110.250.1:4504/.... 
<add baseAdress="net.tcp://10.110.250.2:4504/.... 
```

然后我们可以在同一个节点上相邻运行这两个服务，所以我们证明我们的服务工作只有 dns 解析不起作用。

当我们启用端口共享时，这一切都有效，但由于 SLA 不同，我们不想这样做。

有人知道我们如何强制 WCF 使用他的 dns 别名的 IP 地址吗？

# python - Django 找不到我的自定义模板过滤器

> ID：15806254
> 
> 赞同：4
> 
> 时间：2013-04-04T08:35:29.863
> 
> 标签：python, django, filter, django-templates

我正在尝试在我的 Django 应用程序中创建一个自定义模板过滤器。我在我的应用程序下创建了一个 templatetags 文件夹，添加了一个`__init__.py`文件和一个带有过滤器的 filters.py 文件，如下所示：

```
import os
from django import template
from django.template.defaultfilters import stringfilter

register = template.Library()

@register.filter
@stringfilter
def filename(pathname):
    """ Returns the file's name, without folder """
    return os.path.basename(pathname) 
```

当我尝试从模板访问过滤器时，我收到错误“无效的过滤器'文件名'”

这个问题被问了很多，所以我已经检查了以下内容：

*   `__init__.py`被正确命名
*   打开外壳后，`manage.py shell`我可以像这样导入我的过滤器：`import app.templatetags`
*   我也可以从 Django shell 中正确使用过滤器
*   我已经重新启动了 Django 开发服务器。
*   我在调用上放置了一个断点`template.library()`- 调试器不会停在那里。

这是模板（我已经删除了部分模板，但这个小版本中仍然存在错误）

```
<form enctype="multipart/form-data" action="{% url lab.views.new.artefact_drop_web tempfile_id=tempfile.id %}" method="post"> 
    {% csrf_token %} 
    <h3>File:</h3>
    <p>{{ tempfile.file.name|filename }}</p>
    <input type="submit" value="Add" />
</form> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-04T08:48:44.800

您需要`{% load name_of_file_tags_are_in %}`在模板中使用。

[https://docs.djangoproject.com/en/1.5/howto/custom-template-tags/](https://docs.djangoproject.com/en/1.5/howto/custom-template-tags/)

# delphi - 如何在 Delphi 中添加设置并构建到现有的 exe 文件中

> ID：15806255
> 
> 赞同：1
> 
> 时间：2013-04-04T08:35:30.363
> 
> 标签：delphi, exe

假设我有一个程序，即在 Windows 中修改注册表。用户可以选择要更改的密钥。在此之后，他将单击“生成”以创建新的 exe 文件，该文件将根据用户的选择完成其工作。如何通过单击生成来实现“exe 生成”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T09:05:17.937

首先，您需要有两个 EXE。一个是您的主应用程序，第二个是更改注册表的应用程序。现在，您必须附加一些数据以使用主应用程序获取辅助应用程序的副本，并附加指定要更改的键的数据。一种方法是使用资源。使用您的主应用程序将所需的数据作为资源附加到您的目标 exe（已编译的要生成的 exe）。您的目标 exe 文件应检查并从其自己的可执行文件中加载数据资源并检索所需的数据。

您可能会发现这些链接很有用： [如何将资源文件附加到现有的可执行文件？](https://stackoverflow.com/questions/6054300/how-to-attach-a-resource-file-to-an-existing-executable-file)

以及如何在目标 exe 中检索资源：http: [//delphi.about.com/od/objectpascalide/a/embed_resources_2.htm](http://delphi.about.com/od/objectpascalide/a/embed_resources_2.htm)

# python - Bottlepy 使用动态根服务静态文件

> ID：15806258
> 
> 赞同：0
> 
> 时间：2013-04-04T08:35:41.943
> 
> 标签：python, routes, bottle

在 Bottlepy 中服务静态文件就像这样简单：

```
@route('statics/<filepath:path>')
def server_static(filepath):
    return static_file(filepath, root='assets') 
```

因此，提供的静态文件应该在`assets`目录中。

所以，这个：`http://127.0.0.1:8080/statics/jquery.js`将指`assets/jquery.js`

到目前为止，我没有发现任何问题。但是比方说，我想用应用程序文件夹制作一个框架，其中包含一些模型、视图和控制器。目录结构是这样的：

```
|---applications
|   |--- assets
|---start.py
|---core
    |--- __init__.py 
```

在`core/__init__.py`我放了一个函数来运行瓶子和路由资产目录

```
from bottle import route, run, static_file

@route('assets/<filepath:path>')
def _serve_assets(path):
    # I want the root to be dynamic, because It is not always be applications
    return static_file(path, root=os.path.join('applications', 'assets'))

def framework_start(application_path = 'applications', **kwargs):
    # A lot of logic
    run(**kwargs) 
```

我`start.py`这样做：

```
from core import framework_start
framework_start(application_path = 'applications') 
```

到目前为止，静态文件按预期服务。但我希望它仍然可以工作，即使我将 start.py 中的代码更改为：

```
framework_start(application_path = 'app') 
```

和目录结构到这个

```
|---apps
|   |--- assets
|---start.py
|---core
    |--- __init__.py 
```

那么，该怎么做呢？如何使用动态根进行静态路由？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:44:56.923

```
return static_file(filename, root=filefolder) 
```

第一个参数只是名称，第二个参数是包含它的文件夹。

你知道[文档](http://bottlepy.org/docs/stable/tutorial.html#static-files)在哪里...

从你的评论我想我明白了。

如果您希望模板具有路径，则需要通过类似的方式将其发送到瓶中，`<input type="hidden" name="arch"...`并`request.GET.get('arch', '')`使用`root=...`.

# javascript - 我如何每 20 秒重新加载一个 div？

> ID：15806263
> 
> 赞同：-1
> 
> 时间：2013-04-04T08:35:46.023
> 
> 标签：javascript, jquery, ajax, html

所以我有这个脚本：

```
<script id="_wauwgs">var _wau = _wau || []; _wau.push(["small", "p00ystfryeuc", "wgs"]);
    (function() {var s=document.createElement("script"); s.async=true;
    s.src="http://widgets.amung.us/small.js";
    document.getElementsByTagName("head")[0].appendChild(s);
})();</script> 
```

我想每 20 或 30 秒重新加载一次。我尝试使用这个：

```
<script type="text/javascript">
    function refresh() {
    document.getElementById('online').src = document.getElementById('online').src;
    }
    window.setInterval("refresh()",30000);
</script> 
```

有脚本，`<div id="online"></div>`但它没有工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T08:43:24.033

我认为这就是你想要的：

```
setInterval(function(){
   $("#online").attr('src', 'http://widgets.amung.us/small.js', 3000 /*or 2000*/);
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T08:45:12.083

我认为刷新脚本的唯一方法是再次插入它。

```
var script = $('#online').html();
        function reloadScript() {
            $time = 500;
            $('#online').html('');
            setTimeout(function() {
                $('#online').html(script);
                reloadScript();
            }, $time);
        }
        reloadScript(); 
```

# data-warehouse - 我应该将多个客户扁平化为一排维度还是使用桥接表

> ID：15806264
> 
> 赞同：0
> 
> 时间：2013-04-04T08:35:46.223
> 
> 标签：data-warehouse, star-schema

我是数据仓库的新手，我有一个带有合同事实表的星型模式。它包含基本的合同信息，如开始日期、结束日期、金额……等。

我必须将这些事实与客户维度联系起来。每个合同最多有 4 个客户。所以我认为我有两个选择，或者我将 4 个客户扁平化为一排，例如：

```
DimCutomers

name1, lastName1, birthDate1, ... , name4, lastName4, birthDate4 
```

我听到的另一个选择是在事实和客户维度之间创建一个桥接表。从而使模型复杂化。

你觉得我应该怎么做 ？每种解决方案的优点/缺点是什么，是否有更好的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T17:09:45.763

我将首先创建一个包含所有客户的客户维度，并且每行只有一个客户。客户维度本身可以成为 CRM 和其他用途的有用工具，这意味着您将拥有一个单一、可靠的客户列表，这使得您随后实施的任何设计都变得更加容易。

之后，这取决于客户与合同之间的关系。我能想到的主要场景是 a) 一份合同有 4 个客户“角色”，b) 一份合同有 1-4 个客户，都具有相同的角色，c) 一份合同有 1-n 个客户，都具有同样的角色。

情景 A 是每个合同有 4 个客户角色，例如，一个客户请求合同，第二个签署合同，第三个见证合同，第四个支付合同费用。在这种情况下，您的事实表将有每个合同一行和 4 个客户 ID 列，每个列都引用客户维度：

```
...
RequesterCustomerID int,
SignatoryCustomerID int,
WitnessCustomerID int,
BillableCustomerID int,
... 
```

当然，如果一个客户既是请求者又是见证人，那么您将在两者中拥有相同的 ID，`RequesterCustomerID`因为`WitnessCustomerID`您的客户维度中只有一行供他使用。这是完全正常的。

场景 B 是所有客户都有相同的角色，例如每个合同有 1-4 个签署者。如果签署人的数量永远不会超过 4，并且如果您非常有信心这将“始终”正确，那么简单的解决方案也是在事实表中为每个合约设置一行，其中 4 列引用客户维度：

```
...
SignatoryCustomer1 int,
SignatoryCustomer2 int,
SignatoryCustomer3 int,
SignatoryCustomer4 int,
... 
```

即使大多数合同只有 1 或 2 个签署者，在表中使用 2 个不太常用的列也没有太大的危害。

场景 C 是一份合同有 1-n 个客户，其中 n 是一个变化很大的数字，甚至可能非常大（集体诉讼？）。如果您在一份合同上有 50 个客户，那么向事实表添加 50 列将变得难以管理。在这种情况下，我将添加一个名为`ContractCustomers`或任何将事实表与客户维度联系起来的桥接表。这不像其他解决方案那样“简洁”，但是纯星型模式无论如何都不能很好地处理这样的 n:m 关系。

也可能有更复杂的情况，您将场景 A 和 C 混合在一起：合同有 3 个请求者、5 个签署者、2 个见证人，并且账单在请求者之间以 3 种方式拆分。在这种情况下，您将别无选择，只能创建某种包含每个合同的特定客户组合的桥接表，因为仅用一个事实和一个维度表无法清晰地表示它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-06T18:06:16.610

无论哪种方式都可以工作，但每种解决方案都有不同的含义。当然，您需要客户和合同表。一个关键问题是：它总是最多四个还是最终会超过这个数量？如果它将保持为 4，那么您可以在合同中拥有一组重复的 4 个客户 ID。这样做的缺点是它是固定的。如果合约没有四个，则有一些空格。但是，如果可能超过 4 个，那么唯一可行的解​​决方案是使用桥接表，因为在桥接表中您可以通过插入新行来添加更多客户（不更改表结构）。在固定解决方案中，在这种情况下，您通过更改表来添加超过 4 个客户。桥接表是几十年来 ER 建模称为关联实体的示例。它是两种解决方案中更灵活的一种。然而，我曾经在一个保证金系统上工作过，其中大额保证金需要五个级别的经理批准。他们告诉我，已经是五个，而且永远是五个。每个审批经理代表不同的组织级别。在这种情况下，我们使用了一组重复的五个经理 ID，每个级别一个，并将它们包含在交易中。因此，了解当前的业务规则和未来的前景非常重要。

# c# - 如何在 Jquery Asp.net 中查找 UserControls 控件值？

> ID：15806272
> 
> 赞同：1
> 
> 时间：2013-04-04T08:36:16.623
> 
> 标签：c#, asp.net, jquery

我正在使用 jQuery 和 ASP.net

我有一个用户控件并想将此用户控件的值设置到数据库中，因为我需要用户控件的值。同样，我想在用户控件中显示数据库中的数据，因为我需要通过 jquery 获取值。

在我的用户控件中，我有 4 个文本框和 2 个按钮（设置/更新）

AutoCompleteSearch_New 是 ascx 用户控件

这是我尝试过的代码：

```
var ID = $('#<%= ((HiddenField)AutoCompleteSearch_New.FindControl("hdnvalue")).ClientID %>').val(); 
```

但我不想使用隐藏字段。

我可以不使用隐藏字段直接找到控件的值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T08:45:51.663

它类似于使用网络表单中的价值。

这是相同的代码。

```
 Var TextBoxValue = $('#YourTextBoxID').val(); 
```

检查元素并获取文本框 ID 并将其替换为`YourTextBoxID`.

或者

```
Var TextBoxValue = $('#<%= YourTextBoxID.ClientID').val(); 
```

`YourTextBoxID`你的 asp:Textbox ID在哪里。

当您在 aspx 页面中加载用户控件时，jquery 会将其视为一个完整的页面，该页面由用户控件和表单中存在的其余 aspx 控件组合而成。所以你可以直接在你的 jquery 中获取文本框的值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T08:51:34.750

您可以通过将 ClientIDMode="Static" 添加到控件来做到这一点

然后使用

```
var txtvalue=  $("#TextBoxId").val(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T09:47:32.180

如果不能将值存储在 Session 中，我看到的其他选项是：

*   用户控件标记中的 javascript 变量声明
*   视图状态的客户端解密
*   html元素上的自定义数据属性

恐怕 HiddenField 是你最好的选择。这与 ViewState 背后的想法有些相同。

如果您不希望客户端篡改该值，则可以使用该值的组合，以及与密钥连接的值的哈希（ value+separator+Hash(value+secretkey) ）

如果您不希望客户端访问该值，则可以依靠在 HiddenField 中对其进行加密

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-05-25T08:01:31.820

嘿，你可以直接找到文本框或隐藏字段的控件，而无需提及其类型

var value=$('AutoCompleteSearch_New_hdnvalue').val();

这里 AutoCompleteSearch_New 是您在页面上加载的用户控件的名称和

hdnvalue 是用户控件 AutoCompleteSearch_New 中隐藏字段的 id

请享用.. ：-）

# javascript - 高级 Javascript 混淆

> ID：15806280
> 
> 赞同：1
> 
> 时间：2013-04-04T08:36:29.697
> 
> 标签：javascript, browser, web, obfuscation, native-code

我一直在 JS 混淆方面进行大量培训，开始了解所有高级概念的方法，但我最近发现了一个混淆代码，我相信它是某种形式的“本机 Javascript 代码”，我只是找不到任何关于这种类型的混淆：

这是一个小摘录：

```
'\141\75\160\162\157\155\160\164\50\47\105\156\164\162\145\172\40' 
```

它是这样称呼的：

```
eval(eval('\141\75\160\162\157\155\160\164\50\47\105\156\164\162\145\172\40')) 
```

由于代码是另一个人的工作，我在 JS 挑战中遇到了它，所以我没有发布完整的代码，所以我给出的示例不起作用，但完整的代码确实有效。

所以这是我的问题： **这是什么类型的代码？我在哪里可以了解更多信息？**

任何建议表示赞赏:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T08:41:41.707

它只是一个字符转义的字符串。您可以在任何浏览器的 JavaScript 控制台中阅读它：

```
console.log('\141\75\160\162\157\155\160\164\50\47\105\156\164\162\145\172\40') 
```

将打印：

```
"a=prompt('Entrez " 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T08:42:33.027

它只是转义字符，一部分输出查询字符串，另一部分实际运行返回的字符串 - 尝试在控制台中调用它。

```
eval('\160\162\157\155\160\164\50\47\105\156\164\162\145\172\47\51') 
```

可能有帮助？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T08:47:17.047

这些数字是字符的 ascii 代码 ( [http://www.asciitable.com/index/asciifull.gif](http://www.asciitable.com/index/asciifull.gif) )（八进制表示）。您可以将其转换为字符。当有人想要制作一个`XSS attack`，或者想要隐藏 js 代码时使用它。

所以你写的字符串代表：

```
 a=prompt('Entrez 
```

js 引擎，浏览器可以将八进制格式转换为“真实”字符串。有了`eval`功能，它可以运行。（如果“翻译”的代码没有语法错误）

# c# - c#中的字符改组和重新排列

> ID：15806282
> 
> 赞同：-1
> 
> 时间：2013-04-04T08:36:32.087
> 
> 标签：c#, .net, c#-4.0, c#-3.0

在我的一个应用程序中，我想打乱字符串内容，而在另一个应用程序中，如果我将此打乱的字符串作为输入传递，那么该应用程序必须返回原始字符串值。在 dotnet 平台中是否有任何方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T08:43:49.250

您可以使用[Fisher-Yates 洗牌](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)算法。

> 它是一种生成有限集合的随机排列的算法——简单来说，就是随机打乱集合。

生成数字 1-N 的随机排列的基本方法如下：

1.  写下从 1 到 N 的数字。
2.  在 1 和剩余的未击中数字的数量（包括）之间选择一个随机数 k。
3.  从低端数，划掉第k个还没有划掉的数字，写在别处。
4.  从步骤 2 开始重复，直到所有数字都被删除。
5.  在步骤 3 中写下的数字序列现在是原始数字的随机排列。

有一个例子：[洗牌算法](https://stackoverflow.com/questions/3541378/reversible-shuffle-algorithm-using-a-key)

和好一个[在这里](http://www.codinghorror.com/blog/2007/12/the-danger-of-naivete.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T08:39:39.147

绝对不是开箱即用，而是为自己创造一个`struct`

```
struct ShuffleChar{
    char c;
    int index;
} 
```

当你洗牌时，给每个字母分配一个，`index`这样你就可以把它们重新组合在一起。请记住，a`string`只有在字母顺序正确时才有意义，更改该顺序会破坏该信息，并且很有可能您无法恢复它......

# sql-server - 使用 asp.net mvc 插入 Unicode 字符

> ID：15806291
> 
> 赞同：-1
> 
> 时间：2013-04-04T08:36:55.997
> 
> 标签：sql-server, asp.net-mvc

我有一个带有 nVarchar(30) 的数据库字段。我正在使用 asp.net MVC。当我以 Unicode 插入记录时，我得到 ?????。

任何人都可以告诉我如何将字符串转换为 unicode 并插入数据库。

我正在使用 SQL Server 2008 R2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T08:40:30.747

尝试将您的数据库排序规则更改为 Latin1_General_BIN2。

[http://msdn.microsoft.com/en-us/library/ms175835.aspx](http://msdn.microsoft.com/en-us/library/ms175835.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T08:41:13.177

确保：

1.  您`N'`在包含此类字符串的字符串文字的开头使用，例如`N'enović'`

2.  如果要查询并忽略重音符号，则可以在选择中添加 COLLATE 子句。例如：

    ```
    SELECT * FROM Account 
    WHERE Name = 'enovic' COLLATE Latin1_General_CI_AI 
    ```

# java - 如何在 Android Java 中编写让我返回多个对象的类？（就像在 C# 中我可以对结构做同样的事情）

> ID：15806294
> 
> 赞同：0
> 
> 时间：2013-04-04T08:37:18.660
> 
> 标签：java, android

我想在 Java 中重新使用我的自定义对象。我该怎么办。从人们的回答来看，Java 似乎不支持自定义对象。

[https://stackoverflow.com/a/11701816/713789](https://stackoverflow.com/a/11701816/713789)

```
public class FinanceManager {

    public String Compname;

    public FinanceManager(String Compname){
        this.Compname = Compname;
    }

    public static CustomValueReturn(){
        return ;;
        // I need to return a custom object which return too many object as single object.
    }

} 
```

有人请帮助我如何在java中做到这一点。我很少尝试.net，在.net中我制作了结构并返回了一个有很多细节的结构，所以函数可以返回一堆细节而不是单个字符串或对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T08:42:27.690

尝试：

```
public static class MyCompound {
   public final String a;
   public final String b;
   public MyCompund(String a,String b) {
     this.a=a;
     this.b=b;
   }
}

public MyCompound testCompundReturn(String input) {
   return new MyCompound(input,"hello");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T08:42:55.237

这很简单。为您的回报创建一个模型类。例如，假设您要返回`CustomObject`.

```
class CustomObject {
    private blabla ..;
    /getters setters and what not

} 
```

现在在你的“返回方法”中

```
public class FinanceManager {
    private CustomObject instanceOfCustomObject;
    public String Compname;

    public FinanceManager(String Compname){
        this.Compname = Compname;
        this.instanceOfCustomObject = new CustomObject();
    }

    public CustomObject getInstanceOfCustomObject(){
        return this.instanceOfCustomObject
        // I need to return a custom object which return too many object as single object.
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T08:39:44.353

使用容器、`Map`或`List`数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T08:39:46.330

如果要返回自定义对象，只需为自定义对象创建一个类并返回该类的实例：

```
class mycustomobject {
  int int1;
  String string1;
  //and so on...

} 
```

有关更多信息，请参阅[本](http://docs.oracle.com/javase/tutorial/java/javaOO/)教程

如果要返回多个对象，请使用容器或数组。

# java - 如何使启动画面的背景不被拉伸？

> ID：15806301
> 
> 赞同：0
> 
> 时间：2013-04-04T08:37:34.373
> 
> 标签：java, android, android-layout

如何为不拉伸并保持与密度无关的大小的初始屏幕设置背景？这是我正在尝试的视觉效果：

![在此处输入图像描述](https://i.stack.imgur.com/uV4ld.png)

我有一个背景的大图像文件（1000x1000px）。我希望背景保持与密度无关的大小，多余的部分不可见，以便在各种屏幕尺寸上正确显示。我还希望图像的中心锚定到屏幕的中心。（上图只是一个模型，焦点应该在图像的中心）

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T08:59:19.433

您[在 stackoverflow](https://stackoverflow.com/questions/5902230/how-to-implement-an-androidbackground-that-doesnt-stretch)中有一个链接，可能会有所帮助。

您可以使用 an`ImageView`作为背景（否则任何视图的背景都会拉伸）。

并将其用作 ImageView 的背景。然后，您`ImageView`可以拥有 the`layout_width`和`layout_height`as `wrap_content`。

然后，将[ScaleType](http://developer.android.com/reference/android/widget/ImageView.ScaleType.html)设置为`android:scaleType="centerCrop"`.

请注意，此 ImageView 必须是布局的第一个元素。否则它只会隐藏布局中的所有内容。

# python - ValueError：“str”类型的对象的未知格式代码“f”

> ID：15806309
> 
> 赞同：3
> 
> 时间：2013-04-04T08:38:31.423
> 
> 标签：python, arrays, numpy, string-formatting

尝试在 DAT 文件上写入 2 个 NumPy 数组时出现以下错误。

```
fo.write('{0:f} {1:f} \n'.format(np.array(p_initial),np.array(pv_za)))
ValueError: Unknown format code 'f' for object of type 'str' 
```

完整代码可在此处获得：[TypeError: can't multiply sequence by non-int of type 'float': prblem with NumPy arrays](https://stackoverflow.com/questions/15804936/typeerror-cant-multiply-sequence-by-non-int-of-type-float-prblem-with-nump/15804979?noredirect=1#15804979)

我对 Python 很陌生。如何将 NumPy 浮点数组写入 DAT 文件，以便可以使用 matplotlib 或 gnuplot 绘制它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:23:52.963

最简单的方法`numpy.savetxt`：

```
import numpy as np
a = np.arange(5)
b = np.arange(5) + 2
np.savetxt('test.txt', np.array([a,b]).T, '%f') 
```

给出：

```
0.000000 2.000000
1.000000 3.000000
2.000000 4.000000
3.000000 5.000000 
4.000000 6.000000 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-04T08:41:09.827

请尝试以下方法：

```
import itertools as i
import numpy as np
>>> '{0:f} {1:f}'.format(*i.chain(np.array([123]), np.array([234])))
'123.000000 234.000000' 
```

# c++ - 如何确定 std::function 的参数数量？

> ID：15806319
> 
> 赞同：3
> 
> 时间：2013-04-04T08:38:58.640
> 
> 标签：c++, c++11, lambda, template-meta-programming, generic-programming

我有以下问题。假设您想编写一个可以采用 lambda 表达式的通用函数。我知道，如果参数的类型是 std::function，那么我不仅可以使用 lambda，还可以使用函数，甚至可以使用指向函数的指针。所以在第一步，我做了以下事情：

```
void print(std::function<void(int, int)> fn) {
  fn(1,2);
}

int main() {

  print([](int i, int j) { std::cout << j <<','<<i<<'\n'; });
  return 0;
} 
```

现在的问题是我想让这个函数通用，这意味着我不希望 lambda 表达式只有两个参数。所以我尝试将 print 函数的签名更改为更通用的东西，例如：

```
template <class function_type>
void print(function_type fn); 
```

但现在的问题是该函数接受 ANY 对象，我对此不满意。但主要问题是，我不知道对象 fn 可以接受多少个参数。

因此，在某种程度上，我正在寻找一种编译时方法来确定 fn 有多少个参数，并在可能的情况下将 fn 的类型更改为 std::function。然后，鉴于我知道 fn 接受的参数数量，是否有一种通用方法可以打包任意数量的参数以传递给 fn？我什至不知道这在 C++11 中是否可行。我的意思是，考虑到参数的数量，有没有办法打包参数以传递给 fn？所以如果有两个论点，那么我会打电话给

```
fn(arg1, arg2); 
```

如果有三个：

```
fn(arg1, arg2, arg3); 
```

等等。

谢谢大家的洞察力。

啊

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T19:42:46.310

以下片段可能有用。

`std::function`这给出了 a接受的参数数量

```
template <typename Signature>
struct count_args;

template <typename Ret, typename... Args>
struct count_args<std::function<Ret(Args...)>> {
    static constexpr size_t value = sizeof...(Args);
}; 
```

例如以下代码编译（clang 3.2、gcc 4.7.2 和 icc 13.1.0）

```
static_assert(count_args<std::function<void()        >>::value == 0, "Ops!");
static_assert(count_args<std::function<void(int)     >>::value == 1, "Ops!");
static_assert(count_args<std::function<void(int, int)>>::value == 2, "Ops!"); 
```

据我了解，您想调用传递正确数量参数的函数对象，对吗？然后对于每个参数，我们需要提供一个可转换为其类型的值。具有这种普遍性的解决方案非常困难（甚至是不可能的）。因此，我将提出两种选择。

**1**每个参数都是其类型的值初始化对象。（这就是[ecatmur 的](https://stackoverflow.com/users/567292/ecatmur) [建议](https://stackoverflow.com/a/15807558/1137388)。）

```
template <typename Ret, typename... Args>
Ret call(const std::function<Ret(Args...)>& f) {
    return f(Args{}...); // for the intel compiler replace {} with ()
} 
```

**2**给定一个固定值，所有参数都从该值隐式初始化：

```
template <typename Ret, typename... Args, typename Val, typename... Vals>
typename std::enable_if<sizeof...(Args) == sizeof...(Vals), Ret>::type
call(const std::function<Ret(Args...)>& f, const Val&, const Vals&... vals) {
    return f(vals...);
}

template <typename Ret, typename... Args, typename Val, typename... Vals>
typename std::enable_if<(sizeof...(Args) > sizeof...(Vals)), Ret>::type
call(const std::function<Ret(Args...)>& f, const Val& val, const Vals&... vals) {
    return call(f, val, val, vals...);
} 
```

这三个重载是明确的，可以用作以下示例所示：

```
{
    std::function<char()> f = []() -> char {
        std::cout << "f() ";
        return 'A';
    };
    std::cout << call(f)    << std::endl; // calls f()
    std::cout << call(f, 0) << std::endl; // calls f()
}
{
    std::function<char(int)> f = [](int i) -> char {
        std::cout << "f(" << i << ") ";
        return 'B';
    };
    std::cout << call(f)    << std::endl; // calls f(0)
    std::cout << call(f, 1) << std::endl; // calls f(1)
}
{
    std::function<char(int, int)> f = [](int i, int j) -> char {
        std::cout << "f(" << i << "," << j << ") ";
        return 'C';
    };
    std::cout << call(f)    << std::endl; // calls f(0, 0)
    std::cout << call(f, 2) << std::endl; // calls f(2, 2)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T09:34:43.943

要确定可调用的签名，您可以使用[Inferring the call signature of a lambda 或 "make_function" 的任意可调用](https://stackoverflow.com/questions/11893141/inferring-the-call-signature-of-a-lambda-or-arbitrary-callable-for-make-functio)的解决方案。然后，您可以将 callable 打包成`std::function`，或创建标签并使用参数推断：

```
template<typename T> struct tag {};

template<typename F, typename... Args>
void print_impl(F &&fn, tag<void(Args...)>) {
  fn(Args{}...);
}

template<typename F>
void print(F &&fn) {
  print_impl(std::forward<F>(fn), tag<get_signature<F>>{});
} 
```

请注意，这使用了值初始化的参数；如果你想要更复杂的东西，你可以构建一个`std::tuple<Args...>`并传递它，在每个[“解包”一个元组时调用它来调用一个匹配的函数指针](https://stackoverflow.com/questions/7858817/unpacking-a-tuple-to-call-a-matching-function-pointer?lq=1)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T08:45:33.983

是的，您可以`fn`使用可变参数模板打包任意数量的参数。

```
template <class function_type, class... Args>
void print(function_type fn, Args... args)
{
    //Call fn with args
    fn(std::forward<Args>(args...));
} 
```

要找出参数包中有多少个 args，您可以使用`sizeof...(args)`.

# c# - 从.net套接字中的无限循环获取变量

> ID：15806320
> 
> 赞同：1
> 
> 时间：2013-04-04T08:39:00.083
> 
> 标签：c#, .net, visual-studio-2010, sockets

我正在使用 .NET 同步套接字将数据从客户端发送到服务器。

我需要从`StartListening()`方法中获取数据以在其中使用它，`Main()`但变量数据在无限循环`( while(true))`中。请问有什么帮助吗？

这是服务器代码：

```
using System;
using System.Threading;
using System.Net;
using System.Net.Sockets;
using System.Text;

public class SynchronousSocketListener
{

    byte[] bytes = new Byte[1024];
    IPHostEntry ipHostInfo;
    IPAddress ipAddress ;
    IPEndPoint localEndPoint;

    Socket listener;
   // Incoming data from the client.
    public static string data = null;

    // Volatile is used as hint to the compiler that this data
    // member will be accessed by multiple threads.
    private volatile bool _shouldStop;

    public  void InitializeListening()
    {
        // Data buffer for incoming data.

        // Establish the local endpoint for the socket.
        // Dns.GetHostName returns the name of the 
        // host running the application.
         ipHostInfo = Dns.Resolve("localhost");
         ipAddress = ipHostInfo.AddressList[0];
         localEndPoint = new IPEndPoint(ipAddress, 11007);

        // Create a TCP/IP socket.
        listener = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
        listener.Bind(localEndPoint);
        listener.Listen(10);
    }

    public void StopListening()
    {
        _shouldStop = true;
        byte[] msg = Encoding.ASCII.GetBytes("please stop!");
        // Create a TCP/IP  socket.
        Socket sender = new Socket(AddressFamily.InterNetwork,
            SocketType.Stream, ProtocolType.Tcp);
            // Connect the socket to the remote endpoint. Catch any errors.
            try {
                sender.Connect(localEndPoint);
                // Send the data through the socket.
                int bytesSent = sender.Send(msg);
                // Release the socket.
                sender.Shutdown(SocketShutdown.Both);
                sender.Close();
            }
            catch (ArgumentNullException ane)
            {
                Console.WriteLine("ArgumentNullException : {0}", ane.ToString());
            }
            catch (SocketException se)
            {
                Console.WriteLine("SocketException : {0}", se.ToString());
            }
            catch (Exception e)
            {
                Console.WriteLine("Unexpected exception : {0}", e.ToString());
            } 
    }

    public  void StartListening()
    {
        // Bind the socket to the local endpoint and 
        // listen for incoming connections.
        try
        {

            // Start listening for connections.
            while (true)
            {
                Console.WriteLine("Waiting for a connection...");
                // Thread is suspended while waiting for an incoming connection.
                Socket handler = listener.Accept();

                // An incoming connection needs to be processed.
                if (_shouldStop)
                {
                    handler.Shutdown(SocketShutdown.Both);
                    handler.Close();
                    break;
                }
                data = null;
                while (true)
                {
                    bytes = new byte[1024];
                    int bytesRec = handler.Receive(bytes);
                    data += Encoding.ASCII.GetString(bytes, 0, bytesRec);
                    if (data.IndexOf("<EOF>") > -1)
                    {
                        break;
                    }
                }

                // Show the data on the console.
                Console.WriteLine("Text received : {0}", data);

                // Echo the data back to the client.
                //byte[] msg = Encoding.ASCII.GetBytes(data);
                byte[] msg = Encoding.ASCII.GetBytes("Salam !");
                handler.Send(msg);
                handler.Shutdown(SocketShutdown.Both);
                handler.Close();
            }

        }
        catch (Exception e)
        {
            Console.WriteLine(e.ToString());
        }
    }

    public static int Main(String[] args)
    {
        Console.WriteLine("I am the Synchronous Socket Server\n");
        SynchronousSocketListener pServer = new SynchronousSocketListener();
        pServer.InitializeListening();
        Thread serverkerThread = new Thread(pServer.StartListening);
        serverkerThread.Start();
        // Loop until server thread activates.
        while (!serverkerThread.IsAlive) ;

        Console.WriteLine("listening thread sevice started...\n");

        Console.WriteLine("\nPress Q when you want to quit...\n");
        int car;
        do
        {
            Thread.Sleep(100);
            car = Console.Read();
            if (car == 81)
            {
                // Request that the worker thread stop itself:
                pServer.StopListening();

                // Use the Join method to block the current process 
                // until the object's thread terminates.
                serverkerThread.Join();
                break;
            }
        } while (true);

        Console.WriteLine("listening thread sevice stopped and program will be exited...\n");

        return 0;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T08:56:35.533

接收到的数据（假设它是以“EOF”结尾的 ASCII 字符串）存储在 pServer 对象的名为“data”的公共成员中，您可以像这样访问它：

```
 Thread serverkerThread = new Thread(pServer.StartListening);
    serverkerThread.Start();
    // Loop until server thread activates.
    while (!serverkerThread.IsAlive) ;

    string receivedString = pServer.data; // <<--- here we get the received string

    Console.WriteLine("listening thread sevice started...\n"); 
```

# javascript - 循环遍历 XML 文件 jQuery

> ID：15806324
> 
> 赞同：0
> 
> 时间：2013-04-04T08:39:06.217
> 
> 标签：javascript, jquery, xml, json

我有点坚持以下问题。

我有几个由 ID 标记的 XML 文件（每个 XML 都由一个值标识）。我现在正在尝试遍历这些文件并将其内容输出到 HTML。

但是，它在进行回调之前开始循环

循环 0 循环 1 循环 2 回调 0 回调 1 回调 2

我需要 Loop0 Callback0 Loop1 Callback1

因为我需要在某个时候控制结果。

```
 var allContent=["xmlfile1","xmlfile2","xmlfile3","xmlfile4"];
        var totalSearch = 0;
        var countSearch = 0;

        function doSearch() {

            var oldContentID = contentID;

            for (iSearch=0;iSearch<allContent.length;iSearch++) {
                totalSearch = totalSearch + countSearch;
                contentID = allContent[iSearch];
                defineContent();

                getXML();

            }
        } 

        function getXML() {
            $.ajax({
                type: "GET",
                url: langFile,
                dataType: "xml",
                beforeSend: function(){

                    $('#results-list').empty();
                    $('#results-list').hide();
                    $('#loading').addClass('loading');
                },
                success: function(xml) {

                    var totalElements;
                    var intSearch = 0;
                    totalSearch = totalSearch + countSearch;
                    countSearch = 0;
                    var searchText = $('#text').val().toLowerCase();

                    totalElements = $(xml).find('news').length;

                    while (intSearch < totalElements) {
                        oFeed = $(xml).find('news:eq('+intSearch+')');
                        var headline = oFeed.find('headline').text();
                        var newsText = oFeed.find('detail').text();
                        var section = oFeed.find('section').text();
                        var category = oFeed.attr('category');

                        var stripEnters = newsText.match(/\r?\n|\r/gi);
                        if (stripEnters != null) {
                            for (var s = 0; s < stripEnters.length ; s++ ){
                                newsText = newsText.replace(stripEnters[s],'');
                            }
                        }

                        var newsText2 = $.htmlClean(newsText, {format:true});
                        var newsText3 = $(newsText2)
                        var newsText4 = $(newsText3).text();
                        var newsText5 = newsText4.replace( /\W/gi, "" );

                        if (section.toLowerCase() == "news" || section.toLowerCase() == "featured") {
                            if (headline.toLowerCase().indexOf(searchText) >= 0) {
                                $('<dt></dt>').html(headline).appendTo('#results-list');
                                $('<dd></dd>').html(newsText).appendTo('#results-list');
                                countSearch++;
                            }//end if
                            else if (newsText5.toLowerCase().indexOf(searchText) >= 0) {
                                $('<dt></dt>').html(headline).appendTo('#results-list');
                                $('<dd></dd>').html(newsText).appendTo('#results-list');
                                countSearch++;
                            }
                        }
                        intSearch++;
                    }           

                }   
            }); 
        } 
```

在回调结束时，我需要运行以下命令，但是它现在在完成所有回调之前执行此函数。

```
 function displayResults() {
            if (totalSearch == 0)
            {
                alert("No results found");
                $('#loading').removeClass('loading');
                $('#main').fadeIn(1000);
            }
            else {
                dynamicFaq();
                $('<p></p>').html(totalSearch + ' Results found').prependTo('#results-list');
                $('#results-list').fadeIn(1000);
                $('#loading').removeClass('loading');
            }   
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:08:10.727

如果我理解正确，您想加载 1 个 xml 文件，循环，然后开始加载下一个 xml 文件。如果是这样，这里有一个小伪代码：

```
function doSearch(int xmlFileIterator){
    if (xmlFileIterator < allContent.length) {
        ...
        contentID = allContent[xmlFileIterator];
        ...
        getXml(xmlFileIterator);
    } else {
        //no more xml files left
        displayResults();
    }
}

function getXml(int xmlFileIterator) {
    ...
        success: function() {
            ...
            doSearch(++xmlFileIterator);
        }
} 
```

第一个调用是`doSearch(0)`加载第一个 xml 文件。加载文件并完成循环（成功）后，您可以`doSearch`使用更高的数字（迭代器）再次调用该函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T08:44:08.123

我看到您的 AJAX 调用是异步的。尝试使用

```
 ....
            type: "GET",
            url: langFile,
            async: false,
            dataType: "xml",
            ..... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T09:28:37.983

维护一个 ajax 队列，这样 ajax 调用将被一一完成。再加上维护一个全局变量 searchedCount，它将维护主要 xml 的处理方式。

在完整的 ajax 回调中检查 searchedCount 并调用 displayResults 函数。

```
var allContent = ["xmlfile1", "xmlfile2", "xmlfile3", "xmlfile4"];
var totalSearch = 0;
var countSearch = 0;
var searchedCount = 0;

var ajaxQueue = $({});
$.ajaxQueue = function (ajaxOpts) {
    // Hold the original complete function.
    var oldComplete = ajaxOpts.complete;
    // Queue our ajax request.
    ajaxQueue.queue(function (next) {
        // Create a complete callback to fire the next event in the queue.
        ajaxOpts.complete = function () {
            // Fire the original complete if it was there.
            if (oldComplete) {
                oldComplete.apply(this, arguments);
            }
            // Run the next query in the queue.
            next();
        };
        // Run the query.
        $.ajax(ajaxOpts);
    });
};

function doSearch() {

    var oldContentID = contentID;
    searchedCount = 0;
    for (iSearch = 0; iSearch < allContent.length; iSearch++) {
        totalSearch = totalSearch + countSearch;
        contentID = allContent[iSearch];
        defineContent();
        searchedCount++;
        getXML();

    }
}

function getXML() {
    $.ajaxQueue({
        type: "GET",
        url: langFile,
        dataType: "xml",
        beforeSend: function () {

            $('#results-list').empty();
            $('#results-list').hide();
            $('#loading').addClass('loading');
        },
        success: function (xml) {

            //your code 

        },
        complete: function () {
            if (searchedCount == allContent.length) {
                displayResults()
            }
        }
    });
} 
```

# c++ - c++ 静态类成员的前向声明

> ID：15806331
> 
> 赞同：6
> 
> 时间：2013-04-04T08:39:19.837
> 
> 标签：c++, forward-declaration

我有一堂课：

```
class M {
public:
    static std::string t[];
}; 
```

稍后会进行初始化。我想稍后在不同的类（头文件）中使用 M::t：

```
class Use {
public:
    void f() { std::cout << M::t[0] << std::endl; }
}; 
```

有没有什么方法可以在不包括整个 M 类的情况下使用的头文件？我知道前向声明不允许访问类成员，但是这种美是静态的，所以它对编译器来说应该不是一个大问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T08:41:38.647

不，你不能。您可以在标头中包含标头，也可以`Use::f`在实现文件中分离实现并在其中包含`M`标头。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T08:44:11.093

没有`partial`像 C# 中的类，您可以在多个文件中定义一个类。
既然你让它成为一个`public static`成员，你为什么不创建一个命名空间并将它嵌入到那里呢？

```
namespace myns{

std::string t[];

} 
```

你可以从任何地方访问它，就像你对`public static`班级成员所做的那样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T08:51:57.877

前向声明只允许您使用前向声明的类指针或引用，而不是成员！如果您想使用示例中的类成员，则必须包含类头，即使它是静态的。

如果您不想在 Use.h 标头中包含 Mh，则可以使用以下解决方案：

**使用.h**

```
class Use {
public:
    void f();
}; 
```

**使用.cpp**

```
#include "M.h"
#include "Use.h"

void Use::f() {
    std::cout << M::t[0] << std::endl;
} 
```

此外，您必须知道在头文件中编写代码是一个坏习惯，当然内联和模板除外。

# breeze - 在“EntityQuery.fromEntityKey”之后按 F5 似乎可以轻松清除本地缓存

> ID：15806334
> 
> 赞同：0
> 
> 时间：2013-04-04T08:39:30.523
> 
> 标签：breeze

我用微风开发了一个应用程序。我需要在本地缓存中检索一个 id=123 的实体，所以我最终遇到了第一种情况：

```
return manager.fetchEntityByKey("Transport", 123, true) // 3rd param is true --> local cache
              .then(fetchSucceeded)
              .fail(queryFailed);

function fetchSucceeded(data) {
        var s = data.entity;
        return s.isPartial() ? refreshTransport(s) : transportObservable(s);
} 
```

接下来我需要扩展一些属性，所以我最终得到了第二种情况：

```
var entityType = manager.metadataStore.getEntityType("Transport");
var entityKey = new EntityKey(entityType, 123);
var query = EntityQuery.fromEntityKey(entityKey)
                       .expand("Sender.City, Sender.City.Country")
                       .using(breeze.FetchStrategy.FromLocalCache);

return manager.executeQuery(query)
              .then(fetchSucceeded)
              .fail(queryFailed);

function fetchSucceeded(data) {
     var s = data.results[0];
     return s.isPartial() ? refreshTransport(s) : transportObservable(s);
} 
```

我对这 2 个场景进行了一些测试，并在刷新浏览器 (F5) 时注意到了差异。

第一种情况：按 F5 时：查询能够检索本地缓存中的数据。所以用户可以按多次F5，微风仍然会使用本地缓存。

第二种情况：当按 F5 时：查询在本地缓存中没有找到任何东西，然后`fetchSucceed`发生错误，`s.isPartial()`因为 s in `undefined`。

**我的问题**：为什么在第二种情况下刷新浏览器似乎会清除本地缓存的微风？如何继续避免这种行为？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T09:19:33.097

Breeze 总是在按下 F5 时清除本地缓存。F5 使浏览器重新加载整个页面并执行每个 js 页面（从 main.js 开始）。

您会看到不同的行为，因为 fetchEntityByKey 函数中的第三个参数指示 Breeze 搜索本地缓存，如果未找到，则向服务器发出请求。

在第二种情况下，您告诉 Breeze 从本地缓存（ .using(breeze.FetchStrategy.FromLocalCache); ）中获取实体，因此如果实体不在本地缓存中，Breeze 将永远不会命中服务器。

# asp.net-mvc-4 - 如何在 MVC 中触发事件

> ID：15806344
> 
> 赞同：2
> 
> 时间：2013-04-04T08:40:04.973
> 
> 标签：asp.net-mvc-4

我想在 MVC4 中执行按钮单击事件。我是 MVC4 的新手，不知道在哪里编写事件、函数以及如何处理它们 b/w 模型、视图和控制。

有没有人有同样的想法？

如果有人帮助我详细解释和示例，我将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T08:46:42.217

MVC 4 本质上是无状态的，因此与 Web 窗体不同，没有“自动”方式将浏览器 UI 上的按钮单击连接到 C# 代码。

它的处理方式通常是，当您单击一个按钮（例如`<button>`，也许？）时，它会通过 AJAX 或标准浏览器重定向触发 HTTP 请求。该 HTTP 请求由控制器上的操作处理。

所以说你有这个控制器：

```
public class MyController : Controller {
    public string Foo() {
        return "Bar!";
    }
} 
```

您可以像在 Razor 中那样连接您的标记和 jQuery：

```
<button id="my-button">Call Foo!</button>
<script>
    jQuery(function ($) {
        $('#my-button').on('click', function () {
            $.ajax({
                url : '@Url.Action("Foo", "MyController")',
                type : 'GET'
            });
        });
    });
</script> 
```

这基本上是一个非常快速的要点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T12:06:07.287

我将从基础开始。您不需要 jquery ...阅读[http://weblogs.asp.net/scottgu/archive/2007/12/09/asp-net-mvc-framework-part-4-handling-form-edit -and-post-scenarios.aspx](http://weblogs.asp.net/scottgu/archive/2007/12/09/asp-net-mvc-framework-part-4-handling-form-edit-and-post-scenarios.aspx)以了解 asp.net MVC 的工作原理。

在控制器中定义两个具有相同名称的方法。使用 HttpVerbs.Post 定义的方法将是您单击按钮时调用的方法（POST 请求）。

在您的按钮周围放置一个指向您的方法的表单，当您单击该按钮时，它将运行以 HttpVerbs.Post 命名的方法。

**看法**

```
<form action="Home/MyMethod" method="post">
    <input type="text" id="username" />
    <button text="Click me" />
</form> 
```

**控制器**

```
public class HomeController : Controller
{
    public ActionResult MyMethod()
    {
        return View();
    }

    [AcceptVerbs(HttpVerbs.Post)]
    public ActionResult MyMethod(string username)
    {
        // notice the string username matches the <input id="username"...
        // alternatively you can pass a FormCollection to this method.
        return View();
    }
} 
```

# php - 错误：SQLSTATE [42S22]：未找到列：1054 where 子句中的未知列

> ID：15806351
> 
> 赞同：0
> 
> 时间：2013-04-04T08:40:43.623
> 
> 标签：php, mysql, cakephp

这个here函数有问题。它应该返回使用下面的 sql 调用收集的 json 数据字符串。问题是我在通过我的服务器访问页面时收到错误代码“500”（例如 - localhost/app/API/states/Alabama/1/10.json）。奇怪的是，使用 .json 和没有附加 .json 的数据按预期显示。据我所知，控制器和模型设置得很好，但错误代码仍然存在：

> {"code":500,"url":"/VOI2/API/states/Alabama/2/10.json","name":"SQLSTATE[42S22]:>Column not found: 1054 Unknown column 'states' in 'where >clause'","error":{"errorInfo":["42S22",1054,"未知列 'states' in 'where >clause'"]

```
public function index($stateName, $page, $limit = 10, $user = null) {
$this->State->recursive = 0;
$limit;
$set_limit = $page * $limit - ($limit);
$states = $this->State->query("SELECT * 
FROM states, issues
WHERE stateName =  '" . $stateName ."'
AND issues.state_id = states.id LIMIT " .  $set_limit . "," . $limit)       
$this->set('states', $this->paginate($states));
$this->set('_serialize', array('states'));  
} 
```

问题是另一个带有模型/控制器的表。我想以一种有意义的方式设置网址，这就是我选择将状态与问题分开的原因。感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:17:15.500

不允许在 WHERE 子句中使用别名。请参阅[列别名问题](http://dev.mysql.com/doc/refman/5.0/en/problems-with-alias.html)和 [您可以在 mysql 的 WHERE 子句中使用别名吗？](https://stackoverflow.com/questions/200200/can-you-use-an-alias-in-the-where-clause-in-mysql)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:16:50.720

您应该按照 CakePHP 的意图使用您的模型。请参阅[检索您的数据](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#retrieving-your-data)。

通过使用“自定义”查询，CakePHP 不会阻止 SQL 注入，并且您需要“手动”执行操作，最终会导致很多问题；

此外，因为您想显示所有**问题**，但要根据它们所属的**状态**过滤它们，您应该从`Issue`模型中检索数据，而不是`State`

### 指定模型关系

应用程序/模型/State.php

```
class State extends AppModel {
    public $hasMany = array(
        'Issue'
    );
} 
```

应用程序/模型/问题.php

```
class Issue extends AppModel {
    public $belongsTo = array(
        'State'
    );
} 
```

要对数据进行分页，请参阅[`Pagination`](http://book.cakephp.org/2.0/en/core-libraries/components/pagination.html#pagination)

在您的控制器内部：

```
class MyController extends AppController {

    public $paginate = array(
        'Issue' => array(
            // Default limit, can be overridden via 'limit' named parameter
            // e.g. /MyController/index/limit:20
            'limit' => 10,

            // Probably required to get 'State' in the results
            'recursive' => 1,
        );
    );

    public function index($stateName)
    {
        $conditions = array(
            'State.stateName' => $stateName
        );

        // I'll leave this name for now, better call it 'issues'?
        $states = $this->paginate('Issue', conditions)

        $this->set('states', states);
        $this->set('_serialize', array('states'));
    }
} 
```

要显示分页数据，您还应该使用[PaginatorHelper](http://book.cakephp.org/2.0/en/core-libraries/helpers/paginator.html#PaginatorHelper)

## 手动连接表/模型

如果默认的模型关系不符合您的要求，您可以手动将表连接在一起；请参阅文档中的本章：

[连接表](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#joining-tables)

**注意：** 我没有测试过这些示例，它*可能会*起作用，否则这是一个很好的起点

# google-chrome - 使用 chrome 缓存恢复 js 文件

> ID：15806352
> 
> 赞同：1
> 
> 时间：2013-04-04T08:40:45.377
> 
> 标签：google-chrome, browser-cache

我不小心用dreamweaver 删除了一个HTML 文件。我真的很想拿回这个文件，我的备份不好。所以我想使用浏览器 Chrome 的缓存来检索文件。我用谷歌搜索并找到了这个：[LINK](http://www.sensefulsolutions.com/2012/01/viewing-chrome-cache-easy-way.html)但它对我不起作用，当我下载文件并在记事本中查看它时，我看到的只是奇怪的字符。

我还可以尝试使用 Chrome 缓存取回我的文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-24T16:28:14.183

NirSoft 的 ChromeCacheView 非常适合我。

[http://www.nirsoft.net/utils/chrome_cache_view.html](http://www.nirsoft.net/utils/chrome_cache_view.html)

请注意，恢复实际文件的选项并不那么明显。F4 做到了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-17T16:45:52.383

它不容易从它的十六进制表示中提取出来。

我最近创建了一个用于从 Chrome 和 Firefox 缓存中提取文件的脚本。看看这个[要点](https://gist.github.com/zxcmehran/b4cab69b70166187f5cb)。

[请参阅这篇文章](https://medium.com/@zxcmehran/recover-the-past-4b721d73badd)中的使用指南。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T08:43:09.530

你在这个网站上下载的是一个 gzip 文件，如果你在记事本中打开它，你会得到和在 chrome://cache 网站上一样的东西。您需要先使用[7zip](http://www.7zip.org)或类似工具将其解压缩。

# php - 如何最好地将元素添加到 PHP 中任意索引处的数组？

> ID：15806366
> 
> 赞同：2
> 
> 时间：2013-04-04T08:41:29.507
> 
> 标签：php, arrays, performance, interpreter

如何编写一个解决方案，让当前的 PHP 解释器 (5.4) 足够智能，只需执行大约 3-5 个副本而不是完整的逐项数组排序？

请注意，我知道一些将元素插入索引数组的方法。然而这并不能满足我的理解。例如在**[C++](https://stackoverflow.com/a/3797526/578023)**中，您可以使用 std::copy 或将结构或联合作为多元素数组游标来执行某些操作。

所以我想知道我是否以某种方式遵守 PHP 的规则，一个人可以使用什么语法在幕后拥有更接近于

> 将 [从**某个索引**到**A 末尾的**元素**范围**] 复制到 temp C
> 
>  ****将 B 复制到 A[索引]，
> 
> 将 C 复制到 A[Index+count(B)]****

 ****比这个...

```
$MasterItemList = $Page[$CurrentPage]->GetItems();   /* Returns an array with 512 Items.         */
$UpdateList = GetUpdatePage();                       /* Returns multi-dimensional array such that: 
                                                        $result[][0]=an index and 
                                                        $result[][1]=a list of items             */

foreach($UpdateList as $Update)
{ foreach($Update as $cursor => $ItemList)
  {
    $cursor=$cursor+0;  //to int..
    $numitems=count($ItemList);

    if($ItemList[0]->NewAddition)
    {
      $BeforeUpdate=array_splice($MasterItemList,0, $cursor, true);
      $AfterUpdate=array_splice($MasterItemList, $cursor+$numitems, 0);
      $MasterItemList=array_merge($BeforeUpdate,$ItemList,$AfterUpdate);

      $Page[$CurrentPage]->OffsetCorrection+=$numitems;
    }
    else
    {
      $i=0;
      foreach($ItemList as $LineItem)
      {
        $MasterItemList[$cursor+$i] = $LineItem;
        $i++;
      }
    }
  }
} 
```

如果我记下这些错误，请原谅我，让我知道，我会纠正它们。

也就是说，我不认为解释器可以使用适当的引用和范围，以便能够直接使用此方法执行逻辑。它已经是一个看起来非常昂贵的东西了.. 可以做些什么来为 PHP 做这个“正确的方法”？

> **例子：**

```
// An Update List

Array(
    [0] => Array(
        [0] => 31
        [1] => Array(
            [1] => stdClass Object 
                (
                    [NewAddition] => false
                    [Name] => "********"
                    [Date] => 1364920943
                    [Active] => 1
                    .
                    .
                    .
                )

            [2] => stdClass Object 
                (
                    [NewAddition] => false
                    [Name] => "********"
                    [Date] => 1364920943
                    [Active] => 1
                    .
                    .
                    .
                )

            [3] => stdClass Object 
                (
                    [NewAddition] => false
                    [Name] => "********"
                    [Date] => 1364920943
                    [Active] => 1
                    .
                    .
                    .
                )

        )                
    )
) 
```

并且`MasterItemList`只是这些相同对象的数组（`class Item`）。

需要注意的几点：

*   此数据仅在与此脚本相关的任何地方以纯顺序方式访问。
*   在这部分脚本中，只需要检查新插入集合中的第一项是否更新。套装中的所有物品都将永远是新的。
*   超过 512 的项目会自动调整到下一页加载。我可以调整页面大小以在数组排序性能和数据获取性能（异步缓冲）之间进行权衡。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T08:55:09.647

首先，PHP 数组不是数据结构意义上的“数组”；它们实际上是将哈希表和双向链表合二为一。当您对数组进行索引时，例如使用`$list[$i]` `$i`散列以找到相应的元素；它不是像 C++ 中那样简单的算术。

此外，由于数组也是链表，因此它的实现`array_splice`比看起来要高效得多，至少如果要删除的部分足够小（散列新项目通常很快，并且在链表的某个位置插入项目是常数时间）。

当然，这意味着 PHP 数组比“纯”数组消耗更多的内存，而且如果您只想基于索引的访问，它们也会更慢。在这些情况下，SPL 提供[`SplFixedArray`](http://php.net/manual/en/class.splfixedarray.php)了在数据结构意义上的数组实现。

在您的特定情况下，`array_splice`应该是您的首选；您只需一次调用即可插入一个数组块：

```
array_splice($MasterItemList, $cursor, 0, $ItemList); 
```****

# c++ - 写入TCP套接字不完整的c ++

> ID：15806367
> 
> 赞同：1
> 
> 时间：2013-04-04T08:41:31.970
> 
> 标签：c++, html, string, sockets

我有一个用 C++ 编写的 HTTP 服务器。在某些时候，我想处理一个必须作为响应发送给客户端的 html 文件，并将一些预定义的标签替换为其他标签。过程如下：

```
do {
    size = read(page_fd, buffer, 1024);
    /* processing buffer - replacing variables */

    std::string tmp = std::string(buffer);
    unsigned int start = 0, end;

    do {
        start = tmp.find("#{", start);
        if (start != std::string::npos && start < tmp.length()) {
            end = tmp.find("}", start + 1);
            if (end != std::string::npos && end < tmp.length()) {
                std::string tmp2 = tmp.substr(start + 2, end - start - 2);

                tmp = tmp.replace(start, end - start + 1, params[tmp2.c_str()]);

                start = end + 1;
            }
        }
    } while (start != std::string::npos && start > end && start < tmp.length());

    char buff[512];
    memcpy(buff, tmp.c_str(), tmp.length());
    std::cout << buff << "\n\n";

    /* end of processing - writing to socket */
    write(_conn_fd, buff, tmp.length());
} while (size > 0); 
```

我要发送给客户端的 html 页面是这样的：

```
 <html>
    <head>
    <title>Index</title>
    </head>
    <body>
        <h1>It works!</h1>
        <h2>#{custom}</h2>
            <p>This page was served through a C++ HTTP server!</p>
   </body>
   </html> 
```

检查客户端收到的内容时，html代码总是不完整的，如下：

```
 <html>
    <head>
    <title>Index</title>
    </head>
    <body>
        <h1>It works!</h1>
        <h2>replaced message</h2>
            <p>This page was served through a C++ HTTP server!</p> 
```

代码中的`std::cout`行输出正确的 html 字符串。

为什么客户端没有收到完整的 html，或者如果它完全收到，为什么从浏览器看不到？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:13:24.220

您的缓冲区大小仅为 512 字节，但您发送的 tmp.length() * 5 根据我的计算 = 1040。所以 write 将读取缓冲区的末尾，导致坏事发生。

此外，您应该使用 strncpy 而不是 memcpy，因为 strncpy 将包含尾随空值，而您的 memcpy 将排除空值并保留缓冲区原样，这意味着它可能会在其中放置任何内容，从而导致您的输出为随机的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T10:05:25.743

我解决了！它是在解析和替换之前设置的内容长度。解析后，字符串的长度发生了变化，但内容长度保持不变。傻我！

# mysql - 更改数据库引擎

> ID：15806368
> 
> 赞同：3
> 
> 时间：2013-04-04T08:41:36.117
> 
> 标签：mysql, cluster-computing, database-migration

我们有一个使用全文搜索的表，因此需要使用 MyISAM 引擎：

```
DROP TABLE IF EXISTS `netyears`;
CREATE TABLE IF NOT EXISTS `netyears` (
  `PK_NETYEARID` int(11) NOT NULL auto_increment,
  `ITEMNAME` varchar(9) default NULL,
  `ISLIVE` char(1) default NULL,
  PRIMARY KEY  (`PK_NETYEARID`),
  FULLTEXT KEY `ITEMNAME` (`ITEMNAME`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=8 ; 
```

现在我正在尝试实现一个由 5 台机器组成的 mysql 集群以查看性能优势（本[教程](http://blog.secaserver.com/2012/11/centos-6-install-mysql-cluster-the-simple-way/)之后的 1 个管理节点、两个守护程序节点和两个数据节点）

我的问题：知道我要从 MyISAM 引擎切换到 NDB（集群节点之间的一致性所需）引擎时，我需要考虑哪些注意事项？

**附带说明一下**，在浏览了上表中使用的几乎所有 SQL 之后，没有使用`MATCH`or关键字。`AGAINST`这是否意味着正在实施的全文搜索毫无意义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T09:19:57.427

一些考虑因素是`NDB`引擎不支持全文搜索（`MyISAM`并且`InnoDB`是唯一支持的引擎）搜索，因此您将无法使用`MATCH`/`AGAINST`但这应该不是问题，因为您的 中没有这些语句`SQL`，是的由于您没有它们，这意味着您只需要切换引擎并将数据转储/导入到使用新`NDB`引擎的集群中。

# automation - JUnit 报告器不显示 JBehave 中每个步骤的详细报告

> ID：15806374
> 
> 赞同：3
> 
> 时间：2013-04-04T08:41:43.753
> 
> 标签：automation, report, jbehave

我正在尝试设置 JBehave 来测试 Web 服务。

模板故事运行良好，但我只能在 JUnit 面板中看到验收套件类执行结果。我想要的是查看套件中每个故事的执行结果以及故事中每个步骤的执行结果，就像它在简单的 JUnit 测试或 Thucydides 框架中显示的那样。

这是我的验收套件类：所以也许我还没有配置一些东西，或者我必须以其他方式注释我的步骤方法，但我还没有找到答案。

```
package ***.qa_webservices_testing.jbehave;

import java.util.Arrays;
import java.util.List;
import java.util.Properties;

import org.jbehave.core.Embeddable;
import org.jbehave.core.configuration.Configuration;
import org.jbehave.core.configuration.MostUsefulConfiguration;
import org.jbehave.core.io.CodeLocations;
import org.jbehave.core.io.LoadFromClasspath;
import org.jbehave.core.io.StoryFinder;
import org.jbehave.core.junit.JUnitStories;
import org.jbehave.core.parsers.RegexPrefixCapturingPatternParser;
import org.jbehave.core.reporters.CrossReference;
import org.jbehave.core.reporters.Format;
import org.jbehave.core.reporters.StoryReporterBuilder;
import org.jbehave.core.steps.InjectableStepsFactory;
import org.jbehave.core.steps.InstanceStepsFactory;
import org.jbehave.core.steps.ParameterConverters;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import ***.qa_webservices_testing.jbehave.steps.actions.TestAction;

/**
 * suite class.
 */
public class AcceptanceTestSuite extends JUnitStories {
    private static final String CTC_STORIES_PATTERN = "ctc.stories";
    private static final String STORY_BASE = "src/test/resources";
    private static final String DEFAULT_STORY_NAME = "stories/**/*.story";
    private static final Logger LOGGER = LoggerFactory.getLogger(AcceptanceTestSuite.class);

    private final CrossReference xref = new CrossReference();

    public AcceptanceTestSuite() {
        configuredEmbedder()
            .embedderControls()
            .doGenerateViewAfterStories(true)
            .doIgnoreFailureInStories(false)
            .doIgnoreFailureInView(true)
            .doVerboseFailures(true)
            .useThreads(2)
            .useStoryTimeoutInSecs(60);
    } 

    @Override
    public Configuration configuration() {
        Class<? extends Embeddable> embeddableClass = this.getClass();
        Properties viewResources = new Properties();
        viewResources.put("decorateNonHtml", "true");
        viewResources.put("reports", "ftl/jbehave-reports-with-totals.ftl");
        // Start from default ParameterConverters instance
        ParameterConverters parameterConverters = new ParameterConverters();
        return new MostUsefulConfiguration()
            .useStoryLoader(new LoadFromClasspath(embeddableClass))
            .useStoryReporterBuilder(new StoryReporterBuilder()
                .withCodeLocation(CodeLocations.codeLocationFromClass(embeddableClass))
                .withDefaultFormats()
                .withViewResources(viewResources)
                .withFormats(Format.CONSOLE, Format.TXT, Format.HTML_TEMPLATE, Format.XML_TEMPLATE)
                .withFailureTrace(true)
                .withFailureTraceCompression(false)
                .withMultiThreading(false)               
                .withCrossReference(xref)) 
            .useParameterConverters(parameterConverters)                     
            // use '%' instead of '$' to identify parameters
            .useStepPatternParser(new RegexPrefixCapturingPatternParser(
                            "%")) 
            .useStepMonitor(xref.getStepMonitor());
    }

    @Override
    protected List<String> storyPaths() {
        String storiesPattern = System.getProperty(CTC_STORIES_PATTERN);
        if (storiesPattern == null) {
            storiesPattern = DEFAULT_STORY_NAME;
        } else {
            storiesPattern = "**/" + storiesPattern;
        }
        LOGGER.info("will search stories by pattern {}", storiesPattern);
        List<String> result = new StoryFinder().findPaths(STORY_BASE, Arrays.asList(storiesPattern), Arrays.asList(""));
        for (String item : result) {
            LOGGER.info("story to be used: {}", item);
        }
        return result;
    }

    @Override
    public InjectableStepsFactory stepsFactory() {
        return new InstanceStepsFactory(configuration(), new TestAction());
    }
} 
```

我的测试方法如下：

```
Customer customer = new cutomer();

@Given ("I have Access to Server")
public void givenIHaveAccesToServer() {
    customer.haveAccesToServer();
} 
```

因此它们仅由 JBehave 符号表示。

Junit 面板返回的结果只有这里（我还没有发布图像的权利）：

![在此处输入图像描述](https://i.stack.imgur.com/J5dvT.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T09:30:43.263

你应该试试这个开源库：

[https://github.com/codecentric/jbehave-junit-runner](https://github.com/codecentric/jbehave-junit-runner)

它完全符合您的要求:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-06T04:40:49.567

是的，以代码为中心的运行程序非常好用。 [https://github.com/codecentric/jbehave-junit-runner](https://github.com/codecentric/jbehave-junit-runner) ![Eclipse Juno 和 CodeCentric Runner。](https://i.stack.imgur.com/zuO1g.png)

# java - 线程“Timer-0”java.lang.NoClassDefFoundError 中的异常：

> ID：15806379
> 
> 赞同：1
> 
> 时间：2013-04-04T08:41:59.190
> 
> 标签：java, exception, packages

我已将必要的文件（ PeriodList 类）导入到我的（接口）类中，但是当我运行程序时，我遇到了异常：

**线程“Timer-0”中的异常 java.lang.NoClassDefFoundError: Interface/PeriodList**

PeriodList**类**在 **Interface**包中，*Interface 类*在 **com.jtattoo.sample**

这是代码：

```
 package com.jtattoo.sample;

    import Interface.PeriodList;
    import javax.swing.*;
    import java.awt.*;

    public class Interface 
    {

     .
     .
     .
     public  static  void  displays(int s)
     { 

       PeriodList pe=new PeriodList();

     }
  } 
```

让我想知道的是：在该行`PeriodList pe=new PeriodList();` 中没有错误，这意味着 Netbeans 的**PeriodList 类**是明确的，并且在运行项目后会出现问题。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-04-04T08:51:54.873

1.  为什么将您的课程命名为“接口”。这非常令人困惑。
2.  您确定 Interface.PeriodList 是正确的类名吗？要导入不同包中的类，请使用

    导入包.包...包.类名；

# java - EJB 客户端调用中的 SocketTimeoutException

> ID：15806382
> 
> 赞同：1
> 
> 时间：2013-04-04T08:42:04.227
> 
> 标签：java, ejb-3.0, jboss-4.2.x

我在没有任何问题的情况下获得了对远程 EJB 实例的引用，但有时，当我调用它的一个方法时，会从客户端抛出*“java.net.SocketTimeoutException: Read timed out” 。*服务器端似乎没有问题

有没有办法在每次调用的基础上设置 EJB 客户端超时？

我正在使用一个相当旧的 JBoss 版本（4.2.1 GA）

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T04:59:17.537

1.  您可以为连接器 MBean 配置`InvokerLocater`属性。

    `<attribute name="InvokerLocator">socket://{jboss.bind.address}:3873/?socketTimeout=60000</attribute>`

2.  可以为配置属性下的配置元素提供更详细的信息。默认为一分钟。

    `<attribute name="socketTimeout">60000</attribute>`

3.  在 JNDI 属性文件中提供超时参数。

    > **jnp.timeout ：**以毫秒为单位的连接超时。默认值为 0，这意味着连接将阻塞，直到 VM TCP/IP 层超时。
    > 
    > **jnp.sotimeout ：**连接的套接字读取超时，以毫秒为单位。默认值为 0，这意味着读取将阻塞。这是传递给新连接套接字上的 Socket.setSoTimeout 的值。

    要为单个调用手动配置超时，您必须使用适当的属性值创建初始上下文。

# jquery - 使用 jQuery 进行垂直滚动

> ID：15806389
> 
> 赞同：1
> 
> 时间：2013-04-04T08:42:20.590
> 
> 标签：jquery, scroll, scrolltop

我正在尝试实现垂直滚动。单击“向下”-div 时，它将向上移动 1 个格，当单击“向上”-div 时，它将向下移动 1 个格。但它只适用于第一次点击。用户应该能够向下单击直到最后一个 div，然后应该禁用“向下”-div。

HTML：

```
<div id="up">up</div>
<div id="parent">
<div class="child">1</div>
<div class="child">2</div>
<div class="child">3</div>
<div class="child">4</div>
<div class="child">5</div>
<div class="child">6</div>
<div class="child">7</div>
<div class="child">8</div>
<div class="child">9</div>
<div class="child">10</div>
<div class="child">11</div>
</div>
<div id="down">down</div> 
```

CSS：

```
#parent{
   width:300px;
   height:288px;
   border:1px solid #000;
   overflow:hidden;
}
.child{
   width:300px;
   height:48px;
   border:1px solid #FF0000;
}
#up{
   width:30px;
   height:20px;
   background-color:#006600;
   cursor:pointer;
}
#down{
   width:40px;
   height:20px;
   background-color:#006600;
   cursor:pointer;
} 
```

Javascript：

```
$(document).ready(function(){    
   $('#down').live("click",function(){
      var scrollval = $('.child').height();
      $('#parent').scrollTop(scrollval);
   });

   $('#up').live("click",function(){
      var scrollval =  $('.child').height();
      $('#parent').scrollTop(-scrollval);
   });
}); 
```

jsfiddle：http: [//jsfiddle.net/XGXvD/](http://jsfiddle.net/XGXvD/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-04T09:19:37.177

它仅在第一次点击时起作用的原因是因为您只从顶部移动 +48px 或 -48px。您需要从当前的 scrollTop 值中减去 48。

因此，如果我们已经距顶部 96px 并且我们按下，我们希望将 48 添加到 96，如下所示：

[jsfiddle在这里](http://jsfiddle.net/XGXvD/2/)

```
 $(document).on("click", "#down", function(){
        var scrollval = $('.child').height();
        // this gives us the current scroll position
        var currentscrollval = $('#parent').scrollTop();

        $('#parent').scrollTop(scrollval+currentscrollval);
}); 
```

另外，请注意，`.live()`它已从 jQuery 1.7+ 开始贬值。您需要`.on()`像我的示例一样使用（如果您使用的是 jQuery 1.7+）

## 编辑 - 添加了显示/隐藏按钮功能

[在这里更新了 jsfiddle](http://jsfiddle.net/XGXvD/4/)

首先，您需要计算出一些变量。我在点击事件之外声明了这些，以便在需要时可以在这两个函数中使用它们。

```
// get the number of .child elements
var totalitems = $("#parent .child").length;
// get the height of .child
var scrollval = $('.child').height();
// work out the total height.
var totalheight = (totalitems*scrollval)-($("#parent").height()); 
```

**向上：**

```
// hide/show buttons
if(currentscrollval == totalheight) {
     $(this).hide();         
 }
 else {
     $("#up").show();
 } 
```

**向下：**

```
 // hide/show buttons
 if((scrollval+currentscrollval) == scrollval) {
    $(this).hide();         
 }
 else {
     $("#down").show();
 } 
```

# c# - PInvoke：返回的双精度数组有问题吗？

> ID：15806393
> 
> 赞同：3
> 
> 时间：2013-04-04T08:42:28.750
> 
> 标签：c#, c++, types, double, pinvoke

我`PInvoke`用来从我的 C# 程序中调用 C++ 函数。代码如下所示：

```
IntPtr data = Poll(this.vhtHand);
double[] arr = new double[NR_FINGERS /* = 5 */ * NR_JOINTS /* = 3*/];
Marshal.Copy(data, arr, 0, arr.Length); 
```

的签名`Poll()`看起来像这样：

```
[DllImport("VirtualHandBridge.dll")]
static public extern IntPtr Poll(IntPtr hand); 
```

C-function`Poll`的签名：

```
extern "C" __declspec(dllexport) double* Poll(CyberHand::Hand* hand) 
```

除非我有严重的脑力衰竭（诚然，这对我来说相当普遍），否则这在我看来应该是可行的。

但是，我得到的双精度值完全不正确，我认为这是因为内存使用不正确。我查了一下，我认为 C# 和 C++ 中的双打在大小上是相同的，但也许这里还有其他问题。让我感到不适的一件事是，`Marshal.Copy`它从未被告知它应该期望什么类型的数据，但我读到它应该以这种方式使用。

任何线索，有人吗？如果需要，我可以发布正确的结果和返回的结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T09:24:17.773

您缺少 CallingConvention 属性，它是 Cdecl。

您真的想要一个更好的函数签名，由于内存管理问题、所需的手动编组、获取正确大小数组的不确定性以及复制数据的要求，您拥有的函数签名非常脆弱。始终支持调用者传递您的本机代码填充的缓冲区：

```
extern "C" __declspec(dllexport)
int __stdcall Poll(CyberHand::Hand* hand, double* buffer, size_t bufferSize)

[DllImport("foo.dll")]
private static extern int Poll(IntPtr hand, double[] buffer, int bufferSize) 
```

使用 int 返回值报告状态码。就像一个负值报告错误代码，一个正值返回实际复制到缓冲区中的元素数量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T08:48:43.803

只要您正确声明 P/Invoke，您甚至不需要像这样编组数据。

如果您`CyberHand::Hand*`实际上是一个指向双精度的指针，那么您应该将您的 P/Invoke 声明为

```
[DllImport("VirtualHandBridge.dll")]
static public extern IntPtr Poll(double[] data); 
```

然后用你的双打数组调用它。

如果它*不是*真正的双打数组，那么你当然不能做你正在做的事情。

另外，您的“C”函数如何知道数组有多大？是固定尺寸吗？

IntPtr 返回值将是一个问题。`double*`指向什么？数组还是单个项目？

您会发现为您正在调用的函数编写一个更简单、更友好的“C”包装器并调用包装器函数本身会更容易（如果可以的话）。当然，只有当您可以更改“C”DLL 的源代码时，您才能这样做。但是在不确切知道你的功能做什么的情况下，我不能给你具体的建议。

[编辑]

好的，*如果*传回的内存没有被弄乱（例如释放），您的代码理论上应该可以工作。如果它不起作用，那么我怀疑正在发生类似的事情。您肯定会更好地编写一个包装器“C”函数来填充由 C# 分配的数组并传递给函数，而不是传回指向某个内部存储器的指针。

顺便说一句：我不喜欢传递指向内存块的指针而不传递该块的大小的代码。似乎有点容易发生讨厌的事情。

# c++ - 从类实例派生类？

> ID：15806404
> 
> 赞同：0
> 
> 时间：2013-04-04T08:42:56.227
> 
> 标签：c++, inheritance

如何创建一个派生类，它可以更改其基类实例中的所有变量？我知道我可以将基类变量声明为静态的，但是当我这样做时，我无法使用函数初始化它们，这使得代码非常有信息并且难以编辑。

这是一个示例类；为什么 c2 不编辑 theC1 类中的 x。如果它引用了一个不是 theC1 的 c1 类，那么引用的是什么？

```
#include <stdio.h>

class c1
{
public:
    c1( int d )
    {
        x = d;
    }
    int x;
};

class c2 : public c1
{
public:
    c2( c1& ref )
        :
    c1( ref )
    {};
    void setx()
    {
        x = 5;
    }
};

int main () 
{
    c1 theC1(4);
    c2 theC2(theC1);
    theC2.setx();

    printf( "%d\n",theC1.x );
    printf( "%d\n",theC2.x );

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T08:44:37.283

您正在使用引用来调用 的复制构造函数`c1`，而不是保存对`c1`对象的引用。你想要这样的东西：

```
class c2 : public c1
{
public:
    c2( c1& ref )
        : c1_ptr(&ref) {}

    void setx()
    {
        c1_ptr->x = 5;
        this->x   = 5;
    }
private:
    c1 * c1_ptr;
}; 
```

但是，这需要一个默认构造函数`c1`。如果您根本不想要任何构造，则可能需要使用代理类：

```
class c1_proxy
{
public:
    c1_proxy( c1& ref )
        : x(ref.x), c1_ptr(&ref) {}

    void setx()
    {
        c1_ptr->x = 5;        
    }
    int & x;
private:
    c1 * c1_ptr;
}; 
```

但是，我认为这是一种反模式。请注意，您必须手动更新所有值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T08:49:47.693

`theC1`并且`theC2`是完全独立的实例。`theC2`包含一个`c1`由 reference 初始化的类型的子对象`ref`，但它仍然（并且总是）是`c1`than的不同实例`theC1`。基类子对象是每个实例的成员，无法与or`c2`的任何其他实例“共享” 。`c2``c1`

您可以将引用存储在内部并访问它，而不是从您所追求的语义`c2`中派生。`c1`代码将如下所示：

```
class c1
{
public:
    c1( int d )
    {
        x = d;
    }
    int x;
};

class c2
{
    c1 &myC1;
public:
    c2( c1& ref )
        :
    myC1(ref)
    , x(myC1.x)
    {}
    void setx()
    {
        myC1.x = 5;
    }
    int &x;
}; 
```

当然，最好将 封装起来`x`，而不是将其公开并不得不求助于上面代码中的引用技巧。

**更新**

在更大规模上实现这一点的一种方法可能是实现相同的接口，并且`c1`实例共享一个“数据实例” ：`c2``c2``c1`

```
#include <memory>

struct c1_iface
{
  virtual int getX() const = 0;
  virtual void setX(int newX) = 0;
};

class c1 : public c1_iface
{
  int x;

public:
  virtual int getX() const { return x; }
  virtual void setX(int newX) { x = newX; }
};

class c2 : public c1_iface
{
  std::shared_ptr<c1> data_;

public:
  explicit c2(std::shared_ptr<c1> data) : data_(data) {}

  virtual int getX() const { return data_->getX(); }
  virtual void setX(int newX) { data_->setX(newX); }
}; 
```

如果您无权访问 C++11，则可以`boost::shared_ptr`改用（或仅使用手动共享，不太推荐）。

作为一个稍微脏一点的替代方案，您可以将共享指针（或其等价物）移入`c1_iface`并使函数非抽象，取消引用它。

# android - 实时播放接收到的声音时的声音回声

> ID：15806406
> 
> 赞同：4
> 
> 时间：2013-04-04T08:43:02.573
> 
> 标签：android, audio, android-audiorecord

我正在尝试使用耳机接收来自耳机麦克风`AudioRecord`的音频，并使用 .我将音频实时播放到耳机`AudioTrack`。我已经实现了所需的代码，但问题是存在令人不安的回声。我没有使用扬声器，而是使用耳机。那么，是什么导致了这个回声？我使用了在 API 级别 11 中引入的设备回声消除器，回声减少但没有消失。我知道[android 设备中的音频延迟，](http://createdigitalmusic.com/2012/07/android-high-performance-audio-in-4-1-and-what-it-means-plus-libpd-goodness-today/)但我无法理解延迟如何在我使用耳机时导致回声。请指导我正确的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-28T20:18:44.603

我认为这个问题没有通用的解决方案。原因是

1）耳机质量可能不好，由于耳机线非常靠近，麦克风和耳机之间可能存在内部耦合

2) android中的回声消除器并不是所有设备都必须实现的。尝试先查询它和设置。回声消除器的实现也可能因设备而异

3）延迟对回声消除器的性能影响很大，因为算法必须适应延迟并缓冲那么多音频。

4) 低版本的 android 有 google 自己承认的可怕的延迟问题。您可能希望迁移到更高的 android 版本，因为这些东西已经得到了很大的改进。

一般来说，任何具有直接硬件访问权限的 API，如 mic 和 camera ，性能因设备而异，并且无法保证性能。

如果您正在考虑集成，您可能希望查看 openSLES 以获得更好的音频性能并更轻松地集成到 AEC 库。

请查看 - [https://source.android.com/devices/latency_design.html](https://source.android.com/devices/latency_design.html) [Android 上的低延迟音频播放](https://stackoverflow.com/questions/14842803/low-latency-audio-playback-on-android) [https://www.youtube.com/watch?v=d3kfEeMZ65c](https://www.youtube.com/watch?v=d3kfEeMZ65c)

希望这可以帮助，

问候，什锦

# windows-runtime - 如何在 C++/CX 中使用朋友类？

> ID：15806408
> 
> 赞同：1
> 
> 时间：2013-04-04T08:43:06.370
> 
> 标签：windows-runtime, c++-cx

我需要在 B 类的函数中访问 A 类的私有成员，并且我想使用朋友类。但是，它似乎不能用作 c++ 方式。

> “错误 C3816”类 Class2 先前已使用不同的 WinRT 修饰符声明或定义

我该怎么做才能解决它？
PS：我不能在公共区域写get/set函数，因为我不想让班级用户知道私人成员。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:56:15.593

请记住*为什么*要声明 C++/CX*引用类*，它是为了允许用另一种语言编写的程序使用您的 C++ 代码。这种语言没有任何*friend*关键字的概念，它高度特定于C++语言。只有 C++ 编译器能够执行友元契约。事实上，当客户端代码是用 C# 编写时，CLR 会强制执行可访问性。因此，您的项目生成的 .winmd 文件的元数据格式根本不支持表达*朋友*的概念。所以编译器也不会。

首先检查以确保您正确使用了 C++/CX，如果您确实打算让其他语言可以访问该类，则仅使用*ref class关键字。*如果该类仅由您自己的代码使用，请使用常规 C++ 类，即不带*ref上下文关键字的普通**类。*如果它真的打算用作互操作类，那么您将别无选择，只能将成员公开。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T17:35:13.797

访问说明符是预防性的，以防止意外访问，因此特定选择 CX 朋友的 std C++ 和 stl 性能 - 例如持有 xaml 绑定数据上下文容器 - 是简单的方法。无论出于何种原因，VC++ 都是通过 OOP 混合的 WinRT ABI 的种族主义者。一种已知的替代方法是切换到生成元编程而不是 OO。为此，将模板成员函数保留在想要与消费者成为朋友的类中，并将其专门化在消费者的范围内，然后从消费者内部使用专门的版本。它有点隐藏在微软家族的友谊事件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-15T05:21:52.863

您可以通过使用解决此问题

```
friend ref class Class2; 
```

代替

```
friend class Class2 
```*

# php - 在 codeigniter-base-model MY_Model 下使用 jamierum 插入，其中数组键 (persons, students ) 是模型

> ID：15806412
> 
> 赞同：0
> 
> 时间：2013-04-04T08:43:24.967
> 
> 标签：php, codeigniter

我如何使用以下 codeigniter-base-model MY_Model 的 jamierum 插入它，其中数组键（人员、学生）是模型。

```
 $data = array (
        'persons' => array(
            'firstname' => 'john',
            'lastname' => 'doe',
            'othernames' => 'Kabiri',
            'email' => 'jondoe@yahoo.com',          
            'students' => array(
                'intake' => 'BCA-2009',     
                'admission_number' => 'BCA-001-029',        
                'date_of_admission' => strtotime('now'),        
                'former_school' => 'Former School',     
            )
        )
    ); 
```

# python - 如何根据子列表中的值删除列表中的条目

> ID：15806413
> 
> 赞同：0
> 
> 时间：2013-04-04T08:43:27.323
> 
> 标签：python, list

我有一个如下列表：

```
list = [ [1,2,3,4,5], 
         [1,2,3,3,5], 
         [1,2,3,2,5], 
         [1,2,3,4,6] ] 
```

如果满足以下条件，我想解析此列表并删除该条目：

1.  if与AND`list[i][0]`相同`list[i+1][0]`
2.  如果`list[i][4]`与`list[i+1][4]`

这将导致以下列表：

```
list = [ [1,2,3,4,5],
         [1,2,3,4,6]] 
```

任何帮助深表感谢。谢谢。

编辑：使用 Python 2.5.4

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T08:46:42.963

使用列表推导来保持所有不符合条件的内容：

```
[sublist for i, sublist in enumerate(yourlist)
    if i + 1 == len(yourlist) or (sublist[0], sublist[4]) != (yourlist[i+1][0], yourlist[i + 1][4])] 
```

因此，任何最后一行或第一个和最后一个元素与下一行中的相同列不匹配的行都是允许的。

结果：

```
>>> [sublist for i, sublist in enumerate(yourlist)
...     if i + 1 == len(yourlist) or (sublist[0], sublist[4]) != (yourlist[i+1][0], yourlist[i + 1][4])]
[[1, 2, 3, 2, 5], [1, 2, 3, 4, 6]] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T08:55:20.100

不太简洁的非列表理解版本。

```
list = [ [1,2,3,4,5], 
         [1,2,3,3,5], 
         [1,2,3,2,5], 
         [1,2,3,4,6] ]

output = []

for i, v in enumerate(list):
    if i +1 < len(list):
        if not (list[i][0] == list[i+1][0] and list[i][4] == list[i+1][4]):
            output.append(v)
    else:
        output.append(v)

print output 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T08:59:57.183

只是把一些`itertools`放在桌子上:-)

```
from itertools import izip_longest

l = [ [1,2,3,4,5], 
      [1,2,3,3,5], 
      [1,2,3,2,5], 
      [1,2,3,4,6] ]

def foo(items):
    for c, n in izip_longest(items, items[1:]):
        if not n or c[0] != n[0] or c[4] != n[4]:
            yield c

print list(foo(l)) 
```

**输出：**

```
[[1, 2, 3, 2, 5], [1, 2, 3, 4, 6]] 
```

如果您不介意这不起作用，那就创建一个新的`list`.

**编辑：**

由于您告诉我们您使用的是 2.5.4，因此您可以使用以下方法代替`izip_longest`：

```
# warning! items must not be empty :-)
def zip_longest(items):
    g = iter(items)
    next(g)
    for item in items:
        yield item, next(g, None) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T09:42:39.237

我认为列表理解最适合此代码。

```
res = [value for index, value in enumerate(a) if not (index < len(a)-1 and value[0]==a[index+1][0] and value[4]==a[index+1][4])] 
```

# python - 在 pandas DataFrame 列中存储多维数组

> ID：15806414
> 
> 赞同：19
> 
> 时间：2013-04-04T08:43:28.807
> 
> 标签：python, pandas

我希望使用 pandas 作为主要 Trace（来自 MCMC 的参数空间中的一系列点）对象。

我有一个字符串->数组的字典列表，我想将其存储在熊猫中。dicts 中的键总是相同的，并且对于每个键，numpy 数组的形状总是相同的，但是对于不同的键，形状可能不同，并且可能具有不同的维数。

我一直在使用`self.append(dict_list, ignore_index = True)`它，它似乎适用于 1d 值，但对于 nd>1 值，pandas 将值存储为不允许漂亮绘图和其他好东西的对象。关于如何获得更好行为的任何建议？

**样本数据**

```
point = {'x': array(-0.47652306228698005),
         'y': array([[-0.41809043],
                     [ 0.48407823]])}

points = 10 * [ point] 
```

我希望能够做类似的事情

```
df = DataFrame(points) 
```

或者

```
df = DataFrame()
df.append(points, ignore_index=True) 
```

并且有

```
>> df['x'][1].shape
()
>> df['y'][1].shape 
(2,1) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-05-06T17:42:48.607

相对较新的库*xray* [1] 具有完全符合您要求的结构`Dataset`。`DataArray`

这是我对您的问题的看法，以*IPython*会话的形式编写：

```
>>> import numpy as np
>>> import xray

>>> ## Prepare data:
>>> #
>>> point = {'x': np.array(-0.47652306228698005),
...          'y': np.array([[-0.41809043],
...                      [ 0.48407823]])}
>>> points = 10 * [point]

>>> ## Convert to Xray DataArrays:
>>> #
>>> list_x = [p['x'] for p in points]
>>> list_y = [p['y'] for p in points]
>>> da_x = xray.DataArray(list_x, [('x', range(len(list_x)))])
>>> da_y = xray.DataArray(list_y, [
...     ('x', range(len(list_y))),
...     ('y0', range(2)), 
...     ('y1', [0]), 
... ]) 
```

`DataArray`这是我们迄今为止构建的两个实例：

```
>>> print(da_x)
<xray.DataArray (x: 10)>
array([-0.47652306, -0.47652306, -0.47652306, -0.47652306, -0.47652306,
       -0.47652306, -0.47652306, -0.47652306, -0.47652306, -0.47652306])
Coordinates:
  * x        (x) int32 0 1 2 3 4 5 6 7 8 9

>>> print(da_y.T) ## Transposed, to save lines.
<xray.DataArray (y1: 1, y0: 2, x: 10)>
array([[[-0.41809043, -0.41809043, -0.41809043, -0.41809043, -0.41809043,
         -0.41809043, -0.41809043, -0.41809043, -0.41809043, -0.41809043],
        [ 0.48407823,  0.48407823,  0.48407823,  0.48407823,  0.48407823,
          0.48407823,  0.48407823,  0.48407823,  0.48407823,  0.48407823]]])
Coordinates:
  * x        (x) int32 0 1 2 3 4 5 6 7 8 9
  * y0       (y0) int32 0 1
  * y1       (y1) int32 0 
```

我们现在可以将这两个`DataArray`在它们的共同`x`维度上合并成一个`DataSet`：

```
>>> ds = xray.Dataset({'X':da_x, 'Y':da_y})
>>> print(ds)
<xray.Dataset>
Dimensions:  (x: 10, y0: 2, y1: 1)
Coordinates:
  * x        (x) int32 0 1 2 3 4 5 6 7 8 9
  * y0       (y0) int32 0 1
  * y1       (y1) int32 0
Data variables:
    X        (x) float64 -0.4765 -0.4765 -0.4765 -0.4765 -0.4765 -0.4765 -0.4765 ...
    Y        (x, y0, y1) float64 -0.4181 0.4841 -0.4181 0.4841 -0.4181 0.4841 -0.4181 ... 
```

我们最终可以按照您想要的方式访问和汇总数据：

```
>>> ds['X'].sum()
<xray.DataArray 'X' ()>
array(-4.765230622869801)

>>> ds['Y'].sum()
<xray.DataArray 'Y' ()>
array(0.659878)

>>> ds['Y'].sum(axis=1)
<xray.DataArray 'Y' (x: 10, y1: 1)>
array([[ 0.0659878],
       [ 0.0659878],
       [ 0.0659878],
       [ 0.0659878],
       [ 0.0659878],
       [ 0.0659878],
       [ 0.0659878],
       [ 0.0659878],
       [ 0.0659878],
       [ 0.0659878]])
Coordinates:
  * x        (x) int32 0 1 2 3 4 5 6 7 8 9
  * y1       (y1) int32 0

>>> np.all(ds['Y'].sum(axis=1) == ds['Y'].sum(dim='y0'))
True

>>>> ds['X'].sum(dim='y0')
Traceback (most recent call last):
ValueError: 'y0' not found in array dimensions ('x',) 
```

[1] 用于处理带有标签的 N 维数据的库，就像 pandas 对 2D 所做的那样：http: [//xray.readthedocs.org/en/stable/data-structures.html#dataset](http://xray.readthedocs.org/en/stable/data-structures.html#dataset)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-08-08T19:23:25.723

结合@Eike 的[回答](https://stackoverflow.com/a/15998104/623735)和@JohnSalvatier 的评论似乎很*Pandasonic*：

```
>>> import pandas as pd
>>> np = pandas.np
>>> point = {'x': np.array(-0.47652306228698005),
...          'y': np.array([[-0.41809043],
...                         [ 0.48407823]])}
>>> points = 10 * [point]  # this creates a list of 10 point dicts
>>> df = pd.DataFrame().append(points)
>>> df.x
# 0    -0.476523062287
#   ...
# 9    -0.476523062287
# Name: x, dtype: object
>>> df.y
# 0    [[-0.41809043], [0.48407823]]
#   ...
# 9    [[-0.41809043], [0.48407823]]
# Name: y, dtype: object
>>> df.y[0]
# array([[-0.41809043],
#        [ 0.48407823]])
>>> df.y[0].shape
# (2, 1) 
```

要绘制（并做所有其他很酷的 2-D Pandas 事情），您仍然必须手动将数组列转换回 DataFrame：

```
>>> dfy = pd.DataFrame([row.T[0] for row in df2.y])
>>> dfy += np.matrix([[0] * 10, range(10)]).T
>>> dfy *= np.matrix([range(10), range(10)]).T
>>> dfy.plot() 
```

[![示例二维图](https://i.stack.imgur.com/IAbb0.png)](https://i.stack.imgur.com/IAbb0.png)

要将其存储在磁盘上，请使用`to_pickle`：

```
>>> df.to_pickle('/tmp/sotest.pickle')
>>> df2 = pd.read_pickle('/tmp/sotest.pickle')
>>> df.y[0].shape
# (2, 1) 
```

如果你使用`to_csv`你`np.array`的 s 成为字符串：

```
>>> df.to_csv('/tmp/sotest.csv')
>>> df2 = pd.DataFrame.from_csv('/tmp/sotest.csv')
>>> df2.y[0]
# '[[-0.41809043]\n [ 0.48407823]]' 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-14T10:35:04.390

这有点违背 Pandas 的哲学，后者似乎被`Series`视为一维数据结构。因此，您必须`Series`手动创建，告诉他们他们有数据类型`"object"`。这意味着不应用任何自动数据转换。

你可以这样做（重新排序的 Ipython 会话）：

```
In [9]: import pandas as pd

In [1]: point = {'x': array(-0.47652306228698005),
   ...:          'y': array([[-0.41809043],
   ...:                      [ 0.48407823]])}

In [2]: points = 10 * [ point]

In [5]: lx = [p["x"] for p in points]

In [7]: ly = [p["y"] for p in points]

In [40]: sx = pd.Series(lx, dtype=numpy.dtype("object"))

In [38]: sy = pd.Series(ly, dtype=numpy.dtype("object"))

In [43]: df = pd.DataFrame({"x":sx, "y":sy})

In [45]: df['x'][1].shape
Out[45]: ()

In [46]: df['y'][1].shape
Out[46]: (2, 1) 
```

# android - Android - 如何设置一个特定的日历插入一个有意图的事件

> ID：15806417
> 
> 赞同：3
> 
> 时间：2013-04-04T08:43:41.913
> 
> 标签：android, android-intent, calendar

```
public static void insertEventWithName(Context ctx, long id, String eventName, String descriptionEvent, Calendar beginTime) {

    intent.putExtra(Events.CALENDAR_ID, (int) id);
    Intent intent = new Intent(Intent.ACTION_INSERT);
    intent.setData(Events.CONTENT_URI);
    intent.putExtra(Events.TITLE, eventName);
    intent.putExtra(Events.DESCRIPTION, descriptionEvent);
    intent.putExtra(CalendarContract.EXTRA_EVENT_BEGIN_TIME,beginTime.getTimeInMillis());
    intent.putExtra(Events.ACCESS_LEVEL, Events.ACCESS_PRIVATE);
    intent.putExtra(Events.AVAILABILITY, Events.AVAILABILITY_BUSY);
    ctx.startActivity(intent);
} 
```

为了插入事件，我使用此代码，但始终设置为 last used calendar 。我想用我的身份证查看日历

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-16T22:58:52.703

尝试添加日历名称而不是其 ID。

```
 intent.putExtra(CalendarContract.Calendars.ACCOUNT_NAME, "test@gmail.com") 
```

对我来说，它会在打开选定的日历应用程序时设置特定的日历。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-19T09:17:13.537

我可以通过调用意图来调用特定的日历，`setData`如下所示：

```
intent.setData(buildCalUri()); 
```

其中 buildCalUri 返回用于创建特定日历的 URI

```
public static Uri buildCalUri() {
        return CalendarContract.Calendars.CONTENT_URI.buildUpon()
                .appendQueryParameter(CalendarContract.CALLER_IS_SYNCADAPTER, "true")
                .appendQueryParameter(CalendarContract.Calendars.ACCOUNT_NAME, ACCOUNT_NAME)
                .appendQueryParameter(CalendarContract.Calendars.ACCOUNT_TYPE, ACCOUNT_TYPE).build(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-01T11:44:14.050

```
Intent intent = new Intent(Intent.ACTION_EDIT)
        .setType("vnd.android.cursor.item/event")
        .setData(CalendarContract.Events.CONTENT_URI)
        .putExtra(CalendarContract.Calendars.NAME, APPOINTMENT_CALENDAR_NAME)
        .putExtra(CalendarContract.Calendars.ACCOUNT_NAME, EMAIL)
        .putExtra(CalendarContract.Calendars.CALENDAR_DISPLAY_NAME, APPOINTMENT_CALENDAR_NAME)
        .putExtra(CalendarContract.Events.CALENDAR_ID, getCalendarID(EMAIL, APPOINTMENT_CALENDAR_NAME));
startActivity(intent); 
```

尝试给它更多的参数来区分。我也面临同样的问题，但是当我提供上述详细信息时，它重定向到正确的日历。希望能帮助到你。

# asp.net - 使用 asp.net 的带有复选框列表的嵌套中继器

> ID：15806418
> 
> 赞同：0
> 
> 时间：2013-04-04T08:43:43.753
> 
> 标签：asp.net, .net, vb.net, repeater

我正在尝试用里面的复选框做一个嵌套的中继器控件。基本上，我想要的是对复选框进行分类，例如，

```
Group 1
   Item 1
   Item 2

Group 2
   Item 3
   Item 4

Group 3
   Item 5
   Item 6 
```

我面临的问题是，我收到错误：

错误 1：未声明“DataRowView”。由于其保护级别，它可能无法访问。
错误 2：未声明名称“DataRowView”。

ASPX：

```
 <asp:Repeater ID="rp_Groups" runat="server" OnItemDataBound="rp_Groups_ItemDataBound" >
        <ItemTemplate>
            <ul>
                <asp:CheckBox runat="server" ID="chk_Group" Text='<%# Eval("category_type") %>' Value='<%# Eval("service_type_category_id") %>' onclick="OnGroupClick" />
                <p class="nested">
                 <asp:CheckBoxList runat="server" ID="chk_Items" DataValueField="ServiceTypeID" DataTextField="Name"
                 DataSource='<%# ((DataRowView)Container.DataItem).CreateChildView("FK_esnServiceType_Service_Type_Categorization") %>' ></asp:CheckBoxList>

                </p>
            </ul>
        </ItemTemplate>
    </asp:Repeater> 
```

代码隐藏：

```
Public Sub Fill()  
    Dim dtServiceCategory As DataTable = ServiceTypeModel.GetService_Categories()
    Dim dtServiceType As DataTable = ServiceTypeModel.Search("", True)

    rp_Groups.DataSource = dtServiceCategory
    rp_Groups.DataBind()

    Dim ds As New DataSet()
    ds.Tables.Add(dtServiceCategory)
    ds.Tables.Add(dtServiceType)

    Dim relation As New DataRelation("FK_esnServiceType_Service_Type_Categorization", ds.Tables("dtServiceCategory").Columns("service_type_category_id"), ds.Tables("dtServiceType").Columns("CategorizationID"), False)
    ds.Relations.Add(relation)
    relation.Nested = True
End Sub

Protected Sub rp_Groups_ItemDataBound(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.RepeaterItemEventArgs) Handles rp_Groups.ItemDataBound
    Dim chklist As CheckBoxList = DirectCast(e.Item.FindControl("chk_Items"), CheckBoxList)
    If chklist IsNot Nothing Then
        chklist.DataSource = DirectCast(e.Item.DataItem, DataRowView).CreateChildView("FK_esnServiceType_Service_Type_Categorization")
        chklist.DataBind()
    End If
End Sub 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T08:57:57.887

您应该检查事件中触发了哪个 itemtype `ItemDataBound`，这可能是问题，也可能不是问题，因为您没有页眉和页脚模板，但这仍然是一个好习惯。

```
Protected Sub rp_Groups_ItemDataBound(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.RepeaterItemEventArgs) Handles rp_Groups.ItemDataBound
  If e.Item.ItemType = ListItemType.Item OrElse e.Item.ItemType = ListItemType.AlternatingItem Then
    Dim chklist As CheckBoxList = DirectCast(e.Item.FindControl("chk_Items"), CheckBoxList)
    If chklist IsNot Nothing Then
      chklist.DataSource = DirectCast(e.Item.DataItem, DataRowView).CreateChildView("FK_esnServiceType_Service_Type_Categorization")
      chklist.DataBind()
    End If
  End If
End Sub 
```

**编辑**

我刚刚注意到您在绑定中继器的数据源之后添加了关系。`.databind`添加关系后尝试移动。

**编辑 2**

好的，你可以试试这个。添加`datatables`到`dataset`并将转发器数据源设置为：`ds.Tables(0)`

```
Public Sub Fill() 
    Dim ds As New DataSet() 
    Dim dtServiceCategory As DataTable = ServiceTypeModel.GetService_Categories()
    Dim dtServiceType As DataTable = ServiceTypeModel.Search("", True)
    ds.Tables.Add(dtServiceCategory)
    ds.Tables.Add(dtServiceType)
    Dim relation As New DataRelation("FK_esnServiceType_Service_Type_Categorization", ds.Tables("dtServiceCategory").Columns("service_type_category_id"), ds.Tables("dtServiceType").Columns("CategorizationID"), False)
    relation.Nested = True
    ds.Relations.Add(relation)

    rp_Groups.DataSource = ds.Tables(0)
    rp_Groups.DataBind()
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T08:45:57.117

确保您已导入命名空间 System.Data

尝试添加

```
<%@ Import Namespace="System.Data" %> 
```

到您的 ASPX 文件。

作为另一种选择，您可以全局导入命名空间，而不仅仅是在一个页面中：

[http://msmvps.com/blogs/simpleman/archive/2006/01/11/80804.aspx](http://msmvps.com/blogs/simpleman/archive/2006/01/11/80804.aspx)

# ios - Xcode在返回按钮后将UIWebView调整为内容

> ID：15806419
> 
> 赞同：1
> 
> 时间：2013-04-04T08:43:47.400
> 
> 标签：ios, iphone, xcode, ipad

我正在构建一个应用程序，它从 Web 提要 (JSON) 获取其 HTML 内容。页面的长度从单行到数百行不等。虽然 UIWebView 完全能够滚动，但我需要 UIWebView 下的 UITableView 来显示额外的菜单项。这意味着我需要滚动整个视图而不仅仅是 UIWebView。这也意味着 UIWebView 根本不应该滚动，它应该缩放到内容。

![总之，我的看法是这样的：](https://i.stack.imgur.com/7Xg8Z.png)

UIImageView 是页眉，UIWebView 是内容，UITableView 是页脚菜单。隐藏的按钮用于创建自身的 segue。

我使用以下代码调整 UIWebView 的大小：

```
-(void)webViewDidFinishLoad:(UIWebView *)webView{
     WebView.frame = CGRectMake(WebView.frame.origin.x, WebView.frame.origin.y, WebView.frame.width, [WebView sizeThatFits:CGSizeZero].height);
} 
```

这适用于 UIWebView 并且可以正确调整大小。然而，UITableView 显示在调整大小的 UIWebView 上，它根本不会被更大的 UIWebView 推倒。

其次，这个视图本身有一个 Segue（它就像一个带有内部引用的 wiki 结构），它就像一个魅力。但是当我返回一个页面时，UIWebView 再次保持其原始大小，它不会调整大小。segue 使应用程序以某种方式忘记了 UIWebView 的新大小。

正如你所看到的，我正在为此苦苦挣扎，当我需要一些“相对定位”时，一切似乎都是静态和绝对的。但话又说回来，我是 iOS 编程的新手，并且像 Web 开发人员一样思考。为什么 segue 不记得 UIWebView 的高度？为什么 UITableView 没有下推？我在这里想念什么？（我一定是错过了什么大事吧？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T08:56:50.593

您可以将控件一个接一个地放置，如下所示

```
CGRect rect=imageView.frame;
float y=rect.origin.y;

//We need to just change the y from the next control so for the next control y would be.

y=y+rect.size.height+20.0;// 20.0 px padding

//Now use the above rect to set the frame for next control in your case its webview

rect=webView.frame;

rect.origin.y=y;

webView.frame=rect; //Re-Assign with changed y value

//Now move to next

y=y+rect.size.height+20.0;// 20.0 px padding

rect=tblView.frame;

rect.origin.y=y;

tblView.frame=rect; //Re-Assign with changed y value 
```

您的所有控件应该一个接一个地垂直对齐，您可以将此代码放在一个方法中，并在您感觉到任何控件的框架发生变化时调用该方法..

希望这可以帮助..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T09:01:33.100

要`TableView`根据自己进行调整，请在内部`Webview`设置您的`TableView` `frame`使用，`height``webview``webViewDidFinishLoad`

```
-(void)webViewDidFinishLoad:(UIWebView *)webView{
     WebView.frame = CGRectMake(WebView.frame.origin.x, WebView.frame.origin.y, WebView.frame.width, [WebView sizeThatFits:CGSizeZero].height);
     TableView.frame = CGRectMake(TableView.frame.origin.x,WebView.frame.size.height + 20.0,TableView.frame.size.width,TableView.frame.size.height); // like this
} 
```

# java-me - 无法在 j2me 中获取手机号码

> ID：15806421
> 
> 赞同：1
> 
> 时间：2013-04-04T08:43:51.137
> 
> 标签：java-me, pim

当我尝试使用以下方式获取电话簿联系人时：

```
contactInfo.mobileNo = contactItem.getString(Contact.TEL,0); 
```

我只在**Phone number**条目下获得数字，而不在**Mobile number**下显示条目。

如何获取手机号码下的电话簿条目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T09:02:18.147

您只获取一个元素，需要循环

**contactItem.getString(Contact.TEL,0);**

```
import java.util.Enumeration;
import javax.microedition.midlet.*;
import javax.microedition.lcdui.*;
import javax.microedition.pim.Contact;
import javax.microedition.pim.ContactList;
import javax.microedition.pim.PIM;

String str = "";
try {
    PIM pim = PIM.getInstance();
    String[] names = pim.listPIMLists(PIM.CONTACT_LIST);
    pim.openPIMList(PIM.CONTACT_LIST, PIM.READ_ONLY, names[0]);
    ContactList addressbook = (ContactList) (pim.openPIMList(PIM.CONTACT_LIST, PIM.READ_ONLY));
    Contact contact = null;
    String phoneNumber = null;
    Enumeration items = null;
    items = addressbook.items();
    while (items.hasMoreElements()) {
        contact = (Contact) items.nextElement();
        int telCount = contact.countValues(Contact.TEL);
        int nameCount = contact.countValues(Contact.FORMATTED_NAME);

        if (telCount > 0 && nameCount > 0) {

            String contactName = contact.getString(Contact.FORMATTED_NAME, 0);
            System.out.println("\n\nName: "+contactName);
            str += "\n\nName: "+contactName;
            for (int i = 0; i < telCount; i++) {
                phoneNumber = contact.getString(Contact.TEL, i);
                System.out.println("\nNumber: "+phoneNumber);
                str += "\nNumber: "+phoneNumber;
            }
        }
    }
} catch (SecurityException e) {
} catch (Exception e) {
} 
```

# xcode - 当我推入 UITableView 中的任何行时，如何打开另一个 viewController？

> ID：15806428
> 
> 赞同：0
> 
> 时间：2013-04-04T08:44:15.423
> 
> 标签：xcode, uitableview

请用我`tableView`的 xCode 帮助我。

所以我有我的代码：

```
-(void)viewDidLoad {

    UIView *containerView = [[[UIView alloc] initWithFrame:CGRectMake(0, 0, -150, 45)] autorelease];

    UILabel *headerLabel = [[[UILabel alloc] initWithFrame:CGRectMake(10, 20, 400, 40)] autorelease];

    headerLabel.text = @"My table";

    headerLabel.textColor = [UIColor greenColor];

    headerLabel.shadowColor = [UIColor blackColor];

    headerLabel.shadowOffset = CGSizeMake(0, 1);

    headerLabel.font = [UIFont boldSystemFontOfSize:22];

    headerLabel.backgroundColor = [UIColor clearColor];

    [containerView addSubview:headerLabel];

    self.tableView.tableHeaderView = containerView;

    self.tableData = [NSArray arrayWithObjects:@"Eggs",@"Milk", @"Chocolate", @"Drink", @"Banana", @"Apple", @"Fruit", nil];        
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    //Поиск ячейки

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {

        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault
                                       reuseIdentifier:CellIdentifier] autorelease];
    }

    cell.textLabel.text = [tableData objectAtIndex:indexPath.row];

    return cell;
}

    -(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath  *)indexPath{

    UIViewController *Main = [self.storyboard instantiateViewControllerWithIdentifier:@"Main"];

    [self.navigationController pushViewController:Main animated:YES];

    UIViewController *Main2 = [self.storyboard instantiateViewControllerWithIdentifier:@"Main2"];
    [self.navigationController pushViewController:Main2 animated:YES];

} 
```

当我按下“鸡蛋”行时，将打开另一个带有鸡蛋的视图控制器。但我想要那个，当我推“牛奶”行时，会打开牛奶页面，但是当我推@“牛奶”行时，我有“鸡蛋”页面......谢谢你的帮助......非常感谢。我认为它适用于索引..但我不知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:01:53.163

尝试一下....

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath  *)indexPath
{
    if (indexPath.row == 0) 
    {
        UIViewController *Main = [self.storyboard instantiateViewControllerWithIdentifier:@"Main"];
        [self.navigationController pushViewController:Main animated:YES];
    }

    if (indexPath.row == 1) 
    {
        UIViewController *Main2 = [self.storyboard instantiateViewControllerWithIdentifier:@"Main2"];
        [self.navigationController pushViewController:Main2 animated:YES];
    }
} 
```

希望对你有帮助......

# jquery-mobile - jquery mobile触发点击第一次不起作用

> ID：15806432
> 
> 赞同：3
> 
> 时间：2013-04-04T08:44:32.750
> 
> 标签：jquery-mobile, jquery

我有一个带有多个无线电输入的 jquery 移动表单，带有选项“DS”、“NO”和“YES”。我希望当我单击一个按钮时，它会模拟单击所有单选按钮的“是”选项。

我使用这段代码：

```
$("#btn-all-yes").click(function(){
    $(".replay-yes").each(function(index, element){
        $(element).trigger("click");                  
        //$(element).click();       
    });
}); 
```

但是我需要在按钮中单击两次才能达到预期的效果。如果我将 '$(element).trigger("click")' 行两次，它可以工作，但我认为它应该与对 click 事件的一次调用一起工作。

[您可以在http://jsfiddle.net/qwLPH/7/](http://jsfiddle.net/qwLPH/7/)查看所有代码

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T09:08:37.710

您需要使用更改其状态`.prop`，然后刷新它`.checkboxradio('refresh')`。

[**工作演示**](http://jsfiddle.net/Palestinian/f67DD/)

**更新**- 取消选中其他按钮

```
$("#btn-all-yes").click(function () {
 $('[data-role="controlgroup"]').find("[type=radio]").each(function () {
  if ($(this).hasClass('replay-yes')) {  
   $(this).prop('checked', true).checkboxradio("refresh");
  } else {
     $(this).prop('checked', false).checkboxradio("refresh");
    }
 });
}); 
```

* * *

**旧答案**

```
$("#btn-all-yes").click(function(){
 $(".replay-yes").each(function(index, element){
    $(element).prop('checked', true).checkboxradio("refresh");                  
 });
}); 
```

*   [参考](http://api.jquerymobile.com/checkboxradio/#method-refresh)
*   [类似问题](https://stackoverflow.com/questions/15706443/jquery-prop-function-not-working-to-uncheck-box/15706574#15706574)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-04T10:06:26.540

尝试初始化点击页面加载：

```
$(".replay-yes").each(function (index, element) {
    $(element).trigger("click");
    //$(element).click();       
}).click();
//-^^^^^^^----------this way 
```

### [在这里试用小提琴](http://jsfiddle.net/qwLPH/9/)

# java - 下面的代码中哪种类型的类“文件面板”？

> ID：15806435
> 
> 赞同：-1
> 
> 时间：2013-04-04T08:44:39.673
> 
> 标签：java, eclipse

在这段代码中，我们在下面的代码中称为类“文件面板”。它既不是静态内部也不是内部，那么我们称之为什么？我想使用 AST 解析器从 java 代码中检查这种类型的类

```
 public class choosefile extends JFrame implements ActionListener{
    private static final long serialVersionUID = 1L;
    JButton file,go;
    private Dimension preferredDimensions;
    public choosefile(){
        preferredDimensions = new Dimension(800, 700);
            JFrame frame=new JFrame();
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            frame.setResizable(false);
            filepanel filepnl=new filepanel();
            frame.setPreferredSize(preferredDimensions);
            frame.add(filepnl);
            frame.pack();
            frame.setLocation(50,0);
            frame.setVisible(true);

    }
    @Override
    public void actionPerformed(ActionEvent e)
    {

    }
    public static void main(String[] args)
    {
        new choosefile();
    }

}
class filepanel extends JPanel implements ActionListener{

    private static final long serialVersionUID = 1L;
    JScrollPane scroll,scroll1;
     JScrollBar bar;
    JButton file,go;
    JTextField txtbx;
    JTextArea txtarea1,txtarea2;
    public filepanel()
    {
         try {
                initComponents();

            } catch (Exception ex) {
                JOptionPane.showMessageDialog(null, "Could not load frame", "Main Menu Error: 0x004", JOptionPane.ERROR_MESSAGE);
                System.exit(4);
            }
    }
      private void initComponents() throws Exception {
          setLayout(new GridBagLayout());
           GridBagConstraints c = new GridBagConstraints();
          file=new JButton("Choose File..");
         // JButton button1 = new JButton("1");
           file.addActionListener(this);

           c.fill = GridBagConstraints.PAGE_START;
           c.gridx = 0;
           c.gridy = 0;
           add(file, c);

           txtbx = new JTextField(" ");
           txtbx.setPreferredSize(new Dimension(150, 20));
           c.fill = GridBagConstraints.CENTER;
           c.weightx = 0.0;
           c.gridx = 1;
           c.gridy = 0;

           add(txtbx , c);

           go = new JButton(" Go ");
           go.addActionListener(this);

           go.setPreferredSize(new Dimension(5, 20));
           c.fill = GridBagConstraints.HORIZONTAL;
           c.weightx = 0.5;
           c.gridx = 2;
           c.gridy = 0;
           //c.insets = new Insets(0,350,0,0);
           add(go, c);
          txtarea1=new JTextArea();
          scroll = new JScrollPane(txtarea1);
           scroll.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS);

          txtarea1.setPreferredSize(new Dimension(250, 620));
          c.fill = GridBagConstraints.HORIZONTAL;
           c.weightx = 0.5;
           c.gridx = 0;
           c.gridy = 1;
           c.insets = new Insets(0,10,0,0);
           add(scroll, c);
           txtarea2=new JTextArea();
           scroll1 = new JScrollPane(txtarea2);
           scroll1.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS);
              txtarea2.setPreferredSize(new Dimension(250, 620));
              c.fill = GridBagConstraints.HORIZONTAL;
               c.weightx = 0.5;
               c.gridx = 1;
               c.gridy = 1;
               c.insets = new Insets(0,3,0,0);
               add(scroll1, c);

      }
    @Override
    public void actionPerformed(ActionEvent e) {

        if(e.getSource() == file)
        {
            JFileChooser fileopen = new JFileChooser();
            FileNameExtensionFilter filter = new FileNameExtensionFilter(".java", ".java");
            fileopen.addChoosableFileFilter(filter);

            int ret = fileopen.showDialog(null, "Open file");

            if (ret == JFileChooser.APPROVE_OPTION) {
              File file = fileopen.getSelectedFile();       
              String text = readFile(file);
              txtarea1.setText(text);
             text=search(file);
              txtarea2.setText(text);
            }
        }
        }
    private String readFile(File file2)
    {
    StringBuffer fileBuffer = null;
        String fileString = null;
        String line = null;
    try
    {
            FileReader in = new FileReader(file2);
            BufferedReader brd = new BufferedReader(in);
            fileBuffer = new StringBuffer();

            while ((line = brd.readLine()) != null) {
               fileBuffer.append(line).append( System.getProperty("line.separator"));

               }

            in.close();
            fileString = fileBuffer.toString();
        } catch (IOException e) {
            return null;
        }
        return fileString;
    }
    String search(File file1){
        //JTree tree = new JTree();
        StringBuffer fileBuffer = null;
        String fileString = null;

          try{
                // Open the file that is the first 
                // command line parameter
                FileInputStream fstream = new FileInputStream(file1);

                BufferedReader br = new BufferedReader(new InputStreamReader(fstream));
                String strLine;
                fileBuffer = new StringBuffer();

                //Read File Line By Line            
                while ((strLine = br.readLine()) != null){
                     if (strLine.contains("import")){

                         fileBuffer.append("The import library  is: " + strLine.substring(strLine.indexOf("import ") + 6, strLine.indexOf(";"))).append( System.getProperty("line.separator"));
                         //System.out.println ("The import library  is: " + strLine.substring(strLine.indexOf("import ") + 6, strLine.indexOf(";")));
                     }

                    if (strLine.contains("class")){
                         fileBuffer.append("The class name is: " + strLine.substring(strLine.indexOf("class ") + 6, strLine.indexOf("{"))).append( System.getProperty("line.separator"));

                       // System.out.println ("The class name is: " + strLine.substring(strLine.indexOf("class ") + 6, strLine.indexOf("{")));
                    }

                     if (strLine.contains("int")){
                         fileBuffer.append("There is an int variable named: " + strLine.substring(strLine.indexOf("int ") + 4, strLine.indexOf(";"))).append( System.getProperty("line.separator"));

                        //System.out.println("There is an int variable named: " + strLine.substring(strLine.indexOf("int ") + 4, strLine.indexOf(";")));
                    }
                     if (strLine.contains("//")){
                         fileBuffer.append("Comment contains: " + strLine.substring(strLine.indexOf("//") + 2));

                        //System.out.println("Comment contains: " + strLine.substring(strLine.indexOf("//") + 2));
                    }
                    // fileBuffer.append(strLine).append( System.getProperty("line.separator"));

                }

                //Close the input stream
                in.close();
                fileString = fileBuffer.toString();
            }

            catch (Exception e){
                //Catch exception if any
                System.err.println("Error: " + e.getMessage());
            }

        return fileString;

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T08:47:45.683

`filepanel`只是在与类相同的文件中定义的*另一个* 。您可以在 .java 文件中定义任意数量的类。但是每个 .java 文件只能有一个*公共类。*`Class``.java``choosefile`

# ef-code-first - 编码第一个一对一外键

> ID：15806437
> 
> 赞同：0
> 
> 时间：2013-04-04T08:44:54.550
> 
> 标签：ef-code-first

我有两个模型类，我想在其中建立一对一的关系。当我进行迁移时，我收到一个错误：

> ALTER TABLE 语句与 FOREIGN KEY 约束“FK_dbo.Uzytkownik_dbo.UserProfile_UserId”冲突。冲突发生在数据库“db_wydarzenia”、表“dbo.UserProfile”、列“UserId”中。

```
 [Table("UserProfile")]
    public class UserProfile
    {
        [Key]
        [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
        public int UserId { get; set; }
        public string UserName { get; set; }
    }

    [Table("Uzytkownik")]
    public class Uzytkownik
    {
        [Key]
        public int UzytkownikID { get; set; }

        public int UserId { get; set; }

        public string Imie { get; set; }
        public string Nazwisko { get; set; }
        public string Telefon { get; set; }
        public string Email { get; set; }

        [ForeignKey("UserId")]
        public UserProfile UserProfile { get; set; }

    } 
```

编辑：问题已解决 :) 我从 uzytkownik 表中删除了所有数据，它就可以了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:06:22.440

如果您想要一对一 - 您不能同时指定主键和外键。一对一是通过主键（pk == pk）建模的，否则它变成“多重性”（并且只是典型的一对多）。

要获得您想要的内容，只需删除您的其他 PK - 并将用户`UserId`作为主要用户和 fk...

```
[Table("Uzytkownik")]
public class Uzytkownik
{
    // [Key] public int UzytkownikID { get; set; }
    [Key] 
    public int UserId { get; set; }
    [ForeignKey("UserId")]
    public UserProfile UserProfile { get; set; }
} 
```

# shell - 在 informatica 中捕获数据错误

> ID：15806444
> 
> 赞同：0
> 
> 时间：2013-04-04T08:45:29.520
> 
> 标签：shell, informatica

实际上，我有一个调用 informatica 工作流的 shell 脚本。但如果需要，我想在脚本中添加一个功能以在处理工作流中的数据时捕获数据错误，并在屏幕上显示错误消息（由于错误数据而出现错误。请参阅日志）。目前已生成日志，但我无法使用 shell 脚本显示屏幕消息。

下面是调用工作流的命令

```
pmcmd startworkflow -sv CSA_DEV_INT -d Domain_CSADevelopment -u Administrator -p Administrator -f Sumit -wait wf_ERROR_LOG_TESTING
pwc_status=$? 
```

但值`pwc_status`是 0 而我处理了错误的数据。和 informatica 日志捕获错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:53:41.363

只要`pmcmd`调用本身成功（即找到服务器，用户可以通过身份验证，工作流启动）它就会返回0，即使在处理数据时出现错误。使用实用程序的`getworkflowdetails`或`gettaskdetails`命令`pmcmd`获取与工作流执行相关的详细信息。

有关这些命令的更多信息，请参阅*命令参考*- 您可以在服务器上的 Informatica 安装目录中找到它，或从[Informatica 我的支持站点](https://communities.informatica.com/)下载（您需要是注册用户）。

# git - Git：如何找出标签在哪个分支上？

> ID：15806448
> 
> 赞同：105
> 
> 时间：2013-04-04T08:45:34.193
> 
> 标签：git, tags, branch

我目前正忙于一个有很多分支的项目，并且我有一个标记用于最后一次更改，该更改是在其中一个分支上完成的。但我不清楚这个标签在哪个分支上。

如何找出标签在哪个分支上？

* * *

## 回答 #1

> 赞同：145
> 
> 时间：2013-04-04T08:57:03.930

更短：

```
git branch --contains tags/<tag> 
```

（它适用于任何树状参考）

* * *

如果您可以找到[标签所指的提交](https://stackoverflow.com/a/1863712/6309)：

```
 git rev-parse --verify tags/<tag>^{commit}
 # or, shorter:
 git rev-parse tags/<tag>~0 
```

然后您可以找到[包含该提交的分支](https://stackoverflow.com/q/1419623/6309)。

```
git branch --contains <commit> 
```

* * *

正如[user3356885](https://stackoverflow.com/users/3356885/user3356885)在下面[评论](https://stackoverflow.com/questions/15806448/git-how-to-find-out-on-which-branch-tag-is/15806668?noredirect=1#comment62261119_15806668)的那样，对于获取的分支（远程命名空间中的分支）

```
git branch -a --contains tags/<tag>
git branch -a --contains <commit> 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2016-05-12T16:14:39.503

如果“git branch --contains”什么都不做，请确保您包含所有分支，包括远程和本地分支：

```
git branch -a --contains <tag> 
```

> 从 git 帮助：
> 
> 具体的 git-branch 操作：-a, --all 列出远程跟踪和本地分支

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-03-27T13:46:19.467

关于@VonC 关于查找标签引用的提交的评论，只需使用：

```
git show <tag> 
```

由于标签与特定提交相关联，因此它可用于显示该提交 - 这将为您提供完整的提交详细信息。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-10-28T14:31:31.047

```
git branch --contains tag 
```

对我没有任何帮助，但我在**git gui**中找到了解决这个问题的方法。

像这样开始：

```
git gui 
```

（在我的 Ubuntu 上，我必须先安装它`sudo apt-get install git-gui`。）

然后我选择了菜单项*Repository -> Visualize All Branch History*。然后在结果窗口中选择菜单项*File -> List References*。

另一个窗口弹出，列出了我所有的标签（和其他参考）。这些是可点击的，点击其中一个后，我只需要检查左下角的分支列表即可。像这样：

```
Parent: somesha (message)
Parent: someothersha (another message)
Child:  anothersha (yet another message)
Branches: branch1, master, remotes/origin/branch2, remotes/upstream/branch1, etc
Follows: v1.1.2
Precedes: v1.1.4 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-06-10T11:11:42.523

你也可以试试这个，有类似的用例，这对我有用

```
git ls-remote --heads origin | grep $CI_COMMIT_SHORT_SHA  | sed "s/.*\///" 
```

略有不同，但从@ttfreeman 的回答中汲取灵感

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-04T08:56:30.757

使用标签可以标记参考。因此，当您在开发分支上并标记此状态时。您的标签在实际参考上。因此，在这种情况下，您可以查看**gitk**或其他显示树的工具。在那里你可以看到标签在哪个参考上。

[git：是否有类似每个分支的标签？](https://stackoverflow.com/questions/5703237/git-is-there-something-like-per-branch-tags)
[http://git-scm.com/book/en/Git-Basics-Tagging](http://git-scm.com/book/en/Git-Basics-Tagging)

这是一个很好的解释。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-11-04T13:26:43.873

标签总是指提交号。使用该标签号，您可以使用以下命令找到放置标签的分支：

```
git for-each-ref | grep ${commit_num} | grep origin | sed "s/.*\///" 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2021-08-19T19:57:44.003

**步骤 1\. 获取提交 ID：**

```
git show {tag name} 
```

**步骤 2\. 复制提交 ID 并粘贴以获取所有分支：**

```
By example:
git branch --contains 94a152c2d1c6830c5a044ecf20526d51e64bda83 
```

# python - 我可以打印其中只有 ($) 变量的结果吗

> ID：15806449
> 
> 赞同：-3
> 
> 时间：2013-04-04T08:45:37.073
> 
> 标签：python

```
import os
def find_method(name):
          found = False
    for i, line in enumerate(file(name, "r")):
        for key in found_dic:
            if key in line.strip():
                found_dic[key].append("LINE:"+str(i)+":" + line.strip())
                found = True 
```

问题：
正如您在导入操作系统中看到的，它会打印所有结果。（例如包含）如果包含在文件中，它会打印所有文件，但我只想打印前）包含 $ <-- 像这样，只有在文件中有 $variable 和搜索词的情况下才能修复此打印。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:36:37.343

用于`if '$' in s`检查字符串是否`s`包含字符`$`。

如果我得到你的问题，你可能想改变

```
 for r in found_dic[key]:
               print "  ",r 
```

到

```
 for r in found_dic[key]:
                if key != "include" or '$' in r:
                    print "  ",r 
```

# asp.net - 如何在网格中显示与选定复选框相关的数据

> ID：15806450
> 
> 赞同：-1
> 
> 时间：2013-04-04T08:45:40.137
> 
> 标签：asp.net, gridview, checkbox

一个下拉列表，从和到日期和搜索按钮。当用户从下拉列表中选择值选择日期并按下搜索按钮时，用户可以根据所选字段查看网格中的数据，直到现在我已经完成了我的项目现在我想要的是当我选择一个复选框以显示与特定列相关的数据时gridview 批量假设我有 50 个用户和 25 个来自德里市现在我想要当用户选择复选框时它只能在网格中查看德里用户我该怎么做..提前谢谢 ![在此处输入图像描述](https://i.stack.imgur.com/7IlWM.jpg)

```
protected void Chk_CheckedChanged(object sender, EventArgs e)
{
    if (Chk.Checked!=null)
    {
        DataSet ds = new DataSet();
        SqlDataAdapter da = new SqlDataAdapter();
        SqlConnection con;
        if (ddlPortal2.SelectedIndex != 0)
        {
            con = new SqlConnection("Data Source=.;Initial Catalog=Bart;Integrated Security=True");
            con.Open();
            da = new SqlDataAdapter("select * from Form3 where Portal='" + ddlPortal2.SelectedValue + "' and Query=Query", con);
            da.Fill(ds);
            GridView1.DataSource = ds;
            GridView1.DataBind();
            con.Close();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T08:58:54.907

你需要添加

OnCheckedChanged="事件处理程序"

复选框上的事件并在事件中填充 Gridview

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T09:01:07.100

有几种选择。如果您不介意回发，那么您可以设置`autopostback`控件。然后您可以`checked`在服务器端处理事件，过滤数据集并重新定义网格。如果您想避免回发，可以使用 AJAX 来执行此操作。但这会更复杂，如果您已经在使用 asp.net 数据网格，则服务器端路由更符合 webforms 方法。

# c++ - Qt 错误：“const class QString”没有名为“toStdString”的成员

> ID：15806452
> 
> 赞同：5
> 
> 时间：2013-04-04T08:45:53.087
> 
> 标签：c++, qt, compiler-errors

我收到了这个错误`error: 'const class QString' has no member named 'toStdString'`，虽然`QString`有。[（链接）](http://qt-project.org/doc/qt-4.8/qstring.html#toStdString)。

编码

```
 std::string Message::toStdString() const 
    {
        return m_string.toStdString();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T08:51:48.950

直接从这里复制的答案：

[如何将 QString 转换为 std::string？](https://stackoverflow.com/questions/4214369/how-to-convert-qstring-to-stdstring)

```
QString qs;

// Either this if you use UTF-8 anywhere
std::string utf8_text = qs.toUtf8().constData();

// or this if you on Windows :-)
std::string current_locale_text = qs.toLocal8Bit().constData(); 
```

# java - Apache Camel 与 Metro

> ID：15806455
> 
> 赞同：0
> 
> 时间：2013-04-04T08:46:01.070
> 
> 标签：java, jax-ws, apache-camel, java-metro-framework

Apache Camel 带有用于 CXF 和 Axis Web 服务框架的组件。是否也有骆驼地铁组件？如果没有这样的组件，那将是相当有限的，因为 JDK 7 带有 JAX-WS RI，而且很多项目都使用 Metro webservice 堆栈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T07:19:01.303

Apache Camel 带有开箱即用的 Apache CXF 和 Spring-WS 组件。

*   [http://camel.apache.org/cxf](http://camel.apache.org/cxf)
*   [http://camel.apache.org/spring-web-services.html](http://camel.apache.org/spring-web-services.html)

没有**Axis**或 Metro 组件。

虽然它只是 Java 代码，但您可以使用 Metro 并调用 Camel 等。我们有一个关于如何将 Apache Axis 1.4 与 Camel 集成的旧教程：http: [//camel.apache.org/tutorial-axis-camel.html](http://camel.apache.org/tutorial-axis-camel.html)

尽管在 Apache，我们喜欢贡献。因此，如果有人愿意创建骆驼地铁组件，那就太好了。我们有一个如何在这里创建新组件的指南：http: [//camel.apache.org/add-new-component-guide.html](http://camel.apache.org/add-new-component-guide.html)

您可以在此处阅读有关贡献的信息：http: [//camel.apache.org/contributing.html](http://camel.apache.org/contributing.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T08:55:25.893

截至今天，还没有可用的骆驼计量器框架。

# git - .gitignore *.class 和 .class 之间的区别

> ID：15806473
> 
> 赞同：0
> 
> 时间：2013-04-04T08:46:58.533
> 
> 标签：git, gitignore

.gitignore 文件中的这两行有什么区别？

```
*.class
.class 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T08:50:05.057

`.gitignore`能够使用 glob，因此通过插入，`*.class`您将忽略所有以结尾的条目，`.class`而在第二种情况下，您仅排除`.class`文件。

有关 .gitignore 条目的更多信息可以在[此文档](http://schacon.github.io/git/gitignore.html#_pattern_format)中找到。

# ruby-on-rails-3 - ActiveRecord - 在计算字段上使用订单时无法使用包含

> ID：15806475
> 
> 赞同：0
> 
> 时间：2013-04-04T08:47:09.310
> 
> 标签：ruby-on-rails-3, activerecord

我有一个在我的一个页面中运行的查询。它基本上通过一个交易表，连接每笔交易的付款（多对一关联），计算交易的“余额”字段（使用选择），按此排序并返回前 10 个。

它是这样的：

```
@high_balance_transactions = Transaction.
  joins(:payments).
  select(["transactions.*", "SUM(...) as balance"]).
  group(:id).
  having("balance < 0").
  order(:balance).
  limit(10) 
```

然后，在我看来，我将它们放在一个表中并需要来自付款本身的数据，所以我最终会遇到很多查询（“N+1”问题......）。

我尝试添加`.includes(:payments)`到查询中，但收到此错误：

```
ActiveRecord::StatementInvalid: Mysql2::Error: Unknown column 'balance' in 'order clause' 
```

我在 SQL 中看到 ActiveRecord 没有将我的计算字段添加到它所做的查询中的错误，但它仅在我添加`includes`部分时才删除它。有什么理由吗？

如何同时使用计算字段（用于订单和拥有）并仅包含通过所有条件的记录的付款数据？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:08:00.303

使用时`includes`，`select`Rails 会忽略 ，这就是您收到错误的原因（我在几个 SO 问题中发现了这一点，但我不知道这种行为背后的原因）。

我认为如果你`SUM(...)`在`having`and`order`子句中移动你可以解决你的问题

```
balance = 'SUM(...)'
@high_balance_transactions = Transaction.
  joins(:payments).
  includes(:payments).
  group('payments.id').
  having("#{balance} < 0").
  order(balance).
  limit(10) 
```

在 SQL 请求中不是很好，但肯定不会影响性能，BD 只会计算一次。

# css - 创建一个在中间对齐的图像和文本的简码

> ID：15806481
> 
> 赞同：0
> 
> 时间：2013-04-04T08:47:35.913
> 
> 标签：css, wordpress, shortcode

如何创建一个 WordPress 短代码，使您能够添加一个带有文本的图像，并与图像的中间对齐？

```
[       ]
[       ]
[ IMAGE ] My Text (aligned in middle)
[       ]
[       ] 
```

现在这是我的代码，但它执行得不好-

**在wordpress中执行：**

```
[contactIcon]here I add my image and text next to each other[/contactIcon] 
```

**函数.php**

```
function contactIcon($atts, $content = null) {
    $content = do_shortcode($content);
    return '<div class="contactIcon"><img src="' . $content . '" alt="icon" /><span class="contactHeader">' . $caption . '</span></div><div style="clear:both"></div>';
}
add_shortcode('contactIcon','contactIcon'); 
```

注意：我之所以要这样做是因为在 WordPress 中，当您在其旁边添加图像和文本时，它不会与中间对齐，我每次都必须在底部添加一个清晰的 div。

# ruby - 如何配置 travis CI 构建以使用特定版本的 ruby gems？

> ID：15806485
> 
> 赞同：2
> 
> 时间：2013-04-04T08:47:46.047
> 
> 标签：ruby, rubygems, travis-ci

我有这样的`.travis.yml`文件

```
language: ruby
rvm:
  - 1.8.7
  - 1.9.2
  - 1.9.3
gemfile:
  - gemfiles/rails23.gemfile
  - gemfiles/rails30.gemfile
  - gemfiles/rails32.gemfile
  - gemfiles/rails3x.gemfile 
```

对于`gemfiles/rails23.gemfile`我想使用的特定版本`rubygems`（在本例中是 2.0.0 之前的版本）。我该如何指定？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T13:40:18.623

[正如此Closed Issue](https://github.com/travis-ci/travis-ci/issues/68)所述，您要完成的工作是不可能的。我引用：

> “我们使用 RVM 提供的 ruby​​gems 版本，并且没有计划改变它。”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-05T17:42:48.693

可以[降级 ruby​​gems 版本](http://about.travis-ci.org/docs/user/languages/ruby/#Upgrading-RubyGems)，只需将以下内容添加到您的`.travis.yml`

```
before_install:
  - gem update --system 2.0.0 
  - gem --version 
```

# signalr - SignalR - 具有粘性会话场景的 Webfarm

> ID：15806487
> 
> 赞同：1
> 
> 时间：2013-04-04T08:47:49.750
> 
> 标签：signalr, session-state, sticky, web-farm

是否可以在带有粘性会话的网络农场中使用 SignalR？如果是，如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T08:49:43.710

是和否，是的，这是可能的。不，不是现在，因为横向扩展正在为 1.1 重写（几周后）。当它结束时，您将能够使用 Sql 服务器、服务总线或 redis 在粘性或非粘性会话上使用 SignalR（这实际上无关紧要）。在接下来的几周内， [http://asp.net/signalr](http://asp.net/signalr)上会有更多关于它的信息。

# c - 通知丢失的事件

> ID：15806488
> 
> 赞同：3
> 
> 时间：2013-04-04T08:48:00.733
> 
> 标签：c, linux, inotify

我想监控我系统上的 USB 密钥。我知道它们总是挂载在 /media 中，所以我使用 inotify 来监控 /media。一些 USB Key 在插入时会创建一个文件夹（例如 sda），该文件夹会一直保留到拔出，有些则创建一个文件夹（例如 sda），然后立即删除它并创建一个新文件夹（例如 sda1）。这是由于密钥上的分区。

但是，有时 inotify 仅捕获创建和删除第一个文件夹的事件，而错过了第二个文件夹的创建。当我手动检查 /media 时，第二个文件夹存在，但 inotify 从未通知它。

这种情况很少发生，当它发生时，它总是在重新启动后设备的第一个插头处。

```
#include <sys/inotify.h>
#include <stdio.h>
#include <errno.h>
#include <stdlib.h>
#include <unistd.h>

/* size of the event structure, not counting name */
#define EVENT_SIZE  (sizeof (struct inotify_event))

/* reasonable guess as to size of 32 events */
#define BUF_LEN        (32 * (EVENT_SIZE + 16))

int main(int argc, char **argv) {
    int fd,wd,len,i;
    char buf[BUF_LEN];
    struct inotify_event *event;
    fd_set watch_set;

    fd = inotify_init();
    if (fd < 0) {
        perror("init failed");
        exit(EXIT_FAILURE);
    }

    wd = inotify_add_watch(fd,"/media",IN_ALL_EVENTS);
    if (wd < 0) {
        perror("add watch failed");
        exit(EXIT_FAILURE);
    }

    /* put the file descriptor to the watch list for select() */
    FD_ZERO(&watch_set);
    FD_SET(fd,&watch_set);

    while(1) {
        select(fd+1,&watch_set,NULL,NULL,NULL);
        len = read(fd,buf,BUF_LEN);
        i=0;
        while(i < len) {

            event = (struct inotify_event *) &buf[i];

            if ((event->mask & IN_CREATE) != 0) {
                printf ("%s created\n",event->name);
            }
            else if ((event->mask & IN_DELETE) != 0) {
                printf ("%s deleted\n",event->name);
            }
            else {
                printf ("wd=%d mask=0x%X cookie=%u len=%u name=%s\n",
                                event->wd, event->mask,
                                event->cookie, event->len, event->name);
            }

            i += EVENT_SIZE + event->len;

        }

    }

} 
```

任何想法出了什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-11T06:55:25.923

inotify 的子文件夹问题众所周知并且很容易重现：

1.  启动 inotifywait 观察一个空的 tmp 目录：

    inotifywait -e create -m -r --format '%:e %f' ./tmp

2.  在另一个 shell 中输入：

    mkdir tmp/0 tmp/0/0 tmp/0/0/0 tmp/0/0/0/0

3.  您很可能只会收到第一个子目录的通知。

    创建：ISDIR 0

在创建目录、您的应用程序收到通知以及添加新的 inotify 监视之间丢失事件（特别是子目录创建事件）的明显可能性，使得递归监控过于不可靠。唯一安全的选择是扫描新创建目录的内容。

来自*限制和警告*下的[inotify 文档](http://linux.die.net/man/7/inotify)：

 *> 如果监视整个目录子树，并且在该树中创建了一个新子目录，请注意，当您为新子目录创建监视时，可能已经在子目录中创建了新文件。因此，您可能希望在添加手表后立即扫描子目录的内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-12T07:50:46.017

同时我发现这是一个已知的inotify问题。如果两个事件几乎同时出现，则 inotify 只捕获其中一个。我的解决方案：我不再使用 inotify，而是使用 libudev 来监控插入机器的设备......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-04T07:34:22.667

1.  您可以使用`inotifywait`命令（从`inotify-tools`包中）监视*/media*目录，以检查`inotify`您感兴趣的事件是否发生。
    参考：
    [http ://www.noah.org/wiki/Inotify,_FAM,_Gamin#Examples_with_inotify-tools](http://www.noah.org/wiki/Inotify,_FAM,_Gamin#Examples_with_inotify-tools)

2.  如果`inotify`确实错过了事件，原因可能是：确实报告了和
    `Inotify`中的一些但不是所有事件。 （嗯，我不能肯定地说。只是我的猜测。） `sysfs``procfs`

参考： http:
[//en.wikipedia.org/wiki/Inotify#Limitations](http://en.wikipedia.org/wiki/Inotify#Limitations)
[http://en.wikipedia.org/wiki/Sysfs](http://en.wikipedia.org/wiki/Sysfs)
[http://en.wikipedia.org/wiki/Procfs](http://en.wikipedia.org/wiki/Procfs)*

# performance - Silverlight 帆布 freedraw 表现不佳

> ID：15806489
> 
> 赞同：0
> 
> 时间：2013-04-04T08:48:05.403
> 
> 标签：performance, silverlight, canvas, drawing

我正在制作一个 silverlight 网站，其中包括类似绘画的功能，包括 freedraw。为了实现这一点，我使用了以下网站上描述的技术：http: [//codeding.com/articles/freehand-drawing-in-silverlight](http://codeding.com/articles/freehand-drawing-in-silverlight)。

问题是，当我运行演示项目时，它会在绘制几秒钟后开始极度滞后。但是，我意识到这可能是由于该技术所需的形状数量过多，这是我的主要问题：

网站上的演示到底怎么不落后于我画了多少，而我的本地项目应该有完全相同的代码马上滞后？

我尝试找到一些关于整体提高画布性能的方法，但我发现的唯一方法是将绘图转换为静态图像，这并不理想，因为我使用了撤消/重做功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:26:56.120

添加到的形状数量`Canvas`不应该是滞后的原因，必须有其他的东西，比如将绘图转换为图像以实现撤消/重做功能。对于撤消/重做，您可以保存笔画信息而不是图像。在每次撤消/重做操作期间创建和存储图像会消耗太多内存。

一个笔画不过是从开始（mousedown 事件）到结束（mouseup 事件）的一组点，一组笔画构成一幅完整的图画。您始终可以使用保存的笔画信息重新创建绘图（就像您可以使用图像重新创建一样）。您可以使用简单的数据结构`List<List<Point>>`，例如存储完整的绘图，这非常节省内存，而不是创建和存储图像本身。

# r - 在 R 中获取刻度线向量或间隔 - par("yaxp") 不起作用

> ID：15806490
> 
> 赞同：0
> 
> 时间：2013-04-04T08:48:15.623
> 
> 标签：r, plot, axis

我有一个对数图，在 y 轴上显示从 1 到 7 的刻度线。我想获得函数的每个刻度线之间的间隔。

```
> par("yaxp")
[1]  1  7 -6 
```

我期待 par("yaxp")[3] 为 1。

为什么是-6？如何让 R 返回刻度线之间的间隔？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:17:52.383

这肯定与它是对数刻度的事实有关

从`?par`文档中：

> xaxp - c(x1, x2, n) 形式的向量，当 par("xlog") 为假时，给出极端刻度线的坐标和刻度线之间的间隔数。否则，当日志坐标处于活动状态时，这三个值具有不同的含义：对于小范围，n 为负数，刻度与线性情况相同，否则，n 为 1:3，指定一个案例编号，以及x1 和 x2 是用户坐标内 10 的最低和最高幂，10 ^ par("usr")[1:2]。（“usr”坐标在这里进行了 log10 转换！）

看：

```
x<-1:100
y<-1:100
plot(x,y,log="y")
par("yaxp")
par("ylog") 
```

相比

```
plot(log(x),log(y))
par("ylog")
par("yaxp") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T09:49:28.113

如其他帮助中所述，使用 log 时的含义`xaxp`略有不同。但是在这里，由于 n 是负数，我们仍然处于线性情况。在其他作品中，台阶之间的距离是

```
 (1-7)/(-6) = 1 
```

您可以使用`axTicks`获取内部使用的刻度`axes`来绘制刻度。这里有一个在 的帮助下修改的示例，向您展示的不同`axTicks`值`n`

```
op <- par(mfrow = c(4, 1))
for(x in 9999 * c(1/99999,1, 2, 8)) {
  plot(x, 9, log = "x")
  cat(formatC(par("xaxp"), width = 5),";", T <- axTicks(1),"\n")
  rug(T, col =  adjustcolor("red", 0.5), lwd = 4)
}
par(op)

 ## n negative (your case): linear case 
 0.05  0.25    -4 ; 0.05 0.1 0.15 0.2 0.25 
 ## n =3 :     k 10^j with k in {1,2,5} & j in par("usr")[1:2]
 1000 1e+05     3 ; 200 500 1000 2000 5000 10000 20000 50000 1e+05 2e+05 5e+05 
 ## n =2     k 10^j with k in {1,5} & j in par("usr")[1:2]
 1000 1e+06     2 ; 500 1000 5000 10000 50000 1e+05 5e+05 1e+06 
 ## n =1 :  10^j with j in par("usr")[1:2]
 1000 1e+07     1 ; 1000 10000 1e+05 1e+06 1e+07 
```

# java - Spring Security：NoSuchBeanDefinitionException

> ID：15806491
> 
> 赞同：1
> 
> 时间：2013-04-04T08:48:15.920
> 
> 标签：java, spring, jakarta-ee, spring-mvc, spring-security

我正在尝试按照官方教程开发我的第一个 Spring MVC 应用程序。我已经从模板创建了 MVC 项目，然后我添加了以下 Spring Security 配置。

pom.xml：

```
<?xml version="1.0" encoding="UTF-8"?>

...
<!-- Defaults -->
...

    <properties>

        <!--
        <java-version>1.6</java-version>
        -->
        <java-version>1.7</java-version>

        <org.springframework-version>3.1.1.RELEASE</org.springframework-version>
        <org.aspectj-version>1.6.10</org.aspectj-version>
        <org.slf4j-version>1.6.6</org.slf4j-version>
    </properties>
    <dependencies>

            ...
            <!-- Defaults -->
            ...

        <!-- Spring Security -->
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-core</artifactId>
            <version>3.1.3.RELEASE</version>
        </dependency> 
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-web</artifactId>
            <version>3.1.3.RELEASE</version>
        </dependency> 
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-config</artifactId>
            <version>3.1.3.RELEASE</version>
        </dependency>

    </dependencies>
    <build>
        <plugins>

            ...
            <!-- Defaults -->
            ...

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.5.1</version>
                <configuration>

                    <!--
                    <source>1.6</source>
                    <target>1.6</target>
                    -->
                    <source>1.7</source>
                    <target>1.7</target>

                    <compilerArgument>-Xlint:all</compilerArgument>
                    <showWarnings>true</showWarnings>
                    <showDeprecation>true</showDeprecation>
                </configuration>
            </plugin>

            ...
            <!-- Defaults -->
            ...

        </plugins>
    </build>
</project> 
```

网页.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5"
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
        http://java.sun.com/xml/ns/javaee
        http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
>

    <!-- The definition of the Root Spring Container shared by all Servlets and Filters -->
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/root-context.xml</param-value>
    </context-param>

    <!-- Creates the Spring Container shared by all Servlets and Filters -->
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <!-- Processes application requests -->
    <servlet>
        <servlet-name>appServlet</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>
                /WEB-INF/spring/appServlet/servlet-context.xml
                /WEB-INF/spring/appServlet/security-app-context.xml
            </param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <!-- Spring Security -->
    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
    <!-- End of Spring Security -->

    <servlet-mapping>
        <servlet-name>appServlet</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

</web-app> 
```

servlet-context.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans
    xmlns="http://www.springframework.org/schema/mvc"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="
        http://www.springframework.org/schema/mvc
        http://www.springframework.org/schema/mvc/spring-mvc.xsd
        http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context.xsd"
>

    <!-- DispatcherServlet Context: defines this servlet's request-processing infrastructure -->

    <!-- Enables the Spring MVC @Controller programming model -->
    <annotation-driven />

    <!-- Handles HTTP GET requests for /resources/** by efficiently serving up static resources in the ${webappRoot}/resources directory -->
    <resources mapping="/resources/**" location="/resources/" />

    <!-- Resolves views selected for rendering by @Controllers to .jsp resources in the /WEB-INF/views directory -->
    <beans:bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <beans:property name="prefix" value="/WEB-INF/views/" />
        <beans:property name="suffix" value=".jsp" />
    </beans:bean>

    <context:component-scan base-package="***my package***" />

</beans:beans> 
```

安全应用上下文.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans
    xmlns="http://www.springframework.org/schema/security"
    xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/security
        http://www.springframework.org/schema/security/spring-security-3.1.xsd"
>

    <http auto-config='true'>
        <intercept-url pattern="/**" access="ROLE_USER" />
    </http>

</beans:beans> 
```

我的 IDE（Spring Tool Suite 3.2.0.RELEASE）中没有错误或警告。但是当我尝试在服务器上运行此应用程序时，我收到以下错误：

```
SEVERE: Exception starting filter springSecurityFilterChain
org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'springSecurityFilterChain' is defined 
```

完整的堆栈跟踪：

```
org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'springSecurityFilterChain' is defined
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanDefinition(DefaultListableBeanFactory.java:529)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getMergedLocalBeanDefinition(AbstractBeanFactory.java:1095)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:277)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)
    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1097)
    at org.springframework.web.filter.DelegatingFilterProxy.initDelegate(DelegatingFilterProxy.java:326)
    at org.springframework.web.filter.DelegatingFilterProxy.initFilterBean(DelegatingFilterProxy.java:236)
    at org.springframework.web.filter.GenericFilterBean.init(GenericFilterBean.java:194)
    at org.apache.catalina.core.ApplicationFilterConfig.initFilter(ApplicationFilterConfig.java:281)
    at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:262)
    at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:107)
    at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4746)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5399)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

我的配置有问题或遗漏了吗？我应该如何解决这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T08:55:34.913

尝试代替 root-context.xml`contextConfigLocation`来添加 servlet-context.xml 和`security-app-context.xml`.

```
 <!-- The definition of the Root Spring Container shared by all Servlets and Filters -->
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
            /WEB-INF/spring/appServlet/servlet-context.xml
            /WEB-INF/spring/appServlet/security-app-context.xml
    </param-value>
</context-param> 
```

您没有传递 root-context.xml 配置文件，但绝对应该添加一些配置来处理对 DispatcherServlet 的请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T09:12:15.693

添加这个

```
<beans
....
     xmlns:security="http://www.springframework.org/schema/security"
.... 
```

在您的 security-app-context.xml 中，您应该添加安全前缀：

```
<security:http auto-config="true">
    <security:intercept-url pattern="/**" access="ROLE_USER" />
</security:http> 
```

你应该添加一个提供者：

```
<security:authentication-provider>
    <security:user-service>
        <security:user name="jimi" password="jimi" authorities="ROLE_USER" />
    </security:user-service>
</security:authentication-provider> 
```

# objective-c - 使用 NSTimer 更改图像数组

> ID：15806492
> 
> 赞同：0
> 
> 时间：2013-04-04T08:48:17.273
> 
> 标签：objective-c

我想实现一个自动更改图片库。这是我在控制器中的代码。我有一个名为 image 的 uiimageview。我想将图像数组链接到我的图像视图，让它在几秒钟后自动更改。我该怎么办？？

```
- (void)viewDidLoad{
     [super viewDidLoad];
     [self performSelector:@selector(changeImage) withObject:nil afterDelay:2];
}

-(void)changeImage {
     NSArray *images = [NSArray arrayWithObjects:[UIImage imageNamed:@"animated-fish-1.jpg"], [UIImage imageNamed:@"tumblr_7"], [UIImage imageNamed:@"th_nature_4.jpg"],nil];
     image.animationImages = images; 
     // how to let the array of image load and link to the perform selector??
     // what should i continue from here?
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T09:04:57.423

*   将图像存储在 ivar 中

    ```
    @interface YourClass : SomeSuperClass

    @property (nonatomic, strong) NSArray *images;

    @end 
    ```

*   不要启动计时器，`viewDidLoad`因为视图不会出现在屏幕上，所以没有意义 - 将它移到`viewDidAppear:`

    ```
    - (void)viewDidLoad
    {
      [super viewDidLoad];
      self.images = @[ ... ]; // or pass these into the class
      self.imageView.image = self.images[0];
    }

    - (void)viewDidAppear:(BOOL)animated
    {
      [super viewDidAppear:animated];

      [NSTimer scheduledTimerWithTimeInterval:2
                                       target:self
                                     selector:@selector(changeImage:)
                                     userInfo:nil
                                      repeats:YES];
    }

    -(void)changeImage:(NSTimer *)timer
    {
      NSInteger currentIndex = [self.images indexOfObject:self.imageView.image];
      NSInteger nextIndex    = (currentIndex + 1) % self.images.count;

      self.imageView.image = self.images[nextIndex];

      // If for any reason you need to cancel the image rotation
      if ([self shouldCancelImageRotation]) {
        [timer invalidate];
      }
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T08:56:43.310

要使用计时器为图像设置动画，试试这个

```
- (void)viewDidLoad
{
        [super viewDidLoad];
        [NSTimer scheduledTimerWithTimeInterval:1 
                                 target:self 
                               selector:@selector(animateImages) 
                               userInfo:nil 
                                repeats:YES];
        imageCount = 1;

 }

  -(void)animateImages
  {
         imageCount = imageCount + 1;
          NSString *imageName = [NSString stringWithFormat:@"image%i.png"];
          [theImage setImage:[UIImage imageNamed:imageName]];
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T08:51:27.097

您应该使用 NSTimer，例如，您可以使用此方法：

[https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html#//apple_ref/occ/clm/NSTimer/scheduledTimerWithTimeInterval:target:selector:userInfo:重复：](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html#//apple_ref/occ/clm/NSTimer/scheduledTimerWithTimeInterval%3atarget%3aselector%3auserInfo%3arepeats%3a)

此方法允许您定义要使用的选择器并每 x 秒重复一次

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T08:59:45.530

像这样尝试，取一个全局变量索引

```
 - (void)viewDidLoad{
         [super viewDidLoad];
          index=0;
          NSArray *images = [NSArray arrayWithObjects:[UIImage imageNamed:@"animated-fish-1.jpg"], [UIImage imageNamed:@"tumblr_7"], [UIImage imageNamed:@"th_nature_4.jpg"],nil];
imageview.image = [images objectAtIndex:index];
          [NSTimer scheduledTimerWithTimeInterval:2.0 target:self selector:@selector(changeImage) userInfo:nil repeats:YES];
    }

-(void)changeImage {
      index++;
      if(index==[images count]){
        index=0;
     }
     imageview.image = [images objectAtIndex:index];
  } 
```

# python - TypeError：“zip”对象不可下标

> ID：15806495
> 
> 赞同：-1
> 
> 时间：2013-04-04T08:48:21.883
> 
> 标签：python, python-3.x

当我运行它时，它给了我错误：

> TypeError：“zip”对象不可下标

我应该怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T08:53:43.303

在 Python 3 中，[`zip()`](http://docs.python.org/3/library/functions.html#zip)返回一个迭代器，而不是一个列表。您可以将其转换为列表：

```
columns = list(zip(*rows))
float_columns = [map(float, col) for col in columns[1:]] 
```

用于`itertools.islice`选择除第一个元素以外的所有内容，

```
from itertools import islice

columns = zip(*rows)
float_columns = [map(float, col) for col in islice(columns, 1)] 
```

或跳过第一个元素`next()`：

```
columns = zip(*rows)
next(columns, None)  # skip the first column
float_columns = [map(float, col) for col in columns] 
```

请注意，它也`map()`返回一个迭代器，而不是一个列表。这对您的目的可能没问题。

例如，如果您想找到每列的最大值，可以将其组合起来：

```
columns = zip(*rows)
next(columns, None)  # skip the first column
max_columns = [max(map(float, col)) for col in columns] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T09:01:12.770

您正在使用 Python 3，其中 zip 返回一个可迭代的，而不是一个列表。

因此，通过将其转换为列表，您可以解决您的问题。

```
columns = list(zip(*rows)) 
```

此外，您可以按以下方式跳过第一列，在这种情况下，您可以删除切片。

```
columns = zip(*rows)
next(columns, 0) 
```

# postgresql - sum 和 generate series 在 postgresql 中不起作用

> ID：15806497
> 
> 赞同：0
> 
> 时间：2013-04-04T08:48:28.320
> 
> 标签：postgresql, sum, generate-series

在`classification_indicator_id`列中，我有一些数字。我想在 1 天系列中总结这些数字。我写了下面的查询

```
select
a.data_start::date,
a.segment1::integer as "Segment1"
from (
select
    data as data_start,
    (select sum(classification_indicator_id) from classifications where classification_indicator_id = 3)::integer as segment1
from
    generate_series('2013-03-25'::timestamp without time zone,
    '2013-04-01'::timestamp without time zone,
    '1 day'::interval) data
) a
group by
a.data_start,
a.segment1
ORDER BY data_start 
```

但我总是得到类似的东西：

```
date start|segment1
-------------------
2013-03-25|39
2013-03-26|39
2013-03-27|39
2013-03-28|39
2013-03-29|39
2013-03-30|39
2013-03-31|39
2013-04-01|39 
```

我确信应该是这样的：

```
date start|segment1
-------------------
2013-03-25|3
2013-03-26|4
2013-03-27|7
2013-03-28|9
2013-03-29|15
2013-03-30|22
2013-03-31|19
2013-04-01|5 
```

[SQL小提琴](http://sqlfiddle.com/#!1/f4d98/1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:46:21.997

```
select
    data.d::date,
    coalesce(sum(classification_indicator_id), 0)::integer as "Segment1"
from 
    classifications c
    right join
    generate_series(
        '2013-03-25'::timestamp without time zone,
        '2013-04-01'::timestamp without time zone,
        '1 day'::interval
    ) data(d) on data.d::date = c.data_start::date
where classification_indicator_id = 3
group by 1
ORDER BY 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:35:35.840

我需要添加一些其他列（另一个`classification_indicator_id` 我修改了你的答案：

```
select
data.d::date as "data",
sum(c.classification_indicator_id)::integer as "Segment1",
sum(c4.classification_indicator_id)::integer as "Segment2",
sum(c5.classification_indicator_id)::integer as "Segment3"
from 
  generate_series(
    '2013-03-25'::timestamp without time zone,
    '2013-04-01'::timestamp without time zone,
    '1 day'::interval
) data(d)
left join classifications c on (data.d::date = c.created::date and c.classification_indicator_id = 3)
left join classifications c4 on (data.d::date = c4.created::date and c4.classification_indicator_id = 4)
left join classifications c5 on (data.d::date = c5.created::date and c5.classification_indicator_id = 5)
group by "data"
ORDER BY "data" 
```

但仍然无法正常工作。`sum`因为每一行都很大，当我添加额外的列时会增长

```
With 4 columns                          With 3 column
data      |Segment1|Segment2|Segment3   data      |Segment1|Segment2
-------------------------------------   ----------------------------
2013-03-25|12      |16      |20         2013-03-25|12      |16      
-------------------------------------   ----------------------------
2013-03-26|108     |144     |180        2013-03-26|18      |24 
```

# javascript - Javascript“链接”不应加载

> ID：15806502
> 
> 赞同：0
> 
> 时间：2013-04-04T08:48:40.627
> 
> 标签：javascript, html, error-handling, load, hyperlink

我知道这听起来很奇怪，但我需要做到这一点……</p>

所以我有这个功能，激活onClick。

`function opensite() { location.href='https://www.site.com/'; }`

有没有办法打开那个网址，但不加载它？

所以你的浏览器会说“找不到页面/服务器关闭/没有互联网连接”……</p>

有可能吗？怎么做？我的服务器可以使用所有语言……（JS、JQUERY、PHP、HTML……）

为什么我应该这样做？长篇大论，请不要问;）

谢谢

翻转

****编辑****

我有一个脚本可以在没有互联网连接的情况下完美运行，因为它不会在“链接”中加载页面......我正在尝试让它在互联网连接的情况下也能工作......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:07:39.113

你在找这个吗？

```
window.open('http://www.site.com/') 
```

但是某些浏览器会阻止弹出窗口。还有另一种方式：

```
var a = document.createElement('a');
a.href = 'http://www.site.com/';
a.target = '_blank';
a.click(); 
```

模拟点击链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T09:02:33.383

如果您拥有您想要显示为离线的网站，那么最简单的方法是上传包含您尝试显示的错误的 index.html。

但实际上，没有。这是不可能的。

我假设您不拥有其他网站，并且出于安全原因，浏览器会阻止此类行为。由于您要求绕过安全设置，并告诉我们“不要问”，我只能假设您试图窃取人们的身份。

无论您多么需要它来工作，它都不会。别再尝试了。

编辑：

如果您只是不希望您的网站跟随点击，那么我会`e.preventDefault()`在您的 jQuery 事件处理程序中使用

# c# - 用于在表格中显示复选框的编辑器模板

> ID：15806503
> 
> 赞同：0
> 
> 时间：2013-04-04T08:48:43.230
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, mvc-editor-templates

我有一个在表格中显示复选框的编辑器模板。使用下面的代码，所有复选框都将呈现在一行上。有人可以建议如何每行呈现三个复选框吗？

**编辑器模板**

```
@model AssignedBusAreaData
@using MOC.ViewModels

<td>
    @Html.HiddenFor(model => model.BusinessAreaID)    
    @Html.CheckBoxFor(model => model.Assigned)
    @Html.DisplayFor(model => model.BusinessAreaName)
</td> 
```

**看法**

```
 <div class="editor-label">
        @Html.LabelFor(model => model.BusinessAreas)
    </div>
    <div class="editor-field">
        <table>
            <tr>
                @Html.EditorFor(model => model.BusinessAreas)
            </tr>
        </table>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T08:55:23.557

尝试这个

```
<table>
  <tr>
   <td>
    @Html.HiddenFor(model => model.BusinessAreaID)    
    @Html.CheckBoxFor(model => model.Assigned)
    @Html.DisplayFor(model => model.BusinessAreaName)
   </td>
 </tr>
</table> 
```

看法

```
<div class="editor-label">
    @Html.LabelFor(model => model.BusinessAreas)
</div>
<div class="editor-field">
    <table>
        <tr>
          <td>
            @Html.EditorFor(model => model.BusinessAreas)
          </td>
        </tr>
    </table>
</div> 
```

# php - 通过 jQuery 设置表单值的任何缺点

> ID：15806508
> 
> 赞同：1
> 
> 时间：2013-04-04T08:48:58.930
> 
> 标签：php, javascript, jquery

我有很多元素的表单，大多数是选择框、复选框、单选框。例如下面的选择框`chart[type]`我通过 php 设置它的值

```
<select name="chart[type]" id="chart_type" >                         
       <option value="nps" <?php if ( $chart_data['chart']['type'] == 'nps' ) echo ' select="selected" '; ?> >NPS Barchart</option>
       <option value="score" <?php if ( $chart_data['chart']['type'] == 'score' ) echo ' select="selected" '; ?>>Number/score</option>
       <option value="top5" <?php if ( $chart_data['chart']['type'] == 'top5' ) echo ' select="selected" '; ?>>Top 5</option>
</select> 
```

我尝试了使用 jQuery 从值设置的代码

```
<select name="chart[type]" id="chart_type" >                         
    <option value="nps" >NPS Barchart</option>
    <option value="score">Number/score</option>
    <option value="top5">Top 5</option>
</select>

<script>
    $(function(){
            $('[name="chart[type]"]').val( 
                 '<?php echo  $chart_data['chart']['type']; ?>'
            );
    });
</script> 
```

我觉得代码更干净。我打算将所有表单代码重新填充更改为这种方式。我想知道使用 second 有什么缺点吗？.. 我的应用程序用于图表渲染，如果禁用 JavaScript，它将无法工作！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T09:02:06.157

如果您使用 PHP 并且没有真正的理由使用 JavaScript 来打印 HTML，我会继续使用 PHP。像这样混合不是一个好主意，你应该真正考虑 AJAX。但是你可以让你的 PHP 代码更易于维护和动态：

```
<?php

$data = array(
  'nps' => 'NPS Barchart',
  'score' => 'Number/score',
  'top5' => 'Top 5'
);

$options = '';

foreach ($data as $key => $value) {
  $selected = $chart_data['chart']['type'] == $key ? 'selected' : '';
  $options .= sprintf('<option class="%1$s" %2$s>%3$s</option>', $key, $selected, $value);
}

echo sprintf('<select name="chart[type]" id="chart_type">%s</select>', $options); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T08:57:04.263

由于您的应用程序在不禁用 JS 的情况下根本无法运行，因此实际上没有什么可以被认为是这种方法的缺点。事实上，用这种方式隐藏选择框以使 AJAX 调用加载的值可能更容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T08:51:53.493

缺点是您的代码现在依赖于 JavaScript 和 jQuery。一些（极少数人）禁用了 JavaScript，因此默认情况下不会选择任何内容

这不是最佳实践，但我必须承认，我过去曾以类似的方式使用 JavaScript，只是为了方便/轻松。感觉有点“hacky”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T09:01:59.970

在一个块中使用两种语言并不总是一件坏事。但是当你的一行

`'<?php echo $chart_data['chart']['type']; ?>'`

变得不止一条线，它会开始看起来相当凌乱。

发生这种情况时，您可以执行以下操作。

```
<script>
    $(function(){
            // assignment from php
            var chart_type = '<?php echo  $chart_data['chart']['type']; ?>';

            $('[name="chart[type]"]').val(chart_type);
    });
</script> 
```

无论如何，最好将您的应用程序转换为执行 ajax 发布，这样您就不必通过这种方式设置表单值。

# android - 警报对话框内的 EditText

> ID：15806509
> 
> 赞同：0
> 
> 时间：2013-04-04T08:49:04.450
> 
> 标签：android, dialog, android-edittext

拥有此类代码来创建对话框：

```
 public class DConce extends DialogFragment{

    public Dialog onCreateDialog(Bundle savedInstanceState) {
    AlertDialog.Builder dshow = new AlertDialog.Builder(getActivity());

    LayoutInflater inflater = getActivity().getLayoutInflater();

    dshow.setView(inflater.inflate(R.layout.dialogconc, null))

           .setPositiveButton("Send", new DialogInterface.OnClickListener() {
               @Override
               public void onClick(DialogInterface dialog, int id) {

                   //TODO

               }
           })
           .setNegativeButton("Close", new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int id) {
                   DConce.this.getDialog().cancel();
               }
           });      

    return dshow.create();

    }

           public static DConce newInstance(){
           DConce arg = new DConce();
           return arg;
            } 
```

我正在尝试使用 EditText 从用户输入中获取一些数据。该对象是在 xml 上创建的。我试图用它来称呼它

```
EditText dlgText = (EditText) Dconce.findViewById(R.id.txconc); 
```

但它只是不会在对话框中找到 findViewByid。这里不包括视图吗？dshow.setView(inflater.inflate(R.layout.dialogconc, null))

请问有什么帮助吗？提前致谢。

PS：对话框创建得很好，我可以看到 EditText。我只是无法使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T08:52:20.323

我在对话框中夸大了我的视图，并进行了一些修改，它起作用了，如下所示：

```
LayoutInflater adbInflater = LayoutInflater.from(getActivity());
        View editTextLayout = adbInflater.inflate(R.layout.dialogconc, null);
        EditText dlgText = (EditText ) editTextLayout .findViewById(R.id.txconc); 
```

为我工作：

```
public class DConce extends DialogFragment {
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        AlertDialog.Builder dshow = new AlertDialog.Builder(getActivity());

    LayoutInflater adbInflater = LayoutInflater.from(getActivity());
    final View editTextLayout = adbInflater.inflate(R.layout.edittext_layout, null);

    dshow.setView(editTextLayout)

           .setPositiveButton("Send", new DialogInterface.OnClickListener() {
               @Override
               public void onClick(DialogInterface dialog, int id) {
                   EditText dlgText = (EditText)editTextLayout.findViewById(R.id.editText1);
                   String string = dlgText.getText().toString();
                   Log.d("sadsad", string);
               }
           })
           .setNegativeButton("Close", new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int id) {
                   DConce.this.getDialog().cancel();
               }
           });      

    return dshow.create();

    }

           public static DConce newInstance(){
               DConce arg = new DConce();
           return arg;
            }
} 
```

调用活动：

```
FragmentManager manager = getSupportFragmentManager(); 
                DialogFragment Dialog = DConce.newInstance();
                Dialog.show(manager, "tag"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T08:57:02.157

你应该试试`EditText dlgText = (EditText) dshow.findViewById(R.id.txconc);`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T09:30:55.653

```
AlertDialog.Builder editalert = new AlertDialog.Builder(ActivityName.this);
        editalert.setTitle("My Title");
        final EditText input = new EditText(ActivityName.this);
        LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(
                LinearLayout.LayoutParams.FILL_PARENT,
                LinearLayout.LayoutParams.FILL_PARENT);
        input.setLayoutParams(lp);
        editalert.setView(input);
        editalert.setPositiveButton("OK", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int whichButton) {

           String name= input.getText().toString();

            }
        });

        editalert.show(); 
```

您还可以使用自定义布局进行对话框

你的 dialog.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<EditText
    android:id="@+id/editText1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ems="10" >

    <requestFocus />
</EditText>

<Button
    android:id="@+id/ok"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/editText1"
    android:layout_marginLeft="30dp"
    android:layout_marginTop="20dp"
    android:text="OK" />

<Button
    android:id="@+id/cancel"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/ok"
    android:layout_alignBottom="@+id/ok"
    android:layout_marginLeft="35dp"
    android:layout_toRightOf="@+id/ok"
    android:text="CANCEL" />

   </RelativeLayout> 
```

在您的主要活动中

```
 Button b= (Button) findViewById(R.id.button1);
    b.setOnClickListener(new OnClickListener()
    {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            showpopup();
        }

    });
}
public void showpopup()
{
final Dialog d = new Dialog(MainActivity.this);
d.setTitle("my title");
d.setContentView(R.layout.dialog);
// Thank you Button Listener. On Click Goes to Home Screen
 Button ok = (Button) d.findViewById(R.id.ok);
final EditText ed= (EditText) d.findViewById(R.id.editText1);
ok.setOnClickListener(new OnClickListener()
{

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        String s= ed.getText().toString();

    }

});
 Button cancel = (Button) d.findViewById(R.id.cancel);

    ok.setOnClickListener(new OnClickListener()
    {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            d.cancel();

        }

    });
    d.show();

} 
```

# c# - C#：使用 Microsoft.ACE.OLEDB.12.0 连接到 dbf 文件

> ID：15806511
> 
> 赞同：2
> 
> 时间：2013-04-04T08:49:05.507
> 
> 标签：c#, oledb

我正在尝试使用 Microsoft.ACE.OLEDB.12.0 提供程序连接到 64 位操作系统中的 dbf 文件。

我写

```
 [Test]
    public void CustomDbfReader()
    {
        string filepath = @"K:\data";

        var dataTable = new DataTable();

        string connectionString =
            "Provider=Microsoft.ACE.OLEDB.12.0;Extended Properties=dBASE IV;Data Source='" + filepath +"'" ;

        using (var oledbConnection = new OleDbConnection(connectionString))
        {
            oledbConnection.Open();
            string stringCommadn = string.Format(@"select * from filename.dbf");
            var oleDbCommand = new OleDbCommand(stringCommadn, oledbConnection);
            var oleDbDataAdapter = new OleDbDataAdapter
                                       {
                                           SelectCommand = oleDbCommand
                                       };
            oleDbDataAdapter.Fill(dataTable);
        }
        Assert.IsNotEmpty(dataTable.Rows);
    } 
```

我得到了这个例外

> System.Data.OleDb.OleDbException：Microsoft Access 数据库引擎找不到对象“CardifOrigin.dbf”。确保对象存在并且正确拼写其名称和路径名。如果“CardifOrigin.dbf”不是本地对象，请检查您的网络连接或联系服务器管理员。

我确信路径和文件名都存在。

有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T09:01:41.520

名称的 dbase 规则强制最大值为`10 characters`. 在 Approach 中，有关较长名称的信息存储在 Microsoft 不知道的特殊索引中。

12 个字符的一个是行不通的。如果将其重命名为 8 个字符，则可以正常工作。

[Microsoft Jet 数据库引擎找不到对象文件名](http://support.microsoft.com/kb/209685)

> 在 Microsoft Access 中，当您导入不遵循 MS-DOS 8.3 文件名格式的 dBase、FoxPro 或 Paradox 文件时（即，句点前的名称超过八个字符，或者在期间），您可能会收到以下错误消息：
> 
> Microsoft Jet 数据库引擎找不到对象文件名。确保对象存在并且正确拼写其名称和路径名。

# wso2 - 如何将消息从 ESB 的主题发送到消息代理的队列

> ID：15806512
> 
> 赞同：1
> 
> 时间：2013-04-04T08:49:15.557
> 
> 标签：wso2, message-queue, wso2esb, messagebroker

我在 ESB 中创建了主题，该主题由 ESB 中创建的代理订阅。在我的代理中，我提供了我在 WSO2 消息代理中创建的队列端点。因此，当我在代理订阅的队列中发布消息时，该消息应该进入 MB 队列，但这并没有发生。我应该怎么做才能实现这一目标？我的代理代码是：

```
<proxy xmlns="http://ws.apache.org/ns/synapse" name="CNN" transports="http" statistics="disable" trace="disable" startOnLoad="true">
   <target>
      <inSequence>
         <log level="custom">
            <property name="STATE" value="message is sent to queue"/>
         </log>
         <property name="OUT_ONLY" value="true"/>
         <property name="FORCE_SC_ACCEPTED" value="true" scope="axis2"/>
      </inSequence>
      <outSequence/>
      <endpoint>
         <address uri="jms:/CNN?&transport.jms.DestinationType=queue"/>
      </endpoint>
   </target>
   <description></description>
</proxy> 
```

我应该怎么做，当我在主题中发布我的消息时，它应该在消息代理队列中可见？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:14:00.453

这篇博文详细介绍了如何使用主题。

[http://madhukaudantha.blogspot.com/2012/07/wso2-esb-topic-tutorial-for-beginners.html?q=topic](http://madhukaudantha.blogspot.com/2012/07/wso2-esb-topic-tutorial-for-beginners.html?q=topic)

# c# - asp.net中的mysql数据库连接

> ID：15806513
> 
> 赞同：-4
> 
> 时间：2013-04-04T08:49:21.993
> 
> 标签：c#, asp.net, mysql

我正在 asp.net 中开发一个小型 Web 应用程序，并使用 mysql 作为后端。因此，为了为 mysql 数据库进行数据库连接，我已经下载了“MySql.Data.dll”并添加为项目中的参考。所以我的问题是我必须在“web.config”中进行任何更改吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T08:53:11.433

您可以使用 MySql 连接器。[MySql连接器。](http://dev.mysql.com/downloads/connector/net/)和演示。[MYSQL 连接](http://www.codeproject.com/Tips/355977/Csharp-ASP-NET-MySQL-Connection-Tutorial-with-MySQ)

```
MySql.Data.MySqlClient.MySqlConnection mycon = 
  new MySqlConnection("YourConnectionStringHere); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T08:55:55.893

如果你想连接到数据库，你可以这样做：

```
using (MySqlConnection c = new MySqlConnection("connection string here"))
{
    c.Open();

    // and now let's select some data
    MySqlCommand cmd = new MySqlCommand("SELECT * FROM SomeTable", c);

    MySqlDataReader rdr = cmd.ExecuteReader();
    while (rdr.Read())
    {
        // do something with the fields here
    }
} 
```

然后，如果您想执行`INSERT`,`UPDATE`或`DELETE`语句，请执行以下操作：

```
using (MySqlConnection c = new MySqlConnection("connection string here"))
{
    c.Open();

    // and now let's select some data
    MySqlCommand cmd = new MySqlCommand("UPDATE SomeTable SET Field1 = 'some value' WHERE some where clause", c);

    cmd.ExecuteNonQuery();
} 
```

请[利用文档](http://dev.mysql.com/doc/refman/5.0/es/connector-net-examples.html)来帮助您完成剩下的工作，因为我不知道您还想做什么。从那里你可以去那里的链接`MySqlCommand`和其他类。

最后，您需要阅读参数化查询，因为例如，这个语句`UPDATE SomeTable SET Field1 = 'some value' WHERE some where clause`实际上应该是这样的`UPDATE SomeTable SET Field1 = @Field1 WHERE some where clause`，然后在命令上设置参数，如下所示：

```
cmd.AddWithValue("@Field1", "some value"); 
```

如果`WHERE`子句中有任何静态值，则同样适用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T09:15:22.057

只需按照[此处](http://www.codeproject.com/Articles/43438/Connect-C-to-MySQL)的简单说明进行操作。

您必须下载用于数据库连接的库。只需按照链接中的步骤操作即可。

享受。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T08:53:50.813

对 MySQl 使用以下导入

使用 MySql.Data.MySqlClient；

1.在Visual Studio中新建网站并保存

2.现在打开 Default.aspx 表单并拖动一些标签、文本框和按钮。

```
<asp: Label ID="Label1" runat="server" Text="Name"></asp:Label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<asp:TextBox ID="TextBox1" runat="server"></asp:TextBox><br/> <br/><asp:Label ID="Label2" runat="server" Text="Address"></asp:Label>&nbsp;&nbsp;&nbsp;<asp:TextBox ID="TextBox2" runat="server"></asp: Textbox> <br /> <br /><asp:Label ID="Label3" runat="server" Text="Age"></asp:Label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<asp:TextBox ID="TextBox3" runat="server"></asp: Textbox> <br /> <br /> <br /> <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;<asp:Button ID="Button1" runat="server" onclick="Button1_Click" Text="Button" /> <br /> <br /> <br /> <br /> 
```

4.现在要创建连接，您将需要这个

```
public partial class _Default : System.Web.UI.Page

{
MySqlConnection con;
MySqlCommand cmd;
string str;
} 
```

5.现在在 Page_load 事件中。

```
protected void Page_Load(object sender, EventArgs e)
{
con = new MySqlConnection("Data Source=localhost;Database=YourDatabase Name;User ID=root;Password=YourPasssword");
con.Open();
Response.Write("connect");
} 
```

6.现在在button_click事件上编写代码

```
protected void Button1_Click(object sender, EventArgs e)
{
str = "insert into YourTablename values ('" + TextBox1.Text + "','" + TextBox2.Text + "','" + TextBox3.Text + "')";
cmd = new MySqlCommand(str, con);
cmd.ExecuteNonQuery();
} 
```

你也可以找到这个 Helpfull ......通过这个链接 [http://www.c-sharpcorner.com/UploadFile/brij_mcn/mysql-database-connectivity-with-Asp-Net/](http://www.c-sharpcorner.com/UploadFile/brij_mcn/mysql-database-connectivity-with-Asp-Net/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T08:55:32.417

```
<% 
'declare the variables 
Dim Connection
Dim ConnectionString
Dim Recordset
Dim SQL

'declare the SQL statement that will query the database
SQL = "SELECT * FROM TABLE_NAME"

'define the connection string, specify database driver
ConnString = "DRIVER={MySQL ODBC 3.51 Driver}; SERVER=localhost; DATABASE=Your_Mysql_DB; " &_
"UID=mysql_username;PASSWORD=mysql_password; OPTION=3"

'create an instance of the ADO connection and recordset objects
Set Connection = Server.CreateObject("ADODB.Connection")
Set Recordset = Server.CreateObject("ADODB.Recordset")

'Open the connection to the database
Connection.Open ConnString

'Open the recordset object executing the SQL statement and return records 
Recordset.Open SQL,Connection

'first of all determine whether there are any records 
If Recordset.EOF Then 
Response.Write("No records returned.") 
Else 
'if there are records then loop through the fields 
Do While NOT Recordset.Eof   
Response.write Recordset("FIRST_FIELD_NAME")
Response.write Recordset("SECOND_FIELD_NAME")
Response.write Recordset("THIRD_FIELD_NAME")
Response.write "<br>"    
Recordset.MoveNext     
Loop
End If

'close the connection and recordset objects freeing up resources
Recordset.Close
Set Recordset=nothing
Connection.Close
Set Connection=nothing
%> 
```

来自[http://webcheatsheet.com/ASP/database_connection_to_MySQL.php](http://webcheatsheet.com/ASP/database_connection_to_MySQL.php)

# jquery - 在 Fullcalendar POPUP 上插入、更新、删除事件操作并显示插入的事件

> ID：15806515
> 
> 赞同：-1
> 
> 时间：2013-04-04T08:49:24.683
> 
> 标签：jquery, fullcalendar, anytime

你好朋友我需要制作网络应用程序，我必须在两个人之间预约日程，所以我使用 Fullcalendar 打开一个弹出窗口有一些字段，如描述、开始时间和结束时间。我想为每个与[FUllcalendar Selectable Demo](http://arshaw.com/js/fullcalendar-1.6.0/demos/selectable.html)相同的事件设置start:start(variable from mycode) end: end 我不知道我的方向是否正确，所以请帮助我 oUt 如果我需要的数据库上的事件更改自动更新在日历中显示

## **更新代码：**

JavaScript：

```
 $(document).ready(function() {
    var count=0;
    var liveDate=new Date();
    var dat = new Date();
    var d = dat.getDate();
    var m = dat.getMonth();
    var y = dat.getFullYear();
    $.getJSON("<?php echo base_url(); ?>names",function(data){
        var select = $('#AgentName'); //combo/select/dropdown list
        if (select.prop) {
            var options = select.prop('options');
        }
        else {
            var options = select.attr('options');
        }
        var calendar = $('#calendar').fullCalendar({

            header: {
                left: 'prev,next today',
                center: 'title',
                right: 'month,agendaWeek,agendaDay'
            },
            selectable: true,
            selectHelper: true,
            select: function(start, end, allDay) {
                $("#popup").show();
                $("#eventName").focus();
                $("#submit").click(function(){
                    var title=$("#eventName").val();
                    if (title) {
                        calendar.fullCalendar('renderEvent',{
                            title: title,
                            start: start,
                            end: end,
                            allDay: allDay
                        },
                        true // make the event "stick"
                    );
                        var dataString={};
                        dataString['eventName']=title;
                        dataString['startTime']=$.fullCalendar.formatDate(start, "yyyy-MM-dd H:mm:ss");
                        dataString['endTime']=$.fullCalendar.formatDate(end, "yyyy-MM-dd H:mm:ss");
                        $.ajax({
                            type : 'POST',
                            dataType : 'json',
                            url : '<?php echo base_url(); ?>data/insert',
                            data: dataString,
                            success: function(data) {
                                alert("Data Insert SuccessFully");
                                if(data.success)
                                    alert("Data Insert SuccessFully");
                            }
                        });
                    }
                    calendar.fullCalendar('unselect');
                    calendar.fullCalendar('refetchEvents');
                    $("#popup").hide();
                });
            },
            editable: true,
            viewDisplay: function(view) {
                if(view.name=="month" && count==0){
                    var a=$(".fc-day-number").prepend("<img src='/assets/images/add.jpg' width='20' height='20'style='margin-right:80px;' name='date'>");                                    
                    count++;
                }
            },
            eventSources: [
                {
                    url: '<?php echo base_url(); ?>data/read', // use the `url` property
                    color: '#65a9d7',    // an option!
                    textColor: '#3c3d3d'  // an option!
                }                    
            ]
        });
    }); 
```

* * *

CSS：

```
<style>
    body {
        text-align: left;
        font-size: 14px;
        font-family: "Lucida Grande",Helvetica,Arial,Verdana,sans-serif;
    }
    #calendar {
        width: 70%;
        margin: 0 auto;
        text-align:left;
    }
    #popup{
        width: 70%;
        height: auto;
        position: absolute;
        background-color: rgba(255,255,255,0.8);
        border-color: #0033ff;
        border-style: solid;
        display:block;
        left: 400px;
        top: 300px;
        display: none;
        cursor: pointer;
    }
    #detail{
        background-color: #000;
    }
    #popup input{
        width:480px;
        border-radius: 5px;
    } 
    #popup table label{
        font-size: 100px;
    }
    #startTime{
        background-image: url('/assets/images/calendar.png');
        background-position:right center;
        background-repeat:no-repeat;
    }
    #endTime{
        background-image: url('/assets/images/calendar.png');
        background-position:right center;
        background-repeat:no-repeat;
    }
</style> 
```

* * *

HTML：

```
<div class="wrapper">
<div id='calendar'></div>
<div id="detail"></div>
<div id="popup"> 
    <form name="addData" id="addData" action="" method="post">
    <table>
        <tr>
            <td><lable for="eventName">Description:</lable></td>
            <td><input name="eventName" id="eventName"></td>
        </tr>
        <tr>
            <td><lable for="startTime">Start: </td>
            <td><input type="text" id="startTime"name="startTime"/></td>
        </tr>
        <tr>
            <td><lable for="endTime">End: </td>
            <td><input type="text" id="endTime"name="endTime"/></td>
        </tr>
        <tr>
            <td align="left"colspan="2">
                <button type="submit"class="k-button" name="submit" id="submit">Submit</button>
                <button type="reset" name="reset" class="k-button" id="reset">Reset</button>
                <button type="submit"class="k-button" name="cancel" id="cancel">Cancel</button>
            </td>
        </tr>
    </table>
    </form>
    <p><tt id="results"></tt></p>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:20:20.107

`dayClick`您可以在事件中显示对话框：

```
dayClick: function(date, allDay, jsEvent, view) {
    $('#dialog').dialog('open');
} 
```

然后格式化开始和结束日期并传递给您的表格

# java - 如何查询 Ldap 以获取结果中的用户属性并在自动填写 JSF2.0 表单中使用它

> ID：15806519
> 
> 赞同：0
> 
> 时间：2013-04-04T08:49:34.803
> 
> 标签：java, jsf-2, ldap, glassfish-3, jndi

有人可以指导/帮助我使用 JNDI 设置与 Glassfish v3.1.2 的 LDAP 连接。我在这个主题上搜索了一下，发现有人在 Glassfish 中设置和使用 ldap 来验证用户身份。然而，我需要获取要显示在我的 JSF 表单上的用户数据，并在这些表单上创建新的整体时自动完成。

我有点困惑。Glassfish 中的 Ldap 连接是否仅用于验证和设置领域？

好的，我在搜索查询方式时发现了一些东西。但是我极其有限的知识仍然阻碍了我的进步。

所以这是我在[http://www.myjeeva.com/2012/05/querying-active-directory-using-java/上找到的代码](http://www.myjeeva.com/2012/05/querying-active-directory-using-java/)

**活动目录**

```
/**
 * The MIT License
 *
 * Copyright (c) 2010-2012 www.myjeeva.com
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE. 
 * 
 */
package com.LdapSearchDaoBean;

import java.util.Properties;
import java.util.logging.Logger;

import javax.naming.Context;
import javax.naming.NamingEnumeration;
import javax.naming.NamingException;
import javax.naming.directory.DirContext;
import javax.naming.directory.InitialDirContext;
import javax.naming.directory.SearchControls;
import javax.naming.directory.SearchResult;

/**
 * Query Active Directory using Java
 * 
 * @filename ActiveDirectory.java
 * @author <a href="mailto:jeeva@myjeeva.com">Jeevanandam Madanagopal</a>
 * @copyright &copy; 2010-2012 www.myjeeva.com
 */
public class ActiveDirectory {
    // Logger
    private static final Logger LOG = Logger.getLogger(ActiveDirectory.class.getName());

    //required private variables   
    private Properties properties;
    private DirContext dirContext;
    private SearchControls searchCtls;
    private String[] returnAttributes = { "sAMAccountName", "givenName", "cn", "mail" };
    private String domainBase;
    private String baseFilter = "(&((&(objectCategory=Person)(objectClass=User)))";

    /**
     * constructor with parameter for initializing a LDAP context
     * 
     * @param username a {@link java.lang.String} object - username to establish a LDAP connection
     * @param password a {@link java.lang.String} object - password to establish a LDAP connection
     * @param domainController a {@link java.lang.String} object - domain controller name for LDAP connection
     */
    public ActiveDirectory(String username, String password, String domainController) {
        properties = new Properties();        

        properties.put(Context.INITIAL_CONTEXT_FACTORY, "com.sun.jndi.ldap.LdapCtxFactory");
        properties.put(Context.PROVIDER_URL, "LDAP://" + domainController);
        properties.put(Context.SECURITY_PRINCIPAL, username + "@" + domainController);
        properties.put(Context.SECURITY_CREDENTIALS, password);

        //initializing active directory LDAP connection
        try {
            dirContext = new InitialDirContext(properties);
        } catch (NamingException e) {
            LOG.severe(e.getMessage());
        }

        //default domain base for search
        domainBase = getDomainBase(domainController);

        //initializing search controls
        searchCtls = new SearchControls();
        searchCtls.setSearchScope(SearchControls.SUBTREE_SCOPE);
        searchCtls.setReturningAttributes(returnAttributes);
    }

    /**
     * search the Active directory by username/email id for given search base
     * 
     * @param searchValue a {@link java.lang.String} object - search value used for AD search for eg. username or email
     * @param searchBy a {@link java.lang.String} object - scope of search by username or by email id
     * @param searchBase a {@link java.lang.String} object - search base value for scope tree for eg. DC=myjeeva,DC=com
     * @return search result a {@link javax.naming.NamingEnumeration} object - active directory search result
     * @throws NamingException
     */
    public NamingEnumeration<SearchResult> searchUser(String searchValue, String searchBy, String searchBase) throws NamingException {
        String filter = getFilter(searchValue, searchBy);       
        String base = (null == searchBase) ? domainBase : getDomainBase(searchBase); // for eg.: "DC=myjeeva,DC=com";

        return this.dirContext.search(base, filter, this.searchCtls);
    }

    /**
     * closes the LDAP connection with Domain controller
     */
    public void closeLdapConnection(){
        try {
            if(dirContext != null)
                dirContext.close();
        }
        catch (NamingException e) {
            LOG.severe(e.getMessage());            
        }
    }

    /**
     * active directory filter string value
     * 
     * @param searchValue a {@link java.lang.String} object - search value of username/email id for active directory
     * @param searchBy a {@link java.lang.String} object - scope of search by username or email id
     * @return a {@link java.lang.String} object - filter string
     */
    private String getFilter(String searchValue, String searchBy) {
        String filter = this.baseFilter;        
        if(searchBy.equals("email")) {
            filter += "(mail=" + searchValue + "))";
        } else if(searchBy.equals("username")) {
            filter += "(samaccountname=" + searchValue + "))";
        }
        return filter;
    }

    /**
     * creating a domain base value from domain controller name
     * 
     * @param base a {@link java.lang.String} object - name of the domain controller
     * @return a {@link java.lang.String} object - base name for eg. DC=myjeeva,DC=com
     */
    private static String getDomainBase(String base) {
        char[] namePair = base.toUpperCase().toCharArray();
        String dn = "DC=";
        for (int i = 0; i < namePair.length; i++) {
            if (namePair[i] == '.') {
                dn += ",DC=" + namePair[++i];
            } else {
                dn += namePair[i];
            }
        }
        return dn;
    }
} 
```

**示例使用代码**

```
/**
 * The MIT License
 *
 * Copyright (c) 2010-2012 www.myjeeva.com
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE. 
 * 
 */
package com.LdapSearchDaoBean;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;

import javax.naming.NamingEnumeration;
import javax.naming.NamingException;
import javax.naming.directory.Attributes;
import javax.naming.directory.SearchResult;

/**
 * Sample program how to use ActiveDirectory class in Java
 * 
 * @filename SampleUsageActiveDirectory.java
 * @author <a href="mailto:jeeva@myjeeva.com">Jeevanandam Madanagopal</a>
 * @copyright &copy; 2010-2012 www.myjeeva.com
 */
public class SampleUsageActiveDirectory {

    /**
     * @param args
     * @throws NamingException 
     */
    public static void main(String[] args) throws NamingException, IOException {
        System.out.println("\n\nQuerying Active Directory Using Java");
        System.out.println("------------------------------------");
        String domain = "";
        String username = "";
        String password = "";
        String choice = "";
        String searchTerm = "";
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));

        System.out.println("Provide username & password for connecting AD");
        System.out.println("Enter Domain:");            
        domain = br.readLine();
        System.out.println("Enter username:");          
        username = br.readLine();           
        System.out.println("Enter password:");
        password = br.readLine();
        System.out.println("Search by username or email:");
        choice = br.readLine();
        System.out.println("Enter search term:");
        searchTerm = br.readLine();

        //Creating instance of ActiveDirectory
        ActiveDirectory activeDirectory = new ActiveDirectory(username, password, domain);

        //Searching
        NamingEnumeration<SearchResult> result = activeDirectory.searchUser(searchTerm, choice, null);

        if(result.hasMore()) {
            SearchResult rs= (SearchResult)result.next();
            Attributes attrs = rs.getAttributes();
            String temp = attrs.get("samaccountname").toString();
            System.out.println("Username    : " + temp.substring(temp.indexOf(":")+1));
            temp = attrs.get("givenname").toString();
            System.out.println("Name         : " + temp.substring(temp.indexOf(":")+1));
            temp = attrs.get("mail").toString();
            System.out.println("Email ID    : " + temp.substring(temp.indexOf(":")+1));
            temp = attrs.get("cn").toString();
            System.out.println("Display Name : " + temp.substring(temp.indexOf(":")+1) + "\n\n"); 
        } else  {
            System.out.println("No search result found!");
        }

        //Closing LDAP Connection
        activeDirectory.closeLdapConnection();
    }
} 
```

**我尝试在控制台中使用上面的代码和以下输入：**

```
Querying Active Directory Using Java
------------------------------------
Provide username & password for connecting AD
Enter Domain:
DC=de,DC=*****,DC=com
Enter username:
************** ( i've hidden username)
Enter password:
************* (i've hidden password)
Search by username or email:
username
Enter search term:
user1 
```

**我得到以下错误**

```
Apr 12, 2013 10:35:17 AM com.LdapSearchDaoBean.ActiveDirectory <init>
SEVERE: DC=de,DC=*****,DC=com:389
Exception in thread "main" java.lang.NullPointerException
    at com.LdapSearchDaoBean.ActiveDirectory.searchUser(ActiveDirectory.java:101)
    at com.LdapSearchDaoBean.SampleUsageActiveDirectory.main(SampleUsageActiveDirectory.java:75) 
```

如果有人可以帮助我，可能会对 HowTo 进行一些解释，以及我如何在 JSF2.0 表单的 AutoComplete 中实际使用它，那将是非常棒的。我真的迷失了这个话题。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-07T09:07:25.533

我遇到了同样的问题，我无法解决，但我也许可以帮助您解决问题。当应用程序请求域时，它需要来自活动目录的 IP/地址，例如：“10.10.200.1:389”或“my.activedirectoryurl:389”。

除此之外，代码不能正常工作，因为在 SampleUsageActiveDirectory 的第 75 行给出了一个空值，这总是会导致 NullPointer-Exception：

```
NamingEnumeration<SearchResult> result = activeDirectory.searchUser(searchTerm, choice, null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-23T11:49:13.693

您遇到的错误是，您输入了 AD 值。对于主机名，只需使用真实的 AD 服务器名称，如 ad.myserver.com 或 IP 地址。然后它应该工作。

# algorithm - 多源最短路径...嵌入式平面图

> ID：15806524
> 
> 赞同：2
> 
> 时间：2013-04-04T08:49:43.443
> 
> 标签：algorithm, shortest-path

可以在其上执行 mssp（多源最短路径）的树在许多论文中都指出它必须是嵌入式平面图。这是否意味着不能有相互重叠的边缘？如果可以，可以![在此处输入图像描述](https://i.stack.imgur.com/mn3jy.jpg)将此类图更改为平面图吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:42:49.263

MSSP 的规范输入是一个[双向连接的边列表](http://en.wikipedia.org/wiki/Doubly_connected_edge_list)或类似的东西，它给出了图形的组合拓扑，而不是几何。如果您有一个不是平面的[直线图](http://en.wikipedia.org/wiki/Planar_straight_line_graph)（即，它有交叉或重叠的边），那么您需要以某种方式更改该图。一种可能性是在有交叉点的地方引入一个新顶点；另一个是删除有问题的边缘。

# c# - 在 c sharp 中使用反射和流阅读器

> ID：15806527
> 
> 赞同：0
> 
> 时间：2013-04-04T08:49:48.293
> 
> 标签：c#

我有一个关于升c反射的问题。这是我的问题

1) 定义具有不同访问器（私有、公共、受保护）的不同字段的类 MyClass 以及具有不同参数集和返回类型的方法

2）定义包含方法的MyTestClass，执行以下操作：打印指定类名的方法名，其中方法包含字符串参数，类名是字符串值。调用类的某个方法，并将参数放入方法，参数应从文本文件中读取（类名和方法名是方法的参数

我已经回答了这个问题，但我遇到了一个问题，当我在文本文件中运行程序时，我无法从文本文件中读取，有一个双数和一个整数，但它没有显示在控制台上这是我的代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Reflection;
using System.IO;

class MyClass
{
    private int i;
    public double d;
    private string s;
    public bool b;
    public MyClass()
    {
        i = 1;
        d = 0.1;
        s = "1";
        b = true;
    }
    public void Method0()
    {
        Console.WriteLine("Method with no arguments, no return value.");
    }
    private int Method1(int arg0)
    {
        Console.WriteLine("The method returns int, int gets.");
        return arg0;
    }
    private double Method2(int arg0, double arg1)
    {
        Console.WriteLine("Method returns a double, taking int and double.");
        return arg1 * arg0;
    }
    public bool Method3(string arg0)
    {
        Console.WriteLine("Method returns a bool, accepts string");
        return arg0.Length>10;
    }
    public bool Method3(string arg0,string arg1)
    {
        Console.WriteLine("The method takes two arguments string.");
        return arg0 == arg1;
    }
    public static char Method4(string arg0)
    {
        Console.WriteLine("Method returns a char, accepts string. .");
        return arg0[1];
    }
    public void Method5(int arg0, double arg1)
    {
        Console.WriteLine("arg1 = {0} arg2 = {1}.",arg0,arg1);
    }
}

class MyTestClass
{
    public static string[] GetMethodsWithStrParams(string className)
    {
        var t = Type.GetType(className);
        List<string> res = new List<string>();
        foreach (var method in t.GetMethods())
        {
            foreach (var param in method.GetParameters())
            {
                if (param.ParameterType == typeof(string))
                {
                    res.Add(method.Name);
                    break;
                }
            }
        }
        return res.ToArray();
    }
    public static void InvokeMethod(string className, string methodName, string fileName)
    {
        var t = Type.GetType(className);
        using (StreamReader f = new StreamReader("params.txt"))
        {
            t.GetMethod(methodName).Invoke(t.GetConstructor(Type.EmptyTypes).Invoke(new object[] { }),
                                           new object[] { f.ReadLine() });
        }
    }
}

class Program
{
    static void Main(string[] args)
    {
        string name = "MyClass";

        foreach (var x in MyTestClass.GetMethodsWithStrParams(name))
        {
            Console.WriteLine(x);
        }

        MyTestClass.InvokeMethod("MyClass", "Method4", "params.txt");

        Console.ReadKey(true);
    }
} 
```

这是我运行程序时的输出

```
method3
method3
method4
Method returns a char, accepts string. . 
```

但在 params.txt 里面有

```
10 1.5 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:01:49.633

一些建议：

将反射部分一分为二：1）对象的构造；2）方法的调用。这使代码更清晰，您可以重新使用该对象来调用下一个方法。

`f.ReadLine()`返回单个字符串。它不会自动将其拆分为单独的参数。*给出了一个具有单个*字符串值的`new object[] { f.ReadLine() }`对象数组。 您需要自己在某个分隔符上将该行拆分为单独的值。然后，您需要将这些单独的字符串转换为您的方法所需的参数类型。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T09:06:32.643

我在 Visual Studio 中运行您的代码，唯一的问题是文件名。其余的似乎原则上有效。文件 params.txt 肯定在可执行文件夹中吗？如果没有，您将需要提供完整路径。

```
MyTestClass.InvokeMethod("MyClass", "Method4", "c:\\params.txt"); 
```

我的另一个问题是？MyClass 是否存在于命名空间中？如果是这样，您将需要使用命名空间来返回 Type 对象：

```
MyTestClass.InvokeMethod("MyNamespace.MyClass", "Method4", "c:\\params.txt"); 
```

我还注意到，尽管方法 InvokeMethod 接受文件名作为参数，但它有一个硬编码的文件名。因此它会忽略通过调用代码（在 main 方法中）传递的文件名。*

# c - 使用 char 和 scanf "%hhu" 时输入值无效

> ID：15806528
> 
> 赞同：1
> 
> 时间：2013-04-04T08:49:49.543
> 
> 标签：c, input, char, scanf

所以这是代码

```
void main()
{
  unsigned char n,t;
  scanf("%hhu %hhu",&n,&t);
  printf("%hhu %hhu",n,t);
} 
```

问题是当我分别输入 5 和 1 时，输出为 0 和 1。*n*为0 ， *t*为 1 。但是，当我将类型从 char 更改为 int/unsigned 时，输出是正确的：5 和 1。

问题是为什么用 char 询问（数字）输入会给出无效值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T08:59:39.797

`int main(void)`请

```
scanf("%hhu %hhu",&n,&t); 
```

这里 ---------- ^ ------^ `unsigned char *`是预期的

同样的`printf("%hhu %hhu",n,t);`

所以改变

```
char n,t; 
```

至

`unsigned char n,t;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T10:47:45.220

Besides that it is

```
int main(void) 
```

at least, you also might like to also add the necessary prototypes by including the appropriate header:

```
#include <stdio.h> 
```

# android - 一旦Android失败，如何重试从网络下载xml文件

> ID：15806531
> 
> 赞同：0
> 
> 时间：2013-04-04T08:50:00.067
> 
> 标签：android, xml

我正在尝试制作一个 android 应用程序，当它第一次安装在用户手机中时，它需要从网上下载一个 xml 文件。由于它是基于数据的应用程序，因此需要该 xml 文件来设置数据库，没有它，应用程序将无法工作。但是，当下载成功时.. 一切运行正常，但很多时候我注意到由于网络丢失或连接超时等其他问题导致下载不成功。我应该怎么办？如果文件第一次没有下载..我的数据库已创建但为空...有没有办法重试从 web 下载 xml 文件。

```
try{

    URL url = new URL("http://example.com/abc.xml");
    XmlPullParserFactory factory=XmlPullParserFactory.newInstance();
    factory.setNamespaceAware(true);
    xpp=factory.newPullParser();

    xpp.setInput(getInputStream(url), "UTF_8");
}catch(Exception e){
        e.printStackTrace();
}

public InputStream getInputStream(URL url) {
      try {
        return url.openConnection().getInputStream();
      } catch (IOException e) {
        return null;
      }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:12:46.117

检查布尔变量响应，如果它是真的意味着文件下载成功然后什么都不做，重新开始下载..

# jboss-forge - 无法安装switchyard facet jboss forge

> ID：15806533
> 
> 赞同：0
> 
> 时间：2013-04-04T08:50:01.630
> 
> 标签：jboss-forge

我刚刚开始处理 JBoss Forge 和 Switchyard，但我无法使用 Switchyard 方面创建一个简单的 Forge 项目。

*   使用 jboss-forge-1.2.2.FINAL（我也尝试过使用 1.1.3）。
*   我在代理后面，所以我在我的 ~/.forge/config.xml 文件中配置了代理
*   我的 .m2/settings.xml 文件也设置了代理配置。

伪造配置文件：

```
<configuration>
  <proxy>
    <host>proxyhost</host>
    <port>proxyport</port>
    <!-- The entries below are necessary only if your proxy needs authentication -->
    <username>username</username>
    <password>password</password>
  </proxy>
</configuration> 
```

然后，当我在我的新项目中输入时（带有详细输出）

```
[myproject] myproject$ project install-facet switchyard.bean
***ERROR*** Exception encountered: (type "set VERBOSE false" to disable stack traces)
org.jboss.forge.project.facets.FacetNotFoundException: The requested Facet named [switchyard.bean] could not be found.
    at org.jboss.forge.project.services.FacetFactory.getFacetByName(FacetFactory.java:124)
    at org.jboss.forge.shell.plugins.builtin.project.ProjectPlugin.installFacet(ProjectPlugin.java:107)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.jboss.forge.shell.command.Execution.perform(Execution.java:134)
    at org.jboss.forge.shell.command.fshparser.FSHRuntime.run(FSHRuntime.java:109)
    at org.jboss.forge.shell.command.fshparser.FSHRuntime.run(FSHRuntime.java:47)
    at org.jboss.forge.shell.ShellImpl$ExecutorThread.run(ShellImpl.java:789)
    at org.jboss.forge.shell.ShellImpl.execute(ShellImpl.java:812)
    at org.jboss.forge.shell.ShellImpl.doShell(ShellImpl.java:602)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.jboss.weld.bean.proxy.AbstractBeanInstance.invoke(AbstractBeanInstance.java:48)
    at org.jboss.weld.bean.proxy.ProxyMethodHandler.invoke(ProxyMethodHandler.java:125)
    at org.jboss.forge.shell.ShellImpl$Proxy$_$$_WeldClientProxy.doShell(ShellImpl$Proxy$_$$_WeldClientProxy.java)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.jboss.weld.util.reflection.SecureReflections$13.work(SecureReflections.java:305)
    at org.jboss.weld.util.reflection.SecureReflectionAccess.run(SecureReflectionAccess.java:54)
    at org.jboss.weld.util.reflection.SecureReflectionAccess.runAsInvocation(SecureReflectionAccess.java:163)
    at org.jboss.weld.util.reflection.SecureReflections.invoke(SecureReflections.java:299)
    at org.jboss.weld.introspector.jlr.WeldMethodImpl.invokeOnInstance(WeldMethodImpl.java:188)
    at org.jboss.weld.introspector.ForwardingWeldMethod.invokeOnInstance(ForwardingWeldMethod.java:59)
    at org.jboss.weld.injection.MethodInjectionPoint.invokeOnInstanceWithSpecialValue(MethodInjectionPoint.java:198)
    at org.jboss.weld.event.ObserverMethodImpl.sendEvent(ObserverMethodImpl.java:282)
    at org.jboss.weld.event.ObserverMethodImpl.sendEvent(ObserverMethodImpl.java:265)
    at org.jboss.weld.event.ObserverMethodImpl.notify(ObserverMethodImpl.java:234)
    at org.jboss.weld.manager.BeanManagerImpl.notifyObservers(BeanManagerImpl.java:635)
    at org.jboss.weld.manager.BeanManagerImpl.fireEvent(BeanManagerImpl.java:622)
    at org.jboss.weld.manager.BeanManagerImpl.fireEvent(BeanManagerImpl.java:616)
    at org.jboss.forge.shell.Bootstrap$1.run(Bootstrap.java:172)
    at java.lang.Thread.run(Unknown Source) 
```

关于发生了什么的任何想法？我错过了什么吗？

提前致谢，

鲁本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:57:34.673

SwitchYard Forge 工具与旧版本的 Forge (1.0.2) 绑定已经有一段时间了。作为我们即将发布的 1.0 版本的一部分，Forge 版本已升级到 1.2.2。对于任一版本，您都需要使用 SwitchYard 安装程序将插件安装到现有的 Forget 安装中。如果您真的想将 SY 与 Forge 一起使用，我会等待 SY 1.0.0.Final 或提取 1.0.0 的夜间版本。

顺便说一句，您可能想在等待试用 Forge 1.0 版本的同时尝试基于 Eclipse 的工具。如果您想看看那里有什么可用的，请查看 SwitchYard 视频系列中的第 6 集： [https ://community.jboss.org/wiki/SwitchYardVideoSeries](https://community.jboss.org/wiki/SwitchYardVideoSeries)

# matlab - 为什么realmin > eps(0)？

> ID：15806537
> 
> 赞同：7
> 
> 时间：2013-04-04T08:50:17.550
> 
> 标签：matlab, ieee-754

`realmin`“返回 IEEE 双精度的最小正归一化浮点数”。`eps(X)`“是从 ABS(X) 到与 X 精度相同的下一个较大的幅度浮点数的正距离”。

如果我正确解释了上述文档，那么`realmin`- 可以表示的最小正数 - 必须小于`eps (0)`. 但：

```
>> realmin; % 2.2251e-308
>> eps(0);  % 4.9407e-324 
```

显然，`eps(0)`更小的 也可以表示。有人可以向我解释一下吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-04T09:04:34.017

这是一个浮点问题。你应该去阅读[非正规数](http://en.wikipedia.org/wiki/Denormal_number)。

简而言之，`realmin`返回最小的正*归一化*浮点数。但是有可能有比这更小的非正规数并且仍然可以用浮点数表示，这就是`eps(0)`返回的结果。

**非正规数的快速解释**

二进制浮点数如下所示：

```
1.abcdef * 2^M 
```

其中`abcdefg`是 0 或 1，并且`M`是 -1022 <= *M* <= 1023 范围内的数字。这些被称为*归一化*浮点数。最小可能的归一化浮点数是`1 * 2^(-1022)`。

非正规数看起来像这样

```
0.abcdef * 2^(-1022) 
```

因此它们可以采用小于可能的最小归一化浮点数的值。`-realmin`非正规数在和之间线性插值`realmin`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T08:54:07.173

也许这是一个定义问题，这是我在 eps 的文档中看到的：

```
For all X of class double such that abs(X) <= realmin, eps(X) = 2^(-1074) 
```

# android - 将图标左对齐到Button android中的文本

> ID：15806541
> 
> 赞同：3
> 
> 时间：2013-04-04T08:50:40.003
> 
> 标签：android, image, button, android-drawable

我有一个按钮，我想在按钮文本的左侧放置一个图像。

```
 Button b = new Button(this);

    l.addView(b);

    LinearLayout.LayoutParams pa = new LinearLayout.LayoutParams(-1, -2);

    b.setLayoutParams(pa);
    b.setText("Prueba");

    Drawable img = getResources().getDrawable(R.drawable.ic_launcher);

    b.setCompoundDrawablesWithIntrinsicBounds(img, null, null, null); 
```

但是按钮宽度匹配父元素，图像对齐按钮左侧，文本对齐按钮中心。

编辑：

我看到这个

![在此处输入图像描述](https://i.stack.imgur.com/7fiCE.png)

..但我希望图像仅对齐左侧文本，而不仅仅是按钮左边缘的右侧

我想看到这样的：

[http://img543.imageshack.us/img543/6534/img20130404111534.jpg](http://img543.imageshack.us/img543/6534/img20130404111534.jpg)

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:09:19.773

用这个

```
LinearLayout.LayoutParams pa = new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT,
                    LayoutParams.WRAP_CONTENT); 
```

如果你想设置重力使用这个

```
 LinearLayout.LayoutParams pa = new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT,
                    LayoutParams.WRAP_CONTENT);
 pa.gravity=Gravity.RIGHT; 
```

# vba - 使用前端的关系锁定后端的记录

> ID：15806545
> 
> 赞同：0
> 
> 时间：2013-04-04T08:50:54.263
> 
> 标签：vba, ms-access

我试图弄清楚如何通过访问前端的关系来保护访问后端的记录。
我在后端有下表：
tblSit（从后端链接）

```
tblSitID(autonumber) ProductID LocationID  
1 1 2  
2 5 1  
3 8 3

temp_tblToMove(table in front-end)  
temp_tblToMoveID(autonumber) tblSitID  
1 1  
2 3 
```

我想要做的是将产品从一个位置移动到另一个位置。这个想法是：
我在 tblSit 中选择存储每个产品位置的记录。然后我将该 ID 插入 temp_tblToMove 本地表中。然后我有一个表单，最终将从 tblSit 中删除选定的记录，并将它们再次插入到 tblSit 更改 LocationID 中。
我想要记录锁定，这样如果两个用户尝试移动同一个产品，那么他们在尝试从 tblSit 删除记录时会出错。
如果我在后端有 temp_tblToMove，那么这种关系将阻止记录删除。但我想将 temp_tblToMove 保留在前端，但这里的关系不包括“强制引用完整性”。

谢谢您的帮助。PS：对不起，如果我没有很好地解释我想要什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T10:03:30.823

有什么理由不能只更新现有记录？

```
UPDATE tblSit SET Location = NewLocationID WHERE ID = WhicheverID; 
```

# java - 使用 Scala 在 Neo4j 中建立索引关系

> ID：15806546
> 
> 赞同：0
> 
> 时间：2013-04-04T08:50:56.417
> 
> 标签：java, scala, neo4j, graph-databases

假设2个节点之间存在如下关系

```
start --> "follows" --> end 
```

我想创建一个名为“Relations”的索引并将上述关系添加到索引中。我如何在 Scala 或 Java 中做到这一点？

我试过这样做：

```
override def NodeIndexConfig = ("Relations", Some(Map("provider" -> "lucene", "type" -> "fulltext")))::NIL
    val rel_name = group+"_Voteup"
    val relation = user_node --> rel_name --> item_node

    val Relation_Index = getNodeIndex("Relations").get
    val rel_value = user_id+item_id+rel_name
    Relation_Index += (relation,"rel_id",rel_value) 
```

但是，我收到类型不匹配错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:57:18.983

您可能应该使用关系索引而不是节点索引，例如

```
override def RelationIndexConfig = ("Relations", Some(Map("provider" -> "lucene", "type" -> "fulltext")))::Nil
val rel_name = group+"_Voteup"
val relation = user_node --> rel_name --> item_node

val Relation_Index = getRelationIndex("Relations")
val rel_value = user_id+item_id+rel_name
Relation_Index.foreach(_ += (relation,"rel_id",rel_value)) 
```

注意：我删除了调用并对可选值`index.get`使用了“更安全”的调用。`foreach`

# c++ - 使用 Arduino 信号作为 PC 的输入？

> ID：15806552
> 
> 赞同：5
> 
> 时间：2013-04-04T08:51:10.433
> 
> 标签：c++, c, windows, arduino

我最近拿到了一个 Arduino (Uno)，我想知道一些事情。

我的扬声器没有外部音量转换器，所以我想，也许可以在 Arduino 上连接一个电位器，然后用它来控制音量（在 Windows 中）。但这可能吗？

要使用 Visual C、C++（或更多“多平台”语言）读取 Arduino 引脚的值？然后使用它在 Windows 中设置音量级别（如果在 Linux 中也可以的话）。

我认为这可能是可能的，因为如果您使用：

```
Serial.println(analogRead([pin with potentiometer])); 
```

您可以将电位器的值发送到电脑（通过 USB）。那么有什么方法可以在 C 或 C++ 中读取这些值？

我知道如何通过 C 或 C++ 在 Windows 中设置音量，我只需要知道是否有办法在（Visual）C 或 C++ 脚本中读出电位器的值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T09:07:28.103

确实。并使用完全相同的方法：串行通信。由于我不是出色的 Windows 专家，因此我无法为您编写完整的 Windows 示例，但这里有一些片段可以帮助您开始使用 Unix（Linux、OS X 等）：

Arduino上的代码：

```
#define POT_PIN 1

void setup()
{
    Serial.begin(9600); // 9600 baud is more than enough
}

void loop()
{
    int pot = analogRead(POT_PIN);
    unsigned char byte = (pot + 2) >> 2; // round and divide by 4
    Serial.write(pot);
    delay(100); // or do something useful
} 
```

电脑上的代码：

```
#include <termios.h>

struct termios tio;
memset(&tio, 0, sizeof(tio));

// Open serial port in mode `8N1', non-blocking
tio.c_cflag = CS8 | CREAD | CLOCAL;
tio.c_cc[VMIN] = 1;
tio.c_cc[VTIME] = 5;

int fd = open(device, O_RDONLY);

cfsetospeed(&tio, B9600);
cfsetispeed(&tio, B9600);
tcsetattr(fd, TCSANOW, &tio);

while (1) {
    unsigned char byte;
    read(fd, &byte, 1);
    use_some_library_to_set_volume(byte);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:14:50.787

有一些事情需要考虑。

*   您希望 PC 只听您的“电位器 Arduino”。您不希望它监听来自任何端口的任何随机 USB 数据。需要创建一个对您的设备来说有些独特的数据协议。如果你只是垃圾模拟读数，你会得到一些原始数据，如“123 128 133 145”，这可能意味着任何东西，并且来自任何类型的设备。

*   当您键入`Serial.whatever`时，Arduino 可能会发出 UART 信号。我对 Arduino 一无所知，但希望它板载 RS-232 或 USB 电路。您将需要 PC 上的匹配端口，传统的 RS-232 9 针 d-sub 连接器在现代计算机上越来越少见。您可能需要一个 RS-232 到 USB 转换器。

*   您需要一种方法来确定设备连接到哪个 COM 端口。就 PC 而言，USB 端口和传统的 RS-232 端口的工作方式相同。要么让用户手动选择端口，要么设计一个更智能的算法来找到你的设备连接的端口。

*   研究所有串行端口例程的 Windows API。[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363194%28v=vs.85%29.aspx)上的文档和示例。

# java - Vaadin7：跟踪用户是否处于活动状态（DOM 事件处理程序）

> ID：15806554
> 
> 赞同：2
> 
> 时间：2013-04-04T08:51:25.417
> 
> 标签：java, web-applications, vaadin

我们目前正在将我们的应用程序移植到 vaadin 7，我想跟踪用户在过去 30 年代左右是否活跃。我们曾经在自定义 CommunicationManager 中跟踪用户活动，但由于此类已弃用，我想我们可能不得不尝试不同的方法。

我创建了一个扩展，我用它来扩展 UI。

为简单起见，我们将点击和键盘使用计为用户活动：

```
// this is the extend method in the extension connector
@Override
protected void extend (ServerConnector target) {
  UIConnector uiConnector = (UIConnector) target;
  VUI uiWidget = uiConnector.getWidget();
  uiWidget.addDomHandler(this.keyPressed(), KeyPressEvent.getType());
  uiWidget.addDomHandler(this.mouseClicked(), ClickEvent.getType());
} 
```

然后，扩展程序将安排一个计时器，该计时器将每 30 秒通过 RPC 调用一次服务器，但前提是用户一直处于活动状态。这个定时器有效。不起作用的是 DOM 事件，它们似乎永远不会到达我添加的事件侦听器。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-22T09:53:34.517

根据您的实现，我建议您尝试一下[Refresher 插件](http://vaadin.com/directory#addon/26)。它以类似的方式工作，但让您可以更好地控制轮询间隔、服务器端侦听器。另外，您不必维护它。

另一种选择是利用 Vaadin 轮询支持（请参阅[https://vaadin.com/wiki/-/wiki/Main/Using%20polling](https://vaadin.com/wiki/-/wiki/Main/Using%20polling)）。

# dll - 如何从 shell 扩展加载 DLL？

> ID：15806560
> 
> 赞同：2
> 
> 时间：2013-04-04T08:51:36.847
> 
> 标签：dll, wix, system.data.sqlite, regasm, shell-extensions

我写了一个小的 shell 扩展，存根可以工作，但希望它从 SQLite 数据库中读取一些信息。

[SQLite 需要 2 个 DLL](http://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki)：

*   `System.Data.SQLite.dll`：仅托管的核心程序集
*   `SQLite.Interop.dll`: 本机互操作程序集

过去，我已经使用这两个 DLL 成功构建了桌面应用程序，方法是将它们放在与文件相同的文件夹中`.exe`。
但是在shell扩展的情况下，没有`.exe`文件这样的东西，那么我应该把这些DLL放在哪里呢？

注意：现在我使用[Regasm](http://www.codeproject.com/Articles/174369/How-to-Write-Windows-Shell-Extension-with-NET-Lang)部署 shell 扩展，但我计划将来使用[WiX](http://wixtoolset.org)部署它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:01:59.033

您可能已经知道，程序集是相对于 .exe 及其 .exe.config 文件中的说明找到的。这意味着您的 .dll 将不得不“手动”加载其程序集。

```
AppDomain.CurrentDomain.AssemblyResolve += new ResolveEventHandler(ResolveLocally);

static Assembly ResolveLocally(object sender, ResolveEventArgs args)
{
    string path = Path.Combine(
        Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location),
        new AssemblyName(args.Name).Name + ".dll"
        );
    if (!File.Exists(path))
    {
       return null;
    }

    return Assembly.LoadFrom(path);
} 
```

这与此处基本相同：[How to add folder to assembly search path at runtime in .NET?](https://stackoverflow.com/q/1373100/23852)

# php - 类别的递归循环

> ID：15806561
> 
> 赞同：1
> 
> 时间：2013-04-04T08:51:37.220
> 
> 标签：php, loops, recursion, categories

我正在尝试在我的网站上实施类别系统。问题是一个类别可以有孩子。到目前为止，我的桌子`category`看起来像这样：

```
id, name, parent_id 
```

到目前为止，我做了一个循环，但它只适用于 2 个级别。这是我的代码：

```
for($i=0;$i<count($data);$i++){
    $tree[$data[$i]->name] = array();
    for($j=0;$j<count($data);$j++){
        if($data[$j]->parent_id == $data[$i]->id){
            $tree[$data[$i]->name][] = $data[$j]->name;
        }
    }
} 
```

它返回给我一个数组：

```
Array
(
    [0] => Array
        (
            [1] => Cat1
            [children] => Array
                (
                    [12] => sub cat 1
                    [13] => sub cat 2
                    [14] => sub cat 3
                )

        )

    [1] => Array
        (
            [2] => Cat2
        )

    [2] => Array
        (
            [3] => Cat3
        )
) 
```

我怎样才能使它高效和递归地拥有更多类似的东西：

```
Array
(
    [0] => Array
        (
            [1] => Cat1
            [children] => Array
                (
                    [12] => sub cat 1
                    [13] => sub cat 2
                    [14] => sub cat 3
                        [children] => Array
                            (
                                [1] => sub sub cat 1
                            )
                )

        )

    [1] => Array
        (
            [2] => Cat2
        )

    [2] => Array
        (
            [3] => Cat3
        )
) 
```

谢谢你的帮助

***编辑***

我正在研究 Zend，它返回给我的`data`是：

```
Zend_Db_Table_Rowset Object
(
    [_data:protected] => Array
        (
            [0] => Array
                (
                    [id] => 1
                    [name] => Cinema
                    [type] => category
                    [slug] => cinema
                    [parent_id] => -1
                )

            [1] => Array
                (
                    [id] => 2
                    [name] => Horror
                    [type] => category
                    [slug] => horror
                    [parent_id] => 1
               ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T08:58:02.200

如果您想应用这种类型的结构，最好`child`在其他表中使用父 ID 作为`foreign key.` 这样，您可以进行递归类别发布。所以表结构会是这样的

```
ch_id, parent_id, child 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T08:58:10.057

您应该查看[Nested Sets](http://en.wikipedia.org/wiki/Nested_set_model)，这是一种在关系数据库中存储和检索日期树的方法（实际上您的类别是什么）。为此，您必须稍微调整您的数据库方案（如链接或有关嵌套集的几个教程中所述）。对于 PHP，有几个库提供嵌套集功能，例如[这个 list](https://stackoverflow.com/questions/3982067/nested-set-model-php-library)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T09:06:02.340

这应该可以帮助你。它遍历数组的每个成员，并检查它在每个级别和依赖关系的树结构中的位置。

```
function get_children($data, $parent_id = false) {
  $result = array();
  foreach ($data as $i => $content) {
    if ($parent_id != false && $content['id'] != $parent_id)  # other levels
      continue;
    if ($parent_id === false && !empty($content['parent_id'])) # top level
      continue;

    $leaf = array(
      'id' => $content['id'],
      'parent_id' => $content['parent_id'],
      'name' => $conten['name']
    );
    $leaf['children'] = get_children($data, $leaf['id']);
    $result[$leaf['id']] = $leaf;
  }
  return $result;
}

$result =  get_children($data);
print_r($result); 
```

编辑：错误修复

# ios - 无法在情节提要 iOS 中附加 UIScrollView 分页

> ID：15806562
> 
> 赞同：0
> 
> 时间：2013-04-04T08:51:45.410
> 
> 标签：ios, objective-c, uiscrollview, scroll-paging

我有一个用故事板构建的表格应用程序，所以我想为表格中的项目添加分页可能性。我使用[了本教程](http://www.iosdevnotes.com/2011/03/uiscrollview-paging/)：

所以我将新视图添加到情节提要和视图上的 UIScrollView。比做了一个属性 UIScrollView* scrollView; 并在情节提要中制作关系 scrollView - ECOMClPanelPagingViewController。（ECOMClPanelPagingViewController 是我的视图的 UIViewController 类。

。H

```
#import <UIKit/UIKit.h>
@interface ECOMClPanelPagingViewController : UIViewController
{
    UIScrollView *scrollView;
}
@property (nonatomic, retain) IBOutlet UIScrollView* scrollView;
@end 
```

.m

```
#import "ECOMClPanelPagingViewController.h"
@interface ECOMClPanelPagingViewController ()
@end
@implementation ECOMClPanelPagingViewController
@synthesize scrollView;
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
    }
    return self;
}
- (void)viewDidLoad
{
    [super viewDidLoad];
    NSArray *colors = [NSArray arrayWithObjects:[UIColor redColor], [UIColor greenColor], [UIColor blueColor], nil];
    for (int i = 0; i < colors.count; i++) {
        CGRect frame;
        frame.origin.x = self.scrollView.frame.size.width * i;
        frame.origin.y = 0;
        frame.size = self.scrollView.frame.size;
        UIView *subview = [[UIView alloc] initWithFrame:frame];
        subview.backgroundColor = [colors objectAtIndex:i];
        [self.scrollView addSubview:subview];
        [subview release];
    }
    self.scrollView.contentSize = CGSizeMake(self.scrollView.frame.size.width * colors.count, self.scrollView.frame.size.height);
}
- (void)viewDidUnload
{
    self.scrollView = nil;
}
- (void)dealloc
{
    [scrollView release];
    [super dealloc];
}
- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
}
@end 
```

所以我只看到带有导航控制器的白色背景..谁能帮助我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:50:03.057

只需取消选中 Use Autolayout 选项

# c - ((double *)0) 在 C 内部做什么

> ID：15806567
> 
> 赞同：0
> 
> 时间：2013-04-04T08:52:01.617
> 
> 标签：c, compiler-construction

我想了解编译器遇到这个语句和`((double*)0+1)`语句时是怎么做的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T08:54:01.027

由于`double *`是指针类型，它将字面值传播`0`给`NULL`指针，然后根据指针算术规则，将其值加1（因此在数值上，结果将是`NULL + sizeof(double)`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T17:57:00.920

什么都没有......它将 0 （根据定义，`NULL`指针）转换为指向`double`. 大概是这样说的：

```
double *ptr;
....
ptr = ((double *) 0);
....
ptr = NULL;  /* Idiomatic */
ptr = 0;     /* Also allowed, for lazy fingers */ 
```

上面的所有三个任务都做同样的事情。

除非指针值转换为 0，否则您必须格外小心不要搞砸。大多数指针转换都要求未定义的行为，它们可能会在您当前机器上与今天的编译器一起“工作”，并在一年后在您耳边响起。

# jquery - Jquery mobile 和 google maps openinfowidow 加载而不是点击

> ID：15806568
> 
> 赞同：0
> 
> 时间：2013-04-04T08:52:06.187
> 
> 标签：jquery, google-maps, jquery-mobile, jquery-ui-map

我正忙着在我与 Jquery Mobile 一起使用的谷歌地图上的地图标记上制作我的信息窗口内容，但我发现我无法自动打开信息窗口。

目前它以点击事件打开，但加载事件无效。

我当前有效的代码如下。

```
$('#map_canvas').gmap({
 'center': '-26.083478,28.092296',
 'zoom': 15,
 'disableDefaultUI': true
  }).bind('init', function (ev, map) {
   $('#map_canvas').gmap('addMarker', {
    'position': '-26.083478,28.092296',
    'icon': 'images/map_logo.png',
    'bounds': false
   }).click(function () {
    $('#map_canvas').gmap('openInfoWindow', {
     'content': '<div id="siteNotice">' +
     '</div>' +
     '<h1 id="firstHeading" class="firstHeading">Lemon Decor</h1>' +
     '<div id="bodyContent">' +
     '<p>Unit 17, Olympia Gardens<br />' +
     'Olympia Street <br />' +
     'Marlboro</p>' +
     '<p> Tel: 011 262 4116<br />' +
     'Fax: 086 697 4110<br />' +
     'Email: <a href="mailto:info@lemondecor.co.za">info@lemondecor.co.za</a></p>' +
     '</div>' +
     '</div>'
   }, this);
 });
}); 
```

如果我将代码更改为

```
$('#map_canvas').gmap({
 'center': '-26.083478,28.092296',
 'zoom': 15,
 'disableDefaultUI': true
 }).bind('init', function (ev, map) {
  $('#map_canvas').gmap('addMarker', {
   'position': '-26.083478,28.092296',
   'icon': 'images/map_logo.png',
   'bounds': false
 }).load(function () {
  $('#map_canvas').gmap('openInfoWindow', {
   'content': '<div id="siteNotice">' +
   '</div>' +
   '<h1 id="firstHeading" class="firstHeading">Lemon Decor</h1>' +
   '<div id="bodyContent">' +
   '<p>Unit 17, Olympia Gardens<br />' +
   'Olympia Street <br />' +
   'Marlboro</p>' +
   '<p> Tel: 011 262 4116<br />' +
   'Fax: 086 697 4110<br />' +
   'Email: <a href="mailto:info@lemondecor.co.za">info@lemondecor.co.za</a></p>' +
   '</div>' +
   '</div>'
  }, this);
 });
}); 
```

load 事件没有影响。对此有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:39:57.373

`.load()`不是事件方法。它是一种触发 AJAX 请求的方法。

如果您想在地图加载后打开信息框，那么您需要在地图加载后执行此操作。我没有使用过`gmap`，但使用 google maps api 你可以这样做：

```
google.maps.event.addListener(map, 'idle', function() {
    // open info window
}); 
```

# jquery - 如何实现天气API

> ID：15806569
> 
> 赞同：1
> 
> 时间：2013-04-04T08:52:10.720
> 
> 标签：jquery, html, cordova, jquery-mobile, jquery-plugins

嗨，我想在我的一个应用程序中实现天气功能。所以为此我需要使用天气 API。所以任何人都可以建议我使用哪个天气 API 以及如何使用 jquery Mobile 来实现它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T09:46:07.820

这里的解决方案很少，这完全取决于您愿意走多远。您想立即显示最终结果还是自己解析？

# 完整的解决方案

**[雅虎！jQuery 的天气提要插件](http://www.zazar.net/developers/jquery/zweatherfeed/)**

**HTML：**

```
<div data-role="page" id="index">
    <div data-theme="a" data-role="header">
        <h3>
            First Page
        </h3>
        <a href="#second" class="ui-btn-right">Next</a>
    </div>

    <div data-role="content">
        <div id="test"></div>
    </div>

    <div data-theme="a" data-role="footer" data-position="fixed">

    </div>
</div> 
```

**Javascript：**

```
$(document).on('pagebeforeshow', '#index', function(){       
    $(document).ready(function () {
        $('#test').weatherfeed(['UKXX0085','EGXX0011','UKXX0061','CAXX0518','CHXX0049']);
    });
}); 
```

工作示例：http: [//jsfiddle.net/Gajotres/7qvJH/](http://jsfiddle.net/Gajotres/7qvJH/)

**[简单的天气插件](http://monkeecreate.github.com/jquery.simpleWeather/)**

可能是最好的一个，因为您将获得可行的插件，但您可以使用它来显示您想要的数据，无论您想要在哪里。

工作示例（不是我的）：http: [//jsfiddle.net/fleeting/a4hbL/](http://jsfiddle.net/fleeting/a4hbL/)

**HTML：**

```
<!-- Docs at http://simpleweather.monkeecreate.com -->
<div id="weather"></div> 
```

**Javascript：**

```
// Docs at http://simpleweather.monkeecreate.com
$(document).ready(function() {
  $.simpleWeather({
    zipcode: '',
    woeid: '2357536',
    location: '',
    unit: 'f',
    success: function(weather) {
      html = '<h2>'+weather.temp+'&deg;'+weather.units.temp+'</h2>';
      html += '<ul><li>'+weather.city+', '+weather.region+'</li>';
      html += '<li class="currently">'+weather.currently+'</li>';
      html += '<li>'+weather.tempAlt+'&deg;C</li></ul>';

      $("#weather").html(html);
    },
    error: function(error) {
      $("#weather").html('<p>'+error+'</p>');
    }
  });
}); 
```

# 教程

**[教程 1](http://papermashup.com/using-googles-weather-api/)**

**来源：**谷歌天气提要

这是一个简单的教程。在那里你会发现一切都可以自己做。请注意，它需要 PHP 和 jQuery。

**[教程 2](http://tutorialzine.com/2012/05/weather-forecast-geolocation-jquery/)**

**资料来源：**雅虎天气提要

另一个很棒的教程。它只需要 jQuery。在那里，您将找到使其工作所需的一切。

**演示：** [http ://demo.tutorialzine.com/2012/05/weather-forecast-geolocation-jquery/](http://demo.tutorialzine.com/2012/05/weather-forecast-geolocation-jquery/)

虽然本教程有一些缺陷（它需要您的地理位置），但它可用于手动创建新的天气插件。

**编辑** [上一个教程得到了更新。](https://tutorialzine.com/2013/05/weather-web-app-geolocation-revisited)现在它使用 OpenWeatherMap 而不是 Yahoo。

# android - android-opencv 应用程序的模板匹配

> ID：15806573
> 
> 赞同：0
> 
> 时间：2013-04-04T08:52:23.030
> 
> 标签：android, opencv, image-processing

我已经开发了一种使用 OpenCV 的 android 算法。我需要找到前一个图像和当前帧之间的重叠。因此，我从以前的图像中生成了模板，以匹配当前帧来制作照片。这是完成拍摄的过程。（拍了10多张照片）

这是我为找到重叠而开发的代码。

```
public void overlapFinder(Mat inputFrame , Mat inputTemplate )

{

Mat mResult; 

  int resultWidth =  inputFrame.width() - inputTemplate.width() + 1; 

  int resultHeight = inputFrame.height() - inputTemplate.height() + 1;

  mResult = new Mat(resultHeight, resultWidth, CvType.CV_8U); 

  Imgproc.matchTemplate(inputFrame, inputTemplate, mResult,Imgproc.TM_CCORR_NORMED) ; 
  Core.MinMaxLocResult result = Core.minMaxLoc(mResult);

  @SuppressWarnings("unused")

  double maxVal = result.maxVal;

} 
```

问题是当从前一张图像生成模板后调用“重叠函数”时，应用程序崩溃了。

有人可以帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:38:42.957

也许您确实需要先进行一些调试，但无论如何，我可以从您的代码中看到检查图像的大小是值得的 - 您的代码似乎假设模板始终小于输入帧。

如果这不是真的，你会得到否定`resultWidth`和/或`resultHeight`，这将使它崩溃。

另一件事 - 文档建议结果类型应该是`CV_32FC1`.

PS - 尝试像这样初始化你的结果：

```
mResult.create(resultHeight, resultWidth, CvType.CV_32FC1); 
```

# android - BluetoothChat 传输的数据被拆分

> ID：15806575
> 
> 赞同：0
> 
> 时间：2013-04-04T08:52:25.937
> 
> 标签：android, bluetooth

我正在使用蓝牙将我的应用程序中的数据传输到我的设备，在那里我显示接收到的数据。

我使用`BluetoothChat`组件的一部分与其他设备连接并管理传输。如果我使用 发送来自另一部智能手机的数据`BluetoothChat`，它会正确显示在我的应用程序中。但是，如果我从外部蓝牙模块（*`Rn42`*在我的情况下）发送数据，则接收到的数据有时会被拆分。

例如，如果我发送`35`，我实际收到的是`3`and `5`。如果我使用`BluetoothChat`组件发送数据，也会发生这种情况。

你知道可能是什么问题吗？

# liferay-6 - Liferay：将/guest这个词改成别的

> ID：15806576
> 
> 赞同：1
> 
> 时间：2013-04-04T08:52:26.257
> 
> 标签：liferay-6

是否可以将“/web/guest/home”中的“访客”一词更改为其他内容，例如。LR？我正在使用liferay 6.1。

更新：我尝试通过控制面板 -> 站点设置 -> 站点 URL 更改此设置，但没有成功。还在门户属性文件中写了 company.default.home.url=/LR ，这也没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T09:34:18.473

您可以通过互联网搜索。你可以这样做：[http ://www.mygeekjourney.com/index.php/2012/05/21/how-to-remove-web-guest-in-liferay-6-1/](http://www.mygeekjourney.com/index.php/2012/05/21/how-to-remove-web-guest-in-liferay-6-1/)

# facebook - CakePHP 2.3.1 Facebook 认证

> ID：15806581
> 
> 赞同：0
> 
> 时间：2013-04-04T08:52:49.340
> 
> 标签：facebook, cakephp, facebook-php-sdk

我正在使用 CakePHP 2.3.1 和这个插件：[https](https://github.com/webtechnick/CakePHP-Facebook-Plugin) ://github.com/webtechnick/CakePHP-Facebook-Plugin来实现 Facebook 身份验证。我按照这个屏幕投射[http://tv.cakephp.org/video/webtechnick/2011/01/12/nick_baker_--_facebook_integration_with_cakephp](http://tv.cakephp.org/video/webtechnick/2011/01/12/nick_baker_--_facebook_integration_with_cakephp)但它不起作用，我无法接收 Facebook 用户信息。我的意思是`$this->Connect->user()`总是回来`null`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T14:13:01.853

首先确保您的用户有权访问您的应用程序。然后通过 api(/me) 拨打电话检索个人详细信息 =>`$this->Connect->user()`

就个人而言，我使用这个

```
public function beforeFilter(){
    if($this->Connect->FB->getUser() != 0){
        $this->set('facebookUser', $this->Connect->user());
} 
```

启动 ConnectComponent 将填充（或不填充）身份验证会话。如果找不到 id，则将用户重定向到登录对话框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-15T14:45:06.317

从 beforefilter.. 调用此方法并将收到的发布数据保存在 fb_data 等变量中。

```
protected function _valdiateFbRequest() {

       if (!isset($this->request->data['signed_request'])) {
        // not a valid request from fb
       // throw exception or handle however you want
       return;
   }
   $this->signedRequest = $this->request->data['signed_request'];
   $this->fb_data=$this->Connect->registrationData(); //save fb data

   unset($this->request->data['signed_request']);

   if (empty($this->request->data)) {
       $this->Security->csrfCheck = false;
   }
   // validate the request
} 
```

# javascript - 围绕一个点进行旋转

> ID：15806582
> 
> 赞同：0
> 
> 时间：2013-04-04T08:52:50.643
> 
> 标签：javascript, three.js

我正在使用三个 API 来实现我的应用程序中的一些动画。现在我有一个真正的问题：我想围绕一个特定点进行球形旋转。网格对象中包含的“旋转”方法允许我制作它们，但旋转的中心是（默认情况下我猜）网格的中心。然后，我只围绕自己旋转我的对象......我已经找到了一些例子，但它们并没有解决我的问题。我尝试创建对象 3D 父对象，例如组，并在翻译它们后尝试围绕这些组进行旋转，但这仍然不起作用......

你能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:54:03.097

很抱歉，我发现了我的问题......制作一个 jsfiddle 让我意识到我忘记将我的父母实例化为“一个新的 Object 3D()”，这就是为什么我在我的场景中没有看到任何对象的原因在我父母身上使用过动画......无论如何，我给你一小部分我的代码，专门用于有兴趣的人寻找任何帮助：

```
// mesh
mesh = new THREE.Mesh( geometry, material );
parent = new THREE.Object3D();
parent.add(mesh);
// if i want my rotation point situated at (300;0;0)
parent.position.set(300,0,0);
mesh.position.set(-300, 0, 0);
scene.add(parent); 
```

[http://jsfiddle.net/KqTg8/6/](http://jsfiddle.net/KqTg8/6/)
谢谢

# php - 多个对话框

> ID：15806585
> 
> 赞同：0
> 
> 时间：2013-04-04T08:53:02.800
> 
> 标签：php, jquery, jquery-ui-dialog

我在 jquery 中遇到对话框问题，我有一个查询，它在一个循环中将多达 4 项数据放入一个 div 中。我希望通过对话框让每一行都可用于获取更多信息。

**在头部标签中：**

```
<link rel="stylesheet" 
href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
  <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
  <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>     

<script>
  $(function() {
    $( ".dialog" ).dialog({
      autoOpen: false,
      show: {
        effect: "blind",
        duration: 1000
      },
      hide: {
        effect: "explode",
        duration: 500
      }
    });

    $( ".opener" ).click(function() {
      $( ".dialog" ).dialog( "open" );
    });
  });
  </script> 
```

**PHP：**

```
foreach($veh as $v){
        echo '<div class="block">';

        $sql = "SELECT * FROM table";
            $result = $dbh->query($sql); 
            $row = $result->fetchall(PDO::FETCH_ASSOC);

    foreach($row as $r){            

        echo '<div class="effect6">'.strtoupper($r['col_name']).'</div>';
        echo '<div id="dialog" title="'.$r['eas_no'].'">Text</div>';
        echo '<button id="opener">Open</button>';
                            }

                echo '</div>';

                } 
```

**编辑** 每一个对话框现在打开...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T09:11:34.377

尝试将您的代码更改为：

```
<script>
  $(function() {
    $( ".dialog" ).dialog({
      autoOpen: false,
      show: {
        effect: "blind",
        duration: 1000
      },
      hide: {
        effect: "explode",
        duration: 500
      }
    });

    $( ".opener" ).bind("click", function() {
        var selectorClass = ".dialogDiv" + $(this).attr("id");
        $(selectorClass).dialog( "open" );
    });
  });
</script> 
```

和

```
$tmp = 0; 
foreach($row as $r) {            

    echo '<div class="effect6">'.strtoupper($r['col_name']).'</div>';
    echo '<div class="dialogDiv'.$tmp.' dialog" title="'.$r['eas_no'].'">Text</div>';
    echo '<button class="opener" id="'.$tmp.'">Open</button>';
    $tmp++;    
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T09:07:18.410

您正在使用相同的 id (`dialog`和`opener`) 制作多个东西。id 在页面上应该是唯一的

# c - 未定义的引用...函数返回指针

> ID：15806588
> 
> 赞同：0
> 
> 时间：2013-04-04T08:53:11.697
> 
> 标签：c, postgresql, pointers, libpq

制作一个连接到 PostgreSQL 数据库的标头我将 libpq 函数封装到我自己的函数中，但是在其中一个函数中，它应该返回一个 PGconn 类型的指针，我得到一个类型的错误......

`ConexionPostgres.c:32:6: aviso: la asignación crea un puntero desde un entero sin una conversión [activado por defecto]` `/tmp/ccCeaewL.o: In function`main `':` `ConexionPostgres.c:`( `.text+0x86`)`: undefined reference to`设置BD`'`

我认为这是因为原型所以我更改了原型并将定义直接放在 main 之前但什么都没有......有人能告诉我发生了什么吗？

我正在检查 Postgres libpq 文档和 libpq-fe.h 直接查看原型，所以我没有遗漏任何东西，但我很困惑。这是我的代码：

```
PGconn *setDB(char *conninfo)
{
    PGconn *db;
    db = PQconnectdb(conninfo);

    if(!db)
          printf("Error en conexion a la BD");

    if(PQstatus(db) != CONNECTION_OK)
    {
      printf( "%s\n", PQerrorMessage(db));
    }
    else
    {
        return db;
    }

}

int main()
{

      const char *conninfo = "dbname='database' host='somehost' user='me' password='somepass'";
    //char *query = "INSERT INTO productos VALUES ('1','5','235')";

    PGconn *con;
    con = setBD(conninfo); /* --> Here's apparently the problem */  

    PQfinish(con);
    exit(0);

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T08:56:31.223

错字。您调用函数`setBD()`，而调用定义的函数`setDB()`。

# mysql - 如何使用spring-mybatis从spring组件生成表？

> ID：15806590
> 
> 赞同：0
> 
> 时间：2013-04-04T08:53:15.583
> 
> 标签：mysql, spring, mybatis

我正在使用 spring-mybatis 并且我已经配置了许多组件和映射器。我的服务工作没有任何问题，但我想知道是否可以从 spring 组件生成表（使用注释`@Component`），或者我是否必须手动创建表以便我可以执行我的映射器方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T23:36:36.260

我已经使用以下方法来做到这一点，但也许它有点hacky。

正常创建映射器，但添加另一个接口方法来创建表：

```
@Insert("create table if not exists students (name integer)")
public void createTable(); 
```

然后，在您的服务类中，使用`@PostContruct`注释创建一个方法，以便在启动时调用它：

```
@Autowired
private StudentDao studentMapper;

@PostConstruct
private void setup() {
    // setup stuff goes here.
    studentMapper.createTable();
    // include any other mappers you have...
} 
```

我尝试用注释`createTable()`方法，`@PostConstruct`但没有执行。可能是因为它是一个接口。

希望对欧文有所帮助

# javascript - 如何从java脚本中的另一个函数调用函数

> ID：15806591
> 
> 赞同：0
> 
> 时间：2013-04-04T08:53:18.667
> 
> 标签：javascript, html

如果我将它调用为 jquery 事件按键或按下，我有一个可以正常工作的函数。但如果我从另一个函数调用相同的函数，它就不起作用。像这样在 add 中调用乘法函数。

```
 function add(){
    multiply();
    } 
```

javascript:

```
 $(function(){

            var input = $('.input'),
        bar = $('.bar'),
        bw = bar.width(),
        percent = bar.find('.percent'),
        ps =  percent.find('span'),
        name = 'rotate';

         input.on('keydown', function(e){
        if (e.keyCode == 13){
            var t = $(this), val = t.val();
            if (val >=0 && val <= 100){
                var w = 100-val, pw = (bw*w)/100,
                    pa = {
                        height: w+'%'
                    },
                    cw = (bw-pw)/2,
                    ca = {
                        left: cw
                    }
                ps.animate(pa);
                cs.text(val+'%');
                circle.animate(ca, function(){
                    circle.removeClass(name)
                }).addClass(name);  
            } else {
                alert('range: 0 - 100');
                t.val('');
            }
        }
    });

}); 
```

HTML：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
        <html xmlns="http://www.w3.org/1999/xhtml">
        <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>Horizontal bar graph with CSS3 and jQuery</title>
        <link href="css/default.css" rel="stylesheet" type="text/css" />
        <script src="js/jquery.js" type="text/javascript"></script>
        <script src="js/init.js" type="text/javascript"></script>
        <script src="slider_scripts/cal_impact_on_clinic.js"></script>
        <style>
         #sliderValue140h{ position:absolute;
           margin:0px 0px 0px 330px;
           font-family: Myriad Pro,Normal,strong;
           font-size: 16px;
           border:none;
           background-color:transparent;
           color:#000;
           } 

          #sliderValue150h{ position:absolute;
           margin:0px 0px 0px 330px;
           font-family: Myriad Pro,Normal,strong;
           font-size: 16px;
           border:none;
           background-color:transparent;
           color:#000;
           }    

           #sliderValue160h{ position:absolute;
           margin:0px 0px 0px 330px;
           font-family: Myriad Pro,Normal,strong;
           font-size: 16px;
           border:none;
           background-color:transparent;
           color:#000;
           }                       
         </style>

         <script language="JavaScript" src="slider_scripts/slider.js"></script>
         </head>

         <body>
         <form action="#" method="get" name="demoForm" id="slider"> 

         <div id="sliderimpact2_slide2" ontouchmove="calc(),put_zero();">

         <input name="sliderValue" type="Text" id="sliderValue140h" onChange="A_SLIDERS[5].f_setValue(this.value)" value="5" size="3" readonly>

         <script language="JavaScript">

     var A_TPLh140h = {

    'b_vertical' : false,

    'b_watch': true,

    'n_controlWidth': 356,

    'n_controlHeight': 29,

    'n_sliderWidth': 32,

    'n_sliderHeight': 33,

    'n_pathLeft' : -5,

    'n_pathTop' : -8,

    'n_pathLength' :340,

    's_imgControl': 'images/slide5slider.png',

    's_imgSlider': 'images/Slider Circle 2.png',

    'n_zIndex': 1

         }

        var A_INITh140h = {

    's_form' : 0,

    's_name': 'sliderValue140h',

    'n_minValue' : 0,

    'n_maxValue' : 100,

    'n_value' : 0,

    'n_step' : 5,

       }

      new slider(A_INITh140h, A_TPLh140h);

          </script>

          </div> 
          <br />
           <br />

           <div id="sliderimpact2_slide2" ontouchmove="calc(),put_zero();">

           <input name="sliderValue" type="Text" id="sliderValue150h" onChange="A_SLIDERS[5].f_setValue(this.value)" value="5" size="3" readonly>

           <script language="JavaScript">

         var A_TPLh150h = {

    'b_vertical' : false,

    'b_watch': true,

    'n_controlWidth': 356,

    'n_controlHeight': 29,

    'n_sliderWidth': 32,

    'n_sliderHeight': 33,

    'n_pathLeft' : -5,

    'n_pathTop' : -8,

    'n_pathLength' :340,

    's_imgControl': 'images/slide5slider.png',

    's_imgSlider': 'images/Slider Circle 2.png',

    'n_zIndex': 1

      }

          var A_INITh150h = {

     's_form' : 0,

     's_name': 'sliderValue150h',

     'n_minValue' : 0,

     'n_maxValue' : 100,

     'n_value' : 0,

     'n_step' : 5,

         }

         new slider(A_INITh150h, A_TPLh150h);

            </script>

            </div> 
            <br />
            <br />

    <div id="sliderimpact2_slide2" ontouchmove="calc(),put_zero();">

    <input name="sliderValue" type="Text" id="sliderValue160h" onChange="A_SLIDERS[5].f_setValue(this.value)" value="5" size="3" readonly>

    <script language="JavaScript">

 var A_TPLh160h = {

    'b_vertical' : false,

    'b_watch': true,

    'n_controlWidth': 356,

    'n_controlHeight': 29,

    'n_sliderWidth': 32,

    'n_sliderHeight': 33,

    'n_pathLeft' : -5,

    'n_pathTop' : -8,

    'n_pathLength' :340,

    's_imgControl': 'images/slide5slider.png',

    's_imgSlider': 'images/Slider Circle 2.png',

    'n_zIndex': 1

   }

        var A_INITh160h = {

    's_form' : 0,

    's_name': 'sliderValue160h',

    'n_minValue' : 0,

    'n_maxValue' : 100,

    'n_value' : 0,

    'n_step' : 5,

         }

         new slider(A_INITh160h, A_TPLh160h);

            </script>

            </div> 
            <br />
            <br />
            <br /> 
            <br />
            <br />
            <br />
            <br />
            <br />
            <br />
            <br />
            <br />
            <br />
            <br />
            <br />
            <br />
            <br />
            <br />
            <br />
            <br />
            <br />
            <br />

            <img src="images/Show Impact.png" onclick="slidercalsevere();">
            <div class="wrap">
    <div class="bar">
    <div class="percent">
    <span style="width: 100%;"></span>
    </div>
    </div>

            <div class="text">
    <input type="text" class="input"  value="0" id="sliderValue170h"/>
    </div>
    </div>
            </form> 
            </body>
            </html> 
```

这里只是单独的 html 文件

[http://pastebin.com/rsDuEWf3](http://pastebin.com/rsDuEWf3)

这是脚本文件

[http://pastebin.com/Sev6yTnb](http://pastebin.com/Sev6yTnb)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:05:57.023

如果要在页面加载时加载功能，请使用***window.onload = add;***

# android - onActivityCreated 方法在一个片段中调用，而不是在其他片段中调用

> ID：15806592
> 
> 赞同：2
> 
> 时间：2013-04-04T08:53:32.753
> 
> 标签：android, user-interface, android-fragments

我正在开发一个平板电脑应用程序。我已经创建了一个用于项目列表的片段和另一个用于项目细节的片段。两个片段类中都有`onActivityCreated`方法。两个片段都用于一个活动类。我有一个问题，`onActivityCreated`即为一项活动而不是其他活动调用方法。我想问它是如何`onActivityCreated`工作的。我想为第二个片段活动方法调用一个`onActvityCreated`方法。请帮我。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T11:00:46.287

`onActivityCreated()`在创建 Fragment 之后调用，就像`onCreate()`在创建 Activity 时调用一样。要了解框架生命周期，请单击[此处](http://developer.android.com/guide/components/fragments.html#Creating)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T09:05:22.943

我使用观察者模式并让我的片段注册以获得活动结果。

```
public abstract class MyActivity {

    protected static Set<ActivityListener> mListenerSet = Collections.synchronizedSet(new HashSet<ActivityListener>(4,0.75f));

    public interface ActivityListener {
        public void onActivityResult(int requestCode, int resultCode, Intent data);
    }

    /**
     * @brief Register for getting {@link MyActivity#onActivityResult(int, int, Intent)} calls 
     *
     * @param listener Callback according to interface {@link ActivityListener}
     */
    public void registerListener(ActivityListener listener) {
        MyLog.v(LOG_TAG, "registerListener()");
        mListenerSet.add(listener);
    }

    /**
     * @brief Unregister to stop receiving {@link Activity#onActivityResult(int, int, Intent)} calls 
     *
     * @param listener Callback according to interface {@link ActivityListener}
     */
    public void unregisterListener(ActivityListener listener) {
        MyLog.v(LOG_TAG, "unRegisterListener()");
        mListenerSet.remove(listener);
    }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        for (ActivityListener listener : mListenerSet) {
            listener.onActivityResult(requestCode, resultCode, data);
        }
    }
} 
```

然后让你的片段实现 ActivityListener

```
public class MyFragment extends Fragment implements ActivityListener {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        ((MyActivity) getActivity()).registerListener(this);
        [...]
    }

    @Override
    protected void onDestroyView() {
        super.onDestroyView();
        ((MyActivity) getActivity()).unregisterListener(this);
    }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        //Do your stuff here
    }
} 
```

# php - 将多个变量从 HTML 传递到 Ajax，而不是将多个变量从 Ajax 发布到 php

> ID：15806595
> 
> 赞同：0
> 
> 时间：2013-04-04T08:53:45.573
> 
> 标签：php, html, ajax, variables, post

我有以下表格，它有 3 个值。班级、部门和学校。学校是从数据库中的下拉列表中选择的。（为简单起见，我没有在此处包含这些详细信息..）（实际上我的代码有效）

```
<form id="form1" name="form1" method="post" action="">                   
<input type="hidden" name="class" value="someclass">
<input type="hidden" name="section" value="somesection">
<select name="school" id="school">          
<option> "school 1"  </option>  
<option> "school 2"  </option>
<option> "school 3"  </option>
<option> "school 4"  </option>
<option> "school 5"  </option>                  
</select>       
</form> 
```

我正在为 Ajax 执行此操作，并且只有 1 个变量（列表中的项目）工作正常，但是在添加类和部分值之后，我无法将这 3 个变量放入 Ajax，因此我可以发布他们进入PHP。（语法可能是错误的，因为这只是复制粘贴部分代码。）

```
$("#school").change(function ()
{
 resetValues();

    var school = { school:$(this).attr('value') };
    var class= { class:$(this).attr('value')    };
    var section= { section:$(this).attr('value')};

jQuery.ajax({
                  url: 'getTheData.php',
                  type: "POST",
                  dataType: "xml",
                  data:school&class&section,
                  async: false,
                  success: schoolOnSuccess
            }); 
```

当然，我使用 _POST 以传统方式获取 getTheData.php 上的值。

我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T08:59:35.320

您可以序列化表单元素并发送，而不是像这样使用。

```
$("#school").change(function ()
{
   resetValues();
   var data = $("#formid").serialize();
   jQuery.ajax({
              url: 'getTheData.php',
              type: "POST",
              dataType: "xml",
              data:data,
              async: false,
              success: schoolOnSuccess
   });
}); 
```

您可以使用表单元素的名称访问 php 函数中的值。

这种方法的优点是，当您添加或修改任何表单元素时，您不必更改脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T09:11:24.447

你可以试试这个：

```
    $('#school').change(function(){
        $.get('getTheData.php', $('#form1').serialize(),
        功能（）{
           alert('成功！');
        }，功能（）{
           alert('不成功！');
        });
    });

```

并且请求将在 url 上发送数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-26T17:03:07.607

试试这个，让你的对象数据

```
data:{
        'post-field-name' : 'post-field-value'
} 
```

所以你的 ajax 脚本会变成：

```
jQuery.ajax({
    url: 'getTheData.php',
    type: "POST",
    dataType: "xml",
    data:{
        'school' : school,
        'class' : class,
        'section' : section
    }
    async: false,
    success: schoolOnSuccess
}); 
```

# ruby-on-rails-3.2 - 在 RefineryCMS 中添加图像的拖放图像功能

> ID：15806596
> 
> 赞同：1
> 
> 时间：2013-04-04T08:53:47.323
> 
> 标签：ruby-on-rails-3.2, refinerycms

在 RefineryCMS 中，图片上传功能是浏览图片然后点击上传图片。

是否可以将图像拖放功能添加到页面图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T02:08:47.323

你可以试试dropzone：[http ://www.dropzonejs.com/](http://www.dropzonejs.com/)

您需要覆盖炼油厂的后端并查看如何处理图像上传操作。

# winapi - Windows 性能分析器或 xperf 中的包含函数计时

> ID：15806599
> 
> 赞同：2
> 
> 时间：2013-04-04T08:53:51.550
> 
> 标签：winapi, xperf

是否可以显示包含函数计时，即函数及其所有子项在 Windows 性能分析器和/或 xperf 中运行的总时间。我想知道独立于呼叫者的时间。

我知道我可以从堆栈列中获取依赖于调用者的包含时间，以及从函数列中获取独占时间，但是对所有调用者进行总结的第一个确实是我所追求的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T12:29:34.780

弄清楚了：

在堆栈中右键单击您想知道包含时间的函数并选择`Butterfly->View Callers`

# java - 上传大小未知的文件

> ID：15806608
> 
> 赞同：0
> 
> 时间：2013-04-04T08:54:16.063
> 
> 标签：java, upload, google-drive-api, google-api-java-client

如果在请求时长度未知，我如何通过 Google Drive API 上传文件？我以这种方式找到了[https://developers.google.com/drive/manage-uploads#resumable](https://developers.google.com/drive/manage-uploads#resumable)但我不明白如何对服务器说流已终止。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T16:57:41.873

这里有额外的信息：

[https://code.google.com/p/google-api-java-client/wiki/MediaUpload#Resumable_Media_Upload](https://code.google.com/p/google-api-java-client/wiki/MediaUpload#Resumable_Media_Upload)

# mysql - MySQL REPLACE 变量字符串

> ID：15806609
> 
> 赞同：2
> 
> 时间：2013-04-04T08:54:16.567
> 
> 标签：mysql, replace

我想使用 MySQL 查询来更改链接。

链接是这样的：

[http://website.com/click.php?ad_client=blablabla&add_id=548124&more=stuffhere](http://website.com/click.php?ad_client=blablabla&add_id=548124&more=stuffhere)

如果我知道 add_id 号码，这很容易：

```
UPDATE table SET name = REPLACE(name, '&add_id=548124', '') 
```

问题是我必须更改 5000 行并且我不知道 add_id 编号...那么删除**&add_id= *somenumber***的正确 mysql replace() 代码是什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:21:08.757

用这个....

```
 UPDATE table 
    SET name = CONCAT(SUBSTRING(name , 1, 
                    INSTR(name ,'&add_id') - 1),SUBSTRING(name , 
                    INSTR(name , '&more'), 
                    LENGTH(name ) - INSTR(name , '&add_id'))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T09:04:45.853

您可以通过[UDF - SO Answer](https://stackoverflow.com/questions/986826/how-to-do-a-regular-expression-replace-in-mysql)执行此操作，或者您可以简单地编写 PHP 代码，该代码将再次替换表中的值和更新列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T09:25:01.050

我将创建一个存储过程，它使用游标遍历需要更新的每一行。

在该过程中，我会找到要替换的链接，然后一一替换它们。

我制作了一个[sqlfiddle](http://sqlfiddle.com/#!2/95afb/1)来展示如何在选择中获取要替换的部分。

我认为这种方法干净且易于阅读，但可以编写此更新（很可能很难阅读）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T09:27:01.867

*   首先看看它是否有效：

    选择 ' [http://website.com/click.php?ad_client=blablabla&add_id=548124&more=stuffhere](http://website.com/click.php?ad_client=blablabla&add_id=548124&more=stuffhere) ' INTO @link;
    SELECT @link as full_link, SUBSTR(@link,LOCATE('&',@link),LOCATE('&',@link,LOCATE('&',@link)+1)-LOCATE('&',@ link)) 作为 remove_part, REPLACE(@link,SUBSTR(@link,LOCATE('&',@link),LOCATE('&',@link,LOCATE('&',@link)+1)-LOCATE( '&',@link)),'') 作为 final_link

现在为您的更新：

```
UPDATE table SET name = REPLACE(name,SUBSTR(name,LOCATE('&',name),LOCATE('&',name,LOCATE('&',name)+1)-LOCATE('&',name)),'') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T09:50:10.643

试试这个 `REPLACE`

```
 UPDATE Table1
 SET name = REPLACE(if(name like '%add_id=%','' , name ), 

 '&add_id=' , '' ) 
```

[**在这里演示**](http://sqlfiddle.com/#!2/d8fcd/1)

# html - 在 iPhone 上自动播放内嵌的 youtube 视频

> ID：15806611
> 
> 赞同：0
> 
> 时间：2013-04-04T08:54:22.690
> 
> 标签：html, ios, objective-c, youtube, uiwebview

我需要使用 IOS 5.0+ 在 uiwebview 中自动播放来自 youtube 的内联视频。我设法使它与此内联：

```
 NSString *html = [NSString stringWithFormat:@"\
             <html>\
             <head>\
             <script type='text/javascript'>\
                  function onPlayerReady(event) {\
                  event.target.playVideo();\
                  }\
            </script>\
             <style type=\"text/css\">\
             iframe {position:absolute; top:0%%; margin-top:-0px;}\
             body {background-color:#000; margin:0;}\
             </style>\
             </head>\
             <body>\
             <iframe width=\"100%%\"  src=\"https://www.youtube.com/embed/%@?feature=player_detailpage& modestbranding=1&amp;rel=0;autoplay=1;showinfo=0;loop=1;autohide=1;playsinline=1;autoplay=1\" frameborder=\"0\" allowfullscreen></iframe>\
             </body>\
             </html>", ID];
   [videoWebView loadHTMLString:html baseURL:[[NSBundle mainBundle] resourceURL]]; 
```

但我不知道如何让它自动播放。我还找到了其他自动播放视频的解决方案，但它以全屏方式开始，我不知道如何使其内联。

```
 NSString *youTubeVideoHTML = @"<!DOCTYPE html><html><head><style>body{margin:0px 0px 0px 0px;}</style></head> 
<body> <div id=\"player\"></div> 
    <script> var tag = document.createElement('script'); 
    tag.src = \"http://www.youtube.com/player_api\"; 
    var firstScriptTag = document.getElementsByTagName('script')[0]; 
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag); 
    var player; 
    function onYouTubePlayerAPIReady() { 
        player = new YT.Player('player', {width:'%d', height: '%d', videoId:'%@', events: { 'onReady': onPlayerReady, } }); } 
        function onPlayerReady(event) { event.target.playVideo(); } 
    </script> 
</body> </html>";

    NSString *html = [NSString stringWithFormat:youTubeVideoHTML, 320, 150, ID];
    [videoWebView loadHTMLString:html baseURL:[[NSBundle mainBundle] resourceURL]]; 
```

有没有办法让 js 版本内联或第一个版本自动播放？或者有其他解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T12:08:07.783

我终于找到了。在 JS 版本中，您可以指定播放器参数（如“showinfo”、“rel”，当然还有“playsinline”）

您只需要添加`playerVars`对象并在其中指定参数。所以代码看起来像这样：

```
NSString *youTubeVideoHTML = @"<!DOCTYPE html><html><head><style>body{margin:0px 0px 0px 0px;}</style></head> <body> <div id=\"player\"></div> <script> var tag = document.createElement('script'); tag.src = \"http://www.youtube.com/player_api\"; var firstScriptTag = document.getElementsByTagName('script')[0]; firstScriptTag.parentNode.insertBefore(tag, firstScriptTag); var player; function onYouTubePlayerAPIReady() { player = new YT.Player('player', {width:'%d', height: '%d', videoId:'%@', playerVars: {'playsinline' : 1, 'rel':0, 'showinfo':0}, events: { 'onReady': onPlayerReady, } }); } function onPlayerReady(event) { event.target.playVideo(); } </script> </body> </html>";

NSString *html = [NSString stringWithFormat:youTubeVideoHTML, 320, 180, ID];
[videoWebView loadHTMLString:html baseURL:[[NSBundle mainBundle] resourceURL]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:11:57.253

为什么您不使用本机视频播放器？
试试[LBYouTubeView](https://github.com/larcus94/LBYouTubeView)包装器，它很容易集成。

# facebook - 如何通过 facebook API 从公司名称发送私人提要？

> ID：15806613
> 
> 赞同：0
> 
> 时间：2013-04-04T08:54:26.787
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph

我想只向直接用户发送类似于 feed 的东西（我知道如何做到这一点的机制），但是来自 page. 据我了解，页面只接受公共提要。是否有任何模拟对象，可以与我的公司相关联，并且可以是私人提要的作者，只对直接用户可见？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T03:20:27.427

不，如[https://www.facebook.com/help/352402648173466?in_context](https://www.facebook.com/help/352402648173466?in_context)所示，即使您启用设置：

![在此处输入图像描述](https://i.stack.imgur.com/oU9OB.png)

您可以做的是按条件（年龄，人口统计...等）缩小受众范围，发布提要通过用户 ID 指定受众是不可能的：

![在此处输入图像描述](https://i.stack.imgur.com/JSaLT.png)

我的第一个想法是发送私人消息作为解决方案，不幸的是，如[https://www.facebook.com/help/273376269375028/](https://www.facebook.com/help/273376269375028/)所示，你能做的只是

> 向在您的主页上与您联系过的人发送消息

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-04T13:01:05.983

您可以通过查询以下图形端点来检索页面的提要：

```
https://graph.facebook.com/{group_id}/feed 
```

请参阅以下参考：[https ://developers.facebook.com/docs/reference/api/page/#feed](https://developers.facebook.com/docs/reference/api/page/#feed)

发布到提要需要您拥有该页面的 access_token，可以通过使用对该页面具有管理员权限的用户调用 来检索`/me/accounts`它`access_token`。

# java - 方法重载不适用于不同的参数

> ID：15806615
> 
> 赞同：16
> 
> 时间：2013-04-04T08:54:33.940
> 
> 标签：java, generics, overloading

为什么不允许这样做并将其视为相同的签名？

```
public Object myMethod(Map<String, String[]> values) {
   return this;
}

public Object myMethod(Map<String, String> values) {
   return this;
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-04T08:56:00.013

城市神话的答案是：

> 因为[类型擦除](http://docs.oracle.com/javase/tutorial/java/generics/genTypes.html)会导致泛型信息丢失。在运行时，这些方法看起来是相同的。
> 
> `Map<X, Y>`变得公正`Map`。

然而，实际的答案似乎更复杂。从一个[重复](https://stackoverflow.com/questions/1998544/method-has-the-same-erasure-as-another-method-in-type)的问题中看到这个[出色的答案](https://stackoverflow.com/a/8467804/474189)。给定提供的参数，编译器实际上非常有能力选择正确的重载方法，但是支持遗留的非泛型感知代码的要求迫使开发人员禁止它。`javac`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-04T08:57:25.667

这是因为[Type Erasure](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)。Type Erasure 在编译时删除了大部分泛型信息。所以编译后的上面代码是

```
public Object myMethod(Map values) {
   return this;
}

public Object myMethod(Map values) {
   return this;
} 
```

所以这两种方法在运行时都是相同的。

# wpf - CanExecuteChanged 是 ICommand 的事件属性吗

> ID：15806616
> 
> 赞同：0
> 
> 时间：2013-04-04T08:54:42.067
> 
> 标签：wpf, mvvm, icommand

CanExecuteChanged 是 ICommand 的事件属性吗？如果它是一个属性，为什么它有一个 add 和 remove 而不是 get ， set ？

如果 ，它不是一个属性，那么它是什么？

```
 public event EventHandler CanExecuteChanged
        {
            add { CommandManager.RequerySuggested += value; }
            remove { CommandManager.RequerySuggested -= value; }
        } 
```

CanExecuteChanged 什么时候被解雇？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:00:17.370

`CanExecuteChanged`是`event`由关键字指示的。[你可以在这里](http://msdn.microsoft.com/en-us/library/8627sbea%28v=vs.71%29.aspx)读到一些关于它的东西。其访问器声明的语法仅类似于属性的实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T08:59:35.403

它是一个事件，如果 CanExecute 方法发生更改，它会被触发。

这里还有其他类似[这样](https://stackoverflow.com/questions/4531360/what-is-canexecutechanged-for#)的问题，[这](https://stackoverflow.com/questions/6425923/canexecutechanged-event-of-icommand#)对你来说可能很有趣。

# webrtc - 创建 WebRTC 接收器

> ID：15806617
> 
> 赞同：7
> 
> 时间：2013-04-04T08:54:46.483
> 
> 标签：webrtc

我是 WebRTC 的新手，并试图弄清楚如何在浏览器之外创建一个程序，该程序接收 WebRTC 音频流并将其输出到扬声器上。是否有适用于 Java 或 C# 的 WebRTC 库？该接收器将在 linux 机器上运行。

--

我一直在考虑使用 getUserMedia() 来访问麦克风。但是接下来：这样的流将以什么格式传输？假设我使用 WebRTC2SIP 并使用 JSIP 构建 Java 端点；或者我只是使用一个套接字并通过 http 发送流。我将在接收器端获得什么音频格式？到目前为止，我已经阅读了 WebRTC 确实以某种方式压缩了流。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-03T07:55:34.340

我想你有两种方法：

1.  为android/iOS或Mac等构建整个WebRTC语音引擎，只需使用VOE提供的API即可。
2.  构建独立的 NS/VAD/AECM/AGC 模块并在您的项目中使用它。例如，你为android mobile构建了独立的NS模块，你使用AudioRecord(java layer, android things)从MIC录制声音，并对这些数据(jni层，WebRTC things)进行噪声抑制处理，最后播放处理后的数据通过使用 AudioTrack（java 层，android 的东西）的数据。

**编辑：**

1.  对于第二种情况，格式是 PCM 原始数据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T03:47:40.330

在 demo.easyrtc.com 上查看工作音频演示和代码

代码都是开源的，可以在[https://github.com/priologic/easyrtc](https://github.com/priologic/easyrtc)

上查看 您可以在我们的论坛上查找有关 easyRTC 的任何已知问题： [https://groups.google.com/forum/#!forum/easyrtc](https://groups.google.com/forum/#!forum/easyrtc)

另请查看我们的主站点 easyrtc.com

# javascript - Backbone.js：如何防止相关模型的多次下载？

> ID：15806621
> 
> 赞同：0
> 
> 时间：2013-04-04T08:54:56.210
> 
> 标签：javascript, backbone.js, backbone-relational

是的，我知道有一个名为[Backbone-Relational](http://backbonerelational.org)的插件，但我[对它的 fetchRelated 函数有一个严重的问题](https://github.com/PaulUithol/Backbone-relational/issues/317)，在我看来，它对我来说毫无用处。

所以我想知道是否有任何替代方案？或者我们甚至需要像 Backbone-Relational 这样的插件吗？您将如何使用纯 Backbone 处理以下场景：

假设我们有两个 Backbone 模型：`Company`和`Person`. 一个 Company 实例可以有多个 Person。因此`company.get('employees')`将返回一组人员 ID。如果我想获取相关员工的详细信息，我将不得不遍历数组和`fetch()`服务器中的每个 Persons。但是如果这些 Person 实例已经下载了怎么办？有没有一种干净的方法来确保没有冗余？

也许我们可以为每个模型维护一个 Collection 并将我们下载的每个实例转储到其中。然后我们只能在集合中不存在实例时下载它。但我认为它会让代码看起来很糟糕。

所以请各位大侠分享一下经验。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:05:11.373

正如你所建议的，我会给我的公司模型一个 Persons 属性。但是您似乎忘记了集合也有一个[fetch](http://backbonejs.org/#Collection-fetch)方法（以及许多其他您会发现非常有用的方法，例如 get 方法）。

另外，作为最后一件事，我想引用 Backbone 的文档（关于 Collections 的 fetch 方法）：
“*请注意，在页面加载时不应该使用 fetch 来填充集合——加载时需要的所有模型都应该已经被引导入放置。fetch 用于延迟加载不需要立即需要的接口的模型：例如，带有可以打开和关闭的注释集合的文档*。

# c# - 如何在c#中生成令牌时防止特殊字符

> ID：15806630
> 
> 赞同：0
> 
> 时间：2013-04-04T08:55:12.147
> 
> 标签：c#, asp.net, visual-studio-2008

我生成一个以字节为单位转换日期时间的令牌。这是我生成令牌的方式：

```
public string generateToken()
    {
        byte[] time = BitConverter.GetBytes(DateTime.UtcNow.ToBinary());
        byte[] key = new Guid().ToByteArray();
        string token = Convert.ToBase64String(time.Concat(key).ToArray());
        return token;
    } 
```

这是生成令牌时的样子：

> chas42Sbo9AAAAAAAAAAAAAAAAAAAAAAAA

但有时它也会生成特殊字符。就像在这个例子中：

> chs2BiT/z0gAAAAAAAAAAAAAAAAAAAAA

我在链接中解析结果以重定向到另一个页面

> [http://test.com/abo.aspx?chas42Sbo9AAAAAAAAAAAAAAAAAAAAA](http://test.com/abo.aspx?chas42Sbo9AAAAAAAAAAAAAAAAAAAAA)

使用特殊字符，它看起来像这样：

> [http://test.com/abo.aspx?chs2BiT/z0gAAAAAAAAAAAAAAAAAAAAAAAA](http://test.com/abo.aspx?chs2BiT/z0gAAAAAAAAAAAAAAAAAAAAA)

这不起作用。

是否可以生成令牌但没有特殊字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T08:58:54.333

这是如何`Base64`定义的：

> base-64位从0升序依次为大写字母“A”到“Z”，小写字母“a”到“z”，数字“0”到“9”，符号“+”和“/”。无值字符“=”用于尾随填充。

`Convert.ToBase64String`因此，如果您不希望`/`字符出现在令牌中，则不能使用。

# winforms - 开发可从 Windows 应用程序打开的用户指南帮助

> ID：15806647
> 
> 赞同：0
> 
> 时间：2013-04-04T08:56:06.083
> 
> 标签：winforms, documentation

我几乎为客户完成了一个 Windows 应用程序（Windows 窗体）项目，但他的要求之一是拥有典型的“？” 打开带有用户指南帮助的帮助文件的菜单项。

我知道如何基于文档 XML 构建文档（我已经这样做了），但这是不同的：它必须是用户指南，最终用户会理解的东西（他不关心知道关于应用程序背后的代码），带有屏幕截图、HOPW-TO、常见问题解答等。

用户必须能够始终打开它（因此，不能选择网站或任何需要互联网连接的东西）。

我正在考虑使用实际的帮助文件（msha + mshc 文件？），但由于我只知道如何从文档 Xml 构建它，我不知道如何创建它以及如何让它从 Windows 中显示应用。

有什么提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:03:12.187

创建一个 .chm/help 文件，它可以通过嵌入在代码（或其他）中的 XML 标记将自身集成到您的应用程序中，这绝不是一个简单的转换问题。我建议研究以下工具（虽然它们不是免费的，但可能有其他免费工具可用）：

1.  [Doc-to-Help](http://www.doctohelp.com/?gclid=CJzM2MnSsLYCFcjKtAodXVQAKg)我们使用它，它可以将 Word 文档直接转换为 .chm 帮助文件。

2.  [帮助+手册](http://www.helpandmanual.com/)

3.  [帮助史密斯](http://www.helpsmith.com/)

另外看看这个问题

[哪些工具可用于在 Visual Studio 2010 中创建帮助文件？](https://stackoverflow.com/q/3077361/626442)

它有一些非常有用的答案，并且可能会提供您正在寻找的内容。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T09:03:28.657

你可以用这个创建一个 Windows 帮助文件：http: [//download.microsoft.com/download/office97dev/helpws97/4.03/win98/en-us/hcwsetup.exe](http://download.microsoft.com/download/office97dev/helpws97/4.03/win98/en-us/hcwsetup.exe)

这是一个帮助文件创建应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-23T21:52:04.070

我还没有使用它，但*HelpPane*[可能](http://msdn.microsoft.com/en-us/library/windows/desktop/ms728713%28v=vs.85%29.aspx)是您正在寻找的。从 Windows Vista 开始，它是 CHM 的替代品。

一种想法是构建一个自托管的 ASP.NET 站点，以便您可以使用母版页来获得一致的外观，然后将 HelpPane 实例指向该站点。

通过一点点挖掘，我相信您将能够找到一个合适的库来自托管 ASP.NET 站点。

EDIT1：另请参阅此[SO 主题](https://stackoverflow.com/questions/8041116/open-windows-7-help-helppane-exe-from-net-application)。

EDIT2：HelpPane.exe 似乎只会显示 Windows 帮助主题。也许[这](http://msdn.microsoft.com/en-us/library/system.windows.controls.ribbon.ribbon.helppanecontent%28v=vs.110%29.aspx)将更适合您的需求。高温高压

# python - Windows7 localhost 上的 Selenium Remote Webdriver 引发空指针异常

> ID：15806662
> 
> 赞同：1
> 
> 时间：2013-04-04T08:56:54.417
> 
> 标签：python, windows, selenium, remotewebdriver

这些年来我一直在成功使用 RC。我决定切换到 Remote Webdriver 以获得所有这些新的好处。首先，我想尝试一个基本场景。1\. 打开 Google.com 2\. 在搜索框中输入“Selenium”。

我使用以下命令启动独立服务器

```
java -jar selenium-server-standalone-2.31.0.jar -port 4450 
```

然后我执行包含以下行的 python 测试脚本。

```
from selenium import webdriver
from selenium.common.exceptions import NoSuchElementException
import time
caps = webdriver.DesiredCapabilities.FIREFOX
driver = webdriver.Remote(desired_capabilities=caps,command_executor='http://localhost:4450/wd/hub')
driver.get("http://www.google.com")
time.sleep(5)
driver.find_element_by_id("gbqfb").send_keys("selenium")
driver.quit() 
```

我可以看到 google.com 已打开，但未在搜索框中输入“selenium”。在独立服务器日志中，我得到以下异常。

配置：Windows 7 Professional-32bit。Selenium-server-standalone-2.31 Python 2.7.3 Firefox 17。

我想知道我在这里缺少什么？任何帮助将不胜感激。谢谢！

```
C:\Users\engin\Downloads>java -jar selenium-server-standalone-2.31.0.jar -port 4
450
Nis 04, 2013 11:24:35 AM org.openqa.grid.selenium.GridLauncher main
INFO: Launching a standalone server
11:24:36.180 INFO - Java: Oracle Corporation 23.7-b01
11:24:36.180 INFO - OS: Windows 7 6.1 x86
11:24:36.195 INFO - v2.31.0, with Core v2.31.0\. Built from revision 1bd294d
11:24:36.351 INFO - RemoteWebDriver instances should connect to: http://127.0.0.
1:4450/wd/hub
11:24:36.367 INFO - Version Jetty/5.1.x
11:24:36.367 INFO - Started HttpContext[/selenium-server/driver,/selenium-server
/driver]
11:24:36.367 INFO - Started HttpContext[/selenium-server,/selenium-server]
11:24:36.367 INFO - Started HttpContext[/,/]
11:24:36.398 INFO - Started org.openqa.jetty.jetty.servlet.ServletHandler@b1656f

11:24:36.398 INFO - Started HttpContext[/wd,/wd]
11:24:36.398 INFO - Started SocketListener on 0.0.0.0:4450
11:24:36.398 INFO - Started org.openqa.jetty.jetty.Server@18facfb
11:25:42.012 INFO - Executing: [new session: {platform=ANY, javascriptEnabled=tr
ue, browserName=firefox, version=}] at URL: /session)
11:25:48.987 INFO - Done: /session
11:25:49.003 INFO - Executing: org.openqa.selenium.remote.server.handler.GetSess
ionCapabilities@19e774d at URL: /session/3ff2660f-0a08-420d-b3df-eb5b699e4a6b)
11:25:49.003 INFO - Done: /session/3ff2660f-0a08-420d-b3df-eb5b699e4a6b
11:25:49.018 INFO - Executing: [get: http://www.google.com] at URL: /session/3ff
2660f-0a08-420d-b3df-eb5b699e4a6b/url)
11:25:51.436 INFO - Done: /session/3ff2660f-0a08-420d-b3df-eb5b699e4a6b/url
11:25:56.444 INFO - Executing: [find element: By.id: gbqfb] at URL: /session/3ff
2660f-0a08-420d-b3df-eb5b699e4a6b/element)
11:25:56.537 INFO - Done: /session/3ff2660f-0a08-420d-b3df-eb5b699e4a6b/element
11:25:56.537 INFO - Executing: [send keys: null null, [s, e, l, e, n, i, u, m]]
at URL: /session/3ff2660f-0a08-420d-b3df-eb5b699e4a6b/element/0/value)
11:25:56.537 WARN - Exception thrown
java.lang.NullPointerException
        at org.openqa.selenium.remote.server.handler.SendKeys.call(SendKeys.java
:49)
        at org.openqa.selenium.remote.server.handler.SendKeys.call(SendKeys.java
:1)
        at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
        at java.util.concurrent.FutureTask.run(Unknown Source)
        at org.openqa.selenium.remote.server.DefaultSession$1.run(DefaultSession
.java:169)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
        at java.lang.Thread.run(Unknown Source)
    11:25:56.553 WARN - Exception: null 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T12:44:19.557

我们找到的一种解决方案是...在启动服务器时将 -Duser.language=en 添加到 java 参数中解决了这个问题！！顺便说一句，我的操作系统语言是土耳其语（TR）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-13T06:58:54.140

我之前有一个非常相似的问题，我发现了这个：

[https://github.com/mozilla/geckodriver/issues/659](https://github.com/mozilla/geckodriver/issues/659)

好像方法`send_keys`坏了。他们应该已经修复了它，因此您可以提取最新版本并自己构建它，或者您可以使用该`send_keys`方法有效的旧版本。

这对我有用。

# c# - SQL 连接命令不会更改数据

> ID：15806666
> 
> 赞同：1
> 
> 时间：2013-04-04T08:56:59.957
> 
> 标签：c#, visual-studio-2012, sqlconnection

在这些指令之后，我如何知道数据库中的表是否受到影响？我尝试在控制台中显示查询结果，但它没有显示任何内容。

```
static void Main(string[] args)
{
    DateTime date = new DateTime(2013, 3, 4);

    try 
    {
        SqlConnection connection = new SqlConnection("Data Source=ExchangeRatesByDate/TestApplication/Rates_DB.sdf");
        Console.WriteLine("Connection is created");

        connection.Open();
        Console.WriteLine("Connection is opened");

        SqlCommand insertCommand = connection.CreateCommand();
        insertCommand.CommandText = "INSERT INTO Rates_Table(ISO, Amount, Rate, Date) VALUES (USD, 1, 417.5, date)";
        insertCommand.ExecuteNonQuery();

        SqlDataAdapter adapter = new SqlDataAdapter("SELECT * FROM Rates_Table", connection);
        DataTable data = new DataTable();
        adapter.Fill(data);

        Console.WriteLine(adapter);
    }
    catch (Exception e)
    {
        Console.WriteLine(e.ToString());
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:04:53.470

我想你正在向数据表显示 SqlDataAdapter 对象，并且还使用参数来插入字符串，如“USD”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T08:59:59.510

返回受影响记录数的`ExecuteNonQuery()`整数。

```
int _affected = insertCommand.ExecuteNonQuery(); 
```

*   [执行非查询（）](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery.aspx)

*后续问题*

```
INSERT INTO Rates_Table(ISO, Amount, Rate, Date) VALUES (USD, 1, 417.5, date) 
```

在上面的语句中，是值`USD`并且`date`是真实值，因为如果是这样，它很确定它会抛出异常。它应该用这样的单引号括起来：

```
INSERT INTO Rates_Table(ISO, Amount, Rate, Date) VALUES ('USD', 1, 417.5, '') 
```

因为它们是字符串文字。但这不是在`INSERT`语句中插入具有实际值的数据的正确方法。这些值应该被参数化以避免`sql injection`。

```
string sqlStatement = "INSERT INTO Rates_Table(ISO, Amount, Rate, Date) VALUES (@iso, @Amount, @rate, @date)";
using (SqlConnection conn = new SqlConnection(connStr))
{
    using(SqlCommand comm = new SqlCommand())
    {
        comm.Connection = conn;
        comm.CommandText = sqlStatement;
        comm.CommandType = CommandType.Text;

        comm.Parameters.AddWithValue("@iso", '-- value --');
        comm.Parameters.AddWithValue("@Amount", '-- value --');
        comm.Parameters.AddWithValue("@rate", '-- value --');
        comm.Parameters.AddWithValue("@date", '-- value --');

        try
        {
            conn.Open();
            int _affected = comm.ExecuteNonQuery();
        }
        catch(SqlException e)
        {
            // do something with the exception
            // do not hide it
            // e.Message.ToString()
        }
    }
} 
```

为了正确编码

*   `using`用于 propr 对象处理的use语句
*   使用`try-catch`块来正确处理对象

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T09:00:19.917

`ExecuteNonQuery()`返回一个整数，显示受影响的行数。 [执行非查询](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery.aspx)

> 您可以使用 ExecuteNonQuery 来执行目录操作（例如，查询数据库的结构或创建数据库对象，如表），或者通过执行 UPDATE、INSERT 或 DELETE 语句来更改数据库中的数据而不使用 DataSet。尽管 ExecuteNonQuery 不返回任何行，但任何输出参数或映射到参数的返回值都会填充数据。
> 
> 对于 UPDATE、INSERT 和 DELETE 语句，返回值是受命令影响的行数。当正在插入或更新的表上存在触发器时，返回值包括受插入或更新操作影响的行数以及受一个或多个触发器影响的行数。对于所有其他类型的语句，返回值为 -1。如果发生回滚，则返回值也是 -1。

试试这样

```
int updatedRows = insertCommand.ExecuteNonQuery();

if(updatedRows>0)
{
 //do something
} 
```

# c++ - 为什么堆栈上分配了这么多空间？

> ID：15806673
> 
> 赞同：64
> 
> 时间：2013-04-04T08:57:14.043
> 
> 标签：c++, compiler-construction

这个问题来自回答堆栈溢出问题*[为什么书上说“编译器为内存中的变量分配空间”？](https://stackoverflow.com/a/15806010/174614)*，我试图向 OP 演示当您在堆栈上分配变量时会发生什么，以及编译器如何生成知道要分配的内存大小的代码。显然编译器分配的空间比需要的多得多。

但是，当编译以下

```
#include <iostream>
using namespace std;

int main()
{
    int foo;
    return 0;
} 
```

在调试模式下编译 Visual C++ 2012 后，您将获得以下汇编程序输出，但未进行任何优化：

```
int main()
{
00A31CC0  push        ebp
00A31CC1  mov         ebp,esp
00A31CC3  sub         esp,0CCh  // Allocates 204 bytes here.
00A31CC9  push        ebx
00A31CCA  push        esi
00A31CCB  push        edi
00A31CCC  lea         edi,[ebp-0CCh]
00A31CD2  mov         ecx,33h
00A31CD7  mov         eax,0CCCCCCCCh
00A31CDC  rep stos    dword ptr es:[edi]
   int foo;
   return 0;
00A31CDE  xor         eax,eax
} 
```

在我的程序中再添加一个`int`会使上面的注释行变为以下内容：

```
00B81CC3  sub         esp,0D8h // Allocate 216 bytes 
```

@JamesKanze 在我上面链接的答案中提出的问题是为什么编译器，而且显然不仅仅是 Visual C++（我还没有用另一个编译器做过实验），分别分配了 204 和 216 字节，在第一种情况下它只需要四个，第二个只需要八个？

该程序创建一个 32 位可执行文件。

从技术角度来看，为什么需要分配 204 个字节而不是 4 个字节？

编辑：

调用两个函数并在 main 中创建一个`double`和两个`int`，你得到

```
 01374493  sub         esp,0E8h  // 232 bytes 
```

对于与上述编辑相同的程序，它在发布模式下执行此操作（无优化）：

```
 sub    esp, 8                // Two ints
 movsd  QWORD PTR [esp], xmm0 // I suspect this is where my `double` goes 
```

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2013-04-04T09:09:18.957

这个额外的空间是由 /Zi 编译选项生成的。这启用了编辑 + 继续。额外的空间可用于在调试时编辑代码时可能添加的局部变量。

您还看到了 /RTC 的效果，它将所有局部变量初始化为 0xcccccccc，以便更容易诊断由于忘记初始化变量而导致的问题。当然，这些代码都不是在默认的发布配置设置中生成的。

# ruby-on-rails - 图像和样式表位置

> ID：15806674
> 
> 赞同：1
> 
> 时间：2013-04-04T08:57:17.563
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model-view-controller

在 Rails 应用程序中 - 样式表和图像应该位于下面`/public/`还是下面`app/assets/`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T09:00:04.013

您应该将它们放在应用程序/资产中。

然后通过资产管道在生产中将它们最小化 - 请参阅 rails 指南以获取（大量）更多信息 - [http://guides.rubyonrails.org/asset_pipeline.html](http://guides.rubyonrails.org/asset_pipeline.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T08:59:59.373

管道资产可以放置在三个位置之一的应用程序中：app/assets、lib/assets 或 vendor/assets。

app/assets 用于应用程序拥有的资产，例如自定义图像、JavaScript 文件或样式表。

lib/assets 用于您自己的库的代码，这些代码并不真正适合应用程序的范围或跨应用程序共享的那些库。

vendor/assets 用于外部实体拥有的资产，例如 JavaScript 插件和 CSS 框架的代码。

# javascript - 使用 javascript 访问 `draggable` 属性

> ID：15806679
> 
> 赞同：12
> 
> 时间：2013-04-04T08:57:37.597
> 
> 标签：javascript, html, draggable

所以问题是：你怎么能做到这一点？我想将`draggable`属性更改为，`"false"`以便以前可拖动的元素将丢失此属性。

我会给你一个 div，这样你就可以开始：

```
 <div id="div1"  draggable="true" ondragstart="drag(event) "onDblClick="edit('div1')">
     </div> 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-04T08:59:37.150

```
document.getElementById('div1').setAttribute('draggable', false); 
```

**或者**

```
var elem = document.getElementById('div1');
elem.setAttribute('draggable', false); 
```

如果您希望该属性完全消失，请使用；

```
elem.removeAttribute('dragable'); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-04T09:00:48.333

有很多方法，如果你使用`jQuery`：

```
 $('#div1').attr('dragabble'); //returns with the value of attribute
    $('#div1').attr('dragabble','false'); //sets the attribute to false 
```

原生 JS：

```
 document.getElementById('div1').getAttribute('draggable'); //returns the value of attr
    document.getElementById('div1').setAttribute('draggable', 'false'); //set the value of attr 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-08-16T16:13:05.883

我参加聚会有点晚了，但我们有什么理由不想写这样的东西吗？

```
var el = document.createElement('div');
el.draggable = false; 
```

似乎对我来说很好地应用了该属性。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-04T09:03:04.770

您可能想使用 jquery-ui 可拖动组件来实现您所需的功能。或者如果您在您的开发环境中有 jquery 库，您可以使用以下代码

> $("#div1").attr('draggable',false);

或者使用javascript，我们可以这样做

> document.getElementById('div1').setAttribute('draggable', 'false');

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-08-19T18:26:14.493

将属性设置为 后`draggable`，`true`您通常希望处理`dragstart`事件。要在原生 JS 中做到这一点：

```
elem.addEventListener('dragstart', ev => {
  // dragstart handlings here
  }, false) 
```

# ios - 为 UITableView 的自定义单元格的突出显示和选定状态实现两种不同的颜色

> ID：15806680
> 
> 赞同：1
> 
> 时间：2013-04-04T08:57:43.313
> 
> 标签：ios, objective-c, uitableview

我想为我的 TableView Cell 实现类似的功能。
我需要为单元格提供不同的背景颜色。
当我们触摸单元格时给出不同的背景，当我们触摸时给出不同的颜色。

我用以下方式尝试：

```
 - (void)tableView:(UITableView *)tableView didHighlightRowAtIndexPath:(NSIndexPath *)indexPath
 {
     [cell setBackgroundColor:[UIColor redColor]];   
 }

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
   [cell setBackgroundColor:[UIColor greenColor]]; 
} 
```

但问题是`didHighlightRowAtIndexPath`仅适用于`iOS 6.0`不低于此。

有没有另一种方法来实现它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:07:20.030

在`cellForRowAtIndexPath`写下面的代码：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *CustomCellIdentifier = @"yourcell";

    SettingsCell *cell = (SettingsCell *)[tableView dequeueReusableCellWithIdentifier:CustomCellIdentifier];
    if (cell == nil) {

        NSArray *nib = nib = [[NSBundle mainBundle] loadNibNamed:@"yourcell" owner:self options:nil];

        for(id oneObject in nib) {
            if([oneObject isKindOfClass:[yourCell class]]) {
                cell = (yourCell *)oneObject;
            }
        }

        //to change background color of selected cell
        UIView *backgroundView          = [[UIView alloc] init];
        backgroundView.backgroundColor  = [UIColor blueColor];
        cell.selectedBackgroundView     = backgroundView;

    }

    return cell;
} 
```

在 indexPath 的 didselectRow 上，更改为另一种颜色

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{    
    [tableView reloadData];
    UITableViewCell *cell=(UITableViewCell*)[tableView cellForRowAtIndexPath:indexPath];
    [cell setBackgroundColor:[UIColor redColor]];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T09:06:02.417

试试这个，你可以有两个图像用于选定和未选定的行。

```
cell.backgroundView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"unselected.png"] ];

cell.selectedBackgroundView = [[UIImageView alloc] initWithImage:[UIImage  imageNamed:@"selected.png"] ]; 
```

您将在 cellForRowAtIndexPath 方法中添加它。您可以从 didSelect 获取状态，对吗？相信我，我已经尝试了近 10 种不同的方法来做到这一点，只有这个解决方案在所有情况下都能完美运行。

# ckeditor - 修改选择 Ckeditor

> ID：15806683
> 
> 赞同：3
> 
> 时间：2013-04-04T08:57:49.533
> 
> 标签：ckeditor, range

目前我遇到以下问题，我正在使用 CKEDITOR 4.x 中的 applyStyle 方法应用 span 标签。但是，当一个跨度被部分选择并且我执行 applyStyle 方法时，将使用选择创建一个新的跨度，但所选跨度的另一半不会恢复并失去他的跨度。

第一个问题：是否可以防止部分选择某个元素？

如果不是我的第二个问题：是否可以仅在一侧扩展选择，即部分选择跨度（具有某个类或属性）的一侧。这样它就会被完全选中进行处理。

一个例子：

```
This is 'my text <span class"testClass">, This' is </span> Other Text 
```

现在我们想要一个解决方案来创建：

```
This is  <span class"testClass2"> my text, This</span> <span class"testClass">  is </span> Other Text 
```

请注意以下事项：

其中最难的部分是维护 html 结构。当一半的选择在另一个块级元素中时，它可能不会刹车！这就是我开始使用 applyStyle 方法的原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T07:30:16.377

> 第一个问题：是否可以防止部分选择某个元素？

嗯...您可以检查占位符插件的示例 - 它使用不可编辑的内联元素来创建至少在 Chrome 上无法部分选择的占位符。不过，我认为这对您来说不是一个令人满意的解决方案:)

另一种可能的解决方案是使用`editor#selectionChange`事件，您可以在该事件上检查一个选择结束是否位于该元素内，如果是，则将其设置在该元素之前或之后。它看起来像（我没有测试过这段代码，它只是一个原型）：

```
editor.on( 'selectionChange', function( evt ) {
    var sel = evt.data.selection,
        range = sel.getRanges()[ 0 ];

    if ( protectedElement.contains( range.startContainer ) || protectedElement.equals( range.startContainer ) )
        range.setStartAt( protectedElement, CKEDITOR.POSITION_BEFORE_START );
    if ( protectedElement.contains( range.endContainer ) || protectedElement.equals( range.endContainer ) )
        range.setEndAt( protectedElement, CKEDITOR.POSITION_AFTER_END );

    sel.selectRanges( [ range ] );
} ); 
```

虽然，这种解决方案总是很危险，并且会导致许多不可预知的情况。但这可能值得检查。

回到你问题的根源——我知道你想要创建在同一级别上工作的样式——即只能在一个地方应用一个样式。使用样式系统是不可能的。在应用样式之前，您必须准备范围。该代码将类似于`selectionChange`侦听器 - 您检查末端是否锚定在样式元素中，如果是，您需要将范围的末端移出它。唯一的问题是如何在这种情况下从范围中排除整个元素：

```
<p>foo[bar<span class="st1">bom</span>bim]foo</p> 
```

结果应该是两个范围：

```
<p>foo[bar]<span class="st1">bom</span>[bim]foo</p> 
```

不幸的是，当前范围的 API 不包括有用的方法`range#exclude`，因此您需要实现您的方法。[我会尝试用walker](http://docs.ckeditor.com/#!/api/CKEDITOR.dom.walker)做这个。从范围的开始到结束迭代并记住所有样式元素。如果您要在两个方向上执行此操作，您还将在两端收集部分选定的元素，因此我描述的第一步将是不必要的。当您拥有要从范围中排除的元素列表时，您只需要在两端和这些元素之间创建范围 - 这部分应该很容易。[Element#getPosition](http://docs.ckeditor.com/#!/api/CKEDITOR.dom.element-method-getPositionedAncestor)会很有帮助，但您需要检查它的代码以了解如何使用它，因为它没有记录在案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T15:38:36.980

我一直在寻找和尝试几个小时。并选择自己做一个放大功能来扩大选择范围。我制作了自己的放大/扩展功能，因为我想拥有 CKEDITOR 的放大无法提供的更多控制。

编码：

```
 //Vars
        var firstNode = range.startContainer.getParent();
        var lastNode = range.endContainer.getParent();

        //Make end Get full if is tcElement
        if(lastNode.type === CKEDITOR.NODE_ELEMENT && lastNode.getName() === "myElement")
        {
            range.setEndAfter(lastNode);

        }

        //Make end Get full if is tcElement
        if(firstNode.type === CKEDITOR.NODE_ELEMENT && firstNode.getName() === "myElement")
        {
            range.setStartBefore(firstNode);
        }

        range.select(); 
```

其他不错的代码，这不是很难，但对其他人有用。

这段代码我用来将代码分成 2 或 3 部分。其中第 1 部分和第 3 部分是部分选择（如果存在）。

```
 Spliting to multiple ranges
        //Vars
        var newRanges = [];
        var allWithinRangeParent = range.getCommonAncestor().getChildren();
        var firstNode = range.startContainer;
        var lastNode = range.endContainer;
        var firstNodeStart = range.startOffset;
        var lastNodeEnd = range.endOffset;

        //TODO make if to check if this needs to be made.
        //make end partial
        var newEndRange = new CKEDITOR.dom.range( editor.document );
        newEndRange.selectNodeContents( lastNode );
        newEndRange.endOffset = lastNodeEnd;
        newRanges.push(newEndRange);

        //TODO make if to check if this needs to be made.
        //Make start partial
        var newStartRange = new CKEDITOR.dom.range( editor.document );
        newStartRange.selectNodeContents( firstNode );
        newStartRange.startOffset = firstNodeStart;
        newRanges.push(newStartRange);

        //Make center selection.
        var tempRange = new CKEDITOR.dom.range( editor.document );
        tempRange.setStartBefore(firstNode.getParent().getNext());
        tempRange.setEndAfter(lastNode.getParent().getPrevious());
        newRanges.push(tempRange);

        selection.selectRanges(newRanges); 
```

# php - 创建文件的隐藏路径

> ID：15806687
> 
> 赞同：-1
> 
> 时间：2013-04-04T08:58:07.783
> 
> 标签：php, image

我想制作图像购物网站，我希望人们在其中购买图像然后他们可以下载它们。
我的问题是如何创建图像的隐藏路径，人们下载图像并且不知道图像的真实路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T09:08:46.933

您可以调用`php`文件来下载图像，而不是真正的图像/路径。

像这样，您可以使用以下内容调用`php`文件中的真实路径：

```
$path = "/public_html/yourPath/";

if (! isset($_GET['img'])) {
    die("Invalid URL");
}

$imageName = filter_var($_GET['img'], FILTER_SANITIZE_STRING);
$finalPath = $path.$imageName;

header('Content-type: octet/stream');
header('Content-Type: image/jpg');
header("Content-Disposition: attachment; filename=$finalPath;");
readfile($finalPath); 
```

[你可以在这里](http://www.hashbangcode.com/blog/force-file-download-php-66.html)阅读更多关于它的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T09:03:54.577

将图像存储在离线位置（不是 www）并使用 PHP 检索它们，以便他们可以访问图像，例如：http: [//yoursite.com/index.php](http://yoursite.com/index.php?file=filename) ?file=filename然后 PHP 将返回并返回该文件从脱机位置。您只需要设置正确的标题，这样内容就不会被视为网页而是图像。现在显然，这样的链接仍然是公开的，所以你需要向它添加更多信息来验证下载者。

# sharepoint-2010 - 在sharepoint 2010的图片库的EditForm.asx中隐藏几个字段

> ID：15806690
> 
> 赞同：0
> 
> 时间：2013-04-04T08:58:17.523
> 
> 标签：sharepoint-2010, sharepoint-designer

我有一个图片库，并在其中添加了一些字段。当我单击从图片库添加新项目时，上传图片后会出现 EditForm.aspx。此表单包含许多我想隐藏标题、拍摄日期、描述和关键字的字段。简而言之，EditForm 应该只包含名称、预览和我添加的列。是否可以隐藏其他列？我想开箱即用地执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T10:13:06.873

几种可能。

*   您可以使用 SharePoint Designer 来操作 NewForm、EditForm 和 DisplayForm。编辑现有表单，使用 CSS 将开箱即用的 HTML 表单设置为隐藏，然后将新的自定义表单添加到页面并删除您不想看到的列。

*   如果您根本不想使用这些列，只需在库设置中删除它们即可

*   如果您不想删除列，请单击库设置中的父内容类型，然后编辑每个列并将其设置为“隐藏”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T11:56:22.300

看看这个：[http ://sarangasl.blogspot.in/2009/10/hide-column-in-edit-new-or-display-mode.html](http://sarangasl.blogspot.in/2009/10/hide-column-in-edit-new-or-display-mode.html)

我发现这个解决方案非常简单有效。非常有据可查和描述性。

# android - 如何在 Eclipse 中管理 Lint 忽略/排除列表？

> ID：15806691
> 
> 赞同：1
> 
> 时间：2013-04-04T08:58:23.097
> 
> 标签：android, xml, eclipse, android-lint

在 Android 项目的 Eclipse 中，我在 xml 文件中有一些警告，并通过使用“仅禁用签入此文件”的快速修复窗口将其中一些警告添加到 Lint 忽略/排除列表中。

现在我想从列表中删除一个文件以再次检查。

如何在 Eclipse 中管理 Lint 文件检查排除？

我在 stackoverflow 或谷歌搜索的任何地方都找不到任何解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T16:40:47.383

即使不是通过 Eclipse IDE，我也找到了解决方案。

我只是手动删除 lint.xml 中的行。

```
<?xml version="1.0" encoding="UTF-8"?>
<lint>
    <issue id="SelectableText">
        <ignore path="res\layout\my_activity.xml" />
    </issue>
    <issue id="TooManyViews">
        <ignore path="res\layout\my_other_activity.xml" />
    </issue>
</lint> 
```

例如删除

```
<ignore path="res\layout\my_activity.xml" /> 
```

为了在 my_activity.xml 中重新启用 selectabeText 警告。

如果有人通过 Eclipse IDE 找到解决方案，我会打开这个问题。

# html - 使用 Node 将视频流式传输到 HTML5

> ID：15806696
> 
> 赞同：3
> 
> 时间：2013-04-04T08:58:37.140
> 
> 标签：html, node.js, websocket, video-streaming, html5-video

我一直在玩 node 和 websockets，并构建了一个使用 websockets 流式传输音频的小型测试应用程序。服务器使用 createReadStream 分解 mp3，使用 node-throttle 限制流，并使用“ws”模块感知二进制数据。在客户端，我拿起 websocket 上的块并使用 decodeAudioData ( [http://www.html5rocks.com/en/tutorials/webaudio/intro/](http://www.html5rocks.com/en/tutorials/webaudio/intro/) ) 来解码和播放块。这一切都工作得比较好。

我很好奇接下来要做的是以相同的方式将视频流式传输到 HTML5 视频标签。但我真的无法在网上找到任何参考资料，以与我上面的音频测试相同的方式实现这一目标。

是否有与“decodeAudioData”等效的视频？

我可以将大块数据输入视频标签吗？

我有一个类似的样本正在运行，我从…

[https://gist.github.com/paolorossi/1993068](https://gist.github.com/paolorossi/1993068)

但这并不是我真正想要的。首先，它似乎并没有真正流向我。客户端在播放之前将其全部缓冲。此外，与我的音频测试类似，我希望在服务器端对流进行限制，以便当新客户端连接时，它们可以在当前所在的任何位置加入视频。即 30 分钟或其他任何时间。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-15T12:47:47.383

好的，

经过大量搜索，我找到了解决方案。

MediaSource API 是我一直在寻找的...

```
var mediaSource = new MediaSource();
var sourceBuffer = mediaSource.addSourceBuffer('video/webm; codecs="vorbis,vp8"');
sourceBuffer.append(new Uint8Array(data)); 
```

该链接提供了解决方案...

[http://html5-demos.appspot.com/static/media-source.html](http://html5-demos.appspot.com/static/media-source.html)

# ruby - 如何通过包含将一个类与任何其他任意类进行比较？方法

> ID：15806698
> 
> 赞同：2
> 
> 时间：2013-04-04T08:58:44.363
> 
> 标签：ruby, include, comparable, enumerable

我已经实现了可比较和可枚举，以便我可以使用比较并包括：

给定下面的简单类：

```
class Card
  include Comparable
  include Enumerable
  attr_accessor :value

  def initialize(v)
    @value = v
  end

  def <=>(other)
    @value <=> other.value
  end

  def each
    yield @value
  end
end 
```

然后：

```
c = Card.new(1) #so right now we have @value at 1 
```

这些包括方法都不起作用：

```
[1,3,4,5].include?(c)
c.include?([1,3,4,5]) 
```

是否有可能使用 include 方法来做到这一点？我知道我可以用另一种方式来做，但我想“像红宝石一样”做！（假设这甚至是类似 ruby​​ 的方式......）我刚刚从 java 和 c++ 进入 ruby

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:04:06.660

如果你盯着你的代码足够长的时间，你会明白的。您实现了一个假设`other`是`Card`. 但是你在 Fixnums 上调用它！您需要在那里进行一些类型检查：

```
class Card
  include Comparable
  include Enumerable

  attr_accessor :value
  def initialize(v)
    @value = v
  end
  def <=>(other)
    if other.is_a?(Card)
      @value <=> other.value
    else
      @value <=> other
    end
  end

  def each
    yield @value
  end
end

c = Card.new(1)

[1,3,4,5].include?(c) # => true
c.include?([1,3,4,5]) # => false # because 1 does not contain an array [1, 2, 3, 4, 5] 
```

# jquery - 如何在jQuery中为我必须的小胡子模板添加一个带有结束增量的类？

> ID：15806703
> 
> 赞同：3
> 
> 时间：2013-04-04T08:58:59.613
> 
> 标签：jquery, class, mustache, auto-increment

我有以下胡子模板：

```
<script id="pictures" type="text/template">
{{#images}}
  <li id="dndtemplate">
    <img src={{img}} title={{imgnimi}} alt={{imgnimi}} <span>{{imgnimi}}</span> 
  </li>
{{/images}}
</script> 
```

* * *

我必须在 img 标记中添加一个类“dnd”，并为我在 json 文件中的数字或图像自动递增。我已经这样做了，但它不起作用。

```
$(function() {
 $.getJSON('image.json', function(image) {
   var template = $('#pictures').html(function(){
     for (var i = 0; i <= img.length[]; i++);
      $("#pictures").getElementsByTagName("img").addClass("dnd"+i);
      i++;
     });
     var html = Mustache.to_html(template, image);
     $('#dndtemplate').html()           

  }); //getJSON
}); //function</script> 
```

* * *

json在这里：

```
{ 
"images" : [
    {"img" : "images/tytto_60x80.png", 
    "imgnimi" : "Vilja"},
    {"img" : "images/tytto2_60x80.png", 
    "imgnimi" : "Katri"},
    {"img" : "images/tytto3_60x80.png", 
    "imgnimi" : "Mari"},
    {"img" : "images/tytto4_60x80.png",
    "imgnimi" : "Larissa"},
    {"img" : "images/tytto5_60x80.png",
    "imgnimi" : "Alice"},
    {"img" : "images/tytto6_60x80.png",
    "imgnimi" : "Helena"},
    {"img" : "images/poika1_60x80.png",
    "imgnimi" : "Jesse"},
    {"img" : "images/poika2_60x80.png",
    "imgnimi" : "Lauri"},
    {"img" : "images/poika3_60x80.png",
    "imgnimi" : "Petri"},
    {"img" : "images/poika4_60x80.png",
    "imgnimi" : "Joonas"},
    {"img" : "images/poika5_60x80.png",
    "imgnimi" : "Valtteri"},
    {"img" : "images/poika6_60x80.png",
    "imgnimi" : "Vesa"},    
    {"img" : "images/auto_110x60.png",
    "imgnimi" : "auto"}

]} 
```

我将不胜感激任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T10:43:24.510

由于 mustache 是无逻辑模板，因此您不能在此处应用增量逻辑。但是有一些解决方法，以下是代码。

首先，您需要更新模板。

```
<script id="pictures" type="text/template">
  <li id="dndtemplate">
      <img src="{{img}}" title="{{imgnimi}}" alt="{{imgnimi}}" class="{{dndClass}}" /> <span> {{imgnimi}} </span> 
  </li>
</script> 
```

接下来，您需要遍历返回的 JSON 对象。

```
var template = $("#pictures").html();
$.each(imgObj.images, function(i, data) {
    data.dndClass = "dnd"+i;
    var html = Mustache.to_html(template, data);
    $('#resultList').append(html);
}); 
```

**[演示](http://jsfiddle.net/maheshsapkal/Pfzug/)**

我希望这对你有用。

# java - 替换uploadify

> ID：15806705
> 
> 赞同：0
> 
> 时间：2013-04-04T08:59:03.250
> 
> 标签：java, uploadify

我正在使用uploadify进行异步文件上传。一切正常，但在某些浏览器（如 Firefox）中不起作用。

我正在使用 spring multipartrequest 来获取控制器中的文件。什么是uploadify的最佳替代品或如何解决firefox问题。

提前致谢。

# android - JAVA中的Android-Flow布局

> ID：15806706
> 
> 赞同：0
> 
> 时间：2013-04-04T08:59:13.433
> 
> 标签：android, flowlayout

我在水平方向的 JAVA 文件中的 3 个文本视图中给出 3 个句子，但只有 2 个文本视图，即只有 2 个句子，但第三个句子由于移动设备的分辨率而消失。我的查询是如何从第二行的起始位置而不是最后一行获取新行中的第三个文本视图。

```
public class MainActivity extends Activity {

private LinearLayout layout;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    findViewById();
    LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    layoutParams.setMargins(10, 15, 10, 10);

    TextView tvTextsecond = new TextView(this);
    tvTextsecond.setText("Heywhatrudoingtoday");
    tvTextsecond.setLayoutParams(layoutParams);
    tvTextsecond.setBackgroundColor(Color.RED);
    tvTextsecond.setTextColor(Color.WHITE);
    //tvTextsecond.setSingleLine(true);
    layout.addView(tvTextsecond);

    TextView tvTextthird = new TextView(this);
    tvTextthird.setText("Haiitssundaytowork");
    tvTextthird.setLayoutParams(layoutParams);
    tvTextthird.setBackgroundColor(Color.BLUE);
    tvTextthird.setTextColor(Color.WHITE);
    //tvTextthird.setSingleLine(true);
    layout.addView(tvTextthird);

    TextView tvTextfourth = new TextView(this);
    tvTextfourth.setText("Owebullshitruuselessfellow");
    tvTextfourth.setLayoutParams(layoutParams);
    tvTextfourth.setBackgroundColor(Color.YELLOW);
    tvTextfourth.setTextColor(Color.WHITE);
    //tvTextfourth.setSingleLine(true);
    layout.addView(tvTextfourth);

}

private void findViewById() {
    layout = (LinearLayout) findViewById(R.id.flowLayout);

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:06:34.887

您看不到第三个的原因`TextView`是您的布局具有水平方向，而前两个`TextView`适合屏幕尺寸，第三个被推到外面。

要解决此问题，您可以执行以下几个步骤：

**1.**在 XML 或 java 文件中将布局方向更改为垂直，这样`TextView`就会一个接一个地垂直显示。

**2.**如果您想`TextView`连续保留一个以上，那么您仍然应该将主布局方向设置为垂直，但是对于`TextView`' 的每一行，使用代码创建一个具有水平方向的新布局并将其添加`TextView`到此布局中。

```
LinearLayout tvRow = new LinearLayout();
tvRow.addView(firstTextView);
tvRow.addView(secondTextView); 
```

最后将此布局添加到您的主布局中：

```
mailLayout.addView(tvRow); 
```

# sql-server-2008 - 如何设计学校计费系统数据库架构？

> ID：15806708
> 
> 赞同：0
> 
> 时间：2013-04-04T08:59:15.637
> 
> 标签：sql-server-2008, database-schema

我必须为我的客户建立一个学校计费系统。我想为我的数据库使用 sql server 2008。但是我无法最终确定我的数据库架构。有很多复杂的问题，例如提前，奖学金，折扣等。我正在考虑创建 13 个表。其中 12 个属于每个学生的月份，例如 tblJanuary、tblFebraury 等，最后一个用于计费。我的方向是否正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:13:25.543

很难说，但如果你每个学生每个月都有一张桌子，我相信你的方向是错误的。看起来您正在将数据与表格混合（通常月份是一行的内容）并且不会满足数据库正常形式。

这是相当复杂的设计数据库和程序。你必须做一般的事情，让你的数据库存储几年的信息。

检查[数据库规范化](http://en.wikipedia.org/wiki/Database_normalization)。

# jquery - 填充墙之间的空间（单独的 div）

> ID：15806712
> 
> 赞同：1
> 
> 时间：2013-04-04T08:59:23.083
> 
> 标签：jquery, html, canvas, svg

我正在使用 jQuery 开发房间规划器。用户可以拖动墙壁（每面墙壁都是一个单独的 div）并将家具拖动到房间中。看一下截图：

![图片](https://i.stack.imgur.com/W5MWs.jpg)

您在墙壁之间看到的半透明白色 div 实际上是 2 个 div，如果用户拖动墙壁，它们的大小和位置会发生变化。另一个截图：

![图片](https://i.stack.imgur.com/DN1rA.jpg)

这可行，但让我对其他形状（u 形）感到头疼。有没有一种简单的方法来填充所有墙壁之间的空间？

我尝试使用 SVG 和 Canvas 进行绘制，但将墙壁位置转换为线条和形状并不容易。

```
var svg = '<svg xmlns="http://www.w3.org/2000/svg" version="1.1">';
svg+= '<path style="fill:#f00;" d="M 105,0 L 220,0 L 220,120 L 195,120 L 195,40 L 130,40 L 130,120 L 10,120 L 10,0 z" />';
svg+= '</svg>';

$('#floor').prepend(svg); 
```

我的所有位置都像这样：

```
var wallX = parseFloat($('.wall').css('left').replace('px',''));
var wallY = parseFloat($('.wall').css('top').replace('px',''));
var wallX2 = parseFloat($('.wall').css('left').replace('px',''))+parseFloat($('.wall').css('width').replace('px',''));
var wallY2 = parseFloat($('.wall').css('top').replace('px',''))+parseFloat($('.wall').css('height').replace('px','')); 
```

# drupal - 下载的主题不显示主菜单

> ID：15806714
> 
> 赞同：0
> 
> 时间：2013-04-04T08:59:28.393
> 
> 标签：drupal, drupal-7

我已经下载了 Drupal 7 的主题，并成功安装了它们。当我将下载的主题设为默认主题时，一切正常，除了缺少的主菜单。

你能帮我解决这个问题吗？菜单在主题中启用。

如果我切换回 Bartik 主题，则会出现主菜单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:19:11.593

似乎您的“主菜单”块已禁用。主菜单显示为一个块。因此，转到 admin/structure/block 并在某些区域为您的主题启用主菜单块。

# android - 注销摇动监听器

> ID：15806715
> 
> 赞同：1
> 
> 时间：2013-04-04T08:59:29.523
> 
> 标签：android

我在我的一个应用程序中使用 Shake Listener。现在我想知道是否有任何方法可以从我的应用程序中停止摇动侦听器，即我想在按钮单击时停止感应器。任何人都可以提出任何有用的方法来阻止它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:02:34.347

你可以这样尝试：

```
 sensorManager = (SensorManager) getSystemService(SENSOR_SERVICE);
          sensorManager.unregisterListener(this); 
```

# sql-server - 无效操作。连接已关闭

> ID：15806717
> 
> 赞同：1
> 
> 时间：2013-04-04T08:59:31.890
> 
> 标签：sql-server, entity-framework, unity-container

我们在一个刚刚上线的项目中使用 EntityFramework。根据我们的日志，有几个用户正在遭受“无效操作。连接已关闭”，每天大约发生 50 次。

异常看起来像：

```
An error occurred while executing the command definition. See the inner exception for details.    at System.Data.EntityClient.EntityCommandDefinition.ExecuteStoreCommands(EntityCommand entityCommand, CommandBehavior behavior)
   at System.Data.Objects.Internal.ObjectQueryExecutionPlan.Execute[TResultType](ObjectContext context, ObjectParameterCollection parameterValues)
   at System.Data.Objects.ObjectQuery`1.GetResults(Nullable`1 forMergeOption)
   at System.Data.Objects.ObjectQuery`1.System.Collections.Generic.IEnumerable<T>.GetEnumerator()
   at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
   at xxxx.SelectResultToPeople(IEnumerable`1 result) 
   at xxxx.GetResult()
   at DynamicModule.ns.Wrapped_IPeopleGetter_a853d13914444ca6ab0e016e035520c5.<People_DelegateImplementation>__0(IMethodInvocation inputs, GetNextInterceptionBehaviorDelegate getNext)
Invalid operation. The connection is closed.    at System.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()
   at System.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()
   at System.Data.SqlClient.TdsParserStateObject.TryPrepareBuffer()
   at System.Data.SqlClient.TdsParserStateObject.TryReadByte(Byte& value)
   at System.Data.SqlClient.TdsParserStateObject.TryPeekByte(Byte& value)
   at System.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryCloseInternal(Boolean closeReader)
   at System.Data.SqlClient.SqlDataReader.Close()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.EntityClient.EntityCommandDefinition.ExecuteStoreCommands(EntityCommand entityCommand, CommandBehavior behavior) 
```

此异常会在非常特定的页面上引发，因此它不会随机分布在应用程序中。其中一个页面使用表函数通过实体框架对数据库进行简单查询。表函数名为“GetPeopleNames”，我们的 ObjectContext 类是名为“SiteEntities”的类。

```
public class PeopleGetter : IPeopleGetter
{
    public List<object> GetResult()
    {
        using (var siteEntities = new SiteEntities())
        {
            IQueryable<someResultEntity> result = 
                 siteEntities.GetPeopleNames()
                   .SortBy("Name", "asc")
                   .Skip(20*query.CurrentPagingPosition)
                   .Take(20);

            List<People> people = SelectResultToPeople(result)
            return people;

        }
    }

    private List<People> SelectResultToPeople(IQueryable<someResultEntity> result)
    {
        return result
               .ToList()
               .Select(x => new People { })
               .ToList();
    }
} 
```

我不明白为什么它应该与我们的错误有关，但我最好提一下 PeopleGetter 类是由 Unity IoC 容器解析和创建的。PeopleGetter 注册了一个 'PerRquest' LifeTimeManager，如下所示：

```
public class PerCallContextLifeTimeManager : HierarchicalLifetimeManager
{
    private readonly string _key =  string.Format("PerCallContextOrRequestLifeTimeManager_{0}", Guid.NewGuid());

    public override object GetValue()
    {
        if (HttpContext.Current != null)
            return GetFromHttpContext();
        else
            return base.GetValue();
    }

    private object GetFromHttpContext()
    {
        return HttpContext.Current.Items[_key];
    }

    public override void SetValue(object newValue)
    {
        if (HttpContext.Current != null)
            SetInHttpContext(newValue);
        else
                    base.SetValue(newValue);
    }

    private void SetInHttpContext(object newValue)
    {
            HttpContext.Current.Items.Add(_key, newValue);
    }

    public override void RemoveValue()
    {
    }
} 
```

任何想法为什么我们要关闭连接？

谢谢你的帮助！

# java - M2eclipse 依赖解析

> ID：15806721
> 
> 赞同：1
> 
> 时间：2013-04-04T08:59:35.447
> 
> 标签：java, eclipse, maven, m2eclipse, m2e

我注意到 m2eclipse 不会自动将传递依赖项添加到项目的构建路径中......

例如，如果“项目 A”将“库 X”指定为依赖项，而该依赖项又依赖于“库 Y”，则我不能在“项目 A”中使用“库 Y”，除非我**还**明确指定“库 Y”为pom.xml 的依赖项。

这是设计使然吗？还是 m2eclipse 的缺陷？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T09:07:36.237

它确实增加了传递依赖。请注意，它现在称为**m2e**。您的依赖项需要在 POM 中指定。如果您不习惯 Maven，您可能会使用 Eclipse 的构建路径工具手动添加依赖项。你不再需要这样做了。只需右键单击项目并执行 Maven -> Update Project... 它会为您整理构建路径。

# c# - 在给定每个结果索引的明确选择的情况下找到所有可能组合的有效方法？

> ID：15806724
> 
> 赞同：0
> 
> 时间：2013-04-04T08:59:38.273
> 
> 标签：c#, algorithm, combinations

假设我有这个列表：

```
[0] {1, D}
[1] {3}
[2] {A, 5}
[3] {8, 1, C} 
```

我想使用索引位置列表中的元素生成所有可能的组合。给定列表的组合总数为 2 x 1 x 2 x 3 = 12。

```
Example:
possible1: 13A8
possible2: 13A1
possible3: 13AC
possible4: D3A8 
```

等等。组合的索引有一个确定的集合。我尝试搜索互联网，但我不知道要搜索什么-__-。我目前正在使用 C# 进行编码，但可以使用伪代码。在此先感谢stackoverflow社区！

# ruby-on-rails - 将图标添加到 simple_forms 提示

> ID：15806725
> 
> 赞同：1
> 
> 时间：2013-04-04T08:59:39.850
> 
> 标签：ruby-on-rails, haml, simple-form

我需要将自定义 html 添加到由 simple_form 生成的提示和错误元素中。最好我想通过配置文件自定义它。生成的 html 看起来像这样

```
span.error
  Some error message 
```

理想的输出：

```
span.error
 span.icon.alert
 Some error message 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:16:23.807

也许简单地为 .error 类添加背景图像（警报图标）？

或尝试在配置中附加包装器：

```
config.wrappers :bootstrap, :tag => 'div', :class => 'control-group', :error_class => 'error' do |b|
b.use :html5
b.use :placeholder
b.use :label
b.wrapper :tag => 'div', :class => 'controls' do |ba|
  ba.use :input
  ba.wrapper :tag => 'div', :class => 'controls' do |input|
    input.wrapper :tag => 'span', :class => 'error-append' do |append|
      append.use :error, :wrap_with => { :tag => 'span', :class => 'help-inline' }
    end
  end
  ba.use :hint,  :wrap_with => { :tag => 'p', :class => 'help-block' }
end 
```

结尾

# bounce - 如何在 Omniture sitecatalyst 中调整跳出率

> ID：15806732
> 
> 赞同：1
> 
> 时间：2013-04-04T08:59:50.770
> 
> 标签：bounce, adobe-analytics

调整后的反弹定义为“不包括在页面上完成某些交互的单页访问的反弹”；例如，停留时间超过 15 秒的单页访问，或触发 ajax 事件；我希望将这些访问排除在跳出率计算之外

我知道在 GA 中可以通过自定义 GATC 很容易地对其进行调整，但是我没有找到任何关于 Sitecatalyst 的信息，有人知道吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T08:43:15.287

在 SiteCatalyst 中，“退回”被视为单个图像请求（没有其他调用，甚至没有[自定义链接](http://microsite.omniture.com/t2/help/en_US/sc/implement/index.html#Link_Tracking)）。根据您要查找的内容，我预计这是您要查找的部分：

```
包括在页面上花费的时间超过 15 秒的所有访问
排除路径长度大于 1 的所有访问
```

请记住，这不能包括未发送自定义链接图像请求的单页访问，也不能跟踪触发了多个 st() 调用的访问。它仅包括触发单个 st() 的访问，以及至少一个自定义链接。

# c# - 将 C++ 的 VARIANT 数据类型转换为 C#

> ID：15806733
> 
> 赞同：10
> 
> 时间：2013-04-04T08:59:54.137
> 
> 标签：c#, c++, type-conversion, variant

C# 中 C++ 的 VARIANT 数据类型等价于什么？

我有使用 VARIANT 数据类型的 C++ 代码。如何在 C# 中转换该代码？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-11T11:51:16.897

嗯，C++ 中实际上有两个变体：boost::variant 和 COM 变体。解决方案或多或少遵循相同的想法，但前者更复杂。我希望您的意思是使用后者。

首先让我告诉你，如果可能的话，这是你不应该使用的东西。也就是说，这就是你的做法:-)

**变体和互操作**

如果您需要相同的字节表示，有时会在互操作中使用变体。

如果您正在处理互操作，请务必查看`VariantWrapper`MSDN 上的课程并使其像那样工作。

**变体和移植注意事项**

变体主要用于 API，通常是这样的：

```
void Foo(SomeEnum operation, Variant data); 
```

在 C++ 中这样做的原因是因为没有基`object`类，因此您需要这样的东西。最简单的移植方法是将签名更改为：

```
void Foo(SomeEnum operation, object data); 
```

但是，如果您仍然要移植，您还需要认真考虑这两个，因为它们在编译时就已解决，并且可以为您节省通常在方法中遵循的大“开关” `Foo`：

```
void SomeOperation(int data);
void SomeOperation(float data);
// etc 
```

**变体和字节一致性**

在极少数情况下，您需要自己操作字节。

本质上，变体只是包装在单个值类型（结构）中的值类型的大联合。在 C++ 中，您可以在堆上分配值类型，因为结构与类相同（很好排序）。如何使用值类型有点重要，但稍后会详细介绍。

联合只是意味着您将重叠内存中的所有数据。请注意我是如何在上面明确指出值类型的；对于变体，这基本上就是它的全部内容。这也为我们提供了一种测试它的方法——即通过检查结构中的另一个值。

在 C# 中做到这一点的方法是`StructLayout`在值类型中使用属性，其工作原理基本上如下：

```
[StructLayout(LayoutKind.Explicit)]
public struct Variant
{
    [FieldOffset(0)]
    public int Integer;
    [FieldOffset(0)]
    public float Float;
    [FieldOffset(0)]
    public double Double;
    [FieldOffset(0)]
    public byte Byte;
    // etc
}

// Check if it works - shouldn't print 0.
public class VariantTest
{
    static void Main(string[] args)
    {
        Variant v = new Variant() { Integer = 2 };
        Console.WriteLine("{0}", v.Float);

        Console.ReadLine();
    }
} 
```

如前所述，C++ 变体也可以存储在堆上。如果这样做，您可能仍希望内存签名保持不变。做到这一点的方法是将我们之前构建的 Variant 结构装箱，只需将其封装为`object`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T12:10:38.010

这是一个棘手的问题。

从 C# 4 开始，您可以使用*dynamic*来指示该类型在运行时是已知的。

但是，根据我个人的理解，c++ 需要在编译时已知的类型。因此，您可能会考虑使用`object`，但`object`在 C# 中是一种存在的类型。

对于 VARIANT 的**多类型、单值**（AKA 多态性）的概念，您不需要在 C# 中找到相应的类型，只需定义您的类和接口即可。您始终可以将对象作为类实现的接口来引用。

如果您要移植代码，并且要找出可以在 LHS 中简单使用的语法并且考虑到在编译时已知的类型，请使用**var**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-16T18:20:02.703

当**.NET 实现 COM 接口**时，只需**使用 VARIANT***代替。

然后使用**IntPtr类型****绕过 .NET 接收端的编组**以接收指针。

 **```
public class ComVariant
{
    [StructLayout(LayoutKind.Sequential)]
    public struct Variant
    {
        public ushort vt;
        public ushort wReserved1;
        public ushort wReserved2;
        public ushort wReserved3;
        public Int32 data01;
        public Int32 data02;
    }

    private Variant _variant;

    private IntPtr _variantPtr;

    public ComVariant(int variantPtr) : this(new IntPtr(variantPtr))
    {
    }

    public ComVariant(IntPtr variantPtr)
    {
        _variant = (Variant)Marshal.PtrToStructure(variantPtr, typeof(Variant));
        _variantPtr = variantPtr;
    }

    public VarEnum Vt
    {
        get
        {
            return (VarEnum)_variant.vt;
        }
        set
        {
            _variant.vt = (ushort)value;
        }
    }

    public object Object
    {
        get
        {
            return Marshal.GetObjectForNativeVariant(_variantPtr);
        }
    }
} 
```

那么如果您正在访问指向 COM 接口对象实例的 VT_UNKNOWN，只需

```
var variant = new ComVariant(variantPtr);
var stream = variant.Object as IStream; // will not be null if type is correct
var obj = variant.Object as IObj; // in general... 
```

可以解决问题，但请注意不要使用新分配的 VARIANT 并将其所有权授予 .NET 实现而不在某处释放它...

对于更复杂的代码**，您可以阅读** [这篇文章](http://limbioliong.wordpress.com/2011/09/04/using-variants-in-managed-code-part-1/)，其中还讨论了内存管理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-29T07:24:49.723

让我们退后一步。迟早，我们想要 VARIANT 中的实际数据。VARIANT 只是有意义数据的持有者。假设我们将 VARIANT 转换为 C# 中的某种对象，该对象具有变体类型和 .NET 引擎盖下的一些原始缓冲区（例如，.NET 字符串可以公开原始缓冲区）。此时，需要根据对象确定 VARIANT 类型，并将原始数据转换或强制转换为变体指定的数据类型，然后创建一个新对象，例如 string/int/etc。从原始数据。

因此，不必担心将 VARIANT 传递给 C#，而是查看变量数据类型并将其在 C++ 中转换为实际数据类型并将其传递给 C#。

例如，如果 VARIANT 类型是 VT_INT，则从变体中获取 int 并可以使用如下内容：

```
VARIANT var;

Int^ returnInt = gcnew Int(var.intVal); 
```

returnInt 可以作为 Out 参数从可以从 C# 调用的 C++ dll 中的 C++ 函数返回。C++ dll 需要使用 /clr 选项。

功能看起来像： -

```
void ThisFunctionReturnsAnInt(Runtime::InteropServices::OutAttribute Int^ % returnIntValue)
{

    VARIANT var;
    Int^ returnInt = gcnew Int(var.intVal);
} 
```

可以对其他数据类型使用类似的方法。这是很自然的，VT_INT 的 VARIANT 真的就像一个 int，这并不是说正在进行一些重大的转换，你只是在你对它感兴趣的时候从 VARIANT 中取出实际值如果您将直接整数值从 C++ 传递到 C#。无论如何，您仍然需要执行 gcnew。**

# c++ - 无序映射：自身值类型问题

> ID：15806738
> 
> 赞同：0
> 
> 时间：2013-04-04T09:00:00.153
> 
> 标签：c++, c++11

我有一个用户定义的类，它应该是 unsorted_map 的值类型。我的问题是，插入不起作用（使用 gcc 4.7 编译时已经是静态错误）。

我的课：

```
class bk_tree {

public:
    bk_point *root;
    DISTANCE_FUN metric;
    int max_depth;

    //assume words not empty
    bk_tree() {metric=NULL; root=NULL; max_depth = 0;}

    //rule of three
    bk_tree(const bk_tree& copy_this) {metric=copy_this.metric; root=copy_this.root; max_depth = copy_this.max_depth;}
    bk_tree& operator=(const bk_tree& copy_this) { metric=copy_this.metric; root=copy_this.root; max_depth = copy_this.max_depth; return *this; }
    ~bk_tree() { delete root; }

    bk_tree(unordered_set<string> *words, DISTANCE_FUN _metric);
    bk_tree(DISTANCE_FUN _metric) { metric = _metric; root = NULL; max_depth = 0;        
}; 
```

用于创建地图并插入的代码：

```
 #include<tr/unordered_map>
 using namespace std;
 using namespace std::tr1;

 unordered_map<DocID, sigmod::bk_tree> *my_map = new unordered_map<DocID, sigmod::bk_tree>;
 sigmod::bk_tree my_value = sigmod::bk_tree(&words, sigmod::hamming_distance_metric);
 doc_bk_hamming->insert(make_pair(my_key, my_value)); 
```

编译(g++ -O3 -std=c++11 -fopenmp -fPIC -Wall -g -I. -I./include -c -o ref_impl/core.o) 错误：

```
ref_impl/core.cpp
In file included from /usr/include/c++/4.7/bits/move.h:57:0,
                 from /usr/include/c++/4.7/bits/stl_pair.h:61,
                 from /usr/include/c++/4.7/bits/stl_algobase.h:65,
                 from /usr/include/c++/4.7/bits/char_traits.h:41,
                 from /usr/include/c++/4.7/string:42,
                 from ref_impl/../include/metric.h:5,
                 from ref_impl/core.cpp:29:
/usr/include/c++/4.7/type_traits: In instantiation of ‘struct std::is_convertible<const std::tr1::__detail::_Hashtable_iterator<std::pair<const unsigned int, sigmod::bk_tree>, false, false>&, std::tr1::__detail::_Hashtable_iterator<std::pair<const unsigned int, sigmod::bk_tree>, false, false> >’:
/usr/include/c++/4.7/type_traits:116:12:   required from ‘struct std::__and_<std::is_convertible<const std::tr1::__detail::_Hashtable_iterator<std::pair<const unsigned int, sigmod::bk_tree>, false, false>&, std::tr1::__detail::_Hashtable_iterator<std::pair<const unsigned int, sigmod::bk_tree>, false, false> >, std::is_convertible<const bool&, bool> >’
/usr/include/c++/4.7/bits/stl_pair.h:113:38:   required from here
/usr/include/c++/4.7/type_traits:1263:12: error: the value of ‘std::__is_convertible_helper<const std::tr1::__detail::_Hashtable_iterator<std::pair<const unsigned int, sigmod::bk_tree>, false, false>&, std::tr1::__detail::_Hashtable_iterator<std::pair<const unsigned int, sigmod::bk_tree>, false, false>, false>::value’ is not usable in a constant expression
/usr/include/c++/4.7/type_traits:1258:70: note: ‘std::__is_convertible_helper<const std::tr1::__detail::_Hashtable_iterator<std::pair<const unsigned int, sigmod::bk_tree>, false, false>&, std::tr1::__detail::_Hashtable_iterator<std::pair<const unsigned int, sigmod::bk_tree>, false, false>, false>::value’ used in its own initializer
/usr/include/c++/4.7/type_traits:1263:12: note: in template argument for type ‘bool’ 
/usr/include/c++/4.7/type_traits: In instantiation of ‘struct std::__and_<std::is_convertible<const std::tr1::__detail::_Hashtable_iterator<std::pair<const unsigned int, sigmod::bk_tree>, false, false>&, std::tr1::__detail::_Hashtable_iterator<std::pair<const unsigned int, sigmod::bk_tree>, false, false> >, std::is_convertible<const bool&, bool> >’:
/usr/include/c++/4.7/bits/stl_pair.h:113:38:   required from here
/usr/include/c++/4.7/type_traits:116:12: error: ‘value’ is not a member of ‘std::is_convertible<const std::tr1::__detail::_Hashtable_iterator<std::pair<const unsigned int, sigmod::bk_tree>, false, false>&, std::tr1::__detail::_Hashtable_iterator<std::pair<const unsigned int, sigmod::bk_tree>, false, false> >’ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:09:10.943

DocID 类型是否可散列？这对于 unordered_map 的键类型是必需的，这就是编译器所抱怨的。另一方面，DocID 听起来像是支持订单，为什么不使用映射，它被实现为二叉搜索树呢？

此外，您的复制构造函数和复制赋值运算符已损坏。他们复制指针，然后原始对象和副本都认为他们拥有资源。如果其中一个被破坏，则资源被删除，当另一个对象被破坏时导致双重释放。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T09:30:36.967

有很多缺失的信息使我们无法为您提供正确的答案。例如，什么是`doc_bk_hamming`？您分配并将`unordered_map`其地址分配给指针`my_map`。但是，您将该对插入到我们看不到`(my_key, my_value)`的指向的地图中。`doc_bk_hamming`

# php - PHP - 调整从 RSS 提要中提取的夏令时时间

> ID：15806745
> 
> 赞同：1
> 
> 时间：2013-04-04T09:00:24.267
> 
> 标签：php, rss, dst

我有一个 PHP 脚本，它从 RSS 提要中提取并根据事件生成一系列输出。该脚本一直运行良好，直到上周夏令时发生变化。

该脚本正在处理具有以下结构的日期的 RSS 提要：

发布日期：格林威治标准时间 2013 年 4 月 4 日星期四 19:05:00

我需要为每一天和每一时间创建不同的 php 脚本，所以我使用了以下内容：

```
$expiry = $item->pubDate;
$expiryLenght = strlen("$expiry");
$timeStart = $expiryLenght - 12;
$time = substr("$expiry","$timeStart", 5);
$hour = substr("$time",0, 2);
$day_alpha = substr("$expiry",0, 3);
$day = substr("$expiry",5, 2);
$month = substr("$expiry",8, 3);
$year = substr("$expiry", 12, 4);
$month = strtolower($month);
$month_num = monthNum($month); 
```

对我来说重要的部分是'$hour' 行。我需要尝试调整它以适应夏令时。pubDate 始终在未调整的 GMT 中。

我正在考虑沿着定义夏令时的路线前进，如果在时间范围内，则将小时加 1。但是，我不确定这是一个好的解决方案。

戴夫，任何帮助将不胜感激。

* * *

在评论的帮助下，我最终使用了这个

```
$expiry1 = $item->pubDate; 
```

$expiry = date('D, d MYH:i:s \off', strtotime($expiry1 . " Europe/Dublin"));

有点骇人听闻，但它将 Expiry 恢复为以前的格式，这意味着其余代码可以解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:11:35.057

```
<?php
$expiry = "Thu, 04 Apr 2013 19:05:00 GMT";
echo date('l jS \of F Y h:i:s A', strtotime($expiry . " America/New_York"));
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T09:13:53.620

我现在正在工作，所以无法对此进行测试，但我相信您想按照以下方式做一些事情：

```
<?php
$timestring = 'Thu, 04 Apr 2013 19:05:00 GMT';
$mytimezone = new DateTimeZone('Pacific/Nauru');
$datetime = date_create_from_format('D, d M Y h:i:s T', $timestring, $mytimezone);

echo $datetime->format('Y-m-d H:i:sP'); 
```

这将根据您指定的格式化字符串创建一个 DateTime 对象，但使用您选择的时区。因此，您选择时区，它会从您的 RSS 提要中解析日期/时间，并将其转换为您选择的时区。

它的代码也比您当前正在做的要少得多。:-)

# c# - 如何形成此 DateTime 逻辑以将当前时间增加 45 分钟

> ID：15806746
> 
> 赞同：1
> 
> 时间：2013-04-04T09:00:24.493
> 
> 标签：c#

我要在运行时填写一个 ddl。

我真正需要做的是从系统中获取当前时间（以 24 小时格式）。然后我需要将它四舍五入到 15 分钟，所以如果时间到了，`13:23`它会变成`13:30`; 如果是，`13:12`那么它应该变成`13:15`.

然后我想给它加上 45 分钟，13:15 变成 14:00。

我正在尝试像这样实现它

```
DateTime d = DateTime.Now;
string hr = d.ToString("HH:mm");
string mi = d.ToString("mm"); 
```

有人可以告诉我，要么我必须编写所有逻辑，要么 DateTime 可以提供一些功能来像这样格式化它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T09:02:24.057

```
 DateTime d = DateTime.Now;

        //Add your 45 minutes
        d = d.AddMinutes(45);

        //Add minutes to the next quarter of an hour 
        d = d.AddMinutes((15 - d.TimeOfDay.Minutes % 15) % 15);

        //Show your result
        string hr = d.ToString("HH:mm");
        string mi = d.ToString("mm"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T09:04:19.947

我认为这应该为您解决问题：

```
var d = DateTime.Now;
d = d.AddSeconds(-d.Seconds).AddMilliseconds(-d.Milliseconds)

if (d.Minute < 15) { d.AddMinutes(15 - d.Minute); }
else if (d.Minute < 30) { d = d.AddMinutes(30 - d.Minute); }
else if (d.Minute < 45) { d = d.AddMinutes(45 - d.Minute); }
else if (d.Minute < 60) { d = d.AddMinutes(60 - d.Minute); }

d = d.AddMinutes(45); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T09:04:52.570

`DateTime`在 C# 中，有一个向当前`DateTime`对象添加任何增量的功能。[这里](http://msdn.microsoft.com/en-us/library/system.datetime.addminutes.aspx)是对分钟的具体功能的参考。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-04T09:08:42.153

```
DateTime d = DateTime.Now;

DateTime rounded;
if(d.Minute % 15 ==0)rounded = d;
else DateTime rounded = d.AddMinutes(15 - d.Minute % 15);

Console.WriteLine("{0:HH:mm}",rounded); 
```

# php - iphone是如何通过APNs从mysql接收数据的？

> ID：15806749
> 
> 赞同：1
> 
> 时间：2013-04-04T09:00:36.743
> 
> 标签：php, iphone, mysql, apple-push-notifications

我是iphone开发的新手，想知道iphone接收实时数据的方式是什么，我的意思是当数据插入mysql数据库并立即可以在iphone上接收并将最近的数据更新到Apple的tableview中推送通知服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:17:47.830

如果应用程序未处于活动状态，则无法仅通过推送通知同步数据。当应用程序处于非活动状态时，您无法执行任何代码。

但还有其他方法：

1）当用户点击推送通知横幅时，您的应用程序将启动。然后就可以进行同步了。这是最直接的方法，您不会遇到应用审查者的麻烦。

2) 报亭 - 您可以使用推送通知将内容更新发送到报亭。您的应用程序将在后台被唤醒以下载任何内容更新，但您每天只能这样做一次。您的应用需要支持自动续订订阅。

3) 如果您的应用程序使用任何可用的后台模式（例如连续位置更新）在后台运行，则在收到推送时调用应用程序委托的 didReceiveRemoteNotification。您可以在此处进行同步。但是您必须有充分的理由使用这些后台模式，而不仅仅是保持应用程序处于活动状态的解决方法。

# java - 在Scala中解压缩async-http-client gzipped HttpResponseBodyPart？

> ID：15806752
> 
> 赞同：0
> 
> 时间：2013-04-04T09:00:45.813
> 
> 标签：java, scala, http, gzip, scala-dispatch

因为 Scala Dispatch 0.9.5 似乎没有用于解压缩 GZIP 流的默认处理程序，所以我试图修改它的`as.stream.Lines`处理程序来处理传入数据。由于同一个项目也在使用 Spray.io，我试图`GzipDecompressor`在`HttpResponseBodyPart`字节上使用它，但它引发了异常。见下文：

```
def onBodyPartReceived(bodyPart: HttpResponseBodyPart) = {
    if (state == CONTINUE) {
      val decomp = new GzipDecompressor
      val bytes = decomp.decompress( bodyPart.getBodyPartBytes )
      onString(new String(bytes, charset))
    }
    state
  } 
```

上面的方法修改了以下内容（第 23 行）：[https://github.com/dispatch/reboot/blob/master/core/src/main/scala/stream/strings.scala#L23](https://github.com/dispatch/reboot/blob/master/core/src/main/scala/stream/strings.scala#L23)

它抛出一个异常！`java.util.zip.ZipException: Not in GZIP format`对于那些想知道 GzipDecompressor 是什么样子的人，这里是：[https ://github.com/spray/spray/blob/master/spray-httpx/src/main/scala/spray/httpx/encoding/Gzip.scala](https://github.com/spray/spray/blob/master/spray-httpx/src/main/scala/spray/httpx/encoding/Gzip.scala)

我知道它确实是一个 Gzipped 流。任何解决方法？谢谢！

## 更新

玩弄以下内容：

```
 val machine = new GZIPDecompressMachine
  val bytes = machine.write( bodyPart.getBodyPartBytes )
  onString(machine.stop().flatMap((a) => a).mkString) 
```

该课程`GZIPDecompressMachine`来自这里：[https ://gist.github.com/841435/09921c8dcbb6b2ad01a3161589ed4fe68f256fbc](https://gist.github.com/841435/09921c8dcbb6b2ad01a3161589ed4fe68f256fbc)

它抛出了一个异常：`java.io.EOFException: Unexpected end of ZLIB input stream`这里有什么想法吗？

# javascript - javascript继承自一个类

> ID：15806754
> 
> 赞同：1
> 
> 时间：2013-04-04T09:00:48.733
> 
> 标签：javascript

我正在学习继承。在下面的代码中

1）企鹅继承自Animal

2）当我打电话给 penguin.sayName(); 为什么会输出“嗨，我的名字未定义”；

```
function Animal(name,numLegs){
    this.name = name;
    this.numLegs = numLegs;

}
Animal.prototype.sayName = function(){
  console.log("Hi my name is " + this.name);
};

function Penguin(){}

Penguin.prototype = new Animal();

var penguin = new Penguin("Captain Cook", 2);
penguin.sayName(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T09:02:53.190

您需要通过函数构造函数将`name`和`numLegs`属性添加到企鹅对象。这两个属性是特定于`Animal`对象的，不会简单地通过调用 Penguin 构造函数来分配。

```
function Penguin(name,numLegs){
  this.name = name;
  this.numLegs = numLegs.
} 
```

**工作示例：http:** [//jsfiddle.net/5A7hH/](http://jsfiddle.net/5A7hH/)

您也可以使用原型链上的构造函数，这类似于 Java 中对 super() 构造函数的调用。

```
function Penguin(name,numLegs){
   this.constructor(name,numLegs);
} 
```

# windows-7 - zeromq：在创建新上下文时“外部组件已引发异常” - 在一个特定系统上

> ID：15806756
> 
> 赞同：0
> 
> 时间：2013-04-04T09:01:02.510
> 
> 标签：windows-7, 64-bit, zeromq

我在 Windows 操作系统上使用 0mq 和 clr 绑定 - 版本 3.2.2。在一个特定的 Windows 7 64 位系统上，0mq 在创建新上下文时总是失败。我最初认为它与 Windows 服务 / IIS 有关，但即使是简单的控制台应用程序也失败了

下面的错误信息

```
Assertion failed: Connection timed out (..\..\..\signaler.cpp:260)
External component has thrown an exception. 
```

最后一个错误代码（我从 C# 调用 GetLastError）是**10060**（这是连接 tiemout）

下面的代码

```
var ctx = new Context(1); 
```

我检查了以下链接并尝试了建议，但没有运气
[http://grokbase.com/t/zeromq/zeromq-dev/126jmgg0aq/sehexception-when-calling-zmq-init-from-clrzmq](http://grokbase.com/t/zeromq/zeromq-dev/126jmgg0aq/sehexception-when-calling-zmq-init-from-clrzmq) [https://github。 com/zeromq/clrzmq/issues/81](https://github.com/zeromq/clrzmq/issues/81)
[从 IIS 7.5 Web 应用程序调用 Win32 CreateEvent() 失败](https://stackoverflow.com/questions/11118493/calling-win32-createevent-fails-from-an-iis-7-5-web-application)

我试过以下

*   使用依赖检查器并确保所有引用的 DLL 都存在
*   确保已安装 VC++ 2010 运行时
*   运行控制台应用程序的帐户具有管理员权限，并且我还明确授予在用户帐户管理中创建全局对象（建议之一）的权限

我对这个错误感到困惑。0mq 到目前为止运行良好，我想更大规模地部署它。现在这个错误给了我同样的想法。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:56:23.980

在我看来，您的应用程序没有找到合适的 ZMQ DLL。有几件事要检查：

1.  确保 libzmq.dll 与您的 exe 位于同一目录中。
2.  确保您知道 libzmq.dll 是 32 位还是 64 位。
3.  确保您已在 C# 项目文件中明确指定了架构（x86 或 x64，而不是 AnyCPU），并且您选择的架构与您正在使用的 libzmq.dll 文件的架构相匹配。

# c# - 如何在 Windows 商店应用程序中以 MVVM 模式创建扩展启动画面？

> ID：15806757
> 
> 赞同：1
> 
> 时间：2013-04-04T09:01:04.890
> 
> 标签：c#, xaml, microsoft-metro, windows-runtime, splash-screen

我没有使用任何 MVVM 框架，但我只是在练习 MVVM，所以我想如何在 MVVM 模式中实现扩展启动画面。我从 MSDN看到了[扩展的初始屏幕示例。](http://code.msdn.microsoft.com/windowsapps/Splash-screen-sample-89c1dc78)任何想法如何在 MVVM 中实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:44:30.927

您可以像在应用程序中执行其他页面一样实现它，这取决于您的偏好或用于 MVVM 的框架。除非您面临某些特定问题，否则没有真正的区别。

# backbone.js - 更新模型的 ID，但保存到 Backbone 中的旧 ID URL

> ID：15806763
> 
> 赞同：0
> 
> 时间：2013-04-04T09:01:21.950
> 
> 标签：backbone.js

我有一个 ID 为的模型，例如 ID 为 3。所以它的 URL 在服务器上是“/items/3”。我需要做的是 save() 具有新 ID 的模型，但将请求发送到 URL '/items/3'，但 ID 在请求正文中，例如 4。

怎么能做到这一点？

目前，如果我在模型上设置了一个新 ID，它会尝试向新 ID 的 URL 发送一个 PUT 请求。如何指定向旧 ID 发出请求，但保留在模型上设置的新 ID。在 PUT 的 success() 上，我会将用户导航到新的 URL...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T09:16:37.647

我认为您正在搜索的是**等待标志**设置为 true 的行为或 Model#save：“*如果您想在模型上设置新属性之前等待服务器，请通过 {wait: true}。* ” .
它会将更新的属性发送到服务器，但只有在服务器应答时才会在模型上设置它们。

# grid - 修复了 susy 网格中的元素在 IE10 中不起作用

> ID：15806765
> 
> 赞同：0
> 
> 时间：2013-04-04T09:01:25.477
> 
> 标签：grid, fixed, css-position, susy-compass

我正在使用 Susy 网格并利用这篇文章中描述的方法[A `position:fixed` 侧边栏，其宽度以百分比设置？](https://stackoverflow.com/questions/12653827/a-positionfixed-sidebar-whose-width-is-set-in-percentage)设置固定侧边栏。它在 Chrome 上运行良好，但在 IE10 中测试它的固定侧边栏端位于文档中间。谁能看到这里有什么问题？

您可以在以下网址看到它的实际效果： [http ://dev-johandahl.com/gridtest/](http://dev-johandahl.com/gridtest/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T18:59:51.363

看起来 IE10 没有使`.sidebar-area`容器居中。该容器与左侧齐平，因此它的右边缘（侧边栏）位于页面中间。可能有更好的选择，但最明显的解决方法是在侧边栏容器周围附加一个包装器：

```
.sidebar-area {
  position: fixed;
  left: 0;
  right: 0;
  text-align: center; // this may not be needed.

  .sidebar-container {
    @include container;
    text-align: left;
  }
} 
```

这将设置一个全屏宽度的外部固定区域，您可以在该上下文中将容器居中。如果您找到更好的解决方案，请告诉我！

# jquery - 使用ajax jQuery向表格添加行

> ID：15806766
> 
> 赞同：0
> 
> 时间：2013-04-04T09:01:26.810
> 
> 标签：jquery, html-table, row

这是我的代码：

```
$.ajax({
    type: 'GET',
    url: "/plan",
    dataType: "json",
    ContentType: "application/json; charset=utf-8",
    data: data,
    success: function (data) {
        if (data.status == "OK" && data.body != "") {
            var newRow = $("<tr><td>" + data.body.base.address + "</td><td>hi</td><td>hi</td><td>hi</td><td>hi</td><td>hi</td></tr>");
            $("#titleRow").after(newRow);
            return TINY.box.show({
                html: $('#workList').html(),
                animate: false,
                close: true,
                boxid: 'error',
                top: 10
            });
        } else {
            alert("Fail");
        }
    }
}); 
```

HTML：

```
<table id="table">
    <!-- the title row -->
    <tr id="titleRow">
        <th>案件番号</th>
        <th>住所</th>
        <th>施主名&lt;/th>
        <th>日付</th>
        <th>ステータス&lt;/th>
        <th>担当者&lt;/th>
    </tr>
    <!-- end title row --> 
    <!-- content row-->                      
    <!-- end content row -->
</table> 
```

我想在之后添加一行，`#titleRow`但添加了 6 行。我不知道为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:35:06.243

在这里你添加 1 行和 6 列我看不到问题：

```
var newRow = $("<tr><td>" + data.body.base.address + "</td><td>hi</td><td>hi</td><td>hi</td><td>hi</td><td>hi</td></tr>");
            $("#titleRow").after(newRow); 
```

也许你发射了 6 次 Ajax，所以你得到 6 行而不是 1 行

# java - 如何将一个数组操作“复制”到另一个数组？

> ID：15806769
> 
> 赞同：6
> 
> 时间：2013-04-04T09:01:34.803
> 
> 标签：java, arrays

这可能是一个简单的问题，但我有两个数组，每个数组大约 1000 个元素，它们被称为`posXArray`and `posYArray`。我想按`posYArray`数字排序（首先是最小的数字），但我希望元素`posXArray`对它们应用相同的操作......

例如，如果元素 [56] of`posYArray`是最小的一个，我希望元素 [56] of`posXArray`也被移动到 [0]。

这是如何以简单/好的方式在 Java 中实现的？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T09:04:50.083

由于数组似乎包含 X 和 Y 坐标，也许更好的选择是创建一个包含这两个值的坐标类，实现`Comparable`并使用内置算法对单个数组进行排序？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T09:10:27.287

创建一个类，如：

```
public class XYPos implements Comparable<XYPos> {
    int x;
    int y;

    @Override
    public int compareTo(XYPos o) {
        int res = this.y - o.y;
        if(res == 0) {
            res = this.x - o.x;
        }
        return res;
    }
} 
```

然后：

1.  将您的 2 个数组转换为一个数组`XYPos`
2.  把它分类
3.  使用排序数组中的值更新您的 2 个原始数组

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T09:10:45.063

创建一个`Integer[] idx`相同长度的并用数字 0 到 999（或其他）填充它，然后使用比较器对这个数组进行排序

```
public int compare(Integer a, Integer b) {
  return posYArray[a] - posYArray[b];
} 
```

这将为您提供一个索引到其他数组的数组，即最小的 Y 值将是`posYArray[idx[0]]`，其对应的 X 将是`posXArray[idx[0]]`等。如果您不想保持间接性，您可以按`idx`值重新排序原始数组.

如果您经常做这种事情，您可能希望查看[fastutil](http://fastutil.di.unimi.it/)，它提供了直接对原始类型（例如`int`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T09:06:12.110

您可以实现您选择的任何排序算法，仅对第一个 (posXArray) 进行比较检查，然后同时交换两个数组中元素的位置。

# json - curl获取json返回404

> ID：15806770
> 
> 赞同：0
> 
> 时间：2013-04-04T09:01:39.300
> 
> 标签：json, curl

我在 localhost 上运行一个带有 REST 服务的 tomcat 服务器。

在浏览器中输入的这个 url 给了我一个 json 响应：`http://localhost:8080/a/rest/dataset/list`

但是当我使用 curl:`curl http://localhost:8080/a/rest/dataset/list`响应是来自服务器的带有 404 错误的 HTML 代码。

我在 curl 命令中缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:45:51.813

`Tomcat`可能正在等待来自用户的*特殊格式的*HTTP 请求。正如您期望的那样`json`，您可能应该将以下参数转发给 curl ：

```
-H 'Content-Type: application/json' 
```

此外，您可以始终向任何 HTTP 服务器指定您希望他返回的响应。很多基于 HTTP 的后端应用程序都会根据 HTTP 请求发出响应。

# cuda - CUDA 2D 内核合并内存

> ID：15806774
> 
> 赞同：1
> 
> 时间：2013-04-04T09:01:55.523
> 
> 标签：cuda

如果我启动一个 2D 内核，其中每个线程都对 2D 数组的单个元素进行操作，那么哪种访问元素的方式会合并？是数组[x][y] 还是数组[y][x]？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T12:38:30.163

如果`x = threadIdx.x`然后`y = threadIdx.y`_

```
array[y][x] 
```

将被合并但

```
array[x][y] 
```

不是。原因是 C 使用[row-major order](http://en.wikipedia.org/wiki/Row-major_order)，即最后一个索引是运行速度最快的索引，因此可以`array[y][x]`转到`array[y][x+1]`内存中的相邻位置。并且 CUDA 块中的线程被安排成`threadIdx.x`运行最快，然后是 y，最后是 z。

# html - 在 html/css 中隐藏嵌套的锚点

> ID：15806785
> 
> 赞同：0
> 
> 时间：2013-04-04T09:02:08.917
> 
> 标签：html, css

我有以下代码：

```
<a id="outer-anchor" href="/test">
    text in anchor
    <a id="inner-anchor" href="/test2" style="display:none"></a>
</a> 
```

我在不同的浏览器中尝试过这个，并且每个浏览器中的内锚都从外锚中退出。所以它被渲染成这样：

```
<a id="outer-anchor" href="/test">
    text in anchor
</a>            
<a id="inner-anchor" href="/test2" style="display:none"></a> 
```

有人知道为什么以及如何解决这个问题吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:14:20.030

您不能在锚标签内放置锚标签。

这会将 childNode 移出`outer-anchor`成为它的兄弟节点，然后很好地隐藏它；

[JSfiddle](http://jsfiddle.net/Allendar/TyGTL/)

**HTML**

```
<div id="parent-placeholder">
    <a id="outer-anchor" href="/test">
        text in anchor
        <a id="inner-anchor" href="/test2" style="display:none"></a>
    </a>
</div> 
```

**JavaScript**

```
var outer = document.getElementById('outer-anchor');
var inner = outer.nextSibling;

inner.style.display = 'none';

inner.parentNode.removeChild(inner);
outer.parentNode.appendChild(inner); 
```

**输出**

```
<div id="parent-placeholder">
    <a id="outer-anchor" href="/test">text in anchor</a>
    <a id="inner-anchor" href="/test2" style="display: none;"></a>
</div> 
```

`parent-placeholder`div 纯粹是为了显示如何与锚点所在的父 DOM 元素相关联。

# knockout.js - 带有淘汰赛的Select2如何在选择中显示选定的项目？

> ID：15806789
> 
> 赞同：1
> 
> 时间：2013-04-04T09:02:24.180
> 
> 标签：knockout.js, knockout-mapping-plugin, jquery-select2

我有带有多个选择的 select2 控件，用于显示用户的角色，并且我从服务器获取 selectedRoles 集合，而 select2 只需要选定项目的 id 而不是整个集合。

```
<select multiple="multiple" 
 data-bind="options: AllRoles, optionsValue: 'Id', optionsText: 'Name', selectedOptions: selectedRole, select2: {}"></select> 
```

我在 observableArray 中选择了 Roles 作为集合，但 select2 需要字符串集合来显示所选项目。

```
 AllRoles = ko.observableArray([{Id: '111', Name: 'Test'}, {Id: '2222', Name: 'TTTTT'}]);
 selectedRole = ko.observableArray(["111","2222"]);
 ??? selectedRoles = ko.observableArray([{Id: '111', Name: 'Test'}, {Id: '2222', Name: 'TTTTT'}]); 
```

如果我有单独的字符串数组或者我可以用现有的集合来解决这个问题，那么解决这个问题的最佳方法是什么？

这是示例[小提琴](http://jsfiddle.net/WGukF/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:38:53.663

我假设问题是您有一个来自服务器的对象数组，并希望将其用作在小提琴的下部下拉列表中预选哪些元素的源？

如果是这样，问题在于，当您设置敲除时`selectedOptions: selectedRoles`，敲除将覆盖它，因为当所选值是字符串时，无法从包含对象的列表中推断出选定的项目。但是，您可以创建一个计算变量来适应`selectedRoles`数组。绑定`selectedOptions`可以很好地使用它。

```
self.selectedRolesComp = ko.computed(function() {
    var l = [];
    for(var i = 0; i < self.selectedRoles().length; i++) {
        l.push(self.selectedRoles()[i].Id);
    }
    return l;
}); 
```

作为小提琴[http://jsfiddle.net/WGukF/2/](http://jsfiddle.net/WGukF/2/)

进一步查看[http://knockoutjs.com/documentation/computedObservables.html](http://knockoutjs.com/documentation/computedObservables.html)了解更多信息。

# c# - log4net - 自定义属性日志记录

> ID：15806793
> 
> 赞同：5
> 
> 时间：2013-04-04T09:02:31.227
> 
> 标签：c#, log4net, log4net-configuration

我使用以下类使用 log4net 打印出消息：

```
public class Message
{
    public String Text { get; set; }
    public int Id { get; set; }
    public override string ToString()
    {
        return Text;
    }
} 
```

我使用`Logger.Info(MessageInstance)`，所以 log4net 只是调用该`ToString`方法并打印出消息。我还想记录`Id`消息对象的属性，但我不知道如何实现这一点。

我的转换模式看起来与此类似：

```
<conversionPattern value="%date %-5level %message%newline" /> 
```

我尝试添加`%message{Id}`，但这只会打印整个消息两次。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T11:47:08.923

我刚刚编写了一个自定义模式，它允许读取消息对象的属性。

```
public class ReflectionReader : PatternLayoutConverter
{
    public ReflectionReader()
    {
        _getValue = GetValueFirstTime;
    }

    protected override void Convert(TextWriter writer, LoggingEvent loggingEvent)
    {
        writer.Write(_getValue(loggingEvent.MessageObject));
    }

    private Func<object, String> _getValue;
    private string GetValueFirstTime(object source)
    {
        _targetProperty = source.GetType().GetProperty(Option);
        if (_targetProperty == null)
        {
            _getValue = x => "<NULL>";
        }
        else
        {
            _getValue = x => String.Format("{0}", _targetProperty.GetValue(x, null));
        }
        return _getValue(source);
    }

    private PropertyInfo _targetProperty;
} 
```

结合这个：

```
public class ReflectionLayoutPattern : PatternLayout
{
    public ReflectionLayoutPattern()
    {
        this.AddConverter("item", typeof(ReflectionReader));
    }
} 
```

配置如下所示：

```
<layout type="MyAssembly.MyNamespace.ReflectionLayoutPattern, MyAssembly">
  <conversionPattern value="[%item{Id}]&#9;%message%newline" />
</layout> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T10:54:52.273

您可以使用派生自[XmlLayoutBase](http://logging.apache.org/log4net/release/sdk/log4net.Layout.XmlLayoutBase.html)的 CustomXmlLayout 类并覆盖 FormatXml 方法。此方法将 LoggingEvent 对象作为参数，该对象将包含传递给 log 方法的 MessageObject。

```
public class SpecialXmlLayout : XmlLayoutBase
{
    protected override void FormatXml(XmlWriter writer, LoggingEvent loggingEvent)
    {
        Message message = loggingEvent.MessageObject as Message;
        writer.WriteStartElement("LoggingEvent");
        writer.WriteElementString("Message", GetMessage(message));
        // ... write other things
        writer.WriteEndElement();
    }
} 
```

在 GetMessaage 方法中，根据您的需要从消息中创建字符串。

然后在 log4net 配置中使用这个布局类：

```
<log4net>
    <appender name="EventLogAppender" type="log4net.Appender.EventLogAppender">
      <applicationName value="My Application" />
      <layout type="Namespace.SpecialXmlLayout">
      </layout>
      <filter type="log4net.Filter.LevelRangeFilter">
        <param name="LevelMin" value="ERROR" />
        <param name="LevelMax" value="FATAL" />
      </filter>
    </appender>
</log4net> 
```

这就是想法。有关更具体的详细信息，您必须查阅 log4Net SDK 文档。

# mysql - Smarty 3 多语言插件

> ID：15806799
> 
> 赞同：2
> 
> 时间：2013-04-04T09:02:34.853
> 
> 标签：mysql, database, plugins, smarty, multilingual

我使用 Smarty 创建了一个多语言网站，我想连接一个小型管理面板来处理不同语言的文本。

我发现这个 Smarty 功能[http://smarty.incutio.com/?page=SmartyMultilanguageSupport](http://smarty.incutio.com/?page=SmartyMultilanguageSupport)非常好。我已经修改了这个函数，使它可以在 Smarty 3 上运行。

有一个问题：我会使用 db 而不是 LNG 文件。如何修改从数据库获取数据的功能？

有人有其他来自 db 的多语言 Smarty 3 或 Php 插件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T00:19:41.797

您必须在 ngLanguage 类中编写一个新的 _loadTranslationTable 函数：将数据库查询的结果转换为数组并将其存储到 $this->__translationTable[$yourlanguage] 的任何事情都应该这样做。

# jetty - Openshift 上的 Scalatra 应用程序 - 设置 Jetty IP

> ID：15806802
> 
> 赞同：3
> 
> 时间：2013-04-04T09:02:38.217
> 
> 标签：jetty, openshift, scalatra

我正在尝试使用 DIY 墨盒在 Openshift 上部署一个最小的 Scalatra 应用程序。我已经设法让 SBT 工作，但是当涉及到时`container:start`，我得到了错误：

```
FAILED SelectChannelConnector@0.0.0.0:8080: java.net.SocketException: Permission denied 
```

显然，嵌入式 Jetty 尝试在 0.0.0.0 打开套接字，这是 Openshift 禁止的（您只能在 $OPENSHIFT_INTERNAL_IP 打开端口）。我怎样才能准确地告诉 Jetty 我需要它来监听哪个 IP？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T17:32:24.103

是的，您对 $OPENSHIFT_INTERNAL_IP 的看法是正确的。所以编辑 ${jetty.home}/etc/jetty.xml 并在连接器部分设置 jetty.host 如下： .....

```
<Set name="connectors">
  <Array type="org.mortbay.jetty.Connector">
   <Item>
    <New class="org.mortbay.jetty.nio.SelectChannelConnector">
      <Set name="host"><SystemProperty name="jetty.host" />$OPENSHIFT_INTERNAL_IP</Set>
      <Set name="port"><SystemProperty name="jetty.port" default="8080"/></Set>
      ...
    </New>
  </Item>
 </Array>
</Set> 
```

hth

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:32:00.663

I've never used Openshift, so I'm groping a bit here.

Do you have a jetty.host set?

You may need to set up a jetty.xml file and set it in there. See [http://docs.codehaus.org/display/JETTY/Newbie+Guide+to+Jetty](http://docs.codehaus.org/display/JETTY/Newbie+Guide+to+Jetty) for how to set the host. You can tell the xsbt web plugin about jetty.xml by setting your project up like this:

[https://github.com/JamesEarlDouglas/xsbt-web-plugin/wiki/Settings](https://github.com/JamesEarlDouglas/xsbt-web-plugin/wiki/Settings)

Alternately, you may be able to pass the parameter to Jetty during startup. That'd look like this: `-Djetty.host="yourhostname"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-13T23:07:59.210

要在带有 DIY 墨盒的 Openshift 上使用 jetty 9.2.13.v20150730 运行，您必须使用 Java8 运行，将其设置`$OPENSHIFT_INTERNAL_IP`为如下运行。首先ssh到主机并下载一个jdk8

```
cd $OPENSHIFT_DATA_DIR
wget --no-check-certificate --no-cookies --header "Cookie: oraclelicense=accept-securebackup-cookie" http://download.oracle.com/otn-pub/java/jdk/8u5-b13/jdk-8u5-linux-x64.tar.gz
tar -zxf jdk-8u5-linux-x64.tar.gz
export PATH=$OPENSHIFT_DATA_DIR/jdk1.8.0_05/bin:$PATH
export JAVA_HOME="$OPENSHIFT_DATA_DIR/jdk/jdk1.8.0_05"
java -version 
```

然后在你`.openshift\action_hooks\start`确保你有相同的导出变量，比如：

```
# see http://stackoverflow.com/a/23895161/329496 to install jdk1.8 no DIY cartridge
export JAVA_HOME="$OPENSHIFT_DATA_DIR/jdk/jdk1.8.0_05"
export PATH=$OPENSHIFT_DATA_DIR/jdk1.8.0_05/bin:$PATH
nohup java -cp ${OPENSHIFT_REPO_DIR}target/dependency/jetty-runner.jar org.eclipse.jetty.runner.Runner --host ${OPENSHIFT_DIY_IP} --port ${OPENSHIFT_DIY_PORT} ${OPENSHIFT_REPO_DIR}/target/thinbus-srp-spring-demo.war > ${OPENSHIFT_LOG_DIR}server.log 2>&1 & 
```

（请注意，`jdk-8u20-linux-x64.tar.gz`据报道它也可以工作，因此您可能需要检查最新的可用版本。）

该设置不需要 a `jetty.xml`，因为它设置`--host`and`--port`绑定到正确的接口并运行构建的 war 文件。它需要的是 jetty-runner.jar 从常春藤缓存复制到目标文件夹中。使用 Maven 来执行此操作，您可以添加以下内容：

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-dependency-plugin</artifactId>
            <version>2.3</version>
            <executions>
                <execution>
                    <phase>package</phase>
                    <goals>
                        <goal>copy</goal>
                    </goals>
                    <configuration>
                        <artifactItems>
                            <artifactItem>
                                <groupId>org.eclipse.jetty</groupId>
                                <artifactId>jetty-runner</artifactId>
                                <version>${jetty.version}</version>
                                <destFileName>jetty-runner.jar</destFileName>
                            </artifactItem>
                        </artifactItems>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

Google 建议将 SBT 等效为简单的`retrieveManaged := true`. 您可以 ssh 到主机并运行`find`以找出`jetty-runner.jar`依赖项已复制到的位置并适当地更新启动命令。

# jquery - 将项目拖放到 div，并可以选择恢复到原始位置

> ID：15806803
> 
> 赞同：1
> 
> 时间：2013-04-04T09:02:39.670
> 
> 标签：jquery, html, drag-and-drop, jquery-droppable, jquery-draggable

如上所述，我希望能够从我拥有的某种菜单中拖动一些 div，并能够将它们拖放到特定的 div 中。我设法在此之后进行了排序。

[http://jsfiddle.net/bysnc/](http://jsfiddle.net/bysnc/)

但是，我想在每个按钮上添加一个“x”按钮，以便单击“x”按钮时可拖动/可放置元素返回（恢复）到其原始位置..

我发现了这个

[http://jsfiddle.net/v7n6w/](http://jsfiddle.net/v7n6w/)

这似乎是我想要的（实际上我想要一个唯一的按钮，而不是一个整体的按钮.. 但是 1）即使在 jsfiddle 上似乎也没有被丢弃 2）在我的测试中，我在控制台中收到错误“未捕获的类型错误：无法读取未定义的属性‘originalPosition’”

特别是错误出现在这一行 ui.draggable.data("draggable").originalPosition);

这是js部分..

```
function revertDraggable($selector) {
    $selector.each(function() {
        var $this = $(this),
            position = $this.data("originalPosition");

        if (position) {
            $this.animate({
                left: position.left,
                top: position.top
            }, 500, function() {
                $this.data("originalPosition", null);
            });
        }
    });
}   

$(document).ready(function() {
    $("#drag").draggable({
        revert: "invalid"
    });

    $("#floor").droppable({
        drop: function(event, ui) {
            if (!ui.draggable.data("originalPosition")) {
                ui.draggable.data("originalPosition",
                    ui.draggable.data("draggable").originalPosition);
            }
        }
    });

    $("#other").click(function() {
        revertDraggable($("#drag"));
    });

}); 
```

我的html看起来像这样

可放置位置我希望只能在 foo 中放置

```
<div id="container">
    <div id="floor">foo</div>
    <div id="other">bar</div>
</div> 
```

和初始位置

```
 <div class="menu" id="power" width="300">
<div class="options ui-widget-content" id="drag"><img src="1.jpg"/></div>
    <div class="options ui-widget-content" id="drag2"><img src="2.jpg"/></div>
</div> 
```

ps这可以只使用jquery而不是插件jquery.ui吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:30:08.277

来自 2 个样本的混合代码

```
 $('#floor').droppable({
    tolerance: 'fit'
});

$('.draggable-div').draggable({
    revert: 'invalid',
    stop: function(){
        $(this).draggable('option','revert','invalid');
        $(this).find('.undo').show();
    }
});

$('.draggable-div').find('.undo').click(function(i, e) {
    var $div = $(this).parent();
    revertDraggable($div);
});

$('#floor').droppable({
    greedy: true,
    tolerance: 'touch',
    drop: function(event,ui){
       // ui.draggable.draggable('option','revert',true);
        if (!ui.draggable.data("originalPosition")) {
        ui.draggable.data("originalPosition",
                          ui.draggable.data("draggable").originalPosition);

        }

        $(this).find('.undo').show();
    }
});

function revertDraggable($selector) {
    $selector.each(function() {
        var $this = $(this),
            position = $this.data("originalPosition");

        if (position) {
            $this.animate({
                left: position.left,
                top: position.top
            }, 500, function() {
                $this.data("originalPosition", null);
            });
        }
    });

    $selector.find('.undo').hide();
} 
```

[在此处](http://jsfiddle.net/d9BVF/2/)查看完整代码。

现在可以使用

# excel - Excel 数字和方框问题

> ID：15806806
> 
> 赞同：0
> 
> 时间：2013-04-04T09:02:44.817
> 
> 标签：excel, vba

我有一个 excel 文件，里面有我需要在我们的系统中导入的地址。门牌号列的格式如下： 普通门牌号只显示数字，但具有特定箱号的门牌号显示如下： 25 B12 我需要在另一列中获取箱号（如果存在）

我设法用这些功能做到了这一点

```
 Function GetBus(Text As String, ByRef NumberCell As Range) As String
        Dim LastWord As String
        LastWord = ReturnLastWord(Text)

        If Left(LastWord, 1) = "B" Then

            GetBus = Right(LastWord, Len(LastWord) - 1)

        Else
            GetBus = ""
        End If

    End Function

    Function ReturnLastWord(Text As String) As String
        Dim LastWord As String
        LastWord = StrReverse(Text)
        LastWord = Left(LastWord, InStr(1, LastWord, " ", vbTextCompare))
        ReturnLastWord = StrReverse(Trim(LastWord))
    End Function 
```

因此，使用框值创建新列是有效的。不起作用的是删除数字列中的框部分（fe：如果数字值为 25 B1，则应删除 B1 部分）

关于如何做到这一点的任何想法，或者这在 excel 中是不可能的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:18:08.947

这是我几年前写的东西，所以我不确定其中是否存在错误，但快速测试似乎表明它工作正常。您可能必须对其进行更改以使其完全适合您的情况。

**代码**：

```
Option Explicit

Sub SplitAddress()
    Dim MyAr() As String, tempStr As String, strUnique As String
    Dim lRow As Long, i As Long, j As Long, lRow2 As Long
    Dim cell As Range

    strUnique = "SiddR" & Format(Now, "ddmmyyhhmmss")

    With ActiveSheet
        .Columns("A:A").Replace What:=" ", Replacement:=strUnique, LookAt:=xlPart, _
        SearchOrder:=xlByRows, MatchCase:=False, SearchFormat:=False, _
        ReplaceFormat:=False

        lRow = .Range("A" & .Rows.Count).End(xlUp).Row

        .Columns("C").NumberFormat = "@"
        .Columns("D").NumberFormat = "@"

        For i = 2 To lRow
            MyAr = Split(.Range("A" & i).Value, strUnique)

            tempStr = ""

            For j = LBound(MyAr) To (UBound(MyAr) - 1)
                If tempStr = "" Then
                    tempStr = MyAr(j)
                Else
                    tempStr = tempStr & " " & MyAr(j)
                End If
            Next j

            .Range("B" & i).Value = tempStr
            .Range("C" & i).Value = MyAr(UBound(MyAr))
        Next i

        For i = 2 To lRow
            If Not IsNumeric(.Range("C" & i).Value) Then
                tempStr = ""
                For j = 1 To Len(.Range("C" & i).Value)
                    If IsNumeric(Mid(.Range("C" & i).Value, j, 1)) Then
                        If tempStr = "" Then
                            tempStr = Mid(.Range("C" & i).Value, j, 1)
                        Else
                            tempStr = tempStr & Mid(.Range("C" & i).Value, j, 1)
                        End If
                    Else
                        Exit For
                    End If
                Next
                .Range("D" & i).Value = Mid(.Range("C" & i).Value, j)
                .Range("C" & i).Value = tempStr

                If Len(Trim(tempStr)) = 0 Then
                    MyAr = Split(.Range("A" & i).Value, strUnique)

                    .Range("C" & i).Value = MyAr(UBound(MyAr) - 1)
                End If
            End If

        Next

        .Columns("A:A").Replace What:=strUnique, Replacement:=" ", LookAt:=xlPart, _
        SearchOrder:=xlByRows, MatchCase:=False, SearchFormat:=False, _
        ReplaceFormat:=False

        .Columns("D:D").Replace What:="-", Replacement:="", LookAt:=xlPart, _
        SearchOrder:=xlByRows, MatchCase:=False, SearchFormat:=False, _
        ReplaceFormat:=False
    End With
End Sub 
```

**截图**：

![在此处输入图像描述](https://i.stack.imgur.com/cJUf9.png)

**截图**：

使用您的测试数据

![在此处输入图像描述](https://i.stack.imgur.com/wmlxV.png)

**编辑**：现在当我再次查看这段代码时，我发现它可以进一步优化:)

# asp.net - Zendesk .NET API 和 ASP.NET MVC 3

> ID：15806807
> 
> 赞同：0
> 
> 时间：2013-04-04T09:02:48.760
> 
> 标签：asp.net, asp.net-mvc, rest, zendesk

我在我的 ASP.NET MVC 3 Visual Studio 2012 项目中使用 Zendesk C# API Wrapper ( [https://github.com/eneifert/ZenDeskApi )。](https://github.com/eneifert/ZenDeskApi)我引用了 ZenDeskApi DLL，在本地调试模式下一切正常。

当我尝试**发布**网站时，我首先收到以下错误：

```
Could not load file or assembly '...\Source\Bin\ZenDeskApi.dll' or one of its dependencies. Operation is not supported. (Exception from HRESULT: 0x80131515) 
```

然后我尝试添加包附带的 RestSharp.DLL：

```
Could not load file or assembly '...\Source\Bin\RestSharp.dll' or one of its dependencies. Operation is not supported. (Exception from HRESULT: 0x80131515) 
```

然后我尝试添加包附带的 Newtonsoft.Json.NET35.DLL：

```
Could not load file or assembly ...\Source\Bin\Newtonsoft.Json.Net35.dll' or one of its dependencies. Operation is not supported. (Exception from HRESULT: 0x80131515) 
```

问题是否可能是 Newtonsoft.Json.NET35.DLL .NET 3.5 版本？与 MVC 需要的 .NET 4 不兼容？

我下载了 RestSharp 源代码 ( [https://github.com/restsharp/RestSharp](https://github.com/restsharp/RestSharp) ) 以尝试将 Newtonsoft.Json 引用更新为 .NET 版本 4.0 (可在此处获得[http://json.codeplex.com/](http://json.codeplex.com/) ) 但我的惊喜 RestSharp 没有引用它。

我应该怎么做才能发布我的网站？

谢谢。

**编辑：**与此同时，我在这里发现了这个 api 的 v2：[https](https://github.com/eneifert/ZendeskApi_v2) ://github.com/eneifert/ZendeskApi_v2但我总是遇到各种 DLLS 的 .NET 版本的问题。如何找到使用 .NET 4.0 的所有必要内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T07:17:00.973

我解决了从 NuGet（在 Visual Studio 2012 中）安装 Zendesk API v2 并使用以下连接字符串的问题：

```
 https://company.zendesk.com/api/v2 
```

代替

```
 http://company.zendesk.com 
```

# php - Drupal 7 复选框数组替换为 ajax 回调

> ID：15806813
> 
> 赞同：2
> 
> 时间：2013-04-04T09:02:56.613
> 
> 标签：php, drupal, drupal-7

我有状态字段作为下拉列表。在更改状态时，应在复选框中查看城市。下面是我的代码

```
$form['rate_the_service']['state'] = array(
  '#type' => 'select',
  '#prefix'=>'<div id="dropdown-third-replace">',
  '#suffix'=>'</div>',
  '#options'=>array(
    '0' => t('state1'),
    '1' => t('state2'),
    '2' => t('state3')
  ),
  '#attributes' => array(
    'selected' => array('selected')
  ),
  '#validated' => TRUE,
  '#ajax' => array(
    'callback' => 'ajax_example_dependent_dcheck_state_callback',
    'wrapper' => 'checkboxes-four-replace',
  ),
  '#suffix'=>'</div>',
); 
```

因此，在更改状态时，城市将使用回调函数“ajax_example_dependent_dcheck_state_callback”显示在复选框中

以下是默认城市代码：

```
$cityarray = array(
  '1' => 'chk1'
);

$form['rate_the_service']['city'] = array(
  '#prefix'=>'<div id="checkboxes-four-replace">',
  '#type' => 'checkboxes',
  '#options' => $cityarray,
  '#default_value' => isset($values['city']) ? $values['city'] : NULL,
  '#suffix'=>'</div></div>',
); 
```

////////// on changege ajax_example_dependent_dcheck_state_callback 函数调用

```
function ajax_example_dependent_dcheck_state_callback($form, $form_state) {
  $state = $form_state['values']['state'];
  $city_array = array(
    '0' => 'city1',
    '2' => 'city2',
    '3' => 'city3'
  );
  $options[$state] = $city_array;
  $form['rate_the_service']['city']['#options'] = $city_array;
  return $form['rate_the_service']['city'];
} 
```

当 onchange 状态时，'checkboxes-four-replace' 将被 city1,2,3 复选框替换

onchange 功能不起作用。如果我将类型更改为 ''#type' => 'select' ' 而不是“'#type' => 'checkboxes' ”，它工作正常。但我需要 tis 作为复选框。我在这里错了。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T14:05:53.473

您帖子的开头令人困惑：您的句子指出“在更改状态时，应在复选框中查看城市。下面是我的代码”〜状态应该是复选框还是选择？

无论哪种方式，我都将其作为工作代码，状态为“选择”，城市为“复选框”：

```
function state_form($form, &$form_state) {
  $form = array();

  $form['rate_the_service']['state'] = array(
    '#type' => 'select',
    '#prefix'=>'<div id="dropdown-third-replace">',
    '#suffix'=>'</div>',
    '#options'=>array(
      '0' => t('Ohio'),
      '1' => t('New York'),
    ),
    '#validated' => TRUE,
    '#ajax' => array(
      'event' => 'change',
      'callback' => 'ajax_example_dependent_dcheck_state_callback',
      'wrapper' => 'checkboxes-four-replace',
    ),
  );

  $city_array = array(
    '1' => array(
      '1' => 'Cincinnati',
      '2' => 'Cleveland',
      '3' => 'Toledo'
    ),
    '2' => array(
      '4' => 'New York City',
      '5' => 'Buffalo',
      '6' => 'Syracuse'
    ),
  );

  if (isset($form_state['values']['state']) && $form_state['values']['state'] == 1) {
    $form['rate_the_service']['city'] = array(
      '#prefix'=>'<div id="checkboxes-four-replace">',
      '#type' => 'checkboxes',
      '#options' => $city_array[2],
      '#default_value' => isset($values['city']) ? $values['city'] : array('1'),
      '#suffix'=>'</div></div>',
    );
  } else {
    $form['rate_the_service']['city'] = array(
      '#prefix'=>'<div id="checkboxes-four-replace">',
      '#type' => 'checkboxes',
      '#options' => $city_array[1],
      '#default_value' => isset($values['city']) ? $values['city'] : array('2'),
      '#suffix'=>'</div></div>',
    );
  }
  return $form;
}

/**
 * Ajax Callback for development_form
 */
function ajax_example_dependent_dcheck_state_callback($form, $form_state) {
  return $form['rate_the_service']['city'];
} 
```

或者，如果您希望 state 成为“复选框”以及城市，您可以这样做：

```
function state_form($form, &$form_state) {
  $form = array();

  $form['rate_the_service']['state'] = array(
    '#type' => 'checkboxes',
    '#prefix'=>'<div id="dropdown-third-replace">',
    '#suffix'=>'</div>',
    '#options'=>array(
      'ohio' => t('Ohio'),
      'new_york' => t('New York'),
    ),
    '#validated' => TRUE,
    '#ajax' => array(
      'event' => 'change',
      'callback' => 'ajax_example_dependent_dcheck_state_callback',
      'wrapper' => 'checkboxes-four-replace',
    ),
  );

  $city_array = array(
    '1' => array(
      '1' => 'Cincinnati',
      '2' => 'Cleveland',
      '3' => 'Toledo'
    ),
    '2' => array(
      '4' => 'New York City',
      '5' => 'Buffalo',
      '6' => 'Syracuse'
    ),
  );

  // refine as needed to fit your validation, if this is your use case
  if (isset($form_state['values']['state']['ohio']) && $form_state['values']['state']['ohio'] == 'ohio') {
    $form['rate_the_service']['city'] = array(
      '#prefix'=>'<div id="checkboxes-four-replace">',
      '#type' => 'checkboxes',
      '#options' => $city_array[1],
      '#default_value' => isset($values['city']) ? $values['city'] : array('1'),
      '#suffix'=>'</div></div>',
    );
  } else if (isset($form_state['values']['state']['new_york']) && $form_state['values']['state']['new_york'] == 'new_york') {
    $form['rate_the_service']['city'] = array(
      '#prefix'=>'<div id="checkboxes-four-replace">',
      '#type' => 'checkboxes',
      '#options' => $city_array[2],
      '#default_value' => isset($values['city']) ? $values['city'] : array('2'),
      '#suffix'=>'</div></div>',
    );
  } else {
    $form['rate_the_service']['city'] = array(
      '#prefix'=>'<div id="checkboxes-four-replace">',
      '#type' => 'checkboxes',
      '#options' => array(),
      '#default_value' => isset($values['city']) ? $values['city'] : array('2'),
      '#suffix'=>'</div></div>',
    );
  }
  return $form;
}

/**
 * Ajax Callback for development_form
 */
function ajax_example_dependent_dcheck_state_callback($form, $form_state) {
  return $form['rate_the_service']['city'];
} 
```

这是将州作为“选择”框，将城市作为“选择”框的情况

```
function state_form($form, &$form_state) {
  $form = array();

  $form['rate_the_service']['state'] = array(
    '#type' => 'select',
    '#prefix'=>'<div id="dropdown-third-replace">',
    '#suffix'=>'</div>',
    '#options'=>array(
      'ohio' => t('Ohio'),
      'new_york' => t('New York'),
    ),
    '#validated' => TRUE,
    '#ajax' => array(
      'event' => 'change',
      'callback' => 'ajax_example_dependent_dcheck_state_callback',
      'wrapper' => 'checkboxes-four-replace',
    ),
  );

  $city_array = array(
    '1' => array(
      '1' => 'Cincinnati',
      '2' => 'Cleveland',
      '3' => 'Toledo'
    ),
    '2' => array(
      '4' => 'New York City',
      '5' => 'Buffalo',
      '6' => 'Syracuse'
    ),
  );

  if (isset($form_state['values']['state']) && $form_state['values']['state'] == 'new_york') {
    $form['rate_the_service']['city'] = array(
      '#prefix'=>'<div id="checkboxes-four-replace">',
      '#type' => 'select',
      '#options' => $city_array[2],
      '#default_value' => isset($values['city']) ? $values['city'] : array('1'),
      '#suffix'=>'</div></div>',
    );
  } else {
    $form['rate_the_service']['city'] = array(
      '#prefix'=>'<div id="checkboxes-four-replace">',
      '#type' => 'select',
      '#options' => $city_array[1],
      '#default_value' => isset($values['city']) ? $values['city'] : array('2'),
      '#suffix'=>'</div></div>',
    );
  }
  return $form;
}

/**
 * Ajax Callback for development_form
 */
function ajax_example_dependent_dcheck_state_callback($form, $form_state) {
  return $form['rate_the_service']['city'];
} 
```

# ruby-on-rails - 链接 named_scopes

> ID：15806820
> 
> 赞同：0
> 
> 时间：2013-04-04T09:03:18.507
> 
> 标签：ruby-on-rails, ruby

我有一个关于使用 named_scopes 的问题：

假设我有以下模型（我知道我提供的一些 named_scope 可以直接通过活动记录实现，但它们仅用于示例）：

```
def person

    named_scope :older_then, lambda {|min_age| {:conditions => ["age > ?",min_age]} }
    named_scope :by_first_name, lambda {|name| {:conditions => {:first_name => name}}}

    def self.some_function(age_param, name_param)
       chain = Person
       chain = chain.older_then(age_param) unless age_param.blank?
       chain = chain.by_first_name(name_param) unless name_param.blank?
       chain.all
    end
end 
```

现在让我说我想打电话：

```
people = Person.some_function(20, "john") 
```

在构建 named_scopes 链时，Rails 将对数据库进行 2 次调用：

```
select * from persons where age>20
select * from persons where age>20 and name='john' 
```

显然，我想要的只是第二个查询的结果，并不打算在构建 named_scopes 链时执行第一个查询。任何想法我在这里做错了什么/按条件组合多个named_scope的正确方法是什么？

顺便说一句，我使用的是 Ruby 1.8.7 它的旧版本，我知道...... :(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:26:18.950

改变这个：

```
def self.some_function(age_param, name_param)
   chain = Person 
```

到：

```
def self.some_function(age_param, name_param)
   chain = self 
```

这将保持原始链完整，而不是开始一个新链。

# api - 将 oAuth 与资源所有者密码凭证授予一起使用时的正确流程是什么

> ID：15806822
> 
> 赞同：0
> 
> 时间：2013-04-04T09:03:28.013
> 
> 标签：api, rest, authentication, oauth-2.0, restful-authentication

我希望为我的基于 RESTful 超媒体的 API 构建一个客户端，在查看了许多选项后，我正在学习 oAuth* 以成为授权访问 API 的事实上的方法。

我想我正在理解整体 oauth 概念，即取决于客户端（受信任与否），规范提供了几个流程，以便从资源所有者（用户）授予访问权限的角度“信任”客户端（应用程序）客户。

因为我正在构建的应用程序直接是服务生态系统的一部分，它将属于受信任的客户部分的保护范围，所以我决定实施资源所有者密码凭证授予，但这是我的知识与oAuth 提供的术语和确切作用，我的大脑关闭了 :)

我认为这是流程（带有更多技术思想）：

1.  通过登录表单，资源所有者提供他们的凭据
2.  将详细信息提交给服务器（在本例中为 express.js 应用程序）
3.  该应用程序通过一些本地机制对商店的用户凭据进行身份验证
4.  如果用户不存在或验证失败，则返回登录
5.  如果用户确实存在并且确实通过了验证，则启动将其凭据交换为令牌的机制（联系 oAuth 服务器并交换详细信息），该机制将加密/散列信息存储在某处（redis 可能？）
6.  一旦令牌被返回，它可能存储在一个会话中以保持客户端的持久性（我认为 trello.com 做了类似的事情，因为他们有一个令牌 cookie，但我在这里可能是非常错误的）

这是可接受的流程吗？我似乎找不到任何可用的示例，作为目前唯一的开发人员，获得一些反馈会很好。

​​​

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T17:29:54.983

最后不需要定义我自己的流程，这只是资源所有者密码授权，我们将用户的凭据交换为受信任客户端的 oAuth 令牌。

# vbscript - 操作必须是可更新的查询 - VB Script, Paradox Table

> ID：15806825
> 
> 赞同：0
> 
> 时间：2013-04-04T09:03:45.210
> 
> 标签：vbscript, bde, paradox

我正在使用安装了 BDE 管理员和 Access 2007 的 Win XP 机器。我能够毫无问题地打开现有 Paradox 表并执行选择查询，但在尝试 INSERT/UPDATE 时有一些非常奇怪的行为。我什至可以创建一个新的 Paradox 表，它具有相同的行为。这是示例代码：

```
 ' create new table
conObj.Execute "CREATE TABLE test (id INT, comment VARCHAR(30))"

' first insert works fine
conObj.Execute "INSERT INTO test VALUES (1, 'something')"

' second insert fails for unknown reason
conObj.Execute "INSERT INTO test VALUES (2, 'something else')" 
```

我尝试过使用 Jet 4.0、MS Access Paradox 驱动程序和本机 Paradox 驱动程序连接字符串，但都产生了相同的结果。在第二个插入语句中，它会引发错误：

操作必须是可更新的查询

我在帮助网站上的论坛和页面上阅读了许多帖子，这些帖子告诉我这个错误是由文件权限问题引起的。运行此脚本的帐户是管理员组的一部分，我已更改文件权限以允许所有人组完全控制 db 文件，但这没有任何改变。

Micrsoft Support 发布的这个页面没有解决问题：http: [//support.microsoft.com/kb/175168](http://support.microsoft.com/kb/175168)

此外，我可以创建一个新表，但每当我尝试创建 PRIMARY KEY 或 UNIQUE 字段时，我都会收到一条错误消息：

“Index_[随机字符] 不是有效名称。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T23:06:15.940

尝试“创建表测试（id INT，评论 VARCHAR（30），主键（id））”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:03:38.697

我对 Paradox 数据库了解不多，但这确实是一次学习经历。即使我有一个名为 table.db 的表文件，也不足以存储多行数据。我还需要其他几个文件来插入或更新 paradox 数据库：

```
table.DB
table.PX
table.VAL
table.XG0
table.XG1
table.YG0
table.YG1 
```

我在另一个生成悖论数据库的程序中四处寻找，发现当我从中复制一个空白数据库以及它生成的其他文件时，我能够毫无问题地插入和更新。我不知道这些文件是做什么用的，也不知道为什么它们需要存在才能插入或更新，但让它们存在解决了我的问题。

# python - 丢弃 res.read() 状态文本中的标题

> ID：15806828
> 
> 赞同：1
> 
> 时间：2013-04-04T09:03:51.587
> 
> 标签：python, django

此行`status_msg = res.read()`收到一条状态消息...

```
some heading|more headings|even more heading
0|OK|eb725f96b4b094d5f8318741cc1a545f-2 
```

但是，我希望 status_msg 丢弃第一行文本（标题），只获取从 0 开始的**第二**行。

谢谢。

```
res = urllib.urlopen(self.base_url, data)
status_msg = res.read() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T09:08:22.613

使用`res.readlines()`，它返回结果消息的行列表

```
status_msg = '\n'.join(res.readlines()[1:]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T09:05:54.553

您可以按行拆分：

```
status_msg = '\n'.join(res.read().splitlines()[1:]) 
```

甚至：

```
status_msg = '\n'.join(res.readlines()[1:]) 
```

或调用`.readline()`响应以丢弃第一行：

```
res.readline()  # discard the first line
status_msg = res.read() 
```

# php - 使用可被其他网站引用的基础网站框架的最佳方法

> ID：15806832
> 
> 赞同：0
> 
> 时间：2013-04-04T09:03:55.890
> 
> 标签：php, svn, web-applications, content-management-system

我目前正在寻找一种更有效的方法来在我的工作地点开发网站。我们托管了 150 多个站点，所有站点都有不同版本的主网站和 CMS 框架。新网站往往是我们认为是最新版本的复制和粘贴工作。不用说，这会占用大量空间，而且在进行我们想要在所有站点上进行的更新方面效率非常低，更不用说混乱了。（别怪我，我是新员工，想收拾东西！）

我最初的想法是在我们的服务器上创建一个基础框架，包含所有通用文件，例如 PHP 类、函数等。然后每个网站都可以简单地拉取这些文件，只需要一些包含文件来做拉取，任何一个配置文件非通用变量（例如数据库凭据）和其他非通用文件，例如样式表等。

这会带来一个问题，即当对基本框架中的通用文件进行更新时，一个错误将杀死使用该文件的每个站点。我最初的想法是某种形式的颠覆，允许我们根据需要提交和回滚更新，增加一点出错的空间。然后我们可以对测试区域进行更新，检查一切是否正常，然后将更新提交到主存储库。

我们的服务器正在运行 Linux Red Hat Enterprise 5.3，我认为仅使用 svnserve 不会让我们直接引用存储库中的文件是否正确？最好的方法是什么，或者有没有更好的方法来提高效率和减少磁盘空间？

先谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:09:09.963

一个脚本化的部署系统可能是有意义的。例如，创建一个可以签出存储库副本的 shell 脚本，然后将其复制到目的地。您可以给它一个特定的修订号作为参数，以便您能够回滚到以前的版本。

有完整的框架围绕着这部分构建，但如果你可以开始使用一些自制的脚本，你可能会更适合理解这些。

如果您没有特定的颠覆经验，我建议您尝试将自己建立在 git 之上。它在很多方面要好得多，尤其是速度更快，而且它正在迅速成为事实上的工具。

# mysql - Spring3.1、Hibernate4 和 Jasypt1.90 的配置文件中的加密密码不适用于 MySQL 服务器 5

> ID：15806833
> 
> 赞同：1
> 
> 时间：2013-04-04T09:04:01.923
> 
> 标签：mysql, spring, hibernate, jasypt

**我已将 Spring3.1、Hibernate4 和 Jasypt1.90 的加密密码配置到 MySQL 服务器 5 的配置文件中，但它不起作用并给出以下错误：**

```
Caused by:java.sql.SQLException: Access denied for user 'root'@'iplcewks01056.noida.innodata.net' (using 
password: YES)
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1073)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3603)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3535)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:934)
at com.mysql.jdbc.MysqlIO.secureAuth411(MysqlIO.java:4104)
at com.mysql.jdbc.MysqlIO.doHandshake(MysqlIO.java:1299)
at com.mysql.jdbc.ConnectionImpl.coreConnect(ConnectionImpl.java:2338)
at com.mysql.jdbc.ConnectionImpl.connectWithRetries(ConnectionImpl.java:2186)
at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2168)
at com.mysql.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:794)
at com.mysql.jdbc.JDBC4Connection.<init>(JDBC4Connection.java:47)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
at com.mysql.jdbc.Util.handleNewInstance(Util.java:407)
at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:378)
at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:305)
at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38)
at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582)
at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556)
at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545)
at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388)
at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044)
at 
org.hibernate.service.jdbc.connections.internal.DatasourceConnectionProviderImpl.
getConnection(DatasourceConnectionProviderImpl.java:141)
at org.hibernate.internal.AbstractSessionImpl$NonContextualJdbcConnectionAccess.
obtainConnection(AbstractSessionImpl.java:292)
at org.hibernate.engine.jdbc.internal.LogicalConnectionImpl.
obtainConnection(LogicalConnectionImpl.java:297)
at org.hibernate.engine.jdbc.internal.LogicalConnectionImpl.
getConnection(LogicalConnectionImpl.java:169)
at org.hibernate.engine.transaction.internal.jdbc.JdbcTransaction.doBegin(JdbcTransaction.java:67)
at org.hibernate.engine.transaction.spi.AbstractTransactionImpl.
begin(AbstractTransactionImpl.java:160)
at org.hibernate.internal.SessionImpl.beginTransaction(SessionImpl.java:1395)
at org.springframework.orm.hibernate4.HibernateTransactionManager.
doBegin(HibernateTransactionManager.java:399)
at org.springframework.transaction.support.AbstractPlatformTransactionManager.
getTransaction(AbstractPlatformTransactionManager.java:371)
at org.springframework.transaction.interceptor.TransactionAspectSupport.
createTransactionIfNecessary(TransactionAspectSupport.java:334)
at org.springframework.transaction.interceptor.TransactionInterceptor.
invoke(TransactionInterceptor.java:105)
at org.springframework.aop.framework.ReflectiveMethodInvocation.
proceed(ReflectiveMethodInvocation.java:172)
at org.springframework.aop.interceptor.ExposeInvocationInterceptor.
invoke(ExposeInvocationInterceptor.java:90)
at org.springframework.aop.framework.ReflectiveMethodInvocation.
proceed(ReflectiveMethodInvocation.java:172)
at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
at $Proxy59.getAllRoles(Unknown Source)
at com.synodex.webapp.listener.StartupListener.setupContext(StartupListener.java:113) 
```

让我描述一下，到目前为止我所做的一切：

**Step-I-Jasypt-Spring-Hibernate Maven 依赖**

```
<dependency>
    <groupId>org.jasypt</groupId>
    <artifactId>jasypt</artifactId>
    <version>1.9.0</version>
    <scope>compile</scope>
</dependency>
<dependency>
    <groupId>org.jasypt</groupId>
    <artifactId>jasypt-spring31</artifactId>
    <version>1.9.0</version>
    <scope>compile</scope>
</dependency>
<dependency>
        <groupId>org.jasypt</groupId>
        <artifactId>jasypt-hibernate4</artifactId>
        <version>1.9.0</version>
        <scope>compile</scope>
</dependency> 
```

**applicationContext-resources.xml 中的 Step-II-Jasypt-Spring-Hibernate 配置：我在这里使用了两种方法，但都不起作用。**

*第一种方法：*

```
<bean id="propertyConfigurer" 
            class="org.jasypt.spring31.properties.EncryptablePropertyPlaceholderConfigurer">
             <constructor-arg ref="configurationEncryptor" />
             <property name="locations">
                 <list>
                    <value>classpath:jdbc.properties</value>
                    <value>classpath:mail.properties</value>
                    <value>classpath:hibernate.properties</value>
                    <value>classpath:ldap.properties</value>
                 </list>
               </property>
            </bean>
            <bean id="configurationEncryptor" class="com.synodex.util.JasyptDecryptorUtil" 
            factory-method="getEncriptorInstance" />

public class JasyptDecryptorUtil {
private final static JasyptDecryptorUtil jasyptutil = new JasyptDecryptorUtil();
private static StandardPBEStringEncryptor encryptor;

private JasyptDecryptorUtil() {
    String PWD = "SDHLKSHUWEHDKSLKLJKSALJDLKA00IUAY98273492JLKASJDLKASJDKLAJSD";
    encryptor = new StandardPBEStringEncryptor();
    encryptor.setAlgorithm("PBEWithMD5AndDES");
    encryptor.setPassword(PWD);
}

public static String getDecryptedString(String dec) {
    return encryptor.decrypt(dec);
}

public static String getEncryptedString(String dec) {
    return encryptor.encrypt(dec);
}

public static synchronized StandardPBEStringEncryptor getEncriptorInstance() {
    return encryptor;
}

/*
 * Get decrypted values stored in a property file
 */
public static Properties getDecryptedProperties(String pfile)throws IOException, FileNotFoundException {
    Properties properties = new EncryptableProperties(encryptor);
    properties.load(new FileInputStream(new File(pfile)));

    return properties;
} 
```

}

*第二种方法：*

```
<bean id="propertyConfigurer" 
           class="org.jasypt.spring31.properties.EncryptablePropertyPlaceholderConfigurer">
           <constructor-arg ref="configurationEncryptor" />
           <property name="locations">
               <list>
                   <value>classpath:jdbc.properties</value>
                   <value>classpath:mail.properties</value>
                   <value>classpath:hibernate.properties</value>
                   <value>classpath:ldap.properties</value>
               </list>
              </property>
            </bean>
           <bean id="configurationEncryptor" 
           class="org.jasypt.encryption.pbe.StandardPBEStringEncryptor">
              <property name="config" ref="environmentVariablesConfiguration" />
           </bean>
           <bean id="environmentVariablesConfiguration" 
           class="org.jasypt.encryption.pbe.config.EnvironmentStringPBEConfig">
              <property name="algorithm" value="PBEWithMD5AndDES" />
              <property name="passwordEnvName" value="APP_ENCRYPTION_PASSWORD" />
          </bean> 
```

注意：我必须将 APP_ENCRYPTION_PASSWORD 系统属性设置为 pom.xml 以获取主密码：

```
<plugin>
            <groupId>org.mortbay.jetty</groupId>
            <artifactId>jetty-maven-plugin</artifactId>
            <version>8.1.3.v20120416</version>
            <configuration>
                <webApp>
                    <contextPath>/sc</contextPath>
                </webApp>
               <systemProperties>
                <systemProperty>
                  <name>APP_ENCRYPTION_PASSWORD</name>
                  <value>SDHLKSHUWEHDKSLKLJKSALJDLKA00IUAY98273492JLKASJDLKASJDKLAJSD</value>
                </systemProperty>
               </systemProperties>
                <connectors>
                    <connector implementation="org.eclipse.jetty.server.nio.SelectChannelConnector">
                        <port>8080</port>
                        <maxIdleTime>60000</maxIdleTime>
                    </connector>
                    <connector implementation="org.eclipse.jetty.server.ssl.SslSocketConnector">
                        <port>8443</port>
                        <maxIdleTime>60000</maxIdleTime>
                        <keystore>${project.build.directory}/jetty-ssl.keystore</keystore>
                        <password>jetty6</password>
                        <keyPassword>jetty6</keyPassword>
                    </connector>
                </connectors> 
            </configuration>
        </plugin> 
```

**Step-III- 我使用了 c3p0 连接池而不是 dbcp 池，但它也不起作用。**

```
<bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource" destroy-method="close">
    <property name="driverClass" value="${jdbc.driverClassName}" />
    <property name="jdbcUrl" value="${jdbc.url}" />
    <property name="user" value="${jdbc.username}" />
    <property name="password" value="${jdbc.password}" />
    <property name="maxPoolSize" value="100" />
    <property name="maxStatements" value="10" />
    <property name="minPoolSize" value="20" />
    <property name="testConnectionOnCheckin" value="true"/> 
</bean> 
```

请建议我在这里缺少的任何东西。我做了很多尝试，但没有取得任何成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T03:47:09.303

使用嵌套属性值后已解决：`<property name="password" value="${${jdbc.password.meta}}"/>`

# grails - Spring Security grails 登录重定向

> ID：15806838
> 
> 赞同：0
> 
> 时间：2013-04-04T09:04:21.253
> 
> 标签：grails, login, spring-security

我在我的 grails 应用程序上使用 spring security 并希望这样做：

我的主页是：[http](http://www.test.com:8080/my-app/) ://www.test.com:8080/my-app/这是 index.gsp

现在我在 index.gsp 文件中插入了一个登录表单：

```
<form action='${postUrl}' method='POST' id='loginForm' class='cssform' autocomplete='off'>
<p>
<label for='username'><g:message code="springSecurity.login.username.label"/>:</label>
<input type='text' class='text_' name='j_username' id='username'/>
</p>

<p>
<label for='password'><g:message code="springSecurity.login.password.label"/>:</label>
<input type='password' class='text_' name='j_password' id='password'/>
</p>
<p id="remember_me_holder">
<input type='checkbox' class='chk' name='${rememberMeParameter}' id='remember_me' <g:if test='${hasCookie}'>checked='checked'</g:if>/>
<label for='remember_me'><g:message code="springSecurity.login.remember.me.label"/></label>
</p>

<p>
<input type='submit' id="submit" value='${message(code: "springSecurity.login.button")}'/>
</p>
</form> 
```

现在，当我插入用户名和密码时，我想重定向到 url：[http ://www.test.com:8080/my-app/customer/list](http://www.test.com:8080/my-app/customer/list)

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T10:09:04.110

这个答案应该对您有所帮助：[Grails Spring Security：登录成功/失败后重定向](https://stackoverflow.com/questions/6968210/grails-spring-security-redirect-after-login-success-failure)

这个问题很可能被认为是重复的。如果您不介意，在 SO 上发布问题之前，请运行快速搜索（此处或在 Google 上）。:)

# javascript - Javascript - 名字的正则表达式

> ID：15806839
> 
> 赞同：0
> 
> 时间：2013-04-04T09:04:22.550
> 
> 标签：javascript

我正在尝试找到与名字匹配的正确正则表达式。

第一个字母必须是大写字母，后跟至少一个小写字母。

我已经尝试过`(!fname.match(/^[A-Z]{1,}\[a-z]{1,}$/))`，但这似乎不起作用。

感谢您的帮助！

匹配的名字：“Jack”“Li”“Ku”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:06:09.103

这是简单的方法：

```
/^[A-Z][a-z]+$/.test("Jack"); 
```

从技术上讲，set`[A-Z]`匹配*一个*大写字母，而`[a-z]+`匹配大写字母后的*一个或多个*小写字母。`"José"`请注意，以下表达式将与[@Michael Geary](https://stackoverflow.com/questions/15806839/javascript-regular-expression-for-a-first-name/#comment22480059_15806877)在评论`"LaVaughn"`中提到的名称不匹配。

# forward-declaration - 在 MongoEngine 中使用 reverse_delete_rule 时如何拥有循环或前向 ReferenceField？

> ID：15806844
> 
> 赞同：1
> 
> 时间：2013-04-04T09:04:49.540
> 
> 标签：forward-declaration, mongoengine, cyclic-reference

此代码炸弹：

```
from mongoengine import *

class Employee(Document):
    name = StringField()
    boss = ReferenceField("Employee", reverse_delete_rule = NULLIFY) 
```

继承人例外：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "[…]/mongoengine/base.py", line 791, in __new__
    new_class = super_new(cls, name, bases, attrs)
  File "[…]/mongoengine/base.py", line 630, in __new__
    f.document_type.register_delete_rule(new_class,
    File "[…]/mongoengine/fields.py", line 757, in document_type
    self.document_type_obj = get_document(self.document_type_obj)
  File "[…]/mongoengine/base.py", line 136, in get_document
    """.strip() % name)
mongoengine.base.NotRegistered: `Employee` has not been registered
in the document registry.
Importing the document class automatically registers it, has it
been imported? 
```

删除`reverse_delete_rule`修复问题，但我想有这个规则。

我试过这个，它有效，但它看起来真的很垃圾，我担心可能会有不好的副作用（到目前为止，我还没有看到任何副作用）：

```
from mongoengine import *

class Employee(Document):
    pass # required for the reverse_delete_rule to work on the boss field,
         # because the Employee class needs to exist.

class Employee(Document):
    name = StringField()
    boss = ReferenceField("Employee", reverse_delete_rule = NULLIFY) 
```

有任何想法吗？这不应该被视为 MongoEngine 中的错误吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-04T10:13:33.367

尝试`'self'`改用`'Employee'`：

```
from mongoengine import *

class Employee(Document):
    name = StringField()
    boss = ReferenceField("self", reverse_delete_rule = NULLIFY) 
```

查看详细信息：[https](https://mongoengine-odm.readthedocs.org/en/latest/guide/defining-documents.html#reference-fields) ://mongoengine-odm.readthedocs.org/en/latest/guide/defining-documents.html#reference-fields 。

# java - readLine() 永远不会停止阅读

> ID：15806850
> 
> 赞同：0
> 
> 时间：2013-04-04T09:04:54.013
> 
> 标签：java, readline

`inFromClientR.readLine()`永不停止。有任何想法吗？我是不是忘记了什么？

服务器：

```
/*{ some code:
    send a file with a dataoutputstream to client using a new port(4000) and when transfer is done i want a responce message (e.g. OK) send back to server in the old port(6000)  
}*/
 ServerSocket listenTransferSocket = new ServerSocket(6000);
      Socket connectionTransferSocket = listenTransferSocket.accept();

    BufferedReader inFromClientR =
             new BufferedReader(new InputStreamReader(connectionTransferSocket.getInputStream()));

     System.out.println("Client's response to Transfer: " +inFromClientR.readLine()); 
```

客户：

```
/*{ some code: 
receive the file on port (4000) and then the responce is sent to server using the following commands
}*/
Socket fileTransferSocket = new Socket("localhost", 6000);

 DataOutputStream outToServerR = 
       new DataOutputStream(fileTransferSocket.getOutputStream()); 

        outToServerR.writeBytes("Transfer completed " +'\n'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:30:08.993

BufferedReader#readLine() 尝试用 8192 字节填充其缓冲区，同时不考虑它发现的任何换行符。由于您打开了连接，因此接收方将等到 1) 您发送了 8192 个字节，或 2) 关闭连接。

最好使用其他一些框架机制，也许是 ObjectOutputStream/ObjectInputStream。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:02:44.693

```
String line = null;
while ((line = inFromClientR.readLine()) != null) {
   // do sth
} 
```

# jquery - 如何在 xml 标记中附加以下数据以获取 xml 文件作为输出？

> ID：15806852
> 
> 赞同：-1
> 
> 时间：2013-04-04T09:04:58.653
> 
> 标签：jquery

```
{
    "attrs": {
        "width": 578,
        "height": 200
    },
    "nodeType": "Stage",
    "children": [
        {
            "attrs": {},
            "nodeType": "Layer",
            "children": [
                {
                    "attrs": {
                        "x": 289,
                        "y": 100,
                        "sides": 6,
                        "radius": 70,
                        "fill": "red",
                        "stroke": "black",
                        "strokeWidth": 4
                    },
                    "nodeType": "Shape",
                    "shapeType": "RegularPolygon"
                }
            ]
        }
    ]
} 
```

我已经解析了上面的 json 数据，但我不知道如何将数据附加到 xml 标签。感谢任何帮助。我想要使用 jquery 的具有确切父节点和子节点的 xml 标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:18:38.543

我在谷歌快速搜索后发现了这个功能（[来源](http://onwebdevelopment.blogspot.com/2008/05/converting-xml-to-json.html)）：

```
json2Xml = function(json, node) {
    var root = false;
    if (!node) {
        node = document.createElement('root');
        root = true;
    }

    for (var x in json) {
        // ignore inherited properties
        if (json.hasOwnProperty(x)) {

            if (x == '#text') { // text
                node.appendChild(document.createTextNode(json[x]));
            } else  if (x == '@attributes') { // attributes
                for (var y in json[x]) {
                    if (json[x].hasOwnProperty(y)) {
                        node.setAttribute(y, json[x][y]);
                    }
                }
            } else if (x == '#comment') { // comment
                // ignore
            } else { // elements
                if (json[x] instanceof Array) { // handle arrays
                    for (var i = 0; i < json[x].length; i++) {
                        node.appendChild(json2Xml(json[x][i], document.createElement(x)));
                    }
                } else {
                    node.appendChild(json2Xml(json[x], document.createElement(x)));
                }
            }
        }
    }

    if (root == true) {
        return this.textToXML(node.innerHTML);
    } else {
        return node;
    }
}; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-04T09:08:28.120

所以你只想从 json 转换为 xml？[网络上的大量脚本](http://goessner.net/download/prj/jsonxml/)

jsFiddle 使用 obove 库：http: [//jsfiddle.net/RCZLF/](http://jsfiddle.net/RCZLF/)

```
var foo = {/* json obj */}
$(function() {
    console.log(json2xml(foo,' '));
}); 
```

# android - 如何删除后台运行的应用程序？

> ID：15806854
> 
> 赞同：1
> 
> 时间：2013-04-04T09:05:05.027
> 
> 标签：android, background

我有一个应用程序，它列出了所有已安装的应用程序并在项目单击时启动它们。现在我通过阻止一些应用程序（如设置、android 市场等）对其进行了更新...为此，我使用了一个仅在退出我的应用程序时才停止的服务。这个服务不断检查当前正在运行的应用程序。如果它是一个被阻止的应用程序，则显示一个像这样的新活动。

```
private void currentlyRunningApps() {
    List<RunningTaskInfo> runningTasks = ((ActivityManager) getApplicationContext() .getSystemService("activity")).getRunningTasks(1);
    if (runningTasks != null && !runningTasks.isEmpty()) {
        for (int i = 0; i < runningTasks.size(); i++) {
            RunningTaskInfo runningtaskinfo = (RunningTaskInfo) runningTasks .get(i);
            String packageName = runningtaskinfo.topActivity.getPackageName();
            if(checkBlackListedTask(runningtaskinfo)) {

                handler.post(new Runnable() {
                    @Override
                    public void run() {
                     // show action not allowed activity 
                    }
                });
                break;

            }
        }
    }
} 
```

这很好用。但是当从我的应用程序退出时，被阻止的应用程序停留在后台。我尝试了方法`killBackgroundProcesses`。`restartPackage`但它们不起作用。

```
 Method forceStopPackage = am.getClass().getDeclaredMethod("forceStopPackage", String.class);     
             forceStopPackage.setAccessible(true);     
             forceStopPackage.invoke(am,package name); 
```

这会引发空指针异常

如何在显示`'action not allowed'`活动之前关闭这些被阻止的应用程序？

有没有办法解决这个问题？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T09:10:43.203

# linux - 如果 string = this 或 that，则 Bash

> ID：15806860
> 
> 赞同：7
> 
> 时间：2013-04-04T09:05:21.457
> 
> 标签：linux, bash, shell, ubuntu, if-statement

试图编写一个脚本来读取用户输入的内容......我知道这是基本的，但我坚持第一个如果......

```
echo  "Please enter yes or no (y/n)?"
read string
if [ $string = "y" -o "n" ]
   then
      echo "User selected $string"
   else
      echo "You didn't enter y/n !!!"
fi 
```

我希望它是 if [ $backup = "y" or "n" ]

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T09:08:22.187

在 中使用此语法`bash`：

```
if [ "a string" = "another one" ] ; then

# Whatever

fi 
```

对于多个条件语句，例如`OR`，使用：

```
if [ "a string" = "another one" ] || [ "$foo" = "bar" ] ; then

# Whatever

fi 
```

`bash`还支持非标准`[[ ... ]]`表达式，它可以使用单个命令而不是 2 个`[`命令来处理复合比较：

```
if [[ "a string" = "another one" || $foo = "bar" ]]; then

# Whatever

fi 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-04T14:11:28.197

不是您实际提出的问题，而是...您告诉用户输入“是”或“否”，但只测试 y 或 n - 当然，您给了他们一个提示，但用户是抗提示的。因此，也许需要进行更宽松的测试：

```
echo "Please enter yes or no (y/n)"
read string
case "$string" in
    [yY]* | [nN]*) echo "User entered $string" ;;
    *) echo "I don't understand '$string'" ;;
esac 
```

这将识别以 Y 或 N 开头的任何变化——通常这已经足够好了，但你可以加强测试。此外，由于您可能希望通过 yes 或 no 响应来做一些不同的事情，您可以扩展案例（我也加强了这个案例中的测试）：

```
case "$string" in
    [yY] | [yY][eE][sS]) echo "Here's where you process yes" ;;
    [nN] | [nN][oO]) echo "And here you deal with no" ;;
    *) echo "I don't understand '$string'" ;;
esac 
```

您可以使用 if 语句执行此操作，但我发现当可能有两个以上的替代方案并且测试适合 case 语法时，case 更具可读性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T13:09:36.393

你也可以试试：

```
echo  "Please enter yes or no (y/n)?"
read string
if [[ "$string" =~ ^(y|n)$ ]]
   then
      echo "User selected $string"
   else
      echo "You didn't enter y/n !!!"
fi 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T14:10:40.133

我很好的解决方案是 with `case`，如果你想让你的输入更复杂，它更容易扩展

```
case $string in
  y|n) echo "User selected $string"
      ;;
  *) echo "You didn't enter y/n !!!"
      ;;  
esac 
```

从那里您可以轻松地对其进行修改以接受大写或其他任何内容：

```
case $string in
  y|Y) echo "yes, Sir!"
      ;;
  n|N) echo "No, can't do"
      ;;
  *) echo "Say what?"
      ;;  
esac 
```

检查[案例陈述](http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_07_03.html)以获取更多信息。

# javascript - 如何在输入字段中触发函数？还是具有该功能的默认按钮而不实际提交？

> ID：15806862
> 
> 赞同：0
> 
> 时间：2013-04-04T09:05:25.957
> 
> 标签：javascript, html, forms

有效：使用按钮时

问题是：在文本字段内按 Enter 时，默认操作似乎是提交。我只是希望它使用默认可用的按钮。这是可能的还是我必须用javascript劫持企业？

代码：

```
<form>
<label>Password:<input type="password" id="pass" name="pass"></label>
<input type="button" value="hämta data" onclick="getData('password.txt')"/>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:08:32.370

默认情况下，在表单的最后一个字段中按 Enter 会提交表单。尝试这个：

```
<form onsubmit="return false;"> 
```

所以提交表单不会做任何事情。

# c - 如何更改 pthread_barrier 的计数？

> ID：15806864
> 
> 赞同：3
> 
> 时间：2013-04-04T09:05:30.337
> 
> 标签：c, pthreads

问题是我们必须使用 pthread 实现一种“运行竞赛”。在一个轨道之后，我们必须等到所有跑步者/线程都完成为止，所以我们为此使用了屏障。

但是现在我们还必须执行受伤的概率。所以我们写了一个函数，它有时会减少跑步者的数量，并用更小的数量重新初始化屏障。现在的问题是程序并不总是终止。我猜这是因为一些线程已经在屏障处，并且在重新初始化它们之后，所需的数量没有到达。

模拟伤害的代码如下所示：

```
void simulateInjury(int number) {
    int totalRunners = 0;
    int i = 0;
    if (rand() % 10 < 1) {
        printf("Runner of Team %i injured!\n", number);
        pthread_mutex_lock(&evaluate_teamsize);
        standings.teamSize[number]--;
        for (i = 0; i < teams; i++) {
            totalRunners += standings.teamSize[i];
        }
        pthread_barrier_destroy(&barrier_track1);
        pthread_barrier_destroy(&barrier_track4[number]);
        pthread_barrier_init(&barrier_track1, NULL, totalRunners);
        pthread_barrier_init(&barrier_track4[number], NULL, standings.teamSize[number]);
        pthread_mutex_unlock(&evaluate_teamsize);
        pthread_exit(NULL);
    }
} 
```

或者有没有办法改变障碍的计数参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:06:52.967

我看到两个错误：

1.  当某个线程正在使用屏障时，您不应该重新初始化屏障。
2.  您不应由多个线程同时执行屏障的重新初始化。

对于第一个，您可以创建第二个屏障，与第一个交替使用。对于第二个，您应该使用等待函数的返回值来指定一个将执行重新初始化的特定线程。

# c# - 将在 C# web Response 中创建的 word 文档设置为在打印布局中打开

> ID：15806872
> 
> 赞同：0
> 
> 时间：2013-04-04T09:06:00.847
> 
> 标签：c#, asp.net, html

我在 Web 应用程序中动态生成带有 html 的 word 文档。这很好用，但是我的文档在 Web 布局中打开。我确定我在某处读到了一种使生成的文档在打印布局中打开的方法，但我现在在任何地方都找不到它。

```
 HttpContext.Current.Response.Clear();
    HttpContext.Current.Response.Charset = "";
    HttpContext.Current.Response.ContentType = "application/vnd.ms-word";
    HttpContext.Current.Response.AddHeader("Content-Disposition", "inline;filename=ContentDocument.doc");

    StringBuilder htmlCode = new StringBuilder();
    htmlCode.Append("<html>");
    htmlCode.Append("<head><style type=\"text/css\">body {font-family:arial;font-size:14.5;}</style></head>");
    htmlCode.Append("<body>");

    ... populate htmlCode ...

    htmlCode.Append("</body></html>");
    HttpContext.Current.Response.Write(htmlCode.ToString());
    HttpContext.Current.Response.End();
    HttpContext.Current.Response.Flush(); 
```

我认为这可能是为标题添加特定内容的情况。有谁知道如何让生成的文档在打印布局中打开？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T09:44:25.050

您可以通过以下代码在打印布局中打开文档

```
 string strBody = string.Empty;
        strBody = @"<html xmlns:o='urn:schemas-microsoft-com:office:office' " +
        "xmlns:w='urn:schemas-microsoft-com:office:word'" +
        "xmlns='http://www.w3.org/TR/REC-html40'>";

        strBody = strBody + "<!--[if gte mso 9]>" +
        "<xml>" +
        "<w:WordDocument>" +
        "<w:View>Print</w:View>" +
        "<w:Zoom>100</w:Zoom>" +
        "</w:WordDocument>" +
        "</xml>" +
        "<![endif]-->";
    HttpContext.Current.Response.Clear();
    HttpContext.Current.Response.Charset = "";
    HttpContext.Current.Response.ContentType = "application/vnd.ms-word";
    HttpContext.Current.Response.AddHeader("Content-Disposition",    "inline;filename=ContentDocument.doc");

    StringBuilder htmlCode = new StringBuilder();
    htmlCode.Append("<html>");
    htmlCode.Append("<head>"+strBody+" <style type=\"text/css\">body {font-family:arial;font-size:14.5;}</style></head>");
    htmlCode.Append("<body>");

     ... populate htmlCode ...

    htmlCode.Append("</body></html>");
    HttpContext.Current.Response.Write(htmlCode.ToString());
    HttpContext.Current.Response.End();
    HttpContext.Current.Response.Flush(); 
```

# ajax - ajax 脚本 onclick 提示弹出消息框

> ID：15806880
> 
> 赞同：1
> 
> 时间：2013-04-04T09:06:17.667
> 
> 标签：ajax, popup, alert

我在网上找到了这个投票脚本，想知道我是否可以将其更改为可以使用 css 设置样式的弹出消息，而不是 onclick 警报（您已经投票）...如果您需要查看，我只提交了一部分代码更多让我知道。提前致谢

```
 function addVotData(elm_id, vote, nvotes, renot) {
  // exists elm_id stored in ivotings
  if(ivotings[elm_id]) {
    // sets to add "onclick" for vote up (plus), if renot is 0
    var clik_up = (renot == 0) ? ' onclick="addVote(this, 1)"' : ' onclick="<a type="button" class="btn" style="width:100%;" href="#test_modal" data-toggle="modal">alert</a>"';

    // if vot_plus, add code with <img> 'votplus', else, if vot_updown1/2, add code with <img> 'votup',  'votdown'
    if(ivotings[elm_id].className == 'vot_plus') {    // simple vote
      ivotings[elm_id].innerHTML = '<h6>'+ vote+ '</h6><span><img src="'+votingfiles+'arrow.png" alt="1" title="vote"'+ clik_up+ '/></span>';
    };
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:12:59.290

您可以使用 Bootstrap 模式弹出而不是警报。 [这是很好解释的例子](http://www.whatibroke.com/?p=395)

如果您需要更多帮助，请告诉我

* * *

更新

模型弹出的html：

```
<div class="modal fade" id="test_modal"> <div class="modal-header"> 
<a class="close" data-dismiss="modal">&times;</a> <h3>Modal Header</h3> </div> 
<div class="modal-body"> <p>Test Alert</p> </div> <div class="modal-footer"> 
<a href="#" class="btn" data-dismiss="modal">Close</a> </div> </div> 
```

按钮的 HTML

```
<input type="Button" Text="ShowModal" Id="MyButton"/> 
```

脚本：

```
$( "#MyButton" ).click(function() {
$('#modalName').modal('show');
 }); 
```

# objective-c - iOS6 UITableView 部分标题重复

> ID：15806883
> 
> 赞同：3
> 
> 时间：2013-04-04T09:06:22.903
> 
> 标签：objective-c, uitableview, ios6

我在第 4 节中有一个带有可展开行的 UITableView。当展开一行时，其他行需要折叠。我重新加载指定的行并滚动表以将展开的行放在顶部。这是代码：

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
    {
        [tableView deselectRowAtIndexPath:indexPath animated:YES];

        if (indexPath.section == 4)
        {
            if (indexPath.row == 0)
            {
                if (hypoExpanded)
                {
                    hypoExpanded = NO;

                    [self performSelector:@selector(reloadRowWithScrollForIndexPath:) withObject:indexPath afterDelay:kAnimationDelay];
                }
                else
                {
                    hypoExpanded = YES;
                    moodExpanded = NO;
                    activityExpanded = NO;

                    NSArray *indexArray = [NSArray arrayWithObjects:indexPath, [NSIndexPath indexPathForRow:1 inSection:4], [NSIndexPath indexPathForRow:2 inSection:4], nil];
                    [self performSelector:@selector(reloadRowWithScrollForIndexArray:) withObject:indexArray afterDelay:kAnimationDelay];
                } 

    ... }
}

- (void)reloadRowWithScrollForIndexArray:(NSArray *)indexArray
    {
        [self.tableView reloadRowsAtIndexPaths:indexArray withRowAnimation:UITableViewRowAnimationAutomatic];
        [self.tableView scrollToRowAtIndexPath:[NSIndexPath indexPathForRow:((NSIndexPath *)[indexArray objectAtIndex:0]).row inSection:((NSIndexPath *)[indexArray objectAtIndex:0]).section] atScrollPosition:UITableViewScrollPositionTop animated:YES];
    }

- (void)reloadRowWithScrollForIndexPath:(NSIndexPath *)indexPath
    {
        [self.tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationAutomatic];
        [self.tableView scrollToRowAtIndexPath:[NSIndexPath indexPathForRow:indexPath.row inSection:indexPath.section] atScrollPosition:UITableViewScrollPositionTop animated:YES];
    }

- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
    switch (section)
    {
        case 1:
            return [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"bgc-info"]];
            break;

        case 2:
            return [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"in-info"]];
            break;

        case 3:
            return [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"bp-info"]];
            break;

        case 4:
            return [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"per-info"]];
            break;
    }

    return nil;
} 
```

有时，随机的部分标题（1、2 或 3）会复制并覆盖属于该部分的单元格。滚动表格以使该部分消失无济于事。当我向后滚动时，重复的标题仍然存在。它只发生在 iOS 6 上。调用 performSelectorOnMainThread: 也没有帮助。此外，无需调用 scrollToRowAtIndexPath: 一切正常。什么可能导致这种行为？

你可以在这里看到一个截图：

![在此处输入图像描述](https://i.stack.imgur.com/SOXqI.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-07T12:10:17.640

我有同样的问题。检查代码中未提交的动画

```
[UIView beginAnimations:nil context:NULL];
... should be committed below 
```

# neural-network - 神经网络的商业应用有哪些

> ID：15806891
> 
> 赞同：3
> 
> 时间：2013-04-04T09:06:54.810
> 
> 标签：neural-network, business-intelligence

我发现越来越难找到有关神经网络业务应用的任何具体材料。这是有道理的，因为许多企业都试图对自己保密，但是，我一直想知道以下问题：企业如何使用神经网络以及哪些具体示例显示了它们的用法？

如果有人可以就此事提供一些启示，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T10:36:24.210

使用神经网络的大地分类试图从多光谱卫星和其他成像中推断出有用的信息。结果用于农业、采矿、土木工程、模拟等。一些搜索结果见[此处](http://www.google.com/#hl=en&q=geodetic+classification+using+neural+networks)。

# multithreading - Hibernate 的线程问题

> ID：15806893
> 
> 赞同：2
> 
> 时间：2013-04-04T09:06:58.383
> 
> 标签：multithreading, hibernate, session, concurrency, transactions

我在使用 Hibernate 时遇到了一种奇怪的行为。我已经将我的头撞到墙上一段时间了，并且将奖励任何导致 +100 赏金解决方案的答案。

我有一个 JAX-RS (Jersey) REST 服务器，带有一个过滤器，每个请求关联一个 Hibernate 会话。

在一个请求中，客户端使用一个会话（和一个事务）发布一些存储在数据库中的数据。在随后的调用中，客户端尝试获取此实体，但 Hibernate 找不到它。

**一些观察：**

*   如果我同时运行多个客户端，我只能重现这一点。我从来没有通过一次运行一个客户端来重现它。）

*   我**可以**在数据库中看到实体 ID，如果我重新启动服务器，那么 Hibernate 应该会找到该实体。

*   如果我使用大小为 1 的线程池（无论我同时运行多少个客户端），则不会发生错误。

这是代码，带有一些日志记录：

```
chargeables.setId(new SecureRandom().nextLong());

System.out.printf("%s,  session: %s  [%s]%n",
                  Thread.currentThread(),
                  System.identityHashCode(session),
                  "session.beginTransaction()");

session.beginTransaction();

System.out.printf("%s,  session: %s  [%s]%n",
                  Thread.currentThread(),
                  System.identityHashCode(session),
                  "session.save(id = "+chargeables.getId()+")");

session.save(chargeables);

System.out.printf("%s,  session: %s  [%s]%n",
                  Thread.currentThread(),
                  System.identityHashCode(session),
                  "session.getTransaction().commit()");

session.getTransaction().commit(); 
```

获取实体的代码：

```
System.out.printf("%s,  session: %s  [%s]%n",
                  Thread.currentThread(),
                  System.identityHashCode(session),
                  "session.get("+id+")");

Chargeables entity = (Chargeables) session.get(Chargeables.class, id);

if (entity == null)
    System.out.printf("%s,  session: %s  [%s]%n",
                      Thread.currentThread(),
                      System.identityHashCode(session),
                      "ENTITY NOT FOUND!"); 
```

现在这里是结果日志的摘录（带有一些额外的打开/关闭会话输出）：

```
Thread[Grizzly(5),5,main],  session:  2041842357  [factory.openSession()]
Thread[Grizzly(5),5,main],  session:  2041842357  [session.beginTransaction()]
Thread[Grizzly(5),5,main],  session:  2041842357  [session.save(id = 7939229356942262438)]
Thread[Grizzly(5),5,main],  session:  2041842357  [session.getTransaction().commit()]
Thread[Grizzly(5),5,main],  session:  2041842357  [session.close()]
[...]
Thread[Grizzly(7),5,main],  session:  1717445911  [factory.openSession()]
Thread[Grizzly(7),5,main],  session:  1717445911  [session.get(7939229356942262438)]
Thread[Grizzly(7),5,main],  session:  1717445911  [ENTITY NOT FOUND!]
Thread[Grizzly(7),5,main],  session:  1717445911  [session.close()] 
```

我到底为什么要达到`ENTITY NOT FOUND!`？

* * *

Hibernate 版本：4.1.9.Final
MySQL 版本：14.14 Distrib 5.5.29

* * *

映射文件`Chargeables`：

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
       "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
       "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">

<hibernate-mapping
   default-cascade="all"
   package="se.package.common.chargeables"
   default-lazy="false">

    <class name="Chargeables">

        <id name="id" type="long">
            <generator class="assigned"/>
        </id>

        <property name="startTimeStamp" />
        <property name="endTimeStamp" />

        <list name="chargeables">
            <key column="chargeableId" />
            <list-index column="pos" />
            <many-to-many class="Chargeable"/>
        </list>

    </class>

    <class name="Chargeable">

        <id column="id" type="long">
            <generator class="native"/>
        </id>

        <discriminator />

        <property name="timestamp" />

    </class>

    <subclass name="DataTransfer" extends="Chargeable">
        <property name="bytesSent" />
        <property name="bytesReceived" />
    </subclass>

    <subclass name="TelephonyChargeable" extends="Chargeable">
        <many-to-one name="num" />
    </subclass>

    <subclass name="Call" extends="TelephonyChargeable">
        <property name="duration" />        
    </subclass>

    <subclass name="OutgoingCall" extends="Call" />
    <subclass name="IncomingCall" extends="Call" />

    <subclass name="Message" extends="TelephonyChargeable" />

    <subclass name="Sms" extends="Message" />
    <subclass name="IncomingSms" extends="Sms" />
    <subclass name="OutgoingSms" extends="Sms" />

    <subclass name="Mms" extends="Message" />
    <subclass name="IncomingMms" extends="Mms" />
    <subclass name="OutgoingMms" extends="Mms" />

</hibernate-mapping> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:08:27.973

恕我直言，这是一个隔离问题。您的第二个会话在第一个事务提交之前开始。由于默认休眠隔离级别为 read_commited，因此第二个会话无法检索实体。
你是如何在 2 个线程之间传递 id 的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T11:33:50.530

如果能看到数据库中的commit，则不可能是MySQL级别的隔离问题：控制台操作也是客户端操作，运行时没有特殊权限，所以符合你选择的隔离策略。

在寻找解决方案时，我发现[Hibernate 提供了一些缓存数据库结果](https://stackoverflow.com/questions/337072/what-is-first-and-second-level-caching-in-hibernate)的工具：实际上那里实现了 2 级缓存。也许您的休眠安装捆绑了缓存机制？

第一级在每个会话的基础上工作，这与您在一个线程上运行代码时观察到的行为一致，并且似乎恰好在默认情况下被激活。我不精通 Hibernate，我不能肯定地说，但我认为您的设置将第一级缓存设置为只读模式，而您希望它处于读写模式。

# ios - ios中使用ZBarReaderViewController的条码结果不一致

> ID：15806897
> 
> 赞同：3
> 
> 时间：2013-04-04T09:07:05.547
> 
> 标签：ios, xcode, zbar-sdk

我正在做一个 iOS 应用程序，我必须在其中扫描条形码。我使用 ZBarReaderViewController 来扫描条形码。有时它会准确地给出结果，但有时会给出像**&7&#,Ac9**这样的未知值。我的图像是![在此处输入图像描述](https://i.stack.imgur.com/4CKRC.jpg)我的代码是

```
 -(IBAction)scanBarCode:(id)sender
{
reader = [ZBarReaderViewController new];
     reader.readerDelegate = self;
     reader.supportedOrientationsMask = ZBarOrientationMaskAll;
    reader.cameraFlashMode = UIImagePickerControllerCameraFlashModeOff;  

if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone && [UIScreen mainScreen].bounds.size.height * [UIScreen mainScreen].scale >= 1136)
    [reader.readerView setScanCrop:(CGRect){ { 0.25, 0.08 }, { 0.07, 0.84} }];//.25
else
    [reader.readerView setScanCrop:(CGRect){ { 0.23, 0.08 }, { 0.09, 0.84} }];

 ZBarImageScanner *scanner = reader.scanner;
 // TODO: (optional) additional reader configuration here

 // EXAMPLE: disable rarely used I2/5 to improve performance
 /*[scanner setSymbology: ZBAR_I25
 config: ZBAR_CFG_ENABLE
 to: 0];*/

//swetha test
[scanner setSymbology: 0
               config: ZBAR_CFG_ENABLE
                   to: 0];
// Enable EAN 13
[scanner setSymbology: ZBAR_EAN13
               config: ZBAR_CFG_ENABLE
                   to: 1];
// Enable UPC-A
[scanner setSymbology: ZBAR_UPCA
               config: ZBAR_CFG_ENABLE
                   to: 1];
// Enable Code 128
[scanner setSymbology: ZBAR_CODE128
               config: ZBAR_CFG_ENABLE
                   to: 1];
 [self presentViewController:reader animated:YES completion:nil];
 [reader release]; 
```

}

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
     id<NSFastEnumeration> results =
     [info objectForKey: ZBarReaderControllerResults];
     ZBarSymbol *symbol = nil;
     for(symbol in results)
     // EXAMPLE: just grab the first barcode
     break;

     // EXAMPLE: do something useful with the barcode data
     serialnumber.text = symbol.data;

     // EXAMPLE: do something useful with the barcode image
     //resultImage.image =
     //[info objectForKey: UIImagePickerControllerOriginalImage];

     // ADD: dismiss the controller (NB dismiss from the *reader*!)
     barcodeClicked = 0;

     [picker dismissViewControllerAnimated:YES completion:nil];
} 
```

如果我不清楚，请告诉我。提前致谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-26T00:27:24.280

我的 imagepickerControll 函数如下：

```
- (void) imagePickerController: (UIImagePickerController*)reader didFinishPickingMediaWithInfo: (NSDictionary*) info {
  @try {
    id<NSFastEnumeration> results = [info objectForKey: ZBarReaderControllerResults];
    for(id obj in results) {
      ZBarSymbol *symbol = obj;
      serialnumber.text = [symbol data];
    }
  }
  @catch (NSException *ex) {
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:[NSString stringWithFormat:@"%@",ex]
                                                delegate:self cancelButtonTitle:@"OK" otherButtonTitles: nil];
    [alert show];
  }
  barcodeClicked = 0;
  [reader dismissViewControllerAnimated:YES completion:nil];  
} 
```

我强烈建议使用 try-catch 并检查所有结果，因为如果它们在附近，它可能会解释 2 个不同的条形码，并将对象解析为 ZBarSymbol。

# connection - 如何知道大多数路由器所需的保持活动间隔？

> ID：15806898
> 
> 赞同：2
> 
> 时间：2013-04-04T09:07:06.593
> 
> 标签：connection, router, intervals, nat, keep-alive

现在的大多数设备都在 NAT 之后。当我们与服务器建立连接时，路由器将为该连接创建映射并保持该映射活动一段时间。为了保持这个映射，我们必须定期主动发送保持活动数据包。

如何知道需要的保持活动间隔？这个间隔在协议（UDP，TCP，...）之间是否不同？有文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T04:33:47.133

我看到这篇论文[TCP Wake-Up](http://www.pasieronen.com/publications/NRCTR2008002.pdf)给出了一个一般性的答案

```
The connection state timeout values vary from product to 
product, but typical values are 30…180 seconds for UDP and 
30…60 minutes for TCP [8]. This implies that applications 
using UDP need to send keep-alive messages much more 
frequently than those based on TCP 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-17T00:38:32.057

这变化很大，但我从来没有遇到过一个标准的 ISP 家庭路由器，它保持开放 TCP 超过 10m 或一个开放 UDP 超过 3m，所以我根本不会接受 4.5-5m 的建议。

值得考虑的是，大多数 WebSockets 实现都使用 20 秒的保活，尽管这是针对路由器和 Web 服务器超时执行的，因此它可能比您真正需要的 NAT 保活更保守。

我在一些基于移动和家庭的 UDP 应用程序中使用了 60 年代，并获得了关于偶尔失败的反馈。转移到 30 秒没有看到，转移到 45 秒只看到最少数量的重新连接失败。

# asp.net - 删除没有子节点且它不是 ASP.NET 中的表单的父节点

> ID：15806899
> 
> 赞同：1
> 
> 时间：2013-04-04T09:07:10.010
> 
> 标签：asp.net

我需要删除没有子节点的父节点，它不是表单的链接，但在处理时总是显示“集合已修改；枚举操作可能无法执行。” 解决这个问题的最佳方法是什么？

```
 Private Sub checkEmptyNode(ByVal T As TreeView)
    For Each menuNode As TreeNode In T.Nodes
        If menuNode.ChildNodes.Count > 0 Then
            For Each childNode As TreeNode In menuNode.ChildNodes
                If childNode.ChildNodes.Count > 0 Then
                    RemoveEmptyNode(childNode.ChildNodes)
                Else
                    If childNode.NavigateUrl.Trim = "" Then
                        childNode.Parent.ChildNodes.Remove(childNode)
                    End If
                End If
            Next
        Else
            If menuNode.NavigateUrl.Trim = "" Then
                T.Nodes.Remove(menuNode)
            End If
        End If
    Next
End Sub

Private Sub RemoveEmptyNode(ByVal TN As TreeNodeCollection)
    For Each subChildNode As TreeNode In TN
        If subChildNode.ChildNodes.Count > 0 Then
            RemoveEmptyNode(subChildNode.ChildNodes)
        Else
            If subChildNode.NavigateUrl.Trim = "" Then
                TN.Remove(subChildNode)
            End If
        End If
    Next
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:28:03.483

您应该使用`for loop`而不是`for each loop`.
因为您无法使用C# 中的`foreach loop`
更多详细信息来修改正在循环的集合
[，为什么我不能在 foreach 循环中修改值类型实例的成员？](https://stackoverflow.com/questions/5650705/in-c-why-cant-i-modify-the-member-of-a-value-type-instance-in-a-foreach-loop)
[从循环中更改集合](https://stackoverflow.com/questions/2631229/changing-a-collection-from-within-a-loop)

```
Private Sub checkEmptyNode(ByVal T As TreeView)
    For i As Integer = 0 To T.Nodes.Count - 1
If T.Nodes(i).ChildNodes.Count > 0 Then
    For j As Integer = 0 To T.Nodes(i).ChildNodes.Count - 1

        If T.Nodes(i).ChildNodes(j).ChildNodes.Count > 0 Then
            RemoveEmptyNode(T.Nodes(i).ChildNodes(j).ChildNodes)
        Else
            If String.IsNullOrEmpty(T.Nodes(i).ChildNodes(j).NavigateUrl.Trim()) Then
                T.Nodes(i).ChildNodes(j).Parent.ChildNodes.Remove(T.Nodes(i).ChildNodes(j))
            End If
        End If
    Next
Else
    If String.IsNullOrEmpty(T.Nodes(i).NavigateUrl.Trim()) Then
        T.Nodes.Remove(T.Nodes(i))
    End If
End If
  Next
End Sub

Private Sub RemoveEmptyNode(TN As TreeNodeCollection)
For i As Integer = 0 To TN.Count - 1
    If TN(i).ChildNodes.Count > 0 Then
        RemoveEmptyNode(TN(i).ChildNodes)
    Else
        If String.IsNullOrEmpty(TN(i).NavigateUrl.Trim()) Then
            TN.Remove(TN(i))
        End If
    End If
Next
End Sub 
```

# android - HttpURLConnection 发送 POST 请求两次

> ID：15806903
> 
> 赞同：4
> 
> 时间：2013-04-04T09:07:15.853
> 
> 标签：android

自 Android 4.0 以来，使用 HttpURLConnection 是 http 请求的首选方式。

**问题**

在发送 POST 请求时，我们的效果是，在大约 4 分钟的空闲时间之后，请求被发送了两次。

以下代码段重现了该问题：

```
公共类 MainActivity 扩展 Activity {

  @覆盖
  受保护的无效onCreate（捆绑保存实例状态）{
    super.onCreate( 保存实例状态 );
    按钮按钮 = 新按钮（此）；
    button.setText("执行 POST 请求");
    button.setOnClickListener（新的 OnClickListener（）{

      @覆盖
      公共无效 onClick（查看 v）{

        新线程（新可运行（）{

          @覆盖
          公共无效运行（）{
            makePostRequest();
          }

        } ）。开始（）;
      }
    });
    设置内容视图（按钮）；
  }

  私人无效 makePostRequest() {
    尝试 {
      字符串目标 = "http://server.com/path";
      System.out.println("发送 POST 请求：" + target );
      URL url = 新 URL（目标）；
      HttpURLConnection conn = ( HttpURLConnection )url.openConnection();
      conn.setDoOutput(真);
      System.out.println("响应：" + conn.getResponseCode());
    } 捕捉（异常 e）{
      e.printStackTrace();
    }
  }
}

```

重现：点击按钮。等四分钟。再次按下按钮。第二个按钮点击的 POST 请求被发送到服务器两次。

这个问题似乎只出现在 Android 4.1 及更高版本上。无法在 4.0 上重现它。

**解决方案**

解决了我们将系统属性设置`http.keepAlive`为`false`. 因此 POST 请求仍会发送“Connection: keep-alive”标头参数，但 HttpURLConnection 在 4 分钟空闲期后不会尝试重新发送 POST 请求。

**开放式问题**

这是android上url连接的预期行为吗？我会假设 POST 请求永远不会重试。必须配置它（通过系统属性）很容易出错。

# perl - 多客户端环境中的事件通知

> ID：15806908
> 
> 赞同：0
> 
> 时间：2013-04-04T09:07:29.750
> 
> 标签：perl, events, queue

我正在使用等待 IMAP 空闲事件的 perl IMAP 客户端，它工作得很好。

我想将这些事件作为消息排队，并尽快将它们提供给 Web 客户端，它们应该能够从队列中读取它们或等待新消息。客户端也在决定应该从队列中删除哪些消息。

有没有这个功能的模块？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:02:17.603

回答这个问题的特定于 IMAP 的部分——您希望您的网络邮件客户端“从队列中删除事件”的建议看起来非常可疑。确保您了解 IMAP 的语义，因为没有多少“事件”可以从那里安全地“删除”。

# perl - 我应该点击哪个按钮？

> ID：15806910
> 
> 赞同：0
> 
> 时间：2013-04-04T09:07:36.980
> 
> 标签：perl, mechanize

如果我单击“显示更多产品”，我正在尝试抓取一个加载页面的网站。我正在使用 perl 机械化。这是我从网站上得到的内容。我应该在 click_button() 中指定什么以便单击显示更多产品按钮？

```
 <div id='lPage' style='display:none' class='lpge'>1</div>
  <div class='clearfix'>
    <div id='divMoreProducts' onclick='javascript:showMoreProductsAjax("All Products")' class='showMoreProd' style='display:none;'>
      <span>Show more products</span>
    </div>
    <div id='divMoreProductsLoader' style='display:none;text-align:center'>
      <img src='http://img2.babyoye.com/skin/frontend/default/babyoye_2012/images/ajax-more-loader.gif'>
    </div>
  </div>
  <div id='botControl'>
    <span style='float:right'><strong>Search result </strong>133</span>
  </div>
</article>
<div id='lPage' style='display:none' class='lpge'>1</div>
<script type="text/javascript">var enable_show_more_product = true;</script>
<script type="text/javascript">
  jQuery(document).ready(function(){
    try {
      jQuery("pre.loadme").lazyLoad();
    } catch(e) {
    }
  });
  jQuery(function () {
    jQuery(".showMoreProd").mousedown(function (){
      jQuery(this).addClass("showMoreProdImp");
    }).mouseup(function () {
      jQuery(this).removeClass("showMoreProdImp");
    });
  });
</script>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T09:15:04.003

在浏览器中**单击此按钮后，检查实际发出的 HTTP 请求**非常容易，只需*在代码中使用以下命令重复此类请求*：

```
$mech->post( URL, Content => {...} ); 
```

我正在使用 Firefox 的[HTTPFox](https://addons.mozilla.org/en-us/firefox/addon/httpfox/)扩展来处理这些事情......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T14:57:06.063

WWW::Mechanize，正如用户手册所述，没有启用 Javascript。您正在尝试单击将触发 Ajax 请求的按钮，因此从 WWW::Mechanize 中“单击”它不会得到任何结果。

在这种情况下，您需要首先分析整个事情，试图了解 Ajax 调用实际执行的请求类型。最简单的方法是使用允许您检查单个请求的浏览器。就个人而言，我喜欢 Google Chrome 的做法：

1.  在 Chrome 中打开页面
2.  按 Ctrl - Shift - I 打开开发者面板
3.  单击面板中的“网络”选项卡，然后单击面板底部的“XHR”按钮。

现在，每次单击发出 Ajax 请求的按钮时，您都会在左侧看到每个请求的列表。如果您单击其中任何一个，您可以看到确切的请求（标​​题、表单字段、请求、响应、时间等）。

并非您在其中看到的所有内容都需要设置。通常，您只需要找到包含触发服务器 Ajax 类型响应的命令的表单字段。其余的通常是 cookie 和 www::Mechanize 已经为您处理的其他东西。

此外，不要忘记`$mech->back()`在每次发布 Ajax 请求后调用，这样所有当前表单字段都会返回到承载这些按钮的页面的状态。

HTH :-)

弗朗西斯科

# cordova - 是否可以从phonegap将文件保存在缓存目录中？

> ID：15806912
> 
> 赞同：1
> 
> 时间：2013-04-04T09:07:50.037
> 
> 标签：cordova, caching, directory

是否可以从phonegap将文件保存在缓存目录中？

谢谢

紫皮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-03T17:43:21.010

你可以做这样的事情。Juste 用 cordova.file.cacheDirectory 替换 cordova.file.dataDirectory （我认为这是正确的名称）

```
window.resolveLocalFileSystemURL(
    cordova.file.dataDirectory, 
    function gotDir(dir) {
        console.log("Data directory located");
        dir.getFile(sessionID + ".html", {create:true},
                    function(file) {
                        console.log("got the file", file);
                        file.createWriter(this.gotFileWriter,
                                          function fail() {
                                              console.log("Unable to create the writer");
                                         });
                });
    }
    function fail() 
        console.log("Unable to locate the cache");
}); 
```

# ios - 故意在一个块中强引用，这是个好主意吗？

> ID：15806916
> 
> 赞同：0
> 
> 时间：2013-04-04T09:08:04.143
> 
> 标签：ios, objective-c, block

所以我有 2 个视图，每个视图中都有一个相同类型的对象。我在第一个视图中使用了一个块来设置对象，并且当我转到它时我将此块传递给第二个视图，以便可以在第二个视图中为对象运行完全相同的设置。（在某些情况下，它是一张地图，我在第一张地图上添加了标记和路径，然后我在第二个屏幕上继续使用地图的放大版本，该地图将具有相同的标记和路径）

现在有一个变量我只想存在于第一个视图中，但在第二个视图中仍然有效，它将是一个特殊标记，可以从第一个视图更改其位置（仅在后台更新 gps在第一个视图中），更改将出现在第二个视图中。

所以我实际上要做的是：

```
@implementation WhereAmIView 
{ 
RMMarker *iAmHere;
void (^setupMap)(RMMapView*);
} 

- (void) setup {

//__block RMMarker *_iAmHere = iAmHere;

    setupMap = ^(RMMapView *mapViewBlock){
        if(!iAmHere)
            iAmHere = [[RMMarker alloc]initWithUIImage:[UIImage imageNamed:@"marker-red.png"] anchorPoint:CGPointMake(0.5, 1.0)];

        //there is a bunch of other stuff i have omitted here, but the important bit is above this comment
        [iAmHere setTextForegroundColor:[UIColor blueColor]];
        [iAmHere changeLabelUsingText:@"You are Here"];
        [markerManager addMarker:iAmHere AtLatLong:appDelegate.currentLocation.coordinate]; //dont worry about this stuff, just put it here to show that stuff is happening
    }

    setupMap(mapView);
}

- (IBAction)enlargeMap:(id)sender {

    MainViewController *mainViewController = (MainViewController*)[self viewController];
    FullScreenMapViewController *fsmvc = [[FullScreenMapViewController alloc] initWithCenter:CLLocationCoordinate2DMake(0, 0) andMap:@"tokai2.db"];
    fsmvc->setupMap = setupMap; //this gets run in its viewDidAppear effectively
    [mainViewController presentModalViewController:fsmvc animated:true];
} 
```

所以我这样使用是否安全`iAmHere`，因为这个块只会存在于这个视图和下一个视图中，所以技术上保留周期无关紧要？如果我使用在代码中而不是在块`_iAmHere`中注释掉的那个，是否会在第一个视图中更改为，对第二个视图中的进行更改？可能根本不可能在两个地图视图中添加相同的标记，但理论上这可行吗？`iAmHere``iAmHere``_iAmHere`

或者也许有更好的方法可以完全做到这一点......

# c# - 对基类强制覆盖方法

> ID：15806921
> 
> 赞同：1
> 
> 时间：2013-04-04T09:08:15.883
> 
> 标签：c#, inheritance, interface, partial-classes, overriding

我有以下代码：

```
public partial class Root : ICustomInterface
{
    public virtual void Display()
    {
        Console.WriteLine("Root");
        Console.ReadLine();
    }
}
public class Child : Root
{
    public override void Display()
    {
        Console.WriteLine("Child");
        Console.ReadLine();
    }
}
class Program
{
    static void Main(string[] args)
    {
        Root temp;
        temp = new Root();
        temp.Display();
    }
}

Output: "Root"
Desired output: "Child" 
```

当我实例化一个`Root`对象并调用`Display()`我想要显示被覆盖的方法的方法时，`Child`这是否可能。

我需要这个，因为我必须创建一个插件，它是基本代码的扩展，并且`Display()`使类的方法无效`Root`并且只实现插件的方法`Child`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T09:10:02.543

> 当我实例化一个 Root 对象并调用 Display() 方法时，我想在 Child 中显示被覆盖的方法，这可能吗。

您需要创建`Child`类的实例。

```
Root temp;
temp = new Child(); //here
temp.Display(); 
```

目前您的对象`temp`持有基类的引用，它对子类一无所知，因此是基类的输出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T09:12:32.503

> 当我实例化一个 Root 对象并调用 Display() 方法时，我想在 Child 中显示被覆盖的方法，这可能吗。

不。假设您添加另一个类：

```
public class Child2 : Root
{
    public override void Display()
    {
        Console.WriteLine("Child 2");
        Console.ReadLine();
    }
} 
```

那么您希望为实例调用哪个方法（`Child.Display()`或）？`Child2.Display()``Root`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T09:11:11.197

您当前的代码不可能，因为您正在创建一个`Root`实例而不是一个`Child`实例。因此它不知道`Display`里面的方法`Child`。

您需要创建一个`Child`类：

```
Root temp;
temp = new Child();
temp.Display(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-04T09:11:53.333

这不是 OOP 的工作方式。您不能在基类中使用被覆盖的方法。如果你这样做：

```
static void Main(string[] args)
{
    Root temp;
    temp = new Child();
    temp.Display();
} 
```

你应该得到你想要的输出。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-04T09:11:55.643

不，您不可能实例化一个子对象而不是根

```
Root temp;
temp = new Child();
temp.Display(); 
```

如果您不想修改 temp 那么您必须修改 Root 显示方法以打印“child”而不是 root

# css - 如何将文本向左旋转 90 度并根据 html 中的文本调整单元格大小

> ID：15806925
> 
> 赞同：86
> 
> 时间：2013-04-04T09:08:24.133
> 
> 标签：css, html, html-table

假设我有一些行和列的表格，所以我想在单元格中旋转文本，如下所示
： ![在此处输入图像描述](https://i.stack.imgur.com/vJoVh.png)

问题是当我使用样式旋转文本时：

```
#rotate {
     -moz-transform: rotate(-90.0deg);  /* FF3.5+ */
       -o-transform: rotate(-90.0deg);  /* Opera 10.5 */
  -webkit-transform: rotate(-90.0deg);  /* Saf3.1+, Chrome */
             filter:  progid:DXImageTransform.Microsoft.BasicImage(rotation=0.083);  /* IE6,IE7 */
         -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=0.083)"; /* IE8 */ 
```

一切都像这样搞砸了

**html代码：**

```
<table cellpadding="0" cellspacing="0" align="center">
    <tr>
        <td id='rotate'>10kg</td>
        <td >B</td>
        <td >C</td>
        <td>D</td>
        <td>E</td>
    </tr>
    <tr>
        <td id='rotate'>20kg</td>
        <td>G</td>
        <td>H</td>
        <td>I</td>
        <td>J</td>
    </tr>
    <tr>
        <td id='rotate'>30kg</td>
        <td>L</td>
        <td>M</td>
        <td>N</td>
        <td>O</td>
    </tr>

</table> 
```

**CSS：**

```
<style type="text/css">
td {
    border-collapse:collapse;
    border: 1px black solid;
}
tr:nth-of-type(5) td:nth-of-type(1) {
    visibility: hidden;
}
#rotate {
     -moz-transform: rotate(-90.0deg);  /* FF3.5+ */
       -o-transform: rotate(-90.0deg);  /* Opera 10.5 */
  -webkit-transform: rotate(-90.0deg);  /* Saf3.1+, Chrome */
             filter:  progid:DXImageTransform.Microsoft.BasicImage(rotation=0.083);  /* IE6,IE7 */
         -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=0.083)"; /* IE8 */
}
</style> 
```

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2017-11-12T03:09:45.523

不计算高度。严格的 CSS 和 HTML。`<span/>`仅适用于 Chrome，因为 chrome 无法更改`<th/>`.

```
th 
{
  vertical-align: bottom;
  text-align: center;
}

th span 
{
  -ms-writing-mode: tb-rl;
  -webkit-writing-mode: vertical-rl;
  writing-mode: vertical-rl;
  transform: rotate(180deg);
  white-space: nowrap;
}
```

```
<table>
  <tr>
    <th><span>Rotated text by 90 deg.</span></th>
  </tr>
</table>
```

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2013-04-04T09:17:40.077

您可以通过将旋转 CSS 应用于内部元素，然后调整元素的高度以匹配其宽度，因为该元素已旋转以适应`<td>`.

还要确保将您的课程更改`id` `#rotate`为课程，因为您有多个课程。

![一个 4x3 表格，第一列中的标题旋转了 90 度](https://i.stack.imgur.com/smB5W.png)

```
$(document).ready(function() {
  $('.rotate').css('height', $('.rotate').width());
});
```

```
td {
  border-collapse: collapse;
  border: 1px black solid;
}
tr:nth-of-type(5) td:nth-of-type(1) {
  visibility: hidden;
}
.rotate {
  /* FF3.5+ */
  -moz-transform: rotate(-90.0deg);
  /* Opera 10.5 */
  -o-transform: rotate(-90.0deg);
  /* Saf3.1+, Chrome */
  -webkit-transform: rotate(-90.0deg);
  /* IE6,IE7 */
  filter: progid: DXImageTransform.Microsoft.BasicImage(rotation=0.083);
  /* IE8 */
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=0.083)";
  /* Standard */
  transform: rotate(-90.0deg);
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<table cellpadding="0" cellspacing="0" align="center">
  <tr>
    <td>
      <div class='rotate'>10kg</div>
    </td>
    <td>B</td>
    <td>C</td>
    <td>D</td>
    <td>E</td>
  </tr>
  <tr>
    <td>
      <div class='rotate'>20kg</div>
    </td>
    <td>G</td>
    <td>H</td>
    <td>I</td>
    <td>J</td>
  </tr>
  <tr>
    <td>
      <div class='rotate'>30kg</div>
    </td>
    <td>L</td>
    <td>M</td>
    <td>N</td>
    <td>O</td>
  </tr>

</table>
```

**JavaScript**

等价于纯 JavaScript 中的上述内容如下：

[jsFiddle](http://jsfiddle.net/Tyriar/dTkqP/1/)

```
window.addEventListener('load', function () {
    var rotates = document.getElementsByClassName('rotate');
    for (var i = 0; i < rotates.length; i++) {
        rotates[i].style.height = rotates[i].offsetWidth + 'px';
    }
}); 
```

* * *

## 回答 #3

> 赞同：49
> 
> 时间：2017-01-25T05:19:20.460

[Daniel Imms](https://stackoverflow.com/users/1156119/daniel-imms)的回答在将 CSS 旋转应用于内部元素方面非常出色。但是，有可能以**不需要 JavaScript 并使用更长的文本字符串的**方式来完成最终目标。

通常，在第一个表格列中使用垂直文本的全部原因是在较短的水平空间中放置一长行文本，并与高行内容（如您的示例）或多行内容（我将在本例中使用）。

[![在此处输入图像描述](https://i.stack.imgur.com/7zKOz.png)](https://i.stack.imgur.com/7zKOz.png)

通过在父 TD 标签上使用“.rotate”类，我们不仅可以旋转内部 DIV，还可以在父 TD 标签上设置一些 CSS 属性，强制所有文本保持在一行，保持宽度为1.5em。然后我们可以在内部 DIV 上使用一些负边距来确保它很好地居中。

```
td {
    border: 1px black solid;
    padding: 5px;
}
.rotate {
  text-align: center;
  white-space: nowrap;
  vertical-align: middle;
  width: 1.5em;
}
.rotate div {
     -moz-transform: rotate(-90.0deg);  /* FF3.5+ */
       -o-transform: rotate(-90.0deg);  /* Opera 10.5 */
  -webkit-transform: rotate(-90.0deg);  /* Saf3.1+, Chrome */
             filter:  progid:DXImageTransform.Microsoft.BasicImage(rotation=0.083);  /* IE6,IE7 */
         -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=0.083)"; /* IE8 */
         margin-left: -10em;
         margin-right: -10em;
}
```

```
<table cellpadding="0" cellspacing="0" align="center">
    <tr>
        <td class='rotate' rowspan="4"><div>10 kilograms</div></td>
        <td>B</td>
        <td>C</td>
        <td>D</td>
        <td>E</td>
    </tr>
    <tr>
        <td>G</td>
        <td>H</td>
        <td>I</td>
        <td>J</td>
    </tr>
    <tr>
        <td>L</td>
        <td>M</td>
        <td>N</td>
        <td>O</td>
    </tr>
    <tr>
        <td>Q</td>
        <td>R</td>
        <td>S</td>
        <td>T</td>
    </tr>

    <tr>
        <td class='rotate' rowspan="4"><div>20 kilograms</div></td>
        <td>B</td>
        <td>C</td>
        <td>D</td>
        <td>E</td>
    </tr>
    <tr>
        <td>G</td>
        <td>H</td>
        <td>I</td>
        <td>J</td>
    </tr>
    <tr>
        <td>L</td>
        <td>M</td>
        <td>N</td>
        <td>O</td>
    </tr>
    <tr>
        <td>Q</td>
        <td>R</td>
        <td>S</td>
        <td>T</td>
    </tr>

    <tr>
        <td class='rotate' rowspan="4"><div>30 kilograms</div></td>
        <td>B</td>
        <td>C</td>
        <td>D</td>
        <td>E</td>
    </tr>
    <tr>
        <td>G</td>
        <td>H</td>
        <td>I</td>
        <td>J</td>
    </tr>
    <tr>
        <td>L</td>
        <td>M</td>
        <td>N</td>
        <td>O</td>
    </tr>
    <tr>
        <td>Q</td>
        <td>R</td>
        <td>S</td>
        <td>T</td>
    </tr>

</table>
```

使用此解决方案要记住的一件事是，**如果行（或跨行）的高度比第一列中的垂直文本短，它就不能很好地工作**。如果您跨越多行或者您有很多内容创建高行，则效果最佳。

在[jsFiddle](http://jsfiddle.net/robertstaddon/dTkqP/889/)上玩得开心。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-02-05T06:49:51.453

不幸的是，虽然我认为这些答案可能对我有用，但我一直在努力寻找解决方案，因为我在响应式表格中使用表格 - 其中使用了 overflow-x。

因此，考虑到这一点，请查看此链接以获得更简洁的方式，它没有奇怪的宽度溢出问题。它最终对我有用，并且很容易实现。

[https://css-tricks.com/rotated-table-column-headers/](https://css-tricks.com/rotated-table-column-headers/)

# ios - iCloud 低速检索数据

> ID：15806935
> 
> 赞同：1
> 
> 时间：2013-04-04T09:08:47.180
> 
> 标签：ios, core-data, icloud, magicalrecord

我在我的应用程序中使用 Core Date 和 iCloud，但检索数据的速度太慢。为了创建核心数据堆栈，我使用了 MagicalRecords 方法

```
[MagicalRecord setupCoreDataStackWithiCloudContainer:nil localStoreNamed:@"base"]; 
```

我可以检索不在主线程中的数据吗？加载需要很多时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T13:44:47.257

只需使用 GCD。

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    [MagicalRecord setupCoreDataStackWithiCloudContainer:nil 
                                         localStoreNamed:@"base"];

    dispatch_async(dispatch_get_main_queue(), ^{
          // update your UI if necessary
    });
}); 
```

# sql - 为什么即使更新语句失败，此 SQL Server 事务仍会提交

> ID：15806936
> 
> 赞同：4
> 
> 时间：2013-04-04T09:09:00.447
> 
> 标签：sql, transactions

我有这个交易：

```
BEGIN TRAN;
Update Job set JobTitle = 'wonderfullivin' where JobId = 1271;
Update Job set LastTransactionDate = null where JobId = 1271;
COMMIT; 
```

其中第二条语句必须失败，因为 LastTransactionDate 设置为 NOT NULL。但是，当我查看事务日志时，我看到事务已提交。它不应该因为其中一个查询失败而中止吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T09:10:27.803

不。

您需要使用`SET XACT_ABORT ON`来获得您显然期望的行为或添加一些错误处理，并且仅在未发生错误时提交或回滚。

SQL Server 中的错误可能会中止语句、范围、批处理或连接。

在这种情况下，错误只是中止语句，然后继续执行下一条语句。

有关这方面的更多信息，请参阅[SQL 2000 中的错误处理](http://www.sommarskog.se/error-handling-I.html#whathappens)。

# sass - 如何在 phpstorm 中使用指南针？

> ID：15806938
> 
> 赞同：16
> 
> 时间：2013-04-04T09:09:03.233
> 
> 标签：sass, compass-sass, phpstorm

我知道这个问题： [How to add Compass syntax support to Jetbrains PhpStorm?](https://stackoverflow.com/questions/13213631/how-to-add-compass-syntax-support-to-jetbrains-phpstorm#) 但这无济于事。

我只是选择复制文件，在我的项目中更容易。但是phpstorm仍然抱怨指南针。没有罗盘，它使用 ruby​​ 1.9.3 编译 scss 没有问题。我的设置正确吗？

![在此处输入图像描述](https://i.stack.imgur.com/AOZLu.png)

**编辑**：

这是针对 PhpStorm 6-

PhpStorm 7+[支持 Compass](http://www.jetbrains.com/phpstorm/whatsnew)

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-04T11:44:16.747

首先，您链接的问题是关于启用对 Compass 样式导入的支持，这是一种不适用于每个项目的解决方法。

您的问题是关于另一件事：*编译 Compass 项目*。

这两个问题都将在 PHPStorm 的第 7 版中解决，该版本不会很快发布：第 6 版刚刚发布。目前，有许多解决方法。

## 使用 PHPStorm 手动编译 Compass 项目

1.  转到 PHPStorm IDE 设置的**外部工具**部分。
2.  创建一个**新**的外部工具。将其命名为“Compass compile manual”或类似名称。
3.  将**程序**设置为指向您的 Compass 二进制文件。在 Windows 上它就像`C:\Ruby193\bin\compass.bat`，在 Linux 和 Mac 上它可以很简单`compass`。但如果您使用的是 RVM，那么*程序*应该是`bash`.
4.  **参数**字段应该`compile`适用于所有操作系统，除非您使用的是 RVM 。对于 RVM，**参数**应设置为`–login -c "compass compile"`。
5.  **工作目录**字段应设置`$ProjectFileDir$`为。

可以从“**工具**”菜单启动手动编译。您还可以分配一个热键以更快地运行它。确保热键不会与现有热键发生冲突。

## 每当您保存更改时，让 PHPStorm 编译您的项目

1.  确保您拥有最新的 PHPStorm 早期访问预览版。你可以从[这里](http://confluence.jetbrains.com/display/PhpStorm/PhpStorm+Early+Access+Program)下载。
2.  确保您已安装**File Watchers**插件。转到 PHPStorm IDE 设置的**Plugins**部分，查找**File Watchers**。如果它不在列表中，请通过 **Browse repositories**安装它并重新启动 PHPStorm。
3.  如果您还没有这样做，请在 PHPStorm 中打开您的项目。
4.  转到 PHPStorm 项目设置的**File Watchers**部分。
5.  创建一个**新**的文件观察器。使用**自定义**模板。将您的观察者命名为“Compass compile on save”或类似名称。
6.  将**文件类型**设置为 SCSS 或 SASS，具体取决于您在项目中使用的类型。
7.  **将范围**保留为“项目文件”
8.  将**程序**设置为指向您的 Compass 二进制文件。在 Windows 上它就像`C:\Ruby193\bin\compass.bat`，在 Linux 和 Mac 上它可以很简单`compass`。但如果您使用的是 RVM，那么*程序*应该是`bash`.
9.  **Arguments**字段应该`compile`适用于所有操作系统，除非您使用的是 RVM 。对于 RVM，**参数**应设置为`–login -c "compass compile"`. **UPD：** @ezekiel-victor 建议这是：`–login -c "compile --sass-dir=$ProjectFileDir$ --css-dir=$ProjectFileDir$"`.
10.  **工作目录**字段应设置`$ProjectFileDir$`为。
11.  禁用`Check for syntax errors`.
12.  将其余部分留空并保存。

现在，每当您保存对任何 SCSS 或 SASS 文件的更改时，PHPStorm 都会告诉 Compass 编译项目。

**UPD**如果您使用的是 Bundler（`Gemfile`在您的项目中有并且您确实`bundle install`要获取依赖项），您应该使用`bundle exec compass compile`而不是`compass compile`. 这意味着您必须使用`bundle`可执行文件 (`bundle.bat`在 Windows 上) 而不是`compass`( `compass.bat`) 并相应地调整该`Arguments`字段。

## `compass watch`在 OS 控制台中手动运行（推荐）

运行的问题`compass compile`是它很慢，因为每次执行它都会重新编译整个项目。

`compass watch`相反，您可以使用操作系统控制台在项目文件夹中手动运行命令。Compass Watch 将持续监控您的项目的变化。当注意到更改时，它将仅重新编译修改的部分，这要快得多。

Compass Watch 足够智能，不会监控项目中的每个文件。它仅监视由任何非部分文件或递归导入的部分导入的非部分文件（例如`screen.scss`）和部分（例如）。`_layout.scss`

如果您通过网络文件系统处理您的项目（例如，当使用虚拟机或开发服务器运行您的代码时），编译和跟踪更改会变得太慢。因此，使用远程/虚拟机时的最佳选择是`compass watch`在该机器上运行，以便它在本地而不是通过网络文件系统跟踪更改。

## 复活指南针

Compass 缓存它自己的工作以使编译更快。有时缓存与项目内容不一致。这导致 Compass 报告各种奇怪的错误并拒绝编译您的项目。

一旦您觉得 Compass 报告了一个不正确的错误，请执行`compass clean`并重新编译您的项目。清理将清除 Compass 缓存和编译文件，使其从头开始。

您可以`compass clean`在控制台中手动运行或将其添加为 PHPStorm 外部工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-05T15:09:48.613

如果它对任何人有帮助 - 在 Snow Leopard 上，指南针安装在以下目录中（显然路径中的版本号取决于安装的版本）：

```
/Library/Ruby/Gems/1.8/gems/compass-0.12.2/bin/compass 
```

因此，对于**Program:**选项，您可以在那里选择它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T10:40:04.207

请在 JetBrains 问题跟踪器上查看相应票证（支持 Compass）中的评论：即使在当前版本的 IDE 中，也很少有评论说明如何使其工作：

[http://youtrack.jetbrains.com/issue/WEB-5802#comment=27-471454](http://youtrack.jetbrains.com/issue/WEB-5802#comment=27-471454)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-08T10:28:16.890

我正在使用 PhpStorm 2017.1.4

在 PhpStorm 中设置 Ruby 路径变量并启用指南针对我来说不起作用。

我无法使用项目目录中的 compass（“无法运行 Compass”），因为终端无法使用 Ruby 安装目录中的可执行文件解析命令 compass。

[因此，我按照这个说明](http://rubyonwindowsguides.github.io/book/ch01-01.html)永久设置了一个 windows（使用 win10）环境变量。

快速解释：

*   假设你已经安装了 ruby​​ 和 compass。

*   去：`Control Panel -> System -> Advanced System Settings -> Environment Variables...`

*   添加`C:\Ruby22\bin`到您的`PATH`变量

*   重启 PhpStorm

进一步的建议：

如果您从不同的系统导入您的项目，则删除您的`config.rb`文件并`compass init`从项目根目录运行可能会有所帮助。

# php - 是否可以在网页中上传 excel (.xls/.xlsx) 文件并显示？

> ID：15806945
> 
> 赞同：0
> 
> 时间：2013-04-04T09:09:24.120
> 
> 标签：php, excel, upload, embed, xlsx

我想在网页中上传 excel (.xls/.xlsx) 文件并将其显示为 excel。文件可能包含饼图或条形图。我该怎么做？

是否可以从 excel 编辑网页中显示的数据并将其保存在 db 或 excel 文件中？

我正在用 PHP 做这个项目..

编辑：**我的客户的要求是一个与 excel 页面完全一样的界面。他们必须将excel数据直接复制并粘贴到网页中并保存。我已经尝试了许多互联网上可用的 wp 插件和 php 代码。但是没有达到要求。**

请帮助我提出您的建议。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T10:08:58.917

这也很有趣，但对于 java... [http://code.google.com/p/zkspreadsheet/](http://code.google.com/p/zkspreadsheet/)

我想知道你是否可以做一些 php-java 桥接......

或者你可以试试这个 [http://www.simple-groupware.de/cms/Spreadsheet/Home](http://www.simple-groupware.de/cms/Spreadsheet/Home)

[编辑] 同时收集的其他链接......有点有趣

*   [http://blog.dreamcss.com/dev-tools/gelsheet-php-based-web-spreadsheet/](http://blog.dreamcss.com/dev-tools/gelsheet-php-based-web-spreadsheet/)
*   [http://jquerysheet.googlecode.com/svn/branches/3.x/jquery.sheet.html#](http://jquerysheet.googlecode.com/svn/branches/3.x/jquery.sheet.html#)
*   [http://drupal.org/project/sheetnode](http://drupal.org/project/sheetnode)
*   [http://www.zimbra.com/products/ss_document_spreadsheet.html](http://www.zimbra.com/products/ss_document_spreadsheet.html)
*   [http://www.softwaregarden.com/wkcalpha/](http://www.softwaregarden.com/wkcalpha/)
*   [https://www.zoho.com/docs/online-spreadsheet.html](https://www.zoho.com/docs/online-spreadsheet.html)（不是免费的）

[编辑2]

最近的新条目：

*   webodf 电子表格查看器[http://www.webodf.org/about/features.html](http://www.webodf.org/about/features.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T09:20:52.780

使用[PHPExcel](http://www.phpexcel.net)

```
include './Classes/PHPExcel.php';

$inputFileName = 'myExcelFile.xlsx';
$outputFileType = 'HTML';
$outputFileName = 'php://output';

$objPHPExcel = PHPExcel_IOFactory::load($inputFileName);

$objPHPExcelWriter = PHPExcel_IOFactory::createWriter($objPHPExcel,$outputFileType);
$objPHPExcelWriter->save($outputFileName); 
```

这会将 xls 或 xlsx 文件呈现到网页

# xml - 从检索到的 XML 创建哈希

> ID：15806946
> 
> 赞同：1
> 
> 时间：2013-04-04T09:09:26.157
> 
> 标签：xml, ruby-on-rails-3, hash, xml-parsing

我已经阅读了一些帖子，建议您可以使用 Rails 内置方法从 XML 创建哈希

```
from_xml 
```

所以例如我可以做

```
Hash.from_xml(object) 
```

就我而言，我正在从 api 检索 XML 并使用 Nokogiri 解析它，就像这样

```
url = "https://www.google.com/m8/feeds/contacts/default/full?client_id=#{client_id}&access_token=#{current_user.token}&max-results=#{max_results}";
doc = Nokogiri::XML(open(url)) 
```

现在如果我尝试

```
Hash.from_xml(doc) 
```

我收到 REXML 解析错误。这是因为我需要从未解析的 XML 创建哈希吗？

我希望对此有更好的理解，我读过的文件似乎水平很高，如果有任何可以提供基本解释或指向可以提供的资源，我可以阅读它并希望获得更好的理解

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T09:15:00.997

它期待一个字符串。

尽管[此文档页面](http://apidock.com/rails/Hash/from_xml/class)在其方法描述中没有这样说，但从注释中的示例可以清楚地看出，输入应该是 XML 字符串。

你应该能够做到：

```
Hash.from_xml(open(url).read) 
```

**编辑：**看来，在 Rails 下，Nokogiri 有一个`to_hash`方法。所以你也可以这样做：

```
doc = Nokogiri::XML(open(url))
xml_hash = doc.to_hash 
```

# java - 是否可以在不提示输入密码的情况下在 unix 中以不同用户（除 root 用户）身份运行脚本？

> ID：15806947
> 
> 赞同：3
> 
> 时间：2013-04-04T09:09:27.543
> 
> 标签：java, security, unix

我有一个要求，其中我从 java 代码运行 shell 脚本。为此，我一直在使用 rsh 以其他用户身份运行脚本，并在成功执行脚本后将控制权返回给前一个用户。

使用的语法是：

```
rsh -l <username> unix cmd(script here) 
```

现在由于某些安全原因，我必须仅将 sh 用于上述目的。

我的要求是：

1.  不同的用户可能会运行除 root 之外的此脚本，并且所有人都有执行相同的权限。

2.  执行脚本的用户较多，无法从代码中获取密码发送给脚本运行成功。

3.  执行此命令时，该命令不应提示输入用户密码。

4.  我无法使用用户名更新任何配置文件以阻止它提示密码。

我已经经历了诸如`ssh, su, sudo`等之类的替代方案，但徒劳无功。

请提出一些满足上述所有条件的替代方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T09:18:01.540

`setuid`您可以使用通过设置调用的 *NIX 功能

```
chmod +s your_file 
```

[您可以在 Jonathan Leffler 关于A usage of setuid](https://stackoverflow.com/a/8754726/1983854)的回答中找到很好的解释？.

要检查脚本是否正在执行`root`，您可以检查`$EUID`，其中包含执行脚本的用户的 ID。如果为0，则表示`root`（以及其他具有root权限的用户）。

```
if [[ $EUID -ne 0 ]]; then
   echo "This script must be run as root" 1>&2
   exit 1
fi 
```

从[如何：检查 bash shell 脚本是否由 root 运行](http://www.cyberciti.biz/tips/shell-root-user-check-script.html)

# android - 填充 X 图像的布局

> ID：15806948
> 
> 赞同：0
> 
> 时间：2013-04-04T09:09:39.617
> 
> 标签：android, android-layout

我正在尝试用许多图像填充 LinearLayout / Relative，无论如何。无法控制。

这是我的实现：

```
<ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_below="@+id/header"
        android:layout_centerHorizontal="true" >

        <LinearLayout
            android:id="@+id/marcasImages"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" >
        </LinearLayout>
</ScrollView> 
```

所以我多次添加相同的图像：

```
for (int i=0; i<10; i++){
    ImageView imatgeExemple = new ImageView(this.getApplicationContext());
    imatgeExemple.setImageResource(R.drawable.imageexample);
    contenidorImatgesGaleria.addView(imatgeExemple);
} 
```

`contenidorImatgesGaleria`是`marcasImages`。

但是我得到的结果是单行 X 图像（X = 其分辨率可以填充的尽可能多的图像）。因此，例如，如果我循环 1k 次，则只显示 4 张图像。

我想根据需要有尽可能多的行。

这就是正在发生的事情：

![在此处输入图像描述](https://i.stack.imgur.com/XrSj1.png)

这就是我想要实现的目标：

![在此处输入图像描述](https://i.stack.imgur.com/G2lRd.png)

我尝试使用`GridLayout`但没有任何改变。

```
<GridLayout
   android:id="@+id/marcasImages"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent" >
</GridLayout> 
```

知道我应该使用哪种布局吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:20:20.997

您可以使用[GridView](http://developer.android.com/guide/topics/ui/layout/gridview.html)来实现您想要做的事情。

GridView 很像 ListView。您有一个适配器（可以是服装），然后您设置了适配器。

因此，您需要：

**将 GridView 添加到您的布局中**

```
<GridView xmlns:android="http://schemas.android.com/apk/res/android" 
    android:id="@+id/gridview"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"
    android:columnWidth="90dp"
    android:numColumns="auto_fit"
    android:verticalSpacing="10dp"
    android:horizontalSpacing="10dp"
    android:stretchMode="columnWidth"
    android:gravity="center"/> 
```

**定义一个包含图像的服装适配器**

```
public class ImageAdapter extends BaseAdapter {
    private Context mContext;

    public ImageAdapter(Context c) {
        mContext = c;
    }

    public int getCount() {
        return mThumbIds.length;
    }

    public Object getItem(int position) {
        return null;
    }

    public long getItemId(int position) {
        return 0;
    }

    // create a new ImageView for each item referenced by the Adapter
    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView imageView;
        // if it's not recycled, initialize some attributes
        if (convertView == null) {  
            imageView = new ImageView(mContext);
            imageView.setLayoutParams(new GridView.LayoutParams(85, 85));
            imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
            imageView.setPadding(8, 8, 8, 8);
        } else {
            imageView = (ImageView) convertView;
        }

        imageView.setImageResource(mThumbIds[position]);
        return imageView;
    }

    // references to our images
    private Integer[] mThumbIds = {
        R.drawable.sample_2, R.drawable.sample_3,
        R.drawable.sample_4, R.drawable.sample_5,
        R.drawable.sample_6, R.drawable.sample_7,
        R.drawable.sample_0, R.drawable.sample_1,
        R.drawable.sample_2, R.drawable.sample_3,
        R.drawable.sample_4, R.drawable.sample_5,
        R.drawable.sample_6, R.drawable.sample_7,
        R.drawable.sample_0, R.drawable.sample_1,
        R.drawable.sample_2, R.drawable.sample_3,
        R.drawable.sample_4, R.drawable.sample_5,
        R.drawable.sample_6, R.drawable.sample_7 };
} 
```

**设置一个服装适配器，该适配器在您的活动中保存具有您的布局的图像**

```
GridView gridview = (GridView) findViewById(R.id.gridview);
gridview.setAdapter(new ImageAdapter(this)); 
```

请注意，我从我提供的链接中恢复并复制粘贴。你在那里有更多信息。

# shell - 导出变量时在 shell 脚本中使用“:=”和“:-”

> ID：15806949
> 
> 赞同：1
> 
> 时间：2013-04-04T09:09:44.103
> 
> 标签：shell

在我们使用的 shell 脚本中

```
export VAR1=${VAR1:-KK}

export DATE=${DATE:=$(cat ${DATEDIR}/today_date)} 
```

我在很多脚本中都看到了这一点。

请向我解释或参考一个很好的链接，了解为什么使用`:-`和`:=`正在使用它以及应该在哪里使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:16:28.067

从手册页的`Parameter expansion`部分：`bash`

> ${parameter:-word} **使用默认值**。如果参数未设置或为空，则替换单词的扩展。否则，参数的值被替换。
> 
> ${parameter:=word} **分配默认值**。如果参数未设置或为空，则将单词的扩展分配给参数。然后替换参数的值。不能以这种方式分配位置参数和特殊参数。

参数扩展期间还有许多其他选项，请参阅所有选项的手册页。

# android - 移动图书馆或图片库示例

> ID：15806953
> 
> 赞同：1
> 
> 时间：2013-04-04T09:10:15.750
> 
> 标签：android, jquery, ios, css, jquery-mobile

我正在尝试为移动设备创建一个图像库，有点像这样：

[https://developer.apple.com/safaridemos/showcase/gallery/](https://developer.apple.com/safaridemos/showcase/gallery/)

（特别是水平 3D 选项）。

是否有一个库可以为移动设备创建这样的画廊（触摸启用滚动而不是下一个和上一个按钮）？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T09:25:42.033

通过加载移动图片库`$.ajax`并使用滑动进行导航

[http://tympanus.net/codrops/2010/05/27/awesome-mobile-image-gallery-web-app/](http://tympanus.net/codrops/2010/05/27/awesome-mobile-image-gallery-web-app/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T10:13:47.867

这是 jQuery Mobile UI 的 jQuery 插件：

[照片滑动](http://www.photoswipe.com/)

根据您的要求，作为答案而不是评论发布。

希望能帮助到你。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-08T10:02:33.213

我将其用于以下目的：

[http://www.mobify.com/mobifyjs/modules/carousel/](http://www.mobify.com/mobifyjs/modules/carousel/)

更容易使用，并且渲染效果很好。

# blackberry - 测量单位 BlackBerry location.getSpeed

> ID：15806955
> 
> 赞同：0
> 
> 时间：2013-04-04T09:10:21.327
> 
> 标签：blackberry, gps, location

我通过以下方式在我的 BlackBerry 应用程序中获得速度价值；

```
double velocity   = location.getSpeed(); 
```

但是，我很困惑返回速度的测量单位是什么。是公里每小时还是米每秒？这是一个双重价值。这是否意味着它没有计量单位？请解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T18:46:11.133

除了Signare的回答：

通常，当一个单位未定义/记录时，它应该是 [国际单位制的](http://en.wikipedia.org/wiki/International_System_of_Units)*基本单位*或*派生单位*之一

由于速度是每次距离，因此导出的 SI 单位是[m/s](http://en.wikipedia.org/wiki/Metre_per_second)。

如果软件使用单位 km/h 或英里作为称为*速度*的公共参数并且没有文档，那将是一个非常糟糕的软件。

此外，要将 m/s 转换为 km/h，最好简单地乘以`3.6`- 这比 更具可读性`3600/1000`，这也是错误的原因（可能导致整数值）

```
double speedKmh = location.getSpeed() * 3.6; 
```

为避免混淆，最好使用名称`speedKmh`而不是速度，如果它不是 m/s。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T09:16:25.033

输出值速度将以**m/s**为单位。要获得速度，您需要执行以下操作：

```
int speed = location.getSpeed(); 
```

以 m/s 为单位，如果您需要将其转换为 km/h，请使用：

```
int speed=(int) ((location.getSpeed()*3600)/1000); 
```

如果您需要将其转换为 mph，请使用以下命令：

```
int speed=(int) (location.getSpeed()*2.2369); 
```

# c# - 可逆 [1..limit] -> [1..limit] 函数

> ID：15806959
> 
> 赞同：0
> 
> 时间：2013-04-04T09:10:33.070
> 
> 标签：c#, hash

如果它存在于代码中，我正在寻找以下内容（任何语言都可以，但最好是 c#）：

```
a,b,limit,key : integers

0< a, b, < limit (fits in less than int32)

b = forth(a, limit, key)
a = back (b, limit, key) 
```

我需要一些看起来有点随机的东西，`(=)`而且`(xor)`还不够好。

Now I looked into block ciphers and pseudorandom generators and like but it's always about encryption and security and speed and uses the whole size of the integer. I don't care about any of those. All I need is a bijection on the domain where average of forth(a+epsilon) >> b+epsilon

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:31:54.997

像下面这样简单的东西有什么问题吗？

```
int Forth(int a, int limit, int key)
{
    return (limit - a) ^ key;
}

int Back(int b, int limit, int key)
{
    return limit - (b ^ key);
} 
```

**编辑：**改编自[这里](https://stackoverflow.com/questions/4273466/reversible-hash-function)（虽然不使用密钥 - 这是必要的吗？）

```
int Forth(int a)
{
    return ((0x00FF & a)<<8) + ((0xFF00 & a)>>8);
}

int Back(int b)
{
    return ((0x00FF & b)<<8) + ((0xFF00 & b)>>8);
} 
```

注意`Back()`和`Forth()`上面的功能相同......

# ios - 在 FMDB 中使用了变量表的名称

> ID：15806966
> 
> 赞同：-1
> 
> 时间：2013-04-04T09:10:48.250
> 
> 标签：ios

我在数据库中使用变量表名！例如：

```
BOOL judge=[self.database executeUpdate:@"insert into
?(id,name,headimg,excerpt,postion) values
(?,?,?,?,?)",tableName,aID,aName,aImg,aExcept,aCoor]; 
```

但是这个“插入”不起作用！我不知道怎么办

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:13:41.920

如果你想使用表名作为变量，你可以尝试以下

```
NSString *sql=[NSString stringWithFormat:@"insert into %@ (id,name,headimg,excerpt,postion) values (%@,%@,%@,%@,%@)",tablename,aID,aName,aImg,aExcept,aCoor];

BOOL judge=[self.database executeUpdate:sql]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T09:21:09.330

尝试这个：

```
NSString *query = [NSString stringWithFormat:@"insert into '%@' (id,name,headimg,excerpt,postion) values (%d,'%@','%@','%@','%@')",tableName,aID,aName,aImg,aExcept,aCoor];

BOOL judge=[self.database executeUpdate:query]; 
```

还可以根据需要更改格式说明符。（可能id是这么用的%d，其他变量被当作Strings这么用%@）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-23T16:33:01.840

我这样做的方式使 SQLite 绑定在工作:)

```
NSString * queryString = [NSString stringWithFormat:@"SELECT * FROM %@ ",[self modelDatabaseTableName]];
queryString = [queryString stringByAppendingString:@"WHERE UUID = ?;"];
FMResultSet *existenceCheckResultSet = [database executeQuery:queryString,[modelObject valueForKey:@"UUID"]]; 
```

希望能帮助到你。

乔瓦

# ios - 使用iOS在opencv中进行边缘平滑和填充内部轮廓

> ID：15806968
> 
> 赞同：2
> 
> 时间：2013-04-04T09:10:50.680
> 
> 标签：ios, image, opencv, masking, smoothing

我正在尝试在 opencv 的帮助下以不同强度晒黑人体皮肤。我已经识别出人类皮肤并改变了这些像素的色调。但这并不顺利。

![截图 1](https://i.stack.imgur.com/oboMF.png)

左上 - 原始图像 右上 - 原始图像的饱和度通道 左下 - 识别原始图像上皮肤位置的灰度蒙版 右下 - 蒙版中像素的色调发生变化的结果图像。

现在我的问题是，由于原始图像中色调或亮度的变化，在蒙版图像中会留下一些间隙。这就是结果图像中遗漏了这些部分的原因。谁能告诉我如何填补蒙版图像中的小空白？

![蒙版图像中的间隙](https://i.stack.imgur.com/GmBnA.png)

另一个如果有人可以帮助我抚平我晒黑的面具的边缘，那将对我有很大帮助。请参阅下面的参考图片，

![锋利的晒黑面具边缘](https://i.stack.imgur.com/Wlisj.png)

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T13:56:28.733

怎么样？

```
morphologyEx(grey,grey,MORPH_CLOSE,getStructuringElement( MORPH_ELLIPSE,Size(7,7))); 
```

虽然左手的轮廓被合并了

![简单的](https://i.stack.imgur.com/fTc9W.png)

编辑：稍微多一点参与

```
Mat tmp=grey.clone();
morphologyEx(tmp,tmp,MORPH_GRADIENT,getStructuringElement(MORPH_ELLIPSE,Size(3,3)));
bitwise_not(tmp,tmp);
Mat smallholes=Mat::zeros(tmp.size(), CV_8UC1);
vector<vector<Point>> contours;
findContours(tmp,contours,CV_RETR_LIST,CV_CHAIN_APPROX_SIMPLE);
for(int i = 0; i < contours.size(); i++)
{       
    double area = contourArea(Mat(contours[i]));
    if(area<100)
        drawContours(smallholes, contours, i, 255, -1);
}
Mat done;
bitwise_or(grey,smallholes,done);
morphologyEx(done,done,MORPH_CLOSE,getStructuringElement(MORPH_ELLIPSE,Size(3,3))); 
```

![长](https://i.stack.imgur.com/xwxEe.png)

# c# - 更改网站图库表单中的图片

> ID：15806973
> 
> 赞同：0
> 
> 时间：2013-04-04T09:11:12.640
> 
> 标签：c#, javascript, asp.net, image, button

我已经尝试了大约一个星期，但无法解决我的问题。我想要做的是有一个网页，基本上可以滚动浏览 5 或 6 张图片`clicking a next or prev asp:button`。有人可以从头开始帮助我如何实现这一目标。

我正在使用 Visual Studio Web 开发人员，并且有一个使用母版页制作的空白网站。我想将此画廊功能添加到自动生成的`Default.apsx`文件中。

我的图片名称是`pic001.jpg; pic002.jpg; pic003.jpg`等等

我想要的只是左边的按钮说上一张，它将带你到上一张图片，右边的按钮说下一张，它将显示下一张图片，中间是一张图片（改变的那个）

请帮助解决这个问题，我已经尝试过并且非常失败，非常感谢可以提供帮助的人

这是我尝试的一些代码：

## 默认.aspx 文件

```
<%@ Page Title="Default" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="Default"  %>

<asp:Content ID="Content1" ContentPlaceHolderID="HeadContent" Runat="Server" >
    <script src="myJava.js" type="text/javascript"></script>
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" Runat="Server" >
<table>
    <tr><td> GALLARY </td></tr> <!--Header-->
    <tr>
        <td> <asp:Button ID="Button1" runat="server" Text="Prev" OnClientClick="getPrevImage()"/> </td>
        <td> <img ID="pic" alt="" src="" runat="server" width="400" height="400" /> </td>
        <td> <asp:Button ID="Button2" runat="server" Text="Next" OnClientClick="getNextImage()"/> </td>
    </tr>
</table>
</asp:Content> 
```

## Default.aspx.cs 文件

```
public partial class Default : System.Web.UI.Page
{    
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            string script = string.Empty;
            script += "<script language='javascript'>";

            script += "init()";
            script += "</script>";
            ClientScript.RegisterClientScriptBlock(this.GetType(), "Error", script);
        }
    }
} 
```

## myJava.js 文件

```
var imagePath = new Array();
var imageIndex = 0;

function init(){
     addPath("pic001.jpg");
     addPath("pic002.jpg");
     addPath("pic003.jpg");
     addPath("pic004.jpg");
     addPath("pic005.jpg");

     getImagePath(0);
}

function addPath(path){
     var index = imagePath.length;
     imagePath[index++] = path;  
}

function getImagePath(index){
     var length = imagePath.length;

     if(index <= length){
        if(index >= 0){
            document.getElementById("MainContent_pic").src = imagePath[index];
            document.getElementById("MainContent_pic").alt = imagePath[index];
            imageIndex = index;
        }
     } else {
        document.getElementById("MainContent_pic").src = "DOES NOT EXIST";
        document.getElementById("MainContent_pic").alt = "DOES NOT EXIST";
     }
}

function getNextImage(){
     var length = imagePath.length;
     var index = imageIndex;
     if(index++ < length--){
        if(imagePath[index] != null){
            imageIndex = index;
            document.getElementById("MainContent_pic").src = imagePath[index];
            document.getElementById("MainContent_pic").alt = imagePath[index];
        }                                    
     }
}

function getPrevImage(){
     var index = imageIndex;
     if(index-- >= 0){
        if(imagePath[index] != null){
            imageIndex = index;
            document.getElementById("MainContent_pic").src = imagePath[index];
            document.getElementById("MainContent_pic").alt = imagePath[index];
        }   
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:31:54.120

这是一个使用 html 和 jquery 的方法，您可以在应用程序中轻松使用：

HTMl（随意替换`<a>`为您想要的任何标签）：

```
<a href="" class="previous">Previous</a>

<img src="1.jpg" class="display"/>
<img src="2.jpg" class="hide"/>
<img src="3.jpg" class="hide"/>
<img src="4.jpg" class="hide"/>

<a href="" class="next">Next</a> 
```

查询：

```
$(document).ready(function(){
    $(.previous).click(function(){
        var current = $(.display);
        //hide current img
        current.attr("class", "hide");
        //get previous img
        var pre = current.pre();
        if(pre !== null)
        {
            //display previous img if available
            pre.atrr("class", "display");
        }
        else
        {
            //dipslay last img if previous not available
            current.parent().find("img:last").attr("class", "display");
        }
    });

    $(.next).click(function(){
        var current = $(.display);
        //hide current img
        current.attr("class", "hide");
        //get next img
        var next = current.next();
        if(next !== null)
        {
            //display next img if available
            next.atrr("class", "display");
        }
        else
        {
            //display first img if next not available
            current.parent().find("img:first").attr("class", "display");
        }
    })
}); 
```

CSS（您可以更改`display: block`to`inline`或任何适合您要求的内容）：

```
img.display {
    display: block;
}

img.hide {
    display: none;
} 
```

我不是专业的 html、css、jquery 所以希望这对你有所帮助

# glassfish - 部署到 Glassfish 的多个实例，分解我的 EAR

> ID：15806974
> 
> 赞同：0
> 
> 时间：2013-04-04T09:11:20.253
> 
> 标签：glassfish, glassfish-3, remote-access, ejb-3.1, ear

我有一个小的 EAR-JEE6 应用程序，它由 3 个模块（EAR + EJB + WEB）组成。有 3 个文件：ear、jar 和 war - ear-file 包含 jar 和 war 文件。

我的问题：
我想在 2 台不同的机器（IP-1 和 IP-2）上设置 2 台 glassfish 服务器，我想在 IP-1 和 WEB（war-file）上部署 EJB（jar-file）在 IP-2 上。

我的 Web 项目有一个 servlet，它依赖于我的 EJB 项目中注入的无状态 bean。我无法理解这一点。

Web 项目如何在 EJB 项目中找到无状态 bean？我需要某种“全球”的查找服务（我可以在其中输入所有 IP 地址）——只是在这里猜测。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:04:32.400

您可以使用 Java 命名和目录接口 ( [JNDI](http://docs.oracle.com/javase/jndi/tutorial/getStarted/overview/index.html) ) 来做到这一点。

您必须以如下方式手动查找 bean：

```
Context ic = new InitialContext();
Object o = ic.lookup("java:comp/env/ejb/Foo"); 
```

可以在此处找到更多详细信息：[Accessing EJB Components in a Remote GlassFish Server](http://docs.oracle.com/cd/E19798-01/821-1752/beanv/index.html)或[此 stackoverflow 问题](https://stackoverflow.com/questions/9829922/how-to-access-ejb-on-remote-server)。

# mysql - 我可以从 DTS 迁移到等效的 MySQL 工具吗？

> ID：15806978
> 
> 赞同：0
> 
> 时间：2013-04-04T09:11:30.413
> 
> 标签：mysql, sql-server, pentaho, dts, kettle

我需要做的工作是将 MSSQL 2000 DTS 迁移到 MySQL，不幸的是我在 MySQL 中没有找到与 DTS 等效的工具。我想到了使用 Pentaho Spoon 的 ETL。因此我想知道是否可以轻松地将 MSSQL 2000 dts 导入 Pentaho Spoon ？我在谷歌或一般互联网上没有找到我的问题的任何答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:28:36.287

据我所知，您无法自动执行此操作。但是，Kettle 是一个使用起来相当直观的工具，您应该能够轻松地将 DTS 手动迁移到 Kettle。

也就是说，DTS 到 Kettle 的转换工具可能是市场上新产品的机会。

# php - 出现解析错误：语法错误，意外的 T_NEW

> ID：15806981
> 
> 赞同：7
> 
> 时间：2013-04-04T09:11:43.873
> 
> 标签：php

我有两个类 memberdao 和 member class。我在成员类中创建 memberdao 类的对象。这是我的代码

```
require_once('/../dao/memberdao.class.php');

class Member
{
public $objMemberDao= new MemberDao(); 

} 
```

但它给出了一个错误解析错误：语法错误，第 9 行 C:\xampp\htdocs\membership\lib\member.class.php 中的意外 T_NEW。我是 php 新手，所以请帮忙

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-04T09:13:32.827

你不能在那里初始化新对象。您必须在 __construct 函数中执行此操作；

```
require_once('/../dao/memberdao.class.php');

class Member
{
  public $objMemberDao; 

  public function __construct()
  {
    $this->objMemberDao= new MemberDao(); 
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T09:16:02.860

将 MemberDao 类的对象创建到 Member 类的构造函数中

```
class Member
{
  public $objMemberDao; 

  public function __construct()
  {
      $this->objMemberDao= new MemberDao(); 
  }
} 
```

# spring-mvc - 基于客户端 IP 的 Spring 验证

> ID：15806982
> 
> 赞同：0
> 
> 时间：2013-04-04T09:11:46.940
> 
> 标签：spring-mvc

我在 Spring MVC 项目中获得了表单对象的 Spring Validator，我需要做一些部分基于客户端 IP 地址的验证。是否有可能在验证器中获得类似 request.getRemoteAddr() 的东西？

```
//controler

public String saveForm(@Valid @ModelAttribute("command") MyCommand myCommand, BindingResult result) {
//some code
return "viewName";
}

//Validator
public class MyValidator implements Validator {
    @Override
    public void validate(Object target, Errors errors) {
    String requestIp = ?
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:50:06.697

我想到的第一种方法是[`RequestContextHolder`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/context/request/RequestContextHolder.html)用来获取用户的请求：

```
((ServletRequestAttributes)RequestContextHolder.currentRequestAttributes()).getRequest().getRemoteAddr() 
```

您还需要将以下行添加到`web.xml`：

```
<listener>                                                                                      
    <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
</listener> 
```

# database - 在 Redis（Json 或多数据结构）中存储和读取通知的最佳方法？

> ID：15806987
> 
> 赞同：1
> 
> 时间：2013-04-04T09:11:56.227
> 
> 标签：database, json, database-design, data-structures, redis

我想将我的应用程序的通知存储在一个排序集或 Redis 列表中（是一个也有通知的链接缩短器）。我有不同类型的通知，所以我不能像普通字符串一样存储它们。例如，如果我想存储：

*   通知文本
*   通知类型

我有两种方法。一种是序列化 Json 并像普通字符串一样存储，并在我想使用它时反序列化。或者另一种方法是将键保存在列表中，然后再次点击 Redis 到另一个数据结构，以通过存储在列表中的键获取通知哈希。

**就像一个通知系统，系统会一直**在读写。

那么在几行**反序列化和序列化 VS 拆分数据和多个 DB 命中？**

我对这类决策没有太多经验，所以也许有人遇到过这种情况并且知道在效率和可扩展性方面什么是最好的方法，或者至少可以解释我如何做出决策，因为像许多人一样事情，我/我的应用程序的决定不是其他人/其他应用程序的决定。

谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T14:03:07.910

在做了一些测试之后，**最好的成绩归于 Json 序列化数据案例**。我想这也取决于序列化结构。在测试用例中，它仅序列化 2 个字段结构。

一些结果（以秒为单位的时间）：

```
Users: 600
Notifications per user: 1200
--------------------
#### With Json in Set structure ####
Write time: 93.0
Read time: 6.65
dbsize (number of keys): 600
Memory: 150.60M
#### With set and hash data structures ####
Write time: 367.72
Read time: 40.2
dbsize (number of keys): 721200
Memory: 224.17M 
```

我将稍微解释一下测量测试（我使用了 Python）：

对于 Json 序列化案例，我使用了一个排序集（zset）（每个用户的通知 zset），它的分数是 unix 时间戳（浮点数）。它序列化一个 2 字段哈希（Python 字典）并将字符串添加到排序集中。

为了检索，我得到了所有的 zset 字符串，并一一反序列化数据。

对于 Hash 方法，我使用了 3 个数据结构：

*   最简单的一个是每个通知 zset 的计数器，用于为每个通知创建唯一键（我也用 uuids 测试过，结果或多或少是相同的，所以差别不大）
*   另一种数据结构是 zsets，与 Json 的情况相同，但我们不存储 Json 数据，而是存储通知哈希键
*   最后一个是包含所有数据字段的通知哈希

并检索数据。或多或少与 json 案例相同，我从每个 zset 中获取所有密钥，然后一一获取所有通知。

我知道这种情况不是我所面临的，因为通常我不会检索所有通知，而且测试可能有错误或者有更好的方法来解决这种情况。

无论如何，这里有一些[测量和测试脚本](https://gist.github.com/slok/5310348)

# javascript - Javascript - 对象，从 2 开始的 for 循环

> ID：15806989
> 
> 赞同：0
> 
> 时间：2013-04-04T09:12:02.247
> 
> 标签：javascript, object, for-loop

我有看起来像这样的对象。

```
foo = {
    0 : {
        'bar' : 'baz',
        'qux' : 'quux',
        'this' : { 'hello' : 'yes' } // this is the object I want to extract
    }
    1 : {
        'bar' : 'baz',
        'qux' : 'quux',
        'this' : { 'hello' : 'yes' } // extract
    }
    2 : {
        'bar' : 'baz',
        'qux' : 'quux',
        'this' : { 'hello' : 'yes' }, // extract
        'that' : { 'hello' : 'no' } // extract
    }
} 
```

使用这样的 for 循环，我可以遍历每个对象：

```
for(var i in foo){
  ...
} 
```

问题是我只想从第三个和更大的子对象中提取数据，而不是从每个对象中提取**（'this'） 。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T09:14:46.440

ECMAscript中没有指定*对象键的顺序。*如果你有索引键名，你真的应该使用*Javascript 数组。*

如果你需要一个普通的*Object*，你可能想和and`Object.keys()`一起使用，比如`Array.prototype.forEach``.sort()`

```
Object.keys( foo ).sort().forEach(function( i ) {
}); 
```

* * *

如果你不能依赖 ES5，你别无选择，只能手动完成工作。

```
var keys = [ ];

for(var key in foo) {
    if( foo.hasOwnProperty( key ) ) {
        keys.push( key );
    }
}

keys.sort();

for(var i = 0, len = keys.length; i < len; i++) {
} 
```

* * *

但是，您确实应该首先使用*Array*，这样您就可以跳过脏活。

# ruby-on-rails - 路由错误没有路由匹配 {:action=>"reset", :controller=>"players"}

> ID：15806990
> 
> 赞同：1
> 
> 时间：2013-04-04T09:12:06.380
> 
> 标签：ruby-on-rails, routes

我需要添加什么到 config.rb 来解决这个问题。

由于我对 Rails 的了解非常有限，我设法将此方法放入控制器中。

```
def  reset
        Player.each do |p|
            p.playing = false
            p.save
        end
   end 
```

并在视图中创建此链接

```
<p><%= link_to "New Game", {:action => 'reset' }%></p> 
```

我只是不确定在 routes.rb 中放什么来让它工作而不会填满我已经拥有的东西。

这是我的 config.rb

```
ChooseTeams3::Application.routes.draw do
   resources :players
 root :to => "players#index"
get   "/index" => "players#index"

end 
```

如果我输入 rake routes 我会得到这个

```
 rake routes
    players GET    /players(.:format)          players#index
            POST   /players(.:format)          players#create
 new_player GET    /players/new(.:format)      players#new
edit_player GET    /players/:id/edit(.:format) players#edit
     player GET    /players/:id(.:format)      players#show
            PUT    /players/:id(.:format)      players#update
            DELETE /players/:id(.:format)      players#destroy
       root        /                           players#index
      index GET    /index(.:format)            players#index 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:14:54.783

你可以做：

```
ChooseTeams3::Application.routes.draw do
   resources :players do
     get "reset", on: :collection
   end
   root :to => "players#index"
   get   "/index" => "players#index"
end 
```

有关路由的更多信息，您可以在[此处阅读文档。](http://guides.rubyonrails.org/routing.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T09:30:00.963

将您的路线文件更新为..

```
ChooseTeams3::Application.routes.draw do
   resources :players do
     collection do
       get 'reset'
     end
  end
  root :to => "players#index"
  get   "/index" => "players#index"
end 
```

并像这样使用link_to ..

```
<p><%= link_to "New Game", reset_players_path%></p> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T09:38:18.773

```
ChooseTeams3::Application.routes.draw do
   resources :players do
     get "reset", on: :collection
   end
   root :to => "players#index"
   get   "/index" => "players#index"
end

<p><%= link_to "New Game", reset_players_path %></p>

def  reset
        Player.all.each do |p|
            p.update_attribute(:playing, false)
        end
end 
```

但我仍然为什么需要，当您单击“新游戏”时，将 ALL 更新为 false。

播放器 - 它是一个模型。如果您调用 Player.all - 您将更新所有玩家。

也许你需要类似 game.playes.each 的东西（当前游戏的所有玩家）

# javascript - 如何在 Bootstrap 中动态更改布局？

> ID：15806995
> 
> 赞同：2
> 
> 时间：2013-04-04T09:12:17.427
> 
> 标签：javascript, twitter-bootstrap

假设我有一个布局流畅的网格。它在一个 div 中有一个组件，一个表格`span12`- 使用整个屏幕。

单击此表中的一行时，我想更改布局。我想将表格的 div 更改为并在右侧`span4`创建一个新列以显示所选项目的详细信息。`span8`

如何以编程方式执行此操作？像这样简单的东西：

```
$("#mydiv").removeClass("span12").addClass("span4") 
```

...似乎不起作用，我相信我需要以某种方式告诉 Bootstrap 重新处理整个布局。有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:30:49.837

这个解决方案怎么样：

```
var $table = $('.table-container'), // table inside
    $side  = $('.side-container');  // hidden by default
$table.on('click', 'tr', function() {
   $table.removeClass('span8').addClass('span4');
   $side.show();
}); 
```

[http://jsfiddle.net/meV43/](http://jsfiddle.net/meV43/)

*我在这个演示中使用了 span8 的总宽度*

具有切换列功能[http://jsfiddle.net/meV43/1/](http://jsfiddle.net/meV43/1/)

# asp.net - TemplateField 中包含资源和 HTML 的文本

> ID：15806999
> 
> 赞同：1
> 
> 时间：2013-04-04T09:12:34.910
> 
> 标签：asp.net, gridview, resources, datatemplate, headertext

我需要在 TemplateField 的属性 HeaderText 中使用 html 在资源文件中插入一个文本。我不能使用 HeaderTemplate，因为排序不起作用……这个[解决方案](http://www.infragistics.com/community/forums/t/5829.aspx)也不行（数据源结果为空）。

所以我尝试这样的解决方案：

```
HeaderText="<span><%$ Resources:ForumResources, DATA_CREAZIONE %></span><img src="..." />" 
```

但它是这样渲染的：

```
<span><!-- Resources:ForumResources, DATA_CREAZIONE --></span>
<img src="..." />" 
```

喜欢评论，为什么？我该如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:18:53.013

我认为你应该这样使用

```
gridview1.Columns[ColumnIndex].HeaderText = "Header text";

gridview1.Columns[ColumnIndex].HeaderText =
                                    Resources:ForumResources, DATA_CREAZIONE; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T09:25:40.660

调用像你想要的那样返回字符串的函数......

在绑定你的gridview之后做这个

```
gridview1.Columns[ColumnIndex].HeaderText =getstring();

        public string getstring()
        {
        string str="<span>"+yourcontent in the form of string+"</span><img src="..." />";
        return str;
        } 
```