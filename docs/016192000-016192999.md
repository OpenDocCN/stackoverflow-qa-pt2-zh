# StackOverflow 问答 16192000-16192999

# java - handleNavigation 在 PhaseListener 中不起作用

> ID：16192003
> 
> 赞同：0
> 
> 时间：2013-04-24T12:25:17.253
> 
> 标签：java, jsf-2, phaselistener

我有一个 PhaseListener 来控制用户对某些页面的访问，如果用户未登录，他将被重定向到登录页面。

问题是我的方法 handleNavigation 没有重定向用户。它运行但不重定向用户。

当用户键入不应访问的 url 时，该方法运行但他的页面打开而不重定向到登录页面。

怎么了？

```
public class AuthorizationListener implements PhaseListener {

  public void afterPhase(PhaseEvent event) {

    FacesContext facesContext = event.getFacesContext();
    String currentPage = facesContext.getViewRoot().getViewId();

    boolean isLoginPage = (currentPage.lastIndexOf("login.xhtml") > -1);
    if(isLoginPage)
      return;

    if(currentPage.indexOf("/rws/") != -1)
    {
      HttpSession session = (HttpSession) facesContext.getExternalContext().getSession(true);
      Object currentUser = session.getAttribute("usuario");

      if (!isLoginPage && currentUser == null) {
        NavigationHandler nh = facesContext.getApplication().getNavigationHandler();
        nh.handleNavigation(facesContext, null, "loginPage");
      }
  } 
}

public void beforePhase(PhaseEvent event) {
    System.out.println("Hellow World");
}

public PhaseId getPhaseId() {
  return PhaseId.RENDER_RESPONSE;
}

} 
```

我的面孔配置

```
<navigation-rule>
  <from-view-id>/*</from-view-id>
  <navigation-case>
    <from-outcome>loginPage</from-outcome>
    <to-view-id>/login.xhtml</to-view-id>
  </navigation-case>
</navigation-rule>

<lifecycle>
  <phase-listener>br.com.testes.filter.AuthorizationListener</phase-listener>
</lifecycle> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T12:30:31.100

您正在渲染响应的后期执行代码。因此，这是在 JSF 呈现并完成响应之后。在那一刻，整个 HTTP 响应*已经*完成并完全发送到网络浏览器。

这是一个不归路。您的代码只是为时已晚，无法更改响应。

改为在恢复视图阶段收听。或者，更好的是，使用[servlet 过滤器](https://stackoverflow.com/tags/servlet-filters/info)。JSF 阶段侦听器对于这项工作来说是一个过于笨拙的工具（它不会启动非 JSF 请求，并且在 JSF 请求期间最多触发 12 次）。servlet 过滤器是完成这项工作的正确工具。您可以在此答案中找到一个具体示例：[JSF page style missing when using login filter](https://stackoverflow.com/questions/14526574/jsf-page-style-missing-when-using-login-filter/14527439#14527439)。

# nginx - API 版本控制：谁应该进行基于版本的调度？

> ID：16192004
> 
> 赞同：2
> 
> 时间：2013-04-24T12:25:17.860
> 
> 标签：nginx, sinatra, versioning, asp.net-web-api

我正在为一个已经存在的 Rails 应用程序开发一个使用 ruby​​ 和 Sinatra 的 API。我已经分离了应用程序（没有安装逻辑），因此这些应用程序是单独部署的。在生产中，我使用 nginx 作为两个应用程序的代理服务器，它使用域匹配来分派到正确的应用程序。

我也在对我的 API 进行版本控制。目前我正在 Sinatra 应用程序本身中执行此操作，通过覆盖获取、发布、过滤器等调用的方法，因此，无论您应用哪个字符串或正则表达式规则来匹配请求 uri，它们都会有他们添加之前的版本控制：

```
# matches /v0.1/resource/:id
get "/resource/:id" .... 
```

这样做的缺点是总是必须至少匹配 url 的开头，首先 / 包含，否则将无法正确添加版本号。不仅如此，这意味着我也只为每个应用程序匹配一个 API 版本。

我仍在开发第一个版本，因此随着 API 的版本升级，现在有时间找出继续前进的最佳策略。我看到了两种可能的策略：

1.  让一切都像 Rails（正如他们在 railscast 上推荐的用于 REST API 版本控制的那样）并在应用程序中始终对匹配进行版本控制：

    ```
    get "/0.1/resource/:id" do .....
    get "/0.2/resource/:id" do ..... 
    ```

    这样做的缺点是总是有两个（或更多）版本的逻辑，这使得 url 匹配逻辑更加复杂（比如，如果我想用 /\d+/resource/\d+ 之类的一个规则来匹配所有内容，那么我会在我看来，仍然必须查看版本号是否可以接受）并增加意大利面条的出现次数。

    它的优点是保持相同的部署逻辑（用当前替换最后一个版本，nginx 仅路由到一个 API，等等......）。

2.  让 nginx 按版本分派。使用 CVS，我可以对我的代码进行版本控制。我只需要定义我想在线支持多少个版本，部署它们，然后重新排列 nginx 路由，现在将基于域+版本。

    这具有清理应用程序逻辑的优点，因为我只匹配逻辑的必要规则。使用最后一个例子：

    ```
    get "/resource/:id" do .... 
    ```

    nginx 会负责路由到正确的应用程序。

    不过，这有一些技术上的缺点：为此，我必须更改部署策略，因为我必须选择我支持多少个 API 版本，从我的 CVS 中获取它们，然后编辑 nginx 配置，删除最后一个 API 规则，插入新规则（路由到 api.myapp.com/v1、api.myapp.com/v2...）并重新初始化 nginx。另一个缺点是现在我必须支持多个 API 代码基础，例如错误修复......这与上面相同，我只需要支持不同的版本标记代码基础。

我想知道其他人在他们的案例中是如何解决这个问题的，以及这对后续维护有何影响。

# html - 减少地理定位 watchPosition 调用的频率

> ID：16192006
> 
> 赞同：1
> 
> 时间：2013-04-24T12:25:19.077
> 
> 标签：html, gps, w3c-geolocation

我正在为一家物流公司编写一个跟踪应用程序，该应用程序需要定期将每部手机的位置报告回基地。该`geolocation.watchPosition`方法似乎很理想，但据我所知，它每秒更新一次位置，似乎无法增加回调之间的间隔。从数据使用的角度来看，每秒一次有点过于频繁 - 每分钟一次是理想的。

是否可以将选项传递给 watchPosition 以使其以最小间隔执行回调？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:25:19.077

您可以允许它仍然每秒调用一次 watchPosition，但随后将报告分离回基础到一个单独的回调中，该回调在计时器上每分钟运行一次。

例如：

```
var GPSStore = {};
navigator.geolocation.watchPosition(
  function(current_location) {
    // Just store the latest co-ordinates in memory as often as they are generated
    GPSStore.location = current_location;
  }
);
// Once a minute transmit the latest co-ordinates
setInterval(function() {
  transmitLocation(GPSStore.location);
}, 1000*60); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-22T06:16:59.950

PositionOptions 有一个名为 maximumAge 的属性。

文档说：

> 是一个正长值，指示可接受返回的可能缓存位置的最大年龄（以毫秒为单位）。如果设置为 0，则意味着设备不能使用缓存的位置，必须尝试检索真实的当前位置。如果设置为 Infinity，则设备必须返回缓存位置，而不管其年龄。默认值：0。 [链接](https://developer.mozilla.org/es/docs/Web/API/PositionOptions)

它可以帮助你

# php - Symfony 2：清理 Doctrine 元数据

> ID：16192008
> 
> 赞同：0
> 
> 时间：2013-04-24T12:25:24.033
> 
> 标签：php, symfony, doctrine-orm

当我从现有数据库创建实体，然后删除所有表和实体并创建新实体时，我遇到了一个问题。

1.  我创建了数据库
2.  根据 Symfony 2 文档从现有数据库创建实体
3.  然后我从数据库中删除了所有表
4.  `/Entity`从目录中删除所有实体
5.  `/doctrine`从`/config`目录中删除文件夹
6.  创建新实体，在注释中包含元数据
7.  根据新实体更新数据库

当我尝试启动应用程序时，我遇到了异常

> 警告：class_parents() [function.class-parents]: Class WriterBeat\AdminBundle\Entity\Members 不存在并且无法在 D:\experiments\write\vendor\doctrine\common\lib\Doctrine\Common\Persistence 中加载\Mapping\RuntimeReflectionService.php 第 38 行

`Members`当我删除它时，在第 4 步之前有实体。并创建了名为 的新实体`User`。

**UPD**

我发现问题出在安全配置文件上，现在我想问你，在我开始实施之前，如何禁用安全组件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-25T10:15:55.600

您是否尝试过以下命令？

```
sudo php app/console doctrine:cache:clear-metadata 
```

# asp.net - 我在这个中继器中有一个中继器和一个下拉列表

> ID：16192009
> 
> 赞同：0
> 
> 时间：2013-04-24T12:25:29.557
> 
> 标签：asp.net, drop-down-menu, repeater, sender, itemdatabound

我在中继器内填充下拉列表（DropDownList 填充了数据库中的值）

```
protected void Repeater1_ItemDataBound(object sender, RepeaterItemEventArgs e)
    {
        try
        {
            if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
            {
                string idAdvert = objAdvert.GetAllIlanPage(ClsSession.idUser, null).Rows[i]["ID_ADVERT"].ToString();
                DropDownList DDL = (DropDownList)e.Item.FindControl("DropDownList1");
                DDL.Items.Add("");
                DDL.Items.Add(new ListItem("Doping", idAdvert));
                DDL.Items.Add(new ListItem("İşlem", idAdvert));
                DDL.SelectedIndex = 0;
                i = i + 1;

            }
        } 
```

它正在工作，但是当我单击下拉列表时，selectedindexchanged 不起作用。它总是发送 selectedIndex=1

```
 protected void SelectedIndex_Degisti(object sender, EventArgs e)
    {
        //DropDownList ddl = sender as DropDownList;
        //DropDownList doldurulacak_ddl = (DropDownList)ddl.Parent.FindControl("DropDownList1"); 
        ////Aynı satırdaki doldurulacak diğer droplisti bulduk.

        Control parent = ((Control)sender).Parent;
        DropDownList GeneralDDL = (DropDownList)parent.FindControl("DropDownList1");

        if (GeneralDDL.SelectedItem.Text == "Doping") ;//Response.Redirect("default.aspx");
        else if (GeneralDDL.SelectedItem.Text == "İşlem") ;// Response.Redirect("login.aspx");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:14:56.143

由于您正在动态地将控件添加到 Repeater，因此您必须确保在*每个 PostBack*上重新添加这些控件。这将使 from 值能够设置为用户选择的值。

尝试将您的`Repeater.DataBind()`呼叫转移到`OnInit()`活动。

# objective-c - 从另一个类调用的选择器函数

> ID：16192011
> 
> 赞同：1
> 
> 时间：2013-04-24T12:25:39.120
> 
> 标签：objective-c, callback, performselector

我有一个 viewController`Controller`和一个 view `view A`。还`ViewA`包含一个按钮。通常，我们在单击按钮时调用同一类中的函数来执行。但是我希望`controller`在单击按钮时执行一个方法。

以下是我制定的两种方法：

```
//method 1 
//UIView A
-(id)initWithSelector:(SEL)callbackInB withDelegate:(id)delagateB
{
    self = [super init];
    if (self)
    {
         delegate = delegateB;
         myCB = callbackInB;
    }
    return self;
}
//somewhere in UIView A
[btn addTarget:delegate action:myCB forControlEvents:UIControlEventTouchUpInside]; 
```

这很好用。但是如果我使用第二种方法，它会显示“执行选择器可能会泄漏，因为选择器功能未知”。

```
//method 2
//somewhere in UIView A 
[btn addTarget:self action:@selector(btnPressed:) forControlEvents:UIControlEventTouchUpInside];

-(void)btnPressed:(id)sender
{

    if([delegate respondsToSelector:myCB])
        [delegate performSelector:myCB];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:38:26.117

块是这个问题的答案：

B类

```
@property (copy, nonatomic) void (^myBlock)(void);

 -(id)initWithMyBlock:(void(^)(void))block
 {
    self = [super init];
    if (self)
    {
         self.myBlock = block;
    }
     return self;
 }

[btn addTarget:delegate action:@selector(btnPressed) forControlEvents:UIControlEventTouchUpInside];

- (void)btnPressed {
  if (_myBlock) {
    _myBlock();
  }
} 
```

只需注意保留周期

# c# - 将属性添加到类列表

> ID：16192012
> 
> 赞同：1
> 
> 时间：2013-04-24T12:25:40.393
> 
> 标签：c#, class, inheritance, properties

我有一个 OrdersInfo 列表，我将 OrdersInfo 继承到 YearlyResourceReport 并添加 12 个属性 - 月（公共字符串 Jan {get;set;}）等

现在我创建了一个新类的列表（所以 [OldProperties] + [12Month]）

如何将两个列表合并在一起？

```
class YearlyResourceReport : OrdersInfo
{
    public string Jan { get; set; }
    public string Feb { get; set; }
    public string Mar { get; set; }
    public string Apr { get; set; }
    public string Jun { get; set; }
    public string Jul { get; set; }
    public string Aug { get; set; }
    public string Sep { get; set; }
    public string Oct { get; set; }
    public string Nov { get; set; }
    public string Dec { get; set; }

} 
```

添加：

```
List<OrdersInfo> ordersList = 
WorkOrderEntity.GetYearlyOrders(year, loggedInUser, customerIds, sortBy).ToList();

List<YearlyResourceReport> newList; 
```

我希望将属性添加到第一个列表（根本不必创建第二个列表），或者只是作为最后一个度量合并两个列表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T12:40:55.060

这应该作为一个例子让你走上正确的道路：

```
class A
{
    public string PropertyA { get; set; }

    public override string ToString() { return this.PropertyA; }
}

class B : A
{
    public string PropertyB { get; set; }

    public override string ToString() { return string.Format("{0} - {1}", this.PropertyA, this.PropertyB); }
}

var aList = new List<A>();
var bList = new List<B>();

for (int i = 0; i < 10; i++)
{
    aList.Add(new A() { PropertyA = string.Format("A - {0}", i) });
    bList.Add(new B() { PropertyA = string.Format("B::A - {0}", i), PropertyB = string.Format("B::B - {0}", i) });
}

// now list the current state of the two lists
for (int i = 0; i < 10; i++)
{
    Console.WriteLine(aList[i]);
    Console.WriteLine(bList[i]);
}

Console.WriteLine();
Console.WriteLine();

// now merge the lists and print that result
var newList = bList.Concat(aList.Select(a => new B() { PropertyA = a.PropertyA, PropertyB = "Created by system." }));
foreach (var item in newList)
{
    Console.WriteLine(item);
} 
```

在上面的示例中，我有一个类`A`，`B`并且`B`继承自`A`并添加了一个属性。然后我建立了两者的清单并将它们写到`Console`. 在这样做之后，我们然后合并两个列表，`B`从 ' 中创建 '，`A`因为单个泛型列表必须具有相同的类型。你可以想象使用类似的东西`ArrayList`而不是通用列表并容纳两种不同的类型 - 但我认为这不是你想要的。

合并类型后，我们也会将该合并的结果写出，`Console`您会看到两个列表合并。

如果您的要求稍有不同，这将使您完成 90% 以上的工作，因为老实说，您的问题并没有包含太多信息，所以您让我们**假设**一些事情。

**注意：**我曾经`scriptcs`编译、运行和证明这个例子，所以这就是它没有那么结构化的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-13T12:36:28.360

如果我确实正确理解了您的问题，您会想要这样做。

```
// Your class definitions
public class YearlyResourceReport
{
    public YearlyResourceReport()
    {
        this.MonthlyResourceReports = new List<MonthlyOrderInfo>();
    }

    public List<MonthlyOrderInfo> MonthlyResourceReports { get; set; }
}

public class MonthlyOrderInfo
{
    public string Month { get; set; }
    public int MonthNumber { get; set; }
    public OrdersInfo OrdersInfo { get; set; }
}

public class OrdersInfo
{
    public int Id { get; set; }
    public string description { get; set; }
    public int TotalOrders { get; set; }
    public double TotalRevenue { get; set; }
} 
```

您可以按如下方式创建包含 YearlyResourceReport 类：

```
 public YearlyResourceReport GetYearlyOrders()
 {
    YearlyResourceReport yrr = new YearlyResourceReport();
    for(int i = 1; i <= 12; i++)
    {
        yrr.MonthlyResourceReports.Add(new MonthlyOrderInfo {
        moi.MonthNumber = i,
        moi.OrdersInfo = WorkOrderEntity.GetMonthlyOrders(year, i, loggedInUser, customerIds, sortBy).ToList()
        });
    }
    return result;
 } 
```

# c# - 实体框架、C# 和超类

> ID：16192015
> 
> 赞同：0
> 
> 时间：2013-04-24T12:25:48.190
> 
> 标签：c#, database, entity-framework, inheritance, superclass

我的数据库中有 6 个 100% 相等的表，唯一的变化是名称。看起来像这样：

Offers_1、Offers_2、Offers_3 等等。

如果我在我的 C# 表单中使用实体框架，我会得到 6 个不同的类，这些类是由表命名的。有没有办法可以为这些表使用父/超类？也许他们可以有一个标识符，说明他们是哪个号码或类似的东西。

我敢肯定，以前一定有人遇到过这个问题。

对于那些想知道为什么我有 6 张相等的桌子的人。我们在我们公司制定了自己的进出报价方式，因此我们可以在离线表格上操作并在在线表格中获得最大性能。

希望有帮助的头脑可以引导我走向光明:)

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:35:47.920

您似乎想使用 Table Per Inheritance (TPH) ：一个表用于多种类型。

[此处](http://msdn.microsoft.com/en-us/data/jj618292.aspx)首先针对模型进行解释。

这首先解释（例如）[here](http://msdn.microsoft.com/en-us/data/jj591617.aspx#2.4) for code。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T12:32:31.303

如果您使用 SQL to Linq 表，则可以编辑 .dbml 文件中的行名。通过这样做，您应该能够告诉您在 c# 代码中使用的女巫。

# android - 我可以在运行时加载特定的布局吗？

> ID：16192018
> 
> 赞同：0
> 
> 时间：2013-04-24T12:25:58.107
> 
> 标签：android

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);

    // Checks the orientation of the screen
    if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {
        Toast.makeText(this, "landscape", Toast.LENGTH_SHORT).show();
    } else if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT){
        Toast.makeText(this, "portrait", Toast.LENGTH_SHORT).show();
    }
} 
```

如果我的`orientation`更改，我不希望重新加载整个布局，而是专门`section/layout`为纵向模式重新加载/重新创建。

**更新：**

我已将它放在我的 mainifest =>`android:configChanges="orientation|screenSize|keyboardHidden"`中，因此不会再次重新创建整个活动。但是我活动中的某个部分需要因`potrait and landscape`模式而异。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T12:32:59.510

利用 `include layout`

***例如：***

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" 
    android:layout_width=”match_parent”
    android:layout_height=”match_parent”
    android:background="@color/app_bg"
    android:gravity="center_horizontal">

    <include layout="@layout/titlebar"/>

    <TextView android:layout_width=”match_parent”
              android:layout_height="wrap_content"
              android:text="@string/hello"
              android:padding="10dp" />

    ...

</LinearLayout> 
```

现在在和中创建单独`titlebar`的布局`res/layout``res/layout-land`

有关更多信息，请参阅[使用 <include> 标记](http://developer.android.com/training/improving-layouts/reusing-layouts.html#Include)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T12:33:28.297

它是自动的。如果您创建一个文件夹 layout-land 并使用“同名”创建新布局（如果它是 layout 文件夹中的 main.xml，那么它也应该是 layout-land 中的 main.xml）。然后，当android在方向更改为横向时重新创建您的布局时，它将加载layout-land文件夹下的那个。

如需更多[信息](http://developer.android.com/training/basics/supporting-devices/screens.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T12:32:44.957

无需使用`onConfigchange()`.

中创建两个布局文件夹`res`。

`layout_land`并将`layout_port`这些给定的 xml 放在这些`layouts`.

在这里你需要创建两个`layouts`同名的

1-`layout_change`

2-`layout_change`

在端口中添加您想要的新更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T12:28:20.403

我认为你应该让它`Android`发挥作用。当设备旋转时，Activity 被销毁并重新创建。这意味着`onCreate`被调用。我将检查内部的方向`onCreate`并选择正确的布局。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T12:28:41.117

我不完全理解你的问题，但是当方向改变时，你的整个活动将被破坏并重新加载，所以每个布局都会被重新加载。

# c# - AntiForgery.GetTokens：oldCookieToken 参数的用途是什么？

> ID：16192019
> 
> 赞同：21
> 
> 时间：2013-04-24T12:26:00.690
> 
> 标签：c#, ios, asp.net-mvc, csrf, antiforgerytoken

我们正在用objective-c 编写一个iOS 移动应用程序，它可以将帖子发送到我们的ASP.NET MVC 服务器应用程序。在 iPhone 上，HTTP 堆栈（和 cookie 等）似乎与 Safari 共享。这让我们对 XSRF 攻击持开放态度，所以除非我弄错了，否则我们需要使用防伪令牌保护 POST，并使用`ValidateAntiForgeryTokenAttribute`.

我将通过说我没有正确理解生成和验证防伪令牌的机制来限定这个问题......特别是，在这种情况下使用的术语“nonce”有点神秘。

因为我们没有将 HTML 传递给客户端，所以我们不能使用标准`@Html.AntiForgeryToken()`，所以我们必须使用它[`AntiForgery.GetTokens`](http://msdn.microsoft.com/query/dev11.query?appId=Dev11IDEF1&l=EN-US&k=k%28System.Web.Helpers.AntiForgery.GetTokens%29;k%28TargetFrameworkMoniker-.NETFramework)来获取令牌并将其分发给我们的客户端。这有一个神秘的第一个参数：`oldCookieToken`. 目前，我只是将其设置为`null`，一切似乎都正常。那么谁能告诉我......将旧令牌提供给令牌生成算法有什么用？如果只向我们的 iOS 应用程序发出一个令牌并重复用于多个帖子，这会不会有问题？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-05-20T21:36:30.127

`AntiForgery.GetTokens`将尝试重用旧的 cookie 令牌进行验证。因此，如果您已经有一个想要重用的验证令牌，它将尝试使用它而不是生成一个新的。如果旧令牌无效，它将生成一个新令牌并使用它。

所以传递`null`到`oldCookieToken`是有效的。它只是告诉`GetTokens`总是生成一个新的 cookie 令牌。

# asp.net - 将 select 的结果传递给删除查询

> ID：16192023
> 
> 赞同：0
> 
> 时间：2013-04-24T12:26:10.487
> 
> 标签：asp.net

我有一张桌子

```
NAME   |   BONUS  
----------------
anil   |   40  
suresh |   25  
ramesh |   44  
anil   |   35  
anil   |   15 
```

我想删除具有`name = anil and bonus < max bonus of anil OUTPUT`

```
anil   | 40
suresh | 25
ramesh | 44 
```

我试过查询：

```
delete from table where name like 'anil' and bonus < (select max(bonus) 
from table where name like 'anil'; 
```

但它给出了一个语法错误。任何人都可以帮忙。我会很感激的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T12:31:14.137

您缺少子查询的结尾括号：

```
delete from table
where
  name like 'anil' and
  bonus < (select max(bonus) from table where name like 'anil' 
```

应该

```
delete from table
where
  name like 'anil' and
  bonus < (select max(bonus) from table where name like 'anil') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T12:31:57.263

您需要将 Group by 与聚合函数一起使用。

检查以下查询是否相同。

```
delete from table where bonus < (select max(bonus) from table where name like 'anil' Group By name) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T12:48:58.870

“表”一词是保留的 SQL 关键字，我认为您的错误指的是

> *您不能在 FROM 子句中指定目标表“表”进行更新*

# css - 布局显示浮动元素周围的意外边框

> ID：16192027
> 
> 赞同：2
> 
> 时间：2013-04-24T12:26:19.990
> 
> 标签：css, layout, css-float, positioning

**小提琴**

[http://jsfiddle.net/cZH7F/1/](http://jsfiddle.net/cZH7F/1/)

为什么`.sample-section`'s 的边框会影响这个包含前一个元素中包含的浮动元素的大区域？

**编辑（解决方案）：**

所以，对于未来的访客，我将总结我今天在这里学到的东西

**can 元素中的空格`HTML`会导致意外行为：**

*   [带空格](http://jsfiddle.net/mXUUp/2/)

*   [没有他们](http://jsfiddle.net/mXUUp/3/)

**CSS 属性`display: inline-block`可以替代`float`**

*   [内联块](http://jsfiddle.net/mXUUp/3/)
*   [浮点数（出于某种原因与空格一起使用）](http://jsfiddle.net/mXUUp/4/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:31:34.750

给予`display: inline-block;`而`.features-section`不是`float:left`

```
.features-section{
   display: inline-block; /* remove float: left */
   --------
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T12:58:29.363

视觉问题的出现是因为浮动元素产生了很大的间隙。

您可以使用以下规则修复它：

```
.start-page-upper{
    overflow: auto;
} 
```

向各个部分添加轮廓是说明性的，因此请查看布局的格式，请参阅：http: [//jsfiddle.net/audetwebdesign/cZH7F/3/](http://jsfiddle.net/audetwebdesign/cZH7F/3/)

**为什么浮动会导致这种情况？**

[正如https://stackoverflow.com/a/16192105/564353](https://stackoverflow.com/a/16192105/564353)所指出的，`.start_page_upper`由于它的子元素是浮动的，因此它的高度崩溃为零（因此不会影响包含块的高度）。下面的流入元素是`.sample_section`并且在零高度之后开始`.start_page_upper`，因此是页面的顶部。

但是，浏览器必须为浮动元素提供空间（称为间隙），并且由于浮动元素填满了页面宽度，它们会强制其中的内容在`.sample-section`浮动下方开始新的一行。

结果，边框包围了内容的固有高度和浮动元素生成的高度间隙高度。

触发了一种不同的`overflow: auto`格式化模式来解决这个问题。（不重新阅读 w3.org 文档，我认为这`overflow: auto`意味着在计算包含块的高度时要考虑溢出内容的高度，并且浮动内容正在溢出。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T12:30:15.953

这是因为`.sample_section`开始的高度与 相同`.start_page_upper`，因为它`div`没有高度，因为它的所有元素都是`float`ing。

添加`clear: both;`到`.sample_section`修复它。

# sql - 函数如何将数组或设置值作为 PostgreSQL 中用户定义函数的参数 (IN)

> ID：16192035
> 
> 赞同：0
> 
> 时间：2013-04-24T12:26:43.710
> 
> 标签：sql, postgresql, user-defined-functions

我正要创建一个用户定义的函数来在基于超图的数据库中实现分面搜索，该函数将返回带有计数的分面。问题是我需要传递要搜索的字段集。我不知道该怎么做。请看一下功能并帮助我。我想传递 search_fields 有点像 {'node_type', 'node_title', 'title'} 等。

```
CREATE OR REPLACE FUNCTION facets(
    IN keyword text, IN search_fields text, IN relation_name text, IN node_type text, IN group_by text, 
    OUT facet text, OUT count integer
   )

    RETURNS SETOF record AS

    $BODY$ 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:20:40.637

由于我不明白您到底在尝试什么，因此我将其作为首发。

要返回一组数组传递的列：

```
create or replace function facets(
    columns text[]
) returns setof record language plpgsql as $body$
begin
    return query execute format($$
        select %1$I, %2$I from t
    $$, columns[1], columns[2]);
end; $body$; 
```

要检索它，您必须声明返回类型：

```
select * from facets(array['a', 'b']) s(a text, b text); 
```

# ruby-on-rails - 如何将所有数组项放入 HAML 文件中？

> ID：16192038
> 
> 赞同：1
> 
> 时间：2013-04-24T12:26:50.427
> 
> 标签：ruby-on-rails, haml

无法打印数组中的所有项目。我做错了什么？

```
=@questionn.each do |item|
=item.to_s 
```

错误是：未终止的字符串遇到文件结尾，语法错误，意外 $end，期望关键字_end

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T12:29:43.267

haml 基于 2 个空格缩进。修复代码所需要做的就是将下一行缩进 2 个空格。您可能还想使用`-`而不是`=`第一行，这样它就不会输出返回的值`#each`

```
- @questionn.each do |item|
  = item.to_s 
```

# signalr - 如何在跨域场景中避免使用 signalR 的“混合内容警告”？

> ID：16192040
> 
> 赞同：6
> 
> 时间：2013-04-24T12:26:53.643
> 
> 标签：signalr, cross-domain

我正在尝试使用 SignalR 构建浏览器 <-> windows 应用程序通信的原型。

目标很简单：我在每个客户端上运行一个托盘应用程序，它读取智能卡并生成一个应该传递给 Web 应用程序的值。

我在托盘应用程序上构建了一个自托管的 SignalR 集线器，并且网页与它成功通信。

问题是，在生产中，webapp 是通过 HTTPS 交付的，而 signalR 集线器是通过经典的 HTTP（例如`http://localhost:8080`）交付的，并且正如预期的那样，大多数现代浏览器都会抛出混合内容警告并拒绝与 signalR 对话。

我的问题是：

1）有没有办法避免混合内容警告？

2) 是否值得构建一个支持 HTTPS 的自托管 http 服务器？如果是这样，浏览器是否会`https://localhost/`使用一些自签名证书与客户端通信？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T15:51:41.537

你在这里问两个问题：

**避免在 IE 中出现混合内容警告** 这很简单：转到工具 -> Internet 选项并选择安全选项卡。确保选择*Internet*区域，然后单击*自定义级别*按钮。向下滚动以*显示混合内容*并将其设置为*启用*。

请注意，此设置的存在是有原因的。更改它会带来安全风险，它适用于您访问的所有 Internet 站点。不建议让您的应用程序的未来用户更改此设置。但是，它仍然是可能的。

所有其他常见浏览器也允许更改此设置。

**使用自签名证书托管 SSL 服务器** 这当然是可能的。但是，请注意，您将面临与上述类似的警告，即“不受信任的连接”警告。它们用于通知用户有关未经官方证书颁发机构签名的证书。

创建自签名证书应该不会太难（事实上，您甚至可以在多台机器上重复使用相同的证书。这是使用未加密 HTTP 的可接受替代方案）。这样做的好处是用户可以确认一次安全异常，以后不用再被打扰；此外，这不会影响浏览其他页面时的网络安全，而不是`localhost`.

# javascript - 如何在保持 JS 表单验证功能的同时将默认文本放在输入字段中

> ID：16192042
> 
> 赞同：0
> 
> 时间：2013-04-24T12:26:57.633
> 
> 标签：javascript, forms

一些 jQuery 插件会在我提交表单之前检查我的表单字段（文本输入和选择）是否已填写。现在我想在“请输入您的姓名”等字段中添加默认值。但如果我这样做，JS 插件将验证这些字段，而实际上用户并没有在其中输入任何内容。

我希望 JS 不验证包含默认值的字段。可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T12:29:13.713

`Placeholder`在您的领域中使用

前任：

```
<input type="text" name="username" placeholder="please enter your name"> 
```

# apache-flex - 无法强制 IDEA 使用 maven 创建的 Flex 项目

> ID：16192044
> 
> 赞同：0
> 
> 时间：2013-04-24T12:27:09.223
> 
> 标签：apache-flex, maven, maven-2, intellij-idea, flex3

我正在使用 IDEA 10.5.4（我有该版本 IDEA 的许可证）
我有 maven 项目，其中部分是 Flex mxml 文件。
当目标war部署在tomcat中时，应用程序使用maven编译并正常工作。
Maven 项目依赖于 Flex 3.5 版本。
我已经`mvn idea:idea`在项目目录中运行。
之后，我将创建的 ipr 文件导入 IDEA。
所有源文件都在项目视图中可见，但 IDEA 似乎无法识别 Flex 代码。
即使在我为项目添加框架支持并指出源代码中提取的 Flex 3.6a SDK 之后，IDEA 仍指向`<mx:Script>`如下错误：`Unresolved type String`或`Unresolved type Boolean`.

如何强制 IDEA 识别 Flex 语法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T13:01:08.360

在 IntelliJ IDEA 论坛中回答：http: [//devnet.jetbrains.net/message/5485672#5485672](http://devnet.jetbrains.net/message/5485672#5485672)

# python - Python 列表理解：平方赔率 lambda

> ID：16192045
> 
> 赞同：-4
> 
> 时间：2013-04-24T12:27:10.377
> 
> 标签：python, list, list-comprehension

> 列表推导通常用于过滤和转换列表。
> 
> 给定变量 nums，其值为整数列表，编写一个赋值语句，将列表 nums 中奇数平方的列表分配给变量 square_odds。
> 
> 您必须使用列表理解

这是我到目前为止所拥有的，但我收到一个错误代码：

```
nums = [square_odds**2 for square_odds in nums if square_odds %2 != 0] 
```

我收到此错误代码：您尚未分配给 square_odds。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T12:28:07.437

我猜他们希望你这样做：

```
square_odds = [n**2 for n in nums if n % 2 != 0]
#         assign
# the variable
# square_odds 
#              the list 
```

# ruby-on-rails - ActiveAdmin 中的更宽列

> ID：16192047
> 
> 赞同：0
> 
> 时间：2013-04-24T12:27:18.473
> 
> 标签：ruby-on-rails, activeadmin

嗨，我正在与 RoR 和 ActiveAdmin 合作，我有一个不同值的表，其中一个是价格，例如：0,030 欧元，问题是在表中我看到它像：

```
0,030 
€ 
```

我想把它放在同一排，所有的价格都和那个一样长（0，xxx€）。那么关于如何制作更宽的专栏有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:48:13.793

这很可能仅通过 CSS 来解决。

In `/app/assets/stylesheets/active_admin.css.scss`（或等效）使用选择器定位列[`:nth-child`](https://developer.mozilla.org/en-US/docs/CSS/%3anth-child)并应用`white-space`限制以防止换行。

例如，如果它是第二列，你可以做这样的事情

```
td:nth-child(2) {
  white-space: nowrap;
} 
```

这方面的一个例子可以在下面的链接中看到。请注意第一列换行，而第二列被限制为单行（空白处没有中断）。

[http://jsfiddle.net/YLHBE/](http://jsfiddle.net/YLHBE/)

您可能必须比上面的通用示例更明确地定位列/表，因为上面会将样式应用于样式表适用的每个表的第二列。

# php - 如何让 Apache 服务 index.php 而不是 index.html？

> ID：16192049
> 
> 赞同：47
> 
> 时间：2013-04-24T12:27:20.820
> 
> 标签：php, apache, include

如果我将以下行放入`index.html`文件中，以使 Apache 包含该`index.php`文件：

```
 <?php include("/Live/ls_client/index.php"); ?> 
```

访问`index.html`该页面向我展示了这一点：

```
<!--?php include("/Live/ls_client/index.php"); ?--> 
```

这是为什么？为什么它实际上不包含 PHP 文件？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2013-04-24T12:35:43.593

正如其他人所指出的，您很可能没有`.html`设置来处理 php 代码。

话虽如此，如果您所做的只是使用`index.html`包含`index.php`，那么您的问题可能应该是“我如何将`index.php`其用作索引文档？

在这种情况下，对于 Apache (httpd.conf)，搜索`DirectoryIndex`并替换该行（仅在您`dir_module`启用时才有效，但这是大多数安装的默认设置）：

```
DirectoryIndex index.php 
```

如果您使用其他目录索引，请按优先顺序列出它们，即

```
DirectoryIndex index.php index.phtml index.html index.htm 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2015-08-01T22:28:17.227

截至今天（2015 年 8 月 1 日），`Apache2`在 中`Debian Jessie`，您需要编辑：

```
root@host:/etc/apache2/mods-enabled$ vi dir.conf 
```

并更改该行的顺序，将 index.php 带到第一个位置：

```
DirectoryIndex index.php index.html index.cgi index.pl index.xhtml index.htm 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-24T12:30:22.063

PHP 仅适用于`.php`文件扩展名。

如果您使用的是 Apache，您还可以在`httpd.conf`文件中设置 PHP 的扩展名。你必须找到这条线：

```
AddType application/x-httpd-php .php .html
                                     ^^^^^ 
```

并根据需要添加应使用 PHP 解释器读取的扩展数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-09-11T09:49:31.713

您可以通过两种方式进行设置，例如 (index.php index.html ...) 为文件中的设置优先级设置优先级转到此目录`/etc/apache2/mods-enabled/nano dir.conf`
- 并根据需要更改顺序 2-insecond 方式您可以转到`/etc/apache2/sites-available/nano abc.com.conf` 和更改 Documentroot 目录 - `/var/www/abc.com/public_html/`（提供您想要的文件，如 index.html 或 index.php）

# java - 使用 java 线程进行监控

> ID：16192056
> 
> 赞同：0
> 
> 时间：2013-04-24T12:27:24.707
> 
> 标签：java, multithreading, monitor

我想定期监控服务器（tomcat）是否运行。我作为独立应用程序执行此操作。我想定期（每 30 分钟）调用服务器监控程序...如何使用爪哇

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:30:35.200

您应该使用 ExecutorService 和一个任务：

```
 class MyTask implements Runnable {
     @Override
         public void run() {
             //do your work here
         }
 }

 ScheduledExecutorService service = Executors.newScheduledThreadPool(NUMBER_OF_THREADS);
 service.scheduleAtFixedRate(new MyTask(), 0, 30, TimeUnit.MINUTES); 
```

[执行服务](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T12:32:04.550

查看 Nagios。它是一个开源监控服务，还提供 java api。这是监控服务器的最佳方式。

但 Nagios 在实施方面需要付出一些努力。如果这不是您的选择，那么可以选择 ScheduledExecutorservice。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T12:34:14.583

有很多方法可以做到这一点，但我会推荐 Selenium 来做这种事情。 [http://docs.seleniumhq.org/projects/webdriver/](http://docs.seleniumhq.org/projects/webdriver/)

然后，您不仅可以检查服务器是否响应，还可以检查它是否显示了正确的内容。

[http://docs.seleniumhq.org/docs/03_webdriver.jsp#introducing-the-selenium-webdriver-api-by-example](http://docs.seleniumhq.org/docs/03_webdriver.jsp#introducing-the-selenium-webdriver-api-by-example)

```
package org.openqa.selenium.example;

import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.openqa.selenium.support.ui.ExpectedCondition;
import org.openqa.selenium.support.ui.WebDriverWait;

public class Selenium2Example  {
    public static void main(String[] args) {
        while (1){ 
            test();
            Thread.sleep(30L*60L*1000L); //sleep for 30 mins
        }
    }

    public static void test(){

        // Create a new instance of the Firefox driver
        // Notice that the remainder of the code relies on the interface, 
        // not the implementation.
        WebDriver driver = new FirefoxDriver();

        // And now use this to visit Google
        driver.get("http://www.google.com");
        // Alternatively the same thing can be done like this
        // driver.navigate().to("http://www.google.com");

        // Find the text input element by its name
        WebElement element = driver.findElement(By.name("q"));

        // Enter something to search for
        element.sendKeys("Cheese!");

        // Now submit the form. WebDriver will find the form for us from the element
        element.submit();

        // Check the title of the page
        System.out.println("Page title is: " + driver.getTitle());

        // Google's search is rendered dynamically with JavaScript.
        // Wait for the page to load, timeout after 10 seconds
        (new WebDriverWait(driver, 10)).until(new ExpectedCondition<Boolean>() {
            public Boolean apply(WebDriver d) {
                return d.getTitle().toLowerCase().startsWith("cheese!");
            }
        });

        // Should see: "cheese! - Google Search"
        System.out.println("Page title is: " + driver.getTitle());

        //Close the browser
        driver.quit();
    }
} 
```

# json - 更改使用 Model ExtJs 接收到的 Json 数据

> ID：16192063
> 
> 赞同：0
> 
> 时间：2013-04-24T12:27:45.793
> 
> 标签：json, extjs

我的 json 如下所示。

```
Message: {
  "totalCount":1,
  "responseObject":[{
    "mainTelePhoneNumber":"7702683320", 
    "name":"chinna"
  }]
} 
```

型号代码：

```
Ext.define('FormData', {
    extend: 'Ext.data.Model',
    fields: [{
        name: 'npa',
        mapping: 'mainTelePhoneNumber'
    },{
        name: 'customerName',
        mapping: 'name'
    }]
}); 
```

我在我的商店中使用上述模型。店里的听众如下。

```
listeners: {
   load: function(store, records, options) {
      if (records[0]) {
        formP.getForm().loadRecord(records[0]);
      } else {
        //console.log("no data!");
      }
      gridForm.setLoading(false);
    }
} 
```

但在我的表单中，我有 3 个文本字段 npa、nxx、xxxx。我必须拆分我在 JSON 中获取的数据以将数据解析为表单。

例如：mainTelePhoneNumber":"7702683320"，因此应该拆分为显示 npa:770、nxx:268 和 xxxx:3320。请帮助我如何使用该模型执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T14:41:49.880

我相信您会在模型字段上使用 convert 方法。这允许您处理：

```
convert: function (val, record) {
} 
```

您可以从中分块您的字符串。

[见分机文档](http://docs.sencha.com/extjs/4.1.3/#!/api/Ext.data.Field-cfg-convert)

# javascript - Kendo UI：通过 asp.net mvc 对网格进行本地化

> ID：16192065
> 
> 赞同：0
> 
> 时间：2013-04-24T12:27:53.620
> 
> 标签：javascript, asp.net-mvc-4, kendo-ui, kendo-grid

有没有办法从 ASP.NET MVC 代码为 Kendo UI Grid 设置新消息？我被一个需要传递给消息方法的 Kendo.Mvc.UI.Fluent.FilterableMessagesBuilder 对象所困扰。那么我应该在 Messages 方法中传递什么来更改值？

```
@(

Html.Kendo().Grid(Model)
    .Name("Grid")
    .Columns(col =>
    {
        col.Bound(p => p.Id);
        col.Bound(p => p.FirstName);
        col.Bound(p => p.LastName);
        col.Bound(p => p.Address);
        col.Bound(p => p.Zip);
    })

    .Pageable()
    .Sortable()
    .Scrollable()
    .Filterable(filter => filter.Messages(Kendo.Mvc.UI.Fluent.FilterableMessagesBuilder
    .DataSource(dataSource => dataSource
        .Ajax()
        .ServerOperation(false)
    )
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T20:24:35.150

```
 .Filterable(filterable => filterable.Messages(messages =>
         {
             messages.Info("Custom header text"); // sets the text on top of the filter menu
             messages.Filter("CustomFilter"); // sets the text for the "Filter" button
             messages.Clear("CustomClear"); // sets the text for the "Clear" button
         })) 
```

请查看 Kendo 文档（搜索过滤器菜单的本地化）

[过滤器菜单的本地化](http://docs.kendoui.com/getting-started/web/grid/localization)

# fluent-nhibernate - IIdConvention“覆盖”IAutoMapping

> ID：16192068
> 
> 赞同：2
> 
> 时间：2013-04-24T12:28:11.417
> 
> 标签：fluent-nhibernate, automapping

我正在为我的 Id 表使用特定的约定，并且我想覆盖特定实体的 ID 的映射方式。在这种情况下，大多数实体应该是 Class+ID 形式的键（例如：EmployeeId、DepartmentId 等），但我想为几个实体使用特定属性。所以，我添加了一个默认的约定规则：

```
class MyPrimaryKeyConvention:IIdConvention{
    public void Apply(IIdentityInstance instance) {
        instance.Column(instance.EntityType.Name + "Id");
        instance.GeneratedBy.Assigned();
    }
} 
```

然后，我想我可以通过执行以下操作来覆盖“特殊” EmployeeShortInfo 类的映射：

```
public class EmployeeShortInfoIdOverride: IAutoMappingOverride<Dtos.EmployeeShortInfo> {
    public void Override(AutoMapping<Dtos.EmployeeShortInfo> mapping) {
        mapping.Id(e => e.EmployeeId);
    }
} 
```

不幸的是，fluent 会尝试使用 EmployeeShortInfoId 而不是使用 EmployeeId 属性。IAutoMappingOverride 不应该覆盖类的默认约定吗？

谢谢。

# ms-access - 如何从文本框中的 sql 查询中获取结果？

> ID：16192079
> 
> 赞同：1
> 
> 时间：2013-04-24T12:28:49.513
> 
> 标签：ms-access, textbox, ms-access-2007

使用 Access 2007，我创建了一个表单 (f_login) 和一个查询 (c_login)，我想从我的 sql 查询中获取结果并通过文本框显示在我的表单上。这是我的 sql 查询（工作）：

```
SELECT t_lvl.nr_lvl
FROM t_admin INNER JOIN t_lvl ON t_admin.nr_rf = t_lvl.nr_rf
WHERE (((t_admin.nr_rf)=[Forms]![f_login]![txb_user].[VALUE]) AND ((t_admin.psw)=[Forms]![f_login]![txb_psw].[VALUE])); 
```

我试图将这些代码放在我的文本框的控制源上，但它们都不起作用......

```
=DLookup("[nr_lvl]","[c_login]")
=DLookup("nr_lvl","c_login")
=DLookup("c_login","nr_lvl")
=DLookUp("[c_login]";"[nr_lvl] =" & [Forms]![f_login]![txb_lvl]) 
```

我真的不知道为什么它不起作用！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T14:38:34.510

`DLookup`在立即窗口中测试您的表达式（您可以使用`Ctrl`+去那里`g`）。

在“立即”窗口中键入此内容并按 后，查看您得到的结果`Return`。

```
Debug.Print TypeName(DLookup("nr_lvl","c_login")), DLookup("nr_lvl","c_login") 
```

您告诉我们`c_login`是一个查询，向我们展示了该查询的 SQL，并确认该查询返回了正确的结果。由于`nr_lvl`是从该查询返回的字段，我不明白为什么在表单视图中打开表单`DLookup`时会失败。`f_login`

因此，请查看`DLookup`“立即”窗口中的情况……它是否返回无值、错误值或错误消息。然后你需要弄清楚如何改变它以获得正确的结果。

OTOH，如果`DLookup`在立即窗口中为您提供正确的结果，并且表单的问题是文本框值不会响应更改而更新`txb_user`和/或`txb_psw`您应该重新查询第三个文本框（`DLookup`用作它的控制源）来自前两个的更新后事件。

# css - 如何使这个 CSS 位于中间？

> ID：16192083
> 
> 赞同：-2
> 
> 时间：2013-04-24T12:29:02.030
> 
> 标签：css

我目前在 google.com 上发现的 CSS 存在问题，试图证明这个 CSS 结果不会出现在中间。我尝试编辑 CSS 但仍然不能，可能是因为我的CSS的知识较少..

它的这个HTML。

```
<div class='menu'>
<a href='clearsessions.php'><span>Home</span></a>
<a href='#'><span>Blog</span></a>
<a href='#'><span>Buy Followers</span></a>
<a href='#'><span>Contact</span></a>
</div 
```

CSS

```
.menu:after, .menu:before {
margin-top:0.5em;
content: "";
float:left;
border:1.5em solid rgba(0, 159, 234, 0.3 );}
.menu:after {
border-right-color:transparent;}
.menu:before {
border-left-color:transparent;
}
.menu a:link, .menu a:visited {
color:#fff;
text-decoration:none;
float:left;
height:3.5em;
overflow:hidden;}
.menu span {
background:rgba(0, 159, 234, 0.3 );
display:inline-block;
line-height:3em;
padding:0 1em;
margin-top:0.5em;
position:relative;
-webkit-transition: background, margin 0.2s;
-moz-transition: background, margin 0.2s;
-o-transition: background-color, margin-top 0.2s;
transition: background, margin 0.2s;
}
.menu a:hover span {
background:rgba(0, 159, 234, 0.5 );
margin-top:0;
}
.menu span:before {
content: "";
position:absolute;
top:3em;
left:0;
border-right:0.5em solid #9B8651;
border-bottom:0.5em solid rgba(0, 159, 234, 0.3 );
}
.menu span:after {
content: "";
position:absolute;
top:3em;
right:0;
border-left:0.5em solid #9B8651;
border-bottom:0.5em solid rgba(0, 159, 234, 0.3 );} 
```

请帮忙，， ：（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T12:40:06.457

您需要将其添加到您的 css 中：

```
.menu{
    position: relative;
    left: 50%;
    margin-left: -212px;
} 
```

你需要找到准确的margin-left px

# c - 对“initscr”Ncurses 的未定义引用

> ID：16192087
> 
> 赞同：23
> 
> 时间：2013-04-24T12:29:10.470
> 
> 标签：c, compilation, linker, ncurses, undefined-reference

我正在尝试编译我的项目并使用 lib ncurse。当编译器链接文件时，我遇到了一些错误。

这是我在 Makefile 中的标志行：

```
-W -Wall -Werror -Wextra -lncurses 
```

我已经包括了 ncurses.h

一些布局：

```
prompt$> dpkg -S curses.h
libslang2-dev:amd64: /usr/include/slcurses.h
libncurses5-dev: /usr/include/ncurses.h
libncurses5-dev: /usr/include/curses.h

prompt$> dpkg -L libncurses5-dev | grep .so
/usr/lib/x86_64-linux-gnu/libncurses.so
/usr/lib/x86_64-linux-gnu/libcurses.so
/usr/lib/x86_64-linux-gnu/libmenu.so
/usr/lib/x86_64-linux-gnu/libform.so
/usr/lib/x86_64-linux-gnu/libpanel.s 
```

这是我的错误：

```
gcc -W -Wall -Werror -Wextra -I./Includes/. -lncurses -o Sources/NCurses/ncurses_init.o -c Sources/NCurses/ncurses_init.c
./Sources/NCurses/ncurses_init.o: In function `ncruses_destroy':
ncurses_init.c:(.text+0x5): undefined reference to `endwin'
./Sources/NCurses/ncurses_init.o: In function `ncurses_write_line':
ncurses_init.c:(.text+0xc5): undefined reference to `mvwprintw'
./Sources/NCurses/ncurses_init.o: In function `ncurses_init':
ncurses_init.c:(.text+0xee): undefined reference to `initscr'
collect2: error: ld returned 1 exit status 
```

非常感谢

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-04-24T12:31:38.173

您需要更改您的 makefile，以便该`-lncurses`指令在 gcc 命令行上的目标代码*之后*出现，即它需要生成命令：

```
gcc -W -Wall -Werror -Wextra -I./Includes/. -o Sources/NCurses/ncurses_init.o -c Sources/NCurses/ncurses_init.c -lncurses 
```

这是因为目标文件和库在一次传递中按顺序链接。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-01-09T23:44:04.237

在 C++ 中，我只是通过链接 ncurses 库来修复它。

> 这是命令：

```
g++ main.cpp -lncurses 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-05T15:17:33.087

通过使用 LDLIBS 变量，我得到了正确顺序的标志：

```
ifndef PKG_CONFIG
PKG_CONFIG=pkg-config
endif

CFLAGS+=-std=c99 -pedantic -Wall
LDLIBS=$(shell $(PKG_CONFIG) --libs ncurses) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-19T08:58:10.660

```
man gcc | grep -A10 "\-l library" 
```

> -l 库
> 
> 链接时搜索名为 library 的库。（将库作为单独参数的第二种选择仅用于 POSIX 合规性，不推荐。）
> 
> 在命令中编写此选项的位置有所不同；链接器按照指定的顺序搜索和处理库和目标文件。因此，foo.o -lz bar.o 在文件 foo.o 之后但在 bar.o 之前搜索库 z。如果 bar.o 引用 z 中的函数，则可能不会加载这些函数。

# ios - 如何为 iOS 客户端生成 Nonce 令牌？

> ID：16192095
> 
> 赞同：2
> 
> 时间：2013-04-24T12:29:37.277
> 
> 标签：ios, soap, nonce

有没有办法使用用户名和共享密钥以及密码摘要在 iOS 客户端创建 Nonce 令牌。在创建对我的一个应用程序的基于 SOAP 的请求时，需要随机数。

如果您想了解更多信息或详细信息，请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:54:14.823

这是创建一个`UUID`类别的类`NSString`：

**NSString+UUID.h**

```
#import <Foundation/Foundation.h>

@interface NSString (UUID)

+ (NSString *) stringWithUUID;

@end 
```

**NSString+UUID.m**

```
#import "NSString+UUID.h"

@implementation NSString (UUID)

+ (NSString *) stringWithUUID {
    CFUUIDRef theUUID = CFUUIDCreate(NULL);
    CFStringRef string = CFUUIDCreateString(NULL, theUUID);
    CFRelease(theUUID);
    return (__bridge NSString *)string;
}

@end 
```

# birt - BIRT csv 发射器和 EJB

> ID：16192099
> 
> 赞同：0
> 
> 时间：2013-04-24T12:29:48.213
> 
> 标签：birt

我想在 Java EE 应用程序中使用 csv 发射器插件。可能吗？我收到以下错误：

```
org.eclipse.birt.report.engine.api.UnsupportedFormatException: The output format csv is not supported.
at org.eclipse.birt.report.engine.api.impl.EngineTask.setupRenderOption(EngineTask.java:2047)
at org.eclipse.birt.report.engine.api.impl.RunAndRenderTask.doRun(RunAndRenderTask.java:96)
at org.eclipse.birt.report.engine.api.impl.RunAndRenderTask.run(RunAndRenderTask.java:77) 
```

我的代码：

```
protected String generateReportFile(IRunAndRenderTask task, IReportRunnable design, IReportEngine engine, String reportType, String reportPrefix, String baseDir) throws BirtReportGenerationFault {
      CSVRenderOption csvOptions = new CSVRenderOption();

        csvOptions.setOutputFormat(CSVRenderOption.OUTPUT_FORMAT_CSV);

        csvOptions.setOutputFileName("C:/birt/logs/csvTestW.csv");

        csvOptions.setShowDatatypeInSecondRow(false);

        csvOptions.setExportTableByName("data");

        csvOptions.setDelimiter("\t");

        csvOptions.setReplaceDelimiterInsideTextWith("-");

        task.setRenderOption(csvOptions);               
        task.setEmitterID("org.eclipse.birt.report.engine.emitter.csv");

        try {
            task.run();// Error here
        } catch (EngineException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        task.close();

    return "C:/birt/logs/csvTestW.csv";//fileName;
  } 
```

相同的代码适用于 Java SE 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-31T08:57:47.653

我认为这里的问题是输出格式在 CSVRenderOptions 中传递的情况。

而不是使用`csvOptions.setOutputFormat(CSVRenderOption.OUTPUT_FORMAT_CSV);`
尝试使用`csvOptions.setOutputFormat("CSV");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-23T19:50:08.740

我有同样的问题，但使用pdf格式。我通过将 org.eclipse.birt.report.engine.emitter.pdf 添加到插件依赖项来解决它。

# php - 重命名控制器、视图和默认控制器后出现 404 错误

> ID：16192101
> 
> 赞同：-1
> 
> 时间：2013-04-24T12:29:56.137
> 
> 标签：php, codeigniter, wamp

执行以下操作后，我在 CodeIgniter\WAMP 中收到*404 Page Not Found错误：*

1.  重命名控制器（从*welcome.php*到*search.php*）
2.  将要从 search.php 加载的视图重命名为 *search_page*（见下文）
3.  重命名相关视图（从 *welcome_message.php* 到 *search_page.php*）
4.  将 config\routes.php 中的默认控制器重命名为搜索
5.  重新启动 WAMP

**搜索.php**

```
public function index()
{
    $this->load->view('search_page');
} 
```

**配置\路由.php**

```
$route['default_controller'] = "search"; 
```

我哪里做错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:36:25.083

我不是 codeigniter 程序员，但你应该创建类 Search -> `class Search extends CI_Controller`，不是吗？在此链接上找到它-> [http://ellislab.com/codeigniter/user-guide/general/controllers.html](http://ellislab.com/codeigniter/user-guide/general/controllers.html)

我认为每个框架都是一样的，cakephp、codeigniter、zend 等。

# jasper-reports - JasperReports：从 XMLDataSource 排序记录

> ID：16192109
> 
> 赞同：0
> 
> 时间：2013-04-24T12:30:29.680
> 
> 标签：jasper-reports, xmldatasource

我最近将 JasperReport 转换为使用 XMLDataSource 而不是从数据库中获取数据。这样做是出于性能原因。

其中一项要求是将某些记录组合在一起。

我以为我让它工作了，但这是因为我的记录被分组，在我用来测试的 XML 文件中按顺序排列。所以它们已经在 XML 中“分组/排序”了。

既然报表正在 Live 环境中使用，我们发现分组实际上并没有工作。

在做了一些搜索和阅读之后，似乎这并不容易。因为我们无法对 XMLDataSource 中的记录进行排序。

所以我的问题是：有没有办法对 XMLDataSource 中的记录进行排序/排序，以便它们正确分组，而不使用 XSLT。

我只想将 XML 转换为最后的手段。希望有另一种方法可以做到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T12:57:33.890

为什么不能在 iReport 中使用排序功能？ [例如看这个](http://community.jaspersoft.com/questions/803266/how-print-latest-date-jasper-reports-xml-datasource)

# javascript - 如何在购物车中提交之前检查有效的整数数量

> ID：16192110
> 
> 赞同：0
> 
> 时间：2013-04-24T12:30:30.280
> 
> 标签：javascript, jquery, jquery-ui, validation, form-submit

使用以下代码定义购物车数量输入表单。数量最初必须为空。

表单是通过 ajax 使用 jquery post() 提交的。

提交前如何检查数量是否填写了大于0的整数？

我尝试了下面的代码，但警报框返回 [htmlinputelement]，因此检查失败。

```
 <form class='browse-addtocart-form' action="<%= Url.Action("AddToCartPost", "Store")%>" method="post">
       <input class='amount ui-corner-all' name="quantity" type="number" value=""
     size="3" min="0" step="1" /></span>
    <input type="submit" value="Add to cart" />
       </form>
  <script>    
    $(function() {
$(".browse-addtocart-form").submit(function(event){
    var $form = $(this);
    var serializedData = $form.serialize();
    alert($form[0].quantity);
    if ($form[0].quantity==="" || $form[0].quantity==="0") {
      alert('Please fill quantity with non zero integer');
      event.preventDefault();
      return;
      }
    $.post('<%= Url.Action("AddToCart", "Store")%>',
      serializedData, function(response) {
          $("#cart-status").text(response.Total);
          showMessage(response.Message);
          showFadeOutMessage(response.Message);
        }));
   event.preventDefault();
  });
  });
      </script> 
```

使用 jquery、jquery UI、ASP.NET MVC2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:34:01.420

在您的`event.preventDefault();`. 你可以做 return false;` 这也将停止发送你的帖子，你甚至不需要 event 参数。

正如您已经拥有的那样`var serializedData = $form.serialize();`，我建议您从那里提取“数量” `serializedData.quantity`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T12:34:17.770

最简单的可能是调用 parseInt 并检查它是否不返回 NaN。

```
var q = parseInt($form[0].quantity, 10);
if(isNaN(q) || q === 0){
  alert('Please fill quantity with non zero integer');
} 
```

编辑添加 base=10 到 parseInt，并使用 isNaN()。如果不添加明确的基数 10，则 parseInt 会将以零开头的字符串误认为是八进制数，十六进制也是如此。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T12:35:38.480

尝试

```
$(function() {
    $(".browse-addtocart-form").submit(function(event) {
        var $form = $(this);
        var serializedData = $form.serialize();
        if (this.quantity.value === "" || this.quantity.value === "0") {
            alert('Please fill quantity with non zero integer');
            return false;
        }
        $.post('<%= Url.Action("AddToCart", "Store")%>',
                serializedData, function(response) {
                    $("#cart-status").text(response.Total);
                    showMessage(response.Message);
                    showFadeOutMessage(response.Message);
                });
        return false;
    });
}); 
```

# xcode - 在图形视图中单击视图控制器时如何使故事板转到文档大纲中的正确项目

> ID：16192121
> 
> 赞同：4
> 
> 时间：2013-04-24T12:31:14.103
> 
> 标签：xcode, storyboard

![故事板](https://i.stack.imgur.com/UZNDK.png)

我的 Storyboard 中有很多视图控制器，这使得导航有点困难。当我单击文档大纲中的视图控制器或其他项目时，它将自动滚动到该视图控制器的图形表示。但是，当单击图形表示时，文档大纲列表不会自动滚动到所选项目。我必须滚动浏览此列表，直到看到选定的内容才能知道它是正确的。

有没有办法在图形视图中选择一个视图控制器，让文档大纲滚动到这个视图控制器？

另一个相关的烦恼是，如果您过滤文档大纲以找到正确的视图控制器，然后单击该视图控制器，当您再次重置过滤器时，它将被滚动离开。有什么办法可以防止这种情况发生吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-19T22:24:40.163

> 有没有办法在图形视图中选择一个视图控制器，让文档大纲滚动到这个视图控制器？

在 Xcode 的图形编辑器中单击情节提要场景中的对象（视图控制器、视图等）时，Xcode 6 会滚动分层视图，以便所选对象至少部分可见。此外，该场景的分层列表打开，以便您可以看到对象。所以在你问这个问题的 2 年里，至少已经有了很大的改善。

另一个改进：如果您在图形编辑器中指向情节提要场景顶部的视图控制器，则会弹出一个带有场景名称的小视图，这使得在列表中查找它更容易一些。

> 如果您过滤文档大纲以找到正确的视图控制器，然后单击该视图控制器，则重置过滤器时它将被滚动

这似乎也有所改进：即使在清除搜索字段后，选定的视图控制器仍然可见。

# xamarin.ios - Monotouch：播放电影而不会中断其他应用程序（例如 iPod）的音频

> ID：16192125
> 
> 赞同：1
> 
> 时间：2013-04-24T12:31:24.377
> 
> 标签：xamarin.ios, mpmovieplayer, avaudiosession

我有一部无声电影（该剪辑中根本没有声音），作为我观看的背景电影。

当我用 iPod 播放音乐然后打开我的应用程序时，iPod 音乐停止。

我不想让我的电影打断 iPod 音频。我读过 UseApplicationAudioSession 已被弃用，但我现在如何实现这一点？

感谢您的帮助！

**编辑：**因为我在 MovieplayerViewController 上添加了一个图像，所以我不能使用 AVPlayer。

PS：我在这里找到的其他线程确实提到了已弃用的 UseApplicationAudioSession 解决方案，这就是我提出新问题的原因。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:49:24.323

这是我的解决方案：

```
AVAudioSession audioSession = AVAudioSession.SharedInstance();

                    NSError audioSessionError = new NSError();

                    audioSession.SetCategory(new NSString("AVAudioSessionCategoryAmbient"), out audioSessionError); 
```

# memory-management - Jenkins 消耗了很大一部分物理内存

> ID：16192126
> 
> 赞同：6
> 
> 时间：2013-04-24T12:31:28.823
> 
> 标签：memory-management, jenkins

我已经在虚拟操作系统上安装了 Jenkins。每当我启动 Jenkins 服务时，物理内存都会上升到 94%。然后它永远不会减少。所以我的系统变得非常缓慢且无响应。结果，Jenkins 网页变慢了。我为 RAM 分配了 4GB。有什么方法可以加速我的机器以限制 Jenkins 的内存使用？

# android - 设置 OnCancelListener 时的 DialogFragment 空指针

> ID：16192130
> 
> 赞同：2
> 
> 时间：2013-04-24T12:31:43.980
> 
> 标签：android, dialog, onclicklistener

我正在尝试在 DialogFragment 上设置侦听器，但不断收到空指针异常。

这是我的 DialogFragment 子类：

```
public static class TermsFragment extends DialogFragment {
        TextView t;
        private static String terms;

        static TermsFragment newInstance(String termsCond) {
            TermsFragment f = new TermsFragment();
            terms = termsCond;
            return f;
        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
            getDialog().setCanceledOnTouchOutside(true);
            View v = inflater.inflate(R.layout.termsandconditions, container, false);

            getDialog().setTitle("Terms and Conditions");

            t = (TextView) v.findViewById(R.id.termsText);

            t.setText(terms);

            return v;
        }
    } 
```

我从我的主要 SherlockFragment 中调用它，如下所示：

```
TermsFragment newFragment = TermsFragment.newInstance(terms);
newFragment.show(getFragmentManager(), "dialog"); 
```

这显示我的对话框很好。当我尝试添加这样的按钮侦听器时：

```
TermsFragment newFragment = TermsFragment.newInstance(terms);
Button cancel = (Button) newFragment.getDialog().findViewById(R.id.btnCancel);
        cancel.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                Log.e(TAG, "Clicked");

            }
        }); 
```

或像这样的一般 onCancel 侦听器：

```
newFragment.getDialog().setOnCancelListener(new Dialog.OnCancelListener() {

            @Override
            public void onCancel(DialogInterface dialog) {
                showLoadingView(false);

            }
        }); 
```

在显示对话框之前，我的应用程序因空指针异常而崩溃。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:36:33.757

而不是使用`public View onCreateView`你为什么不尝试使用`public Dialog onCreateDialog`. 这是一个例子：

```
@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
    LayoutInflater inflater = getActivity().getLayoutInflater();

    Bundle args = getArguments();
    currentName = args.getString(ARG_CURRENT_NAME);

    builder.setView(inflater.inflate(R.layout.name_dialog, null));
    builder.setTitle("Rename Rapper Program");
    builder.setMessage("Enter a new name for " + currentName + ":"); 
    builder.setPositiveButton("Rename", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
            newName = (EditText) getDialog().findViewById(R.id.new_name);
            newProgName = newName.getText().toString();
            mRename.renameProgram(currentName, newProgName);
        }
    });
    builder.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
            dismiss();
        }
    });

    return builder.create();    
} 
```

你将继续使用`.show()`你现在拥有的，你可以在你想要达到的目标之后对其进行建模。

# asp.net - Oracle 数据库和 .NET (C#) - 如何防止 SQL 注入

> ID：16192131
> 
> 赞同：0
> 
> 时间：2013-04-24T12:31:47.130
> 
> 标签：asp.net, sql, oracle, security, sql-injection

我将在 asp.net 页面中使用一个选择，即：

```
string name=TexBox1.Text;
string pas=TextBox2.Text;
string c="select * from users where name='"+name+"' and password ='"+pas+"'"; 
```

是否有任何方法可以防止 sql 注入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T12:58:29.703

首先，您必须验证代码中的输入数据，然后像参数一样使用它。因为如果发生未处理的异常并且您返回诸如“连接字符串”之类的敏感数据，您将提供有用的信息，例如“列”和“表”名称那很危险。其次，添加“数据访问层”来处理不在“代码隐藏”中的代码。您可以使用“存储过程”并从代码中调用它们，使用这种方式可以隐藏编程逻辑的查询，只将参数传递给存储过程，他完成这项工作，你只在出现异常的情况下返回错误发生。

这种预防措施是小型应用程序的基础，但存在许多其他方法来避免 SQL 注入。

# java - 密码：IllegalBlockSizeException 的原因是什么？

> ID：16192140
> 
> 赞同：21
> 
> 时间：2013-04-24T12:32:06.367
> 
> 标签：java, aes, encryption

我在使用[Cipher](http://docs.oracle.com/javase/7/docs/api/javax/crypto/Cipher.html#doFinal%28byte%5b%5d%29)时观察到以下情况。

加密代码：

```
Cipher aes = Cipher.getInstance("AES");
aes.init(Cipher.ENCRYPT_MODE, generateKey());
byte[] ciphertext = aes.doFinal(rawPassword.getBytes()); 
```

解密代码：

```
Cipher aes = Cipher.getInstance("AES");
aes.init(Cipher.DECRYPT_MODE, generateKey());
byte[] ciphertext = aes.doFinal(rawPassword.getBytes()); 
```

在运行解密代码时，我得到 IllegalBlockSizeException （输入长度​​必须是 16 的倍数......）。

但是如果我将解密代码更改为

```
Cipher aes = Cipher.getInstance("AES/ECB/PKCS5Padding"); //I am passing the padding too
aes.init(Cipher.DECRYPT_MODE, generateKey());
byte[] ciphertext = aes.doFinal(rawPassword.getBytes()); 
```

它工作正常。我知道它在模式中`algorithm/mode/padding`。所以我认为是因为我没有提到填充。所以我尝试在加密期间给出模式和填充，

加密代码：

```
Cipher aes = Cipher.getInstance("AES/ECB/PKCS5Padding");//Gave padding during encryption too
aes.init(Cipher.ENCRYPT_MODE, generateKey());
byte[] ciphertext = aes.doFinal(rawPassword.getBytes()); 
```

解密代码：

```
Cipher aes = Cipher.getInstance("AES/ECB/PKCS5Padding");
aes.init(Cipher.DECRYPT_MODE, generateKey());
byte[] ciphertext = aes.doFinal(rawPassword.getBytes()); 
```

但它因 IllegalBlockSizeException 而失败。

原因是什么，为什么会出现异常以及下面到底发生了什么。如果有人可以帮忙？提前致谢

**更新**

看起来问题出在我正在加密和解密的字符串上。因为，即使我说的代码有效，也并不总是有效。我基本上是在加密 UUID（例如：8e7307a2-ef01-4d7d-b854-e81ce152bbf6）。它适用于某些字符串，但不适用于某些其他字符串。

加密字符串的长度是 64，可以被 16 整除。是的，我在同一台机器上运行它。

密钥生成方法：

```
 private Key generateKey() throws NoSuchAlgorithmException {
    MessageDigest digest = MessageDigest.getInstance("SHA");
            String passphrase = "blahbl blahbla blah";
    digest.update(passphrase.getBytes());
    return new SecretKeySpec(digest.digest(), 0, 16, "AES");
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-24T14:41:16.160

在解密期间，*只有*`IllegalBlockSizeException`当输入数据不是块大小的倍数（AES 为 16 字节）时，才能得到一个。

如果密钥或数据无效（但长度正确），您会得到 a `BadPaddingException`，因为 PKCS #5 填充在明文中是错误的。偶尔，填充会偶然出现正确的，你也不会例外。

* * *

注意我建议您始终指定填充和模式。否则，如果提供商更改默认设置，您可能会感到惊讶。AFAIK，Sun 提供商转换`"AES"`为`"AES/ECB/PKCS5Padding"`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-24T14:40:55.407

虽然我还没有完全理解内部结构，但我发现了问题所在。

我获取加密字符串作为 GET 请求参数。由于字符串包含不安全的字符，因此在请求时字符串会损坏。解决办法是，做URL编码和解码。

我可以使用[URLEncoder](http://docs.oracle.com/javase/6/docs/api/java/net/URLEncoder.html)和[URLDecoder](http://docs.oracle.com/javase/6/docs/api/java/net/URLDecoder.html)成功地做到这一点。

现在结果是一致的。谢谢 ：）

如果有人可以为此做出更多贡献，我将不胜感激。

# c++ - QtPainter Error Paint device returned engine ==0, type 3 , Painter not active

> ID：16192142
> 
> 赞同：12
> 
> 时间：2013-04-24T12:32:14.887
> 
> 标签：c++, qt, qpainter

我正在尝试绘制图像的某些点，但我不知道为什么它不起作用。我已经定义了一个 QImage 并且我想修改一些点。

```
QImage *cou= new QImage(height,largeur,QImage::Format_Mono);
    cou->fill(1);
    QPainter *fig=new QPainter (cou);
    for (i=0;i<size_;i++)
    {
        fig-> drawPoint(floor(propa[i]),nbmax[i]);
    } 
```

当我执行我获得的代码时

```
QPainter::begin: Paint device returned engine == 0, type: 3 
```

并在以下几行中：

```
QPainter::drawPoints: Painter not active 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-04-24T12:49:36.947

```
QPainter::begin: Paint device returned engine == 0, type: 3 
```

该错误意味着您尝试绘制的图像是空图像。使用`isNull`on`cou`进行检查。
图像为空的原因可能是构建图像时的错误`height`和`largeur`参数，或者您内存不足

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-27T10:29:08.933

```
QPaintEngine* eng = cou->painterEngine();
if(eng) {
//   create QPainter ...
} 
```

# excel - 检查功能/子是否存在于另一个工作簿中

> ID：16192144
> 
> 赞同：0
> 
> 时间：2013-04-24T12:32:19.540
> 
> 标签：excel, vba

我正在编写一个宏，其中包括对不同工作簿中子的调用。我可以使用原始工作簿中的代码让另一个工作簿中的子运行。我试图首先检查子/函数是否存在（如果子被重命名等情况下的错误处理）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T13:49:18.510

您可以处理来自丢失过程的错误，也可以使用**Visual Basic for Applications 可扩展性库**

这在[Chip Pearson 的网站上有很好的记录](http://www.cpearson.com/excel/vbe.aspx)

这是我多年前在**Chip Peartsons 网站**上找到并修改的代码：

```
Option Explicit    

Function checkProcName(wBook As Workbook, sModuleName As String, sProcName As String) As Boolean
' ===========================================================================
' Found on http://www.cpearson.com at http://www.cpearson.com/excel/vbe.aspx
' then modified
'
' USAGE:
' to check if a procedure exists, call 'checkProcName' passing
' in the target workbook (which should be open), the Module,
' and the procedure name
'
' ===========================================================================
Dim VBProj As VBIDE.VBProject
Dim VBComp As VBIDE.VBComponent
Dim CodeMod As VBIDE.CodeModule

Dim ProcName As String
Dim LineNum As Integer
Dim ProcKind As VBIDE.vbext_ProcKind

    checkProcName = False

    Set VBProj = wBook.VBProject
    Set VBComp = VBProj.VBComponents(sModuleName)
    Set CodeMod = VBComp.CodeModule

    With CodeMod
        LineNum = .CountOfDeclarationLines + 1
        Do Until LineNum >= .CountOfLines
            ProcName = .ProcOfLine(LineNum, ProcKind)
            If ProcName = sProcName Then
                checkProcName = True
                Exit Do
            End If
            Debug.Print ProcName
            LineNum = .ProcStartLine(ProcName, ProcKind) + .ProcCountLines(ProcName, ProcKind) + 1
        Loop
    End With

End Function

Function ProcKindString(ProcKind As VBIDE.vbext_ProcKind) As String
    Select Case ProcKind
        Case vbext_pk_Get
            ProcKindString = "Property Get"
        Case vbext_pk_Let
            ProcKindString = "Property Let"
        Case vbext_pk_Set
            ProcKindString = "Property Set"
        Case vbext_pk_Proc
            ProcKindString = "Sub Or Function"
        Case Else
            ProcKindString = "Unknown Type: " & CStr(ProcKind)
    End Select
End Function 
```

# jquery - Jquery Datepicker 丢失格式

> ID：16192145
> 
> 赞同：0
> 
> 时间：2013-04-24T12:32:24.827
> 
> 标签：jquery

任何人都可以帮助这个 jquery，它旨在不允许任何用户选择小于开始日期的日期，这可以正常工作，但我无法让它使用英国日期格式或阻止选择过去的日期，如果我删除除日期格式之外的所有内容，则格式将按预期工作。

```
$(document).ready(function () {
    $("#CheckIn").datepicker({
        numberOfMonths: 1,
        onSelect: function (selected) {
            $("#CheckOut").datepicker({ dateFormat: 'dd/mm/yy' }).val();
            $("#CheckOut").datepicker("option", "minDate", selected);

        }
    });
    $("#CheckOut").datepicker({
        numberOfMonths: 1,
        onSelect: function (selected) {
            $("#CheckIn").datepicker({ dateFormat: 'dd/mm/yy' }).val();
            $("#CheckIn").datepicker("option", "maxDate", selected);

        }
    });
}); 
```

这可以自己工作

```
$("#CheckIn").datepicker({ dateFormat: 'dd/mm/yy' }).val(); 
```

谁能看到我哪里出错了

忘了提这是我用来阻止人们选择过去一天的代码，但不起作用

```
$("#Checkin").datepicker({ minDate: 0 }); 
```

谢谢

======================工作代码========================== =

下面的代码还包括阻止用户选择过去的日期。感谢 Jens Ahlsten Herlevsen 和 Palash Mondal 的帮助。

```
$(document).ready(function () {
    $("#CheckIn").datepicker({
        numberOfMonths: 1,
        dateFormat: 'dd/mm/yy',
        minDate: 0, //<<< Prevent day in past been selected
        onClose: function (selected) {
            $("#CheckOut").datepicker("option", "minDate", selected);

        }
    });
    $("#CheckOut").datepicker({
        numberOfMonths: 1,
        dateFormat: 'dd/mm/yy',
        onClose: function (selected) {
            $("#CheckIn").datepicker("option", "maxDate", selected);

        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:39:32.193

```
$(document).ready(function () {
$("#CheckIn").datepicker({
    numberOfMonths: 1,
    dateFormat: 'dd/mm/yy',
    onClose: function (selected) {
        $("#CheckOut").datepicker("option", "minDate", selected);

    }
});
$("#CheckOut").datepicker({
    numberOfMonths: 1,
    dateFormat: 'dd/mm/yy',
    onClose: function (selected) {
        $("#CheckIn").datepicker("option", "maxDate", selected);

    }
});
}); 
```

[http://jsfiddle.net/qJcXh/](http://jsfiddle.net/qJcXh/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T12:36:58.333

你可以这样做：

```
$("#CheckIn").datepicker({
    numberOfMonths: 1,
    dateFormat: 'dd/mm/yy',
    onSelect: function (selected) {
        var date = $("#CheckOut").val();
        $("#CheckOut").datepicker("option", "minDate", selected);
    }
});
$("#CheckOut").datepicker({
    numberOfMonths: 1,
    dateFormat: 'dd/mm/yy',
    onSelect: function (selected) {
        var date = $("#CheckIn").val();
        $("#CheckIn").datepicker("option", "maxDate", selected);
    }
}); 
```

# arrays - Powershell Switch - 根据数组元素的数量设置选择数量

> ID：16192147
> 
> 赞同：0
> 
> 时间：2013-04-24T12:32:29.420
> 
> 标签：arrays, powershell, switch-statement

我正在尝试创建一个“switch”语句，该语句将根据返回的对象数量进行选择。

第一个例子：

```
[array]$A1 = ("QWERTY", "ASDFGH") 
```

所以“开关”功能将如下所示：

```
Switch ($Login = read-Host -Prompt Login) {
1 { $Login = "QWERTY" }
2 { $Login = "ASDFGH" } 
```

}

第二个例子：

```
[array]$A2 = ("A", "B", "C", "D") 
```

所以“开关”功能将如下所示：

```
Switch ($Login = read-Host -Prompt Login) {
1 { $Login = "A" }
2 { $Login = "B" }
3 { $Login = "C" }
4 { $Login = "D" }
} 
```

所以我在考虑一些 foreach 循环来创建简单的字符串，然后从字符串运行命令。我设法做到这一点，但我无法将生成的字符串作为命令运行：

```
[array]$AR1 = ("QWERTY", "ASDFGH")

$q1 = "switch (Read-Host -Prompt Login) {"
$q2 = "    }"
$Number = 0
$Script:ArrayFull = $null

$AR1 | %  {

    $_

$ArrayElement = $null

$NameOfTheLoginVariable = '$Script:User_Login'
$NumberOfArrayElements = $AR1.count
    if ($NumberOfArrayElements -ne 0) {
    $Number = $Number+1
    $NumberOfArrayElements = $NumberOfArrayElements-1

    $ArrayElement = "$Number { $NameOfTheLoginVariable = '$_' }"
    $ArrayElement
    $Script:ArrayFull += $ArrayElement

    }
}

$SwitchCommand = $q1+$ArrayFull+$q2
$SwitchCommand = $SwitchCommand.ToString()

$Test1 = "switch (Read-Host) {1 { $Script:User_Login = 'QWERTY' }1 { $Script:User_Login = 'ASDFGH' }    }"
#switch (Read-Host -Prompt Login) {1 { $Script:User_Login = 'QWERTY' }1 { $Script:User_Login = 'ASDFGH' }    }

#& $Test1
& $SwitchCommand 
```

但即使此代码生成正确的“Switch”语句作为字符串，我也无法执行它。为什么 ？

无论如何，这种方法真的很丑，所以也许有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T12:46:29.380

该 switch 语句由脚本块组成。你不能只用一个字符串代替它们。

您可以使用 [scriptblock]::create() 从字符串创建新的脚本块，但在这个应用程序中，我想我只需要处理脚本块的有序哈希表。然后，您可以在 manu 中显示将映射到需要运行的脚本块的键，以及与您需要显示的选项数量相匹配的数组索引。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T15:22:27.317

虽然可能需要问题域的完整上下文@Shay的解决方案，但所述示例只是要求进行数组查找，因此可以通过以下方式实现相同的结果：

```
[array]$a = "A", "B", "C", "D"
[int]$login = read-host -prompt login
$selected = & {if ($login -ge 0 -and $login -lt $a.Length) { $a[$login-1] }} 
```

因此，如果您再次输入 2，您将获得“B”。就像在所述示例和 Shay 的解决方案中一样，如果您输入的值超出范围，则不会得到返回值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T13:47:41.920

试试这个，输入1-4之间的数字whyen提示：

```
[array]$a = "A", "B", "C", "D"

$login = read-host login

$switch = 'switch($login){'

for($i=1;$i -le $a.length; $i++)
{
    $switch += "`n`t$i { '$($a[$i-1])'; break }" 
}

$switch += "`n}"

Invoke-Expression $switch 
```

# java - Axis2 Webservice 故障 - 找不到端点引用的服务

> ID：16192151
> 
> 赞同：1
> 
> 时间：2013-04-24T12:32:33.793
> 
> 标签：java, web-services, jakarta-ee, soap, axis2

您好创建了一个测试应用程序来学习 Axis2。我将轴与我的战争和 afetr 部署打包在一起，WSDL 也可以通过 URL 访问 -`http://localhost:8081/SajuAxis2/test/service/SajuServices.wsdl`

但是，当我尝试使用带有上述 URL 的客户端存根调用服务时，它不起作用。

```
SajuServicesStub stub = new SajuServicesStub("http://localhost:8081/SajuAxis2/test/service/SajuServices?wsdl"); 
```

但是，如果我用它替换端点 URL`http://localhost:9091/SajuAxis2/SajuService/SajuServices.SajuServicesHttpEndpoint` 就可以了。我正在使用 JDK1.6 和 JBoss。我在 metainf 的 conf 中包含了 axis2.xml 以及**services.xml**，如下所示

```
 <?xml version="1.0" encoding="UTF-8"?>
<!-- This file was auto-generated from WSDL -->
<!-- by the Apache Axis2 version: 1.5.6  Built on : Aug 30, 2011 (10:00:16 CEST) -->
<serviceGroup>
    <service name="SajuServices">
        <messageReceivers>
            <messageReceiver mep="http://www.w3.org/ns/wsdl/in-out" class="service.SajuServicesMessageReceiverInOut"/>
        </messageReceivers>
        <parameter name="ServiceClass">service.SajuServicesSkeleton</parameter>
        <parameter name="useOriginalwsdl">true</parameter>
        <parameter name="modifyUserWSDLPortAddress">true</parameter>
        <operation name="process" mep="http://www.w3.org/ns/wsdl/in-out" namespace="http://service">
            <actionMapping>urn:process</actionMapping>
            <outputActionMapping>urn:processResponse</outputActionMapping>
            <faultActionMapping faultName="RemoteException">urn:processRemoteException</faultActionMapping>
        </operation>
    </service>
</serviceGroup> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T08:26:39.110

我解决了。这是axis2.xml 中的错误配置。我给出了错误的上下文路径。

```
<parameter name="servicePath">SimpleService</parameter> 
```

更新至

```
<parameter name="servicePath">services</parameter> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T17:41:39.487

您必须提供服务端点 url..而不是 wsdl url。您正在向要处理的服务发送请求……而不是向 wsdl。

# html - Android 时间和日期选择器合二为一（相当于 iOS）

> ID：16192157
> 
> 赞同：0
> 
> 时间：2013-04-24T12:32:44.720
> 
> 标签：html, datepicker, uipickerview, timepicker, android-datepicker

我正在构建一个 HTML5 编码的应用程序，它将为 android 和 iPhone 包装。

我有一个按钮可以唤起日期/时间选择器。在 iOS 上，这很容易，因为选择器已经存在于一个中

![在此处输入图像描述](https://i.stack.imgur.com/H6Ydb.jpg)

Android 在两个不同的选择器中有日期和时间选择器。你有任何组合它们的例子吗？或者引入从一个选择器到另一个选择器的流程，而在开始屏幕上没有两个不同的按钮可供选择？

我想要的是屏幕上的 1 个按钮：“选择日期和时间”-> 打开组合选择器（或选择器流程）我不想要 2 个按钮：“选择日期”“选择时间”-> 在这里你需要打开两个采摘者独立。每个按钮一个。

任何建议、示例等都非常受欢迎。谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-05-01T20:46:33.620

每个浏览器呈现本机日期和时间选择器的方式略有不同。

如果您正在寻找一致的解决方案，可以查看[Mobiscroll Date & Time Scroller](http://mobiscroll.com/component/datetime)。

它同时支持 Android 和 iOS，并且是可主题化的，因此您可以更好地控制它的外观和感觉。

# ios - 限制滑动 UISlider 超过某个点

> ID：16192161
> 
> 赞同：7
> 
> 时间：2013-04-24T12:32:54.750
> 
> 标签：ios, objective-c, xcode, cocoa-touch, uislider

让我们假设`UISlider`我设置了一个特定的值。然后，滑块手柄按预期移动到该值。

现在我想让用户来回滑动滑块的手柄，但不要将值设置为`UISlider`小于我以编程方式分配给它的值。

因此，例如，我有一个`UISlider`最小值为 0，最大值为 100 的值，我将其值设置为 50。我不希望用户滑动“左侧”而不是 50，但在它的“右侧”我想让用户来回滑动手柄。

你如何在 Obj-C 中实现这种行为？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-24T12:40:59.523

您应该首先确保不断发送更新事件：

```
mySlider.continuous = YES; 
```

您也可以在故事板/笔尖中执行此操作（正如@fDmitry 所提到的，这是 IB 中的默认状态）。

然后，您必须将滑块链接到`IBAction`.h 文件中的一个（通过从 IB 到您的代码的 ctrl 拖动创建一个链接），并将其分配给滑块的“值已更改”事件。这将创建一个这样的方法：

```
-(IBAction)sliderValueChanged:(id)sender; 
```

以这种方式实现它：

```
- (IBAction)sliderValueChanged:(id)sender {

    float maxValue = 50.0f;

    if ([(UISlider*)sender value] > maxValue) {
        [(UISlider*)sender setValue:maxValue];
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T12:41:05.983

将您的滑块连接到`valueChanged:`行动。你应该像这样实现它：

```
- (void)mySliderValueChanged:(UISlider *)slider
{
  CGFloat myMinValue = 50.0f; // should be a global variable

  if(slider.value < myMinValue)
  {
    slider.value = myMinValue;
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-24T12:39:14.717

这个其实很简单：）

创建一个动作并将其指定为 UISlider 的 valueChanged 动作的选择器。在该方法中，执行一个简单的检查：如果滑块的值小于 50，则将其设置为 50。

如果您需要任何进一步的帮助，我可以在课后编写一些示例代码。希望能帮助到你！

# c# - asp.net 应用程序状态下的通用集合

> ID：16192166
> 
> 赞同：0
> 
> 时间：2013-04-24T12:33:23.407
> 
> 标签：c#, asp.net, webforms, state

我想将我的 asp.net 应用程序中的登录用户存储到一个集合中，并将这个集合存储在应用程序状态中。我有一个登录页面，在 Default.aspx 页面加载事件中我有以下代码：-

```
 protected void Page_Load(object sender, EventArgs e)
    {
        users = (List<Users>)HttpContext.Current.Application["loggedUsers"];

        if (User.Identity.IsAuthenticated == false)
        {
            Server.Transfer("Login.aspx");
        }

        if (User.Identity.Name != "")
        {
            users.Add(new Users { userName = User.Identity.Name.ToString() });

            HttpContext.Current.Application["loggedUsers"] = users;
        }
    } 
```

但是，在运行应用程序时，登录后，在我向列表中添加新对象的代码上抛出了未设置为对象实例的对象引用异常。如果我评论以下行：

```
users = (List<Users>)HttpContext.Current.Application["loggedUsers"]; 
```

应用程序将相应地运行，但是如果假设我们有两个用户，用户 A 和用户 B，并且用户 A 登录，他会被添加到列表中，但是一旦用户 B 登录，它将覆盖用户 A。

在我的网络服务中，我有以下方法，然后将返回当前登录的用户列表，这些用户工作正常。

```
 [WebMethod(EnableSession = true)]
    public List<Users> getLoggedInUsername()
    {
        return (List<Users>)Application["loggedUsers"];
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T13:00:25.973

问题是，当您的第一个用户进入时，您在应用程序中没有任何价值。在强制转换之前检查 NULL 应该是一种常见的做法。

```
 List<User> user = null;
      if(HttpContext.Current.Application["loggedUsers"] == null)
      {
         user = new List<User>();
      }
      else
      {
         user = (List<User>)HttpContext.Current.Application["loggedUsers"]; 
      } 
```

# python - 返回变量与设置变量

> ID：16192171
> 
> 赞同：0
> 
> 时间：2013-04-24T12:33:54.823
> 
> 标签：python, oop

我正在考虑以下类初始化方法：

```
class Foo():
    def __init__(self):
        self.name = self.get_name()
    def get_name(self):
        return raw_input("Name: ")

class Foo():
    def __init__(self):
        self.name = ""
        self.get_name()
    def get_name(self):
        self.name = raw_input("Name: ")

class Foo():
    def __init__(self):
        self.name = raw_input("Name: ") 
```

是否有任何实际理由选择其中一个而不是其他？

如果不是，那可能被认为是最 Pythonic 的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T12:42:36.853

*   如果可能，`input()`将名称放在类之外并将其作为参数传递给它的`__init__()`.
*   如果这不是一个选项，我会选择第二种选择
*   我会重命名`get_name()`为`query_name()`or `input_name()`。`get_name()`听起来像是一个 getter（*获取*的值），而不是一个*从 user**获取*数据`name`的 setter 或例程。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T12:40:44.433

我不喜欢在构造函数中进行原始输入的想法，但毕竟，为什么不......我更喜欢：

```
class Foo():
    def __init__(self):
        self.name = ""

    def prompt_name(self):
        self.name = raw_input("Name: ")

if __name__ == "__main__":
    aFoo = Foo()
    aFoo.prompt_name() 
```**

# php - 注意：未定义变量：email_content

> ID：16192174
> 
> 赞同：0
> 
> 时间：2013-04-24T12:34:01.443
> 
> 标签：php, notice, mail-form

我有一个正在使用的联系表，我只收到两个通知：

注意：未定义变量：email_content 注意：未定义变量：标头

这是代码

```
// check if an error was found - if there was, send the user back to the form 
if (isset($error)) { 
$_POST['e'] = $error; 
} else {

// write the email content <-- HERE IS WHERE THE ERROR OCCURS
$email_content .= "Naam:" . htmlspecialchars($name, ENT_QUOTES) . "\n\n"; 
$email_content .= "Tel:" . htmlspecialchars($tel, ENT_QUOTES) . "\n\n"; 
$email_content .= "E-mail:" . htmlspecialchars($email_address, ENT_QUOTES) . "\n\n"; 
$email_content .= "Onderwerp:" . htmlspecialchars($onderwerp, ENT_QUOTES) . "\n\n"; 
$email_content .= "Bericht:" . htmlspecialchars($message, ENT_QUOTES) . "\n\n"; 

/*
$email_content .= "Naam:$name\n\n"; 
$email_content .= "Tel:$tel\n\n"; 
$email_content .= "E-mail:$email_address\n\n"; 
$email_content .= "Onderwerp:$onderwerp\n\n"; 
$email_content .= "Bericht:$message\n\n";
*/ 
$header .= 'From: www.UTI.nl';   <-- AND HERE IS ALSO WHERE THE ERROR OCCURS
// send the email 
mail ("robin2609@gmail.com", "Nieuw bericht van de UTI website", $email_content, $header );   <-- this is 

// send the user back to the form 
$_POST['s'] = 'Bedankt voor uw bericht.'; 
```

我错过了什么？我希望你们能帮助我。

亲切的问候，

罗宾

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:35:43.097

您将字符串连接到未定义的变量：

```
$email_content .= "...."; 
```

首先通过为它分配一些东西来定义它：

```
$email_content = "";
$email_content .= "...."; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T12:48:09.027

您在`.=`尚未定义的字符串上使用（附加字符串操作数）。PHP 看到了这一点：

```
$string .= $string2 
```

意思是：

```
$string = $string . $string2 
```

当它试图解析它时，`$string`它不存在，因此不能连接`$string2`或分配给`$string`.

您应该替换这些行：

```
$email_content .= "Naam:" . htmlspecialchars($name, ENT_QUOTES) . "\n\n";
...
$header .= 'From: www.UTI.nl';   <-- AND HERE IS ALSO WHERE THE ERROR OCCURS 
```

具有以下内容：

```
$email_content = "Naam:" . htmlspecialchars($name, ENT_QUOTES) . "\n\n";
...
$header = 'From: www.UTI.nl'; 
```

这应该没问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T12:35:52.437

因为您试图附加到`$email_content`&中未声明的字符串`$header`。

在每个变量的第一行更改`.=`为`=`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T12:36:03.457

您将字符串附加到未定义的变量。写

```
$header = "";
$email_content = ""; 
```

在你附加某事之前。你会得到其他语言的错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T12:37:19.347

您在第一行中使用它

```
$email_content .= "Naam:" . htmlspecialchars($name, ENT_QUOTES) . "\n\n"; 
```

这被解释为

```
$email_content = $email_content . "Naam:" . htmlspecialchars($name, ENT_QUOTES) . "\n\n"; 
```

所以它说未定义的变量。

消除 '。' 从 email_content 和 header 变量的第一行

可能有帮助！！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-24T12:37:44.967

您应该初始化此变量。例如，在第一行。

```
$header = '';
$email_content = ''; 
```

# javascript - 如何使用 Javascript 从 window.print() 打印 pdf？

> ID：16192177
> 
> 赞同：0
> 
> 时间：2013-04-24T12:34:06.147
> 
> 标签：javascript, jquery, windows, internet-explorer, firefox

我在传递的 pdfurl 中打开新窗口。当我单击打印 pdf 时，pdf 文档将在新窗口中很好地打开。但是当我这样做时， newwindowInstance.print(); 它是这样的错误**TypeError: 'undefined' is not a function (evalating 'win.print()')**。下面我给出了代码。有谁能告诉我。如何解决这个问题。如何从窗口打印打印pdf？大挪用。谢谢你。

**代码在这里：**

```
var win = window.open(speficationUrl, name);       
        setTimeout(function() {
            win.print();
            win.close();
        }, 5000); 
```

# android - 暂停 loadInBackground() 方法

> ID：16192179
> 
> 赞同：0
> 
> 时间：2013-04-24T12:34:11.753
> 
> 标签：android, multithreading, android-asynctask, handler

我使用*AsyncTaskLoader*。在*loadInBackgroud()*方法中，我使用了本机库中的一些方法（我们称之为**any_method()**），它返回布尔值。我想 any_method() 使用它自己的线程，所以它可以在一段时间后返回一个重要的值（第一次方法返回 false，一段时间后它会返回 true）。我想在 any_method() 不返回 true 时暂停 loadInBackground 线程。

现在我这样做：

```
public Uri loadInBackground() {
        ...
        final LNI noiseInfo = mEngine.any_method(); // native method
        final Handler handler = new Handler();
        Runnable runnable = new Runnable() {
            @Override
            public void run() {
                if (noiseInfo == null) {
                    handler.post(this);
                }
            }
        };
        runnable.run();
        ...
        return value;
} 
```

并收到此错误：

> java.lang.RuntimeException：无法在未调用 Looper.prepare() 的线程内创建处理程序

# c# - WMI 查询是否允许分组？

> ID：16192183
> 
> 赞同：3
> 
> 时间：2013-04-24T12:34:25.623
> 
> 标签：c#, wmi, wmi-query

我在 Win32_Processor 上有一个 WMI 查询。当我在具有 2 个处理器和 4 个内核的服务器上测试查询时，它会为每个内核返回相同的信息。当我发送查询时，WMI 查询是否允许分组，比如 Win32_Processor.Caption？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:41:48.327

不，WMI 查询使用的[`WQL`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394606%28v=vs.85%29.aspx)语言是 ANSI SQL 的子集，并且不支持该`group by`子句。

注意：不要与[`GROUP Clause`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa390846%28v=vs.85%29.aspx)仅对事件查询有效的 WQL 混淆。

# google-maps-api-3 - 谷歌地图 API watchPosition

> ID：16192186
> 
> 赞同：3
> 
> 时间：2013-04-24T12:34:43.400
> 
> 标签：google-maps-api-3, geolocation

我正在构建一个网络应用程序，以便使用地理定位和 GPS 在用户当前位置显示一个标记。这是我的代码

```
var marker;
 $(window).load(function() {
    myOptions = { zoom: 20, mapTypeId: google.maps.MapTypeId.ROADMAP };
    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
    var watchId = navigator.geolocation.watchPosition(centerMap); 
 });

function centerMap(location)
{
var myLatlng = new google.maps.LatLng(location.coords.latitude,location.coords.longitude);
map.setCenter(myLatlng);
map.setZoom(15);

    $("#lat").text("Latitude : " + location.coords.latitude);
    $("#lon").text("Longitude : " + location.coords.longitude);
    //show current location on map
    marker = new google.maps.Marker({
    position: myLatlng,
    map: map,
    zIndex:1
    });

navigator.geolocation.clearWatch(watchId);

 } 
```

此代码有效，但随着用户更改位置，它会不断添加标记。如何在当前用户位置只显示一个标记？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T12:45:11.273

不是每次都生成一个新的标记，而是`centerMap`简单地用 更新它的位置`marker.setPosition(myLatlng)`。

# javascript - 在 jQuery 中使用 JavaScript 变量

> ID：16192187
> 
> 赞同：0
> 
> 时间：2013-04-24T12:34:46.413
> 
> 标签：javascript, jquery, variables

我有一个普通的 JavaScript 函数，并且想在我的 jQuery 代码中使用变量 (myVar) - 这可能吗？如何？：

```
<a onclick="showtitle(abctitle);" href="#">Testlink</a>

<script>
function showtitle(myVar) {
    myTitle = myVar;    
}

$(document).ready(function() {
    alert(myTitle); //I would like to alert "abctitle"
};
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T12:41:01.290

首先，不要将 DOM0 内联事件处理程序与 jQuery 混合使用。将您的标记和逻辑分开。

如果您使用`data-`属性，您可以将变量的内容放在 HTML 中，然后将其提取到事件处理程序中：

```
<a id="test" data-foo="mytitle" href="#">Testlink</a> 
```

接着：

```
$(document).ready(function() {
    $('#test').on('click', function() {
        alert($(this).data('foo'));
    }
}); 
```

当然，在此代码中，`alert`直到实际单击链接才会出现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T12:49:30.227

我相信@Alnitak 有一个很好的答案。但是，如果您只是想解决您提出的问题，请将 abctitle 用单引号括起来并创建`myTitle`一个全局变量：

```
<a onclick="showtitle('abctitle 2');" href="#">Testlink</a>

<script>
myTitle = "abctitle";

function showtitle(myVar) {
    myTitle = myVar;    
}

$(document).ready(function() {
    alert(myTitle); //I would like to alert "abctitle"
});
</script> 
```

此外，您的文档就绪功能缺少右括号`)`

这里的工作示例：http: [//jsfiddle.net/CbhxY/](http://jsfiddle.net/CbhxY/)

**更新**

jsfiddle 上的工作示例效果不佳。试试这个：http: [//jsbin.com/ohedab/1/](http://jsbin.com/ohedab/1/)

JS Bin 示例还在`alert`showtitle 函数中添加了调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T12:47:13.790

你可以这样做

```
function showtitle(abctitle){
  alert(myTitle); //I would like to alert "abctitle"
} 
```

# java - HTTP 标头变为小写 2

> ID：16192189
> 
> 赞同：0
> 
> 时间：2013-04-24T12:34:52.193
> 
> 标签：java, http, post, header

我需要通过 http post 发送大写的标头。故事的第一部分在[这里](https://stackoverflow.com/questions/16174741/http-headers-became-lowercased)描述。现在它的套接字时间。:)

```
Socket s = new Socket(InetAddress.getByName("localhost"), 8080);
PrintWriter pw = new PrintWriter(s.getOutputStream());
//      PrintStream pw = System.out;
pw.println("POST /test-servlet/TestServlet HTTP/1.0");
String params = "key1=value1&key2=value2";
pw.println("accept = text/xml");
pw.println("accept-language: ru");
pw.println("SOAPAction: requestCreditBureau");
pw.println("eif: 3");
pw.println("host: localhost");
pw.println("content-length: " + params.getBytes().length);
pw.println();
pw.println(params);
pw.println();
pw.flush();

BufferedReader br = new BufferedReader(new InputStreamReader(s.getInputStream()));
String t;
while((t = br.readLine()) != null) System.out.println(t);
br.close(); 
```

这里有两个问题。

1.  它不起作用。:) 服务器的 servlet 接收：

> 工作流 = TSM \soapaction = requestCreditBureau eif = 3

2.  服务器上的 HttpServletRequest 中没有参数，只有标头。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:31:04.207

该`println()`方法将使用系统行分隔符来发送换行符。`\r\n`HTTP 定义了作为行分隔符的严格用法。所以你应该硬编码换行符：

```
pw.print("SOAPAction: requestCreditBureau\r\n");
pw.print("eif: 3\r\n");
pw.print("host: localhost\r\n");
pw.print("content-length: " + params.getBytes().length + "\r\n");
pw.print("\r\n"); 
```

考虑使用`java.net.HttpURLConnection`而不是自己实现 HTTP 协议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T15:54:55.197

谢谢！问题是我使用了tomcat7。使用jetty没有这样的问题。

# javascript - jQuery单击事件未在表单内的按钮上触发

> ID：16192190
> 
> 赞同：0
> 
> 时间：2013-04-24T12:34:55.947
> 
> 标签：javascript, jquery, html, forms, click

我在这样的表单中有一个按钮：

```
<form>
   <input type="text" />
   <input type="password" />
   <button type="button" class="btn-login">Log in</button>
 </form> 
```

我试图通过在 js 中执行此操作来触发按钮的单击事件：

```
$(document).ready(function () {
     $('.btn-login').live("click", function () {
          alert("Button clicked!");
      });
}); 
```

但由于某种原因，这不起作用。

如果我删除`<form></form>`文本框和按钮周围的那个，就会触发点击事件，但这也意味着我的页面没有正确显示，所以我想知道是否有办法在表单内触发按钮的点击事件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T12:39:10.403

如果您使用的是最新版本的 Jquery，请使用 try`on`而不是`live`因为它在 1.9 版中已被弃用。如果您使用的是 1.7 版，那么您的代码将有效。

```
$(document).ready(function () {
     $('.btn-login').on("click", function () {
          alert("Button clicked!");
      });
}); 
```

[JS Fiddle .on() 示例](http://jsfiddle.net/HkhAh/)

[JS Fiddle .live() 示例](http://jsfiddle.net/HkhAh/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T12:40:19.943

.live Function() 已从 jQuery 1.9 中删除。参考：[http ://api.jquery.com/live/](http://api.jquery.com/live/)

请使用 .on() 函数来绑定事件。参考：[http ://api.jquery.com/on/](http://api.jquery.com/on/)

**解决方案：**

```
$(document).ready(function () {
     $('.btn-login').on("click", function () {
          alert("Button clicked!");
      });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T12:44:15.053

我的猜测是您使用的是较新版本的 jquery，我使用 1.9.1 进行了测试，并且[jQuery.live](http://api.jquery.com/live/)不起作用（删除了 jquery 1.9）。[对jQuery.on](http://api.jquery.com/on/)进行了简单的更改，它立即变得栩栩如生。

```
<form>
    <input type="text" />
    <input type="password" />
    <button type="button" class="btn-login">Log in</button>
</form>

$(document).ready(function () {
    $('.btn-login').on("click", function () {
        alert("Button clicked!");
    });
}); 
```

在[jsfiddle上](http://jsfiddle.net/Xotic750/EbNK9/)

作为评论的注释，[这就是 W3C 必须说的](http://www.w3.org/TR/html401/interact/forms.html#h-17.5)

> 使用 BUTTON 元素创建的按钮功能与使用 INPUT 元素创建的按钮一样，但它们提供了更丰富的呈现可能性：BUTTON 元素可能具有内容。例如，包含图像的 BUTTON 元素的功能类似于并且可能类似于类型设置为“图像”的 INPUT 元素，但 BUTTON 元素类型允许内容。
> 
> 按钮元素 - W3C

[本文演示了按钮和输入之间的一些区别](http://web.archive.org/web/20110721191046/http://particletree.com/features/rediscovering-the-button-element/)

W3cschools 的建议是什么？

> 提示和注意事项 注意：如果您在 HTML 表单中使用该元素，不同的浏览器可能会提交不同的值。用于在 HTML 表单中创建按钮。
> 
> W3cschools: HTML 标签

w3cschools 不是权威机构。据我所知，真正有问题的浏览器只有 IE6 和 IE7，所以我猜他们的建议有点过时了。可能还有其他人，但我找不到任何具体的东西。我能找到的最好的是在[MDN <\button>](https://developer.mozilla.org/en-US/docs/HTML/Element/button)

> IE7 有一个错误，当使用 Click me 提交表单时，发送的 POST 数据将导致 myButton=Click me 而不是 myButton=foo。IE6有一个更严重的bug，通过按钮提交表单会提交表单的所有按钮，和IE7一样的bug 这个bug已经在IE8中修复了

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T12:45:23.840

我认为下面的代码应该适合你

```
$(document).ready(function () {
     $(document).delegate('.btn-login', "click", function () {
          alert("Button clicked!");
      });
}); 
```

它使用来自 jquery 的委托，因此即使稍后通过 ajax 在 DOM 中添加它，这个函数也可以工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T12:45:40.670

您可以将 1.1.0 迁移到 1.9.1 以使用`.live()`

```
$(document).ready(function () {
     $('.btn-login').live("click", function () {
          alert("Button clicked!");
      });
}); 
```

**[工作示例]** ( [http://jsfiddle.net/3hQbG/](http://jsfiddle.net/3hQbG/) )

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-24T12:40:19.267

代替

```
<button type="button" class="btn-login">Log in</button> 
```

采用

```
<input type="button" class="btn-login">Log in</input> 
```

# java - 表格布局不适合屏幕

> ID：16192195
> 
> 赞同：3
> 
> 时间：2013-04-24T12:35:18.900
> 
> 标签：java, android, background, tablelayout

我有一个动态创建表的活动。该活动已创建并且工作正常。

**这是xml文件的源代码：**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="#142c57"
    tools:context=".TableActivity" >

    <TextView
        android:id="@+id/heading_textView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="10dp"
        android:text="@string/followup_list" 
        android:textColor="#FFFFFF"
        android:textSize="15sp"/>

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/heading_textView"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="10dp" 
        android:padding="3dp">

        <RelativeLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_centerHorizontal="true"
            android:layout_centerVertical="true" 
            android:background="@drawable/inner_box">

            <ScrollView
                android:id="@+id/scrollView1"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_alignParentLeft="true"
                android:layout_alignParentTop="true" >

                <RelativeLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content" >

                    <HorizontalScrollView
                        android:id="@+id/horizontalScrollView1"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:layout_alignParentLeft="true"
                        android:layout_alignParentTop="true" >

                        <TableLayout
                            android:id="@+id/follow_up_table"
                            android:layout_width="wrap_content"
                            android:layout_height="match_parent" 
                            android:stretchColumns="0">

                        </TableLayout>

                    </HorizontalScrollView>

                </RelativeLayout>

            </ScrollView>

        </RelativeLayout>

    </RelativeLayout>

</RelativeLayout> 
```

**xml文件的输出：**

![输出](https://i.stack.imgur.com/d19rg.png)

**我想让桌子填满整个盒子，桌子右侧的空间不是必需的，看起来很尴尬。要做到这一点要做什么？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-16T01:37:51.400

更好的是拉伸和收缩所有列以适合您的屏幕：

```
<TableLayout
 android:id="@+id/follow_up_table"
 android:layout_width="match_parent"
 android:layout_height="match_parent" 
 android:stretchColumns="*"
 android:shrinkColumns="*">

</TableLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T12:40:16.653

您的表格布局宽度包含其内容，它应该是`match_parent`

```
<TableLayout
 android:id="@+id/follow_up_table"
 android:layout_width="match_parent"
 android:layout_height="match_parent" 
 android:stretchColumns="0">

</TableLayout> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T12:46:18.343

做改变：

```
<TableLayout
    android:id="@+id/follow_up_table"
    android:layout_width="fill_parent"
    android:layout_height="match_parent" 
    android:stretchColumns="0">
</TableLayout> 
```

变化是：

```
android:layout_width="**fill_parent**" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T12:47:28.137

使用 Horizo​​ntalScrollView 的目的是什么？只需将其删除并将 TableLayout 的 android:layout_width 设置为 match_parent。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-24T12:58:34.770

**需要像这样编辑**布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="#142c57"
    tools:context=".TableActivity" >

    <TextView
        android:id="@+id/heading_textView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="10dp"
        android:text="@string/followup_list" 
        android:textColor="#FFFFFF"
        android:textSize="15sp"/>

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/heading_textView"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="10dp" 
        android:padding="3dp">

        <RelativeLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_centerHorizontal="true"
            android:layout_centerVertical="true" 
            android:background="@drawable/inner_box">

            <ScrollView
                android:id="@+id/scrollView1"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_alignParentLeft="true"
                android:layout_alignParentTop="true" >

                <RelativeLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content" >

                    <TableLayout
                        android:id="@+id/follow_up_table"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignParentLeft="true"
                        android:layout_alignParentTop="true" 
                        android:stretchColumns="0,1">

                    </TableLayout>

                </RelativeLayout>

            </ScrollView>

        </RelativeLayout>

    </RelativeLayout>

</RelativeLayout> 
```

**输出**：_

![输出](https://i.stack.imgur.com/wjCRg.png)

# android - 无法将哈希图对象保存到android中的文件中

> ID：16192198
> 
> 赞同：-1
> 
> 时间：2013-04-24T12:35:25.937
> 
> 标签：android, serialization, hashmap, lazy-loading, drawable

我正在从 Internet 下载大量图像并存储到 a`hashmap`中并显示在`ListView`. 我想缓存图像。为此，我将对象存储到我的活动`Hashmap`内部的一个文件中，并取回内部的对象。`onDestroy()``oncreate()`

```
Map<String, Drawable> hashmap; //storing the urls of images and downloaded image `Drawables` into this map 
```

内部`onCreate()`：

```
 File f = new File(Environment.getExternalStorageDirectory()+"/image_cache.ser");
        if(f.exists()){ 
            FileInputStream fin = new FileInputStream(f);
            ObjectInputStream ois = new ObjectInputStream(fin);
            hashmap = (HashMap<String, Drawable>)ois.readObject();
            ois.close();
            Here creating a custom adapter and showing the hashmap drawable images in a listview 
          } 
```

内部 onDestroy()

```
@Override
protected void onDestroy() {
    super.onDestroy();
    File f = new File(Environment.getExternalStorageDirectory()+"/image_cache.ser");

    try {
        if(hashmap != null && hashmap.size() >= 1){

            FileOutputStream fout = new FileOutputStream(f);
            ObjectOutputStream oos = new ObjectOutputStream(fout);
            oos.writeObject(hashmap);
            oos.flush();
            oos.close();

        }
    } catch (Exception e) {
        e.printStackTrace();
        f.delete();
    }

} 
```

问题：得到这个异常：

`java.io.NotSerializableException android.graphics.drawable.BitmapDrawable inside ondestoy().`

为什么`hashmap` `object`没有被序列化？我哪里出错了。如果我缓存图像有误，您能否以正确的方式告诉我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T12:37:41.770

你不能写你的哈希图，因为类`Drawable`不是`Serializable`

`Drawable`不执行`Serializable`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T12:39:47.080

它只是不会以这种方式工作。错误说，您正在尝试序列化未实现的 Drawable，因为有工厂以不同的方式这样做。这个哈希图没有简单的解决方案。

# typescript - 将内联 JavaScript 转换为 TypeScript

> ID：16192199
> 
> 赞同：-2
> 
> 时间：2013-04-24T12:35:26.733
> 
> 标签：typescript

我的 HTML 中有以下内联 JavaScript：

```
<script type="text/javascript">
    var vm = null;
    $(function () {
       vm = new MyViewModel(); // ViewModel
       ...
    });
    ...
    var data = Scheduler.schedulerToObject(vm.editScheduler()); 
```

html中的Ajax：

```
$.ajax({
   url: '@Url.Action("SetScheduler")',
   data: JSON.stringify(data),
   type: "POST",
   dataType: 'json',           
   success: function (result) {
      if (result.succeeded) {
         $('#edit').modal('hide');
      } 
      else {
         showWrating(result.error);
      }
    },
    error: function (message) {
      toastr.error(message, "Error");
    }
});" 
```

如何将其转换为 TypeScript？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:43:59.383

您需要将您的代码放在一个扩展名为 .ts 的新文件中。然后，您可以粘贴您的 JavaScript 并查看在哪里出现编译错误。要解决编译错误，您需要外部库的定义文件。

您可以在“绝对类型”上获取许多库的定义，例如 jQuery。

[https://github.com/borisyankov/DefinitelyTyped](https://github.com/borisyankov/DefinitelyTyped)

如果您遇到特定问题，请在此处发布一个很好的问题，我们会为您提供帮助。

[https://stackoverflow.com/faq](https://stackoverflow.com/faq)

# jsf - 如何将 Facelets 支持添加到 Spring Tool Suite？

> ID：16192200
> 
> 赞同：1
> 
> 时间：2013-04-24T12:35:37.543
> 
> 标签：jsf, facelets, spring-tool-suite

我正在使用 Spring Tool Suite 3.8.2 并想添加一个 Facelets 支持的编辑器（JSF 标记的代码完成）。

我可以使用哪个 Eclip 插件？我试过 JBoss Tools Visual Page Editor，但代码补全不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-23T13:50:43.837

路易吉的回答是正确的。

要激活 Facelets 支持，您必须为项目激活 JSF Facet。

# web-applications - webapp针对不同的手机/屏幕尺寸进行调整

> ID：16192206
> 
> 赞同：0
> 
> 时间：2013-04-24T12:35:49.520
> 
> 标签：web-applications, responsive-design, media-queries

我正在开发一个必须看起来像本机应用程序的 phonegab 框架中的 web 应用程序。我遇到的问题是我不知道如何适应不同的手机/屏幕尺寸。我想为不同的手机/屏幕尺寸定制应用程序，以防止元素从屏幕上掉出来，并为图像和文本提供合适的尺寸以适应手机的屏幕尺寸。

我以为我找到了解决方案，但它似乎不起作用。下面的 CSS 代码是我如何处理的一个示例。通过'@media screen and (max-device-height: ..px) and (orientation: portrait)'，我试图改变图像的大小和元素之间的距离，以适应最流行的屏幕尺寸。我首先通过调整桌面上的浏览器屏幕大小对其进行了测试，它似乎工作正常。当我增加或减少浏览器时，元素之间的距离和图像的大小会发生变化。但是我测试过的手机（htc wildfire 和 samsung gt-i5800）似乎对这些代码没有反应。Htc 野火的屏幕尺寸为 240x320，但不响应我放在此标签后面的代码“@ media screen and (max-device-height: 320px) and (orientation: portrait)。

[编辑：htc 野火确实响应'@媒体屏幕和（最大设备高度：480px）和（方向：纵向）。三星 gt-i5800 响应'@媒体屏幕和（最大设备高度：533px）和（方向：纵向）。因此，这两款手机的显示高度都与手机响应的媒体标签中的“最大设备高度”不同]

谁能告诉我我做错了什么或知道更好的方法？谢谢！

（对不起，我的英语不好）

```
.Header {padding-top:20px} 
.buttons {padding-top:5px} 
.welcomeImg {padding-top:20px;padding-left:8px;width:250px;} 

@media screen and (max-device-height: 685px) and (orientation: portrait){ 
.Header {padding-top:35px} 
.buttons{padding-top:20px} 
.welcomeImg {padding-top:40px;width:260px;}} 

@media screen and (max-device-height: 533px) and (orientation: portrait){ 
.Header {padding-top:30px} 
.buttons {padding-top:15px} 
.welcomeImg {padding-top:35px;width:250px;}} 

@media screen and (max-device-height: 480px) and (orientation: portrait){ 
.Header {padding-top:17px} 
.buttons {padding-top:2px} 
.welcomeImg {padding-top:22px;width:250px;}} 

@media screen and (max-device-height: 400px) and (orientation: portrait){ 
.Header {padding-top:24px} 
.buttons {padding-top:0px} 
.welcomeImg {padding-top:25px;width:180px;} }  

@media screen and (max-device-height: 320px) and (orientation: portrait){ 
.Header {padding-top:17px} 
.buttons {padding-top:0px} 
.welcomeImg {padding-top:18px;width:130px;}} 
```

[编辑：我在这里读到这篇文章： [http](http://www.quirksmode.org/blog/archives/2010/04/a_pixel_is_not.html) ://www.quirksmode.org/blog/archives/2010/04/a_pixel_is_not.html 作者写了关于手机的行为就像他们有不同的设备宽度：

*“这个标签最容易解释。Apple 故意发明它，正是为了让人们可以将他们的内容适应 iPhone 屏幕，并与开发人员一起推动它。这意味着它无法更改设备宽度为 read现在按标签。*

*事实上，Nexus One 已经为苹果开辟了一条可以效仿的道路。它的官方屏幕宽度（纵向模式）是480px，但是当你应用标签时它就像屏幕宽度是320px，是官方宽度的2/3”*

这给我留下了一些问题。我在这里有同样的问题吗？这是个常见的问题吗？有没有好的解决方法？]

# windows-phone-7 - MvvmCross 为页面指定数据上下文

> ID：16192211
> 
> 赞同：2
> 
> 时间：2013-04-24T12:35:58.893
> 
> 标签：windows-phone-7, windows-8, mvvmcross

我正在尝试使用 mvvmcross 开发跨平台应用程序。

更具体地说，我正在尝试将一个为 wp7 编写的应用程序移植到所有其他平台。我已经使用 blend for WP7 来设计“旧版本”应用程序的动画和图形，我想用 mvvmcross 来做。

但我不知道如何为页面分配数据上下文，以便能够使用混合（或 Visual Studio gui）来创建绑定并查看页面的设计。

我确定我错过了一些巨大的东西......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T13:16:56.237

对于 WindowsPhone，如果要添加设计时数据：

1.  在 Blend 中打开您的解决方案
2.  打开您想要设计时数据的页面 - 例如`MyView`
3.  转到数据选项卡/窗口（不知道如何描述 - 它在右上角）
4.  在此，在工具栏上选择带有“从类创建示例数据”的小菜单图标
5.  `MyViewModel`在对话框中为当前页面选择 ViewModel - 例如`MyView`
6.  这将生成一组样本数据 - 如果您愿意，可以对其进行编辑
7.  现在在您的页面的 XAML 中，您`MyView`可以简单地添加声明：

    ```
     d:DataContext="{d:DesignData /SampleData/MyViewModelSampleData.xaml}" 
    ```

那应该行得通。

* * *

我从来没有为 Windows8 做过这个 - 我猜它可能是相似的 - 虽然实际上我不知道它是否是 - 请参阅[Windows Store 应用程序中的设计时间数据等问题](https://stackoverflow.com/questions/12352724/design-time-data-in-windows-store-app)

# django - 为什么 AutoField 不起作用？

> ID：16192212
> 
> 赞同：1
> 
> 时间：2013-04-24T12:36:01.550
> 
> 标签：django, django-models, python-2.7

我在我的模型中创建了这个字段：

```
numero_str = models.AutoField(primary_key=True, unique=True, default = 0) 
```

默认值似乎使 AutoField 的自动增量无效，但如果我将其取出，我会收到一条错误消息，指出该字段不能为空。我不明白的是：如果我将它声明为 AutoField，它不应该自动生成一个顺序整数吗？或者我应该在保存项目时声明一些东西？

更具体地说，我的应用程序基本上是一个通过电子邮件发送并保存在数据库中的表单。发送时发生错误（以防我取出默认值）。它说：

```
IntegrityError at /solicitacaodetreinamento/

str_solicitacao.numero_str may not be NULL 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:22:31.577

我找到了解决方案：我删除了数据库文件和 South 的所有迁移（包括 Initial）。然后我重新创建了数据库并进行了迁移。这一次，使用默认的主键，即“id”。就我而言，它更简单，因为我根本没有真实数据（它不在生产中），否则我将不得不导出数据，重新创建数据库，然后导入数据。谢谢你们。

# php - Wordpress 背景不会从颜色变为平铺图像？

> ID：16192216
> 
> 赞同：0
> 
> 时间：2013-04-24T12:36:07.457
> 
> 标签：php, html, css, wordpress

主页中的背景有条纹背景，但存档页面没有？我尝试在 style.css 中更改主题的默认背景

```
background-image : url('http://mangasaur.tk/wp-content/uploads/2013/04/stripe_9cc72d60051c3cf7454f6e1c10a1d96d1.png');
background-repeat : repeat;
background-attachment : fixed; 
```

但即便如此，它也不会改变！我还编辑了该存档页面的 css。这是一个拥有自己的 CSS 的 Wordpress (Kommiku) 插件。

Kommiku CSS：[http ://pastebin.com/u7cFemfP](http://pastebin.com/u7cFemfP)

网站网址 - [http://mangasaur.tk/](http://mangasaur.tk/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T12:43:16.090

这是您在[http://www.mangasaur.tk/wp-content/themes/live-wire/style.css](http://www.mangasaur.tk/wp-content/themes/live-wire/style.css)文件中的问题：

第 1 行：

> ... 字体粗细：正常；字体样式：正常；}**正文{背景：#f2f2f2;** 边框顶部：0.3125em ...

似乎它是一个名为 live-wire 的主题的样式表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T13:03:22.790

在文件中：http: [//www.mangasaur.tk/wp-content/plugins/kommiku/themes/default/stylesheets/main.css](http://www.mangasaur.tk/wp-content/plugins/kommiku/themes/default/stylesheets/main.css)

搜索：

```
@import url('stylesheets/reset.css');
@import url('stylesheets/typography.css'); 
```

用。。。来代替：

```
@import url('reset.css');
@import url('typography.css'); 
```

它在主页上工作的原因是您将它包含在它自己的标签中：`<style id="custom-background-css" type="text/css">...</style>`而不是包含 main.css 文件，存档页面上不是这种情况。

# python - 对非均匀间隔时间序列进行季节性分解，R 或 Python 中是否有任何完善的算法？

> ID：16192217
> 
> 赞同：3
> 
> 时间：2013-04-24T12:36:10.723
> 
> 标签：python, r, time-series, statsmodels, stl-decomposition

R 中的 stats 包具有 stl()，但它需要由 ts() 创建的均匀间隔的时间序列。它不能处理动物园对象。

奇怪的是，它也不能处理缺失值，尽管 STL 方法声称能够用 LOESS 填充缺失值。（见简历上的[这个问题](https://stats.stackexchange.com/questions/34781/stl-on-time-series-with-missing-values-for-anomaly-detection)。）

因此，例如，如果您有工作日数据，则不能通过将 NA 放在周末并调用 stl() 来使其成为日历日。

我还看到 Python statsmodel 的作者试图迁移 stl() 以使用 Pandas TimeSeries，但它似乎还没有。

谢谢

编辑：补充一点，我知道我可以做一个非常简单的模型，比如拟合谐波，但我想要一个完善的模型，至少可以提供基准。我有分月数据，所以 X12 不适用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-02T18:08:58.630

根据这篇[文章](https://stackoverflow.com/a/14616460/2824732)中的@Julius 的说法，是否可以使用`stl`with `na.approx`、 from `zoo`package 、 using `stl(x, na.action = na.approx, ...)`。这会进行某种[插值](http://www.inside-r.org/packages/cran/zoo/docs/na.approx)。

不幸的是`stl`，更喜欢常规时间序列。

因此，我采用@Julius 方法来测试假设时间序列不规则`loess`的填充性能。`NAs`显然误差很小。

# 让我们模拟

以下函数获取数据并使用`3^(0:p)`NA模拟场景，`naapprox=TRUE`用于使用`na.approx`和`optspan=TRUE`优化跨度参数。损失函数是 MAPE。

```
#The approach is based in @Julius stl with NAs
library(zoo)
library(plyr)
library(reshape)
library(ggplot2)
mape <- function(f, x) colMeans(abs(1 - f / x) * 100,na.rm=T)

loessCheck <- function(data,p=2, naapprox=TRUE, optspan=TRUE){
  set.seed(20130201)
  pos <- lapply(3^(0:p), function(x) sample(1:length(data), x))
  datasetsNA <- lapply(pos, function(x) {data[x] <- NA; data})
  original <- data.frame(y.predict=as.numeric(data))
  original$id <- "Original"
  datasetsNA <- lapply(datasetsNA, function(y){ 
    posna=which(is.na(y)) 
    tvo=1:length(y) 
    yo=y;tv=tvo
    if (any(posna%in%c(1,length(y)))) tv=tvo[-posna[which(posna%in%c(1,length(y)))]]
    if(naapprox) y=na.approx(y) #instead of inside loess
    if(optspan){ fseq=function(x, y)
      mape(matrix(predict(loess(y ~ dt, span=x, data.frame(dt=tv, y=y))),ncol=1),as.vector(y[!is.na(y)]))
    ospan <- optimize(fseq, c(0.1,1), maximum=FALSE,y=y)
    spanmim <- ospan$minimum
    } else spanmim <- 0.75
    y.loess <- loess(y ~ dt, span=spanmim, data.frame(dt=tv, y=y))
    y.predict <- predict(y.loess, data.frame(dt=tvo))
    y.predict[-posna] <- yo[-posna]
    data.frame(y.predict, 
               id = paste(length(posna), "NAs"), 
               stringsAsFactors = FALSE)
    })
  loessAll <- rbind.fill(c(list(original), datasetsNA))
  loessAll$Date <- time(data)
  results <- data.frame(y.predict = sapply(lapply(datasetsNA, '[', i = "y.predict"), mape, original[, "y.predict"]))
  results$id <- unique(loessAll$id[-(1:nrow(original))])
  results <- melt(results, id.var = "id")
  results$x <- min(loessAll$Date) + diff(range(loessAll$Date)) / 4
  results$y <- min(original[, "y.predict"],na.rm=T) + diff(range(original[, "y.predict"],na.rm=T)) / (4 * p) * (0:p)
  results$value <- round(results$value, 2)
  ggplot(loessAll, aes(x = Date, y = y.predict, colour = id, group = id)) + geom_line() + 
     theme_bw() +
    theme(legend.title = element_blank(), strip.background = element_rect(fill = "white")) + 
    labs(x = NULL, y = NULL) + scale_colour_brewer(palette = "Set1") +
    lapply(unique(results$id), function(z)
      geom_text(data = results, colour = "black", size = 3,
                aes(x = x, y = y, label = paste0("MAPE (", id, "): ", value, "%"))))
}
args(loessCheck) # first boolean for using na.approx, the second for optimize span parameter in sample

loessCheck(nottem,p=3) #T T 
```

![在此处输入图像描述](https://i.stack.imgur.com/JuiS0.png)

```
loessCheck(nottem,p=3,FALSE) #FT 
```

![在此处输入图像描述](https://i.stack.imgur.com/mjC72.png)

```
loessCheck(nottem,p=3,FALSE,FALSE) 
```

![在此处输入图像描述](https://i.stack.imgur.com/TFwpj.png) loessCheck(nottem,p=3,TRUE,FALSE) ![在此处输入图像描述](https://i.stack.imgur.com/pXM5v.png)

`na.approx`从 zoo 包中使用时减少 MAPE并推荐`span= 0.75`。在填充 NA 之后，可以考虑其他建模替代方案。

# jsp - servlet 中的 getParameter() 返回 null

> ID：16192218
> 
> 赞同：0
> 
> 时间：2013-04-24T12:36:11.177
> 
> 标签：jsp, servlets, getparameter

我正在尝试从 servlet 中的 .jsp 检索选定的值。选项中显示的值来自“Item”对象的 ArrayList（带有变量 ID、名称、描述、价格、数量）。

在 itemsCatalog.jsp（部分）中：

```
<form name="f1" action="ControllerServlet" method="GET">

    <select name="itemSelect">

        <c:forEach items="${list}" var="entry">

            <option value="${entry.ID}">${entry.name}</option>

        </c:forEach>
     </select>

  <br><input type="hidden" name="DETAILS" value="new"/>
  <br><input type="submit" name="Submit" value="Show Details"/> 
```

`</form>`

在 ControllerServlet 中，我尝试通过以下方式访问所选选项：

```
String tempID = request.getParameter("itemSelect");

request.setAttribute("tempID",tempID);

request.getRequestDispatcher("itemDetails.jsp").forward(request,response); 
```

但是，当我尝试使用 itemDetails.jsp 访问它时

```
<%= request.getParameter("tempID") %> 
```

或者

```
${tempID} 
```

然后我收到一个空值。如果我尝试直接访问 itemDetails.jsp 上的原始“itemSelect”参数，那么我会收到正确的字符串。

这是我的问题：为什么 servlet 没有接收到这个参数，我能做些什么来修复它？从文本框中接收参数有效。

（注意，我目前只是在继续处理之前尝试检索字符串值。）

如果有帮助，我在 Vista 上使用 Netbeans 7.3 和 Glassfish 3.2.1。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:44:39.937

试试这个

```
<%= request.getAttribute("tempID") %> 
```

因为您将变量设置为属性

```
 request.setAttribute("tempID",tempID); 
```

# regex - Perl 正则表达式 URL 包含字符串但不是相似的字符串

> ID：16192225
> 
> 赞同：0
> 
> 时间：2013-04-24T12:36:25.050
> 
> 标签：regex, perl

我需要为 Perl 编写正则表达式以使其匹配`/contact`（以及 /contact/talk 等之外的所有内容）。

但我也有 URL，`/contacts`所以我希望它跳过这个。

到目前为止，我只能为完全匹配或为

所以类似于：

```
if ($uri =~ m/contact/i ) {
   ## Redirect somewhere
} 
```

这也重定向`/contacts`了我正在努力的所有内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:45:07.003

```
if ($uri =~ m!/contact(?:/|$)!) {
  #
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T12:47:08.753

尝试：

```
echo -e "/contacts/qqq\n/contact\n/contact/talk\n/ConTact\n/contactx/"|
perl -ne 'm{/contact(?:/|$)} and print' 
```

输出：

```
/contact
/contact/talk 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T12:42:05.050

```
if ($uri =~ m/\/contact(?:$|\/)/i ) {
  ## Redirect somewhere
} 
```

将匹配`/contact`因为`$`, 和一切喜欢`/contact/...`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T12:43:29.080

`\b`是一个单词边界标记，它可以防止这个匹配出现在单词的中间：

```
if ($uri =~ m|\bcontact\b|i ) {
   ## Redirect somewhere
} 
```

我会把它添加到开头和结尾，所以你也不匹配`foocontact`。或者你可以确保在接触之前有一个斜线。

```
if ($uri =~ m|/contact\b|i ) {
   ## Redirect somewhere
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T13:13:29.927

```
/^\/contact\// 
```

涉及一些猜测 - 您的网址似乎以 开头`/contact`，如果没有，请删除初始插入符号。

# google-analytics - 谷歌分析跟踪 GA.js 与 Analytics.js

> ID：16192228
> 
> 赞同：2
> 
> 时间：2013-04-24T12:36:34.407
> 
> 标签：google-analytics, event-tracking, analytics.js

我正在尝试使用此代码来跟踪 Google Analytics 中的事件

```
 _trackEvent(category, action, opt_label, opt_value, opt_noninteraction) 
```

这似乎是要与 GA.js 分析“包”一起使用，但是我使用的是 Analytics.js

像这样

```
 (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), 
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); 
```

有没有办法只用这段代码进行跟踪？还是我必须使用

```
 var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-XXXXX-X']);
  _gaq.push(['_trackPageview']);

  (function() {
   var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
   ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google    -analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })(); 
```

我需要这两个代码吗？或者是否有一些仅使用 Analytics.js 的不同方式

提前致谢

**编辑：事实上，我可能没有解释我想要什么，甚至不可能。我想在事件上使用漏斗，并且我想使用 _trackEvent（我认为它会这样做）将用户标记为已进入漏斗，如果发送事件，那么我们将拥有正常的漏斗。因此，如果 10 位用户进入页面并点击 1 次按钮，我将在漏斗上发生 10 次事件，其中 1 次成功

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T13:18:54.073

analytics.js 会像旧代码一样向 GA 报告，但语法不同，所以不能使用`_trackEvent`.

这是使用 analytics.js 的[基本页面语法](https://developers.google.com/analytics/devguides/collection/analyticsjs/)的链接，这是使用 analytics.js 进行[事件跟踪的链接](https://developers.google.com/analytics/devguides/collection/analyticsjs/events)

```
<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-XXXX-Y');      // GA account ID goes here
ga('send', {
  'hitType': 'event',           // Required.
  'eventCategory': 'category',  // Required.
  'eventAction': 'action',      // Required.
  'eventLabel': 'opt_label',
  'eventValue': opt_value,
  'nonInteraction': opt_noninteraction
});
</script>
<!-- End Google Analytics --> 
```

# c# - C#：常量的类型转换是否在运行时发生？

> ID：16192231
> 
> 赞同：0
> 
> 时间：2013-04-24T12:37:03.757
> 
> 标签：c#, casting, enums, runtime, compile-time

首先，这个问题不是[这个问题](https://stackoverflow.com/questions/4499528/compile-time-and-runtime-casting-c-sharp)**的重复**。除了标题之外，它完全没有共同点。

现在...

在 C# 中，考虑以下情况：

```
int i = (int)10.0;

const double D = 10.0;
float f = (float)d; 

enum Foo : int
{
    FIRST_ITEM = 0
}
int i = (int)Foo.FIRST_ITEM; 
```

在哪种情况下，类型转换会在运行时发生？我现在有点沉迷于我的程序的性能，并且想知道这是否会产生任何（无论多么小）的影响。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T12:55:15.413

简而言之，Linqpad 做了很多静态工作，这意味着当使用带有优化标志的 ms 或 mono 编译器进行编译时，它们至少不应该做更少的静态工作。

使用 Linqpad 时，我得到以下 C# 代码：

```
void Main()
{
  int i = (int)10.0;

  const double D = 10.0;
  float f = (float)D; 

  int h = (int) Foo.Bar;
}

public enum Foo : int {
  Bar = 0
} 
```

我得到以下 IL：

```
IL_0001:  ldc.i4.s    0A // load int8 0A (ie 10 dec)
IL_0003:  stloc.0     // assign i
IL_0004:  ldc.r4      00 00 20 41 // FLOAT! not double
IL_0009:  stloc.1     // assign f
IL_000A:  ldc.i4.0    // load int32 0 (due to Foo : int(32))
IL_000B:  stloc.2     // assign h 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T12:55:06.693

常量的强制转换是在编译时完成的。

为了证明这一点，您可以使用[.Net Reflector](http://en.wikipedia.org/wiki/.NET_Reflector)检查生成的代码。

例如，这段代码：

```
static void Main()
{
    int i = (int) 10.5;
    const double d = 10.0;
    float f = (float)d;

    Console.WriteLine(i);
    Console.WriteLine(f);
} 
```

产生：

```
private static void Main()
{
    int i = 0xa;
    float f = 10f;
    Console.WriteLine(i);
    Console.WriteLine(f);
} 
```

或作为 IL：

```
.method private hidebysig static void Main() cil managed
{
    .entrypoint
    .maxstack 1
    .locals init (
        [0] int32 i,
        [1] float32 f)
    L_0000: ldc.i4.s 0xa
    L_0002: stloc.0 
    L_0003: ldc.r4 10
    L_0008: stloc.1 
    L_0009: ldloc.0 
    L_000a: call void [mscorlib]System.Console::WriteLine(int32)
    L_000f: ldloc.1 
    L_0010: call void [mscorlib]System.Console::WriteLine(float32)
    L_0015: ret 
} 
```

如您所见，没有发生运行时强制转换。发布或调试版本也是如此。

# html - 图片上的文字

> ID：16192232
> 
> 赞同：0
> 
> 时间：2013-04-24T12:37:09.910
> 
> 标签：html, css

我正在尝试在图像上创建一个文本块，并且在第一张图像中它工作正常，但是如果我添加另一个具有相同代码的 div，则第二张图像的文本块位于第一张图像中。

有我的例子：

```
 <section>
        <div>
            <img src="">
            <p><span>Text Example 1</span><p>
        </div>
        <div>
            <img src="">
            <p><span>Text Example 2</span><p>   
        </div> 
```

现在是 CSS：

```
img {
    position: relative;
    width: 100%;
}

p {

    position: absolute;
    top: 10%; 

width: 100%;

 }

 p span {

    color: white; 
    font: 1.75em Helvetica, Sans-Serif;   
    background: rgb(0, 0, 0); /* fallback color */
    background: rgba(0, 0, 0, 0.7);
    padding: 0.625em; 
 } 
```

我认为问题与绝对位置有关，但我不确定。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:46:43.323

你把你的定位搞混了。您希望 div 相对定位，段落绝对定位。

[http://tinker.io/701a5](http://tinker.io/701a5)

```
img {
    width: 100%;
}

div {
    position: relative;
}

div p {
    top: 10%; 
    width: 100%;
    position: absolute;
 }

 div span {

    color: white; 
    font: 1.75em Helvetica, Sans-Serif;   
    background: rgb(0, 0, 0); /* fallback color */
    background: rgba(0, 0, 0, 0.7);
    padding: 0.625em; 
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T12:48:32.803

JSFiddle：http: [//jsfiddle.net/7zCrQ/](http://jsfiddle.net/7zCrQ/)

首先，请注意您的结束标签，您缺少正斜杠。

```
div {
   position:relative;
}
p {
    color:white;
    position:absolute;
    top:10%;
    left:10px;
} 
```

包含元素——在这种情况下是`<div>`——应该有一个`relative`. 您要显示的文本（在我的示例`<p>`中）的位置应为`absolute`. 绝对定位的元素*相对于具有定位的第一个祖先进行定位。*这意味着`<p>`将距离具有相对定位的第一个祖先的顶部 10%，在本例中为`<div>`. 如果你不给一个祖先定位，它会从`<body>`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T12:39:51.703

只需`id`为每个使用属性`div`并给出不同的位置

```
div#someid{
  position:absolute;
  top: ...;
} 
```

如果你想要它绝对定位；

通过使用`position:absolute` [元素相对于它的第一个定位来定位](http://www.w3schools.com/cssref/pr_class_position.asp)。

# xml - 如何将xml转换为请求的

> ID：16192234
> 
> 赞同：1
> 
> 时间：2013-04-24T12:37:10.667
> 
> 标签：xml, xslt, xslt-1.0

我有一个 xml，我必须将其转换为另一种 xml 结构。我尝试了很多方法，但没有成功。我需要使用 xslt 1.0。我问了一个问题，但在我问后格式发生了变化。

输入：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<PersonBody>
    <Person>
        <D>Name</D>
        <D>Surname</D>
        <D>Id</D>
    </Person>
    <PersonValues>
        <D>Michael</D>
        <D>Jackson</D>
        <D>01</D>
    </PersonValues>
    <PersonValues>
        <D>James</D>
        <D>Bond</D>
        <D>007</D>
    </PersonValues>
    <PersonValues>
        <D>Kobe</D>
        <D>Bryant</D>
        <D>24</D>
    </PersonValues>
</PersonBody> 
```

所需输出：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<PersonBody>
    <Persons>
        <Person>
            <Name>Michael</Name>
            <Surname>Jackson</Surname>
            <Id>1</Id>
        </Person>
        <Person>
            <Name>James</Name>
            <Surname>Bond</Surname>
            <Id>007</Id>
        </Person>
        <Person>
            <Name>Kobe</Name>
            <Surname>Bryant</Surname>
            <Id>24</Id>
        </Person>
    </Persons>
</PersonBody> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:40:10.083

这应该这样做：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>
  <xsl:key name="kColumnName" match="Person/*"
           use="count(preceding-sibling::*)" />

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="/*">
    <xsl:copy>
      <Persons>
        <xsl:apply-templates select="PersonValues" />
      </Persons>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="PersonValues">
    <Person>
      <xsl:apply-templates select="*" />
    </Person>
  </xsl:template>

  <xsl:template match="PersonValues/*">
    <xsl:element name="{key('kColumnName', position() - 1)}">
      <xsl:apply-templates />
    </xsl:element>
  </xsl:template>
</xsl:stylesheet> 
```

在您的示例输入上运行时，结果是：

```
<PersonBody>
  <Persons>
    <Person>
      <Name>Michael</Name>
      <Surname>Jackson</Surname>
      <Id>01</Id>
    </Person>
    <Person>
      <Name>James</Name>
      <Surname>Bond</Surname>
      <Id>007</Id>
    </Person>
    <Person>
      <Name>Kobe</Name>
      <Surname>Bryant</Surname>
      <Id>24</Id>
    </Person>
  </Persons>
</PersonBody> 
```

# matlab - 在 MATLAB 中找到“n”个最小值

> ID：16192235
> 
> 赞同：2
> 
> 时间：2013-04-24T12:37:18.663
> 
> 标签：matlab

如何获得`n`一维数组的最小元素

**例子**

```
A = [29, 60, 96, 43, 69, 53];
n=3;
%so B will be like this
B = [29 43 53]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T12:41:11.020

尝试这个：

```
B = sort(A);    %# sort in ascending order
B = B(1:n);     %# take the first N-values 
```

# android-asynctask - AsyncTask , ProgressDialog 错误

> ID：16192237
> 
> 赞同：1
> 
> 时间：2013-04-24T12:37:21.323
> 
> 标签：android-asynctask

我有一个启动 AsyncTask 并在操作期间显示进度对话框的活动。任务完成后，我会关闭对话框，但在某些手机上会抛出此类错误：

```
java.lang.IllegalArgumentException
in android.view.WindowManagerImpl.findViewLocked
Application version2.5.2.1
java.lang.IllegalArgumentException: View not attached to window manager
at android.view.WindowManagerImpl.findViewLocked(WindowManagerImpl.java:587)
at android.view.WindowManagerImpl.removeView(WindowManagerImpl.java:324)
android.view.WindowManagerImpl$CompatModeWrapper.removeView(WindowManagerImpl.java:151)
at  android.app.Dialog.dismissDialog(Dialog.java:321)
at  android.app.Dialog$1.run(Dialog.java:119)
at  android.app.Dialog.dismiss(Dialog.java:306)
at  converter.AsyncTaskSingleCurrency.onPostExecute(AsyncTaskSingleCurrency.java:49)
at  converter.AsyncTaskSingleCurrency.onPostExecute(AsyncTaskSingleCurrency.java:1)
at  android.os.AsyncTask.finish(AsyncTask.java:602)
at  android.os.AsyncTask.access$600(AsyncTask.java:156)
at  android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:615)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4517)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:993)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:760)
at dalvik.system.NativeStart.main(Native Method) 
```

老实说，我不知道为什么人们会遇到这些错误。如果有人可以帮助我，那就太好了。

我的代码是：

```
 public AsyncTaskSingleCurrency(Context ctx,
        IAsyncTaskCompletedListner<Double> listner) {
    this.context = ctx;
    this.callback = listner;
}

@Override
protected void onPreExecute() {
    super.onPreExecute();
    pd = createProgressDialog(context, "Loading Please wait...");
    pd.show();
}

@Override
protected Boolean doInBackground(String... params) {
    boolean result = getCurrencyFromTo(params[0]);
    return result;
}

@Override
protected void onPostExecute(Boolean result) {
    super.onPostExecute(result);
    pd.dismiss();
    if (result){
        if(localPubDate!=null)
        Toast.makeText(context, localPubDate, Toast.LENGTH_LONG).show();
        callback.onTaskComplete(currencySingleRate);
    }
    else{
        callback.onTaskComplete(0.0);
    }
} 
```

# java - JOCL中的定时数据传输和执行

> ID：16192243
> 
> 赞同：0
> 
> 时间：2013-04-24T12:37:59.290
> 
> 标签：java, opencl, gpgpu, jocl

我正在使用 JOCL 库（由 JOGAMP 提供），我想知道是否可以测量将数据从主机传输到设备所花费的时间、内核所花费的时间以及分别返回结果所花费的时间？

目前我正在像这样调用我的内核：

queue.putReadBuffer(...).put1DKernel(...).putWriteBuffer(...)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T13:21:45.997

回答我自己的问题 ;-) 过程如下...首先创建一个具有所需容量的 CLEventList，因为我只想测量内核执行，所以我将其设置为 1。

```
CLEventList list = new CLEventList(1); 
```

现在，当您将内核设置到命令队列中时，您可以将列表添加为参数：

```
queue.putReadBuffer(...).put1DKernel(..., list).putWriteBuffer(...).finish(); 
```

之后，您可以通过调用获取时间：

```
long start = list.getEvent(0).getProfilingInfo(ProfilingCommand.START);
long end = list.getEvent(0).getProfilingInfo(ProfilingCommand.END);
long duration = end - start // time in nanoseconds 
```

不要忘记在启用 Mode.PROFILING_MODE 的情况下初始化您的命令队列。

# java - 另一个类中一个类的java比较器

> ID：16192244
> 
> 赞同：-3
> 
> 时间：2013-04-24T12:38:06.763
> 
> 标签：java, class, comparator

给定 Java 中的三个类 X、Y 和 Z。

在 XI 中有一个公共的非静态函数“double distance(Y)”。在 ZI 中有一个 X 类型的对象 x 和一个数组。如何按距离（）从 x 的升序对数组进行排序？

我正在尝试使用 Y 的比较器找到解决方案，但我不得不承认我一无所知。谢谢！

**编辑**：我仍然收到一个我找不到更多信息的错误。根据答案中的解决方案，我的代码现在如下所示：

```
public SARAgent(PathBandit game, int n) {
  ...
  Arrays.sort(getEdgeSet(game).toArray(), BY_GAP);
}

public static Comparator<Edge> BY_GAP = new Comparator<Edge>() {
  public int compare(Edge a, Edge b) {
    double va = game.delta(a.getX(), a.getY(), a.getDir());
    double vb = game.delta(b.getX(), b.getY(), b.getDir());
    if (va == vb) return a.compareTo(b);
    if (va < vb)  return -1;
    if (va > vb)  return +1;
    return 0;
  }
}; 
```

边是 Comparable，但代码无法编译，调用 Arrays.sort() 时出错。错误是

```
Error: no suitable method found for sort(java.lang.Object[],java.util.Comparator<Edge>)
method java.util.Arrays.<T>sort(T[],int,int,java.util.Comparator<? super T>) is not applicable
  (cannot instantiate from arguments because actual and formal argument lists differ in length)
method java.util.Arrays.<T>sort(T[],java.util.Comparator<? super T>) is not applicable
  (actual argument java.util.Comparator<Edge> cannot be converted to java.util.Comparator<? super java.lang.Object> by method invocation conversion)
method java.util.Arrays.sort(java.lang.Object[],int,int) is not applicable
  (actual and formal argument lists differ in length)
method java.util.Arrays.sort(java.lang.Object[]) is not applicable
  (actual and formal argument lists differ in length)
method java.util.Arrays.sort(double[],int,int) is not applicable
  (actual and formal argument lists differ in length)
method java.util.Arrays.sort(double[]) is not applicable
  (actual and formal argument lists differ in length)
method java.util.Arrays.sort(float[],int,int) is not applicable
  (actual and formal argument lists differ in length)
method java.util.Arrays.sort(float[]) is not applicable
  (actual and formal argument lists differ in length)
method java.util.Arrays.sort(byte[],int,int) is not applicable
  (actual and formal argument lists differ in length)
method java.util.Arrays.sort(byte[]) is not applicable
  (actual and formal argument lists differ in length)
method java.util.Arrays.sort(char[],int,int) is not applicable
  (actual and formal argument lists differ in length)
method java.util.Arrays.sort(char[]) is not applicable
  (actual and formal argument lists differ in length)
method java.util.Arrays.sort(short[],int,int) is not applicable
  (actual and formal argument lists differ in length)
method java.util.Arrays.sort(short[]) is not applicable
  (actual and formal argument lists differ in length)
method java.util.Arrays.sort(long[],int,int) is not applicable
  (actual and formal argument lists differ in length)
method java.util.Arrays.sort(long[]) is not applicable
  (actual and formal argument lists differ in length)
method java.util.Arrays.sort(int[],int,int) is not applicable
  (actual and formal argument lists differ in length)
method java.util.Arrays.sort(int[]) is not applicable
  (actual and formal argument lists differ in length) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T12:45:24.527

您`Z`可以创建一个看起来像这样的比较器：

```
public static Comparator<Y> cmp = new Comparator<Y>() {
    public int compare(Y y1, Y y2) {
        return (int) Math.signum(x.distance(y1) - x.distance(y2));
    }
}; 
```

然后，您可以使用此比较器对数组进行排序：

```
Arrays.sort(arrayOfY, cmp); 
```

# mule - Mule ESB - http:outbound-endpoint 无效

> ID：16192248
> 
> 赞同：1
> 
> 时间：2013-04-24T12:38:25.953
> 
> 标签：mule, esb, mule-studio

我对流定义有问题，例如：

```
<mule xmlns:scripting="http://www.mulesoft.org/schema/mule/scripting" xmlns:http="http://www.mulesoft.org/schema/mule/http" xmlns:file="http://www.mulesoft.org/schema/mule/file" xmlns:tracking="http://www.mulesoft.org/schema/mule/ee/tracking" xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:spring="http://www.springframework.org/schema/beans" version="EE-3.4.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-current.xsd
http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd
http://www.mulesoft.org/schema/mule/file http://www.mulesoft.org/schema/mule/file/current/mule-file.xsd
http://www.mulesoft.org/schema/mule/scripting http://www.mulesoft.org/schema/mule/scripting/current/mule-scripting.xsd
http://www.mulesoft.org/schema/mule/ee/tracking http://www.mulesoft.org/schema/mule/ee/tracking/current/mule-tracking-ee.xsd">
    <flow name="testFlow1" doc:name="testFlow1">
        <file:inbound-endpoint path="/home/fiscrm/Pulpit/pliki/tif" responseTimeout="10000" doc:name="File" disableTransportTransformer="true"/>
        <file:file-to-byte-array-transformer ignoreBadInput="true" doc:name="File to Byte Array"/>
        <scripting:transformer ignoreBadInput="true" doc:name="Groovy">
            <scripting:script engine="Groovy"><![CDATA[println "TEST"
//
return [fileName: 'test', data: payload.encodeBase64().toString(), user: 'god', password:'god']]]></scripting:script>
        </scripting:transformer>
        <http:outbound-endpoint exchange-pattern="one-way" host="localhost" port="8080" path="invoice/document" method="POST" disableTransportTransformer="true" responseTimeout="1200000" doc:name="HTTP" mimeType="binary/octet-stream"/>
    </flow>
</mule> 
```

当输入文件很小时，一切正常。当我在更大的文件 http 请求（出站）上尝试它时，没有数据。

* * *

来自服务器的日志：

```
INFO  2013-04-25 08:15:57,525 [[fisbps-aoutoonline].File.receiver.01] org.mule.transport.file.FileMessageReceiver: Lock obtained on file: /home/fiscrm/Pulpit/pliki/tif/dat-1-002.tif
INFO  2013-04-25 08:15:57,927 [[fisbps-aoutoonline].connector.http.mule.default.dispatcher.01] org.mule.transport.service.DefaultTransportServiceDescriptor: Loading default outbound transformer: org.mule.transport.http.transformers.ObjectToHttpClientMethodRequest
INFO  2013-04-25 08:15:57,933 [[fisbps-aoutoonline].connector.http.mule.default.dispatcher.01] org.mule.transport.service.DefaultTransportServiceDescriptor: Loading default response transformer: org.mule.transport.http.transformers.MuleMessageToHttpResponse
INFO  2013-04-25 08:15:57,965 [[fisbps-aoutoonline].connector.http.mule.default.dispatcher.01] org.mule.transport.service.DefaultTransportServiceDescriptor: Loading default outbound transformer: org.mule.transport.http.transformers.ObjectToHttpClientMethodRequest
INFO  2013-04-25 08:15:57,966 [[fisbps-aoutoonline].connector.http.mule.default.dispatcher.01] org.mule.lifecycle.AbstractLifecycleManager: Initialising: 'connector.http.mule.default.dispatcher.2043296531'. Object is: HttpClientMessageDispatcher
INFO  2013-04-25 08:15:57,972 [[fisbps-aoutoonline].connector.http.mule.default.dispatcher.01] org.mule.lifecycle.AbstractLifecycleManager: Starting: 'connector.http.mule.default.dispatcher.2043296531'. Object is: HttpClientMessageDispatcher
INFO  2013-04-25 08:15:58,016 [[fisbps-aoutoonline].connector.http.mule.default.dispatcher.01] org.mule.transport.http.transformers.ObjectToHttpClientMethodRequest: Content-Type not set on outgoing request, defaulting to: text/plain
WARN  2013-04-25 08:15:58,673 [[fisbps-aoutoonline].connector.http.mule.default.dispatcher.01] org.apache.commons.httpclient.HttpMethodBase: Going to buffer response body of large or unknown size. Using getResponseBodyAsStream instead is recommended.
ERROR 2013-04-25 08:15:58,673 [[fisbps-aoutoonline].connector.http.mule.default.dispatcher.01] org.mule.transport.http.HttpClientMessageDispatcher: [{"field":"user","message":"Property [user] of class [class pl.fissst.integration.mule.RecognizeAutoonlineDocumentCommand] cannot be null"},{"field":"password","message":"Property [password] of class [class pl.fissst.integration.mule.RecognizeAutoonlineDocumentCommand] cannot be null"},{"field":"fileName","message":"Property [fileName] of class [class pl.fissst.integration.mule.RecognizeAutoonlineDocumentCommand] cannot be null"}]
ERROR 2013-04-25 08:15:58,692 [[fisbps-aoutoonline].connector.http.mule.default.dispatcher.01] org.mule.exception.DefaultMessagingExceptionStrategy: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-09T13:22:42.807

This could be a reason where the size of the file is too big and the time for reading file is less and only little or half of the file.

For this you need to use the "file age" attribute for the file endpoint .

Please follow the below link which has the details of the file age

[http://www.mulesoft.org/documentation/display/current/File+Endpoint+Reference](http://www.mulesoft.org/documentation/display/current/File+Endpoint+Reference)

# php - 如何防止我的 LIKE 按钮在客户端和服务器端发送垃圾邮件

> ID：16192251
> 
> 赞同：1
> 
> 时间：2013-04-24T12:38:32.657
> 
> 标签：php, javascript, jquery

我在网页上的每个帖子下都有一个“LIKE”按钮。当用户单击“LIKE”按钮时，它会通过 AJAX 将 GET 请求发送到 like.php 页面，该页面将一行插入 mysql 数据库表。用户点击 LIKE 按钮后，LIKE 按钮消失。

我想确保用户点击“LIKE”按钮之间应该有 3 秒的延迟。我的意思是，如果用户单击帖子上的“LIKE”按钮并立即单击第二个帖子上的 LIKE 按钮，并且如果此时间少于 3 秒，则应该拒绝 LIKE 按钮过程。

现在，问题是我应该把这张支票放在哪里，在客户端还是在服务器端。如果一个服务器端，我想到了一个解决方案。

我想把这段代码放到like.php页面

```
if(isset($_SESSION["last_like_time"]))
{
    $last_like_time = $_SESSION["last_like_time"];
    $time_diff = time()-$last_like_time;
    if($time_diff<3)
    {
        die("ERROR: You must wait at least " . (3 - $time_diff) . " seconds to Like another Post");
    }
    $_SESSION["last_like_time"] = time();
}
else
{
    $_SESSION["last_like_time"] = time();
} 
```

我的问题是，这是检查服务器端时差的有效方法吗？如果不是哪个是最好的方法？

我的第二个问题，如何在不去服务器端的情况下在客户端执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T12:46:17.467

您不能在客户端中放置这样的安全性。因为客户可以改变。如果用户真的想向您发送垃圾邮件，他可能不会使用浏览器。

在使用 php 的服务器端，`time()`可以检查当前用户的最后一个“赞”操作。

如果你真的想把这种安全性放在客户端，你必须使用一些 javascript。

# c# - 使用实体框架添加新数据

> ID：16192253
> 
> 赞同：0
> 
> 时间：2013-04-24T12:38:46.727
> 
> 标签：c#, wpf, entity-framework

我正在尝试将新数据添加到我的数据库中，这是我的代码：

```
// This is the dbContext
private BugTrackerDBContainer db = new BugTrackerDBContainer();

//The objet with its properties
public static Developper devAdded = new Developper();
devAdded.Name = txb_name.Text;
devAdded.FirstName = txb_firtname.Text;

// Add to the database
db.AddToDevelopper(devAdded);
db.SaveChanges(); 
```

我的问题是我启动它一次，它工作正常，但两次我有这个错误：

> 一个实体对象不能被多个 IEntityChangeTracker 实例引用。

为什么 ？

感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T12:42:27.503

函数和变量声明的所有这些混合是什么？
您尝试将相同的静态实例对象两次添加到相同的 DataContext 中，它将失败。

*   不要声明静态变量。是坏的。
*   不要将 Context 声明为字段。通过 using 块将其用作局部变量。
*   不要将对文本框等 UI 元素的访问与对数据库的操作混为一谈。在您的应用程序中创建层。

一个例子 ：

```
public void AddDevelopperButton_Click(object sender, EventArgs e)
{
    this.AddDevelopper(txb_name.Text, txb_firtname.Text);
}

public Developper AddDevelopper(string name, string firstName)
{
    Developper devAdded = new Developper();
    devAdded.Name = name;
    devAdded.FirstName = firstName;

    using(BugTrackerDBContainer db = new BugTrackerDBContainer())
    {
        db.AddToDevelopper(devAdded);
        db.SaveChanges();
    }
    return devAdded;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T12:44:14.270

您不应该将数据库实体作为静态对象。问题很可能是这一行：

```
public static Developper devAdded = new Developper(); 
```

将代码更改为@Scorpi0 推荐的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T15:13:21.047

我的建议是：

A：学习基础编程

什么可能的原因声明为静态：

```
public static Developper devAdded = new Developper(); 
```

B：然后开始研究 EF 和其他框架。

# ios - 为什么给 addArcWithCenter 一个 0 度的 startAngle 使它从 90 度开始？

> ID：16192254
> 
> 赞同：22
> 
> 时间：2013-04-24T12:38:51.387
> 
> 标签：ios, objective-c, geometry, core-animation, uibezierpath

我正在创建一个`CAShapeLayer`用作 a`UIView`图层的蒙版。我正在使用 a`UIBezierPath`来绘制形状图层。它工作得很好，除了我在画画时得到了一些奇怪的结果。几何图形未按预期运行。我正在尝试在右上角绘制简单的“饼图”：

```
#define degreesToRadians(x) ((x) * M_PI / 180.0)

...

// "layer" refer's to the UIView's root layer

CAShapeLayer *maskLayer = [CAShapeLayer layer];

maskLayer.frame =
    layer.presentationLayer ? 
    ((CAGradientLayer *)layer.presentationLayer).bounds : layer.bounds;
maskLayer.fillRule = kCAFillRuleEvenOdd;
maskLayer.needsDisplayOnBoundsChange = YES;

CGFloat maskLayerWidth = maskLayer.bounds.size.width;
CGFloat maskLayerHeight = maskLayer.bounds.size.height;
CGPoint maskLayerCenter = 
    CGPointMake(maskLayerWidth/2,maskLayerHeight/2);

UIBezierPath *path = [UIBezierPath bezierPath];

[path moveToPoint:maskLayerCenter];

[path addArcWithCenter:maskLayerCenter radius:(maskLayerWidth/2)
startAngle:degreesToRadians(0) endAngle:degreesToRadians(90) clockwise:YES];

[path closePath];

maskLayer.path = path.CGPath;

layer.mask = maskLayer; 
```

最终结果是在右下角绘制了一个饼图。弧的第一个点在 90 度处绘制，然后下降到 180 度。为什么即使我使用的是 0 度角和 90 度角，它也会这样做？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-04-24T13:02:05.023

此图像直接来自[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIBezierPath_class/Reference/Reference.html#//apple_ref/occ/instm/UIBezierPath/addArcWithCenter:radius:startAngle:endAngle:clockwise:)。

![图片](https://i.imgur.com/l9IvrvA.png)

并且讨论了它是如何工作的（给定默认坐标系）

> **讨论**
> 此方法添加从当前点开始的指定圆弧。创建的圆弧位于指定圆的周长上。在默认坐标系中绘制时，起点和终点角度基于**图 1**所示的单位圆。例如，指定起始角度为 0 弧度，结束角度为 π 弧度，并设置 顺时针参数以`YES`绘制圆的下半部分。但是，指定相同的开始和结束角度但将`clockwise`参数集设置为`NO`绘制圆的上半部分。

这就是角度的工作原理`addArcWithCenter:radius:startAngle:endAngle:clockwise:`。如果这不是您所看到的，那么您计算的角度不正确。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-24T13:01:24.790

在[bezierPathWithArcCenter:radius:startAngle:endAngle:顺时针](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIBezierPath_class/Reference/Reference.html#//apple_ref/occ/clm/UIBezierPath/bezierPathWithArcCenter:radius:startAngle:endAngle:clockwise:)看一下**图 1** ：文档：对于右上角的“饼图”，您必须使用参数

```
startAngle:degreesToRadians(-90) endAngle:0 clockwise:YES 
```

（原因是 iOS 上默认的坐标系有一个 x 轴指向右侧，一个 y 轴指向下方。）

# java - 在java中实现1对1类

> ID：16192255
> 
> 赞同：0
> 
> 时间：2013-04-24T12:38:52.257
> 
> 标签：java, uml, one-to-one

我有一个关于在 java 中实现 1 对 1 关联的问题。例如，考虑下面的类图：

![在此处输入图像描述](https://i.stack.imgur.com/WYhGm.jpg)

我是这样实现的：

```
public class Student{
    private AttendanceRole attendance;

    public Student(AttendanceRole attendance){
        this.attendance=attendance;
        addTwoWayLink(this); //creates the two-way link between objects
    }

    public void setAttendanceRole(AttendanceRole a){ //if a students changes from 
        attendance = a;                              //part time to full time
    } 

}

public class AttendanceRole{
    private Student student;

    void addTwoWayLink(Student student){
        this.student=student;
    }

} 
```

这是问题所在：

1）假设我创建了一个学生对象，并且我想更改学生的出勤角色。在这种情况下，我调用 setAttendanceRole 方法。但我必须给它一个 AttendanceRole 对象作为参数。由于这是一对一的关系，所以我给出的参数也有一个学生与之相关联。所以，这是一个问题。此外，我无法在没有学生链接的情况下创建 AttendanceRole 对象，因为这是一对一的关联。当我第一次尝试创建一个学生对象并调用它的构造函数时，也会发生同样的情况。我可以将 null 作为参数值，但在这种情况下，我不会损害 1 对 1 关系约束吗？我能做些什么呢？

2）另外，我设计了这个类，以便我们可以创建一个学生对象并设置它的 AttendanceRole。我的意思是我们不能创建一个 AttendanceRole 对象并设置它的学生。这是一个坏主意吗？还是由设计者决定首先创建哪个对象。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T12:44:09.943

尝试重新安排您的课程：

```
public enum ROLE_TYPE { FULL_TIME, PART_TIME }

public class student {

    private ROLE_TYPE attendanceRole;

    public SetRoleType( ROLE_TYPE type )
    {
        this.attendanceRole = type;
    }

    public GetRoleType()
    {
        return attendanceRole;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T12:49:58.420

你到底想完成什么？

您可以尝试使用像 Capt. Skyhawk 的答案这样的枚举。

或者你可以尝试继承：

```
public abstract class Student{

   public void methodA() { ... }

   public void methodB();

}

public class FullTimeStudent extends Student {

   public void methodB(){ //fulltime implementation }

}

public class PartTimeStudent extends Student {

   public void methodB(){ //parttime implementation }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T12:46:14.337

我建议你设计类似下面的东西

```
public interface AttendanceRole {
}

public class FullTimeStudent implements AttendanceRole {
}

public class PartTimeStudent implements AttendanceRole {
}

public class Student {
    private AttendanceRole attendaceRole;
    public AttendanceRole  getAttendanceRole(){
        return attendaceRole;
    }
    public void setAttendaceRole(AttendaceRole attendaceRole)}
        this.attendaceRole = attendaceRole;
    }
} 
```

创建`Student`对象时，传递相应的出勤角色（全职/兼职）。

`Student`创建对象的代码示例：

```
Student student1 = new Student();
Student student2 = new Student();
FullTimeStudent fullTimeStudent = new FullTimeStudent ();
PartTimeStudent partTimeStudent = new PartTimeStudent ();
student1.setAttendanceRole(fullTimeStudent );
student2.setAttendanceRole(partTimeStudent ); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T13:03:32.860

由于简单的`setAttendanceRole(AttendanceRole a)`方法不可能满足约束，因此您的`Student`类不能有这样的方法。

由于不可能创建`AttendanceRole`满足约束的对象，因此不可能独立创建这样的对象。（*是*的，真的）。作为一个`AttendanceRole`和`Student`如此紧密地联系在一起，它们并不是真正完全独立的类。

约束（不变量）必须仅适用于可访问方法的返回。私有方法和构造函数不需要满足它们。考虑创建`AttendanceRole`一个 的嵌套类`Student`，并使用工厂函数代替`Student`.

```
 public class Student {
      public abstract class AttendanceRole {
         ...

         public final Student getStudent() {
            return Student.this;
         }
      }

      private final class FullTimeStudent extends AttendanceRole {
         ...
      }

      private AttendanceRole role;

      private Student() {
         ...
         // this.role is null
      }

      public static Student createFullTimeStudent() {
         final Student s = new Student();
         s.role = new FullTimeStudent();
         return s;
      }

      public final AttendanceRole getRole() {
         return role;
      } 
```

该`AttendanceRole.getStudent()`方法使用特殊语法[获取外部类对象](https://stackoverflow.com/questions/1816458/getting-hold-of-the-outer-class-object-from-the-inner-class-object)`Student.this`。

# apache - mod-rewrite 可以解析/修改从反向代理服务器返回到客户端的字符串吗？

> ID：16192258
> 
> 赞同：0
> 
> 时间：2013-04-24T12:39:03.840
> 
> 标签：apache, mod-rewrite

Apache新手在这里。

很明显，我可以使用 mod-rewrite 来更改通过 apache-as-reverse-proxy 和重写规则从客户端传递到最终目标服务器的 URL。

重写规则也可以朝另一个方向工作吗？例如，如果我的目标服务器`http://foo/?someparam=true&removeme=now`在将字符串返回给客户端之前要在 URL ( ) 上附加一些内容，那么 mod-rewrite 也可以为我执行此操作吗？我想把以前的字符串变成`http://foo?someparam=true`

非常感谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:44:00.710

Mod_rewrite 不会为您执行此操作。您需要使用[mod_proxy_html](http://apache.webthing.com/mod_proxy_html/)之类的东西，它将获取从反向代理返回*的内容并重写内容*。

webthing 链接有一个关于如何设置的教程。

# java - 在 Lucene 4 中，AtomicReader 和 CompositeReader 有什么区别

> ID：16192266
> 
> 赞同：4
> 
> 时间：2013-04-24T12:39:46.193
> 
> 标签：java, lucene

试图将一些 Lucene 3 代码转换为 Lucene 4，

我想使用 termEnums.docs(ir.getLiveDocs()) 仅返回未针对特定术语删除的文档。但是 getLiveDocs() 仅适用于 AtomicReader，虽然我只有一个索引，但它是基于文件的并使用 DirectoryReader（它是 CompositeReader 的子类）。

所以我想我可以使用 SlowCompositeReaderWrapper 但这个名字阻止了我，但我不明白的是，不是几乎每个人都使用基于文件系统的索引，不是几乎每个人都使用 CompositeReaders 吗？

然而文档似乎暗示我们应该使用 AtomicReaders 但我不明白如何使用基于文件的索引来做到这一点，也许如果基于文件的索引只有一个段，但不是由 Lucene 创建的段，因为它需要它们，并且通常不受最终用户应用程序的密切控制。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T18:44:30.680

好问题。这可能是从 lucene 3 迁移到 lucene 4 时弹出的最常见的情况。先看看[这篇文章](http://blog.thetaphi.de/2012/02/is-your-indexreader-atomic-major.html)，它解释了重构背后的原因。

基本上，一切都是 lucene 中的每个片段，但一些 lucene 3 API 没有反映这一点。in lucene 3暴露的一些方法`IndexReader`只是合并了所有段的大量信息，做的很慢，这就是`SlowCompositeReaderWrapper`. 我们的想法是从每个细分市场中获取您需要的信息并自行合并。An`AtomicReader`使您可以访问单个段，而 the`CompositeReader`是整个索引的视图，它不会公开过去可用的所有方法`IndexReader`。

# php - Symfony2 中 SQL 用户变量的清理

> ID：16192269
> 
> 赞同：1
> 
> 时间：2013-04-24T12:40:02.303
> 
> 标签：php, symfony

是否有 Symfony2 功能来清理用户输入？

到目前为止，这是我的代码；

```
 $action_id = $this->getRequest( )->query->get('actionid');

    $conn = $this->get('database_connection');
    $query   = $conn->fetchAll('SELECT * FROM api_codes WHERE `action_id` = "' . $action_id . '" LIMIT 1'); 
```

正在从表单中获取 action_id，以便用户输入。我想知道 symfony2 上是否有一种方法可以清理该 var，除了用于清理的经典 php 函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T12:53:15.887

我不认为 Symfony 在控制器级别提供任何特定的帮助器/方法来清理用户输入。但是，[Doctrine](http://www.doctrine-project.org/)带有对数据库 (SQL) 注入的[清理](http://docs.doctrine-project.org/projects/doctrine-dbal/en/latest/reference/data-retrieval-and-manipulation.html#dynamic-parameters-and-prepared-statements)。

换句话说，从[文档](http://docs.doctrine-project.org/projects/doctrine-dbal/en/latest/reference/data-retrieval-and-manipulation.html#dynamic-parameters-and-prepared-statements)中，

```
$stmt = $conn->prepare('SELECT * FROM api_codes WHERE `action_id` = :action_id LIMIT 1');
$stmt->bindValue("action_id", $action_id); // Which would prevent SQL Injection
$stmt->fetchAll(); // Which could also be done in a one line refactoring 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T14:45:29.883

您至少应该将参数与 DBAL 一起使用（因为这就是您正在使用的）：

```
$conn->fetchAll(
  'SELECT * FROM api_codes WHERE `action_id` = :id LIMIT 1',
   array("id"=>$action_id)
); 
```

或者您的代码对 SQL 注入开放。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T13:18:42.087

如果您谈论 SQL 转义，您可以`$conn->quote($input);`在当前示例中使用。您还可以使用 Ahmed 建议的准备好的语句。

# c# - TFS API：使用 VersionControlServer.QueryHistory 从主分支检索变更集

> ID：16192271
> 
> 赞同：1
> 
> 时间：2013-04-24T12:40:06.383
> 
> 标签：c#, tfs, ironpython, tfs-sdk

给定：团队项目 X 中具有 m > n 变更集的 TFS 服务器。

我正在使用 TFS API 并希望获取该分支的 n 个最新变更集。

我想我应该使用[VersionControlServer.QueryHistory](http://msdn.microsoft.com/en-us/library/bb143089.aspx)，但我不明白如何指定我想要来自项目 X 的​​主（默认）分支的所有提交，但不来自任何其他分支或集合中的另一个团队项目。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T13:33:43.973

如果您只想更改 `$/Project/Some/Path`，那么这应该是`QueryHistory`. 例如：

```
QueryHistory("$/Project/Some/Path", RecursionType.Full, 5); 
```

将显示最近受影响的 5 个变更集`$/Project/Some/Path`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-09T16:23:12.740

这对我有用——我必须使用 QueryHistoryParameters 重载并设置 SortAscending = false 才能获得最新的变更集 ID，而不是第一个变更集 ID。

```
var p = new QueryHistoryParameters(item.ServerItem, RecursionType.Full) {SortAscending = false};
var q = versionControl.QueryHistory(p);
var lastCs = q.FirstOrDefault();

if (lastCs != null)
    item.LastChangesetId = lastCs.ChangesetId; 
```

# cakephp - 如何将数据插入到 cakephp 中的表中？

> ID：16192272
> 
> 赞同：1
> 
> 时间：2013-04-24T12:40:07.263
> 
> 标签：cakephp, cakephp-2.0

我在我的模型中使用此代码，

```
public function registration(){
$name = 'Foo';
$city = 'Bar';

$this->User->save( 
    array(
        'name' => $name,
        'city' => $city
        )
    );
} 
```

但是在插入时出现致命错误

```
"Error: Call to a member function save() on a non-object
 File: C:\xampp\htdocs\blogs\app\Model\User.php" 
```

如何插入？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-24T12:45:58.420

您已经在`User`模型中。只需执行以下操作：

```
$this->save( 
    array(
        'name' => $name,
        'city' => $city
        )
    );
} 
```

# javascript - html 中的列表是否从父列表继承 id？

> ID：16192292
> 
> 赞同：0
> 
> 时间：2013-04-24T12:41:05.627
> 
> 标签：javascript, html, css

我有一个 html 代码，我在其中使用无序列表来显示目录结构。在单击 li 标签时，我调用一个 js 函数（比如 changecss()），在其中我阻止子 lis 的显示以使它们可见。但是在单击子 lis 时。如果我点击子 li，他们也会调用相同的函数 changecss() 。他们没有附带 onclick 事件，但是当我单击这些 li 时，他们仍然调用该函数。

这是代码：

*   额外类 2
*   额外课程 3

```
 </li>
        <li>Subject 2</li>
        <li>Subject 3</li>
    </ul>

</li>
<li id="second"  onclick="showSubList(this)">Class 2
<ul style="display:none" >
        <li >subject1
            <ul >
                <li> extra class 2</li>
            <li>extra class 3</li>
            </ul>

        </li>
        <li>Subject 2</li>
        <li>Subject 3</li>
    </ul>

</li>
<li>Class 3</li>
<li>Class 4</li> 
```

用于此的 javaScript 是： function showSubList(e) { alert(e.id);

```
 if(e.getElementsByTagName("ul")[0].style.display == "none")
      {
         e.getElementsByTagName("ul")[0].style.display="block";
          }
      else if(e.getElementsByTagName("ul")[0].style.display == "block")
      {
          e.getElementsByTagName("ul")[0].style.display="none";
          }
   }; 
```

你也可以在这里查看：http: [//jsfiddle.net/TTYMm/](http://jsfiddle.net/TTYMm/)

对这种行为有任何想法吗？

谢谢。

这是可能的解决方法：http: [//jsfiddle.net/TTYMm/1/](http://jsfiddle.net/TTYMm/1/)

多谢你们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:43:40.307

不，`id`s 不是继承的。

列表项虽然包含在列表中。如果事件没有被列表项捕获并阻止传播，它将[冒泡](https://developer.mozilla.org/en-US/docs/Gecko_DOM_Reference/Examples#Example_5%3a_Event_Propagation)到列表，然后到列表的父级，依此类推。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T12:46:42.100

在事件传播的情况下它的正常行为。

请阅读更多关于它的[信息 http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-flow](http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-flow)

# google-chrome - Chrome 远程调试：“与目标分离”错误

> ID：16192299
> 
> 赞同：11
> 
> 时间：2013-04-24T12:41:11.793
> 
> 标签：google-chrome, google-chrome-devtools, remote-debugging

我正在通过 USB 连接到我的 Mac 的移动设备（HTC 设备）上的 Chrome 中远程调试移动网站。一切正常，除了我在桌面浏览器中每 30 秒出现一次错误：

```
Detached from the target
Remote debugging has been terminated with reason: websocket_closed
Please re-attch to the new target. 
```

如果我然后使用*adb devices*检查连接的设备，则没有。*所以我拔下我的设备，等待几秒钟，用adb forward tcp:9222 localabstract:chrome_devtools_remote*重新连接它，一切正常 - 直到发生同样的错误。

有谁知道我怎么能假装这个错误？

# c# - C#中调整对比度后的图形修改

> ID：16192301
> 
> 赞同：0
> 
> 时间：2013-04-24T12:41:20.687
> 
> 标签：c#, image, graphics

我正在尝试创建一个小工具来计算图片中的兴趣区域。

为了获得更好的效果，我必须调整图像的对比度。当我尝试使用 Colormatrix-System 来完成时，我只得到原始图像的结果，而不是调整后的图像。

这是我的代码。首先，我通过以下方式加载了图像：

```
Img = Image.FromFile(openFileDialog1.FileName);
newBitmap = new Bitmap(openFileDialog1.FileName); 
```

之后我通过以下方式调整了对比度：

```
{
    domainContrast.Text = trackBar2.Value.ToString();

    contrast = 0.04f * trackBar2.Value;

    Bitmap bm = new Bitmap(newBitmap.Width, newBitmap.Height);

    Graphics g = Graphics.FromImage(bm);
    ImageAttributes ia = new ImageAttributes();

    ColorMatrix cm = new ColorMatrix(new float[][] {
        new float[] {contrast, 0f, 0f, 0f, 0f},
        new float[] {0f, contrast, 0f, 0f, 0f},
        new float[] {0f, 0f, contrast, 0f, 0f},
        new float[] {0f, 0f, 0f,  1f , 0f},
        new float[] {0.001f, 0.001f, 0.001f, 0f, 1f}
    });

    ia.SetColorMatrix(cm);
    g.DrawImage(newBitmap, new Rectangle(0, 0, newBitmap.Width, newBitmap.Height), 0, 0, newBitmap.Width, newBitmap.Height, GraphicsUnit.Pixel, ia);

    g.Dispose();
    ia.Dispose();

    pictureBox1.Image = bm;
} 
```

这是计算 rois 的代码：

```
{   
    count = 0;
    Bitmap nB = new Bitmap(newBitmap.Width, newBitmap.Height);
    int lastCol = 1;
    //int y =250;

    int countStart = 1;
    int countEnd = 1;

    Here is the code of the routine:

        for (int y = 1; y < newBitmap.Height - 1; y++)
        {
            for (int x = 1; x < newBitmap.Width - 1; x++)
            {

                Color pixel = newBitmap.GetPixel(x, y);

                int colVal = (pixel.R + pixel.G + pixel.B);

                if (lastCol == 1) lastCol = (pixel.R + pixel.G + pixel.B);

                int diff;
                diff = colVal - lastCol;

                //if (colVal > lastCol) { diff = colVal - lastCol; } else { diff = lastCol - colVal; }

                if (diff > 50)
                {
                    roiCount = true;
                    countEnd = x;
                    adjusted.SetPixel(x, y, Color.Red);
                    lastCol = colVal;
                    //count++;                  
                }
                else if (diff < -50)
                {
                    //roiCount = true;
                    countStart = x;
                    adjusted.SetPixel(x, y, Color.Blue);
                    lastCol = colVal;

                }
                if (roiCount)
                {

                    for (int i = countStart; i < countEnd; i++)
                    {
                        adjusted.SetPixel(i, y, Color.Green);
                    }
                    int roiCenter = (countStart + countEnd) / 2;
                    //int roiYTest = y + 1;
                    Color roiCenterPixel = newBitmap.GetPixel(roiCenter, y);

                    int colRoiCenterPixel = roiCenterPixel.R + roiCenterPixel.G + roiCenterPixel.B;
                    Color PixelRoi = newBitmap.GetPixel(roiCenter, y + 1);
                    int colRoi = (PixelRoi.R + PixelRoi.G + PixelRoi.B);
                    int diffRoi = colRoiCenterPixel - colRoi;
                    if (diffRoi < -50 || diffRoi > 50)
                    {
                        count++;
                    }
                    roiCount = false;
                    //count++;
                }
            }

}
    label17.Text = Convert.ToString(count); pictureBox1.Image = nB; 
```

此外，它将 rois 的颜色变为绿色。计数程序正常工作，但正如我所说，使用原始图像。如何“告诉”计数程序使用调整后的图像？如何将修改写入原始图像？

谢谢你的帮助。

蒂莫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:53:22.697

很难说 - 你没有向我们展示 的代码`// COUNTING ROUTINE`，所以我们不知道计数例程正在处理哪个位图。我希望您需要将对比度调整后的图像用作

```
Bitmap adjusted = (Bitmap)pictureBox1.Image; 
```

然后执行你在`// COUNTING ROUTINE`上所做的一切`adjusted`。

* * *

编辑问题后，您正在处理的代码`newBitmap`（这是加载的位图 - 对比度变化的来源）很清楚，而不是对比度变化的位图。您应该`newBitmap`在所有要使用合同调整位图的地方更改为`adjusted`，如我的回答中所示声明和设置。

# c# - XNA 4.0 消失的物体 - 效果，灯光 (?)

> ID：16192306
> 
> 赞同：0
> 
> 时间：2013-04-24T12:41:55.893
> 
> 标签：c#, xna, light, procedural

XNA 4.0 - 项目链接如下。

问题：当我移开相机时，行星似乎慢慢消失了。看起来好像光线消失了或什么的。

我尝试将远平面和近平面更改为不同的值，但它没有改变任何东西。

设想：

1.  该程序使用用户索引的原始对象创建球体（不使用模型）。

2.  然后使用自定义规则和算法创建纹理。我确信这些纹理生成得很好。

3.  这就是它变得棘手的地方，因为我在效果方面是个菜鸟。（我没有创建效果文件，所以我对如何调整它知之甚少（尽管尝试了很多）。）这就是自定义 .fx 文件 - 纹理应用于球体并应用闪电。我认为问题可能出在某个地方。

4.  在那之后，不会发生太多可能对外观产生任何影响的事情。唯一想到的其他事情是视图和投影矩阵。

我在这里发布了效果文件以及整个项目 (300 kb) 它应该可以在任何机器上运行，我猜如果你想试试的话。编辑：忘记在菜单中按空格选择“播放”

Dropbox 链接：[https ://dl.dropboxusercontent.com/u/819242/Procedural%20Planet%20Problem.zip](https://dl.dropboxusercontent.com/u/819242/Procedural%20Planet%20Problem.zip)

效果文件： http: [//pastebin.com/jcirdfXJ](http://pastebin.com/jcirdfXJ)

我将效果文件放在 pastebin 上，因为当我将它复制到这篇文章时，格式看起来很糟糕（即使使用“代码”选项）。

我希望有人能启发我，因为我现在真的很绝望。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:34:23.487

问题是您在创建漫反射纹理时启用了 mip 映射...

禁用它，它将正确显示。

# ruby-on-rails - 使用 Capistrano 部署太阳黑子时没有 PID 文件错误

> ID：16192309
> 
> 赞同：1
> 
> 时间：2013-04-24T12:42:02.100
> 
> 标签：ruby-on-rails, capistrano, sunspot-solr

我正在尝试使用 Capistrano 部署 Sunspot Solr。我一直在根据这个要点进行设置：[https](https://gist.github.com/doitian/1795439) ://gist.github.com/doitian/1795439 。

**部署.rb**

```
namespace :deploy do
  task :start do ; end
  task :stop do ; end
  task :restart, :roles => :app, :except => { :no_release => true } do
    run "#{try_sudo} touch #{File.join(current_path,'tmp','restart.txt')}"
  end

  desc "Migrate Database"
  task :migrate_db do
    run "cd #{current_path} && rake db:migrate RAILS_ENV=production"
    run "touch #{current_path}/tmp/restart.txt"
  end

  desc "Create Solr Directory"
  task :setup_solr_data_dir do
    run "mkdir -p #{shared_path}/solr/data"
  end
end

namespace :solr do
  desc "start solr"
  task :start, :roles => :app, :except => { :no_release => true } do
    run "cd #{current_path} && RAILS_ENV=#{rails_env} bundle exec sunspot-solr start --port=8983 --data-directory=#{shared_path}/solr/data --pid-dir=#{shared_path}/pids"
  end
  desc "stop solr"
  task :stop, :roles => :app, :except => { :no_release => true } do
    run "cd #{current_path} && RAILS_ENV=#{rails_env} bundle exec sunspot-solr stop --port=8983 --data-directory=#{shared_path}/solr/data --pid-dir=#{shared_path}/pids"
  end
  desc "reindex the whole database"
  task :reindex, :roles => :app do
    stop
    run "rm -rf #{shared_path}/solr/data"
    start
    run "cd #{current_path} && RAILS_ENV=#{rails_env} bundle exec rake sunspot:solr:reindex"
  end
end

after "deploy", "deploy:cleanup", "deploy:migrate_db", 'deploy:setup_solr_data_dir', 'solr:stop', 'solr:reindex', 'solr:start' 
```

我已经为在 sunspot.yml 中托管我的生产应用程序的内部服务器设置了 IP：

```
production:
  solr:
    hostname: [My Server IP]
    port: 8983
    log_level: WARNING
    # read_timeout: 2
    # open_timeout: 0.5 
```

当我尝试运行**cap deploy**时，我收到以下错误：

```
* 2013-04-24 08:28:04 executing `solr:stop'
  * executing "cd /home/username/apps/appname/current && RAILS_ENV=production bundle exec sunspot-solr stop --port=8983 --data-directory=/home/username/apps/appname/shared/solr/data --pid-dir=/home/datacomm/apps/appname/shared/pids"
    servers: ["0.0.0.0"]
    [0.0.0.0] executing command
 ** [out :: 0.0.0.0] java version "1.7.0_15"
 ** [out :: 0.0.0.0] 
 ** [out :: 0.0.0.0] OpenJDK Runtime Environment (IcedTea7 2.3.7) (7u15-2.3.7-0ubuntu1~12.04.1)
 ** [out :: 0.0.0.0] 
 ** [out :: 0.0.0.0] OpenJDK 64-Bit Server VM (build 23.7-b01, mixed mode)
 ** [out :: 0.0.0.0] 
 ** [out :: 0.0.0.0] **No PID file at /home/username/apps/appname/shared/pids/sunspot-solr.pid**
 ** [out :: 0.0.0.0] 
    command finished in 990ms
failed: "rvm_path=$HOME/.rvm/ $HOME/.rvm/bin/rvm-shell '1.9.3' -c 'cd /home/username/apps/appname/current && RAILS_ENV=production bundle exec sunspot-solr stop --port=8983 --data-directory=/home/username/apps/appname/shared/solr/data --pid-dir=/home/username/apps/appname/shared/pids'" on 0.0.0.0 
```

我错过了什么？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T12:58:43.580

当`run`执行`solr:stop`任务中提供的命令时，看起来你还没有运行 solr，所以它们没有 solr 的 pid 文件。您正试图停止一个不存在的进程。

如果返回的代码`run`是错误代码，Capistrano 任务将引发异常。您可以通过强制该命令永不返回错误来解决此问题。

使该`run`命令看起来像这样

```
run("YOUR COMMAND HERE > /dev/null 2>&1 || true") 
```

现在，如果您`solr:stop`在 solr 未运行时调用，`true`将返回，让 Capistrano 继续运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-02T13:11:39.767

与 Deefour 的解决方案类似，更详细的方法可能是将 'run' 命令包装在 'begin/rescue' 语句中：

```
....
desc "start solr"
task :start, :roles => :app, :except => { :no_release => true } do
  begin
    run "cd #{current_path} && RAILS_ENV=#{rails_env} bundle exec sunspot-solr start --port=8983 --data-directory=#{shared_path}/solr/data --pid-dir=#{shared_path}/pids"
  rescue Exception => error
    puts "***Unable to start Solr with error: #{error}."
    puts "***Continuing anyway.***"
  end
end
... 
```

# jms - 使消息 ID 上的 JMS 消息过期

> ID：16192312
> 
> 赞同：0
> 
> 时间：2013-04-24T12:42:06.210
> 
> 标签：jms

我已经发布了关于主题的消息。发布消息后，我有消息 ID。现在使用这个消息 ID，我可以更改 JMS 消息过期时间吗？

我有安第斯经纪人引擎。

场景：假设我错误地向某个主题发送了一条消息，并且在订阅者变为活动状态并接收到消息之前，我想使消息过期。

谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T20:18:46.473

不确定您真正想要做什么，删除消息？无论如何，您应该使用指定消息 ID的[jms 选择器将其读出。](http://docs.oracle.com/javaee/5/tutorial/doc/bnceh.html#bncer)然后我看不出更改过期标头并再次发布它的意义，因为您只想删除它，但您当然也可以出于任何原因这样做。

# android - 如何不在 Android 中保存视图状态？

> ID：16192321
> 
> 赞同：12
> 
> 时间：2013-04-24T12:42:29.677
> 
> 标签：android, orientation, state

我正在开发应用程序，我需要在 ListView 中显示建议，并且当方向改变时，我希望隐藏该列表。但它无论如何都会出现在屏幕上。我试过这个：1）获取列表适配器并清除它。2）在方向改变之前设置可见性 GONE（但在 onCreate 后再次可见） 3）在 onCreate 中设置可见性 GONE，但列表仍然出现在屏幕上（我认为可能是 android 保存了旧列表，因为我再次初始化列表视图和它看起来像空的，但屏幕上的列表不是）。那么，我怎样才能摆脱列表呢？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-24T15:24:31.103

与其使用像*android:configChanges*这样影响 Activity 中所有视图的全局变量，不如使用**setSaveEnabled(boolean)**方法 或等效的 xml 属性 **android:saveEnabled** 呢？

> 控制是否启用保存此视图的状态（即是否会调用其 onSaveInstanceState() 方法）。

如果将其设置为 false，则在更改方向时应始终返回默认状态，因为不会保存其状态。

例如，您可以将其放入布局文件中：

```
<ListView
    ....
    android:visibility="invisible"
    android:saveEnabled="false">
</ListView> 
```

然后在您开始输入时将可见性设置为可见。或者，如果您更喜欢将可见性和方法*setSaveEnabled*放在 onCreate 方法中。

我尝试了一个简单的 ListView 和一个将可见性更改为 true 的 Button。旋转时，ListView 变得不可见（它的默认状态）

另请注意：

> 该标志只能禁用该视图的保存；任何子视图可能仍保存其状态。

所以你应该在 onStop() 或任何你想要的方法期间清除列表，但即使你不这样做，ListView 在旋转时仍然不可见

资源：

*   [http://developer.android.com/reference/android/view/View.html#attr_android:saveEnabled](http://developer.android.com/reference/android/view/View.html#attr_android:saveEnabled)
*   [http://developer.android.com/reference/android/view/View.html#setSaveEnabled%28boolean%29](http://developer.android.com/reference/android/view/View.html#setSaveEnabled%28boolean%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T12:44:58.347

```
@Override
protected void onSaveInstanceState(Bundle outState) {
} 
```

将此函数覆盖到您的活动中，而不是调用“超级”方法！

或在清单中指定方向：

```
<activity
    android:name="com.blabla"
    android:configChanges="keyboardHidden|orientation|screenSize"
    android:screenOrientation="portrait" >
</activity> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T12:46:32.703

Android 系统在设备方向更改时调用您的活动的 onCreate() 方法。如果您不想在方向更改时再次创建活动，请将 configchanges 添加到清单中的活动条目

```
<activity
        android:name=".MyActivity"
        android:configChanges="keyboardHidden|orientation"
        /> 
```

# maven - Maven Eclipse 插件增加内存？

> ID：16192325
> 
> 赞同：1
> 
> 时间：2013-04-24T12:42:54.100
> 
> 标签：maven, gwt, jvm-arguments, mgwt, gwt-maven-plugin

我在这里阅读了其他几个问题和答案，但似乎都没有帮助我。我正在尝试构建一个 mgwt 项目，该项目将有很多排列，因此内存设置必须非常高。

我正在使用 maven4eclipse 插件以包为目标进行构建，在我的运行配置的 jre 选项卡上，我设置了以下内容

```
vm args:-Xms1024m -Xmx2048m -XX:MaxPermSize=1024m -XX:ReservedCodeCacheSize=64m 
```

尝试运行时失败并返回此错误：

```
[ERROR] Failed to execute goal org.codehaus.mojo:gwt-maven-plugin:2.3.0-1:compile (default) on project: Command [[
[ERROR] **C:\Program Files\Java\jdk1.7.0_17\jre\bin\java -Xmx512m** -classpath "..others stuff" -logLevel INFO -style OBF -war "Branch(mobile)\Project\target\Mobile-webcontent" -localWorkers 8
[ERROR] ]] failed with status 1
[ERROR] -> [Help 1] 
```

这向我表明我设置的参数没有被使用，我是否将它设置在错误的位置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T14:25:01.407

用于 GWT 编译的示例 POM 文件，其中包含为大多数 GWT 编译器选项（包括 JVM 选项）配置的设置。

```
 <plugins>
        <!-- GWT Maven Plugin -->
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>gwt-maven-plugin</artifactId>
            <dependencies>
                <dependency>
                    <groupId>com.google.gwt</groupId>
                    <artifactId>gwt-user</artifactId>
                    <version>${gwt.version}</version>
                </dependency>
                <dependency>
                    <groupId>com.google.gwt</groupId>
                    <artifactId>gwt-codeserver</artifactId>
                    <version>${gwt.version}</version>
                </dependency>                   
                <dependency>
                    <groupId>com.google.gwt</groupId>
                    <artifactId>gwt-dev</artifactId>
                    <version>${gwt.version}</version>
                </dependency>
                <dependency>
                    <groupId>com.google.gwt</groupId>
                    <artifactId>gwt-servlet</artifactId>
                    <version>${gwt.version}</version>
                </dependency>
            </dependencies>
            <!-- JS is only needed in the package phase, this speeds up testing -->
            <executions>
                <execution>
                    <phase>prepare-package</phase>
                    <goals>
                        <goal>compile</goal>
                    </goals>
                </execution>
            </executions>
            <!-- Plugin configuration. There are many available options, see gwt-maven-plugin 
                documentation at codehaus.org -->
            <configuration>
                <skip>true</skip>
                <strict>true</strict>
                <runTarget>app.html</runTarget>
                <!-- Turning This on after understanding soyc -->
                <!-- https://developers.google.com/web-toolkit/articles/fragment_merging -->
                <!-- <fragmentCount>95</fragmentCount> -->
                <!-- Ask GWT to create the Story of Your Compile (SOYC) (gwt:compile) -->
                <!-- Turn This on for generating soyc. This does not work if closure 
                    compiler is turned on. -->
                <compileReport>false</compileReport>
                <compilerMetrics>false</compilerMetrics>
                <soycDetailed>false</soycDetailed>
                <!-- End Generating SOYC -->
                <disableCastChecking>true</disableCastChecking>
                <disableClassMetadata>true</disableClassMetadata>
                <enableClosureCompiler>true</enableClosureCompiler>
                <optimizationLevel>9</optimizationLevel>
                <style>${gwt.style}</style>
                <module>${gwt.module}</module>
                <encoding>${project.build.sourceEncoding}</encoding>
                <logLevel>INFO</logLevel>
                <!-- ERROR, WARN, INFO, TRACE, DEBUG, SPAM, or ALL). -->
                <copyWebapp>true</copyWebapp>
                <hostedWebapp>${project.build.directory}/${project.artifactId}</hostedWebapp>
                <extraJvmArgs>-Xmx4096M -Xms1024M -XX:PermSize=128m -XX:MaxPermSize=256m</extraJvmArgs>
                <!-- <extraJvmArgs>-Xmx1024M -Xms1024m -Xss32m -XX:PermSize=64m -XX:MaxPermSize=128m -XX:+UseCompressedOops -XX:+UseConcMarkSweepGC -XX:+CMSPermGenSweepingEnabled -XX:+CMSClassUnloadingEnabled -DgeneratePom=true -XX:ReservedCodeCacheSize=128m -XX:+PrintCompilation -server</extraJvmArgs> -->
                <extra>${project.build.directory}/gwt-extra</extra>
                <deploy>${project.build.directory}/gwt-deploy</deploy>
                <localWorkers>4</localWorkers>
            </configuration>
        </plugin> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T13:06:46.820

`gwt-maven-plugin`分叉一个 JVM，并且不会从用于运行 Maven 的 JVM 继承设置。

如果您需要针对分叉 JVM 的特定 JVM 设置，您可以使用POM 中的 in 或`<extraJvmArgs>`在`<configuration>`命令行上进行设置。`gwt-maven-plugin``-Dgwt.extraJvmArgs="-Xms1g -Xmx2g"`

见[http://www.mojohaus.org/gwt-maven-plugin/compile-mojo.html#extraJvmArgs](http://www.mojohaus.org/gwt-maven-plugin/compile-mojo.html#extraJvmArgs)

# php - 通过嵌套的while循环边距div

> ID：16192327
> 
> 赞同：1
> 
> 时间：2013-04-24T12:42:59.530
> 
> 标签：php, css, loops, html

我在这样的循环（PHP）中有一个循环：

```
while(mysql...) {
 echo $row1->name.'<img src="info.png" />';
 while(another_mysql...) {
  echo $row2->name.'<img src="image.png" />';
 }
} 
```

现在这将导致如下结果：

```
head_1 [info.png]
value_a1 [image.png]
value_a2 [image.png]
value_a3 [image.png]
head_2 [info.png]
value_b1 [image.png]
value_b2 [image.png] 
```

如您所见，图像不在一条直线上，因为值可能不同，从而导致图像被推得更远。

当使用它转换值时，`str_pad();`它确实有效，但不稳定并且有点错误。我不知道如何将图像放在值所在的 div 旁边的 div 中，因为循环不喜欢它。

我该怎么做才能让它输出如下内容：

```
head1      [info.png]
value_a1   [image.png]
value_a2   [image.png]
value_a3   [image.png]
head2      [info.png]
value_b1   [image.png]
value_b2   [image.png] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T12:49:41.683

使用以下代码使其正确对齐：

```
echo "<div style='width:310px'>";
while(mysql...) {
 echo '<div style="width:50px;float:left">'.$row1->name.'</div><div style="width:250px;float:right"><img src="info.png" /></div>';
 while(another_mysql...) {
  echo '<div style="width:50px;float:left">'.$row2->name.'</div><div style="width:250px;float:right"><img src="image.png" /></div>';
 }
}
echo "</div>"; 
```

在你的 while 循环中使用它。希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T12:59:59.047

有很多方法可以做到这一点。一种直接的解决方案是使用表格。就像是：

```
echo '<table>'
while(mysql...) {
 echo '<tr><td>'.$row1->name.'</td><td><img src="info.png" /></td></tr>';
 while(another_mysql...) {
  echo '<tr><td>'.$row2->name.'</td><td><img src="image.png" /></td></tr>';
 }
}
echo '</table>' 
```

这让浏览器负责确定正确的宽度。其他方式是使用`div`s。它们可以被赋予固定的宽度——模拟一个表格——或者你可以使用`position: absolute; right: 0;`（加上更多的 CSS）来对齐包含图像的右 div，这将右对齐所有图像。

# linux - 获取内存信息的脚本

> ID：16192328
> 
> 赞同：-5
> 
> 时间：2013-04-24T12:43:01.553
> 
> 标签：linux, perl, unix

```
 #! usr/bin/perl
    sub memoryInfo
    {
        print "Inside memory info \n";
        @memoryInfo = qx(free -m);
        foreach (@memoryInfo)
        {
            print "$_\n";
        }

    }

    &memoryInfo; 
```

这是我的 Perl 程序，它不工作。我需要一些信息，例如总内存、总物理内存、总使用内存、总缓存内存、总交换内存和总使用交换内存。

谁能帮我？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:51:08.617

这工作得很好。

```
#!/usr/bin/perl

use strict;
use warnings;

sub memoryInfo
{
    print "Inside memory info \n";
    my @memoryInfo = qx(free -m);
    foreach (@memoryInfo)
    {
        print "$_\n";
    }

}

memoryInfo(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T12:57:44.967

你的程序运行良好，只要你用

```
perl meminfo.pl 
```

当成为可执行文件时，您应该会收到如下错误：

```
./meminfo.pl
bash: ./meminfo.pl: usr/bin/perl: bad interpreter: No such file or directory 
```

这表明您的`shebang`（以开头的第一行`#!`是错误的...

此外，您会注意到输出中有额外的换行符，因为数组中的每一行都已经有一个换行符......

最后：

*   使用严格和警告
*   不要用`&`
*   避免变量中的骆驼大小写

您的程序的工作版本可能是：

```
#!/usr/bin/perl

use strict;
use warnings;

sub memoryInfo {
    print "Inside memory info \n";

    my @memoryinfo = qx(free -m);
    chomp @memoryinfo;

    foreach (@memoryinfo) {
        print "$_\n";
    }
}

memoryInfo; 
```

# javascript - Internet Explorer 9 有时会在画布上绘制空白图像

> ID：16192332
> 
> 赞同：4
> 
> 时间：2013-04-24T12:43:16.963
> 
> 标签：javascript, html5-canvas

我有一个 Web 应用程序，它可以动态生成图像，然后使用画布在客户端上呈现（片段）它们 - 通用代码看起来像这样（简化）......

```
var width = ...
var height = ...
var img = new Image();
img.onload = function(){ // Set onload before setting image source ;)
  var canvas = document.createElement("canvas");
  canvas.setAttribute('width',width);  
  canvas.setAttribute('height',height);
  var context = canvas.getContext("2d");
  context.drawImage(this,0,0,width,height,0,0,width,height);
}
img.src = ... 
```

在 Firefox 和 chrome 中，这很好用。在 IE9（有时是 IE10）中，这有时会导致空白图像。作为一种解决方法，我输入了...

```
var width = ...
var height = ...
var img = new Image();
img.onload = function(){
  var canvas = document.createElement("canvas");
  canvas.setAttribute('width',width);  
  canvas.setAttribute('height',height);
  var context = canvas.getContext("2d");
  window.setTimeout(function(){
    context.drawImage(img,0,0,width,height,0,0,width,height);
  }, 10); // 10 millisecond delay here seems to give IE time to make sure the image is actually ready
}
img.src = ... 
```

显然，随机延迟让我感到紧张——我宁愿弄清楚为什么会发生这种情况。图像上是否有其他可以使用的事件类型/方法/属性？与图像/编码/传输方法一起发送的 http 标头中是否可能存在导致此问题的内容？

由于在画布上绘制图像似乎会经常让新用户绊倒，因此搜索大多会产生开发人员在 onload 方法之前设置源的实例。我能找到的最接近的其他问题/回复是：[https ://stackoverflow.com/a/15186350/470062](https://stackoverflow.com/a/15186350/470062)

编辑：

我已更新示例以在开始时包含宽度和高度定义

2013 年 4 月 29 日编辑：

10 毫秒的延迟并不总是足够的——我已经更改了代码以检查画布像素以确定是否绘制了任何东西——但这感觉就像一个丑陋的 hack——我很想知道是否有更好的方法：

```
... snip - this is at the end of the image load callback..

if((navigator.appVersion.indexOf("MSIE")) >= 0){    

    function checkAndRedraw(){
        context.clearRect(0,0,width,height);
        context.drawImage(img, 0, 0, width, height);
        var imageData = context.getImageData(0, 0, width, height),
        data = imageData.data,
        len = data.length;

        for (var i = 0; i < len; i += 4){
            if(data[i] || data[i+1] || data[i+2]){
                scheduleRedraw = null; // prevent memory leak
                return; // A pixel contained some non empty value so something was drawn - done.
            }
        }

        scheduleRedraw();
    }
    var redrawHackTimeout;
    function scheduleRedraw(){
        window.clearTimeout(redrawHackTimeout);
        redrawHackTimeout = window.setTimeout(checkAndRedraw, 500);
    }

    scheduleRedraw();
}
//END IE9 Hack 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-23T16:43:57.667

我在 IE9 中也有同样的问题，我也必须这样做：

```
 theImage = new Image();

    theImage.onload = function() {
        that = this;
        setTimeout(function() {
            that.onload2();
        }, 100);
    };

    theImage.onload2 = function(){
               #your old load function code
            }

            theImage.src = 'http://....'; 
```

我不明白为什么 ie9 在画布中尚未实际加载或尚未“可用”时触发加载图像功能。它让我把头发拉出来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T12:46:52.807

```
var img = new Image();
**img.src = ...**
img.onload = function(){ // Set onload ~~before~~ after setting image source ;)
  var canvas = document.createElement("canvas");
  canvas.setAttribute('width',width);  
  canvas.setAttribute('height',height);
  var context = canvas.getContext("2d");
  context.drawImage(this,0,0,width,height,0,0,width,height);
}
```

您必须设置`src`，**然后**等待图像加载。

# git - 为什么在尝试从我的存储库中提取时出现合并错误？

> ID：16192337
> 
> 赞同：1
> 
> 时间：2013-04-24T12:43:27.767
> 
> 标签：git

我有一个关于做 git pull 的 git 问题，它说

```
error: Your local changes to the following files would be overwritten
by merge:  
         testFile.java 

Please, commit your changes or stash them before you can merge. Aborting 
```

如果我只想用存储库中的新文件覆盖这个文件，我该怎么做？

我可以以某种方式获取并覆盖我的本地文件吗？

错误：您对以下文件的本地更改将被合并覆盖：schemas/rjtsml.xsd 请在合并之前提交您的更改或存储它们。中止

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T12:50:38.520

`git checkout -- testFile.java`将用 repo 中的文件覆盖本地文件。`git checkout --help`如果您需要更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T13:08:49.180

正如[mardavi](https://stackoverflow.com/users/982542/mardavi)在他的回答中已经提到的，如果你想用远程版本覆盖本地文件，你可以做一个简单的`git checkout -- testFile.java`. **但是**，这只会使用您的`.git`文件夹包含信息的远程版本更新文件。既然你提到你试图做一个`git pull`，我假设你想用一个*可能*已经更新的远程更新你的本地存储库。如果是这种情况，您应该执行以下操作：

`.git`使用您的文件夹包含以下信息的版本覆盖 testFile.java 文件：

```
git checkout -- testFile.java 
```

从远程存储库中获取数据以更新您的数据库并将其与本地分支合并。这实际上是对*git-pull*命令的描述。所以你只需执行：

```
git pull 
```

现在您的本地分支应该是最新的，并且*testFile.java*具有来自远程服务器的最新更改。

我推荐以下阅读：[Git Branching - Remote Branches](http://git-scm.com/book/en/Git-Branching-Remote-Branches)

# jboss5.x - 关于为 JBoss AS 工作的 EJBLocalObject remove() 的查询

> ID：16192341
> 
> 赞同：0
> 
> 时间：2013-04-24T12:43:45.753
> 
> 标签：jboss5.x

我目前正在使用 JBoss 5.1.0 GA 构建来部署我的企业应用程序。在 EJBLocalHome remove() API 的工作中，我面临一个奇怪的问题。我有一个实体 Bean 说“Emp”。我需要删除一个实体 bean 说'emp1'。因此，我将调用 EJBLocalObject remove()，它将调用“Emp”EntityBean#ejbRemove() API 从我的数据库中删除 bean。删除() -> ejbRemove()

对于 Jboss AS，我观察到当我调用 remove() API 时，首先调用 ejbStore() API，然后在同一个事务中调用 ejbRemove() API。在 remove() API 期间，实体 Bean 未被修改。因此不应调用 ejbStore()。但确实如此。因此顺序是：- remove() -> ejbStore() -> ejbRemove()

我在 Websphere AS 上部署了我的应用程序，当我调用 remove() 时，调用顺序是：- remove() -> ejbRemove() 。在这种情况下没有调用 ejbStore()。

谁能说出为什么在 JBoss AS 的情况下会发生这种行为？我觉得 ejbStore() 不应该被调用，因为没有任何更新并且工作应该类似于 Webspehere。

-阿吉特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T05:44:27.767

这似乎是 JBoss 特定的问题。查看 JBoss 的内部实现，发现当配置元素 'sync-on-commit-only' 设置为 false 时，它​​会调用 ejbStore。此属性存在于 standardjboss.xml 文件中，默认值为 false。这是 Jboss 规范对这个元素所说的：- “这配置了一个性能优化，将导致实体 bean 状态仅在提交时与数据库同步。通常事务中所有 bean 的状态都需要同步例如，当调用 finder 方法或调用 remove 方法时。”

因此，如果 'sync-on-commit-only' 设置为 false，则调用 ejbStore()，以便在删除 bean 之前实体与数据存储同步。

我唯一注意到的是，无论此属性是否设置为 true/false，实体 bean 都将从数据源中删除。因此它仍然让我想知道为什么在 remove() 期间需要 ejbStore() 调用，因为最终 bean 将从数据源中删除并放回实例池。

-阿吉特

# visual-studio - 同一项目的多个输出

> ID：16192344
> 
> 赞同：1
> 
> 时间：2013-04-24T12:43:54.107
> 
> 标签：visual-studio

我在 Visual Studio(VS) 中有一个项目。我正在尝试将此项目构建为 2 个可执行文件。可执行文件仅在预处理器定义上有所不同。

*   创建具有不同构建选项的多个项目是一种选择。但是这些项目有许多文件放在不同的文件夹中。加上差异真的很小。所以我宁愿至少现在不这样做。
*   从[这里开始](http://msdn.microsoft.com/en-us/library/f35ctcxw%28v=vs.80%29.aspx)，另一种方法是编写一个用于`cl.exe`完成工作的批处理文件。然而，问题在于`cl`它将源文件而不是项目文件作为输入，这意味着这比以前的解决方案更糟糕。将项目作为输入的更高级别`devenv.exe`没有传递预处理器定义的选项。

**注意：** 使用上述任何方法的一个主要缺点是，如果从原始项目中添加或删除任何文件，我必须重新配置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:21:18.610

我建议使用具有 2 个构建配置的相同解决方案，并为每个配置破坏 MSBuild。

```
MSBuild.exe your.sln /t:Rebuild /p:Configuration=Release1;Platform=AnyCPU
MSBuild.exe your.sln /t:Rebuild /p:Configuration=Release2;Platform=AnyCPU 
```

结合[Property Sheets](http://blogs.msdn.com/b/vsproject/archive/2009/06/23/inherited-properties-and-property-sheets.aspx)将是一种相对简单的构建和维护方式。

# python - Python如何导入urllib？

> ID：16192346
> 
> 赞同：0
> 
> 时间：2013-04-24T12:43:59.903
> 
> 标签：python, python-2.7, import, urllib

```
mirko@mirko-imedia-S2870 ~ $ /usr/bin/python
Python 2.7.3 (default, Sep 26 2012, 21:51:14) 
[GCC 4.7.2] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import urlib
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named urlib 
```

我在命令行中使用 python，并全新安装了 Mint Linux 14。

我必须做些什么才能完成这项工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T12:44:42.577

也许添加一个`l`可以帮助：

```
import urllib 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T12:47:55.490

您在 中缺少一个`l`，`urllib`但我强烈建议您使用[urllib2](http://docs.python.org/2/library/urllib2.html)，如果它在您的安装中可用。

其他需要您安装 3rd 方包的好选择是[urllib3](https://github.com/shazow/urllib3)或[requests](http://docs.python-requests.org/en/latest/)。

# c# - 如何将默认日期时间格式从英语更改为波斯语？

> ID：16192348
> 
> 赞同：0
> 
> 时间：2013-04-24T12:44:08.263
> 
> 标签：c#, asp.net, web-config, umbraco, cultureinfo

我想在支持的 Umbraco 中将显示日期时间格式从英语更改为波斯语。我在 web.config 中应用了这个设置。但是没有用。（属性选项卡中的日期选择器（发布于和删除于））

```
<globalization enableClientBasedCulture="true" requestEncoding="UTF-8" responseEncoding="UTF-8" uiCulture="fa" culture="fa"/> 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-17T19:35:10.877

日期格式并没有根据我使用的语言而改变。

我在 umbraco_client\DateTimePicker\umbDateTimePicker.js 中看到硬编码的日期格式根据需要更改然后更新客户端依赖项：

1.  App_Data\Temp\ClientDependency - 转储 CDJ 或在服务器“{ServerName}-{IDString}-map.xml”的相应 XML 文件中查找用于 umbDateTimePicker.js 的确切 CDJ，然后删除 CDJ 文件是编译后的js，包括umbDateTimePicker.js
2.  重新启动 app / appPool 以使用您的新设置触发新 ClientDependency 文件的生成。

我还在 umbraco.controls 中看到硬编码的日期时间格式字符串：umbraco.uicontrols.DatePicker.DateTimePicker.DateTime setter。

在各种 Umbraco 4.x 版本上完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T15:55:38.403

Umbraco 后端中的语言由登录的用户决定。截至目前，Umbraco 仅支持以下开箱即用的语言：

*   丹麦语
*   德语
*   英语（英国）
*   英语（美国）
*   西班牙语
*   法语
*   希伯来语（以色列）
*   意大利语
*   日本人
*   韩国人
*   荷兰语
*   挪威
*   抛光
*   葡萄牙语 巴西
*   俄语
*   瑞典
*   中文（简单）

根据为该特定用户选择的语言，日期将以适合该文化的格式显示。

这个论坛帖子，[波斯语和 rtl 支持....](http://our.umbraco.org/forum/using/ui-questions/31872-Farsi-and-rtl-support)，提供了一些关于如何添加新翻译的信息，如果你感兴趣的话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T15:41:07.610

As i search, unfortunately umbraco does not support `Persian` date time forma but you can study [FormatDateTime](http://en.wikibooks.org/wiki/Umbraco/Reference/umbraco.library/FormatDateTime) and change the appearance to format like `yyyy/mm/dd` but for full name of months like `فروردین` `اردیبهشت` you should create your own control or use other staff like [PersianDate® (PD)](http://www.asp.net/community/control-gallery/Item.aspx?i=2839) In case of code to develop a custom control you can study [PersianCalendar Class](http://msdn.microsoft.com/en-US/library/%20system.globalization.persiancalendar.aspx) and this tiny solution :^)

if your date is a Gregorian date then First you must convert it to Jalali date like this:

```
 PersianCalendar jc = new PersianCalendar();
    DateTime date = new DateTime(jc.GetYear(d), jc.GetMonth(d), jc.GetDayOfMonth(d));
    string print = string.Format("{0:0000}/{1:00}/{2:00}", date.Year, date.Month, date.Day); 
```

but if your date is a Jalali date already then just use:

```
 string print = string.Format("{0:0000}/{1:00}/{2:00}", date.Year, date.Month, date.Day); 
```

now if you have a string contains a Jalali date like "1390/12/10" and you want to get its day name it ll be a bit tricky.

```
 public static string GetDayOfWeekName(this DateTime date)
    {
        PersianCalendar jc = new PersianCalendar();
        DateTime d = jc.ToDateTime(date.Year, date.Month, date.Day, 0, 0, 0, 0, PersianCalendar.PersianEra);

        switch (d.DayOfWeek)
        {
            case DayOfWeek.Saturday: return "شنبه";
            case DayOfWeek.Sunday: return "يکشنبه";
            case DayOfWeek.Monday: return "دوشنبه";
            case DayOfWeek.Tuesday: return "سه‏ شنبه";
            case DayOfWeek.Wednesday: return "چهارشنبه";
            case DayOfWeek.Thursday: return "پنجشنبه";
            case DayOfWeek.Friday: return "جمعه";
            default: return "";
        } 
```

First you Should convert it to Gregorian Date then get the Day Name. but not for Months name:

```
 public static string GetMonthName(this DateTime date)
    {
        switch (date.Month)
        {
            case 1: return "فررودين";
            case 2: return "ارديبهشت";
            case 3: return "خرداد";
            case 4: return "تير‏";
            case 5: return "مرداد";
            case 6: return "شهريور";
            case 7: return "مهر";
            case 8: return "آبان";
            case 9: return "آذر";
            case 10: return "دي";
            case 11: return "بهمن";
            case 12: return "اسفند";
            default: return "";
        }
    } 
```

i would be appreciated if i could provide you more useful post and please let me know it!

# json - Angular js 复杂的 Json 对象

> ID：16192350
> 
> 赞同：0
> 
> 时间：2013-04-24T12:44:11.537
> 
> 标签：json, rest, angularjs, nested

我是 Angular Js 的新手。我想为我的 Xml 设置创建复杂的 Json 对象，例如 **string Jsonobject=" {'Email': { 'UserName': 'a','Password': 'a'}}"** ; 到目前为止我试过

```
$scope.save = function () {

                var AddSettings = $resource('../AddSettings/');--Calling my WCF REST SERVICE

                var adminSettings = new AddSettings();

                adminSettings.Title = $scope.inputtitle;
                adminSettings.HomeUrl = $scope.intputhomeurl;

                //var arr = [];
                //arr.push(addmodule.Title);
                //arr.push(addmodule.HomeUrl);
                //addmodule.LogoSettings = arr;

                adminSettings.$save(); 
```

它正在生成以下 Json 对象：**{ "UserName": "a","Password": "a"}**，谁能指导我创建一个像**" {'Email': { 'UserName': 'a'这样的 json 对象,'Password': 'a'}}"**使用 Angular js。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:11:47.260

我通过以下方式解决了我的问题。

```
var adminSettings = new AddSettings();
adminSettings.LogoSettings = {
                    Title: $scope.inputtitle,
                    HomeUrl: $scope.intputhomeurl,
                    logo: $("#ImageUpload > img").attr('src')
                };
adminSettings.$save(); 
```

它以 {'Email': { 'UserName': 'a','Password': 'a'}} 的形式返回 Json 对象。

# android - 如何在android中使用多个Touch缩放图像？

> ID：16192355
> 
> 赞同：1
> 
> 时间：2013-04-24T12:44:17.757
> 
> 标签：android

我要创建图片库。如何使用多点触控缩放图像。我有 pinch-0.8 库，但我该如何使用它。如果您有任何其他想法，请帮助我。

android中ImageView的缩放效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:58:34.110

**[Image Zoom](http://code.google.com/p/danbooru-gallery-android/source/browse/src/it/sephiroth/android/library/imagezoom/?r=b2ae3248f1182073290a19e76f32f76c4eb4a181)**提供了一个库

下载两个文件

*   ImageViewTouch.java
*   ImageViewTouchBase.java

要在布局文件中使用图像视图，请编写以下代码

```
<com.package_name.ImageViewTouch
    android:id="@+id/imageView"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:scaleType="fitCenter"
    android:src="@drawable/image" /> 
```

**笔记**

确保您已将这些文件放在任何**package**中，例如**com.customview**或类似的东西。这样您就可以在布局文件中引用它。

关联

[您可以从sephiroth/ImageViewZoom](https://github.com/sephiroth74/ImageViewZoom)下载示例

# c - 验证 C 中的伪随机数据

> ID：16192359
> 
> 赞同：2
> 
> 时间：2013-04-24T12:44:24.263
> 
> 标签：c, random, io, openmp

我正在编写一个磁盘练习程序，我希望能够生成一些随机数据来填充缓冲区，将其写入磁盘，然后在将数据读回内存后验证数据是否“正确”。

我想生成随机数据的原因是有不同的位模式被写入磁盘。目前我正在用一个字符重复填充缓冲区。

```
 buf = (char *)malloc(sizeof(char) * buffer_size);
    for(i=0;i<buffer_size;i++)
    {
          buf[i] = 'W';
    } 
```

writeData 函数使用 'W' 重复写入缓冲区，直到达到文件大小：

```
 void* writeData(Data *data) 
    {
        int i,
        j,
        tid;

         double bytes=0,
            start=0,
            stop=0,
            totalTime=0,
            mbPerSec=0;

         double iterations = data->file_size/data->buffer_size;

         #pragma omp parallel for private(tid,start,stop,bytes,totalTime) reduction(+:mbPerSec)
         for(i=0;i<data->num_threads;i++)
         {  
              tid = omp_get_thread_num();
              for(j=0;j<iterations;j++)
              { 
               start = omp_get_wtime();
               bytes += write(data->descriptors[tid],data->out_buf,data->buffer_size);
               stop = omp_get_wtime();
               totalTime = totalTime + (stop - start);
              }
              mbPerSec = bytes/MB_MULTIPLIER/totalTime;
         }
         printf("Write %.f MB/secs\n",mbPerSec);    
    } 
```

readData 函数类似，但从文件描述符读取到缓冲区。是否可以运行任何算法或转换来生成许多不同的位模式，然后在将它们读回内存时对其进行验证？谢谢是提前！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T12:51:53.847

您可以使用`rand()`函数将随机值写入磁盘。但请记住使用将种子设置为已知值`srand()`

在读取函数中，使用`srand()`（到已知值）重置种子并`rand()`再次调用。将此与从磁盘读取的值进行比较。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T12:53:11.327

您可以使用`rand()`或不使用已知种子预填充缓冲区，将缓冲区写入磁盘，从磁盘读取到第二个缓冲区，然后用于`memcmp()`验证两个缓冲区是否仍然匹配，冲洗并重复。

```
#define TEST_LEN 512

int i;
char testBuff[TEST_LEN];
char readBuff[TEST_LEN];

srand( time( NULL ) );

for( i = 0; i < TEST_LEN; i++ )
    testBuff[i] = (char)(rand() & 0xFF);

WriteToDisk( testBuff, TEST_LEN );
ReadFromDisk( readBuff, TEST_LEN );

if( memcmp( testBuff, readBuff, TEST_LEN ) )
    printf( "That's not good!\n" ); 
```

# vb.net - 将 LinQ 与多列分组一起使用

> ID：16192360
> 
> 赞同：0
> 
> 时间：2013-04-24T12:44:24.537
> 
> 标签：vb.net, linq, group-by

我是 LinQ 的 Newbi，我对 linQ 中的 group by 有疑问。
我想这样查询：

```
    选择
    MAX(TCheckpointGrouping.Id) 作为 CheckpointGroupingId，
    MAX(TCheckpointGrouping.MCheckpointId) AS CheckpointId,
    MAX(MCheckpoint.Name) 作为检查点名称，
    MAX(CAST(MCheckpoint.IsMajor AS VARCHAR)) 作为 IsMajor,
    MAX(TCheckpointGrouping.MIndicatorId) AS IndicatorId,
    MAX(MIndicator.Name) 作为指标名称，
    MAX(MCriteria.Id) 作为 CriteriaId，
    MAX(MCriteria.Name) AS CriteriaName,
    MAX(MPrinciple.Id) AS PrincipleId,
    MAX(MPrinciple.Name) AS PrincipalName,
    MAX(TCheckpointGrouping.RelationToCheckPoint) AS RelationToCheckPoint
    来自 TCheckpointGrouping
    在 MCheckpoint.Id = TCheckpointGrouping.MCheckpointId 上内连接 MCheckpoint
    内部连接 ​​MIndicator 上 MIndicator.Id = TCheckpointGrouping.MIndicatorId
    MCriteria.Id = MIndicator.MCriteriaId 上的内部连接 ​​MCriteria
    在 MPrinciple.Id = MCriteria.MPrincipleId 上内连接 MPrinciple
    通过...分组
    TCheckpointGrouping.MCheckpointId,
    TCheckpointGrouping.MIndicatorId
```

如何将上面的查询转换为 LinQ (VB.NET)

谢谢最好的问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T13:12:03.580

我很想为您将此 SQL 查询转换为 LINQ，但我认为这会浪费您自学的机会。

Microsoft 提供了一个很棒的页面，其中包含许多 VB.NET Linq 情况：[101 Linq Samples](http://msdn.microsoft.com/en-us/vstudio/bb688088.aspx)。

您甚至可以[通过使用 Multiple Columns 找到 Group](http://msdn.microsoft.com/en-us/vstudio/bb737926#grpbymult)的示例。

好学。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T13:40:04.350

我不确定这个，但你可以试试。在选择部分我没有包括所有的列。

```
var result= from TChkgp in TCheckpointGrouping
        join MCpoint in  MCheckpoint on  TChkgp.Id equals MCpoint.Id
    join MIndtor in MIndicator on TChkgp.MIndicatorId equals MIndtor.Id
    join MCrteia in MCriteria on MIndtor.Id equals MIndtor.MCriteriaId
    join MPrncple in MPrinciple on MCrteia.MPrincipleId equals MPrncple.Id
    group TChkgp by new (TChkgp.MCheckpointId,TChkgp.MIndicatorId} into g 
    select new {
    CheckpointGroupingId =TChkgp.Id.Max(),
    CheckpointId =TChkgp.MCheckpointId.Max,
    ....
    ....

    }; 
```

您可以在以下链接中看到一个简单的示例

[linq中的分组和求和](https://stackoverflow.com/questions/530925/linq-using-inner-join-group-and-sum)

# r - 更改 ggplot2 中单个方面的文本颜色

> ID：16192368
> 
> 赞同：5
> 
> 时间：2013-04-24T12:44:57.067
> 
> 标签：r, graph, ggplot2, textcolor

我用这些命令创建了下面的图：

```
ggplot(long.data, aes(owner,value)) + stat_summary(fun.y=mean,geom="bar",
       fill=c("deepskyblue","deepskyblue4")) + 
       stat_summary(fun.data=mean_cl_normal,geom="errorbar",position=
       position_dodge(width=.90),width=.1) +
       labs(x="",y="") + facet_grid(IV~experiment+type,scales="free_y") + 
       theme(strip.text.y = element_text(colour = 'red4')) 
```

如果我只想更改上部 x 面（在本例中为“隐式”和“显式”级别）的文本颜色（可能还有背景颜色），我该怎么做？可能吗？我没有在 ggplot2 文档中阅读任何相关内容。

![阴谋](https://i.stack.imgur.com/VwyjG.png)

**编辑：我很抱歉造成混乱。我的目标是更改上方条带之一的文本和背景颜色，而不是刻面的颜色。**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T07:49:16.300

您想更改`strip`元素的属性，而不是方面。试试下面的代码。请注意，这是一个基于随机组成的虚假数据的最小示例，因为您没有提供自己的数据供我们使用。您必须根据需要调整代码。

```
require(reshape)
require(ggplot2)
require(scales)

# fake data
mydf <- data.frame(val1 = runif(10, 0, 1), val2 = runif(10, 0, 1))
mydf

# reshape to long format
long.data <- melt(mydf)
long.data$facetvar <- "implicit"
long.data$facetvar[seq(1, 19, 2)] <- "explicit"
long.data

# plot
ggplot(long.data, aes(y = value, x = variable)) +
    geom_bar(position = 'dodge', stat = "identity") +
    facet_wrap (~ facetvar) +
    theme(strip.background = element_rect(fill = alpha('green', 0.3))) +
    theme(strip.text.x = element_text(colour = 'blue', size = 10)) 
```

这会产生这样的情节： ![截屏](https://i.stack.imgur.com/wKKlh.png)

请注意，您已经等待了很长时间（按照 Stack Overflow 上 R 社区的标准）以获得答案，因为您的问题不清楚，并且您没有提供我们可以复制和粘贴的完全可重现的代码和数据我们自己的 R 装置。如果你这样做了，比我知识渊博的人会在一个小时内回答这个问题。请参阅[这篇](https://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example)非常有用的帖子，了解如何提出下一个问题的提示。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-24T13:10:41.560

我得到一个`warning`......但这似乎是一个更优雅的解决方案的良好起点：

```
ggplot(mtcars) + geom_rect(data = subset(mtcars, cyl == 4), aes(fill = cyl),xmin = -inf,xmax = Inf, ymin = -Inf,ymax = Inf, alpha = 0.05) +
  geom_point(aes(mpg, wt)) +  facet_grid(. ~ cyl) 
```

![在此处输入图像描述](https://i.stack.imgur.com/XYddU.jpg)

# android - Android 应用程序的 Dropbox 同步 API 实现

> ID：16192376
> 
> 赞同：1
> 
> 时间：2013-04-24T12:45:08.913
> 
> 标签：android, dropbox, dropbox-api

如何使用 Dropbox 提供的同步 api 将歌曲和其他文件从 Dropbox 下载到我设备的 sd 卡。文档说我们应该使用**DbxFileSystem.open(path);** .

有人实现过这个api吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T09:27:57.100

我将问题发布到 Dropbox 论坛，得到的答复是：

“目前，无法在 Android Sync SDK 上选择本地缓存数据的存储位置。但是，我会确保将其传递给团队。”。

结论：我们无法将文件直接下载到外部存储。

# android - findViewById() 为对话框中的视图返回 null

> ID：16192378
> 
> 赞同：14
> 
> 时间：2013-04-24T12:45:12.663
> 
> 标签：android, nullpointerexception, android-resources, android-dialog, findviewbyid

问题是，无论我在何处或如何调用此布局的组件，它们总是返回 null。

```
setView(inflater.inflate(R.layout.search_layout, null)) 
```

这工作正常。它在 中显示布局`Dialog`，但是，子项始终返回为 null `findViewById(R.id.some_search_layout_children)`。

我已经尝试多次清理我的项目，尝试为 my 实现另一个类`Dialog`，`findViewById()`作为我的 main 的成员`Activity`，在方法内部和for the`initSearch()`的匿名实现内部，但结果都相同。我还尝试将孩子们分成独立的 s 并以编程方式调用它们：`OnClickListener``Dialog``View`

```
TextView text = (TextView) findResourceById(R.id.new_independant_textview); 
```

但是，同样的结果。

这是相关代码：

```
public class Xyz extends Activity {
    public void onCreate(...) { // some listener will trigger initSearch() }

    private void initSearch() {
        AlertDialog.Builder searchDialog = new AlertDialog.Builder(this);
        LayoutInflater inflater = this.getLayoutInflater();
        searchDialog.setTitle("Search Photos");
        searchDialog.setMessage("Specify tag and value...");
        // R.layout.search_dialog is my custom layour, it displays fine, it works. 
        searchDialog.setView(inflater.inflate(R.layout.search_dialog, null));
        EditText tagText = (EdiText) findViewById(R.id.tagField); // WILL RETURN NULL
        searchDialog.setPositiveButton( ... ) ...
        searchDialog.show();
    } 
```

这一行：

```
 EditText text = (EditText) findViewById(R.id.tagField); 
```

总是返回 null，无论它以何种方式或在何处被调用——全局、本地`final`等——它只返回 null。

这是我的自定义`Dialog`布局的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/search_dialog"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical" >
    <TextView
        android:id="@+id/tagText" 
        android:padding="7dp"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:textSize="14sp"
        android:text="@string/tag" />
    <EditText 
        android:id="@+id/tagField"
        android:padding="7dp"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:inputType="text"/>
    <TextView
        android:id="@+id/valueText" 
        android:padding="7dp"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:textSize="14sp"
        android:text="@string/value" />
    <EditText 
        android:id="@+id/valueField"
        android:padding="7dp"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:inputType="text"/>
</LinearLayout> 
```

这是我的`R.java`文件：

```
public static final class id {
    public static final int action_settings=0x7f0a0011;
    public static final int add_album=0x7f0a0001;
    public static final int add_photo=0x7f0a000d;
    public static final int albums_list=0x7f0a0003;
    public static final int delete_album=0x7f0a000b;
    public static final int exit_finder=0x7f0a000f;
    public static final int new_directory=0x7f0a000e;
    public static final int open_album=0x7f0a000a;
    public static final int photos_grid=0x7f0a0000;
    public static final int rename_album=0x7f0a000c;
    public static final int search_dialog=0x7f0a0004;
    public static final int search_icon=0x7f0a0002;
    public static final int splash_rutgers=0x7f0a0009;
    public static final int tagField=0x7f0a0006; // problematic
    public static final int tagText=0x7f0a0005; / problematic
    public static final int terminate_app=0x7f0a0010;
    public static final int valueField=0x7f0a0008; // problematic
    public static final int valueText=0x7f0a0007; // problematic
} 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-04-24T13:23:59.737

调用将在您的**活动**布局`findViewById()`中搜索视图，而**不是**您的对话框视图。您需要调用您设置为对话框布局的特定内容。****`findViewById()``View`****

 ****试试这个

```
private void initSearch() {
    AlertDialog.Builder searchDialog = new AlertDialog.Builder(this);
    LayoutInflater inflater = this.getLayoutInflater();
    searchDialog.setTitle("Search Photos");
    searchDialog.setMessage("Specify tag and value...");
    // R.layout.search_dialog is my custom layour, it displays fine, it works. 
    View dialogView = inflater.inflate(R.layout.search_dialog, null);
    searchDialog.setView(dialogView);
    EditText tagText = (EdiText) dialogView.findViewById(R.id.tagField); 
    searchDialog.setPositiveButton( ... ) ...
    AlertDialog myAlert = searchDialog.create(); //returns an AlertDialog from a Builder.
    myAlert.show();
} 
```

请注意我是如何膨胀视图并将其存储在`View`命名的`dialogView`. 然后，为了找到你的`EditText`名字`tagField`，我正在使用`dialogView.findViewById(R.id.tagField);`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T12:47:13.803

`TextView`with id`text123`必须在`Layout`你设置的里面声明`setContentView`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T12:52:41.180

你的问题是你试图`.show()`在 AlertDialog Builder 上做，而不是 AlertDialog 本身。

试试下面的代码：

```
public class Xyz extends Activity {
public void onCreate(...) { // some listener will trigger initSearch() }

private void initSearch() {
    AlertDialog.Builder searchDialog = new AlertDialog.Builder(this);
    LayoutInflater inflater = this.getLayoutInflater();
    searchDialog.setTitle("Search Photos");
    searchDialog.setMessage("Specify tag and value...");
    // R.layout.search_dialog is my custom layour, it displays fine, it works. 
    searchDialog.setView(inflater.inflate(R.layout.search_dialog, null));
    EditText tagText = (EdiText) findViewById(R.id.tagField); // WILL RETURN NULL
    searchDialog.setPositiveButton( ... ) ...
    AlertDialog myAlert = searchDialog.create(); //returns an AlertDialog from a Builder.
    myAlert.show();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-30T08:52:34.380

我在编写多语言应用程序时遇到了完全相同的问题。最终我发现我忘记更新某些布局的活动 [xml] 文件中的标签。

每个活动我有 3 个：

```
<activity_name>.xml
<activity_name>.xml(land)
<activity_name>.xml(iw) 
```

我只更新了第一个而忘记更新另一个如下：

这三个都有一个 TextView，其 id 为：

```
 <TextView
    android:id="@+id/loading_textbox"
    .../> 
```

然后我将该文本视图的 id 的名称（仅在第一个文件中）更改为：

```
 <TextView
    android:id="@+id/status_textbox"
    .../> 
```

而且，当然，在 Activity 的 Java 代码中（使用所有三个...）：

```
 TextView tv = findViewByID(R.id.status_textbox); 
```

这适用于常规（英文`<activity_name>.xml`）版本。

但是当我使用 IW 语言（希伯来语`<activity_name>xml(iw)`）时`tv`，我得到了 null 值，我什至有些迷恋。

当我将其他文件的文本视图 ID 更改为`"@+id/status_textbox"`一切都像一个魅力......

因此，只需确保您的所有 ID 都已更新并在您的所有布局和语言中得到说明。

无论如何，这解决了我的问题..****

# android - 为应用程序名称设置滚动

> ID：16192379
> 
> 赞同：0
> 
> 时间：2013-04-24T12:45:13.760
> 
> 标签：android, android-manifest

我的应用程序名称有 15 个字符。但在 android 设备的应用程序列表中不显示全名。所以我想`marquee`为我`lable`的 android设置`manifest`。但我不知道怎么连我都不知道它是否可能。

我用谷歌搜索了将近 4 个小时，但解决方案仅适用于每个活动的标题，而不适用于应用程序名称。

示例图像供参考：

![在此处输入图像描述](https://i.stack.imgur.com/qoco1.jpg)

这是从谷歌获取的示例图像。我无法截取我的设备的屏幕截图。注意红色标记的名称。我希望这个名字是滚动的。如果有可能的方法请帮助我的朋友。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:48:46.517

您无法在用户设备上滚动名称，因为这（可能）是启动器功能。除非用户的启动器能够滚动长应用程序名称，否则它不会滚动。这不是您可以通过您的应用程序控制的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T12:52:31.953

你不能以编程方式做到这一点。这是每个操作系统制造商的默认功能。它只取决于他们。有些制造商会设置品牌，而有些则不会设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T12:48:38.510

**并非所有 android 移动设备都支持 Marquee**。无论如何，请查看此[链接](https://stackoverflow.com/questions/10034639/autoscrollable-title-in-android-actionbar-marquee)，您可能会很幸运；）

# php - Symfony2 和 php 应用程序/控制台缓存：clear --env=prod --no-debug

> ID：16192388
> 
> 赞同：0
> 
> 时间：2013-04-24T12:45:41.933
> 
> 标签：php, symfony

我正在尝试清除 Symfony2 项目的生产缓存，但总是收到相同的错误消息：

```
[RuntimeException]                                                                        
  Syntax error: File to import not found or unreadable: header.                             
            Load paths:                                                                 
              /home/milos/workspace/mdpi.com                                            
              /home/milos/workspace/mdpi.com/src/MDPI/MainBundle/Resources/public/scss  
      on line 1 of /tmp/assetic_sasse9Sy3m                                              
Use --trace for backtrace. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:21:12.093

也许是权限问题？

我曾经和一个用户一起编辑我的 symfony 项目，但它与其他通常是 www-data（apache 用户）一起运行，并且它给我带来了很多清除缓存和日志目录的问题。

尝试使用 www-data 用户执行 symfony 控制台

```
su www-data -c "php app/console cache:clear --env=prod" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T14:49:36.747

看起来像指南针错误。浏览所有 *.scss、*.sass 文件。在顶部应该导入不存在的“标题”。

# javascript - jQuery 中 .each() 函数相对于传统“for”循环的优势

> ID：16192395
> 
> 赞同：4
> 
> 时间：2013-04-24T12:46:02.717
> 
> 标签：javascript, jquery

我的一位同事建议我使用 jQuery[`.each()`](http://api.jquery.com/each)函数而不是 javascript`for`循环来遍历`DOM`我页面上的元素，我不是 jQuery 的新手，但从未理解开发人员倾向于使用 javascript 循环的真正原因`.each()`。谁能给我解释一下？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T12:50:31.617

如果要使用`for`循环进行迭代，则必须增加索引：

```
for(var i=0; i<arr.length; ++i) { 
```

然后您必须使用索引获取实际值：

```
var value = arr[i]; 
```

`.each`为您完成这两项并将值传递给函数：

```
$(...).each(function(i, value) {
    // actual interesting part of the loop...
}); 
```

它只是为您节省了增加索引并获取该索引值的样板代码。

函数中定义的变量`.each`也是封闭的（即在[闭包](https://en.wikipedia.org/wiki/Closure_%28computer_science%29)内），因此等效代码（考虑循环和变量闭包，加上设置`this`，以及在`false`返回值上中断）可能类似于：

```
(function() {
    for(var i=0; i<arr.length; ++i) {

        var ret = (function(index, value) {
            // actual interesting part of the loop...
        }).call(arr[i], i, arr[i]);

        if(ret === false) break;
    }
})(); 
```

这是相当多的类型。

在执行性能方面，`.each`它（不出所料）比原始`for`循环慢，因为它比原始`for`循环做得更多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T12:47:11.227

它非常易于使用

但正如这个测试结果所示，它很慢。 [http://jsperf.com/jquery-each-vs-for-loop/214](http://jsperf.com/jquery-each-vs-for-loop/214)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T12:51:19.417

因为它更容易和更清洁

```
$jqExpr.each(function(i, el){
   /* YOUR CODE */
});

than

for(var i=0; i < $jqQExpr.length; i++){
  el = $jqExp[i];
  /* YOUR CODE */
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T12:51:41.147

它更慢，但更具表现力（更短），并且还设置了闭包。此外，在 jQuery 集合上，它很好地集成到了链接中；而对于普通数组，我建议使用本机[`.forEach`方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-20T11:57:35.080

对我来说，如果你使用 each 而不是 for，还有一个重要的好处关闭副作用。

考虑下面的代码（我使用的是咖啡脚本，因为我发现了......）它会在所有链接上使用其 href 值发出警报：

```
$("a").each (i, e)->
  href = $(e).attr('href')
  $(e).on "click" alert(href) 
```

如果您将其“翻译”成一个简单的 for 循环，例如：

```
for e in $("a")
  href = $(e).attr('href')
  $(e).on "click" alert(href) 
```

此代码不起作用，因为 href 变量未包含在闭包中...

# java - 如何查看/更改 MySQL 连接超时设置？

> ID：16192410
> 
> 赞同：22
> 
> 时间：2013-04-24T12:46:38.600
> 
> 标签：java, mysql

我有一个 Java 程序。当我登录时，大约 600,000 毫秒后（我实际上尝试了几次，它总是大约 600,000。这就是为什么我认为在某个地方设置了 600,000 毫秒的超时。）我的数据库连接崩溃并且我的程序不再工作（它总是需要连接到数据库）。它给了我`Communication link failure`错误。我这是我的mysql连接设置：

```
import java.sql.*;
import javax.swing.*;
public class mysqlconnect {
    Connection conn = null;
    public static Connection ConnectDb()    {
        try{
            Class.forName("com.mysql.jdbc.Driver");
            Connection conn = DriverManager.getConnection("jdbc:mysql://server_name/database_name","user_name","user_password");
            return conn;
        }catch (Exception e) {
            JOptionPane.showMessageDialog(null, "Cant connect to db");
            return null;
        }
    }
} 
```

我尝试将`?autoReconnect=true`&添加`tcpKeepAlive`到我的代码中，但没有运气。有没有办法去 phpmyadmin 并在那里更改一些设置（增加超时时间）？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-04-24T12:56:21.087

```
SET SESSION wait_timeout = 999999;//or anything you want 
```

从 mysql 命令行会增加超时值。为了能够看到价值：

```
SHOW VARIABLES LIKE 'wait_timeout'; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-24T13:03:14.257

您可以提出此请求以在 MySql 中显示您的超时

```
SHOW VARIABLES LIKE 'connect_timeout'; 
```

接下来，您可以将其更新为 60 秒，例如

```
SET GLOBAL connect_timeout=60; 
```

如果问题是您可以使用的查询 [`Statement.setQueryTimeout`](http://docs.oracle.com/javase/6/docs/api/java/sql/Statement.html#setQueryTimeout%28int%29)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-05-28T09:20:58.820

您可以通过以下方式设置`wait_timeout` `NET_read_timeout`和`connect_timeout`解决问题。

`SHOW VARIABLES LIKE 'wait_timeout'; SET SESSION wait_timeout = 999999;`

`SHOW variables LIKE 'NET_read_timeout'; SET SESSION net_read_timeout = 1000;`

`SHOW VARIABLES LIKE 'connect_timeout'; SET GLOBAL connect_timeout = 1000;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-23T14:49:33.853

我通常使用以下任何一种方式来做到这一点：

1) 编辑 my.ini 文件。该文件通常位于 C:\ProgramData\MySQL\MySQL Server 5.6\my.ini

```
[mysqld]
interactive_timeout=2147483
wait_timeout=2147483 
```

（Windows 的最大值为 2147483，其他操作系统的最大值为 31536000）

之后重启机器

2) 在 JDBC url 中包含等待超时参数。这是取自我的代码的 JDBC URL

jdbc:mysql://HOST:PORT/DATABASE_NAME?autoReconnect=true&sessionVariables=sql_mode='STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION,PAD_CHAR_TO_FULL_LENGTH',interactive_timeout=2147483, **wait_timeout=2147483**

# bash - 通过 Crontab 执行 shell 脚本时找不到正在运行的 SqlPlus 进程

> ID：16192414
> 
> 赞同：0
> 
> 时间：2013-04-24T12:46:44.370
> 
> 标签：bash, shell, crontab

我有一个通过 Crontab 执行的 shell 脚本。shell 脚本正在正确地创建 Sqlplus 作业并且它们运行完成。不工作的是最后的 while 循环，我希望脚本等待所有 Sqlplus 作业完成。

如果我手动执行这个 shell 脚本，最后的 while 循环可以正常工作，并且 shell 脚本在所有 Sqlplus 作业完成之前不会退出。

如何在通过 Crontab 运行时获得 while 循环以查看 Sqlplus 作业？

```
#!/bin/bash
cd /some/path/to/folder

source ~/.profile

echo 'Run started'
echo $(date)

i=0
while [ $i -lt 12 ]
do
    echo 'Starting process ' $i

    sqlplus username/password@'(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=server)(PORT=1521))(CONNECT_DATA=(SID=SERVERSID)))' @import.sql $i > import_batch$i.log &

    let i=$i+1
done

while [ $(ps -a | grep -w -c 'sqlplus') -ne 0 ] //This is not working in Crontab
until [[ -z $(pgrep -flx 'sqlplus') ]] //I've also tried this (instead of the while in my script) without success in Crontab
do
    sleep 60
done

echo 'Run completed'
echo $(date) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-28T17:53:29.867

根据我上面的评论，使用“等待”等待该进程拥有的所有进程完成。例如：

```
#!/bin/bash
cd /some/path/to/folder

source ~/.profile

echo 'Run started'
echo $(date)

i=0
while [ $i -lt 12 ]
do
    echo 'Starting process ' $i

    sqlplus username/password@'(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=server)(PORT=1521))(CONNECT_DATA=(SID=SERVERSID)))' @import.sql $i > import_batch$i.log &

    let i=$i+1
done

wait

echo 'Run completed'
echo $(date) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T14:05:32.113

也许您需要`ps -ax`在 crontab 案例中使用？

```
while [ $(ps -ax | grep -w -c 'sqlplus') -ne 0 ] 
```

**编辑 2013-04-27**：从头开始，这很愚蠢。正如 linuts 建议的那样，只需使用[`wait`](http://www.gb.nrao.edu/~jford/bash/bashref.html#SEC77).

```
#!/bin/bash
cd /some/path/to/folder

source ~/.profile

echo 'Run started'
echo $(date)

i=0
while [ $i -lt 12 ]
do
    echo 'Starting process ' $i

    sqlplus username/password@'(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=server)(PORT=1521))(CONNECT_DATA=(SID=SERVERSID)))' @import.sql $i > import_batch$i.log &

    let i=$i+1
done

wait
echo 'Run completed'
echo $(date) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-27T15:42:26.330

尝试使用

```
ps -axww | grep -w 'sqlplus' | grep -v grep | wc -l 
```

因为`ps -axww | grep -w -c 'sqlplus'`将始终包含 1 行`grep -w -c 'sqlplus'`命令

或者，尝试使用以下来`sqlplus`完全匹配模式或作为正则表达式

```
pgrep -fl 'sqlplus'
pgrep -flx '.*sqlplus.*' 
```

# java - 单击 JButton 时 Java 中 ActionListener 方法中的 FlowControl

> ID：16192420
> 
> 赞同：0
> 
> 时间：2013-04-24T12:47:00.063
> 
> 标签：java, swing, actionlistener, actionevent

请有人解释一下 ActionListener 的控制流程，例如我们在注册了一个组件的类中实现了 t 并且确实覆盖了

```
 actionPerformed(ActionEvent e) 
```

现在我很困惑，当我们点击注册按钮 `what is the role of (this)` 时 `addActionListener (this);`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:50:39.517

`addActionListener (this)`表示当前类实现`ActionListener`了接口并提供了实现`actionPerformed(ActionEvent e)`

**例子：**

```
public class SampleListener implements ActionListener{
    public static void main(String[] args) {
        JButton btn1 = new JButton("Click me");
        btn1.addActionListener(this);
    }
    @Override
    public void actionPerformed(ActionEvent event) {
        // code
    }
} 
```

# sql - 访问查询以合并字段表单相关表

> ID：16192428
> 
> 赞同：-3
> 
> 时间：2013-04-24T12:47:11.427
> 
> 标签：sql, merge

所以，假设我有桌子`Product`：

```
ProdID | ProdDesc
-----------------
     1 | Widget
     2 | Snikt Spring
     3 | Water Bearing 
```

和表`ProdFeature`

```
ProdID | DocID | ProdSafe | ProdShiny
-------------------------------------
     1 |    34 | Y        | Null
     1 |    17 | Null     | Y
     2 |    54 | Y        | Null
     3 |     2 | Null     | Y 
```

我将如何得到如下结果：

```
ProdID | ProdSafe | SafetyDocID | ProdShiny | ShinyDocID
--------------------------------------------------------
     1 | Y        |          34 | Y         |         17 
```

任何帮助表示赞赏。~R

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T12:59:29.287

类似的东西？

```
SELECT p.ProdID,
       pf1.ProdSafe,
       pf1.DocID SafetyDocID,
       pf2.ProdShiny,
       pf2.DocID ShinyDocID
  FROM Product p
           left outer join ProdFeature pf1
               on p.ProdID = pf1.ProdID and pf1.ProdSafe is not null
           left outer join ProdFeature pf2
               on p.ProdID = pf2.ProdID and pf2.ProdShiny is not null 
```

[这是一个演示。](http://www.sqlfiddle.com/#!2/fc6a8/5)

另一个**性能较低**的版本：

```
SELECT p.ProdID,
       (select ProdSafe
          from ProdFeature
         where ProdID = p.ProdID
               and ProdSafe is not null) ProdSafe,
       (select DocID
          from ProdFeature
         where ProdID = p.ProdID
               and ProdSafe is not null) SafetyDocID,
       (select ProdShiny
          from ProdFeature
         where ProdID = p.ProdID
               and ProdShiny is not null) ProdShiny,
       (select DocID
          from ProdFeature
         where ProdID = p.ProdID
               and ProdShiny is not null) ShinyDocID
  FROM Product p 
```

[这是一个演示。](http://www.sqlfiddle.com/#!2/fc6a8/3)

# java - 如何使用java上传文件？

> ID：16192431
> 
> 赞同：0
> 
> 时间：2013-04-24T12:47:15.277
> 
> 标签：java, liferay, fileinputstream

您好，我正在尝试使用 java 文件上传文件.. 但我不明白.. 我得到文件大小 = 0 我在这里提供我的 java 代码。告诉我为什么我不能上传特定的文件夹。我想将我的文件存储在特定文件夹中。我正在尝试获取文件大小，文件名，但我得到了空值，我错了，请告诉我。

```
public void updateTesti(ActionRequest actionRequest,ActionResponse actionResponse) throws IOException, PortletException
{
    //image upload logic
    String folder_for_upload =(getPortletContext().getRealPath("/"));
    //String folder=actionRequest.getParameter("uploadfolder");
    realPath=getPortletContext().getRealPath("/");  

    logger.info("RealPath is" + realPath);
    logger.info("Folder is :" + folder_for_upload);
    try
    {
        logger.info("Admin is try to upload");

        UploadPortletRequest uploadRequest = PortalUtil.getUploadPortletRequest(actionRequest);

        if (uploadRequest.getSize("fileName") == 0) {
            SessionErrors.add(actionRequest, "error");
        }
        String sourceFileName = uploadRequest.getFileName("fileName");
        File uploadedFile = uploadRequest.getFile("fileName");
        System.out.println("Size of uploaded file: " + uploadRequest.getSize("fileName"));

        logger.info("Uploded file name is: " + uploadRequest.getFileName("fileName"));                  
        String destiFolder=("/home/ubuntu/liferay/liferay-portal-6.1.1-ce-ga2/tomcat-7.0.27/webapps/imageUpload-portlet/image");
        String newsourcefilename = (uploadRequest.getFileName("fileName"));
        File  newFile = new File(destiFolder +"/"+ newsourcefilename);

        logger.info("New file name: " + newFile.getName());
        logger.info("New file path: " + newFile.getPath());

        InputStream in = new BufferedInputStream(uploadRequest.getFileAsStream("fileName"));

        FileInputStream fis = new FileInputStream(uploadedFile);
        FileOutputStream fos = new FileOutputStream(newFile);
        byte[] bytes_ = FileUtil.getBytes(in);
        int i = fis.read(bytes_);
        while (i != -1) {
            fos.write(bytes_, 0, i);
            i = fis.read(bytes_);
        }
        fis.close();
        fos.close();
        Float size = (float) newFile.length();

        System.out.println("file size bytes:" + size);
        System.out.println("file size Mb:" + size / 1048576);

        logger.info("File created: " + newFile.getName());
        SessionMessages.add(actionRequest, "success");

    }
    catch (FileNotFoundException e)
    {
        System.out.println("File Not Found.");
        e.printStackTrace();
        SessionMessages.add(actionRequest, "error");
    }
    catch (NullPointerException e)
    {
        System.out.println("File Not Found");
        e.printStackTrace();
        SessionMessages.add(actionRequest, "error");
    }
    catch (IOException e1)
    {
        System.out.println("Error Reading The File.");
        SessionMessages.add(actionRequest, "error");
        e1.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-04-07T17:46:17.440

您需要这样做才能上传小于 1kb 的小文件

```
File f2 = uploadRequest.getFile("fileupload", true); 
```

它们仅存储在内存中。我在我的 catch 语句中有它，以防我得到一个空指针 - 或者我的原始文件 (f1.length) == 0

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-28T20:16:11.250

我已经执行了您的代码。它按预期工作。您的 jsp 页面中可能有问题。我不确定，但可能是您的 name 属性与您使用的属性不同`processAction`（假设您正在使用portlet)。参数区分大小写，请再次检查。

您将在下面的链接中找到更多信息。它在文件上传中有很好的解释。

[http://www.codeyouneed.com/liferay-portlet-file-upload-tutorial/](http://www.codeyouneed.com/liferay-portlet-file-upload-tutorial/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-05-28T14:17:51.377

我经历了一个文件上传代码，当我在我的本地系统中实现它时，portlet 正在将我上传的文件保存在`tomcat/webbapp/abc_portlet_project`位置，我不明白的是从哪里找到 portlet

> 字符串文件夹 = getInitParameter("uploadFolder");
> 
> ```
>  String realPath = getPortletContext().getRealPath("/");
> 
>                System.out.println("RealPath" + realPath +"\\" + folder); try { 
> ```
> 
> UploadPortletRequest uploadRequest = PortalUtil.getUploadPortletRequest(actionRequest); System.out.println("大小："+uploadRequest.getSize("fileName"));
> 
> if (uploadRequest.getSize("fileName")==0) {SessionErrors.add(actionRequest, "error");}
> 
> String sourceFileName = uploadRequest.getFileName("fileName"); 文件文件 = uploadRequest.getFile("fileName");
> 
> System.out.println("文件名：" + uploadRequest.getFileName("fileName")); 文件 newFolder = null; newFolder = new File(realPath +"\" + 文件夹); if(!newFolder.exists()){ newFolder.mkdir(); } 文件 newfile = null; newfile = new File(newFolder.getAbsoluteFile()+"\"+sourceFileName); System.out.println("新文件名：" + newfile.getName()); System.out.println("新文件路径：" + newfile.getPath());
> 
> InputStream in = new BufferedInputStream(uploadRequest.getFileAsStream("fileName")); FileInputStream fis = new FileInputStream(file); FileOutputStream fos = new FileOutputStream(newfile);

# android - 按钮单击事件上的 NullPointerException

> ID：16192438
> 
> 赞同：1
> 
> 时间：2013-04-24T12:47:35.067
> 
> 标签：android

GridActivity.java

```
 // Get feed form the file
        feed = (RSSFeed) getIntent().getExtras().get("feed");

        createFeedGroup(); 
```

这是一个新手问题。我在 FragmentActivity 上有三个 ImageButton。当我点击 btn_2 和 btn_3 时，它会监听事件，但如果我点击 btn_1，它会给我一个错误。

```
btn_1.setOnClickListener(new View.OnClickListener() {

        public void onClick(View view) {

        Intent i = new Intent(getApplicationContext(), GridActivity.class);
            startActivity(i);

      }
});

btn_2.setOnClickListener(new View.OnClickListener() {

        public void onClick(View view) {

        Intent i = new Intent(getApplicationContext(), SplashActivity.class);                   startActivity(i);

       }
});

btn_3.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {

        openContextMenu(v);
    }   

}); 
```

这是堆栈跟踪：

```
04-24 08:29:10.022: E/AndroidRuntime(5176): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.td.rssreader/com.td.rssreader.GridActivity}: java.lang.NullPointerException
04-24 08:29:10.022: E/AndroidRuntime(5176):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2088)
04-24 08:29:10.022: E/AndroidRuntime(5176):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2113)
04-24 08:29:10.022: E/AndroidRuntime(5176):     at android.app.ActivityThread.access$700(ActivityThread.java:139)
04-24 08:29:10.022: E/AndroidRuntime(5176):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1224)
04-24 08:29:10.022: E/AndroidRuntime(5176):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-24 08:29:10.022: E/AndroidRuntime(5176):     at android.os.Looper.loop(Looper.java:137)
04-24 08:29:10.022: E/AndroidRuntime(5176):     at android.app.ActivityThread.main(ActivityThread.java:4918)
04-24 08:29:10.022: E/AndroidRuntime(5176):     at java.lang.reflect.Method.invokeNative(Native Method)
04-24 08:29:10.022: E/AndroidRuntime(5176):     at java.lang.reflect.Method.invoke(Method.java:511)
04-24 08:29:10.022: E/AndroidRuntime(5176):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1004)
04-24 08:29:10.022: E/AndroidRuntime(5176):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:771)
04-24 08:29:10.022: E/AndroidRuntime(5176):     at dalvik.system.NativeStart.main(Native Method)
04-24 08:29:10.022: E/AndroidRuntime(5176): Caused by: java.lang.NullPointerException
04-24 08:29:10.022: E/AndroidRuntime(5176):     at com.td.rssreader.GridActivity.onCreate(GridActivity.java:54)
04-24 08:29:10.022: E/AndroidRuntime(5176):     at android.app.Activity.performCreate(Activity.java:5048)
04-24 08:29:10.022: E/AndroidRuntime(5176):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1094)
04-24 08:29:10.022: E/AndroidRuntime(5176):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2052)
04-24 08:29:10.022: E/AndroidRuntime(5176):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:57:39.340

您尝试从 Intent 检索提要而不将其放入您的起始 Intent：

来自`GridActivity`：

```
feed = (RSSFeed) getIntent().getExtras().get("feed"); 
```

您需要像这样启动它：

```
Intent i = new Intent(getApplicationContext(), GridActivity.class);
i.putExtra("feed", feed);
startActivity(i); 
```

请注意，可能必须实施 RSSFeed 才能[`Parcelable`](https://developer.android.com/reference/android/os/Parcelable.html)使其正常工作。

# selenium-webdriver - 如何使用 selenium webdriver 从 td 元素中获取值

> ID：16192439
> 
> 赞同：-3
> 
> 时间：2013-04-24T12:47:51.693
> 
> 标签：selenium-webdriver

我的html代码：

```
<tbody>

<tr style="display:none;">

<tr>

<td class="intervention">

<td class="notes-count">

<span class="ico ico--paper"></span>

2

</td> 
```

现在我需要使用`selenium webdriver`. 请帮我。我用过`xpath "//div/table/tbody/tr[2]/td[2]/" and getattribute("value ")`但它返回空值

如果您需要更多信息，请告诉我。提前致谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-24T15:47:38.463

那么使用WebElement 的**getText**方法而不是使用**getAttribute**方法

[这](http://selenium.googlecode.com/svn/trunk/docs/api/java/index.html)就像 Selenium WebDriver 的 javadoc API

# asp.net-mvc-3 - 如何使用 ASP.Net MVC 3 Razor C# 从 DB 格式化 DateTime 以在整个站点中显示？

> ID：16192441
> 
> 赞同：0
> 
> 时间：2013-04-24T12:47:57.480
> 
> 标签：asp.net-mvc-3, razor, datetime-format

从昨天开始，我一直在寻找答案，但无济于事。我尝试过模型活页夹、布局模板（不适用于我的案例）等。

让我澄清一下我真正需要什么。

我在 SQL Server 2008 R2 数据库中的许多表上有许多 DateTime 字段。它们存储在伦敦时区。我已经设法（在你们的帮助下）将 DateTime 转换为用户的时区并正确显示它们。我现在需要的是一种自动化的方法。每次站点显示来自数据库的 DateTime 时，都需要预先进行转换。输入将保持原样。

如果它是关于 WebForms 开发的——我已经习惯了——我只会创建一个处理程序。但我不知道 MVC 3 Razor 的最佳实践是什么。

有人可以在这里给我一些指示吗？

提前致谢。

**互补**

这是转换 DateTime 的代码：

```
// Timezone data provider
IDateTimeZoneProvider timeZoneProvider = DateTimeZoneProviders.Tzdb;

// Database Timezone = London
var londonTimeZone = timeZoneProvider["Europe/London"];

//// Getting date/time from the database and mapping it as being local to London timezone
//var yourDateFromDb = new DateTime(source.Year, source.Month, source.Day, source.Hour, source.Minute, source.Second, source.Millisecond);
//ZoneLocalMapping map = londonTimeZone.MapLocal(LocalDateTime.FromDateTime(yourDateFromDb));
//// This is the date/time with the correct offset (taking into account DST etc)
//var zonedDbDateTime = map.First();

// Jon Skeet suggestion instead of using the Mapping
// http://stackoverflow.com/questions/16164994/datetime-conversions-using-nodatime-on-asp-net-mvc-3-razor-website-how-to/16178730?noredirect=1#16178730
//
var dateTimeFromDb = new DateTime(source.Year, source.Month, source.Day, source.Hour, source.Minute, source.Second, source.Millisecond);
var zonedDbDateTime = londonTimeZone.AtLeniently(LocalDateTime.FromDateTime(dateTimeFromDb));

// Map the London zoned date/time to the users local date/time (saved on the Session)
var usersTimezoneId = (HttpContext.Current.Session["timezoneid"] != null ? HttpContext.Current.Session["timezoneid"].ToString() : "UTC");
var usersTimezone = timeZoneProvider[usersTimezoneId];
var usersZonedDateTime = zonedDbDateTime.WithZone(usersTimezone);

return usersZonedDateTime.ToDateTimeUnspecified(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:05:48.400

我找到了适用于 DateTime 扩展的解决方案：

```
public static DateTime ToLocalTimeZone(this DateTime dateTime) { 
    IDateTimeZoneProvider timeZoneProvider = DateTimeZoneProviders.Tzdb; 
    var londonTimeZone = timeZoneProvider["Europe/London"];

    var dateTimeFromDb = new DateTime(dateTime.Year, dateTime.Month, dateTime.Day,
       dateTime.Hour, dateTime.Minute, dateTime.Second, dateTime.Millisecond); 
    var zonedDbDateTime = londonTimeZone.AtLeniently(LocalDateTime.FromDateTime(dateTimeFromDb));

    var usersTimezoneId = (HttpContext.Current.Session["timezoneid"] != null ? HttpContext.Current.Session["timezoneid"].ToString() : "UTC"); var usersTimezone = timeZoneProvider[usersTimezoneId]; var usersZonedDateTime = zonedDbDateTime.WithZone(usersTimezone);

    return usersZonedDateTime.ToDateTimeUnspecified(); 
} 
```

不确定最佳实践，因为正如我所指出的，我对 MVC 模型完全陌生。但它正在发挥作用。

# java - 使用工厂方法“隐藏”可变对象

> ID：16192444
> 
> 赞同：0
> 
> 时间：2013-04-24T12:48:00.603
> 
> 标签：java, design-patterns, abstract-class, immutability

我阅读了**Effective Java: Programming Language Guide Joshua Bloch**中的一些内容，发现我应该避免使用可变对象。因为我读过这本书，我知道如何使可变对象不可变（例如使用 private 和 final 修饰符）。

`data holder class`好吧，但是我有一个带有一些私有字段的“假人” 。每个字段都可以通过 get 方法和相应的 set 方法访问。所以由于这个设置方法，这个类的对象不是不可变的。

现在的问题是如何避免这些设置方法？将所有（例如 20 个）参数传递给对象构造函数？我认为这不是很好的设计，因为我必须注意参数的顺序，如果我不想设置特殊参数则必须传递空引用等等。

所以我考虑以下方法：

*   创建一个包含所有 get 方法的接口，并让它从虚拟数据持有者类中实现
*   使用私有构造函数和静态工厂方法创建一个抽象类，该方法返回数据持有者对象的“get”接口实例。
*   在静态工厂方法中，我使用所有必要的设置方法配置数据持有者对象
*   将数据持有者类包设为私有，以便对象只能通过抽象类中定义的静态工厂方法进行实例化

在下一步中，我将配置和创建的内容存储`data holder objects`在一个列表中。

`modify`尽管对象是不可变的，但读取对象和对象的最佳方法是什么？使用静态工厂方法创建一个新对象，该方法在内部设置新值并将其替换为列表中的对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T15:51:59.100

正如@NilsH 指出的那样：您应该选择[Builder 模式](http://en.wikipedia.org/wiki/Builder_pattern)，理想情况下基于[fluent interface](http://en.wikipedia.org/wiki/Fluent_interface)。

例如，您可以查看[make-it-easy](https://code.google.com/p/make-it-easy/)。

# asp.net-web-api - .Net Web API 未找到与请求 URI 匹配的 HTTP 资源

> ID：16192445
> 
> 赞同：6
> 
> 时间：2013-04-24T12:48:08.960
> 
> 标签：asp.net-web-api, iis-7.5

我正在开发 .Net Web API，它在调试和本地主机 IIS 上都可以正常工作，但是当我将它发布到服务器时，它开始给出以下错误：-
“消息”：“没有找到与请求 URI 匹配的 HTTP 资源

在服务器上，我们在此 API 的默认站点下有应用程序文件夹，但它在本地 IIS 的默认站点下的应用程序文件夹中工作正常，所以这应该不是问题。

现在我尝试在处理程序中设置正确的动词，如以下 url 中指定但没有工作：
[HTTP 404 Page Not Found in Web Api Hosted in IIS 7.5](https://stackoverflow.com/questions/9703090/mvc-4-web-api-iis7-5-http-404-page-not-found)

我还按照以下网址的建议在服务器上安装了 MVC4：
[.NET Web Api - 404 - File or directory not found](https://stackoverflow.com/questions/15622720/net-web-api-404-file-or-directory-not-found)

WebDav 模块，处理程序也可能会出错，所以我也尝试删除它，但它给出了同样的错误。

这是模块、处理程序设置的 Web.config 部分：-

```
<modules runAllManagedModulesForAllRequests="true" />
<validation validateIntegratedModeConfiguration="false" />
<handlers>
<remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" />
<remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" />
<remove name="ExtensionlessUrlHandler-Integrated-4.0" />
<add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="*" modules="IsapiModule" 
       scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" 
       preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
  <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="*" modules="IsapiModule" 
       scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" 
       preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
  <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="*" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
</handlers> 
```

我不在任何地方玩路线。我是否缺少有关 web.config 或服务器 IIS 中的设置/配置的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-12T17:08:33.653

造成这种情况的另一个潜在原因是，如果

```
 GlobalConfiguration.Configure(WebApiConfig.Register); 
```

在之后

```
 RouteConfig.RegisterRoutes(RouteTable.Routes); 
```

在 global.asax.cs

它需要在之前，否则默认的 RouteConfig 路由会“吃掉”WebAPI 路由 - 并尝试将 API 请求映射到名为 API 的控制器......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-03T01:20:40.870

这对我有用：

```
<remove name="WebDAV"/> 
```

我不知道为什么它安装在服务器上。但这似乎与无扩展处理程序有干扰

从 IIS（[http://www.iis.net/learn/install/installing-publishing-technologies/installing-and-configuring-webdav-on-iis](http://www.iis.net/learn/install/installing-publishing-technologies/installing-and-configuring-webdav-on-iis)）：

> Microsoft 发布了一个新的 WebDAV 扩展模块，该模块针对 Windows Server® 2008 上的 Internet 信息服务 (IIS) 7 及更高版本完全重写。这个新的 WebDAV 扩展模块包含许多新功能，使 Web 作者能够比以前更好地发布内容，并提供 Web管理员更多的安全和配置选项。Microsoft 已发布针对 Windows Server® 2008 的 WebDAV 扩展模块的更新，该模块提供共享和独占锁支持以防止由于覆盖而丢失更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-07T12:51:26.873

改成：

```
<validation validateIntegratedModeConfiguration="false" />
<modules>
  <remove name="WebDAVModule"/>
</modules>
<handlers>
  <remove name="WebDAV"/>
  <remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" />
  <remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" />
  <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
  <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
  <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
  <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
</handlers> 
```

# python - 模块中函数的条件定义

> ID：16192448
> 
> 赞同：20
> 
> 时间：2013-04-24T12:48:22.513
> 
> 标签：python, design-patterns, cross-platform

我的问题是关于找到定义根据给定标准实现不同的函数的“好方法”。该函数将从多个脚本中调用，因此我必须将它放在一个模块中。

举例来说，我的标准涉及脚本在哪个平台上运行，但要清楚测试可以适用于任何东西。我的函数允许持久定义/检索环境变量，因此我根据以下方案（解决方案 1）创建了一个名为 persistenv.py 的模块：

```
# CROSS-PLATFORM PART
def my_function1() :
    # ... body1 ...

# WINDOWS-ONLY PART
if sys.platform.lower().startswith('win') :
    def my_function2() :
        # ...body2 for Windows...

# LINUX-ONLY PART
elif sys.platform.lower().startswith('linux') :
    def my_function2() :
        # ...body2 for Linux...

else :
    raise ImportError('Your platform is not supported') 
```

上面介绍了单个模块中相同功能的两种可能定义。无论如何，这对我来说听起来比每次调用函数时都测试平台要干净得多（解决方案 2）：

```
# CROSS-PLATFORM PART
def my_function1() :
    # ... body1 ...

def my_function2() :

    # WINDOWS-ONLY PART
    if sys.platform.lower().startswith('win') :
        # ...body2 for Windows...

    # LINUX-ONLY PART
    elif sys.platform.lower().startswith('linux') :
        # ...body2 for Linux... 
```

我发现了另一种[方法](https://stackoverflow.com/questions/791098/how-to-offer-platform-specific-implementations-of-a-module)，其中每个特定于平台的部分都被提取到自己的模块中，然后有条件地导入到 persistenv.py (SOLUTION 3) 中：

```
# CROSS-PLATFORM PART
def my_function1() :
    # ... body1 ...

# WINDOWS-ONLY PART
if sys.platform.lower().startswith('win') :
    from persistenv_win import my_function2

# LINUX-ONLY PART
elif sys.platform.lower().startswith('linux') :
    from persistenv_linux import my_function2

else :
    raise ImportError('Your platform is not supported') 
```

到目前为止，我得出了以下结论（并得到了以下问题）：

*   几乎不应该使用解决方案 2，特别是如果您有几个特定于平台的函数 my_function2、my_function3、my_function4...（因为您必须在每个函数中重复测试）

*   解决方案 1 看起来很简单（没有额外的文件，一个测试），但我想知道**如果需要调用 "from persistenv import my_function2"，Python 的行为（内部）如何**？

*   解决方案 3 似乎更 Pythonic（用于内置实现，例如 os.path），但是**当 persistenv.py、persistenv_win.py 和 persistenv_linux.py 是同一包的一部分（在其他模块中）时，这不会有问题我会通过在主脚本中执行“import my_package”来全局导入哪个**？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-24T13:11:48.997

如果您查看 Python 标准库，您会发现它们都被使用了：

*   `subprocess`使用解决方案 1 和 2；有几个地方进行测试。

*   `os`使用解决方案 3 ( `import ... as path`) 的变体。

所以使用看起来最合适和最简单的那个。

> [解决方案 1]
> 
> 如果需要调用“ `from persistenv import my_function2`”，Python 的行为（内部）如何？

它的行为完全符合要求。导入模块时定义的函数被导出。

从技术上讲，模块像 with 一样被导入`import module`，然后在其命名空间中查找给定名称并将其放入当前名称中。

> [解决方案 3]
> 
> 当persistenv.py、persistenv_win.py 和persistenv_linux.py 是我将通过在主脚本中执行“import my_package”全局导入的同一个包（在其他模块中）的一部分时，这不会有问题吗？

为什么会有问题？您导入`my_package`主脚本，然后主脚本（或包的一个模块）从依赖于平台的模块执行所述导入。这是完全有效的。

# mysql - 选择至少有 2 个 2 级连接作为连接的 3 级连接

> ID：16192449
> 
> 赞同：2
> 
> 时间：2013-04-24T12:48:22.770
> 
> 标签：mysql, sql

我有一个包含 2 个表的数据库：人员和连接。Connections 有 person_id 外键和 connection_id 外键。

我需要的是选择一个给定人的连接连接（3 级连接），其中至少 2 个 2 级连接将 3 级连接作为它们的连接。不应包括原始人的第一级连接。

我尝试过嵌套 where 子句，但只能选择所有 3 级连接。

我的最后一次尝试有一个错误（并且可能是错误的）：

```
SELECT * FROM `people` WHERE `id` =
ANY(SELECT `connection_id`, COUNT(*)
FROM `people_connections` WHERE `person_id` = 7) 
```

我正在使用 OO PHP，因此可以有单独的较小查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T13:21:49.313

这似乎适用于 SQLFiddle 以获取您想要的第三个连接的 people.id。

[http://www.sqlfiddle.com/#!2/9d32c/4](http://www.sqlfiddle.com/#!2/9d32c/4)

```
SELECT d.connect_id
FROM people_connections c
INNER JOIN people_connections d ON c.connect_id = d.person_id AND d.connect_id <> c.person_id
WHERE c.person_id = @yourIdHere
GROUP BY d.connect_id
HAVING COUNT(*) >= 2 
```

没有JOINS的方式：

```
SELECT connect_id
FROM people_connections
WHERE person_id <> @yourIdHere AND
  person_id IN (SELECT connect_id 
                    FROM people_connections
                    WHERE person_id = @yourIdHere)
GROUP BY connect_id
HAVING COUNT(*) >= 2 
```

# php - 如何使用直接显示 json 数组的 PHP 文件

> ID：16192451
> 
> 赞同：0
> 
> 时间：2013-04-24T12:48:24.413
> 
> 标签：php, ajax, json

我使用 jQuery 和 AJAX 在 HTML 和 PHP 之间进行交互。

我放了一个带有 GET 参数的 url，PHP 文件使用我的数据库返回的数据打印一个 JSON 数组。然后我在我的 HTML 中显示它。

```
<?php
   if (isset($_GET["vari"]) && isset($_GET["vari2"])){
      echo json_encode(array("hello", $_GET["vari"], $_GET["vari2"]);
   }
?> 
```

我想要做的是，当有人使用 GET 参数打开 PHP 文件的 url 时，将被重定向到我的 HTML 文件并在此处显示信息，就像我使用 jQuery 和 AJAX 一样。但是，很明显，当我打开 PHP 时，我看到了 JSON 数组......所以我发现了这个：

```
if (isset($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) === 'xmlhttprequest') {
    // JSON
} else {
    // HTML
} 
```

但是如果我想从外部加载 index.html 文件并显示参数的数据，我应该怎么做？因为如果我使用 header('index.html') 或 echo file_get_contents('index.html') 那么我无法发送参数。我解释？

我正在寻找最好的方法来做到这一点，你有什么建议吗？我希望我很清楚，但是如果您需要更多信息来帮助我，请告诉我，我会编辑帖子。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T12:52:17.620

您可以检查请求是否通过 AJAX 完成，如果是，则仅显示 JSON 响应。

```
if (isset($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) === 'xmlhttprequest') {
    // JSON
} else {
    // HTML
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T12:58:11.833

### 有效的快速而肮脏的解决方案

“检测是否 AJAX”方法将是解决该问题的直接实用解决方案。但是，最好让客户端*指定*它想要接收什么样的内容。

### 更灵活但也更复杂但仍然有些肮脏的解决方案

`.type`许多应用程序框架通过检测url 中是否存在后缀来做到这一点。例如，`http://path/to/data.json`将返回 JSON 和`http://path/to/data.html`或 plain`http://path/to/data`将返回 HTML。但是，要设置它，您需要具有特定的 URL 结构并使用前端控制器脚本或访问 Web 服务器配置。

要仅使用 PHP 实现这一点，想法是您的 URL 看起来像`/.../data.php/json`并且`data.php`会执行以下操作：

```
$data = array('Sample' => 'data');

switch (strtolower($_SERVER['PATH_INFO'])) {
    case '/json':
        echo json_encode($data);
        break;
    default:
        print_r($data);
        break;
} 
```

### 最纯粹但也不太方便且绝对难以实施的解决方案

从技术上讲，正确的方法是让客户端通过 HTTP`Accept`标头指定类型，该标头正是为此目的而创建的。这样做的好处是它是“按书本”的，但它使访问此功能变得更加困难（而将`.json`后缀传递给 url 是微不足道的）。

这是如何使用`Accept`标头执行此操作的准系统示例：

```
$data = array('Sample' => 'data');

if (strpos($_SERVER['HTTP_ACCEPT'], "application/json") === false) {
    print_r($data);
}
else {
    echo json_encode($data);
} 
```

请注意，上面的代码功能严重不足，因为它没有尝试正确解析标头，它绝对应该这样做。但是，正确确定客户的首选内容类型并非易事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T13:08:57.193

在您的 .php 页面开始时，您可以这样做。

```
if($_SERVER['HTTP_X_REQUESTED_WITH'] != 'XMLHttpRequest')
{
    header('Location: index.html'); // Your HTML page url
} 
```

希望这对你有用。:)

喜欢！！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T13:14:05.117

这是我的方法：我在应用程序环境中创建了一个常量（我把它放在我的前端控制器中），比如：

```
define('AJAX_CALL', isset($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest'); 
```

有了它，现在你可以询问来电的类型了

```
if(AJAX_CALL){
//do stuff
} 
```

此外，您可以定义一个指示是否为 ajax 的变量，将其添加到发送的数据中。如果您传递带有另一个数据的 json 对象，请添加 {ajax:true}，然后在 php 文件中：

```
if($_GET['ajax']){
  //do stuff
} 
```

我希望它是有用的。

# opencv - 如何停止 for 循环（OpenCV）

> ID：16192452
> 
> 赞同：0
> 
> 时间：2013-04-24T12:48:24.820
> 
> 标签：opencv, memory-management, for-loop, memory-leaks, processing

我正在将 Processing (processing.org) 用于需要面部跟踪的项目。现在的问题是，由于 for 循环，程序将耗尽内存。我想停止循环或至少解决内存不足的问题。这是代码。

```
import hypermedia.video.*;
import java.awt.Rectangle;

OpenCV opencv;

// contrast/brightness values
int contrast_value    = 0;
int brightness_value  = 0;

void setup() {

size( 900, 600 );

opencv = new OpenCV( this );
opencv.capture( width, height );                   // open video stream
opencv.cascade( OpenCV.CASCADE_FRONTALFACE_ALT );  // load detection description, here-> front face detection : "haarcascade_frontalface_alt.xml"

// print usage
println( "Drag mouse on X-axis inside this sketch window to change contrast" );
println( "Drag mouse on Y-axis inside this sketch window to change brightness" );

}

public void stop() {
    opencv.stop();
    super.stop();
}

void draw() {

// grab a new frame
// and convert to gray
opencv.read();
opencv.convert( GRAY );
opencv.contrast( contrast_value );
opencv.brightness( brightness_value );

// proceed detection
Rectangle[] faces = opencv.detect( 1.2, 2, OpenCV.HAAR_DO_CANNY_PRUNING, 40, 40 );

// display the image
image( opencv.image(), 0, 0 );

// draw face area(s)
noFill();
stroke(255,0,0);
for( int i=0; i<faces.length; i++ ) {
    rect( faces[i].x, faces[i].y, faces[i].width, faces[i].height ); 
}
}

void mouseDragged() {
contrast_value   = (int) map( mouseX, 0, width, -128, 128 );
brightness_value = (int) map( mouseY, 0, width, -128, 128 );
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T15:28:36.593

几点...

# 1 正如 George 在评论中提到的，您可以减小捕获区域的大小，这将成倍减少您的草图用于分析面部跟踪的 RAM 量。尝试制作两个名为 CaptureWidth 和 CaptureHeight 的全局变量，并将它们设置为 320 和 240 - 这完全足够了。

# 2 您可以增加您的草图在 Java 虚拟机中默认使用的内存量。我认为处理默认为 128，但如果你转到首选项，你会看到一个复选框“将最大可用内存增加到 [x]”......我通常让我的 1500 mb，但这取决于你的机器你能处理。除非您在 64 位机器上并且在 64 位模式下使用 Processing 2.0，否则不要尝试使其大于 1800mb...

# 3 要真正打破循环...使用“break”命令[http://processing.org/reference/break.html](http://processing.org/reference/break.html) ...但请理解您*为什么*要先使用它，因为这只会让您跳出你的循环。

# 4 如果您只想显示一定数量的面孔，您可以测试 faces[i] == 1 等，这可能会有所帮助....

但我认为循环本身不是罪魁祸首，它更有可能是内存占用。从建议 1 和 2 开始，然后报告...

# intuit-partner-platform - 在什么情况下会使用 IPP AggCat 中的 discoverAndAddAccountsResponse 方法？

> ID：16192453
> 
> 赞同：1
> 
> 时间：2013-04-24T12:48:27.907
> 
> 标签：intuit-partner-platform, customer-account-data-api

我知道要验证银行不会询问超过一组 MFA 问题，您必须检查每个 discoverAndAddAccounts 调用的结果，但 IPP AggCat for .Net 还提供了 discoverAndAddAccountsResponse 方法。这种方法也可以回传新的挑战/响应问题吗？如果是这样，如何使用，如果没有，何时使用这种方法？

感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:22:44.387

最新版本 1.3.0 对 DiscoverAndAddAccountsResponse 有一个额外的重载，它传递回挑战问题和会话以处理多个 MFA 轮次。请参见：

[https://developer.intuit.com/docs/0020_aggregation_categorization_apps/devkits](https://developer.intuit.com/docs/0020_aggregation_categorization_apps/devkits)

# knockout.js - ko.validation.group 没有在我的嵌套 observableArray 上检测到我的错误

> ID：16192457
> 
> 赞同：3
> 
> 时间：2013-04-24T12:48:40.810
> 
> 标签：knockout.js, breeze, durandal

我使用密集的 Knockout 绑定与 Durandal/Breeze 开发了一个项目。

我有一个使用以下可观察的视图：

```
packing
  - description
  - weight
  - ...
  - isotopes
    - name
    - activity
    - ... 
```

正如您在上面看到的：我的 observable 内部`packing`包含一个`isotopes`observableArray。这个`packing`对象是用一个查询从微风中填充的。

```
var query = entityQuery.from('Packings')
        .where('id', '==', packingId)
        .expand('isotopes'); 
```

我尝试使用**ko.validation**为所有这些设置验证。

*   我的observable的`description`属性是必需的`packing`

*   我的observableArray的`name`属性是必需的`isotopes`

我成功地验证了描述。因此，每当用户清除绑定到的输入字段时`description`，此字段都会以红色突出显示。每当用户添加一个新的空实体（微风）并单击保存时，这个实体就会以红色突出显示。

这要归功于保存按钮中的这段代码：

```
var validationErrorsCount = ko.computed(function () {
    if (typeof packing() == 'undefined') return;
    var validationErrors = ko.validation.group(packing());
    return validationErrors().length;
})

if (validationErrorsCount() > 0) {
    logError('Validation failed, please check.', '', true);
    ko.validation.group(packing()).showAllMessages();
    return;
} 
```

到目前为止，一切都很好。

现在我需要验证`name`我的`isotopes`observableArray 的属性。因此，每当用户清除绑定到的输入字段时`name`，此字段都会以红色突出显示。有用。但**问题是**每当用户添加一个新的空实体（微风）类型`isotope`时，不要在`name`输入框中输入任何内容并单击保存，这个没有以红色突出显示。

当我调试和检查值时，我可以清楚地看到：

*   `ko.validation.group(packing(), {deep:false});`没有返回任何无效的东西

*   `ko.validation.group(packing().isotopes(), {deep:false});`没有返回任何无效的东西

所以似乎 ko.validation 没有检测到我的无效输入。

**我的问题：**当我在里面添加一个新元素时如何验证我的嵌套`isotopes`observableArray？

谢谢。

* * *

更新

这是另一个有问题的 SO 帖子：[Breeze.js & Knockout.js：将微风验证转换为敲除验证会导致“堆栈空间不足”或“递归过多”](https://stackoverflow.com/questions/16158463/breeze-js-knockout-js-translating-breeze-validation-to-knockout-validation-ca)

这是我的“肮脏”和临时黑客（从第 4 行到第 9 行）

```
// Check errors on the packing entity
var validationErrorsCount = ko.validation.group(packing()).length;
// Check errors on the isotopes entities !! code below is a temporary hack 
ko.utils.arrayForEach(packing().isotopes(), function (isotope) {
    if (!isotope.name.isValid()) {
        validationErrorsCount = validationErrorsCount + 1;
        ko.validation.group(isotope).showAllMessages();
    }
});

if (validationErrorsCount > 0) {
    logError('Validation failed, please check.', '', true);
    ko.validation.group(packing()).showAllMessages();
    return;
} 
```

仍在等待更好的方法来验证我的内部（嵌套）模型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-12T20:17:59.287

如果你改变：`ko.validation.group(packing().isotopes(), { deep:false });`

至：`ko.validation.group(packing().isotopes(), { deep:true });`

这不就是深度吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-27T03:13:24.117

我不认为有一个简单的方法。在一定程度的复杂性下，移动到“ItemViewModel”会更容易。ItemViewModel 是围绕内部实体的面向视图的包装器。它公开了为更容易绑定而设计的精心控制的属性。我[在这里描述了](https://stackoverflow.com/questions/16180592/sorting-breeze-navigation-properties)与另一个问题相关的方法。

不知道你有没有撞墙。

**另一个想法**：为这个 EntityType 编写几个[自定义验证](http://www.breezejs.com/documentation/validation)来完成检查同位素的艰苦工作。您将知道如何在验证方法中“正确”有效地完成工作；您将不会依赖 KO 来遍历图表或遭受循环问题。

# mysql - MySQL 过程 - 将更新中列的计算分配给要在另一个更新中使用的变量

> ID：16192459
> 
> 赞同：0
> 
> 时间：2013-04-24T12:48:43.130
> 
> 标签：mysql, variables, procedure, assign

我有一个包含 3 个表的数据库，我正在更新第一个表中的一行，然后尝试根据对第一个字段的更改来更新第二个和第三个表。

这是我目前拥有的：

```
--Session--
User   Hotspot   DownloadCounter
bob    123       0              

--UserDownload--
User     Download
bob      100   

--HotspotDownload--
Hotspot  Download 
123      300 
```

目前，当我从热点获取更新时，我用最新的流量计数器值更新会话表，但是我现在想用新的 DownloadCounter（旧的 DownloadCounter）的值更新 UserDownload 和 HotspotDownload 表。

我认为通过以下过程很容易做到这一点：

```
DECLARE increment INT;

UPDATE Session
    SET @increment  = (200 - Counter),
    Counter = 200
    WHERE (User = 'bob' AND Circuit = '123');

UPDATE UserDownload
    SET Total = (Total + @increment)
    WHERE  (User = 'bob');

UPDATE HotspotDownload
    SET Total = (Total + @increment)
    WHERE  (Circuit = '123'); 
```

我的想法是更新会话表并将计数器更改值分配给一个变量，然后在更新下载表时使用该变量。但是 '@' 在过程中会导致语法错误，并且没有 '@' 它认为增量是一个列，所以失败了。

如果总表中没有用户/热点的条目，我仍然需要更新会话表。

我尝试使用单个更新和左连接来执行此操作，但这导致首先更新 Sessions 表列，因此不会更新下载表。

是否可以将列上的计算结果分配给更新中的变量，然后在过程中的另一个更新中使用该更新？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T21:44:12.047

好的，看起来这样做的方法是触发器。

让程序只更新 Session 表，然后对在实际更新之前运行的表触发并更新第二个和第三个表。

# google-chrome - window.onerror 在 Chrome 中不起作用

> ID：16192464
> 
> 赞同：46
> 
> 时间：2013-04-24T12:48:57.740
> 
> 标签：google-chrome, window, onerror

我正在尝试向我的网站添加一个 onerror 事件。

```
window.onerror = function() {
    alert("an error");
} 
```

但我收到的只是：

```
notThere();
ReferenceError: notThere is not defined 
```

我错过了什么？

浏览器：Chrome 26.0.1410.64 m

重现步骤：

*   将代码添加到控制台。
*   将 notThere() 添加到控制台

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2014-12-02T19:51:23.427

控制台直接产生错误时不会触发window.onerror。它*可以*通过触发`setTimeout`，例如，`setTimeout(function() { notThere(); }, 0);`

可能重复：[Chrome：从开发控制台调用的代码中的错误会触发 window.onerror 吗？](https://stackoverflow.com/questions/17534054/chrome-will-an-error-in-code-invoked-from-the-dev-console-trigger-window-onerro)

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2013-10-21T22:37:53.700

Chrome 中的`window.onerror`作品（参见 jsfiddle - [http://jsfiddle.net/PWSDF/](http://jsfiddle.net/PWSDF/)），但显然不在控制台中 - 这是有道理的。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2015-09-15T20:28:33.193

您可能无法处理错误的其他一些原因`window.onerror`（除了提到的错误）：

*   另一个图书馆`window.onerror`在你之后。
*   如果您使用的是 Angular，则错误不会通过`window.onerror`. 你必须使用这个工厂来处理它们：

    ```
     .factory('$exceptionHandler', function() {
            return function errorCatcherHandler(exception, cause) {
                console.error(exception);
                if (window.OnClientError) window.OnClientError(exception);
            };
        }) 
    ```

看：

[https://docs.angularjs.org/api/ng/service/](https://docs.angularjs.org/api/ng/service/) $exceptionHandler

[http://bahmutov.calepin.co/catch-all-errors-in-angular-app.html](http://bahmutov.calepin.co/catch-all-errors-in-angular-app.html)

# vb.net - 从 VB.NET 反编译的 Operators.ConditionalCompareObjectEqual

> ID：16192466
> 
> 赞同：0
> 
> 时间：2013-04-24T12:48:58.983
> 
> 标签：vb.net, cil

我已经使用 ILSply 从旧版 VB.NET 应用程序中反编译了一些旧代码，并且出现了这一行：

```
Operators.ConditionalCompareObjectEqual(safeDataReader["isLoader"], -1, false) 
```

我知道这是编译器生成的，但不建议在应用程序源代码中使用此代码。我的问题是为什么会这样？在“正常”代码中应该是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T13:01:17.247

该[方法的文档在](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.compilerservices.operators.conditionalcompareobjectequal.aspx)那里说：

> 表示重载的 Visual Basic 等于 (=) 运算符。

为什么？我不“知道”，但很容易做出有根据的猜测。

VB.NET 中“=”运算符的语义与 C# 和标准 Object.Equals() 的语义稍有不同。语义继承自 VB6，出于向后兼容性的原因不能更改。显然，该方法为编译器实现了 VB6 语义。

对差异进行系统分析会很有趣。

*进一步的想法：*

“不推荐”的原因是没有理由从 VB.NET 调用该方法：只需使用`=`. 在 C# 中，没有特别的理由调用 VB6 语义，因此该方法在那里也没有多大意义。

显然，如果您正在编译从 VB.NET 生成的 C# 代码，那么这些是特殊情况：调用该方法是正确的做法，除非您愿意花时间分析代码并向自己证明标准`=`cn 被安全替换。

# asp.net - 更改我已经上线的页面内容

> ID：16192467
> 
> 赞同：-1
> 
> 时间：2013-04-24T12:48:59.270
> 
> 标签：asp.net

我正在运行时创建一个 .aspx 页面，当管理员打开它时，管理员可以更改其内容，此页面上的数据未从数据库绑定或此页面不包含网格视图。它是通过使用 literalControl 创建的。我的页面在网上直播我可以永久更改内容吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:52:57.227

如果您有一个已经构建的 .net 页面，则不建议在服务器上对其进行编辑。

当您想要重新更新任何 .net 页面、重建您的应用程序并部署它时，最好的方法是……如果此内容必须是动态的，则使其从 xml 或 MSSQL 数据库中读取，那么您可以更轻松地对其进行编辑。

# jquery - 取消选中复选框，但属性仍处于选中状态

> ID：16192473
> 
> 赞同：3
> 
> 时间：2013-04-24T12:49:30.507
> 
> 标签：jquery, html

我有一个默认选中=“已选中”的复选框。

但是，如果我取消选中该复选框，然后执行类似的操作

```
alert($('#checkbox').attr('checked')); 
```

不管有没有勾选，它都会一直提示`checked`。

[**我在这里做了这个功能的代码笔**](http://codepen.io/robertnorth/pen/qanie)。

如何获取复选框的实际选中状态（而不是默认代码中写入的内容）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T12:52:10.273

`attr`绑定到 DOM 属性，然后保持初始值。如果要检查状态，则必须`prop`改用：

```
$('#checkbox').prop('checked') 
```

有关更多信息，您可以阅读 jQuery 文档的“属性与属性”段落[`prop`](http://api.jquery.com/prop/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-24T12:52:48.840

使用[prop()](http://api.jquery.com/prop/)代替，因为：

> 根据 W3C 表单规范，checked 属性是一个布尔属性，这意味着如果该属性完全存在，则相应的属性为真——例如，即使该属性没有值或设置为空字符串值，甚至“错误的”。所有布尔属性都是如此。

```
alert($('#checkbox').prop('checked')); 
```

[在这里](http://api.jquery.com/attr/)阅读更多

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-24T12:51:18.887

实际检查的状态存储在`checked`属性中，所以使用`.prop()`函数：

```
$('#checkbox').prop('checked') 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-24T12:51:26.273

你可以做

```
alert($('#checkbox').prop('checked')); 
```

你会得到`true`或`false`

要获取有关 attr 与 prop 的更多信息，请查看官方[prop](http://api.jquery.com/prop/)文档，特别是**Attributes vs. Properties部分**

> 根据 W3C 表单规范，checked 属性是一个布尔属性，这意味着如果该属性完全存在，则相应的属性为真——例如，即使该属性没有值或设置为空字符串值，甚至“错误的”。所有布尔属性都是如此。
> 
> 尽管如此，关于checked 属性最重要的概念是它不对应于checked 属性。该属性实际上对应于 defaultChecked 属性，应该只用于设置复选框的初始值。选中的属性值不会随着复选框的状态而改变，而选中的属性会。因此，确定是否选中复选框的跨浏览器兼容方法是使用该属性：
> 
> if ( elem.checked )
> 
> if ( $(elem).prop("checked") )
> 
> if ( $(elem).is(":checked") )
> 
> 其他动态属性也是如此，例如 selected 和 value。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-24T12:52:14.430

使用 jquery 中的 is 函数来检查，这将给出 true 或 false

```
$('#checkbox').is(':checked') 
```

请参阅此修复代码[http://codepen.io/anon/pen/mHqAI](http://codepen.io/anon/pen/mHqAI)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-24T12:51:08.897

我很想听听有人解释为什么会发生这种情况，但我会告诉你我一直在做什么来解决它

```
$('#checkbox').get(0).checked 
```

我正在使用本机 dom 对复选框是否被实际选中的解释，只要 #checkbox 存在，它就可以完美地工作

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-24T12:51:48.373

你可以在没有 jQuery 的情况下做到这一点：

```
 alert(document.getElementById('checkbox').checked); 
```

[密码笔](http://codepen.io/anon/pen/kjyAI)

# lotus-domino - Lotus domino FTSearch 查询

> ID：16192475
> 
> 赞同：1
> 
> 时间：2013-04-24T12:49:38.340
> 
> 标签：lotus-domino

我对`FTSearch`方法中的查询有疑问。我正在使用类似查询`" FIELD fldContractorCode = \"K005152\""`，这很好，但现在我需要再添加一个查询选项。我尝试使用：

```
"form= "formcontractor" & FIELD fldContractorCode = "K005152""
"Form = "formcontractor" & FIELD fldContractorCode = "K005152""
"FORM = "formcontractor" & FIELD fldContractorCode = "K005152""
"form= "formcontractor" AND FIELD fldContractorCode = "K005152""
"Form = "formcontractor" AND FIELD fldContractorCode = "K005152""
"FORM = "formcontractor" AND FIELD fldContractorCode = "K005152"" 
```

但我总是得到查询不可理解的错误。

如何使这个查询工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T13:09:03.107

如果您真的使用 FTSearch，那么公式必须如下所示：

```
FIELD form ="formcontractor" & FIELD fldContractorCode = "K00515" 
```

您需要在每条语句前面添加“FIELD”- 语句......更短的形式是：

```
[form] = "formcontractor" & [fldContractorCode] = "K00515" 
```

您甚至可以省略 FTSearch 中的“”- 符号。

但我真的不建议使用 FTSearch，因为它始终是“包含”- 搜索（查询也会找到 K00515xxx）。

最好使用 NotesDatabase- 类的 .search- 方法，并将其编写为：

```
db.Search( {Form ="formcontractor" & fldContractorCode = "K00515"}, Nothing, 0 ) 
```

那么您肯定只返回包含您搜索的数据的文档。而在速度问题上，它应该只会稍微慢一点。

# mobile - 在移动设备上使用 AsyncUpload (Galaxy SII)

> ID：16192478
> 
> 赞同：0
> 
> 时间：2013-04-24T12:49:46.737
> 
> 标签：mobile, browser, upload, telerik

**编辑：** 今天早上我用 iphone 4 对其进行了测试，它工作得很好，所以它可能特定于 Android（我使用的是 4.1.2 版）Vs AsyncUpload Control

我目前正在网页上创建一个文件上传部分，可以在每种类型的设备（计算机、平板电脑和手机）上查看。当我在标准计算机上测试文件上传部分时，一切正常。当我在手机上测试它时（我使用的是带有所有最新更新的三星 Galaxy S2），我可以访问手机上的文件。我可以选择我想要的文件，它似乎可以完美上传（我从 Telerik 控件中获得了绿点，这意味着上传已成功）但实际上是在控件的模板目录中创建的文件（app_data\RadUploadTemp ) 的大小为 0 字节。因此，当我按下提交按钮时，在我的工作目录中复制的文件无效并且无法读取。您可以在 Telerik 演示页面上自行测试。

[http://demos.telerik.com/aspnet-ajax/asyncupload/examples/additionalfields/defaultcs.aspx](http://demos.telerik.com/aspnet-ajax/asyncupload/examples/additionalfields/defaultcs.aspx)

当我从手机上传此页面上的文件时，文件大小始终为 0...所以从那里我知道这不是我的代码，而是控件和移动浏览器之间的东西。

我在 Telerik 论坛上问过我的问题，但我还没有得到任何答案。

有人知道移动浏览器是否有限制使用 RadAsyncUpload 控件上传文件

顺便说一句，RadAsyncUpload 控件首先使用 html5 File API，如果浏览器无法使用它，控件将尝试使用 flash/silverlight。如果仍然无法正常工作，它将使用标准 IFrame 模块上传文件。这里有一些关于控件的文档[http://www.telerik.com/help/aspnet-ajax/asyncupload-overview.html](http://www.telerik.com/help/aspnet-ajax/asyncupload-overview.html)

我想知道其他人是否可以在演示页面上对其进行测试，并让我知道它是否有效。如果没有，任何人都可以从手机上传文件的替代解决方案？

谢谢 ！

塞巴斯蒂安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:42:23.500

这是在Android上解决问题的代码。我无法把它放在我的评论中。

Telerik.Web.UI.RadAsyncUpload.Modules.Flash.isAvailable = function () { return false; }; Telerik.Web.UI.RadAsyncUpload.Modules.FileApi.isAvailable = function() {return false; }; Telerik.Web.UI.RadAsyncUpload.Modules.Silverlight.isAvailable = function() {return false; };

我只是添加了一种 If (android) 做代码

干杯！

# r - 在R中计算净距离（欧几里得距离）

> ID：16192483
> 
> 赞同：1
> 
> 时间：2013-04-24T12:50:04.833
> 
> 标签：r, euclidean-distance

我之前曾询问过在 R 中计算欧几里得距离并获得了很大帮助。现在，我需要计算从第一个点到轨迹数据中所有其他点的欧几里得距离。这是我的数据的样子：

```
dput(head(t1))
structure(list(A = c(0L, 0L, 0L, 0L, 0L, 0L), T = 0:5, X = c(668L, 
668L, 668L, 668L, 668L, 668L), Y = c(259L, 259L, 259L, 259L, 
259L, 259L), V = c(NA, 0, 0, 0, 0, 0)), .Names = c("A", "T", 
"X", "Y", "V"), row.names = c(NA, 6L), class = "data.frame") 
```

SimonO101 非常棒地给了我一个代码，该代码将计算每条轨道从起始位置到最终位置的欧几里得距离：

```
## Split the data
dfs <- split(t1,t1$A)

## Find hypotenuse between first and last rows for each A
lapply( dfs , function(x){
  j <- nrow(x)
  str <- x[1,c("X","Y")]
  end <- x[j,c("X","Y")]
  dist <- sqrt( sum( (end - str)^2 ) )
  return( dist )
} ) 
```

如何编辑代码，使其不仅具有从开始到结束的欧几里得距离，而且从每个 X、Y 位置开始？再次感谢！

编辑：还有：如何将结果可视化为矩阵。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:05:55.573

一个可能的解决方案：

```
f <- function(x) {
j <- nrow(x)
end <- as.numeric(x[j,c("X","Y")])
x <- x[-j,c("X", "Y")]
dist <- colSums((t(x)-end)^2)
dist
}
lapply(dfs, f) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T13:16:45.563

我会使用包`dist`中的功能`stats`。您可以轻松地将其应用于您的数据：

```
lapply( dfs , function(x) dist( x[,c("X","Y")] , diag = TRUE )[1:nrow(x)] ) 
```

这个想法是我们对每个数据帧进行操作，将`dist`函数应用于每个数据帧的`"X"`和`"Y"`列。末尾的子集 ( `[1:nrow(x)]`) 用于仅返回第一个点与所有其他点之间的距离。如果您想要每个轨道的完整距离矩阵，请删除此子集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-10T13:58:02.270

是否可以直接在函数中计算欧几里得距离？

例如，使用此函数，我试图计算观测值之间最长 8 m 的距离，但我想添加一个条件，即仅计算来自同一组的观测值之间的距离？我的观察是来自不同地块（11 个地块，2000 棵树）的 x,y 位置坐标的树。

```
`search_dfixed <- function(id, x, y, dist) {
.class <- if (class(id) == "factor") {
"character"
 } else {
 class(id)
 }

 m <- as.matrix (dist(data.frame(x, y)))

 rownames(m) <- id; colnames(m) <- id

 z <- as.data.frame(m) %>%
 tibble::as_tibble() %>%
 dplyr::mutate(id = id) %>%
 tidyr::gather(competitor, .dist, -id) %>%
 dplyr::filter(
  .dist != 0,
  .dist <= dist
  ) %>%
  dplyr::arrange(id, .dist) %>%
  dplyr::mutate(
  id = 'class<-'(id, .class),
  competitor = 'class<-'(competitor, .class)
  )

  return(z)
  }` 
```

# ruby-on-rails - 无法使用嵌套形式批量分配属性

> ID：16192485
> 
> 赞同：0
> 
> 时间：2013-04-24T12:50:08.113
> 
> 标签：ruby-on-rails, nested-form-for

我有 2 个表格，一个订单表格和一个产品表格。我希望产品表格位于订单表格下。我收到此错误：无法批量分配受保护的属性：products_attributes。

这是我的订单模型

> 类 Order < ActiveRecord::Base attr_accessible :comments, :due_date, :order_type, :print_color, :print_location, :title, :products
> 验证 :order_type, :due_date, :print_color, :title, :presence => true
> 验证 :title, :uniqueness => true
> has_many :products
> accept_nested_attributes_for :products, :allow_destroy => true
> end

产品型号

> 类 Product < ActiveRecord::Base
> attr_accessible :quantity
> has_one :order
> end

订单控制器：

```
>class OrdersController < ApplicationController
  # GET /orders
  # GET /orders.json
  def index
    @orders = Order.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @orders }
    end
  end

  # GET /orders/1
  # GET /orders/1.json
  def show
    @order = Order.find(params[:id])
    @products = @order.products.find(:all)

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @order }
    end
  end

  # GET /orders/new
  # GET /orders/new.json
  def new
    @order = Order.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @order }
    end
  end

  # GET /orders/1/edit
  def edit
    @order = Order.find(params[:id])
  end

  # POST /orders
  # POST /orders.json
  def create
    @order = Order.new(params[:order])
    respond_to do |format|
      if @order.save
        format.html { redirect_to @order, notice: 'Order was successfully created.' }
        format.json { render json: @order, status: :created, location: @order }
      else
        format.html { render action: "new" }
        format.json { render json: @order.errors, status: :unprocessable_entity }
      end
    end
  end

  # PUT /orders/1
  # PUT /orders/1.json
  def update
    @order = Order.find(params[:id])

    respond_to do |format|
      if @order.update_attributes(params[:order])
        format.html { redirect_to @order, notice: 'Order was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @order.errors, status: :unprocessable_entity }
      end
    end
  end
  # DELETE /orders/1
  # DELETE /orders/1.json
  def destroy
    @order = Order.find(params[:id])
    @order.destroy

    respond_to do |format|
      format.html { redirect_to orders_url }
      format.json { head :no_content }
    end
  end
end 
```

任何帮助，将不胜感激！提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T12:56:21.210

代替：

```
 attr_accessible ..., :products 
```

和：

```
 attr_accessible ..., :products_attributes 
```

# c# - 使用 SyntaxNode.ReplaceNode 替换同一棵树中的多个节点

> ID：16192488
> 
> 赞同：6
> 
> 时间：2013-04-24T12:50:23.037
> 
> 标签：c#, roslyn

我目前正在使用 Roslyn 对语法树进行三向合并。我在一个节点上的所有子节点之间都有一个匹配`ClassDeclerationSyntax`，并且想要对子节点执行合并，然后基于该合并创建一个新树。

O 是输入`ClassDeclerationSyntax`，匹配有三个类型的成员（A，O，B）`MemberDeclerationSyntax`。

```
var updated = O;
foreach (var m in matching)
{
    if (m.A != null && m.B != null && m.O != null) {
        var merge = Merge(m.A, m.O, m.B);
        var oldUpdated = updated;
        updated = updated.ReplaceNode(m.O, merge);
    }
    else if (m.A == null && m.O == null && m.B != null)
        updated = updated.AddMembers(m.B);
    else if (m.A != null && m.O == null && m.B == null)
        updated = updated.AddMembers(m.A);
} 
```

这不起作用。在第二次迭代中`ReplaceNode`返回一个完全未修改的节点（`oldUpdated == updated`is `true`）。

似乎在循环的第一次迭代之后，所有子对象都已被重建为新对象，而我匹配中存储的原始子对象对象不再可以在子列表中找到（`updated.ChildNodes().Where(x => x == m.O)`为空）。

这样做的好方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-24T12:56:23.760

我目前的做法：

```
var updateMember = new Dictionary<MemberDeclarationSyntax, MemberDeclarationSyntax>();
var addMembers = new List<MemberDeclarationSyntax>();

foreach (var m in matching) {
    if (m.A != null && m.B != null && m.O != null) {
        var mergeChild = Merge(m.A, m.B, M.O);
        updateMember.Add(m.O, child);
    }
    else if (m.A == null && m.O == null && m.B != null) 
        addMembers.Add(m.B);
    else if (m.A != null && m.O == null && m.B == null)
        addMembers.Add(m.A);
}

var merged = O.ReplaceNodes(updateMember.Keys.AsEnumerable(), (n1, n2) =>
{
    return updateMember[n1];
}).AddMembers(addMembers.ToArray()); 
```

# xml - Aeroo 报告：生成报告“Prueba”时出错。需要开始标记，未找到“<”，第 1 行，第 1 列

> ID：16192493
> 
> 赞同：0
> 
> 时间：2013-04-24T12:50:35.950
> 
> 标签：xml, report, openerp

我在 OpenERP 6.1 上安装了报告 aeroo 模块，当我尝试打印示例报告时，出现此错误：

```
Aeroo Reports: Error while generating the report "Prueba".
Start tag expected, '<' not found, line 1, column 1 
```

我在修订版 nº 4 中有“aeroo”分支

我在修订版 nº 5 中有“aeroolib”分支

这是日志：

```
2013-04-24 11:48:57,393 12991 WARNING ? openerp.loglevels: notifyChannel API shouldn't be used anymore, please use the standard `logging` module instead.
No LSB modules are available.
2013-04-24 11:48:57,509 12991 ERROR ? openerp.loglevels.deprecated.report_aeroo: [01]:
2013-04-24 11:48:57,509 12991 ERROR ? openerp.loglevels.deprecated.report_aeroo: [02]: Environment Information :
2013-04-24 11:48:57,509 12991 ERROR ? openerp.loglevels.deprecated.report_aeroo: [03]: System : Linux-3.0.0-32-generic-x86_64-with-Ubuntu-11.10-oneiric
2013-04-24 11:48:57,509 12991 ERROR ? openerp.loglevels.deprecated.report_aeroo: [04]: OS Name : posix
2013-04-24 11:48:57,509 12991 ERROR ? openerp.loglevels.deprecated.report_aeroo: [05]: Distributor ID:  Ubuntu
2013-04-24 11:48:57,509 12991 ERROR ? openerp.loglevels.deprecated.report_aeroo: [06]: Description: Ubuntu 11.10
2013-04-24 11:48:57,510 12991 ERROR ? openerp.loglevels.deprecated.report_aeroo: [07]: Release: 11.10
2013-04-24 11:48:57,510 12991 ERROR ? openerp.loglevels.deprecated.report_aeroo: [08]: Codename:    oneiric
2013-04-24 11:48:57,510 12991 ERROR ? openerp.loglevels.deprecated.report_aeroo: [09]: Operating System Release : 3.0.0-32-generic
2013-04-24 11:48:57,510 12991 ERROR ? openerp.loglevels.deprecated.report_aeroo: [10]: Operating System Version : #51-Ubuntu SMP Thu Mar 21 15:50:59 UTC 2013
2013-04-24 11:48:57,510 12991 ERROR ? openerp.loglevels.deprecated.report_aeroo: [11]: Operating System Architecture : 64bit
2013-04-24 11:48:57,510 12991 ERROR ? openerp.loglevels.deprecated.report_aeroo: [12]: Operating System Locale : es_ES.UTF-8
2013-04-24 11:48:57,510 12991 ERROR ? openerp.loglevels.deprecated.report_aeroo: [13]: Python Version : 2.7.2+
2013-04-24 11:48:57,510 12991 ERROR ? openerp.loglevels.deprecated.report_aeroo: [14]: OpenERP-Server Version : 6.1
2013-04-24 11:48:57,510 12991 ERROR ? openerp.loglevels.deprecated.report_aeroo: [15]: Report generation error!
2013-04-24 11:48:57,511 12991 ERROR ? openerp.loglevels.deprecated.report_aeroo: [16]: Traceback (most recent call last):
2013-04-24 11:48:57,511 12991 ERROR ? openerp.loglevels.deprecated.report_aeroo: [17]: File "/home/jorge-hernan/openerp/dev/server/openerp/addons/report_aeroo/report_aeroo.py", line 439, in create_aeroo_report
2013-04-24 11:48:57,511 12991 ERROR ? openerp.loglevels.deprecated.report_aeroo: [18]: data = basic.generate(**oo_parser.localcontext).render().getvalue()
2013-04-24 11:48:57,511 12991 ERROR ? openerp.loglevels.deprecated.report_aeroo: [19]: File "/usr/local/lib/python2.7/dist-packages/aeroolib-1.0.0.RC4-py2.7.egg/aeroolib/plugins/base.py", line 51, in render
2013-04-24 11:48:57,511 12991 ERROR ? openerp.loglevels.deprecated.report_aeroo: [20]: return self.serializer(self.events)
2013-04-24 11:48:57,511 12991 ERROR ? openerp.loglevels.deprecated.report_aeroo: [21]: File "/usr/local/lib/python2.7/dist-packages/aeroolib-1.0.0.RC4-py2.7.egg/aeroolib/plugins/opendocument.py", line 1203, in __call__
2013-04-24 11:48:57,511 12991 ERROR ? openerp.loglevels.deprecated.report_aeroo: [22]: content = TContent(serialized_stream)
2013-04-24 11:48:57,511 12991 ERROR ? openerp.loglevels.deprecated.report_aeroo: [23]: File "/usr/local/lib/python2.7/dist-packages/aeroolib-1.0.0.RC4-py2.7.egg/aeroolib/plugins/opendocument.py", line 809, in __init__
2013-04-24 11:48:57,511 12991 ERROR ? openerp.loglevels.deprecated.report_aeroo: [24]: self.tree = lxml.etree.parse(StringIO(content))
2013-04-24 11:48:57,512 12991 ERROR ? openerp.loglevels.deprecated.report_aeroo: [25]: File "lxml.etree.pyx", line 2942, in lxml.etree.parse (src/lxml/lxml.etree.c:54187)
2013-04-24 11:48:57,512 12991 ERROR ? openerp.loglevels.deprecated.report_aeroo: [26]: File "parser.pxi", line 1545, in lxml.etree._parseDocument (src/lxml/lxml.etree.c:79661)
2013-04-24 11:48:57,512 12991 ERROR ? openerp.loglevels.deprecated.report_aeroo: [27]: File "parser.pxi", line 1573, in lxml.etree._parseMemoryDocument (src/lxml/lxml.etree.c:79932)
2013-04-24 11:48:57,512 12991 ERROR ? openerp.loglevels.deprecated.report_aeroo: [28]: File "parser.pxi", line 1452, in lxml.etree._parseDoc (src/lxml/lxml.etree.c:78774)
2013-04-24 11:48:57,512 12991 ERROR ? openerp.loglevels.deprecated.report_aeroo: [29]: File "parser.pxi", line 960, in lxml.etree._BaseParser._parseDoc (src/lxml/lxml.etree.c:75389)
2013-04-24 11:48:57,512 12991 ERROR ? openerp.loglevels.deprecated.report_aeroo: [30]: File "parser.pxi", line 564, in lxml.etree._ParserContext._handleParseResultDoc (src/lxml/lxml.etree.c:71739)
2013-04-24 11:48:57,512 12991 ERROR ? openerp.loglevels.deprecated.report_aeroo: [31]: File "parser.pxi", line 645, in lxml.etree._handleParseResult (src/lxml/lxml.etree.c:72614)
2013-04-24 11:48:57,512 12991 ERROR ? openerp.loglevels.deprecated.report_aeroo: [32]: File "parser.pxi", line 585, in lxml.etree._raiseParseError (src/lxml/lxml.etree.c:71955)
2013-04-24 11:48:57,513 12991 ERROR ? openerp.loglevels.deprecated.report_aeroo: [33]: XMLSyntaxError: Start tag expected, '<' not found, line 1, column 1
2013-04-24 11:48:57,514 12991 ERROR ? openerp.service.web_services: Exception: (u'Aeroo Reports: Error while generating the report "Prueba".', XMLSyntaxError(u"Start tag expected, '<' not found, line 1, column 1",))
Traceback (most recent call last):
  File "/home/jorge-hernan/openerp/dev/server/openerp/service/web_services.py", line 727, in go
    (result, format) = obj.create(cr, uid, ids, datas, context)
  File "/home/jorge-hernan/openerp/dev/server/openerp/addons/report_aeroo/report_aeroo.py", line 713, in create
    return fnct(cr, uid, ids, data, report_xml, context)
  File "/home/jorge-hernan/openerp/dev/server/openerp/addons/report_aeroo/report_aeroo.py", line 656, in create_source_odt
    return self.create_single_pdf(cr, uid, ids, data, report_xml, context)
  File "/home/jorge-hernan/openerp/dev/server/openerp/addons/report_aeroo/report_aeroo.py", line 497, in create_single_pdf
    return self.create_aeroo_report(cr, uid, ids, data, report_xml, context=context, output=output)
  File "/home/jorge-hernan/openerp/dev/server/openerp/addons/report_aeroo/report_aeroo.py", line 448, in create_aeroo_report
    raise osv.except_osv(_('Aeroo Reports: Error while generating the report "%s".') % report_xml.name, e)
except_osv: (u'Aeroo Reports: Error while generating the report "Prueba".', XMLSyntaxError(u"Start tag expected, '<' not found, line 1, column 1",))
2013-04-24 11:48:58,333 12991 ERROR ? openerp.netsvc: Aeroo Reports: Error while generating the report "Prueba".
Start tag expected, '<' not found, line 1, column 1 
```

任何人都可以帮助我吗？

谢谢 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:02:56.100

如错误所示，您的某些或某些循环标签中缺少“<”此起始标签，请检查您的代码。

# controls - 根据控件的名称值属性进行单击事件

> ID：16192499
> 
> 赞同：0
> 
> 时间：2013-04-24T12:50:54.710
> 
> 标签：controls, screen, testcomplete

我正在使用 TestComplete 来实现 QA 流程的自动化。

TestComplete 根据鼠标在屏幕上的位置检测点击事件。但是当我在不同的机器（更大/更小的屏幕）上运行相同的测试时，鼠标按钮不会点击正确的位置。

因此我想知道是否有一种方法可以根据控件的名称（即按钮的名称）搜索控件，然后运行脚本以单击该特定单词（或位置）。

任何帮助表示赞赏:)

**额外细节**

这是由 TestComplete 生成的示例脚本，用于单击网页上的搜索按钮。

```
Sub Test6()
  'Opens the specified URL in a running instance of the specified browser.
  Call Browsers.Item(btIExplorer).Navigate("http://www.simplyrecipes.com/search/?cx=003084314295129404805%3Ai2-mkfc4cai&cof=FORID%3A11&q=&sa.x=48&sa.y=16")
  'Clicks at point (173, 10) of the 'textboxQ' object.
  Call Aliases.browser.pageHttpWwwSimplyrecipesComSearc.panelPage.headerMasthead.group.panelSiteSearch.formSearchbox0030843142951294048.textboxQ.Click(173, 10)
  'Sets the text 'asd' in the 'textboxQ' text editor.
  Call Aliases.browser.pageHttpWwwSimplyrecipesComSearc.panelPage.headerMasthead.group.panelSiteSearch.formSearchbox0030843142951294048.textboxQ.SetText("asd")
  'Clicks at point (57, 12) of the 'imagebuttonSa' object.
  Call Aliases.browser.pageHttpWwwSimplyrecipesComSearc.panelPage.headerMasthead.group.panelSiteSearch.formSearchbox0030843142951294048.imagebuttonSa.Click(57, 12)
End Sub 
```

这是 RecordTest 窗口中捕获的按钮单击事件

![在此处输入图像描述](https://i.stack.imgur.com/sllPu.jpg)

**我想知道的是，有没有一种方法可以指定控件名称（即“搜索”或“imagebuttonSa”），所以 TestComplete 将在给定的 GUI 中搜索名称，然后一旦找到，就进行点击事件关于这个词**。

我使用 Windows 7 64 位操作系统、TestComplete 9 试用版和 VBScript 作为脚本语言。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-19T09:46:26.273

```
Whenever I have a problem with not finding an object with TC I use one of this functions or a combination of them.

In case you have the table object (parent of the cell you want to click):
function clickCellByText(text,tablePath)
{   
  var table = tablePath;
  if (!table.Exists)
  {
    Log.Error("A table with the following text cannot be found: " + table);
  }
  clickCell1(table, "*Cell*", "*Cell*");

  function clickCell1(table, idText, linkText)
  {
    var propArray = new Array("innerText", "ObjectType");
    var valArray = new Array(text,"Cell*");
    var idCell = table.FindChild(propArray, valArray, 20000);
    if (idCell.Exists)
    { 
      // Row found, find the link in the same row      
      idCell.Click(); 
    }
    else  
    {
      Log.Error("A cell with the following text cannot be found: " + text);
    }
  }
}

If you want to find the object or the parent of the object by any property:

function clickComponent(property,text)
{ 
   // Using the Find method 
   var myObj = Sys.Browser("iexplore").Page("*").NativeWebObject.Find(property,text);
   // Checks if the button exists 
   if (myObj.Exists)
   { 
      myObj.Click();     
   }
   else
     Log.Error("Can't find the object","");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-19T21:18:51.063

如果您不指定坐标，它将单击对象的中心。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-26T11:15:31.380

据我所见， TestComplete 已经在您的情况下适用于特定的控件/对象：**textboxQ**和**imagebuttonSa**。[这两个名称由名称映射](http://support.smartbear.com/viewarticle/31493/)功能赋予对象，您可以随意更改它们。

至于坐标，这些坐标与对应控件的左上角相关（**textboxQ**或**imagebuttonSa**）。如果需要，您可以从动作参数中删除坐标（例如 .. **.imagebuttonSa.Click()**），TestComplete 将单击控件的中心点。

如果您在回放测试时遇到任何问题并且无法找出这些问题的原因，您最好的选择是[联系](http://support.smartbear.com/message/?prod=TestComplete)SmartBear 支持团队，详细解释发生的情况。将带有失败结果日志的项目发送给他们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-05T09:17:04.050

您可以尝试使用按钮所在的对象名称映射执行 FindChild 或 Find，使用属性（例如：ObjectType 作为按钮和按钮标题以及所需的按钮标题），一旦 FindChild 找到具有上述指定属性的按钮，您可以使用它点击它的对象：

`var button = ParentObj.FindChild(["ObjectType","Caption"],["Button","OK"],10); if(button.Exists) button.Click()`

# python - 如何在python中打印当前执行文件的文件名？

> ID：16192500
> 
> 赞同：1
> 
> 时间：2013-04-24T12:50:54.670
> 
> 标签：python, file, filenames

我目前正在运行一个脚本，该脚本在执行时会转到多个其他 python 文件。我的目标是在 python 中打印当前正在执行的文件的文件名？

我尝试使用：

```
print __file__ 
```

但是抛出了以下错误：

```
Traceback (most recent call last):
  File "C:\Users\qksr\Desktop\work\parsing text\testcase.py", line 32, in <module>
    print __file__
NameError: name '__file__' is not defined 
```

那么我应该编写什么语句？

# python - 鼻子工具中的 assert_raises() 并没有真正起作用

> ID：16192502
> 
> 赞同：1
> 
> 时间：2013-04-24T12:51:04.833
> 
> 标签：python, python-2.7, nosetests

好的，问题来了：在Zed Shaw 的“Learn Python the Hard Way”的[练习 49](http://learnpythonthehardway.org/book/ex49.html)`assert_raises()`中，我们需要使用. 这是我正在测试的功能，如果省略该`assert_raises()`部分，它会通过测试：

```
def parse_verb(word_list):
    skip(word_list, 'stop')

    if peek(word_list) == 'verb':
        return match(word_list, 'verb')
    else:
        raise ParserError("Expected a verb next.") 
```

这是测试功能和臭名昭著的`assert_raises()`行：

```
def parse_verb_test():
    vrb_list = [('of', 'stop'), ('from', 'stop'), ('go', 'verb'), ('north', 'direction')]
    assert_equal(parse_verb(vrb_list), ('go', 'verb'))
    assert_equal(vrb_list, [('north', 'direction')])
    assert_raises(ParserError, parse_verb, vrb_list) 
```

它给了我以下输出：

```
.........E...
======================================================================
ERROR: tests.parser_tests.parse_verb_test
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/nose/case.py", line 197, in runTest
    self.test(*self.arg)
  File "/Users/vsevolod/Repositories/ex48/tests/parser_tests.py", line 20, in parse_verb_test
    assert_raises(ParserError, parse_verb, vrb_list)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/unittest/case.py", line 471, in assertRaises
    callableObj(*args, **kwargs)
  File "/Users/vsevolod/Repositories/ex48/ex48/parser.py", line 40, in parse_verb
    raise ParserError("Expected a verb next.")
TypeError: object.__new__() takes no parameters

----------------------------------------------------------------------
Ran 13 tests in 0.042s

FAILED (errors=1) 
```

我还尝试摆脱这`assert_raises()`条线并使用`@raises(ParserError)`before 函数。它也不太有效，并产生了相同的输出。

像这样创建一个单独的测试有助于消除错误：

```
def parse_verb_fail():
    fail_list = [('north', 'direction'), ('go', 'verb')]
    assert_raises(ParserError, parse_verb, fail_list) 
```

但现在测试被简单地忽略了。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T13:15:34.483

我相信你的问题是它`ParserError`没有一个接受字符串的构造函数（或者`ParserError`没有扩展`Exception`并试图将字符串传递给基础对象的 init 方法......）。因此，当您尝试创建时，`ParserError`您得到的是 a`TypeError`而不是`ParserError`. 因为你`assert_raises()`没有预料到`TypeError`它没有抓住它。

编辑：

查看您链接并玩弄的示例代码。你确定你有...

```
class ParserError(Exception): pass 
```

...并不是...

```
class ParserError(object): pass 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-14T16:19:29.110

Zed Shaw 的 Learn Python the Hard Way 仍然是一个很好的资源，所以也许我的贡献会有所帮助。

parse_verb_fail 函数被忽略的原因是鼻子测试函数的名称中必须有“test_”，或者正如[文档](https://nose.readthedocs.io/en/latest/writing_tests.html)所说的那样：

> 任何与配置的 testMatch 正则表达式匹配的函数或类 ((?:^|[\b_\.-])[Tt]est 默认情况下 - 即在单词边界处具有 test 或 Test 或在 - 或 _ 之后并且生活在一个也匹配该表达式的模块中，将作为测试运行。

这是我的解决方案：

```
def test_parse_errors():
    subject_fail_list = [('stop', 'the'), ('direction', 'north')]
    assert_raises(parser.ParseError, parser.parse_subject, subject_fail_list) 
```

鼻子会运行这个测试，它会通过。将其中一个元组更改为 ('noun', 'john') 将导致测试失败，因为 parse_subject 正在寻找 'noun'。

# android - 以编程方式构建 xml 相对布局

> ID：16192503
> 
> 赞同：0
> 
> 时间：2013-04-24T12:51:05.643
> 
> 标签：android, xml, android-relativelayout

我正在尝试在运行时更新/填充 xml。textViews 显示得很好，但似乎无法在第一项之后正确定位它们（​​请参阅 else 语句）。是因为`getId()`不被认可还是我完全错了？

```
for(int x=1; x<13; x++){
    String prompt="PROMPT_"+String.valueOf(x);
    String promptValue = myTacorCursor.getString(myTacorCursor.getColumnIndex(prompt));
    //if not empty draw a row
    if (!promptValue.equals("")){
        //insert new rows into layout
        RelativeLayout myLayout = (RelativeLayout) findViewById(R.id.RelativeLayout1);
        TextView promptLabel = new TextView(this);
        promptLabel.setTextAppearance(this, android.R.style.TextAppearance_DeviceDefault_Large);
        promptLabel.setText(myTacorCursor.getString(myTacorCursor.getColumnIndex("PROMPT_"+String.valueOf(x))));                
        promptLabel.setId(1);
        ((RelativeLayout) myLayout).addView(promptLabel);

        RelativeLayout.LayoutParams mLayoutParams1=(RelativeLayout.LayoutParams)promptLabel.getLayoutParams();
        mLayoutParams1.addRule(RelativeLayout.ALIGN_PARENT_LEFT);
        if (i==1){
            mLayoutParams1.addRule(RelativeLayout.BELOW,R.id.textView7);
            Log.w("ID is:", String.valueOf(promptLabel.getId()));
        } else{                 
            mLayoutParams1.addRule(RelativeLayout.BELOW,promptLabel.getId());
            Log.w("ID is:", String.valueOf(promptLabel.getId()));
        }
    i++;
    }
} 
```

我正在尝试显示：

```
(textView)LABEL xx R.id.textview7
<-- here would be the inserted columns -->
(text view) prompt 1 
(text view) prompt 2
(text view) prompt 3
... etc ...' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:27:02.330

动态设置 id 是可以的。只需多加注意，您的代码就可以工作。

1.  就您而言`for`，最好只在一个地方增加索引。
2.  更改`LayoutParams`后，`View`您需要将其重新设置：`promptLabel.setLayoutParams(layoutParams)`

尝试这个。它应该工作：

```
public class MainActivity extends Activity {

    private static final int BASE_ID = 1;
    private static final int ITEMS_COUNT = 13;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        RelativeLayout rootLayout = (RelativeLayout) findViewById(R.id.root);

        for (int index = BASE_ID; index < ITEMS_COUNT; index++) {
            String prompt = "PROMPT_" + String.valueOf(index);
            // if not empty draw a row
            // insert new rows into layout
            TextView promptLabel = new TextView(this);
            promptLabel.setTextAppearance(this,
                    android.R.style.TextAppearance_DeviceDefault_Large);
            promptLabel.setText(prompt);
            promptLabel.setId(index);
            rootLayout.addView(promptLabel);

            RelativeLayout.LayoutParams layoutParams = (RelativeLayout.LayoutParams) promptLabel
                    .getLayoutParams();
            layoutParams.addRule(RelativeLayout.ALIGN_PARENT_LEFT);
            if (index == BASE_ID) {
                layoutParams.addRule(RelativeLayout.BELOW, R.id.top);
                Log.d("ID is:", String.valueOf(index));
            } else {
                layoutParams.addRule(RelativeLayout.BELOW, index - 1);
                Log.d("ID is:", String.valueOf(index - 1));
            }
            promptLabel.setLayoutParams(layoutParams);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T13:44:48.273

您不需要以编程方式构建整个布局。在单独的布局`xml`文件中定义它，然后使用布局充气器对其进行充气。之后将其添加到您想要的位置。

我从未见过`id`s 以编程方式分配，但根据我的建议，您可以像往常一样在 xml 中定义它们。

PS：[这](https://stackoverflow.com/a/5027921/1108032)是一个很好的例子来解释如何使用[`LayoutInflater`](http://developer.android.com/reference/android/view/LayoutInflater.html).

# plsql - 使用 IF 语句 SSRS 2005 的条件 WHERE 子句

> ID：16192505
> 
> 赞同：1
> 
> 时间：2013-04-24T12:51:05.540
> 
> 标签：plsql, reporting-services, reportingservices-2005

我在使用 SSRS 时遇到了一些问题，我认为这应该是非常基本的。我已经看到了一些关于 IIF 声明和其他声明的答案，但没有完全解决这个问题。

我是 SSRS 的新手，所以我不确定您可以在使用 PLSQL 的数据部分中使用什么代码/语法。

我想要做的就是有一个基于参数是否为空的 if 语句。我尝试了各种语法，但它不断抛出错误。有什么建议么？

就像是：

```
IF (:start_date IS NULL) THEN

SELECT wo.wonum, wo.worktype, wo.description wo_description, wo.targcompdate, wo.assetnum,         
s.siteid, s.description s_description, 
round((wo.targcompdate - sysdate), 0) DaysTillDue
FROM workorder wo
INNER JOIN site s on wo.siteid = s.siteid
WHERE 
(wo.targcompdate - sysdate) >= :Low_Day
and (wo.targcompdate - sysdate) <= :High_Day
and wo.siteid = :site_param
and wo.worktype = :worktype_param; 

ELSE

SELECT wo.wonum, wo.worktype, wo.description wo_description, wo.targcompdate,   wo.assetnum,         
s.siteid, s.description s_description, 
round((wo.targcompdate - sysdate), 0) DaysTillDue
FROM workorder wo
INNER JOIN site s on wo.siteid = s.siteid
WHERE 
(wo.targcompdate - sysdate) >= :Low_Day
and (wo.targcompdate - sysdate) <= :High_Day
and wo.siteid = :site_param
and wo.worktype = :worktype_param
and targcompdate between :start_date and :end_date; 

END; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:59:50.677

您*可以*使用动态 SQL 表达式（尽管由于 SQL 注入等考虑因素，通常不推荐使用这些表达式），但鉴于两个查询之间的唯一区别是附加的最终条件，我建议改用以下查询：

```
SELECT wo.wonum, wo.worktype, wo.description wo_description, wo.targcompdate, 
       wo.assetnum, s.siteid, s.description s_description, 
       round((wo.targcompdate - sysdate), 0) DaysTillDue
FROM workorder wo
INNER JOIN site s on wo.siteid = s.siteid
WHERE (wo.targcompdate - sysdate) >= :Low_Day
  and (wo.targcompdate - sysdate) <= :High_Day
  and wo.siteid = :site_param
  and wo.worktype = :worktype_param
  and (:start_date is NULL or targcompdate between :start_date and :end_date) 
```

# android - 如何对对话执行触觉反馈？

> ID：16192508
> 
> 赞同：2
> 
> 时间：2013-04-24T12:51:11.227
> 
> 标签：android, android-view, android-dialog

我想在用户按下对话框上的项目时执行触觉反馈。我不能使用视图的方法：

```
view.performHapticFeedback(HapticFeedbackConstants.VIRTUAL_KEY); 
```

因为我手中没有视图（仅限活动）

我能做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T13:03:09.713

您可以编写自己的类来扩展 Dialog 和/或 DialogFragment。

并添加按钮回调（或您想要执行振动的任何地方）

```
Vibrator v = (Vibrator)getSystemService(Context.VIBRATOR_SERVICE);
v.vibrate(250); 
```

您还需要`android.permission.VIBRATE`在清单中添加权限。

为了仅在用户未在其手机的常规设置中禁用触觉反馈时振动，您可以通过以下方式获得他的选择：

```
Settings.System.getInt(Context.getContentResolver(),                                    
                       Settings.System.HAPTIC_FEEDBACK_ENABLED, 0); 
```

# ruby - Rubyvis：下标/上标

> ID：16192512
> 
> 赞同：1
> 
> 时间：2013-04-24T12:51:19.550
> 
> 标签：ruby, plot, protovis

我正在考虑使用[Protovis](http://rubyvis.rubyforge.org/)库的 Ruby 端口 Rubyvis 来为科学出版物生成图表。Rubyvis 将图表呈现为 SVG 文件。但是，我还没有找到在文本中使用下标或上标的方法（例如图表标题或轴标签）。

[Label 类的文档](http://rubyvis.rubyforge.org/rubyvis/Rubyvis/Label.html)指出：

> 字符数据必须是纯文本（unicode），尽管可以使用*font*属性设置文本样式。如果需要富文本，可以手动将外部 HTML 元素覆盖在画布上。

这听起来像库本身不支持此功能。

有没有办法直接在输出图形文件中获取下标和上标（以及可能的其他富文本），什么时候不嵌入网站？

# c++ - 将 jpeg 从缓冲区调整为另一个缓冲区

> ID：16192513
> 
> 赞同：2
> 
> 时间：2013-04-24T12:51:23.057
> 
> 标签：c++, jpeg, image-resizing

我阅读了与此类似的其他问题/答案，但它们要么：

*   读/写 jpeg 文件
*   使用 .NET

就我而言，我有一个包含 jpeg 的缓冲区（在本例中为 unsigned char*）。这意味着它看起来像这样：

```
FF D8 FF E0 ... 
```

并不是

```
my_image.jpg 
```

我想找到一个库来调整这个 jpeg 的大小并将输出放在另一个缓冲区中。

例子 ：

```
SuperLibrary::resize_jpeg(jpeg_buffer, resized_jpeg_buffer, 640, 480); 
```

甚至 ：

```
SuperLibrary::Image my_jpeg = SuperLibray::Image(jpeg_buffer);
my_jpeg.resize(640,480);
my_jpeg.write(resized_jpeg_buffer); 
```

另外，我想要一些非常简单的东西。CImg 起初看起来很完美，但它只能从文件中加载/保存 jpeg。（所以，请不要使用 openCV，除非你能证明我可以在不到一周的时间内通过 CVMatrix 上的文档来调整我的 jpeg 大小）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:26:45.607

`ImageMagick`（更具体地说，与`Magick++`它的绑定）将执行此操作。[这里](http://www.imagemagick.org/Magick++/Image.html#Image%20Manipulation%20Methods)有一些 API 文档。如何做到这一点的一个例子（注意我没有编译这个来检查，所以可能有错误）：

```
#include <Magick++.h> 
#include <iostream> 

using namespace Magick; 

int main(int argc,char **argv) 
{ 
  InitializeMagick(*argv);
  unsigned char* img_data;
  //Fill in img_data

  Blob b(img_data, image_data_len);
  Image img(b); 
  img.resize("640x480");

  Blob resized;
  master.write(resized); 

  unsigned char* img_data_resized = new unsigned_char[resized.length()];
  std::copy(resized.data(), resized.data() + resized.length(), img_data_resized);

  //Do whatever you want with resized image data...

  delete[] img_data_resized;
  return 0; 
} 
```

# mysql - RStatistics：在 MySQL Query 中将日期设置为变量

> ID：16192519
> 
> 赞同：0
> 
> 时间：2013-04-24T12:51:36.620
> 
> 标签：mysql, r, rmysql

通过 RMySQL 连接到数据库我写了一些 R 脚本 - 使它们更容易：是否可以将 MySQL Query 中的日期设置为变量？

例如

```
x<-"2012-12-01"

rs <- dbGetQuery(db,"**** where date between 'x' and '2012-12-31'") 
```

是否有任何可能性或者“”中的所有内容都只是 MySQL 的东西？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T13:33:58.093

用于`paste`动态编写查询：

```
x<-'2012-12-01'
query <-  paste("**** where date between '",x,"' and '2012-12-31'",sep='') 
```

这将创建一个查询，如：

```
"**** where date between '2012-12-01' and '2012-12-31'" 
```

然后

```
 rs <- dbGetQuery(db,query) 
```

# java - 创建哪些类方法？

> ID：16192520
> 
> 赞同：5
> 
> 时间：2013-04-24T12:51:36.633
> 
> 标签：java, class, methods

我正在寻找一个测试应用程序，它可以检查来自航空公司提供商的各种航班信息，我正在努力解决类和方法的概念以及要创建哪些类和方法。我目前的思路是这样的： 数据是从网站下载的，由于数据量大，我只想下载一次。我目前的想法是：

班级

```
BritishAirwaysFlightData() 
```

构造函数

```
BritishAirwaysFlightData // Used to download the BA Flight database and store in the object (Assumging his is only small i.e. 500kb) 
```

方法

```
getStartDate(String source_airport, String dest_airport) // Takes source and destination airport and return date when flights start
getEndDate(String source_airport, String dest_airport)   // Takes source and destination airport and return date when flights finish
getDestAirports(String source_airport)                   // Takes source airport name and returns a list of destinations
getSourceAirports(String dest_airport)                   // Takes source airport name and returns a list of sources
getNumofDestinations()                                   // Returns total number of destinations 
```

希望您能大致了解我正在尝试实现的内容，但我只是不确定它是否正确。我基本上会从类创建一个对象，然后构造函数会自动下载数据并存储在某种合适的对象数组中。

将创建一个主程序以允许用户查询航班信息等。

它将有效地从主程序中查询此对象，以查找有关航班、日期等的特定信息。

考虑到我不想直接访问数据并且我的带宽有限，因此需要实现某种本地缓存版本，这是否是实现此类功能的最佳方式？

我更关心类/构造函数/方法的实际构成，而不是每个方法和调用参数的实际功能。

希望这是有道理的，任何指针都将不胜感激，任何参考网站也有很多像这样的现实世界的例子，这可以改善我对问题的初步分析，

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T13:01:37.473

您概述的方法似乎更适合*服务*。

这个想法是这样的：你想*分离你的关注点*。

一个问题是对数据进行建模。这意味着为您的数据创建一个容器，使用对数据进行操作有意义的方法。如果有意义，您可以创建一个基类`FlightData`和一个子类（如果数据没有从航空公司更改为航空公司，那么您只需要一个通用对象）。查看您的方法，为and`BritishAirwaysFlightData`设置一个类可能是有意义的。`Airport``Flight`

另一个问题是获取您的数据。所以你可能想要一个除了与数据源交互之外什么都不做的类。这些类通常称为数据访问对象 (DAO)。

该服务是另一个类，它将一起使用数据访问类和数据模型类来执行一个工作单元。

所以考虑一下方法`getSourceAirports`，我假设它的意思是“获取航班始发的所有机场”。如果您有一个名为 的数据模型`Flight`，您可以设想该类将具有`departureAirport`和`arrivalAirport`字段（以及其他字段）。要获取源 Airports，您将在数据源中查询 Flight 表（对应于 Flight 类）中找到的所有唯一的 leaveAirports。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T13:03:58.807

您建议的方式可行，但我不推荐它，它的扩展性很差。我同意一次下载数据的概念，但这并不意味着您不能实现丰富的域模型并拥有适当的分层架构。

首先，我建议您为 FlightData 提供一个通用类：

```
public class FlightData {
    private FlightOperator operator;
    ...
} 
```

其中包含特定运营商的航班信息（在您的示例中为 BA）。然后，您可以创建一个服务和 DAO 层来分离应用程序的关注点：

```
public interface FlightDataService {
    public FlightData find(FlightOperator operartor);
    public List<FlightData> find(List<FlightOperator> operartors);
    ...
} 
```

这是另一个详细阐述分层架构的问题：

[DAO 和服务层设计](https://stackoverflow.com/questions/11649786/dao-and-service-layer-design)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T13:19:53.200

与类的概念作斗争是学习面向对象范式的一个自然部分。如果您真的处于入门级别，那么我现在还不会担心 ORM 或 Hibernate 或实体/服务类。

为了帮助制定您想要创建的类的路线图，请仔细考虑您的项目。列举你的设计中涉及的事物的种类，例如。航班、航班运营商、航班时间。制定事物列表确实是类设计中最好、最重要的第一步，因为获得准确而全面的列表将使您能够编写最有用和可扩展的类。

一旦你有了一份清单，请仔细考虑这些事情是如何组织的。哪些事情是独立的，哪些是依赖的，例如。飞行时间取决于航班。依赖的东西，例如。飞行时间，通常是类的属性或字段。独立的事物，例如。航班，经常是班。开发项目中事物之间的关系确实是类设计中至关重要的一步。做对了会让事情变得更容易。

如您所见，项目（事物）中的名词是类和类字段或属性。然后想象你想让你的项目做什么。动词，例如。createScheduleList 是您的方法，它们被写入它们所操作的类中（或者如果它们不依赖于特定事物（或对象）的字段或属性，则被编写为静态方法）。

可以肯定的是，这是非常愚蠢的建议，但我不能足够强烈地强调从良好的类设计基础开始是多么重要。良好、组织良好的课程使您的整个项目的实施变得更加直接。

# eclipse - Maven 依赖项不使用类路径导出？

> ID：16192523
> 
> 赞同：1
> 
> 时间：2013-04-24T12:51:45.553
> 
> 标签：eclipse, maven, gwt, classpath, google-eclipse-plugin

我有一个`GWT`项目并定义了依赖关系`Maven`。

我不使用maven本身来编译和部署，而是`Eclipse Google Plugin`for `GAE`Google App Engine。除了使用 maven 定义的一些依赖项的服务器端代码之外，一切都很好。

例如，我`Google Guava`在客户端和服务器端都使用。

```
<dependency>
    <groupId>com.google.guava</groupId>
    <artifactId>guava</artifactId>
    <version>14.0.1</version>
</dependency>
<dependency>
    <groupId>com.google.guava</groupId>
    <artifactId>guava-gwt</artifactId>
    <version>14.0.1</version>
</dependency> 
```

客户端依赖以某种方式正确解决，可能是通过在 gwt 模块中使用以下语句：

```
 <inherits name="com.google.common.collect.Collect"/> 
```

但是在服务器端类上，我经常得到`java.lang.NoClassDefFoundError`异常，这可能意味着在服务器端找不到库。

我可以通过将所有必需的库复制到 来手动修复它`WEB-INF/lib`，从而解决了这些错误。但是有没有其他方法不必手动将这些库复制到我的战争文件夹中？

我以为我可以定义类路径程序集来导出 Maven 依赖项，例如：

但这并没有改变任何事情。我能做什么？

例外：

```
An IncompatibleRemoteServiceException was thrown while processing this call.
com.google.gwt.user.client.rpc.IncompatibleRemoteServiceException: java.lang.NoClassDefFoundError: com/google/common/base/Function
    at com.google.gwt.user.server.rpc.RPC.decodeRequest(RPC.java:323)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:206)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248)
    at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at com.google.appengine.api.socket.dev.DevSocketFilter.doFilter(DevSocketFilter.java:74)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.ResponseRewriterFilter.doFilter(ResponseRewriterFilter.java:123)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:34)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:63)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.DevAppServerServersFilter.doDirectRequest(DevAppServerServersFilter.java:369)
    at com.google.appengine.tools.development.DevAppServerServersFilter.doDirectServerRequest(DevAppServerServersFilter.java:352)
    at com.google.appengine.tools.development.DevAppServerServersFilter.doFilter(DevAppServerServersFilter.java:115)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:421)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:938)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:755)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)
Caused by: com.google.gwt.user.client.rpc.SerializationException: java.lang.NoClassDefFoundError: com/google/common/base/Function
    at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamReader.deserialize(ServerSerializationStreamReader.java:691)
    at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamReader.readObject(ServerSerializationStreamReader.java:567)
    at com.google.gwt.user.server.rpc.core.java.util.Collection_ServerCustomFieldSerializerBase.deserialize(Collection_ServerCustomFieldSerializerBase.java:38)
    at com.google.gwt.user.server.rpc.core.java.util.ArrayList_ServerCustomFieldSerializer.deserialize(ArrayList_ServerCustomFieldSerializer.java:40)
    at com.google.gwt.user.server.rpc.core.java.util.ArrayList_ServerCustomFieldSerializer.deserializeInstance(ArrayList_ServerCustomFieldSerializer.java:54)
    at com.google.gwt.user.server.rpc.core.java.util.ArrayList_ServerCustomFieldSerializer.deserializeInstance(ArrayList_ServerCustomFieldSerializer.java:33)
    at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamReader.deserializeImpl(ServerSerializationStreamReader.java:859)
    at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamReader.deserialize(ServerSerializationStreamReader.java:662)
    at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamReader.readObject(ServerSerializationStreamReader.java:567)
    at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamReader$ValueReader$8.readValue(ServerSerializationStreamReader.java:140)
    at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamReader.deserializeValue(ServerSerializationStreamReader.java:425)
    at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamReader.deserializeClass(ServerSerializationStreamReader.java:807)
    at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamReader.deserializeImpl(ServerSerializationStreamReader.java:878)
    at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamReader.deserialize(ServerSerializationStreamReader.java:662)
    at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamReader.readObject(ServerSerializationStreamReader.java:567)
    at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamReader$ValueReader$8.readValue(ServerSerializationStreamReader.java:140)
    at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamReader.deserializeValue(ServerSerializationStreamReader.java:425)
    at com.google.gwt.user.server.rpc.RPC.decodeRequest(RPC.java:312)
    ... 40 more

Caused by: java.lang.ClassNotFoundException: com.google.common.base.Function
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at com.google.appengine.tools.development.IsolatedAppClassLoader.loadClass(IsolatedAppClassLoader.java:214)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    ... 72 more

com.google.gwt.user.client.rpc.IncompatibleRemoteServiceException: java.lang.NoClassDefFoundError: com/google/common/base/Function
    at com.google.gwt.user.client.rpc.IncompatibleRemoteServiceException_FieldSerializer.instantiate(IncompatibleRemoteServiceException_FieldSerializer.java:16)
    at com.google.gwt.user.client.rpc.IncompatibleRemoteServiceException_FieldSerializer.create(IncompatibleRemoteServiceException_FieldSerializer.java:25)
    at com.google.gwt.user.client.rpc.impl.SerializerBase.instantiate(SerializerBase.java:115)
    at com.google.gwt.user.client.rpc.impl.ClientSerializationStreamReader.deserialize(ClientSerializationStreamReader.java:396)
    at com.google.gwt.user.client.rpc.impl.AbstractSerializationStreamReader.readObject(AbstractSerializationStreamReader.java:119)
    at com.google.gwt.user.client.rpc.impl.RequestCallbackAdapter.onResponseReceived(RequestCallbackAdapter.java:216)
    at com.google.gwt.http.client.Request.fireOnResponseReceived(Request.java:258)
    at com.google.gwt.http.client.RequestBuilder$1.onReadyStateChange(RequestBuilder.java:412)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessagesWhileWaitingForReturn(BrowserChannelServer.java:338)
    at com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java:219)
    at com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:136)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:571)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNativeObject(ModuleSpace.java:279)
    at com.google.gwt.dev.shell.JavaScriptHost.invokeNativeObject(JavaScriptHost.java:91)
    at com.google.gwt.core.client.impl.Impl.apply(Impl.java)
    at com.google.gwt.core.client.impl.Impl.entry0(Impl.java:242)
    at sun.reflect.GeneratedMethodAccessor60.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessages(BrowserChannelServer.java:293)
    at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:547)
    at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:364)
    at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T13:02:30.863

请参阅[https://developers.google.com/eclipse/docs/faq#gwt_with_maven](https://developers.google.com/eclipse/docs/faq#gwt_with_maven)、[https://code.google.com/p/google-web-toolkit/issues/detail?id=5033](https://code.google.com/p/google-web-toolkit/issues/detail?id=5033)和[http://pgt .de/2012/12/19/gpe-eclipse-and-maven-never-ending-story-done/](http://pgt.de/2012/12/19/gpe-eclipse-and-maven-never-ending-story-done/)

简而言之：这是预期的行为，每次更改依赖项时都必须运行`mvn package`（或类似的东西）。`mvn compile war:exploded`

如果您觉得应该更改它，Google Plugin for Eclipse 的问题跟踪器位于[https://code.google.com/p/google-plugin-for-eclipse](https://code.google.com/p/google-plugin-for-eclipse)

# android - 如何中止广播通知？（对于非有序广播）

> ID：16192525
> 
> 赞同：7
> 
> 时间：2013-04-24T12:51:49.167
> 
> 标签：android, broadcastreceiver, android-manifest, broadcast

我的应用程序处理小区广播消息，这是一个无序广播。我希望我的应用程序接收此广播并终止 CB 消息的消息通知。

我发现可以通过使用带有优先级标签的意图过滤器来抑制短信通知，如下所示

```
<receiver android:name="com.example.sis.xxyyReceiver" >
      <intent-filter android:priority="999">
         <action android:name="android.provider.Telephony.SMS_RECEIVED" >
         </action>
      </intent-filter>
</receiver> 
```

所以我尝试对这样的 CB 消息做同样的事情

```
<intent-filter android:priority="100">
     <action android:name="android.provider.Telephony.CB_RECEIVED" >
     </action>
</intent-filter> 
```

但是没有用，日志猫看起来如下

![在此处输入图像描述](https://i.stack.imgur.com/xcDRn.png)

从我的研究和下面的评论中，我了解到不能中止非有序广播，所以我要做的就是抑制 CB 消息生成的通知（即 CB_SMS 警报和振动）。

任何人都可以帮助我终止非有序广播通知吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T13:07:38.763

您不能中止常规广播。每个为他们注册的`BraodcastReceiver`人都会得到他们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-12T14:40:09.727

或者，您可以调低音量？

或者只是模拟蓝牙耳机挂钩来自动接听电话（无声）？

```
Intent i = new Intent(Intent.ACTION_MEDIA_BUTTON);
                i.putExtra(Intent.EXTRA_KEY_EVENT,
                        new KeyEvent(KeyEvent.ACTION_UP, KeyEvent.KEYCODE_HEADSETHOOK));
                context.sendOrderedBroadcast(i, "android.permission.CALL_PRIVILEGED");

                Intent o = new Intent(Intent.ACTION_MEDIA_BUTTON);
                o.putExtra(Intent.EXTRA_KEY_EVENT,
                        new KeyEvent(KeyEvent.ACTION_DOWN, KeyEvent.KEYCODE_HEADSETHOOK));
                context.sendOrderedBroadcast(o, "android.permission.CALL_PRIVILEGED"); 
```

# c# - 使用Windows应用程序c#根据用户活动更新数据库表字段

> ID：16192530
> 
> 赞同：1
> 
> 时间：2013-04-24T12:51:59.477
> 
> 标签：c#, sql-server-2008-r2, windows-applications

我在 Windows 应用程序中创建了一个项目，并为该项目提供了多个用户可访问性，但我需要将其限制为一次只有 3 个用户访问它。为此，我为每次登录`status=true`和注销添加了列状态（位），`status=false`但如果我从结束任务和系统关闭结束我的项目，那么我在计算登录用户时遇到问题。

是否可以找到活跃用户和状态？如果可能的话，我将每 5 分钟运行一次触发器并相应地更新状态字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:19:44.443

好的，因为这是一个 Windows 应用程序，并且您没有提供任何代码，所以当他们登录时我会做这样的事情：

```
// connect to the database
using (SqlConnection c = new SqlConnection("connection string"))
{
    // count the logged in users
    var loggedInUsers = (int)new SqlCommand("SELECT COUNT(UserId) FROM Users WHERE status = 1", c).ExecuteScalar();

    // if the threshold has been met then shut down the application
    if (loggedInUsers == 3)
    {
        MessageBox.Show("There are already 3 concurrent users logged into the system -please try again at a later time.", "User Limit Met", MessageBoxButtons.OK, MessageBoxIcon.Information);
        Application.Exit();
    }
} 
```

但是当应用程序关闭时你也必须这样做，比如在`OnClosing`主窗体的方法中：

```
protected override void OnClosing(CancelEventArgs e)
{
    // connect to the database
    using (SqlConnection c = new SqlConnection("connection string"))
    {
        // log the user out
        var cmd = new SqlCommand("UPDATE Users SET status = 0 WHERE UserId = @UserId", c);
        cmd.Parameters.AddWithValue("@UserId", // get your user id from somewhere

        var rowsAffected = cmd.ExecuteNonQuery();

        // make sure the update worked
        if (rowsAffected == 0)
        {
            // do something here to make sure they get logged out
        }
    }
} 
```

# 编辑

例如，要在任务管理器退出期间处理应用程序失败的边缘情况，您应该能够利用`Application.Exit`，因此在您的启动方法（即`Application.Run`调用的位置）中将这一行放在前面：

```
Application.ApplicationExit += new EventHandler(Application_ApplicationExit); 
```

然后消费它：

```
private void Application_ApplicationExit(object sender, EventArgs e)
{
    // and now you can probably just move all of the code here
    // instead of the OnClosing
} 
```

# azure - Windows Azure - 硬盘大小

> ID：16192531
> 
> 赞同：3
> 
> 时间：2013-04-24T12:51:59.950
> 
> 标签：azure, azure-virtual-machine

我正在使用 Windows Azure 创建一个小型 VM 来托管几乎不占用任何空间的服务。

Windows Azure 会创建一个默认的 130gb 磁盘，其中大约有 100gb 可用空间。这太过分了。我不需要那么多空间。

我知道 MSFT 将对存储收费（即：130gb），所以我想创建更小的虚拟机（可能是 30 或 40gb）。

1.  MSFT 是否会向我收取未使用空间的费用？
2.  有没有办法创建我想要的尺寸的机器？
3.  如果没有办法按照我想要的大小创建机器，如何调整大小？（将 .vhd 下载到我的计算机、在本地调整大小和上传的选项看起来太费力了，说得少）。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-24T13:05:11.653

> MSFT 是否会向我收取未使用空间的费用？

不对。这是因为虚拟机本质`Page Blobs`上是根据占用的字节而不是总大小对页 blob 收费。因此，即使为您创建了一个 130 GB 的磁盘并假设您用 30 GB 的数据填充它，您也只需支付 30 GB 而不是 130 GB 的费用。请注意，对于块 blob，即使 blob 为空，您也要按 blob 的大小付费。您可以在此处阅读有关 blob 的更多信息：http: [//msdn.microsoft.com/en-us/library/windowsazure/ee691964.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/ee691964.aspx)。

> 有没有办法创建我想要的尺寸的机器？

目前没有，但鉴于您无需为未使用的空间付费，我看不出您有任何理由要这样做。

> 如果没有办法按照我想要的大小创建机器，如何调整大小？

页 blob 可调整大小。请查看有关如何调整页面 blob（以及 VM 映像）大小的博客文章：http: [//blog.maartenballiauw.be/post/2013/01/07/Tales-from-the-trenches-resizing -a-Windows-Azure-virtual-disk-the-smooth-way.aspx](http://blog.maartenballiauw.be/post/2013/01/07/Tales-from-the-trenches-resizing-a-Windows-Azure-virtual-disk-the-smooth-way.aspx)

# jquery - 将 html 附加到元素的更简洁的方法

> ID：16192535
> 
> 赞同：1
> 
> 时间：2013-04-24T12:52:08.180
> 
> 标签：jquery, html

我正在研究一个无限滚动，如下所示：

```
<script type="text/javascript">
    $(function () {
        var page = 1;
        var $ol = $('#namesList');
        var $waypoint = $('#namesWaypoint');

        var opts = { offset: '100%' };
        $waypoint.waypoint(function () {
            console.log('waypoint triggered');
            $waypoint.waypoint('remove');
            $.get('/Home/AjaxPage?page=' + page++, function (data) {
                data.names.forEach(function (name) {
                    $ol.append($('<li class="span3" style="margin-bottom: 0 !important;">').text(name));
                });
                $waypoint.waypoint(opts);
            });
        }, { offset: '100%' });
    });
</script> 
```

看到这一行：

```
 $ol.append($('<li class="span3" style="margin-bottom: 0 !important;">').text(THEFOLLOWINGCODEBLOCK)); 
```

我需要在此处附加以下内容：

```
<li class="span3" style="margin-bottom: 0 !important;">
                <div class="thumbnail">
                    <div>
                        <a href="/Haberler/@item.Id/@Html.URLFriendly((string)@item.Title)">
                            <img src="@item.MainImage.Path?width=260&height=150" alt=""></a><br />
                        <strong class="other_news"><a href="/Haberler/@item.Id/@Html.URLFriendly((string)@item.Title)">@Html.Truncate((string)item.Title, 30)</a></strong>
                        <br />
                        <span class="detail_content">@Html.Truncate((string)item.PreviewText, 75)</span>
                        <br />
                        <span class="detail_content">@item.DatePublished.ToString("dd/MM/yyyy")</span>
                    </div>
                </div>
            </li> 
```

有更清洁的方法吗？

我应该使用 jquery tmpl 吗？我不想引入很多脚本...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T12:59:42.317

例如，您可以执行以下操作：

```
$('<li></li>')
    .addClass('span3')
    .css({
        'margin-bottom' : '0',
        'more-css' : 'can-be-placed-here'
    })
    // Use either append or html, depending on your circumstance
    .append(YOUR_ELEMENT)
    .html(YOUR_CODE_STRING)
    .appendTo($ol); 
```

或者正如您所提到的，使用某种模板引擎，例如 jQuery.tmpl。

不幸的是，没有办法在 JS 中执行此清理程序。对于每种情况，您应该做您认为最具可读性和可理解性的事情。上面我只是通过缩进和将每条指令分成自己的行来使其更具可读性。

至于没有引擎的模板，您可以将以下内容附加到您的 HTML 文档中：

```
<script id="myTemplate" type="text/template">
    <div class="thumbnail">
        <div>
            <a href="/Haberler/@item.Id/@Html.URLFriendly((string)@item.Title)">
                <img src="@item.MainImage.Path?width=260&height=150" alt=""></a><br />
            <strong class="other_news"><a href="/Haberler/@item.Id/@Html.URLFriendly((string)@item.Title)">@Html.Truncate((string)item.Title, 30)</a></strong>
            <br />
            <span class="detail_content">@Html.Truncate((string)item.PreviewText, 75)</span>
            <br />
            <span class="detail_content">@item.DatePublished.ToString("dd/MM/yyyy")</span>
        </div>
    </div>
</script> 
```

然后使用它使用该标记生成一个新元素，如下所示：

```
var $tpl = $($('#myTemplate').html());
$tpl.find('.detail_content').text('Hai der');
$listItem.append($tpl); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T12:59:35.367

这不是一种更清洁的方法，但我可以建议一种更快的方法：

```
var content = '';
data.names.forEach(function (name) {
    content += '<li class="span3" style="margin-bottom: 0 !important;">' + name + '</li>';
});
$ol.append($(content)); // Call append only once 
```

# jquery - how to find id based on pagination

> ID：16192543
> 
> 赞同：3
> 
> 时间：2013-04-24T12:52:36.410
> 
> 标签：jquery, jsf, jsf-2, pagination, datatables

I am using the [jQuery DataTables plugin](http://www.datatables.net/) on a JSF `<h:dataTable>`. In this page I have 86 records.

```
+++++++++++++++++++++++++++++++++++++
+ id  +    Name    +   Email        +
+++++++++++++++++++++++++++++++++++++
+  1  +   Name 1   +  Email 1       +
+  2  +   Name 2   +  Email 2       +
+  3  +   Name 3   +  Email 3       +
+........
+  4  +   Name 4   +  Email 4       +
+++++++++++++++++++++++++++++++++++++
+                 1.2.3.4..... Next +
+++++++++++++++++++++++++++++++++++++ 
```

**Note: Per table I am showing 10 records.**

What my client want is add a column Views which will work as below.

When I open table I have 10 records, means id 1-10 get 1 view.

When I click pagination 2, id 11-20 get 1 view.

Any idea how to get this done?

* * *

## Edit 1

## What I meant by `get 1 view` is as below.

User A : When page is opened, default pagination 1 is ON. So on page we have 10 records. Means all 10 records are viewed by user A, means each id get 1 view. SO now id 1-10 have 1 views. User A exits the page.

User B : When page is opened, default pagination 1 is ON. So on page we have 10 records. Means all 10 records are viewed by user B, means each id get 1 view. SO now id 1-10 have 2 views (as user A has already viewed). Now User B clicks pagination 2 button. So id 11-20 get view 1\. User B exits the page.

This way I want to calculate views per id.

## **So basically what I want is**

*   When pagination button is pressed, I want to get ids that are on the table.
*   Pass those ids to some bean and increase those id's views.

Any idea how to get this done?

* * *

## Edit 2

Also check this

[https://stackoverflow.com/a/16934279/1066828](https://stackoverflow.com/a/16934279/1066828)

Here I found all solution...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:12:51.810

在研究了[jQuery DataTables](http://www.datatables.net/)的分页后，发现了很多很棒的东西，例如这个家伙 Todd。[A. Wood 在此处](http://www.woodcp.com/2012/02/server-side-paging-with-petapoco-and-datatables/)分页时使用 PetaPoco 加载数据做得很好。但即使与您的要求相比，它也很复杂。我不得不承认 DataTables 有很好的文档，我找到了答案[pagination plugin](http://datatables.net/plug-ins/api)。

所以神奇的功能是：`fnPagingInfo`. 但是，为了获取页面信息，数据表渲染（或重新渲染）事件必须通过`fnDrawCallback`.

无论如何，您应该嵌入以下代码：

```
<script type="text/javascript">
    $.fn.dataTableExt.oApi.fnPagingInfo = function ( oSettings )
    {
        return {
            "iStart":         oSettings._iDisplayStart,
            "iEnd":           oSettings.fnDisplayEnd(),
            "iLength":        oSettings._iDisplayLength,
            "iTotal":         oSettings.fnRecordsTotal(),
            "iFilteredTotal": oSettings.fnRecordsDisplay(),
            "iPage":          oSettings._iDisplayLength === -1 ?
                    0 : Math.ceil( oSettings._iDisplayStart / oSettings._iDisplayLength ),
            "iTotalPages":    oSettings._iDisplayLength === -1 ?
                    0 : Math.ceil( oSettings.fnRecordsDisplay() / oSettings._iDisplayLength )
        };
    };

    $(document).ready(function() {
        $('#example').dataTable( {
            "fnDrawCallback": function () {
                var input = document.getElementById('form:Fenerbahce');
                input.value = this.fnPagingInfo().iPage;
            }
        } );
    });

</script> 
```

可以看出，第一部分表示 的定义`fnPagingInfo`。在第二部分`fnDrawCallback`捕获渲染事件，我们将输入的值设置为：

```
<h:form>
    <h:inputText id="Fenerbahce" value="#{bean.var1}" style="display:none;"></h:inputText>
</h:form> 
```

**那么到目前为止我们得到了什么？**

我们得到了用户点击的页码信息，并将这个数字放入我们的`bean`. 其余部分存储每个页面的编号，并在有人单击时将它们计数到数组中：

```
public void setVar1(String var1) {
    this.var1 = var1;
    Array[var1]++;
} 
```

注意：我已经通过基本的 HTML 表进行了尝试，例如：

```
<table id="example">
    <thead>
    <tr>
        <th>Column 1</th>
        <th>Column 2</th>
        <th>etc</th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td>Row 1 Data 1</td>
        <td>Row 1 Data 2</td>
        <td>etc</td>
    </tr>
    <tr>
        <td>Row 2 Data 1</td>
        <td>Row 2 Data 2</td>
        <td>etc</td>
    </tr>
    </tbody>
</table> 
```

当然有很多行。

# javascript - bind hierachical json via angularjs

> ID：16192548
> 
> 赞同：0
> 
> 时间：2013-04-24T12:52:56.753
> 
> 标签：javascript, binding, angularjs

I am trying to bind json with two levels to a div via angular.js. The first level is bound as expected but the second one is not. Could you please suggest to what should I change the binding inside the following sample [http://plnkr.co/edit/iV72hp6nQMUQh1K082Ej](http://plnkr.co/edit/iV72hp6nQMUQh1K082Ej) it seems the binding is unable to be nested.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:40:14.670

我修改了您的代码，如下所示，现在可以使用

```
<!DOCTYPE html>
<html ng-app>
<head>
 <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
  <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.6/angular.min.js"></script>
  <script src="app.js"></script>

  <style>
  .mHeader
  {
  background-color:Black;
  color: Orange;
  width: 200px;
  padding-bottom: 0px;  
  margin-bottom: 0px;
  }
  </style>
</head>
<body> 

<div ng-controller="MeetingsCtrl">
  <div id="div1" style="background-color: Brown; width: 200px;">

  </div>

    <script>
        function MeetingsCtrl($scope, $compile) {
            $scope.itemselected = "None";
            $scope.meetings = [
              {
                  country: 'South Africa',
                  children: [
                      {name: "H1"},
                      { name: "H2" }
                  ]
              },
              {
                  country: 'Great Britain',
                  children: [{ name: "H3" },
                      { name: "H4" }]
              },
              {
                  country: 'United States',
                  children: [{ name: "H5" },
                      { name: "H6" }]
              },
              {
                  country: 'Zimbabwe',
                  children: [{ name: "H7" },
                      { name: "H8" }]
              }
            ];

            $('#div1').html(
       $compile(
         '<ul><li ng-repeat="meeting in meetings"><a>{{meeting.country}}</a> <ul><li ng-repeat="child in meeting.children">{{child.name}}</li></ul></li></ul>'
       )($scope)
     );
            $('#div1').prepend('<div class="mHeader">Race cources</div>');

        }

    </script>
</body>
</html> 
```

# git - Github list files as binary even though .gitattributes is set to -crlf diff and diff is shown properly on local

> ID：16192551
> 
> 赞同：0
> 
> 时间：2013-04-24T12:52:58.577
> 
> 标签：git, text, github, binary, testcomplete

I have a repo with files that are encoded as UCS-2 by default. They're actually plain ASCII, but they are created by TestComplete tool and automatically set to that encoding. I tried many variants for setting those files to be text explicitly. I ended up with following string in `.gitattributes` file:

```
*.sj -crlf diff 
```

(*.sj files are actually JS files for TestComplete) I can diff files ok (at least after `git checkout HEAD --force .` for the whole repository), i commit and see eg. `1 file changed, 2 insertions(+), 1 deletion(-)` but when i do git push and try to view commits on GitHub they are shown as binary. I've seen many threads about setting vimdiff and such, but the problem seem to emerge somewhere else as i can see diffs, but github doesn't. And i use git on **Windows**.

What is wrong with my setup? What should i do to make github and git understand that .sj files are all text files and how can i make all those changes to take effect for all already added files?

**EDIT**: What i want is make git and github understand that those files are text ones and should be treated as that, even though previously they were considered binary. How to setup git/github?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T04:53:00.733

您可以让 TestComplete 以 ANSI 格式保存这些文件。为此，打开包含这些文件的 TestComplete 项目，打开项目设置窗口（**工具 | 当前项目属性**）并在**常规**部分中设置**单位编码**选项的**ANSI**值。在此之后，保存项目（**File | Save All**）。

 ******此外，您可以从记事本中以 ANSI 编码保存文件。只需在记事本中打开一个文件并使用“**另存为**”对话框（**文件|另存为**）进行保存。您可以在此对话框的**Enconding**组合框中选择所需的编码。******

# sublimetext2 - Sublime Text 2 中上次打开/编辑/访问的文件

> ID：16192558
> 
> 赞同：2
> 
> 时间：2013-04-24T12:53:21.103
> 
> 标签：sublimetext2

有没有办法在 Sublime Text 2 中获取最后 10 个打开/编辑/访问的文件（作为 python 模块的数据）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T14:33:52.720

对于**编辑或访问过的文件**，我使用*Goto Anything*功能（默认情况下`ctrl+p`在 Win 上）。面板随即出现，文件会根据您最近的活动进行排序。当然你可以在那里过滤（只需输入文件名的一部分就足够了）。是你要找的吗？

如果文件已经**关闭**，我会使用非常方便[的 GoToRecent 插件](https://github.com/pomeh/dotfiles/tree/master/Sublime%20Text%202/Packages/GotoRecent)。当然值得一试！可以重新映射默认键绑定（例如，`ctrl+e`将以下内容添加到用户键绑定文件中的数组中）：

```
{ "keys": ["ctrl+e"], "command": "goto_recent" } 
```

# python - 将 numpy 标量转换为简单的 python 类型

> ID：16192559
> 
> 赞同：6
> 
> 时间：2013-04-24T12:53:21.913
> 
> 标签：python, numpy

我有一个带有单个值（标量）的 numpy 数组，我想将其转换为对应的 Python 数据类型。例如：

```
import numpy as np
a = np.array(3)
b = np.array('3') 
```

我可以将它们转换为`int`并`str`通过转换：

```
a_int = int(a)
b_str = str(b) 
```

但我需要提前知道类型。我想在没有显式类型检查的情况下转换`a`为整数和`b`字符串。有没有简单的方法来实现它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-02T08:58:13.837

[如此处](https://stackoverflow.com/a/11389998)所述，使用[`obj.item()`](https://numpy.org/doc/stable/reference/generated/numpy.ndarray.item.html)方法获取 Python 标量类型：

```
import numpy as np
a = np.array(3).item()
b = np.array('3').item()
print(type(a))  # <class 'int'>
print(type(b))  # <class 'str'> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-24T12:55:18.443

在这种情况下

```
import numpy as np
a = np.array(3)
b = np.array('3')
a_int = a.tolist()
b_str = b.tolist()
print type(a_int), type(b_str) 
```

应该管用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T13:03:48.730

这会将*ints 转换*为*str*，并将*str*转换为*int* ，而无需提前知道类型。它所做的是确定在 (a/b) 上调用**(str)**或**(int )。**内联 'a if b else c' 等价于 ?: 三元运算符（您可能熟悉）。

```
a = '1'
a_res = (str if type(a) == type(1) else int)(a)
print(type(a_res))

b = 1
b_res = (str if type(b) == type(1) else int)(b)
print(type(b_res)) 
```

产生：

```
>>> 
<class 'int'>
<class 'str'> 
```

如您所见，相同的代码用于转换 a 和 b。

# linq - LINQ 左连接错误

> ID：16192561
> 
> 赞同：1
> 
> 时间：2013-04-24T12:53:23.857
> 
> 标签：linq, c#-4.0, left-join

我有 2 个通用列表，称为**学生**和**条目** ，它们是 1 到 0..1 的关系。学生 1:0..1 参赛作品

如果存在，我想从 Entries 获取学生姓名、ID 和英语、数学详细信息的列表。

我的 LINQ 查询如下，我在**se.English**得到空引用错误。你能帮忙吗？谢谢。

```
var query = from s in students
            join t in entries
            on s.StudentDetailID equals t.StudentDetailID into StudentEntries
            from se in StudentEntries.DefaultIfEmpty()                                    
            select new { s.StudentDetailID, s.LastName, s.FirstName,
            se.English}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:57:10.547

正如您所说，您有 1-0..1 关系，因此 se.english 可能为空（因为您使用了左外连接），您应该在查询中处理它，我假设它是字符串和put "" 如果为null，你可以随意处理。

```
var query = from s in students
            join t in entries
            on s.StudentDetailID equals t.StudentDetailID into StudentEntries
            from se in StudentEntries.DefaultIfEmpty()                                    
            select new { s.StudentDetailID, s.LastName, s.FirstName,
            English = se.English?? ""}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T12:56:29.467

`se`可能为空，因为您分配了它`StudentEntries.DefaultIfEmpty()`。并且类的默认值为空。所以你不能在`se.English`没有测试 null 之前调用它：

```
var query = from s in students
        join t in entries
        on s.StudentDetailID equals t.StudentDetailID into StudentEntries
        from se in StudentEntries.DefaultIfEmpty()                                    
        select new { s.StudentDetailID, s.LastName, s.FirstName,
        se == null ? null : se.English}; 
```

# iphone - Xcode：无法在设备上启动应用程序（ExperitestServer：级别设置为：（3））

> ID：16192564
> 
> 赞同：0
> 
> 时间：2013-04-24T12:53:33.307
> 
> 标签：iphone, ios, xcode, xcode4, build

当我在 Xcode 上构建并运行应用程序以在 iPhone 3GS 上安装应用程序时，Xcode 突然停止该过程（甚至在启动应用程序之前）并记录以下内容：

```
ExperitestServer: level was set to: (3) 
```

这是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T07:31:03.020

似乎测试团队正在使用 ExperiTest 进行自动化测试。它与 Xcode 无关。为此，我联系了 ExperiTest.com。

# c++ - C++ 函数获取特定函子，但使用基类中的函数

> ID：16192568
> 
> 赞同：-2
> 
> 时间：2013-04-24T12:53:41.313
> 
> 标签：c++, inheritance, parameters, operator-keyword, functor

```
class A {
   virtual void operator()(int a, int b) { cout << a + b << endl; }
};
class B : A {
   void operator()(int a, int b) { cout << a - b << endl; }
};
void f(int a, int b, const A &obj) {
   obj(a, b);
}
int main() {
   int a = 5, b = 3;;
   B obj;
   f(a, b, obj); // should give 2, but gives 8 (uses A's function even if it's virtual)
} 
```

它不使用 B 类中的 operator()，而是使用 A 类中的一个（即使它被设置为虚拟，所以它应该使用 B 的 op()）。知道如何解决吗？

**tl; dr** - 当我给出从基类继承的特定类的参数（哪种类型是最基本的类）对象时，我想使用特定的运算符，而不是基类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T12:59:41.790

您必须继承`public`才能具有多态性：

```
// .......vvvvvv (omitting `public` means `private` by default
class B : public A {
//... 
```

还：

*   你不能`const`在对象上调用非成员函数`const`，所以 make`operator()`是`const`
*   操作员必须是`public`，不是`private`
*   添加（不是强制性`return`的`main`，但功能是`int main`，最好有一个`return`）

# jquery - 如何将href的php值发布到a中

> ID：16192569
> 
> 赞同：2
> 
> 时间：2013-04-24T12:53:41.787
> 
> 标签：jquery, ajax, post

我已经能够`<a href="">`用 class检索所有内容`various`。

我需要编写一些`href`从这些中获取的脚本`a`（每个人都有不同的）并将其发布到 popup.php。

棘手的部分是 href 有`gallery_popup.php??id=XX`，我唯一需要发布的是那个 ID。

我决定使用变量，所以首先：

```
var href = $('.various').attr('href'); 
```

我抓住了href。然后我想撕掉所有不必要的东西，只留下 ID 号并将其保存到 Var = IDnumber

接着

```
$(".various").click(function () {
   $.post('gallery_popup.php', IDNumber;
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:05:32.300

或者你可以做

```
var myString = $(this).attr('href');
var myArray = myString.split('=');

$.post('gallery_popup.php', myArray[myArray .length-1]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T13:06:05.573

您可以将 ID 号保存在“rel”中，例如，

```
 <a href="gallery_popup.php??id=XX" rel="xx" class="various" >gallery</a> 
```

然后你可以访问id，

```
 var href = $('.various').attr('rel'); 
```

如果你想使用

```
 var href = $('.various').attr('href'); 
```

您可以使用 'id=' 拆分您的网址

```
 eg: var temp = href.split("id=");
        alert(temp[1]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T12:57:00.140

你可以使用这样的东西：

```
$(".various").click(function () {
   var url = $(this).attr('href')),
       matches = url.match(/gallery_popup\.php\?\?id=(\d+)/),
       id;

   // If an id has been found, matches will contain 2 elements :
   //   1 - the whole chain matched (here "gallery_popup.php??id=XX")
   //   2 - the group captured (here XX)
   if(matches.length > 1) id = matches[1];

   $.post('gallery_popup.php', id);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T13:07:49.783

只需一行：

```
$.post('gallery_popup.php', $(this).attr("href").split("=")[1]); 
```

# javascript - 地理编码服务与 gMap 搜索之间的差异结果

> ID：16192571
> 
> 赞同：4
> 
> 时间：2013-04-24T12:53:46.917
> 
> 标签：javascript, google-maps, google-maps-api-3, google-geocoder

我想得到这个地址的经纬度：Boulevard de la Marne Zone industrielle, COULOMMIERS, 77120, France

我正在将 api 添加到我的页面：

```
<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=true"></script> 
```

当我使用 gmaps 时，结果很好，但是当我想通过 API 检索它时：

```
 geocoder = new google.maps.Geocoder();
 geocoder.geocode({ 'address': myAdress, 'region': 'FR'}, function (results, status) {...}); 
```

它执行以下请求：

```
https://maps.googleapis.com/maps/api/js/GeocodeService.Search?4sBoulevard%20de%20la%20Marne%20%20Zone%20industrielle%20%20COULOMMIERS%2077120%20&7sUS&9sfr-FR&callback=_xdc_._lsoj9s&token=53058 
```

结果在巴马科附近......

如果我使用视口边界，它会执行以下请求：

```
https://maps.googleapis.com/maps/api/js/GeocodeService.Search?4sBoulevard%20de%20la%20Marne%20%20Zone%20industrielle%20%20COULOMMIERS%2077120%20&6m6&1m2&1d40.513799&2d-5.844727000000034&2m2&1d51.727028&2d10.854491999999936&7sUS&9sfr-FR&callback=_xdc_._c84svr&token=29019 
```

它更好（它在法国），但事实并非如此

该查询在网站谷歌地图上运行良好： [https ://maps.google.fr/maps?q=Boulevard+de+la+Marne++Zone+industrielle,++COULOMMIERS,+77120&hl=fr&ll=48.487486,3.922119&spn =1.541855,4.22699&sll=50.485474,25.620117&sspn=23.748757,67.631836&hq=Boulevard+de+la+Marne++Zone+industrielle,++COULOMMIERS,+77120&radius=15000&t=m&z=9](https://maps.google.fr/maps?q=Boulevard+de+la+Marne++Zone+industrielle,++COULOMMIERS,+77120&hl=fr&ll=48.487486,3.922119&spn=1.541855,4.22699&sll=50.485474,25.620117&sspn=23.748757,67.631836&hq=Boulevard+de+la+Marne++Zone+industrielle,++COULOMMIERS,+77120&radius=15000&t=m&z=9)

似乎获得它的唯一方法是执行以下请求： http://maps.googleapis.com/maps/api/geocode/json?address=Boulevard%20de%20la%20Marne%20Zone%20industrielle, [%20COULOMMIERS ,%2077120&components=国家:FR&sensor=false](http://maps.googleapis.com/maps/api/geocode/json?address=Boulevard%20de%20la%20Marne%20Zone%20industrielle,%20COULOMMIERS,%2077120&components=country:FR&sensor=false)

我不明白为什么当我使用视口而不是国家时结果不同（这两个结果都在视口的范围内）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T23:04:01.300

Boulevard de la Marne Zone industrielle, COULOMMIERS, 77120, France 不是一个地址，而是一个“地方”。

地理编码器从该输入中找到 Via De La Marne 的位置：

[http://www.geocodezip.com/v3_example_geo2.asp?addr1=Boulevard](http://www.geocodezip.com/v3_example_geo2.asp?addr1=Boulevard) de la Marne Zone industrielle, COULOMMIERS, 77120, France&geocode=1

```
Found 1 results for Boulevard de la Marne Zone industrielle, COULOMMIERS, 77120, France
[ 0 ]: Av De La Marne, Bamako, Mali (12.6417952, -7.988396299999977) 
```

Places API 的第一个结果看起来更正确：

[http://www.geocodezip.com/v3_example_geo2.asp?addr1=Boulevard](http://www.geocodezip.com/v3_example_geo2.asp?addr1=Boulevard) de la Marne Zone industrielle, COULOMMIERS, 77120, France&place=1

```
Found 20 results for Boulevard de la Marne Zone industrielle, COULOMMIERS, 77120, France
[ 0 ]: Zone Industrielle, Boulevard de la Marne, Coulommiers, France (48.804329, 3.0923729999999523)
[ 1 ]: Boulevard de la Marne, Coulommiers, France (48.803048, 3.092110000000048)
[ 2 ]: 21 Boulevard de la Marne, Coulommiers, France (48.806634, 3.0937430000000177)
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-14T14:43:53.167

这里有两件事在起作用。

由于“Zone industrielle”部分，“Boulevard de la Marne Zone industrielle, COULOMMIERS, 77120, France”未被地理编码 API 识别为地址。如果您删除该部分，它就可以正常工作：

[Boulevard de la Marne, COULOMMIERS, 77120, 法国](https://google-developers.appspot.com/maps/documentation/utils/geocoder/#q%3DBoulevard%2520de%2520la%2520Marne%252C%2520COULOMMIERS%252C%252077120%252C%2520France)

此外，我在 Google 地图数据中发现了一个看起来像（一个罕见的例子）的问题，但我认为修复它不会有助于解决上述问题。

该地点由 Places API 文本搜索找到：

[https://maps.googleapis.com/maps/api/place/textsearch/json?radius=50000&location=0,0&query=Boulevard%20de%20la%20Marne%20Zone%20industrielle,%20COULOMMIERS,%2077120&key=YOUR_API_KEY](https://maps.googleapis.com/maps/api/place/textsearch/json?radius=50000&location=0,0&query=Boulevard%20de%20la%20Marne%20Zone%20industrielle,%20COULOMMIERS,%2077120&key=YOUR_API_KEY)

您会注意到，在通过 place_id 查询 Places Details 时没有任何`route`组件。`address_components`这表明该地点与道路没有正确关联。

# javascript - Magento 添加到购物车按钮不起作用

> ID：16192573
> 
> 赞同：0
> 
> 时间：2013-04-24T12:53:55.887
> 
> 标签：javascript, jquery, magento

是的，我已经看到了关于这个问题的其他主题，但我还不能解决这个问题。所以我希望你能帮助我。在我的 Magento 商店[www.koekentrommel.nl](http://www.koekentrommel.nl)中，问题很简单，添加到购物车按钮不起作用。我是 jquery 新手，但我尝试了 noconflict-code，但没有结果。你能帮忙吗？没有添加到购物车的商店就像没有轮胎的汽车......非常感谢！

这是 view.phtml 代码：

```
<?php $_helper = $this->helper('catalog/output'); ?>
<?php $_product = $this->getProduct(); ?>

<script type="text/javascript">
var optionsPrice = new Product.OptionsPrice(<?php echo $this->getJsonConfig() ?>);
$.noConflict();
</script>

    }.bind(productAddToCartForm);

    productAddToCartForm.submitLight = function(button, url){
        if(this.validator) {
            var nv = Validation.methods;
            delete Validation.methods['required-entry'];
            delete Validation.methods['validate-one-required'];
            delete Validation.methods['validate-one-required-by-name'];
            // Remove custom datetime validators
            for (var methodName in Validation.methods) {
                if (methodName.match(/^validate-datetime-.*/i)) {
                    delete Validation.methods[methodName];
                }
            }

            if (this.validator.validate()) {
                if (url) {
                    this.form.action = url;
                }
                this.form.submit();
            }
            Object.extend(Validation.methods, nv);
        }
    }.bind(productAddToCartForm);
//]]>
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:17:16.087

显然您的 jQuery 与原型冲突。NoConflcit 应该已经解决了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T17:03:44.803

您有 2 个结束脚本标签，您需要在 $.noConflict(); 之后删除一个

```
 <script type="text/javascript">
   $.noConflict();
 </script>  <-- Delete

  }.bind(productAddToCartForm);
   .....
 </script> 
```

# c++ - [C++ 编译时断言]：如果某些条件不满足，我们可以抛出编译错误吗？

> ID：16192575
> 
> 赞同：8
> 
> 时间：2013-04-24T12:54:12.360
> 
> 标签：c++, templates, assert, compile-time

我写了一个函数：

```
template<int N> void tryHarder() {
    for(int i = 0; i < N; i++) {
        tryOnce();
    }
} 
```

但我只希望它在 N 介于 0 和 10 之间时编译。我可以这样做吗？如何？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-24T12:57:40.700

您可以通过[`static_assert`声明](http://en.cppreference.com/w/cpp/keyword/static_assert)来做到这一点：

```
template<int N> void tryHarder() {

    static_assert(N >= 0 && N <= 10, "N out of bounds!");

    for(int i = 0; i < N; i++) {
        tryOnce();
    }
} 
```

此功能仅在 C++11 之后可用。如果您对 C++03 感到困惑，请查看[Boost 的静态断言宏](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_staticassert.html)。

整个想法都是很好的错误消息。如果您不关心这些，或者甚至无法提供提升，您可以执行以下操作：

```
template<bool B>
struct assert_impl {
    static const int value = 1;
};

template<>
struct assert_impl<false> {
    static const int value = -1;
};

template<bool B>
struct assert {
    // this will attempt to declare an array of negative
    // size if template parameter evaluates to false
    static char arr[assert_impl<B>::value]; 
};

template<int N>
void tryHarder()
{
    assert< N <= 10 >();
}

int main()
{
    tryHarder<5>();  // fine
    tryHarder<15>();  // error, size of array is negative
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T14:03:10.333

对于 C++11 之前的编译器，您可以在非类型参数 N 上实现模板参数约束。

有关如何执行此操作的说明，请参阅[http://stroustrup.com/bs_faq2.html#constraints](http://stroustrup.com/bs_faq2.html#constraints)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-19T13:40:37.573

`unsigned int`结合到目前为止已经给出的答案，也可以通过使用模板类型来覆盖下限。负值（如果应用）将被转换为足够高的无符号值，以至于`static_assert`无论如何它们都将被 C++11 之前的解决方案所覆盖。

`unsigned int`另外已经在语义上给出了一个提示，即不应将负值应用于此模板，这就是为什么在特定情况下（可能）应该首选它的原因......

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-24T12:59:56.733

```
#if !defined(__cplusplus)
#error C++ compiler required.
#endif 
```

这只是一个例子。

这是源链接： http: [//msdn.microsoft.com/en-us/library/c8tk0xsk (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/c8tk0xsk(v=vs.71).aspx)

我要说的是你也可以使用#error

这是一个指令

编辑@Pratik Chowdhruy：我同意 Paul R。这并不能直接回答问题。对不起社区

# jquery-masonry - JQuery Masonry 动画不会从底部加载

> ID：16192578
> 
> 赞同：1
> 
> 时间：2013-04-24T12:54:18.810
> 
> 标签：jquery-masonry, infinite-scroll

在我的 WordPress 网站上，Masonry 脚本包含在我的 functions.php 中，并且 Infinite-Scroll 使用插件激活。看起来一切正常（尽管元素有时会重叠）。

但是新的附加元素是从左上角开始动画的，而不是从底部开始的。

这是 WP admin 中的回调：

```
function( newElements ) {
var $newElems = $( newElements ).css({ opacity: 0 });
$newElems.imagesLoaded(function(){
$newElems.animate({ opacity: 1 });
$container.masonry( 'appended', $newElems, true );
}); 
```

最后一个'true'意味着'isAnimatedFromBottom'，不是吗？

演示站点：http: [//goo.gl/9XVIl](http://goo.gl/9XVIl)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-05T20:28:09.910

[masonry v2](https://github.com/desandro/masonry/issues/249)中有一个错误会阻止`isAnimatedFromBottom`参数与 CSS 过渡一起使用。

你有几个选择。

1.  `isAnimated: true`使用该选项切换到 JS 动画。但是动画可能很慢。
2.  [使用问题](https://github.com/desandro/masonry/issues/249)中建议的代码修补代码。

# java - 测试两个二叉搜索树是否具有相同的元素集？

> ID：16192581
> 
> 赞同：0
> 
> 时间：2013-04-24T12:54:27.200
> 
> 标签：java, binary-search-tree

我刚开始使用 java 和递归方法，我需要一些帮助：我需要确定两个二叉搜索树是否具有完全相同的元素集，而不管树的结构如何。

我写了一个方法来检查树是否包含一个元素，它被称为 contains()

这是我到目前为止得到的：

```
 public boolean sameContents(Node n2) {

    if (contains(n2, n2.key) && n2.left == null && n2.right == null) { return true; }
    if (contains(n2, n2.key) && n2.left != null) { sameContents(n2.left); }
    if (contains(n2, n2.key) && n2.right != null) { sameContents(n2.right); }
     return false; 
   } 
```

基本上我的想法是只要一个节点还有一个孩子并且树匹配，该方法就会运行。我用例如 testTree1.sameContents(testTree2); 调用该方法；但是该方法总是返回false ...有人可以指出应该如何做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T05:24:15.623

还有另一种方法可以做到这一点。您可以使用前序遍历或中序遍历将树转换为字符串表示形式。这需要`O(n)`时间。你可以检查这些字符串是否相等。也可以及时完成`O(n)`。因此，总运行时间为`O(n)`。

这种方法看起来类似于带有迭代器的解决方案，但这个方法更通用，因为可以用于“is-subtree”任务（检查树是否`t1`是 的子树`t2`）。在这种情况下，可以使用`isSubstring()`method 而不是`equals()`. 如果树`t1`是's 的子树，则字符串表示是`t2`' s 的子字符串。可以及时完成。`t1``t2``isSubstring()``O(log n)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T12:59:58.910

最好的方法是使用[Iterator](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Iterator.html)对象——如果两个二叉搜索树包含相同的元素，那么它们的迭代器的`next`方法应该返回相同的值（即使它们的结构不同）。

```
// returns true if the trees are equivalent, else false
Iterator itr1 = tree1.getIterator();
Iterator itr2 = tree2.getIterator();
while(itr1.hasNext() && itr2.hasNext()) {
    if(!itr1.next().equals(itr2.next())) {
        return false;
    }
}
return !itr1.hasNext() && !itr2.hasNext(); // returns true if trees were the same size, else false 
```

你应该已经有一个中序二叉树遍历方法，所以你已经有了一个迭代器——只需添加一个 ArrayList/Stack 来代替调用堆栈，这样你就可以暂停遍历（只要你要进行递归方法调用，将当前节点存储到您的堆栈中）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T13:29:07.397

你能在两棵树上做一个中序遍历并检查两个遍历的结果是否相同。如果相同，我们是否可以假设两棵树具有相同的元素集。

# python - PYTHON（Jython）如何在字符串中获取日期时间值 - 都在特定字符串之前？

> ID：16192585
> 
> 赞同：0
> 
> 时间：2013-04-24T12:55:07.820
> 
> 标签：python, date, jython

我有包含时间戳的字符串：

```
Wed Apr 24 14:39:49 CEST 2013 
```

当然，我在许多记录中都有类似的值，所以我想在之前得到所有`CEST`。（我有记录和 CEST 2012、2013、2014 ......），以及 CEST 之后的一年。我也想删除日信息。

例如，我想要结果：

```
2013 Apr 24 14:39:49 
2013 Apr 26 14:39:49 
```

我应该使用什么方法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:15:12.730

```
from dateutil import parser
dt = parser.parse('Wed Apr 24 14:39:49 CEST 2013') 
```

`dt`是一个日期时间对象，您可以使用/格式化任何您想要的方式。例如：

```
dt.strftime('%Y %b %d %H:%M:%S')
# returns '2013 Apr 24 14:39:49' 
```

# java - 将正在运行的线程对象添加到数组列表中

> ID：16192588
> 
> 赞同：0
> 
> 时间：2013-04-24T12:55:18.267
> 
> 标签：java, multithreading, arraylist

我正在使用java创建一个小型坦克游戏。在该游戏中，生命包和硬币堆不时在游戏网格上的随机位置生成。他们都有**有限的生命周期**，**在生命周期结束后，他们就会从场上消失**。当它们在网格上可见时，任何坦克都可以在消失之前获得它们。我想将 lifepack 对象和 coinpile 对象的列表保存在**ArrayList**中，以便通过游戏 AI 算法访问它们。我希望使用简单的java知识实现上述概念如下。

以下是我的 LifePack 类。CoinPile 类的行为方式类似：

```
public class LifePack extends Thread{
    public int healthBonus;
    public int lifetime;
    public String type;
    public Point location;
    public boolean visible;

    public LifePack(int x,int y,int lifetime){
        location=new Point(x, y);
        this.lifetime=lifetime;
        this.type="health_pack";
        this.visible=true;
        this.start();

    }

    public void run(){
        while(true){

            if(this.lifetime>0){
                try{
                    Thread.sleep(1);
                    if(lifetime%1000==0){
                        System.out.println("Life pack "+this.getId()+" will be disappeared in "+this.lifetime/1000+" s");
                    }
                    this.lifetime--;
                }
                catch(Exception ex){
                    ex.printStackTrace();
                }
            }
            else{
                this.visible=false;
                this.interrupt();
                break;
            }
        }
        System.out.println("Life pack visibility = "+this.visible);
    }

} 
```

我想将新创建的 LifePack 对象添加到数组列表中，如下所示：

```
public ArrayList<LifePack> lifePacks;
lifePacks = new ArrayList<LifePack>();

lifePacks.add(new LifePack(x, y, lifeTime)); 
```

每次创建新的生命包时，我都会将该生命包对象添加到上面的数组列表中。一旦生命包的生命周期到期，我想将上述类中的“**可见”布尔变量设置为“** **false** ”，以便我可以检查该变量以用于其他目的。

但我没有得到我想要的输出。我可以将正在运行的线程对象添加到上面的数组列表中并保持线程状态运行，还是我必须移动到不同的实现？如果有解决方案，请有人帮我解决这个问题。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:45:42.280

正如已经指出的那样，创建线程是一个坏主意。特别是，一旦您的应用程序达到存在大量生命包的地步。另请注意，在构造函数中启动线程是非常糟糕的做法。如果你想使用普通线程，建议实现一个可运行的（java.lang.Runnable）。

但是，总的来说，我强烈建议您使用 java.util.concurrent 包中提供的 Java 并发抽象：http: [//docs.oracle.com/javase/6/docs/api/java/util/concurrent/ package-summary.html](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/package-summary.html)使用 ExecutorService 来运行 callables (java.util.concurrent.Callable) 允许您很容易地改变线程数。

我还会质疑您将所有生命包存储在同一个集合中并为每个生命包分配状态（可见性）的想法。我不由自主地想到了以下场景：一旦游戏运行了一段时间，你最终会得到大量的救生包，其中大部分都不再使用了。因此，您可能需要考虑为 lifepack 所处的不同状态设置不同的集合。这也将使丢弃对象变得非常容易（无需遍历集合）。假设这些集合将被多个线程访问，您希望它们是线程安全的。为此，您还可以在 java.util.concurrent 包中找到各种类型的集合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T13:11:56.077

我同意 dirkk 的观点，即你会启动太多线程。但要回答你的问题，也许你应该考虑使用 AtomicBoolean 来显示。

[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/atomic/AtomicBoolean.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/atomic/AtomicBoolean.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T13:40:31.667

从我所见，一个线程检查列表中的某些条目是否为假，其他线程将其设置*为假，这需要是线程安全*的。

您可以通过在更新操作期间同步列表本身来做到这一点

```
 synchronized(list){
       //update the needed entry to false
  } 
```

# javascript - 而由于水平滚动而无法单击链接的自动化不起作用

> ID：16192590
> 
> 赞同：0
> 
> 时间：2013-04-24T12:55:22.350
> 
> 标签：javascript, selenium, automation

我正在使用 JavaScript 自动化网页，但在自动化时我无法点击隐藏在滚动后面的链接。我为水平滚动编写了代码，但它不起作用。那么你能帮助我如何水平滚动，以便我可以点击链接

这是我的代码：

```
LinkPath = sampleUtility.getXpathEntity(driver,
              exlXpath.get("LNK_SAMPLE_DATASET").toString(), 
              DSetName, 
              exlXpath.get("LNK_DATASET_DELETE").toString());
Thread.sleep(min_wt);

WebElement box = driver.findElement(
                        By.xpath(exlXpath.get("LNK_SAMPLE_DATASET").toString()));
try{
  try{
    driver.findElement(By.xpath(LinkPath.toString())).click();
    ((JavascriptExecutor) driver).executeScript("arguments[0].scrollRight();", box);
  }catch(Exception e){
    ((JavascriptExecutor) driver).executeScript("arguments[0].scrollRight();", box);
  }
  driver.findElement(By.xpath(LinkPath.toString())).click();
}
catch(Exception e){} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T22:48:00.293

试试这段 Javascript，它比 scrollRight() 和 scrollLeft() 更适合我

```
private void scrollToElement(WebElement element){
((JavascriptExecutor) driver).executeScript("arguments[0].scrollIntoView(true);", element);
} 
```

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T15:56:41.863

XPath 查看 xhtml 标记，而不是 UI，因此在您的网页上向左或向右滚动不会帮助 selenium 找到您的链接。您需要仔细检查您的 xpath。[有一个用于 Firefox 的工具，可以为您构建整个命令](http://docs.seleniumhq.org/projects/ide/)。我建议使用它。

# c# - foreach 循环抛出空异常，但对象不是

> ID：16192592
> 
> 赞同：8
> 
> 时间：2013-04-24T12:55:25.413
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-4, razor

我有 mvc 4 母版页，我想在页面顶部显示用户特定的菜单我正在检索用户数据

```
@using Agenda_MVC.Engine
@{

    List<Format> ContactEvents = Agenda_MVC.Classes.Utility.GetContactEventFormats(User.Identity.Name);
} 
```

但是当我遍历列表时它会抛出空异常，在设置断点时列表不为空它有项目。

```
@foreach (var ContactEvent in ContactEvents)
                {
                    <div class="@(ContactEvent.EventId == ViewContext.RouteData.Values["id"].ToString() ? "StaticMenuItemSelected" : "StaticMenuItem")">
                       @Html.ActionLink(ContactEvent.Name.Length > 15 ? ContactEvent.Name.Substring(0, 15) + "..." : ContactEvent.Name, "Agenda", "Portal", new { id = ContactEvent.EventId }, new { @title = ContactEvent.Name })
                    </div>    
                } 
```

![在此处输入图像描述](https://i.stack.imgur.com/66j4B.png)

我不知道我做错了什么。

* * *

方法代码如下我正在从 Web 服务中检索它

```
public static List<Format> GetContactEventFormats(string ContactId)
{
    //List<Format> EventFormats = HttpContext.Current.Cache["EventFormats" + ContactId] as List<Format>;
    List<Format> EventFormats = HttpContext.Current.Session["EventFormats" + ContactId] as List<Format>;

    if (EventFormats == null)
    {
        EngineClient EngClient = Params.GetEngineClient();
        EventFormats = EngClient.GetContactEventFormats(ContactId);

        if (EventFormats != null && EventFormats.Count > 0)
        {
            //HttpContext.Current.Cache.Insert("EventFormats" + ContactId, EventFormats, null, DateTime.Now.AddMinutes(30), TimeSpan.Zero);
            HttpContext.Current.Session["EventFormats" + ContactId] = EventFormats;
        }
    }

    return EventFormats == null ? new List<Format>() : EventFormats;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T12:57:11.450

我假设`ContactEvent.Name`或`EventId`为空

`debugger`您可以通过在将 ContactEvent.Name 分配给值之前指定条件来检查这两个值是否为空`ActionLink`。

```
<div class="@(ContactEvent.EventId == ViewContext.RouteData.Values["id"].ToString() ? "StaticMenuItemSelected" : "StaticMenuItem")">

                @if (ContactEvent.Name != null) {
                   @Html.ActionLink(ContactEvent.Name.Length > 15 ? ContactEvent.Name.Substring(0, 15) + "..." : ContactEvent.Name, "Agenda", "Portal", new { id = ContactEvent.EventId }, new { @title = ContactEvent.Name })
                }
                </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T12:59:24.303

在调试期间查看 List 中的 ContactEvent 对象。

也许（可能）一个或多个字段，例如：`ContactEvent.EventId`或`ContactEvent.Name`为空。

# java - 编译器设计：存储函数签名的最佳方式？

> ID：16192594
> 
> 赞同：0
> 
> 时间：2013-04-24T12:55:34.110
> 
> 标签：java, compiler-construction

我计划存储所有允许重载的函数签名。现在我有一个看起来像这样的嵌套 HashMap：

`HashMap<String,HashMap<ArrayList<Type>,Object>>`

其中第一个键 ,`String`包含函数的名称。第二个键 ,`ArrayList<Type>`包含参数数据类型。现在，我知道使用 ArrayList 作为键是一种糟糕的做法，所以我想知道是否有更好的解决方案来存储函数签名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-05T10:55:42.607

设计很好。我最终保留了这个设计。

# java - 将 java 项目部署到远程 glassfish 服务器

> ID：16192597
> 
> 赞同：3
> 
> 时间：2013-04-24T12:55:38.043
> 
> 标签：java, deployment, glassfish

我们有一个在 netbeans 7.3 中制作的项目，并且即将将其部署到远程 glassfish 服务器，一切都已正确配置和设置，我们项目的连接池也在 glassfish 中生成。

目前我们在部署到远程服务器时收到此错误：

> deploy?DEFAULT=D:\SVN\PTS62\Applicaties\Rekeningrijderwebsite\RekeningRijder\dist\RekeningRijder.war&name=RekeningRijder&contextroot=/RekeningRijder&force=true 在 GlassFish Server 3+ 上失败
> 
> 部署期间发生错误：准备应用程序时出现异常：异常 [EclipseLink-4002] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DatabaseException
> 
> 内部异常：java.sql.SQLException：分配连接时出错。原因：类名错误或未设置类路径：com.mysql.jdbc.jdbc2.optional.MysqlDataSource
> 
> 错误代码：0。有关详细信息，请参阅 server.log。

服务器生成的消息：

> 原因：javax.resource.ResourceException：类名错误或未设置类路径：com.mysql.jdbc.jdbc2.optional.MysqlDataSource
> 
> ```
>  at com.sun.gjc.common.DataSourceObjectBuilder.getDataSourceObject(DataSourceObjectBuilder.java:292)
> 
>             at com.sun.gjc.common.DataSourceObjectBuilder.constructDataSourceObject(DataSourceObjectBuilder.java:114)
> 
>             at com.sun.gjc.spi.ManagedConnectionFactory.getDataSource(ManagedConnectionFactory.java:1307)
> 
>             at com.sun.gjc.spi.DSManagedConnectionFactory.getDataSource(DSManagedConnectionFactory.java:163)
> 
>             at com.sun.gjc.spi.DSManagedConnectionFactory.createManagedConnection(DSManagedConnectionFactory.java:102)
> 
>             at com.sun.enterprise.resource.allocator.LocalTxConnectorAllocator.createResource(LocalTxConnectorAllocator.java:87)
> 
>             ... 62 more 
> ```

谷歌以前不是很有帮助，所以希望你们能帮助我

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T13:06:26.357

您可能需要一个 mysql / java 连接器。

你可以在[那里](http://www.mysql.fr/downloads/connector/j/)找到它。从存档中提取 mysql-connector-java .jar。然后将其放入 glassfish 外部 lib 目录 {INSTALL DIR}/glassfish/domains/domain1/lib/ext。

重新启动 glassfish 服务器。

[有关此答案](https://stackoverflow.com/a/10966024/2015707)的更多详细信息。如果这不是您想要的，或者如果它不起作用，请告诉我们。@+

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-02T03:24:38.710

对，你只是缺少mysql lib，找到并下载`mysql-connector-java-5.x.x-bin.jar`副本`E:\Projects\glassfish3.1.1\glassfish\lib`然后重新启动服务器并享受！

# php - 获取所有国家的当前时间

> ID：16192599
> 
> 赞同：-8
> 
> 时间：2013-04-24T12:55:40.337
> 
> 标签：php, datetime

我有一个短信网站，允许人们发送短信。我想添加一个日程安排功能，人们可以在其中写下他们希望发送 SMS 的时间。一切都将存储在数据库中，即消息和时间。我将创建一个 cron 作业，每分钟运行一个 PHP 脚本并检查是否有预定的 SMS。我将获取目的地电话号码的国家代码并将其转换为国家名称。

我的问题是：如何通过名称获取特定国家/地区的当前时间。我搜索了谷歌，但没有好的答案。我害怕使用免费的日期和时间 API。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T13:00:42.853

为什么不将计划时间转换为`localtime`在插入数据库之前？将为您节省很多不必要的`date`操作。

此外，一些国家（美国、俄罗斯、中国）有多个时区。

# paypal - 将现有的经常性捐款导入贝宝

> ID：16192600
> 
> 赞同：1
> 
> 时间：2013-04-24T12:55:43.447
> 
> 标签：paypal, donations

目前，我正在与几家非营利组织（通常每月收到经常性捐款）合作，以从他们当前的网关迁移到 Paypal。

有什么方法可以将他们当前捐赠者的付款信息导入 Paypal？如果不是，你会推荐哪一个来帮助他们的捐赠者迁移过来？

1) 在他们的网站上设置一个特殊部分并作为捐赠者重新订阅？或 2) 发送当前经常性金额的发票（如果可以通过电子邮件发送订阅）？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T14:17:49.383

这取决于您当前使用的系统类型，特别是您将从 PayPal 使用的服务类型。您打算使用 PayPal 的定期付款、增强型定期付款、订阅还是 Payflow 的定期账单？如果您拥有所有贡献者的信息，例如信用卡信息、姓名、地址等，并且您将使用 PayPal 的定期付款或 Payflow 的定期账单，您可以使用 API 在您的 PayPal 或 Payflow 帐户上创建配置文件，而无需必须让贡献者自己做任何事情。如果您要使用 PayPal 的增强型定期付款或订阅，那么您需要买家重新注册以进行定期捐赠。您可以使用上面提到的任一选项。

# visual-studio-2010 - Windows 服务不会停止“启动”

> ID：16192603
> 
> 赞同：0
> 
> 时间：2013-04-24T12:55:48.627
> 
> 标签：visual-studio-2010, service

我创建了一个服务和一个安装程序。我已经在计算机上安装了我的服务。在服务屏幕中，我可以看到服务正在启动。它不会停止开始，我不能暂停它，什么都没有。我唯一能做的就是卸载。

我已经尝试将 Visual Studio 附加到过程中，但没有真正发生。如何调试此服务？我想知道发生了什么事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:56:36.200

如果您在处理程序中运行了太多/所有代码，通常会发生这种情况[`OnStart`](http://msdn.microsoft.com/en-us/library/system.serviceprocess.servicebase.onstart.aspx)- 您应该在其中启动然后返回。只有在您返回后，您的服务才被视为已启动。

您通常会创建一个或多个 new[`Thread`](http://msdn.microsoft.com/en-gb/library/system.threading.thread.aspx)来运行您想要一直运行的代码，[`Start()`](http://msdn.microsoft.com/en-gb/library/a9fyxz7d.aspx)然后返回。或者创建隐式运行它们自己的线程的对象（例如 WCF's [`ServiceHost`](http://msdn.microsoft.com/en-us/library/system.servicemodel.servicehost.aspx)）。

然后，你的工作就是[`OnStop`](http://msdn.microsoft.com/en-us/library/system.serviceprocess.servicebase.onstop.aspx)优雅地关闭它们——例如[`Set`](http://msdn.microsoft.com/en-gb/library/system.threading.eventwaithandle.set.aspx)，[`ManualResetEvent`](http://msdn.microsoft.com/en-gb/library/system.threading.manualresetevent.aspx)然后[`Join`](http://msdn.microsoft.com/en-gb/library/95hbf2ta.aspx)在这些线程上。

例如，您的课程可能看起来像这样（未经测试）

```
public class MyService : ServiceBase {
   private ManualResetEvent _stop = new ManualResetEvent(false);
   private Thread _worker;

   public override void OnStart(string[] args) {
    _worker = new Thread(DoStuff);
    _worker.Start();
   }

   public override void OnStop() {
    _stop.Set();
    _worker.Join();
   }

   private void DoStuff() {
    while(!_stop.WaitOne(0)) {
     //Do something useful here.
    }
   }
 } 
```

# c++ - VC 2008 致命错误 C1047 cplus 修复？

> ID：16192604
> 
> 赞同：2
> 
> 时间：2013-04-24T12:55:51.847
> 
> 标签：c++, visual-studio-2008

大家好，我正在使用 VC 2008 c++，我得到了一些不属于我的项目。该项目成功重建，但问题是该项目没有创建`.lib`另一个项目所需的所有文件，所以我得到了：

```
1>------ Build started: Project: application_manager, Configuration: Release Win32 ------
1>Linking...
1>LINK : warning LNK4224: /OPT:NOWIN98 is no longer supported;  ignored
1>fatal error C1047: The object or library file 'C:\Users\modestas\Desktop\代码\server\../contrib/lib/tinyxml/\tinyxml_stl.lib' was created with an older compiler than other objects; rebuild old objects and libraries
1>LINK : fatal error LNK1257: code generation failed
1>Build log was saved at "file://C:\Users\modestas\Desktop\代码\server\temp\application_manager\Release\BuildLog.htm"
1>application_manager - 1 error(s), 1 warning(s)
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

这个项目已经有了`tinyxml_stl.lib`，但是tinyxml项目没有建立一个新的，所以我得到了这个错误如何解决这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T18:21:01.063

该错误是由于`tinyxml_stl.lib`使用比您用于编译的编译器版本更旧的编译器编译的`application_manager`

由于您的 tinylib 项目不再创建此文件作为输出，我假设这只是前一个开发人员给您留下一堆文件的结果。如果您更改`application_manager`链接到由 tinyxml 创建的正确二进制文件并删除指向您的链接，`tinyxml_stl.lib`您应该能够编译。

# ember.js - 将 ManyToMany 记录保存到 rails 后端

> ID：16192606
> 
> 赞同：1
> 
> 时间：2013-04-24T12:55:55.040
> 
> 标签：ember.js, ember-data

我在使用 ember-data 将关联记录保存到 Rails 后端时遇到问题。

楷模：

```
FP.Student = DS.Model.extend

  firstName:    DS.attr('string')
  lastName:     DS.attr('string')
  imageUrl:     DS.attr('string')

  room:         DS.hasMany('FP.Room')
  parents:      DS.hasMany('FP.Parent')
  observations: DS.hasMany('FP.Observation')

FP.Observation = DS.Model.extend

  name:         DS.attr('string')
  description:  DS.attr('string')
  observedAt:   DS.attr('string')

  room:         DS.belongsTo('FP.Room')
  educator:     DS.belongsTo('FP.Educator')
  students:     DS.hasMany('FP.Student', embedded: true) 
```

我想将选择视图中的预先存在的学生列表添加到新的观察中。假设学生模型已经收集在`controller.selectedStudents`我做：

```
 saveObservation: ->
    console.log "ObservationsController saveObservation"
    obs = @get('newObservation') # new observation is created previously
    obs.set('observedAt', new Date)
    obs.set('room', @get('room'))
    obs.set('educator', @get('room.educators').objectAt(0))
    selected = @findSelectedStudents()
    obs.get('students').pushObjects(selected)
    obs.get('transaction').commit()

findSelectedStudents: ->
    @get('selectedStudents').map( (id) =>
      @get('students').find( (student) ->
        student.id is id
      )
    ) 
```

发送回服务器的结果 json 如下所示（来自服务器日志）：

```
Started POST "/observations" for 127.0.0.1 at 2013-04-24 21:04:12 +1000
Processing by ObservationsController#create as JSON
  Parameters: {"observation"=>
{"name"=>"DDS", "description"=>"asdsad", "observed_at"=>"Wed Apr 24 2013 21:04:04 GMT+1000 (EST)", "room_id"=>203, "educator_id"=>535, 
"students"=>[{"id"=>605, "first_name"=>"Steven", "last_name"=>"Richards", "image"=>"https://www.filepicker.io/api/file/CTUCsDGwdEVaS"},
 {"id"=>607, "first_name"=>"Anna", "last_name"=>"Stone", "image"=>"https://www.filepicker.io/api/file/CTUCsDGwdEVaS"}]}}
 Completed 500 Internal Server Error in 5ms 
```

很抱歉布局，但有 2 名学生，有完整的属性列表。服务器抛出的错误是`ActiveRecord::AssociationTypeMismatch - Student(#70343949384800) expected, got ActiveSupport::HashWithIndifferentAccess(#70343953246680)`

现在，我使用 ajax 回调将学生序列化为一个`student_ids`数组，其中仅包含学生 ID。服务器接受此调用并建立关联。但我更喜欢使用 ember-data，而不是像手动 ajax 解决方案那样遇到手动记录管理的麻烦。

我已经尝试在 Observation 上设置一个数组`student_ids`，但是没有任何东西被发送回服务器。

我认为如果关联被命名，当前调用可能会起作用`student_attributes`，但如果学生记录不脏，发送所有数据似乎是浪费时间。

那么，我是否应该尝试覆盖序列化程序以发回一组 student_ids？还是我错过了其他东西？

谢谢，

马丁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T22:22:16.330

为了在服务器上保持多对多关系，我正在破解序列化程序的方法以在映射`hasMany`中添加一个选项。`serialized`

这是序列化程序（CoffeeScript）：

```
App.Serializer = DS.RESTSerializer.extend

  # redefine to make it possible to serialize a relationship by an array of ids
  # to enable it, a 'serialized' property should be set to 'ids' in the adapter mapping
  # the key in the hash will be the type of the object in the relation ship + _ids'
  # example : for an hasMany('App.Category'), the key will be category_ids
  addHasMany: (hash, record, key, relationship) ->
    type = record.constructor
    name = relationship.key

    serializedType = @serializedType type, name

    if serializedType is 'ids'
      key = @singularize(@keyForAttributeName(type, name)) + "_ids"
      manyArray = record.get name
      serializedIds = []
      manyArray.forEach (record) ->
        serializedIds.push record.get('id')
      hash[key] = serializedIds
    else
      return @_super hash, record, key, relationship

  # method to access the serialized option in adapter mapping
  serializedType: (type, name) ->
    @mappingOption type, name, 'serialized' 
```

这是一个映射配置示例：

```
App.Adapter.map App.Product,
  categories:
    serialized: 'ids' 
```

有了这个，当我提交一个`Product`json 将包含一个`category_ids`包含相关类别 ID 数组的键。

更新：

要正确使用`App.Serializer`定义，您应该将其添加到应用程序的适配器中：

```
App.Adapter = DS.RESTAdapter.extend
  serializer: App.Serializer 
```

要在您的应用程序中使用此适配器，您必须在 store 中设置它：

```
App.Store = DS.Store.extend
  adapter: 'App.Adapter' 
```

# eclipse - Eclipse 打开空白工作区

> ID：16192607
> 
> 赞同：7
> 
> 时间：2013-04-24T12:55:57.900
> 
> 标签：eclipse, macos, workspace, eclipse-juno

我有一个奇怪的问题，发生以下情况：

*   全新的 Eclipse Juno 安装（应用了所有更新）
*   工作正常一段时间询问我想在启动时使用对话框打开哪个工作区
*   几天后它不再提示我输入工作区，而是在 /Users/myself/Documents 中打开空白的工作区

如果我检查“首选项-> 工作区-> 启动和关闭”一切似乎都很好，列表中唯一的工作区是我创建的工作区，并且未选中“不提示输入工作区”的**复选框**。

这已经在新的 eclipse 安装和新的硬盘驱动器上发生了几次（同一台机器，但我更换了硬盘驱动器，重新安装了操作系统以及其他原因，现在又发生了）。

我在：

*   OSX 10.7.5
*   Eclipse Juno（服务版本 2）

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-06-10T09:56:41.390

我在 OSX 上遇到了完全相同的问题，无缘无故，有一天，Eclipse 将启动一个新的空白工作区！

对于所有愚蠢的答案和响应者：是的，我知道如何设置和选择默认工作区！并且不创建新工作区、重新导入大量项目并在我的 Toad Extension 下丢失所有 30 多个数据库连接，这不是一个选项。

我发现的是

*   出于某种原因，Eclipse 创建了一个目录，该目录`/Users/user_name/Documents/workspace`是它启动时使用的空白工作区（错误地）
*   我平时的工作空间在`/Users/user_name/Documents/Development/eclipse`

解决方案是（这是在Mac OSX上，不知道在Windows上是否相同）：

1.  转到运行 Eclipse 的 Eclipse 目录（我的是`/Applications/eclipse`）
2.  在`{eclipse_dir}/configuration`打开文件`config.ini`
3.  找到该行`osgi.instance.area.default=@user.home/...`并确认它指向伪造的工作区目录。
4.  修改此条目的路径以指向正确的工作空间
5.  保存`config.ini`文件。
6.  尝试启动 Eclipse，它现在应该会打开您的工作区。
7.  如果您的 Eclipse 现在无法加载插件，请转到您的工作区目录并查找该`.metadata`目录（它是隐藏的）。在该`.metadata`目录中，删除该`.mylyn`目录并重新启动 Eclipse。
8.  一旦 Eclipse 启动并加载了正确的工作区，请执行适当的 Eclipse 关闭以确保您的工作区已正确关闭并保存。

这适用于 Eclipse Juno。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-01T03:55:57.430

只需运行此命令就可以帮助我 **eclipse.exe -data C:\Development\Eclipse\Workspace**

仅供参考，这是由于安装了一些插件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-14T08:06:46.770

我在 Windows 上的两个单独的 Eclipse 安装上发生了同样的问题，没有安装任何插件。

我可以通过单击*File > Switch Workspace*来获得我的工作工作区，但是再次关闭和打开 Eclipse 会将其重置为默认工作区。

显然解决这个问题的方法是通过在*General > Startup and Shutdown > Workspaces中勾选**Prompt for workspace on startup*设置来强制 Eclipse 保存 Workspace 设置，我已将其关闭。

 *下次 Eclipse 打开时，它要求我提供工作区，并且它在列表中将我正确的一个放在首位。我要求不再提示它，现在当我再次启动 Eclipse 时它会打开正确的工作区。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-05T11:18:42.387

我按照[JJ-za 的回答](https://stackoverflow.com/a/17021193/2294676)解决了这个问题，除了第 2 步和第 3 步：

> 2.  在 {eclipse_dir} **/configuration/.settings**打开文件**org.eclipse.ui.ide.prefs**（当 Eclipse 没有运行时）
>     
>     
> 3.  找到该行**`RECENT_WORKSPACES=`**并确认工作空间指向正确的工作空间目录**，并且多个工作空间由`\n`***

# javascript - 在一页上监听 HTML5 localStorage 变量变化

> ID：16192609
> 
> 赞同：0
> 
> 时间：2013-04-24T12:56:04.743
> 
> 标签：javascript, html, local-storage, dom-events, listen

我尝试在[http://html5demos.com/storage-events](http://html5demos.com/storage-events)中进行类似的操作，但事件在同一页面上触发，而不是在第二个页面上。（我在一页上有几个网络应用程序）

我寻找“侦听 JavaScript 中的变量更改”，但没有关于 localStorage 变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:06:26.787

你可以试试看这个 -> [http://www.w3schools.com/html/html5_webstorage.asp](http://www.w3schools.com/html/html5_webstorage.asp) 和这个 -> [http://www.w3schools.com/HTML/tryit.asp?filename=tryhtml5_webstorage_local_clickcount](http://www.w3schools.com/HTML/tryit.asp?filename=tryhtml5_webstorage_local_clickcount)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T15:00:57.350

我的理解是，并非所有浏览器都会在同一页面上触发存储事件，我将存储事件作为我的[store.js API](http://github.com/nbubna/store)的可能部分进行了调查，但不得不将事件支持降级为扩展，因为实现是如此不一致，尤其是在该区域。该扩展名在[这里](https://raw.github.com/nbubna/store/master/src/store.bind.js)，并且由于这个问题，我的库中对它的测试都使用了 iframe。

# c# - json 接受单个值作为数组

> ID：16192614
> 
> 赞同：2
> 
> 时间：2013-04-24T12:56:21.103
> 
> 标签：c#, .net, json

如何json接受单个值作为数组？

这个 json 抛出异常：

> { "code": "1", "message": "OK", "response": { "partners": { "id": "33", "name": "", "clienttypeid": "29", “标志”：“”，“描述”：“”，“网站”：“www.site.com”} } }

这个 json 解析正确：

> {“代码”：“1”，“消息”：“OK”，“响应”：{“合作伙伴”：[{“id”：“33”，“名称”：“”，“clienttypeid”：“29” ，“标志”：“”，“描述”：“”，“网站”：“www.site.com”}，{“id”：“34”，“名称”：“”，“clienttypeid”：“29 ", "标志": "", "描述": "", "网站": "www.site.com"} ] } }

模型：

```
public class Partner
{
    public string id { get; set; }
    public string name { get; set; }
    public string clienttypeid { get; set; }
    public string logo { get; set; }
    public string description { get; set; }
    public string website { get; set; }
}

public class Response
{
    public List<Partner> partners { get; set; }
}

public class RootObject
{
    public string code { get; set; }
    public string message { get; set; }
    public Response response { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T14:03:29.500

如果它是单个对象，我使用[Json.net](http://json.codeplex.com/)将其转换为数组`partners`

```
string Normalize(string json)
{
    var jobj = JObject.Parse(json);
    if (!(jobj["response"]["partners"] is JArray))
    {
        jobj["response"]["partners"] = new JArray(jobj["response"]["partners"]);
    }
    return jobj.ToString();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T12:59:27.630

如果您尝试反序列化为 a `List`，请使用数组表示法，即使只有一个元素

```
{
    "code":"1",
    "message":"OK",
    "response":{
        "partners":[
            {
                "id":"33",
                "name":"",
                "clienttypeid":"29",
                "logo":"",
                "description":"",
                "website":"www.site.com"
            }
        ]
    }
} 
```

# sql - 使用来自另一个表的列的范围/条件从一个表中获取数据

> ID：16192621
> 
> 赞同：1
> 
> 时间：2013-04-24T12:56:30.823
> 
> 标签：sql, sql-server, join

我有一个表说“Table1”，其中有大量数据存储在列名“Value”下，我有另一个表说“Table2”，其中包含“from”和“to”列。我想对“Table1”的“value”列执行“between”操作，操作数将来自“Table2”的“from”和“to”列。

例如：

```
Table1      Value
            -------
            10
            11
            12
            13
            14
            15

Table2      from     to
           --------------
           1          3
           4          10
           5          15

operations to be performed:    select value from Table1 where value between 1 and 3 
                               select value from Table1 where value between 4 and 10
                               select value from Table1 where value between 5 and 15 
```

输出将是这三个操作的联合。

PS它们之间没有共同的列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:03:31.393

我想这就是你所追求的。它返回`Table1`匹配范围内的任何值`Table2`。

DECLARE @t1 table (value int) DECLARE @t2 table (fr int, t int, iname varchar(20))

```
INSERT INTO @T1
VALUES
    (10)
    ,(11)
    ,(12)
    ,(13)
    ,(14)
    ,(15)

INSERT INTO @t2
VALUES
    (1, 3, 'First')
    ,(4, 10, 'Second')
    ,(5, 15, 'Third')

SELECT
  t1.value, t2.iname
FROM
  @t1 t1
INNER JOIN
  @t2 t2
    ON t1.Value BETWEEN t2.fr and t2.t 
```

回报：

```
10  Second
10  Third
11  Third
12  Third
13  Third
14  Third
15  Third 
```

`10`显示两次，因为它匹配两个条件。您可能想在`DISTINCT`那里添加一个到您的选择。

# java - 如何使用 Java 更新 aes 加密

> ID：16192625
> 
> 赞同：0
> 
> 时间：2013-04-24T12:56:49.390
> 
> 标签：java, jdbc, prepared-statement

[我一直在搜索使用 java 在高级加密标准中执行更新查询的示例，但除了使用 AES_ENCRYPT 在 MySQL](https://stackoverflow.com/questions/14795736/how-to-write-an-update-query-in-mysql-with-aes-encrypt)中的更新查询之外找不到任何示例？.

下面的代码起作用，但数据没有加密，我的问题是如何使用 AES_ENCRYPT 更新数据

```
 try{
    String value1 =  jTextFieldID.getText();
    String value2 = jTextFieldFirstname.getText();
    String value3 = jTextFieldMiddlename.getText();
    String value4 = jTextFieldLastname.getText();
    String value5 = ((JTextField)txt_Date.getDateEditor().getUiComponent()).getText();
    String value6= Gander.toString();
    String value7= jTextFieldAddress.getText();
    String value8 = jTextFieldCity.getText();
    String value9 = jTextFieldPostcode.getText();    
    String sql = "update  Customer set ID='"
            +value1+"',FirstName='"
            +value2+"',MiddleName='"
            +value3+"',LastName='"
            +value4+"',DOB='"
            +value5+"',Gander='"
            +value6+"',Address='"
            +value7+"',City='"
            +value8+"',PostCode='"
            +value9+"'where ID='"
            +value1+"'";
    pst = conn.prepareStatement(sql);
    pst.execute();
     JOptionPane.showMessageDialog(null, "Data is updated");

}
catch(Exception e){
 JOptionPane.showMessageDialog(null, e);
} 
```

AES_DECRYPT

> 选择 ID，AES_DECRYPT（名字，'uk112'）作为名字，AES_DECRYPT（中间名，'uk112'）作为中间名，AES_DECRYPT（姓氏，'uk112'）作为姓氏，AES_DECRYPT（出生日期，'uk112'）作为 DOB，AES_DECRYPT（甘德, 'uk112' ) AS Gander, AES_DECRYPT( Address, 'uk112' ) AS Address, AES_DECRYPT( City, 'uk112' ) AS City, AES_DECRYPT( PostCode, 'uk112' ) AS PostCode FROM Customer

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:06:33.653

嗨，你试过这个吗？

```
String sql = "update  Customer set FirstName= AES_ENCRYPT(?,'uk112'),MiddleName= AES_ENCRYPT(?,'uk112'),LastName= AES_ENCRYPT(?,'uk112'),DOB=?,Gander= AES_ENCRYPT(?,'uk112'),Address= AES_ENCRYPT(?,'uk112'),City= AES_ENCRYPT(?,'uk112'),PostCode= AES_ENCRYPT(?,'uk112') where ID=?";

    pst = conn.prepareStatement(sql);
    pst.setString(1, value2);
    pst.setString(2, value3);
    pst.setString(3, value4);
    pst.setString(4, value5);
    pst.setString(5, value6);
    pst.setString(6, value7);
    pst.setString(7, value8);
    pst.setString(8, value9);
    pst.setString(9, value1);
    pst.execute(); 
```

# python - 使用 Python 发布 XML 文件

> ID：16192638
> 
> 赞同：6
> 
> 时间：2013-04-24T12:57:16.727
> 
> 标签：python, xml

我是 Python 新手，需要一些帮助。我的目标是向 URL 发送一些带有 post 请求的 XML，这将触发发送 SMS。

我有一个要发布到 URL 的小型 XML 文档。我可以在需要发布的 python 代码中引用我服务器上的 XML 文档，还是在实际的 python 代码中包含要发送的 XML 数据。有谁能帮我举个例子吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T12:58:33.157

如果您需要发送 XML，我建议您查看[requests](http://docs.python-requests.org/en/latest/)。它允许您使用 POST 请求轻松发送数据。

您应该能够使用请求直接从 Python 代码传输 XML 数据。

```
xml = """my xml"""
headers = {'Content-Type': 'application/xml'}
requests.post('http://www.my-website.net/xml', data=xml, headers=headers) 
```

如果您不想对 xml 文档进行硬编码，您也可以从文本文件中加载 xml 并将其发送。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T14:13:01.313

如果您不想使用外部库，则可以`urllib2`. 有关如何执行此操作的示例，请参[见此答案。](https://stackoverflow.com/a/3106518/754254)

要从文件中提取 XML，您只需要做

```
XML_STRING = open('path/to/xml_file').read() 
```

# mysql - syncdb后字段列表django中的未知列

> ID：16192644
> 
> 赞同：0
> 
> 时间：2013-04-24T12:57:40.263
> 
> 标签：mysql, django

在 Django 应用程序上进行一些升级。

需要更新数据库。在模型和数据库中添加了新功能。运行了syncDb，它运行良好。

但是该应用程序不允许新的更改....获取-“字段列表中的未知列”。

已经阅读了有关南的信息，但我目前只是在应用程序上做一些工作，不想添加任何不是原始的东西。

任何想法如何同步数据库和应用程序？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:37:04.940

如果您已经在数据库中创建了表并且没有使用 south，则有两个选项。第一个是删除表并使用 syncdb 重新创建它们，第二个是手动更改架构（这可能会很难而且很难看）。

至于南方……不要把它当成你可能不需要的一些不稳定的第三方应用。即使它有一些限制，它也是一个非常有用的工具，你只会从使用它的形式中受益，所以不要担心，继续使用它。

# javascript - 如何仅从 ajax().done() 追加一个 div

> ID：16192647
> 
> 赞同：1
> 
> 时间：2013-04-24T12:57:43.287
> 
> 标签：javascript, jquery

使用以下 javascript 时出现问题。当按下#search_room_button 时，它将运行并将#matched_rooms div 替换为整个网站的副本。但是，我只希望返回新的#matched_rooms div，从而替换旧的。如何才能做到这一点？

```
<script type="text/javascript">
    $(function() {
        $("#search_room_button").on('click', function() {

            $("#matched_rooms").html("<p>LOADING</p>");

            $.ajax({
                url: 'book.php',
                type: 'GET',
                data: {
                    'rtid': 1,
                    'date': $("#date").val(),
                    'time': $(".ui_tpicker_time").text(),
                    'duration': 4
                }
            }).done(function(data) {
                $("#matched_rooms").html(data, "#matched_rooms");
            })
        })
    });

</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T13:01:02.060

我想你正在寻找

```
$("#matched_rooms").html($(data).find("#matched_rooms").html()); 
```

顺便说一句，此功能还有一个（有限的）快捷方式[`.load()`](http://api.jquery.com/load/)：：

```
$("#matched_rooms")
  .html("<p>LOADING</p>")
  .parent().load('book.php #matched_rooms', {
    'rtid': 1,
    'date': $("#date").val(),
    'time': $(".ui_tpicker_time").text(),
    'duration': 4
  }); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-24T13:01:25.050

您可以使用[`$.load`](http://api.jquery.com/load/)而不是`$.ajax`.

```
$('#surrounding_element').load('book.php #matched_rooms', {
                'rtid': 1,
                'date': $("#date").val(),
                'time': $(".ui_tpicker_time").text(),
                'duration': 4
}); 
```

您应该在哪里更新您的 html 代码，例如：

```
<span id="surrounding_element">
    <div id="matched_rooms"></div>
</span> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-24T13:01:00.670

在我看来，您应该使用[`.load()`](http://api.jquery.com/load/)而不是- 它具有用AJAX 请求的*部分*`.get()`内容替换现有节点内容的内置功能。

 *请注意您的 DOM 结构 - jQuery 希望将原始元素的全部*内容*替换为指定元素本身，而不是指定元素的内容。

您应该将`#matched_rooms`元素包装在一个`#container`元素中，然后使用它：

```
<div id="container">
   <div id="matched_rooms"> ... </div>
</div> 
```

带代码：

```
$("#matched_rooms").html("<p>LOADING</p>");
$('#container').load('book.php #matched_rooms', { // NB: selector parameter!
    'rtid': 1,
    'date': $("#date").val(),
    'time': $(".ui_tpicker_time").text(),
    'duration': 4
}); 
```

不需要成功处理程序 - 插入回 DOM 是自动的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T13:00:19.117

尝试：`$("#matched_rooms").html(data.find('#matched_rooms').html());`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T13:00:24.183

我不完全明白你的意思，但也许是这样的： `$("#matched_rooms").html($(data).find("#matched_rooms"));`

（我假设ajax请求返回的数据返回整个页面）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-24T13:00:58.317

根据您的`data`html 的结构，这应该会有所帮助：

```
var newHtml = $('#matched_rooms', data);
$("#matched_rooms").html(newHtml); 
```

您/可能/需要`filter`根据您的 HTML 结构使用

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-24T13:03:01.223

这是可以做的：

```
get.done(function(data) { 
                var message1 = $(data).find('#message1');
                var message2 = $(data).find('#message2');
                var NewList = $(data).find('div');
                $('#error').html(message1.html());
                $('#results').html(message2.html()); 
```

**这是一个示例，不能复制和粘贴代码 ***

# reporting-services - 如何对基于 SSRS ReportBuilder 表中的表达式的列求和

> ID：16192652
> 
> 赞同：0
> 
> 时间：2013-04-24T12:58:03.293
> 
> 标签：reporting-services, reportbuilder3.0

如果有一列的值基于另一个字段，则表达式为

```
=iif(Fields!TaskType.Value = "Type1", Fields!Amount.Value, 0) 
```

我正在尝试使用 folooing exporession 在组总数中获得总和，但它给出了#Error（有或没有组名作为范围）：

```
=sum(iif(Fields!TaskType.Value="Type1", Fields!Amount.Value, 0), "GrpProjectNumber") 
```

这对我来说看起来不错。我究竟做错了什么？提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T13:57:03.827

我构建了一个简单的 DataSet 来尝试模仿你的：

```
select Amount = cast(100.0 as money), TaskType = 'Type1'
  union all select Amount = cast(100.0 as money), TaskType = 'Type1'
  union all select Amount = cast(100.0 as money), TaskType = 'Type2' 
```

我用你的表情复制了你的错误，但以下对我有用：

```
=Sum(IIf(Fields!TaskType.Value="Type1", Fields!Amount.Value, CDec(0)), "GrpProjectNumber") 
```

因此，您似乎走在正确的道路上；只需要将强制转换应用于表达式`CDec`中的`0`常量。

# sql-server - SQL Server sp_add_schedule Active_Start_Date 明天

> ID：16192654
> 
> 赞同：0
> 
> 时间：2013-04-24T12:58:08.467
> 
> 标签：sql-server, stored-procedures, schedule

我正在尝试创建一个将在凌晨 1:00 运行一次（明天）的作业。我认为这应该很容易，但我运气不佳。

本质上这是我想做的，但是 DATEADD 显然在这种情况下不起作用：

```
EXEC sp_add_schedule
@schedule_name = N'WebUpdateOnce',
@freq_type = 1,
@active_start_date = DATEADD(d,1,GETDATE()),
@active_start_time = 010000;    
GO 
```

在此先感谢您的帮助。

jh

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T14:35:35.390

有几件事：

*   您不能像那样动态设置存储过程参数。会很好，但这是不行的。
*   @active_start_date 的格式是格式为 YYYYMMDD 的字符串。您的 dateadd 将（可能）不会产生。

也就是说，这对我有用：

```
declare @start_date varchar(8) = convert(varchar(8), DATEADD(day,1,GETDATE()), 112)

EXEC sp_add_schedule
   @schedule_name = N'WebUpdateOnce',
   @freq_type = 1,
   @active_start_date = @start_date,
   @active_start_time = 010000; 
```

# java - 使 Javascript 函数可用于 Java 代码

> ID：16192656
> 
> 赞同：5
> 
> 时间：2013-04-24T12:58:17.863
> 
> 标签：java, javascript

### 问题描述

一个有点人为的例子来说明我的问题。想象一下，我们有一些 JavaScript 函数库，已经由一大群前端开发人员每天维护和更新。具体来说，想象一个这样的函数如下所示：

```
function employeesForStore(store) {
    var dictionary = {
        "downtown": ["Joe", "Mary", "Steve"],
        "uptown": ["Jules", "Vincent", "Matt"],
        // and so on for hundreds of locations
    };
    return dictionary[store];
} 
```

*注意：*请忽略此函数实现的细节。实际的函数可能比简单的 JSON 字典查找要复杂得多，并且假设我们不知道 js 函数的任何实现细节。我们所知道的是它接受一个字符串参数并返回字符串数组。

现在我们想在我们的 Java 代码中利用这个函数。也就是说，在我们的 Java 代码中，我们希望“加载”这个函数，然后能够多次调用它，传递`String`参数并接收`String[]`或`ArrayList<String>`结果。

到目前为止，通过搜索 SO 和 google，我了解到这将涉及使用：

*   `javax.script.ScriptEngineManager`
*   `javax.script.ScriptEngine`
*   也许`scriptEngine.getContext()`用于将值传递给函数并接收结果。

我对上述细节有点模糊，特别是因为我发现的大多数示例都涉及一次运行 javascript 代码，而不是使 javascript 函数可用于 Java。

### 我希望看到的示例代码

1.  假设 js 函数在文件“my_functions.js”中，将该文件加载到 Java 中，以便其所有函数都可以使用。
2.  调用`employeesForStore("downtown")`并将其结果存储在本机 java`String[]`或`List<String>`名为`downtownResults`.
3.  与 2 相同，但调用`employeesForStore("uptown")`并存储在变量中`uptownResults`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T13:06:50.033

您可以使用[Rhino API](https://developer.mozilla.org/en-US/docs/Rhino)在 java 中执行 JS 代码

本[教程](https://developer.mozilla.org/en-US/docs/Rhino/Embedding_tutorial#usingJSObjs)涵盖了请求的示例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T15:13:29.750

创建一个接口作为JavaScript 代码的[外观。](http://en.wikipedia.org/wiki/Facade_pattern)

下面是一个使用嵌入在 Oracle 的 Java 1.7 实现中的 Rhino 实现的示例：

```
package demo;
import java.io.*; import java.util.*;
import java.util.concurrent.atomic.AtomicReference;
import javax.script.*;

public class StoreData {
  public static interface Stores {
    public String[] employees(String store);
  }

  public static Stores stores() throws IOException, ScriptException {
    ScriptEngineManager sem = new ScriptEngineManager();
    ScriptEngine engine = sem.getEngineByName("JavaScript");
    AtomicReference<Stores> ref = new AtomicReference<>();
    engine.put("ref", ref);
    String adapt = "ref.set("
        + "new Packages.demo.StoreData.Stores({employees:employeesForStore})"
        + ");";
    try (Reader myFns = new FileReader("my_functions.js")) { // TODO encoding
      engine.eval(myFns);
      engine.eval(adapt);
      return ref.get();
    }
  }

  public static void main(String[] args) throws IOException, ScriptException {
    List<String> employees = Arrays.asList(stores().employees("uptown"));
    System.out.println(employees);
  }
} 
```

通过指定一个接口，我们让 Rhino 将 JavaScript 类型强制转换为 Java 类型（String、String[] 等）

JRE 规范[不保证](https://stackoverflow.com/a/5943863/304)应该提供哪些脚本引擎，因此依赖外部引擎可能是明智之举。我不知道[Nashorn](https://blogs.oracle.com/nashorn/entry/welcome_to_the_nashorn_blog)是否会改变这一点。

# asp.net-mvc - 在 ASP.NET MVC 中路由之前替换 url 中的字符

> ID：16192657
> 
> 赞同：0
> 
> 时间：2013-04-24T12:58:19.737
> 
> 标签：asp.net-mvc

我可以在路由之前操纵 url，即在 MVC 通过我的路由配置找到要使用的路由之前。

我想替换 url 中的一些字符，例如“www.test.com/ä/ö”到“www.test.com/a/o”。这样，如果用户在 url 中键入这些字母，仍然会使用正确的路线。

也许我可以使用一些东西来操纵网址？

**编辑：** 为了澄清我想要的内容，我将添加一个示例。假设我有一个如下所示的路由配置：“{controller}/{action}”。用户键入 www.test.com/MyCöntroller/MyÄction，我想将其路由到控制器“MyController”和操作方法“MyAction”。我必须在路由完成之前进行字符替换，否则将找不到匹配的路由。因此，我想在路由完成之前用“o”替换所有“ö”，用“a”（以及更多字符）替换所有“ä”。有没有办法做到这一点？

**Edit2：** 经过一些研究，似乎是 UrlRoutingModule 是第一个在 ASP.NET MVC 中获取 url 的。也许有一些方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-13T10:24:57.063

通过创建自定义路由处理程序，可以在这篇[文章](https://stackoverflow.com/questions/26333966/database-selection-before-routing-in-asp-net-mvc)中掠夺。

```
using System.Web.Routing; 
namespace My.Services
{
    public class MyRouteHander : IRouteHandler
    {
     ApplicationDbContext Db = new ApplicationDbContext();
     public IHttpHandler GetHttpHandler(RequestContext requestContext)
     {
         // Get route data values
         var routeData = requestContext.RouteData;
         var action = routeData.GetRequiredString("action");
         var controller = routeData.GetRequiredString("controller");

         //modify your action name here

             requestContext.RouteData.Values["action"] = actionName;
             requestContext.RouteData.Values["controller"] = "SpecialController";

         return new MvcHandler(requestContext);
     }
 } 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T16:13:59.253

查看[这个问题](https://stackoverflow.com/questions/3763398/how-can-i-change-a-route-value-then-redirect-to-that-route)的答案。

基本上你会想要使用`FilterAttribute`with `IActionFilter`，然后将注释应用到为路由提供服务的 ActionResult 。这样，您就有了一种中间方法来在路由配置处理 URL 之前对其进行操作。

# css - CSS IE10 - 0px 处的文本阴影传播属性

> ID：16192661
> 
> 赞同：1
> 
> 时间：2013-04-24T12:58:28.147
> 
> 标签：css

好的。所以我在电子邮件上有一个模糊动画：悬停。

您可能已经注意到 IE10 的新传播距离属性（据我所知，在发布时只有 IE10）。[http://msdn.microsoft.com/en-us/library/ie/hh673564(v=vs.85).aspx#text_shadows](http://msdn.microsoft.com/en-us/library/ie/hh673564(v=vs.85).aspx#text_shadows)。

我遇到的问题是，当传播距离设置为 0px 时，文本就会从我的动画中消失。这可能是一种肛门，但不应该与 0px 一起使用吗？

我不想在动画中的文本阴影中使用传播，而 IE10 迫使我这样做！

除了将 px 设置得如此之小以至于很难看到传播之外，还有什么想法吗？

```
@keyframes BlurMail{
    0% {text-shadow: 0 0 10px 0px white;}
    30% {text-shadow: 0 0 7px 0px white;}
    100% {text-shadow: 0 0 0px 0px white;}
}

#email:hover {
-ms-animation-name: BlurMail; 
-ms-animation-fill-mode: forwards;
-ms-animation-duration: 0.5s;
color: transparent;  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:14:25.197

您可以尝试使用特定于 IE10 的目标向动画添加传播，以便它显示出来，并且在所有其他浏览器中仍然使用 0px。

[对于某些情况，如 Internet Explorer 特定的 CSS 或 Internet Explorer 特定的 JavaScript 代码，如何仅针对 Internet Explorer 10？](https://stackoverflow.com/questions/9900311/how-do-i-target-only-internet-explorer-10-for-certain-situations-like-internet-e#comment13686363_9900311)

此链接在评论中有很多具体信息。

# apache - 如何使 .php 扩展名加载为 .html

> ID：16192664
> 
> 赞同：0
> 
> 时间：2013-04-24T12:58:30.107
> 
> 标签：apache, cpanel

我正在使用 CPANEL，有选项 Apache 处理程序。

如何使 .php 扩展名像 .html 一样加载？

例如，

```
example.com/index.php 
```

应该

```
example.com/index.html 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:03:15.267

使用 .htaccess 文件将子目录中的 .php 扩展名转换为 .html 扩展名（使用 .htaccess 文件将特定文件夹中所有文件的 .php 扩展名转换为 .html 扩展名）

```
RewriteEngine on
RewriteBase /subdirectory name

Example

RewriteEngine on
RewriteBase /gallery

RewriteCond %{THE_REQUEST} (.).php
RewriteRule ^(.).php $1.html [R=301,L]

RewriteCond %{THE_REQUEST} (.).html
RewriteRule ^(.).html $1.php [L] 
```

# python - mongodb 的 cursor.count() 是实际计数吗？

> ID：16192668
> 
> 赞同：1
> 
> 时间：2013-04-24T12:58:36.957
> 
> 标签：python, mongodb, count, pymongo

当我在**mongodb**中扫描一个集合并编辑所有项目时，我得到了这个问题：*扫描计数器 i 可以大于 cursor.count()。*为什么会这样？任何人都可以弄清楚吗？

db.baiduwords.find().count() = 805280

db.baiduwords.find().size() = 805280

但我去 1498400 或更多。

```
import pymongo
if __name__=='__main__':
    client = pymongo.MongoClient()
    i = 0
    collection = client.baike.baiduwords.find()
    for item in collection:
        i += 1
        MajorClass = []
        for cl in item['C']:
            c = cl
            while(1):
                a = client.baike.baiduclass.find({'s':c})
                if a.count():
                    a = a[0]
                    if a['f'] == u'Root':
                        MajorClass.append(c)
                        break
                    else:
                        c = a['f']
                else:
                    break
        item['MC'] = list(set(MajorClass))
        client.baike.baiduwords.save(item)
        if i%100 == 0:
            print "%d/%d"%(i, collection.count()) 
```

PS：printShardingStatus：这个数据库没有启用分片。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T04:01:08.833

可能是当您保存项目时，更新的文档可能会移动，导致光标多次返回文档。

来自[http://docs.mongodb.org/manual/faq/developers/#how-do-i-isolate-cursors-from-intervening-write-operations](http://docs.mongodb.org/manual/faq/developers/#how-do-i-isolate-cursors-from-intervening-write-operations)：

> 当游标返回文档时，其他操作可能会与查询交错：如果其中一些操作是导致文档移动的更新（在表扫描的情况下，由于文档增长），或者更改了索引字段查询使用的索引；那么光标将多次返回同一个文档。

# java - 正则表达式：星号重复运算符的所有格量词，即 \d**

> ID：16192672
> 
> 赞同：1
> 
> 时间：2013-04-24T12:58:52.383
> 
> 标签：java, regex, quantifiers

*来自 GLib 参考手册，[“正则表达式语法”](https://developer.gnome.org/glib/2.30/glib-regex-syntax.html)部分，“原子分组和所有格量词”小节：*

> 考虑`\d+foo`应用于字符串时的模式`123456bar`：在匹配所有 6 位数字然后未能匹配“foo”之后，匹配器的正常操作是再次尝试仅匹配 \d+ 项目的 5 位数字，然后再匹配 4，依此类推在最终失败之前。
> 
> 如果我们在前面的示例中使用`(?>\d+)foo`（称为*原子分组*），匹配器会在第一次未能匹配“foo”时立即放弃。
> 
> 当原子组的子模式只是单个重复项时，如上例所示，可以使用更简单的表示法，称为“占有量词”：`\d++foo`

我的问题是：有什么理由为什么没有星号（`*`）重复运算符的等价物？

Java 中的示例：

```
final String in = "123456";
// "plus" (+)
System.out.println(in.matches("\\d+"));     // true
System.out.println(in.matches("(?>\\d+)")); // true
System.out.println(in.matches("\\d++"));    // true
// "star" (*)
System.out.println(in.matches("\\d*"));     // true
System.out.println(in.matches("(?>\\d*)")); // true
System.out.println(in.matches("\\d**"));    // exception 
```

异常堆栈跟踪是：

```
Exception in thread "main" java.util.regex.PatternSyntaxException: Dangling meta character '*' near index 3
\d**
   ^
    at java.util.regex.Pattern.error(Pattern.java:1713)
    at java.util.regex.Pattern.sequence(Pattern.java:1878)
    at java.util.regex.Pattern.expr(Pattern.java:1752)
    at java.util.regex.Pattern.compile(Pattern.java:1460)
    at java.util.regex.Pattern.<init>(Pattern.java:1133)
    at java.util.regex.Pattern.compile(Pattern.java:823)
    at java.util.regex.Pattern.matches(Pattern.java:928)
    at java.lang.String.matches(String.java:2090) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T13:00:53.263

您可以添加`+`任何东西来制作所有格量词（它不是“加倍量词”）。所以

```
System.out.println(in.matches("\\d*+")); 
```

# jquery - jQuery 中止请求

> ID：16192673
> 
> 赞同：3
> 
> 时间：2013-04-24T12:59:00.080
> 
> 标签：jquery, http, abort

jQuery 有一些中止 API，可用于尝试中止请求。jQuery 真的可以自己决定中止 Ajax 请求吗？

例如，假设有一堆 Ajax 请求正在运行，其中一个返回了一些奇怪的请求，因此 jQuery 决定中止所有其他请求。

这会发生吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T14:04:53.973

除了`timeout`选项，一般 jQuery 不决定。**你**决定。

常规是始终参考`$.ajax()`返回您的内容。

意思是，而不是仅仅调用`$.ajax()`，而是这样做，`xhr = $.ajax()`。

`$.ajax()`返回一个 jqXHR 对象，它只是 Ajax 功能的 jQuery 包装器。见[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

现在你有了`xhr`，你可以`xhr.abort()`从任何你想要的地方打电话。

真的取决于你如何设计它，但**你**会调用 .abort() 。以下可能是一种可能的用例。

一个轮询函数和另一个检查用户是否空闲时间过长的函数。

如果用户空闲，则中止轮询 ajax，然后可能会提示一条消息，警告用户会话结束。

示例用例：

```
var mainXHR; // this is just one reference. 
             // You can of course have an array of references instead

function mainPollingFunction () {
    mainXHR = $.ajax({
        url: 'keepAlive.php',
        // more parameters here
        timeout: 10000, // 10 seconds
        success: function () {
            // server waits 10 seconds before responding
            mainPollingFunction(); // initiate another poll again
        }
    });
}

// Let's say this function checks if the user is idle
// and runs when a setTimeout() is reached
function otherFunction () {
    if ( /* if user is idle */ ) {
        if (mainXHR) mainXHR.abort(); // abort the ajax in case it's still requesting
    }
} 
```

# php - 是否可以内联访问 PHP 数组？

> ID：16192674
> 
> 赞同：1
> 
> 时间：2013-04-24T12:59:01.870
> 
> 标签：php, arrays

在 PHP 中，我有以下构造

```
$a = array(-1 => '-', 0 => '?', 1 => '+')[1]; 
```

这给出了语法错误。是否仍然可以在一条方便的行中避免多个 if/else 类或 switch/select 语句来做这些事情？我在想python哪里可以正常工作：

```
a = {-1:'-', 0:'?', 1:'+'}[1] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T13:02:53.360

它只适用于`PHP`5.5.0alpha1 [- 5.5.0beta2](http://3v4l.org/T1V2l)您现在应该使用变量，直到发布稳定版本。

```
$array =  array(-1 => '-', 0 => '?', 1 => '+');
print $array[1]; 
```

另一个有趣的事情是`PHP`支持[函数数组](https://wiki.php.net/rfc/functionarraydereferencing)解引用，`PHP 5.4`这意味着只需将数组包装在一个函数中就可以使其工作

```
function __($_) {
    return $_;
}

print __(array(-1 => '-', 0 => '?', 1 => '+'))[1]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T13:06:10.363

您可以创建一个辅助函数，以便您可以在一行中完成。

```
function array_get($array, $key)
{
    return $array[$key]
}

print array_get(array(-1 => '-', 0 => '?', 1 => '+'), 1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T13:23:11.497

不管是哪个 PHP 版本，如果你是在那之后，你的函数集中应该有一些东西：

```
function deref($subject) {
    return $subject;
}

function deref_array($array, $key) {
    return $array[$key];
} 
```

这对非常基本的函数允许您最经常地告诉 PHP 解析器您需要什么和意味着什么：

```
$a = deref_array(array(-1 => '-', 0 => '?', 1 => '+'), 1); 
```

在您的具体情况下，您只需要第二个功能，但第一个通常也很有用。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-24T13:11:11.230

单线方式是：

```
$a = array_pop(array_slice(array(-1 => '-', 0 => '?', 1 => '+'), 1, 1)); 
```

或者在一般情况下：

```
$x = array_pop(array_slice(foo(), $offset, 1)); 
```

这当然是可怕的。

# html - 有什么方法可以为 css 文件中的自定义字体提供这种清晰的属性吗？

> ID：16192675
> 
> 赞同：0
> 
> 时间：2013-04-24T12:59:02.643
> 
> 标签：html, css, fonts

我在 css 中使用一种自定义字体文件，但该字体不像 PSD 那样清晰。在 PSD 中，使用抗锯齿作为“锐利”。在 HTML 页面中，它看起来模糊了振动字体。我想用 CSS 或 HTML 来提高字体的清晰度。

我已经在 css 中尝试过“-webkit-font-smoothing”属性，但字体没有任何变化。

有什么方法可以为 css 文件中的自定义字体提供这种清晰的属性吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:14:29.243

不是真正的抗锯齿，但您可以使用`text-shadow`or`filter: drop-shadow()`尝试稍微平滑边缘...（`text-shadow`得到更广泛的支持）

例子：

```
.filter-antialias{
    -webkit-filter:drop-shadow(0 0 1px rgba(0,0,0,.5));
    -moz-filter:drop-shadow(0 0 1px rgba(0,0,0,.5));
    -ms-filter:drop-shadow(0 0 1px rgba(0,0,0,.5));
    -o-filter:drop-shadow(0 0 1px rgba(0,0,0,.5));
    filter:drop-shadow(0 0 1px rgba(0,0,0,.5));
}

.shadow-antialias{
    text-shadow:0 0 1px rgba(0,0,0,.5);    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-10T06:29:14.827

这适用于 MAC 操作系统。

`-webkit-font-smoothing:antialiased;`

# java - JAVA - 如何将形状数组保存到桌面上的文件？

> ID：16192676
> 
> 赞同：0
> 
> 时间：2013-04-24T12:59:12.607
> 
> 标签：java, shape

我有形状数组：

```
Shape[] myshape = new Shape[13]; 
```

我如何将其保存到文件中？

我找到了一些代码：

```
String fileName = "file.test";

BufferedOutputStream bs = null;

try {
    FileOutputStream fs = new FileOutputStream(new File(fileName));
    bs = new BufferedOutputStream(fs);
    bs.write(byte_array);
    bs.close();
    bs = null;
} catch (Exception e) {
    e.printStackTrace()
}

if (bs != null) try { bs.close(); } catch (Exception e) {} 
```

但是代码仅适用于字节数组，任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:09:03.447

或者您可以使用序列化来保存整个对象。

查看javadoc：

[http://docs.oracle.com/javase/6/docs/api/java/io/Serializable.html](http://docs.oracle.com/javase/6/docs/api/java/io/Serializable.html)

这里是stackoverflow的一个例子：

[序列化/反序列化机制](https://stackoverflow.com/questions/8586511/serialization-deserialization-mechanism)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T13:10:19.643

保存对象有很多选择，原生 Java 序列化就是其中之一。如果您不想使用序列化，您可以查看[XStream](http://xstream.codehaus.org/)，它将 POJO 写为 XML。

优点是它将写出人类可读的 XML，并且 oyu 不必为您的对象实现特定的接口。缺点是 XML 比较冗长。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T13:05:54.013

试试这样：

```
Shape[] myshape = new Shape[13];

// populate array

// writing array to disk
FileOutputStream f_out = new FileOutputStream("C:\myarray.data");
ObjectOutputStream obj_out = new ObjectOutputStream (f_out);
obj_out.writeObject(array);

// reading array from disk
FileInputStream f_in = new FileInputStream("C:\myarray.data");
ObjectInputStream obj_in = new ObjectInputStream (f_in);
Shape[] tmp_array = (Shape[])obj_in.readObject(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T13:08:49.750

您必须序列化您的形状以将它们转换为字节数组。我不认为 Shape 实现可序列化，所以你会自己做。

# mysql - 使用 Django 的 MySQL 外键

> ID：16192677
> 
> 赞同：1
> 
> 时间：2013-04-24T12:59:17.040
> 
> 标签：mysql, django

我在 Django 中使用 MySQL，并在定义外键后运行 syncdb 时出错。

```
class Contact(SalesforceModel):
    Account = models.ForeignKey(Account)

error:
django.db.utils.DatabaseError: (1075, 'Incorrect table definition; there can be only one auto column and it must be defined as a key') 
```

MySQL 无法处理表中的多个 auto_increment 字段。我认为这可能是一个不常见的问题，并且必须有一种方法可以使这项工作。

```
python manage.py sqlall reports

    CREATE TABLE 'Account' (
        'Id' integer AUTO_INCREMENT NOT NULL PRIMARY KEY,
        'Name' varchar(255) NOT NULL,
    );

    CREATE TABLE 'Contact' (
        'Id' integer AUTO_INCREMENT NOT NULL PRIMARY KEY,
        'FirstName' varchar(255) NOT NULL,
        'LastName' varchar(255) NOT NULL,
        'Account_id' integer AUTO_INCREMENT NOT NULL
    );

    ALTER TABLE 'Contact' ADD CONSTRAINT 'Account_id_refs_Id_2a366952' FOREIGN KEY ('Account_id') REFERENCES 'Account' ('Id');
    CREATE INDEX 'Contact_e5e91692' ON 'Contact' ('Account_id'); 
```

# macos - 在 OSX 中使用 mdtool 构建 Unity 游戏时 Corlib 不同步

> ID：16192678
> 
> 赞同：9
> 
> 时间：2013-04-24T12:59:20.300
> 
> 标签：macos, unity3d, mono

Unity3D 是一种流行的游戏引擎，它在安装时打包了一个版本的 mono（和 monodevelop）。最近我安装了 Xamarin Studio，热衷于使用它。后来我遵循了一些在线指南，通过 sln 目录中的命令行构建统一的 SLN 文件：

```
/Applications/Unity/MonoDevelop.app/Contents/MacOS/mdtool build -t:Build 
```

我收到了这个错误：

```
Rewriting config files...
Corlib not in sync with this runtime: expected corlib version 636, found 96.
Loaded from: /Applications/Unity/MonoDevelop.app/Contents/Frameworks/Mono.framework/Versions/2.10.2/lib/mono/2.0/mscorlib.dll
Download a newer corlib or a newer runtime at http://www.go-mono.com/daily. 
```

我认为 Xamarin Studio 带来了一个新的单声道运行时，即版本 636。我运行的 mdtool 预期版本为 96，因为 Unity 附带了旧版本的单声道（我认为是 .net 3.5？）。

所以我卸载了 Xamarin Studio，并重新安装了 Unity，希望能用旧版本覆盖单声道运行时。仍然得到错误。

我在上面注意到 mscorlib.dll 不是从2.10.2 中提取的`Frameworks/Mono.framework/Versions/Current`，而是从 2.10.2 中提取的。这是为什么？我怎样才能使这个构建工作？我可以给你更多信息吗？

# android - DialogFragment 视图创建回调？

> ID：16192685
> 
> 赞同：0
> 
> 时间：2013-04-24T12:59:31.727
> 
> 标签：android

我有以下问题。我正在创建并显示`DialogFragment`哪些具有 WebView。WebView 有`onProgressChanged`回调。当`progress = 100 (loading finished)`我想制作 `Picture picture = webView.createPicture();`- 视图的快照。

问题是我无法将该图片转换为位图（异常宽度必须> 0）。

我认为问题是当前未显示 Webview，它是`width = 0;`

你能告诉我一些像“ `onDialogShown`”之类的回调吗？

# php - 访问 json 文件中的二维数组

> ID：16192687
> 
> 赞同：0
> 
> 时间：2013-04-24T12:59:38.050
> 
> 标签：php, json, file, push

我只想将数据放入 json 文件中..

这是我的代码

```
 $inp = file_get_contents('7players.json');
    $tempArray = json_decode($inp, true);
    $arrne['matches']['player1id']="player1";
    $arrne['matches']['player2id']="player2";
    $arrne['matches']['winner']="winner";
    array_push( $tempArray['games'], $arrne );
    $jsonData = json_encode($tempArray);
    file_put_contents('7players.json', $jsonData);
    print_r( $inp); 
```

它正在添加到 json 文件中..但它正在添加到最后..

```
 {"players":[{"name":"Moldova","image":"\/Images\/Moldova.jpg","roll_over_image":"tank.jpg"},
        {"name":"Georgia","image":"\/Images\/georgia.gif","roll_over_image":"tank.jpg"},{"name":"Belarus","image":"\/Images\/Belarus.gif","roll_over_image":"tank.jpg"},{"name":"Armenia","image":"\/Images\/armenia.png","roll_over_image":"tank.jpg"},{"name":"Kazahstan","image":"\/Images\/kazahstan.gif","roll_over_image":"tank.jpg"},{"name":"Russia","image":"\/Images\/russia.gif","roll_over_image":"tank.jpg"},{"name":"Ukraine","image":"\/Images\/ukraine.png","roll_over_image":"tank.jpg"},{"name":"Uzbekistan","image":"\/Images\/uzbekistan.gif","roll_over_image":"tank.jpg"},{"name":"nisha5"},{"name":"nisha1"}],

"games":[{"matches":[{"player1id":"*","player2id":"*","winner":"*"},   {"player1id":"*","player2id":"*","winner":"*"},{"player1id":"*","player2id":"*","winner":"*"},{"player1id":"*","player2id":7,"winner":"*"},{"player1id":"*","player2id":"*","winner":"*"},{"player1id":"*","player2id":"*","winner":"*"},{"player1id":"*","player2id":"*","winner":"*"}]},

{"matches":[{"player1id":"*","player2id":"*","winner":"*"},{"player1id":"*","player2id":"*","winner":"*"},{"player1id":"*","player2id":"*","winner":"*"},{"player1id":"*","player2id":7,"winner":"*"},{"player1id":"*","player2id":"*","winner":"*"},{"player1id":"*","player2id":"*","winner":"*"},{"player1id":"*","player2id":"*","winner":"*"}]}]} 
```

但是添加后，文件是这样的，最后..

```
{"players":[{"name":"Moldova","image":"\/Images\/Moldova.jpg","roll_over_image":"tank.jpg"},{"name":"Georgia","image":"\/Images\/georgia.gif","roll_over_image":"tank.jpg"},{"name":"Belarus","image":"\/Images\/Belarus.gif","roll_over_image":"tank.jpg"},{"name":"Armenia","image":"\/Images\/armenia.png","roll_over_image":"tank.jpg"},{"name":"Kazahstan","image":"\/Images\/kazahstan.gif","roll_over_image":"tank.jpg"},{"name":"Russia","image":"\/Images\/russia.gif","roll_over_image":"tank.jpg"},{"name":"Ukraine","image":"\/Images\/ukraine.png","roll_over_image":"tank.jpg"},{"name":"Uzbekistan","image":"\/Images\/uzbekistan.gif","roll_over_image":"tank.jpg"},{"name":"nisha5"},{"name":"nisha1"}],

"games":[{"matches":[{"player1id":"*","player2id":"*","winner":"*"},{"player1id":"*","player2id":"*","winner":"*"},{"player1id":"*","player2id":"*","winner":"*"},{"player1id":"*","player2id":7,"winner":"*"},{"player1id":"*","player2id":"*","winner":"*"},{"player1id":"*","player2id":"*","winner":"*"},{"player1id":"*","player2id":"*","winner":"*"}]},

{"matches":[{"player1id":"*","player2id":"*","winner":"*"},{"player1id":"*","player2id":"*","winner":"*"},{"player1id":"*","player2id":"*","winner":"*"},{"player1id":"*","player2id":7,"winner":"*"},{"player1id":"*","player2id":"*","winner":"*"},{"player1id":"*","player2id":"*","winner":"*"},{"player1id":"*","player2id":"*","winner":"*"}]},

{"matches":{"player1id":"player1","player2id":"player2","winner":"winner"}},{"matches":{"player1id":"player1","player2id":"player2","winner":"winner"}},{"matches":{"player1id":"player1","player2id":"player2","winner":"winner"}}]} 
```

任何帮助对我都有很大用处..提前非常感谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T13:07:15.420

```
/* last argument says for decode JSON as array */
$gameToUpdate = 0;
$arrne = json_decode(file_get_contents('7players.json'), true);
/* play with your JSON here */
/* lets suppose that there's lots of matches */
$matchToPrepend = array(
    'player1id' => "player1",
    'player2id' => "player2",
    'winner' => "winner"
);
/* this will prepend data to array */
array_unshift($arrne['matches']['games'][$gameToUpdate], $matchToPrepend);
/* save your JSON */
file_put_contents('7players.json', json_encode($arrne)); 
```

[`file_put_contents`](http://br1.php.net/manual/en/function.file-put-contents.php)

[`file_get_contents`](http://br2.php.net/manual/en/function.file-get-contents.php)

[`array_unshift`](http://php.net/manual/en/function.array-unshift.php)

[`json_encode`](http://br2.php.net/manual/en/function.json-encode.php)

[`json_decode`](http://br2.php.net/manual/en/function.json-decode.php)

我认为您需要在执行之前进行一些检查，例如：检查文件是否存在。

# php - TCPDF 某些变量未在输出文件中打印？

> ID：16192695
> 
> 赞同：1
> 
> 时间：2013-04-24T12:59:50.303
> 
> 标签：php, tcpdf

我是用于创建 pdf 的 TCPDF PHP 库的新手。我可以打印表格的第一列，但无法打印其余部分。这是我的代码

```
<html>
<head>
<title>Admit Card</title>
<link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.min.css" rel="stylesheet">
<script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/js/bootstrap.min.js"></script>

<style>
@media print {
  @page { margin: 0; }
  body { margin: 1.6cm; }
}
</style>
<script type="text/javascript" src="library/jquery-1.8.3.js" > </script> 
<script type="text/javascript">

    function PrintElem(elem)
    {
        Popup($(elem).html());
    }

    function Popup(data) 
    {
        var mywindow = window.open('', 'admit', 'width=800');
        mywindow.document.write('<html><head><title></title>');
        /*optional stylesheet*/ //mywindow.document.write('<link rel="stylesheet" href="main.css" type="text/css" />');
        mywindow.document.write('</head><body >');
        mywindow.document.write(data);
        mywindow.document.write('</body></html>');

        mywindow.print();
        mywindow.close();

        return true;
    }

</script> </head> <body>
<div id="mydiv">
<?php
ob_start();
session_start();
require_once('tcpdf/config/lang/eng.php');
require_once('tcpdf/tcpdf.php');
//ob_start();
$pdf = new TCPDF(PDF_PAGE_ORIENTATION, PDF_UNIT, PDF_PAGE_FORMAT, true, 'UTF-8', false);

//$pdf = new TCPDF(PDF_PAGE_ORIENTATION, PDF_UNIT, PDF_PAGE_FORMAT, false, 'ISO-8859-1', false);
// set document information
$pdf->SetCreator(PDF_CREATOR);
$pdf->SetAuthor('Dummy Dummy');
$pdf->SetTitle('Dummy Dummy');
$pdf->SetSubject('Dummy Dummy');
$pdf->SetKeywords('Dummy Dummy');
// set default header data
$pdf->SetHeaderData(PDF_HEADER_LOGO, PDF_HEADER_LOGO_WIDTH, PDF_HEADER_TITLE.' CIT Kokrajhar', PDF_HEADER_STRING);

// set header and footer fonts
$pdf->setHeaderFont(Array(PDF_FONT_NAME_MAIN, '', PDF_FONT_SIZE_MAIN));
$pdf->setFooterFont(Array(PDF_FONT_NAME_DATA, '', PDF_FONT_SIZE_DATA));

// set default monospaced font
$pdf->SetDefaultMonospacedFont(PDF_FONT_MONOSPACED);

//set margins
$pdf->SetMargins(PDF_MARGIN_LEFT, PDF_MARGIN_TOP, PDF_MARGIN_RIGHT);
$pdf->SetHeaderMargin(PDF_MARGIN_HEADER);
$pdf->SetFooterMargin(PDF_MARGIN_FOOTER);

//set auto page breaks
$pdf->SetAutoPageBreak(TRUE, PDF_MARGIN_BOTTOM);

//set image scale factor
$pdf->setImageScale(PDF_IMAGE_SCALE_RATIO);

//set some language-dependent strings
$pdf->setLanguageArray($l);

// set font
$pdf->SetFont('dejavusans', '', 10);

// add a page
$pdf->AddPage();

$html='

 <table class="table" border="1"> <tr>
            <td>Sl. No.</td>
            <td>Name &amp; Father Name</td>
            <td>Nos.</td>
            <td>Roll Number</td>
            <td width="98">Photo</td>
            <td>Signature</td>
            <td>Remarks</td>
        </tr>
';
//$html = ob_start();
$pdf->writeHTML($html, true, false, true, false, '');

?>
<?php

//
        $username='root';
        $password = '';
        $conn = new PDO('mysql:host=localhost;dbname=somedbname',$username, $password);
if(isset($_GET['exam'])){
    try{
        $center=$_GET['center'];
        $exam=$_GET['exam'];

        $conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
        $strquery="SELECT * FROM dummytable_2013 WHERE `centre1`='".$center."' AND `examtype` LIKE '".$exam."%' ORDER BY RIGHT(`roll_number`, 3) ASC";
        $stmt=$conn->prepare($strquery);
        $stmt->execute();
        //$rs = $stmt -> get_result();
        $rows = $stmt -> fetchAll();
        $i=0;
        //print_r($rows);
        foreach($rows as $row){
            $i=$i+1;
            $form_number=$row['form_number'];
            $name=$row['name'];
            $roll=$row['roll_number'];
            $examtype=$row['examtype'];
            $sex=strtoupper($row['sex']);
            $dob = $row['dob'];
            $category = $row['category'];
            $countrycode = $row['nationality'];
            $email = $row['email'];
            $region = $row['region'];
            $examcenter1 =$row['centre1'];
            $examcenter2 = $row['centre2'];
            $examcenter3 = $row['centre3'];
            $fathersname = strtoupper($row['fathersname']);
            $mothersname = strtoupper($row['mothersname']);
            $paddress = strtoupper($row['paddress']);
            $caddress = strtoupper($row['caddress']);
            $examname1 = $row['exam1'];
            $year1 = $row['year1'];
            $grade1 = $row['grade1'];
            $percentage1 = $row['percentage1'];
            $examname2 = $row['exam2'];
            $year2 = $row['year2'];
            $grade2 = $row['grade2'];
            $percentage2 = $row['percentage2'];
            $examname3 = $row['exam3'];
            $year3 = $row['year3'];
            $grade3 = $row['grade3'];
            $percentage3 = $row['percentage3'];
            $ddnumber = $row['ddnumber'];
            $ddamount = $row['ddamount'];
            $dddate = $row['dddate'];
            $dddrawnat = $row['dddrawnat'];
            $ddbranch = $row['ddbranch'];
            $photo = $row['photoname'];
            $substr="substr";
            if($i%7==0){
                $pdf->lastPage();

                // - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
                // Print a table

                // add a page
                $pdf->AddPage();
                $html=<<<EOF

                <tr>
                        <td>{$substr($roll, -3)}</td>
                        <td>Candidates Name: 
                        Fathers Name: 
                        </td>
                        <td>{$substr($roll, -3)}</td>
                        <td></td>
                        <td><img src="{$photo}" border="1" width="95" height="105">
</td>
                        <td> &nbsp;{$i}</td>
                        <td>{$form_number}</td>
                </tr>
EOF;
//          $html = ob_start();
            $pdf->writeHTML($html, true, false, true, false, '');
            }
            else{
            $html=<<<EOF

        <tr>
            <td>{$substr($roll, -3)}</td>
            <td>Candidate&apos;s Name:
            Fathers Name: 
            </td>
            <td>{$substr($roll, -3)}</td>
            <td>{$roll}</td>
            <td><img src="{$photo}" border="1" width="95" height="105">
</td>
            <td> &nbsp;{$i}</td>
            <td>&nbsp;{$form_number}</td>
        </tr>

<?php
EOF;
//$html = ob_get_contents();
$pdf->writeHTML($html, true, false, true, false, '');
}
        }

                    //function to send email

    }
    catch(PDOException $e) {
        echo 'ERROR: ' . $e->getMessage();
    }   

// reset pointer to the last page
$pdf->lastPage();

// ---------------------------------------------------------

//Close and output PDF document
$pdf->Output('rep/'.$exam.'.pdf', 'F');
ob_clean();
?>
</table>
</div>
<center>
<input value="Print The Sheet" class="btn btn-large btn-success" onclick="PrintElem('#mydiv')" type="button">
</center>
</body>
</html>
<?php    
}
else{
    echo 'session not set';
}
?> 
```

TCPDF 输出文件中的结果是 Only the content of first that is above the mysql connect. 第一列变量正在打印。结果如下

```
TCPDF Example Dummy Dummy
by Nicola Asuni - Tecnick.com www.tcpdf.org

Sl. No.   Name & Father Name  Nos.    Roll Number   Photo     Signature       Remarks

001

002

003

004 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:15:52.277

我想的问题是由于适当的表格列高度和宽度。在为所有列设置适当的高度和宽度后，即在 td 字段中，其余字段能够获取值。如果没有适当的表属性，Tcpdf 不会打印值。现在问题已经解决了。

# jquery-ui - Zend Framework 2 & jquery 模态对话框

> ID：16192702
> 
> 赞同：0
> 
> 时间：2013-04-24T13:00:06.133
> 
> 标签：jquery-ui, zend-framework2

如何在 jquery 模态对话框中显示控制器操作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T13:32:17.593

首先，您需要您的 Javascript 通过 ajax 加载 url，这将取决于您使用哪种模式等，那里有大量的库。我将假设您使用的是基本的 JQuery UI 对话框模式。

示例链接

```
<!-- this points to your action below.. -->
<a class="some-link" title="title here" href="mycontroller/test">testing</a> 
```

示例 Javascript（在 google 上找到的快速示例，那里有很多示例..）

```
$(document).ready(function() {
    $('.some-link').each(function() {
        var $link = $(this);
        var $dialog = $('<div></div>')
            .load($link.attr('href'))
            .dialog({
                autoOpen: false,
                title: $link.attr('title'),
            });
    });
}); 
```

现在，您需要确保在通过 ajax 请求为模式提供内容时，您的操作不会呈现主布局。

这是一个非常简单的方法，将基本布局替换为 ajax 请求的空视图。这不是最好的方法，但在这种情况下它是最简单的；）

示例操作

```
public function testAction()
{
    if($this->getRequest()->isXmlHttpRequest()) {
        $this->layout('application/layout/ajax-layout');
    }

    return new ViewModel(array()); // ..
} 
```

应用程序/布局/ajax-layout.phtml

```
<?php echo $this->content ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T13:33:02.400

我想你想要这种代码[http://jqueryui.com/dialog/#modal-message](http://jqueryui.com/dialog/#modal-message) 里面只是显示你的动作

否则它将在您的模式中打开一个 url，就像[http://blog.nemikor.com/2009/04/18/loading-a-page-into-a-dialog/](http://blog.nemikor.com/2009/04/18/loading-a-page-into-a-dialog/)

# java - WebFilter urlPattern 不起作用

> ID：16192708
> 
> 赞同：3
> 
> 时间：2013-04-24T13:00:29.730
> 
> 标签：java, jsf-2, servlet-filters

我正在尝试将 WebFilter 与 JSF 2 一起使用，但我的过滤器不起作用。无法识别 urlPattern。

我的过滤器类：

```
@WebFilter(urlPatterns = {"/rws/*"})  
public class AuthorizationFilter implements Filter {  

    @Override  
    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws ServletException, IOException {      
        HttpServletRequest req = (HttpServletRequest) request;  
        HttpSession session = req.getSession(true);  
        Object o = session.getAttribute("user");  
        HttpServletResponse res = (HttpServletResponse) response;  

        if(o == null)   
            res.sendRedirect(req.getContextPath() + "/login.xhtml");  
        else
            chain.doFilter(request, response);  
    }  

    @Override  
    public void init(FilterConfig filterConfig) throws ServletException {  

    }  

    @Override  
    public void destroy() {  
    }  
} 
```

在我的结构中，我想保护 rws 文件夹中的所有页面，但我无法配置过滤器。

我试过@WebFilter("/rws/*") @WebFilter("/faces/rws/*")

我的过滤器永远不会被执行！

我注意到浏览页面时 url 没有改变。例如，用户打开 index.xhtml 执行登录，然后重定向到页面 loginOk.xhtml。LoginOk.xhtml 页面具有指向文件夹 rws 中页面的链接。

当我单击链接时，url 没有改变，即我正在浏览文件夹页面 rws 但浏览器中的 url 保持不变（[http://jsftest.com:8080/TestePrimeFaces/faces/loginOK.xhtml](http://jsftest.com:8080/TestePrimeFaces/faces/loginOK.xhtml)）。那是问题吗？

用了commandLink作为链接，不知道是不是最合适。有谁知道问题出在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2019-04-04T05:25:18.960

像这样添加“@Component”。

```
@Component
@WebFilter(urlPatterns = {"/rws/*"})  
public class AuthorizationFilter implements Filter { ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T01:18:54.070

当您在回发时执行非重定向 JSF 导航时，不会触发 Servlet 过滤器。JSF 导航默认情况下不会创建新的 HTTP 请求（这会触发过滤器），但它只会更改 HTTP 响应的内容，同时仍保持相同的 HTTP 请求（这也是您在浏览器的地址栏）。

正如一些人可能建议的那样，将调度程序添加`FORWARD`到过滤器映射将不起作用，因为 Facelets 上的 JSF`RequestDispatcher#forward()`不像“普通”JSP/Servlet 和许多其他 MVC 框架那样使用。

如果要触发过滤器，只需通过重定向发送新请求。

所以，而不是

```
public String login() {
    // ...

    return "home";
} 
```

做就是了

```
public String login() {
    // ...

    return "home?faces-redirect=true";
} 
```

如果您担心由于重定向导致面部消息丢失，只需使用 flash 范围。

### 也可以看看：

*   [重定向和导航/转发之间有什么区别以及何时使用什么？](https://stackoverflow.com/questions/11277366/what-is-the-difference-between-redirect-and-navigation-forward-and-when-to-use-w/11277482#11277482)
*   [如何在 JSF 中导航？如何使 URL 反映当前页面（而不是上一个页面）](https://stackoverflow.com/questions/15521451/how-to-make-url-reflect-the-current-page-and-not-the-previous-one/)
*   [如何在重定向页面中显示面孔消息](https://stackoverflow.com/questions/13685633/how-to-show-faces-message-in-the-redirected-page/)

# jquery - DataTables调整列的大小不能与滚动条一起正常工作

> ID：16192709
> 
> 赞同：3
> 
> 时间：2013-04-24T13:00:34.340
> 
> 标签：jquery, jquery-plugins, datatables, jquery-datatables

我想开发一个能够通过单击和拖动来调整列大小的表（我已经使用 ColReorderWithResize 插件完成了此操作）。

但是，当我使用滚动选项并尝试调整标题列的大小时，在调整标题大小时表格不会与标题对齐。

这是一个[小提琴脚本](http://jsfiddle.net/heavensteel/KqH7L/1/)。

我想要的是，如果我调整标题列（例如浏览器列）的大小，那么正文列应该与标题列对齐。当我想使用滚动条时，这是 ColReorderWithResize 中的正常行为吗？

注意我正在使用：

数据表 1.9.4

ColReorderWithResize 1.0.7

```
var $table = $("#demo table");
$table.dataTable({
  "sDom": "Rlfrtip",
  "sScrollY":($(window).height() - 300) + "px",

  "fnDrawCallback": function() {
    $(window).unbind('resize').bind('resize', function () {
      that.applyTableHeight();
    });
  },
  applyTableHeight:function () {
    var sScrollY = ($(window).height() - this.staticHeight) + "px";
    $(".dataTables_scrollBody").css("height", sScrollY);
    this.calculateTableWidth();
  }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-03T11:49:00.640

试试这个..重绘它会影响的数据表。

$("#table_id").dataTable().fnDraw();

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-28T00:43:09.560

```
$("#tblname").dataTable({
        autoWidth: false,
        oLanguage: {"sZeroRecords": ' ', "sEmptyTable": ' ' },
        select: true,
        scrollY:        500,
        scrollX:        false,
        deferRender:    true,
        scroller:       false,
        paging:   false,
        ordering: false,
        info:     false
    });
 $(window).resize(function() {
        $("#tblname").dataTable().fnDraw();
                 }); 
```

如果您使用数据表和滚动插件，这解决了我的问题。

# android - 从地图中删除单个项目

> ID：16192710
> 
> 赞同：1
> 
> 时间：2013-04-24T13:00:41.980
> 
> 标签：android

我可以使用谷歌地图 v2 显示标记。现在我想删除一个标记但无法做到。我尝试使用 clear 方法，但它删除了所有标记。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:05:48.333

如果你正在使用

```
Marker _marker = map.addMarker(new MarkerOptions()
     .position(new LatLng(37.7750, 122.4183))
     .title("San Francisco")
     .snippet("Population: 776733")); 
```

用于删除标记

```
_marker.remove(); 
```

* * *

从地图中移除此标记。删除标记后，其所有方法的行为都未定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T13:02:21.560

尝试marker.remove()，它会完成这项工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T13:08:03.490

尝试这个

```
List<Overlay> mapOverlays = mapView.getOverlays();

.....
.....
mapOverlays.remove(position); 
```

# c++ - 在设置其值之前使用 arr

> ID：16192715
> 
> 赞同：-1
> 
> 时间：2013-04-24T13:00:50.483
> 
> 标签：c++

你好我有一个生成数组方法：

```
void generateArray(double *data, int count) {
    for (int i = 0; i < count; i++)
        data[i] = rand() / ((rand() + rand()) / 2.0 + 1);
} 
```

我有以下主要

```
int main(void) {

    double *arr;
    generateArray(arr,40000);

    cout << arr[0];

    return 0;
} 
```

它说在设置其值之前使用 arr 为什么？为什么不生成数组填充呢？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T13:02:55.063

```
double *arr; 
```

这只会给你一个指针。您还没有分配任何`double`s 来指向它，并且您还没有初始化指针以实际指向任何地方。在这里，您会发现声明一个适当大小的数组更容易：

```
double arr[40000]; 
```

像您当前所做的那样传递`arr`将执行数组到指针的转换，它将按预期工作。

然而，一个 40000 s 的数组`double`在堆栈上是一个相当大的对象。您可能更喜欢使用 动态分配您的数组`double* arr = new double[40000];`，但您需要确保`delete[] arr;`在完成后这样做以避免内存泄漏。相反，您可能更喜欢使用`std::vector`：

```
std::vector<double> arr(40000); 
```

只需将第一个参数更改`generateArray`为 a `std::vector<double>&`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T13:02:47.250

您只需给它一个指针，但从不为数组分配任何内存。您想要 a`data = new double[count]`在您的 generateArray 中，或者简单地预先分配它`double arr[40000]`（或者更好的是，使用 a `vector`）。

这将是更可取的：

```
std::vector<double> generateArray(int count) {
    std::vector<double> data(count);
    for (int i = 0; i < count; i++)
        data[i] = rand() / ((rand() + rand()) / 2.0 + 1);
    }
    return data;
} 
```

如果您需要以某种方式取回数组数据，`vector`保证在内部使用一个连续的数组，可以通过`&v[0]`to访问`&v[v.size()-1]`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T13:02:50.483

您永远不会使用大小初始化数组。你需要做

```
arr = new double[count]; 
```

函数内部。如下所示。完成后别忘了`delete[] arr;`做！

```
void generateArray(double *data, int count) {
    arr = new double[count];
    for (int i = 0; i < count; i++)
        data[i] = rand() / ((rand() + rand()) / 2.0 + 1);
} 
```

另一种选择是`double *arr = new double[40000]`在函数之外进行。

# excel - 如何从 Excel 中获取单元格超链接地址？

> ID：16192725
> 
> 赞同：2
> 
> 时间：2013-04-24T13:01:12.287
> 
> 标签：excel, qt, activex, qt5, qaxobject

![](https://i.stack.imgur.com/vsaTq.png)

要从单元格中读取文本，我使用以下命令：

```
QAxObject *e = new QAxObject("Excel.Application");
QAxObject *wbooks = e->querySubObject("Workbooks");
QAxObject *wbook = wbooks->querySubObject("Open(const QString&)", "somefile.xls");
QAxObject *s = wbook->querySubObject("Worksheets(int)", 1);
QVariant v = s->querySubObject("Cells(int,int)", 2, 2)->property("Value");
// v = "sometext" 
```

但是如何从单元格中读取超链接地址？

*Qt 5.0.1 Windows 7*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:13:28.630

尝试：

```
QAxObject *e = new QAxObject("Excel.Application");
QAxObject *wbooks = e->querySubObject("Workbooks");
QAxObject *wbook = wbooks->querySubObject("Open(const QString&)", "somefile.xls");
QAxObject *s = wbook->querySubObject("Worksheets(int)", 1);
QVariant v = s->querySubObject("Cells(int,int)", 2, 2)->querySubObject("Hyperlinks(int)", 1)->property("Address"); 
```

# algorithm - 提取整数数组中的模式

> ID：16192726
> 
> 赞同：0
> 
> 时间：2013-04-24T13:01:13.763
> 
> 标签：algorithm, language-agnostic, pattern-matching

简而言之，我的问题是在一个整数数组中找到几个整数“模式”；就提取的所有模式的总值而言，结果应该是最佳的。 

具体来说，数组和模式的元素是非负整数。如果从该数组的一些连续元素（与该模式相同的长度）中减去该模式，则如果该数组中的所有元素都保持非负，则我们说可以从该数组中提取该模式。

由于元素是整数，因此每个模式都可以提取多次，这与字符串模式不同。例如，给定一个数组 = {1, 2, 1} 和一个模式 = {1, 1}，我们可以在数组中找到两个这样的模式：第一个包含在数组 {1, 2}，从数组中提取一个模式后，数组变为 {0, 1, 1} 然后我们可以从数组中的最后两项中提取第二个 {1, 1} 模式。 

每个模式都有一个价值；当一个模式被提取 i 次时，该值也乘以 i。目标是找到最终使总价值最大化的模式提取序列。 

我尝试使用贪心算法，即先提取具有最大单位值的模式，但仍然存在一个问题：如果数组中有多个最大值模式，首先选择哪个？这里使用的贪心策略让我想起了背包问题，但它们是不同的。另外，贪心算法的最优性是值得怀疑的。我正在考虑动态编程算法，但现在完全空白。 

希望我已经把问题说清楚了。有什么建议么？

# android - 试图重新查询一个已经关闭的游标

> ID：16192728
> 
> 赞同：2
> 
> 时间：2013-04-24T13:01:17.700
> 
> 标签：android, sqlite, cursor, illegalstateexception

我正在做简单的查询，例如：

```
Cursor c = databaseHelper.getReadableDatabase().rawQuery("select " + MyTable.TABLE_FIELD.getColumnName() + " from " + MyTable.TABLE_NAME, null); 
```

之后，我提取所需的数据并填充一些视图。

```
c.close(); 
```

一切都按预期工作。我有一个共享意图，要发送一封包含显示的一些信息的电子邮件。在`java.lang.IllegalStateException`电子邮件应用程序发送电子邮件或关闭并且我的活动恢复“生活”后抛出。此异常仅在这种情况下引发，如果我将其发送到后台然后再次调用它，则不会引发此异常。我什至打算打开 youtube 并播放视频，但不会引发此异常...

我真的不知道为什么会这样。

谢谢你的时间。

ps：我试过`//c.close();`了，还是不行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T13:11:44.540

您可以使用`c.requery()`，但在 API 级别 11 中已弃用。

> 不要使用这个。只需请求一个新游标，这样您就可以异步执行此操作，并在新游标返回后更新您的列表视图。
> 
> 再次执行创建游标的查询，刷新其内容。这可以在任何时候完成，包括在调用 deactivate() 之后。由于此方法可能会在数据库上执行查询并可能需要一段时间，因此如果在主 (UI) 线程上调用它可能会导致 ANR。如果在主线程上执行此方法，则会打印警告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T13:58:34.443

我找到了导致这个问题的原因。电子邮件的一些信息是由“utils”类中的另一个光标提供的。在向电子邮件提供信息后，此光标已关闭，这导致了问题。而不是`c.close();`我改为`c = null;`现在它正在工作。

可能不是最好的解决方案，但现在它正在工作。谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-02T12:35:24.613

这对我有用..

```
public void onBackPressed() {

    Intent i = new Intent(getApplicationContext(), ClassName.class);
    startActivity(i);
    finish();
    super.onStop();

} 
```

# linux - 连接 psql 时出现问题

> ID：16192731
> 
> 赞同：6
> 
> 时间：2013-04-24T13:01:23.140
> 
> 标签：linux, postgresql, opensuse

我按照以下说明安装了 postgresql：http: [//xadmin.info/ ?p=284](http://xadmin.info/?p=284)

```
# pg_ctl -D /var/lib/pgsql/data -l pglog.log start
server starting
postgres@linux-p0pl:~> psql
psql: could not connect to server: No such file or directory
    Is the server running locally and accepting
    connections on
 Unix domain socket "/tmp/.s.PGSQL.5432"? 
```

我不明白为什么在服务器启动时出现此错误...有人可以帮忙吗？

我的 pglog.log 文件显示以下输出：

```
2013-02-06 19:43:39 GMT   FATAL:  lock file "postmaster.pid" already exists
2013-02-06 19:43:39 GMT   HINT:  Is another postmaster (PID 23971) running in data directory "/var/lib/pgsql/data"?
2013-02-06 19:44:02 GMT   FATAL:  lock file "postmaster.pid" already exists
2013-02-06 19:44:02 GMT   HINT:  Is another postmaster (PID 23971) running in data directory "/var/lib/pgsql/data"?
2013-04-24 12:43:29 GMT   FATAL:  data directory "/var/lib/pgsql/data" has group or world access
2013-04-24 12:43:29 GMT   DETAIL:  Permissions should be u=rwx (0700).
2013-04-24 12:44:07 GMT   FATAL:  data directory "/var/lib/pgsql/data" has group or world access
2013-04-24 12:44:07 GMT   DETAIL:  Permissions should be u=rwx (0700).
2013-04-24 12:57:02 GMT   FATAL:  data directory "/var/lib/pgsql/data" has group or world access
2013-04-24 12:57:02 GMT   DETAIL:  Permissions should be u=rwx (0700).
2013-04-24 12:57:40 GMT   FATAL:  data directory "/var/lib/pgsql/data" has group or world access
2013-04-24 12:57:40 GMT   DETAIL:  Permissions should be u=rwx (0700). 
```

ps -ef | grep postgres

```
root     21659 21591  0 19:14 pts/0    00:00:00 grep --color=auto postgres 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-24T16:29:10.987

权限和所有权`/var/lib/pgsql/data`应为：

```
# ll -d /var/lib/pgsql/data
drwx------. 15 postgres postgres 4096 Apr 24 10:27 /var/lib/pgsql/data 
```

如果他们不是以 root 身份执行的：

```
# chmod -R 700 /var/lib/pgsql/data
# chown -R postgres /var/lib/pgsql/data 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T13:06:16.133

签入`pglog.log`文件以确保服务器确实没有错误地实际启动。鉴于错误，它似乎没有正常启动。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T13:09:25.613

您可能没有将服务器配置为将 unix 域套接字放入“/tmp”。它可能类似于“/var/run/pgsql”，但请查看您的`postgresql.conf`文件以了解具体内容。

然后您可以在命令行上将此目录指定为“主机”：

```
psql -h /path/we/want ... 
```

如果这不是问题，请检查端口号。

不确定您的 psql 客户端和 postgresql 服务器为什么/如何具有不同的默认路径，但是我从未听说过您从中获得说明的站点，所以我不知道它们有多大用处。

# c# - 操纵杆 + c#：模拟按钮

> ID：16192750
> 
> 赞同：3
> 
> 时间：2013-04-24T13:02:37.463
> 
> 标签：c#, directx, joystick, gamepad

我正在使用 Microsoft DirectX 访问我的游戏手柄。这是一个类似这样的 USB 游戏手柄：

![在此处输入图像描述](https://i.stack.imgur.com/DIQzR.jpg)

我可以知道何时按下按钮以及轴的模拟值......

问题是是否有办法知道何时按下模拟按钮（红灯亮）。

那可能吗？如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T13:11:21.120

我会为您的项目推荐[SlimDX](http://slimdx.org/)或[SharpDX](https://code.google.com/p/sharpdx/source/browse/Samples/DirectInput/JoystickApp/Program.cs?r=c2a5b8e19628866fc4e13df4e18aee701d2e48f1)。它们支持 DirectX API，而且非常简单。

**瘦身**：

```
using SlimDX.DirectInput; 
```

创建一个新的 DirectInput 对象：

```
DirectInput input = new DirectInput(); 
```

然后是一个用于处理的 GameController 类：

```
public class GameController
{
    private Joystick joystick;
    private JoystickState state = new JoystickState();
} 
```

并像这样使用它：

```
public GameController(DirectInput directInput, Game game, int number)
{
    // Search for Device
    var devices = directInput.GetDevices(DeviceClass.GameController, DeviceEnumerationFlags.AttachedOnly);
    if (devices.Count == 0 || devices[number] == null)
    {
        // No Device
        return;
    }

    // Create Gamepad
    joystick = new Joystick(directInput, devices[number].InstanceGuid);  
    joystick.SetCooperativeLevel(game.Window.Handle, CooperativeLevel.Exclusive | CooperativeLevel.Foreground);

    // Set Axis Range for the Analog Sticks between -1000 and 1000 
    foreach (DeviceObjectInstance deviceObject in joystick.GetObjects())
    {
        if ((deviceObject.ObjectType & ObjectDeviceType.Axis) != 0)
            joystick.GetObjectPropertiesById((int)deviceObject.ObjectType).SetRange(-1000, 1000);
    }
    joystick.Acquire();
} 
```

最后得到每个方法的状态：

```
public JoystickState GetState()
{
    if (joystick.Acquire().IsFailure || joystick.Poll().IsFailure)
    {
        state = new JoystickState();
        return state;
    }

    state = joystick.GetCurrentState();

    return state;
} 
```

# database-design - 混合数据库系统：NoSQL 用于数据，SQL 用于关系。最佳实践？

> ID：16192755
> 
> 赞同：10
> 
> 时间：2013-04-24T13:02:55.193
> 
> 标签：database-design, nosql, database

我正在构建一个应用程序，其数据库系统至关重要，并且需要可扩展，因为它的所有价值都将在数据中。

我正在制作一个现场投票系统。

我对 SQL 和 MongoDB 很满意，所以这几乎不是决定因素（尽管这些时候我更喜欢 MongoDB 结构和 JS :)）

但从我在网上阅读的所有内容来看，我仍然对我的决定感到不舒服。

我想做的是结合两者的优势：

*   拥有对象的 noSQL 文档（用户、项目、评论等）
*   拥有用于关系的 SQL 表（表 User-Items、User-Comments 等）
*   每当有投票时或定期在 noSQL 文档中复制投票结果（在投票结果显示上也能提高速度）

我看到的巨大优势是：

1.  在查询文档时（例如，用户显示他的个人资料），我拥有 NoSQL 的所有优势（速度、集中在一个位置、架构灵活性等）
2.  在进行统计时（例如投票数），我拥有 SQL 的所有优势
3.  并行化：我可以在 SQL 中获取投票，在 aSync 模式下获取文档
4.  读快，写慢（在我的情况下没关系）
5.  始终保持关系完整性

我的问题是：

*   这样做是个好习惯吗？网络似乎对此很害羞
*   即使数据库负载很高，我是否也在优化花生？（将文档获取与完整的 SQL 和查询进行比较，例如 select * from table where primary_key = XXX）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-03-18T17:16:25.057

“最佳实践”是一个可怕的术语——它经常被用来证明直觉、“这就是我们一直这样做的方式”或其他偏见。

但是，您描述的解决方案有很多好处（您提到了一些），但也有一些明显的缺点，主要是因为您将问题域的知识拆分到两个不兼容的数据存储中，这为重复提供了很多机会 -但也因为不一致。

例如，给定用户由某个标识符标识的知识将在您的 NoSQL 系统和您的数据库之间共享。如果一个系统删除了该用户，则另一个系统将处于不一致的状态。给定用户的个人资料将被拆分到两个系统中，并且都没有完整的图片；你需要大量的家务同步代码。

在您的平台上工作的开发人员需要两种技术堆栈方面的专业知识 - 想象一下尝试调试为什么给定用户的评论计数似乎不正确。

您现在有两个故障点 - 如果 NoSQL 或 SQL 数据库出现故障，您的整个系统就会中断。失败可能并不意味着崩溃——它也可能意味着性能问题、升级问题或备份问题。

软件解决方案拥有多个系统并各自拥有部分数据的情况并不少见，分裂通常沿着业务领域线（CRM系统知道您的个人资料，支付系统知道您的信用卡详细信息，电子商务系统知道您订购了什么） ; 沿着技术线划分部门将创建一个具有多个故障点的复杂架构。

我认为好处不会超过这些缺点。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-25T10:43:08.603

如果您喜欢将 NoSQL 数据库与 RDBMS 一起使用的唯一原因是为了获得速度和灵活性，我建议您改用缓存服务器（例如 Memcache）。您可以使用 sql 语句构建文档/结果，并使用单个键值将其存储在 memcache 中以供以后检索。它比 MongoDB 更容易实现。但是，如果您真的只打算使用键进行文档查找或计划对文档使用更复杂的查询，这当然取决于您的要求。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-10-06T10:23:07.507

7 年后，我开始提出自己的问题，感觉现在我可以帮助过去的我了。

今天，我会选择[PostgreSQL JSON types](https://www.postgresql.org/docs/9.4/datatype-json.html)。

这允许仍然有表、关系和索引，它们非常适合理解和原子性，以及`users`表中的可扩展字段，就像一个`identity`看起来像这样的字段：

```
identity {
  firstName: "John",
  lastName: "Doe",
  address: "5 example st",
  postCode: "XXX",
  city: "Example city"
} 
```

这是可查询的：（`select * from users u where u.identity ->> lastName = 'Doe'`不是 100% 确定语法）。

尽管起初这可能会令人惊讶，但它的效果非常好。最好的是当 ORM 包含对那些开箱即用的类型的支持时，例如[Ecto](https://thoughtbot.com/blog/embedding-elixir-structs-in-ecto-models)、[Active Record](https://github.com/tubbo/active_record-embedded)等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-06T14:53:22.033

我想提出另一个对可扩展的对象和关系建模的建议。

一些值得思考的食物：

1.  正如您所说，在像 MongoDB 这样的文档数据库中对实体/对象进行建模。
2.  将关系存储在 Titan 或 Neo4j 等图形数据库中。我认为这些系统更适合存储复杂的关系。您可以轻松地遍历许多复杂的关系，然后当您在图中找到目标节点/顶点时，您可以从 Mongo 加载文档。
3.  考虑一下像 Riak 这样的东西，它是一个 NoSQL 文档存储，在文档之间*也*有链接（关系）。他们建议不要使关系过于复杂，但可以将文档链接在一起而无需其他系统。

# javascript - 是否有允许我在“#route”上显示 div 容器的 HTML api？

> ID：16192760
> 
> 赞同：0
> 
> 时间：2013-04-24T13:02:59.990
> 
> 标签：javascript, html, dom, document

许多单页网站提供导航，可将文档的当前片段移动到另一个文档片段。一个例子是backbonejs 的站点：http: [//backbonejs.org/](http://backbonejs.org/) 当您在菜单点上单击左键时，您将在文档中看到这个。再比如easel.io的导航栏：[https ://www.easel.io](https://www.easel.io)

是否有 HTML5 API 可以为我执行此操作，还是我必须将 js 与点击处理程序一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T13:05:24.697

你不需要任何 API，那是纯 HTML。你必须使用这样的锚标签

```
<a href="#Events-on">on</a> 
```

然后您将拥有一个目标元素，其 id 指向`href`

```
<p id="Events-on">...</p> 
```

# c# - 在 Visual Studio 2010 中，当我在设计视图中打开表单时 - 每个控件旁边会显示一些数字

> ID：16192762
> 
> 赞同：1
> 
> 时间：2013-04-24T13:03:07.553
> 
> 标签：c#, winforms, visual-studio-2010, controls, designer

我一直在我的应用程序中的一个表格上看到这些奇怪的数字。知道为什么会出现这种情况 - 这不会在运行应用程序时造成任何麻烦，但我需要对设计进行一些更改，并且常规选择边框不可见。

这些可能是标签顺序，但无法找到如何删除/隐藏这些。所有帮助将不胜感激。乌本

得到了答案伙计们-在主vs2010主菜单中-转到查看-> taborder-单击以关闭或打开。

# crystal-reports - 在详细信息部分更改水晶报表中的列

> ID：16192768
> 
> 赞同：-1
> 
> 时间：2013-04-24T13:03:26.393
> 
> 标签：crystal-reports

```
<Column Title1>                                    <Column Title 1>
  Row1                                                  Row6
  Row2                                                  Row7
  Row3                                                  Row8
  Row4                                                  Row9
  Row5                                                  Row10 
```

我想在 Crystal Report 的详细信息部分以 aove 格式显示我的数据。请帮助我，我能做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T23:02:31.043

选择详细信息部分，右键单击并选择“部分专家”。选中“多列格式”复选框，并在顶部的布局选项卡上指定列数

# opengl - CMake：opengl包含目录在不同平台上的命名不同

> ID：16192775
> 
> 赞同：5
> 
> 时间：2013-04-24T13:03:51.567
> 
> 标签：opengl, include, cmake

Cmake 为 opengl 创建了 include 目录，但 opengl 头文件位于一个子目录中，该子目录在不同平台（可能还有编译器）上的名称不同：Windows 上的 gl，Linux 上的 GL，Mac 上的 OpenGL（据我所知）。因此，将 OPENGL_INCLUDE_DIRECTORY 添加到包含路径并没有太大帮助 - 我仍然必须在我的源代码中包含（或，等等）。我应该如何处理？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T22:17:58.467

我假设你的意思是`OPENGL_INCLUDE_DIR`，不是`OPENGL_INCLUDE_DIRECTORY`。

你在这里有几个选择。最简单的方法是添加`${OPENGL_INCLUDE_DIR}/GL`或添加`${OPENGL_INCLUDE_DIR}/OpenGL`到您的包含搜索路径并使用

```
#include "gl.h" 
```

在您的源代码中。

文件名的大小写在 Windows 上被忽略，所以你不需要使用`/gl` *and* `/GL` - 就可以了`/GL`。

为此，在您的 CMakeLists.txt 中执行以下操作：

```
if(APPLE)
  include_directories(${OPENGL_INCLUDE_DIR}/OpenGL)
else()
  include_directories(${OPENGL_INCLUDE_DIR}/GL)
endif() 
```

为了使它更健壮，您可以让 CMake 找到“gl.h”的路径并包括：

```
find_path(OpenglIncludeSubdir
            NAMES gl.h
            PATHS ${OPENGL_INCLUDE_DIR}
            PATH_SUFFIXES GL OpenGL
            NO_DEFAULT_PATH)
include_directories(${OpenglIncludeSubdir}) 
```

同样，在您的源代码中，您将使用：

```
#include "gl.h" 
```

可能最健壮的（即避免进一步包含超出`${OPENGL_INCLUDE_DIR}`的路径）是找到“gl.h”的路径，然后用于[`configure_file`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command%3aconfigure_file)应用​​正确的`#include`术语。您将使用包含以下内容的输入文件：

```
#include "@OpenglSubdir@/gl.h" 
```

然后运行`configure_file`将替换`@OpenglSubdir@`为其值并将内容写入输出文件。然后，此输出文件将包含在您的目标中，并且将具有

```
#include "GL/gl.h" 
```

或者

```
#include "OpenGL/gl.h" 
```

作为适当的。

为此，您需要执行以下操作：

```
find_file(OpenglSubdir
            NAMES GL OpenGL
            PATHS ${OPENGL_INCLUDE_DIR}
            NO_DEFAULT_PATH)
get_filename_component(OpenglSubdir ${OpenglSubdir} NAME)
configure_file(${CMAKE_SOURCE_DIR}/my_config.h.in ${CMAKE_SOURCE_DIR}/my_config.h) 
```

# symfony - Symfony + Composer 更新历史

> ID：16192778
> 
> 赞同：0
> 
> 时间：2013-04-24T13:03:57.473
> 
> 标签：symfony, bundle, composer-php

我正在使用 composer 更新 symfony 包，在更新所有包后，我遇到了一些错误，我想恢复以前的版本，问题是我的作曲家版本就像 2.*，所以我不不知道以前在哪里有哪个版本。

是否有任何作曲家历史/日志文件，我可以在其中查看所有捆绑包的先前版本？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T15:47:18.393

如果您提交您的 composer.lock 文件（正如您应该的那样），那么如果您在更新后遇到问题，您可以这样做`git checkout composer.lock && composer install`，这会将事情恢复到以前的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T14:45:12.177

看看composer.lock。安装依赖项后，Composer 将其安装的确切版本列表写入 composer.lock 文件。这会将项目锁定到这些特定版本。

[http://getcomposer.org/doc/01-basic-usage.md#composer-lock-the-lock-file](http://getcomposer.org/doc/01-basic-usage.md#composer-lock-the-lock-file)

# ruby-on-rails - 带有载波迁移错误的轨道：未定义的方法“附件”

> ID：16192781
> 
> 赞同：0
> 
> 时间：2013-04-24T13:04:02.910
> 
> 标签：ruby-on-rails, ruby-on-rails-3, carrierwave, rails-migrations

我正在使用carrierwave gem（版本0.8.0）。当我制作“rake db:migrate”时，我看到了奇怪的错误：

```
 ==  AddAttachmentLogoToMerchants: migrating ===================================
    -- change_table(:merchants)
    rake aborted!
    An error has occurred, this and all later migrations canceled:

    undefined method `attachment' for     ActiveRecord::ConnectionAdapters::PostgreSQLAdapter::Table:0x007f900e6bde88 
```

我的迁移：

```
 def self.up
        change_table :merchants  do |t|
          t.attachment :logo
        end
        remove_column :merchants, :logo_filename
      end

      def self.down
        add_column :merchants, :logo_filename, :string
        drop_attached_file :merchants, :logo
      end 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:26:27.403

AFAIK in`t.attachment` `attachment`应该是一种数据类型

```
change_table :merchants  do |t|
  t.attachment :logo
end 
```

请[单击此处](http://www.postgresql.org/docs/9.2/static/datatype.html)查找 postgresql 的数据类型列表如果您想要字符串以下应该工作

```
change_table :merchants  do |t|
  t.string :logo
end 
```

# ios - 当我只使用 2 个时，选择器要求 3 个参数

> ID：16192782
> 
> 赞同：1
> 
> 时间：2013-04-24T13:04:05.917
> 
> 标签：ios, objective-c, cocoa-touch, cocoa

我正在尝试从 gmail 帐户获取联系人并收到此错误：

```
 "ViewController" selector "ticket:finishedWithFeed:" should have 3 arguments
*** Assertion failure in void GTMAssertSelectorNilOrImplementedWithArgs(id, SEL, ...)(), 
/gtm-oauth2/GTMHTTPFetcher.m:1607
 *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'callback selector arguments incorrect' 
```

* * *

```
 -(void)getGoogleContacts {

    GDataServiceGoogleContact *service =
    [[GDataServiceGoogleContact alloc] init];

    NSString *username = @"username@gmail.com";
    NSString *password = @"pass";

    service = [[GDataServiceGoogleContact alloc] init];

    [service setUserAgent:@"McGraggerSoft-GoogleContactUtility-1.0"];
    [service setUserCredentialsWithUsername:username password:password];

    ticket = [service fetchContactFeedForUsername:username delegate:self didFinishSelector:@selector(ticket:finishedWithFeed:)];
}

- (void)ticket:(GDataServiceTicket *)ticket finishedWithFeed:(GDataFeedContact *)feed
{

    if ([[feed entries] count] > 0) {

        GDataEntryContact *firstContact = [[feed entries] objectAtIndex:0];
        GDataTextConstruct *titleTextConstruct = [firstContact title];
        NSString *title = [titleTextConstruct stringValue];

        NSLog(@"first contact's title:%@", title);
    }
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    [self getGoogleContacts];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T13:16:04.093

看起来 API 需要一个带有三个参数的选择器，第三个参数代表`NSError*`

```
- (void)    ticket:(GDataServiceTicket *)ticket
  finishedWithFeed:(GDataFeedContact *)feed
             error:(NSError *)error {
    ...
}

...

ticket = [service fetchContactFeedForUsername:username delegate:self didFinishSelector:@selector(ticket:finishedWithFeed:error:)]; 
```

# windows-phone-8 - 应用内购买消耗品响应错误

> ID：16192783
> 
> 赞同：0
> 
> 时间：2013-04-24T13:04:07.807
> 
> 标签：windows-phone-8, in-app-purchase

我正在开发具有应用内功能的应用程序，需要根据用户的需要一次又一次地购买，但是当我们尝试再次购买产品并出现错误消息时应用程序崩溃-`The original purchase must be reported as fulfilled before you can try to repurchase` 我尝试使用**ReportProductFulfillment(pID);** 但不确定使用此方法的位置，请建议我该怎么做？

注意-我的产品是消耗品

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T04:17:50.113

你用过这个方法吗？当收据来自服务器（Windows 商店）时，请试试这个。

ReportProductFulfillment(productId);

```
 // Summary:
    //     Notifies the marketplace that the application has delivered the paid-for
    //     goods to the user. You cannot repurchase a product until you have confirmed
    //     its delivery using this method
    //
    // Parameters:
    //   productId:
    //     The ID of the product that has been delivered to the user.
    public static void ReportProductFulfillment(string productId); 
```

# javascript - 如何在asp.net mvc中的页面刷新后保留注入的部分视图

> ID：16192788
> 
> 赞同：1
> 
> 时间：2013-04-24T13:04:47.403
> 
> 标签：javascript, asp.net, asp.net-mvc, jquery

我正在使用`ASP.NET MVC 4`和`jQuery`。我的视图上有一个按钮控件。单击它时，它会将部分视图“注入”到我的视图中。当我刷新页面时，部分视图就消失了。

我的 HTML 标记：

```
<button id="RetrieveButton" type="button">Retrieve</button>

<div id="RuleDetails">
     <div class="main-content">
          <p>Some text.</p>
     </div>
</div> 
```

我的 jQuery 通过 AJAX 调用返回部分视图以返回 HTML：

```
$('#RetrieveButton').click(function () {
     $.ajax(
     {
          type: 'POST',
          url: '@Url.Action("GetRuleDetails")',
          data: {
               systemCode: $('#SystemCodes').val()
          },
          dataType: "html",
          success: function (result) {
               alert('success');
               var domElement = $(result);
               $("#RuleDetails").html(domElement);
          },
          error: function (result) {
               alert('error');
          }
     });
}); 
```

我的操作方法：

```
public ActionResult GetRuleDetails()
{
     RuleViewModel viewModel = new RuleViewModel();

     return PartialView("_RuleInformation", viewModel);
} 
```

我的部分观点：

```
@model MyProject.ViewModels.Rules.RuleViewModel

<div class="main-content">
     <h2>Rule Details</h2>
</div> 
```

如果我要刷新页面，我需要这个“注入”的局部视图保留在那里。目前，如果我要刷新它，它会“重置”，并且注入的部分已经消失。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T13:22:34.340

它不会再次呈现该部分视图，因为它不记得按钮的单击状态。

实现您正在寻找的方法之一是使用[sammy.js](http://sammyjs.org/)

单击按钮时，您可以使用`sammy.js`（例如：）设置 hashurl `'#/partialview'`，并且在页面刷新 hashurl 部分保持不变（但不会转到服务器）。然后您可以相应地操作客户端代码

1.  在您的页面中引用 sammy.js。
2.  像下面这样初始化 sammy

    ```
     var app = $.sammy('body', function (context){

               this.get('#/PartialView1', function () {
                    fnLoadPartialView();
                });

    }); 
    ```

3.  使用 href='PartialView1' 将 Retrieve 更改为

4.  ```
    function fnLoadPartialView (){
             $.ajax(
         {
              type: 'POST',
              url: '@Url.Action("GetRuleDetails")',
              data: {
                   systemCode: $('#SystemCodes').val()
              },
              dataType: "html",
              success: function (result) {
                   alert('success');
                   var domElement = $(result);
                   $("#RuleDetails").html(domElement);
              },
              error: function (result) {
                   alert('error');
              }
         });

                } 
    ```

5.

```
$('#RetrieveButton').click(function () {
     fnLoadPartialView ();
}); 
```

# jquery - 如何找到一个父元素下每个元素的值？

> ID：16192791
> 
> 赞同：1
> 
> 时间：2013-04-24T13:04:52.587
> 
> 标签：jquery, html

我有以下 HTML。使用 jQuery，我想`<dl class="item-options">`在一个变量中获取每个 HTML 元素的值。

`<dl class="item-options">`每次在表中生成不同的值`<dl class="item-options">`

```
<dl class="item-options">
        <dd class="truncated" style="color:red;">DSOX3000-232, RS232/UART Serial Decode and Trigger - in <a onclick="return false" class="dots" href="#">...</a>/<div class="truncated_full_value"><dl class="item-options"><dt>Software Applications</dt><dd id="pppp">DSOX3000-232, RS232/UART Serial Decode and Trigger - installed, DSOX3000-AMS, CAN and LIN Automotive Serial Decode - installed, DSOX3000-MAT, Advanced Math Analysis for Infiniivision Oscilloscopes - installed, DSOX3000-VID, Enhanced Video/TV Application Package - installed/</dd></dl></div>
        </dd>          

        <div class="mdata">
            <dd class="truncated">DSOX3000-001, WaveGen 20 MHz Function/Arbitrary Wavefor <a onclick="return false" class="dots" href="#">...</a>/<div class="truncated_full_value"><dl class="item-options"><dt>Advanced Analysis</dt><dd id="pppp">DSOX3000-001, WaveGen 20 MHz Function/Arbitrary Waveform Generator - installed/</dd></dl></div></dd>
        </div>          

        <div class="mdata">
            <dd>DSOX3000-040, Memory Upgrade - 4 Mpts of MegaZoom IV/</dd>
        </div>          

        <div class="mdata">
            <dd class="truncated">DSOX3000-805, Module - LAN/VGA, DSOX3000-806, Module -  <a onclick="return false" class="dots" href="#">...</a>/<div class="truncated_full_value"><dl class="item-options"><dt>Connectivity</dt><dd id="pppp">DSOX3000-805, Module - LAN/VGA, DSOX3000-806, Module - GPIB/</dd></dl></div></dd>
        </div>          

        <div class="mdata">
            <dd class="truncated">DSO0000-903, Power cord - United States and Canada 120V <a onclick="return false" class="dots" href="#">...</a>/<div class="truncated_full_value"><dl class="item-options"><dt>Power Cords</dt><dd id="pppp">DSO0000-903, Power cord - United States and Canada 120V, NEMA 5-15P male plug/</dd></dl></div></dd>
        </div>          

        <div class="mdata">
            <dd class="truncated">DSOX3000-A6J, Certificate of compliance calibration - A <a onclick="return false" class="dots" href="#">...</a>/<div class="truncated_full_value"><dl class="item-options"><dt>Calibration - Upgrade Commercial Calibration Certificate</dt><dd id="pppp">DSOX3000-A6J, Certificate of compliance calibration - ANSI Z540, printed/</dd></dl></div></dd>
        </div>          

        <p style="margin-top:37px"></p>
            <dd>R-50C-021-5, ANSI Z540-1-1994 Calibration - 5 years</dd>
        <p></p>          

        <p style="margin-top:10px"></p>
            <dd>R-51B-001-5F, Return to Agilent Warranty - 5 years</dd><p>
        </p>              
</dl> 
```

我正在使用以下代码来选择以下所有元素的值`<dl class="item-options">`：

```
$(".item-options").each(function() {    
                description+=$(".mdata").find("*").html();  
}); 
```

但我无法获取所有值。这样做的正确方法是什么？

我想要 html 格式的值，所以当我在弹出窗口中显示这些值时，它应该保留外观和感觉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T13:08:47.827

您的代码不起作用，因为您在每次迭代中选择相同的元素。如果需要文本内容，可以使用 jQuery`text`方法或`textContent`属性。

```
var text = $(".item-options").children().map(function() {
       return $(this).text(); 
}).get().join(''); 
```

`map`方法返回一个数组，您可以使用 Array 对象的`join`方法将其转换为字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T13:05:53.593

利用`children()`

试试看

```
 $(".item-options").children(".mdata").each(function() {    
      description+=$(this).html();  
 }); 
```

# c++ - 射击子弹时 SFML 游戏变慢

> ID：16192794
> 
> 赞同：1
> 
> 时间：2013-04-24T13:04:56.710
> 
> 标签：c++, sfml, bullet

我正在使用 SFML 用 C++ 制作小行星游戏。我似乎有射击子弹的问题。尽管每次射击子弹时课程似乎都有效，但游戏速度明显减慢。这是宇宙飞船和子弹的代码。我似乎无法找到它有什么问题！感谢您的时间。

这是船的代码：

```
#include "Spaceship.h"

Spaceship::Spaceship(void){}

Spaceship::~Spaceship(void){}

void Spaceship::LoadResources()
{

    if(!shipAnimImg.LoadFromFile("Resources/Images/SpaceshipAnimation.png"))
        std::cout <<"Could not locate the ship animation image" <<std::endl;

    if(!shipIdleImg.LoadFromFile("Resources/Images/SpaceshipIdle.png"))
        std::cout <<"Could not locate the ship idle image" <<std::endl;

    if(!bulletImg.LoadFromFile("Resources/Images/Bullet.png"))
        std::cout <<"Could not locate the bullet image" <<std::endl;

    shipSpr.SetImage(shipIdleImg);
    shipSpr.SetScale(0.5,0.5);
    shipSpr.SetCenter(shipIdleImg.GetWidth() / 2,shipIdleImg.GetHeight() / 2);

    x = DEFAULT_SCREENWIDTH / 2; 
    y = DEFAULT_SCREENHEIGHT / 2;

    shipSpr.SetPosition(x,y);
    shipSpr.SetRotation(90);

    std::cout<<shipSpr.GetCenter().x<<std::endl;
    std::cout<<shipSpr.GetCenter().y<<std::endl;

    vx = 0.2;
    vy = 0.2;

    isBulletOnScreen = false;
    isPressed = false;
}

void Spaceship::UnloadResources(){}

void Spaceship::Update(sf::RenderWindow &Window,sf::Event event)
{

    if (Window.GetInput().IsKeyDown(sf::Key::A))
    {
        shipSpr.Rotate(0.08);
    }

    if (Window.GetInput().IsKeyDown(sf::Key::D))
    {
        shipSpr.Rotate(-0.08);
    }

    if (Window.GetInput().IsKeyDown(sf::Key::W))
    {
        x += (cos(shipSpr.GetRotation() * (3.14159265/180.0)) *0.2);
        y -= (sin(shipSpr.GetRotation() * (3.14159265/180.0)) *0.2);
        shipSpr.SetPosition(x,y);
    }

    if (Window.GetInput().IsKeyDown(sf::Key::Space) && !isPressed)
    {   
    isBulletOnScreen = true;
    isPressed  = true;
    bullets.push_back(new Bullet(shipSpr.GetPosition().x,shipSpr.GetPosition().y,0.3,shipSpr.GetRotation(),bulletImg));
    }

    if (event.Type == sf::Event::KeyReleased)
    {
        isPressed  = false;
    }

    if(bullets.size() != 0)
    {
        for (int i=0; i<bullets.size(); i++)
        {
            bullets[i]->Update(Window,event);
            if ((bullets[i]->GetX() > DEFAULT_SCREENWIDTH + 40) || (bullets[i]->GetX() < 0 - 40) ||
                (bullets[i]->GetY() > DEFAULT_SCREENWIDTH + 40) || (bullets[i]->GetY() < 0 - 40))
                {
                    bullets.erase(bullets.begin() +i);
                }
        }
        std::cout<<bullets.size()<<std::endl;
    }
    std::cout<<bullets.size()<<std::endl;

}

void Spaceship::Draw(sf::RenderWindow &Window)
{
    if(isBulletOnScreen)
    for (int i=0; i<bullets.size(); i++)
    {
        Bullet *cur = bullets[i];
        bullets[i]->Draw(Window);
        std::cout<<bullets.size()<<std::endl;
    }

    Window.Draw(shipSpr);
} 
```

这是针对子弹的：

```
#include "Bullet.h"

Bullet::Bullet(void){}

Bullet::Bullet(float x,float y,float v,float r,sf::Image image)
{
    LoadResources(x,y,v,r,image);
}

Bullet::~Bullet(void){}

void Bullet::LoadResources(float x,float y,float v,float r , sf::Image image)
{
    this->x = x;
    this->y = y;
    this->v = v;

    bulletImg = image;
    bulletSpr.SetImage(bulletImg);
    bulletSpr.SetScale(0.5,0.5);
    bulletSpr.SetCenter(bulletImg.GetWidth() / 2,bulletImg.GetHeight() / 2);
    bulletSpr.SetPosition(x,y);
    bulletSpr.SetRotation(r);
}

void Bullet::UnloadResources(){}

void Bullet::Update(sf::RenderWindow &Window,sf::Event event)
{
    x += (cos(bulletSpr.GetRotation() * (3.14159265/180.0)) *v);
    y -= (sin(bulletSpr.GetRotation() * (3.14159265/180.0)) *v);

    bulletSpr.SetPosition(x,y);
}

void Bullet::SetX(float x)
{
    this->x = x;
}

void Bullet::SetY(float y)
{
    this->y = y;
}

void Bullet::SetRotation(float r)
{
    rotation = r;
}

float Bullet::GetX()
{
    return x;
}

float Bullet::GetY()
{
    return y;
}

void Bullet::Draw(sf::RenderWindow &Window)
{
    Window.Draw(bulletSpr);
} 
```

编辑：更改了代码，使其在 Spaceship 类中加载图像，并在创建后将其传递给 Bullet 的资源。问题仍然是一样的。每次射击子弹时，游戏都会变得越来越慢，并且会一直保持缓慢，直到被清除为止。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T13:08:56.587

**1.**`Bullet`每次创建新对象时（通常，如果您喜欢拍摄），您都会从磁盘 加载PNG 图像。从磁盘加载可能会很慢。尝试多次重复使用相同的图像！

您可能可以将`LoadFromFile`功能拉出`LoadResources` 并将其放置在游戏期间可以持续的地方。然后`LoadResources`，只要需要创建新的子弹，就可以参考那个地方。可以在游戏中重复使用的任何其他图像或资源也是如此。

**2.** 我也看到你`std::cout`的代码中有。尝试删除渲染循环中的所有内容，因为打印速度很慢。

```
for (int i=0; i<bullets.size(); i++)
{
    Bullet *cur = bullets[i];
    bullets[i]->Draw(Window);
    std::cout<<bullets.size()<<std::endl; // This is going to be slow
} 
```

**3.** 您可能还想查看`bullets`向量。向其添加项目符号时，`push_back`会更改向量的大小，并且每次都需要分配和释放一些内存。更好的方法是为开始的最大数量的项目符号腾出空间（`resize`例如使用该函数），以便在创建项目符号时矢量不会改变大小。

```
if (Window.GetInput().IsKeyDown(sf::Key::Space) && !isPressed)
{   
    isBulletOnScreen = true;
    isPressed  = true;
    bullets.push_back(new Bullet(...); // avoid this
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T13:11:16.830

每次你调用一个新的 Bullet

```
Bullet::Bullet(float x,float y,float v,float r)
{
    LoadResources(x,y,v,r);
} 
```

您还调用`LoadResources(x,y,v,r)`which 调用

```
bulletImg.LoadFromFile("Resources/Images/Bullet.png") 
```

并且该调用从磁盘读取文件，这是一个非常慢的操作，比其他任何操作都慢一个数量级，因此您的程序在加载期间停止。

# c++ - 当你完美前移时，类型名 T 变为 T& 或 T&&，但当你不这样做时，T 根本不是引用。如何？

> ID：16192796
> 
> 赞同：5
> 
> 时间：2013-04-24T13:05:06.110
> 
> 标签：c++, templates, c++11

我正在阅读有关完美转发的内容，这是我学到的让我感到困惑的事情：
当您尝试实现完美转发时，您将执行以下操作：

```
template<class T> // If I were to call foo with an l-value int, foo would look
void foo(T &&x);  // like this: void foo(int& &&x) 
```

所以我想，等等，这是否意味着如果我这样做：

```
template<class T> // If I were to call foo with an l-value int, foo would look
void foo(T x);    // like this: void foo(int& x); 
```

但事实并非如此。*foo*看起来像这样：`void foo(int x);`

**我的问题：为什么在完美的转发功能中，T 变成了 T& 或 T&&，但在另一个中，T 不是参考？有人能告诉我这个的确切规则吗？我需要澄清一下！**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-24T13:11:51.623

模板形参**只有**出现在函数形参`T`中才能推导出为引用类型**`T&&`**

 **表单的函数模板：

*   `template<class T> void f(T x)`

    将推断`T`为对象类型（并且`x`是对象类型，因此按值传递）

*   `template<class T> void f(T& x)`

    将推断`T`为对象类型（然后`x`具有左值引用类型）

*   `template<class T> void f(T&& x)`

    将推断`T`为

    *   *左值引用（`x`由于引用折叠规则而具有左值引用类型*）**
    **   *或*作为对象类型（`x`右值引用类型也是如此）* 

 *> **完美的转发功能怎么来的，T变成了T&或T&&，*[...]***

这是错误的。 `T`成为**引用类型`L&`**或**对象类型`R`**，*而不是*引用`R&&`。
形式的函数参数`T&&`因此变为

*   要么`L&`（因为将右值引用添加到左值引用仍然是左值引用，就像`add_rvalue_reference<L&>::type`仍然一样`L&`）
*   或者它变成`R&&`（因为`add_rvalue_reference<R>::type`是`R&&`）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-24T13:12:15.170

这是因为*类型推导*的定义方式，它只与完美转发有关，因为`std::forward<>()`如果传递了右值引用，则结果是右值，如果传递了左值引用，则结果是左值。

但一般来说，**当您没有引用开始时，您`T`不会被推断为引用类型**（即 as `A&`，无论`A`可能是什么）。如果是这样的话，正如[Yakk](https://stackoverflow.com/questions/16192796/when-you-perfect-forward-typename-t-becomes-a-t-or-t-but-when-you-dont-t/16192955#comment23151213_16192955)在评论中正确指出的那样，编写一个按值获取参数的函数模板是不可能的。

特别是，您所指的引用折叠规则在 C++11 标准的第 14.8.2.1/4 段中定义：

> 如果 P 是引用类型，则使用 P 所引用的类型进行类型推导。**如果 P 是对 cv 非限定模板参数的右值引用并且参数是左值，则使用类型“对 A 的左值引用”代替 A 进行类型推导**。[*示例*：
> 
> ```
> template <class T> int f(T&&);
> template <class T> int g(const T&&);
> int i;
> int n1 = f(i); // calls f<int&>(int&)
> int n2 = f(0); // calls f<int>(int&&)
> int n3 = g(i); // error: would call g<int>(const int&&), which
> // would bind an rvalue reference to an lvalue 
> ```
> 
> *—结束示例*]

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-24T13:12:35.730

像这样推导模板参数时，需要考虑三种一般情况。

1.  `void foo(T x)`：这意味着“按值传递”。它总是推断出适合按值传递的类型。

2.  `void foo(T& x)`：这意味着“通过左值引用”。它总是推断出适当的类型以通过左值引用传递。

3.  `void foo(T&& x)`：这意味着“通过引用”。它总是推断出适合通过引用传递的类型，它可以是左值引用或右值引用。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-04-24T13:14:06.163

放松，放慢速度，呼吸。

*模板参数推导*是您需要了解的核心机制，它并非完全无关紧要。当你说`template <typename T> void foo(T)`, then`T`总是被*推断*为非引用类型。

如果你想要一个引用，你必须`&`在它上面加上一个：`template <typename T> void foo(T&)`也会推断`T`为一个非引用类型，但`foo`现在总是需要一个左值引用。

最后一块魔法来自新的参考折叠规则。当您说 时`template <typename T> void foo(T&&)`，可能会发生两件事：

*   您`foo`使用右值调用，例如`foo(Bar())`. 然后`T`推导出为`Bar`，并`foo`采用对 的右值引用`Bar`，即 a `Bar&&`。

*   您`foo`使用左值调用，例如`Bar x; foo(x);`. 现在唯一`foo`可以采用的是左值引用。由于折叠规则，这需要`T`推断为`Bar&`，因为。`T&& == Bar& && == Bar&`

只有这个最终模板能够同时接受左值和右值。这就是为什么它有时被称为“通用参考”的原因；但请记住，重要的不是引用，而是模板参数推导。Using`std::forward<T>`允许您传递具有与您收到的相同值类别的参数。***

# tcl - how to get the parent process id in expect script?

> ID：16192807
> 
> 赞同：0
> 
> 时间：2013-04-24T13:05:32.830
> 
> 标签：tcl, expect

I want to know the parent processs id of the parent inside expect script how would i do it.

I used tried to use and got this error

```
[sesiv@itseelm-lx4151 ~]$ invalid command name "id"
    while executing
"id process parent "
    invoked from within
"set parent_process_id [ id process parent ]" 
```

also tried to do

```
 puts "parent is ---$env(PPID)**" 
```

but it gave me this

```
[sesiv@itseelm-lx4151 ~]$ can't read "env(PPID)": no such variable
    while executing
"puts "parent is ---$env(PPID)**"" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T15:08:25.137

The `id` command is part of the Tclx package, you need to include it:

```
package require Tclx 
```

### Update

Since your system does not have the Tclx package, and based on your prompt, I guess you are running a Unix-like operating system, I am going to offer a solution which employs the `ps` command. This solution will not work under Windows.

```
# Returns the parent PID for a process ID (PID)
# If the PID is invalid, return 0
proc getParentPid {{myPid ""}} {
    if {$myPid == ""} { set myPid [pid] }
    set ps_output [exec ps -o pid,ppid $myPid]

    # To parse ps output, note that the output looks like this:
    #   PID  PPID
    #   4584   613
    # index 0="PID", 1="PPID", 2=myPid, 3=parent pid
    set checkPid  [lindex $ps_output 2]
    set parentPid [lindex $ps_output 3]

    if {$checkPid == $myPid} {
        return $parentPid
    } else {
        return 0
    }
}

# Test it out    
set myPid [pid]
set parentPid [getParentPid]

puts "My PID: $myPid"
puts "Parent PID: $parentPid" 
```

# git - 如何在 intelliJ 中创建多个“同步”存储库远程 GIT 分支

> ID：16192809
> 
> 赞同：1
> 
> 时间：2013-04-24T13:05:36.433
> 
> 标签：git, intellij-idea, git-branch

我有一个大型的 intellij 项目，它有 12 个 git 根，并将其设置为“同步”存储库/git 根管理。

我可以轻松地在所有存储库上创建一个新的本地分支，但我不知道如何将新分支推送到所有相应远程存储库上的 *new*remote*branch*。

即使我指定“使用替代遥控器”，推送也总是返回“无推送”并且什么都不做。

我可以从命令行推送每个存储库，但这很方便:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T15:51:40.090

如果您在推送对话框中选择所有存储库，以及“推送到替代分支”复选框，它应该可以正常工作。但是，我怀疑您遇到[了 12.1 中引入的问题](http://youtrack.jetbrains.com/issue/IDEA-104846)，最近在 12.1.2 中已修复（尚未发布）。

# html - 在 ul 列表中使用 css 设置悬停

> ID：16192811
> 
> 赞同：-1
> 
> 时间：2013-04-24T13:05:43.490
> 
> 标签：html, css

这是我的 html 文件：-

```
<div id="load">
<ul>
    <li>Activities
    <ul>
        <li>Physical1
        <ul>
            <li>Cricket
            <ul>
                <li>One Day</li>
            </ul>
            </li>
        </ul>
        </li>
        <li>Test1
    <ul>
        <li>Test At Abc</li>
    </ul>
    </li>
        <li>Test2
    <ul>
        <li>Test At Xyz</li>
    </ul>
        </li>
    </ul>
    </li>
</ul>
</div> 
```

我想设置为 CSS 悬停。
我不太了解 css hover 所以给我建议。
这是我需要的输出。
悬停在`Acvivities`显示中

```
Physical1 
Test1
Test2 
```

悬停在`Physcial1`显示`Cricket`...
谢谢...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T13:09:11.810

```
ul > li > ul {
    display: none;  // hide all submenus
}

li:hover > ul {
    display: block; // show sub menu when parent li is hovered
} 
```

[演示](http://jsfiddle.net/bwTEx/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T13:09:18.403

```
ul li ul
{
    display:none;
}

ul > li:hover > ul
{
    display:block;
} 
```

[http://jsfiddle.net/AyLYe/](http://jsfiddle.net/AyLYe/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-24T13:10:13.193

我不会提供整个代码，但是有了这个基础，您可以调整代码以显示您需要的其余部分。

在开始之前，先看看我用谷歌搜索找到的这个教程：http: [//line25.com/tutorials/how-to-create-a-pure-css-dropdown-menu](http://line25.com/tutorials/how-to-create-a-pure-css-dropdown-menu) 我扫了一眼，看起来还不错，它至少会引导您完成概念和过程。

这是一个 JSFiddle：http: [//jsfiddle.net/Kq7vD/](http://jsfiddle.net/Kq7vD/)

这是使它工作的CSS：

```
#load ul li ul {
    display: none;
}

#load ul li:hover ul {
    display: block;
} 
```

请注意，通过删除#load，您可以使其适用于菜单中的每个列表。这样做的缺点是 CSS 规则随后会应用于您网站上的每个列表，即使它不应该是菜单。出于这个原因，建议您保持您的规则相对具体。

编辑以解决您的评论：

如果您的 HTML 结构在每个 UL 之前都包含一个 DIV，即使是嵌套的 UL，那么您的 css 规则也需要适应该新结构。特别要注意的是，您将不再将 UL 设置为`display: none/block;`DIV，而是将其设置为。

假设结构如下：

```
<div id="load">
   <div>
      <ul>
         <li>
            <div>
               <ul>
                  <li></li>
               </ul>
            </div>
         </li>
      </ul>
   </div>
</div> 
```

你的代码看起来像......

```
#load div ul li div {
    display: none;
}

#load div ul li:hover div {
    display: block;
} 
```

# algorithm - 这些循环可以执行多少次？

> ID：16192814
> 
> 赞同：1
> 
> 时间：2013-04-24T13:05:48.917
> 
> 标签：algorithm, big-o

嘿，我想弄清楚嵌套循环的增长率，我知道第一个循环会运行大约 100 次，因为它只能运行 100 次，但我不太确定第二个循环。任何人都可以帮助我吗？

```
29  for (int i = 0; i < MAX; ++i)
30  {
31     for (int j = 0; m[i] < m[j] && m[j] != 0; ++j)
32     {
33        product = product + (m[i] * n[j]);
34     }
35  } 
```

完整代码在这里

```
01  const int MAX = 100;
02  int lowerCount;
03  int higherCount;
04  int equalCount;
05  int product;
06
07  lowerCount = higherCount = equalCount = 0;
08  product = 0;
09
10  for (int i = 0; i < MAX; i++)
11  {
12     if (m[i]  < n[i])
13     {
14         ++higherCount;
15     }
16     else
17     {
18        if (m[i] == n[i])
19        {
20           ++lowerCount;
21        }
22        else
23        {
24           ++equalCount;
25        }
26     }
27  }
28
29  for (int i = 0; i < MAX; i++)
30  {
31     for (int j = 0; m[i] < m[j] && m[j] != 0; j++)
32     {
33        product = product + (m[i] * n[j]);
34     }
35  }
36
37  cout << "lowerCount " << lowerCount << "\n";
38  cout << "equalCount " << equalCount << "\n";`
39  cout << "higherCount " << higherCount << "\n";
40  cout << "product " << product << "\n""; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T15:11:40.557

我认为您正在寻找的答案是 O(N^2 + 2N / (1/2N) + 3n^3) 如果您使用鲍尔默斯算法来计算复杂性，这很明显。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T13:28:15.977

据我所知，在计算算法复杂度时，您可以给出最佳、最坏和平均情况的大 O。

在两个嵌套循环的情况下，最好的情况是 O(n) - 如果内部循环只执行一次（我忽略了两个循环可能只处理一次迭代的事实）。最糟糕的是 O(n*k) - 第一个循环迭代 n 次，内部循环迭代 k 次。

Asier 很伤心，我们不知道 m[i] 中有什么，所以不知道平均复杂度是多少。

# c# - C# 调用返回类型为 struct* 的 c dll 函数（我没有 struct c 代码/定义）

> ID：16192818
> 
> 赞同：3
> 
> 时间：2013-04-24T13:06:02.873
> 
> 标签：c#, c, struct, dllimport

我有一个名为 MT7Trace.dll 的库及其头文件 MT7Trace.h。我希望能够在 c# 代码中使用此 dll 中包含的函数，但我无法正确导入它们。以这两个函数为例：

```
MT7TRACE MT7TraceEnum MT7TraceCreateEnum (void);
MT7TRACE MT7TraceSensor MT7TraceGetNextSensor (MT7TraceEnum hEnumerator); 
```

在哪里：

```
typedef struct tagMT7TraceEnum * MT7TraceEnum; 
```

到目前为止，我的天真尝试如下：

```
[DllImport("MT7Trace.dll")]
public static extern IntPtr MT7TraceCreateEnum(); //MT7TRACE MT7TraceEnum T7TraceCreateEnum (void);

[DllImport("MT7Trace.dll")]
public static extern IntPtr MT7TraceGetNextSensor (IntPtr hEnumerator);//MT7TRACE MT7TraceSensor MT7TraceGetNextSensor (MT7TraceEnum hEnumerator); 
```

但是在测试这个导入的函数时：

```
private bool InitializeOneSensor()
{
    var hEnum = MT7TraceCreateEnum();

    var sensorCtr  = 0;
    MT7TraceSensor hSensor;
    while ((hSensor = MT7TraceGetNextSensor(hEnum)) != IntPtr.Zero)
    {
        // Do something else ..
        DllTraceReleaseSensor(hSensor);
        sensorCtr++;
    }
    DllTraceReleaseEnum(hEnum);
    return sensorCtr ==1;
} 
```

在哪里

```
using MT7TraceEnum    = System.IntPtr;
using MT7TraceSensor  = System.IntPtr; 
```

我有一个例外：

> 调用 PInvoke 函数 'Atracsys.Framework!Atracsys.MicroTouchDevice::MT7TraceGetNextSensor' 使堆栈失衡。这可能是因为托管 PInvoke 签名与非托管目标签名不匹配。检查 PInvoke 签名的调用约定和参数是否与目标非托管签名匹配。

我已经看到了一些示例，这些示例解释了如何创建/重新创建结构以使用它调用 dll 函数，但是在这些示例中，c 结构定义在某处可用：

```
struct XXX{
   type1 fiel1;
   type1 fiel1;
   ...

}; 
```

因此，为了调用 dll 函数，创建了一个等效的 c sharp 结构并用于调用它。

在我的情况下，我没有结构定义（如您在下面查看 MT7Trace.h 所见）

有什么建议么？

这是 MT7Trace.h 代码的内容：

```
/*******************************************************************************
Copyright 2009 3M. All rights reserved.

Program Name:  MT7Trace
Module Name:   MT7Trace.h

Summary: Application interface for MT 7 Software Trace library

Description:
   This header file defines the application interface for the MT 7 Software
   Trace library. This interface allows an application to enumerate touch
   sensors and obtain traces from the sensors.

Notes:

*******************************************************************************/

#ifndef __MT7TRACE_H__
#define __MT7TRACE_H__

#ifdef __cplusplus
extern "C"
{
#endif

/******************************************************************************/
/* I N C L U D E   F I L E S                                                  */

/* Global Includes */

/* Project Includes */

/* Local Includes */

/******************************************************************************/
/* C O N S T A N T S                                                          */

#ifndef MT7TRACE
#if defined (WIN32) || defined (UNDER_CE)
#define MT7TRACE __declspec (dllimport)
#else
#define MT7TRACE
#endif
#endif

/******************************************************************************/
/* G L O B A L   D A T A   T Y P E S                                          */

typedef enum
{
   MT7TraceReason_Arrival = 1,
   MT7TraceReason_Departure = 2,
   MT7TraceReason_NewTrace = 3,
   MT7TraceReason_NewEvent = 4,
} MT7TraceReason;
typedef void (* MT7TraceCallback) (MT7TraceReason eReason, void * hItem,
                                   void * pvUserCode);
typedef enum
{
   MT7TraceEvent_Touchdown = 0,
   MT7TraceEvent_Drag = 1,
   MT7TraceEvent_Liftoff = 2,
} MT7TraceEventType;
typedef struct tagMT7TraceEnum * MT7TraceEnum;
typedef struct tagMT7TraceSensor * MT7TraceSensor;
typedef struct tagMT7TraceTrace * MT7TraceTrace;
typedef struct tagMT7TraceEvent * MT7TraceEvent;

/******************************************************************************/
/* P U B L I C   D A T A                                                      */

/******************************************************************************/
/* G L O B A L   D A T A                                                      */

/******************************************************************************/
/* G L O B A L   F U N C T I O N   P R O T O T Y P E S                        */

// Enumeration API
MT7TRACE MT7TraceEnum   MT7TraceCreateEnum      (void);
MT7TRACE unsigned int   MT7TraceGetEnumID       (MT7TraceEnum hEnumerator);
MT7TRACE MT7TraceEnum   MT7TraceCloneEnum       (MT7TraceEnum hEnumerator);
MT7TRACE MT7TraceSensor MT7TraceGetNextSensor   (MT7TraceEnum hEnumerator);
MT7TRACE void           MT7TraceReleaseEnum     (MT7TraceEnum hEnumerator);

// Sensor API
MT7TRACE unsigned int   MT7TraceGetSensorID         (MT7TraceSensor hSensor);
MT7TRACE const char *   MT7TraceGetSensorName       (MT7TraceSensor hSensor);
MT7TRACE MT7TraceSensor MT7TraceCloneSensor         (MT7TraceSensor hSensor);
MT7TRACE MT7TraceTrace  MT7TraceGetNextTrace        (MT7TraceSensor hSensor);
MT7TRACE void           MT7TraceSetSensorCallback   (MT7TraceSensor hSensor,MT7TraceCallback fnCallback,void * pvUserCode);
MT7TRACE void           MT7TraceReleaseSensor       (MT7TraceSensor hSensor);

// Trace API
MT7TRACE unsigned int   MT7TraceGetTraceID          (MT7TraceTrace hTrace);
MT7TRACE MT7TraceTrace  MT7TraceCloneTrace          (MT7TraceTrace hTrace);
MT7TRACE MT7TraceEvent  MT7TraceGetNextEvent        (MT7TraceTrace hTrace);
MT7TRACE MT7TraceEvent  MT7TraceGetPriorEvent       (MT7TraceTrace hTrace,unsigned int nOffset);
MT7TRACE void           MT7TraceSetNextEvent        (MT7TraceTrace hTrace,unsigned int nIndex);
MT7TRACE unsigned int   MT7TraceGetEventCount       (MT7TraceTrace hTrace);
MT7TRACE MT7TraceEvent  MT7TraceGetEvent            (MT7TraceTrace hTrace,unsigned int nIndex);
MT7TRACE MT7TraceSensor MT7TraceGetTraceSensor      (MT7TraceTrace hTrace);
MT7TRACE void           MT7TraceSetTraceCallback    (MT7TraceTrace hTrace,MT7TraceCallback fnCallback,void * pvUserCode);
MT7TRACE void           MT7TraceReleaseTrace        (MT7TraceTrace hTrace);

// Event API
MT7TRACE unsigned int       MT7TraceGetEventID      (MT7TraceEvent hEvent);
MT7TRACE MT7TraceEvent      MT7TraceCloneEvent      (MT7TraceEvent hEvent);
MT7TRACE MT7TraceEventType  MT7TraceGetEventType    (MT7TraceEvent hEvent);
MT7TRACE float              MT7TraceGetEventX       (MT7TraceEvent hEvent);
MT7TRACE float              MT7TraceGetEventY       (MT7TraceEvent hEvent);
MT7TRACE unsigned int       MT7TraceGetEventTime    (MT7TraceEvent hEvent);
MT7TRACE MT7TraceTrace      MT7TraceGetEventTrace   (MT7TraceEvent hEvent);
MT7TRACE void               MT7TraceReleaseEvent    (MT7TraceEvent hEvent);

// Monitor/Poll API
MT7TRACE int    MT7TracePoll                (void);
MT7TRACE int    MT7TraceStartMonitor        (void);
MT7TRACE void   MT7TraceStopMonitor         (void);
MT7TRACE void   MT7TraceSetArrivalCallback  (MT7TraceCallback fnCallback,void * pvUserCode);
MT7TRACE void   MT7TraceSetUniversalCallback(MT7TraceCallback fnCallback,void * pvUserCode);

/******************************************************************************/
/* G L O B A L   M A C R O S                                                  */

#ifdef __cplusplus
}
#endif

#endif /* ifndef __MT7TRACE_H__ */ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T14:36:45.407

不平衡的堆栈很可能是由使用错误的调用约定引起的。改变你的`DllImport`属性：

```
[DllImport("MT7Trace.dll", CallingConvention=CallingConvention.Cdecl)] 
```

# java - 无法使用 Javascript 中的循环将 10 行写入文件（PhoneGap）

> ID：16192825
> 
> 赞同：0
> 
> 时间：2013-04-24T13:06:12.907
> 
> 标签：java, javascript, android, cordova, for-loop

我正在尝试使用循环将至少 10 行写入文件以使用 PhoneGap 在文件中附加多行，但每次我在下面运行此代码时，只能将 1 行作为换行符添加到文件中。但是在 10 次迭代中没有打印 10 行。请建议我如何使用 phoneGap javascript 纠正我的问题。

```
function gotFileWriter(writer) {

                    for (var z = 0; z<= 10; z++) {

                        console.log("normal write success");

                        writer.onwrite = function(evt) {

                            console.log("write success");
                        };

                        writer.onwriteend = function(evt) {

                            console.log("write end");
                        }

                        writer.seek(writer.length);
                        writer.write("id,updated,created,fname,lname,company,tags,type,label,value,source,sourceid\r\n");
                        writer.abort();    // I tried even commenting
                    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-20T05:28:01.383

您可以使用它来将文本附加到文件而不是循环

```
function gotFileWriter(writer) {
    writer.seek(writer.length);
    writer.write(" - append- \n");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-28T06:30:31.870

这对我有用

构建一个大字符串：

```
function gotFileWriter(writer)
{
  var bigString = '';
  for (var i=0; i<numberOfLines; i++)
  {
    bigString += line[i];
    bigString += '\r\n';
  }
... 
```

然后对文件进行大量写入：

```
...
  writer.onwrite = function (evt) { ... };
  writer.onwriteend = function (evt) { ... };
  writer.seek(writer.length);
  writer.write (bigString);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T08:57:03.977

你试过这个吗？

```
function gotFileWriter(writer) {

    console.log("normal write success");

    writer.onwrite = function(evt) {
        console.log("write success");
    };

    writer.onwriteend = function(evt) {
        console.log("write end");
    }

    for (var z = 0; z< 10; z++) {

        writer.seek(writer.length);
        writer.write("id,updated,created,fname,lname,company,tags,type,label,value,source,sourceid\r\n");
        writer.abort();    // I tried even commenting
    }
} 
```

# android - 我可以在 android 模拟器上发 http 帖子，但不能在手机上发帖

> ID：16192828
> 
> 赞同：0
> 
> 时间：2013-04-24T13:06:17.360
> 
> 标签：android, androidhttpclient

我正在使用此代码发送帖子：

```
try {
    // Add your data
    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
    nameValuePairs.add(new BasicNameValuePair("imagem", "1"));
    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

    // Execute HTTP Post Request
    HttpResponse response = httpclient.execute(httppost);

} catch (ClientProtocolException e) {
    // TODO Auto-generated catch block
} catch (IOException e) {
    // TODO Auto-generated catch block
}
v.setEnabled(true); 
```

它在我的模拟器上运行良好。我已经在其他帖子上搜索了如何解决这个问题，我发现的是关于具有互联网权限的 android 清单。这是我的清单：

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />
    <uses-permission android:name="android.permission.INTERNET" />

<application
    android:allowBackup="true"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="imp.projecto.teste.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER"/>
        </intent-filter>
    </activity>
    <activity android:name=".ActivityImagem" />
    <activity android:name=".ActivityVideo" />
    <activity android:name=".ActivityMusica" />
    <activity android:name=".ActivityRadio" />
    <activity android:name=".ActivityOpcoes" />

</application> 
```

我不知道我是否在正确的地方使用了互联网许可代码，以及它是否在做它的工作。我真的需要一些帮助和一些指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:31:07.447

看起来您正试图在主 UI 线程上运行网络请求。自 3.0 以来，Android 不允许您这样做（我相信）。这样做会导致您的 UI 锁定直到请求完成，从而在执行请求期间使您的应用程序无用。

您必须在 new`Thread`或, 中运行您的请求`ASyncTask`，以承担 UI 线程的负载。您可以在此处找到有关如何使用多个线程的更多信息[。](http://developer.android.com/guide/components/processes-and-threads.html)

# python - pycurl https 错误：无法获取本地颁发者证书

> ID：16192832
> 
> 赞同：16
> 
> 时间：2013-04-24T13:06:25.937
> 
> 标签：python, windows, ssl, ssl-certificate, pycurl

![错误截图](https://i.stack.imgur.com/0bKFY.png)

```
>>> import pycurl
>>> c = pycurl.Curl()
>>> c.setopt(c.URL, 'https://quora.com')
>>> c.perform()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
pycurl.error: (60, 'SSL certificate problem: unable to get local issuer certificate')
>>>
>>> c.setopt(c.URL, 'http://quora.com')
>>> c.perform()
>>>
>>> 
```

为什么无法获得本地颁发者证书？我该如何解决这个问题？当我在浏览器中打开 quora.com 时，我看到它的身份已经过验证。为什么会这样？如何让 pycurl 使用我的浏览器使用的相同证书？ ![在此处输入图像描述](https://i.stack.imgur.com/w7aU4.png)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-24T15:38:10.437

问题是`pycurl`需要一个最新的证书链来验证 ssl 证书。

一个好的解决方案是使用[certifi](https://pypi.python.org/pypi/certifi)。

它基本上是 mozilla 内置证书链的最新副本，包裹在 python 包中，可以使用 pip 保持最新。`certifi.where()`为您提供证书包的位置。

要`pycurl`使用它，请设置`CAINFO`选项：

```
import pycurl
import certifi

curl = pycurl.Curl()
curl.setopt(pycurl.CAINFO, certifi.where())
curl.setopt(pycurl.URL, 'https://www.quora.com')
curl.perform() 
```

# android - 我可以在应用程序和框架之间共享命名管道吗

> ID：16192835
> 
> 赞同：1
> 
> 时间：2013-04-24T13:06:33.913
> 
> 标签：android, linux

这是Android结构的图像。 [Android 结构 http://p.blog.csdn.net/images/p_blog_csdn_net/yuanyou/EntryImages/20090517/android-system-architecture1.jpg](http://p.blog.csdn.net/images/p_blog_csdn_net/yuanyou/EntryImages/20090517/android-system-architecture1.jpg)

我的问题是：我可以在应用程序和应用程序框架之间共享命名管道吗？据我所知，libc 可用于使用 NDK 的应用程序。

例如，我在一个应用程序中创建了一个命名管道，由于应用程序和应用程序框架之间的文件系统知识是相同的，我可以使用命名管道在它们之间共享一些东西吗？

我想在安卓上实现防火墙。但是应用层没有提供我需要的API，所以我试着弄清楚是否应该修改应用程序框架。我想让将数据包发送到目的地的发送方法停止几秒钟，并与顶层的应用程序进行协商以协商某事。

# php - Coverting String to PHP Associative Array

> ID：16192838
> 
> 赞同：0
> 
> 时间：2013-04-24T13:06:41.990
> 
> 标签：php, arrays, string, converter, associative-array

How can i convert this string

```
$str = "array('3'=>'wwm','1'=>'wom')"; 
```

to real php associative array...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T13:10:07.423

这很简单，但**真的不安全**

```
$str = "array('3'=>'www.tension.com','1'=>'www.seomeuo.com','requestedBy'=>'1')";
eval("\$array = $str;"); 
```

你永远不应该使用这种方法，还有其他方法可以做到这一点：`serialize()`和`unserialize()`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T13:09:47.110

您可以使用该`eval()`功能：

```
$str = "array('3'=>'wwm','1'=>'wom')";

eval("\$a=$str;");

var_dump($a); 
```

但是，`eval()`在您的代码中使用被认为是有风险的，您不应该使用它。尝试使用`serialize()`,`unserialize()`代替。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T13:12:30.123

首先。不要使用评估。这是邪恶的！ [http://af-design.com/blog/2010/10/20/phps-eval-is-evil/](http://af-design.com/blog/2010/10/20/phps-eval-is-evil/)

第二。简单的解决方案不是使用此字符串，而只是在将其放入数据库时​​使用“序列化”并在将其拉出时取消序列化。您正在存储一种非常不寻常的格式。

# ruby-on-rails - Rails nested resources with pretty URLs for users

> ID：16192839
> 
> 赞同：0
> 
> 时间：2013-04-24T13:06:41.893
> 
> 标签：ruby-on-rails, ruby-on-rails-3

The data for my application is structured as:

*   Organizations have users
*   Organizations have messages
*   Organizations have sites

I would normally use nested resources to do this RESTfully:

```
resources :organizations do
  resources :users
  resources :messages
  resources :sites
end 
```

Which gives me URLs like:

```
/organizations/12/messages
/organizations/12/sites 
```

These wordy URLs are excellent for when an admin needs to create a message for an organization because the URL contains the organization ID.

**However**, I would like to show normal users pretty URLs such as:

```
/messages
/sites 
```

Is there a way to alias these pretty URLs to /organizations/{current_user.organization.id}/* ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T12:22:32.113

您需要一种传递组织 ID 的方法。例如，如果您有一个属于组织的用户并且该用户已登录，您可以通过 current_user 获取组织 ID，如下所示：

```
class MessageController < ApplicationController
 before_filter :get_organization
 # ...
private
  def get_organization
    @organization = current_user.organization
  end
end 
```

而且，在您的路线中，您可以添加：

```
resources :messages
resources :organizations do
  resources :messages
end 
```

还有其他解决方案，但这取决于您如何获取组织 ID。

# php - 用另一个表的平均值更新一个表 - MySQL

> ID：16192842
> 
> 赞同：1
> 
> 时间：2013-04-24T13:06:48.447
> 
> 标签：php, mysql

我有两个表（*ca*和*average_table*）。

> *ca*有三列：Group_id、Group_name、ca_value
> *average_table*有两列：Group_name、ca_value

我想计算*ca*中所有组的 ca_value 平均值，并用此数据更新 *average_table*。

这就是我所拥有的

```
 //create average table
$average_table="CREATE TABLE average_table(Group_name CHAR(30) Primary Key, ca_value FLOAT)";

// Execute query
if (mysql_query($average_table))
  {
  echo "Table average created successfully";
  }
else
  {
  echo "Error creating table: " . mysql_error();
  }

//Calculate average
$ca = mysql_query("Select AVG(ca_value) FROM ca");

$data_sql = "INSERT INTO average_table (Group_name, ca_value) Values ('Average all groups',$ca)";
// Execute query
if (mysql_query($data_sql))
  {
  }
else
  {
  echo "Error Selecting group: " . mysql_error();
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:27:30.187

`mysql_query`返回结果资源指针，而不是查询的实际结果。`mysql_fetch_array`您必须使用,等获取结果`mysql_fetch_assoc`。此外，`mysql_*`不推荐使用；请考虑切换到 mysqli 或 PDO。根据[http://us1.php.net/manual/en/function.mysql-query.php](http://us1.php.net/manual/en/function.mysql-query.php)上的手册：

> 对于 SELECT、SHOW、DESCRIBE、EXPLAIN 和其他返回结果集的语句，mysql_query() 成功时返回资源，错误时返回 FALSE。
> 
> 返回的结果资源应该传递给 mysql_fetch_array() 和其他处理结果表的函数，以访问返回的数据。

# wmi - 无法使用 vb.net 访问远程计算机上的 WMI

> ID：16192845
> 
> 赞同：0
> 
> 时间：2013-04-24T13:06:50.620
> 
> 标签：wmi, admin, vb.net-2010

我有一个侦察员，似乎无法在任何地方找到答案，所以需要问。

我正在尝试在远程计算机上查询 WMI，但我需要以管理员帐户的身份执行此操作，但这样做时遇到问题。

我正在使用的代码是：

```
Public Sub OperatingSystem(ByVal computeritem As String)
    'set Username and Password which system will access the network with.
    Dim options As ConnectionOptions
    options = New ConnectionOptions()
    options.Authority = "ntdlmdomain:" & ipaddress
    options.Username = "Username"
    options.Password = "Password"

    scope = New ManagementScope("\\" & ipaddress & "\root\cimv2", options)
    scope.Connect()

    Dim query As ObjectQuery
    query = New ObjectQuery("SELECT * FROM Win32_OperatingSystem")
    Dim searcher As ManagementObjectSearcher
    searcher = New ManagementObjectSearcher(scope, query) 
```

查询继续进行并将各种信息拉到一个spradsheet ..如果它有效，它会的！

正在倒下的代码行是：

```
scope = New ManagementScope("\\" & ipaddress & "\root\cimv2", options)
    scope.Connect() 
```

它给了我一条错误消息，上面写着“无效参数”。当我查看详细信息时，内部异常中没有任何内容，我唯一能看到的任何值是 ErrorCode:ManagementStatus.InvalidParameter

如果这真的很简单，我深表歉意。我对此还是很陌生，但如果有人能给我一些指导，我将不胜感激。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T21:31:17.690

看起来对 ipaddress 的引用没有初始化。由于 computeritem 作为参数传递给 sub，因此您的代码可能会更好地使用：

```
scope = New ManagementScope("\\" & computeritem & "\root\cimv2", options) 
```

# javascript - What's the advantage of using ASP.NET MVC 4 with jQuery Mobile?

> ID：16192847
> 
> 赞同：0
> 
> 时间：2013-04-24T13:07:06.430
> 
> 标签：javascript, asp.net-mvc, asp.net-mvc-4, jquery-mobile

I recently know that I can also build mobile web applications with ASP.NET MVC 4.

Since several months ago, I've been developing a mobile web application with jQuery Mobile.

The website does not use any .NET technology. It just uses HTML 5, CSS 3 and JavaScript code.

I'm wondering what advantages can I take when I use ASP.NET MVC 4 with jQuery Mobile.

When I read some articles, One of them is only tells that it's good when you run two kinds of websites: One for desktop and another one for mobile.

It looks like that ASP.NET MVC 4 has nothing to do with MVC pattern of JavaScript. To apply MVC pattern I have to use JavaScript MVC pattern libraries.

Can you share any ideas about it?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:19:01.640

您的应用程序的 .NET 部分是服务器端，您通常会在其中进行一些后台处理或访问您的数据库。如果你没有这些东西，那么你可能根本不需要 MVC4。

# html - html > 在 CSS 中表示什么？

> ID：16192848
> 
> 赞同：13
> 
> 时间：2013-04-24T13:07:10.730
> 
> 标签：html, css, css-selectors

我在 Liferay 门户的一些 CSS 文件中有以下 CSS 代码。

**html >**表示什么？什么时候应该使用？

```
.lfr-dockbar-pinned {
    .dockbar {
        left: 0;
        position: fixed;
        right: 0;
        top: 0;
    }

    .pin-dockbar img {
        background-image: url(../images/dockbar/unpin.png);
    }
}

html > .lfr-dockbar-pinned {
    padding-top: 3.45em;
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-24T13:08:14.030

具有类的元素，该类`lfr-dockbar-pinned`是该`html`元素的直接子后代。见：[http ://www.w3.org/TR/CSS2/selector.html#child-selectors](http://www.w3.org/TR/CSS2/selector.html#child-selectors)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T13:11:23.060

它表示一个元素，它是 html 元素的直接后代（正如@adrian 所说）。

换句话说，它选择父元素所在的所有元素，`<html>`在这种情况下只有`<body>`

所以例如

```
div > p {
   /* This will select all p elements where parent is div */
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T13:11:44.647

它选择子元素。

例如：body > p 选择所有 <p> 元素的直接子元素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T13:15:09.457

鉴于此代码（来自您的评论）：

```
<body class="... lfr-dockbar-pinned ..."> 
```

在这种情况下，当它具有 class 时，它会区分 body`lfr-dockbar-pinned`和具有相同 class 的另一个元素。这允许将不同的样式应用于这些元素中的每一个。

# firefox-addon - Why is the width attribute of a XUL button ignored?

> ID：16192851
> 
> 赞同：0
> 
> 时间：2013-04-24T13:07:21.083
> 
> 标签：firefox-addon, xul

I have problems to set the width of my XUL button. I have this code:

```
<button label="Ok" width="16" maxwidth="16" height="16" maxheight="16"/> 
```

By with that code, the size of my entire window is changed and not only the button.

And when I write that :

```
<button label="Ok" width="16" height="16"/> 
```

Only the height is changed. Why is that?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T07:14:40.990

XUL 使用[灵活的盒子模型](https://developer.mozilla.org/en-US/docs/XUL/Tutorial/The_Box_Model)进行定位。`width`和属性定义元素的`height`固有大小，而不是显示它们的大小。您的按钮显然放置在一个垂直框中（不一定是实际[`vbox`元素](https://developer.mozilla.org/en-US/docs/XUL/vbox)，而是任何带有 的元素[`orient="vertical"`](https://developer.mozilla.org/en-US/docs/XUL/Attribute/orient)）。默认情况下，盒子的[`align`属性](https://developer.mozilla.org/en-US/docs/XUL/Attribute/align)被假定为具有值`stretch`- 所以垂直盒子总是会水平拉伸其中的元素：

```
<vbox>
  <!-- this button is stretched horizontally to match the width of its container -->
  <button label="Ok" width="16" height="16"/>
</vbox> 
```

您可以`align`显式设置属性以避免这种情况：

```
<vbox align="center">
  <!-- this button is centered inside its container -->
  <button label="Ok" width="16" height="16"/>
</vbox> 
```

# javascript - javascript不能单独在Firefox中加载

> ID：16192861
> 
> 赞同：1
> 
> 时间：2013-04-24T13:07:48.330
> 
> 标签：javascript, jsp, firefox, browser-cache

我添加了一段 javascript 代码，但它没有反映在我同行的一些机器上。不知道怎么回事。

这就是我所做的。

1.  OnClick 一个按钮，有一个现有的 JS 函数，我在 click 事件中添加了一个覆盖功能，例如，

    ```
    function existing() {
     var testDate = document.getElementById('test');
     ......
     .....
     newOverlay(); // This is the newly added function
    }
    ```

2.  我将 newOverlay() 定义为

    ```
     function newOverlay(){
    document.getElementbyId('divId').style.display = 'block';
    }
    ```

3.  我已经在上面定义了新函数，`existing()`并且这两个函数都在`head`标签内

4.  当我在本地环境中检查此更改时，它工作正常并且没有问题。当我部署到服务器时，它对我来说工作正常，我的同行看不到 Firefox 的变化。但是，他可以验证 IE 和 Chrome 中的更改。

5.  我们正在考虑浏览器中的一些缓存，我们清除了缓存（ctrl+shft+del --> Everything）并尝试了。问题又出现了。我添加的部分不在 DOM 本身中。我们尝试了 Ctrl+F5，但没有帮助。

当我们重置 firefox 浏览器并尝试时，更改得到反映并且工作正常。不知道到底发生了什么。我们的一些机器上仍然存在这个问题。请分享您的想法。

**注意：整个 JavaScript 都在 JSP 中，并且都使用相同版本的 Firefox（最新）**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-18T12:33:26.503

尝试在 getElementById() 中使用双引号。`"id_name"`而不是`'id_name'`. 有时浏览器很容易出现这种错误。

# apache-flex - flex 在 XML 属性值中使用花括号

> ID：16192864
> 
> 赞同：1
> 
> 时间：2013-04-24T13:07:50.193
> 
> 标签：apache-flex, escaping, curly-braces

我想用硬编码的 XML dataProvider 设置一个 DataGrid。
我的属性值之一需要设置为“{*}”，我知道这会干扰数据绑定。
因此，我尝试用它们的 HTML 等价物替换花括号，但 Flex 仍在处理`{*}`数据

```
<s:ArrayList>
  <fx:Object dataField1="Field1" dataField2="Field2" dataField3="&#123;*&#125;"></fx:Object>
</s:ArrayList> 
```

**在属性文本中使用花括号**的正确方法是什么？****

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T14:45:38.943

您可以使用 RIAstar 提到的方式：

`<fx:Object id="abc1" field1="\{*\}"/>`\

或者您可以使用真正的绑定使其将其中的任何内容都视为代码，然后在其中传递简单的字符串而不`{`转义`}`：

`<fx:Object id="abc" field1="{'{*}'}"/>`

如果您需要将字段设置为更复杂的内容，您还可以使用绑定到返回某些内容的函数。**

# c++ - 提供（空）用户定义的析构函数会导致编译错误

> ID：16192865
> 
> 赞同：6
> 
> 时间：2013-04-24T13:07:54.047
> 
> 标签：c++, c++11, compiler-errors, destructor, unique-ptr

当我没有用户定义的析构函数时，编译得非常好（在 GCC 4.7.2 上）的代码即使提供了一个*空*的用户定义的析构函数也会产生错误：

```
#include <memory>

class Test
{
   std::unique_ptr<int> val;
};

template <typename Type>
class B
{
public:
   //destructor:
   // if I comment this out, the code compiles just fine:
   ~B() { }

private:
   Test a;
};

int main()
{
   auto s = B<int>();
} 
```

当析构函数没有被注释掉时产生的错误的要点是：

*   Test 的复制构造函数不存在，并且没有隐式创建，因为它的格式不正确
*   有些东西试图将已删除的复制构造函数用于 unique_ptr。

对于任何感兴趣的人，完整的错误输出在这篇文章的底部。

我知道`unique_ptr`不能复制构造（除非参数是右值），因此编译器不可能为 class 生成有效的隐式复制构造函数`Test`。

我不明白为什么定义一个**空**的析构函数会突然需要这些复制工具。显然，当使用 s 之类的东西时`unique_ptr`，这是不可能提供的。

这里有人能告诉我为什么会这样吗？

**未注释析构函数时的完整错误输出：**

```
In file included from /usr/include/c++/4.7/list:64:0,
                 from ../../Dropbox/Programming/C++/test/main.cpp:2:
/usr/include/c++/4.7/bits/stl_list.h: In instantiation of 'std::_List_node<_Tp>::_List_node(_Args&& ...) [with _Args = {const Test&}; _Tp = Test]':
/usr/include/c++/4.7/ext/new_allocator.h:110:4:   required from 'void __gnu_cxx::new_allocator<_Tp>::construct(_Up*, _Args&& ...) [with _Up = std::_List_node<Test>; _Args = {const Test&}; _Tp = std::_List_node<Test>]'
/usr/include/c++/4.7/bits/stl_list.h:503:8:   required from 'std::list<_Tp, _Alloc>::_Node* std::list<_Tp, _Alloc>::_M_create_node(_Args&& ...) [with _Args = {const Test&}; _Tp = Test; _Alloc = std::allocator<Test>; std::list<_Tp, _Alloc>::_Node = std::_List_node<Test>]'
/usr/include/c++/4.7/bits/stl_list.h:1533:63:   required from 'void std::list<_Tp, _Alloc>::_M_insert(std::list<_Tp, _Alloc>::iterator, _Args&& ...) [with _Args = {const Test&}; _Tp = Test; _Alloc = std::allocator<Test>; std::list<_Tp, _Alloc>::iterator = std::_List_iterator<Test>]'
/usr/include/c++/4.7/bits/stl_list.h:997:9:   required from 'void std::list<_Tp, _Alloc>::push_back(const value_type&) [with _Tp = Test; _Alloc = std::allocator<Test>; std::list<_Tp, _Alloc>::value_type = Test]'
/usr/include/c++/4.7/bits/stl_list.h:1466:6:   required from 'void std::list<_Tp, _Alloc>::_M_initialize_dispatch(_InputIterator, _InputIterator, std::__false_type) [with _InputIterator = std::_List_const_iterator<Test>; _Tp = Test; _Alloc = std::allocator<Test>]'
/usr/include/c++/4.7/bits/stl_list.h:582:9:   required from 'std::list<_Tp, _Alloc>::list(const std::list<_Tp, _Alloc>&) [with _Tp = Test; _Alloc = std::allocator<Test>; std::list<_Tp, _Alloc> = std::list<Test>]'
../../Dropbox/Programming/C++/test/main.cpp:11:7:   required from here
/usr/include/c++/4.7/bits/stl_list.h:115:71: error: use of deleted function 'Test::Test(const Test&)'
../../Dropbox/Programming/C++/test/main.cpp:5:7: note: 'Test::Test(const Test&)' is implicitly deleted because the default definition would be ill-formed:
../../Dropbox/Programming/C++/test/main.cpp:5:7: error: use of deleted function 'std::unique_ptr<_Tp, _Dp>::unique_ptr(const std::unique_ptr<_Tp, _Dp>&) [with _Tp = int; _Dp = std::default_delete<int>; std::unique_ptr<_Tp, _Dp> = std::unique_ptr<int>]'
In file included from /usr/include/c++/4.7/memory:86:0,
                 from ../../Dropbox/Programming/C++/test/main.cpp:3:
/usr/include/c++/4.7/bits/unique_ptr.h:262:7: error: declared here 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-24T13:10:47.820

如果定义`~B()`，这会抑制 的移动构造函数`B`，因此编译器会尝试生成复制构造函数，但由于`unique_ptr`不可复制构造而失败。

如果省略`~B()`，`B`则生成 的移动构造函数并在 中使用`main`。

您可以请求自动生成的移动构造函数：

```
B(B &&) = default; 
```

这是标准中向后兼容 C++03 代码的一个特性；根据三法则，编写自己的析构函数（等）的代码被假定为管理自己的资源，因此除非明确要求，否则自动生成移动构造函数是不合适的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T13:25:45.787

好吧，你自己说的；当您提供用户定义的析构函数时，您会抑制编译器生成诸如隐式移动构造函数之类的东西的能力。用户定义的析构函数的*内容*（无论是空的还是其他）是完全不相关的。

> `[C++11: 12.7/9]:` **如果类的定义`X`没有显式声明移动构造函数，则当且仅当**：
> 
> *   `X`没有用户声明的复制构造函数，
> *   `X`没有用户声明的复制赋值运算符，
> *   `X`没有用户声明的移动赋值运算符，
> *   **`X`没有用户声明的析构函数**，并且
> *   移动构造函数不会被隐式定义为已删除。
> 
> *[注意：* **当移动构造函数没有被隐式声明或显式提供时，否则会调用移动构造函数的表达式可能会调用复制构造函数。** *——尾注]*

注释中的文字指出了您所看到的确切情况，导致编译失败，因为`unique_ptr` *无法*复制；尽管*您*没有复制它，并且尽管初始化`s`可能不需要复制/移动，但该操作仍然需要可用（per `[C++11: 12.8/31-32]`）。

# java - ArrayList displayed incorrectly

> ID：16192871
> 
> 赞同：0
> 
> 时间：2013-04-24T13:08:15.977
> 
> 标签：java, arraylist, javafx

I'm testing to display Array List into JavaFX accordion:

```
public class Navigation {

    // Object for storing conenctions
    public static List<dataObj> list = new ArrayList<>();
    private ObservableList<dataObj> data;

    public class dataObj {

        private String conenctionname;

        public dataObj(String conenctionname) {
            this.conenctionname = conenctionname;
        }

        public String getConenctionname() {
            return conenctionname;
        }

        public void setConenctionname(String conenctionname) {
            this.conenctionname = conenctionname;
        }
    }

    public void initNavigation(Stage primaryStage, Group root, Scene scene) {

        VBox stackedTitledPanes = createStackedTitledPanes();

        ScrollPane scroll = makeScrollable(stackedTitledPanes);
        scroll.getStyleClass().add("stacked-titled-panes-scroll-pane");
        scroll.setPrefSize(395, 580);
        scroll.setLayoutX(5);
        scroll.setLayoutY(32);

        root.getChildren().add(scroll);

    }

    private ScrollPane makeScrollable(final VBox node) {
        final ScrollPane scroll = new ScrollPane();
        scroll.setContent(node);
        scroll.viewportBoundsProperty().addListener(new ChangeListener<Bounds>() {
            @Override
            public void changed(ObservableValue<? extends Bounds> ov, Bounds oldBounds, Bounds bounds) {
                node.setPrefWidth(bounds.getWidth());
            }
        });
        return scroll;
    }

    /////////////////////////////////////////////////////////////////////////////////////
    // Generate accordition with Connections, Tables and Description
    private VBox createStackedTitledPanes() {
        VBox stackedTitledPanes = new VBox();
        stackedTitledPanes.getChildren().setAll(
                createConnectionsList("Connections"));
        ((TitledPane) stackedTitledPanes.getChildren().get(0)).setExpanded(true);
        stackedTitledPanes.getStyleClass().add("stacked-titled-panes");

        return stackedTitledPanes;
    }

    //////////////////////////////////////////////////////////////////////////////
    // Generate list with Connections
    public TitledPane createConnectionsList(String title) {

        initObject();

        data = FXCollections.observableArrayList(list);

        ListView<dataObj> lv = new ListView<>(data);

        lv.setCellFactory(new Callback<ListView<dataObj>, ListCell<dataObj>>() {
            @Override
            public ListCell<dataObj> call(ListView<dataObj> p) {
                return new ConnectionsCellFactory();
            }
        });
        AnchorPane content = new AnchorPane();
        content.getChildren().add(lv);
        // add to TitelPane
        TitledPane pane = new TitledPane(title, content);
        return pane;
    }

    static class ConnectionsCellFactory extends ListCell<dataObj> {

        @Override
        public void updateItem(dataObj item, boolean empty) {
            super.updateItem(item, empty);
            if (item != null) {

                for (int i = 0; i < list.size(); i++) {
                    setText(list.get(i).getConenctionname());
                }

            }
        }
    }

    // Insert Some test data
    public void initObject() {

        dataObj test1 = new dataObj("test data 1");
        dataObj test2 = new dataObj("test data 2");

        list.add(test1);
        list.add(test2);

    }
} 
```

But for some reason I cannot get proper list of Objects from the Array list and display them. I get this result:

![enter image description here](https://i.stack.imgur.com/2ZUjA.png)

The proper result should be `test data 1` and `test data 2`. How I can fix this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:16:45.453

问题出在，为 List 中的每个项目调用`ConnectionsCellFactory`该方法。`updateItem`因此，在您的代码中，对于每个单元格，您都在为列表中的每个项目设置文本

你应该试试：

```
static class ConnectionsCellFactory extends ListCell<dataObj> {

    @Override
    public void updateItem(dataObj item, boolean empty) {
        super.updateItem(item, empty);
        if (item != null) {
            setText(item.getConenctionname());
        }
    }
} 
```

# c - extern "C" 错误 #2040: 需要一个标识符

> ID：16192872
> 
> 赞同：13
> 
> 时间：2013-04-24T13:08:17.870
> 
> 标签：c, hp-ux, acc

我仍在努力编译 C 控制台应用程序，编译过程仍然失败并出现以下错误：

```
"Main.c", line 51: error #2040: expected an identifier
  extern "C" void TreatReceivedSignal( int NoSignal ) ;
         ^
1 error detected in the compilation of "Main.c".
gmake: *** [Main.o] Error 2 
```

在 C 代码上的 extern 方法声明下方：

```
extern "C" void TreatReceivedSignal( int NoSignal ) ; 
```

我正在使用 HP-UX aCC 编译器 [HP C/aC++ B3910B A.06.26]，我还打开了编译标志 -Ae 以启用 C99 支持。似乎编译器无法将'extern“C”'识别为C保留字，可能需要设置其他一些编译标志。请问有什么办法可以解决这类问题吗？非常感谢您提前。问候

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-24T13:11:48.827

该`extern "C"`构造是 C++ 特定的东西，它不能在 C 中使用。编译器将您的源文件视为 C 源文件，因为它具有扩展名`.c`.

最常见的做法是使用预处理器有条件地将其添加到 C++ 编译中：

```
#ifdef __cplusplus
extern "C" {
#endif

/* Standard C prototypes */

#ifdef __cplusplus
}
#endif 
```

# python - Python nicest way to take boolean expression string apart

> ID：16192874
> 
> 赞同：4
> 
> 时间：2013-04-24T13:08:30.523
> 
> 标签：python

I have a boolean expression string, that I would like to take apart:

```
condition = "a and (b or (c and d))" 
```

Or let's say:
I want to be able to access the string contents between two parenthesis.
I want following outcome:

```
"(b or (c and d))"
"(c and d)" 
```

I've tried the following with regular expressions (not really working)

```
x = re.match(".*(\(.*\))", condition)
print x.group(1) 
```

Question:
What is the nicest way to take a boolean expression string apart?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-24T13:15:46.790

这是你不能用简单的正则表达式做的事情。您需要实际解析文本。[pyparsing](http://pyparsing.wikispaces.com/)显然非常适合这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T13:32:44.350

就像大家说的，你需要一个解析器。

如果不想安装，可以从[这个简单的自顶向下解析器开始（](http://effbot.org/zone/simple-top-down-parsing.htm)[这里](http://svn.effbot.org/public/stuff/sandbox/topdown/tdop-4.py)取最后一个代码示例）

删除与您的需要无关的所有内容（+、-、*、/、is、lambda、if、else、...）。只保留括号, `and`, `or`. 您将获得从您的表达式生成的二叉树结构。标记器使用内置`tokenize`( `import tokenize`)，它是 Python 源代码的词法扫描器，但对于像您这样的简单情况也能正常工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-24T14:14:18.337

如果您的要求相当简单，那么您实际上并不需要解析器。使用堆栈可以轻松实现匹配括号。

您可以执行以下操作：

```
condition = "a and (b or (c and d))"

stack = []

for c in condition:
    if c != ')':
        stack.append(c)
    else:
        d = c
        contents = []
        while d != '(':
            contents.insert(0, d)
            d = stack.pop()
        contents.insert(0, d)
        s = ''.join(contents)
        print(s)
        stack.append(s) 
```

产生：

```
(c and d)
(b or (c and d)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T13:15:12.577

构建解析器：

```
 Condition ::= Term Condition'
 Condition' ::= epsilon | OR Term Condition'
 Term  ::=  Factor Term'
 Term' ::= epsilon | AND Factor Term'
 Factor ::= [ NOT ] Primary
 Primary ::= Literal | '(' Condition ')'
 Literal ::= Id 
```

# javascript - 如何使用 jQuery 将新锚附加到下拉列表中的选项

> ID：16192875
> 
> 赞同：0
> 
> 时间：2013-04-24T13:08:31.557
> 
> 标签：javascript, jquery

是否可以与下拉列表中的选项一起动态创建新的锚标记？

我想从下拉列表框中的新选项卡中打开新页面。有没有其他方法可以做到这一点？

到目前为止，我已经尝试过这个：

```
function abc
{
    $("#reportimg").fadeOut("slow"); 
    <?php $link="<html><a Onclick='openreport($report2)'>Open</a></html>";?>
    var text="<?php echo $report2.$link;?>";  
    var val="<?php echo $report2;?>"; 
    alert(text);
    $('#report_list').append( new Option(text,val) );
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T13:48:02.863

您实际上不能强制浏览器打开一个新选项卡，只能打开一个新窗口。如今，当您单击“_blank”链接或通过 JavaScript 打开新窗口时，浏览器确实倾向于打开一个新选项卡。

如果您对此感到满意（我怀疑，您不是因为您专门要求打开新标签的解决方案），您可以试试这个：

```
<!doctype html>
<html>
<body>
    <select id="myDropDown">
        <option>Select a website</option>
        <option value="http://www.google.com">Google</option>
        <option value="http://www.yahoo.com">Yahoo</option>
        <option value="http://www.msn.com">MSN</option>
    </select>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
    <script>
        $(function() {
            $('#myDropDown').change(function(el) {
                window.open($('#myDropDown').val());
            });
        })
    </script>
</body>
</html> 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T13:34:37.620

尝试使用这种结构（当然你可以用你的 PHP 生成替换我的东西，但没有必要使用`<a>`或其他）：

```
<select id="report_list">
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
</select> 
```

而这个Javascript：

```
$(document).ready(function () {
    $("#report_list").on("change", function () {
        openreport($(this).val());
    });
}); 
```

**演示：http:** [//jsfiddle.net/AyvUZ/2/](http://jsfiddle.net/AyvUZ/2/)

这会监听`<select>`'s 值的变化，这意味着选择了一个选项。您可以使用`$(this).val()`（这是您在示例代码中似乎需要的全部）获取它的值，并将其传递给`openreport`. 这一切都是在不修改原始 HTML 的情况下完成的。

# plone - No search results for Plone Dexterity type

> ID：16192876
> 
> 赞同：1
> 
> 时间：2013-04-24T13:08:33.463
> 
> 标签：plone, indexer, dexterity

I have created a new dexterity type, and the type is working nicely, and title turns up nicely in the Plone search results. However I need to index the rest of the fields aswell.

Following the Dexterity manual I have created an @indexer and catalog, and I can see in portal_catalog that the "varenummer" index is filled with the correct column data.

My problem is though that I cant search on a "Varenummer" in the plone search field.

Any ideas?

I have the following schema set up in vare.py

```
class IVare(form.Schema):
    """Leverandør type, som kan oprettes alle steder.
    """

    title = schema.TextLine(
            title=_(u"Varenavn"),
        )

    varenummer = schema.TextLine(
            title=_(u"Varenummer"),
        )

    stoerrelse = schema.TextLine(
            title=_(u"Størrelse"),
        )

    enhed = schema.TextLine(
            title=_(u"Enhed"),
        )

    pris = schema.TextLine(
            title=_(u"Pris"),
        )

@indexer(IVare)
def varenummerIndexer(obj):
    """Create a catalogue indexer, registered as an adapter, which can
    populate the ``start`` index with the film's start date.
    """
    return obj.varenummer
grok.global_adapter(varenummerIndexer, name="varenummer") 
```

In catalog.xml I have defined:

```
<?xml version="1.0"?>
<object name="portal_catalog" meta_type="Plone Catalog Tool">
    <index name="varenummer" meta_type="FieldIndex">
        <indexed_attr value="varenummer"/>
    </index>
    <column value="varenummer"/>
</object> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:36:39.507

Plone 搜索字段仅使用`SearchableText`索引。

这是一个全文索引，大多数类型使用应包含在结果中的所有字段的连接结果（字符串）填充。

有一个[`collective.dexteritytextindexer`包](https://pypi.python.org/pypi/collective.dexteritytextindexer)可以更轻松地填充`SearchableText`敏捷类型的索引。

将该包中的行为添加到您的类型中：

```
 <property name="behaviors">
     <element value="collective.dexteritytextindexer.behavior.IDexterityTextIndexer" />
 </property> 
```

然后将您的`varenummer`字段标记为索引的一部分：

```
from collective import dexteritytextindexer

class IVare(form.Schema):
    """Leverandør type, som kan oprettes alle steder.
    """

    dexteritytextindexer.searchable('varenummer')
    varenummer = schema.TextLine(
            title=_(u"Varenummer"),
        ) 
```

# mysql - SQL Find Previous Value for Each Row

> ID：16192877
> 
> 赞同：1
> 
> 时间：2013-04-24T13:08:35.667
> 
> 标签：mysql, sql

I have a SQL table with the following structure:

```
id Integer, (represents a userId)
version Integer,
attribute varchar(50) 
```

So some sample rows are:

```
4, 1, 'test1'
4, 2, 'test2'
4, 3, 'test3' 
```

I need to generate output in the following format:

```
4, 1, 'test1', 'test1'
4, 2, 'test2', 'test1'
4, 3, 'test3', 'test2' 
```

So the format of my output would be:

```
id Integer,
version Integer,
attribute_current varchar,
attribute_old varchar 
```

I already tried the following:

```
select versionTest.id, versionTest.version, versionTest.attribute, maxVersionTest.attribute
from versionTest
inner join
versionTest maxVersionTest
ON
versionTest.id = versionTest.id
AND
versionTest.version = 
(Select max(version) currentMaxVersion 
from versionTest maxRow
where maxRow.id = id); 
```

The above query executes, but returns incorrect results. It only returns the largest version instead of returning rows for all versions.

Any ideas about how I should fix my query to produce the correct results? Thanks!

Note - The version numbers are not guaranteed to be sequential starting at 1\. My actual database has some unusual version numbers (i.e. user 7 has version 3 and 15 with no versions 4, 5, 6, etc...).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:17:20.010

既然你提到了：

> *不保证版本号从 1 开始是连续的。我的实际数据库有一些不寻常的版本号（即用户 7 有版本 3 和 15，没有版本 4、5、6 等......）*

MySQL 不像任何其他 RDBMS 那样支持窗口函数，您仍然可以模拟如何创建序列号并用作链接列来获取前一行。前任，

```
SELECT  a.ID, a.Version, a.attribute attribute_new,
        COALESCE(b.attribute, a.attribute) attribute_old
FROM
        (
            SELECT  ID, version, attribute,
                    @r1 := @r1 + 1 rn
            FROM    TableName, (SELECT @r1 := 0) b
            WHERE   ID = 4
            ORDER   BY version
        ) a
        LEFT JOIN
        (
            SELECT  ID, version, attribute,
                    @r2 := @r2 + 1 rn
            FROM    TableName, (SELECT @r2 := 0) b
            WHERE   ID = 4
            ORDER   BY version
        ) b ON a.rn = b.rn + 1 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/7ca64/6)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T13:17:58.823

```
SELECT a.*, COALESCE(b.attribute,a.attribute) attribute_old
  FROM
     ( SELECT x.*
            , COUNT(*) rank 
         FROM versiontest x 
         JOIN versiontest y 
           ON y.id = x.id 
          AND y.version <= x.version 
        GROUP 
           BY x.id
            , x.version
     ) a
  LEFT
  JOIN
     ( SELECT x.*
            , COUNT(*) rank 
         FROM versiontest x 
         JOIN versiontest y 
           ON y.id = x.id 
          AND y.version <= x.version 
        GROUP 
           BY x.id
            , x.version
     ) b
    ON b.id = a.id 
   AND b.rank = a.rank-1; 
```

样本输出（[**DEMO**](http://www.sqlfiddle.com/#!2/defc0/7)）：

```
+----+---------+-----------+------+---------------+
| id | version | attribute | rank | attribute_old |
+----+---------+-----------+------+---------------+
|  4 |       1 | test1     |    1 | test1         |
|  4 |       5 | test2     |    2 | test1         |
|  4 |       7 | test3     |    3 | test2         |
|  5 |       2 | test3     |    1 | test3         |
|  5 |       3 | test4     |    2 | test3         |
|  5 |       8 | test5     |    3 | test4         |
+----+---------+-----------+------+---------------+ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T13:22:09.747

你可以试试...

```
SELECT ID,
       VERSION,
       ATTRIBUTE,
       (SELECT ATTRIBUTE
            FROM VERSIONTEST V3
            WHERE V3.ID = V1.ID AND
                  V3.VERSION = (SELECT MAX(VERSION)
                                    FROM VERSIONTEST V2
                                    WHERE V2.ID = V1.ID AND
                                          V2.VERSION < V1.VERSION)) AS PREVIOUSATTRIBUTE
    FROM VERSIONTEST V1; 
```

只要版本值按数字顺序排列。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T13:17:22.067

如果版本号总是增加`1`，您可以：

```
select  cur.id
,       cur.version
,       cur.attribute
,       coalesce(prev.attribute, cur.attribute)
from    versionTest
left join
        versionTest prev
on      prev.id = cur.id
        and prev.version = cur.version + 1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T14:36:49.440

我认为表达这一点的最简单方法是使用相关子查询：

```
select id, version, attribute as attribute_current,
       (select attribute
        from VersionTest vt2
        where vt2.id = vt.id and vt2.version < vt.version
        order by vt2.version
        limit 1
       ) as attribute_prev
from VersionTest vt 
```

此版本将`NULL`作为第一行的 prev 值。如果你真的想要它重复：

```
select id, version, attribute as attribute_current,
       coalesce((select attribute
                 from VersionTest vt2
                 where vt2.id = vt.id and vt2.version < vt.version
                 order by vt2.version
                 limit 1
                ), vt.attribute
               ) as attribute_prev
from VersionTest vt 
```

# hadoop - Hadoop :how to set more than one column as a key and more than one column as a value in mapreduce classes in Hadoop

> ID：16192879
> 
> 赞同：0
> 
> 时间：2013-04-24T13:08:40.097
> 
> 标签：hadoop, mapreduce, hbase, hdfs

i want to set more than one column as a key and more than one column as a value in mapreduce "key-value pairs" classes in Hadoop using java and the file reads from contains 20 column .thank you

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:19:23.880

将您想要作为键和值发出的所有列组合成一个分隔字符串并将它们作为文本发出。

假设您的输入如下所示：

不，姓名，年龄，国家

1，塔里克，25，印度

2，萨米，25，xyz

并且您想发出“No+Age”作为键和“Name+Country”作为值。

```
public static class MyMapper extends Mapper<LongWritable, Text, Text, Text> {

        String line = "";
        String val = "";
        String[] parts;
        String key = "";

        public void map(LongWritable key, Text value, Context context) throws IOException, InterruptedException {

            line = value.toString();
            parts = line.split(",");
            key = parts[0] + "." + parts[2];
            val = parts[1] + "." + parts[3];
            context.write(new Text(key), new Text(value));
        }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T14:10:40.483

您可以制作一个复合对象，`implements WritableComparable<YourClassName>`以简洁的形式将键存储在一起。请参阅[此链接](http://my.safaribooksonline.com/book/databases/hadoop/9780596521974/serialization/id3548156)以获取一个很好的示例。

但是，鉴于您需要 20 个组件，我可能会建议只使用一个`Text`对象并在适合那么多组件时对其进行解析。我经常使用制表符分隔值并使用自定义 TSV 解析器解析它们，但仅`Text.toString()`使用合适的分隔符拆分它们`char`就足够了。

# c - Reading elements from a struct with fread()

> ID：16192882
> 
> 赞同：0
> 
> 时间：2013-04-24T13:08:49.130
> 
> 标签：c, fread

I'm trying to read the header of a BMP file and then display it's contents.

```
struct BMP *bmp;
bmp = (struct BMP*)malloc(sizeof(struct BMP));
    if(bmp)
    {
        fread(bmp,sizeof(struct BMP),1,bmpFile); //This does not work for me

        //Then we display the contents
        printf("#######CABECALHO DE UM ARQUIVO .BMP (BITMAP)#########\n");
        printf("\n");
        printf("Tipo de Arquivo (2 bytes): %c%c\n", bmp->id[0],bmp->id[1]);
        printf("Tamanho do arquivo (4 bytes): %d Kb\n",bmp->filesize/1024);
        printf("Reservado1 (2 bytes): %x\n",bmp->reserved[0]);
        printf("Reservado2 (2 bytes): %x\n",bmp->reserved[1]);
        printf("Tamanho do Cabecalho BMP: %d\n",bmp->headersize);
        printf("Tamanho do Info Header (4 bytes): %d\n", bmp->infosize);
        printf("Largura: (4 bytes): %d\n", bmp->width);
        printf("Altura: (4 bytes): %d\n", bmp->height);
        printf("Plane: (2 bytes): %x\n", bmp->plane);
        printf("Bits por Pixel: (2 bytes): %x\n", bmp->bits);
        printf("Compressao: (4 bytes): %d\n", bmp->compression);
        printf("Tamanho da Imagem: (4 bytes): %d\n", bmp->imagesize/1024);
        printf("X: (4 bytes): %d\n", bmp->x);
        printf("Y: (4 bytes): %d\n", bmp->y);
        printf("Nro de Cores : (4 bytes): %d\n", bmp->clrUsed);
        printf("Nro de Cores Importantes : (4 bytes): %d\n", bmp->clrImportant);
        printf("\n");
        printf("#######FIM DO CABECALHO TOTAL DE 50 BYTES#########");
   } 
```

However the only accurate information it shows me is the first 2 bytes all the other values are incorrect.

If instead of reading the whole struct

```
struct fread(bmp,sizeof(struct BMP),1,bmpFile); 
```

I read each element at a time

```
 fread(&bmp->id[0],sizeof(char),1,bmpFile);
        fread(&bmp->id[1],sizeof(char),1,bmpFile);
        fread(&bmp->filesize,sizeof(int),1,bmpFile);
        fread(&bmp->reserved[0],sizeof(short),1,bmpFile);
        fread(&bmp->reserved[1],sizeof(short),1,bmpFile);
        fread(&bmp->headersize,sizeof(int),1,bmpFile);
        fread(&bmp->infosize,sizeof(int),1,bmpFile);
        fread(&bmp->width,sizeof(int),1,bmpFile);
        fread(&bmp->height,sizeof(int),1,bmpFile);
        fread(&bmp->plane,sizeof(short),1,bmpFile);
        fread(&bmp->bits,sizeof(short),1,bmpFile);
        fread(&bmp->compression,sizeof(int),1,bmpFile);
        fread(&bmp->imagesize,sizeof(int),1,bmpFile);
        fread(&bmp->x,sizeof(int),1,bmpFile);
        fread(&bmp->y,sizeof(int),1,bmpFile);
        fread(&bmp->clrUsed,sizeof(int),1,bmpFile);
        fread(&bmp->clrImportant,sizeof(int),1,bmpFile); 
```

then all values are displayed correctly... So my question is why is that happening what is different when I read the whole struct at once.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T13:11:44.653

可能是由于结构中的内部填充，最初的尝试是使用结构进行二进制 I/O 的一种非常糟糕且不安全的方式。

最好将众所周知的*字节*数加载到字节缓冲区中，然后解码每个字段并将其复制到内存中的结构中。

另请注意，您[不应强制转换`malloc()`in C](https://stackoverflow.com/a/605858/28169)的返回值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T13:31:33.320

问题出在您的 struct BMP 中，为什么不使用现成的定义，例如 WinGDI.h 中的定义

```
#pragma pack(push,1)
typedef struct tagBITMAPINFOHEADER{
        DWORD      biSize;
        LONG       biWidth;
        LONG       biHeight;
        WORD       biPlanes;
        WORD       biBitCount;
        DWORD      biCompression;
        DWORD      biSizeImage;
        LONG       biXPelsPerMeter;
        LONG       biYPelsPerMeter;
        DWORD      biClrUsed;
        DWORD      biClrImportant;
} BITMAPINFOHEADER, FAR *LPBITMAPINFOHEADER, *PBITMAPINFOHEADER;
#pragma pack(pop) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T13:19:14.260

那是因为结构被填充了。这意味着结构的大小将不等于结构中每个单独元素的大小之和。这样做是为了[对齐字节](http://en.wikipedia.org/wiki/Data_structure_alignment)以提高性能。

[C11 标准](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)的第 6.2.6.1 节说：

> 当一个值存储在结构或联合类型的对象中时，包括在成员对象中，对应于任何填充字节的对象表示的字节采用未指定的值。

简而言之，结构的填充是未指定的行为。这意味着任何实现都可以在没有文档的情况下做任何它想做的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T14:52:17.430

如果你想让它工作，即使考虑到阅读整个结构是不正确的，在定义你的结构以完全控制焊盘时，你应该非常小心。

你的结构应该看起来像这样（如果你有一个 32 位平台）。

```
struct BMP
{
unsigned char id[];
unsigned short filesize_1;  

/* here we need to control the pads to make sure it will fit to our platform.
/ also, the order of msb and lsb may change according to the platform. */

unsigned short filesize_2;  // Now start a new int.
...
} 
```

稍后您需要操作数据以获取正确的值。

但请记住，这取决于平台，通常不值得痛苦。

# javascript - 如何获得相对于 HTML 中的祖父元素的偏移量？

> ID：16192892
> 
> 赞同：2
> 
> 时间：2013-04-24T13:09:08.537
> 
> 标签：javascript, dom

如果我在`<p> some text <b> some oth|er text </b> bla bla </p>`哪里| 是插入符号，我想获得相对于 p 标签节点的偏移量，有没有办法可以找到相对于 p 的偏移量？

现在我通过这个得到选择的偏移量：

```
var range = window.getSelection().getRangeAt(0); 
var offset = range.startOffset; 
```

但是，这会返回相对于粗体标签的偏移量。

我需要这个，因为我正在用 Javascript 开发一个编辑器，并且我需要自己实现输入功能，因为我正在使用这个编辑器进行实时协作。当有人在 p 标签的子项中间按下回车键时，我发现了这个问题。

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:57:51.017

可能有更好的方法来实现这一点，但我还没有玩足够的选择和范围。但是，我在想，由于您已经知道相对于`b`标签的字符偏移量，因此您只需将`b`标签之前的文本节点中包含的字符数添加到计数中即可知道总偏移量。

`b`我相信您可以通过执行类似的操作来获取标签的父节点， `range.startContainer.parentNode`.

然后，您可以遍历标记`childNodes`的`p`直到标记`childNodes[i]`，`b`并且每次遇到文本节点 ( `node.nodeType === 3`) 时，都添加`node.textContent.length`到偏移量。

# quartz-scheduler - 估计石英表中的记录数

> ID：16192894
> 
> 赞同：0
> 
> 时间：2013-04-24T13:09:16.973
> 
> 标签：quartz-scheduler

我正在开发一个 Java/Java EE 应用程序，它有 12 个数据库表和通过 web 服务公开的相同数量的方法。我有石英配置做一些工作，通过另一个操作在这些表中插入数据。我正在尝试估计石英表中将驻留（最大）的记录数，即

```
qrtz_blob_triggers
qrtz_calendars
qrtz_cron_triggers
qrtz_fired_triggers
qrtz_job_details
qrtz_locks
qrtz_paused_trigger_grps
qrtz_scheduler_state
qrtz_simple_triggers
qrtz_simprop_triggers
qrtz_triggers 
```

我可能没有给出完整的信息来得出一个合乎逻辑的估计。如果有任何其他信息可以提供帮助，请告诉我。

如果有人至少可以为我提供一种方法来得出一个很好的估计。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-05T22:01:28.530

这取决于许多因素。通常，假设您的实现是正确的并且删除作业也会删除触发器，您可以期望每个作业的触发器表中有一条记录。在工作详细信息中，您应该为每个工作提供一组记录。调度程序状态也依赖于实现。这些表通常不会很大（除非您有一个包含数千个作业的非常大的实现）。日志表（假设您将日志写入数据库）是那些变得很大的表。

# windows - 将 git describe 设置为 shell 变量

> ID：16192902
> 
> 赞同：2
> 
> 时间：2013-04-24T13:09:36.267
> 
> 标签：windows, git, shell, command-line

我想根据`git describe`命令的输出创建一个目录。

这**不起作用**：

```
set NAME = git describe
mkdir %NAME% 
```

**我该怎么办？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T17:06:08.893

在 Windows 中，要捕获命令的输出，请使用`FOR /F`命令。

阅读`HELP FOR`然后试试这个

```
 FOR /F %a in ('git describe') do md %a 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T13:13:57.557

在 Windows 上，您可以尝试[PA](https://stackoverflow.com/a/16198056/1737938)描述的方法。

现在，如果您使用的是 Linux，以下可能会起作用：

试试这个：

```
# Create the command
alias your-command="mkdir $(git describe)"

# Run the command
your-command 
```

`git describe`应创建一个以输出命名的文件夹。

这是在 ubuntu 安装上测试的*，*它只能在存储库文件夹本身内工作。

请注意，所描述的命令会创建一个*别名*。如果要将 的*输出设置`git describe`为 shell 变量*，则应执行以下操作：

```
# Create a local variable
foo=$(git describe)

# Create a new folder using `mkdir`
mkdir ${foo} 
```

请注意，现在您有一个值为 的局部变量`git describe`。你可以试试：

```
echo ${foo} 
```

# c# - 实体框架不会将元数据嵌入到 dll 中

> ID：16192905
> 
> 赞同：5
> 
> 时间：2013-04-24T13:09:52.887
> 
> 标签：c#, entity-framework, msbuild, teamcity, embedded-resource

## 我正在尝试做的事情

我目前有一个项目文件，其中包含单个 EF 5 模型，其 .edmx 配置为将元数据嵌入到输出程序集中。

如果我通过 Visual Studio 2012 运行本地包，则生成的程序集包含正确的资源。通过 MSBuild 手动运行包也会正确地将资源嵌入程序集中：

```
msbuild web.csproj /t:Package /p:Configuration=Release 
```

[当我使用dotPeek](http://www.jetbrains.com/decompiler/)手动检查 Visual Studio*或*MSBuild 包步骤生成的程序集时，我可以确认该包包含 .csdl、.ssdl 和 .msl 资源。

## 实际问题

我手头有一个运行 Microsoft Windows Server 2012 和 Visual Studio 2012 的构建服务器。如果我通过 Visual Studio 2012 命令提示符手动运行 MSBuild，使用与上面相同的命令行，则生成的程序集*不*包含嵌入的资源。

当我通过 MSBuild 执行自动化包时，为什么没有嵌入我的 EF 元数据文件？

## 简单的自包含正确示例

可以在[此处](http://db.tt/Q9ZvgQYX)找到演示解决方法的[SSCCE](http://sscce.org/)。该示例包含在.`readme.txt`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T22:56:13.487

使用您的示例，在安装的 Windows 8 + VS2012 上，我能够使用 Package.bat 生成包，并且所有生成的程序集都包含所有 EF 元数据文件。在 Readme.txt 你提到了 MSDeploy

> 4) 在项目上运行 MSDeploy /t:package

从您的问题看来，您对 MSBuild 有疑问。您能否在运行构建时验证您没有旧的 TestEntityEdmx.Hackaround.dll 位于 TestEntityEdmx\obj\Release... 文件夹中。

# c# - .NET 字典：获取或创建新的

> ID：16192906
> 
> 赞同：51
> 
> 时间：2013-04-24T13:09:53.130
> 
> 标签：c#, .net, dictionary, insert-update

我经常发现自己创建了一个[`Dictionary`](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)具有重要值的类（例如[`List`](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)），然后在填充数据时总是编写相同的代码模式。

例如：

```
var dict = new Dictionary<string, List<string>>();
string key = "foo";
string aValueForKey = "bar"; 
```

也就是说，我想插入`"bar"`与 key 对应的列表中`"foo"`，其中 key`"foo"`可能没有映射到任何东西。

这是我使用不断重复模式的地方：

```
List<string> keyValues;
if (!dict.TryGetValue(key, out keyValues))
  dict.Add(key, keyValues = new List<string>());
keyValues.Add(aValueForKey); 
```

有没有更优雅的方式来做到这一点？

对此问题没有答案的相关问题：

*   [是否有一个 IDictionary 实现在缺少键时返回 null 而不是抛出？](https://stackoverflow.com/q/538729/974531)
*   [仅在 C# 字典中查找一次的查找或插入](https://stackoverflow.com/q/6408916/974531)
*   [如果键不存在，字典返回默认值](https://stackoverflow.com/q/2601477/974531)

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-04-24T13:29:18.913

我们对此略有不同的看法，但效果是相似的：

```
public static TValue GetOrCreate<TKey, TValue>(this IDictionary<TKey, TValue> dict, TKey key) 
    where TValue : new()
{
    if (!dict.TryGetValue(key, out TValue val))
    {
        val = new TValue();
        dict.Add(key, val);
    }

    return val;
} 
```

称为：

```
var dictionary = new Dictionary<string, List<int>>();

List<int> numbers = dictionary.GetOrCreate("key"); 
```

它利用公共无参数构造函数的通用约束：`where TValue : new()`.

为了帮助发现，除非扩展方法非常特定于一个狭窄的问题，否则我们倾向于将扩展方法放在它们正在扩展的类型的命名空间中，在这种情况下：

```
namespace System.Collections.Generic 
```

大多数情况下，使用该类型的人`using`在顶部定义了语句，因此 IntelliSense 也会在您的代码中找到为其定义的扩展方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-24T13:50:40.800

和很多编程问题一样，当你发现自己做了很多事情时，把它重构为一个方法：

```
public static void MyAdd<TKey, TCollection, TValue>(
    this Dictionary<TKey, TCollection> dictionary, TKey key, TValue value)
    where TCollection : ICollection<TValue>, new()
{
    TCollection collection;
    if (!dictionary.TryGetValue(key, out collection))
    {
        collection = new TCollection();
        dictionary.Add(key, collection);
    }
    collection.Add(value);
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-04-06T18:36:21.657

对于更多的读者，这里有一些我认为合适的扩展。`out`如果您需要检查是否添加了一个值，您也可以使用参数做一些事情，但我认为您可以使用`containskey`或已经为此使用的东西。

您可以使用它`GetOrAddNew`来检索项目，或创建并将其添加到字典中。您可以使用 的各种重载`GetOrAdd`来添加新值。这可能是`default`这样，`NULL`或者`0`但您也可以提供一个 lambda 来为您构造一个对象，并使用您想要的任何类型的构造函数参数。

```
var x = new Dictionary<string, int>();
var val = x.GetOrAdd("MyKey", (dict, key) => dict.Count + 2);
var val2 = x.GetOrAdd("MyKey", () => Convert.ToInt32("2"));
var val3 = x.GetOrAdd("MyKey", 1); 
```

```
 /// <summary>
    /// Extensions for dealing with <see cref="Dictionary{TKey,TValue}"/>
    /// </summary>
    public static class DictionaryExtensions
    {
        public static TValue GetOrAddNew<TKey, TValue>(this IDictionary<TKey, TValue> dict, TKey key, TValue defaultValue = default) 
            where TValue : new() 
            => dict.GetOrAdd(key, (values, innerKey) => EqualityComparer<TValue>.Default.Equals(default(TValue), defaultValue) ? new TValue() : defaultValue);

        public static TValue GetOrAdd<TKey, TValue>(this IDictionary<TKey, TValue> dict, TKey key, TValue defaultValue = default)
            => dict.GetOrAdd(key, (values, innerKey) => defaultValue);

        public static TValue GetOrAdd<TKey, TValue>(this IDictionary<TKey, TValue> dict, TKey key, Func<TValue> valueProvider)
            => dict.GetOrAdd(key, (values, innerKey) => valueProvider());

        public static TValue GetOrAdd<TKey, TValue>(this IDictionary<TKey, TValue> dict, TKey key, Func<TKey, TValue> valueProvider)
            => dict.GetOrAdd(key, (values, innerKey) => valueProvider(key));

        public static TValue GetOrAdd<TKey, TValue>(this IDictionary<TKey, TValue> dict, TKey key, Func<IDictionary<TKey, TValue>, TKey, TValue> valueProvider)
        {
            if (dict == null) throw new ArgumentNullException(nameof(dict));
            if (key == null) throw new ArgumentNullException(nameof(key));
            if (valueProvider == null) throw new ArgumentNullException(nameof(valueProvider));

            if (dict.TryGetValue(key, out var foundValue))
                return foundValue;

            dict[key] = valueProvider(dict, key);
            return dict[key];
        }
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-04-06T14:52:12.390

这是构造函数需要参数的解决方案。

```
public static TValue GetOrCreate<TKey, TValue>(this IDictionary<TKey, TValue> dict, TKey key, Func<TValue> createNew)
    {
        if (!dict.TryGetValue(key, out var val))
        {
            val = createNew();
            dict.Add(key, val);
        }

        return val;
    } 
```

使用简单：

```
MyDict.GetOrCreate(si.Id, createNew: () => new ObjectKnowingItsId(si.Id)) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-01-14T13:51:54.053

如果您使用 .Net Core，您可以使用[`Dictionary<>.TryAdd()`](https://docs.microsoft.com/en-us/dotnet/api/system.collections.generic.dictionary-2.tryadd?view=netcore-3.1).

```
var dict = new Dictionary<string, string>();
dict.TryAdd("foo", "bar"); // returns bool whether it added or not feel free to ignore.
var myValue = dict["foo"]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-24T14:30:54.820

好的，不同的方法：

```
public static bool TryAddValue<TKey,TValue>(this System.Collections.Generic.IDictionary<TKey,List<TValue>> dictionary, TKey key, TValue value)
    {
        // Null check (useful or not, depending on your null checking approach)
        if (value == null)
            return false;

        List<TValue> tempValue = default(List<TValue>);

        try
        {
            if (!dictionary.TryGetValue(key, out tempValue))
            {
                dictionary.Add(key, tempValue = new List<TValue>());
            }
            else
            {
                // Double null check (useful or not, depending on your null checking approach)
                if (tempValue == null)
                {
                    dictionary[key] = (tempValue = new List<TValue>());
                }
            }

            tempValue.Add(value);
            return true;
        }
        catch
        {
            return false;
        }
    } 
```

通过这种方式，您必须“尝试将”您的值添加到通用列表（显然可以推广到通用集合），空检查并尝试获取字典中的现有键/值。用法和示例：

```
var x = new Dictionary<string,List<string>>();
x.TryAddValue("test", null); // return false due to null value. Doesn't add the key
x.TryAddValue("test", "ok"); // it works adding the key/value
x.TryAddValue("test", "ok again"); // it works adding the value to the existing list 
```

希望能帮助到你。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-06-26T12:19:21.583

那这个呢？

```
var keyValues = dictionary[key] = dictionary.ContainsKey(key) ? dictionary[key] : new List<string>();
keyValues.Add(aValueForKey); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-06-09T12:06:16.420

我缺少 的 GetOrAdd `Dictionary`，它确实存在于`ConcurrentDictionary`.

```
ConcurrentDictionary<int,Guid> Conversion = new ConcurrentDictionary<int, Guid>();
List<int> before = new List<int> { 1, 2, 1, 3 };
List<Guid> after = before.Select(x => Conversion.GetOrAdd(x, Guid.NewGuid())).ToList(); 
```

此代码将为每个号码生成 Guid。最终将两个 1 转换`before`为相同的 Guid。

在你的情况下：

```
ConcurrentDictionary<int, List<String>> dict;
keyValues = dict.GetOrAdd(key, new List<String>());
keyValues.Add(aValueForKey); 
```

# excel - 在条件格式化之前刷新单元格值

> ID：16192908
> 
> 赞同：1
> 
> 时间：2013-04-24T13:09:56.647
> 
> 标签：excel, refresh, delay, vba

我有一张以看起来不错的形状显示数据的表格。这些形状只是引用数据暂存表中的一个单元格。暂存区中的数据正在使用 getpivotdata 公式查找数据。

在我的带有向用户显示值的形状的显示表上，还有一个组合框可以更改数据透视表。更改数据透视表时，它会更新暂存区域中的数据，这反过来会更改显示表上形状中的数据。然后我调用一个宏，如果>0，则将形状设置为绿色，如果<0，则设置为红色。

问题是，虽然枢轴数据正在更改并重新计算，但由于尚未计算新字段，因此我的形状会根据旧值不断更改其颜色。

我已经尝试过 DoEvents 但对它的作用几乎没有经验并且没有运气。我不想延迟一个固定的时间，因为那太可怕了。在调用我的 updateColours 宏之前，我也尝试调用 StagingSheet.calculate，但没有成功。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:36:40.087

您可以尝试 Application.ScreenUpdating = false。例如：

```
Sub AllWorkbookPivots()

Dim pt As PivotTable

Dim ws As Worksheet

Application.ScreenUpdating = False
Application.EnableEvents = False

For Each ws In ActiveWorkbook.Worksheets

    For Each pt In ws.PivotTables

        pt.RefreshTable

    Next pt
Next ws

Application.ScreenUpdating = True
Application.EnableEvents = True

End Sub 
```

那可能行得通。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T09:59:30.950

因此，为了确保在调用颜色更改之前计算值，我使用以下宏使应用程序等待计算完成。

```
Sub WaitForCalculate()
    Application.Cursor = xlWait
    Application.EnableEvents = False

    Do Until Application.CalculationState = xlDone
        DoEvents
    Loop

    Application.EnableEvents = True
    Application.Cursor = xlDefault
End Sub 
```

不是很漂亮，但可以完成工作。

# ruby - 如何理解#dup 和#clone 对引用其他对象的对象进行操作？

> ID：16192912
> 
> 赞同：3
> 
> 时间：2013-04-24T13:10:03.223
> 
> 标签：ruby, object, clone, dup

我不确定在和的文档中**“......但不是他们引用的对象”**的含义。`ruby``rubinus`

在[ruby​​-doc](http://ruby-doc.org/core-2.0/Object.html#method-i-clone)中，有解释`#clone`和`#dup`行为说：

> 产生 obj 的浅拷贝——拷贝 obj 的实例变量，但不拷贝它们引用的对象。复制 obj 的冻结和污​​染状态。另请参阅 Object#dup 下的讨论。

[在Rubinius](https://github.com/rubinius/rubinius/blob/master/kernel/alpha.rb#L189)的实现中重复相同的内容：

> 复制实例变量，但不递归复制它们引用的对象。复制污点。

我尝试使用以下代码，但行为出乎我的意料。

```
class Klass
   attr_accessor :array
end

s1 = Klass.new
ar = [1, 2, 3]
s1.array = [ar]

s2 = s1.clone
# according to the doc,
# s2.array should be initialized with empty Array
# however the array is recursivley copied too

s2.array.equal? s1.array # true 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T13:27:51.957

在 Ruby 中，所有对象都是引用。看看下面的例子：

```
class Klass
  attr_accessor :a
end

s1 = Klass.new
a = [1,2,3]
s1.a = a
s2 = s1.clone
s1.a.object_id  #=> 7344240 
s2.a.object_id  #=> 7344240 
```

您可以看到两个数组都是同一个对象，并且都是对位于堆中某处的数组的*引用。*在深拷贝中，数组本身将被复制，而新`s2`数组将拥有自己的不同数组。数组没有被复制，只是被引用。

**注意：** 如果您进行深层复制，则如下所示：

```
s3 = Marshal.load(Marshal.dump(s1)) #=> #<Klass:0x00000000bf1350 @a=[1, 2, 3, 4], @bork=4> 
s3.a << 5 #=> [1, 2, 3, 4, 5] 
s1 #=> #<Klass:0x00000000e21418 @a=[1, 2, 3, 4], @bork=4> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T13:31:30.997

“相等？” 比较检查它们是否是完全相同的对象：

*   == 比较检查两个值是否相等
*   情商？检查两个值是否相等且类型相同
*   平等的？检查两个事物是否是同一个对象。

例如 ：

```
a=[1,2]
=> [1, 2] 
a == [1,2]
=> true 
a.eql? [1,2]
=> true 
a.equal? [1,2]
=> false 
a.equal? a
=> true 
```

当您使用 equal 进行测试时？它显示副本没有创建未初始化数组的对象，但它已使复制的对象指向与原始对象相同的数组。如果它递归地复制对象 s2.array 将具有与 s1.array 相同的内容，但将是一个不同的对象，所以：

```
s2.array.equal? s1.array # false
s2.array.eql? s1.array # true 
```

# c# - 如何避免编写重复代码

> ID：16192915
> 
> 赞同：-1
> 
> 时间：2013-04-24T13:10:10.590
> 
> 标签：c#, .net-4.0

好吧，我只是有一个问题。

我需要一些专家建议；我有代码，供多个客户使用。所以这是一件好事，没有来自不同客户端的重写逻辑，但是不同客户端的请求和响应对象是不同的；这不是一件好事。导致我重写了一些逻辑。

有没有办法可以缓解这种情况？我怎样才能满足不同的客户/服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:17:54.570

步骤 1\. 用相同的接口包装类中的不同之处

步骤 2\. 使通用逻辑与包装类一起工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T13:25:50.360

将您的共享代码放在基类中，并将所有特定代码放在继承类中。

```
public class MySharedCode
{
    public void MyShareMethodA()
    {
        // Shared code.
    }

    public void MyShareMethodB()
    {
        // Shared code.
    }
}

public class SpecificCodeForASpecificClient:MySharedCode
{
    public void SendRequest(MySpecificRequestA request)
    {
        // Specific code.
    }

    public MySpecificResponse ReadRepsonse()
    {
        // Specific code.
    }
} 
```

这是你要找的吗？还是所有客户端的发送/接收代码都相同？在这种情况下，您可以尝试泛型：

```
public class MySharedCode<TRequest, TResponse>
    where: TResponse: new()
{
    public void MyShareMethodA()
    {
        // Shared code.
    }

    public void MyShareMethodB()
    {
        // Shared code.
    }

    public void SendRequest(TRequest request)
    {
        // Shared code with specific request.
    }

    public TResponse ReadRepsonse()
    {
        // Shared code with specific response.
    }
} 
```

# google-app-engine - 来自 Google App Engine 的带有 dev_appserver.py 的“ImportError：没有名为 _ssl 的模块”

> ID：16192916
> 
> 赞同：24
> 
> 时间：2013-04-24T13:10:11.147
> 
> 标签：google-app-engine, openssl

* * *

# 背景

> “在 Python 运行时，我们添加了对 Python SSL 库的支持，因此您现在可以打开与远程服务的安全连接，例如 Apple 的推送通知服务。”

这句话[摘自 Google App Engine 博客上最近的一篇文章](http://googleappengine.blogspot.co.uk/2013/04/app-engine-177-released.html)。

* * *

# 执行

> 如果要使用本机 python ssl，则必须使用应用程序 app.yaml 文件中的库配置启用它，在该文件中指定库名称 "ssl" 。. .

这些说明是通过[Google App Engine 文档](https://developers.google.com/appengine/docs/python/sockets/ssl_support)提供给开发人员的。

以下行已添加到`app.yaml`文件中：

```
libraries:
- name: ssl
  version: latest 
```

这与通过 Google App Engine 文档提供的建议一致。

* * *

# 问题

我尝试以三种不同的配置运行我的项目。两个在工作，一个没有。

### 在职的 ...

在我将应用程序上传到 Google App Engine 并通过实时服务器运行我的项目后，一切正常。

### 在职的 ...

当我运行我的项目`manage.py runserver`并将 Google App Engine SKD 包含在我的. 中时`PYTHONPATH`，一切正常。

### 不工作...

但是，当我使用 运行我的项目时`dev_appserver.py`，我收到以下错误：

```
ImportError at /
No module named _ssl
Request Method: GET
Request URL:    http://localhost:8080/
Django Version: 1.4.3
Exception Type: ImportError
Exception Value:    
No module named _ssl
Exception Location: /usr/local/lib/google_appengine_1.7.7/google/appengine/tools/devappserver2/python/sandbox.py in load_module, line 856
Python Executable:  /home/rbose85/Code/venvs/appserver/bin/python
Python Version: 2.7.3
Python Path:    
['/home/rbose85/Code/product/site',
 '/usr/local/lib/google_appengine_1.7.7',
 '/usr/local/lib/google_appengine_1.7.7/lib/protorpc',
 '/usr/local/lib/google_appengine_1.7.7',
 '/usr/local/lib/google_appengine_1.7.7',
 '/usr/local/lib/google_appengine_1.7.7/lib/protorpc',
 '/usr/local/lib/google_appengine_1.7.7',
 '/usr/local/lib/google_appengine_1.7.7/lib/protorpc',
 '/home/rbose85/Code/venvs/appserver/lib/python2.7',
 '/home/rbose85/Code/venvs/appserver/lib/python2.7/lib-dynload',
 '/usr/lib/python2.7',
 '/usr/local/lib/google_appengine',
 u'/usr/local/lib/google_appengine_1.7.7/lib/django-1.4',
 u'/usr/local/lib/google_appengine_1.7.7/lib/ssl-2.7',
 u'/usr/local/lib/google_appengine_1.7.7/lib/webapp2-2.3',
 u'/usr/local/lib/google_appengine_1.7.7/lib/webob-1.1.1',
 u'/usr/local/lib/google_appengine_1.7.7/lib/yaml-3.10']
Server time:    Wed, 24 Apr 2013 11:23:49 +0000 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-06-05T10:34:56.400

对于当前的 GAE 版本（至少 1.8.0 到 1.8.3），如果您希望能够在您的开发环境中调试 SSL 连接，您需要稍微调整一下 gae 沙箱：

*   在 /path-to-gae-sdk/google/appengine/tools/devappserver2/python/sandbox.py 中的字典 _WHITE_LIST_C_MODULES 中添加“_ssl”和“_socket”键
*   从 Python 框架的 socket.py 文件中替换 google 在 /path-to-gae-sdk/google/appengine/dis27 中提供的 socket.py 文件。

**重要提示：**调整沙盒环境可能会导致功能在您的本地机器上运行，但在生产中不可用（例如，GAE 仅支持生产中的出站套接字）。我会建议您在开发完应用程序的特定部分后恢复您的沙盒。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-06-05T17:48:39.170

[jmg](https://stackoverflow.com/a/16937668)的解决方案有效，但您可以修改相关模块，而不是更改 sdk 文件。

只需在项目设置的开头放置类似的内容即可。

```
# Just taking flask as an example
app = Flask('myapp')

if environment == 'DEV':
    import sys

    from google.appengine.tools.devappserver2.python import sandbox
    sandbox._WHITE_LIST_C_MODULES += ['_ssl', '_socket']

    from lib import copy_of_stdlib_socket.py as patched_socket

    sys.modules['socket'] = patched_socket
    socket = patched_socket 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-12-12T22:09:28.400

我遇到了这个问题，因为我没有`ssl`在我的 app.yaml 文件中进行销售。我知道 OP 是这样做的，但是对于那些因 OP 的错误而登陆这里的人，值得确保您的 app.yaml 文件中有以下行：

```
libraries:
- name: ssl
  version: latest 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-08-12T03:17:17.517

我不得不使用稍微不同的方法来让它在 CircleCI 中工作（不确定他们的 venv 配置的特殊性导致了这个）：

**`appengine_config.py`**

```
import os

if os.environ.get('SERVER_SOFTWARE', '').startswith('Development'):
    import imp
    import os.path
    import inspect
    from google.appengine.tools.devappserver2.python import sandbox

    sandbox._WHITE_LIST_C_MODULES += ['_ssl', '_socket']
    # Use the system socket.

    real_os_src_path = os.path.realpath(inspect.getsourcefile(os))
    psocket = os.path.join(os.path.dirname(real_os_src_path), 'socket.py')
    imp.load_source('socket', psocket) 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-05-27T09:24:33.763

偶然发现这个线程试图与Apples Push通知服务和appengine一起工作......我能够通过在我的app.yaml中添加SSL库，在没有任何猴子补丁的情况下完成这个工作，正如[官方文档](https://cloud.google.com/appengine/docs/python/sockets/ssl_support#specifying_the_ssl_library)中所推荐的那样，希望有帮助其他人 ：）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-10-14T02:23:59.623

我将代码添加到西班牙火车列出的 appengine_config.py 中，但还必须添加以下代码才能使其正常工作：

```
phttplib = os.path.join(os.path.dirname(real_os_src_path), 'httplib.py')
imp.load_source('httplib', phttplib) 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-04-25T14:02:22.197

您可以通过打开 python shell 并键入 来测试本地系统是否可以使用 ssl `import ssl`。如果没有出现错误，则问题出在其他问题上，否则您的系统上没有安装相关库。如果您使用的是 Linux 操作系统，请尝试`sudo apt-get install openssl openssl-devel`或按照您的操作系统的相关说明在本地安装它们。如果您使用的是 Windows，这些是[说明](https://stackoverflow.com/questions/2261866/how-to-install-python-ssl-module-on-windows)。

# jquery - 如何以相反的方式获取所有子元素（文本和普通）？

> ID：16192919
> 
> 赞同：0
> 
> 时间：2013-04-24T13:10:19.103
> 
> 标签：jquery, html, jquery-selectors

考虑以下 HTML：

```
<div class="wrapper">
   Test 1 
       <b>
           tes
           <i>t</i>
       </b>
       <i>
           zz
       </i>
       test 2
</div> 
```

我想如何以相反的方式获取所有子元素，应该是：

1.  `test 2`- 文本节点
2.  `<i>zz</i>`- 节点
3.  `<b>tes<i>t</i></b>`- 节点
4.  `Test 1`- 文本节点

但是我在选择所有节点时遇到问题......我一直得到的是具有该`children()`功能的第二和第三节点。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T13:15:29.040

尝试

```
var c = $('.wrapper').contents();
c = $(c.get().reverse()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T13:26:18.440

利用

```
$(".wrapper").contents(); 
```

[资源](http://api.jquery.com/contents/)

# php - 重复表单 - 添加到数据库

> ID：16192922
> 
> 赞同：0
> 
> 时间：2013-04-24T13:10:33.993
> 
> 标签：php, html, mysql, forms, duplicates

好的，所以表格以一个下拉菜单开头，询问“选择您有多少孩子”这个问题，您可以选择 1-10，这会生成适当数量的重复表格（完全相同的字段）。我想知道的是如何将每个重复的表单添加到一个表中。

例如，我想要的是：某人有 5 个孩子，每个孩子都会在 children 表中获得一行。

目前，如果选择了 1 个孩子并输入了详细信息，他们就可以很好地输入到表格中。那么为什么当它完成不止一个时它会停止它，我该如何解决它？

如果有人希望看到它，我可以更新问题以发布代码，但是代码只是整个页面的一小部分（使用 JavaScript、PHP、HTML 和 MySQL），事情会变得混乱。我只是在寻找想法和指示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:18:38.707

对于正在生成的输入，您可以使用“children []”作为名称，以便将其填充到通过 POST 发送表单的数组中：

```
`Array(
    [children] => Array(
        [0] => 'test'
        [1] => 'test2'
    )
)` 
```

但是给我看你的代码，我们会调整它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T13:14:13.050

为表单使用计数器并在字段名中添加一个数字

```
<form>
<?php $counter = 1; ?>
<input type="text" name="child[<?php echo $counter; ?>][name]">
<input type="text" name="child[<?php echo $counter; ?>][age]">
... rest of the form ...
<?php $counter++; ?>
</form> 
```

使用 $_POST 数组检索更新数据库的脚本中的数据

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T13:17:57.290

确保重复的表单在名称中使用数组

例如：

```
<select name="numberofchildren">
<option>1</option>
...
</select>

// generated by JS or serverside (don;t know what you do now)
Name of 1st Child: <input type="text" name="children[1][name]"/>
Age of 1st Child: <input type="text" name="children[1][age]"/>
Name of 2st Child: <input type="text" name="children[2][name]"/>
Age of 2st Child: <input type="text" name="children[2][age]"/>
Name of 3st Child: <input type="text" name="children[3][name]"/>
Age of 3st Child: <input type="text" name="children[3][age]"/> 
```

现在您可以使用

```
foreach($_POST['children'] as $child)
{
echo $child['name']; 
echo $child['age'];
} 
```

# iphone - ios 5 如何使用滑块挂钩锁屏通知警报？

> ID：16192923
> 
> 赞同：1
> 
> 时间：2013-04-24T13:10:35.577
> 
> 标签：iphone, ios, notifications, jailbreak

全部 ！

我必须用滑块挂钩锁屏通知警报什么类？

没有运气：

```
%hook SBAwayController

    - (BOOL)activateAlertItem:(id)item
    {
        %orig;
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"SBAwayController" message:@"activateAlertItem" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [alert show];
        [alert release];
        return YES;
    }

    -(void)_pendAlertItem:(id)item
    {
        %orig;
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"SBAwayController" message:@"_pendAlertItem" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [alert show];
        [alert release];
    }

%end 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T08:20:32.263

我设法通过挂钩 SBBulletinModalController/SBBulletinBannerController 类、addBulletin 方法来做到这一点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T13:25:11.260

锁屏通知通过推送通知或本地通知显示。您可以找到很多相同的教程。[在这里](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction.html)，您将找到苹果的本地和推送通知编程指南。

# javascript - 从 JSON 创建数组数组

> ID：16192925
> 
> 赞同：3
> 
> 时间：2013-04-24T13:10:37.067
> 
> 标签：javascript, arrays, jquery

我`response`在 php 中使用ajax 调用后收到以下内容`json_encode`：

```
"['2013-02-24', 0]", "['2013-02-25', 0]", "['2013-02-26', 1]", "['2013-02-27', 6]", "['2013-02-28', 6]", "['2013-03-01', 3]", ... 
```

我怎样才能从这个数组数组中用 JavaScript 制作？这甚至可能吗？我的意思是，我尝试过使用 jQuery`makeArray`或`parseJSON`没有成功。最首选的方法是什么？

编辑：

```
function submitForm(t) {
    $.ajax({type:'GET', url: 'charts.php', data:$(page_id).serialize(), success:
        function(response) {
            var myFanRemovesData = new Array(response);
            var myChart = new JSChart(chart_id, 'line');
            myChart.setDataArray(myFanRemovesData); 
```

我必须使用数组数组来设置`myFanRemovesData`它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T13:13:53.897

1) 去掉双引号 ( `"`)：

```
var json = json.replace(/"/g, ''); 
```

2）将整个内容放在方括号中：

```
json = "[" + json + "]"; 
```

3）用双引号替换单引号（因为单引号不会解析）：

```
json = json.replace(/'/g, '"'); 
```

4）解析json字符串：

```
var arrays = JSON.parse(json); 
```

[这是一个工作示例](http://jsfiddle.net/5ENs2/)。它将提醒第一个数组中的第一个日期。（注意：数据是从 DIV 中提取的，以模拟 AJAX 调用并避免我不得不乱用转义引号字符）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T13:13:03.310

尝试：

```
var response = ["['2013-02-24', 0]", "['2013-02-25', 0]", "['2013-02-26', 1]"];
for (var i = 0; i < response.length; i++) {
    var cleaned = response[i].replace(/'/g, "\"");
    response[i] = $.parseJSON(cleaned);
} 
```

**演示：http:** [//jsfiddle.net/hu3Eu/](http://jsfiddle.net/hu3Eu/)

在此代码之后，`response`数组将包含由原始字符串组成的数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T13:15:01.073

只是示例..因为您没有向我们提供任何代码...

```
$.ajax({
  type: "POST",
  url: "some.php",
  data: { name: "John", location: "Boston" },
  dataType: 'json',
}).done(function( responde ) {
    $.each(responde, function(i, v){ 
      alert(v.0 + ' --- ' + v.1);
    });
}); 
```

如果您收到并期待 json，您可以直接将其用作数组/对象 :) 如果它的数组您必须创建一个 each 循环，以便您可以访问每个值..

# c# - 如何在c#中测量线程的时间？

> ID：16192926
> 
> 赞同：8
> 
> 时间：2013-04-24T13:10:41.033
> 
> 标签：c#, multithreading, performance

我想测量 C# 例程所需的时间。因为还有很多其他线程我只想统计这一个线程的时间。在 Java 中，我可以使用`getCurrentThreadCpuTime`.

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:31:53.950

你不能。您无法测量特定**的 CPU**`thread`上的累积时间。您可以做的最准确的事情是`process`为您的每个任务分离一个单独的任务，然后测量进程的 CPU 时间（实际上可以在.Net 中完成）......但这有点矫枉过正。

如果您需要有关如何做到这一点的帮助，您应该专门为此提出另一个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T13:17:44.637

您应该查看[PerformanceCounters](http://msdn.microsoft.com/en-us/library/system.diagnostics.performancecounter.aspx)。它们非常复杂，设置起来可能有点麻烦，但它们为指标提供的功能很强大。有几件事可能会有所帮助：

[性能计数器和线程](https://stackoverflow.com/questions/2061196/performance-counters-and-threading)

[http://blogs.msdn.com/b/adamhems/archive/2008/12/04/using-custom-performance-counters-to-measure-multi-threaded-operation-durations.aspx](http://blogs.msdn.com/b/adamhems/archive/2008/12/04/using-custom-performance-counters-to-measure-multi-threaded-operation-durations.aspx)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-04-24T13:13:14.660

您可以为此使用秒表。这将是最简单的方法。

```
 public void Worker()
    {
        var stopwatch = new Stopwatch();

        stopwatch.Start();

        ///Do your wwork here

        var timeElapsed = stopwatch.Elapsed;
    } 
```

**更新**

我把你的问题搞错了，那这个呢？如果您使用线程睡眠，它不起作用。抱歉，如果这仍然不是您想要的。

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;
    using System.Diagnostics;
    using System.Threading;
    using System.Runtime.InteropServices;
    using System.Collections.Concurrent;

    namespace ConsoleApplication2
    {
        class Program
        {
            static ConcurrentDictionary<int, ProcessThread> threadIdsMapping = new ConcurrentDictionary<int, ProcessThread>();

            static void Main(string[] args)
            {
                Thread oThread = new Thread(
                    delegate()
                    {
                        threadIdsMapping.GetOrAdd(Thread.CurrentThread.ManagedThreadId, GetProcessThreadFromWin32ThreadId(null));

                        long counter = 1;

                        while (counter < 1000000000)
                        {
                            counter++;
                        }
                    });

                oThread.Start();
                oThread.Join();

                Console.WriteLine(threadIdsMapping[oThread.ManagedThreadId].TotalProcessorTime);
                Console.WriteLine(threadIdsMapping[oThread.ManagedThreadId].UserProcessorTime);
                Console.WriteLine(DateTime.Now - threadIdsMapping[oThread.ManagedThreadId].StartTime);

                Console.ReadKey();
            }

            public static ProcessThread GetProcessThreadFromWin32ThreadId(int? threadId)
            {
                if (!threadId.HasValue)
                {
                    threadId = GetCurrentWin32ThreadId();
                }

                foreach (Process process in Process.GetProcesses())
                {
                    foreach (ProcessThread processThread in process.Threads)
                    {
                        if (processThread.Id == threadId) return processThread;
                    }
                }

                throw new Exception();
            }

            [DllImport("Kernel32", EntryPoint = "GetCurrentThreadId", ExactSpelling = true)]
            public static extern Int32 GetCurrentWin32ThreadId();
        }
    } 
```

# javascript - 在 Google Code Prettify 中使用回调

> ID：16192928
> 
> 赞同：2
> 
> 时间：2013-04-24T13:10:44.367
> 
> 标签：javascript

我在页面上使用[Google 代码美化](http://code.google.com/p/google-code-prettify/)（正常工作），并且我想添加一个函数，该函数在此过程完成后调用。

在文档中，他们描述了以下参数：

```
callback=js_ident    window.exports["js_ident"] will be called when prettyprinting finishes. If specified multiple times, all are called. 
```

但是，我无法让它为我工作。我显然错过了应该如何定义/导出回调函数的一些东西。

我的标题看起来像这样（当页面加载代码正确美化但警报不显示）：

```
<script type='text/javascript'>function testing(){alert('hello')}}</script>
<script type='text/javascript' src='https://google-code-prettify.googlecode.com/svn/loader/prettify.js?callback=testing'></script> 
```

另外，按照[这个例子](http://code.google.com/p/google-code-prettify/issues/detail?id=226#c2)，我尝试用几种不同的方式修改第一个块（如下所示），但没有改变：

```
<script type='text/javascript'>window['exports'] = {testing: function(){alert('123')}}</script>
<script type='text/javascript'>window.exports = {testing: {apply: function(){alert('123')}}}</script> 
```

我应该如何定义我的`testing`函数以便可以正确调用它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T13:19:00.173

似乎该`callback`参数仅在`run_prettify.js`脚本上可用，而不是`prettify.js`您当前使用的脚本。

此外，[根据 docs](https://code.google.com/p/google-code-prettify/wiki/GettingStarted)，他们希望您在`callback`参数中指定的函数在`window.exports`对象中指定。

例如[http://jsbin.com/atukuq/1/](http://jsbin.com/atukuq/1/)

```
<script type='text/javascript'>
  window.exports = { 
    testing: function () {
      alert('hello');
    }
  }
</script>
<script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js?callback=testing"></script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T13:24:01.647

```
<script type='text/javascript'>
   window.exports = [];
   window.exports["testing"] = function() {
      alert("hello");
   }
</script>
<script type='text/javascript' src='https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js?callback=testing'></script> 
```

更改：run_prettify.js 代替 prettify.js 并根据文档定义函数。

# c# - 错误的 app.config 加载

> ID：16192931
> 
> 赞同：0
> 
> 时间：2013-04-24T13:10:52.623
> 
> 标签：c#, .net, console-application, app-config

我有一个简单的 C# 控制台应用程序，需要从 app.config 文件中提取一些值。问题是它似乎打开了一个单独的隐藏配置文件，我无法找到或弄清楚如何修复。

这就是我正在做的事情，添加了一些额外的废话并更改了名称，因为到目前为止我一直在使用反复试验：

```
var configPath = AppDomain.CurrentDomain.SetupInformation.ConfigurationFile;

var fileMap = new ExeConfigurationFileMap();

fileMap.RoamingUserConfigFilename = configPath;
fileMap.ExeConfigFilename = configPath;
fileMap.LocalUserConfigFilename = configPath;

var config = ConfigurationManager.OpenMappedExeConfiguration(fileMap, ConfigurationUserLevel.None);

ConfigurationSection 部分 = config.GetSection("appSettings");

section.SectionInformation.AllowExeDefinition = ConfigurationAllowExeDefinition.MachineToApplication；

section.SectionInformation.UnprotectSection();
section.SectionInformation.ForceSave = true;
字符串值 = config.AppSettings.Settings["ValueHere"].Value;
字符串 otherValue = ConfigurationManager.AppSettings["ValueHere"].ToString();

```

configPath 指向包括 app.config 在内的文件所在的正确路径。app.config 的名称是 APPLICATION_NAME.exe.config。

如果我删除配置文件，应用程序将愉快地返回值，所以我 100% 确定它引用了其他文件，我只是无法弄清楚该文件在哪里或如何修复它。

在调试中运行应用程序会指向正确的路径，但当然它位于 bin -> debug 文件夹中并且几乎没有用处。只有在安装测试和生产中才会出现此问题。

编辑：文件夹内容中只有一个 app.config 文件。该应用程序正在其他地方搜索并找到另一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:10:29.620

如果设置具有用户范围，它将被写入用户（漫游）配置文件中的配置文件。请参阅：[在 .NET 中使用 Settings.settings 文件时，配置实际存储在哪里？](https://stackoverflow.com/questions/1075204/when-using-a-settings-settings-file-in-net-where-is-the-config-actually-stored)

因此，请检查设置属性的范围。

# delphi - Delphi XE4 在访问“对象”的通用列表项时给出 E2036

> ID：16192934
> 
> 赞同：3
> 
> 时间：2013-04-24T13:11:06.740
> 
> 标签：delphi, object, compiler-errors, delphi-xe4

这可能与以下上一个问题类似/延续：

[为什么 Delphi XE3 给出“E2382 无法使用实例变量调用构造函数”？](https://stackoverflow.com/questions/12953393/why-delphi-xe3-gives-e2382-cannot-call-constructors-using-instance-variables)

现在我正在尝试使用相同代码的Delphi XE4（根据上述问题的解决方案，“构造函数”更改为“过程”）。

现在我在泛型列表中也有这些东西，即我有

```
TCoordRect = object
public
  function Something: Boolean;
end; 
```

然后是函数参数中的这些列表，我循环并尝试直接访问这些项目：

```
function DoSomething(AList: TList<TCoordRect>): Boolean;
var
  i: Integer;
begin
  Result := False;
  for i := 0 to AList.Count - 1 do
  begin
    Result := Result or AList[i].Something;  // <-- Here comes the compiler error!
  end;
end; 
```

这会导致编译器错误“需要 E2036 变量”。但是，如果我不直接访问它，即放置一个局部变量并首先使用它，那么它可以工作：

```
function DoSomething(AList: TList<TCoordRect>): Boolean;
var
  i: Integer;
  ListItem: TCoordRect;
begin
  Result := False;
  for i := 0 to AList.Count - 1 do
  begin
    ListItem := AList[i];
    Result := Result or ListItem.Something;  // <-- Now this compiles!
  end;
end; 
```

另一个“解决方法”是删除所有这些“对象”类型并将它们更改为“类”，但我很好奇为什么这不像以前那样工作？还是只是“编译器转向移动开发”还是有一些更具体的原因，或者这甚至是一个错误？顺便说一句，我也将此报告为 QC 问题，因此将看看是否有什么来自那里。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T13:17:35.613

这是一个编译器错误，它存在于所有早期版本的编译器中。故障不限于XE4。提交 QC 报告是正确的回应。

如果 Embarcadero 从未尝试修复它，我不会感到惊讶。那是因为您使用的是 deprecated `object`。切换到 using`record`并编译代码。

您在此问题中发现的问题与您在问题顶部提到的 SO 问题无关。

顺便说一句，这真的是一个新旧结合的案例。旧版 Turbo Pascal 对象和现代通用容器。你在混合油和水！

# java - 如何使用 MouseListener 在网格中查找特定单元格

> ID：16192939
> 
> 赞同：5
> 
> 时间：2013-04-24T13:11:18.517
> 
> 标签：java, swing, jpanel, grid-layout, mouselistener

我正在尝试创建一个由单元格组成的 10 x 10 网格的 Java 游戏。网格看起来像这样：

```
public class Grid extends JPanel implements MouseListener {
    public static final int GRID_SIZE = 10;

    public Grid() {
        setPreferredSize(new Dimension(300, 300));
        setLayout(new GridLayout(GRID_SIZE, GRID_SIZE));

        for (int x = 0; x < GRID_SIZE; x++)
            for (int y = 0; y < GRID_SIZE; y++)
                add(new Cell(x, y));
        addMouseListener(this);
    }

// All Mouse Listener methods are in here. 
```

Cell 类如下所示：

```
public class Cell extends JPanel {

    public static final int CELL_SIZE = 1;
    private int xPos;
    private int yPos;

    public Cell (int x, int y) {
        xPos = x;
        yPos = y;
        setOpaque(true);
        setBorder(BorderFactory.createBevelBorder(CELL_SIZE));
        setBackground(new Color(105, 120, 105));
        setPreferredSize(new Dimension(CELL_SIZE, CELL_SIZE));
    }

    // Getter methods for x and y. 
```

我的问题是我现在正在尝试在 Grid 类中实现 MouseListeners。我已经意识到，虽然我可以返回网格的 X 和 Y 坐标，但我似乎无法操纵单元格本身。我假设这是因为当我在 Grid 中创建它们时，我正在创建 100 个没有标识符的随机单元格，因此我无法直接访问它们。

有人可以给我建议吗？我是否需要彻底检查我的代码和创建单元的方式？我是否非常愚蠢并且错过了访问它们的明显方式？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T13:17:16.143

您可以使用适配器模式，如下所示。这样，您可以将侦听器单独添加到每个网格单元，但仍可以处理来自`Grid`.

请注意，`Grid`不再实现`MouseListener`，现在由单元处理。

```
public class Grid extends JPanel {
    public static final int GRID_SIZE = 10;

    public Grid() {
        setPreferredSize(new Dimension(300, 300));
        setLayout(new GridLayout(GRID_SIZE, GRID_SIZE));

        for (int x = 0; x < GRID_SIZE; x++) {
            for (int y = 0; y < GRID_SIZE; y++) {
                final Cell cell = new Cell(x, y);
                add(cell);
                cell.addMouseListener(new MouseListener() {
                    public void mouseClicked(MouseEvent e) {
                        click(e, cell);
                    }
                    // other mouse listener functions
                });
            }
        }        
    }

    public void click(MouseEvent e, Cell cell) {
        // handle the event, for instance
        cell.setBackground(Color.blue);
    }

    // handlers for the other mouse events
} 
```

子类可以将其覆盖为：

```
public class EnemyGrid extends Grid {
    public void click(MouseEvent e, Cell cell) {
        cell.setBackground(Color.red);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T13:22:40.340

*   使用[put/getClientProperty](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#putClientProperty%28java.lang.Object,%20java.lang.Object%29)

*   您可以将此方法与其他附加参数一起使用

*   关于[如何确定网格中单击的 JButton 的](https://stackoverflow.com/a/13531549/714968)`JPanel`示例，与和的逻辑相同`Mouse(Xxx)Listener`

*   覆盖[`getPreferredSize(new Dimension(x, y))`JPanel](https://stackoverflow.com/a/7424211/714968)而不是`setPreferredSize(new Dimension(CELL_SIZE, CELL_SIZE));`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T13:57:30.910

最明显的方法是让你`MouseListener`在`Cell`课堂上移动。

我能想到的第二个选择是使用`java.awt.Container.getComponentAt(int, int)`.

# visual-studio-2008 - MC9190 手持模拟器

> ID：16192953
> 
> 赞同：1
> 
> 时间：2013-04-24T13:12:07.113
> 
> 标签：visual-studio-2008, windows-mobile, emulation, device, handheld

我正在为 Windows Mobile 6.5 附带的手持设备 MC9190G 开发应用程序，下面是此手持设备特性的屏幕截图

![手持式 MC9190 的屏幕截图](https://i.stack.imgur.com/N3baj.png)

哪个是该设备的最佳模拟器？我从这个站点下载了 SDK：[Windows Mobile 6.5 Developer Tool Kit](http://www.microsoft.com/en-us/download/details.aspx?id=17284)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T17:14:44.827

要模拟 Windows Mobile 6.5 Classic 设备，最好使用的模拟器是

来自上述链接的 Windows Mobile 6.5 Standard Developer Tool Kit（美国）。

您也可以安装和使用 Professionel 变体，但您需要记住，Classic 不支持电话（如果您拥有的设备内置有的话）。

根据这个[网站](http://www.motorola.com/Business/US-EN/Business+Product+and+Services/Mobile+Computers/Handheld+Computers/MC9190-G)，这个设备（MC9190G）没有WWAN模块，所以经典版是可以的。

但是，请注意，模拟器不提供摩托罗拉设备特定的 API，例如条形码扫描仪或 WLAN 客户端。

我刚刚从 MS 站点安装了“Windows Mobile 6.5 Standard Developer Tool Kit (USA).msi”。

以下是安装前（左）和安装后（右）的设备仿真器映像列表：

![在此处输入图像描述](https://i.stack.imgur.com/HY9VG.jpg)

可以看到添加了“USA Windows Mobile 6.5 Standard Landscape QVGA Emulator”和“USA Windows Mobile 6.5 Standard Square Emulator”。

尽管前面已经说过，WM65 标准 QVGA Landscape Emulator 也支持电话。由于它还使用了不兼容的屏幕布局，我建议您使用 Windows Mobile 6.1 或 WM 6.5 Prof. 模拟器并避免使用 Phone API。

这是并排显示 Emu 图像的屏幕截图：

![在此处输入图像描述](https://i.stack.imgur.com/J7WLU.gif)

您是否已经拥有要求中列出的 Windows Mobile 6 SDK？

抱歉，对于 MS 提供的内容以及他们在 Windows Mobile OS 系列中使用的“名称”感到困惑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-16T12:59:13.203

目前我正在开发一个类似的设备——带有 RFID 阅读器的 MC9190-Z。我正在使用**Windows Mobile Professional 6.5.3 DTK**，请参见此处：[http ://www.microsoft.com/en-us/download/details.aspx?id=5389](http://www.microsoft.com/en-us/download/details.aspx?id=5389)

“它应该与 WM 6.5 Professional 相同（或 Classic，与 Pro 相同，但不支持电话）。” （来源：[http](http://social.msdn.microsoft.com/Forums/en-US/df3c57a7-eb84-4b45-9c79-6064dd9151e4/confused-windows-embedded-handheld-65-classic-dev-setup?forum=vssmartdevicesvbcs) ://social.msdn.microsoft.com/Forums/en-US/df3c57a7-eb84-4b45-9c79-6064dd9151e4/confused-windows-embedded-handheld-65-classic-dev-setup?forum=vssmartdevicesvbcs )

# apache2.2 - 如何为其他域添加重定向

> ID：16192954
> 
> 赞同：0
> 
> 时间：2013-04-24T13:12:07.463
> 
> 标签：apache2.2

我有一个定义了以下虚拟主机的服务器：

```
<VirtualHost *:80>
  DocumentRoot /dev/null
  ServerName www.originaldomain.com
  RewriteEngine On
  RewriteCond %{HTTP_HOST} ^([^.]+\.)?originaldomain.com
  ReWriteRule ^.*$ http://www.destinationdomain.com [L,QSA,R=301]
</VirtualHost> 
```

这成功地将 www.originaldomain.com 和 originaldomain.com 重定向到 www.destinationdomain.com。

但是我现在另外将 www.originaldomain2.com 和 originaldomain2.com 重定向到destinationdomain.com。作为 Apache 新手，我不确定如何最好地实现这一点。任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:15:30.153

为每个新域添加一个 ServerAlias。

```
ServerAlias www.originaldomain2.com
ServerAlias originaldomain2.com 
```

# git - 如何将 Git 添加到现有的 SVN 项目中？

> ID：16192962
> 
> 赞同：0
> 
> 时间：2013-04-24T13:12:36.220
> 
> 标签：git, svn

在过去的 8 个月里，我一直在为一个项目使用 SVN，现在我正在切换到 Git。

我能够成功地将 SVN 导入 Git，但现在我想在我的本地工作区上建立 Git。

如何在不影响代码的情况下建立 Git 和“同步”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:01:24.633

不完全确定你的意思，但[Git-svn](http://git-scm.com/book/en/Git-and-Other-Systems-Git-and-Subversion)非常好。

我几年前用过。根据我的经验，如果您的项目大量使用 Subversion 分支，我不确定我会相信多少，但也许他们解决了这个问题。这对我的团队来说不是问题，因为我们很少使用 svn 分支。

# javascript - 我想调用 url.action 中的 javascript 函数作为 ASP.Net MVC 中的参数？

> ID：16192963
> 
> 赞同：1
> 
> 时间：2013-04-24T13:12:37.280
> 
> 标签：javascript, asp.net-mvc, parameters

```
Url.Action("actionName","ControllerName",new { extraData = getdata()}); 
```

getdata() 是一个 javascript 函数，我想像这样使用它

```
public ActionResult actionName(string extraData)
{
*/ bla /*
} 
```

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:49:29.567

Javascript 是客户端，C# 是服务器端，所以这行不通。看起来您正在使用 MVC，那么为什么不为这种情况创建一个路由呢？然后可以在客户端使用 javascript 操作 url，并且您的服务器代码保持不变。

```
routes.MapRoute(
    "newRoute", // Route name
    "NewRoute/{extraData}", // URL with parameters
    new
        {
            controller = "ControllerName",
            action = "ActionName",
            extraData = string.Empty
        }
    ); 
```

然后在客户端上，您可能会有如下链接：

```
<a id="myLink" href="about:blank">My Link</a> 
```

您可以根据需要使用您的 javascript 来操作此链接：

```
document.getElementById("myLink").href = "/NewRoute/" + getData(); 
```

我不得不在这里做出很多假设，所以如果这不能回答你的问题，那么你可能需要添加更多关于你想要做什么的细节。

# c# - 如何使用 { } 将值加载到字典中

> ID：16192964
> 
> 赞同：7
> 
> 时间：2013-04-24T13:12:37.253
> 
> 标签：c#, .net, dictionary

是否可以使用 { } 将值加载到字典中？

这失败了

```
static Dictionary<byte, byte> dict = new Dictionary<byte, byte>() { new KeyValuePair<byte, byte>(1, 1) }; 
```

这不会失败，所以我怀疑在 { } 中加载的语法

```
static Dictionary<byte, byte> dic1252expand = new Dictionary<byte, byte>() { }; 
```

这是有效的示例语法

```
byte[] bytes = new byte[] { 1, 2, 3 }; 
KeyValuePair<byte, byte> kvp = new KeyValuePair<byte, byte>(1, 1); 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-24T15:08:22.950

如果你给某人一条鱼，他们就有一条鱼；如果你教他们如何捕鱼，你不需要给他们鱼。张贴的所有答案都是*正确*的，但没有一个告诉您*如何自己找出答案*。

C# 中的集合初始化器语法是“语法糖”；这只是编写一些无聊代码的一种更愉快的方式。当你写：

```
C c = new C() { p, q, { r, s }, {t, u, v} }; 
```

这就像你写的一样：

```
C c;
C temporary = new C();
temporary.Add(p);
temporary.Add(q);
temporary.Add(r, s);
temporary.Add(t, u, v);
c = temporary; 
```

现在应该清楚如何确定在初始化子句中放入什么： **查看类型并查看各种 Add 方法将什么作为参数**。在您的情况下，字典的 Add 方法需要一个键和一个值，因此初始化程序应该是`{ { k1, v1 }, { k2, v2 } , ... }`

有道理？

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-24T13:14:42.540

这是有效的：

```
Dictionary<byte, byte> dict = new Dictionary<byte, byte>() { { 1, 1 }, { 2, 2 } }; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-24T13:15:16.380

```
Dictionary<string, string> d = new Dictionary<string, string>{{"s", "s"}}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T13:15:42.390

```
var dict = new Dictionary<int, int>()
    {
        { 1, 1 },
        { 2, 1 },
        { 3, 2 }
    }; 
```

这将设置一个包含三个键值对的字典。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-24T13:15:51.217

```
Dictionary<byte, byte> d = new Dictionary<byte, byte>()
                       { 
                          { 1, 2 }, 
                          { 3, 4 } 
                       }; 
```

# css - 媒体查询和动画文本大小

> ID：16192967
> 
> 赞同：0
> 
> 时间：2013-04-24T13:12:49.830
> 
> 标签：css, media-queries, font-size

我正在使用媒体查询来更改导航的字体大小：

```
/* Large desktop */
@media (min-width: 1200px)
{  

#nav-options{
    margin: 45px 0 0 20px;
    li{
        margin: 0 15px 0 15px;
        font-size: 20px;
    }
}
}

/* Desktop */
@media (min-width: 980px) and (max-width: 1199px)
{  
#nav-options{
    margin: 45px 0 0 0px;
    li{
        margin: 0 0px 0 0px;
            font-size: 10px;
    }
}
} 
```

问题是，当我更改窗口的大小时，文本会动画到不同的大小。有没有办法关掉它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:16:25.000

您必须尝试使用`max-device-width`​​ and `min-device-width`。它仅适用于屏幕分辨率而不适用于窗口大小

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T13:15:11.260

不要更改字体大小。现在您为不同的分辨率使用不同的尺寸。

# c++ - 初始化一个 std::vector > 使用 boost::assign::list_of

> ID：16192973
> 
> 赞同：0
> 
> 时间：2013-04-24T13:13:08.803
> 
> 标签：c++, boost, c++98

如何使用 boost::assign::list_of 将值放入类型的对象中`std::vector<std::vector<int> >`？或者您对我如何填充它以进行单元测试有任何其他建议吗？

**更新**

我收到以下 gcc 4.4.2 的编译器错误

```
gcc/4.4.2/lib/gcc/x86_64-unknown-linux-gnu/4.4.2/../../../../include/c++/4.4.2/bits/stl_uninitialized.h: In static member function 'static _ForwardIterator std::__uninitialized_copy<<anonymous> >::uninitialized_copy(_InputIterator, _InputIterator, _ForwardIterator) [with _InputIterator = std::_Deque_iterator<boost::assign_detail::generic_list<int>, boost::assign_detail::generic_list<int>&, boost::assign_detail::generic_list<int>*>, _ForwardIterator = std::vector<int, std::allocator<int> >*, bool <anonymous> = false]':
gcc/4.4.2/lib/gcc/x86_64-unknown-linux-gnu/4.4.2/../../../../include/c++/4.4.2/bits/stl_uninitialized.h:117:   instantiated from '_ForwardIterator std::uninitialized_copy(_InputIterator, _InputIterator, _ForwardIterator) [with _InputIterator = std::_Deque_iterator<boost::assign_detail::generic_list<int>, boost::assign_detail::generic_list<int>&, boost::assign_detail::generic_list<int>*>, _ForwardIterator = std::vector<int, std::allocator<int> >*]'
gcc/4.4.2/lib/gcc/x86_64-unknown-linux-gnu/4.4.2/../../../../include/c++/4.4.2/bits/stl_uninitialized.h:257:   instantiated from '_ForwardIterator std::__uninitialized_copy_a(_InputIterator, _InputIterator, _ForwardIterator, std::allocator<_Tp>&) [with _InputIterator = std::_Deque_iterator<boost::assign_detail::generic_list<int>, boost::assign_detail::generic_list<int>&, boost::assign_detail::generic_list<int>*>, _ForwardIterator = std::vector<int, std::allocator<int> >*, _Tp = std::vector<int, std::allocator<int> >]'
gcc/4.4.2/lib/gcc/x86_64-unknown-linux-gnu/4.4.2/../../../../include/c++/4.4.2/bits/stl_vector.h:1024:   instantiated from 'void std::vector<_Tp, _Alloc>::_M_range_initialize(_ForwardIterator, _ForwardIterator, std::forward_iterator_tag) [with _ForwardIterator = std::_Deque_iterator<boost::assign_detail::generic_list<int>, boost::assign_detail::generic_list<int>&, boost::assign_detail::generic_list<int>*>, _Tp = std::vector<int, std::allocator<int> >, _Alloc = std::allocator<std::vector<int, std::allocator<int> > >]'
gcc/4.4.2/lib/gcc/x86_64-unknown-linux-gnu/4.4.2/../../../../include/c++/4.4.2/bits/stl_vector.h:1002:   instantiated from 'void std::vector<_Tp, _Alloc>::_M_initialize_dispatch(_InputIterator, _InputIterator, std::__false_type) [with _InputIterator = std::_Deque_iterator<boost::assign_detail::generic_list<int>, boost::assign_detail::generic_list<int>&, boost::assign_detail::generic_list<int>*>, _Tp = std::vector<int, std::allocator<int> >, _Alloc = std::allocator<std::vector<int, std::allocator<int> > >]'
gcc/4.4.2/lib/gcc/x86_64-unknown-linux-gnu/4.4.2/../../../../include/c++/4.4.2/bits/stl_vector.h:303:   instantiated from 'std::vector<_Tp, _Alloc>::vector(_InputIterator, _InputIterator, const _Alloc&) [with _InputIterator = std::_Deque_iterator<boost::assign_detail::generic_list<int>, boost::assign_detail::generic_list<int>&, boost::assign_detail::generic_list<int>*>, _Tp = std::vector<int, std::allocator<int> >, _Alloc = std::allocator<std::vector<int, std::allocator<int> > >]'
/boost/boost_1_51_0/boost/assign/list_of.hpp:163:   instantiated from 'Container boost::assign_detail::converter<DerivedTAssign, Iterator>::convert(const Container*, boost::assign_detail::default_type_tag) const [with Container = std::vector<std::vector<int, std::allocator<int> >, std::allocator<std::vector<int, std::allocator<int> > > >, DerivedTAssign = boost::assign_detail::generic_list<boost::assign_detail::generic_list<int> >, Iterator = std::_Deque_iterator<boost::assign_detail::generic_list<int>, boost::assign_detail::generic_list<int>&, boost::assign_detail::generic_list<int>*>]'
/boost/boost_1_51_0/boost/assign/list_of.hpp:142:   instantiated from 'Container boost::assign_detail::converter<DerivedTAssign, Iterator>::convert_to_container() const [with Container = std::vector<std::vector<int, std::allocator<int> >, std::allocator<std::vector<int, std::allocator<int> > > >, DerivedTAssign = boost::assign_detail::generic_list<boost::assign_detail::generic_list<int> >, Iterator = std::_Deque_iterator<boost::assign_detail::generic_list<int>, boost::assign_detail::generic_list<int>&, boost::assign_detail::generic_list<int>*>]'
/boost/boost_1_51_0/boost/assign/list_of.hpp:436:   instantiated from 'boost::assign_detail::generic_list<T>::operator Container() const [with Container = std::vector<std::vector<int, std::allocator<int> >, std::allocator<std::vector<int, std::allocator<int> > > >, T = boost::assign_detail::generic_list<int>]'
main.cc:1:   instantiated from here
gcc/4.4.2/lib/gcc/x86_64-unknown-linux-gnu/4.4.2/../../../../include/c++/4.4.2/bits/stl_uninitialized.h:74: error: call of overloaded 'vector(boost::assign_detail::generic_list<int>&)' is ambiguous
gcc/4.4.2/lib/gcc/x86_64-unknown-linux-gnu/4.4.2/../../../../include/c++/4.4.2/bits/stl_vector.h:241: note: candidates are: std::vector<_Tp, _Alloc>::vector(const std::vector<_Tp, _Alloc>&) [with _Tp = int, _Alloc = std::allocator<int>]
gcc/4.4.2/lib/gcc/x86_64-unknown-linux-gnu/4.4.2/../../../../include/c++/4.4.2/bits/stl_vector.h:227: note:                 std::vector<_Tp, _Alloc>::vector(size_t, const _Tp&, const _Alloc&) [with _Tp = int, _Alloc = std::allocator<int>]
gcc/4.4.2/lib/gcc/x86_64-unknown-linux-gnu/4.4.2/../../../../include/c++/4.4.2/bits/stl_vector.h:215: note:                 std::vector<_Tp, _Alloc>::vector(const _Alloc&) [with _Tp = int, _Alloc = std::allocator<int>] 
```

这是我的代码：

```
std::vector< std::vector<int> > v = boost::assign::list_of
                                    ( boost::assign::list_of(1)(2) )
                                    ( boost::assign::list_of(3) )
                                    ( boost::assign::list_of(5)(6)(7)(8) ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T13:25:23.540

```
#include <boost/range/algorithm.hpp>
#include <boost/foreach.hpp>
#include <boost/assign.hpp>
#include <iterator>
#include <iostream>
#include <ostream>
#include <vector>
int main()
{
    using namespace boost;
    using namespace assign;
    using namespace std;

    vector< vector<int> > v = list_of
        ( list_of(1)(2) )
        ( list_of(3) )
        ( list_of(5)(6)(7)(8) );

    BOOST_FOREACH(const vector<int> &x, v)
    {
        copy(x,ostream_iterator<int>(cout," "));
        cout << endl;
    }
} 
```

输出是：

```
1 2
3
5 6 7 8 
```

* * *

> 我收到以下 gcc 4.4.2 的编译器错误

以下代码适用于 GCC 4.4.6：

```
vector< vector<int> > v;
v += list_of(1)(2),
     list_of(3),
     list_of(5)(6)(7)(8); 
```

# angularjs - AngularJS指令中的locals代表什么

> ID：16192974
> 
> 赞同：4
> 
> 时间：2013-04-24T13:13:10.643
> 
> 标签：angularjs, angularjs-directive

AFAIK 这没有记录，但我在角度源中发现`locals`指令示例中的属性：

```
angular.module('transclude', [])
          .directive('pane', function(){
             return {
               restrict: 'E',
               transclude: true,
               scope: 'isolate',
               locals: { title:'bind' },
               template: '<div style="border: 1px solid black;">' +
                           '<div style="background-color: gray">{{title}}</div>' +
                           '<div ng-transclude></div>' +
                         '</div>'
             };
         }); 
```

它有什么作用？我该如何使用它？

## 编辑

更准确地说：

**如何`locals`从`directive`的控制器或`link`ing 功能访问？**

**如何`locals`从`directive`的控制器或`link`ing 功能动态更改？**

**我可以`locals`在每个指令中使用，还是必须是带有`transclude=true`?**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:00:53.053

示例代码位于选项卡内的[ngTransclude](http://docs.angularjs.org/api/ng.directive%3angTransclude)页面上`script.js`。

我相信这只是较旧的语法（似乎仍然有效）。较新的语法将取代

```
scope: 'isolate',
locals: { title:'bind' }, 
```

和

```
scope: { title: '@' }, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-10T19:56:53.527

我只想结束这个问题。所以答案就像@ArunPJohny 说的

**@param {Object=} `locals`（可选对象）。**

**如果预设，则首先从该对象读取任何参数名称，然后再`$injector`咨询**

# visual-studio-2012 - 如何在 Visual Studio 2012 中获得混合托管和本机 C++ 代码的代码覆盖率

> ID：16192975
> 
> 赞同：1
> 
> 时间：2013-04-24T13:13:13.707
> 
> 标签：visual-studio-2012, code-coverage

我们正在尝试在 Visual Studio 2012 中为包含 C#、托管和本机 C++ 的测试运行获取代码覆盖率结果。我们的测试是在 NUnit 中定义的，我们使用 NUnit 适配器能够在 VS2012 中运行具有覆盖率的 NUnit 测试。除本机 C++ 外，一切都在运行并生成覆盖。根据我发现的信息，只要 pdb 文件可用（并且它们是可用的），就应该为托管代码和本机代码生成覆盖范围。我们在调试模式下运行，没有启用优化。关于如何获取本机 C++ 的覆盖结果的任何想法？

谢谢您的帮助。

# rest - 通过 jax-rs 返回 XML 对象

> ID：16192978
> 
> 赞同：2
> 
> 时间：2013-04-24T13:13:18.890
> 
> 标签：rest, jaxb, jax-rs

我有一个看起来像这样的 JAX-RS Web 服务：

```
@Path("/status")
@Produces("application/xml")
@GET
public PrecisionStatus getPrecisionValue(){
    PrecisionStatus status = ...

    return status;
} 
```

最初，结果是：

```
<PrecisionStatus sensorID="TemperatureSensor5"><condition>OK</condition><fieldValue>60.0</fieldValue></PrecisionStatus> 
```

看起来不错，但我想声明描述此文档的 xsd 文件。通过使用 JAXB 编组功能，我能够（在记录器/控制台中）生成所需的输出：

```
<PrecisionStatus sensorID="TemperatureSensor5" xsi:noNamespaceSchemaLocation="http://mysite.com/myapp/xsd0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <condition>OK</condition>
    <fieldValue>60.0</fieldValue>
</PrecisionStatus> 
```

（这可以通过解组对象来确认）。

但是，如果我返回这个对象`return status;`，浏览器会收到以前的 xml 文档，即没有引用 xsd 的那个。

我很确定该对象具有正确的形式，但是在最终结果中对 xsd 的引用在某种程度上被剥离了。有什么线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T14:07:27.553

您可以创建一个 JAX-RS`MessageBodyWriter`来访问 以`Marshaller`设置`JAXB_NO_NAMESPACE_SCHEMA_LOCATION`属性。有关完整示例，请参见：

*   [CXF 中的格式化 XML 输出？](https://stackoverflow.com/questions/10153306/formatted-xml-output-in-cxf/10157377#10157377)

# python - 在 App Engine 开发服务器上使用 SQLAlchemy

> ID：16192979
> 
> 赞同：1
> 
> 时间：2013-04-24T13:13:21.223
> 
> 标签：python, google-app-engine, sqlalchemy, google-cloud-sql

我看到[了一些](https://stackoverflow.com/questions/10763171/can-sqlalchemy-be-used-with-google-cloud-sql) [关于](https://stackoverflow.com/questions/14224679/unable-to-connect-to-google-cloud-sql-from-development-server-using-sqlalchemy/14287158)在 App Engine 上使用 SQLAlchemy 连接到 Google Cloud SQL 的问题。但我不确定是否可以使用本地 MySQL 数据库和现有的 SQLAlchemy 方言进行开发。在我第一次尝试时，我将 SQLAlchemy **0.8.0**添加到应用程序并定义了一个模式：

```
from sqlalchemy import create_engine, Column, Integer, Table
from sqlalchemy.ext.declarative import declarative_base

Base = declarative_base()    

foo_table = Table('foo', Base.metadata,
  Column('id', Integer, primary_key=True, autoincrement=True),
) 
```

当我尝试使用以下方法在开发服务器上创建表时：

```
url = 'mysql+gaerdbms:///%s?instance=%s' % ('database_name', 'instance_name')
engine = create_engine(url)
Base.metadata.create_all(engine) 
```

...我得到一个错误`DBAPIError: (ImportError) No module named pwd None None`，这意味着 SQLAlchemy 正在导入一个被开发服务器列入黑名单的模块。

难道我做错了什么？或者，如果没有，我应该怎么做才能在开发服务器上使用 SQLAlchemy？或者第一个问题可能是：**我可以使用 SQLAlchemy 的`gaerdbms`方言在本地 MySql 数据库中使用开发服务器进行开发吗？**

**编辑：**仅在尝试创建表时才会发生此错误。我手动创建了表并尝试查询它们，并且发生了同样的错误。

完整的追溯是：

```
Traceback (most recent call last):
  File "[...]/google_appengine/lib/webapp2-2.5.2/webapp2.py", line 1535, in __call__
    rv = self.handle_exception(request, response, e)
  File "[...]/google_appengine/lib/webapp2-2.5.2/webapp2.py", line 1529, in __call__
    rv = self.router.dispatch(request, response)
  File "[...]/google_appengine/lib/webapp2-2.5.2/webapp2.py", line 1278, in default_dispatcher
    return route.handler_adapter(request, response)
  File "[...]/google_appengine/lib/webapp2-2.5.2/webapp2.py", line 1102, in __call__
    return handler.dispatch()
  File "[...]/google_appengine/lib/webapp2-2.5.2/webapp2.py", line 572, in dispatch
    return self.handle_exception(e, self.app.debug)
  File "[...]/google_appengine/lib/webapp2-2.5.2/webapp2.py", line 570, in dispatch
    return method(*args, **kwargs)
  File "[...]/webapp/admin.py", line 12, in get
    db.Base.metadata.create_all(engine)
  File "[...]/webapp/sqlalchemy/schema.py", line 2784, in create_all
    tables=tables)
  File "[...]/webapp/sqlalchemy/engine/base.py", line 1486, in _run_visitor
    with self._optional_conn_ctx_manager(connection) as conn:
  File "/usr/lib/python2.7/contextlib.py", line 17, in __enter__
    return self.gen.next()
  File "[...]/webapp/sqlalchemy/engine/base.py", line 1479, in _optional_conn_ctx_manager
    with self.contextual_connect() as conn:
  File "[...]/webapp/sqlalchemy/engine/base.py", line 1669, in contextual_connect
    self.pool.connect(),
  File "[...]/webapp/sqlalchemy/pool.py", line 272, in connect
    return _ConnectionFairy(self).checkout()
  File "[...]/webapp/sqlalchemy/pool.py", line 425, in __init__
    rec = self._connection_record = pool._do_get()
  File "[...]/webapp/sqlalchemy/pool.py", line 855, in _do_get
    return self._create_connection()
  File "[...]/webapp/sqlalchemy/pool.py", line 225, in _create_connection
    return _ConnectionRecord(self)
  File "[...]/webapp/sqlalchemy/pool.py", line 318, in __init__
    self.connection = self.__connect()
  File "[...]/webapp/sqlalchemy/pool.py", line 368, in __connect
    connection = self.__pool._creator()
  File "[...]/webapp/sqlalchemy/engine/strategies.py", line 80, in connect
    return dialect.connect(*cargs, **cparams)
  File "[...]/webapp/sqlalchemy/engine/default.py", line 279, in connect
    return self.dbapi.connect(*cargs, **cparams)
  File "[...]/google_appengine/google/storage/speckle/python/api/rdbms_googleapi.py", line 183, in __init__
    super(GoogleApiConnection, self).__init__(*args, **kwargs)
  File "[...]/google_appengine/google/storage/speckle/python/api/rdbms.py", line 810, in __init__
    self.OpenConnection()
  File "[...]/google_appengine/google/storage/speckle/python/api/rdbms.py", line 832, in OpenConnection
    self.SetupClient()
  File "[...]/google_appengine/google/storage/speckle/python/api/rdbms_googleapi.py", line 193, in SetupClient
    self._client = RdbmsGoogleApiClient(**kwargs)
  File "[...]/google_appengine/google/storage/speckle/python/api/rdbms_googleapi.py", line 106, in __init__
    rdbms.OAUTH_CREDENTIALS_PATH)
  File "/usr/lib/python2.7/posixpath.py", line 259, in expanduser
    import pwd
  File "[...]/google_appengine/google/appengine/tools/devappserver2/python/sandbox.py", line 822, in load_module
    raise ImportError('No module named %s' % fullname)
DBAPIError: (ImportError) No module named pwd None None 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:24:46.047

我找到了解决方法。事实上，SQLAlchemy 的`gaerdbms`方言无法连接到本地数据库。但是用下面的方言就可以了。[按照此答案](https://stackoverflow.com/a/14287158/125967)中的说明进行操作，但请改用此方言：

```
# mysql/gaerdbms.py
# Copyright (C) 2005-2013 the SQLAlchemy authors and contributors <see AUTHORS file>
#
# This module is part of SQLAlchemy and is released under
# the MIT License: http://www.opensource.org/licenses/mit-license.php
"""
.. dialect:: mysql+gaerdbms
    :name: Google Cloud SQL
    :dbapi: rdbms
    :connectstring: mysql+gaerdbms:///<dbname>?instance=<instancename>
    :url: https://developers.google.com/appengine/docs/python/cloud-sql/developers-guide

    This dialect is based primarily on the :mod:`.mysql.mysqldb` dialect with minimal
    changes.

    .. versionadded:: 0.7.8

Pooling
-------

Google App Engine connections appear to be randomly recycled,
so the dialect does not pool connections.  The :class:`.NullPool`
implementation is installed within the :class:`.Engine` by
default.

"""

import os
import re

from sqlalchemy.dialects.mysql.mysqldb import MySQLDialect_mysqldb
from sqlalchemy.pool import NullPool

class MySQLDialect_gaerdbms(MySQLDialect_mysqldb):

    @classmethod
    def dbapi(cls):
        # from django:
        # http://code.google.com/p/googleappengine/source/
        #     browse/trunk/python/google/storage/speckle/
        #     python/django/backend/base.py#118
        # see also [ticket:2649]
        # see also https://stackoverflow.com/q/14224679/34549
        if is_production():
            # Production mode.
            from google.storage.speckle.python.api import rdbms_apiproxy
            return rdbms_apiproxy
        elif is_remote_mode():
            # Development mode with remote database.
            from google.storage.speckle.python.api import rdbms_googleapi
            return rdbms_googleapi
        else:
            # Development mode with local database.
            from google.appengine.api import rdbms_mysqldb
            return rdbms_mysqldb

    @classmethod
    def get_pool_class(cls, url):
        # Cloud SQL connections die at any moment
        return NullPool

    def create_connect_args(self, url):
        opts = url.translate_connect_args()
        if is_production() or is_remote_mode():
            # 'dsn' and 'instance' are because we are skipping
            # the traditional google.api.rdbms wrapper.
            # they are not needed in local mode; 'dns' even causes an error.
            opts['dsn'] = ''
            opts['instance'] = url.query['instance']
        return [], opts

    def _extract_error_code(self, exception):
        match = re.compile(r"^(\d+):|^\((\d+),").match(str(exception))
        # The rdbms api will wrap then re-raise some types of errors
        # making this regex return no matches.
        code = match.group(1) or match.group(2) if match else None
        if code:
            return int(code)

dialect = MySQLDialect_gaerdbms

def is_production():
  return os.getenv('SERVER_SOFTWARE', '').startswith('Google App Engine')

def is_remote_mode():
  return os.getenv('SETTINGS_MODE') == 'prod' 
```

此方言在开发服务器上运行时默认使用本地数据库。要在开发期间使用对 Google Cloud SQL 的远程访问，必须在环境中设置一个变量，遵循[Django 使用的模式](https://developers.google.com/appengine/docs/python/cloud-sql/django#development-settings)：

```
os.environ['SETTINGS_MODE'] = 'prod' 
```

# php - 想要重复运行一段 php 代码但又不失范围

> ID：16192980
> 
> 赞同：1
> 
> 时间：2013-04-24T13:13:27.707
> 
> 标签：php, jquery, ajax, sockets

所以我已经能够使用 AJAX 反复刷新我网站上的 div，使用以下代码：

```
var $container = $("#content");
    var refreshId = setInterval(function()
    {
        $container.load('toad.php').fadeOut("slow").load('response.php').fadeIn("slow"); ;
    }, 2000); 
```

这工作正常，toad.php 每 2 秒执行一次并且内容更新。

toad.php 目前包含以下代码：

```
<?php 
if ( !($sock = socket_create(AF_INET, SOCK_STREAM, 0)) ) {
        $errorcode = socket_last_error();
        $errormsg = socket_strerror($errorcode);

        die("Couldn't create socket: [$errorcode] $errormsg \n");
    }

    echo "Socket created \n";

    if (!socket_connect($sock, '127.0.0.1', 45000)) {
        //$errorcode = socket_last_error();
        //$errormsg = socket_strerror($errorcode);
        echo "No sensor available to connect to.\n";
        //die("Could not connect: [$errorcode] $errormsg \n");
    }

    echo "Connection established \n";

    //Now receive reply from server
    if (false !== ($bytes = socket_recv($sock, $buf, 1200, MSG_WAITALL))) {
        echo "Read $bytes bytes from socket_recv(). Closing socket...";
    }           
    else {
         echo "socket_recv() failed; reason: " . socket_strerror(socket_last_error($sock)) . "\n";
    }

    socket_close($sock);

    echo $buf . "\n";
    echo "OK.\n"; 
?> 
```

这样做的问题是，每次刷新 div 时都会创建并连接到套接字。

如果我在 toad.php 中没有 socket_create 和 socket_connect 函数，那么 socket_recv 函数不知道套接字并且不起作用。

我的问题是如何让套接字接收代码循环并更新 div 的内容，而不必每次都重新创建和连接到套接字？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T10:02:59.603

If you can rewrite the server your connecting to to use websocket, you could just connect directly from the browser using socket.io.

[http://socket.io/](http://socket.io/)

As others have said, maintaining a persistent PHP connection can be tricky, but if running a NodeJS (or similar) script to handle client connections isn't possible you could serve the websockets from that same PHP script.

Try this approach:

[http://devzone.zend.com/209/writing-socket-servers-in-php/](http://devzone.zend.com/209/writing-socket-servers-in-php/)

Your toad.php script would run on the command line, listening to your existing socket server, then serving the data to it's own socket server which the browser connects to directly with websocket.

# python - 使用正则表达式对文件中的行进行分组

> ID：16192981
> 
> 赞同：0
> 
> 时间：2013-04-24T13:13:28.177
> 
> 标签：python, regex

在 Python 中，我想搜索一个文件并输出所有包含特定模式的行。

我用过：

```
re.findall('5555',f.read()) 
```

到目前为止，但这只是给了我所有匹配项的列表，这显然不是我需要的。我需要使用什么才能获得包含该模式的所有行的输出？IE：

```
blah.blah.5555.com
blah 5555 blah blah
5555 3452 1244 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T13:14:39.377

简单地：

```
re.findall('.*5555.*',f.read()) 
```

应该做。或使用[惰性运算符](http://www.regular-expressions.info/repeat.html)：

```
re.findall('.*?5555.*',f.read()) 
```

（或者也许更快：

```
re.findall('(?:[^5]|5(?!555))*5555.*', f.read()) 
```

[使用所有格量词](http://www.regular-expressions.info/possessive.html)可能更快：

```
re.findall('(?:[^5]|5(?!555))*+5555.*', f.read()) 
```

)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T13:21:11.360

我认为这会奏效

```
lines = []
for line in f.readlines():
    match = re.findall('5555', line)
    if match:
        lines.append(line)

print "".join(lines) 
```

也只有功能运算符

```
print "".join(filter(lambda x: re.findall('5555',x), f.readlines())) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T14:10:20.850

如果您正在搜索固定字符串（您的示例似乎表明您是），您甚至可能不需要正则表达式：

```
>>> with open('file.txt') as f:
...     x = [line for line in f if '5555' in line]
...
>>> print x
['blah.blah.5555.com\n', 'blah 5555 blah blah\n', '5555 3452 1244\n'] 
```

# django - Django Tastypie 自定义模型方法

> ID：16192984
> 
> 赞同：1
> 
> 时间：2013-04-24T13:13:32.893
> 
> 标签：django, django-models, tastypie

我刚开始在带有两个模型的 Rest 应用程序中使用 Django 和 Tastypie。

为简洁起见，参数被截断。

```
class Player(models.Model):

    pseudo = models.CharField(max_length=32, unique=True)

class Score(models.Model):

    level = models.IntegerField()
    score = models.IntegerField()
    player = models.ForeignKey(Player) 
```

一个玩家可以有多个分数。我可以像这样获得所有分数：*/api/v1/score/* 但是如何检索与特定玩家关联的分数？

我该如何实施？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T13:40:34.983

您可以使用[过滤](http://django-tastypie.readthedocs.org/en/latest/resources.html#basic-filtering)，`/api/v1/score/`因此您可以使用`/api/v1/player/?player=1`例如

```
class ScoreResource(ModelResource):
    class Meta:
        ...
        filtering = {'player':ALL_WITH_RELATIONS} 
```

或者您可以使用[ToManyField](http://django-tastypie.readthedocs.org/en/latest/resources.html#reverse-relationships)作为玩家资源的一部分来访问分数，例如：

```
class ScoreResource(ModelResource):
    ...

class PlayerResource(ModelResource):
    score = fields.ToManyField(ScoreResource, 'scores', full=True) 
```

然后您将能够访问`/api/v1/player/1/`并将包括`ScoresResource`

# java - METAR 报告 - 解析为 Java

> ID：16192991
> 
> 赞同：1
> 
> 时间：2013-04-24T13:14:03.293
> 
> 标签：java, android, parsing, text

如何在 Java 编程中解析 Metar 信息？我在网上搜索了很多复杂的东西，我想要更简单的东西。我不知道如何使用正则表达式或类似的东西......

Metar 信息示例：[http ://weather.noaa.gov/pub/data/observations/metar/stations/ABBN.TXT](http://weather.noaa.gov/pub/data/observations/metar/stations/ABBN.TXT)

> 2011/03/16 05:30 ABBN 160530Z 23004KT 9999 NSC 02/M05 Q1029 R14R/CLRD60 NOSIG RMK G/O QFE696

请注意，Metar 报告可能有变化： [http ://en.wikipedia.org/wiki/METAR](http://en.wikipedia.org/wiki/METAR)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T22:20:55.403

我找到了一个解决方案，有代码（它可能对某人有用）：

```
 for (int i=0; i<httpGet.length(); i++) {  

           char c = httpGet.charAt(i);

           if(c=='M' && Character.isDigit(httpGet.charAt(i+1)) && 
                   Character.isDigit(httpGet.charAt(i+2)) &&
                   httpGet.charAt(i+3)== '/' &&
                   Character.isDigit(httpGet.charAt(i+4))&&
                   Character.isDigit(httpGet.charAt(i+5))&&
                   httpGet.charAt(i+6)==' ' &&
                   Character.isLetter(httpGet.charAt(i+7))){

               temp="-"+httpGet.substring(i+1,i+3);
               dewP=httpGet.substring(i+4,i+6);
               break;
           }

           else if(c=='M' && Character.isDigit(httpGet.charAt(i+1)) && 
                   Character.isDigit(httpGet.charAt(i+2)) &&
                   httpGet.charAt(i+3)== '/' &&
                   httpGet.charAt(i+4)== 'M' &&
                   Character.isDigit(httpGet.charAt(i+5))&&
                   Character.isDigit(httpGet.charAt(i+6))&&
                   httpGet.charAt(i+7)==' ' &&
                   Character.isLetter(httpGet.charAt(i+8))){

               temp="-"+httpGet.substring(i+1,i+3);
               dewP="-"+httpGet.substring(i+5,i+7);
               break;
           }

           else if(Character.isDigit(httpGet.charAt(i)) && 
                   Character.isDigit(httpGet.charAt(i+1)) &&
                   httpGet.charAt(i+2)== '/' &&
                   httpGet.charAt(i+3)== 'M' &&
                   Character.isDigit(httpGet.charAt(i+4))&&
                   Character.isDigit(httpGet.charAt(i+5))&&
                   httpGet.charAt(i+6)==' ' &&
                   Character.isLetter(httpGet.charAt(i+7))){

               temp=httpGet.substring(i,i+2);
               dewP="-"+httpGet.substring(i+4,i+6);
               break;
           }
           else if(Character.isDigit(c) && Character.isDigit(httpGet.charAt(i+1))
                   && httpGet.charAt(i+2)=='/' &&
                   Character.isDigit(httpGet.charAt(i+3)) &&  
                   Character.isDigit(httpGet.charAt(i+4)) &&
                   httpGet.charAt(i+5)==' ' &&
                   Character.isLetter(httpGet.charAt(i+6))){

                temp=httpGet.substring(i,i+2);
                dewP=httpGet.substring(i+3,i+5);
                break;
           }
    } 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-24T13:28:36.353

这看起来很有希望，我用谷歌搜索了 java METAR 解析 :-) [http://jfall-javafx.googlecode.com/svn-history/r6/WeatherFX/src/com/feldt/metar/Metar.java](http://jfall-javafx.googlecode.com/svn-history/r6/WeatherFX/src/com/feldt/metar/Metar.java)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-24T13:23:55.850

几乎可以肯定，Regex 是您想要的，是的，虽然令人生畏，但您会一遍又一遍地使用它。RMK 部分将是最难的，它是最自由的形式。唯一的选择是使用大量的 if 或 case 语句逐个字符地遍历。

# wordpress - W3 Total Cache - 指定每个缓存页面的过期时间

> ID：16192993
> 
> 赞同：0
> 
> 时间：2013-04-24T13:14:04.907
> 
> 标签：wordpress, w3-total-cache

我的网站有多个页面。其中很少是静态的，很少是动态的。

有没有办法指定缓存页面的到期时间？我希望静态页面每天只重新缓存一次，而动态页面则更频繁。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-04T22:10:17.953

URI 仅在更新时才被修改，因此为不同页面设置不同的过期时间没有任何好处。

# jquery - HTMLElement 类型的值不可调用

> ID：16192995
> 
> 赞同：3
> 
> 时间：2013-04-24T13:14:05.133
> 
> 标签：jquery, typescript

我在将我的 JavaScript 行之一转换为 TypeScript 时遇到了一点问题。

此行用于`widgetName`在具有 id 的容器上创建类型的小部件`containerId`。`widgetName`是一个字符串：

```
$('#' + containerId)[widgetName](options) 
```

示例：在具有 id*示例的 div 上创建不带选项的手风琴小部件*

```
$('#example')["accordion"]();
// which could be rewritten as:
$('#example').accordion(); 
```

尽管 JavaScript 有效，但 TypeScript 在第一行抛出错误：

> HTMLElement 类型的值不可调用

谁能帮我写这个声明？我不能`HTMLElement`转换为 ie `JQueryStatic`。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T13:59:30.323

您是否使用绝对键入的最新版本的 jquery 定义文件（[https://github.com/borisyankov/DefinitelyTyped/blob/master/jquery/jquery.d.ts](https://github.com/borisyankov/DefinitelyTyped/blob/master/jquery/jquery.d.ts)）？

看起来这在您的情况下应该可以正常工作（第 726/727 行）-

```
[x: string]: any;
[x: number]: HTMLElement; 
```

旧版本的 d.ts 定义不正确：

```
[x: string]: HTMLElement; // *WRONG*
[x: number]: HTMLElement; 
```

（更新：经过测试，我发现我有同样的错误。更新到上面列出的 d.ts 修复它）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T13:36:13.470

最简单的解决方案：

```
(<any>$('#example'))["accordion"](); 
```

# asp.net-mvc-4 - 如何根据用户访问的位置在 MVC 应用程序中查找用户的国家、州（地区/县/省）和城市？

> ID：16192997
> 
> 赞同：3
> 
> 时间：2013-04-24T13:14:11.790
> 
> 标签：asp.net-mvc-4

在我的 MVC 应用程序中，我想显示用户访问网站的国家、地区和城市。我怎样才能拿到它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T13:18:35.397

有几种方法。一种是要求用户与远程服务器共享他的位置。

[https://developer.mozilla.org/en-US/docs/WebAPI/Using_geolocation](https://developer.mozilla.org/en-US/docs/WebAPI/Using_geolocation)

另一个涉及使用远程 IP 地址和一些类似这样的服务“猜测”：

[http://freegeoip.net/](http://freegeoip.net/)