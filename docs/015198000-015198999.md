# StackOverflow 问答 15198000-15198999

# jquery - Grooveshark 公共 API - 未找到方法

> ID：15198004
> 
> 赞同：4
> 
> 时间：2013-03-04T09:12:26.073
> 
> 标签：jquery, ajax, grooveshark

我正在使用 Jquery 将 JSON 数据发送到 Grooveshark API 以获取搜索结果，但这是我得到的结果 -

```
{"errors":[{"code":2,"message":"Method not found."}]} 
```

这是触发grooveshark API的一段代码。我无法弄清楚这个问题，任何帮助都会很棒。

```
$.ajax({
type: "POST",
    url: 'http://api.grooveshark.com/ws3.php?sig=secret_code',
    data: {
        "method":"getSongSearchResults",
        "header":{"wsKey":"secret_key"},"parameters":{"query":"megadeth hangar 18","country":"1","limit":"2","offset":""}
    },
    dataType: 'jsonp',
    crossDomain: true,
    async: false,
    success: function () {
        alert("success!"); 
    }

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T18:09:31.700

所以，我还没有走到那一步，但我想知道你是如何获得请求 URL 末尾的 secret_code 的。

从[https://github.com/fastest963/GroovesharkAPI-PHP/blob/master/gsAPI.php#L1044](https://github.com/fastest963/GroovesharkAPI-PHP/blob/master/gsAPI.php#L1044)翻译，似乎 sig 不是您在申请公共 API 密钥时获得的密码。

相反，它是您在 ajax 调用中发送到数据参数的字典的 HMAC(md5)。我找到了[https://code.google.com/p/crypto-js/#HMAC](https://code.google.com/p/crypto-js/#HMAC)并使用它通过将您作为数据 arg 发送到 $.ajax 的 dict 传递来生成 sig，并且我用我来自 gs api 的秘密签名。

我正在尝试调用开始会话，但最终得到

```
Object { readyState=0, status=0, statusText="error"} 
```

其中信息较少，但我很确定该 URL 上的内容不是您的秘密。

# c - 如何从使用 SSE 按列存储的数据中加载滑动对角向量

> ID：15198011
> 
> 赞同：4
> 
> 时间：2013-03-04T09:12:42.957
> 
> 标签：c, performance, sse, vectorization, simd

滑动对角向量包含 16 个元素，每个元素都是 8 位无符号整数。

如果没有 SSE 并稍加简化，它在 C 语言中会看起来像这样：

```
int width=1000000; // a big number
uint8_t matrix[width][16];
fill_matrix_with_interesting_values(&matrix);

for (int i=0; i < width - 16; ++i) {
  uint8_t diagonal_vector[16];
  for (int j=0; j<16; ++j) {
    diagonal_vector[j] = matrix[i+j][j];
  }
  do_something(&diagonal_vector);
} 
```

但在我的情况下，我只能使用`_mm_load_si128`内在函数从矩阵中按列（垂直）加载。滑动对角向量水平移动，因此我需要提前加载 16 个列向量，并使用每个列向量中的一个元素来创建对角向量。

是否可以使用 SSE 对此进行快速的低内存实现？

**2016 年 11 月 14 日更新：**提供更多详细信息。[就我而言，我从FASTA 格式](https://en.wikipedia.org/wiki/FASTA_format)的文本文件中读取单字母代码。每个字母代表某种氨基酸。每个氨基酸都有一个与之相关的特定列向量。[该列向量是从常量表（ BLOSUM](https://en.wikipedia.org/wiki/BLOSUM)矩阵）中查找的。在 C 代码中，它看起来像这样

```
while (uint8_t c = read_next_letter_from_file()) {
   column_vector = lookup_from_const_table(c)
   uint8_t diagonal_vector[16];
   ... rearrange the values from the latest column
       vectors into the diagonal_vector ...

   do_something(&diagonal_vector)
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T09:12:42.957

我将介绍的实现每次迭代只需加载一列。首先我们初始化一些变量

```
const __m128i mask1=_mm_set_epi8(0,0,0,0,0,0,0,0,255,255,255,255,255,255,255,255);
const __m128i mask2=_mm_set_epi8(0,0,0,0,255,255,255,255,0,0,0,0,255,255,255,255);
const __m128i mask3=_mm_set_epi8(0,0,255,255,0,0,255,255,0,0,255,255,0,0,255,255);
const __m128i mask4=_mm_set_epi8(0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255);
__m128i v0, v1, v2, v3, v4, v5, v6, v7, v8, v9, v10, v11, v12, v13, v14, v15; 
```

然后对于每一步，变量`v_column_load`都与下一列一起加载。

```
v15 = v_column_load;
v7 = _mm_blendv_epi8(v7,v15,mask1);
v3 = _mm_blendv_epi8(v3,v7,mask2);
v1 = _mm_blendv_epi8(v1,v3,mask3);
v0 = _mm_blendv_epi8(v0,v1,mask4);
v_diagonal = v0; 
```

在下一步中`v0`，`v1`, `v3`, `v7`,`v15`中的变量名数字加 1 并调整到 0 到 15 的范围内。换句话说：newnumber = (oldnumber + 1) 模 16。

```
v0 = v_column_load;
v8 = _mm_blendv_epi8(v8,v0,mask1);
v4 = _mm_blendv_epi8(v4,v8,mask2);
v2 = _mm_blendv_epi8(v2,v4,mask3);
v1 = _mm_blendv_epi8(v1,v2,mask4);
v_diagonal = v1; 
```

16 次迭代后，`v_diagonal`将开始包含正确的对角线值。

查看`mask1`, `mask2`, `mask3`, `mask4`，我们看到了一种模式，该模式可用于将该算法推广到其他向量长度 (2^n)。

例如，对于长度为 8 的向量，我们只需要 3 个掩码，迭代步骤如下所示：

```
v7 = a a a a a a a a
v6 =
v5 =
v4 =
v3 =         a a a a
v2 =
v1 =             a a
v0 =               a

v0 = b b b b b b b b
v7 = a a a a a a a a
v6 =
v5 =
v4 =         b b b b
v3 =         a a a a
v2 =             b b
v1 =             a b

v1 = c c c c c c c c
v0 = b b b b b b b b
v7 = a a a a a a a a
v6 =
v5 =         c c c c
v4 =         b b b b
v3 =         a a c c
v2 =           a b c

v2 = d d d d d d d d
v1 = c c c c c c c c
v0 = b b b b b b b b
v7 = a a a a a a a a
v6 =         d d d d
v5 =         c c c c
v4 =         b b d d
v3 =         a a c d

v3 = e e e e e e e e
v2 = d d d d d d d d
v1 = c c c c c c c c
v0 = b b b b b b b b
v7 = a a a a e e e e
v6 =         d d d d
v5 =     a a c c e e
v4 =       a b b d a

v4 = f f f f f f f f
v3 = e e e e e e e e
v2 = d d d d d d d d
v1 = c c c c c c c c
v0 = b b b b f f f f
v7 = a a a a e e e e
v6 =     b b d d f f
v5 =     a b c d e f

v5 = g g g g g g g g
v4 = f f f f f f f f
v3 = e e e e e e e e
v2 = d d d d d d d d
v1 = c c c c g g g g
v0 = b b b b f f f f
v7 = a a c c e e g g
v6 =   a b c d e f g

v6 = h h h h h h h h
v5 = g g g g g g g g
v4 = f f f f f f f f
v3 = e e e e e e e e
v2 = d d d d h h h h
v1 = c c c c g g g g
v0 = b b d d f f h h
v7 = a b c d e f g h  <-- this vector now contains the diagonal

v7 = i i i i i i i i
v6 = h h h h h h h h
v5 = g g g g g g g g
v4 = f f f f f f f f
v3 = e e e e i i i i
v2 = d d d d h h h h
v1 = c c e e g g i i
v0 = b c d e f g h i  <-- this vector now contains the diagonal

v0 = j j j j j j j j
v7 = i i i i i i i i
v6 = h h h h h h h h
v5 = g g g g g g g g
v4 = f f f f j j j j
v3 = e e e e i i i i
v2 = d d f f h h j j
v1 = c d e f g h i j  <-- this vector now contains the diagonal 
```

旁注：我在[实现](https://github.com/eriksjolund/diagonalsw) Smith-Waterman 算法时发现了这种加载对角线向量的方法。可以在旧的 SourceForge 项目[网页上](https://sourceforge.net/#rearranging_the_column_vectors_into_diagonal_vectors_sse_version)找到更多信息。

# java - Jama 如何洗牌？

> ID：15198016
> 
> 赞同：0
> 
> 时间：2013-03-04T09:12:57.043
> 
> 标签：java, matrix, jama

我在 Java 中使用 Jama 进行矩阵操作。但是我看不到足够的文档。

如何在 Jama 洗牌矩阵？

还有类似的东西：

```
Matrix(:,end) 
```

只获得最后一列，就像在 Matlab 中一样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:07:06.730

文档（好吧，至少是类的文档）在[这里](http://math.nist.gov/javanumerics/jama/doc/)： http: [//math.nist.gov/javanumerics/jama/doc/](http://math.nist.gov/javanumerics/jama/doc/)

该类`Matrix`有一个`getMatrix()`提取子矩阵的方法：

```
/** Get a submatrix.
   @param r    Array of row indices.
   @param c    Array of column indices.
   @return     A(r(:),c(:))
   @exception  ArrayIndexOutOfBoundsException Submatrix indices
   */

   public Matrix getMatrix (int[] r, int[] c) {
      Matrix X = new Matrix(r.length,c.length);
      double[][] B = X.getArray();
      try {
         for (int i = 0; i < r.length; i++) {
            for (int j = 0; j < c.length; j++) {
               B[i][j] = A[r[i]][c[j]];
            }
         }
      } catch(ArrayIndexOutOfBoundsException e) {
         throw new ArrayIndexOutOfBoundsException("Submatrix indices");
      }
      return X;
   } 
```

`Jama`并不过分复杂。将`getColumn()`方法添加到`Matrix.java`.

# weblogic - 使用 weblogic 服务器配置调度程序以使用 java 以 excel 格式保存一些报告

> ID：15198019
> 
> 赞同：-2
> 
> 时间：2013-03-04T09:13:05.993
> 
> 标签：weblogic

我想用 weblogic 服务器配置调度程序，以使用 java 以 excel 格式保存一些报告。

任何人都可以帮助我实现这一目标的代码和步骤，因为我是 weblogic 的新手

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T15:55:21.370

Java 调度程序并不是真正特定于 WLS 的。有些框架（例如[Quartz](http://quartz-scheduler.org/)）与应用服务器无关。您可以在此处查看[石英代码示例](http://www.javacodegeeks.com/2012/07/quartz-2-scheduler-example.html)或自行搜索。如果您愿意，也可以使用 EJB3 中的[Timer Service](http://docs.oracle.com/javaee/6/tutorial/doc/bnboy.html)功能。

# r - 借助矩阵对数据进行评分

> ID：15198022
> 
> 赞同：0
> 
> 时间：2013-03-04T09:13:17.040
> 
> 标签：r, matrix

假设我有 4 个矩阵：

```
matrix<-list(

MA0275.1 = structure(c(0, 76, 0, 24, 0, 100, 0, 0, 0, 0, 
                       100, 0, 0, 0, 100, 0, 72, 11, 16, 0, 53, 0, 0, 47), .Dim = c(4L, 
                                                                                    6L), .Dimnames = list(c("A", "C", "G", "T"), NULL), id = "MA0275.1", accession = "ASG1"), 
MA0276.1 = structure(c(0, 220, 8, 35, 0, 291, 0, 3, 61, 21, 
                       133, 10, 58, 54, 101, 12, 130, 0, 54, 0, 0, 11, 8, 147, 33, 
                       150, 8, 35, 80, 0, 92, 26, 0, 8, 249, 19, 0, 0, 256, 18), .Dim = c(4L, 
                                                                                          10L), .Dimnames = list(c("A", "C", "G", "T"), NULL), id = "MA0276.1", accession = "ASH1"), 
MA0277.1 = structure(c(63, 13, 13, 13, 100, 0, 0, 0, 100, 
                       0, 0, 0, 88, 13, 0, 0, 75, 0, 25, 0, 0, 0, 100, 0, 78, 16, 
                       3, 3, 81, 6, 6, 6, 63, 13, 13, 13), .Dim = c(4L, 9L), .Dimnames = list(
                         c("A", "C", "G", "T"), NULL), id = "MA0277.1", accession = "AZF1"), 
MA0278.1 = structure(c(64, 217, 425, 292, 104, 552, 150, 
                       192, 484, 111, 114, 288, 78, 401, 186, 333, 455, 51, 370, 
                       122, 248, 34, 670, 46, 98, 724, 143, 33, 52, 918, 7, 20, 
                       348, 346, 280, 24, 12, 3, 977, 6, 966, 5, 23, 4, 26, 6, 962, 
                       4, 9, 10, 4, 975, 47, 930, 7, 15, 892, 42, 16, 49, 487, 123, 
                       320, 68, 288, 140, 317, 254, 373, 110, 81, 434, 178, 367, 
                       184, 268, 402, 140, 341, 114, 435, 229, 241, 94), .Dim = c(4L, 
                                                                                  21L), .Dimnames = list(c("A", "C", "G", "T"), NULL), id = "MA0278.1", accession = "BAS1")) 
```

这些矩阵用于对序列进行评分（亲和力）。我拥有的功能使我能够给我 1 个亲和力分数，因此只使用第一个矩阵。

但如果分数是在 data.frame() 中为每个矩阵定义的，那就太好了。我试图用一个 for 循环来做到这一点。

```
sequence<-"GCCTTTCCTTCTCTTCTCCGCGTGTGGAGGGAGCCAGCGCTTAGGCCGGAGCGAGCCTGGGGGCCGCCCGCCGTGAAGACATCGCGGGGACCGATTCACC"
for (i in matrix) {
    score<-affinity(i,sequence)
} 
```

这给了我一个 1 矩阵的数值。所以 for 循环不能正常工作。我希望它给我每个矩阵的所有亲和力分数。

亲和力函数：

```
affinity<-function (pwm, seq, Rmax = NULL, lambda = 0.7, pseudo.count = 1, 
    gc.content = 0.5, slide = FALSE) 
{
    if (is.null(seq) || is.na(seq) || mode(seq) != "character") {
        stop("sequence must be a character string of length >= ncol(pwm)")
    }
    gap.pos = sapply(1:nchar(seq), function(i) substr(seq, i, 
        i) == "-")
    seq = gsub("-", "", seq)
    if (nchar(seq) < ncol(pwm)) {
        stop("sequence must be a character string of length >= ncol(pwm)")
    }
    Rmax = ifelse(is.null(Rmax), exp(0.584 * ncol(pwm) - 5.66), 
        Rmax)
    pwm = pwm + pseudo.count
    at.content = 1 - gc.content
    pwm = apply(pwm, 2, function(p) {
        maxAT = max(p[c(1, 4)])
        maxCG = max(p[c(2, 3)])
        if (maxAT > maxCG) {
            transformed = c(log(maxAT/p[1])/lambda, log((maxAT/at.content) * 
                (gc.content/p[2]))/lambda, log((maxAT/at.content) * 
                (gc.content/p[3]))/lambda, log(maxAT/p[4])/lambda)
        }
        else {
            transformed = c(log((maxCG/gc.content) * (at.content/p[1]))/lambda, 
                log(maxCG/p[2])/lambda, log(maxCG/p[3])/lambda, 
                log((maxCG/gc.content) * (at.content/p[4]))/lambda)
        }
        if (maxAT == maxCG) {
            transformed = log(maxAT/p)/lambda
        }
        return(transformed)
    })
    if (slide) {
        z = .C("R_affinity", as.double(pwm), ncol(pwm), as.character(seq), 
            as.integer(nchar(seq)), as.double(Rmax), as.double(lambda), 
            double(length = nchar(seq) - ncol(pwm) + 1), PACKAGE = "tRap")
        res = z[[7]]
        gapped = numeric(length = nchar(seq) - ncol(pwm) + 1)
        gapped[!gap.pos] = res
        res = gapped
    }
    else {
        z = .C("R_affinity_sum", as.double(pwm), ncol(pwm), as.character(seq), 
            as.integer(nchar(seq)), as.double(Rmax), as.double(lambda), 
            double(length = 1), PACKAGE = "tRap")
        res = z[[7]]
    }
    return(res)
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T09:17:28.163

尝试`lapply`

```
lapply(matrix, affinity, sequence) 
```

PS：调用您的数据真的很糟糕`matrix`

# php - 如何处理损坏的分段上传？

> ID：15198028
> 
> 赞同：0
> 
> 时间：2013-03-04T09:13:28.930
> 
> 标签：php, apache, upload, multipart

我有一个 PHP 脚本，它从远程设备接收图像并将它们保存到数据库中。从 Apache 启动的脚本首先接收定义上传内容的标头，然后接收上传图像的内容，所有这些都作为单个多部分传输。成功添加图像后，它会回复设备确认信息。

现在的问题是连接不是很可靠。有时传输超时。这不会是一个问题，因为如果设备没有收到确认，它会在一段时间后重新发送数据。除非传输中途中断，Apache 照常启动脚本，脚本愉快地将不完整的图像集保存到数据库中，并将它们的创建时间戳作为唯一键。然后远程设备重新发送数据，然后脚本正确接收数据，但由于唯一密钥已被损坏的数据占用，因此无法保存。

是否有一些可靠的方法可以从 PHP 脚本中判断它是在不完整的多部分传输时启动的，或者如果传输没有成功结束则阻止 Apache 启动它？

（我们不能真正改变从远程设备接收到的数据库结构或格式。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:13:52.223

检查您设备的应用程序代码是否有发送超时。也许连接太慢了，当达到时间限制时它会刹车。在这种情况下，尽管 Content-Length 标头不匹配，apache 服务器仍会运行带有部分接收数据的 php 脚本。

# iis - IIS 中的 IP 限制

> ID：15198032
> 
> 赞同：1
> 
> 时间：2013-03-04T09:13:42.247
> 
> 标签：iis, iis-7

我想拒绝我的 iis 中的所有 IP 地址，只允许一个 IP。如何在 windows 2008 服务器的 iis 中制作它。？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-04T09:26:14.300

在 IIS 管理器中，单击要使用的服务器。在功能窗格中单击“管理服务”。停止管理服务后，您就可以编辑 IPv4 地址限制。

看看[http://technet.microsoft.com/en-us/library/cc730889.aspx](http://technet.microsoft.com/en-us/library/cc730889.aspx)和[http://support.microsoft.com/kb/324066](http://support.microsoft.com/kb/324066)

# c - va_list 中传递的参数数量

> ID：15198033
> 
> 赞同：3
> 
> 时间：2013-03-04T09:13:44.873
> 
> 标签：c, variadic-functions

全部，

我想`the number of passed parameters`在 va_list 中进行控制。

```
va_list args;
va_start(args, fmts);
        vfprintf(stdout, fmts, args);
va_end(args); 
```

有没有可能在 a 之后获得参数的数量`va_start`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T09:57:03.990

不完全是你想要的，但你可以使用这个宏来计算参数

```
#include <stdio.h>
#include <stdarg.h>

#define NARGS_SEQ(_1,_2,_3,_4,_5,_6,_7,_8,_9,N,...) N
#define NARGS(...) NARGS_SEQ(__VA_ARGS__, 9, 8, 7, 6, 5, 4, 3, 2, 1)

#define fn(...) fn(NARGS(__VA_ARGS__) - 1, __VA_ARGS__)

static void (fn)(int n, const char *fmt, ...)
{
    va_list args;

    va_start(args, fmt);
    printf("%d params received\n", n);
    vprintf(fmt, args);
    va_end(args);
}

int main(void)
{
    fn("%s %d %f\n", "Hello", 7, 5.1);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T09:31:43.687

你不能直接计算它们。

例如`printf`一个变量计数函数，它使用它的第一个参数来计算以下参数：

```
printf("%s %i %d", ...); 
```

函数`printf`首先解析它的第一个参数 ( `"%s %i %d"`)，然后估计还有 3 个参数。

在您的情况下，您必须解析`fmts`ans extract `%`-specifiers 然后估计其他参数。实际上，每个都`%[flags][width][.precision][length]specifier`可以算作一个论点。[阅读更多...](http://www.cplusplus.com/reference/cstdio/printf/)

# python - 如果参数是集合，为什么联合会消耗更多内存？

> ID：15198042
> 
> 赞同：12
> 
> 时间：2013-03-04T09:14:18.277
> 
> 标签：python, memory-management, set

我对`set`s 的这种内存分配行为感到困惑：

```
>>> set(range(1000)).__sizeof__()
32968
>>> set(range(1000)).union(range(1000)).__sizeof__()       # expected, set doesn't change
32968
>>> set(range(1000)).union(list(range(1000))).__sizeof__() #expected, set doesn't change
32968
>>> set(range(1000)).union(set(range(1000))).__sizeof__()  # not expected
65736 
```

为什么使用`set`as 参数会使结果使用的内存量**加倍**`set`？两种情况下的结果都与原始结果相同`set`：

```
>>> set(range(1000)) == set(range(1000)).union(range(1000)) == set(range(1000)).union(set(range(1000)))
True 
```

请注意，使用普通迭代器也会发生同样的情况：

```
>>> set(range(1000)).union(iter(list(range(1000)))).__sizeof__()
32968 
```

并使用以下`update`方法：

```
>>> a.update(range(1000))
>>> a.__sizeof__()
32968
>>> a.update(set(range(1000)))
>>> a.__sizeof__()
65736 
```

起初我以为是因为当`union`被调用时，它看到另一个的大小`set`是`1000`，因此决定分配足够的内存来容纳两个`set`s 的所有元素，但后来它只使用了该内存的一部分，而在迭代器情况下，它只是对其进行迭代并逐个添加元素（这不会消耗更多内存，因为所有元素都已经在`set`.

但是`range`也是一个序列，`list`第一个例子中的也是。

```
>>> len(range(1000))
1000
>>> range(1000)[100]
100 
```

那么为什么这不会发生，`range`而`list`只是发生`set`呢？这背后是否有任何设计决策，或者它是一个错误？

* * *

在 linux 64 位上的 python 2.7.3 和 python 3.2.3 上测试。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-04T09:24:28.090

在 Python 2.7.3 中，[`set.union()`](http://hg.python.org/cpython/file/0e41c4466d58/Objects/setobject.c#l1178)委托给一个名为[`set_update_internal()`](http://hg.python.org/cpython/file/0e41c4466d58/Objects/setobject.c#l931). 后者根据其参数的 Python 类型使用几种不同的实现。这种实现的多样性解释了您进行的测试之间的行为差​​异。

当参数是 a 时使用的实现`set`在代码中记录了以下假设：

```
/* Do one big resize at the start, rather than
 * incrementally resizing as we insert new keys.  Expect
 * that there will be no (or few) overlapping keys.
 */ 
```

显然，在您的特定情况下，没有（或很少）重叠键的假设是不正确的。这就是导致最终`set`内存过度分配的原因。

我不确定我会称之为错误。选择的实现者`set`在我看来是一个合理的权衡，而您只是发现自己处于该权衡的错误一边。

权衡的好处是，在许多情况下，预分配会带来更好的性能：

```
In [20]: rhs = list(range(1000))

In [21]: %timeit set().union(rhs)
10000 loops, best of 3: 30 us per loop

In [22]: rhs = set(range(1000))

In [23]: %timeit set().union(rhs)
100000 loops, best of 3: 14 us per loop 
```

在这里，这个`set`版本快了一倍，大概是因为它不会重复地重新分配内存，因为它从`rhs`.

如果过度分配是一个交易破坏者，有很多方法可以解决它，其中一些你已经发现了。

# actionscript-3 - as3如何共享组件

> ID：15198043
> 
> 赞同：0
> 
> 时间：2013-03-04T09:14:19.867
> 
> 标签：actionscript-3, components, share, swc, rsl

我有一个在多个 swf 中使用的自定义组件（例如 MyButton）。我想在运行时共享组件，因此一旦我们的设计师改变了按钮的视觉效果，我们就不需要发布所有使用这个按钮的 flas。

在 as2 中，我可以将此按钮放在资产 fla（例如 lib.swf）中，并检查符号属性中的“导出运行时共享”。然后将按钮复制到一个fla（例如main.swf）并检查“导入运行时共享”，这工作正常。然而，在 as3 中，在完成上述操作后，如果我将按钮实例放在舞台上并修改其可检查属性，我将收到编译错误“1046:Type was not found or is not a compile-time constant”。

我在网上搜索并找到了这个[http://www.kirupa.com/forum/showthread.php?317257-Runtime-Shared-Library-woes](http://www.kirupa.com/forum/showthread.php?317257-Runtime-Shared-Library-woes)。然后我尝试了swc的方式，但是好像swc会被编译成swf，根本不共享。

1.  共享组件**必须放在舞台上**，因为所有的fla都会被我们的设计师修改，而他对编程一无所知。
2.  我们**不能使用 flex**，所有操作都必须在 Flash CS5 中完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:36:32.690

1：将所有组件放在库中，如下所示：我的 fla`BrushClip.fla`将组件命名为 .fla `MovieClip`。并将 ActionScript Linking 导出到 ActionScript 类。

![在此处输入图像描述](../Images/6f994ce4b1d8ea23b6fb4fc14ba6f311.png)

2：文件-发布设置检查SWC格式并发布如下：

![在此处输入图像描述](../Images/5b661b0b66e9825a6e15c47301adff89.png)

3：检查，在你的项目中创建了swc文件。现在您可以使用 swc 其他项目，您必须在 File-ActionScript Settings-Library Path 中链接到 SWC 库。稍后如果您更改组件设计，请重新发布。并复制并粘贴 swc 文件。自动将更改重新启动 swf 文件。`BrushClip.swc`具有所有组件。

![在此处输入图像描述](../Images/ec3330f7cc9c4cd8ed0fb600f1c1b79a.png)

您可以访问如下：

```
var brushClip0:MovieClip = new BrushClip0();
addChild(brushClip0);

var brushClip10:MovieClip = new BrushClip10();
addChild(brushClip10); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T05:57:21.170

我找到了解决方案。

1.  给包含导入组件的 Sprite 一个绑定类
2.  编辑class文件，不管是否勾选了“auto declare instance on stage”自行声明**组件**

# ajax - Telerik 网格排序：排序后网格的设置会丢失

> ID：15198046
> 
> 赞同：1
> 
> 时间：2013-03-04T09:14:26.240
> 
> 标签：ajax, asp.net-mvc-3, telerik-grid

我有一个带有“cellAction”事件的网格，例如：

```
@(Html.Telerik().Grid(Model)
        .Name("Grid")
        .Columns(columns =>
        {
            //columns
        })
        .cellAction(cell => { 
               cell.HtmlAttributes["onClick"] = "cellSelected(event)";}) 
```

按 DataBinding 排序，如：

```
.DataBinding(dataBinding => dataBinding.Ajax().Select("_Sorting", "Grid")) 
```

和服务器端：

```
[GridAction]
public ActionResult _Sorting()
{
    return View(new GridModel<Order>
    {
        Data = GetOrders()
    });
} 
```

问题是， cellSelected 事件仅在排序之前起作用。
在我排序后没有调用。
似乎网格的设置在排序后丢失了。
为什么 ？

# c# - 防火墙阻止 wshttpbinding 服务的客户端

> ID：15198051
> 
> 赞同：1
> 
> 时间：2013-03-04T09:14:58.660
> 
> 标签：c#, wcf, networking, wcf-security, firewall

我有一台装有**Windows Server 2008**的服务器电脑。我还有一个 wcf 服务，它使用**端口 8525**并使用**Windows 服务**托管它。我在服务器防火墙中打开端口（添加规则）。

我的服务器机器有一个有效的 IP。所以我的客户尝试在 ((http)://MyServerIP:8525/ServiceName) 连接到我的服务。

我所有的应用程序用户都是在**公司**工作的人。所以用户互联网来自安全网络（代理服务器或 VPN 连接）。

**问题在这里：**

我的很多客户都有连接问题，似乎本地网络阻止了我的程序连接（如果他们尝试连接到我的服务器系统。诊断侦听器将记录它）但服务不保存任何日志。

我认为他们的**互联网服务器**有**防火墙**并且它阻止了我。我修复了其中一些

```
<defaultProxy enabled="true" useDefaultCredentials="true" /> 
```

但仍然有很多人有同样的问题。另一个烦人的问题是网络管理员因为安全问题没有打开那个端口，也没有帮助我。

一个常见异常是：System.ServiceModel.EndpointNotFoundException > System.Net.WebException > System.Net.Sockets.SocketException（**在客户端**）。

当我从家里连接时，这个问题没有发生。

**我的问题 ：**

有什么方法可以用 c# 代码或客户端 app.config 解决这个问题？或者至少通过更改服务配置（服务器端）来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:23:50.713

唯一简单的解决方案是在端口 80 上托管该服务

The problem is that some networks do not permit outgoing connection to ports other than permitted services(http,https,pop, etc etc)

Or you can ask sysadmins of those networks to permit traffic to your ip/port

If you have iis on that server you could host wcf on iis.

Remenber that only one process can bind to a port on an address at any one time.

there you can find some info: [How can a WCF service listen the same port as IIS?](https://stackoverflow.com/questions/2067830/how-can-a-wcf-service-listen-the-same-port-as-iis)

# javascript - 在 Extjs 中总是显示 Slider 的提示文本

> ID：15198053
> 
> 赞同：11
> 
> 时间：2013-03-04T09:15:02.363
> 
> 标签：javascript, extjs, extjs4, extjs4.1, extjs-mvc

在 Extjs 4.1.1a 中，如何保持`tip text`滑块的始终可见？

目前，`tip text`只要用户拖动滑块的栏，就可以看到 。
我在[文档](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.slider.Single)上搜索但找不到任何相关概念。

**如果它没有记录或不可能**，那么请解释我如何`tip text`手动创建。`tip text`应该沿着滑块的条移动，并且它不应超过或隐藏任何其他相邻组件。

这是我的代码，它生成一个简单的滑块：

```
xtype:'slider',
cls: 'sliderStyle',
width: "80%",
id: 'slider',
value: 6,
minValue: 1,
maxValue: 12,
useTips: true,

tipText: function(thumb){
    var months = ['','Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
    var value = Ext.String.format(months[thumb.value]);
    return value;
}, 
```

~~问题2：是否至少可以显示`tip text`鼠标悬停在滑块上的时间？~~

[**PS：我在这里**](http://www.sencha.com/forum/showthread.php?257843-Always-show-the-tip-text-of-Slider-in-Extjs&p=944638)也问了同样的问题。

**编辑 1：** 我还用两个相邻的按钮（`<`和`>`）移动滑块的搜索栏。因此，必须注意，如果我用相邻的按钮移动搜索栏，那么`tip text`也应该移动。

~~**编辑 2：**将鼠标悬停在滑块或相邻按钮上时，提示文本应该可见。~~

**答案**：http: [//jsfiddle.net/WdjZn/1/](http://jsfiddle.net/WdjZn/1/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-06T13:45:30.857

我设法通过覆盖以下事件处理程序来保持提示可见`Ext.slider.Tip`：

```
Ext.define('AlwaysVisibleTip', {
    extend: 'Ext.slider.Tip',

    init: function(slider) {
        var me = this;
        me.callParent(arguments);
        slider.removeListener('dragend', me.hide);
        slider.on({
            scope: me,
            change: me.onSlide,
            afterrender: function() {
                setTimeout(function() {
                    me.onSlide(slider, null, slider.thumbs[0]);
                }, 100);
            }
        });
    }
});

Ext.create('Ext.slider.Single', {
    animate: false,
    plugins: [Ext.create('AlwaysVisibleTip')],
    // ...
}); 
```

查看[演示](http://jsfiddle.net/molecule/554gN/)。

我的方法的缺点：

1.  它依赖于私有方法`onSlide`
2.  它仅适用于单个滑块
3.  仅当`animate`设置为时，键盘导航才能正常工作`false`
4.  `setTimeout`用于调整尖端的初始位置

修复这个缺点不仅需要破解`Ext.slider.Tip`类，还需要破解`Ext.slider.Multy`类，甚至可能是`Ext.slider.Thumb`类。

## 编辑

用事件替换`changecomplete`事件，`change`因为在被调用`changecomplete`时不会触发。`slider.setValue()`

添加了带有相邻按钮的滑块[演示](http://jsfiddle.net/molecule/WdjZn/)。

## 编辑2

`tipText`如果使用自定义提示插件，则不再应用配置。您必须使用插件的[getText](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.slider.Tip-method-getText)配置：

```
Ext.create('Ext.slider.Single', {
    animate: false,
    plugins: [Ext.create('AlwaysVisibleTip',{
        getText: function(thumb) {
            var months = ['','Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
            return Ext.String.format(months[thumb.value]);
        }
    })],
    // ...
}); 
```

更新了[演示](http://jsfiddle.net/molecule/554gN/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-21T19:28:00.480

对于 extjs 4.2，
将 : 更改
`slider.removeListener('dragend', me.hide);`
为 :
`slider.removeListener('dragend', me.hide, me);`

# powershell - 如何使用powershell提取publickeytoken？

> ID：15198066
> 
> 赞同：3
> 
> 时间：2013-03-04T09:15:34.293
> 
> 标签：powershell, powershell-2.0, strongname

我正在尝试检查程序集是否是强名称签名的。

以下是我的PowerShell脚本

```
function Get-AssemblyStrongName($assemblyPath)
{
    [System.Reflection.AssemblyName]::GetAssemblyName($assemblyPath).FullName 
}

$File = Get-ChildItem -Path $args[0] -Include @("*.dll","*.exe") -Recurse

Foreach ($f in $File)
{
  $assembly=$f.FullName

  Get-AssemblyStrongName $assembly

} 
```

输出如下所示。

> Sampledll，版本=1.0.0.0，文化=中性，PublicKeyToken=70ea1bb087B4tbed

如果 publickeytoken 为空，我认为它没有签名。我试图写如果条件像

```
$Assembly=Get-AssemblyStrongName $assembly
If ($assembly -contains "null" ) { "assembly is not signed" } 
```

尽管许多 exe 或 dll 的 publickey 为 null，但它仍然没有显示“程序集未签名”的输出。

如何使用 if 条件检查 publickeytoken 是否为空？（或程序集是否签名）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T15:59:11.073

另一种选择是使用 GetPublicKeyToken() 方法，该方法返回填充或空字节数组，例如：

```
function Test-AssemblyStrongNamed($assemblyPath) {
    [reflection.assemblyname]::GetAssemblyName($assemblyPath).GetPublicKeyToken().Count -gt 0
} 
```

# jquery - Chrome复选框没有改变

> ID：15198069
> 
> 赞同：3
> 
> 时间：2013-03-04T09:15:47.517
> 
> 标签：jquery, google-chrome, checkbox

我在表格中有简单的复选框。这是我在代码中看到的复选框标记：

```
<input type="checkbox" id="iFact123" onchange="submit_status_change(123,$(this).prop('checked'));" > 
```

现在例如在 Firefox 中，这工作正常。在 Chrome 中，会发生以下情况：

*   单击复选框时，复选框似乎不会更改为选中/未选中。它保持不变。至少在视觉上
*   运行正常，`submit_status_change()`如果我重新加载页面，该元素将被加载为选中状态（现在是来自数据库的信息）。由于此函数从 获取信息`$(this).attr('checked'))`，因此必须至少在发送参数时检查元素 - 它只是没有出现。

现在有人对这样的问题有任何想法或经验吗？

如果您认为它与提交功能有关，这里是：

```
function submit_status_change(id, val){
  //$.post('something.php',{'change_status':id, 'status':val}, function(){}); 
} 
```

更新：`attr`更改为`prop`

Chrome 现在更改了复选框，至少在视觉上是这样。事件`onchange`似乎没有发生。

火狐：

```
 TypeError: $(...).prop is not a function
[Break On This Error]   

submit_tech_status(123,$(this).prop('checked')); 
```

UPDATE2：我切断了一些代码。现在提交功能非常清晰。Firefox 出现错误`prop`，chrome 打印没有错误，但不运行提交功能。这与以前不同，chrome 中的复选框似乎没有被选中或未选中，但功能正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-18T14:21:29.390

只需写如下内容：

```
$("#iFact123").change( function() {
   var c = $(this).prop("checked");
   // do whatever you want with c value
}); 
```

# java - 大型输入的 java.lang.StackOverflowError 异常

> ID：15198076
> 
> 赞同：0
> 
> 时间：2013-03-04T09:16:20.620
> 
> 标签：java, string, recursion, stack, overflow

基本上，我正在编写一个程序来手动进行简单的除法，我希望小数位最多为 10^6 位。该程序适用于<3000的输入，但是当我走高时，它显示： `Exception in thread "main" java.lang.StackOverflowError`

这是我的代码：

```
{
....
....
int N=100000;//nth place after decimal point
String res=obj.compute(N,103993.0,33102.0,ans); //division of 103993.0 by 33102.0
System.out.println(res);
}

public String compute (int n, double a, double b, String ans){
        int x1=(int)a/(int)b;
        double x2=a-x1*b;
        double x3=x2*10;
        int c=0;
        if (n==0||n<0)
            return ("3."+ans.substring(1));
        else if (x3>b){
            ans+=""+x1;
            c=1;
        }
        else if(x3*10>b){
            ans+=x1+"0";
            c=10;
        }
        else if(x3*100>b){
            ans+=x1+"00";
            c=100;
        }
        else if(x3*1000>b){
            ans+=x1+"000";
            c=1000;
        }
        else if(x3*10000>b){
            ans+=x1+"0000";
            c=10000;
        }
        return compute(n-String.valueOf(c).length(),x3*c,b,ans);
    } 
```

我不是 Java 的铁杆程序员。我需要帮助来解决这种情况。我阅读了一些关于增加堆栈大小的 SO 帖子，但我不明白该方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:25:18.570

对这种计算使用递归是一个好主意，但是您进行的每个子调用都会在堆栈中存储指针和其他信息，最终填充它。我不知道 VM 的深度，但我认为 JVM 的最大堆或堆栈大小取决于可以保留多少连续的空闲内存，因此您的问题可以通过使用**-Xssparameter**来解决，它会改变堆栈（例如 java -Xss8M YourClass）。如果这仍然不起作用或者您无法获得足够的内存，我会尝试使用**64 位 JVM**。

如果这一切都不起作用，与通常的良好做法相反，我会尝试在**没有递归**的情况下执行此程序。

我希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T09:35:03.647

从 compute() 到 compute 的递归调用导致堆栈溢出。改变你的方法以使用循环而不是递归，它会更好地扩展。请参阅维基百科页面了解您可以使用的不同划分算法：[https ://en.wikipedia.org/wiki/Division_%28digital%29](https://en.wikipedia.org/wiki/Division_%28digital%29)

**或者像这样使用 BigDecimal：**

```
public class Main {
    public static void main(String... args) {
        final int precision = 20;
        MathContext mc = new MathContext(precision, RoundingMode.HALF_UP);
        BigDecimal bd = new BigDecimal("103993.0");
        BigDecimal d = new BigDecimal("33102.0");
        BigDecimal r = bd.divide(d, mc);
        System.out.println(r.toString());
    }
} 
```

输出：3.1415926530119026041

设置精度以获得所需的小数位数。

# ios - 如何使用 AirPlay 查找可用屏幕？

> ID：15198079
> 
> 赞同：1
> 
> 时间：2013-03-04T09:16:38.043
> 
> 标签：ios, objective-c, airplay

我正在尝试检测网络上何时有可用的 AirPlay 设备，如果有，我想显示一个列表。

例如，应用程序“Dailymotion”完全符合我的要求：当我将 iPhone 连接到带有 Apple TV 的网络时，会出现一个“AirPlay”图标：[https ://dl.dropbox.com/u/4534662/Photo% 2004-03-13%2010%2007%2014.png](https://dl.dropbox.com/u/4534662/Photo%2004-03-13%2010%2007%2014.png)（就在高清旁边）

然后，当单击 AirPlay 图标时，会出现一个带有可用 AirPlay 设备的选择器：[https ://dl.dropbox.com/u/4534662/Photo%2004-03-13%2010%2007%2018.png](https://dl.dropbox.com/u/4534662/Photo%2004-03-13%2010%2007%2018.png)

我没有找到使用 Apple Documentation 的方法。那么，我怎样才能以编程方式做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T09:21:53.027

您可以像这样显示 AirPlay 选择器视图（如果 AirPlay 可用）：

```
MPVolumeView *volumeView = [ [MPVolumeView alloc] init] ;
[volumeView setShowsVolumeSlider:NO];
[volumeView sizeToFit];
[view addSubview:volumeView]; 
```

显示`MPVolumeView`所有可用的 AirPlay 设备。上面的代码禁用了音量滑块，您可能想要也可能不想这样做。你不能做的是获得对 AirPlay 设备信息的编程访问。

# javascript - 使用 Ember.js 视图渲染集合

> ID：15198080
> 
> 赞同：2
> 
> 时间：2013-03-04T09:16:42.250
> 
> 标签：javascript, ember.js

我想使用 Ember.js 视图呈现一个集合。以下是我的要求：

1.  我不想为集合中的每个项目生成两个变形脚本标签，DOM 结构应该严格地只是 UL 和 LI（我不介意 LI 内的变形）
2.  我收藏中的每个项目都有一个选定的属性。根据这个属性值，我想将选定的类设置为 LI
3.  我希望在模板中定义整个内容，并且只希望在 JavaScript 中使用此模板的一个视图 - 没有额外的类

使用`{{each}}`helper 不满足第一个要求。使用`{{collection}}`我无法有条件地将 CSS 类分配给 LI（我不是说不可能，只是不知道如何）。如果我的 LI 定义为 ，似乎可以满足 1\. 和 2\. `Ember.View`，但是我最终为简单的用例编写了很多样板。

这是带有我的代码的[jsbin](http://jsbin.com/ofigil/2/edit)，目标是让我的名字以粗体显示，我想知道是否可能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T13:03:24.463

我认为如果不编写项目视图类，您将无法逃脱。虽然它不是一个样板：

```
App.MyItemView = Ember.View.extend({
  classNameBindings: 'content.selected:selected'
}); 
```

车把：

```
{{#collection contentBinding="view.options" itemViewClass="App.MyItemView"
              tagName="ul" itemTagName="li"}}
  {{view.content.selected}} &ndash; {{view.content.name}}
{{/collection}} 
```

* * *

我的替代方法是将项目的内容包装到一个附加元素中：

```
{{#collection contentBinding="view.options" tagName="ul" itemTagName="li"}}
  <div {{bindAttr class="view.content.selected:selected"}}>
    {{view.content.selected}} &ndash; {{view.content.name}}
  </div>
{{/collection}} 
```

并相应地调整 CSS：

```
li > .selected {
  font-weight: bold;
} 
```

这样您就不需要创建视图类，但我不确定您是否可以接受对 HTML 结构的更改。

# python - 整数数组中不相等元素之间的最小差异

> ID：15198087
> 
> 赞同：0
> 
> 时间：2013-03-04T09:17:00.253
> 
> 标签：python, numpy

我确实有一个包含整数数组的列表，其中每个元素的值 <= 100。我需要找出每个数组的不相等元素之间的最小差异。到目前为止，我有以下（`item`代表一个数组）：

```
unq  = numpy.unique(item)
mind = numpy.amin(
        (numpy.append(unq, [999]))
       -(numpy.append([-999],unq))
       ) 
```

使用`numpy`我首先得到唯一元素的排序数组。在末尾添加高正数和在开头添加高负数后，我减去这两个数组并获得最小值。

有没有更快的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:43:45.150

我认为你的解决方案是好的，除了`numpy.append`你最好使用而不是使用`np.diff`，比如`np.diff(np.unique(a))`：

```
In [1]: import numpy as np

In [2]: a = np.random.randint(0,100,size=50)

In [4]: np.unique(a)
Out[4]: 
array([ 0,  2,  3,  5,  7,  8, 15, 18, 20, 22, 23, 27, 30, 31, 32, 33, 37,
       38, 42, 43, 45, 48, 49, 57, 59, 62, 65, 70, 74, 75, 76, 78, 79, 80,
       83, 84, 88, 91, 93, 94, 96, 98])

In [5]: np.diff(np.unique(a))
Out[5]: 
array([2, 1, 2, 2, 1, 7, 3, 2, 2, 1, 4, 3, 1, 1, 1, 4, 1, 4, 1, 2, 3, 1, 8,
       2, 3, 3, 5, 4, 1, 1, 2, 1, 1, 3, 1, 4, 3, 2, 1, 2, 2])

In [6]: np.diff(np.unique(a)).min()
Out[6]: 1 
```

# java - 使用 CDI/WELD 注入通用数据模型

> ID：15198088
> 
> 赞同：2
> 
> 时间：2013-03-04T09:17:01.077
> 
> 标签：java, generics, java-ee-6, glassfish-3, cdi

我对 GlassFish 3.1.2 上的泛型和 CDI/WELD 有疑问。我有这些课程：

这是持有对 JPA 实体的引用的抽象 bean。

```
public abstract class AbstractViewBean<T extends Serializable> implements ISelectableBean {

    ...        

    private T viewObject;

    ...
} 
```

然后我有我的 JSF bean/页面的抽象类，我想在其中注入 TableLazyDataModel

```
public abstract class AbstractListPageAction<T extends AbstractViewBean<K>, K extends
        Serializable> {

    ...
    @Inject
    private TableLazyDataModel<T, K> dataModel;
    ...
} 
```

TableLazyDataModel：

```
public class TableLazyDataModel<T extends AbstractViewBean<K>, K extends Serializable>
        extends LazyDataModel<T> {
    ...
} 
```

如果我想部署应用程序，我会得到：

```
org.jboss.weld.exceptions.DeploymentException: WELD-001408 Unsatisfied dependencies for type [TableLazyDataModel<UserViewBean, CcalPracovnik>] with qualifiers [@Default] at injection point [[field] @Inject private cz.wf.ui.component.page.AbstractListPageAction.dataModel]
at org.jboss.weld.bootstrap.Validator.validateInjectionPoint(Validator.java:311)
at org.jboss.weld.bootstrap.Validator.validateInjectionPoint(Validator.java:280)
at org.jboss.weld.bootstrap.Validator.validateBean(Validator.java:143)
at org.jboss.weld.bootstrap.Validator.validateRIBean(Validator.java:163)
at org.jboss.weld.bootstrap.Validator.validateBeans(Validator.java:382)
at org.jboss.weld.bootstrap.Validator.validateDeployment(Validator.java:367)
at org.jboss.weld.bootstrap.WeldBootstrap.validateBeans(WeldBootstrap.java:379)
at org.glassfish.weld.WeldDeployer.event(WeldDeployer.java:199) 
```

如果我从 AbstractViewBean 和其他类中删除*extends Serializable ：*

```
public abstract class AbstractViewBean<T> implements ISelectableBean {

    ...        

    private T viewObject;

    ...
}

public abstract class AbstractListPageAction<T extends AbstractViewBean<K>, K> {

    ...
    @Inject
    private TableLazyDataModel<T, K> dataModel;
    ...
} 
```

一切正常。但为什么？

谢谢。

**编辑：**

我将weld-osgi-bundle.jar 的WELD 版本更新为1.1.11，但没有任何效果。

# .net - 如何在构建服务器上构建和部署 .Net 应用程序？

> ID：15198089
> 
> 赞同：0
> 
> 时间：2013-03-04T09:17:13.847
> 
> 标签：.net, deployment, continuous-integration

我正在尝试将 .Net 构建添加到我们基于 Hudson 的构建服务器中。到目前为止（对于基于 Java 的 Web 应用程序）的方法是两个阶段的过程，如下所示：

*   构建（编译和打包） - 目标不可知
*   部署到服务器（测试/登台/生产/等）并在版本控制中设置标签

我想为我正在开发的一些 .Net 应用程序设置类似的东西。应用程序将作为 ClickOnce 或安装包分发。

最初，我设置了 2 个 Hudson 作业来构建然后部署为 ClickOnce 应用程序。这里的问题是我必须在构建作业中定义 ClickOnce 服务器，我真的想在其中执行中性构建，然后再决定要部署到的位置。

所以我尝试使用一个安装项目，直到我读到无法从命令行构建这样的项目。

接下来，我尝试使用 InstallShield Limited Edition 2010，但似乎我必须获得许可证才能在 VS2010 之外的服务器上运行它。

你有什么经验吗？您如何为可执行（非 Web）.Net 应用程序设置 CI 构建？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T21:35:48.767

从设置/安装程序方面来看，一种解决方案是查看使用[WiX 工具集](http://wixtoolset.org/)。因为 WiX 解决方案是 Visual Studio 解决方案，它们可以使用 MsBuild 构建，无需在构建机器上安装 Visual Studio 或类似的东西。

需要注意的一点是，WiX 的学习曲线非常陡峭（尽管有一个很棒的[教程](http://wix.tramontana.co.hu/)），但大部分复杂性似乎是由于 Windows Installer 的底层复杂性，而不是因为 WiX 工具集。我发现我花了一段时间才开始使用 WiX，但一旦我开始使用它，我就明白它为什么会起作用以及潜在的问题可能是什么。

# php - 如何匹配“以...开头”的单词，但如果引用则不匹配？

> ID：15198091
> 
> 赞同：0
> 
> 时间：2013-03-04T09:17:20.453
> 
> 标签：php, regex

如果有一个以 199 开头的单词，我需要过滤掉文本字符串实际上我正在使用

```
/199/ 
```

但是这场比赛也nnn199nnn

我试过

```
/\b199/ 
```

所以它只匹配一个或多个以 199 开头的单词的字符串

在一些非常罕见的情况下，我需要解决这个过滤器，所以我想简单地“引用”或“双引号”199xxx 来“破解”正则表达式。

但是“199xxx”将被匹配......还有“199”......

所以我的问题是

**如何匹配以 199 开头的单词，但如果单词本身被双引号则不匹配？**

编辑：我必须匹配：

*   199324342342
*   但不是 34431994433
*   但不是 ciao199dsadsa
*   **而不是“1994553”**（因为双引号）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T09:19:58.187

您可以使用[后向断言](http://www.regular-expressions.info/lookaround.html)：

```
/(?<!['"])\b199/ 
```

`(?<!['"])`检查当前位置之前的字符（即在 number 的开头之前`199`）既不是 a`'`也不是 a `"`。

# oracle10g - Oracle Express 的语法突出显示

> ID：15198097
> 
> 赞同：0
> 
> 时间：2013-03-04T09:17:40.323
> 
> 标签：oracle10g, oracle-apex

有没有办法在 Oracle Database Express 版本 (10g) 中突出显示 SQL commants。我想看到不同颜色的`SELECT`,`FROM`等`WHERE`commants。

![在此处输入图像描述](../Images/710a6f2b61f108d5c53349510caa6242.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:26:44.487

不，不是开箱即用。看来您使用的是 < 4.0 的版本，因此可能会使它变得复杂一些。
您可以尝试查看 apexLib：[http](http://apexlib.oracleapex.info/)
://apexlib.oracleapex.info/ 虽然您需要 firefox +greasemonkey 扩展或 chrome 才能运行它。在 IE 上是不行的。

# c++ - C++ Win32 多行静态标签

> ID：15198099
> 
> 赞同：2
> 
> 时间：2013-03-04T09:17:48.010
> 
> 标签：c++, winapi, label

我在标签上出现多行问题。

我试过使用 ES_MULTILINE，但每当我使用它时，我都会在标签的位置上看到一个灰色/黑色的矩形，没有标签的文本。

```
CreateWindowW(L"STATIC", selectedPatternProblem, WS_CHILD | WS_VISIBLE | SS_LEFT | ES_MULTILINE | WM_CTLCOLORSTATIC,500, 190, 380, 90,*hwnd, (HMENU) 1, NULL, NULL); 
```

当我添加 WM_CTLCOLORSTATIC 时，矩形消失了，但我的文本也消失了。'selectedPatternProblem' 太大而不能只显示在一行上，所以我的问题是：

如何在多行上显示我的标签？

**编辑：**删除 ES_MULTILINE 和 WM_CTLCOLORSTATIC 后，我发现我的话太长了。但是现在我想知道如何在多行上显示一个长单词？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T09:25:16.133

您正在使用`ES_MULTILINE`带有静态控件的编辑控件样式 ( )，该控件并非旨在支持它。该样式可能映射到`SS_BLACKRECT`or `SS_GRAYRECT`，这将解释您正在观察的行为。

您不必为当前控件添加任何样式来实现您想要的，因为您已经指定`SS_LEFT`了 ，并且[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/bb760773.aspx)说：

> **SS_LEFT**
> 
> 一个简单的矩形并左对齐矩形中的文本。文本在显示之前被格式化。超出行尾的单词会自动换行到下一个左对齐行的开头。长于控件宽度的单词将被截断。

由于您既没有指定也没有指定任何`SS_LEFTNOWORDWRAP`一种`SS_*ELLIPSIS`样式，因此文本应该在单词边界之间换行。

请注意，您还将`WM_CTLCOLORSTATIC` *消息*用作样式，这绝对不会像您期望的那样工作。您应该从控件的样式中删除该值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T09:26:06.250

ES_MULTILINE 适用于编辑控件而不是标签

[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775464%28v=vs.85%29.aspx)：

> 指定多行编辑控件。默认为单行编辑控件。
> 
> 当多行编辑控件在对话框中时，按 ENTER 键的默认响应是激活默认按钮。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-09T02:26:06.253

我使用编辑控件作为多行编辑控件的替代品。我在资源文件中设置了以下属性

`EDITTEXT IDC_COMMENT,58,53,75,41,ES_MULTILINE | ES_AUTOHSCROLL | ES_READONLY | NOT WS_BORDER`

# javascript - 减少全局变量，维护函数流

> ID：15198102
> 
> 赞同：1
> 
> 时间：2013-03-04T09:17:55.413
> 
> 标签：javascript, google-maps, google-maps-api-3, javascript-objects

Javascript 不是我选择的第一语言，也不是我非常精通的语言。功能性的东西很好，对象，不是那么多。

我正在寻找是否有人可以建议处理以下情况的选项。

```
function postcodeEntry(destination,postcode) {
    "use strict";
    document.getElementById('googlemappostcode').innerHTML = <?php if ($_GET['page']==="fun") echo "<div id=\"map\"></div>' + ";?>'<form id="postcodeEntry" method="post" action="/" onsubmit="calcRoute(\'driving\',this.postcode.value,' + destination.hb + ',' + destination.ib + ',\'' + postcode + '\');return false;">'
        + '<h2>Get directions</h2>'
        + '<fieldset>'
        + '<input type="hidden" name="action" value="gmap-directions" />'
        + '<p class="where"><a href="/contact/" onclick="geoLoc();return false;">Where am I?</a></p>'
        + '<label for="postcode">Enter your postcode for directions</label>'
        + '<input type="text" name="postcode" id="postcode" onfocus="checkthis(this,\'Your Postcode/Address:\')" onblur="checkthis(this,\'Your Postcode/Address:\')" value="Your Postcode/Address:" />'
        + '<input type="submit" name="submitTravelType" value="Driving" id="gms_driving" onclick="calcRoute(\'driving\',document.getElementById(\'postcode\').value,' + destination.hb + ',' + destination.ib + ',\'' + postcode + '\');return false;" />'
        + '<input type="submit" name="submitTravelType" value="Walking" id="gms_walking" onclick="calcRoute(\'walking\',document.getElementById(\'postcode\').value,' + destination.hb + ',' + destination.ib + ',\'' + postcode + '\');return false;" />'
        + '<input type="submit" name="submitTravelType" value="Public Transport" id="gms_transit" onclick="calcRoute(\'transit\',document.getElementById(\'postcode\').value,' + destination.hb + ',' + destination.ib + ',\'' + postcode + '\');return false;" />'
        + '<input type="submit" name="submitTravelType" value="Cycling" id="gms_bicycling" onclick="calcRoute(\'bicycling\',document.getElementById(\'postcode\').value,' + destination.hb + ',' + destination.ib + ',\'' + postcode + '\');return false;" />'
        + '</fieldset>'
        + '</form>'
        + '<div id="directions"></div>';
}

function initialize() {
    "use strict";
    var contentString, destination, el, entryPanoId, i, image, infowindow, links, mapOptions, panoId, panoOptions, radius, shadow, shape;
    /* Destination becomes a four part array. 1st being lat, 2nd being long, 3rd being a google maps latlng and the 4th being postcode */
    destination = [<?php echo $venue['latlong']?>];
    destination[2] = new google.maps.LatLng(destination[0], destination[1]);
    destination[3] = '<?php echo $venue['postcode']?>';
    postcodeEntry(destination[2], destination[3]);
    directionsService = new google.maps.DirectionsService();
    directionsDisplay = new google.maps.DirectionsRenderer();
    trafficLayer = new google.maps.TrafficLayer();
    streetviewService = new google.maps.StreetViewService();
    ... 
```

当调用初始化函数时，它会做一点点并使地图正常。邮政编码/位置条目完美运行。事实上，这一切都有效，没有问题。

我的问题是，当一些信息被发送到邮政编码表单时，从该表单返回到 geoLoc 或 calcRoute 函数。这当然意味着我与初始化函数中设置的任何内容都失去了联系。

这意味着我必须使用相当多的全局变量，包括但不限于所示脚本段中的每一项。

我正在尝试更多地了解该语言并更加熟练地使用它。因此，我想（主要是出于固执）尝试将全局变量减少到无（如果可能的话）或尽可能少。

有没有办法解决这个问题？我对javascript对象了解不多，但我一直在学习，所以不知何故将初始化函数变成一个对象，然后包含所有其他对象？（考虑到我目前对 javascript 对象知之甚少，这实际上可能完全疯了）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:55:39.297

当我需要做这样的事情时，我通常会使用构造函数/原型（忘记正确的术语是什么）方法。

例如。

```
// This is the constructor
function initialise(){
    // Add various settings values here
    this.foo = 'bar';
}

// These are some publicly accessible methods
initialise.prototype = {
    alertFoo: function(){
        alert(this.foo); // The value of foo can be accessed via this.foo
    },

    consolelogFoo: function(){
        console.log(this.foo);
    }
} 
```

然后您可以创建一个初始化对象，如下所示：

```
var obj = new initialise(); 
```

并像这样调用公共函数：

```
obj.alertFoo(); 
```

这只是这种方法的一个简短示例。您需要自己实现代码，但为了让您简要了解如何执行此操作，我会这样做。

```
function initialize(options){ // options can be an object with stuff from data-* attributes
    this.destination = {};
    this.destination.coords = new google.maps.LatLng(options.lat, options.long);
    this.destination.postcode = options.postcode;
    this.directionsService = new google.maps.DirectionsService();
    this.directionsDisplay = new google.maps.DirectionsRenderer();
    this.trafficLayer = new google.maps.TrafficLayer();
    this.streetviewService = new google.maps.StreetViewService();
    ....
}

initialize.prototype = {
    geoLoc: function(){
        // do stuff
    },

    calcRoute: function(){
        // do stuff
    }
} 
```

这样，当您需要更新例如的值时。目的地坐标，你只需要告诉你的公共方法来更新 this.destination.coords 属性。

至于 HTML 代码，我建议你尽量避免使用 JS 注入 HTML 代码。这不是一个好习惯。

此外，我也不建议将 PHP 代码混入您的 JS 代码中。最好将它们分开，并在需要从 PHP 提供 JS 代码时使用 data-* 属性。

我希望这有帮助。

编辑：在回答有关如何处理表单提交事件的问题时，您可以执行以下操作：

```
function initialize(){
    ....
    this.form = document.form1; // Assuming you have a form called form1
    this.init();
}

initialize.prototype = {
    init: function(){ // I usually use this approach for attaching event handlers and other stuff so as keep the constructor clean, and separate the concerns
        this.form.onsubmit = this.formHandler;
    },
    ....
    formHandler: function(){ // This is the form handler
        alert(this.textField1.value); // Assuming form1 has a field called textField1
        return false; // This will prevent the form from being submitted via traditional page POST request
    },
    ....
}; 
```

# wpf - 按名称查找父控件

> ID：15198104
> 
> 赞同：13
> 
> 时间：2013-03-04T09:18:02.327
> 
> 标签：wpf, controls, parent

当在 xaml 代码中设置名称时，有没有办法通过其名称查找 WPF 控件的父级？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-04T10:03:40.200

尝试这个，

```
element = VisualTreeHelper.GetParent(element) as UIElement; 
```

在哪里，元素是孩子 - 你需要得到谁的父母。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-01-11T18:12:46.557

[实际上，我可以通过使用VisualTreeHelper](http://msdn.microsoft.com/en-us/library/system.windows.media.visualtreehelper.aspx)按名称和类型递归查找父控件来做到这一点。

```
 /// <summary>
    /// Recursively finds the specified named parent in a control hierarchy
    /// </summary>
    /// <typeparam name="T">The type of the targeted Find</typeparam>
    /// <param name="child">The child control to start with</param>
    /// <param name="parentName">The name of the parent to find</param>
    /// <returns></returns>
    private static T FindParent<T>(DependencyObject child, string parentName)
        where T : DependencyObject
    {
        if (child == null) return null;

        T foundParent = null;
        var currentParent = VisualTreeHelper.GetParent(child);

        do
        {
            var frameworkElement = currentParent as FrameworkElement;
            if(frameworkElement.Name == parentName && frameworkElement is T)
            {
                foundParent = (T) currentParent;
                break;
            }

            currentParent = VisualTreeHelper.GetParent(currentParent);

        } while (currentParent != null);

        return foundParent;
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-04T10:05:18.310

在代码中，您可以使用[VisualTreeHelper](http://msdn.microsoft.com/en-us/library/system.windows.media.visualtreehelper.aspx)遍历控件的可视化树。您可以像往常一样通过代码隐藏的名称来识别控件。

如果你想直接从 XAML 使用它，我会尝试实现一个自定义的“值转换器”，你可以实现它来找到满足你要求的父控件，例如具有某种类型。

如果您不想使用值转换器，因为它不是“真正的”转换操作，您可以实现一个“ParentSearcher”类作为依赖对象，它为“输入控件”提供依赖属性，您的搜索谓词和输出控件并在 XAML 中使用它。

# asp.net - 相同的 asp.net 网页，除了 1 列。目前有 2 种不同的 aspx 表单 - 一种可以在重定向之前设置属性吗？

> ID：15198106
> 
> 赞同：0
> 
> 时间：2013-03-04T09:18:15.690
> 
> 标签：asp.net, properties

我有 2 页，它们是相同的，除了数据库中的一列（带有敏感信息），它不应该显示在其中一页中。

例如

```
myPageIncludeSensitiveInfo.aspx
myPageExlucdeSensitiveInfo.aspx 
```

此时，每个页面都在一个单独的代码隐藏文件中，我需要帮助来找出如何在一个页面中执行此操作。有一个`pagebaseclass`用于安全性。我不允许使用`Querystrings`，

```
e.g. myPage.aspx?include=true 
or   myPage.aspx?exclude=true 
```

在 Windows 页面中，我可以选择：

```
dim myPage1 as new myPage
myPage.bIncludeSensitiveInfo = False
myPage1.show() 
```

但有了`asp.net forms`它`response.redirect`，我不知道是否可以事先设置属性。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:24:39.620

如果不允许使用查询字符串参数（在这种情况下是合理的），请使用`Session`.

```
Session("includeSensitiveInfo") = True
Response.Redirect("myPage.aspx") 
```

并且在`myPage.aspx`（假设列表示 a 中的列`GridView`并且它是第一列）：

```
gridView1.Columns(0).Visible = Session("includeSensitiveInfo") IsNot Nothing _
            AndAlso DirectCast(Session("includeSensitiveInfo"), Boolean) 
```

[在 ASP.NET 应用程序中管理持久用户状态的九个选项](http://msdn.microsoft.com/en-us/magazine/cc300437.aspx)

# events - 如何使用 PhoneGap 区分“暂停”和“关机”事件

> ID：15198111
> 
> 赞同：1
> 
> 时间：2013-03-04T09:18:39.470
> 
> 标签：events, cordova, shutdown

我正在开发一个从远程服务器检索值的 PhoneGap 应用程序。

当我的应用程序要暂停时，它会进入后台并停止获取数据，但会在收听时跟踪错误。一切都好。

我的问题是如何使用 PhoneGap 检测“关闭”事件，因为我想在我的应用程序关闭时做其他事情，而不是在它暂停时。

换句话说，我可以做到`document.addEventListener('pause', this.onDevicePause, false);`，我想知道是否`document.addEventListener('unload', this.onDeviceUnload, false);`存在某种。

谢谢你的帮助。此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T14:23:46.017

通过此链接提供，我认为即使我可以获得某种“ondestroy”事件，它也可能无法正常工作，因为该应用程序已被杀死。

[在javascript中处理onDestroy方法](https://stackoverflow.com/questions/14610270/handle-ondestroy-method-in-javascript)

我想我会玩“暂停”事件和一些想象的东西;-)

# php - 为分类网站上的每个类别创建子文件夹

> ID：15198114
> 
> 赞同：0
> 
> 时间：2013-03-04T09:18:53.337
> 
> 标签：php, wordpress, web, categories, subdirectory

我正在创建分类广告网站。

该网站具有按位置过滤的搜索功能。

目前我只是使用 php GET 函数通过 url 发送位置并在搜索数据库之前检索它。

我希望能够将该位置作为域的子文件夹出现。

如果不为每个位置上传物理子文件夹和 index.php 文件，这可能吗？

请就实现这一目标的最佳选择提出建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:27:47.053

是的，有可能。试试 apache mod_rewrite：

[http://httpd.apache.org/docs/current/mod/mod_rewrite.html](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)

打开它，然后在 .htaccess 文件中（必须与您的 index.php 相同的文件夹）：

```
RewriteEngine on

RewriteBase / # or the subfolder where your index.php is inside the domain
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*) index.php?location=$1 
```

还有一个 index.php 的例子：

```
<?php 
   print $_GET['location']; 
?> 
```

这可能会对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T07:29:13.537

谢谢你的帮助科夫格。

在接受您的回答并进行进一步研究后，我创建了一个完全符合我要求的 RewriteRule。

由于这些位置的结构具有多个级别（对于州、地区、城市、郊区等），所以我已经做到了，所以无论 URL 有多少子文件夹，返回只会是最终的子文件夹（没有尾部斜杠）。

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*/)?(.*[^/])/?$ /index.php?location=$2 
```

# dynamic - 如何在 NS2 运行时更改链接状态（上/下）？

> ID：15198117
> 
> 赞同：1
> 
> 时间：2013-03-04T09:19:08.530
> 
> 标签：dynamic, hyperlink, runtime, tcl, ns2

我看过[这篇文章](https://stackoverflow.com/questions/8386123/how-to-change-the-delay-of-a-link-in-ns2-simulation)，也有*类似*的问题。

我希望在节点达到某个吞吐量时关闭它。如帖子中所述，“ `rtmodel-at`”方法不起作用。该帖子的答案提到了在运行时更改链接的延迟。我想知道是否可以使用答案中提到的技术在运行时启动/关闭链接状态。为此目的，有一种方法“ `Link instproc down {} {}`” 。`ns-2.35/tcl/lib/ns-link.tcl`

如何`Link instproc down {} {}`从模拟脚本中调用“”？

# jdbc - 无法 ping，MariaDB Drizzle JDBC 中的管道损坏

> ID：15198119
> 
> 赞同：1
> 
> 时间：2013-03-04T09:19:21.310
> 
> 标签：jdbc, ubuntu-12.04, mariadb, drizzle

我有一个使用**mariadb 服务器**的 java 应用程序。从 java 中，**drizzle jdbc**用于连接 mariadb 服务器。有时，我得到一个错误，**破管子**。

我不知道为什么会发生此错误，其根本原因。

我正在使用 ubuntu12.04、最新的 drizzle jdbc 驱动程序（1.2）和 mariadb 5.5.29。

请查看错误日志：

> java.sql.SQLNonTransientConnectionException：无法 ping：org.drizzle.jdbc.DrizzleConnection.isValid(DrizzleConnection.java:950) 的 org.drizzle.jdbc.internal.SQLExceptionMapper.get(SQLExceptionMapper.java:97) 的管道损坏
> 
> -------------------------------------------------- ------------------------- 在 org.eclipse.cdt.dsf.concurrent.RequestMonitor$2.run(RequestMonitor.java:298) 在 java。 util.concurrent.Executors$RunnableAdapter.call(Executors.java:471) 在 java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334) 在 java.util.concurrent.FutureTask.run(FutureTask.java: 166) 在 java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:266) 在 java.util.concurrent.ThreadPoolExecutor 的 java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$101(ScheduledThreadPoolExecutor.java:165)。 runWorker(ThreadPoolExecutor.java:1110) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) at java.lang.Thread.run(Thread.java:679) 原因：org.drizzle.jdbc .internal.common.QueryException：无法ping：org.drizzle.jdbc.DrizzleConnection.isValid（DrizzleConnection.java:948）的org.drizzle.jdbc.internal.mysql.MySQLProtocol.ping（MySQLProtocol.java:424）的管道损坏... 14 更多原因：java.net.SocketException：在 java.net.SocketOutputStream 的 java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:109) 的 java.net.SocketOutputStream.socketWrite0(Native Method) 的管道损坏。 write(SocketOutputStream.java:153) at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:82) at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:140) at org.drizzle.jdbc.internal.mysql.packet .commands.MySQLPingPacket.send(MySQLPingPacket.java:47) 在 org.drizzle.jdbc.internal.mysql.MySQLProtocol.ping(MySQLProtocol.java:419) ... 15 更多无法 ping：org.drizzle.jdbc.DrizzleConnection.isValid(DrizzleConnection.java:948) 的 org.drizzle.jdbc.internal.mysql.MySQLProtocol.ping(MySQLProtocol.java:424) 的管道损坏 ... 14 更多通过： java.net.SocketException：在 java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:109) 在 java.net.SocketOutputStream.write(SocketOutputStream.java: 153) 在 java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:82) 在 java.io.BufferedOutputStream.flush(BufferedOutputStream.java:140) 在 org.drizzle.jdbc.internal.mysql.packet.commands.MySQLPingPacket.send (MySQLPingPacket.java:47) 在 org.drizzle.jdbc.internal.mysql.MySQLProtocol.ping(MySQLProtocol.java:419) ... 15 更多无法 ping：org.drizzle.jdbc.DrizzleConnection.isValid(DrizzleConnection.java:948) 的 org.drizzle.jdbc.internal.mysql.MySQLProtocol.ping(MySQLProtocol.java:424) 的管道损坏 ... 14 更多通过： java.net.SocketException：在 java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:109) 在 java.net.SocketOutputStream.write(SocketOutputStream.java: 153) 在 java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:82) 在 java.io.BufferedOutputStream.flush(BufferedOutputStream.java:140) 在 org.drizzle.jdbc.internal.mysql.packet.commands.MySQLPingPacket.send (MySQLPingPacket.java:47) 在 org.drizzle.jdbc.internal.mysql.MySQLProtocol.ping(MySQLProtocol.java:419) ... 15 更多mysql.MySQLProtocol.ping(MySQLProtocol.java:424) at org.drizzle.jdbc.DrizzleConnection.isValid(DrizzleConnection.java:948) ... 14 更多原因：java.net.SocketException：java.net 的管道损坏。 SocketOutputStream.socketWrite0(Native Method) at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:109) at java.net.SocketOutputStream.write(SocketOutputStream.java:153) at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java: 82) 在 java.io.BufferedOutputStream.flush(BufferedOutputStream.java:140) 在 org.drizzle.jdbc.internal.mysql.packet.commands.MySQLPingPacket.send(MySQLPingPacket.java:47) 在 org.drizzle.jdbc.internal .mysql.MySQLProtocol.ping(MySQLProtocol.java:419) ... 15 更多mysql.MySQLProtocol.ping(MySQLProtocol.java:424) at org.drizzle.jdbc.DrizzleConnection.isValid(DrizzleConnection.java:948) ... 14 更多原因：java.net.SocketException：java.net 的管道损坏。 SocketOutputStream.socketWrite0(Native Method) at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:109) at java.net.SocketOutputStream.write(SocketOutputStream.java:153) at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java: 82) 在 java.io.BufferedOutputStream.flush(BufferedOutputStream.java:140) 在 org.drizzle.jdbc.internal.mysql.packet.commands.MySQLPingPacket.send(MySQLPingPacket.java:47) 在 org.drizzle.jdbc.internal .mysql.MySQLProtocol.ping(MySQLProtocol.java:419) ... 15 更多948）... 14 更多原因：java.net.SocketException：java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:109) 的 java.net.SocketOutputStream.socketWrite0(Native Method) 的管道损坏。 SocketOutputStream.write(SocketOutputStream.java:153) at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:82) at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:140) at org.drizzle.jdbc.internal.mysql .packet.commands.MySQLPingPacket.send(MySQLPingPacket.java:47) 在 org.drizzle.jdbc.internal.mysql.MySQLProtocol.ping(MySQLProtocol.java:419) ... 15 更多948）... 14 更多原因：java.net.SocketException：java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:109) 的 java.net.SocketOutputStream.socketWrite0(Native Method) 的管道损坏。 SocketOutputStream.write(SocketOutputStream.java:153) at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:82) at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:140) at org.drizzle.jdbc.internal.mysql .packet.commands.MySQLPingPacket.send(MySQLPingPacket.java:47) 在 org.drizzle.jdbc.internal.mysql.MySQLProtocol.ping(MySQLProtocol.java:419) ... 15 更多write(SocketOutputStream.java:153) at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:82) at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:140) at org.drizzle.jdbc.internal.mysql.packet .commands.MySQLPingPacket.send(MySQLPingPacket.java:47) 在 org.drizzle.jdbc.internal.mysql.MySQLProtocol.ping(MySQLProtocol.java:419) ... 15 更多write(SocketOutputStream.java:153) at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:82) at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:140) at org.drizzle.jdbc.internal.mysql.packet .commands.MySQLPingPacket.send(MySQLPingPacket.java:47) 在 org.drizzle.jdbc.internal.mysql.MySQLProtocol.ping(MySQLProtocol.java:419) ... 15 更多

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T05:02:07.647

上述错误已在 github 中报告并修复：[https ://github.com/krummas/DrizzleJDBC/issues/17](https://github.com/krummas/DrizzleJDBC/issues/17)

# database - 具有 URI/URL 键的空间高效地图/字典/数据库

> ID：15198120
> 
> 赞同：1
> 
> 时间：2013-03-04T09:19:21.810
> 
> 标签：database, url, dictionary, map, uri

我正在寻找一个满足某些属性的节省空间的键值映射/字典/数据库：

*   **格式：**密钥将由 http(s) URI 表示。这些值将是可变长度的二进制数据。
*   **大小：**将有 1-1000 亿个唯一键（平均长度 60-70 字节）。值最初只有几十个字节，但最终可能会增长到几十千字节（如果我决定存储多个版本，可能会更多）。数据的总大小将以 TB 或 PB 为单位。
*   **硬件：**数据必须分布在多台机器上。此分布应确保来自特定域的所有 URI 最终位于同一台机器上。此外，机器上的数据必须根据访问频率在 RAM、SSD 和 HDD 之间分配。随着机器从集群中添加或删除，数据将不得不转移。最初不需要复制，但以后可能会有用。
*   **访问模式：**我需要对数据进行顺序访问和（某种程度上）随机访问。顺序访问将来自持续扫描数据的低优先级批处理。在这种情况下，吞吐量比延迟重要得多。理想情况下，迭代将按字典顺序（即字典顺序）进行。随机访问源于访问 HTML 页面中的 URI，我希望其中大多数将指向与页面相同域的 URI，因此将位于同一台机器上，而其他将位于不同的机器上。我预计每秒最多需要 100,000 到 1,000,000 次内存随机访问。数据不是静态的。读取将比写入多发生一到两个数量级。

最初，数据将由 1 亿到 10 亿个 url 组成，每个 url 有几十个字节的数据。它将托管在少量具有 10-20GB 内存和几 TB 硬盘驱动器的廉价商品服务器上。在这种情况下，大部分空间将被用于存储键和索引信息。出于这个原因，并且因为我的预算很紧，**我正在寻找可以让我将这些信息存储在尽可能小的空间中的东西**。特别是，我希望利用许多 URI 共享**的公共前缀。**通过这种方式，我相信可以将键和索引存储在比 URI 总长度更小的空间中。

我看过几种传统的数据结构（例如哈希映射、自平衡树（例如红黑、AVL、B）、尝试）。只有尝试（有一些技巧）似乎有可能减少索引和键的大小（除了索引之外，所有其他的都存储键）。我想到的最有希望的选择是将 URI 拆分为几个组件（例如 example.org/a/b/c?d=e&f=g 变成 [example, org, a, b, c, d=e , f = g])。各种组件将在树状结构的后续级别中分别索引一个子级，有点像文件系统。这似乎是有利可图的，因为许多 URI 共享相同的域和目录前缀。

不幸的是，我对各种数据库产品知之甚少。我知道他们中的很多人使用 B 树来索引数据。据我了解，索引和键所需的空间超过了 URL 的总长度。

因此，我想知道是否有人可以就任何可以利用 URI 中的冗余来节省空间的数据结构或数据库提供一些指导。其他的东西不太重要，但任何帮助也将不胜感激。

谢谢，对冗长感到抱歉；）

# objective-c - UIKeyboard 在 UIAlertView 按钮索引单击时获得辞职

> ID：15198126
> 
> 赞同：0
> 
> 时间：2013-03-04T09:19:29.640
> 
> 标签：objective-c, uiwebview, uialertview

我创建自定义`UIAlertView`并根据自己的自定义将其关闭`button`，但它也使用可编辑的 div 将键盘从`UIWebView`加载中退出（我正在上面写一些东西）。我怎样才能停止辞职键盘。

```
-(void)dismissAlertView
{    
     [alertForBuySmacks dismissWithClickedButtonIndex:0 animated:NO];
} 
```

# extjs4 - Extjs 4：如何将文本字段输入到可编辑的 div？

> ID：15198127
> 
> 赞同：0
> 
> 时间：2013-03-04T09:19:33.307
> 
> 标签：extjs4

我有一个带掩码的文本字段（或时间/日期字段）。`__:__:__`我必须将“_”的颜色从黑色更改为白色。Extjs 4 是否有任何解决方案可以将输入更改为（可编辑的）div？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T17:55:17.217

您是否尝试过覆盖`fieldSubTpl`字段的基本属性？即，使用 a 作为`div`元素而不是添加属性`input`：

```
fieldSubTpl: [ // note: {id} here is really {inputId}, but {cmpId} is available
    '<div id="{id}" type="{type}" {inputAttrTpl}',
        ' size="1"', // allows inputs to fully respect CSS widths across all browsers
        '<tpl if="name"> name="{name}"</tpl>',
        '<tpl if="value"> value="{[Ext.util.Format.htmlEncode(values.value)]}"</tpl>',
        '<tpl if="placeholder"> placeholder="{placeholder}"</tpl>',
        '{%if (values.maxLength !== undefined){%} maxlength="{maxLength}"{%}%}',
        '<tpl if="readOnly"> readonly="readonly"</tpl>',
        '<tpl if="disabled"> disabled="disabled"</tpl>',
        '<tpl if="tabIdx"> tabIndex="{tabIdx}"</tpl>',
        '<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>',
    ' class="{fieldCls} {typeCls} {editableCls}" autocomplete="off"/>',
    {
        disableFormats: true
    }
], 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T13:22:15.357

现在我在这里，使用这个 tpl：

```
 fieldSubTpl: [ 
            '<div stlye="position: inherit; top: 0px; left: 0px" id="{id}-div" contentEditable='+!this.disableSel+' type="{type}" {inputAttrTpl}',
                ' size="1"', 
                '<tpl if="value"> value="{[Ext.util.Format.htmlEncode(values.value)]}"</tpl>',
                '<tpl if="placeholder"> placeholder="{placeholder}"</tpl>',
                '<tpl if="tabIdx"> tabIndex="{tabIdx}"</tpl>',
                '<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>',
            ' class="{fieldCls} {typeCls} {editableCls}" autocomplete="off">{[Ext.util.Format.htmlEncode(values.value)]}</div>' +
            '<input type="text" id="{id}" value="{[Ext.util.Format.htmlEncode(values.value)]}" ' +
            'style="visibility: hidden; height: 0px; width: 0px; " />',
            {
                disableFormats: true
            }
        ] 
```

我做了一个新插件扩展了原来的插件，全部更改`this.inputTextElement.value`为获取或设置 HTML

```
this.getPicker().on('select', function (p, r, o){
     Ext.get(this.id + '-inputEl-div').setHTML(r.data.disp);
}, this); 
```

在其他一些事件中，隐藏的输入和 div 改变了它们的值，但这不是我解决方案的最终版本。现在我还有很多工作......嗯...... :)

如果您知道其他想法，请发布！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T12:52:14.133

我正在尝试的另一个解决方案：

```
buildDivsByFormat: function () {
    // 12: 'h:i A', '03:15 PM'. 'h:i:s.u A' 24: 'H:i' 'H:i:s.u' instead.
    var w = 8;

    var divs = {};

    if(this.format.indexOf("i") > -1)
    divs.i = '<div style="padding:0px 0px 1px 0px;width:'+w*2+'px;min-width:'+w*2+'px;max-width:'+w*2+'px;float:left;display:inline-block;"' +
        contentEditable="'+!this.disableSel+'" id="'+this.id+'-div-i'+'">&nbsp;</div>';

    ... // making this with other format elements

    var d = '';
    var formatArray = this.format.split('');

    for(var i = 0; i < formatArray.length; i = i + 1){
        var currentChar = formatArray[i];
        if(formatArray[i] === ":") currentChar = 'dp';
        if(formatArray[i] === ".") currentChar = 'p';
        if(formatArray[i] === " ") currentChar = 'sp';

        d = d + divs[currentChar];
    }

    this.divs = d;
    return d;
} 
```

按格式制作 div 并将它们插入到这个 tpl 的 div 中：

```
fieldSubTpl: [ 
     '<div stlye="position: inherit; top: 0px; left: 0px" id="{id}-div" type="{type}" {inputAttrTpl}',
      ' size="1"', 
      '<tpl if="value"> value="{[Ext.util.Format.htmlEncode(values.value)]}"</tpl>',
      '<tpl if="placeholder"> placeholder="{placeholder}"</tpl>',
      '<tpl if="tabIdx"> tabIndex="{tabIdx}"</tpl>',
      '<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>',
     ' class="{fieldCls} {typeCls} {editableCls}" autocomplete="off">' +
     '</div>' +
     '<input type="text" id="{id}" value="{[Ext.util.Format.htmlEncode(values.value)]}" ' +
      'style="visibility: hidden; height: 10px; width: 0px; " />',
       {
            disableFormats: true
       }
  ] 
```

然后我做了一些改变功能......我有一些问题：我无法为这个版本着色，但是......更大的问题是：如果输入是`visibility: hidden;`，它会在我的 tpl 的 div 之后腾出空间...... on`display: none`使时间选择器变为绝对0 0 窗口的位置，而不是字段（div）...有人对此有任何想法吗？

# php - 如何将 xhtml 表单与 php 代码结合起来？

> ID：15198130
> 
> 赞同：0
> 
> 时间：2013-03-04T09:19:49.767
> 
> 标签：php, mysql, xhtml

这可能有点令人困惑，但我需要将 xhtml 表单与 php 代码结合起来。所以这里是如何开始的：我创建了一个搜索框，用户通过输入关键字或标题来搜索产品，然后我的搜索页面从 mysql 搜索数据并以表格格式显示信息。现在我的网页假设如果从显示的表格中比较产品信息，如果用户勾选结果表的特定两行并再次提交，那么它将把他们带到另一个网页，在那里比较这两个勾选的产品的价格。我不知道我会怎么做，所以你的建议会帮助我。

```
echo "<table border='1' bordercolor='#000066'> 
```

```
 <th>Item</th><br />
        <th>image</th>
        <th>description</th>
        <th>price</th>
        <th>brand</th>
        <th>store</th>
        <th>Tick</th>

        </tr>"; // setting up the table headings.

        while ($query_row=mysql_fetch_assoc($query_run))
            {
               echo "<tr bgcolor='#F5FFFF'>";
           echo "<td>". $query_row['title']. "</td>";
           echo "<td><img HEIGHT='250' WIDTH='250' src=fetch.php?imageid=".$query_row['productid']."></td>";

           echo "<td>". $query_row['description']."</td>";
               echo "<td>"."£".$query_row['price']. "</td>";
               echo "<td>". $query_row['brand']."</td>";
           echo "<td><a href=".$query_row['store'].">Click here</a></td>";  
                       echo '<td>';
           ?>

    <form action="tick.php" method="post">  <br /> 

           <input type="checkbox" name="compare" value="<?php echo $query_row['productid']?>" />select to compare<br /> <?php echo '</td>';
            } 

        echo "</table>";     ?>

       <input  align="right"type="submit" name="formSubmit" value="Click to comapre" />

        </form> 
```

下面的代码

勾选.php

```
<?php 
```

$compare = $_POST['compare'];

如果（空（$比较））{

```
echo("You didn't select any products."); 
```

} else { $N = count($compare);

```
 echo("You selected $N product: ");
for($i=0; $i < $N; $i++)
{
  echo($compare[$i] . " ");
} 
```

}

?>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:45:50.813

您需要将复选框输入框转换为复选框数组，如下所示。

```
<input type="checkbox" name="compare[]" 
```

# qt - 在 sqlite3 数据库中存储精确的 cv::Mat 图像

> ID：15198131
> 
> 赞同：3
> 
> 时间：2013-03-04T09:19:56.230
> 
> 标签：qt, opencv, sqlite

有什么方法可以使用**Qt将精确的****cv::Mat**格式数据存储在 sqlite3 中。因为我将来会使用相同的 cv::Mat 格式。

 **我尝试将图像转换为**unsigned char***并将其存储..但这对我不起作用..还有其他技术吗？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-31T05:50:55.297

您可以将 cv::Mat 序列化为 QByteArray（参见[kde/libkface](https://projects.kde.org/projects/extragear/libs/libkface/repository/revisions/master/entry/libkface/database/dbcontainers.cpp)）：

```
QByteArray mat2ByteArray(const cv::Mat &image)
{
    QByteArray byteArray;
    QDataStream stream( &byteArray, QIODevice::WriteOnly );
    stream << image.type();
    stream << image.rows;
    stream << image.cols;
    const size_t data_size = image.cols * image.rows * image.elemSize();
    QByteArray data = QByteArray::fromRawData( (const char*)image.ptr(), data_size );
    stream << data;
    return byteArray;
} 
```

然后存储到数据库。从 DB 读取后从 QByteArray 转换：

```
cv::Mat byteArray2Mat(const QByteArray & byteArray)
{
    QDataStream stream(byteArray);
    int matType, rows, cols;
    QByteArray data;
    stream >> matType;
    stream >> rows;
    stream >> cols;
    stream >> data;
    cv::Mat mat( rows, cols, matType, (void*)data.data() );
    return mat.clone();
} 
```

这个对我有用。**

# jquery - 如何使用 node.js 在嵌套模式中插入？

> ID：15198133
> 
> 赞同：-1
> 
> 时间：2013-03-04T09:19:58.607
> 
> 标签：jquery, performance, node.js, mongodb, mongoose

我有一个像这样的模式：

```
var SchComments = new Schema({
    title     : String
  , body      : String
  , date      : Date
});

var BlogPost = new Schema({
    author    : ObjectId
  , title     : String
  , body      : String
  , date      : Date
  , comments  : [SchComments ]
  , meta      : {
        votes : Number
      , favs  : Number
    }
}); 
```

如何将值插入嵌套模式。我如何调用`SchComments`以传递价值`Node.JS`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:17:59.347

要将元素添加到帖子的`comments`数组中，您可以调用`push`数组然后保存更改：

```
var post = new BlogPostModel({});
post.comments.push({title: 'a', body: 'b', date: new Date()});
post.save(callback); 
```

或者在:中使用[`$push`](http://docs.mongodb.org/manual/reference/operator/push/#_S_push)运算符`update`

```
BlogPostModel.update({}, {$push: {comments: {
    title: 'a2', body: 'b2', date: new Date()
}}}, callback); 
```

还有其他方法，但这些是最典型的。

# python - 为什么 PyQt QGridLayout 不调整大小？

> ID：15198134
> 
> 赞同：1
> 
> 时间：2013-03-04T09:20:05.137
> 
> 标签：python, resize, pyqt4, python-3.3, qgridlayout

我正在使用 PyQt 编写简单的计算器。在我的代码中，我使用 QGridLayout 来复合小部件。但有一个问题。我找不到调整小部件大小的方法。我尝试使用 QWidget.resize 和 insertStreach，但它不像我需要的那样工作。哪个函数可以替代 QWidget.resize？

```
from PyQt4.QtCore import *
from PyQt4.QtGui import *
import sys

class Button(QPushButton):
    def __init__(self, text, parent, TextObject):
        super().__init__(text, parent=parent or None)
        self.clicked.connect(TextObject.SLOT_TextInsert('%s' %(text)))

class Text(QLineEdit):
    def __init__(self, parent):
        super().__init__(parent=parent)
        self.show()

    def SLOT_TextInsert(self, text):
        return lambda: self.insert('%s' %(text))

    def SLOT_TextGet(self):
        text = self.text()

if __name__ == '__main__':
    app = QApplication(sys.argv)

    root = QWidget()
    text = Text(root) 
    plus = Button('+', root, text)
    minus = Button('-', root, text)
    multiple = Button('*', root, text)
    divide = Button('/', root, text)
    null = Button('0', root, text)
    dot = Button('.', root, text)
    equal = Button('=', root, text)
    clean = Button('Ce', root, text)

    layout = QGridLayout(root)
    layout.setSpacing(2)
    layout.addWidget(text, 1, 1, 1, 5)
    layout.addWidget(plus, 2, 4)
    layout.addWidget(minus, 2, 5)
    layout.addWidget(multiple, 3, 4)
    layout.addWidget(divide, 3, 5)
    layout.addWidget(clean, 4, 4, 1, 2)
    layout.addWidget(null, 5, 1, 1, 2)
    layout.addWidget(dot, 5, 3)
    layout.addWidget(equal, 5, 4, 1, 2)

    num_list = list()
    row=2; col=1
    for i in range(0,9):
        num_list.append(Button('%s' %(i+1), root, text))
        layout.addWidget(num_list[i], row, col )
        col = col+1
        if i == 2 or i == 5:
            col = 1; row = row+1

    root.resize(10,10)
    root.show()        
    sys.exit(app.exec_()) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:50:53.577

请参阅[QWidget::sizePolicy](http://doc-snapshot.qt-project.org/4.8/qwidget.html#sizePolicy-prop)：

> 类似按钮的小部件设置大小策略以指定它们可以水平拉伸，但垂直固定。

为了使按钮也垂直调整大小，您需要修改按钮的大小策略：

```
class Button(QPushButton):
    def __init__(self, text, parent, TextObject):
        super().__init__(text, parent=parent or None)
        self.setSizePolicy ( QSizePolicy.Expanding, QSizePolicy.Expanding)
        self.clicked.connect(TextObject.SLOT_TextInsert('%s' %(text))) 
```

# .net - 如何使用 IEqualityComparer 进行动态比较？

> ID：15198136
> 
> 赞同：0
> 
> 时间：2013-03-04T09:20:17.130
> 
> 标签：.net, iequalitycomparer

我有一个像这样的人类：

```
Public Class Person
{
public int Id {get; set;}
public int FirstName {get; set;}
public int LastName {get; set;}
} 
```

我创建了一个 Person 对象列表：

```
List<Person> AllPersons = GetAllPersons(); 
```

在 GetAllPersons() 中，我有这段代码，它根据 Id 提供唯一且非重复的人员对象。

```
 return this.colLoadExternalData.GroupBy(p => p, new MyClass()).Where(g => g.Count() == 1).Select(g => g.Single()).ToList(); 
```

这意味着如果源有两个 Id = 123 的人，则 123 不会出现在列表中。

这是实现 IEqualityComparer 的类

```
public class MyClass : IEqualityComparer<Person>
{
    public bool Equals(Person x, Person y)
    {
        return x.Id == y.Id;
    }

    public int GetHashCode(Person obj)
    {
        return obj.Id.GetHashCode();
    }
} 
```

MyClass 集是基于 Id 的身份。

我有一个外部配置文件，其中有一个规定来设置人员类的身份属性，如 FirstName 或 LastName 等，它将根据该属性值识别一个唯一的人。

因此，如果配置文件将“FirstName”作为键，那么 MyClass 将如下所示：

```
public class MyClass : IEqualityComparer<Person>
{
    public bool Equals(Person x, Person y)
    {
        return x.FirstName == y.FirstName;
    }

    public int GetHashCode(Person obj)
    {
        return obj.FirstName.GetHashCode();
    }
} 
```

在向字典添加人员对象之前，我实际上已经使用了一个字典，但是如果源具有重复条目（例如两个 id 为 123 的人员），它仍然会添加一个人员对象。如果这可以通过字典对象来完成，请确保最终集合确实具有唯一的对象并且不包括来自外部来源的重复记录，这将是很棒的。

我能做的是在一个单独的列表中维护一个重复列表。在该列表上做一个简单的 foreach 并从字典中删除这些人员对象，如下所示：

```
foreach(var dup in Duplicates)
{
  UniquePersonObjects.Remove(dup);
} 
```

这里没有使用 IEqualityComparer，只需将来自外部源的记录添加到字典中，然后根据重复列表进一步过滤该字典。

有一个更好的方法吗？

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-15T07:37:52.017

到目前为止我设法找到的最佳实现，您可以在[以下链接中找到](http://netmatze.wordpress.com/2012/06/21/implementing-a-generic-iequalitycomparer-and-icomparer-class/)

`public class EqualityComparer:IEqualityComparer { private Func equalsFunction; private Func getHashCodeFunction;`

 ````
public EqualityComparer(Func<T, T, bool> equalsFunction)
{
    this.equalsFunction = equalsFunction;
}

public EqualityComparer(Func<T, T, bool> equalsFunction, 
    Func<T, int> getHashCodeFunction) : this(equalsFunction)
{
    this.getHashCodeFunction = getHashCodeFunction;
}

public bool Equals(T a, T b)
{
    return equalsFunction(a, b);
}

public int GetHashCode(T obj)
{
    if (getHashCodeFunction == null)
        return obj.GetHashCode();
    return getHashCodeFunction(obj);
} 
```` 

`}`

现在您可以编写自己的过滤方法，例如：

`EqualityComparer equalityComparer = new EqualityComparer((s1, s2) => s1.Id == s2.Id);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T09:29:49.600

您可以使用配置`MyClass`来处理不同的检查：

```
public class MyClass : IEqualityComparer<Person>
{
    // here you set the configuration
    private PersonCompareConfiguration personCompareConfiguration;

    public bool Equals(Person x, Person y)
    {
        switch(personCompareConfiguration)
        {
            case CompareId:
                return x.Id == y.Id;
                break;
            case CompareFirstname:
                return x.FirstName == y.FirstName;
                break;
        }
        throw new InvalidArgumentException("personCompareConfiguration cannot be handled");
    }

    public int GetHashCode(Person obj)
    {
        switch(personCompareConfiguration)
        {
            case CompareId:
                return obj.Id.GetHashCode();
                break;
            case CompareFirstname:
                return obj.FirstName.GetHashCode();
                break;
        }
        throw new InvalidArgumentException("personCompareConfiguration cannot be handled");
    }
}

public enum PersonCompareConfiguration
{
    CompareId,
    CompareFirstname
} 
```

另一种（更智能）的方法是使用 MEF 导出`IEqualityComparer<Person>`. 看看[这个答案](https://stackoverflow.com/questions/5091183/mef-generic-imports)，它描述了如何导出和导入通用接口。

# database - 如何在数据库文件的帮助下检查条件？

> ID：15198137
> 
> 赞同：0
> 
> 时间：2013-03-04T09:20:23.320
> 
> 标签：database, vim

我有一个具有这种格式的长文本文件：

```
024 AF Ethiopia text text text text etc
021 XX Germany  text text text text etc
083 AZ India    text text text text etc
...
etc 
```

我想要做的是使用另一个文本文件
检查上述文件的大陆代码：如果不将其更改为正确的代码，请检查大陆是否正确。

我有一个文本文件，所有国家/地区都具有这种格式（大陆国家）：

```
AZ Afghanistan
EU Albania
AF Algeria
EU Andorra
AF Angola
AM Argentina
AZ Armenia
OC Australia
EU Austria
 ....
etc 
```

这在 Vim 中可行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:06:43.237

为了以可重复的方式和完全自动化的方式解决这个问题，我会编写一个小的*Perl*（或*AWK*）脚本，因为这些专用语言比 Vimscript 更适合（尽管在那里也有可能！）

但是，对于一个快速的一次性操作，我会组装一个匹配所有不匹配行的搜索模式，如下所示：

```
/^\%(.*\<\%(<C-r>=join(readfile('database.txt'),'\|')<CR>\)\>\)\@!.*$<CR> 
```

这会读入`database.txt`文件并创建每行一个分支的正则表达式，匹配整个单词`\<...\>`，并使用`\@!`仅匹配不包含读入分支之一的行。之后，所有错误的行都应突出显示，您可以使用`n`它们来查看并更正它们（手动，尽管您可以`:help i_CTRL-X_CTRL-T`在此处使用词库完成 ( )）。

# java - 集合框架上的动态转换效果

> ID：15198138
> 
> 赞同：0
> 
> 时间：2013-03-04T09:20:25.290
> 
> 标签：java, performance, generics, casting, dynamic-cast

案例一：

```
List<String> MyList;
while(index<100) {
    MyList = MyObject.get(MyIndex);
} 
```

案例B：

```
List MyList;
while(index<100) {
    MyList = (List<String>) MyObject.get(MyIndex);
} 
```

以上哪个会更快？

在案例 B 中，我假设动态转换发生在整个循环中。所以，我的假设是第二个可能比第一个慢。

请说哪一个可以让我更快？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:32:53.220

两者的性能应该相同。第一个版本确实创建了 JVM 强制转换指令，但它是由编译器隐式添加的。在这两种情况下，运行时操作都是转换为 List。泛型类型在运行时不保留。

您可以通过检查字节码来验证这一点，这在两个版本中应该是相同的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T09:33:09.527

Java 泛型是一种编译时抽象。没有证据表明它们留在字节码中。它们只是简化了开发，但不影响性能。在字节码中，您的第一个代码示例看起来与第二个完全相同。Javac 只会为您插入强制转换。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T09:40:32.680

首先，泛型是一个编译时特性。Java 运行时与泛型无关。我建议您使用案例 A，因为您始终确定 List 将仅包含 String 对象而没有其他内容。这将帮助您在运行时避免 ClassCastException，因为您始终确信 List 将只包含 String 对象而没有其他任何内容。

我认为这两种方法都需要相同的执行时间，因为这两种情况下 java 运行时已知的 List 对象是相同的（List MyList;）。案例 A：列出 MyList；将作为 List MyList 传递给 JVM，这与案例 B 相同。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-19T20:35:12.890

一旦你得到了它们的字节码，你会发现它们都是一样的。`So there is no change of performance in both of them .`

# html - html5中动态添加内容的画布垂直滚动条

> ID：15198139
> 
> 赞同：1
> 
> 时间：2013-03-04T09:20:32.743
> 
> 标签：html, scrollbar, easeljs

我有一个高度为 480 的画布。我正在使用 Easeljs 在 canvas 中加载图像。每行包含 3 张图像。加载超出画布（480）高度的图像被隐藏。我需要添加垂直滚动条来查看这些图像。我该如何实现这一点。

谢谢，
沙迪亚

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T20:08:01.197

以下是如何向画布添加垂直滚动条，允许在更大的图像上向上/向下滚动：http: [//jsfiddle.net/m1erickson/a9KDB/](http://jsfiddle.net/m1erickson/a9KDB/)

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>

<style>
body{ background-color: ivory; }
div, canvas {
    position:absolute;
}
.wrapper {
    top:10px;
    left:10px;
    width: 300px;
    height: 300px;
    border: 2px solid black;
    margin:30px 0 2;
    overflow: hidden;
    background-color:green;
}
.vertical-scroll {
    left:320px;
    top:10px;
    border: 1px solid green;
    width: 20px;
    height: 300px;
}
.vertical-scroll div.bar {
    left:0px;
    top:0px;
    width: 20px;
    background-color: blue;
    height: 20px;
}
#mycanvas {
    left:0px;
    top:0px;
}

</style>

<script>
    $(function(){

        var canvas=document.getElementById("mycanvas");
        var ctx=canvas.getContext("2d");

        var wrapper;
        var canvasHeight;
        var vScrollHeight;
        var canvasWrapperHeight=300;

        $(".bar").draggable({
            containment: "parent"
        });

        $(".bar").on("drag", function (event, ui) {
            var ctop=(-ui.position.top * canvasHeight / canvasWrapperHeight);
            canvas.style.top = ctop + "px"
        });

        var img=new Image();
        img.onload=function(){
          canvas.width=this.width;
          canvas.height=this.height;
          canvasHeight=this.height;
          vbarHeight=canvasWrapperHeight*canvasWrapperHeight/canvasHeight;
          document.getElementById("vbar").style.height=vbarHeight+"px";
          ctx.drawImage(this,260,0,300,this.height,0,0,300,this.height);
        }
        img.src="http://sciencedude.blog.ocregister.com/files/2008/02/zot1-copy.jpg";

    }); // end $(function(){});
</script>

</head>

<body>
    <div class="wrapper" id="wrap1">
        <canvas id="mycanvas" width="300px" height="300px" />
    </div>
    <div class="vertical-scroll" id="vscroll">
        <div class="bar" id="vbar"></div>
    </div>
 </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-11T00:52:25.117

用 div 包裹画布，然后为 div 设置高度，最后将属性应用到 div `overflow-y:auto` 。`overflow-x: hidden`

`overflow-y:auto` 需要时显示垂直滚动条 `overflow-x: hidden`隐藏水平滚动条

[http://jsfiddle.net/V92Gn/3509/](http://jsfiddle.net/V92Gn/3509/)

```
 <div style="height:200px;width:480px; overflow-y:auto;overflow-x: hidden;">
      <canvas id="canvas" style="background:navy" width="480" height="820"></canvas>
    </div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T15:33:24.870

我不知道 EaselJS 的任何 ScrollBar-Solutions 并且不可能通过 HTML 做到这一点。所以你必须编写你自己的滚动条，如果你有问题，应该有相当多的教程可以在线找到ActionScript3，你可以很容易地适应EaselJS。

另一种选择是扩展画布本身的高度并向其父容器添加滚动条，但我不确定这是否是一个非常好的解决方案。

# linux - 是否有一种标准方法可以知道窗口是浮动的还是平铺的？

> ID：15198140
> 
> 赞同：1
> 
> 时间：2013-03-04T09:20:34.980
> 
> 标签：linux, window-managers, ewmh, icccm

我正在修改任务栏以仅显示浮动或最小化的窗口。我知道有**ICCCM**和**EWMH**标准。我可以使用它们来检查窗口是浮动的还是平铺的？或者还有什么我可以使用的吗？

我不想专门为窗口管理器做这件事，因为我即将切换到另一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-15T10:29:13.397

不，浮动/平铺不是 EWMH 或 ICCCM 定义的。

# sql - 在 pl/sql 脚本中切换用户会话

> ID：15198144
> 
> 赞同：0
> 
> 时间：2013-03-04T09:20:36.800
> 
> 标签：sql, oracle, plsql

```
 set serveroutput on;
   declare
    username1 varchar2(40);
   cnt number;
    hello varchar2(20);
    c sys_refcursor;
    begin
    select sys_context('userenv','session_user') into username1 from dual;
     select lower(username1) into username1 from dual;
     select count(lower(username)) into cnt from karuna.tableusers where        lower(username)=username1;
     if cnt=1 then
     dbms_output.put_line('username found');
      execute immediate 'connect karuna/password ';
     open c for 'select item_name  from sells12 where item_id=12';
      fetch c into hello;
      dbms_output.put_line(hello);
      close c;
     else
     dbms_output.put_line('u dont have previllege to access database');
      ----raise_application_error(-20001,'error out');
       end if;
       end;

/ 
```

我想切换会话用户，但在连接 karuna/karuna 线路时出现错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:49:18.780

查看 Oracle 的特性 n 层（代理）身份验证。也许这不是你需要的。Oracle 为您提供：

*   n 层认证
*   设置角色声明（从密码“受保护”角色中获得更多特权）
*   更改会话集 current_schema=KARUMA。这不会切换您的用户名/权限，而是切换默认架构。

正确的选择实际上取决于您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T09:04:21.347

您必须授予 dba 权限才能从您的用户连接到 KARUMA 用户或 CONNECT 权限。

请点击此链接 [http://docs.oracle.com/cd/B28359_01/java.111/b31224/proxya.htm](http://docs.oracle.com/cd/B28359_01/java.111/b31224/proxya.htm)

# jquery - 动画在wordpress中不起作用

> ID：15198147
> 
> 赞同：0
> 
> 时间：2013-03-04T09:20:44.087
> 
> 标签：jquery, wordpress, animation, hover

我正在努力实现一个简单的 jquery 动画，该动画在我所做的另一个网站上完美运行。我所做的唯一更改是希望将动画影响到与选择器不同的对象（希望我正确使用了这些术语）。奇怪的是，即使我测试使用与前一个站点完全相同的场景，我也没有得到任何结果。

谁能看到一些明显的原因这不起作用？

这是我的jQuery：

```
jQuery(document).ready(function($){
    $(".themelist li").hover(
        function () {
            $(".themedescription").animate({opacity:"1"});
        },
        function () {
            $(".themedescription").animate({opacity:'0'}, "fast");
        }
    );  
}); 
```

这是我的循环（wordpress）：

```
echo "<div class='themelist'><ul>";
foreach ( $terms as $term ) {
    echo "<li>" . $term->name ."</li><div class='theme-description'>". $term->description. "</div>";
}
echo "</ul></div>"; 
```

这是我的CSS：

```
.themelist {
position: relative;
cursor: pointer;
}

.themelist li {width:200px;}

.theme-description {
text-align: left;
color: #CCC;
background: #333;
width:300px;
position: absolute;
padding: 20px;
top:0;
left:200px;
opacity:0;
} 
```

想法？到处搜索，无法弄清楚我哪里出错了。

***更新***

进步了，现在又遇到了一个全新的问题。以下调整后的 jquery finallyw 可以使我的动画运行：

```
$(document).ready(function()
{
$(".themelist li").hover(function()
    {
$(".themedescription").filter(':not(:animated)').animate({opacity:"1"});
    },
(function()
    {
$(".themedescription").animate({opacity:"0"});
    }
)); 
}); 
```

但是你可以想象，不是div一个一个出现，每个对应我列表中的链接，它们都是同时出现的。嘎。我应该已经看到了这一点，但有点假设它的行为类似于 CSS display:none，并且一次只显示一个。

我可以使用另一种效果来解决这个问题吗？还是我需要生成单独的类，以便我的 div .themedescription 变为 .themedescription1、.themedescription2 等？

再次感谢。感谢您的想法。-珍妮布

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T09:24:50.050

`.themedescription`在 jQuery 代码上是针对 html/wordpress 代码的拼写错误...

请`.theme-description`在您的 jQuery 代码上使用....与破折号...

# python - python sqlalchemy - 将表映射到某个数据结构

> ID：15198149
> 
> 赞同：1
> 
> 时间：2013-03-04T09:20:46.930
> 
> 标签：python, sqlalchemy

我有一个用关系定义的表，我注意到即使我没有在查询中使用*联接*，仍然会检索到信息：

```
class Employee(Base):
    __tablename__ = "t_employee"

    id = Column(Identifier(20), Sequence('%s_id_seq' % __tablename__), primary_key=True, nullable=False)
    jobs = relationship("EmployeeJob")
    roles = relationship("EmployeeRole")

class EmployeeJob(Base):
    __tablename__ = "t_employee_job"

    id = Column(Integer(20), Sequence('%s_id_seq' % __tablename__), primary_key=True, nullable=False)
    employee_id = Column(Integer(20), ForeignKey('t_employee.id', ondelete="CASCADE"), primary_key=True)
    job_id = Column(Integer(20), ForeignKey('t_job.id', ondelete="CASCADE"), primary_key=True)

class EmployeeRole(Base):
    __tablename__ = "t_employee_role"

    id = Column(Integer(20), Sequence('%s_id_seq' % __tablename__), primary_key=True, nullable=False)
    employee_id = Column(Integer(20), ForeignKey('t_employee.id', ondelete="CASCADE"), nullable=False)
    location_id = Column(Identifier(20), ForeignKey('t_location.id', ondelete="CASCADE"))
    role_id = Column(Integer(20), ForeignKey('t_role.id', ondelete="CASCADE"), nullable=False) 
```

`session.query(Employee).all()`还检索角色和作业，但通过查询每行的数据库来实现。

我对这种情况有两个问题：
1\. 在性能方面，我想我应该自己*加入*。我对么？
2.如何将表映射到某个数据结构？例如，我想获取具有角色的员工列表，其中每个角色应由位置 ID 和角色 ID 的数组表示，例如`{id:1, jobs:[1,2,3], roles:[[1,1],[1,2],[2,3]]}`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T09:45:57.143

**1)**请阅读SA 文档中的[Eager Loading](http://docs.sqlalchemy.org/en/rel_0_8/orm/tutorial.html#eager-loading)。默认情况下，关系在首次访问时会延迟加载。在您的情况下，您可以使用例如[Joined Load](http://docs.sqlalchemy.org/en/rel_0_8/orm/tutorial.html#joined-load)，以便将相关行加载到同一查询中：

```
qry = (session.query(Employee).
       options(joinedload(Employee.jobs)).
       options(joinedload(Employee.roles))
      ).all() 
```

如果您希望在加载 an 时始终加载这些关系`Employee`，您可以将 配置[`relationship`](http://docs.sqlalchemy.org/en/rel_0_8/orm/relationships.html#sqlalchemy.orm.relationship)为自动加载：

```
class Employee(Base):
    # ...
    jobs = relationship("EmployeeJob", lazy="joined")
    roles = relationship("EmployeeRole", lazy="subquery") 
```

**2）**只需创建一个方法来从您的查询中提取数据结构。像下面这样的事情应该这样做（使用`qry`答案的第一部分）：

```
def get_structure(qry):
    res = [{"id": e.id, 
            "jobs": [j.id for j in e.jobs],
            "roles": [[r.location_id, r.role_id] for r in e.roles],
            }
            for e in qry
            ]
    return res 
```

* * *

*另请注意：您的`EmployeeJob`表格有 fun `primary_key`，其中包括`id`列和两`ForeignKey`列。我认为你应该选择其中之一。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T12:16:57.733

我终于找到了完成第二个问题的方法，并决定为他人的利益回答我自己的问题：

```
from sqlalchemy.ext.hybrid import hybrid_property

class Employee(Base):
    __tablename__ = "t_employee"

    id = Column(Identifier(20), Sequence('%s_id_seq' % __tablename__), primary_key=True, nullable=False)
    _jobs = relationship("EmployeeJob", lazy="joined", cascade="all, delete, delete-orphan")
    _roles = relationship("EmployeeRole", lazy="joined", cascade="all, delete, delete-orphan")

    @hybrid_property
    def jobs(self):
        return [item.employee_id for item in self._jobs]

    @jobs.setter
    def jobs(self, value):
        self._jobs = [EmployeeJob(job_id=id) for id in value]

    @hybrid_property
    def roles(self):
        return [[item.location_id, item.role_id] for item in self._roles]

    @roles.setter
    def roles(self, value):
        self._roles = [EmployeeRole(location_id=l_id, role_id=r_id) for l_id, r_id in value] 
```

关系中的级联是为了确保一旦更新列表就删除孤儿，装饰器定义每个复杂属性的getter和setter

谢谢面包车给我指出正确的方向！

# php - $_SESSION 变量不在文件之间传递

> ID：15198152
> 
> 赞同：0
> 
> 时间：2013-03-04T09:20:58.207
> 
> 标签：php, session

我有一个将用户详细信息放入会话变量的登录脚本。今天我把网站搬到了一个新的主机上，现在我的编码不起作用。这是我能做的最好的，但它仍然不起作用

main_login.php：

```
(script above here gets all the $info from the database. So far it is working)
if($count==1){
    session_start();
    $_SESSION['username'] = $info['username'];
    $_SESSION['given'] = $info['given_name'];
    $_SESSION['family'] = $info['family_name'];
    $_SESSION['profile'] = $info['profile'];
    $_SESSION['adultchild'] = $info['adultchild'];
    $_SESSION['id'] = $info['id'];
    header("location:welcome.php");
} 
```

欢迎.php：

```
// Check if session is not registered , redirect back to main page. 
// Put this code in first line of web page. 
session_start();
if(!isset($_SESSION['username'])){
    header("location:main_login.php");
} 
```

问题是当我打印任何会话变量时，什么都没有发生。我什至尝试过做 a`var_dump($_SESSION)`但它作为一个空数组出现。坦率地说，我花了一整天的时间在这上面，并且被卡住了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:21:28.817

```
session_start();
if(!isset($_SESSION['username']));
    header("location:main_login.php");
} 
```

改成：

```
session_start();
if(!isset($_SESSION['username'])){
//                               ^ typing mistake
    header("location:main_login.php");
} 
```

# c# - 在 WinRT 中将超时附加到异步请求

> ID：15198156
> 
> 赞同：0
> 
> 时间：2013-03-04T09:21:05.473
> 
> 标签：c#, exception-handling, windows-runtime, async-await, dotnet-httpclient

我正在使用这段代码将 TimeOut 附加到我正在发出的请求调用中，以确保我们不会遇到缓慢的互联网连接 - 并且处理得当。
当我满足超时条件时，我收到一条错误消息，我无法在扩展函数中修复。

一般如何完成这项任务？

代码：

```
public static class SOExtensions
{
    public static Task<T> WithTimeout<T>(this Task<T> task, TimeSpan duration)
    {
        return Task.Factory.StartNew(() =>
        {
            bool b = task.Wait(duration);
            if (b) return task.Result;
            return default(T);
        });
    }
} 
```

用法：

```
var response = await HttpWebRequest
                     .Create(request)
                     .GetResponseAsync()
                     .WithTimeout(TimeSpan.FromSeconds(1)); 
```

我处理`AggregateException`这个（并通过 a `WebException`），但它仍然`AggregateException`在超时失败时生成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T13:10:28.393

我建议使用`CancellationToken`for timeouts ( `new CancellationTokenSource(myTimeSpan).Token`)，然后您可以*在*您的`async`方法中使用它（例如， for `HttpClient`，您将令牌传递给`GetAsync`方法）。这占用的资源更少，因为 HTTP 请求本身被取消了。

但是，如果您想要“外部”超时，更自然的方法是：

```
public static async Task<T> WithTimeout<T>(this Task<T> task, TimeSpan duration)
{
  var timeout = Task.Delay(duration);
  var completeTask = await Task.WhenAny(task, timeout);
  if (completeTask == timeout)
    return default(T);
  else
    return await task;
} 
```

这将防止异常被包装到一个`AggregateException`. 但是，它的效率不如这种`CancellationToken`方法，它看起来像这样：

```
var timeout = new CancellationTokenSource(TimeSpan.FromSeconds(1));
var response = await new HttpClient().GetAsync(uri, timeout.Token); 
```

请注意，如果超时，该`CancellationToken`方法将抛出`OperationCanceledException`而不是返回 a 。`default(T)`

# javascript - 如何获取表格行和列的内容

> ID：15198160
> 
> 赞同：1
> 
> 时间：2013-03-04T09:21:17.797
> 
> 标签：javascript, jquery, html-table

谁能告诉我如何计算表格列和表格行并获取每个单元格的 id、属性和内容（单元格是 contenteditable）。我必须使用哪些工具？

例如

```
<table>
<tbody>
<tr>
 <td id='1A' rowspan=2>Rowspan 2</td>
 <td id='1B'>22222</td>
 <td id='1C'>33333</td>
</tr>
 <tr>
   <td id='2B' colspan='2'> Colspan2</td>      
</tr>
<tr>
 <td id='3A' style='color:red'>Whaterver</td>
 <td id='3B' style='font-weight:bold'>Askyourmother</td>
 <td id='3C'>sigh</td>
</tr>
</tbody>
</table> 
```

我正在使用 Jquery (Javascript)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:24:52.393

您可以使用`jQuery.`

**要获得所有 tr，请按如下方式使用它。**

```
var count = $('table tr').length; 
```

以上将输出`count`所有 tr 内表。

**获取`DOM`使用的ID属性`.attr()`**

```
var tableID = $('table').attr('id'); 
```

上面将输出`ID`.`DOM`

**获取`DOM`使用中的文本`.text()`或`.html()`**

```
var text = $('table tr td').text();
var html = $('table tr td').html(); 
```

以上将输出`HTML or TEXT`选定的内部`DOM`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T09:38:33.837

你可以使用 jQuery 来获取它，然后用它做任何你想做的事情。在这种情况下，我只是在控制台中打印它。

```
//for each TR...
$('table tr').each(function(){

    //for each TD....
    $(this).find('td').each(function(){
         console.log($(this).text());  //do whatever you want with the text
         console.log($(this).attr('id'));  
         console.log($(this).attr('any_other_attribute'));  
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T09:39:27.730

用于`length`计算 tr 并`each`获取 id 和内容。

```
var table=$('table tr');
var trCount=  table.length;  //count tr
alert('trcount='+trCount);

  $('table tr td').each(function(){
       var tdID=$(this).attr('id'); //get id
       var tdcontent=$(this).text(); //get content
    alert('id='+tdID);  
    alert('content='+tdcontent);  
   }) ; 
```

[在这里摆弄](http://jsfiddle.net/bipen/8EHct/)

# android - 在 Android 应用程序中嵌入街景

> ID：15198163
> 
> 赞同：0
> 
> 时间：2013-03-04T09:21:42.853
> 
> 标签：android, google-maps, jquery-mobile

我想了解在 Android 应用程序中嵌入街景的可能性。为了更好地理解，我粘贴了一个屏幕截图。是否需要flash player，如果可以，是否可以实现？![在此处输入图像描述](../Images/a9f00db579ac51acdc157379a5544b1d.png)

我可以使用 Android 的 WebView 来显示地图和方向，但无法在顶部小部件上显示街景。请帮助我理解这种可能性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:27:27.443

是的，您可以先使用 flash 包名称检查您的设备中是否安装了 flash 播放器

```
 boolean status = false;

    try {
        PackageManager pm = FreeScrollView.mContext.getPackageManager();
        ApplicationInfo ai = pm.getApplicationInfo("com.adobe.flashplayer", 0);
        if (ai != null)
            status = true;
    } catch (NameNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
                     status=false;
    } 
```

如果未安装 Flash Player，请使用此链接下载 Flash Player，然后重试 ( [http://helpx.adobe.com/flash-player/kb/archived-flash-player-versions.html](http://helpx.adobe.com/flash-player/kb/archived-flash-player-versions.html) )

# c# - 如何在Windows Phone中使用隔离存储传递数据到后台代理？

> ID：15198170
> 
> 赞同：3
> 
> 时间：2013-03-04T09:22:10.357
> 
> 标签：c#, windows-phone

[我在主应用程序和定期任务之间共享数据](https://stackoverflow.com/questions/11390084/share-data-between-main-app-and-periodic-task)中找到了以下编码，但它无法工作并出现错误。

任何想法或帮助？

在主页

```
using System.IO.IsolatedStorage;
using System.Threading;

    using (Mutex mutex = new Mutex(true, "MyData"))
    {
        mutex.WaitOne();
        try
        {
            IsolatedStorageSettings.ApplicationSettings["order"] = 5;
        }
        finally
        {
            mutex.ReleaseMutex();
        }
    } 
```

在代理中：

```
using (Mutex mutex = new Mutex(true, "MyData"))
{
    mutex.WaitOne();
    try
    {
        order = (int)IsolatedStorageSettings.ApplicationSettings["order"];
    }
    finally
    {
        mutex.ReleaseMutex();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-26T06:02:35.610

我想建议你，你可以为这个任务使用一个单独的库项目，它会注意在两个应用程序之间进行通信；例如前台和后台应用程序。

您的应用程序中必须有三个项目。

1）UI Aapplication（前台应用）

2）项目库（隔离通信[Rear/Write]操作）

3）后台代理应用程序。

在此处查看下图以清除。

![架构图](../Images/fed1c0ad7ed2eb2221ebb795418d2fbd.png)

![在此处输入图像描述](../Images/af867ed97afaece28d9bcb4759a2097b.png) 希望能帮助到你

# php - 更改 codeigniter 默认 url 格式

> ID：15198177
> 
> 赞同：0
> 
> 时间：2013-03-04T09:22:33.777
> 
> 标签：php, codeigniter, routing

codeigniter 的默认 url 格式是`controller/function/params`. 我可以将其更改为`params/controller/function`或`controller/params/function`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:24:21.867

您应该为您希望拥有的 uri 方案添加路由：http: [//ellislab.com/codeigniter/user-guide/general/routing.html](http://ellislab.com/codeigniter/user-guide/general/routing.html)

# jqgrid - JQGrid：默认选中所有复选框

> ID：15198180
> 
> 赞同：0
> 
> 时间：2013-03-04T09:22:49.453
> 
> 标签：jqgrid, default, checkbox, checked

在 JQGrid 中添加以下内容后：-

## 楷模

```
{name: 'checkbox', index: 'checkbox', width:"5%", formatter: "checkbox", formatoptions: { disabled: false } }, 
```

## 列

“选择”

JQGrid 显示的列具有正确的复选框，但默认情况下所有复选框都被选中，这是不期望的。

我不确定这是否是 JQGrid 复选框列的默认行为。我不想显示默认选中的所有复选框。如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:05:12.553

默认情况下，复选框是**未选中的**。您可以使用`defaultValue`属性`formatoptions`来更改默认值：

```
formatoptions: {defaultValue: "yes"} 
```

顺便说一下，jqGrid 不支持`width`in % (like ) 的设置。`width:"5%"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-27T06:31:09.947

同样的问题：

{**名称：“id”**，**索引：“id”**，宽度：“110”，隐藏：真}，

{ **name: 'id'** , width: "100", **index: 'id'** , key: true, editable: true, edittype: 'checkbox', editoptions: { value: 'Yes:No'} formatter: "checkbox",格式选项：{禁用：假}}，

我遇到了同样的问题，我解决了它...这是解决方案...您必须对两列使用相同的名称和索引。更正的代码：

{**名称：“id”**，**索引：“id”**，宽度：“110”，隐藏：真}，

{ **name: 'checkbox'** , width: "100", **index: 'checkbox'** , key: true, editable: true, edittype: 'checkbox', editoptions: { value: 'Yes:No'} formatter: "checkbox",格式选项：{禁用：假}}，

# java - 根据报表中的变量显示不同的标题

> ID：15198181
> 
> 赞同：1
> 
> 时间：2013-03-04T09:22:54.317
> 
> 标签：java, jasper-reports

我的公司正在从 Microsoft RS 切换到 Jasper 报告，因此我们正在将报告转换为 jasper，这些报告通常有多个标题，这些标题根据传递的参数显示。在 RS 中，当您隐藏行时，整个表格会向上跳，没有空的空间。JR是怎么做到的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:52:42.533

在 Jasper 中有一个名为**Print When Expression**的属性，我认为它会对您有所帮助

# c# - 通过 asp.net 发送电子邮件

> ID：15198182
> 
> 赞同：0
> 
> 时间：2013-03-04T09:23:02.523
> 
> 标签：c#, asp.net, email

这是我的设计页面：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="register.aspx.cs" Inherits="register" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
    <table style="border:1px solid" align="center">
    <tr><td>Username:</td><td><asp:TextBox runat="server" ID="txtUsername"></td></tr>
    <tr><td>Password:</td><td><asp:TextBox runat="server" ID="txtPassword" TextMode="Password"></td></tr>
    <tr><td valign="top">Address:</td><td><asp:TextBox runat="server" ID="txtAdress" TextMode="MultiLine"></td></tr>
    <tr><td>Email-id:</td><td><asp:TextBox runat="server" ID="txtEmail"></td></tr>
    <tr><td colspan="2" align="center"><asp:Button runat="server" ID="btnRegister" 
            Text="Register" onclick="btnRegister_Click" /></td></tr>
    </table>

    </div>
    </form>
</body>
</html> 
```

这是我的代码页：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Net.Mail;

public partial class register : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }
    protected void btnRegister_Click(object sender, EventArgs e)
    {
        MailMessage msg = new MailMessage();
        msg.To.Add(txtEmail.Text);
        msg.From = new MailAddress("mysiteadmin@peers");
        msg.Subject="thanks for registraion";
        msg.Body="thanks for registraion";
        SmtpClient obj = new SmtpClient();
        obj.Host = "sri";obj.Send(msg);
        Response.Write("<h2>Registered</h2>");

    } 
```

}

```
Here am getting an error below.... can you please help 
```

> 服务不可用，正在关闭传输通道。服务器响应为：无法连接到 SMTP 服务器 100.64.243.189 (100.64.243.189:25)，连接错误 10061 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。异常详细信息：System.Net.Mail.SmtpException：服务不可用，正在关闭传输通道。服务器响应为：无法连接到 SMTP 服务器 100.64.243.189 (100.64.243.189:25)，连接错误 10061

```
Source Error: 
Line 21:         msg.Body="thanks for registraion";
Line 22:         SmtpClient obj = new SmtpClient();
Line 23:         obj.Host = "sri";obj.Send(msg);
Line 24:         Response.Write("<h2>Registered</h2>");
Line 25: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:26:12.663

1.  确保您有一个 smtp 服务器设置。在 web.config 中添加 smtp 服务器信息。然后试试这个。

您需要提及 smtp 服务器 url 和端口号。[表面贴装](http://msdn.microsoft.com/en-us/library/k0y6s613.aspx)

```
 SmtpClient obj = new SmtpClient(yourSmtpServerURL);
 NetworkCredential myCreds = new NetworkCredential("youremail@gmail.com", "YourPassword", "");           
            obj.Credentials = myCreds; 
```

然后现在打电话`obj.send`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T09:30:17.773

可能有两个原因：

1.  这通常是由于尝试连接到在外部主机上不活动的服务造成的。

2.  有时 10061 错误是由本地计算机或网络连接上存在防火墙或防病毒软件引起的。

任何一个都可能阻止成功连接到服务器所需的端口。要么您访问了错误的主机，要么您尝试联系的服务器应用程序没有执行。检查您使用的目标地址。检查，如果您使用了主机名，它是否解析为正确的地址..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T09:27:39.817

确保在 Web 配置文件上设置 smtp

```
<system.net>
<mailSettings>
  <smtp>
    <network host="smtp@server" port="25" userName="user" password="password" defaultCredentials="true" />
  </smtp>
</mailSettings>
 </system.net> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T09:29:24.890

您可以在 web.config 中应用 SMTP 设置，方法是将此部分放入：

```
 <system.net>
    <mailSettings>
      <smtp deliveryMethod="Network" from="...">
        <network host="smtp.gmail.com" port="587" defaultCredentials="false" userName="" password="" enableSsl="true" />
      </smtp>
    </mailSettings>
  </system.net> 
```

此示例显示 Gmail SMTP 服务器的配置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T09:29:53.357

```
System.Net.Mail.MailMessage message = new System.Net.Mail.MailMessage();
message.Subject = "Title";
message.From = new System.Net.Mail.MailAddress(yourEmailExpeditor);
message.Body = "content message here";

//Initialize the smtp
System.Net.Mail.SmtpClient smtp = new System.Net.Mail.SmtpClient(adress,int.Parse(port));
//Send the message
smtp.Send(message); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-04T09:39:14.233

您必须提供凭据..检查以下代码一次

```
 MailAddress to = new MailAddress("Email Id");

        MailAddress from = new MailAddress("Email Id");

        MailMessage mail = new MailMessage(from, to);

        mail.Subject = "";
        mail.Body = "";

        SmtpClient smtp = new SmtpClient();
        smtp.Host = "smtp.gmail.com";
        smtp.Port = 587;

        smtp.Credentials = new NetworkCredential(
            "Email Id", "Password");
        smtp.EnableSsl = true;

        smtp.Send(mail); 
```

您必须添加以下命名空间

```
using System.Net.Mail;
using System.Net; 
```

# php - GROUP BY mysql 只显示一行。但也想要重复

> ID：15198185
> 
> 赞同：4
> 
> 时间：2013-03-04T09:23:42.837
> 
> 标签：php, mysql, database

我的表结构是

```
id  order_id  location time    date
 1   951        x              2/03/2013
 2   951        x      13:00   2/03/2013
 3   951        y              3/03/2013 
```

我想在 php 中显示这些，并按日期分组，例如

```
Date 2/03/2013
Orderid 951 location x
Orderid 951 location x

Date 3/03/2013
Orderid 951 location y 
```

我正在执行的mysql查询是

```
select * from table where order_id=951 GROUP BY date ORDER BY id ASC 
```

但是这个查询只返回相同数据的第一行。我如何按日期类别显示所有重复。如何在 php 中使用它通过将日期作为单独的变量来显示数据。

我正在编辑问题，让您知道日期可以是我只想按组中的日期显示订单 ID 的任何内容，包括重复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:26:09.520

如果要显示表中的所有行，最好`ORDER BY date, id`在 PHP 中进行分组。

```
$result = mysql_query("select * from table ORDER BY data ASC,id ASC");
$last_date = "";
while(($row=mysql_fetch_assoc($result)))
{
    if($last_date != $row['date'])
    {
        echo "Date " . $row['date'] . "\n";
    }
    echo "Orderid ". $row['order_id']." location " . $row['location']. "\n";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T09:30:49.853

使用`STR_TO_DATE()`按日期排序的功能

```
$result = mysql_query("select * from table ORDER BY STR_TO_DATE(date, '%d/%m/%Y') ASC, id ASC");
$last_date = "";
while(($row=mysql_fetch_assoc($result)))
{
    if($last_date != $row['date'])
    {
        echo "Date " . $row['date'] . "\n";
    }
    echo "Orderid ". $row['order_id']." location " . $row['location']. "\n";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T09:34:15.290

```
select * from table where order_id=951 ORDER BY date DESC, id ASC 
```

然后从 PHP 操作

Order By 不会返回分组内的行。如果您真的想使用 sql，那么您可以尝试使用 GROUP_CONCAT 将分组的行值作为连接字符串返回，然后将其从 PHP 中拆分出来。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T10:05:33.707

由于您的表拥有该`time`列，也许您应该在查询中考虑，顺序默认为升序，因此您可以跳过写作`asc`。

```
select * from table where order_id=951 order by date,time,id; 
```

您可以创建一个全局 php 变量来存储您读取的当前日期，在 while 循环中每次进行比较，如果它与全局变量不同，则打印一些内容以与最后一组分开。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T09:41:10.530

另一种解决方案是使用`GROUP_CONCAT`：

`select date,group_concat("Location " , location, "\n") from table where order_id=951 GROUP BY date ORDER BY id ASC`

# sql-server - t-sql udf 返回任何给定表中一行的串联字段值

> ID：15198186
> 
> 赞同：1
> 
> 时间：2013-03-04T09:23:44.977
> 
> 标签：sql-server, tsql, user-defined-functions, dynamic-sql, sp-executesql

我正在寻找一个函数，其中传递了一个表名和一个 id 值，并且该过程返回一个字符串，其中包含该指定行的所有字段值。所有可以引用的表都有一个名为“Id”的字段。我发现了其他可以连接表中指定行的示例，但一直无法找到动态指定表的方法。下面是我在这里找到的最接近的例子：

[TSQL：一行中所有字段的值到一个字符串中](https://stackoverflow.com/questions/7145485/tsql-values-of-all-field-in-a-row-into-one-string)

```
CREATE FUNCTION udf_GetTableValues (@TableName varchar(MAX) = '',@Id int = 0)
    RETURNS varchar(MAX)
AS
BEGIN
  DECLARE @returnVal varchar(MAX)

  SELECT @ReturnVal = ''
  SELECT @ReturnVal = @ReturnVal 
         + ' // ' 
         + T2.N.value('local-name(.)', 'nvarchar(128)')
         +': '
         + T2.N.value('.', 'nvarchar(max)')
    FROM (SELECT *
            FROM Branch 
           WHERE ID = 1
             FOR XML PATH(''), type) as T1(X)
   CROSS APPLY T1.X.nodes('/*') as T2(N)

  RETURN @ReturnVal  
END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T17:42:09.357

首先，您必须了解 SQL Server 拒绝在函数中允许动态 SQL 的事实。这很不幸，但这是您必须解决的限制。

这是一种在表的每一行上应用动态 SQL 逻辑的技术

*   创建一个临时表来保存动态 SQL 的所有输入参数以及预期结果
*   创建一个已经期望临时表存在的存储过程，并循环应用动态 SQL 逻辑的临时表的行
*   将要评估的数据添加到临时表
*   执行你的动态 SQL 过程
*   享受您的预期结果:-)

1）让我们从设置一些测试数据开始。

```
 -- ====================================================================
    -- BEGIN: Setup test data
    -- ====================================================================
    IF OBJECT_ID('Branch', 'U') IS NOT NULL DROP TABLE Branch;
    IF OBJECT_ID('Branch2', 'U') IS NOT NULL DROP TABLE Branch2;
    GO
    CREATE TABLE Branch (
        ID      int
       ,Column1 varchar(20)
       ,Column2 varchar(20)
       ,Column3 varchar(20)
    )
    CREATE TABLE Branch2 (
        ID      int
       ,Column1 varchar(20)
       ,Column2 varchar(20)
       ,Column3 varchar(20)
    )
    SET NOCOUNT ON
    INSERT Branch SELECT 1, 'Hello', 'World', 'I write SQL'
    INSERT Branch SELECT 2, 'I like', 'it to be', 'complicated'

    INSERT Branch2 SELECT 1, 'Hello', 'World', 'I write SQL'
    INSERT Branch2 SELECT 2, 'I like', 'it to be', 'complicated'
    SET NOCOUNT OFF
    GO
    -- ====================================================================
    -- END: Setup test data
    -- ==================================================================== 
```

2) 接下来，我们将创建一个处理动态 SQL 的 proc。

```
 -- ====================================================================
    -- BEGIN: Proc with dynamic SQL logic
    -- ====================================================================
    IF OBJECT_ID('prcReturnTableData', 'P') IS NOT NULL DROP PROCEDURE prcReturnTableData;
    GO
    CREATE PROCEDURE prcReturnTableData 
    AS

    DECLARE @SQL                    nvarchar(MAX)
           ,@ParameterDefinitions   nvarchar(MAX)
           ,@TableName              varchar(128)
           ,@ID                     int
     SELECT @ParameterDefinitions   = '@ID int'      

    DECLARE @idx int
     SELECT @idx = MIN(idx) FROM #Result

    WHILE @idx IS NOT NULL
      BEGIN
        SELECT @TableName = TableName
              ,@ID        = ID
          FROM #Result
         WHERE idx = @idx

        SELECT @SQL = '
            DECLARE @ReturnVal varchar(MAX)

            SELECT @ReturnVal = ''''
            SELECT @ReturnVal = @ReturnVal 
                  + '' // '' 
                  + T2.N.value(''local-name(.)'', ''nvarchar(128)'')
                  + '': ''
                  + T2.N.value(''.'', ''nvarchar(max)'')
              FROM (
                    SELECT *
                      FROM ' + @TableName + ' 
                     WHERE ID = @ID
                       FOR XML PATH(''''), type
                    ) as T1(X)
             CROSS APPLY T1.X.nodes(''/*'') as T2(N)

             UPDATE #Result SET ReturnVal = @ReturnVal WHERE ID = @ID';

        EXEC sp_executeSQL @SQL, @ParameterDefinitions, @ID = @ID;

        SELECT @idx = MIN(idx) FROM #Result WHERE idx > @idx
    END
    GO
    -- ====================================================================
    -- END: Proc with dynamic SQL logic
    -- ==================================================================== 
```

3）最后，让我们执行proc，得到我们想要的结果。

```
 -- ====================================================================
    -- BEGIN: Solution to execute dynamic SQL logic on each row of a table
    -- ====================================================================
    -- Create the temp table that the dynamic SQL proc expects
    IF OBJECT_ID('tempdb..#Result', 'U') IS NOT NULL DROP TABLE #Result;
    CREATE TABLE #Result (idx int IDENTITY(1,1), TableName varchar(128) NOT NULL, ID int NOT NULL, ReturnVal varchar(MAX) NULL);

    -- Popluate the temp table with the rows you want to evaluate
    INSERT #Result (TableName, ID)
    SELECT 'Branch', ID FROM Branch
    INSERT #Result (TableName, ID)
    SELECT 'Branch2', ID FROM Branch2

    -- Results before
    SELECT * FROM #Result

    -- Execute the dynamic SQL proc
    EXEC prcReturnTableData

    -- Results after
    SELECT * FROM #Result
    -- ====================================================================
    -- END: Solution to execute dynamic SQL logic on each row of a table
    -- ==================================================================== 
```

# mysql - SELECT n row FROM table1 PER table2

> ID：15198187
> 
> 赞同：1
> 
> 时间：2013-03-04T09:23:46.810
> 
> 标签：mysql, sql, greatest-n-per-group

我有 2 张桌子：猫（类别）和帖子。
我想为每个类别选择 n 个帖子。

我试过这个：

```
SELECT * FROM cat
RIGHT JOIN (SELECT * FROM post WHERE post.CatID=cat.ID LIMIT 3 ) ... 
```

问题是 MySQL 无法识别子查询中的 cat.ID。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:30:06.147

```
SELECT  a.ID, 
        a.Category,
        b.Description
FROM    Category a
        INNER JOIN Post b
            ON a.ID = b.Cat_ID
WHERE   
(
    SELECT  COUNT(*)
    FROM    Post c
    WHERE   b.Cat_ID = c.Cat_ID AND
            b.ID <= c.ID
) <= 2 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/e2265/4)

# java - 读取/更新时出现休眠并发（？）问题

> ID：15198194
> 
> 赞同：1
> 
> 时间：2013-03-04T09:24:14.017
> 
> 标签：java, database, spring, hibernate, concurrency

情况：

我们有一个 webapp (Java EE-Spring-Hibernate) 可以生成带有条形码的 PDF。条形码包含在运行时生成的 ID。我们有一个 Java 服务，它使用 Hibernate 来检查是否有当前日期的 ID，如果不存在，则创建一个条目。如果存在，则递增和更新。每天有一行包含以下字段：id、coverPageId、日期

因此，当用户创建当天的第一个条形码时，会为当前日期添加一行，coverPageId=1。然后所有后续条形码将从数据库中获取最后一个 id，将其递增并保存具有递增值的行。

问题：

当多个用户同时创建 PDF 时，Hibernate 将为两个用户获取相同的值，从而在 PDF 上生成相同的条形码。

尝试解决方案：

获取当前 id、递增和更新行的代码都在同一个方法中执行。这是 Spring bean 中的一个方法。由于 Spring bean 是单例，我尝试制作该方法`synchronized`。这没有帮助。

方法：

```
@Transactional(isolation=Isolation.SERIALIZABLE)
public synchronized long getNextId(Date date)
{
    List<CoverpageID> allCoverpageIds = this.getAllCurrentIds(date);

    if(allCoverpageIds.size() == 0)
    {
        loggingService.warn(String.format("Found no existing ID for date '%tD', creating new record", date));
        System.out.println(String.format("Found no existing ID for date '%tD', creating new record", date));
        return this.createNewCoverpageIdRecord(new Date());
    }
    else if(allCoverpageIds.size() == 1)
    {
        CoverpageID coverpageId = allCoverpageIds.get(0);
        loggingService.debug(String.format("Found existing ID for date '%tD': %d, incrementing and persisting", date, coverpageId.getCoverPageId()));
        System.out.println(String.format("Found existing ID for date '%tD': %d, incrementing and persisting", date, coverpageId.getCoverPageId()));
        coverpageId.setCoverPageId(coverpageId.getCoverPageId() + 1);
        dao.save(coverpageId);
        loggingService.debug(String.format("Saved existing ID for date '%tD' with incremented ID: %d", date, coverpageId.getCoverPageId()));
        return coverpageId.getCoverPageId();
    }
    else
    {
        loggingService.warn(String.format("Found multiple records for date '%tD'", date));
        return -1;
    }
}

private List<CoverpageID> getAllCurrentIds(Date date)
{
    String exClause = "where date = :date";
    Map<String, Object> values = new HashMap<String, Object>();
    values.put("date", date);
    return dao.getAllEx(CoverpageID.class, exClause, values);
}

private long createNewCoverpageIdRecord(Date date)
{
    dao.save(new CoverpageID(new Date(), new Long(1)));
    return 1;
} 
```

CoverpageID.class（条码实体）：

```
@NamedQueries({
@NamedQuery(
    name = "getCoverPageIdForDate",
    query = "from CoverpageID c where c.date = :date",
    readOnly = true
)})
@Entity
public class CoverpageID
{
private Long id;
private Date date;
private long coverPageId;

public CoverpageID() {}

public CoverpageID(Date date, Long coverPageId)
{
    this.date = date;
    this.coverPageId = coverPageId;
}

public void setId(Long id)
{
    this.id = id;
}

@Id
@GeneratedValue(strategy=GenerationType.AUTO)
public Long getId()
{
    return id;
}

@Temporal(TemporalType.DATE)
public Date getDate()
{
    return date;
}

public void setDate(Date date)
{
    this.date = date;
}

public long getCoverPageId()
{
    return coverPageId;
}

public void setCoverPageId(long coverPageId)
{
    this.coverPageId = coverPageId;
}
} 
```

有没有人知道如何防止这种并发问题的发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:56:40.420

我相信它与休眠无关。即使你不使用 Hibernate，你仍然会面临这样的问题。

有一些选择供您选择：

考虑不要对相关部分使用 Hibernate。许多数据库具有执行原子“插入如果不存在更新如果存在”类型的逻辑的设施。

或者

如果你真的想使用 Hibernate，这就是你需要的：

1.  确保您在数据库中有唯一约束以避免重复记录
2.  在您的程序逻辑中，如果您发现没有记录并尝试插入，请准备捕获重复数据/违反约束的异常。在这种情况下，不要将您的逻辑视为失败。请改为进行后续更新。

* * *

关于您通过使用对象实例处理插入/更新操作的尝试解决方案，您的方法行不通。

首先，如果您实际上将所有 ID 保留为该 bean 的状态，并且如果您的应用程序将只有进程，那么它将工作。您的代码每次都会到数据库进行检查，并相应地进行插入/更新。即使这段代码是同步的，它也不起作用。请记住，在不同的数据库会话中，一个会话的更改仅在事务实际提交时对另一个会话可见。所以你会有这样的情况

```
THREAD 1                    THREAD 2
-------------------------------------------------
enter method
check DB, no record found   enter method (wait coz synchronized)
insert record
exit method
                            check DB, no record found (coz prev txn not commited yet)
                            insert record
                            exit method
commit
                            commit 
```

看？你仍然面临同样的问题。

除了我的之外，还有其他方法可以解决，但至少，您使用的方式无济于事。

# iphone - iOS 应用程序错误：我在日期计算的某个地方搞砸了

> ID：15198198
> 
> 赞同：6
> 
> 时间：2013-03-04T09:24:23.820
> 
> 标签：iphone, ios, objective-c, ipad, eventkit

我的应用程序随机崩溃，我无法生成与用户设备中发生的相同情况，此处提供了崩溃报告中的更多详细信息：

碰撞等级：

```
NSInternalInconsistencyException 
```

功能：

```
-[CalendarViewController deleteEvent:] 
```

方法实现是这样的：

```
 -(void) deleteEvent: (EKSpan ) span :(EKEvent *) eventToDelete{

    NSError* error = nil;

    [sharedEventStore removeEvent:eventToDelete span:span error:&error];

   // refresh the UI   
} 
```

堆栈跟踪：

```
0 CoreFoundation 0x33acf2a3 <redacted> + 162
1 libobjc.A.dylib 0x3b7ec97f objc_exception_throw + 30
2 CoreFoundation 0x33acf15d <redacted> + 0
3 Foundation 0x343a4ab7 <redacted> + 90
4 EventKit 0x34208b33 <redacted> + 1642
5 EventKit 0x342084c1 <redacted> + 408
6 EventKit 0x342091f7 <redacted> + 306
7 EventKit 0x341fa199 <redacted> + 144
8 EventKit 0x341fa0ff <redacted> + 30
9 Calendar 0x0010acaf -[CalendarViewController deleteEvent:] + 126
10 Calendar 0x0016f585 -[BlockAlertView dismissWithClickedButtonIndex:animated:] + 196
11 UIKit 0x359c20c5 <redacted> + 72
12 UIKit 0x359c2077 <redacted> + 30
13 UIKit 0x359c2055 <redacted> + 44
14 UIKit 0x359c190b <redacted> + 502
15 UIKit 0x359c1e01 <redacted> + 488
16 UIKit 0x358ea5f1 <redacted> + 524
17 UIKit 0x358d7801 <redacted> + 380
18 UIKit 0x358d711b <redacted> + 6154
19 GraphicsServices 0x375ed5a3 <redacted> + 590
20 GraphicsServices 0x375ed1d3 <redacted> + 34
21 CoreFoundation 0x33aa4173 <redacted> + 34
22 CoreFoundation 0x33aa4117 <redacted> + 138
23 CoreFoundation 0x33aa2f99 <redacted> + 1384
24 CoreFoundation 0x33a15ebd CFRunLoopRunSpecific + 356
25 CoreFoundation 0x33a15d49 CFRunLoopRunInMode + 104
26 GraphicsServices 0x375ec2eb GSEventRunModal + 74
27 UIKit 0x3592b301 UIApplicationMain + 1120
28 Calendar 0x000f9533 main + 66
29 Calendar 0x0008a6a8 start + 40 
```

请注意，我在单例模式中使用 EKEventStore 的一个实例：

```
// this is in separate class

static EKEventStore *eventStore = nil;

    + (EKEventStore *)getEventStoreInstance
    {

        if (eventStore == nil){
            @synchronized(self){
                if (eventStore == nil){
                    eventStore = [[EKEventStore alloc] init];
                }
            }
        }

        return(eventStore);
    } 
```

这次崩溃有什么可能的原因吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-22T12:08:14.193

这绝对是一个错误。您可以使用以下命令使 iPad 的日历应用程序崩溃：

1.  创建一个事件，每天重复一次，并在未来几天重复出现。
2.  更改第二次出现的位置并将其保存以供将来所有事件使用。
3.  删除第一个事件并仅选择此事件。砰！

这不会发生，当位置更改开始于第二次之后的发生或选择删除所有未来事件时。当您执行代码中的步骤时，您的应用程序会因“我搞砸了......”而崩溃

一个简短的解决方法是：

```
[eventStore removeEvent:firstEvent span:(firstEvent.isDetached ? EKSpanFutureEvents : desiredSpan) commit:YES error:nil]; 
```

# php - 在 PHP 中创建长度为 5 的唯一 id

> ID：15198202
> 
> 赞同：2
> 
> 时间：2013-03-04T09:24:29.510
> 
> 标签：php, mysql

我知道`uniqid()`创建许多长度为 7 或更多的唯一 ID 的方法，但我想要创建的是长度为 5 的唯一 ID，没有冲突。

是否可以创建 220.000 个长度为 5 的唯一 ID 并检查是否存在任何冲突？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T09:41:49.323

你可以试试

```
for($i = 0; $i < 10 ; $i++)
{
    echo randString(5),PHP_EOL ;
} 
```

输出

```
7fh96
G93fd
97Q7E
90Wku
7Vby9
4678f
S11oe
67688
19D36
KC1bQ 
```

简单碰撞测试

```
$hash = array();
$collision = 0;
while ( count($hash) < 220000 ) {
    $r = randString(5);
    if (isset($hash[$r])) {
        $collision ++;
        continue;
    }
    $hash[$r] = 1;
}

print(($collision / 220000)  * 100 . "% - ($collision)"); 
```

[测试了 100,000 次并且总是碰撞总是小于 0.02](http://codepad.viper-7.com/1FdqFU)，这使得函数对 5 个字符集有效

```
0.011818181818182% - (26) 
```

使用的功能

```
function randString($length) {
    $char = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
    $char = str_shuffle($char);
    for($i = 0, $rand = '', $l = strlen($char) - 1; $i < $length; $i ++) {
        $rand .= $char{mt_rand(0, $l)};
    }
    return $rand;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-20T13:39:28.473

看看这篇文章

*   [使用 PHP 创建短 ID - 像 Youtube 或 TinyURL](http://kvz.io/blog/2009/06/10/create-short-ids-with-php-like-youtube-or-tinyurl)

它解释了如何从您的 bdd id 生成简短的唯一 id，就像 youtube 一样。

实际上，文章中的函数与[php 函数 base_convert](http://php.net/manual/fr/function.base-convert.php)非常相关，它将一个数字从一个基数转换为另一个数（但最多只能达到 36 个基数）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-13T09:33:29.517

我想使用`uniqid()`函数来制作特定长度的字符串。因此，我进行了实验并提出了以下代码：

```
<?php
    $number = uniqid();
    $varray = str_split($number);
    $len = sizeof($varray);
    $otp = array_slice($varray, $len-5, $len);
    $otp = implode(",", $otp);
    $otp = str_replace(',', '', $otp);
    print_r($otp);
?> 
```

这对我来说很好，只要您的网站没有以非常快的速度生成 OTP，这应该可以正常工作！

# ios5 - 适用于 iOS 的 SnapTag 阅读器 SDK

> ID：15198209
> 
> 赞同：1
> 
> 时间：2013-03-04T09:25:06.453
> 
> 标签：ios5, qr-code, ios6.1, scannable-code

我到处检查了适用于 iOS 的 SnapTag SDK，但没有运气。是否有任何用于在 iOS 上扫描 SnapTag 的集成包？

# android - 我应该在 UI 线程中调用“服务”的函数吗？

> ID：15198210
> 
> 赞同：0
> 
> 时间：2013-03-04T09:25:10.553
> 
> 标签：android, service

如果我有一个本地的`Service`并且在 中`Service`，我有这个功能：`doHeavyThings()`. 在我`Activity`与本地连接`Service`后`onServiceConnected(...)`，我应该调用`mService.doHeavyThings()`UI 线程吗？它会阻塞我的 UI 线程吗？谁能解释一下？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T09:28:50.157

这取决于服务是异步（通过回调）还是同步传递结果。

如果它同步交付结果，则不得在 UI 线程上调用这些方法。尽管 UI 线程会简单地等待结果，而 Service 和 binder 线程执行实际工作，但您的 UI 仍然会被阻塞，因为 UI 线程会等待控制流。

所以使用 AsyncTask、HandlerThread 或 Thread。

如果服务异步传递其结果，您很可能可以从 UI 线程调用方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T09:29:38.637

`Service` ~~默认情况下始终~~**在 UI 线程上运行。因此，为了避免 ANR，您的`doHeavyThings()`方法应该只是开始一个新的方法`Thread`，它可以完成所有繁重的工作。

如果你想知道结果，你必须自己实现它。例如，您可以将 a 传递`Messanger`给`Service`将用于从`Service`后面与调用者进行通信的对象。

下面的文章解释了如何使用一个`Messanger`in a`Service`来提供双向通信：http: [//developer.android.com/guide/components/bound-services.html](http://developer.android.com/guide/components/bound-services.html)

另一种方法是使用`IntentService`. 你可以在这里阅读更多信息：http: [//developer.android.com/reference/android/app/IntentService.html](http://developer.android.com/reference/android/app/IntentService.html)

** - 您可以使用文件内声明中的`android:process`属性在单独的过程中运行它。（感谢类堆叠器）`<service>``AndroidManifest.xml`

# django - Django Crm 未运行

> ID：15198215
> 
> 赞同：0
> 
> 时间：2013-03-04T09:25:22.167
> 
> 标签：django, crm

我是 django 开发的新手。我想运行 django crm，我从 code.google.com“svn checkout [http://django-crm.googlecode.com/svn/trunk/sample_project](http://django-crm.googlecode.com/svn/trunk/sample_project) sample_project”下载了源代码。当我在其中运行示例项目时，它给出了诸如“没有名为 Django_notify 的模块”“没有模块名 crumbs”“没有名为分页的模块”等错误。我下载了所有这些包并解决了错误。仍然“没有名为 crm 的模块”错误即将到来..请帮助

ADMINS = ( # ('你的名字', 'your_email@domain.com'), )

经理 = 管理员

DATABASE_ENGINE = 'django.db.backends.sqlite3' # 'postgresql_psycopg2'、'postgresql'、'mysql'、'sqlite3' 或 'oracle'。DATABASE_NAME = 'django_crm_test.db' # 如果使用 sqlite3，则为数据库文件的路径。DATABASE_USER = '' # 不与 sqlite3 一起使用。DATABASE_PASSWORD = '' # 不与 sqlite3 一起使用。DATABASE_HOST = '' # 设置为本地主机的空字符串。不与 sqlite3 一起使用。DATABASE_PORT = '' # 默认设置为空字符串。不与 sqlite3 一起使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:34:32.977

你为什么不试试这个。

```
pip install svn+http://django-crm.googlecode.com/svn/trunk/#egg=django-crm 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-20T08:02:55.220

在 github 中尝试新的 django crm。它是使用 django 开发的开源 CRM。

[https://github.com/MicroPyramid/Django-CRM](https://github.com/MicroPyramid/Django-CRM)

# ant - cobertura 的分支覆盖范围未在声纳中显示

> ID：15198218
> 
> 赞同：1
> 
> 时间：2013-03-04T09:25:31.303
> 
> 标签：ant, sonarqube

我正在使用 Ant 来获取 cobertura 的代码覆盖率。

我得到了coverage.xml，当我将它与声纳集成时，我得到的只是*线路*覆盖而不是*分支*覆盖。我确信我的代码覆盖率报告显示了行覆盖率和分支覆盖率。

我的配置：

*   声纳：3.4.1

*   科贝图拉：1.1

我的声纳目标的 build.xml 是

```
<target name="sonar" depends="coverage" >  
    <property name="sonar.sources" value="src" />
    <property name="sonar.tests" value="${junit.output.dir}" />
    <property name="sonar.binaries" value="bin" />  
    <property name="sonar.surefire.reportsPath" value="${junit.output.dir}" />
    <property name="sonar.surefire.reportsPath" value="pmd_report.html" />
    <property name="sonar.java.coveragePlugin" value="cobertura" />
    <property name="sonar.cobertura.reportPath" value="${dir.coverage}/coverage.xml" />

    <sonar:sonar key="com.employee:employeesalary"
                 version="0.1-SNAPSHOT" xmlns:sonar="antlib:org.sonar.ant" /> 
</target> 
```

# c# - 文件夹复制完成时的窗口服务

> ID：15198220
> 
> 赞同：1
> 
> 时间：2013-03-04T09:25:53.300
> 
> 标签：c#, .net, windows-services

我有一个服务器位置路径，例如`\\10.100.100.10000\Builds`. 每当有人在 Visual Studio 中的服务器中强制构建时`2013.1.3.1`，都会创建一个新的构建文件夹，例如 ，并将新文件复制到其中。我需要写一个`Windows Service`，所以当文件夹被完全复制时，我需要提取`Application.exe`并做一些处理。

我的问题是如何知道文件夹是否已完全复制？谷歌搜索和 Binging 对我没有多大帮助。我是否必须告诉我的团队谁正在触发构建事件来做一些自定义工作，让我的程序知道复制文件已经完成？或者有一些 .Net 库来完成这项任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:52:54.800

您可以使用 FileSystemWatcher 监视文件夹中的活动，监视可以在 Windows 服务启动时启动（在启动方法中）。

您可以使用 FileWatcher 注册以下事件处理程序

FSWatcher.Deleted += new System.IO.FileSystemEventHandler(this.FSWatcher_Deleted); FSWatcher.Renamed += new System.IO.RenamedEventHandler(this.FSWatcher_Renamed); FSWatcher.Changed += new System.IO.FileSystemEventHandler(this.FSWatcher_Changed); FSWatcher.Created += new System.IO.FileSystemEventHandler(this.FSWatcher_Created);

FSWatcher_Changed 事件将一直被触发，直到复制过程完成。

您可以使用此事件来了解复制何时开始并等待复制过程完成。

复制过程完成后，我的意思是当文件夹安静时，您可以开始提取 Application.Exe 或您想做的任何其他任务。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T13:28:44.153

我最后就是这样做的，看看文件夹复制是否完成。在属性创建`System.IO.FileSystemWatcher`并分配一个事件。`Created`

```
private void FileSystemWatcherCreated(object sender, FileSystemEventArgs e)
{
    long sizeOld = GetDirectorySize(new DirectoryInfo(e.FullPath));

    Thread.Sleep(100000);

    long sizeNew = GetDirectorySize(new DirectoryInfo(e.FullPath));

    if (sizeOld == sizeNew)
    {
        // Copying finished.
    }
} 
```

上述方法只是每隔一分钟检查一次文件夹大小，然后比较大小。如果大小相同，则声明复制文件夹已完成。

希望能帮助到你。

# asp.net - 在gridview中为“选择”添加跨浏览器下划线 - asp.net

> ID：15198222
> 
> 赞同：1
> 
> 时间：2013-03-04T09:26:05.303
> 
> 标签：asp.net, select, gridview, underline

为第一列中的动态自动添加的选择按钮添加下划线的最简单方法是什么。请参阅下面的代码，这不起作用。

我可以在 vb.net 中执行此操作，因为我也想更改颜色并添加图像吗？这适用于我的本地主机，但当我将其部署到 IIS6 环境时不起作用。

```
 For Each row As GridViewRow In Me.gv.Rows
     gv.Rows(row.RowIndex).Cells(0).Font.Underline = True  
  Next 
```

# javascript - 为什么在使用 setRequestHeader 制作 xmlhttprequest 时无法设置 cookie 和 set-cookie 标头？

> ID：15198231
> 
> 赞同：37
> 
> 时间：2013-03-04T09:26:37.283
> 
> 标签：javascript, html, node.js, cookies, xmlhttprequest

我想知道为什么不能使用 setRequestHeader设置**cookie标头。**是否有任何特定原因，或者仅仅是浏览器本身添加了它们，所以这些标头被禁用了？有什么安全问题吗？

**- 编辑**

我正在研究 node.js 并使用了该`xmlhttprequest`模块。以下是测试代码：

```
var xhr = new XMLHttpRequest();
xhr.open('GET', url, true);
xhr.withCredentials = true;
xhr.setRequestHeader('Cookie', "key=value");
xhr.send(null); 
```

在这里，我需要将 cookie-header 设置为`node.js' xmlhttprequest`不显式添加 cookie-header（就像浏览器一样）。尝试这样做时，`xmlhttprequest`会出现错误“ `Refused to set unsafe header`”。

虽然我找到了一个补丁并成功发送了 cookie-header。但是想知道为什么禁用设置 cookie-header ？无论我在哪里阅读，都发现它是数据完整性和安全性所必需的，但是在这种情况下可以破坏哪些安全性，却没有提到任何地方。我想评估这个数据完整性问题是否对 node.js 应用程序也有效，如果我使用我的补丁。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-07T08:57:37.793

我相信你会通过[工作草案](http://www.w3.org/TR/XMLHttpRequest/#the-setrequestheader-method)并找到

> 上述标头由用户代理控制，以使其控制传输的这些方面。

首先我们需要了解，这些标准作为不同浏览器之间功能互操作性的指南。它不是浏览器强制要求的，因此浏览器出于不同的原因对这个标准有不同程度的遵守。

其次，从技术上讲，您可以模拟用户代理，将您的程序视为浏览器，并且可以根据上述标准很好地设置这些值。

最后，禁止覆盖 Headers 或为某些字段（如`Content-Length`、`Cookie`ethos 和`secure design approach`. 这是为了阻止或至少试图阻止 [HTTP 请求走私](https://www.rfc-editor.org/rfc/rfc7230#section-9.5)。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-03-07T09:19:59.423

您可以禁用此行为：

```
var xhr = new XMLHttpRequest();
xhr.setDisableHeaderCheck(true);
xhr.open(...);
... 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-11T07:19:09.430

众所周知，对于浏览器，cookie（以及其他属性）需要仔细管理，以防止第三方窃取用户会话（或其他数据）。这是浏览器的问题，以及访问运行任意 Javascript 的网站的不受控制的性质。

当然，这种任意代码执行的风险对于 node.js 来说要么是低风险，要么是无风险，因为您只运行您编写的脚本，该脚本可能会运行您计划的其他代码。

如果您查看 driverdan 的[XMLHttpRequest.js](https://github.com/driverdan/node-XMLHttpRequest/blob/master/lib/XMLHttpRequest.js)的源代码，您会发现：

```
 // These headers are not user setable.   
 // The following are allowed but banned in the spec:   
 // * user-agent   
 var forbiddenRequestHeaders = [
    "accept-charset",
    "accept-encoding",
    "access-control-request-headers",
    "access-control-request-method",
    "connection",
    "content-length",
    "content-transfer-encoding",
    "cookie",
    "cookie2",
    "date",
    "expect",
    "host",
    "keep-alive",
    "origin",
    "referer",
    "te",
    "trailer",
    "transfer-encoding",
    "upgrade",
    "via"   ]; 
```

这回答了您的具体问题，即为什么限制特别适用于用于 node.js 的脚本 - 编码器遵循规范（尽可能接近），尽管感觉它可能不是 node.js 中必需的安全预防措施。然而，这个默认的安全级别很容易修改。

正如 robertklep 指出的那样，您可以使用该`setDisableHeaderCheck`方法禁用此默认预防措施。是的，最后一点确实回答了您的问题或对您的问题做出了重大贡献，因为在您的问题中您说：

```
I have found a patch and successfully able to send the cookie-header 
```

我们现在发现你不需要那个补丁。

祝你好运！

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-08T18:25:06.410

是的，它是数据完整性和安全性所必需的。要理解这一点，您必须了解 cookie 在 HTTP 请求方法中的作用。

Cookies 在识别用户、浏览器、连接等方面很重要，并存储在网络浏览器中。JavaScript 允许您操作 cookie，但不是浏览器上的所有 cookie。请参阅[HTTP cookie](http://en.wikipedia.org/wiki/HTTP_cookie#HttpOnly_cookie)，这些仅由浏览器设置，因此用户不能滥用它（通过 JavaScript）。

> 在受支持的浏览器上，仅在传输 HTTP（或 HTTPS）请求时才会使用 HttpOnly 会话 cookie，从而限制来自其他非 HTTP API（例如 JavaScript）的访问。

`Cookie`当您发送 xmlhttprequest 时，它会读取 HttpOnly cookie 并通过标头发送到服务器。现在，如果您这样做`xhr.setRequestHeader('Cookie', "key=value");`，您正在尝试篡改发送到服务器的 cookie。`setRequestHeader`将添加额外的`key=value`内容，可能会损害发送的 cookie 的完整性。

服务器使用这些来验证用户（会话、电子邮件帐户或任何帐户）。这实质上允许服务器防止滥用 cookie 来访问服务器。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-06T12:36:45.667

文档提到这样做是为了保护数据完整性。 [http://www.w3.org/TR/XMLHttpRequest/#the-setrequestheader%28%29-method](http://www.w3.org/TR/XMLHttpRequest/#the-setrequestheader%28%29-method)

> 上述标头由用户代理控制，以使其控制传输的这些方面。这在一定程度上保证了数据的完整性。不允许设置以 Sec- 开头的标头名称以允许生成新标头，这些标头保证不会来自 XMLHttpRequest。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-04-08T11:44:05.623

我能够使用以下要点解决此问题：
[https ://gist.github.com/killmenot/9976859](https://gist.github.com/killmenot/9976859)

最初的想法取自这里：
[https ://gist.github.com/jfromaniello/4087861](https://gist.github.com/jfromaniello/4087861)

**我遇到了几个问题：**

1.  Source Gist 已过时，对我不起作用。例如“请求”库 API 已更改。
2.  我可能会使用 socket.io-client 的“xmlhttprequest”库，并且不会安装在与 socket.io-client 相同的级别上。
3.  原始的“socket.io-client”（0.9.16）使用不支持“setDisableHeaderCheck”方法（但 1.6.0 支持）的“xmlhttprequest”（1.4.2）。所以，我做了一个叉子并使用它[https://github.com/intspirit/socket.io-client/tree/0.9.16+20140408120400](https://github.com/intspirit/socket.io-client/tree/0.9.16+20140408120400)

socket.io-client (1.0.0-pre) 使用使用正确版本的 xmlhttprequest 的 engine.io-client。我想将来我会使用 1.0.0 版本而不是我的 fork，指定“xhr-polling”传输并像原始 gist 那样模拟 XMLHttpRequest。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-15T05:08:44.070

`xhr._restrictedHeaders.cookie = false`之前添加，`xhr.setRequestHeader('Cookie', "key=value");` 但这是不好的方法，我不推荐使用它。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2019-09-30T18:48:55.413

我认为这个答案不够完整。

正如所有的回答所说，`xhr.setRequestHeader('Cookie', "key=value");`由于安全完整性，您不能用来发送任何数据（浏览器无法判断您添加的值是否是真正的 cookie）。

使用此特殊标头的预期方法是让客户端浏览器自动获取与您请求的站点相关的所有 cookie 并将它们放在“Cookie”标头中，如果您的 cookie存在于您的浏览器中，它们将被发送。

...如果您想知道，存储在浏览器中的所有 cookie 都应该在每次来自您请求的服务器的响应向您发送回`Set-Cookie`标头时存储/更新。因此，在请求中添加“Set-Cookie”标头是没有意义的，因为它是仅为响应保留的标头，并且不需要在您的请求中添加“Cookie”标头，因为您的浏览器已经这样做了。

# c# - 换行失败

> ID：15198232
> 
> 赞同：0
> 
> 时间：2013-03-04T09:26:40.103
> 
> 标签：c#, javascript, jquery, asp.net, html

我正在尝试使用多行文本创建一个动态工具提示，一切正常，但下一行却不行。我还有什么想法可以换行吗？

```
<script type="text/javascript">
var data = {
    name: "enter your name",
    family: "enter your family",
    testfamily: "enter your family",
  //HERE IS WHERE I AM TRYING TO PERFORM LINE BREAK, BUT I FAILED
    uc1_txtname: 'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa <br>\n\r<br\>\t <\br> aaaaaaa',
    uc2_txtname: "enter your name for Control 2 (User Control2)",
    family1: "THis is button  tooltips"
}

function ShowTooltip() {
    var Tip = $("<div class='dinamictip'></div>");
    $("input").hover(function () {
        Tip.text('');
        var ToolTipID = $(this).attr('id');
        var offset = $(this).offset();
        var height = $(this).height() + 10;

        Tip.text(data[ToolTipID]);

        Tip.css('display', 'inline')
          .css('position', 'absolute')
          .css('background', 'lightyellow')
          .css('border', '1px solid #cccccc')
          .css('color', '#6c6c6c')
          .css('left', offset.left)
          .css('top', offset.top - height)
          .css('border-radius','15px')

        Tip.appendTo('body');
    },

            function () {
                Tip.remove();
            });
}

ShowTooltip(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:59:31.340

`.text()`将对 HTML 标记进行编码并在文本旁边显示它们。

尝试更换：

```
Tip.text(data[ToolTipID]); 
```

和：

```
Top.html(data[ToolTipID]); 
```

# css - css可见溢出内容如何具有非透明背景，因此隐藏下面的内容？

> ID：15198235
> 
> 赞同：1
> 
> 时间：2013-03-04T09:26:43.377
> 
> 标签：css, overflow, transparency

css可见溢出内容如何具有非透明背景，因此隐藏下面的内容？

```
<div class="coverer-container">
    <div class="coverer">
        <p>I want this to have an opaque background.</p>
    </div>
</div>
<div class="coveree">
    <p>So you can not see this text.</p>
</div>

.coverer-container{
    position:relative;
    height:0;
    width:0;
    overflow:visible;
}

.coverer{
    position:absolute;
    height:300px;
    width:300px;
} 
```

[这是我的问题](http://jsfiddle.net/JUndB/6/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:31:25.303

有几种方法可以实现这一点。每个对浏览器都有影响，例如，IE 和其他浏览器可能无法很好地响应 opacity 命令。

除此之外，这不合逻辑，一些搜索引擎会惩罚你——当然取决于你做的数量等。

演示**[[链接](http://jsfiddle.net/JUndB/8/)]**

```
.coverer{
position:absolute;
height:300px;
width:300px;
display:block;
background:#fff;
}
.coveree{} 
```

您甚至可以添加不透明度命令，但这仍然会在下面看到您的文本以及 z-index 以及显示：隐藏和可见性使用...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T09:30:42.937

```
.coverer p {
    background: #fff;
} 
```

你不能这样做吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T10:08:04.457

使用 z-index：http: **[//jsfiddle.net/HZL8c/](http://jsfiddle.net/HZL8c/)**

HTML

```
<div class="coverer">
    <p>I want this to have an opaque background.</p>
</div>
<div class="coveree">
    <p>So you can not see this text.</p>
</div> 
```

CSS

```
.coverer{
    border: 1px solid green;
    position:absolute;
    height:300px;
    width:300px;
    z-index: 2;
    background: #fff;
}

.coveree{
    border: 1px solid red;
    position: relative;
    z-index: 1;
} 
```

# c# - 在 MVVM 中获取 BooleanToVisibilityConverter 的 xaml 绑定代码错误

> ID：15198236
> 
> 赞同：1
> 
> 时间：2013-03-04T09:26:44.690
> 
> 标签：c#

我在视图中使用了进度条，如下所示：

```
<ProgressBar  IsIndeterminate="{Binding IsBusy}" Visibility="{Binding IsBusy,Converter={StaticResource BooleanToVisibilityConverter}}" HorizontalAlignment="Left" Height="33" Margin="46,222,0,0" VerticalAlignment="Top" Width="358"/> 
```

*   BooleanToVisibilityConverter 在 ViewModel 中定义
*   在视图的 xaml 代码上出现错误 `<phone:PhoneApplicationPage.Resources>` `<BooleanToVisibilityConverter x:Key="BooleanConverter"/>` `</phone:PhoneApplicationPage.Resources>`

*错误是：

[名称空间“ http://schemas.microsoft.com/client/2007](http://schemas.microsoft.com/client/2007) ”中不存在名称“BooleanToVisibilityConverter” 。

请告诉我如何解决此错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T09:32:23.743

您可以像这样定义转换器：

```
namespace YourNamespace
{
    public class BooleanToVisibilityConverter : IValueConverter
    {

        public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            return (bool)value ? Visibility.Visible : Visibility.Collapsed;
        }

        public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            throw new NotImplementedException();
        }
    }
} 
```

构建您的解决方案！在 XAML 中：

```
<navigation:Page x:Class="MyCustomNamespace"
    xmlns:converters="clr-namespace:YourNamespace">
    <navigation:Page.Resources>
        <converters:BooleanToVisibilityConverter x:Key="BooleanToVisibility" />
    </navigation:Page.Resources>
    <TextBlock Visibility="{Binding BooleanFromViewModel, Convert={StaticResource BooleanToVisibility}" />
</navigation:Page> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T09:35:46.270

```
<UserControl xmlns:converter="your namespace">
<UserControl.Resources>
<converter:BooleanToVisibilityConverter x:Key="bool2VisibilityConverter" />
</UserControl.Resources>
<TextBlock Visibility={Binding Path=Field, Converter={StaticResource bool2VisibilityConverter}} />
</UserControl> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T09:32:05.743

您需要在 xaml 中定义您的命名空间。在 Window/UserControl 的顶层，您需要定义一个 xml 命名空间：

```
xmlns:yn="clr-namespace:YourNamespace" 
```

然后你需要参考你`BooleanToVisibilityConverter`使用的命名空间：

```
<yn:BooleanToVisibilityConverter ... /> 
```

# jquery - fullCalendar event点击手机

> ID：15198238
> 
> 赞同：2
> 
> 时间：2013-03-04T09:26:51.180
> 
> 标签：jquery, jquery-mobile, fullcalendar

当我尝试在移动设备上使用 eventclick 时，它总是触发 dayClick 事件而不是 eventclick。我试过：

```
$('.fc-event').live("click", function () {
    alert("you just clicked");
}); 
```

和

```
eventClick: function (date, jsEvent, view) {
            alert('you just clicked');
 } 
```

它在我的电脑上运行良好，但移动设备似乎总是触发 dayClick 而不是 EventClick .. 即使我把 selectable: false 它仍然触发 dayClick 事件。我应该从 fullcalendar.min.js 中删除哪些行以删除所有 dayClick 事件.. 至少我认为在我的情况下这是最优化的（也许是唯一的）解决方案，因为我根本不需要 dayClick

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T09:36:01.207

```
$('.fc-event').live("click", function () {
    alert("you just clicked");
}); 
```

根据文档，不支持上述代码。确保将其从代码库中删除。

对于日点击和事件点击，您必须按照文档中的说明使用

```
eventClick:function(calEvent, jsEvent, view) {
  alert("clicked on event");
},
dayClick: function(date, allDay, jsEvent, view) {
  alert("clicked on day");
} 
```

还要确保包含在 fullcalendar 函数中，如下所示

```
$('#calendar').fullCalendar({
    eventClick: function(calEvent, jsEvent, view) {

        alert('Event: ' + calEvent.title);
        alert('Coordinates: ' + jsEvent.pageX + ',' + jsEvent.pageY);
        alert('View: ' + view.name);

        // change the border color just for fun
        $(this).css('border-color', 'red');

    },
    dayClick: function(date, allDay, jsEvent, view) {
        alert("clicked on day");
    }
}); 
```

阅读[文档](http://arshaw.com/fullcalendar/docs/mouse/eventClick/)。我也将它用于我的 jQuery Mobile 项目，它运行良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-19T16:24:59.793

使用 eventAfterRender 附加点击事件。它在 iOS 上对我们有用

```
 eventAfterRender: function(calEvent, element, view)
            {
                $(element).click(function(){
                  alert('clicked!!');
            });
```

# c# - 无法从 IIS 运行 Outlook 库

> ID：15198239
> 
> 赞同：1
> 
> 时间：2013-03-04T09:26:55.890
> 
> 标签：c#, iis, outlook, localhost

我有一个小问题不知道要解决。我正在使用 C#、Visual Studio 2010 和我正在使用 Outlook 库的错误页面。在我的项目中，我添加了以下库：“Microsoft.Office.Interop.Outlook” 如果我使用 Visual Studio 提供的服务器运行网站，则该页面可以完美运行。如果我通过 IIS 运行该页面，日志显示我：“由于以下错误，无法检索具有 CLSID {0006F03A-0000-0000-C000-000000000046} 的组件的 COM 类工厂：80070005 访问被拒绝。（来自 HRESULT 的异常：0x80070005（E_ACCESSDENIED））。”

有谁知道这是为什么？我应该怎么做才能修复它？

* * *

我想使用 c# 创建一个 Outlook 约会，将此约会保存在我的一个服务器文件夹中，然后将其作为附件发送到电子邮件中，我该怎么做？

我的代码是这样的：

```
using Microsoft.Office.Interop;
using Outlook = Microsoft.Office.Interop.Outlook;
using System.Net.Mail;
Outlook.Application outlookApp = (Outlook.Application)new Outlook.Application();
Outlook.AppointmentItem appointment = (Outlook.AppointmentItem)outlookApp.CreateItem(Microsoft.Office.Interop.Outlook.OlItemType.olAppointmentItem);
appointment.Subject = subject;
appointment.Body = comments;
appointment.Location = location;
appointment.StartUTC = dateInit;
appointment.EndUTC = dateEnd;
appointment.ReminderSet = true;
appointment.ReminderMinutesBeforeStart = advideInMinutes;
appointment.BusyStatus = Microsoft.Office.Interop.Outlook.OlBusyStatus.olBusy;
string appointmentPath = "c:\\webroot\\appointment\\appointmentName.msg";
appointment.SaveAs(appointmentPath);
MailMessage mail = new MailMessage();
mail.To.Add(new System.Net.Mail.MailAddress("mail@domain.com"));
mail.From = new System.Net.Mail.MailAddress("mail@domain.com", "MyName", System.Text.Encoding.UTF8);
mail.SubjectEncoding = System.Text.Encoding.UTF8;
mail.BodyEncoding = System.Text.Encoding.UTF8;
mail.IsBodyHtml = true;
mail.Priority = MailPriority.Normal;
Attachment appointmentAttahment = new Attachment(appointmentPath);
System.Net.Mail.SmtpClient smtp = new System.Net.Mail.SmtpClient("authsmtp.mydomain.com");
smtp.Credentials = new System.Net.NetworkCredential(Settings.Items["mail@domain.com", "password");
smtp.EnableSsl = false;
smtp.Send(mail);
appointmentAttahment.Dispose(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:31:37.460

看起来您正在尝试从 IIS 应用程序自动化 Outlook。为此，您需要在 IIS 服务器上安装 Outlook。即使您可以使其正常工作，它也不是受支持的方案。

[http://support.microsoft.com/kb/257757](http://support.microsoft.com/kb/257757)：

“微软目前不推荐也不支持任何无人值守、非交互式客户端应用程序或组件（包括 ASP、ASP.NET、DCOM 和 NT 服务）的 Microsoft Office 应用程序自动化，因为 Office 可能表现出不稳定的行为和/或在此环境中运行 Office 时出现死锁。”

如果您使用的是 Exchange 服务器，则可以使用[Exchange Web 服务 (EWS)](http://msdn.microsoft.com/en-us/library/exchange/dd877045%28v=exchg.140%29.aspx)

以下是如何使用 EWS 创建约会的一个示例：http: [//msdn.microsoft.com/en-us/library/exchange/dd633661 (v=exchg.80).aspx](http://msdn.microsoft.com/en-us/library/exchange/dd633661(v=exchg.80).aspx)

# android - 在 Android 系统主屏幕中创建自定义图标

> ID：15198241
> 
> 赞同：-1
> 
> 时间：2013-03-04T09:27:04.393
> 
> 标签：android

主屏幕上应该会弹出一个图标，如果您进入 Android 系统中的任何屏幕，如何创建这样的应用程序..

链接：[点此申请](https://play.google.com/store/apps/details?id=com.smart.swkey&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5zbWFydC5zd2tleSJd)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:30:06.677

我认为您正在谈论启动器图标，该图标与您的应用程序名称一起显示在主屏幕和应用程序菜单上。要设置启动器图标，请在清单文件中写入以下内容

```
 <application
    android:icon="<icon_location>"
</application> 
```

[教程](https://sites.google.com/site/androidhowto/how-to-1/set-your-applications-icons)

# javascript - socket.io 是否像 sockjs 一样具有原始 WebSocket 访问权限？

> ID：15198242
> 
> 赞同：3
> 
> 时间：2013-03-04T09:27:07.003
> 
> 标签：javascript, node.js, websocket, socket.io, sockjs

[Sockjs](https://github.com/sockjs/sockjs-node)和[socket.io](http://socket.io/)都是 node.js 的 JavaScript 库，它们自动选择可以在 HTTP 之上使用的传输协议。

我知道 sockjs 还提供了直接的 WebSocket 访问，因此 sockjs 服务器可以与关联的 socksjs 客户端库或本机 WebSocket 访问一起使用。

例如，如果我有一个基于 sockjs 的服务器，`http://localhost:8081/echo`我可以使用带有 URL 的直接 WebSocket 访问`ws://localhost:8081/echo/websocket`

socket.io 是否还提供直接/原始 WebSocket 访问？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T13:23:28.393

不，由于更高级别的抽象（多路复用、事件等），socket.io 没有原始 websocket 传输。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T17:12:25.757

看看[engine.io](https://github.com/LearnBoost/engine.io)，它是一个较低级别的抽象，用作socket.io 的基础。

> 构建实时应用程序的推荐框架是 Socket.IO，因为它为现实世界的应用程序提供了基本功能，例如多路复用、重新连接支持等。

Engine 之于 Socket.IO 就像 Connect 之于 Express。构建实时框架的重要部分，但您可能不会用于构建实际应用程序。

# xcode - 更改 UITableView 标题色调颜色

> ID：15198244
> 
> 赞同：1
> 
> 时间：2013-03-04T09:27:10.303
> 
> 标签：xcode, uitableview, header, tint

我已经实现了以下代码，以更改 tableView 中节标题的**色调**。我只想更改颜色，而不是应用我自己的视图。但是，该应用程序似乎忽略了它，并且部分标题继续以默认灰色显示。关于我可能做错了什么的任何线索？非常感谢！

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
    [[tableView headerViewForSection:section] setTintColor:[UIColor brownColor]];
    return [tableView headerViewForSection:section];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-30T10:15:29.890

这是 100% 的工作，您可以更改索引或标题文本颜色

```
- (void)tableView:(UITableView *)tableView willDisplayHeaderView:(UIView *)view forSection:(NSInteger)section
{
    view.tintColor = [UIColor blueColor];

    // if you have index/header text in your tableview change your index text color 
    UITableViewHeaderFooterView *headerIndexText = (UITableViewHeaderFooterView *)view;
    [headerIndexText.textLabel setTextColor:[UIColor blackColor]];

} 
```

# c# - 通过javascript将文本添加到文本框中

> ID：15198258
> 
> 赞同：0
> 
> 时间：2013-03-04T09:27:55.327
> 
> 标签：c#, javascript, asp.net, webforms

我在我的论坛上做报价功能。
当用户单击`Quote`链接时，我想将此帖子中的内容添加到 textbox(txtPost) - 内容不是问题（我尝试过`alert(content)`，它有效）。
但是文本框中的文本不刷新 -`alert(txtPost.value)`显示一些添加的内容等，但文本框仍然是空的。为什么？如何解决？

邮政：

```
<asp:HyperLink ID="quotebutton" CssClass="quotebutton" OnClick="javascript:addQuote('somecontent');" runat="server">Quote</asp:HyperLink> 
```

文本框代码：

```
 <nforum:Emoticons ID="emoticonInclude" runat="server" />
        <div style="width: 604px; margin-left: 198px;">
            <asp:TextBox ID="txtPost" runat="server" TextMode="MultiLine" Rows="14" Width="600"
                ClientIDMode="Static"></asp:TextBox>
        </div> 
```

Javascript函数：

```
function addQuote(content) {
    var txtPost = document.getElementById("txtPost");
    alert(content);
    txtPost.value = txtPost.value + content;
    alert(txtPost.value);
} 
```

**信息！！编辑**

我正在使用 tinyMCE 编辑器。仍然不刷新内容，而 tinyMCE 已连接到此文本框。怎么做？

```
<script type="text/javascript">
    tinyMCE.init({
        // General options
        mode: "exact",
        elements: "txtPost",
        theme: "advanced",
        plugins: "insertcode",
        // Theme options
        theme_advanced_buttons1: "bold,italic,underline,strikethrough,|,formatselect,|,bullist,numlist,|,link,unlink,insertcode",
        theme_advanced_buttons2 : "",
        theme_advanced_buttons3 : "",
        theme_advanced_toolbar_location: "top",
        theme_advanced_toolbar_align: "center",
        theme_advanced_resizing: true,
        remove_linebreaks: false,
        relative_urls: false,
        content_css: "/css/nforumeditor.css"
    });

</script> 
```

问题解决了

对于 tinyMCE-

```
function addQuote(content) {
    tinyMCE.execCommand('mceInsertContent', false, content); 
    return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:32:45.423

要在 javascript 中使用服务器控件，您必须调用/获取服务器控件的 ClientID

html

```
<asp:HyperLink ID="quotebutton" CssClass="quotebutton" OnClick="javascript:return addQuote('somecontent');" runat="server">Quote</asp:HyperLink> 
```

javascript

```
function addQuote(content) {
var txtPost = document.getElementById("<%= txtPost.ClientID %>");
txtPost.value = txtPost.value + content;
return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T09:56:07.353

```
<asp:TextBox ID="txtPost" runat="server"></asp:TextBox>
<asp:HyperLink ID="quotebutton" runat="server" onclick="javascript:addQuote('some content');">Quote</asp:HyperLink>

function addQuote(content) {
        var txtPost = document.getElementById('<%= txtPost.ClientID %>');
        txtPost.value = txtPost.value + content;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T09:31:41.667

Tou 应该`return false;`在你的函数中并防止回发。

# iphone - Facebook 没有在我的应用程序中登录

> ID：15198260
> 
> 赞同：2
> 
> 时间：2013-03-04T09:28:00.830
> 
> 标签：iphone

嗨，我在 Xib 文件中的 Xcode 4.6 上的应用程序中使用了类似的功能，但单击 facebook 时未登录。而在另一边，当我在故事板的另一个应用程序中登录时，它是登录。如果有人知道，请指导我。

```
- (id)initWithCoder:(NSCoder *)aDecoder {
    if (self = [super initWithCoder:aDecoder]) {
        _facebook = [[Facebook alloc] initWithAppId:@"129649123867187" andDelegate:self];
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    self.facebookLikeView.href = [NSURL URLWithString:@"http://sis.uol.edu.pk/sis/MainForms/login.aspx"];
    self.facebookLikeView.layout = @"button_count";
    self.facebookLikeView.showFaces = NO;
    //    self.facebookLikeView.alpha = 1;
    [self.facebookLikeView load];
    facebookLikeView.delegate = self;
}

#pragma mark FBSessionDelegate methods

- (void)fbDidLogin {
    self.facebookLikeView.alpha = 1;
    [self.facebookLikeView load];
}

- (void)fbDidLogout {
    self.facebookLikeView.alpha = 1;
    [self.facebookLikeView load];
}

#pragma mark FacebookLikeViewDelegate methods

- (void)facebookLikeViewRequiresLogin:(FacebookLikeView *)aFacebookLikeView {
    [_facebook authorize:[NSArray array]];
}

- (void)facebookLikeViewDidRender:(FacebookLikeView *)aFacebookLikeView {
    [UIView beginAnimations:@"" context:nil];
    [UIView setAnimationDelay:0.5];
    self.facebookLikeView.alpha = 1;
    [UIView commitAnimations];
}

- (void)facebookLikeViewDidLike:(FacebookLikeView *)aFacebookLikeView {
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Liked"
                                                    message:@"You liked  my app. Thanks!"
                                                   delegate:self
                                          cancelButtonTitle:@"OK"
                                          otherButtonTitles:nil] ;
    [alert show];
}

- (void)facebookLikeViewDidUnlike:(FacebookLikeView *)aFacebookLikeView {
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Unliked"
                                                    message:@"You unliked my app ."
                                                   delegate:self
                                          cancelButtonTitle:@"OK"
                                          otherButtonTitles:nil] ;
    [alert show];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:43:29.940

您的代码似乎没问题，并且您正在使用[FacebookLikeView](https://github.com/brow/FacebookLikeView)的代码，当我尝试在我的应用程序中实现相同的代码时，它不会显示登录，因为*我忘记将**FacebookLikeView**与 IB 绑定。*我也遇到的另一个问题是，您可能需要`_facebook = [[Facebook alloc] initWithAppId:@"129649123867187" andDelegate:self];` 从方法中删除行`init`并将其放入`viewDidLoad`如下所示，因为在我的情况下它不会被调用！

```
if(!_facebook)
{
    _facebook = [[Facebook alloc] initWithAppId:@"129649123867187" andDelegate:self];
} 
```

我相信您不会忘记为`FBConnect`,`FacebookLikeViewDelegate`和`FBSessionDelegate`

如果您仍然无法解决问题，那么可能是您`Facebook App ID`尝试使用源代码中提供的默认应用程序 ID，它应该可以工作！

# mysql - MySQL中列之间的约束

> ID：15198261
> 
> 赞同：-1
> 
> 时间：2013-03-04T09:28:02.343
> 
> 标签：mysql, constraints

我有一张有两列的桌子。如何设置一个仅允许其中一列恰好为空的行的约束？

我当然会在应用层做一些预检查，但我也想直接在数据库层设置这个约束。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T09:47:34.593

尝试 mysql 运算符[AND OR 运算符](http://dev.mysql.com/doc/refman/5.0/en/non-typed-operators.html)

```
SELECT * 
    FROM  `table1` 
    WHERE (col1 IS NULL AND col2 IS NOT NULL) 
    OR (col2 IS NULL AND col1 IS NOT NULL) 
```

# teamcity - 在 TeamCity 中实施“所有除外”权限

> ID：15198263
> 
> 赞同：5
> 
> 时间：2013-03-04T09:28:04.387
> 
> 标签：teamcity

在 TeamCity Enterprise 7.1.3 中，我们目前为大多数应用程序设置了以下构建链

构建工件 > 部署到开发 > 开发验收测试 > 部署到集成 > 集成验收测试

开发人员都被设置为系统管理员，因为我们拥有开发和集成环境。但是，我们现在要添加一个“部署到测试”项目并将权限限制为少数人。

我已经设置了具有明确设置权限的角色，除了“部署到测试”之外的所有项目。这行得通，但是对于九十个（并且还在增长的）项目，它不是很容易维护。每次创建新项目时，都需要将权限添加到这些角色。

所以我的问题是：TeamCity 中是否有办法将角色设置为“部署以测试”除外，以便在添加新项目时该角色自动具有权限？如果没有，是否有管理此问题的最佳实践，或者我是否只需要在添加项目时不断修改权限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-03T08:45:43.830

在 TeamCity 7.1.3 中，您无法实现您的要求。您可以这样做的唯一方法是在添加项目时添加权限。但是，如果您更新到 TeamCity 8.x，现在就会出现项目层次结构的概念。您可以授予任何级别的权限，并且权限会继承到子项目。例如：

*   项目A
    *   子项目1
    *   子项目2
*   项目 B

如果您授予开发人员对项目 A 的权限，然后添加一个新的子项目：

*   项目A
    *   子项目1
    *   子项目2
    *   子项目3
*   项目 B

项目 A 中的所有 3 个子项目都将拥有权限，而无需更改权限模型。这应该完全达到你所追求的。

# objective-c - Cocoa：NSUInteger 和 UInt32 都定义为 32 位无符号整数。那么为什么会出现警告呢？

> ID：15198264
> 
> 赞同：0
> 
> 时间：2013-03-04T09:28:06.667
> 
> 标签：objective-c, xcode, cocoa, osx-lion, nsuinteger

查看标题，我可以看到对于我正在编译的 64 位系统，NSUInteger 和 UInt32 都被定义为 32 位无符号整数，所以为什么 Xcode 在我分配一个时在警告中声称精度损失另一个？

“隐式转换失去整数精度：'NSUInteger'（又名'unsigned long'）到'UInt32'（又名'unsigned int'）”

我可以看到警告将一个称为“long”，一个称为“int”，但由于它们都解析为该系统上相同的 32 位无符号整数，因此不应损失精度。

它实际上并没有引起任何问题，但似乎我可能误解了一些东西，所以想更好地理解。

有这个问题，但它解决了安全问题，而不是“为什么”： [我可以安全地将 UInt32 存储到 NSUInteger 吗？](https://stackoverflow.com/questions/2753852/can-i-safely-store-uint32-to-nsuinteger)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T09:36:52.877

在 64 位 OS X 平台上：

*   `NSUInteger`定义为`unsigned long`，并且
*   `unsigned long`是一个 64 位无符号整数。

所以`UInt32`并`NSUInteger`没有*相同*的大小，这就解释了编译器警告。

另请参阅“基础数据类型参考”中的[NSUInteger ：](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_DataTypes/Reference/reference.html#//apple_ref/doc/uid/20000018-SW71)

> 在构建 32 位应用程序时，NSUInteger 是一个 32 位无符号整数。64 位应用程序将 NSUInteger 视为 64 位无符号整数。

*备注：* 64 位 OS X 使用（与许多 Unix 和类 Unix 系统一样）**LP64**数据模型，这意味着**long**和**指针**具有 64 位。64 位 Windows 使用 IL32P64 数据模型，其中**long**为 32 位，**指针**为 64 位。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T09:34:17.550

`NSUInteger`甚至`NSInteger`可以在 iOS 和 OSX 中使用。

```
#if __LP64__ || (TARGET_OS_EMBEDDED && !TARGET_OS_IPHONE) || TARGET_OS_WIN32 || NS_BUILD_32_LIKE_64 
    typedef long NSInteger; 
    typedef unsigned long NSUInteger;
#else 
    typedef int NSInteger; 
    typedef unsigned int NSUInteger;
#endif 
```

iOS 是 32 位设备，而 OSX 是 64 位（早期的 OSX 是 32 位，甚至您可以选择为 32 位操作系统制作应用程序），因此它包含`if-else directive`设置的基础。

在 OSX 中我总是使用`%ld`with`NSInteger`但在 iOS 中它必须是`%d`.

如果你使用`%d`它`NSInteger`会显示警告 Loses integer precision。

# java - 如何为一组常量设置多个配置文件，以便轻松切换到另一个？

> ID：15198266
> 
> 赞同：0
> 
> 时间：2013-03-04T09:28:16.977
> 
> 标签：java

我需要维护一个字符串和 int 常量文件来为我的应用程序声明配置参数。为了获得良好的性能，我将它们声明为 `static final`一个简单的 java 类中的常量。但是现在我意识到我也应该能够拥有多个这样的配置文件并轻松地从使用一个配置文件切换到另一个配置文件。现在我有这样的文件：

```
public final class Config {
    public static final String A1="...";
    public static final String A2="...";
           ...
    public static final String AN="...";

} 
```

要使用任何配置参数，我只是这样使用：`Config.A1`

这些参数在应用程序中大量使用，因此我希望直接访问具有良好性能的字段（而不是通过 getter 方法）。

但是我应该如何维护多个这样的配置文件并允许轻松地从一个切换到另一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:31:52.733

```
public final class Config {
    public static final String A1;
    public static final String A2;
    ...
    public static final String AN;

    static
    {
        Properties props = new Properties ();
        try
        {
            props.load (new FileInputStream (System.getProperty ("config.file")));
        }
        catch (IOException ex)
        {
            throw new RuntimeException (ex);
        }
        A1 = props.getProperty ("A1");
        A2 = props.getProperty ("A2");
        ...
        AN = props.getProperty ("AN");
    }
} 
```

然后您可以使用系统属性`config.file`来指定要使用的配置文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T09:48:55.263

使用属性文件。存储应在系统属性中使用的属性文件。

这是你如何做到这一点的一个例子。您应该使用单例而不是静态方法，并且应该保持加载 ResourceBundle 而不是每次都加载属性文件。这只是一个例子。

```
import java.util.MissingResourceException;
import java.util.ResourceBundle;

public class Config {

    //Stores the currently used property file
    private static String route;

    public static String getRoute() {
        return route;
    }

    public static void setRoute(String route) {
        this.route = route;
    }

    //Read a value from a properties file.
    //Mikhail Vladimirov wrote another way of doing it, so this is just an example of another way of doing it.
    private static String fetchTextFrom(String key, String route) {
        String text = null;
        try {
            ResourceBundle bundle = ResourceBundle.getBundle(route);
            text = bundle.getString(key);
        } catch (MissingResourceException mre) {
            text = key;
        }
        return text;
    }

    //Read a value from the current properties file
    public static String fetchText(String key) {
        return fetchTextFrom(key, getRoute());
    }
} 
```

# c# - 拦截与获取 Windows 版本相关的 API 调用

> ID：15198268
> 
> 赞同：2
> 
> 时间：2013-03-04T09:28:22.027
> 
> 标签：c#, c++, c, api, call

我一直在玩 Homeworld 1，要运行它，您需要在 Windows NT 4 兼容模式下运行它。

Windows 8 出于某种原因没有此功能，这很烦人。

使用 Microsoft Application Compatibility Toolkit 我发现 Homeworld 执行 API 调用来获取 Windows 版本，并且它似乎停止工作，除非它认为它在 Windows NT 上运行（使用调试器我可以看到它调用 GetVersion 和 GetVersionEx） .

[http://technet.microsoft.com/en-us/library/cc749574(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc749574(v=ws.10).aspx)

将上述内容与 Microsoft Applocation Compat Toolkit 一起使用可修复此错误，但我在很多不同的计算机上玩此游戏，有些计算机无法使用上述方法。

我有什么办法可以制作某种包装器来拦截 API 调用并使用上述链接结构返回它们，以便程序认为它在 NT 上运行？我见过很多你放在一个文件夹中的 DLL，它可以拦截某些调用，虽然我不确定它们是如何工作的，我假设它们是用 C、C++ 编写的。

我真正了解的唯一语言是 C#，我认为它不能做我想做的事，所以如果有人能指出我正确的方向，请帮助，给我提示或指出我可以得到的地方更多的帮助会很棒！

谢谢你的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:43:40.907

您可以使用 api hooking 库，这里是著名的 easyhook 库的[教程](http://www.codeproject.com/Articles/27637/EasyHook-The-reinvention-of-Windows-API-hooking)。

为您的应用程序挂钩 GetVersionEx api 并返回您想要的内容。

# cakephp - Cakephp 多态行为错误

> ID：15198269
> 
> 赞同：0
> 
> 时间：2013-03-04T09:28:22.707
> 
> 标签：cakephp

我正在使用此[链接](https://github.com/lecterror/cakephp-feedback-plugin)中的反馈插件来使用 PolymorphicBehavior 在我的应用程序中的任何模型上添加评论。我的应用程序出现 2 个错误，上面写着

Strict (2048)：PolymorphicBehavior::setup() 的声明应该与 ModelBehavior::setup(Model $model, $config = Array) 兼容 [APP\Plugin\Feedback\Model\Behavior\PolymorphicBehavior.php，第 93 行]

Strict (2048)：PolymorphicBehavior::afterFind() 的声明应与 ModelBehavior::afterFind(Model $model, $results, $primary) [APP\Plugin\Feedback\Model\Behavior\PolymorphicBehavior.php，第 93 行] 兼容

不确定是什么导致了这些错误。如果有人可以帮助我，那就太棒了。这是我的 PolymorphicBehavior.php 的代码。请不要第 93 行是代码中的最后一行

```
<?php

App::uses('ModelBehavior', 'Model');

//PolymorphicBehavior class

class PolymorphicBehavior extends ModelBehavior {

//defaultSettings property

protected $_defaultSettings = array(
'modelField' => 'model',
'foreignKey' => 'foreign_key'
);

// setup method

public function setup($Model, $settings = array()) {
if (!isset($this->settings[$Model->alias])) {
$this->settings[$Model->alias] = $this->_defaultSettings;
}
$this->settings[$Model->alias] = array_merge($this->settings[$Model->alias], (array) $settings);
}

//afterFind method

public function afterFind($Model, $results, $primary = false) {
extract($this->settings[$Model->alias]);
if (App::import('Vendor', 'MiCache')) {
$models = MiCache::mi('models');
} else {
$models = App::objects('Model');
}
if ($primary && isset($results[0][$Model->alias][$modelField]) && isset($results[0][$Model->alias][$foreignKey]) && $Model->recursive > 0) {
foreach ($results as $key => $result) {
$associated = array();
$model = Inflector::classify($result[$Model->alias][$modelField]);
$foreignId = $result[$Model->alias][$foreignKey];
if ($model && $foreignId && in_array($model, $models)) {
$result = $result[$Model->alias];
if (!isset($Model->$model)) {
$Model->bindModel(array('belongsTo' => array(
$model => array(
'conditions' => array($Model->alias . '.' . $modelField => $model),
'foreignKey' => $foreignKey
)
)));
}
$conditions = array($model . '.' . $Model->$model->primaryKey => $result[$foreignKey]);
$recursive = -1;
$associated = $Model->$model->find('first', compact('conditions', 'recursive'));
$name = $Model->$model->display($result[$foreignKey]);
$associated[$model]['display_field'] = $name?$name:'*missing*';
$results[$key][$model] = $associated[$model];
}
}
} elseif(isset($results[$Model->alias][$modelField])) {
$associated = array();
$model = Inflector::classify($result[$Model->alias][$modelField]);
$foreignId = $results[$Model->alias][$foreignKey];
if ($model && $foreignId) {
$result = $results[$Model->alias];
if (!isset($Model->$model)) {
$Model->bindModel(array('belongsTo' => array(
$model => array(
'conditions' => array($Model->alias . '.' . $modelField => $model),
'foreignKey' => $foreignKey
)
)));
}
$conditions = array($model . '.' . $Model->$model->primaryKey => $result[$foreignKey]);
$recursive = -1;
$associated = $Model->$model->find('first', compact('conditions', 'recursive'));
$name = $Model->$model->display($result[$foreignKey]);
$associated[$model]['display_field'] = $name?$name:'*missing*';
$results[$model] = $associated[$model];
}
}
return $results;
}

//display method

public function display($Model, $id = null) {
if (!$id) {
if (!$Model->id) {
return false;
}
$id = $Model->id;
}
return current($Model->find('list', array('conditions' => array($Model->alias . '.' . $Model->primaryKey => $id))));
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:40:24.130

只需调整插件文件以进行建议的更改。参考实现是这样的：

```
// /lib/Cake/Model/ModelBehavior.php
public function setup(Model $model, $config = array()) {
public function afterFind(Model $model, $results, $primary) { 
```

...所以你需要改变这个：

```
public function setup($Model, $settings = array()) {
public function afterFind($Model, $results, $primary = false) { 
```

...进入这个：

```
public function setup(Model $Model, $settings = array()) {
public function afterFind(Model $Model, $results, $primary) { 
```

如果您仍然收到太多错误，您可能需要隐藏严格的警告或切换到更好的插件。

# c++ - 带有删除器的 unique_ptr

> ID：15198276
> 
> 赞同：1
> 
> 时间：2013-03-04T09:28:47.177
> 
> 标签：c++, smart-pointers, unique-ptr

我正在尝试与删除器一起使用`std::unique_ptr`。这是我的代码：

```
template<class T>
struct Deleter
{
    void operator()(T* p) 
    {
        delete[] p;
    }
};

void Test()
{
    vector<unique_ptr<char>> v;

    for(size_t i = 0; i < 5; ++i)
    {
        char* p = new char[10];
        sprintf(p, "string %d", i);
        v.push_back( unique_ptr<char, Deleter<char>>(p) );  // error is here
    }
} 
```

> 错误 C2664: 'void std::vector<_Ty>::push_back(std::unique_ptr &&)' : 无法将参数 1 从 'std::unique_ptr<_Ty,_Dx>' 转换为 'std::unique_ptr<_Ty> && '

编译器：VC++ 2012。我该如何解决这个问题？我的目标是`unique_ptr`与调用`delete[]`而不是 default的自定义删除器一起使用`delete`。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T09:30:52.827

没有必要，因为`unique_ptr`已经知道数组了！

```
std::unique_ptr<char[]> p(new char[10]);
sprintf(p.get(), "..."); 
```

数组专业化甚至为您提供类似数组的访问`p[0] = 'a';`等。

当然，您的矢量类型必须匹配：`std:vector<std::unique_ptr<char[]>>`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-04T09:30:56.817

`unique_ptr<char>`并且`unique_ptr<char, Deleter<char>>`是两种不同的类型。因此，您应该将您的向量声明为：

```
vector<unique_ptr<char, Deleter<char>>> v; 
```

# c# - 使用 c# 的 sqlserver 备份出现问题

> ID：15198279
> 
> 赞同：0
> 
> 时间：2013-03-04T09:28:53.717
> 
> 标签：c#, sql-server-2008-r2, database-backups

我想使用**C#**代码创建特定数据库的备份，为此我使用以下代码。

**代码**

```
 Console.WriteLine("Backup manager");

        Backup bkpDBFull = new Backup();

        bkpDBFull.Action = BackupActionType.Database;

        bkpDBFull.Database = "SampleDB";

        bkpDBFull.Devices.AddDevice(@"D:\Temp\Back\fulBak.bak", DeviceType.File);
        bkpDBFull.BackupSetName = "Database backup";
        bkpDBFull.BackupSetDescription = "Code backup";
        bkpDBFull.Initialize = false;

        bkpDBFull.PercentComplete += CompletionStatusInPercent;
        bkpDBFull.Complete += Backup_Completed;

        Server MyServer = new Server("Data Source=.;Initial Catalog=SampleDB;User ID=user;Password=pass");

        bkpDBFull.SqlBackup(MyServer); 
```

和两个事件的以下。

**完成状态百分比**

```
 private static void CompletionStatusInPercent(object sender, PercentCompleteEventArgs args)
    {
        Console.Clear();
        Console.WriteLine("Percent completed: {0}%.", args.Percent);
    } 
```

**备份完成**

```
 private static void Backup_Completed(object sender, ServerMessageEventArgs args)
    {
        Console.WriteLine("Hurray...Backup completed.");
        Console.WriteLine(args.Error.Message);
    } 
```

在整个代码中，它在下面的代码中只有一个问题

**问题代码**

```
 Server MyServer = new Server("Data Source=.;Initial Catalog=SampleDB;User ID=user;Password=pass"); 
```

我想我以错误的方式输入了 sqlserver 的名称。

我需要如何解决此问题的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T09:46:07.190

你混淆了构造函数。new Server 的参数可以是服务器的名称（字符串），或者是`Microsoft.SqlServer.Management.Common.ServerConnection` smo 名称空间中的类的实例。它的构造函数将连接字符串作为参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T09:59:36.020

在这里，托尼霍普金森我做了更多的研究并提出了一个解决方案......

我只是用以下代码简单地删除了我的**有问题**的代码......

```
 SqlConnection con = new SqlConnection(@"Integrated Security=SSPI; Data Source=.");
        ServerConnection sc = new ServerConnection(con);
        Server MyServer = new Server(sc); 
```

所以，我希望这对许多其他人有用......

# git - Git本地副本似乎已经丢失了整个历史

> ID：15198281
> 
> 赞同：3
> 
> 时间：2013-03-04T09:29:07.570
> 
> 标签：git, github, tortoisegit

抱歉，如果我的术语有误，我对 Git 没有那么丰富的经验。我有一个来自 github repo 的本地 repo，在停电后，它现在显示

```
HEAD as 0000000000000000000000000000000000000000 
```

以及标记为添加的每个文件。TortoiseGit 显示`FETCH_HEAD`为我唯一的本地分支，即使我有几个分支以及 master。远程分支似乎记得发生了什么 - 它具有源的远程 URL 和最近分支的选择。

我真的很紧张尝试做任何事情，以防它破坏一切，因为我有本地（非推送）更改。我可以查找此问题的特定术语吗？

我在 Windows 上使用 tortoise-git。我确实安装了 git 命令行，但除了基础知识之外，我真的不知道任何事情。

![在此处输入图像描述](../Images/f7b5a5b50e4032c50a2c38d42f5eedb7.png)

我应该补充一点，我未推送的更改很少——实际上是 2 个文件——因为我在中断前刚刚完成了推送。因此，如果这比尝试恢复本地提交更容易，那么恢复与远程存储库同步就好了。

当我跑步时，`git fsck`我得到：

> 错误：无效HEAD错误：无法解包071bf20e651e1ac9ea91821ee947786138f79156头错误：inflateEnd：流一致性错误（没有消息）致命：松散对象071bf20e651e1ac9ea91821ee947786138f79156（存储在的.git / OBJ学分/ 07 / 1bf20e651e1ac9ea91821ee947786138f79156）已损坏

当我跑步时，`git reflog`我得到：

> 致命：错误的默认修订版“头”

当我运行`git reset --hard`它失败：

> 致命：无法将“HEAD”解析为有效参考。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:38:09.273

您未推送的提交很可能仍然存在，只是分支引用丢失了。

恢复它们的最佳方法如下：

*   复制整个目录，你永远不知道
*   运行一个`git fsck`
*   在[reflog](http://gitolite.com/concepts/reflog.html)中查找您的最后一次提交。这很可能是最后一个分支提示
*   在其上创建一个分支： `git checkout -b laststate`
*   将未提交的文件保存在工作目录之外。
*   硬重置为最后一个分支提示 SHA1`git reset --hard <sha1>`
*   收回未提交的更改

* * *

所以看到你的编辑你的回购真的搞砸了。

HEAD 是无效的参考，现在你最后的机会是将它设置为`origin/master`

```
git reset --hard origin/master 
```

应该解决问题并让你的头回来。

# android - Android 地图 v2：MyLocation-Button 仅适用于 GPS

> ID：15198285
> 
> 赞同：2
> 
> 时间：2013-03-04T09:29:22.697
> 
> 标签：android, google-maps, gps, location

我有一个关于使用内置“我的位置”按钮的问题。在我的设置中，我有

`mMap.setMyLocationEnabled(true);`

因此，该按钮呈现在地图上，当 GPS 打开时，它就像一个魅力。当 GPS 关闭时，它不再工作。“我的位置”按钮的标准行为是否仅在启用 GPS 时才起作用？

我想在地图上显示大致位置，即使 GPS 已禁用。我是否必须使用 LocationManager 来完成此操作？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T04:20:46.607

使用 Android Maps API V2，您可以使用[`LocationSource`](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/LocationSource)和[`LocationSource.OnLocationChangedListener`](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/LocationSource.OnLocationChangedListener)传递您自己的位置更新并控制地图上显示的位置。

例如，您可以通过普通的 收听`GPS_PROVIDER`或`NETWORK_PROVIDER`位置更新[`LocationListener`](http://developer.android.com/reference/android/location/LocationListener.html)，并将这些位置传递给`LocationSource.OnLocationChangedListener`. 无论您输入什么，都会在地图上显示。

首先，`OnLocationChangedListener`在你的声明一个对象`Activity`：

```
private OnLocationChangedListener mListener; //Used to update the map with new location 
```

然后，为您的活动实施 LocationSource，例如：

`public class MapScreen extends FragmentActivity implements LocationSource {`

在`onCreate()`中，在设置 Map 对象时`LocationSource`为此设置：`Activity`

```
...
// Show the location on the map
mMap.setMyLocationEnabled(true);
// Set location source
mMap.setLocationSource(this);
... 
```

然后，添加接口所需的方法`LocationSource`：

```
/**
 * Maps V2 Location updates
 */
@Override
public void activate(OnLocationChangedListener listener) {
    mListener = listener;       
}

/**
 * Maps V2 Location updates
 */
@Override
public void deactivate() {
     mListener = null;      
} 
```

最后一部分是将位置更新从正常`LocationListener`传递到`Activity`实现`LocationSource`：

```
//Update real-time location on map
if (mListener != null) {
    mListener.onLocationChanged(location);
} 
```

如果您正在收听`GPS_PROVIDER`该提供程序的位置并将其传递到该`mListener.onLocationChanged()`方法中，并且您关闭了 GPS，如果您没有对 采取任何进一步的操作`LocationSource`，则最新的 GPS 位置将保留在屏幕上。此时您可以收听`NETWORK_PROVIDER`并将这些位置更新传递给该`mListener.onLocationChanged()`方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T16:38:28.243

您需要缓存最后一个已知位置，并在您没有​​打开 gps 或 gps 不可用时显示它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-12T13:48:45.693

看来您必须请求位置更新。即使您没有在代码中使用传入位置，也会出现蓝点。

# java - 如何将 jframe 的大小调整为 netbeans 中的屏幕分辨率？

> ID：15198291
> 
> 赞同：5
> 
> 时间：2013-03-04T09:29:37.497
> 
> 标签：java, netbeans-6.9

我正在尝试使用 netbeans 中的摆动开发应用程序。所以我想将我的应用程序框架调整为屏幕分辨率。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T09:33:09.653

```
frame.setExtendedState(JFrame.MAXIMIZED_BOTH);
frame.setVisible(true);
// If you want to always keep the frame at this size
frame.setResizable(false); 
```

这是一个非常简单的示例，可能是您应用程序的良好开端：

```
import javax.swing.JFrame;

public class MyFrame
{
    private JFrame frame;

    public MyFrame()
    {
        frame = new JFrame();

        frame.setExtendedState(JFrame.MAXIMIZED_BOTH);
        frame.setVisible(true);
        frame.setResizable(false);
    }
    public static void main(String[] args)
    {
        new MyFrame();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T10:19:10.913

您可以通过以下一行代码完成它

```
 frame.setSize(Toolkit.getDefaultToolkit().getScreenSize()); 
```

# iphone - PSTCollectionView 崩溃并出现 EXC_BAD_ACCESS

> ID：15198294
> 
> 赞同：1
> 
> 时间：2013-03-04T09:29:42.610
> 
> 标签：iphone, objective-c, cocoa, exc-bad-access

我在我的应用程序中使用 PSTCollectionView。在我将 PSTCollectionViewController 的子类添加到 UINavigationController 链之前，一切都运行良好。当我点击导航控制器的后退按钮时，应用程序崩溃`EXC_BAD_ACCESS (code=1, address=0xc0000010)`

PS：我使用ARC。感谢帮助。

```
#0  0x01592d15 in objc_retain ()
#1  0x00030dde in -[PSTCollectionView setDelegate:] at <project_path>/Controllers/PSTCollectionView/PSTCollectionView.m:1225
#2  0x00725596 in -[UIScrollView dealloc] ()
#3  0x00023805 in -[PSTCollectionView dealloc] at <project_path>/Controllers/PSTCollectionView/PSTCollectionView.m:227
#4  0x01592e3d in _objc_rootRelease ()
#5  0x00718b73 in -[UIView(Hierarchy) removeFromSuperview] ()
#6  0x00728563 in -[UIScrollView removeFromSuperview] ()
#7  0x00714c10 in -[UIView dealloc] ()
#8  0x01592e3d in _objc_rootRelease ()
#9  0x01592e00 in objc_release ()
#10 0x01593c50 in (anonymous namespace)::AutoreleasePoolPage::pop(void*) ()
#11 0x01bf2ea8 in _CFAutoreleasePoolPop ()
#12 0x01bf580b in __CFRunLoopRun ()
#13 0x01bf4d84 in CFRunLoopRunSpecific ()
#14 0x01bf4c9b in CFRunLoopRunInMode ()
#15 0x024867d8 in GSEventRunModal ()
#16 0x0248688a in GSEventRun ()
#17 0x006e2626 in UIApplicationMain ()
#18 0x00001f4d in main at <project_path>main.m:16
#19 0x00001e75 in start () 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:00:06.683

这似乎与ARC有关。我通过更改 PSTCollectionView.m 来修复它，如下所示：

```
- (void)setDelegate:(id<PSTCollectionViewDelegate>)delegate {
    if( !delegate )
        return;

    //Rest of the function as normal
} 
```

这对我来说没有多大意义，但它确实有效。

# c++ - c ++：将可变数量的输入存储到字符缓冲区中

> ID：15198299
> 
> 赞同：0
> 
> 时间：2013-03-04T09:29:54.390
> 
> 标签：c++, user-input

我需要格式化我的程序以获取可变数量的输入。通过变量，我的意思是输入中的行数是未知的。输入应按如下方式传递：

```
cat input | ./myProg 
```

我编写了这个版本的程序，它成功地抓取了一行输入，将其存储到一个字符缓冲区中，然后打印到控制台：

```
#include <iostream>
#include <fstream>
using namespace std;

int main(void)
{
    char outputData[1024];

    cin.getline(outputData,1024);

    cout << outputData;

    return 0;
} 
```

我需要帮助概括该程序以获取可变数量的行并将它们存储在一个大的字符缓冲区中以供以后操作。我编写了以下代码，但它没有将任何信息打印到控制台：

```
#include <iostream>
#include <fstream>
using namespace std;

int main(void)
{    
    char outputData[1024];

    while(!cin.eof())
    {
    cin.getline(outputData,1024);
    }

    cout << outputData;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T09:35:31.973

使用字符串和向量。

```
#include <vector>
#include <string>
#include <iostream>

std::vector<std::string> lines;

for (std::string line; std::getline(std::cin, line); )
{
    v.push_back(std::move(line));
} 
```

[在有人来建议 istream 迭代器和子类化之前`std::string`，我敢你用更少的代码来做这件事 :-)]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T09:36:26.170

在您当前的解决方案中，您会在每个循环中覆盖缓冲区的内容，因此它显然不会像您想要的那样打印每一行。

`std::string`无论如何，如果您想存储可变数量的字符，您应该使用，您当前的代码仅适用于 1024 个字符或更少的行。要存储任意数量的行，您可以将所有行连接到一个大的 std::string 中，或者如果您想要更轻松的每行访问，您可以将它们存储在一个`std::vector`字符串中。要直接读入`std::string`并让 C++ 为您处理内存管理，请使用`std::getline()`而不是`cin.getline()`

```
#include <iostream>
#include <string>
#include <vector>

int main()
{
    std::string line;
    std::vector<std::string> lines;
    while (std::getline(std::cin, line)) {
        lines.push_back(line);
    }

    // do something with lines, eg. print them by iterating through the vector
    // and printing each string in it
} 
```

# android - 如何根据 JSONObject 响应显示 toast

> ID：15198309
> 
> 赞同：0
> 
> 时间：2013-03-04T09:30:10.107
> 
> 标签：android, json, android-asynctask, toast

我正在做一个应用程序，其中我使用用户名和密码登录，如果登录成功，我会得到 user_id 和所有，但是当无效用户尝试登录时，必须向`toast message`用户显示。我得到`{"error":"invalid_grant"}`了我的 JSONresponse，并且能够在字符串中获取 JSONObject。

```
JSONObject jObject = new JSONObject(result);
String aJsonString = jObject.getString("error"); 
```

这里 aJsonString 有 error 的值。

现在，我的问题是：当无效用户尝试登录时如何显示错误消息？并且，如果用户是有效的，则将用户传递给`postExecute()`方法以进行进一步的操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T09:34:04.460

```
JSONObject jObject;

    try {
        jObject = new JSONObject(sampledata);
        if (jObject.has("error")) {
String aJsonString = jObject.getString("error");
Toast.makeText(ActivityName.this, aJsonString, Toast.LENGTH_LONG).show();
        } else {
    Toast.makeText(ActivityName.this, "Login Successful", Toast.LENGTH_LONG).show();
        }
    } catch (JSONException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    } 
```

# jquery - 尝试使用 jQuery 访问下拉菜单选项文本值

> ID：15198310
> 
> 赞同：0
> 
> 时间：2013-03-04T09:30:12.843
> 
> 标签：jquery, html

在 HTML 中，我有一个下拉菜单，我正在尝试访问选项文本。

```
<select>
<option value="0">Please Select Location</option>
<option value="1">London</option>
<option value="2">Paris</option>
<option value="3">Tokyo</option>
<option value="4">Maimi</option>
</select> 
```

现在我想`Maimi`使用 jQuery 函数进行访问。但我没有办法解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:30:40.283

在这里我得到了答案：

```
$("#dropdownid option:selected").text(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T09:37:27.013

试试这个方法

```
$(document).ready(function() {
    $('#yourSelectId').change(function() {
        $('#yourSelectId option:selected').html();
    });
}); 
```

# jquery - 如何将 TR 与同一个班级分组？

> ID：15198311
> 
> 赞同：0
> 
> 时间：2013-03-04T09:30:15.407
> 
> 标签：jquery, grouping

我有一个表结构。我想将第一个子 TD 中具有相同内容的所有 TR 放在一起，并在组之前添加 TR。所以，我试图用相同的内容对 TR 进行分组。

**我的结构是**

```
 <tbody>
         <tr>
              <td class="groupBy">www.bing.com</td>
              <td>2</td>
         </tr>
         <tr>
              <td class="groupBy">www.google.com</td>
              <td>5</td>
         </tr>
          <tr>
              <td class="groupBy">www.bing.com</td>
              <td>2</td>
         </tr>
          <tr>
              <td class="groupBy">www.yahoo.com</td>
              <td>8</td>
         </tr>
          <tr>
              <td class="groupBy">www.google.com</td>
              <td>8</td>
         </tr>
         <tr>
              <td class="groupBy">www.bing.com</td>
              <td>2</td>
         </tr>
    </tbody> 
```

**我想在jquery之后输出下面**

```
 <tbody> 
            <tr>
                <p>www.bing.com</p>
            </tr>
             <tr>
                  <td class="groupBy">www.bing.com</td>
                  <td>2</td>
             </tr>
             <tr>
                  <td class="groupBy">www.bing.com</td>
                  <td>2</td>
             </tr>
             <tr>
                  <td class="groupBy">www.bing.com</td>
                  <td>2</td>
             </tr>
             <tr>
                <p>www.google.com</p>
            </tr>
             <tr>
                  <td class="groupBy">www.google.com</td>
                  <td>5</td>
             </tr>
              <tr>
                  <td class="groupBy">www.google.com</td>
                  <td>5</td>
             </tr>
             <tr>
                <p>www.yahoo.com</p>
            </tr>
              <tr>
                  <td class="groupBy">www.yahoo.com</td>
                  <td>8</td>
             </tr>
</tbody> 
```

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:08:32.513

您所描述的是对元素进行排序而不是对它们进行分组，这是一个肮脏的解决方案：

```
var arr = [], s = [];

$('tr').sort(function(a, b){
   return $(a).text() > $(b).text(); 
}).each(function(i, v){
    var t = $('td:first', v).text();
    if ( arr.indexOf(t) === -1) {
       arr.push(t);
       s.push(v);
    }
}).appendTo('tbody').filter(s).before(function(){
    return '<tr class="header"><td><p>' +  $('td:first', this).text() +  '</p></td></tr>';
}); 
```

[http://jsfiddle.net/SD8at/](http://jsfiddle.net/SD8at/)

# java - 嵌入式 Java 键值存储

> ID：15198316
> 
> 赞同：6
> 
> 时间：2013-03-04T09:30:31.923
> 
> 标签：java, nosql, key-value-store

我正在寻找在我的应用程序中使用的持久键值存储。具体来说：

1.  它必须可以嵌入到 Java 应用程序中。纯 Java 解决方案将是最好的。
2.  数据必须保存在磁盘上，内存中的存储不是一种选择。内存占用大小很重要，键值映射的整体大小可能非常大。理想情况下，我希望在存储上实现某种 LRU 缓存。
3.  键和值都是字符串（不需要支持 Java 对象序列化等）。
4.  并发读/写很重要。

在这种情况下，最好的选择是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T10:07:38.633

[OrientDB](http://www.orientdb.org/)（[SO 信息页面](https://stackoverflow.com/tags/orient-db/info)）似乎符合要求。

文档有时会有些缺失，但我相信它符合您列出的标准。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T09:36:19.943

我不知道这是否是最好的，但[Hazelcast](http://www.hazelcast.com/)有这些选择。您可以将数据存储在内存中，并在磁盘上进行备份。hazelcast 上有一个[例子](http://hazelcast.com/docs/2.0/manual/multi_html/ch02s03.html)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-04T09:43:53.990

当必须支持大数据时，我们不得不替换普通的 HashMap 时，我使用了[Voldemort 。](http://www.project-voldemort.com/voldemort/)表演真的很棒。

> 值 = store.get(key)
> 
> store.put（键，值）
> 
> 存储.删除（键）

在下一次尝试键值存储的机会中，我很可能会尝试[Redis](http://redis.io/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-04T09:35:06.553

我会使用 SQLite ( [SQLite](http://www.sqlite.org/ "SQLite") )。它是一个类似于文件存储的关系数据库，允许您存储键值和您可能需要的任何其他内容。它的占用空间非常小，而且速度非常快。

由于所有这些原因，它在 Android 应用程序中非常常用。

# java - 为什么我们使用 DataSource 而不是 DriverManager？

> ID：15198319
> 
> 赞同：97
> 
> 时间：2013-03-04T09:30:35.387
> 
> 标签：java, jdbc, datasource

我正在阅读 Java JDBC 规范（vr. 4），我遇到了这个声明：

> DataSource——这个接口是在 JDBC 2.0 Optional Package API 中引入的。它优于 DriverManager，因为它允许有关底层数据源的详细信息对应用程序透明

我想了解的是 a[`Connection`](https://docs.oracle.com/javase/8/docs/api/java/sql/Connection.html)和 a之间的区别是什么[`DataSource`](https://docs.oracle.com/javase/8/docs/api/javax/sql/DataSource.html)，以及它为什么存在。我的意思是，上面的块说有关数据源的详细信息对应用程序是透明的，但不会在属性文件中外部化数据库属性（如用户名、密码、url 等）然后使用 DriverManager 以相同的方式工作？

并且[`DataSource`](https://docs.oracle.com/javase/8/docs/api/javax/sql/DataSource.html)创建的接口是否只是为了有一种通用的方式来返回可以池化的连接等？在 Java EE 中，应用程序服务器是否实现了此接口以及部署的应用程序是否具有对数据源而不是连接的引用？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-03-04T10:04:32.097

更好的可扩展性和维护

因为`DriverManager`您需要知道所有详细信息（主机、端口、用户名、密码、驱动程序类）才能连接到 DB 并获得连接。将它们外部化到属性文件中并不会改变您需要了解它们的事实。

使用 a`DataSource`您只需要知道 JNDI 名称。AppServer 关心细节，不是由客户端应用程序的供应商配置，而是由托管应用程序的管理员配置。

可扩展性：

假设您需要自己创建连接，您将如何处理不断变化的负载，有时您有 10 个用户，有时您有 1000 个用户，您不能只在需要一个连接时获得连接，然后“释放”它，这样数据库服务器就不会退出连接，这会导致您进入连接池。`DriverManager`不提供，`DataSource`确实。

如果您要自己编写连接池，则必须使用`DriverManager`，否则请使用`DataSource`.

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2013-03-04T09:43:58.410

## `DriverManager`

*   由于在 java 类中创建/关闭连接，会妨碍应用程序的性能。
*   不支持连接池。

## `DataSource`

*   由于连接不是在类中创建/关闭，因此提高了应用程序性能，它们由应用程序服务器管理，并且可以在运行时获取。
*   它提供了一个创建连接池的工具
*   有助于企业应用

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-04-13T14:16:35.667

下面的代码显示了两种获取连接的方法。

`mySqlDataSource`如果此行被注释，则无需了解 URL 。

```
public class MySqlDataSourceTest {

public static void main(String[] args) throws SQLException, ClassNotFoundException {

    /************** using MysqlDataSource starts **************/
    MysqlDataSource d = new MysqlDataSource();
    d.setUser("root");
    d.setPassword("root");
//  d.setUrl("jdbc:mysql://localhost:3306/manavrachna");
    d.setDatabaseName("manavrachna");
    Connection c =  (Connection) d.getConnection();
    /************** using MysqlDataSource ends**************/

    /************** using DriverManager start **************/
    Class.forName("com.mysql.jdbc.Driver");
    Connection c=(Connection) DriverManager.getConnection("jdbc:mysql://localhost:3306/manavrachna","root","root");
    /************** using DriverManager ends **************/

    Statement st=(Statement) c.createStatement();
    ResultSet rs=st.executeQuery("select id from employee");
    while(rs.next())
    {
        System.out.println(rs.getInt(1));
    }

}

} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-06-11T17:34:07.127

`DataSource``DataSource`对象可以提供连接池和分布式事务，因此如果您需要这些功能之一或两者，您可能必须使用这些功能。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-07-22T04:36:43.140

我们可以使用数据源获得连接，如下所示。使用连接来执行任何数据库查询。

```
DataSource datasource = (DataSource) new InitialContext().lookup(dataSourceName);
Connection connection = datasource.getConnection(); 
```

# c# - 继承Usercontrol组件的使用？

> ID：15198323
> 
> 赞同：0
> 
> 时间：2013-03-04T09:30:47.140
> 
> 标签：c#, winforms, inheritance, user-controls

我有一个关于用户控件组件的问题。我找不到描述它的方法，所以我会告诉你我有什么以及问题是什么。

我的项目必须有多个用户控件，可以拖动和调整大小。有一个主用户控件UC，它的两个角有两个pictureBox。一个用于调整大小功能，一个用于拖动功能。

![图片1](../Images/230f9a786f4cdb9939858aa36f97ed25.png)

基本上，当我创建一个新的用户控件时，它有那些图片框，因为无论创建了多少用户控件，程序都必须有一个选项来拖动它们。

如果创建了 3 个继承的用户控件，这就是它的外观：

![在此处输入图像描述](../Images/87813967cc603db249c41abd9727d975.png)

* * *

现在的问题：

1.  用户控件类在表单上看不到面板和东西。我用谷歌搜索了一下，偶然发现了自定义事件，但我一点也不了解它们。
2.  如果有 3 个同名的图片框，我如何判断我必须拖动哪个用户控件？

我被困在这里，任何帮助表示赞赏。

*培训中的开发人员*

**抱歉链接图片，但我只有 5 名声望。添加图片需要10个声望...**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:58:06.163

每个控件都具有控制控件在其容器内的位置和大小的、 和[`Left`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.left.aspx)属性[`Top`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.top.aspx)。[`Width`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.width.aspx)[`Height`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.height.aspx)

您不需要查看`Panel`，但是如果需要，您可以访问[`Parent`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.parent.aspx)控件的属性。

# .net - 如何使用 Reflexii 在程序集中修改 InternalsVisibleTo？

> ID：15198325
> 
> 赞同：0
> 
> 时间：2013-03-04T09:30:51.120
> 
> 标签：.net, reflector, internalsvisibleto, reflexil

我会在程序集中修改 InternalsVisibleTo 属性值吗？在 Reflector 我看到 [assembly: InternalsVisibleTo(AssemblyName)] 但我没有看到可以修改的 AssemblyInfo.cs。如果可能的话，我想将属性中的 AssemblyName 更改为我的本机程序集的名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:55:33.243

我觉得你做不到。首先，属性的值是恒定的，因此不能通过反射改变。其次，您不能更改程序集的属性。

# java - Java - 我需要在 Swing GUI 程序中更新 JTextFields

> ID：15198328
> 
> 赞同：0
> 
> 时间：2013-03-04T09:31:08.673
> 
> 标签：java, swing, user-interface, jtextfield

我有一个程序可以查看单个记事本文件，其中包含类似于以下信息：

```
Cardiff : 3245658

Bristol : 4726485

Manchester : 4728945 
```

这些地点和数字来自一个自动系统，数字每 20 秒左右变化一次。我需要创建一个循环（我猜），这样当数字改变时，我的程序将回顾记事本文件并更新`JTextField`

Ps 我已经创建了程序，以便它查看文件，获取所需信息并将其放在正确的位置，使用 ArrayList，

我需要帮助的是如何在文件发生更改时自动更新代码，我需要在不使用任何类型的情况下执行此操作`Jbuttons`，它只需要自己完成即可。

我的整个代码：

```
package window;

import java.awt.Color;
import java.awt.EventQueue;
import java.io.BufferedReader;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;
import java.util.ArrayList;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JTextField;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class MapTest {

    private JFrame frame;
    static JTextField txtCardiff;
    static JTextField txtBristol;
    static JTextField txtSheffield;
    static JTextField txtDerby;
    static JTextField txtGlasgow;
    static JTextField txtFalkirk;
    static JTextField txtNewcastle;
    static JTextField txtLeeds;
    static JTextField txtPreston;
    static JTextField txtManchester;
    static JTextField txtWolverhampton;
    static JTextField txtBirmingham;
    static JTextField txtMiltonKeynes;
    static JTextField txtPeterborough;
    static JTextField txtColindale;
    static JTextField txtStepneyGreen;
    static JTextField txtSlough;
    static JTextField txtFaraday;
    static JTextField txtGuildford;
    static JTextField txtSouthbank;

    static BufferedReader CSVFile = new BufferedReader(new FileReader
        ("C:/Users/606854007/workspace/NetworkAppTest/jar/window/Cardiff.txt"));
// putting static infront of this Br ' CSVFile' gives: 
//Unhandled exception type FileNotFoundException. 
//but when i take away the 'static' it causes a problem in the 'FileCheckerWorker' class.
// (Will comment where and what)

    ArrayList<String> csv = new ArrayList<String>();

    /**
    private String output = "";
    private String output1 = "";
    private String output2 = "";
    private String output3 = "";
    private String output4 = "";
    private String output5 = "";
    private String output6 = "";
    private String output7 = "";
    private String output8 = "";
    private String output9 = "";
    private String output10 = "";
    private String output11 = "";
    private String output12 = "";
    private String output13 = "";
    private String output14 = "";
    private String output15 = "";
    private String output16 = "";
    private String output17 = "";
    private String output18 = "";
    private String output19 = "";
    **/
    /** * Launch the application. */
    public static void main(String[] args) {
         try {
                UIManager.setLookAndFeel(
                            UIManager.getSystemLookAndFeelClassName());

            } catch (ClassNotFoundException e1) {
                e1.printStackTrace();

            } catch (InstantiationException e1) {
                e1.printStackTrace();

            } catch (IllegalAccessException e1) {
                e1.printStackTrace();

            } catch (UnsupportedLookAndFeelException e1) {
                e1.printStackTrace();
            }
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    MapTest window = new MapTest();
                    window.frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });

    }

    /**
     * Create the application.
     * 
     * @throws IOException
     */
    public MapTest() throws IOException {
        try {
            initialize();

        } catch (FileNotFoundException e) {
            e.printStackTrace();
        }
    }

    /**
     * Initialise the contents of the frame.
     * 
     * @param output
     * @throws IOException
     */

    private void initialize() throws IOException {

                csv.add(CSVFile.readLine());
                csv.add(CSVFile.readLine());
                csv.add(CSVFile.readLine());
                csv.add(CSVFile.readLine());
                csv.add(CSVFile.readLine());
                csv.add(CSVFile.readLine());
                csv.add(CSVFile.readLine());
                csv.add(CSVFile.readLine());
                csv.add(CSVFile.readLine());
                csv.add(CSVFile.readLine());
                csv.add(CSVFile.readLine());
                csv.add(CSVFile.readLine());
                csv.add(CSVFile.readLine());
                csv.add(CSVFile.readLine());
                csv.add(CSVFile.readLine());
                csv.add(CSVFile.readLine());
                csv.add(CSVFile.readLine());
                csv.add(CSVFile.readLine());
                csv.add(CSVFile.readLine());
                csv.add(CSVFile.readLine());

                System.out.println(csv.get(0));
                System.out.println(csv.get(1));
                System.out.println(csv.get(2));
                System.out.println(csv.get(3));
                System.out.println(csv.get(4));
                System.out.println(csv.get(5));
                System.out.println(csv.get(6));
                System.out.println(csv.get(7));
                System.out.println(csv.get(8));
                System.out.println(csv.get(9));
                System.out.println(csv.get(10));
                System.out.println(csv.get(11));
                System.out.println(csv.get(12));
                System.out.println(csv.get(13));
                System.out.println(csv.get(14));
                System.out.println(csv.get(15));
                System.out.println(csv.get(16));
                System.out.println(csv.get(17));
                System.out.println(csv.get(18));
                System.out.println(csv.get(19));

        /**
         * JPanel container = new JPanel(); container.add(txtBirmingham);
         * container.add(txtBristol); container.add(txtCardiff);
         * container.add(txtColindale); container.add(txtDerby);
         * container.add(txtFalkirk); container.add(txtGlasgow);
         * container.add(txtGuildford); container.add(txtLeeds);
         * container.add(txtManchester); container.add(txtMiltonKeynes);
         * container.add(txtNewcastle); container.add(txtPeterborough);
         * container.add(txtPreston); container.add(txtSheffield);
         * container.add(txtSlough); container.add(txtSouthbank);
         * container.add(txtStepneyGreen); container.add(txtWolverhampton);
         * //container.add(); JScrollPane jsp = new JScrollPane(container);
         * frame.add(jsp);
         **/

        frame = new JFrame();
        frame.setBounds(0, 0, 1000, 1086);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.getContentPane().setLayout(null);
        frame.setBackground(Color.CYAN);

        txtCardiff = new JTextField();
        txtCardiff.setText(csv.get(0));
        txtCardiff.setBackground(Color.GREEN);
        txtCardiff.setBounds(305, 699, 102, 20);
        frame.getContentPane().add(txtCardiff);
        txtCardiff.setColumns(10);

        txtBristol = new JTextField();
        txtBristol.setText(csv.get(1));
        txtBristol.setBackground(Color.GREEN);
        txtBristol.setBounds(416, 780, 102, 20);
        frame.getContentPane().add(txtBristol);
        txtBristol.setColumns(10);

        txtSheffield = new JTextField();
        txtSheffield.setText(csv.get(2));
        txtSheffield.setBackground(Color.GREEN);
        txtSheffield.setBounds(517, 356, 110, 20);
        frame.getContentPane().add(txtSheffield);
        txtSheffield.setColumns(10);

        txtDerby = new JTextField();
        txtDerby.setText(csv.get(3));
        txtDerby.setBackground(Color.GREEN);
        txtDerby.setBounds(582, 451, 90, 20);
        frame.getContentPane().add(txtDerby);
        txtDerby.setColumns(10);

        txtGlasgow = new JTextField();
        txtGlasgow.setText(csv.get(4));
        txtGlasgow.setBackground(Color.GREEN);
        txtGlasgow.setBounds(250, 94, 102, 20);
        frame.getContentPane().add(txtGlasgow);
        txtGlasgow.setColumns(10);

        txtFalkirk = new JTextField();
        txtFalkirk.setText(csv.get(5));
        txtFalkirk.setColumns(10);
        txtFalkirk.setBackground(Color.GREEN);
        txtFalkirk.setBounds(331, 41, 102, 20);
        frame.getContentPane().add(txtFalkirk);

        txtNewcastle = new JTextField();
        txtNewcastle.setText(csv.get(6));
        txtNewcastle.setColumns(10);
        txtNewcastle.setBackground(Color.GREEN);
        txtNewcastle.setBounds(424, 141, 111, 20);
        frame.getContentPane().add(txtNewcastle);

        txtLeeds = new JTextField();
        txtLeeds.setText(csv.get(7));
        txtLeeds.setColumns(10);
        txtLeeds.setBackground(Color.GREEN);
        txtLeeds.setBounds(481, 244, 102, 20);
        frame.getContentPane().add(txtLeeds);

        txtPreston = new JTextField();
        txtPreston.setText(csv.get(8));
        txtPreston.setColumns(10);
        txtPreston.setBackground(Color.GREEN);
        txtPreston.setBounds(356, 221, 102, 20);
        frame.getContentPane().add(txtPreston);

        txtManchester = new JTextField();
        txtManchester.setText(csv.get(9));
        txtManchester.setColumns(10);
        txtManchester.setBackground(Color.GREEN);
        txtManchester.setBounds(394, 394, 124, 20);
        frame.getContentPane().add(txtManchester);

        txtWolverhampton = new JTextField();
        txtWolverhampton.setText(csv.get(10));
        txtWolverhampton.setColumns(10);
        txtWolverhampton.setBackground(Color.GREEN);
        txtWolverhampton.setBounds(360, 486, 153, 20);
        frame.getContentPane().add(txtWolverhampton);

        txtBirmingham = new JTextField();
        txtBirmingham.setText(csv.get(11));
        txtBirmingham.setColumns(10);
        txtBirmingham.setBackground(Color.GREEN);
        txtBirmingham.setBounds(424, 553, 128, 20);
        frame.getContentPane().add(txtBirmingham);

        txtMiltonKeynes = new JTextField();
        txtMiltonKeynes.setText(csv.get(12));
        txtMiltonKeynes.setColumns(10);
        txtMiltonKeynes.setBackground(Color.GREEN);
        txtMiltonKeynes.setBounds(474, 604, 135, 20);
        frame.getContentPane().add(txtMiltonKeynes);

        txtPeterborough = new JTextField();
        txtPeterborough.setText(csv.get(13));
        txtPeterborough.setColumns(10);
        txtPeterborough.setBackground(Color.GREEN);
        txtPeterborough.setBounds(655, 576, 135, 20);
        frame.getContentPane().add(txtPeterborough);

        txtColindale = new JTextField();
        txtColindale.setText(csv.get(14));
        txtColindale.setColumns(10);
        txtColindale.setBackground(Color.GREEN);
        txtColindale.setBounds(541, 699, 107, 20);
        frame.getContentPane().add(txtColindale);

        txtStepneyGreen = new JTextField();
        txtStepneyGreen.setText(csv.get(15));
        txtStepneyGreen.setColumns(10);
        txtStepneyGreen.setBackground(Color.GREEN);
        txtStepneyGreen.setBounds(667, 699, 137, 20);
        frame.getContentPane().add(txtStepneyGreen);

        txtSlough = new JTextField();
        txtSlough.setText(csv.get(16));
        txtSlough.setColumns(10);
        txtSlough.setBackground(Color.GREEN);
        txtSlough.setBounds(525, 756, 102, 20);
        frame.getContentPane().add(txtSlough);

        txtFaraday = new JTextField();
        txtFaraday.setText(csv.get(17));
        txtFaraday.setColumns(10);
        txtFaraday.setBackground(Color.GREEN);
        txtFaraday.setBounds(650, 756, 102, 20);
        frame.getContentPane().add(txtFaraday);

        txtGuildford = new JTextField();
        txtGuildford.setText(csv.get(18));
        txtGuildford.setColumns(10);
        txtGuildford.setBackground(Color.GREEN);
        txtGuildford.setBounds(525, 822, 102, 20);
        frame.getContentPane().add(txtGuildford);

        txtSouthbank = new JTextField();
        txtSouthbank.setText(csv.get(19));
        txtSouthbank.setColumns(10);
        txtSouthbank.setBackground(Color.GREEN);
        txtSouthbank.setBounds(655, 807, 115, 20);
        frame.getContentPane().add(txtSouthbank);

        JLabel lblNewLabel = new JLabel("New label");
        lblNewLabel.setForeground(Color.BLACK);
        lblNewLabel.setBackground(Color.BLACK);
        lblNewLabel
                .setIcon(new ImageIcon(
                        "C:\\Users\\606854007\\workspace\\NetworkAppTest\\Test\\window\\England_Wales.gif"));
        lblNewLabel.setBounds(33, 11, 890, 1086);
        frame.getContentPane().add(lblNewLabel);

        new FileCheckerWorker(null).execute();
\\ if i dont but null in the '()' then it comes up with an error, 
\\and this just makes it execute:
    /**
public FileCheckerWorker(MapTest mapTest) {
        this.mapTest = mapTest;
    }
**/
\\ which is not what I want, I have tried to add commands 
\\to run the methods from within:
\\ ' public FileCheckerWorker(MapTest mapTest)' method
\\ but it gives me a null pointer exception,

}

    } 
```

下面是“FileCheckerWorker”类，希望我做对了：p

```
package window;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.util.ArrayList;
import java.util.List;
import javax.swing.SwingWorker;

public class FileCheckerWorker extends SwingWorker<Object, List<String>> {

    private MapTest mapTest;

    public FileCheckerWorker(MapTest mapTest) {
        this.mapTest = mapTest;
    }

        @Override
        protected void process(List<List<String>> chunks) {
           List<String> values = chunks.get(chunks.size() - 1);

           mapTest.txtCardiff.setText(values.get(0));
           mapTest.txtBristol.setText(values.get(1));
           mapTest.txtSheffield.setText(values.get(2));
           mapTest.txtDerby.setText(values.get(3));
           mapTest.txtGlasgow.setText(values.get(4));
           mapTest.txtFalkirk.setText(values.get(5));
           mapTest.txtNewcastle.setText(values.get(6));
           mapTest.txtLeeds.setText(values.get(7));
           mapTest.txtPreston.setText(values.get(8));
           mapTest.txtManchester.setText(values.get(9));
           mapTest.txtWolverhampton.setText(values.get(10));
           mapTest.txtBirmingham.setText(values.get(11));
           mapTest.txtMiltonKeynes.setText(values.get(12));
           mapTest.txtPeterborough.setText(values.get(13));
           mapTest.txtColindale.setText(values.get(14));
           mapTest.txtStepneyGreen.setText(values.get(15));
           mapTest.txtSlough.setText(values.get(16));
           mapTest.txtFaraday.setText(values.get(17));
           mapTest.txtGuildford.setText(values.get(18));
           mapTest.txtSouthbank.setText(values.get(19));
        }

        @Override
        protected Object doInBackground() throws Exception {
            long lastUpdated = -1;
            File csvFile = new File("C:/Users/606854007/workspace/NetworkAppTest/Jar/window/Cardiff.txt");
            while (true) {
                if (csvFile.lastModified() != lastUpdated) {
                    BufferedReader csvReader = null;
                    List<String> values = new ArrayList<String>(20);
                    try {
                        csvReader = new BufferedReader(new FileReader("C:/Users/606854007/workspace/NetworkAppTest/Jar/window/Cardiff.txt"));
                        for (int index = 0; index < 20; index++) {
                            values.add(mapTest.CSVFile.readLine());
                        }
                        publish(values);
                        lastUpdated = csvFile.lastModified();
                    } finally {
                        try {
                            csvReader.close();
                        } catch (Exception e) {
                        }
                    }

                    Thread.sleep(5000);
                    System.out.println("Check For Change");
                }
            }
        }

} 
```

将这两个代码更新为现在的样子。

另外，当我认为如果在行 values.add(mapTest.CSVFile.readLine()) 上给了我一个 NullPointerException 时，我的“doInBackground”正在工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:43:37.927

看看[ScheduledExecutorService](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ScheduledExecutorService.html)。使用它，您可以安排一些定期任务。（在您的情况下，将每 20 秒读取一次文件）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T09:44:11.327

将“查找”代码包装在 a 中`SwingWorker`，用于`Thread.sleep`允许后台线程空闲一段给定的时间（比如 20 秒）。

加载文件的内容，确定它是否被改变并使用`pusblish`方法将结果发送到`process`方法，这允许您使用事件调度线程处理结果

查看[SwingWorker](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)了解更多详情

**简单示例**

```
public class PeriodicalWorker extends SwingWorker<Object, String> {
    private boolean running = true;

    public Object doInBackground() throws Exception {
        while (running) {
            try {
                Thread.sleep(20000);
            } catch (Exception exp) {}
            // Load the values...
            // Check to see if anything needs to updated...
            publish(values); // List of String array values
        }
        return null;
    }

    public void process(List<String> values) {
        // Assign the values to the UI...
    }
} 
```

我确定您可以将“停止”方法设置`running`为 false ;)

**更新**

基本概念非常简单。您需要跟踪文件上次更新的时间，如果值在两次睡眠之间发生变化，则需要重新读取文件并更新屏幕上的值。

这个过程在 Java 7 中变得相当容易，但在此之前，您可以使用`File#lastModified`检查文件的最后修改日期/时间。

下面是一个简单的例子。

```
public class FileCheckerWorker extends SwingWorker<Object, List<String>> {

    @Override
    protected void process(List<List<String>> chunks) {
        List<String> values = chunks.get(chunks.size() - 1);

        txtCardiff.setText(values.get(0));
        txtBristol.setText(values.get(1));
        txtSheffield.setText(values.get(2));
        txtDerby.setText(values.get(3));
        txtGlasgow.setText(values.get(4));
        txtFalkirk.setText(values.get(5));
        txtNewcastle.setText(values.get(6));
        txtLeeds.setText(values.get(7));
        txtPreston.setText(values.get(8));
        txtManchester.setText(values.get(9));
        txtWolverhampton.setText(values.get(10));
        txtBirmingham.setText(values.get(11));
        txtMiltonKeynes.setText(values.get(12));
        txtPeterborough.setText(values.get(13));
        txtColindale.setText(values.get(14));
        txtStepneyGreen.setText(values.get(15));
        txtSlough.setText(values.get(16));
        txtFaraday.setText(values.get(17));
        txtGuildford.setText(values.get(18));
        txtSouthbank.setText(values.get(19));
    }

    @Override
    protected Object doInBackground() throws Exception {
        long lastUpdated = -1;
        File csvFile = new File("...");
        while (true) {
            if (csvFile.lastModified() != lastUpdated) {
                BufferedReader csvReader = null;
                List<String> values = new ArrayList<String>(20);
                try {
                    csvReader = new BufferedReader(new FileReader("..."));
                    for (int index = 0; index < 20; index++) {
                        values.add(CSVFile.readLine());
                    }
                    publish(values);
                    lastUpdated = csvFile.lastModified();
                } finally {
                    try {
                        csvReader.close();
                    } catch (Exception e) {
                    }
                }

                Thread.sleep(20000);

            }
        }
    }
} 
```

你可以把它放在你的`initialise`方法的最后，用`new FileCheckerWorker.execute()`.

**更新**

而不是让你的领域`static`，将参考传递给`MapTest`工人......

```
import java.awt.Color;
import java.awt.EventQueue;
import java.io.BufferedReader;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JTextField;
import javax.swing.SwingWorker;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class MapTest {

    private JFrame frame;
    protected JTextField txtCardiff;
    protected JTextField txtBristol;
    protected JTextField txtSheffield;
    protected JTextField txtDerby;
    protected JTextField txtGlasgow;
    protected JTextField txtFalkirk;
    protected JTextField txtNewcastle;
    protected JTextField txtLeeds;
    protected JTextField txtPreston;
    protected JTextField txtManchester;
    protected JTextField txtWolverhampton;
    protected JTextField txtBirmingham;
    protected JTextField txtMiltonKeynes;
    protected JTextField txtPeterborough;
    protected JTextField txtColindale;
    protected JTextField txtStepneyGreen;
    protected JTextField txtSlough;
    protected JTextField txtFaraday;
    protected JTextField txtGuildford;
    protected JTextField txtSouthbank;
    private BufferedReader CSVFile = new BufferedReader(new FileReader("C:/Users/606854007/workspace/NetworkAppTest/jar/window/Cardiff.txt"));

    ArrayList<String> csv = new ArrayList<String>();

    public static void main(String[] args) {
        try {
            UIManager.setLookAndFeel(
                            UIManager.getSystemLookAndFeelClassName());
        } catch (Exception e1) {
            e1.printStackTrace();
        }
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    MapTest window = new MapTest();
                    window.frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    /**
     * Create the application.
     *
     * @throws IOException
     */
    public MapTest() throws IOException {
        try {
            initialize();
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        }
    }

    /**
     * Initialise the contents of the frame.
     *
     * @param output
     * @throws IOException
     */
    private void initialize() throws IOException {
        frame = new JFrame();
        frame.setBounds(0, 0, 1000, 1086);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.getContentPane().setLayout(null);
        frame.setBackground(Color.CYAN);

        txtCardiff = new JTextField();
        txtCardiff.setBackground(Color.GREEN);
        txtCardiff.setBounds(305, 699, 102, 20);
        frame.getContentPane().add(txtCardiff);
        txtCardiff.setColumns(10);

        txtBristol = new JTextField();
        txtBristol.setBackground(Color.GREEN);
        txtBristol.setBounds(416, 780, 102, 20);
        frame.getContentPane().add(txtBristol);
        txtBristol.setColumns(10);

        txtSheffield = new JTextField();
        txtSheffield.setBackground(Color.GREEN);
        txtSheffield.setBounds(517, 356, 110, 20);
        frame.getContentPane().add(txtSheffield);
        txtSheffield.setColumns(10);

        txtDerby = new JTextField();
        txtDerby.setBackground(Color.GREEN);
        txtDerby.setBounds(582, 451, 90, 20);
        frame.getContentPane().add(txtDerby);
        txtDerby.setColumns(10);

        txtGlasgow = new JTextField();
        txtGlasgow.setBackground(Color.GREEN);
        txtGlasgow.setBounds(250, 94, 102, 20);
        frame.getContentPane().add(txtGlasgow);
        txtGlasgow.setColumns(10);

        txtFalkirk = new JTextField();
        txtFalkirk.setColumns(10);
        txtFalkirk.setBackground(Color.GREEN);
        txtFalkirk.setBounds(331, 41, 102, 20);
        frame.getContentPane().add(txtFalkirk);

        txtNewcastle = new JTextField();
        txtNewcastle.setColumns(10);
        txtNewcastle.setBackground(Color.GREEN);
        txtNewcastle.setBounds(424, 141, 111, 20);
        frame.getContentPane().add(txtNewcastle);

        txtLeeds = new JTextField();
        txtLeeds.setColumns(10);
        txtLeeds.setBackground(Color.GREEN);
        txtLeeds.setBounds(481, 244, 102, 20);
        frame.getContentPane().add(txtLeeds);

        txtPreston = new JTextField();
        txtPreston.setColumns(10);
        txtPreston.setBackground(Color.GREEN);
        txtPreston.setBounds(356, 221, 102, 20);
        frame.getContentPane().add(txtPreston);

        txtManchester = new JTextField();
        txtManchester.setColumns(10);
        txtManchester.setBackground(Color.GREEN);
        txtManchester.setBounds(394, 394, 124, 20);
        frame.getContentPane().add(txtManchester);

        txtWolverhampton = new JTextField();
        txtWolverhampton.setColumns(10);
        txtWolverhampton.setBackground(Color.GREEN);
        txtWolverhampton.setBounds(360, 486, 153, 20);
        frame.getContentPane().add(txtWolverhampton);

        txtBirmingham = new JTextField();
        txtBirmingham.setColumns(10);
        txtBirmingham.setBackground(Color.GREEN);
        txtBirmingham.setBounds(424, 553, 128, 20);
        frame.getContentPane().add(txtBirmingham);

        txtMiltonKeynes = new JTextField();
        txtMiltonKeynes.setColumns(10);
        txtMiltonKeynes.setBackground(Color.GREEN);
        txtMiltonKeynes.setBounds(474, 604, 135, 20);
        frame.getContentPane().add(txtMiltonKeynes);

        txtPeterborough = new JTextField();
        txtPeterborough.setColumns(10);
        txtPeterborough.setBackground(Color.GREEN);
        txtPeterborough.setBounds(655, 576, 135, 20);
        frame.getContentPane().add(txtPeterborough);

        txtColindale = new JTextField();
        txtColindale.setColumns(10);
        txtColindale.setBackground(Color.GREEN);
        txtColindale.setBounds(541, 699, 107, 20);
        frame.getContentPane().add(txtColindale);

        txtStepneyGreen = new JTextField();
        txtStepneyGreen.setColumns(10);
        txtStepneyGreen.setBackground(Color.GREEN);
        txtStepneyGreen.setBounds(667, 699, 137, 20);
        frame.getContentPane().add(txtStepneyGreen);

        txtSlough = new JTextField();
        txtSlough.setColumns(10);
        txtSlough.setBackground(Color.GREEN);
        txtSlough.setBounds(525, 756, 102, 20);
        frame.getContentPane().add(txtSlough);

        txtFaraday = new JTextField();
        txtFaraday.setColumns(10);
        txtFaraday.setBackground(Color.GREEN);
        txtFaraday.setBounds(650, 756, 102, 20);
        frame.getContentPane().add(txtFaraday);

        txtGuildford = new JTextField();
        txtGuildford.setColumns(10);
        txtGuildford.setBackground(Color.GREEN);
        txtGuildford.setBounds(525, 822, 102, 20);
        frame.getContentPane().add(txtGuildford);

        txtSouthbank = new JTextField();
        txtSouthbank.setColumns(10);
        txtSouthbank.setBackground(Color.GREEN);
        txtSouthbank.setBounds(655, 807, 115, 20);
        frame.getContentPane().add(txtSouthbank);

        JLabel lblNewLabel = new JLabel("New label");
        lblNewLabel.setForeground(Color.BLACK);
        lblNewLabel.setBackground(Color.BLACK);
        lblNewLabel.setIcon(new ImageIcon(
                        "C:\\Users\\606854007\\workspace\\NetworkAppTest\\Test\\window\\England_Wales.gif"));
        lblNewLabel.setBounds(33, 11, 890, 1086);
        frame.getContentPane().add(lblNewLabel);

        new FileCheckerWorker(this).execute();

    }

    public class FileCheckerWorker extends SwingWorker<Object, List<String>> {

        private MapTest mapTest;

        public FileCheckerWorker(MapTest mapTest) {
            this.mapTest = mapTest;
        }

        @Override
        protected void process(List<List<String>> chunks) {
            List<String> values = chunks.get(chunks.size() - 1);

            mapTest.txtCardiff.setText(values.get(0));
            mapTest.txtBristol.setText(values.get(1));
            mapTest.txtSheffield.setText(values.get(2));
            mapTest.txtDerby.setText(values.get(3));
            mapTest.txtGlasgow.setText(values.get(4));
            mapTest.txtFalkirk.setText(values.get(5));
            mapTest.txtNewcastle.setText(values.get(6));
            mapTest.txtLeeds.setText(values.get(7));
            mapTest.txtPreston.setText(values.get(8));
            mapTest.txtManchester.setText(values.get(9));
            mapTest.txtWolverhampton.setText(values.get(10));
            mapTest.txtBirmingham.setText(values.get(11));
            mapTest.txtMiltonKeynes.setText(values.get(12));
            mapTest.txtPeterborough.setText(values.get(13));
            mapTest.txtColindale.setText(values.get(14));
            mapTest.txtStepneyGreen.setText(values.get(15));
            mapTest.txtSlough.setText(values.get(16));
            mapTest.txtFaraday.setText(values.get(17));
            mapTest.txtGuildford.setText(values.get(18));
            mapTest.txtSouthbank.setText(values.get(19));
        }

        @Override
        protected Object doInBackground() throws Exception {
            long lastUpdated = -1;
            File csvFile = new File("C:/Users/606854007/workspace/NetworkAppTest/Jar/window/Cardiff.txt");
            while (true) {
                if (csvFile.lastModified() != lastUpdated) {
                    BufferedReader csvReader = null;
                    List<String> values = new ArrayList<String>(20);
                    try {
                        csvReader = new BufferedReader(new FileReader("C:/Users/606854007/workspace/NetworkAppTest/Jar/window/Cardiff.txt"));
                        for (int index = 0; index < 20; index++) {
                            values.add(mapTest.CSVFile.readLine());
                        }
                        publish(values);
                        lastUpdated = csvFile.lastModified();
                    } finally {
                        try {
                            csvReader.close();
                        } catch (Exception e) {
                        }
                    }

                    Thread.sleep(5000);
                    System.out.println("Check For Change");
                }
            }
        }
    }
} 
```

# objective-c - 绑定到 NSComboBox

> ID：15198331
> 
> 赞同：0
> 
> 时间：2013-03-04T09:31:30.393
> 
> 标签：objective-c, cocoa, nscombobox

我对 Cocoa 很陌生，我正在 Xcode 4.5 中开发一个普通的 Cocoa 桌面应用程序。我需要在其中显示值，`NSComboBox`并且必须从中检索`NSComboBox`，但限制是我不应该绑定到`IBOutlet`.

如果我们需要使用 Array 控制器，我们可以使用`NSArrayController`s，但不能使用`IBOutlet`s。

有人会建议我如何在不使用`IBOutlet`s 的情况下执行此任务吗？

我不想使用`IBOutlet`s 因为：

1.  它减少了代码：假设我们在 UI 中有 15 个文本字段，所以你需要有 15 个 `IBOutlet`s（如果你在做小项目，你可以拥有它，但是当我们实现更大的项目时，你最终可能会创建大量的`IBOutlet`s，除了帮助从文本字段中访问值之外，它什么也没做。

    如果您使用绑定而不是`IBOutlet`，则处理 UI 很容易，假设您有一个带有链接 arrayController 的表。当修改了数组Controller链接的数组时，自动更改将反映在tableView中，您无需为更新tableView而烦恼，如果我们使用`IBOutlet`，我们必须从头开始更新内容。每当修改我们在 tableView 中显示的数据时。

2.  让开发者的生活更轻松：如果我们使用绑定，绑定对象中发生的任何更改都会立即反映在 UI 中，我们不必担心 UI 的更新。

3.  易于理解的代码：如果我们`IBOutlet`不必要地使用 s，我们最终会编写代码来处理视图、更新视图等，以防我们自动使用绑定它会更新。

据我说。如果我们使用绑定，这是一个很好的做法。

`IBOutlet`s 只是增加代码的长度。

先感谢您...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:51:05.430

绑定步骤：

1.  绘制一个 NSComboBox 和一个将绑定到组合框的 NSTextField。

2.  在组合框中添加来自 Interface Builder 的项目。

3.  选择组合框。按住`Ctrl`并拖动到 NStextField/label 并选择 `takeStringValueFrom`。

而已！！！

现在您可以构建和运行并检查组合框中的选择更改在文本字段中是否可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T21:20:47.407

您需要设置组合框委托来处理 comboBoxSelectionDidChange 方法。

[http://www.cocoabuilder.com/archive/cocoa/221619-detecting-when-nscombobox-text-changed-by-list.html](http://www.cocoabuilder.com/archive/cocoa/221619-detecting-when-nscombobox-text-changed-by-list.html)

# ios - 我如何在程序内部知道非消耗性 IAP 正在审核中？

> ID：15198334
> 
> 赞同：2
> 
> 时间：2013-03-04T09:31:41.987
> 
> 标签：ios, review, in-app-purchase

我有一个报亭杂志应用程序，除了自动续订订阅外，我们还想为不订阅购买每一期的用户提供非消耗性 IAP。问题是，每次我们发布一个新问题时，我们都需要在 iTunes Connect 中设置一个 IAP，并提交它以供审核。

在IAP被批准之前，当用户尝试下载问题时，总是报错“Cannot connect to the iTunes store”，这是来自SKPaymentTransaction的错误。无论如何，我是否可以在程序内部检测到 IAP 正在审核中，所以我可以弹出一个更好的警报，例如“正在审核此问题，请稍候”，而不是来自 SKPaymentTransaction 的令人困惑的错误消息？例如，我可以检查 NSError.domain 或 NSError.code 以了解错误是否意味着 IAP 尚未批准？

先感谢您。任何建议或线索将不胜感激！

# mongodb - 用 $in 插入

> ID：15198336
> 
> 赞同：2
> 
> 时间：2013-03-04T09:31:43.937
> 
> 标签：mongodb, upsert

我想在 MongoDB 中使用以下功能。我有一个名为“实体”的集合，它基本上存储实体文本并且它是计数的。该集合如下所示：

```
[{u'_id': u'facebook', u'n': 120},
 {u'_id': u'florida', u'n': 98},
 {u'_id': u'vegas', u'n': 94},
 {u'_id': u'andrew_mason', u'n': 93},
 {u'_id': u'obama', u'n': 85},
 {u'_id': u'twitter', u'n': 81},
 {u'_id': u'outlook', u'n': 81},
 {u'_id': u'delhi', u'n': 75},
 {u'_id': u'google', u'n': 74},
 {u'_id': u'virginia', u'n': 71}] 
```

现在，我想用新的实体更新这个集合。基本上，我将在这样的数组中准备好新实体：

```
entitySet = ['google', 'Abhishek_Vaid', 'andrew_mason'] 
```

我的意图是，对于集合中已经存在的实体，它们的计数应该更新。至于**不在**集合中的实体，它们的计数应该初始化为 1。我想使用单个 MongoDB 查询来实现这两种效果。到目前为止，我已经能够找到以下查询：（**它是 PyMongo 风格的，但它仍然是一个 MongoDB 查询**）

ENTITY_DB_HANDLE.entities.update (

```
{'_id' : {'$in' : entitySet} }, {'$inc' : {'n' : 1} }, upsert=True, multi=True ) 
```

但是，此查询仅更新现有实体计数，不会推送新实体。

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T09:53:19.210

当然可以：

```
> db.test.save({_id:"a", n:3})
> db.test.update({_id:"b"}, {$inc:{n:1}}, true, false)
> db.test.find()
{ "_id" : "a", "n" : 3 }
{ "_id" : "b", "n" : 1 } 
```

但是您的示例查询不使用 $in 所以我假设您实际上正在尝试：

```
{'_id' : {$in:['google', 'Abhishek_Vaid', 'andrew_mason']}, {'$inc' : {'n' : 1} }, upsert=True, multi=True ) 
```

并期望它为您传递的每个 _id 值更新或创建一个条目。如果任何 _id 值已经存在，这将不起作用，因为 upsert 只会创建一个没有与搜索条件匹配的文档的新文档。

# django - Django+django-filebrowser+TinyMCE

> ID：15198337
> 
> 赞同：1
> 
> 时间：2013-03-04T09:31:44.480
> 
> 标签：django, tinymce, django-filebrowser

我将 TinyMCE（直接，而不是 django-tinymce）和 django-filebrowser 添加到 django admin。它可以工作，除了一件事：然后我单击 Tiny“添加图片”菜单上的文件浏览按钮，我得到 Page not found (404)，因为我不明白 Tiny 选项中这个字符串的含义：

```
var managerURL = window.location.toString()
        + 'media/upload/?type=' + type; 
```

完整代码：

```
<script type="text/javascript">
function tinyDjangoBrowser(field_name, url, type, win) {
var managerURL = window.location.toString()
        + 'media/upload/?type=' + type;

tinyMCE.activeEditor.windowManager.open({
    file: managerURL,
    title: 'Pic',
    width: 800,
    height: 450,
    resizable: 'yes',
    inline: 'yes',
    close_previous: 'no',
    popup_css : false
}, {
    window: win,
    input: field_name
});

return false;
}
   tinyMCE.init({
    mode : "specific_textareas",
    theme : "advanced",
    skin : "bootstrap",
            plugins : "safari,pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template",
            extended_valid_elements : 'script[type|src],iframe[src|style|width|height|scrolling|marginwidth|marginheight|frameborder],div[*],p[*],object[width|height|classid|codebase|embed|param],param[name|value],embed[param|src|type|width|height|flashvars|wmode]',
    media_strict: false,
            theme_advanced_buttons1 : "save,newdocument,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,formatselect,fontselect,fontsizeselect",
            theme_advanced_buttons2 : "cut,copy,paste,pastetext,pasteword,|,search,replace,|,bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code",
            theme_advanced_buttons3 : "tablecontrols,|,hr,removeformat,visualaid,|,sub,sup,|,charmap,iespell,media,advhr,|,print,|,fullscreen",
            theme_advanced_buttons4 : "insertlayer,moveforward,movebackward,absolute,|,styleprops,|,cite,abbr,acronym,del,ins,attribs,|,visualchars,nonbreaking,template,pagebreak,|,insertdate,inserttime,preview,|,forecolor,backcolor",
            theme_advanced_toolbar_location : "top",
            theme_advanced_toolbar_align : "left",
            theme_advanced_statusbar_location : "bottom",
            theme_advanced_resizing : true,
            file_browser_callback: 'tinyDjangoBrowser',
    relative_urls : "false",
    remove_script_host : false,
    convert_urls : false
  });
</script> 
```

请告诉我，在我的情况下应该如何？

还有一件事：我需要连接 tiny_mce_popup.js 吗？对不起，我的英语不好。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:06:26.300

我发现！就我而言，它应该是

```
var managerURL = '/admin/filebrowser/browse/?pop=2' 
```

# filepicker.io - 有没有办法选择不让 filepicker.io 将您的上传内容存储在他们的服务器/数据库中？

> ID：15198338
> 
> 赞同：0
> 
> 时间：2013-03-04T09:31:45.650
> 
> 标签：filepicker.io

也许我只是没有足够彻底地阅读文档，但如果您想使用 S3 选项，这通常是因为您想从该 S3 位置提供您的上传。因此，一旦您的东西在 S3 中，就不再需要将其保存在文件选择器 url 中。有没有办法指定您希望上传存储在 S3 中，而*不是*使用 filepicker，使 filepicker 只是一个中间人？

人们会期望，如果这是可能的，由于文件选择器没有为我们存储所有数据这一事实，这将需要某种类型的降低成本。如果这是可能的，存储在 S3 而不是文件选择器中的上传是否仍计入我们拥有的帐户类型的文件限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T19:59:37.687

如果您指定 S3 位置，Filepicker.io 不会将文件的内容存储在我们的服务器上，这就是为什么定价计划是根据文件数而不是大小等来完成的。在调用`filepicker.store()`和`filepicker.pickAndStore()`调用中，FPFile返回的将有一个`key`参数指示文件存储在 S3 存储桶中的位置。

由此，您可以根据需要构造 S3 url，但默认情况下，我们提供 filepicker.io url，它既用作文件的唯一标识符，也提供诸如`/convert`、`/stat`等选项。

# javascript - ExpressJS 中的分布式会话存储

> ID：15198339
> 
> 赞同：0
> 
> 时间：2013-03-04T09:31:50.627
> 
> 标签：javascript, node.js, session, web-applications, express

我正在开发一个分布式网络应用程序，我想使用 ExpressJS 会话来存储数据，所以我需要一个分布式会话存储。或者，我可以构建自己的会话存储，但我不知道该怎么做。

我在与 Web 应用程序不同的项目的某些部分中使用 memcached（通过[此模块](https://github.com/3rd-Eden/node-memcached)），因此能够将 memcached 用作会话存储可能会很好。

我想要这样的东西：

```
app.use(express.session({secret: 'something', store: new MemcachedStorage(...)})); 
```

那么我应该使用什么存储呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T09:55:35.133

我认为[这](https://github.com/balor/connect-memcached)就是你要找的：

```
app.use(express.session({ 
  secret: 'CatOnTheKeyboard', 
  store: new MemcachedStore 
})); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T10:13:29.587

您可能正在寻找[https://github.com/balor/connect-memcached](https://github.com/balor/connect-memcached)。此连接模块（连接是 express 的底层）用于将会话存储在 memcached 中。

# input - GWT 装饰单元格表输入呈现 onclick

> ID：15198342
> 
> 赞同：0
> 
> 时间：2013-03-04T09:31:57.853
> 
> 标签：input, gwt, cell, edit

我有一个`DecoratedCellTable`可以进行内联编辑的地方。但是当我点击我`editbutton`的`CellTable`. 仅当我单击要编辑的单元格时，该单元格才会呈现为`<input>`.

有没有办法通过单击 my 将所有可编辑单元格呈现为输入`editbutton`？

用`cellTable.setEditable(true);`它是行不通的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T13:50:07.173

请参阅单元格是按列定义的，而不是按列中的条目定义的。

`The basic idea of cell widgets is to make the widget light wieght by not creating the input elements for each entry in the column`.

因此，在任何时间点，一列中只能有一个输入元素可以处于活动状态，并且同一输入元素可用于整个列。

因此，不可能（据我所知）一次将所有可编辑单元格渲染为输入元素。

# android - 如何从 Eclipse 中检测 android 物理设备？

> ID：15198344
> 
> 赞同：2
> 
> 时间：2013-03-04T09:31:59.797
> 
> 标签：android, usb

我有最新的 android adt 包包含 Android SDK、Eclipse 和 ADT。我已经从这个捆绑包中创建了应用程序，然后我想将应用程序从 eclipse 运行到真实设备（我的 Android 手机）。我无法从 Eclipse 连接设备。

所以，我按照这个 URL 来查找设备，

[http://developer.android.com/tools/extras/oem-usb.html](http://developer.android.com/tools/extras/oem-usb.html)

现在我看不到 USB 驱动程序路径（Google USB 驱动程序位于`<sdk>\extras\google\usb_driver\.`）

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:51:27.583

在手机设置中打开 USB 调试

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T09:54:56.100

Follow this approach-

check if usb debugging is checked or not.then

Go to computer->rightclick->manage->Device manager->Android Device-> Right Click->Update driver software->Browse my computer for driver software->let me pick from a list of device-> and choose android Composite ADB interface and Click Next to upgrade the driver.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-13T19:45:19.403

您需要安装正确的设备驱动程序。只有这样您的 Eclipse 才能检测到您的设备以在其上启动您的应用程序。

**如何安装驱动程序以及如何确定它已安装？**

1.  转到计算机（右键单击）-> 管理-> 设备管理器。
2.  如果您的设备被归类为“其他设备”或“便携式设备”，则有问题。双击设备管理器中列出的设备。在里面检查您的驱动程序详细信息。
3.  如果未显示驱动程序详细信息或按钮不可单击，则未安装驱动程序。如果是你需要更新它。
4.  Windows 应该会自动为您执行此操作。如果没有，您可以在搜索设备驱动程序时单击该图标，然后选择“自动安装最合适的驱动程序”。
5.  第 3 点中提到的任何一种情况，最终结果都应该是安装驱动程序后（如果您的设备驱动程序不可用，请注意任何合适的驱动程序）。您的设备应列在“Android USB 设备”类别下
6.  现在您可以确定 ADT 会检测到您的设备。

PS：我提到了任何合适的驱动程序，因为在我的情况下，我有 Micromax A69(ICS) 并且它安装了 HTC 驱动程序。在此 Android ADT 开始检测我的设备之后。我使用的是 Windows 7。附上屏幕截图仅供参考 -

![在此处输入图像描述](../Images/54c8f059b897debe373e42d31200a1b7.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-17T11:32:53.910

此命令`adb devices`可以显示连接到计算机的物理设备。在 ADT 包中搜索 adb

# sql - sql联合删除“半重复”

> ID：15198348
> 
> 赞同：2
> 
> 时间：2013-03-04T09:32:05.790
> 
> 标签：sql, sql-server, sql-server-2000

我正在做这样的工会

```
select name, price from products where project = 10  // prio 1
union
select name, price from products where customer = 5  // prio 2
union
select name, price from products where standard = 9  // prio 3 
```

**编辑：更改 where-clause 使其更复杂一些**

这通常会给我回来

```
+-----+------+-----------+--------------+
|(NO) | name |  price    |  (prio)      |
+-----+------+-----------+--------------+
|  1  |  a   |    10     |  (1)         |
|  2  |  b   |     5     |  (1)         |

|  3  |  a   |    13     |  (2)         |
|  4  |  b   |     2     |  (2)         |

|  5  |  a   |     1     |  (3)         |
|  6  |  b   |     5     |  (3)         |
|  7  |  c   |     3     |  (3)         |
+-----+------+-----------+--------------+ 
```

我了解例如第 1 行和第 3 行不是重复的，不会被 union 语句删除。然而，这正是我想要做的。也就是说，如果第一个 select 语句（prio 1）返回了一个名称（例如“a”），我不希望任何其他“a”：s 从更高优先级的 select 语句中进入结果集。

即，我想要这个：

```
+-----+------+-----------+--------------+
|(NO) | name |  price    |  (prio) |
+-----+------+-----------+--------------+
|  1  |  a   |    10     |  (1)         |
|  2  |  b   |     5     |  (1)         |

|  7  |  c   |     3     |  (3)         |
+-----+------+-----------+--------------+ 
```

这可能吗？

我尝试使用`group by`，但这要求我在我不想做的价格上使用 MIN、MAX、AVG 等，即：

```
select name, avg(price) from (...original query...) group by name
// this is not ok since I donnot want the avg price, I want the "first" price 
```

我正在使用 MS SQL 2000。我可以使用类似的东西`first(..)`作为聚合函数`group by`吗？尝试此操作时，出现错误：

```
select name, first(price) from (...original query...) group by name
// error: 'first' is not a recognized built-in function name. 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T09:37:03.317

 ~~对于 SQL Server 2005+：

```
WITH records
AS
(
    SELECT  name, price, prio,
            ROW_NUMBER() OVER (PARTITION BY name
                                ORDER BY prio ASC) rn
    FROM    products
)
SELECT  Name, Price
FROM    records
WHERE   rn = 1 
```

 ~~试试这个`SQL Server 2000`：

```
SELECT  a.*
FROM    products a
        INNER JOIN
        (
            SELECT  name, MIN(prio) min_prio
            FROM    products 
            WHERE   prio IN (1,2,3)
            GROUP   BY  name
        ) b ON a.name = b.name AND
                a.prio = b.min_prio 
```

为了获得更好的性能，请在 column 上添加一个复合索引`(name, prio)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T09:36:33.923

```
select name, price from products where prio = 1
union
select name, price from products where prio = 2 and name not in (select name from products where prio = 1)

union
select name, price from products where prio = 3 and name not in 
(select name from products where prio = 1
union
select name from products where prio = 2 and name not in (select name from products where prio = 1)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T09:55:58.393

不确定这是否有效，但想法是这样的：

```
select name,
    min(case when prio=min_prio then price else NULL end) as price,
    min(prio) as min_prio
from products
group by name
order by min_prio 
```~~~~

# python - 从 Python 查询 Windows Server 2008 上的 Oracle db

> ID：15198350
> 
> 赞同：1
> 
> 时间：2013-03-04T09:32:14.247
> 
> 标签：python, oracle, windows-server-2008

假设数据库在*Windows Server 2008*上运行，我如何通过 Python 代码与 Oracle 数据库通信？我可以在其他操作系统上进行通信，如 Windows XP / Windows Server 2003 / ...使用 oracle 提供程序 OLE DB ( [http://www.oracle.com/technetwork/database/windows/utilsoft-088126.html](http://www.oracle.com/technetwork/database/windows/utilsoft-088126.html) ) 但没有似乎支持Windows Server 2008。请问一些提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:39:52.367

您可以使用 cx_Oracle 模块从 python 连接 oracle。

如何在 oracle 中使用 python？

[http://www.oracle.com/technetwork/articles/dsl/python-091105.html](http://www.oracle.com/technetwork/articles/dsl/python-091105.html)

cx_Oracle 的文档在哪里？

[http://cx-oracle.sourceforge.net/html/index.html](http://cx-oracle.sourceforge.net/html/index.html)

这可能有助于解决您的问题。

# django - django-require 和 require-cs

> ID：15198355
> 
> 赞同：1
> 
> 时间：2013-03-04T09:32:35.917
> 
> 标签：django, coffeescript, requirejs

有人成功地同时使用[了 django-require](https://github.com/etianen/django-require)和[require-cs](https://github.com/jrburke/require-cs)吗？

我在部署应用程序时卡住了。我希望将咖啡文件编译成 JS 和从构建中排除的 coffee-script.js。

我添加了自己的构建配置文件（使用 REQUIRE_BUILD_PROFILE），并以[这个构建文件](https://github.com/jrburke/require-cs/blob/master/demo/build.js)为例，但它似乎不起作用。

是的，如果你能发布你的 build.js 和 settings.py，那就太好了；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:51:11.463

要将 coffeescript 与 requirejs 一起使用，您需要使用 cs! 加载您的咖啡脚本文件！加载器插件。

例如，给定这样的文件结构：

*   js
    *   main.js // 主脚本文件，只是一个最小的 javascript 存根。
    *   cs.js // Coffeescript 加载器插件。
    *   coffee-script.js // Coffeescript 编译器。
    *   csmain.coffee // 你的实际 coffeescript 主文件。
    *   module1.coffee // 一个咖啡脚本模块。
    *   module2.coffee // 另一个咖啡脚本模块。
    *   app.build.js // 应用构建配置文件。

然后，在您的 main.js 文件中，您可以像这样引导您的咖啡脚本应用程序：

```
require(["cs!csmain"]) 
```

然后您的 csmain.coffee 文件可以运行您的应用程序，如下所示：

```
require([
    "cs!module1",
    "cs!module2"
], (module1, module2) ->
    module1.doSomething
    module2.doSomething 
```

然后像这样的构建配置文件应该负责优化：

```
({
    stubModules: ['cs'],
    modules: [
        {
            name: 'main',
            exclude: ['coffee-script']
        }
    ]
}) 
```

# extjs - Extjs 4 Store - 不允许添加重复项？

> ID：15198373
> 
> 赞同：1
> 
> 时间：2013-03-04T09:33:48.123
> 
> 标签：extjs, extjs4, extjs4.1

我的商店没有连接到任何服务器。商店附加到网格，我在我的应用程序的各个地方添加记录。是否可以不允许添加已经存在的记录？我正在使用 idProperty 但它不起作用（可能是因为商店未连接到服务器？）。我已经得到了这样的东西：

 `````
Ext.define('GSIP_PLANY.grid.store.ParcelStore',{
    extend: 'Ext.data.Store',
    model: 'GSIP_PLANY.grid.model.ParcelModel',
    listeners:{
        add:function(store, records, index, eOpts) {        
            for (var i in records) {
                var idx = store.findExact('name', records[i].get('name'));
                if ( idx != -1 && idx < index) {
                    store.remove(records[i]);
                }
            }
        }
    }
}); 
````  `上面的代码检查是否有之前插入的类似记录，如果是，则删除新记录。问题是我还有附加到商店的删除事件处理程序，这些处理程序在上面的代码中触发，导致在我的应用程序的其他位置删除记录（基于其名称）。我只是不想存储已经存在的记录。像 beforeadd 事件会很棒，但没有这样的事件。

我的模型定义：

```
    Ext.define('GSIP_PLANY.grid.model.ParcelModel',{
        扩展：'Ext.data.Model',
        字段：['id', 'name', 'tract', 'mapSheet', 'district', 'buildingNumber', 'streets', 'place'],
        idProperty：'名称'
    });

```

idProperty 不起作用，因为我可以添加任意数量的同名记录。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:39:15.403

`Ext.data.Store`has`suspendEvents()`和`resumeEvents()`methods（继承自`Ext.util.Observable`mixin），可以让你省略`remove`事件的触发。``

# pjsip - 是否可以仅将 PJSIP 用于 SIP 信令并单独处理媒体？

> ID：15198377
> 
> 赞同：4
> 
> 时间：2013-03-04T09:34:02.330
> 
> 标签：pjsip

谁能指导我一个 API，我可以通过它告诉 pjsip 使用我自己的本地端口 (UDP) 用于媒体？在 SDP 协商时，我读到我可以通过调用 pjmedia_sdp_neg_get_active_local() 来了解活动的本地 SDP，通过调用 pjmedia_sdp_neg_get_active_remote() 来了解活动的远程 SDP。

但是对于拨出电话，我需要创建自定义 SDP，只需修改本地端口。

因此，有没有办法告诉 PJSIP 不要为媒体打开其端口，并使用应用程序创建的自定义端口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-08T09:45:51.593

你可以做到，因为你应该只使用 pjsip 核心库并从 pjsip 中删除其他库，例如 pjmedia、codec、nath 等。即使我需要相同的东西，即 pjsip 仅用于 sip 消息传递，但它真的很难（我的 exp）仍然我无法正确分开它。

# c - 链接单独的二进制文件

> ID：15198384
> 
> 赞同：3
> 
> 时间：2013-03-04T09:34:23.913
> 
> 标签：c, linker, ld

假设我有两个可执行文件需要加载到不同地址的相同地址空间中。我想将这两个可执行文件保存为单独的文件，但允许一个调用另一个函数。

例如，如果必须在 0x1000 加载的可执行文件 A`void foo()`在 0x1ABC 包含一个函数，而在 0x2000 加载的可执行文件 B 调用`foo()`，我希望它以`call 0x1ABC`可执行文件 B的形式结束。

我需要这个的原因是为了玩具操作系统。我需要我的引导加载程序知道我的中断处理程序在哪里以及内核代码从哪里开始。我也许可以将整个内容压缩到一个文件中，但我宁愿不这样做。

目前，我通过在“好”地址手动加载所需功能并手动将跳转写入它们来解决问题。它有效，但是，不用说，它不是最理想的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T14:40:36.937

一种选择是通过第二条路径提供函数的地址。例如，这可以是一个文件，也可以是一个固定的内存地址。如果您可以完全控制系统，那么最后一个版本应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T16:19:00.447

我好像找到了。在 ld 链接器脚本中，有一个`(NOLOAD)`可以假定已驻留在内存中的部分的选项。

例如，如果`foo.o`要从 调用函数，则要`bar.o`构建的链接描述`foo.bin`文件不包含其中的任何代码`bar.o`

```
SECTIONS
{ 
  . = 0x1000;
  foo : { foo.o (*) }

  . = 0x2000;
  bar (NOLOAD) : { bar.o (*) }
} 
```

# wordpress - 仅显示帖子中的摘录

> ID：15198386
> 
> 赞同：1
> 
> 时间：2013-03-04T09:34:48.963
> 
> 标签：wordpress

我使用以下内容来调用摘录以显示，但它显示了完整的帖子：-

这是我的功能：-

```
add_action( 'init', 'my_add_excerpts_to_pages' );
function my_add_excerpts_to_pages() {
 add_post_type_support( 'page', 'excerpt' ); 
```

这也是我的查询

```
<?php
// retrieve one post with an ID of 5
query_posts( 'p=1' );

// set $more to 0 in order to only get the first part of the post
global $more;
$more = 0;

// the Loop
while (have_posts()) : the_post();
the_content( 'Read the full post »' );
endwhile;
?> 
```

请问你能建议吗？谢谢

# python - django-models、views.py 和模板到外键分配

> ID：15198391
> 
> 赞同：0
> 
> 时间：2013-03-04T09:35:07.660
> 
> 标签：python, mysql, django

模型.py

```
class Author(models.Model):
    author_id=models.AutoField(primary_key=True)
    first_name = models.CharField(max_length=30)
    last_name = models.CharField(max_length=40)
    email = models.EmailField()
    age=models.IntegerField()

    class Meta:
    db_table=u'Author Info'

    def __unicode__(self):
        return u"%d %s %s %s %d" % (self.pk, self.first_name, self.last_name, self.email,self.age)

    def books(self):
        return Book.objects.filter(author=self)

class Book(models.Model):
    book_id=models.AutoField(primary_key=True,unique=True)
    book_name=models.CharField(max_length=30)
    publisher_name=models.CharField(max_length=40)
    author=models.ForeignKey(Author)

    class Meta:
        db_table = u'Book Name'

    def __unicode__(self):
        return u'%d %s %s' % (self.pk, self.book_name, self.publisher_name) 
```

视图.py

```
def addbook(request):
    if request.POST:
        first_name = request.POST.get('first_name')
        last_name = request.POST.get('last_name')
        email = request.POST.get('email')
        age = request.POST.get('age')
    author = Author(first_name = first_name,last_name = last_name,email=email,age=age)
        author=author.save()
        book_name = request.POST.get('book_name')
        publisher_name = request.POST.get('publisher_name')
    #Book.author_id=author
        #author_id = author_id()
        book=Book.objects.create(book_name=book_name,publisher_name=publisher_name,author_id)
    book.save()
    return redirect('/index/')
    else:
        return render_to_response('addbook.html',context_instance=RequestContext(request)) 
```

index.html/模板

```
table border="0" cellpadding='8' cellspacing='10'>
    <tr>
        <td align="right" colspan="8"><a href="/addbook/">Add Book</a></td>
    </tr>

    <tr>
        <th>Book Id</>
    <th>Book name</th>
    <th>Publication name</th>
    <th>Author Id</th>
    <th>First Name</th>
    <th>Last Name</th>
    <th>E Mail</th>
    <th>Age</th>
    </tr>
    {% for book in books %}
    <tr>
       <td>{{ book.book_id }}</td>
       <td>{{ book.book_name }}</td>
       <td>{{ book.publisher_name }}</td>
       <td>{{ book.author_id }}</td>

       {% for author in authors %}  
         <td>{{author.first_name}} </td><td>{{author.last_name}}</td>
         <td>{{author.email}}</td>
         <td>{{author.age}}</td>
           {% endfor %}
             <td><a href="/editbook/{{ book.book_id}}">Edit</a></td>
             <td><a href="/deletebook/{{ book.book_id}}">Delete</a></td>
        {% endfor %} 
```

在这里如何在 Book 类中为“作者”或 author_id 字段分配外键值，请给出分配程序。我无法将值分配给外键字段...如何分配或是否有任何其他可用功能请解释我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T11:17:51.737

问题是这样的：

```
author = Author(first_name = first_name,last_name = last_name,email=email,age=age)
author=author.save() 
```

`save()`实际上并没有返回任何东西，即使我相信它应该。将其更改为简单的：

```
author = Author(first_name = first_name,last_name = last_name,email=email,age=age)
author.save()
book.author = author
book.save() 
```

现在你有了你的作者，你可以分配给`book.author`.

另外，当我在这里时，您应该了解[反向关系](https://docs.djangoproject.com/en/dev/topics/db/queries/#related-objects)。不需要以下方法：

```
def books(self):
    return Book.objects.filter(author=self) 
```

因为你可以这样做：

```
author.book_set.all() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T10:04:41.377

完整性错误是由于将空值传递给 Book 表的 author_id 列。检查这一行`book=Book.objects.create(book_name=book_name,publisher_name=publisher_name,author_id)`

如果你想在书表中插入相同的作者 ID，你可以使用

> django 信号

或者您必须通过查询一些唯一参数（例如电子邮件 ID 值）从 Author 表中获取最新的作者 ID，并将此 ID 传递给 Books 表

# sql-server - SQL Server 备份事务在线登录

> ID：15198397
> 
> 赞同：1
> 
> 时间：2013-03-04T09:35:37.280
> 
> 标签：sql-server

我将备份我的数据库的事务日志 (.bak)。如果我把它放在网上会导致任何问题，这意味着所有其他数据库活动都会同时发生（插入、更新、删除、选择）

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:44:29.040

不会。您可以安全地执行事务日志备份，而不会影响您的实时数据库活动。此链接提供了进行此类备份的限制 - [http://msdn.microsoft.com/en-gb/library/ms179478.aspx#Restrictions](http://msdn.microsoft.com/en-gb/library/ms179478.aspx#Restrictions)，其中没有值得注意的。

在不阻止正在运行的事务的情况下备份日志。

# facebook - 在 GAE 中部署应用程序

> ID：15198398
> 
> 赞同：0
> 
> 时间：2013-03-04T09:35:44.903
> 
> 标签：facebook, google-app-engine, jakarta-ee, facebook-javascript-sdk

我是 Google App Engine 的新手。我在部署以前在 glassfish 服务器中工作的应用程序时遇到问题。

此应用程序使用 Facebook 的 javascript sdk 和 Java servlet 和 jsp。该应用程序部署到 GAE，但它不起作用。

这就是我的应用程序实际应该如何工作的方式。它有一个 index1.jsp（仅包含用于获取 Facebook 数据的代码和一个重定向到 index.jsp 的表单）数据文件，我在其中获取 Facebook 用户数据，例如姓名和性别，然后应该重定向到 index.jsp 文件。这是用户看到的第一页。它有一个输入按钮，可将用户带到另一个页面。

问题是，当我使用 url myappname.appspot.com/index1 运行应用程序时，我只看到一个没有任何错误的空白页面。

我检查了没有 index1.jsp 的应用程序是否正在使用 url myappname.appspot.com/index.jsp 工作（在这种情况下，需要 Facebook 数据的字段为空）。它显示 index.jsp，但是当我按下回车键时，我得到 NullPointerException。

这是我的 GAE 日志中的日志： check_gender 是应用程序必须重定向到的实际 servlet。

**日志**

```
/check_gender
java.lang.NullPointerException
    at org.apache.jsp.menu_jsp._jspService(menu_jsp.java:67)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:97)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:390)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at org.mortbay.jetty.servlet.Dispatcher.forward(Dispatcher.java:327)
    at org.mortbay.jetty.servlet.Dispatcher.forward(Dispatcher.java:126)
    at apps.check_gender.processRequest(check_gender.java:60)
    at apps.check_gender.doGet(check_gender.java:545)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at com.google.apphosting.utils.servlet.ParseBlobUploadFilter.doFilter(ParseBlobUploadFilter.java:125)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.runtime.jetty.SaveSessionFilter.doFilter(SaveSessionFilter.java:35)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.handle(AppVersionHandlerMap.java:266)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
    at com.google.apphosting.runtime.jetty.RpcRequestParser.parseAvailable(RpcRequestParser.java:76)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at com.google.apphosting.runtime.jetty.JettyServletEngineAdapter.serviceRequest(JettyServletEngineAdapter.java:146)
    at com.google.apphosting.runtime.JavaRuntime$RequestRunnable.run(JavaRuntime.java:447)
    at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:454)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:461)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:703)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:338)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:330)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:458)
    at com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java:251)
    at java.lang.Thread.run(Thread.java:722)
C 2013-03-04 00:20:56.397
Uncaught exception from servlet
java.lang.NullPointerException
    at org.apache.jsp.menu_jsp._jspService(menu_jsp.java:67)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:97)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:390)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at org.mortbay.jetty.servlet.Dispatcher.forward(Dispatcher.java:327)
    at org.mortbay.jetty.servlet.Dispatcher.forward(Dispatcher.java:126)
    at apps.check_gender.processRequest(check_gender.java:60)
    at apps.check_gender.doGet(check_gender.java:545)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at com.google.apphosting.utils.servlet.ParseBlobUploadFilter.doFilter(ParseBlobUploadFilter.java:125)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.runtime.jetty.SaveSessionFilter.doFilter(SaveSessionFilter.java:35)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.handle(AppVersionHandlerMap.java:266)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
    at com.google.apphosting.runtime.jetty.RpcRequestParser.parseAvailable(RpcRequestParser.java:76)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at com.google.apphosting.runtime.jetty.JettyServletEngineAdapter.serviceRequest(JettyServletEngineAdapter.java:146)
    at com.google.apphosting.runtime.JavaRuntime$RequestRunnable.run(JavaRuntime.java:447)
    at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:454)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:461)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:703)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:338)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:330)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:458)
    at com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java:251)
    at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:37:26.470

您检查了您的应用程序是否在本地开发环境中运行？

正如你所说的所有值都是空的，这可能是 Nullpointer 的原因吗？关于您的日志，nullpointer 来自您的 jsp：

第 67 行的 menu_jsp

> org.apache.jsp.menu_jsp._jspService(menu_jsp.java:67) 处的 java.lang.NullPointerException

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T10:22:10.053

实际上，这很可能是您的代码中出现的一个简单的空指针。尝试在第 60 行设置断点`check_gender.java`，这样您就可以看到发生了什么。

# excel - 在 Excel 中具有相同索引的同一工作表中创建指向另一个选项卡的超链接

> ID：15198404
> 
> 赞同：0
> 
> 时间：2013-03-04T09:36:11.473
> 
> 标签：excel, excel-2007, excel-formula, excel-2010, vba

*   我在名为 MAIN、SUB1 和 SUB2 的 Excel 工作表中有三个选项卡。

*   SUB1 包含一个 TC 列，其值为 TC1、TC2、...TC30。

*   而 SUB2 包含一个 TC 列，其值为 TC31、TC32、...TC90。

*   MAIN 选项卡包含一个 TC 列，其值为 TC1...TC90。

*我需要一个***通用公式***，以便如果用户单击 TC1（SUB1 的 TC 列），超链接应将其带到 MAIN 的 TC 列中的 TC1（反之亦然）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T14:11:39.840

试试这个代码。您需要将其放置在`ThisWorkbook`模块中：

```
Private Sub Workbook_SheetBeforeDoubleClick(ByVal Sh As Object, ByVal Target As Range, Cancel As Boolean)
    Dim wsTarget As Worksheet
    If Left(Target, 2) <> "TC" Then Exit Sub

    On Error GoTo ErrorHandler1
    If UCase(Left(Sh.Name, 3)) = "SUB" Then
        Set wsTarget = Sheets("Main")
    Else
        Set wsTarget = Sheets("SUB" & _
            IIf(CInt(Mid(Target.Value, 3)) <= 30, 1, 2))
    End If
    wsTarget.Activate
    On Error GoTo ErrorHandler2

    wsTarget.Cells.Find(Target.Value, wsTarget.Range("A1")).Activate
    Exit Sub

ErrorHandler1:
    MsgBox "Cannot identify target sheet from " & Target
    Exit Sub
ErrorHandler2:
    MsgBox "Cannot find " & Target & " in sheet " & wsTarget.Name
End Sub 
```

# xcode - 在同一视图中获取 TableView 选定行的值

> ID：15198405
> 
> 赞同：1
> 
> 时间：2013-03-04T09:36:14.317
> 
> 标签：xcode, uitableview

我有一个包含一些分段控件、文本字段和表格视图的页面。用户编写/选择他想要的内容，然后点击将所有值传递给另一个视图的按钮（所述值用于执行搜索）。这是传递值的函数的简化版本：

```
-(IBAction) doTheSearch {
    [self dismissViewControllerAnimated:YES completion:nil];  
    // initialize the view who will perform the search
    NewSearchController *nsc = [[NewSearchController alloc] init];
    // set values from one text field and one segmented control
    nsc.testString = textfield.text;    
    NSString *temp = [NSString stringWithFormat:@"%d",segmentedcontrol.selectedSegmentIndex];
    nsc.testCode = temp;
    [self.navigationController pushViewController:nsc animated:YES];
} 
```

是否可以使用相同的函数来获取从表视图中选择的行，就像我对文本字段和分段控件的值所做的那样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:28:03.747

```
 NSIndexPath *path = [self.tableView indexPathForSelectedRow]; 
```

从上面的代码可以得到 indexPath

```
path.row 
```

获取您选择的确切行。

# python - 在 Python 中有一个迭代字典

> ID：15198411
> 
> 赞同：1
> 
> 时间：2013-03-04T09:36:38.337
> 
> 标签：python, dictionary, iteration

我有一个数据库，我在其中注册了一些数据。我试图选择所有行并尝试将表格的每一行放入字典中，但我似乎无法做到这一点。

这是代码：

```
db = MySQLdb.connect("localhost","root","aqw","PFE_Project" )
cursor = db.cursor()
sql = "SELECT * FROM ServerComponents"

try:

   cursor.execute(sql)
   results = cursor.fetchall()
   nbre_row = cursor.rowcount

   server_name = []
   server_price = []
   for row in results:
      server_id = row[0] 
      server_name.append(row[1])
      core_number = int(row[2])
      clock_speed = int(row[3])
      ram = int(row[4])
      rom = row[5]
      hdd = int(row[6])
      video_card = row[7]
      cache_memory = row[8]
      # calculation metric is a function that i used to calculate the server prize
      p = calculations_metric (core_number, clock_speed, ram, hdd, video_card)
      server_price.append(p)

      try :
          # i wanna the attribute "response" be iterative
          response = {"Server Name" : server_name , "Server Price" : server_price }

      except :
          print "error in response"

except:
   print "Error: unable to fetch data"

print(response) 
```

这是我得到的结果：

```
{"Server Name": ["Dell1", "Dell2"], "Server Price": [149, 151]} 
```

但我想看到的结果是这样的：

```
{"Server Name" : Dell1, "Server Price": 149}
{"Server Name" : Dell2, "Server Price": 151} 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T09:46:57.837

```
servers = []
for row in results:
   result = {}
   result['server_name'] = row[1])
   p = calculations_metric (core_number, clock_speed, ram, hdd, video_card)
   result['server_price'] = p
   servers.append(result) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T09:46:41.647

请试试这个

```
db = MySQLdb.connect("localhost","root","aqw","PFE_Project" )
cursor = db.cursor()
sql = "SELECT * FROM ServerComponents"

response = []
try:

   cursor.execute(sql)
   results = cursor.fetchall()
   nbre_row = cursor.rowcount

   for row in results:
      local_dict = {}
      server_id = row[0] 
      local_dict["Server Name"] = row[1]
      core_number = int(row[2])
      clock_speed = int(row[3])
      ram = int(row[4])
      rom = row[5]
      hdd = int(row[6])
      video_card = row[7]
      cache_memory = row[8]
      # calculation metric is a function that i used to calculate the server prize
      p = calculations_metric (core_number, clock_speed, ram, hdd, video_card)
      local_dict["Server Price"] = p
      response.append(local_dict)

except:
   print "Error: unable to fetch data"

print(response) 
```

我们不是附加到列表，而是创建本地字典并将该本地字典添加到响应中。

# cassandra - 卡桑德拉内存不足

> ID：15198413
> 
> 赞同：0
> 
> 时间：2013-03-04T09:36:46.403
> 
> 标签：cassandra, out-of-memory, datastax-java-driver

我已经建立了一个 3 节点集群（Cassandra 1.2.1）和一个复制因子为 3 的列族。

列族称为 metric_hour 并使用列名称保存一小时的 15 秒平均值：

*   帐户名称
*   指标名称
*   值类型（字符串）
*   单位类型（字符串）
*   m0
*   米1 ...
*   m239

我正在并行运行 6 个客户端，每个客户端都将数据推送到集群，总共有 210 万个指标值（一个指标为一整年的 15 秒值）。因为我不想为每个度量值读取和写入数据，我正在计算 metric_hours 的完整列表以预先存储并在最后将它们发送到集群，刚刚超过 8500 个插入。使用 BEGIN BATCH ... END BATCH 以 50 个为一组对刀片进行批处理；

大约 5-6 分钟后，Cassandra 集群不堪重负，堆满，节点开始出现故障（要么变得无响应，要么完全死亡）。我已经多次运行此设置，结果相同。

每个 cassandra 节点都在自己的专用硬件、四核 2.3 GHz Intel i7 CPU 和 16GB 物理 RAM 上运行（这些是 Mac Mini Server 机器。数据保存在内部 SSD 上）。我已经通过 cassandra-env 在 2 到 8 GB 的范围内设置了 -Xmx 和 -Xmn。使用 8GB 运行可使集群运行更长时间，但在短时间内仍会失败。

我还将一致性级别设置为 QUORUM，这可以使集群保持更长时间的活动。一分钟左右。

所有 CQL 查询都使用 Datastax java-driver 和 CQL3 发送到 Cassandra 集群。我试过打开和关闭row_cache。

在 Riak 集群上运行完全相同的设置在相对较长的时间内没有问题。所以我想知道 Cassandra 设置可以改进什么，或者可能有什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T13:50:27.007

我们每个节点有 10 亿行，在 10 亿行时遇到了 RAM 问题，稍后会解释（使用 PlayOrm 进行 cassandra）。

50个批次就不错了。我不敢相信你只用了 8500 个插入的 RAM。这是没有意义的。你在哪个版本？RAM 问题与布隆过滤器和索引采样有关，您需要使用 8G 的 RAM 达到 10 亿才能出现问题。

要拥有更多行，就像我们即将做的那样，尝试使用 Leveled Compaction STrategy 的 1.2.2。索引采样（cassandra.yaml）可能也可以降低。Bloomfilters 每 10 亿行占用大约 2 Gig RAM。我们每个节点有超过 10 亿行，因此遇到了内存问题。我们有 32 台 gig RAM 机器，但 cassandra 将其自动配置为 8G RAM，因为 jdk GC 在 8G 以上时变得很糟糕。最近，我们将 JVM 提高到 12G 以解决这个问题，直到我们可以使用 LCS 关闭bloomfilters（我们希望这有助于我们每个节点处理 50 亿行）。

从 1.1.4 迁移到 1.2.2 显着减少了 RAM 使用量（我们今天实际上正在运行升级，但在生产中的节点 5 上进行了测试，发现对于相同数量的行使用更少的 RAM）。我们确实希望通过切换到水平压缩策略来获得 50 亿行时间序列数据，默认情况下不再使用布隆过滤器（布隆过滤器占用 RAM，更多行 = 使用更多 RAM）。

院长

# javascript - PhoneGap如何从应用程序的内部存储中包含JavaScript文件

> ID：15198414
> 
> 赞同：0
> 
> 时间：2013-03-04T09:36:48.870
> 
> 标签：javascript, android, cordova, android-sdk-2.3

我的内部应用程序存储中有一个 JavaScript 文件说“include.js”。

在我的 index.html 文件中包含我们使用的任何 javascript 文件：-

```
<script type="text/javascript" charset="utf-8" src="include.js"></script> 
```

但是我怎样才能将 src 作为我在内部存储中的文件，即 include.js

提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T22:02:21.493

我知道这是一个较老的问题，但答案是您可以将其包含在

```
<script src="file:///mnt/sdcard/include.js" 
```

# python - 修复无效的 JSON 八进制转义

> ID：15198426
> 
> 赞同：6
> 
> 时间：2013-03-04T09:37:16.797
> 
> 标签：python, json, string, parsing

KISSmetrics 生成我需要解析的无效 JSON 字符串。我遇到了很多错误，例如

```
ERROR 2013-03-04 04:31:12,253 Invalid \escape: line 1 column 132 (char 132): {"search engine":"Google","_n":"search engine hit","_p":"z392cpdpnm6silblq5mac8kiugq=","search terms":"happy new year animation 1920\303\2271080 hd","_t":1356390128}

ERROR 2013-03-04 04:34:19,153 Invalid \escape: line 1 column 101 (char 101): {"search engine":"Google","_n":"ad campaign hit","_p":"byskpczsw6sorbmzqi0tk1uimgw=","search terms":"\331\203\330\261\330\252\331\207 \331\201\331\212\330\257\331\212\330\244\331\211 \330\256\331\212\331\204\330\247\330\255\331\211 \331\203\331\210\330\261\330\257\331\211","_t":1356483052} 
```

我的代码是：

```
for line in lines:
    try:
        data = self.clean_data(json.loads(line))
        except ValueError, e:
            logger.error('%s: %s' % (e.message, line)) 
```

原始数据示例：

```
{"search engine":"Google","_n":"search engine hit","_p":"kvceh84hzbhywcnlivv+hdztizw=","search terms":"military sound effects programs","_t":1356034177} 
```

有没有机会清理这个凌乱的 JSON 并解析它？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-04T10:02:18.653

您的输入数据包含八进制转义；那些确实是无效的。使用正则表达式将它们替换为解码的字节：

```
import re

invalid_escape = re.compile(r'\\[0-7]{1,3}')  # up to 3 digits for byte values up to FF

def replace_with_byte(match):
    return chr(int(match.group(0)[1:], 8))

def repair(brokenjson):
    return invalid_escape.sub(replace_with_byte, brokenjson) 
```

这使您的输入工作：

```
>>> data1 = r"""{"search engine":"Google","_n":"search engine hit","_p":"z392cpdpnm6silblq5mac8kiugq=","search terms":"happy new year animation 1920\303\2271080 hd","_t":1356390128}"""
>>> json.loads(repair(data1))
{u'_n': u'search engine hit', u'search terms': u'happy new year animation 1920\xd71080 hd', u'_p': u'z392cpdpnm6silblq5mac8kiugq=', u'_t': 1356390128, u'search engine': u'Google'}
>>> print json.loads(repair(data1))['search terms']
happy new year animation 1920×1080 hd
>>> data2 = r"""{"search engine":"Google","_n":"ad campaign hit","_p":"byskpczsw6sorbmzqi0tk1uimgw=","search terms":"\331\203\330\261\330\252\331\207 \331\201\331\212\330\257\331\212\330\244\331\211 \330\256\331\212\331\204\330\247\330\255\331\211 \331\203\331\210\330\261\330\257\331\211","_t":1356483052}"""
>>> json.loads(repair(data2)){u'_n': u'ad campaign hit', u'search terms': u'\u0643\u0631\u062a\u0647 \u0641\u064a\u062f\u064a\u0624\u0649 \u062e\u064a\u0644\u0627\u062d\u0649 \u0643\u0648\u0631\u062f\u0649', u'_p': u'byskpczsw6sorbmzqi0tk1uimgw=', u'_t': 1356483052, u'search engine': u'Google'}
>>> print json.loads(repair(data2))['search terms']
كرته فيديؤى خيلاحى كوردى 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-12T03:01:45.793

在这个确切的场景中考虑 cjson ( [https://pypi.python.org/pypi/python-cjson](https://pypi.python.org/pypi/python-cjson) )

似乎可以处理转义的八进制（并且很快）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-17T19:50:31.740

我有类似的问题，只是用 yaml 替换 json 库解决了这个问题。（YAML 与 JSON 兼容。）

例子：

```
import yaml

obj = yaml.load(json_string) # instead of json.loads(json_string) 
```

# c# - 通过中心点定义对象位置

> ID：15198429
> 
> 赞同：0
> 
> 时间：2013-03-04T09:37:37.887
> 
> 标签：c#, winforms, picturebox

在 c# .net 4 表单中，每当我添加一个对象时，它的位置由它的左上角决定。这意味着，如果我调整这个对象的大小，它将从这一点开始调整大小。

我有一个图片框。如果我将宽度和高度更改为更小的值，那么图片框似乎已移动，因为它的边框现在更靠近左上角，从而移动了图片框的中心点。

我希望图片框在保持其位置的同时重新缩放 - 这意味着图片的中心点将保持不变，而大小将围绕该点拆分（一半上一半下和一半左半右）。

那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:42:33.193

这不在我的脑海中，并且制作得很快，但类似于：

```
void resizeFromCenter(PictureBox box, int w, int h)
{
  var cenx = box.Left + box.Width/2;
  var ceny = box.Top + box.Height/2;
  box.Left = cenx - w/2;
  box.Width = w;
  box.Top = ceny - h/2;
  box.Height = h;
} 
```

# java - android应用程序中的JSON解析

> ID：15198431
> 
> 赞同：0
> 
> 时间：2013-03-04T09:37:44.143
> 
> 标签：java, android, json, parsing, arrays

该 URL 有以下视图源。我需要解析和获取为“Folio”提供的图像路径。任何人都可以指导如何获取以下路径的数组。提前谢谢

```
 {"SEO":

  {"Marketing":["http://www.tts.com/media/imagepath/Web.jpg","http://www.tts.com/imagepath/ranks.jpg"],
      "Folio":["http://www.tts.com/media/imagepath/portfolio_images/http_arctictern.t.com.au_folio_portfolio_a_grade_motor_school.html_a_poftfolio_2013_01_11.png",
                                   "http://www.tts.com/media/imagepath/portfolio_images/http_arctictern.t.com.au_folio_portfolio_abc_tarps.html_a_poftfolio_2013_01_10.png",
                                              "http://www.tts.com/media/imagepath/portfolio_images/http_arctictern.t.com.au_folio_portfolio_able_scale.html_a_poftfolio_2013_01_10.png",
                                              "http://www.tts.com/media/imagepath/portfolio_images/http_arctictern.t.com.au_folio_portfolio_accent_aluminum_windows.html_a_poftfolio_2013_01_10.png",
                                              "http://www.tts.com/media/imagepath/portfolio_images/http_arctictern.t.com.au_folio_portfolio_access_health.html_a_poftfolio_2013_01_10.png",
                                              "http://www.tts.com/media/imagepath/portfolio_images/http_arctictern.t.com.au_folio_portfolio_acmeda__zipscreen.html_a_poftfolio_2013_01_11.png",
                                              "http://www.tts.com/media/imagepath/portfolio_images/http_arctictern.t.com.au_folio_portfolio_aditya_birla_minerals.html_a_poftfolio_2013_01_10.png",
                                              "http://www.tts.com/media/imagepath/portfolio_images/http_arctictern.t.com.au_folio_portfolio_advanced_corporate_badges.html_a_poftfolio_2013_01_10.png",
                                              "http://www.tts.com/media/imagepath/portfolio_images/http_arctictern.t.com.au_folio_portfolio_aerotech_fans.html_a_poftfolio_2013_01_10.png",
                                              "http://www.tts.com/media/imagepath/portfolio_images/http_arctictern.t.com.au_folio_portfolio_agriculture_victoria_services_.html_a_poftfolio_2013_01_10.png"]},

 "Services":{"Hosting":["http://www.tts.com/media/imagepath/hostinga.jpg","http://www.tts.com/media/imagepath/hostingb.jpg"],

  "Mobile Apps":["http://www.tts.com/media/imagepath/mobileapp.jpg","http://www.tts.com/media/imagepath/mobilesite.jpg"]

}

} 
```

JSON解析器类包含

```
public class JSONParser {

    static InputStream is = null;
    static JSONObject jObj = null;
    static String json = "";

    // constructor
    public JSONParser() {

    }

    public JSONObject getJSONFromUrl(String url) {

        // Making HTTP request
        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();           

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            json = sb.toString();

        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object
        try {
            jObj = new JSONObject(json);
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }

        // return JSON String
        return jObj;

    }
} 
```

主要活动包括

```
 public class AndroidJSONParsingActivity extends ListActivity {

    private static String url = "http://www.xyz.com/album_pro/array_to_encode";
    private static final String TAG_FOLIO = "SEO";
     JSONArray folio = null;
     @SuppressLint("NewApi")
    public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);
            StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
              StrictMode.setThreadPolicy(policy);

            JSONParser jParser = new JSONParser();

            try{

                JSONObject json = jParser.getJSONFromUrl(url);
                Log.v("URL",json.toString());
            JSONObject seo = json.getJSONObject("SEO");
            Log.v("seo",seo.toString());
            JSONArray folio = json.getJSONArray("Folio");

            for(int i=0;i< folio.length();i++)
            {
                Log.v("Test", "test");
            }

            }
            catch(Exception e)
            {
                e.printStackTrace();
            }

}
} 
```

在 logcat 文件中运行应用程序后出现的错误如下

```
03-04 15:36:50.458: W/System.err(23230): org.json.JSONException: No value for Folio
03-04 15:36:50.458: W/System.err(23230):    at org.json.JSONObject.get(JSONObject.java:354)
03-04 15:36:50.458: W/System.err(23230):    at org.json.JSONObject.getJSONArray(JSONObject.java:544)
03-04 15:36:50.458: W/System.err(23230):    at com.example.testgallery.AndroidJSONParsingActivity.onCreate(AndroidJSONParsingActivity.java:37)
03-04 15:36:50.458: W/System.err(23230):    at android.app.Activity.performCreate(Activity.java:5008)
03-04 15:36:50.458: W/System.err(23230):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
03-04 15:36:50.458: W/System.err(23230):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T10:16:40.873

首先创建一个 ArrayList 像...

```
ArrayList<String> urlList = new ArrayList<String>(); 
```

从 JSONObject Marketing 获取 Folio JSONArray，例如...

```
JSONArray folio = marketing.getJSONArray("Folio"); 
```

现在将所有项目从 folio 放到 urlList 中，例如...

```
for(int i=0;i<folio.length();i++){
  urlList.add(folio.getString(i));
} 
```

现在你可以使用这个 urlList。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T10:16:30.190

试试这个

```
JSONObject json = jParser.getJSONFromUrl(url);
JSONObject seoObj = jObj.getJSONObject("SEO");
JSONArray folioArr = seoObj.getJSONArray("Folio");
ArrayList<String> image_urls = new ArrayList<String>();
for (int i = 0; i < folioArr.length(); i++) {
image_urls.add(folioArr.getString(i));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T09:56:39.840

假设您在一个`String`名为`stringSource`.

```
JSONObject json = new JSONObject(stringSource);
JSONObject seo = json.getJSONObject("SEO");
JSONArray folio = json.getJSONArray("Folio"); 
```

然后用于`JSONArray.getString(int index)`从数组中检索每个 URL。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T10:12:21.593

将您的响应转换为`String`

然后

```
JSONObject json = new JSONObject(response.toString());
//Since Folio is an array
JSONArray folio = json.getJSONArray("Folio");
//Get Individual Links
for(int i=0;i<folio.length();i++){
   //Fetch Your Code Here
   String image = folio.getString(i);

} 
```

注意：我认为您收到了无效的 JSON 响应。[我在这里](http://jsonformatter.curiousconcept.com/)检查了你的回复

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-18T15:47:46.450

上这堂课

```
 public class GettingResponseFromUrl {

    public static String convertStreamToString(InputStream inputStream)
            throws IOException {
        if (inputStream != null) {
            StringBuilder sb = new StringBuilder();
            String line;
            try {
                BufferedReader reader = new BufferedReader(
                        new InputStreamReader(inputStream, "UTF-8"));
                while ((line = reader.readLine()) != null) {
                    sb.append(line).append("\n");
                }
            } finally {
                inputStream.close();
            }
            return sb.toString();
        } else {
            return "";
        }
    }

    public static String GetDataFromServer(String url, String method) {
        url = url.replace(" ", "%20");
        String Root_Response = null;
        try {
            HttpParams basicparams = new BasicHttpParams();
            int timeoutConnection = 120000;
            HttpConnectionParams.setConnectionTimeout(basicparams,
                    timeoutConnection);
            DefaultHttpClient client = new DefaultHttpClient(basicparams);
            URI uri = new URI(url);
            HttpResponse res = null;
            if (method.equalsIgnoreCase("POST")) {
                HttpPost httpPost = new HttpPost(uri);
                res = client.execute(httpPost);
            } else if (method.equalsIgnoreCase("GET")) {
                HttpGet httpGet = new HttpGet(uri);
                res = client.execute(httpGet);
            }
            InputStream data = res.getEntity().getContent();
            Root_Response = convertStreamToString(data);

        } catch (ClientProtocolException e) {
        } catch (IOException e) {
            e.printStackTrace();
        } catch (URISyntaxException e) {
            e.printStackTrace();
        }
        return Root_Response;
    }

} 
```

//比从下面的代码调用Web服务

```
new GettingData().execute();

    private class GettingData extends AsyncTask<String, String, String> {

        private ProgressDialog progressDialog;
            private String response;

        @Override
        protected void onPreExecute() {

            super.onPreExecute();
            progressDialog = new ProgressDialog(mContext);
            progressDialog.setMessage("Loading ...");
            progressDialog.setIndeterminate(false);
            progressDialog.setCancelable(true);
            progressDialog.show();

        }

        @Override
        protected String doInBackground(String... args) {
try {
            Response = GettingResponseFromUrl
                    .GetDataFromServer(URL, "POST");
            Log.e("Response", Response);
        } catch (Exception e) {
        }
            runOnUiThread(new Runnable() {
                @Override
                public void run() {

                }
            });
            return null;
        }

        @Override
        protected void onPostExecute(String args) {
            progressDialog.dismiss();

        }
    } 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-09-27T11:00:47.707

看看这个免费提供的工具

[Android 类创建器工具](http://www.tejasj.com/rocking-json-parsing-tool-for-android/)

它的教程是它。它很容易使用。

# javascript - Json字符串解析问题

> ID：15198435
> 
> 赞同：0
> 
> 时间：2013-03-04T09:38:00.077
> 
> 标签：javascript, json

```
 var jsonString ="{ "
            jsonString += "name:" + Data.name+",";
            jsonString += "surname:"+ Data.surname+",";
            jsonString += "Address: " + Data.add;
            jsonString += "}" 
```

我正在为 Ajax 调用创建以下 json 字符串。但是当地址字段中有“，”时。它给了我错误。谁能告诉我在javascript中为ajax调用创建json字符串的正确方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T09:40:04.320

用于[`JSON.stringify()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)生成 JSON 字符串。它会自动转义任何需要的字符。

```
var jsonString = JSON.stringify( Data ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T09:40:39.497

请使用[JSON.stringify()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)：

```
var jsonString = JSON.stringify({
  'name': Data.name,
  'surname': Data.surname,
  'address': Data.add
}); 
```

请注意，@Sirko 提供了非常相似的答案。如果您想序列化“数据”对象中的所有字段，请使用他。如果没有，请使用我的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T09:39:47.873

为什么要在 JavaScript 中创建这样的 json 字符串？JSON 或“ **JavaScript**对象表示法”。您可以使用内置方法创建一个对象并使其成为 JSON 字符串。

```
var data = {
  name: Data.name,
  surname: Data.surname,
  ...
};

var json = JSON.stringify(data); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T09:40:38.653

试试这个：

```
var jsonString ="{ ";
jsonString += "name:" + '"'+Data.name + '",';
jsonString += "surname:"+ '"'+ Data.surname + '",';
jsonString += "Address: " + '"'+ Data.add + '"';
jsonString += "}"; 
```

或者您可以使用`JSON.stringify()`：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)

# owl - 如何在 Protege 中为数据属性使用一个范围之类的类

> ID：15198436
> 
> 赞同：1
> 
> 时间：2013-03-04T09:38:02.617
> 
> 标签：owl, protege, protege4

*   我创建了一个名为**kind的****数据属性**。
***   我希望它的范围是**StateKing**。我不知道该怎么做。事实上，在**“属性断言视图”**、**“描述视图”**中，当我单击**“添加”**图标**(+)**时，会弹出下一个 Ranges，其中包含指定的数据类型，如 int、Boolean、integer...*   请注意，**StateKing**是一个**枚举类**。

    **StateKing**： **等效类**{choise , final , fork , initial , join , junction , state}。** 

 **谢谢你的建议。

PS：我现在无法添加图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T14:03:54.693

`StateKing`是一个类，所以如果你想拥有一个使用它作为范围的属性，它需要是一个**对象属性**而不是数据属性。

下面的代码是使用 Manchester 语法表示的本体，如果将其保存为 .owl，您将能够使用 Protege 4 打开它。

```
<?xml version="1.0"?>
<!DOCTYPE rdf:RDF [
<!ENTITY owl "http://www.w3.org/2002/07/owl#" >
<!ENTITY dc "http://purl.org/dc/elements/1.1/" >
<!ENTITY xsd "http://www.w3.org/2001/XMLSchema#" >
<!ENTITY xml "http://www.w3.org/XML/1998/namespace" >
<!ENTITY rdfs "http://www.w3.org/2000/01/rdf-schema#" >
<!ENTITY rdf "http://www.w3.org/1999/02/22-rdf-syntax-ns#" >
]>

<rdf:RDF xmlns="http://www.example.org/demo.owl#"
 xml:base="http://www.example.org/demo.owl"
 xmlns:dc="http://purl.org/dc/elements/1.1/"
 xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
 xmlns:owl="http://www.w3.org/2002/07/owl#"
 xmlns:xsd="http://www.w3.org/2001/XMLSchema#"
 xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
 xmlns:xml="http://www.w3.org/XML/1998/namespace">
<owl:Ontology rdf:about="http://www.example.org/demo.owl"/>

<owl:ObjectProperty rdf:about="http://www.example.org/demo.owl#kind">
    <rdfs:range rdf:resource="http://www.example.org/demo.owl#StateKing"/>
</owl:ObjectProperty>

<owl:Class rdf:about="http://www.example.org/demo.owl#StateKing">
    <owl:equivalentClass>
        <owl:Class>
            <owl:oneOf rdf:parseType="Collection">
                <rdf:Description rdf:about="http://www.example.org/demo.owl#join"/>
                <rdf:Description rdf:about="http://www.example.org/demo.owl#state"/>
                <rdf:Description rdf:about="http://www.example.org/demo.owl#choise"/>
                <rdf:Description rdf:about="http://www.example.org/demo.owl#final"/>
                <rdf:Description rdf:about="http://www.example.org/demo.owl#initial"/>
                <rdf:Description rdf:about="http://www.example.org/demo.owl#junction"/>
                <rdf:Description rdf:about="http://www.example.org/demo.owl#fork"/>
            </owl:oneOf>
        </owl:Class>
    </owl:equivalentClass>
</owl:Class>

<owl:Class rdf:about="&owl;Thing"/>

<owl:Thing rdf:about="http://www.example.org/demo.owl#choise">
    <rdf:type rdf:resource="&owl;NamedIndividual"/>
</owl:Thing>

<owl:Thing rdf:about="http://www.example.org/demo.owl#final">
    <rdf:type rdf:resource="&owl;NamedIndividual"/>
</owl:Thing>

<owl:Thing rdf:about="http://www.example.org/demo.owl#fork">
    <rdf:type rdf:resource="&owl;NamedIndividual"/>
</owl:Thing>

<owl:Thing rdf:about="http://www.example.org/demo.owl#initial">
    <rdf:type rdf:resource="&owl;NamedIndividual"/>
</owl:Thing>

<owl:Thing rdf:about="http://www.example.org/demo.owl#join">
    <rdf:type rdf:resource="&owl;NamedIndividual"/>
</owl:Thing>

<owl:Thing rdf:about="http://www.example.org/demo.owl#junction">
    <rdf:type rdf:resource="&owl;NamedIndividual"/>
</owl:Thing>

<owl:Thing rdf:about="http://www.example.org/demo.owl#state">
    <rdf:type rdf:resource="&owl;NamedIndividual"/>
</owl:Thing>
</rdf:RDF> 
```**

# jquery - 解析带有特殊字符的xml

> ID：15198443
> 
> 赞同：0
> 
> 时间：2013-03-04T09:38:27.087
> 
> 标签：jquery, html, xml

我在对象标头中有以下带有特殊字符“：”的 xml。如何解析它。

```
<p606:ResponseData xmlns:p353="">
<p353:PersonId idOwner="loA">
<p353:IdValue name="78N">1fgsth</p353:IdValue> 
</p353:PersonId>
<p353:CInfo effectiveDate="2010-03-13" xsi:type="p353:cnt">
<p353:TCode>OYYT</p353:TCode> 
<p353:Ext>100</p353:Ext> 
</p353:ContactInfo>
</p606:ResponseData> 
```

我使用了以下

```
xmlDoc = $.parseXML( xml ),
$xml = $( xmlDoc ),
$title = $xml.find( "p353:TCode" );
$( "#somePlace" ).append( $title.text() ); 
```

但它没有用......此外，我想要来自以下行的 EffectiveDate 的值

```
<p353:CInfo effectiveDate="2010-03-13" xsi:type="p353:cnt"> 
```

怎么做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:43:19.573

首先你应该转义 : 字符，默认情况下它表示伪类，在 jQuery 选择器中。

```
$xml = $(xml);
Try this for title: $xml.find("p353\\:TCode").text();
And for date: $xml.find("p353\\:CInfo").attr('effectiveDate'); 
```

以下问题可能对您有所帮助： [jQuery XML parsing with namespaces](https://stackoverflow.com/questions/853740/jquery-xml-parsing-with-namespaces)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T09:43:41.577

这些是引用命名空间 URI 的前缀。您需要一个 naespace 感知解析器。请注意，节点的名称`ResponseData`不是`p606:ResponseData`.

前缀应在元素的父链中的某处声明，例如：

```
<p606:foo xmlns:p606="http://www.example.com/portal/606">
    <p606:bar property="value"/>
</p606:foo> 
```

在片段中很明显`p353`没有定义。

# c# - 如何使用 ClosedXml 使 Excel 在公式单元格中换行

> ID：15198445
> 
> 赞同：16
> 
> 时间：2013-03-04T09:38:54.750
> 
> 标签：c#, excel, closedxml

问题是单元格内容没有被包装，当该单元格包含一个引用具有一些长字符串的单元格的公式时。

在[CodePlex](http://closedxml.codeplex.com/discussions/402851)上，我找到了一个关于这个问题的线程和一个简单的代码来查看问题：

```
var generated = new XLWorkbook();
var workSheet = generated.AddWorksheet("Test");
workSheet.Cell("B1").Style.Alignment.WrapText = true;
workSheet.Cell("B1").Value = "hello hello hello hello hello";
workSheet.Cell("A3").FormulaA1 = "B1";
workSheet.Cell("A3").Style.Alignment.WrapText = true;
generated.SaveAs("Generated.xlsx"); 
```

我还尝试手动设置行高而不是包装单元格：

```
workSheet.Row(3).Height = workSheet.Row(1).Height; 
```

然而也没有成功。

对此我能做些什么吗？

* * *

根据 Peter Albert 的评论，我尝试制作设置行的`AutoFit`. 我设法在 ClosedXML 中找到的唯一方法是`workSheet.Row(3).AdjustToContent();`. 但这也不起作用（既不调整某些列的内容）。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2015-10-09T06:12:18.970

您可以像这样应用 Wraptext 而不是将调整应用于内容

```
var generated = new XLWorkbook();
var workSheet = generated.AddWorksheet("Test");
worksheet.Cell(3, 2).Value = "Hello Hello Hello Hello Hello Hello Name";    
worksheet.Cell(3, 2).Style.Alignment.WrapText = true; 
```

如果您想同时应用两者，请在 AdjustToContents 之后使用它。

```
var generated = new XLWorkbook();
var workSheet = generated.AddWorksheet("Test");
worksheet.Columns(2, 20).AdjustToContents();    
worksheet.Cell(3, 2).Value = "Hello Hello Hello Hello Hello Hello Name";
worksheet.Cell(3, 2).Style.Alignment.WrapText = true; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-02-05T13:39:49.350

我用这个

```
 xlWorkSheet.Range["A4:A4"].Cells.WrapText = true; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-26T12:52:49.110

抱歉，我仍然不能写评论... AutoFit 不是 ClosedXML 的属性。关于 AdjustToContents，在我的版本（26/07/2014，我认为 0.72.3）中忽略了 WordWrap 属性（分割长行）。这是主要检查

```
 if (c.HasRichText || textRotation != 0 || c.InnerText.Contains(Environment.NewLine))
            {
               // omissis...
            }
            else
                thisHeight = c.Style.Font.GetHeight( fontCache); 
```

如果单元格由于自动换行而超过一行，则此实现会忽略确切的高度。因此，AdjustToContents + AutoWrap 不起作用。如果你需要有你需要避免调用 AdjustToContents 的内容的高度大小。此行为与 XL IsAutoHeight 属性不兼容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-22T10:03:05.473

找到以下解决方案（仅限 excel）：

1.  我`row.Cells("start cell : end cell").Style.Alignment.SetWrapText(true)`为所有使用的单元格设置

2.  我用以下文本编写了一个 VBA 宏：（ `Range("A" & Row & ":N" & Row).EntireRow.AutoFit`对于行） `Range("A" & Row & ":N" & Row).EntireColumn.AutoFit`（对于列）

3.  指定它在文档启动时运行

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-26T08:55:06.973

另请注意，在同一个 Codeplex 页面上，该库的作者指出：

> 这个花了一段时间才弄清楚。
> 
> 当您在指向另一个单元格的单元格上设置换行文本时，Excel 实际上是在作弊。它计算所需的高度，然后设置行高属性。这是我在这里做不到的。
> 
> 你将不得不这样做。

对我来说，这意味着这个功能是不可能的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-09-12T13:00:56.167

`SetWrapText();`为我工作

# html - KineticJS setText 方法像定时器一样更新

> ID：15198446
> 
> 赞同：1
> 
> 时间：2013-03-04T09:38:55.640
> 
> 标签：html, text, canvas, timer, kineticjs

我需要像计时器一样更新 KineticJS 文本的文本属性。但我下面的代码没有按预期工作，我做错了什么：

```
var dateTimeText = new Kinetic.Text({
            x: 40,
            y: 400,
            text: "Sample",
            fontSize: 18,
            width: 700,
            fontFamily: 'Calibri',
            fill: 'black',
            width: 700,
            padding: 10,
            align: 'right',
            draggable: true
        });
setInterval(function () { onUpdateTime() }, 1000);
        function onUpdateTime() {
            var date = new Date();
            dateTimeText.setText(date.toLocaleTimeString());
        } 
```

在 onUpdateTime() 中，我应该对 dateTimeText 进行操作吗？在 dateTimeText() 上添加可拖动属性并单击它时，我至少可以看到更新的值:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T14:17:32.357

试试这个：

```
 function onUpdateTime() {
        var date = new Date();
        dateTimeText.setText(date.toLocaleTimeString());
        // layer.draw(); // either this, or whatever the layer is called
        // dateTimeText.getParent().draw(); // or this, auto get parent layer
        dateTimeText.getLayer().draw(); // better solution suggested by Eric Rowell
    } 
```

# c# - 使用 Mono.cecil 修改程序集后出现“System.IO.FileNotFoundException”错误

> ID：15198447
> 
> 赞同：2
> 
> 时间：2013-03-04T09:38:56.107
> 
> 标签：c#, mono, .net-assembly, mono.cecil

为了重现问题，我创建了这样一个简单的类，这个文件将被编译为“SourceDLL.dll”。

```
namespace SourceDll
{
    public class Class1
    {
        static public int Add(int b, int c)
        {
            return b + c;
        }
    }
} 
```

然后我用 Mono.Cecil 修改它，我只是打开并保存回来。

```
namespace InstrumentSystemDll
{
    class Program
    {
        static void Main(string[] args)
        {
            var fileName = args[0];
            var assembly = AssemblyDefinition.ReadAssembly(string.Format(@"..\..\..\Dependences\{0}.dll", fileName));
            Console.WriteLine(string.Format(@"..\..\..\Dependences\{0}.Patched.dll", fileName));
            assembly.Write(string.Format(@"..\..\..\Dependences\{0}.Patched.dll", fileName));
        }
    }
} 
```

我得到了一个修改过的“SourceDll.Patched.dll”文件，然后我尝试使用这个文件。创建了一个控制台应用程序并引用“SourceDll.Patched.dll”。

```
namespace TestInstrumentDll
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine(Class1.Add(1, 1));
        }
    } 
```

}

不幸的是，我收到了这样的错误：

> 未处理的异常：System.IO.FileNotFoundException：无法加载文件或汇编程序“SourceDll，版本=1.0.0.0，文化=中性，PublicKeyToken=null”或其依赖项之一。该系统找不到指定的文件。在 TestInstrumentDll.Program.Main(String[] args)

如果我切换到原始 SourceDll.dll，它可以正常工作并按预期打印数字“2”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T14:46:15.503

这与 Mono.Cecil 库无关。这与 CLR 如何搜索程序集有关。程序集名称被写入程序集的元数据中，CLR 将查看元数据以找到程序集。您只需将程序集从`SourceDLL.dll`to重命名`SourceDLL2.dll`，然后引用重命名的 assebmly 即可轻松测试它（不涉及 Mono.Cecil！）。你可以看到你会得到完全相同的异常。

要使其工作，您需要在编写之前更改程序集名称：

```
var assembly = AssemblyDefinition.ReadAssembly(assemblyPath));
assembly.Name.Name += ".Patched";
assembly.Write(assemblyPath.Replace(".dll", ".Patched.dll")); 
```

# javascript - trigger.io：自动完成文本框不起作用

> ID：15198449
> 
> 赞同：0
> 
> 时间：2013-03-04T09:39:04.683
> 
> 标签：javascript, android, jquery, html, trigger.io

我的 Iphone/Android 应用程序中需要一个自动完成文本框。

我已经尝试过 JQuery 和原生 HTML5 自动完成文本框，但它似乎对 JSON 请求和数据列表都不起作用。

我在 Android 设备三星 Galaxy s2 上进行测试

```
<label>
  Enter your favorite cartoon character:<br />
  <input type="text" name="favCharacter" list="characters" maxlength="50" style="width:95%;">
  <datalist id="characters">
   <option value="Homer Simpson">
   <option value="Bart">
   <option value="Fred Flinstone">
  </datalist>
 </label> 
```

以前有人遇到过这个问题吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T10:39:19.963

Android webkit 不支持 datalist 功能，见[http://caniuse.com/#feat=datalist](http://caniuse.com/#feat=datalist)

您应该可以使用 jQuery 插件来实现类似的效果，您是否尝试过[http://jqueryui.com/autocomplete/](http://jqueryui.com/autocomplete/)

# jquery - 将 jQuery 的内置函数作为回调传递

> ID：15198450
> 
> 赞同：1
> 
> 时间：2013-03-04T09:39:07.803
> 
> 标签：jquery, jquery-callback

在 jQuery 中，我经常需要调用内置函数（隐藏、显示、slideDown 等），通常我们通过匿名 wrap 函数调用它们：

```
$('button').click(function () {
  $('div').animate({
    opacity: 0.25
  }, 2000, function() { $(this).hide() })
}) 
```

有没有办法像这样通过引用传递这些函数？

```
$('button').click(function () {
  $('div').animate({
    opacity: 0.25
  }, 2000, $(this).hide)
}) 
```

我想这是不可能的，因为 jQuery 将此函数添加到对象的方式，但如果有人能详细说明问题发生的原因，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T09:46:32.527

它不像你尝试过的那样工作，因为调用`hide`不会有`$(this)`. 您可以通过将作为回调传递的函数绑定到需要调用它的对象来做到这一点：

```
$('button').click(function () {
    $('div').animate({
        opacity: 0.25
    }, 2000, $.fn.hide.bind($(this)));
}); 
```

这是一个[工作示例](http://jsfiddle.net/jamesallardice/WYkTs/)。

# ruby-on-rails - 如何以不同的语言提供网站名称！！！！在疯狂的轨道上

> ID：15198451
> 
> 赞同：1
> 
> 时间：2013-03-04T09:39:09.227
> 
> 标签：ruby-on-rails, spree

我想知道如何为不同的语言提供不同的站点名称。当我试图改变 spree.rb

```
 Spree.config do |config|
     Example:
     Uncomment to override the default site name.
    if I18n.locale == :ar
    config.site_name = "الأربعاء"
    else
    config.site_name = "Spree Demo Site"
    end

end 
```

它在控制台上给出错误 invalid multibyte char (US-ASCII) (SyntaxError) invalid multibyte char (US-ASCII) syntax error, unexpected $end, expe cting keyword_end config.site_name = "الأربعاء"

管理界面只有一个站点名称设施

如果我在 ar.yml 文件中替换站点名称，它不会随着语言的变化而改变

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T05:23:01.573

这是我所做的并取得了成功

```
<% if I18n.locale == :ar %>
<title> تجريبي |<%= title %></title>
 <html lang="ar" dir="rtl">
<% else %>
<title>demo |<%= title %> </title>

<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T10:17:39.207

我建议使用`i18n`gem 并在`app/config/locales/ar.yml`文件中定义你的翻译，类似于这个[RailsCast](http://railscasts.com/episodes/138-i18n-revised?view=asciicast)。

# php - 如何在 MongoDB + PHP 中按天分组数据？

> ID：15198455
> 
> 赞同：0
> 
> 时间：2013-03-04T09:39:16.863
> 
> 标签：php, mongodb

我有一些收藏：

```
$data_to_insert = array('date'=> $current_date, 'str_date' => $today_date_str, 'user_id' => intval($post->post_author), 'post_id' => $post->ID, 'user_ip' => current_user_ip()); 
```

我从 mongo 数据库中获取了一些数据（它正在工作）：

```
$start = new MongoDate(strtotime("-14 days"));
$end = new MongoDate(strtotime(date("Y-m-d H:i:s")));

$last_day_query = $hits_collection->find(array("date" => array('$gt' => $start, '$lte' => $end), "user_id" => $current_user->ID)); 
```

我如何需要修改我的查询以获取按天分组的数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T11:54:42.097

```
$ops = array(
                array(
                        '$match' => array(
                                            'user_id' => $current_user->ID,
                                            'date' => array(
                                                            '$gt' => $start, 
                                                            '$lte' => $end
                                                            ) 
                                        ),
                    ),
                array(
                        '$project' =>array(
                                            'date' => 1, 
                                            'user_id' => 1
                                            ), 
                        '$group' => array('_id' => '$str_date', 'views' => array('$sum' => 1)),
                ),

    );

    $result = $hits_collection->aggregate($ops); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T10:35:18.187

使用聚合和 $group 运算符，如下所示：

```
$result = $collection->aggregate([
    ['$match' => ['date' => ['$gt' => $start, '$lt' => $end]]],
    ['$group' => ['_id' => ['date' => '$date']]]
]); 
```

但它按纯日期分组。您可以使用 $dayOfMonth 运算符按天分组：

```
['$group' => ['_id' => ['date' => ['$dayOfMonth' => '$date']]]] 
```

# jquery - Cycle2 淡入淡出的字幕

> ID：15198456
> 
> 赞同：0
> 
> 时间：2013-03-04T09:39:20.790
> 
> 标签：jquery, jquery-cycle2

无论如何要对[Cycle2 中的标题](http://www.malsup.com/jquery/cycle2/demo/caption.php)进行一些过渡效果吗？

我想对标题做一些效果，例如`fadeIn`at each `cycle-update-view`。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:35:31.443

您可以通过挂钩到 jQuery 循环的 before 和 after 事件来做到这一点：

```
$('.cycle-container').cycle();

$('.cycle-container').on('cycle-before', function(event, options, outgoing, incoming) {
    $(this).find(options.caption).fadeOut();
});

$('.cycle-container').on('cycle-after', function(event, options, outgoing, incoming) {
    $(this).find(options.caption).fadeIn();
}); 
```

让它做一个幻灯片动画可能会稍微复杂一些，但你明白了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T04:10:04.270

只需连接[animate.css](http://daneden.me/animate/)然后将不同的过渡应用到不同的模板。如：

```
data-cycle-caption-template="<span class=caption1>{{caption1}}</span> <span class=caption2>{{caption2}}</span> <span class=caption3>{{caption3}}</span>" 
```

然后上

```
<li 
   data-cycle-caption1="This is Slide 1 Caption 1" 
   data-cycle-caption2="This is Slide 1 Caption 2" 
   data-cycle-caption2="This is Slide 1 Caption 2" 
> 
```

一些 CSS

```
.cycle-caption {
width:100%;
height:100%;
padding:20px;
position:absolute;
top:0;
left:0;
z-index:20;
opacity:1;
}

.caption1 {
font-weight:bold;
color:#FFF;
background:#000;
font-size:27px;
position:absolute;
top:20px;
left:20px;
z-index:30;
padding:5px;
-moz-animation: fadeInRight 1 ease-in 1.3s backwards; -webkit-animation: fadeInRight 1s ease-in 1s backwards; animation: fadeInRight 1s ease-in 1s backwards;
opacity: 1;
}
.caption2 {
font-weight:bold;
color:#FFF;
background:#000;
font-size:22px;
position:absolute;
top:70px;
left:20px;
z-index:40;
padding:5px;
-moz-animation: fadeInLeft 1s  ease-in 1.5s backwards; -webkit-animation: fadeInLeft 1s  ease-in 1.5s backwards; animation: fadeInLeft 1s  ease-in 1.5s backwards; 
    opacity:1;
}

.caption3 {
font-weight:bold;
color:#000;
background:#FFF;
border:1px solid rgba(0,0,0,0.5);
font-size:16px;
-moz-animation: fadeInLeft 1s ease-in 2s backwards; -webkit-animation: fadeInLeft 1sease-in 2s backwards; animation: fadeInLeft 1 sease-in 2s backwards;
position:absolute;
bottom:80px;
right:80px;
z-index:50;
padding:5px;
    opacity:1;
} 
```

看看我的[小提琴](http://jsfiddle.net/defonic/npqB5/)

# android - 处理在不同活动中收到的 gcm 推送通知？

> ID：15198458
> 
> 赞同：1
> 
> 时间：2013-03-04T09:39:30.460
> 
> 标签：android, android-activity, broadcastreceiver, google-cloud-messaging

我是android开发的新手。我能够将通知推送到设备。在我的应用程序中，有三种不同的活动。我按照 google gcm 客户端示例接收通知。现在我需要根据活动的活动来不同地处理收到的推送消息。我知道这可以通过为推送消息注册多个接收器来解决。我不知道该怎么做。你们能帮我解决这个问题吗？请/...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:12:35.680

在每个活动中注册不同的广播接收器。然后将 GCM 消息从这些活动广播`GCMIntentService`到`Intent`这些活动。

# asp.net - 在图像控件中显示图像（来自数据库）

> ID：15198459
> 
> 赞同：0
> 
> 时间：2013-03-04T09:39:42.970
> 
> 标签：asp.net

尝试在基于employeeid的图像控件中从数据库中检索和显示图像...我采用了一个httphandler，其中包含以下内容：

```
 Sub ProcessRequest(ByVal context As HttpContext) Implements IHttpHandler.ProcessRequest

    'context.Response.ContentType = "text/plain"
    'context.Response.Write("Hello World!")

    Dim employeeId As Integer
    If (Not (context.Request.QueryString("employeeId")) Is Nothing) Then
        employeeId = Convert.ToInt32(context.Request.QueryString("employeeId"))
    Else
        Throw New ArgumentException("No parameter specified")
    End If
    Dim imageData() As Byte = {}
    ' get the image data from the database using the employeeId Querystring
    context.Response.ContentType = "image/jpeg"
    ' You can retrieve this also from the database
    context.Response.BinaryWrite(imageData)

End Sub

Protected Sub DisplayButton_Click(ByVal sender As Object, ByVal e As EventArgs) Handles DisplayButton.Click
    bind()
    GridView1.Visible = "True"
    ProcessRequest(Context)
End Sub 
```

错误：`The 'MasterPageFile' property can only be set in or before the 'Page_PreInit' event.` 我哪里出错了？我需要进行哪些更改？

这是窗体上的图像控件：

```
<asp:Image ID="Image1" runat="server" imageUrl="HttpHandler.ashx?employeeId=5"/> 
```

@Stefano Altieri：

这是在 Employee.aspx 上

```
Protected Sub DisplayButton_Click(ByVal sender As Object, ByVal e As EventArgs) Handles DisplayButton.Click
    bind()
    GridView1.Visible = "True"
    Image1.ImageUrl = "~/HttpHandler.ashx?EmployeeID='" & EmailIDTextBox.Text & "'"
End Sub 
```

这是在 HttpHandler.ashx

```
Sub ProcessRequest(ByVal context As HttpContext) Implements IHttpHandler.ProcessRequest

    'context.Response.ContentType = "text/plain"
    'context.Response.Write("Hello World!")

    Dim employeeId As Integer
    If (Not (context.Request.QueryString("employeeId")) Is Nothing) Then
        employeeId = Convert.ToInt32(context.Request.QueryString("employeeId"))
    Else
        Throw New ArgumentException("No parameter specified")
    End If
    Dim imageData() As Byte = {}
    ' get the image data from the database using the employeeId Querystring
    context.Response.ContentType = "image/jpeg"
    ' You can retrieve this also from the database
    context.Response.BinaryWrite(imageData)

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:19:57.523

你的处理程序应该是这样的

```
Sub ProcessRequest(ByVal context As HttpContext) Implements IHttpHandler.ProcessRequest
Dim employeeId As Integer
If (Not (context.Request.QueryString("employeeId")) Is Nothing) Then
employeeId = Convert.ToInt32(context.Request.QueryString("employeeId"))
Dim con As SqlConnection("your connection string")    
Dim cmd As SqlCommand("select image_colum from <table_name> where employeeID = "+employeeID)
con.Open()
Dim dr As SqlDataReader = cmd.ExecuteReader()
dr.Read()
Dim picture As Byte() = dr[0]
context.Response.ContentType = "image/jpeg"
context.Response.BinaryWrite(picture)
End If
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T09:45:05.037

通用处理程序可以帮助您..

# jquery - Jquery 函数对象

> ID：15198467
> 
> 赞同：0
> 
> 时间：2013-03-04T09:40:09.833
> 
> 标签：jquery, jquery-mobile

```
<script type="text/javascript">  
    $JTj(document).ready(function() {   
        var map = {"rows": 4, "cols" : 4};
        alert(map.rows);
        formUpdate(map);    
    });

    function formUpdate(map) {
       if (map != undefined) {
           $JTj('#mapContainer').selectionmap(map);
       }
    }
   formUpdate(map); 
</script> 
```

// 简单库

```
<script type="text/javascript">
(function ($JTj) {
    $JTj.fn.selectionmap = function (options) {
        alert(options.rows);
    };
})(jQuery);
</script> 
```

我收到错误，

> 参考错误：`$JTj`未定义`$JTj(document).ready(function() {`

请让我知道应该进行哪些更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T09:45:16.047

在您当前的代码中，`$JTj`只能在您的自调用匿名函数范围内访问。

您必须将您的第一个代码片段包装在另一个（或可能相同的）匿名函数中：

```
<script type="text/javascript">  
    (function($JTj) {
        $JTj(document).ready(function() {   
            var map = {"rows": 4, "cols" : 4};
            alert(map.rows);
            formUpdate(map);    
        });

        function formUpdate(map) {
           if (map != undefined) {
               $JTj('#mapContainer').selectionmap(map);
           }
        }
        formUpdate(map); 
    })(jQuery);
</script> 
```

`formUpdate()`顺便说一句，请注意：您正在向处理程序外部发出调用`ready`。执行该调用时，DOM 可能尚未准备好。

# android - Android 互联网权限

> ID：15198468
> 
> 赞同：2
> 
> 时间：2013-03-04T09:40:11.630
> 
> 标签：android, permissions, whitelist

当我们在 Android 中使用互联网权限时，它允许我们连接到网络并提供对我们网站的必要访问权限。但是，此 Internet 权限允许访问整个 Internet。这会使我们的应用程序不安全吗？

在这个借口下，我正在寻找某种适用于 Android 的*白名单*互联网许可。例如，我想做一个许可：

```
android.permission.Internet.google.com 
```

我一直无法找到实现这一点的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:47:29.733

您的应用程序的用户无法将您的应用程序中的 URL 列入“白名单”。如果用户授予您的应用程序网络访问权限，那么您的应用程序可以访问互联网（全部）。

这意味着用户信任您（开发人员）不会利用这一点，并且仅使用应用程序运行所需的安全且必要的 URL。

您有责任确保安全。应用程序无法执行开发人员未对其进行编程的任何操作。因此，作为开发人员，您应该尽心尽责，将您的应用程序编程为仅访问安全的 URL。这将确保用户对您的信任是值得的，并为您带来满意的长期客户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-26T21:35:54.310

如果您尝试将您的 android 应用程序连接到互联网，您可以尝试将此许可添加到您的 AndroidManifest.xml

使用权限 android:name="android.permission.INTERNET"

# linux - linux：正确的ssh登录后立即注销

> ID：15198476
> 
> 赞同：1
> 
> 时间：2013-03-04T09:40:35.337
> 
> 标签：linux

我的 Ubuntu 12.04 服务器有一个奇怪的问题。

通过 ssh 正确登录后，连接立即关闭。

这是我登录后在控制台上得到的输出`ssh -vvv`：

```
Welcome to Ubuntu 12.04.1 LTS (GNU/Linux 3.2.0-32-generic x86_64)

* Documentation:  https://help.ubuntu.com/
System information as of Mon Mar  4 10:29:54 CET 2013

System load:  0.18              Processes:           120
Usage of /:   2.9% of 77.23GB   Users logged in:     0
Memory usage: 54%               IP address for eth0: x.x.x.x
Swap usage:   9%

Graph this data and manage this system at https://landscape.canonical.com/

174 packages can be updated.
61 updates are security updates.

Last login: Mon Mar  4 10:29:28 2013 from y.y.y.y
debug3: channel 0: will not send data after close
debug2: channel 0: obuf empty
debug2: channel 0: close_write
debug2: channel 0: output drain -> closed
debug2: channel 0: almost dead
debug2: channel 0: gc: notify user
debug2: channel 0: gc: user detached
debug2: channel 0: send close
debug2: channel 0: is dead
debug2: channel 0: garbage collecting
debug1: channel 0: free: client-session, nchannels 1
debug3: channel 0: status: The following connections are open:
#0 client-session (t4 r0 i3/0 o3/0 fd -1/-1 cfd -1)

debug3: channel 0: close_fds r -1 w -1 e 6 c -1
Connection to x.x.x.x closed.
debug1: Transferred: stdin 0, stdout 0, stderr 39 bytes in 0.7 seconds
debug1: Bytes per second: stdin 0.0, stdout 0.0, stderr 58.4
debug1: Exit status 1` 
```

目前不允许 root 直接通过 ssh 连接，所以我只有一个用户可以登录。此外，没有 X-Server，只有控制台。

有任何想法吗？

提前致谢！

# c++ - 枚举 unique_ptr 向量的编译错误

> ID：15198483
> 
> 赞同：3
> 
> 时间：2013-03-04T09:41:03.723
> 
> 标签：c++, vector, c++11, smart-pointers

```
void Test()
{
    vector< unique_ptr<char[]>> v;

    for(size_t i = 0; i < 5; ++i)
    {
        char* p = new char[10];
        sprintf_s(p, 10, "string %d", i);
        v.push_back( unique_ptr<char[]>(p) );
    }

    for(auto s : v)                // error is here
    {
        cout << s << endl;
    }
} 
```

`error C2248: 'std::unique_ptr<_Ty>::unique_ptr' : cannot access private member declared in class 'std::unique_ptr<_Ty>'`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-04T09:43:04.350

`unique_ptr`是不可复制的。您应该`const`在基于范围的 for 循环中使用对的引用。`operator <<`此外， for没有重载`unique_ptr`，并且`unique_ptr`不能隐式转换为底层指针类型：

```
for(auto const& s : v)
//       ^^^^^^
{
    cout << s.get() << endl;
//          ^^^^^^^            
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T09:45:36.723

[正如Andy Prowl](https://stackoverflow.com/users/1932150/andy-prowl) 所指出的，[`unique_ptr`](http://en.cppreference.com/w/cpp/memory/unique_ptr)不可复制（来自链接的参考页面）：

> unique_ptr 既不可复制也不可复制分配

该代码可以完全避免使用，`unique_ptr`而只使用[`std::string`](http://en.cppreference.com/w/cpp/string/basic_string)with[`std::to_string()`](http://en.cppreference.com/w/cpp/string/basic_string/to_string)代替：

```
void Test()
{
    std::vector< std::string > v;

    for(size_t i = 0; i < 5; ++i)
    {
        v.push_back( std::string("string ") + std::to_string(i) );
    }

    for(auto& s : v)
    {
        std::cout << s << std::endl;
    }
} 
```

# .htaccess - 将子文件夹重定向到root htaccess

> ID：15198487
> 
> 赞同：0
> 
> 时间：2013-03-04T09:41:18.293
> 
> 标签：.htaccess, redirect, root, http-status-code-301, subdirectory

我在 domainame.tld/subfolder 中安装了一个 Joomla 网站，我会将其物理移动到域名的根目录，并且我想创建一个重定向，将所有流量从子文件夹重定向到根目录。例子：

domain.tld/eshop/category/product 重定向到 domain.td/category/product

谢谢 ！

此致，

特奥多尔·奥夫恰罗夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:04:47.607

RewriteBase / RewriteRule 上的 RewriteEngine ^directoryname(.*) [http://domain.tld/](http://domain.tld/) $1 [R=301,L]

这是使用正确的代码！

# php - 使用 ajax 验证时禁用提交按钮

> ID：15198488
> 
> 赞同：1
> 
> 时间：2013-03-04T09:41:18.857
> 
> 标签：php, javascript, html, ajax

这是我为 ajax 验证编写的代码。我还没有为表单创建提交按钮。问题是，我必须禁用提交按钮，直到所有字段都填充了适当的信息并以 ajax 方式验证。这只是一个包含两个字段的示例。我有 20 多个这样的字段。请帮我这样做。谢谢你。

形式：

```
<p>
 <label for="cname">Name</label>
 <em>*</em><input id="cname" name="name" size="50" minlength="2"onkeyup="checkname()"/>
 <span id="target1"></span></p>
<p>
 <label for="fat">Father's Name</label>
 <em>*</em><input id="cfat" name="father" size="50" onkeyup="checkfather()" />
 <span id="target2"></span></p> 
```

Javascript（阿贾克斯）：

```
var ajax = create_ajax_object();
function checkname(){
    if(ajax){
        ajax.onreadystatechange = function(){
    if(ajax.readyState == 4 && ajax.status == 200){
        document.getElementById("target1").innerHTML = ajax.responseText;
    }
        }
        ajax.open("POST", "ajval.php", true);
    var values = "name=" + encodeURIComponent(document.commentform.name.value);
    values = values + "&action=" + encodeURIComponent("check1");
    ajax.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
    ajax.send(values);
    }
    else{
        alert("Your browser doesnt support AJAX!");            
    }
}
function checkfather(){
    if(ajax){
        ajax.onreadystatechange = function(){
    if(ajax.readyState == 4 && ajax.status == 200){
        document.getElementById("target2").innerHTML = ajax.responseText;
    }
        }
        ajax.open("POST", "ajval.php", true);
    var values = "father=" + encodeURIComponent(document.commentform.father.value);
    values = values + "&action=" + encodeURIComponent("check2");
    ajax.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
    ajax.send(values);
    }
    else{
        alert("Your browser doesnt support AJAX!");            
    }
} 
```

PHP：

```
<?php
$action = $_POST["action"];
switch($action)
{
case "check1":
    $name=$_POST["name"];
    if($name!="")
    echo '<img src="green-tick.png" height="20" width="20"/>';
    else
    echo'<span style="color:red;">Cannot be left blank</span>';
    break;
case "check2":
    $father=$_POST["father"];
    if($father!="")
    echo'<img src="green-tick.png" height="20" width="20"/>';
    else
    echo '<span style="color:red;">Cannot be left blank</span>';
    break;
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:31:16.410

您需要跟踪您的有效字段。对于每个验证，运行一个`formIsValid`方法来检查整个表单是否有效并且可以启用提交按钮。

我建议将其与实际的 ajax 请求分开运行，因为在使用复制粘贴或自动填充等内容时，更改事件的运行并不十分可靠。

由于 ajax 验证仍然需要客户端组件，因此可能会被欺骗并发送无效表单。因此，无论如何您都不能在提交后验证完整的表单。

```
// you could have an object with validation expressions for each field
var fields = {
    name: /.+/,
    father: /.+/
}

// then once on load and after each successful ajax check run this method
function formIsValid () {
    var valid = true;

    for (var field in form.elements) {
        valid = fields[field.name].test(field.vlaue);
        if (!valid) {
            break;
        }
    }

    if all fields are valid the submit button will be enabled
    document.getElementById("submit").disabled = !valid;
} 
```

按钮的 html。

```
<!-- the disabled value is just for backwards compatibility -->
<input type="submit" id="submit" disabled="disabled" value="Send" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T09:42:43.550

您的 Javascript 验证需要在提交时返回 false。在 HTML 中，您使用如下 ID 声明表单：

```
<form method="POST" action="confirm.php" id="theform"> 
```

您可以像往常一样对每个字段进行 ajax 验证 onkeyup()，并根据它是否有效将布尔值设置为 true/false。

在 Javascript 中，我使用 jQuery，您执行以下操作：

```
$('#theform').submit(function() {
  valid = true;
  if() // check validation for 1st field
    valid == false;
  if() // check validation for 2st field
    valid == false;

  return valid;
} 
```

如果此函数返回 false，则表单将不会提交。

# android - 从 DatabaseManager 返回 Cursor 对象？

> ID：15198489
> 
> 赞同：2
> 
> 时间：2013-03-04T09:41:19.703
> 
> 标签：android, android-sqlite

我需要一些建议/帮助。我有一个 MainActivity 和一个 DatabaseManager 类。我不确定如何处理从 DatabaseManager 到 MainActivity 的数据？

我需要在 DatabaseManager 中读取一些数据，然后将其返回给 MainActivty，然后将数据传递给另一个具有 ListView 的活动。

首先，我应该从 DatabaseManager 返回 Cursor 对象，然后使用适配器将数据获取到 ListView 还是如何将其获取到 MainActivity？我可以迭代表中的每一行并将每一列作为字符串返回吗？或者我应该将它添加到 ArrayList 然后返回它？一些帮助！

代码中的示例是preciated！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-03T07:54:34.750

只需在 DatabaseHandler 中创建一个名为“getMyGenericData(parameterIWishToUse)”的方法（我不知道您的数据库存储什么数据）。

然后在您的 DatabaseHandler 中执行此操作（实现您自己的对象而不是我的通用对象）：

```
public ArrayList<MyGenericItem> getAllVisistedEntries() {

    SQLiteDatabase db = this.getWritableDatabase();
    ArrayList<MyGenericItem> myGenericItems = new ArrayList<MyGenericItem>();

    String query = "SELECT * FROM MY_GENERIC_TABLE";

    Cursor cursor = db.rawQuery(query, null);
    if (cursor.moveToFirst()) {
      do {

        MyGenericItem mgi = new MyGenericItem();
        mgi.setValueOne(cursor.getString(0));
        mgi.setValueTwo(cursor.getString(1));
        // ETC....
       myGenericItems.add(myGenericItem);
      } while (cursor.moveToNext());
     }

    return myGenericItems;
} 
```

# objective-c - 我如何在 iCloud 中保存 NSData

> ID：15198492
> 
> 赞同：3
> 
> 时间：2013-03-04T09:41:45.007
> 
> 标签：objective-c, cocoa, icloud

我的应用程序中有 NSData，我想将该数据保存在 iCloud 中。我不想将我的 NSUserDefaults 与 iCloud 同步，所以它没有“[我可以使用 iCloud 同步 NSUserDefaults plist 文件](https://stackoverflow.com/questions/7810157/can-i-use-icloud-to-sync-the-nsuserdefaults-plist-file)”的克隆。那可能吗？我怎样才能做到这一点？如何检索已保存的数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T10:01:13.433

是的，有可能。我之前已经这样做了，我的答案是[与 iCloud 同步 zip](https://stackoverflow.com/questions/8047217/how-can-i-use-icloud-to-synchronize-a-zip-file-between-my-apps/10069242#10069242)，在其中我正在创建 zip 并将其转换为`NSData`iCloud 并与 iCloud 同步，后来我收到 NSData 并再次将其转换回 zip 并解压缩内容。在这里，您的主要需求是同步 NSData，因此您需要为`NSData`.

1）创建子类`UIDocument`

```
#import <UIKit/UIKit.h>

@interface MyDocument : UIDocument
    @property (strong) NSData *dataContent;
@end 
```

2) 我的文档.m

```
#import "MyDocument.h"

@implementation MyDocument
@synthesize dataContent;

// Called whenever the application reads data from the file system
- (BOOL)loadFromContents:(id)contents ofType:(NSString *)typeName error:(NSError **)outError
{
    self.dataContent = [[NSData alloc] initWithBytes:[contents bytes] length:[contents length]];
    [[NSNotificationCenter defaultCenter] postNotificationName:@"noteModified" object:self];
    return YES;     
}

// Called whenever the application (auto)saves the content of a note
- (id)contentsForType:(NSString *)typeName error:(NSError **)outError 
{
    return self.dataContent;
}

@end 
```

3）与iCloud同步（您可以根据需要进行操作）

```
-(IBAction) iCloudSyncing:(id)sender
{

    NSURL* ubiq = [[NSFileManager defaultManager]URLForUbiquityContainerIdentifier:nil];
    NSURL *ubiquitousPackage = [[ubiq URLByAppendingPathComponent:@"Documents"]  URLByAppendingPathComponent:@"iCloudPictures.zip"];

    MyDocument *mydoc = [[MyDocument alloc] initWithFileURL:ubiquitousPackage];
    NSData *data = << YOUR NSDATA >>;
    mydoc.dataContent = data;

    [mydoc saveToURL:[mydoc fileURL] forSaveOperation:UIDocumentSaveForCreating completionHandler:^(BOOL success)
     {
         if (success)
         {
             NSLog(@"Synced with icloud");
         }
         else
             NSLog(@"Syncing FAILED with icloud");

     }];
} 
```

希望这可以帮助..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-22T07:24:41.043

```
// 1\. Any file can be uploaded to iCloud container of any size (yes you should be having that much of space in iCloud) lets take an example SampleData.zip

    // 2\. This method will upload or sync SampleData.zip file in iCloud container, iCloud actually checks the metadata of your file before it uploads it into your iCloud container (so for first time it will upload the file and from next time it will only upload the changes)

    -(void) iCloudSyncing:(id)sender
    {
        //Doc dir
        NSString *documentsDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
        NSString *filePath = [documentsDirectory stringByAppendingPathComponent:@"SampleData.zip"];
        NSURL *u = [[NSURL alloc] initFileURLWithPath:filePath];
        NSData *data = [[NSData alloc] initWithContentsOfURL:u];

        //Get iCloud container URL
        NSURL *ubiq = [[NSFileManager defaultManager]URLForUbiquityContainerIdentifier:nil];// in place of nil you can add your container name
        //Create Document dir in iCloud container and upload/sync SampleData.zip
        NSURL *ubiquitousPackage = [[ubiq URLByAppendingPathComponent:@"Documents"]URLByAppendingPathComponent:@"SampleData.zip"];
        Mydoc = [[MyDocument alloc] initWithFileURL:ubiquitousPackage];
        Mydoc.zipDataContent = data;

        [Mydoc saveToURL:[Mydoc fileURL] forSaveOperation:UIDocumentSaveForCreating completionHandler:^(BOOL success)
         {
             if (success)
             {
                 NSLog(@"SampleData.zip: Synced with icloud");
             }
             else
                 NSLog(@"SampleData.zip: Syncing FAILED with icloud");

         }];
    }

      // 3 Download data from the iCloud Container

    - (IBAction)GetData:(id)sender {

        //--------------------------Get data back from iCloud -----------------------------//
        id token = [[NSFileManager defaultManager] ubiquityIdentityToken];
        if (token == nil)
        {
            NSLog(@"ICloud Is not LogIn");
        }
        else
        {
            NSLog(@"ICloud Is LogIn");

            NSError *error = nil;
            NSURL *ubiq = [[NSFileManager defaultManager]URLForUbiquityContainerIdentifier:nil];// in place of nil you can add your container name
            NSURL *ubiquitousPackage = [[ubiq URLByAppendingPathComponent:@"Documents"]URLByAppendingPathComponent:@"SampleData.zip"];
            BOOL isFileDounloaded = [[NSFileManager defaultManager]startDownloadingUbiquitousItemAtURL:ubiquitousPackage error:&error];
            if (isFileDounloaded) {
                NSLog(@"%d",isFileDounloaded);
                NSString *documentsDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
                //changing the file name as SampleData.zip is already present in doc directory which we have used for upload
                NSString* fileName = [NSString stringWithFormat:@"RecSampleData.zip"];
                NSString* fileAtPath = [documentsDirectory stringByAppendingPathComponent:fileName];
                NSData *dataFile = [NSData dataWithContentsOfURL:ubiquitousPackage];
                BOOL fileStatus = [dataFile writeToFile:fileAtPath atomically:NO];
                if (fileStatus) {
                    NSLog(@"success");
                }
            }
            else{
                NSLog(@"%d",isFileDounloaded);
            }
        }
    }

    //4 voila its done :) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T10:05:49.260

1)[将数据转换为 zip 文件，然后保存到 icloud](https://stackoverflow.com/questions/8047217/how-can-i-use-icloud-to-synchronize-a-zip-file-between-my-apps/10069242#10069242)

2)[将 xml 文件保存到 icloud](https://stackoverflow.com/questions/9953345/syncing-sqlite-database-with-icloud/10298078#10298078)

在这里，您有将数据保存在 icloud 中的解决方案，否则我们可以将该数据写入文件，我们可以通过提供文件路径将该文件直接保存到 icloud

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-08T07:11:02.383

> **对于自定义对象**注意：每个 iCloud 用户仅限 1 MB！

```
+(void)write{

//Decode using
NSData *data = [NSKeyedArchiver archivedDataWithRootObject:[HistoryFile files]];

//Save Data To NSUserDefault
NSUbiquitousKeyValueStore *iCloud =  [NSUbiquitousKeyValueStore defaultStore];

//let ios know we want to save the data    
[iCloud setObject:data forKey:@"app_data"];

//iOS will save the data when it is ready.
[iCloud synchronize];

}

+(NSMutableArray*)read{
    //Read Settings Value From NSUserDefault
    //get the NSUserDefaults object

    NSUbiquitousKeyValueStore *iCloud =  [NSUbiquitousKeyValueStore defaultStore];
    //read value back from the settings
    NSData *data = [iCloud objectForKey:@"app_data"];
    NSMutableArray *data_array = (NSMutableArray*)[NSKeyedUnarchiver unarchiveObjectWithData:data];    
    NSLog(@"data_array %@",data_array);
    return data_array;
} 
```

# regex - 正则表达式替换多个文件

> ID：15198494
> 
> 赞同：2
> 
> 时间：2013-03-04T09:41:54.113
> 
> 标签：regex, linux, sed, awk

我需要在根目录下的多个目录中的多个文件中用另一个正则表达式替换一个正则表达式的所有实例。

示例：文件结构：

```
.
|---src
|   |---Module
|   |   |---someclass.cpp
|   |---main.cpp
|
|---include
    |---Module
        |---someclass.hpp 
```

基本上就是这样，但有更多的文件和文件夹。

我需要搜索正则表达式`\(std::vector<.*>`并将它的所有实例替换为`\(std::vector<.*> const&` 棘手的部分似乎是确保两者之间的内容`<`保持`>`不变。

例如，它将匹配`(std::vector<int>`并替换为`(std::vector<int> const&`. 一个更复杂的例子是：
匹配：`(std::vector<std::map<std::string, int>>`
替换为：`(std::vector<std::map<std::string, int>> const&`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T11:43:04.873

如果您的示例中的最后一个“>”是每一行的最后一个“>”，那么这应该有效：

```
find root -name '*.cpp' -print0 |
xargs -0 sed -i 's/\((std::vector<.*>\)\([^>]*$\)/\1 const\&\2/' 
```

在单个文件上尝试 sed 并且先不使用 -i，例如：

```
$ cat file
(std::vector<int>
(std::vector<int> foo
(std::vector<std::map<std::string, int>>
(std::vector<std::map<std::string, int>> bar

$ sed 's/\((std::vector<.*>\)\([^>]*$\)/\1 const\&\2/' file
(std::vector<int> const&
(std::vector<int> const& foo
(std::vector<std::map<std::string, int>> const&
(std::vector<std::map<std::string, int>> const& bar 
```

如果在您的示例中的最后一个之后可以有“>”，那么解决方案很重要，请发布一些具有代表性的示例输入和预期输出。

哦，到底是什么，这是不平凡的脚本：

```
$ cat file
(std::vector<int>
(std::vector<int> foo
(std::vector<int> with extra > in text
(std::vector<std::map<std::string, int>>
(std::vector<std::map<std::string, int>> bar
(std::vector<std::map<std::string, int>> and here is > again

$ awk -v FS= -v str="(std::vector<" '
BEGIN{ lgth=length(str) }
start=index($0,str) {
   cnt = 1
   for(i=(start+lgth);(i<=NF) && (cnt!=0);i++) {
      if ($i == "<") cnt++
      if ($i == ">") cnt--
   }
   $0 = substr($0,1,i-1) " const&" substr($0,i)
}1' file
(std::vector<int> const&
(std::vector<int> const& foo
(std::vector<int> const& with extra > in text
(std::vector<std::map<std::string, int>> const&
(std::vector<std::map<std::string, int>> const& bar
(std::vector<std::map<std::string, int>> const& and here is > again 
```

在 while 循环中执行此操作：

```
find root -name '*.cpp' -print |
while IFS= read -r file; do
    awk -v FS= -v str="(std::vector<" '
    BEGIN{ lgth=length(str) }
    start=index($0,str) {
       cnt = 1
       for(i=(start+lgth);(i<=NF) && (cnt!=0);i++) {
          if ($i == "<") cnt++
          if ($i == ">") cnt--
       }
       $0 = substr($0,1,i-1) " const&" substr($0,i)
    }1' "$file" > tmp &&
    mv tmp "$file"
done 
```

如果您的文件名包含换行符，那将不起作用，但是如果您仍然拥有它们，则应该修复它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T10:45:37.613

您将需要使用不同的正则表达式分别处理简单和复杂的情况。正则表达式不能计算嵌套项并说明这一点。

替换没有嵌套：`\(std\:\:vector\<([^\<\>]*)\>`

然后用单嵌套替换：`\(std\:\:vector\<([^\<\>]*\<[^\<\>]*\>[^\<\>]*)\>`

# perl - 不使用 LWP 模块下载媒体内容

> ID：15198495
> 
> 赞同：-4
> 
> 时间：2013-03-04T09:41:57.520
> 
> 标签：perl, download, lwp

v 可以在不使用 LWP 模块的情况下下载媒体内容并将其保存在目标文件夹中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T13:08:54.913

在 Perl 中，有*很多*方法可以做到这一点。Neil Bowers 对[用于发出 HTTP 请求的 CPAN 模块进行](https://neilb.org/reviews/http-requesters.html)了出色的调查；将其用作您需要的参考。简而言之：

[![HTTP流程图](../Images/1289ff12d9f850fccc10023af66fa762.png)](https://i.stack.imgur.com/BqYmB.png)
[（来源：[neilb.org](http://neilb.org/reviews/decision-tree.png)）]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T10:25:21.123

您可以使用 linux 中的命令行工具来执行此操作。

检查 curl 和 wget 文档。

在 Windows 上，您可以安装 cygwin 并使用 linux 工具。

问候，

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T11:04:27.040

在不知道为什么要避免`LWP`的情况下，很难提供帮助。

编写 HTTP 客户端远非简单，某种模块或外部实用程序非常重要。

我建议[`HTTP::Client`](https://metacpan.org/module/HTTP%3a%3aClient)，[`HTTP::Lite`](https://metacpan.org/module/HTTP%3a%3aLite)或[`HTTP::Tiny`](https://metacpan.org/module/HTTP%3a%3aTiny)，它们都是独立的 HTTP 客户端模块，不依赖于`LWP`.

# visual-studio-2008 - WinCE 7.0 平台构建器

> ID：15198497
> 
> 赞同：2
> 
> 时间：2013-03-04T09:42:09.950
> 
> 标签：visual-studio-2008, windows-ce, platform-builder

我正在使用 Windows XP 32 位操作系统。我`Visual Studio 2008`最初安装的。然后，我安装了`WinCE 7.0 Evaluation version`. 现在，当我在 Visual Studio 中检查 Platform Builder 时，没有这样的工具。我还没有安装`VS SP1`。有什么关系吗？但是，它不是集成了 WinCE 7.0 吗？[我在此链接](http://social.msdn.microsoft.com/Forums/en-US/winembplatdev/thread/a0149634-4aec-41ab-905c-ebaf68db5f86/)中签出并尝试`PB.msi`在 WinCE 目录中查找文件。但是，也找不到。菜单中没有 Platform Builder 选项`'Tools'`。`Add-In`并且，也未在s 中列出。

请指导我现在该怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T09:01:46.840

我做对了，并想分享它作为答案。问题是我没有安装 Visual Studio SP1。虽然 Platform Builder 随 WinCE 安装一起提供，但它只是 Visual Studio 2008 SP1 的插件。我之前不了解这个连接，所以犯了这个错误，没有安装Service Pack 1。安装顺序是，

1.  Visual Studio 2008 专业版
2.  [视觉工作室 SP1](http://www.microsoft.com/en-in/download/details.aspx?id=10986)
3.  [WinCE 7.0 评估版](http://www.microsoft.com/en-us/download/details.aspx?id=19004)

谢谢！

# javascript - 按回车键显示文本

> ID：15198500
> 
> 赞同：-1
> 
> 时间：2013-03-04T09:42:15.960
> 
> 标签：javascript, jquery, html

如何通过按回车在网页上显示文本可能在 javascript/jquery 中？

我希望如果有人打开页面并按 Enter 键，那么文本开始逐行出现，就像我们通过终端在 linux 上安装某些东西时那样，文本逐行显示，告诉我发生了什么我想要那种类型的动画？在具有静态/纯文本行的网页上

谢谢

这不是进度条我想要像终端一样的简单动画，其中每一行平面文本一个接一个地出现

例如，我打开了网页，然后按 Enter 键，文本开始显示为终端。逐行

示例代码

```
<html>
<head>

<head>
  <body>
    <h1>PLease press enter</h1>
    <span id="line-1" class="hidden">some text here</span>
    <span id="line-2" class="hidden">some text here</span>
    <span id="line-3" class="hidden">some text here</span>
    <span id="line-4" class="hidden">some text here</span>
    <span id="line-5" class="hidden">some text here</span>
  </body>
</html> 
```

**重要说明** 我不知道 jQuery 和 javascript

**编辑** 我错在哪里？

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <meta content="text/html; charset=ISO-8859-1" http-equiv="content-type">
    <title>Testn</title>
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>

  </head>
  <body>

    <script>
      $(document).bind("keypress", function (e) {
        var t = e.keyCode ? e.keyCode : e.which;
        if (t == 13) {
          if ($("#span1").is(":visible") == false) $("#span1").show();
          else if ($("#span2").is(":visible") == false) $("#span2").show();)
          else if ($("#span3").is(":visible") == false) $("#span3").show();)
          else if ($("#span4").is(":visible") == false) $("#span4").show();)
          else $("#span5").show();)
       }
    </script>
    <span id="span1" >some text here</span>
    <span id="span2">some text here</span>
    <span id="span3" >some text here</span>
    <span id="span4" >some text here</span>
    <span id="span5">some text here</span>

  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:50:17.373

你可以使用jquery `on`..

> 从 jQuery 1.7 开始，.on() 方法是将事件处理程序附加到文档的首选方法。

**更新**

```
$(function(){

  var $span=$('span');
  $span.hide();  // hide all soans in the document 
  var count= 1;
  $(document).on("keyup", function (e) {
   if (e.keyCode == 13) {
    if(count <= $span.length){
      $('#'+count).show();
      count++;
    }
  }
  });
}); 
```

[在这里摆弄](http://jsfiddle.net/bipen/GnyUA/)

# ios - Facebook iOS SDK 3.2，当用户从 facebook.com 删除应用程序时出现问题

> ID：15198501
> 
> 赞同：3
> 
> 时间：2013-03-04T09:42:19.143
> 
> 标签：ios, facebook

我正在使用 Facebook iOS SDK（3.2 版），一切正常，直到用户进入 Facebook 并从授权应用程序列表中删除该应用程序。那时，我仍然使用缓存的会话登录，即使它实际上不再有效。强制清除访问令牌并再次登录也会导致使用相同的旧访问令牌。

现在`application:didFinishLaunchingWithOptions:`我有这段代码来测试会话：

```
// Relogin with cached session
if (FBSession.activeSession.state == FBSessionStateCreatedTokenLoaded) {
    NSLog(@"We're logged in to Facebook!");

    [FBSession openActiveSessionWithReadPermissions:nil allowLoginUI:NO completionHandler:^(FBSession *session, FBSessionState status, NSError *error) {
        NSLog(@"accessToken: %@", session.accessTokenData.accessToken);
        NSLog(@"status: %i", status);
        NSLog(@"error: %@", error);

        switch (status) {
            case FBSessionStateOpen:
                NSLog(@"FBSessionStateOpen");
                NSLog(@"permissions: %@", session.permissions);
                break;

            case FBSessionStateClosed:
            case FBSessionStateClosedLoginFailed:
                [session closeAndClearTokenInformation];
                [Utilities presentMessage:@"Facebook login failed" withTitle:@"Error" level:MessageLevelError];
                break;

            default:
                break;
        }
    }];
} 
```

每次我启动应用程序时，它都会说我仍然使用 user_birthday 和电子邮件权限登录。但是，当我尝试使用我获得的 accessToken 打开[https://graph.facebook.com/me?access_token=xxx](https://graph.facebook.com/me?access_token=xxx)时，它返回“验证访问令牌时出错：用户 123 尚未授权应用程序 123。”

清除令牌`[FBSession.activeSession closeAndClearTokenInformation];`并强制新登录无济于事，我总是得到完全相同的旧 accessToken。

有一个类似的问题（[Facebook SDK 3.1 iOS: Handle login if user remove app from Facebook Settings](http://facebook.stackoverflow.com/questions/12850032/facebook-sdk-3-1-ios-handle-login-if-user-remove-app-from-facebook-settings)），但它指出“然后，用户关闭 iOS 应用程序并重新启动它......通过这次重新启动，iOS 应用程序”是已修复”并检测到用户不再登录。” 我完全没有这种行为。

这就是我首先打开会话的方式：

```
- (void)openFBSession {
    NSArray *perm = @[ @"user_birthday", @"email" ];

    [FBSession openActiveSessionWithReadPermissions:perm allowLoginUI:YES completionHandler:^(FBSession *session, FBSessionState status, NSError *error) {
        DLog(@"accessToken: %@", session.accessTokenData.accessToken);
        DLog(@"status: %i", status);
        DLog(@"error: %@", error);

        switch (status) {
            case FBSessionStateOpen:
                DLog(@"FBSessionStateOpen");
                // this is where I need to use session.accessTokenData.accessToken, which is stale
                break;

            case FBSessionStateClosed:
            case FBSessionStateClosedLoginFailed:
                [FBSession.activeSession closeAndClearTokenInformation];
                [Utilities presentMessage:@"Facebook login failed" withTitle:@"Error" level:MessageLevelError];
                break;

            default:
                break;
        }
    }];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T22:26:56.490

如果 Facebook SDK 在自己执行 Facebook graph api 请求时没有发现令牌无效，则需要强制 iOS 检查其令牌。

当您调用自己的服务器 api（并给它令牌）并代表那里的用户进行调用时，这很有用。如果您发现令牌在那里无效，那么告诉 iOS 6 令牌无效的唯一方法是执行以下操作：

```
// Only do this if there is native Facebook Account support (iOS 6+)
BOOL isFacebookAccountsAvailable = (&ACAccountTypeIdentifierFacebook != NULL);
if (isFacebookAccountsAvailable) {
    ACAccountStore *accountStore = [ACAccountStore new];
    ACAccountType *accountTypeFB = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];
    NSArray *fbAccounts = [accountStore accountsWithAccountType:accountTypeFB];

    for (ACAccount *fbAccount in fbAccounts)
        [accountStore renewCredentialsForAccount:fbAccount completion:^(ACAccountCredentialRenewResult renewResult, NSError *error) {
            DLog(@"Renew account error: %@", error.localizedDescription)
        }];
} 
```

# html - 在 apache pig 中解析 XML 和 HTML

> ID：15198502
> 
> 赞同：0
> 
> 时间：2013-03-04T09:42:26.733
> 
> 标签：html, xml, parsing, apache-pig

我们如何使用 apache pig 运行 XML。我尝试了 piggybank.storage.XMLLoader 函数，但它对我不起作用。我只在本地模式下运行猪作业。没有错误，但它没有运行。

有没有办法解析 apache pig 中的 HTML 页面。

请帮我。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-10-26T11:56:20.493

您需要将 org.apache.pig.piggybank.storage.XMLLoader() 与参数一起使用。和 Xpath 也是如此。我发现[这个](http://bigdataprogrammers.com/load-xml-file-pig/)很有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:33:10.343

请尝试在 MR 模式下运行脚本。因为许多功能/操作只能在 MR 模式下正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T12:44:23.283

试试这个代码：

```
register <PIG_HOME>/contrib/piggybank/java/piggybank.jar; 
A= LOAD '/xmlfile' USING org.apache.pig.piggybank.storage.XMLLoader('<XML_tag>'); 
```

猪 MR 模式是指在 MR 模式而不是本地模式下运行 pig（即 pig -x local）。

希望能帮助到你。

# c# - 在本地网络上调用集线器方法很慢

> ID：15198504
> 
> 赞同：1
> 
> 时间：2013-03-04T09:42:29.857
> 
> 标签：c#, asynchronous, signalr

我正在使用 SignalR.client DLL 与使用 SignalR 的网站进行对话。当客户端和站点在同一台机器上时，它可以完美运行。（立即调用 hub 方法）

但是，现在我通过网络在一台机器上设置了站点，调用（调用）平均需要 2.5 秒。（但工作）

我在 <1 毫秒内 ping 机器。

使用 Wireshark 我看到数据包在 2.5 秒后发送。

我调试了 SignalR.client dll，它卡在 System.Threading.Task 级别（在此处调用，在 HttpHelper.cs 中）

```
[SuppressMessage("Microsoft.Design", "CA1031:DoNotCatchGeneralExceptionTypes", Justification = "Exceptions are flowed back to the caller.")]
    public static Task<Stream> GetHttpRequestStreamAsync(this HttpWebRequest request)
    {
        try
        {
            return Task.Factory.FromAsync<Stream>(request.BeginGetRequestStream, request.EndGetRequestStream, null);
        }
        catch (Exception ex)
        {
            return TaskAsyncHelper.FromError<Stream>(ex);
        }
    } 
```

知道什么会减慢这个过程吗？

非常感谢。

ps：我使用了 SignalR 聊天示例来重现延迟。

pps：这是我的测试应用程序的（非常简单的）代码：

```
var connection = new HubConnection("http://IP:PORT/SITENAME/");
    var myHub = connection.CreateHubProxy("ChatHub");

    // Start the connection
    connection.Start().Wait();

    while (true)
    {
      string sMsg = string.Format("Hello world from winform! Sent(winform) at {0}", DateTime.Now.ToString("hh:mm:ss.fff"));
      Console.WriteLine("Sending data : " + sMsg);

      myHub.Invoke("Send", "Winform", sMsg).ContinueWith(task2 =>
      {
        if (task2.IsFaulted)
        {
          Console.WriteLine("An error occurred during the method call {0}", task2.Exception.GetBaseException());
        }
        else
        {
          Console.WriteLine("Successfully called MethodOnServer at {0}", DateTime.Now.ToString("hh:mm:ss.fff"));
        }
      });
      Thread.Sleep(60*1000);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:23:16.733

问题是由于本地网络配置错误造成的。我的专业计算机正在使用自动配置脚本 + 自动检测连接参数，这会减慢一切。（=> 愚蠢的浪费时间）

感谢 David 对使用 Fiddler 的回答和建议（一切正常，因为我发现 Fiddler 覆盖了代理配置）

# c++ - 如何跟踪使用的 DLL（是所谓的 DLL hell 吗？）

> ID：15198506
> 
> 赞同：2
> 
> 时间：2013-03-04T09:42:36.283
> 
> 标签：c++, windows, visual-studio-2008, dll

这应该是一个简单的问题，但我确实被它绊倒了。环境是Windows 7上的Visual Studio 2008，机器也安装了vs2010、vs2012。（我必须安装几个VS，因为不同的项目使用不同的版本）

我有一个简单的应用程序使用一些 3-rd DLL。1）。当应用程序从 Vs 启动时，就可以了。

2）。当我复制 DLL 以执行文件并从资源管理器中启动它时，应用程序在 C++ 库上崩溃了

类似于：程序：xxx.exe 文件：c:\program files\microsoft visual studio 9.0\vc\include\vector 行：779 表达式：向量下标超出范围

3）。我打开命令行并在 PATH 环境变量之前添加“Visual Studio 9.0\”和“Visual Studio 9.0\vc\bin”并启动应用程序，它也崩溃了。

我已附加到手动启动/崩溃的过程，并将其与模块和 PATH 环境的 Vs IDE 启动过程进行了比较，看起来相同....我很沮丧。

有什么建议吗？先谢谢了。

* * *

我刚才找到了原因。在 Visual Studio 中，有一个“调试 | 工作目录设置，默认为工程目录。虽然我复制了所有 DLL，但我错过了一些配置文件。这是应用程序逻辑错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T09:45:29.343

使用 SysInternals 的[Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645)来跟踪加载了哪个 DLL。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T09:49:47.667

我建议使用[Dependency Walker](http://www.dependencywalker.com/)来调试依赖问题。

您可以在静态模式或动态模式（从 Profile 菜单中）使用它来准确诊断加载程序在运行时正在做什么。后一种模式听起来就像您正在寻找的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T11:02:03.570

“向量下标超出范围”问题似乎更多来自您的代码，而不是 DLL 依赖问题。但是，请确保引用正确版本的 DLL - 调试/发布。

# actionscript-3 - 敌人从随机位置向舞台中心逼近

> ID：15198509
> 
> 赞同：1
> 
> 时间：2013-03-04T09:42:46.110
> 
> 标签：actionscript-3

我正在使用以下 Enemy Class，敌人不会以准确的角度朝向舞台中心。那么我应该对我的代码进行哪些更改才能更准确地工作呢？

```
{
import flash.display.MovieClip;
import flash.events.*;
import flash.display.Stage;

public class Enemy1 extends MovieClip
{
    private var BG:MovieClip;
    private var speed:Number = 0.5;

    public function Enemy1(BG:MovieClip) : void
    {
        var RandomX:Array = new Array(100,200,300,400,800,900,1000,1100);
        var RandomY:Array = new Array(100,200,300,600,700,800);
        var r:int = (Math.random() * 8);
        var s:int = (Math.random() * 6);

        x = RandomX[r];
        y = RandomY[s];

        this.BG = BG;

        addEventListener(Event.ENTER_FRAME, moveEnemy); //false, 0, true);.
    }
    private function moveEnemy(e:Event):void
    {
        if (this.x > 660)
        {
            this.x -=  speed;
            this.rotation = 180;
        }

        if (this.x < 540)
        {
            this.x +=  speed;
            this.rotation = 0;
        }

        if (this.y > 510)
        {
            this.y -=  speed;
            this.rotation = 270;
        }

        if (this.y < 390)
        {
            this.y +=  speed;
            this.rotation = 90;
        }

        if (this.x > 660 && this.y > 510)
        {
            this.x -=  speed;
            this.y -=  speed;
            this.rotation = 225;
        }

        if (this.x < 540 && this.y < 390)
        {
            this.x +=  speed;
            this.y +=  speed;
            this.rotation = 45;
        }

        if (this.x < 540 && this.y > 510)
        {
            this.x +=  speed;
            this.y -=  speed;
            this.rotation = 315;
        }

        if (this.x > 660 && this.y < 390)
        {
            this.x -=  speed;
            this.y +=  speed;
            this.rotation = 135;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T12:38:51.790

正如 Vesper 指出的那样，使用 atan2 来获取角度而不是硬编码条件是一个问题。此外，您应该管理敌人的速度，使用中央 ENTER_FRAME 循环可能比每个敌人使用一个循环更有效。

这是一个注释示例：

```
package  {

    import flash.display.*;
    import flash.events.*;
    import flash.geom.*;

    public class Enemy extends Sprite{

        public static const RAD_TO_DEG:Number = 57.2957795;
        public static const RX:Array = [100,200,300,400,800,900,1000,1100];
        public static const RY:Array = [100,200,300,600,700,800];

        private var tx:Number;//target X
        private var ty:Number;//target Y
        private var size:Number = 20;
        private var ease:Number = .05;

        public function Enemy() {
            addEventListener(Event.ADDED_TO_STAGE,init);
        }
        private function init(e:Event):void{
            //position
            x = RX[(int)(Math.random() * RX.length)];
            y = RY[(int)(Math.random() * RY.length)];
            //render
            graphics.lineStyle(7,Math.random() * 0xFF6600);
            graphics.lineTo(-size,0);
            graphics.moveTo(-size*.5,-size*.5);
            graphics.lineTo(-size,0);
            graphics.moveTo(-size*.5,size*.5);
            graphics.lineTo(-size,0);
        }
        public function seek(ax:Number = NaN,ay:Number = NaN):void{
            if(ax) tx = ax;
            if(ay) ty = ay;
            //vector math stuff - direction to 
            var dx:Number = x-tx;//difference vector x component
            var dy:Number = y-ty;//difference vector x component
            //update position
            x -= dx * ease;
            y -= dy * ease;
            //and rotation based on direction (using atan2 then converting radians to degrees)
            rotation = Math.atan2(dy,dx) * RAD_TO_DEG;
        }

    }

} 
```

和一个基本的测试文档类：

```
package  {

    import flash.display.*;
    import flash.events.*;

    public class EnemyTester extends Sprite{

        private var cenemies:Vector.<Enemy> = new Vector.<Enemy>();//central enemies
        private var menemies:Vector.<Enemy> = new Vector.<Enemy>();//mouse enemies

        public function EnemyTester() {
            init();
        }
        private function init():void{
            for(var i:int = 0; i < 30; i++){
                cenemies[i] = addChild(new Enemy) as Enemy;
                cenemies[i].seek(stage.stageWidth * .5, stage.stageHeight * .5);
                menemies[i] = addChild(new Enemy) as Enemy;
            }
            addEventListener(Event.ENTER_FRAME,update,false,0,true);
        }
        private function update (e:Event):void{
            for(var i:int = 0; i < 30; i++){
                cenemies[i].seek();
                menemies[i].seek(mouseX,mouseY);
            }
        }

    }

} 
```

显然，如果您有一些艺术品，您需要在艺术品上稍微调整一下旋转，使其看起来正确。

对于更高级的敌人 AI，您可能需要查看[Steering Behaviors](http://www.red3d.com/cwr/steer/)。[像Justin Windle 的](http://blog.soulwire.co.uk/laboratory/flash/as3-flocking-steering-behaviors)一样有 as3 端口。[Keith Peter 出色的 Actionscript 3.0 动画](http://www.apress.com/9781430216087)也涵盖了它们（可下载代码）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T12:02:51.380

```
this.rotation=Math.atan2((stage.stageHeight>>1)-this.y,(stage.stageWidth>>1)-this.x)*180/Math.PI; 
```

如果您需要从 (x1,y1) 到 (x2,y2) 的角度，请使用`Math.atan2(y2-y1,x2-x1)`. 结果是弧度，而`rotation`属性需要度数 - 为此，您将其乘以 180 并除以 PI。就这样。

# php - javascript代码在按钮单击时执行，但不是在输入按键时执行

> ID：15198512
> 
> 赞同：1
> 
> 时间：2013-03-04T09:42:52.447
> 
> 标签：php, javascript, jquery

我正在点击按钮搜索位置。结果是 onclick 按钮。但是我在提交函数中输入了相同的代码，但是这里的搜索不起作用。

在按钮单击代码上。（这是有效的）

```
 $("#gobuttton").click(function() {
        $("#gmaplatlon").validate({
            rules:{"latitude":{number:true}, "longitude":{number:true}, "zoom":{digits:true,min:0}},
            errorPlacement:errorMessages
        });
        $("#address").change(function(){
            geocoder.geocode({"address": $(this).attr("value")}, function(results, status) { if (status == google.maps.GeocoderStatus.OK) { map.setZoom(16); map.setCenter(results[0].geometry.location); } else { alert("Geocode was not successful for the following reason: " + status); } });
        });
}); 
```

按输入按钮代码（相同但不起作用）

```
 $('#frm').keypress(function(e) {
     var code = e.keyCode;
     if(code === 13){
         e.preventDefault();
         alert(code);
         $("#gmaplatlon").validate({rules:{"latitude":{number:true}, "longitude":{number:true}, "zoom":{digits:true,min:0}}, errorPlacement:errorMessages});
         $("#address").change(function(){ geocoder.geocode({"address": $(this).attr("value")}, function(results, status) { if (status == google.maps.GeocoderStatus.OK) { map.setZoom(16); map.setCenter(results[0].geometry.location); } else { alert("Geocode was not successful for the following reason: " + status); } }); });
       }
}); 
```

我的功能是 - 在文本框中输入地址并按回车键，然后它应该在谷歌地图上搜索，这是在按钮点击时执行的，但不是在按下回车键时执行的。

HTML代码如下

```
<form method="post" name="frm" id="frm" enctype="multipart/form-data" action="<?php echo site_url('home/sendmapdata');?>"> 
 <input name="address" type="text" id="address" border: solid 1px; " size="60" value="Search from address" onClick="this.value=''"> 
<input type="button" id="gobuttton" value="go"> 
<div id="map_canvas" style="height: 480px; width:665px; " ></div> 
<input type="hidden" name="gmaplatlon" value="true"> 
<p align="center">
<input type="submit" name="okbutton" value="OK" >
</p>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T10:02:04.127

提这个：

```
$(document).ready(function(){
    $('#address').keypress(function(e) {
         var code = e.keyCode;
         if(code === 13){
             //e.preventDefault();
             alert(code);
             $("#gmaplatlon").validate({rules:{"latitude":{number:true}, "longitude":{number:true}, "zoom":{digits:true,min:0}}, errorPlacement:errorMessages});
             $("#address").change(function(){ geocoder.geocode({"address": $(this).attr("value")}, function(results, status) { if (status == google.maps.GeocoderStatus.OK) { map.setZoom(16); map.setCenter(results[0].geometry.location); } else { alert("Geocode was not successful for the following reason: " + status); } }); });
         }
         return false;
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T09:52:10.973

试试这个`$('#frm').keypress(function(e)`改变`$('#address').keypress(function(e)`

更新：

我认为您的问题是 validate 阻止调用 map 函数，将其添加`$('#frm').valid()`到您的 keypress 函数中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T10:12:22.463

`e.preventDefault();`谷歌地图工作后尝试添加

```
$(document).ready(function(){
    $('#address').keypress(function(e) {
         var code = e.keyCode;
         if(code === 13){
             //e.preventDefault();
             alert(code);
             $("#gmaplatlon").validate({rules:{"latitude":{number:true}, "longitude":{number:true}, "zoom":{digits:true,min:0}}, errorPlacement:errorMessages});
             $("#address").change(function(){ geocoder.geocode({"address": $(this).attr("value")}, function(results, status) { if (status == google.maps.GeocoderStatus.OK) { map.setZoom(16); map.setCenter(results[0].geometry.location); } else { alert("Geocode was not successful for the following reason: " + status); } }); });
         }
         e.preventDefault();
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T09:58:32.417

您应该尝试将按键事件提供给`#address`而不是`#frm`：

```
$('#frm').on('keypress', '#address', function(e) { 
```

# perl - perl win32::GUI 文本多窗口

> ID：15198513
> 
> 赞同：0
> 
> 时间：2013-03-04T09:43:02.460
> 
> 标签：perl

我的脚本将在标签中打印输出。我的窗口大小为 100 行。请让我知道如何在标签中显示比窗口数据更多的内容。例如：200 行输出。

我的文本字段输出有问题。所以只使用标签。有什么方法可以滚动标签中的文本吗？

谢谢斯里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T14:31:22.787

什么是标签？如果您用问题所涉及的内容标记问题，您可能会得到更好的答复。

这可能有帮助，也可能没有帮助；特殊变量`$=`按行保存输出页面大小。您也许可以本地化打印。（如果它仍在使用中）。

```
my $perlvar = 'hello'."\n" x 150;
{
 local $= = 200; # set page-size to 200 on default output filehandle
 print $perlvar;
} 
 # $= returns to default page-size on default output filehandle 
```

perlvar 也是 perldoc 的名称，它讲述 perl 变量

# android - 改进我的 Android 应用程序的布局

> ID：15198516
> 
> 赞同：1
> 
> 时间：2013-03-04T09:43:05.987
> 
> 标签：android, listview, user-interface

在我的应用程序中，我实现了后代导航。然后在我的页面中，我实现了 ListViews。如何从简单列表中的简单列表视图中改进 UI，例如

```
ITEM 1
ITEM 2
ITEM 3 
```

对此：

```
********    ********    ********    ********
* itm1 *    * itm2 *    * itm3 *    * itm4 *
*      *    *      *    *      *    *      *
********    ********    ********    ******** 
```

和可滚动的？项目水平对齐。我也在考虑 GridView 。但是可以自定义 GridView 以仅在一行中显示它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:51:53.490

您可以将所有项目放在水平方向的[LinearLayout](http://developer.android.com/reference/android/widget/LinearLayout.html)中，该水平方向位于 Horizo [​​ntalScrollView](http://developer.android.com/reference/android/widget/HorizontalScrollView.html)内。

还有一个 android 类[Gallery](http://developer.android.com/reference/android/widget/Gallery.html)，但在 api 级别 16 中已弃用。

# c++ - 请解释为什么文件路径的开头有一个 S？

> ID：15198518
> 
> 赞同：3
> 
> 时间：2013-03-04T09:43:12.350
> 
> 标签：c++, .net, winforms, xaml

[为什么在MSDN](http://msdn.microsoft.com/en-us/library/aa983623%28v=vs.71%29.aspx)上的示例中文件路径的开头有一个“S” ？我知道您可以使用“@”，但“S”有什么作用？

```
Bitmap(S"D:\\Documents and Settings\\Joe\\Pics\\myPic.bmp"); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T09:45:17.537

这是一个样本`C++/CLI`，不是`C#`。`S""`in`C++/CLI`表示这是托管字符串文字。

检查[http://msdn.microsoft.com/en-us/library/ms235263.aspx](http://msdn.microsoft.com/en-us/library/ms235263.aspx)

# java - 将仅具有构造函数的程序转换为具有主要方法的程序

> ID：15198520
> 
> 赞同：0
> 
> 时间：2013-03-04T09:43:30.167
> 
> 标签：java, constructor

我的老师在给我的作业评分时遇到问题。我在 BlueJ 中创建了以下程序，他很可能使用 Eclipse。问题是我无法让 BlueJ 使用 main 方法启动任何代码，所以我只是选择使用构造函数。将我的 BlueJ 代码复制/粘贴到 Eclipse 中表明它存在问题：

```
Error: Could not find or load main class Misspelled 
```

如何将下面的仅限构造函数的程序转换为具有有效 main 方法的程序？我不再需要构造函数了。

* * *

```
import java.util.Scanner;

public class RandomGame
{
int usersScore = 0;

public RandomGame()
{
    Scanner userInput = new Scanner(System.in);

    String[] wrongWords = {"mispelled","kobra", "wishfull", "adress", "changable","independant", "emberrass", "cieling", "humerous", "wierd"} ;
    String[] rightWords = {"arctic", "miscellaneous", "piece", "prejudice", "grateful","ecstasy", "fascinate", "definite", "changeable", "conscious"};
    double randomNumber;
    int randomNumberInt;
    String wordToCheck;

            //Display Rules
    System.out.printf("Enter Either 'y' or 'n'");

            //Keep Looping Game
    while(usersScore < 5)
    {
            //Generate A Random Number
    randomNumber = generateRandomNumber();     //Math.round(10 * Math.random());
    randomNumberInt = ((int)(randomNumber));

            //Display User's Score
    System.out.printf("\n\nCurrent Score: %d\n", usersScore);

            //Check Place Value Of Random Number In Array
    if(randomNumber %2 == 0)
    {
        wordToCheck = rightWords[randomNumberInt];

        System.out.printf("Correct?: %s\n", wordToCheck);
        rightCheck(userInput.next());
    }
    else
    {
        wordToCheck = wrongWords[randomNumberInt];

        System.out.printf("Correct?: %s\n", wordToCheck);
        wrongCheck(userInput.next());
    }

   }
    //System.out.printf(wordToCheck);

}

public double generateRandomNumber()
{
    double randNum;

    randNum = Math.round(10 * Math.random());

    return(randNum);
}

public boolean rightCheck(String usersAnswer)
{
    if(usersAnswer.equals("y"))
    {
        System.out.printf("Correct! from rightCheck");
        usersScore++;

        return(true);
    }
    else
    {
        System.out.printf("Incorrect from rightCheck");
        usersScore--;

        return(false);
    }
}

public boolean wrongCheck(String usersAnswer)
{
    if(usersAnswer.equals("n"))
    {
        System.out.printf("Correct! from wrongCheck");
        usersScore++;

        return(true);
    }
    else
    {
        System.out.printf("Incorrect from wrongCheck");
        usersScore--;

        return(false);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:45:55.097

一种方法是创建另一个类来保存您的主要方法

```
public class Main
{
    public static void main (String args[])
    {
        RandomGame rGame = new RandomGame();
    }
} 
```

（注意：上述情况下.java文件的名字必须是Main.java）

否则，您可以通过以下方式将 main() 添加到您的 RandomGame 类

```
public static void main (String args[])
    {
        RandomGame rGame = new RandomGame();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T09:48:12.860

考虑以下步骤：

1.  将构造函数更改为 main 方法`public static void main(String[] args)`
2.  将构造函数中使用的所有私有/公共方法更改为`static`方法
3.  要么将成员变量更改`usersScore`为静态，要么创建 RandomGame 实例而不是 main 来跟踪`usersScore`

> *给一个人一条鱼，你就喂他一天；教他怎么钓鱼，你养他一辈子*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T09:45:43.597

写`public static void main(String args[])`

在 main 里面，创建一个你的类的实例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T09:48:21.890

下面的代码进行了以下更改：

*   向 main 方法添加了构造函数逻辑
*   使方法静态
*   使字段静态

    ```
    import java.util.Scanner;

    public class RandomGame {
        static int usersScore = 0;

        public static void main(String[] args) {
            Scanner userInput = new Scanner(System.in);

            String[] wrongWords = { "mispelled", "kobra", "wishfull", "adress",
                    "changable", "independant", "emberrass", "cieling", "humerous",
                    "wierd" };
            String[] rightWords = { "arctic", "miscellaneous", "piece",
                    "prejudice", "grateful", "ecstasy", "fascinate", "definite",
                    "changeable", "conscious" };
            double randomNumber;
            int randomNumberInt;
            String wordToCheck;

            // Display Rules
            System.out.printf("Enter Either 'y' or 'n'");

            // Keep Looping Game
            while (usersScore < 5) {
                // Generate A Random Number
                randomNumber = generateRandomNumber(); // Math.round(10 *
                                                        // Math.random());
                randomNumberInt = ((int) (randomNumber));

                // Display User's Score
                System.out.printf("\n\nCurrent Score: %d\n", usersScore);

                // Check Place Value Of Random Number In Array
                if (randomNumber % 2 == 0) {
                    wordToCheck = rightWords[randomNumberInt];

                    System.out.printf("Correct?: %s\n", wordToCheck);
                    rightCheck(userInput.next());
                } else {
                    wordToCheck = wrongWords[randomNumberInt];

                    System.out.printf("Correct?: %s\n", wordToCheck);
                    wrongCheck(userInput.next());
                }

            }
            // System.out.printf(wordToCheck);

        }

        public static double generateRandomNumber() {
            double randNum;

            randNum = Math.round(10 * Math.random());

            return (randNum);
        }

        public static boolean rightCheck(String usersAnswer) {
            if (usersAnswer.equals("y")) {
                System.out.printf("Correct! from rightCheck");
                usersScore++;

                return (true);
            } else {
                System.out.printf("Incorrect from rightCheck");
                usersScore--;

                return (false);
            }
        }

        public static boolean wrongCheck(String usersAnswer) {
            if (usersAnswer.equals("n")) {
                System.out.printf("Correct! from wrongCheck");
                usersScore++;

                return (true);
            } else {
                System.out.printf("Incorrect from wrongCheck");
                usersScore--;

                return (false);
            }
        }
    } 
    ```

# android - Android SDK：一次显示一行并继续 onClick

> ID：15198521
> 
> 赞同：1
> 
> 时间：2013-03-04T09:43:32.960
> 
> 标签：android, sdk, onclick, textview, onclicklistener

我是 Java 和 Android SDK 的新手，但我愿意学习。我想要做的是构建一个应用程序，它接受一个句子或一个通用字符串并且只显示一行文本，这已经编码。但我想做的是通过单击一个名为“继续”之类的按钮进入“下一个”行。所以简而言之，它只是让您一次阅读少量文本，然后单击按钮继续。

这是我已经走了多远：

activity_main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".DisplayMessageActivity"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/text_box"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="50sp"
        android:maxLines="1" />

    <Button
        android:id="@+id/next_button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="@string/next"
        android:onClick="nextLine"
        android:textSize="15sp" />

</RelativeLayout> 
```

MainActivity.java：

```
package com.xxx.xxx.xxx;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

public class MainActivity extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

    String s = "Iphone swag fanny pack, try-hard master cleanse pop-up elit deserunt vinyl. Odio mustache hoodie YOLO fap. Vegan godard labore tempor. Farm-to-table aute craft beer, YOLO bicycle rights artisan semiotics. Cosby sweater readymade eiusmod consectetur fap stumptown. Cliche keytar accusamus blue bottle, wayfarers locavore selfies elit aliqua chillwave lo-fi helvetica enim. Irony tofu blog, fap pickled pariatur odio wolf cliche vice sint pitchfork eiusmod cosby sweater polaroid.";
    final String[] words = s.split("\\s+");

    Button b = (Button) findViewById(R.id.next_button);

    b.setOnClickListener(new OnClickListener() {
       @Override
       public void onClick(View v) {
           TextView tx = (TextView) findViewById(R.id.text_box);
           StringBuilder builder = new StringBuilder();
           for (String s : words){
             builder.append(s+" ");
           tx.setText(builder.toString());
       }
    }});

}} 
```

到目前为止，没有文本加载到 textView 中，并且按钮在单击时一次加载所有文本，不支持“重新单击”它。

有任何想法吗？

此致，

**更新：** 我做了一个计数器来说明应该在屏幕上打印哪个单词。我还有一个问题：我如何才能显示三个单词（或任意数量的单词）而不是一个？我试图摆弄 indexranges，但我似乎无法掌握它。这就是我的 MainActivity.java 现在的样子：

```
package com.xxx.xxx.xxx;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

public class MainActivity extends Activity {

    int counter;
    String s = "Iphone swag fanny pack, try-hard master cleanse pop-up elit deserunt vinyl. Odio mustache hoodie YOLO fap. Vegan godard labore tempor. Farm-to-table aute craft beer, YOLO bicycle rights artisan semiotics. Cosby sweater readymade eiusmod consectetur fap stumptown. Cliche keytar accusamus blue bottle, wayfarers locavore selfies elit aliqua chillwave lo-fi helvetica enim. Irony tofu blog, fap pickled pariatur odio wolf cliche vice sint pitchfork eiusmod cosby sweater polaroid.";
    final String[] words = s.split("\\s+");

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        final TextView tx = (TextView) findViewById(R.id.text_box);
        counter = 0;
        tx.setText(words[counter]);

    Button b = (Button) findViewById(R.id.next_button);

    b.setOnClickListener(new OnClickListener() {
       @Override
       public void onClick(View v) {
           counter++;
           tx.setText(words[counter]);
       }
    });

}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T10:20:30.147

首先移动`TextView tx = (TextView) findViewById(R.id.text_box);`到`onCreate`方法。每次单击按钮时都不需要获取文本视图。因此，文本视图应作为属性存储在您的类中。此外，请确保您的文本已正确拆分。最后需要一点逻辑。获取`words`表中元素的数量。还创建一些设置为当前单词的计数器。在每个按钮上单击获取计数器（words [i]）指向的单词并增加该计数器。当计数器达到最大元素数时，您可以将其重置为 0。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T10:10:10.487

您的代码在每次迭代后分配 TextView 值，并在每次迭代后添加一个单词。这就是加载所有文本的原因。

```
 public void onClick(View v) {
       TextView tx = (TextView) findViewById(R.id.text_box);
       StringBuilder builder = new StringBuilder();

       for (String s : words){
         builder.append(s+" ");
         tx.setText(builder.toString());
       } 
```

如果您想每次点击显示一个单词，请创建一个计数器作为单词数组的索引，并在每次点击后递增。并将“当前索引词”分配给文本字段。

# php - 在codeigniter中查看表连接

> ID：15198522
> 
> 赞同：1
> 
> 时间：2013-03-04T09:43:33.107
> 
> 标签：php, mysql, codeigniter

我有两个表，一个类别表和一个工厂表。在我的类别表中，我有以下行。

```
idcategory
category 
```

在我的工厂表中，我有以下行。

```
idfactories
factoryname
postcode
country
telephone number
email
website
profile
adress
idcategory 
```

我还有另一个表，其中也存储了 idfactory 和 idcategory。

我的 factorycategories 表有以下几行。

```
idfactorycat
idfactory
idcategory
factorycat 
```

我加入了我的类别模型，因为我想要我网站上的类别，当我点击一个类别时，必须显示存储在该类别中的工厂。

在我的模型中，我有

```
$this->db->select('*');
$this->db->from('bedrijfcategorieen');
$this->db->join('bedrijfcategorieen', 'bedrijfcategorieen.idbedrijven = bedrijven.idbedrijven');
$this->db->join('bedrijfcategorieen', 'bedrijfcategorieen.idcategorieen = categorieen.idcategorieen');
$query = $this->db->get(); 
```

我实际上必须在我的控制器和视图中存储什么？我对codeigniter很陌生。

ps：我翻译了我的行，所以别人很容易理解，因为我是荷兰人。

谢谢

编辑：解释起来有点棘手，但我有一个侧边栏类别。

```
Categories

cars
cars parts
books
etc etc... 
```

我想从每个类别创建链接。

当点击时，我们说汽车。我想转到结果页面，其中显示了类别 id=1 的工厂，因为汽车的 id=1。这是我的实际问题。我想我需要加入。

希望你能理解。

再次感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:10:42.613

这更像是一个一般的 MVC 问题。您的数据库架构对于这个问题并不重要，因为您想知道如何访问数据而不是如何优化您的查询（据我所知）......

所以你的模型需要返回一些东西，比如`return $query->result();`. 然后您可以在控制器中使用它来获取该数据并将其发送到视图。例如：

控制器

```
$data['my_data'] = $this->my_model->my_get_function();  // this is calling your function above
$this->load->view('my_view', $data);  // loads my_view and sends the data array to it 
```

在视图中，您保留了所有的演示 (HTML) 数据，但您可以访问控制器发送的数据，在我们的例子中，这将`$my_data`是一个对象，由您所做的查询返回的所有行组成。这将向您显示数据：

看法

```
// ...html here...
<div>
    <pre>
        <?php var_dump($my_data); ?>
    </pre>
</div>
// ...html here... 
```

这些只是控制器和视图的示例部分。阅读有关 MVC 的更多信息，以更好地了解它应该如何工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T10:47:13.380

## 编辑以匹配您的编辑

根据你的编辑，我只是​​在这里给你基本的想法。详情请参考codeigniter手册：

//模型

```
function getresults($segment3){
    $this->db->select('*');
    $this->db->from('category');
    $this->db->join('factories', 'category.idcategory. ' = factories.idfactories');
    $this->db->join('factorycategories', 'factorycategories.idfactory = ' . $segment3); 

    $query = $this->db->get();
    return $query->result();
}

//Note that it would return only results that match in all tables. 
//If you need to return more of a table, use right join or left join.

function categories(){ //Call this from controller to create the initial links
    $query = $this->db->get('category');
    return $query->result();
} 
```

//控制器

```
function pageCategories(){ // Shows initial categories links on page
    $data["links"] = $this->modelname->categories();
    $this->load->view("page-to-view");
}

function pageFactories(){ // takes categories and shows factories
    $this->load->helper('url');
    $segment3 = $this->uri->segment(3);
    $data["results"] = $this->modelname->getresults($segment3);  
    $this->load->view("page-to-view");
} 
```

//看法

```
print_r($results); //run a test - debug 
```

显示您的链接（注意分段模式）：

```
if(isset($links) && is_array($links)){
    foreach($links as $k => $value){
        echo '<a href="'.base_url().'Yourcontroller/pageFactories/'.$value->idcategory.' ">' .$value->category. '</a>';
        echo "<br />";
    }
}

if(isset($results ) && is_array($results )){
    foreach($results as $key => $row){
        echo $row->category;
        echo "<br />";
        echo $row->factoryname;
        //It goes on as much as you want
    }
} 
```

### 这只是为了让您了解全局。

你如何将它转换回荷兰语是我无法弄清楚的。注意： google.translate.com 会因为您可能需要清理的大量空白而搞砸。

# android - Android忽略自定义行上的权重参数

> ID：15198524
> 
> 赞同：2
> 
> 时间：2013-03-04T09:43:40.603
> 
> 标签：android, xml, listview

我有以下 xml 为我的列表视图构建自定义行。它工作正常，但地址旁边的状态是我不想要的文字包装。过去我只是设置了一个重量，这很好，但它似乎没有在这里打球。

这是它的样子：

![在此处输入图像描述](../Images/a2a0c46f10a5e104256dc695f6c0e002.png)

以下是手机上发生的事情：

![在此处输入图像描述](../Images/aca34afc14168a987e27880bbf69baab.png)

这是我的xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/LinearLayout1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/listviewonclick"
    android:orientation="vertical"
    android:padding="@dimen/Padding" >

    <LinearLayout
        android:id="@+id/linHoz"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="10" >

        <TextView
            android:id="@+id/status"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="3"
            android:paddingLeft="@dimen/left"
            android:text="Large Text"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textColor="@color/cachecolor"
            android:textSize="@dimen/MedText" />

        <TextView
            android:id="@+id/txtSpacer"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:paddingLeft="@dimen/left"
            android:text=" | "
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textColor="@color/yellow"
            android:textSize="@dimen/MedText" />

        <TextView
            android:id="@+id/Address"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="3"
            android:paddingLeft="@dimen/left"
            android:text="Large Text"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textColor="@color/white"
            android:textSize="@dimen/MedText" />

    </LinearLayout>

    <LinearLayout
        android:id="@+id/linHoz2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <ImageView
            android:id="@+id/icon"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:clickable="true"
            android:padding="10dp"
            android:src="@drawable/ico_information" />

        <TextView
            android:id="@+id/text"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:clickable="true"
            android:padding="10dp"
            android:layout_weight="6"
            android:text="Medium Text"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <Button
            android:id="@+id/btnStart"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/greenbuttons"
            android:text="Start" />

    </LinearLayout>

  <LinearLayout
      android:id="@+id/linarea"
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:layout_weight="0.50" >

      <Button
          android:id="@+id/btnMap"
          style="?android:attr/buttonStyleSmall"
          android:layout_width="wrap_content"
          android:layout_height="28dp"
          android:layout_margin="4dp"
          android:layout_weight="3"
          android:background="@drawable/smallbluebutton"
          android:text="Map" />

      <Button
          android:id="@+id/btnInformation"
          style="?android:attr/buttonStyleSmall"
          android:layout_width="wrap_content"
          android:layout_height="28dp"
          android:layout_margin="4dp"
          android:layout_weight="3"
          android:background="@drawable/smallpurplebuttons"
          android:text="Information" />

      <Button
          android:id="@+id/btnProblems"
          style="?android:attr/buttonStyleSmall"
          android:layout_width="110dp"
          android:layout_height="28dp"
          android:layout_margin="4dp"
          android:layout_weight="3"
          android:background="@drawable/smallredbutton"
          android:text="Problems" />
  </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:57:17.230

仅将`layout_weight`属性分配给地址标签。您可以设置`layout_width="0dip"`以获得更好的性能。并明确设置布局方向。

```
<LinearLayout
    android:id="@+id/linHoz"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/status"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Your Status" />

    <TextView
        android:id="@+id/txtSpacer"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text=" | "/>

    <TextView
        android:id="@+id/Address"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Very very long text goes here. Very very long text goes here." />

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T10:06:35.750

如果 ' 没有足够的空间`TextView`在一行中显示所有文本，则它要么是扭曲的，要么是省略号的。默认情况下，`TextView`'s 是多行的，并且会换行。要改用省略号，请添加`android:singleLine="true"`.

关于文字宽度比例：`android:layout_width="0dp"`为所有参与加权布局的View设置。`android:layout_weight`按比例分配权重。例如`0.3`下载`TextView`和`0.7`地址`TextView`。这将为第一个视图提供 30% 的空间，为第二个视图提供 70% 的空间。

# delphi - 在 Firemonkey 应用程序中最小化表单

> ID：15198531
> 
> 赞同：2
> 
> 时间：2013-03-04T09:43:52.477
> 
> 标签：delphi, firemonkey, delphi-xe3

我用这个：

```
Application.Minimize; 
```

在 Vcl delphi 应用程序中，但在 Firemonkey 中我有未声明的*识别*错误。

如何最小化我的 firemonkey 表单？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T13:41:09.517

尝试[`WindowState`](http://docwiki.embarcadero.com/Libraries/XE2/en/FMX.Forms.TCommonCustomForm.WindowState)像这样使用该属性

```
WindowState := TWindowState.wsMinimized; 
```

# iphone - 相同的在单元格处查看不同的大小，如何重用单元格

> ID：15198532
> 
> 赞同：0
> 
> 时间：2013-03-04T09:43:53.730
> 
> 标签：iphone, ios, uitableview

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    // Return the number of rows in the section.

    NSLog(@"[listArr count]=%d",[listArr count]);
    return [listArr count];

}

// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    PostCount *post=[listArr objectAtIndex:indexPath.row];

//     NSString *CellIdentifier = [NSString stringWithFormat: @"Cell_%d_%@",indexPath.row,post.foreignId];
//    
//    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
//    if (cell == nil) {
//        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
//        
//        NSLog(@"indexPath.row++++++++=%d",indexPath.row);
//        
//        
//    
//    }else{
////        [[cell.contentView viewWithTag:indexPath.row+1000] removeFromSuperview];
//       TimeLineGraphicView *gview=(TimeLineGraphicView *)[cell viewWithTag:indexPath.row+1000];
//         [gview removeFromSuperview];
//        gview=nil;
//    }
//   
//    
//    
//    TimeLineGraphicView *gview=[[TimeLineGraphicView alloc]init];
//    gview.tag=indexPath.row+1000;
//    gview.delegate=self;
//
//    [cell.contentView addSubview:gview];
//    
//    int Allheight =[ModelClass returnGraphicViewHeight_timeLine:post];
//    gview.frame=CGRectMake(0, 0, 320, Allheight);
//    [gview setViewStyle:post];
//    
//
//    gview.lab_time.text=[ModelClass intervalSinceNow:post.when btime:0];
//    
//    post=nil;
//    
//    return cell;

    static NSString *CellIdentifier = @"TimeLineGraphicViewCell";

    TimeLineGraphicViewCell *cell = (TimeLineGraphicViewCell*)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if(cell==nil){

        cell = [[TimeLineGraphicViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] ;

    }

//    
//    int Allheight =[ModelClass returnGraphicViewHeight_timeLine:post];
//    cell.frame=CGRectMake(0, 0, 320, Allheight);

    //时间
    if (cell.btime==1) {
        cell.lab_time.text=[ModelClass intervalSinceNow:post.when btime:1 ];
    }else{
        cell.lab_time.text=[ModelClass intervalSinceNow:post.when btime:0];
    }

    cell.imageView_t.hidden=NO;
    //    imageView_t.isRoundIcon=YES;
    if(![GlobalVariable isBlankString:post.who.avatarbig])
    {

        [cell.imageView_t setImageWithURL:[NSURL URLWithString:post.who.avatarbig]
                    placeholderImage:[UIImage imageNamed:@"default_user.png"]];

    }
    else{
        cell.imageView_t.image=[UIImage imageNamed:@"default_user.png"];
    }

    cell.imageIcon.image=[UIImage imageNamed:[ModelClass returnimage_source:post.source]];
    cell.whoscreenName.text=post.who.screenName;

    CGSize size_myWhat =[ModelClass heightForTextView:[UIFont systemFontOfSize:15] WithText:post.what weith:250];

    cell.myWhat.frame=CGRectMake(50, 25, 250, size_myWhat.height);
    cell.myWhat.text=[NSString stringWithFormat:@"%@",post.what];
    cell.myWhaticon.frame=cell.myWhat.frame;

    if(![GlobalVariable isBlankString:post.img_small])
    {

        CGSize size_myImageView=CGSizeMake(80, 80);

        cell.myImageView.frame=CGRectMake(50, 30+size_myWhat.height, size_myImageView.width, 80);
        cell.myImageView.hidden=NO;

        [cell.myImageView setImageWithURL:[NSURL URLWithString:post.img_small]
                    placeholderImage:[UIImage imageNamed:@"default_user.png"]];

        UIButton * myImageBtn=[[UIButton alloc]init];
        myImageBtn.frame= CGRectMake(50, 30+size_myWhat.height, size_myImageView.width, 80);
        [myImageBtn addTarget:self action:@selector(my_imag_btnClick:) forControlEvents:UIControlEventTouchUpInside];
//        myImageBtn.tag=self.tag-1000;
        [cell addSubview:myImageBtn ];

    }

    if ([post.sourceTweet.what length]>0) {
        cell.whoWhat.text=[NSString stringWithFormat:@"@%@: %@",post.sourceTweet.who.screenName,post.sourceTweet.what];

    }

    CGSize size_whoWhat =[ModelClass heightForTextView:[UIFont systemFontOfSize:14] WithText:cell.whoWhat.text weith:250];

    cell.whoWhat.frame=CGRectMake(10, 10, 250, size_whoWhat.height);

    if(![GlobalVariable isBlankString:post.sourceTweet.img_small])
    {

        CGSize size_whoImageView=CGSizeMake(80, 80);
        cell.whoImageView.frame=CGRectMake(30, 15+size_whoWhat.height, size_whoImageView.width, 80);
        cell.whoImageView.hidden=NO;
        [cell.whoImageView setImageWithURL:[NSURL URLWithString:post.sourceTweet.img_small]
                     placeholderImage:[UIImage imageNamed:nil]];

        UIButton * whoImageBtn=[[UIButton alloc]init];
        int myimageHeight=0;
        if (cell.myImageView.frame.size.height>0) {
            myimageHeight=5+80;
        }
        whoImageBtn.frame=CGRectMake(30+42, 40+size_myWhat.height+size_whoWhat.height+myimageHeight, 80, 80);
        whoImageBtn.backgroundColor=[UIColor clearColor];
        [whoImageBtn addTarget:self action:@selector(who_imag_btnClick:) forControlEvents:UIControlEventTouchUpInside];
//        whoImageBtn.tag=self.tag-1000;
        [cell addSubview:whoImageBtn ];
    }

    if (size_whoWhat.height<20) {
        cell.whoBgView.hidden=YES;
    }else{

        int myimageHeight=0;
        if (cell.myImageView.frame.size.height>0) {
            myimageHeight=5+80;
        }

        cell.whoBgView.frame=CGRectMake(42, 25+size_myWhat.height+myimageHeight, 270, 20+size_whoWhat.height+cell.whoImageView.frame.size.height);

    }

    return cell;

} 
```

和我的 TimeLineGraphicViewCell

```
 - (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        // Initialization code

        imageView_t=[[UIImageView alloc]initWithFrame:CGRectMake(5, 5, 40, 40)];
        imageView_t.hidden=YES;

        imageView_t.layer.cornerRadius = 5;
        imageView_t.layer.masksToBounds = YES;
        //给图层添加一个有色边框
        imageView_t.layer.borderWidth = 0.8;
        imageView_t.layer.borderColor = [[UIColor colorWithRed:230.0/255 green:230.0/255 blue:230.0/255 alpha:1.0] CGColor];

        [self addSubview:imageView_t];

        imageIcon=[[UIImageView alloc]initWithFrame:CGRectMake(295, 5, 16, 16)];
        [self addSubview:imageIcon];

        self.lab_time = [[UILabel alloc] initWithFrame:CGRectMake(210, 5, 80, 20)];
        self.lab_time.textColor=[UIColor grayColor];
        self.lab_time.font=[UIFont systemFontOfSize:12];
        self.lab_time.textAlignment=UITextAlignmentRight;
        self.lab_time.backgroundColor=[UIColor clearColor];
        [self addSubview: self.lab_time];

        whoscreenName = [[UILabel alloc] initWithFrame:CGRectMake(60, 5, 145, 20)];
        whoscreenName.textColor=[UIColor blackColor];
        whoscreenName.font=[UIFont systemFontOfSize:18];
        whoscreenName.lineBreakMode = UILineBreakModeTailTruncation;
        whoscreenName.numberOfLines = 0;
        whoscreenName.backgroundColor=[UIColor clearColor];
        [self addSubview:whoscreenName];

        myWhat = [[UITextView alloc] init];
        myWhat.textColor=[UIColor blackColor];

        myWhat.backgroundColor=[UIColor clearColor];
        [myWhat setScrollEnabled:NO];
        [myWhat setEditable:NO];
        myWhat.dataDetectorTypes=UIDataDetectorTypeLink;
        [myWhat setCanCancelContentTouches:NO];
        [self addSubview:myWhat];

        myWhaticon=[[UIView alloc]init];
        [self addSubview:myWhaticon];

        myImageView=[[UIImageView alloc]init];
        myImageView.hidden=YES;
//         myImageView.compressed_img=1;
        [self addSubview:myImageView];

        whoBgView=[[UIImageView alloc]init];
        //        [whoBgView setImage:[[UIImage imageNamed:@"popup.png"] stretchableImageWithLeftCapWidth:0 topCapHeight:30]];
        whoBgView.image = [[UIImage imageNamed:@"timeline_rt_border_t.png"] stretchableImageWithLeftCapWidth:130 topCapHeight:7];

        [self addSubview:whoBgView];

        whoWhat = [[UITextView alloc] init];
        whoWhat.textColor=[UIColor blackColor];

        whoWhat.backgroundColor=[UIColor clearColor];
        [whoWhat setScrollEnabled:NO];
        [whoWhat setEditable:NO];

        whoWhat.dataDetectorTypes=UIDataDetectorTypeLink;//url
        [whoWhat setCanCancelContentTouches:NO];
        [whoBgView addSubview:whoWhat];

        whoImageView=[[UIImageView alloc]init];
        whoImageView.hidden=YES;
        //         whoImageView.backgroundColor=[UIColor yellowColor];
//        whoImageView.compressed_img=1;
        [whoBgView addSubview:whoImageView];

        myWhat.font=[UIFont systemFontOfSize:15];
        whoWhat.font=[UIFont systemFontOfSize:14];
    }
    return self;
} 
```

某些视图可能隐藏，某些视图大小可能不同，我使用上面的代码，但单元格位于错误位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:48:22.587

创建`TimeLineGraphicViewCell`使用给定数据计算其高度的方法。并在您`ViewController`创建临时单元格作为全局变量并使用它`heightForRowAtIndexPath`来使用给定数据计算每个单元格的高度。

# ios - 为什么旋转在 iOS 6 上工作时对 iOS 5 不起作用

> ID：15198536
> 
> 赞同：1
> 
> 时间：2013-03-04T09:44:04.643
> 
> 标签：ios, ios5, ios6, uiviewcontroller

我有一个应用程序，它以 5.0 作为部署目标，6.1 作为基本 sdk，它在 iOS 6.x 设备/模拟器上运行良好。但是在 5.x 上，我的观点没有旋转。我在谷歌上搜索并找到了一些关于此的 Stackoverflow 帖子，但我无法在其中找到正面和反面。我想我需要实现我自己使用的不同视图控制器的子类，但是我是对的吗？

在我的应用程序委托`didFinishLaunchingWithOptions`中，我使用它来创建我的应用程序：

```
self.tabBarController = [[UITabBarController alloc] init];
self.tabBarController.viewControllers = @[viewController1, viewController2, viewController3];
self.window.rootViewController = self.tabBarController;
[self.window makeKeyAndVisible]; 
```

我创建了我的 viewController1.. 像这样：

```
viewController1 = [[UINavigationController alloc] initWithRootViewController:[[SearchVC alloc] initWithNibName:@"SearchVC_iPhone" bundle:nil]]; 
```

我已经尝试`shouldAutorotateToInterfaceOrientation`在我的 SearchVC_iPhone 视图控制器中实现，并且我也尝试在该子类中进行子类化`UINavigationController`和实现`shouldAutorotateToInterfaceOrientation`，但它对我来说不起作用，我真的只是在这里猜测。

请知道这些东西的任何人都可以在这里帮助我，我需要做些什么才能让它在 iOS 5.x 中也能正常工作？

谢谢索伦_

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T09:50:55.430

在 IOS5 中，您可以使用

```
-(BOOL)shouldAutorotateToInterfaceOrientation：(UIInterfaceOrientation)toInterfaceOrientation
{
    return YES;
} 
```

在 IOS6 中，您可以使用

```
-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskAll;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T10:18:33.210

我解决了！！问题是 rootViewController，我必须在 rootViewController 上实现 shouldAutorotateToInterfaceOrientation ，然后所有子视图都开始正常运行。所以我创建了自己的 UITabBarController 子类，它实现了 shouldAutorotateToInterfaceOrientation 并将其设置为 rootViewController。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T10:07:22.837

我正在开发一个应用程序（Xcode 4.5 iOS 6），它必须与已安装软件版本的设备兼容，从 4.5 和默认 iPhone 5 开始。

我知道新的 iOS 6 更改带有自动旋转模式。

当您打开设备时，“iPhone Simulator 6.0”应用程序运行正常，但是当我运行“iPhone Simulator 5.0”时出现旋转问题。

我输入了代码，以及从 iOS 6 和旧方法（已弃用）到 iOS 5 的新方法。

所以寻找旋转方法：

```
#pragma mark - Rotate Methods iOS 5

- (BOOL)shouldAutorotateToInterfaceOrientation: (UIInterfaceOrientation)interfaceOrientation 
```

{

```
if (UIInterfaceOrientationIsPortrait(interfaceOrientation))

{

    //Code Here

}

if (UIInterfaceOrientationIsLandscape(interfaceOrientation))

{

    //Code Here

}

return YES; 
```

}

```
#pragma mark - Rotate Methods iOS 6 
```

*   (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation 持续时间:(NSTimeInterval)duration

    {

if (UIInterfaceOrientationIsPortrait(toInterfaceOrientation))

```
 {

        //Code here

    } 
```

if (UIInterfaceOrientationIsLandscape(toInterfaceOrientation))

```
 {

         //Code here

    } 
```

}

# php - 0.20 后的整数

> ID：15198538
> 
> 赞同：0
> 
> 时间：2013-03-04T09:44:14.160
> 
> 标签：php, rounding

我试图在 0.2 之后对数字进行四舍五入，例如，如果数字是 10.19，如果 10.20 或高于 11，它应该显示 10

我确实阅读了有关圆形功能的信息，但我不知道如何实现上述效果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T09:48:52.880

你可以试试这个：

```
$rounded = ceil( $yournumber - 0.2 ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T09:47:45.950

只需添加 0.3：

```
rounded = round(original + 0.3) 
```

这样一来，原始值 10.2 最终会变成 10.5，然后四舍五入为 11。

或者，您可以添加 0.8 然后使用`floor`.

（这都是假设正值。如果你的数字可能是负数，你需要做更多的工作。）

# php - 获取mysql查询的上一个和下一个id值

> ID：15198539
> 
> 赞同：0
> 
> 时间：2013-03-04T09:44:15.130
> 
> 标签：php, mysql

```
SELECT * FROM TableName WHERE name='test' 
```

执行上述查询后，我想要上一个和下一个 id 值。当然，它们不会是增量的。如何根据 where 条件获取下一个和上一个 id。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:58:54.327

```
SELECT
    * 
FROM
    TableName 
WHERE 
    id = (SELECT MIN(id) FROM TableName where id > 2) 
    AND id = (SELECT MAX(id) FROM TableName where id < 2) 
```

**或者**你可以使用`Limit`

```
SELECT * FROM TableName WHERE `id` > 2 ORDER BY `id` ASC LIMIT 1
UNION 
SELECT * FROM TableName WHERE `id` < 2 ORDER BY `id` DESC LIMIT 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T09:48:13.153

试试下面

```
 select * from Tablename where name = 'test' AND id = (select min(id) from Tablename  where id > 4) OR id = (select max(id) from Tablename  where id < 4) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T09:55:47.087

我相信如果您使用 php，您可以使用 mysql_data_seek()

[http://php.net/manual/en/function.mysql-data-seek.php](http://php.net/manual/en/function.mysql-data-seek.php)

# android - 我想在布局中的一个片段中显示 Tabbar

> ID：15198540
> 
> 赞同：0
> 
> 时间：2013-03-04T09:44:18.723
> 
> 标签：android, android-fragments

我在要显示标签栏的那个片段之一的主布局中有 3 个片段（两个垂直片段，一个水平片段，一个垂直片段）。并且在每个选项卡单击事件中它再次具有自己的布局

# java - 自定义 AsyncProcessor 中的 Camel Producer 模板

> ID：15198542
> 
> 赞同：1
> 
> 时间：2013-03-04T09:44:22.153
> 
> 标签：java, apache-camel

我创建了一个自定义端点来利用一些数据的异步处理。现在我想将处理结果传递给另一个路由，以便将结果保存在数据库中，但我不知道如何访问我的 AsyncProcessor 中的生产者模板。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:16:55.310

请参阅有关使用生产者模板的常见问题解答：http: [//camel.apache.org/why-does-camel-use-too-many-threads-with-producertemplate.html](http://camel.apache.org/why-does-camel-use-too-many-threads-with-producertemplate.html)

目的是 IoC 生产者模板/或在需要时查找模板。您还可以从 Exchange 获取 CamelContext API，然后创建一个新的生产者模板以使用（仅一次）并继续重用该模板。如果您不想重复使用模板，请确保在使用后停止它。

# php - 意外的令牌，但哪个令牌？

> ID：15198546
> 
> 赞同：1
> 
> 时间：2013-03-04T09:44:41.870
> 
> 标签：php, json

我有一个magento商店的链接，它输出以下json（出于测试目的，请忽略虚假值）：

**jsfiddle** [http://jsfiddle.net/ZkZ4D/](http://jsfiddle.net/ZkZ4D/)

**非漂亮格式，由 php 输出**

```
[[{"customer_address_id":"4","created_at":"2013-01-14 10:49:59","updated_at":"2013-01-14 10:49:59","city":"abc town","country_id":"NL","firstname":"john","lastname":"doe","postcode":"7091 eh","street":"mwhahah 47\nmwhgahahahaha","telephone":"31645494440","is_default_billing":true,"is_default_shipping":true}],[{"customer_address_id":"4","created_at":"2013-01-14 10:49:59","updated_at":"2013-01-14 10:49:59","city":"abc town","country_id":"NL","firstname":"john","lastname":"doe","postcode":"7091 eh","street":"mwhahah 47\nmwhgahahahaha","telephone":"31645494440","is_default_billing":true,"is_default_shipping":true}]] 
```

**适合人类阅读的漂亮格式**

```
[
    [
        {
            "customer_address_id": "4",
            "created_at": "2013-01-14 10:49:59",
            "updated_at": "2013-01-14 10:49:59",
            "city": "abc town",
            "country_id": "NL",
            "firstname": "john",
            "lastname": "doe",
            "postcode": "7091 eh",
            "street": "mwhahah 47\nmwhgahahahaha",
            "telephone": "31645494440",
            "is_default_billing": true,
            "is_default_shipping": true
        }
    ],
    [
        {
            "customer_address_id": "4",
            "created_at": "2013-01-14 10:49:59",
            "updated_at": "2013-01-14 10:49:59",
            "city": "abc town",
            "country_id": "NL",
            "firstname": "john",
            "lastname": "doe",
            "postcode": "7091 eh",
            "street": "mwhahah 47\nmwhgahahahaha",
            "telephone": "31645494440",
            "is_default_billing": true,
            "is_default_shipping": true
        }
    ]
] 
```

我如何获得上面的json？

**php代码**

```
class ajax extends plantinaNLmagento
    {
    public function __construct()
        {
        parent::__construct();
        } 
    public function getCustomerAdressAjax()
        {
        $id = (int)$_GET['customerid'];
        $q = $this->db->query("SELECT * FROM `tbl_magento_users` WHERE `core_id`=:ID",array('ID'=>$id));
        $customeradresses = array();
        while($who = $q->fetchObject())
            {
            $x=$this->mage->call('customer_address.list',$who->magento_ID);
            array_push($customeradresses,$x); 
            array_push($customeradresses,$x);
            }
        header('Cache-Control: no-cache, must-revalidate');
        header('Expires: Mon, 26 Jul 1997 05:00:00 GMT');
        header('Content-type: application/json');
        echo json_encode($customeradresses);
        }
    } 
```

为了测试目的，我推了`$customeraddress`两次。

现在，如果我将生成的 json 粘贴到 jsonlint 或其他 json 验证器中，它都说它是有效的 json。

当我在函数 JSON.parse 或 jQuery.parseJSON 中使用它时，我得到一个未执行的令牌错误，但它没有说明哪个令牌或在哪里，并且由于我的 json 通过了验证，我完全不知道哪个令牌失败了在。

我一定是在*facepalm*类别中遗漏了一些东西，但我根本找不到它......

**错误信息** `SyntaxError: Unexpected token`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T13:05:11.697

您的 JSON 数据是完全有效的，但您还必须确保您的 PHP 脚本只发送 JSON 数据而没有其他内容（通知、警告、错误等会破坏 JSON）。

要检查，请使用浏览器的开发工具、FireBug 等，并查看网络检查器选项卡以查看 PHP 发送的*实际*响应。必要时修复它们的错误。

至于你的小提琴：JSON 数据不能按原样在 JavaScript 字符串中使用。至少您必须转义反斜杠（例如 JSON`"Hello\nWorld"`应该变成`'"Hello\\nWorld"'`）。

# android - 签署应用程序后地图上的方形灰色（Google Maps api）

> ID：15198548
> 
> 赞同：2
> 
> 时间：2013-03-04T09:44:51.793
> 
> 标签：android, google-maps

当我从 Eclipse 运行应用程序时，我的地图看起来很完美，但是当我使用我的密钥库对应用程序签名时，地图不再可见。

我发现了这个[类似的问题](https://stackoverflow.com/questions/6835853/google-map-displaying-grey-squares)，但我无法理解解决方案。

这是我看到的图像：

![图片](../Images/9c21abb6a5a9fd8dea77f30827ac6d45.png)

有人能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T10:16:55.163

请注意，您使用 Debug Keystore 和 Live Keystore 文件生成的 Google Map API 密钥是不同的。

# java - JFrame 关闭按钮的弹出窗口

> ID：15198549
> 
> 赞同：4
> 
> 时间：2013-03-04T09:44:53.730
> 
> 标签：java, swing, jframe, windowlistener, jpopup

我正在做一些基本 `Java Swing application`的（初级）。我要做的是当我按下 关闭`close button on JFrame`窗口时我想要一个 `JOptionPane Confirm Dialog` 而不是直接关闭

这是代码JFrame

```
 JFrame  frame= new JFrame("frame"); 
   frame.setSize(300,300);
   frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
   frame.setVisible(true);
   frame.pack(); 
```

JOptionPane 代码是这样的

```
 final JOptionPane optionPane = new JOptionPane("Are You sure?",JOptionPane.QUESTION_MESSAGE,
JOptionPane.YES_NO_OPTION); 
```

所以当按下JFrame上的关闭按钮时，这个弹出窗口应该出现而不是直接关闭
请指导我如何做到这一点..提前谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T09:50:02.353

是的，您可以使用[WindowListener](http://docs.oracle.com/javase/7/docs/api/java/awt/event/WindowListener.html)来做到这一点。

```
 public void windowClosed(WindowEvent e) {
        //This will only be seen on standard output.
        displayMessage("WindowListener method called: windowClosed.");
    }

    public void windowOpened(WindowEvent e) {
        displayMessage("WindowListener method called: windowOpened.");
    }

    public void windowIconified(WindowEvent e) {
        displayMessage("WindowListener method called: windowIconified.");
    }

    public void windowDeiconified(WindowEvent e) {
        displayMessage("WindowListener method called: windowDeiconified.");
    }

    public void windowActivated(WindowEvent e) {
        displayMessage("WindowListener method called: windowActivated.");
    }

    public void windowDeactivated(WindowEvent e) {
        displayMessage("WindowListener method called: windowDeactivated.");
    }

    public void windowGainedFocus(WindowEvent e) {
        displayMessage("WindowFocusListener method called: windowGainedFocus.");
    }

    public void windowLostFocus(WindowEvent e) {
        displayMessage("WindowFocusListener method called: windowLostFocus.");
    }

    public void windowStateChanged(WindowEvent e) {
        displayStateMessage(
          "WindowStateListener method called: windowStateChanged.", e); 
```

请参阅[本教程](http://docs.oracle.com/javase/tutorial/uiswing/events/windowlistener.html)以获取更多详细信息。
但是对于您的场景，我建议您使用适配器类（因为您只需要一个事件，所以不需要累并实现所有方法）所以这里是一个根据您的要求的示例

```
import java.awt.event.WindowAdapter;  
import java.awt.event.WindowEvent;  
import javax.swing.JFrame;  
import javax.swing.JOptionPane;  

public class NoCloseFrame extends JFrame {  
    public static void main( String[] arg ) {  
        new NoCloseFrame();  
    }  

    public NoCloseFrame() {  
        super( "No Close Frame!" );  
        setDefaultCloseOperation( DO_NOTHING_ON_CLOSE );  
        setSize( 300, 300 );  
        setVisible( true );  
        addWindowListener( new AreYouSure() );  
    }  

    private class AreYouSure extends WindowAdapter {  
        public void windowClosing( WindowEvent e ) {  
            int option = JOptionPane.showOptionDialog(  
                    NoCloseFrame.this,  
                    "Are you sure you want to quit?",  
                    "Exit Dialog", JOptionPane.YES_NO_OPTION,  
                    JOptionPane.WARNING_MESSAGE, null, null,  
                    null );  
            if( option == JOptionPane.YES_OPTION ) {  
                System.exit( 0 );  
            }  
        }  
    }  
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T10:09:04.840

您可以通过以下步骤进行操作：

1.  将行替换`frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);`为`frame.setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);`

2.  实现`WindowListener`并覆盖其所有抽象方法。你可以[在这里找到它](https://docs.oracle.com/javase/7/docs/api/java/awt/event/WindowListener.html)。

3.  以这种方式覆盖该`public void windowClosing(WindowEvent e)`方法：

    ```
     @Override
     public void windowClosing(WindowEvent e){
           int result = JOptionPane.showConfirmDialog(null, "Are you sure,"Confirm",JOptionPane.YES_NO_OPTION,JOptionPane.QUESTION_MESSAGE);

           if(result == JOptionPane.YES_OPTION){
                   System.exit(0);
           }else{
                   //Do nothing
           }
     } 
    ```

# cuda - (int) -1 的 CUDA 内核 printf 使用 %d 说明符给出错误的输出

> ID：15198550
> 
> 赞同：1
> 
> 时间：2013-03-04T09:44:56.180
> 
> 标签：cuda, printf, format-specifiers

当用 C 告诉我的电脑时

```
printf("%d",(int)-1); 
```

我确实期望并且通常也会得到“-1”响应。然而，在我的 Tesla M2090 Nvidia Card 上，我的基于 Ubuntu 的 Cuda 5.0 与这个无辜的演示程序通话

```
/** cheese.cu */
#include <iostream>
#include <cuda.h>
#include <cstdio>

using namespace std;

template<typename T> struct SpacePtr
  { size_t size; T* ptr; };

 __global__ void f(SpacePtr<int>* sp)
{
  printf("This _is_ a 'minus one' or ain't it: %d\n",(int)-1);
  // Note: All appears to work fine with %lu instead of %zd
  // Still: How does the size value affect the -1?
  printf("On DEV: Size: %zd, Minus One: %d\n",sp->size,(int)-1);
}

int main()
{
  SpacePtr<int> data; data.ptr = 0; data.size = 168;
  SpacePtr<int>* devPtr = 0;
  cudaMalloc(&devPtr,1);
  cudaMemcpy(devPtr,&data,sizeof(SpacePtr<int>),cudaMemcpyHostToDevice);
  f<<<1,1,0,0>>>(devPtr);
  cudaError_t err = cudaGetLastError();
  cout << "The last error code was " << err << " (" <<
    cudaGetErrorString(err) << ")" << endl;
  cudaDeviceSynchronize();
} 
```

通过编译和调用

```
nvcc -arch=sm_20 cheese.cu && ./a.out 
```

产生输出：

```
The last error code was 0 (no error)
This _is_ a 'minus one' or ain't it: -1
On DEV: Size: 168, Minus One: 10005640 
```

最后一个数字实际上是某种随机数（两个后续调用返回不同的结果），就好像内存分配有问题一样。-1 之前的 (int) 已经是反复试验。原始程序没有它。

这里有一个问题：有人知道为什么没有写-1，如果是这样，你能告诉我为什么吗？非常感谢，马库斯。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T10:04:31.240

如果查看CUDA C 编程指南的[附录 B.32.1“格式说明符”](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#format-specifiers)，您会发现不支持`z`修饰符 in 。`%zd`您必须转换为`unsigned long`并`%lu`用作格式说明符：

```
printf("On DEV: Size: %lu, Minus One: %d\n",(unsigned long)(sp->size), (int)-1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T10:04:20.623

基本问题似乎`%zd`是设备 printf 不支持格式说明符（我不确定是否支持它）。

编辑：

CUDA 5 中 printf 的文档是这样说的：

> 对于标准 printf()，格式说明符采用以下形式：%[flags][width][.precision][size]type
> 
> 支持以下字段（有关所有行为的完整描述，请参阅广泛可用的文档）：
> 
> ```
> Flags: ‘#’ ‘ ‘ ‘0’ ‘+’ ‘-‘
> Width: ‘*’ ‘0-9’
> Precision: ‘0-9’
> Size: ‘h’ ‘l’ ‘ll’
> Type: ‘%cdiouxXpeEfgGaAs’ 
> ```
> 
> 请注意，CUDA 的 printf() 将接受标志、宽度、精度、大小和类型的任何组合，无论它们总体上是否构成有效的格式说明符。换句话说，“%hd”将被接受，并且 printf 将期望参数列表中相应位置的双精度变量。

所以不支持`%zd`格式说明符。`size_t`像这样修改你的内核：

```
__global__ void f(SpacePtr<int>* sp)
{
    const int minus_one = -1;
    printf("This _is_ a 'minus one' or ain't it: %d\n", minus_one);
    printf("On DEV: Size: %d, Minus One: %d\n",int(sp->size), minus_one);
} 
```

工作正常。

另请注意，您的主机代码中有一个相当大的错误，尽管这不会对您示例中的清单行为产生任何影响。您只是分配和复制一个`dev_ptr`明显不正确的字节。它应该看起来像：

```
cudaMalloc((void **)&devPtr, sizeof(data));
cudaMemcpy(devPtr, &data, sizeof(data), cudaMemcpyHostToDevice); 
```

将数据的全部内容从主机传输到设备。

# linux - 当任何文件更新时，如何从 linux 服务器获取电子邮件警报

> ID：15198552
> 
> 赞同：0
> 
> 时间：2013-03-04T09:45:06.067
> 
> 标签：linux, perl, centos

我有专门的 centos 服务器，我的一个网站被黑了。

所以请任何人帮助解决这个安全问题。

如果有人在过去 24 小时内在我的服务器中更新或创建了 php 文件，我需要收到电子邮件提醒。

是否有任何 perl 脚本来完成这项工作以及任何 cron 工作代码。

感谢提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T10:23:04.277

入侵检测：

**绊线**：[http ://www.linuxjournal.com/article/8758](http://www.linuxjournal.com/article/8758)

**auditd**：您可以使用 linux 审计子系统：[http](http://www.linuxscrew.com/2012/07/04/track-file-changes-auditd/) ://www.linuxscrew.com/2012/07/04/track-file-changes-auditd/ 。使用aureport 获取此处存储的信息。

实时监控：

**inotify**：您可以使用 inotify 实时监视文件更改：

[http://www.ibm.com/developerworks/linux/library/l-ubuntu-inotify/index.html](http://www.ibm.com/developerworks/linux/library/l-ubuntu-inotify/index.html) [http://blogs.jetbrains.com/idea/2010/04/native-file-system-watcher-for -linux/](http://blogs.jetbrains.com/idea/2010/04/native-file-system-watcher-for-linux/) [http://sourceforge.net/projects/iwatch/](http://sourceforge.net/projects/iwatch/)

**gamin**：基于此： http: [//people.gnome.org/~veillard/gamin/](http://people.gnome.org/~veillard/gamin/)

# c# - 业务逻辑层设计

> ID：15198560
> 
> 赞同：3
> 
> 时间：2013-03-04T09:45:30.360
> 
> 标签：c#, .net, linq-to-sql, architecture, bll

问这个问题我觉得自己像个菜鸟，但它已经困扰了我一段时间了。

在设计分层应用程序的 BLL 时，您会将所有实体类放在一个命名空间中吗？例如：如果您有一个包含客户及其车辆的数据库，并且这些车辆按月进行维修。我认为可以将客户及其车辆保存在与“服务模块”不同的“模块”中（这样，如果您需要更新服务的完成方式或数据的存储位置，则无需触摸客户\车辆模块）。

我这样想是正确的，还是应该改变我的设计理念？

这给我带来了使用 LINQ to SQL 的问题。如果表的实体类的一半包含在“模块”A 中，另一个包含在“模块”B 中，那么您将在某个地方使用“模块”A 引用“模块”B，反之亦然，以适应 2 个表之间的关联与“模块”接壤。

或者（现在才想到这一点）您是否会在“模块”中重叠 1 个表的实体类（在两个模块中具有相同的类）？

任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:51:36.827

尚不清楚您是否还具有数据访问层，因为您提到“因此，如果您需要更新服务完成方式或数据存储位置，则无需触摸 Customer\Vehicle 模块” . DAL 将负责处理检索和存储数据，无论何时何地。

但当然，车辆可能必须更新，如果更新这些规则需要在一个地方完成，那将是最方便的。您可以使用这些规则简单地创建一个客户和车辆 BLL。然后，您只需添加一个使用 Customer 和 Vehicle 的 CustomerVehicleService。没有你做不到的规则。

# android - 在android应用程序中显示html格式的文本

> ID：15198567
> 
> 赞同：6
> 
> 时间：2013-03-04T09:45:49.813
> 
> 标签：android, android-ui

我正在将一个 Web 应用程序移植到 android 平台。该应用程序将包含一些 Web 内容（使用 访问`WebView`）和一些离线内容。我需要在主屏幕上显示一些文本作为离线内容，我有点困惑如何去做。我已经阅读了格式化文本的 android 文档，但我发现在处理多行文本时使用它有点乏味。所以我正在考虑创建一些 HTML 页面并将它们包含在我的应用程序的 res 文件夹中。然后使用`WebView`. 使用这种方法是否可取？还是有更好的出路？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-04T09:50:12.720

好吧，对于简单的文本，您始终可以在 a 上执行以下操作`TextView`：

```
someTextView.setText(Html.fromHtml(htmlAsAString)); 
```

如果您说它更复杂（带有图像和/或 css 等），我建议将 html 放在 assets/ 文件夹中，然后从那里直接将其加载到`WebView`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-04T09:50:22.377

有`Html`可以格式化HTML文本的类，但它非常有限。您可以在此处阅读文档：http: [//developer.android.com/reference/android/text/Html.html](http://developer.android.com/reference/android/text/Html.html)

您可能最感兴趣的方法是`Html.fromHtml(java.lang.String)`. 它返回一个`Spanned`对象，然后您可以`TextView`通过简单地调用来填充 a `textView.setText(..)`。

如果您发现它没有为您需要的 HTML 标记提供所需的支持，那么您很可能最终会使用`WebView`.

# twitter-bootstrap - 引导开始

> ID：15198575
> 
> 赞同：0
> 
> 时间：2013-03-04T09:46:11.543
> 
> 标签：twitter-bootstrap, jsfiddle

总而言之，我是 Bootstrap 的书呆子。在我阅读了[Bootstrap 文档](http://twitter.github.com/bootstrap/scaffolding.html)之后，我开始在 jsfiddle 中做一些实验。到目前为止我所做的是

```
<div class="row">
  <div class="span9">
    Level 1 column
    <div class="row">
      <div class="span6">Level 2</div>
      <div class="span3">Level 2</div>
    </div>
  </div>
</div> 
```

jsfiddle 链接是：http: [//jsfiddle.net/malaikuangren/qNsAG/4/show/](http://jsfiddle.net/malaikuangren/qNsAG/4/show/)。

请帮助审查它。似乎我没有以正确的方式得到它。因为正确的结果类似于下图。我不知道我是否错过了什么。有人可以帮我吗？谢谢。 ![在此处输入图像描述](../Images/ead4a4f32dcf7bfa7ab7f70617428ca9.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T09:59:12.227

here's what you're looking for I think:

[http://jsfiddle.net/AxMg3/](http://jsfiddle.net/AxMg3/)

```
<div class="container">
    <div class="row show-grid">
        <div class="span9">
            Level 1 column
            <div class="row show-grid">
                <div class="span6">Level 2</div>
                <div class="span3">Level 2</div>
            </div>
        </div>
    </div>
</div> 
```

I added in a link to the docs.css from Bootstrap which gives it the styling you were looking for.

l also added a div with the class of container around your code and added in the .show-grid class to the rows.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T09:54:33.373

In bootstrap single row has size limited to 12\. When you add span6 + span3 you get column size 6 and 3 so this row has size 9 and you have 3 columns left. See span and offset.

# stored-procedures - 如何在返回值为字符串的 for 循环中获取 DB2 9.7 游标值

> ID：15198577
> 
> 赞同：0
> 
> 时间：2013-03-04T09:46:26.397
> 
> 标签：stored-procedures, db2

我有一个循环，例如

```
DECLARE SQL VARCHAR(1024);

FOR V AS CUR1 CURSOR FOR (SELECT 'Select * from My_Table' from ... )
DO
    SET SQL = CUR1;
    PREPARE S1 FROM SQL;
    EXECUTE S1;
END FOR; 
```

这似乎不起作用。当 for 循环中的光标指向返回的某些行并且我可以访问该值时，我已经成功地完成了类似的操作，例如：

```
SET SQL = CUR1.TABNAME 
```

但是现在返回的值是一个字符串，我不知道如何从游标中获取它。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T11:03:30.513

您只需要在查询中指定一个列名：

```
DECLARE SQL VARCHAR(1024);

FOR V AS CUR1 CURSOR FOR (SELECT 'drop table My_Table' as malicious_code from...)
DO
    SET SQL = CUR1.malicious_code;
    PREPARE S1 FROM SQL;
    EXECUTE S1;
END FOR; 
```

# hibernate - 使用 Hibernate 和 PostgreSQL 的 NetBeans 逆向工程向导中未显示表

> ID：15198578
> 
> 赞同：0
> 
> 时间：2013-03-04T09:46:32.230
> 
> 标签：hibernate

我正在开发一个从我的 postgresql 数据库中检索员工详细信息的 Web 应用程序。在 netbeans 中使用 hibernate，同时执行 hibernate 逆向工程。
使用 Hibernate 和 PostgreSQL 的 NetBeans 逆向工程向导中没有显示表。连接已建立，我已经在休眠配置文件中检查了它，并且我也将 postgres jar 文件添加到了路径中。然后我也没有让表格出现在逆向工程向导中以供选择。

请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-05-13T13:48:36.570

我有类似的问题。按顺序尝试以下。

1.  Windows - 服务。选择数据库连接名称。右键单击并选择连接。（如果是上面的原因，在逆向工程向导中，你会得到一个警告——无法连接到数据库）

2.  如果驱动程序很好，连接很好，但表仍然是空的。检查创建连接时使用的默认模式。应该是**DBO**

这将解决问题。

[![在此处输入图像描述](../Images/6a56d00af014ac2651dce540df8bd104.png)](https://i.stack.imgur.com/VUowE.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-16T14:40:05.800

这可能为时已晚。但我遇到了完全相同的问题。然后我查看了项目属性，在框架下，Hibernate 没有使用正确的数据库驱动程序。它似乎使用列表中的第一个。我的配置文件是正确的，因为我可以使用连接工厂并获得有效的连接来执行本机 SQL。

我去了我的数据库服务并删除了无效的数据库连接，回到项目属性，Hibernate 现在指向正确的驱动程序。这似乎解决了问题。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-20T20:34:21.233

我有同样的问题，您需要尝试删除旧的连接驱动程序 jdbc:Postgres 并创建另一个，但是这次在最后一步中选择 Select schema: public。，我选择了选项 information_shema，这就是我的原因看不到桌子，问候

# java - 如何使用来自 Java 的 MySQL 转义字符串文字中的单引号

> ID：15198580
> 
> 赞同：6
> 
> 时间：2013-03-04T09:46:36.550
> 
> 标签：java, mysql

我有一个 MySql 表`person_details`，其中包含`p_id`和`p_name`。现在，如果我想插入一条 p_name 包含单引号的记录`'`，我会以这种方式执行它-

`insert into person_details values (1, 'D\'souza');`

现在，我正在尝试以这种方式通过 java 代码执行相同的操作-

`insert into person_details values (1, 'D\\\'souza');`

我得到 MySQLSyntaxErrorException。

哪里不对了？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-04T09:50:24.417

要直接回答您的问题，请将引号加倍。

```
insert into person_details values (1, 'D''souza'); 
```

但我宁愿使用`PreparedStatement`.

以下是专业人士：

*   避免 SQL 注入
*   不需要使用单引号。

例子，

```
String str = "insert into person_details values (?, ?)";
query = con.prepareStatement(str);
query.setInt(1, 1);
query.setString(2, "D'souza");
query.executeUpdate(); 
```

*   [使用准备好的语句](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-04T09:47:19.180

在 MySQL 中，您可以在字符串中使用`''`单个：`'`

```
insert into person_details values (1, 'D''souza'); 
```

[链接到文档](http://dev.mysql.com/doc/refman/5.6/en/string-literals.html)

但这仅适用于您按字面意思提供数据时，例如使用您控制的数据预填充表的 SQL 脚本等。如果您从外部源（例如最终用户，或外部系统）那么大概您不会编写文字，而是使用字符串变量。在这种情况下，您希望将准备好的语句用作[JW。在他的回答中描述](https://stackoverflow.com/a/15198645/157247)。为什么：http: [//xkcd.com/327/](http://xkcd.com/327/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-04T09:49:53.023

你也可以使用`"`

```
insert into person_details values (1, "D'souza"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-04T09:50:58.270

为什么不使用[PreparedStatements](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html)

它还将处理 SQL 注入

# c# - 在 python 数组中需要一些解释

> ID：15198587
> 
> 赞同：0
> 
> 时间：2013-03-04T09:46:54.913
> 
> 标签：c#, python

我正在将 python 算法转换为 c#，我需要一些解释。所以我有这个列表列表：

```
offsets2 = [[(0.1, 0.1), (0.5, 0.1), (0.9, 0.1), (1.1, 0.1)],
            [(0.1, 0.5), (0.5, 0.5), (0.9, 0.5), (1.1, 0.5)],
            [(0.1, 0.9), (0.5, 0.9), (0.9, 0.9), (1.1, 0.9)],
            [(0.1, 1.0), (0.5, 1.0), (0.9, 1.0), (1.1, 1.0)]] 
```

还有这个：

```
for offset in offsets2:
    offset = [(int(x + lane.width * dx), 
               int(y + self.canvas.row_height * dy))
              for dx, dy in offset] 
```

我想知道 dx 和 dy 是什么？我猜它是 delta x 和 delta y，但只是想确定一下，并询问如何在 c# 中获取它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:52:32.457

你可以把打印语句找出你想要的。

```
for offset in offsets2:
    print offset
    tmp = []
    for dx, dy in offset:# for each pair (dx,dy) of offset
        print dx, dy
        newCoords = (int(x + lane.width * dx), 
               int(y + self.canvas.row_height * dy))
        tmp.append(newCoords)
    offset = tmp[:]

>>> [(0.1, 0.1), (0.5, 0.1), (0.9, 0.1), (1.1, 0.1)]
>>> 0.1, 0.1
>>> 0.5, 0.1
>>> 0.9, 0.1
....
>>> [(0.1, 0.5), (0.5, 0.5), (0.9, 0.5), (1.1, 0.5)]
>>> 0.1, 0.5
>>> 0.5, 0.5
>>> 0.9, 0.5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T09:56:15.470

该代码使用所谓的[`List Comprehension`](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions).

它大致翻译为：

```
for offset in offsets2:
    _tmp = []
    for dx, dy in offset:
        _tmp.append((int(x + lane.width * dx), 
                     int(y + self.canvas.row_height * dy))
    offset = _tmp 
```

`offset`包含 2 个元组，表达式`for dx, dy in offset`在对其进行迭代时解包这些元组。和写法一样：

```
for coord in offset:
    if len(coord) != 2:
        raise ValueError
    dx = coord[0]
    dy = coord[1]
    ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T09:52:19.253

`dx`并且`dy`只是分配给列表中每组值的临时变量。所以在第一次迭代中，`dx=0.1, dy=0.1`，在第二次中，`dx=0.5, dy=0.1`，依此类推。

# import - 使用 phpMyAdmin 将表导入现有表

> ID：15198588
> 
> 赞同：7
> 
> 时间：2013-03-04T09:46:57.903
> 
> 标签：import, phpmyadmin

当我这样做时，它会创建一个新表，但我已经选择了要导入的表。我尝试了 CSV 和 ODS 格式，仍然得到相同的结果。我现有表中的第一列是 ID 自动递增的。我尝试放入一个空白列（在我正在导入的文件中）以进行补偿，并且我也尝试过没有放入额外的列。我在这里遗漏了一些简单的东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-10-25T10:05:00.757

首先，我对此很陌生，但只是通过鬼混试图弄清楚如何完成类似的事情并让它发挥作用，很难相信这里的答案。

我们在这里谈论 phpMyAdmin，它有无穷无尽的选择。您可以选择使用选项导出原始表 - 在此过程中重命名数据库和表 -**告诉某人重命名现有数据库或表充其量是不负责任的。没必要。**

另外，似乎没有人提到我们真正想要做的是将 COLUMNS 导入到现有表中 - 表在各个方面都是相同的，除了表和数据库名称，对吧？

这就是我所做的：我对原始表进行了简单的导出，除了名称之外，它与目标表相同。我在 SQL Management Studio 中打开了 sql 文件（从 MS 中免费，你也可以使用 TextPad 之类的东西来做同样的事情），并在开始时删除了所有关于创建数据库、表等的东西（放在它说的地方“插入” - 留下）。然后，我用现有的目标表名替换了原始表名的任何实例。然后，您将在该 sql 文件中看到所有数据列。删除要导入的最后一列之后的所有内容。不需要其他任何东西。使用目标表名的名称保存该文件。导入那个 sql 文件 - 不需要任何花哨的东西。完毕。

请注意，如果目标表中已有列，则会在第一列上出错，因为目标中的主键与它尝试在源列中使用的主键相同。老实说，我不知道如何以优雅的方式解决这个问题。我在目标表中已经有 7 列（主键 1-7），所以我只是在编辑 sql 文件时剪切了这些列，粘贴在列列表的末尾，并将键更改为从最后一个开始按顺序排列。您还必须将最后一行的前一个结尾从 ; to , 然后是新的最后一行 from , to ; 希望如果您必须这样做，有更多经验的人可以提出更好的方法来做到这一点 - 比如忽略导入的密钥并在导入时自动递增。或者更好的导出方式，以便在导入时自动处理该部分。就像我之前提到的，有大量的导出选项，包括能够在导出期间修复数据库和表名。我敢肯定还有一些关于主键自动增量的东西。

顺便说一句，当您说“选择表格”时，您的意思是在左侧的表格列表中单击它，然后单击右侧的导入按钮？我认为这意味着什么，如果这就是你的意思。这不代表任何意思。导入按钮导入一个 sql 脚本 - 就是这样。发生什么，去哪里等等完全取决于脚本本身。

希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-14T15:41:35.143

您当然可以在 Phpmyadmin 中将一个表导入另一个表。

1.  规范化两个表，使结构匹配
2.  将表重命名为您希望导出的表以匹配导入的表
3.  在普通 SQL 中继续导出/导入，合并自动发生

我自己成功地完成了这些步骤，导入了从 Phpmyadmin 3.3.2 中的表中单独选择的几列，并尝试将它们导入到 Phpmyadmin 3.5.1 中的表中，起初所发生的只是旧表被复制到新的数据库，但是一旦我将它重命名为适合新表的名称（并规范化结构），这个问题就解决了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-26T14:05:40.737

只要将工作表命名为与表名相同，就可以从 Excel 文件导入现有表。

因此，如果我试图导入我的“所有者”表，我会在 Excel 中将我的工作表命名为“所有者”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T12:52:53.857

您不能将一个表导入 phpmyadmin 中的另一个表。
如果您尝试这样做，它将在您的数据库中创建新表。
如需更多帮助，您可以参考： [使用 PHPMYADMIN 导入数据库和表](http://lithiumhosting.com/billing/knowledgebase/96/Importing-databases-and-tables-with-phpMyAdmin.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-10T08:37:41.740

if you download the import from another phpMyAdmin database. While downloading the table from custom, Format Specific options you can choose to have only data (with no structure). Then it will be imported with no problems.

For other imports you will have to modify the data manually to have no structural properties.

# c# - 在 ViewFlipper 的视图之间滑动动画

> ID：15198591
> 
> 赞同：11
> 
> 时间：2013-03-04T09:47:08.387
> 
> 标签：c#, android, android-layout, xamarin.android, android-animation

在一个活动中，我有以下内容：

```
var flipper = FindViewById<ViewFlipper>(Resource.Id.flipper);
flipper.Touch += flipper_Touch; 
```

触摸处理程序的基本实现如下所示：

```
float oldTouchValue = 0;

void flipper_Touch(object sender, View.TouchEventArgs e)
{
    var flipper = sender as ViewFlipper;
    switch(e.Event.Action)
    {
        case MotionEventActions.Down:
            oldTouchValue = e.Event.GetX();
            break;

        case MotionEventActions.Up:
            float currentX = e.Event.GetX();
            if (oldTouchValue < currentX)
            {
                flipper.ShowNext();
            }
            else if (oldTouchValue > currentX)
            {
                flipper.ShowPrevious();
            }
            break;      
    }
} 
```

这允许我在不同的视图之间导航，但我想让它向左/向右滑动

我已经看到了一些关于如何使其工作的 Java 示例，但不是将其转换为 c# 的直接方法。

使视图滑动需要什么，有没有办法定义`animation`in `XML`？
我可以使用`animations`定义的 in`XML`和调用来使活动滑入和滑出`OverridePendingTransition`，但我不确定如何在这里应用这些知识。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-04T11:36:13.667

> 这允许我在不同的视图之间导航，但我想让它向左/向右滑动

The `ViewFlipper` has, through its `ViewAnimator` class, some methods to set the animation for the in and out actions, [`setInAnimation()`](http://developer.android.com/reference/android/widget/ViewAnimator.html#setInAnimation%28android.content.Context,%20int%29) and `setOutAnimation()`. This are in the Android SDK but should have correspondence in MonoDroid(with which unfortunately I'm not familiar so I could be wrong). In order to have the desired animation simply use the two methods above to set the desired animations(either xml file or programmatically built `Animation`) and then call the `showNext/Previous` methods like you currently do.

You even have some slide animation in the Android SDK, but again I don't know if they are present in MonoDroid.

**Update**: Those methods are indeed available in Monodroid and exposed like this:

```
//Using one of the built in animations:
flipper.setInAnimation(this, Android.Resource.Animation.SlideInLeft);
flipper.setOutAnimation(this, Android.Resource.Animation.SlideOutRight);

//Using custom animations defined in XML
flipper.setInAnimation(this, Resource.Animation.slide_in_right);
flipper.setOutAnimation(this, Resource.Animation.slide_out_left); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-06-15T09:45:17.393

If you want to control [ViewFlipper](https://developer.android.com/reference/android/widget/ViewFlipper) animation through your XML layout file, then add these attributes to the `ViewFlipper` tag-

```
 android:inAnimation="@android:anim/slide_out_right"
    android:outAnimation="@android:anim/slide_in_left" 
```

This is a basic example in which the children inside the ViewFlipper slide in and slide out using the default animations provided by android.

You can also provide **your own animation files** by adding these attributes instead of the ones above-

```
 android:inAnimation="@anim/slide_in_right"
    android:outAnimation="@anim/slide_in_left" 
```

and then creating these animation files-

In **res/anim/slide_in_left.xml:**

```
 <?xml version="1.0" encoding="utf-8"?>
    <set xmlns:android="http://schemas.android.com/apk/res/android"
        android:interpolator="@android:anim/decelerate_interpolator" >
        <translate
            android:fromXDelta="0"
            android:toXDelta="-100%p"
            android:duration="500"/>
    </set> 
```

In **res/anim/slide_in_right.xml:**

```
 <?xml version="1.0" encoding="utf-8"?>
    <set xmlns:android="http://schemas.android.com/apk/res/android"
        android:interpolator="@android:anim/decelerate_interpolator">
        <translate
            android:fromXDelta="100%p"
            android:toXDelta="0"
            android:duration="500"/>
    </set> 
```

If you would like to start this animation automatically, then add-

```
 android:flipInterval="2000"
    android:autoStart="true" 
```

This will start the animation automatically and flip the images (or your views) in every 2 seconds (2000ms).

# c++ - 在 C++ 中执行存储为字符串的函数

> ID：15198598
> 
> 赞同：2
> 
> 时间：2013-03-04T09:47:31.623
> 
> 标签：c++, string, function

是否可以执行存储为字符串的函数？例如执行以下形式的功能：

```
string str="myFunction()";

-> here i would like to execute "myFunction()"; 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T09:50:30.430

您必须将其编译为共享库，加载该库并调用它。它可以做到，但它并不漂亮。最有可能的是，有一种好方法可以做任何你想做的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T09:53:50.443

除了 David 所说的之外，您还可以创建一个映射，其中每个节点都包含函数的名称和指向函数的指针。然后在映射中按名称查找节点并调用函数指针。这假设所有函数都具有相同的原型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T11:25:34.837

您还可以创建和嵌入一个语言解析器，用于处理和评估您提供的字符串。

进一步阅读：

*   [http://en.wikipedia.org/wiki/Parsing#Programming_languages](http://en.wikipedia.org/wiki/Parsing#Programming_languages) --- 起点
*   [http://en.wikipedia.org/wiki/Domain-specific_language](http://en.wikipedia.org/wiki/Domain-specific_language) ---这就是你想要做的
*   [http://www.boost.org/doc/libs/1_53_0/libs/spirit/doc/html/index.html](http://www.boost.org/doc/libs/1_53_0/libs/spirit/doc/html/index.html) ---可以帮助你的工具

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T09:58:31.167

您可以使用 Qt 库和[QMetaObject::invokeMethod](http://qt-project.org/doc/qt-4.8/qmetaobject.html#invokeMethod)

```
QMetaObject::invokeMethod( pObject, "myFunction" ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T09:59:10.920

当函数从某个 DLL 文件中导出时，您可以执行此操作。

```
void (*myFunction)();
HMODULE library = LoadLibrary("LIBRARY.DLL");

myFunction = GetProcAddress(library, "myFunction");

myFunction();

FreeLibrary(library); 
```

但这并不是你想要的。因为您不了解 C++ 的内部结构。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-04T10:00:59.633

不，因为 C++ 是一种静态编译语言，所以这不可能直接实现。函数和变量名称（通常）在编译期间丢失。正如大卫建议的那样，除了使用共享库/DLL之外，您还可以使用 a`std::map`并将您的函数存储在其中，例如（未经测试）：

```
#include <functional>
#include <iostream>
#include <unordered_map> // or just <map>

void myFunction() {
    std::cout << "in myFunction\n";
}

void anotherFunction() {
     std::cout << "in anotherFunction\n";
 }

 int main() {
    std::unordered_map<std::function<void()>> functions; // or just std::map

    // Store the functions
    functions["myFunction"] = &myFunction;
    functions["anotherFunction"] = &anotherFunction;

    // Call myFunction
    functions["myFunction"](); // Prints "in myFunction".
 } 
```

正如 c.fogelklou 已经说过的，函数必须具有兼容的原型；通过字符串传递参数甚至需要编写解析器。

另请参阅[std::unordered_map](http://en.cppreference.com/w/cpp/container/unordered_map)和[std::function](http://en.cppreference.com/w/cpp/utility/functional/function)的文档。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-04T10:14:42.213

你最好尝试 python、ruby 甚至 matlab 而不是 c++。

但是如果你坚持，你可以尝试将 LUA 集成到你的项目中。

它可以解决你的问题。

# java - 我可以访问另一个线程的 Vector 的静态 Arraylist 吗？在这个例子中？

> ID：15198600
> 
> 赞同：1
> 
> 时间：2013-03-04T09:47:44.573
> 
> 标签：java, vector, arraylist, static-members

从该线程中的另一个线程和类访问静态向量时遇到问题。一个类是名为 LotteryPlay 的 GUI 类，它有一个名为 packArray 的静态 Vector，另一个类是 MultiThreader，它的一部分如下所示，它在不同的线程中运行。关于什么是错的任何想法？

我唯一能想到的是我正在尝试从另一个线程访问静态向量。这可能吗？

```
 @Override
public void run() {
    try {       
        out = new PrintWriter(socket.getOutputStream(), true);   
        in = new BufferedReader(new InputStreamReader(socket.getInputStream()));

       System.out.println("streams are setup from new thread\n");

            line = "";

            while((line = in.readLine())!= null){

             this.messageFromClient(line);

            if(!(counter > 1)){
                textSplitter(line);
                socketPack = new SocketPack(socket, timeStamp, address);
                LotteryPlay.packArray.add(socketPack);   <<<----NULL POINTER EXCEPTION
                System.out.println("SIZE OF PACKARRAY " + LotteryPlay.packArray.size());
                System.out.println();
                System.out.println("pakc array "+ LotteryPlay.packArray);
            }

            System.out.println("from client: " + line.trim() + "\n");

            }  // end while loop 
```

java.lang.Thread.run(Thread.java:662) 处的线程“Thread-3”java.lang.NullPointerException at.com.lotterygame.MultiThreader.run(MultiThreader.java:55) 中的异常

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:14:49.153

你得到的事实`NullPointerException`表明这`LotteryPlay.packArray`是空的。在使用它之前，您需要确保它已被初始化。

如果您*真的*想将其保留为静态变量，我强烈建议您制作它`final`，例如

```
public static final Vector<SocketPack> packArray = new Vector<SocketPack>(); 
```

但是，我还建议您重新设计应用程序以避免需要静态变量。想想什么需要什么数据，并适当地传递它。静态变量使代码更难推理和测试。

此外，请注意，虽然每个操作`Vector`都是单独同步的，但这并不意味着它通常是线程安全的。例如，您不能在`Vector`没有额外同步的情况下安全地迭代 a，否则一个线程可能会在您迭代时修改它。您可能应该考虑`java.util.concurrent`.

# sql - 产品表上的 SQL 多重连接/求和

> ID：15198604
> 
> 赞同：1
> 
> 时间：2013-03-04T09:48:02.643
> 
> 标签：sql, join

我有下表包含来自连锁店组的产品销售数据。数据又大又丑，但我只能从商店里得到它。有关信息，该表目前拥有 2200 万条记录，每天大约增长 30 万条，并且这个增长率将按月以指数方式增长约 100%。

```
Store_Purchases(
[ID] [int] IDENTITY(1,1) NOT NULL,
[storecode] [int] NULL,
[dtDatum] [datetime] NULL,
[Barcode] [varchar](50) NULL,
[Desc] [varchar](100) NULL,
[qty] [int] NULL,
[amount] [money] NULL,
[TillslipID] [int] NULL) 
```

我需要从中提取的查询是根据某个日期范围内所有销售额的总和排名前 500 的产品。对于这些产品中的每一个，我需要显示条形码、描述、销售数量的总和、销售金额的总和，然后是产品所在的收款单数量，最后是所有产品的总和。

到目前为止，我已经设法提出以下建议。此查询在我的服务器上执行需要 2 分 20 秒，我认为“篮子总和”值不正确。我想知道是否有更好的方法在单个查询中，甚至在存储过程中执行此操作。

```
SELECT
  a.Barcode, 
  a.Desc, 
  SUM(b.amount) 'Basket SUM',
  COUNT(distinct b.TillslipID) 'Basket Count', 
  Sales.Count, 
  Sales.Amount 
FROM Store_Purchases b WITH (NOLOCK), 
Store_Purchases a WITH (NOLOCK), 
(
  SELECT
    top 500 Barcode,
    sum(qty) "Count", 
    SUM(amount) "Amount" 
  FROM Store_Purchases WITH (NOLOCK)
  WHERE (storecode = 30143)
  AND dtDatum BETWEEN '1-Feb-2013 00:00:00' AND '28-Feb-2013 23:59:59'
  GROUP BY Barcode
  ORDER BY SUM(amount) DESC
) AS Sales
WHERE (a.storecode = 30143)
AND a.dtDatum BETWEEN '1-Feb-2013 00:00:00' AND '28-Feb-2013 23:59:59'
AND a.Barcode = Sales.Barcode 
AND a.TillslipID = b.TillslipID 
AND a.storecode = b.storecode
AND b.dtDatum BETWEEN '1-Feb-2013 00:00:00' AND '28-Feb-2013 23:59:59'
GROUP BY a.Barcode, a.Desc, Sales.Count, Sales.Amount
ORDER BYSales.Count DESC 
```

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:59:44.943

```
select top 500 Barcode, [Desc], sum([Count]) as [Count], sum([Amount]) as Amount, sum(BasketSum) as [Basket Sum], count(TillslipID) as [Basket Count]
from (
    select Barcode, [Desc], TillslipID, [Count], [Amount], sum(Amount) over (partition by TillSlipID) as BasketSum
    from (
        select TillslipID, Barcode, [Desc], sum(qty) as [Count], sum(amount) as [Amount]
        FROM ez_Sparbuck_Products p
        WHERE (storecode = 30143) and dtDatum between '1-Feb-2013 00:00:00' and '28-Feb-2013 23:59:59'
        group by Barcode, [Desc], TillslipID, 
    ) t
) t
group by Barcode, [Desc] 
```

这假设条形码没有两个[Desc]，考虑到您要达到的结果，似乎就是这种情况。如果不是这种情况，可以将相同的查询更改为使用`partition by Barcode`and `distinct`。

对于您正在执行此操作的数据量，我认为您将希望您的聚集索引`dtDatum`在`storecode`.

# sql - mysql sum union 结果

> ID：15198608
> 
> 赞同：1
> 
> 时间：2013-03-04T09:48:18.383
> 
> 标签：sql, sum, union

请参见下面的示例。如果 id, A, B, D 与其他记录相同，则 union 和 sum 列 "C" 。

```
my data:
id A  B  C  D
---------------------------
1  1  2  3  4
2  aa bb 10 dd
3  1  2  3  4
4  1  2  3  4
2  aa bb 30 dd

how to do after like below result:
id A  B  C  D
---------------------------
1  1  2  3  4
2  aa bb 40 dd    <----if id,A,B,D are same with other records,then union and sum column "C"
3  1  2  3  4
4  1  2  3  4

I tried to union all records,but fail and show"
id A  B  C  D
---------------------------
2  aa bb 49 dd 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:50:58.480

只需像这样`GROUP BY ID, A, B, D`使用：`SUM(C)`

```
SELECT id, A,  B,  SUM(C) AS C,  D
FROM Tablename
GROUP BY ID, A, B, D; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/bdb54/1)

# claims-based-identity - 从 WPF 等桌面应用程序中使用 ThinkTecture IdentityServer 的最佳实践是什么？

> ID：15198612
> 
> 赞同：2
> 
> 时间：2013-03-04T09:48:25.827
> 
> 标签：claims-based-identity, federated-identity, thinktecture-ident-server

有谁知道一个示例应用程序，该示例应用程序展示了从 WPF 等桌面应用程序使用 ThinkTecture IdentityServer v2 的最佳实践？

使用 HttpClient 调用 AccountController 的登录操作是首选方式吗？

我正在尝试做这样的事情，但我得到的响应是 Web 应用程序将被重定向到以登录的 HTML 页面。

```
 private async Task LoginRequest(string username, string password)
    {
        HttpClient client = new HttpClient();
        client.DefaultRequestHeaders.Add("accept", "application/json");
        client.BaseAddress = new Uri(@"https://<server-name>/Idsrv-sample/");
        var loginData = new SignInModel { UserName = username, Password = password, IsSigninRequest = true };            
        var signinResponse = await client.PutAsJsonAsync("account/signin", loginData);
        var result = await signinResponse.Content.ReadAsStringAsync();
        MessageBox.Show(result);  // The IdentityServer login page
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T10:18:12.673

不确定“最佳实践”是什么意思 - 但 IdentityServer 支持 OAuth2 为您的后端获取授权令牌：

[http://leastprivilege.com/2012/11/01/oauth2-in-thinktecture-identityserver-v2-resource-owner-password-flow/](http://leastprivilege.com/2012/11/01/oauth2-in-thinktecture-identityserver-v2-resource-owner-password-flow/)

另见此处： [https ://github.com/thinktecture/Thinktecture.IdentityServer.v2/wiki](https://github.com/thinktecture/Thinktecture.IdentityServer.v2/wiki)

# c# - 尽管设置了 ApartmentState，但出现跨线程错误

> ID：15198614
> 
> 赞同：0
> 
> 时间：2013-03-04T09:48:40.890
> 
> 标签：c#, multithreading

我正在尝试向我的 UI 显示循环的内容。首先，我不确定我是否以正确的方式（使用 WinForms）来解决这个问题，但这就是我正在做的事情：

```
foreach (string item in stringArray)
{
        Thread thread = new Thread(delegate()
                              {
                                  UpdatedResultEvent(item);
                              });
        thread.SetApartmentState(ApartmentState.STA);
        thread.Start();
} 
```

我希望这是足够的信息，但如果不是，那么我将在这里更详细地介绍。

我有 2 个类，我的 Program.cs (WinForm) 和另一个名为 logicClass 的类。我将我的 Program 对象的一个​​实例传递给我的 logicClass。我的 logicClass 有一个委托，其签名与我的 Program 类中的方法匹配。作为委托传递的方法是

```
public void UpdateResultsOnScreen(string newContent)
{
txtResults.Text += newContent;
} 
```

错误信息是

> 跨线程操作无效：控件从创建它的线程以外的线程访问

**编辑**

目标是，类似于进度条的工作方式，是看到控件实时更新。目前，即使它确实有效，线程也不会在线程完成之前将“结果”返回到屏幕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:01:39.900

使用这个（如果你在 WinForms 上）：

```
public void UpdateResultsOnScreen(string newContent)
{
    txtResults.BeginInvoke(
        new Action<string>((value) =>
        {
            txtResults.Text += value;
        }),
        newContent);
} 
```

也正如**animaonline**所说，考虑使用`ThreadPool`or `Parallel.ForEach`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T09:50:27.293

即使您正在设置 ApartmentState，当从另一个（非 UI）线程访问时，也必须调用 UI 控件。

确保在 UpdateResultEvent 方法中调用 UI 控件。

无论如何，您所做的不是一个好主意，请考虑使用[ThreadPool](http://msdn.microsoft.com/en-us/library/system.threading.threadpool.aspx)或[Parallel.ForEach](http://msdn.microsoft.com/en-us/library/system.threading.tasks.parallel.aspx)

它会自动扩展你的代码，产生一堆线程确实会降低性能，特别是如果你的集合中有很多项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T10:05:21.457

这个怎么做？？

```
 public void UpdateResultsOnScreen(string newContent)
    {
        if(txtResults.InvokeRequired)
        {
            txtResults.Invoke(
                new Action<string>(content => txtResults.Text += content), newContent);
            return;
        }
        txtResults.Text += newContent;
    } 
```

# windows-phone-7 - 将 Windows 7 应用程序部署到模拟器时出错

> ID：15198616
> 
> 赞同：0
> 
> 时间：2013-03-04T09:48:49.407
> 
> 标签：windows-phone-7, cordova, phonegap-build

我用 jquery mobile 开发了一个应用程序，并用 phonegap build 编译它。但是当我尝试将它安装到 Windows 7 模拟器时，我得到了一个错误，比如

错误 - 应用程序安装失败。发生运行时错误。修复 WMAppmanifest.xml 文件中的功能。

这是我的 WMAppManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<Deployment xmlns="http://schemas.microsoft.com/windowsphone/2009/deployment" AppPlatformVersion="7.1">
  <App xmlns="" ProductID="{80a42ce2-0c9f-39d1-a273-bb2e5bdbe855}" Title="PG Build App" 
       RuntimeType="Silverlight" Version="0.0.1.0" Genre="apps.normal"  
       Author="xxxxxx@gmail.com" 
       Description="" 
       Publisher="xxxxxx@gmail.com">

    <IconPath IsRelative="true" IsResource="false">ApplicationIcon.png</IconPath>
    <Capabilities>
      <Capability Name="ID_CAP_CONTACTS" />
      <Capability Name="ID_CAP_IDENTITY_DEVICE" />
      <Capability Name="ID_CAP_ISV_CAMERA" />
      <Capability Name="ID_CAP_LOCATION" />
      <Capability Name="ID_CAP_MICROPHONE" />
      <Capability Name="ID_CAP_NETWORKING" />
      <Capability Name="ID_HW_FRONTCAMERA" />
      <Capability Name="ID_CAP_WEBBROWSERCOMPONENT" />
    </Capabilities>

    <Tasks>
      <DefaultTask Name="_default" NavigationPage="MainPage.xaml" />
    </Tasks>
    <Tokens>
      <PrimaryToken TokenID="Cordova_1._5._0_Starter1Token" TaskName="_default">
        <TemplateType5>
          <BackgroundImageURI IsRelative="true" IsResource="false">Background.png</BackgroundImageURI>
          <Count>0</Count>
          <Title>Cordova_1._5._0_Starter1</Title>
        </TemplateType5>
      </PrimaryToken>
    </Tokens>
  </App>
</Deployment>

<!-- WPSDK Version 7.1.7720.0 --> 
```

我需要在这里添加哪些功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:58:11.270

检查 Windows Phone 功能检测工具： http: [//msdn.microsoft.com/en-us/library/gg180730 (v=VS.92).aspx](http://msdn.microsoft.com/en-us/library/gg180730(v=VS.92).aspx)

您可以运行它来确定 DLL 或 Xap 文件的功能。

编辑：

这是创建项目时的默认功能：

```
 <Capabilities>
  <Capability Name="ID_CAP_GAMERSERVICES"/>
  <Capability Name="ID_CAP_IDENTITY_DEVICE"/>
  <Capability Name="ID_CAP_IDENTITY_USER"/>
  <Capability Name="ID_CAP_LOCATION"/>
  <Capability Name="ID_CAP_MEDIALIB"/>
  <Capability Name="ID_CAP_MICROPHONE"/>
  <Capability Name="ID_CAP_NETWORKING"/>
  <Capability Name="ID_CAP_PHONEDIALER"/>
  <Capability Name="ID_CAP_PUSH_NOTIFICATION"/>
  <Capability Name="ID_CAP_SENSORS"/>
  <Capability Name="ID_CAP_WEBBROWSERCOMPONENT"/>
  <Capability Name="ID_CAP_ISV_CAMERA"/>
  <Capability Name="ID_CAP_CONTACTS"/>
  <Capability Name="ID_CAP_APPOINTMENTS"/>
</Capabilities> 
```

# php - 使用 PHP、simplexml_load_file 和 Xpath 从 XML 文件返回唯一值

> ID：15198621
> 
> 赞同：2
> 
> 时间：2013-03-04T09:49:07.680
> 
> 标签：php, xpath, simplexml

提前感谢您的帮助。我已经通过这个论坛和 www 寻找答案，但找不到一个直截了当的答案。

我只是试图从仅提取属性的唯一值的 XML 文件中返回结果。

**XML 示例文件：**

```
<?xml version="1.0" encoding="ISO-8859-1" ?>
<computers>
    <restults>
   <computer id="1" group_id="a" model_group="acer" name="Acer 1 GB" />
   <computer id="2" group_id="a" model_group="acer" name="Acer 2 GB" />
   <computer id="3" group_id="b" model_group="acer" name="Acer 3 GB" />
   <computer id="4" group_id="c" model_group="acer" name="Acer 4 GB"/>
   <computer id="5" group_id="c" model_group="acer" name="Acer 6 GB" />
   <computer id="6" group_id="d" model_group="acer" name="Acer 8 GB" />
   <computer id="7" group_id="d" model_group="acer" name="Acer 16 GB" />
   <computer id="8" group_id="d" model_group="acer" name="Acer 32 GB" />
   <computer id="9" group_id="e" model_group="acer" name="Acer 48 GB" />
    </restults>
</computers> 
```

我想要的是让 php 脚本通过 XML 文件运行，并且只向我展示唯一的`"group_id" values. ie: a,b,c,d,e`

而已。

我查看了本网站和其他网站上提供的各种解决方案，但它们都没有奏效。

我确实阅读了有关 Xpath 函数和 distinct-values 函数的信息，但我找不到一种方法来识别我正在运行的 Xpath 版本？我知道这个功能只在 Xpath 2.0 中可用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:02:37.997

仅使用 XPath 1.0 我知道的唯一解决方案是检查所有以前的节点是否具有相同的值，如果发现则排除该节点。

```
<?php
$e = new SimpleXMLElement(data());
foreach( $e->xpath('/computers/restults/computer[not(@group_id=preceding-sibling::computer/@group_id)]/@group_id') as $n ) {
    echo $n, "\n";
}

function data() {
    return <<< eox
<computers>
    <restults>
        <computer id="1" group_id="a" model_group="acer" name="Acer 1 GB" />
        <computer id="2" group_id="a" model_group="acer" name="Acer 2 GB" />
        <computer id="3" group_id="b" model_group="acer" name="Acer 3 GB" />
        <computer id="4" group_id="c" model_group="acer" name="Acer 4 GB"/>
        <computer id="5" group_id="c" model_group="acer" name="Acer 6 GB" />
        <computer id="6" group_id="d" model_group="acer" name="Acer 8 GB" />
        <computer id="7" group_id="d" model_group="acer" name="Acer 16 GB" />
        <computer id="8" group_id="d" model_group="acer" name="Acer 32 GB" />
        <computer id="9" group_id="e" model_group="acer" name="Acer 48 GB" />
    </restults>
</computers>
eox;
} 
```

当使用 XSLT < 2.0 时，有一种称为[Muenchian 分组](https://en.wikipedia.org/wiki/Muenchian_grouping)的方法在这里可能会有所帮助。

我还没有针对大型数据集测试这两种方法。它们可能相当耗费时间/内存....

# android - Android：变压器平板电脑键盘注册两个 Enter 键输入

> ID：15198623
> 
> 赞同：1
> 
> 时间：2013-03-04T09:49:18.727
> 
> 标签：android, android-hardware

我正在 MainActivity 中执行快速日志语句，并在 ASUS Transformer 平板电脑物理键盘上按下物理 Enter 键时记录两次 Enter 键按下。钥匙没有被按住。

`public boolean dispatchKeyEvent(KeyEvent event)`是发生这种情况时调用的方法，每次调用两次。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:52:10.127

一个是为了`onKeyDown`，一个是为了`OnKeyUp`。所以每个动作都会有两个调用。正如您提到的，密钥没有被保留，因此它会记录两次

# php - Facebook：在一张地图上打开图表签到

> ID：15198626
> 
> 赞同：2
> 
> 时间：2013-03-04T09:49:22.233
> 
> 标签：php, facebook, facebook-opengraph, checkin

我的应用程序中有`Open Graph`功能。我必须`check-ins`在我的 Facebook 帐户中保留总数。并且必须在一张地图上显示所有签到的地方。`Foursquare`应用程序在他们的应用程序中使用了这个。但我不知道，如何实现这样的。

他们在聚合中使用了两种显示方式，第一种是，

![在此处输入图像描述](../Images/2b159e73a64107b3c599eec8ff0a6f6d.png)

第二个是，

![在此处输入图像描述](../Images/a5509b9c58a2a714aedf89fff4f7236f.png)

所以，我必须像 Foursquare 应用程序那样做两者。请帮助我。

提前致谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T05:01:34.490

他们最有可能使用地图自定义聚合功能。在此处查看文档：[https](https://developers.facebook.com/docs/opengraph/guides/collections/#styles) ://developers.facebook.com/docs/opengraph/guides/collections/#styles 。您需要将位置数据附加到您的操作中才能使此聚合起作用。[您可以在https://developers.facebook.com/docs/opengraph/guides/tagging/#places](https://developers.facebook.com/docs/opengraph/guides/tagging/#places)了解有关 Place 属性的更多信息

# c# - 更改网页内容

> ID：15198629
> 
> 赞同：0
> 
> 时间：2013-03-04T09:49:34.533
> 
> 标签：c#, browser, webpage, dom

我有一个包含一些内容和一个按钮的网页`Save`。通过我的 C# 代码，我想更改网页的内容，然后单击保存按钮。这是我的代码。

```
string replace = webBrowser1.DocumentText.Replace("2013.0.0.1", "2013.0.0.2");
webBrowser1.DocumentText = replace;

links = webBrowser1.Document.GetElementsByTagName("input");
foreach (HtmlElement link in links)
{
    if ((link.GetAttribute("Name") == "Save"))
    {
        if (link.GetAttribute("type").Equals("submit"))
        {
            link.InvokeMember("click");
            break;
        }
    }
} 
```

单击保存时，我的网站不保存任何内容。单击“保存”按钮后，它甚至没有导航到它应该导航到的页面。

我注意到一件奇怪的事情。当我删除前 3 行以替换文本然后手动更改内容时，一切正常。网页保存内容并导航到适当的位置。

有什么想法可以解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:35:52.833

最终我明白了。我意识到我的方法不正确。我从中获取了所有文本`HTML`，然后尝试替换其中的文本。后来我注意到文本出现在`textarea`. 所以我获取了那个 textarea 的文本，然后替换了文本。然后击球`Save`工作正常。这是我的代码：

```
HtmlElementCollection links = webBrowser1.Document.GetElementsByTagName("A");

links = webBrowser1.Document.GetElementsByTagName("textarea");
foreach (HtmlElement link in links)
{
    if ((link.GetAttribute("Name") == "text"))
    {
        string attribute = link.InnerText;
        string replace = attribute.Replace(@"Hello World", @"Helo World!!!");
        link.InnerText = replace;
        break;
    }
}

links = webBrowser1.Document.GetElementsByTagName("input");
foreach (HtmlElement link in links)
{
    if ((link.GetAttribute("Name") == "Save"))
    {
        if (link.GetAttribute("type").Equals("submit"))
        {
            link.InvokeMember("click");
            break;
        }
    }
} 
```

希望能帮助到你。

# scala - 扩展用户定义的高级类型

> ID：15198637
> 
> 赞同：1
> 
> 时间：2013-03-04T09:49:54.590
> 
> 标签：scala, implicit-conversion, higher-kinded-types, companion-object

我在 scala 中有一个更高种类的用户定义别名：

```
type FutureOfLastError = Future[LastError] 
```

我也有这种类型的值：

```
val myFuture: FutureOfLastError = ... 
```

要编写可读的代码，我想定义（例如）一个方法，如

```
def mapToString = { ... } 
```

它将 FutureOfLastError 的实例映射到 Future[String] 并将其称为

```
myFuture mapToString 
```

我怎样才能做到这一点？甚至可能吗？我已经尝试过封装在一个案例类中，我想到了各种隐式转换。

我最喜欢的选择是类型别名上的伴生对象，但我无法让它工作，因为我无法从伴生对象调用特征 Future 的方法（如 map 等）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:56:05.350

您不需要实际扩展类，只需使用隐式类（这只是“丰富我的库”模式的语法糖）。像这样简单的事情应该做到这一点：

```
implicit class MyFutureOps( future: FutureOfLastError ) {
  def mapToString = future.map(_.toString)
} 
```

# java - JPA：比较（> =）查询中的序数枚举

> ID：15198642
> 
> 赞同：2
> 
> 时间：2013-03-04T09:50:20.883
> 
> 标签：java, hibernate, jpa-2.0

我有一个分配给每个项目的 int 值的枚举。

```
 public enum RankEnum {
            NO_RANK(0),
            FIRST_RANK(1),
            ...,
            LAST_RANK(7);

            private int rank;

            RankEnum(int rank) { this.rank = rank; }

            public int getRank() { return this.rank; }
    } 
```

整数值的目的是为了更容易地比较不同的元素，关于它们的等级（例如 e1.rank < e2.rank2）。所以我将它们映射到我的实体中，如下所示：

```
 @Column(...)
    @Enumerated(EnumType.ORDINAL)
    private RankEnum rank; 
```

不幸的是，当我尝试创建查询以查找例如排名高于另一个实体 x 的所有实体时，结果不正确。

```
 Select entity FROM Entity entity WHERE entity.rank > :rank 
```

:rank 绑定到 x.getRank();

所以问题是：在这种情况下，jpa 实际比较的是什么？由于映射是有序的，我认为这应该可以工作，因为值存储为整数。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:37:57.657

枚举的序号与您分配给枚举的每个实例的等级无关。每个枚举都有一个序数。第一个声明的序号从 0 开始，然后是 1，然后是 2，依此类推：

```
public enum Season {
    WINTER, // ordinal = 0
    SPRING, // ordinal = 1
    SUMMER, // ordinal = 2
    AUTUMN; // ordinal = 3
} 
```

枚举可以通过它们的序数自动进行比较。所以`Season.WINTER.compareTo(Season.SPRING) < 0`。

# php - 从php执行windows应用程序？

> ID：15198643
> 
> 赞同：1
> 
> 时间：2013-03-04T09:50:21.157
> 
> 标签：php, windows, iis

我正在尝试打印由我的 PHP 脚本呈现的图像。为此，我尝试使用 Irfanview（/print 选项）。

我遇到了麻烦，因为从脚本执行和编程存在安全问题。我已经尝试将 IUSR 添加到 exe 的用户名中，但我得到了沉默。我正在使用以下内容：

```
pclose(popen('start /B .\i_view32.exe .\test.txt /print > res.txt 2> err.log', 'r')); 
```

和

```
exec('.\i_view32.exe .\test.txt /print'); 
```

有谁知道这是否可能？似乎曾经有一种可以禁用的安全模式，但我使用的是 PHP 5.4，现在已将其删除。网上有很多关于这个的帖子，但它们似乎都已经过时了。

# android - 解析 Json 字符串时出错无法转换为对象

> ID：15198647
> 
> 赞同：-4
> 
> 时间：2013-03-04T09:50:29.763
> 
> 标签：android, json, web-services, parsing

我从[http://androidhive.com](http://androidhive.com)做了一个名为 android login 和 resgitration 的项目。当我运行我的项目时，它会更新我的本地服务器。但是应用程序崩溃并在 logcat 中出现以下错误

```
..03-04 09:40:47.284: E/JSON(22069): nnnnnInside config{"tag":"register","success":1,"error":0,"uid":"51346c28f08575.36974266","user":{"name":"sdfds","email":"sfsd@gmail.com","created_at":"2013-03-04 01:40:56","updated_at":null}}n
03-04 09:40:47.306: E/JSON Parser(22069): Error parsing data org.json.JSONException: Value nnnnnInside of type java.lang.String cannot be converted to JSONObject
03-04 09:40:47.387: E/AndroidRuntime(22069): FATAL EXCEPTION: main
03-04 09:40:47.387: E/AndroidRuntime(22069): java.lang.NullPointerException
03-04 09:40:47.387: E/AndroidRuntime(22069):    at com.androidhive.httprequests.RegisterActivity$1.onClick(RegisterActivity.java:60)
03-04 09:40:47.387: E/AndroidRuntime(22069):    at android.view.View.performClick(View.java:4202)
03-04 09:40:47.387: E/AndroidRuntime(22069):    at android.view.View$PerformClick.run(View.java:17340)
03-04 09:40:47.387: E/AndroidRuntime(22069):    at android.os.Handler.handleCallback(Handler.java:725)
03-04 09:40:47.387: E/AndroidRuntime(22069):    at android.os.Handler.dispatchMessage(Handler.java:92)
03-04 09:40:47.387: E/AndroidRuntime(22069):    at android.os.Looper.loop(Looper.java:137)
03-04 09:40:47.387: E/AndroidRuntime(22069):    at android.app.ActivityThread.main(ActivityThread.java:5039)
03-04 09:40:47.387: E/AndroidRuntime(22069):    at java.lang.reflect.Method.invokeNative(Native Method)
03-04 09:40:47.387: E/AndroidRuntime(22069):    at java.lang.reflect.Method.invoke(Method.java:511)
03-04 09:40:47.387: E/AndroidRuntime(22069):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-04 09:40:47.387: E/AndroidRuntime(22069):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-04 09:40:47.387: E/AndroidRuntime(22069):    at dalvik.system.NativeStart.main(Native Method) 
```

我的json代码是

```
 enter code herepackage com.example.androidhive.library;
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;
import java.util.List; 
import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.protocol.HTTP;
import org.json.JSONException;
import org.json.JSONObject;

import android.content.Context;
import android.util.Log;
import android.widget.Toast;

public class JSONParser {
  Context context;
    static InputStream is = null;
    static JSONObject jObj = null;
    static String json = "";

    // constructor
    public JSONParser() {

    }

    public JSONObject getJSONFromUrl(String url, List<NameValuePair> params) {

        // Making HTTP request
        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);
            httpPost.setEntity(new UrlEncodedFormEntity(params,HTTP.UTF_8));

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "UTF-8"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "n");
            }
            is.close();
            json = sb.toString();
            Log.e("JSON", json);
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object
        try {
            jObj = new JSONObject(json);
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }

        // return JSON String
        return jObj;

    }`enter code here`
} 
```

我阅读了堆栈溢出中的所有答案，无法得到任何东西..请帮助我提前感谢

```
 package com.androidhive.httprequests;

import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

import com.example.androidhive.library.DatabaseHandler;
import com.example.androidhive.library.UserFunctions;
import com.example.androidhive.library.JSONParser;
public class RegisterActivity extends Activity {
    Button btnRegister;
    Button btnLinkToLogin;
    EditText inputFullName;
    EditText inputEmail;
    EditText inputPassword;
    TextView registerErrorMsg;

    // JSON Response node names
    private static String KEY_SUCCESS = "success";
    private static String KEY_ERROR = "error";
    private static String KEY_ERROR_MSG = "error_msg";
    private static String KEY_UID = "uid";
    private static String KEY_NAME = "name";
    private static String KEY_EMAIL = "email";
    private static String KEY_CREATED_AT = "created_at";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.register);

        // Importing all assets like buttons, text fields
        inputFullName = (EditText) findViewById(R.id.registerName);
        inputEmail = (EditText) findViewById(R.id.registerEmail);
        inputPassword = (EditText) findViewById(R.id.registerPassword);
        btnRegister = (Button) findViewById(R.id.btnRegister);
        btnLinkToLogin = (Button) findViewById(R.id.btnLinkToLoginScreen);
        registerErrorMsg = (TextView) findViewById(R.id.register_error);

        // Register Button Click event
        btnRegister.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                //Toast.makeText(getBaseContext(), "Inside btnregister", Toast.LENGTH_SHORT).show();
                String name = inputFullName.getText().toString();
                String email = inputEmail.getText().toString();
                String password = inputPassword.getText().toString();
                UserFunctions userFunction = new UserFunctions();
                JSONObject json = userFunction.registerUser(name, email, password);

                // check for login response
                try {
                    if (json.getString(KEY_SUCCESS) != null) {
                        registerErrorMsg.setText("");
                        String res = json.getString(KEY_SUCCESS);
                        if(Integer.parseInt(res) == 1){
                            // user successfully registred
                            // Store user details in SQLite Database
                            DatabaseHandler db = new DatabaseHandler(getApplicationContext());
                            JSONObject json_user = json.getJSONObject("user");

                            // Clear all previous data in database
                            userFunction.logoutUser(getApplicationContext());
                            db.addUser(json_user.getString(KEY_NAME), json_user.getString(KEY_EMAIL), json.getString(KEY_UID), json_user.getString(KEY_CREATED_AT));
                            // Launch Dashboard Screen
                            Intent dashboard = new Intent(getApplicationContext(), DashboardActivity.class);
                            // Close all views before launching Dashboard
                            dashboard.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                            startActivity(dashboard);
                            // Close Registration Screen
                            finish();
                        }else{
                            // Error in registration
                            registerErrorMsg.setText("Error occured in registration");
                        }
                    }
                } catch (JSONException e) {
                    e.printStackTrace();
                }
            }
        });

        // Link to Login Screen
        btnLinkToLogin.setOnClickListener(new View.OnClickListener() {

            public void onClick(View view) {
                Intent i = new Intent(getApplicationContext(),
                        Login.class);
                startActivity(i);
                // Close Registration View
                finish();
            }
        });
    }
} 
```

这是我的注册活动

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:00:38.453

因为您的 Json String 对于转换为`JsonObject`. 您需要先使用 String 函数，使其成为有效的 json String，然后将其转换为 JSONObject，如下所示：

```
// your code here..
is.close();
json = sb.toString();
String str_json = json.replace("nnnnnInside config{", "");
String final_json=str_json.replace("}}n", "}}");
Log.e("JSON", json);

/// now convert final_json to json object 
jObj = new JSONObject(final_json); 
```

# java - 一个组合框无法将其所有项目添加到 MS Access 数据库中

> ID：15198650
> 
> 赞同：0
> 
> 时间：2013-03-04T09:50:40.300
> 
> 标签：java, ms-access-2010

```
>  [i want to add all combobox items in MSAccess database] 
```

我想这样做我想将一个组合框的每个项目添加到 MSAccess 数据库中，例如我想做
我的组合有 4 个字段一、二、三、四，而数据库有四个字段 route1、route2、route3、route4.. .我想设置为 route1=one, route2= two....等。

```
if(e.getSource()==btn_save)
{
    try{

         Connection con;

         DriverManager.registerDriver(new sun.jdbc.odbc.JdbcOdbcDriver());

         Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");

         con = DriverManager.getConnection("jdbc:odbc:dsnproj","","");

         Statement s1 = con.createStatement();

         String q1="insert dest,route1,route2,route3,route4 into trans_dest values(
                    '"+cmb_dest.getSelectedItem()+"',
                    '"+cmb_route.getItem(1)+"',
                    '"+cmb_route.getItem(2)+"',
                    '"+cmb_route.getItem(3)+"',
                    '"+cmb_route.getItem(4)+"')";

         s1.execute(q1);

         }

         catch(Exception ae)
         {
             System.out.println(ae);
         }
    }
} 
```

[我收到错误] java.lang.ArrayIndexOutOfBoundsException: 4 >= 4

# android - 可扩展的列表视图项目高度，里面有另一个列表视图

> ID：15198652
> 
> 赞同：2
> 
> 时间：2013-03-04T09:50:50.400
> 
> 标签：android, listview, height, expandable

我有一个 ExpandableListView，每个组都有一个孩子。每个孩子都是另一个具有不同行数的 ListView。展开状态下的 ExpandableListView 项目高度存在问题，它没有包裹到子 ListView 内容。我只能在子列表视图布局中设置一个具体的高度值。但我想让 ExpandableListView 自动包装每个孩子。可能吗？

`getChildView(`) 来自我的`ExpandableListAdapter`：

```
public View getChildView(int groupPosition, int childPosition, boolean isLastChild, View convertView, ViewGroup parent) {
    if( convertView == null ) {
        LayoutInflater inflater = (LayoutInflater) getContext().getSystemService( Context.LAYOUT_INFLATER_SERVICE );
        convertView = inflater.inflate( R.layout.anit_object_data, parent, false );
    }
    ListView lv = (ListView)convertView.findViewById( R.id.listData );
    List<ListData> valuesList = getItems().get(groupPosition).getListData( getContext() );
    ListDataAdapter adapter = new ListDataAdapter( getContext(), android.R.layout.simple_list_item_1, valuesList );
    lv.setAdapter(adapter);

    return convertView;
} 
```

子 ListView 的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <LinearLayout
        android:id = "@+id/listHolder"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_marginBottom="10dp"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="40dp"
        android:layout_marginTop="10dp"
        android:layout_weight="1"
        android:orientation="horizontal" >

        <ListView
            android:id="@+id/listData"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:clickable="true"
            android:scrollbars="none" >
        </ListView>

    </LinearLayout>

</LinearLayout> 
```

我试图在适配器的 getChildView() 中测量子 ListView 的高度，但 ExpandableListView 展开的项目高度仍然不正确。

```
public View getChildView(int groupPosition, int childPosition, boolean isLastChild, View convertView, ViewGroup parent) {
    if( convertView == null ) {
        LayoutInflater inflater = (LayoutInflater) getContext().getSystemService( Context.LAYOUT_INFLATER_SERVICE );
        convertView = inflater.inflate( R.layout.anit_object_data, parent, false );
    }
    ListView lv = (ListView)convertView.findViewById( R.id.listData );
    List<ListData> valuesList = getItems().get(groupPosition).getListData( getContext() );
    ListDataAdapter adapter = new ListDataAdapter( getContext(), android.R.layout.simple_list_item_1, valuesList );
    lv.setAdapter(adapter);

    lv.measure( MeasureSpec.EXACTLY, MeasureSpec.UNSPECIFIED );
    convertView.getLayoutParams().height = lv.getMeasuredHeight();

    return convertView;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T15:05:43.053

好吧，我试过你的想法，组子视图是一个列表视图。但结果并不好。因为 childview(listview) 的高度很难测量。所以我按照正常方式更改了解决方案：child view 只是一个类似于 listview 项目的项目。这样我们也重写了 getChildView() 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-12T16:06:51.113

您`t need a listview inside the expandablelist, it`无法控制孩子职位的膨胀，您所要做的就是通过其他列表并获得孩子职位

# regex - 将 a*b**N 替换为 a*pow(b,N)

> ID：15198655
> 
> 赞同：2
> 
> 时间：2013-03-04T09:50:54.750
> 
> 标签：regex, vim

我有一个非常大的表达式，它表达了`**`运算符的功能，需要将其转换为使用该`pow`函数的代码。也就是说，我寻找一个正则表达式来查找和替换诸如`a*b**N*d`by之类的术语`a*pow(b,N)`，其中`N`是一个整数。

这里, `a`, `b`, 和`c`是可能包含`xy*-+()`和 整数的项，并且`a*`,`*d`可能不存在。

我不知何故陷入了逃避所有这些角色的困境。我准备投入一些手动后处理，所以正则表达式应该是健壮的，但不一定是完美的。

编辑：正如 Kent 指出的那样，`b`包含嵌套括号时存在困难。就我而言，没有嵌套括号。这些条款都是下面评论中给出的形式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:59:35.007

如果我理解正确，您可以尝试使用正则表达式分组来隔离要提取的类别：

所以这是正则表达式：

`(a\*)(b)\*{2}(N)\*d`

您可以像这样提取组：

```
\1pow(\2,\3) 
```

参考组是：

```
\1 = (a\*)
\2 = (b)
\3 = (N) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T09:59:35.893

你可以试试这个

正则表达式：`(\([0-9xy*-]+\)|[0-9xy]+)\*\*([0-9]+)`

替换为：`pow($1,$2)`或`pow(\1,\2)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T10:20:56.683

似乎这个问题一般不能通过正则表达式来解决，因为你需要以某种方式平衡括号——这是解析器的任务。

像这样的东西可以完成没有括号的工作： `%s/\(x\|y\|\d\+\)\*\*\(\d\+\)/pow(\1,\2)/gc`.

像这样，如果可能只有一对括号围绕该术语： `%s/\(([xy0-9+-\* ]\+)\|x\|y\|\d\+\)\*\*\(\d\+\)/pow(\1,\2)/gc`

顺便说一句，它让我想起了[这个](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)问题 =)

# mysql - 重复显示的记录

> ID：15198661
> 
> 赞同：0
> 
> 时间：2013-03-04T09:51:12.437
> 
> 标签：mysql, inner-join

我有 1 个查询来借助内部连接从三个表中获取记录。

```
table name

tbl_emp as emp
tbl_sal as sal
tbl_address as addr

fields from 3 tables

Schema:

tbl_emp - empid,name,comp_id
tbl_sal - empid - emp_type
tbl_address - emp_type 
```

询问

```
SELECT emp.empid, emp.name, sal.salary, addr.address 
from tbl_emp as emp 
INNER JOIN tbl_sal as sal 
  ON emp.empid = sal.empid 
INNER JOIN tbl_address as addr 
  ON addr.emp_type = sal.emp_type 
where comp_id = '114'; 
```

结果显示：

```
1 abc 1000 test
1 abc 1000 test
1 abc 1000 test
1 abc 1000 test
1 abc 1000 test
2 xyz 2500 main
2 xyz 2500 main
2 xyz 2500 main
2 xyz 2500 main
2 xyz 2500 main 
```

我想要这样的结果：

```
1 abc 1000 test
2 xyz 2500 main 
```

请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T09:54:37.783

根据您的示例数据，您应该能够使用`DISTINCT`：

```
SELECT DISTINCT emp.empid, 
  emp.name,
  sal.salary,
  addr.address 
from tbl_emp as emp 
INNER JOIN tbl_sal as sal 
  ON emp.empid = sal.empid 
INNER JOIN tbl_address as addr 
  ON addr.emp_type = sal.emp_type 
where comp_id = '114'; 
```

`DISTINCT`应用于所有数据列，并将删除任何重复项。您的有限样本将允许应用此方法。

您也可以使用`GROUP BY`来获取结果。如果您应用，我的建议是`GROUP BY`将其应用于`SELECT`列表中的每个项目：

```
SELECT emp.empid, 
  emp.name,
  sal.salary,
  addr.address 
from tbl_emp as emp 
INNER JOIN tbl_sal as sal 
  ON emp.empid = sal.empid 
INNER JOIN tbl_address as addr 
  ON addr.emp_type = sal.emp_type 
where comp_id = '114'
GROUP BY emp.empid, emp.name, sal.salary, addr.address; 
```

MySQL 使用一个扩展来`GROUP BY`允许选择列表中的项目是非聚合的并且不包含在`GROUP BY`子句中。然而，这可能会导致意外的结果，因为 MySQL 可以选择返回的值。（参见[MySQL 对 GROUP BY 的扩展](http://dev.mysql.com/doc/refman/5.0/en/group-by-extensions.html)）

来自 MySQL 文档：

> MySQL 扩展了 GROUP BY 的使用，以便选择列表可以引用未在 GROUP BY 子句中命名的非聚合列。...您可以使用此功能通过避免不必要的列排序和分组来获得更好的性能。但是，这主要在每个未在 GROUP BY 中命名的非聚合列中的所有值对于每个组都相同时很有用。服务器可以自由地从每个组中选择任何值，因此除非它们相同，否则选择的值是不确定的。此外，从每个组中选择值不会受到添加 ORDER BY 子句的影响。在选择了值之后对结果集进行排序，并且 ORDER BY 不会影响服务器选择的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T09:53:34.023

使用分组：

```
SELECT emp.empid,emp.name,sal.salary,addr.address from tbl_emp as emp INNER JOIN tbl_sal as sal ON emp.empid = sal.empid INNER JOIN tbl_address as addr ON addr.emp_type = sal.emp_type where comp_id = '114'
group by emp.empid,emp.name,sal.salary,addr.address 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T09:53:51.527

试试这个

```
SELECT  emp.empid,
        emp.name,
        sal.salary,
        addr.address 
FROM tbl_emp as emp 
INNER JOIN tbl_sal as sal 
    ON emp.empid = sal.empid 
INNER JOIN tbl_address as addr 
    ON addr.emp_type = sal.emp_type 
WHERE comp_id = '114'  
GROUP BY empid; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T09:55:03.090

DISTINCT 关键字会做你想做的事，它会确保过滤掉重复项

```
SELECT DISTINCT emp.empid,emp.name,sal.salary,addr.address from tbl_emp as emp INNER JOIN tbl_sal as sal ON emp.empid = sal.empid INNER JOIN tbl_address as addr ON addr.emp_type = sal.emp_type where comp_id = '114'; 
```

但是，如果您得到重复项，您可能希望确保您的查询确实按照您的想法执行，否则如果您的结果集中存在真正的重复项（而不是由您的查询创建的重复项），您可能会遇到使用 DISTINCT 的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T09:56:10.420

尝试`group by` `emp.empid`

```
SELECT emp.empid,emp.name,sal.salary,addr.address from tbl_emp as emp INNER JOIN tbl_sal as sal ON emp.empid = sal.empid INNER JOIN tbl_address as addr ON addr.emp_type = sal.emp_type where comp_id = '114'  group by emp.empid ; 
```

# sql - 带有 if 条件的 SQL 插入

> ID：15198666
> 
> 赞同：5
> 
> 时间：2013-03-04T09:51:28.757
> 
> 标签：sql, sql-server-2008-r2, modulo

我使用 SQL SERVER 2008 R2 我有表 LV 结构 ID（varchar）、名称（varchar）和项目（int）

```
ID  Name Item
1   xxx  5
2   yyy  9
3   rrr  11
4   hhh  19 
```

我想以相同的结构插入表 LV_TEMP 但条件是 Item > 9 然后我必须除以 9

预期的表 LV_TEMP

```
ID   Name Item
1    xxx  5
2    yyy  9
31   rrr  9
32   rrr  2
41   hhh  9
42   hhh  9
43   hhh  1 
```

我怎么能在 SQL 上做到这一点，我在 C# 上用 operator modulo(%) 9 做到了

提前谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T10:00:39.823

Modulo 的语法与 C# 中的语法相同：http: [//msdn.microsoft.com/en-us/library/ms190279.aspx](http://msdn.microsoft.com/en-us/library/ms190279.aspx)

您可以使用`CASE`表达式来处理条件：

```
INSERT INTO LV_TEMP
SELECT 
ID,
NAME,
Item = CASE WHEN Item > 9 THEN  Item % 9 ELSE ... END --Put your logic here
FROM .... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T12:23:51.253

带有 master..spt_values 系统表和[APPLY()](http://msdn.microsoft.com/en-us/library/ms175156%28v=sql.105%29.aspx)运算符的选项

```
IF OBJECT_ID('tempdb.dbo.#LV_TEMP') IS NOT NULL DROP TABLE dbo.#LV_TEMP
SELECT CASE WHEN t.Item > 9 THEN (t.ID * 10) + ROW_NUMBER() OVER(PARTITION BY ID ORDER BY (SELECT 1)) ELSE t.ID END AS ID,
       t.Name, 
       CASE WHEN o.Number != (t.Item / 9) THEN 9 ELSE Item % 9 END AS Item
INTO #LV_TEMP
FROM dbo.test21 t CROSS APPLY(
                              SELECT v.Number
                              FROM master..spt_values v
                              WHERE v.type = 'P' 
                                AND v.number < (CASE WHEN t.Item > 9 THEN (t.Item / 9) + 1 ELSE 1 END)
                              ) o

SELECT *
FROM #LV_TEMP 
```

结果：

```
ID  Name Item

1   xxx 5
2   yyy 9
31  rrr 9
32  rrr 2
41  hhh 9
42  hhh 9
43  hhh 1 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/4f5d3/2)上的演示[](http://sqlfiddle.com/#!3/4f5d3/2)

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T10:02:01.023

```
insert into LV_TEMP
     select ID, Name, (case when Item > 9 then Item / 9 else Item end) as Item
     from LV 
```**

# css - Firefox 中奇怪的背景图像行为 - 显示在本地，但不在线？

> ID：15198669
> 
> 赞同：1
> 
> 时间：2013-03-04T09:51:36.740
> 
> 标签：css, firefox, background-image

我有这个页面，我在正文上使用了背景图像。我是一名专业的网络开发人员，并且已经这样做了数千次，所以我绝不是初学者。

无论如何，背景图像会显示在 Safari 和 Chrome 中，以及在 Firefox 中进行本地测试时。一旦我上传页面并在线测试，它就不再显示在 Firefox 中（其他浏览器都很好）。

Firebug 告诉我图像加载得很好，并且路径是正确的。

有谁知道这可能是什么原因？我想我检查了所有可能的“罪魁祸首”，如前所述，Safari 和 Chrome 中的一切都很好，无论是本地还是在线。

您可以在此处查看该页面： [https ://ssl.director.dk/clients/pfmb/index.html](https://ssl.director.dk/clients/pfmb/index.html)

```
body {
    font-family: Helvetica, Arial, sans-serif;
    font-size: 14px;
    line-height: 1.5;
    color: #fff;
    margin: 0;
    padding: 0;
    background-image: url('../img/adbg.jpg');
    background-color: #000000;  
    background-position: top center;
    background-repeat: no-repeat;
    background-attachment: fixed;
    } 
```

请帮忙，因为这让我发疯。

干杯

汉斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:56:16.410

您`<body>`使用此属性进行渲染：`background="img/adbg.jpg"`

也许它正在覆盖您的 CSS。这可能是罪魁祸首吗？

# debugging - 为部署在 weblogic 上的独立 BI Publisher 10g 启用调试日志

> ID：15198671
> 
> 赞同：1
> 
> 时间：2013-03-04T09:51:37.660
> 
> 标签：debugging, logging, weblogic, business-intelligence, bi-publisher

如何为部署在 weblogic 上的独立 BI Publisher 10g 启用调试日志？

我尝试使用必要的语句创建 xdodebug.cfg 文件，并将其放在 JDK/jre/lib 文件夹下。我已将日志级别设置为在 bi 发布者中进行调试。但是我没有看到 xdo.log 文件。

此过程适用于 OAS，但不适用于 weblogic。任何人都知道如何使部署在 weblogic 上的 bip 10g 创建日志文件。

谢谢。

# c - 系统 + 睡眠 + 多线程 = SEGV / SIGILL

> ID：15198672
> 
> 赞同：3
> 
> 时间：2013-03-04T09:51:38.337
> 
> 标签：c, linux, linux-kernel, embedded-linux

我正在使用内核版本 2.6.10 和“普通”C。

关于我们的程序崩溃的原因，我已经缩小到两个线程。

**定时器线程**

```
void TimerThread(void)
{
    while (exec) {
        usleep(10000);

        RSLTCD r = SUCCESS;
        // r = LockMutex(Mtx);
        do {
              // some process
        } while(1);     
        // r = UnlockMutex(Mtx);
    }
    return ;        // Not Reached
} 
```

**系统线程**

```
void SystemThread(void)
{
    CreateThread(TimerThread, OALTHRD_DEFAULT_STACKSIZE, THREADPRI_NORMAL, 0, 0);
    for(;;){
        system("echo this is a SYSTEM CALL 1");
        system("echo this is a SYSTEM CALL 2");
    }    
} 
```

我已经删除了所有其余的代码，即使只运行这两个“简单”线程，程序也会在几个循环（50-100）后崩溃。我还读到 system() 使用 fork() 并且有时 fork()ing 和互斥锁会出现问题。所以我删除了互斥锁部分，但它仍然崩溃。

我尝试使用 fork()+execv() 组合和 posix_spawn() 制作自己的“系统调用”函数。两种情况的结果相同。

另外，我尝试过使用除 usleep 之外的其他睡眠功能。（nano_sleep 等）程序仍然崩溃

在多线程进程中使用 system() 和 usleep() 有问题吗？除了使用这些功能，我还有什么其他选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:06:28.280

基本上混合多线程和“fork()”并不容易，需要更多关于你的软件的细节来提供有用的帮助。请阅读[http://www.linuxprogrammingblog.com/threads-and-fork-think-twice-before-using-them](http://www.linuxprogrammingblog.com/threads-and-fork-think-twice-before-using-them)以了解混合线程和 fork() 时出现的问题。

# image-processing - 如何从图像中删除直线？

> ID：15198674
> 
> 赞同：0
> 
> 时间：2013-03-04T09:51:49.097
> 
> 标签：image-processing

我正在使用 Matlab 程序。

如何从黑白图像中删除直线？

示例图像如下：

![在此处输入图像描述](../Images/8d81ab502aa826b94103b643cf4eb871.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T14:46:46.123

我已经拿到结果了

这是我的代码。

```
RGBImg = imread('test.png');
    grayImg = rgb2gray(RGBImg);
Img = im2bw(grayImg);

Img = ~Img;
bwImgs = bwareaopen(Img,70);

se90 = strel('line', 2, 90);
se0 = strel('line', 2, 0);
borderImgs = double(imdilate(bwImgs, [se90 se0]));
%figure; imshow(borderImgs);

%remove border
%***************************************************************
[row col dim] = size(RGBImg);
rmBorderImgs = RGBImg;

for r=1:row
    for c=1:col
        if borderImgs(r,c) == 1
            rmBorderImgs(r,c,1) = 255;
            rmBorderImgs(r,c,2) = 255;
            rmBorderImgs(r,c,3) = 255;
        end
    end
end 
```

这是结果图像；

![在此处输入图像描述](../Images/c9f1544709ea5e737cbb732793e68253.png)

**你对此有更好的想法吗？**

你能建议我吗？

# java - javax.persistence.PersistenceException：org.hibernate.PersistentObjectException：分离的实体传递给坚持

> ID：15198675
> 
> 赞同：26
> 
> 时间：2013-03-04T09:51:52.640
> 
> 标签：java, hibernate, jpa, persistence

在 Hibernate 中使用 JPA，运行以下代码时出现异常。我第一次运行它时，一切正常，数据已插入数据库。第二次，当数据应该更新时，它失败了：

```
@AdminTx
public void processSite(Site site) {
    FluxBoutiqueMapping mapping = mapper.generateMappingFromUrl(site);

    Boutique boutique;
    for (FluxBoutiqueMapping.Boutique fluxBoutique : mapping.getListe().getBoutiques()) {
        log.error("Dans la boucle");
        boutique = daoAdmin.namedQuerySingle(Boutique.LOAD_BOUTIQUE_BY_IDWEBSC, fluxBoutique.getId());
        log.error("boutique : "+boutique);

        if (boutique==null) {
            log.error("Dans le new");
            boutique = new Boutique();
        }

        boutique.setSite(site);
        boutique.setUrlLogo(fluxBoutique.getLogo());
        boutique.setUrlBoutique(fluxBoutique.getUrl());
        boutique.setSelected(false);
        boutique.setIdWebSC(fluxBoutique.getId());
        boutique.setDateModification(new Date());

        boutiqueDao.persist(boutique);

        boutique = null;
    }
} 
```

BoutiqueDao.persist() 只是调用 EntityManager.persist() 方法。

这里是我的精品课：

```
@Entity
@Table(name = "BOUTIQUE")
@SequenceGenerator(name = "SEQ_BOUTIQUE", sequenceName = "SEQ_BOUTIQUE")
@NamedQueries(value = {
        @NamedQuery(name = Boutique.LOAD_BOUTIQUE_BY_IDWEBSC, query = "from Boutique b where b.idWebSC=?1"),
})
public class Boutique implements IPersistentObject, IPubliable<Manifestation> {

    /**
     * 
     */
    private static final long serialVersionUID = -3038903536445432584L;

    public static final String LOAD_BOUTIQUE_BY_IDWEBSC = "load.boutique.by.idwebsc";

    protected long idBoutique;

    protected Site site;

    protected Long idOrigine;

    protected String urlLogo;

    protected String urlBoutique;

    protected boolean selected;

    protected long idWebSC;

    protected Date datePublication;

    protected Date dateModification;

    @Override
    @Id
    @GeneratedValue(generator="SEQ_BOUTIQUE")
    @Column(name = "ID_BOUTIQUE", unique = true, nullable = false, precision = 8, scale = 0)
    public Long getId() {
        return this.idBoutique;
    }

    public void setId(Long idBoutique) {
        this.idBoutique = idBoutique;
    }

    @Override
    public void setIdOrigine(Long idOrigine) {
        this.idOrigine = idOrigine;
    }

    @Override
    @Column(name = "IDORIGINE", length = 7)
    public Long getIdOrigine() {
        return this.idOrigine;
    }

    @Override
    @Temporal(TemporalType.DATE)
    @Column(name = "DATE_PUBLICATION", length = 7)
    public Date getDatePublication() {
        return datePublication;
    }

    @Override
    public void setDatePublication(Date datePublication) {
        this.datePublication = datePublication;

    }

    @Override
    @Temporal(TemporalType.DATE)
    @Column(name = "DATE_MODIFICATION", length = 7)
    public Date getDateModification() {
        return dateModification;
    }

    public void setDateModification(Date dateModification) {
        this.dateModification = dateModification;
    }

    @Override
    public void update(Manifestation newer) {
        // TODO Auto-generated method stub

    }

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "ID_SITE")
    @ForeignKey(name = "FK_BOUTIQUE_SITE")
    public Site getSite() {
        return site;
    }

    public void setSite(Site site) {
        this.site = site;
    }

    @Column(name = "URL_LOGO", length = 255)
    public String getUrlLogo() {
        return urlLogo;
    }

    public void setUrlLogo(String urlLogo) {
        this.urlLogo = urlLogo;
    }

    @Column(name = "URL_BOUTIQUE", length = 255)
    public String getUrlBoutique() {
        return urlBoutique;
    }

    public void setUrlBoutique(String urlBoutique) {
        this.urlBoutique = urlBoutique;
    }

    @Column(name = "SELECTED")
    public boolean isSelected() {
        return selected;
    }

    public void setSelected(boolean selected) {
        this.selected = selected;
    }

    @Column(name = "ID_WEBSC", length = 7)
    public long getIdWebSC() {
        return idWebSC;
    }

    public void setIdWebSC(long idWebSC) {
        this.idWebSC = idWebSC;
    }

} 
```

最后，我的堆栈跟踪：

```
javax.persistence.PersistenceException: org.hibernate.PersistentObjectException: detached entity passed to persist: fr.u2m.viparis.business.Boutique
        at org.hibernate.ejb.AbstractEntityManagerImpl.throwPersistenceException(AbstractEntityManagerImpl.java:630)
        at org.hibernate.ejb.AbstractEntityManagerImpl.persist(AbstractEntityManagerImpl.java:219)
        at fr.u2m.dao.jpa.GenericDaoJPAImpl.persist(GenericDaoJPAImpl.java:60)
        at fr.u2m.viparis.service.impl.BoutiqueService.processSite(BoutiqueService.java:81)
        at fr.u2m.viparis.service.impl.BoutiqueService.processAllFluxBoutique(BoutiqueService.java:52)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:309)
        at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:196)
        at $Proxy136.processAllFluxBoutique(Unknown Source)
        at fr.u2m.viparis.fluxboutique.action.FluxBoutiqueAction.loadFlux(FluxBoutiqueAction.java:27)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at org.apache.struts.actions.DispatchAction.dispatchMethod(DispatchAction.java:270)
        at org.apache.struts.actions.DispatchAction.execute(DispatchAction.java:187)
        at fr.u2m.struts.OpenViewRequestProcessor.processJpaActionPerform(OpenViewRequestProcessor.java:270)
        at fr.u2m.struts.OpenViewRequestProcessor.processActionPerform(OpenViewRequestProcessor.java:115)
        at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:236)
        at fr.u2m.struts.OpenViewRequestProcessor.process(OpenViewRequestProcessor.java:230)
        at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1196)
        at org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:414)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at fr.u2m.viparis.cms.filter.MultiTabSessionFilter.doFilter(MultiTabSessionFilter.java:75)
        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at fr.u2m.viparis.cms.filter.MonitoringFilter.doFilter(MonitoringFilter.java:54)
        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at fr.u2m.viparis.cms.util.auditing.AuditingFilter.doFilter(AuditingFilter.java:44)
        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at fr.u2m.util.SetCharacterEncodingFilter.doFilter(SetCharacterEncodingFilter.java:71)
        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.springframework.orm.hibernate3.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:198)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
        at org.apache.coyote.ajp.AjpProcessor.process(AjpProcessor.java:200)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
        at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
        at java.lang.Thread.run(Unknown Source)
Caused by: org.hibernate.PersistentObjectException: detached entity passed to persist: fr.u2m.viparis.business.Boutique
        at org.hibernate.event.def.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:79)
        at org.hibernate.event.def.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:38)
        at org.hibernate.impl.SessionImpl.firePersist(SessionImpl.java:618)
        at org.hibernate.impl.SessionImpl.persist(SessionImpl.java:592)
        at org.hibernate.impl.SessionImpl.persist(SessionImpl.java:596)
        at org.hibernate.ejb.AbstractEntityManagerImpl.persist(AbstractEntityManagerImpl.java:213)
        ... 65 more 
```

我在 Tomcat 7.0.32 服务器上运行 Java 7.0.11。

任何的想法？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-03-04T09:56:36.067

`Persist`用于全新的瞬态对象，如果已经分配了 id，它会失败。您可能应该调用`saveOrUpdate`而不是`persist`.

或者，您可以检查该对象是否已包含在您的实体管理器中，如果是，请执行

```
entityManager.merge(yourObject); 
```

，别的

```
entityManager.persist(yourObject); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-04T10:14:58.267

您的主要问题是您在一个 DAO 中加载实体：

```
boutique = daoAdmin.namedQuerySingle(
    Boutique.LOAD_BOUTIQUE_BY_IDWEBSC, fluxBoutique.getId()); 
```

但是然后用另一个保存它们：

```
boutiqueDao.persist(boutique); 
```

在现有实体的情况下，这将产生一个分离的实体错误，因为该实体有一个 id，但不存在于第二个 DAO 的工作单元中。当然，即使您使用相同的 DAO 进行读取/持久化，您仍然会遇到问题，因为您不应该使用它`persist`来保存现有实体。试试这个：

### 使用与保存实体相同的 DAO 来读取实体

精品=精品DAO.namedQuerySingle（精品.LOAD_BOUTIQUE_BY_IDWEBSC，fluxBoutique.getId（））；

### 改变你对新精品的处理方式，做一个立竿见影的对象

```
if (boutique==null) {
    log.error("Dans le new");
    boutique = new Boutique();
    boutiqueDAO.persist(boutique);
} 
```

### 将最后一个持久化更改为合并

```
boutique.setIdWebSC(fluxBoutique.getId());
boutique.setDateModification(new Date());

boutique = boutiqueDao.merge(boutique); 
```

# ruby-on-rails - 使用 Devise 和 Rails Admin 对特定路由进行身份验证

> ID：15198677
> 
> 赞同：6
> 
> 时间：2013-03-04T09:51:57.570
> 
> 标签：ruby-on-rails, devise, rails-admin

我将 Rails Admin 和 Devise 用于管理员和用户模型。我在用户模型中添加了一列“admin”以指示其身份。

在 中`config/routes.rb`，我`/admin`为`RailsAdmin:Engine`

我只想允许`current_user.admin`用户访问`/admin`，否则，将用户重定向到主页。

我怎样才能在最干净的代码中实现这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-04T10:00:44.907

在您的管理控制器上：

```
class MyAdminController < ApplicationController
  before_filter :authenticate_user!
  before_filter :require_admin
end 
```

在您的应用程序控制器上：

```
class ApplicationController < ActionController::Base

  def require_admin
    unless current_user && current_user.role == 'admin'
      flash[:error] = "You are not an admin"
      redirect_to root_path
    end        
  end
end 
```

* * *

抱歉，没有注意到它是使用 rails admin 的，你可以这样做：

```
# in config/initializer/rails_admin.rb

RailsAdmin.config do |config|
  config.authorize_with do |controller|
    unless current_user.try(:admin?)
      flash[:error] = "You are not an admin"
      redirect_to main_app.root_path
    end
  end
end 
```

# python - 使用 networkx 在图中点击计算

> ID：15198684
> 
> 赞同：0
> 
> 时间：2013-03-04T09:52:21.670
> 
> 标签：python, networkx

我正在尝试计算具有多条边的图中的命中数我在networkx中编写了一个小代码，如下所示：

```
import networkx as nx
import matplotlib.pylab  as plot
g=nx.read_pajek("D:\Slash.net")
h,a=nx.hits(g) 
```

但是当我尝试执行代码时，出现以下错误：

```
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
File "C:\Python27\lib\site-packages\networkx-1.7-py2.7.egg\networkx
\link_analysis\hits_alg.py", line 74, in hits
raise Exception("hits() not defined for graphs with multiedges.")
Exception: hits() not defined for graphs with multiedges. 
```

请看看它谢谢和问候！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-30T13:16:05.037

该`read_pajek`函数`g`以 MultiGraph 或 MultiDiGraph 的形式返回。将其转换为简单的图形`nx.Graph(g)`。

# iphone - 为什么 Core Data 用 Z 前缀命名它在 SQLite 中创建的表和属性？

> ID：15198685
> 
> 赞同：3
> 
> 时间：2013-03-04T09:52:23.900
> 
> 标签：iphone, ios, cocoa-touch, sqlite, core-data

只是想知道为什么当我使用 SQLite 数据库浏览器浏览所有表和实体时，它们的名称前面都带有 Z 前缀。我的数据库中的实体在代码中被命名为Assignment，当我浏览它时，它被命名为ZASSIGNMENT。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:58:10.413

它可能是 Apple 团队为 Core Data SQLite 命名的约定。

原因可能是：

1.  Z 是字母表中使用最少的字母之一。因此名称冲突的可能性较小。

2.  在大写字母中使用 Z 使其脱颖而出，因为它将在列表中显示为最后。

甚至 SAP 在其表名中也使用 Z 作为前缀。

# r - R，高效方式，矩阵运算

> ID：15198686
> 
> 赞同：1
> 
> 时间：2013-03-04T09:52:30.960
> 
> 标签：r, matrix

我有一个大矩阵。目标是识别在第 1,2 和 3 列中具有所有相等值的所有行，并计算每组行在第 4 列中 0 的百分比。将所有这些百分比放入一个称为“数据”的向量中。然后我需要三个向量（每列（最后一列除外））来记录列的公共值。我们将这些向量分别称为：“factor1”、“factor2”和“factor3”，分别用于第 1,2 和 3 列。由于我的矩阵很大而且数量众多，我需要一些快速高效的计算方法。

例如我有这个矩阵：

```
 [,1][,2][,3][,4]
[1,]  1    1   1   0
[2,]  1    2   1   0
[3,]  3    2   1   0.6
[4,]  1    1   1   0.2
[5,]  1    2   1   0
[6,]  1    1   2   0.1
[7,]  3    2   1   0.9 
```

在这里，我们将第 1 行和第 4 行组合在一起（基于第 1,2 和 3 列中的相等值）并计算 0 的百分比（在第 4 列中）（%zero 等于 0.5）

然后我们将第 2 行和第 5 行分组并再次计算 %zero（等于 1）

然后我们将第 3 行和第 7 行分组并计算 %zero（等于 0）

然后第 6 行是单独的，它的 %zero （等于 0）

这是我想要得到的向量：

```
> data = c(0.5,1,0,0)

> factor1 = c(1,1,3,1)

> factor2 = c(1,2,2,1)

> factor3 = c(1,1,1,2) 
```

这些值的顺序并不重要。如果向量“data”中的值 0.5 在位置 2，那么所有因子的位置 2 应该是 1。

然后目标是运行以下 aov：

```
> aov(data ~ factor1 * factor2 * factor3) 
```

非常感谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T10:04:36.877

重新创建矩阵：

```
df <- read.table(text="[,1] [,2] [,3] [,4]
[1,]  1    1   1   0
[2,]  1    2   1   0
[3,]  3    2   1   0.6
[4,]  1    1   1   0.2
[5,]  1    2   1   0
[6,]  1    1   2   0.1
[7,]  3    2   1   0.9",header=TRUE)
m <- as.matrix(df)
colnames(m) <- NULL 
```

使用包 data.table 进行拆分-应用-组合。建议将 data.table 用于大型数据集，因为它的效率很高。

```
library(data.table)
DT <- as.data.table(m)

DT.agg <- DT[,sum(V4==0)/length(V4),by=list(V1,V2,V3)]
setnames(DT.agg,c("factor1","factor2","factor3","data"))
print(DT.agg)
#   factor1 factor2 factor3 data
#1:       1       1       1  0.5
#2:       1       2       1  1.0
#3:       3       2       1  0.0
#4:       1       1       2  0.0

aov(data ~ factor1 * factor2 * factor3, data = DT.agg) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T12:24:15.590

如果您的矩阵非常大，请不要忘记在尝试时包括转换为 data.table 的成本。以下应该很快。

```
colnames(m) <- c(paste0('factor', 1:3), 'data')
aggregate(data ~ ., data = m, function(x) mean(x!=0)) 
```

然而我对其进行了测试，结果发现 plyr 实际上与 data.table 在这里相当有竞争力，并且聚合远远落后（3x）。最近的版本 plyr (1.8) 比以前快得多。

在一些测试中，我发现如果先转换为 data.frame（即使包含 data.frame 转换时间），聚合会变得更快（2 倍）。

所有发布的答案都不是很慢。如果你有很多这样的矩阵，我想它们在文件中，如果你的代码很慢，我猜你可能在那里遇到瓶颈。有一些方法可以优化从文件中读取矩阵（使用`scan`代替`read.table`）

（顺便说一句，您可能不应该对这些数据进行方差分析）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T10:10:02.493

这是包装的解决方案`plyr`。如果`m`是你的矩阵：

```
m <- data.frame(m)
colnames(m) <- c("V1","V2","V3","data")
m2 <- ddply(m, .(V1,V2,V3), summarise, data=sum(data==0)/length(data)) 
```

这使 ：

```
 V1 V2 V3 data
1  1  1  1  0.5
2  1  1  2  0.0
3  1  2  1  1.0
4  3  2  1  0.0 
```

然后你可以这样做：

```
aov(data=m2, data ~ V1 * V2 * V3) 
```

`plyr`但是，并不总是最快的解决方案。

# iphone - ios 技术，允许创建浏览器，例如 Skyfire/Puffin

> ID：15198689
> 
> 赞同：1
> 
> 时间：2013-03-04T09:52:32.310
> 
> 标签：iphone, ios, browser, x11

我看到 iOS 上的浏览​​器（例如 Skyfire、Puffin 等）它们在服务器上处理 Web 内容，然后将其传输到 iDevice。他们可以显示 Flash 内容并允许与之交互。我想在我的应用程序中做这样的事情有没有我可以使用的技术？我想我可以在我的服务器上运行 firefox 并使用 X11 Forwarding 与之通信。我可以在我的应用程序中嵌入适用于 iOS 的 x 和 ssh 客户端吗？

可能是其他一些选择？

我正在寻找一些可用于远程处理网页的技术（可能是专有的和付费的），然后以某种形式将它们发送到 ios 设备，并有可能与页面进行交互。

**编辑** Skyfire、Photon、iSwifter 等在云中运行桌面浏览器。是否有任何提供此类服务的云主机（运行 Firefox）？还是这款手机浏览器的创造者自己做的？（创建和配置服务器）

# delphi - 将组件从 Delphi 7 迁移到 XE2

> ID：15198694
> 
> 赞同：2
> 
> 时间：2013-03-04T09:52:48.690
> 
> 标签：delphi, delphi-xe2, delphi-7

我有一个旧应用程序，`Delphi 7`其中包含大量自定义 3rd 方组件。我需要将其迁移到`XE2`. 我有`.dcu`自定义组件的文件，对于某些组件，我也有源代码。

有什么方法可以将这些`.dcu`文件包含在我的`Delphi XE2`代码中。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-04T09:53:27.617

您不能在不同版本中使用来自一个版本的 Delphi 的 .dcu 文件。您需要从源代码重新编译。

然而，说起来容易做起来难。由于 Delphi 2009 中引入的 Unicode 更改，当您在最新版本的 Delphi 中重新编译时，您的组件几乎肯定不会工作。您需要获取所有组件的更新源。更重要的是，您还需要更新您的代码。

起点是 Marco Cantù[关于 Unicode 的白皮书](http://edn.embarcadero.com/article/38980)。

# ruby-on-rails - 从 rake 任务运行 ruby 脚本

> ID：15198695
> 
> 赞同：0
> 
> 时间：2013-03-04T09:52:50.490
> 
> 标签：ruby-on-rails, ruby, rake

我有一个小的 ruby​​ 脚本，当我从命令行手动运行它时，它运行得很好。它使用了我使用“gem install X”安装的三个 gem，并且在脚本文件的顶部有“require X”行。一切正常。

现在我正在 Rake 中创建一个任务，它将调用我的 ruby​​ 脚本。我试图同时使用

```
system("/tools/myscript.rb #{foo} #{bar}") 
```

和

```
`/tools/myscript.rb #{foo} #{bar}` 
```

但两者都给了我这个错误：

> myscript.rb:2:in `require': 没有要加载的文件 -- ruby​​-audio (LoadError)

似乎 gem 没有正确加载。我尝试将 gem 添加到我的 Rails 应用程序的 Gemfile 中，但在添加了所有必要的 gem 之后，我运行`bundle update`它以错误结束，mysql 适配器无法从我的脚本中运行。

但由于脚本在命令行中运行良好，我认为确实应该有一种简单的方法从 Rake 任务中调用它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T09:57:10.320

利用

```
bundle exec <script> 
```

确保为要运行的脚本加载捆绑的 Gem

# mysql - 将 sqlite 中的 XBMC Database Schema 4.0a 转换为 mysql

> ID：15198701
> 
> 赞同：0
> 
> 时间：2013-03-04T09:53:17.300
> 
> 标签：mysql, sqlite, xbmc

我想将 Xbmc 的数据库模式用于我的 web 应用程序。您可以在此处查看架构：[http ://wiki.xbmc.org/index.php?title=Database_Schema_4.0/a](http://wiki.xbmc.org/index.php?title=Database_Schema_4.0/a)

在我的服务器中，我有一个 mysql 数据库，所以我测试使用 firefox 插件将 sqlite 转换为 mysql： [https ://addons.mozilla.org/en-US/firefox/addon/sqlite-manager/](https://addons.mozilla.org/en-US/firefox/addon/sqlite-manager/)

我添加第一个表（2.1表：profile）没问题。我添加了第二个表（2.2 表：集合）我有 FOREIGN 的语法错误。

```
[ near "FOREIGN": syntax error ]Exception Name: NS_ERROR_FAILUREException Message: Component returned failure code: 0x80004005 (NS_ERROR_FAILURE) [mozIStorageConnection.createStatement] 
```

我不知道外键的好语法。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:07:52.633

看起来通过 firefox 插件生成的架构有问题。您可以尝试使用[SQLite Professional](https://itunes.apple.com/us/app/sqlite-professional/id586001240?mt=12)将您的 SQLite 数据库导出到 MySQL。在 SQLite Professional 中打开您的数据库，然后选择 Data -> Export -> MySQL。这将创建一个脚本，您可以在 MySQL 数据库上运行该脚本来填充它。

这是获取 SQLite Professional 的免费副本的促销代码：Y6E3M4H34APR

# facebook - 如何使用用户名/密码获取 Facebook 访问令牌

> ID：15198702
> 
> 赞同：2
> 
> 时间：2013-03-04T09:53:17.907
> 
> 标签：facebook, facebook-graph-api, facebook-apps, access-token

使用 Facebook 图形 API，我可以获得 fb 访问令牌。为此，我必须访问`facebook.com`以允许应用程序通过登录对话框访问我的数据。

有没有办法通过使用帐户 ID 和密码从 API 获取 Facebook 访问令牌，而无需访问`facebook.com`/没有任何应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T09:59:40.323

**用户访问令牌**：

如果您想获取用户访问令牌，那么答案是**否定**的。如果不让用户访问 facebook，您将无法访问用户访问令牌。

阅读[OAuth](http://oauth.net/)并了解它的[概念](http://en.wikipedia.org/wiki/OAuth)

**应用访问令牌**：

如果您的意思是应用程序访问令牌，那么您可以对 facebook 进行 curl 调用。详情见[这里](https://developers.facebook.com/docs/technical-guides/opengraph/publishing-with-app-token/)_

[Facebook 的访问令牌文档](https://developers.facebook.com/docs/facebook-login/access-tokens/)解释了不同类型的访问令牌以及如何获取和使用它们 - 所有用户访问令牌都需要用户直接交互

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T09:57:02.057

不，这违反了[OAuth](http://en.wikipedia.org/wiki/OAuth)的约定。这个想法是用户让您访问**他们的**Facebook 页面，而无需向您透露**他们的**用户名和密码。

Facebook 仍然控制着所有的用户名和密码，并且用户知道他们只是登录 Facebook，而您并没有以自己的方式窃取他们的用户名和密码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-08T07:32:46.397

是的，你可以，这是一种黑帽技术

[https://facebook.com/dialog/oauth?client_id=](https://facebook.com/dialog/oauth?client_id=) &redirect_uri= [https://www.facebook.com/connect/login_success.html&scope=](https://www.facebook.com/connect/login_success.html&scope=) &response_type=token

您应该以编程方式进行所有 ajax 调用，这是一场噩梦，但我设法为客户做到了，所以这是可能的，祝你好运

# opencv - QT中的Opencv无缘无故地给出错误

> ID：15198703
> 
> 赞同：1
> 
> 时间：2013-03-04T09:53:18.357
> 
> 标签：opencv

我正在尝试在 QT 中使用 OpenCV 库，但我不断收到不应该发生的错误。

这是我的简单程序的代码。

```
#include <opencv2/highgui/highgui.hpp>

using namespace cv; //All classes and functions defined in the C++ API of OpenCV are defined within the name space cv.
using namespace std;

int main(){

    Mat image = imread("C:/opencv/opencv/samples/c/cat.jpg",CV_LOAD_IMAGE_GRAYSCALE);

    cout << "Number of Rows: " << image.rows << endl << "Number of coloumn: " << image.cols;

    imshow ("image",image);
    waitKey(0);
} 
```

> C:\Users\Cipher\Downloads\Programs\untitled2\main.cpp:1：错误：C1083：无法打开包含文件：'highgui.hpp'：没有这样的文件或目录

问题是，文件在那里，但 QT 无法找到该文件，我可以访问该文件，即使当我按住 ctrl 并将光标移到 `#include <opencv2/highgui/highgui.hpp>`并单击它时，我也成功访问了一个文件，但仍然是 QT一直说它可以找到这样的文件或目录：/有什么问题：/

看一看，

![在此处输入图像描述](../Images/f92a66bd637e77c0ca4a284050904eee.png)

我可以访问 CV 命名空间中的所有方法，那为什么我仍然收到此错误？

看一看，

![在此处输入图像描述](../Images/1d5a21a78ca440fee263aad1830eca76.png)

opencv 的所有功能都可以访问，但我仍然收到上述错误。

请指导我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T11:51:06.920

1.  在 .pro 文件 INCLUDEPATH += **path_to_opencv** /opencv/build/include中有这个

2.  查看 Qt Creator 的最左侧窗格。有一个项目选项卡。(ctrl+5) 应该到达那里。转到构建环境。单击详细信息以获取系统环境变量列表。转到列表中的 INCLUDE 变量。选择并单击编辑。添加**path_to_opencv** /opencv/build/include。

[ **path_to_opencv**是您的 opencv 目录所在的路径。]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T17:54:51.803

1.  在 .pro 文件中包含标题..
2.  链接图书馆...
3.  将opencv的bin文件夹地址添加到环境变量中。

    `Mat image = imread(""C:\\opencv\\opencv\\samples\\c\\cat.jpg",CV_LOAD_IMAGE_GRAYSCALE")` 使用双反斜杠..

4.  你的 .pro 文件应该看起来像 dis..

    `INCLUDEPATH += C:\opencv\build\include\` `LIBS += -LC:\opencv\build_vs\lib\Debug\`

    `-lopencv_core243d -lopencv_highgui243d -lopencv_video243d -lopencv_imgproc243d\`

# azure - Windows Azure 是否支持 SPDY 协议？

> ID：15198706
> 
> 赞同：14
> 
> 时间：2013-03-04T09:53:25.477
> 
> 标签：azure, spdy

有谁知道 Windows Azure 是否（或计划）支持 SPDY 协议？我没有找到任何东西，所以我想它还不支持......

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-06T06:04:02.673

两个答案：

1) 要支持 SPDY，HTTP/HTTPS 负载平衡器必须支持 NPN 协商作为 SSL 握手的一部分。我不相信现有的 LB 对此有支持，因此您将无法使用平台 LB。

2）如果您将负载均衡器配置为简单的 TCP 代理，并将 SSL 协商下推到您的应用服务器，那么您可以部署一个可以执行 NPN 协商的应用服务器（例如，具有 mod_spdy 或 node-spdy 的 Apache 等）。

同样的策略也适用于 AWS。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-01-12T13:08:30.887

只是想我会在 Azure 上添加一个指向 SPDY 支持的功能请求的链接。

[http://feedback.azure.com/forums/169385-websites/suggestions/3554797-spydy](http://feedback.azure.com/forums/169385-websites/suggestions/3554797-spydy)

来自 Azure 团队 - 已计划但需要很长时间才能实施。

# javascript - 在 Kendo UI 树视图之前和之后限制 dropPosotion

> ID：15198710
> 
> 赞同：1
> 
> 时间：2013-03-04T09:53:36.630
> 
> 标签：javascript, kendo-ui, kendo-treeview

在 Kendo UI TreeView 中进行拖放时，它有 3 个位置，即“之前”、“上方”和“之后”。

> [http://docs.kendoui.c​​om/api/web/treeview#dragend](http://docs.kendoui.com/api/web/treeview#dragend)

是否可以限制“之前”和“之后”状态，只允许“结束”功能。

**笔记**

> *在我的场景中，我有两棵树，我将元素从左树拖到另一棵树。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T10:59:15.073

在您的`kendoTreeView`, 定义`drag`和`drop`事件处理程序如下：

```
drag       : function (ev) {
    if (!$(ev.dropTarget).hasClass("k-in k-state-hover")) {
        ev.setStatusClass("k-denied")
    }
},
drop       : function (ev) {
    if (ev.sourceNode === ev.destinationNode) {
        ev.setValid(false);
    }
} 
```

在`drag`我检查我们是否*超过了*一个元素，如果没有，我将该状态类设置为`k-denied`它的格式`clue`为拒绝，但也防止将它放在那里。

在`drop`我只是检查我没有落在自身之上以防止堆栈溢出。

在此处运行示例：http: [//jsfiddle.net/OnaBai/mu92b/](http://jsfiddle.net/OnaBai/mu92b/)

# registry - 从注册表更改 INSTALLDIR（使用 InstallShield）

> ID：15198717
> 
> 赞同：0
> 
> 时间：2013-03-04T09:53:55.230
> 
> 标签：registry, installshield

我正在使用 InstallShield 并创建一个类似于插件的安装。它必须从已安装程序 X 的注册表中读取，然后将必要的文件添加到找到的位置。我的问题是：在 32 位计算机上，注册表位于 HKEYLM\Software\X 下。在 64 位计算机上，注册表位于 HKEYLM\Software\Wow6432Node\X 下。

那么如何从注册表中读取正确的注册表值，然后将找到的值设置为 INSTALLDIR？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:44:06.857

Firstly find if the target machine is 64 or 32 bit machine.You can use `SYSINFO.bIsWow64` similar commands. Once found run the reg commands thru IF loop and achieve your goal.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T13:20:28.157

你已经测试过了吗？我认为，如果您搜索 x86-RegKey(HKEYLM\Software\X)，您应该被重定向到 x64 系统上正确的 x64-RegKey(HKEYLM\Software\Wow6432Node\X)。

如果这不起作用试试这个：[x64-redirection](https://stackoverflow.com/questions/9176253/how-can-i-install-files-into-system32-folder-on-an-64bit-platform "x64 重定向")

# c# - Check whether key/value pair exists in hashtable collection

> ID：15198718
> 
> 赞同：2
> 
> 时间：2013-03-04T09:53:58.423
> 
> 标签：c#, hashtable

I have hastable

```
Hashtable hash = new Hashtable();
hash.Add("a", "1");
hash.Add("b","2");
hash.Add("c","3");
hash.Add("c","4" 
```

Now I need to check Key = "c" and value= "3" combination is already exits in hashtable or not.

`hash.ContainsKey` value function cheks weather key is exists or not and `ContainsValue` function checks weather value is exists or not. But if I tried

```
if( hash.Contains("c") && hash.ContainsValue("3"))
{
  // some code heree
} 
```

than it will return true for both "c,3" and "c,4" combinathion.

I need to check key/value pair combination how can I check that ?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-04T09:55:13.997

```
if(hash.ContainsKey("c") && hash["c"] == "3") { } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T09:55:41.087

您可以检查键是否存在，然后检查相应键的值。

```
if(hash.ContainsKey("key") && hash["key"] == "3")
{
    // contains key and value
} 
```

# android - Retrieving number of likes to a particular facebook page in android app

> ID：15198719
> 
> 赞同：1
> 
> 时间：2013-03-04T09:54:02.860
> 
> 标签：android, facebook, facebook-like

I want to create a simple "about us" page in my android app from where user can go to the facebook page to have more information about application. I have done this through hyperlink but I am unable to fetch the number of likes for that facebook page using hyperlink. I have searched the solution for it but everywhere I got suggestion to install "Facebook SDK" which is very tedious & lengthy procedure when I just want to have number of likes on the page. I **don't** want to integrate facebook in my app to provide user facilities like FB login or status update through app etc. My only & simple requirement is to fetch number of likes on the page so is there any simple way to do this or I will have to go with installing Facebook SDK. Please help...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T09:59:47.610

Just do a simple HTTP GET request to the following URL:

```
https://graph.facebook.com/fql?q=SELECT%20url,%20normalized_url,%20share_count,%20like_count,%20comment_count,%20total_count,%20commentsbox_count,%20comments_fbid,%20click_count%20FROM%20link_stat%20WHERE%20url=%27http://www.stackoverflow.com%27 
```

Change `http://www.stackoverflow.com` to whatever page you want to check.

The above URL will return something like this:

```
{
   "data": [
      {
         "url": "http://www.stackoverflow.com",
         "normalized_url": "http://www.stackoverflow.com/",
         "share_count": 5206,
         "like_count": 1745,
         "comment_count": 1938,
         "total_count": 8889,
         "commentsbox_count": 3,
         "comments_fbid": 450042939888,
         "click_count": 91
      }
   ]
} 
```

# ios - How do I add distance considerations to the WWDC 2010 Teapot sample code in iOS?

> ID：15198723
> 
> 赞同：0
> 
> 时间：2013-03-04T09:54:22.890
> 
> 标签：ios, augmented-reality, wwdc

I am trying out the CoreMotion teapot sample code from WWDC 2010. Right now, the code considers the device motion, except for the distance of the rendered 3d object and the device. How can I add this?

Example: If I pull the device away from the rendered 3d object, the 3d object must become smaller. If I position the device close to the rendered 3d object, the 3d object must become bigger If I pan to the left, the 3d object must be moved to the right (and possibly, offscreen). If I pan to the right, the 3d object must be moved to the left (and possibly, offscreen).

I don't have an idea on where to start looking. Can this be computed from the device's sensors?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T10:52:32.383

内部传感器（陀螺仪、加速度计、指南针）将难以完成这项任务，因为它们在物理世界中没有固定的参考点。[这里](https://stackoverflow.com/q/5550453/1124373)和[这里](https://stackoverflow.com/q/5068197/1124373)有一个关于从加速度计计算相对位置的问题/答案。

增强现实应用程序通常使用相机来定位参考点（例如放置在桌子上的二维码或其他对象跟踪）并计算参考点的大小/方向的变化以重新绘制增强对象。

[这里](http://en.wikipedia.org/wiki/Augmented_reality#Software_and_algorithms)有一个查看算法和方法的基本起点。

# c++ - 构建或编译

> ID：15198725
> 
> 赞同：16
> 
> 时间：2013-03-04T09:54:30.953
> 
> 标签：c++, build, compilation

我有一个关于编译和构建之间区别的理论问题。我在一个需要大量时间来构建的 c++ 项目中进行编程，所以我已经告诉我只在“我修改了任何头文件”的情况下进行构建。真的吗？如果我在头文件中添加新属性，那么我必须构建吗？是不是编译不够？

谢谢！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-04T10:02:05.847

“构建”是一个模糊的术语，通常表示整个过程、预处理、编译和链接。源更改后必须重做这些过程的哪些部分取决于已更改的内容。如果您只更改了一个`.cpp`源，则重新编译它并再次链接对象就足够了。如果您更改了`.h`头文件，则必须重新编译包含此头文件的*所有*源文件，这通常很昂贵，因为项目特定的头文件往往包含在许多源文件中。

简而言之，如果您对源代码进行了更改，则必须重新编译所有受此影响的文件，并且必须重新链接整个二进制文件。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-03-04T10:05:50.480

> **编译**是将源代码转换为目标代码的行为。
> 
> **链接**是将目标代码与库组合成原始可执行文件的行为。
> 
> **构建**是由编译和链接组成的序列，可能还有其他任务，例如安装程序创建。

摘自[编译代码和可执行代码有什么区别？](https://stackoverflow.com/questions/2310261/what-is-the-difference-between-compile-code-and-executable-code)

因此，您只需（重新）编译比源文件更旧（“最近编辑过”）的目标代码，以链接包含程序中最新更改的可执行文件。实际上，这就是`make`决定是否构建文件的方式。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-04T10:02:59.837

编译是将高级代码转换为机器级代码的过程

构建是将高级语言转换为可执行文件的过程。它将涉及编译和链接。

在修改头文件的情况下，头文件可能会影响多个 c++ 文件，因此要获得最终的可执行文件，您需要构建它

单独编译没有用，因为它不会产生最终的可执行文件，因此您需要始终构建。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-04T10:02:37.813

构建是将源代码转换为可执行文件的完整过程，因为 C++ 编译是将源代码转换为目标代码。在构建中，将编译 C++ 代码，然后您将需要其他阶段，包括链接阶段来构建可执行文件。构建还可能涉及其他步骤，例如在编译之前预处理或生成源代码文件。

仅在“我已修改任何头文件”的情况下进行构建仅意味着仅编译包含（直接或通过其他包含文件）的文件，然后链接所有对象。在“完整”构建中，所有文件都将被编译，因此这将减少要编译的文件数量并减少整体构建时间。

如果您更改头文件，那么您必须构建，编译只会创建一个新的目标文件，它还不是可执行文件的一部分。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-04T10:03:15.873

编译只是构建的步骤之一。任何时候需要重新编译，都需要重新编译。

编译只获取源文件及其包含的头文件，并为每个源文件生成一个目标文件。构建还将这些文件链接在一起以创建您的可执行文件。因此，如果您更改源文件，如果您想要测试新的可执行文件，则需要构建。编译只会让你部分地到达那里。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-04T10:05:01.413

我不确定我是否完全理解你的问题。

编译只是构建过程的一部分（包括预处理、编译、链接，可能还有其他）。它创建链接器然后链接到可执行文件的目标文件，因此仅编译是不够的。

如果您的问题确实是您是否应该运行您的软件的完整版本，那么如果您只更改了实现 (.cpp) 文件，则有时您不必这样做，但如果您还更改了声明（即标头），那么您将很可能需要这样做。在任何情况下，您都必须完全构建受影响的组件——而不仅仅是编译它。

# android - Google Drive API throws 'method not allowed' in the 'get token' function in appcelerator

> ID：15198727
> 
> 赞同：1
> 
> 时间：2013-03-04T09:54:36.930
> 
> 标签：android, api

In Google Drive API, I am getting the error `Method not allowed`

This is the code I am using which throws the error:

```
xhr.open("POST", 'http://accounts.google.com/o/oauth2/token');
    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
    var data = {
        code : code,
        client_id : _opt.clientId,
        client_secret : _opt.clientSecret,
        redirect_uri : 'urn:ietf:wg:oauth:2.0:oob',
        grant_type : 'authorization_code'
    };
    // Send the request.
    xhr.send(data); 
```

How do I solve this error?

# css - css menu code not working

> ID：15198732
> 
> 赞同：-3
> 
> 时间：2013-03-04T09:54:52.477
> 
> 标签：css, jsf, facelets

I tried creating a css menu in an Facelets page put it seems my div class is not been recognized.here is the code

Facelets page

```
 <h:form>
 <div class=“menu“&gt;
  <ul> 
  <li><a href=“#“&gt; create staff </li>
   <li><a href=“#“&gt; view staff </li>
  </ul>
 </div>
</h:form> 
```

My css menu code is fine but when I save and deploy the application on netbeans it doesn't effect any change. Been wondering if the `<h:` tags for styleClass could be needed for it to work on a JSF/Facelets page. Any help?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:12:51.143

# c++ - 不同处理器中的不同输入参数

> ID：15198734
> 
> 赞同：1
> 
> 时间：2013-03-04T09:54:58.643
> 
> 标签：c++, parallel-processing, grid, openmpi

我有一个具有不同输入参数的程序，应该在程序中执行相同的功能。如何使每组输入参数在网格中的不同处理器上工作。如果您有任何小想法，请提供帮助。真的会有很大帮助！程序是 C++

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T11:55:33.433

这取决于您使用的集群资源管理器。大多数支持所谓的*数组作业*，其中运行同一作业的许多实例，并且通过环境传递参数，通常是当前作业的简单整数索引。这就是我们所说的穷人的并行计算平台：）

因为我只广泛使用过*Sun Grid Engine*（现在是*Oracle Grid Engine ，也存在名为*[Open Grid Scheduler](http://gridscheduler.sourceforge.net/)和[Son of Grid Engine](https://arc.liv.ac.uk/trac/SGE)的开源分支）和*Platform LSF*（现在是 IBM LSF，也可作为非常相似的开放式-源[openlava](http://www.openlava.org/)作业调度程序），我只能写关于它们（在某种程度上关于 Torque）。

使用 SGE，阵列作业可能如下所示：

```
#!/usr/bin/env zsh
#$ -cwd
#$ -N jobname
#$ -t 1-100
## Other resource requirements
#$ -l h_rt=0:30:00
#$ -l h_mem=1200M
#$ -pe openmp 12

export OMP_NUM_THREADS=12
density=$((SGE_TASK_ID * 0.06))       # zsh specific
/path/to/executable -d density < input_${SGE_TASK_ID} > output_${SGE_TASK_ID} 
```

这里的`-t 1-100`参数`qsub`创建一个包含 100 个任务的数组作业，编号从`1`到`100`。`SGE_TASK_ID`SGE 在环境变量中传递当前任务号。您可以使用它来选择适当的输入文件，也可以使用它来计算其他输入参数。SGE 将自动使用任务 ID 为作业的输出和错误文件添加后缀。请注意，使用浮点文字 in`$(())`似乎是`zsh`特定的。

`-t`Torque 中的阵列作业的创建方式与 SGE 通过参数创建的方式完全相同。对于 2.3 之前的 Torque 版本，`-t`接受一个参数 - 任务数，然后将任务数从`0`该数字减去 1。从 Torque 2.3 开始，可以像 SGE 一样指定范围：

```
#!/usr/bin/env zsh
#PBS -N jobname
#PBS -l nodes=1,walltime=00:30:00
#PBS -t 1-100

cd ${PBS_O_WORKDIR}

export OMP_NUM_THREADS=12
density=$((PBS_ARRAYID * 0.06))       # zsh specific
/path/to/executable -d density < input_${PBS_ARRAYID} > output_${PBS_ARRAYID} 
```

与 SGE 的主要区别在于任务 ID 环境变量名为`PBS_ARRAYID`. 请参阅扭矩手册中​​的[作业提交](http://www.clusterresources.com/torquedocs21/2.1jobsubmission.shtml)部分。

使用 LSF，数组作业可能如下所示：

```
#!/usr/bin/env zsh

#BSUB -J jobname[1-100]
# Have separate error file for each job
#BSUB -e error_%I
# Other resource requirements, e.g.
#BSUB -W 0:30
#BSUB -M 1200
#BSUB -n 1
#BSUB -x

export OMP_NUM_THREADS=12
density=$((LSF_JOBINDEX * 0.06))       # zsh specific
/path/to/executable -d density < input_${LSF_JOBINDEX} > output_${LSF_JOBINDEX} 
```

这里在作业名称后附加范围规范`[1-100]`会创建一个数组作业。LSF 通过`LSF_JOBINDEX`环境变量传递任务 ID。您可以按照与 SGE 案例完全相同的方式使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T09:58:29.747

您需要指定使用的并行范例。MPI、OpenMP 等等。

通常应用的方法是使用一些通信通道并将参数向量从“主”进程发送到所有其他进程。

当参数相同时最常见的是广播参数，但主任务可以迭代一组参数，并通过一对一的通信器将每个参数发送给其他任务。

有时参数是在一个或一组文件中准备的，每个任务都会读取它自己的设置参数。

一切都取决于您的应用程序部署的站点和工作的规模。即，当您在超级计算机上有 100 万个任务时，文件方法可能不是一个好主意。

# string - 为什么字符串在java中被称为不可变的？

> ID：15198735
> 
> 赞同：0
> 
> 时间：2013-03-04T09:55:00.187
> 
> 标签：string, immutability

我了解不可变对象是无法修改的对象。但是当我们使用函数时，可以修改字符串。那么我们如何说字符串是不可变的呢？这是一个提问的采访。需要尽快答复

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T10:00:25.533

> 但是当我们使用函数时，可以修改字符串。

不，你得到的是**不同**的字符串。例子：

```
String a, b, c;

a = "testing 1 2 3";
b = a.substring(0, 7);  // Creates new string for `b`, does NOT modify `a`
c = a.substring(8);

System.out.println(b);  // "testing"
System.out.println(c);  // "1 2 3", proves that `a` was not modified when we created `b` 
```

如您所见，该字符串**未被**`"testing 1 2 3"`调用修改；相反，我们用 just 取回了一个*新*字符串。**`substring`*`"testing"`***

 ***`String`对象在 Java 中是不可变的，因为它们不提供修改现有`String`对象状态的方法。它们仅提供基于现有对象的内容创建*新对象的方法。* `String`

*（当然，除非您确实在反射中玩非常顽皮的游戏，否则以上是当然的。）*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-09T19:43:10.347

还有一件事是，当你创建一个字符串时，会在堆中为其分配一块内存，当你更改它的值时，会为该字符串创建一个新的内存块，而旧的内存块将有资格进行垃圾回收， 例如

```
String first = "xyz";    
String second = "xyz";    
second = "abc"; 
```

现在，当第一个被创建时，在堆中为“第一个”保留一块内存，而“第二个”没有分配新空间，因为它们指向同一个东西，因此第二个指向堆中的相同空间，最后是当第二个值被改变它指向一个新的内存位置。因此字符串是不可变的，因为它的内容永远不会改变..它们被删除并分配新的内容...使用调试器并查看内存是如何被占用的..并注意原始数据类型的相同情况...内容不会改变他们的记忆位置..

希望能帮助到你！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-09T01:58:54.690

原因1.String是java中的对象。所以你不能随时改变..作为一个例子

```
String s= new String ("Md Omar Faroque");                                                                 
s.concat("anik");   
System.out.println(s); 
```

输出将是：“Md Omar Faroque”。

这是为什么？当您添加“Anik”和“Md Omar Faroque”时，它变成了一个名为“Md Omar Faroque Anik”的新字符串。此新字符串未引用任何新变量。S 仍然是“Md Omar Faroque”的参考变量。

再举一个例子：

```
1\. String s1 = "spring ";  
2\. String s2 = s1 + "summer ";  
3\. s1.concat("fall ");  
4\. s2.concat(s1);  
5\. s1 += "winter ";  
6\. System.out.println(s1 + " " + s2); 
```

输出应该是“春冬春夏”

这是为什么？在第 5 行，s1 变成了一个新的字符串“spring winter”。它忘记了之前的值“spring”。由于 s1 现在提到“春冬”，所以它已经打印出来了。
在第 2 行中，s2 引用了“春夏”。所以它已经打印在第 2 行，它再次与 s1 连接，并创建了新字符串“spring summer spring”。但是没有新变量引用这个值“spring summer spring”，仍然s2指向“spring summer”。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-06-14T18:24:21.533

```
public class Example{

    public static void main(String[] args) {
        String s = "hello";
        String a = s;
        if (a == s) {// it will print if part of statement
            System.out.println("same reference");
        } else {
            System.out.println("not same reference");
        }
        s = "hi";// now we have change this 's'
        if (a == s) { // if we have changed the same s reference the it should
                        // print same reference
            System.out.println("same reference");
        } else {
            System.out.println("not same reference");// but it will printed
        }

    }

} 
```***

# mobile - (Joomla) 我可以只为网站的移动版本消除主页中的幻灯片吗？

> ID：15198749
> 
> 赞同：-2
> 
> 时间：2013-03-04T09:55:35.540
> 
> 标签：mobile, joomla, content-management-system, gallery

我正在创建网站的移动版本。我正在使用 Joomla 2.5，我使用的模板是 Gantry ( [http://www.gantry-framework.org/](http://www.gantry-framework.org/) )。此模板支持手机版，并在 Joomla 后端提供了一组设置。

现在，我不能只为移动版删除主页中的幻灯片，因为它太贵了。你有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:38:13.490

打开 Chrome 开发工具、Firebug 或任何其他允许您检查网站的工具。检查幻灯片区域以获取主要元素 ID 或类，然后打开以下文件：

```
root/libraries/gantry/css/grid-responsive.css 
```

在第 173 行，您将看到以下代码，它定义了移动设备的屏幕尺寸。

```
@media only screen and (max-width: 480px) 
```

在其中，添加以下代码：

```
.wk-gallery-showcase { display: none; } 
```

希望这可以帮助

# jquery - Jquery Ajax 从数据库中读取数据

> ID：15198750
> 
> 赞同：0
> 
> 时间：2013-03-04T09:55:38.207
> 
> 标签：jquery

好的，我有这个功能可以从数据库中获取数据

```
 function ajaxd(){
      $.ajax({
       type: "GET",
       url: "getJackpot.asp?dx=<%=id%>",
       dataType: "text",
       data: "",
       success: function(data){
         Jackpot =data[0];

alert(data[0]);
       }
    }); 
```

下面是 getJackpot.asp 的 ASP 代码

```
 Dim rs, sql, varJackpot 

    set rs=Server.CreateObject("ADODB.RecordSet")
    sql = "select JackpotAmt from tblJAckpots where id = " & request("dx")
    rs.open sql, objConn, 3,2
        if not rs.EOF then
            varJackpot = cStr(rs("JackpotAmt"))
        else
            varJackpot = "Not Active"
        End If
    response.write varJackpot 
```

上面的jquery脚本在主页面执行时，返回的data[0]只包含返回值的第一个数字。实际值为 6420.23 但警报功能仅显示 6 并忽略其余部分。我错过了什么？我怀疑 dataType 但不确定。

**注意：**在浏览器中执行 getJackpot.asp 会返回正确的值，没有错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:29:10.263

试试这个，

> 大奖=数据；

我认为 data[0] 会给你字符串输入的第一个字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T10:14:56.517

我不是 ASP 人，但我在你的代码中发现了一些奇怪的东西：

1.  首先，不要`GET`通过发送 URL 参数来发送请求。而是将`dx`参数作为参数的值传递，该`data`参数将在处理 AJAX 请求的代码中作为`POST`变量提供。（取决于什么对你有用！）

2.  其次，我猜你必须在输出值后终止执行，在`exit`为 AJAX 打印输出后在 PHP 中使用这种方式。

3.  检查`Jackpot`变量的数据类型，我认为您必须将其编码为 JSON。在 JS 方面，您可以使用`$.parseJSON`.

试试这些步骤，也许它会解决你的问题！

# java - Java 简单 RMI 聊天应用程序

> ID：15198759
> 
> 赞同：2
> 
> 时间：2013-03-04T09:56:00.450
> 
> 标签：java, chat, rmi

我正在尝试使用**RMI**（*没有 GUI ）制作一个***非常简单**的聊天程序，但我正在努力寻找想法。客户端连接到服务器时如何注册？当我使用

 ***> RemoteServer.getClientHost()

所有这一切都是显示IP地址（对于从同一台计算机（来自多个命令窗口）连接的所有客户端，它们都是相同的。我想要实现的是：当客户端登录时，他会看到一个开关-案例菜单，如果他们按下

> 1.  他们得到一个已连接客户端的列表。
>     
>     
> 2.  发送消息（客户端，字符串）

但我不知道如何识别个人客户？

当我这样做时，如何仅在该客户端的窗口上显示字符串？

谢谢，

*研究：（我在网上看过一些想法，但其中很多比我想要的更先进。这是一个简单的应用程序，我不想让它复杂化/复制我不明白的代码）。以前有关于 SO 的问题，但答案为 0/1（不是很受欢迎的话题！）或者没有帮助！*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:48:20.473

看起来我找到了我想要的东西：

**RMI 回调**

基本上使每个客户端都成为服务器，因此服务器可以响应和接收消息。

我已被定向到可能有帮助的资源：

[Java 网络编程和分布式计算 David Reilly 和 Michael Reilly](http://www.dct.udn.vn/daotao/Resource/82487.pdf)***

# php - 搜索表格列

> ID：15198760
> 
> 赞同：0
> 
> 时间：2013-03-04T09:56:00.483
> 
> 标签：php, html, sql

我有一个名为 modules 的表和一个名为“type”的表列 (varchar)，我在其中输入来自 4 个单选按钮（选择、文本、布尔值或数字）的数据。现在我想编辑这些数据，假设表中的某行具有 boolean 类型的列，我想做一些事情。如果它有数字，我想做其他事情，等等。我如何搜索数据并将其写出来？而且我不想将它们分组 - 我不希望所有“文本”都在一起，我想用不断增加的 ID 将它们写出来。

我的表如下所示：

```
ID=1 type=text, ID=2 type=boolean, ID=3 type=select, ID=4 type=numeric,... 
```

现在我想用html写出来。可以说我想让它像这样：循环，检查第一个中的“类型”是什么，然后写出来。

我有一个主键，它是 ID，它是自动递增的。

用户使用单选按钮来选择参数的类型。所以我在 html 中显示所有这些参数。如果是文本类型，我想显示一个文本字段，如果是布尔值，我想显示 2 个单选按钮（是/否），如果是数字，我想显示一个文本字段，如果是选择我想显示一个选择框。我对 php 很陌生，我不知道如何解释它。

用户选择哪种类型的部分已经完成，我正在更新我的表格模块......我现在不知道如何检查每一行中的“类型”是什么，所以我可以用不同的方式写出来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:26:04.350

做这个 ：

```
$select = mysql_query("select * from modules order by ID asc") or die(mysql_error());
while($row = mysql_fetch_array($select))
{
    if($row['type']=="text")    
    {
        echo '<input type="text" name="text_field_name_'.$row['ID'].'" id="text_field_name_'.$row['ID'].'" value="Text Field">';
    }
    else if($row['type']=="numeric")    
    {
        echo '<input type="text" name="numeric_field_name_'.$row['ID'].'" id="numeric_field_name_'.$row['ID'].'" value="Numeric Field">';
    }
    else if($row['type']=="boolean")    
    {
        echo '<input type="radio" name="boolean_field_name_'.$row['ID'].'" id="boolean_field_name_'.$row['ID'].'" value="Yes">Yes&nbsp;
          <input type="radio" name="boolean_field_name_'.$row['ID'].'" id="boolean_field_name_'.$row['ID'].'" value="No">No';
    }
    else if($row['type']=="select") 
    {
        echo '<select name="combo_field_name_'.$row['ID'].'" id="combo_field_name_'.$row['ID'].'">
          <option>-----Select-----</option>
    </select>';
    }

} 
```

# listview - 将外部文件拖放到 VB6 ListView 控件上

> ID：15198766
> 
> 赞同：1
> 
> 时间：2013-03-04T09:56:18.620
> 
> 标签：listview, windows-7, vb6, drag-and-drop, oledragdrop

我正在尝试将外部文件（来自 Windows 文件资源管理器）拖放到`ListView`控件上。我以前做过，但似乎无法触发这些事件。

我的步骤如下：

*   创建一个列表视图控件
*   将视图属性设置为`3 - lvwReport`
*   将 OLEDropMode 属性设置为`1 -ccOLEDropManual`

我以为这就是我所要做的，但我的`ListView1_OLEDragDrop`事件没有触发。

为了以防万一，我用几个项目填充了 ListView。

我尝试`Effect = vbDropEffectCopy`在`ListView1_OLEDragOver`和中设置，`ListView1_OLEGiveFeedback`但这似乎也没有效果（这甚至不会改变光标）

注意：我可以在拖出控件时触发 StartDrag 事件

有人可以确认这仍然适用于 Windows 7 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:48:13.400

它似乎是[UIPI（用户界面特权隔离）](http://en.wikipedia.org/wiki/User_Interface_Privilege_Isolation)，一种新的安全功能，不允许较低特权的应用程序与较高特权的应用程序交互。它可以被绕过，主要是为了允许 UI 自动化应用程序。要绕过三件事必须做：

**1.**创建一个 pfx 文件并将其作为受信任的根证书颁发机构导入。

要创建 pfx 文件，请下载 Openssl 并从命令提示符运行：

```
openssl req -x509 -nodes -days 365 -newkey rsa:1024 -keyout mycert.pem -out mycert.pem 
```

然后，

```
openssl pkcs12 -export -out mycert.pfx -in mycert.pem -name "My Certificate" 
```

然后导入证书： ![选择证书存储](../Images/b0a482909be0f98e5200031f351a8d7c.png)

**2.**通过在命令提示符下输入以下内容，使用 Visual Studio 附带的 signtool 使用您的证书对您的程序进行签名：

```
signtool sign /t http://timestamp.digicert.com /f "c:\path\to\mycert.pfx" /p pfxpassword "c:\path\to\file.exe" 
```

**3.**在您的 exe 的清单文件中包含一个将 UIaccess 定义设置为 true 的 trustInfo 部分。我使用[Make My Manifest](http://sourceforge.net/projects/ummm/)做到了这一点：

![嗯](../Images/5742a3ea3805753276638d45b024f30c.png)

现在，应用程序应该能够绕过 UIPI，但前提是从安全位置运行，例如“C:\Program Files\”、“C:\Windows\”或其中任何一个的子目录。

或者，您可以禁用 UAC。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:22:07.783

以管理员身份运行时，拖放到 ListView 上似乎不起作用。

*   当我在 IDE（设置为以管理员身份运行）中尝试此操作时，它不起作用。
*   如果我使用我编译的 exe，它可以工作，但如果我以管理员身份运行我编译的 exe（右键单击`Run As Admin`），它就不起作用。

我不知道*为什么*它不起作用

# asp.net - sqlDataSource 选择不适用于 where 子句

> ID：15198770
> 
> 赞同：1
> 
> 时间：2013-03-04T09:56:38.640
> 
> 标签：asp.net, ado.net, sqldatasource

我将gridview绑定到sqldatasource。我的问题是，当我在select语句中使用没有where子句的sqldatasource时它工作正常，但是当我将它与where子句一起使用时，它在Query Builder测试和返回记录中工作正常，但在运行时不起作用。我使用 Sql Profiler 并看到当我使用 where 子句时查询未运行。我听说 .NET 由于 sql 注入而阻止使用 where 子句运行查询，但我不知道如何更正我的查询。我的 sql 数据源：

```
<asp:SqlDataSource ID="SqlDataSource2" runat="server" 
        ConnectionString="<%$ ConnectionStrings:chargeDBConnectionString %>"  SelectCommand="SELECT CARDNUMBER, VISITDATE, ACCNUMBER, ACTIONCODE FROM LOGTABLE WHERE (CARDNUMBER = @cardno OR @cardno IS NULL AND CARDNUMBER &lt;&gt; N'-' AND @ttype = 1 OR @ttype = 0) AND (VISITDATE &gt;= @fdate AND VISITDATE &lt;= @edate) AND (ACCNUMBER = @accno OR @accno IS NULL AND ACCNUMBER &lt;&gt; N'-' AND @ttype = 0 OR @ttype = 1) AND (ACTIONCODE = @actioncode OR @actioncode IS NULL)">
        <SelectParameters>
            <asp:FormParameter FormField="cardNo" Name="cardno" />
            <asp:ControlParameter ControlID="ddlType" Name="ttype" 
                PropertyName="SelectedValue" />
            <asp:FormParameter FormField="fromDate" Name="fdate" />
            <asp:FormParameter FormField="toDate" Name="edate" />
            <asp:FormParameter FormField="accNo" Name="accno" />
            <asp:ControlParameter ControlID="ddltransname" Name="actioncode" 
                PropertyName="SelectedValue" />
        </SelectParameters>
    </asp:SqlDataSource> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T15:54:22.773

The most likely culprit is that one of your parameters is evaluating to null, and the `SqlDataSource` is cancelling the select query.

To correct that, you need to set the [SqlDataSource.CancelSelectOnNullParameter](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.sqldatasource.cancelselectonnullparameter.aspx) property to false (it is true by default) in your SqlDataSource declaration:

```
<asp:SqlDataSource ID="SqlDataSource2" runat="server" 
    ConnectionString="<%$ ConnectionStrings:chargeDBConnectionString %>"  
    SelectCommand="SELECT CARDNUMBER, VISITDATE, ACCNUMBER, ACTIONCODE FROM LOGTABLE WHERE (CARDNUMBER = @cardno OR @cardno IS NULL AND CARDNUMBER &lt;&gt; N'-' AND @ttype = 1 OR @ttype = 0) AND (VISITDATE &gt;= @fdate AND VISITDATE &lt;= @edate) AND (ACCNUMBER = @accno OR @accno IS NULL AND ACCNUMBER &lt;&gt; N'-' AND @ttype = 0 OR @ttype = 1) AND (ACTIONCODE = @actioncode OR @actioncode IS NULL)"
    CancelSelectOnNullParameter="False">
    <SelectParameters>
        <asp:FormParameter FormField="cardNo" Name="cardno" />
        <asp:ControlParameter ControlID="ddlType" Name="ttype" 
            PropertyName="SelectedValue" />
        <asp:FormParameter FormField="fromDate" Name="fdate" />
        <asp:FormParameter FormField="toDate" Name="edate" />
        <asp:FormParameter FormField="accNo" Name="accno" />
        <asp:ControlParameter ControlID="ddltransname" Name="actioncode" 
            PropertyName="SelectedValue" />
    </SelectParameters>
</asp:SqlDataSource> 
```

# jquery - 如何使用 jQuery 在已解析的 XML 中编辑标签？

> ID：15198776
> 
> 赞同：2
> 
> 时间：2013-03-04T09:56:49.560
> 
> 标签：jquery, xml

我得到了 XML 内容并保存到另一个 var 中：

```
 $.get("content.xml",function(d){
    ....
    xml=d;
  } 
```

后面的一些代码：

```
 $("tag_name_inXML",xml).text("new_content");
  alert($("tag_name_inXML",xml).text()); //alerts the original content..why? 
```

我也试过这个：

```
 $(xml).find("tag_name_inXML").text("new_content");
 alert($(xml).find("tag_name_inXML").text()); //also alerts the original content..why? 
```

我只想解析一个 XML，编辑它并通过 PHP 保存它。

我也试过这个：

```
 $.get("content.xml",function(d){
    ....
    xml=$(d); 
  }
  ...
  xml.find("tag_name_inXML").text("new_content");
  alert(xml.find("tag_name_inXML").text());//Alerts the NEW! content but.. 
```

...我无法发送

```
 $.get("save_xml.php",{xml_send:xml}); 
```

我得到了 TypeError：非法调用

我已经没有想法了...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T10:15:26.897

您只需要将`xml`jQuery 对象转换为包含更改后的 xml 的字符串。

按照您的这些代码：

```
$.get("content.xml",function(d){
    ....
    xml=$(d); 
  }
  ...
  xml.find("tag_name_inXML").text("new_content");
  alert(xml.find("tag_name_inXML").text());//Alerts the NEW! content but.. 
```

尝试更改`xml`为`xml[0].outerHTML`：

```
$.get("save_xml.php",{xml_send:xml[0].outerHTML}); 
```

# jquery - Prettyphoto 和事件点击 iframe

> ID：15198777
> 
> 赞同：0
> 
> 时间：2013-03-04T09:56:56.863
> 
> 标签：jquery, iframe, onclick, frame, prettyphoto

uu我正在尝试检测 iframe 内的点击事件。我已经在 SO 上找到了一些（不工作的）解决方案，但我无法修复它们并让它们在我的代码上工作。

如何检测 iframe 内的点击事件的目标？

由于 PrettyPhoto 只是由

```
$("a[rel^='prettyPhoto']").prettyPhoto(); 
```

我希望有一个类似于

```
$("a[rel^='prettyPhoto']").prettyPhoto(
     $('#myframe').bind('click', function(event) {
          alert("cliked");
     })
); 
```

但这不起作用。任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:58:41.963

利用`.on()`

```
$('#myframe').on('click', function(event) {
       alert("cliked");
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T10:22:49.050

你可以把它放在外面，`prettyphoto();`如果你使用的是最新的 jquery，那么使用`.on()`处理程序：

```
$("a[rel^='prettyPhoto']").prettyPhoto();
$('#myframe').on('click', function(event) {
      alert("cliked");
}); 
```

# ios6 - iOS 日历限制导致应用崩溃

> ID：15198781
> 
> 赞同：0
> 
> 时间：2013-03-04T09:57:13.573
> 
> 标签：ios6, calendar, settings, ipod-touch, restrictions

这是我的场景：

我正在从我的应用程序向 iOS 日历添加一个事件。就在添加事件之前（正在显示添加日历的事件视图），如果用户转到设置-->常规-->限制-->日历并限制我的应用程序的权限，则应用程序崩溃。

有没有人遇到过这样的问题？有什么线索吗？因为 xcode 在崩溃时没有提供任何相关日志。我在 iOS 6.0 iPod Touch 中运行应用程序。

希望有人能提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T09:11:47.110

首先获得访问日历事件的权限，然后添加事件。获得许可的代码

EKEventStore eventStore = [[EKEventStore alloc] init];

```
if ([eventStore respondsToSelector:@selector(requestAccessToEntityType:completion:)])
{
    [eventStore requestAccessToEntityType:EKEntityTypeEvent completion:^(BOOL granted, NSError *error)
     {
         if (granted){

             MLLog(@"Wipe : getEventStorePermission : permission granted");
         }
         else{
             MLLog(@"Wipe : getEventStorePermission : permission not granted");
         }
     }];
}
else{

    MLLog(@"Wipe : getEventStorePermission : permission not required");
}

RELEASE_OBJECT(eventStore) 
```

# c# - 列表框项和选定项

> ID：15198784
> 
> 赞同：0
> 
> 时间：2013-03-04T09:57:19.573
> 
> 标签：c#, sqlite

我有一个带有 ListBox 和数据库类的表单。表单从数据库中调用一个方法，该方法返回一个字符串。

```
public listItem()
    {
        InitializeComponent();
        Db = new Database();
        itemList = new List<string>();
        showAllItems();
    } 
```

现在，showAllItems 函数调用 Db.getAllitems() 函数，该函数返回一个列表。

```
private void showAllItems()
    {
        itemList = Db.getAllItems();
        lb_itemList.DataSource = itemList;
    } 
```

列表显示列表框中所有项目的名称。但是，我也想返回项目的描述。但我不希望描述显示在列表框中。我希望它显示在列表框旁边的标签上，该标签显示所选项目的描述。

我的主要问题是，我不知道如何在不显示列表框中的所有数据的情况下返回多个数据。我只希望列表框中的名称和其他数据显示在标签上的列表框旁边，具体取决于列表框中的所选项目

```
 public List<string> getAllItems()
    {
        List<string> itemList = new List<string>();
        SQLiteConnection connection = new SQLiteConnection("Data Source=HCI.db");
        connection.Open();

        SQLiteCommand cmd = new SQLiteCommand("SELECT rid, name, category, price, status, specific FROM items", connection);
        SQLiteDataReader reader = cmd.ExecuteReader();

        if (reader.HasRows)
        {
            while (reader.Read())
            {
                //itemList.Add(reader.GetString(reader.GetInt64(rid)));
                itemList.Add(reader.GetString(reader.GetOrdinal("name")));
                itemList.Add(reader.GetString(reader.GetOrdinal("category")));
                itemList.Add(reader.GetString(reader.GetOrdinal("price")));
                itemList.Add(reader.GetString(reader.GetOrdinal("status")));
                itemList.Add(reader.GetString(reader.GetOrdinal("specific")));

            }
        }
        connection.Close();
        return itemList;

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:07:30.707

您可以创建另一个包含您的班级的列表，并在您选择列表框中的项目时从列表中获取项目。

```
public class YourClass{
    public int Id { get; set; }
    public string Name { get; set; }
    public decimal Price { get; set; }
    public string Description { get; set; }
}

public List<YourClass> getAllItems()
{
List<string> itemList = new List<string>();
SQLiteConnection connection = new SQLiteConnection("Data Source=HCI.db");
connection.Open();

SQLiteCommand cmd = new SQLiteCommand("SELECT rid, name, category, price, status, specific FROM items", connection);
SQLiteDataReader reader = cmd.ExecuteReader();

if (reader.HasRows)
{
    while (reader.Read())
    {
        //itemList.Add(reader.GetString(reader.GetInt64(rid)));
        itemList.Add(new YourClass(){
      Id = reader.GetString(reader.GetInt64("Id")),
      Name = reader.GetString(reader.GetOrdinal("name")),
      Description = reader.GetString(reader.GetOrdinal("desc")),
      Price = reader.GetString(reader.GetOrdinal("price"))
});               

    }
}
connection.Close();
return itemList;

}

//in your selectedindexchanged event
private void lb_itemList_SelectedIndexChanged(object sender, EventArgs e)
{
    if (lb_itemList.SelectedIndex > -1)
    {
          var item = lb_itemList.SelectedItem as YouClass;
          if (item != null)
          {
                lblDescription.Text = item.Description;
                lblPrice.Text = item.Price
          }
    }
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T10:16:19.430

像这样创建自定义`Class`：

```
public class Item 
{
     public string Name;
     public string Description;
} 
```

然后更改您的返回方法：

```
public List<Item> getAllItems()
{
        List<Item> itemList = new List<Item>();
        SQLiteConnection connection = new SQLiteConnection("Data Source=HCI.db");
        connection.Open();

        SQLiteCommand cmd = new SQLiteCommand("SELECT rid, name, category, price, status, specific FROM items", connection);
        SQLiteDataReader reader = cmd.ExecuteReader();

        if (reader.HasRows)
        {
            while (reader.Read())
            {
                //itemList.Add(reader.GetString(reader.GetInt64(rid)));
                var item = new Item();
                item.Name = reader.GetString(reader.GetOrdinal("name"));
                item.Description = reader.GetString(reader.GetOrdinal("specific"))
                itemList.Add(item);
            }
        }
        connection.Close();
        return itemList;
} 
```

并将其绑定到您的列表，如下所示：

```
private void showAllItems()
{
        itemList = Db.getAllItems();
        lb_itemList.DisplayMember = "Name";
        lb_itemList.DataSource = itemList;
} 
```

最后一个实现`SelectedIndexChanged`事件来处理描述标签：

```
private void lb_itemList_SelectedIndexChanged(object sender, EventArgs e)
{
        if (lb_itemList.SelectedIndex > -1)
        {
              var item = lb_itemList.SelectedItem as Item;
              if (item != null)
              {
                    lblDescription.Text = item.Description;
              }
        }
} 
```

# ontology - 如何使用 OWL API 将个人添加到类中？

> ID：15198791
> 
> 赞同：1
> 
> 时间：2013-03-04T09:57:46.317
> 
> 标签：ontology, owl-api

我想将一个人添加到一个类中，我在 OWL API 官方站点中引用了该文档。

这是我的代码。

```
public void addIndividualsToClass(String className, String indName) throws OWLOntologyStorageException{
    /*
     * Add an individual to input class
     */
    OWLClass tClass = fac.getOWLClass(IRI.create(NS + className));
    OWLNamedIndividual tIndividual = fac.getOWLNamedIndividual(IRI.create(NS + indName));
    OWLClassAssertionAxiom classAssertion = fac.getOWLClassAssertionAxiom(tClass, tIndividual);
    manager.addAxiom(ont, classAssertion);
    manager.saveOntology(ont, new StreamDocumentTarget(new ByteArrayOutputStream()));
} 
```

然后，eclipse 抛出这个异常。

```
Exception in thread "main" java.lang.IllegalArgumentException: Comparison method violates its general contract!
at java.util.ComparableTimSort.mergeLo(ComparableTimSort.java:714)
at java.util.ComparableTimSort.mergeAt(ComparableTimSort.java:451)
at java.util.ComparableTimSort.mergeCollapse(ComparableTimSort.java:376)
at java.util.ComparableTimSort.sort(ComparableTimSort.java:182)
at java.util.ComparableTimSort.sort(ComparableTimSort.java:146)
at java.util.Arrays.sort(Arrays.java:472)
at java.util.Collections.sort(Collections.java:155)
at org.coode.owlapi.owlxml.renderer.OWLXMLObjectRenderer.visit(OWLXMLObjectRenderer.java:184)
at uk.ac.manchester.cs.owl.owlapi.OWLOntologyImpl.accept(OWLOntologyImpl.java:1630)
at org.coode.owlapi.owlxml.renderer.OWLXMLRenderer.render(OWLXMLRenderer.java:106)
at org.coode.owlapi.owlxml.renderer.OWLXMLOntologyStorer.storeOntology(OWLXMLOntologyStorer.java:73)
at org.semanticweb.owlapi.util.AbstractOWLOntologyStorer.storeOntology(AbstractOWLOntologyStorer.java:174)
at uk.ac.manchester.cs.owl.owlapi.OWLOntologyManagerImpl.saveOntology(OWLOntologyManagerImpl.java:870)
at uk.ac.manchester.cs.owl.owlapi.OWLOntologyManagerImpl.saveOntology(OWLOntologyManagerImpl.java:861)
at Test.addIndividualsToClass(Test.java:146)
at Test.main(Test.java:155) 
```

有人能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:46:21.667

这应该有效。您应该查看[http://owlapi.sourceforge.net/index.html的 OWL-API 页面上的 Examples.java](http://owlapi.sourceforge.net/index.html)

```
public static void createNewOnto() throws OWLOntologyCreationException,
        OWLOntologyStorageException {
    OWLOntologyManager manager = OWLManager.createOWLOntologyManager();
    IRI ontologyIRI = IRI.create("http://example.com/owlapi/families");
    OWLOntology ont = manager.createOntology(ontologyIRI);
    OWLDataFactory factory = manager.getOWLDataFactory();

    OWLIndividual john = factory.getOWLNamedIndividual(IRI
            .create(ontologyIRI + "#John"));
    OWLIndividual mary = factory.getOWLNamedIndividual(IRI
            .create(ontologyIRI + "#Mary"));
    OWLIndividual susan = factory.getOWLNamedIndividual(IRI
            .create(ontologyIRI + "#Susan"));
    OWLIndividual bill = factory.getOWLNamedIndividual(IRI
            .create(ontologyIRI + "#Bill"));

    OWLObjectProperty hasWife = factory.getOWLObjectProperty(IRI
            .create(ontologyIRI + "#hasWife"));

    OWLObjectPropertyAssertionAxiom axiom1 = factory
            .getOWLObjectPropertyAssertionAxiom(hasWife, john, mary);

    AddAxiom addAxiom1 = new AddAxiom(ont, axiom1);
    // Now we apply the change using the manager.
    manager.applyChange(addAxiom1);

    System.out.println("RDF/XML: ");
    manager.saveOntology(ont, new StreamDocumentTarget(System.out));

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-14T16:41:36.380

以下适用于 OWL-API 版本 5。它展示了如何向本体添加类断言公理，即断言个体是类的实例。

```
public void addIndividualsToClass(String className, String indName) throws Exception{

    PrefixManager pm = new DefaultPrefixManager(NS); // assuming NS is string and is your namespace
    OWLClass tClass = fac.getOWLClass("#" + className, pm); //assuming '#' is your delimiter
    OWLIndividual tIndividual = fac.getOWLNamedIndividual("#" + indName, pm);
    OWLClassAssertionAxiom classAssertion = fac.getOWLClassAssertionAxiom(tClass, tIndividual);
    manager.addAxiom(ont, classAssertion);
    manager.saveOntology(ont);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-06T15:51:39.970

只是提到一些示例和方法已被弃用

# ios - 当我的应用程序从后台模式启动时，我是否有足够的时间来执行服务器更新？

> ID：15198795
> 
> 赞同：0
> 
> 时间：2013-03-04T09:58:13.353
> 
> 标签：ios, ios5, ios6, core-location, background-process

我找不到任何关于此的文档。如果我的应用程序能够使用后台定位服务，那么在设备停止任务之前它真的可以做多少处理，因为它使用了太多资源？

例如，当位置发生变化时，我想用新位置 ping 我的服务器。

问候：

约翰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T10:53:01.397

如果一个应用程序有在后台获取位置更新的权限，那么你就不受限制执行任何任务，所以你可以运行任何代码，因为应用程序被允许在暂停时执行代码（这是由提供的应用程序使用的）导航）。但是，请注意，Apple 不会批准具有后台位置更新权限的应用程序，除非它是可以证明此要求的应用程序（运动跟踪应用程序、导航应用程序等）

您可以从区域监控或重大位置更改中获取位置更新，而无需使用位置更新后台模式。

所以现在是棘手的部分。当我的应用程序通过区域监控或重要位置服务从后台模式启动时，我是否有足够的时间来执行用户位置的服务器更新？

[正如本文所建议的](http://www.mindsizzlers.com/2011/07/ios-background-location/)，答案**似乎是肯定的**

我还没有尝试过，但是从代码来看，我找不到这不起作用的原因！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T10:36:13.823

您必须在 info.plist 中声明 App 支持的后台任务

在信息属性列表下添加数组给定格式如下：

信息属性列表（字典）-> 所需背景模式（数组）（1 项）-> 项 0（字符串）- 应用程序注册位置更新

在 info.plist 中的这些设置之后，您可以在 AppDelegate 的后台进程中执行您想要执行的代码：

```
- (void)applicationDidBecomeActive:(UIApplication *)application 
```

{ /* 重新启动任何在应用程序处于非活动状态时暂停（或尚未启动）的任务。如果应用程序之前在后台，可选择刷新用户界面。*/ self.locationManager = [[CLLocationManager alloc] init]; _locationManager.delegate = self;

```
[_locationManager stopMonitoringSignificantLocationChanges];
[_locationManager startUpdatingLocation]; 
```

}

欲了解更多信息，您可以访问：

[声明应用支持的后台任务](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)

# java - 如何动态检查检票口中的现有用户

> ID：15198796
> 
> 赞同：1
> 
> 时间：2013-03-04T09:58:18.143
> 
> 标签：java, wicket

在我的网络应用程序中，我有新用户的注册表单。还有一个字段用户名：

```
 TextField<String> username = new TextField<String>("username");
    username.add(UsernameValidator.getInstance()); 
```

当用户按下按钮时，用户名被验证。但这种行为对用户不友好。是否有一些选项如何动态验证这一点以及验证用户无法按下按钮是否有错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:19:35.380

您可以使用：[OnChangeAjaxBehavior](http://ci.apache.org/projects/wicket/apidocs/6.0.x/org/apache/wicket/ajax/form/OnChangeAjaxBehavior.html)

```
 username.add(new OnChangeAjaxBehavior() {

     @Override
     protected void onUpdate(AjaxRequestTarget target) {
        //do stuff here
     }
  }); 
```

# c# - Windows Phone 8 计划任务自定义用户控件

> ID：15198806
> 
> 赞同：0
> 
> 时间：2013-03-04T09:58:52.073
> 
> 标签：c#, windows-phone-8, windows-phone, lockscreen

我已经成功地在我的 WP8 应用程序中实现了锁屏背景，该应用程序使用自定义用户控件并将其呈现为可写位图，因为我想要一个动态锁屏，例如天气锁屏。

我现在想实现一个后台任务来生成这个图像并检查新的天气数据，但我无法使用我创建的自定义用户控件。

有没有办法可以在后台任务中使用我的用户控件？我曾想过创建一个生成此图像的 Web 服务，而后台任务将调用此服务并检索图像。但首先我想检查是否有任何方法可以从应用程序本身中做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:12:08.677

鉴于您提供的信息，只是猜测：您不能使用后台代理项目中的用户控件，因为它是在主项目中声明的？

如果是这样，您所要做的就是创建第三个项目（类型为“类库”）。移动该项目中的用户控件以及所有必要的依赖项。然后您可以从主项目和后台代理的项目中引用这第三个项目。

# c++ - 为什么 std::initializer_list 不是内置语言？

> ID：15198807
> 
> 赞同：100
> 
> 时间：2013-03-04T09:58:52.143
> 
> 标签：c++, c++11, std, initializer-list

## 为什么没有`std::initializer_list`内置核心语言？

在我看来，它是 C++11 的一个非常重要的特性，但它没有自己的保留关键字（或类似的东西）。

相反，`initializer_list`它*只是*标准库中的一个模板类，它具有来自编译器处理的新*花括号初始化列表语法的特殊隐式**映射。* *`{...}`*

 *乍一看，这个解决方案很*hacky*。

这是现在实现 C++ 语言新增功能的方式吗：通过某些模板类的**隐式角色**而不是通过**核心**语言？

* * *

**请考虑以下示例：**

```
 widget<int> w = {1,2,3}; //this is how we want to use a class 
```

为什么选择一个新班级：

```
 widget( std::initializer_list<T> init ) 
```

而不是使用**类似于**任何这些想法的东西：

```
 widget( T[] init, int length )  // (1)
   widget( T... init )             // (2)
   widget( std::vector<T> init )   // (3) 
```

1.  一个经典的数组，你可以在`const`这里和那里添加
2.  语言中已经存在三个点（var-args，现在是可变参数模板），为什么不重用语法（并让它感觉*是内置的*）
3.  只是一个现有的容器，可以添加`const`和`&`

它们都已经是语言的一部分。我只写了我的 3 个最初的想法，我相信还有**很多**其他的方法。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-03-04T10:30:34.927

已经有一些“核心”语言特性的例子返回`std`命名空间中定义的类型。`typeid`返回`std::type_info`和（也许延伸一点）`sizeof`返回`std::size_t`。

在前一种情况下，您已经需要包含一个标准标题才能使用这个所谓的“核心语言”功能。

现在，对于初始化列表，恰好不需要关键字来生成对象，语法是上下文相关的花括号。除此之外，它与`type_info`. 就我个人而言，我不认为缺少关键字会使其“更加hacky”。也许更令人惊讶，但请记住，目标是允许聚合已经允许的相同的花括号初始化器语法。

所以是的，你可能会期待更多的这种设计原则：

*   如果出现更多可以在没有新关键字的情况下引入新功能的情况，那么委员会将采用它们。
*   如果新特性需要复杂类型，那么这些类型将被放置`std`而不是内置。

因此：

*   如果一个新特性需要一个复杂的类型并且可以在没有新关键字的情况下引入，那么你会在这里得到你所拥有的，这是没有新关键字的“核心语言”语法，它使用来自`std`.

归根结底，我认为，在 C++ 中，“核心语言”和标准库之间没有绝对的区别。它们是标准中的不同章节，但相互引用，而且一直如此。

在 C++11 中还有另一种方法，即 lambdas 引入具有由编译器生成的*匿名类型的对象。*因为它们没有名称，所以它们根本不在命名空间中，当然不在`std`. 但是，这不是初始化列表的合适方法，因为您在编写接受类型的构造函数时使用类型名称。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2013-03-04T10:02:54.050

C++ 标准委员会似乎不喜欢添加新关键字，可能是因为这会增加破坏现有代码的风险（遗留代码可以使用该关键字作为变量、类或其他任何名称的名称）。

此外，在我看来，定义`std::initializer_list`为模板化容器是一个非常优雅的选择：如果它是一个关键字，你将如何访问它的底层类型？你将如何迭代它？您还需要一堆新的运算符，而这只会迫使您记住更多的名称和更多的关键字来做与标准容器相同的事情。

将 a`std::initializer_list`视为任何其他容器使您有机会编写适用于任何这些事物的通用代码。

**更新：**

> 那为什么要引入一种新类型，而不是使用现有的某种组合呢？*（来自评论）*

首先，所有其他容器都有添加、删除和放置元素的方法，这对于编译器生成的集合来说是不可取的。唯一的例外是`std::array<>`，它包装了一个固定大小的 C 样式数组，因此仍然是唯一合理的候选者。

但是，正如[**Nicol Bolas**](https://stackoverflow.com/users/734069/nicol-bolas)在评论中正确指出的那样，`std::initializer_list`与所有其他标准容器（包括`std::array<>`）之间的另一个根本区别是后者具有*值语义*，而`std::initializer_list`具有*引用语义*。例如，复制`std::initializer_list`不会导致复制它包含的元素。

此外（再次由 Nicol Bolas 提供），拥有一个用于大括号初始化列表的特殊容器允许在用户执行初始化的方式上重载。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-04T10:02:37.373

这不是什么新鲜事。例如，`for (i : some_container)`依赖于类[中特定方法或独立函数的存在](http://www.cprogramming.com/c++11/c++11-ranged-for-loop.html)`some_container`。C# 甚至更多地依赖于它的 .NET 库。实际上，我认为这是一个非常优雅的解决方案，因为您可以使您的类与某些语言结构兼容，而不会使语言规范复杂化。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-07T03:53:14.400

这确实不是什么新鲜事，有多少人指出，这种做法在 C++ 中就有，在 C# 中也有。

不过，Andrei Alexandrescu 提到了一个很好的观点：您可以将其视为想象中的“核心”命名空间的一部分，那么它会更有意义。

所以，它实际上是这样的：`core::initializer_list`, `core::size_t`, `core::begin()`,`core::end()`等等。这只是一个不幸的巧合，`std`命名空间内部有一些核心语言结构。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-08T16:48:38.927

它不仅可以在标准库中完全工作。包含到标准库中并不意味着编译器不能玩聪明的把戏。

虽然它可能无法在所有情况下，但它很可能会说：这种类型是众所周知的，或者是一个简单的类型，让我们忽略它`initializer_list`并且只拥有一个初始化值应该是什么的内存映像。

换句话说`int i {5};`，可以等效于`int i(5);`或`int i=5;`什至`intwrapper iw {5};`Where `intwrapper`is a simple wrapper class over an int with a trivial constructor take an`initializer_list`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-04T13:35:28.590

它不是核心语言的一部分，因为它可以完全在库中实现，只需行`operator new`和`operator delete`. 使编译器更复杂地构建它有什么好处？*

# exception - play framework 2, Incomplete trailing escape (%) 模式中的内部错误如何处理

> ID：15198809
> 
> 赞同：1
> 
> 时间：2013-03-04T09:58:59.513
> 
> 标签：exception, playframework-2.0, internal

我刚刚完成了一个非常简单的回显程序，将名称发送到服务器，然后将其发送回客户端。但问题是：

名称应首先使用 UTF-8 编码，例如`%xy%xy%...`

然后我们将它发送到服务器：`myhost:9000/send/%xy%xy...`

方法是这样的：

```
public static Result send(final String name)
{
...
} 
```

如果数据正确，则可以成功解码，没有任何异常和错误。但有时，编码后的名称可能无效，例如`%20%A`. 结果，它无法解码并导致**内部错误**。该过程甚至无法进入“发送”方法。

**我想知道当我输入 url `myhost:9000/send/%20%A，然后将结果（假设它是“错误名称”）发送回客户端时，如何捕获此错误？**

例外情况是：

```
 Unexpected exception
IllegalArgumentException: URLDecoder: Incomplete trailing escape (%) pattern java.lang.IllegalArgumentException: URLDecoder: Incomplete trailing escape (%) pattern
 java.net.URLDecoder.decode(URLDecoder.java:187)
 play.api.mvc.PathBindable$$anon$9.bind(Binders.scala:365)
 play.api.mvc.PathBindable$$anon$9.bind(Binders.scala:364)
 play.core.Router$RouteParams$$anonfun$fromPath$1.apply(Router.scala:1036)
 play.core.Router$RouteParams$$anonfun$fromPath$1.apply(Router.scala:1036)
 scala.Option.map(Option.scala:133)
 play.core.Router$RouteParams.fromPath(Router.scala:1036)
 Routes$$anonfun$routes$1.apply(routes_routing.scala:179)
 Routes$$anonfun$routes$1.apply(routes_routing.scala:87)
 scala.PartialFunction$$anon$3.apply(PartialFunction.scala:67)
 scala.PartialFunction$$anon$3.apply(PartialFunction.scala:66)
 play.core.Router$Routes$class.handlerFor(Router.scala:1251)
 Routes$.handlerFor(routes_routing.scala:14)
 play.api.GlobalSettings$$anonfun$onRouteRequest$1$$anonfun$apply$1.apply(Global.scala:64)
 play.api.GlobalSettings$$anonfun$onRouteRequest$1$$anonfun$apply$1.apply(Global.scala:63)
 scala.Option.flatMap(Option.scala:146)
 play.api.GlobalSettings$$anonfun$onRouteRequest$1.apply(Global.scala:63)
 play.api.GlobalSettings$$anonfun$onRouteRequest$1.apply(Global.scala:63)
 scala.Option.flatMap(Option.scala:146)
 play.api.GlobalSettings$class.onRouteRequest(Global.scala:63)
 play.api.DefaultGlobal$.onRouteRequest(Global.scala:120)
 play.core.server.Server$$anonfun$sendHandler$1$1.apply(Server.scala:60)
 play.core.server.Server$$anonfun$sendHandler$1$1.apply(Server.scala:59)
 scala.Either$RightProjection.map(Either.scala:285)
 play.core.server.Server$class.sendHandler$1(Server.scala:59)
 play.core.server.Server$$anonfun$getHandlerFor$4.apply(Server.scala:89)
 play.core.server.Server$$anonfun$getHandlerFor$4.apply(Server.scala:88)
 scala.Either$RightProjection.flatMap(Either.scala:277)
 play.core.server.Server$class.getHandlerFor(Server.scala:88)
 play.core.server.NettyServer.getHandlerFor(NettyServer.scala:38)
 play.core.server.netty.PlayDefaultUpstreamHandler.messageReceived(PlayDefaultUpstreamHandler.scala:226)
 org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:75)
 org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:563
 org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)
 org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:296)
 org.jboss.netty.handler.codec.frame.FrameDecoder.unfoldAndFireMessageReceived(FrameDecoder.java:366)
 org.jboss.netty.handler.codec.replay.ReplayingDecoder.callDecode(ReplayingDecoder.java:568)
 org.jboss.netty.handler.codec.replay.ReplayingDecoder.messageReceived(ReplayingDecoder.java:437)
 org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:75)
 org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:563)
 org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:558)
 org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:268)
 org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:255)
 org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:91)
 org.jboss.netty.channel.socket.nio.AbstractNioWorker.processSelectedKeys(AbstractNioWorker.java:373)
 org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:247)
 org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:35)
 org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:102)
 org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42)
 java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
 java.lang.Thread.run(Thread.java:679) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:48:59.503

您需要按照[文档中的说明使用 BodyPraser](http://www.playframework.com/documentation/2.0.4/JavaBodyParsers)

这将允许您手动验证编码并将正确的错误返回给用户。

# signalr - 在 AppHarbor 上托管 Jabbr

> ID：15198810
> 
> 赞同：0
> 
> 时间：2013-03-04T09:59:02.740
> 
> 标签：signalr, appharbor

我一直在尝试在 AppHarbor 上托管 Jabbr。[这里](http://blog.appharbor.com/2012/4/30/run-your-own-group-chat-with-appharbor-and-jabbr)的指南不是最新的，因为 Jabbr 不再依赖于 Janrain。

我已经完成的步骤：

1.  安装了 SQL Express 插件。
2.  我已将最新的 Jabbr 代码从 GitHub 推送到 AppHarbor。
3.  使用配置中的完整连接字符串更改了连接字符串。
4.  更新了 jabbr:encryptionKey 和 jabbr:verificationKey（正如 David Flower 所建议的那样）。

应用程序设法加载，我可以使用默认登录屏幕，我可以创建一个新用户，但是当登录成功后应用程序崩溃（我认为）。

它显示服务器错误 500 - 内部服务器错误。

您要查找的资源有问题，无法显示。

使用 AppHarbor 拥有的错误窗格时，它没有显示任何相关内容。

调试此问题的最佳方法是什么？

谢谢！

爱丽儿

# java - 带有命名参数查询的选择是否正确？

> ID：15198811
> 
> 赞同：0
> 
> 时间：2013-03-04T09:59:05.770
> 
> 标签：java, mysql, sql, database, eclipse

下面的查询正确吗？

```
final String sqlQuery = "select  e.COMM,  e.DEPTNO,  e.EMPNO,  e.ENAME from EMP e where
 DATE between(:joinDate and :relievDate  )";
 Map namedParameters = new HashMap();
 namedParameters.put("joinDate", new Date(2000-01-02));
 namedParameters.put("relievDate", new Date(2010-03-04));
 List result = namedParameterJdbcTemplate.queryForList(sqlQuery, namedParameters); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T03:55:00.917

```
DateFormat df = new SimpleDateFormat("MM/dd/yyyy"); 
namedParameters.put("joinDate", new Date(df.parse("2000-01-02")));
namedParameters.put("relievDate", new Date(df.parse("2000-03-04"))); 
```

试试这个以获得可以在查询中使用的更好的日期格式。

# java - 无法实例化类型 Parent

> ID：15198812
> 
> 赞同：1
> 
> 时间：2013-03-04T09:59:06.123
> 
> 标签：java, types, instantiation

我不知道为什么我不断收到此错误：

在我的方法中，我有：

```
int option;
Object message[] = new Object[6];      
message[0] = firstName;
message[1] = txtfirstName;
message[2] = lastName;
message[3] = txtlastName;
message[4] = gender;
message[5] = txtgender;

int response = JOptionPane.showConfirmDialog(null,message,"Register a Person",JOptionPane.OK_CANCEL_OPTION ,                                                            JOptionPane.QUESTION_MESSAGE);

Parent parent = new Parent(txtfirstName.getText(),txtlastName.getText(),txtgender.getText());   
            creche.add(parent);` 
```

在我的主要我有设置：

`ArrayList<Parent> parent = new ArrayList<Parent>(); List<Person> school = new ArrayList<Person>();`

```
MyApp app = new MyApp ();
    ` 
```

我有子类父子类和超类人。

错误：`Parent parent = new Parent(var1,var2,var3,var4);`

但这有效：`Child child = new Child(var1,var2,var3,var4);
creche.add(child);`

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T10:02:52.583

为此，需要将父类定义为具体类。

例如

```
public class Parent extends Person {

} 
```

我猜它被定义为抽象类或接口。（见下文）

例如

```
public interface Parent {

}

public abstract Class Parent  {

} 
```

您可能只需要将其声明为上述具体类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T10:13:49.450

抽象或接口不能被实例化。只有子类可以

# jpa - 中间 `@MappedSuperclass` 未能持久化

> ID：15198813
> 
> 赞同：0
> 
> 时间：2013-03-04T09:59:09.747
> 
> 标签：jpa, eclipselink

我的三个班是这样的。

```
@Entity
class A {

    @Id @GeneratedValue @TableGenerator
    private long id;
}

@MappedSuperclass
abstract class B extends A {
}

@Entity
class C extends B {
} 
```

以上是否应该工作？至少，EclipseLink 似乎不起作用。

当我`Column 'ID' cannot be null`尝试持久化`C`.

我在[使用@MappedSuperclass 的抽象中间类继承中发现了一个错误，无法填充子类](https://bugs.eclipse.org/bugs/show_bug.cgi?id=294108)，但我不确定它是否完全相同。

**根据@James的回答更新**

对不起，我应该写得更冗长。是的，我打算继承 SINGLE_TABLE。我没有任何带有`B`nor的扩展属性`C`。这只是一个分层的类设计。

```
@DiscriminatorColumn
@Inheritance(strategy = InheritanceType.SINGLE_TABLE)
@Entity
abstract class A {

    @Id @GeneratedValue @TableGenerator
    private long id;
}

@DiscriminatorValue("B") @Entity // I currently should do like this.
//@MappedSuperclass              // error
abstract class B<T extends SomeoneElse> extends A {
}

@DiscriminatorValue("C")
@Entity
class C extends B<James> {
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:56:18.663

我相信在 JPA 中，@MappedSuperclass 必须是超类而不是子类（正如其名称所推断的那样）。

我不确定将@Entiy 子类作为@MappedSuperclass 意味着什么？

你想做什么？

对于@Entity 继承，JPA 只提供了三个选项，SINGLE_TABLE、JOINED 和 TABLE_PER_CLASS。所有持久性子类都必须是实体。

我假设您正在使用 JOINED 继承并试图避免 B 的表。JPA 没有指定执行此操作的标准方法。在 EclipseLink 中，您可以通过使其表与父表匹配 (@Table(name="A")) 来避免该表。

# azure - 是否可以更改 Azure 临时存储驱动器的驱动器号？

> ID：15198816
> 
> 赞同：1
> 
> 时间：2013-03-04T09:59:12.720
> 
> 标签：azure, azure-storage, azure-virtual-machine

我在 Azure 中有一个新的 VM 实例，默认情况下它带有 C: 和 D:。我知道 D: 是不稳定的，在某些时候可能会丢失。

我的应用程序使用驱动器 D: 作为工作驱动器，并将我所有的实用程序和进程输出文件存储在那里。

我附加了一个新驱动器，但它是 F:。有什么方法可以更改驱动器号，使我附加的驱动器是 D: 并且临时驱动器是其他驱动器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T11:16:54.817

您可以做的就是更改驱动器号。您可以在服务器管理器 -> 存储管理器 -> 选择驱动器 -> 更改驱动器号和路径下进行。您可以在那里更改驱动器号。

可以执行的试金石是重新启动服务器并检查驱动器号和附加数据磁盘中数据的一致性。临时磁盘的数据将消失。

但是，有了上述内容，没有什么比修改您的应用程序以使用任何驱动器（与您的情况下的 D: 不同）更好的了。有了这个，您需要担心移动部件及其不确定性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-21T21:36:56.933

我们最近更新了 Azure VM，因此无论使用哪个驱动器号，都会保留临时驱动器号。因此，您可以将临时驱动器号设置为 T: 或 Z: 之类的东西，它将通过停止/启动操作或 Azure 修复操作来维护，这些操作曾经导致驱动器号重置回第一个可用的驱动器号。此更改适用于 Classic 和 ARM 虚拟机。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-07T07:09:10.860

作为参考，现在有一个官方文档描述了这个过程。pagefile.sys 文件必须先临时移动到 C: 来重新定位到新驱动器。 [https://docs.microsoft.com/en-us/azure/virtual-machines/windows/change-drive-letter](https://docs.microsoft.com/en-us/azure/virtual-machines/windows/change-drive-letter)

# c - Scan single character in c as in bash

> ID：15198819
> 
> 赞同：2
> 
> 时间：2013-03-04T09:59:21.713
> 
> 标签：c

I am doing program in c. I wanted to scan my input like :

```
[root@localhost sudoers.d]# cd /home/Hitesh/
Display all 113 possibilities? (y or n) 
```

Here in bash,when user enters 'n' or 'y' it directly come on prompt.

But in c program if I am taking input through getchar() and then if I press 'n' or 'y',I explicitly have to press enter key after that to resume execution.

So I want,my execution resume as soon I press 'n',it should not wait for enter key press.

How can I achieve this in c programming.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:18:02.670

您可以使用 getch() 代替 getchar()。getch() 只接受一个字符，所以你不想按回车键。

```
char opt = getch();
// show typed value
printf("%c", opt );
if( opt == 'y' )
{
  ............
}
else 
{
  ............
} 
```

希望这会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T10:11:53.553

使用`getch()`：

```
char answer = getch();
if(answer=='y')
   //yes!
else
   //no! 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T10:06:40.207

您正在寻找的功能是`getch ()`

# mysql - 我怎么知道 ssl 正在用于 mysql 复制？

> ID：15198820
> 
> 赞同：0
> 
> 时间：2013-03-04T09:59:24.030
> 
> 标签：mysql, sql, database, ssl, replication

我已成功设置我的证书和密钥，并使用此处找到的 mysql 文档：http: [//dev.mysql.com/doc/refman/5.1/en/replication-solutions-ssl.html](http://dev.mysql.com/doc/refman/5.1/en/replication-solutions-ssl.html)

我的复制工作正常，但我需要一种方法来确定是否正在使用 ssl，我该怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:27:29.093

几个选项：

*   使用 Network Monitor 或 Wireshark 或类似工具来监控网络流量。您将能够查看它是否是 TLS。

*   调高日志记录级别，直到它报告 TLS 协商。

# r - 根据向量的级别创建列

> ID：15198830
> 
> 赞同：2
> 
> 时间：2013-03-04T09:59:40.583
> 
> 标签：r, dataframe

我有一个数据框，其中有一列（物种）呈现 153 个因子水平

```
> out80[1:10,1:3]
    Species Plots100 Plots80
1       02      901    2091
2       03      921    2094
3       04       29      60
4       05     1255    2145
5       06      563     850
6       07       38      53
7      08S      102     144
8       09      897    1734
9       10      503    1084
10      11      134     334 
```

我想要做的是在另一个数据框（species.tab2）的另一列（代码）中寻找这个级别的因子，并简单地在 out80 中创建另一个列，其名称与列法文名称中的该级别相关联

```
> head(species.tab2[,1:3])
    var code     French_name
1 ESPAR    2   CHENE PEDONCULE
2 ESPAR    3   CHENE SESSILE
3 ESPAR    3   CHENE SESSILE
4 ESPAR    3   CHENE SESSILE
5 ESPAR    4   CHENE ROUGE
6 ESPAR    5   CHENE PUBESCENT 
```

我试过用 ifelse 或循环来做，但我无法让它工作。

所以结果会是这样的：

```
 Species Plots100 Plots80  Name
1       02      901    2091  CHENE PEDONCULE
2       03      921    2094  CHENE SESSILE 
```

ETC...

编辑：以下是级别：

```
> out80$Species
[1] 02   03   04   05   06   07   08S  09   10   11   12P  12V  13B  13C  13G  14   15P  15S  16  
[20] 17C  17F  17O  18C  18D  18M  19   20G  20P  20X  21C  21M  21O  22C  22G  22M  22S  23A  23AB
[39] 23AF 23AM 23C  23F  23PA 23PC 23PD 23PF 23PM 23SO 23SS 24   25B  25C  25FD 25FR 25M   25R  25V 
[58] 26E  26OC 27C  27N  28   29AF 29AI 29CM 29EN 29LI 29MA 29MI 31   32   33B  33G  33N  34   36  
[77] 37   38AL 38AU 39   40   41   42   49AA 49AE 49AM 49BO 49BS 49C  49CA 49CS 49EA 49EV 49FL 49IA
[96] 49LN 49MB 49PC 49PL 49PM 49PS 49PT 49RA 49RC 49RP 49RT 49SN 49TF 49TG 51   52   53CA 53CO 53S 
[115] 54   55   56   57A  57B  58   59   61   62   63   64   65   66   67   68CC 68CE 68CJ 68CL 68CM
[134] 68EO 68PC 68PM 68SC 68SV 68TG 68TH 69   69JC 69JO 70SB 70SC 70SE 71   72V  73   74H  74J  76  
[153] 77  

> species.tab2$code
[1] 2    3    3    3    4    5    5    5    6    6    6    7    08S  9    10   10   11   12P  12V 
[20] 12V  13B  13C  13G  14   14   14   15P  15S  15S  16   17C  17F  17O  17O  18C  18C  18D  18D 
[39] 18M  19   19   20G  20P  20X  21C  21M  21O  22C  22G  22G  22M  22S  23A  23A  23AB 23AF 23AM
[58] 23C  23F  23PA 23PA 23PC 23PD 23PF 23PM 23SO 24   25B  25C  25D  25E3 25FR 25M  25R  25V  26E 
[77] 26E  26OC 27C  27N  28   29AI 29CM 29EN 29MA 29MI 29LI 31   32   33B  33G  33N  34   36   37  
[96] 38AU 38AL 39   40   41   42   49AA 49AE 49AM 49BO 49BO 49BS 49C  49CA 49CS 49EA 49EV 49FL 49IA
[115] 49LN 49MB 49PC 49PL 49PM 49PS 49PT 49RA 49RC 49RP 49RT 49SN 49TF 49TG 51   52   53CA 53CO 53S 
[134] 54   55   56   57A  57B  58   59   61   62   63   64   65   66   67   68CC 68CJ 68CL 68CM 68EO
[153] 68PC 68PM 68SC 68SV 68TG 68TH 69   69JC 69JO 70SB 70SC 70SE 71   72V  73   74H  74J  76   77 
```

代码中存在一些重复，只是因为对于相同的代码，存在 2 或 3 个不同的法语名称。对于这些，我只想要一个名字，不管它是哪一个。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T10:22:10.303

`code`使用 merge ，在 out80 中创建新列后

```
out80$code <- gsub('^0|S$','',out80$Species)
merge(out80,species.tab2)
code Species Plots100 Plots80   var     French_name
1    2      02      901    2091 ESPAR CHENE PEDONCULE
2    3      03      921    2094 ESPAR   CHENE SESSILE
3    3      03      921    2094 ESPAR   CHENE SESSILE
4    3      03      921    2094 ESPAR   CHENE SESSILE
5    4      04       29      60 ESPAR     CHENE ROUGE
6    5      05     1255    2145 ESPAR CHENE PUBESCENT 
```

**编辑**

Code and Species 与级别 01,02,.... 不匹配，因此我创建了一个新列来匹配它们。

```
gsub('^0([0-9])$','\\1',out80$Species) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T10:59:25.180

一个`data.table`解决方案：

```
require(data.table)
dt1 <- data.table(out80)
# positive look ahead 
# match 0's at beginning followed by numbers 
# if found, replace all beginning 0's with ""
dt1[, key := sub("^[0]+(?=[0-9]+$)", "", Species, perl=T)]
setkey(dt1, "key")

dt2 <- data.table(species.tab2)
dt2[, code := as.character(code)]
dt2[, key := sub("^[0]+(?=[0-9]+$)", "", code, perl=T)]
setkey(dt2, "key")

merge(dt1, dt2)

#    key Species Plots100 Plots80   var code     French_name
# 1:   2      02      901    2091 ESPAR    2 CHENE_PEDONCULE
# 2:   3      03      921    2094 ESPAR    3   CHENE_SESSILE
# 3:   3      03      921    2094 ESPAR    3   CHENE_SESSILE
# 4:   3      03      921    2094 ESPAR    3   CHENE_SESSILE
# 5:   4      04       29      60 ESPAR    4     CHENE_ROUGE
# 6:   5      05     1255    2145 ESPAR    5 CHENE_PUBESCENT 
```

# tinymce - TinyMCE 不在浏览器中渲染

> ID：15198831
> 
> 赞同：1
> 
> 时间：2013-03-04T09:59:43.803
> 
> 标签：tinymce, wysiwyg, text-editor

大家好，我正在为我的新社交网络构建一个博客系统，并且正在使用 TinyMCE 来写帖子！出于某种原因，虽然它没有出现，也不知道为什么！

我已经从他们的网站下载了这个包，并将它上传到我的服务器，并创建了一个名为 blog_writer.php 的页面，其中包含以下内容：

这是包含我的文本区域的表单：

```
<form method="post" action="blog_writer.php">
  <div id="blogMsg"><?php echo $msg; ?></div>
  <div id="blogTitle">
  Choose a topic:
  <select name="topic">
  <option value="  ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</option>
  <?php 
  $sql = "SELECT id,name FROM blog_topics ORDER BY name";
  $query = mysqli_query($db_conx, $sql) or die (mysqli_error());
  while($row = mysqli_fetch_array($query)){
      echo '<option value="' . $option[id] . '">' . $option[name] . '</option>';
  }?>

  </select>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  Enter a title:
  <input name="title" type="text" size="80" value="<?php echo $title; ?>" />
  </div>
  <div id="blogContent"><textarea name="blog" id="blog" cols="80" rows="25" class="tinymce"><?php echo $blog; ?></textarea>
  <br/><br/>
  <input type="submit" name="submit" id="submit" value="Publish Blog Post">
  <br/><br/>
  </div>
  <div class="blogClear"></div>
</form> 
```

这是我在页面上使用的 javascript，用于引入文本编辑器并替换我的 textarea：

```
<script src="js/javascript-1.9.1.js" type="text/javascript"></script>
<script src="tiny_mce/jquery.tinymce.js"></script>
<script>
$().ready(function() {
    $('textarea.tinymce').tinymce({
        script_url : 'tiny_mce/tiny_mce.js',
        theme : "advanced",
        plugins : "autolink,lists,inlinepopups,paste,noneeditable,nonebreaking",
        theme_advanced_buttons1 : "save,newdocument,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,styleselect,formatselect,fontselect,fontsizeselect",
            theme_advanced_buttons2 : "cut,copy,paste,pastetext,pasteword,|,search,replace,|,bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code,|,insertdate,inserttime,preview,|,forecolor,backcolor",
            theme_advanced_buttons3 : "tablecontrols,|,hr,removeformat,visualaid,|,sub,sup,|,charmap,emotions,iespell,media,advhr,|,print,|,ltr,rtl,|,fullscreen",
            theme_advanced_buttons4 : "insertlayer,moveforward,movebackward,absolute,|,styleprops,|,cite,abbr,acronym,del,ins,attribs,|,visualchars,nonbreaking,template,pagebreak",
            theme_advanced_toolbar_location : "top",
            theme_advanced_toolbar_align : "left",
            theme_advanced_statusbar_location : "bottom",
            theme_advanced_resizing : true,
    });
});
</script> 
```

据我所见，通过将我的页面与他们在下载中提供的示例页面进行比较，应该有一些显示 uo！但我现在得到的只是一个空白页！

非常感谢你们！

菲利普·杜斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:14:42.113

您可以尝试为您的 textarea 提供一个类并将其添加到您的 tinymce 配置中

```
mode:'exact',
elements : "your_textarea_class", 
```

# entity-framework - EntityFramework 6.0.0-alpha3 - EdmxWriter.WriteEdmx() fails after update to alpha3 from alpha2

> ID：15198832
> 
> 赞同：0
> 
> 时间：2013-03-04T09:59:46.500
> 
> 标签：entity-framework, ef-code-first, entity-framework-6

The following extension works for EF6 alpha2 but stopped working with alpha3 with null reference exception. The failing statement is the EdmxWriter.WriteEdmx(..)

The views pre-generation is performed on a code-first context.

How to achieve pre-generate views using EF6 alpha3?

```
 public static PreGeneratedViews PreGenerateViews<T>(this T dbContext) where T : DbContext
    {
        Trace.TraceInformation("PreGenerating views");

        //define ef collections
        EdmItemCollection edmItemCollection = null;
        StoreItemCollection storeItemCollection = null;
        StorageMappingItemCollection mappingItemCollection = null;

        //get ef collections
        GetItemCollections(
            GetEdmx(dbContext),
            out edmItemCollection,
            out storeItemCollection,
            out mappingItemCollection);

        IList<EdmSchemaError> errors = null;
        //get the generated views
        Dictionary<string, string> extentViews = GetExtentViews(mappingItemCollection, out errors);

        //return the pregenerated views as string (xml document)
        return new PreGeneratedViews
                   {
                       EdmEntityContainerName = edmItemCollection.GetItems<EntityContainer>().Single().Name,
                       StoreEntityContainerName = storeItemCollection.GetItems<EntityContainer>().Single().Name,
                       HashOverMappingClosure =
                           ReflectionHelper.GetMappingClosureHash(edmItemCollection.EdmVersion,
                                                                  mappingItemCollection),
                       HashOverAllExtentViews =
                           ReflectionHelper.GenerateHashForAllExtentViewsContent(edmItemCollection.EdmVersion,
                                                                                 extentViews),
                       ViewCount = extentViews.Count,
                       Views = CreateViews(extentViews),
                       ViewsEmbeddedResourceName =
                           string.Format("DbContextViews{0}.xml", Guid.NewGuid().ToString("N")),
                   };
    }

    private static XDocument GetEdmx(DbContext dbContext)
    {
        var ms = new MemoryStream();

        using (XmlWriter writer = XmlWriter.Create(ms))
        {
            EdmxWriter.WriteEdmx(dbContext, writer);
        }

        ms.Position = 0;

        return XDocument.Load(ms);
    }

    private static void SplitEdmx(XDocument edmx, out XmlReader csdlReader, out XmlReader ssdlReader,
                                  out XmlReader mslReader)
    {
        // xml namespace agnostic to make it work with any version of Entity Framework
        XNamespace edmxNs = edmx.Root.Name.Namespace;

        XElement storageModels = edmx.Descendants(edmxNs + "StorageModels").Single();
        XElement conceptualModels = edmx.Descendants(edmxNs + "ConceptualModels").Single();
        XElement mappings = edmx.Descendants(edmxNs + "Mappings").Single();

        ssdlReader = storageModels.Elements().Single(e => e.Name.LocalName == "Schema").CreateReader();
        csdlReader = conceptualModels.Elements().Single(e => e.Name.LocalName == "Schema").CreateReader();
        mslReader = mappings.Elements().Single(e => e.Name.LocalName == "Mapping").CreateReader();
    }

    private static void GetItemCollections(XDocument edmx, out EdmItemCollection edmItemCollection,
                                           out StoreItemCollection storeItemCollection,
                                           out StorageMappingItemCollection mappingItemCollection)
    {
        // extract csdl, ssdl and msl artifacts from the Edmx
        XmlReader csdlReader, ssdlReader, mslReader;
        SplitEdmx(edmx, out csdlReader, out ssdlReader, out mslReader);

        // Initialize item collections
        edmItemCollection = new EdmItemCollection(new[] {csdlReader});
        storeItemCollection = new StoreItemCollection(new[] {ssdlReader});
        mappingItemCollection = new StorageMappingItemCollection(edmItemCollection, storeItemCollection,
                                                                 new[] {mslReader});
    }

    private static Dictionary<string, string> GetExtentViews(StorageMappingItemCollection mappingItemCollection,
                                                             out IList<EdmSchemaError> errors)
    {
        Dictionary<EntitySetBase, string> views = ReflectionHelper.GenerateViews(mappingItemCollection, out errors);
        if (errors != null && errors.Any())
        {
            return null;
        }

        var extentViews = new Dictionary<string, string>(views.Count);

        foreach (var kvp in views)
        {
            extentViews.Add(
                GetExtentFullName(kvp.Key),
                kvp.Value.Replace("\r\n", "\n")); // replace accounts for Xml new line normalization
        }

        return extentViews;
    }

    private static string GetExtentFullName(EntitySetBase entitySet)
    {
        return string.Format("{0}.{1}", entitySet.EntityContainer.Name, entitySet.Name);
    }

    private static string CreateViews(Dictionary<string, string> extentViews)
    {
        var sb = new StringBuilder();
        //var embeddedViewsFileName = Path.ChangeExtension(Host.TemplateFile, "xml");
        using (XmlWriter writer = XmlWriter.Create(sb, new XmlWriterSettings
                                                           {
                                                               Indent = true,
                                                               Encoding = Encoding.UTF8
                                                           }))
        {
            writer.WriteStartElement("views");
            foreach (var kvp in extentViews)
            {
                writer.WriteStartElement("view");
                writer.WriteAttributeString("extent", kvp.Key);
                writer.WriteCData(kvp.Value);
                writer.WriteEndElement();
            }

            writer.WriteEndElement();
        }

        return sb.ToString();
    }

    #region Nested type: ReflectionHelper

    private static class ReflectionHelper
    {
        private static readonly Assembly efAssembly = typeof (StorageMappingItemCollection).Assembly;

        private static readonly MethodInfo generateViewsMethodInfo =
            typeof (StorageMappingItemCollection).GetMethod("GenerateEntitySetViews",
                                                            BindingFlags.NonPublic | BindingFlags.Instance);

        private static readonly MethodInfo getMappingClosureHashMethodInfo =
            efAssembly.GetType("System.Data.Entity.Core.Mapping.MetadataMappingHasherVisitor", true)
                .GetMethod("GetMappingClosureHash", BindingFlags.Static | BindingFlags.NonPublic);

        private static readonly MethodInfo generateHashForAllExtentViewsContentMethodInfo =
            efAssembly.GetType("System.Data.Entity.Core.Common.Utils.MetadataHelper", true)
                .GetMethod("GenerateHashForAllExtentViewsContent", BindingFlags.Static | BindingFlags.NonPublic);

        public static Dictionary<EntitySetBase, string> GenerateViews(
            StorageMappingItemCollection mappingItemCollection, out IList<EdmSchemaError> errors)
        {
            errors = null;
            return
                (Dictionary<EntitySetBase, string>)
                generateViewsMethodInfo.Invoke(mappingItemCollection, new object[] {errors});
        }

        public static string GetMappingClosureHash(double schemaVersion,
                                                   StorageMappingItemCollection mappingItemCollection)
        {
            return (string) getMappingClosureHashMethodInfo.Invoke(
                null,
                new object[]
                    {
                        schemaVersion, 
                        // CodeFirst currently creates always one entity container
                        mappingItemCollection.GetItems<GlobalItem>().Single(
                            i => i.GetType().Name == "StorageEntityContainerMapping")
                    });
        }

        public static string GenerateHashForAllExtentViewsContent(double schemaVersion,
                                                                  Dictionary<string, string> extentViews)
        {
            return (string) generateHashForAllExtentViewsContentMethodInfo.Invoke(
                null,
                new object[] {schemaVersion, extentViews});
        }
    } 
```

The stacktrace is the following:

NullReferenceException

*   at: System.Data.Entity.Edm.Serialization.EdmSerializationVisitor.VisitEdmAssociationSet(AssociationSet item)
*   at: System.Data.Entity.Edm.EdmModelVisitor.VisitCollection[T](IEnumerable`1 collection, Action`1 visitMethod)
*   at: System.Data.Entity.Edm.EdmModelVisitor.VisitAssociationSets(EntityContainer container, IEnumerable`1 associationSets)
*   at: System.Data.Entity.Edm.EdmModelVisitor.VisitEdmEntityContainer(EntityContainer item)
*   at: System.Data.Entity.Edm.Serialization.EdmSerializationVisitor.VisitEdmEntityContainer(EntityContainer item)
*   at: System.Data.Entity.Edm.EdmModelVisitor.VisitCollection[T](IEnumerable`1 collection, Action`1 visitMethod)
*   at: System.Data.Entity.Edm.EdmModelVisitor.VisitEntityContainers(IEnumerable`1 entityContainers)
*   at: System.Data.Entity.Edm.EdmModelVisitor.VisitEdmModel(EdmModel item)
*   at: System.Data.Entity.Edm.Serialization.EdmSerializationVisitor.Visit(EdmModel edmModel, String namespaceName, String provider, String providerManifestToken)
*   at: System.Data.Entity.Edm.Serialization.EdmSerializationVisitor.Visit(EdmModel edmModel, String provider, String providerManifestToken)
*   at: System.Data.Entity.Edm.Serialization.SsdlSerializer.Serialize(EdmModel dbDatabase, String provider, String providerManifestToken, XmlWriter xmlWriter, Boolean serializeDefaultNullability)
*   at: System.Data.Entity.ModelConfiguration.Edm.Serialization.EdmxSerializer.WriteEdmxRuntime()
*   at: System.Data.Entity.ModelConfiguration.Edm.Serialization.EdmxSerializer.Serialize(DbDatabaseMapping databaseMapping, DbProviderInfo providerInfo, XmlWriter xmlWriter)
*   at: System.Data.Entity.Infrastructure.EdmxWriter.WriteEdmx(DbModel model, XmlWriter writer)
*   at: System.Data.Entity.Infrastructure.EdmxWriter.WriteEdmx(DbContext context, XmlWriter writer)
*   at: ******.DbContextPreGenerateViewExtension.GetEdmx(DbContext dbContext)

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T23:18:29.187

我刚刚提交了工作项[867](http://entityframework.codeplex.com/workitem/867) (35852e8392ad) 的修复程序。它应该修复 NRE。该修复程序应包含在今天的夜间构建中。你可以试一试，让我知道这是否解决了问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T17:20:14.557

这是 Alpha 3 中的一个已知[错误](http://entityframework.codeplex.com/workitem/867)。

# c - Bind failed: Address already in use

> ID：15198834
> 
> 赞同：79
> 
> 时间：2013-03-04T09:59:48.687
> 
> 标签：c, linux, sockets

I am attempting to bind a socket to a port below:

```
if( bind(socket_desc,(struct sockaddr *) &server, sizeof(server)) < 0)
{
    perror("bind failed. Error");
    return 1;
}
puts("bind done"); 
```

But it gives:

```
$ ./serve   
Socket created    
bind failed. Error: Address already in use 
```

Why does this error occur?

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2013-03-04T10:09:10.130

每个人都是正确的。但是，如果您还忙于测试您的代码，您**自己的**应用程序可能仍然“拥有”套接字，如果它启动和停止相对较快。尝试[SO_REUSEADDR](http://www.unixguide.net/network/socketfaq/4.5.shtml)作为套接字选项：

> SO_REUSEADDR 究竟是做什么的？
> 
> 这个套接字选项告诉内核，即使这个端口很忙（处于 TIME_WAIT 状态），继续并重用它。如果它很忙，但处于另一个状态，您仍然会收到地址已在使用错误。如果您的服务器已关闭，然后在其端口上的套接字仍处于活动状态时立即重新启动，这将很有用。您应该知道，如果有任何意外数据进入，它可能会使您的服务器感到困惑，但是虽然这是可能的，但不太可能。
> 
> 有人指出“一个socket是一个5元组（proto，local addr，local port，remote addr，remote port）。SO_REUSEADDR只是说你可以重用本地地址。5元组仍然必须是唯一的！” 迈克尔·亨特 (mhunter@qnx.com)。这是真的，这就是为什么您的服务器不太可能看到意外数据的原因。危险是这样一个 5 元组仍然在网络上四处飘荡，当它四处弹跳时，来自同一客户端的新连接，在同一系统上，碰巧获得了相同的远程端口。Richard Stevens 在“2.7 请解释 TIME_WAIT 状态”中对此进行了解释。

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2013-03-04T10:03:12.007

您有一个已经在使用该端口的进程。`netstat -tulpn`将使人们能够找到正在使用特定端口的进程 ID。

* * *

## 回答 #3

> 赞同：48
> 
> 时间：2013-03-04T10:03:12.710

该错误通常意味着您尝试打开的端口已被另一个应用程序使用。尝试使用 netstat 查看打开的端口，然后使用可用端口。

还要检查您是否绑定到正确的 IP 地址（我假设它是 localhost）

* * *

## 回答 #4

> 赞同：44
> 
> 时间：2018-06-01T05:22:53.533

`Address already in use`意味着`port`您尝试为当前执行分配的 已被占用/分配给其他进程。

> 如果您是开发人员并且正在开发需要大量测试的应用程序，您可能会在后台运行同一应用程序的一个实例（可能是您忘记正确停止它）

因此，如果您遇到此错误，只需查看哪个应用程序/进程正在使用该端口。

在 linux 中尝试使用`netstat -tulpn`. 此命令将列出所有正在运行的进程的进程列表。

*检查应用程序是否正在使用您的端口。* ***如果该应用程序或进程是另一个重要的，那么您可能想要使用另一个未被任何进程/应用程序使用的端口。***

**无论如何，您可以停止使用您的端口的进程并让您的应用程序使用它。**

如果你在linux环境下试试，

*   用于`netstat -tulpn`显示进程
*   `kill <pid>`这将终止进程

如果您使用的是窗户，

*   用于`netstat -a -o -n`检查端口使用情况
*   用于`taskkill /F /PID <pid>`杀死该进程

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2013-03-04T10:15:07.723

如上所述，该端口已在使用中。这可能是由于几个原因

1.  其他一些应用程序已经在使用它。
2.  `close_wait`当您的程序正在等待另一端关闭程序时，端口处于状态。请参阅（ [https://unix.stackexchange.com/questions/10106/orphaned-connections-in-close-wait-state](https://unix.stackexchange.com/questions/10106/orphaned-connections-in-close-wait-state)）。
3.  该程序可能处于`time_wait`状态。您可以等待或使用`SO_REUSEADDR`另一篇文章中提到的套接字选项。

做`netstat -a | grep <portno>`检查端口状态。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2021-06-21T09:01:36.920

如果地址已经在使用中，您是否只想杀死正在使用该端口的进程，您可以使用

> **lsof -ti:PortNumberGoesHere | xargs 杀死 -9**

来源和灵感[本](https://askubuntu.com/a/671337)。

PS：无法使用 netstat，因为它尚未安装。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-04-01T08:30:03.960

我也遇到了这个问题，但我解决了。 **确保客户端和服务器端的程序都在您的 IDE中的*不同项目***上，在我的例子中是 NetBeans。然后假设您使用的是 localhost，我建议您将这两个程序作为*两个不同的项目*来实现。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-10-26T19:56:36.550

当您没有为您的 sock 文件提供足够的权限（读取和写入）时，也会发生这种情况！

只需将预期的权限添加到包含 sock 的文件夹和 sock 文件中：

```
 chmod ug+rw /path/to/your/
 chmod ug+rw /path/to/your/file.sock 
```

然后玩得开心！

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2022-01-24T00:45:36.640

终止所有节点进程：

```
killall -9 node 
```

# .net - 对来自同一个托管 dll 的 32 位和 64 位 dll 使用 pinvoke

> ID：15198836
> 
> 赞同：3
> 
> 时间：2013-03-04T09:59:58.803
> 
> 标签：.net, pinvoke

我正在使用 .NET (C#) dll 中的 pinvoke 调用本机 dll。现在我想将我的 .NET dll 编译为“AnyCPU”，但是当“pinvoking”时，我必须知道我是否必须调用 32 位或 64 位 dll。我将本机 dll 的两个版本都安装到子文件夹 bin32 和 bin64 中。现在，当我的 DLL 被加载时，我想检查一下我们是处于 32 位模式还是 64 位模式，并使用适当的路径调用 SetDllDirectory。这种方法似乎没有问题，除了从哪里调用 SetDllDirectory 的一个很好的“入口点”。在本机 DLL 中有一个 DllMain 条目，当 DLL 附加到进程时会调用该条目。.NET DLL 中是否有类似的入口点？您认为动态调用 SetDllDirectory 是个好主意吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T13:19:10.173

.NET 确实具有等效于 DllMain() 函数，它被称为[*模块初始化程序*](http://blogs.msdn.com/b/junfeng/archive/2005/11/19/494914.aspx)。然而，C# 和 VB.NET 代码无法实现它，您只能在 IL 或 C++/CLI 中创建一个。C++/CLI 本身具有位依赖性，因此只留下 IL。您将在[此答案](https://stackoverflow.com/a/5366220/17034)中找到其中之一的示例代码。将它链接到您的程序集中非常尴尬，构建系统不直接支持运行程序集链接器。

Next best thing is a "type initializer" as mentioned in the same article, called a static constructor in C#. You do need some semblance of organization in your code to make these pay off, a class that's guaranteed to get used before one of your 'thousands of methods' get called. That ought to be difficult with that many methods.

That doesn't leave much beyond an initialization method that has to be called by the app in its Main() method. And of course the standard solution, two installers, one for 32-bit machines, another for 64-bit machines. Which also ensures your app ends up in the 'right' directory, c:\program files vs c:\program files (x86).

UPDATE: .NET 5 now supports module initializers in C# v9 with the [[ModuleInitializer] attribute](https://docs.microsoft.com/en-us/dotnet/api/system.runtime.compilerservices.moduleinitializerattribute?view=net-5.0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T12:04:51.040

本质上，您要问的是您是否可以编写将在首次加载程序集时执行的代码。这个问题在这里得到解决：[.Net：加载程序集时运行代码](https://stackoverflow.com/questions/505237/net-running-code-when-assembly-is-loaded)

在你的位置上，我会把责任放在你图书馆的用户身上。提供一个初始化库的函数，并要求库的用户在任何其他函数之前调用它。

如果您愿意，您可以使用延迟初始化在您的库中进行该初始化。因此，您的所有方法都可能如下所示：

```
private static void EnsureInitialized()
{
    if (!MyLibraryInitialized)
        InitializeMyLibrary();
}

public static void DoSomething()
{
    EnsureInitialized();
    .... // implementation of DoSomething
} 
```

我也建议不要使用`SetDllDirectory`. 有一种更简单的方法可以做到这一点。由于您可以获得需要加载的 DLL 的完整路径，因此只需`InitializeMyLibrary()`调用`LoadLibrary()`. 加载 DLL 后，您的 p/invokes 将自动绑定到您已加载的 DLL。

# shell - Giving input to a shell script through command line

> ID：15198837
> 
> 赞同：0
> 
> 时间：2013-03-04T10:00:02.557
> 
> 标签：shell, unix

I have a file like this with .sh extension..

```
clear
echo -n "Enter file name: "
read FILE
gcc -Wall -W "$FILE" && ./a.out
echo 
```

When I can execute this file, it asks for a .c file and when given, it compiles and gives output of the .c file.

For this, everytime I have to first execute this .sh file and then give it the .c file name when asked. Is there anyway, so that, I can just give the .c file in the command line itself, so that it takes that file and does the work...

What I mean is, if I give "./file.sh somecommand cfile.c", then it takes cfile.c as input, compiles it and gives the output...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T10:01:52.787

使用“$1”变量：

```
clear
gcc -Wall -W $1 && ./a.out
echo 
```

$1 表示“命令行的第一个参数”。

或者，如果您想使用脚本一次编译多个文件，您可以使用 $@ 变量，例如：

```
gcc -Wall -W $@ && ./a.out 
```

您将按如下方式调用您的脚本（假设它被称为“script.sh”）：

```
./script.sh file.c 
```

[请参阅下文第](http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_03_02.html)3.2.5 节。

如果您的项目变得更大，您可能还需要考虑使用指定用于构建的工具，例如[automake](http://www.gnu.org/software/automake/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T16:20:48.723

你也可以让它做任何事情：

```
if [ -n "$1" ] ; then
    FILE="$1"
else
    echo -n "Enter file name: "
    read FILE
fi
gcc -Wall -W "$FILE" && ./a.out 
```

如果它存在，这将使用命令行参数，否则它会询问文件名。

# windows - System.data.sqlite

> ID：15198838
> 
> 赞同：1
> 
> 时间：2013-03-04T10:00:05.567
> 
> 标签：windows, sqlite, mono

i need some explanation so i hope somebody knows ...

I downloaded SQLITE source from [http://system.data.sqlite.org](http://system.data.sqlite.org) compiled it with build flags not to use interop, so i can use it with mono on linux.

On Linux + Mono the built assembly works without a problem... But on windows it says that it needs SQLITE3.dll. Now my question is why? Should it be created completley managed without the need of sqlite3.dll ? or am i mising something?

And we will not be building for windows with mono :D so Mono.data.sqlite is out of the question.

Best regards, Lonko

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-16T12:25:00.203

它不是完全托管的，在 Windows 上，您需要提供带有二进制文件的 sqlite3.dll。见这里： [System.data.sqlite 主页：FAQ，问题 11](http://system.data.sqlite.org/index.html/doc/trunk/www/faq.wiki#q11)

# c# - How do make the trackbar working as same as zooming trackbar in excel

> ID：15198843
> 
> 赞同：0
> 
> 时间：2013-03-04T10:00:19.293
> 
> 标签：c#, vb.net, user-interface

I am creating a report in which i want to make a trackbar working as same as trackbar in excel to zoom the report. am using trackbar. In this case minimum value is 10 and maximum value is 400\. 100 is default value. now i want show my trackbar just like a excel zooming trackbar.

# php - Magento：调用我模块中的核心块

> ID：15198844
> 
> 赞同：1
> 
> 时间：2013-03-04T10:00:21.273
> 
> 标签：php, magento

嗨，我正在编写一个 Magento 模块。为此，我想在我的模块处理程序中调用一个核心块。我不想修改或扩展核心块。我只想在我的布局处理程序中调用它。有什么建议么？

我要插入的块位于

```
adminhtml/sales/order/view/history.php 
```

以下处理程序位于包含上述 Histrory.php 块的 sales.xml 中

```
 <adminhtml_sales_order_addcomment>
        <block type="adminhtml/sales_order_view_history" name="order_history" template="sales/order/view/history.phtml" output="toHtml"/>
    </adminhtml_sales_order_addcomment> 
```

这是我的 layout.xml

```
 <orderadmin_adminhtml_orderadmin_search> 
        <update handle="orderadmin_orderadmin_search" />
         <reference name="content"> 
     <!-- I want to insert the following block --> 
        <block type="adminhtml/sales_order_view_history" name="order_history" template="sales/order/view/history.phtml" output="toHtml"/> 
</reference> 
</orderadmin_adminhtml_orderadmin_search> 
```

但这会导致以下错误。

致命错误：在第 79 行的 \app\code\core\Mage\Adminhtml\Block\Sales\Order\View\History.php 中的非对象上调用成员函数 getId()

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:43:06.593

你必须在你的代码中这样做：

```
<!-- this is my handler -->
<orderadmin_adminhtml_orderadmin_search>
        <update handle="orderadmin_orderadmin_search" />
        <reference name="content">
            <block type="orderadmin/adminhtml_search" name="search_order" />
            <!-- I want to call the core block here --> 
```

> 从核心布局中提取您想要的块并按原样粘贴到此处，它将被渲染

```
 </reference>
    </orderadmin_adminhtml_orderadmin_search> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T11:59:15.017

问题与 xml 布局无关，这实际上是正确的，并且可以按原样工作。

问题是因为这个块期望订单在注册表中，以使其能够获取历史记录。

在呈现历史记录块之前，您应该在控制器或模块块内的注册表中设置一个顺序（您希望用于查看历史记录的顺序）。

```
// load your order here..
Mage::register('sales_order', $order); 
```

# numbers - Sublime Text 2 增量数字

> ID：15198845
> 
> 赞同：14
> 
> 时间：2013-03-04T10:00:22.067
> 
> 标签：numbers, sublimetext2, increment

我有一个如下所示的 JSON 文件：

```
 "Algeriet" :
    [
        {
            "name" : "Nyårsdagen",
            "date" : "2013-01-01",
            "ID" : "1"
        },
        {
            "name" : "Mawlid En Nabaoui Echarif",
            "date" : "2013-01-24",
            "ID" : "2"
        },
        {
            "name" : "Första maj",
            "date" : "2013-05-01",
            "ID" : "3"
        },
       ...
     ] 
```

现在我想从 0 而不是 1 开始增加 ID。如何使用 Sublime Text 2 做到这一点？我已经安装了[Text Pastry](https://github.com/duydao/Text-Pastry#insert-nums)插件，但我不确定如何选择文本中的 ID 以便我可以替换这些值。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-04T12:36:55.403

通过执行以下步骤解决了它：

1.  对正则表达式进行查找和替换，`"ID" : "\d+"`并将其替换为我知道文件中任何位置都不存在的字符串（我将其替换为`"ID" : "xyz"`
2.  进行多项选择`"ID" : "xyz"`
3.  在多项选择上使用[文本糕点](https://github.com/duydao/Text-Pastry)插件“数列 (\i)”

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2019-04-13T01:03:50.963

您可以使用**[增量选择](https://packagecontrol.io/packages/Increment%20Selection)**。只需在多个数字选择上按`Ctrl`+ `Alt`+ 。`I`

您将首先需要[包控制](https://packagecontrol.io/)。所有这些安装时间不应超过 30 秒。

脚步：

1.  安装**包控制**。
    *   打开命令面板：`Ctrl`+ `Shift`+ `P`(Windows/Unix) / `Command`+ `Shift`+ `P`(Mac)。
    *   键入`Install Package Control`并单击以安装。
2.  安装**增量选择**包。
    *   再次打开命令面板。
    *   键入`Package Control: Install Package`，单击它并等待一小段时间。
    *   键入`Increment Selection`并单击它进行安装。
3.  选择多个数字并按`Ctrl`+ `Alt`+ `I`(Windows/Unix) / `Command`+ `Control`+ `I`(Mac)。

结果：

[![反转选择.gif](../Images/65962308cf15f6a215d0b83c1264a72f.png)](https://i.stack.imgur.com/p0PZt.gif)

* * *

### 其他示例

*增量选择*还可以在数字前加上前导零、增加字母、按步增加、生成行号等。

```
 [1] text    [1] text    [1] ->  1| text  2| text  3|
   [a] text    [a] text    [a] ->  a| text  b| text  c|
  [01] text   [01] text   [01] -> 01| text 02| text 03|
[05,3] text [05,3] text [05,3] -> 05| text 08| text 11|
[5,-1] text [5,-1] text [5,-1] ->  5| text  4| text  3|

[#] line -> 1| line
[#] line -> 2| line
[#] line -> 3| line
[#] line -> 4| line
[#] line -> 5| line 
```

提示：`[]`代表选择，`|`代表插入符号。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-05-16T14:07:10.790

借助 Text Pastry 插件的新[add-text-with-sequence 功能](https://github.com/duydao/Text-Pastry/issues/20)，它甚至少了一步：

1.  查找全部`"ID" : "\d+"`（激活正则表达式搜索）
2.  在*文本糕点命令行*中，输入`as "ID" : "0"`

# r - y ~ x + 趋势或y ~ x +“趋势”类型的R公式，其中趋势/“趋势”用作指标？

> ID：15198846
> 
> 赞同：1
> 
> 时间：2013-03-04T10:00:24.963
> 
> 标签：r

我有一个模型构建函数，它使用公式来定义模型。除了公式类型为 的通常回归情况外`y ~ x`，我还想增加添加趋势分量作为解释变量的可能性，该解释变量将在函数内部定义。这是一个例子：

```
modelx <- function(formula, data,...) {        

    mf <- mc <- match.call()                         
    mf <- mf[c(1L,  match(c("formula", "data"), names(mf), 0L))]
    formula_vars <- all.vars(formula)
    if ("trend" %in% formula_vars) {
       trend <- TRUE
       formula <- update.formula(formula, ~. - trend)
    } else trend <- FALSE        

    mf[[2L]] <- formula
    mf[[1L]] <- as.name("model.frame")
    mf$na.action <- as.name("na.pass")
    mf <- eval(mf, parent.frame())        
    y <- model.response(mf, "numeric")
    mt <- attr(mf, "terms")      
    X <- model.matrix(mt, mf)

    # y, X and possible trend component etc. are combined into the model object
   if(trend)
     X<-cbind(X,1:length(y))    #just an example
   list(y=y,X=X)
} 
```

这里的想法是公式的类型是 `y ~ x + trend`，并且函数检查是否`trend`在公式中调用了一个变量，将其删除并将标志`trend`转换为`TRUE`，稍后它将用于为模型构建适当的趋势组件。

我想知道有没有更好的方法来实现这一点？这种方法的一个小问题是，可能存在用户想要使用的名称为趋势的变量，并且它与模型的趋势组件混合在一起，另一个问题是例如这种类型的函数不起作用，因为变量`trend`不存在：

```
combn(c(trend,x1,x2),m=2,modelx,y=y) 
```

如果不是`trend`我使用 string `"trend"`，问题是`all.vars(formula)`不捕获字符串。

有什么建议如何处理这种类型的公式，或者任何指向某些函数的指针，这些函数的公式包含这种可能性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T11:39:35.347

这里使用的解决方案`reshape2`

```
 unlist(reshape2:::parse_formula(y~x+'trend'))
[[1]]
y

[[2]]
x

[[3]]
[1] "trend" 
```

# scala - 如何使用重载的案例类构造函数并仍然使用模式匹配？

> ID：15198850
> 
> 赞同：2
> 
> 时间：2013-03-04T10:00:38.263
> 
> 标签：scala, pattern-matching, overloading, case-class

当我发现这个例子时，我正在尝试学习模式匹配。似乎案例类模式匹配不适用于重载的案例类构造函数。

```
case class MyClass(var first:String, var last:String){
 def this(first: String) = this(first, "")
 override def toString = "First: "+ first + " Last:" +last
}

val myClassTwo = new MyClass("a", "b")
myClassTwo match {
   case MyClass(a,b) => println("two constructor matched")
   case MyClass(a) => println("one constructor matched")
   case _ => println("Not matched")
  } 
```

我在“case MyClass(a)”行收到编译错误“模式 MyClass(first:String, last:String) 的参数数量错误。我期待模式匹配适用于重载的构造函数，但它不起作用，因为我预期。有人可以解释一下这种行为吗？

我也得到了一个构造函数参数的错误结果。

```
 val myClassOne = new MyClass("a")      
  myClassOne match {
   case MyClass(a,b) => println("two constructor matched")
   case _ => println("Not matched")
  } 
```

即使`myClassOne`只有一个参数，这也会产生“两个构造函数匹配”。请解释。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-04T10:09:29.830

要了解发生了什么，您需要知道案例类上的模式匹配是一种名为`unapply`. 这在[A Tour of Scala: Extractor Objects](http://www.scala-lang.org/node/112)中有解释。

使用 REPL 可以看到编译器`unapply`在 的伴生对象上生成了一个方法`MyClass`，对应于主构造函数的参数：

```
scala> MyClass.unapply _
res0: MyClass => Option[(String, String)] = <function1> 
```

但是编译器不会为您定义（使用`this()`）的任何辅助构造函数生成提取器。如果您尝试自己定义一个附加`unapply`项，您会明白为什么 - 您不能用另一个具有完全相同参数的方法（的实例`MyClass`）重载该方法。

当您使用辅助构造函数创建实例时`new MyClass("a")`，它仍然是一个完全构造的实例，`MyClass`因此生成的`unapply`方法仍然有效。中的模式将`case MyClass(a,b)`匹配`a`到`"a"`和。`b``""`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T12:51:44.187

本的答案是完美的..

您仍然可以`case class`通过使用`_`您不关心的参数来找到一种方法来匹配您的...

```
myClassOne match {
   case MyClass("a","b") => println("two constructor matched")
   case MyClass("a",_) => println("one constructor matched")
   case _ => println("Not matched")
  } 
```

# windows - 在 Excel 主机中使用 MS-RPC 失败

> ID：15198855
> 
> 赞同：0
> 
> 时间：2013-03-04T10:00:41.760
> 
> 标签：windows, ipc, rpc

我使用 RpcBindingFromStringBinding 从`MS-RPC`客户端连接到本地守护程序服务器，反之亦然。我使用`LRPC`或本地命名管道。从第一次尝试开始随机调用`NdrClientCall2`失败，如果服务器还活着，事件`error code`是`-2147467259`. 释放绑定并创建新的并执行请求无济于事。Excel进程加载项启动`Daemon`进程时重现，既可以是服务器，也可以是客户端。无法在 2 个控制台可执行文件上重现。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:21:01.257

I used RPC from C#. During start I got GC of RPC server handles. Not reproduced in tests until GC calls.

# java - 运行任何版本的 jar 的 Shell 脚本

> ID：15198865
> 
> 赞同：0
> 
> 时间：2013-03-04T10:01:27.543
> 
> 标签：java, bash

如何制作一个`shell` `script`将执行文件的`jar`文件，无论其版本如何？

假设我有一个文件：

> my-jar-file-1.0.0-SNAPSHOT-executable.jar

我想要一个shell脚本，它会按照以下方式做一些事情

```
#!/bin/bash
java -some -other -options -jar my-jar-file-1.0.0-SNAPSHOT-executable.jar 
```

但它应该执行它的任何版本，所以

1.  my-jar-file-1.0.0-SNAPSHOT-executable.jar

2.  my-jar-file-1.1.0-SNAPSHOT-executable.jar

3.  my-jar-file-1.0.1-SNAPSHOT-executable.jar

都应该由同一个脚本执行。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T10:09:47.370

如果 jar 的名称匹配模式`my-jar-version.jar`：

```
java -jar `ls my-jar*.jar` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T10:09:19.253

我们也可以反过来想，为什么不给 jar 起一个最终名称，它会保持不变，并且不需要修改脚本。

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-jar-plugin</artifactId>
    <version>2.2</version>
    <configuration>
        <finalName>myname</finalName>
    <configuration>
</plugin> 
```

如果版本号是强制性的，你可以编写一个脚本来模式搜索那个特定的 jar。并相应地运行它。

我使用 ant 做了类似的工作，但目标不同，希望这会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T10:14:40.627

在 bash 脚本中试试这个：

```
for jarfile in my-jar-file-*-SNAPSHOT-executable.jar; do
    java -some -other -options -jar $jarfile
    echo "done for: $jarfile"
done 
```

# testing - NoMethodError: undefined method `[]' for nil:NilClass error at omniauth gem testing

> ID：15198866
> 
> 赞同：2
> 
> 时间：2013-03-04T10:01:28.247
> 
> 标签：testing

我使用omniauth-identity gem 进行身份验证。首先，我编写测试。我被困在全能身份的测试中。我的模型和控制器是这样的：

```
class Authentication
include Mongoid::Document
field :name, type: String
field :uid, type: String
field :provider, type: String

def self.from_omniauth(auth)
find_by_provider_and_uid(auth["provider"], auth["uid"]) || create_with_omniauth(auth)
end

def self.create_with_omniauth(auth)
create! do |user|
user.provider = auth["provider"]
user.uid = auth["uid"]
user.name = auth["info"]["name"]
end
end

def self.find_by_provider_and_uid(provider, uid)
where(provider: provider, uid: uid).first
end
end

class User < Authentication
include Mongoid::Document
include OmniAuth::Identity::Models::Mongoid

field :name, type: String
field :email, type: String
field :password_digest, type: String

validates_presence_of :name
validates_uniqueness_of :email
validates_format_of :email, :with => /^[-a-z0-9_+\.]+\@([-a-z0-9]+\.)+[a-z0-9]{2,4}$/i
validates_length_of :password, minimum: 2, maximum: 16
end 
```

这些是我的模型。我使用这样的测试代码 @user=Fabricate.build(:user) @authentication = Authentication.create_with_omniauth(@auth) post :create, @user

但这给了我错误**“NoMethodError: undefined method `[]' for nil:NilClass”**我该如何解决这个问题？

# ios - 错误 #2044：未处理的 IOErrorEvent：。文本=错误 #2032：流错误

> ID：15198867
> 
> 赞同：1
> 
> 时间：2013-03-04T10:01:32.413
> 
> 标签：ios, actionscript-3, audio

我在Android上遇到了这个问题，但我解决了！但是在 IOS 中它不起作用，我花了超过 1 天的时间试图解决它。我跟踪了文件夹中的所有内容，它给了我正确的路径但是当我调用声音路径来加载它时，它一直给我这个消息。

这是跟踪的结果

```
/var/mobile/Applications/A121170F-40A0-4FF8-B93B-238D2B09C797/Documents/story1/zipFolder/mp3/1.mp3
1.mp3
/var/mobile/Applications/A121170F-40A0-4FF8-B93B-238D2B09C797/Documents/story1/zipFolder/mp3/2.mp3
2.mp3
Error #2044: Unhandled IOErrorEvent:. text=Error #2032: Stream Error.
    at buildPageAnimation::LoadAndSetAnimation/loadComplete()[D:\TestUnZipFile\Ipad-new methods for animations - unzip\src\buildPageAnimation\LoadAndSetAnimation.as:95]
    at buildPageAnimation::LoadAndSetAnimation/loadComplete()
Error #2044: Unhandled IOErrorEvent:. text=Error #2032: Stream Error.
    at buildPageAnimation::LoadAndSetAnimation/loadComplete()[D:\TestUnZipFile\Ipad-new methods for animations - unzip\src\buildPageAnimation\LoadAndSetAnimation.as:95]
    at buildPageAnimation::LoadAndSetAnimation/loadComplete() 
```

这是代码

```
 var soundFile:File =  File.documentsDirectory.resolvePath('story1/zipFolder/mp3/');
    var files:Array = soundFile.getDirectoryListing();
    for (var i:uint = 0; i < files.length; i++)
    {
        trace(files[i].nativePath);// gets the path of the files
        trace(files[i].name);// gets the name
        var mySound:Sound = new Sound();
        var myChannel:SoundChannel = new SoundChannel();
        var lastPosition:Number = 0;
        mySound.load(new URLRequest(files[0].nativePath));
        myChannel = mySound.play();
    } 
```

我试图但是像这个文件这样的静态路径：///C:/Users/MASTER/Documents/story1/zipFolder/mp3/1.mp3 并且它不起作用请有人可以帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T18:40:10.043

我还想非常感谢。

我使用 .nativePath 来提供 URLRequest，而不是 .url。在模拟器（Windows）上，无论哪种方式都很好，但我在 iOS 上遇到了这个流错误。考虑到编译远程调试大约需要 15 分钟，答案如此简单，我松了一口气。

# jpa - getResultList() 中的 IBM OpenJPA NullPointerException

> ID：15198870
> 
> 赞同：0
> 
> 时间：2013-03-04T10:01:38.993
> 
> 标签：jpa, openjpa

对于遗留迁移项目，我整天都在尝试让原生 SQL 与 JPA 一起运行。我已经将查询简化为**应该可以**工作的东西。

```
Query query = localEm.createNativeQuery("SELECT ID FROM TABLE");
List results = query.getResultList(); 
```

但是我通过 query.getResultList() 从 JPA 代码中获得了一个 NPE：

**org.apache.openjpa.persistence.QueryImpl.getResultList（QueryImpl.java:328）处的 NullPointerException**

这让我疯狂。我已经搜索了[QueryImpl 源](http://svn.apache.org/viewvc/openjpa/branches/2.1.x/openjpa-persistence/src/main/java/org/apache/openjpa/persistence/QueryImpl.java?view=markup)。我正在使用 IBM WebSphere，（WSJPA 2.1.1-SNAPSHOT 和 OpenJPA 2.1.1-SNAPSHOT），所以行号没有帮助，但看起来这部分代码没有任何重大变化2.2.0。但我看不出他们的代码有什么问题。我与 localEm（实体管理器）的其他 JPA 调用工作正常。

有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:58:11.503

好的，我解决了。

如果我将代码放在我的远程 bean（道）中，它就可以工作。如果我将代码放在我的 Session bean（注入 Dao）中，它就不起作用。

我想当从远程 bean 返回时，对 EntityManager 的引用可能必须在某个时候被切断。

这是一个 EJB 问题（或者更确切地说，我对 EJB 问题的理解很差），但是从 OpenJPA 代码中抛出的 NPE 对我来说仍然是一个错误。

# java - 带编码双引号的简单属性解析

> ID：15198872
> 
> 赞同：0
> 
> 时间：2013-03-04T10:01:41.640
> 
> 标签：java, regex

我正在用正则表达式解析 Java 中的一些文本

我有看起来像这样的字符串：myAttribute="some text"，并像这样解析它们

```
Pattern attributePattern = Pattern.compile("[a-z0-9]*=\"[^\"]*\""); 
```

但是，我意识到人们可能希望在其属性值中使用双引号。

例如 myAttribute="some text with a double quote \" here"

如何调整我的正则表达式来处理这个

这是我解析属性的代码

```
private HashMap<String, String> findAttributes(String macroAttributes) {
    Matcher matcher = attributePattern.matcher(macroAttributes);
    HashMap<String, String> map = new HashMap<String, String>();
    while (matcher.find()) {
        String attribute = macroAttributes.substring(matcher.start(), matcher.end());
        int equalsIndex = attribute.indexOf("=");
        String attrName = attribute.substring(0, equalsIndex);
        String attrValue = attribute.substring(equalsIndex+2, attribute.length()-1);
        map.put(attrName, attrValue);
    }
    return map;
}

findAttributes("my=\"some text with a double quote \\\" here\""); 
```

应该返回一个大小为 1 的地图值应该是一些带有双引号 \" 的文本这里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:10:03.263

您可以为此使用交替和积极的后向断言

```
Pattern attributePattern = Pattern.compile("[a-z0-9]*=\"(?:[^\"]*|(?<=\\\\)\")*\""); 
```

`(?:[^\"]*|(?<=\\\\)\")*`是一个交替，匹配`[^\"]*`或者`(?<=\\\\)\"`

`(?<=\\\\)\"`匹配一个“，但前提是它前面有一个反冲。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T10:47:28.393

您可以使用否定的外观来查看引号之前是否有反斜杠，但如果反斜杠本身也可以转义，则失败：

```
myAttribute="some text with a trailing backslash \\" 
```

如果可能，请尝试以下操作：

```
Pattern.compile("[a-zA-Z0-9]+=\"([^\"\\\\]|\\\\[\"\\\\])*\"") 
```

快速解释：

```
[a-zA-Z0-9]+     # the key
=                # a literal '='
\"               # a literal '"'
(                # start group
  [^\"\\\\]      #   any char except '\' and '"'
  |              #   OR
  \\\\[\"\\\\]   # either '\\' or '\"'
)*               # end group and repeat zero or more times
\"               # a literal '"' 
```

快速演示：

```
public class Main {

    private static HashMap<String, String> findAttributes(Pattern p, String macroAttributes) {
        Matcher matcher = p.matcher(macroAttributes);
        HashMap<String, String> map = new HashMap<String, String>();
        while (matcher.find()) {
            map.put(matcher.group(1), matcher.group(2));
        }
        return map;
    }

    public static void main(String[] args) {
        final String text = "my=\"some text with a double quote \\\" here\"";
        System.out.println(findAttributes(Pattern.compile("([a-z0-9]+)=\"((?:[^\"\\\\]|\\\\[\"\\\\])*)\""), text));
        System.out.println(findAttributes(Pattern.compile("([a-z0-9]*)=\"((?:[^\"]*|(?<=\\\\)\")*)\""), text));
    }
} 
```

将打印：

```
{my=some text with a double quote \" here}
{my=一些带双引号的文本 \}
```

# blackberry - 将为 BB7 编写的库移植到 BB10

> ID：15198879
> 
> 赞同：1
> 
> 时间：2013-03-04T10:01:56.280
> 
> 标签：blackberry, blackberry-10

我在 BB7 上开发了一个用户认证库。

它为登录屏幕构建 UI，并在输入凭据后从服务器对用户进行身份验证。

我想知道 BB10 的开发与 BB7 的开发有什么变化吗？因为我也想将此库用于我的 BB10 应用程序。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T01:34:43.090

如果有帮助的话，有一系列（目前）关于[将 BlackBerry Java 应用程序移植到 Cascades](http://devblog.blackberry.com/2013/01/port-java-to-cascades-part-1/)的系列文章。

# windows-mobile - Determine model and manufacturer of Windows Mobile/CE device

> ID：15198884
> 
> 赞同：4
> 
> 时间：2013-03-04T10:02:10.400
> 
> 标签：windows-mobile, compact-framework, windows-ce

We're running our generic mobile application for Windows Mobile / CE on a couple of devices (Motorola, Honeywell, ...) and would like to automatically detect on which device we're running. Currently, we need to configure which device service to use (e.g. for scanning), but we would like to automate that process.

Is there a reliable way to determine the manufacturer and the model of a device on Windows Mobile / CE (e.g. "Motorola MC3190" or "Honeywell Dolphin 6100")?

What we've already tried:

*   Get OEM info via `SystemParametersInfo` (throws exception on some devices)
*   Looked at the OpenNETCF API (which seems to use `SystemParametersInfo` as well)

I'd prefer not to guess the device type by analyzing the serial number, the file system layout, or the CPU.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T11:11:38.870

There is no standard enforced for Windows Mobile OEMs to provide such info. If HKLM\ident and HKLM\Platform do not offer enough info, you have to look for other unique device identification items.

I am using a manufacturer dependent file, for example: "\Windows\itc50.dll" for Intermec devices.

# ios - Objective c 自定义对象描述问题

> ID：15198885
> 
> 赞同：0
> 
> 时间：2013-03-04T10:02:18.653
> 
> 标签：ios, logging, nsstring, formatting, custom-object

我在记录自定义对象时遇到了一些麻烦。

DateObject 类的示例：

标题

```
@interface DateObject : NSObject {

    NSString *month;
    NSString *day;
    NSString *year;
}
@property (nonatomic, retain)NSString *month;
@property (nonatomic, retain)NSString *day;
@property (nonatomic, retain)NSString *year;
- (NSString *)description; 
```

执行：

```
#import "DateObject.h"

@implementation DateObject
@synthesize month, day, year;

- (NSString *)description{
    NSString *result = [NSString stringWithFormat:@"{\n\tMonth:\t%@\n\tDay:\t%@\n\tYear:\t%@\n}",self.month, self.day, self.year];
    return result;
}

@end 
```

现在我像这样设置值：

```
DateObject *date = [[[DateObject alloc] init] autorelease];
date.month       = @"Mar";
date.day         = @"04";
date.year        = @"2013"; 
```

用这个记录对象

```
NSLog(@"{\n\tMonth:\t%@\n\tDay:\t%@\n\tYear:\t%@\n}",date.month, date.day, date.year); 
```

结果（如预期）在

```
2013-03-04 10:42:08.821 LoggingCustomObjectsExample[4389:c07] {
    Month:  Mar
    Day:    04
    Year:   2013
} 
```

现在尝试用

```
NSLog(@"%@", date); 
```

我希望我的`description`方法被调用（它实际上被调用），但结果总是未格式化：

```
2013-03-04 10:59:18.835 LoggingCustomObjectsExample[4389:c07] DateObject: "{\n\tMonth:\tMar\n\tDay:\t04\n\tYear:2013}"; 
```

我不明白为什么转义序列在这里不起作用。我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T10:07:37.103

这是已知的行为，`NSLog`它正在转义那些换行符和制表符，因此输出保持在一行（参见这个[SO question](https://stackoverflow.com/questions/6052073/nsstring-nslog-revealing-n-newline-character)）。

我会说无论如何您都不希望在输出中出现换行符`description`，因为它们没有任何价值。

# asp.net - ASP.NET MVC API 模型不解析

> ID：15198888
> 
> 赞同：1
> 
> 时间：2013-03-04T10:02:24.317
> 
> 标签：asp.net, asp.net-web-api

我在 ASP.NET MVC API 中解析我的模型时遇到了一些问题

这是我的 API 控制器：

```
public class UserController : ApiController
{
    // Hent liste af personer
    public IEnumerable<UserModel> Get()
    {
        return new UserModel[] { new UserModel(), new UserModel() };
    }

    // Hente enkelt person
    public UserModel Get(int id)
    {
        return new UserModel();
    }

    // Opret person
    [ValidationActionFilter]
    public CreateUserRespose Post([FromBody]UserModel model)
    {
        CreateUserRespose rs = new CreateUserRespose();
        return rs;
    }

    // Rediger person
    public UserModel Put(int id, [FromBody]UserModel model)
    {
        return new UserModel();
    }

    // Slet person
    public UserModel Delete(int id)
    {
        return new UserModel();
    }
} 
```

}

和用户模型：

```
public class UserModel
{
    [Required]
    [StringLength(500)]
    public String FristName { get; set; }
    [Required]
    [StringLength(500)]
    public String LastName { get; set; }
    [Required]
    [StringLength(250)]
    public String Email { get; set; }
    [Required]
    public String MatrikelId { get; set; }
} 
```

当我通过 Fiddler 使用以下正文调用 Post 命令时

```
FirstName=Fistname MiddleName&LastName=SomeName&Email=email@email.us&MatrikelId=1234 
```

是否会调用 Post 操作，但模型为空，并且 ModelState.IsValid 为真，如果我不发送正文数据，也会发生同样的情况！我在这里做错了什么？

更新：我尝试将数据作为 json 而不是 Fiddler 发送：

```
User-Agent: Fiddler
Host: localhost:51268
Content-Length: 102
Content-type: application/json

{"FristName":"Kasper asdasd","LastName":"asdasdasd","Email":"asdaasd@asdasd.us","MatrikelId":"132456asd"} 
```

但是当模型为空时，模型状态不应该是无效的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T10:43:08.057

ASP.NET Web API 使用*内容协商*过程来决定`MediaTypeFormatter`使用哪个来反序列化请求的主体。对于典型的 POST 请求，它将检查`Accept`和`Content-Type`标头。如果不存在，它将使用`MediaTypeFormatter`列表中的第一个（默认为`JsonMediaTypeFormatter`）。

在您的情况下，Web API 无法确定正确的`MediaTypeFormatter`. 向请求添加一个`Content-Type`值为 的标头应该可以解决该问题。`application/x-www-form-urlencoded`

如果您想获得有关 ASP.NET Web API 中的*Formatters*、*Model Binding*和*Content Negotiation*的更详细的知识，我建议您阅读以下内容：

*   [Designing Evolvable Web APIs with ASP.NET -> Chapter 8\. Formatters and Model Binding](http://ofps.oreilly.com/titles/9781449337711/ch_formatters_and_model_binding.html)（如果你有兴趣学习 ASP.NET Web API，你应该仔细阅读整本书）
*   [你想知道的关于 ASP.NET Web API 内容协商的一切](http://www.strathweb.com/2012/07/everything-you-want-to-know-about-asp-net-web-api-content-negotation/)

# php - 如何根据另一表列从一个表中选择一列？

> ID：15198893
> 
> 赞同：0
> 
> 时间：2013-03-04T10:02:37.900
> 
> 标签：php, mysql, sql, select, join

我有 2 个表“用户”和“标准”。

*用户*

```
------------------------------
username, age, height, country
------------------------------ 
```

*标准*

```
-----------------------------------------------------------
username, age_from, age_to, height_from, height_to, country
----------------------------------------------------------- 
```

我想写一个查询'用户'年龄在'age_from'和'age_to'之间

和

'height_from' 和 'height_to' 之间的 'users' 'height'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T10:03:35.280

[`JOIN`](http://en.wikipedia.org/wiki/Join_%28SQL%29)两张表：

```
SELECT  u.*
FROM Users          AS u
INNER JOIN criteria AS c  ON u.hiehgt BETWEEN c.height_from 
                                          AND c.height_to
                         AND u.age    BETWEEN c.age_from 
                                          AND c.age_to; 
```

您可能还需要使用`OUTER JOIN`而不是`INNER JOIN`获取那些不匹配的行，请参阅此以获取更多信息：

*   [**SQL 连接的可视化解释**](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T10:12:21.793

尝试：

```
SELECT u.* 
FROM users u
INNER JOIN criteria c
WHERE u.age    BETWEEN c.age_from AND c.age_to 
  AND u.height BETWEEN c.height_from AND c.height_to; 
```

# jquery - jQuery 嵌套 DOM 选择器

> ID：15198896
> 
> 赞同：4
> 
> 时间：2013-03-04T10:02:40.477
> 
> 标签：jquery, dom, selector

假设我有以下 HTML 元素：

```
<div id="id">
    <div class="first">
        <div class="second"></div>
    </div>
</div> 
```

我想知道为什么这不起作用`jQuery`：

```
$("#id.first.second").click( // do some stuff ... 
```

我通常使用类似下面的东西，它工作正常，但今天我发现上面的例子不起作用。

```
// working example
$("#id .second").click( // do some stuff ... 
```

**更新：**我的问题是为什么没有空格就不能工作？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T10:05:07.543

选择器的`#id.first.second`意思是“一个元素的`id`值`"id"`也*有*类`first`和`second`”。

您的第二个选择器`#id .second`（前面有空格`.second`）表示“具有`id`值的元素具有类`"id"`的*后代*`second`元素”。这是一个“后代选择器”。

因此，如果您想指定三个级别中的每一个，您可以这样做：

```
$("#id .first .second").click(... 
```

...这意味着“具有`id`值的元素具有类`"id"`的*后代*元素，而该类`first`又具有类的*后代*元素`second`”。

或者，您可以这样做：

```
$("#id > .first > .second").click(... 
```

...这意味着“具有`id`值的元素与类`"id"`具有*直接子*`first`元素，而该类又具有具有类的*直接子*元素`second`。它是一个*子选择器*（实际上是其中两个）。

或者，当然，它们的某种组合。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T10:04:16.037

这将起作用：

```
$("#id .first .second").click( // do some stuff ... 
```

对于您的第一个选择器，它将搜索：

```
<div id="id" class="first second">
</div> 
```

**解释**

您的第一个选择器正在寻找一个 id`id`具有 classes`first`和`second`.

但是你实际上想寻找一个带有 class的元素，它是`second`一个带有 class 的元素的后代，它又`first`是一个带有 id 的元素的后代`id`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T10:05:13.943

选择器之间的空格表示**“任何后代”**：可以选择直接子代和这些子代的子代。

因此，`$('#id .first .second')`这意味着使用 id 的 id获取`DOM`内部，并获取名称为**first**的后代及其名称为**second**的后代。`div``DOM``class`**`DOM``class`**

 ***** * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T10:04:20.183

您需要在这里使用[jQuery 后代](http://api.jquery.com/descendant-selector/)选择器。您需要在父选择器和子选择器之间留出一个空间。

如果您指定没有空格的扇区，它将被视为一个和条件。在您的情况下，它将查找具有 id`id`并具有类`first`和`second`. 前任：`<div id="id" class="first second"></div>`

`$("#id.first.second")`应该`$("#id .first .second")`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T10:04:21.800

在它们之间放置空格：

```
$("#id .first .second").click( // do some stuff ... 
```

## 看：

`$("#id.first.second").click( // do some stuff ...`

这是在寻找具有某些类的 id，例如：

```
<div id='id' class='first second'></div> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-04T10:05:49.730

用空格分隔选择器以查找后代。

```
$("#id .first .second").click(function(){
   alert("Hello");
}); 
```

原始选择器试图找到一个元素，其 id 为`id`class of`first`和 class of `second`。****

# java - 为什么局部非最终变量会影响引用的字段？爪哇

> ID：15198898
> 
> 赞同：0
> 
> 时间：2013-03-04T10:02:48.953
> 
> 标签：java, reference, pass-by-reference

我的程序中有以下代码：

```
...
private void generateStack() {
    List<AdvertisementsModel> adsForModel = Storage.getAdsForId(model.getId());
    ...
    adsForModel.clear();
... 
```

`Storage`是具有静态字段和方法的静态类。`generateStack`方法在另一个类和实例对象中。如果引用不是最终的，为什么会`adsForModel.clear();`影响类中的列表？`Storage``asdForModel`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T10:07:05.770

`Storage.getAdsForId(...)`返回对同一`List`对象的引用的副本。所以通过这个引用调用相同的列表。当您调用`Storage.getAdsForId`时，不会创建新列表 - 只是对同一列表的新引用。

因此，显式返回`ImmutableList`或制作列表的防御性副本`Storage.getAdsForId(...)`并返回副本是一种很好的做法。

请注意，当`AdvertisementsModel`可变时您需要进行深层复制，否则您将在不同级别遇到相同的问题。（否则，您现在可能有一个列表副本，但两个列表仍然包含对相同`AdvertisementsModel`对象的引用，并且更改它们仍然会影响内部的列表内容`Storage`。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T10:10:12.217

Java 是按值传递的（引用的）。因此，如果`Storage.getAdsForId(model.getId())`返回一个静态存储在 Storage 中的引用，那么`clear()`在实例中调用它也会影响同一个 List `Storage`。你可以这样做：

```
return new ArrayList<AdvertisementsModel>(Storage.getAdsForId(model.getId())); 
```

而是返回列表的副本，这将避免影响存储中的列表。当然，修改这个列表的一个元素仍然会影响`Storage`. 为避免这种情况，您必须深度复制列表中的每个元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T10:07:27.917

`getAdsForId`应该返回列表的副本，否则它将返回一个引用并且调用`clear`列表将清空原始列表。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T10:11:33.887

如果是final的话，原名单不受影响吗？我对此表示怀疑......这是同一个列表实例。为此，我会使用

```
new ArrayList<AdvertisementsModel>(Storage.getAdsForId(model.getId())); 
```

它创建一个新的列表实例，如果可能，修改`Storage`类以返回原始列表的 UnmofifiableList：

```
return Collections.unmodifiableList(adsForIdList); 
```

我更喜欢这个，因为这个解决方案不会在每次调用时创建一个新的 List 实例，接收代码有责任决定是否需要创建它。但是，在多线程环境中，如果原始列表可能被修改，这可能会导致`ConcurrentModificationException`s - 因此在这种情况下，在 getter 本身中创建列表的“防御性副本”更为明智。请务必记住，然后对副本的修改不会影响原始列表...

# yii - 根据数据库表中的生日按年龄范围搜索用户

> ID：15198900
> 
> 赞同：0
> 
> 时间：2013-03-04T10:02:51.367
> 
> 标签：yii

现在，我有一个数据库表，它以“日期时间”格式存储有关用户的信息及其出生日期。该数据库表与相应的 ActiveRecord 模型相关联。

在用户搜索表单中，我想按年龄范围实现搜索（分别有两个表单下拉字段，“从”和“到”年龄）。

我认为在对数据库表执行搜索之前，我必须将通过表单提交的年龄转换为实际的“日期时间”日期。

总的来说，我对 CDb Criteria 和 Yii 的理解还不够。这在社交网络中似乎很常见，但我无法为我的问题找到足够的答案。

在等待回复时，我有点找到了解决方案。但我想我可能没有直接思考，所以我可能想出了一些不太合理的东西。但它有效。

我在我的用户模型中创建了两个变量：

```
 public $fromBirthdate;
        public $toBirthdate; 
```

我将搜索表单中的搜索字段从单个生日字段更改为字段“to”和“from”，它们分别保存表示最小和最大年龄的整数。

我将这些字段与模型中新创建的变量联系起来。

```
<div class="row">
        <?php echo $form->label($model,'fromBirthdate'); ?>
        <?php echo $form->textField($model,'fromBirthdate'); ?>
    </div>

    <div class="row">
        <?php echo $form->label($model,'toBirthdate'); ?>
        <?php echo $form->textField($model,'toBirthdate'); ?>
    </div> 
```

>

然后我写了一个函数，根据当前时间将年龄转换为生日：

```
//transforms age into birthdate based on current date
//@param integer age
//@param integer default age (what age should be applied in case the age parameter is null)
//$returns string date formatted MySQL timestamp

public function getBirthdate($age, $defaultAge)
{
    if($age == null)
    $age = $defaultAge;

    $birthDate = date('Y-m-d H:i:s',strtotime("-" . $age . "years", time()));
    return $birthDate;
} 
```

*   通过添加以下行，我在模型的 search() 函数中对 CDbCriteria 的实例进行了一些修改：

```
 //specifies range of age the users should be searched within
    //if either of the age fields ("to" or "from" age") was not filled, default age is applied
    //default age range is from 10 to 110 years old. 
    $criteria->addBetweenCondition('birthdate', $this->getBirthdate($this->toBirthdate, 110), $this->getBirthdate($this->fromBirthdate, 10)); 
```

总而言之，当用户通过搜索表单提交年龄范围时，它会以整数形式存储在这两个变量中。然后它们会被包含从提交的年龄转换而来的日期时间戳的字符串覆盖。

如果用户没有在搜索中指定最小和最大年龄，我必须引入所谓的“默认最小和最大年龄值”。我不确定这是有史以来最明智的想法，但它对我很有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:52:20.253

我建议为此使用参数化的命名范围：[http ://www.yiiframework.com/doc/guide/1.1/en/database.ar#named-scopes](http://www.yiiframework.com/doc/guide/1.1/en/database.ar#named-scopes)

将以下方法添加到您的模型中，确保将 createtime 更改为您自己的日期时间列的名称：

```
 public function byAge($to, $from)
    {
        $from = new DateTime("-$from years");
        $fromDate = $from->format('Y-m-d H:i:s');

        $to = new DateTime("-$to years");
        $toDate = $to->format('Y-m-d H:i:s');

        $this->getDbCriteria()->mergeWith(array(
            'condition' => 't.createtime BETWEEN :from AND :to',
            'params' => array(
                ':from' => $fromDate,
                ':to' => $toDate,
            ),
            'order' => 't.createtime DESC', // Youngest first
        ));

        return $this;
    } 
```

从表单中获取 $to 和 $from 的值，其中 $to 是较年轻的年龄，$from 是较大的年龄。然后要使用该方法，请通过执行以下操作更改搜索方式：

```
$model = new User;
$to = 12;
$from = 25;
// Set other model attributes based on user input
$dataProvider = $model->byAge($to, $from)->search(); 
```

我用我自己的数据对此进行了测试并且它有效，但是如果你无法让它与你的数据一起使用，请告诉我。

# image - 添加图像后 Ultratab 标题调整大小

> ID：15198903
> 
> 赞同：0
> 
> 时间：2013-03-04T10:02:54.050
> 
> 标签：image, tabs, header, resize, infragistics

这是我的问题。当我尝试将 ImageList 添加到 tabcontrol 时，除了一件事之外一切正常：tab 控件的标题越来越大。这取决于我想的图像大小。所以你能帮我告诉我如何在不调整标签控件标题宽度的情况下添加图像吗？或者我怎样才能以编程方式访问选项卡控件的标题，以便我可以自己设置它的宽度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:11:43.573

您可以将值应用于属性设置图像大小

```
 UltraTabControl1.ImageSize = new Size(24,24); 
```

此外，还有一个属性允许停止图像以填充由 ImageSize 定义的空间。

```
 ultraTabControl1.ScaleImages = Infragistics.Win.ScaleImage.Never; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T20:01:01.347

您可以通过设置选项卡的[FixedWidth](http://help.infragistics.com/NetAdvantage/WinForms/Current/CLR4.0/?page=Infragistics4.Win.UltraWinTabControl.v12.2~Infragistics.Win.UltraWinTabControl.UltraTab~FixedWidth.html)来设置选项卡的宽度：

```
this.ultraTabControl1.Tabs[0].FixedWidth = 100; 
```

# flash - 我需要删除这个movieClip吗？

> ID：15198908
> 
> 赞同：1
> 
> 时间：2013-03-04T10:03:13.613
> 
> 标签：flash, actionscript-2

在 as2.0 中，我使用函数 attachMovie 在根目录中创建了一个名为“A”的影片剪辑。然后我在 mc "A" 中附加了一个movieClip "B"。删除movieClip“A”后，是否需要删除“B”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-21T13:48:31.750

不，你没有。但如果剪辑 A 或 B 使用某些事件处理，您应该取消订阅这两个剪辑。如果你想释放内存，你应该清理对这些剪辑的所有引用，以便垃圾收集器可以清除它们。

# iphone - 如何以编程方式增加 iPhone 音量

> ID：15198915
> 
> 赞同：0
> 
> 时间：2013-03-04T10:03:50.307
> 
> 标签：iphone, ios, cocoa-touch

在我的应用程序中，我必须在点击按钮时播放警报声，当铃声音量设置为某个值时我可以播放它，但我的问题是当用户将铃声音量保持为零时，我怎样才能以最大播放它声音？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:09:16.177

官方你不能这样做。作为智能手机用户，我不喜欢将音量设置为 10% 并拥有一个以最大音量响铃的应用程序。

但是，您可以尝试使用`Celestial.framework`，但您的应用程序将被 App Store 拒绝。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T10:07:44.633

试试这个代码，它只适用于设备

```
[[MPMusicPlayerController applicationMusicPlayer] setVolume:setvalue]; 
```

# javascript - Colorbox 和 pinterest 按钮 URL 更新

> ID：15198917
> 
> 赞同：0
> 
> 时间：2013-03-04T10:03:52.973
> 
> 标签：javascript, jquery, colorbox, pinterest

我有一个使用数据库查询动态填充的图片库。从这里开始，我已经让颜色框工作了，因此当您单击图像时，它会加载图像并允许您单击下一个/上一个来浏览图像 - 非常标准的东西。

然后我所做的是向颜色框添加一个 pinterest 按钮，这样当颜色框加载时，用户可以选择固定他们正在查看的图像。

```
$(document).ready(function(){
    $(".gallery").colorbox({
        rel:'group1',
        height: '415px',
        onOpen:function(){  
          $('#colorbox').addClass('cbox-alt');

          // variables used to build pinterest URL
          var baseurl = 'http://www.baseurl.co.uk';
          var imgsrc = $(this).children('img').attr('src'); 
          var desc = $(this).children('img').attr('alt');

          $('#cboxContent').append(
            "<div id='pinterest'><a data-pin-config='none' href='//pinterest.com/pin/create/button/?url=" + baseurl + "&media=" + imgsrc + "&description=" + desc + "' data-pin-do='buttonPin'><img src='http://www.baseurl.co.uk/images/pin_it_button.png' alt='Pin it' /></a></div>"
          );        
        },
      });
    }); 
```

现在从上面的代码中，我打开颜色框并在打开时添加一个纯粹用于样式目的的类。之后，我设置了一些变量，这些变量将帮助我构建设置为 pinterest 的 URL 与信息。

如果我单独单击每个图像，这可以正常工作。但是，一旦我单击下一个/上一个按钮，我希望它使用图像名称和用户正在查看的当前图像的描述来更新 URL。

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:34:46.407

使用 onComplete 回调来更新锚元素的 href 属性。

# sql - SQL SELECT 和 UPDATE 返回不同的结果

> ID：15198918
> 
> 赞同：0
> 
> 时间：2013-03-04T10:04:07.687
> 
> 标签：sql

我可能需要你的帮助......我有以下 MySQL 查询：

```
SELECT * FROM dbName1.Prospects A
LEFT JOIN dbName2.inbox B ON 
          substring(A.ProspectCellPhone, 2) = substring(B.SenderNumber, 4) OR 
          substring(A.ProspectCellPhone, 3) = substring(B.SenderNumber, 4) OR 
          substring(A.ProspectCellPhone, 4) = substring(B.SenderNumber, 4) 
LEFT JOIN dbName1.User C ON A.Username = C.Username
WHERE B.TextDecoded IS NOT NULL
AND substring(B.SenderNumber,1,1) = '+'
AND B.NotificationFlag = '0' 
```

返回 125 结果...但是当我尝试使用相同的查询进行更新时，它只返回 45 个更新的结果...更新查询是：

```
UPDATE dbName1.Prospects A
LEFT JOIN dbName2 B ON 
            substring(A.ProspectCellPhone, 2) = substring(B.SenderNumber, 4) OR 
            substring(A.ProspectCellPhone, 3) = substring(B.SenderNumber, 4) OR 
            substring(A.ProspectCellPhone, 4) = substring(B.SenderNumber, 4) 
LEFT JOIN dbName1.User C ON A.Username = C.Username
SET B.NotificationFlag = '1'
WHERE B.TextDecoded IS NOT NULL
AND substring(B.SenderNumber,1,1) = '+'
AND B.NotificationFlag = '0' 
```

我在 UPDATE 查询上做错了吗？

非常感谢您的帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:17:30.580

尝试使用相同的语句，在您的情况下，两个语句的第二行不同：

在 Select 语句中是：

```
LEFT JOIN dbName2.inbox B ON 
```

在更新声明中是：

```
LEFT JOIN dbName2 B ON 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T10:26:24.143

运行此查询以检查表 B 中连接的真实记录数。

```
Select distinct B.some_unique_field from dbName2.inbox B
Left Join dbName1.Prospects A ON 
          substring(A.ProspectCellPhone, 2) = substring(B.SenderNumber, 4) OR 
          substring(A.ProspectCellPhone, 3) = substring(B.SenderNumber, 4) OR 
          substring(A.ProspectCellPhone, 4) = substring(B.SenderNumber, 4) 
WHERE B.TextDecoded IS NOT NULL
AND substring(B.SenderNumber,1,1) = '+'
AND B.NotificationFlag = '0'; 
```

希望我的查询是正确的:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T10:26:41.477

您的选择与 udpate 不匹配，因为您正在对 b 进行更新，所以基本上它会减少到`a JOIN b`并且选择是`a LEFT JOIN b LEFT JOIN C`. 此外，A 中的多行可以匹配 B 中的一行，因此您可以获得比 B 中不同的行更多的结果。试试这个：

```
SELECT DISTINCT b.ID FROM dbName1.Prospects A
JOIN dbName2.inbox B ON 
substring(A.ProspectCellPhone, 2) = substring(B.SenderNumber, 4) OR 
substring(A.ProspectCellPhone, 3) = substring(B.SenderNumber, 4) OR 
substring(A.ProspectCellPhone, 4) = substring(B.SenderNumber, 4) 
WHERE B.TextDecoded IS NOT NULL
AND substring(B.SenderNumber,1,1) = '+'
AND B.NotificationFlag = '0' 
```

# wpf - WPF中的三个显示UI

> ID：15198924
> 
> 赞同：-1
> 
> 时间：2013-03-04T10:04:21.943
> 
> 标签：wpf

我正在尝试在 WPF 中创建一个应用程序，用户将在其中启动它。应用程序将在三个不同的显示器上显示三个屏幕。一旦我启动它，我可以看到一页。您能否建议如何实现上述场景。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:17:40.067

[social.microsoft.com](http://social.msdn.microsoft.com/forums/en-US/wpf/thread/5d181304-8952-4663-8c3c-dc4d986aa8dd)上的这个问题描述了两个显示器解决方案上的两个表格。

# c++ - 无法打开包含文件：'dxgi1_2.h'：没有这样的文件或目录

> ID：15198929
> 
> 赞同：1
> 
> 时间：2013-03-04T10:04:35.847
> 
> 标签：c++, visual-c++, directx-11, dxgi

我在我的 VC++ 代码中包含了头文件“dxgi1_2.h”，我发现我收到了错误。

```
Cannot open include file: 'dxgi1_2.h': No such file or directory 
```

我知道这是因为，我需要从 MSFT 安装一些与 DX11 相关的东西。（Win8 SDK 是否足以容纳此头文件）任何人都可以告诉我如何解决此错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T10:38:25.470

Microsoft Windows SDK for Windows 8 和 .NET Framework 4.5 v8.0a 应该足够了，因为我在 sdk 的包含目录中找到了它。

![在此处输入图像描述](../Images/bdc4f07910896141a5d48468cd8afa29.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T10:55:00.987

您可能应该重新检查项目设置中的包含路径：Project->Settings->C/C++->include。有时即使给出正确的路径也可能不起作用，在这种情况下，您需要重新启动 Visual Studio。

# actionscript-3 - 如何禁用垃圾收集器 as3

> ID：15198931
> 
> 赞同：1
> 
> 时间：2013-03-04T10:04:37.433
> 
> 标签：actionscript-3, flash

所以，我正在用 as3 做一个非常大的项目，我想知道如何禁用垃圾收集器，因为用户可能会长时间使用，我不希望他或她被切断，因为垃圾收集器在某处删除了一些监听器现在应该需要了。

是否有比转到每个侦听器并在命名侦听器后添加“false，0，true”扩展名更简单的方法来禁用垃圾收集器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T10:10:35.587

不，这是不可能的，但你害怕的并不是真正的问题。

此外，使事件侦听器变弱并不会禁用垃圾收集器，事实上，如果这是留给它们的唯一引用，它会使它们设置为的任何对象都有资格进行垃圾收集。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T11:07:10.603

这实际上是可能的，但它需要纪律......

当一个 as3 对象失去对其他对象的所有引用时，它就成为垃圾回收的候选对象。为避免这种情况，您可以使用以下方法：

当您需要一个对象在内存中持久存在时，请将其绑定到可访问的某个位置。

这里我提供了一个示例代码。

首先创建下面的类：

```
package your.package.path;

public class noGc {

protected static var vault:Array = [];

// In case we forget that noGc should stay static....   
public function noGc(){throw new Exception('Error: Instance from STATIC noGc');}

public static function hold(o: *): void {
   if(vault.indexOf(o)==-1)vault.push(o); // no multiple references in vault 
}

public static function release(o: *): Boolean {
var i: int = vault.indexOf(o);
    if(i == -1)return(false);            // return value is for information only
    vault.splice(i,1);                   // remove object from vault
    return(true);
}

public static function releaseAll(): void {
    vault.length = 0;
}

} // end class noGc 
```

避免对“yourObject”进行 gc

```
noGc.hold(yourObject); 
```

允许 gc on "yourObject" 返回

```
noGc.release(yourObject); 
```

对于正常的代码流，在创建对象后立即开始保存对象。然后你**应该**在使用结束时释放它们。

此外，您必须密切关注**异常**，因为异常会破坏正常流程，您**应该**处理它们并释放异常后变得**无关紧要**的对象。

忘记持有的对象意味着使用不必要的内存，也就是**内存泄漏**。

正如我之前所说，它需要纪律。

最后，当您需要擦除所有持有使用的对象时，

```
noGc.releaseAll(); 
```

希望这可以帮助。

# android - 如何在点击/单击时隐藏部分布局

> ID：15198935
> 
> 赞同：1
> 
> 时间：2013-03-04T10:04:43.997
> 
> 标签：android, visibility, android-imageview

在全屏查看图像时，如何获得类似于您在 Facebook 应用程序中看到的结果？（*见附图*）

我利用 Chris Banes 的[PhotoView Library](https://github.com/chrisbanes/PhotoView)实现多点触控缩放功能。

然而，我面临着让它发挥作用的困难。

我的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/llMainContainer"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#000000"
    android:orientation="vertical" >

    <FrameLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_gravity="center" >

        <ImageView
            android:id="@+id/imgvwImage"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_gravity="center"
            android:scaleType="fitXY" >
        </ImageView>

        <LinearLayout
            android:id="@+id/linlaCaption"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="top|center"
            android:layout_margin="4.0dip"
            android:gravity="center"
            android:orientation="horizontal" >

            <TextView
                android:id="@+id/txtPhotoCaption"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:gravity="center"
                android:text="CAPTION"
                android:textColor="#fff1f1f1"
                android:textSize="16.0sp"
                android:textStyle="bold" >
            </TextView>
        </LinearLayout>

        <LinearLayout
            android:id="@+id/linlaLikesAndComments"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="bottom|center"
            android:gravity="center"
            android:orientation="horizontal" >

            <LinearLayout
                android:id="@+id/linlaLikes"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1.0"
                android:orientation="horizontal" >

                <LinearLayout
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_margin="2.0dip"
                    android:orientation="horizontal" >

                    <ImageButton
                        android:id="@+id/imgbtnLike"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:background="@null"
                        android:gravity="center"
                        android:orientation="vertical"
                        android:src="@drawable/photo_viewer_like" >
                    </ImageButton>
                </LinearLayout>

                <LinearLayout
                    android:id="@+id/linlaShowLikes"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:layout_gravity="right|center"
                    android:layout_margin="2.0dip"
                    android:layout_weight="1.0"
                    android:orientation="horizontal"
                    android:padding="5.0dip" >

                    <TextView
                        android:id="@+id/txtLikesTotal"
                        android:layout_width="fill_parent"
                        android:layout_height="fill_parent"
                        android:gravity="left|center"
                        android:text="20 LIKES"
                        android:textColor="#fff1f1f1"
                        android:textSize="12.0sp"
                        android:textStyle="bold" >
                    </TextView>
                </LinearLayout>
            </LinearLayout>

            <LinearLayout
                android:id="@+id/linlaComments"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1.0"
                android:orientation="horizontal" >

                <LinearLayout
                    android:id="@+id/linlaShowComments"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:layout_gravity="right|center"
                    android:layout_margin="2.0dip"
                    android:layout_weight="1.0"
                    android:orientation="horizontal"
                    android:padding="5.0dip" >

                    <TextView
                        android:id="@+id/txtCommentsTotal"
                        android:layout_width="fill_parent"
                        android:layout_height="fill_parent"
                        android:gravity="right|center"
                        android:text="20 COMMENTS"
                        android:textColor="#fff1f1f1"
                        android:textSize="12.0sp"
                        android:textStyle="bold" >
                    </TextView>
                </LinearLayout>

                <LinearLayout
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_margin="2.0dip"
                    android:orientation="horizontal" >

                    <ImageButton
                        android:id="@+id/imgbtnComment"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:background="@null"
                        android:gravity="center"
                        android:orientation="vertical"
                        android:src="@drawable/photo_viewer_comment" >
                    </ImageButton>
                </LinearLayout>
            </LinearLayout>
        </LinearLayout>
    </FrameLayout>

</FrameLayout> 
```

还有我在点击时切换可见性的 JAVA 代码：

```
FrameLayout llMainContainer = (FrameLayout) findViewById(R.id.llMainContainer);
llMainContainer.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        if (linlaLikesAndComments.getVisibility() == View.GONE) {
            linlaLikesAndComments.setVisibility(View.VISIBLE);
        } else if (linlaLikesAndComments.getVisibility() == View.VISIBLE) {
            linlaLikesAndComments.setVisibility(View.GONE);
        }
    }
}); 
```

我需要改变什么才能让它工作？

![在点击屏幕之前](../Images/baa68b6fc3c5786c062307ace18eba3d.png) ![点击屏幕后](../Images/719027916a121c82e95e6f707cc4a97e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:34:55.240

我显然错过了 OP 中提到的库中包含的示例。

它已经包含一个功能，可以显示图像被*点击*的位置。

*我不确定它是否适用于不使用上述库的其他任何东西。*

这就是为我做的：

```
private class PhotoTapListener implements OnPhotoTapListener {

    @Override
    public void onPhotoTap(View view, float x, float y) {
        if (linlaLikesAndComments.getVisibility() == View.GONE) {
            linlaLikesAndComments.setVisibility(View.VISIBLE);
        } else if (linlaLikesAndComments.getVisibility() == View.VISIBLE) {
            linlaLikesAndComments.setVisibility(View.GONE);
        }
    }
} 
```

# ios - 从 RootElement 打开自己的屏幕

> ID：15198938
> 
> 赞同：0
> 
> 时间：2013-03-04T10:05:01.550
> 
> 标签：ios, monotouch.dialog

我想在第一个屏幕（登录后）使用 Monotouch.Dialog，显示用户可以做的所有“事情”（只是一个简单的分组表格样式）。我知道我可以使用 Dialog 轻松实现此目的，但我想在从此列表中选择项目 (RootElement) 时打开自己的屏幕。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:10:14.910

如果嵌套 RootElements，Monotouch.Dialog 将在单击时自动打开新屏幕。如果您需要对流程进行更多控制，您可以覆盖`Selected`方法并根据需要打开屏幕。

[查看MonoTouch.Dialog 简介](http://docs.xamarin.com/guides/ios/user_interface/monotouch.dialog)中的第 3.1 节

# c# - 如何在 C# 中禁用数据网格中的多选选项

> ID：15198941
> 
> 赞同：0
> 
> 时间：2013-03-04T10:05:07.017
> 
> 标签：c#, winforms, datagridview, datatable, paging

如何在 c# 中使用数据表禁用数据网格中的多选选项？实际上我有两个表 A 和 B 现在我要从表 A 中选择一个值，然后单击向下箭头按钮将所选行从表 A 移动到表 B

现在第一次，当我在表 A 中选择一行并单击向下箭头按钮时，选择的行无法添加，但是当我尝试相同的操作时，它工作正常..

这是我的代码片段——这是我第一次选择一行并单击向下箭头按钮时，它会弹出我 :: 未选择行！之后它完美地工作..

```
private void btnSelect_Click(object sender, EventArgs e)
        {          
            dgvFormFieldsView.MultiSelect = false;        
            DataGridViewSelectedRowCollection selectedRows = dgvFormFieldsView.SelectedRows;
            dgvFormFieldsView.ClearSelection();

            if (selectedRows.Count == 0)
            {
            MessageBox.Show("No rows selected!", "Warning");
            return;
            }

            for (int i = selectedRows.Count -1 ; i >= 0; i--)
            {
                    string fieldLabel = null;
                    string fieldType = null;
                    string tabOrder = null;

                    tabOrder = (string)selectedRows[i].Cells[0].Value;
                    fieldLabel = (string)selectedRows[i].Cells[1].Value;
                    fieldType = (string)selectedRows[i].Cells[2].Value;

                    DataRow newRow = selectedFieldsTable.NewRow();
                    newRow["Field Name"] = fieldLabel;
                    newRow["Field Type"] = fieldType;

                    /*Temp Table*/
                    DataRow newRows = TempTable.NewRow();
                    newRows["Field Name"] = fieldLabel;
                    newRows["Field Type"] = fieldType;

                    if (!selectedFieldsTable.Rows.Contains(new System.Object[] { fieldType, fieldLabel }))
                    {
                       selectedFieldsTable.Rows.Add(newRow);
                       acc = selectedFieldsTable.Rows.Count;
                       temprow = TempTable.Rows.Count;
                       if (temprow < 5)
                       {
                           TempTable.Rows.Add(newRows);
                           //Console.WriteLine(counter);
                           currenttemptablecounter = currenttemptablecounter + 1;
                           Console.WriteLine(currenttemptablecounter);
                       }
                       if (temprow >= 5)
                       {
                           NextSelect.Enabled = true;
                       }
                    }
                    else
                    {
                          MessageBox.Show("Form Field :" + fieldLabel + " already selected", "PDF Perform Info");
                    }
            }
            dgvSelectedFieldsView.DataSource = TempTable;
            dgvSelectedFieldsView.ClearSelection();
            applyFormattingSelectedFieldsTable();
         } 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:25:53.907

如果 DataGridView 设置为 false（就像您所做的那样），则必须使用 MultiSelect 属性，但在窗口（或设计器）的初始化中，而不是在选择事件中。

# asp.net - 循环浏览页面上的每个文本框

> ID：15198943
> 
> 赞同：3
> 
> 时间：2013-03-04T10:05:12.523
> 
> 标签：asp.net, vb.net

我想遍历 Web 表单上的每个文本框并清除控件中的所有文本。

我试过了：

```
 Dim ctrl As TextBox

    For Each ctrl In form1.Controls
        ctrl.Text = ""
    Next 
```

但我收到一条错误消息：

无法将“System.Web.UI.LiteralControl”类型的对象转换为“System.Web.UI.WebControls.TextBox”类型。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T10:12:08.097

尝试这个

```
For Each control As Object In form1.Controls
        If TypeOf control Is TextBox Then
            control.Text = ""
        End If

    Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T11:41:44.730

使用此代码

```
For Each c As Control In Page.Controls
If TypeOf c Is TextBox Then
    TryCast(c, TextBox).Text = [String].Empty
End If
Next 
```

# d3.js - d3中的弹跳效果

> ID：15198947
> 
> 赞同：3
> 
> 时间：2013-03-04T10:05:15.830
> 
> 标签：d3.js

有人知道是否可以使用例如转换在 D3 中的 SVG 元素（圆形）上创建弹跳效果？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T09:56:58.267

在 .transition() 之后使用 .ease("bounce") 或 .ease("elastic") 可以实现该效果。请注意，弹跳和弹性相似但不相同。在这个（imo）非常好的指南中，您可以找到一些 d3 的好例子，我自己用它们来学习它[http://shop.oreilly.com/product/0636920026938.do](http://shop.oreilly.com/product/0636920026938.do)

# ruby-on-rails - accept_nested_attributes 没有破坏记录

> ID：15198950
> 
> 赞同：1
> 
> 时间：2013-03-04T10:05:22.363
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nested-attributes, has-many, fields-for

我的问题与 accept_nested_attributes 有关，我有一个模型名称`StudentProfile`，它包含以下代码：

```
class StudentProfile < ActiveRecord::Base
   attr_accessible :projects_attributes
   has_many :projects ,:inverse_of => :student_profile,:dependent => :destroy
   accepts_nested_attributes_for :projects, :allow_destroy => true, :reject_if => lambda { |a| a[:name].blank? }
end 
```

我的另一个模型包含以下代码：

```
class Project < ActiveRecord::Base
   belongs_to :student_profile
end 
```

和我的视图文件包含以下代码：

```
<%= f.fields_for :projects do |builder| %>
   <%= render "projects_fields", :f => builder %>
<% end %>
<%= link_to_add_fields "Add Project", f, :projects %> 
```

现在的问题是，每当我保存学生资料时，我实际上也可以保存项目记录，但是每当我尝试更新学生资料并删除其中一个项目时，它实际上并没有在更新时破坏项目，但我`params`包括以下内容内容：

```
"projects_attributes"=>{"0"=>{"name"=>"test", "_destroy"=>"1", "id"=>"2"}} 
```

请澄清我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:19:11.577

可能是批量属性保护，在你的StudentProfile上，添加以下内容：

```
class StudentProfile < ActiveRecord::Base
  attr_accessible :projects_attributes

  has_many :projects ,:inverse_of => :student_profile,:dependent => :destroy
  accepts_nested_attributes_for :projects, :allow_destroy => true, :reject_if => lambda { |a| a[:name].blank? }
end 
```

# c# - 在 C# 中的 XDocument 中解析名称为“object”的 XML 节点

> ID：15198954
> 
> 赞同：1
> 
> 时间：2013-03-04T10:05:48.027
> 
> 标签：c#, xml, linq-to-xml

我的问题如下：我想解析一个使用平铺地图编辑器创建的 xml 文件，我在其中插入了一个对象层（用于碰撞对象）。但不幸的是，Tiled 将 xml 文件中的节点命名为“objectgroup”及其后代“object”

```
<objectgroup name="solidObjects" width="100" height="100">
 <object gid="265" x="16" y="35"/>
 <object gid="265" x="66" y="36"/>
</objectgroup> 
```

我正在尝试做类似的事情

```
XDocument doc = XDocument.Load("pathtoFile\sourcefile.xml");
List<Rectangle> objectList = new List<Rectangle>();

foreach (var object in doc.Element("objectgroup").Descendants("object"))
{ objectList.Add(objectRectangle); } 
```

但是由于“object”在 c# 中是一个受保护的词，所以它不起作用。任何提示如何以最简单的方式处理此问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T10:09:59.770

如果你绝对*必须*使用`object`你的变量名（不推荐），那么你可以在它前面加上一个`@`符号：

```
foreach (var @object in doc.Element("objectgroup").Descendants("object")) {
    objectList.Add(@object);
} 
```

符号前缀允许代码中的`@`标识符使用保留字作为其名称。

# algorithm - 如何在平面上有效分布点

> ID：15198959
> 
> 赞同：3
> 
> 时间：2013-03-04T10:05:50.707
> 
> 标签：algorithm, geometry, html5-canvas, graph-algorithm

我有一个平面（屏幕），它的宽度和高度（显示器分辨率，不是正方形）。我想在那个平面上以（大约）相同的距离分布点。

例如：

*   1点将在中间，
*   2个点在y轴中间，x轴除以3
*   3个点可能像三角形，但如果场景足够宽，它们可以在同一个y上对齐
*   4 像上面的第二部分，或者作为矩形..
*   等最高8分

有什么算法可以解决这个问题吗？

感谢您的时间！

**编辑：**彼此之间和与平面边界的距离相同

**EDIT2：**我计算我在平面上模拟行为的对象组的质心。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T19:40:41.033

根据您想要的精度：

*   您可以通过泊松圆盘采样获得随机正确的答案。具体来说，泊松盘采样是随机采样，使得没有点比指定半径更近。这样的事情可以在高维度上有效地（线性时间）实现 - 例如：来自 Robert Bridson 的 c++ 代码：[http](http://www.cs.ubc.ca/~rbridson/download/curlnoise.tar.gz) ://www.cs.ubc.ca/~rbridson/download/curlnoise.tar.gz 实现他的论文[http： //www.cs.ubc.ca/~rbridson/docs/bridson-siggraph07-poissondisk.pdf](http://www.cs.ubc.ca/~rbridson/docs/bridson-siggraph07-poissondisk.pdf)

*   您可以真正优化点的位置。这导致了 Lloyd 算法和类似的优化程序：计算一组初始点的 Voronoi 图，并将这些点移动到它们的 Voronoi 单元的质心。这也可以非常有效地完成，并且可以通过使用牛顿法而不是劳埃德迭代来加快速度。最终，如果你的域是正方形，你应该得到一个六边形网格（它最小化了上面的函数）。

如果您只需要近似结果，我会建议第一种方法应该更快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T11:03:14.113

如果你有很多点，结果将看起来像一个六边形网格：

[http://people.sc.fsu.edu/~jburkardt/m_src/hex_grid/hex_grid.html](http://people.sc.fsu.edu/~jburkardt/m_src/hex_grid/hex_grid.html)

否则会变得更复杂。一种效果很好（但可能有点过分）的算法是进行物理模拟，其中点是相互排斥的粒子。看看[这个在球体上做同样的视频](http://www.youtube.com/watch?v=u8nvr2csxRE)的例子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T10:53:20.360

编辑：不适用于物理排斥模拟。

将平面划分为矩形更容易处理。对于边长均匀的矩形，你不能在中心有一个点。然而，等距属性将它们很好地分散在屏幕上。

PHP中的简单程序来说明这一点：

```
<?php 
$x_min = 1; $x_max = 1366;

$y_min = 1; $y_max = 768;

$x_div_count = 5;
$y_div_count = 5;

$x_div_len = (integer)round(($x_min + $x_max) / $x_div_count);
$y_div_len = (integer)round(($y_min + $y_max) / $y_div_count);

$x_mid_offset = (integer)round($x_div_len /2);
$y_mid_offset = (integer)round($y_div_len /2); 

$x_offset = $x_mid_offset;
for ($idx =0; $idx < $x_div_count; $idx ++) {

    $y_offset = $y_mid_offset;
    for ($jdx =0; $jdx < $y_div_count; $jdx ++) {

        $points_dist[] = array ('x' => $x_offset, 'y' => $y_offset);

        $y_offset += $y_div_len;
    }
    $x_offset += $x_div_len;
}

var_dump(get_defined_vars());
?> 
```

PS：如果您可以处理亚像素渲染，那么请使用浮点值。这样的点往往是模糊的，但整体效果很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T23:08:49.083

首先，感谢大家的建议，这些建议帮助我更好地定义我的问题并找到解决问题的最佳方法。

现在我正在使用根据维基百科的**Centroidal Voronoi tessellation ：** *“在几何学中，Centroidal Voronoi tessellation (CVT) 是一种特殊类型的 Voronoi tessellation 或 Voronoi 图。当每个 Voronoi 单元的生成点也是时，Voronoi tessellation 称为质心它的平均值（质心）。它可以被视为对应于发电机的最佳分布的最佳分区。*

它非常快，并且在我正在使用的 javascript 的 D3js 库中有实现。

# php - 如何限制仅在一个网站上安装 wordpress 插件（防止多站点安装）？

> ID：15198962
> 
> 赞同：-1
> 
> 时间：2013-03-04T10:06:15.387
> 
> 标签：php, javascript, wordpress

我有一个 wordpress 插件，我将很快发布。剩下的功能是限制插件的使用，以便下载它的人只能在一个网站上使用它。我似乎找不到任何关于如何实现这一目标的现有教程。谁能给我一些关于如何处理这个问题的指示？如何调整插件代码，以便它可以跟踪插件的使用次数。请提供一些可行的想法。如果您能向我指出一些详细解释此概念的教程/文章，那就太好了。也许可能存在不限于 Wordpress 的现有解决方案，而是通用 PHP 解决方案。请就此给我建议。谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T10:12:49.983

没有可能真正做到这一点。

# 签入 WP

有一些非常肮脏的解决方案（我认为），例如对代码进行离子化并实现对域名进行编码的序列号。

# ping 你的服务器

您可以使用实际域名对您自己的服务器执行 ping 操作，然后检查该域是否允许使用您的插件，如果不允许，请起诉域所有者。

# 信任您的客户

但如果你想要更多我的意见：相信你的客户。

# java - 避免在 android 设备上的应用程序设置中单击“清除数据”按钮从数据库中删除数据

> ID：15198965
> 
> 赞同：8
> 
> 时间：2013-03-04T10:06:30.830
> 
> 标签：java, android, database, sqlite

我`database`用来存储一些`data`. 但是当用户转到`Apps Setting`s 并按下`'clear data'`应用程序设置中的按钮时，数据库中的数据被删除如何避免这种情况。我可以`'clear data'`在应用程序设置中将我的应用程序的按钮设置为未启用或任何其他建议....

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-12T07:31:20.287

添加`android:manageSpaceActivity=".ActivityOfMyChoice"` 到您的清单的应用程序标签中，例如：

`<application android:label="MyApp" android:icon="@drawable/icon" android:manageSpaceActivity=".ActivityOfMyChoice" >`

然后不是“清除数据”，而是有一个“管理空间”按钮，它启动 ActivityOfMyChoice

ActivityOfMyChoice.java

```
public class ActivityOfMyChoice extends Activity {
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    finish();
} 
```

因此，当我们单击 Mange 活动时，它会完成该活动。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T10:11:53.197

没有直接的方法可以避免从我所知道的任何应用程序数据中清除。

但是，您可以将数据存储在某个文件中的外部存储（SD 卡）中，并在每次应用启动时检查该文件是否存在并将其内容合并到数据库中。如果用户手动从 SD 中删除您的备份文件、插入另一个 SD、移除 SD 或将设备作为已安装的驱动器连接到计算机然后启动应用程序，这当然不起作用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-04T10:12:59.867

Android 不会询问您的 App 是否要删除其数据。它是提供给用户的系统功能。用户有权完全卸载该应用程序。

因此，在另一个位置创建/打开数据库文件。

数据持久性：

1.  应用缓存目录：内存不足时删除。
2.  应用数据目录：当用户清除应用数据时删除，应用被卸载。
3.  外部存储：用户可以随时删除，用户也可以删除存储。
4.  备份管理器：新版本的 android 提供应用程序通过 BackupManager 在云上备份数据。
5.  远程服务器：保留在服务器中直到被删除。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-28T02:34:40.987

我认为有一种方法，但还没有尝试过。您可以将数据库文件存储在资产文件夹中，检查它是否可用，否则就像这样[https://stackoverflow.com/a/9109728/265167](https://stackoverflow.com/a/9109728/265167)（注意 DataBaseHelper 类）。但是这样做，您将丢失所有“更新数据”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-24T09:57:28.283

最后我找到了一些解决方案，如果您让应用程序系统管理员，则无法清除数据和卸载应用程序

# c# - 从table1中选择数据并复制到table2

> ID：15198966
> 
> 赞同：0
> 
> 时间：2013-03-04T10:06:33.787
> 
> 标签：c#, sql, database

我是一个真正的 C# 新手。

我在这里看到了很多这样的问题。但是，在尝试时，我无法获得我的代码。

我希望检索一行的所有列，然后将其传输到同一数据库的另一个表。

所以基本上，检索数据`table1`并将其复制到`table2`.

我已经尝试了这么多代码。而且我很困惑如何直接调用检查字符串而不是在“”中定义str1字符串中的每一列。

```
 string check = "select * from custdetails where billid = @billid ";

         SqlCommand cmd1 = new SqlCommand(check , conn);
        cmd1.Parameters.AddWithValue("@billid", billid);

        DataSet ds = new DataSet();
        SqlDataAdapter da = new SqlDataAdapter(cmd1);
        da.Fill(ds);
       // string str1;
        int count = ds.Tables[0].Rows.Count;
        if (count > 0)
        {
            string str1 = ds.Tables[0].Rows[0][""].ToString();
        } 
```

我真的对c#没有太多的想法。感谢帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T10:09:59.830

您可以使用：

```
INSERT INTO table2 (SELECT * FROM  table1 WHERE billid = @billid) 
```

`table1`仅当&`table2`具有相同的结构时，上述内容才是 gud 。如果两个表的结构不同，您需要更改`SELECT *`为`SELECT [COLUMNS ,]...`

完成复制数据后，您可以继续将数据读入您的应用程序

```
string check = "select * from custdetails where billid = @billid ";

SqlCommand cmd1 = new SqlCommand();
// use the command object to copy table first....
cmd1.Connection = conn;
cmd1.CommandText = "INSERT INTO table2 (SELECT * FROM  table1 WHERE billid = @billid)";
cmd1.ExecuteNonQuery();

//then continue doing the normal work
cmd1.CommandText = check;
cmd1.Parameters.AddWithValue("@billid", billid);

DataSet ds = new DataSet();
SqlDataAdapter da = new SqlDataAdapter(cmd1);
da.Fill(ds);
// string str1;
int count = ds.Tables[0].Rows.Count;
if (count > 0)
{
    string str1 = ds.Tables[0].Rows[0][""].ToString();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T10:13:02.153

> 您可以通过以下行来实现它。

```
INSERT INTO targettable
SELECT * FROM custdetails WHERE billid = @billid; 
```

# python-2.7 - 在 python 的单独窗口中读取命令提示符输出

> ID：15198967
> 
> 赞同：2
> 
> 时间：2013-03-04T10:06:33.780
> 
> 标签：python-2.7, wxpython

我有一个 python 脚本，它在 Windows 系统上使用 msbuild 构建解决方案文件。我想在构建过程运行时显示命令提示符输出。我的代码如下所示

```
def build(self,projpath):
    if not os.path.isfile(self.msbuild):
        raise Exception('MSBuild.exe not found. path=' + self.msbuild)

    arg1 = '/t:Rebuild'
    arg2 = '/p:Configuration=Release'
    p = subprocess.call([self.msbuild,projpath,arg1,arg2])
    print p
    if p==1:
        return False
    return True 
```

我能够构建文件，但我需要在单独的 GUI（状态窗口）中显示构建状态。我尝试了很多将命令提示符输出重定向到文件，然后从文件中读取，但是无法做到. 我尝试使用以下命令，

```
subprocess.check_output('subprocess.call([self.msbuild,projpath,arg1,arg2])', shell=False) > 'C:\tmp\file.txt' 
```

谁能告诉我当我运行脚本时如何在状态窗口（使用 wxpython 的 GUI）中显示命令提示符的所有输出？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T15:18:45.140

当我想用 wxPython 捕获 traceroute 和 ping 命令时，我做了类似的事情。我在本教程中写过它：http: [//www.blog.pythonlibrary.org/2010/06/05/python-running-ping-traceroute-and-more/](http://www.blog.pythonlibrary.org/2010/06/05/python-running-ping-traceroute-and-more/)

首先，您需要[重定向 stdout](http://www.blog.pythonlibrary.org/2009/01/01/wxpython-redirecting-stdout-stderr/)，基本上是这样的：

```
redir=RedirectText(log)
sys.stdout=redir 
```

其中 RedirectText 是一个特殊的类，它接受 wx.TextCtrl 作为参数。见下文：

```
class RedirectText(object):
    def __init__(self,aWxTextCtrl):
        self.out=aWxTextCtrl

    def write(self,string):
        self.out.WriteText(string) 
```

这是我的 ping 命令的示例：

```
proc = subprocess.Popen("ping %s" % ip, shell=True, 
                        stdout=subprocess.PIPE) 
print
while True:
    line = proc.stdout.readline()                        
    wx.Yield()
    if line.strip() == "":
        pass
    else:
        print line.strip()
    if not line: break
proc.wait() 
```

所以你只需要运行 subprocess 并使用它的 readline 函数来获取输出的数据。然后将输出打印到重定向到文本控件的标准输出。wx.Yield() 调用将允许文本控件实时更新。否则，它将在子流程完成后更新。

# javascript - Javascript location.replace 和 iframe

> ID：15198972
> 
> 赞同：0
> 
> 时间：2013-03-04T10:06:52.193
> 
> 标签：javascript

下面的程序在chrome下可以运行，但是在firefox下不行，需要刷新页面，否则页面会空白！

firefox会跳出store窗口使用iframe不行，有办法解决吗？

谢谢大家！

```
var url = "/card/"+dl_path;
SaveFrame.document.location.replace(url);

<iframe id="SaveFrame" style="display: none"></iframe> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:12:20.603

如果你使用 jQuery，你可以使用类似`$('#saveFrame').attr('src', url)`. 它应该适用于所有浏览器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T10:16:48.720

尝试

```
document.getElementById('SaveFrame').src="http://google.com/"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T10:16:32.627

通过在全局范围内隐式创建的变量来寻址元素是一种专有的“Internet Explorer”方式，很可能在其他浏览器中不起作用（尽管由于兼容性原因 Chrome 支持这一点）。您应该始终通过 Dom 选择方法通过以下方式处理元素：

```
document.querySelector(id)
// or
document.getElementById(id) 
```

对于您的情况，这将是：

```
document.getElementId('SaveFrame').contentDocument.location.replace(url);
// or
document.getElementId('SaveFrame').src= url; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-04T16:34:34.440

**这应该可以工作，并且可以快速加载网页** 它对我有用...

```
onmouseover="window.open ('http://www.yourpage.com','YourTargetName'); this.onmouseover=null;" 
```

代码“this.onmouseover=null;” 意味着它应该只在加载时执行一次，而不是在第二次鼠标悬停时重复该属性，如果您希望它在第二次鼠标悬停时重复该属性，则删除“this.onmouseover=null;” 从代码中并使它看起来像这样每次鼠标结束时加载：

```
onmouseover="window.open ('http://www.yourpage.com','YourTargetName');" 
```

例子：

```
<a href="#" onmouseover="window.open ('http://www.yourpage.com','YourTargetName');">
My Link</a> 
```

**或者试试这个：**

```
OnClick="window.open ('http://www.yourpage.com','YourTargetName');" 
```

例子：

```
<a href="#" OnClick="window.open ('http://www.yourpage.com','YourTargetName');">
My Link</a> 
```

或者

```
<a href="javascript:window.open ('http://www.yourpage.com','YourTargetName');">
My Link</a> 
```

或者

如果您希望`window.location.replace`在加载页面或框架时不更新历史记录，请使用如下所示的链接：

```
<a href="#" onclick="YourTargetName.location.replace ('http://www.YourPage.com');">
The targeted Link</a> 
```

或者

```
<a href="javascript:YourTargetName.location.replace ('http://www.YourPage.com');">
The targeted Link</a> 
```

***信息：***对于此脚本，所有、 、`onclick`和`onmouseover`都可以使用。`onmouseout``onload``href="javascript:"`

**注意：**请记住，iframe 必须具有 name="YourTargetName"，例如看起来像这样：

```
<iframe id="SaveFrame" style="display: none" name="YourTargetName"></iframe> 
```

***信息：***`window.open`和`window.location.replace`或之间的区别在于`YourTargetName.location.replace`：
-`window.open`在浏览器历史记录中加载。
-`window.location.replace`或`YourTargetName.location.replace`不加载历史记录。

# html - 显示第一组 ul li 并隐藏所有后续使用 CSS

> ID：15198973
> 
> 赞同：0
> 
> 时间：2013-03-04T10:06:54.563
> 
> 标签：html, css

我有以下 HTML：

```
<ul class="articles">
    <li>
        <!-- Display these -->
        <ol class="faces">
            <li>
                <a href="#">View More #1</a>
            </li>
            <li>
                <a href="#">View More #2</a>
            </li>
        </ol>
    </li>
    <li>
        <!-- Hide these -->
        <ol class="faces">
            <li>
                <a href="#">View More #3</a>
            </li>
            <li>
                <a href="#">View More #4</a>
            </li>
        </ol>
    </li>
</ul> 
```

首次加载页面时，我想显示第一个`ol.faces li's`（带有 #1 和 #2 锚链接）并隐藏后续的`ol li's`. 这可以在不添加更多类的情况下使用 css 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:13:04.330

隐藏所有`li`直接后代的标签`.article`

```
 .articles>li{
        display:none;
    } 
```

显示第一个`li`内`.article`

```
.articles>li:first-child{
    display: block;
} 
```

**工作示例：http:** [//jsfiddle.net/xNnpR/](http://jsfiddle.net/xNnpR/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T10:09:21.470

您可以使用选择器：

```
li:first-child
{
    /* Your CSS  */
} 
```

声明一个 DOCTYPE 使其适用于 IE8 和 IE7。

请参阅[http://www.w3schools.com/cssref/tryit.asp?filename=trycss_sel_firstchild_more3](http://www.w3schools.com/cssref/tryit.asp?filename=trycss_sel_firstchild_more3)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T10:12:43.547

```
.articles > li:first-child{
   visibility: visible !important;
}

.articles li{
   visibility: hidden;
} 
```

# linux - 从 shell 脚本中的 RTF 文件中提取信息

> ID：15198974
> 
> 赞同：1
> 
> 时间：2013-03-04T10:06:55.207
> 
> 标签：linux, shell, extract, rtf

我们有许多 RTF 文件需要在 Oracle EBS 中上传到它们各自的类别。为此，我们需要读取存储在 RTF 文件的 Document Properties 中的一些信息。这些字段是标题、主题、作者、公司和类别。

当我们在记事本中打开一个 RTF 文件时，我们可以看到此信息，但不确定如何使用 linux 命令提取它。使用 grep 不是很成功。

我在此处粘贴包含此信息的 RTF 文件的一部分

```
\mwrapIndent1440\mintLim0\mnaryLim1}{\info**{\title ^XXSLS_GBL_ORDACK^}****{\subject XXSLS}****{\author ^es_ES,es_FR,ES_IT,ES_de^}**{\doccomm $Header: XXSLS_GBL_ORDACK_ES_ES.rtf $}
{\operator }{\creatim\yr2012\mo11\dy11\hr14\min3}{\revtim\yr2013\mo3\dy2\hr10\min43}{\version24}{\edmins361}{\nofpages4}{\nofwords725}{\nofchars14202}{\*\manager }{\*\company }**{\*\category ^BD^}**{\nofcharsws14898}
{\vern32773}}{\*\userprops {\propname _DocHome}\proptype3{\staticval -974575144}}{\*\xmlnstbl {\xmlns1 http://schemas.microsoft.com/office/word/2003/wordml}}\paperw11850\paperh18144\margl851\margr851\margt851\margb0\gutter0\ltrsect 
```

有人可以建议我们如何提取此信息，如下所示：

```
Title=^XXSLS_GBL_ORDACK^
Subject=XXSLS
Author=^es_ES,es_FR,ES_IT,ES_de^
Category=^BD^ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:34:41.293

Grep 可以使用 -E（高级正则表达式）标志和 -o（仅匹配输出）标志来完成。

```
 title=`grep -oE 'title [^\}]+' file.rtf | sed 's/title //g'`
 echo "title=$title"
 subject=`grep -oE 'subject [^\}]+' file.rtf | sed 's/subject //g'`
 echo "subject=$subject"
 author=`grep -oE 'author [^\}]+' file.rtf | sed 's/author //g'`
 echo "author=$author"
 category=`grep -oE 'category [^\}]+' file.rtf | sed 's/category //g'`
 echo "category=$category" 
```

我明白了

```
title=^XXSLS_GBL_ORDACK^
subject=XXSLS
author=^es_ES,es_FR,ES_IT,ES_de^
category=^BD^ 
```

# java - Lambda 表达式和高阶函数

> ID：15198979
> 
> 赞同：9
> 
> 时间：2013-03-04T10:07:02.287
> 
> 标签：java, lambda, closures, java-8

如何使用带有闭包的 Java 8 编写支持将函数作为参数并将函数作为值返回的方法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-04T11:04:05.987

在 Java Lambda API 中，主类是[java.util.function.Function](http://docs.oracle.com/javase/8/docs/api/java/util/function/Function.html)。

您可以像使用所有其他引用一样使用对该接口的引用：将其创建为变量，将其作为计算结果返回，等等。

这是一个非常简单的示例，可能会对您有所帮助：

```
 public class HigherOrder {

        public static void main(String[] args) {
            Function<Integer, Long> addOne = add(1L);

            System.out.println(addOne.apply(1)); //prints 2

            Arrays.asList("test", "new")
                    .parallelStream()  // suggestion for execution strategy
                    .map(camelize)     // call for static reference
                    .forEach(System.out::println);
        }

        private static Function<Integer, Long> add(long l) {
            return (Integer i) -> l + i;
        }

        private static Function<String, String> camelize = (str) -> str.substring(0, 1).toUpperCase() + str.substring(1);
    } 
```

如果您需要传递超过 1 个参数，请查看`compose`方法，但它的使用非常棘手。

一般来说，在我看来，Java 中的闭包和 lambda 基本上是语法糖，它们似乎并不具备函数式编程的所有功能。

# asp.net - 无法加载类型“System.ServiceModel.Activation.HttpModule”

> ID：15198981
> 
> 赞同：15
> 
> 时间：2013-03-04T10:07:17.570
> 
> 标签：asp.net, iis

我正在运行 aspnet_regiis.exe，但我仍然收到同样的错误：

> 无法从程序集“System.ServiceModel，Version=3.0.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089”加载类型“System.ServiceModel.Activation.HttpModule”。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。异常详细信息：System.TypeLoadException：无法从程序集“System.ServiceModel，Version=3.0.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089”加载类型“System.ServiceModel.Activation.HttpModule”。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-30T15:57:35.647

如果您运行的是 Windows 8，此方法将不起作用。微软不会让你运行这个命令，告诉你这个：

> > 此版本的操作系统不支持此选项。管理员应该使用“打开/关闭 Windows 功能”对话框、服务器管理器管理工具或 dism.exe 命令行工具来安装/卸载带有 IIS8 的 ASP.NET 4.5。

原因在此链接上：http: [//support.microsoft.com/kb/2736284](http://support.microsoft.com/kb/2736284)。

对我有用的解决方案发布在此链接上，Neha 的回答：[System.ServiceModel.Activation.HttpModule 错误](https://stackoverflow.com/questions/4374639/system-servicemodel-activation-httpmodule-error/15523900#15523900)

> > 到处都提到此解决方案的问题是使用 aspnet_regiis.exe 重新注册 aspNet。但这对我不起作用。
> > 
> > 虽然这是一个有效的解决方案（如此处精美解释）
> > 
> > 但它不适用于 Windows 8。
> > 
> > 对于 Windows 8，您需要 Windows 功能并启用“.Net Framework 3.5”和“.Net Framework 4.5 Advanced Services”下的所有内容。
> > 
> > 谢谢内哈

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-01-09T09:55:41.123

将 IIS 服务器升级到 .NET 4.5.1（之前安装了 .NET 4.0）后，我遇到了同样的错误。就我而言，**`aspnet_regiis`**使用参数运行**`-iru`**解决了问题，即。

```
C:\Windows\Microsoft.NET\Framework\v4.0.30319\aspnet_regiis -iru 
```

**注意：**在**64 位系统**上，您应该使用

```
%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_regiis -iru 
```

* * *

**笔记：**

*   .NET 4.0 和更高版本（例如 4.5.1）都安装到 v.4.0.30319 中，这与早期版本相比发生了变化（您不会找到 v4.5 文件夹）。要获取已安装的 .NET 框架版本，请参阅**[此](https://stackoverflow.com/a/46826686/1016343)**答案。

*   **[这里](http://support.microsoft.com/kb/2015129)**描述了这个错误的原因，如果你想手动检查，我从这篇文章中引用以下内容：

> 出现此问题的原因是 Windows Process Activation Service (WAS) 的**Applicationhost.config**文件定义了以下部分，并且**此部分与 .NET Framework 4.0 不兼容：**
> 
> `<add name="ServiceModel" type="System.ServiceModel.Activation.HttpModule, System.ServiceModel, Version=3.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" preCondition="managedHandler" />`

此部分应定义如下（注意`preCondition`）：

```
<add name="ServiceModel" type="System.ServiceModel.Activation.HttpModule, 
System.ServiceModel, Version=3.0.0.0, Culture=neutral, 
PublicKeyToken=b77a5c561934e089" 
preCondition="managedHandler,runtimeVersionv2.0" /> 
```

**注意**：您可以**`Applicationhost.config`**在以下位置找到该文件：`%windir%\system32\inetsrv\config`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-04T10:32:53.967

似乎 ASP.NET 4.0 未在 IIS 中正确注册。你能尝试用 IIS 重新注册 asp.net 吗？您可以同时尝试 2.0 和 4.0，以确保它适用于所有 .NET 版本。

对两个版本的 asp.net 使用以下命令将 asp.net 注册到 IIS

aspnet_regiis -i

这位于两个 .NET 框架版本文件夹中。

C:\Windows\Microsoft.NET\Framework\v4.0.30319 和 C:\Windows\Microsoft.NET\Framework\v2.0.50727

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-01-18T17:46:49.697

获取以下目录中的 applicationhost.config 文件：C:\Windows\system32\inetsrv\config

将定义以下部分：

```
<add name="ServiceModel" type="System.ServiceModel.Activation.HttpModule, System.ServiceModel, Version=3.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" preCondition="managedHandler" /> 
```

上述定义与 .NET framework 4.0 不兼容，您可以通过将上述部分替换为以下内容来解决此问题：

```
<add name="ServiceModel" type="System.ServiceModel.Activation.HttpModule, System.ServiceModel, Version=3.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" preCondition="managedHandler,runtimeVersionv2.0" /> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-23T04:36:17.350

要解决此问题，请运行以下命令行：

1.  关闭应用程序
2.  在项目文件（Web 应用程序）中更改虚拟目录
3.  现在打开项目文件

它肯定会起作用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-26T05:30:38.727

要解决此问题，请运行以下命令行：

*   aspnet_regiis.exe /iru Aspnet_regiis.exe 文件位于以下位置之一： %windir%\Microsoft.NET\Framework\v4.0.30319 %windir%\Microsoft.NET\Framework64\v4.0.30319（在 64位计算机）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-01-27T12:48:50.607

在 Windows 2012 上，以下工作：

出于某种原因，我不知道默认应用程序池设置为使用 4.0 ：

[应用程序池属性](http://i.stack.imgur.com/t0pMt.png)

但它没有正确反映在 c:\windows\system32\inetesrv\config\applicationhost.config 中：

```
<add name="DefaultAppPool" enable32BitAppOnWin64="true" /> 
```

我不得不将其设置回 2.0，然后再次设置为 4.0，然后配置文件很好，错误消失了：

```
<add name="DefaultAppPool" enable32BitAppOnWin64="true" managedRuntimeVersion="v4.0" /> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-08-02T15:16:40.627

我迟到了，希望对某人有所帮助....这是 IIS 8.0 的一个已知问题

> 解决方案是从 IIS 管理器中删除 3.x 模块和处理程序。如果要将它们保留在 applicationHost.config 中，可以在应用程序或站点级别删除它们。但我想从 applicationHost.config 中删除它们。执行以下步骤：
> 
> 在 IIS 管理器中，单击机器名称节点。在“功能视图”中，双击“模块”。找到“ServiceModel”并将其删除。图 1 用于解决 IIS 8 错误：无法加载类型“System.ServiceModel.Activation.HttpModule”</p>
> 
> 回到机器名节点的“Features View”，双击“Handler Mappings”。找到“svc-Integrated”并将其删除。图 2 用于解决 IIS 8 错误：无法加载类型“System.ServiceModel.Activation.HttpModule”</p>

# android - PhoneGap 互操作

> ID：15198993
> 
> 赞同：2
> 
> 时间：2013-03-04T10:07:55.320
> 
> 标签：android, iphone, cordova, windows-phone-8

**智能手机应用程序应该在**

*   iOS
*   安卓
*   视窗电话

**用例**

1.  拍摄视频
2.  浏览一些丰富的 UI
3.  视频处理

**执行**

1.  将 PhoneGap 用于“视频捕获”和“用户界面”
2.  对“视频处理”部分使用操作系统特定的实现（iPhone 为“Objective-C”，Android 为 C++，WindowsPhone 为 C++/COM）

**在向PhoneGap投入更多股份之前，我想知道IF**

*   PhoneGap 支持上述用例，它是否支持基于每个操作系统的操作系统特定互操作（用于视频处理）？
*   PhoneGap 支持单个解决方案/项目，包括“视频处理”部分的每个操作系统本机实现？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:40:24.553

根据您的用例

1.  确认。看看[captureVideo](http://docs.phonegap.com/en/2.5.0/cordova_media_capture_capture.md.html#capture.captureVideo) api

2.  确认。Phonegap 支持 jquerymobile 和其他移动 web 框架。

3.  符合。这可以作为附加的 PhoneGap 插件来实现。理想情况下，您将在所有平台上拥有相同的 js 文件，其中包含 api 定义和每个平台的不同平台特定实现。

# javascript - 是否可以在 phonegap 中编辑和保存文本？

> ID：15198994
> 
> 赞同：0
> 
> 时间：2013-03-04T10:07:58.717
> 
> 标签：javascript, html, xml, cordova

我正在PhoneGap（和Xcode，XML和HTML）中开发一个应用程序，它执行基本功能，例如写入文件onload并将其读取给用户等。我正处于被要求将文件读入textarea的地步并允许用户对其进行编辑并将编辑内容保存到文件中。使用PhoneGap，是否可以这样做？我在找出如何保存编辑时遇到了麻烦——这就是我发现麻烦的地方。

请注意，我是 XML 和 PhoneGap 的新手，因此非常感谢任何帮助。如果您能告诉我是否可以使用我正在使用的语言来编辑和保存编辑内容，那就太好了，尽管如果可能的话，您能否将我引导到我可以找到如何操作/给我代码的网站这里？

非常感谢你提前xx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:13:17.537

您可以使用 PhoneGap 读取任何文件或将任何文件写入系统。[阅读](http://docs.phonegap.com/en/2.5.0/cordova_file_file.md.html#File)它的文档。

如果文件是 XML，那么您将不得不解析它并[使用 JavaScript 读取](http://www.hiteshagrawal.com/javascript/javascript-parsing-xml-in-javascript)。

您必须先尝试一下，并使用您遇到的特定错误更新评论部分，然后这里的用户将能够帮助您。祝你好运。

# ios - 如何在单击图像按钮时弹出视图图像

> ID：15198995
> 
> 赞同：0
> 
> 时间：2013-03-04T10:08:04.013
> 
> 标签：ios, objective-c, uipopovercontroller

我创建了一个图像视图，并将其分配给下面代码中显示的图像按钮。一旦我单击图像，它应该会弹出但它不起作用。如果我尝试使用 UIPopOverView 它不起作用。如何创建按钮弹出控制器。

```
- (IBAction)showPopover:(UIButton *)sender
{
if(![popoverController isPopoverVisible]){
    myPopOver = [[PopViewController alloc] initWithNibName:@"PopViewController" bundle:nil];
    popoverController = [[[UIPopoverController alloc] initWithContentViewController:myPopOver] retain];

    [popoverController setPopoverContentSize:CGSizeMake(299.0f,111.0f)];
    [popoverController presentPopoverFromRect:CGRectMake(10, 10, 200, 200) inView:self.view permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
}
else{
    [popoverController dismissPopoverAnimated:YES];
    }
}

- (void)viewDidLoad
{
[super viewDidLoad];   
imageView=[[UIImageView alloc] initWithFrame:CGRectMake(10, 10,100, 100)];
imageView.image=[UIImage imageNamed:@"Dosa.jpg"];    
CGRect textViewFrame = CGRectMake(10, 10, 300, 400);
textView = [[UITextView alloc] initWithFrame:textViewFrame];
textView.returnKeyType = UIReturnKeyDone;
textView.text = @"\n\n\n\n\n\n\n\nDOSA\nDosa, a common breakfast dish and street food, is rich in carbohydrates, and contains no sugar or saturated fats. ";
textView.backgroundColor=[UIColor whiteColor];
textView.editable=NO;
textView.delegate = self;
[self.view addSubview:textView];         
[textView addSubview:imageView];        
textView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"Indian.jpg"]];
textView.alpha = 0.9;
textView.font = [UIFont systemFontOfSize:15];
imageView.userInteractionEnabled = YES;
imageButton = [[UIButton alloc]init];
[imageButton setFrame:CGRectMake(0, 0, 100, 100)];
[imageButton addTarget:self action:@selector(showPopover:) forControlEvents:UIControlEventTouchUpInside];
[imageView addSubview:imageButton];
[imageButton release];
[imageView release];
[textView release];
if(mrowno==0)
{
     imageView.image=[UIImage imageNamed:@"Dosa.jpg"];  
    textView.text = @"\n\n\n\n\n\n\n\nDOSA\nDosa, a common breakfast dish and street food, is rich in carbohydrates, and contains no sugar or saturated fats. ";

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:23:55.690

试试这个，

popViewController.h

```
@protocol popViewControllerDelegate
@end
@interface PopViewController : UIViewController
{
  id <popViewControllerDelegate> delegate;
}
@property (nonatomic,retain) id <popViewControllerDelegate> delegate;
@end 
```

popViewController.m

```
 @synthesize delegate; 
```

# 视图控制器.h

```
 popViewController.h
 @interface viewController : UIViewController<popViewControllerDelegate>
 {

 } 
```

# 视图控制器.m

```
- (IBAction)showPopover:(UIButton *)sender
{
 UIButton *btn = (UIButton *)sender;
if(![popoverController isPopoverVisible]){

myPopOver = [[PopViewController alloc] initWithNibName:@"PopViewController" bundle:nil];
myPopOver.delegate=self;
popoverController = [[[UIPopoverController alloc] initWithContentViewController:myPopOver] retain];

[popoverController setPopoverContentSize:CGSizeMake(299.0f,111.0f)];
[popoverController presentPopoverFromRect:btn.frame inView:self.view permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
}} 
```

# include - 交付包括另一个规则文件？

> ID：15198999
> 
> 赞同：1
> 
> 时间：2013-03-04T10:08:14.423
> 
> 标签：include, plone, deliverance

我们目前有一个带有许多子域设置的网络服务器，这些子域分别以`<match>`声明为主题。

例如：1.abc.com、2.abc.com 等。

该`deliverance.xml`文件（规则文件）具有以下规则：

```
<match domain="1.abc.com" class="1" />
<match domain="2.abc.com" class="2" />
<rules class="1">
  <!-- some rules for 1.abc.com -->
</rules>
<rules class="2">
  <!-- rules for 2.abc.com -->
</rules> 
```

由于这些子域的性质，每个子域之间在视觉上几乎没有区别（徽标可能会改变，或者页脚的颜色等 - 没什么大不了的）

因此，我必须为 1.abc.com 包含与 2.abc.com 相同的规则（例如替换样式、插入内容等）。

结果，我的规则文件迅速变得庞大，包含重复的规则，虽然它有效，但它相当混乱且不必要地重复。

我似乎记得在某个地方找到了一些文档，这些文档解释了我如何对 Deliverance 说“包含此规则文件”。我的意思是我可以为大部分规则编写一个规则文件，并为每个子域页脚和徽标更改编写单独的文件，如下所示（仅作为示例，我不确定实际的命令）：

[您可以在此处找到交付文档](http://pythonhosted.org/Deliverance/)，但我可以找到有关包含声明的任何内容。

```
<match domain="1.abc.com" class="1" />
<match domain="2.abc.com" class="2" />
<rules class="1">
  <include href="[PATH TO GENERIC RULES FILE]"/>
  <!-- some rules for 1.abc.com -->
</rules>
<rules class="2">
  <include href="[PATH TO GENERIC RULES FILE]"/>
  <!-- rules for 2.abc.com -->
</rules> 
```

这将使我能够拥有一个更简洁的规则文件，并且几乎没有重复。

有没有人有任何想法？我必须强调，虽然这有标签`Plone`这个问题是关于**拯救**而不是重氮！- 因为 Diazo 比Deliverance 有更多的命令。

**编辑：**

我也试过这个命令：`<xi:include href="generic-deliverance.xml" />`

所以要确认我的规则如下：

```
<match domain="1.abc.com" class="1" />
<match domain="2.abc.com" class="2" />
<rules class="1">
  <xi:include href="generic-deliverance.xml" /> 
  <!-- some rules for 1.abc.com -->
</rules>
<rules class="2">
  <xi:include href="generic-deliverance.xml" /> 
  <!-- rules for 2.abc.com -->
</rules> 
```

然而，这打破了交付，当我浏览到任何子域时，我得到：

```
Server Error
An error occurred. See the error logs for more information. 
(Turn debug on to display exception reports here) 
```

我还将此作为我的规则声明：

```
<rules xmlns:xi="http://www.w3.org/2001/XInclude" 
 xmlns="http://www.plone.org/deliverance"> 
```

然而，这也打破了拯救。

欢迎任何想法！