# StackOverflow 问答 14075000-14075999

# c# - 在 WCF REST 服务中禁用 XML 示例？

> ID：14075004
> 
> 赞同：5
> 
> 时间：2012-12-28T19:55:59.843
> 
> 标签：c#, .net, json, wcf, rest

我有一个 REST 服务，它有多个使用它的客户端，据我所知，它设置为仅在执行 POST/PUT 时接受 JSON（并且仅在所有调用中返回 JSON）。问题是在服务/帮助页面上，它同时显示了 JSON 和 XML 的示例。有没有办法删除所有额外的 XML 垃圾以免混淆用户（因为服务只接受 JSON）并且只在 /help 页面上显示 JSON 示例？这是我的 Web.config：

```
<standardEndpoints>
  <webHttpEndpoint>
    <standardEndpoint name="" helpEnabled="true" automaticFormatSelectionEnabled="false" defaultOutgoingResponseFormat="Json" />
  </webHttpEndpoint>
</standardEndpoints> 
```

我的每个 GetGets/WebInvokes 都使用 JSON 定义为格式，例如：

```
[WebInvoke(UriTemplate = "/sample", BodyStyle = WebMessageBodyStyle.Bare, Method = "POST", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)] 
```

那么，我还能做些什么来让服务知道它只是 JSON*并*删除自动生成的 XML 垃圾，这些垃圾会弄乱我的 /help 页面吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T23:01:37.067

拿走你的`Microsoft.ApplicationServer.Http.HttpConfiguration config`并删除它`XmlFormatter`（默认情况下它有一个 JSON 格式化程序和一个 XML 格式化程序）。

```
var config = new Microsoft.ApplicationServer.Http.HttpConfiguration();
config.Formatters.Remove(config.Formatters.XmlFormatter); 
```

现在您可以使用此配置创建一个`HttpServiceHostFactory`，并使用它来注册路由。

```
//RouteTable is of type System.Web.Routing.RouteCollection
RouteTable.Add(new WebApiRoute(
    "MyService",
    new HttpServiceHostFactory { Configuration = config },
    typeof(MyService))); 
```

除了“它对我有用”之外，我没有任何可靠的消息来源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T20:02:12.340

您可以通过将其添加到 web.config 来禁用帮助页面：

```
<webServices>
 <protocols>
   <remove name="Documentation" />
 </protocols>
</webServices> 
```

[资源](http://msdn.microsoft.com/en-us/library/2tyf2t8t%28v=vs.80%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T22:57:00.393

我对 MS 如何实现此功能非常不满意。它们不提供对输出的任何控制，并且所有实现细节都是私有的。接口、类等...

由于其他原因，我最终构建了自己的示例生成器，但在阅读了与此相关的所有代码后，我可以肯定地告诉你，你无法控制行为。

或者，如果您对此有强烈的感觉，您可以添加一个 IOperationBehavior 并去除 xml 示例输出。标记格式正确，您应该能够轻松解析并找到要从最终标记中删除的部分。

如果你觉得你想进一步追求这个让我知道，我可以给你更多的细节。

# c# - Win8/Metro：WebView 控件中的 URL 和文档？

> ID：14075007
> 
> 赞同：1
> 
> 时间：2012-12-28T19:56:09.323
> 
> 标签：c#, .net, windows-8, microsoft-metro, browser

我正在为我的一个应用程序创建一个 Metro 风格的版本，用 c# 编码。我需要访问一个网页，从该页面获取 url 和 html 代码，然后使用它们。

在 winforms 版本中，我使用了 WebBrowser 控件及其属性 .Url 和 .Document.ActiveElement.OuterHtml/InnerHtml。

对于 Metro 风格的应用程序，我使用 WebView 控件来访问页面，但它没有这样的属性，我无法在任何地方找到如何获取 url 和 html 代码。

有人知道该怎么做吗？提前致谢！

编辑：像这样的东西（winforms，C#）：

```
webBrowser1.DocumentCompleted+=delegate
{
    if (webBrowser1.Url.ToString ().StartsWith ("http://www.google.com/"))
    {
        string url=webBrowser1.Url.ToString ();
        string htmlCode=webBrowser1.Document.ActiveElement.InnerHtml;
    }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T21:02:02.553

我希望[这是您需要的答案](http://www.codeguru.com/csharp/.net/embedding-a-web-browser-in-a-windows-8-metro-c-application.htm)。

# youtube-api - 如何使用 YouTube V3 API 获取所有电影（不是视频）

> ID：14075009
> 
> 赞同：2
> 
> 时间：2012-12-28T19:56:10.127
> 
> 标签：youtube-api

我想列出 YouTube 上的所有电影（即通过 //youtube.com/movies 获得的电影）。我可以看到如何使用 API V2 查询那些，但这有 1000 个响应的限制。

使用 V3 api，我可以看到电影类别的 id 为 30，但我不知道如何获取该类别的所有电影。唯一的类别查询似乎搜索不同的指南类别。

关于如何获得此列表的任何线索？如果可以的话请帮忙！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T13:21:14.203

我相信您可以获取与电影相关的自动生成的频道，并使用它们的 id 来获取与该频道相关的播放列表，最后从该播放列表中获取项目（视频..），这必须是与电影相关的视频选定的频道：

检索电影频道：

要求

```
https://www.googleapis.com/youtube/v3/search?part=snippet&q=movies&type=channel&key={YOUR_API_KEY} 
```

部分回应

```
"items": [
  {
   "id": {
    "kind": "youtube#channel",
    "channelId": "UCczhp4wznQWonO7Pb8HQ2MQ"
   },
   "kind": "youtube#searchResult",
   "etag": "\"eTr3dHIt5_K9qdGtRKL-5XdpiQI/sQpwXP-0MUEZzOQx4F0yKj0eUR4\"",
   "snippet": {
    "publishedAt": "2005-12-15T03:07:36.000Z",
    "channelId": "UCczhp4wznQWonO7Pb8HQ2MQ",
    "title": "movies",
    "description": "YouTube Movies (United States).",
    "thumbnails": {
     "default": {
      "url": "http://i.ytimg.com/i/czhp4wznQWonO7Pb8HQ2MQ/1.jpg"
     },
     "medium": {
      "url": "http://i.ytimg.com/i/czhp4wznQWonO7Pb8HQ2MQ/mq1.jpg"
     },
     "high": {
      "url": "http://i.ytimg.com/i/czhp4wznQWonO7Pb8HQ2MQ/hq1.jpg"
     }
    }
   }
  }, 
```

例如获取频道“YouTube 电影（美国）”中的电影列表

要求

```
https://www.googleapis.com/youtube/v3/playlists?part=snippet&channelId=UCczhp4wznQWonO7Pb8HQ2MQ&key={YOUR_API_KEY} 
```

部分回应：

```
{

   "id": "PLjygWhZE6KY0Uhw12FsAc8raAClz0l71C",
   "kind": "youtube#playlist",
   "etag": "\"eTr3dHIt5_K9qdGtRKL-5XdpiQI/TWrkoCkmJvq14neCcutnApHMMgU\"",
   "snippet": {
    "publishedAt": "2012-12-06T20:11:40.000Z",
    "channelId": "UCczhp4wznQWonO7Pb8HQ2MQ",
    "title": "The Nicolas Cage Collection",
    "description": "From panicked fathers to spirits of vengeance, Nicolas Cage has done it all.",
    "thumbnails": {
     "default": {
      "url": "https://i.ytimg.com/vi/nHiy8SVZdpU/default.jpg"
     },
     "medium": {
      "url": "https://i.ytimg.com/vi/nHiy8SVZdpU/mqdefault.jpg"
     },
     "high": {
      "url": "https://i.ytimg.com/vi/nHiy8SVZdpU/hqdefault.jpg"
     }
    }
   }
  }, 
```

从此播放列表中获取项目：

要求：

```
https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&playlistId=PLjygWhZE6KY0Uhw12FsAc8raAClz0l71C&key={YOUR_API_KEY} 
```

部分回应：

```
{
 "kind": "youtube#playlistItemListResponse",
 "etag": "\"eTr3dHIt5_K9qdGtRKL-5XdpiQI/KSlqEnNGq36l47_k9W3fd79KfYQ\"",
 "pageInfo": {
  "totalResults": 15,
  "resultsPerPage": 5
 },
 "nextPageToken": "CAUQAA",
 "items": [
  {

   "id": "PLcBtbpFAOApiV34TU797yEFAUZuwhFrvJya3MqlZWkGM",
   "kind": "youtube#playlistItem",
   "etag": "\"eTr3dHIt5_K9qdGtRKL-5XdpiQI/C_xTa48Xof7giXobSula2vWX43A\"",
   "snippet": {
    "publishedAt": "2012-12-06T20:12:49.000Z",
    "channelId": "UCczhp4wznQWonO7Pb8HQ2MQ",
    "title": "Stolen",
    "thumbnails": {
     "default": {
      "url": "https://i.ytimg.com/vi/nHiy8SVZdpU/default.jpg"
     },
     "medium": {
      "url": "https://i.ytimg.com/vi/nHiy8SVZdpU/mqdefault.jpg"
     },
     "high": {
      "url": "https://i.ytimg.com/vi/nHiy8SVZdpU/hqdefault.jpg"
     }
    },
    "playlistId": "PLjygWhZE6KY0Uhw12FsAc8raAClz0l71C",
    "position": 0,
    "resourceId": {
     "kind": "youtube#video",
     "videoId": "nHiy8SVZdpU"
    }
   }
  },
  {

   "id": "PLcBtbpFAOApiV34TU797yED-1zeMCoMGVxtVgtX9ZdsQ",
   "kind": "youtube#playlistItem",
   "etag": "\"eTr3dHIt5_K9qdGtRKL-5XdpiQI/LgSyqtZkwJXv6-2ajW0g-FsgddQ\"",
   "snippet": {
    "publishedAt": "2012-12-06T20:19:26.000Z",
    "channelId": "UCczhp4wznQWonO7Pb8HQ2MQ",
    "title": "Trespass",
    "thumbnails": {
     "default": {
      "url": "https://i.ytimg.com/vi/J_7Zug6ouy4/default.jpg"
     },
     "medium": {
      "url": "https://i.ytimg.com/vi/J_7Zug6ouy4/mqdefault.jpg"
     },
     "high": {
      "url": "https://i.ytimg.com/vi/J_7Zug6ouy4/hqdefault.jpg"
     }
    },
    "playlistId": "PLjygWhZE6KY0Uhw12FsAc8raAClz0l71C",
    "position": 1,
    "resourceId": {
     "kind": "youtube#video",
     "videoId": "J_7Zug6ouy4"
    }
   }
  }, 
```

通过这种方式，您可以根据需要创建视频列表

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T14:47:01.840

这是我目前的答案 - 仍在努力，所以我还没有接受它

我计算出电影的 categoryId 是 30。然后我使用这个 categoryId 和查询字符串“movie”搜索了视频（只是因为我需要放一些东西）。这提供了超过 1000 个结果，即使使用 v3 api，谷歌也将查询限制为 1000 个结果。

所以我需要对我的查询进行分区。我已经能够使用publishedBefore 和publishedAfter 做到这一点。请注意，这些是上传日期，而不是发布日期。

这给了我一个电影列表。

这是一个示例查询 [https://www.googleapis.com/youtube/v3/search?nextPageToken=CDIQAA&publishedBefore=2010-02-01T00%3A00%3A00Z&maxResults=50&q=movie&videoCategoryId=30&part=id%2Csnippet&key=yourAPIKeyHere&type=video&publishedAfter=2010- 01-01T00%3A00%3A00Z](https://www.googleapis.com/youtube/v3/search?nextPageToken=CDIQAA&publishedBefore=2010-02-01T00%3A00%3A00Z&maxResults=50&q=movie&videoCategoryId=30&part=id%2Csnippet&key=yourAPIKeyHere&type=video&publishedAfter=2010-01-01T00%3A00%3A00Z)

获得电影 ID 后，我会查询各个电影 ID

[https://www.googleapis.com/youtube/v3/videos?part=snippet%2CcontentDetails&maxResults=50&id=O7cSKNevYQc%2CN84-SoboM6c%2C9K_WO3lqDSc%2CWTJP0Z-bknc%2CdF9hwjeRbGE%2CPnefvJ9T1N0%2CDuM6B4yKgTU%2C0tI8iP2f58I%2Cr4lNJEnY0FA%2COFnMrx6yEcA%2CmUZUAeqOmbg% 2CDjq0tHK-KTO％2CkY44nxk0qjg％2CcLYkUR5MY14％2CTZpcfYOOEXA％2C-0jA9DMX8Qs％2C2TQDV1m4X2s％2CBh3Tye1OQvk％2Ct5IwjMDVNz4％2CkOi88X6xeKg％2Ck53CuaAUtik％2CNaRuenqLb9g％2Cn9h-0Wgix7Q％2CQG8SiW2a_l0％2Cmk-D66Z1Ydg％2ClvmwofckpNc％2CgRQK4fTXfBM％2CPZHgLy48R3Q％2CwczeO0DVM0g％2CTpMDTG3dEYE％2C6JI8pN7BqEQ％2COv9yllk3hsY％ 2CsN09sfLPu0g％2CbfhLYJGN948％2CPiWusdK75Ys％2CeE5jh0YwTCY％2C_cIw3vr2Q18％2CSA4xg_k0aqI％2CUZdha0zTM6w％2CwUdkDSIBw94％2CAhR-LDSIOaI％2C1XMt40vJayU％2C83fPx5-aUL8％2CmJLjaKzu7PQ％2CZvj_zRGnwU0％2CtyIPMd7JXOA％2CToE10sC36KQ％2COVKXjOW6cD8％2CLPW1cXVjMrg＆键= LALALA](https://www.googleapis.com/youtube/v3/videos?part=snippet%2CcontentDetails&maxResults=50&id=O7cSKNevYQc%2CN84-SoboM6c%2C9K_WO3lqDSc%2CWTJP0Z-bknc%2CdF9hwjeRbGE%2CPnefvJ9T1N0%2CDuM6B4yKgTU%2C0tI8iP2f58I%2Cr4lNJEnY0FA%2COFnMrx6yEcA%2CmUZUAeqOmbg%2CDjq0tHK-KTo%2CkY44nxk0qjg%2CcLYkUR5MY14%2CTZpcfYOOEXA%2C-0jA9DMX8Qs%2C2TQDV1m4X2s%2CBh3Tye1OQvk%2Ct5IwjMDVNz4%2CkOi88X6xeKg%2Ck53CuaAUtik%2CNaRuenqLb9g%2Cn9h-0Wgix7Q%2CQG8SiW2a_l0%2Cmk-D66Z1Ydg%2ClvmwofckpNc%2CgRQK4fTXfBM%2CPZHgLy48R3Q%2CwczeO0DVM0g%2CTpMDTG3dEYE%2C6JI8pN7BqEQ%2COv9yllk3hsY%2CsN09sfLPu0g%2CbfhLYJGN948%2CPiWusdK75Ys%2CeE5jh0YwTCY%2C_cIw3vr2Q18%2CSA4xg_k0aqI%2CUZdha0zTM6w%2CwUdkDSIBw94%2CAhR-LDSIOaI%2C1XMt40vJayU%2C83fPx5-aUL8%2CmJLjaKzu7PQ%2CZvj_zRGnwU0%2CtyIPMd7JXOA%2CToE10sC36KQ%2COVKXjOW6cD8%2CLPW1cXVjMrg&key=LALALA)

然后我仍然需要通过查看结果中的以下 json 来过滤结果

```
 "contentDetails": {
    "duration": "PT1H35M14S",
    "regionRestriction": {
     "allowed": [
      "US"
     ]
    } 
```

不幸的是，这仍然没有给我电影年份或导演（这对于确定这实际上是哪部电影很有用）或价格（你知道，人们觉得有趣）

# javascript - jQuery函数用逗号和小数格式化数字

> ID：14075014
> 
> 赞同：15
> 
> 时间：2012-12-28T19:56:41.150
> 
> 标签：javascript, jquery, regex

我正在使用以下函数在用户键入时格式化数字。它将每 3 个数字插入一个逗号。例如：`45696.36`变成`45,696.36`。

但是，我遇到了一个问题。如果小数点后的数字超过 3 位，则开始添加逗号。例如：`1136.6696`变成`1,136.6,696`。

这是我的功能：

```
$.fn.digits = function(){
  return this.each(function() {
    $(this).val( $(this).val().replace(/[^0-9.-]/g, '') );
    $(this).val( $(this).val().replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,") ); 
  }) 
} 
```

我该如何解决这个问题，使其停止在小数点后放置逗号？我正在使用 jQuery 1.8。谢谢！

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-12-28T19:58:18.670

您可以通过在 ' `.`' 字符处拆分字符串然后仅在第一部分执行逗号转换来完成此操作，如下所示：

```
function ReplaceNumberWithCommas(yourNumber) {
    //Seperates the components of the number
    var n= yourNumber.toString().split(".");
    //Comma-fies the first part
    n[0] = n[0].replace(/\B(?=(\d{3})+(?!\d))/g, ",");
    //Combines the two sections
    return n.join(".");
}

ReplaceNumberWithCommas(1136.6696); //yields 1,136.6696 
```

**[例子](http://jsfiddle.net/A4wxX/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-30T21:26:10.653

我使用[accounting.js](https://github.com/openexchangerates/accounting.js) lib：

```
accounting.format(1136.6696, 4) // 1,136.6696 
```

# php - 在 php 中打印自定义数组

> ID：14075017
> 
> 赞同：-1
> 
> 时间：2012-12-28T19:56:53.317
> 
> 标签：php, arrays, for-loop, range, if-statement

如何让这段代码工作？代码组织 array2 在 array2 中打印前 2 个结果，然后在下面打印数组的其余部分。“有些行来自python”。

```
$array2 = array(101040=>"one",101060=>"two",102040=>"three",102020=>"four"); 
$array1 = new ArrayObject();
$array1->append("101040");
$array1->append("101060");
$array1->append("102020");
      if (strlen($array1)==0)
       {
          print "Array is empty.";
       }
else if(strlen($array1)>2)
    {
    $array1->asort();
    print ($array2[$array1[0]]);
    print ($array2[$array1[1]]);
    for a in range(int(strlen($array1))-2);
    print ($array2[$array1[a+2]]);
   }
 else
       {
        $array1->asort();
        for a in range(strlen($array1)):
        print($array2[$array1[a]]);
       } 
```

我希望这可以在 php 中使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T20:03:40.307

这个怎么样？

```
<?php
    $array1 = array("101040", "101060", "102020");
    $array2 = array(101040 => "one", 101060 => "two", 102040 => "three", 102020 => "four"); 
    if (count($array1) == 0) {
      print "Array is empty.";
    } else if(count($array1) > 2) {
        asort($array1);
        print ($array2[$array1[0]]);
        print ($array2[$array1[1]]);
        for( $i = 0, $max = count($array1)-2; $i < $max; $i++) {
            print ($array2[$array1[$i+2]]);
        }
    } else {
        asort($array1);
        for( $i = 0, $max = count($array1); $i < $max; $i++) {
            print ($array2[$array1[$i]]);
        }
    }
?> 
```

输出`onetwofour`。[在 codepad.org 上查看测试运行](http://codepad.org/T4UMPFY7)。

# c++ - C++ 动态转换

> ID：14075020
> 
> 赞同：2
> 
> 时间：2012-12-28T19:57:21.063
> 
> 标签：c++

> **可能重复：**
> [常规演员表与 static_cast 与 dynamic_cast](https://stackoverflow.com/questions/28002/regular-cast-vs-static-cast-vs-dynamic-cast)

当我确定类型时使用 static_cast 有什么害处吗？如果它有虚拟功能有什么问题吗？

```
class Base {
public:
    virtual void foo();
};

class Derived1 {
public:
    virtual void foo();
    void bar();
};

Base* b1 = new Derived1();
Derived1* d1 = static_cast<Derived1*>b1;
d1->bar(); 
```

# fluent-nhibernate - 使用 Fluent NHibernate 映射一对多关系在通过单端浏览时不包含任何子节点

> ID：14075021
> 
> 赞同：0
> 
> 时间：2012-12-28T19:57:33.157
> 
> 标签：fluent-nhibernate, one-to-many, hibernate-mapping, bidirectional

我创建了以下域类：

```
public class Car
{
    public virtual int Id { get; set; }
    public virtual string Registration { get; set; }
    public virtual User ResponsibleContact { get; set; }

    protected Car()
    {}

    public Fahrzeug(User responsibleContact, string registration)
    {
        ResponsibleContact = responsibleContact;
        Registration = registration;

        ResponsibleContact.Cars.Add(this);
    }
}

public class User
{
    public virtual int Id { get; set; }
    public virtual byte[] EncryptedUsername { get; set; }
    public virtual byte[] EncryptedPassword { get; set; }

    public virtual IList<Car> Cars { get; private set; }

    public virtual string Username
    {
        get
        {
            var decrypter = UnityContainerProvider.GetInstance().UnityContainer.Resolve<IRijndaelCrypting>();
            return decrypter.DecryptString(EncryptedUsername);
        }
    }

    protected User()
    { }

    public User(byte[] encryptedUser, byte[] encryptedPassword)
    {
        Cars = new List<Car>();
        EncryptedUsername = encryptedUser;
        EncryptedPassword = encryptedPassword;
    }
} 
```

和映射类：

```
public class CarMap : ClassMap<Car>
{
    public CarMap()
    {
        Id(c => c.Id).GeneratedBy.Native();
        Map(c => c.Registration);

        References(c => c.ResponsibleContact).Not.Nullable();
    }
}

public class UserMap : ClassMap<User>
{
    public UserMap()
    {
        Id(st => st.Id).GeneratedBy.Native();
        Map(st => st.EncryptedUsername).Column("Username");
        Map(st => st.EncryptedPassword).Column("Password");
        HasMany(st => st.Cars).Inverse().AsBag();
    }
} 
```

如果我查询一些成员对象，我会得到成员，但汽车集合是空的！如果我查询一些汽车，我会得到所有具有正确会员的汽车。但是在会员内部，汽车收藏也是空的！

有没有人知道会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T09:27:20.353

您必须确保集合的外键列和引用相同，否则会出现不匹配。

```
References(c => c.ResponsibleContact, "ResponsibleContact_id").Not.Nullable(); 
```

和

```
HasMany(st => st.Cars).Inverse().KeyColumn("ResponsibleContact_id"); 
```

# android - 活动与视图。vs. SurfaceView 和交互

> ID：14075022
> 
> 赞同：1
> 
> 时间：2012-12-28T19:57:35.183
> 
> 标签：android, view, android-activity, surfaceview, ontouchlistener

我正在尝试制作一个相当简单的 Android 游戏。我正在制作自定义视图：我没有使用任何按钮，而是在屏幕上绘制代表按钮的像素。这个想法是我有3个屏幕：

*   A 主屏幕
*   播放画面
*   说明屏幕

主菜单有两个“位置”可供单击：一个显示“播放”（通过绘制的像素），另一个显示“说明”。

我对如何实施这些感到困惑。现在，我有一个将内容视图设置为主屏幕（扩展视图）的主活动，但我对如何从主屏幕（视图）转到播放或说明屏幕感到困惑。我已经阅读了 View、Activities 和 SurfaceView，但没有任何理解。

有没有人有任何示例（具有适当的编程实践）来使视图交互并显示另一个视图（可能是创建视图的活动？）谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T20:34:27.223

您需要的是一些基本的 Android 游戏开发教程。首先，[这个简短](http://mobile-development.org/index.php/android/introduction-to-android-game-development-part-1)的教程安排得很好，涵盖了一个主屏幕，它通向一个游戏屏幕。它肯定会帮助您入门。我个人也喜欢视频教程，所以我推荐[这一系列教程](http://www.edu4java.com/androidgame.html)，也适合初学者。最后[这个页面](http://www.javacodegeeks.com/2011/06/android-game-development-tutorials.html)展示了很多安卓游戏教程。这是我个人最喜欢的初学者游戏教程，但你会在网上找到很多东西。玩得开心！

# c# - 带有 Unicode 字符的主机名在 Windows 8 中有效

> ID：14075023
> 
> 赞同：3
> 
> 时间：2012-12-28T19:57:37.583
> 
> 标签：c#, .net-3.5, windows-8

`Uri.CheckHostName("контосо.ком")`到处返回`UriHostNameType.Unknown`，但在 Windows 8 上，它返回`UriHostNameType.Dns`. 任何想法为什么突然之间带有 Unicode/西里尔字符的主机名在 Windows 8 中有效？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T20:04:35.663

因为这。*国际化域名*

[http://en.wikipedia.org/wiki/Internationalized_domain_name](http://en.wikipedia.org/wiki/Internationalized_domain_name)

[https://www.rfc-editor.org/rfc/rfc5895](https://www.rfc-editor.org/rfc/rfc5895)

# c# - HttpClient爬取导致内存泄漏

> ID：14075026
> 
> 赞同：22
> 
> 时间：2012-12-28T19:57:56.397
> 
> 标签：c#, memory-leaks, asp.net-web-api, dotnet-httpclient

我正在研究 WebCrawler[实现](https://github.com/aliostad/CyberInsekt)，但在 ASP.NET Web API 的 HttpClient 中遇到了奇怪的内存泄漏。

所以精简版在这里：

* * *

# [更新 2]

我发现了问题，不是 HttpClient 泄漏了。看我的回答。

* * *

## [更新 1]

我添加了 dispose 没有效果：

```
 static void Main(string[] args)
    {
        int waiting = 0;
        const int MaxWaiting = 100;
        var httpClient = new HttpClient();
        foreach (var link in File.ReadAllLines("links.txt"))
        {

            while (waiting>=MaxWaiting)
            {
                Thread.Sleep(1000);
                Console.WriteLine("Waiting ...");
            }
            httpClient.GetAsync(link)
                .ContinueWith(t =>
                                  {
                                      try
                                      {
                                          var httpResponseMessage = t.Result;
                                          if (httpResponseMessage.IsSuccessStatusCode)
                                              httpResponseMessage.Content.LoadIntoBufferAsync()
                                                  .ContinueWith(t2=>
                                                                    {
                                                                        if(t2.IsFaulted)
                                                                        {
                                                                            httpResponseMessage.Dispose();
                                                                            Console.ForegroundColor = ConsoleColor.Magenta;
                                                                            Console.WriteLine(t2.Exception);
                                                                        }
                                                                        else
                                                                        {
                                                                            httpResponseMessage.Content.
                                                                                ReadAsStringAsync()
                                                                                .ContinueWith(t3 =>
                                                                                {
                                                                                    Interlocked.Decrement(ref waiting);

                                                                                    try
                                                                                    {
                                                                                        Console.ForegroundColor = ConsoleColor.White;

                                                                                        Console.WriteLine(httpResponseMessage.RequestMessage.RequestUri);
                                                                                        string s =
                                                                                            t3.Result;

                                                                                    }
                                                                                    catch (Exception ex3)
                                                                                    {
                                                                                        Console.ForegroundColor = ConsoleColor.Yellow;

                                                                                        Console.WriteLine(ex3);
                                                                                    }
                                                                                    httpResponseMessage.Dispose();
                                                                                });                                                                                
                                                                        }
                                                                    }
                                                  );
                                      }
                                      catch(Exception e)
                                      {
                                          Interlocked.Decrement(ref waiting);
                                          Console.ForegroundColor = ConsoleColor.Red;                                             
                                          Console.WriteLine(e);
                                      }
                                  }
                );

            Interlocked.Increment(ref waiting);

        }

        Console.Read();
    } 
```

包含链接的文件可[在此处](https://docs.google.com/open?id=0By4PF7Jis9FzYmhWWkJMSEhpVTA)获得。

这导致内存不断上升。内存分析显示 AsyncCallback 可能持有许多字节。我之前做过很多内存泄漏分析，但这一次似乎是在 HttpClient 级别。

![进程的内存配置文件显示异步回调可能持有的缓冲区](../Images/b3f56a7f14755c7bd537e4424aea8115.png)

我使用的是 C# 4.0，所以这里没有 async/await，所以只使用了 TPL 4.0。

上面的代码有效，但没有优化，有时会发脾气，但足以重现效果。关键是我找不到任何可能导致内存泄漏的点。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-31T13:31:00.057

好的，我明白了这一点。感谢@Tugberk、@Darrel 和@youssef 在这方面花时间。

基本上最初的问题是我产生了太多的任务。这开始造成损失，所以我不得不减少这一点，并有一些状态来确保并发任务的数量是有限的。**这对于编写必须使用 TPL 来安排任务的进程来说基本上是一个巨大的挑战。我们可以控制线程池中的线程，但我们还需要控制我们正在创建的任务，因此没有任何级别`async/await`可以帮助做到这一点。**

我设法用这段代码只重现了几次泄漏 - 其他时候在增长后它会突然下降。我知道在 4.5 中对 GC 进行了改进，所以这里的问题可能是 GC 没有发挥足够的作用，尽管我一直在查看 GC 第 0、1 和 2 代集合的性能计数器。

# 所以这里的要点是重用`HttpClient`不会导致内存泄漏。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-29T23:41:27.590

我不擅长定义内存问题，但我尝试使用以下代码。它在 .NET 4.5 中，也使用 C# 的 async/await 特性。它似乎将整个过程的内存使用量保持在 10 - 15 MB 左右（但不确定您是否看到了更好的内存使用量）。但是，如果您观看**# Gen 0 Collections**、**# Gen 1 Collections**和**# Gen 2 Collections**性能计数器，它们在下面的代码中相当高。

如果您删除`GC.Collect`下面的调用，则整个过程会在 30MB 到 50MB 之间来回切换。有趣的是，当我在我的 4 核机器上运行您的代码时，我也没有看到进程内存使用异常。我在我的机器上安装了 .NET 4.5，如果没有，问题可能与 .NET 4.0 的 CLR 内部有关，我确信 TPL 基于资源使用情况在 .NET 4.5 上有很大改进。

```
class Program {

    static void Main(string[] args) {

        ServicePointManager.DefaultConnectionLimit = 500;
        CrawlAsync().ContinueWith(task => Console.WriteLine("***DONE!"));
        Console.ReadLine();
    }

    private static async Task CrawlAsync() {

        int numberOfCores = Environment.ProcessorCount;
        List<string> requestUris = File.ReadAllLines(@"C:\Users\Tugberk\Downloads\links.txt").ToList();
        ConcurrentDictionary<int, Tuple<Task, HttpRequestMessage>> tasks = new ConcurrentDictionary<int, Tuple<Task, HttpRequestMessage>>();
        List<HttpRequestMessage> requestsToDispose = new List<HttpRequestMessage>();

        var httpClient = new HttpClient();

        for (int i = 0; i < numberOfCores; i++) {

            string requestUri = requestUris.First();
            var requestMessage = new HttpRequestMessage(HttpMethod.Get, requestUri);
            Task task = MakeCall(httpClient, requestMessage);
            tasks.AddOrUpdate(task.Id, Tuple.Create(task, requestMessage), (index, t) => t);
            requestUris.RemoveAt(0);
        }

        while (tasks.Values.Count > 0) {

            Task task = await Task.WhenAny(tasks.Values.Select(x => x.Item1));

            Tuple<Task, HttpRequestMessage> removedTask;
            tasks.TryRemove(task.Id, out removedTask);
            removedTask.Item1.Dispose();
            removedTask.Item2.Dispose();

            if (requestUris.Count > 0) {

                var requestUri = requestUris.First();
                var requestMessage = new HttpRequestMessage(HttpMethod.Get, requestUri);
                Task newTask = MakeCall(httpClient, requestMessage);
                tasks.AddOrUpdate(newTask.Id, Tuple.Create(newTask, requestMessage), (index, t) => t);
                requestUris.RemoveAt(0);
            }

            GC.Collect(0);
            GC.Collect(1);
            GC.Collect(2);
        }

        httpClient.Dispose();
    }

    private static async Task MakeCall(HttpClient httpClient, HttpRequestMessage requestMessage) {

        Console.WriteLine("**Starting new request for {0}!", requestMessage.RequestUri);
        var response = await httpClient.SendAsync(requestMessage).ConfigureAwait(false);
        Console.WriteLine("**Request is completed for {0}! Status Code: {1}", requestMessage.RequestUri, response.StatusCode);

        using (response) {
            if (response.IsSuccessStatusCode){
                using (response.Content) {

                    Console.WriteLine("**Getting the HTML for {0}!", requestMessage.RequestUri);
                    string html = await response.Content.ReadAsStringAsync().ConfigureAwait(false);
                    Console.WriteLine("**Got the HTML for {0}! Legth: {1}", requestMessage.RequestUri, html.Length);
                }
            }
            else if (response.Content != null) {

                response.Content.Dispose();
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-09T11:27:25.880

最近在我们的 QA 环境中报告的“内存泄漏”告诉我们：

## 考虑 TCP 堆栈

不要假设 TCP 堆栈可以在“认为适合应用程序”的时间内完成所要求的事情。当然，我们可以随意分拆任务，我们只是喜欢 asych，但是....

## 观察 TCP 堆栈

当您认为您有内存泄漏时运行 NETSTAT。如果您看到剩余会话或半生不熟的状态，您可能需要按照 HTTPClient 重用和限制并发工作量的方式重新考虑您的设计。您可能还需要考虑在多台机器上使用负载平衡。

NETSTAT 中出现半生不熟的会话，带有 Fin-Waits 1 或 2 以及 Time-Waits 甚至 RST-WAIT 1 和 2。即使是“已建立”的会话也可能在等待超时触发时几乎失效。

## Stack 和 .NET 很可能没有损坏

堆栈过载会使机器进入睡眠状态。恢复需要时间，而且 99% 的时间堆栈都会恢复。还要记住，.NET 不会提前释放资源，并且没有用户可以完全控制 GC。

如果您杀死该应用程序并且 NETSTAT 需要 5 分钟才能稳定下来，这是系统不堪重负的一个很好的迹象。这也是堆栈如何独立于应用程序的一个很好的展示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-29T14:55:13.120

`HttpClient`当您将其用作短期对象并为每个请求创建新的 HttpClients 时，默认值会泄漏。

[这](https://stackoverflow.com/a/27830926/1123355)是这种行为的再现。

作为一种解决方法，我可以通过使用以下 Nuget 包而不是内置程序集来继续使用 HttpClient 作为短期对象`System.Net.Http`： [https ://www.nuget.org/packages/HttpClient](https://www.nuget.org/packages/HttpClient)

但是，不确定这个包的来源是什么，一旦我引用它，内存泄漏就消失了。确保删除对内置 .NET`System.Net.Http`库的引用并改用 Nuget 包。

# objective-c - CALayer：线性梯度问题

> ID：14075027
> 
> 赞同：2
> 
> 时间：2012-12-28T19:57:56.733
> 
> 标签：objective-c, ios, calayer, linear-gradients

我在我的一个 CALayers 上用一些颜色绘制线性渐变，但是随机地，使用相同的输入，颜色在屏幕上绘制为粉红色。

代码如下：

```
bottomComponents = bottomColor.colorComponents;
topComponents = topColor.colorComponents;
middleComponents = middleColor.colorComponents;

CGContextRef currentContext = UIGraphicsGetCurrentContext();

CGGradientRef glossGradient;
CGColorSpaceRef rgbColorspace;

size_t numberOfLocations = 3;
CGFloat locations[3] = {0.0f, MIDDLE_POINT, 1.0f};
CGFloat components[12] =
{
    topComponents.red, topComponents.green, topComponents.blue, topComponents.alpha,
    middleComponents.red, middleComponents.green, middleComponents.blue, middleComponents.alpha,
    bottomComponents.red, bottomComponents.green, bottomComponents.blue, bottomComponents.alpha
};

rgbColorspace = CGColorSpaceCreateDeviceRGB();
glossGradient = CGGradientCreateWithColorComponents(rgbColorspace, components, locations, numberOfLocations);

CGRect currentBounds = self.bounds;
CGPoint topCenter = CGPointMake(CGRectGetMidX(currentBounds), 0.0f);
CGPoint bottomCenter = CGPointMake(CGRectGetMidX(currentBounds), CGRectGetHeight(currentBounds));
CGContextDrawLinearGradient(currentContext, glossGradient, topCenter, bottomCenter, 0);

CGGradientRelease(glossGradient);
CGColorSpaceRelease(rgbColorspace); 
```

哪里`colorComponents`只是返回一个带有颜色组件的结构。

当我在日志中输出颜色时，它是正确的颜色，但是当它出现在屏幕上时，无论起始颜色如何，它都是粉红色。

有什么我做错了可能导致随机粉红色出现的地方吗？

粉红色完全零星地出现。我将从完全相同的值加载，并且很少，但肯定会显示为粉红色。从不同的值加载会产生相同的结果。它发生在大约 1-2% 的时间里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T20:46:12.283

有没有机会使用 UIColor 预定义的颜色？（例如greenColor）我发现那些不会生成正确的组件。

利维乌

# c# - 有一组任务，一次只运行 X

> ID：14075029
> 
> 赞同：33
> 
> 时间：2012-12-28T19:58:03.210
> 
> 标签：c#, multithreading, task

假设我有 100 个任务需要 10 秒。现在我想一次只运行 10 个，比如当这 10 个任务中的 1 个完成时，另一个任务被执行，直到所有任务都完成。

现在我总是使用`ThreadPool.QueueUserWorkItem()`这样的任务，但我已经读到这样做是不好的做法，我应该使用任务来代替。

我的问题是我在任何地方都没有找到适合我的场景的好例子，所以你能让我开始了解如何使用 Tasks 实现这个目标吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-12-28T20:20:09.283

```
SemaphoreSlim maxThread = new SemaphoreSlim(10);

for (int i = 0; i < 115; i++)
{
    maxThread.Wait();
    Task.Factory.StartNew(() =>
        {
            //Your Works
        }
        , TaskCreationOptions.LongRunning)
    .ContinueWith( (task) => maxThread.Release() );
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-12-28T21:57:39.087

[TPL Dataflow](https://www.nuget.org/packages/System.Threading.Tasks.Dataflow/)非常适合做这样的事情。`Parallel.Invoke`你可以很容易地创建一个 100% 的异步版本：

```
async Task ProcessTenAtOnce<T>(IEnumerable<T> items, Func<T, Task> func)
{
    ExecutionDataflowBlockOptions edfbo = new ExecutionDataflowBlockOptions
    {
         MaxDegreeOfParallelism = 10
    };

    ActionBlock<T> ab = new ActionBlock<T>(func, edfbo);

    foreach (T item in items)
    {
         await ab.SendAsync(item);
    }

    ab.Complete();
    await ab.Completion;
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-12-28T20:04:08.423

你有几个选择。您可以`Parallel.Invoke`用于初学者：

```
public void DoWork(IEnumerable<Action> actions)
{
    Parallel.Invoke(new ParallelOptions() { MaxDegreeOfParallelism = 10 }
        , actions.ToArray());
} 
```

这是一个替代选项，它将更加努力地运行恰好 10 个任务（尽管线程池中处理这些任务的线程数可能不同），并且返回一个`Task`指示何时完成，而不是阻塞直到完成。

```
public Task DoWork(IList<Action> actions)
{
    List<Task> tasks = new List<Task>();
    int numWorkers = 10;
    int batchSize = (int)Math.Ceiling(actions.Count / (double)numWorkers);
    foreach (var batch in actions.Batch(actions.Count / 10))
    {
        tasks.Add(Task.Factory.StartNew(() =>
        {
            foreach (var action in batch)
            {
                action();
            }
        }));
    }

    return Task.WhenAll(tasks);
} 
```

如果您没有 MoreLinq，对于该`Batch`功能，这是我更简单的实现：

```
public static IEnumerable<IEnumerable<T>> Batch<T>(this IEnumerable<T> source, int batchSize)
{
    List<T> buffer = new List<T>(batchSize);

    foreach (T item in source)
    {
        buffer.Add(item);

        if (buffer.Count >= batchSize)
        {
            yield return buffer;
            buffer = new List<T>();
        }
    }
    if (buffer.Count >= 0)
    {
        yield return buffer;
    }
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-09-01T09:15:27.403

I would love to use the simplest solution I can think of which as I think using the TPL:

```
string[] urls={};
Parallel.ForEach(urls, new ParallelOptions() { MaxDegreeOfParallelism = 2}, url =>
{
   //Download the content or do whatever you want with each URL
}); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-04-25T13:58:22.470

您可以创建这样的方法：

```
public static async Task RunLimitedNumberAtATime<T>(int numberOfTasksConcurrent, 
    IEnumerable<T> inputList, Func<T, Task> asyncFunc)
{
    Queue<T> inputQueue = new Queue<T>(inputList);
    List<Task> runningTasks = new List<Task>(numberOfTasksConcurrent);
    for (int i = 0; i < numberOfTasksConcurrent && inputQueue.Count > 0; i++)
        runningTasks.Add(asyncFunc(inputQueue.Dequeue()));

    while (inputQueue.Count > 0)
    {
        Task task = await Task.WhenAny(runningTasks);
        runningTasks.Remove(task);
        runningTasks.Add(asyncFunc(inputQueue.Dequeue()));
    }

    await Task.WhenAll(runningTasks);
} 
```

然后你可以调用任何异步方法 n 次，限制如下：

```
Task task = RunLimitedNumberAtATime(10,
    Enumerable.Range(1, 100),
    async x =>
    {
        Console.WriteLine($"Starting task {x}");
        await Task.Delay(100);
        Console.WriteLine($"Finishing task {x}");
    }); 
```

或者如果你想运行长时间运行的非异步方法，你可以这样做：

```
Task task = RunLimitedNumberAtATime(10,
    Enumerable.Range(1, 100),
    x => Task.Factory.StartNew(() => {
        Console.WriteLine($"Starting task {x}");
        System.Threading.Thread.Sleep(100);
        Console.WriteLine($"Finishing task {x}");
    }, TaskCreationOptions.LongRunning)); 
```

也许在框架的某个地方有类似的方法，但我还没有找到。

# iphone - 更改 UITableView 中标签的字体

> ID：14075032
> 
> 赞同：0
> 
> 时间：2012-12-28T19:58:11.063
> 
> 标签：iphone, uitableview, uifont

我目前正在通过情节提要编写一个数据库应用程序，而我现在正处于让它看起来很漂亮的阶段。我已`Gotham.ttf`使用 Info.plist 将字体 , 添加到应用程序中。是的，我确实将字体文件复制到了项目中。

![信息列表](../Images/677618f1194b0385fc9193a0e5fcfdf9.png)

在我的`ViewController.m`我有以下代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    // Cell Configuration
    NSManagedObject *device = [self.devices objectAtIndex:indexPath.row];
    [cell.textLabel setText:[NSString stringWithFormat:@"%@ %@", [device valueForKey:@"name"], [device valueForKey:@"version"]]];
    [cell.detailTextLabel setText:[device valueForKey:@"company"]];
    cell.textLabel.font = [UIFont fontWithName:@"Gotham" size:20];

    return cell;
} 
```

在代码中一切正常。我知道这一点，因为如果我将 Gotham 更改为“Arial”或“Tahoma”，当我启动应用程序时，字体会很好。但是当我尝试将标签的字体更改为“Gotham”时，它只是恢复为用于单元格的默认字体。我肯定是错误地实现了字体，我只是不确定我哪里出错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T20:01:20.607

请在此处查看详细信息：

[我可以在 iPhone 应用程序中嵌入自定义字体吗？](https://stackoverflow.com/questions/360751/can-i-embed-a-custom-font-in-an-iphone-application/2616101#2616101)

您是否彻底遵循了所有步骤？

另外，你真的有文件扩展名`tff`吗？它应该`ttf`用于“真正的字体”。

# javascript - __proto__ 和 instanceof

> ID：14075039
> 
> 赞同：3
> 
> 时间：2012-12-28T19:58:40.973
> 
> 标签：javascript, prototype, instanceof

我在理解`Result`以下代码中的错误原因时遇到了一些麻烦。

库中需要具有大小的其他对象将检查大小参数是否是`InterfaceKit.Core.Size`. 目前，`instanceof`正在返回假。

```
var InterfaceKit = {
    Core : {
        Size: function( i_Width, i_Height ){
            Object.defineProperties(this, {
                m_Width : {
                    value: Number( i_Width ) ? Number( i_Width ) : 0
                    , writable: true
                }
                , m_Height : {
                    value: Number( i_Height ) ? Number( i_Height ) : 0
                    , writable: true
                }

            }); 

            this.__proto__ = {
                SetWidth: function( i_Width ){
                    if( Number( i_Width ) )
                        this.m_Width = Number( i_Width ); 

                }
                , GetWidth: function(){
                    return this.m_Width; 
                }
                , SetHeight: function( i_Height ){
                    if( Number( i_Height ) )
                        this.m_Height = Number( i_Height ); 

                }
                , GetHeight: function(){
                    return this.m_Height; 
                }

            };

            this.__proto__.constructor = InterfaceKit.Core.Size; 

        }

    }

}; 

var Result = (new InterfaceKit.Core.Size( 10, 10 ) instanceof InterfaceKit.Core.Size); //false 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T20:17:10.383

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/instanceof](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/instanceof)

> `instanceof`运算符测试一个对象是否在其链`prototype`中具有构造函数的原型属性。

换句话说...

```
// an objects prototype chains has this as the root
object.__proto__ // set to: {}

// the prototype property of the constructor
A.B.prototype // unmodified prototype, some object set by JS engine. Probably: {}

// Equivalent objects are not equal, because they are different objects
{} === {} // false 
```

因此构造函数的原型不在对象的原型链中。这意味着它*不是*`instanceof`构造函数，即使该构造函数确实“构造”了该对象。

* * *

但实际上，只是不要使用`__proto__`.

```
var A = {
    B: function() {}
};
A.B.prototype = {};

var Result = (new A.B() instanceof A.B); // true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T20:20:41.330

来自[ECMAScript 规范](http://www.ecma-international.org/ecma-262/5.1/)：

> **11.8.6 instanceof 运算符**
> 
> 产生式 RelationalExpression : RelationalExpression instanceof ShiftExpression 的评估如下：
> 
> 1.  令 lref 为评估 RelationalExpression 的结果。
> 2.  令 lval 为 GetValue(lref)。
> 3.  令 rref 为计算 ShiftExpression 的结果。
> 4.  设 rval 为 GetValue(rref)。
> 5.  如果 Type(rval) 不是 Object，则抛出 TypeError 异常。
> 6.  如果 rval 没有 [[HasInstance]] 内部方法，则抛出 TypeError 异常。
> 7.  *返回使用参数 lval 调用 rval 的 [[HasInstance]] 内部方法的结果。*
> 
> ...
> 
> **15.3.5.3 [[HasInstance]] (V)**
> 
> 假设 F 是一个 Function 对象。
> 
> 当 F 的 [[HasInstance]] 内部方法以值 V 被调用时，采取以下步骤：
> 
> 1.  如果 V 不是对象，则返回 false。
> 2.  令 O 为使用属性名称“prototype”调用 F 的 [[Get]] 内部方法的结果。
> 3.  如果 Type(O) 不是 Object，则抛出 TypeError 异常。
> 4.  重复
>     *   令 V 为 V 的 [[Prototype]] 内部属性的值。
>     *   如果 V 为 null，则返回 false。
>     *   *如果 O 和 V 引用同一个对象，则返回 true。*
> 
> 注意使用 Function.prototype.bind 创建的函数对象具有在 15.3.4.5.3 中定义的 [[HasInstance]] 的不同实现。

基本上，如果左操作数在其继承链中具有右操作数的原型，则`instanceof`返回：`true``l.__proto__ === r.prototype || l.__proto__.__proto__ === r.prototype || ...`

由于对象的左操作数的原型被覆盖（`__proto__`是内部`[[prototype]]`属性的专有别名）并且不是由 Javascript 分配的，`new A.B()`因此不再`A.B.prototype`像通常那样继承自 ，因此不是`instanceof` `A.B`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T13:54:33.770

我发现这是最好的解决方案：

```
var InterfaceKit {
    Core: {
        Size : function( i_Width, i_Height ){
            this.__prototype__ = Object.getPrototypeOf( this ); 

            var m_Width  = 0; 
            var m_Height = 0; 

            this.__prototype__.SetWidth  = function( i_Width ){}; 
            this.__prototype__.GetWidth  = function(){}; 
            this.__prototype__.SetHeight = function( i_Height ){}; 
            this.__prototype__.GetHeight = function(){}; 

            {
                 this.SetWidth( i_Width ); 
                 this.SetHeight( i_Height ); 
            }

        }

    }

}; 

var Result = (new InterfaceKit.Core.Size( 10, 10 ) instanceof InterfaceKit.Core.Size); // true 
```

# scala - 玩！异步动作 akka AskTimeoutException

> ID：14075041
> 
> 赞同：2
> 
> 时间：2012-12-28T19:58:54.793
> 
> 标签：scala, playframework-2.0, akka

我正在尝试使用 akka Actor 使用 ask 模式发出最简单的异步请求，但无论如何我都会收到`akka.pattern.AskTimeoutException`。我所拥有的是：

```
object Users extends Controller {

  def newUser = {
    val actor = Akka.system.actorOf(Props[UserRegistration])
    ActorAction[String](actor, "hello")(Ok(_))
  }
} 
```

其中`ActorAction`是通常的包装`Async`：

```
object ActorAction {

  def apply[A](actorRef: ActorRef, msg: AnyRef, timeout: Timeout = 5 seconds)(f: A => Result)(implicit m: Manifest[A]): Action[AnyContent] = {
    Action {
      AsyncResult {
        ask(actorRef, msg, timeout).mapTo[A].asPromise.map(f)
      }
    }
  }

} 
```

演员什么也不做，只是记录接收消息并返回它：

```
class UserRegistration extends Actor {
  val log = Logging(context.system, this)
  def receive = {
    case u => log.info("received " + u); u
  }
} 
```

消息的记录工作得很好。我已经尝试了一切，但没有任何效果。任何帮助都非常受欢迎！

播放：2.9.1 阿卡：2.0.2

堆栈跟踪：

```
[info] play - database [default] connected at jdbc:postgresql://localhost:5432/ss_dev
[info] play - Application started (Dev)
[info] play - Starting application default Akka system.
[INFO] [12/28/2012 22:10:42.51] [application-akka.actor.default-dispatcher-1] [akka://application/user/$a] received hello
[error] play - Waiting for a promise, but got an error: Timed out
akka.pattern.AskTimeoutException: Timed out
at akka.dispatch.DefaultPromise.result(Future.scala:875) [akka-actor.jar:2.0.2]
at akka.dispatch.Await$.result(Future.scala:74) ~[akka-actor.jar:2.0.2]
at play.api.libs.concurrent.AkkaPromise.await(Akka.scala:43) ~[play_2.9.1.jar:2.0.4]
at play.api.libs.concurrent.Promise$class.await(Promise.scala:55) ~[play_2.9.1.jar:2.0.4]
at play.api.libs.concurrent.AkkaPromise.await(Akka.scala:28) ~[play_2.9.1.jar:2.0.4]
at play.api.libs.concurrent.Promise$class.value(Promise.scala:53) ~[play_2.9.1.jar:2.0.4]
Caused by: akka.pattern.AskTimeoutException: Timed out
at akka.pattern.PromiseActorRef$$anonfun$1.apply$mcV$sp(AskSupport.scala:274) ~[akka-actor.jar:2.0.2]
at akka.actor.DefaultScheduler$$anon$6$$anon$7.run(Scheduler.scala:183) ~[akka-actor.jar:2.0.2]
at akka.dispatch.TaskInvocation.run(AbstractDispatcher.scala:94) [akka-actor.jar:2.0.2]
at akka.jsr166y.ForkJoinTask$AdaptedRunnableAction.exec(ForkJoinTask.java:1381) [akka-actor.jar:2.0.2]
at akka.jsr166y.ForkJoinTask.doExec(ForkJoinTask.java:259) [akka-actor.jar:2.0.2]
at akka.jsr166y.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:975) [akka-actor.jar:2.0.2] 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T20:18:35.320

您没有回复消息`sender ! u`，请阅读 Akka 参考文档：[http ://doc.akka.io](http://doc.akka.io)

# sql - Join table on itself for unique row combinations for calculations

> ID：14075043
> 
> 赞同：1
> 
> 时间：2012-12-28T19:59:16.593
> 
> 标签：sql, sql-server, join, left-join

I have a table that I need to use to build a result set from where certain rows from the table are columns in the result set. I started to chain `LEFT JOIN`s together on the table multiple times but I need to eliminate results that are a different combination of another result already in the set:

For example, if I get 1, 21, 25 as result columns, I can't have ANY other combination of those numbers in the results.

My table definition is:

```
Table tblKPIDetails
Column Month int
Column Year int
Column Division varchar(3)
Column KPI int
Column Value decimal(18,4) 
```

My current query is:

```
SELECT *
FROM tblKPIDetails J1
    LEFT JOIN tblKPIDetails J2 ON J2.Month = J1.Month AND J2.Year = J1.Year  AND J2.Division = J1.Division AND NOT(J2.KPI = J1.KPI ) AND (J2.KPI = 1 OR J2.KPI = 21 OR J2.KPI = 25)
    LEFT JOIN tblKPIDetails J3 ON J3.Month = J1.Month AND J3.Year = J1.Year  AND J3.Division = J1.Division AND NOT(J3.KPI = J1.KPI ) AND (J3.KPI = 1 OR J3.KPI = 21 OR J3.KPI = 25)
WHERE J1.KPI = 1 OR J1.KPI = 21 OR J1.KPI = 25 
```

I know this is wrong, but it's a super-set of what I need. In the results from the query above, I can get J1.KPI, J2.KPI, J3.KPI or J1.KPI, J3.KPI, J2.KPI, or any other combination.

My expected result would be:

```
Division | Month | Year | KPIA | KPIAValue | KPIB | KPIBValue | KPIC | KPICValue 
```

for each division, month, and year

where KPIA, KPIB, or KPIC = 1, 21, or 25 but only 1 combination of 1,21,25 exists per division|month|year

**EDIT**

To clarify the expected results a little more, using the above query, I'm getting the following results:

```
Division | Month | Year | KPIA | KPIAValue | KPIB | KPIBValue | KPIC | KPICValue
--------------------------------------------------------------------------------
000          1     2012     1      1000       21      2000       25     3000
000          1     2012    21      2000        1      1000       25     3000
000          1     2012    25      3000       21      2000        1     1000
111          1     2012     1      555        21      10000      25     5000 
```

I need to make it so my results would only be ANY 1 of the first 3 results and then the last one...for example:

```
Division | Month | Year | KPIA | KPIAValue | KPIB | KPIBValue | KPIC | KPICValue
--------------------------------------------------------------------------------
000          1     2012    25      3000       21      2000        1     1000
111          1     2012     1      555        21      10000      25     5000 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T20:09:09.203

I think you are looking for the `PIVOT` table operator like so:

```
SELECT 
  Devision,
  Month, 
  Year,
  [1]  AS KPIAValue,
  [21] AS KPIBValue,
  [25] AS KPICValue
FROM
(
  SELECT t1.*
  FROM tblKPIDetails t1
  INNER JOIN
  (
    SELECT Month, Year, Devision
    FROM tblKPIDetails
    WHERE KPI IN(1, 21, 25)
    GROUP BY Month, Year, Devision
    HAVING COUNT(DISTINCT KPI) = 3
  ) t2 ON t1.Month = t2.Month AND t1.Year = t2.Year 
  AND t1.Devision = t2.Devision
) t
PIVOT
(
  MAX(Value)
  FOR KPI IN([1], [21], [25])) p; 
```

## [SQL Fiddle Demo](http://sqlfiddle.com/#!3/27070/6)

This will give you the data in the form:

```
| DEVISION | MONTH | YEAR | KPIAVALUE | KPIBVALUE | KPICVALUE |
---------------------------------------------------------------
|        A |     2 | 2012 |        16 |        16 |        16 |
|        B |    10 | 2012 |        16 |        18 |        20 | 
```

**Note that:** This will give you the only combination of the `Year`, `Month`, `DEVISION` that have all the values 1, 21 and 25, and that what this query do:

```
SELECT Month, Year, Devision
FROM tblKPIDetails
WHERE KPI IN(1, 21, 25)
GROUP BY Month, Year, Devision
HAVING COUNT(DISTINCT KPI) = 3 
```

* * *

**Update:** If you are looking for those that had at least one of 1, 21 or 25, just remove the `HAVING COUNT(DISTINCT KPI) = 3`, but this will make you expect more values than these three, in this case it will ignore other values and return only those three. Also it will return `NULL` for any of the missing values of them like so:

```
SELECT 
  Devision,
  Month, 
  Year,
  [1]  AS KPIAValue,
  [21] AS KPIBValue,
  [25] AS KPICValue
FROM
(
  SELECT t1.*
  FROM tblKPIDetails t1
  INNER JOIN
  (
    SELECT Month, Year, Devision
    FROM tblKPIDetails
    WHERE KPI IN(1, 21, 25)
    GROUP BY Month, Year, Devision
  ) t2 ON t1.Month = t2.Month AND t1.Year = t2.Year 
  AND t1.Devision = t2.Devision
) t
PIVOT
(
  MAX(Value)
  FOR KPI IN([1], [21], [25])) p; 
```

## [Updated SQL Fiddle Demo](http://sqlfiddle.com/#!3/a1b58/5)

```
| DIVISION | MONTH | YEAR | KPIAVALUE | KPIBVALUE | KPICVALUE |
---------------------------------------------------------------
|        A |     2 | 2012 |      15.5 |      15.5 |      15.5 |
|        B |    10 | 2012 |      15.5 |      17.5 |     20.24 |
|        C |    12 | 2012 |      15.5 |    (null) |     20.24 | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T20:22:18.750

If you don't have a large number of "IDs", you could just transpose the values like this:

```
select 
[Month],
[Year],
Division,
sum(case when KPI = 1 then Value else null end) as KPI1,
sum(case when KPI = 21 then Value else null end) as KPI21,
sum(case when KPI = 25 then Value else null end) as KPI25
from tblKPIDetails
group by 
[Month],
[Year],
Division
order by 
[Month],
[Year],
Division 
```

Or same thing by using the "OVER" clause.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T20:22:27.977

I think you want a conditional aggregation. But it is still not clear to me how the results are being defined. This might help you on your way:

```
SELECT Division, Month, Year,
       1, max(case when kpi = 1 then value end) as kpi1value,
       21, max(case when kpi = 21 then value end) as kpi21value, 
       25, max(case when kpi = 25 then value end) as kpi25value,
FROM tblKPIDetails J1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T21:45:59.860

maybe you can try the following:

```
SELECT DISTINCT
t.Division,
t.Month, 
t.Year,
KA.Value  AS KPIAValue,
KB.Value AS KPIBValue,
KC.Value AS KPICValue
FROM
tblKPIDetails t
LEFT JOIN tblKPIDetails KA ON t.Division = KA.Division and t.Month = KA.month and  .year = KA.year and KA.KPI = 1
LEFT JOIN tblKPIDetails KB ON t.Division = KB.Division and t.Month = KB.month and t.year = KB.year and KB.KPI = 21
LEFT JOIN tblKPIDetails KC ON t.Division = KC.Division and t.Month = KC.month and t.year = KC.year and KC.KPI = 25 
```

Then is one LEFT JOIN for each possible KPI value you want.

# dns - DNS：检测引荐来源网址并发送到目录的脚本

> ID：14075044
> 
> 赞同：2
> 
> 时间：2012-12-28T19:59:16.580
> 
> 标签：dns, ftp, webserver

我最近加入了一个名为 DNSDynamic 的站点，想知道是否有办法让他们提供的 URL 重定向到我服务器上的特定目录，因为我在多个目录上托管多个站点，但它只是询问服务器 IP 地址和将访问者发送到根目录。

我想我必须自己为此编写一些代码，你会推荐什么？

我正在考虑在服务器的根目录中使用一些 PHP 来检测引荐来源并使用元代码相应地重定向它们，对吗？

我该怎么办？谢谢。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T20:14:57.487

使用 IIS，您当然可以根据使用 URL 重写的 URL 重定向到子文件夹，我相信 Apache 中也有类似的功能。

URL重写示例：

```
 <rule name="RuleName" stopProcessing="true">
                <match url="(.*)" />
                <conditions logicalGrouping="MatchAny">
                    <add input="{HTTP_HOST}" matchType="Pattern" pattern="sitedomainname.co.uk$" ignoreCase="true" negate="false" />
                    <add input="{HTTP_HOST}" pattern="^www.sitedomainname.co.uk$" />
                </conditions>
                <action type="Rewrite" url="sitedomainSubfolder/{R:1}" />
            </rule> 
```

# c++ - c++ - 使用运算符 new[] 获取单个元素的大小或分配的元素计数

> ID：14075046
> 
> 赞同：3
> 
> 时间：2012-12-28T19:59:27.613
> 
> 标签：c++, object, memory-management, garbage-collection, creation

有没有办法获得使用 operator new[] 分配的单个元素的大小或元素计数？

我的意思是说：

```
void* Object::operator new[](size_t size)
{
    void *temp = ::operator new(size);

    //Get size of single element or count of elements being allocated

    return temp;
} 
```

为什么我需要它：

`operator new(size_t)`并且`operator new[](size_t)`仅当在堆上分配对象时才调用，所以我有了一个基于此创建 c++ 垃圾收集的想法。

1.  所有对象都继承自`Object`类
2.  `Object`类覆盖`operator new(size_t)`，`operator new[](size_t)`像这样：

    ```
    void* Object::operator new(size_t size)
    {
        Object& result = *static_cast<Object*>(::operator new(size));
        result.referenceCount = (int)&result;
        return &result;
    } 
    ```

3.  构造函数`Object`使用此信息：

    ```
    Object::Object()
    {
        if ((void*)referenceCount != this)
        {
            referenceCount = -1; //stack object no reference counting
        }
        else
        {
            referenceCount = 1; //heap object count references
        }
    } 
    ```

4.  要使用的垃圾收集器用户`referenceCount`字段。

我现在需要的是实现`operator new[](size_t)`设置`referenceCount`，这就是为什么我需要单个元素的大小或元素计数。`operator new[](size_t)`对每一个对象都无能为力。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T21:30:09.163

这对我来说似乎非常Java-esque。简单地用 Java 编写程序会更简单吗？如果您使用惯用的 C++ 开始，那么将来必须维护您的 C++ 代码的任何人都会喜欢它。例如，使用智能指针来管理您的内存，而不是尝试基于从`Object`.

我应该指出，您在条件列表中遗漏了“禁止多重继承”，因为在存在多重继承的情况下，您将原始的、未初始化的内存转换为`Object*`可能无法进行访问正确地址所需的指针调整`referenceCount`.

此外，如果内存`referenceCount`恰好在构造时保存了基于堆栈的地址，`Object`您的代码将认为它是堆分配的，并在您删除堆栈指针时最终导致 UB。

*但*毕竟如果你真的真的很想这样做，我认为你唯一的选择是使用 CRTP 自动将数组 new 运算符注入每个子类。至少这样你就不必为每个孩子自己写。

# php - 避免导航器记住会话

> ID：14075049
> 
> 赞同：0
> 
> 时间：2012-12-28T19:59:34.193
> 
> 标签：php, security, symfony, fosuserbundle

使用 Symfony2.0 和 FOSUserBundle，我怎样才能始终避免导航器上的“记住我”行为？

如文档中所述，默认情况下，记住我是禁用的。您必须在配置中设置它才能使其工作：

```
# app/config/security.yml
firewalls:
    main:
        remember_me:
            key:      "%secret%"
            lifetime: 31536000 # 365 days in seconds
            path:     /
            domain:   ~ # Defaults to the current domain from $_SERVER 
```

出色地。我不会将该配置放在 security.yml 中。但是，不知何故，导航器忽略了我的愿望，它确实保留了必要的 cookie，以便从某个 cookie 中重新获取先前的有效会话。

我怎样才能让用户始终使用他/她的登录名和密码登录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T20:53:35.987

当您想对 chrome 用户强制执行此操作时，听起来您注定要失败：

[Chrome 不会删除会话 cookie](https://stackoverflow.com/questions/10617954/chrome-doesnt-delete-session-cookies)

[https://groups.google.com/a/chromium.org/forum/?fromgroups=#!topic/chromium-bugs/cjt3WwgOJ3c](https://groups.google.com/a/chromium.org/forum/?fromgroups=#!topic/chromium-bugs/cjt3WwgOJ3c)

每当激活“从上次中断的地方继续”功能时，您可能会出现这种行为。

# javascript - 无法在不同页面中的 div 上加载 Highcharts

> ID：14075062
> 
> 赞同：1
> 
> 时间：2012-12-28T20:00:27.397
> 
> 标签：javascript, css, cordova, jquery-mobile, highcharts

好吧，我正在使用 phonegap 开发应用程序，我正在使用媒体查询来识别手机和平板电脑的不同分辨率。我的观点不同取决于它是手机还是平板电脑，当设备是手机时，我想在加载导航栏的不同页面中显示高图表，当我在平板电脑中时，我想要图表出现在第一页。

我不知道做到这一点并获得最佳性能的最佳方法是什么。我正在使用的图表是 Highcharts 给出的示例：

```
function graph(){
$(function() {
    $.getJSON('http://www.highcharts.com/samples/data/jsonp.php?filename=aapl-c.json&callback=?', function(data) {
        // Create the chart
        window.chart = new Highcharts.StockChart({
            chart : {
                renderTo : 'container' 
            },
            rangeSelector : {
                selected : 1
            },
            title : {
                text : 'AAPL Stock Price'
            },
            series : [{
                name : 'AAPL',
                data : data,
                tooltip: {
                    valueDecimals: 2
                }
            }]
        });
      });
    });
} 
```

我希望将该图表加载`container`到第一页中调用的 div 中（如果它是平板电脑），或者加载到具有相同名称但在其他页面中的 div 中（如果它是智能手机）。

实际上，图表仅针对第一页中的平板电脑而不是第二页中的平板电脑加载，如果这是一种更好的方法，我不想调用该函数 2 次。希望您能够帮助我。问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T05:41:58.590

不要为平板电脑和手机更改页面的 html。即使您没有显示，请检查您是否有两个页面的 html。这可能是这里的问题。

但是，您可以做的是，更改手机页面和平板电脑页面的两个容器的名称（例如`containerCellPhone`，，`containerTablet`）。并在检测到设备类型后运行具有相应更改属性的 highchart 代码`renderTo`。

希望我正确理解了您的问题。

# android - 该类继承自抽象类的可打包对象数组

> ID：14075064
> 
> 赞同：0
> 
> 时间：2012-12-28T20:00:32.633
> 
> 标签：android, parcelable

我有一个抽象类 Drill 和 4 个扩展它的类（addClass、divClass 等）。Drill 类实现了 parcelable。现在我有 GamePlayActivity 需要将 Array of Drills 传递给 Result 活动，我有两个编译问题。以下是相关代码：

钻头类：

```
...
    public Drill(Parcel in) {
        readFromParcel(in);
    }

    @Override
    public int describeContents() {
        return 0;
    }

    @Override
    public void writeToParcel(Parcel dest, int flags) {
        // We just need to write each field into the
        // parcel. When we read from parcel, they
        // will come back in the same order
        dest.writeInt(firstNumber);
        dest.writeInt(secondNumber);
        dest.writeInt(answer);
        dest.writeInt(userAnswer);
        dest.writeString(userAnswerString);
        dest.writeString(symbol);
        dest.writeInt(minBound);
        dest.writeInt(maxBound);
        dest.writeInt(drillNumber);
    }

    /**
     *
     * Called from the constructor to create this
     * object from a parcel.
     *
     * @param in parcel from which to re-create object
     */
    protected void readFromParcel(Parcel in) {
        // We just need to read back each
        // field in the order that it was
        // written to the parcel
        firstNumber = in.readInt();
        secondNumber = in.readInt();
        answer = in.readInt();
        userAnswer = in.readInt();
        userAnswerString = in.readString();
        symbol = in.readString();
        minBound = in.readInt();
        maxBound = in.readInt();
    }

    public static final Parcelable.Creator<Drill> CREATOR = new Parcelable.Creator<Drill>() {
        public Drill createFromParcel(Parcel in) {
            return new Drill(in); // compilation error
        }

        public Drill[] newArray(int size) {
            return new Drill[size];
        }
    };

} 
```

我认为这里的错误是因为 Drill 调用是抽象的。

这是 addDrill 类，其他类看起来相同：

```
package com.simplemathgame;

import android.os.Parcel;
import android.os.Parcelable;

public class AddDrill extends Drill {

    AddDrill(int min, int max) {
        super(min, max);
        symbol = "+";
        firstNumber = getRandomNumber(min, max);
        secondNumber = getRandomNumber(min, max);
        answer = answerCalculatetion();
    }

    private AddDrill(Parcel in) {
        super(in);
    }

    public void readFromParcel(Parcel in) {
        super.readFromParcel(in);
    }

    @Override
    public void writeToParcel(Parcel out, int flags) {
        super.writeToParcel(out, flags);
    }

    @Override
    public int describeContents() {
        return 0;
    }

    protected int answerCalculatetion() {
        return (this.getFirstNumber() + this.getSecondNumber());
    }
} 
```

这是传递数组的类 GamePlayClass：

```
package com.simplemathgame;

import java.util.LinkedList;
import java.util.List;
import java.util.ListIterator;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class GamePlayActivity extends Activity {
...

    Drill[] arrayOfDrills;
    int dIndex = 0;
...

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_game_play);

        ...

        arrayOfDrills = new Drill[addDrills + subDrills + mulDrills + divDrills];

        ...

        finishButton.setOnClickListener(new OnClickListener(){

            @Override
            public void onClick(View arg0) {
            ...
                Intent resultsActivity = new Intent(GamePlayActivity.this, Results.class);
                resultsActivity.putExtra("drillArray", arrayOfDrills);
                startActivity(resultsActivity);
            }

        });
    }

    public static <T> void shuffle(T[] array) {
        for (int i = array.length; i > 1; i--) {
            T temp = array[i - 1];
            int randIx = (int) (Math.random() * i);
            array[i - 1] = array[randIx];
            array[randIx] = temp;
        }
    }
} 
```

最后一部分是接收数组的 Result 活动：

```
package com.simplemathgame;

import android.os.Bundle;
import android.app.Activity;

public class Results extends Activity {
    Drill[] arrayOfDrills;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_results);

        Bundle extras  = getIntent().getExtras();
        arrayOfDrills = extras.getParcelable("drillArray"); // compilation error
    }
} 
```

在这里我不知道为什么会发生错误。

第一个编译错误：无法实例化类型 Drill

第二个编译错误：类型不匹配：无法从 Drill[]&Parcelable 转换为 Drill[]

我应该如何修复我的代码？谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-11-12T13:45:37.250

钻类是抽象的吗？您不能启动抽象类；）

# php - Magento Varien 对象不保存数据

> ID：14075065
> 
> 赞同：0
> 
> 时间：2012-12-28T20:00:42.227
> 
> 标签：php, magento, model

我正在尝试在我的 Address 对象中使用 setData。这是代码：

```
//code inside another class
$this->getAddress()->setData('abc', 'abc')->collectShippingRates()->save();

class Mage_Sales_Model_Quote_Address extends Mage_Customer_Model_Address_Abstract
{
...
    public function collectShippingRates()
    {
        ...

        $found = $this->requestShippingRates();
        ...

        return $this;
    }
    public function requestShippingRates(Mage_Sales_Model_Quote_Item_Abstract $item = null)
    {
        //I knkow it's getting here, because when I echo 'blablabla', it works.
        //When I use $this->setData('abc', 'abc') here, the code bellow print 'abc'
        //The problem is when I use setData outside the class
        echo $this->getData('abc');exit; //prints nothing
        ...
    }
...
} 
```

如您所见，我在 Address 模型中设置了数据，但在类 getData 内部什么也不返回。
有人可以解释发生了什么吗？
当我尝试使用 Mage::register 时，它也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T20:17:16.380

可能的探索途径。

1.  您的调用`getAddress`没有返回`Mage_Sales_Model_Quote_Address`对象，或者返回的是地址对象的不同实例。

2.  您的调用`setData('abc', 'abc')`发生在 Magento 的代码执行中，而不是第一次调用`requestShippingRates`.

3.  您调用`getAddress`和执行之间的代码`requestShippingRates`是重新实例化或初始化地址对象。

根据您对 的评论`Mage::register`，我的钱排在第二位。

# asp.net - 带破折号的路由值

> ID：14075068
> 
> 赞同：6
> 
> 时间：2012-12-28T20:00:51.793
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, routing, asp.net-mvc-routing

我有这条路线：

```
 routes.MapRoute(
            "News",
            "News/{id}-{alias}",
            new { controller = "News", action = "Show" },
            new
                {
                    id = @"^[0-9]+$"
                },
            namespaces: new[] { "Site.Controllers" }
        ); 
```

这条路线适用于 url，如下所示：

```
http://localhost:54010/News/6-news 
```

但不适用于这样的网址：

```
http://localhost:54010/News/6-nice-news 
```

如何在我的路线值“别名”中使用破折号？

**已编辑**

路线如下：

```
"News/{id}_{alias}" 
```

适用于两个网址：

```
http://localhost:54010/News/6_news
http://localhost:54010/News/6_nice-news 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T20:44:15.503

问题出在您的模式上：`News/{id}-{alias}`因为路由正在贪婪地解析模式。

因此 url`http://localhost:54010/News/6-news`生成以下标记：

```
id = 6, alias = news 
```

但是会`http://localhost:54010/News/6-nice-news`生成以下标记：

```
id = 6-nice, alias = news 
```

并且`id = 6-nice`令牌将使您的路由约束失效`@"^[0-9]+$".`，因此您将获得 404。

现在有一种方法可以配置 MVC 的这种行为，因此您有以下选项：

1.  使用破折号以外的东西。正如您所指出的，将破折号和连字符结合使用是可行的。
2.  采用 flem 方法并在控制器操作中解析 id 和 alias
3.  您可以创建一个`Route`将进行重新解析的自定义。例如转换 `id = 6-nice, alias = news`为`id = 6, alias = news-nice`

我将向您展示选项 3 的原始（没有任何错误处理或良好的编码实践！）实现，以帮助您入门。

所以你需要继承自`Route`：

```
public class MyRoute : Route
{
    public MyRoute(string url, 
        RouteValueDictionary defaults, 
        RouteValueDictionary constraints, 
        RouteValueDictionary dataTokens) 
        : base(url, defaults, constraints, dataTokens, new MvcRouteHandler())
    {
    }

    protected override bool ProcessConstraint(HttpContextBase httpContext, 
        object constraint, string parameterName, RouteValueDictionary values, 
        RouteDirection routeDirection)
    {
        var parts = ((string) values["id"]).Split('-');
        if (parts.Length > 1)
        {
            values["id"] = parts[0];
            values["alias"] = // build up the alias part
                string.Join("-", parts.Skip(1)) + "-" + values["alias"];
        }
        var processConstraint = base.ProcessConstraint(httpContext, constraint, 
            parameterName, values, routeDirection);
        return processConstraint;
    }
} 
```

然后你只需要注册你的路线：

```
routes.Add("News",
            new MyRoute("News/{id}-{alias}",
            new RouteValueDictionary(new {controller = "News", action = "Show"}),
            new RouteValueDictionary(new
                                        {
                                             id = @"^[0-9]+$"
                                        }),
            new RouteValueDictionary())); 
```

# objective-c - MKMapView Overlay（图像动画）

> ID：14075083
> 
> 赞同：0
> 
> 时间：2012-12-28T20:02:15.380
> 
> 标签：objective-c, ios, animation, mkmapview, overlay

我正在尝试为 MKMapView 上的雷达图像设置动画。我有不同时间的单独图像，并且我已成功将图像设置为 MKMapView 顶部的叠加层。我的问题是当我尝试依次显示这些不同的图像时。我尝试了一种添加和删除覆盖的方法，但系统根本无法很好地处理它，覆盖闪烁，并且一些覆盖没有被删除，总的来说，它不值得。

谁能帮我找到一种在 MapView 上以流畅和快速的方式显示多个图像（如动画 gif）的方法？

这是我覆盖图像的代码：

```
- (id)initWithImageData:(NSData*)imageData withLowerLeftCoordinate:(CLLocationCoordinate2D)lowerLeftCoordinate withUpperRightCoordinate:(CLLocationCoordinate2D)upperRightCoordinate {

self.radarData = imageData;

MKMapPoint lowerLeft = MKMapPointForCoordinate(lowerLeftCoordinate);
MKMapPoint upperRight = MKMapPointForCoordinate(upperRightCoordinate);

mapRect = MKMapRectMake(lowerLeft.x, upperRight.y, upperRight.x - lowerLeft.x, lowerLeft.y - upperRight.y);

return self;

}

- (CLLocationCoordinate2D)coordinate
{
    return MKCoordinateForMapPoint(MKMapPointMake(MKMapRectGetMidX(mapRect), MKMapRectGetMidY(mapRect)));
}

- (MKMapRect)boundingMapRect
{
    return mapRect;
} 
```

以下是我在 MapView 上的设置方式：

```
- (void)drawMapRect:(MKMapRect)mapRect
          zoomScale:(MKZoomScale)zoomScale
          inContext:(CGContextRef)ctx
{
    MapOverlay *mapOverlay = (MapOverlay *)self.overlay;
    image = [[UIImage alloc] initWithData:mapOverlay.radarData];

    MKMapRect theMapRect = [self.overlay boundingMapRect];
    CGRect theRect = [self rectForMapRect:theMapRect];

    @try {
        UIGraphicsBeginImageContext(image.size);
        UIGraphicsPushContext(ctx);
        [image drawInRect:theRect blendMode:kCGBlendModeNormal alpha:0.5];
        UIGraphicsPopContext();
        UIGraphicsEndImageContext();
    }
    @catch (NSException *exception) {
        NSLog(@"Caught an exception while drawing radar on map - %@",[exception description]);
    }
    @finally {
    }

} 
```

这是我添加叠加层的地方：

```
- (void)mapRadar {        

AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];

self.mapOverlay = [[MapOverlay alloc] initWithImageData:appDelegate.image withLowerLeftCoordinate:CLLocationCoordinate2DMake(appDelegate.south, appDelegate.west) withUpperRightCoordinate:CLLocationCoordinate2DMake(appDelegate.north, appDelegate.east)];

[self.mapView addOverlay:self.mapOverlay];
[self.mapView setNeedsDisplay];

self.mapView.showsUserLocation = YES;
MKMapPoint lowerLeft2 = MKMapPointForCoordinate(CLLocationCoordinate2DMake(appDelegate.south2, appDelegate.west2) );
MKMapPoint upperRight2 = MKMapPointForCoordinate(CLLocationCoordinate2DMake(appDelegate.north2, appDelegate.east2));

MKMapRect localMapRect = MKMapRectMake(lowerLeft2.x, upperRight2.y, upperRight2.x - lowerLeft2.x, lowerLeft2.y - upperRight2.y);

[self.mapView setVisibleMapRect:localMapRect animated:YES];
}

#pragma Mark - MKOverlayDelgateMethods

-(MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id)overlay{
    if([overlay isKindOfClass:[MapOverlay class]]) {
        MapOverlay *mapOverlay = overlay;
        self.mapOverlayView = [[MapOverlayView alloc] initWithOverlay:mapOverlay];
    }
    return self.mapOverlayView;
} 
```

有没有人有一个想法或解决方案，我可以在 MKMapView 上顺利显示一系列图像？在这一点上，我迫切需要解决方案，在其他任何地方都找不到，所以任何事情都会对我有所帮助，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T19:24:33.860

使用 Lefteris 的建议，您可以将 UIImageView 与动画图像一起使用。如果您的叠加图像大小适合屏幕，则动画应该是流畅的。

要将触摸传递到下面的地图视图，您可以创建一个新的 UIView 子类，其中包含对地图视图的（弱）引用。覆盖[触摸事件](http://developer.apple.com/library/ios/documentation/uikit/reference/UIResponder_Class/Reference/Reference.html#//apple_ref/occ/instm/UIResponder/touchesBegan%3awithEvent%3a)方法（touchesBegan:withEvent:、touchesMoved:withEvent: 等）以转发到地图视图，如下所示：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    [self.mapView touchesBegan:touches withEvent:event];
} 
```

这样用户仍然可以与下面的视图进行交互。

当用户尝试缩放时，您可能会遇到问题，因为实时缩放所有动画帧即使不是不可能也很困难。您应该考虑改用 CATiledLayer。

# printing - 如何输出 SAS IML 值进行打印

> ID：14075084
> 
> 赞同：1
> 
> 时间：2012-12-28T20:02:19.247
> 
> 标签：printing, sas

我想将在 IML 中计算的值用于 SAS 的打印功能 %PRNTINIT。此功能用于从可以更新的数据库中提供每周报告。

我有一些遗留代码用于`proc sql`声明稍后调用的宏类型值，例如：

## 声明变量：tot1-tot4

```
*Get total number of subjects in each group in macro variable;
proc sort data = avg3; by description; run;
proc sql noprint;
select _freq_
into: tot1-:tot4
from avg3;
quit; 
```

## 调用变量 tot1-tot4 进行打印

```
%print(column = 1, style = bold, just = center, lines = bottom:none);
%print("(N= &tot1)", column = 2, just = center, lines = bottom:none);
%print("(N= &tot2)", column = 3, just = center, lines = bottom:none);
%print("(N= &tot3)", column = 4,  just = center, lines = bottom:none);
%print("(N= &tot4 )", column = 5,  just = center, lines = bottom:none);
%print(column = 6, just = center, lines = bottom:none); 
```

如果可能的话，我希望能够类似地从 IML 调用值。

* * *

示例数据：

```
data test ;
input age  type  gender $;
cards;
1 1 m
1 1 m
1 1 m
1 1 f
1 1 f
1 2 f
2 1 m
2 1 f
2 2 m
2 2 m
2 2 m
2 2 m
2 2 m
2 2 f
2 2 f
2 2 f
;

proc freq data = test;
tables type*age /  chisq norow nocol nopercent outexpect out=out1 ;
tables type*gender / chisq norow nocol nopercent outexpect out=out2 ;
run;

options missing=" ";

proc iml;

reset print; 

use out2;
read all var {count} into count;

type1 = count[1:2] ;
type2 = count[3:4] ;

tab = type1 || type2 ;

cols = tab[+,] ;
rows = tab[,+] ;
tot  = sum(tab) ;

perc = round(cols / tot, .01) ;

cell_perc = round(tab / (cols//cols) , .01) ;

expect = (rows * cols) / tot ;
chi_1 = sum((tab - expect)##2/expect) ;
p_chi_1 = 1-CDF('CHISQUARE',chi_1, ((ncol(tab)-1)*(nrow(tab)-1)));

print tab p_chi_1 perc cell_perc;

out_sex = tab || (. // p_chi_1);

print out_sex;

print out_sex[colname={"1","2"} 
              rowname={"f" "m" "p-value"}
              label="Table of Type by Gender"];

call symput(t1_sum, cols[1,1]) ;

%let t2_sum = put(cols[1,2]) ;
%let t1_per = perc[1,1] ;
%let t2_per = perc[1,2] ; 

%let t1_f = tab[1,1] ;
%let t1_m = tab[2,1] ;
%let t2_f = tab[1,2] ;
%let t2_m = tab[2,2] ;

%let t1_f_p = cell_perc[1,1] ;
%let t1_m_p = cell_perc[2,1] ;
%let t2_f_p = cell_perc[1,2] ;
%let t2_m_p = cell_perc[2,2] ;

%let p_val = p_chi_1 ;

*****  is it possible to list output values here for use in table building ???   ;
*  like:    %let t1_f = tab[1,1]
            %let t2_f = tab[2,1]   etc...  ;

quit; 
```

* * *

所以我想声明一个打印语句，如下所示：

```
%print( "(N=&tab[1,1], column = 1, just=center, lines = bottom:none);
%print( "(N=&tab[1,2], column = 2, just=center, lines = bottom:none);
etc... 
```

非常感谢您对此的任何帮助...

* * *

## 更新：无法从 IML 中提取声明的宏值

我已经能够计算出正确的值并成功格式化表格。

*但是，*我无法提取用于打印宏的值。

我在 IML 中创建了一些矩阵和计算值，但是当我尝试声明宏变量以供以后使用时，唯一返回的是我将变量声明为的文字值......例如：

![缺少 IML 值的表](../Images/0e237af51b76aa82047e5946a8b98ee8.png)

和

![另一个缺少 IML 值的表](../Images/ad33c7b600f5ecb3c3e65c8a232bcfa0.png)

您可以在表格中看到我**想要**的数字，但到目前为止还没有成功。我尝试使用`%let`, `put`, `symput`, 并`symputx`没有成功。

```
call symput(t1_sum, cols[1,1]) ;

%let t2_sum = put(cols[1,2]) ;
%let t1_per = perc[1,1] ;
%let t2_per = perc[1,2] ; 

%let t1_f = tab[1,1] ;
%let t1_m = tab[2,1] ;
%let t2_f = tab[1,2] ;
%let t2_m = tab[2,2] ;

%let t1_f_p = cell_perc[1,1] ;
%let t1_m_p = cell_perc[2,1] ;
%let t2_f_p = cell_perc[1,2] ;
%let t2_m_p = cell_perc[2,2] ; 
```

布雷格...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T19:07:30.573

SAS/IML 矩阵必须全部为数字或全部为字符，这就是您的尝试无效的原因。但是，SAS/IML PRINT 语句有几个选项可以让您标记列和行并应用格式。请参阅[http://blogs.sas.com/content/iml/2011/08/01/options-for-printing-a-matrix/](http://blogs.sas.com/content/iml/2011/08/01/options-for-printing-a-matrix/) 连同全局 SAS OPTIONS 语句，我认为您可以获得所需的输出。

1）使用全局语句

```
options missing=" "; 
```

告诉 SAS 将缺失值打印为空白。

2）您的目标是将一列附加到 2x2 TAB 矩阵。您可以对没有数据的行使用（数字）缺失值：

```
 out_age = tab || (. // p_chi_1); 
```

3) 您现在可以打印这个 2x3 表格，并使用 COLNAME= 和 ROWNAME= 选项来显示行标题：

```
print out_age[rowname={"1","2"} 
              colname={"f" "m" "p-value"}
              label="Table of Type by Gender"]; 
```

如果您真的想使用旧式宏，可以使用 SYMPUTX 语句将值从 SAS/IML 复制到宏变量中，如本文所示：http: [//blogs.sas.com/content/iml/2011 /10/17/does-symput-work-in-iml/](http://blogs.sas.com/content/iml/2011/10/17/does-symput-work-in-iml/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T19:55:38.000

经过**大量**搜索，并[在 SO 上](https://stackoverflow.com/questions/5240295/how-do-i-invoke-a-macro-variable-inside-the-quoted-string-of-a-libname-statement "链接到stackoverflow问题")找到了一些帮助，我能够将答案拼凑在一起。

1.  输出值必须是字符串
2.  宏变量的名称必须用引号引起来
3.  调用必须是`symputx`为了修剪额外的空白（与 相比`symput`）

* * *

## 将 IML 值提取到宏变量的代码

```
call symputx('t1_sum', char(cols[1,1])) ;
call symputx('t2_sum', char(cols[1,2])) ;

call symputx('t1_per', char(perc[1,1])) ;
call symputx('t2_per', char(perc[1,2])) ;

call symputx('t1_f' , char(tab[1,1])) ;
call symputx('t1_m' , char(tab[2,1])) ;
call symputx('t2_f' , char(tab[1,2])) ;
call symputx('t2_m' , char(tab[2,2])) ;

call symputx('t1_f_p' , char(cell_perc[1,1])) ;
call symputx('t1_m_p' , char(cell_perc[2,1])) ;
call symputx('t2_f_p' , char(cell_perc[1,2])) ;
call symputx('t2_m_p' , char(cell_perc[2,2])) ;

call symputx('p_val' , char(round(p_chi_1, .001))) ; 
```

* * *

## 用于使用旧 SAS %PRNTINIT 宏构建表的部分代码

```
...
%print("Female",            column = 1,  just = center  );
%print("&t1_f (&t1_f_p)",   column = 2,  just = center  );
%print("&t2_f (&t2_f_p)",   column = 3,  just = center  );
%print(,                    column = 4,  just = center  );
%print(proc = newrow);

%print("Male",              column = 1,  just = center  );
%print("&t1_m (&t1_m_p)",   column = 2,  just = center  );
%print("&t2_m (&t2_m_p)",   column = 3,  just = center  );
%print("&p_val",            column = 4,  just = center  );
... 
```

* * *

期望的结果：

![带有正确数字的表格详细信息](../Images/35ee4feabde277d14bbde54a32a3afe0.png)

![带有正确数字的附加表格详细信息](../Images/14aa34b2aa3230c7d22bbeb44d738819.png)

# javascript - onclick() 操作没有响应

> ID：14075091
> 
> 赞同：0
> 
> 时间：2012-12-28T20:03:18.273
> 
> 标签：javascript, javascript-events

我正在创建一个类似调查的页面。我使用了三个基本的 javascript 函数，`goNext(i)`它们隐藏了特定的 div 标签并显示了下一个 , `goPrevious(i)`，它的作用几乎相同，但反过来，`answerExists(questionNumber)`它检查是否所有单选按钮都被选中。从我创建的那一点开始`answerExists(), goNext()`，我想`goPrevious()`也是，停止响应。也许这与`onsubmit()`功能有关，但我无法弄清楚。这些是 Javascript 函数：

```
function goNext(i) {
  document.getElementById("div" + i).style.display = 'none';
  document.getElementById("div" + (i + 1)).style.display = 'block';
}

function goPrevious(i) {
  document.getElementById("div" + i).style.display = 'none';
  document.getElementById("div" + (i - 1)).style.display = 'block';
}

function checkAnswers(questions) {
  var answers = new Array(questions);
  for(var i = 1; i <= questions; i++){
    answers[i-1] = false;
    var radio = document.getElementsByClassName('Radio' + i);
    for (var j=0; j < radio.length; j++) {
      if(radio[j].checked == true)
         alert(radio[j].value)answers[i-1] = true;
    }
    for (var i = 0; i < questions; i++){
      if(answers[i] == false){
        alert("Please answer all questions.");
        return false;
      }   
    }
    return true;
} 
```

这是 HTML 表单：

```
<form id="content" action="getresults.jsp" method="post" onsubmit="return checkAnswers(2);">
    <div id="div1" style="display: block;">
        <strong>1\. Question 1</strong><br><br>&nbsp;&nbsp;
        <input id="radio1" class="radio1" name="radio1" onclick="if (this.__chk) this.checked = false" onmousedown="this.__chk = this.checked" type="radio" value="Answer1" /> 
        Answer1<br><br><br><br>
        <div class="auto-style1">
            <input name="next" onclick="goNext(1);" type="button" value="Next" />
        </div>
    </div>
    <div id="div2" style="display: none;">
        <strong>2\. Question 2</strong><br><br>&nbsp;&nbsp;
        <input id="radio2" class="radio2" name="radio2" onclick="if (this.__chk) this.checked = false" onmousedown="this.__chk = this.checked" type="radio" value="Answer 2" /> 
        Answer 2<br><br>&nbsp;&nbsp;
        <input id="radio2" class="radio2" name="radio2" onclick="if (this.__chk) this.checked = false" onmousedown="this.__chk = this.checked" type="radio" value="dfgdgfdgf" /> 
        dgfgddgf<br><br><br><br>
        <div class="auto-style1">
            <input name="previous" onclick="goPrevious(2);" type="button" value="Previous" />&nbsp;
            <input name="submit" type="submit" value="Submit" />
        </div>
    </div>
</form> 
```

它实际上都是动态创建的，但在我添加`checkAnswers()`函数之前它仍然有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T20:08:20.830

问题是您的`checkAnswers`函数中有语法错误，解释器会丢弃任何包含语法错误的脚本，因此您的所有其他函数也会被丢弃。

这是两个语法错误：

*   `alert(radio[j].value)answers[i-1] = true;`不是一个有效的陈述。（我猜您打算删除该`alert(radio[j].value)`部分，但突出显示了错误的内容？）
*   你的左花括号`{`比右花括号多`}`。

一旦你解决了这两个问题，脚本至少应该*运行*（尽管你可能还有一些调试工作要做）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T20:13:43.287

您使用 2 作为参数调用 checkAnswers 并用它构建一个数组。？？？

下面的代码将显示错误。

```
try{
  //your code
}catch(er){
  alert(er);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T20:18:08.670

我喜欢一步一步地回答你......

1）为什么你真的需要检查是否所有问题的答案都被检查了？我问你这个是因为默认情况下单选按钮会选择一个选项......或者你可以为特定选项制作一个“活动”的东西......这样做你真的不需要检查是否所有问题都得到了回答。 ..因为默认选择一个答案...

2）点击事件不起作用，因为您似乎没有输入标签“下一个”，“上一个”，“提交”的任何“ID”......每个都有单独的ID并捕获该特定标签的点击事件通过使用 jquery...

例如。有下一个 id`<input id="next">`

```
$("#next").click(function() {
    //perform the action you need
  } 
```

对所有点击事件执行此操作....

3）最后......不要对你喜欢点击的元素使用输入标签......尝试使用按钮标签......

希望它会帮助你:)...

# asp.net-mvc-3 - 包含外部 Razor Helper 函数

> ID：14075092
> 
> 赞同：1
> 
> 时间：2012-12-28T20:03:28.897
> 
> 标签：asp.net-mvc-3, razor, razor-declarative-helpers

有没有办法在视图中导入剃刀内联助手？

我尝试了以下方法：

```
<% Html.Partial("PaginationTemplate"); %>

<!-- later down -->

<%= KnockoutPagination("pendingQuestionsPagination", "$root.pendingQuestionsViewModel.pagination") %> 
```

在 PaginationTemplate.cshtml 里面...

```
@helper KnockoutPagination(string id, string context) {
<div id="@id" class="pagination pagination-centered" data-bind="with: @context, visible: @(context).hasPages">
    <ul>
        <li data-bind="css: prevCss"><a href="#" data-bind="click: clickPrev">Prev</a></li>
        <!-- ko foreach: pages -->
        <li data-bind="css: $parent.pagingItemCss($data)"><a href="#" data-bind="text: $data, click: $parent.changePage"></a></li>
        <!-- /ko -->
        <li data-bind="css: nextCss"><a href="#" data-bind="click: clickNext">Next</a></li>
    </ul>
</div>
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T20:44:23.413

您可以创建一个全局助手，它可以在任何地方引用。如果您添加一个 app_code 文件夹，将一个 CSHTML 文件放入其中并定义帮助程序，您可以通过执行以下操作来引用此全局帮助程序：

```
<file name>.<helper name>(params) 
```

然后你可以在任何你想要的地方引用它。 [有关更多信息，请参阅此](https://curtistimson.co.uk/post/asp-net/how-to-store-razor-helpers-globally/)。

# three.js - 自修订版 54（更新 2）以来 MeshFaceMaterial 的问题

> ID：14075094
> 
> 赞同：3
> 
> 时间：2012-12-28T20:03:34.383
> 
> 标签：three.js

由于我使用修订版 54 而不是修订版 48，因此我的脚本中出现了以下异常：

```
Uncaught TypeError: Cannot read property 'map' of undefined three.js:18155
bufferGuessUVType three.js:18155
initMeshBuffers three.js:17963
addObject three.js:21674
initWebGLObjects three.js:21608
render three.js:21145
...
THREE.JSONLoader.createModel three.js:9892
xhr.onreadystatechange 
```

我正在将几何与`THREE.GeometryUtils.merge`. 之后我使用合并的几何体来构造一个网格。对于这个网格，我`MeshFaceMaterial`用来应用面的材质。由于 r54 这最终导致异常。如果我使用其他一些材料，它会起作用..但是我不能使用原始面的材料。

更新：所有面都指向一种材质`geometry.faces[i].materialIndex`，但几何不再包含材质阵列。

更新：我只想合并几何并保留它们的材料 :) 我认为这将是解决方案，但`materialIndex`合并时不会更新面部。我发布这个例子以某种方式解释我需要什么。

```
mesh1 = new THREE.Mesh(new THREE.PlaneGeometry(2,2), new THREE.MeshBasicMaterial({ color: 0xFF0000}));
mesh2 = new THREE.Mesh(new THREE.PlaneGeometry(2,2), new THREE.MeshBasicMaterial({ color: 0x0000FF}));
mesh2.position.y = 3;
THREE.GeometryUtils.merge(mergedGeo, mesh1);
THREE.GeometryUtils.merge(mergedGeo, mesh2);
scene.add(new THREE.Mesh(mergedGeo, new THREE.MeshFaceMaterial([mesh1.material, mesh2.material]))); 
```

我可以实现一个自己的逻辑来将合并的面链接到正确的材料，但这有点令人沮丧，因为它在早期版本中工作。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-28T23:56:35.930

正如 r52 以来的[迁移页面](https://github.com/mrdoob/three.js/wiki/Migration)中所述，现在是这样的：

```
new THREE.Mesh( geometry, new THREE.MeshFaceMaterial( materialsArray ) ); 
```

编辑：在合并之前，您需要为每个几何体设置材质索引

```
THREE.GeometryUtils.setMaterialIndex( mesh1.geometry, 0 );
THREE.GeometryUtils.setMaterialIndex( mesh2.geometry, 1 ); 
```

# mysql - 计算 16 位整数序列的随机性

> ID：14075099
> 
> 赞同：0
> 
> 时间：2012-12-28T20:03:50.290
> 
> 标签：mysql, random, statistics

我希望能够在下面的 SQL 表中计算 16 位整数（id 和运动）的随机性。有没有人有一个很好的简单建议。

理想情况下，结果应该只显示给定单个源 IP 地址的运动和 id 号码的随机性。如果需要，逻辑可以完全在 SQL 之外。作为具有上限的纯整数，这样做应该是合理的快速性能 - 我认为

```
mysql> select * from packets limit 12;
+---------------------+-----------+------------+-------+-------+--------+-------+
| stime               | sip       | dip        | sport | dport | in_out | id    |
+---------------------+-----------+------------+-------+-------+--------+-------+
| 2012-12-28 15:12:54 | 167837969 | 3406501129 | 26008 |    53 |      1 | 27205 | 
| 2012-12-28 15:12:54 | 167837969 | 3406501129 | 19066 |    53 |      1 | 12517 | 
| 2012-12-28 15:12:54 | 167837969 | 3406501129 |  4262 |    53 |      1 | 17233 | 
| 2012-12-28 15:12:54 | 167837969 | 3406501129 |   881 |    53 |      1 | 12689 | 
| 2012-12-28 15:12:54 | 167837969 | 3406501129 | 31211 |    53 |      1 |  7485 | 
| 2012-12-28 15:12:54 | 167837969 | 3406501129 | 14834 |    53 |      1 |  2299 | 
| 2012-12-28 15:12:54 | 167837969 | 3406501129 | 15458 |    53 |      1 |  7923 | 
| 2012-12-28 15:12:54 | 167837969 | 3406501129 |  8192 |    53 |      1 |  8490 | 
| 2012-12-28 15:12:54 | 167837969 | 3406501129 | 31909 |    53 |      1 | 30410 | 
| 2012-12-28 15:12:54 | 167837969 | 3406501129 |  3482 |    53 |      1 |  2602 | 
| 2012-12-28 15:12:54 | 167837969 | 3406501129 | 23597 |    53 |      1 |  8713 | 
| 2012-12-28 15:12:54 | 167837969 | 3406501129 | 13165 |    53 |      1 | 22742 | 
+---------------------+-----------+------------+-------+-------+--------+-------+ 
```

# php - 为什么 DirectoryIterator 没有遍历我在 php 中的所有文件

> ID：14075104
> 
> 赞同：1
> 
> 时间：2012-12-28T20:04:20.547
> 
> 标签：php

谁能告诉我为什么我的代码只输出 40 个文件中的 20 个

```
$Files = array();
  $dir = new DirectoryIterator('./images/gallery');
  foreach($dir as $fileinfo){
    if($fileinfo->isFile()){
      $Files[$fileinfo->getMTime()] = $fileinfo->getFilename();
    }
  }
  krsort($Files);          
  foreach($Files as $file){
    echo "<a rel='fancy1' href='/images/gallery/$file'><span><img src='/images/revelsmashy.php?src=/images/gallery/$file&w=128&zc=0&q=100'></span></a>\n";
  } 
```

编辑：我希望根据它们上传的数据时间对图像进行排序，其中最新发布的是 1st

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T20:16:20.767

您通过文件的修改时间索引数组的原始方法看起来会导致具有相同`mtime`值的文件覆盖以前的数组键。在某些情况下，如果您的整个目录一次被重写，*所有*文件可能具有相同的修改时间，因此只有*最后*一个迭代的文件将在结果数组中。

如果您最终需要按时间排序，您可以构建一个包含文件名和文件修改时间的多维数组，然后使用[`usort()`](http://us3.php.net/manual/en/function.usort.php).

```
$dir = new DirectoryIterator('./images/gallery');
foreach($dir as $fileinfo){
  if($fileinfo->isFile()){
    // Append each file as an array with filename and filetime keys
    $Files[] = array(
      'filename' => $fileinfo->getFilename(), 
      'filetime' => $fileinfo->getMtime()
    );
  }
}

// Then perform a custom sort:
// (note: this method requires PHP 5.3\. For PHP <5.3 the you have to use a named function instead.
// see the usort() docs for examples )
usort($Files, function($a, $b) {
  if ($a['filetime'] == $b['filetime']) return 0;
  return $a['filetime'] < $b['filetime'] ? -1 : 1;
}); 
```

在您的输出循环中，访问`filename`密钥：

```
foreach($Files as $file){
    echo "<a rel='fancy1' href='/images/gallery/{$file['filename']}'><span><img src='/images/revelsmashy.php?src=/images/gallery/{$file['filename']}&w=128&zc=0&q=100'></span></a>\n";
    //-----------------------------------------^^^^^^^^^^^^^^^^^^^^
} 
```

# c# - 自动装配属性注入

> ID：14075110
> 
> 赞同：2
> 
> 时间：2012-12-28T20:04:51.140
> 
> 标签：c#, dependency-injection, structuremap

我正在尝试在插件样式系统中使用 StructureMap 的属性注入。

```
ObjectFactory.Initialize(o => o.Scan(s =>
{
    s.AssembliesFromPath("path_to_assemblies");
    s.WithDefaultConventions();
}); 
```

这是一个示例实现（故意没有深入定义 T 和 TU，因为它们只是简单的类）

```
public interface IBarService
{
    void Baz();
}

public class BarService : IBarService
{
    public void Baz() { /* implementation */ }
}

public abstract class PluginBase<T, TU> : IPlugin
    where T : AClass, new()
    where TU : BClass
{
     protected PluginBase()
     {
         //some init code in the constructor
     }
}

//Foo is created at run-time via Activator.CreateInstance()
public class FooPlugin : PluginBase<AClass, BClass>
{
   [SetterProperty]
   public IBarService BarService { get; set; }

   public void Fooey()
   {
       BarService.Baz();
   }
} 
```

我想在运行时创建的所有这些插件上自动连接属性依赖项。我以为我会从属性注入开始，然后在需要时将内容移至构造函数。

如果我做：

```
var obj = ObjectFactory.GetInstance<IBarService>(); 
```

在 的实例中的任何地方`FooPlugin`，我都得到了正确的实现，一切都很好。

如果我做：

```
this.BarService.Baz(); 
```

我得到一个空引用异常，因为没有`IBarService`设置实例。

创建插件后，如果我这样做：

`ObjectFactory.BuildUp(pluginObject)`.

一切都很好，并且`FooPlugin`正确实施了`IBarService`.

有什么方法可以简单地让我装饰我的插件属性`[SetterProperty]`并让 StructureMap 在创建插件时自动注入这些属性而无需调用`ObjectFactory.BuildUp(pluginObject)`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T20:21:33.133

在它不起作用的情况下，你如何创建你的插件实例？你只是在做`new FooPlugin()`吗？

如果您执行 var plugin = `ObjectFactory.GetInstance<PluginBase<AClass, BClass>>();`，您是否获得了解决所有正确依赖项的插件？

如果您使用“new”实例化对象，则容器无法知道该实例需要解决依赖关系——它不知道该实例。可以说，需要注入依赖的实例必须“由容器管理”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T20:12:24.743

如果您只是走相反的路线并将所有依赖项注入构造函数中，您将为自己省去很多麻烦。这样，您需要在一个地方检查您的对象是否已正确初始化...

# jquery - 访问元素的内部 expando id

> ID：14075117
> 
> 赞同：0
> 
> 时间：2012-12-28T20:05:42.740
> 
> 标签：jquery

我一直在开/关删除我不想的事件处理程序时遇到问题，并且希望使用 html 元素的 expando id 命名事件绑定。

```
function SomeWidget(el) {
   $(document).on('handler.MY_EXPANDO_ID', this.handler.bind(this));
};
var widget = new SomeWidget($(sometargetelement)); 
```

没有唯一标识符的问题是，目前我有相同的命名空间，当我同时有两个小部件时，它搞砸了，一个被删除，它删除了两个对象的处理程序。

问题 1) 如何访问元素的内部 expando id？问题2）有没有更好的方法来做到这一点？Function.bind !== 函数，这使得无法根据实际方法指针进行删除

我正在使用 jQuery 1.8.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T20:15:54.907

每当创建一个小部件时，jQuery UI 的小部件工厂就会增加一个计数器。然后他们有一个`eventNamespace`可用的属性正是这个原因。您可以完成相同类型的事情：

```
function SomeWidget(el) {
    SomeWidget.instances++;
    var eventNamespace = ".SomeWidget" + SomeWidget.instances;

    $(el).on("handler" + eventNamespace, ...);
}
SomeWidget.instances = 0; 
```

这将在创建新实例时增加实例`SomeWidget`。在内部，它将可以访问`eventNamespace`可用于绑定/解除绑定事件的一个。

如果您需要在小部件之外进行访问，则可以将`eventNamespace`as 数据存储在元素上：

```
$(el).data("eventNamespace", eventNamespace); 
```

但是，如果您使用相同的元素创建了多个小部件实例，这将被覆盖。

# iphone - 测试非消耗性应用内购买

> ID：14075123
> 
> 赞同：3
> 
> 时间：2012-12-28T20:06:16.403
> 
> 标签：iphone, ios, ios6, in-app-purchase, app-store-connect

我正在尝试为我的 ios 应用程序创建我的第一个非消耗性应用程序购买，我刚刚将 .pkg 上传到 iTunes Connect（通过 XCode），但我仍然看到这个警告......

`This In-App Purchase is not currently available for testing in the sandbox environment because you have chosen to host your content with Apple, but have not delivered your content. Upload your content to test this In-App Purchase in sandbox.`

状态仍然

`Waiting for Upload`

但是，我还没有提交我的应用程序的二进制文件。

如何摆脱上面的消息并继续在沙盒环境中进行测试？我需要提交我的应用程序的二进制文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T01:21:39.003

没关系！我想我只是不耐烦了。我在几个小时后回来查看，现在警告消息已更改为

`Your first In-App Purchase(s) must be submitted with a new app version. Select them from the In-App Purchases section of the Version Details page and then click Ready to Upload Binary.`

对于那些因为没有直接通知您而感到困惑的人，请确保您： 存档您的应用内购买，通过 XCode（开放式管理器）分发并等待 1-2 小时。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-12-18T10:14:57.570

当我编辑应用内购买时，我出现了这个错误。

我没有收到苹果的回复，但发现当我更改图像时，我在保存时得到了这个。

它不是一个编辑，而是一个添加新的。

由于我有很多应用程序，因此我决定将应用程序内购买添加到它们中，并发现图形存在问题。没有必要改变旧的，但认为它会很好。

这是越野车。

我通过删除新的应用内购买解决了这个问题，除了图像之外，编辑仍然保存到原始配置中。

# ruby - Ruby 中的 Selenium 数据驱动测试，将 CSV 与现有数据进行比较，接受者？

> ID：14075124
> 
> 赞同：1
> 
> 时间：2012-12-28T20:06:18.857
> 
> 标签：ruby, csv

我是红宝石新手！我正在尝试自动执行此任务的测试。这很简单：

我在 Web 应用程序中有一个数据内容（工作组成员列表）并且每个工作组都有其关联的 CSV 文件导出。我正在尝试将 CSV 文件中的列表与 Web 应用程序数据进行比较。

如何使用 Ruby 在 Selenium 中实现这一点？请写一个例子让我开始，这样我就可以继续努力了！非常感谢！！

# c - 我需要内核源代码来进行模块编程吗？

> ID：14075125
> 
> 赞同：2
> 
> 时间：2012-12-28T20:06:29.027
> 
> 标签：c, kernel-module, kernel

我正在尝试进入内核模块编程。经过一番研究，我有点困惑。我的问题是，我需要内核源代码来进行模块编程吗？

另外，如果是，在编译完我编写的模块后是否需要重新编译内核？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-28T22:26:01.243

> 我需要内核源代码来进行模块编程吗？

您需要内核头文件，通常我使用： $ sudo apt-get install build-essential linux-headers-$(uname -r)

> 另外，如果是，在编译完我编写的模块后是否需要重新编译内核？

不

# ruby-on-rails-3 - Rails 根据按钮更改更改变量

> ID：14075127
> 
> 赞同：0
> 
> 时间：2012-12-28T20:06:31.523
> 
> 标签：ruby-on-rails-3

我有一个员工每周工作时间的电子表格类型显示。本周显示正常。但是，我希望他们能够前进一周或后退一周。

工作显示代码为：

```
<% showdate = DateTime.now%>
<td><strong><%= showdate.beginning_of_week.to_date - 1.day%></strong></td>
<td><strong><%= showdate.beginning_of_week.to_date %></strong></td>
<td><strong><%= showdate.beginning_of_week.to_date + 1.day %></strong></td>
<td><strong><%= showdate.beginning_of_week.to_date + 2.day  %></strong></td>
<td><strong><%= showdate.beginning_of_week.to_date + 3.day  %></strong></td>
<td><strong><%= showdate.beginning_of_week.to_date + 4.day  %></strong></td>
<td><strong><%= showdate.beginning_of_week.to_date + 5.day  %></strong></td> 
```

我有一个按钮组：

```
<div class="btn-group-wrap">
 <button class="btn btn-primary">- 1</button>
<button class="btn btn-success">+ 1</button> 
```

当用户按下 -1 按钮时，我想将 showdate 更改为 -1.week 并刷新页面。

我将如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T22:01:52.347

您对 showdate 的分配可能是`<% showdate = DateTime.now + (params[:offset].to_i.weeks %>`，然后 +1 按钮可以转到`http://your/url?offset=<%= params[:offset].to_i + 1 %>`。

# c++ - 具有自定义值类型的 map::emplace()

> ID：14075128
> 
> 赞同：22
> 
> 时间：2012-12-28T20:06:44.993
> 
> 标签：c++, gcc, c++11, gcc4.7

我在使用`map::emplace()`. 谁能帮我找出正确的语法来使用？我正在有效地尝试做与[此示例](http://www.cplusplus.com/reference/map/map/emplace/)相同的事情。这是我的版本：

```
#include <map>
using namespace std;

class Foo
{
  // private members

  public:
    Foo(int, char, char) /* :init(), members() */ {  }

    // no default ctor, copy ctor, move ctor, or assignment
    Foo() = delete;
    Foo(const Foo&) = delete;
    Foo(Foo &&) = delete;
    Foo & operator=(const Foo &) = delete;
    Foo & operator=(Foo &&) = delete;
};

int main()
{
  map<int, Foo> mymap;
  mymap.emplace(5, 5, 'a', 'b');

  return 0;
} 
```

在 GCC 4.7（带有`-std=c++11`标志）下，我`emplace`在线上出错了。[我上面链接](http://www.cplusplus.com/reference/map/map/emplace/)的示例没有说明如何处理自定义类型而不是原语。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-28T20:48:06.217

容器的`emplace`成员使用提供的参数构造一个元素。

您的`value_type`地图是`std::pair<const int, Foo>`，并且该类型没有构造函数接受参数，`{ 5, 5, 'a', 'b' }`即这不起作用：

```
std::pair<const int, Foo> value{ 5, 5, 'a', 'b' };
map.emplace(value); 
```

您需要使用与's 构造函数`emplace`之一匹配的参数进行调用。`pair`

使用符合标准的 C++11 实现，您可以使用：

```
mymap.emplace(std::piecewise_construct, std::make_tuple(5), std::make_tuple(5, 'a', 'b')); 
```

但 GCC 4.7 也不支持该语法（GCC 4.8 发布时将支持。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T20:07:36.177

GCC 4.7 不完全支持`emplace`函数。

[您可以在此处查看](http://gcc.gnu.org/onlinedocs/gcc-4.7.2/libstdc++/manual/manual/status.html#status.iso.2011)GCC 4.7.2 中的 C++11 支持。

# java - 从 OSGI 包访问 Drools Guvnor

> ID：14075133
> 
> 赞同：1
> 
> 时间：2012-12-28T20:07:09.237
> 
> 标签：java, osgi, drools, guvnor

我正在使用以下代码访问 Drools Guvnor：

```
KnowledgeAgentConfiguration kaconf = KnowledgeAgentFactory.newKnowledgeAgentConfiguration();
KnowledgeAgent kagent = KnowledgeAgentFactory.newKnowledgeAgent("MyAgent", kaconf);
kagent.applyChangeSet(ResourceFactory.newClassPathResource("drools/change-set.xml"));
StatefulKnowledgeSession ksession = kagent.getKnowledgeBase().newStatefulKnowledgeSession(); 
```

不幸的是`KnowledgeAgentFactory`，类似乎没有为 OSGI 做好准备，因为它用于`Class.forName()`加载代理提供程序。`KnowledgeAgentFactory`驻留在知识 API 包中，提供者实现在 drools-core 包中。显然，知识 API 在 OSGI 容器中看不到 drools-core。结果我得到以下异常：

```
Caused by: java.lang.RuntimeException: Provider org.drools.agent.impl.KnowledgeAgentProviderImpl could not be set.
    at org.drools.agent.KnowledgeAgentFactory.loadProvider(KnowledgeAgentFactory.java:191)[162:org.drools.api:5.5.0.Final]
    at org.drools.agent.KnowledgeAgentFactory.getKnowledgeAgentProvider(KnowledgeAgentFactory.java:178)[162:org.drools.api:5.5.0.Final]
    at org.drools.agent.KnowledgeAgentFactory.newKnowledgeAgentConfiguration(KnowledgeAgentFactory.java:129)[162:org.drools.api:5.5.0.Final] 
```

这个问题有解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T08:32:44.433

您可能会使用 require-bundle 清单条目来帮助自己，因为它似乎无法与这些导入正常工作，我会说在这一点上让它以这种方式工作可能是最好的。

osgi wiki 中定义的[Require-Bundle](http://wiki.osgi.org/wiki/Require-Bundle "Require-Bundle")

# jquery - 最小宽度/高度不适用于 jQuery 文件上传插件

> ID：14075135
> 
> 赞同：0
> 
> 时间：2012-12-28T20:07:12.710
> 
> 标签：jquery, plugins, upload, resize

根据这个：[https://github.com/blueimp/jQuery-File-Upload/wiki/API](https://github.com/blueimp/jQuery-File-Upload/wiki/API)，我可以限制图像的最小宽度/高度。我已经按照文件“jquery.fileupload-fp.js”的解释进行了尝试：

```
$( '#fileupload' ).fileupload('process', {
// An array of image files that are to be resized:
files: files,
process: [
    {
        action: 'load',
        fileTypes: /^image\/(gif|jpeg|png)$/,
        maxFileSize: 20000000 // 20MB
    },
    {
        action: 'resize',
        maxWidth: 1920,
        maxHeight: 1200,
        minWidth: 800,
        minHeight: 600
    },
    {
        action: 'save'
    } 
```

但是，这是行不通的。有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T21:22:41.640

快速查看您链接到的文档，它似乎实际上重新调整了它的大小。从该信息来看，它似乎不会限制放入的内容，只需将其缩放到最小值和最大值。

# c - C中结构的逻辑运算符

> ID：14075137
> 
> 赞同：1
> 
> 时间：2012-12-28T20:07:17.797
> 
> 标签：c, if-statement, struct, logic

假设我有两个不同的结构，Struct1 和 Struct2。它们都有不同的元素。如果我这样比较它们会发生什么：

```
if((Struct1) && (Struct2))
{
    doSomething();
} 
```

我刚刚找到了一些具有这种逻辑的代码，并且想知道发生了什么。谢谢！

**编辑：** Struct1 和 Struct2 都是指向两个不同结构的指针，而不是结构本身。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T20:09:30.853

在 an 中使用结构`if`是 C 的非法语法 - 符合标准的编译器不会接受它。换句话说：你不能在布尔上下文中使用结构。

最有可能在您的代码中 - 如果它*是*真正的代码 -`Struct1`不是结构，而是（可能）指针或其他东西。在这种情况下，如果两者都不是 NULL，则将采用 if。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-28T20:11:38.840

这里有两种可能：

**这将检查 st1 和 st2 是否都没有指向 NULL：**

```
struct Struct1 *st1 = ...;
struct Struct2 *st2 = ...;

if (st1 && st2) {
    ...
} 
```

**这是无效代码：**

```
struct Struct1 st1 = ...;
struct Struct2 st2 = ...;

if (st1 && st2) {
    ...
} 
```

**请注意，这也是无效代码：**

```
struct Struct1 st1 = ...;

if (st1) {
    ...
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-28T20:11:49.807

为此，您必须有指针，而不是结构。也就是说，代码可能是：

```
void somefunc(struct structA *Struct1, struct structB *Struct2)
{
    if (Struct1 && Struct2)
    {
        doSomething(Struct1, Struct2);
    }
} 
```

这会在使用它们之前检查两个指针​​都不是 NULL。你不能直接比较结构，所以如果代码是：

```
void somefunc(struct structA Struct1, struct structB Struct2)
{
    if (Struct1 && Struct2)
    {
        doSomething(Struct1, Struct2);
    }
} 
```

你会有一个语义错误；您根本无法将整个结构与任何东西进行比较。

变量的大写是常规的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T20:22:23.673

如果所有子字段都相同，它将返回“true”或 1，否则它将返回“false”或 0。

它是这些条件运算符的基本概念。

有关 && 运算符的更多信息，请访问[此处](http://publib.boulder.ibm.com/infocenter/comphelp/v8v101/index.jsp?topic=/com.ibm.xlcpp8a.doc/language/ref/logande.htm)

谢谢。

# html - 麻烦浮动元素

> ID：14075142
> 
> 赞同：1
> 
> 时间：2012-12-28T20:07:49.373
> 
> 标签：html, css, css-float

我有两个 div 包含在一个更大的 div 中，我希望它们彼此相邻放置。我的方法是将第一个 div 向左浮动并设置溢出：隐藏在包含的 div 上。由于某种原因，它不起作用，第二个 div 最终位于第一个 div 之上。

Herse 是演示，[http://jsfiddle.net/9xmDP/](http://jsfiddle.net/9xmDP/)。我有一些颜色编码，用于尝试调试重叠。代码也在下面。注册表单应该在登录表单旁边，而不是在它的顶部。

**HTML**

```
<div id="container">    
<div id="signupDiv">
    <div id="signupLabel">
        SignUp
    </div>
    <form id="signupForm">
        User <input type="text" name="user"><BR/>
    </form>
</div>

<div id="loginDiv">
    <div id="loginLabel">
          Login
    </div>            
    <form id="loginForm">
        User <input type="text" name="user"><BR/>
    </form>
</div> 
```

​</p>

**CSS**

```
 #container{
    overflow: hidden;
}

#signupLabel{
    border: solid black 1px;
    width: 300px;
}

#signupDiv{
    float:left;
}

#loginLabel{
    border: solid red 1px;
    width: 300px;
    }

#loginDiv{
    width: 300px;
    border: solid pink 1px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T20:14:55.380

你也需要`float:left` `#loginDiv`。在此处查看您更新的小提琴：

[http://jsfiddle.net/9xmDP/2/](http://jsfiddle.net/9xmDP/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T20:16:14.913

当你浮动一个元素时，它会从正常的内容流中移除，并且它的父元素*和父元素的其他子*元素中的任何内容都会尝试环绕它。

所以 the`signupDiv`确实是向左浮动的，这将它放在了 non-floating 的顶部`loginDiv`。中的内容`loginDiv`确实试图环绕`signupDiv`，但是由于您已将两个元素都指定为 300px 宽，因此没有空间放置它，因此它必须位于浮动 div*下方。*

最简单的解决方案是浮动*两个*div，如下所示：

```
#signupDiv, #loginDiv {
    float: left;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T20:16:15.553

您可以通过使它们都浮动来将 div 彼此相邻放置。如果您将容器设置为 605px，那么 div 将适合其中（包括边框）

```
#container{
    width: 605px;
    overflow: hidden;
} 
```

和这个

```
#loginDiv{
    float: left;
    width: 300px;
    border: solid pink 1px;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-28T20:17:41.683

Display:inline 也可以在这里解决问题.. [http://jsfiddle.net/9xmDP/4/](http://jsfiddle.net/9xmDP/4/)

```
#loginDiv{
width: 300px;
border: solid pink 1px;
display:inline-block;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-28T20:18:30.187

试试这个 CSS。[在这里](http://jsfiddle.net/9xmDP/5/)摆弄

```
#container{
width:604px;
}

#signupLabel{
border: solid black 1px;
width: 300px;
}

#signupDiv{
float:left;
width:300px;
}

#loginLabel{
border: solid red 1px;
width: 300px;
}

#loginDiv{
width: 300px;
float:left;
border: solid pink 1px;
} 
```

​</p>

# elasticsearch - 弹性搜索最佳主人数

> ID：14075143
> 
> 赞同：11
> 
> 时间：2012-12-28T20:07:51.950
> 
> 标签：elasticsearch

我们目前有一个包含 6 个数据节点和一个非数据节点的集群。其中，两个目前是大师资格。该集群位于 EC2 上。

主节点的最佳数量是多少，或者是否有理由进行区分？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-31T15:14:38.897

如果没有主节点，集群将无法运行。因此，符合主节点资格的节点的数量取决于您对丢失所有主节点的容忍度。

拥有奇数个符合条件的主节点并将其设置`discovery.zen.minimum_master_nodes`为大于集群中符合条件的主节点数量的一半也可能会有所帮助。这应该会显着降低集群进入裂脑状态的机会。

例如，对于具有 3 个主合格节点的集群，您可以设置`discovery.zen.minimum_master_nodes`为 2。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-11T09:01:10.207

如[Elasticsearch Pre-Flight Checklist](http://asquera.de/opensource/2012/11/25/elasticsearch-pre-flight-checklist/)中所述，您可以设置`discovery.zen.minimum_master_nodes`为至少在具有节点`(N/2)+1`的集群上。`N > 2`

其中 N 是合格主节点的数量。

这意味着在您的情况下，`discovery.zen.minimum_master_nodes: 4`符合条件的主节点 - 即`(6/2)+1`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-01T13:26:40.963

`minimum_master_nodes`（法定人数）应该根据主节点的数量计算，而不是数据节点的数量，当且仅当您的所有数据节点也是主合格节点时，Uyi 的建议才是正确的。

你永远不应该有 2 个主节点，因为可能会出现[脑裂的](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-node.html#split-brain)情况，我的建议是，让至少 3 个节点有资格成为主节点，并将最小主节点设置为 2。

要考虑的另一件事是拥有更小但专用的主节点，以确保它们更稳定并且不会承受处理索引的压力。

# ruby - NFS 挂载的 Ruby 文件监视器（不能使用 iNotify）

> ID：14075144
> 
> 赞同：1
> 
> 时间：2012-12-28T20:08:07.000
> 
> 标签：ruby, inotify, file-monitoring

我需要找到另一种方法来递归地在 Linux 机器上的 NFS 挂载上监视目录。

投票似乎是我唯一的选择。还有其他人吗？ruby 中是否有不使用 inotify 的文件监视器？

Inotify 需要内核，并且 nfs 挂载具有不能在网络文件系统挂载上工作的限制。

感谢您的任何想法。

编辑：这将在我的代码中使用，而不是独立的命令行工具。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T22:40:48.027

Ara Howard 的 dirwatch 可能非常适合您。我不相信它使用 iNotify

[http://codeforpeople.com/lib/ruby/dirwatch/dirwatch-0.9.0/README](http://codeforpeople.com/lib/ruby/dirwatch/dirwatch-0.9.0/README)

# hbase - 具有多行作为输出的 HBase 映射器

> ID：14075150
> 
> 赞同：1
> 
> 时间：2012-12-28T20:08:28.873
> 
> 标签：hbase

我有一个想在 HBase (0.90.4; Hadoop 0.20) 中运行的 Mapper，它将为每个单个输入行在不同的 HBase 表中生成几个 (1000 - 10000) 新数据行。

我从一个`TableMapper<ImmutableBytesWritable, Put>`假设开始，在 map 函数中，我会调用`context.write(someSingleOutputRowPut)`1000 次以将数据推送到输出表。

拥有一个只读映射器并使用成批的 Puts 列表手动写入我的输出表会更好吗？还是应该将映射器的输出类型更改为列表？或者像这样多次调用 context.write 可以吗？

编辑：开始收集有关调用 context.write 数千次的“幼稚”方法的一些数据，到目前为止看起来并不好（现在我正在尝试更大的数据集，特别是）所以是时候尝试随机的事情了看看有什么改进。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:20:24.260

使用 context.write(...) 或使用 table.put(...) 本质上是相同的。

您应该在写入数据时关闭自动刷新以产生批处理效果。确保在映射器阶段结束时执行刷新，以避免丢失任何数据。

听起来你不需要减速器阶段，你应该保持这种状态，因为它可以通过避免洗牌、排序和数据传输阶段来提高你的性能。

# html - 如何使用 HTML 和 CSS 创建斜条纹设计

> ID：14075154
> 
> 赞同：0
> 
> 时间：2012-12-28T20:08:51.993
> 
> 标签：html, css, image

是否可以使用 HTML 和 CSS 创建图像中显示的设计？如果是这样，那么我需要做什么？

图像被放大，这就是它看起来像素化的原因。斜线覆盖在具有不同背景（白色和蓝色）的不同元素之上。线条最后也会融入背景。

![在此处输入图像描述](../Images/1da1a3595d4bbce454d0a69bc3eed1d2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T20:14:35.240

您可能希望对顶部和底部元素使用两个不同的背景图像。使用[http://www.stripegenerator.com](http://www.stripegenerator.com)作为基本条纹背景，然后使用您选择的图像编辑器创建渐变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T20:37:52.257

这可能会让你朝着正确的方向开始。这是可能的，但很乏味：

[**演示**](http://jsfiddle.net/YB9vC/1/)

您可以轻松地交换颜色。但是，我无法获得对角线的不透明度渐变。

请参阅[此处](http://ptrn.it/10tcDp5)以构建线条的 CSS。

# c# - 如何为与数据库接口的类提供连接字符串？

> ID：14075159
> 
> 赞同：1
> 
> 时间：2012-12-28T20:09:21.577
> 
> 标签：c#, events, connection, connection-string

我正在尝试用 C# 进行数据访问。我正在编写一个类，该类具有一个`Save(object o)`方法，它将循环遍历对象的每个属性并使用属性将它们与数据库匹配。

我的问题是我的班级需要获取连接字符串，但我希望用户提供它。基本上，我不希望它仅限于配置文件。到目前为止，这是我的想法：

*   在用户通过自定义类提供字符串的每个连接之前触发一个事件（类似于通过事件`EventArgs`向 ASP.NET 提供自己的对象实例的方式）`ObjectDataSource``ObjectCreating`
*   我的数据访问类中的一个属性
*   两者的结合，如果事件没有订阅者，它与属性的值一起使用

我只是想知道还有哪些其他可能性以及在这种情况下最好的策略是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T20:15:16.787

一个事件不会是自然的，因为如果不是一个订阅者，您的代码就会中断。事件适用于订阅者数量与类引发事件无关的用例。

使用属性或接口（如`IConnectionProvider`）注入连接字符串。接口版本非常适合与 DI 容器一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T20:56:34.727

与 usr 半同意，无论你走哪条路，你都需要创建一个 IConnectionProvider。

但是，我认为这取决于您希望允许开发人员使用您的课程有多大的灵活性。

你会强制你的类的每个实例都有一个全局连接，该连接将保持不变并用于需要访问数据库的所有方法调用？如果是这样，那么您的类需要在其构造函数中采用 IConnectionProvider。

您是否想提醒开发人员并让他们在您的类状态发生变化时灵活地更改连接？如果是这样，那么提供事件可能是一个不错的选择。

您的类是静态的还是您想强制开发人员提供与方法调用不同的连接？然后，每个方法都应采用 IConnectionProvider。

你需要决定你想为你的班级提供多大的灵活性，并据此做出选择。

如果您想允许极大的灵活性和自定义，您可能需要研究 lambda 表达式。使用它们，您可以允许开发人员提供您将在代码中的某个位置调用的方法。使用 lambda 表达式，我能够通过编写通用数据库方法来整合代码，其中调用者只需提供代码来读取我为它们设置的 IDataReader 并处理捕获任何异常以及关闭和处置所需的任何数据库对象.

**编辑**：这是我为合并连接代码所做的示例。

```
 public static T ExecuteReader<T>(IDbConnection connection, string commandText, Func<IDataReader, T> readData) where T : class
    {
        IDbCommand command = connection.CreateCommand();
        command.CommandText = commandText;

        try
        {
            connection.Open();
            IDataReader reader = command.ExecuteReader();
            T returnValue = readData(reader); //Call the code provided by the caller and get the return object.

            reader.Close();
            reader.Dispose();

            return returnValue; //Return their return object.
        }
        finally
        {
            if (command != null)
            {
                command.Dispose();
            }
            if (connection != null)
            {
                try
                {
                    if (connection.State != ConnectionState.Closed)
                    {
                        connection.Close();
                    }
                }
                finally
                {
                    connection.Dispose();
                }
            }
        }
    } 
```

示例用法：

```
MyDataList.AddRange(
    Database.ExecuteReader<List<MyDataModel>>( //Tell ExecuteReader what type of object to return
    connection, //Pass in the connection
    commandString, //Pass in the command
    delegate(IDataReader reader) //This code is called from inside the ExecuteReader method.
    {
        List<MyDataModel> List = new List<MyDataModel>();
        while (reader.Read())
        {
            //Read each record, transform it into MyDataModel, then add it to the List.
        }
        return List;
    }
})); 
```

创建通用 ExecuteReader 方法是因为用于创建命令、打开连接和处理所有命令的代码保持不变并为每个对象复制。这可以防止不必要的代码复制。唯一真正改变的是如何将对象从 IDataReader 转换为类，以便 ExecuteReader 方法的调用者能够提供将执行其特定转换的代码。

这对您来说可能不是真的，因为您正在 1:1 映射您的对象并提供一种自动转换它们的方法，但就我而言，我无法依赖它。

# mysql - Amazon RDS MySQL 实例上的 DROP 和 CREATE

> ID：14075160
> 
> 赞同：5
> 
> 时间：2012-12-28T20:09:23.583
> 
> 标签：mysql, amazon-web-services, amazon-rds

连接到我的 MySQL RDS Amazon 实例并在数据库上运行和运行是否安全`DROP`（`CREATE`基本上是重新创建数据库）？

例子：

```
DROP DATABASE <db_name>;
CREATE DATABASE <db_name>; 
```

我只是担心会擦除一些背景“指纹”，例如数据库备份等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T22:15:30.103

由于保留实例而不是数据库（或数据库），因此将备份实例上的所有数据库。

注意，只有 InnoDB 表会在自动备份中被备份。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T21:18:38.963

我认为这不会对备份造成任何麻烦。

# c# - C#中的主线程

> ID：14075163
> 
> 赞同：-6
> 
> 时间：2012-12-28T20:09:46.970
> 
> 标签：c#, multithreading

我看到这样的代码：

```
Thread.Sleep(); 
```

但从来没有看到“线程”声明。'Thread' 是指 C# 中的主线程吗？我见过在使用之前声明的其他线程对象，但不是这个。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-28T20:11:12.510

这是`System.Threading.Thread`类的静态方法。它在当前线程上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T20:11:39.247

线程是~~静态~~密封类。

Thread.Sleep() 阻塞当前线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T20:23:07.300

> 'Thread' 是否指 C# 中的主线程

是的，它是您正在处理的主线程，并且`Thread.Sleep()`是`System.Threading.Thread`类的静态方法。

# c# - 使用哪个动词向服务器发送“ResetCache”命令

> ID：14075165
> 
> 赞同：0
> 
> 时间：2012-12-28T20:10:38.407
> 
> 标签：c#, wcf, asp.net-web-api, httpverbs

我正在将 WCF 应用程序迁移到 WEB.API 应用程序。

WCF 中实现的调用之一是“ResetCache”。

出于性能原因，在服务器上维护了一个简单的缓存（没有缓存，每次传入呼叫都必须从数据库中获取数据）。因此，在第一次获取数据后，数据存储在缓存中......工作正常。

有时，在进行更改后，需要刷新缓存。完成的一种方法是（出于测试目的）使用对服务器的调用... RefreshState。在当前的 WCF 解决方案中，它使用 POST。

使用 RESTfull WEB.API，我无法确定使用哪个动词或 url 来激活服务器上的此操作。这不是一个获取，它不是一个帖子，......等等。

有人对此有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T20:18:44.493

我建议使用 DELETE 和类似于：`http://target/ext/cache`或`http://target/ext/cache/contents`可能的 url。删除缓存内容后，我假设对您的服务的下一次调用将开始重新填充缓存。

# javascript - 运行有限循环动画的更好方法

> ID：14075166
> 
> 赞同：1
> 
> 时间：2012-12-28T20:10:45.770
> 
> 标签：javascript, jquery, css-transitions

首先，[这段代码](http://jsfiddle.net/edelman/NWZpk/)虽然丑陋，但适用于所有意图和目的。然而，它真的让我看着又恶心又生气。

对于懒惰的人来说，糟糕的代码的主要部分是：

```
setTimeout(function() {
    toggle(); //off
    setTimeout(function() {
        toggle(); //on
        setTimeout(function() {
            toggle(); //off
            setTimeout(function() {
                toggle(); //on, stays for stallTime
                setTimeout(function() {
                    toggle(); //off
                    callback();
                }, stallTime);
            }, 300);
        }, 300);
    }, 300);
}, 300); 
```

当然，我喜欢通过更改元素上的 CSS 类来控制我的动画。然而，`transitionend`等等`webkitTransitionEnd`，至少是不可靠的。我是否被迫诉诸这种可怕的代码？理想情况下，我希望能够设置可变数量的“闪烁”，但是这段代码太乏味了。

请救我脱离我的污秽。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T20:15:30.317

```
var count = 5;
var i = setInterval(function() {
    toggle();
    count--;
    if(count == 0) {
        clearInterval(i);
        callback();
    }
}, 300); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T20:58:34.910

为了避免`setInterval`，我写了一个递归函数：

```
// link.addClass('hover'); //on - no longer needed

flash = function(count) {
    if (count > 1) {
        setTimeout(function() {        
            toggle();
            flash(count - 1);
        }, 300);
    } else {
        setTimeout(function() {
            toggle(); //off
            callback();
        }, stallTime);            
    }                
}

flash(6); // 2 * the number of flashes. 
```

# mysql - Mysql：使用最后一个左连接结果过滤主查询

> ID：14075167
> 
> 赞同：0
> 
> 时间：2012-12-28T20:10:48.530
> 
> 标签：mysql, join, group-concat

我有一个用户数据库、一个帖子数据库和一个 PostPermissions 数据库。

数据库方案（您需要知道才能理解）是这样的：

邮政：

```
id :int(11) | description :varchar(255) | creator_user_id :int(11) 
```

发布权限：

```
id :int(11) | post_id :int(11) | entity_id :int(11) | permission :tinyint(1) (bool) | orderby tinyint(4) 
```

因此，在 PostPermissions 中我们可以拥有不同类型的权限，但这已经奏效了。

我在我的 MySQL Query 上做了这样的事情：

```
SELECT Post.id
FROM posts as Post
    LEFT JOIN post_permissions AS PostPermission
    ON Post.id = PostPermission.post_id
WHERE Post.creator_user_id = 4
GROUP BY Post.id HAVING GROUP_CONCAT(PostPermission.permission) like "%1" 
```

但是有两个问题，`GROUP_CONCAT(PostPermission.permission)`将检索所有帖子的所有权限值，如果我放`GROUP_CONCAT(DISTINCT PostPermission.permission)`它只会检索一个零和一个由第一个被捕获的排序的......

有什么方法可以只处理与帖子匹配的最后一行 PostPermissions（因为它们已经被排序）？

# html - jQuery.post 给出错误

> ID：14075170
> 
> 赞同：-1
> 
> 时间：2012-12-28T20:11:20.920
> 
> 标签：html, ajax, jquery

我试图让这段代码工作，但它给了我一个错误。它似乎没有执行。

```
jQuery.post("getResults.php", {id:id} , function(data)
        {
            jQuery("select#kDate").removeAttr("disabled");
            jQuery("select#kDate").html(data);
        })
        .success(function() { alert("second success"); })
        .error(function() { alert("error"); })
        .complete(function() { alert("complete"); });
     }); 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T20:14:27.177

误差函数有3个参数......

```
 error(jqXHR, textStatus, errorThrown) 
```

试试这个：

```
error(function(xhr, status, detail) { alert("error ("+status+") : " + detail); }); 
```

文档在这里：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T20:22:51.927

试试这个：你也可以[在这里](http://api.jquery.com/jQuery.post/)看到。

```
var id = "some-value";
jQuery.post("getResults.php?id="+id, function(data) {
  jQuery("select#kDate").removeAttr("disabled");
  jQuery("select#kDate").html(data);
})
.success(function() { alert("second success"); })
.error(function() { alert("error"); })
.complete(function() { alert("complete"); }); 
```

# html - CSS 显示和隐藏孩子和父母

> ID：14075171
> 
> 赞同：0
> 
> 时间：2012-12-28T20:11:27.143
> 
> 标签：html, css

我有 3 个级别的列表。我只想显示 li 的选项框。不是任何孩子的选项，也不是任何父母的选项框。目前，当我走下树时，父母会一直悬停，这是有道理的，但不是我想要的。我该怎么做呢？

[http://jsfiddle.net/tGQUa/3/](http://jsfiddle.net/tGQUa/3/)

HTML

```
<ul class="firstLevel">
<li>
    <label>Test 1</label>
    <div class="options">
        <a href="">Delete</a>
        <a href="">Add</a>
    </div>

    <ul class="secondLevel">
        <li>
            <label>Test 2</label>
            <div class="options">
                <a href="">Delete</a>
                <a href="">Add</a>
            </div>

            <ul class="thirdLevel">
                <li>
                    <label>Test 3</label>
                    <div class="options">
                        <a href="">Delete</a>
                        <a href="">Add</a>
                    </div>
                </li>
            </ul>
        </li>
    </ul>
</li> 
```

​</p>

CSS

```
ul.secondLevel {margin-left:15px;}
ul.thirdLevel {margin-left:15px;}

ul.firstLevel li .options{
    display: none;
}
ul.firstLevel li:first-child:hover > .options{
    display: inline-block;
}
ul.secondLevel li .options{
   display: none;
}
ul.secondLevel li:first-child:hover > .options{
    display: inline-block;
}
ul.thirdLevel li .options{
    display: none;
}
ul.thirdLevel li:first-child:hover > .options{
    display: inline-block;
}

.options {
    display: inline;
    font-size: 10px;
    font-weight: normal;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T04:40:15.750

你能试试“下一个兄弟”`+`选择器吗？

```
.options { display: none }

.options:hover,
label:hover + .options { display: inline-block } 
```

并且通过一些伪元素技巧和巧妙的定位，您可以实现纯 CSS 解决方案：

[http://jsfiddle.net/ryanwheale/tGQUa/10/](http://jsfiddle.net/ryanwheale/tGQUa/10/)

# android - Android：如何重用具有动态项目数和多个布局的列表视图项目

> ID：14075178
> 
> 赞同：0
> 
> 时间：2012-12-28T20:12:07.880
> 
> 标签：android, android-listview

当我尝试在具有多个自定义布局的 ListView 中重用视图时，会出现问题。当我更改项目数量时，我得到错误的 convertView 被传递给 getView 方法。详细说明：我有一个页眉布局、一个行布局和一个页脚布局。在标题中，我可以更改行数。1 行的示例：页眉 row1 页脚 当我重用视图时，我得到错误的结果（添加另一行后）。发生这种情况是因为先前创建的页脚视图是为 position = 2 传递的，并且由于它不是 null 我不重新创建它： Header row1 Footer Footer

而不是预期：标题 row1 row2 页脚

我究竟做错了什么？还是设计使然，我应该重新创建视图而不是重用它们？这是我的代码：

```
public class NewProgramAdapter extends BBBaseAdapter {

public static int TYPE_HEADER = 1;
public static int TYPE_FORM = 2;
public static int TYPE_FOOTER = 3;

protected String mDays;
protected String mProgramId;
protected int currentDay = 0;
protected int numberOfExercises = 1;
protected JSONArray items = new JSONArray();

public NewProgramAdapter(Activity a) {
    super(a);
    // TODO Auto-generated constructor stub
}

@Override
public int getCount() {
    return numberOfExercises + 2; // header and footer
}

@Override
public Object getItem(int position) {
    return position;
}

@Override
public long getItemId(int position) {
    return position;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {

    if (position > 0 && position < getCount() - 1) {
        return getFormView(position, convertView, parent);
    } else if (position == 0) {
        return getHeaderView(position, convertView, parent);
    } else {
        return getFooterView(position, convertView, parent);
    }
}

private View getFooterView(int position, View convertView, ViewGroup parent) {
    View v = convertView;
    if (v == null) {
        LayoutInflater inflater = mA.getLayoutInflater();
        v = inflater.inflate(R.layout.new_exercise_footer, null);
    }
    return v;
}

private View getHeaderView(int position, View convertView, ViewGroup parent) {
    View v = convertView;
    if (v == null) {
        LayoutInflater inflater = mA.getLayoutInflater();
        v = inflater.inflate(R.layout.new_exercise_header, null);
        Spinner sp = (Spinner) v.findViewById(R.id.spinnerExercises);
        sp.setOnItemSelectedListener(new OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView<?> parentView,
                    View selectedItemView, int position, long id) {
                int n = position + 1;
                setNumberOfExercises(n);
            }

            @Override
            public void onNothingSelected(AdapterView<?> parentView) {
                // your code here
            }

        });
    }
    return v;
}

private View getFormView(int position, View convertView, ViewGroup parent) {

    View v = convertView;
    if (v == null) {
        LayoutInflater inflater = mA.getLayoutInflater();
        v = inflater.inflate(R.layout.new_exercise_form, null);
    }
    return v;
}

@Override
public int getItemViewType(int position) {
    if (position > 0 && position < getCount() - 1) {
        return TYPE_FORM;
    } else if (position == 0) {
        return TYPE_HEADER;
    } else {
        return TYPE_FOOTER;
    }
}

@Override
public void updateEntries(Object data) {
    items = (JSONArray) data;
    notifyDataSetChanged();
}

public void next() {
    currentDay++;
    notifyDataSetChanged();
}

public void setNumberOfExercises(int n) {
    numberOfExercises = n;
    notifyDataSetChanged();
}

public void setDays(String string) {
    mDays = string;
}

public void setProgramId(String string) {
    mProgramId = string;
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T20:13:53.963

看起来您忘记覆盖[`getViewTypeCount()`](http://developer.android.com/reference/android/widget/BaseAdapter.html#getViewTypeCount%28%29)告诉适配器使用多个行布局。

但是，如果您只想要页眉、页脚和行布局，那么您应该使用[`ListView#addHeaderView()`](http://developer.android.com/reference/android/widget/ListView.html#addHeaderView%28android.view.View%29)and [`ListView#addFooterView()`](http://developer.android.com/reference/android/widget/ListView.html#addFooterView%28android.view.View%29)。不要试图控制页眉和页脚是您的适配器，ListView 已经为您做到了。

# php - 语法问题 - 如果进行了另一个选择，则隐藏和显示选择器

> ID：14075184
> 
> 赞同：1
> 
> 时间：2012-12-28T20:12:40.900
> 
> 标签：php, jquery, css-selectors

我被这段代码困住了。无论如何，它应该可以工作，我已经盯着它看了 2 个小时，我不知道出了什么问题。

我在 div 中有两个选项。当使用正确的父 ID 选择一个时，应该出现子类别，尽管我觉得我做得很好，但由于某种原因它不会出现 - 这是我的主页的 html/php：

```
<li>
            <label for="Catid">Pick a Category:</label>
            <select id="Catid">
              <?php
                  $Products = New Products();
                  $Products->form_Cat_Picker();
                ?>
            </select>
          </li>
          <li>
            <label for="Subcatid">Sub Category:</label>
              <?php
                  $Products = New Products();
                  $Products->form_Subcat_Picker();
                ?>
          </li>
          <script type="text/javascript">
            $(document).ready(function() {
                $('#Catid').change(function(){
                    var optvalue = $(this).val(),
                    div = $('#' + 'parentid' + optvalue);
                    $('div').hide();
                    div.show();
                });
            });​
          </script>
          <li> 
```

这是两个功能：

```
function form_Cat_Picker() {
    $mysqli = new mysqli(DB_SERVER, DB_USER, DB_PASSWORD, DB_NAME);
    if (!$mysqli) {
        die('There was a problem connecting to the database.');
    }       
    $catPicker = "SELECT Catid, Catname
            FROM ProductCats
            ORDER BY Catid";
    if ($Result = $mysqli->query($catPicker)){
        if (!$Result) {
            echo 'Could not run query: ' . mysql_error();
            exit;
        }
        echo '<option value="">'.''.'</option>';
        while ($row = $Result->fetch_assoc()) {
            echo '<option value="'.$row["Catid"].'">'.$row["Catname"]."</option>";
            echo '</div>';
        }
    }
    $mysqli->close();
}
function form_Subcat_Picker() {
    $mysqli = new mysqli(DB_SERVER, DB_USER, DB_PASSWORD, DB_NAME);
    if (!$mysqli) {
        die('There was a problem connecting to the database.');
    }       
    $catPicker = "SELECT Subcatid, Subcatname, Parentid
            FROM ProductSubCats
            ORDER BY Subcatid";
    if ($Result = $mysqli->query($catPicker)){
        if (!$Result) {
            echo 'Could not run query: ' . mysql_error();
            exit;
        }
        $counter = 0;
        while ($row = $Result->fetch_assoc()) { 
            if ($counter >= 1) {
                if ($last_id != $row['Parentid']){
                    echo '</select>';
                    echo '</div>';
                }
            }
            if ($last_id != $row['Parentid']){
                    echo '<div id="parentid'.$row['Parentid'].'" style="display:none">';
                    echo '<select id="Subcatid">';
                }
            echo '<option value="'.$row["Subcatid"].'">'.$row["Subcatname"]."</option>";
            $last_id = $row['Parentid'];
            $counter++;
        }
        echo '</select>';
        echo '</div>';
    }
    $mysqli->close();
} 
```

这些输出如下：

```
<li>
<label for="Catid">Pick a Category:</label>
<select id="Catid">
<option value=""/>
<option value="1">Sample 1</option>
<option value="2">Sample 2</option>
<option value="3">Sample 3</option>
<option value="4">Sample 4</option>
<option value="5">Sample 5</option>
<option value="6">Sample 6</option>
<option value="7">Sample 7</option>
</select>
</li>
<li>
<label for="Subcatid">Sub Category:</label>
<div id="parentid1" style="display: none;">
<select id="Subcatid">
<option value="1">Sub Sample 1</option>
<option value="2">Sub Sample 2</option>
</select>
</div>
</li> 
```

所以输出看起来不错。jquery 似乎是正确的。但是当我尝试运行它时 - 选择 Sample 1 时不会出现 div id parentid1 。

我会失明还是我做错了什么？谢谢

编辑

甚至可以在 jfiddle 中工作：http: [//jsfiddle.net/VGDwm/](http://jsfiddle.net/VGDwm/) 我正确调用了 jquery 库：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"/> 
```

有什么问题？jquery 应该在 div 之后还是之前？或者这是从php调用的问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T21:12:14.630

1.  不要每个函数都重新连接到数据库
2.  重新键入 jquery 的最后一行，它的末尾有一个隐藏字符。

所以这里突出显示的行：

```
 <script type="text/javascript">
        $(document).ready(function() {
            $('#Catid').change(function(){
                var optvalue = $(this).val(),
                div = $('#' + 'parentid' + optvalue);
                $('div').hide();
                div.show();
            });
        });​    <----- THIS LINE ------>
      </script> 
```

# c# - 具有自定义服务类型的 TCP Socket

> ID：14075190
> 
> 赞同：-1
> 
> 时间：2012-12-28T20:13:03.083
> 
> 标签：c#

我是一个新的 C# 开发人员（我来自 obj-c），我正在使用 Objective-c 创建一个类型为 ( `initWithDomain:@"local." type:@"_nameOfServer._tcp." name:@"nameOfServer" port:1234`) 的 TCP 套接字，我想创建一个使用 " type" 值（我想要它，因为我开发了一个 iPhone 应用程序，它使用 type 值搜索 TCP 服务器）。

任何想法（类，代码等）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T20:39:13.867

很确定这不可能在基于 .Net 的套接字服务器中重现。此`type`参数特定`NSNetService`于 Cocoa 中的类。

[https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSNetService_Class/Reference/Reference.html#//apple_ref/occ/instm/NSNetService/type](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSNetService_Class/Reference/Reference.html#//apple_ref/occ/instm/NSNetService/type)

# php - url/mod_rewrite 问题

> ID：14075192
> 
> 赞同：0
> 
> 时间：2012-12-28T20:13:10.730
> 
> 标签：php, apache

我有 3 个目录级别的页面、城市、类别和业务

例如纽约/餐厅/麦当劳。

所以我有city.php、category.php和business.php

例如 city.php?url=new-york、category.php?url=new-york/restaurants 和 business.php?url=mcdonalds

我将如何创建一个 mod_rewrite 来制作：/new-york、/new-york/restaurants 和 /mcdonalds

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T20:22:02.817

尝试这个

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-s
RewriteRule ^/new-york/(.*)$ category.php?url=new-york/$2 [L] 
```

# c++ - 黑白读写BMP C++

> ID：14075193
> 
> 赞同：2
> 
> 时间：2012-12-28T20:13:24.067
> 
> 标签：c++, image, bitmap, pixel, bmp

> **可能重复：**
> [C++：在 Windows 上使用 C++ 读写 BMP 文件的最简单方法是什么？](https://stackoverflow.com/questions/199403/c-whats-the-simplest-way-to-read-and-write-bmp-files-using-c-on-windows)

所以，我是一个相对初学者，想读入位图图像并获取它们各自的像素值（黑色为 0，白色为 1）并将它们放入数组中。我已经对此进行了研究，但是在处理标题和所有内容方面，一切都非常先进。我完全愿意使用新库或任何 Windows 命令。同样在阅读之后，我希望能够创建一个具有相同值的 bmp（但不仅仅是复制）。只需简单的命令或从某个地方开始就可以了。我的计划是逐个像素地读写。先感谢您 ：）

# c++ - C 和 C++ 中的可变长度数组 (VLA)

> ID：14075194
> 
> 赞同：12
> 
> 时间：2012-12-28T20:13:30.407
> 
> 标签：c++, c, arrays, variable-length-array

我有一些关于[VLA](http://en.wikipedia.org/wiki/Variable-length_array)及其行为的概念需要澄清。

自 C99 以来的 AFIK 可以将 VLA 声明为本地范围：

```
int main(int argc, char **argv)
{
    // function 'main' scope
    int size = 100;
    int array[size];
    return 0;
} 
```

但在全局范围内是禁止的：

```
const int global_size = 100;
int global_array[global_size]; // forbidden in C99, allowed in C++

int main(int argc, char **argv)
{
    int local_size = 100;
    int local_array[local_size];
    return 0;
} 
```

上面的代码在 C99 中声明了一个 VLA，因为`const`修饰符不会创建编译时值。在 C++`global_size`中是编译时值，因此`global_array`不会成为 VLA。

我需要知道的是：我的推理是否正确？我描述的行为是否正确？

我也想知道：为什么不允许全局范围内的 VLA？在 C 和 C++ 中都被禁止？数组进入全局和局部范围的行为不同的原因是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-28T23:22:46.373

是的，您的推理是正确的，这就是 C 和 C++ 看待这些不同形式的数组声明和定义的方式。

正如其他人已经说过的那样，`const`在全局范围内具有真正可变长度（非）的 VLA 很难理解。评估顺序是什么，例如，如果长度表达式将引用不同编译单元的对象？C++ 没有 VLA，但它在文件范围内动态初始化对象。如果您必须依赖评估顺序，这已经让您非常头疼。

这为 C 留下了关于包含`const`限定对象的长度表达式的小差距，这是不允许的。这是因为此类对象不被 C 标准视为“整数常量表达式”。这可能会在未来的版本中改变，但到目前为止，C 委员会还没有发现有必要允许这样的事情：在 C 中有一些`enum`常量扮演着这个角色。它们唯一的限制是它们仅限于`int`在 C 中，也有它们会很好`size_t`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-28T20:37:14.420

C++ 不支持 VLA，句号。第二个代码片段在 C++ 中起作用的原因是该`const`关键字在 C++ 中创建了一个编译时常量；在 C 中，它没有。

无论您如何声明大小变量，C99 都不支持块范围之外的 VLA。请注意，C2011 使 VLA 支持可选。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-28T20:29:36.667

禁止和不允许是有区别的。;-)

VLA 功能旨在允许将堆栈空间用于本地数组，以避免使用 malloc 进行堆分配。它主要是速度优化。

现在您想在函数之外使用 VLA。为什么？在程序启动期间避免单个 malloc 调用并没有什么可以快速赢得的。我们应该为具有静态生命周期的变量使用什么堆栈空间？

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-28T20:37:08.797

我认为根本原因是全局变量具有链接，它的大小必须在编译时知道。如果不是，如何链接程序？

局部变量没有链接，并且 VLA 分配在堆栈上，堆栈随着程序运行而动态增长。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-28T21:08:22.350

因此，对于全球 VLA，其中一个问题（主题有很多变体）可以在这里显示：

```
int size;
int a;
int v[size];
int b; 
```

....在另一个文件中：

```
extern int a;
extern int b; 
```

链接器必须知道 a 和 be 在链接时彼此相关的位置，否则将无法在加载时正确修复它们。

# java - org.apache.jasper.JasperException: java.lang.IllegalStateException: getOutputStream() 已经为此响应调用

> ID：14075195
> 
> 赞同：1
> 
> 时间：2012-12-28T20:13:30.157
> 
> 标签：java, jsp, jasper-reports

运行 JSP 时出现以下*Tomcat错误。*我知道错误是什么我只是不知道为什么我得到它：

```
type Exception report
message org.apache.jasper.JasperException: java.lang.IllegalStateException: getOutputStream() has already been called for this response
description The server encountered an internal error that prevented it from fulfilling this request.
exception 
org.apache.jasper.JasperException: org.apache.jasper.JasperException: java.lang.IllegalStateException: getOutputStream() has already been called for this response
    org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:549)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:455)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.displaytag.filter.ResponseOverrideFilter.doFilter(ResponseOverrideFilter.java:125)
root cause 
org.apache.jasper.JasperException: java.lang.IllegalStateException: getOutputStream() has already been called for this response
    org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:549)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:465)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.apache.jasper.runtime.PageContextImpl.doForward(PageContextImpl.java:746)
    org.apache.jasper.runtime.PageContextImpl.forward(PageContextImpl.java:716)
    org.apache.jasper.runtime.PageContextImpl.doHandlePageException(PageContextImpl.java:868)
    org.apache.jasper.runtime.PageContextImpl.handlePageException(PageContextImpl.java:841)
    org.apache.jsp.Ref.RefReportCntrl_jsp._jspService(RefReportCntrl_jsp.java:630)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.displaytag.filter.ResponseOverrideFilter.doFilter(ResponseOverrideFilter.java:125)
root cause 
java.lang.IllegalStateException: getOutputStream() has already been called for this response
    org.apache.catalina.connector.Response.getWriter(Response.java:640)
    org.apache.catalina.connector.ResponseFacade.getWriter(ResponseFacade.java:214)
    org.apache.jasper.runtime.JspWriterImpl.initOut(JspWriterImpl.java:125)
    org.apache.jasper.runtime.JspWriterImpl.flushBuffer(JspWriterImpl.java:118)
    org.apache.jasper.runtime.PageContextImpl.release(PageContextImpl.java:190)
    org.apache.jasper.runtime.JspFactoryImpl.internalReleasePageContext(JspFactoryImpl.java:126)
    org.apache.jasper.runtime.JspFactoryImpl.releasePageContext(JspFactoryImpl.java:80)
    org.apache.jsp.Ref.refverify_005ferr_jsp._jspService(refverify_005ferr_jsp.java:124)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.apache.jasper.runtime.PageContextImpl.doForward(PageContextImpl.java:746)
    org.apache.jasper.runtime.PageContextImpl.forward(PageContextImpl.java:716)
    org.apache.jasper.runtime.PageContextImpl.doHandlePageException(PageContextImpl.java:868)
    org.apache.jasper.runtime.PageContextImpl.handlePageException(PageContextImpl.java:841)
    org.apache.jsp.Ref.RefReportCntrl_jsp._jspService(RefReportCntrl_jsp.java:630)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.displaytag.filter.ResponseOverrideFilter.doFilter(ResponseOverrideFilter.java:125) 
```

在 JSP 的顶部，我有以下几行：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1"%>
<%@ page import="java.util.*,org.apache.log4j.Logger" %>
<%@ page isErrorPage="false" errorPage="refverify_err.jsp" %>
<%@ page trimDirectiveWhitespaces="true" %>
<%@ page session="true" %>
<jsp:useBean id="da" class="reports.DemographicAge"/> 
```

稍后在同一个 JSP 中，我调用了一个最终调用 jasper-reports 的方法：

```
if(sectionA.equalsIgnoreCase("Demographics - Age")) {
     result = da.convertDtosToXml(host, parameters, response, pathToweb);
} 
```

HttpServletResponse 对象“response”被传递给在调用过程中发生错误的以下方法`JasperExportManager.exportReportToPdfStream()`：

```
package reports;

import dao.DemographicsAgeDao;

import java.io.File;
import java.io.IOException;
import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;
import java.sql.SQLException;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Date;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.Set;

import javax.servlet.ServletOutputStream;
import javax.servlet.http.HttpServletResponse;

import net.sf.jasperreports.engine.JRException;
import net.sf.jasperreports.engine.JasperCompileManager;
import net.sf.jasperreports.engine.JasperExportManager;
import net.sf.jasperreports.engine.JasperFillManager;
import net.sf.jasperreports.engine.JasperPrint;
import net.sf.jasperreports.engine.JasperReport;
import net.sf.jasperreports.engine.design.JasperDesign;
import net.sf.jasperreports.engine.xml.JRXmlLoader;

public class DemographicAge {

    private String generateDemographicAgeReport(ResultDataSource ds, Map parameters, 
                                                HttpServletResponse response, String host, 
                                                String path) throws RefugeeException {
        String relativePath = path + "/Demographics_Age.xml";
        String logo_path = path + "/logo.jpg";
        File fin = new File(relativePath);

        JasperReport jasperReport = null;
        JasperDesign jasperDesign;
        try {
            jasperDesign = JRXmlLoader.load(fin);
            jasperReport = JasperCompileManager.compileReport(jasperDesign);
        } catch (JRException e) {
            e.printStackTrace();
        }

        parameters.put("Report Title", "Health Assessment Report");
        parameters.put("Sub Title", "Reported by " + (String) parameters.get("colname"));
        parameters.put("logo", logo_path);

        JasperPrint jasperPrint = null;
        try {
            //Fill the JasperPrint object with the report data 
            jasperPrint = JasperFillManager.fillReport(jasperReport, parameters, ds);

            //Create a unique filename using date/time
            String date1 = new SimpleDateFormat("yyyy-MM-dd_HH-mm-ss").format(new Date());
            String fileName = "attachment; filename=\"DemographicsAgeReport_" + date1 + ".pdf\"";

            //Set the HTTP response header information
            response.setHeader("Content-disposition", fileName);
            response.setContentType("application/pdf");
            try {
                ServletOutputStream stream = response.getOutputStream();
                JasperExportManager.exportReportToPdfStream(jasperPrint, stream);
                stream.flush();
                stream.close();
            } catch (IOException e) {
                throw new RefugeeException("IO Exception while writing the content into PDF.", e.getMessage());
            }
        } catch (JRException e) {
            throw new RefugeeException("Jasper exception while filling the report", e.getMessage());
        }
        return "success";
    }
} 
```

我已经查看了以下 Stack Overflow 帖子，但仍需要一些有关如何解决此问题的指导：

[使用 PrintWriter 和 OutputStream](https://stackoverflow.com/questions/2071075/using-printwriter-and-outputstream)

[java.lang.IllegalStateException：调用 JasperReport 时已为此响应调用 getOutputStream()](https://stackoverflow.com/questions/13682692/java-lang-illegalstateexception-getoutputstream-has-already-been-called-for-t)

[已为此响应调用 getOutputStream()](https://stackoverflow.com/questions/1776142/getoutputstream-has-already-been-called-for-this-response)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:53:51.087

发布的 Tomcat 错误是一个批评者。我的代码有一个用于异常的 try/catch 块，其中包括对自定义错误 jsp 页面 (RefReportCntrl_jsp.java) 的调用。当 RefReportCntrl_jsp.java 试图将字符数据推送到当前作为比特流打开的响应流时，它导致了第二个错误，该错误记录在错误日志中。

在引发第二个异常之前，通过查看 RefReportCntrl_jsp.java 显示的异常字符串发现了真正的错误。

真正的错误是该项目使用的是旧版本的 Jasper 和新版本的 iText。当 Jasper 在 iText 中调用一个不再以该名称存在的方法时，它会引发方法未找到异常。

# java - Java小程序中的多个jAppletForm

> ID：14075201
> 
> 赞同：0
> 
> 时间：2012-12-28T20:14:23.123
> 
> 标签：java, swing, applet, frame, japplet

我在 NetBeans 中创建了一个没有主类的新 Java 项目，然后在`MainWindow.java`我的项目包中添加了一个 jApplet 表单（我们称之为）。之后，我使用 NetBeans 的 GUI 构建器将代表我的 applet 应用程序的不同“页面”的其他几个 jApplet 表单添加到我的包中。

当我运行我的小程序时，我可以`MainWindow`在 AppletViewer 上看到带有一些按钮、标签等的表单。

现在，我想在按下我的一个按钮时创建一个事件`MainWindow`，以显示我之前创建的另一个 jApplet 表单并显示该表单而不是 MainWindow 表单。我正在尝试在我的 jApplet 中创建一个简单的导航系统，但我不知道如何有效地实现它！

谁能帮助我编写我应该在按钮的 MouseClicked 事件中编写的代码以使其显示另一种形式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T20:30:37.037

基本上，您不能（或不应该）设计这样的小程序。没有从一个小程序切换到另一个小程序的有效方法。

相反，您应该创建一个主小程序并使用类似的东西，使用类似的东西`CardLayout`设计单独的表单`JPanel`

`CardLayout`然后，您可以根据需要使用管理器切换表格

# c# - 复杂的 XML 结构难以使用 LINQ to XML 查询

> ID：14075203
> 
> 赞同：0
> 
> 时间：2012-12-28T20:14:29.077
> 
> 标签：c#, linq, linq-to-xml

一位同事在尝试查询时遇到了一个非常不寻常的 XML 文件的问题，在尝试帮助他之后，我和其他人有点创意障碍....看看这个，它可能会感兴趣这里很多人......

结构：

```
<Root>
 <MainFoo>
     <Foo>
        <A bla="bla" />
        <B bla1="blablabla" />
        <C bla2="blabla" />
        <Bar N="Education" V="Some Text" />
        <Bar N="Other Node" V="Some other Text" />
        <Bar N="Yet Other Node" V="Some other other Text" />
        <Bar N="fourth Bar Node" V="Some other other otherText" />
        <Bar N="UserID" V="1" />
     </Foo>
     <Foo>
        <A bla="bla" />
        <B bla1="blablabla" />
        <C bla2="blabla" />
        <Bar N="Education" V="Specific Text" />
        <Bar N="Other Node" V="Some other Text" />
        <Bar N="Yet Other Node" V="Some other other Text" />
        <Bar N="fourth Bar Node" V="Some other other otherText" />
        <Bar N="UserID" V="2" />
     </Foo>
     <Foo>
        <A bla="bla" />
        <B bla1="blablabla" />
        <C bla2="blabla" /> <!--***No Bar node with N="Education" in this Foo Node, not a mistake! this might be part of the problem but this is the XML Structure and can't be changed***-->
        <Bar N="Other Node" V="Some other Text" />
        <Bar N="Yet Other Node" V="Some other other Text" />
        <Bar N="fourth Bar Node" V="Some other other otherText" />
        <Bar N="UserID" V="3" />
     </Foo>
     <Foo>
        <A bla="bla" />
        <B bla1="blablabla" />
        <C bla2="blabla" />
        <Bar N="Education" V="Specific Text" />
        <Bar N="Other Node" V="Some other Text" />
        <Bar N="Yet Other Node" V="Some other other Text" />
        <Bar N="fourth Bar Node" V="Some other other otherText" />
        <Bar N="UserID" V="4" />
     </Foo>
 </MainFoo>
 <OtherMainFoo></OtherMainFoo>
 <MoreMainFoo></MoreMainFoo>
</Root> 
```

好的，现在解决手头的问题：我们正在尝试使用 LINQ to XML 将**每个用户节点的每个用户 ID 值**转换为每个**Foo 元素的字符串** ***IF***此 Foo 中有一个**Bar 节点**和此**Bar 节点****的 N 属性****是“教育”**并且仅当**具有教育属性的此条形节点的 V 的值不包含我们在 LINQ 中指定的单词时**

例如，如果我们希望具有教育的 Foo 节点的所有用户 ID 不包含单词***“Some”***，我们将得到 2,4 的结果，因为 Foo 1 的 Bar 节点具有 N 属性的教育值，但它在 V 属性中有 Some 字符串和 Foo 编号 3 在它的 N 属性中没有带有 Education 值的 Bar 节点（非常重要，因为我们认为这是我们一直得到空结果的原因之一我们曾经这样做过）。

这里的任何 LINQ to XML 专家都有一个想法，这对于 XML 来说是一个非常不寻常的场景，但那是我们必须处理的问题，而且我认为这个问题会让很多人感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T21:13:48.753

tl; 博士：

```
var hasEducation = contacts.Elements("MainFoo").Elements("Foo")
 .Where(foo => foo.Elements("Bar")
                 .Any(bar => (bar.Attribute("N").Value == "Education") &&
                     (!bar.Attribute("V").Value.ToLower().Contains("some") ))) 
```

* * *

注意：我用 LinqPad (http://www.linqpad.net/) 对此进行了测试，使用它并喜欢它。LinqPad 非常适合这些问题。下面是一个 LinqPad 查询的完整源代码，用于测试和玩自己。

主要在哪里处理 foo 的元素。然后它会检查元素（特别是“Bar”元素及其属性）是否有您希望应用的规则。

这里的关键问题是这种查询的可维护性如何。你能像这样维护一个 linq 查询吗？尝试使用 LinqPad——我相信它会让您（或任何人）更轻松地修改和开发这些查询。

* * *

要获取用户 ID 列表（作为约翰的回答），您只需添加

```
.Element("User").Attribute("ID").Value; 
```

到上面的查询结束。

当然，这不包括 John 性感的错误检查。

* * *

```
XElement contacts = XElement.Parse (@"
<Root>
 <MainFoo>
     <Foo>
        <A bla='bla' />
        <B bla1='blablabla' />
        <C bla2='blabla' />
        <Bar N='Education' V='Some Text' />
        <Bar N='Other Node' V='Some other Text' />
        <Bar N='Yet Other Node' V='Some other other Text' />
        <Bar N='fourth Bar Node' V='Some other other otherText' />
        <User ID='1' />
     </Foo>
     <Foo>
        <A bla='bla' />
        <B bla1='blablabla' />
        <C bla2='blabla' />
        <Bar N='Education' V='Specific Text' />
        <Bar N='Other Node' V='Some other Text' />
        <Bar N='Yet Other Node' V='Some other other Text' />
        <Bar N='fourth Bar Node' V='Some other other otherText' />
        <User ID='2' />
     </Foo>
     <Foo>
        <A bla='bla' />
        <B bla1='blablabla' />
        <C bla2='blabla' /> <!--***No Bar node with N='Education' in this Foo Node, not a mistake! this might be part of the problem but this is the XML Structure and can't be changed***-->
        <Bar N='Other Node' V='Some other Text' />
        <Bar N='Yet Other Node' V='Some other other Text' />
        <Bar N='fourth Bar Node' V='Some other other otherText' />
        <User ID='3' />
     </Foo>
     <Foo>
        <A bla='bla' />
        <B bla1='blablabla' />
        <C bla2='blabla' />
        <Bar N='Education' V='Specific Text' />
        <Bar N='Other Node' V='Some other Text' />
        <Bar N='Yet Other Node' V='Some other other Text' />
        <Bar N='fourth Bar Node' V='Some other other otherText' />
        <User ID='4' />
     </Foo>
 </MainFoo>
 <OtherMainFoo></OtherMainFoo>
 <MoreMainFoo></MoreMainFoo>
</Root>");

var hasEducation = contacts.Elements("MainFoo").Elements("Foo")
      .Where(foo => foo.Elements("Bar")
               .Any(bar => (bar.Attribute("N").Value == "Education") &&
                           (!bar.Attribute("V").Value.ToLower().Contains("some") )))
      .Dump(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T21:47:11.157

为了让您的选择保持开放，这里有一个使用 XPath 而不是 LINQ 的解决方案。这不包括根据约翰的回答进行的错误检查，但它的工作原理都是一样的。

```
public static IEnumerable<string> GetIDs(XDocument doc, string negation)
{
    //The following xpath string will select all Foo elements that contain a Bar child
    // that has a N attribute with the value "Education" and also has a V attribute
    // that does not contain the specified string.
    string xPathString = String.Format("//Foo[(Bar/@N = 'Education') and (not(contains(Bar/@V, '{0}')))]", negation);

    return doc.Root
              .XPathSelectElements(xPathString) //Select the proper Foo elements
              .Select(a => a.Element("User").Attribute("ID").Value); //Grab the User elements under the previous Foo elements and return their ID attribute value
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-28T22:24:08.860

```
string text = "Some";
var query = from foo in xdoc.Descendants("Foo")
            let user = foo.Element("User")
            where user != null &&
                  foo.Elements("Bar")
                     .Any(bar => (string)bar.Attribute("N") == "Education" &&
                                 !Regex.IsMatch((string)bar.Attribute("V"), text,
                                                RegexOptions.IgnoreCase))
            select (int)user.Attribute("ID");

// result: 2, 4 
```

我使用正则表达式在 bar 的属性中搜索单词有两个原因 - 使搜索不区分大小写，以及处理`Bar`元素没有`V`属性的情况。您也可以更改模式以匹配单词（不是单词的一部分）。

* * *

如果所有`Foo`节点都有`User`元素，您可以删除用户的空检查。此外，如果`Bar`元素始终包含`V`属性，并且您不需要不区分大小写的搜索，则可以简化查询：

```
var query = from foo in xdoc.Descendants("Foo")                     
            where foo.Elements("Bar")
                        .Any(bar => (string)bar.Attribute("N") == "Education" &&
                                    !((string)bar.Attribute("V")).Contains(text))
            select (int)foo.Element("User").Attribute("ID"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-28T20:54:41.367

以下似乎有效：

```
public static IEnumerable<int> QueryComplexXml()
{
    var doc = XDocument.Parse(XML);
    if (doc.Root == null)
    {
        throw new System.InvalidOperationException("No root");
    }

    var mainFoo = doc.Root.Element("MainFoo");
    if (mainFoo == null)
    {
        throw new System.InvalidOperationException("No MainFoo");
    }

    var userIDs = from foo in mainFoo.Elements("Foo")
                  where
                      foo.Elements("Bar")
                         .Any(
                             bar =>
                             bar.Attribute("N").Value == "Education" &&
                             bar.Attribute("V").Value == "Specific Text")
                  let user = foo.Element("User")
                  where user != null
                  select int.Parse(user.Attribute("ID").Value);
    return userIDs;
} 
```

代码考虑了所有的“Foo”元素，但只考虑了那些“Bar”元素具有“Education”的“N”属性和“Specific Text”的“V”属性的那些（你可以放置任何谓词你想在那里）。对于每个选定的元素，它会提取“用户”元素（假设有*一个*，然后解析并返回“ID”属性。

在您发布的示例 XML 中，这将返回 2 和 4。

# excel - 数据透视表中的累积回报？

> ID：14075205
> 
> 赞同：0
> 
> 时间：2012-12-28T20:14:34.600
> 
> 标签：excel, excel-2007, pivot-table

我在 Excel 中有一张每日数据表。假设每天的股票回报数据如下所示：

```
日期，每日返回
2001 年 1 月 1 日，.021
2001 年 1 月 2 日，.005
2001 年 1 月 3 日，.0034
2001 年 1 月 4 日，.013
……
2001 年 12 月 31 日，.004
```

数据位于其中一张纸上的表格中。我们称它为 TableOfData。我在另一张纸上添加了一个数据透视表，并将日期添加为行标签。我还在行中添加了按年和月分组。现在很容易添加每个月的平均收益和标准差，但我也想要当月的总收益，它可以计算为`Product(DailyReturn + 1) -1`

我可以添加一个名为 DailyReturnFactor 的计算字段，它只是 DailyReturn + 1，我可以将该字段的 Product 添加到值中，并且数据透视表显示每个月的回报，除了我仍然需要减去 1。那是我被困在哪里。关于这是否可能的任何想法？另一个问题是我也想做其他计算集，例如峰度。

注意我使用的是 Excel 2007。

# ios - iOS 中正在进行的游戏的加载状态

> ID：14075214
> 
> 赞同：0
> 
> 时间：2012-12-28T20:14:59.107
> 
> 标签：ios, cocos2d-iphone, ios6, nsuserdefaults

我非常喜欢的一款 iOS 游戏（Fieldrunners 2）允许用户在应用程序被中级杀死后（在游戏过程中）继续他/她的游戏。当用户再次启动应用程序时，它会询问用户是否要继续进行中的级别。

他们是怎么做到的？重新加载正在进行的游戏的最简单和最聪明的方法是什么（cocos2d 和 ios）？在我看来，需要拯救的状态太多了。有我想的那么乏味吗？

编辑：当我说 时`killed`，我双击主页按钮，然后按住应用程序的图标并单击 x 图标。

# php - json_encode 对 getJson 没有响应

> ID：14075216
> 
> 赞同：0
> 
> 时间：2012-12-28T20:15:01.637
> 
> 标签：php, jquery, ajax, json, getjson

我有一个 html 页面，它将发送 json 请求以从服务器获取数据 [尽管 php-mysql]。我看到没有收到回复。我尝试通过 fiddler 进行调试，可以看到“响应不包含有效的 json 文本。

我的代码如下

# html

```
<!DOCTYPE html>
<html>
<script src="http://code.jquery.com/jquery-latest.js" 
        type="text/javascript">
</script>

<script type="text/javascript">
function populateFruitVariety() {

    $.getJSON('serverside.php', 
               {fruitName:$('#fruitName').val()}, 
               function(data)  {

    var select = $('#fruitVariety');

    if(select.prop) {
        var options = select.attr('options');
    } else {
        var options = select.attr('options');
    }

    $('option', select).remove();

    $.each(data, function(val, text) {
        options[options.length] = new Option(text, val);
    });
    });
}

$(document).ready(function() {
    populateFruitVariety();
    $('#fruitName').change(function() {
        populateFruitVariety();
    });
});

</script>

<form>
    Fruit:
    <select name="name" id="fruitName">
        <option>Apple</option>
        <option>Banana</option>
        <option>Orange</option>
        <option>Pear</option>
    </select>
    Variety:
    <select name="variety" id="fruitVariety">
    </select>
</form>
</html> 
```

# 服务器端.php

```
<?php
header('Content-type: application/json');

$host="localhost";
$username="root";
$password="";
$database="db_common";
$table_fruit_info = "fruit_info";
$tc_fruit_id = "fruit_id";
$tc_fruit_index = 'fruit_index';

$con = mysql_connect("$host", "$username", "$password") 
       or die(mysql_error());
mysql_select_db("$database") or die(mysql_error());

if(isset($_GET['fruitName'])) {
    $fruit_id = $_GET['fruitName'];
    $result = mysql_query("SELECT * FROM $table_fruit_info
                WHERE $tc_fruit_id='$fruit_id'");
    while($rows = mysql_fetch_array($result))
    {
        $ret_fruitIndex = $rows[$tc_fruit_index];
    }
}
echo json_encode($ret_fruitIndex);
?> 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T20:17:54.997

看起来`$ret_fruitIndex`只是一个字符串，没有适当的 JSON 代表。在您的 while 循环中，您将在每次传递时覆盖此变量的值，我认为这不是您想要做的。

我假设你真的想要这样的东西：

```
$ret_fruitIndex[] = $rows[$tc_fruit_index]; 
```

作为一个方面，您的代码很容易受到 SQL 注入的影响，您也不应该使用`mysql_*`已弃用的函数。我建议使用`mysqli_*`函数、PDO 或更现代、更安全的东西。

关于你的 jQuery：我不确定你在这里做什么：

```
if(select.prop) {
    var options = select.attr('options');
} else {
    var options = select.attr('options');
} 
```

因为那里的情况没有任何区别。

我也相信你的`each()`功能是错误的。传递给回调函数的参数将是数据的索引值和该索引的值。

您的逻辑应该是删除所有选项，而不是根据数据添加新选项，所以我不知道为什么该`options`变量与此回调函数有任何关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T20:27:22.410

你需要一个水果名称数组，所以替换 $ret_fruitIndex = $rows[$tc_fruit_index];

$ret_fruitIndex[] = $rows[$tc_fruit_index];

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T20:49:54.353

修复 PHP 后，将 JS 回调更改为：

```
function(data)  {

    var select = $('#fruitVariety');

    select.empty();

    $.each(data, function(val, text) {
        select.append($('option', {value: val}).text(text));
    });

}); 
```

`options`不是对 DOM 中数组的引用，它是一个 jQuery 对象，因此添加到它不会更新 DOM。

# spring-security - WebSphere 上的 Spring Security PreAuthentication Filter 示例？

> ID：14075218
> 
> 赞同：4
> 
> 时间：2012-12-28T20:15:12.373
> 
> 标签：spring-security, websphere, websphere-7, websphere-8, pre-authentication

有没有人有用于 WebSphere 工作的 Spring Security 示例 PreAuthentication Filter (WebSpherePreAuthenticatedProcessingFilter)？关于它的文档很少，我似乎无法确定它。我正在寻找可以正常工作并且可能愿意提供您的配置示例的人。非常适合 Spring 3.1 和 WAS 7 或 8。

我有一个配置，看起来它“有点”工作。我可以使用 WebSphere 进行身份验证，然后在我的应用程序中点击一个 URL，但浏览器会返回此消息：

错误 500：java.lang.RuntimeException：为用户查找组时发生异常

我得到一个像这样的异常堆栈跟踪：

```
java.lang.RuntimeException: Error while invoking method java.lang.reflect.Method.getGroupsForUser([UNAUTHENTICATED])
    at org.springframework.security.web.authentication.preauth.websphere.DefaultWASUsernameAndGroupsExtractor.invokeMethod(DefaultWASUsernameAndGroupsExtractor.java:147) [spring-security-web-3.1.3.RELEASE.jar:3.1.3.RELEASE]
    at org.springframework.security.web.authentication.preauth.websphere.DefaultWASUsernameAndGroupsExtractor.getWebSphereGroups(DefaultWASUsernameAndGroupsExtractor.java:115) [spring-security-web-3.1.3.RELEASE.jar:3.1.3.RELEASE]
    at org.springframework.security.web.authentication.preauth.websphere.DefaultWASUsernameAndGroupsExtractor.getWebSphereGroups(
...

Caused by: java.lang.reflect.InvocationTargetException: null
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.6.0]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:60) ~[na:1.6.0]
...

Caused by: com.ibm.websphere.security.EntryNotFoundException: null
    at com.ibm.ws.wim.registry.util.MembershipBridge.getGroupsForUser(MembershipBridge.java:293) ~[com.ibm.ws.runtime.wim.core.jar:201207200704]
...

[12/28/12 14:05:15:879 CST] 00000055 LocalTranCoor E   WLTC0017E: Resources rolled back due to setRollbackOnly() being called.
[12/28/12 14:05:15:879 CST] 00000055 webapp        E com.ibm.ws.webcontainer.webapp.WebApp logServletError SRVE0293E: [Servlet Error]-[ServletNameNotFound]: java.lang.RuntimeException: Exception occured while looking up groups for user
    at org.springframework.security.web.authentication.preauth.websphere.DefaultWASUsernameAndGroupsExtractor.getWebSphereGroups(DefaultWASUsernameAndGroupsExtractor.java:123)
    at org.springframework.security.web.authentication.preauth.websphere.DefaultWASUsernameAndGroupsExtractor.getWebSphereGroups(DefaultWASUsernameAndGroupsExtractor.java:94)
... 
```

**我的 web.xml 文件如下：**

```
<context-param>
  <param-name>contextConfigLocation</param-name>
  <param-value>
    classpath*:/applicationContext-jcr.xml,
    classpath*:/applicationContext-security.xml
  </param-value>
</context-param>

<filter>
  <filter-name>encodingFilter</filter-name>
  <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
  <init-param>
    <param-name>encoding</param-name>
    <param-value>UTF-8</param-value>
  </init-param>
  <init-param>
    <param-name>forceEncoding</param-name>
    <param-value>true</param-value>
  </init-param>
</filter>

  <filter>
      <filter-name>filterChainProxy</filter-name>
      <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
  </filter>

<!--  
<filter>
  <filter-name>springSecurityFilterChain</filter-name>
  <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>
-->

<filter-mapping>
  <filter-name>encodingFilter</filter-name>
  <url-pattern>/*</url-pattern>
</filter-mapping>

<!-- 
<filter-mapping>
  <filter-name>springSecurityFilterChain</filter-name>
  <url-pattern>/*</url-pattern>
</filter-mapping>
 -->

  <filter-mapping>
    <filter-name>filterChainProxy</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping>

<listener>
  <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<!-- ====================================================================== -->
<!-- S E R V L E T S -->
<!-- ====================================================================== -->
<servlet>
  <servlet-name>dispatcher</servlet-name>
  <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
  <load-on-startup>1</load-on-startup>
</servlet>

<servlet>
  <servlet-name>ViewStatusMessages</servlet-name>
  <servlet-class>ch.qos.logback.classic.ViewStatusMessagesServlet</servlet-class>
</servlet>

<!-- ====================================================================== -->
<!-- S E R V L E T    M A P P I N G S -->
<!-- ====================================================================== -->

<servlet-mapping>
  <servlet-name>dispatcher</servlet-name>
  <url-pattern>/app/*</url-pattern>
</servlet-mapping>

<servlet-mapping>
  <servlet-name>ViewStatusMessages</servlet-name>
  <url-pattern>/lbClassicStatus</url-pattern>
</servlet-mapping>

<!-- ====================================================================== -->
<!-- W E L C O M E    F I L E S -->
<!-- ====================================================================== -->
<welcome-file-list>
  <welcome-file>index.jsp</welcome-file>
</welcome-file-list>

<!-- Use if configuring for JNDI Datasource on J2EE Server -->
<resource-ref id="ResourceRef_LDP_Datasource">
  <description>Resource reference to the LDP datasource.</description>
  <!-- DB2 -->

  <res-ref-name>jdbc/ldpdbDS</res-ref-name>

  <!-- MS SQL -->
  <!-- 
  <res-ref-name>jdbc/ldpdbMSSQLDS</res-ref-name>
   -->
  <res-type>javax.sql.DataSource</res-type>
  <res-auth>Container</res-auth>
  <res-sharing-scope>Shareable</res-sharing-scope>
</resource-ref>
<!-- 
  security-constraint reference:
  http://s170.codeinspot.com/q/3419721

  OK, I figured this out. The problem is that even though I had J2EE security setup in Websphere and was authenticated, 
  my web.xml contained no security constraints. Because of this, Websphere was not supplying the principal for my requests. 
  This is apparently an intentional feature. If you are not accessing a protected URL, you should not need the pre-authentication information. 
  To overcome this, I added a security constraint to my web.xml, which allowed ALL users to access the resources. 
  Effectively, the resources were not secured, but still - there was a constraint now.

  This tricks the Websphere into filling in the user principal information in the request.
  -->

<security-constraint>
    <web-resource-collection>
        <web-resource-name>All areas</web-resource-name>
        <url-pattern>/*</url-pattern>
    </web-resource-collection>
    <auth-constraint>
        <role-name>*</role-name>
    </auth-constraint>
</security-constraint> 
```

**我的 Spring 安全上下文 XML 文件如下：**

```
<!-- 
<sec:http use-expressions="true">
    <sec:intercept-url pattern="/**" access="denyAll" />
    <sec:form-login />
</sec:http>
   -->
<bean id="filterChainProxy" class="org.springframework.security.web.FilterChainProxy">
  <sec:filter-chain-map path-type="ant">
    <!-- 
        <sec:filter-chain pattern="/**" filters="sif,webspherePreAuthFilter,logoutFilter,etf,fsi"/>
         -->
    <sec:filter-chain pattern="/**" filters="webspherePreAuthFilter,logoutFilter,etf,fsi"/>
  </sec:filter-chain-map>
</bean>
<!-- 
  <bean id="sif" class="org.springframework.security.context.HttpSessionContextIntegrationFilter"/>
  <bean id="sif" class="org.springframework.security.web.context.SecurityContextIntegrationFilter"/>
-->
<sec:authentication-manager alias="authenticationManager">
  <sec:authentication-provider ref="preAuthenticatedAuthenticationProvider"/>
</sec:authentication-manager>
<bean id="preAuthenticatedAuthenticationProvider" class="org.springframework.security.web.authentication.preauth.PreAuthenticatedAuthenticationProvider">
  <property name="preAuthenticatedUserDetailsService" ref="preAuthenticatedUserDetailsService"/>
</bean>
<bean id="preAuthenticatedUserDetailsService" class="org.springframework.security.web.authentication.preauth.PreAuthenticatedGrantedAuthoritiesUserDetailsService"/>
<!-- 
  This AbstractPreAuthenticatedProcessingFilter implementation is based on WebSphere authentication. 
  It will use the WebSphere RunAs user principal name as the pre-authenticated principal.
  -->
<bean id="webspherePreAuthFilter" class="org.springframework.security.web.authentication.preauth.websphere.WebSpherePreAuthenticatedProcessingFilter">
  <property name="authenticationManager" ref="authenticationManager"/>
  <property name="authenticationDetailsSource" ref="authenticationDetailsSource"/>
</bean>
<bean id="preAuthenticatedProcessingFilterEntryPoint" class="org.springframework.security.web.authentication.Http403ForbiddenEntryPoint"/>
<bean id="logoutFilter" class="org.springframework.security.web.authentication.logout.LogoutFilter">
  <constructor-arg value="/"/>
  <constructor-arg>
    <list>
      <bean class="org.springframework.security.web.authentication.logout.SecurityContextLogoutHandler"/>
    </list>
  </constructor-arg>
</bean>
<!-- 
  This AuthenticationDetailsSource implementation will set the pre-authenticated granted authorities based on the WebSphere 
  groups for the current WebSphere user, mapped using the configured Attributes2GrantedAuthoritiesMapper.

  This AuthenticationDetailsSource implementation, when configured with a MutableGrantedAuthoritiesContainer, 
  will set the pre-authenticated granted authorities based on the WebSphere groups for the current WebSphere user, 
  mapped using the configured Attributes2GrantedAuthoritiesMapper. 

  By default, this class is configured to build instances of the PreAuthenticatedGrantedAuthoritiesWebAuthenticationDetails class.
  -->
<bean id="authenticationDetailsSource" class="org.springframework.security.web.authentication.preauth.websphere.WebSpherePreAuthenticatedWebAuthenticationDetailsSource">
  <property name="webSphereGroups2GrantedAuthoritiesMapper" ref="websphereUserGroups2GrantedAuthoritiesMapper"/>
</bean>
<bean id="websphereUserGroups2GrantedAuthoritiesMapper" class="org.springframework.security.core.authority.mapping.SimpleAttributes2GrantedAuthoritiesMapper">
  <property name="convertAttributeToUpperCase" value="true"/>
</bean>
<bean id="webXmlResource" class="org.springframework.web.context.support.ServletContextResource">
  <constructor-arg ref="servletContext"/>
  <constructor-arg value="/WEB-INF/web.xml"/>
</bean>
<bean id="servletContext" class="org.springframework.web.context.support.ServletContextFactoryBean"/>
<bean id="etf" class="org.springframework.security.web.access.ExceptionTranslationFilter">
  <property name="authenticationEntryPoint" ref="preAuthenticatedProcessingFilterEntryPoint"/>
</bean>
<bean id="httpRequestAccessDecisionManager" class="org.springframework.security.access.vote.AffirmativeBased">
  <property name="allowIfAllAbstainDecisions" value="false"/>
  <property name="decisionVoters">
    <list>
      <ref bean="roleVoter"/>
    </list>
  </property>
</bean>
<!-- See: http://static.springsource.org/spring-security/site/docs/3.0.x/reference/core-web-filters.html -->
<bean id="fsi" class="org.springframework.security.web.access.intercept.FilterSecurityInterceptor">
  <property name="authenticationManager" ref="authenticationManager"/>
  <property name="accessDecisionManager" ref="httpRequestAccessDecisionManager"/>
  <property name="securityMetadataSource">
    <sec:filter-security-metadata-source>
      <sec:intercept-url pattern="/**" access="ROLE_LDP_ADMINS"/>
    </sec:filter-security-metadata-source>
  </property>
</bean>
<bean id="roleVoter" class="org.springframework.security.access.vote.RoleVoter"/>
<!-- 
Simply put, the filter wraps the current httprequest with one that delegates request.isUserInRole() and request.getRemoteUser() to acegi. 
<bean id="securityContextHolderAwareRequestFilter" class="org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter">
  <property name="wrapperClass" value="org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestWrapper"/>
</bean>
--> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T20:37:45.787

我没有可用的配置，但有一条建议

*   启用 Spring Security 调试日志记录
*   尽可能密切地调试`MembershipBridge.getGroupsForUser`，我感觉传递给它的用户名是空的

根据我的直觉，我怀疑预认证用户的名称没有被传递。我模糊地记得几年前我有这个 - 需要挖掘那个代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-23T14:23:15.227

由于某种原因，WebSphere 不需要对具有以下约束定义的资源进行身份验证，并且不会发生预身份验证：

```
<auth-constraint>
    <role-name>*</role-name>
</auth-constraint> 
```

当它尝试为未知主体确定组时，它会在后期失败。

我使用默认组用户保护资源并将所有用户映射到它：

```
<security-constraint>
    <web-resource-collection>
        <web-resource-name>AuthTest</web-resource-name>
        <url-pattern>/*</url-pattern>
    </web-resource-collection>     
    <auth-constraint>
        <role-name>User</role-name>
    </auth-constraint>    
</security-constraint>

<security-role>
    <role-name>User</role-name>
</security-role> 
```

这是一种解决方法，因为我不想要这个角色并管理它的成员，但这是我现在所拥有的。

# linux - 始终使用 Debian Wheezy 在 Xfce 4.8 中隐藏光标

> ID：14075219
> 
> 赞同：1
> 
> 时间：2012-12-28T20:15:16.003
> 
> 标签：linux, mouse, debian, xserver, xfce

我想总是隐藏我的光标。我对机器只有 SSH 访问权限。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T02:13:40.863

尝试使用**unclutter**，这是一个可以做到这一点的小程序。

*   [http://ftp.x.org/contrib/utilities/unclutter-8.README](http://ftp.x.org/contrib/utilities/unclutter-8.README)
*   [http://ftp.x.org/contrib/utilities/unclutter-8.tar.Z](http://ftp.x.org/contrib/utilities/unclutter-8.tar.Z)

它存在于各种发行版的存储库中，例如在 Arch Linux 上，您可以安装它：

```
pacman -S unclutter 
```

**然后，您可以通过在Settings » Session and Startup » Applications Autostart**上添加一个条目来启动它，或者（首选方法）将其添加到您的`.xinitrc`文件中，如下所示：

```
run unclutter 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T20:46:51.477

编辑：现在已过时

我的解决方案是下载：[一个透明光标主题](http://gpl.matrix-vision.com/mvblx-sources/GPL/xcursor-transparent-theme/)并执行：

```
./configure
cd cursors
make install-data-local DESTDIR=/home/user/.icons/default CURSOR_DIR=/cursors
chown -R user:user /home/user/.icons 
```

# scala - 设置 Jetty 默认 webapp 文件夹

> ID：14075223
> 
> 赞同：1
> 
> 时间：2012-12-28T20:15:30.260
> 
> 标签：scala, jetty

为新手问题道歉，我正在尝试将 Jetty servlet 容器用于 Scala/Ajax 应用程序。我想将默认的 webapp 目录更改为自定义目录，例如 /home/myuser/project/ 并让 jetty 为该页面的索引提供服务。

我需要一个 doctype、head 和 body，因为所有布局都将通过 Ajax/REST/Scala 控制，DOM 完全由 JavaScript 生成。

如何让码头从指定文件夹提供自定义 index.html 文件？

我在 64 位 Ubuntu 12.10 上使用 Jetty 9 Debian 发行版，如果这有什么不同的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T22:02:45.383

我相信您应该能够添加一个名为`root.xml`您的`$JETTY_HOME/contexts`目录的文件，其内容为：

```
<?xml version="1.0"  encoding="ISO-8859-1"?>
<!DOCTYPE Configure PUBLIC "-//Mort Bay Consulting//DTD Configure//EN" "http://\
jetty.mortbay.org/configure.dtd">

<Configure class="org.mortbay.jetty.webapp.WebAppContext">
  <Set name="contextPath">/</Set>
  <Set name="resourceBase">
    /home/myuser/project/
  </Set>
</Configure> 
```

您可能还需要删除`$JETTY_HOME/webapps`响应相同上下文的任何现有战争。

# matrix - OpenGL ES 2.0（或 Marmalade SDK），效果类似于 OpenGL ES 1.x 中“glRotate()”、“glTranslation()”的顺序

> ID：14075225
> 
> 赞同：5
> 
> 时间：2012-12-28T20:15:38.360
> 
> 标签：matrix, opengl-es-2.0, marmalade

在 OpenGL ES 1.x 中，可以先执行 glTranslate，然后执行 glRotate，以修改旋转中心的位置（即**围绕给定点旋转**）。据我了解，在 OpenGL ES 2.0 中，矩阵计算是在 CPU 端完成的。我正在使用 IwGeom（来自 Marmalade SDK）——一个典型的（可能）矩阵包。从文档：

> IwGeom 中的矩阵实际上是 4x3 格式，包括 3x3 旋转和 3 分量矢量平移。

我发现使用这种方法很难获得相同的效果。平移总是在旋转*之后应用。*此外，在 Marmalade 中，还设置了模型矩阵：

```
IwGxSetModelMatrix( &modelMatrix ); 
```

而且，显然，旋转和平移也以一种顺序应用：a）旋转，b）平移。

如何获得OpenGL ES 1.x 效果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T20:31:57.747

`Marmalades` `IwGX`wraps并且它与then`OpenGL`更相似，因为它不需要着色器。`GLES 1.0``GLES 2.0`

`glTranslate`并`glRotate`修改视图矩阵。

您可以替换为

```
CIwFMat viewMat1 = IwGxGetModelMatrix();
CIwFMat rot; rot.SetIdentity(); rot.SetRotZ(.....); // or other matrix rotation function
CIwFMat viewMat2 = viewMat1; 
viewMat2.PostMult(rot); // or viewMat2.PreMult(rot);
IwGxSetModelMatrix(viewMat2);
// Draw Something
IwGxSetModelMatrix(&viewMat1); 
```

如果您使用`GLES 2.0`，那么矩阵也可能在顶点着色器中计算。这可能比 CPU 更快。`CPU`与`NEON`说明在 iPhone 4S 上具有相似的性能

# c# - ASP.NET C# SQL Server 金钱格式

> ID：14075227
> 
> 赞同：0
> 
> 时间：2012-12-28T20:15:43.390
> 
> 标签：c#, asp.net, sql-server, format, currency

我有一个问题，我正在开发一个网上商店，但是当我必须将数据发布到支付网关时，我需要钱才能`1,00$`达到 100，但在 SQL Server 数据库中`1,0000`，当我使用价格格式字符串时`{0:c}`，怎么办我把它转换成100？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T20:22:44.827

取美元 * 100 得到整数值。不要使用字符串格式化程序，你只会得到数值。

IE

```
(Price*100).ToString(); 
```

# wcf - 听说 WCF 不能很好地使用异步方法进行扩展？

> ID：14075230
> 
> 赞同：1
> 
> 时间：2012-12-28T20:15:51.950
> 
> 标签：wcf, asynchronous

我在各种博客中读到 WCF 在为异步 WCF 方法处理大量并发异步请求时存在可伸缩性问题。**今天在 .Net 4.0 和 IIS 7 世界中仍然如此吗？**

通过 WCF 中的异步方法，我的意思是已经为此 WCf 方法实现了异步模式。

我检查了这个链接：[WCF Scalability Issues with Async Pattern Method](http://www.codeproject.com/Articles/234085/Fixing-WCF-to-build-highly-scalable-async-REST-API)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T20:21:34.290

WCF 不缩放从来都不是真的。事实*是*应用程序**无法扩展**。（当然，这仍然是正确的）。

老实说，您什么时候见过无法扩展的语言或框架？请求是独立的，这意味着它们是令人尴尬的并行。这是缩放的完美情况。

阻碍扩展的总是应用程序。当应用程序不是为大规模编写或代码质量低下时，就会发生这种情况。

具体来说：如果您按照预期的方式使用 WCF，并且一直采用异步方式，那么您将扩展到硬件限制。

# c# - 尝试使用 Roslyn 动态创建 MVC 控制器

> ID：14075233
> 
> 赞同：1
> 
> 时间：2012-12-28T20:15:56.403
> 
> 标签：c#, asp.net-mvc, roslyn

我可以动态创建一个类，然后实例化它并从 Visual Studio 的即时窗口调用其中的一个方法。但是我不能使 MVC 控制器类的行为像预期的那样（即被找到并路由到）。我错过了什么？

全球.asax.cs：

```
 protected void Application_Start()
    {
        RoslynExperiments.AddController();
        RegisterRoutes(RouteTable.Routes); 
```

...

罗斯林实验：

```
 public static void AddController()
    {

        var controllerCode = @"using System.Web.Mvc;

    public class FooController:Controller
    {
        public ActionResult Index()
        {
            return Content(""foo"");
        }
    }
";

        AddDynamicAssemblyClass("FooController", controllerCode);

    }

    public static void AddDynamicAssemblyClass(string inMemoryAssemblyName, string code)
    {
        var syntaxTree = SyntaxTree.ParseText(code);

        var refs = new[] {
            MetadataReference.CreateAssemblyReference("mscorlib"),
            MetadataReference.CreateAssemblyReference("System"),
            MetadataReference.CreateAssemblyReference("System.Web"),
            MetadataReference.CreateAssemblyReference("System.Web.MVC")
        };

        var compilation = Compilation.Create(inMemoryAssemblyName,
        syntaxTrees: new[] { syntaxTree },
        references: refs,
        options: new CompilationOptions(OutputKind.DynamicallyLinkedLibrary));

        using (var memoryStream = new MemoryStream())
        {
            EmitResult result = compilation.Emit(memoryStream);
            memoryStream.Flush();
            var assembly = Assembly.Load(memoryStream.GetBuffer());
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T21:15:49.350

我对 ASP.NET MVC 循环没有太多经验，但根据[一条评论](https://stackoverflow.com/questions/9861744/asp-net-mvc-controller-not-loaded-from-different-assembly#comment16546969_9862815)，只考虑来自引用程序集的控制器，而不是所有加载的程序集。

因此，我认为您需要使用自定义`ControllerFactory`.

# slider - 滑块错误 + 发布缩略图问题 / Smartstart WP 主题

> ID：14075234
> 
> 赞同：1
> 
> 时间：2012-12-28T20:16:03.587
> 
> 标签：slider

我正在使用 Wordpress 的 Smartstart 主题，但我在[主页上放置的滑块有问题](http://www.rcahandball.com)

*   “标语”和滑块之间有很高的空间
*   底部的文字和图标不像以前那样风格化了……我真的不知道发生了什么，因为几天前一切都很好……有人可以帮我吗？

另一点：有人知道如何修复主页和[“博客”页面](http://www.rcahandball.com/actualites/)上的帖子缩略图高度吗？宽度已经固定。

最后，我想隐藏帖子页面上的帖子缩略图......

有人能帮我吗 ？作者没反应...

# javascript - JQPlot：如何在不同的位置重新绘制

> ID：14075235
> 
> 赞同：4
> 
> 时间：2012-12-28T20:16:06.323
> 
> 标签：javascript, jquery, jqplot

所以我需要在我的屏幕上绘制大约 120 个条形图，所以我执行以下操作

```
var barPlot = $.jqplot(targetDiv, jsonBarObj, createBarChartOption(jsonLegendObj, jsonColsObj)) 
```

`targetDiv`是页面上不同的 id，`div`例如`barDiv1`，`barDiv2`...

在 IE9 中，浏览器经常挂起。所以我的想法是将 JQPlot 对象存储为`barPlot`像上面那样，然后如果不为空，则`barPlot.replot()`. 我遇到的问题是如何指定新的`target Id`. 我试试

```
barPlot.targetId = "#" + targetDiv; 
```

但这不起作用。请帮忙

**编辑**：这里是 jsfiddle：http: [//jsfiddle.net/YX9wX/5/](http://jsfiddle.net/YX9wX/5/)

**点击加载，如果你alt+tab离开然后alt_tab返回，你可以看到它挂在IE9上，一直挂到它完成所有绘图**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T15:37:59.387

也许我误解了你的问题，但是......你有一些 HTML div 目标（20？）：

```
<div id="targetDiv1"></div>
<div id="targetDiv2"></div>
<div id="targetDiv3"></div> 
```

通用数据（任意）：

```
var data = [[[1, 2], [3, 5.12], [5, 13.1], [7, 33.6], [9, 85.9], [11, 219.9]]]; 
```

div 目标中的第一个绘图具有一些具体的渲染选项（例如，蓝色）：

```
var barPlot = $.jqplot("targetDiv1", data, {series: [{color: "#0000ff"}]}); 
```

然后你想用其他渲染选项在一些不同的 div 目标中重新绘制相同的数据吗？

如果是这样，请尝试调用该`init`方法，然后`replot`：

```
barPlot.init("targetDiv2", barPlot.data, {series: [{color: "#ff0000"}]});
barPlot.replot({clear: false});

barPlot.init("targetDiv3", barPlot.data, {series: [{color: "#ff00ff"}]});
barPlot.replot({clear: false}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T16:25:32.953

我认为处理 IE 挂起的最佳方法是在每次绘图后让浏览器短暂休息：

```
$(function(){createPlot(1);});

function createPlot(plotIndex){
  var targetDiv = "barDiv" + plotIndex;
  // define jsonBarObj, jsonLegendObj & jsonColsObj here
  $.jqplot(targetDiv, jsonBarObj, createBarChartOption(jsonLegendObj, jsonColsObj))
  if(plotIndex < 20) setTimeout(function(){createPlot(++plotIndex);},1);
} 
```

## 编辑

# [JSFiddle](http://jsfiddle.net/YX9wX/6)

这是一个完整的工作html：

```
<!DOCTYPE html>
<html>
<head>

<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>

<script language="javascript" type="text/javascript" src="https://bitbucket.org/cleonello/jqplot/raw/81ec4eb933068c5009958b504feef3f27e1b1129/src/jquery.jqplot.js"></script>

<script language="javascript" type="text/javascript" src="https://bitbucket.org/cleonello/jqplot/raw/81ec4eb933068c5009958b504feef3f27e1b1129/src/plugins/jqplot.barRenderer.js"></script>

<script language="javascript" type="text/javascript" src="https://bitbucket.org/cleonello/jqplot/raw/b5a7796a9ebf/src/plugins/jqplot.cursor.js"></script>

<script language="javascript" type="text/javascript" src="https://bitbucket.org/cleonello/jqplot/raw/81ec4eb933068c5009958b504feef3f27e1b1129/src/plugins/jqplot.canvasTextRenderer.js"></script>

<script language="javascript" type="text/javascript" src="https://bitbucket.org/cleonello/jqplot/raw/81ec4eb933068c5009958b504feef3f27e1b1129/src/plugins/jqplot.canvasAxisLabelRenderer.js"></script>

<script language="javascript" type="text/javascript" src="https://bitbucket.org/cleonello/jqplot/raw/81ec4eb933068c5009958b504feef3f27e1b1129/src/plugins/jqplot.highlighter.js"></script>

<script language="javascript" type="text/javascript" src="https://bitbucket.org/cleonello/jqplot/raw/81ec4eb933068c5009958b504feef3f27e1b1129/src/plugins/jqplot.categoryAxisRenderer.js"></script>

<script language="javascript" type="text/javascript" src="https://bitbucket.org/cleonello/jqplot/raw/81ec4eb933068c5009958b504feef3f27e1b1129/src/plugins/jqplot.canvasAxisLabelRenderer.js"></script>

<style>

//jquery.jqplot.css

/*rules for the plot target div.  These will be cascaded down to all plot elements according to css rules*/
.jqplot-target {
    position: relative;
    color: #666666;
    font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
    font-size: 1em;
/*    height: 300px;
    width: 400px;*/
}

/*rules applied to all axes*/
.jqplot-axis {
    font-size: 0.75em;
}

.jqplot-xaxis {
    margin-top: 10px;
}

.jqplot-x2axis {
    margin-bottom: 10px;
}

.jqplot-yaxis {
    margin-right: 10px;
}

.jqplot-y2axis, .jqplot-y3axis, .jqplot-y4axis, .jqplot-y5axis, .jqplot-y6axis, .jqplot-y7axis, .jqplot-y8axis, .jqplot-y9axis, .jqplot-yMidAxis {
    margin-left: 10px;
    margin-right: 10px;
}

/*rules applied to all axis tick divs*/
.jqplot-axis-tick, .jqplot-xaxis-tick, .jqplot-yaxis-tick, .jqplot-x2axis-tick, .jqplot-y2axis-tick, .jqplot-y3axis-tick, .jqplot-y4axis-tick, .jqplot-y5axis-tick, .jqplot-y6axis-tick, .jqplot-y7axis-tick, .jqplot-y8axis-tick, .jqplot-y9axis-tick, .jqplot-yMidAxis-tick {
    position: absolute;
    white-space: pre;
}

.jqplot-xaxis-tick {
    top: 0px;
    /* initial position untill tick is drawn in proper place */
    left: 15px;
/*    padding-top: 10px;*/
    vertical-align: top;
}

.jqplot-x2axis-tick {
    bottom: 0px;
    /* initial position untill tick is drawn in proper place */
    left: 15px;
/*    padding-bottom: 10px;*/
    vertical-align: bottom;
}

.jqplot-yaxis-tick {
    right: 0px;
    /* initial position untill tick is drawn in proper place */
    top: 15px;
/*    padding-right: 10px;*/
    text-align: right;
}

.jqplot-yaxis-tick.jqplot-breakTick {
    right: -20px;
    margin-right: 0px;
    padding:1px 5px 1px 5px;
/*    background-color: white;*/
    z-index: 2;
    font-size: 1.5em;
}

.jqplot-y2axis-tick, .jqplot-y3axis-tick, .jqplot-y4axis-tick, .jqplot-y5axis-tick, .jqplot-y6axis-tick, .jqplot-y7axis-tick, .jqplot-y8axis-tick, .jqplot-y9axis-tick {
    left: 0px;
    /* initial position untill tick is drawn in proper place */
    top: 15px;
/*    padding-left: 10px;*/
/*    padding-right: 15px;*/
    text-align: left;
}

.jqplot-yMidAxis-tick {
    text-align: center;
    white-space: nowrap;
}

.jqplot-xaxis-label {
    margin-top: 10px;
    font-size: 11pt;
    position: absolute;
}

.jqplot-x2axis-label {
    margin-bottom: 10px;
    font-size: 11pt;
    position: absolute;
}

.jqplot-yaxis-label {
    margin-right: 10px;
/*    text-align: center;*/
    font-size: 11pt;
    position: absolute;
}

.jqplot-yMidAxis-label {
    font-size: 11pt;
    position: absolute;
}

.jqplot-y2axis-label, .jqplot-y3axis-label, .jqplot-y4axis-label, .jqplot-y5axis-label, .jqplot-y6axis-label, .jqplot-y7axis-label, .jqplot-y8axis-label, .jqplot-y9axis-label {
/*    text-align: center;*/
    font-size: 11pt;
    margin-left: 10px;
    position: absolute;
}

.jqplot-meterGauge-tick {
    font-size: 0.75em;
    color: #999999;
}

.jqplot-meterGauge-label {
    font-size: 1em;
    color: #999999;
}

table.jqplot-table-legend {
    margin-top: 12px;
    margin-bottom: 12px;
    margin-left: 12px;
    margin-right: 12px;
}

table.jqplot-table-legend, table.jqplot-cursor-legend {
    background-color: rgba(255,255,255,0.6);
    border: 1px solid #cccccc;
    position: absolute;
    font-size: 0.75em;
}

td.jqplot-table-legend {
    vertical-align:middle;
}

/*
These rules could be used instead of assigning
element styles and relying on js object properties.
*/

/*
td.jqplot-table-legend-swatch {
    padding-top: 0.5em;
    text-align: center;
}

tr.jqplot-table-legend:first td.jqplot-table-legend-swatch {
    padding-top: 0px;
}
*/

td.jqplot-seriesToggle:hover, td.jqplot-seriesToggle:active {
    cursor: pointer;
}

.jqplot-table-legend .jqplot-series-hidden {
    text-decoration: line-through;
}

div.jqplot-table-legend-swatch-outline {
    border: 1px solid #cccccc;
    padding:1px;
}

div.jqplot-table-legend-swatch {
    width:0px;
    height:0px;
    border-top-width: 5px;
    border-bottom-width: 5px;
    border-left-width: 6px;
    border-right-width: 6px;
    border-top-style: solid;
    border-bottom-style: solid;
    border-left-style: solid;
    border-right-style: solid;
}

.jqplot-title {
    top: 0px;
    left: 0px;
    padding-bottom: 0.5em;
    font-size: 1.2em;
}

table.jqplot-cursor-tooltip {
    border: 1px solid #cccccc;
    font-size: 0.75em;
}

.jqplot-cursor-tooltip {
    border: 1px solid #cccccc;
    font-size: 0.75em;
    white-space: nowrap;
    background: rgba(208,208,208,0.5);
    padding: 1px;
}

.jqplot-highlighter-tooltip, .jqplot-canvasOverlay-tooltip {
    border: 1px solid #cccccc;
    font-size: 0.75em;
    white-space: nowrap;
    background: rgba(208,208,208,0.5);
    padding: 1px;
}

.jqplot-point-label {
    font-size: 0.75em;
    z-index: 2;
}

td.jqplot-cursor-legend-swatch {
    vertical-align: middle;
    text-align: center;
}

div.jqplot-cursor-legend-swatch {
    width: 1.2em;
    height: 0.7em;
}

.jqplot-error {
/*   Styles added to the plot target container when there is an error go here.*/
    text-align: center;
}

.jqplot-error-message {
/*    Styling of the custom error message div goes here.*/
    position: relative;
    top: 46%;
    display: inline-block;
}

div.jqplot-bubble-label {
    font-size: 0.8em;
/*    background: rgba(90%, 90%, 90%, 0.15);*/
    padding-left: 2px;
    padding-right: 2px;
    color: rgb(20%, 20%, 20%);
}

div.jqplot-bubble-label.jqplot-bubble-label-highlight {
    background: rgba(90%, 90%, 90%, 0.7);
}

div.jqplot-noData-container {
    text-align: center;
    background-color: rgba(96%, 96%, 96%, 0.3);
}

</style>

</head>

<body id="b">

<button class="button">Load</button>
<div class="chart" id="chart0" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart1" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart2" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart3" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart4" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart5" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart6" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart7" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart8" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart9" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart10" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart11" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart12" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart13" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart14" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart15" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart16" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart17" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart18" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart19" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart20" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart21" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart22" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart23" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart24" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart25" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart26" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart27" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart28" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart29" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart30" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart31" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart32" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart33" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart34" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart35" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart36" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart37" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart38" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart39" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart40" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart41" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart42" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart43" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart44" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart45" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart46" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart47" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart48" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart49" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart50" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart51" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart52" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart53" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart54" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart55" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart56" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart57" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart58" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart59" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart60" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart61" style="width: 300px; height: 200px">2</div>
<div class="chart" id="chart62" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart63" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart64" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart65" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart66" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart67" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart68" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart69" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart70" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart71" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart72" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart73" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart74" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart75" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart76" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart77" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart78" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart79" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart80" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart81" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart82" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart83" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart84" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart85" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart86" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart87" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart88" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart89" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart90" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart91" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart92" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart93" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart94" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart95" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart96" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart97" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart98" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart99" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart100" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart101" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart102" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart103" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart104" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart105" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart106" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart107" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart108" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart109" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart110" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart111" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart112" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart113" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart114" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart115" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart116" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart117" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart118" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart119" style="width: 300px; height: 200px"></div>
<div class="chart" id="chart120" style="width: 300px; height: 200px"></div>

</body>
<script>

var data = [[2.609466E7],[4272988.0],[999165.0],[123805.0]];
var label = ["Business Workstations","Home Desktops","Display Devices","Accessories"];
var colorsSpec = ['#fab818', '#c1e800', '#9ed927', '#00c2b4', '#33ccff', '#2bacf8', '#4c8ded', '#7079db', '#753374', '#e63262', '#f77a19', '#fedb00'];
jQuery('.button').click(function(){
  loadChart(1);
});
function loadChart(chartIndex){
  var size = jQuery('.chart').size();
  var targetDiv = 'chart' + chartIndex;
  generateStackedBarCharts(data, label, [''], targetDiv);
  if(chartIndex < size) {
    setTimeout(function(){loadChart(++chartIndex);});
  }
}
function generateStackedBarCharts(jsonDataObj, jsonLegendObj, jsonColsObj, targetDiv) {
  plot3 = $.jqplot(targetDiv, jsonDataObj, {
    // Only animate if we're not using excanvas (not in IE 7 or IE
    // 8)..
    animate: !$.jqplot.use_excanvas,
    animateReplot: !$.jqplot.use_excanvas,
    seriesColors: colorsSpec,
    // Tell the plot to stack the bars.
    stackSeries: true,
    captureRightClick: true,
    seriesDefaults: {
      renderer: $.jqplot.BarRenderer,
      rendererOptions: {
        // Put a 30 pixel margin between bars.
        barMargin: 30,
        // Highlight bars when mouse button pressed.
        // Disables default highlighting on mouse over.
        highlightMouseDown: true
      },
      pointLabels: {
        show: true,
        hideZeros: true,
        edgeTolerance: -5
      }
    },
    axes: {
      xaxis: {
        renderer: $.jqplot.CategoryAxisRenderer,
        ticks: jsonColsObj,
        labelRenderer: $.jqplot.CanvasAxisLabelRenderer,
        tickRenderer: $.jqplot.CanvasAxisTickRenderer,
        tickOptions: {
          angle: -30,
          fontFamily: 'Arial',
          fontSize: '9pt'
        }
      },
      yaxis: {
        // Don't pad out the bottom of the data range. By default,
        // axes scaled as if data extended 10% above and below the
        // actual range to prevent data points right on grid
        // boundaries.
        // Don't want to do that here.
        padMin: 0,
        min: 0
      }
    },
    legend: {
      show: true,
      labels: jsonLegendObj,
      location: 'e',
      placement: 'outside'
    },
    cursor: {
      show: true,
      zoom: true,
      showTooltip: true,
      followMouse: true
    }
  });
}

</script>
</html> 
```

**编辑来自 Thang Pham**

结合此，您可以在 jqplot 对象上调用 destroy() 以释放它以解决内存泄漏问题。然而，由于在 jqplot 对象上调用 destroy() 会使图表消失，我将 jqplot 图表转换为图像使用

[https://bitbucket.org/cleonello/jqplot/issue/14/export-capabilities#comment-554274](https://bitbucket.org/cleonello/jqplot/issue/14/export-capabilities#comment-554274)

上面链接中的方法将返回 base64 图像字符串，可以`<img>`使用 jQuery 提供。完成后，您可以安全地在 jqplot 对象上调用 destroy()。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T16:44:57.190

我会尝试不同的方法。

好的，当您创建 20 个图形时，IE 会挂起，但其他浏览器也会挂起，但时间会更短。如果您在图表中加载大量数据，所有浏览器都会挂起。它还取决于计算机性能和特定平台，例如手机上的浏览器。

我知道加载大内容的最佳基本设计模式是使用加载层并使用 JQuery`load()`函数加载包含大内容的页面。此功能会在加载期间挂起您的浏览器（同步模式），但会显示带有图像的消息以供用户理解。

在你的情况下，你可以`div` `graphs-container`在你的网页中默认隐藏，使用 div 来显示加载动画（或者`graphs-container`在这种情况下，默认情况下通过 CSS 类将加载层应用于你的可见），然后使用 JQuery 加载你的大页面`load()`功能。在成功加载回调中，您可以隐藏加载层并显示加载的页面，您案例中的所有图表。

通常，我用一个动画 gif 轮和一个简单的文本组成加载层类。

[`PHP ob-gzhandler`](http://php.net/manual/en/function.ob-gzhandler.php)为了提高渲染性能和节省用户带宽，您还可以使用或直接使用`.htaccess`规则压缩网页： [http ://www.xpertdeveloper.com/2012/04/htaccess-gzip-compression/](http://www.xpertdeveloper.com/2012/04/htaccess-gzip-compression/)

另一个技巧是只加载一次 JS 库，JQPlot 有很多你肯定会使用的插件，它们需要时间来加载。

这是加载层 div 的一种可能实现，用于在图形加载期间显示带有动画的文本：

```
<!-- The loading layer with loading message and animated GIF -->
<div id='graphs-loading-layer' class='loading'>Loading in progress...</div>

<!-- The target div to load all your graphs -->    
<div id='graphs-container'></div>

<!-- Loading class example -->        
<style>
    .loading{   
        border:1px dotted black;
        font-size:25px;
        background-color:white;
        background-image:url(./loading.gif);
        background-repeat:no-repeat;
        background-position:center center;
        opacity:0.6;
        z-index:200;
        width:99%;
        min-height:442px;
        border-radius: 10px;
        position:relative;
        text-align:center;
        line-height:300px;
    }
</style>

<script>
   //allJQPlotGraphs.php is the file (or a call to a controller in MVC model) where the graphs are generated
   $('#graphs-container').hide().load('allJQPlotGraphs.php',{/*JSON map data*/},function(){
      //Here is the success callback, fade out the loading layer div
      $('#graphs-loading-layer').fadeOut(300,function(){     
          //Then, display the graphs container with all graphs loaded
          $('#graphs-container').fadeIn(300);
      });      
   });
</script> 
```

# iphone - 判断 number 是否是 5 的倍数

> ID：14075240
> 
> 赞同：4
> 
> 时间：2012-12-28T20:16:24.157
> 
> 标签：iphone, ios, objective-c

我将如何确定一个数字是否是 5 的倍数？

在我的应用程序中，如果某个数字不是 5 的倍数，我希望运行一种方法，如果该方法*是*5 的倍数，则运行另一种方法。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-28T20:18:01.710

**斯威夫特 5 更新**

根据新发布的语言版本，您可以使用[isMultiple(of:)](https://developer.apple.com/documentation/swift/int/3127688-ismultiple)方法确定这一点

```
let num = 75
if num.isMultiple(of: 5) {
    // multiple of 5
} else {
    // not a multiple of 5
} 
```

使用[**模**运算符](http://www.mybringback.com/tutorial-series/3601/objective-c-programming-tutorial-8-basics-of-modulus-operator/)检查整数除法的余数。

```
if (num % 5 == 0) {
    // multiple of 5.
}
else {
    // not a multiple of 5.
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-28T20:19:13.097

使用模运算符：

```
if (num % 5 == 0)
    //the number is a multiple of 5.
else
    // the number is not a multiple of 5. 
```

The modulus operator returns the remainder of a division instead of the division itself, so this logic will work with any number, not just 5\. i.e. `if (num % 3 == 0) //multiple of 3`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-28T20:18:08.940

通过这个简单的逻辑检查。

求余数，若为0，则表示能被5整除。

```
if(number % 5 == 0) {
   NSLog(@"Multiple of 5");
   //[self multipleOfFive];//your method
}
else{
    NSLog(@"Not a multiple of 5");
    //[self notMultipleOfFive];//your method
} 
```

注意：**您只能检查整数的 %（模数）**

对于浮点数或双打使用：

```
double fmod(double x, double y);
float fmodf(float x, float y);
long double fmodl(long double x, long double y); 
```

# java - GWT中的util和sql日期转换，

> ID：14075243
> 
> 赞同：0
> 
> 时间：2012-12-28T20:16:28.453
> 
> 标签：java, gwt, date

在 GWT 中将 Util 日期转换为 SQL 日期以及反之亦然的最佳方法是什么？我有格式为“yyyy-MM-dd hh:mm:ss”的sql日期，并且也以相同的格式存储它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T20:30:22.603

您可以使用[DateTimeFormat](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/i18n/client/DateTimeFormat.html)在表示之间进行转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T17:44:42.233

基本原则 -

1.  您可以在 GWT 客户端中使用 SQL Date。但是请注意支持哪些 api。[https://developers.google.com/web-toolkit/doc/latest/RefJreEmulation#Package_java_sql](https://developers.google.com/web-toolkit/doc/latest/RefJreEmulation#Package_java_sql)
2.  您可以在服务器端在它们之间进行转换以将 Sql Date 转换为 Util Date（确保您使用日历/时区并且不会丢失时间戳信息）
3.  日历在客户端将不可用。如果您需要它们进行显示，请创建您自己的 DateWrapper pojo 将日历/时区信息表示为字符串以及 Util 日期。[如何在 GWT 中使用 java.util.Calendar](https://stackoverflow.com/questions/7009655/how-to-use-java-util-calendar-use-in-gwt-classes)
4.  使用 DateTimeFormat 来操作显示模式。
5.  忽略不推荐使用的 api 警告。丑陋，我们坚持下去。
6.  如果您尝试支持多种日期类型回历、朱利安、格里高利……您将信息填充到 DateWrapper 中。

[java.util.Date 与 java.sql.Date](https://stackoverflow.com/questions/2305973/java-util-date-vs-java-sql-date)

# jenkins - Jenkins 建立健康阈值

> ID：14075246
> 
> 赞同：4
> 
> 时间：2012-12-28T20:16:58.157
> 
> 标签：jenkins

有没有办法改变 Jenkins 根据失败的测试计算构建健康的方式？我希望詹金斯将*任何*失败的测试视为“阳光充足”以外的东西，但到目前为止，我寻找一种方法来做到这一点没有结果。标准设置是否允许这种级别的控制，或者是否有插件可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T23:15:09.400

如果您使用支持多种测试报告格式的[xUnit 插件](https://wiki.jenkins-ci.org/display/JENKINS/xUnit+Plugin)，您可以添加构建后操作来解析构建的测试报告，并根据失败或跳过的测试数量将构建声明为不稳定或失败。

# google-maps-api-3 - Google API 控制台 - 橙色感叹号

> ID：14075247
> 
> 赞同：0
> 
> 时间：2012-12-28T20:16:59.367
> 
> 标签：google-maps-api-3, google-places-api, google-api-console

我在启用 Google Maps API V3 和 Places API 服务的 Google apis 控制台中创建了一个项目。我已提供帐单信息并验证了我的电子邮件。

在 API 访问选项卡中，我生成了一个 API 密钥，但选项卡上显示了一个橙色感叹号。（概述选项卡表明两个 API 都没有已知问题）。

当我尝试在 Chrome 中进行示例搜索时（https://maps.googleapis.com/maps/api/place/textsearch/xml?query=restaurants+in+Sydney&sensor=false&key=MyKEY）“Google Places 中返回拒绝访问状态 XML。

我认为访问被拒绝消息与橙色感叹号有关，但我已经搜索并搜索了这个感叹号的含义，但无济于事。

任何关于感叹号的含义或拒绝访问消息的原因的任何见解都非常感谢。

**编辑** 我现在可以使用 status=OK 检索 XML，但橙色感叹号仍然存在；我还是想知道是什么意思。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-06T19:38:42.927

我遇到了同样的问题，我有一个 API 密钥，并通过填写账单标签的过程使橙色感叹号消失。为了测试 API，我发现使用简单 API 框中提供的 API 并将其替换为[此处的 API 更有效](http://www.w3schools.com/googleAPI/tryit.asp?filename=tryhtml_map_first)

我发现即使显示感叹号，我也可以通过这种方式测试 API 密钥，因为我相信这仅与计费密钥有关。

# c# - 编码包含百分号的字符串数据时出现问题

> ID：14075248
> 
> 赞同：0
> 
> 时间：2012-12-28T20:17:01.313
> 
> 标签：c#, encoding, httpwebrequest

我正在开发一个项目，我必须通过 XML 字符串中的 HTTP POST 将产品信息发送到 Web 服务器。事实证明，某些产品名称的名称中可能带有 % 符号，例如“.05% Topical Cream”。每当我尝试发送产品名称中包含 % 符号的 XML 数据时，我都会收到错误消息，因为在对 XML 字符串数据进行编码时，百分号会导致数据格式不正确。

如何安全地编码和发送带有 % 登录产品名称的 XML 字符串数据？

XML 数据：

```
<node>
      <product>
        <BrandName>amlodipine besylate (bulk) 100 % Powder</BrandName>
      </product>
  </node> 
```

网页请求代码：

```
public string MakeWebServerRequest(string url, string data)
    {
        var parms = System.Web.HttpUtility.UrlEncode(data);
        byte[] bytes = Encoding.UTF8.GetBytes("xml=" + parms);
        string webResponse = String.Empty;
        try
        {
            System.Web.HttpUtility.UrlEncode(data);
            HttpWebRequest req = (HttpWebRequest)WebRequest.Create(url);
            req.Method = "POST";
            req.ContentType = "application/x-www-form-urlencoded";
            req.ContentLength = bytes.Length;

            using (Stream reqStream = req.GetRequestStream())
            {
                reqStream.WriteTimeout = 3000;
                reqStream.Write(bytes, 0, bytes.Length);
                reqStream.Close();
            }
            using (HttpWebResponse response = (HttpWebResponse)req.GetResponse())
            {
                using (StreamReader rdr = new StreamReader(response.GetResponseStream()))
                {
                    webResponse = rdr.ReadToEnd();
                    rdr.Close();
                }
                response.Close();
            }
        } 
```

我应该以不同的方式创建 Web 请求吗？在保持产品名称的同时，我可以做些什么来解决？

**已更正 - 现在正在工作。谢谢**

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T20:45:36.617

您需要正确构建请求。`application/x-www-form-urlencoded`表示每个参数都是 Url 编码的。在您的情况下`xml`，参数必须具有正确编码的值，而不仅仅是盲目连接。下面是应该让你盯着看的示例......希望你能够避免字符串连接来构造 XML（以及用原始代码中的引号构造字符串常量的疯狂方式）：

```
var parameterValue = System.Web.HttpUtility.UrlEncode("<xml>" + data);
byte[] bytes = Encoding.UTF8.GetBytes("xml=" + parameterValue); 
```

还有很多示例如何正确构建此类请求。即[带有 POST 编码问题的 C# Web 请求](https://stackoverflow.com/questions/2962155/c-sharp-web-request-with-post-encoding-question)

# c++ - C++ builder - 标签标题在 CategoryPanel 上时不会更改

> ID：14075250
> 
> 赞同：0
> 
> 时间：2012-12-28T20:17:07.603
> 
> 标签：c++, c++builder, caption, redraw

我在 CategoryPanel 上有一个标签，并试图更改它的标题 onMouseEnter 和 onMouseLeave 事件

```
 void __fastcall TForm1::Label1MouseEnter(TObject *Sender)
  {
     Label1->Caption="On";
  }

  void __fastcall TForm1::Label1MouseLeave(TObject *Sender)
  {
     Label1->Caption="Off";
  } 
```

但标签标题不会重绘。两个文本同时显示（“开”和“关”）。我试着用

```
 Label1->Repaint(); 
```

但似乎它不起作用。

# wpf - WPF中文本框到滑块的两种方式绑定

> ID：14075255
> 
> 赞同：4
> 
> 时间：2012-12-28T20:17:24.003
> 
> 标签：wpf, data-binding, slider

我最难找到一种方法来解决我在滑块和文本框上的数据绑定问题。

**设置**：滑块的当前值显示在文本框内。当用户拖动滑块时，值会反映在文本框中。用户可以选择拖动滑块并释放到他选择的值，单击滑块轨道上的任意位置设置值或在texbox中手动输入值。在最后一种情况下，在文本框中输入的值应该更新滑块位置。

texbox 以两种方式绑定到 datacontext 属性，而滑块以一种方式绑定到同一属性。当用户滑动或点击滑块跟踪器时，我使用滑块的dragcompleted事件通知datacontext修改。另一方面，当用户单击跟踪器时，我使用滑块的 OnValueChanged 事件来通知数据上下文（并使用标志来确保 OnValueChanged 不是由滑块移动触发的）

**问题**： OnValueChanged 事件即使在使用绑定值初始化滑块值时也会触发，因此我无法确定该值实际上是来自用户还是来自绑定。

您能否建议进行绑定的替代方法，以确保我们可以区分滑块的用户更新和绑定更新？谢谢你！

**更新**对不起，我忘了提及为什么我没有直接绑定滑块和文本框两种方式，如下面的答案所建议的。对数据上下文值的更新应该触发对后端服务器的调用并从数据库中检索数据。问题是当用户拖动滑块时，它会不断触发更新。我只依靠实际的 onValueChanged 事件来调用 DoWhatever 方法来解决这个问题。我希望这更清楚一点。很抱歉省略了这个...

我快速整理了下面的示例供您尝试。

*xml*：

```
<Window x:Class="SliderIssue.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<Grid HorizontalAlignment="Center"
      VerticalAlignment="Center">
    <Grid.ColumnDefinitions>
        <ColumnDefinition/>
        <ColumnDefinition/>
    </Grid.ColumnDefinitions>

    <Slider Name="slider" VerticalAlignment="Top"  
            ValueChanged="slider_ValueChanged"
            Thumb.DragStarted="slider_DragStarted"
            Thumb.DragCompleted="slider_DragCompleted"
            Value="{Binding Count}"
            Width="200"
            Minimum="0"
            Maximum="100"/>
    <TextBox VerticalAlignment="Top" 
             HorizontalAlignment="Left"
             Grid.Column="1" 
             Width="100" 
             Text="{Binding Count,Mode=TwoWay,UpdateSourceTrigger=LostFocus}" 
             Height="25"/>    
</Grid> 
```

*后面的代码：*

```
using System.Windows;

namespace SliderIssue
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        private bool _dragStarted;

        public MainWindow()
        {
            InitializeComponent();

            var item = new Item();
            DataContext = item;
        }

        private void slider_ValueChanged(object sender, RoutedPropertyChangedEventArgs<double> e)
        {
            if (!_dragStarted)
            {
                var item = (Item)DataContext;
                item.DoWhatever(e.NewValue);
            }
        }

        private void slider_DragStarted(object sender, System.Windows.Controls.Primitives.DragStartedEventArgs e)
        {
            _dragStarted = true;
        }

        private void slider_DragCompleted(object sender, System.Windows.Controls.Primitives.DragCompletedEventArgs e)
        {
            _dragStarted = false;

            var item = (Item) DataContext;
            item.DoWhatever(slider.Value);
        }
    }
} 
```

*一个简单的数据类：*

```
using System.ComponentModel;

namespace SliderIssue
{
    public class Item : INotifyPropertyChanged
    {
        private int _count = 50;
        public int Count
        {
            get { return _count; }
            set
            {
                if (_count != value)
                {
                    _count = value;
                    DoWhatever(_count);
                    OnPropertyChanged("Count");
                }
            }
        }

        public void DoWhatever(double value)
        {
            //do something with value
            //and blablabla
        }

        public event PropertyChangedEventHandler PropertyChanged;

        protected void OnPropertyChanged(string property)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(property));
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T21:16:25.647

**更新**

好的，现在我明白你为什么要这样做了。我有几个建议可能会有所帮助。

我的第一个比较固执己见，但我还是提供了它。如果您要解决的问题是限制对后端数据库的请求，我认为您的 ViewModel 不需要关注它。我会将它向下推到一个对象中，该对象根据从 ViewModel 向下传递的更新值调用后端。

`DateTimeOffset.Now`您可以通过记录每次调用查询后端数据库的方法来创建穷人的节流尝试。将该值与记录的最后一个值进行比较。如果 TimeSpan 之间的时间低于您的最小阈值，请更新与之比较的值，并忽略该请求。

您可以使用计时器做类似的事情，并在每次发出请求时重置计时器，但这更麻烦。

当调用从后端返回时，该层会引发 ViewModel 处理的事件，并对返回的数据执行它需要做的任何事情。

作为另一个建议，我还会查看[ReactiveExtensions](http://msdn.microsoft.com/en-us/data/gg577609.aspx)为您提供的内容。您需要花点时间了解它们是如何工作的，但是您可以`Observable`从事件流中创建一个，然后使用该`Throttle()`方法返回另一个`Observable`. 您订阅它`Observable`并在那里执行您的呼叫。这需要更多地重新思考软件的设计和架构，但这很有趣。

Paul Betts 基于 Rx 创建了一个完整的 MVVM 框架，称为[ReactiveUI](http://www.reactiveui.net)。我是在他的一篇博文中第一次了解到限制 Observables[的](http://blog.paulbetts.org/index.php/2010/07/05/reactivexaml-series-implementing-search-with-observableaspropertyhelper/)。

祝你好运！

**原帖**

如果我正确理解您的问题，听起来您希望 Slider 和 TextBox 都反映 DataContext 的相同属性（通常是 ViewModel）。看起来您正在尝试复制 WPF 的绑定机制为您提供的内容。我能够得到这个工作的快速原型。这是我使用的代码。

对于视图，我刚刚创建了一个新窗口，以此作为窗口的内容。

```
<StackPanel>
  <Slider Value="{Binding TheValue}" Margin="16" />
  <TextBox Text="{Binding TheValue}" Margin="16" />
</StackPanel> 
```

请注意，Slider 和 TextBox 都绑定到 DataContext 的相同（巧妙命名）值。当用户在 TextBox 中输入新值时，该值将发生变化，并且属性更改通知（在 ViewModel 中）将导致滑块自动更新其值。

这是 ViewModel 的代码（即 View 的 DataContext）。

```
class TextySlideyViewModel : ViewModelBase
{
  private double _theValue;

  public double TheValue
  {
    get { return _theValue; }
    set
    {
      if(_theValue == value)
        return;

      _theValue = value;
      OnPropertyChanged("TheValue");
    }
  }
} 
```

我的 ViewModel 派生自实现`INotifyPropertyChanged`接口的 ViewModelBase 类。该`OnPropertyChanged()`方法在基类中定义，该基类仅引发名称作为参数传递的属性的事件。

最后，我创建了 View 并分配了 ViewModel 的一个新实例作为它的 DataContext（我在`OnStartup()`本示例的 App 方法中直接执行了此操作）。

我希望这可以帮助您朝着正确的方向前进。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T21:13:00.270

更新：

与 Eric 类似，但作为单独的操作建议。

1.  正如我在下面建议的那样，将两个控件绑定到 Count 作为两种方式。
2.  创建一个计时器，它每秒触发一次，检查两个变量。
3.  (Timer Check #1) 检查数据库请求是否正在进行（例如布尔标志）。如果它是真的，它什么也不做。如果没有操作（假），则转到步骤 4。
4.  (Timer Check #2) 检查计数是否改变。如果计数已更改，它会设置数据请求正在进行标志（如在步骤 3 中找到/使用的那样）并启动异步数据库调用并退出。
5.  （数据库操作调用）获取数据库数据并相应地更新 VM。它将数据请求正在进行标志设置为 false，这允许计时器检查在计数更改时启动新请求。

这样，即使用户对滑块发疯，您也可以管理更新。

* * *

我相信你可能想多了。从滑块和文本框中删除所有事件。如果第一个值（以编程方式设置）不应调用您的 DoWhatever 方法，则在该代码中进行检查以跳过第一次初始化....

我建议您将滑块绑定到 Count 作为 TwoWay 模式，并让 Count 属性执行您需要的其他过程（如您的实体类所示）。无需检查点击或任何其他事件。如果用户更改文本框中的值，它会更改滑块，反之亦然。

```
<Slider Name="slider"
        VerticalAlignment="Top"
        Value="{Binding Count, Mode=TwoWay}"
        Width="200"
        Minimum="0"
        Maximum="100" />
<TextBox VerticalAlignment="Top"
         HorizontalAlignment="Left"
         Grid.Column="1"
         Width="100"
         Text="{Binding Count,Mode=TwoWay,UpdateSourceTrigger=LostFocus}"
         Height="25" /> 
```

# javascript - javascript中的引用类型

> ID：14075257
> 
> 赞同：3
> 
> 时间：2012-12-28T20:17:36.427
> 
> 标签：javascript

```
obj = {
  go: function() { alert(this) }
}

obj.go(); // object

(obj.go)(); // object

(a = obj.go)(); // window

(0 || obj.go)(); // window 
```

谁能解释一下为什么后两个打印窗口对象而前两个打印参考。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-28T20:19:15.493

当你直接执行一个方法时，就像最后两种形式一样，`this`指针没有设置为对象。当不在严格模式下时，它被设置为`window`（在严格模式下，它会被设置为 undefined 以帮助您捕获错误）。`this`指针是根据您在 javascript 中调用某些内容的方式设置的 。

始终确保相应`this`设置指针的最简单方法是始终在对象的上下文中调用该方法，例如：

```
obj.go(); 
```

这里有些例子：

```
obj.method()    // this in method automatically set to obj

var a = obj.method();
a();            // this set to window as no object context is provided

var a = obj.method();
a.call(obj)     // this explicitly set to obj by .call()
a.apply(obj)    // this explicitly set to obj by .apply() 
```

您应该记住的是，这`obj.go`只是 javascript 中的一个函数，最初存储为`obj`. 但是，一旦您获得了该属性值，它就只是一个函数指针，不再与任何特定对象有任何显式关联。`this`如果您希望在方法内适当地设置指针，则必须在如何调用它时为其提供与对象的关联。这与其他一些语言不同，并且与 JS 中的许多不同之处一样，它既可以是您可以利用的功能，也可以是偶尔令人困惑的学习方式。

# actionscript-3 - 涂鸦游戏中的碰撞检测错误

> ID：14075263
> 
> 赞同：0
> 
> 时间：2012-12-28T20:18:07.833
> 
> 标签：actionscript-3, collision-detection, trigonometry

所以我试图在涂鸦游戏中检测圆形玩家和线条之间的碰撞（使用 as3）。为此，我知道 3 个点，即线的端点和包含圆圈的图像的左上角。

```
//Detects collision between a given player and a given line
public function detectCollision(p:Player, l:Line): Boolean{
    //First create a line running parallel to l that runs through the center of p
    //p hereby referred to by "the player"
    //l hereby referred to by "the offending line"
    //start by finding the center of p
    var pCenter:Point = new Point(p.x + 38, p.y + 38); //38 = radius
    //now find the angle of the offending line (in Q1 or Q2)
    var theta:Number = Math.atan2(l.y2 - l.y1, l.x2 - l.x1);
    //now make a line within the player that conforms to this angle
    var paraLine:Line = new Line(pCenter.x - Math.cos(theta) * 38, pCenter.y - Math.sin(theta) * 38, pCenter.x + Math.cos(theta) * 38, pCenter.y + Math.sin(theta) * 38);

    //Next we're going to create a perpendicular line in the circle pointing at the offending line
    var perpenLine:Line = new Line(pCenter.x - Math.cos(theta) * 38, pCenter.y + Math.sin(theta) * 38, pCenter.x + Math.cos(theta) * 38, pCenter.y + Math.sin(theta) * 38);
    var closestOnCircle:Point = new Point(pCenter.x - Math.cos(theta) * 38, pCenter.y + Math.sin(theta) * 38); //this is the point on the circle closest to the offending line

    //Now to find where the line running perpendicular to the offending line through the center of the player intersects with the offending line
    //this is done by using algebra
    //y = mx + b (perpenLine)
    //y = nx + c (offending line)
    //mx + b = nx + c
    //b - c = (n - m)x
    //x = (b - c) / (n - m)
    var xIntercept:Number = (perpenLine.getOffset() - l.getOffset()) / (l.getSlope() - perpenLine.getSlope());
    var pointOnLine:Point = new Point(xIntercept, xIntercept * l.getSlope() + l.getOffset()); //point on the line where the intersection happens

    //Finally whether a collision has occurred is calculated
    //this is done by seeing if both pCenter and closestOnCircle are on the same side of pointOnLine
    if((pCenter.y > pointOnLine.y && closestOnCircle.y > pointOnLine.y) || (pCenter.y < pointOnLine.y && closestOnCircle.y < pointOnLine.y))
        return false;
    else
        return true;
} 
```

代码有点复杂，我不擅长三角学，我一直无法找出它为什么不起作用。播放器从屏幕顶部开始，当线条出现时，它就记录了一次碰撞。如果有任何问题，请提出，我真的很想弄清楚这一点。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T20:54:56.377

似乎您可以跳过几个步骤 - 可能有更聪明的方法，但我认为您不需要计算角度 theta。

从`(x1, y1)`到的线`(x2, y2)`有斜率`m = (y2-y1)/(x2-x1)`；将圆心连接`(xc, yc)`到最接近的线的线垂直于该斜率（如您所说），所以它的斜率是`-1/m`。呼叫这些线相交的点`(xi, yi)`。我们可以写`yi = (xi - x1)*m + y1`（从原始行开始），我们也可以写`yi = (xi -xc)(-1/m) + yc`. 2 个方程，2 个未知数，相对直接地求解 xi 和 yi。然后简单地确定从圆心到交叉点的线的长度，如果它小于您所接触的半径 (38)。

值得注意的是，如果您与线的无限延伸对齐但不在其顶部，则这看起来像是碰撞，因为我们仅使用两个点来确定整条线。如果您不需要与该段发生碰撞并绕过它，我将在计算最近的接近段之前在圆周围的框的角和线周围的框之间进行简单的边界框碰撞测试。

# jquery - 如何调用行为略有不同的插件？

> ID：14075269
> 
> 赞同：0
> 
> 时间：2012-12-28T20:18:39.143
> 
> 标签：jquery, plugins

我有一个简单的插件，其中包含初始化、关闭和打开功能。我有一组调用这个插件的 html 模板。仅对于某些模板，我想对这个插件做一些稍微不同的行为，比如说在打开函数中添加一个不同的类，并在关闭时删除同一个类。什么是优雅的做法？我应该找到 html 的 id 并在同一个插件的 open 和 close 函数中执行 if else 还是有更好的方法来做到这一点？

```
;(function ($, window, document, undefined) {

    function Plugin(element, options) {
            Window = this;
            this.element = element;
            this._name = pluginName;
            this.init(element);
        }

    Plugin.prototype = {
            init: function(element) {
     },
    close:function(e){
    //removes a class and hides the element
    },
    open:function(element){
    //adds a class and shows the element
    }

    }
//Extend Global jQuery (where we actually add the plugin!)
    $.fn[pluginName] = function (options) {
        plugin = $.data(window, 'plugin_' + pluginName);
        if (!(plugin instanceof Plugin)) {
            $.data(window, 'plugin_' + pluginName,
            plugin = new Plugin( this, options ));
        }
        return $Extend(this).each(function () {
            $.data(this, 'plugin_' + pluginName, plugin);
        });
    };

}(jQuery, window, document)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T20:39:48.730

我将通过向`options`您传递给插件的参数添加一个可选对象来处理初始化设置。

本质上，只需确保`options`所有相关初始化方法都可以访问参数，然后执行以下操作：

```
open: function(element){
var initClass = options.initClass || "DEFAULTVALUE";
 //adds "initClass" as a class and show the element
} 
```

|| 是一个速记技巧，表示如果“options.initClass”不存在，则默认为下一个值。您可以了解更多关于|| [在这里](https://stackoverflow.com/a/2802064/1538708)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T20:45:55.187

如果您有一组选项：

```
MyPlugin.options = {
    width: 200,
    height: 500,
    add: function () { 
        alert("add was called"); 
    },
    delete: function () { 
        alert("delete was called");
    }
}; 
```

当您将选项传递给插件时，您可以覆盖默认值：

```
function MyPlugin(options){
    options = $.extend({}, MyPlugin.options, options);

    options.add();
} 
```

每当您创建插件的实例时，您都可以通过设置其选项来覆盖一个或多个属性：

```
var plugin = new MyPlugin({
    width: 100,
    add: function () {
        alert("My add was called!");
    }
}); 
```

在前面的代码中，会显示一条警报，显示“我的添加已被调用！”。

# extjs3 - ext.xtemplate 中的“if”用于不存在的 JSON 对象

> ID：14075271
> 
> 赞同：0
> 
> 时间：2012-12-28T20:18:48.110
> 
> 标签：extjs3

我的 JSON 大部分时间都在其结构中包含这两个：“类型”和“评论”。有时它有“类型”、“调查”、“评论”。所以，我想使用“if”让 ext.xtemplate 显示它找到的那些。例如我试过这个但不起作用：

```
new Ext.XTemplate(
    '<div style="text-align:justify;text-justify:inner-word">',
    '<b>Type:</b> {type}<br/>',
    '<tpl if="survey">',
        <b>Survey:</b> {survey}<br/>',
    '</tpl>',
    '<b>Comments:</b> {comments}',
    '</div>' 
```

我也尝试过这些，但没有成功：

```
<tpl if="survey != {}">
<tpl if="survey != undefined"> 
```

怎么可能是检测不存在物体的正确方法？，提前谢谢。

PS。我正在使用 ExtJS 3.4

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T14:20:02.817

使用`values`局部变量，例如：

```
var tpl = new Ext.XTemplate(
    '<div style="text-align:justify;text-justify:inner-word">',
    '<b>Type:</b> {type}<br/>',
    '<tpl if="values.survey">',
        '<b>Survey:</b> {values.survey}<br/>',
    '</tpl>',
    '<b>Comments:</b> {values.comments}',
    '</div>'
); 
```

除此之外`values`，还有其他可用的变量，在某些情况下很有用：`parent`, `xindex`, `xcount`.

预处理后的模板作为函数执行，您的模板如下所示：

```
function (values, parent, xindex, xcount){ // here are values, parent, etc
    with(values){ // each property of values will be visible as local variable
        return [
            '<div style="text-align:justify;text-justify:inner-word"><b>Type:</b> ',
            (values['type'] === undefined ? '' : values['type']),
            '<br/>',
            this.applySubTemplate(0, values, parent, xindex, xcount), // each <tpl> is converted into subtemplate
            '<b>Comments:</b> ',
            (values.comments === undefined ? '' : values.comments),
            ''
        ].join('');
    }
} 
```

这些知识通常有助于理解 XTemplates。

上述变量的示例用法：http: [//jsfiddle.net/gSHhA/](http://jsfiddle.net/gSHhA/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-22T17:49:34.223

我用`<tpl if="!!survey>"`

# css - 删除 a 中的填充 不打扰列表的其余部分

> ID：14075272
> 
> 赞同：0
> 
> 时间：2012-12-28T20:18:50.903
> 
> 标签：css, image, dreamweaver, padding

我有一个作为侧边栏的列表，左侧填充为 20px。在我的列表末尾，我插入了一张图片，不希望 20px 影响我的图片。如何仅为我的图像删除填充？

我试图包含屏幕截图，但由于我是新用户，该功能被禁用。

```
#sidebar li {
    margin-bottom: 40px;
    padding: 0 15px 0 20px;
}

<li>
    <h2>Follow</h2>
    <p><img src="../../Desktop/Root/_Images/follow.jpg" width="240" height="76" alt="Follow" /></p>
</li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T20:26:41.347

使用负偏移量`IMG`或`P`补偿`padding-left`：

```
IMG {margin-left: -20px; } 
```

或重置特定项目的填充，例如最后一个：

```
#sidebar LI:last-child {padding-left: 0; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T20:21:47.000

在 CSS 中，更具体的规则胜过不太具体的规则，因此您定义的任何样式：

```
sidebar li img { 
```

将覆盖从以下位置继承的：

```
sidebar li { 
```

# mysql - Hibernate 返回重复的行

> ID：14075273
> 
> 赞同：0
> 
> 时间：2012-12-28T20:18:53.863
> 
> 标签：mysql, hibernate, duplicates, row, criteria

我有会话课

```
@Id
@GeneratedValue
private Long id;
@Column(name = "Subject", length = 50)
private String subject;
@Temporal(javax.persistence.TemporalType.TIMESTAMP)
@Column(name = "SentTime")
private Date date;
@OneToMany(cascade = CascadeType.ALL, orphanRemoval = true)

@JoinTable(name = "Conversation_ConversationParticipants",
           joinColumns = @JoinColumn(name = "ConversationID"), inverseJoinColumns = @JoinColumn(name = "ConversationParticipantID"))
private List<ConversationParticipant> participants;
@OneToMany(cascade = CascadeType.ALL)
@OrderBy("timeEntry desc")
@JoinTable(name = "Conversation_ConversationLogs",
           joinColumns = @JoinColumn(name = "ConversationID"), inverseJoinColumns = @JoinColumn(name = "ConversationLogID"))
private List<ConversationLog> logs; 
```

我有以下休眠代码

```
@Override
public List<ConversationLabel> retrieve(User user) {
    Criteria criteria = super.createCriteria();
    criteria.add(Restrictions.eq("user", user));

    return (List<ConversationLabel>) criteria.list();
} 
```

在数据库中，我有 2 个标签，它们都指向 1 个用户和 1 个对话。他们指向的用户是同一用户，但对话不同。

所以换句话说，我的查询应该返回 2 行但是我得到的是 4 行。

我知道如何通过使用来防止这个问题

```
 criteria.setResultTransformer(Criteria.DISTINCT_ROOT_ENTITY); 
```

但是我想了解生成重复的查询、数据库或注释有什么问题。

如果您需要更多信息，请告诉我。

谢谢你。干杯

# css - CSS 问题：first-of-type :first-letter

> ID：14075274
> 
> 赞同：4
> 
> 时间：2012-12-28T20:18:57.373
> 
> 标签：css, css-selectors

我已将我的页面设置为在第一段内容上创建一个大字首字母。这可以按预期工作，但是当我在受影响的元素之前有另一个具有指定类的 div 时，它会使首字下沉消失。

查看示例...
正确显示：http: [//jsfiddle.net/KPqgQ/](http://jsfiddle.net/KPqgQ/)
错误显示：http: [//jsfiddle.net/d73u9/](http://jsfiddle.net/d73u9/)

我的页面中有以下代码：

```
<section id="review">
  <div class="content_right"></div>
  <div class="content_left">
    <p>text</p>
    <p>text</p>
  </div>
  <div class="content_left">
    <p>text</p>
    <p>text</p>
  </div>
</section> 
```

使用以下 CSS：

```
 #review .content_left:first-of-type p:first-of-type{
        padding-top:10px;
    }

    #review .content_left:first-of-type p:first-of-type:first-letter{
        float: left;
        line-height:90%;
        padding-right: 15px;
        padding-bottom: 10px;

        font-family: "Georgia",_serif;
        font-weight: bold;
        font-size: 60px;
        color:black;
    } 
```

创建一个大写首字母。

当我删除“content_right” div 时，此代码有效，但在那里，CSS 不起作用。我以为我有关于声明的正确顺序，但我一定遗漏了一些东西。

有谁知道为什么这不能按预期工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-28T20:39:29.670

这按预期工作，因为 :first-of-type 选择器实际上选择了特定类型元素（*section、div、span 等*）中的第一个，而实际上并没有选择类的第一个类型。

## **备择方案**

**'~' 修复**

**[这里](https://stackoverflow.com/questions/3615518/css-selector-to-select-first-element-of-a-given-class/3615559#3615559)**`~`提到的波浪号' '解决方法。

```
/* Targets all paragraphs */
p 
{
        display: block;
        clear: both;
}

/* Targets all paragraphs within divs in #review */
#review div p
{ 
        padding-top:10px;
}

/* Targets the first letter within each paragraph */
#review div p:first-letter{
        float: left;
        line-height:90%;
        padding-right: 15px;
        padding-bottom: 10px;
        font-family: "Georgia",_serif;
        font-weight: bold;
        font-size: 60px;
        color:black;
}    

/* Removes the padding from all except the first paragraphs */
#review > div ~ div > p ~ p, 
#review > .content_left ~ .content_left p:first-of-type 
{
        padding-top: 0px;  
}

/* Removes the first letter stylings of the non-first paragraphs within 
   .content_left classes */
#review > .content_left ~ .content_left p:first-of-type:first-letter, 
#review > div ~ div > p ~ p:first-letter 
{
        float: none;
        line-height:90%;
        padding-right: 0px;
        padding-bottom: 0px;
        font-family: "Georgia",_serif;
        font-weight: normal;
        font-size: 12px; 
} 
```

**[使用 '~' 方法的示例](http://jsfiddle.net/d73u9/7/)**

（感谢 BoltClock，在这方面帮助我，毕竟这是他的方法。）

* * *

**切换 div 顺序**

将`.content_right`div 移到 .content_left 部分后面，因为它们是浮动的，您仍然可以保持相同的布局。

*代码：*

```
<section id="review">
    <div class="content_left">
        <p>text</p>
        <p>text</p>
     </div>
     <div class="content_left">
        <p>text</p>
        <p>text</p>
     </div>
     <div class="content_right"></div>
</section>​ 
```

**[切换顺序示例](http://jsfiddle.net/d73u9/3/)：**

* * *

**使用 :nth-of-type 选择器**

使用`:nth-of-type`选择器选择合适的 div。

*代码：*

```
#review .content_left:nth-of-type(2) :first-child
{
    padding-top:10px;
}

#review .content_left:nth-of-type(2) :first-child:first-letter
{
    float: left;
    line-height:90%;
    padding-right: 15px;
    padding-bottom: 10px;
    font-family: "Georgia",_serif;
    font-weight: bold;
    font-size: 60px;
    color:black;
} 
```

**[使用 :nth-of-type 的示例](http://jsfiddle.net/d73u9/2/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T22:36:03.847

这是我对`~`解决方法的看法。我想我会加入，因为 Rion Williams 很友好地从[他的回答](https://stackoverflow.com/questions/14075274/issue-with-css-first-of-type-first-letter/14075512#14075512)中链接到我对解决方法的描述（这也很好地解释了为什么你的代码不能按预期工作）：

```
/* The first p in all .content-left elements */
#review .content_left p:first-of-type {
    padding-top: 10px;
}

/* 
 * Undo the above style for the first p in subsequent .content-left elements.
 */
#review .content_left ~ .content_left p:first-of-type {
    padding-top: 0px;
}

/* The first letter in the first p in all .content-left elements */
#review .content_left p:first-of-type:first-letter {
    float: left;
    line-height: 90%;
    padding-right: 15px;
    padding-bottom: 10px;
    font-family: "Georgia", _serif;
    font-weight: bold;
    font-size: 60px;
    color: black;
}

/* 
 * Undo the above styles for the first letter in the first p
 * in subsequent .content-left elements.
 * 
 * I'm just using the initial values for every property here; you'll want to
 * adjust their values as necessary.
 */
#review .content_left ~ .content_left p:first-of-type:first-letter {
    float: none;
    line-height: normal;
    padding-right: 0px;
    padding-bottom: 0px;
    font-family: inherit;
    font-weight: normal;
    font-size: medium;
    color: inherit;
} 
```

[jsFiddle 预览](http://jsfiddle.net/BoltClock/d73u9/8)

根据您的布局，您可能还需要对某些其他类重复此操作。不幸的是，由于 CSS 还没有提供匹配某个类的第一个元素的选择器，因此您现在必须使用覆盖规则。

# javascript - 如何获取浏览器未解释的css样式表值？

> ID：14075275
> 
> 赞同：4
> 
> 时间：2012-12-28T20:19:02.913
> 
> 标签：javascript, html, css

我想获取浏览器在渲染期间实际未使用的css样式表的值。

例如：

```
.blur {    
  data : "Great";
} 
```

**假设我在 div 上使用此类：**

```
<div class = "blur"></div> 
```

**我尝试过但不起作用。**

`$(".blur").css("data");`

**预期产出**

```
Great 
```

**编辑：对不起，我之前没有提到这一点，现在似乎引起了一些混乱。但是请阅读这个！**

正如我在下面的评论中所说并想强调的那样，我已经制定了在 Internet Explorer 上生成一些文本阴影的算法——不是最好的算法，但仍然可以解决问题。但是，我试图访问某个元素的 text-shadow 属性，但我不能，因为 Internet Explorer 不存储它，因为它并没有真正呈现它，所以我需要访问样式表数据。所以我问的问题是再次访问“数据”，它也不像 IE8、IE9 的 textShadow 那样存储。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T20:28:14.213

您可以将数据存储在 HTML5 数据属性中。

```
<div class="blur" data-foo="great"></div> 
```

然后用 jQuery 检索它

```
$('.blur').data('foo'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T20:36:06.730

[您可以对样式表标签进行原始访问，这是您能做的最好的事情，然后您可以使用http://jsfiddle.net/V7Zmn/1/](http://jsfiddle.net/V7Zmn/1/)之类的方式解析文本以获取您正在寻找的信息

```
// You'd have to find the right style tag
document.getElementsByTagName("style")[0].innerText
// outputs  a string like:   .blur {      color: red;  data : "Great";} 
```

这看起来像一个大技巧，~~但我还想不出一种更优雅的方式来做你需要的事情。~~，更好的方法是在 Internet Explorer 中使用类似 IE 的过滤器而不是[文本阴影？](https://stackoverflow.com/questions/4205478/text-shadow-in-internet-explorer)我认为您尝试自己解决此问题的方法将花费比其价值更多的努力，并且您将逆流而上，与其他代码产生摩擦。

```
.myclass {    
  text-shadow: 2px 2px gray;
  filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray')
} 
```

[例子](http://jsfiddle.net/V7Zmn/11/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T20:24:49.623

我不确定浏览器是否有义务保留它不理解的属性。您可以尝试使用此代码，它显示[了如何以编程方式访问样式表规则](http://www.hunlock.com/blogs/Totally_Pwn_CSS_with_Javascript)。然而，正如其他人所指出的，这可能不是 CSS 的最佳用途，即使它碰巧起作用。

# android - 淡入/淡出和 textView

> ID：14075281
> 
> 赞同：1
> 
> 时间：2012-12-28T20:19:26.113
> 
> 标签：android

使用

```
overridePendingTransition(R.anim.fadein,R.anim.fadeout) 
```

使用 (R.anim.fadein/out) 更改默认动画。

在我的代码中，我有一个按钮侦听器来更改 textView：

```
textView1.setText(""+prog[x]) 
```

当我点击按钮时，我可以使用这个 R.anim.fadein/out 吗？（当文本发生变化时）

# ruby-on-rails - RSpec 重新加载是如何工作的？

> ID：14075284
> 
> 赞同：1
> 
> 时间：2012-12-28T20:19:45.233
> 
> 标签：ruby-on-rails, rspec

我不明白为什么以下测试中的第一个通过而第二个没有。显然，这是因为我在第一个场景中使用了一个块，但与第二个场景相比，它实际上做了什么？

```
require 'spec_helper'

feature "Edit user account" do
  let(:user) { FactoryGirl.create(:user) }

  before(:each) do
    sign_in_as!(user)
    visit '/settings'
  end

  scenario 'A user should be able to update their login info with current password' do
    fill_in 'user_first_name', :with => 'Mario'
    fill_in 'user_email', :with => 'mario@bross.com'
    fill_in 'user_password', :with => 'goshrooms'
    fill_in 'user_current_password', :with => 'ilovebananas'
    click_button 'Update'

    user.reload do |u|
      u.first_name.should eq 'Mario'
      u.email.should eq 'mario@bross.com'
      u.password.should eq 'goshrooms'
    end
    current_path.should eq '/settings'
    page.should have_content('You updated your account successfully.')
  end

  scenario "A user should be able to update their login info with current password" do
    fill_in "user_password", :with => "magical"
    fill_in "user_current_password", :with => 'ilovebananas'
    click_button "Update"

    current_path.should eq "/settings"
    user.reload.password.should eq "magical"
  end
end 
```

运行测试时，我得到：

```
1) Edit user account A user should be able to update their login info with current password
 Failure/Error: user.reload.password.should eq "magical"

   expected: "magical"
        got: "ilovebananas"

   (compared using ==) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T22:15:57.250

正如上面的评论中提到的，密码不是数据库中的一个字段。因此，我没有测试密码，而是测试了 encrypted_pa​​ssword 字段。

```
 feature "* Edit user account:" do
   let(:user) { FactoryGirl.create(:user) }  

   before(:each) do
      visit "/login"
      fill_in "user_email", :with => user.email
      fill_in "user_password", :with => "ilovebananas"
      click_button "Sign in"
      visit '/settings'
      @old_encrypted_password = user.encrypted_password
    end

    scenario 'A user should be able to update their info with current password' do
      ....
      user.reload.encrypted_password.should_not eq @old_encrypted_password
    end
end 
```

# html - maxPostSize 是否适用于多部分/表单数据文件上传

> ID：14075287
> 
> 赞同：11
> 
> 时间：2012-12-28T20:20:11.847
> 
> 标签：html, tomcat, tomcat6, multipartform-data, server.xml

我在 Tomcat 服务器上有一个允许上传文件的 webapp。文件上传的大小有限制，我希望先发制人地强制执行该限制（即，一旦超过限制，文件上传就会失败，而不是传输整个文件，检查它是否太大并且然后发送错误）。

我尝试通过添加`maxPostSize="1000"`到 server.xml 中相关连接器的连接器部分来做到这一点，但我仍然可以上传更大的文件。

我看到一篇[帖子](https://stackoverflow.com/questions/7696197/tomcat-maxpostsize-value-ignored-with-xmlhttprequest)表明 maxPostSize 仅适用于特定的内容类型。

所以我的问题是我正在做的事情是否应该有效。我的限制没有效果是因为我配置了 Tommcat 错误，还是因为该字段没有应用于我正在做的那种帖子？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-29T00:52:32.127

[这里](http://tomcat.10.n6.nabble.com/The-purpose-of-maxPostSize-td2158253.html)有一个关于这个话题的内容非常丰富的讨论。

据我了解，Tomcat 仅在内容类型为`application/x-www-form-urlencoded`. 对于多部分，您必须自己阅读流并自己执行限制。处理多部分数据的一个很好的工具是[Apache FileUpload](http://commons.apache.org/fileupload/)。

# ruby - 使用带有闭包的子方法的Ruby错误

> ID：14075289
> 
> 赞同：1
> 
> 时间：2012-12-28T20:20:42.030
> 
> 标签：ruby, regex

我不是 Ruby 开发人员，但我正在尝试使用 1 行 Ruby 脚本来增加我们使用 Jenkins 构建的 Grails 应用程序的 3 部分版本号。版本号存储在一个名为 application.properties 的简单属性文件中。我知道有很多方法可以做到这一点，但我的问题是针对 Ruby 以及为什么它不起作用。

为了测试，我将 application.properties 减少到一行：

```
app.version=0.2.8 
```

我想做的就是增加最后一个数字。而已。因此，我在网上找到了一些代码并对其进行了破解：

```
ruby -pi.bak -e 'sub(/^app\.version=(\d+)\.(\d+)\.(-?\d+)/) { "app.version=#{$1}.#{$2}.#{$3.to_i.next}" }' application.properties 
```

此代码在 OS X 上的 Ruby 1.8.7 上完美运行，但在 Linux 上的 Ruby 1.9.3 上失败：

```
-e:1:in `sub': wrong number of arguments (1 for 1..2) (ArgumentError)
    from -e:1:in `sub'
    from -e:1:in `<main>' 
```

请注意，如果直接应用于字符串文字，则该表达式在 Linux 上有效：

```
ruby -e 'puts "app.version=0.2.8".sub(/^app\.version=(\d+)\.(\d+)\.(-?\d+)/) { "app.version=#{$1}.#{$2}.#{$3.to_i.next}" }' 
```

我也尝试过 gsub 但这也不起作用（但出于不同的原因）。

我必须在这里遗漏一些简单的东西。我已经尝试过使用带有 sub() 的闭包的其他示例，它似乎工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T12:31:40.277

由于 BernardK 建议并非所有版本的 Ruby 都将 -p 视为相同，并且由于我的代码在应用于字符串文字时有效，因此这里有一个适用于 1.8.7 和 1.9.3 的解决方案。创建一个名为 incAppVersion.rb 的文件：

```
if $_ =~ /^\s*app\.version\s*=/
    print $_.sub(/(\d+)\.(\d+)\.(-?\d+)/) { "#{$1}.#{$2}.#{$3.to_i.next}" }
else
    print $_
end 
```

并运行它：

```
ruby -ni.bak incAppVer.rb application.properties 
```

-n 很酷！

请随时提出改进建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T23:05:49.050

```
$ ruby -pi.bak -e'$_.chomp!; $_ = $_[0..-2] + $_[-1, 1].succ + "\n" if $_[0..11] == "app.version="' application.properties 
```

正如 Pickaxe(*) 对 -p 的解释：*将您的程序代码放在循环* `while gets; ...; print; end`中。

`gets`将刚刚读入的行放入`$_`.
`chomp!`删除 CRLF。
`print`没有参数 prints `$_`，因此我们必须修改 $_ :`$_ = ...`
`$_[0..-2]`是输入行，除了最后一个字符
`$_[-1, 1]`是最后一个字符，长度为 1（在 Ruby 1.8 中需要获取一个字符，而不是数字）
`$_[-1, 1].succ`是下一个
`+ "\n"`要放置的字符/数字再次 CRLF（在 Windows 上将其更改为“\r\n”）
`if $_[0..11] == "app.version="`以仅处理所需的属性

```
$ ruby -v
ruby 1.9.2p320 (2012-04-20 revision 35421) [x86_64-darwin12.2.0] 
```

在 OS X ML 上测试。
之前的文件：

```
app.version=0.2.8
line2 
```

两次执行后的文件：

```
app.version=0.2.10
line2 
```

(*) [http://pragprog.com/book/ruby3/programming-ruby-1-9](http://pragprog.com/book/ruby3/programming-ruby-1-9)

# java - 是否可以为 LIKE 使用准备好的语句占位符？

> ID：14075291
> 
> 赞同：1
> 
> 时间：2012-12-28T20:21:04.280
> 
> 标签：java, mysql, prepared-statement

这失败了：
`db.prepareStatement("SELECT * FROM " + table + " WHERE " + column + " LIKE '?%'");`

因为`?`不被识别为值的占位符。我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-28T20:25:34.100

将通配符放在变量中，而不是语句中，例如：

```
stmt = db.prepareStatement("SELECT * FROM " + table + " WHERE " + column + " LIKE ?");
stmt.setString(1, "myterm%"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T20:27:42.730

尝试将百分号作为 LIKE 参数的一部分：

```
db.prepareStatement("SELECT * FROM " + table + " WHERE " + column + " LIKE ?"); 
```

我不太喜欢这个查询。我认为以这种方式连接表和列不会节省太多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T20:47:26.410

将您的值传递给`CONCAT()`函数：

```
db.prepareStatement("SELECT * FROM " + table 
    + " WHERE " + column 
  + " LIKE CONCAT(?, '%')"); 
```

这样做的好处是进行调用的代码不需要知道参数是否与 LIKE 一起使用，因此您可以将相同的参数值用于其他非 LIKE 查询。

# mongodb - 使用 Mongo 还原将集合导入到非本地地址

> ID：14075294
> 
> 赞同：2
> 
> 时间：2012-12-28T20:21:16.193
> 
> 标签：mongodb, pymongo, mlab, database

我正在尝试将集合从本地计算机上的 mongoDB 实例复制到由 mongoLabs 托管的集合。

我可以将集合转储到一个`dump`目录中，但是当我尝试使用下面的命令导入时，我得到一个：`No such file or directory: "/dump/my_db/my_coll.bson"`错误。这是我使用的命令：

```
mongorestore -h ds047057.mongolab.com:47057 -d main_db -c main_coll -u xxxx -p xxxx /dump/my_db/my_coll.bson 
```

如果我使用完整的路径名，我仍然会遇到同样的错误。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T20:50:23.740

我相信您想指向`mongorestore`包含您的数据库的目录，而不是包含您所针对的特定集合的文件。所以：

```
mongorestore -h ds047057.mongolab.com:47057 -d main_db -c main_coll -u xxxx -p xxxx /dump/my_db 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-19T10:31:49.057

是的！谢谢杰瑞德！

--directoryperdb 在以下授权时无法工作。

```
mongorestore -u xxx_production -p -h 127.0.0.1 --directoryperdb rongyoudao_production_mongodb 
```

虽然 -d 在下面工作。

```
mongorestore -h 127.0.0.1:27017 -d xxx_production -u xxx -p  /root/backups/2014-06-19/xxx_production_mongodb/xxx_production 
```

# c# - 字符串拆分算法

> ID：14075299
> 
> 赞同：-3
> 
> 时间：2012-12-28T20:21:34.837
> 
> 标签：c#, string, split

我有一个字符串。我想用给定的字符串数组将这句话拆分为更小的字符串。

例如：

输入字符串是`"Word1 Word2 Word3 Word4 Word5 Word6 Word7 Word8"`，我想在没有的情况下拆分它`["word2, word7, word4"]`

输出就像

```
"word1"  
"word3"  
"word5 word6"  
"word8" 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T20:25:20.693

使用[String.Split Method (String[], StringSplitOptions)](http://msdn.microsoft.com/en-us/library/tabh47cf.aspx)方法。

```
var inputString = "Word1 Word2 Word3 Word4 Word5 Word6 Word7 Word8" ;
var separators = new []{"word2", "word7, "word4"};
var output = inputString.Split(seperators,StringSplitOptions.None); 
```

# c# - C# 泛型或反射 - 调用未知类的函数

> ID：14075303
> 
> 赞同：1
> 
> 时间：2012-12-28T20:21:58.360
> 
> 标签：c#, generics, reflection, static, game-engine

我正在制作一个游戏，其中工作人员根据当前的`Task`. 每个工人将被分配一个任务列表，按首选顺序（受玩家决定的影响）。

当一项任务完成时（例如，从 X 到 Y 拿物品），工人需要通过检查他们的可能任务列表来开始一个新任务，看看每个任务是否可以执行，如果可以，将他们当前的任务设置为该任务并启动它（最后一个任务 - “漫游”总是可用的）。

我目前使用一个大的 switch 语句和 Enums 来实现这个工作，但现在想概括这个代码来创建一个`Task`类，并给工作人员一个首选任务列表、一个`GetNextTask()`函数，并在工作人员的`Update()`方法中调用`currentTask.update()`（这将得到worker 来做他在当前任务下需要做的任何事情，并且`worker.GetNextTask()`在任务完成时调用）。

我不清楚的是在工作人员中存储任务的最佳方式。我应该使用：

1）反射。将可能的任务存储为类型列表，然后使用反射来 a) 调用`public static virtual bool CanPerformThisTask()`在每个子类中被覆盖的静态方法，以及 b) 为工作人员创建该任务的实例？（下面的代码示例尝试 - 但无法测试）

2）每当工作人员需要获得新任务（可能使用激活器）时，实例化所有任务，并检查`(Task)task.CanPerformThisTask()`每个任务 - 如果为真，则执行该任务。但是，将它们全部实例化似乎效率低下？

3) 泛型。这可以使用泛型来完成吗？如果是这样，怎么做？

这是我的课程的一个片段，可以让我了解我正在尝试做的事情：

工人阶级：

```
protected List<Point> waypoints = new List<Point>();
public bool reachedDestination { get { return waypoints.Count == 0; } }
protected Task task;
public List<Type> possibleTasks;

public Worker(Task initialTask, List<Type> initialPossibleTasks ...)
: base(...)
{
     task = initialTask;
     possibleTasks = initialPossibleTasks;
}

public override void Update()
{
     base.Update();
     if (!reachedDestination) Move();
     task.Update();
}

public void GetNextTask()
{
    foreach (Type t in possibleTasks)
    {
        //reflection code here - will this work and can we do this with generics instead?
        Bool canDoT = (bool)t.GetMethod("CanPerformThisTask", BindingFlags.Static | BindingFlags.Public).Invoke(null, null);
        if (canDoT)
        {
            task = Activator.CreateInstance(t);
            return;
        }
    }
} 
```

这是我的基本任务类的一些不完整代码（不应实例化）：

```
public class Task
{
    public Worker worker;

    public virtual static bool CanPerformThisTask()
    {
        //never call this from here - always from subclasses
        return false;
    }

    public Task()
    {
        //set up code here
    }

    public virtual void Update()
    {
        //make worker do relevant activities here
        //call finish task when done
    }

    public void FinishTask()
    {
        worker.GetNextTask();
    }

} 
```

以下是工作人员将在其可能任务列表中拥有的任务示例：

```
public class T_WorkerWander : Task
{

    public static override bool CanPerformThisTask()
    {
        //can always wander (other Tasks will have conditions here)
        return true;
    }

    public T_WorkerWander()
        : base()
    {
    }

    override public void Update()
    {
        //make the worker wander here
        if (worker.reachedDestination) FinishTask();
    }

} 
```

* * *

更新：这是我现在开始工作的代码

任务类：

```
public abstract class Task
{
    //the entity holding this task
    public TaskableEntity taskEntity;

    public List<TaskStage> taskStages;
    public TaskStage currentTaskStage { get { return taskStages[0]; } }

    public Task(TaskableEntity t) { taskEntity = t; }

    /// <summary>
    /// the conditions for the Task to be started
    /// </summary>
    public virtual bool CanStart()
    {
        return true;
    }

    public void Start()
    {
        taskStages = new List<TaskStage>();
        InitialiseTaskStages();
        taskStages[0].Start();
    }

    public abstract void InitialiseTaskStages();

    public void Update()
    {
        currentTaskStage.Update();
        if (currentTaskStage.IsComplete()) TaskStageComplete();
    }

    public void TaskStageComplete()
    {
        taskStages.RemoveAt(0);
        if (taskStages.Count == 0) taskEntity.TaskComplete();
        else currentTaskStage.Start();
    }

    public void SetTaskStages(params TaskStage[] t)
    {
        taskStages = t.ToList();
    }

    public void Interrupt()
    {
        currentTaskStage.Interrupt();
    }

} 
```

任务阶段类：

```
public sealed class TaskStage
{
    private Task task;

    private List<Point> pointsToMoveTo;
    public void SetPointsToMoveTo(Point p) { pointsToMoveTo = new List<Point>() { p }; }
    public void SetPointsToMoveTo(params Point[] p) { pointsToMoveTo = p.ToList(); }
    public void SetPointsToMoveTo(List<Point> p) { pointsToMoveTo = p; }
    public Action actionToApply;

    private float timeToWait;
    public void SetWait(float wait) { timeToWait = wait; }

    private IReservable[] itemsToReserve;
    public void SetItemsToReserve(params IReservable[] items) { itemsToReserve = items; }

    private IReservable[] itemsToUnreserve;
    public void SetItemsToUnreserve(params IReservable[] items) { itemsToUnreserve = items; }

    private Emotion emotionToSet;
    public void SetEmotionToSet(Emotion e) { emotionToSet = e; }

    private TaskStage _interrupt;
    public void SetInterruptAction(TaskStage t) { _interrupt = t; }
    public void Interrupt() { _interrupt.Start(); }

    public TaskStage(Task t)
    {
        task = t;
    }

    public void Start()
    {
        if (actionToApply != null) actionToApply();
        if (itemsToUnreserve != null) UnreserveItems();
        if (itemsToReserve != null) ReserveItems();
        if (pointsToMoveTo != null)
        {
            //this will need changing after pathfinding sorted out...
            if (pointsToMoveTo.Count == 1) task.taskEntity.SetWaypoints(pointsToMoveTo[0]);
            else task.taskEntity.waypoints = pointsToMoveTo;
        }
        if (emotionToSet != null) emotionToSet.StartEmotion();
    }

    public void Update()
    {
        if (timeToWait > 0) timeToWait -= GV.elapsedTime;
    }

    public bool IsComplete()
    {
        if (pointsToMoveTo != null && !task.taskEntity.reachedDestination) return false;
        if (timeToWait > 0) return false;
        return true;
    }

    public void ReserveItems()
    {
        foreach (IReservable i in itemsToReserve)
        {
            i.reserved = true;
        }
    }

    public void UnreserveItems()
    {
        foreach (IReservable i in itemsToUnreserve)
        {
            i.reserved = false;
        }
    }

} 
```

示例任务：

```
public class T_WorkerGoToBed : Task
{
    public FactoryWorker worker { get { return taskEntity as FactoryWorker; } }
    public T_WorkerGoToBed(TaskableEntity t)
        : base(t) { }

    public override bool CanStart()
    {
        return Room.Available<Bed>(GV.Bedrooms);
    }

    public override void InitialiseTaskStages()
    {
        Bed bedToSleepIn = Room.NearestAvailableFurniture<Bed>(GV.Bedrooms, taskEntity.X, taskEntity.Y);

        //stage 1 - reserve bed and move there
        TaskStage ts1 = new TaskStage(this);
        ts1.SetItemsToReserve(bedToSleepIn);
        ts1.SetPointsToMoveTo(bedToSleepIn.XY);

        //stage 2 - sleep in bed
        TaskStage ts2 = new TaskStage(this);
        ts2.SetWait((worker.maxEnergy - worker.energy) / worker.energyRegeneratedPerSecondWhenSleeping);
        ts2.SetEmotionToSet(new E_Sleeping(worker, false));

        //stage 3 - unreserve bed
        TaskStage ts3 = new TaskStage(this);
        ts3.SetItemsToUnreserve(bedToSleepIn);
        ts3.SetEmotionToSet(new E_Happy(worker, false));

        SetTaskStages(ts1, ts2, ts3);
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T20:35:58.240

听起来您需要在任务和工作人员之间颠倒责任。与其询问是否可以执行任务，不如询问工人是否可以执行给定的任务：

```
class Worker
{
    bool CanPerformTask<T>() where T : Task
    {
        var type = typeof(T);
        // code to determine whether worker can perform the task T             
    }

    // alternative with instance parameter
    bool CanPerformTask<T>( T task ) where T : Task
    {
        // code to determine whether worker can perform the task passed in
    }
} 
```

该解决方案避免了“实例化所有任务或调用静态方法”的问题。

另外，考虑使用内置的集合类。诸如队列和堆栈之类的东西可以极大地简化调度事物执行所需的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T20:38:48.390

我认为您正在滥用静态类的观点。“任务”类应该是标准的（不是静态的）。您的“Worker”类不是静态的，因此意味着有多个“Worker”实例。鉴于这种范式，这些工人可能会分配给他们相同的任务。

您的“工人”类需要从以下位置修改此属性：

公开列出可能的任务；

到

公共列表_possibleTasks；

您可能也不应该公开访问此属性。您可以根据需要修改“CanPerformThisTask”。

# objective-c - 忽略不正确的编译器警告？

> ID：14075308
> 
> 赞同：0
> 
> 时间：2012-12-28T20:22:20.573
> 
> 标签：objective-c, warnings, compiler-warnings

我有一个通知及其处理程序：

```
- (void) addObservers
{
...
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(handleColumnCreated:) name:NNColumnCreated object:nil];
…
}

- (void) handleColumnCreated:(NSNotification*)notification
{
    [_formFields makeInfoForColumn:[notification object] FieldInfo:_propertiesViewController.representedObject];
    [self setActiveColumn:[notification object]];
}

- (void) setActiveColumn:(id)theColumn
{
    if (_activeColumn != nil)
    {
        [_activeColumn setBackgroundColor:_oldColumnColor];
    }

    _activeColumn = theColumn;
    _oldColumnColor = [_activeColumn backgroundColor];
    [_activeColumn setBackgroundColor:[NSColor greenColor]];
    [_window makeFirstResponder:theColumn];

    [_propertiesViewController setRepresentedColumn:[theColumn info]];
} 
```

在 setActiveColumn 的最后一行，我收到一条警告，指出我发送给 setRepresentedColumn: 的参数类型错误。然而，当我使用调试器跟踪该行时，[theColumn info] 解析为正确的类型并且该行正确执行。

我可以忽略警告，但我认为这不是一个好主意。我无法弄清楚为什么编译器认为会`[theColumn info]`产生错误类型的对象。帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T23:48:49.500

`info`您在参数上调用的任何方法`theColumn`的声明类型与参数的声明类型不匹配`setRepresentedColumn:`。您可以通过强制转换为正确的类型来避免引发警告。

例如，如果`setRepresentedColumn:`这样声明：

```
- (void)setRepresentedColumn:(MyColumnObject *)column 
```

那么您可以将最后一行更改为：

```
[_propertiesViewController setRepresentedColumn:(MyColumnObject *)[theColumn info]]; 
```

但是请注意，您所做的只是告诉编译器“相信我，我知道这个对象是什么类型”，以使其关闭……如果`[theColumn info]`返回的内容不是一个`MyColumnObject`。

# javascript - 在部分视图中动态加载后如何使 JQuery DatePicker 工作？

> ID：14075312
> 
> 赞同：8
> 
> 时间：2012-12-28T20:22:32.307
> 
> 标签：javascript, jquery, asp.net-mvc

在这种情况下，我失去了 jquery datepicker 功能......

1-最初我有一个正常的视图，工作正常，有这个代码用于日期输入......

```
<input type="text" name="date_start" id="date_start"
                       value="@(Model.TimeStart)" />
<script language="javascript" type="text/javascript">
    $("#date_start").datepicker();
</script> 
```

2-然后，我将该视图转换为动态加载的局部视图...

```
$('#TargetEmptyDiv').load("/MyController/MyAction"); 
```

3-部分视图加载正常，可以（手动）输入数据并且一切正常。唯一的问题是 jquery datepicker 不再工作。我尝试在加载后分配它，使用这个......

```
$('#TargetEmptyDiv').load("/MyController/MyAction",
                          function () { $("#date_start").datepicker(); }); 
```

那没有用。

4- 后来我了解到 jquery 提供了 live() 和 delegate() 函数，它们能够将 javascript 代码附加到“现在和将来”加载的元素。所以，我在文档初始化中尝试了这个......

```
<script type="text/javascript">
    $(document).ready(function () {
           $("#date_start").live("click", function () { $(this).datepicker(); });
    });
</script> 
```

后来也...

```
<script type="text/javascript">
    $(document).ready(function () {
           $("#date_start").delegate("click", function () { $(this).datepicker(); });
    });
</script> 
```

这些都不起作用，可能是因为它们直接引用了“click”事件，但是 datepicker 是“附加”（如果这是正确的术语）到整个元素的。

所以，问题是：如何让 jquery datepicker 在动态加载后加载的元素上工作？？？

谢谢你的时间！

已解决：问题是在 _Layout.cshtml 的底部有这一行......

```
@Scripts.Render("~/bundles/jquery") 
```

..它加载了jquery库的缩小版本（我已经引用了）。因此，库被加载了两次并且无效，产生错误“datepicker() 不是函数”。

只需评论或删除该行，一切正常！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-06-05T01:26:52.670

将以下 jQuery 放在基本视图中，而不是部分视图中

```
<script>
  $(document).ready(function () { 
      $(document).on('focus', '.datefield', function () {
          $(this).datepicker();
      });
  });
</script> 
```

这将在动态加载局部视图和页面加载时起作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T14:33:07.113

在您的部分页面上说“/MyController/MyAction”，

部分页面代码：

```
<div>
    <form>
        <!--Other Elements-->
        <input type="text" id="adate" name="adate" title="date" />
    </form>
    <script type="text/javascript">
        $(document).ready(function(){    
            $( "#adate" ).datepicker();
        });
     </script>
</div> 
```

整页（您调用 Ajax 请求的页面）代码：

```
<div id="TargetEmptyDiv"></div>
<script type="text/javascript">
function abc(){
$.ajax({
        type: "POST",
        url: "/MyController/MyAction",
        success: function(response)
        { 
            $("#TargetEmptyDiv").html(response);
        }
 });
}
</script> 
```

调用函数 abc 就完成了。假设您已经加载了所有 jquery 文件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-28T20:27:58.743

您在#3 中的方法在我看来应该有效，因此您似乎需要进行一些调试。尝试这个：

1.  如果您使用 Firefox，请获取 Firebug 扩展程序（Chrome 内置了开发工具）
2.  在您的代码中添加`debugger`一行（参见下面的示例）
3.  使用 Chrome 或 Firebug/Firefox（或任何其他浏览器的开发工具）加载您的页面

应该发生的是您的浏览器将在此时暂停。但是，如果事情没有按您预期的那样工作，那么它可能根本没有命中该代码，然后您就不会停下来了。

如果确实出现了暂停，请使用控制台检查 ; 的值`$("#date_start")`。jQuery 选择器可能没有抓住您的想法。

这是`debugger`您的代码示例：

```
$('#TargetEmptyDiv').load("/MyController/MyAction", function () {
    debugger;
    $("#date_start").datepicker();
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-09-13T14:29:19.730

就我而言，我试图将日期选择器连接到的日期字段的 ID 并不是我认为的那样。我正在使用 ViewModels，并且 id 以我的局部视图的 ViewModel 名称为前缀。

machineghost的回答让我明白了。

所以我现在使用查理的答案，但不是#BirthDate，而是#IdentityModel_BirthDate：

```
<script>
  $(document).ready(function () { 
      $(document).on('focus', '#IdentityModel_BirthDate', function () {
          $(this).datepicker({
              format: 'MM/dd/yyyy',
              changeMonth: true,
              changeYear: true,
              yearRange: "-90:+0"
          });
      });
  });
</script> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-09T09:20:57.167

使日期选择器工作所需的只是步骤 1-3。

这是一个示例：http: [//jsfiddle.net/delrosario/Xd8py/](http://jsfiddle.net/delrosario/Xd8py/)

您可以在不动态加载标记的情况下让 datepicker 工作，并且动态版本的伪代码在步骤 1-3 中是正确的。您现在需要检查的事情是确保在您的主程序之前加载您的依赖项（在这种情况下，请确保在运行请求 + datepicker 设置之前 jquery 和 jquery ui 可用）。

1) 加载 jquery 2) 加载 jquery ui 3) 等到 dom 准备好或包含您的有效负载的元素准备好 4) 执行您的主应用程序，该应用程序执行您的描述中的步骤 1-3。

所以它会是这样的。

```
<!doctype html>
<html>
  <head>
    <link rel="stylesheet" href="path-jquery-ui-css" />
    <script src="path-to-jquery"></script>
    <script src="path-to-jquery-ui"></script>
    <script id="main_app">
      (function () {
        // wait till dom is ready before executing our code,
        // in this case steps 1-3.
      });
    </script>
  </head>
  <body>
    <div id="datepicker_target">datepicker target</div>
  </body>
</html> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-01-21T06:52:42.550

调用 ajax 后，将 jquery 连接到 'ajaxStop' 事件。（参见：'@section 脚本'）

$(document).ajaxStop 处理后 ajax jquery 调用，现在 datapicker 在 ajax 调用之后工作。是的...

**注意：** $(document).ready... 处理初始页面加载数据选择器装饰，但是在重新加载 ajax 表单后，没有执行 datepicker jquery...

```
@model Q_Admin.Models.AllQAViewModel

<div id="mainContent">

  @using (Ajax.BeginForm("EAAll","Answer",new AjaxOptions {
    UpdateTargetId = "mainContent",
    HttpMethod = "POST",
    InsertionMode = InsertionMode.Replace
  }))

  for (int i = 0; i < Model.VMs.Count; i++)
  { 
   @switch (Model.QAVMs[i].qN.Node1.TypeAnswer.AnswerType.Trim().ToUpper())
   {
    case "DATETIME":
      @Html.TextBoxFor(m => m.VMs[i].CurrentNodeText, 
            new { @class = "datepicker", @id = "datepicker" });
      break;
    case "DROPDOWNLIST":
         @Html.DropDownListFor(m => m.QAVMs[i].AnswerRecord.AnswerID,
           new SelectList(Model.QAVMs[i].answerNodes, "ID", "NodeText.Text", Model.QAVMs[i].SelectedNodeID),
          "-- Select an Answer --",
           new { @onchange = "$(this).parents('form:first').find(':submit')[0].click();"   }) }
      break;
    default:
       break;
    }
  }
</div>

@section Scripts{
<script type="text/javascript">
    $(document).ready(function () {
        // debugger;
        $("#datepicker").datepicker(
            {
                dateFormat: "mm/dd/yy",
                constrainInput: true
            });
    });
    $(document).ajaxStop(function () {
        // debugger;
        $("#datepicker").datepicker(
            {
                dateFormat: "mm/dd/yy",
                constrainInput: true
            });
    });
</script>} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-29T03:08:57.637

I had the exact same problem. If using ajax, then bind the below jquery function to the document. Each time ajax is executed, this will fire. Check out the api doc here - [http://api.jquery.com/category/ajax/global-ajax-event-handlers/](http://api.jquery.com/category/ajax/global-ajax-event-handlers/)

$(document).ajaxComplete(function (){//your code here})

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-07T18:11:24.660

我的怀疑是您的 JS 正在执行，但您不正确地引用了 jquery-ui。我建议在比部分视图更高的级别添加所有 jquery 库。尝试将`<script src="jquery-ui.js">`标签放在页面或布局中，而不是部分视图中。如果这不能解决问题，请尝试`alert("test");`输入您的 javascript 代码以确保它正在执行。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-01-02T18:56:25.790

似乎＃3应该有效。但也许你可以尝试这样的 hacky 方式：

```
<script type="text/javascript">
    $(document).ready(function () {
        $(this).on("mousedown", "#date_start", function (e) { 
             $(this).datepicker(); e.preventDefault();$(this).click(); 
        });
    });
</script> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-07-16T15:59:32.073

我有同样的问题，使用以前版本的`JQuery-UI`. 在我的情况下，使用版本`1.9.2`和版本。知道原因，但我觉得最新的版本带来了一些紧凑性的问题，所以我选择使用总是倒退到过去。我希望它会有用`1.10.3``JQuery``1.10.1`

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-01-05T19:25:23.933

我有这个工作

行动方法：

```
public ActionResult GetControl()
{
    return View("_partial");
} 
```

主视图：

```
<div id="TargetEmptyDiv"></div>

<script type="text/javascript">
    $(function () {
        $('#TargetEmptyDiv').load("/Home/GetControl");
    });
</script> 
```

局部视图：

```
@{
    Layout = "";
}

<input type="text" name="date_start" id="date_start" />

<script type="text/javascript">
    $(function () {
        $("#date_start").datepicker();
    });
</script> 
```

当然你必须记住在你的布局中包含 jquery-ui.js

```
<script src="@Url.Content("~/Scripts/jquery-ui-1.8.20.min.js")" type="text/javascript"></script> 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-12-28T22:33:34.900

我以前遇到过这个问题。在我的情况下，我`<script src='jQueryUI.js'></script>`在页面底部引用了。将参考移到页面顶部为我修复了它。

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2014-08-09T07:18:06.780

```
<script type="text/javascript">$(function () {$("#datefield").datepicker();});</script> 
```

只需将此行与您必须通过 ajax 加载的内容一起加载

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2015-07-24T18:31:36.057

嗨：您将以下代码放入部分视图中的加载文档事件脚本标记中：

```
$(function(){

$("#date_start").datepicker();

}) 
```

# java - Xstream 忽略已注册的转换器

> ID：14075315
> 
> 赞同：0
> 
> 时间：2012-12-28T20:22:49.923
> 
> 标签：java, xstream

我正在使用 spring 运行一个 webapp，并且我使用 xstream 作为我的序列化工具。我已经定义了一个包含自定义转换器的 marsheller，但是在读取 xml 时，我注册的转换器似乎被忽略了，因为 xstream 无法正确解析某些字段。

这是编组器的init函数：

```
public void init() {
    XStream xstream = new XStream() {

        protected MapperWrapper wrapMapper(MapperWrapper next) {
            return new MapperWrapper(next) {

                public boolean shouldSerializeMember(Class definedIn, String fieldName) {
                    return definedIn != Object.class ? super.shouldSerializeMember(definedIn, fieldName) : false;
                }

            };
        }

    };
    xstream.setMode(XStream.NO_REFERENCES);
    xstream.addDefaultImplementation(ArrayList.class, PersistentList.class);
    xstream.addDefaultImplementation(ArrayList.class, PersistentBag.class);
    xstream.addDefaultImplementation(HashMap.class, PersistentMap.class); 
    xstream.addDefaultImplementation(java.util.HashSet.class, PersistentSet.class);

    xstream.alias("Array", PersistentBag.class);
    xstream.alias("list", PersistentBag.class);

    Mapper mapper = xstream.getMapper();
    xstream.registerConverter(new HibernateCollectionConverter(mapper));
    xstream.registerConverter(new HibernateMapConverter(mapper));
    xstream.registerConverter(new DateConverter());
    xstream.registerConverter(new TimeStampCustomConverter());
    xstream.registerConverter(new LongConverter());
    xstream.registerConverter(new IntConverter());
    xstream.registerConverter(new DoubleConverter());

} 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T21:10:02.613

您在类的特定实例上注册转换器等`XStream`，因此您需要保存对配置的引用，而`XStream`不是`init()`方法的局部变量。或者，使其成为一个返回的方法，`XStream`然后在需要编组器时调用它：

```
protected XStream createXStream() {
  XStream xs = new XStream();
  // ...
  xs.registerConverter(...);
  return xs;
} 
```

# php - 如何在 aptana studio 3 中引用项目

> ID：14075320
> 
> 赞同：0
> 
> 时间：2012-12-28T20:23:13.280
> 
> 标签：php, javascript, aptana3

嗨，我正在创建一个 Web 项目。为此，我想将脚本保存在单独的项目中，并将 php 文件保存在单独的项目中。我正在使用 aptana studio 3 作为 IDE。

有一个选项-> 参考项目。我这样做了，但下一步如何进行。我无法在 aptana studio 文档中找到任何内容。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T20:37:36.090

一般来说，在 Eclipse 中（因此在 Aptana 中，因为它们几乎是一回事）您只希望一个项目包含您的所有代码。这种方式让事情变得容易多了，因为切换项目有点痛苦。因此，我的建议是你重新考虑你的计划，因为这可能会让你以后的生活变得困难。

但是，如果你真的想这样做，这个问题已经在这里得到了回答：

[如何在 Eclipse Java EE 项目中引用另一个项目？](https://stackoverflow.com/questions/5580576/how-can-i-reference-another-project-in-eclipse-java-ee-projects)

[如何在 Eclipse 中使用引用的项目](https://stackoverflow.com/questions/443286/how-to-work-with-referenced-projects-in-eclipse)

# java - 无法使用 JPA 将 java.sql.BLOB 持久化到 oracle BLOB

> ID：14075323
> 
> 赞同：1
> 
> 时间：2012-12-28T20:23:28.623
> 
> 标签：java, jpa, oracle11g, blob, openjpa

我正在尝试使用 JPA（2.0）将图像作为 blob 保存在 oracle 数据库（11g）中

下面是我的实体类

```
@Entity
@Table(name="MyTable")
public class MyEntity implements Serializable {

@Column(name="IMAGE_BLOB")
private  Blob imageBlob;

public void setImageBlob(Blob imageBlob) {
this.imageBlob = imageBlob;
}

public Blob getImageBlob() {
return imageBlob;
} 
```

}

下面是我试图设置blob的代码

```
InputSteram fis = new FileInputStream("C://folder1/folder2/image1.jpg");
byte[] imageByteArray= IOUtils.toByteArray(fis);

Blob imageBlob = new SerialBlob(imageByteArray);

MyEntity myEntity = new MyEntity();
myEntity.setImageBlob(imageBlob ). 
```

当我运行上面的代码片段并将 MyEntity 持久保存到数据库中时，我看到所有值都正确地保存在数据库中，除了显示为 null 的 IMAGE_BLOB 列值，它会抛出任何异常。我还验证了要设置的 imageBlob 不为空。

任何人都可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T12:01:06.323

```
@LOB  
@Column(name="IMAGE_BLOB")  
private  byte[] imageBlob; 
```

它运行良好，我也在 Oracle DB 中完成了它。所以如果你得到了，`ClassCastException`那么你的Java代码就会有问题。

# android - android ActivityManager 无法解析为类型

> ID：14075324
> 
> 赞同：-1
> 
> 时间：2012-12-28T20:23:30.000
> 
> 标签：android

我试图根据设备的内存确定 LruCache 的大小，所以我试图做类似的事情：

```
int memClass =
  ((ActivityManager) context.getSystemService(Context.ACTIVITY_SERVICE)).getMemoryClass(); 
```

但编译器给出“ActivityManager 无法解析为类型”。

有谁知道为什么会这样？一开始我以为我用的API太老了，但是ActivityManager说它一直在他的API 1附近。哈哈。

这是我正在阅读的教程：http: [//developer.android.com/training/displaying-bitmaps/cache-bitmap.html](http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T20:44:05.003

始终确保导入所有需要的类。如果您在 Eclipse 中，请执行`Ctrl`++清理导入（自动导入需要的所有内容，删除不需要的内容）`Shift`。`O`你也可以直接

```
import android.app.ActivityManager; 
```

# python - 绘图时 tseries/convertor 中的 pandas RuntimeError

> ID：14075326
> 
> 赞同：0
> 
> 时间：2012-12-28T20:23:34.270
> 
> 标签：python, plot, pandas

当我执行以下语句时：

```
DataFrame(randn(3,1),index=[date(2012,10,1),date(2012,9,1),date(2012,8,1)],columns=['test']).plot() 
```

我得到以下异常：

**调用**中的文件“/usr/local/lib/python2.7/dist-packages/pandas-0.10.0-py2.7-linux-x86_64.egg/pandas/tseries/converter.py”，第 317 行 （估计， dmin, dmax, self.MAXTICKS * 2)) RuntimeError: MillisecondLocator 估计从 2012-08-01 00:00:00+00:00 到 2012-10-01 00:00:00+00:00 产生 5270400 个滴答声：超过 Locator.MAXTICKS* 2 (2000)

此错误有任何解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T21:31:00.183

一种解决方法是在绘图之前进行排序：

```
df.sort().plot() 
```

*它看起来像一个错误，所以我将它发布在[github 上](https://github.com/pydata/pandas/issues/2609)！*

注意：如果您使用日期时间而不是日期，这似乎会更好地绘制刻度：

```
df1 = DataFrame(randn(3,1), index=[datetime(2012,10,1), datetime(2012,9,1), datetime(2012,8,1)], columns=['test']) 
```

# c++ - IIS 7.5 本机模块未加载

> ID：14075327
> 
> 赞同：2
> 
> 时间：2012-12-28T20:24:01.980
> 
> 标签：c++, iis, native

我正在尝试开发一个本机 (CPP) IIS 7.5 模块，该模块将使用 Visual Studio 2010 处理特定类型的请求，我过得很开心。该库构建正确，但似乎 IIS 从未调用 RegisterModule。

我已经验证的事情：

*   该模块在 globalModules 和 modules 中列出。
*   该库从依赖项walker 看起来一切都很好，并且没有丢失的依赖项。
*   将该库构建为 Win32 发行版 DLL。
*   验证定义文件是否正确。
*   我构建了微软提供的[IIS7NativeModule](http://www.iis.net/learn/develop/runtime-extensibility/develop-a-native-cc-module-for-iis)，它也得到了同样的错误。

IIS产生的错误如下：

```
HTTP Error 500.21 - Internal Server Error
Handler "URLModule" has a bad module "IIS7NativeModule" in its module list 
```

我的最终目标是提供诸如“/track?code=testing123”之类的 URL，并使用错误消息进行响应或根据 GET 代码将用户重定向到特定 URL。

有什么想法/建议等吗？

谢谢！

内特

# ruby-on-rails - 用于单个控制器和多个资源的 Rails 3 路由

> ID：14075329
> 
> 赞同：0
> 
> 时间：2012-12-28T20:24:43.190
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routes

我有多个资源（`:countries, :states, :schools`等），但想要一个“仪表板”控制器来处理所有操作。

我希望能够做到以下几点：

`countries_path`将指导我在 中`show_countries`采取行动，`DashboardController`并且可以通过`'/dashboard/countries`.

对于州、学校等也是如此。

我已经阅读了 Rails 路由，并且一直在搞乱各种选项。我最终在我的`routes.rb`文件中得到以下内容：

```
scope "toolbox" do
  resources :countries, :controller => "toolbox", :only => :index do
    get 'show_countries', :on => :collection
  end

  ...
end 
```

对于上面的代码，运行`rake routes`为我提供了以下信息：

```
show_countries_countries GET    /toolbox/countries/show_countries(.:format)  {:action=>"show_countries", :controller=>"toolbox"}
countries GET    /toolbox/countries(.:format)  {:action=>"index", :controller=>"toolbox"} 
```

我试过这个：

```
scope "toolbox" do
  resources :countries, :controller => "toolbox", :only => :index, :action => "show_countries"
end 
```

只是为了得到这条路线：

```
countries GET    /toolbox/countries(.:format)  {:action=>"index", :controller=>"toolbox"} 
```

我真正想要的是：

```
countries GET    /toolbox/countries(.:format)  {:action=>"show_countries", :controller=>"toolbox"} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T21:55:07.443

您只需要跳出“资源”框框思考：

```
scope "toolbox", :controller => :toolbox do
  get 'countries' => :show_countries
  get 'states' => :show_states
  get 'schools' => :show_shools
end 
```

应该输出这样的路线：

```
countries GET /toolbox/countries(.:format) toolbox#show_countries 
```

# javascript - Backbone.js 需要 json2.js？

> ID：14075330
> 
> 赞同：4
> 
> 时间：2012-12-28T20:24:47.237
> 
> 标签：javascript, backbone.js

从网站：

> Backbone 唯一的硬依赖是 Underscore.js ( > 1.4.3) 或 Lo-Dash。对于 RESTful 持久性，通过 Backbone.Router 的历史支持和使用 Backbone.View 的 DOM 操作，包括 json2.js，以及 jQuery ( > 1.4.2) 或 Zepto。

为什么提到 json2.js？我已经在其他浏览器中的 ie7-9 中运行了我的应用程序，而不需要这个文件并且它可以工作。这是性能问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T20:32:03.493

json2.js 提供了Backbone 所依赖的函数`JSON.parse`和函数。[它们已经包含在浏览器中一段时间​​了，](http://caniuse.com/json)但如果您的环境不包含它，或者您希望在应用程序中实现一致的实现，它们可能会被列出。`JSON.stringify`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T20:31:58.830

该脚本将 JSON 功能添加到旧浏览器中，看起来就像新浏览器中存在的本机功能

[https://github.com/douglascrockford/JSON-js](https://github.com/douglascrockford/JSON-js)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T20:34:44.690

正如其他答案所建议的那样，如果您需要支持旧版浏览器，您只需要下载并包含“手动” JSON 库；否则您的浏览器将内置它（这就是您看到 Backbone 正常工作的方式）。

有关哪些浏览器具有/没有内置 JSON 的确切列表，请参阅：[http ://caniuse.com/#feat=json](http://caniuse.com/#feat=json)

# qt - PySide (PyQt) QAbstractItemModel

> ID：14075332
> 
> 赞同：5
> 
> 时间：2012-12-28T20:25:01.340
> 
> 标签：qt, pyside, qtreeview, model-view, qabstractitemmodel

我正在尝试为树视图实现一个简单的模型，但我不知道它为什么不起作用。似乎我的所有节点都是我的**根节点**的子节点，尽管其中三个应该是它的**第一**个子节点的子节点。此外，我可以看到我的`hasChildren`方法陷入无限循环。任何帮助将不胜感激。

这是我的代码：

```
#!/usr/bin/env python2

from PySide import QtGui, QtCore
import sys

class SI(object):

    children = []

    def __init__(self, group=None, parent=None):
        self.parent = parent
        self.group = group

    def data(self, column):
        return self.group[column]

    def appendChild(self, group):
        self.children.append(SI(group, self))

    def child(self, row):
        return self.children[row]

    def childrenCount(self):
        return len(self.children)

    def hasChildren(self):
        if len(self.children) > 0 :
            return True
        return False

    def row(self):
        if self.parent:
            return self.parent.children.index(self)
        return 0

    def columnCount(self):
        return len(self.group)

class SM(QtCore.QAbstractItemModel):

    root = SI(["First", "Second"])

    def __init__(self, parent=None):
        super(SM, self).__init__(parent)
        self.createData()

    def createData(self):
        for x in [["a", "A"], ["b","B"], ["c", "C"]]:
            self.root.appendChild(x)
        for y in [["aa", "AA"], ["ab", "AB"], ["ac","AC"]]:
            self.root.child(0).appendChild(y)

    def columnCount(self, index=QtCore.QModelIndex()):
        if index.isValid():
            return index.internalPointer().columnCount()
        else:
            return self.root.columnCount()

    def rowCount(self, index=QtCore.QModelIndex()):
        if index.row() > 0:
            return 0
        if index.isValid():
            item = index.internalPointer()
        else:
            item = self.root
        return item.childrenCount()

    def index(self, row, column, index=QtCore.QModelIndex()):
        if not self.hasIndex(row, column, index):
            return QtCore.QModelIndex()
        if not index.isValid():
            item = self.root
        else:
            item = index.internalPointer()

        child = item.child(row)
        if child:
            return self.createIndex(row, column, child)
        return QtCore.QMOdelIndex()

    def parent(self, index):
        if not index.isValid():
            return QtCore.QModelIndex()
        item = index.internalPointer()
        if not item:
            return QtCore.QModelIndex()

        parent = item.parent
        if parent == self.root:
            return QtCore.QModelIndex()
        else:
            return self.createIndex(parent.row(), 0, parent)

    def hasChildren(self, index):
        if not index.isValid():
            item = self.root
        else:
            item = index.internalPointer()
        return item.hasChildren()

    def data(self, index, role=QtCore.Qt.DisplayRole):
       if index.isValid() and role == QtCore.Qt.DisplayRole:
            return index.internalPointer().data(index.column())
       elif not index.isValid():
            return self.root.getData()

    def headerData(self, section, orientation, role):
        if orientation == QtCore.Qt.Horizontal and role == QtCore.Qt.DisplayRole:
            return self.root.data(section)

class MyTree(QtGui.QTreeView):
    def __init__(self, parent=None, model=SM):
        super(MyTree, self).__init__(parent)
        self.setModel(model())

class Window(QtGui.QWidget):
    def __init__(self, parent=None):
        super(Window, self).__init__(parent)
        self.initGui()

    def initGui(self):
       vlo = QtGui.QVBoxLayout()
       tree = MyTree(self)
       vlo.addWidget(tree)
       self.setLayout(vlo)
       self.show()

def main():
    app = QtGui.QApplication(sys.argv)
    win = Window()
    exit(app.exec_())

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-16T08:25:14.723

嗯，我认为除了一个（奇怪的！）错误之外，您几乎已经掌握了它。您声明`children`为类级变量，`SI`而它应该是一个实例变量，因为每个变量都`SI`可以有孩子。您不希望所有实例都有一个列表。

所以我将第一行更改为：

```
class SI(object):

   def __init__(self, group=None, parent=None):
       self.parent = parent
       self.group = group
       self.children = []

   def data(self, column):
       return self.group[column] 
```

一切似乎都正常。当然，我还没有详细测试过，但这应该会让你继续前进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-15T22:43:01.650

执行中有错误：

```
def rowCount(self, index=QtCore.QModelIndex()): 
```

代替：

```
if index.row() > 0: 
```

应该有：

```
if index.column() > 0: 
```

来源： [http ://doc.qt.io/qt-5/qtwidgets-itemviews-simpletreemodel-example.html](http://doc.qt.io/qt-5/qtwidgets-itemviews-simpletreemodel-example.html)

# python - Python 2 + Python 3 + 库

> ID：14075333
> 
> 赞同：4
> 
> 时间：2012-12-28T20:25:02.097
> 
> 标签：python

我在同一台机器上同时拥有 Python 2 和 3，并通过我的包管理器安装了一个库（请求）。我只能在 Python 2 中导入它，是这样的吗？如果不是，我如何在 Python 3 中导入它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-19T01:34:18.203

您机器上的每个 python 安装都安装了自己单独的一组软件包。因此，要同时使用`requests`这两个 python，您需要安装两次，每个版本一次。对于两个 python，它可能是完全相同的库（及其发行版），而不是某些“python 3 版本”。

最方便的方法是`pip`为您的 python 设置单独的 s。在类似 Debian 的 Linux（包括 Ubuntu）上，您可以通过以下方式获取它们：

```
sudo apt-get install python-pip python3-pip 
```

其他 Linux 风格中可能还有其他命令，只需`pip`在您的软件包中查找即可。您可以尝试`brew`在 Mac OS X 和 Google 上使用 Microsoft OS 上的“在 windows 上安装 pip for python 3”。无论哪种方式，您都应该获得两个可执行文件`pip`和`pip3`一个 then：

```
pip install requests
pip3 install requests
# prepend these with sudo if needed 
```

您也可以安装没有`pip`. 然而，它更乏味：下载源代码并解压，`cd`使用以下命令安装它：

```
python setup.py install
python3 setup.py install 
```

# python - 列表理解循环

> ID：14075337
> 
> 赞同：2
> 
> 时间：2012-12-28T20:25:27.733
> 
> 标签：python, pandas

我有一个包含日期、时间、价格、大小、信号的 csv 文件。62035行；一天中有 42 次与文件中的每个唯一日期相关联。

对于每个日期，当信号栏中有“S”时，附加“S”发生时的相应价格。下面是尝试。

```
from pandas import *
from numpy import *
from io import *
from os import *
from sys import *

DF1 = read_csv('___.csv')
idf=DF1.set_index(['date','time','price'],inplace=True)
sStore=[]
for i in idf.index[i][0]:
  sStore.append([idf.index[j][2] for j in idf[j][1] if idf['signal']=='S'])
sStore.head() 
```

```
Traceback (most recent call last)
<ipython-input-7-8769220929e4> in <module>()
  1 sStore=[]
  2 
----> 3 for time in idf.index[i][0]:
  4 
  5     sStore.append([idf.index[j][2] for j in idf[j][1] if idf['signal']=='S'])

 NameError: name 'i' is not defined 
```

我不明白为什么这里不允许使用 i 索引。谢谢。

我也觉得奇怪的是：

idf.index.levels[0] 将显示“未解析”的日期，因为它在文件中但无序。尽管 parse_date=True 作为 set_index 中的参数。

我提出这个问题是因为我正在考虑用以下方式解决问题：

```
for i in idf.index.levels[0]:

   sStore.append([idf.index[j][2] for j in idf.index.levels[1] if idf['signal']=='S'])

 sStore.head() 
```

**我在 2012 年 12 月 30 日根据 DSM 的以下评论进行编辑：**

正如我在下面评论的那样，我想用你的想法来获得损益表。如果 S!=B，对于任何给定日期，我们使用结束时间 1620 来区分。

```
v=[df["signal"]=="S"]
t=[df["time"]=="1620"]
u=[df["signal"]!="S"]

df["price"][[v and (u and t)]] 
```

也就是说，“给我 1620 的价格；（即使它没有给出“卖出信号”，S），以便我可以区分“额外的 B”——对于 B>S 的特殊情况。这忽略了对称问题（其中 S>B），但现在我想了解这个逻辑问题。

在回溯时，此表达式给出：

```
ValueError: boolean index array should have 1 dimension 
```

请注意，为了调用 df["time']**我没有在这里设置索引**。尝试联合运算符 | 给出：

```
TypeError: unsupported operand type(s) for |: 'list' and 'list' 
```

**看看 Max Fellows 的方法**，

@Max 研究员

关键是在一天结束时平仓；所以我们需要在收盘时捕捉到价格以“卸载”所有累积的 B、S；但没有互相清除。如果我说：

```
filterFunc1 = lambda row: row["signal"] == "S" and ([row["signal"] != "S"][row["price"]=="1620"])
filterFunc2 =lambda row: ([row["price"]=="1620"][row["signal"] != "S"])

filterFunc=filterFunc1 and filterFunc2

filteredData = itertools.ifilter(filterFunc, reader) 
```

追溯：

```
IndexError: list index out of range 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T20:36:10.430

尝试这样的事情：

```
for i in range(len(idf.index)):
  value = idf.index[i][0] 
```

`j`使用索引变量进行迭代也是如此。正如已经指出的那样，您不能在要迭代的表达式中引用迭代索引，此外，您还需要执行非常具体的迭代（遍历矩阵中的列），并且 Python 的默认迭代器将无法正常工作为此，需要自定义索引处理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T23:17:11.187

这就是我认为您正在根据您的编辑尝试完成的工作：对于 CSV 文件中的每个日期，将日期与带有“S”信号的每个项目的价格列表一起分组。

您的问题中没有包含任何示例数据，所以我做了一个测试，希望与您描述的格式相匹配：

```
12/28/2012,1:30,10.00,"foo","S"
12/28/2012,2:15,11.00,"bar","N"
12/28/2012,3:00,12.00,"baz","S"
12/28/2012,4:45,13.00,"fibble","N"
12/28/2012,5:30,14.00,"whatsit","S"
12/28/2012,6:15,15.00,"bobs","N"
12/28/2012,7:00,16.00,"widgets","S"
12/28/2012,7:45,17.00,"weevils","N"
12/28/2012,8:30,18.00,"badger","S"
12/28/2012,9:15,19.00,"moose","S"
11/29/2012,1:30,10.00,"foo","N"
11/29/2012,2:15,11.00,"bar","N"
11/29/2012,3:00,12.00,"baz","S"
11/29/2012,4:45,13.00,"fibble","N"
11/29/2012,5:30,14.00,"whatsit","N"
11/29/2012,6:15,15.00,"bobs","N"
11/29/2012,7:00,16.00,"widgets","S"
11/29/2012,7:45,17.00,"weevils","N"
11/29/2012,8:30,18.00,"badger","N"
11/29/2012,9:15,19.00,"moose","N"
12/29/2012,1:30,10.00,"foo","N"
12/29/2012,2:15,11.00,"bar","N"
12/29/2012,3:00,12.00,"baz","S"
12/29/2012,4:45,13.00,"fibble","N"
12/29/2012,5:30,14.00,"whatsit","N"
12/29/2012,6:15,15.00,"bobs","N"
12/29/2012,7:00,16.00,"widgets","S"
12/29/2012,7:45,17.00,"weevils","N"
12/29/2012,8:30,18.00,"badger","N"
12/29/2012,9:15,19.00,"moose","N"
8/9/2008,1:30,10.00,"foo","N"
8/9/2008,2:15,11.00,"bar","N"
8/9/2008,3:00,12.00,"baz","S"
8/9/2008,4:45,13.00,"fibble","N"
8/9/2008,5:30,14.00,"whatsit","N"
8/9/2008,6:15,15.00,"bobs","N"
8/9/2008,7:00,16.00,"widgets","S"
8/9/2008,7:45,17.00,"weevils","N"
8/9/2008,8:30,18.00,"badger","N"
8/9/2008,9:15,19.00,"moose","N" 
```

这是一种使用 Python 2.7 和内置库的方法，可以按照您想要的方式对其进行分组：

```
import csv
import itertools
import time
from collections import OrderedDict

with open("sample.csv", "r") as file:
    reader = csv.DictReader(file,
                            fieldnames=["date", "time", "price", "mag", "signal"])

    # Reduce the size of the data set by filtering out the non-"S" rows.
    filterFunc = lambda row: row["signal"] == "S"
    filteredData = itertools.ifilter(filterFunc, reader)

    # Sort by date so we can use the groupby function.
    dateKeyFunc = lambda row: time.strptime(row["date"], r"%m/%d/%Y")
    sortedData = sorted(filteredData, key=dateKeyFunc)

    # Group by date: create a new dictionary of date to a list of prices.
    datePrices = OrderedDict((date, [row["price"] for row in rows])
                             for date, rows
                             in itertools.groupby(sortedData, dateKeyFunc))

for date, prices in datePrices.iteritems():
    print "{0}: {1}".format(time.strftime(r"%m/%d/%Y", date),
                            ", ".join(str(price) for price in prices))

>>> 08/09/2008: 12.00, 16.00
>>> 11/29/2012: 12.00, 16.00
>>> 12/28/2012: 10.00, 12.00, 14.00, 16.00, 18.00, 19.00
>>> 12/29/2012: 12.00, 16.00 
```

类型转换取决于您，因为您可能正在使用其他库来读取 CSV，但这应该可以帮助您入门 - 并注意@DSM 关于 import *.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-30T00:18:13.190

使用@Max Fellows 方便的示例数据，我们可以在`pandas`. [顺便说一句，您应该始终尝试提供一个简短、独立、正确的示例（有关详细信息，请参见[此处](http://sscce.org/)），以便尝试帮助您的人不必花时间想出一个。]

首先，`import pandas as pd`。然后：

```
In [23]: df = pd.read_csv("sample.csv", names="date time price mag signal".split())

In [24]: df.set_index(["date", "time"], inplace=True) 
```

这给了我

```
In [25]: df
Out[25]: 
                 price      mag signal
date       time                       
12/28/2012 1:30     10      foo      S
           2:15     11      bar      N
           3:00     12      baz      S
           4:45     13   fibble      N
           5:30     14  whatsit      S
           6:15     15     bobs      N
           7:00     16  widgets      S
           7:45     17  weevils      N
           8:30     18   badger      S
           9:15     19    moose      S
11/29/2012 1:30     10      foo      N
           2:15     11      bar      N
           3:00     12      baz      S
           4:45     13   fibble      N
           5:30     14  whatsit      N
           6:15     15     bobs      N
           7:00     16  widgets      S
           7:45     17  weevils      N
           8:30     18   badger      N
           9:15     19    moose      N
[etc.] 
```

我们可以很容易地看到哪些行有信号`S`：

```
In [26]: df["signal"] == "S"
Out[26]: 
date        time
12/28/2012  1:30     True
            2:15    False
            3:00     True
            4:45    False
            5:30     True
            6:15    False
[etc..] 
```

我们也可以选择使用它：

```
In [27]: df["price"][df["signal"] == "S"]
Out[27]: 
date        time
12/28/2012  1:30    10
            3:00    12
            5:30    14
            7:00    16
            8:30    18
            9:15    19
11/29/2012  3:00    12
            7:00    16
12/29/2012  3:00    12
            7:00    16
8/9/2008    3:00    12
            7:00    16
Name: price 
```

这是一个`DataFrame`在每个日期、时间和价格都有`S`. 如果你只是想要一个列表：

```
In [28]: list(df["price"][df["signal"] == "S"])
Out[28]: [10.0, 12.0, 14.0, 16.0, 18.0, 19.0, 12.0, 16.0, 12.0, 16.0, 12.0, 16.0] 
```

**更新**：

`v=[df["signal"]=="S"]`制作`v`一个`list`包含`Series`. 那不是你想要的。 `df["price"][[v and (u and t)]]`对我来说也没有多大意义——`v`并且`u`是相互排斥的，所以如果你和他们在一起，你什么也得不到。对于这些逻辑向量运算，您可以使用`&`and`|`代替`and`and `or`。再次使用参考数据：

```
In [85]: import pandas as pd

In [86]: df = pd.read_csv("sample.csv", names="date time price mag signal".split())

In [87]: v=df["signal"]=="S"

In [88]: t=df["time"]=="4:45"

In [89]: u=df["signal"]!="S"

In [90]: df[t]
Out[90]: 
          date  time  price     mag signal
3   12/28/2012  4:45     13  fibble      N
13  11/29/2012  4:45     13  fibble      N
23  12/29/2012  4:45     13  fibble      N
33    8/9/2008  4:45     13  fibble      N

In [91]: df["price"][t]
Out[91]: 
3     13
13    13
23    13
33    13
Name: price

In [92]: df["price"][v | (u & t)]
Out[92]: 
0     10
2     12
3     13
4     14
6     16
8     18
9     19
12    12
13    13
16    16
22    12
23    13
26    16
32    12
33    13
36    16
Name: price 
```

[注：这个问题现在变得太长太曲折了。我建议花一些时间`pandas`在控制台上阅读文档中的示例以了解它。]

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-28T20:34:05.210

这是因为`i`尚未定义，就像错误消息所说的那样。

在这一行：

```
for i in idf.index[i][0]: 
```

您正在告诉 Python 解释器遍历从表达式返回的列表产生的所有值，`idf.index[i][0]`但您尚未定义是什么`i`（尽管您也尝试将列表中的每个项目设置为变量`i`）。

Python`for ... in ...`循环的工作方式是它采用最正确的组件并`next`从迭代器中请求项目。然后它将调用产生的值分配给左侧提供的变量名称。

# mysql - ON DUPLICATE KEY - 不插入，只更新

> ID：14075339
> 
> 赞同：0
> 
> 时间：2012-12-28T20:25:39.927
> 
> 标签：mysql

我正在尝试制作一个脚本，当它已经存在时更新表中的记录，或者在它不存在时插入新记录。问题是我的mysql语句只能上传记录而不能插入新的：

```
$query = "INSERT INTO lek_podstawowe(drug_name_pl) VALUES ('$drug_name_pl') 
ON DUPLICATE KEY UPDATE vote_sum=vote_sum+'$vote', vote_num=vote_num+1"; 
```

这是我的表结构：

```
 Field         Type      Null Key Default Extra
    id           int(11)    NO  PRI NULL    
    drug_name_pl varchar(11)NO  UNI NULL    
    drug_img     text       NO      NULL    
    vote_sum     int(11)    NO      NULL    
    vote_num     int(11)    NO      NULL 
```

我怎样才能改变我的陈述来做到这一点？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T20:37:18.600

也许这有用？ [MySQL 替换命令](http://dev.mysql.com/doc/refman/5.0/en/replace.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T20:42:25.750

问题是 id 字段不是自动递增的。问题已经解决。谢谢

# c - 使用 libssh 和 c lang 的 SSH 隧道

> ID：14075341
> 
> 赞同：1
> 
> 时间：2012-12-28T20:25:47.993
> 
> 标签：c, ssh, ssh-tunnel, libssh

我正在尝试使用`libssh`打开 SSH 隧道。

基本上，我有两个主机在路上。首先，我需要通过 SSH 连接到第一个主机（我已经完成了这部分），然后我需要从该主机通过 SSH 连接到第二台主机：

```
[my PC] --SSH--> [host 1] --ssh--> [host 2]       (similar to ssh -L ) 
```

这可能`libssh`吗？

我尝试使用此功能`ssh_channel_open_forward`，但这只会打开 TCP 会话，而不是 ssh 会话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T14:49:15.500

[您是否在http://api.libssh.org/stable/libssh_tutor_forwarding.html](http://api.libssh.org/stable/libssh_tutor_forwarding.html)阅读了如何使用 libssh 进行端口转发的教程

# reporting-services - SSRS 2008 UserID 字段缓存旧的 Active Directory 用户 ID

> ID：14075342
> 
> 赞同：2
> 
> 时间：2012-12-28T20:26:09.720
> 
> 标签：reporting-services, active-directory, ssrs-2008

我正在使用 SSRS 2008，并且有一个名为 User!UserID 的内置字段，表示它返回“运行报告的用户的 ID”。

我正在使用此字段来限制显示给正在访问报告的任何用户的参数选项。

我们有一个用户最近更改了她的姓氏。正在发生的事情是，当她运行此报告时，一条 SQL 跟踪显示它仍在使用她的旧姓氏传递她的旧用户 ID。就像 SSRS 还没有从 Active Directory 更新或什么的。

有没有其他人遇到过这样的事情或有任何想法？我们的 DBA 说他找到了一些关于重新启动 SSRS 服务的参考，但由于这是一个需要协调的生产系统，而且名称更改似乎无论如何都必须相对普遍，很难相信以前没有人遇到过这个问题. 谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T04:55:42.427

我会重新启动 SSRS 服务。这通常需要不到 30 秒的时间，所以它不是严重的中断。还要确保用户在 AD 更改后重新启动了她的 PC，以防它正在缓存她的凭据。

# opengl - OpenGL深度缓冲区“扭曲”

> ID：14075343
> 
> 赞同：1
> 
> 时间：2012-12-28T20:26:11.940
> 
> 标签：opengl, depth

我从场景中收集深度缓冲区。然而，我注意到当相机和场景的对象保持在同一位置并且相机只旋转时，深度缓冲区会收集不同的结果，例如，屏幕侧面显示的对象与中间显示的对象具有不同的深度。这可能是 OpenGL 的一个特性，但即便如此，我该如何纠正呢？要考虑什么？

我用以下函数线性化我的深度：

```
float linearize(float depth) {
    float zNear = 0.1;
    float zFar = 100.0;

    return (2.0 * zNear) / (zFar + zNear - depth * (zFar - zNear));
} 
```

我检查了他们应该没问题的近值和远值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T20:32:07.100

OpenGL 中没有“相机”之类的东西。当您更改模型视图矩阵（旋转“相机”）时，您实际上可以考虑将对象移动得更远或更靠近屏幕。这就是为什么它们的渲染深度值会不同，因为深度是作为**每个顶点（片段）的归一化变换 z**计算的。由于在转换之后，您不仅必须考虑对象的位置，还要考虑“相机”位置，因此更改模型视图矩阵会更改结果 z 值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T20:35:45.403

是的，这是意料之中的。透视近平面是投影表面的一种，深度值是垂直于深度平面的点的距离。现在想想如果你旋转你的“相机”会发生什么（当然OpenGL中没有相机）：垂直距离会随着旋转角度的正弦而变化，并添加一些相移。

如果您想实际测量像素到视点的距离，那么最好的做法是不使用深度缓冲区，而是编写一个顶点着色器，将顶点距离传递到原点（内置函数`length`）为标量到片段着色器，片段着色器将其写入单通道帧缓冲​​区对象输出。

# magento - Magento 客户组 ID

> ID：14075344
> 
> 赞同：1
> 
> 时间：2012-12-28T20:26:18.533
> 
> 标签：magento, paypal

我对 Magento 订单电子邮件模板和代码进行了一些更改，以便零售和批发客户组中的客户收到不同格式的电子邮件确认。即一组收到一封显示增值税/税的电子邮件，另一组没有。

除了使用 Paypal 支付的订单外，这很好用。使用贝宝订单，我检测组 ID 的逻辑失败。谁能解释为什么会发生这种情况？从贝宝返回的响应是否与客户组无关？如果是这样，我可以在成功的 paypal ipn 响应后执行检查，以确保系统将客户保持在正确的组中。

我正在从客户/会话中检索客户组，也许我应该直接从数据库中获取它？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T08:25:20.197

感谢 Anton 为我指明了正确的方向。在会话中将paypal 支付组ID 设置为0 后- 未登录！

在下订单后处理事件和代码以从保存的订单中获取客户信息时更有意义，因此在我的情况下，以下返回正确的组 ID 供我在订单确认电子邮件代码等中使用。

```
$_order = $this->getOrder();
// get group id from order
$groupId = $_order->getCustomerGroupId(); 
```

# android - 用什么格式在英文测量系统中插入身体测量？

> ID：14075348
> 
> 赞同：1
> 
> 时间：2012-12-28T20:26:35.327
> 
> 标签：android, android-edittext

我正在开发用于跟踪/记录每日体重测量的 Android 应用程序，并希望支持国际（kg 和 g）和英式（lbs 和 oz）系统单位。

对于国际单位，我只需要一个 EditText 控制器来输入以 kg 为单位的重量测量值的十进制输入（例如 75.00）

对于英制单位，我有点不确定是否应该有一个 EditText，用户将 lbs 的度量设置为十进制，或者我是否应该有两个 EditText。一个用于磅，第二个用于盎司。据我所知，人们通常谈论 165 磅 5.55 盎司（75 公斤）而不是 165.347 磅。

任何人每天都使用英语单位可以就这个问题给我一些意见吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T20:35:44.500

我会使用 11[石](http://en.wikipedia.org/wiki/Stone_%28unit%29)11 磅 5.55 盎司（我是英国人），特别是如果它是一个人的体重。我认为 165 磅 5.55 盎司是美国的。你是对的，两者都比 165.347 磅好。

# postgresql - PostgreSQL 触发器计算工资

> ID：14075354
> 
> 赞同：0
> 
> 时间：2012-12-28T20:26:55.403
> 
> 标签：postgresql, triggers

我在 PostgreSQL 和 MySQL 下都遇到了以下触发器的问题。第 3 行有 bug，等等。应该创建一个触发器，根据讲座的时间增加教授的薪水。

```
create create trigger viellehre after insert on Vorlesungen referencing new as vo_neu foreach row when group by vo_neu.gelesenvon 
having sum(Vorlesungen.SWS) > 5 and 
sum(Vorlesungen.SWS) - vo_neu.SWS <= 5 
update Professoren 
set Professoren.gehalt = Professoren.gehalt * 1.05 
where Professoren.PersNr = vo_neu.gelesenvon; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T09:22:41.260

您不能有这样的触发器定义：

*此外，触发器定义可以指定布尔 WHEN 条件，该条件将被测试以查看是否应该触发触发器。在行级触发器中，WHEN 条件可以检查行列的旧值和/或新值。语句级触发器也可以具有 WHEN 条件，尽管该功能对它们不是那么有用，因为条件不能引用表中的任何值。*

[http://www.postgresql.org/docs/9.2/static/sql-createtrigger.html](http://www.postgresql.org/docs/9.2/static/sql-createtrigger.html)

# ajax - Timepicker 在选择时删除时间（ajax）

> ID：14075357
> 
> 赞同：1
> 
> 时间：2012-12-28T20:27:05.257
> 
> 标签：ajax, timepicker

我正在为使用日历以及开始和结束时间的搬家企业构建预订表格。**我使用 Formidable Pro 构建了时间选择器，它允许我检查时间字段上的“唯一”，这会在所选日期自动删除它们。但是，它不会自动从开始时间和结束时间之间的范围内删除时间**（即：如果有人选择从凌晨 1 点到凌晨 3 点租一辆卡车，我需要将凌晨 1 点、凌晨 2 点和凌晨 3 点从未来的选项中删除，但现在它仅删除凌晨 1 点和凌晨 3 点）。我需要编写 ajax 以从选项中删除中间时间。我不知道从哪里开始。这是当前的 ajax_time_ 选项函数。任何朝着正确方向的推动将不胜感激。

```
function ajax_time_options(){
    global $frmpro_settings, $frmdb, $wpdb;

    //posted vars = $time_field, $date_field, $step, $start, $end, $date, $clock
    extract($_POST);

    $time_key = str_replace('field_', '', $time_field);
    $date_key = str_replace('field_', '', $date_field);
    if (!preg_match('/^\d{4}-\d{2}-\d{2}$/', trim($date)))
        $date = FrmProAppHelper::convert_date($date, $frmpro_settings->date_format, 'Y-m-d');
    $date_entries = FrmEntryMeta::getEntryIds("fi.field_key='$date_key' and meta_value='$date'");

    $opts = array('' => '');
    $time = strtotime($start);
    $end = strtotime($end);
    $step = explode(':', $step);
    $step = (isset($step[1])) ? ($step[0] * 3600 + $step[1] * 60) : ($step[0] * 60);
    $format = ($clock) ? 'H:i' : 'h:i A';

    while($time <= $end){
        $opts[date($format, $time)] = date($format, $time);
        $time += $step;
    }

    if($date_entries and !empty($date_entries)){
        $used_times = $wpdb->get_col("SELECT meta_value FROM $frmdb->entry_metas it LEFT JOIN $frmdb->fields fi ON (it.field_id = fi.id) WHERE fi.field_key='$time_key' and it.item_id in (". implode(',', $date_entries).")");

        if($used_times and !empty($used_times)){
            $number_allowed = apply_filters('frm_allowed_time_count', 1, $time_key, $date_key);
            $count = array();
            foreach($used_times as $used){
                if(!isset($opts[$used]))
                    continue;

                if(!isset($count[$used]))
                    $count[$used] = 0;
                $count[$used]++;

                if((int)$count[$used] >= $number_allowed)
                    unset($opts[$used]);
            }
            unset($count);
        }
    }

    echo json_encode($opts);
    die();
} 
```

# mysql - Google 地图中的 SQL db 与 Fusion Tables 性能对比

> ID：14075365
> 
> 赞同：2
> 
> 时间：2012-12-28T20:27:50.593
> 
> 标签：mysql, google-maps-api-3, maps, google-fusion-tables

我正在开发一个将地理位置数据存储在 SQL 表中的应用程序，以生成用户输入的所有点/地址的地图。我希望它可以扩展到大量点，可能超过 50,000 点，并且仍然具有出色的性能。然而，查看谷歌地图 API 文章，他们说使用融合表可以大大提高性能。

有人对此有经验吗？如果我从 SQL 表的地图上加载了数千个标记，性能会受到影响吗？KML 或任何其他策略似乎更合适？

一旦缩小到足够的程度，我就可以使用 MarkerClusters，但我不确定这是否会影响性能，因为我仍在将所有地理编码加载到页面中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T23:18:42.220

您无法比较这两种技术。

当您从 sql 数据库加载数千个标记时，您必须创建每个标记，这当然会导致性能不佳，因为您需要将数千个标记的数据发送到客户端并在客户端创建标记-边。

当您使用融合表时，您不会加载标记，而是加载图块。无论图块上有多少标记可见，性能总是相同的。

KML 不是一个选项，因为特征的数量是有限的（目前为 1000）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T01:20:30.170

好吧，也许唯一的优点是，如果您使用一些 SQL 表而不是 Fusion Tables，您的数据记录可能会保密 - 但前提是您的项目需要关注这一点。

丹尼尔

# sorting - extjs 4 如何更改网格上显示的列下拉列表的顺序

> ID：14075366
> 
> 赞同：0
> 
> 时间：2012-12-28T20:27:51.087
> 
> 标签：sorting, grid, extjs4, gridpanel, datagridviewcolumn

使用 extjs 4.1.1 我有一个包含很多列 > 20 的网格。

最初，这些列中的大多数都是隐藏的。

如果用户想要取消隐藏列，他们选择任何列上的菜单，然后选择“列”选项，这会展开另一个下拉/退出，显示所有列。显示旁边带有复选框的那些。

我的问题是：下拉列表中的列按它们在网格中定义/显示的顺序显示。选择它们在网格中的显示顺序是有充分理由的（例如，id 作为第一列）。但是，当用户想要显示其中一个隐藏列时，他们很难在列表中找到它。这是因为列表是按照定义列的顺序排序的。我想按字母顺序对列下拉/删除列表进行排序，而不影响网格中列的顺序。

这怎么能做到？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T23:21:17.567

我想我找到了您问题的解决方案。

首先，我没有 Ext JS 4.1.1。我当前 PC 上的框架。所以我试图找出你阅读 Ext JS 4.1.3 的问题。Sencha 网站上提供的文档。但我不认为他们在两个次要版本之间的框架的这一部分进行了重大更改，因此我的解决方案也应该适用于您的情况。我已经使用 JSFiddle 尝试了我的解决方案。不幸的是，他们没有 4.1.1。ext-all.css 文件，所以我手动链接了 Sencha 提供的 4.0.2 文件，所以菜单看起来有点错位。

标题菜单及其子菜单由 Ext.grid.header.Container 类管理。列子菜单由[getColumnMenu](http://docs.sencha.com/ext-js/4-1/source/Container.html#Ext-grid-header-Container-method-getColumnMenu)方法构造。每次拖放或其他应该影响网格视图的事件都会清除和重建整个菜单。因此，为了解决问题，覆盖此方法就足够了。因为headercontainer类在框架中太深了，很难扩展它，所以你必须使用Ext.base.override方法。

列子菜单的菜单项是根据

```
 items = headerContainer.query('>gridcolumn[hideable]') 
```

询问。因此，在创建菜单项之前，您必须首先按字母顺序对结果进行排序。我已经在类中添加了 sortColumns 方法，它可以完成所有的排序工作。

所以这就是我所做的：[链接到我的解决方案](http://jsfiddle.net/duplamatyi/stkHd/1/)。

我希望这就是你要找的。

# java - Android / Java重写文件使其为空？

> ID：14075367
> 
> 赞同：1
> 
> 时间：2012-12-28T20:27:56.973
> 
> 标签：java, android

我在我的应用程序中每 10 秒写入一次文件，无论用户输入如何，我都需要保存数据。文件写入代码如下，

```
FileOutputStream fos = new FileOutputStream(new File(CurrentContext.getFilesDir() +  File.separator + "myFile")); 
fos.write(s.toString().getBytes()); 
fos.flush();
fos.close(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T20:30:40.213

如果您不使用带有`append`参数的构造函数，则每次都会创建新文件（并且为空）。

```
public FileOutputStream(String name) 
```

对比

```
public FileOutputStream(String name,boolean append) 
```

[文件输出流](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/FileOutputStream.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T20:31:36.253

只需在附加模式下打开 FileOutputStream，如下所示：

```
FileOutputStream fos = new FileOutputStream(new File(CurrentContext.getFilesDir() +  File.separator + "myFile"), true); // The extra boolean at the end specifies append-mode
fos.write(s.toString().getBytes()); 
fos.flush();
fos.close(); 
```

# php - 我如何忽略 phpDocumentor 中的特定文件

> ID：14075369
> 
> 赞同：4
> 
> 时间：2012-12-28T20:28:11.553
> 
> 标签：php, documentation, phpdoc

我正在用 phpDocumentor 记录我在 PHP 中构建的程序。一切正常，但文档显示我有近 100 个错误，因为它正在读取我用来将文件上传到服务器的文件，但我没有创建。是否可以忽略给我所有错误的特定文件？这是我正在执行以生成文档文件的命令：

```
phpdoc run -d /var/www/html/myprogram/ -t /var/www/html/myprogram/documentation 
```

我试图忽略的文件位于`/myprogram`这样的目录中：

```
/modules/module1/uploader.php 
```

我找到了一些关于使用的信息`--ignore`，但我不知道这是否指的是目录的特定内容。

是否可以在文件中写入`index.php`指示 phpDocumentor 忽略某些文件的内容？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-28T20:38:01.707

该[`--ignore`标志](http://manual.phpdoc.org/HTMLSmartyConverter/HandS/phpDocumentor/tutorial_phpDocumentor.howto.pkg.html#using.command-line.ignore)将接受单个文件名（以及目录名或 glob 表达式）：

```
phpdoc run --ignore /var/www/html/myprogram/modules/module1/uploader.php -d /var/www/html/myprogram/ -t /var/www/html/myprogram/documentation 
```

或者因为它会接受部分目录，所以它可以缩短为：

```
phpdoc run --ignore modules/module1/uploader.php -d /var/www/html/myprogram/ -t /var/www/html/myprogram/documentation 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-05-16T10:56:16.817

*我希望，我的回答不会被否决。我在这里包括我的答案，以供将来参考和其他可能从中受益的人。*

通过包含多个包含/忽略选项，在项目的根目录中创建`phpdoc.xml`配置文件有很大帮助，而不是使命令复杂化。可以轻松地将文件中的所有必需选项组合在一起，`phpdoc`以帮助构建文档。

例如，我的项目的`phpdoc.xml`配置文件如下，包含`phpdoc`选项：

```
<?xml version="1.0" encoding="UTF-8" ?>
<phpdoc>
    <title>App Plugins Documentations</title>
    <parser>
        <target>reference/docs</target>
    </parser>
    <transformer>
        <target>reference/docs</target>
    </transformer>
    <files>
        <directory>.</directory> <!-- Scan and parse all the php files except those found in the paths below -->
        <ignore>assets/*</ignore>
        <ignore>includes/gm-virtual-pages/*</ignore>
        <ignore>includes/app_virtual_pages/*</ignore>
        <ignore>includes/third-party/*</ignore>
        <ignore>includes/vendor/*</ignore>
        <ignore>reference/docs/*</ignore>
        <ignore>storage/*</ignore>
        <ignore>views/*</ignore>
        <ignore>index.php</ignore> <!-- Ignore all the index.php files -->
    </files>
</phpdoc> 
```

这样您就可以包含/忽略多个路径和文件；甚至是您问题中的特定文件。您所要做的就是在`ignore`文件的相对路径中包含该选项。

```
<ignore>/modules/module1/uploader.php</ignore> 
```

只需`phpdoc`在项目的根目录中运行带有`phpdoc.xml`配置文件的命令即可。

# java - SimpleDateFormat 在不同时区 JVM 中的行为不同

> ID：14075373
> 
> 赞同：6
> 
> 时间：2012-12-28T20:28:25.580
> 
> 标签：java, date, timezone, simpledateformat

我按照下面的代码在指定的 dateTime 上使用指定的时区创建一个 Date 对象。
注意：我没有为 jvm 设置任何时区；但是用不同的 linux 服务器时区测试这段代码。

```
 String date = "20121225 10:00:00";
    String timeZoneId = "Asia/Calcutta";
    TimeZone timeZone = TimeZone.getTimeZone(timeZoneId);

    DateFormat dateFormatLocal = new SimpleDateFormat("yyyyMMdd HH:mm:ss z");
                //This date object is given time and given timezone
    java.util.Date parsedDate = dateFormatLocal.parse(date + " "  
                     + timeZone.getDisplayName(false, TimeZone.SHORT));

    if (timeZone.inDaylightTime(parsedDate)) {
        // We need to re-parse because we don't know if the date
        // is DST until it is parsed...
        parsedDate = dateFormatLocal.parse(date + " "
                + timeZone.getDisplayName(true, TimeZone.SHORT));
    } 
```

现在 parsedDate 对象的行为不同
**当我的 jvm 服务器在 IST 中运行时**
parsedDate.getTime() -- 1356409800000
parsedDate.toString() -- Tue Dec 25 10:00:00 IST 2012
in GMT --- 12/25/2012 04: 30:00 GMT
**当我的 jvm 服务器在 EST 运行时**
parsedDate.getTime() -- 1356422400000
parsedDate.toString() -- Tue Dec 25 03:00:00 EST 2012
in GMT --- 12/25/2012 08:00 :00 格林威治标准时间

我的两个系统时间是同步的
Mon Dec 24 10:30:04 EST 2012
Mon Dec 24 21:00:48 IST 2012
我期望在两台机器上我应该得到相同的 GMT 时间。
这里出了什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T20:48:56.100

我认为问题在于您正在尝试解析 IST，并且它具有不同的含义，具体取决于您默认的“位置”是什么。

```
Time Zone Abbreviation  Zone Description    Relative UTC
IST     Irish Summer Time   UTC+01
IST     Israeli Standard Time   UTC+02
IST     Iran Standard Time  UTC+0330
IST     Indian Standard Time    UTC+0530 
```

如果您的位置是印度，它会按照您的预期处理 IST，但如果您使用美国，它会猜测不同的时区。

解决方案是不使用三个字母的时区并明确设置它们。

```
String date = "20121225 10:00:00";
String timeZoneId = "Asia/Calcutta";
TimeZone timeZone = TimeZone.getTimeZone(timeZoneId);

DateFormat dateFormatLocal = new SimpleDateFormat("yyyyMMdd HH:mm:ss");
dateFormatLocal.setTimeZone(timeZone);

Date parsedDate = dateFormatLocal.parse(date); 
```

[http://www.worldtimezone.com/wtz-names/wtz-ist.html](http://www.worldtimezone.com/wtz-names/wtz-ist.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T20:35:27.607

短名称不是识别时区的好方法，因为它不是唯一的；[Javadoc`java.util.TimeZone`](http://docs.oracle.com/javase/7/docs/api/java/util/TimeZone.html)给出了“'CST' 可以是美国'中部标准时间'和'中国标准时间'”的例子。

更普遍 。. . 而不是将时区作为字符串传递，以便您`DateFormat`必须解析它，而是通过使用您已经拥有`DateFormat`的实例来告诉您时区是什么更有意义：`TimeZone`

```
 DateFormat dateFormatLocal = new SimpleDateFormat("yyyyMMdd HH:mm:ss");
    dateFormatLocal.setTimeZone(timeZone);
    java.util.Date parsedDate = dateFormatLocal.parse(date); 
```

（这也将在可能的范围内自动处理夏令时。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-02T00:27:46.573

这里有一个简短的[Groovy](http://www.groovy-lang.org/)脚本来演示如何使用缩写的时区名称是一个问题，并且结果会因本地环境而异，尤其是本地默认值`TimeZone`。

假设您要解析`2015-02-20T17:21:17.190EST`，并且您认为 EST =美国东海岸意义上的*东部标准时间*，因此是纽约市时间。因此，您期望纪元时间是准确的`1424470877190`，或者`GMT: Fri, 20 Feb 2015 22:21:17.190 GMT`因为这`EST`是`GMT-0500`。这是一个测试脚本，显示了当前默认值`TimeZone`如何影响如何`EST`被解释。

```
import java.util.*
import java.text.*

SimpleDateFormat sdf

TimeZone.setDefault(TimeZone.getTimeZone("Australia/Sydney"))
printDefaultTimeZone()

sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSSz")

checkTime(sdf.parse("2015-02-20T17:21:17.190EST").getTime())
checkTime(sdf.parse("2015-02-20T17:21:17.190-0500").getTime())

TimeZone.setDefault(TimeZone.getTimeZone("EST"))
printDefaultTimeZone()

// same SDF

checkTime(sdf.parse("2015-02-20T17:21:17.190EST").getTime())
checkTime(sdf.parse("2015-02-20T17:21:17.190-0500").getTime())

printDefaultTimeZone()

// new SDF
sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSSz")

checkTime(sdf.parse("2015-02-20T17:21:17.190EST").getTime())
checkTime(sdf.parse("2015-02-20T17:21:17.190-0500").getTime())

void printDefaultTimeZone() {
    println(TimeZone.getDefault().getDisplayName() + ":" +     TimeZone.getDefault().getRawOffset() / 3600 / 1000)
}

void checkTime(long time) {
    println(time + (time == 1424470877190L ? ": CORRECT" : ":"))
} 
```

输出：

`Eastern Standard Time (New South Wales):10 1424413277190: 1424470877190: CORRECT Eastern Standard Time:-5 1424413277190: 1424470877190: CORRECT Eastern Standard Time:-5 1424470877190: CORRECT 1424470877190: CORRECT`

在上面的输出中，意外/不正确的日期时间是`1424413277190 = GMT: Fri, 20 Feb 2015 06:21:17.190 GMT`，比解析时间早*11*`EST`小时（在本例中是 的`Australia/Sydney`变体`EST`），因为夏令时适用于该日期。

所以你可以看到 的解释`EST`取决于`TimeZone`其*构造*时的默认值。在前两个转换批次中，默认`TimeZone`为`Australia/Sydney`，它本身缩写为`EST`，因此 Java 将缩写解释为。直到在默认 TZ 更改后构造新的 SDF 之后，我们才看到按预期应用的缩写。

作为设置默认时区的替代方法，您还可以`Calendar`在 SDF 上设置一个实例：

```
sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSSz")
sdf.setCalendar(Calendar.getInstance(TimeZone.getTimeZone("America/New_York"), new Locale("en_US"))) 
```

这将产生`EST`最初预期的解释效果。

# gstreamer - 使用 GnonLin/gnlcomposition 进行非线性编辑

> ID：14075377
> 
> 赞同：1
> 
> 时间：2012-12-28T20:29:13.447
> 
> 标签：gstreamer, video-processing

我想按顺序播放多个视频，然后应用一些效果。我想这`gnlcomposition`可以帮助我。

官方`gnlcomposition` [文档](http://gstreamer.freedesktop.org/data/doc/gstreamer/head/gnonlin/html/GnlComposition.html)真的很少。所以我开始测试一些基于`gst-launch`我搜索的 gnlcomposition 脚本。

如果我运行：

```
>gst-launch gnlcomposition (^
 gnlfilesource name="s1" location="file:///C:/p/test/a.mp4" ^
 start=0 duration=240 media-start=0 media-duration=240 ^
 gnlfilesource name="s2" location="file:///C:/p/test/b.mp4" ^
 start=0 duration=240 media-start=0 media-duration=240 ^
 ) ! queue ! videorate ! progressreport name="Merging " ! ^
 ffmpegcolorspace ! ffenc_mpeg4 ! ffmux_mp4 ! ^
 filesink location="C:/p/test/c.mp4" 
```

我得到：

```
Setting pipeline to PAUSED ...
Pipeline is PREROLLING ...
0:00:00.303017000  4052   0204B3E8 ERROR                 
ffmpeg .:0:: Tag mp4v/0x7634706d incompatible with output codec id '13'
Merging  (00:00:00): 0 seconds
ERROR: from element /GstPipeline:pipeline0/ffmux_mp4:ffmux_mp40: 
Could not configure supporting library.
0:00:00.305017000 Additional debug info:
..\..\..\..\..\Source\gst-ffmpeg\ext\ffmpeg\gstffmpegmux.c(654): 
gst_ffmpegmux_collected (): /GstPipeline:pipeline0/ffmux_mp4:ffmux_mp40:
Failed to write file header - check codec settings
4052 ERROR: pipeline doesn't want to preroll.
0204B3E8 Setting pipeline to NULL ...
ERROR    ffmpeg .:0:: Tag mp4v/0x7634706d incompatible with output codec id '13'
Freeing pipeline ... 
```

我正在使用[Ossbuild](http://code.google.com/p/ossbuild/) Win64 二进制文件： `GStreamer-WinBuilds-GPL-x86-Beta04-0.10.7.msi`

您能提供帮助和/或参考适当的文件吗？

# matlab - 简单的 MATLAB 图形绘制

> ID：14075380
> 
> 赞同：1
> 
> 时间：2012-12-28T20:29:18.930
> 
> 标签：matlab

这可能是一个明显简单的问题，但我不知道该怎么做。

我有 4 个计算值存储在 4 个变量中，每个变量代表一个条件。我想简单地在图表中显示这些中的每一个，X 轴上的条件/变量和 Y 轴上的值。我已经尝试了下面的代码，但它只是给了我一个带有值但没有行的空白图。

```
figure(1)
T = TA;
S = SA;
U = UA;
O = OA;
plot(T,S,U,O, '--o')
shg 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T21:20:43.690

试试这个

```
figure(1)
T = 12;
S = 7;
U = 5;
O = 10;
plot([T,S,U,O], '--o');
set(gca,'XTick',[1,2,3,4]);
set(gca,'XTickLabel',{'T','S','U','O'})
shg 
```

对我来说，这给了

![在此处输入图像描述](../Images/f606ed18cb2a8d841433dc9af5b31e58.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T20:46:23.040

检查绘图上的 matlab 帮助，特别是 linespecs 以定义您希望绘制数据的格式。例如，下面的代码用不同颜色的线条和符号绘制每个变量。

```
 figure;
 hold on;
 plot(T,'-bo');
 plot(S,'-g.');
 plot(U,'-rd');
 plot(O,'-mx'); 
```

# go - 如何捕获通道死锁的异常？

> ID：14075382
> 
> 赞同：7
> 
> 时间：2012-12-28T20:29:48.753
> 
> 标签：go

我正在学习 Go，并且正在学习 GoTours 的[这一课](http://tour.golang.org/#69)。这是我到目前为止所拥有的。

```
package main

import (
    "fmt"
    "code.google.com/p/go-tour/tree"
)

// Walk walks the tree t sending all values
// from the tree to the channel ch.
func Walk(t *tree.Tree, ch chan int) {
    if t != nil {
        Walk(t.Left, ch)
        ch <- t.Value
        Walk(t.Right, ch)
    }
}

func main() {
    var ch chan int = make(chan int)
    go Walk(tree.New(1), ch)
    for c := range ch {
        fmt.Printf("%d ", c)    
    }
} 
```

如您所见，我尝试通过将写入通道的值打印出来来测试我的 Walk 功能。但是，我收到以下错误。

```
1 2 3 4 5 6 7 8 9 10 throw: all goroutines are asleep - deadlock!

goroutine 1 [chan receive]:
main.main()
    main.go:25 +0x85

goroutine 2 [syscall]:
created by runtime.main
    /usr/local/go/src/pkg/runtime/proc.c:221

exit status 2 
```

我认为这个错误应该是预料之中的，因为我从来没有`close`这个频道。但是，有没有办法我可以“捕捉”这个死锁错误并以编程方式处理它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-29T04:39:47.917

这会导致死锁，因为`range`构造会迭代直到通道关闭。 [http://golang.org/ref/spec#For_statements](http://golang.org/ref/spec#For_statements)

在这里，您需要在完全探索树时关闭通道或使用其他构造。

对于此示例，您知道树的大小为 10，因此您可以简单地执行从 1 到 10 的 for 循环，并在每次迭代时从通道读取一次。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-30T00:04:13.160

死锁类似于 nil 指针引用，它代表程序中的 BUG。由于这个原因，这类错误通常是不可恢复的。

正如 lbonn 提到的，这里的问题是您需要“关闭（myChan）”您的频道。如果你不这样做 for-range 循环，那么循环将永远等待下一个元素。

你可以尝试这样的事情：

```
func main() {
    var ch chan int = make(chan int)
    go func() {
        Walk(tree.New(1), ch)
        close(ch)
    }()
    for c := range ch {
        fmt.Printf("%d ", c)
    }
} 
```

如果要并行遍历树，则需要进行进一步的更改：

```
package main

import (
    "code.google.com/p/go-tour/tree"
    "fmt"
    "sync"
)

// Walk walks the tree t sending all values
// from the tree to the channel ch.
func Walk(t *tree.Tree, ch chan int, done *sync.WaitGroup) {
    if t != nil {
        done.Add(2)
        go Walk(t.Left, ch, done) //look at each branch in parallel
        go Walk(t.Right, ch, done)
        ch <- t.Value
    }
    done.Done()
}

func main() {
    var ch chan int = make(chan int, 64) //note the buffer size
    go func() {
        done := new(sync.WaitGroup)
        done.Add(1)
        Walk(tree.New(1), ch, done)
        done.Wait()
        close(ch)
    }()
    for c := range ch {
        fmt.Printf("%d ", c)
    }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-28T21:08:42.330

不，您无法从死锁中恢复。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-14T14:31:25.837

通道死锁错误为：

> 致命错误：所有 goroutine 都处于休眠状态 - 死锁！

通道死锁不是`panic`错误，是致命错误，请参阅[https://golang.org/pkg/log/#Fatal](https://golang.org/pkg/log/#Fatal)

> Fatal 等价于 Print()，然后调用 os.Exit(1)。

正如你所看到的，最后`Fatal`会调用`os.Exit(1)`，所以它与 完全不同`panic`，这就是为什么它不能`recover`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-26T15:56:16.303

我想出了这个解决方案，它基本上使用 2 个通道，如果两个通道都关闭，则得出的结论是树是相同的。

```
package main

import "golang.org/x/tour/tree"
import "fmt"

// Walk walks the tree t sending all values
// from the tree to the channel ch.
func Walk(t *tree.Tree, ch chan int) {
    if t == nil {
        return
    }
    Walk(t.Left, ch)
    ch <- t.Value
    Walk(t.Right, ch)
}

// Same determines whether the trees
// t1 and t2 contain the same values.
func Same(t1, t2 *tree.Tree) bool {
    tc1 := make(chan int)
    tc2 := make(chan int)

    go func() {
        Walk(t1, tc1)
        close(tc1)
    }()
    go func() { 
       Walk(t2, tc2)
       close(tc2)
    }()

    for {
        x1, y1 := <-tc1;
        x2, y2 := <-tc2;
        if  x1 != x2  {
            return false
        }
        if !y1 || !y2 {
            return true
        }
    }
}

func main() {
    t1, t2 := tree.New(123), tree.New(1)
    fmt.Println(Same(t1, t2))
} 
```

我正在关注 go-tour guide 并且只使用了迄今为止教授的资源（与在上述解决方案中使用同步包不同。）

# cordova - 从 PhoneGap 中的路径/URL 保存到相机胶卷

> ID：14075384
> 
> 赞同：0
> 
> 时间：2012-12-28T20:30:02.273
> 
> 标签：cordova

如何从 PhoneGap 中的路径/URL 将图像保存到相机胶卷？

前任：

```
 canvas=document.getElementsByTagName('canvas')[0]
    ctx=canvas.getContext()

    ctx.drawRect(100,100,200,200)

    url=canvas.toDataURL()
    saveToCameraRoll(url) // Saving to camera roll 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T20:41:31.300

如果你想在 iOS 中从画布保存到相机胶卷，我已经写了一个插件来做这件事。

[https://github.com/devgeeks/Canvas2ImagePlugin](https://github.com/devgeeks/Canvas2ImagePlugin)

```
canvas2ImagePlugin.saveImageDataToLibrary(win, fail, 'myCanvasID'); 
```

# css - CSS 缩小和背景图像语法

> ID：14075387
> 
> 赞同：-1
> 
> 时间：2012-12-28T20:30:29.733
> 
> 标签：css, minify

我一直在寻找一个不需要命令行来运行的可靠的 css minifier。类似于 Google[闭包编译器](http://closure-compiler.appspot.com/home)的东西，您可以在其中输入多个 JavaScript 文件并将它们缩小到一个文件中。到目前为止，我已经从[这个线程中找到了](https://stackoverflow.com/questions/4232021/online-css-minifier-that-uses-the-yui-compressor)[这个](http://www.shrinker.ch/)。

我给它喂了几个 css 文件，发现其中一个 css 文件中引用的图像之一在缩小文件中被破坏了。

```
background-image: url('/abc/img.png') 
```

它被转换为

```
background-image: url(http://mydomain.com/'abc/img.png') 
```

这看起来不对。奇怪的是，如果只输入一个带有上述代码的文件，结果是正确的。另外，如果我将背景图像更改为背景，结果也是正确的。所以我有点困惑，问题是什么：

*1* - 使用背景图像时省略背景位置是否合法 CSS？
*2* - 这个工具是否有任何替代品（接受多个 css 文件来缩小并且不需要作为命令运行）。

非常感谢任何其他建议和见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T00:11:36.773

1.  `background`速记可以安全地仅用于颜色或仅用于图像部分。我从 2000 年就开始这样做了~ 因为我很懒惰，从来没有遇到过问题。当然，您可以尝试询问 CSS 验证器是否有效（参见：http: [//jigsaw.w3.org/css-validator/](http://jigsaw.w3.org/css-validator/)）。

2.  就个人而言，我让 Sass 处理我的缩小需求，因为我已经将它用于它的其他功能。我没有过多关注它对生成的文件的粉碎程度，但所有空白和注释都在其最紧凑的模式下被删除，颜色被压缩到它们的 6 或 3 位十六进制值。

# c++ - 如何将数组与类一起使用

> ID：14075388
> 
> 赞同：1
> 
> 时间：2012-12-28T20:30:29.573
> 
> 标签：c++, arrays, class

```
#include <iostream> 
#include <string>
#include <math.h> 
#include <fstream>
using namespace std;

class Storage
{
public:
Storage();
string information[10][7];
void SetInformation(string,int);
void GetInformation(int);
};  

Storage::Storage(){cout<<"\nStorage Activated\n";}

void Storage::SetInformation(string,int i)
{//input
    i--;
    for (int j=0;j<7;j++)
    {
    switch(j+1)
    {case 1: cout << "\nFirst Name: "; break;
    case 2: cout << "\nLast Name: "; break;
    case 3: cout << "\nAge: "; break;
    case 4: cout << "\nEmail: "; break;
    case 5: cout << "\nDoor Number: "; break;
    case 6: cout << "\nRoad Name: "; break;
    case 7: cout << "\nPost Code: "; break;
    default:;}      
    cin >> information[i][j];}
    }

void Storage::GetInformation(int i){
// output
    i--;
    for (int j=0;j<7;j++)
    {   
    switch(j+1)
    {case 1: cout << "\nFirst Name: "; break;
    case 2: cout << "\nLast Name: "; break;
    case 3: cout << "\nAge: "; break;
    case 4: cout << "\nEmail: "; break;
    case 5: cout << "\nDoor Number: "; break;
    case 6: cout << "\nRoad Name: "; break;
    case 7: cout << "\nPost Code: "; break;
    default:;}      

    cout << information[i][j];}
}

int main()
{
    int x;
    Storage();
    Storage Someone;
    cin >> x;
    Someone.SetInformation(int);

return 0;
} 
```

好的，这就是我现在所做的。但是我现在在激活课程时遇到问题？我的意思是我不能使用该类或其方法？我是否也以正确的方式创建了这些类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T20:33:01.277

只需有一个包含成员`firstName`,`lastName`等的类。叫它`Person`什么的。然后将您的数组替换为`std::vector<Person>`.

创建从标准输入读取特定信息的成员方法（可能`enum`告诉方法要读取哪些信息）。

将`cout`末尾的 替换为显示*每个对象*信息的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T21:22:35.250

简单的类和一些方法只是为了开始：这更像是一种“C”风格而不是 C++，但很容易理解。如果您了解更多可以（并且应该）升级的 OOP 规则

```
class Person
{
public:
    Person() { /*init with default values here if needed*/ isValid = false; }
    ~Person() { }

    /* add setters/getters if needed */
public:
    string firstName;
    string lastName;
    int age;
    string email;
    int doorNumber;
    string roadName;
    string postCode;
    bool isValid;   // is the data valid
}; 
```

'方法'：

```
void inputPersonData(Person &person)
{
    cout << "\nFirst Name: ";
    cin >> person.firstName;

    cout << "\nLast Name: ";
    cin >> person.lastName;

    cout << "\nAge: ";
    cin >> person.age;

    cout << "\nEmail: ";
    cin >> person.email;

    cout << "\nDoor Number: ";
    cin >> person.doorNumber;

    cout << "\nRoad Name: ";
    cin >> person.roadName;

    cout << "\nPost Code: ";
    cin >> person.postCode;

    person.isValid = true; // now the data is valid
}

void outputPersonData(Person &person)
{
    // do not print not loaded person data...
    if (person.isValid == false) return;

    // use cout to print...
}

// us it that way:
// deletePerson(information, 10, index_to_delete)
void deletePerson(Person *peopleArray, int count, int toDelete)
{
    peopleArray[toDelete].isValid = false;
} 
```

简单的按名称搜索函数，返回一个索引：

```
int searchPersonByName(Person *peopleArray, int count, const string &name)
{
    for (int i = 0; i < count; ++i)
    {
        if (peopleArray[i].firstName == name)
            return i;
    }
} 
```

主要：

```
Person information[10];

// input
cout << "\nWhich Slot would you like to store the informaton in ?(1-10)";
cin >> i;
i--;
inputPersonData(information[i]);
outputPersonData(information[i]); 
```

创建一个循环并在该循环中询问一个问题以填充数据或搜索

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T00:11:49.957

你不激活一个类，你创建它的一个实例..

在这里，我只是指出您的一些语法错误。您还应该按照上面其他答案中的建议为该人创建更合适的类定义。

在你的课上，

```
void Storage::SetInformation(string,int i) <--- Wrong. 
```

方法的每个参数都需要有一个类型后跟名称，例如

```
void Storage::SetInformation(string name, int i) 
```

在方法内部，格式化块的方式类似于，

```
for ( ... ) {
    switch ( ... ) {

    }
} 
```

这将使阅读更容易..

在你的 switch() 语句中，

如果您的意图是从用户那里获取一些值，请在“名字”、“姓氏”等每个提示之后使用“cin”语句。

```
default:;}  <--- Error 
```

将其更改为

```
 default: break;
} 
```

在你的主要，

```
Storage();  <--- Delete this line
Storage Someone; <--- This is creating an instance of your class. 
```

您将在您的类的实例上调用一个方法，但是

```
Someone.SetInformation(int); <--- This is incorrect. 
```

您需要将值传递给您的方法，而不是类型。“int”是一个类型说明符。将该方法称为，

```
Someone.SetInformation("some text", x); 
```

# c# - 使用 Connection.CreateCommand() 时是否需要将 ADO.NET 事务分配给命令对象？

> ID：14075390
> 
> 赞同：7
> 
> 时间：2012-12-28T20:30:36.067
> 
> 标签：c#, ado.net

我需要使用 ADO.NET 提供程序的事务。

下面是一个正在创建的连接、事务和命令的简单示例。当我使用创建命令`connection.CreateCommand()`时，是否需要将事务分配给命令？或者，是否因为我正在使用`connection.CreateCommand()`vs 更新命令对象而设置了事务？

```
var connection = Database.GetConnection();
connection.Open();

var transaction = connection.BeginTransaction();

var command = connection.CreateCommand();
command.Transaction = transaction; // Is this line needed when using connection.CreateCommand()? 
```

****更新****

当我测试两个对象的引用时，它们是相同的。我假设这意味着`connection.CreateCommand()`返回一个分配了事务的命令。或者这可能不是一个有效的测试。

```
using (var connection = Database.GetConnection())
{
    connection.Open();

    var transaction = connection.BeginTransaction();

    var command = connection.CreateCommand();

    if (object.ReferenceEquals(transaction, command.Transaction))
        Debug.WriteLine("EQUAL");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-20T08:11:02.290

您必须为每个`SqlCommand`实例显式设置事务。[这是`System.Data.SqlClient.SqlConnection.cs`（Line：782）](http://referencesource.microsoft.com/#System.Data/System/Data/SqlClient/SqlConnection.cs,782)的源代码`CreateCommand`：

```
new public SqlCommand CreateCommand() {
    return new SqlCommand(null, this);
} 
```

正如你看到的; 它传递`null`和`CommandText`（`this`本身）`SqlConnection`参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T20:38:13.347

是的，事务和命令需要相互关联。

一些经过编辑的示例代码：

```
// Connect to the database.
SqlConnection connection = new SqlConnection(Database.ConnectionString);
connection.Open();

// Start a transaction.
SqlCommand command = new SqlCommand();
command.Connection = connection;
command.Transaction = connection.BeginTransaction(System.Data.IsolationLevel.Serializable, "ryan");

// Delete any previously associated targets.
command.CommandType = System.Data.CommandType.StoredProcedure;
command.CommandText = "FirstSP";
command.Parameters.AddWithValue("@Id", this.Id);
command.ExecuteNonQuery();

// Add the specified targets to the product.
command.CommandText = "SecondSP";
command.Parameters.Add("@Id", SqlDbType.Int);
foreach (int Id in Ids)
{
    command.Parameters["@Id"].Value = Id;
    command.ExecuteNonQuery();
}

// Commit the transaction.
command.Transaction.Commit();

// Houseclean.
connection.Close(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-01T23:02:34.797

如果使用`TransactionScope`，则无需将任何内容附加到命令对象。

只需看[一下`TransactionScope`](https://msdn.microsoft.com/en-us/library/system.transactions.transactionscope(v=vs.80).aspx).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-13T17:49:17.277

```
using (var connection = new SqlConnection(Database.ConnectionString))
{
   connection.Open();
   using (var trans = connection.BeginTransaction())
   {
       using (var command = trans.Connection.CreateCommand())
       { 
          command.CommandText = 'DELETE FROM TABLE_NAME WHERE ID = ?'; 
          command.Transaction = trans;
          command.ExecuteNonQuery();
       }
       trans.Commit();
   }
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-16T10:44:24.753

如果将`connection.CreateCommand`, 与已经启动事务的连接一起使用，则生成的命令对象将被列入事务（将设置命令的事务属性）。

如果您使用`new Command`，则必须明确设置事务。

# ios - UIPageControl 更改 UIWebView 的 URL

> ID：14075395
> 
> 赞同：1
> 
> 时间：2012-12-28T20:30:40.483
> 
> 标签：ios, cocoa-touch, uiwebview, uipagecontrol

我的`UIWebView`页面上有一个`UIPageControl`：

UIPageControl 只有两个按钮/点，第一个我需要加载 UIWebView（www.mywebsite.com/page1.html），第二个点加载（www.mywebsite.com/page2.html）

任何帮助表示赞赏，已经在互联网上查看，但似乎找不到这样的东西。

干杯，

杰克。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T20:45:58.367

可以向页面控件添加操作：

```
[pageControl addTarget:self action:@selector(changeURL:) forControlEvents:UIControlEventValueChanged]; 
```

然后使用 switch 语句或 if/else if 和 pageControl 的索引来确定要使用的 URL，然后重新加载 webview。

另一条路线（可能更简单？）是创建一个“点”图像并使用自定义 UIButtons 来实现这一点。按下按钮时将按钮设置为“选定”等。

# c - C 看似有效的 0.1 比较被跳过

> ID：14075396
> 
> 赞同：2
> 
> 时间：2012-12-28T20:30:42.697
> 
> 标签：c, floating-point

我正在尝试编写一个程序，该程序向用户返回用于构成用户输入的美元金额（美国货币）的最小数量的美国硬币。

我的问题：当程序达到 0.1 时，程序不会减去一角钱，而是减去一个镍和 5 个便士。这只发生在大于 1.85 的数字上。当小于 1.85 时，成功减去一角钱。

这是我的代码：

```
 while (Money >= 0.25){
   Money = Money - 0.25;
   Coins = Coins + 1;
   printf ("Current money: %f \n", Money);
 }
while (Money >= 0.1) { 
  Money = Money - 0.1;
  Coins = Coins + 1;
  printf ("Current money: %f \n", Money);
}
while (Money >= 0.05) {
 Money = Money - 0.05;
 Coins = Coins + 1;
 printf ("Current money: %f \n", Money);
}
while (Money >= 0.01) {
 Money = Money - 0.01;
 Coins = Coins + 1;
 printf ("Current money: %f \n", Money);
} 
```

这是我使用数字 2.1 时的输出：

```
2.1
Current money: 1.850000 
Current money: 1.600000 
Current money: 1.350000 
Current money: 1.100000 
Current money: 0.850000 
Current money: 0.600000 
Current money: 0.350000 
Current money: 0.100000 
Current money: 0.050000 
Current money: 0.040000 
Current money: 0.030000 
Current money: 0.020000 
Current money: 0.010000 
Used 13 
```

这是我使用数字 1.85 时的输出：

```
1.85
Current money: 1.600000 
Current money: 1.350000 
Current money: 1.100000 
Current money: 0.850000 
Current money: 0.600000 
Current money: 0.350000 
Current money: 0.100000 
Current money: 0.000000 
 Used 8 
```

为什么会这样？为什么大于 1.85 的数字不使用角钱？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T20:35:14.837

因为 0.1 并不一定意味着 0.10000000000000000...。您只能看到数字`printf`显示为`%f`. 如果您逐步执行此操作并查看调试器中的值，您可能会看到在 2.1 循环结束时，该值类似于 0.099999999，即 < 0.10。

这就是为什么您不应该使用浮点值 ( `double`) 作为货币。相反，您应该使用类似 C# 的`decimal`数字，它不依赖于二进制浮点值。这是[C++ 中的一个实现](http://www.codeproject.com/Articles/3667/A-Decimal-Class-Implementation)。

在您的情况下，只需保留整数美分（并了解您需要除以 100 才能获得美元）将使您的计算准确。

```
int money = 281;  // $2.81

while (money >= 25) {    // Quarter
   money -= 25;
   coins++;
   printf("Current money: $%d.%d \n", money/100, money%100);
}
//... 
```

感谢 Vlad 提供此链接：[每个计算机科学家都应该知道的关于浮点运算的知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T20:37:16.777

[每个程序员都应该了解浮点数](http://download.oracle.com/docs/cd/E19957-01/806-3568/ncg_goldberg.html)。

欢迎来到浮点数的美妙世界。0.1 和 0.01 没有精确表示（类似于 1/3 没有最终的十进制表示）。我的猜测是第一个示例中的 0.10 实际上是 0.099999999998 或类似数字。因此 0.099999999998 < 0.10 并且比较失败。

有2个解决方案：

*   不要使用浮点数，而是使用定点表示（美分数）
*   使用 epsilon 比较。IE`if (x - 0.005 >= 10) { ...`

我个人会推荐第一个解决方案。

**示例**：在下面的文本中，为了简单起见，我将使用十进制 3 sf 数字和 1/3 和 1/999（三指外星人的硬币计算外包给地球）。

你的代码大致是：

```
while (money >= 1/3) {
    money -= 1/3;
    coins++;
}
while (money >= 1/999) {
    money -= 1/999;
    coins++;
} 
```

编译后看起来像：

```
while (money >= 0.333) {
    money -= 0.333;
    coins++;
}
while (money >= 0.001) {
    money -= 0.001;
    coins++;
} 
```

让我们输入一个大数字，比如 10。然后在初始运行之后，我们有：

```
money = 10 - 0.333 = 9.667 ≈ 9.67
money = 9.67 - 0.333 = 9.334 ≈ 9.33
money = 9.00 - 0.333 = 8.667 ≈ 8.66
...
money = 1.00 - 0.333 = 0.667 ≈ 0.667
money = 0.667 - 0.333 = 0.333 ≈ 0.334
money = 0.334 - 0.333 = 0.001 ≈ 0.001
// Next loop
money = 0.001 - 0.001 = 0.000 
```

Ups - 我们计算了一枚硬币太多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T20:35:29.430

因为浮点数并不精确。

通常，这类数字使用[IEEE-754](http://en.wikipedia.org/wiki/IEEE_floating_point)浮点格式表示，它是一种二进制编码。但并非每个分数/有理数/实数都可以用二进制表示，因此您的 1.85 实际上可能是 1.8499274 或 1.85010374 或其他。

这就是为什么你永远不应该依赖`==`and`!=`运算符的比较；相反，您应该检查两个数字是否足够接近：

```
const float eps = 1.0e-5;
if (abs(number1 - number2) < eps) {
    // let's pretend they're equal
} else {
    // they aren't equal
} 
```

为了进一步参考，我建议您阅读[这篇论文](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)，它详细解释了所有内容，以便您对浮点数有更深入的了解。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T21:36:26.037

您的问题都源于使用二进制浮点，即`float`or `double`。您问题中的许多数字不能完全用二进制表示。二进制浮点中可精确表示的数字的形式为 k/2^n，其中 k 是整数，n 是非负整数。

因此，这些值不能完全表示：

```
0.1
0.05
0.01
2.1
1.85
1.6
1.35
1.1
0.85
0.6
0.35 
```

等等。是不是很吓人？！

由于您使用的数字无法准确表示，因此您可能会出现舍入误差。这就是为什么你的程序没有按照你想要的方式运行。

浮点运算的标准参考是：[What Every Computer Scientist Should Know About Floating-Point Arithmetic](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)。

这项出色的工作涵盖了基础级别的浮点运算。它不限于二进制浮点。它还考虑使用十进制系统的表示。这是解决问题的真正关键。为了使您的算术准确，您需要使用十进制而不是二进制表示。如果你这样做，那么你可以准确地表示货币价值。

遗憾的是，常见的 C 实现不带有十进制浮点或定点数据类型。所以你需要自己动手，或者找第三方库。

作为一个非常简单的解决方案，假设您只需要表示最多 2 个小数位，您可以使用定点十进制表示。将您的值存储在`int`变量中并假设`100`.

# python - 如何计算列表末尾的出现次数

> ID：14075397
> 
> 赞同：4
> 
> 时间：2012-12-28T20:30:43.430
> 
> 标签：python

我想在 python 的列表末尾计算相同的出现次数。这很简单，但我也对你的一些有趣的解决方案感兴趣。列表只能包含“1”或“2”项。结果必须在 [3,4,5] 中。如果少于 2 则退出，如果超过 5 则返回 5。

**例子：**

让我们

```
 L = [1,1,2]
  Result: None (quit)

  L = [1,2,1,1]
  Result: None (quit)

  L = [1,2,1,1,1]
  Result: 3

  L = [1,1,2,2,2,2]
  Result: 4

  L = [1,2,1,1,1,1,1,1]
  Result: 5 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T20:59:32.053

我完成了给出可读答案的无聊工作。;) 它适用于各种元素，而不仅仅是`1`s 和`2`s。

```
In [1]: def list_end_counter(lst):
  ....:     counter = 0
  ....:     for elem in reversed(lst):
  ....:         if elem == lst[-1]:
  ....:             counter += 1
  ....:         else:
  ....:             break
  ....:     if counter < 3:
  ....:         return None
  ....:     elif counter > 5:
  ....:         return 5
  ....:     return counter 
```

稍作修改以节省一些行：

```
In [1]: def list_end_counter(lst):
  ....:     def stop():
  ....:         raise StopIteration()
  ....:     counter = sum(1 if elem == lst[-1] else stop() for elem in reversed(lst))
  ....:     return None if counter < 3 else 5 if counter > 5 else counter 
```

两者都给出了正确的结果：

```
In [2]: print list_end_counter([1,1,2])
None

In [3]: print list_end_counter([1,2,1,1])
None

In [4]: print list_end_counter([1,2,1,1,1])
3

In [5]: print list_end_counter([1,1,2,2,2,2])
4

In [6]: print list_end_counter([1,2,1,1,1,1,1,1])
5 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T21:01:54.010

喜剧一行回答：

```
def countOccurencesAtTheEndOfTheList(L):
    return (lambda num: None if num <= 2 else min(5, num))(len(L) if all(map(lambda x: x == L[-1], L)) else len(L) - 1 - [idx for idx, x in enumerate(L) if x != L[-1]][-1])

print countOccurencesAtTheEndOfTheList([1,1,2])
print countOccurencesAtTheEndOfTheList([1,2,1,1])
print countOccurencesAtTheEndOfTheList([1,2,1,1,1])
print countOccurencesAtTheEndOfTheList([1,1,2,2,2,2])
print countOccurencesAtTheEndOfTheList([1,2,1,1,1,1,1,1]) 
```

输出：

```
None
None
3
4
5 
```

解释：

`[idx for idx, x in enumerate(L) if x != L[-1]]`获取 L 中与最后一个元素不匹配的每个元素的索引。
`[idx for idx, x in enumerate(L) if x != L[-1]][-1]`获取与最后一个元素不匹配的最右边元素的索引。这仅在列表中的所有元素不相同时才有效。
`len(L) - 1 - [the above line]`如果列表中的所有元素不相同，则获取列表末尾与最后一个元素匹配的元素数。
`all(map(lambda x: x== L[-1], L)`仅当列表中的所有元素都相同时才返回 True。
`len(L) if [the above line] else [the line above the above line]`获取列表末尾与最后一个元素匹配的元素数，无论列表中的所有元素是否相同。如果值太低则
`lambda num: None if num <= 2 else min(5, num)`返回，并将可能的最大值限制为 5。`None`

警告：仅供娱乐。请不要写这样的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T20:45:44.657

您可以尝试利用`itertools.groupby`这样一个事实，即如果键未排序，它将分别对键进行分组（返回`False`< 2 只是为了显示输出 - 您可以更改为任何您想要的）。使用`groupby`，您将获得一个形式为 的迭代`(key, values)`，其中`values`另一个迭代包含与键相关的所有值。在这种情况下，我们不关心键（因此是`_`），我们将 转换`values`为一个列表，然后获取它的长度（这会产生一个长度列表，类似于`[1, 1, 2]`的情况`[1, 2, 1, 1]`）。然后我们从该列表中取出最后一项，这将表示最后一个元素重复的次数。从那里，我们应用返回哪个值的逻辑：

```
In [1]: from itertools import groupby

In [2]: def my_func(l):
   ...:     val = [len(list(g)) for _, g in groupby(l)][-1]
   ...:     if val < 3:
   ...:         return False
   ...:     return min(val, 5)
   ...: 

In [3]: 

In [4]: L = [1,1,2]

In [5]: my_func(L)
Out[5]: False

In [6]: L = [1,2,1,1]

In [7]: my_func(L)
Out[7]: False

In [8]: L = [1,2,1,1,1]

In [9]: my_func(L)
Out[9]: 3

In [10]: L = [1,1,2,2,2,2]

In [11]: my_func(L)
Out[11]: 4

In [12]: L = [1,2,1,1,1,1,1,1]

In [13]: my_func(L)
Out[13]: 5 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-28T20:57:18.077

这是另一个想法：

```
def count(l):
    n = l[::-1].index([2,1][l[-1] - 1])
    return min(n, 5) if n > 2 else None

print count([1,1,2])
print count([1,2,1,1])
print count([1,2,1,1,1])
print count([1,1,2,2,2,2])
print count([1,2,1,1,1,1,1,1]) 
```

```
没有任何
没有任何
3
4
5

```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-28T21:12:17.530

列表的“索引”方法可用于进行搜索。我假设如果列表全为 1，那么您想要的结果与将单个 2 附加到该列表时的结果相同；如果全部为 2，则与前面添加 1 的结果相同...

```
def mejmo_count( lst ):

    if len(lst) >= 3:          # otherwise answer is None
       tail = lst[-2:-6:-1]    # extract last part, reversed (omit final)
       x = 3-lst[-1]           # search for this..
       n = (tail + [x]).index(x) # find the first x (sentinel found if not present)
       if n >= 2:             # n can be 0..4 here
           return n+1
    return None 
```

# javascript - “存储”在 IE9 中未定义

> ID：14075399
> 
> 赞同：1
> 
> 时间：2012-12-28T20:30:50.453
> 
> 标签：javascript, html

> **可能重复：**
> [在 IE 中未定义 localStorage 对象](https://stackoverflow.com/questions/3392032/localstorage-object-is-undefined-in-ie)

下面的代码`SCRIPT5009: 'Storage' is undefined`在 IE9 中给了我。它适用于 Chrome、Safari、Firefox。

```
Storage.prototype.setObject = function(key, value) {
    this.setItem(key, JSON.stringify(value));
} 
```

**udpate**我正在从 Apache 服务器提供页面，而不是从本地文件系统访问它，因此以下内容不适用：

[localStorage 对象在 IE 中未定义](https://stackoverflow.com/questions/3392032/localstorage-object-is-undefined-in-ie)

[直接从文件系统访问网站时，IE9 中的本地存储失败](https://stackoverflow.com/questions/8706006/local-storage-in-ie9-fails-when-the-website-is-accessed-directly-from-the-file-s)

**更新 2**发现问题，请参阅我的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T21:00:44.313

发现了问题。我必须指定 DOCTYPE`<!DOCTYPE html>`即使其他浏览器不关心 IE。

感谢@Rocket Hazmat 指出这一点。

如果没有 DOCTYPE，IE 将进入 Quirks 模式。使用 DOCTYPE，IE 进入标准模式。我的猜测是 IE 需要处于标准模式才能访问 HTML5 功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T20:38:11.040

在这里猜...

IE 9 在本地文件系统上运行时似乎不支持 localStorage：[直接从文件系统访问网站时，IE9 中的本地存储失败](https://stackoverflow.com/questions/8706006/local-storage-in-ie9-fails-when-the-website-is-accessed-directly-from-the-file-s)

更多细节可以在这里找到：http: [//www.wintellect.com/CS/blogs/jprosise/archive/2011/03/10/using-html5-web-storage-for-interprocess-communication.aspx](http://www.wintellect.com/CS/blogs/jprosise/archive/2011/03/10/using-html5-web-storage-for-interprocess-communication.aspx)

因此，您可以在外部服务器上运行它 - 或检查您的脚本是否支持它：

```
if ("localStorage" in window && window["localStorage"] != null) {

    // Local storage supported

} 
```

# python - 访问 Google Drive 中的电子表格

> ID：14075400
> 
> 赞同：3
> 
> 时间：2012-12-28T20:31:12.057
> 
> 标签：python, google-api, google-sheets

我有一个电子表格，在我的 Google Drive 中存储了一些目录，我想使用 Python 使用 Google 电子表格 API 访问和阅读这些目录。做这个的最好方式是什么？似乎 Google API 网站上的所有示例都涉及 Google Docs 中的文档，而不是 Google Drive，而且 Google Drive API 的示例似乎都没有涉及阅读电子表格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T22:47:40.803

您可以使用[电子表格 API](https://developers.google.com/google-apps/spreadsheets/)或[Apps 脚本](https://developers.google.com/apps-script/)以编程方式访问存储在您的云端硬盘帐户中的电子表格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-14T17:31:50.893

链接 = [https://docs.google.com/spreadsheets/d/...source](https://docs.google.com/spreadsheets/d/...source) = StringIO.StringIO(requests.get(link).content)) 数据 = pd.read_csv(source)

# python - 在简单的 python 代码中找不到错误:(

> ID：14075401
> 
> 赞同：-3
> 
> 时间：2012-12-28T20:31:14.863
> 
> 标签：python, python-3.x

这是一些python3代码，我找不到其中的错误：

```
httpurl = "http://okgift.ru/audio/Servantes/Don-Kihot/"
httpurl = string(httpurl)
mp3 = 1
mp3 = int(mp3)
ext = ".mp3"
ext = string(ext)
while mp3 < 332:
    final = httpurl+mp3+ext
    print(final)
    mp3 = mp3+1 
```

错误：

```
Traceback (most recent call last):
  File "prog.py", line 2, in <module>
    httpurl = string(httpurl)
NameError: name 'string' is not defined 
```

这是在线的：http: [//ideone.com/u0ZBo2](http://ideone.com/u0ZBo2)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T20:33:59.110

`string`不是内置的python类型。您可能想要`str()`：

```
httpurl = str(httpurl) 
```

但这是多余的，因为`httpurl`已经*是*type `str()`。

行`mp3 = int(mp3)`和 也是如此`ext = string(ext)`，但在连接时*需要*转换`mp3`为字符串：

```
final = httpurl+str(mp3)+ext 
```

虽然如果您使用字符串格式会更好：

```
final = '{0}{1}{2}'.format(httpurl, mp3, ext) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T20:35:56.867

首先，它`str`不是用于转换为字符串类型的字符串。其次，您不需要任何这些转换。

```
httpurl = 'http://www.google.com/' # This is a string, no need to cast
ext = '.mp3' # this is a string, no need to cast
for mp3 in range(1, 332):
    final = "{url}{mp3}{ext}".format(url=httpurl, mp3=mp3, ext=ext)
    print final 
```

# ios - 如何创建具有最大宽度的多行 UILabel？

> ID：14075403
> 
> 赞同：1
> 
> 时间：2012-12-28T20:31:34.223
> 
> 标签：ios, cocoa-touch, uitableview, uilabel

我正在编写一个简单的 IRC 客户端，我在 Twitter 的 iOS 应用程序外观之后对其进行建模。我已经截取了 Twitter 应用程序的屏幕截图，以供参考：

[![](../Images/52563aaf886e7556504222cb015d8656.png)](https://i.imgur.com/ftww8.png)

它看起来像一个简单的表格视图，每个单元格内都有一些标签。因此，在我的应用程序中，我以编程方式创建表格和单元格格式。我的自定义单元格中只有两个标签，我将它们放在另一个之上。顶部标签是一个简单的 1-liner。底部标签我想包含更长的消息，并且需要它在我指定的宽度内自动换行到多行。

我如何实现这一目标？

到目前为止，我已经尝试将标签的框架显式设置为我想要的尺寸，但如果这就是我所做的一切，它不会自动换行。它只是水平流出单元格。然后我尝试`sizeToFit`在`tableView:cellForRowAtIndexPath:`函数中为这个标签调用 ，但它似乎以非常小的宽度自动换行 - 文本在两个或三个字母之后换行，然后垂直流出单元格。

我似乎无法弄清楚如何让标签中的文本在指定宽度后换行。有任何想法吗？

我的自定义单元格类：[https ://github.com/ryancole/pound-client/blob/master/pound-client/views/MessageListCell.m](https://github.com/ryancole/pound-client/blob/master/pound-client/views/MessageListCell.m)

`cellForRowAtIndexPath`函数：[https](https://github.com/ryancole/pound-client/blob/master/pound-client/controllers/MessageListViewController.m#L62-L84) : //github.com/ryancole/pound-client/blob/master/pound-client/controllers/MessageListViewController.m#L62-L84

编辑1：

为了演示当我设置`numberOfLines`为 0 时发生了什么，对于无限制，我附上了一个被调用的屏幕截图。它在几个字符之后换行，而不是首先占用 UILabel 框架的指定宽度。这是在被调用之前设置的`sizeToFit`。

[![](../Images/308a287bf8c2c235f5d2c9add2ca686e.png)](https://i.imgur.com/fT1S3.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-28T20:39:55.857

您需要将 numberOfLines 设置为您想要的行数，或者 0 允许无限数量的行（默认值为 1）。您可能还需要将 lineBreakMode 设置为 NSLineBreakByWordWrapping（尽管这可能是默认设置）。

**编辑后：**如果您希望文本从顶部开始，那么我认为您必须使用可变高度单元格，而不是为自定义单元格设置明确的大小。我在我的一个项目中这样做了：

```
-(CGFloat) tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
    UILabel *label = [[UILabel alloc] init];
    label.numberOfLines = 0; // allows label to have as many lines as needed
    label.text = _objects[indexPath.row][@"detail2"];
    CGSize labelSize = [label.text sizeWithFont:label.font constrainedToSize:CGSizeMake(300, 300000) lineBreakMode:NSLineBreakByWordWrapping];
    CGFloat h = labelSize.height;
    return h + 50;
} 
```

我在这里创建的标签，只是为了计算行高，在这个方法结束后被丢弃。单元格的宽度由我在 constrainedToSize: 参数中的 300 参数确定。+50 只是我为了让我的细胞看起来正确而添加的一个软糖因素——你可能想弄乱这个数字来得到你想要的东西。在我的自定义单元格类中，我使用了 initWithStyle:reuseIdentifier，并且没有设置任何大小。

# asp.net-mvc - 如何在连接字符串中指定数据源？

> ID：14075407
> 
> 赞同：0
> 
> 时间：2012-12-28T20:31:46.083
> 
> 标签：asp.net-mvc, database, web-config

**更新的问题**

如何指定本地 MSSQL 服务器的数据源？

```
<connectionStrings>
    <add name="DefaultConnection" connectionString="Data Source=(localhost)\SQLEXPRESS;Initial Catalog=bladb;Integrated Security=true" providerName="System.Data.SqlClient" />
</connectionStrings> 
```

无论我尝试什么，我都会不断收到“找不到数据源”异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T20:39:18.907

是的。您的应用程序需要知道数据库的位置、用户名和密码才能进行身份验证。

您将此称为魔术字符串，但我不知道您在想什么其他魔术方法，您的应用程序可以自动知道数据库的 IP 地址、用户名和密码。

大多数情况下，当您设置数据库时，他们会为您创建此连接字符串，因此您可以将其复制并粘贴进去。这只是一次性的事情，所以它不应该是太大的交易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T20:44:35.957

如果您将 web.config 中的连接字符串部分定义为

```
<connectionStrings configSource="connections.config"/> 
```

它将指向一个单独的配置文件，只包含连接字符串。

然后，您可以通过下面的代码在代码中添加连接字符串。请注意，这样做的好处是不必重新启动网站。快乐的时光...

```
 using (StreamWriter writer = File.CreateText(@"c:\code\AVIVA_site\connections.config"))
            {
                writer.WriteLine("<connectionStrings>");
                for (int i = 0; name.Length > i; i++)
                {
                    writer.WriteLine("<add name=\"{0}\" connectionString=\"{1}\" providerName=\"{2}\" />", name[i], conString[i], provider[i]);
                }
                writer.WriteLine("</connectionStrings>");
                writer.Close();
            } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T22:27:12.097

您不要在 localhost 周围加上括号；它只是为了`(local)`or `(LocalDb)\v11.0`。对于 localhost，它将是：`DataSource=localhost`对于默认的未命名本地数据库（如果存在，则不一定）或`DataSource=localhost\SQLExpress`对于 SQL-Server Express 的默认命名安装。

有关详细信息，请参阅[http://www.connectionstrings.com/](http://www.connectionstrings.com/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T21:31:15.097

为了上帝的爱...

```
if (!WebSecurity.Initialized)
{
    WebSecurity.InitializeDatabaseConnection(
        "DefaultConnection",
        "Users",
        "UserId",
        "UserName",
        true);
} 
```

我没有添加“DefaultConnection”，而是添加了 Configuration.ConnectionStrings["DefaultConnection"]。

问题不在 web.config 中的连接字符串中，而是在初始化数据库调用中......

# c - 使用 strcpy 写入无效

> ID：14075415
> 
> 赞同：2
> 
> 时间：2012-12-28T20:32:14.413
> 
> 标签：c, memory-leaks, valgrind

我已经编程了一段时间，但我是 C 新手。我在 ansi C 中有这个链表实现，我需要测试它。我已将问题缩小到无效写入的问题。我通过 Valgrind 运行代码并收到以下输出：

```
==18131== Invalid write of size 1
==18131==    at 0x4C2C0CC: __GI_strcpy (in /usr/lib/valgrind/vgpreload_memcheck-amd64 linux.so)
==18131==    by 0x40089B: main (in /home/btm7984/hw3/TestList)
==18131==  Address 0x51f1388 is 0 bytes after a block of size 8 alloc'd
==18131==    at 0x4C2B6CD: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==18131==    by 0x400880: main (in /home/btm7984/hw3/TestList)
==18131==
==18131== Invalid write of size 1
==18131==    at 0x4C2C0DF: __GI_strcpy (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==18131==    by 0x40089B: main (in /home/btm7984/hw3/TestList)
==18131==  Address 0x51f138e is 6 bytes after a block of size 8 alloc'd
==18131==    at 0x4C2B6CD: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==18131==    by 0x400880: main (in /home/btm7984/hw3/TestList)
==18131==
--18131-- VALGRIND INTERNAL ERROR: Valgrind received a signal 11 (SIGSEGV) - exiting
--18131-- si_code=1;  Faulting address: 0x6D4FCAA;  sp: 0x402bdae00 
```

我可以从中确定的只是我分配了错误的东西。我认为它必须与我的 strcpy 线有关。我真的不知道如何回答这个问题。下面是我对 LinkedLists 接口的使用。InitLinkedLists、AddToBackOfList 和 DestroyList 都在该接口中定义。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "LinkedLists.h"

int main(int argc, char *argv[]) {

  FILE *fp;
  char tmpString[100];
  LinkedLists *ListPtr = malloc(sizeof(LinkedLists));
  ElementStructs *DataPtr;
  LinkedListNodes* curr = malloc(sizeof(LinkedListNodes));
  int counter = 0;
  int Done = 0;

  InitLinkedList(ListPtr);
  fp = fopen(argv[1], "r");
  if (!fp){
    fprintf(stderr,"%s Cannot open file %s\n", argv[0], argv[1]);
    exit(1);
  }
  do{
    fscanf(fp,"%s",tmpString);
    if (!feof(fp)) {
      DataPtr = malloc(sizeof(DataPtr));
      printf("%d   %d : %d\n",counter,(int)strlen(DataPtr->str),(int)strlen(tmpString));
      strcpy(DataPtr->str,tmpString);
      DataPtr->index=counter;
      AddToBackOfLinkedList(ListPtr, DataPtr);
      counter++;
      Done = 1;
    } else {
      Done = 0;
    }
  }while (Done); 
```

总之，我认为 strcpy 导致无效写入，我不知道为什么。

任何帮助将不胜感激。提前致谢。

编辑： ElementStructs 定义如下：

```
typedef struct ElementStructs
   {
   /* Application Specific Definitions */
   int index;
   char str[100];
  } ElementStructs; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T20:49:06.963

问题出在以下语句中：

```
DataPtr = malloc(sizeof(DataPtr)); 
```

您只分配足够的内存来保存指针而不是完整的结构。

您应该使用以下方式分配：

```
DatapPtr = malloc(sizeof(ElementStructs)); 
```

或者，如评论（WhozCraig）中所述：

```
DatapPtr = malloc(sizeof(*DataPtr)); 
```

# java - android/java：在活动之间传递嵌套类

> ID：14075417
> 
> 赞同：0
> 
> 时间：2012-12-28T20:32:25.113
> 
> 标签：java, android, parcelable

我不确定在活动之间传递外部类的最佳方式。我应该让它们都可以打包吗？只是不确定如何在 writeToParcel 方法中执行 parcelable 数组。

```
public class checklistItem  {

    String name;
    String date;
        ...
}

public class dailyChecklist  {

    ...
    checklistItem[] theList;
    ...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T20:54:46.313

您可以在您的应用程序中扩展 Application 类，并在那里创建对您想要跨活动共享的实例对象的引用。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T22:32:49.300

非静态嵌套类包含对其封闭外部类的隐藏引用；这有时很有用，但在其他场合无用。如果您不需要从内部类调用外部类，那么您应该将内部类声明为静态。这样，它将表现为一个普通的非嵌套类，但它的定义仍将保留在外部类的命名空间中。

当然，对于纯粹主义者来说，`class`这里我指的是该类的一个实例（对象）。

# html - 样式化输入类型=“文件”。如何显示文件路径？

> ID：14075420
> 
> 赞同：5
> 
> 时间：2012-12-28T20:32:59.057
> 
> 标签：html, css, forms, file-upload

我一直在尝试设置输入 type="file" 字段的样式。我的按钮是样式化的，但我似乎无法弄清楚如何让文件路径/文件在用户选择要上传的文件时显示。有人可以帮忙吗？

```
<form action="" method="POST" enctype="multipart/form-data">
    <div class="fileupload-buttonbar">
        <label class="file-upload"><span>Upload....</span><input name="uploadfile" type="file"> </label>    
    </div>
</form> 
```

CSS...

```
.file-upload {
    overflow: hidden;
    display: inline-block;
    position: relative;    
    vertical-align: middle;
    text-align: center;
    color: #fff;
    border: 2px solid #707070;
    background: #A0A0A0;
    -moz-border-radius: 8px;
    -webkit-border-radius: 8px;
    border-radius: 8px;
    text-shadow: #000 1px 1px 4px;
    cursor:pointer;
}
.file-upload:hover {
    background: #2FA2FF;
}
.file-upload.focus {
    outline: 2px solid yellow;
}
.file-upload input {
    position: absolute;
    top: 0;
    left: 0;
    margin: 0;
    font-size: 12px;
    opacity: 0;
    filter: alpha(opacity=0);
    z-index:-1;
}
.file-upload span {
    position: absolute;
    top: 0;
    left: 0;
    display: inline-block;
    padding-top: .45em;
}
.file-upload { height: 38px; }
.file-upload,
.file-upload span { width: 160px; }    
.file-upload-status {
    margin-left: 10px;
    vertical-align: middle;
    padding: 7px 11px;
    font-weight: bold;    
    font-size: 16px;
    color: #888;
    background: #f8f8f8;
    border: 3px solid #ddd;
} 
```

​</p>

我的代码在这里 [http://jsfiddle.net/hjNEC/](http://jsfiddle.net/hjNEC/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-28T20:46:27.003

向输入字段添加一个`change`事件，然后获取它的`.value`.

示例（使用 jQuery）：

```
$('input[name="uploadfile"]').change(function(){
    var fileName = $(this).val();
    alert(fileName);
}); 
```

演示：http: [//jsfiddle.net/hjNEC/2/](http://jsfiddle.net/hjNEC/2/)

**编辑**：由于输入字段是隐藏的，并且文件名是其中的一部分，因此您必须`fileName`自己在页面上显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-30T15:44:34.640

```
<form action="" method="POST" enctype="multipart/form-data">
     <div class="fileupload-buttonbar">
          <input type="file" name="uploadfile" id="uploadfile" style="display:none" onchange="file_path_display.innerHTML=uploadfile.value"/>
          <span class="file-upload" onclick="uploadfile.click()" ondragdrop="uploadfile.dragdrop()">Upload....</span>
          <div id="file_path_display"></div>
     </div>
</form> 
```

# java - 在 Jackson/Jersey JAVA 上发布带有多个参数 JSON 和 String 的请求

> ID：14075422
> 
> 赞同：22
> 
> 时间：2012-12-28T20:33:13.447
> 
> 标签：java, json, post, jersey, jackson

我使用 Jersey/Jackson 创建了一个 rest api，它运行良好。除了他们作为 JSON 接收的 POJO 之外，我想调整我的 POST 方法以接收字符串令牌。我已经调整了我的一种方法，如下所示：

```
@POST
@Path("/user")
@Consumes(MediaType.APPLICATION_JSON)
public Response createObject(User o, String token) {
    System.out.println("token: " + token);
    String password = Tools.encryptPassword(o.getPassword());
    o.setPassword(password);
    String response = DAL.upsert(o);
    return Response.status(201).entity(response).build();

} 
```

我想调用该方法，但无论出于何种原因，无论我尝试什么，令牌都会打印为 null。这是我为发送发布请求而编写的客户端代码：

```
public String update() {

    try {
        com.sun.jersey.api.client.Client daclient = com.sun.jersey.api.client.Client
                .create();
        WebResource webResource = daclient
                .resource("http://localhost:8080/PhizzleAPI/rest/post/user");

        User c = new User(id, client, permission, reseller, type, username,
                password, name, email, active, createddate,
                lastmodifieddate, token, tokentimestamp);
        JSONObject j = new JSONObject(c);
        ObjectMapper mapper = new ObjectMapper();

        String request = mapper.writeValueAsString(c) + "&{''token'':,''"
                + "dog" + "''}";
        System.out.println("request:" + request);
        ClientResponse response = webResource.type("application/json")
                .post(ClientResponse.class, request);
        if (response.getStatus() != 201) {
            throw new RuntimeException("Failed : HTTP error code : "
                    + response.getStatus());
        }

        System.out.println("Output from Server .... \n");
        String output = response.getEntity(String.class);
        setId(UUID.fromString(output));
        System.out.println("output:" + output);
        return "" + output;
    } catch (UniformInterfaceException e) {
        return "failue: " + e.getMessage();
    } catch (ClientHandlerException e) {
        return "failue: " + e.getMessage();
    } catch (Exception e) {
        return "failure: " + e.getMessage();
    }

} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-12-28T20:53:38.527

这不是 JAX-RS 的工作方式。您的 POST 请求的主体将被编组到带注释的资源方法的第一个参数（在本例中为`User`参数）。你有几个选择来解决这个问题：

1.  创建一个包含用户对象和令牌的包装器对象。在您的客户端和服务器之间来回发送。
2.  将令牌指定为 URL 上的查询参数，并在服务器端以`@QueryParam`.
3.  将令牌添加为标头参数，并在服务器端以`@HeaderParam`.

* * *

**示例 - 选项 1**

```
class UserTokenContainer implements Serializable {
    private User user;
    private String token;

    // Constructors, getters/setters
} 
```

**示例 - 选项 2**

*客户*：

```
WebResource webResource = client.
    resource("http://localhost:8080/PhizzleAPI/rest/post/user?token=mytoken"); 
```

*服务器*：

```
@POST
Path("/user")
@Consumes(MediaType.APPLICATION_JSON)
public Response createObject(@QueryParam("token") String token, User o) {
    System.out.println("token: " + token);
    // ...
} 
```

**示例 - 选项 3**

*客户*：

```
ClientResponse response = webResource
    .type("application/json")
    .header("Token", token)
    .post(ClientResponse.class, request); 
```

*服务器*：

```
@POST
Path("/user")
@Consumes(MediaType.APPLICATION_JSON)
public Response createObject(@HeaderParam("token") String token, User o) {
    System.out.println("token: " + token);
    // ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-12T08:41:58.620

**如果您使用 Jersey 1.x，最好的方法是将多个对象发布为 *@FormParam***

至少有两个优点：

1.  您不需要使用包装器对象来发布多个参数
2.  参数在正文中而不是在 url 中发送（与***@QueryParam***和***@PathParam 一样***）

检查这个例子：

***客户端：（纯Java）：***

```
public Response testPost(String param1, String param2) {
    // Build the request string in this format:
    // String request = "param1=1&param2=2";
    String request = "param1=" + param1+ "&param2=" + param2;
    WebClient client = WebClient.create(...);
    return client.path(CONTROLLER_BASE_URI + "/test")
            .post(request);
} 
```

***服务器：***

```
@Path("/test")
@POST
@Produces(MediaType.APPLICATION_JSON)
public void test(@FormParam("param1") String param1, @FormParam("param2") String param2) {
    ...
} 
```

# asp.net-mvc - 每个区域的 Autofac 依赖项

> ID：14075427
> 
> 赞同：1
> 
> 时间：2012-12-28T20:33:36.363
> 
> 标签：asp.net-mvc, autofac, asp.net-mvc-areas

我正在使用 Autoface 创建一个新的 MVC4 站点，该站点具有公共消费者站点以及用于管理面向消费者站点的管理区域。管理站点将位于不同的区域，使用与面向消费者的站点相同的服务，但不具有某些自定义品牌功能。

我遵循了其他地方给出的建议，即拥有一个 ViewDataFactory，它提供一组共享数据供视图使用。我的目标是根据您所在的区域提供不同的 ViewDataFactory。

例如，这里是实现 IViewDataFactory 的服务

```
builder.RegisterType<SelfServiceViewDataFactory>().As<IViewDataFactory>(); 
```

这给了我一个 ViewFactory，它被注入到我所有的控制器中。但是我想要实现的是这样的（不是功能代码）：

```
builder.RegisterType<ViewDataFactory>().As<IViewDataFactory>().ForType(ControllerBase1);    
builder.RegisterType<DifferentViewDataFactory>().As<IViewDataFactory>().ForType(ControllerBase2); 
```

控制器类型或 MVC 区域将确定解析哪个服务。

**编辑**

为了澄清我的帖子有两个问题：

1.  Autofac 中有没有办法说“仅对于 X 类型的类，Y ​​类型的服务将由实例 Z 提供”？
2.  有没有办法根据使用组件的区域来更改 Autofac 行为？

从我一直在阅读的所有内容来看，#1 的答案似乎是“否”，除非您有一个参数可用于检查要提供的组件。我知道 Ninject 可以提供基于命名空间的依赖项，因此其他框架似乎可以处理这种情况。似乎解决方案是提供一个参数或定义两个不同的服务。

我还没有真正看到太多关于 Autofac 和 MVC 领域的讨论，所以我猜如果没有自定义解决方案，#2 也是不可能的。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T15:52:11.993

使用命名服务可能是您最好的选择。所以你会做这样的事情：

```
builder
    .RegisterType<ViewDataFactory>()
    .Named<IViewDataFactory>("Area1");    

builder
    .RegisterType<DifferentViewDataFactory>()
    .As<IViewDataFactory>("Area2"); 
```

然后，如果您想避免手动注册控制器。您可以使用我刚刚拼凑但尚未测试的这段代码：

将此属性放在全局可访问的位置：

```
[AttributeUsage(AttributeTargets.Parameter, AllowMultiple = false)]
public class ServiceNamedAttribute : Attribute
{
    private readonly string _key;

    public ServiceNamedAttribute(string key)
    {
        _key = key;
    }

    public string Key { get { return _key; } }
} 
```

将此模块添加到您的 Autofac 配置中：

```
public class ServiceNamedModule : Module
{
    protected override void AttachToComponentRegistration(
        IComponentRegistry registry, IComponentRegistration registration)
    {
        registration.Preparing +=
            (sender, args) =>
            {
                if (!(args.Component.Activator is ReflectionActivator))
                    return;

                var namedParameter = new ResolvedParameter(
                    (p, c) => GetCustomAttribute<ServiceNamedAttribute>(p) != null,
                    (p, c) => c.ResolveNamed(GetCustomAttribute<ServiceNamedAttribute>(p).Name, p.ParameterType));

                args.Parameters = args.Parameters.Union(new[] { namedParameter });
            };
    }

    private static T GetCustomAttribute<T>(ParameterInfo parameter) where T : Attribute
    {
        return parameter.GetCustomAttributes(typeof(T), false).Cast<T>().SingleOrDefault();
    }
} 
```

然后你仍然可以通过像这样装饰构造函数来自动注册你的控制器：

```
public class Controller1
{
    public Controller1(ServiceNamed["Area1"] IViewDataFactory factory)
    { ... }
} 
```

# javascript - 获取 TinyMCE - gecko_spellcheck - 处理初始内容加载

> ID：14075431
> 
> 赞同：3
> 
> 时间：2012-12-28T20:34:01.280
> 
> 标签：javascript, jquery, tinymce

我希望 gecko_spellcheck 提供的拼写检查能够处理 TinyMCE 上的初始内容。拼写检查适用于新键入的信息，但不会对编辑器中已有的内容进行拼写检查。有什么建议么？这甚至可能吗？

我已经尝试过，特定于 TinyMCE，遵循此建议中给出的路径 - [TinyMCE 中 gecko_spellcheck 的问题](https://stackoverflow.com/q/8634106/1564167)。

我已经尝试将此代码放入 TinyMCE 编辑器中的许多事件中，例如 onPostReder、onInit、onSaveContent。

谢谢你。

我试图避免在网络上[看到](http://ondotnet.deap.nu/2009/01/implementing-tinymce-spellchecker-with.html)的按钮式拼写检查。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T11:25:41.390

一种解决方案是重置内容 oninit

```
var editor = tinymce.get('your_editor_id');
editor.setContent(editor.getContent()); 
```

这会触发浏览器的拼写检查功能。

# android - 操作栏列表导航标题

> ID：14075433
> 
> 赞同：1
> 
> 时间：2012-12-28T20:34:06.230
> 
> 标签：android, actionbarsherlock

如何将标题添加到操作栏的列表导航？可能吗？我正在使用动作条 Sherlock。

这个怎么运作：

![https://dl.dropbox.com/u/16134555/list_nav_1.png](../Images/a1b753745f755050e7f9f09d245b4228.png)

我想得到这个结果：

![https://dl.dropbox.com/u/16134555/list_nav_2.pn](../Images/426a5ce874fcf7e036ac91dcc1bf7119.png)

活动：

```
getSupportActionBar().setIcon(R.drawable.logo);
getSupportActionBar().setDisplayOptions(ActionBar.DISPLAY_SHOW_HOME);
Context context = getSupportActionBar().getThemedContext();
ArrayAdapter<CharSequence> list = ArrayAdapter.createFromResource(context, R.array.menu, R.layout.sherlock_spinner_item);
list.setDropDownViewResource(R.layout.sherlock_spinner_dropdown_item);
getSupportActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);
getSupportActionBar().setListNavigationCallbacks(list, this); 
```

R.array.menu：

```
<string-array name="menu">
    <item>Menu</item>
    <item>1</item>
    <item>2</item>
</string-array> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T22:38:26.883

这可以通过自定义`ArrayAdapter`和`getView`始终设置相同文本（菜单标题）的方法来完成。

```
class ActionBarArrayAdapter extends ArrayAdapter<String> {
    private Context mContext;

    public ActionBarArrayAdapter(Context context, String[] items) {
        super(context, 0, items);
        mContext = context;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        if (convertView == null) {
            convertView = LayoutInflater.from(mContext).inflate(
                    R.layout.sherlock_spinner_item, null);
        }
        ((TextView) convertView.findViewById(android.R.id.text1))
                .setText("Menu");
        return convertView;
    }
} 
```

这是初始化的方法`Adapter`：

```
ActionBarArrayAdapter list = new ActionBarArrayAdapter(context,
            getResources().getStringArray(R.array.menu));
list.setDropDownViewResource(R.layout.sherlock_spinner_dropdown_item); 
```

# python - Web.py 创作效率

> ID：14075434
> 
> 赞同：0
> 
> 时间：2012-12-28T20:34:08.770
> 
> 标签：python, web.py

我是 python web 框架的新手。我使用 web.py 因为我喜欢它的原始性。不过，我想知道，当被限制通过`return`关键字发送输出时，如何有效地生成页面和脚本？似乎对于任何 python 模块，您只能向浏览器发送一件事，即使它是一个大字符串。我对服务器端脚本的 python 方式缺少什么？如果有帮助，我来自 PHP 的角度。我习惯了可以说 print "foo" 并且 foo 会出现。现在我只允许每个模块打印一次。如果您能指出 python 脚本编写方法与 php 方法的方向，我将不胜感激！在这一点上，我非常困惑 python 如何在如此有限的情况下如此高效。

例如，这是我编写的一个基本程序：

```
 import web
 urls = ('/','index')
 class index:
     def GET(self):
         return "foo" ///Where this is the only place on the file I can output anything
 (and the rest of the file you should be familiar with) 
```

关键是在我看来，唯一可以输出任何东西的地方是在一个返回线中？现在我明白了，如果 URI 参数发生变化，您可以映射到不同的类，从而输出不同的东西，但即便如此，这似乎是有限的？

或者最终，Web 框架的重点是使用 web.py 中调用的“模板”吗？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T08:58:30.453

是的，这就是模板的用途：有效地将逻辑与表示分离。

您必须查询控制器类中的所有数据，然后将其传递给将输出 html 的模板。

这似乎与常见的 php 做法不同，但我敢肯定，即使是 php 开发人员也在选择这种方法。

关于 web.py，流式内容输出的另一个选项是使用`yield`，请参阅[http://webpy.org/cookbook/streaming_large_files](http://webpy.org/cookbook/streaming_large_files)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T05:30:09.247

Andrey Kuzmin 的回答是正确的，模板是正确的工作方式。

但是，如果您确实想生成在 php 'print ("blah");' 中返回的文本 某种方式，你可以像这样工作：

```
class index:
    def GET(self):
        output = []
        # do stuff...
        output.append('Some text.')
        # do more stuff...
        output.append('And more text...')
        # ok, now we're at the end:
        return '<br/>'.join(output) 
```

这会将您添加到“输出”列表中的所有文本连同 HTML 换行符一起返回给浏览器/客户端。

尽管如此，模板几乎总是一种更好的工作方式。

**为什么模板和单个“返回”更好？**

在 PHP 中，将内容“打印”到输出非常容易，而且很方便。但是，想象一下：

```
<?php
    include('foobar.php');
    header('Content-Type: Application/JSON');
    print ('{"message": "Hello World!"}');
?> 
```

太好了，对吧？问题是说您尝试包含的文件中有错误（foobar）。现在 PHP 错误信息将在 HTTP 标头*之前*返回给客户端，这将导致另一个 PHP 错误，以及一个混乱的页面。

或者，

foob​​ar.php 文件中有一些打印语句。同样，您现在在标题之前打印了错误，或者即使您没有执行自定义标题，您仍然会得到无效的文档。所以在 PHP 中，解决方案是这样的：

```
<?php
    ob_start(); // start caching all output, so it doesn't interfere.
    include('foobar.php');
    do_other_stuff();
    ob_end_flush(); // print the cached output.
?> 
```

虽然有些笨重，但可以解决这个问题。现在您遇到了这种情况 - 如果您的包含文件之一*也*使用 ob_start() 或其他输出缓存怎么办？只要他们的代码没有错误，你应该没问题。但是，如果出现错误，并且 php 在刷新之前崩溃，您将丢失该信息。

在 Python 中使用单个端点意味着您可以更好地控制返回的内容。在一些旧的 PHP 代码中，我必须维护有时会打印某些内容（可能是错误消息），并且我必须搜索整个代码库以尝试找到打印的位置。

**那么如何打印调试消息？**

在 Python 中，有一个非常有用的“日志记录”模块（[http://docs.python.org/2/howto/logging.html](http://docs.python.org/2/howto/logging.html)，或 google 获取更多教程），它允许您将所有错误消息记录到文件中，或者多个文件。然后，您可以在测试时“tail -f”该文件，并在发生时观察所有错误或调试信息，而不是在浏览器中等待它，因为它可能会被 CSS 或 HTML 格式弄乱或混淆。

这也意味着您意外向浏览器发送调试消息（可能带有敏感信息）的可能性要小得多，并且您可以在站点仍然保留最终生产的同时在日志记录级别（大量调试信息、仅错误等）之间切换外貌。

```
import logging
logging.basicConfig(filename='my_application.log', level=logging.DEBUG)
log = logging.getLogger(__name__)

# do stuff....
log.debug('This is a debug message')
# do more stuff
log.error('Oh no! This should not happen!')
# ... 
```

您现在将获得一个名为 my_application.log 的文件，其中包含所有错误和调试消息，例如：

```
appname:DEBUG:This is a debug message
appname:ERROR:Oh no! This should not happen! 
```

要停止显示调试消息，您只需将级别从 logging.DEBUG 更改为 logging.ERROR，或您想要的任何其他级别，您只会得到错误。链接的教程有更多信息。

我希望这个对你有用！

# android - VideoJS无法在移动设备上运行

> ID：14075436
> 
> 赞同：1
> 
> 时间：2012-12-28T20:34:12.467
> 
> 标签：android, iphone, ipad, mobile, video.js

我正在使用 VideoJS 播放从文件服务器提供的视频。这些文件是 mp4 格式，在任何桌面浏览器上都可以正常工作（使用 Flash 后备）。但是，它们在移动设备上根本不起作用。作为参考，请随时查看：

`http://74.203.203.93/content/aacfc5e7-fbeb-4785-ad04-023856a54a3d`

我试图以我能想到的所有方式来处理代码以使其工作，但显然我在某个地方遗漏了一些东西。有没有人有任何想法/建议？

更多信息：

常数：

*   视频为 mp4 格式（根据 MediaInfo 的 H.264 显示视频编解码器为 AVC）。
*   多种格式是不可能的（不会有超过 1（一）个“源”标签）。
*   视频文件托管在没有文件名的文件服务器中。浏览器获取位置，并获取源类型标记。
*   服务器是 IIS。
*   服务器支持字节范围请求。

迄今为止的尝试：

*   根据[http://help.videojs.com/discussions/problems/539-playing-mp4-on-android-using-videojs](http://help.videojs.com/discussions/problems/539-playing-mp4-on-android-using-videojs)

    *   从标签中删除了“type='video/mp4'”。
    *   检查服务器上的 MIME 类型，显示视频/mp4。
*   根据[https://github.com/zencoder/video-js/blob/master/docs/api.md](https://github.com/zencoder/video-js/blob/master/docs/api.md)

    *   添加了 javascript 以在准备就绪时调用 play()。
*   上面的扩展：尝试 javascript 在点击时调用 play()。

*   尝试将“.mp4”添加到 src 位置中 guid 的末尾。

*   交换了“source”标签的“type”和“src”元素的位置。
*   我已将源中的 https:// 更改为 http:// 每个位置，说移动设备不能很好地执行 https。
*   我将 src 中的相对 url 更改为绝对 url。

我将继续更新更多信息......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T19:15:18.690

In the great media wars flash has been eliminated from androids, thats why the webm file is a key component in videojs.The mp4 file must be converted into a webm file and both sources used. You can just upload the webm vid to fileserver as well and link both sources in the player. The filenames in the link to the server must end in .mp4 and .webm to be recognized.

2 must reads - [http://www.zdnet.com/androids-flash-player-is-dead-live-with-it-7000002668/](http://www.zdnet.com/androids-flash-player-is-dead-live-with-it-7000002668/)

[http://www.pcadvisor.co.uk/how-to/google-android/3417930/how-get-flash-in-android-jelly-bean/](http://www.pcadvisor.co.uk/how-to/google-android/3417930/how-get-flash-in-android-jelly-bean/)

The quickest way to convert a mp4 to webm without software is to upload it to youtube, once the video is there copy the link and go to keepvid.com, then download the webm. Remember the highest quality webm file is not always optimal do to the size of mobile devices and slow internet connections planetwide. The video quality toggle on videojs is on the way though.

# wolfram-mathematica - 数学中级数的导数

> ID：14075437
> 
> 赞同：1
> 
> 时间：2012-12-28T20:34:14.650
> 
> 标签：wolfram-mathematica, mathematical-expressions

我有一个等式：

```
y= Sum[ i x[i] , {i,10}] 
```

我想计算导数：

```
D[y,x[i]] -> = i 
```

我怎么能在数学中做到这一点？

我可以做到`D[y, x[3]]`，它给了我 3，但如果我输入`D[y, x[i]]`它返回 0，但我希望 i。

有没有办法在 Mathematica 中定义上述系列的参数导数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T21:30:06.667

无论如何，可能不是考虑问题的最佳方式：

构建变量列表：

```
vars = Table[Symbol["x" <> ToString[i]], {i, 1, 10}]
(* {x1, x2, x3, x4, x5, x6, x7, x8, x9, x10} *) 
```

建立你的功能：

```
expr = Dot[Range[10], vars]
(* x1 + 10 x10 + 2 x2 + 3 x3 + 4 x4 + 5 x5 + 6 x6 + 7 x7 + 8 x8 + 9 x9 *) 
```

取导数：

```
D[expr, #] & /@ vars 
(* {1, 2, 3, 4, 5, 6, 7, 8, 9, 10} *) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T21:45:40.920

这里有几点需要考虑。

1.  该符号`x_3`并不表示索引为 3 的 x。它表示 x_ 的三倍。您应该改用下标[x,3]。

2.  你的 y 是： `Sum[n * Subscript[x, n], {n, 1, 5}]`

3.  您现在可以找到偏导数： `D[Sum[n * Subscript[x, n], {n, 1, 5}], Subscript[x, 2]]` 给出 2。

4.  `D[Sum[Subscript[x, n], {n, 1, 5}], Subscript[x, j]]`给出 0。原因是它`Subscript[x, j]`被认为是一个变量。

# php - 从 Google Charts API 自定义气泡图的工具提示

> ID：14075439
> 
> 赞同：3
> 
> 时间：2012-12-28T20:34:15.570
> 
> 标签：php, javascript, tooltip, google-visualization, bubble-chart

我正在尝试从 Google API 更改气泡图中的气泡工具提示。

可以解决我的问题的角色：工具提示不适用于这种图表。

现在我的气泡显示有关行值的信息，根据文档，这是正确的，但我只需要该信息来绘制图表，并且我需要显示一个字符串作为工具提示。这个字符串由一些我需要格式化的值组成。

这可以做到吗？

作为记录，我正在使用 PHP 通过 JSON 向 Javascript 提供数据，并且我正在使用来自 google ( [https://www.google.com/jsapi](https://www.google.com/jsapi) ) 的最新 API。

这是我现在的列定义：

```
$data['cols'][] = array('id' => 'ID', 'label' => 'ID', 'pattern' => "", 'type' => 'string');
$data['cols'][] = array('id' => 'Fecha', 'label' => 'Fecha', 'pattern' => "", 'type' => 'number');
$data['cols'][] = array('id' => 'h', 'label' => 'h', 'pattern' => "", 'type' => 'number');
$data['cols'][] = array('id' => 'stringRes', 'label' => 'Valor', 'pattern' => "", 'type' => 'string');
$data['cols'][] = array('id' => 'Resultado', 'label' => 'Resultado', 'pattern' => "", 'type' => 'number'); 
```

提前致谢！

**编辑：**

**[解决方案]**

如果有人问同样的问题，我只是通过删除我不想显示的字段的标签来解决我的问题，就是这样！

我将列模型更改为：

```
$data['cols'][] = array('id' => 'ID', 'label' => 'Fecha', 'pattern' => "", 'type' => 'string');
$data['cols'][] = array('id' => 'Fecha', 'label' => '', 'pattern' => "", 'type' => 'number');
$data['cols'][] = array('id' => 'h', 'label' => '', 'pattern' => "", 'type' => 'number');
$data['cols'][] = array('id' => 'stringRes', 'label' => 'Resultado', 'pattern' => "", 'type' => 'string');
$data['cols'][] = array('id' => 'Resultado', 'label' => '', 'pattern' => "", 'type' => 'number'); 
```

感谢@jmac 为我的问题提供了一些方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T00:39:27.743

您可以在数据上使用[setFormattedValue()](https://developers.google.com/chart/interactive/docs/reference#DataTable_setFormattedValue)以使用一个值来绘制图表，并在鼠标悬停时弹出一个不同的数字。因为您正在导入数据并且我们看不到格式，所以我们无法告诉您具体如何处理它，但这里有一个示例：

```
var drawVisualizations = function() {
  // Create and populate a data table.
  var data = new google.visualization.DataTable();
  data.addColumn('string', 'Force');
  data.addColumn('number', 'Level');

  // Add 2 rows.
  // google.visualization.DataTable.addRows() can take a 2-dim array of values.
  data.addRows([['Fire', 1], ['Water', 5]]);

  // Add one more row.
  data.addRow(['sand', 4]);

  // Draw a table with this data table.
  var originalVisualization = new google.visualization.Table(document.getElementById('original_data_table'));
  originalVisualization.draw(data);

  // Clone the data table and modify it a little.
  var modifiedData = data.clone();

  // Modify existing cell.
  modifiedData.setFormattedValue(1, 1, "one");

  // Draw a table with this data table.
  var modifiedVisualization = new google.visualization.Table(document.getElementById('modified_data_table'));
  modifiedVisualization.draw(modifiedData);
} 
```

在您的情况下，您需要创建一个函数来遍历您的数据表并根据需要格式化您的项目，但无论如何，这将使您能够将数字图作为一件事，但显示为另一件事.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T17:47:47.950

**[解决方案]**

如果有人问同样的问题，我只是通过删除我不想显示的字段的标签来解决我的问题，就是这样！

我将列模型更改为：

```
$data['cols'][] = array('id' => 'ID', 'label' => 'Fecha', 'pattern' => "", 'type' => 'string');
$data['cols'][] = array('id' => 'Fecha', 'label' => '', 'pattern' => "", 'type' => 'number');
$data['cols'][] = array('id' => 'h', 'label' => '', 'pattern' => "", 'type' => 'number');
$data['cols'][] = array('id' => 'stringRes', 'label' => 'Resultado', 'pattern' => "", 'type' => 'string');
$data['cols'][] = array('id' => 'Resultado', 'label' => '', 'pattern' => "", 'type' => 'number'); 
```

感谢@jmac 为我的问题提供了一些方法。

# git - 如何生成单独的补丁文件（对于许多本地提交）并使用“git send-email”发送它们？

> ID：14075445
> 
> 赞同：2
> 
> 时间：2012-12-28T20:34:53.617
> 
> 标签：git

我正在为一个开源项目的开发做出贡献，该项目使用 git 作为源代码的存储库。

在对源代码和许多本地提交进行了一些修改之后，我想为每个提交生成一个包含我的签名（电子邮件地址和我的姓名）的补丁，并通过电子邮件发送给`git send-email`开源项目维护者。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T20:34:53.617

1）从git存储库下载源代码：

```
git clone git://address.of.repository/project/ /folder/path/on/my/computer 
```

2）在项目中创建你的 git 分支。这个分支将继续你所有的本地提交

```
git checkout -b <private_branch_name> 
```

3) 为 git commit 签名设置您的电子邮件地址和您的姓名：

```
git config --global user.name "Your Name"
git config --global user.email you@example.com 
```

完成此操作后，您可以通过以下方式修复用于此提交的身份：

```
git commit --amend --reset-author 
```

4）对源代码进行修改。可以在项目中添加新文件/文件夹。

每个修改都可以在本地单独提交：

5) 在提交更改之前。我们必须将新文件/文件夹添加到本地 git 存储库：

源码的项目文件夹下

```
git add <Newfolder>
git add <Newfile> 
```

6）然后在本地提交修改：

源码的项目文件夹下

```
git commit -a 
```

这将打开一个interactif窗口

您可以检查提交是否检测到已编辑的文件和以下新文件：

```
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#       modified:   bin/Makefile.am
#       modified:   configure.ac
#       new file:   src/new.c 
```

在 的 窗口下`commit -a`，您必须为您的修改输入注释

然后用`Ctrl`+ `O`（WriteOut）保存你的提交，然后`Enter`你的提交现在就被保存了

然后用+ (Exit)退出`commit -a`窗口`Ctrl``X`

注意：您需要在评论之间添加一个空行，以便在您将通过 eamil 发送的补丁文件中获取电子邮件主题和电子邮件核心

7) 在为每个修改完成所有提交之后，现在您可以为每个提交生成单独的补丁：

源码的项目文件夹下

```
 git format-patch --cover-letter -M master -o ../outgoing/ 
```

这将为每个提交生成一个补丁文件撤消文件夹传出

输出文件夹中生成的文件是包含电子邮件主题和电子邮件核心的信件以及信件中包含的补丁。

您可以检查是否有带有 subject 的字母`[PATCH 00/25]`。这封信包含其他带有主题的字母补丁的摘要`[PATCH 01/25]` `[PATCH 02/25]` `[PATCH 03/25]`......

不要忘记编辑文件`[PATCH 00/25]`。设置电子邮件主题和电子邮件核心

如果你想生成补丁`signed-off-by`只需添加`-s`：

```
git format-patch -s --cover-letter -M master -o ../outgoing/ 
```

8) 然后用 git 命令发送信件：

```
git send-email --to=email.address@destination.com --cc=email.address2@destination.com --cc=email.address3@destination.com outgoing/* 
```

要用于`git send-email`发送您的补丁，请编辑 ~/.gitconfig 以指定您的帐户设置：

```
[sendemail]
        smtpencryption = tls
        smtpserver = smtp.gmail.com
        smtpuser = yourname@gmail.com
        smtpserverport = 587 
```

相关链接：[http ://www.kernel.org/pub/software/scm/git/docs/git-send-email.html](http://www.kernel.org/pub/software/scm/git/docs/git-send-email.html)

# objective-c - URL 处的图像无法填充 NSData

> ID：14075448
> 
> 赞同：0
> 
> 时间：2012-12-28T20:34:57.753
> 
> 标签：objective-c, nsdata, nsurl, nsimage

我在一个无法加载到 NSData 的 URL 上有一个图像。

当我将图像 URL 粘贴到 Chrome 隐身窗口中时，它会成功显示。

但是，以下失败：

```
photoData = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:photoUrl]];
NSLog(@"data: %@", photoData); 
```

NSLog 输出：

```
data: (null) 
```

难道我做错了什么？我会很感激任何建议，谢谢。

编辑：URL 中包含扩展的 ASCII 字符，例如 à。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T21:16:49.413

啊。找到了答案。需要转义扩展 ASCII 的 URL。需要补充：

```
photoUrl = [photoUrl stringByAddingPercentEscapesUsingEncoding: NSUTF8StringEncoding]; 
```

[在这里](https://stackoverflow.com/a/2125247/870345)找到了答案。谢谢！

# c# - 将 XML 声明添加到 XML 字符串

> ID：14075449
> 
> 赞同：1
> 
> 时间：2012-12-28T20:35:09.657
> 
> 标签：c#, xml

我有一些看起来像..

```
<Root>
<Data>Nack</Data>
<Data>Nelly</Data>
</Root> 
```

我想添加`"<?xml version=\"1.0\"?>"` 到这个字符串。然后将 xml 保存为字符串。

我尝试了几件事..

这会破坏并丢失原始的 xml 字符串

```
myOriginalXml="<?xml version=\"1.0\"?>"  + myOriginalXml; 
```

这不会做任何事情，只是保留原始 xml 数据而没有附加声明。

```
 XmlDocument doc = new XmlDocument();
                doc.LoadXml(myOriginalXml);
                XmlDeclaration declaration = doc.CreateXmlDeclaration("1.0", "UTF-8","no");
                StringWriter sw = new StringWriter();
                XmlTextWriter tx = new XmlTextWriter(sw);
                doc.WriteTo(tx);
                string xmlString = sw.ToString(); 
```

这似乎也没有任何效果..

```
 XmlDocument doc = new XmlDocument();
                doc.LoadXml(myOriginalXml);
                XmlDeclaration declaration = doc.CreateXmlDeclaration("1.0", "UTF-8", "no");
                MemoryStream xmlStream = new MemoryStream();
                doc.Save(xmlStream);
                xmlStream.Flush();
                xmlStream.Position = 0;
                doc.Load(xmlStream);
                StringWriter sw = new StringWriter();
                XmlTextWriter tx = new XmlTextWriter(sw);
                doc.WriteTo(tx);
                string xmlString = sw.ToString(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T20:53:27.080

使用[xmlwritersettings](http://msdn.microsoft.com/en-us/library/bhksz5c0.aspx)来更好地控制保存。[XmlWriter.Create](http://msdn.microsoft.com/en-us/library/ms162620.aspx)接受该设置（而不是默认构造函数）

```
 var myOriginalXml = @"<Root>
                            <Data>Nack</Data>
                            <Data>Nelly</Data>
                          </Root>";
    var doc = new XmlDocument();
    doc.LoadXml(myOriginalXml);
    var ms = new MemoryStream();
    var tx = XmlWriter.Create(ms, 
                new XmlWriterSettings { 
                             OmitXmlDeclaration = false, 
                             ConformanceLevel= ConformanceLevel.Document,
                             Encoding = UTF8Encoding.UTF8 });
    doc.Save(tx);
    var xmlString = UTF8Encoding.UTF8.GetString(ms.ToArray()); 
```

# facebook - 从 Facebook API 获取 page_impressions

> ID：14075452
> 
> 赞同：0
> 
> 时间：2012-12-28T20:35:17.277
> 
> 标签：facebook, api, facebook-graph-api

使用[Graph API Explorer](https://developers.facebook.com/tools/explorer/)，我正在尝试获取我的一个页面的**page_impressions**指标（如[Facebook API Insights 文档](https://developers.facebook.com/docs/reference/fql/insights/#page_impressions)中所述）。我正在寻找的实际值是 Facebook Insights 页面 (https://www.facebook.com/userID?sk=page_insights) 上的“Weekly Total Reach”数字。

* * *

## 我在 Graph API 下尝试过的内容：

*   userID/insights/ - 提供一些很好的信息，但没有关于 page_impressions

## 我在 FQL 查询下尝试过的内容：

*   从见解中选择指标、值 WHERE object_id=userID AND metric='page_impressions' AND end_time=end_time_date('2012-12-26') AND period=period('week') - 这将返回一个空数据集。

* * *

在 stackoverflow 上已经多次询问过同样的问题（或非常相似的问题），但我找不到答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T07:02:05.873

原来我真的只是对我的身份验证令牌有问题。当我使用以下 Graph API 调用时，它工作得很好：

**/[pageId]/insights**（感谢 Oleg 对 pageId 的更正）

这给了我需要的所有信息，包括 page_impressions。如果我只想要 page_impressions 数据：

**/[pageId]/insights/page_impressions**

# javascript - 使用 JavaScript 读取 txt 文件的内容

> ID：14075456
> 
> 赞同：-2
> 
> 时间：2012-12-28T20:35:32.473
> 
> 标签：javascript

> **可能重复：**
> [从 Javascript 读取 txt 文件](https://stackoverflow.com/questions/5135610/reading-a-txt-file-from-javascript)

我需要使用 JavaScript 打开并读取 txt 文件的内容。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T20:40:16.037

在远程服务器上，您只需使用一个`XMLHttpRequest`对象来检索数据并访问它。

```
var request = new XMLHttpRequest();
request.open('GET', URL TO FILE);
request.onreadystatechange(function(){
      if(request.readyState === 4 && request.statusCode === 200){
          console.log(request.responseText);
      }
});
request.send(); 
```

这将在 IE7、8 甚至 9 中失败。

如果您尝试从本地磁盘读取，那么您将度过一段糟糕的时光。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T20:38:37.930

如果文本文件在您的本地文件系统中，那么由于 Javascript 在访问本地文件系统方面的限制，您将很难这样做。如果文本文件在服务器中，您可以使用简单的 XHR（Ajax 调用）来获取文件的内容。

# java - 包含 unicode 的 java 文件无法编译

> ID：14075458
> 
> 赞同：2
> 
> 时间：2012-12-28T20:35:42.603
> 
> 标签：java, eclipse, encoding, utf-8, javac

我下载了一个名为 PdfClown 的开源项目。运行它的样本似乎运行得很好。

但是，当我尝试更改任何包含 unicode 字节的 java 文件时，它不会编译，显示编译错误如下：

> [javac] C:\PDFClown\java\pdfclown.samples.cli\src\org\pdfclown\samples\cli\UnicodeSample.java:75：错误：**编码 Cp1252 的不可映射字符**

我已经更改了文件，并且它也是 UTF-8 的容器，但它没有帮助。

有人有线索吗？

谢谢！

顺便提一下，这个项目使用 ant，这意味着编译过程不是由用户直接运行，而是使用 build.xml 文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T21:06:58.977

您需要任务的`encoding`属性`<javac>`：

```
<javac srcdir="src" destdir="classes"
       source="1.6" target="1.6"
       classpathref="compile.class.path"
       encoding="UTF-8" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T20:39:53.247

告诉编译器在源文件中使用了哪种编码。

```
javac -encoding encoding 
```

[javac参数文档](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/windows/javac.html)

# scala - 对于 Scala 集合工厂对象，文档中的 apply 方法在哪里？

> ID：14075462
> 
> 赞同：1
> 
> 时间：2012-12-28T20:35:49.280
> 
> 标签：scala, scala-collections

因为我可以写：

```
DoubleLinkedList(1,2,3,4) 
```

我希望`apply`在伴生对象中找到一个方法`DoubleLinkedList`，但我在[此处链接的文档](http://www.scala-lang.org/api/current/index.html#scala.collection.mutable.DoubleLinkedList%24)中看不到任何内容。它在哪里？或者，为什么它不存在？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T20:47:51.153

在层次结构中向上找到它[`GenericCompanion`](http://www.scala-lang.org/api/current/scala/collection/generic/GenericCompanion.html)。在我看来，它没有被显示可能是一个 Scaladoc 错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T00:33:13.687

如果您仔细阅读您提到的文档页面：

CanBuildFrom 特征的通用实现，它将所有对 apply(from) 的调用转发给 collection from 的 genericBuilder 方法，并将所有对 apply() 的调用转发给该工厂的 newBuilder 方法。

# python - 将路径过长的文件复制到 Python 中的另一个目录

> ID：14075465
> 
> 赞同：17
> 
> 时间：2012-12-28T20:35:59.057
> 
> 标签：python, copy

我正在尝试使用 Python 2.7 在 Windows 上复制文件，但有时会失败。

```
shutil.copyfile(copy_file, dest_file) 
```

我收到以下 IOError：

```
[Errno 2] No such file or directory 
```

但是文件确实存在！问题是文件的路径太长。（> 255 个字符）

如何复制这些文件？在其他应用程序中打开它们不是问题。

要创建路径过长的文件，请创建一个文件名尽可能长的文件，并将包含的文件夹移到树结构的更深处。

我一直在尝试其中一些方法但没有成功： [http ://timgolden.me.uk/python/win32_how_do_i/copy-a-file.html](http://timgolden.me.uk/python/win32_how_do_i/copy-a-file.html)

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-28T21:41:46.120

我不确定 255 字符的限制，所以我偶然发现了[这篇文章](https://stackoverflow.com/questions/1857335/is-there-any-length-limits-of-file-path-in-ntfs#1857477)。在那里我找到了一个有效的答案：在路径之前添加 \\?\。

```
shutil.copyfile("\\\\?\\" + copy_file, dest_file) 
```

编辑：我发现使用长路径会导致 Windows 出现问题。我使用的另一个技巧是缩短路径：

```
import win32api
path = win32api.GetShortPathName(path) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-01-16T16:58:12.120

感谢[Gfy](https://stackoverflow.com/users/654160/gfy)的回答。我需要使用相对路径。`\\?\`无法成功添加到相对路径，所以需要先转换为绝对路径（从桌面运行）：

```
import os

def clean_path(path):
    path = path.replace('/',os.sep).replace('\\',os.sep)
    if os.sep == '\\' and '\\\\?\\' not in path:
        # fix for Windows 260 char limit
        relative_levels = len([directory for directory in path.split(os.sep) if directory == '..'])
        cwd = [directory for directory in os.getcwd().split(os.sep)] if ':' not in path else []
        path = '\\\\?\\' + os.sep.join(cwd[:len(cwd)-relative_levels]\
                         + [directory for directory in path.split(os.sep) if directory!=''][relative_levels:])
    return path

clean_path('samples')
\\?\C:\Users\Username\Desktop\samples
clean_path('\samples')
\\?\C:\Users\Username\Desktop\samples
clean_path('..\samples')
\\?\C:\Users\Username\samples
clean_path('..\..\samples')
\\?\C:\Users\samples
clean_path('C:\Users\Username\Dropbox')
\\?\C:\Users\Username\Dropbox 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T20:41:34.100

也许做这样的事情：

```
path = "some/really/really/long/path/more/than/255/chars.txt"

def copyFile(path, dest, relative=0):
    if len(path) > 255:
        if not os.sep in path:
            raise SomeException()
        moveTo, path = path.split(os.sep, 1)
        os.chdir(moveTo)
        copyFile(path, dest, relative + 1)
    else:
        path_base = ['..'] * relative
        path_rel = path_base + [dest]
        shutil.copyfile(path, os.path.join(*path_rel)) 
```

这是经过测试的，并且确实有效......但是，如果目的地超过 255 个字符，您将回到同一条船上。在这种情况下，您可能需要多次移动文件。

# php - php DB返回数组问题

> ID：14075468
> 
> 赞同：1
> 
> 时间：2012-12-28T20:36:15.087
> 
> 标签：php, database

我正在尝试将 2 个 db 结果组合在一起以获得如下所示的数组：

```
array(
    0=>array( 
      'name'=>'John',
      'title'=>'manager',
      'email'=>'test',
      'permission'=>'1',
      'depart'=>'human resource'
      ),
    1=>array(
      'name'=>'Ted',
      'title'=>'employee',
      'email'=>'test2',
      'permission'=>'2',
      'depart'=>'human resource'
   )
) 
```

前 3 个元素来自 1 个返回的 DB 结果，后两个元素来自另一个 DB 结果。

```
 $firstResults = DBCall::call(getName);  //get name,title,email or John and Ted as an array
     $secondResults = DBCall::call(getPermission);  //get permission and depart as an array

     //I then use array merge
     $userResults=array_merge($firstResults ,$secondResults);

     //but it will become

array(
    0=>array( 
      'name'=>'John',
      'title'=>'manager',
      'email'=>'test'

      ),
    1=>array(
      'name'=>'Ted',
      'title'=>'employee',
      'email'=>'test2'

   ),
    2=>array(
      'permission'=>'1',
      'depart'=>'human resource'
   ),
    3=>array(
      'permission'=>'2',
      'depart'=>'human resource'   
   )
) 
```

有什么办法可以归档我需要的结果吗？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T20:45:31.377

这似乎测试正常。[http://www.laprbass.com/RAY_temp_flyingcat.php](http://www.laprbass.com/RAY_temp_flyingcat.php)

```
<?php // RAY_temp_flyingcat.php
error_reporting(E_ALL);
echo "<pre>";

// SIMULATE DB RESULTS SETS
$getname = array(
    0=>array(
      'name'=>'John',
      'title'=>'manager',
      'email'=>'test',
      ),
    1=>array(
      'name'=>'Ted',
      'title'=>'employee',
      'email'=>'test2',
   )
)
;

$getperm = array(
    0=>array(
      'permission'=>'1',
      'depart'=>'human resource'
      ),
    1=>array(
      'permission'=>'2',
      'depart'=>'human resource'
   )
)
;

// MERGE THE ARRAYS SENSIBLY
foreach ($getname as $key => $arr)
{
    $getboth[$key] = array_merge($getname[$key], $getperm[$key]);
}

// SHOW THE WORK PRODUCT
print_r($getname);
print_r($getperm);
print_r($getboth); 
```

最好的问候，~雷

# php - 如何从动态数量的html文本框中传递多个值以插入语句？

> ID：14075485
> 
> 赞同：-1
> 
> 时间：2012-12-28T20:37:38.070
> 
> 标签：php, javascript, html, mysql

我正在做一个项目，其中根据通过 GET 方法获取的数字，我显示用于存储多个值的 HTML 文本框的动态数量。我以从 1 开始的升序方式为每个文本框提供唯一名称+id（如 textbox1，textbox2）。现在我希望当我单击提交按钮时，它应该触发一个插入语句，该语句一次插入所有文本框值。我知道我可以通过数组来做，但我的问题是如何在数组中获取所有文本框的值以及如何执行插入语句？

**我已经完成了以下代码：**

这是提交按钮的PHP代码：

```
 $schedules = array();
    if(isset($_POST['submit']))
    {
        for($d=1; $d<=$_GET['totalDay'] ;$d++)
        {
            array_push($schedules,$_POST['txtSchedule'.'$d']);
        }
        print_r($schedules);
    } 
```

这是html代码：

```
<form method="post">
<table>
  <tr>
    <td>Day</td>
    <td>Schedule</td>
 </tr>
  <?php
  if(isset($_GET['tour_code']) and ($_GET['totalDay']!=1))
  {
    $tour_code = $_GET['tour_code'];
    $total = $_GET['totalDay'];

    $i=0;
    do
    {
      $i=$i+1;
  ?>
  <tr>
    <td><?php echo $i;?></td>
    <td>
      <input name="txtSchedule<?php echo $i;?>" type="text"  size="30"/>
    </td>
  </tr>
  <?php
      $start = date('Y-m-j',strtotime($start.'+1 days'));
  }while($i!=$total);
  }
  ?>
</table>
<input type="submit" name="submit" value="Add Tour Details" /> 
```

**但我得到一个空数组。** 注意：$total 来自 URLString 的 $GET 方法。

下面是 HTML 的输出： ![在此处输入图像描述](../Images/b3e1a258c55601f45d027b22b9e45693.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T09:31:51.713

先说最简单的。你有一个错误，你不能使用

```
array_push($schedules,$_POST['txtSchedule'.'$d']); 
```

您必须在 $d 上使用双引号（单引号不会计算 d，它会从字面上读取带有美元符号的“txtSchedule$d”，而不是实际的 0、1、...、n）

```
array_push($schedules,$_POST['txtSchedule'."$d"]);
//or no quotes at all
array_push($schedules,$_POST['txtSchedule'.$d]); 
```

（这可能会解决您的问题）

* * *

但是现在让我们来看看如何通过表单命名约定使处理页面中的 $_POST 对象可以使用数组

您没有使用数组语法，但您非常接近。在 PHP 中，提交的任何内容都需要具有预期的格式，并且迭代 txtSchedule0、txtSchedule1、...txtScheduleN 不是一个 Array()，但 $_POST[] 是一个包含每个的数组（假设你已经命名了你的输入字段，缺少 1 个小东西 - 方括号）。

您需要做的是将输入命名为数组是数组名称后跟方括号 (arrayName[])，这是创建名称为 txtSchedule 的输入数组的方式（当您 print_r($_POST[' txtSchedule']) 你得到一个 Array())

```
<input name="txtSchedule[<?php echo $i;?>]" type="text"  size="30"/> 
```

当我开始使用 PHP 时，我遇到了同样的问题，您忘记了 [<?php echo $i;?>] 周围的方括号

只要确保如果你想对输入数组进行迭代：

```
for($i=0; $i < count($_POST['txtSchedule']); $i++){
    echo "They entered " . $_POST['txtSchedule'][$i] . " in the $i" . "th position";  
} 
```

...您已经使用了 <input name="arrayName[$i]"> 语法，或者更简单地使用 <input name="arrayName[]"> 来自动神奇地生成一个数组，按顺序提交输入在 HTML 页面中。命名约定非常重要，因为你弄错了（你使用 arrayName0，arrayName1，... arrayNameN 而不是 arrayName[0]，arrayName[1]，...arrayName[n]），它永远不会可用给你一个数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T20:53:21.680

如果我正确理解您的问题，您是否正在尝试从每个文本框中检索用户输入并将其保存在数组中？如果是这样，我会使用 jquery 来选择所有文本框并遍历它们并检索值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T21:01:50.897

如果您纯粹查看 SQL 语法，那么您可以通过提供更多值集来附加额外的记录以在查询末尾插入：

`INSERT INTO myTable (fieldName1, fieldName2) values ("Value1A", "Value1B"), ("Value2A", "Value2B")`

如果您查看 PHP 逻辑，那么我的第一个建议是使用 http POST 方法而不是 GET。然后开始处理`$_POST`字段：

```
$data= array();

foreach($_POST as $key => $value) {
  if (preg_match('/^TextBox\d+$/', $key)) {
    $data[] = $mysqli->real_escape_string($value);
  }
} 
```

基于可用数据构造 SQL 查询

```
if (count($data) > 0) {
  $sql = 'INSERT INTO `myTable` VALUES("' . implode('"),("', $data).'")';

  // log query

  // execute query

  // process query results

  // redirect user to a thankyou page
  header('Location: thankyou.php');
} 
```

请注意，代码假定您有一个 mysqli 连接实例可用`$mysqli`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-28T20:56:08.297

不确定这是否是您正在寻找的东西，但至少应该给您一个开始..

```
 String []ar=request.getParameterValues("name");
     String cmd=request.getParameter("cmd");
     if(cmd==null) cmd=""; 
     if(cmd.equals("Submit")){
     for(int i=0;i<ar.length;i++) {
      insert logic;

 <form method="post" action="page3.jsp">
 <br/><input type="text" name="name"/>
 <br/><input type="text" name="name"/>
 <br/><input type="text" name="name"/>

 <br/> <input type="submit" value="Submit" name="cmd"/>
 </form> 
```

原始帖子[http://www.daniweb.com/web-development/jsp/threads/197777/insert-dynamic-textbox-value-in-database](http://www.daniweb.com/web-development/jsp/threads/197777/insert-dynamic-textbox-value-in-database)

# c# - 带有静态类的 C# NullReferenceException

> ID：14075488
> 
> 赞同：1
> 
> 时间：2012-12-28T20:37:53.780
> 
> 标签：c#, nullreferenceexception

我有一个静态类：

```
namespace GVN  
{  
    static class ClData      
    {  
        public static string cltNM {get; set;}  
    }  
} 
```

但是，当我尝试使用它时，

```
label_nm.Text = ClData.cltNM; 
```

出现此错误：（[http://msdn.microsoft.com/library/vstudio/sxw2ez55](http://msdn.microsoft.com/library/vstudio/sxw2ez55)）

即使我手动执行此操作：

```
ClData.cltNM = "12345"; 
```

前：

```
label_nm.Text = ClData.cltNM; 
```

我怎样才能避免这个错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T20:39:31.170

您的问题是`label_nm`，`null`而不是`static` `string`变量，或者错误实际上不在您指示的代码行上。即使 `cltNM`它`null`不会在该行上引发空引用异常。

# objective-c - 使用 NSMutableArray 填充 TableView 的问题

> ID：14075491
> 
> 赞同：0
> 
> 时间：2012-12-28T20:38:01.690
> 
> 标签：objective-c, cocoa-touch, uitableview

我正在将 SudzC 用于 iPhone 应用程序。我成功地调用了我的 ASP.Net Web 服务并将所需的数据拉入一个名为 tableData 的 NSMutable 数组中。我有一个应该显示 tableData 内容的 tableView；但是，这是行不通的。我已经在这个问题上寻找了几个小时。我对Objective C世界很陌生，所以我认为这是我的一个小疏忽。我也将我的 TableView 链接到 ViewController（委托/数据源）。

这是我的代码：

```
#import "ViewController.h"
#import "DocumentServiceJSONService.h"

@interface ViewController ()

@end

@implementation ViewController
NSMutableArray *tableData;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

-(void)viewWillAppear:(BOOL) animated {
    tableData = [[NSMutableArray alloc] init];
    DocumentServiceJSONService* service = [[DocumentServiceJSONService alloc] init];
    [service GetAllEMSDocumentsXMLAsString: self action:@selector(handleGetAllEMSDocuments:)];
    [super viewWillAppear:animated];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

-(void) handleGetAllEMSDocuments:(id) result {

  if ([result isKindOfClass:[NSError class]]) {
        //if an error has occurred, handle it
        return;
    }

    if([result isKindOfClass: [SoapFault class]]) {
        return;
    }

    NSString* xmlString = result;

    CXMLDocument *xmlDoc = [[CXMLDocument alloc] initWithXMLString:xmlString options:0 error:nil];
    NSArray *nodes = NULL;
    nodes = [xmlDoc nodesForXPath:@"//EMSDocuments" error:nil];

    for (CXMLElement *node in nodes) {
        NSMutableDictionary *item = [[NSMutableDictionary alloc] init];
        int counter;

        for (counter = 0; counter < [node childCount]; counter++) {
        [item setObject:[[node childAtIndex:counter] stringValue] forKey:[[node childAtIndex:counter] name]];
        }
    //[item setObject:[[node attributeForName:@"DisplayName"] stringValue] forKey:@"DisplayName"];
        NSString *displayName = [item objectForKey:@"DisplayName"];
        [tableData addObject:displayName];
    }

}
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [tableData count];
}

-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *simpleTableIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];

    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:simpleTableIdentifier];
    }

    cell.textLabel.text = [tableData objectAtIndex:indexPath.row];
    return cell;
}

@end 
```

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T20:42:32.960

确保您在 .h 中正确设置了委托和数据源：

```
@interface YourViewController : UIViewController <UITableViewDataSource, UITableViewDelegate> 
```

如果您将 XIB 用于用户界面，则 tableview 将作为数据源和委托连接到文件所有者。 ![在此处输入图像描述](../Images/e6ca2d6572341fccd5298d569f9637a5.png)

-- 编辑：为您创建一个插座表视图： ![在此处输入图像描述](../Images/804c84df230850725218bde1ec9b693c.png)

# php - 我如何编写（加密）我的 php 代码这样

> ID：14075501
> 
> 赞同：-1
> 
> 时间：2012-12-28T20:38:51.323
> 
> 标签：php, zend-studio

我最近使用**[ShowMyCode](http://showmycode.com)**对一个旧脚本进行 deZend 以了解它是如何工作的，但在 dezend 之后，所有 1000 行都显示为这样

```
function s65615il8e( $IlbXmxb915, $B94omi07x1 = 0, $i4ss65VOR0 = 0 )
{
$JleV65B6RB = array( "1276" => "period", "4126" => "V2_HASH" );
if ( 0 < $B94omi07x1 || 0 < $i4ss65VOR0 )
{
    return substr( $JleV65B6RB[$IlbXmxb915], $B94omi07x1, $i4ss65VOR0 );
}
return $JleV65B6RB[$IlbXmxb915];
}

function e4l9roibmi( $xolsL1jB0i, $dBXj7eREB6 = 0, $oR609Xb5oV = 0 )
{
$wewOBeEdoe = array( "4126" => "B8REXV4YAS6A9WVBNFEV", "1276" => "76GDKGBBKZRJ597W8F7T" );
if ( 0 < $dBXj7eREB6 || 0 < $oR609Xb5oV )
{
    return substr( $wewOBeEdoe[$xolsL1jB0i], $dBXj7eREB6, $oR609Xb5oV );
}
return $wewOBeEdoe[$xolsL1jB0i];
} 
```

如您所见，它完全不可读，

**这个方法叫什么，我怎样才能像这样加密我的 php 代码**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T20:44:58.043

这称为**混淆**。

我可以告诉你：不要这样做。

很容易恢复。比 C++ 或任何真正编译的语言更容易。你只会用这种技术欺骗自己。

如果您仍然想这样做，请看一下：[是否有 PHP 的代码混淆器？](https://stackoverflow.com/questions/232736/code-obfuscator-for-php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T20:41:51.297

您必须使用 PHP 混淆器。查看这个[问题](https://stackoverflow.com/questions/232736/code-obfuscator-for-php)以获取更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T21:25:24.667

混淆的想法是使代码不可读。

所以这可能不是你想要的。但这是去混淆的代码

```
function function1( $var1, $var2 = 0, $var3 = 0 ) {
    $array1 = array( "1276" => "period", "4126" => "V2_HASH" );
    if ( 0 < $var2 || 0 < $var3 ) {
        return substr( $array1[$var1], $var2, $var3 );
    }
    return $array1[$var1];
}

function function2( $var1, $var2 = 0, $var3 = 0 ) {
    $array1 = array( "4126" => "B8REXV4YAS6A9WVBNFEV", "1276" => "76GDKGBBKZRJ597W8F7T" );
    if ( 0 < $var2 || 0 < $var3 ) {
        return substr( $array1[$var1], $var2, $var3 );
    }
    return $array1[$var1];
} 
```

没有什么知道旧函数/变量名称在哪里。但更容易阅读他们现在在做什么。希望有帮助！

# c++ - OpenGL 子窗口不会同时响应

> ID：14075505
> 
> 赞同：0
> 
> 时间：2012-12-28T20:39:14.177
> 
> 标签：c++, opengl, glut, codeblocks, viewport

我有一个问题，我正在使用 glut（openGL 实用工具包）。我正在主窗口中创建一个子窗口。主窗口显示一个简单的图形，子窗口显示另一个视图的图形。图形会旋转，因此应始终重新显示主窗口和子窗口。

但两者中只有一个显示旋转的图形。因此，当我启动程序时，主窗口中的图形旋转但在子窗口中它不旋转，它只是静止不动。

当我在子窗口中移动鼠标并按任意键时，角色会发生变化，因此图形在子窗口中旋转并在主窗口中静止不动。

我怎样才能让它们同时显示。我按照 Lighthouse 的教程进行操作，但它没有给我答案。我必须对我的视口做些什么吗？

```
 * GLUT Shapes Demo
 *
 * Written by Nigel Stewart November 2003
 *
 * This program is test harness for the sphere, cone
 * and torus shapes in GLUT.
 *
 * Spinning wireframe and smooth shaded shapes are
 * displayed until the ESC or q key is pressed.  The
 * number of geometry stacks and slices can be adjusted
 * using the + and - keys.
 */
#include <windows.h>
#ifdef __APPLE__
#include <GLUT/glut.h>
#else
#include <GL/glut.h>
#endif
#include <math.h>
#include <stdlib.h>

static int slices = 16;
static int stacks = 16;
int m=0;

int mainWindow,SubWindow, SubWindow2;

/* GLUT callback Handlers */

static void resize(int width, int height)
{
    const float ar = (float) width / (float) height;

    glViewport(0, 0, width, height);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glOrtho(-10,10,-10,10,-10,10);

    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity() ;
}

static void key(unsigned char key, int x, int y)
{
    switch (key)
    {
        case 27 :
        case 'q':
            exit(0);
            break;

        case '+':
            slices++;
            stacks++;
            break;

        case '-':
            if (slices>3 && stacks>3)
            {
                slices--;
                stacks--;
            }
            break;
    }

    //glutPostRedisplay();
}
void keyp(int key, int xx, int yy) {

    glutSetWindow(mainWindow);
    glutPostRedisplay();

}

void displaysub()
{const double t = glutGet(GLUT_ELAPSED_TIME) / 1000.0;
    const double a = t*90.0;

    glClear(GL_DEPTH_BUFFER_BIT | GL_COLOR_BUFFER_BIT);
     glClearColor(20,1,1,1);
     glLoadIdentity();
     glOrtho(-5,5,-5,5,-5,5);
    glColor3f(0,0,0);
glRotated(a,0,0,10);
    glPushMatrix();
        glTranslated(0,0,0);
        glutSolidSphere(2,10,10);
    glPopMatrix();

    glutSwapBuffers();
}

void display()
{const double t = glutGet(GLUT_ELAPSED_TIME) / 1000.0;
    const double a = t*90.0;
        glClear(GL_DEPTH_BUFFER_BIT | GL_COLOR_BUFFER_BIT);
     glClearColor(3,0,0,1);
glLoadIdentity();
     glOrtho(-10,10,-10,10,-10,10);
     glRotated(a,10,10,0);

displaysub();

}

static void idle(void)
{
    glutPostRedisplay();
}

/* Program entry point */
void init()
{

    glClearColor(3,0,0,1);
    glEnable(GL_DEPTH_TEST);
    glEnable(GL_CULL_FACE);

    // register callbacks
    glutIgnoreKeyRepeat(1);
    glutKeyboardFunc(key);
    glutSpecialFunc(keyp);

}

int main(int argc, char *argv[])
{
    glutInit(&argc, argv);
    glutInitWindowSize(640,480);
    glutInitWindowPosition(10,10);
    glutInitDisplayMode(GLUT_RGB | GLUT_DOUBLE | GLUT_DEPTH);

    mainWindow = glutCreateWindow("GLUT Shapes");
        glutSetWindow(mainWindow);
        glClearColor(3,0,0,1);
        glutDisplayFunc(display);
        init();

    SubWindow = glutCreateSubWindow(mainWindow,0,0,50,50);
        glutSetWindow(SubWindow);
        glClearColor(3,0,0,1);
        glutDisplayFunc(displaysub);
        init();

  glutIdleFunc(idle);
    glutMainLoop();

    return 1;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-28T22:48:57.053

上的文档[`glutPostRedisplay`](http://www.opengl.org/resources/libraries/glut/spec3/node20.html#SECTION00055000000000000000)指定仅调用当前窗口的显示函数。在这种情况下，有两个窗口。我不是使用 glut 的专家，但我建议进行两项更改

`displaysub()`从函数中删除`display()`并重写`idle()`

```
static void idle()
{
  int currentWindow = glutGetWindow();
  glutSetWindw(mainWindow);
  glutPostRedisplay();
  glutSetWindw(subWindow);
  glutPostRedisplay();
  glutSetWindow(currentWindow);
} 
```

`glutPostRedisplay`只是在主循环中标记要更新的窗口，我猜这是带有鼠标焦点的窗口。通过为独立于当前窗口的每个窗口发布帖子，所有窗口都将收到它们各自的显示调用

# grails - 填充 Grails g：从函数中选择

> ID：14075511
> 
> 赞同：0
> 
> 时间：2012-12-28T20:39:24.730
> 
> 标签：grails, groovy, grails-orm

试图从我的控制器中的一个函数中填充 ag:select，这可能吗？

目前我们有这个：

```
def run(Long id) {

    def reportInstance = Report.get(id)

    def listPromptValues = populatePrompts(reportInstance)*.values()

    if (!reportInstance) {
        flash.message = message(code: 'default.not.found.message', args: [message(code: 'report.label', default: 'Report'), id])            
        return
    }
    [reportInstance: reportInstance, listPromptValues: listPromptValues]
}

def populatePrompts(Report rp){
    //for each prompt in the report, go out and get it's values
    rp.prompts.collectMany {
        reportService.listDatatypeValues(it.datatype)
    }

} 
```

然后有问题的 g:select 是

```
<li class="fieldcontain">
                <g:each var="prompt" in="${reportInstance.prompts}">
                    <span id="prompts-label" class="property-label">
                        <g:message code="report.prompts.label" default="${prompt.name}:" />
                    </span>
                    <g:if test="${prompt.datatype.type == 'DropDown'}">                         
                        <g:select id="prompt.name" from="${listPromptValues}" name="prompt.name" value="" noSelection="['':'']"/>
                        <br>                            
                    </g:if>
                </g:each>
            </li> 
```

如果只有一个提示，这工作得很好，但是如果循环中有多个提示，我们需要能够直接从 gsp 视图调用 populatePrompt 函数，可能发送reportId然后取回listPromptValues。我似乎无法让 onChange(remoteFunction...) 正常工作，并且在搜索庞大的 Google 网络时空手而归。

类似于 createLink 的工作原理

```
${createLink(controller:'report', action:'runReport', id:"${reportInstance.id}")} 
```

但不是 createLink，而是 select 标签的 from 属性，例如：

```
<g:select id="prompt.name" from="{(controller:'report',action:'populatePrompt', id:"${reportInstance.id}")}" name="prompt.name" value="" noSelection="['':'']"/> 
```

有什么想法或方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T03:08:09.987

我认为@JamesKleeh 在他最后的评论中提出了一个可行的解决方案。

鉴于您的 gsp 结构是完全静态的，因此获取要动态加载的提示选择选项是没有意义的。只需从控制器中的 List 包中返回这些选项，`listPromptValues`然后直接将其放入 gsp 中。

关于您的参数`[prompt1: ['a','b','c'], prompt2: ['d','e','f']]`，您可以在您的方法中获取此映射`populatePrompts`并将每个键值对放入 gsp 选择标签中。像这样：

**控制器**

```
{    ....
    def listPromptValues = populatePrompts(reportInstance)
    ....
}

def populatePrompts(Report rp){
    //for each prompt in the report, go out and get it's values
    def promptMap = [:]            //map to be returned
    rp.prompts.each {
        promptMap.put(it.name, reportService.listDatatypeValues(it.datatype))
    }
    return promptMap
} 
```

**普惠制**

```
 <g:each var="prompt" in="${reportInstance.prompts}">
                    <span id="prompts-label" class="property-label">
                        <g:message code="report.prompts.label" default="${prompt.name}:" />
                    </span>
                    <g:if test="${prompt.datatype.type == 'DropDown'}">                         
                        <g:select id="prompt.name" from="${listPromptValues[prompt.name]}" name="prompt.name" value="" noSelection="['':'']"/>
                        <br>                            
                    </g:if>
                </g:each> 
```

# html - 我的导航栏末端有两种颜色的边框？

> ID：14075518
> 
> 赞同：0
> 
> 时间：2012-12-28T20:40:02.560
> 
> 标签：html, css

[http://jsfiddle.net/R5G56/](http://jsfiddle.net/R5G56/)

我正在尝试创建一个具有边框和轮廓的插入效果的导航栏，并且我希望第一个和最后一个导航项在其外部也具有相同的插入边框。我可以使用第一个导航项获得效果，因为轮廓与边框颜色相同，但是当轮廓应用于最后一个导航项时，它看起来很荒谬，因为它也改变了它周围的一切。

知道我能不能做到这一点？

这是第一项和最后一项的 CSS，其余的 CSS 可以在 jsfiddle 中找到：

```
.navigation li:first-child a {
    outline:1px solid #000;
}
.navigation li:last-child a {
    outline:1px solid #383838;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T00:18:27.610

一个简单的解决方案是将额外的边框应用于`li`标签而不是`a`标签。所以新的 CSS 将如下所示。现场示例：http: [//jsfiddle.net/R5G56/6/](http://jsfiddle.net/R5G56/6/)

```
.navigation li:first-child{
    border-left:1px solid #000;
}
.navigation li:last-child {
    border-right:1px solid #383838;
} 
```

`a`标签已从选择器中删除，并已被和`outline`切换出去。`border-left``border-right`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T21:07:41.680

[http://jsfiddle.net/R5G56/5/](http://jsfiddle.net/R5G56/5/)

那是你想要发生的事情吗？我认为你会双重概述最后一个孩子。

```
.navigation li:last-child a {
    border-right:1px solid #383838;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T23:22:54.570

你能用盒子阴影来欺骗边框吗？您可以在一个语句中分配多个

# php - 使用 mysql 将删除列更新为 1，其中评论 ID 为“x”？

> ID：14075519
> 
> 赞同：1
> 
> 时间：2012-12-28T20:40:02.980
> 
> 标签：php, mysql

我之前问过一个类似的问题，但是我对我的脚本做了很多更改，现在我的问题与我的上一个问题不同。所以现在我已经完成了这些更改，这应该都可以正常工作，但事实并非如此。

我基本上有用户评论，用户可以在其中删除或批准评论。我现在只关注删除功能。

我们在reviews.php 中提取评论，用户可以单击delete 指向delete_review.php，然后运行存储在functions.php 中的sql 函数。

我在下面列出了它如何工作的确切代码，但除了我花了很长时间试图弄清楚它为什么不起作用之外，我无法弄清楚。当我们单击删除时，它会链接到 delete_review.php，但它不会找到要删除的评论的 id。

有人可以告诉我如何解决这个问题。谢谢你。

审查.php

```
<?php
    $reviews_set = get_new_reviews();
    while ($reviews = mysql_fetch_array($reviews_set)) {
?>

    <div class="prof-content-pend-reviews" id="reviews">
    <div class="pend-review-content">
    <?php echo "{$reviews['content']}"; ?>
    </div>
    <div class="message_pic">
    <?php echo "<a href=\"profile.php?id={$reviews['from_user_id']}\"><img width=\"50px\" height=\"50px\" src=\"data/photos/{$reviews['from_user_id']}/_default.jpg\" /></a>";?>
    </div>

    <div class="forum-text">
    <?php echo "Posted by {$reviews['display_name']}"; ?> <?php echo "".$age." days ago"; ?>
    </div>

    <a href="includes/delete_review.php?review=<?php echo $reviews['review']; ?>"><div class="delete"></div></a>
    </div>

    <? }  ?> 
```

函数.php

```
function delete_review($review, $user) {
                        global $connection;
            global $_SESSION;
                        $query = "UPDATE ptb_reviews
                                    SET deleted='1'
                                    WHERE id=$review 
                                    AND to_user_id=$user";
            mysql_query($query, $connection);
                }   

function get_new_reviews() {
            global $connection;
            global $_SESSION;
            $query = "SELECT r.from_user_id, p.display_name, r.content, r.id reviews_id, r.date_added
                        FROM ptb_reviews r, ptb_profiles p
                        WHERE r.to_user_id =".$_SESSION['user_id']."
                        AND r.deleted = '0'
                        AND r.read_review = '0'
                        AND p.user_id = r.from_user_id
                        ORDER BY r.date_added DESC ";

                        $reviews_set = mysql_query($query, $connection);
            confirm_query($reviews_set);
            return $reviews_set;
        } 
```

delete_review.php

```
 <?php
    require_once("session.php"); 
    require_once("functions.php");
    require('_config/connection.php');
    delete_review ($_GET['review'], $_SESSION['user_id']);
    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T21:40:06.513

**1-**检查您是否 `session_start();`在`review.php`文件开头开始会话

**2-**看看这个

```
 $query = "SELECT r.from_user_id, p.display_name, r.content, r.id reviews_id, r.date_adde
                                                                   ^--------what this space ? 
```

**3-**尝试`global $_SESSION['user_id']`在你的功能中做。

**4**确定它`$reviews`或`$reviews_id`这里`ROY Finley`提到的

```
 <a href="includes/delete_review.php?review=<?php echo $reviews['review']
                                                                      ^----------here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T21:36:48.633

我认为这：

```
 $reviews['review'] 
```

也许应该是这样的：

```
 $reviews['reviews_id'] 
```

不确定，您的代码需要一些改进。你真的应该研究 mysqli 或 PDO。所有这些都可以通过一个简单的类轻松完成。

# autofac - 使用 AutofacContrib.NSubstitute 为具体类注册假的简单方法

> ID：14075520
> 
> 赞同：0
> 
> 时间：2012-12-28T20:40:10.560
> 
> 标签：autofac, nsubstitute

一个被解析为的类

```
builder.Resolve<IMyInterface> 
```

可以这样伪造（用于测试）

```
builder.RegisterType<MyFakeClass>().As<IMyInterface>(); 
```

但是，如果我的课程被解决为

```
builder.Resolve<MyRealClass> 
```

如何在 autofac 注册中伪造这个？如果我使用 AutofacContrib.NSubstitute。我怎样才能实现这样的目标

```
builder.RegisterType<MyFakeClass>().As<MyRealClass>(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T17:57:08.187

只要`MyFakeClass`继承`MyRealClass`，这就是你所要做的。

# c - 在从 dos 转换为 unix 格式的文本文件的输入流上使用 fread() 时出现问题

> ID：14075521
> 
> 赞同：1
> 
> 时间：2012-12-28T20:40:13.837
> 
> 标签：c, io

我只是想用 C 读入一些数据，但我很难让 fread 去做它应该做的事情。我认为这与数据文件的格式有关……这是一个 DOS 文件，我使用 dos2unix 将其更改为 Unix 格式。

以下是相关代码：

```
 char* temp = calloc(5, sizeof(char));
    while(fread(temp, sizeof(char), 4, in)){
        *(temp + 4) = '\0';
        printf("%s\n", temp);
        ...
    } 
```

数据文件如下所示：

```
KAAA
KAAF
KAAO
KAAS
KAAT
KABE
KABI
KABQ
... 
```

输出：

```
KAAA^@

KAA^@
F
KA^@
AO
K^@
AAS
^@
KAAT^@

KAB^@
E
KA^@ 
```

...废话

谁能给我一个提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T20:45:39.553

您只阅读 4 个字符，忘记考虑换行符。一次读取 5 个字符，它应该可以修复它。

```
char* temp = calloc(5, sizeof(char));
while(fread(temp, sizeof(char), 5, in)){
    *(temp + 4) = '\0';
    printf("%s\n", temp);
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T20:44:12.573

您不会使用表示行尾的（一两个）换行符。在 Unix 上，尝试添加

```
fgetc(in); 
```

在 Windows 上，

```
fgetc(in);
fgetc(in); 
```

调用后`fread()`。

# cakephp - CakePHP 在一年菜单中使用 FormHelper 遇到问题

> ID：14075523
> 
> 赞同：1
> 
> 时间：2012-12-28T20:40:15.537
> 
> 标签：cakephp, formhelper

蛋糕2.2.4

我有一个数据库`sport_year`字段设置为 YEAR 数据类型。我尝试了两种方法来为我的添加/编辑视图创建年度菜单，但都有自己的问题。

使用`$this->Form->input`：

```
echo $this->Form->input('sport_year', array(
    'type' => 'date',
    'dateFormat' => 'Y',
    'name' => 'data[Sport][sport_year]',
    'minYear' => date('Y') - 2,
    'maxYear' => date('Y') + 1,
    'label' => 'Year',
    'empty' => '- select -'
)); 
```

该代码可以很好地添加或编辑数据（验证也是如此），但是当到达编辑页面时，表单中未正确选择现有年份数据。数据数组确实显示`[sport_year] => 2012`，但菜单中未选择 2012。

```
echo $this->Form->year(
    'sport_year', 
    date('Y') - 2, 
    date('Y') + 1, 
    array(
        'name' => 'data[Sport][sport_year]', 
        'label' => 'Year', 
        'empty' => '- select -'
    )
); 
```

年份助手似乎可以正确检索和选择现有数据，但标签不起作用，即使我的模型具有验证集，它也无法按要求正确呈现字段。它仍然需要数据，但它忽略了我的模型自定义消息并回退到我的控制器中的保存错误消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T22:55:16.607

`$this->Form->year()`永远不会显示标签。仅`$this->Form->input()`添加标签，因为它是一种包装方法并且`year()`用于创建年份字段。

cake 中的代码类似于：

```
public function input() {
    echo '<div>';
    echo $this->label(...);
    echo $this->year(...);
    echo '</div>';
} 
```

使用此代码，您不需要`name`，因为 cake 已经生成了。如果您不在`Sport`模型中，则可以使用`input('Sport.sport_year', ...)`

如果您阅读文档，您应该会看到有一个`default`输入选项。您可以使用它或确保将`$this->request->data['Sport']['sport_year']`其设置为您想要的年份。

您也可以设置`value`选项。

```
echo $this->Form->input('sport_year', array(
    'type' => 'date',
    'dateFormat' => 'Y',
    'minYear' => date('Y') - 2,
    'maxYear' => date('Y') + 1,
    'label' => 'Year',
    'empty' => '- select -',
    'default' => date('Y')
)); 
```

或者

```
echo $this->Form->input('sport_year', array(
    'type' => 'date',
    'dateFormat' => 'Y',
    'minYear' => date('Y') - 2,
    'maxYear' => date('Y') + 1,
    'label' => 'Year',
    'empty' => '- select -',
    'value' => date('Y')
)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-28T17:33:18.853

For option 1 do this:

```
echo $this->Form->input('sport_year', array(
    ...
    'selected' => 'data[Sport][sport_year]'
)); 
```

# apache - 如何使用 mod_rewrite 避免链式重定向？

> ID：14075525
> 
> 赞同：2
> 
> 时间：2012-12-28T20:40:22.057
> 
> 标签：apache, .htaccess, mod-rewrite, redirect

基本上我在我的网站上工作是为了对 SEO 友好。我想实现以下目标：

*   将 url 重写为漂亮的
*   删除多个斜杠（`example.com/////something///`例如`example.com/something/`
*   将 www 版本重定向到非 www 版本。
*   隐藏所有 url 中的 index.php 文件
*   从旧网址重定向（`/?id=something/`到新网址`/something/`）

我想出了这段`.htaccess`代码：

```
RewriteCond %{THE_REQUEST} //
RewriteRule .* $0 [R=301]

RewriteCond %{HTTP_HOST} ^www\.example\.com$ [NC]
RewriteCond %{QUERY_STRING} ^id=([a-z0-9\/-]+)
RewriteRule ^(.*)$ http://example.com/%1? [R=301]

RewriteRule ^index.php(.*)$ /$1 [R=301]
RewriteRule ^([a-z0-9\/-]+)$ /?id=$1 [L] 
```

...虽然它正在工作，但它有一个副作用：链重定向，例如。`example.com/?id=something//////`-> `example.com/something//////`->`example.com/something/`

那么有没有办法重写或修改此代码，以便它只重定向一次到 URL 的首选版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T03:58:18.133

试图解释你想要什么，让我们看看你问题中的规则：

.1 无法理解这样做的目的：

```
RewriteCond %{THE_REQUEST} //
RewriteRule .* $0 [R=301] 
```

.2 您问题中的此规则集删除`www`查询字符串并将其转换`?id=val`为`/val`，但仅当传入的 URI 具有`www`并且存在查询字符串时，因为必须满足两个条件：

```
RewriteCond %{HTTP_HOST} ^www\.example\.com$ [NC]
RewriteCond %{QUERY_STRING} ^id=([a-z0-9\/-]+)
RewriteRule ^(.*)$ http://example.com/%1? [R=301] 
```

.3 本规则

```
RewriteRule ^index.php(.*)$ /$1 [R=301] 
```

隐藏`index.php`，但仅当它位于根目录时。例子：

```
http://www.example.com/index.php?id=val 
```

当它在子目录中时不起作用。例子：

```
http://www.example.com/folder/index.php?id=val 
```

.4 无法理解这样做的目的：

```
RewriteRule ^([a-z0-9\/-]+)$ /?id=$1 [L] 
```

我建议这样做：

```
RewriteEngine On
RewriteBase /

#Redirects all www to non-www
RewriteCond %{HTTP_HOST} www\.example\.com$ [NC]
RewriteRule ^(.*)/?$ http://example.com/$1 [R=301,L]

#Hides "index.php" keeping the query if present
RewriteRule ^(.*)/index\.php$ $1/ [R=301,QSA,L]

#Converts query string `?id=val` to `/val`
RewriteCond %{QUERY_STRING} id=([^/]+)
RewriteRule .* /%1? [R=301,L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-06T19:56:28.587

请记住，蜘蛛会在几个月后“适应”正确的新结构，而且问题最终可能比最初看起来要严重得多。您可以保留所有 .htaccess 代码，知道它总是在那里纠正任何“旧”引用，但实际上几乎不会真正使用。

当“修复”URL 以某种规范形式时，我从来没有找到一种简单的方法来避免多次往返返回客户端。mod_rewrite 似乎更关注“本地”重定向情况，客户端不知道它返回的内容来自与 URL 所暗示的不完全匹配的文件结构。

可以在本地保存所有 URL 模块，然后通过将所有内容设置在新创建的“环境”变量中，然后在最后询问基本上“有什么*改变*？” 然而，这样做非常冗长，相当笨拙，而且很容易出错，并且从未成为“推荐的技术”。

# google-chrome - google chrome 不适用于使用 youtube api 的 asp.net 页面

> ID：14075535
> 
> 赞同：0
> 
> 时间：2012-12-28T20:41:55.430
> 
> 标签：google-chrome, youtube-api

最近我发布了一个关于 youtube api 不适用于 chrome 和 iframe 的问题。它确实适用于 IE。我有一个 asp.net 页面，它有一个名为“seek”的按钮，每次单击它时，它都应该让视频（在它上面的 iframe 中）在某个地方搜索。chrome 中发生了各种错误，包括根本没有出现视频，只是播放了配乐。所以我尝试从以下位置复制最新代码： [https](https://developers.google.com/youtube/iframe_api_reference) ://developers.google.com/youtube/iframe_api_reference 我确实对其进行了一些修改。除了标签之外，我将所有代码保留在每个 asp.net 页面所具有的表单之外。
但即使对 api 进行了新的更改，它也无法正常工作。这是我所做的一项修改： function onYouTubeIframeAPIReady() { player = new YT.Player('player', { height: '315', width: '420', videoId: '<%=session("youtubecode") %> ', playerVars: {'controls':0, 'fs':1, 'autoplay':0, 'autohide':0, 'modestbranding':1, 'rel':0, 'showinfo':0}, 事件： { 'onReady': onPlayerReady, 'onStateChange': onPlayerStateChange } }); }

我不认为正在创建 player 变量。无论如何，我在这里发帖是因为谷歌的某个人（负责 chrome 或 api）可能会看这个。只需制作一个 asp.net 页面，并使用搜索按钮设计它，该按钮可能会搜索到视频的中间，然后播放 10 秒。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T11:04:47.313

I tested it again this morning, and it seems that it works fine with IIS, but not with the local web server that comes with Visual Studio. Anyway, I'm one happy camper now.

# ejb - Glassfish 警告：Avertissement：存在多个 [2] JMX MBeanServer 实例

> ID：14075540
> 
> 赞同：1
> 
> 时间：2012-12-28T20:42:52.630
> 
> 标签：ejb, java-ee-6, glassfish-3

我使用带有 Glassfish 3.1 的 NetBeansIDE 7.0.1 以及用于演示和 MySQL 数据库的 EJB 和 JPA 项目。一切正常，但每当我收到以下警告时：

```
 Avertissement: Multiple [2] JMX MBeanServer instances exist, we will use the server at index [0] : [com.sun.enterprise.v3.admin.DynamicInterceptor@11bfacc].
    Avertissement: JMX MBeanServer in use: [com.sun.enterprise.v3.admin.DynamicInterceptor@11bfacc] from index [0] 
    Avertissement: JMX MBeanServer in use: [com.sun.jmx.mbeanserver.JmxMBeanServer@24d165] from index [1] 
```

什么 Glassfish 配置可以解决这个问题？

谢谢您的帮助。

# c# - Windows Phone 8 中具有多个 ItemTemplate 的 ListBox

> ID：14075542
> 
> 赞同：4
> 
> 时间：2012-12-28T20:43:19.253
> 
> 标签：c#, xaml, windows-phone-8

我有一个 ListBox，它是一个对话气泡列表（如消息应用程序），每个气泡都可以来自用户或系统。因此，在资源中定义的列表框有两个 DataTemplates。如何有选择地将这些应用到 ListBox？

我尝试了 DataTemplateSelector（这是 WP7 的解决方案，但我在 WP8 中找不到该类！），使用（WP8 不支持 DataType），最后是 ItemTemplate 属性上的 IValueConvertor - 都无济于事！

这样做的方法是什么？我想一定有办法，因为这是一个相当简单的要求？！

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-29T01:04:59.283

`DataTemplateSelector``ItemTemplates`是根据 XAML 数据绑定中的项类型进行更改的推荐方法。`DataTemplateSelector`不是 WP7 内置的，也不是 WP8 内置的。你必须在网上找到一个你喜欢的版本`DataTemplateSelector`并使用它。或者只是自己动手，因为它大约有 5-10 行代码。

WindowsPhoneGeek 上有一篇关于[WP7 中自定义 DataTemplateSelectors](http://www.windowsphonegeek.com/articles/Implementing-Windows-Phone-7-DataTemplateSelector-and-CustomDataTemplateSelector)的好文章，wp7nl 项目基于该文章的[DataTemplateSelector 基类](http://wp7nl.codeplex.com/SourceControl/changeset/view/20956#313268)。

```
<ListBox x:Name="listBox" HorizontalContentAlignment="Stretch">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <local:FoodTemplateSelector Content="{Binding}">
                <local:FoodTemplateSelector.Healthy>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal" Background="YellowGreen" Width="400" Margin="10">
                            <Image Source="{Binding IconUri}" Stretch="None"/>
                            <TextBlock Text="{Binding Name}" FontSize="40" Foreground="Black" Width="280"/>
                            <TextBlock Text="healty" />
                        </StackPanel>
                    </DataTemplate>
                    </local:FoodTemplateSelector.Healthy>
                <local:FoodTemplateSelector.UnHealthy>
                    <DataTemplate>
                        <Border BorderBrush="Red" BorderThickness="2"  Width="400" Margin="10">
                        <StackPanel Orientation="Horizontal">
                            <Image Source="{Binding IconUri}" Stretch="None"/>
                                <TextBlock Text="{Binding Name}" FontSize="40" Width="280"/>
                            <Image Source="Images/attention.png" Stretch="None" Margin="10,0,0,0"/>
                        </StackPanel>
                        </Border>
                    </DataTemplate>
                </local:FoodTemplateSelector.UnHealthy>
                <local:FoodTemplateSelector.NotDetermined>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal" Background="Gray" Width="400" Margin="10">
                            <Image Source="{Binding IconUri}" Stretch="None"/>
                            <TextBlock Text="{Binding Name}" FontSize="40" Width="280"/>
                            <Image Source="Images/question.png" Stretch="None" Margin="10,0,0,0"/>
                        </StackPanel>
                    </DataTemplate>
                </local:FoodTemplateSelector.NotDetermined>
            </local:FoodTemplateSelector>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

如果您正在寻找更快速和更脏的解决方案，[Prism 的 DataTemplateSelector](http://compositewpf.codeplex.com/SourceControl/changeset/view/69631#1024547)不需要 C# 编码，因为它[使用 DataTemplateSelector.Resources 集合来处理类型映射](http://briannoyes.net/2011/01/15/Prism4GemsRenderingHeterogeneousCollectionsWithDataTemplateSelector.aspx)。这两个`DataTemplateSelector`类都可以复制出来并在您的应用程序中使用。

```
 1: <UserControl.Resources>
   2:     <DataTemplate x:Key="SelectorDataTemplate">
   3:         <prism:DataTemplateSelector Content="{Binding}"
   4:                                     HorizontalContentAlignment="Stretch"
   5:                                     IsTabStop="False">
   6:             <prism:DataTemplateSelector.Resources>
   7:                 <DataTemplate x:Key="DataType1">
   8:                     <StackPanel Orientation="Horizontal">
   9:                         <TextBlock Text="{Binding ID}"/>
  10:                         <toolkit:Separator />
  11:                         <TextBlock Text="{Binding Name}" />
  12:                     </StackPanel>
  13:                 </DataTemplate>
  14:  
  15:                 <DataTemplate x:Key="DataType2">
  16:                     <StackPanel Orientation="Horizontal">
  17:                         <TextBox Text="{Binding Index}" />
  18:                         <toolkit:Separator />
  19:                         <TextBox Text="{Binding Description}" />
  20:                     </StackPanel>
  21:                 </DataTemplate>
  22:  
  23:             </prism:DataTemplateSelector.Resources>
  24:         </prism:DataTemplateSelector>
  25:     </DataTemplate>
  26: </UserControl.Resources> 
```

还有更多`DataTemplateSelectors`，包括：[Odyssey Phone](http://odcphone.codeplex.com/)、[UIMessage](https://github.com/stevenh77/UIMessage/blob/master/UIMessage/MessageDataTemplateSelector.cs)等。

# objective-c - NSTimer 和倒计时

> ID：14075543
> 
> 赞同：-3
> 
> 时间：2012-12-28T20:43:21.697
> 
> 标签：objective-c, cocoa

我想在我的应用程序中插入一个计时器，但我不知道如何以及以何种方式可以做到这一点。计时器将从 60 秒开始，到 0 秒结束，怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T08:58:30.750

首先记下倒计时开始的日期。

设置一个[重复的 NSTimer](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html#//apple_ref/occ/clm/NSTimer/scheduledTimerWithTimeInterval%3atarget%3aselector%3auserInfo%3arepeats%3a)用于显示目的，间隔设置为您向用户显示的最小单位（例如，如果您正在倒计时，请将其设置为 1 分钟 = 60 秒；如果您正在倒计时，请设置到 1 秒）。

（Cocoa 意义上的“定时器”不是指倒计时。NSTimer 不会向上或向下计数到预先设置的限制；它要么触发一次，要么以固定的时间间隔定期触发，直到你停止它。）

每次计时器触发时，获取当前日期并找出自开始倒计时以来[已经过去了多长时间。](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSDate_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDate/timeIntervalSinceDate%3a)从所需的倒计时长度中减去此间隔。

如果减法结果为正，则继续倒计时；用剩余时间更新您的显示。如果结果为零或负数，则倒计时时间已用完；使计时器无效并更新您的显示器以显示剩余时间为零。

这种方法使您可以处理几种不同的情况：

*   如果这是一个 iOS 应用程序，您可以在应用程序进入后台或将终止时取消计时器，然后在应用程序再次进入前台时重新创建它。由于您的显示基于倒计时开始后的时间，而不是只是定期递减计数器，因此即使在您的应用程序未激活时经过超过 1 个间隔，即使倒计时在此期间到期，它也是正确的。说起来……</li>
*   在 Mac 和 iOS 上，您都可以在倒计时到期时安排本地通知。我认为您的应用程序甚至不必再运行了（但我还没有测试过）。
*   您可以轻松更改显示以显示已用时间而不是剩余时间。
*   您可以随意或多或少地更新显示（例如，显示十分之一秒的时间流逝，或根据剩余时间调整显示的单位）。

# asp.net-mvc - API 适合 MVC 的什么地方？

> ID：14075546
> 
> 赞同：0
> 
> 时间：2012-12-28T20:43:31.610
> 
> 标签：asp.net-mvc, asp.net-web-api

据我了解，视图是 html/javascript/page 布局，控制器过滤命令并将命令路由到视图并与模型交互。模型几乎是数据库逻辑。应用程序逻辑似乎在控制器和模型之间。

API 适合哪里？假设我的网站与 api 交互但跳过了 json 部分。这一切都在模型中吗？我如何决定模型和控制器中不应该有哪些逻辑？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T20:49:23.637

它的工作原理或多或少相同。不同之处在于您向控制器 (API) 发出 AJAX 请求，而不是向控制器（非 API）发出整页请求。API 控制器操作返回的结果 (JSON/XML) 等同于您的模型。

# sql-server - 为什么需要 EXEC 来执行程序？

> ID：14075548
> 
> 赞同：1
> 
> 时间：2012-12-28T20:43:39.243
> 
> 标签：sql-server, oracle, tsql, plsql

为什么调用存储过程时需要`EXEC`或需要？`EXECUTE`Oracle 和 SQL Server 都有`EXEC`需要和不需要或不需要的情况。要求它有什么意义？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T20:50:08.297

这使得语法更加独特和明确。由于语句分隔符（分号）在 T-SQL 中不是强制性的，因此可以更清楚地找到语句的开始位置。

在旁注中，我建议在每条语句之后严格使用分号，因为存在歧义问题（尤其是在使用`WITH`关键字时经常遇到，它可以在 DML 语句之前开始公用表表达式的定义，也可以在 DML 语句的末尾使用用于定义提示；没有分号，解析器无法知道真正选择哪一个）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T20:48:45.420

这无疑是一个解析器问题/挑战。如果对存储过程的调用可以在文本正文中的任何位置进行，那么您会在尝试编写可以理解所有内容的通用“事物”时自杀。相反，设计者发布该语言的[BNF](http://en.wikipedia.org/wiki/Backus%E2%80%93Naur_Form)，而您，作为用户，有责任理解如何说它。

或者，在 SQL Server 世界中，始终使用 EXEC/EXECUTE，而不必担心何时需要它。正如@alex 所指出的，这不适用于甲骨文。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T20:57:34.457

在 Oracle 中，EXECUTE（或 EXEC）在 SQL*Plus 中用作匿名 PL/SQL 块的快捷方式。EXECUTE 在 PL/SQL 中不起作用。你可以这样做：

```
SQL> execute my_proc; 
```

或者，作为完全指定的匿名块：

```
SQL> DECLARE
BEGIN
  my_proc;
END;
/ 
```

它完全是 Oracle 中的客户端语法。

# android - 找不到主机时的loopj无限循环

> ID：14075549
> 
> 赞同：0
> 
> 时间：2012-12-28T20:43:54.503
> 
> 标签：android, loopj

我正在尝试使用 loopj 的 Async HTTP 库，但遇到了非常关键的问题。当我向不存在的主机发出请求时，它会进入无限循环。

我尝试调试代码，但没有找到太多：

1.  `com.loopj.android.http.AsyncHttpRequest.run()`跑来跑去`com.loopj.android.http.AsyncHttpRequest.makeRequestWithRetries()`
2.  `makeRequestWithRetries()` `com.loopj.android.http.AsyncHttpRequest.makeRequest()`然后调用inside ，`ConnectTimeoutException`它看起来像被`IOException`catch 捕获并被`com.loopj.android.http.RetryHandler.retryRequest(IOException, int, HttpContext)`调用。
3.  然后我的应用程序没有被任何以前的断点捕获，甚至`com.loopj.android.http.AsyncHttpResponseHandler.handleMessage(Message)`没有被触发，它只是卡住了。

但是，我可以使用 取消此请求`com.loopj.android.http.AsyncHttpClient.cancelRequests(Context, boolean)`。

我有最新的可能代码，因为我昨天从 github 得到它并自己构建。

我很感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T01:05:06.757

在评论中提到了这一点，但我遇到了同样的问题，并且可以确认最新版本的库修复了这个问题。

请参阅此拉取请求：[https ://github.com/loopj/android-async-http/commit/87a615c3b86c3e33bd885435f98ab33483f874e9](https://github.com/loopj/android-async-http/commit/87a615c3b86c3e33bd885435f98ab33483f874e9)

# playorm - 在 playOrm 中关闭登录

> ID：14075556
> 
> 赞同：3
> 
> 时间：2012-12-28T20:44:28.780
> 
> 标签：playorm

有没有办法关闭 playOrm 中的 INFO 登录？我尝试将我的 log4j.xml 配置设置为

```
<!-- Application Loggers -->
<logger name="com.alvazan">
    <level value="off" />
</logger> 
```

和

但我仍然从 com.alvazan 获得了 INFO 日志记录的基调。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-04T12:41:47.743

您可以编辑 pom.xml 以排除 lobback-classic：

```
 <dependency>
      <groupId>com.alvazan</groupId>
      <artifactId>playorm</artifactId>
      <version>1.6</version>
      <scope>compile</scope>
      <exclusions>
        <exclusion>
          <artifactId>logback-classic</artifactId>
          <groupId>ch.qos.logback</groupId>
        </exclusion>
      </exclusions>
 </dependency> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T21:40:47.640

log4j 领导离开并创建了 slf4j 和 logback 日志记录。playOrm 使用 SLF4J，这意味着您需要进行一些 jar 交换，因此 SLF4j 使用的 impl 是 log4j，然后就可以正常工作了。默认情况下，我们使用 logback 作为实现，因为 log4j dude 建议这样做。（您需要做的就是更改 logback jar 并将它们换成 slf4j-log4j jar，它将为您工作并删除 log4j-over-slf4j。罐子也是）。

一个基本的概要是，如果你在你的库中使用 SLF4J，你可以在任何平台上工作，无论他们使用什么日志记录......log4j、jdk、commons 等等等等。commons 有类加载问题，而 SLF4j 没有。阅读 SLF4j，但这里是一个快速运行。

SLF4j 有 4 个适配器 jar，因此日志记录到 log4j 转到 SLF4j，记录到 jdk 日志转到 SLF4j api 和 commons 等等。除非你使用那个 jars impl。您包含所有这些 jar，因此您可以通过一个配置文件控制平台中所有库的日志记录。

然后是api jar。

然后有 4 个实现 jar。与您需要包含所有适配器的适配器 jar 不同，在这种情况下，您选择一个 impl jar 或 slf4j 将记录一个很好的大警告并自行选择一个。在您的情况下，选择 log4j 实现，然后您可以控制所有库，即使它们也登录到 jdk 或 commons 日志框架。

院长

# ios - 带四元数的 Arcball 旋转（使用 iOS GLKit）

> ID：14075566
> 
> 赞同：5
> 
> 时间：2012-12-28T20:45:32.780
> 
> 标签：ios, opengl-es, quaternions, glkit, arcball

我正在寻找一个简单的实现，用于在带有四元数的 3D 模型上进行轨迹球旋转，**特别是在 iOS 上使用 GLKit**。到目前为止，我已经检查了以下来源：

*   [使用 GLKit 进行 Arcball 旋转](http://thestrangeagency.com/arcball-rotation-with-glkit/)
*   [如何使用 OpenGL 旋转带有触摸的 3D 对象](http://www.raywenderlich.com/12667/how-to-rotate-a-3d-object-using-touches-with-opengl)

我也一直试图从[这里](http://www.idevgames.com/articles/quaternions)和[这里](http://ofps.oreilly.com/titles/9780596804824/)理解源代码和数学。我可以旋转我的对象，但它总是以特定角度跳跃，所以我担心万向节锁定在起作用。我正在使用手势识别器来控制旋转（平移手势影响滚动和偏航，旋转手势影响俯仰）。我附上了我的四元数处理代码以及模型视图矩阵转换。

变量：

*   `GLKQuaternion rotationE;`

四元数处理：

```
- (void)rotateWithXY:(float)x and:(float)y
{
    const float rate = M_PI/360.0f;
    GLKVector3 up = GLKVector3Make(0.0f, 1.0f, 0.0f);
    GLKVector3 right = GLKVector3Make(1.0f, 0.0f, 0.0f);

    up = GLKQuaternionRotateVector3(GLKQuaternionInvert(self.rotationE), up);
    self.rotationE = GLKQuaternionMultiply(self.rotationE, GLKQuaternionMakeWithAngleAndVector3Axis(x*rate, up));

    right = GLKQuaternionRotateVector3(GLKQuaternionInvert(self.rotationE), right);
    self.rotationE = GLKQuaternionMultiply(self.rotationE, GLKQuaternionMakeWithAngleAndVector3Axis(y*rate, right));
}

- (void)rotateWithZ:(float)z
{
    GLKVector3 front = GLKVector3Make(0.0f, 0.0f, -1.0f);

    front = GLKQuaternionRotateVector3(GLKQuaternionInvert(self.rotationE), front);
    self.rotationE = GLKQuaternionMultiply(self.rotationE, GLKQuaternionMakeWithAngleAndVector3Axis(z, front));
} 
```

Modelview 矩阵变换（内部绘制循环）：

```
// Get Quaternion Rotation
GLKVector3 rAxis = GLKQuaternionAxis(self.transformations.rotationE);
float rAngle = GLKQuaternionAngle(self.transformations.rotationE);

// Set Modelview Matrix
GLKMatrix4 modelviewMatrix = GLKMatrix4Identity;
modelviewMatrix = GLKMatrix4MakeTranslation(0.0f, 0.0f, -0.55f);
modelviewMatrix = GLKMatrix4Rotate(modelviewMatrix, rAngle, rAxis.x, rAxis.y, rAxis.z);
modelviewMatrix = GLKMatrix4Scale(modelviewMatrix, 0.5f, 0.5f, 0.5f);
glUniformMatrix4fv(self.sunShader.uModelviewMatrix, 1, 0, modelviewMatrix.m); 
```

非常感谢任何帮助，但我确实希望使其尽可能简单并坚持使用 GLKit。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T17:08:36.750

这里似乎有一些问题。

1.  你说你正在使用 [x,y] 来平移，但看起来更像是在使用它们来俯仰和偏航。至少对我来说，平移是平移，而不是旋转。

2.  除非我遗漏了某些东西，否则每次尝试更新它时，它看起来都像是替换了整个轮换。您通过当前旋转的倒数旋转向量，然后从该向量和某个角度创建一个四元数。我相信这相当于从原始向量创建四元数，然后通过当前旋转逆来旋转它。所以你有`q_e'*q_up`. 然后将它与当前旋转相乘，得到`q_e*q_e'*q_up = q_up`. 当前旋转被取消。这似乎不是你想要的。

    你真正需要做的就是从轴和角度创建一个新的四元数，然后将它与当前的四元数相乘。如果新的四元数在左侧，则方向更改将使用眼睛局部框架。如果新的四元数在右侧，则方向变化将在全局框架中。我想你想要：

    ```
    self.rotationE =
      GLKQuaternionMultiply( 
        GLKQuaternionMakeWithAngleAndVector3Axis(x*rate, up),self.rotationE); 
    ```

    这样做，对所有三种情况都没有反向预旋转。

3.  我从未使用过 GLKit，但在从四元数转换为矩阵时提取轴角并不常见。如果角度为零，则轴未定义。当它接近零时，您将遇到数值不稳定。看起来您应该使用`GLKMatrix4MakeWithQuaternion`然后将结果矩阵与平移矩阵和比例矩阵相乘：

    ```
    GLKMatrix4 modelviewMatrix = 
      GLKMatrix4Multiply( GLKMatrix4MakeTranslation(0.0f, 0.0f, -0.55f),
                          GLKMatrix4MakeWithQuaternion( self.rotationE ) );
    modelviewMatrix = GLKMatrix4Scale( modelviewMatrix, 0.5f, 0.5f, 0.5f ); 
    ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-06T17:28:42.597

我最近被问到更多关于我对这个问题的最终实现，所以就在这里！

```
- (void)rotate:(GLKVector3)r
{
    // Convert degrees to radians for maths calculations
    r.x = GLKMathDegreesToRadians(r.x);
    r.y = GLKMathDegreesToRadians(r.y);
    r.z = GLKMathDegreesToRadians(r.z);

    // Axis Vectors w/ Direction (x=right, y=up, z=front)
    // In OpenGL, negative z values go "into" the screen. In GLKit, positive z values go "into" the screen.
    GLKVector3 right = GLKVector3Make(1.0f, 0.0f, 0.0f);
    GLKVector3 up = GLKVector3Make(0.0f, 1.0f, 0.0f);
    GLKVector3 front = GLKVector3Make(0.0f, 0.0f, 1.0f);

    // Quaternion w/ Angle and Vector
    // Positive angles are counter-clockwise, so convert to negative for a clockwise rotation
    GLKQuaternion q = GLKQuaternionIdentity;
    q = GLKQuaternionMultiply(GLKQuaternionMakeWithAngleAndVector3Axis(-r.x, right), q);
    q = GLKQuaternionMultiply(GLKQuaternionMakeWithAngleAndVector3Axis(-r.y, up), q);
    q = GLKQuaternionMultiply(GLKQuaternionMakeWithAngleAndVector3Axis(-r.z, front), q);

    // ModelView Matrix
    GLKMatrix4 modelViewMatrix = GLKMatrix4Identity;
    modelViewMatrix = GLKMatrix4Multiply(modelViewMatrix, GLKMatrix4MakeWithQuaternion(q));
} 
```

希望你好好利用它:)

# php - 对服务器的 ajax JSON 请求类型=POST（安全登录请求）

> ID：14075575
> 
> 赞同：0
> 
> 时间：2012-12-28T20:46:20.490
> 
> 标签：php, json

要通过纯 JavaScript 提交 - 而不是 jQuery... ajax JSON 请求到服务器类型 = POST（安全登录请求）需要 Web 表单？

没有网络表单怎么办......将JSON发送的字符串var放在哪里以及如何/在php中获取什么？

ajax3.send(jsonStringhere); // ??? 如何获得在 php 中？？？

```
function loginProcess() {
var userID = document.getElementById( "name" ).value;
var email = document.getElementById( "email" ).value;
var password = document.getElementById( "password" ).value;

ajax3 = new XMLHttpRequest();

//1st way
ajax3.open("GET","loginProcess.php?userID="+userID+"&email="+email+"&password="+password,false); 
ajax3.addEventListener("readystatechange", processResponse, true); 
ajax3.send();

changeDisplay("loginRegisterDiv");

//2nd way JSON post type here

//???

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T20:59:02.557

您不应通过 URL (GET) 发送此类敏感信息。

人们经常共享 URL，并且可能不希望将他们的个人信息隐藏在其中。

要模拟 Web 表单，请尝试发送 POST 请求。将 JSON 放入查询属性中：

```
var ec = window.encodeURIComponent,
    queryStr = "userID=" + ec(userID) + "&email=" + ec(email) + "&password=" + ec(password) + "&json" + ec(JSON.stringify(yourJson)),
    ajaxReq = new XMLHttpRequest();

ajaxReq.open("POST", "loginProcess.php", false);  // Should really be 'true' for asynchronous...
ajaxReq.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');  // Important!
ajaxReq.send(queryStr); 
```

# c - 为什么我的 strlen 函数总是“崩溃”？

> ID：14075578
> 
> 赞同：3
> 
> 时间：2012-12-28T20:46:26.720
> 
> 标签：c, crash, strlen

我正在尝试用`strlen`C 编写一个函数，但它不起作用。

```
int strlen(char*string)
{
    int length=0;
    while(length[string]!='0')
    {
        ++length;
    }
    free(string);
    return length;
} 
```

无论我运行编译器多少次，它都会不断崩溃。我的代码有什么问题？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-28T20:50:32.630

您的`while`循环不应该与`'0'`.
`'0'`(ascii) 的值为 48！

字符串不以 48
结尾。字符串以 0 结尾。

你应该这样做：

```
while(length[string] != 0) 
```

*（以及关于代码中其他问题的所有其他答案和评论也是准确的）*

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-28T20:47:57.127

您可能正在`free`记忆该功能不拥有的记忆。

例如：

```
strlen("42"); 
```

会崩溃，因为`"42"`它是一个字符串文字 - 你不能修改它。

请注意，这`'0'`不是字符串的终止字符，而是实际`'0'`字符。使用`'\0'`或`0`。

删除`free`它应该可以工作。

我也会选择更惯用`string[length]`的，**当心**，这是非法的，如果`string == NULL`- 所以在那里进行空检查。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-28T20:48:51.417

它崩溃是因为我猜测指针没有分配给任何动态分配的对象（使用创建的对象`malloc`）。仅仅因为它是一个指针并不能保证它被分配给分配的东西`malloc`，因此必须被释放。指针可以指向对象（不一定是动态分配的），在这种情况下，我假设指针设置为字符串文字（`"Hello World"`）。指针及其指向对象在堆栈上分配，无需删除。`free`在这种情况下是不必要的，因为它们都将在各自范围的末尾被破坏。此外，您创建的任何内容都`malloc` *必须*被删除/释放，否则您将面临内存泄漏的风险。否则释放一个未分配给用的东西的指针`malloc`导致未定义的行为，其中可能包括崩溃。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-28T20:51:36.923

没关系，当我摆脱免费和“0”时，它起作用了！！

```
int strlen(char*string)
{
    int length=0;
    while(length[string]!='\0')
    {
        ++length;
    }
    return length;
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-28T20:48:08.697

它在哪里崩溃？你为什么要释放你收到的指针？这样，在使用函数检索字符串长度后，您就不能对字符串执行任何操作。

或者，如果您正在调用`free`未使用`malloc`、 在堆栈或其他任何地方分配的内存块，那么您处于未定义行为的领域，应该很高兴它崩溃了。

特别是使用类似调用“测试”您的方法`strlen("test")`会使您的程序崩溃，因为`char*`没有使用`malloc`.

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-12-28T20:51:40.260

尝试使用

```
while(string[length]!=0) 
```

# objective-c - Objective-C 从嵌套函数返回 (GCD)

> ID：14075580
> 
> 赞同：0
> 
> 时间：2012-12-28T20:46:51.607
> 
> 标签：objective-c, c, function, return, grand-central-dispatch

我将如何从嵌套的 GCD 调度调用中返回？

假设我有一个看起来像这样的方法：

```
- (void)foo {

    dispatch_async(queue, ^{

        if (flag) { 
            // I want out of here
            return;
        }

        dispatch_sync(dispatch_get_main_queue(), ^{

            if (flag) { 
                // I want out of here
                return;
            }
        });
    });
} 
```

当我在`dispatch_sync`函数内部并调用时`return;`，我想这只会留下当前函数，因此我需要`return;`再次调用`dispatch_async`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T20:59:25.847

是的，你的想法是正确的。每个块都是一个单独的函数，因此 return 只会从当前块返回。如果您想提前退出 dispatch_async 的块（如果 dispatch_sync 的块这样做了），您需要再次检查并在 dispatch_sync 之后返回。

# git - git 撤消所有未提交或未保存的更改

> ID：14075581
> 
> 赞同：1072
> 
> 时间：2012-12-28T20:46:53.067
> 
> 标签：git, command-line, undo, git-reset

我正在尝试撤消自上次提交以来的所有更改。我试过了`git reset --hard`，`git reset --hard HEAD`看了[这篇文章后](https://stackoverflow.com/questions/7999259/git-how-to-perform-the-tfs-equivalent-of-undo-pending-changes)。我的回应是 head 现在是 18c3773... 但是当我查看我的本地源时，所有文件仍然存在。我错过了什么？

* * *

## 回答 #1

> 赞同：2094
> 
> 时间：2012-12-28T21:04:38.177

*   这将取消暂存您可能已暂存的所有文件`git add`：

    ```
    git reset 
    ```

*   这将恢复所有本地未提交的更改（应在 repo root 中执行）：

    ```
    git checkout . 
    ```

    您还可以仅将未提交的更改还原到特定文件或目录：

    ```
    git checkout [some_dir|file.txt] 
    ```

    恢复所有未提交更改的另一种方法（更长的类型，但适用于任何子目录）：

    ```
    git reset --hard HEAD 
    ```

*   这将删除所有本地未跟踪的文件，因此*只*保留 git 跟踪的文件：

    ```
    git clean -fdx 
    ```

    > **警告：** `-x` 还将删除所有被忽略的文件，包括由`.gitignore`! 您可能希望`-n`用于预览要删除的文件。

* * *

总结一下：执行下面的命令基本上等同于`git clone`从原始源下载（但它不会重新下载任何东西，所以要快得多）：

```
git reset
git checkout .
git clean -fdx 
```

典型的用法是在构建脚本中，当您必须确保您的树绝对干净时 - 没有任何修改或本地创建的目标文件或构建工件，并且您希望使其工作非常快并且不重新 -每次克隆整个存储库。

* * *

## 回答 #2

> 赞同：180
> 
> 时间：2014-07-18T20:59:59.990

如果您希望“**撤消**”所有未提交的更改，只需运行：

```
git stash
git stash drop 
```

如果您有任何未跟踪的文件（通过运行检查`git status`），可以通过运行删除这些文件：

```
git clean -fdx 
```

`git stash`创建一个新的存储，它将成为**stash@{0}**。如果您想先检查，您可以运行`git stash list`以查看您的存储列表。它看起来像：

```
stash@{0}: WIP on rails-4: 66c8407 remove forem residuals
stash@{1}: WIP on master: 2b8f269 Map qualifications
stash@{2}: WIP on master: 27a7e54 Use non-dynamic finders
stash@{3}: WIP on blogit: c9bd270 some changes 
```

每个存储都以先前的提交消息命名。

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2019-06-09T02:12:22.643

我所做的是

```
git add . (adding everything)
git stash 
git stash drop 
```

一个班轮：`git add . && git stash && git stash drop`

[M. Justin](https://stackoverflow.com/users/1108305/m-justin)指出的较短版本

`git stash -u && git stash drop`

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2012-12-28T21:17:00.437

还有`git stash`- 它“隐藏”您的本地更改，并且可以在以后重新应用或在不再需要时删除

有关存储的更多[信息](http://git-scm.com/book/en/Git-Tools-Stashing)

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2020-07-13T18:20:07.877

> 添加此答案是因为先前的答案会**永久删除**您的更改

# 安全的方式

`git stash -u`

说明：存储本地更改**，包括**未跟踪的更改（`-u`标志）。该命令保存您的本地修改并恢复工作目录以匹配 HEAD 提交。

## 想要稍后恢复更改？

`git stash pop`

说明：该命令会将更改重新应用到当前工作树状态的顶部。

## 想要永久删除更改？

`git stash drop`

说明：该命令将永久删除隐藏的条目

[链接到 git stash 文档](https://git-scm.com/docs/git-stash)

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2016-07-14T17:19:58.760

我正在使用源代码树...。您可以通过 2 个简单的步骤还原所有未提交的更改：

1）只需要重置工作区文件状态

[![在此处输入图像描述](../Images/956036c53f9342a966492a8695dc6bf5.png)](https://i.stack.imgur.com/vbbIC.png) 2）选择所有unstage文件（命令+a），右键选择remove

[![在此处输入图像描述](../Images/d5cce11d7d21338f0a24c9635547f5a3.png)](https://i.stack.imgur.com/hsaSh.png)

就这么简单:D

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2015-08-28T09:31:36.843

对于那些到达这里搜索是否可以撤消的人，在**eclipse**`git clean -f -d`中创建的文件被删除，

 **您可以在 UI 中使用“从本地历史还原”来执行相同的操作，参考：[从本地历史还原](http://help.eclipse.org/mars/index.jsphttp://help.eclipse.org/mars/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2Ftasks%2Ftasks-87b.htm "从本地历史恢复")

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2020-09-06T13:39:38.030

撤消未提交提交的更改的另一个选项是运行：

```
git restore <file> 
```

放弃工作目录中的更改。

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2016-07-01T08:54:37.043

## 从一个提交过渡到新提交的状态

```
0\. last commit,i.e. HEAD commit
1\. Working tree changes, file/directory deletion,adding,modification.
2\. The changes are staged in index
3\. Staged changes are committed 
```

## 状态转换动作

```
0->1: manual file/directory operation
1->2: git add .
2->3: git commit -m "xxx" 
```

## 检查差异

```
0->1: git diff
0->2: git diff --cached
0->1, and 0->2: git diff HEAD
last last commit->last commit: git diff HEAD^ HEAD 
```

## 恢复到上次提交

```
2->1: git reset
1->0: git checkout .     #only for tracked files/directories(actions include modifying/deleting tracked files/directories)
1->0: git clean -fdx     #only for untracked files/directories(action includes adding new files/directories)
2->1, and 1->0: git reset --hard HEAD 
```

## 相当于 git clone，无需重新下载任何东西

```
git reset && git checkout . && git clean -fdx 
```

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2021-03-25T06:00:36.090

使用它在最后一次提交后删除不需要的更改。

```
git reset --hard HEAD 
```

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2021-01-31T17:22:16.500

`git restore [filename_path]`

例如，我需要丢弃`index.html`文件中的最后更改：

```
git restore /usr/myPC/folder/index.html 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2021-03-11T22:18:39.903

下面定义了一个可重用的[Git 命令别名](https://git-scm.com/docs/git-config#Documentation/git-config.txt-alias)来删除任何本地更改，然后可以在将来的任何时间使用它来删除任何未提交的更改：

```
git config --global alias.remove-changes '!git stash push --include-untracked && git stash drop' 
```

使用别名很简单：

```
git remove-changes 
```

别名使用 将所有更改推送到存储（包括未提交的更改）`git stash push --include-untracked`，然后使用 删除新创建的存储条目`git stash drop`。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2021-10-14T18:10:25.353

Git 中有三个选项可以帮助您撤消本地更改¶ 要查看在您的工作目录中所做的更改，您应该运行 git status：

*状态*

**使用 git stash 撤消更改** 要丢弃所有本地更改，但也可以保存它们以供以后使用，您可以运行 git stash 命令：

*混帐藏匿*

**使用 git checkout 撤消更改** 要永久放弃对文件的本地更改，您可以运行：

*git结帐——*

**使用 git reset 撤消更改** 要永久放弃对所有文件的所有本地更改，您可以执行以下操作：

*git reset --hard*

来源：[https ://www.w3docs.com/snippets/git/how-to-discard-unstaged-changes.html](https://www.w3docs.com/snippets/git/how-to-discard-unstaged-changes.html)

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2021-05-28T12:24:21.627

如果您想“撤消”所有未提交的更改或本地更改，只需运行：

```
git add . 
git stash 
git stash drop
git clean -fdx 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2021-05-14T15:56:19.007

```
# Navigate to project root, `.` works too.
git restore * 
```

`git status`表明我有一些文件已更改，但我想摆脱这些文件并开始一个新的分支。直到今天，我一直在使用 git reset 方法，我喜欢用它来跳回其他特定的提交。

> [https://www.git-tower.com/learn/git/commands/git-restore/](https://www.git-tower.com/learn/git/commands/git-restore/)**

# eclipse - 为什么 Eclipse 不显示 JSTL 代码的默认提议？

> ID：14075583
> 
> 赞同：0
> 
> 时间：2012-12-28T20:46:53.250
> 
> 标签：eclipse, jstl

我有以下问题： 我正在处理 Eclipse 上的 .jsp 文件。我的问题是 Eclipse 不知何故不支持 jstl 代码的默认建议`<c:[anything]`并发出警告`Unknown tag(<c:[anything]>)`。奇怪的是，语法高亮对于 JSTL 代码非常有效，而对于不同的代码（Java、PHP、HTML...），有默认建议。我的 servlet 容器是 Tomcat，我已经将文件 jstl.jar 复制到其中`[folder]/webapps/ROOT/WEB-INF/lib/`但没有帮助。

当我查看 Eclipse->Window->Preferences->Web->JSP Files->Editor->Content Assist 时，复选框*JSP Proposals*、*JSP Java Proposals*和*JSP Template Proposals*被选中。

我觉得找出问题所在实际上很明显，但我就是不明白！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T22:07:55.363

我设法解决了这个问题。我仍然不知道它实际上是什么，但我只是重新安装了 tomcat（我正在使用 lubuntu 系统），这次我没有通过提取 .tar.bz2 文件而是通过 apt-get install 手动完成。 ... 然后我创建了一个新的 eclipse 项目并告诉它使用 tomcat 作为 servlet 容器。然后它立即工作，所以我认为我之前安装 tomcat 的方式有问题（可能某些变量没有指向正确的目录左右）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T05:03:02.587

有一些事件会触发 eclipse 来验证文件。您可以重建eclipse项目。或者打开问题查看器，把问题删掉就可以了

# javascript - 如何在 Backbone.js 中渲染嵌套视图？

> ID：14075588
> 
> 赞同：3
> 
> 时间：2012-12-28T20:47:28.743
> 
> 标签：javascript, backbone.js

我有一个类别树，我想使用 Backbone.js 进行渲染，而不是使用 jQuery 或在服务器端进行渲染。我有以下突破，我将其描述为模板：

```
<li>
    <select class="categories">
        <option value="">Select</option>
    </select>
    <input class="edit" type="button" value="Edit">
    <input class="add" type="button" value="Add">
</li> 
```

`select`我单独渲染为内部视图的标签。当我更改选择时，我需要从服务器获取嵌套类别并`li`使用上面包含在标签中的模板将它们附加到标签中`ul`。在外部视图中，我创建内部视图并在编辑和添加时点击监听事件。当嵌套级别超过一个时，我对最后一个事件有疑问，因为它们的触发次数与嵌套级别相同。我究竟做错了什么？

下面的代码片段显示了我如何使用外部和内部视图：

```
 var CategoriesInnerView = Backbone.View.extend({
        tagName:       'select',
        initialize:    function(){
            _.bindAll(this,'addOne','addAll');
            this.collection.bind('reset',this.addAll);
        },
        addOne:        function(category){
            this.$el.append(new CategoryView({model:category}).render().el);
        },
        addAll:        function(){
            this.collection.each(this.addOne);
        },
        events:        {
            'change':'changeSelected'
        },
        changeSelected:function(){
            var children = new Categories();
            children.url = 'categories/' + this.$el.val();

            var childrenView = new CategoriesOuterView({collection:children});
            this.$el.parent().find('ul').remove();
            this.$el.parent().append(childrenView.render().el);

            children.fetch();
        }
    });

    var CategoriesOuterView = Backbone.View.extend({
        tagName:   'ul',
        template:  _.template($('#categories-template').html()),
        initialize:function(){
            this.inner = new CategoriesInnerView({collection:this.collection});
        },
        render:    function(){
            this.$el.html(this.template);

            this.inner.setElement(this.$('select')).render();

            return this;
        },
        events:    {
            'click .edit':'edit',
            'click .add': 'add'
        },
        edit:    function(){
            this.renderForm(this.collection.get(this.inner.$el.val()));
        },
        add:    function(){
            this.renderForm(new Category());
        },
        renderForm:function(category){
            // some code to render the form
        }
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T12:28:22.510

当您设置嵌套视图时，您必须考虑到事件会在 DOM 树中冒泡，并且 Backbone 在 vi​​ew.el 级别处理 DOM 事件。这意味着在您的场景中，如果您让事件在层次结构中上升，嵌套节点也将触发父节点中的事件。

有关演示，请参见[http://jsfiddle.net/PX2PL/](http://jsfiddle.net/PX2PL/)

一个简单的解决方案是在回调中停止事件传播

```
var CategoriesOuterView = Backbone.View.extend({
    events:    {
        'click .edit':'edit',
        'click .add': 'add'
    },
    edit: function(e) {
        e.stopPropagation();
        this.renderForm(this.collection.get(this.inner.$el.val()));
    },
    add: function(e) {
        e.stopPropagation();
        this.renderForm(new Category());
    }
} 
```

还有一个更新的演示[http://jsfiddle.net/PX2PL/1/](http://jsfiddle.net/PX2PL/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T21:05:53.027

我们确实需要查看您的一些代码才能正确回答这个问题，但听起来好像正在发生两件事之一：

1）您在同一元素上多次实例化您的视图

2）您的事件选择器太宽泛

但是如果没有真正看到（相关部分）你的观点，很难说更多。

* * *

**切向相关边注**

顺便说一句，当你有这样的事情时，你可以采取两种基本的方法：

1）您可以让您的父视图创建子视图，并将事件处理放在子视图上

2）您可以让您的父视图创建子视图，也可以不创建（它可以创建所有 HTML 本身），并将事件处理放在上面。

#1 的优点是简单：您的事件处理程序只需引用即可`this`引用相关视图。但是，如果您必须将 #1 放大太多，则会出现问题：数百万个视图，每个视图都有自己的事件处理程序，会损害性能。

所以，如果性能是/将是重要的，那么#2 会更好，因为你只做一组事件连接。但是，您的事件处理程序必须更聪明，因为他们必须根据提供的事件（即`e.target`，与`this`#1 方法中的比较）确定他们正在处理的元素。

# scala - Scala：为什么 List 上的右折叠会导致堆栈溢出，而左折叠不会？

> ID：14075589
> 
> 赞同：5
> 
> 时间：2012-12-28T20:47:29.013
> 
> 标签：scala

我在一个字符串列表上运行了一个右折叠 (:\)，这导致了堆栈溢出。但是当我将其更改为使用左折叠 (/:) 时，它工作正常。为什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-28T20:52:07.767

由于源是开放的，您实际上可以在[LinearSeqOptimized.scala](https://github.com/scala/scala/blob/master/src/library/scala/collection/LinearSeqOptimized.scala#L103)中看到实现：

```
override /*TraversableLike*/
def foldLeft[B](z: B)(f: (B, A) => B): B = {
  var acc = z
  var these = this
  while (!these.isEmpty) {
    acc = f(acc, these.head)
    these = these.tail
  }
  acc
}

override /*IterableLike*/
def foldRight[B](z: B)(f: (A, B) => B): B =
  if (this.isEmpty) z
  else f(head, tail.foldRight(z)(f)) 
```

您会注意到`foldLeft`使用 while 循环 while`foldRight`使用递归。循环策略非常有效，但递归需要为列表中的每个元素在堆栈上推送一个框架（因为它遍历到末尾）。这就是为什么`foldLeft`工作正常但`foldRight`导致堆栈溢出的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T23:18:40.030

`Fold`是一组通用的通用函数，它们遍历递归数据结构并通常产生单个值（[参考](http://en.wikipedia.org/wiki/Fold_%28higher-order_function%29)）。在序列和列表上，FoldLeft（一般意义上）是尾递归的，因此可以对其进行优化。FoldRight 不是尾递归的，因此不能进行尾调用优化。然而，它确实有可能应用于无限级数的好处。

scala 库的实现`foldLeft`（`foldRight`从@dhg 的答案盗版）反映了这种优化/缺乏。`foldLeft`已使用 while 循环手动优化尾调用。`foldRight`不可能是。

```
override /*TraversableLike*/
def foldLeft[B](z: B)(f: (B, A) => B): B = {
  var acc = z
  var these = this
  while (!these.isEmpty) {
    acc = f(acc, these.head)
    these = these.tail
  }
  acc
}

override /*IterableLike*/
def foldRight[B](z: B)(f: (A, B) => B): B =
  if (this.isEmpty) z
  else f(head, tail.foldRight(z)(f)) 
```

我相信[Odersky、Spoon、Venners 的 Programming in Scala, Second Edition](http://www.artima.com/shop/programming_in_scala_2ed)中的折叠部分描述了`foldLeft`Lists 如何是尾递归的，而它可能是`foldRight`无限列表。不幸的是，我现在没有它来提供页码等。如果没有，证明这一点并不难。

另请参阅[Miran Lipovača 的 Learn You a Haskell for Great Good中的折叠部分](http://learnyouahaskell.com/higher-order-functions#folds)

> 回到我们处理递归的时候，我们注意到在许多对列表进行操作的递归函数中都有一个主题。通常，我们会有一个空列表的边缘情况。我们将引入 x:xs 模式，然后我们将执行一些涉及单个元素和列表其余部分的操作。事实证明这是一种非常常见的模式，因此引入了几个非常有用的函数来封装它。这些函数称为折叠。

# linux - 做我的第一个纹身，有点紧张..请检查我的计算！:)

> ID：14075590
> 
> 赞同：0
> 
> 时间：2012-12-28T20:47:31.183
> 
> 标签：linux, unix

所以我的基本想法是用unix时间戳列出我生命中的重要日期（从我出生开始）（因为这是我开始作为程序员的地方）......

唯一的问题是，我不久前离开了 php，在查看这个数字时.. 我只是想我会搞砸一些事情或错过一些重要的事情！:D

所以请纠正我！

556246980

1987 年 8 月 18 日上午 1:03:00 对吗？

还..

我应该在纹身中考虑时区吗？想法？我是CET！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T20:55:21.670

在 Linux 上，您可以像这样获得 Unix 时间戳的时间：`date -d @556246980`. 所以是的，它是`Tue Aug 18 01:03:00 UTC 1987`。

Unix 时间戳是从 1970 年 1 月 1 日星期四 00:00:00 UTC 开始测量的。它们不支持时区。Unix 将时区视为一种​​表示工件。

对于其他日期，您也可以要求`date`给您相应的时间戳：`date -d 'Aug 18 01:03:00 UTC 1987' +%s`。

# actionscript-3 - Flex 4.6 缩放事件

> ID：14075591
> 
> 赞同：0
> 
> 时间：2012-12-28T20:47:39.710
> 
> 标签：actionscript-3, apache-flex, flex4.5

我刚刚在 Flex 4.6 中为移动应用程序启动了一个新项目，需要一些帮助来决定如何进行。

好吧，基本上这个应用程序会显示一个 15x15 的棋盘，就像拼字游戏一样。因此，每个图块的宽度将由一个取决于设备最大宽度的公式给出，因此每行将自动调整 15 个图块。

问题是我需要添加一些事件，例如 ZOOM，范围从 x1 到 x2 和 MOVE，如果 ZOOM 大于 x1，用户可以在其中拖动板。

完成这个项目的更好方法是什么？

我有以下代码：

```
<s:BorderContainer width="100%" height="60%" id="board_holder">
    <s:TileGroup width="100%" requestedColumnCount="15" requestedRowCount="15">
        <s:Rect radiusX="{radio_tile}" radiusY="{radio_tile}" width="{_ancho_tile}" height="{_ancho_tile}">
            <s:fill>
                <s:SolidColor color="#FB2A27" alpha="0.75" />
            </s:fill>
        </s:Rect>

        <s:Rect radiusX="{radio_tile}" radiusY="{radio_tile}" width="{_ancho_tile}" height="{_ancho_tile}">
            <s:fill>
                <s:SolidColor color="#FB2A27" alpha="0.75" />
            </s:fill>
        </s:Rect>

        <s:Rect radiusX="{radio_tile}" radiusY="{radio_tile}" width="{_ancho_tile}" height="{_ancho_tile}">
            <s:fill>
                <s:SolidColor color="#FB2A27" alpha="0.75" />
            </s:fill>
        </s:Rect>

               ....... he there are more tiles till complete the whole 15x15 board tiles

    </s:TileGroup>
</s:BorderContainer> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T09:14:04.953

您可能想要`GESTURE_SWIPE`和`GESTURE_ZOOM`- 请参阅 Adob​​e 的文档[Touch, multitouch and gesture input](http://help.adobe.com/en_US/as3/dev/WSb2ba3b1aad8a27b0-6ffb37601221e58cc29-8000.html)

# django - Django：覆盖 Model.validate_unique

> ID：14075595
> 
> 赞同：13
> 
> 时间：2012-12-28T20:47:58.507
> 
> 标签：django, django-models

覆盖 Django 的 Model.validate_unique 的正确方法是什么？我尝试覆盖它并提高自己的`ValidationError`，但收到此错误：

```
AttributeError: 'ValidationError' object has no attribute 'message_dict' 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-28T20:47:58.507

Django 期望您的 ValidationErrors 用字典而不是字符串来实例化：

```
from django.db.models import Model
from django.core.exceptions import ValidationError
from django.core.exceptions import NON_FIELD_ERRORS

class Person(Model):

    ...

    def validate_unique(self, *args, **kwargs):
        super(Person, self).validate_unique(*args, **kwargs)
        if not self.id:
            if self.__class__.objects.filter(...).exists():
                raise ValidationError(
                    {
                        NON_FIELD_ERRORS: [
                            'Person with same ... already exists.',
                        ],
                    }
                ) 
```

# ruby-on-rails - 在 EC2 上使用 bitnami 进行资产预编译

> ID：14075596
> 
> 赞同：2
> 
> 时间：2012-12-28T20:47:58.873
> 
> 标签：ruby-on-rails, ruby, bitnami

有没有人看到错误？在 bitnami-ruby-environment 中预编译资产时会发生这种情况。在本地运行时一切正常。我正在使用 nodejs 而不是（execjs 和 therubyracer）。

```
 ** Invoke assets:precompile (first_time)
  ** Execute assets:precompile
  /opt/bitnami/ruby/bin/ruby /webapps/appseeker/shared/bundle/ruby/1.9.1/bin/rake **assets:precompile**:all RAILS_ENV=production RAILS_GROUPS=assets --trace
  ** Invoke assets:precompile:all (first_time)
  ** Execute assets:precompile:all
  ** Invoke assets:precompile:primary (first_time)
  ** Invoke assets:environment (first_time)
  ** Execute assets:environment
  ** Invoke environment (first_time)
  ** Execute environment
  ** Invoke tmp:cache:clear (first_time)
  ** Execute tmp:cache:clear
  ** Execute assets:precompile:primary
  rake aborted!
  795: unexpected token at 'node: /opt/bitnami/common/lib/libcrypto.so.1.0.0: no version information available (required by node)
  node: /opt/bitnami/common/lib/libssl.so.1.0.0: no version information available (required by node)
  node: /opt/bitnami/common/lib/libssl.so.1.0.0: no version information available (required by node)
  ["ok","(function() {\n\n  window.AA = {};\n\n}).call(this);\n"]'
    (in /webapps/appseeker/shared/bundle/ruby/1.9.1/bundler/gems/active_admin-cc687d7d1615/app/assets/javascripts/active_admin/lib/namespace.js.coffee)
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/json-1.7.5/lib/json/common.rb:155:in `parse'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/json-1.7.5/lib/json/common.rb:155:in `parse'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/multi_json-1.5.0/lib/multi_json/adapters/json_common.rb:7:in `load'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/multi_json-1.5.0/lib/multi_json.rb:96:in `load'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/execjs-1.4.0/lib/execjs/json.rb:7:in `decode'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/execjs-1.4.0/lib/execjs/external_runtime.rb:62:in `extract_result'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/execjs-1.4.0/lib/execjs/external_runtime.rb:28:in `block in exec'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/execjs-1.4.0/lib/execjs/external_runtime.rb:41:in `compile_to_tempfile'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/execjs-1.4.0/lib/execjs/external_runtime.rb:27:in `exec'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/execjs-1.4.0/lib/execjs/external_runtime.rb:19:in `eval'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/execjs-1.4.0/lib/execjs/external_runtime.rb:33:in `call'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/coffee-script-2.2.0/lib/coffee_script.rb:57:in `compile'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/tilt-1.3.3/lib/tilt/coffee.rb:46:in `evaluate'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/tilt-1.3.3/lib/tilt/template.rb:76:in `render'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/context.rb:177:in `block in evaluate'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/context.rb:174:in `each'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/context.rb:174:in `evaluate'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/processed_asset.rb:12:in `initialize'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:241:in `new'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:241:in `block in build_asset'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:262:in `circular_call_protection'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:240:in `build_asset'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/index.rb:89:in `block in build_asset'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/caching.rb:19:in `cache_asset'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/index.rb:88:in `build_asset'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:163:in `find_asset'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/index.rb:56:in `find_asset'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/processed_asset.rb:106:in `block in build_required_assets'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/processed_asset.rb:100:in `each'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/processed_asset.rb:100:in `build_required_assets'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/processed_asset.rb:16:in `initialize'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:241:in `new'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:241:in `block in build_asset'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:262:in `circular_call_protection'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:240:in `build_asset'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/index.rb:89:in `block in build_asset'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/caching.rb:19:in `cache_asset'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/index.rb:88:in `build_asset'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:163:in `find_asset'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/index.rb:56:in `find_asset'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/processed_asset.rb:106:in `block in build_required_assets'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/processed_asset.rb:100:in `each'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/processed_asset.rb:100:in `build_required_assets'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/processed_asset.rb:16:in `initialize'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:241:in `new'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:241:in `block in build_asset'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:262:in `circular_call_protection'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:240:in `build_asset'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/index.rb:89:in `block in build_asset'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/caching.rb:19:in `cache_asset'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/index.rb:88:in `build_asset'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:163:in `find_asset'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/index.rb:56:in `find_asset'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/processed_asset.rb:106:in `block in build_required_assets'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/processed_asset.rb:100:in `each'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/processed_asset.rb:100:in `build_required_assets'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/processed_asset.rb:16:in `initialize'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:241:in `new'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:241:in `block in build_asset'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:262:in `circular_call_protection'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:240:in `build_asset'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/index.rb:89:in `block in build_asset'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/caching.rb:19:in `cache_asset'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/index.rb:88:in `build_asset'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:163:in `find_asset'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/index.rb:56:in `find_asset'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/bundled_asset.rb:16:in `initialize'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:244:in `new'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:244:in `build_asset'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/index.rb:89:in `block in build_asset'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/caching.rb:19:in `cache_asset'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/index.rb:88:in `build_asset'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:163:in `find_asset'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/index.rb:56:in `find_asset'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.2/lib/sprockets/static_compiler.rb:20:in `block in compile'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:212:in `block in each_logical_path'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:200:in `block (2 levels) in each_file'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:190:in `each'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:190:in `each_entry'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:198:in `block in each_file'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:197:in `each'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:197:in `each_file'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:210:in `each_logical_path'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.2/lib/sprockets/static_compiler.rb:18:in `compile'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.2/lib/sprockets/assets.rake:56:in `internal_precompile'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.2/lib/sprockets/assets.rake:70:in `block (3 levels) in <top (required)>'
  /opt/bitnami/ruby/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:228:in `call'
  /opt/bitnami/ruby/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:228:in `block in execute'
  /opt/bitnami/ruby/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:223:in `each'
  /opt/bitnami/ruby/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:223:in `execute'
  /opt/bitnami/ruby/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:166:in `block in invoke_with_call_chain'
  /opt/bitnami/ruby/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
  /opt/bitnami/ruby/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:159:in `invoke_with_call_chain'
  /opt/bitnami/ruby/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:152:in `invoke'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.2/lib/sprockets/assets.rake:60:in `block (3 levels) in <top (required)>'
  /opt/bitnami/ruby/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:228:in `call'
  /opt/bitnami/ruby/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:228:in `block in execute'
  /opt/bitnami/ruby/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:223:in `each'
  /opt/bitnami/ruby/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:223:in `execute'
  /opt/bitnami/ruby/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:166:in `block in invoke_with_call_chain'
  /opt/bitnami/ruby/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
  /opt/bitnami/ruby/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:159:in `invoke_with_call_chain'
  /opt/bitnami/ruby/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:152:in `invoke'
  /opt/bitnami/ruby/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:143:in `invoke_task'
  /opt/bitnami/ruby/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:101:in `block (2 levels) in top_level'
  /opt/bitnami/ruby/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:101:in `each'
  /opt/bitnami/ruby/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:101:in `block in top_level'
  /opt/bitnami/ruby/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:110:in `run_with_threads'
  /opt/bitnami/ruby/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:95:in `top_level'
  /opt/bitnami/ruby/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:73:in `block in run'
  /opt/bitnami/ruby/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:160:in `standard_exception_handling'
  /opt/bitnami/ruby/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:70:in `run'
  /opt/bitnami/ruby/lib/ruby/gems/1.9.1/gems/rake-10.0.3/bin/rake:33:in `<top (required)>'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/bin/rake:23:in `load'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/bin/rake:23:in `<main>'
  Tasks: TOP => assets:precompile:primary
  rake aborted!
  Command failed with status (1): [/opt/bitnami/ruby/bin/ruby /webapps/appsee...]
  /opt/bitnami/ruby/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/file_utils.rb:53:in `block in create_shell_runner'
  /opt/bitnami/ruby/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/file_utils.rb:45:in `call'
  /opt/bitnami/ruby/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/file_utils.rb:45:in `sh'
  /opt/bitnami/ruby/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/file_utils_ext.rb:40:in `sh'
  /opt/bitnami/ruby/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/file_utils.rb:80:in `ruby'
  /opt/bitnami/ruby/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/file_utils_ext.rb:40:in `ruby'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.2/lib/sprockets/assets.rake:12:in `ruby_rake_task'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.2/lib/sprockets/assets.rake:21:in `invoke_or_reboot_rake_task'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.2/lib/sprockets/assets.rake:29:in `block (2 levels) in <top (required)>'
  /opt/bitnami/ruby/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:228:in `call'
  /opt/bitnami/ruby/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:228:in `block in execute'
  /opt/bitnami/ruby/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:223:in `each'
  /opt/bitnami/ruby/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:223:in `execute'
  /opt/bitnami/ruby/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:166:in `block in invoke_with_call_chain'
  /opt/bitnami/ruby/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
  /opt/bitnami/ruby/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:159:in `invoke_with_call_chain'
  /opt/bitnami/ruby/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:152:in `invoke'
  /opt/bitnami/ruby/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:143:in `invoke_task'
  /opt/bitnami/ruby/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:101:in `block (2 levels) in top_level'
  /opt/bitnami/ruby/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:101:in `each'
  /opt/bitnami/ruby/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:101:in `block in top_level'
  /opt/bitnami/ruby/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:110:in `run_with_threads'
  /opt/bitnami/ruby/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:95:in `top_level'
  /opt/bitnami/ruby/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:73:in `block in run'
  /opt/bitnami/ruby/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:160:in `standard_exception_handling'
  /opt/bitnami/ruby/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:70:in `run'
  /opt/bitnami/ruby/lib/ruby/gems/1.9.1/gems/rake-10.0.3/bin/rake:33:in `<top (required)>'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/bin/rake:23:in `load'
  /webapps/appseeker/shared/bundle/ruby/1.9.1/bin/rake:23:in `<main>'
  Tasks: TOP => assets:precompile 
```

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T10:55:12.163

您是否通过 apt-get 安装了 nodejs？尝试从源代码编译它以使用与 RubyStack 相同的 OpenSSL 库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-26T17:00:54.207

我遇到了完全相同的问题，让我对 Rails 4 和乘客感到头疼。正如贝尔特兰所说，解决方案是从源代码编译 nodejs，另外，使用旧版本的 node.js。在我的本地机器上，我使用的是 v0.10.0，所以我也只是在服务器上使用了它，并且它工作正常。

```
sudo -s
cd /usr/local/src
git clone https://github.com/joyent/node.git
cd node
git checkout v0.10.0-release
./configure
make install 
```

... 稍等片刻

```
node -v
v0.10.0 
```

# php - 如何在 PHP 中发出 Https 请求

> ID：14075602
> 
> 赞同：0
> 
> 时间：2012-12-28T20:48:24.990
> 
> 标签：php, json, https

我仍然对 PHP 不是很满意，而且对 Json 完全陌生。我想做的是检查特定的 Twitch.tv 直播是否在线，我也想吸引观众。Twitch.tv 有自己的 API（[https://github.com/justintv/Twitch-API/wiki/API](https://github.com/justintv/Twitch-API/wiki/API)），这应该是可能的。这是我的第一种方法：

```
// Twitch Streams
else if($typ == 't') {
    $api    = file_get_contents("https://api.twitch.tv/kraken/streams/".$stream_id);
    $json   = json_decode($api);
    if($json->stream != null) {
        return true;    
    }
    else {
        return false;   
    }
} 
```

问题是 file_get_contents 似乎不理解 https，它声称未安装包装器。问题是API不支持正常的http请求，所以我想我必须使用另一个函数。有人可以建议我一个不同的（不太难使用）功能。我已经阅读了 curl 和 fsocket ，但它们对我来说似乎有点难以使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T20:52:22.023

PHP Curl 应该能够帮助解决这个问题。

下面的链接说明了如何获取 http 代码：http: [//php.net/manual/en/function.curl-getinfo.php](http://php.net/manual/en/function.curl-getinfo.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T20:58:09.230

`https://`可能未启用。这篇文章可能会帮助您找出原因：[如何让 file_get_contents() 使用 HTTPS？](https://stackoverflow.com/questions/1975461/file-get-contents-with-https). 没有理由必须使用 cURL，但 cURL 通常更灵活，所以如果您能够理解它的工作原理，我建议您使用它。

# git - 防止 git stash 重置 .gitignore 中的文件

> ID：14075604
> 
> 赞同：1
> 
> 时间：2012-12-28T20:48:33.790
> 
> 标签：git, version-control, gitignore, git-stash

所以我使用的是通过 git 进行版本控制的 drupal

我在drupal中修改了我不想推送到原点的bootstrap.inc文件，应该只在我的本地环境中

我将 bootstrap.inc 添加到我的 ~/.gitignore

但是，每当我执行 git stash save 时，我在 bootstrap.inc 中的更改都会重置为 head 版本，即使我忽略了它......

有没有办法防止这种情况发生，并且我对 bootstrap.inc 的个人更改仍然没有被 git stash 重置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T21:06:36.740

如果该文件已被 git 跟踪，则必须运行：

```
git update-index --assume-unchanged bootstrap.inc 
```

为了让 git 忽略本地环境中对此文件的任何更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T21:20:42.210

通常，如果您的配置文件包含一些特定于站点的配置（尤其是密码等），那么在任何版本控制系统中跟踪此类文件都不是一个好主意。

相反，您应该尝试找到一种方法来保持全局配置不变，并创建特定于站点的覆盖。在 Drupal 的情况下，似乎有一种方法可以做到这一点[`conf_path()`function](https://github.com/drupal/drupal/blob/7.x/includes/bootstrap.inc)，它将从单独的配置文件中读取所有站点特定的信息。

# sql - 寻求有关 SQL Server 死锁问题的帮助

> ID：14075608
> 
> 赞同：0
> 
> 时间：2012-12-28T20:48:57.407
> 
> 标签：sql, sql-server, deadlock, database-deadlocks

寻求帮助解决这个死锁问题......我有一个存储过程，它从多个进程中被频繁调用，但在一个小表上（行数低至数千）......偶尔，我在 proc 上陷入僵局。
Proc 的目的是返回下一个“符合处理条件”的行。不要将同一行返回给proc的两个同时调用是非常重要的......（这部分工作正常）......但我不明白为什么有时会出现死锁。

这是一个 SQL Azure 数据库

感谢帮助

```
CREATE PROCEDURE [dbo].[getScheduledAccounts_Monitor]
    -- Add the parameters for the stored procedure here
    @count int,
    @timeout int = 1200,
    @forcedAccountId uniqueidentifier = NULL
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;
    SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;

    DECLARE @batchId uniqueidentifier
    SELECT @batchId = NEWID()

    BEGIN TRAN

    -- Update rows
    UPDATE Schedule 
    WITH (ROWLOCK)
    SET 
        LastBatchId = @batchId, 
        LastStartedProcessingId = NEWID(), 
        LastStartedProcessingTime = GETUTCDATE(),
        LastCompletedProcessingId = ISNULL(LastCompletedProcessingId, NEWID()),
        LastCompletedProcessingTime = ISNULL(LastCompletedProcessingTime, GETUTCDATE())
    WHERE 
        ActivityType = 'Monitor' AND 
        IsActive = 1 AND
        AccountId IN (
            SELECT TOP (@count) AccountId 
            FROM Schedule 
            WHERE 
                (LastStartedProcessingId = LastCompletedProcessingId OR LastCompletedProcessingId IS NULL OR DATEDIFF(SECOND, LastStartedProcessingTime, GETUTCDATE()) > @timeout) AND 
                IsActive = 1 AND ActivityType = 'Monitor' AND
                (LastStartedProcessingTime IS NULL OR DATEDIFF(SECOND, LastStartedProcessingTime, GETUTCDATE()) > Frequency)
            ORDER BY (DATEDIFF(SECOND, LastStartedProcessingTime, GETUTCDATE()) - Frequency) DESC
        ) AND
        AccountId = ISNULL(@forcedAccountId, AccountID)

    -- Return the changed rows
    SELECT AccountId, LastStartedProcessingId, Frequency, LastProcessTime, LastConfigChangeTime, ActivityType
    FROM Schedule 
    WHERE LastBatchId = @batchId

    COMMIT TRAN
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T23:06:51.477

您可以使用应用程序锁来确保单次执行。下面的文章适用于 SQL 2005，但我确信该解决方案也适用于较新的版本。

[http://www.sqlteam.com/article/application-locks-or-mutexes-in-sql-server-2005](http://www.sqlteam.com/article/application-locks-or-mutexes-in-sql-server-2005)

# python - pickle 命令字符串中的局部变量？

> ID：14075610
> 
> 赞同：-1
> 
> 时间：2012-12-28T20:49:00.483
> 
> 标签：python, pickle

这是为了安全比赛，请不要对我大喊大叫:)

我正在尝试使用传递给的字符串访问局部变量`pickle.loads()`。例如，我想做这样的事情：

```
local_var = 1
pickle.loads('''c__builtin__
eval
(c__builtin__
compile
(S"print local_var"
S"error_output_file"
S"exec"
tRtR.''') 
```

但是，我收到以下错误：`NameError: name 'local_var' is not defined`

事实上，当我检查局部变量时，它们与我的预期完全不同：

```
pickle.loads("""c__builtin__
locals
(tR.""") 
```

给

```
{'args': (),
 'func': <function locals>,
 'self': <pickle.Unpickler instance at 0x108af3830>,
 'stack': []} 
```

这里发生了什么，我该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T20:52:08.217

该`pickle.loads()`函数无法直接访问您从中调用的代码的本地`.loads()` *变量*。它有自己的范围。在这种情况下，您正在查看`pickle.Unpicler`正在处理您的`.loads()`调用的实例上的方法之一的本地名称空间。

您必须使用[`sys._getframe()`](http://docs.python.org/2/library/sys.html#sys._getframe)访问调用堆栈，然后查看`.f_locals`各个帧的映射以到达调用函数的局部变量。

从[`pickle`源代码](http://hg.python.org/cpython/file/3436769a7964/Lib/pickle.py)猜测我会说你需要跳过 3 帧、当前调度方法、`Unpickler.load`调用当前调度方法的方法和模块级`loads()`函数，这样`sys._getframe(3).f_locals['local_var']`才能得到你想要的参考。

# javascript - 匹配并使用正则表达式匹配

> ID：14075618
> 
> 赞同：-2
> 
> 时间：2012-12-28T20:49:57.423
> 
> 标签：javascript, regex

我从来没有在 javascript 中使用过正则表达式，我想现在是时候了。

我需要搜索`window.location`它是否有我需要的参数 - `start=SOME_NUMBER`。如果搜索返回 true，我需要将`start=SOME_NUMBER`bt 返回给我并将其存储在变量中。

好的是，我可以自己创建模式，但不好的是我不知道如何用 javascript 编写代码。所以，我基本上不知道在哪里以及如何使用我的模式。

如果有人能给我一个关于javascript如何与正则表达式一起工作的简要解释，我将非常感激。

谢谢。

编辑：

此外，如果模式不匹配任何内容，我希望变量返回空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T20:57:20.863

Regular-Expressions.info 有一个很棒的[Javascript 分解](http://www.regular-expressions.info/javascript.html)。结合它的[Flavor comparison](http://www.regular-expressions.info/refflavors.html)，你几乎可以写任何你需要的东西。享受！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T21:03:30.203

您可以使用该`string.match(regexp)`功能。我在这里有一个小提琴[http://jsfiddle.net/E7frT/](http://jsfiddle.net/E7frT/)。

```
var matches = window.location.toString().match(/[^\w]start=(\d+)/i);
// above we are using a case insensitive regexp with numbers as a matching group
// indicated with the parenthesis, this makes it possible to extract that part of
// the match

var start = null;
if(matches) {
  start = matches[1];
  // The matches will be an array if there were any, the zero index will contain
  // the entire match index one onward will be any matching groups in our regexp

}
// start will be null if no match or the number (as a string) if there is a match 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T21:05:16.250

您可以使用以下命令查找“start=NUMBER”

```
String(window.location).match(/start=[0-9]+/g); 
```

它将返回整个“start = NUM​​BER”，但在那里过滤数字应该不难。

# batch-file - nohup 用于批处理命令，使用“for x in find”

> ID：14075619
> 
> 赞同：1
> 
> 时间：2012-12-28T20:49:57.537
> 
> 标签：batch-file, find, nohup, at-job

我正在尝试对当前目录中以 .fastq 结尾的所有文件运行 Python 脚本 (qTrimHIV.py)。我想`nohup`在开头追加，以便它从一个命令中执行所有文件，无论我是关闭终端还是注销。

个人命令：

```
for x in $(find . -name '*fastq'); do echo $x; python ../qTrimHIV.py -verbose -fastq $x -l 23 -m 20 -w 23 -o ${x%.fastq*}tr -mode 2; done 
```

效果很好。但是当我把 nohup 放在批处理命令前面时：

```
nohup for x in $(find . -name '*fastq') ; do echo $x; python ../qTrimHIV.py -verbose -fastq $x -l 23 -m 20 -w 23 -o ${x%.fastq*}tr -mode 2; done
-bash: syntax error near unexpected token `do' 
```

我得到上面的错误。

但是，如果我将 nohup 放在实际命令“python ../qTrimHIV.py”之前效果很好，但这并不是我真正想要的，因为我想一次提交所有文件的任务并让它运行直到完成，无需保持登录。

我试过了

```
for x in $(find . -name '*fastq') ; do echo $x; python ../qTrimHIV.py -verbose -fastq $x -l 23 -m 20 -w 23 -o ${x%.fastq*}qtrim -mode 2; done | at now 
```

但它并没有让我看到工作的进度，而且我不知道它是否还在运行。

谁能给我任何建议？我应该使用不同的命令`nohup`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T21:00:54.317

您可以使用：

```
nohup bash -c 'your command, everything including for' 
```

另外，为什么不使用 nohup 运行 shell 脚本：

```
nohup <your script> 
```

# objective-c - 从 NSMutableArray 中的 NSString 检查正确答案

> ID：14075622
> 
> 赞同：-1
> 
> 时间：2012-12-28T20:50:29.437
> 
> 标签：objective-c, if-statement, nsstring, nsmutablearray

我有一个`NSMutableArray`包含问题的答案。答案存储在`NSString`. 当用户单击键盘上的完成按钮时，我正在尝试检查答案是否正确。

每次我点击完成时，它总是显示不正确，而实际上答案是正确的。

我注意到我做错了什么。

我什至做了一个`NSLog`并且`NSLog`返回了有效的答案。if 语句有问题吗？

# 代码：

```
- (IBAction)checkAnswer:(UITextField *)sender
{
    NSLog(@"The question's answer for the question you selected is %@", [selectedQuestion questionAnswer]);

        if (answerField.text == [selectedQuestion questionAnswer])
        {
            // Show the correct label
            [correctLabel setHidden:NO];
            correctLabel.text = @"Correct!";
            correctLabel.textColor = [UIColor greenColor];

        }
        if (answerField.text != [selectedQuestion questionAnswer])
        {
            [correctLabel setHidden:NO];
            correctLabel.text = @"Incorrect";
            correctLabel.textColor = [UIColor redColor];
        }

        // answerField.text = @"";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T20:53:05.517

你必须使用 NSString 类的 isEqualToString 方法

```
- (IBAction)checkAnswer:(UITextField *)sender
{

NSLog(@"The question's answer for the question you selected is %@", [selectedQuestion questionAnswer]);

    if ([answerField.text isEqualToString:[selectedQuestion questionAnswer]])
    {
        // Show the correct label
        [correctLabel setHidden:NO];
        correctLabel.text = @"Correct!";
        correctLabel.textColor = [UIColor greenColor];

    }
    if (answerField.text != [selectedQuestion questionAnswer])
    {
        [correctLabel setHidden:NO];
        correctLabel.text = @"Incorrect";
        correctLabel.textColor = [UIColor redColor];
    }

    // answerField.text = @""; 
```

}

# jquery - 在 Prestashop CMS 页面中使用 jQuery

> ID：14075624
> 
> 赞同：0
> 
> 时间：2012-12-28T20:50:39.133
> 
> 标签：jquery, content-management-system, prestashop

我正在尝试在 CMS 页面中使用一些代码，我将这些代码放在我在 Prestashop Backoffice 中创建的 CMS 页面中实现的 html 代码的末尾，但是，该代码的部分工作但其余部分的代码不起作用，不知道为什么。

所以基本上我有一个带有列表的页面和列表的每个项目内的一些 div。因此，使用 jQuery，我隐藏了所有 DIV（并且这个特定部分有效），然后在我单击的每个项目中，我都有一个 jQuery 函数来切换下面 DIV 的可见性。所以问题就在这里，那段代码似乎不起作用，我不知道为什么。

```
<h1>Cursos Magic Nails</h1>
<p>Temos um vasto leque de ofertas formativas à sua espera. Escolha um dos links abaixo e veja a nossa oferta formativa.</p>
<ul id="portefolio">
<li><img name="" src="" width="256" height="200" alt="" />Unhas
<div class="infos">
<h3>Cursos de Unhas de Gel e Acrílico</h3>
<ul>
     <li>Curso de Técnicas de Unhas de Gel</li>
        <li>Designer de Unhas de Gel</li>
        <li>Curso de Art-Nail</li>
        <li>Reciclagem para Profissionais</li>
</ul>
<ul>
     <li>Curso de Acrílico</li>
</ul>
</div>
</li>
<li><img name="" src="" width="256" height="200" alt="" />Manicure/Pedicure
<div class="infos">
<h3>Cursos de Manicure/Pedicure</h3>
<ul>
     <li>Curso de Manicure</li>
        <li>Curso de Pedicure</li>
        <li>Pack 3 Cursos (Manicure/Pedicure e Depilação)</li>
        <li>Curso 3 em 1<span>PROMO</span></li>
        <li>Manicure e Pedicure<span>PROMO</span></li>
</ul>
</div>
</li>
<li><img name="" src="" width="256" height="200" alt="" />Pestanas
<div class="infos"> 
<h3>Cursos de Pestanas</h3>
<ul>
<li>Curso de Alongamento de Pestanas<span>NOVO</span></li>
<li>Curso de Permanente de Pestanas<span>NOVO</span></li>
</ul>
</div>
</li>
<li><img name="" src="" width="256" height="200" alt="" />Depilação
<div class="infos">
<h3>Cursos de Depilação</h3>
<ul>
<li>Curso de Depilação</li>
<li>Curso de Depilação com Linha<span>NOVO</span></li>
<li>Curso de Depilação<span>PROMO</span></li>
</ul>
<ul>
<li>Pack 3 Cursos</li>
<li>Curso 3 em 1<span>PROMO</span></li>
</ul>
</div>
</li>
<li><img name="" src="" width="256" height="200" alt="" />Massagens
<div class="infos">
<h3>Cursos de Massagens</h3>
<ul>
<li>Curso de Massagens de Relaxamento</li>
<li>Curso de Massagens das Pedras Quentes</li>
<li>Curso de Massagens de Estética</li>
</ul>
</div>
</li>
<li><img name="" src="" width="256" height="200" alt="" />Rosto
<div class="infos">
<h3>Cursos de Rosto</h3>
<ul>
<li>Curso de Rosto</li>
</ul>
</div>
</li>
<li><img name="" src="" width="256" height="200" alt="" />Glitter Tattoo
<div class="infos">
<h3>Cursos de Glitter Tattoo</h3>
<ul>
<li>Curso de Glitter Tattoo</li>
</ul>
</div>
</li>
</ul> 
```

以及嵌入在页面中的 jQuery：

```
<script type="text/javascript">
    $(document).ready(function() {
        //Hide that DIV
        $('#page #portefolio li .infos').hide(); //Hide/close all containers

        //On Click
        $('#page #portefolio li').click(function(){
            //If immediate next container is closed...
            if($(this).parent('#page #portefolio li .infos').is(':hidden')){ 
                $('#page #portefolio li').removeClass('active').parent('#page #portefolio li .infos').slideUp();
                $(this).addClass('active').parent('#page #portefolio li .infos').slideDown();   
            } else {
                $(this).removeClass('active').parent('#page #portefolio li .infos').slideUp();
            }
            return false; //Prevent the browser jump to the link anchor
        });
    });
</script> 
```

所以上面的部分//On Click是不起作用的部分。

您可以在此链接中进行测试： [链接](http://magicnails.designeart.net/content/11-cursos)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T21:08:54.157

您的主要问题是您遍历以找到正确的`.infos`div 的方式。jQuery 有非常优雅的遍历方法，可以让这更简单。

这是一个活生生的例子：http: [//jsfiddle.net/WbUPt/1/](http://jsfiddle.net/WbUPt/1/)

```
// Cache your jQuery selector... you don't need to find it over and over again
var $portefolio = $('#portefolio');

// Hide / close all containers
$portefolio.find('.infos').hide(); 

// Add a single event to the container for better performance
$portefolio.on('click', 'li', function (event) {

    var $this = $(event.currentTarget);

    if ($this.hasClass('active')) {

        // Deactivate
        $this.removeClass('active');
        $this.find('.infos').slideUp();

    } else {

        // Activate
        $this.addClass('active');
        $this.find('.infos').slideDown();
    }
}); 
```

​​​

# javascript - 如果从另一个会话打开，弹出窗口将被替换

> ID：14075625
> 
> 赞同：2
> 
> 时间：2012-12-28T20:50:40.963
> 
> 标签：javascript, jsp

在 Java Web 应用程序 (JSF) 中，我有一个 Person 表单，单击此按钮时添加详细信息按钮，我正在使用 java 脚本打开一个弹出窗口，但我还没有关闭此弹出窗口。现在，如果我打开同一个应用程序的另一个会话并尝试为另一个人添加详细信息，它会替换以前会话打开的弹出窗口。如何避免这种情况？

```
var url = contextpath+'person/AddDetails.jsp';
var modalprops = "height=310,width=400,scrollbars=on,status=no;menubar=no,resizable=no";
window.open(url, 'adddetails', modalprops, false); 
```

我不擅长 UI 技术 :(，因此这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T20:51:56.720

给每个窗口一个唯一的名称，而不是让它们都被称为“adddetails”。

# html - 如何在每个标签后插入换行符？

> ID：14075631
> 
> 赞同：0
> 
> 时间：2012-12-28T20:51:10.557
> 
> 标签：html, css

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T20:56:17.093

让它成为块级元素，也许？

```
a { display: block; } 
```

[在这里](http://jsfiddle.net/senoramor/ayRx7/)拉小提琴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T20:54:06.853

你不能用 CSS 做到这一点——这不是它的本意。

您可以使用 Javascript 来执行此操作。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-28T20:56:14.643

很明显，您不能使用 css 定义内容。您可以使用简单的 Jquery`$("a").after("html here");`

# objective-c - 在 NSArray 中增加 NSNumber

> ID：14075643
> 
> 赞同：1
> 
> 时间：2012-12-28T20:52:24.643
> 
> 标签：objective-c, ios, nsarray, increment, nsnumber

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T23:02:40.590

正如其他人所说，是的，您需要那么多步骤。使用文字，它可以更容易阅读：

```
myMutableArray[index] = @( [ myMutableArray[index] intValue] + 1 ) ; 
```

您的第二个代码示例将不起作用，因为`replaceObjectAtIndex:withObject:`返回`void`，而不是它所作用的 NSMutableArray。您需要创建一个`mutableCopy`NSArray，然后`replaceObject`将 NSArray 设置为`copy`NSMutableArray 的一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T05:29:59.570

如果您需要能够调整它的大小，我会推荐使用 C++ STL 容器而不是创建一个普通的 int 数组。将您的实现文件的扩展名重命名为`.mm`而不是`.m`.

```
std::vector<int> numbers = { 2, 4, 6 };
numbers[1]++; // { 2, 5, 6 } 
```

请记住包含容器的定义。

```
#import <vector> 
```

# javascript - 奇怪的镀铬错误

> ID：14075645
> 
> 赞同：0
> 
> 时间：2012-12-28T20:52:29.853
> 
> 标签：javascript, jquery, google-chrome, anonymous-function

我正在开发我的网站，它有这么多 jquery 功能，然后我注意到 chrome 的 web 开发者控制台中有一些奇怪的东西。它会导致一个简单的 $('elem').slideDown(); 功能，但直到现在它运行良好..这很疯狂，因为我没有改变那个功能。我得到的三个错误：

```
Uncaught TypeError: Cannot read property 'style' of undefined chrome-extension://nnbmlagghjjcbdhgmkedmbmedengocbn/jquery.min.js:14
Uncaught ReferenceError: $ is not defined chrome-extension://nnbmlagghjjcbdhgmkedmbmedengocbn/common.js:37
Uncaught ReferenceError: $ is not defined chrome-extension://nnbmlagghjjcbdhgmkedmbmedengocbn/content.js:125 
```

当我打开错误消息时，只有这个：（匿名函数）。我不知道出了什么问题以及脚本的工作方式。

你们有什么感想？

Ps：对不起我的英语知识。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T20:57:23.230

看起来是扩展：[https ://chrome.google.com/webstore/detail/docs-pdfpowerpoint-viewer/nnbmlagghjjcbdhgmkedmbmedengocbn?hl=en](https://chrome.google.com/webstore/detail/docs-pdfpowerpoint-viewer/nnbmlagghjjcbdhgmkedmbmedengocbn?hl=en)

卸载它，看看它是否神奇地开始工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T20:56:23.973

该错误来自您的 chrome 扩展之一（如错误消息中所述）。

检查您的目录：

C:\Users[您的用户名]\AppData\Local\Google\Chrome\User Data\Default\Extensions\nnbmlagghjjcbdhgmkedmbmedengocbn

'nnbmlagghjjcbdhgmkedmbmedengocbn' 部分来自您的错误消息，因此一旦您将上面的路径更改为拥有您的用户名，您应该能够找到导致问题的插件。

此外，在阅读评论后，我可以确认是[此处](https://chrome.google.com/webstore/detail/docs-pdfpowerpoint-viewer/nnbmlagghjjcbdhgmkedmbmedengocbn?hl=en)找到的插件导致了问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T20:56:58.200

尝试以“隐身模式”查看同一页面`File > New Incognito Window`

通常浏览器扩展是关闭的，所以这是最容易测试的，而无需真正禁用或卸载它们。

# c# - 模块化和重用 asp.net C# 应用程序

> ID：14075658
> 
> 赞同：1
> 
> 时间：2012-12-28T20:53:39.243
> 
> 标签：c#, asp.net

我想在 asp.net C# 中实现一个购物车网站。UI 和逻辑实现相当复杂。

我希望能够在不同的 ASP.NET 网站下使用这个购物车应用程序。

我们在 asp.net 中有 12-15 个不同的网站。每个网站都是不同的商业模式。但是，我们希望在每个网站下都使用相同的购物车应用程序（具有相同的 UI 和逻辑）。

这个概念听起来像一个 ASP.NET 服务器控件，即将购物车创建为一个 ASP.NET 服务器控件并将其插入不同的网站。但是，以下是我们面临的一些问题：-

1.  购物车 UI/逻辑非常复杂。轻松可以运行到 50-60 aspx 页面。我不确定将其创建为服务器控件有多容易和可维护
2.  与独立购物车相比，我们必须面对多大的性能影响？

性能影响对我们来说更重要。

最后，有没有其他更好的替代方案来处理复杂项目的 asp.net 中的这种即插即用设计。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T11:51:41.953

由于您想要相同的 UI 和逻辑，因此它们必须仅驻留在一个地方。恐怕如果您以用户控件的方式创建，单个用户控件将被复制到所有域，如果您更改它，那么您将不得不在所有服务器上进行更新。一种更简单的方法是在单个服务器上创建逻辑和 ui 作为 web 服务。您可以对其进行自定义以提供 html 输出，可以通过 javascript 调用和更新。然而，不利的一面是，您将不得不实现自己的会话和状态管理，这并不难，但值得。

# ruby-on-rails-3 - Rails 3 处理持续的就业时间

> ID：14075659
> 
> 赞同：1
> 
> 时间：2012-12-28T20:53:48.747
> 
> 标签：ruby-on-rails-3

我正在构建一个`employments`包含`start_date`和`end_date`

```
create_table :employments do |t|
      t.integer :user_id
      t.integer :company_id
      t.string :title
      t.string :department
      t.string :summary
      t.date :start_date
      t.date :end_date
      t.timestamps
end 
```

它有利于创建过去的就业，但不适用于当前的就业，因为用户仍在就业。

当用户试图表明他/她当前在职时如何处理，以便用户不必选择`:end_date`. （我知道LinkedIn提供了一个选项，允许用户点击“我目前在这里工作”来避免选择`:end_date`，但是在数据库中，这是如何实现的？）

我使用 simple_form 进行`:employments`编辑和新建。日期字段是日期选择器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T21:02:41.107

带有 :unless 条件的 validates_presence_of 怎么样？

这是一个例子：

[仅当另一个字段为空白时才验证字段的存在 - Rails](https://stackoverflow.com/questions/6273289/validate-presence-of-field-only-if-another-field-is-blank-rails)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T20:56:47.390

在我的脑海中，为什么不将`end_date`字段设置为`nil`并将该值视为 UI 中的“当前使用”？

# internet-explorer - IE 中的网站空白为 1 个框

> ID：14075662
> 
> 赞同：0
> 
> 时间：2012-12-28T20:54:12.040
> 
> 标签：internet-explorer

使用 IE8 时，用户在尝试访问托管在专用服务器上的内部公司网站时，只能获得一个空白页面，但使用 favicon。

这是我尝试过的：

*   她成功远程到我的桌面并使用我电脑的 IE8 导航到我的网站
*   她可以使用 Firefox 访问该网站
*   启用 JS 错误提示后，她在访问网站时没有收到任何信息
*   查看源代码时，她看到的 HTML 与可以访问该网站的用户相同

用户通过 VPN 连接到公司防火墙。

谢谢

# javascript - jQuery：选择文本节点的上一个兄弟

> ID：14075664
> 
> 赞同：2
> 
> 时间：2012-12-28T20:54:22.990
> 
> 标签：javascript, jquery, textnode, siblings

假设我们有以下 HTML 代码：

```
<div>
    Select Gender:
    <input type="radio" />
    Male
    <input type="radio" />
    Female
</div> 
```

我的目标是检查男性单选按钮（第一个）。但是，我不知道这个单选按钮是否总是两个单选按钮中的第一个，唯一可以确定的是我想在“男性”文本**之前检查单选按钮。**

所以这就是我的做法：

```
$('div') 
    .contents()
    .filter(function() {
        return (((this.textContent || this.innerText || $(this).text() || '').search(new RegExp(labels[i], "ig")) >= 0) && (this.nodeType === 3)); 
    })   
    .prev('input[type=radio]')
    .attr('checked', 'checked'); 
```

但这不起作用。快速调试显示文本节点已正确选择，但 .prev() 函数没有返回任何内容。我也尝试过 previousSibling 但没有更好的结果。

提前致谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T21:01:37.880

```
$('div').contents().filter(function() {
     var tn = this.textContent || this.innerText;
     return $.trim(tn) === 'Male';
}).prev('input[type=radio]').prop('checked', true); 
```

[http://jsfiddle.net/FdHAa/](http://jsfiddle.net/FdHAa/)

或者：

```
<div>
    Select Gender:
    <input id='male' type="radio" />
    <label for='male'>Male</label>
    <input id='female' type="radio" />
    <label for='female'>Female</label>
</div> 
```

```
$('div label').filter(function() {
    return $(this).text() === 'Male';
}).prev().prop('checked', true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T21:56:21.823

检查“男性”文本之前的单选按钮。

[http://jsfiddle.net/hmariod/ZtuKD/1/](http://jsfiddle.net/hmariod/ZtuKD/1/)

```
function setM() {
    var inps = document.getElementsByTagName("input");
    for(var i = 0; i < inps.length; i++){
        if(inps[i].type == "radio" ){
            if(inps[i].nextSibling.data.indexOf("Male") > -1){
                inps[i].setAttribute("checked","checked");
            }
        }
    }
} 
```

# c++ - WXWidgets 事件参数

> ID：14075666
> 
> 赞同：1
> 
> 时间：2012-12-28T20:54:27.620
> 
> 标签：c++, wxwidgets

我正在尝试在 WXWidgets 中设置一个带有按钮网格的窗口。这些按钮中的每一个都将打开另一个窗口。现在我知道我可以通过根据按下的按钮在单独的函数中调用每个窗口来做到这一点。但这似乎有点低效。

我想要做的是让这些按钮中的每一个在单击时调用相同的函数，但传递一个 ID，该 ID 将用于确定打开哪个窗口。

我使用的基本代码如下（位被剥离，我有一个关闭应用程序的按钮，只是为了测试按钮）

```
Simple::Simple(const wxString& title, int x, int y)
       : wxFrame(NULL, wxID_ANY, title, wxDefaultPosition, wxSize(x,y))
{

    wxPanel  *testPanel  = new wxPanel(this,wxID_ANY, wxDefaultPosition,wxSize(270, 150));
    wxButton *testButton = new wxButton(testPanel, wxID_EXIT, wxT("Actors"), wxPoint(20,20));
    Connect(wxID_ANY, wxEVT_COMMAND_BUTTON_CLICKED,wxCommandEventHandler(Simple::eventWindowCall));
    testButton->SetFocus();

    Centre();
}

void Simple::eventWindowCall(wxCommandEvent & WXUNUSED(event))
{
    Close(true); //just a line to make sure this function is being called
} 
```

在使用连接时，我已经尝试使用数字代替事件 ID，但是如果我这样做，按钮的函数不会被调用。理想情况下，我可以只执行类似 wxCommandEventHandler(Simple::eventWindowCall(26)) 的操作，然后在 eventWindowCall 函数中添加一个 case 语句，该语句将根据输入的数字显示正确的窗口。但到目前为止，这种方法也无效。

你能提供的任何建议都会很棒。感谢您阅读本文。几个小时以来，我一直在努力解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T21:16:42.930

> **int wxEvent::GetId() 常量**
> 
> 返回与此事件关联的标识符，例如按钮命令 ID。

`wxCommandEvent`您可以从传递给函数的 中获取与事件相关的控件 ID ：

```
void eventWindowCall(wxCommandEvent& event) {
    event.GetId(); // <-
} 
```

这将为您提供被按下按钮的 ID，在您的情况下为 wxID_EXIT（因为这是您分配给按钮的 ID）：

```
new wxButton(testPanel, wxID_EXIT
//                      ^^^^^^^^^ this will be passed as event id 
```

更多信息请参考[wxCommandEvent](http://docs.wxwidgets.org/2.8/wx_wxcommandevent.html)及其基类[wxEvent](http://docs.wxwidgets.org/2.8/wx_wxevent.html#wxevent)的文档。

# sql - 无法使用 monotouch 连接到 sql azure 数据库

> ID：14075667
> 
> 赞同：1
> 
> 时间：2012-12-28T20:54:27.323
> 
> 标签：sql, azure, mono, xamarin.ios

我正在使用 c# 和 monotouch 开发一个 iphone 项目。我需要使用 SQL Azure 数据库。我的问题是我似乎无法使用单点触控连接。我可以使下面的代码在使用 Visual Studio 2012 构建在 Windows 8 机器上的本机控制台应用程序中正常工作。但是，当我尝试将其移植到 imac 并使用 monodevelop/monotouch 时，我的 iphone 应用程序崩溃了。我得到的错误是：

System.NotImplementedException：未实现客户端和服务器之间发送的数据的 SSL 加密。

我用谷歌搜索了一下，发现了一个错误报告，似乎在[这里](http://lists.ximian.com/pipermail/mono-bugs/2011-February/109539.html)描述了我的确切问题。我注意到它已经快两年了，所以我不确定这是否仍然没有实现。

因此，我尝试更改 StringBuilder.Encrypt = true; 的值 为假。但是，它仍然崩溃，我得到了错误：

Mono.Data.Tds.Protocol.TdsInternalException：服务器关闭了连接。---> System.IO.IOException：连接丢失

无论哪种情况，应用程序都会在 conn.Open(); 时崩溃；叫做。

我很困惑，我别无选择，只能使用 SQL Azure。因此，如果有人可以为我的问题提出解决方案或解决方法，我将不胜感激。提前致谢！

```
 string userName = "<username>@<myservername>";
        string password = "<password>";
        string dataSource = "<myservername>.database.windows.net";
        string databaseName = "<dbname>";

        SqlConnectionStringBuilder connStringBuilder;
        connStringBuilder = new SqlConnectionStringBuilder();
        connStringBuilder.DataSource = dataSource;
        connStringBuilder.InitialCatalog = databaseName;
        connStringBuilder.Encrypt = true;
        connStringBuilder.TrustServerCertificate = false;
        connStringBuilder.UserID = userName;
        connStringBuilder.Password = password;

        using (SqlConnection conn = new SqlConnection (connStringBuilder.ToString())) {

            conn.Open();

            using (IDbCommand dbcmd = conn.CreateCommand()){
                string sql = "Select client_username from dbo.client;";
                dbcmd.CommandText = sql;
                using (IDataReader reader = dbcmd.ExecuteReader()){
                    while( reader.Read() ){
                        string username = (string) reader["client_username"];
                    }
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-04T22:22:34.853

未实现 SqlConnection 类的 SSL。请参阅[SqlConnection.cs](https://github.com/mono/mono/blob/master/mcs/class/System.Data/System.Data.SqlClient/SqlConnection.cs#L819-L823)

由于 Azure 需要加密连接，因此您必须采取一些解决方法。例如，您可以创建一个 Web 角色并公开一个代表您执行 SQL 的 Web 服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T21:47:08.037

尝试使用简单的字符串作为连接字符串：

```
 connStr = "Server=tcp:<server_here>.database.windows.net,1433;Database=<db_name_here>;Trusted_Connection=False;Encrypt=True;TrustServerCertificate=False;UserID=<user_name_here>@<server_name_here>;Password=<password_here>";

        using (SqlConnection conn = new SqlConnection (connStr)) {

            conn.Open();

            using (IDbCommand dbcmd = conn.CreateCommand()){
                string sql = "Select client_username from dbo.client;";
                dbcmd.CommandText = sql;
                using (IDataReader reader = dbcmd.ExecuteReader()){
                    while( reader.Read() ){
                        string username = (string) reader["client_username"];
                    }
                }
            }
        } 
```

注意差异 - 使用服务器、数据库。一旦你得到正确的连接字符串，你可以尝试使用 ConnectionStringBuilder 看看你是否得到完全相同的输出。但是，如果您有一个可以使用的字符串，则使用字符串会更容易。

# php - 在 PHP 中实现 Crockford Base32 编码

> ID：14075672
> 
> 赞同：4
> 
> 时间：2012-12-28T20:54:50.900
> 
> 标签：php, encoding, base32

我正在尝试使用[Crockford Base32 Algorithm](http://www.crockford.com/wrmg/base32.html)对字符串进行编码。

不幸的是，[我当前的代码](https://github.com/dflydev/dflydev-base32-crockford)只接受数值作为输入。我曾想过将 ASCII 字符转换为十进制或八进制，但随后的串联`010`和`100`导致`10100`无法解码。有什么方法可以做到这一点我不知道吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-28T21:16:13.753

我相信这应该是[Crockford Base32 编码](http://www.crockford.com/wrmg/base32.html)的更有效实现：

```
function crockford_encode( $base10 ) {
    return strtr( base_convert( $base10, 10, 32 ),
                  "abcdefghijklmnopqrstuv",
                  "ABCDEFGHJKMNPQRSTVWXYZ" );
}

function crockford_decode( $base32 ) {
    $base32 = strtr( strtoupper( $base32 ), 
                     "ABCDEFGHJKMNPQRSTVWXYZILO",
                     "abcdefghijklmnopqrstuv110" );
    return base_convert( $base32, 32, 10 );
} 
```

（[codepad.org 上的演示](http://codepad.org/hYEBXNCc)）

请注意，由于 PHP[`base_convert()`](http://php.net/base_convert)函数中的已知限制（或者可以说是错误），这些函数只会返回正确的结果，这些值可以由 PHP 的内部数字类型（可能是 double）准确表示。我们可以希望这将在未来的一些 PHP 版本中得到修复，但与此同时，您始终可以使用[这个插件替代`base_convert()`](http://php.net/manual/en/function.base-convert.php#109660).

* * *

**编辑：**计算可选校验位的最简单方法可能是这样的：

```
function crockford_check( $base10 ) {
    return substr( "0123456789ABCDEFGHJKMNPQRSTVWXYZ*~$=U", $base10 % 37, 1 );
} 
```

或者，对于大量：

```
function crockford_check( $base10 ) {
    return substr( "0123456789ABCDEFGHJKMNPQRSTVWXYZ*~$=U", bcmod( $base10, 37 ), 1 );
} 
```

然后我们可以像这样使用它：

```
function crockford_encode_check( $base10 ) {
    return crockford_encode( $base10 ) . crockford_check( $base10 );
}

function crockford_decode_check( $base32 ) {
    $base10 = crockford_decode( substr( $base32, 0, -1 ) );
    if ( strtoupper( substr( $base32, -1 ) ) != crockford_check( $base10 ) ) {
        return null;  // wrong checksum
    }
    return $base10;
} 
```

（[codepad.org 上的演示](http://codepad.org/QNcWGkdR)）

**注意：**（2014 年 7 月 18 日）上述代码的原始版本在 Crockford 字母字符串中存在错误，因此它们读取`...WZYZ`而不是`...WXYZ`，导致某些数字编码和解码不正确。此错误现已修复，codepad.org 版本现在包含一个基本的自检例程来验证这一点。感谢[James Firth](https://stackoverflow.com/users/2710822/james-firth)发现并修复了它。

# artificial-intelligence - AI算法 - 无冲突地连接矩阵形状图的给定顶点对

> ID：14075675
> 
> 赞同：0
> 
> 时间：2012-12-28T20:55:21.110
> 
> 标签：artificial-intelligence

我正在寻找在一个简单的电路中连接大厅的 AI 算法，我假设它可以表示为一个本身会导致图形问题的二维矩阵。我找不到这样的算法，所以我可以添加一个启发式。我很确定这是一个著名的 AI 问题，但不知道它的名字，希望任何人都可以告诉我在哪里可以找到这样的算法，并向我保证我的关于电路的假设及其作为图表的表示是正确的。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T22:48:25.983

我不确定您所说的“连接大厅”是什么意思，但是如果您正在尝试布置电路，那么搜索“拓扑平面布线算法”可能会帮助您进行搜索。

此外，以下文章可能会给您一些想法： [http](http://en.m.wikipedia.org/wiki/Routing_(electronic_design_automation) ://en.m.wikipedia.org/wiki/Routing_(electronic_design_automation )

# java - 列表视图中的位图不起作用

> ID：14075677
> 
> 赞同：0
> 
> 时间：2012-12-28T20:55:29.997
> 
> 标签：java, android, image, listview, bitmap

> **可能重复：**
> [如何在 ListView 中延迟加载图像](https://stackoverflow.com/questions/541966/how-do-i-do-a-lazy-load-of-images-in-listview)

我有位图和文本的列表视图。当我下载图片并想查看它时，它不会出现在我的应用程序中。当我使用 R.drawable.imagename 中的图像时，它可以工作......我的代码：

```
 List<HashMap<String, Object> > aList = new ArrayList<HashMap<String, Object> >();

    for(int i=0;i<ilosctalentow.size();i++){
        if (ilosctalentow.get(i).indexOf("0/")==-1)
        {
        HashMap<String, Object> hm = new HashMap<String,Object>();
        hm.put("txt", "xxx");
        hm.put("cur","Currency : " + ilosctalentow.get(i));
        Bitmap bmp = DownloadImage("http://www.xxx.pl/xxx/xxx/xhxuxj.png");
        hm.put("flag",bmp);
        aList.add(hm);

        Log.i(TAG,Integer.toString(R.drawable.afghanistan) );
        }
    }

    // Keys used in Hashmap
    String[] from = { "flag","txt","cur" };

    // Ids of views in listview_layout
    int[] to = { R.id.flag,R.id.txt,R.id.cur};

    // Instantiating an adapter to store each items
    // R.layout.listview_layout defines the layout of each item
    SimpleAdapter adapter = new SimpleAdapter(getBaseContext(), aList, R.layout.listview_layout, from, to);

    // Getting a reference to listview of main.xml layout file
    ListView listView = ( ListView ) findViewById(R.id.listview);

    // Setting the adapter to the listView Zaraz mnie huj strzeli
    listView.setAdapter(adapter); 
```

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T23:27:07.553

我想我可以发布指向另一个问题的链接作为答案，并解释如何将其应用于您当前的解决方案。

[ListView 中图像的延迟加载](https://stackoverflow.com/questions/541966/how-do-i-do-a-lazy-load-of-images-in-listview)

当您的应用程序启动时，显示一个没有图像的简单列表。然后启动一个后台线程来下载和创建位图。当线程完成其工作时 - 更新列表以显示加载的图像。

要完成这项工作，您应该创建一个自定义适配器。`DrawableManager`从[这个答案](https://stackoverflow.com/a/7861011/427225)中获取类（因为接受的答案中的类包含一些错误）并像这样编写适配器：

```
// You should create your own class instead of TestItem
public class TestAdapter extends ArrayAdapter<TestItem> {

   private final LayoutInflater mInflater;
   private final DrawableBackgroundDownloader mDrawableBackgroundDownloader = new DrawableBackgroundDownloader();

    public TestAdapter(Context context, List<TestItem> objects) {
        super(context, -1, objects);
        mInflater = LayoutInflater.from(context);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        final TestItem item = this.getItem(position);

        View view = convertView == null
                ? mInflater.inflate(R.layout.listview_layout, null)
                : convertView;

        TextView txtView = (TextView) view.findViewById(R.id.txt);
        TextView curView = (TextView) view.findViewById(R.id.cur);
        ImageView flagView = (ImageView) view.findViewById(R.id.flag);

        txtView.setText(item.getText());
        curView.setText(item.getCurrency());
        mDrawableBackgroundDownloader.loadDrawable(item.getFlagUrl(), flagView, null);

        return view;
    }
} 
```

可以通过将找到的元素存储在视图包中或使用不同的类来下载和缓存图像来改进此适配器。但为了简单起见，我将保持原样。

# objective-c - 无法定位 CCSprite 子类的实例

> ID：14075681
> 
> 赞同：0
> 
> 时间：2012-12-28T20:56:01.080
> 
> 标签：objective-c, cocos2d-iphone, ccsprite

我对 Objective-C 并不是很陌生，但我无法弄清楚这个问题。我正在尝试创建我创建的 CCSprite 子类的实例，但它总是在 (0,0) 处创建实例，我无法移动它。我已经设置了我的代码，以便它解析一个我在其中放置关卡信息的 .txt 文件，然后它根据该信息创建精灵。

这是初始化精灵的代码：

```
-(void)initLevel{

NSLog(@"Level %i is of length %i", lvlNum, [FileReader getLengthOfLevel:[FileReader getStartOfLevel:lvlNum atPath:lvlPack] atPath:lvlPack]);
CCSprite *spriteToMake;
int start = [FileReader getStartOfLevel:lvlNum atPath:lvlPack];
int length = [FileReader getLengthOfLevel:start atPath:lvlPack];

NSString *tmp = [FileReader getLineFromFile:lvlPack byIndex:start];
NSArray *tmpArray = [tmp componentsSeparatedByCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
NSMutableArray *tmpArray2 = [tmpArray mutableCopy];
[tmpArray2 removeObject:@""];

requiredLinks = [(NSString*)[tmpArray2 objectAtIndex:2] intValue];

[tmpArray2 release];

for(int i = start + 1; i <= start + length; i++){
    NSString *line = [FileReader getLineFromFile:lvlPack byIndex:i];
    int x = 0;
    int y = 0;

    NSArray *temp = [line componentsSeparatedByCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
    NSMutableArray *temp2 = [temp mutableCopy];
    [temp2 removeObject:@""];

    //Determine the type of sprite
    if([(NSString*)[temp2 objectAtIndex:0] isEqualToString:@"Basic_Sprite"]){
        spriteToMake = [BasicLink sprite];
    }else if([(NSString*)[temp2 objectAtIndex:0] isEqualToString:@"Big_Sprite"]){
        spriteToMake = [BasicLink spriteWithFile:@"Big_Link.png"];
    }else{
        spriteToMake = nil;
    }

    //Create the sprite
    if(spriteToMake != nil){
        x = [(NSString*)[temp2 objectAtIndex:1] intValue];
        y = [(NSString*)[temp2 objectAtIndex:2] intValue];
        spriteToMake.position = ccp(x, y);
        NSLog(@"%@", spriteToMake);

        [self addChild:spriteToMake];
        [spriteToMake setUpdate];
    }else{
        NSLog(@"Sprite set to NULL");
    }

    NSLog(@"%i, %i, %i", x, y, [temp2 count]);

    [temp2 release];
    }
} 
```

这是子类的标题：

```
@interface BasicLink : CCSprite{
CGPoint position;
CGPoint movement;
int explosionRadius, width, height;
CCScene *sceneIn;
}

@property (assign)CGPoint pos, movement;
@property (assign)int explosionRadius, width, height;
@property (assign)CCScene* sceneIn;

+(CCSprite*)sprite;
+(CCSprite*)spriteAtX:(int)x atY: (int)y;

-(void)die;
-(void)explode;
-(void)updateSprite;
-(CGRect)getBounds;
-(void)setUpdate;
-(void)move:(int)x, int(y);

@end 
```

这是初始化精灵的子类的一部分：

```
@implementation BasicLink

@synthesize position, movement, explosionRadius, sceneIn, width, height;

+(CCSprite*)sprite{
    return [BasicLink spriteWithFile:@"Basic_Link.png"];
} 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T21:21:52.350

这是一个明显的问题：

```
-(void)move:(int)x, int(y); 
```

在 C 中，[逗号是运算符](http://en.wikipedia.org/wiki/Comma_operator)。编译器将此语句解释为此方法声明：

```
- (void)move:(int)x 
```

我不完全确定它在做什么`int(y)`；它可能将其视为 C 函数声明。在任何情况下，它都不是方法声明的一部分。

您的移动声明应如下所示：

```
- (void)moveToX:(int)x andY:(int)y; 
```

* * *

另一个小错误是类方法的返回类型：

```
+(CCSprite*)sprite{
    return [BasicLink spriteWithFile:@"Basic_Link.png"];
} 
```

那应该是：

```
+ (BasicLink *)sprite{
    return [BasicLink spriteWithFile:@"Basic_Link.png"];
} 
```

不过，这可能不是您的问题。

# c# - 使用 jquery 遍历复选框表

> ID：14075683
> 
> 赞同：0
> 
> 时间：2012-12-28T20:56:09.417
> 
> 标签：c#, jquery, asp.net, asp.net-mvc, razor

我在我的 asp.net mvc 视图中有一个这样的表：

```
<table>
  <tr>
   <td>Option 1<td>
   <td>Option 2<td>
   <td>Option 3<td>
   <td>Option 4<td>
  <tr>
foreach(var options in Model)
 {
  <tr>
   <td>@Html.ChecBoxFor(x => x.one)<td>
   <td>@Html.ChecBoxFor(x => x.two)<td>
   <td>@Html.ChecBoxFor(x => x.three)<td>
   <td>@Html.ChecBoxFor(x => x.four)<td>
  <tr>
 }
<table> 
```

我试图弄清楚如何遍历每一行，然后有条件地切换某些复选框。例如，如果选中复选框 1，则确保未选中复选框 4，反之亦然。该条件将分别适用于复选框二和三。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T21:14:23.930

在 JSFiddle 中试过这个。陈词滥调看[演示](http://jsfiddle.net/WRQjQ/)

```
 $(function() {
    $("#btn").click(function() {
        $("tr").each(function() {
            var $RowCheckBoxes = $(this).find("input:checkbox");

            // if checkbox one is checked then make sure checkbox four is unchecked
            if ($RowCheckBoxes.eq(0).is(':checked') == true) {
                $RowCheckBoxes.eq(3).prop("checked", false);
            }

            // The conditon would apply to checkboxes two and three respectively.
            if ($RowCheckBoxes.eq(1).is(':checked') == true) {
                $RowCheckBoxes.eq(2).prop("checked", false);
            }
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T21:15:35.577

您不需要 jquery 来完成此基本任务，只需为您的复选框命名，然后：

```
var chk = document.getElementsByName("theName");
for(var i = 0; i < chk.length; i++){
  chk[i].whateverYouWant;
} 
```

# asp.net - 如何在 MVC 3 ASP.NET 的共享布局页面上使用两个模型？

> ID：14075684
> 
> 赞同：0
> 
> 时间：2012-12-28T20:56:09.077
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, razor, model

我有一个包含基本表格设置的主布局页面。我有一个用于放入 RenderBody() 的 Main Content 单元格。我有使用 Products 数据库的产品列表，并且右侧有一个需要访问 User 数据库的菜单。如何使用主要内容单元格中的产品模型列出我的产品，并使用用户模型在我的菜单单元格中列出信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T21:06:47.487

我使用的唯一方法（但我对它的最佳实践状态并不完全有信心）是为页面创建一个模型，其中包括（在你的情况下）`product`模型和`user`模型。在控制器中填充这些模型，然后像往常一样在视图中访问内部模型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T21:09:56.577

您可以使用部分来呈现内容部分。

想象一下你的页面使用这个模型：

```
public class PageModel {
    public string Title { get; set; }
    public ProductListModel Products { get; set; }
} 
```

然后你可以渲染你的局部视图并为此传递模型：

```
@Html.Partial( "name of partial view", Model.Products ) 
```

一种性能成本稍高的方法是调用一个动作来渲染局部视图：

```
public class ProductsController {
    public ActionResult List() {
        var model = new ProductListModel();
        return View( "your partial view", model );
    }
} 
```

在您看来：

```
@Html.Action( "list", "products" ) 
```

后一种方法的优点是您可以保持页面模型相对干净，因此它不必包含显示页面所需的所有数据。

# java - ChannelOption.SO_BACKLOG 有什么作用？

> ID：14075688
> 
> 赞同：35
> 
> 时间：2012-12-28T20:56:28.280
> 
> 标签：java, netty

```
.option(ChannelOption.SO_BACKLOG, 100) 
```

显示在 Netty 4 升级文档中。你能解释一下它的作用吗？

谢谢！

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-12-28T21:13:02.907

这是一个通过套接字选项确定排队的连接数。

*   [http://docs.oracle.com/javase/7/docs/api/java/net/ServerSocket.html](http://docs.oracle.com/javase/7/docs/api/java/net/ServerSocket.html)

> 传入连接指示（连接请求）的最大队列长度设置为 backlog 参数。如果队列满时有连接指示到达，则拒绝连接。

*   有关 netty 频道的更多信息：http: [//seeallhearall.blogspot.de/2012/06/netty-tutorial-part-15-on-channel.html](http://seeallhearall.blogspot.de/2012/06/netty-tutorial-part-15-on-channel.html)

# python - 子进程：执行两个或多个preexec_fn

> ID：14075690
> 
> 赞同：2
> 
> 时间：2012-12-28T20:56:35.877
> 
> 标签：python, function, call, subprocess

我想知道是否有一种方法可以创建一个连续调用两个（或更多）的[子](http://docs.python.org/2/library/subprocess.html)进程（通过） 。`subprocess.Popen``preexec_fn`

例如，调用`setegid`and `seteuid`（仅用于示例目的）。

到目前为止，我找到了这个解决方法（好吧......它有效，但它看起来不太......直接或“干净”）

```
#!/usr/bin/python2.7

import subprocess
import os

def preExecuter(listOfFunctions):
    for functionEntry in listOfFunctions:
        functionEntry["function"](* functionEntry.get("args", []), **functionEntry.get("kwargs", {}))

listOfFunctions = [
    {
        "function": os.setegid,
        "args": [1000],
    },
    {
        "function": os.seteuid,
        "args": [1000],
    },
]

if __name__ == "__main__":
    sp = subprocess.Popen(["whoami"], preexec_fn=preExecuter(listOfFunctions))
    sp.communicate() 
```

有没有更好的方法来做到这一点？先感谢您。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T21:19:59.590

这甚至行不通，因为对 preExecuter 的调用实际上执行了 setegid 和 seteuid 操作，并且在调用 Popen 之前完成。有什么问题

```
def my_pre_exec() :
    os.setegid(1000)
    os.seteuid(1000)

subprocess.Popen( ..., preexec_fn = my_pre_exec ) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-28T21:36:47.177

怎么样...

```
 subprocess.Popen( ..., preexec_fn = lambda : ( os.setegid(1000), os.seteuid(1000)) ) 
```

...大概是函数的返回值被丢弃了...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-28T21:28:26.790

如果您正在寻找一种推迟函数调用的通用方法：

```
def defer_call_to( func, *parms, **kwparms ):
    def caller():
        func( *parms, **kwparms)
    return caller 
```

现在你可以做

```
subprocess.Popen( ..., preexec_fn = defer_call_to( os.set_gid, 1000)) 
```

...因为 defer_call_to 返回一个函数，在调用时会执行延迟调用。

如果您想要多个，现在可以正常工作：

```
 sp = subprocess.Popen(["whoami"], preexec_fn=defer_call_to( preExecuter,listOfFunctions)) 
```

但是，像我的其他答案一样编写一个函数会更干净

# mysql - MySQL，按特定外键的出现次数过滤

> ID：14075695
> 
> 赞同：2
> 
> 时间：2012-12-28T20:56:57.143
> 
> 标签：mysql

我试图发现表中所有行多次出现的外键，并通过子查询返回这些外键。

在列上使用`GROUP BY`我能够可视化`COUNT`每个外键：

```
SELECT orders_id, COUNT(*) as count
FROM order_history
GROUP BY orders_id 
```

但是当我用 WHERE 子句增加它以尝试过滤时，如下所示：

```
SELECT orders_id, COUNT(*) as count
FROM order_history
GROUP BY orders_id
WHERE count > 1 
```

我收到一个错误

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'WHERE count > 1 LIMIT 0, 30' at line 4 
```

显然在评估`count`时没有资格进行比较？`WHERE`

**：发布答案更新：**

感谢您的快速回复！`HAVING`正是我所缺少的。我发现这个问题有助于扩展主题：[WHERE vs HAVING](https://stackoverflow.com/questions/2905292/where-vs-having)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T20:58:55.810

要将过滤应用于聚合值，如`COUNT(),SUM(),MAX(),MIN()`，请使用`HAVING`子句而不是`WHERE`.

```
SELECT orders_id, COUNT(*) as count
FROM order_history
GROUP BY orders_id
HAVING count > 1 
```

语法错误的原因是`WHERE`子句必须在`GROUP BY`子句之前。但是，即使它在正确的位置，它仍然会出错，因为在计算子句`count`时别名是未知的。`WHERE`

从[MySQL`SELECT`语法文档](http://dev.mysql.com/doc/refman/5.0/en/select.html)：

> HAVING 子句可以引用 SELECT 列表或外部子查询中的 select_expr 中命名的任何列或别名，以及聚合函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T21:00:12.390

你不能使用`where clause`with `group by clause`，在这种情况下你必须使用`having`

```
SELECT orders_id, COUNT(*) as count
FROM order_history
GROUP BY orders_id
having count > 1 
```

# java - 字符集编码问题 - Base64 到 GB2312 到 Base64

> ID：14075711
> 
> 赞同：0
> 
> 时间：2012-12-28T20:58:09.793
> 
> 标签：java, character-encoding, gb2312

我正在尝试使用 base64 显示和更新简体中文（GB2312）字符集，Base64 到 GB2312 工作正常，但我无法将 GB2312 转换为 base64

```
String str="17DP5Mqxx+vFxNXV";
Base64 base64=new Base64();
String gb2312=new String(base64.decode(str.getBytes()),"GB2312");
System.out.println("GB2312 = "+gb2312);

String baseString=new String(base64.encode(gb2312.getBytes()));
System.out.println("Base64 = "+baseString); 
```

**实际结果是**

GB2312 = 装箱时请拉客

Base64 =6KOF566x5pe26K+35ouN54Wn

**预期结果是**

GB2312 = 装箱时请拉客

Base64 = 17DP5Mqxx+vFxNXV

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-28T21:03:53.733

`getBytes()`将字符串转换为其 GB2312 编码时，应在调用中指定字符集：

```
String baseString=new String(base64.encode(gb2312.getBytes("GB2312"))); 
```

原则上（并且为了完全安全）您应该在从 Base64 ( `str.getBytes()`) 转换时执行此操作，但默认字符编码可能没问题，因为 base-64 编码使用 US-ASCII 的子集。谁知道——您可能在默认编码为 EBCDIC 的平台上运行。

# php - if(isset) 条件没有按预期停止 php

> ID：14075713
> 
> 赞同：0
> 
> 时间：2012-12-28T20:58:22.650
> 
> 标签：php, forms

我正在使用以下内容在 pdf 上放置签名。我表单上的 img、img2 和 img3 字段包含字符串形式的签名。只要所有 3 个字段都包含数据/签名，它就可以完美运行。如果有任何空白，脚本将在

```
file_put_contents($image, base64_decode($arr[1])); 
```

当我没有签署一个或多个签名时，Firebug 会确认没有为该字段发送任何 postdata。所以我必须在 php.ini 中做错了什么。

如果引用的字段为空，下面的代码不应该停止所有图像处理吗？

有没有不同的方法来实现这一点？

谢谢你的帮助！

```
require_once('fpdf/fpdf.php');
require_once('fpdi/fpdi.php');
$pdf = new FPDI('P', 'mm', 'Letter');
$pagecount = $pdf->setSourceFile($ffn);
for($i = 1 ; $i <= $pagecount ; $i++){
    $tpl  = $pdf->importPage($i);
    $pdf->AddPage();
    $pdf->useTemplate($tpl, 0, 0);
    if ($i==7) {
        if(isset($_POST['img'])){
            $hash = uniqid();
            $arr = explode(',',$_POST['img']);
            $image = dirname(__FILE__).'/results/sig'.$hash.'.png';
            file_put_contents($image, base64_decode($arr[1]));
            $pdf->Image($image,38,193,-200);
        };
        if(isset($_POST['img2'])){
            $hash2 = uniqid();
            $arr2 = explode(',',$_POST['img2']);
            $image2 = dirname(__FILE__).'/results/sig'.$hash2.'.png';
            file_put_contents($image2, base64_decode($arr2[1]));
            $pdf->Image($image2,38,217,-200);
        };
        if(isset($_POST['img3'])){
            $hash3 = uniqid();
            $arr3 = explode(',',$_POST['img3']);
            $image3 = dirname(__FILE__).'/results/sig'.$hash3.'.png';
            file_put_contents($image3, base64_decode($arr3[1]));
            $pdf->Image($image3,38,241,-200);
        };
    };
    if ($i==8) {
        $locmap = $_POST['_fid_209'];
        $pdf->Image('http://maps.googleapis.com/maps/api/staticmap?markers=color:blue%7Clabel:I%7C'.$locmap.'&zoom=14&size=800x800&sensor=false',63,90,90,0,'PNG');
    };
}
$pdf->Output($ffn, 'F'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T21:08:14.640

```
if(isset($_POST['img']) && !empty($_POST['img'])) { 
```

……

# html - 网页大小调整中断菜单项

> ID：14075715
> 
> 赞同：0
> 
> 时间：2012-12-28T20:58:32.633
> 
> 标签：html, css, web, webpage

我正在开发一个网站，问题是当我调整浏览器的大小（水平）时，我的菜单中的 HOME 链接被破坏了。很难用语言解释会发生什么，所以在这里查看：[http](http://www-user.tu-cottbus.de/~carbusor/Red%20Diamond/html/index.html) ://www-user.tu-cottbus.de/~carbusor/Red%20Diamond/html/index.html 。

灰色背景是一个图像，有一个右上角的切角。切割该区域后，我使该区域透明。所以，它是透明背景上的梯形。

我的问题是：如何防止梯形在调整大小时变成矩形？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T04:26:02.730

不要使用图像，而是在文件中创建您想要的形状。试试这个链接：

[使用区域形状属性](http://www.w3schools.com/tags/att_area_shape.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T22:10:15.560

如果你想要这样的东西。 ![在此处输入图像描述](../Images/6472369d9d46e319831faff885a73359.png)

如果钻石位于两个选项卡之间，那么您应该为您的 li 元素（全部）指定特定的宽度。不要为此使用百分比。像这样

```
 .menu > li#home {
 display: inline;
 float: left;
 background: none;
 background-image: url(../img/home.png);
 width: 273px;   /* same as your image size */
 } 
```

以及您的两个标题图像

```
img#logo {
position: absolute;
top: 10px;  /* Change it as it sets in the gap */
left: 250px; /* Change it as it sets in the gap */
width: 140px;
height: 90px;
} 
```

# ruby - Ruby aws-sdk：“无法在 S3 列表对象响应中找到标记”

> ID：14075719
> 
> 赞同：0
> 
> 时间：2012-12-28T20:58:53.817
> 
> 标签：ruby, amazon-web-services

我正在尝试遍历 AWS::S3::Tree 对象的子对象，如下所示：

```
conn = AWS::S3.new(:access_key_id => 'ACCESSKEYID', :secret_access_key => 'ACCESSKEY')
bucket = conn.buckets['bucketname']
tree = bucket.objects.with_prefix('assets/images').as_tree
directories = tree.children.select(&:branch?).collect(&:prefix) 
```

这在我用作前缀的大多数路径上都可以正常工作，但是一个文件夹（具有数万个子文件夹）会返回此错误：

```
/lib/aws/s3/object_collection.rb:311:in `next_markers': Unable to find marker in S3 list objects response (RuntimeError) 
```

我已经重写了 gem 方法来调试，如下所示：

```
module AWS
class S3
    class ObjectCollection
        protected
        def next_markers page

            raise page.inspect

            marker = (last = page.contents.last and last.key)
            if marker.nil?
                raise 'Unable to find marker in S3 list objects response xxxxx'
            else
                { :marker => marker }
            end
        end
    end
  end
end 
```

这将输出返回的数据：

```
{:delimiter=>"/", :contents=>[], :common_prefixes=>[{:prefix=>"assets/images/100/"}, {:prefix=>"assets/images/1000/"}, {:prefix=>"assets/images/1001/"}, etc etc 
```

为什么调用为 :contents 返回一个空数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T02:37:10.920

当来自 S3 的 XML 无效并且无法解析内容时，就会发生这种情况。如果您启用了线跟踪（将 :http_wire_trace => true 添加到 AWS::S3.new）并且您应该能够检查有问题的 http 响应正文。

# sqlite - 查找最近的日期

> ID：14075722
> 
> 赞同：3
> 
> 时间：2012-12-28T20:59:21.553
> 
> 标签：sqlite

我正在尝试运行一个查询，该查询将返回按最接近今天日期排序的行。

这是一些数据：

```
| 日期 |
|-----------|
|2012-12-02|
|2012-12-04|
|2012-12-10|
|2012-12-15|
|2012-12-29|
|2013-01-02|
|2013-01-04|

```

这是我的查询：

```
SELECT * FROM days
    ORDER BY ABS( strftime( "%s", date ) - strftime( "%s", 2012-12-28 ) ) ASC 
```

它只是以我在上面发布的相同顺序返回行，我想得到类似的结果

```
| 日期 |
|-----------|
|2012-12-29|
|2013-01-02|
|2013-01-04|
|2012-12-15|
|2012-12-10|
|2012-12-04|

```

我的日期字段是格式中的字符串`yyyy-MM-dd`（我不将其存储为时间戳是有原因的）。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T21:11:55.363

代码似乎有错误：

```
SELECT * FROM days
    ORDER BY ABS( strftime( "%s", date ) - strftime( "%s", 2012-12-28 ) ) ASC 
```

以这种方式编写，查询将显示刚刚按日期排序的结果。

原因：`2012-12-28`将被视为整数之间的算术运算。你应该写`'2012-12-28'`，以表明这是一个`date`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-26T17:07:15.227

您不必使用 strftime。

```
SELECT * FROM days
 WHERE date <= '2012-12-28'
    ORDER BY date ASC
    -- LIMIT 5 
```

# wcf - 在本地公司网络上托管 IIS 站点

> ID：14075726
> 
> 赞同：1
> 
> 时间：2012-12-28T20:59:40.430
> 
> 标签：wcf, iis, hosting

有 3 个人在从事一个项目，其中一个正在从事 wcf 服务，他是否可以在他的机器上本地创建一个 IIS 站点来托管该服务并允许其他成员访问他的服务/站点机器如果我们在我们公司共享网络上？我正在尝试查看在测试服务器上托管此服务的最佳方式，以便其他成员也可以在没有任何错误的情况下对其进行测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T21:27:54.773

哦，是的，这是托管 WCF 服务的最常见方式。在 WCF 服务的项目属性下，只需选择“Web”，然后选择“使用本地 IIS 服务器”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T21:30:43.627

直接回答你的问题：是的，这是可能的。我通过在本地笔记本电脑上托管一个网站来执行这个精确的设置。我们已经能够从同一网络上的数十台计算机成功访问该站点。

# android - 支持 Android 2.2 的集合小部件

> ID：14075727
> 
> 赞同：2
> 
> 时间：2012-12-28T20:59:55.660
> 
> 标签：android, android-widget

我的 Android 应用程序有一个 android:minSdkVersion="8" 我想保留它，但同时，对于运行 Android 3.0 及更高版本的用户，我想创建一个由集合备份的小部件。

按照此处的步骤[http://developer.android.com/guide/topics/appwidgets/index.html#collections](http://developer.android.com/guide/topics/appwidgets/index.html#collections) 我遇到了编译错误，因为我需要使用 API 级别 11 (RemoteViewsService) 中的类。

那么有没有办法做到这一点？为了让 Android 2.2+ 的用户可以使用该应用程序，但在其中为 Android 3.0+ 的用户构建一个小部件？这应该是可能的。 **GMail 做到了**，它适用于早期版本的 Android，但也为 Android 3.0+ 用户提供这种小部件。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T21:04:41.840

我认为也许以下关于 SO 的答案可以提供一些见解：

[Android Min SDK 版本与目标 SDK 版本](https://stackoverflow.com/a/4994039/1201423)

本质上，您可以定义两个变量：Min SDK 和 Target SDK。上面的链接将非常清楚地解释如何使用它们。

# c# - 模型在 MVC4 中没有 ListBoxFor 的值

> ID：14075729
> 
> 赞同：3
> 
> 时间：2012-12-28T20:59:57.063
> 
> 标签：c#, jquery, asp.net-mvc, razor, asp.net-mvc-4

我能够在 ListBoxFor 控件中显示从控制器到视图的值。但是，当我将值从一个列表框移动到另一个列表框并发布视图时，控制器端的模型不会保留列表框中的值。

## 这是我的模型

```
namespace MvcApplication1.Models
{
  public class EmployeeClass
  {
    public int EmpCode { get; set; }
    public string EmpName { get; set; }
  }

   public class EmployeeViewModel
  {
    public string Department { get; set; }
    public list<EmployeeClass> AvailalableEmployee { get; set; }
    public list<EmployeeClass> SelectedEmployee { get; set; }

    public int [] AvailableEmpCodeArray { get; set; }
    public int [] SelectedEmpCodeArray { get; set; }
  }
} 
```

## 这是我的控制器

```
namespace MvcApplication1.Controllers
{
    public class EmployeeController : Controller
    {
        public ActionResult EmployeeDisplayTool()
        {   
            EmployeeViewModel model = new EmployeeViewModel();

            model.Department = "Techology"
            model.AvailalableEmployee.Add(new Employee(1,"Emp1"));
            model.AvailalableEmployee.Add(new Scenario(2,"Emp2"));
            model.AvailalableEmployee.Add(new Scenario(3,"Emp3"));

            model.SelectedEmployee.Add(new Scenario(4,"Emp4"));
            model.SelectedEmployee.Add(new Scenario(5,"Emp5"));
            model.SelectedEmployee.Add(new Scenario(6,"Emp6"));
            return View(model);
        }
        [HttpPost]
        public ActionResult EmployeeDisplayTool(EmployeeViewModel model)
        {
            //model.Department is populated as "Technology"

            //All of the follownig collections are null.
            //model.AvailalableEmployee is null.
            //model.AvailableEmpCodeArray is null.

            //model.SelectedEmployee is null.
            //model.SelectedEmpCodeArray is null.
        }
    }
} 
```

## 这是我的视图和 JavaScript

```
@using (Html.BeginForm())
{
<table id="MainTable" border="0">  
<tr>
    <td colspan="3">
        @Html.TextBoxFor(m => Model.Department, new { id = "txtDepartment" })
    </td>
</tr>
<tr>     
    <td>
       @Html.ListBoxFor(m => Model.AvailableEmpCodeArray, new MultiSelectList(Model.AvailalableEmployee, "EmpCode", "EmpName", Model.AvailableEmpCodeArray), new { id = "lbxAvailableEmployees" })
    </td>         
    <td>
        <input type="button" id="btnSelectEmployee" value=" >> "/>
        <br/>
        <br/>
        <input type="button" id="btnUnSelectEmployee" value=" << "/>
    </td>
    <td>
         @Html.ListBoxFor(m => Model.SelectedEmpCodeArray, new MultiSelectList(Model.SelectedEmployee, "EmpCode", "EmpName", Model.SelectedEmpCodeArray), new { id = "lbxSelectedEmployees" })
    </td>         
</tr> 
</table>
}

<script type="text/javascript">
    $(document).ready(function() 
    {  
        $('#btnSelectEmployee').click(function(e) 
        { 
            var SelectedEmps = $('#lbxAvailableEmployees option:selected');  
            if (SelectedEmps.length == 0) 
            {  
                e.preventDefault();
            }
            $('#lbxSelectedEmployees').append($(SelectedEmps).clone());  
            $(SelectedEmps).remove();  
            e.preventDefault();  
        });  

        $('#btnUnSelectEmployee').click(function(e) 
        {  
            var SelectedEmps = $('#lbxSelectedEmployees option:selected');  
            if (SelectedEmps.length == 0) 
            {  
                e.preventDefault();  
            }  
            $('#lbxAvailableEmployees').append($(SelectedEmps).clone());  
            $(SelectedEmps).remove();  
            e.preventDefault();
        });  

    });
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T21:18:52.293

在您的`HttpPost`操作中，您不能期望`AvailalableEmployee`和`SelectedEmployee`集合被填充。这是由于 HTML 的工作原理。提交表单时，只有选定的值会发送到服务器。当您提交表单时，选择字段的文本值**永远不会发送到您的服务器。**

因此，您希望在此 HttpPost 操作中填充的只是 the`AvailableEmpCodeArray`和`SelectedEmpCodeArray`集合。它们将包含相应选择字段中**所选项目的值。**请注意，我已将**selected**加粗。这意味着只有当您选择相应框中的任何项目时，这些集合才会被绑定。如果您不选择任何内容，它们将保持为空，这是完全正常的。

这是一个没有选择任何内容的用户的示例。他只是使用`<<`和`>>`按钮来切换列表之间的值，但请注意绝对没有选择任何内容：

![在此处输入图像描述](../Images/37d5f8748358bf4c1ee9961dcfe805ca.png)

请注意如何**没有**选择任何内容？这就是您在控制器操作中获得的全部内容 -**没有**。

现在请与以下屏幕截图进行比较：

![在此处输入图像描述](../Images/118f964faef3b5bdf7e62af95ec140a9.png)

你看得到差别吗？请注意用户如何明确选择`Emp2`,`Emp5`和`Emp6`值（使用`Shift`键选择多个值）？这就是您要在 HttpPost 操作中获得的内容。该`AvailableEmpCodeArray`集合将包含一个值为 的元素，而 将包含两个值为和的`2`元素。`SelectedEmpCodeArray``5``6`

现在到你的第二个问题。如果您打算从 HttpPost 控制器操作中重新显示相同的视图，您需要确保的第一件事是您已为`AvailalableEmployee`和`SelectedEmployee`集合分配了值。这应该按照您在 HttpGet 操作中所做的相同方式完成：

```
model.AvailalableEmployee.Add(new Employee(1,"Emp1"));
model.AvailalableEmployee.Add(new Scenario(2,"Emp2"));
model.AvailalableEmployee.Add(new Scenario(3,"Emp3"));

model.SelectedEmployee.Add(new Scenario(4,"Emp4"));
model.SelectedEmployee.Add(new Scenario(5,"Emp5"));
model.SelectedEmployee.Add(new Scenario(6,"Emp6")); 
```

或者如果这些值来自数据库，您将不得不在 HttpPost 操作中重新查询该数据库，因为正如我已经解释过的，这些值永远不会从视图中绑定。

# jquery - 有没有办法让我的类覆盖 jQuery 主题的类？

> ID：14075730
> 
> 赞同：2
> 
> 时间：2012-12-28T21:00:05.630
> 
> 标签：jquery, css, jquery-ui

我对 jQuery 很陌生，并且有一个主题覆盖 CSS 类的问题。

这是我的 HTML 代码：

```
<head>
  .clicked
  {
    text-decoration: line-through !important;
    color: #000000; 
  }
</head>
...
<div data-role="collapsible" data-theme="b" data-content-theme="b" data-collapsed icon="arrow-r" data-expanded-icon="arrow-d">
  <ul data-role="listview" id="Key"></ul>
</div> 
```

这是我的 JS：

```
function WriteQuote(item) {
        $("#"+item).addClass(function(index, currentClass) {    
            if (currentClass.lastIndexOf("clicked") >= 0) {
                $("#"+item).removeClass("clicked");
                return; 
            }
            return "clicked";
        });
    } 
```

我计划使用toggleClass，因此此代码仅用于测试目的。在查看 Firebug 时，我认为这`a.ui-link-inherit`是首选并适用：

```
a.ui-link-inherit {
    text-decoration: none !important;
}
.clicked {
    color: #000000;
    text-decoration: line-through !important;
} 
```

有没有办法让我的类覆盖 jQuery 主题的类？我的目标是在用户单击给定的列表视图元素时切换“直通”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T21:06:43.910

主题的 CSS 规则适用，因为它比您的更具体。解决方案是为您的规则添加更多的特异性。

```
a.ui-link-inherit.clicked {
    color: #000000;
    text-decoration: line-through !important;
} 
```

演示：http: [//jsfiddle.net/wryE5/](http://jsfiddle.net/wryE5/)

# php - 用 PHP 生成 Nagios 报告

> ID：14075732
> 
> 赞同：1
> 
> 时间：2012-12-28T21:00:24.567
> 
> 标签：php, cgi, report, nagios

在 Nagios CGI 中有很多关于已定义服务的信息，这些信息在`status.dat`文件中不可用。例如`PERCENT_TOTAL_TIME_UP`。我的意思是解析`status.dat`不会显示任何有关服务可用性的信息。

如何在 PHP 中生成这些报告，以便检索有关服务可用性的信息？

# image-processing - 捕获在线视频流以进行图像处理

> ID：14075737
> 
> 赞同：1
> 
> 时间：2012-12-28T21:00:53.100
> 
> 标签：image-processing, opencv, video-streaming

我正在尝试捕获在线流媒体内容，逐个图像处理它们。我在 python 2.7 中为 openCV 中的图像编写了 API，我只是想扩展它，看看探索不同的可能性（当然选择最好的方法）来捕获和处理这些在线视频流。这可以在openCV中完成吗？如果不是（或更简单）任何其他替代方案（python 替代方案高度首选）？

谢谢阿杰

# javascript - AngularJS $scope 更新未反映在视图中

> ID：14075741
> 
> 赞同：3
> 
> 时间：2012-12-28T21:01:09.933
> 
> 标签：javascript, scope, angularjs

首先，如果我会感到困惑，我很抱歉，但我整个晚上都在解决这个问题，而且我已经阅读了几十个 SO 问题和 AngularJS 文章，所以我现在什至不确定我是否知道问题出在哪里:)

我有一个 ng-app，当我在控制器中为 的几个属性定义默认数据时`$scope`，当此数据稍后以编程方式更改时，视图将停止更新。

这是我的代码的一个简短示例：

```
...
config(['$routeProvider', function($routeProvider) {
$routeProvider.
    when('/abc/:letter', {templateUrl: template, controller: FilterCtrl}).
    otherwise({redirectTo: '/abc/a'});
}])
... 
```

控制器：

```
function FilterCtrl($scope, $http, $routeParams) {

    $scope.mainfilter = $routeParams.letter;
    $scope.listItems = $http.post($scope.url, {'filterType': 'abc', 'letter': $routeParams.letter});

    $scope.searchTitle = function(search) {
        $scope.mainfilter = 'Film: ';
        //just test code to see if the data changes, will be other http call actually
        $scope.listItems = $http.post($scope.url, {'filterType': 'abc', 'letter': 'n'});
    }
} 
```

定义视图的主要标记（Symfony2，请忽略树枝逻辑）：

```
 ...
    <div class="sort cell-1022 transparent-gray-back overflow-fix">

        <span class="sort--title">Search by</span>

        <select class="sort--selected chzn-select" ng-model="searchtitle" ng-change="searchTitle(searchtitle)">
            <option value="">film title</option>
            {% for id,title in titles %}
                <option value="{{ id }}">{{ title }}</option>
            {% endfor %}
        </select>

    </div>

</div>

<div class="divider transparent"></div>

<article class="wrapper">
    <div class="transparent-gray-back" ng-view>

    </div>

</article> 
```

模板的关键部分：

```
<div class="scroll-list nice-scrollbars" >

    <span class="heading">{{ mainfilter.toUpperCase() }}</span>
    <ul class="item-list">
        <li ng-repeat="item in listItems.data | orderBy:order | filter:filter">
            <a ng-click="getRelated(item._id)">{{ item.title }}</a>
        </li>
    </ul>

</div> 
```

**主要问题是，当我在那里有前 2 行控制器时，数据根据路由参数正确初始化，但在执行后`searchTitle()`它没有更新。当我删除前两行时，路由定义的数据不会被拉出（显然），但该`searchTitle()`方法正确地填充了`mainfilter`字段和重复`<li>`的 s。** 我很绝望，我建议范围有问题，但目前我的信息超载，非常感谢你的帮助，所以！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T21:46:42.847

将控制器的初始“状态”/默认值包装成一个函数，并在`$viewContentLoaded`事件帮助时调用它。这是我的修复：

```
$scope.$on('$viewContentLoaded', $scope.init);

$scope.init = function() {
    $scope.mainfilter = $routeParams.letter;
    $scope.listItems = $http.post($scope.url, {'filterType': 'abc', 'letter': $routeParams.letter});
} 
```

我仍然不知道为什么如果仅通过在控制器代码中分配值来设置默认数据会导致视图“卡”在该数据上，所以我愿意重新接受更好的答案，解释这个巫毒.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T21:29:29.590

你可以试试下面的吗？

更改您使用 $http.post 的方式（在两个地方）。尝试像这样使用它：

```
$http.post($scope.url, {'filterType': 'abc', 'letter': $routeParams.letter}).success(function(data) {
   $scope.listItems = data;
}); 
```

这意味着您的 ng-repeat 略有变化：

```
ng-repeat="item in listItems" 
```

# uiwebview - UIWebView 在横向查看时保持纵向尺寸

> ID：14075743
> 
> 赞同：0
> 
> 时间：2012-12-28T21:01:25.133
> 
> 标签：uiwebview, storyboard, xcode4.5, landscape, dimensions

我一直无法在任何地方找到解决此问题的方法。我正在使用 Xcode 4.5 使用情节提要编写 iOS 6 应用程序。它使用导航控制器在带有导航栏的多个视图控制器之间跳转，包括一些使用 UIWebView 显示网站的视图控制器。我已经向 AppDelegate 和各种 ViewController 文件添加了代码，以将应用程序中大多数场景的视图限制为纵向（因为否则它们看起来确实不太好），但允许网站的横向视图。Info.plist 配置为允许所有 4 个方向。

在 UIWebView 场景中一切正常；包括旋转，滚动和缩放 - 除了一件事：当我从纵向旋转到横向时，网站的水平尺寸保持锁定在纵向视图的水平尺寸 - 导致网站右侧有很大的空白区域场景（见下图）。我通过在 Attributes Inspector 中的 View Controller 下选择 Layout: Wants Full Screen 在 UIWebView 顶部修复了一个小的 (1/4") 空白区域。但我无法解决这个问题。

如有必要，我可以提供相关代码或 Storyboard 设置。任何人都可以帮忙吗？谢谢你。

![纵向视图](../Images/e2e93bb0019cb97d241ff111f38a9748.png)

![风景](../Images/7d8b5a3ac584807680780b240e2364ba.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T06:51:58.993

当应用程序在 viewDidLoad 方法上加载时，我解决了添加此代码的问题：

```
[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
 [[NSNotificationCenter defaultCenter]
     addObserver:self selector:@selector(orientationChanged:)
     name:UIDeviceOrientationDidChangeNotification
     object:[UIDevice currentDevice]]; 
```

然后将其添加到您的视图控制器：

```
- (void) orientationChanged:(NSNotification *)note
{
    UIDevice * device = note.object;
    switch(device.orientation)
    {
        case UIDeviceOrientationPortrait:
            _displayWeb.frame = CGRectMake (0, 0, 768, 1024);
            break;

        case UIDeviceOrientationPortraitUpsideDown:
            _displayWeb.frame = CGRectMake (0, 0, 768, 1024);
            break;
        case UIDeviceOrientationLandscapeLeft:
                _displayWeb.frame = CGRectMake (0, 0, 1024, 768);
            break;
        case UIDeviceOrientationLandscapeRight:
            _displayWeb.frame = CGRectMake (0, 0, 1024, 768);
            break;
        default:
            break;
    };
} 
```

_displayWeb 是您的 IBOutlet UIWebView，顺便说一下，这是使用 Xcode 4.6.1

# .net - 如何使 Windows 窗体控件响应 DirectShow 消息？

> ID：14075744
> 
> 赞同：1
> 
> 时间：2012-12-28T21:01:31.387
> 
> 标签：.net, winforms, event-handling, directshow

我正在使用 Windows 窗体构建一个带有播放列表的简单视频播放器。播放列表是一个 ListBox 控件，我使用 DirectShow.NET 库在 PictureBox 控件上播放视频。

一旦图片框中加载的视频停止播放，我需要我的播放列表做出响应（开始播放下一个视频）。我了解 DirectShow 会在媒体播放完毕后发送消息 EC_COMPLETE。（在 DS.NET 库中，这是一个简单地称为“EventCode.Complete”的枚举）

如何构造一个触发事件，以便我的播放列表在 EC_COMPLETE 消息触发时做出响应？我整天都在重新阅读 MSDN、Stack Overflow 和其他各种在线地方上的事件、委托和事件处理，但一切似乎都针对处理已内置于 .NET 中的事件。例如，按钮点击等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T21:58:25.600

DirectShow.NET 示例为您提供了如何`EC_COMPLETE`捕获和处理的示例。

例如，`PlayWnd`样本和`\Samples\Players\PlayWnd\MainForm.cs`文件：

```
 private void HandleGraphEvent()
    {
// ...
      // Process all queued events
      while(this.mediaEventEx.GetEvent(out evCode, out evParam1, out evParam2, 0) == 0)
      {
// ...
        if(evCode == EventCode.Complete)
        { 
```

该代码是响应感兴趣的事件而执行的。初始化包括向过滤器图形管理器 (FGM) 提供（其中一种方法）您的窗口句柄，以便在事件可用时发布窗口消息。然后示例中的 C# 代码显示了如何处理它`WndProc`并将其传递到上面引用的片段。

这是在 FGM 上启用整个事件发布的方式：

```
 // Have the graph signal event via window callbacks for performance
  hr = this.mediaEventEx.SetNotifyWindow(this.Handle, WMGraphNotify, IntPtr.Zero); 
```

# php - GCM 服务器返回空值

> ID：14075746
> 
> 赞同：2
> 
> 时间：2012-12-28T21:01:47.750
> 
> 标签：php, android, google-cloud-messaging

我正在尝试在我的应用程序中实现 Google Cloud Messaging。我仍然无法弄清楚为什么我的手机没有收到正确的消息。我的服务器发送一条消息，GCM 服务器对此作出响应并将一条消息发送回我的手机。这条消息如下所示

```
{\"multicast_id\":8186678237008516542,\"success\":1,\"failure\":0,\"canonical_ids\":0,\"results\":[{\"message_id\":\"0:1356727074650189%12aaaeccf9fd7ecd\"}]}" 
```

我认为这意味着我收到一条消息，问题是我的应用程序只显示空值。我现在正在使用 Browser Api 密钥并获得这些结果，但我尝试使用服务器密钥（理论上更适合我的需要），但我收到错误 401。

为了接收消息，我使用广播接收器

```
 public void onReceive(Context context, Intent intent){

String newMessage = intent.getExtras().getString(EXTRA_MESSAGE);} 
```

EXTRA_MESSAGE = 消息

这是我在服务器中使用的代码。

```
$fields = array(
        'registration_ids' => $registatoin_ids,
        'data' => $message,
    );

    $headers = array(
        'Authorization: key=' . GOOGLE_API_KEY,
        'Content-Type: application/json'
    );
    // Open connection
    $ch = curl_init();

    // Set the url, number of POST vars, POST data
    curl_setopt($ch, CURLOPT_URL, $url);

    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

    // Disabling SSL Certificate support temporarly
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);

    curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($fields)); 
```

有谁知道可能是什么问题？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-23T13:37:33.000

我认为您的响应字符串名称不匹配，因此请检查您的响应字符串名称。我在我的服务器端代码和我的 android 端代码中使用它作为“价格”。你可以在下面的图片中看到它。

服务器端文件：send_message.php

[![在此处输入图像描述](../Images/a28952af881ed252e996d171e6fdda98.png)](https://i.stack.imgur.com/thjbl.png)

应用程序端文件：GCMNotificationIntentService

```
public static final int NOTIFICATION_ID = 1;
private NotificationManager mNotificationManager;
NotificationCompat.Builder builder;

public GCMNotificationIntentService() {
    super("GcmIntentService");
}

public static final String TAG = "GCMNotificationIntentService";

@Override
protected void onHandleIntent(Intent intent) {
    Bundle extras = intent.getExtras();
    GoogleCloudMessaging gcm = GoogleCloudMessaging.getInstance(this);

    String messageType = gcm.getMessageType(intent);

    if (!extras.isEmpty()) {
        if (GoogleCloudMessaging.MESSAGE_TYPE_SEND_ERROR
                .equals(messageType)) {
            sendNotification("Send error: " + extras.toString());
        } else if (GoogleCloudMessaging.MESSAGE_TYPE_DELETED
                .equals(messageType)) {
            sendNotification("Deleted messages on server: "
                    + extras.toString());
        } else if (GoogleCloudMessaging.MESSAGE_TYPE_MESSAGE
                .equals(messageType)) {

            for (int i = 0; i < 3; i++) {
                try {
                    Thread.sleep(5000);
                } catch (InterruptedException e) {
                }

            }
            sendNotification("Message Received from Google GCM Server: "
                    + extras.get("price"));
        }
    }
    GcmBroadcastReceiver.completeWakefulIntent(intent);
}

private void sendNotification(String msg) {
    //Log.d(TAG, "Preparing to send notification...: " + msg);
    mNotificationManager = (NotificationManager) this
            .getSystemService(Context.NOTIFICATION_SERVICE);

    PendingIntent contentIntent = PendingIntent.getActivity(this, 0,
            new Intent(this, MainActivity.class), 0);

    NotificationCompat.Builder mBuilder = new NotificationCompat.Builder(
            this).setSmallIcon(R.drawable.gcm_cloud)
            .setContentTitle("GCM Notification")
            .setStyle(new NotificationCompat.BigTextStyle().bigText(msg))
            .setContentText(msg);

    mBuilder.setContentIntent(contentIntent);
    mNotificationManager.notify(NOTIFICATION_ID, mBuilder.build());
    //Log.d(TAG, "Notification sent successfully.");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T21:32:33.577

调整你的代码

```
'data' => $message, 
```

变成这样：

```
'&data.message=' => $message, 
```

并且您在 GCMIntentService 中的 onMessage() 方法应该如下所示：

```
protected void onMessage(Context ctx, Intent intent) {
        // TODO Auto-generated method stub
        String message =intent.getStringExtra("message");;

    } 
```

# apache - 设置虚拟主机，不能再访问http://localhost

> ID：14075754
> 
> 赞同：3
> 
> 时间：2012-12-28T21:02:45.680
> 
> 标签：apache, virtualhost

我已经在 WAMP 上设置了一个虚拟主机。地址是`http://privatesite`（有效）

但是，现在我已经设置了这个虚拟主机，默认的 localhost 不起作用，我不知道如何纠正它。

我的主机文件如下所示：

```
# Copyright (c) 1993-2009 Microsoft Corp.
#
# This is a sample HOSTS file used by Microsoft TCP/IP for Windows.
#
# This file contains the mappings of IP addresses to host names. Each
# entry should be kept on an individual line. The IP address should
# be placed in the first column followed by the corresponding host name.
# The IP address and the host name should be separated by at least one
# space.
#
# Additionally, comments (such as these) may be inserted on individual
# lines or following the machine name denoted by a '#' symbol.
#
# For example:
#
#      102.54.94.97     rhino.acme.com          # source server
#       38.25.63.10     x.acme.com              # x client host

# localhost name resolution is handled within DNS itself.
#   127.0.0.1       localhost
#   ::1             localhost

127.0.0.1     localhost
127.0.0.1     privatesite 
```

我的 Apache`httpd-vhosts.conf`文件如下所示：

```
#
# Virtual Hosts
#
# If you want to maintain multiple domains/hostnames on your
# machine you can setup VirtualHost containers for them. Most configurations
# use only name-based virtual hosts so the server doesn't need to worry about
# IP addresses. This is indicated by the asterisks in the directives below.
#
# Please see the documentation at 
# <URL:http://httpd.apache.org/docs/2.2/vhosts/>
# for further details before you try to setup virtual hosts.
#
# You may use the command line option '-S' to verify your virtual host
# configuration.

#
# Use name-based virtual hosting.
#
#NameVirtualHost *:80

#
# VirtualHost example:
# Almost any Apache directive may go into a VirtualHost container.
# The first VirtualHost section is used for all requests that do not
# match a ServerName or ServerAlias in any <VirtualHost> block.
#
<VirtualHost *:80>
    DocumentRoot "c:/wamp/www/privatesite/trunk/"
    ServerName privatesite
    ServerAlias privatesite
</VirtualHost>

<VirtualHost *:80>
    DocumentRoot "c:/wamp/www/"
    ServerName localhost
    ServerAlias localhost
</VirtualHost> 
```

如您所见，我试图“重置”本地主机，但是，现在看来，这一切似乎都指向了我的“privatesite”文件夹。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T22:22:32.623

VirtualHost *:80 就像一个包罗万象的东西。您需要将“privatesite”命名为其他名称，或者为 localhost 或 127.0.0.1 添加 NameVirtualHost 条目。

[http://httpd.apache.org/docs/2.2/vhosts/examples.html](http://httpd.apache.org/docs/2.2/vhosts/examples.html)

# html - html/css 编辑未在不同浏览器中更新

> ID：14075756
> 
> 赞同：0
> 
> 时间：2012-12-28T21:02:48.080
> 
> 标签：html, css

如果这个问题看起来很空洞，我提前道歉。然而，这对我很重要，我很难找到一个现有的问题，主要是由于句法上的困难。

我正在开发一个网站并将 MAMP/MySQL 设置为在 localhost:8888 中工作。这已经工作了好几个月了，但最近我注意到在我编辑我的页面并重新加载它是在 FF 之后，页面没有完全更新。例如，页面的 CSS 已更新，但链接到我的“关于页面”的链接之一链接到我的“关于页面”的旧版本。然后我会尝试 Chrome 和 Safari，页面可能还可以，但有时不行。或者，如果我等待或尝试多次加载页面，它将正确加载。

在考虑设计的效率和一致性时，这是非常令人沮丧的。可能发生了什么，或者我的 htdocs 文件夹太满了？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T21:13:40.170

应该是缓存问题。在大多数浏览器中，您可以停用它。例如，在 Safari 中，您必须在首选项 > 高级中激活开发者菜单。在开发者菜单中点击禁用缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T21:13:55.387

简单的解决方案：按`ctrl + shift + delete`它的浏览器快捷方式来删除历史记录。删除完整的缓存、cookie 等，然后尝试重新加载页面。

# c# - Selenium [Javascript 应用程序] 错误

> ID：14075759
> 
> 赞同：0
> 
> 时间：2012-12-28T21:03:04.550
> 
> 标签：c#, firefox, selenium, selenium-webdriver

我有以下代码：

```
 driver = new FirefoxDriver();
       // driver = new InternetExplorerDriver(); 
```

InternetExplorerDriver 工作正常（使用 .exe），但使用 Firefox 驱动程序时，我得到一个明显的 JavaScript 错误，我缺少什么导致此弹出窗口的任何想法？只要我在每个弹出窗口上单击“确定”，从技术上讲，测试将工作几秒钟，但测试很快就会失败并退出。

弹出窗口（无法发布图片）
标题：[JavaScript 应用程序]
消息：错误：语法错误
按钮：确定

我尝试过使用 FireFoxProfile 和 FirefoxBinary 的不同选项，但这似乎也不是正确的方向。我不确定最新版本的 firefox 是否导致了问题 (17)，或者我是否需要在 IEdriver 等解决方案中专门使用 exe 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T18:35:06.387

你的 Selenium 版本是什么？我假设您正在使用 WebDriver？当前版本是 2.28.0 [Selenium 下载](http://seleniumhq.org/download/.)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T06:05:59.240

Firefox 不需要像 IE 和 chrome 那样的单独驱动程序。虽然我在网上发现了很多与您的错误相同的帖子..所以似乎是 17 版本的问题。您可以降级您的 ff 版本或查看以下线程中的选项（免责声明：我没有尝试过以下 :)）

[http://support.mozilla.org/en-US/questions/944619](http://support.mozilla.org/en-US/questions/944619)

[http://support.mozilla.org/en-US/questions/942417](http://support.mozilla.org/en-US/questions/942417)

# android - 导出android库项目以供重用，无需源代码

> ID：14075760
> 
> 赞同：3
> 
> 时间：2012-12-28T21:03:13.083
> 
> 标签：android, library-project

出于安全原因，我需要在没有源代码的情况下导出库项目。不幸的是，库项目中生成的 jar 文件不包含资源。我不能指望这个图书馆的用户处理图书馆需要的任何资源。

有与此类似的帖子，但我还没有看到解决方案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-28T21:17:01.403

以下配方曾经有效，尽管我最近没有尝试过：

第 1 步：让库项目按原样工作。我将保存这个项目的目录称为`$ORIG`.

第 2 步：如果您还没有这样做，请`$ORIG`使用`android update project`.

步骤#3：添加一个`$ORIG/build.xml`创建 JAR 文件的任务，例如：

```
<target name="jar" depends="debug">
  <jar
      destfile="bin/YOUR-LIBRARY-NAME-GOES-HERE.jar"
      basedir="bin/classes"
  />
</target> 
```

第 4 步：将整个库项目从另一个目录复制`$ORIG`到另一个目录，我将其命名为`$DIST`.

步骤#5：除去根目录本身*之外*`src/`的树。`$DIST` *`src/`*

 *第 6 步：`bin/YOUR-LIBRARY-NAME-GOES-HERE.jar`进入`$DIST/libs/`. 这有效地将您的源代码替换为`src/`已编译的等效代码。

步骤#7：摆脱它，`$DIST/bin/`因为它不再需要。

`$DIST`现在拥有一个相当于 的 Android 库项目`$ORIG`，只是`src/`树被替换为`libs/YOUR-LIBRARY-NAME-GOES-HERE.jar`.

由于 SDK 管理器中的 Google Play 服务包是以这种方式打包的，因此我不仅认为该方法仍然有效，而且似乎得到了官方的合理认可。

请注意，正在开发的新构建系统可能会为我们提供更多选择。如果您在 2014 年阅读此问题，请务必检查是否有更好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T21:11:42.250

我听说过的一个想法是使用一个常规库项目并引用一个 Jar 文件，您可以在其中放置所有专有代码。所有资产都需要在您的库项目中，并且可以由您的库的用户读取。请记住，任何使用[apktool](http://code.google.com/p/android-apktool/)的人都可以从最终的 APK 中提取这些文件。

但是，JAR 中的代码将不可读，并且您的用户需要对它们进行逆向工程，这可能很困难，尤其是在您对其进行混淆的情况下。*

# asp.net - 带参数的基本 ASP.NET MVC 查询

> ID：14075761
> 
> 赞同：0
> 
> 时间：2012-12-28T21:03:16.630
> 
> 标签：asp.net, asp.net-mvc, entity-framework, razor

一般来说，我是 ASP.Net MVC 和 MVC 架构的新手。我正在使用 Database Code First 方法构建一个简单的应用程序。

我有一个带有名为的属性的食谱模型，`cookId`它是创建食谱的用户的 ID。

现在，我希望能够将查询字符串传递到我的页面，并仅获取 cookId 与参数相同的食谱并在我的视图中列出 i。

我怎样才能做到这一点？我应该把这个逻辑放在哪里？在我的`controller`还是在我的`view`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T21:17:11.933

好吧，asp.net mvc 与路由或 TableRoutes 一起使用。默认路由使用以下格式创建：`{controller}/{action}/{id}`.

因此，当您收到有关您的操作的请求时，您可以从`id`您的操作（在控制器上）的参数中检索此 ID，并使用此值访问您的数据库并获取您需要在视图上显示的所有记录。你可以尝试这样的事情：

```
public ActionResult Recipes(string id)
{
   IEnumerable<Recipe> list = _repository.GetRecipeByCookId(id); // this method should return list of Recipes

   return View(list); // return your View called "Recipes" passing your list
} 
```

您也可以`Request.QueryString["Id"]`用来获取 Id，但这在 asp.net mvc 中不是一个好习惯。您可以在操作中使用参数并使用它。

在您的视图中，您可以使用 键入它并将其`IEnumerable<Recipe>`显示在表格上，例如：

```
@model IEnumerable<Recipe>

<table>
    @foreach(var recipe in Model)
    {
        <tr>
            <td>@recipe.Name</td>           
            <td>@recipe.CookId</td>
            <td>@recipe.OtherProperties</td>
        </tr>
    }
</table> 
```

要为请求创建一个传递此 id 的链接，您可以使用`Html.ActionLink`，例如在您的视图中：

```
@Html.ActionLink("Text of You Link", "Action", "Controller", new { id = 5, another = 10 }, new { @class = "css class for you link" }); 
```

并且 asp.net mvc 将`a`在 global.asax 上设置的路由表之后呈现具有专用路由的标签。如果您有其他参数要传入查询字符串，您也可以像我在带有`another`参数的示例中那样添加它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T21:10:41.063

**永远不要**把逻辑放在视图中。视图应该简单地显示模型中提供的信息。将逻辑放入控制器中。

控制器：

```
[HttpGet]
public ActionResult Recipes(int cookId)
{
     var recipes = /* get recipes based on cook */;
     List<RecipeModel> model = recipes
         .Select(r => new RecipeModel
         { 
            Id = r.Id,
            CookId = r.CookId,
            ...
         })
         .ToList();
     return View(model);
} 
```

看法：

```
@model List<RecipeModel>

@foreach (RecipeModel item in Model)
{
    <div>
        <span>Id:</span>
        <span>@item.Id</span>
    </div>
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T21:14:58.250

控制器：

```
[HttpGet]
public ActionResult GetRecipes(int cookId)
{
    // model can view a List<Recipe>, logic goes here
    var model = SomeQueryThatReturnsRecipesFrom(cookId);
    return View(model)
} 
```

视图（例如views\yourController\GetRecipes.cshtml），只用这个文件来展示数据，不推荐把逻辑放在这里：

```
@model List<Namespace.Recipe>

<h2>Recipes</h2>

@foreach(var r in Model)
{
    <p>r.Name</p>
} 
```

这将使用以下查询字符串调用：

```
/Recipes/GetRecipes?cookId=SomeId 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-28T21:45:41.337

你可能有一个 CooksController。该控制器将返回厨师列表。该列表可能包括厨师食谱的链接。您的 RecipesController 可以处理对给定 cookId 的所有食谱的请求。

```
@Html.ActionLink("Recipes", "RecipesByCook", "Recipes", new { cookId = model.cookId }, null}; 
```

上面的代码在视图 Cooks/Index.shtml 中使用。它会创建一个链接，该链接使用查询字符串来识别您想要的 cookId。

然后，RecipesController 将有一个 RecipiesByCook 方法，该方法接受 cookId 的参数。此方法将处理对这样的 URL 的请求，Home/Recipies/RecipeByCook?cookId=4。

然后，RecipesController 可以返回一个 ActionResult，其中包含要显示的正确食谱集。非常简单（因为您可能想要添加更多以显示视图，例如有关厨师的信息）：

```
 public ActionResult RecipesByCook(int cookId)
    {
        var recipes = repository.Recipes.Where(r => r.cookId == cookId);

        return View(recipes);
    } 
```

# ios - Xcode 存档未创建 DSYM 文件

> ID：14075764
> 
> 赞同：25
> 
> 时间：2012-12-28T21:03:32.320
> 
> 标签：ios, xcode, archive, debug-symbols, dsym

对于我的大多数项目，我设置了一个“归档”方案来归档我的项目，创建一个可以上传到 TestFlight 的 IPA 和 DSYM。

但是，我正在处理一个更复杂的项目，该项目在项目工作区中有多个目标，相当多的静态链接库。我已经检查了每个目标并为所有配置设置了以下内容：

*   部署后处理 -> 否
*   剥离链接产品... -> 否
*   剥离调试... -> 否
*   生成调试符号 -> 是
*   调试信息... -> DWARF with DSYM

我正在使用 Xcode 4.5.2。我已经为许多没有问题的项目做到了这一点。这是第一个似乎阻止创建 DSYM 文件的地方。

无论我尝试什么，我的存档构建都不会生成 .DSYM 文件

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-07-14T15:06:16.167

**识别问题**

正如@belsokar 建议的那样，检查报告导航器。就我而言，dSYM 文件尚未生成，也没有相应的行，`"Generate Appname.dSYM ...in {path}"` 但已安装 Fabric，它记录了 dSYM 文件不存在的事实：

[![没有动态符号](../Images/15569bfce543fe770689bd851d59f867.png)](https://i.stack.imgur.com/ARamh.png)

只需通过“dSYM”提交报告导航器。

**定影**

就我而言，我只需要做我被要求做的事情：

> 对于所有配置，DEBUG_INFORMATION_FORMAT 应设置为 dwarf-with-dsym。

此外，可能会在意外的地方生成 dSYM 文件。检查环境变量，尤其是`DWARF_DSYM_FOLDER_PATH`和`DWARF_DSYM_FILE_NAME`.

要将 dSYM 嵌入应用程序包中，只需设置`DWARF_DSYM_FOLDER_PATH`为`$(CONFIGURATION_BUILD_DIR)/$(EXECUTABLE_FOLDER_PATH)`和`DWARF_DSYM_FILE_NAME``$(EXECUTABLE_NAME).dSYM`

**检查**

现在构建应该为您的目标创建 dSYM

[![生成target.dSYM](../Images/ff6b66ee9e52c3bc78df5cc5f148c088.png)](https://i.stack.imgur.com/NQR5p.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-04-27T10:50:31.730

`xcode - > product -> Archive`

你看到档案窗口

1 选择您的应用程序的任何档案右键单击它然后选择在查找器中显示

2 你看到aapname.xcarchive 文件右键点击它并选择show package contents

3 你看到 dSYMs 文件夹打开它并获取`.dSYM`文件

:)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-05-22T02:01:31.790

尝试使用：部署后处理-> YES

看看这个：http: [//developer.apple.com/library/mac/#documentation/DeveloperTools/Reference/XcodeBuildSettingRef/1-Build_Setting_Reference/build_setting_ref.html](http://developer.apple.com/library/mac/#documentation/DeveloperTools/Reference/XcodeBuildSettingRef/1-Build_Setting_Reference/build_setting_ref.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T09:12:39.160

一些研究技巧。

*   检查日志导航器。我进入了这个视图（我很少使用，所以我倾向于忘记它的存在），我意识到实际上正在创建 .DSym 文件。

*   检查构建目录配置以查看它们是默认的还是自定义的……在我的情况下，它们是自定义的，因此它们没有被放置在典型的默认位置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-21T06:00:19.673

`DWARF_DSYM_FILE_SHOULD_ACCOMPANY_PRODUCT=YES`将 .dsym 文件复制到我项目中的存档中。

另外，我没有更改默认值`DWARF_DSYM_FOLDER_PATH`或`DWARF_DSYM_FILE_NAME`值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-30T20:05:50.637

如主要答案中所述， dSYM 的值`DWARF_DSYM_FOLDER_PATH`决定了 dSYM 的去向。默认值为`$(CONFIGURATION_BUILD_DIR)`，因此如果您有自定义`CONFIGURATION_BUILD_DIR`设置，它可以更改 DWARF_DSYM_FOLDER_PATH 以便 dSYM 不会被复制到 .xcarchive 中。我还发现自定义`SYMROOT`设置也可以更改路径，并且可能还有其他一些设置覆盖。

通常在归档构建期间，CONFIGURATION_BUILD_DIR 和 DWARF_DSYM_FOLDER_PATH 值将位于“ArchiveIntermediates”文件夹下的某个位置，其内容可能会复制到最终的 .xcarchive。

如果您可以避免覆盖这些设置，那可能会更可取，否则 DWARF_DSYM_FOLDER_PATH 可能还必须被覆盖以指向正确的位置，或者需要一个后期构建步骤来将 .dSYM 文件夹从它们最终的位置复制到XXX.xcarchive/dSYMS 文件夹。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-11-06T05:58:36.103

这是解决方法帮助我：

1.  登录 iTunes Connect 并转到我的应用程序。
2.  单击您尝试下载 dSYM 的应用程序以转到“活动”选项卡。
3.  单击要展开的版本并显示所有上传的构建。
4.  单击所需的构建。
5.  您将看到有关该构建的详细信息，以及在“包含符号”标题下的右下角下载 dSYM 的选项。

# idl - d2d1.h 的源文件在哪里？

> ID：14075767
> 
> 赞同：1
> 
> 时间：2012-12-28T21:04:12.117
> 
> 标签：idl, winapi, direct2d

包含它们的 Windows SDK 的前几行`d2d1.h`（例如标记为 v7.1 的那一行）如下：

```
//---------------------------------------------------------------------------
// Copyright (c) Microsoft Corporation.  All rights reserved.
//
// This file is automatically generated.  Please do not edit it directly.
//
// File name: D2D1.h
//--------------------------------------------------------------------------- 
```

这表明某处应该有一些源文件。它是否像许多 IDL 文件一样包含在 SDK 中？我找不到任何类似的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T20:28:57.997

它不包含在 SDK 中。据我所知，它不是公开的，如果它甚至存在的话（就像你一样，我假设它是从头文件中的那个简介中得到的）。

# java - 在 java 中的 setter 的帮助下输入数组（已编辑）

> ID：14075769
> 
> 赞同：1
> 
> 时间：2012-12-28T21:04:26.820
> 
> 标签：java, input, setter

我想在 setter 的帮助下在数组中输入一些名称......这是我的代码......你能帮我怎么做吗？预先感谢。

//这是带有输入语句的类myclass //我的问题是程序说线程“main”中的异常java.lang.NullPointerException //at studentproject.MyClass.AddList(MyClass.java:27) //at studentproject.Main。 main(Main.java:20) // Java Result: 1 //我的程序哪里有问题？？？

```
public class MyClass
{
     Student St = new Student();

     Student[]Array1 = new Student[10];
     Student[]ArrayF1 = new Student[10];

     void AddList()
     {

            Scanner Scan = new Scanner(System.in);

            for (int i=0; i<Array1.length & i<ArrayF1.length; i++)
            {
                System.out.println("Enter Student NAME Number " + (i+1) + ":");
                Array1[i].setName(Scan.next());

                //System.out.println("Enter Student MARK Number " + (i+1) + ":");
                //St.setMark(Scan.nextFloat());
            }

    }

} 
```

// 这是我的学生类，所有的 setter 和 getter

```
public class Student
{
private String Name;
private float Mark;

/**
 * @return the Name
 */
public String getName() {
    return Name;
}

/**
 * @param Name the Name to set
 */
public void setName(String Name) {
    this.Name = Name;
}

/**
 * @return the Mark
 */
public float getMark() {
    return Mark;
}

/**
 * @param Mark the Mark to set
 */
public void setMark(float Mark) {
    this.Mark = Mark;
} 
```

另一个问题是当我想打印数组时，打印数组的内存地址，而不是数组的值......我的问题在哪里......打印的内容是这样的......输入学生姓名编号 10：dddddd“studentproject .学生@1b67f74"

```
 void PrintList()
    {

            for (int i=0; i<Array1.length; i++)
            {

                System.out.println(Array1[i]);

            }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T21:05:37.317

```
 Student[]Array1 = new Student[10]; 
```

填充`Array1`10`null`个条目。

和

```
Array1[i].setName(Scan.next()); 
```

将调用which结果`setName...`。`null``NullPointerException`

解决此问题的一种方法是：

```
1) Create new Student object inside for loop
2) call setName... on object created in step1
3) Set object to array index. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T21:07:24.517

在 Java 中，数组是对象，因此当您编写时：

`String[] asdf = new String[size];`

您不会创建`String`存储在数组中的十个对象，而只会创建数组的对象，并将其所有元素（引用）设置为`null`.

你应该做的是`Student`在设置它的属性之前创建对象：

```
 Array1[i] = new Student();    
 Array1[i].setName(Scan.next()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T21:08:13.033

不要忘记初始化数组的元素：

```
for (int i = 0; i < Array1.length; i++) {
    Array1[i] = new Student();
} 
```

这一行：`Student[] Array1 = new Student[10];`创建一个空数组，其中包含空元素。在使用它们之前，您必须依次实例化每一个，否则`NullPointerException`当您尝试`setName()`在数组中的元素上调用方法（例如，）时，您会感到讨厌。

同样的考虑适用于`ArrayF1`。还有一个风格问题 - 在 Java 中，变量和方法名称以小写字符开头，只有类、接口和枚举名称以大写字符开头。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-28T21:08:33.410

```
 Student[]Array1 = new Student[10]; 
```

实际上并没有给你 10 个正确构造`Student`的对象。它所做的是分配足够的空间来容纳 10 个正确构造的`Student`对象。因此，在它调用的数组的每次迭代中会发生什么`null.setName`。这导致了 NPE。

如果你想`Student`在分配后构造对象，你可以这样做：

```
for(int i = 0;i<Array1.length;i++)
{  
    Array1[i] = new Student();
} 
```

其他变量名称是小写的，除非它们是最终的，那么它们都是大写的。

# ssl - 如何使用 SharpPcap 捕获 ssl 流量

> ID：14075770
> 
> 赞同：1
> 
> 时间：2012-12-28T21:04:28.980
> 
> 标签：ssl, sniffing, sharppcap

SharpPcap 是一个很棒的库。我正在使用它为 linux 构建 http 数据包查看器，它工作正常！但是是否可以捕获和解密 ssl 流量？一方面，这正是 ssl 的设计目标，所以我会说答案是否定的。另一方面，我看到像 PacketDotNet.LinuxSLLPacket 这样的东西给了希望。那么这可能吗？如果可以，我在哪里可以获得有关如何执行此操作的一些信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T12:06:29.030

你应该看看[mitmproxy](http://mitmproxy.org)。它完全符合您的要求。

它的工作方式是允许您将代理设置设置为默认在 8080 上运行的 mitmproxy。你在你的机器、手机、浏览器上安装了 mitmproxy 的证书，它本质上会为你提供一个中间人。

# ruby-on-rails - 基于表值的红宝石迭代

> ID：14075777
> 
> 赞同：1
> 
> 时间：2012-12-28T21:04:43.903
> 
> 标签：ruby-on-rails, ruby-on-rails-3

# 该项目：

我正在创建一个动态报告系统。

指标定义了报告数据的目的。例如：

**“ *13*起房屋火灾。”**

管理员将通过一个表格将“房屋火灾”定义为一个指标，记者将通过不同的表格简单地添加“13”。

但是，还有另一个层次：我希望报告在连接的数据点上是详细的：

**“ *1 月份发生**13*起房屋火灾，影响*42*个人（或*16*个家庭）”**

 ***动词存储在“metrics”表中，数据存储在“metrics_data”表中

这是上面示例中的指标表：

```
metric_id | parentID | childID | prefix       | suffix      | program_id
    1     |     1    |   1     |              | house fires |    1
    2     |     1    |   2     | during       |             |    1
    3     |     1    |   3     | affecting    | individuals |    1
    4     |     1    |   4     | (or          | families    |    1 
```

基于句子的组织的关键是 parentID - childID 关系。

这是 metrics_data 表：

```
metric_id | value |     date
    1     |  13   |   01/01/12
    2     |  nil  |   01/01/12
    3     |  42   |   01/01/12
    4     |  16   |   01/01/12 
```

# 目标：

我想组织视图（通过 parentID 循环）以详细显示指标：

**程序#1**

(parentID: 1): " *#*房屋火灾在*（日期）*期间影响*#*个个人（或*#*个家庭）"

（parentID：2）：“ *（日期）期间的**#*个避难所提供*#*个过夜（对于*#*个个人）”

 *****程序#2**

(parentID: 1): " *#* *(date)*期间招募的新志愿者"

(parentID: 2): " *#*志愿者在*(日期)期间服务**#*小时"

 *# 编码：

```
class Program < ActiveRecord::Base
  has_many :programs_metrics
  has_many :metrics, through: :programs_metrics
end

class Metric < ActiveRecord::Base
  has_many :programs_metrics
  has_many :metrics, through: :programs_metrics
end 
```

部分 _program.html.erb（用于程序/index.html.erb）：

```
<% program.metrics.each do |metrics| %>
  <div class="row offset1">
   <% program.metrics.each do |pid| %> #how do I loop here based on parentID, sorted by childID?
     <%= pid.prefix %>
     #
     <%= pid.suffix %>
    <% end %>
  </div>
<% end %> 
```

我知道我可以将其拆分为一个单独的表并定义两个表之间的 parentID 和 childID 之间的关系，但是添加另一个关系层似乎过于复杂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T15:02:10.187

您可能应该将“父”和“子”元素视为 Metrics 的属性，而不是尝试重用相同的模型。另一种方法是创建另一个称为“事件”或其他模型的模型，这些事件与程序相关，而度量与事件相关。我可能还会创建一个“度量类型”，而不是让每个记录直接关联一个前缀或后缀。

我认为尝试将所有度量标准放在同一级别，并尝试使用 parentID 和 childID 循环它们以创建一个句子，这比仅在关系中添加另一层要复杂得多。

希望这足以推动......*******

# python - 检查 check_call 命令的 stderr 并重新运行基于命令的命令

> ID：14075778
> 
> 赞同：0
> 
> 时间：2012-12-28T21:04:50.190
> 
> 标签：python, python-2.7

我确定有更好的方法来编写以下代码...以下是我当前代码遇到的问题，请提供您可能有的任何输入

1.  我想检查以下命令的标准错误并根据错误消息重新运行它

2.  错误消息看起来像“错误：无法删除您当前所在的分支“字母数字字符串”，我正在尝试如下匹配但遇到错误

    ```
    import subprocess    
    def main():
    change="205739"
    proc = subprocess.Popen(['git', 'branch', '-d', change], stderr=subprocess.PIPE)
    out, error = proc.communicate()
    if error.startswith("error: Cannot delete the branch"):
        subprocess.check_call(['git', 'branch', '-d', change])

    if __name__ == '__main__':
    main() 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T21:11:31.917

您真的想避免使用`shell=True`，而是将其拆分为一个列表，这样您就不必使用插值来启动了。

要测试是否相等，请使用`==`; `=`仅用于语句中不允许的赋值`if`。

`.Popen()`如果要检查`stderr`输出，则需要使用：

```
import subprocess

def main():
    change="205739"
    proc = subprocess.Popen(['git', 'branch', '-d', change], stderr=subprocess.PIPE)
    out, error = proc.communicate()
    if error.startswith("error: Cannot delete the branch"):
        subprocess.check_call(['git', 'branch', '-d', change]) 
```

# asp.net-mvc - 如何在用户控件中包含 ScriptBundle？

> ID：14075779
> 
> 赞同：1
> 
> 时间：2012-12-28T21:05:00.470
> 
> 标签：asp.net-mvc, asp.net-optimization

我有一些在继承自 UserControl 的类中使用 RegisterClientScriptInclude 的旧版 ASP.NET WebForms 代码。我想用一个新奇的[Bundle](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification)替换对 RegisterClientScriptInclude 的多次调用。如何在已编译程序集的深处从我的捆绑路由解析捆绑 URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T18:47:32.077

假设您已经注册了捆绑包并且只想生成对捆绑包的引用。

最简单的方法是打电话

```
BundleCollection.ResolveBundleUrl(<path to bundle, i.e. "~/bundles/mybundle">). 
```

请注意，不使用 Scripts 帮助器来渲染标签，您将始终获得对包的引用，当您直接调用 ResolveBundleUrl 时，不会有自动的非包功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-19T09:51:10.150

试试这个方法：

```
private void RegisterJavaScriptBundle(string bundleIdent)
    {
        var bundleUrl = String.Format("~/bundles/{0}", bundleIdent);

        var name = String.Format("Bundle{0}", bundleIdent);

        if (ScriptManager.ScriptResourceMapping.GetDefinition(name) == null)
            ScriptManager.ScriptResourceMapping.AddDefinition(name, new ScriptResourceDefinition { Path = bundleUrl });

        ScriptManager.RegisterNamedClientScriptResource(this.Page, name);
    } 
```

比在用户控件的加载事件中调用它：

```
this.RegisterJavaScriptBundle("MyBundle"); 
```

这将使用内容哈希生成对脚本的引用：

```
<script src="/bundles/MyBundle?v=B6mdgLTYJ2gPQv_XxE07ACAAaNA6Lo4L_KxViWZE-CY1" type="text/javascript"></script> 
```

# c# - 在尝试映射路由之前是否会路由现有操作？

> ID：14075780
> 
> 赞同：0
> 
> 时间：2012-12-28T21:05:00.197
> 
> 标签：c#, asp.net, asp.net-mvc, routes, asp.net-mvc-routing

如果控制器上存在操作，asp.net-mvc 在尝试处理任何自定义映射路由之前是否会路由到该操作？

**例子。**

说我有以下控制器

```
public class ShopController : Controller
{
    public ActionResult Shop(Category category)
    {
        // returns some result
    }

    public ActionResult CartItemCount()
    {
        // returns some result
    }
} 
```

我已经在我的路线集合中注册了以下路线：

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.MapRoute(
        "Shop",
        "Shop/{category}",
        new { controller = "Shop", action = "Shop", category = UrlParameter.Optional } // Parameter defaults
    );
} 
```

如果我有以下 URL，会发生什么？
[http://www.example.com/Shop/CartItemCount](http://www.example.com/Shop/CartItemCount)

**编辑**

我认为映射路线的名称与它的处理方式有关，这让我感到困惑。情况并非如此，当涉及到与路由名称匹配的 url 时，并不重要。

事实证明，我在示例中给出的路径之上定义了另一条路径。这条路线虽然名称不同，但正在匹配。我什至没有想过要检查它，因为正如我所说，我认为给路由的名称会以某种方式影响匹配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T21:08:06.200

路由决定使用哪个动作。如果没有定义路由，即使存在，您也不会触发操作。安装[RouteDebugger](http://nuget.org/packages/routedebugger)并关闭你的 url。它会告诉你它匹配的所有路由以及它实际使用的路由。

# r - read.table 在标题 ��D 下返回单列“NA”字符

> ID：14075784
> 
> 赞同：1
> 
> 时间：2012-12-28T21:05:22.173
> 
> 标签：r, encoding, na, read.table

在尝试使用 read.table 函数将数据表读入 R 时，我遇到了一个非常奇怪的问题。我没有读取实际数据，而是在标题 ÿþD 下得到一列 NA 字符（它不在我的代码或输入文件中的任何位置）。我的代码和数据文件如下。如果您对我为什么会得到这个奇怪的结果有任何建议，请告诉我。我一直在寻找几个小时，却一无所获。

代码：

```
Raw_Annotation_data_AllDeer<-read.table("Sample.txt", as.is=TRUE, row.names=NULL, 
                                         check.names = TRUE, sep="\t", fill=T, header=T, 
                                         strip.white = T, quote = "", na.strings = "NA", 
                                         comment.char="") 
```

文件（前 5 行）：

```
Document_Name   Sequence_Name   Track_Name  Type    Name    Sequence    Minimum Min_(with_gaps) Maximum Max_(with_gaps) Length  Length_(with_gaps)  #_Intervals Direction   Average_Quality Coverage    modified_by Polymorphism_Type   Strand-Bias Strand-Bias_>50%_P-value    Strand-Bias_>65%_P-value    Variant_Frequency   Variant_Nucleotide(s)   Variant_P-Value_(approximate)
Chr2_FT Chr2    Chr2.bed    CDS 10000_ARHGAP15  GAAAGAATCATTAACAGTTAGAAGTTGATG-AAGTTTCAATAACAAGTGGGCACTGAGAGAAAG    55916421    56019336    55916483    56019399    63  64  1   forward         User                            
Chr2_FT Chr2    Chr2.bed    CDS 10001_ARHGAP15  GATACCACTGTACTATGCAGAAATCTACAAATTCTGATATCCCTGTGGAAACACTGAATCCCACCCGCCAAGGCACTGGAGCTGTGCAAATGAGAATCAAAAATGCCAACAGCCACCATGACAGGCTGAGCCAAAGTAAATCTATGATCCTCACCGAAGTTGGGAAGGTCACTGAACCT 55936395    56039336    55936573    56039514    179 179 1   forward         User                            
Chr2_FT Chr2    Chr2.bed    CDS 10002_HNMT  CTGACACAATAATAATGAGAATCTTAGCATTGGTAGCTAAGAGACTATGGAAGAATTTCAGGGTAGCTGGGATGTCTTTAACATAATACAGCAT  61980947    62093615    61981040    62093708    94  94  1   forward         User                            
Chr2_FT Chr2    Chr2.bed    CDS 10003_HNMT  CTGAATCATATGAATAAAGTCCCACCTCTGAAGTTCTTTTTTCTCCATCATTCTATTTTGATATTCAGATGATGTCTCTTTATGCCAAGCAAACTTTATGTTCTCAAGGTTTGATGTCTTTGCTACAAGCT 61986120    62098794    61986250    62098924    131 131 1   forward         User                            
Chr2_FT Chr2    Chr2.bed    CDS 10004_HNMT  CTTTGTACTTGGTGATTTGTTCAGCACTTGGTTCAACAACTTCATTGATGATATGAACTCCTGGGTACTGAGCTTGCACTTTGGAGAGAATTTGAAGGTCAATTTCAC    61987773    62100453    61987880    62100560    108 108 1   forward         User 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T22:27:05.623

如果标题行中的“#”（comment.char）在数据中，它可能会出现问题。但是 check.names() 似乎已经抓住了它。这“有效”（删除后`sep="\t"`：

```
Raw_Annotation_data_AllDeer<-read.table(text="Document_Name   Sequence_Name   Track_Name  Type    Name    Sequence    Minimum Min_(with_gaps) Maximum Max_(with_gaps) Length  Length_(with_gaps)  #_Intervals Direction   Average_Quality Coverage    modified_by Polymorphism_Type   Strand-Bias Strand-Bias_>50%_P-value    Strand-Bias_>65%_P-value    Variant_Frequency   Variant_Nucleotide(s)   Variant_P-Value_(approximate)
Chr2_FT Chr2    Chr2.bed    CDS 10000_ARHGAP15  GAAAGAATCATTAACAGTTAGAAGTTGATG-AAGTTTCAATAACAAGTGGGCACTGAGAGAAAG    55916421    56019336    55916483    56019399    63  64  1   forward         User                            
Chr2_FT Chr2    Chr2.bed    CDS 10001_ARHGAP15  GATACCACTGTACTATGCAGAAATCTACAAATTCTGATATCCCTGTGGAAACACTGAATCCCACCCGCCAAGGCACTGGAGCTGTGCAAATGAGAATCAAAAATGCCAACAGCCACCATGACAGGCTGAGCCAAAGTAAATCTATGATCCTCACCGAAGTTGGGAAGGTCACTGAACCT 55936395    56039336    55936573    56039514    179 179 1   forward         User                            
Chr2_FT Chr2    Chr2.bed    CDS 10002_HNMT  CTGACACAATAATAATGAGAATCTTAGCATTGGTAGCTAAGAGACTATGGAAGAATTTCAGGGTAGCTGGGATGTCTTTAACATAATACAGCAT  61980947    62093615    61981040    62093708    94  94  1   forward         User                            
Chr2_FT Chr2    Chr2.bed    CDS 10003_HNMT  CTGAATCATATGAATAAAGTCCCACCTCTGAAGTTCTTTTTTCTCCATCATTCTATTTTGATATTCAGATGATGTCTCTTTATGCCAAGCAAACTTTATGTTCTCAAGGTTTGATGTCTTTGCTACAAGCT 61986120    62098794    61986250    62098924    131 131 1   forward         User                            
Chr2_FT Chr2    Chr2.bed    CDS 10004_HNMT  CTTTGTACTTGGTGATTTGTTCAGCACTTGGTTCAACAACTTCATTGATGATATGAACTCCTGGGTACTGAGCTTGCACTTTGGAGAGAATTTGAAGGTCAATTTCAC    61987773    62100453    61987880    62100560    108 108 1   forward         User                            ", as.is=TRUE, row.names=NULL, check.names = TRUE, fill=T, header=T, strip.white = T, quote = "", na.strings = "NA", comment.char="") 
```

# python - 使用 Python Scrapy 遍历站点

> ID：14075785
> 
> 赞同：10
> 
> 时间：2012-12-28T21:05:22.600
> 
> 标签：python, scrapy

如何使用 Scrapy 遍历网站？我想提取所有匹配的网站的正文`http://www.saylor.org/site/syllabus.php?cid=NUMBER`，其中 NUMBER 是 1 到 400 左右。

我写了这个蜘蛛：

```
from scrapy.contrib.spiders import CrawlSpider, Rule
from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor
from scrapy.selector import HtmlXPathSelector
from syllabi.items import SyllabiItem

class SyllabiSpider(CrawlSpider):

    name = 'saylor'
    allowed_domains = ['saylor.org']
    start_urls = ['http://www.saylor.org/site/syllabus.php?cid=']
    rules = [Rule(SgmlLinkExtractor(allow=['\d+']), 'parse_syllabi')]

    def parse_syllabi(self, response):
        x = HtmlXPathSelector(response)

        syllabi = SyllabiItem()
        syllabi['url'] = response.url
        syllabi['body'] = x.select("/html/body/text()").extract()
        return syllabi 
```

但它不起作用。我知道它正在该 start_url 中寻找链接，这并不是我真正想要的。我想遍历这些站点。说得通？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-28T21:53:04.813

尝试这个：

```
from scrapy.spider import BaseSpider
from scrapy.http import Request
from syllabi.items import SyllabiItem

class SyllabiSpider(BaseSpider):
    name = 'saylor'
    allowed_domains = ['saylor.org']
    max_cid = 400

    def start_requests(self):
        for i in range(self.max_cid):
            yield Request('http://www.saylor.org/site/syllabus.php?cid=%d' % i,
                    callback=self.parse_syllabi)

    def parse_syllabi(self, response):
        syllabi = SyllabiItem()
        syllabi['url'] = response.url
        syllabi['body'] = response.body

        return syllabi 
```

# ruby-on-rails-3 - 创建与模型无关的 Rails 部分

> ID：14075790
> 
> 赞同：1
> 
> 时间：2012-12-28T21:05:47.950
> 
> 标签：ruby-on-rails-3

我有两个 Ruby on Rails 模型`SafetyTest`和`TeamDue`，并且想要创建一个`_seasonal.html.erb`可以与任一模型一起使用的部分调用。

真正的问题是添加一个链接来创建一个新实例。例如，这将是以下*代码* `SafetyTest`：

```
<%= link_to new_safety_test_path %> 
```

现在我希望能够在我的视图中指定，当我渲染时`_seasonal.html.erb`，我是否需要这样的`SafetyTest` *链接* `TeamDue`。我不确定将什么本地传递给这个部分，以便它创建正确的`new`链接而不会造成混乱。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T21:08:00.087

看看[Polymorphic URL helpers](http://api.rubyonrails.org/classes/ActionDispatch/Routing/PolymorphicRoutes.html)。

# null - Facebook用户ID在登录后为空，为什么？

> ID：14075791
> 
> 赞同：-1
> 
> 时间：2012-12-28T21:05:51.640
> 
> 标签：null, scope, facebook-php-sdk

当我生成具有范围的登录 url 时，getUser() 返回 0；getLoginUrl() 中没有参数；它返回一个用户 ID。

```
 $userID = $facebook->getUser();
  $params = array();
  $params['scope'] = 'email, user_about_me, user_events';
  $params['redirect_uri'] = $appurl;

  $loginUrl = $facebook->getLoginUrl($params); // doesnt work
  //$loginUrl = $facebook->getLoginUrl(); // works
  $logoutUrl = $facebook->getLogoutUrl();
  //test user
  if($userID){ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T05:09:19.697

尝试这个...

```
$loginUrl = $facebook->getLoginUrl(
    array(
        'redirect_uri' => $appurl,
        'scope' => 'email, user_about_me, user_events',
    )
); 
```

# java - 根据 JTable 中的第一列值为特定行着色？

> ID：14075799
> 
> 赞同：2
> 
> 时间：2012-12-28T21:06:41.957
> 
> 标签：java, swing, jtable, tablecellrenderer

我正在尝试根据 中的第一列值为特定行着色`JTable`，但下面的代码根据行的索引为行着色。我的表只有四列。第一列有 ID 号。我需要根据这些 ID 号为行着色。例如，如果第一个 ID 为 0，第二个 ID 也为 0，则它们都应为“lightGray”。请问有什么想法吗？

```
table_1 = new JTable(){
    public Component prepareRenderer(TableCellRenderer renderer,int Index_row, int Index_col) {
        Component comp = super.prepareRenderer(renderer,Index_row, Index_col);
            //even index, selected or not selected
            if (Index_row % 2==0  &&  !isCellSelected(Index_row, Index_col)) {
                comp.setBackground(Color.lightGray);
            } else {
                comp.setBackground(Color.white);
            }
            return comp;
        }
    }; 
```

这是它现在的样子：

![它应该是什么样子](../Images/6c8dd0bbf6f6beca70df9a558b0d5c56.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-29T00:47:12.153

您的渲染器正在根据`row`传递给`prepareRenderer()`. 谓词`row % 2 == 0`选择交替行进行着色，如图所示。您的问题意味着您实际上希望将底纹基于零列的值，`ID`. 为此，您需要检查`getValueAt(row, 0)`.

确切的公式取决于您的模型。使用此[示例](https://stackoverflow.com/a/4528604/230513)，以下渲染器对以字母“T”开头的行进行着色。

```
private JTable table = new JTable(dataModel) {

    @Override
    public Component prepareRenderer(TableCellRenderer renderer, int row, int col) {
        Component comp = super.prepareRenderer(renderer, row, col);
        int modelRow = convertRowIndexToModel(row);
        if (((String) dataModel.getValueAt(modelRow, 0)).startsWith("T")
            && !isCellSelected(row, col)) {
            comp.setBackground(Color.lightGray);
        } else {
            comp.setBackground(Color.white);
        }
        return comp;
    }
}; 
```

![图片](../Images/94692fae49f7b7809ac24dece36a0503.png)

附录：@mKorbel 有用地评论了启用排序时需要在*模型*和 *视图*坐标之间进行转换，如此[处](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#sorting)所述。

# wordpress - 使用自动缩放处理 EC2/S3 上的 Wordpress 媒体文件

> ID：14075813
> 
> 赞同：2
> 
> 时间：2012-12-28T21:08:10.817
> 
> 标签：wordpress, caching, amazon-s3, amazon-ec2, autoscaling

我正在亚马逊 AWS 上进行 WordPress 部署配置。我在 Ubuntu EC2 实例上的 Apache 上运行 WordPress。我正在使用[W3 Total Cache](http://wordpress.org/extend/plugins/w3-total-cache/)进行缓存并从 S3 存储桶提供用户上传的媒体文件。负载均衡器通过自动缩放将流量分配到两个 EC2 实例以处理重负载。

问题是用户上传的媒体文件存储在本地，`wp-content/uploads/`然后*同步*到 S3 存储桶。这意味着 EC2 实例之间的媒体文件不一致。

以下是我正在考虑的方法：

1.  使用 WordPress 插件将媒体文件直接上传到 S3，而无需将它们存储在本地。问题是我发现的唯一插件（[这个](http://wordpress.org/extend/plugins/tantan-s3/)和[这个](http://wordpress.org/extend/plugins/tantan-s3-cloudfront/)）都是错误的并且维护不善。我宁愿不花几个小时自己修复其中一个。也不清楚它们是否与 W3 Total Cache 完全集成（我也想将其用于其他缓存工具）。
2.  拥有一个主实例，用户可以在其中访问管理界面并上传媒体文件。所有媒体文件都将本地存储在此实例上（并通过 W3 Total Cache 同步到 S3）。Auto Scaling 将部署没有本地文件存储的从属实例。
3.  使所有 EC2 实例相同并指向`wp-content/uploads/`单独的 EBS 卷。所有实例都将共享媒体文件。
4.  使用 rsync 在运行的 EC2 实例之间复制媒体文件。

有明确的赢家吗？还有其他我应该考虑的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T23:24:47.757

您可能会考虑查看类似 s3fs (http://code.google.com/p/s3fs/) 的内容。这允许您将 S3 存储桶作为卷安装在服务器实例上。您可以简单地让代码在实例启动时执行挂载卷。

s3fs 还可以使用本地（临时）目录作为 s3fs 目录的缓存，以提高性能。

# javascript - 在 JavaScript 中一次中断 for-loop 和 swich-case

> ID：14075822
> 
> 赞同：0
> 
> 时间：2012-12-28T21:08:35.250
> 
> 标签：javascript, for-loop, switch-statement

我想知道如何在 JavaScript 中同时打破 for-loop 和 switch-case**语句**？

通常我使用类似的东西：

```
foo:
for(;;)
  for (;;)
      break foo; 
```

有没有办法在一开始就对一个案例做同样的把戏？

```
switch(1) {
  foo:
  case 1:
    for (;;)
      break foo;
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T21:11:26.183

只需使用`switch`语句本身的标签而不是其中一种情况。休息会带你离开`switch`，我认为这是你想要做的。

```
foo:
switch(1) {
  case 1:
    for (;;)
      break foo;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T21:13:46.133

标记`switch`

```
foo: switch(1) {
    case 1:
        while (1) break foo;
    case 2:
        console.log(2);
} 
```

循环中断并且`2`永远不会被记录。

# sql-server - ADO - 我可以使用多个连接语句编辑复杂查询的结果吗？

> ID：14075825
> 
> 赞同：1
> 
> 时间：2012-12-28T21:08:44.660
> 
> 标签：sql-server, delphi, delphi-xe2, ado, tadoquery

我正在开发一种数据转换实用程序，它可以将数据从一个主数据库推送到多个不同的数据库。该实用程序本身不知道数据如何保存在目标（表结构）中，但我想提供编写一个 SQL 语句以使用具有多个连接语句的复杂 SQL 查询从目标返回数据。只要数据采用实用程序可以在 ADO 查询中识别（字段名称）的标准化格式。

然后我想做的是修改此 ADO 查询中的实时数据。但是，由于有多个连接语句，我不确定是否可以这样做。我至少知道使用 BDE（我从未使用过 BDE），它非常严格，您必须返回所有字段 (*) 等。我知道 ADO 更灵活，但我不知道在这种情况下有多灵活。

`TADOQuery`当结果包含来自不同表的字段时，是否可以以这种方式修改数据？即使是这样，假设我想在末尾附加一条新记录（`TADOQuery.Append`）。它会附加到两个不同的表吗？

我选择的实际主表有一个由相同主键字段连接的补充表，一个是“小”表（简要信息），另一个是“详细”表（每个记录的更多信息小桌子）。因此，一个典型的陈述将包括这样的内容：

```
select ts.record_uid, ts.SomeField, td.SomeOtherField from table_small ts
join table_detail td on td.record_uid = ts.record_uid 
```

其他表中的记录还有许多其他连接，但我不担心附加到这些连接。我只担心同时附加到“小”和“详细”表。

在 ADO 查询中这样的事情可能吗？我愿意以任何必要的方式调整和修改 SQL 语句以使其成为可能。我有一种不好的感觉，虽然这是不可能的。

兼容性：

1.  SQL Server 2000 到 2008 R2
2.  德尔福 XE2

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-28T21:38:15.163

编辑这些对连接没有影响的字段通常没有问题。追加是...您可以通过以下方式将追加限制到其中一个表

```
procedure TForm.ADSBeforePost(DataSet: TDataSet);
begin
  inherited;
  TCustomADODataSet(DataSet).Properties['Unique Table'].Value := 'table_small';
end; 
```

但如果没有 Requery，您将不会走得更远。更好的方法是按过程设置值，例如在 BeforePost、Requery 和 Abort 中。

如果您的视图是持久的，您将能够使用[INSTEAD OF 触发器](http://msdn.microsoft.com/en-us/library/ms175521%28v=sql.105%29.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-29T08:40:48.967

杰瑞，

我在 FireBird 上遇到了同样的问题，根据经验，我可以告诉你，它可以通过使用[CachedUpdates](http://docwiki.embarcadero.com/RADStudio/XE3/en/Using_a_Client_Dataset_to_Cache_Updates)来实现（达到一个小的复杂性） 。这是一个非常好的资源 - [http://podgoretsky.com/ftp/Docs/Delphi/D5/dg/11_cache.html](http://podgoretsky.com/ftp/Docs/Delphi/D5/dg/11_cache.html)。这篇文章有你所有问题的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T09:42:57.013

我放弃了实时 ADO 查询更新的最初想法，因为它变得比我想象的要复杂得多。数据推送项目的范围已经改变，因此这对我来说不再是问题，但仍然是一个有趣的话题。

应用程序的新结构包括在原始数据集中的各个字段上附加多个“字段链接”。这些链接中的每一个都引用原始字段名称和在导入该字段时要执行的 SQL 语句。多个字段链接可以在一个字段上，因此可以执行多个语句，将值放在各种表中，等等。最终目标是一个应用程序，我可以轻松地重复地将公共数据集从原始来源导出到任何外部来源不同的数据结构，无需重新编译应用程序。

However the concept of cached updates was not appealing to me, simply for the fact pointed out in the link in RBA's answer that data can be changed in the database in the mean-time. So I will instead integrate my own method of customizable data pushes.

# database - 分解为 BCNF

> ID：14075826
> 
> 赞同：1
> 
> 时间：2012-12-28T21:08:52.383
> 
> 标签：database, functional-dependencies

假设 R = {A,B,C,D} 并且 FD = C→D,C→A,B→C

我应该找到： 1\. 密钥 2\. 它所在的 NF 3\. BCNF（如果可能，如果还没有的话）

所以这就是我到目前为止所得到的：

1.  关键是 B，因为它传递地确定了 C，而 C 又确定了 D 和 A。
2.  它在 2NF 中，因为依赖关系是整个关键
3.  R1 = {B,C} R2 = {C, A, D}
    *   所以这就是我有问题的地方。标记方案表示将 R 分解为 AC、BC 和 CD。但是为什么我的答案不正确呢？我是说 FD 是 C -> {A,D}，如果是的话，这与 C -> A 和 C -> D 有什么区别吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T06:04:52.657

当你被要求计算 R 的最小覆盖时，你通常会这样回答。

*   C -> D
*   C -> A
*   B -> C

当你被要求将 R 提升到 BCNF 时，通常期望你这样回答。

*   **乙**丙
*   **广告**_****

 **如果您不使用标准教科书，我无法给您任何建议。TA（助教）写的问答特别难懂。有时他们只是错了。**

# asp.net - IIS 应用程序池缓存错误的 url

> ID：14075828
> 
> 赞同：2
> 
> 时间：2012-12-28T21:08:55.250
> 
> 标签：asp.net, iis-7

我有我的生产站点的应用程序池每 2 小时左右回收一次。我注意到当第一次调用该站点时，应用程序池会缓存基本 url（例如 www.mysite.com）。这是有道理的，因为它用于解析 ASP.NET 中的相对路径，例如 ~/MyFolder/MyPage.aspx，它被解析为：

```
http://www.mysite.com/MyFolder/MyPage.aspx 
```

但是，由于可以通过我们的主机名访问该站点，例如

```
http://masdfg.my.provider.net 
```

IIS 认为 url 是

```
http://masdfg.my.provider.net/MyFolder/MyPage.aspx 
```

如您所见，这会导致 SSL 以及其他问题。我怎样才能防止这种情况发生？

更新：解决方法是创建一个 url 重定向。如果有人知道如何防止这种情况，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T17:08:41.337

HttpContext.Current.Request.Url 不是可缓存项。该值来自 HTTP 标头的 HOST 值。这意味着它从请求传递到应用程序。

第二个 URL 唯一需要的时间是请求的 HOST 值是否为`masdfg.my.provider.net`

这里有三个可能的*修复*。第一个是设置您的绑定并将任何请求`masdfg.my.provider.net`转发到`www.mysite.com`

第二，因为您的主要问题似乎是关于 SSL 是获取统一通信 (UC) SSL 证书并将其安装在您的服务器上。这将涵盖 mysite.com 和 masdfg.my.provider.net 域名。

第三种是简单地创建一个单独的 IIS 站点，该站点指向与第一个完全相同的生产目录。每个站点将只有 1 个它负责的域名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T13:12:30.283

我希望我已经正确理解了你的问题，但如果我没有，请告诉我。

听起来您遇到的唯一问题是，当您编写响应的链接时，它们有时会引用错误的根 URL。

我注意到您使用 ~/ 。这将解决并将整个 URL 写入我认为的响应。最好仅在编写响应链接时使用 /。

因此，在您的示例中，您将编写 /myfolder/mypage.aspx。然后浏览器将解析 / 以表示它来自站点的根地址，无论哪个可能。

就像我说的，我希望我已经正确理解了你的问题，如果我没有理解，我深表歉意。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T14:44:00.900

我知道这是一个长镜头，但我的 IIS 设置也遇到了类似的问题。我通过“编辑绑定”进入已经提到的“绑定”窗口解决了这个问题。

然后我删除*了所有*不需要的绑定，然后添加服务器应该回答的主机名 www.mydomain.com。

最后我编辑了 Windows 主机文件

```
%windir%\System32\drivers\etc\hosts 
```

添加行

```
127.0.0.1 www.mydomain.com 
```

这可确保 www.mydomain.com*始终*解析为本地计算机。

以管理员身份执行 iisreset.exe 后，我的问题就结束了。

# php - Jquery在点击时更改图像

> ID：14075830
> 
> 赞同：0
> 
> 时间：2012-12-28T21:08:58.653
> 
> 标签：php, javascript, jquery

我的点击更改图像有问题，我有数据库消息，每条消息都有状态 0 或 1，从我的代码中，我必须单击状态图像，它会改变，但它的变化仅适用于第一条消息。当我单击其他消息状态时，它不会更改，而只会更改第一个状态。我怎么能跑这个！！！

```
<script type="text/javascript">
 $(function() {
$('.imageCheck').click(function(e){
 e.preventDefault();
$("#bg").attr('src',"/application/admin/img/tick.png");  
});    
});

    </script> 
```

```
 <th>Status</th>

                </tr>
            </thead>
            <tbody>
                <?php 
                foreach ($users as $user):

                ?>
                <tr>
                    <td><?=$user['id']?></td>
                    <td>                                                      
  <div class="imageCheck"><img id="bg" src="<?php echo $img_path;?>publish_x.png" name="statusCheck" value="0" />
                                                   </div>                                                     
                                            </td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T21:13:09.893

您需要`#bg`在您的消息控件中更改。在事件处理程序中用于`find`获取嵌套`bg`元素。

```
$('.imageCheck').click(function(e){
   e.preventDefault();
   $(this).find("#bg").attr('src',"/application/admin/img/tick.png");  
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T21:12:19.320

因为一个 ID 可以（或者说应该）在 DOM 中只存在一次。jQuery 仅更改与选择器匹配的第一个元素`#bg`。尝试改用一个类：

```
<img class="bg" />

$('.bg').attr('src', '...'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T21:13:45.417

ID 在页面上应该是唯一的。由于您正在循环播放，因此您将拥有多个 id bg 的 img，因此只有第一个有效。

as BenM states change it to .bg also update your code to find the exact image below the div

```
$(".bg", $(this)).attr('src',"/application/admin/img/tick.png"); 
```

# google-app-engine - 通过 get_serving_url （应用引擎）在 blob 上的 TransformationError

> ID：14075832
> 
> 赞同：3
> 
> 时间：2012-12-28T21:09:38.467
> 
> 标签：google-app-engine, blob

**转换错误**

对于特定图像，此错误不断出现。

其他图像没有问题，我想知道这个异常的原因可能是什么。

来自谷歌：

“尝试转换图像时出错。”

**更新：**

开发服务器它工作正常，只有活它失败。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T01:02:56.137

如果没有更多信息，我会说图像已损坏，或者其格式无法与 get_serving_url 一起使用（例如动画 GIF）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-09-08T21:25:33.643

我永远与这个错误作斗争，以防有人发现他们得到可怕的 TransformationError 请注意，您需要确保您的应用程序对要为其生成 url 的文件具有所有者权限

它在您的 IAM 选项卡中看起来像这样：
App Engine 应用默认服务帐户
your-project-name-here@appspot.gserviceaccount.com

在该成员的 IAM 中，您希望向下滚动到 Storage 并向该用户授予“Storage Object Admin”。只要您在同一个项目下拥有存储桶...如果没有，我不确定如何...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-04-19T03:34:20.177

这个 TransformationError 异常似乎出现了权限错误，所以它有点误导。

我之所以会收到此错误，是因为我在另一个项目中的存储桶上使用了*“仅存储桶策略”权限。*

但是，在**将其更改回*对象级别*权限**并授予我的 App Engine 应用程序访问权限（来自不同项目）后，我能够执行我试图实现的 App Engine 标准图像操作 (google.appengine.api.images.get_serving_url) .

确保在控制台 UI 或通过 gsutil 正确设置权限，如下所示：

```
gsutil acl ch -u my-project-a@appspot.gserviceaccount.com:OWNER gs://my-project-b 
```

# php - 路由器中的正则表达式错误

> ID：14075834
> 
> 赞同：0
> 
> 时间：2012-12-28T21:09:59.260
> 
> 标签：php, regex, routing, preg-match

**更新**

当我去 时`/about/`，我得到：

```
Route: contact
Get Param: about 
```

当我去 时`/contact/`，我得到：

```
Route: about
Get Param: contact 
```

* * *

这是我的代码：

```
foreach ($routes as $route) {
            if (preg_match('/^' . $route . '$/', $uri)) {
                $controller = 'controllers/' . $route . '.php';

                if (file_exists($controller)) {
                    include_once($controller);
                } else {
                    echo '<h1>404 - Missing Controller</h1>';
                }
            } else {
                echo '<h1>404 - Missing Route</h1>';
            }
} 
```

问题是，我总是看到“Missing Route”……我的问题是什么？

如果我替换为，我会遇到同样的`preg_match`问题`if ($uri == $route)`

$路线 = `Array ( [0] => about [1] => contact )`
$uri =`contact`

目录结构：

控制器/
      About.php
      Contact.php
Router.php

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T21:16:24.913

你为什么要使用 preg_match 呢？

```
if (preg_match('/^' . $route . '$/', $uri)) 
```

是相同的

```
if ($route == $uri) 
```

除非出于某种原因，您希望在*其中*`$route`包含正则表达式元字符。

此外，您的输出显示您有 404，但您实际上返回的是 404 的 HTTP 响应吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T21:25:47.573

除了匹配的索引之外，您的 else 条件正在执行每个索引。

我认为你需要做的是：

```
if(in_array($uri, $routes) {
            $controller = 'controllers/' . $uri . '.php';
            if (file_exists($controller)) {
                include_once($controller);
            } else {
                echo '<h1>404 - Missing Controller</h1>';
            }
 } 
 else {
            echo '<h1>404 - Missing Route</h1>';
      } 
```

此外，如果您的控制器名称以大写字母开头，您需要在 $controller 变量中添加一些逻辑，使其首字母大写。

# rally - 可以在单个投资组合项 Web 服务调用中获取完整的层次结构要求吗？

> ID：14075837
> 
> 赞同：2
> 
> 时间：2012-12-28T21:10:15.850
> 
> 标签：rally

我正在尝试汇总有关我的用户故事的看板状态的一些信息。如果查询 PifTeam 项目，我会得到与其关联的 UserStories 的汇总集合。

示例查询：

[https://rally1.rallydev.com/slm/webservice/1.40/portfolioitem/pifteam/99999999999.js](https://rally1.rallydev.com/slm/webservice/1.40/portfolioitem/pifteam/99999999999.js)

但是，我必须在 UserStories 集合上运行一个循环，分别查询每个集合以获取我需要的信息。这可能会导致大量 Web 服务调用。

有没有办法在原始 pifteam 查询中返回完整的分层需求信息，以便只有一个返回所有子对象的 web 服务调用？我阅读了 webservice api 并尝试使用 fetch 参数但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T01:32:49.937

没有办法从 Rally 的标准 Web 服务 API (WSAPI) 中做到这一点，但您可以从新的 Lookback API (LBAPI) 中做到这一点。查询看起来像这样：

```
https://rally1.rallydev.com/analytics/v2.0/service/rally/workspace/<ObjectID_for_Workspace>/artifact/snapshot/query.js?find={__At:"current",_TypeHierarchy:"HierarchicalRequirement",Children:null,_ItemHierarchy:<ObjectID_for_PortfolioItem>}&fields=["Name"] 
```

填写您的 Workspace 和 PortfolioItem 的 ObjectID。_ItemHierarchy 字段将跨越工作项类型边界，从 PortfolioItems 一直到 Story 层次结构，再到 Defects 甚至是 Tasks，因此我添加了 _TypeHierarchy:"HierarchicalRequirement" 以将其限制为 Stories。我指定了 Children:null，这意味着您只会返回叶子故事。__At:"current" 子句获取当前树和值。请记住，它是“回溯”API，因此您可以在历史上的任何时刻检索对象的状态。__At:"current" 表示获取当前值和树。

请注意，LBAPI 从系统中的当前值延迟几秒到几分钟不等。通常它大约落后 30 秒。您可以通过检查响应中的 ETLDate 字段来查看它落后了多远。

可以在[此处](https://rally1.rallydev.com/analytics/doc)找到有关 LBAPI 的详细信息。请注意，现在几乎所有 Rally 客户都可以使用 LBAPI 预览版。仍有许多客户尚未开启。判断它是否适用于您的订阅的最佳方法是尝试查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T01:41:57.430

此功能将在 WSAPI 2.0 中禁用，但在 1.x 版本中将继续可用。也就是说，您应该能够像这样使用获取故事中的字段：

```
/pifteam/9999.js?fetch=UserStories,FormattedID,Name,PlanEstimate,KanbanState 
```

即使根对象类型没有这些字段，Fetch 也会对子对象上指定的字段进行水合。因此，通过获取 UserStories，返回的集合将填充故事，每个故事都包含 FormattedID、Name、PlanEstimate 和 KanbanState 字段。

# python - 结合 django 管理器

> ID：14075839
> 
> 赞同：4
> 
> 时间：2012-12-28T21:10:37.287
> 
> 标签：python, django, django-models, django-managers

我有两个 Django 经理

## 投票管理器

```
class VoteManager(model.Manager):

    def all_with_vote_info(self):
        qs = super(VoteManager, self).get_query_set()
        qs = qs.annotate(score=Sum('votes__score', distinct=True))
        return qs

    .... 
```

## 软删除管理器

```
class SoftDeleteManager(models.Manager):

    def all_active(self):
        qs = super(SoftDeleteManager, self).get_query_set()
        qs = qs.filter(time_deleted=None)
        return qs

    .... 
```

如何链接来自`VoteManager.all_with_vote_info`、`SoftDeleteManager.all_active`和任意数量的管理器方法的查询集结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T21:20:24.173

找到了解决方案：`PassThroughManager`

[https://django-model-utils.readthedocs.org/en/latest/managers.html#passthroughmanager](https://django-model-utils.readthedocs.org/en/latest/managers.html#passthroughmanager)

**更新：**

`PassThroughManager`已弃用，请改用 Django 的内置`QuerySet.as_manager()`和/或`Manager.from_queryset()`实用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-28T15:16:28.743

使用此方法 PolymorphicQuerySet 方法将全部可用，然后我们可以从 TimeseriesQueryset 注册其他方法

```
class UserPartQuerySet(PolymorphicQuerySet, TimeSeriesQuerySet):

    def prefetch_latest(self, *related_names):
        return TimeSeriesQuerySet.prefetch_latest(self, *related_names)

    def filter_outdated(self, *related_names):
        return TimeSeriesQuerySet.filter_outdated(self, *related_names)

    def update_timeseries(self, related_name, collector, force=False):
        return TimeSeriesQuerySet.update_timeseries(
                self,
                related_name,
                collector,
                force=False
        ) 
```

# c# - 如何在树视图中突出显示第一个插入的节点？

> ID：14075841
> 
> 赞同：1
> 
> 时间：2012-12-28T21:10:48.367
> 
> 标签：c#, wpf, treeview

我有一个包含两种形式的应用程序。第一种形式用于以`TreeView`编程方式创建节点，第二种形式具有实际的`TreeView`. 当应用程序加载时，我在`TreeView`.

我的问题是当我为任何一个根节点创建我的第一个子节点时，它没有突出显示。我给出了 Form 和`TreeView`焦点，并且还禁用`HideSelection`了`TreeView`.

一旦我将另一个子节点添加到任一根节点，插入的节点就会突出显示。我希望每个插入的节点在插入后突出显示，但这仅在插入第一个节点后才有效。

示例代码：

```
m_ObjectAnimationForm.tr_vw_ANIMATION_OBJECT_LIST.SelectedNode = m_ObjectAnimationForm.tr_vw_ANIMATION_OBJECT_LIST.Nodes["OBJECTS_ROOT"].Nodes.Add(NewObject.ID, NewObject.ID); 
```

我使用“KEY”对象的 ID 和节点的字符串创建一个新的树节点，然后该函数返回新创建的树节点，使其成为树中的选定节点。

在该代码之后，我调用：

```
m_ObjectAnimationForm.tr_vw_ANIMATION_OBJECT_LIST.ExpandAll();
m_ObjectAnimationForm.tr_vw_ANIMATION_OBJECT_LIST.Focus(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T21:33:29.750

尝试使用 Node.Select()，它会选择节点并突出显示它。

焦点在这里不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T22:54:56.577

我有一个稍微不同的设置，我通过在 datagridview 中选择一个项目来控制 TreeView 中突出显示的项目。这不是最优雅的方法，但它确实有效。

总之：

1.) 从源 TreeView、其他控件或其他地方获取索引 2.) 展开目标 TreeView 中的所有节点 3.) 遍历目标中的树节点，直到达到索引 4.) 设置 TreeView.SelectedNode = "找到” 5.) 将焦点设置在 TreeView

```
 private void selectTreeViewItem(int dataGridViewRowIndex)
    {
        expandAllTreeViewNodes();
        setTreeViewItem(dataGridViewRowIndex);
    }

    private void setTreeViewItem(int dataGridViewRowIndex)
    {
        int iterator = 0;
        TreeNode tempNode = testStepTreeView.Nodes[iterator];
        //don't need to actually return the integer...
        iterator = findNode(tempNode, dataGridViewRowIndex, iterator);
        testStepTreeView.Focus();
        nodeFound = false;
    }

    private void expandAllTreeViewNodes()
    {
        if (testStepTreeView.Nodes.Count != 0)
        {
            foreach (TreeNode x in testStepTreeView.Nodes)
            {
                expandNode(x);
            }
        }
    }

    private void expandNode(TreeNode x)
    {
        if (x.IsExpanded == false)
        {
            x.Expand();
        }
        if (x.Nodes.Count > 0)
        {
            foreach (TreeNode y in x.Nodes)
            {
                expandNode(y);
            }
        }
    }

    private int findNode(TreeNode tempNode, int dataGridViewRowIndex, int iterator)
    {

        if (iterator > dataGridViewRowIndex)
        {
            return iterator;
        }
        if (iterator == dataGridViewRowIndex)
        {
            testStepTreeView.SelectedNode = tempNode;
            nodeFound = true;
            return iterator;
        }

        if (tempNode.Nodes.Count != 0)
        {
            iterator++;
            if (iterator > dataGridViewRowIndex)
            {
                return iterator;
            }
            if (nodeFound == false)
            {
                iterator = findNode(tempNode.Nodes[0], dataGridViewRowIndex, iterator);
            }
        }

        if (tempNode.NextNode != null)
        {
            iterator++;
            if (iterator > dataGridViewRowIndex)
            {
                return iterator;
            }
            if (nodeFound == false)
            {
                iterator = findNode(tempNode.NextNode, dataGridViewRowIndex, iterator);
            }

        }
        return iterator;
    } 
```

# jquery - 我可以在 jQuery Cycle 中显示数字吗

> ID：14075842
> 
> 赞同：0
> 
> 时间：2012-12-28T21:11:02.717
> 
> 标签：jquery, jquery-cycle, web-frontend

我主要使用 jQuery Cycle 作为横幅旋转器，但在目前的工作中，需要在 jQuery 循环中显示数字。那么有可能这样做吗？如果是，那怎么办？我在 jQuery Cycle 的文档中没有看到任何这样的东西，也没有在它的任何演示中看到这样的编号。

我宁愿使用这个带有数字的插件，而不是探索和使用其他一些插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T21:46:20.247

你当然可以。jQuery Cycle 是一个精心设计的插件，它具有可用作幻灯片转换前后的回调函数。只需使用`before`回调来获取当前幻灯片的编号并对其进行处理。

现场示例：http: [//jsfiddle.net/5ZqFA/](http://jsfiddle.net/5ZqFA/)

```
var $slideshowImages = $('.slideshow img'),
    $number = $('#number');

$('.slideshow').cycle({
    fx: 'fade',
    startingSlide: 0,
    before: function (currSlideElement, nextSlideElement, options, forwardFlag) {

        var $img = $(nextSlideElement),
            number = $slideshowImages.index($img);

        number += 1;

        $number.text(number);
    }
});​ 
```

该插件的选项记录在这里：http: [//jquery.malsup.com/cycle/options.html](http://jquery.malsup.com/cycle/options.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T04:50:32.963

以下是 Cycle Plugin 中使用 Pager 的文档： [Cycle Pager - http://jquery.malsup.com/cycle/pager.html](http://jquery.malsup.com/cycle/pager.html)

# c# - 如何在多页中打印一张大图像？

> ID：14075844
> 
> 赞同：2
> 
> 时间：2012-12-28T21:11:05.283
> 
> 标签：c#, winforms, printing

我想在多页中打印一张高（长）图像。因此，在每一页中，我都会从图像中提取合适的部分，然后将其绘制在页面中。

问题是我在页面中缩小了图像（其形状被压缩），所以我添加了一个值为 1500 的比例。我认为如果我知道页面的高度（例如图形）以像素为单位，我可以解决这个问题。要将英寸转换为像素，我必须乘以 (e.Graphics.DpiX = 600) 还是乘以 96 。

```
void printdocument_PrintPage(object sender, PrintPageEventArgs e)
        {
           if (pageImage ==  null) 
               return;
            e.Graphics.PageUnit = GraphicsUnit.Pixel;

            e.Graphics.InterpolationMode = InterpolationMode.HighQualityBicubic;
            e.Graphics.PixelOffsetMode = PixelOffsetMode.HighQuality;

            float a = (e.MarginBounds.Width / 100) * e.Graphics.DpiX;
            float b = ((e.MarginBounds.Height / 100) * e.Graphics.DpiY);
            int scale = 1500;
            scale = 0; //try to comment this
            RectangleF srcRect = new RectangleF(0, startY, pageImage.Width, b - scale);
            RectangleF destRect = new RectangleF(0, 0, a, b);
            e.Graphics.DrawImage(pageImage, destRect, srcRect, GraphicsUnit.Pixel);
            startY = Convert.ToInt32(startY + b - scale);
            e.HasMorePages = (startY < pageImage.Height);
        } 
```

你能不能让它正常工作。

[您可以从（此处](http://www.c-sharpcorner.com/Forums/UploadFile/houssam11350/12282012155330PM/largeimagemultipages.zip)）下载源代码。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T23:36:32.077

我试图完成你的任务。干得好。希望能帮助到你。

此方法将图像打印在几页上（如果图像很小，则打印一页）。

```
private void printImage_Btn_Click(object sender, EventArgs e)
    {
        list = new List<Image>();
        Graphics g = Graphics.FromImage(image_PctrBx.Image);
        Brush redBrush = new SolidBrush(Color.Red);
        Pen pen = new Pen(redBrush, 3);
       decimal xdivider = image_PctrBx.Image.Width / 595m;
        int xdiv = Convert.ToInt32(Math.Ceiling(xdivider));
        decimal ydivider = image_PctrBx.Image.Height / 841m;
        int ydiv = Convert.ToInt32(Math.Ceiling(ydivider));
        /*int xdiv = image_PctrBx.Image.Width / 595; //This is the xsize in pt (A4)
        int ydiv = image_PctrBx.Image.Height / 841; //This is the ysize in pt (A4)
        // @ 72 dots-per-inch - taken from Adobe Illustrator

        if (xdiv >= 1 && ydiv >= 1)
        {*/
            for (int i = 0; i < xdiv; i++)
            {
                for (int y = 0; y < ydiv; y++)
                {
                    Rectangle r;
                    try
                    {
                        r = new Rectangle(i * Convert.ToInt32(image_PctrBx.Image.Width / xdiv),
                                                    y * Convert.ToInt32(image_PctrBx.Image.Height / ydiv),
                                                    image_PctrBx.Image.Width / xdiv,
                                                    image_PctrBx.Image.Height / ydiv);
                    }
                    catch (Exception)
                    {
                        r = new Rectangle(i * Convert.ToInt32(image_PctrBx.Image.Width / xdiv),
                          y * Convert.ToInt32(image_PctrBx.Image.Height),
                          image_PctrBx.Image.Width / xdiv,
                          image_PctrBx.Image.Height);
                    }

                    g.DrawRectangle(pen, r);
                    list.Add(cropImage(image_PctrBx.Image, r));
                }
            }

        g.Dispose();
        image_PctrBx.Invalidate();
        image_PctrBx.Image = list[0];

        PrintDocument printDocument = new PrintDocument();
        printDocument.PrintPage += PrintDocument_PrintPage;
        PrintPreviewDialog previewDialog = new PrintPreviewDialog();
        previewDialog.Document = printDocument;
        pageIndex = 0;
        previewDialog.ShowDialog();
        // don't forget to detach the event handler when you are done
        printDocument.PrintPage -= PrintDocument_PrintPage;
    } 
```

此方法以所需尺寸（A4 尺寸）打印 List 中的每张图片：

```
 private void PrintDocument_PrintPage(object sender, PrintPageEventArgs e)
    {
        // Draw the image for the current page index
        e.Graphics.DrawImageUnscaled(list[pageIndex],
                                     e.PageBounds.X,
                                     e.PageBounds.Y);
        // increment page index
        pageIndex++;
        // indicate whether there are more pages or not
        e.HasMorePages = (pageIndex < list.Count);
    } 
```

此方法裁剪图像并返回图像的每个部分：

```
 private static Image cropImage(Image img, Rectangle cropArea)
    {
        Bitmap bmpImage = new Bitmap(img);
        Bitmap bmpCrop = bmpImage.Clone(cropArea, System.Drawing.Imaging.PixelFormat.DontCare);
        return (Image)(bmpCrop);
    } 
```

图像从 PictureBox 加载，因此请确保图像已加载。（还没有异常处理）。

```
 internal string tempPath { get; set; }
    private int pageIndex = 0;
    internal List<Image> list { get; set; } 
```

这些变量被定义为全局变量。

您可以在此处下载示例项目：

> [http://www.abouchleih.de/projects/PrintImage_multiplePages.zip](http://www.abouchleih.de/projects/PrintImage_multiplePages.zip) // 旧版本 [http://www.abouchleih.de/projects/PrintImage_multiplePages_v2.zip](http://www.abouchleih.de/projects/PrintImage_multiplePages_v2.zip) // 新

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-16T11:12:00.357

## 我已经为多页创建了一个类文件打印一个大图像。

* * *

**Cls_PanelPrinting.Print 打印 =new Cls_PanelPrinting.Print(PnlContent/Image);**

您必须通过面板或图像。

* * *

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.IO;
using System.Drawing.Printing;

namespace Cls_PanelPrinting
{
    public class Print
    {
        readonly PrintDocument printdoc1 = new PrintDocument();
        readonly PrintPreviewDialog previewdlg = new PrintPreviewDialog();
        public int page = 1;
        internal string tempPath { get; set; }
        private int pageIndex = 0;
        internal List<Image> list { get; set; }
        private int _Line = 0;

        private readonly Panel panel_;

        public Print(Panel pnl)
        {
            panel_ = pnl;
            printdoc1.PrintPage += (printdoc1_PrintPage);
            PrintDoc();
        }

        private void printdoc1_PrintPage(object sender, PrintPageEventArgs e)
        {
            Font myFont = new Font("Cambria", 10, FontStyle.Italic, GraphicsUnit.Point);

            float lineHeight = myFont.GetHeight(e.Graphics) + 4;

            float yLineTop = 1000;

            int x = e.MarginBounds.Left;
            int y = 25; //e.MarginBounds.Top;
            e.Graphics.DrawImageUnscaled(list[pageIndex],
                                        x,y);

            pageIndex++;
            e.HasMorePages = (pageIndex < list.Count);

            e.Graphics.DrawString("Page No: " + pageIndex, myFont, Brushes.Black,
                 new PointF(e.MarginBounds.Right, yLineTop));

        }

        public void PrintDoc()
        {

            try
            {

                Panel grd = panel_;
                Bitmap bmp = new Bitmap(grd.Width, grd.Height, grd.CreateGraphics());
                grd.DrawToBitmap(bmp, new Rectangle(0, 0, grd.Width, grd.Height));

                Image objImage = (Image)bmp;

                Bitmap objBitmap = new Bitmap(objImage, new Size(700, objImage.Height));

                Image PrintImage = (Image)objBitmap;

                list = new List<Image>();
                Graphics g = Graphics.FromImage(PrintImage);
                Brush redBrush = new SolidBrush(Color.Red);
                Pen pen = new Pen(redBrush, 3);
                decimal xdivider = panel_.Width / 595m;
                // int xdiv = Convert.ToInt32(Math.Ceiling(xdivider));
                decimal ydivider = panel_.Height / 900m;
                int ydiv = Convert.ToInt32(Math.Ceiling(ydivider));

                int xdiv = panel_.Width / 595; //This is the xsize in pt (A4)

                for (int i = 0; i < xdiv; i++)
                {
                    for (int y = 0; y < ydiv; y++)
                    {
                        Rectangle r;
                        if (panel_.Height > 900)
                        {

                            try
                            {
                                if (list.Count > 0)
                                {
                                    r = new Rectangle(0, (900 * list.Count), PrintImage.Width, PrintImage.Height - (900 * list.Count));
                                }
                                else
                                {
                                    r = new Rectangle(0, 0, PrintImage.Width, 900);
                                }
                                list.Add(cropImage(PrintImage, r));
                            }

                            catch (Exception)
                            {

                                list.Add(PrintImage);
                            }
                        }
                        else { list.Add(PrintImage); }

                    }
                }

                g.Dispose();

                PrintImage = list[0];

                PrintDocument printDocument = new PrintDocument();
                printDocument.PrintPage += printdoc1_PrintPage;
                PrintPreviewDialog previewDialog = new PrintPreviewDialog();
                previewDialog.Document = printDocument;
                pageIndex = 0;

                printDocument.DefaultPageSettings.PrinterSettings.PrintToFile = true;

                string path = "d:\\BillIng.xps";
                if (File.Exists(path))
                    File.Delete(path);

                printDocument.DefaultPageSettings.PrinterSettings.PrintFileName = "d:\\BillIng.xps";
                printDocument.PrintController = new StandardPrintController();

                printDocument.Print();

                printDocument.PrintPage -= printdoc1_PrintPage;
            }

            catch { }

        }
        private static Image cropImage(Image img, Rectangle cropArea)
        {
            Bitmap bmpImage = new Bitmap(img);
            Bitmap bmpCrop = bmpImage.Clone(cropArea, System.Drawing.Imaging.PixelFormat.DontCare);
            return (Image)(bmpCrop);
        }

    }
} 
```

# css - 来自base64 img的CSS背景网址在移动设备上

> ID：14075845
> 
> 赞同：0
> 
> 时间：2012-12-28T21:11:13.873
> 
> 标签：css, background, base64

我用来通过base64 img设置背景渐变，如图所示：

```
background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2Y5ZmNmNyIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNlNmU2ZTYiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+); 
```

如果您在浏览选项卡中运行它，它看起来像：

```
<?xml version="1.0" ?>
<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 1 1" preserveAspectRatio="none">
  <linearGradient id="grad-ucgg-generated" gradientUnits="userSpaceOnUse" x1="0%" y1="0%" x2="0%" y2="100%">
    <stop offset="0%" stop-color="#f9fcf7" stop-opacity="1"/>
    <stop offset="100%" stop-color="#e6e6e6" stop-opacity="1"/>
  </linearGradient>
  <rect x="0" y="0" width="1" height="1" fill="url(#grad-ucgg-generated)" />
</svg> 
```

我想知道为什么在手机上它不起作用？

正如我所看到的，它适用于每个浏览器的 PC，那么移动设备呢？

我在 Android Galaxy

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T04:21:39.797

实际上，您将需要 XML 声明。尝试添加 DOCTYPE，然后对整个 SVG XML 进行编码：

```
<?xml version="1.0" ?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 1 1" preserveAspectRatio="none">
  <linearGradient id="grad-ucgg-generated" gradientUnits="userSpaceOnUse" x1="0%" y1="0%" x2="0%" y2="100%">
    <stop offset="0%" stop-color="#f9fcf7" stop-opacity="1"/>
    <stop offset="100%" stop-color="#e6e6e6" stop-opacity="1"/>
  </linearGradient>
  <rect x="0" y="0" width="1" height="1" fill="url(#grad-ucgg-generated)" />
</svg> 
```

# chef-infra - 如何在 RightScale 厨师食谱中获取正在运行的食谱的完整路径？

> ID：14075847
> 
> 赞同：4
> 
> 时间：2012-12-28T21:11:15.060
> 
> 标签：chef-infra, chef-recipe, rightscale

从我当前正在执行的食谱食谱中，我想访问它在我的执行机器上的“当前”位置。

我需要这个来访问它的缓存目录结构。

我感觉它位于“node[]”内的某个地方，但我根本找不到任何关于它的结构的文档。

有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-28T21:37:17.230

Just found the solution by inspecting the "run_context" instance:

```
ruby_block "reload_client_config" do
  block do
    puts "HERE!!!!!  -> " + run_context.cookbook_collection[cookbook_name].root_dir
  end
  action :create
end 
```

This came to me after seeing this thread - [Get deployed cookbook version](https://stackoverflow.com/questions/13689811/get-deployed-cookbook-version)

# objective-c - 无法从 Mac OS X Mountain Lion 上的安全框架获取 MD5 校验和

> ID：14075854
> 
> 赞同：2
> 
> 时间：2012-12-28T21:11:51.657
> 
> 标签：objective-c, security, frameworks, nsdata

```
 NSString *curFourChanFilePath = [currentSubFile stringByAppendingPathComponent:curFourChanFile];

    NSData *imageData = [NSData dataWithContentsOfFile:curFourChanFilePath];

    CFErrorRef theError;

    SecTransformRef testTransform = SecDigestTransformCreate(kSecDigestMD5,0,&theError);

    CFDataRef theDataRef = (__bridge CFDataRef)imageData;

    SecTransformSetAttribute(testTransform, kSecTransformInputAttributeName, theDataRef, &theError);

    NSData *resultingData = (__bridge NSData *)(SecTransformExecute(testTransform, &theError));

    NSString *resultingString = [[NSString alloc] initWithData:resultingData encoding:NSUTF8StringEncoding];

    NSLog(@"%@",resultingString);

    [checksumMapTable setObject:resultingData forKey:curFourChanFile]; 
```

这是我遇到问题的代码。这段代码在一个嵌套的嵌套循环中，所有代码都可以正常工作，直到将数据转换为 NSString。UTF8似乎有问题。所有的字符串都变成（null），但奇怪的是，它不是（null）。当我将编码更改为 UTF16 或 UTF32 时，我得到了文本。不可读的文本，正如您使用错误的编码所期望的那样，这一切都是乱码，但它显然就在那里，我似乎无法以我认为正确的编码 UTF8 来理解它。任何帮助，将不胜感激。再次重申，到目前为止，所有代码似乎都运行良好。安全框架对我来说还是有点新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T14:36:54.507

实际上，我只是回答了我自己的问题。使用 SecEncodeTransformCreate(NULL, NULL) 并通过它发送数据，我得到了校验和。问题解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T14:34:46.380

将您的编码更改为可以解码*任何*字节值的编码。例如`NSISOLatin1StringEncoding`. 这应该会给你一个类似于 的输出`openssl md5 -binary`。

并不是说结果会很有意义……</p>

# group-by - groupby 函数获取后续值

> ID：14075855
> 
> 赞同：1
> 
> 时间：2012-12-28T21:11:54.340
> 
> 标签：group-by, pandas

在我的数据中，我有订单顺序和时间的库存量，我需要通过抓住链时间的下一部分来遍历订单的每个部分并找到它何时结束。

我刚从 python 开始，我会通过将每个股票子集到自己的池中来做到这一点，然后添加然后执行另一个循环来查找该序列的下一个订单的时间。最终，在 R/Matlab 中你可以去`X$time[1:end-1] <- X$time[2:end,]`

我的问题：我可以使用`df.groupby['sequence'].{for each entry get the time from the subsequent entry}`???

我想`last()`会给我整个序列的最后一个值，我想要下一个序列开始/出现的时间

我有一组类型：

```
sequence time
a        1
b        1
a        3
a        5
b        2 
```

我想

```
sequence time  nexttime
a        1       3
b        1       2
a        3       5
a        5       999
b        2       999 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T00:00:31.820

```
In [24]: df
Out[24]: 
  sequence  time
0        a     1
1        b     1
2        a     3
3        a     5
4        b     2

In [25]: df['nexttime'] = df.groupby('sequence').time.shift(-1).fillna(999)

In [26]: df
Out[26]: 
  sequence  time  nexttime
0        a     1         3
1        b     1         2
2        a     3         5
3        a     5       999
4        b     2       999 
```

# javascript - Kineticjs：添加矩形，删除矩形，然后再次添加不工作鼠标悬停

> ID：14075859
> 
> 赞同：0
> 
> 时间：2012-12-28T21:12:11.157
> 
> 标签：javascript, html, canvas, kineticjs

我在图层中添加、删除和重新添加 kineticjs 时遇到问题。

重新添加后它停止工作鼠标事件。例子：

```
object.on("mouseover", function() { console.log("mouseover"); });
layer.add(object);
object.remove();
layer.add(object); 
```

这是该问题的重现：

[小提琴](http://jsfiddle.net/VDr6z/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T17:19:08.770

您应该改用工厂方法：http: [//jsfiddle.net/VDr6z/1/](http://jsfiddle.net/VDr6z/1/)

```
var obj = {
    rect : undefined,
    rectstored : function(){
        return new Kinetic.Rect({
            x : 10,
            y : 10,
            width : 30,
            height : 30,
            fill : "rgb(140,140,140)"
        });
    }
}; 
```

您还需要管理矩形：

```
$("#create").click(function(){
    if (obj.rect) return; // don't create more than one rect.

    var rect = obj.rectstored();  // create new rect

    rect.on("mouseover", function(){
        $("#console").html("mouse is over");
    });
    rect.on("mouseout", function(){
        $("#console").html("mouse is out");
    });

    obj.rect = rect;

    layer.add(rect);
    layer.draw();
});

$("#delete").click(function(){
    if (!obj.rect) return;  // exit if there is no rect

    obj.rect.remove();
    delete obj.rect;        // delete reference to rect

    layer.draw();
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T10:09:08.033

如果您不需要删除对象，只需隐藏和取消隐藏对象即可为您解决

```
var javascriptobj = {
    rectstored : new Kinetic.Rect({
        x : 10,
        y : 10,
        width : 30,
        height : 30,
        fill : "rgb(140,140,140)"
    })
};

var stage = new Kinetic.Stage({
    container : 'canvas',
    width : 120,
    height : 120,
});

var layer = new Kinetic.Layer();
stage.add(layer);
    layer.add(javascriptobj.rectstored);
    javascriptobj.rectstored.hide();

$("#create").click(function(){
    javascriptobj.rectstored.on("mouseover", function(){
        $("#console").html("mouse is over");
    });
    javascriptobj.rectstored.on("mouseout", function(){
        $("#console").html("mouse is out");
    });

    javascriptobj.rectstored.show();
        layer.draw();
});

$("#delete").click(function(){
    javascriptobj.rectstored.hide();
    layer.draw();
});​ 
```

# javascript - 如何删除逗号并用句点替换javascript

> ID：14075860
> 
> 赞同：3
> 
> 时间：2012-12-28T21:12:12.120
> 
> 标签：javascript, arrays, string, object, conditional-statements

我有一个字符串，我想在其中删除最后一个逗号并将其替换为句点。我想保留所有其他逗号。在这里，我尝试使用条件语句，它可以添加逗号，但无法用句点替换最后一个。我是新手，我非常感谢任何帮助。

```
for (var i = 0; i < petArray.length; i++) {
    petObj = petArray[i];
    likesString = petObj.name + " " + " is a " + petObj.type + " she " + " likes ";
    for (var j = 0; j < petObj.likes.length; j++) {
        if (j < petObj.likes.length) {
            var likesString = likesString + petObj.likes[j] + ", ";
        }
        else if (j == petObj.likes.length) {
            likesString.replace(", ", ".");
        }
    }
    displayResult();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T21:19:32.413

看来你做的很辛苦！使用 Arry 的 join() 方法构建列表。

```
for (var i = 0; i < petArray.length; i++) {
    petObj = petArray[i];
    likesString = petObj.name + " is a " + petObj.type + " she likes " +
                  petObj.likes.join(", ") + ".";
    displayResult();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T21:17:36.557

这将做到：

```
 str.replace(/,([^,]*)$/,".$1") 
```

正则表达式匹配一个逗号，后跟任意数量的非逗号，一直到字符串的末尾......根据定义，这是最后一个逗号。如果没有逗号，一个逗号或任意数量的逗号，它就可以工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T21:24:17.670

请注意，这里的“if”部分必须始终为真，因此永远不会执行“else”部分：

```
for (var j = 0; j < petObj.likes.length; j++) {
    if (j < petObj.likes.length) {
        var likesString = likesString + petObj.likes[j] + ", ";
    }
    else if (j == petObj.likes.length) {
        likesString.replace(", ", ".");
    }
} 
```

for 循环表示仅在该条件为真时才继续，然后您的代码测试相同的条件。

你可能只是做这样的事情：

```
for (var j = 0; j < petObj.likes.length; j++) {
    if (j < petObj.likes.length-1) {
        likesString = likesString + petObj.likes[j] + ", ";
    }
    else {
        likesString = likesString + petObj.likes[j] + ". ";
    }
} 
```

有更好的方法来做不重复的条件，但可能会做你想要的。（我还修复了额外的“var”部分。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-28T21:26:48.863

这里是学习和测试正则表达式的好地方：[RegExr](http://gskinner.com/RegExr/)

本质上，您要替换以下内容：

```
RegExp Pattern: /,([^,]+)$/
Replace Pattern: .$1 
```

所以你的代码应该是这样的：

```
s.replace(/,([^,]+)$/, '.$1'); 
```

`s`您要替换最后一个逗号的字符串在哪里。

不要忘记将该行设置为变量以保存它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-28T21:15:40.707

要将字符串中最后出现的逗号替换为句点，可以使用：

```
var index = str.lastIndexOf(",");
var newstr = str.substring(0, index) + "." + str.substring(index + 1); 
```

查看您的代码后，似乎 epascarello 的方法是最好的。除了他指出的，如果数组中没有元素，你的字符串会有点突然以：“she likes”结尾。要解决此问题，您可以使用：

```
likesString = petObj.name + " is a " + petObj.type + (petObj.likes.length ? ", she likes " + petObj.likes.join(", ") : "") + "."; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-28T21:29:15.133

首先，您可以避免将最后一个逗号放在这样的代码中：

```
for (var i = 0; i < petArray.length; i++) {
    petObj = petArray[i];
    var likesString = petObj.name + " " + " is a " + petObj.type;
    if (petObj.likes.length) {
       likesString = likesString + " she " + " likes " petObj.likes.join(", ");
    }
    likesString = likesString + '.'
    displayResult();
} 
```

如果您仍想使用您的代码，则必须测试与 lenght-1 的对比，因为 likes 数组索引从 0 变为 length-1：

```
for (var i = 0; i < petArray.length; i++) {
    petObj = petArray[i];
    var likesString = petObj.name + " " + " is a " + petObj.type + " she " + " likes ";
    for (var j = 0; j < petObj.likes.length; j++) {
      likesString = likesString + petObj.likes[j] + ((j == petObj.likes.length-1)?'.':', ';
    }
    displayResult();
} 
```

如果您仍然想在构建后更改字符串，您可以删除最后两个字符

```
likesString=likesString.replace(/, $/,'.') 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-12-28T21:15:50.700

那是因为 replace() 返回一个带有新值的新字符串，而不是更改字符串本身，您可以这样做：

```
likesString = likesString.replace(/,\s$/, "."); 
```

# ruby - 从 sinatra 的帖子调用系统

> ID：14075862
> 
> 赞同：3
> 
> 时间：2012-12-28T21:12:14.953
> 
> 标签：ruby, bash, sinatra

我为树莓派制作了一个非常小的应用程序，它使用 Sinatra：
[https ://github.com/khebbie/SpeakPi](https://github.com/khebbie/SpeakPi)

该应用程序允许用户在 textarea 中输入一些文本，并要求 Google 为其创建一个 mp3 文件。

在那里，我有一个名为 speech2.sh 的 shell 脚本，它调用 Google 并播放 mp3 文件：

```
#!/bin/bash
say() { 
wget -q -U Mozilla -O out.mp3 "http://translate.google.com/translate_tts?tl=da&q=$*";

local IFS=+;omxplayer out.mp3; 
}
say $* 
```

当我像这样从命令行调用 speech.sh 时：

```
./speech2.sh %C3%A6sel 
```

它的发`%C3%A6`音像丹麦字母“æ”，这是正确的！

我从 Sinatra 路由中调用 Speech2.sh，如下所示：

```
post '/say' do
  message = params[:body]
  system('/home/pi/speech2.sh '+ message)
  haml :index
end 
```

当我这样做时，谷歌会发出一些非常奇怪的字符，例如“破管子......”这是错误的！

所有字符`a-z`都正确发音

我尝试了一些 URL 编码和解码，但没有任何效果。

我尝试将消息输出到命令行，这`"%C3%A6"` 确实没有意义。你知道我做错了什么吗？

**编辑**

总结和简化 - 如果我在 bash 中这样输入：

```
./speech2.sh %C3%A6sel 
```

有用

如果我开始一个 irb 会话并输入：

```
system('/home/pi/speech2.sh', '%C3%A6sel') 
```

这没用！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T12:04:57.463

`# encoding: UTF-8`由于它正在处理 UTF-8，因此通过在 Ruby 脚本顶部添加魔术注释并`ie=UTF-8`在调用 Google 翻译时在查询字符串中传递参数来确保编码在整个过程中保持正确。

# android - 对话框方法不起作用

> ID：14075865
> 
> 赞同：0
> 
> 时间：2012-12-28T21:12:24.920
> 
> 标签：android, methods, dialog, forceclose

我正在尝试创建一个对话框方法，但是当我调用它时，它会导致强制关闭。我在日志猫上得到的唯一东西是：

dalvikvm 线程=1：线程以未捕获的异常退出（组=0x40ab5c08）

致命异常：主要 java.lang.NullPoinerExeption

我确定其余的都是标准的

**这是我的代码的片段：**

```
 Dialog PercentDialog;

 private void CreateDialog() {
    // TODO Auto-generated method stub
    Context context = Home.this;
    PercentDialog = new Dialog(context);
    //PercentDialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
    PercentDialog.setContentView(R.layout.percent_box);
    Button bOK = (Button) findViewById(R.id.bOK);
    Button bCancel = (Button) PercentDialog.findViewById(R.id.bCancel); 
    EditText etInt = (EditText) PercentDialog.findViewById(R.id.etInt); 
    TextView title = (TextView) PercentDialog.findViewById(R.id.tvTitle);   
    bOK.setOnClickListener(new OnClickListener(){

        public void onClick(View v) {
            // TODO Auto-generated method stub

        }

    });
    bCancel.setOnClickListener(new OnClickListener(){

        public void onClick(View v) {
            // TODO Auto-generated method stub
            PercentDialog.dismiss();
        }

    });

    PercentDialog.show();
} 
```

然后我使用 CreateDialog(); 调用我的方法，但它被强制关闭。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T21:15:26.303

从您现有的代码来看，这一行：

```
Button bOK = (Button) findViewById(R.id.bOK); 
```

应该：

```
Button bOK = (Button) PercentDialog.findViewById(R.id.bOK); 
```

（另请阅读[Java 命名约定](http://java.about.com/od/javasyntax/a/nameconventions.htm)，其中规定变量应以小写字母开头。）

# r - quantstrat 演示错误

> ID：14075872
> 
> 赞同：0
> 
> 时间：2012-12-28T21:13:44.337
> 
> 标签：r, quantstrat

我已经安装了 quantsrat 并尝试了演示以更好地了解它的工作方式，但所有这些都以错误告终。例如，对于 RSI，我在 rbind(deparse.level, ...) 中遇到错误：在输出买入卖出订单的部分，数据必须具有相同数量的列来逐行绑定。

这是我的 sessionInfo()：R 版本 2.15.2 (2012-10-26) 平台：i386-apple-darwin9.8.0/i386 (32-bit)

```
locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] quantstrat_0.7.7        blotter_0.8.13          FinancialInstrument_1.1
[4] quantmod_0.3-17         Defaults_1.1-1          TTR_0.21-1             
[7] xts_0.8-8               zoo_1.7-9              

loaded via a namespace (and not attached):
[1] grid_2.15.2     lattice_0.20-10 tools_2.15.2 
```

有谁知道为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T23:58:21.587

你是对的：我在运行 rsi.R 时遇到同样的错误，而且 macs.R 也会出现问题。

但是 bbands.R 工作正常，luxor 演示也是如此。我建议您在我们修复演示时查看这些内容。

# wpf - 单击设计器时始终选择 RadBusyIndi cator

> ID：14075875
> 
> 赞同：1
> 
> 时间：2012-12-28T21:13:45.047
> 
> 标签：wpf, visual-studio-2010, xaml, telerik

我的 UserControl 上有一个 RadBusyIndi​​cator，如下所示：

```
<Grid>
    <!-- Other Content -->
    <t:RadBusyIndicator IsBusy="{Binding IsBusy}"></t:RadBusyIndicator>
</Grid> 
```

每当我在设计视图中单击时，它都会转到 BusyIndi​​cator。

我可以将 Panel.ZIndex 设置为负值以选择“其他内容”，但这会导致 RadBusyIndi​​cator 位于“其他内容”后面

我尝试使用 ZIndex 的绑定，如下所示：

```
<t:RadBusyIndicator Panel.ZIndex="{Binding BusyZIndex}" IsBusy="{Binding IsBusy}"></t:RadBusyIndicator> 
```

但这无济于事。

所以问题是：

**如何在所有“其他内容”的“顶部”上显示 RadBusyIndi​​cator，但仍然能够单击（在设计器中）并转到该控件的 xaml 行？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T23:39:40.683

BusyIndi​​cator 需要“在顶部”才能位于控件的前面。这使得它在设计师中也名列前茅。

可能有更好的方法来解决这个问题，但想到的是让 BusyPanel 成为 UserControl 上的 Resource，然后将其添加到 Grid 控件中 OnApplyTemplate 或通过代码加载。

**这是 UserControl 的 XAML。**

```
<UserControl x:Class="WpfApplication2.UserControl1"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:t="REFERENCE.TO.THE.RAD.ASSEMBLY" 
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
    <UserControl.Resources>
        <t:RadBusyIndicator x:Key="TheBusyIndicator" IsBusy="{Binding IsBusy}">
    </UserControl.Resources>
    <Grid x:Name="LayoutRoot">
        <Button Content="Some content to the button"
                Height="25"
                Width="200"/>
    </Grid>
</UserControl> 
```

我已将 BusyIndi​​cator 添加为具有“TheBusyIndi​​cator”键的资源。我还将 x:Name="LayoutRoot" 添加到将包含 BusyIndi​​cator 的网格中。如果 Grid 实际上不是布局根控件，它当然可以有另一个名称。

通过最后将 BusyIndi​​cator 添加到 Children 集合，它将出现在由标记代码添加的所有其他控件的前面。

**这是代码**

UserControl 的构造函数：

```
public UserControl1()
{
    this.Loaded += new RoutedEventHandler(UserControl1_Loaded);
} 
```

执行代码：

```
private void UserControl1_Loaded(object sender, RoutedEventArgs e)
{
    this.LayoutRoot.Children.Add(this.Resources["TheBusyIndicator"] as RadBusyIndicator);
} 
```

我不再使用 UserControls，只使用 XAML 转到“Generic.xaml”的 CustomControls，而且我没有编辑器可以使用。所以我有一段时间没有看到这个问题了。

# jsf-2 - Immediate="true" 导致 update="component" 失败

> ID：14075881
> 
> 赞同：11
> 
> 时间：2012-12-28T21:14:15.527
> 
> 标签：jsf-2, primefaces

我有一个命令按钮（具体来说是取消按钮），我想绕过对页面上某些组件的验证。当我在命令按钮上设置了 immediate="true" 时，更新属性不起作用。“不起作用”是指 :centerForm:p_definition 上的值不会重置为应有的值。如果我从下拉列表中选择一个项目或在输入文本中输入数据，则单击取消时信息应该会消失。设置 immediate="false" 或完全关闭它会按预期重置字段。这是我遇到问题的命令按钮的定义。

```
<p:commandButton value="Cancel" style="float: right;"
    immediate="true"
    actionListener="#{manageBomPropHandler.doCancel()}"
    update=":centerForm:p_definition"/> 
```

这是来自 immediate="true" 的预期行为吗？如果是这样，您如何解决取消按钮的问题？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-12-05T02:35:15.413

“更新”将在更新模型值阶段被调用/执行。当您将“立即”属性设置为按钮命令时，此阶段将被忽略。有关详细信息，请参见下图。 ![标准生命周期执行更新模型值阶段](../Images/c5d3805356919d30b69273e3497fce38.png)

```
 P1: Standard Lifecycle executes Update Model Values phase 
```

![忽略立即生命周期更新模型值阶段](../Images/519292931cb43a5f57e793947119458c.png)

```
 P2: Immediate Lifecycle ignored Update Model Values phase 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-23T07:26:05.233

如果可能有帮助，已经有一个带有 primefaces 的干净输入字段的解决方案：

```
<p:commandButton value="Reset Tag" update="panel" process="@this" style="margin-right:20px;" >
    <p:resetInput target="panel" />
</p:commandButton> 
```

或者

```
<h:commandButton value="Reset p:ajax" style="margin-right:20px;" >
    <p:ajax update="panel" resetValues="true" />
</h:commandButton> 
```

资料来源： http: [//www.primefaces.org/showcase/ui/misc/resetInput.xhtml](http://www.primefaces.org/showcase/ui/misc/resetInput.xhtml)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-18T11:05:23.003

就我而言，为了更新字段，我已将 p:ajax 附加到所需的组件上。这确保了一旦用户在任何这些字段中进行更改，支持 bean 中的相应字段/变量就会更新。

我的另一个要求是在用户单击立即 - 真正的命令按钮后刷新数据表。为了做到这一点，我使用了如下代码：

```
RequestContext.getCurrentInstance().reset("Datatable ID"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T21:29:52.780

是的，这表明我对 JSF 生命周期的无知。在这里找到答案：[JSF commandButton with immediate="true"](https://stackoverflow.com/questions/619050/jsf-commandbutton-with-immediate-true)在这里：[https ://cwiki.apache.org/confluence/display/MYFACES/Clear+Input+Components](https://cwiki.apache.org/confluence/display/MYFACES/Clear+Input+Components)

# php - PHP上传的问题

> ID：14075884
> 
> 赞同：0
> 
> 时间：2012-12-28T21:14:25.413
> 
> 标签：php, upload

我的代码：

```
if(isset($_FILES['image'])){
    $allowedExts = array('jpg', 'gif', 'png');
    $extension = end(explode('.', $_FILES['image']['name']));
    if(in_array($extension, $allowedExts)){
        if($_FILES['image']['size'] < 50000){
            if ($_FILES['image']['error'] > 0){
                $uploaderror = $_FILES['image']['error'];
            }else{
                $uploaderror = 'FALLBACK ERROR';
                if(file_exists('..images/'.$_FILES['image']['name'])){
                    $uploaderror = 'The file <strong>'.$_FILES['image']['name'].'</strong> already exists in the images directory.';
                }else{
                    move_uploaded_file($_FILES['file']['tmp_name'], '..images/'.$_FILES['file']['name']);
                    $uploadsuccess = $_FILES['file']['name'];
                }
            }
        }else{$uploaderror = 'The image is too large.';}
    }else{$uploaderror = 'Only images (.jpg, .png, and .gif) are allowed.';}
}else{$uploaderror = 'No attempt';} 
```

输出： `$uploaderror`返回`FALLBACK ERROR`且未`$uploadsuccess`设置。该文件未出现在指定目录中，我在服务器上找不到它。请告诉我我做错了什么。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T22:02:47.570

您缺少`/`after`..`和 before `images`，要解决此问题，只需更改以下内容：

```
move_uploaded_file($_FILES['file']['tmp_name'], '..images/'.$_FILES['file']['name']); 
```

到以下：

```
move_uploaded_file($_FILES['file']['tmp_name'], '../images/'.$_FILES['file']['name']); 
```

通过终端运行您的代码，您将得到以下响应：

> ..images：没有这样的文件或目录

**编辑**

我找到了另一个你忘记的地方`/`，那就是你的`file_exists()`支票。

我也清理了您的代码，使其更具可读性：

```
<?php
$errors = array();
$allowedExts = array('jpg', 'gif', 'png');
$extension = pathinfo($_FILES['image']['name'], PATHINFO_EXTENSION);
if(!isset($_FILES['image'])){
    $errors[] = "No attempt.";
}
if(in_array($extension, $allowedExts)){
    $errors[] = "Only images (.jpg, .png, and .gif) are allowed.";
}
if($_FILES['image']['size'] > 50000){
    $errors[] = "The image is too large.";
}
if ($_FILES['image']['error'] <= 0){
    $errors[] = $_FILES['image']['error'];
}
if(file_exists('../images/'.$_FILES['image']['name'])){
    $errors[] = 'The file <strong>'.$_FILES['image']['name'].'</strong> already exists in the images directory.';
}

// No errors found!
if(count($errors) == 0){
    move_uploaded_file($_FILES['file']['tmp_name'], '../images/'.$_FILES['file']['name']);
    $uploadsuccess = $_FILES['file']['name'];
} 
```

# c# - VS2012设计器继承其他表单后无法打开表单

> ID：14075886
> 
> 赞同：2
> 
> 时间：2012-12-28T21:14:40.917
> 
> 标签：c#, winforms, visual-studio-2012, designer

我有一个`BaseForm`用于保存设置的基本表单。此表单中没有控件，它在设计器中作为空表单打开。但是，当我继承这个表单时，设计器拒绝在设计器中打开新创建的表单（设计器中没有按钮查看）。可能是什么问题？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T14:53:48.433

问题出在`.csproj`文件上。

每个表单在文件中都有这样的签名

```
<Compile Include="Opers\MyForm.cs">
  <SubType>Form</SubType>
</Compile> 
```

该`SubType`元素说这实际上是一个表单，在我的文件中，由于某种原因它被删除了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T21:39:59.457

I would highly recommend to avoid inheriting forms whenever possible. For saving settings, this is surely avoidable: make yourself an FormSettingsSaver class or something like that and pass it the form as argument when loading/closing, etc. Inheriting forms can make a lot of headaches and MS isn´t really putting any work in WindowsForms and/or the Designer.

edit: if you want to stick with inheriting forms, check the link from rene in the comment. Most designer problems can be avoided with checking for DesignMode. You could also try to comment out statements until you find the culprit. All code in the constructor and (i think) OnLoad is executed when the form is displayed in the Designer, so there would be a good place to start.

# javascript - 是否可以在表单输入中仅加粗部分占位符文本（即默认值）？

> ID：14075888
> 
> 赞同：4
> 
> 时间：2012-12-28T21:15:05.863
> 
> 标签：javascript, jquery, html, css

> **可能重复：**
> [有没有办法设置输入字段值的一部分？](https://stackoverflow.com/questions/3121683/is-there-a-way-to-style-part-of-an-input-fields-value)
> [有没有办法改变占位符的一个单词颜色？](https://stackoverflow.com/questions/37699705/is-there-any-way-to-change-one-word-color-of-placeholder/37701562#)

例如，如果我们有一个表单输入，其占位符文本是“探索世界，例如巴黎，法国”，那么 CSS、jQuery、HTML5 或任何其他可能的方法是否允许我们仅将表单输入中的部分文本加粗以呈现为：“**探索世界**，例如巴黎，法国”。

我只知道允许我们将整个占位符文本加粗的方法，完全呈现为“**探索世界，例如巴黎，法国**”。

通过说明，这是这个问题的目标：

![目标](../Images/983575a03df70a625575be579c4dfcc6.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T21:30:21.557

使用标准输入[type=text] 字段无法完成此操作。您可以尝试覆盖 HTML，但某些浏览器将输入字段作为控件处理，并且不会像常规的 html dom 元素那样表现。

我会使用的方法是这样的：

```
<html>
<head>
  <style type="text/css">

    div.input { border:1px solid #aaa; width:300px; }

  </style>

</head>
<body>

    <div contenteditable="true" class="input"><strong>explore the world,</strong> e.g. paris, france</div>

</body>
</html> 
```

希望这可以帮助。祝你好运。

# c++ - 无效铸造导致的堆损坏？

> ID：14075890
> 
> 赞同：0
> 
> 时间：2012-12-28T21:15:14.273
> 
> 标签：c++, casting, heap-corruption

我有代码：

```
unsigned char *myArray = new unsigned char[40000];

char pixelInfo[3];
int c = 0;
while(!reader.eof()) //reader is a ifstream open to a BMP file
{
    reader.read(pixelInfo, 3);
    myArray[c] = (unsigned char)pixelInfo[0];
    myArray[c + 1] = (unsigned char)pixelInfo[1];
    myArray[c + 2] = (unsigned char)pixelInfo[2];
    c += 3;
}
reader.close();

delete[] myArray; //I get HEAP CORRUPTION here 
```

经过一些测试，我发现它是由 while 循环中的强制转换引起的，如果我使用有**符号的 char myArray**我没有收到错误，但我必须在其余代码中使用无符号字符。将 pixelInfo 转换为 unsigned char 也会产生相同的错误。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T21:25:17.700

这是你应该做的：

```
reader.read((char*)myArray, myArrayLength); /* note, that isn't (sizeof myArray) */

if (!reader) { /* report error */ } 
```

如果循环内部正在进行处理，那么

```
int c = 0;
while (c + 2 < myArraySize) //reader is a ifstream open to a BMP file
{
    reader.read(pixelInfo, 3);
    myArray[c] = (unsigned char)pixelInfo[0];
    myArray[c + 1] = (unsigned char)pixelInfo[1];
    myArray[c + 2] = (unsigned char)pixelInfo[2];
    c += 3;
} 
```

在你读完之后尝试阅读不是问题——你会在数组的其余部分中得到垃圾，但你可以在最后处理它。

假设您的数组足够大以容纳整个文件会导致缓冲区损坏。涉及带有精心设计的不正确元数据的图像文件的缓冲区溢出攻击是众所周知的。

*   [在 Mozilla](http://www.mozilla.org/security/announce/2012/mfsa2012-92.html)
*   [在 Sun Java 中](http://www.kb.cert.org/vuls/id/388289)
*   [在 Internet Explorer 中](https://www.kb.cert.org/vuls/id/189754)
*   [在 Windows 媒体播放器中](http://technet.microsoft.com/en-us/security/bulletin/ms06-024)
*   [再次在 Mozilla](https://bugzilla.mozilla.org/show_bug.cgi?id=251381)
*   [在 MSN 信使中](http://www.securityfocus.com/bid/12506/discuss)
*   [在 Windows XP 中](http://www.us-cert.gov/cas/techalerts/TA05-362A.html)

**不要依赖于适合计算的缓冲区大小的整个文件内容。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T21:21:43.097

`reader.eof()`只会告诉您前一次读取是否到达文件末尾，这会导致您的最终迭代写入数组末尾。您想要的是检查当前读取是否到达文件末尾。`while`将循环更改为：

```
while(reader.read(pixelInfo, 3)) //reader is a ifstream open to a BMP file
{
  // ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T21:38:23.377

请注意，您一次读取 3 个字节。如果字节总数不能被 3 整除（不是 3 的倍数），那么实际上只有一部分 pixelInfo 数组会填充正确的数据，这可能会导致程序出错。您可以尝试以下**未测试**的代码。

```
while(!reader.eof()) //reader is a ifstream open to a BMP file
{
   reader.read(pixelInfo, 3);
   for (int i = 0; i < reader.gcount(); i++) {
       myArray[c+i] = pixelInfo[i];
   }
   c += 3;
} 
```

Your code does follow the documentation on cplusplus.com very well since eof bit will be set after an incomplete read so this code will terminate after your last read however, as I mentioned before the likely cause of your issue is the fact that you are assigning likely junk data to the heap since pixelInfo[x] might not necessarily be set if 3 bytes were not read.

# jquery - jquery 可拖动 - 包含

> ID：14075893
> 
> 赞同：6
> 
> 时间：2012-12-28T21:15:26.300
> 
> 标签：jquery, jquery-ui

我有一个我正在做的小项目，并且使用 jquery 有一个有趣的包含问题`draggable`：

基本上，我有两个 div - 一个顶部和一个底部。然后，我有第三个 div 是 .draggable({}) 并且可以拖动以调整顶部和底部 div 的大小。

-- 看看这里：http: [//jsfiddle.net/Kpt2K/7/](http://jsfiddle.net/Kpt2K/7/)

问题是，我无法按我的意愿控制拖动。在上面的小提琴中，我将 orange `<span>`s 放在我希望收容开始和结束的地方。

有趣的说明：我尝试做以下事情：

```
$('#container').innerWrap('<div id='containmentBox' />');

var containerHeight = $('#container').height();

$('#containmentBox').css({'height': containerHeight - 45); 
```

这使得底部的遏制工作，但不是顶部跨度。所以，我想我一直在使用`containment: [x1,y1,x2,y2]`，但还没有完全掌握如何使用它。

看看小提琴，让我知道你能想出什么来将可拖动的运动限制在两个橙色跨度内。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-28T21:33:12.110

[包含选项](http://api.jqueryui.com/draggable/#option-containment)允许一个数组在哪里设置包含它的位置。尝试这个：

```
var containmentTop = $("#stop-top").position().top;
var containmentBottom = $("#stop-bottom").position().top;

$('#bar').draggable({axis: 'y', containment : [0,containmentTop,0,containmentBottom] }); 
```

[JSFiddle 示例](http://jsfiddle.net/Kpt2K/11/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-09T12:40:09.507

您也可以使用 a `helper:`，这将允许您添加 a `div`，您可以动态设置可拖动操作发生之前的大小。这允许您在包含中引用它，尽管它实际上还不是页面的一部分。如果您使用`start:`，`div`则在可拖动函数查找包含元素时，它将不存在。你可以在里面清理`stop:`

```
$(<<selector>>).draggable({
    helper: function (event, ui) {
        var target = $(this).clone();
        var oBody = $(document).find('body');
        var containmentDiv = $('<div id="div_containment"></div>');
        containmentDiv
            .css('top',calculatedTop)
            .css('left',calculatedLeft)
            .css('width',calculatedWidth)
            .css('height',calculatedHeight)
            .css('position','absolute');
        containmentDiv.appendTo(oBody);
            target.children('div').remove();
            target.css('background-color','#f00');
            return target;
        },
    stop: function(event, ui) {
        $(document).filter('body').find('#div_containment').remove();
    },
    containment: "#div_containment"   //containment via selector
}); 
```

您可以使用 JavaScript 对象引用在`helper:`其他地方设置计算值

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-28T21:32:30.847

您可以将包含限制在由 2 个停止元素分隔的边界框中：

```
var top = $("#stop-top").offset().top + $("#stop-top").height();
var bottom = $("#stop-bottom").offset().top - $("#bar").height();
$('#bar').draggable({axis: 'y', containment : [0, top, 10000, bottom] }); 
```

JsFiddle：http: [//jsfiddle.net/Kpt2K/9/](http://jsfiddle.net/Kpt2K/9/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-05-08T20:41:41.203

诚然，文档很薄——我必须做很多测试才能弄清楚。

我的错误是认为包含数组定义了可拖动元素可以移动的边界，定义为 [x, y, width, height]，但我发现包含数组定义了左上角和右下角的点定义定义为 [x1, y1, x2, y2] 的边界，包含的元素***原点***可以在其中移动。

这是有道理的，因为最后两个数组元素被定义为 x2 和 y2（点属性），而不是 w 和 h（矩形属性），但文档应该更具体地说明这些参数在上下文中对所包含元素的含义，以及在什么上下文中（相对于包含元素的原点）和坐标系（包含元素的）。

# c# - 在 CommandParameter 中传递项 DataContext

> ID：14075894
> 
> 赞同：2
> 
> 时间：2012-12-28T21:15:34.617
> 
> 标签：c#, wpf, command

我有一个从实例创建的树视图`ItemsSource`，`SecondViewModel`与我的 Window DataContext 不同。

我想通过`CommandParameter 发送属于 TreeViewItem 的 ViewModel。

窗口数据上下文是：`MyViewModel`。treeviewitems 数据上下文是：`SecondViewModel`

我想通过`SecondViewModel`而不是`MyViewModel`。

所以，

```
CommandParameter ="{Binding}" 
```

不起作用（因为它会发送`MyViewModel`）

编辑：一些代码：

```
 <TreeView Name="treeView" ItemContainerStyle="{StaticResource TreeViewItemStyle}"  Grid.Row="1" Grid.Column="1">
        <TreeViewItem Header="{Binding ProjectName}">
            <TreeViewItem commandBehaviors:MouseDoubleClick.Command="{Binding SelectOtherTab}" 
                          commandBehaviors:MouseDoubleClick.CommandParameter="{Binding}" //this returns the data context of the window, I want to return the Item Source
                ContextMenu="{StaticResource AddClassMenu}" ItemTemplate="{DynamicResource ClassDataTemplate}" ItemsSource="{Binding ClassCollection}"> 
```

我怎样才能发送`SecondViewModel`？

**编辑：**

我想启用删除当前项目，但由于某种原因该命令永远不会被调用。

这是代码：

```
<TreeViewItem x:Name="treeViewItem"
                ContextMenu="{StaticResource AddClassMenu}" ItemTemplate="{DynamicResource ClassDataTemplate}" ItemsSource="{Binding ClassCollection}">
                <TreeViewItem.ItemContainerStyle>
                    <Style TargetType="TreeViewItem">
              HERE->>          <Setter Property="ContextMenu" Value="{StaticResource RemoveClassMenu}"/>
                        <Setter Property="commandBehaviors:MouseDoubleClick.Command" 
        Value="{Binding ElementName=treeViewItem, Path=DataContext.SelectOtherTab}" />
                        <Setter Property="commandBehaviors:MouseDoubleClick.CommandParameter" 
        Value="{Binding }" />
                    </Style>
</TreeViewItem> 
```

我的上下文菜单：

```
 <ContextMenu x:Key="RemoveClassMenu">
    <MenuItem Header="Delete" Command="{Binding ElementName=treeViewItem, Path=DataContext.RemoveClass}" CommandParameter="{Binding}"/>
</ContextMenu> 
```

如前所述，该命令永远不会被调用。我的代码有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T19:19:03.613

我认为你要做的是`DoubleClick`对你的孩子设置你的命令`TreeViewItems`，而不是你的父母`TreeViewItem`设置`ItemsSource`

现在您的 XAML 说要构建一个父`TreeViewItem`级，并在其下`TreeViewItems`为`ClassCollection`. 当您双击父级`TreeViewItem`然后运行`SelectOtherTab`命令时，没有任何内容可以指定`TreeViewItem`单击了哪个子级。

这是您现在拥有的 XAML 的简化视图。

```
<TreeView x:Name="treeView">
    <TreeViewItem OnDoubleClick="SelectOtherTab"> <!-- Parent TreeViewItem -->
        <TreeViewItem /><!-- Child TreeViewItems -->
        <TreeViewItem />
        <TreeViewItem />
        ...
    </TreeViewItem>
</TreeView> 
```

相反，您希望将`Command`and`CommandParameter`属性附加到每个 child `TreeViewItem`，如下所示：

```
<TreeViewItem.ItemContainerStyle>
  <Style TargetType="TreeViewItem">
    <Setter Property="commandBehaviors:MouseDoubleClick.Command" 
            Value="{Binding ElementName=treeView, Path=DataContext.SelectOtherTab}" />
    <Setter Property="commandBehaviors:MouseDoubleClick.CommandParameter" 
            Value="{Binding }" />
  </Style>
</TreeViewItem.ItemContainerStyle> 
```

这将使您的简化 XAML 看起来像这样：

```
<TreeView x:Name="treeView">
    <TreeViewItem> <!-- Parent TreeViewItem -->
        <TreeViewItem OnDoubleClick="SelectOtherTab" /><!-- Child TreeViewItems -->
        <TreeViewItem OnDoubleClick="SelectOtherTab"/>
        <TreeViewItem OnDoubleClick="SelectOtherTab" />
        ...
    </TreeViewItem>
</TreeView> 
```

我仍然有点困惑为什么你有一个父母并且正在使用它`TreeViewItem`来构建孩子，但是如果这不是必需的，你可以通过消除这样的父母来简化你的 VisualTree ：`TreeViewItems``ItemsSource``TreeViewItem`

```
<TreeView Name="treeView" 
          ItemsSource="{Binding ClassCollection}"
          ItemContainerStyle="{StaticResource TreeViewItemStyle}"  
          Grid.Row="1" Grid.Column="1">
    <TreeView.Resources>
        <Style TargetType="{x:Type TreeViewItem}">
            <Setter Property="Header" Value="ProjectName" />
            <Setter Property="ContextMenu" Value="{StaticResource AddClassMenu}" />
            <Setter Property="ItemTemplate" Value="{DynamicResource ClassDataTemplate}" />

            <Setter Property="commandBehaviors:MouseDoubleClick.Command" 
                    Value="{Binding ElementName=treeView, Path=DataContext.SelectOtherTab}" />
            <Setter Property="commandBehaviors:MouseDoubleClick.CommandParameter" 
                    Value="{Binding }" />
        </Style>
    </TreeView.Resources>
</TreeView> 
```

这将使您的 TreeView 看起来像这样：

```
<TreeView x:Name="treeView">
    <TreeViewItem OnDoubleClick="SelectOtherTab" />
    <TreeViewItem OnDoubleClick="SelectOtherTab"/>
    <TreeViewItem OnDoubleClick="SelectOtherTab" />
    ...
</TreeView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T21:20:47.690

您必须在 MyViewModel 中声明 SecondViewModel 类型的属性。然后您也可以将数据绑定到内部项目。

CommandParameter ="{绑定 SecondViewModelProp.CommandParam}"

如果命令参数在 SecondViewModelProp 中定义。

如果我理解错了，请告诉我。

```
 public class MyViewModel
 {
    public SecondViewModel  SecondViewModelProp
    {
        get { return new SecondViewModel(); }
    }

   public MyViewModel()
   {

   }
 } 
```

# asp.net - WebApi 中的 Html.BeginForm - 路由

> ID：14075903
> 
> 赞同：1
> 
> 时间：2012-12-28T21:16:19.500
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4, asp.net-web-api, asp.net-web-api-routing

我有一个 Web API 项目作为我的解决方案的一部分（也包含一个 MVC4 项目），并且在 Api 项目中我试图将一个表单发布到 Values 控制器 Post 方法（从 Api 项目中的一个视图）。

使用`Html.BeginForm()`或`Html.BeginForm("Post", "Values")`发布到，`/Values/Post`但我需要它去`/api/Values/Post`

知道我需要将哪些重载或设置发布到正确的位置吗？

我可以从提琴手（例如 localhost/api/values）中很好地使用所有操作方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-12-03T01:03:52.877

您需要`BeginRouteForm`用作 Web API 路由的链接生成始终取决于路由名称。还要确保提供`httproute`如下调用的路由值。

```
@using (Html.BeginRouteForm("DefaultApi", new { controller="Values", httproute="true" })) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T21:29:14.290

API 控制器使用与默认值不同的路由。它应该从 JS（AJAX）而不是真正的表单帖子中使用，因此在 HtmlHelpers 中没有明显的支持。尝试：

```
Html.BeginForm("values", "api") 
```

这会欺骗它认为“值”是动作，而“api”是控制器。“Post”是从 http 方法推断出来的。

# database - 引用同一记录的相邻列以获取查找值

> ID：14075908
> 
> 赞同：0
> 
> 时间：2012-12-28T21:16:46.397
> 
> 标签：database, ms-access, records

我正在创建一个包含姓名和联系电话的数据库。现在有 3 列用于 3 个不同的联系号码（如移动电话、固定电话等）。然后我为“最佳联系人”创建另一个列，即我应该首先尝试拨打哪个号码（在 3 个中）以联系记录。

因此，我想在“最佳联系人”字段上创建一个查找，该字段与该记录的 3 个联系人号码一起下拉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T21:47:47.597

假设联系电话的三列分别是“mobile”、“landline”和“cell”，您可以将类似这样的内容用于“最佳联系电话”控件的行源。

```
select mobile 
from the_phone_numbers_table
where person_id_number = Forms!Your_form_name!person_id_number_control
union all
select landline
from the_phone_numbers_table
where person_id_number = Forms!Your_form_name!person_id_number_control
union all 
select cell
from the_phone_numbers_table
where person_id_number = Forms!Your_form_name!person_id_number_control 
```

但是您可能还应该在表中有一个约束，以保证“最佳联系人”控件的值等于这三个数字之一（这三个列之一），而不是其他数字。

# pointers - 来自不兼容指针类型（结构）的赋值 c

> ID：14075915
> 
> 赞同：0
> 
> 时间：2012-12-28T21:17:21.480
> 
> 标签：pointers, struct, gtk

对于结构

```
typedef struct Recording_Settings recording_settings;
struct Recording_Settings
{
    gchar *profile;
    gchar *destination;
};

recording_settings rec_settings; 
```

当我尝试执行此操作时收到警告

```
static void profile_combo_change_cb(GtkComboBox *combo, gpointer userdata)
{
    GtkTreeIter iter;
    GtkTreeModel *model;

    /* Grab the encoding profile choosen */
    model = gtk_combo_box_get_model (GTK_COMBO_BOX (combo));
    if (gtk_combo_box_get_active_iter(GTK_COMBO_BOX(combo), &iter)) {
        gchar *media_type;
        gtk_tree_model_get(GTK_TREE_MODEL(model), &iter, 0, &media_type, -1);
        rec_settings.profile = rb_gst_get_encoding_profile(media_type); // Warning: assignment from incompatible pointer type
        g_free (media_type);
    }
} 
```

我误解或遗漏了什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T21:27:52.980

的类型`rb_gst_get_encoding_profile`似乎是

```
GstEncodingProfile *rb_gst_get_encoding_profile (const char *media_type); 
```

但是您将其返回值分配给 a `gchar *`。

`GstEncodingProfile`是一种`struct`类型，据我所知 ( `typedef struct _GstEncodingProfile GstEncodingProfile;`)，并且`gchar`可能是`typedef`一种字符类型（很可能`typedef char gchar;`来自 glib）。所以类型将不兼容。

# python - 如何使用 pyselenium 在选择元素中选择选项？

> ID：14075917
> 
> 赞同：0
> 
> 时间：2012-12-28T21:17:38.843
> 
> 标签：python, selenium, automation, web-crawler

这似乎不起作用：

```
select_input = self.ff.find_element_by_name(select_name)
select_input.select_by_value(option_val) 
```

但这似乎`select_by_value`是最明显的选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T21:18:59.337

您必须找到适当的选项元素并且`.click()`它：

```
select_input = self.ff.find_element_by_name(select_name)
option = select_input.find_element_by_xpath("option[value=%s]" % option_val)
option.click() 
```

# html - 在 TD 中将表格居中

> ID：14075918
> 
> 赞同：24
> 
> 时间：2012-12-28T21:17:42.777
> 
> 标签：html, css, html-table, alignment

我有一个非常简单的问题：我需要在一个 TD 元素中居中一个表格。如果我使用 HTML 4，我会这样做：

```
​&lt;table style="border:solid;width: 100%">
    <tr>
        <td align="center">
            <table style="border:solid; width:50%">
                <tr>
                    <td >I must be in the center</td>                    
                </tr>
            </table> 
        </td>                    
    </tr>
</table>​ 
```

但我试图不使用不推荐使用的属性，而是使用 CSS 方式。我已经尝试过了：

```
<td style="text-align:center"> 
```

和这个：

```
<td style="margin: 0 auto"> 
```

表格保留在单元格的左侧。有什么建议么？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-28T21:20:27.417

您的想法是正确的，`margin:auto 0;`只需取下 0。

**工作示例：http: [//jsfiddle.net/cxnR8/](http://jsfiddle.net/cxnR8/)**

```
<table style="border:solid;width: 100%">
    <tr>
        <td>
            <table style="margin:auto;border:solid; width:50%">
                <tr>
                    <td >I must be in the center</td>                    
                </tr>
            </table> 
        </td>                    
    </tr>
</table>​ 
```

但是，更重要的是，您真的需要使用表格和内联样式吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T21:25:14.910

你的第二个建议是正确的。[请参阅此工作示例](http://jsfiddle.net/V5rRC/)。

HTML：

```
<table class="outer">
    <tr>
        <td>
            <table class="inner">
                <tr>
                    <td>in the middle</td>                    
                </tr>
            </table> 
        </td>                    
    </tr>
</table>​ 
```

CSS：

```
.outer
{
    width: 100%;
    border: solid 1px red;
}
.inner
{
    width: 25%;
    margin: auto;
    border: solid 1px blue;
}
​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-06T20:55:12.043

`align=""`使用不推荐使用的属性将表格居中。

```
<table>
    <tr>
        <td>
            <table align="center">
                <tr>
                    <td>in the middle</td>                    
                </tr>
            </table> 
        </td>                    
    </tr>
</table>​ 
```

# git - 使用 IntelliJ 修改 git commit 消息

> ID：14075919
> 
> 赞同：113
> 
> 时间：2012-12-28T21:17:43.680
> 
> 标签：git, intellij-idea, git-commit

可以使用 修改 git commit 消息`IntelliJ`，还是应该求助于命令行？

请问这怎么做？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2017-08-17T13:58:10.547

查看 => 工具窗口 => 版本控制。( **Windows (Alt + 9)** / **OS X (Cmd + 9)** )

IntelliJ 2017.1 及更高版本 => 转到**日志**并右键单击 +**改写**或按 F2。

[![IntelliJ 重命名提交](../Images/78494d3ba18abc1aef52043962a657b0.png)](https://i.stack.imgur.com/juwHK.jpg)

当您在同一个分支上时，（您签出的分支是相同的）

* * *

## 回答 #2

> 赞同：74
> 
> 时间：2012-12-30T09:37:25.117

支持修改：调用“提交更改”并在“提交”对话框中选中“修改提交”复选框。然后按“提交”按钮，提交将被修改为上一个。

但是，支持是有限的：

*   您看不到正在修改的提交的详细信息，
*   如果您没有任何未提交的更改（例如，您只想更改先前提交的消息而不添加更多更改），您将无法调用“提交”。

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2015-12-23T06:17:21.220

终于找到了解决方法。这个问题困扰了我好几天。

1.  转到版本控制 - 日志选项卡
2.  选择版本，在您的更改下方。右键单击并说“将当前分支重置到此处”
3.  选择“Soft”并点击Reset，这很重要，您只需点击soft，这样您的更改就不会丢失。
4.  签入版本控制，本地更改，您的更改将在同一个更改列表中可用
5.  右键单击更改列表并选择提交。
6.  它会显示你之前的提交信息，现在你可以修改评论并说提交和推送

    ```
    Note: This solution uses android studio as intellij platform. 
    ```

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2016-01-30T21:21:12.370

您还可以使用终端和 shell（如 powershell、cmd 或 bash（取决于您的系统））进入您的 git 文件夹，然后键入：

```
git commit --amend -m "your new commit message" 
```

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2015-09-10T20:54:48.653

可以在变基期间编辑提交消息。从菜单调用`Rebase`命令`VCS`，确认分支设置，然后单击 Rebase 按钮​​。您将看到未推送的提交列表。`reword`从要编辑的消息左侧的下拉列表中选择操作。

[查看Rewriting History](https://git-scm.com/book/en/v2/Git-Tools-Rewriting-History)上的 git 文档以获取有关其他变基操作的详细信息。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-03-15T16:07:21.563

在“日志”选项卡中，选择提交并按 F2（改写）。而已。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-12-12T10:18:21.800

如果是 2018.3 和 2017.1 相同

`Alt` + `9`（版本控制窗口）

然后右键单击->上下文菜单单击“改写... `F2`”

**或者**

快捷 `F2`方式您可以编辑消息。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-06-19T11:28:06.473

公平地说，最快的方法是通过命令行。我知道 OP 是在询问是否通过 IntelliJ 进行操作（这就是我发现这个问题的方式，我试图在 PHPStorm 中进行操作），但说真的，通过命令行更容易。

在终端/命令提示符类型的正确文件夹中时

```
git commit --amend 
```

然后您将看到最后一条提交消息，只需编辑文本并保存文件，就完成了！

如果您想更改编辑器（默认为 vi），请使用此命令，将“vim”更改为您选择的编辑器。

```
git config --global core.editor "vim" 
```

即 Windows 用户可能想要...

```
git config --global core.editor "notepad" 
```

来源：[https ://help.github.com/articles/changeing-a-commit-message/](https://help.github.com/articles/changing-a-commit-message/)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-01-27T10:34:28.103

在 IntelliJ 2021.3 中，只需选择“编辑提交消息...”菜单下拉菜单即可。

[![IntelliJ 菜单项的屏幕截图](../Images/31bf9cd4ea6a41f96e9f6ce3725e1aad.png)](https://i.stack.imgur.com/stB4C.jpg)

这在 Git 工具窗口中可用。如果您已签出相同的分支，也在比较分支窗口中，否则它会显示为灰色。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-06-07T09:46:25.603

在 JetBrains `Go to View -> Version Control`-> 这将打开屏幕底部的版本控制日志选项卡， `Go to Log`您可以看到您上次所做的提交右键单击它，然后选择`undo commit`

答对了！您已恢复所有提交，并且该消息已被删除。如果您只想更改提交消息，您也可以选择进行软重置

# mysql - mysqldump 不导出数据或结构

> ID：14075923
> 
> 赞同：5
> 
> 时间：2012-12-28T21:17:56.243
> 
> 标签：mysql, mysqldump

我有一个简短的 PHP 脚本，它应该执行 MySQL 备份并将其通过电子邮件发送给我。但是，mysqldump 既不写入数据也不写入结构。调用 mysqldump 的命令如下所示：

```
mysqldump --host=localhost --user=xxx --pass=xxx xxx_license > xxx2012-12-28.sql 
```

（xxx 用户名和密码与另一个使用 php 和数据库的脚本相同，所以我知道凭据是正确的）。

输出如下：

```
-- MySQL dump 10.13  Distrib 5.5.28, for Linux (x86_64)
--
-- Host: localhost    Database: xxx_license
-- ------------------------------------------------------
-- Server version   5.5.28-cll

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Current Database: `xxx_license`
--

CREATE DATABASE /*!32312 IF NOT EXISTS*/ `xxx_license` /*!40100 DEFAULT CHARACTER SET latin1 */;

USE `xxx_license`; 
```

仅当我将 --databases 添加到选项时，才会出现 CREATE 和 USE 语句。

并使用 --help 显示默认选项是：

```
mysqldump  Ver 10.13 Distrib 5.5.28, for Linux (x86_64)

<snip>

Variables (--variable-name=value)
and boolean options {FALSE|TRUE}  Value (after reading options)
--------------------------------- ----------------------------------------
all-databases                     FALSE
all-tablespaces                   FALSE
no-tablespaces                    FALSE
add-drop-database                 FALSE
add-drop-table                    TRUE
add-locks                         TRUE
allow-keywords                    FALSE
apply-slave-statements            FALSE
character-sets-dir                (No default value)
comments                          TRUE
compatible                        (No default value)
compact                           FALSE
complete-insert                   FALSE
compress                          FALSE
create-options                    TRUE
databases                         FALSE
debug-check                       FALSE
debug-info                        FALSE
default-character-set             utf8
delayed-insert                    FALSE
delete-master-logs                FALSE
disable-keys                      TRUE
dump-slave                        0
events                            FALSE
extended-insert                   TRUE
fields-terminated-by              (No default value)
fields-enclosed-by                (No default value)
fields-optionally-enclosed-by     (No default value)
fields-escaped-by                 (No default value)
flush-logs                        FALSE
flush-privileges                  FALSE
force                             FALSE
hex-blob                          FALSE
host                              (No default value)
include-master-host-port          FALSE
insert-ignore                     FALSE
lines-terminated-by               (No default value)
lock-all-tables                   FALSE
lock-tables                       TRUE
log-error                         (No default value)
master-data                       0
max-allowed-packet                25165824
net-buffer-length                 1046528
no-autocommit                     FALSE
no-create-db                      FALSE
no-create-info                    FALSE
no-data                           FALSE
order-by-primary                  FALSE
port                              0
quick                             TRUE
quote-names                       TRUE
replace                           FALSE
routines                          FALSE
set-charset                       TRUE
single-transaction                FALSE
dump-date                         TRUE
socket                            (No default value)
ssl                               FALSE
ssl-ca                            (No default value)
ssl-capath                        (No default value)
ssl-cert                          (No default value)
ssl-cipher                        (No default value)
ssl-key                           (No default value)
ssl-verify-server-cert            FALSE
tab                               (No default value)
triggers                          TRUE
tz-utc                            TRUE
user                              (No default value)
verbose                           FALSE
where                             (No default value)
plugin-dir                        (No default value)
default-auth                      (No default value) 
```

如果这些选项中的某些内容有误，我该如何更改/覆盖它？我找不到配置文件，也没有对 Web 服务器的 SSH 访问权限来执行任何操作。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-29T01:08:15.583

检查用户的权限，并确保它对所有表都具有 SELECT 权限。如果它没有锁定表的权限，请使用`--skip-lock-tables`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-24T17:22:50.337

我在 MySql 5.7 中遇到了同样的问题，试图捕获表结构。我必须在命令行上明确输入 --databases --tables 才能使其正常工作。例如数据和结构：

```
mysqldump --defaults-extra-file=$confFile --databases $db --tables $tables > ./backup_db.sql 
```

仅包含一张表定义的示例：

```
mysqldump --defaults-extra-file=$confFile -d --databases $db --tables $table > ./table_cre.sql 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T21:35:05.420

尝试以下步骤：

mysqldump –u[用户名] –p [数据库名] > [转储文件]

按回车键

密码

按回车键

```
mysqldump –uxxx –p xxx_license > xxx2012-12-28.sql

press enter key 
```

现在输入密码

```
xxx

press enter key 
```

为我工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-29T22:42:13.960

你可以从命令行运行转储吗？如果你不能，那么从那里开始。如果可以，因为通过 PHP 脚本运行，请确保您的脚本有权写入将转储保存到的目录。检查所有者/组权限以及要保存到的目录的权限。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-19T15:36:07.820

我有同样的问题，我通过将我的“mysqldump.exe”更新到最新版本来解决它（服务器和我的备份服务器在 MySQL 版本方面不同步）

# templates - 在 Magento 中为前端模块页面设置自定义设计

> ID：14075925
> 
> 赞同：0
> 
> 时间：2012-12-28T21:17:59.203
> 
> 标签：templates, magento, module, frontend

我在 Magento 安装中有一个自定义模块，我在前端的**URL**下显示特定模块的详细信息，`www.domain.com/modulename`. 现在我有两种设计，一种用于 cms 页面，另一种用于结帐和目录页面。我希望前端的这个自定义模块页面显示在 CMS 页面主题中，但我在后端设置的默认模板是另一个。

是否有任何可能的方法可以为这个前端模块页面设置自定义设计，就像我们为设计选项卡下的 cms 页面所做的那样。

请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T00:38:41.930

如果您有自己的自定义模块（扩展），那么您可以通过模块控制器控制其页面的显示。这包括包/主题配置。这是一个功能代码，可用于控制您的模块包和主题选择。

```
public function myAction()
{
  Mage::getSingleton('core/design_package')
    ->setPackageName("myPackage")
    ->setTheme("myTheme");   
  $this->loadLayout();
  $this->renderLayout();
} 
```

这是目前为您的动作控制器模块专门设置自定义包/主题的唯一方法。

# uitableview - 为分段 UITableView 中的每个单元推送不同的 ViewController

> ID：14075927
> 
> 赞同：0
> 
> 时间：2012-12-28T21:18:09.780
> 
> 标签：uitableview

我有一个 UITableView，其中包含不同字母的部分。我希望每个单元格推送不同的 ViewController。可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T07:46:28.523

只需使用 Storyboard，控制从每个单元格拖动到您希望它附加的 ViewController。将 segue 类型设置为“Push”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T21:26:48.767

如果您使用情节提要，这是一个可能的解决方案： http: [//forums.macrumors.com/showthread.php?t=1274743](http://forums.macrumors.com/showthread.php?t=1274743)

# jquery - 这里面的语法有什么问题？

> ID：14075930
> 
> 赞同：1
> 
> 时间：2012-12-28T21:18:35.177
> 
> 标签：jquery

```
<script type="text/javascript">
                $(document).ready(function() {
            $('#Catid').change(function(){
                var optvalue = $(this).val(),
                div = $('#' + 'parentid' + optvalue);
                $('div').hide();
                div.show();
            });
        });​ 
              </script> 
```

我收到控制台错误，但我不知道为什么

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T21:19:12.883

看起来你对最后一行有问题。有一个隐藏的角色就在最后。把它删了再写，应该排序吧！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T21:30:41.517

你问过“这里的语法有什么问题”，所以我想我也应该指出这一点。

问题在于这里的代码：

```
div = $('#' + 'parentid' + optvalue); 
```

div 是一个全局变量，它被认为是不好的做法。

重写它的更好方法是将它包含在初始 var 中。

```
var optvalue = $(this).val(),
    div      = $('#' + 'parentid' + optvalue); 
```

# python - 如何从项目管道访问scrapy设置

> ID：14075941
> 
> 赞同：33
> 
> 时间：2012-12-28T21:19:39.267
> 
> 标签：python, scrapy, settings, pipeline

如何从项目管道访问 settings.py 中的scrapy设置。文档中提到可以通过扩展中的爬虫访问它，但我看不到如何访问管道中的爬虫。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2014-01-06T19:28:21.947

> **更新** （2021-05-04）
> *请注意，这个答案现在已经有 7 年的历史了，所以它的有效性不再得到保证。此外，它使用 Python2*

从内部访问您的 Scrapy 设置（如 定义`settings.py`）的`your_spider.py`方法很简单。所有其他答案都太复杂了。其原因是 Scrapy 文档的维护非常差，以及最近的许多更新和更改。在“设置”文档“[如何访问设置](http://doc.scrapy.org/en/latest/topics/settings.html#how-to-access-settings)”和[“设置 API”](http://doc.scrapy.org/en/latest/topics/api.html#module-scrapy.settings)中，他们都没有给出任何可行的示例。这是一个示例，如何获取当前的**USER_AGENT**字符串。

只需将以下行添加到`your_spider.py`：

```
# To get your settings from (settings.py):
from scrapy.utils.project import get_project_settings
...
class YourSpider(BaseSpider):
    ...
    def parse(self, response):
        ...
        settings = get_project_settings()
        print "Your USER_AGENT is:\n%s" % (settings.get('USER_AGENT'))
        ... 
```

如您所见，无需使用`@classmethod`或重新定义`from_crawler()`or`__init__()`函数。希望这可以帮助。

**PS。**我仍然不确定为什么 using`from scrapy.settings import Settings`不能以同样的方式工作，因为这将是更明显的导入选择？

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-12-28T21:19:39.267

好的，所以[http://doc.scrapy.org/en/latest/topics/extensions.html](http://doc.scrapy.org/en/latest/topics/extensions.html)上的文档说

> Scrapy 扩展（也包括中间件和管道）的主要入口点是 from_crawler 类方法，它接收 Crawler 实例，该实例是控制 Scrapy 爬虫的主要对象。通过该对象，您可以访问设置、信号、统计信息，还可以控制爬虫的行为，如果您的扩展程序需要这样的话。

所以你可以有一个功能来获取设置。

```
@classmethod
def from_crawler(cls, crawler):
    settings = crawler.settings
    my_setting = settings.get("MY_SETTING")
    return cls(my_setting) 
```

然后爬虫引擎使用 调用管道的 init 函数`my_setting`，如下所示：

```
def __init__(self, my_setting):
    self.my_setting = my_setting 
```

`self.my_setting`正如预期的那样，其他功能可以使用 访问它。

**或者**，在`from_crawler()`函数中，您可以将`crawler.settings`对象传递给`__init__()`，然后根据需要从管道访问设置，而不是在构造函数中将它们全部取出。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2014-02-12T17:35:52.550

正确答案是：这取决于您希望在管道中的哪个位置访问设置。

avaleske 的回答好像您想访问管道`process_item`方法之外的设置，但很可能这是您想要设置的地方，因此有一种更简单的方法，因为 Spider 实例本身作为参数传入。

```
class PipelineX(object):

    def process_item(self, item, spider):
         wanted_setting = spider.settings.get('WANTED_SETTING') 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-11-28T07:38:44.287

项目结构很扁平，为什么不呢：

```
# pipeline.py
from myproject import settings 
```

# ruby-on-rails-3 - Nginx 不在子目录中提供预编译资产

> ID：14075945
> 
> 赞同：0
> 
> 时间：2012-12-28T21:19:53.473
> 
> 标签：ruby-on-rails-3, nginx, amazon-ec2, capistrano

我在 Amazon EC-2 中部署了一个 RoR3 服务器。

我的资产是预编译的。我运行 rake:assets:precompile 作为我的 capistrano 部署任务的一部分。

例如：

`assets/home/separator.png`预编译在`public/assets/home/separator-7abf67950e9a27f371d2b5638de4320b.png`

我在文件中看不到separator.png `public/assets/home/manifest.yml`，为什么？

这是我对资产的 nginx 配置：

```
location ~* ^/(assets)/ {
        expires 1y;
       add_header Cache-Control public;

       # Some browsers still send conditional-GET requests if there's a
       # Last-Modified header or an ETag header even if they haven't
       # reached the expiry date sent in the Expires header.
      add_header Last-Modified "";
      add_header ETag "";
      break;
   } 
```

Rails 应用程序正在搜索`assets/home/separator-f4571b5883207774be6edc5745de4755.png`不存在的 。

有任何想法吗？

# android - Android Socket Client 自行关闭

> ID：14075946
> 
> 赞同：-1
> 
> 时间：2012-12-28T21:19:56.350
> 
> 标签：android, sockets, client, logcat

> **可能重复：**
> [android.os.NetworkOnMainThreadException](https://stackoverflow.com/questions/6343166/android-os-networkonmainthreadexception)
> [Android Socket Client 未发送并自行关闭](https://stackoverflow.com/questions/14074650/android-socket-client-didnt-send-and-closes-itself)

我是java和android编程的新手，我正在尝试为我的电脑（windows 7）编写一个Android客户端和一个服务器。通过这个连接，我想将一个字符串从 pc 发送到 android 应用程序，也从应用程序发送到 pc。我检查了我的服务器，它是否编程正确并且是正确的。所以我的客户一定有一个错误。当我启动应用程序时。该应用程序启动，但是当我想从我的应用程序向电脑发送一个字符串时，该应用程序会自行关闭。现在我确实需要你的帮助。我已经在应用程序上编程超过 2 天了。

这是我的 LogCat，我真的希望你能告诉我在哪里可以找到我的错误。

```
12-28 21:10:29.348: I/dalvikvm(565): threadid=3: reacting to signal 3

12-28 21:10:29.428: I/dalvikvm(565): Wrote stack traces to '/data/anr/traces.txt'

12-28 21:10:29.818: I/dalvikvm(565): threadid=3: reacting to signal 3

12-28 21:10:29.888: I/dalvikvm(565): Wrote stack traces to '/data/anr/traces.txt'

12-28 21:10:30.258: D/gralloc_goldfish(565): Emulator without GPU emulation detected.

12-28 21:10:30.319: I/dalvikvm(565): threadid=3: reacting to signal 3

12-28 21:10:30.348: I/dalvikvm(565): Wrote stack traces to '/data/anr/traces.txt'

12-28 21:11:12.498: D/AndroidRuntime(565): Shutting down VM

12-28 21:11:12.508: W/dalvikvm(565): threadid=1: thread exiting with uncaught exception 
(group=0x409c01f8)

12-28 21:11:12.540: E/AndroidRuntime(565): FATAL EXCEPTION: main

12-28 21:11:12.540: E/AndroidRuntime(565): android.os.NetworkOnMainThreadException

12-28 21:11:12.540: E/AndroidRuntime(565):  at 
android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)

12-28 21:11:12.540: E/AndroidRuntime(565):  at 
libcore.io.BlockGuardOs.connect(BlockGuardOs.java:84)

12-28 21:11:12.540: E/AndroidRuntime(565):  at 
libcore.io.IoBridge.connectErrno(IoBridge.java:127)

12-28 21:11:12.540: E/AndroidRuntime(565):  at 
libcore.io.IoBridge.connect(IoBridge.java:112)

12-28 21:11:12.540: E/AndroidRuntime(565):  at 
java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)

12-28 21:11:12.540: E/AndroidRuntime(565):  at 
java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)

12-28 21:11:12.540: E/AndroidRuntime(565):  at 
java.net.Socket.startupSocket(Socket.java:566)

12-28 21:11:12.540: E/AndroidRuntime(565):  at 
java.net.Socket.tryAllAddresses(Socket.java:127)

12-28 21:11:12.540: E/AndroidRuntime(565):  at java.net.Socket.<init>(Socket.java:177)

12-28 21:11:12.540: E/AndroidRuntime(565):  at java.net.Socket.<init>(Socket.java:149)

12-28 21:11:12.540: E/AndroidRuntime(565):  at 
net.ibasic.AndroidClient$1.onClick(AndroidClient.java:50)

12-28 21:11:12.540: E/AndroidRuntime(565):  at 
android.view.View.performClick(View.java:3511)

12-28 21:11:12.540: E/AndroidRuntime(565):  at 
android.view.View$PerformClick.run(View.java:14105)

12-28 21:11:12.540: E/AndroidRuntime(565):  at 
android.os.Handler.handleCallback(Handler.java:605)

12-28 21:11:12.540: E/AndroidRuntime(565):  at 
android.os.Handler.dispatchMessage(Handler.java:92)

12-28 21:11:12.540: E/AndroidRuntime(565):  at android.os.Looper.loop(Looper.java:137)

12-28 21:11:12.540: E/AndroidRuntime(565):  at 
android.app.ActivityThread.main(ActivityThread.java:4424)

12-28 21:11:12.540: E/AndroidRuntime(565):  at 
java.lang.reflect.Method.invokeNative(Native Method)

12-28 21:11:12.540: E/AndroidRuntime(565):  at 
java.lang.reflect.Method.invoke(Method.java:511)

12-28 21:11:12.540: E/AndroidRuntime(565):  at 
com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)

12-28 21:11:12.540: E/AndroidRuntime(565):  at 
com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)

12-28 21:11:12.540: E/AndroidRuntime(565):  at dalvik.system.NativeStart.main(Native 
Method)

12-28 21:11:13.178: I/dalvikvm(565): threadid=3: reacting to signal 3

12-28 21:11:13.218: I/dalvikvm(565): Wrote stack traces to '/data/anr/traces.txt'

12-28 21:11:15.288: I/Process(565): Sending signal. PID: 565 SIG: 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T21:31:27.290

听起来您可能正在主 UI 中而不是像 AsyncTask 这样的背景中做网络的事情 这是一个如何设置的基本示例

```
public class MyNetworkTask extends AsyncTask<String, String, String> {
@Override
protected void onPreExecute() {
    super.onPreExecute();
}

@Override
protected void onProgressUpdate(String... values) {
    super.onProgressUpdate(values);

}

@Override
protected String doInBackground(String... params) {
//do your work here
    return something;
}

@Override
protected void onPostExecute(String result) {
    super.onPostExecute(result);
       // do something with data here-display it or send to mainactivity 
```

}

这是它的文档链接：http: [//developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

# php - PDO fetch / fetchAll

> ID：14075954
> 
> 赞同：2
> 
> 时间：2012-12-28T21:20:31.950
> 
> 标签：php, mysql, pdo

对 PHP 并不陌生，但对 PDO 来说只有一天的历史。我肯定在这里做错了什么。

```
 $query = $conn->prepare("SELECT * FROM admins WHERE username = :username AND password = :password");
    $query->execute(array('username' => $username,'password' => sha1($password)));
    $result = $query->fetchAll(PDO::FETCH_ASSOC);
    if (count($result) > 0)
    {
        $_SESSION['user']['who']        = $result[0]['who'];
        $_SESSION['user']['email']  = $result[0]['email'];
        $_SESSION['user']['username']   = $result[0]['username'];
        echo REFRESH;
    }
    else
    {
        $message = "Invalid username / password.";  
    } 
```

我可以正确声明它们的唯一方法`$_SESSIONS`是如果我使用我`$result[0]['fieldName'];`如何才能通过它访问它`$result['fieldName'];`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-28T21:25:07.770

[`fetchAll`](http://php.net/manual/en/pdostatement.fetchall.php)，正如文档所说，同时检索所有获取数据的数组。由于您正在使用`FETCH_ASSOC`，因此会获取关联数组的数组。如果您确定只返回一列或只对返回的第一列感兴趣，只需使用`fetch`. 否则，您必须迭代`fetchAll`结果或执行您已完成的操作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-28T21:23:39.400

采用：

```
foreach( $result as $row )  
{  
    $_SESSION['user']['who']  = $row['who'];
    .... and so on
} 
```

# c# - 使用 C# 使用 Credit Memo Magento API

> ID：14075955
> 
> 赞同：0
> 
> 时间：2012-12-28T21:20:32.500
> 
> 标签：c#, magento

如标题所示，我正在尝试在已创建的订单上创建贷记凭证。我有 Magento GO，我可以下订单、创建发货、创建发票，但没有对象可以处理贷项通知单。我用服务架构检查了 XML 文件，显然架构没有关于备忘录的信息。

我读过这个 API 不存在，但 Magento 的 API 文档明确指出它存在： http: [//www.magentocommerce.com/api/soap/sales/salesOrderCreditMemo/salesOrderCreditMemo.html](http://www.magentocommerce.com/api/soap/sales/salesOrderCreditMemo/salesOrderCreditMemo.html)

我是否需要以某种方式更新我的 XML，或者是否应该有其他方法来做到这一点。链接到 XML：[http ://demo.magentocommerce.com/api/v2_soap?wsdl=1](http://demo.magentocommerce.com/api/v2_soap?wsdl=1)

这可能是 Magento GO 解决方案和 Enterprise one 之间的区别吗？

任何建议都会有所帮助，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:41:21.700

我已经为 magento 1.4.1.1 完成了信用订单 API，因为我也需要，所以显然核心主题当时没有这样做。它是在较新的版本中添加的:(

我不知道你如何在go版本中使用它......

你可以从这里得到它，但我想你必须添加创建备忘录的方法，我只有列表和信息。

[https://github.com/mkdizajn/magento-1.4-creditmemo-api](https://github.com/mkdizajn/magento-1.4-creditmemo-api)

hth，干杯

# java - 在 Java 中执行 Neo4j Cypher 查询时出现 NoClassDefFoundError

> ID：14075957
> 
> 赞同：1
> 
> 时间：2012-12-28T21:20:42.267
> 
> 标签：java, neo4j

我尝试了以下关于[在嵌入式模式下从 Java 执行 Cypher 查询](http://docs.neo4j.org/chunked/milestone/tutorials-cypher-java.html)的基本示例，但它显示了以下错误：

代码：

```
package test;

import org.neo4j.cypher.javacompat.ExecutionEngine;
import org.neo4j.cypher.javacompat.ExecutionResult;
import org.neo4j.graphdb.GraphDatabaseService;
import org.neo4j.graphdb.Node;
import org.neo4j.graphdb.Transaction;
import org.neo4j.graphdb.factory.GraphDatabaseFactory;

public class Test {

    public static void main(String[] args) {
        GraphDatabaseService db = new GraphDatabaseFactory().newEmbeddedDatabase("D:/MI/Tools/neo4j-community-1.9.M02/test2");
        // add some data first, keep id of node so we can refer to it
        long id;
        Transaction tx = db.beginTx();
        try {
            Node refNode = db.createNode();
            id = refNode.getId();
            refNode.setProperty("name", "reference node");
            tx.success();
        } finally {
            tx.finish();
        }

        // let's execute a query now
        ExecutionEngine engine = new ExecutionEngine(db);
        ExecutionResult result = engine.execute("start n=node(" + id + ") return n, n.name");
        System.out.println(result.toString());
    }
} 
```

输出：

```
Exception in thread "main" java.lang.NoClassDefFoundError: com/googlecode/concurrentlinkedhashmap/ConcurrentLinkedHashMap$Builder
    at org.neo4j.cypher.internal.LRUCache.<init>(LRUCache.scala:30)
    at org.neo4j.cypher.ExecutionEngine$$anon$1.<init>(ExecutionEngine.scala:91)
    at org.neo4j.cypher.ExecutionEngine.<init>(ExecutionEngine.scala:91)
    at org.neo4j.cypher.javacompat.ExecutionEngine.<init>(ExecutionEngine.java:54)
    at org.neo4j.cypher.javacompat.ExecutionEngine.<init>(ExecutionEngine.java:44)
    at test.Test.main(Test.java:27)
Caused by: java.lang.ClassNotFoundException: com.googlecode.concurrentlinkedhashmap.ConcurrentLinkedHashMap$Builder
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    ... 6 more
Java Result: 1
BUILD SUCCESSFUL (total time: 5 seconds) 
```

代码有问题吗？

（我使用 neo4j-community-1.9.M02 和 NetBeans IDE 7.2.1）

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-28T21:54:47.147

项目添加如下Java库后问题消失

[http://concurrentlinkedhashmap.googlecode.com/files/concurrentlinkedhashmap-lru-1.3.1.jar](http://concurrentlinkedhashmap.googlecode.com/files/concurrentlinkedhashmap-lru-1.3.1.jar)

# iphone - 如何创建从屏幕顶部推送的 UINavigationController？

> ID：14075960
> 
> 赞同：0
> 
> 时间：2012-12-28T21:20:45.553
> 
> 标签：iphone, ios, uinavigationcontroller, pushviewcontroller

我正在创建一个带有标准“Master-Detail”导航的 iPhone 应用程序，您可以在其中从 UITableView 中选择一个项目，并在 ViewController 中查看推送到屏幕上的项目的详细信息视图。

但是：与传统的 UINavigationController 不同，它从窗口的右侧推送详细信息屏幕，我希望我的详细信息屏幕从屏幕顶部下降。

我需要做什么才能做到这一点？我必须继承 UINavigationController 吗？（我听说这不是一个好主意）。我应该考虑子类化什么类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T21:37:13.917

子类`UINavigationController`和覆盖`pushViewController:animated:`。
不要立即调用 super 并且你自定义动画的东西是这样的：

```
nextViewController.view.transform = CGAffineTransformMakeTranslation(0, -nextViewController.view.frame.size.height);

void(^animationBlock)(void) = ^{
    [super pushViewController:nextViewController animated:NO];
    nextViewController.view.transform = CGAffineTransformIdentity;
};

if (animated) {
    [UIView animateWithDuration:0.3f animations:animationBlock];
}
else{
    animationBlock();
} 
```

## 更新：

您实际上不需要子类化`UINavigationController`. 每次将 VC 推送到常规`UINavigationController`.

# sql-server - 编写脚本的更好方法

> ID：14075963
> 
> 赞同：1
> 
> 时间：2012-12-28T21:21:15.663
> 
> 标签：sql-server, tsql

我有以下关于在各个地区销售的钻石的信息。

**温度1**

```
Region Cut Color SoldQty 
------- -- ----- ------- 
01      RD   C     1
01      RD   A     1 
01      RD   C     3
01      BA   C     2
02      RD   A     2
02      BA   A     3
02      BA   B     0
02      BA   A     1 
```

从上面，我需要在 SQL Server 2005 中获得以下信息。基本上，对于 和 的唯一组合，`Region`我需要总结并计算每个地区的销售百分比。`Cut``Color``Sold Qty`

需要的最终输出

```
Region Cut Color SoldQty TotalSOld  %SOld
------- -- ----- ------- ---------  -----
01      RD   C     1       4         4/7
01      RD   A     1       1         1/7
01      BA   C     2       2         2/7
02      RD   A     2       2         2/6
02      BA   A     4       4         4/6
02      BA   B     0       0          0 
```

为了做到这一点，我使用了 2-3 个临时表 - 如下。

```
select 
    Region, Cut, Color, 
    sum(SoldQty), 
    'TotalSoldQty' =  Sum (SoldQty) OVER(PARTITION BY Region) 
into temp2 
from temp1 
group by Region, Cut, Color 
```

这将给出如下表 temp2。

```
Region Cut Color SoldQty TotalSOld  
------- -- ----- ------- ---------  
01      RD   C     1       4         
01      RD   A     1       1         
01      BA   C     2       2         
02      RD   A     2       2         
02      BA   A     4       4         
02      BA   B     0       0 
```

然后我添加了另一个如下选择以获得决赛桌。

```
select 
    Region, Cut, Color,SoldQty, TotalSOld,  
    'PercentageSoldQty' = case when TotalSold = 0 then 0 
                               else (SoldQty *100/TotalSold)  end
from temp2 
```

以上给了我结果，但我敢肯定，与使用多个临时表相比，在单个选择中必须有更好的方法来完成此操作。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T21:52:24.580

你怎么会在第 1 行发现 SoldQty 和 TotalSold 不同？这对我来说似乎是一个错误。这个怎么样：

[http://www.sqlfiddle.com/#!6/0f5fe/24](http://www.sqlfiddle.com/#!6/0f5fe/24)

```
select region,cut,color, soldqty, cast(soldqty as varchar) +'/' + cast(regiontotal as varchar) PercentSold FROM (
  select region,cut,color, sum(soldqty) soldqty, regiontotal from (
    select soldqty, region,cut,color,sum(soldqty) over (partition by region) as regiontotal
    from sale
  ) b
  group by region,cut,color, regiontotal
)foo 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T21:26:22.687

这是主键（或我认为已知的候选键）派上用场的一个例子。如果您从以下位置修改结构：

```
Region Cut Color SoldQty 
```

至

```
ID Region Cut Color SoldQty 
```

您现在可以通过 ID 查找。这也使您能够执行此操作：

```
select Region,Cut,Color, sum(SoldQty), 
'TotalSoldQty' =  Sum (SoldQty) OVER(PARTITION BY Region) 
```

没有生成任何临时表。

# c# - 如何在 Windows Store App Close 上保存数据？

> ID：14075970
> 
> 赞同：2
> 
> 时间：2012-12-28T21:22:29.710
> 
> 标签：c#, .net, wpf, windows-runtime

我有以下问题。当用户关闭 Windows 商店应用程序时，我希望保存一个包含数据的文本文件。

我应该写什么方法以便在关闭应用程序时保存文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-29T03:31:53.483

[本文](http://msdn.microsoft.com/en-us/library/windows/apps/hh986968.aspx)介绍了 Windows 应用商店应用程序的应用程序生命周期。

如果您查看第一张图，您可以看到只有 3 个与应用程序生命周期相关的事件：

1.  **已激活**- 程序首次启动时引发
2.  **Suspended** - 程序暂停时引发（即用户返回到开始屏幕或其他应用程序）
3.  **Resuming** - 当程序从挂起状态唤醒时引发。

第四个转换 - 到“未运行”状态的转换 - 没有这样的通知事件。原因是：你真的不知道应用程序何时会完全关闭。你也不应该——微软希望你在从“正在运行”到“暂停”的转换中执行所有的状态保存逻辑。这样，他们可以在他们认为必要的时候释放资源。

即使用户强制终止程序（通过右键单击它并从任务菜单中选择“关闭”），您将在程序终止前进入“暂停”状态整整 10 秒。因此，您可以放心，您的状态保存逻辑将始终被执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:52:18.963

> 您真的不知道应用程序何时会完全关闭。你也不应该...

我不同意这一点——微软正在从苹果那里复制这个，我不知道为什么，我也不喜欢苹果的实现。

如果您的用户对您的应用程序进行了更改，然后使用键盘或手势将其关闭，然后在 6 秒后重新启动，则所有更改都将丢失。

作为开发人员，我认为没有任何方法可以解决这个问题。谁认为关闭的事件（以及与此相关的退出按钮）是邪恶的，都是白痴。

# python - ConnectionRefused 是做什么的？

> ID：14075972
> 
> 赞同：5
> 
> 时间：2012-12-28T21:22:39.807
> 
> 标签：python, networking, twisted

这是`DatagramProtocol`Twisted 中的一个类方法。据我了解`UDP`，协议并不能保证有人正在监听给定的端口，即使使用`ConnectedDatagramProtocol`.

有人可以向我解释一下，何时调用此方法以及我想如何检查是否有人在使用 监听我的传输`UDP`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T00:54:18.337

如果数据报套接字已连接，它可以通过 Sockets API 接收 ICMP Port Unreachable 消息，这大概映射到调用该方法。请注意，这里我说的不是 TCP 连接操作，而是 Sockets connect() 方法，它可以在 UDP 套接字上调用，并且可能映射到您正在使用的 API 中的某个方法。

# c# - FrameworkPropertyMetadataOptions.AffectsRender 的 .NET 4.5 Windows Store App 等效项是什么？

> ID：14075981
> 
> 赞同：2
> 
> 时间：2012-12-28T21:24:09.933
> 
> 标签：c#, .net, dependencies, store

首先，我正在使用 Flipview 构建一个 Windows 商店应用程序，并且我创建了一个自定义上下文指示器，类似于您可以在此博客上找到的第一个示例：http: [//blogs.u2u.be/diederik/post/2012 /08/24/A-CXAML-FlipView-Context-Indicator-for-Windows-8.aspx](http://blogs.u2u.be/diederik/post/2012/08/24/A-CXAML-FlipView-Context-Indicator-for-Windows-8.aspx) 为了简短起见：我使用依赖属性将翻转视图绑定到用户控件。

我的问题：我用于上下文指示器的翻转视图数据绑定到 DefaultViewModel。由于我从 Web API 获取翻转视图中的图像，因此加载页面时 DefaultViewModel 中的集合将为空。成功加载图像后，我的 DefaultViewModel["collection"] 被填充，并且翻转视图相应地显示图像。但是，我的上下文指示器保持不变，并且只有在再次加载页面时才会显示正确的结果。

我的用户控件中的依赖属性如下：

```
public static readonly DependencyProperty FlipviewProperty =
        DependencyProperty.Register("Flipview", typeof(FlipView), typeof(FlipviewIndicator), new PropertyMetadata(null, FlipView_Changed));

    private static void FlipView_Changed(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        FlipviewIndicator indicator = d as FlipviewIndicator;
        FlipView flipview = (e.NewValue as FlipView);
        indicator.ItemsSource = flipview.ItemsSource;
        Binding binding = new Binding();
        binding.Mode = BindingMode.TwoWay;
        binding.Source = flipview;
        binding.Path = new PropertyPath("SelectedItem");
        indicator.SetBinding(FlipviewIndicator.SelectedItemProperty, binding);
    } 
```

我的问题：有没有办法让我的依赖属性通知 UI 我的用户控件需要重新渲染？我知道在 WPF 中使用 FrameworkPropertyMedata.AffectsRender 是可能的，例如：

```
public static readonly DependencyProperty FlipviewProperty = DependencyProperty.Register("Flipview",typeof(Flipview),typeof(FlipviewIndicator), new FrameworkPropertyMetadata(new Color(), FrameworkPropertyMetadataOptions.AffectsRender)); 
```

但是，在 Windows 应用商店应用程序中，不再支持 FrameworkPropertyMedata，商店应用程序中是否有等价物？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-09T16:37:05.850

老问题 - 但简短的回答是否定的。Windows Store Xaml（在 Windows 8.1 中）只有 PropertyMetadata，但是在依赖属性的更改处理程序中，您仍然可以像在 WPF 中一样适当地调用[InvalidateMeasure](http://msdn.microsoft.com/en-us/library/system.windows.uielement.invalidatemeasure(v=vs.110).aspx)、[InvalidateArrange](http://msdn.microsoft.com/en-us/library/system.windows.uielement.invalidatearrange(v=vs.110).aspx)或[UpdateLayout之一。](http://msdn.microsoft.com/en-us/library/system.windows.uielement.updatelayout(v=vs.110).aspx)

# c# - 我应该如何依赖 Session

> ID：14075989
> 
> 赞同：1
> 
> 时间：2012-12-28T21:25:02.367
> 
> 标签：c#, asp.net-mvc, razor

我正在使用会话做两件事：

1.  跟踪要为特定公司加载的 css 文件。
2.  跟踪跟踪我们所在公司的公司 ID 指南。

我看到这有时会以 null 的形式出现，但我没有找到一个一致的问题来追踪。我毫不怀疑这可能是我的代码中需要追踪的东西，但这让我想到了关于会话的问题......

1.  我是否非常依赖 Session 在屏幕之间传递信息？
2.  是否一致？
3.  什么可以在页面加载之间清除它？
4.  会话是否容易被用户清除？
5.  我应该使用其他更可靠的东西吗？

我担心我会把它移到现场使用并遇到各种问题。

我只是这样做：

```
Session["Css"] = css; 
```

并以同样的方式阅读：

```
css = Session["Css"] 
```

**更新**

我正在使用的会话：

HttpSessionStateBase 控制器会话

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T21:30:18.360

会话状态有几种类型。InProc、StateServer 和 SqlServer。我相信默认值是 InProc。[您可以在此处](http://msdn.microsoft.com/en-us/library/vstudio/h6bb9cz9%28v=vs.100%29.aspx)和[此处](http://technet.microsoft.com/en-us/library/cc776818%28v=WS.10%29.aspx)的 MSDN 上阅读有关此内容的更多信息。

这些中的每一个都将遵守 web.config 文件中定义的 sessionState 的超时值。对于单个服务器设置（这是我通常做的），我的 sessionState 设置通常如下：

```
<sessionState 
    mode="StateServer" 
    stateConnectionString="tcpip=127.0.0.1:42424" 
    timeout="2880" /> 
```

这与 Forms Auth 的默认超时相同，因此只要我的用户验证 cookie/会话，我的会话就会一直存在。这将要求您将 ASP.NET 状态服务器上的启动设置为`Automatic`. 下面是我解释这些类型及其潜在缺点的高级通行证。

## 进程内

每次应用程序池回收 Web 应用程序的工作进程时，这将被重置。我相信这就是发生在您身上的事情，这就是为什么您的会话变量在看似随机的时间为空的原因。

## 状态服务器

这将在 apppool 循环中保持状态，但需要您启用 ASP.NET 状态服务器服务，并将其启动类型更改为自动。

如果您有一个网络农场或多个网络服务器处理该网站，您可能会遇到问题，除非您运行专用的状态服务器。

这要求存储在会话变量中的变量是`[Serializable]`.

## SQL服务器

这会将会话变量持久保存到 SQL 数据库，并且通常是网络场情况的最佳方法。

这要求存储在会话变量中的变量是`[Serializable]`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T21:41:04.480

您不能按照这些思路编写 GetCss() 方法吗？

```
GetCss() {

    var css = (CastToYourTypeHere)Session["css"];

    if(css == null) {

        //do whatever you'd normally do here to set the css, 
        //e.g. get the users guid and find their company css, and set css equal to it
        css = myHypotheticalGetCssBasedOnTheUserFunction();

    }

    return css;

} 
```

这样你就可以覆盖所有的基础，你可以愉快地使用 Session，如果它由于某种原因丢失了，你只是重新运行你的初始“getCssForThisUser”类型代码。

IMO，在您描述的示例类型中，会话不是在页面之间为每个用户保存此类数据的好方法。

# ios - x轴的webkit-overflow-scrolling问题？

> ID：14075991
> 
> 赞同：8
> 
> 时间：2012-12-28T21:25:07.083
> 
> 标签：ios, css, webkit

我有一个带有以下 css 的可滚动 div：

```
overflow-x:hidden;
overflow-y:auto;
-webkit-overflow-scrolling: touch;
width:200px;
height:500px; 
```

但是在 iOS 设备上，当 div 内的内容比 div 本身宽时，启用 x 轴滚动。如何禁用 x 轴滚动？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-08T23:43:44.703

I've been having the same problem and it seems that there are no x/y options for -webkit-overflow-scrolling unfortunately. The workaround I typically use is to wrap the scrolling div in an `overflow-x: hidden` div and problem should be solved.

Markup:

```
<div class="scroll-container">
  <div class="scroll-wrapper">
    <div class="scroll-body">
    </div>
  </div>
</div> 
```

Styling:

```
.scroll-container {
  -webkit-overflow-scrolling: touch;
  overflow: auto;
  width: 200px;
  width: 500px;
}
.scroll-wrapper {
   width: 200px;
   overflow-x: hidden;
 } 
```

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2014-03-12T16:13:51.530

一个非常简单的解决方法就是确保你的元素都不比视口宽。这可以通过在 CSS 顶部放置一个“catchall”来实现：

```
div, span, h1, h2, h3, h4, h5, p, img, ul, li, ... ETC ...
{
    max-width: 100%;
} 
```

# openlaszlo - OpenLaszlo 5.0.x - HTML5 编译问题

> ID：14075994
> 
> 赞同：1
> 
> 时间：2012-12-28T21:25:11.230
> 
> 标签：openlaszlo, laszlo

我知道这一定是愚蠢的，因为它曾经工作过......

我们有一个在 V4.2.0.4 中运行良好的应用程序......一段时间前（一年左右）我们开始在夜间构建中运行，并查看我们的应用程序在 HTML5 运行时下的运行情况。在进行了一些编码更改之后，我们到达了那里。我们仍在努力解决一些差异，但总而言之，我们得到了它的工作。我使用的夜间版本来自 2011 年的最后一个版本。

因此，有了所有的改进，我们认为我们会尝试最新的，看看我们试图解决的一些问题是否已经修复。升级后，它看起来不错，直到我们创建单人版本。一旦我们在编译时创建了独奏，我们就会得到大量的重新定义错误，并且独奏版本也根本无法加载，我猜重新定义错误会导致问题。

考虑到问题在于新的夜间构建，我回到了我们之前为我们工作的版本。但是问题继续发生......我不知道当我们的特定代码没有改变时怎么可能。

如果我们进行编码更改，甚至在某处添加空格，它将再次编译而没有重新定义错误，直到我们创建独奏，然后它们又回来了。

我完全不知所措。我们最终没有进行代码更改，所以如果不出意外，我们过去一年使用的版本至少应该像以前一样预成型？我错过了什么或愚蠢？有任何想法吗？

抱歉，不能真正做任何代码片段，因为它是在整个应用程序类型的事情上。

这是一些错误..都指向 LFCdhtml-debug.js（第 698 行）

错误：

将 $lzc$class__mvd 从 () 重新定义为 ()（一个空字符串） LFCdhtml-debug.js（第 698 行）

错误：

将 $lzc$class__mve 从 () 重新定义为 ()（一个空字符串） LFCdhtml-debug.js（第 698 行）

错误：

将 $lzc$class__mw8 从 () 重新定义为 ()（一个空字符串） LFCdhtml-debug.js（第 698 行）

错误：

将 $lzc$class__mw9 从 () 重新定义为 ()（一个空字符串） LFCdhtml-debug.js（第 698 行）

我使用开发者控制台来创建独奏。命令行工具更好吗？还没有机会使用它。

我会尝试 lzt=clearcache 看看它是否有帮助。

感谢你目前的帮助！