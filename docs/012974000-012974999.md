# StackOverflow 问答 12974000-12974999

# nsis - 如何从 URL 链接下载文件并将其添加到 nsis 中的目标文件夹？

> ID：12974000
> 
> 赞同：0
> 
> 时间：2012-10-19T12:08:26.217
> 
> 标签：nsis

我有一个 URL 链接，比如 www.xyz.com/download，其中包含一个 zip 文件。我希望 nsis 脚本下载文件并将其添加到安装程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T13:17:54.310

如果要将下载的文件包含到安装程序中，只需在编译安装程序之前执行此操作。

如果你想在运行安装程序时下载文件，你可以使用NSIS 已经提供的[NSISdl 插件。](http://nsis.sourceforge.net/NSISdl_plug-in)

还有[inetc 插件](http://nsis.sourceforge.net/Inetc_plug-in)具有更好的代理处理能力。

# jsf - 使用 ADF Bindings 的标签

> ID：12974003
> 
> 赞同：1
> 
> 时间：2012-10-19T12:08:36.590
> 
> 标签：jsf, model-binding, oracle-adf

> 在**af:selectOneChoice**组件中有一个员工列表，并显示他们的全名，效果很好。如何确保**af:selectOneChoice**组件输出的是员工的全名而不是他的缩写名，即名字的第一个字母和全名？而且我需要它在不修改员工实体的情况下完成。一个好的解决方案是对employeesPageDef 页面定义执行此操作。也许这可以使用 **标记，但我不知道如何工作和满足我找不到的文档。请告诉我：我该如何解决这个问题，并说明如何使用 **页面定义中的标签。****

 ****请提供在页面定义（ADF 绑定）中使用 AttrViewExprs 标记的示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T13:55:14.843

您可以使用 a`Map`来填充`f:selectItems`.

在您的托管 bean 中执行以下操作：

```
public class Bean
{
    private Map<String, Employee> employees;

    public Map<String, Employee> getEmployees()
    {
        if (employees == null)
        {
            initMap();
        }
        return employees;
    }

    private void initMap()
    {
        //get list of employees and put in map
        employees = new HashMap<String, Employee>;
        for (Employee e : someClass.getAllEmployees())
        {
            String name = e.getFirstName().subString(0,1);
            name += ". ";
            name += e.getLastName(); 
            employees.put(name, e);
        }
    }
} 
```

然后在您的 JSF 页面中，您可以使用：

```
<f:selectItems value="#{bean.employees}" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T17:53:56.337

Per Duncan Mills：为什么不使用 JSTL 子字符串表达式来执行此操作？例如

```
 <af:outputText value="#{fn:substring(row.bindings.FirstName.inputValue,0,1)}"/> 
```

在表格内只会打印每个员工姓名的第一个字母。

您需要在项目中包含 JSTL 函数 taglib 并将其添加到

```
jsp:root definition:
    xmlns:fn="http://java.sun.com/jsp/jstl/functions 
```

"****

# vb.net - 具有 Windows 身份验证模式的连接字符串

> ID：12974004
> 
> 赞同：2
> 
> 时间：2012-10-19T12:08:37.230
> 
> 标签：vb.net, sql-server-2008

我正在尝试在我的 SQL Server 2008 上使用 VB.NET 测试与我的数据库的简单连接。问题是我的登录是使用 Windows 身份验证模式，并且我没有输入密码来连接到我的 SQL 服务器。

在这种情况下，连接字符串会是什么样子？这阻碍了我一整天的进步。

```
Public Class Form1

    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        Dim connetionString As String
        Dim connection As SqlConnection
        Dim i As Integer
        connetionString = "Data Source=PEDRAM-PC\PEDRAM;Initial Catalog=Test;User ID=Pedram-PC\Pedram;Password=bro"
        connection = New SqlConnection(connetionString)
        Try
            connection.Open()
        Catch ex As Exception
            MsgBox(ex.ToString)
        End Try
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-19T12:11:16.267

添加`Integrated Security=SSPI`而不是用户名和密码。

# c# - 如何将 XML 节点附加到 Xml Document 的特定节点？

> ID：12974006
> 
> 赞同：0
> 
> 时间：2012-10-19T12:08:37.640
> 
> 标签：c#, xml, appendto

我有一个`XMLNode item`要附加到`XMLNode targetNode`的`XMLDocument docRss`

```
 XmlNode targetNode = docRss.SelectSingleNode("channel");
 targetNode .AppendChild(docRss.ImportNode(item, true)); 
```

**异常**：对象引用未设置为对象的实例。

**编辑**我发现**targetNode 为空，但为什么呢？**如在 docRss.innerXml 中向我们展示它的存在

*在此声明之前的值是：*

```
docRss.innerXml   = <?xml version=\"1.0\"?><rss version=\"2.0\"><channel><title>The federal Savings Bank News Feeds</title><link>https://www.thefederalsavingsbank.com</link><description>The federal Savings Bank News Feeds</description><language>en-us</language></channel></rss>

item.innerXml  = <title>Housing market improvement helps economy</title><link>https://www.thefederalsavingsbank.com/Advice</link><description>&amp;lt;p&amp;gt;According to The Associated Press, a strong housing report helped improve the stock market, showing that the housing market affects more than just one industry.&amp;lt;/p&amp;gt;\r\n&amp;lt;p&amp;gt;The Dow increased by 5.22 points to close at 13,557, which marked the fourth straight day of gains, which is thought to be a result of the improving housing market.&amp;lt;/p&amp;gt;\r\n&amp;lt;p&amp;gt;Time Magazine recently reported that a recovery for the housing market is also great news for large banks. The Department of Commerce announced that new residential construction projects increased by 15 percent in September in comparison to the prior month, and they also increased by 34.8 percent compared to last year.&amp;lt;/p&amp;gt;\r\n&amp;lt;p&amp;gt;Housing starts are still down from the numbers that were seen before the recession, but the market is steadily improving every month.&amp;lt;/p&amp;gt;\r\n&amp;lt;p&amp;gt;First-time home buyers who are interested in purchasing a home might look at now as the perfect time considering the low cost of mortgages and affordable rates that are offered. Those considering buying their first home should look into FHA loans considering they offer lower interest rates.&amp;lt;/p&amp;gt;</description> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T12:32:19.760

看起来您正试图操纵 RSS 提要。[使用System.ServiceModel.Syndication](http://msdn.microsoft.com/en-us/library/bb357210.aspx)命名空间的成员不会消除很多痛点吗？例如 SyndicationFeed 和 Rss20FeedFormatter...

要将节点添加到提要中，请尝试以下操作...

```
void RetargetFeed()
{
    string feedLocation = "http://example.com/rssfeed";

    // read original feed
    Rss20FeedFormatter rssformat = new Rss20FeedFormatter();
    rssformat.ReadFrom(XmlReader.Create(feedLocation));

    // create a list of items from the rogiinal
    List<SyndicationItem> items = new List<SyndicationItem>();
    items.AddRange(rssformat.Feed.Items);

    // add a new item to the end of the list
    items.Add(new SyndicationItem("Test Item", "This is the content for Test Item", new Uri("http://Contoso/ItemOne"), "TestItemID", DateTime.Now));

    // create a new Rss writer
    SyndicationFeed newFeed = new SyndicationFeed(items);
    var writeFormat = new Rss20FeedFormatter(newFeed);
    //and write the output to a file
    writeFormat.WriteTo(XmlWriter.Create("testoutputfile.xml"));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T12:49:30.087

is null 所以我选错了 `targetNode`它必须选为

```
 XmlNode channel = docRss.SelectSingleNode("rss/channel"); 
```

# c++ - 在我自己的班级上使用 std::inner_product

> ID：12974007
> 
> 赞同：1
> 
> 时间：2012-10-19T12:08:48.967
> 
> 标签：c++, vector, iterator

我想出了我自己的小类 TinyVector。现在我正在尝试使用 std::inner_product 。但我无法让它工作，我不明白为什么这不起作用。我正在使用 Visual Studio 2012。

```
#include <iostream>
#include <vector>
#include <numeric>

using namespace std;

template<class T, int N>
class TinyVector {
public:
    TinyVector() { data = vector<T>(N, 0); }
    explicit TinyVector(const T initVal) { data = vector<T>(N, initVal); }
    ~TinyVector() { data.clear(); }
    inline T& operator[](int i) { return data[i]; }
    inline T operator[](int i) const { return data[i]; }
    inline vector<T>::const_iterator begin() const { return data.begin(); } //Line 15
    inline vector<T>::const_iterator end() const { return data.end(); } //Line 16
private:
    vector<T> data;
};

template<class T, int N>
inline double dot(const TinyVector<T,N>& A, const TinyVector<T,N>&  B)
{
    return inner_product(A.begin(), A.end(), B.begin(), 0.0);
}

int main()
{
    TinyVector<double, 10> Ty;
    for (int i = 0; i < 10; ++i)
        Ty[i] = i;

    cout << dot(Ty,Ty) << endl;
} 
```

编译器告诉我：语法错误：缺少';' 在第 15 行的标识符“开始”之前。缺少类型说明符 - 假定为 int。注意：C++ 不支持第 15 行的 default-int。语法错误：缺少 ';' 在第 16 行的标识符“结束”之前。缺少类型说明符 - 假定为 int。注意：C++ 在第 16 行不支持 default-int。

But changing `vector<T>::const_iterator` into `vector::const_iterator` doesn't seem like the way to go. Also changing it to 'auto' does not work. This gives me "expected a trailing return type". If I delete line 15,16 and 17 and replace A.begin() with A.data.begin() and the next two arguments accoringly, everything is fine. But why doesn't my original code work, and how can I get it to work?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T12:12:32.273

You need to write

```
inline typename vector<T>::const_iterator begin() const { return data.begin(); } //Line 15
       ^^^^^^^^ 
```

This is because `vector<T>::const_iterator` is a dependent name (it is dependent on the type parameter `T`) and so the compiler needs to be told that `vector<T>::const_iterator` is a type (and not, say, an `enum` value or static data member).

# c# - 我可以在 JScript .NET 中使用 DirectX

> ID：12974017
> 
> 赞同：1
> 
> 时间：2012-10-19T12:09:09.497
> 
> 标签：c#, .net, directx, jscript.net, sharpdx

我是一名希望制作 3D 游戏的 JavaScript 开发人员。

起初我尝试了 C#，因为它看起来比 C++ 简单得多，但我刚刚了解了 JScript .NET，它是 JavaScript 的一个版本，它也使用像 C# 这样的 .NET 框架。

我想知道的是，我可以在 JScript .NET 中使用 DirectX（或者更准确地说，SharpDX）吗？如果可以，它比 C# 更好还是更慢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T12:54:16.470

如果我是 Javascript 开发人员，我会在浏览器中使用 WebGL 开发 3D 应用程序......

但是，如果您“只是”一个 JScript.NET 开发人员，您当然可以使用像 SharpDX 这样的 DirectX 托管包装器（但由于 JScript.NET 对泛型的限制，我认为它不太适合）。此外，“比 C# 更好或更慢”的说法也不一致。更好是一种品味问题。

关于哪个更慢，JavaScript 不是静态类型语言，因此它当然会更慢，因为 .NET/CLR JIT 无法像 C# 程序那样优化。但是在使用 .NET 的全部功能（泛型、不安全等）方面，C# 比 Javascript 强大得多。

在您的情况下，我会转向 JavaScript 浏览器和 WebGL 或 C# 和 SharpDX，并且不会停留在几乎“死”的 JScript.NET 语言/环境中。

# java - Java 将共享类和方法作为 Link NetBeans 添加到多个项目

> ID：12974018
> 
> 赞同：0
> 
> 时间：2012-10-19T12:09:09.577
> 
> 标签：java, netbeans

> 我使用了 Visual Studio 2010 中可用的添加为链接选项（下面附上屏幕截图）。

[https://dl.dropbox.com/u/70687768/link.png](https://dl.dropbox.com/u/70687768/link.png)

> 我想使用 NetBeans IDE 在 Java 中实现相同的目标。
> 
> 当尝试附加文件时，它在 ErrorAddAsLink.JPG 下面给出。

[https://dl.dropbox.com/u/70687768/ErrorAddAsLink.JPG](https://dl.dropbox.com/u/70687768/ErrorAddAsLink.JPG)

> 简而言之，我想要一个通用代码（例如方法： readFileAsString(path) ， LoadXML(path) ），它将保存在一个位置并且应该能够被多个项目访问（不是 jar，因为我想访问每个人都可以查看和更改这些方法）
> 
> 我参考了下面的链接，但没有帮助，

[Netbeans 中的“添加为链接”？](https://stackoverflow.com/questions/11395173/add-as-link-in-netbeans)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:49:13.500

以防万一，我将发布有关您如何执行我在对该问题的评论中描述的步骤（我认为这是一个可行的选择）。

1.  为要共享的代码创建一个 Netbeans Java 类库项目
2.  将此代码提交到您的 SVN 或类似系统（如果您认为这是有益的，您可以提交整个项目）
3.  让您的团队将代码/项目签出到本地工作副本中
4.  在 NB 中将其作为项目打开，因此它位于打开的主项目旁边
5.  将此项目作为库添加到您的主项目中；右键单击`Projects > [main-project-name] > Libraries`并选择“添加项目...”
6.  选择新建的java类库项目并确认

现在您的主项目依赖于另一个项目的 JAR，因此每当更新代码和构建主项目之前，都会重新构建此 JAR。您不必单独构建它。

现在每个团队成员都可以编辑公共代码并将其提交给 SVN（可以通过 Netbeans IDE 完成，无需任何外部客户端，例如 Tortoise）。其他人只需要经常检查更新并在必要时进行更新。

这与将外部文件作为链接具有相同的效果，但它更有条理。我不认为 N​​etbeans 具有您描述的确切功能。

在这种情况下，我假设 Netbeans 被用于 Java 编码。

# makefile - 使用 GNU make 复制源文件

> ID：12974021
> 
> 赞同：0
> 
> 时间：2012-10-19T12:09:28.297
> 
> 标签：makefile, gnu

我在另一篇文章中问过这个问题，但可能太模糊了，所以我再试一次。

我有一个 Linux GNU C 项目，它需要为两个不同的硬件设备构建输出，使用一个通用的 C 源代码库，但使用不同的 makefile。有足够的磁盘空间，所以我不介意在两个不同的目录中拥有相同源文件的两个副本。目标使用不同的处理器，因此生成的 obj 和 exe 文件完全不同，即使编译的代码几乎相同（不同的预处理器指令等）。

我正在测试一个小的makefile来做到这一点。它需要处理 .c 和 .h 文件，但现在只处理 .c。源目录是“/mnt/hgfs/works/firmware_us10c”，我正在复制到同级目录“/mnt/hgfs/works/firmware_us100c”。这是它的样子：

```
%.c : ../firmware_us10c/%.c
<tab>cp $< $@ 
```

当我用“make -f test -n”测试这个文件时，它会响应：

```
make: *** No targets. Stop. 
```

我用“stat”验证了源文件夹中的 main.c 和许多其他文件都比较新，所以应该有很多目标。有人可以帮我修复这个简单的makefile吗？我将如何更改它以处理 .h 文件呢？在此先感谢 - 格雷格

编辑：感谢@PW 的输入。我现在有这个：

```
DEST = $(addprefix ../firmware_us100c/, $(wildcard *.c))
all: $(DEST)
../firmware_us100c/%.c: %.c
    cp $< $@ 
```

我如何扩展它以覆盖 .h 文件呢？

编辑：我玩弄了它并想出了这个来处理 .h 文件，以及三个需要更新的子目录。

```
DEST = $(addprefix ../firmware_us100c/, $(wildcard *.c))
DEST += $(addprefix ../firmware_us100c/, $(wildcard *.h))
DEST += $(addprefix ../firmware_us100c/, $(wildcard zem510/*.c))
DEST += $(addprefix ../firmware_us100c/, $(wildcard zem510/*.h))
DEST += $(addprefix ../firmware_us100c/, $(wildcard fpsensor/*.c))
DEST += $(addprefix ../firmware_us100c/, $(wildcard fpsensor/*.h))
DEST += $(addprefix ../firmware_us100c/, $(wildcard iclock/*.c))
DEST += $(addprefix ../firmware_us100c/, $(wildcard iclock/*.h))

all: $(DEST)

../firmware_us100c/%.c: %.c
    cp $< $@
../firmware_us100c/%.h: %.h
    cp $< $@
../firmware_us100c/zem510/%.c: zem510/%.c
    cp $< $@
../firmware_us100c/zem510/%.h: zem510/%.h
    cp $< $@
../firmware_us100c/fpsensor/%.c: fpsensor/%.c
    cp $< $@
../firmware_us100c/fpsensor/%.h: fpsensor/%.h
    cp $< $@
../firmware_us100c/iclock/%.c: iclock/%.c
    cp $< $@
../firmware_us100c/iclock/%.h: iclock/%.h
    cp $< $@ 
```

如果有更清洁的方法，请告诉我。

编辑：感谢@PW 进行额外的编辑以清理它。还有一件事会有所帮助。有没有办法反转逻辑，使其在目标（目标）目录中运行？因为我必须在编辑后在目录之间来回切换，以更新源代码，然后运行 ​​makefile。我尝试了几件事，但无法弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:24:00.067

你的makefile中有规则但没有目标。

```
CP = cp
# CP = cp -p # if you want to preserve dates
DEST = $(addprefix your_dest_folder/, $(wildcard *.c *.h))

all: $(DEST)

your_dest_folder/%.c: %.c
    $(CP) $< $@

your_dest_folder/%.h: %.h
    $(CP) $< $@

.PHONY: all 
```

由于您有子目录，请将通配符更改为`$(wildcard */*.c */*.h)`

# javascript - 更改项目大小后同位素砌体布局不起作用

> ID：12974030
> 
> 赞同：3
> 
> 时间：2012-10-19T12:10:11.790
> 
> 标签：javascript, jquery, html, jquery-masonry, jquery-isotope

我有一个简单的砌体布局。并且需要在点击时更改元素的大小和位置。

这是一个 jsfiddle：http: [//jsfiddle.net/664cV/12/](http://jsfiddle.net/664cV/12/)和代码：

**JS**

```
$(function(){
    $('#container').isotope({
        itemSelector: '.box'
    });

    $('.box').click(function(){
        $('.box').width(100).height(100);
        $(this).width(300).height(300);

        $('#container').isotope('reLayout');
    });
});​ 
```

**CSS**

```
#container {
    width: 400px;
}

.box {
    font-size: 28px;
    width: 100px;
    height: 100px;
}

/* omitted color classes */ 
```

**HTML**

```
<div id="container">
    <div class="box red">1</div>
    <div class="box blue">2</div>
    <div class="box green">3</div>
    <div class="box yellow">4</div>
    <div class="box black">5</div>
</div>​ 
```

问题是元素编号**1**和编号**3**无法正常工作（见图）

**单击元素 1（已解决：[查看答案](https://stackoverflow.com/a/12975265/284374)）**

![错误 1](../Images/8880b3b9a6b4b552f7388f0c7e270410.png)

**单击元素 3**

![错误 2](../Images/443fcbdff2a41a8a9850a2e7c94a4265.png)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T13:25:50.317

您需要设置[砌体第一项宽度](http://isotope.metafizzy.co/docs/help.html#first_item_breaks_masonry_layout)，以便在重新调整大小后，同位素将记住此设置，而不是新的第一项宽度，以保持网格一致。

可悲的是，第 3 项仍然留有空白，但我认为这是同位素的标准行为，因为它将第 4 项放在第一个自由行，在这种情况下为第 1 行。

```
masonry: {
    columnWidth: 100
} 
```

事实上，如果您单击第 7 号框，它也会留下一个空白区域。也很高兴找到该默认行为的解决方案。

```
<div class="box red">6</div>
<div class="box blue">7</div>
<div class="box green">8</div>
<div class="box yellow">9</div>
<div class="box black">10</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T14:20:07.263

砖石和同位素仅使列最大化。您可以从 wookmark jquery 插件中找到解释。当你想最大化列和行时，你需要别的东西。

1.  [http://www.quora.com/Pinterest/What-technology-is-used-to-generate-pinterest-coms-absolute-div-stacking-layout](http://www.quora.com/Pinterest/What-technology-is-used-to-generate-pinterest-coms-absolute-div-stacking-layout)
2.  [http://www.benholland.me/javascript/how-to-build-a-site-that-works-like-pinterest/](http://www.benholland.me/javascript/how-to-build-a-site-that-works-like-pinterest/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-13T15:53:38.693

我自己也遇到了这个问题，并通过在容器顶部添加一个空的 div 来修复它，该 div 具有与我的砌体项目相同的选择器，然后添加了 css：

```
.grid-item:first-child {
    width: 1px;
    height: 0;
    padding: 0;
} 
```

如果您想知道这是否会导致您的第一个项目向右移动一个像素，答案是否定的。我猜这是因为高度为0，所以它不占用空间。我希望这不涉及添加不必要的 HTML，但它似乎工作得很好。

# objective-c - 清除 iOS CoreData 数据库可防止后续更新

> ID：12974042
> 
> 赞同：2
> 
> 时间：2012-10-19T12:10:50.650
> 
> 标签：objective-c, ios, core-data, nsmanagedobject, nsmanagedobjectcontext

我的 iPad 应用程序中的功能需要我偶尔清除整个 coredata 数据库。我这样做如下：

```
+(BOOL)clearEntireDB
{
    // Empty all collections

    NSArray* stores = [NSArray arrayWithObjects:@"ServerToken",@"Client",@"User",@"Form",@"Company",@"Contact",@"Response",@"Image",@"Thumbnail",@"SearchIndex",@"Tag",@"Literature", nil];

    BOOL rc=YES;
    for (int i=0;i<stores.count;i++)
    {
        if (rc==YES)
        {
            NSString* storeName = (NSString*)[stores objectAtIndex:i];
            rc=[HPSDbUtilities clearStore:storeName];
        }
    }

    if (rc==YES)
    {
    // Now need to delete all files in the document folder
        rc = [HPSFileHelper removeAllDocumentFiles];
    }

    return rc;
}
+(BOOL)clearStore:(NSString*)storeName
{
    BOOL rc=NO;

    @try{

        NSLog(@"HPSDbUtilities::clearStore %@",storeName);

        HPSAppDelegate* appDelegate = [[UIApplication sharedApplication] delegate];
        NSManagedObjectContext * context = appDelegate.managedObjectContext;
        NSFetchRequest * fetch = [[NSFetchRequest alloc] init];
        [fetch setEntity:[NSEntityDescription entityForName:storeName inManagedObjectContext:context]];
        NSArray * result = [context executeFetchRequest:fetch error:nil];
        for (id record in result)
            [context deleteObject:record];

        NSError* error;

        if ([context save:&error] == YES)
        {
            NSLog(@"HPSDbUtilities::clearStore SAVED"); 
        }else {
            NSLog(@"HPSDbUtilities::clearStore NOT saved"); 
        }
        rc=YES;

    }@catch (NSException * e) {

        NSLog(@"clearStore Exception: %@", e);
        rc=NO;
    }

    return rc;
} 
```

该应用程序有一个辅助线程，它使核心数据数据库与网络保持同步。清除整个数据库时，我停止了这个辅助线程。清除数据库后，我再次启动辅助线程。

在我清除数据库之前，辅助线程中的所有处理都可以正常工作。然后辅助线程保存处理开始失败，并出现以下错误：

```
Error Domain=NSCocoaErrorDomain Code=134030 "The operation couldn’t be completed. (Cocoa error 134030.)" UserInfo=0x261c10 {NSAffectedStoresErrorKey=(
    "<NSSQLCore: 0xfe91310> (URL: file://localhost/var/mobile/Applications/3013185E-8171-4A1F-9E1F-6A02E7664510/Documents/Model.sqlite)"
), NSUnderlyingError=0x261b90 "The operation couldn’t be completed. (Cocoa error 4.)", NSFilePath=/var/mobile/Applications/3013185E-8171-4A1F-9E1F-6A02E7664510/Documents/Model.sqlite} 
```

辅助线程代码分布在多个类中，因此我无法在此处真正展示所有内容，但它很简单，只需创建 MOC、更新记录并保存 MOC。

任何人都可以阐明这个问题吗？

# python - PorterStemmer 似乎不起作用

> ID：12974045
> 
> 赞同：9
> 
> 时间：2012-10-19T12:10:59.940
> 
> 标签：python, nltk, porter-stemmer

我是 python 新手，用书中的例子练习。
谁能解释为什么当我试图用这段代码来阻止一些例子时，什么都没有改变？

```
>>> from nltk.stem import PorterStemmer
>>> stemmer=PorterStemmer()
>>> stemmer.stem('numpang wifi stop gadget shopping')
'numpang wifi stop gadget shopping' 
```

但是当我这样做时它有效

```
>>> stemmer.stem('shopping')
'shop' 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-19T12:27:40.417

试试这个：

```
res = ",".join([ stemmer.stem(kw) for kw in 'numpang wifi stop gadget shopping'.split(" ")]) 
```

问题在于，这个词干分析器可能只对单个单词起作用。您的字符串没有“根”字，而单个单词“购物”有根“商店”。所以你必须单独计算词干

编辑：

从他们的源代码->

```
Stemming algorithms attempt to automatically remove suffixes (and in some
cases prefixes) in order to find the "root word" or stem of a given word. This
is useful in various natural language processing scenarios, such as search. 
```

所以我想你确实是被迫自己拆分你的字符串

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-07-10T10:15:17.087

词干化是将给定单词简化为其基本形式或变形形式的过程，在这里你试图阻止整个句子，

**请按照以下步骤操作**：

```
from nltk.tokenize import word_tokenize
from nltk.stem import PorterStemmer
sentence = "numpang wifi stop gadget shopping"
tokens = word_tokenize(sentence)
stemmer=PorterStemmer()

Output=[stemmer.stem(word) for word in tokens] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-06-23T16:40:52.777

试试这个：

```
from nltk.stem import PorterStemmer
from nltk.tokenize import word_tokenize

stemmer = PorterStemmer()

some_text = "numpang wifi stop gadget shopping"

words = word_tokenize(some_text)

for word in words:
    print(stemmer.stem(word)) 
```

# c# - 从路由页面获取文件路径

> ID：12974050
> 
> 赞同：1
> 
> 时间：2012-10-19T12:11:13.240
> 
> 标签：c#, asp.net, routing

我有一个母版页，我正在尝试获取当前文件名。因此，例如我在[http://website.com/test.aspx](http://website.com/test.aspx)我想使用 Request 对象来获取“test.aspx”

我不是.net 的新手，以前也能做到这一点，但问题是我正在使用路由。

在我的 Global.asax 我有这个

routes.MapPageRoute("test", "newroutedurl/", "~/test.aspx");

所以我可以访问[http://website.com/newroutedurl/](http://website.com/newroutedurl/)并将其路由到 text.aspx - 一切都很好，但我似乎无法找到获取实际文件路径的方法。我想返回“test.aspx”，但它正在返回“newroutedurl/”

有没有办法解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T15:12:05.890

如果你在后面的代码中运行它，它应该返回 text.aspx：

```
var pageName = Page.GetType().Name.Replace("_", "."); 
```

# performance - Internet Explorer 兼容性视图性能

> ID：12974055
> 
> 赞同：0
> 
> 时间：2012-10-19T12:11:26.737
> 
> 标签：performance, internet-explorer, internet-explorer-9, ie-compatibility-mode

我使用 IE9，我知道兼容模式使用 IE7 渲染引擎，但性能呢？如果启用了兼容模式，它会减慢页面加载和 javascript 吗？

从一个切换到另一个时，我没有看到重大差异。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T12:18:11.757

Internet Explorer 9 包括跨 HTML 解析器、CSS 引擎、标记树操作以及 JScript 运行时和相关垃圾收集器的性能改进。由于 JScript 对象和 DOM 对象之间循环引用处理不一致而导致的内存泄漏已得到纠正。为了更好的安全性和稳定性，IE9 使用了松耦合 Internet Explorer (LCIE) 架构，并在单独的进程中运行浏览器框架和选项卡。LCIE 可防止故障和挂起导致整个浏览器崩溃，并带来更高的性能和可扩展性。ActiveX 控件的权限变得更加灵活 - 现在可以在每个站点的基础上允许它们，而不是全局启用或禁用它们。因此，所有这些功能在兼容模式下都将不可用。

# .net - 使用 EWS API 和 SQL Server 数据库作为数据源

> ID：12974061
> 
> 赞同：0
> 
> 时间：2012-10-19T12:11:52.050
> 
> 标签：.net, sql-server, entity-framework, exchangewebservices

我是 EF 的新手，我正在尝试构建（我认为）是我办公室的一个相当简单的应用程序。我正在编写一个应用程序来跟踪我们投标的项目。每个biditem都将跟踪（通过导航属性）我们正在竞标的客户（投标人）（建筑行业，因此每个项目有多个客户）和项目注释。

我计划将 EF（与 SQL Server）用于bidtracker，但我想使用 EWS 托管 API 来获取/维护联系信息，以便办公室只需维护一个可通过 Outlook 获得的联系人列表。

那么，实体框架是否可以使用混合数据源（SQL Server 和 Exchange 服务器）？如果是这样，你能给我指出一个很好的资源来帮助我接线吗？

这是一个简化的模型（`BidItem`和`Note`将在 SQL Server 中，`Contact`将来自 Exchange）：

![在此处输入图像描述](../Images/6929f3928fc667d82e295320492e3598.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T22:55:54.420

EF 目前不支持使用一个上下文，其中一部分模型映射到一个数据库，一部分模型映射到另一个数据库。您可以使用两个上下文，但是您需要手动处理模型不同部分之间的交互。此外，您需要找到一个 EF 提供程序才能将数据从 Outlook 中取出，而我不知道现有的一个。

您最好的选择可能是镜像 SQL Server 中的数据或单独处理 Outlook 数据（不使用 EF）并使用您自己的代码将这两个模型组合在一起。这可能可行，也可能不可行，具体取决于您需要对数据做什么。

# iphone - 更新单例

> ID：12974063
> 
> 赞同：0
> 
> 时间：2012-10-19T12:11:58.203
> 
> 标签：iphone, objective-c, singleton

在我的应用程序中，我有一个用于集中存储我的应用程序数据的单例类。我还使用 nskeyarchiver 在此处加载和保存对象。我有一个管理类，我在其中创建了一系列使用 Singleton 类中的 sequenceCollection 初始化的 numbersequencer 实例。如果我修改存储在我的实例中的每个 evntSequencer 字典中的 self.sequence 和 self.times，则此处更改的值会反映在存储在 Singleton 中的源 sequenceCollection 中。我可以使用 NSkeyArchiver 保存并且写入的值是正确的。但是，如果我通过调用 Singleton 中的 loadProjectWithName 方法来更改值，则源 sequenceCollection 会更改，但是 evntSequencers 以及 numbersequencer 实例中的 self.sequence 和 self.times 不会更新并包含不同的值。我通过在 Management 类中添加 updateSequence 方法解决了这个问题。这一切都有效，但它不是特别优雅，我对为什么需要采取这一步有点困惑？

单人班

```
+(AppManager *)SharedAppManager{

    static AppManager *_sharedAppManager;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
    _sharedTileManager = [[self alloc]init];
    });

    return _sharedAppManager;

    }

+(id)alloc
    {
   {
        NSAssert(_sharedAppManager == nil,@"Attempted to allocate a second instance of the  
        singleton");
        _sharedAppManager = [super alloc];
        return _sharedAppManager;
     }

   }

-(id)init
{
   self = [super init];
   if (self) 
     {
    return self;
}

-(NSMutableDictionary *)collateProject {

    NSMutableDictionary *projectDict = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                self.sequenceCollection,@"sequences",nil];
    // other project container not shown

    return projectDict;

    } 

-(void)allocateSequencerStorage:(NSInteger)no {

      if (self.sequenceCollection ==nil) {

        self.sequenceCollection = [[NSMutableDictionary alloc]init];
        for (int i = 0; i < no; i++) {

        NSMutableArray *events = [[NSMutableArray alloc]init];
        NSMutableArray *eventTimes = [[NSMutableArray alloc]init];
        NSMutableDictionary *sequence = [[NSMutableDictionary alloc]initWithObjectsAndKeys:
        events,@"events",eventTimes,@"eventtimes", nil];

        [events release];
        [eventTimes release];

        [self.sequenceCollection setObject:sequence forKey:[NSString stringWithFormat:@"sequence%d",i]];

        [sequence release];
     }

    }

    }

//File Manager class not shown

-(void)loadProjectWithName:(NSString *)name {

    id object = [FileManager loadFileWithName:name andPathID:kProjectFolder];
           if ([object isKindOfClass:[NSMutableDictionary class]]) {
              NSMutableDictionary *loadProject = object;

             //
            // SEQUENCES

                if ([loadProject objectForKey:@"sequences"] != nil) {        
                    self.sequenceCollection = [loadProject objectForKey:@"sequences"];

             //notify loaded

       } 
```

用于管理编号排序器的管理类其他代码未显示

```
#define AppSingleton ((AppManager*)[AppManager sharedAppManager])

-(id)initWithNo:(unsigned int)seqcount andMaxChainLen:(unsigned int)length {

    self = [super init];
    if (self) {

        //create our suite of sequencers
        self.sequencers = [[NSMutableArray alloc]init];

        // initiate central stores in singleton
        [AppSingleton allocateSequencerStorage:seqcount];

        for (int i = 0; i < seqcount; i++) {

            [self.sequencers addObject:[[NumberSequence alloc]initForSequenceWithLen:length   
     andTag:i withStore:AppSingleton.sequenceCollection]];

     [(NumberSequence*)[self.sequencers objectAtIndex:i]setDelegate:self];
        }
    }
    return self;
}

//This is called after sequenceCollection is updated in Singleton

-(void)updateSequences:(NSNotification *)notification {

    [self.sequencers enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) 
      {

            if ([obj isKindOfClass:[NumberSequence class]]) {

            NumberSequence *seq = obj;
           seq.evnts = [AppSingleton.numberCollection objectForKey:[NSString    
           stringWithFormat:@"sequence%d",idx]];
           seq.sequence = [seq.evnt objectForKey:@"events"];
           seq.times = [seq.evnts objectForKey:@"eventTimes"];

       }
      }];

     } 
```

NUMBER SEQUENCE CLASS 其他方法未显示

```
- (id)initForSequenceWithLen:(unsigned int)seqlen andTag:(unsigned int)tag withStore:   
(NSMutableDictionary *)store {

    if (self = [super init]){
        self.evntSequencer = store;
        self.sequence = [self.evntSequencer objectForKey:@"events"];
        self.times = [self.evntSequencer objectForKey:@"eventTimes"];
    }
    return self; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T12:20:13.420

您的解决方案没问题：如果您的经理从您的单例类中复制数据，则没有其他方法可以解决，因为在原始更改时告诉经理更新是数据的副本。

从设计的角度来看，您可以做的改进事情是让`loadProjectWithName`方法本身将通知发送给它的“客户”（例如，经理），这样他们就知道他们必须更新他们的本地数据副本。

我希望我没有误解任何事情。

# c# - Windows 8 XAML C# 实现 Page_Error？

> ID：12974067
> 
> 赞同：0
> 
> 时间：2012-10-19T12:12:03.600
> 
> 标签：c#, windows-8, microsoft-metro, windows-runtime, .net-4.5

我正在尝试为我的 Windows 8 应用程序创建一个基本页面。我正在尝试创建一个页面错误方法，以便整个应用程序中发生的任何错误都可以冒泡到基页并在那里处理。我一直在 ASP.Net 应用程序中采用相同的方法。但是我找不到任何页面错误方法或某种方法来处理整个应用程序的基页异常。如何在 Windows 8 应用程序中使用 C#、XAML 来实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:14:57.127

WinRT 开发与 ASP.Net 完全不同。

您正在寻找[`Application.UnhandledException`活动](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.application.unhandledexception.aspx)。

# tfs - tfs 构建服务器以设置程序集特定版本

> ID：12974081
> 
> 赞同：0
> 
> 时间：2012-10-19T12:13:14.053
> 
> 标签：tfs, msbuild, version, .net-assembly, build-server

使用构建服务器，是否可以将正在构建的项目引用的所有程序集的属性“特定版本”设置为 true？

如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T11:16:10.893

我不相信您可以自动执行此操作（除了在 csproj 文件中的 xml 黑客攻击），唯一的方法是手动设置每个项目中的每个引用。

# javascript - 如何在 MVC 视图中将变量值传递给 JScript？

> ID：12974085
> 
> 赞同：0
> 
> 时间：2012-10-19T12:13:24.457
> 
> 标签：javascript, asp.net-mvc-3

我正在开发 MVC 应用程序，我想在其中将变量传递给该视图本身中的 JScript。怎么做？

我想将 AccessMode 的值发送到 Javascript。
我已经声明了该变量，但不知道如何在 JScript 中使用它。

```
<script src="@Url.Content("~/Scripts/jquery-1.8.0.min.js")" type="text/javascript"></script>

@model CRMEntities.Settings

@{
    ViewBag.Title = "CustomSettings3";
    //Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>CustomSettings3</h2>
<!DOCTYPE html>

<html>
<head>
    <title>CustomSettings3</title>
</head>
<body>

       @{string AccessMode; }
     @{string Ratings; }

       <div class="editor-label">
            @Html.LabelFor(model => model.AccessMode)
        </div>
        <div class="editor-field">
           @* @Html.EditorFor(model => model.AccessMode)*@
            @Html.DropDownList("AccessMode")
            @Html.ValidationMessageFor(model => model.AccessMode)
             //Assigning value.
            AccessMode = model.AccessMode
        </div>

         <div class="editor-field">

         @Html.DropDownList("RatingsCount")
        @Html.ValidationMessageFor(model => model.RatingsCount)
         @{
             Ratings = Html.DropDownList("RatingsCount");
        }
    </div>

        <p>
            <input type="button" value="Save" class="SaveSettings"/>       

        </p>

</body>
</html>

  <script type="text/javascript">

$(document).ready( function(){

    $('.SaveSettings').click(function ()
    {

           $.ajax
            ({

            type: 'post',
            url: '@Url.Content("~/Settings/SaveBasicSettings")',
            dataType: 'json',
            data:
            { 'AccessMode': "@AccessMode" },
            success: function (data) 
            {

            }

            });

       });

  });

</script> 
```

![在此处输入图像描述](../Images/f6be76a436fbb4a2edda9b8d72ec9901.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T12:15:17.293

鉴于这`AccessMode`只是在您的视图中定义的字符串变量，并且您的 JS 嵌入在同一个视图中，您可以简单地将变量的值以标准方式写入您的 JS：

```
{ 'AccessMode': "@AccessMode" }, 
```

将 JS 移动到单独的文件（如果您选择这样做）后，您可以执行此操作的另一种方法是将 AccessModel 值存储为编辑器字段上的数据属性。

这样，您的 javascript 就可以像处理页面上的任何其他属性一样简单地提取它。

**更新：**

您分配值的方式也需要调整：

```
@{
AccessMode = Model.AccessMode
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T12:55:31.863

如果您的值设置正确，则可以将其存储在隐藏变量中并在 javascript 中读取

在视图中

```
<div class="editor-label">
            @Html.LabelFor(model => model.AccessMode)
        </div>
        <div class="editor-field">
           @* @Html.EditorFor(model => model.AccessMode)*@
            @Html.DropDownList("AccessMode")
            @Html.ValidationMessageFor(model => model.AccessMode)
             //Assigning value.
            AccessMode = model.AccessMode

           @Html.Hidden("modelValue", AccessMode)  //set value in hidden variable 
        </div> 
```

在 JavaScript 中

```
<script type="text/javascript">
    $(document).ready(function () {

        $('.SaveSettings').click(function () {
            var modelValue = $("#modelValue").val();
            $.ajax
            ({

                type: 'post',
                url: '@Url.Content("~/Settings/SaveBasicSettings")',
                dataType: 'json',
                data: { 'AccessMode': modelValue },
                success: function (data) {

                }

            });

        });

    });

</script> 
```

注意：检查 Hidden 变量的 model.AccessMode 中的值是否设置正确。

# java - 如何对表格列求和并将总值设置为文本字段？

> ID：12974086
> 
> 赞同：0
> 
> 时间：2012-10-19T12:13:26.860
> 
> 标签：java, swing, jtable

```
package com.orb;

import java.util.LinkedList;
import javax.swing.table.AbstractTableModel;
import com.orb.bean.Product;

public class ProductTableModel extends AbstractTableModel {

    private static final long serialVersionUID = -250883760398754970L;
    private final LinkedList<Product> list= new LinkedList<Product>();
    private final LinkedList<Boolean> checkList = new LinkedList<Boolean>();
    public void addItem(Product customer) {
        list.add(customer);
        checkList.add(false);
        fireTableDataChanged();
    }

    @Override
    public int getColumnCount() {
            return 5;
    }

    @Override
    public int getRowCount() {
        return list.size();
    }

    @Override
    public Object getValueAt(int rowIndex, int columnIndex) {
        Object obj = null;

        if(columnIndex==4){
            setTotal(list.get(rowIndex));           
        }
        switch (columnIndex){
            case 0: obj= list.get(rowIndex).getCode() ;break;
            case 1: obj=list.get(rowIndex).getDescription(); break;
            case 2: obj=list.get(rowIndex).getQuantity();break;
            case 3: obj=list.get(rowIndex).getPrice();break;            
            case 4: obj=list.get(rowIndex).getTotal();break;            
        }
        return obj;
    }

    @Override
    public Class<?> getColumnClass(int arg0) {
        switch(arg0){
        case 0: case 1: return String.class; 
        case 2: return Integer.class; 
        case 3: case 4: return Double.class;
        }

        return super.getColumnClass(arg0);
    }
    @Override
    public boolean isCellEditable(int arg0, int arg1) {
        boolean isCellEditable = false;
        switch(arg1){
        case 2: case 3: isCellEditable= true;break;
        default: isCellEditable= false;break;
        }
        return isCellEditable;
        //return super.isCellEditable(arg0, arg1);
    }
    @Override
    public void setValueAt(Object arg0, int arg1, int arg2) {
        System.out.println("Value seted" +arg0 + arg1 + arg2);
        switch(arg2){
        case 0: break;
        case 1: break;
        case 2: list.get(arg1).setQuantity((Integer)arg0); setTotal(list.get(arg1)); break;
        case 3: list.get(arg1).setPrice((Double)arg0); setTotal(list.get(arg1));break;          
        case 4: list.get(arg1).setTotal((Double)arg0);break;

           //case 0: checkList.set(arg1, (Boolean)arg0);break;
           default:break;
        }
        //list.get(arg1).setTotal((Double)arg0);
        fireTableDataChanged();
    }

    public LinkedList<Product> getList() {
        LinkedList<Product> temp = new LinkedList<Product>();
        int index=-1;
        for(Boolean isSelected:checkList){
            index++;
            if(isSelected){
                temp.add(list.get(index));
            }
        }
        return temp;
    }

    public void setTotal(Product product){
        Double total = 0.0d;
        total = product.getQuantity ()* product.getPrice();
        product.setTotal(total);
    }
} 
```

我有一个像上面这样的课程。我想对列求和并将其总数放入`JTextfield`. 我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T12:20:57.697

必须

*   覆盖[对象 getValueAt(int rowIndex, int columnIndex)](http://docs.oracle.com/javase/6/docs/api/javax/swing/table/TableModel.html) in`XxxTableModel`

*   循环进入`Column`

*   用于`Number instance`代替[`JFormattedTextField`](http://docs.oracle.com/javase/tutorial/uiswing/components/formattedtextfield.html)普通香草[`JTextField`](http://docs.oracle.com/javase/tutorial/uiswing/components/textfield.html)

*   也许会帮助你这个逻辑，[只将所有金额存储在 JTable 中](https://stackoverflow.com/a/9709633/714968)

# c# - 在 ASP.NET MVC 中使用 jQuery

> ID：12974089
> 
> 赞同：0
> 
> 时间：2012-10-19T12:13:30.750
> 
> 标签：c#, jquery, asp.net-mvc, jquery-dialog, html-select

我不能太多使用jquery，所以我需要帮助。我在这里使用 jQuery UI 对话框。我有链接打开呈现我的部分视图的对话框。

```
$(function () {
    $("#transferTo").dialog({
        autoOpen: false,
        height: 100,
        width: 300,
        modal: true,
        resizable: false,
        open: function (event, ui) {
            $(this).load('<%= Url.Action("TransferTo", "Pacient") %>');
        },
        buttons:
        {
            "Transfer": function () {
                // do something in database
                $(this).dialog("close");
            },
            "Cancel": function () {
                $(this).dialog("close");
            }
        }
    });
    $("#transferToLink").click(function () {
        $("#transferTo").dialog("open");
        return false;
    });
});

<a href="javascript:void()" id="transferToLink">Transfer to</a> 
```

部分视图如下所示：

```
<div id="transferTo">
    Zmena kliniky
<%= Html.DropDownList("klinika", ViewData["kliniky"] as SelectList)%>
</div> 
```

在主视图中有一些数据行。每一行都是具有他的 id 的用户。所以我想做的...

当我单击链接 transferTo （单击每行上的编辑链接后显示）时，我需要将用户的 id 传递给 jquery 函数并在对话框的 Click 事件 TransferTo 上使用它。当用户单击对话框中的 TransferTo 按钮时，它必须从对话框的下拉列表中获取 id 参数和选择的值，并在与数据库通信的 C# 函数中使用它（repository.Edit(id,selectedValue)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:24:56.273

我会这样做：

实现您的链接以调用将打开对话框的 javascript 函数。

```
<a href="#" onclick="openPopup('@id')" id="transferToLink">Transfer to</a> 
```

javascript应该是这样的：

```
function openPopup(id) {
    $("#transferTo").dialog({
        autoOpen: false,
        height: 100,
        width: 300,
        modal: true,
        resizable: false,
        open: function (event, ui) {
            $.ajax({
                "url": yourActionUrl,
                "data": { myParameter: id },
                "type": "POST"
            });
        },
        buttons:
    {
        "Transfer": function () {
            // do something in database
            $(this).dialog("close");
        },
        "Cancel": function () {
            $(this).dialog("close");
        }
    }
    }).open();
} 
```

希望这可以帮助。

PS：如果提到 autoOpen ，最后的 open 方法不是强制性的：true

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T12:38:33.723

您的编辑链接按钮的名称中应包含 ID。类似于“lnkEdit_{id}”的东西，其中 {id} 是项目的实际 ID。

在 $("#transferToLink").click 事件中，从 $(this) 中解析出 Id 并将其设置在表单上的 HiddenValue 字段中。

在对话框的 Transfer 按钮事件中读取此值。

它并不优雅，但您的选择受限于这种类型的设置，而且我之前使用过这种技术没有任何问题。唯一的缺点是您需要一个额外的隐藏字段来存储临时值

# elasticsearch - 在 ElasticSearch 中搜索查询分数详细信息

> ID：12974092
> 
> 赞同：1
> 
> 时间：2012-10-19T12:13:49.090
> 
> 标签：elasticsearch, lucene

我有一个程序，我必须在表（My SQL DB）中搜索给定的字符串。搜索查询检查是否找到任何匹配的字符串。它通过搜索表中的字段为我提供给定字符串的搜索分数。

在这里，我没有得到或无法理解它给我的分数，因为分数不一样或不是线性的。

**有没有办法限制搜索分数或使其线性或易于理解？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T17:37:57.283

不确定您所说的线性是什么意思，但您可以通过查看[Lucene 计算](http://lucene.apache.org/core/3_6_1/api/core/org/apache/lucene/search/Similarity.html)一般分数的方式以及使用 elasticsearch [Explain API](http://www.elasticsearch.org/guide/reference/api/explain.html)查看如何为您的特定查询和数据计算分数来更好地理解评分。

# javascript - 将事件委托给 OSM

> ID：12974108
> 
> 赞同：0
> 
> 时间：2012-10-19T12:14:54.473
> 
> 标签：javascript, jquery, events, openlayers, openstreetmap

我正在尝试为开放的街道地图制作图像叠加层。它应该看起来像这样：

[预览 http://www.wildurb.at/urbwalker-app/preview.png](http://www.wildurb.at/urbwalker-app/preview.png)

我面临的问题是我无法通过图像的透明区域委派事件。

这是我试图用来触发事件的代码：

```
 <img id="overlay" style="position:absolute;" src="overlay.png"/>
    <div id="map"></div> 
```

```
 #overlay {
            position:absolute;       
    }
    #map {
            position:absolute;
            width:300px;
            height:300px;
    } 
```

```
 initMap();

    $('#overlay').bind({
            'mousedown' : function(event) {
                    event.preventDefault(); //no image dragging
                    $('#OpenLayers.Map_4_OpenLayers_ViewPort').trigger(event);
            }
    }
    $('#OpenLayers.Map_4_OpenLayers_ViewPort').bind('mousedown', function(event) {
            console.log(event);
    } 
```

mousedown 永远不会被触发，我不确定在这里使用哪个选择器有没有办法将覆盖上发生的所有事件传递到地图？

提前致谢

最好的问候混乱

- - 编辑 - -

我创造了一个[小提琴](http://jsfiddle.net/PQ8gc/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:33:24.050

使用`bind`如下 api。然后它触发鼠标向下

```
$('#overlay').bind('mousedown',function(event) {
                alert("overlayfired");
                event.preventDefault(); //no image dragging
                $('#OpenLayers.Map_4_OpenLayers_ViewPort').mousedown();
        }
); 
```

参考：[http ://api.jquery.com/bind/](http://api.jquery.com/bind/)

演示：http: [//jsfiddle.net/KwLce/](http://jsfiddle.net/KwLce/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T19:11:43.483

我发现可以使用指针事件：无；用于 chrome firefox 和 safrie 以及 svg 用于 ie 和 opera 的解决方法

```
var map;

$(document).ready(function() {
    map = new OpenLayers.Map('map');
    layer = new OpenLayers.Layer.OSM("Simple OSM Map");
    map.addLayer(layer);

    map.setCenter(
        new OpenLayers.LonLat(-71.147, 42.472).transform(
        new OpenLayers.Projection("EPSG:4326"),
        map.getProjectionObject()),
        12
    );

    if($.browser.msie || $.browser.opera) {
        var over = '<svg id="overlay"><image width="300" height="300" xlink:href="overlay.png"></image></svg>';
    } else {
        var over = '<img id="imgOverlay" src="overlay.png"/>';
    }
    $('body').append(over);
}); 
```

查看此[小提琴](http://jsfiddle.net/PQ8gc/5/)以获取工作解决方案

# multithreading - 简单的内核多线程

> ID：12974110
> 
> 赞同：5
> 
> 时间：2012-10-19T12:15:00.647
> 
> 标签：multithreading, linux-kernel, kernel-module

我是内核模块编程的新手，对于我的工作，我需要编写一个多线程内核模块。所以我尝试了内核线程的一些主要用途。我写了以下内容。它应该在一个线程中打印 1 个，在另一个线程中打印 2 个，均为 10 次。

```
#include <linux/module.h>
#include <linux/moduleparam.h>
#include <linux/kernel.h>
#include <linux/udp.h>
#include <linux/mm.h>
#include <linux/init.h>
#include <linux/kthread.h>

struct task_struct *task1;
struct task_struct *task2;

static void thread_func(void* data)
{   
    int *n;
    n = (int *)data;
    int i = 0;
    while(i < 10){
        printk("%d\n", *n);
        i++;
    }
    //do_exit();
}

static int t_start(void)
{
    printk("Module starting ... ... ..\n");
    int *p1, *p2;
    int one = 1, two = 2;
    p1 = &one;
    p2 = &two;
    task1 = kthread_run(&thread_func, (void*)p1, "thread_func_1");
    task2 = kthread_run(&thread_func, (void*)p2, "thread_func_2");
    return 0;
}

static void t_end (void)
{
    printk("Module terminating ... ... ...\n");
    kthread_stop(task1);
    kthread_stop(task2);
}

module_init(t_start);
module_exit(t_end);

MODULE_AUTHOR("Md. Taufique Hussain");
MODULE_DESCRIPTION("Testing kernel threads");
MODULE_LICENSE("GPL"); 
```

但我面临以下问题。-

1.  第一个线程正在打印所有十个 1，然后第二个线程正在执行。我想以交错的方式运行这两个。
2.  第一个线程打印所有 1 都可以，但第二个线程不打印 2。它正在打印 0。可能参数没有正确传递给第二个线程。
3.  当我插入模块时它正在运行但是当我移除模块时机器挂起

有什么问题？我该如何解决它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T12:51:38.697

1.  你需要 schedule() 除非你有一个可抢占的内核和一些睡眠。
2.  您正在从堆栈传递数据指针，从而破坏内核内存。使这些整数成为全局变量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-27T19:18:59.563

1.不要使用这些代码，删除它们

```
// kthread_stop(task1);
// kthread_stop(task2); 
```

好像线程终止后，task会被设置为null，然后调用kthread_stop()会导致空指针错误

2.不要将局部变量传递给线程，而是使用全局变量。

3.如果你想让两个线程相互切换，使用“wait_event”和“wake_up”函数。这是我的工作代码。

```
#include <linux/init.h>
#include <linux/module.h>
#include <linux/kernel.h>
#include <linux/sched.h>
#include <linux/kthread.h>
#include <linux/wait.h>

MODULE_LICENSE("GPL");

int pid1 = 1;
int pid2 = 2;

DECLARE_WAIT_QUEUE_HEAD(wq);

int condition;

struct task_struct *task1;
struct task_struct *task2;

static int thread_function(void *data){

    int *thread_id = (int*)data;
    int i = 0;
    while(i < 10){
       printk(KERN_INFO "install kernel thread: %d\n", *thread_id);
       i++;

       if(*thread_id == 1)
       {
            wait_event(wq, condition == 0xA);

            condition = 0xB;
            wake_up(&wq);
       }
       else{
            wait_event(wq, condition == 0xB);

            condition = 0xA;
            wake_up(&wq);
       }
   }
   return 0;
}

static int kernel_init(void)
{
     condition = 0xA;

     task1 = kthread_create(&thread_function, (void *)&pid1, "pradeep");
     task2 = kthread_create(&thread_function, (void *)&pid2, "pradeep"); 

     //printk(KERN_INFO "After create kernel thread\n");
     wake_up_process(task1);
     wake_up_process(task2);
     return 0;
}

int init_module(void)
{
    kernel_init();
    return 0;
}

void cleanup_module(void)
{
    return;
} 
```

‍</p>

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T12:27:31.200

添加`schedule`调用以强制线程调度。

```
static void thread_func(void* data)
{   
    int *n;
    n = (int *)data;
    int i = 0;
    while(i < 10){
        printk("%d\n", *n);

        schedule();

        i++;
    }
    //do_exit();
} 
```

# android - 在android中拉ListView时刷新适配器

> ID：12974112
> 
> 赞同：4
> 
> 时间：2012-10-19T12:15:05.580
> 
> 标签：android, android-layout, listview, pull-to-refresh

如何应用下拉 ListView 并释放它的效果，它会刷新。和 Facebook 一样，拉下它时，它会刷新 NewsFeeds。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T12:21:12.423

您可以使用[它](https://github.com/erikwt/PullToRefresh-ListView)在 android 中创建此类列表。

您必须在代码中使用刷新侦听器：

```
 PullToRefreshListView listView = (PullToRefreshListView) findViewById(R.id.pull_to_refresh_listview);
   listView.setOnRefreshListener(new OnRefreshListener() {

public void onRefresh() {
    // Your code to refresh the list contents

    // ...

    // Make sure you call listView.onRefreshComplete()
    // when the loading is done. This can be done from here or any
    // other place, like on a broadcast receive from your loading
    // service or the onPostExecute of your AsyncTask.

    listView.onRefreshComplete();
}
}); 
```

# android - 检测插入的 USB 设备

> ID：12974114
> 
> 赞同：5
> 
> 时间：2012-10-19T12:15:09.167
> 
> 标签：android, linux, linux-kernel, usb, linux-device-driver

我想知道，系统的哪个部分负责检测USB端口的插入设备

它可能是 USB 主机端口，因此插入的设备将被视为 USB 客户端（因此端口所有者是主机），
或者它可能是 USB 客户端端口，因此插入的设备将被视为 USB主机（所以端口所有者是客户端）

我感兴趣的是当系统实际检测到（可能通过改变电阻）已经插入某些东西时，并且基于信号来自哪个端口（主机端口或客户端端口），主机端口驱动程序或客户端端口驱动程序已部署
我想知道，系统如何根据“插入”事件选择这个或那个驱动程序

我应该在哪里寻找？也许在 USB 内核中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T18:32:01.753

usb 子系统负责检测和探测新添加/热插拔的 USB 设备。在内核日志中查看以下消息：

`usb usb4: New USB device found, idVendor=1d6b, idProduct=0001`
`usb usb4: New USB device strings: Mfr=3, Product=2, SerialNumber=1`
`usb usb4: Product: OHCI Host Controller`
`usb usb4: Manufacturer: Linux 2.6.32 ohci_hcd`
`usb usb4: SerialNumber: 0000:00:12.1`
`usb usb4: configuration #1 chosen from 1 choice`

处理所有这些的代码位于 drivers/usb/core

usb 子系统位于 scsi 子系统下方，因此您新分配的设备将具有类似的设备名称`/dev/sdX`。udev 的工作是在`/dev`. 如果您有兴趣捕获此事件并运行执行一些通知的脚本，您可能想了解如何编辑 udevd 规则：[http ://www.reactivated.net/writing_udev_rules.html#external-run](http://www.reactivated.net/writing_udev_rules.html#external-run)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T08:20:18.813

我理解您的要求，正确地，当连接 USB 设备时，电流波动（跨电阻器）会导致通知。然后是主机（可以协商谁将成为 OTG 模式的主机，但这也发生在枚举过程之后）。

枚举是最重要的主要过程。USB 遵循星型拓扑结构，整个系统基于相同的拓扑结构。

**注意：**需要注意的是，数据包的所有事务都是由主机发起的。客户端受主机摆布。这对于理解 USB 系统非常重要。

请参考：[http ://www.beyondlogic.org/usbnutshell/usb1.shtml](http://www.beyondlogic.org/usbnutshell/usb1.shtml)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T07:32:21.247

嗨，当 android 设备连接时，它处于**客户端模式**（至少在三星设备中），当设备连接时，首先将设备的地址设置为 0x0，以便主机知道默认地址。然后是端点 0，通过它完成所有设置（配置、接口、端点）。

![在此处输入图像描述](../Images/df61c88328302b0cf1f209e272ddeb64.png)

上图将帮助您理解。这取自 USB 2.0 手册。请记住，初始化期间的所有设置都是通过每个设备中存在的端点 0 完成的。

而且我不知道如何将其从客户端模式更改为主机模式。（我的知识仅限于在 OTG 模式下设置后进行协商）。我希望我有所帮助。

# javascript - 如何打开一个PDF文件 ?

> ID：12974115
> 
> 赞同：35
> 
> 时间：2012-10-19T12:15:10.403
> 
> 标签：javascript, html, pdf, iframe, browser

I want to open the pdf file in an iframe. I am using following code:

```
<a class="iframeLink" href="https://something.com/HTC_One_XL_User_Guide.pdf"> User guide </a> 
```

It is opening fine in Firefox, but it is not opening in IE8.

Does anyone know how to make it work also for IE ?

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-10-19T12:28:34.463

使用`iframe`来“渲染” PDF 不适用于所有浏览器；这取决于浏览器如何处理 PDF 文件。某些浏览器（例如 Firefox 和 Chrome）具有内置的 PDF 渲染功能，允许它们在某些较旧的浏览器（可能是较旧版本的 IE 尝试下载文件）中内联显示 PDF。

相反，我建议查看[PDFObject](http://pdfobject.com/)，它是一个用于将 PDF 嵌入 HTML 文件的 Javascript 库。它很好地处理了浏览器兼容性，并且很可能在 IE8 上工作。

在您的 HTML 中，您可以设置一个`div`来显示 PDF：

```
<div id="pdfRenderer"></div> 
```

然后，您可以使用 Javascript 代码在其中嵌入 PDF `div`：

```
var pdf = new PDFObject({
  url: "https://something.com/HTC_One_XL_User_Guide.pdf",
  id: "pdfRendered",
  pdfOpenParams: {
    view: "FitH"
  }
}).embed("pdfRenderer"); 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-10-19T12:25:41.797

这是从以下链接链接 HTTP(S) 可访问 PDF 的代码`<iframe>`：

```
<iframe src="https://research.google.com/pubs/archive/44678.pdf"
   width="800" height="600"> 
```

小提琴：http: [//jsfiddle.net/cEuZ3/1545/](http://jsfiddle.net/cEuZ3/1545/)

编辑：您可以使用`<a>`标记（`onclick`事件）中的 Javascript 在运行时设置 iFrame 的 SRC 属性...

编辑2：显然，这是一个错误（但有解决方法）：

[PDF 文件无法在带有 Adob​​e Reader 10.0 的 Internet Explorer 中打开 - 用户得到一个空白的灰色屏幕。如何为我的用户解决此问题？](https://stackoverflow.com/questions/7588262/pdf-files-do-not-open-in-internet-explorer-with-adobe-reader-10-0-users-get-an)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-11-25T08:36:15.757

确保 Web 服务器使用 Content-Disposition = inline 发送文件也很重要。如果您自己阅读文件并将其内容发送到浏览器，则情况可能并非如此：

在php中它看起来像这样......

```
...headers...
header("Content-Disposition: inline; filename=doc.pdf");
...headers...

readfile('localfilepath.pdf') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-09T14:15:47.550

直接 PDF 不适用于手机，也不支持响应式 UI。这是最好的解决方案。 [https://stackoverflow.com/a/66548544/2078462](https://stackoverflow.com/a/66548544/2078462)

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2016-02-02T18:28:25.490

这样做：记得关闭 iframe 标记。

```
<iframe src="http://samplepdf.com/sample.pdf" width="800" height="600"></iframe> 
```

# c# - SSL Connection to database

> ID：12974119
> 
> 赞同：5
> 
> 时间：2012-10-19T12:15:29.933
> 
> 标签：c#, .net, sql-server, sql-server-2008, oledb

My application need to establish secure connection with SQL Server 2008\. Having enabled 'Force Encryption' in server side, following is my connection string from my C# application.

```
Initial Catalog=emp_test;Persist Security Info=True;User ID=sa;Password=***;Data Source=172.21.70.94;Provider=SQLOLEDB;Use Encryption for Data=True;Trust Server Certificate=True; 
```

I did not provision any certificate in server - Hence I gave Trust Server Certificate=True, so that self signed server certificate is not validated.

But the connection is not established with following error.

> *Database error: [DBNETLIB][ConnectionOpen (SECDoClientHandshake()).]SSL Security error.*

Without the two attributes related to security, it works fine.

What do I need to change to get this to work?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T12:47:16.637

使用`SqlConnection`对象有两个好处。首先，您可以确保正确构建连接字符串，因为您可以使用`SqlConnectionStringBuilder`类来构建它。其次，它比OLEDB快得多***。***

要构建此连接字符串...

```
Initial Catalog=emp_test;Persist Security Info=True;User ID=sa;Password=***;Data Source=172.21.70.94;Provider=SQLOLEDB;Use Encryption for Data=True;Trust Server Certificate=True; 
```

...使用`SqlConnectionStringBuilder`你会写一些这样的代码...

```
var builder = new SqlConnectionStringBuilder();
builder.DataSource = "172.21.70.94";
builder.Encrypt = true;
builder.TrustServerCertificate = true;
builder.InitialCatalog = emp_test;
builder.PersistSecurityInfo = true;
builder.UserID = "sa";
builder.Password = "***";

var connection = new SqlConnection(builder.ToString()); 
```

...该`Encrypt`属性在 .NET Framework 中保存此定义 ...

> 获取或设置一个布尔值，该值指示如果服务器安装了证书，SQL Server 是否对客户端和服务器之间发送的所有数据使用 SSL 加密。

...该`TrustServerCertificate`属性在 .NET Framework 中保存此定义 ...

> 获取或设置一个值，该值指示在绕过证书链验证信任时是否将加密通道。

所以我想说这是最安全的方法。您可以确保 .NET Framework 将正确构建连接字符串，**并且**您可以获得一组很好的定义，这些定义围绕这些属性对基于其定义的证书的含义。

* * *

现在，由于您也连接到 Oracle，因此最好的方法是继续建立 OLEDB 连接，因为您别无选择。但是两个连接都是一个`IDbConnection`，所以你只有一个工厂来建立正确的连接并返回一个`IDbConnection`.

这意味着您可以获得两全其美，对象的性能和易用性以及`SqlConnection`对象的抽象，`IDbConnection`因此您的代码不必更改。

# iphone - NSAttributedString change style to bold without changing pointSize?

> ID：12974120
> 
> 赞同：18
> 
> 时间：2012-10-19T12:15:30.993
> 
> 标签：iphone, ios, ipad, uifont, nsattributedstring

I am digging into `NSAttributedString`s on iOS. I have a model that is returning a persons first and last name as `NSAttributesString`. (I don't know if it is a good idea to deal with attributed strings in models!?) I want the first name to be printed regular where as the last name should be printed in bold. What I don't want is to set a text size. All I found so far is this:

```
- (NSAttributedString*)attributedName {
    NSMutableAttributedString* name = [[NSMutableAttributedString alloc] initWithString:self.name];
    [name setAttributes:@{NSFontAttributeName : [UIFont boldSystemFontOfSize:[UIFont systemFontSize]]} range:[self.name rangeOfString:self.lastname]];
    return name;
} 
```

However, this will, of course, override the font size of the last name, which gives a very funny look in a `UITableViewCell` where the first name will be printed in the regular text size of the cell's label and the last name will be printed very small.

Is there any way to achieve what I want?

Thanks for your help!

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-10-28T04:34:55.380

这是一个`Swift` `extension`使文本变粗的方法，同时保留当前的字体属性（和文本大小）。

```
public extension UILabel {

    /// Makes the text bold.
    public func makeBold() {
        //get the UILabel's fontDescriptor
        let desc = self.font.fontDescriptor.withSymbolicTraits(.traitBold)
        //Setting size to '0.0' will preserve the textSize
        self.font = UIFont(descriptor: desc, size: 0.0)
    }

} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-06-23T13:48:25.257

`StrokeWidth`通过将属性设置为*负值*，您可以在不更改其他属性的情况下将字符串加粗。

目标-C：

```
[name setAttributes:@{NSStrokeWidthAttributeName : @-3.0} range:NSRangeFromString(name.string)]; 
```

迅速：

```
name.setAttributes([.strokeWidth: NSNumber(value: -3.0)], range: NSRangeFromString(name.string)) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-03T04:31:51.643

使用[这个问题](https://stackoverflow.com/questions/26023027/how-to-apply-both-bold-and-italic-font-to-an-nsattributedstring)的技术：

```
UIFontDescriptor *fontDescriptor = [UIFontDescriptor preferredFontDescriptorWithTextStyle:UIFontTextStyleBody];
uint32_t existingTraitsWithNewTrait = UIFontDescriptorTraitBold;
    fontDescriptor = [fontDescriptor fontDescriptorWithSymbolicTraits:existingTraitsWithNewTrait];
UIFont *updatedFont = [UIFont fontWithDescriptor:fontDescriptor size:0.0];
NSDictionary *attribs =  @{NSFontAttributeName : updatedFont};
[mutableAttrString setAttributes:attribs range:result.range]; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-19T15:06:27.693

从表格单元格代码进行上述调用，但通过从单元格的 textLabel 获取字体大小来传递所需的字体大小。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-09-24T15:56:38.247

您是否尝试将大小设置为 0.0？

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-01-11T09:59:16.483

如果您只想在字符串标签中加粗第二个单词，即使用默认 iOS 系统字体时的名称标签，即标题或标题等

```
let s = "\(client.givenName) \(client.surname)" as NSString

let myAttribute = [ NSFontAttributeName: UIFont.preferredFontForTextStyle(UIFontTextStyleTitle1) ]
let myString = NSMutableAttributedString(string: "\(s)", attributes: myAttribute )

let myRange = s.rangeOfString(client.surname)
let desc = UIFont.preferredFontForTextStyle(UIFontTextStyleTitle1).fontDescriptor().fontDescriptorWithSymbolicTraits(.TraitBold)
let new = UIFont(descriptor: desc, size: 0.0)

myString.addAttribute(NSFontAttributeName, value: new, range: myRange)

nameLabel.attributedText = myString 
```

# dynamics-crm - 我们能找到谁删除了 CRM 2011 中的记录吗？

> ID：12974123
> 
> 赞同：6
> 
> 时间：2012-10-19T12:15:49.103
> 
> 标签：dynamics-crm, dynamics-crm-2011

我正在研究 CRM 2011。我们有一个自定义实体“订单”。其中一个订单被某人（用户）删除。我们能找到谁（用户）删除了该记录吗？

**编辑**：

**1-**好吧，正如我提到的，我们有一个自定义实体；这意味着涉及软件开发。

**2-**这个问题等于“**我们可以找到谁删除了SQL Server中的记录**”吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-19T12:40:24.223

如果您在 CRM 和实体“订单”上启用了审核，您可以在设置 -> 审核 -> 审核摘要视图中查看审核。所有日志都在数据库的 [dbo].[AuditBase] 表中。对于已删除的记录，操作和操作字段设置为 0。

如果未启用审核，我不确定您如何找到它。如果启用了跟踪，也许您可​​以搜索日志文件。

# mercurial - 擦除从未推送过的分支

> ID：12974125
> 
> 赞同：0
> 
> 时间：2012-10-19T12:15:56.387
> 
> 标签：mercurial, branch, backout

我刚刚发现有人前段时间在本地提交了一些更改，那是修订版 #410，现在正确的版本是 #638... 在那个人的反复无常的历史中创建了一个分支，我想摆脱它...我试图执行撤消>退出...但它不会让我...

我得到的错误信息是：

![错误信息](../Images/bddbbbcf082b7ead842390be81580fe7.png)

该人的 Mercurial 历史：

![从未推送过的分支](../Images/a223bbbf809aac44e8baeebe57a0e0da.png)

我能做些什么来摆脱那个分支？它应该做的更改已经在之前进行了一些修改......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T13:07:42.067

您可以使用mq-extension的[strip 命令，例如：](http://mercurial.selenic.com/wiki/Strip)`hg strip 410`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T20:34:53.750

该错误似乎是因为您在不同的分支上，那么以下可能会起作用：

```
hg up -r 410
hg backout -r 410
hg merge
hg commit 
```

但是，这将添加一个不相关的变更集和一个您不关心的合并。你可以简单地这样做，而不是：

```
hg clone -r tip repo repo1      # This should strip the unwanted changeset
cp repo/.hg/hgrc repo1/.hg/hgrc # This will copy any repo customizations
rm -rf repo                     # Delete original repo
mv repo1 repo                   # Replace original repo 
```

上面的命令是 Unix/Linux 命令，看起来你可能在 Windows 上。如果是，只需将命令替换为 Windows 等效命令。如果你不明白，我可以编辑我的答案。

# c++ - 使用 boost 分离随机数生成器类的接口和实现

> ID：12974130
> 
> 赞同：2
> 
> 时间：2012-10-19T12:16:12.367
> 
> 标签：c++, boost, random, compiler-errors

我需要经常使用随机数生成器，而不是每次需要它时都编写它，我想创建一个类，以便我可以将它链接到其他程序。我目前的代码是这样的：

```
#include <boost/random.hpp>
#include <iostream>
int main() {
   boost::mt19937 rng(0);
   boost::normal_distribution<float> dist_normal(0.0f,1.0f);
   boost::variate_generator<boost::mt19937, boost::normal_distribution<float> > rand_normal(rng, dist_normal);

   for(int i = 0 ; i < 10; ++i)
      std::cout << rand_normal() << std::endl;
   return 0;
} 
```

但现在我想像这样分离接口和实现：

```
#include <boost/random.hpp>
#include <iostream>
int main() {
   //This goes in the header file as private members of class
   boost::mt19937 rng;
   boost::normal_distribution<float> dist_normal;
   boost::variate_generator<boost::mt19937, boost::normal_distribution<float> > rand_normal;

   //This is then in the constructor in the cpp file
   rng = boost::mt19937(0);
   dist_normal  = boost::normal_distribution<float>(0.0f,1.0f);
   rand_normal  = boost::variate_generator<boost::mt19937, boost::normal_distribution<float> >(rng, dist_normal);

   for(int i = 0 ; i < 10; ++i)
      std::cout << rand_normal() << std::endl;
   return 0;
} 
```

但这不会编译，它给了我以下错误（哦，破译提升错误的乐趣）：

```
test2.cpp: In function ‘int main()’:
test2.cpp:7:79: error: no matching function for call to ‘boost::random::variate_generator<boost::random::mersenne_twister_engine<unsigned int, 32ul, 624ul, 397ul, 31ul, 2567483615u, 11ul, 4294967295u, 7ul, 2636928640u, 15ul, 4022730752u, 18ul, 1812433253u>, boost::random::normal_distribution<float> >::variate_generator()’
test2.cpp:7:79: note: candidates are:
/usr/include/boost/random/variate_generator.hpp:69:5: note: boost::random::variate_generator<Engine, Distribution>::variate_generator(Engine, Distribution) [with Engine = boost::random::mersenne_twister_engine<unsigned int, 32ul, 624ul, 397ul, 31ul, 2567483615u, 11ul, 4294967295u, 7ul, 2636928640u, 15ul, 4022730752u, 18ul, 1812433253u>, Distribution = boost::random::normal_distribution<float>]
/usr/include/boost/random/variate_generator.hpp:69:5: note:   candidate expects 2 arguments, 0 provided
/usr/include/boost/random/variate_generator.hpp:51:7: note: boost::random::variate_generator<boost::random::mersenne_twister_engine<unsigned int, 32ul, 624ul, 397ul, 31ul, 2567483615u, 11ul, 4294967295u, 7ul, 2636928640u, 15ul, 4022730752u, 18ul, 1812433253u>, boost::random::normal_distribution<float> >::variate_generator(const boost::random::variate_generator<boost::random::mersenne_twister_engine<unsigned int, 32ul, 624ul, 397ul, 31ul, 2567483615u, 11ul, 4294967295u, 7ul, 2636928640u, 15ul, 4022730752u, 18ul, 1812433253u>, boost::random::normal_distribution<float> >&)
/usr/include/boost/random/variate_generator.hpp:51:7: note:   candidate expects 1 argument, 0 provided 
```

在这里我被卡住了，据我所知，第二个候选者是复制构造函数，但是我应该如何阅读第一个候选者以及我应该如何更改我的代码以使其工作？提前致谢！

编辑：

工作解决方案，感谢 muehlbau。

boost_rng.c:

```
#include "boost_rng.hpp"

BoostRNG::BoostRNG(uint _seed) : seed(_seed), 
                                 rng(boost::mt19937(_seed)),
                                 dist_normal(boost::normal_distribution<float>(0.0f,1.0f)),
                                 rand_normal(boost::variate_generator<boost::mt19937&, boost::normal_distribution<float> >(rng, dist_normal))
{}

float BoostRNG::normal() {
    return rand_normal();
} 
```

和 boost_rng.hpp：

```
#include <boost/random.hpp>

class BoostRNG {
private:
    uint seed;
    boost::mt19937 rng;
    boost::normal_distribution<float> dist_normal;
    boost::variate_generator<boost::mt19937&, boost::normal_distribution<float> > rand_normal;
public:
    BoostRNG(uint seed);
    float normal();
}; 
```

请注意，它也适用于引用引擎，让我对多个生成器使用相同的引擎；）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T12:44:40.117

问题如下。当您声明`rng`、`dist_normal`和时，将分别构造`rand_normal`a `boost::mt19937`、 a`boost::normal_distribution<float>`和 a对象。`boost::variate_generator<boost::mt19937, boost::normal_distribution<float> >`据我从错误中可以看出，`boost::variate_generator<boost::mt19937, boost::normal_distribution<float> >`没有默认构造函数，因此您的编译失败。

你可以在这里寻找解决方案：[Declaring an object before initializing it in c++](https://stackoverflow.com/questions/800368/declaring-a-variable-before-initializing-it-in-c)

作为旁注...您始终可以创建一个类，将`rng`,`dist_normal`和`rand_normal`作为类成员，并在类构造函数的初始化程序列表中初始化它们。

# c# - FatalExecutionEngineError On FileDialog.ShowDialog()

> ID：12974131
> 
> 赞同：0
> 
> 时间：2012-10-19T12:16:16.580
> 
> 标签：c#, wpf, filedialog

This is my program's basic Information:

*   WPF Application
*   Target Framework: 4
*   Platform Target: Any CPU

Now when I try to open a file dialog I get a FatalExecutionEngineError.

This is my code:

```
Microsoft.Win32.OpenFileDialog OF = new Microsoft.Win32.OpenFileDialog();
OF.Filter = " All File (*.*)|*.*";

bool? res = OF.ShowDialog();

if (res == true)
{
// Do Some Code
} 
```

Error Discription:

> FatalExecutionEngineError was detected
> Message: The runtime has encountered a fatal error. The address of the error was at 0xe80fc200, on thread 0x1fbc. The error code is 0xc0000005\. This error may be a bug in the CLR or in the unsafe or non-verifiable portions of user code. Common sources of this bug include user marshaling errors for COM-interop or PInvoke, which may corrupt the stack.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T12:23:11.487

使用`System.Windows.Forms.OpenFileDialog`代替`Microsoft.Win32.OpenFileDialog`。

# caching - What's the purpose of the Symfony2 bootstrap.php.cache file?

> ID：12974132
> 
> 赞同：17
> 
> 时间：2012-10-19T12:16:20.073
> 
> 标签：caching, symfony

I'm using SF2 in one of our legacy project, not the entire framework but by pulling in bundles and components I need. And I have always wondered about these lines of code:

```
$loader = require_once __DIR__.'/../app/bootstrap.php.cache';

require_once __DIR__.'/../app/AppKernel.php';
//require_once __DIR__.'/../app/AppCache.php';

$kernel = new AppKernel('prod', false);
$kernel->loadClassCache(); 
```

I wonder what this bootstrap.php.cache file is for, what it is for, how it is generated (if I'm not using the SF2 whole framework). I didn't use it before, and there was no problem, but I wonder if this can give me some performance boost etc that I should look into. I tried to find all around but couldn't find a document dedicated to this subject.

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-19T13:18:01.487

> 为了确保最佳的灵活性和代码重用，Symfony2 应用程序利用了各种类和第 3 方组件。但是在每个请求上从单独的文件中加载所有这些类可能会导致一些开销。为了减少这种开销，Symfony2 标准版提供了一个脚本来生成一个所谓的引导文件，该文件由单个文件中的多个类定义组成。通过包含这个文件（其中包含许多核心类的副本），Symfony 不再需要包含任何包含这些类的源文件。这将大大减少磁盘 IO。

来源：[*使用引导文件*](http://symfony.com/doc/master/book/performance.html#use-bootstrap-files)。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-19T13:18:52.337

来自[Symfony 文档](http://symfony.com/doc/current/book/performance.html#use-bootstrap-files)：

> 为了确保最佳的灵活性和代码重用，Symfony2 应用程序利用了各种类和第 3 方组件。但是在每个请求上从单独的文件中加载所有这些类可能会导致一些开销。为了减少这种开销，Symfony2 标准版提供了一个脚本来生成一个所谓的引导文件，该文件由单个文件中的多个类定义组成。通过包含这个文件（其中包含许多核心类的副本），Symfony 不再需要包含任何包含这些类的源文件。这将大大减少磁盘 IO。

您可以像这样生成引导文件：

```
php vendor/sensio/distribution-bundle/Sensio/Bundle/DistributionBundle/Resources/bin/build_bootstrap.php 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-29T18:31:01.830

引导缓存文件在开发过程中可能会令人烦恼，因为它会更改堆栈跟踪中的行号。幸运的是[，它可以很容易地](http://symfony.com/doc/master/cookbook/debugging.html)在`web/app_dev.php`.

# html - Input field higher than expected

> ID：12974134
> 
> 赞同：7
> 
> 时间：2012-10-19T12:16:22.460
> 
> 标签：html, css, input-field

So I got this input field that I expect to be 34px high (border 2px + padding 2 * 10px + text 12px), but it ends up higher than that:

*   37px in Firefox 15
*   37px in Chrome 22
*   36px in IE9

Question: why is my input field not 34px high?

**The HTML / CSS**

```
<input type="text" class="input" placeholder="Why is this not 34px high?">​

<style>
    .input {
    border: 1px solid #000;
    font-family: Arial;
    font-size: 12px;
    padding: 10px;
    width: 200px;
}​
</style> 
```

[Fiddle](http://jsfiddle.net/henrikandersson/TXb4Z/)

**Update:** Defining line-height (12px) and setting box-sizing (border-box) does not help - [updated fiddle](http://jsfiddle.net/henrikandersson/TXb4Z/3/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T12:25:32.210

这是`box-sizing`

`"box model"`in`CSS`作品是这样的：

`width + padding + border`= 框的实际可见/渲染宽度 `height + padding + border`= 框的实际可见/渲染高度

这有点奇怪，但你习惯了。在 IE 6 和更早版本中，当处于“怪癖模式”时，盒子模型的处理方式不同。

`width`= 框的实际可见/渲染宽度 `height`= 框的实际可见/渲染高度

曾经`box-sizing:border-box`

***[更多信息](http://css-tricks.com/box-sizing/)***

***[链接二](https://developer.mozilla.org/en-US/docs/CSS/box-sizing)***

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T12:21:53.687

原因是您没有为创建的要包含的文本定义高度，如果将其设置为 12，您将看到它的总高度为 34px。

请记住盒子模型。 [http://www.w3.org/TR/CSS2/images/boxdim.png](http://www.w3.org/TR/CSS2/images/boxdim.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T12:34:12.790

似乎根据字体设置了行高

这里它需要 font-size * 1.2 并舍入我认为的 line-height 。

**法线高度计算**

告诉用户代理根据元素的字体将使用的值设置为“合理”的值。该值的含义与 相同。我们建议使用 1.0 到 1.2 之间的“正常”值。计算值是“正常”。

参考[http://www.w3.org/TR/CSS21/visudet.html#propdef-line-height](http://www.w3.org/TR/CSS21/visudet.html#propdef-line-height)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T12:30:52.510

将 设置`font-size`为`12px`并不意味着文本变为 12 像素高。

字体的大小不再是文本行的高度。曾经是排版中使用的金属类型的大小，但现在它是字体设计师定义的虚构值。它通常接近文本高度，但由于文本行之间需要多少空间（对于悬挂字符，如`g`），它会因字体而异。

此外，字体大小实际上以磅为单位，因此如果您以像素为单位指定它，浏览器会将其转换为磅，并且涉及一些舍入，这可能会在实现中有所不同。

因此，基本上，当您指定字体大小时，您不能期望在所有浏览器中获得相同的像素大小。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T13:55:30.340

原因是浏览器以自己的方式计算内联元素的高度：“内容区域的高度应该基于字体，但本规范没有具体说明如何。例如，UA 可以使用 em-box 或字体的最大升序和降序。” （CSS 2.1，[第 10.6.1 条](http://www.w3.org/TR/CSS21/visudet.html#inline-non-replaced)）。

使用不同的字体（比如 Calibri，如果你有的话），即使使用相同的浏览器，你也可能得到不同的高度。

# php - Cron Job 一行 PHP 脚本

> ID：12974136
> 
> 赞同：-1
> 
> 时间：2012-10-19T12:16:32.337
> 
> 标签：php, wordpress, button, cron, cpanel

> **可能重复：**
> [传递 crontab 一个变量并从 PHP 中读取它？](https://stackoverflow.com/questions/10264296/pass-crontab-a-variable-and-read-it-from-php)

快速提问：有没有办法在 php 脚本中执行单个命令行而不是执行整个脚本？我只想从处理 UI 的脚本部分执行特定的“提交”命令。

这实质上将模仿点击网页上的相关按钮。

我将使用 cpanel 来执行它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:19:48.853

一种选择是将一些`$_GET`参数传递给执行 cron 作业的命令。如果您的命令是 -

```
wget http://localhost/site/cron_job.php 
```

你可以添加这样的东西 -

```
wget http://localhost/site/cron_job.php?action=submit 
```

然后在您的`cron_job.php`文件中，您可以对`action`参数执行切换命令。

```
switch($_GET['action']){
  case 'submit':
    // handle submit actions
  break;
  default :
    // handle unknown actions. 
  break;
} 
```

在这里提一下消毒的重要性是合适的。您正在接收可能被用户篡改的参数。确保您只接受*您定义的操作*，并且您确实收到了预期的输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T12:19:06.593

您可以将所需的代码包含在单独的文件中并执行该代码。即使您必须包含其他文件来完成整个过程，仍然会比您实际提交的整个文件更具体。

# c# - 基于 C# 中的选择条件的访问表

> ID：12974138
> 
> 赞同：0
> 
> 时间：2012-10-19T12:16:38.920
> 
> 标签：c#, asp.net

我正在开发应用程序，我必须从 2 张表中访问数据，从第一张表中获取帐号，然后在表 2 中查找这些帐户。
我`OleDbDataAdapter`用来选择和计算出现次数，但现在问题是访问那些记录了。我想的一种方法是获取第一个出现的行号、具有特定帐户的行数并使用 for 循环访问每一行。

你有没有其他方法可以做到这一点......谢谢，

```
oconn2.Open();
OleDbDataAdapter db = new OleDbDataAdapter("select * from [Sheet2$] where [Sheet2$].account_number= '" + account_number + "'", oconn2);
DataTable dt = new DataTable();
db.Fill(dt);
int iRow = dt.Rows.Count; 
```

# matlab - 带有 EC2 的 Matlab/Octave

> ID：12974139
> 
> 赞同：8
> 
> 时间：2012-10-19T12:16:42.693
> 
> 标签：matlab, amazon-ec2, cloud, octave, distributed-computing

我想在 EC2 上使用 Matlab，它基本上是一个令人尴尬的并行问题，所以我不一定需要并行工具箱。

在这里阅读博客：

[http://aws.typepad.com/aws/2008/11/parallel-comput.html](http://aws.typepad.com/aws/2008/11/parallel-comput.html)

白皮书的链接实际上会将您带到一个网页，上面说该服务仅在美国和加拿大可用（我在英国），但您可以注册您的兴趣。

此外，似乎许可证可能存在问题？如果我必须为每个 CPU 购买新的许可证，这对我来说不是入门。

我的程序并没有真正使用任何像 lsqmin 这样的大 MATLAB 函数，所以理论上它应该很容易转换为 Octave（我认为）。

如果由于上述任何原因无法将 Matlab 与 EC2 一起使用，谁能告诉我如何将 Octave 与 EC2 一起使用？

```
function [output]=DElambda(de,data,OF)

 P1=zeros(de.d,de.nP);
 Pu=zeros(de.d,de.nP);

 for i=1:de.d
 P1(i,:)=de.min(i,1)+(de.max(i,1)-de.min(i,1))*rand(de.nP,1);
 end

 P1(:,1:de.d)=diag(de.max);
 P1(:,de.d+1:2*de.d)=diag(de.min);

 for i=1:de.nP
 betas(:,i)=NSS_betas(P1(:,i),data);
 end

 Params=vertcat(betas,P1);

 Fbv=NaN(de.nG,1);
 Fbest=realmax;

 F=zeros(de.nP,1);
 P=zeros(de.nP,1);

for i=1:de.nP 

F(i)=OF(Params(:,i)',data);

P(i)=pen(P1(:,i),de,F(i));
F(i)=F(i)+P(i);

 end

 [Fbest indice] =min(F);
 xbest=Params(:,indice);

Col=1:de.nP; 

for g=1:de.nG
P0=P1;
rowS=randperm(de.nP)';
colS=randperm(4)';
RS=circshift(rowS,colS(1));
R1=circshift(rowS,colS(2));
R2=circshift(rowS,colS(3));
R3=circshift(rowS,colS(4));

%mutate
Pm=P0(:,R1)+de.F*(P0(:,R2)-P0(:,R3));
%extra mutation
if de.R>0 
    Pm=Pm+de.r*randn(de.d,de.nP);
end

%crossover
PmElements=rand(de.d,de.nP)<de.CR;
%mPv(MI)=mP(Mi);
if de.oneElementfromPm
   Row=unidrnd(de.d,1,de.nP);
   ExtraPmElements=sparse(Row,Col,1,de.d,de.nP);
   PmElements=PmElements|ExtraPmElements;
end

P0_Elements=~PmElements;
Pu(:,RS)=P0(:,RS).*P0_Elements+PmElements.*Pm;
%%%need to add penalty!!!!!!!!!!!!
%select vector to enter next generation

for i=1:de.nP
betasPu(:,i)=NSS_betas(Pu(:,i),data);
end

ParamsPu=vertcat(betasPu,Pu);
flag=0;
for i=1:de.nP
    %for j=1:dates
    %Ftemp=feval(OF,Pu(:,i)',data,j);
    Ftemp=OF(ParamsPu(:,i)',data);
    %end
    %Ftemp=OF(Pu(:,i),data);
    Ptemp=pen(Pu(:,i),de,F(i));
    Ftemp=Ftemp+Ptemp;

    if Ftemp<=F(i);
        P1(:,i)=Pu(:,i);
        F(i)=Ftemp;
        if Ftemp < Fbest
        Fbest=Ftemp; xbest=ParamsPu(:,i); flag=1;
        end
    else
        P1(:,i)=P0(:,i);
    end    
end

if flag
    Fbv(g)=Fbest;
end

end

output.Fbest=Fbest; output.xbest=xbest; output.Fbv=Fbv;
end

 function penVal=pen(mP,pso,vF)

minV=pso.min;
maxV=pso.max;
ww=pso.ww;

A=mP-maxV;
A=A+abs(A);

B=minV-mP;
B=B+abs(B);

C=ww*((mP(1,:)+mP(2,:))-abs(mP(1,:)+mP(2,:)));
penVal=ww*sum(A+B,1)*vF-C;

end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T10:32:33.753

一种不需要额外许可的想法是在您的 EC2 实例上部署[MATLAB Compiler Runtime](http://www.mathworks.com/products/compiler/mcr/index.html) (MCR)。然后使用[MATLAB 编译器](http://www.mathworks.com/products/compiler/index.html)创建代码的可执行文件并在这些 EC2 实例上运行它们。

> MCR 与 MATLAB 编译器一起提供，用于随您的应用程序一起分发，并且可以免版税部署。

如果您想进一步采用这种方法，请考虑运行一个本地作业队列，以便在可用的 EC2 实例之间分配工作。[这](http://noisyaccumulation.blogspot.de/2010/09/using-amazon-ec2-to-speed-up-matlab.html)似乎是一个关于如何做到这一点的好文章。

# asp.net - SQL Server 按包含字符串的列查询顺序

> ID：12974141
> 
> 赞同：2
> 
> 时间：2012-10-19T12:16:51.130
> 
> 标签：asp.net, sql-server, drop-down-menu

我正在从`nvarchar`我的 SQL Server 数据库中的列 ( ) 填充我的 ASP.NET 下拉列表。

有什么方法可以将包含关键字的行带到返回结果集的开头？

例如，我的表中有这些记录：

```
abc
abc1
abcd2
abcXYZ3
adfdf3XYZ
abcd5 
```

我想`XYZ`在我的下拉列表顶部包含行，即：

```
abcXYZ3
adfdf3XYZ
abc
abc1
abcd2
abcd5 
```

是否可以为此目的创建 SQL 查询，例如：

```
select * 
from myTable 
order by (mycolumn LIKE '%XYZ%') 
```

我怎样才能得到我想要的结果？如果在 SQL Server 中不可能，我该如何在我的 C# 代码中做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-19T12:18:44.123

要在 SQL 中执行此操作，您可以使用

```
SELECT *
FROM   myTable
ORDER  BY CASE
            WHEN mycolumn LIKE '%XYZ%' THEN 0
            ELSE 1
          END,
          mycolumn 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T12:22:09.063

您可以按出现次数排序：

```
SELECT column,
       len(column) - len(replace(column,@text,'')) AS MatchNumber

FROM   table

ORDER BY len(column) - len(replace(column,@text,'')) 
```

这具有按匹配发生的次数排序的优点，但偏向于具有更多匹配的更长字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T12:20:15.783

拆分出来，先添加包含关键字的项目，然后再添加其他项目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T12:40:14.737

-- 在 Oracle 11g 上

```
select myField
  from myTable
order by instr(myField, 'XYZ') desc 
```

# css - 响应式 2 span6 不能并排

> ID：12974143
> 
> 赞同：2
> 
> 时间：2012-10-19T12:17:05.080
> 
> 标签：css, twitter-bootstrap, responsive-design

Bootstrap Responsive 2 span6 在 span12 内不是并排的。任何的想法？

[http://jsfiddle.net/6TaQt/24/](http://jsfiddle.net/6TaQt/24/)

```
<div class="MainDiv container-fluid" style="border:1px solid pink">
<div class="row-fluid">
  <div class="span12" style="border:1px solid green">    
    <div class="span6" style="border:1px solid red">Span A</div>
    <div class="span6" style="border:1px solid red">Span B</div>
  </div>
</div></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:50:05.843

............***[现场演示](http://jsfiddle.net/rohitazad/6TaQt/28/)***......

你好现在习惯了`display:inline-block;`

像这样

```
[class*="span"], .row-fluid [class*="span"]{
display:inline-block;
    vertical-align:top;  
} 
```

***[现场演示](http://jsfiddle.net/rohitazad/6TaQt/28/)***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T12:37:54.053

使用 float: left 用于两个 span6 类

喜欢 : style="border:1px 纯红色; float:left"

# powershell - 动态从数组中删除项目

> ID：12974144
> 
> 赞同：0
> 
> 时间：2012-10-19T12:17:04.280
> 
> 标签：powershell, powershell-2.0

我有大量的 XML 节点，有时多达 40 万个项目。我使用 where-object 来根据 Type 属性选择项目。我的问题是遍历这些项目需要相当长的时间，如果我可以删除刚刚从数组中选择的项目会更容易，这样下一个对象的数组会更小。这就是我正在做的事情：

```
$subset = $items | Where-Object {$_.Type -eq "2"}
'prosess ItemType 2'

$subset = $items | Where-Object {$_.Type -eq "4"}
'prosess ItemType 4'

$subset = $items | Where-Object {$_.Type -eq "8"}
'prosess ItemType 8' 
```

问题是每次我必须`$items`再次迭代，而不是迭代之前的剩余内容`where-object`

where-object 是单线程操作并且仅在一个内核上执行也无济于事

我在想的是这样的，但我不确定它是否会表现得更好：

```
$subset = $items | Where-Object {$_.Type -eq "2"}
$items = $items | Where-Object {$_.Type -ne "2"}
'prosess ItemType 2'

$subset = $items | Where-Object {$_.Type -eq "4"}
$items = $items | Where-Object {$_.Type -ne "4"}
'prosess ItemType 4'

$subset = $items | Where-Object {$_.Type -eq "8"}
'prosess ItemType 8' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T12:33:46.703

您是否尝试过`Select-Xml`cmdlet 或 XmlDocument.SelectNodes 方法？通过其本机方法（使用 XPath）查询 XML，应该比`Where-Object`.

# titanium-mobile - 如何通过使用 Titanium Studio 打包将应用程序部署到 Google Play？

> ID：12974148
> 
> 赞同：0
> 
> 时间：2012-10-19T12:17:25.283
> 
> 标签：titanium-mobile, google-play

我在 Titanium Studio 中创建了一个 android 应用程序，通过一些研究发现我应该在 Google Play 商店的目录`app.apk`下上传文件以发布应用程序。`/build/android/bin`

但是当我将`app.apk`文件上传到 Google Play 商店时，它显示如下

![在此处输入图像描述](../Images/19de7fd36e92c5b5ee37d5ce57957896.png)

并显示此应用支持 0 设备，如下所示

![在此处输入图像描述](../Images/8da140bc0161440cbe4bec6d8834d645.png)

我究竟做错了什么？在上传 app.apk 文件之前，我是否必须执行任何进一步的步骤？现在我只是在构建应用程序并`app.apk`从 buid 目录中获取文件。

请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T14:50:40.930

其实我对这个问题进行了排序。我需要激活`app.apk`文件，然后它才会显示支持的设备数量。

发布答案，因为有人可能会觉得它有用。

# objective-c - 如何在块中使用自定义类型的参数

> ID：12974149
> 
> 赞同：1
> 
> 时间：2012-10-19T12:17:27.547
> 
> 标签：objective-c, ios, xcode, objective-c-blocks

我为 JSON 服务定义了一个回调块，如下所示：

```
#import "JSONResult.h"
typedef void (^JSONResultHandler)(JSONResult*); 
```

显然，JSONResult 类型参数是一个自定义类型，它的头文件包含在定义该块的位置。为什么我会收到以下错误？

```
/Users/oyvind/code/_objc/JSONService.h:22:35: Unknown type name 'JSONResult' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T12:46:47.667

您是否也在导入您的 JSON 服务类`JSONResult`？也许你有一个循环引用问题。

如果您正在导入 JSON 服务类`JSONResult`并且该导入是绝对必要的，请尝试使用前向声明在您的 .h 中导入 JSONResult：

```
@class JSONResult;

@interface SomeJSONService : NSObject

typedef void (^JSONResultHandler)(JSONResult*);

@end 
```

仔细检查您的导入和类名也可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T12:22:30.893

检查您是否已`JSONResult.h`正确导入标头`JSONService.h`：

```
#import "JSONResult.h" 
```

# android - android sqlite如何按时间排序

> ID：12974150
> 
> 赞同：3
> 
> 时间：2012-10-19T12:17:29.823
> 
> 标签：android, sql, sqlite

> **可能重复：**
> [对于 android 应用程序，我如何按降序排列我的 SQLITE 数据库？](https://stackoverflow.com/questions/8948435/how-do-i-order-my-sqlite-database-in-descending-order-for-an-android-app)

我有下表，我想在其中选择表的内容，但按 C_TAG_SCAN_TIME 字段 DESC 排序。

```
public static final String C_ID = BaseColumns._ID; // special for id internally in system
    public static final String C_TYPE = "type";
    public static final String C_COMPANY_ID = "companyid";
    public static final String C_PERSON_ID = "person";
    public static final String C_NAME = "name";
    public static final String C_TAG_ID = "tagid";
    public static final String C_STATUS = "status";
    public static final String C_TAG_SCAN_TIME = "tagscantime";
    public static final String C_TAG_SENTSERVER_TIME = "tagsentservertime";
    public static final String C_TRANSACTIONS_LATITUDE = "transactionslatitude";
    public static final String C_TRANSACTIONS_LONGITUDE = "transactionslongitude"; 
```

.

这是我从表 TRANSACTIONS 中选择所有内容的查询。

```
return db.query(DBHelper.TABLETRANSACTIONS, null, null, null, null, null, null); 
```

我的问题是如何将查询更改为在 C_TAG_SCAN_TIME 列上按降序排列？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-19T12:21:29.520

请试试这个...

```
return db.query(DBHelper.TABLETRANSACTIONS, null, null, null, null, null, C_TAG_SCAN_TIME + " DESC"); 
```

# android - 为什么即使列表视图有项目，布局文件中的空视图也会显示在屏幕上？

> ID：12974152
> 
> 赞同：4
> 
> 时间：2012-10-19T12:17:35.470
> 
> 标签：android, android-layout, android-activity

我有一个 Listview 来显示一些项目，并且我还使用了一个空视图，以防我的适配器没有要显示的 listview 项目。问题是当我首先进行此活动时，它会在屏幕上显示空视图一秒钟然后加载项目并在列表视图中显示它们。

我的活动`onCreate`如下所示：

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        setContentView(R.layout.favorite_exams);
        list = (ListView) findViewById(R.id.favoriteExamsList);
        View empty = findViewById(R.id.favoriteExamsListEmptyView);
        list.setEmptyView(empty);
        new readingFavFileTask().execute(UtilityFuctions.FAV_EXAMS_FILE_NAME);
    } 
```

我的布局文件是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@+id/favoriteExamsList"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >
    </ListView>

    <LinearLayout
        android:id="@+id/favoriteExamsListEmptyView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical"
        android:visibility="gone" >

        <TextView
            android:id="@+id/favoriteExamsEmptyViewMessage"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dp"
            android:text="You do not have any favorite Exams.Please add Exams using below button."
            android:textSize="20dp" />

        <Button
            android:id="@+id/favoriteExamsAdd"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal"
            android:onClick="onClickAddExams"
            android:text="Add Exams"
             >
        </Button>
    </LinearLayout>

</LinearLayout> 
```

如果我们的适配器中有数据，我如何确保空视图永远不会显示一秒钟。我应该在检查适配器后将空视图附加到列表中，还是有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T12:34:54.340

我找到了答案。在将我的适配器设置为列表后，我只需要`list.setEmptyView(empty)`在我的 AsyncTask onPostExecute() 方法中应用 Empty View，它就可以完美地工作。

# api - 使用 vimeo api 更改视频的隐私设置

> ID：12974155
> 
> 赞同：1
> 
> 时间：2012-10-19T12:17:44.513
> 
> 标签：api, vimeo

我正在尝试使用 api 类更改 vimeo 视频的隐私设置

下面是我的代码

```
$vimeo = new phpVimeo('myconsumer_key', 'myconsumer_secret');

$info = $vimeo->call('vimeo.videos.setPrivacy', array('video_id' =>$videoid,'privacy'=>'nobody','users'=>$username,'password'=>"")); 
```

我提供了我生成的消费者密钥和消费者密钥，`https://developer.vimeo.com/apps/new` 但是当我调用函数时发生错误

```
Fatal error: Uncaught exception 'VimeoAPIException' with message 'Permission Denied' in D:\phpweb\Rohith\vimeo_video\vimeo.php:239 Stack trace: #0 D:\phpweb\Rohith\vimeo_video\vimeo.php(275): phpVimeo->_request('vimeo.videos.se...', Array, 'GET', 'http://vimeo.co...', true) #1 D:\phpweb\Rohith\vimeo_video\disablevideo.php(18): phpVimeo->call('vimeo.videos.se...', Array) #2 {main} thrown in D:\phpweb\Rohith\vimeo_video\vimeo.php on line 239 
```

# grails - Grails 拉取对象有很多

> ID：12974156
> 
> 赞同：0
> 
> 时间：2012-10-19T12:17:45.327
> 
> 标签：grails

我正在尝试将所有 PostOrder 拉出存在子实例的位置

我的域名如下：

```
class PostOrder {

String pOrder
Date dateCreated
Picture picture
Post posts
Video video

static hasMany = [children : Child]
} 
```

我试图用来获取对象的方法是：

```
 def getAllInOrder(Child child){
 def json =   PostOrder.findAllByChildren(child, sort: 'dateCreated', order: 'desc')    as JSON
    return json
} 
```

我只是从中得到 sql 异常。有任何想法吗？

这些也是我的例外：

```
util.JDBCExceptionReporter No value specified for parameter 1
errors.GrailsExceptionResolver SQLException occurred when processing request: [GET]    /FYP/profile/appPosts - parameters:
child: 1
No value specified for parameter 1\. Stacktrace follows: 
java.sql.SQLException: No value specified for parameter 1
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1073)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:987)
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:982)
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:927)
at com.mysql.jdbc.PreparedStatement.checkAllParametersSet(PreparedStatement.java:2595)
at com.mysql.jdbc.PreparedStatement.fillSendPacket(PreparedStatement.java:2571)
at com.mysql.jdbc.PreparedStatement.fillSendPacket(PreparedStatement.java:2497)
at com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:2251)
at org.apache.commons.dbcp.DelegatingPreparedStatement.executeQuery(DelegatingPreparedStatement.java:96)
at org.apache.commons.dbcp.DelegatingPreparedStatement.executeQuery(DelegatingPreparedStatement.java:96)
at org.grails.datastore.gorm.GormStaticApi$_methodMissing_closure2.doCall(GormStaticApi.groovy:105)
at com.fyp.timeline.ProfileController$$ENmIB8q0.getAllInOrder(ProfileController.groovy:636)
at com.fyp.timeline.ProfileController$$ENmIB8q0.appPosts(ProfileController.groovy:624)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:680) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:21:48.653

尝试

```
PostOrder.findAllByChildren(child, [sort: 'dateCreated', order: 'desc']) 
```

尽管我认为这不会完全解决您的问题，因为在这种情况下， child 应该是一个列表。尝试这个：

```
PostOrder.all.findAll{it.children.contains(child)} 
```

似乎应该有更好的方法来做到这一点，也许其他人可以打进来。

# c# - 如何使用 Delegate.CreateDelegate 而不是 Func<> 定义委托？

> ID：12974158
> 
> 赞同：2
> 
> 时间：2012-10-19T12:17:53.257
> 
> 标签：c#, delegates, func

我有一个方法和两个委托，如下所示。它以这种方式运行。但我想使用 Delegate.CreateInstance。dx 和 dy 的类型必须是`Func<IEnumerable<Foo>>`。就像下面的 fx 和 fy。他们一定不是`Func<int, IEnumerable<Foo>>`。

```
public class Test {
    private IEnumerable<T> CreateItems<T>(int count) where T : class
    {
        for (int i = 0; i < count; i++)
        {
            yield return (T)Activator.CreateInstance(typeof(T), i.ToString());
        }
    }

    public List<T> TestMethod<T>(int i = 1) where T : class
    {
        return CreateItems<T>(i).ToList();
    }

    public void TestRun()
    {
        const int Count = 5;
        Func<IEnumerable<Foo>> fx = () => this.TestMethod<Foo>(Count);
        Func<IEnumerable<Foo>> fy = () => this.TestMethod<Foo>();
        var lfx = fx.Invoke();
        var lfy = fy.Invoke();
        var dx = Delegate.CreateDelegate( ?? );
        var dy = Delegate.CreateDelegate( ?? );
        var ldx = dx.DynamicInvoke();
        var ldy = dy.DynamicInvoke();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T12:23:35.900

这不可能。您无法将带有签名的*实例方法*`A F(X x)`直接放入 a`Func<A>`中。

可以将方法的第一个参数直接绑定到委托中，但不需要附加参数。在您的情况下，实例`this`是第一个参数，您不能为`i`.

我想您的误解是具有默认值的参数如何工作。它们仍然是调用者需要填写的参数。只是 C# 编译器会为您执行此操作。

您将需要具有正确签名的某种包装器。这可以是 lambda 或其他一些辅助方法。在您的情况下，我会重载该方法`TestMethod`而不是使用默认参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T12:25:26.860

如果您希望类型为`Func<IEnumerable<Foo>>`，那么您不能**直接**通过创建它，`Delegate.CreateDelegate`因为它们需要两个参数：实例（又名`this`）和整数`i`。即使显示的形式`fx` *也*有`i`- 它恰好是由编译器提供的。如果`TestMethod`不带参数，可以通过以下方式完成：

```
var dy = (Func<IEnumerable<Foo>>) Delegate.CreateDelegate(
    typeof(Func<IEnumerable<Foo>>),
    this,
    GetType().GetMethod("TestMethod").MakeGenericMethod(typeof(Foo))
); 
```

要动态地执行此操作（部分应用程序），您需要创建一个类型，该类型具有实例 ( `this`)、要注入的值 ( `i`) 以及使用这些值*调用的方法。* `TestMethod<Foo>`这**正是**编译器在这里为您所做的：

```
Func<IEnumerable<Foo>> fx = () => this.TestMethod<Foo>(Count); 
```

这基本上创造了：

```
internal class <>_squiggle {
    public Test @this;
    public IEnumerable<Foo> Method() {
        return @this.TestMethod<Foo>(5);
    }
} 
```

和：

```
var capture = new <>_squiggle { @this = this };
var fx = new Func<IEnumerable<Foo>>(capture.Method); 
```

# regex - 使用 sed 和正则表达式从字符串中提取数字

> ID：12974162
> 
> 赞同：28
> 
> 时间：2012-10-19T12:17:59.027
> 
> 标签：regex, sed, integer

sed 专家的另一个问题。

我有一个表示路径名的字符串，其中包含两个数字。一个例子是：

```
./pentaray_run2/Trace_220560.dat 
```

我需要提取这些数字中的第二个 - 即 220560

我（在论坛的帮助下）能够将所有数字（即 2220560）一起提取：

```
sed "s/[^0-9]//g" 
```

或仅提取第一个数字：

```
sed -r 's|^([^.]+).*$|\1|; s|^[^0-9]*([0-9]+).*$|\1|' 
```

但我要的是第二个数字！！非常感谢任何帮助。

PS我所追求的数字始终是字符串中的第二个数字。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-19T12:21:13.763

这个可以吗？

```
sed -r 's/.*_([0-9]*)\..*/\1/g' 
```

用你的例子：

```
kent$   echo "./pentaray_run2/Trace_220560.dat"|sed -r 's/.*_([0-9]*)\..*/\1/g'
220560 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-19T12:37:23.443

您可以使用以下方法提取最后一个数字：

```
sed -e 's/.*[^0-9]\([0-9]\+\)[^0-9]*$/\1/' 
```

倒过来想这个更容易：

1.  从字符串的末尾开始，匹配零个或多个非数字字符
2.  匹配（并捕获）一个或多个数字字符
3.  匹配至少一个非数字字符
4.  将所有字符匹配到字符串的开头

比赛的第 3 部分是“魔术”发生的地方，但它也限制你的比赛在数字前至少有一个非数字（即你不能匹配一个只有一个数字开头的字符串字符串，虽然有一个简单的解决方法是在字符串的开头插入一个非数字）。

`.*`魔法是抵消（第 4 部分）从左到右的贪婪。如果没有第 3 部分，第 4 部分将消耗它所能消耗的所有内容，其中包括数字，但是有了它，匹配确保它停止，以允许至少一个非数字后跟一个数字被第 1 部分和第 2 部分消耗，允许捕获该数字。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-19T12:25:34.400

如果`grep`欢迎：

```
$ echo './pentaray_run2/Trace_220560.dat' | grep -oP '\d+\D+\K\d+'
220560 
```

`Perl`使用相同的正则表达式更便携：

```
echo './pentaray_run2/Trace_220560.dat' | perl -lne 'print $& if /\d+\D+\K\d+/'
220560 
```

我认为这种方法比使用更干净、更健壮`sed`

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-10-19T12:58:45.260

这可能对您有用（GNU sed）：

```
sed -r 's/([^0-9]*([0-9]*)){2}.*/\2/' file 
```

这提取第二个数字：

```
sed -r 's/([^0-9]*([0-9]*)){1}.*/\2/' file 
```

这提取了第一个。

# ruby - 在 Balanced gem 中创建卡时出现 Faraday::Error::TimeoutError

> ID：12974163
> 
> 赞同：6
> 
> 时间：2012-10-19T12:18:00.473
> 
> 标签：ruby, balanced-payments, faraday

我在我的 rails 应用程序中使用[Balanced ruby​​ gem](https://github.com/balanced/balanced-ruby)进行支付集成。

我正在提交卡信息并获得有效回复。然后我将卡信息发送到我的控制器，并且我正在使用`card_uri`.

```
buyer = Balanced::Marketplace.my_marketplace.create_buyer(@member.email, card_uri) 
```

但是，我收到了这个错误：

```
Faraday::Error::TimeoutError (execution expired): 
```

谁能告诉我怎么了？提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-20T21:08:03.970

我在这个问题上做了更多的挖掘，它可能是一个短暂的网络缓慢。法拉第的设置非常严格，所以也许我们可以稍微放松一下。

配置平衡时，请尝试以下操作：

```
Balanced.configure('API_KEY_STRING', :connection_timeout => 30, 
                                     :read_timeout => 30) 
```

希望这可以帮助。

# c++ - Ubuntu 操作系统中的文件表

> ID：12974166
> 
> 赞同：2
> 
> 时间：2012-10-19T12:18:14.910
> 
> 标签：c++, linux, ubuntu, filetable

linux/Ubuntu OS 是否创建了一个表，该表使用存储在硬盘驱动器上的绝对地址来保存每个文件的条目？

只是想知道，因为我打算制作一个文件搜索程序。

我知道有诸如 find 之类的终端命令，但是我将在 CI 中编程时正在考虑 Ubuntu OS 是否有这样的事情，如果有，我该如何访问该表？

更新：

正如有人提到没有这样的事情，那么如果我想制作一个文件搜索程序，我将不得不搜索每个目录的每个文件夹，从程序根目录开始。生成的程序将非常缓慢并且性能很差！那么有没有更好的方法呢？或者我的方法很好！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-19T12:25:48.653

您所描述的“事物”通常称为文件系统，您可能知道有多种可用于 Linux 的文件系统：ext3、ext4、btrfs、Reiser、xfs、jffs 等。

您描述的表可能会很好地映射到 inode-directory 组合。

从我的角度来看，文件在硬盘上的物理位置的整个管理与用户无关，它严格来说是操作系统的域，除非你有一个很好的借口（比如你正在写一个数据恢复程序）和所涉及的文件系统的非常深入的知识。此外，在大多数情况下，文件的存储空间**不会**是连续的，而是分布在磁盘上的多个位置（片段）上。

但这里更重要的问题可能是：通过这种方式查找文件，您究竟希望达到什么目的？

编辑：根据OP的评论，我认为这里可能存在严重的误解-我看不到绝对文件地址和文件搜索器之间的联系，但这可能是由于我们各自对“绝对地址”的理解存在根本差异在文件系统的上下文中。

如果您只想查看文件系统中的所有文件，您可以

1.  执行递归目录读取或
2.  按照 SmartGuyz 的建议使用由 updatedb 准备的数据库

无论如何，您都想查看文件-这就是几乎所有运行时都将花费的地方-我想不出任何优势 2) 会超过 1) 和 2) 具有外部依赖项的缺点，以防万一updatedb 准备的文件必须存在并且非常新鲜。

一个关于遍历目录比旧的 opendir/readdir/closedir 更高级的方法的问题：[Efficiently Traverse Directory Tree with opendir(), readdir() and closedir()](https://stackoverflow.com/questions/2312110/efficiently-traverse-directory-tree-with-opendir-readdir-and-closedir)

EDIT2 基于 OP 的问题附录：是的，遍历目录需要时间，但这就是生命。考虑下一个最好的事情，即定位和朋友。它依赖于一个定期更新（通常每天一次）的“数据库”，因此在最后一次计划更新之后添加或重命名的所有文件**都**不会被发现，而在最后一次计划更新之后删除的文件将在数据库，尽管它们不再存在。假设即使在目标机器上安装了 locate ，您也无法确定。

与编程中的大多数事情一样，查看以前对同一问题的解决方案永远不会有什么坏处，所以我可以建议您阅读[GNU findutils](http://www.gnu.org/software/findutils/manual/html_node/find_html/index.html)的文档吗？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-19T12:25:33.630

不，没有文件块地址的单一表，您需要更深入。

首先，文件布局取决于文件系统类型（例如 ext2、ext3、btrfs.reisersf、jfs、xfs 等）。这是由 Linux 内核抽象的，它提供了用于访问许多文件系统上的文件的驱动程序，并且具有其文件系统的特定分区被抽象在单个虚拟文件系统（单个文件目录树，其中包含其他设备作为其子树） ）。

所以，基本上不，如果你真的需要检查，你需要使用内核抽象接口（`readdir()`等`/proc/mounts`）来搜索文件或滚动你自己的用户空间驱动程序（例如通过 FUSE）来检查原始块设备（等）`/dev/sda1`低级细节（这需要对内核/文件系统内部有很多了解，并且很容易出错）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T12:25:18.467

```
updatedb -l 0 -o db_file -U source_directory 
```

这将创建一个包含文件的数据库，我希望这会对您有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T12:22:59.870

不，文件系统实际上是由目录构成的，每个目录都包含文件和目录。

在 Linux 中，所有这些都通过 inode 管理到内核中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T21:19:10.990

是的。

从概念上讲，它确实会为每个文件在光盘上的位置创建一个表**。有很多细节使这张照片略显混乱。

但是，您通常不应该在意。你不想在那个水平上工作，你也不应该。Linux 中有许多文件系统，它们都以略微（或什至显着）不同的方式进行操作。

** 实际上不是物理位置。硬盘驱动器可以通过其固件确定的某种方式将逻辑块映射到物理块。

# mysql - MySQL：计算过程返回的行数

> ID：12974171
> 
> 赞同：1
> 
> 时间：2012-10-19T12:18:35.003
> 
> 标签：mysql, stored-procedures, prepared-statement, procedure

我想将过程返回的记录插入到另一个过程中的临时表中

我有如下程序

```
    调用 getName()

```

现在我想检查上述程序是否返回记录。

我想在另一个过程中这样做。因此，我试图将 getName() 过程返回的记录插入到另一个过程中的临时表中，以执行计数操作。

让我知道如何计算一个过程在另一个过程中返回的行数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:55:46.157

*   你能告诉我如何将值从 Mysql 中的存储过程插入到临时表中吗

    创建临时表 <name> select * from <some results>

*   让我知道如何计算一个过程在另一个过程中返回的行数。

    从 <名称> 中选择计数 (*)

# php - 每次我进行查询或从标签排序时，对 sql 查询和 ID 进行排序并按数字顺序开始

> ID：12974176
> 
> 赞同：0
> 
> 时间：2012-10-19T12:18:54.597
> 
> 标签：php, mysql

我有一个名为**forms1**的数据库和一个名为**demo**
表中的字段是**ID**，**Autore**，**Titolo**，**cit**

我希望我有第一行，使我能够对查询检索到的字母数字值进行排序，例如
![在此处输入图像描述](../Images/15ec3e440c42c3752a63a89d437333f3.png)
如何修改我的代码？这是 ***cerca2.php***：

```
<style>
br {margin-bottom:-10px;}
</style>

<form action="cerca2.php" method="post">
<b>Nome</b>&nbsp;<input type="text" name="Nome">&nbsp;&nbsp;
<b>Numero&nbsp;</b><input type="text" name="Numero">&nbsp;&nbsp;
<b>city&nbsp;</b><input type="text" name="city">&nbsp;&nbsp;
<input type="Submit">
</form>

<style>
tr:nth-of-type(odd) { background-color: AZURE; }
tr:nth-of-type(even) { background-color: CYAN; }
</style>
<style>
tr:hover{background-color<img src="images/smilies/biggrin.gif" border="0" alt="">EEPSKYBLUE;}
</style>

<?php

echo "<table border='1' style='border-collapse: collapse;border-color: silver;'>";  
echo "<tr style='font-weight: bold;'>";  
echo "<td width='auto' bgcolor=”#7FFFD4&#8243;>&nbsp;<i>ID<i/></td>";  
echo "<td width='auto' >&nbsp;<i>Nome<i/></td>";
echo "<td width='auto' ></td>";
echo "<td ></td>";
echo "</tr>";

define('DB_NAME', 'forms1');
define('DB_USER', 'root');
define('DB_PASSWORD', '');
define('DB_HOST', 'localhost');

$link = mysql_connect(DB_HOST, DB_USER, DB_PASSWORD);
if (!$link) {
    die('Could not connect: ' . mysql_error());
}

$db_selected = mysql_select_db(DB_NAME, $link);

if (!$db_selected) {
    die('Can't use ' . DB_NAME . ': ' . mysql_error());
}

$Nome = str_replace(' ', '%', $_POST['Nome']);
$Numero = str_replace(' ', '%', $_POST['Numero']); 
$city = str_replace(' ', '%', $_POST['city']); 

$arNome = str_split($Nome);
$arNumero = str_split($Numero);
$arcity = str_split($city);

$Nome='';
foreach ($arNome as $value) 
{
   if ($value=='%') continue;
   $Nome.=$value.'%';

}

$Numero='';
foreach ($arNumero as $value) 
{
   if ($value=='%') continue;
   $Numero.=$value.'%';

}

$city='';
foreach ($arcity as $value) 
{
   if ($value=='%') continue;
   $city.=$value.'%';

}

$sql = mysql_query("SELECT * FROM demo WHERE Autore LIKE '%$Nome%' AND Titolo LIKE '%$Numero%' AND cit LIKE '%$city%' ORDER BY Autore") or die(mysql_error());

while($row=mysql_fetch_array($sql)){

    echo "<tr>";
    echo "<td width='auto' bgcolor=”#FF0000 &#8243;>" . "&nbsp;". "<b>"  . $row[0] . "&nbsp;". "<b/>". "</td>";
    echo "<td width='auto'>" . "&nbsp;" . $row[1] . "&nbsp;" . "</td>";
    echo "<td width='auto'>". "</td>";
    echo "<td width='auto'>" . "&nbsp;". "<i>" . $row[2] . "<i/>". "&nbsp;" . "</td>";     
    echo "<td width='auto'>" . "&nbsp;". "<i>" . $row[3] . "<i/>". "&nbsp;" . "</td>";
    echo "</tr>";

}
mysql_close();
?> 
```

当我单击时，我会单击**Nome**和其他**th**（ID 除外）以重新排序值字母数字 AZ 或 ZA，反之亦然。目前这是我调用查询时 的***结果页面（查看上面的代码）：***![在此处输入图像描述](../Images/c250d0a60c03b2c4408e840ffb07d8a6.png)

我也会 - 但我不知道该怎么做 - ID 值始终从 1 开始，并根据每次我从*th*标签进行查询或排序时检索到的 x 值的数量以数字顺序继续。
相反，在我的情况下，总是取决于它所代表的价值。从图中可以看出，数字以随机顺序出现。在这里，我不想要这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:22:50.640

试试这个代码部分：

```
 $i = 0; while($row=mysql_fetch_array($sql)){
        $i++;
        echo "<tr>";
        echo "<td width='auto' bgcolor=”#FF0000 &#8243;>" . "&nbsp;". "<b>"  . $i . "&nbsp;". "<b/>". "</td>";
        echo "<td width='auto'>" . "&nbsp;" . $row[1] . "&nbsp;" . "</td>";
        echo "<td width='auto'>". "</td>";
        echo "<td width='auto'>" . "&nbsp;". "<i>" . $row[2] . "<i/>". "&nbsp;" . "</td>";     
        echo "<td width='auto'>" . "&nbsp;". "<i>" . $row[3] . "<i/>". "&nbsp;" . "</td>";
        echo "</tr>";

} 
```

# powershell - 从 wmi 找到卷的磁盘签名？

> ID：12974179
> 
> 赞同：1
> 
> 时间：2012-10-19T12:19:06.390
> 
> 标签：powershell, wmi

`gwmi win32_volume`为我提供了该卷的详细信息。

`gwmi win32_diskdrive`为我提供磁盘签名。

如何使用 Powershell 获取特定卷 GUID 的磁盘签名（卷 GUID 看起来像这样`\\?\Volume{2e5e3ff7-fb5a-11e1-9924-80c16e6c465c}\`？

使用`Win32_LogicalDisk`对我来说不是一个选项，因为某些卷可能未安装，并且它们不会有与之关联的字母。很好的例子是`System Reserved`Windows 7 上的分区。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T19:34:25.143

我找不到 gwmi 满足我的要求的任何东西，所以我正在从 powershell 访问 diskpart。

在这种情况下，我正在获取 gwmi win32_diskdrive 可以帮助我获得的磁盘签名

```
$volumeCommand = "list volume" | diskpart
 $Pattern = 'XXXbbbXXXX'
 $Volume
for($i=5; $i -le $volumeCommand.length; $i++)
{
write-host $volumeCommand[$i]
 $matched = @(Select-String -inputobject $volumeCommand[$i] -Pattern $Pattern)
    if($matched ) {
   $Volume=$volumeCommand[$i -1 ]
     break
   }
}

$columnToGet = 1
$volumeName = $Volume | 
   %{ $_.Split(" ",[StringSplitOptions]"RemoveEmptyEntries")[$columnToGet] }

$selectCommand = "sel volume " +$volumeName  
$uniqueid = "uniqueid disk"
write-host $selectCommand
$volumeuniqueidCommand =  $selectCommand , $uniqueid  | diskpart
write-host $volumeuniqueidCommand

$signature = $volumeuniqueidCommand[$volumeuniqueidCommand.length-3].trimStart("Disk ID: ")
write-host $signature
$signature = [CONVERT]::toint32($signature,16)
write-host $signature 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T20:03:26.503

我认为最好的（也是唯一的 IMO）方法是使用[`DiskExt.exe`Sysinternals](http://technet.microsoft.com/en-us/sysinternals/bb896648.aspx)

您可以使用 PowerShell 解析`DiskExt`输出，找到与卷相关的磁盘驱动器，然后使用它`win32_volume`来选择他的`signature`值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T21:44:46.543

您可能正在寻找以下代码：

```
$StrComputer = 'COMPUTER_NAME'
$DeviceId = "X:"
$wmiLogicalDiskQuery = "ASSOCIATORS OF {Win32_LogicalDisk.DeviceID='" + $DeviceId + "'} where AssocClass = Win32_LogicalDiskToPartition";
$PhysicaldiskPartitionName = (gwmi -Query $wmiLogicalDiskQuery).Name;
$wmiPhysicalDiskQuery = "ASSOCIATORS OF {Win32_DiskPartition.DeviceID='" + $PhysicaldiskPartitionName + "'} where AssocClass = Win32_DiskDriveToDiskPartition";
$PhysicaldiskDriveName = (gwmi -Query $wmiPhysicalDiskQuery -Comp $StrComputer).DeviceID
$DiskSignature = (gwmi Win32_DiskDrive -Comp $StrComputer | where-object {$_.DeviceID -eq $PhysicaldiskDriveName} ).Signature 
```

[这是从这里](http://www.vistax64.com/powershell/262855-re-locate-physical-drive-signature-associated-logical-drive-na.html)稍微修改的版本。

# windows-8 - 我们可以为 Windows 8 打包我们现有的 HTML5 JS 应用吗

> ID：12974180
> 
> 赞同：0
> 
> 时间：2012-10-19T12:19:15.113
> 
> 标签：windows-8

我已经阅读了一些关于 S/O 和网络的帖子。我们正在制作一个在网络上运行的基于 HTML5 JS 的网络应用程序。我们正在为 Google 应用程序和 phonegap 打包它。

我们可以为 Windows 8 打包这个应用程序吗？当然，我很欣赏它不会使用 Windows 8 的功能。但是，该应用程序是否会按现状运行。这样我们就可以将它放在商店中，并在我们前进的过程中构建 Windows 8 功能。

我很欣赏这是一个稍微不简洁的问题，但我想真正的重点是我们采用现有 HTML 5、CSS、JS 应用程序并将其部署到商店并使其在该平台上运行的最快途径是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T13:38:36.300

一般来说，答案是肯定的。过渡不是无缝的，但您将能够使用 Win8 中的大量（如果不是全部）应用程序工件。一个很好的测试是如果你可以在 IE10 中运行它，你可以将应用程序作为 Win8 应用程序运行。同样，这是一个非常广泛的问题 - 您需要担心的事情是所有脚本文件都需要是本地的（没有 CDN）、对 Web 和安全上下文的更改，以及 Win8 是一个横向范式而大多数 Web 应用程序的事实是垂直的。但总的来说，您应该能够采取行动。通常的警告 - 您的里程会有所不同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T14:17:18.373

您还可以在此处查看 Microsoft 将 Web 应用程序迁移到 win8 的指南：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh465143](http://msdn.microsoft.com/en-us/library/windows/apps/hh465143)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-19T13:40:19.583

是的，虽然不推荐，但您可以为 Win8 打包现有应用程序。不过，您需要添加一些代码。最低要求是将应用程序的启动/初始化代码嵌入 WinJS 的第一个承诺回调中，如下所示：

```
args.setPromise(WinJS.UI.processAll().then(function () {
// your init code
} 
```

您还需要为开始屏幕创建几个图标，并为应用程序的启动屏幕创建一个图像。

您可能会遇到一些问题，例如一些与安全相关的限制，您必须修改代码以使用一些本机 WinJS 函数。这一切都取决于您的应用程序的实现。

# python - Python IRC bot + SQLAlchemy - 多渠道跟踪用户

> ID：12974182
> 
> 赞同：2
> 
> 时间：2012-10-19T12:19:47.797
> 
> 标签：python, sqlalchemy, twisted, irc

我目前将 IRC 用户存储在字典中，使用他们的昵称作为“键”以便于检索。用户是从 SQLAlchemy 中检索的`users['deepy']`，我定期与数据库同步的 SQLAlchemy 对象也是如此。

现在我遇到的问题是，在 IRC 上，人们可以在许多渠道中，而我只是在跟踪一个。我需要关于如何改进这一点的建议。

我一直在考虑做几乎相同的事情，但还将频道的用户（作为列表）存储在字典中，并以频道名称作为键，例如：

`{ '#two': ['reference to user9', 'reference to user62'], '#one': ['reference to user1', 'reference to user2'] }`

对包含 SQLAlchemy 对象的用户字典的引用。

这是一个明智的做法吗？

我正在使用 Python 2.7、[PostgreSQL](https://en.wikipedia.org/wiki/PostgreSQL)、[SQLAlchemy](https://en.wikipedia.org/wiki/SQLAlchemy)和 Twisted 的 irc.ircclient。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:36:21.443

我发现最好存储尽可能少的 SQLALchemy 对象。存储大量 SQLAlchemy 对象会导致不得不担心同步问题并耗尽内存。

我会跟踪用户名或用户 ID，而不是实际的用户对象：

```
{ '#two': ['bob1', 'tom2'], '#one': ['bob1', 'mary1'] } 
```

然后，每当我需要用户的信息时，我都会从数据库中获取它们。如果我只有几个用户并且需要经常访问它们，那么我将创建一个字典，将用户名映射到 SQLAlchemy 用户对象。

# windows - 为 Windows 编写快速启动器

> ID：12974184
> 
> 赞同：0
> 
> 时间：2012-10-19T12:19:52.773
> 
> 标签：windows, performance, splash-screen, launcher

我正在编写 WPF 应用程序

应用程序针对所有类型的 Windows 和低性能计算机，所以我想为它编写启动器/启动屏幕，它将在应用程序加载之前显示

我不确定要使用什么语言或我希望它非常快速和轻量级的技术

你有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:35:46.967

显示一个 Flash 屏幕就像弹出一个对话框一样简单。如果对话框已经包含各种资源，例如位图，那么它非常快。然而，决定这一速度的一个问题是，在应用程序启动时，在点击代码以显示对话框之前初始化了多少其他内容。

因此，一种选择是拥有一个非常简单的应用程序，它只显示闪存屏幕，然后启动实际应用程序。一个简单的 Windows 对话框应用程序就可以做到这一点。如果您选择此路线，您将需要弄清楚如何同步实际应用程序完成其初始化和启动应用程序停止。有几种技术可以做到这一点，最有可能的是使用进程间互斥锁，或者只是寻找要创建的文件。

对于我使用的销售点，它是作为打开终端的一部分启动的，我们遇到了一些问题，即应用程序在一些必需的系统服务（如数据库管理器）启动并运行之前启动。

我们发现某些环境需要比其他环境更多的时间，因此注册表变量可以轻松调整现场延迟。

因此，作为应用程序初始化的一部分，我们所做的是，当应用程序启动时，它会显示一个带有进度条的对话框。进度条向上计数，我们有一个循环进行一秒钟的睡眠，然后增加进度条。

等待的秒数是应用程序的注册表设置，具有默认值。

我们遇到的一个问题是，在调试器中进行开发和测试时，默认值对于想要开始的不耐烦的程序员来说太长了，所以我们有条件编译，如果是调试编译，延迟设置为几秒钟。否则，默认值为 10 秒。但是，可以通过更改注册表值来更改它。

另请参阅[有关启动器的 Stackoverflow](https://stackoverflow.com/questions/4841686/how-to-make-a-launcher?rq=1)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T12:21:54.060

如果你想要一些真正快速和轻量级的东西，C 会很好。

如果你不想学习 C，你也可以用 .NET 和 C# 制作一个控制台应用程序，它也很快

编辑评论：您可以使用像 SDL 这样的库，它非常快速和强大，并且可以从控制台应用程序中绘制图像。

# qt - QImage 的字节序是从 uchar[] 平台创建的吗？

> ID：12974195
> 
> 赞同：3
> 
> 时间：2012-10-19T12:20:22.897
> 
> 标签：qt, endianness, qimage

QImage 有一个构造函数 QImage (uchar *data, int width, int height, int bytesPerLine, Format format)，它从现有的内存缓冲区创建一个 QImage。

字节（uchars）的顺序是否取决于平台？如果我将 alpha、red、green 和 blue 的值放入其中并增加索引，则 alpha 与蓝色交换，红色与绿色交换。这表明字节序存在问题。

我现在想知道字节序是否依赖于平台。Qt 文档对此没有任何说明。

如果它不依赖于平台，我只会更改存储值的顺序：

```
texture[ startIndex + 0 ] = pixelColor.blue();
texture[ startIndex + 1 ] = pixelColor.green();
texture[ startIndex + 2 ] = pixelColor.red();
texture[ startIndex + 3 ] = pixelColor.alpha(); 
```

如果它*依赖*于平台，我将创建一个 uint32 数组，存储计算为 alpha << 24 | 的值 红色 << 16 | 绿色 << 8 | 蓝色，并在将数组传递给 QImage() 构造函数之前 reinterpret_cast 数组。

此致，

延斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T17:05:33.043

这取决于格式。表示像素中总位数的格式是字节序相关的。Like`Format_ARGB32`表示一个 32 位整数，其最高 8 位为 alpha，在 little endian 机器上，相同的 8 位是字节序列中的最后一个字节。

序列中具有单个位的格式`Format_RGB888`不依赖于字节序。`Format_RGB888`表示字节按 R、G、B 顺序排列在内存中，而不考虑字节序。

要访问缓冲区中的字节，我会使用`Q_BYTE_ORDER`宏来有条件地编译相应的字节访问代码，而不是使用移位。

我个人使用`Format_RGB888`，因为我不直接在图像中处理 alpha。这为我省去了处理字节序差异的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T14:07:50.470

来自[Qt 文档](http://qt-project.org/doc/qt-4.8/qimage.html)：

> 警告：如果您正在访问 32-bpp 图像数据，请将返回的指针转换为 QRgb*（QRgb 具有 32 位大小）并使用它来读取/写入像素值。您不能直接使用 uchar* 指针，因为像素格式取决于底层平台上的字节顺序。使用 qRed()、qGreen()、qBlue() 和 qAlpha() 访问像素。

# ruby-on-rails - 将许多环境变量传递给 Unicorn 运行的 Rails 应用程序

> ID：12974200
> 
> 赞同：2
> 
> 时间：2012-10-19T12:20:40.057
> 
> 标签：ruby-on-rails, shell, unix, environment-variables, unicorn

我需要将大量环境变量传递给 Unicorn Web 服务器运行的 Rails 应用程序。[示例 unicorn 初始化脚本](https://github.com/defunkt/unicorn/blob/master/examples/init.sh)具有以下几行：

```
APP_ROOT=/home/x/my_app/current
<...>
INIT_CONF=$APP_ROOT/config/init.conf
<...>
test -f "$INIT_CONF" && . $INIT_CONF 
```

所以我创建了一个`$APP_ROOT/config/init.conf`，把我所有的变量都放在那里：

```
VAR1=value1
VAR2=value2 
```

我什至使这个文件可执行（不确定是否有必要）

并重新启动独角兽。但在我的应用程序中`ENV["VAR1"]` **没有返回任何内容**......

它应该以这种方式工作吗？如果是，我做错了什么？如果不是，那么如何以干净的方式将许多环境变量传递给 Rails 应用程序？（不污染全局环境或将它们全部放在命令行中）

**更新**我的调查显示 shell 文件是这样的：

```
. init.conf
echo $VAR1 
```

按预期工作。但是这个：

```
. init.conf
ruby -e "puts ENV['VAR1']" 
```

才不是。因此`.`将代码导入脚本，但以这种方式设置的环境变量不会进一步传输。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T01:22:55.327

我会考虑使用[foreman](http://ddollar.github.com/foreman/)，特别是因为它使用[这里](http://ddollar.github.com/foreman/#ENVIRONMENT)`.env`定义的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T10:00:04.357

您可能必须从配置文件中“导出”变量。如果你把它工作

```
export VAR1=value1
export VAR2=value2 
```

进入配置文件？

# android - 在没有重复的范围内获得随机数

> ID：12974202
> 
> 赞同：2
> 
> 时间：2012-10-19T12:20:50.557
> 
> 标签：android, sql, sqlite, random

我只想要合乎逻辑的帮助。我在数据库中有 100 行，并随机获取所有行，而不会重复我在下面的代码中使用过。

```
public ArrayList<Rows> getRows(){
    ArrayList<Rows> myRaw=new ArrayList<Rows>();
    Cursor rawCursor=this.db.query(DB_TABLE, null, null, null, null, null, null);
    if(rawCursor.getCount()>0){
        Random rng = new Random();
        rawCursor.moveToFirst();
        do {

             // Ideally just create one instance globally
            ArrayList<Rows> generated = new ArrayList<Raws>();
            for (int i = 0; i < 371; i++)
            {
                while(true)
                {
                    Integer next = rng.nextInt(371) + 1;
                    rawCursor.moveToPosition(next);
                    Rows raw=new Raws(rawCursor.getInt(rawCursor.getColumnIndex("_id")),rawCursor.getString(rawCursor.getColumnIndex("raw")),rawCursor.getInt(rawCursor.getColumnIndex("fav")));
                    if (!generated.contains(raw))
                    {
                        // Done for this iteration
                        generated.add(raw);
                        break;
                    }
                }
            }

            myRaw=generated;

        } while (rawCursor.moveToNext());
        rawCursor.close();
    }
    return myRaw;
} 
```

谢谢大家

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T12:27:12.213

您可以告诉数据库按一些[随机数](http://www.sqlite.org/lang_corefunc.html#random)对记录进行排序：

```
cursor = db.query(DB_TABLE, null, null, null, null, null, "random()"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T12:27:57.437

集合洗牌怎么样？ [http://developer.android.com/reference/java/util/Collections.html#shuffle(java.util.List)](http://developer.android.com/reference/java/util/Collections.html#shuffle%28java.util.List%3C?%3E%29)

```
public ArrayList<Rows> getRows() {
    ArrayList<Rows> myRaw = new ArrayList<Rows>();
    Cursor rawCursor = this.db.query(DB_TABLE, null, null, null, null, null, null);

    if (rawCursor.getCount() > 0) {
        // get all the rows
        rawCursor.moveToFirst();
        do {
            Rows raw = new Raws(rawCursor.getInt(rawCursor.getColumnIndex("_id")), rawCursor.getString(rawCursor.getColumnIndex("raw")), rawCursor.getInt(rawCursor.getColumnIndex("fav")));
            myRaw.add(raw);
        } while (rawCursor.moveToNext());
        rawCursor.close();
    }
    // shuffle the rows in some kind of random order
    Collections.shuffle(myRaw);
    return myRaw;
} 
```

@CL 提供的答案。可能是一个更好的选择，但主要区别在于该`shuffle`方法可以选择提供您自己的`Random`对象，这意味着您可以随机[播种。](http://en.wikipedia.org/wiki/Random_seed)

```
//Random with seed;
Random r = new Random(68498493);
Collections.shuffle(myRaw, r); 
```

# objective-c - 加速框架 FFT 在 iOS 中创建音频指纹

> ID：12974205
> 
> 赞同：1
> 
> 时间：2012-10-19T12:21:05.867
> 
> 标签：objective-c, ios

首先，对不起我的英语不好。几周前我刚开始使用Objective-C。我正在做一个项目，需要我比较从两个 iOS 设备记录的两个音频信号。到目前为止，我设法从 iPhone 4s 和 iPhone 4 录制了两个 .aif 文件。然后我尝试应用以下算法 A 高度稳健的音频指纹识别系统。通过：Jaap Haitsma”获取两个指纹（二进制位模式 101011010），然后逐位比较它们。但到目前为止，我得到的结果在 45% 到 55% 之间，这几乎是随机概率介于 0 和 1 之间。所以有人可以给我任何建议。这是到目前为止的代码：

```
CalculateFingerprint *myCalculateFingerprint = [CalculateFingerprint alloc];    
SInt16 *inputBuffer;    

    path4 = [documentsDirectory stringByAppendingPathComponent:fileName4];

    /////////Calculate for the 4 file
    fileURL = [NSURL fileURLWithPath:path4];   

    status = AudioFileOpenURL((__bridge CFURLRef)fileURL, kAudioFileReadPermission,kAudioFileAIFFType, &myAudioFile);

    status = AudioFileGetPropertyInfo(myAudioFile, 
                                      kAudioFilePropertyAudioDataPacketCount, 
                                      &propertySizeDataPacketCount, 
                                      &writabilityDataPacketCount);    

    status = AudioFileGetProperty(myAudioFile, 
                                  kAudioFilePropertyAudioDataPacketCount, 
                                  &propertySizeDataPacketCount, 
                                  &numberOfPackets);    

    status = AudioFileGetPropertyInfo (myAudioFile, 
                                       kAudioFilePropertyMaximumPacketSize, 
                                       &propertySizeMaxPacketSize, 
                                       &writabilityMaxPacketSize);

    status = AudioFileGetProperty(myAudioFile, 
                                  kAudioFilePropertyMaximumPacketSize, 
                                  &propertySizeMaxPacketSize, 
                                  &maxPacketSize);

    inputBuffer = (SInt16 *)malloc(numberOfPackets * maxPacketSize);

    currentPacket = 0;
    status = AudioFileReadPackets(myAudioFile, 
                                  false, &numberOfBytesRead, 
                                  NULL, 
                                  currentPacket, 
                                  &numberOfPackets, 
                                  inputBuffer); 

    [myCalculateFingerprint calculateFingerprint:inputBuffer sampleCount:numberOfPackets index:indexFile];

    status = AudioFileClose(myAudioFile); 
```

下面是指纹码的计算：

```
-(void)calculateFingerprint :(SInt16*)samples
             sampleCount:(int)sampleCount
            index:(int)indexFile{
//Divide the audio signal into 32 frames
frames myFrames [32];
int stepFrames = sampleCount / 62;

int number = 0;
int index ;
for (int i = 0; i < 32; ++i){
    index = 0;
    myFrames[i].start = number;
    myFrames[i].end = number + (32*stepFrames);
    myFrames[i].dataFrames = (SInt16*)malloc((myFrames[i].end -number+1)*sizeof(SInt16));        
    for (int j = number;j<=myFrames[i].end; ++j){

        myFrames[i].dataFrames[index] = samples[j];
        ++index;
    }
    number = number + stepFrames;
}

//Calculate FFT for each of the audio signal frames.
CalculateFFT *myCalculateFFT = [[CalculateFFT alloc] init];

theFFT myFFTData [32];
for (int i = 0; i <32; ++i){
    myFFTData[i].FFTdata = [myCalculateFFT calculateFFTForData:myFrames[i].dataFrames];
}

//each index represent the frequency as followed:
// index i is frequency i * 44100/1024
//We only need 33 bands from 300 Hz to 2000Hz, so we will get the FFTdata from the index 7 to 40
float energy [33][33];

for (int i =0; i < 33; ++i){
    energy[0][i] = 0;
}
int stepBand;
for (int i = 1; i < 33; ++i){
    for (int j = 0; j < 33; ++j){

        energy[i][j] = myFFTData[i].FFTdata[j+7];

    }

}

//next we calculate the bits for the audio fingerprint
Float32 check  = 0;
int fingerPrint [32][32];
NSMutableString *result = [[NSMutableString alloc]init];
for (int i = 0; i < 32; ++i){
    for (int j = 0; j <32; ++j){
        check = energy[i+1][j] -energy[i+1][j+1] -energy[i][j] +energy[i][j+1];

        if (check > 0){
            fingerPrint[i][j] = 1;//[tempBitFingerPrint addObject:[NSNumber numberWithInt:1]];
        }else {
            fingerPrint[i][j] = 0;//[tempBitFingerPrint addObject:[NSNumber numberWithInt:0]];
        }
[result appendString:[NSString stringWithFormat:@"%d",fingerPrint[i][j]]];
    }

} 
```

最后是 FFT 计算代码：

```
-(void)FFTSetup{
UInt32 maxFrames = 1024;
originalReal = (float*) malloc(maxFrames*sizeof(float));
originalRealTransfer = (float*)malloc(maxFrames*sizeof(float));
obtainedReal = (float*) malloc(maxFrames *sizeof(float));
freqArray = (Float32*) malloc((maxFrames/2) *sizeof(Float32));
fftLog2n = log2f(maxFrames);
fftN = 1 << fftLog2n;
fftNOver2 = maxFrames/2;
fftBufferCapacity = maxFrames;
fftIndex = 0;
fftA.realp = (float*)malloc(fftNOver2*sizeof(float));
fftA.imagp = (float*)malloc(fftNOver2*sizeof(float));
fftSetup = vDSP_create_fftsetup(fftLog2n,FFT_RADIX2); 
```

}

-(Float32*) calculateFFTForData:(SInt16*)sampleData { [self FFTSetup];

```
int stride = 1;
for (int i = 0; i < fftN; ++i){
    originalReal[i] = (float) sampleData[i];
}

UInt32 maxFrames = 1024;
//Apply Hann window on the data
int windowSize = maxFrames;

float * window = (float*)malloc(sizeof(float)*windowSize);
memset(window, 0, sizeof(float)*windowSize);
vDSP_hann_window(window, windowSize, vDSP_HANN_NORM); 
vDSP_vmul(originalReal,1,window,1,originalRealTransfer,1,windowSize);

vDSP_ctoz((COMPLEX*) originalRealTransfer,2,&fftA,1,fftNOver2);
vDSP_fft_zrip(fftSetup,&fftA, stride,fftLog2n,FFT_FORWARD);

float scale = (float) 1.0 /(2*fftN);
vDSP_vsmul(fftA.realp,1,&scale,fftA.realp,1,fftNOver2);
vDSP_vsmul(fftA.imagp,1,&scale,fftA.imagp,1,fftNOver2);

vDSP_ztoc(&fftA,1,(COMPLEX*)obtainedReal,2,fftNOver2);
int index = 0;
NSMutableString *testResult = [[NSMutableString alloc]init];
for (int i = 0; i < fftN; i=i+2){
    freqArray[index] = (obtainedReal[i]*obtainedReal[i])+(obtainedReal[i+1]*obtainedReal[i+1]);
    [testResult appendString:[NSString stringWithFormat:@"%f ",freqArray[index]]];
    ++index;
}

 return freqArray; 
```

}

# visual-studio - Visual Studio 将平台设置从任何 CPU 更改回 x86

> ID：12974206
> 
> 赞同：3
> 
> 时间：2012-10-19T12:21:11.553
> 
> 标签：visual-studio

在包含一些 c# 项目的解决方案中，我们为“任何 CPU”平台构建所有项目。我们是 3 名开发此解决方案并使用 svn 作为源代码控制的开发人员。我们不会将 .suo 文件添加/提交到源代码管理。

有时，Visual Studio 会将平台从“任何 CPU”重置为 x86。重置偶尔会发生在来自不同用户的不同计算机上。

![由 Visual Studio 自动更改 byck](../Images/5ef498f4688fbca28cf356bf4b849572.png)

我在 stackoverflow 上发现了类似的问题，但没有提出这种行为的原因，只有重置此设置和检查 .suo 文件的建议。

该平台不时重置/更改的原因可能是什么？

# android - 在旧版本的 API 上更改 ContentObserver Onchange 上的 uri

> ID：12974215
> 
> 赞同：3
> 
> 时间：2012-10-19T12:21:38.060
> 
> 标签：android, android-contentprovider, contentobserver

> **可能重复：**
> [如何在我的内容观察器中获取插入行的 URI？](https://stackoverflow.com/questions/8432800/how-to-get-uri-of-inserted-row-in-my-content-observer)

我正在使用 ContentObserver 来监听内容提供者的变化。但是，我想知道是否有一种方法可以在调用 OnChange 方法时获取更改的 URI（而不是在回调中进行搜索查询以找出更改的内容）。

似乎这对于 API 级别 16 是可能的，但我必须编写一个符合 API 8 的应用程序 =S

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T22:08:26.163

好吧，后来我在其他地方发现了同样的问题，但仍然没有答案，这让我认为没有办法在旧的 api 上获取更改后的 URI。

# android - Android SQlite 多线程访问

> ID：12974219
> 
> 赞同：5
> 
> 时间：2012-10-19T12:21:52.713
> 
> 标签：android, database, multithreading, android-sqlite

我正在使用 SQLiteOpenHelper 在 Android 上写入和读取 SQlite 数据库。当用户单击 UI 时，我使用 AsyncTask 从 SQLite 数据库中读取数据，但在同一时刻，我正在使用其他 AsyncTask 在后台更新和写入数据库。

每 x 次我得到数据库锁定异常。我怎样才能解决这个问题？可以同时从多个线程以某种方式访问​​ SQlite 吗？

我是这样使用它的：我有一个从 SQLiteOpenHelper 扩展的数据库类。我实现了 onCreate 和 onUpgrade 方法，每次我从数据库读取或写入数据库时​​，我都使用 SQLiteDatabase：

```
SQLiteDatabase database = null;
try {

    database = new Database(context).getWritableDatabase();

    ....
    writing and reading from database...
    ....

} catch (Exception e) {
    e.printStackTrace();
} finally {
    if (database != null) {
        database.close();
    }
} 
```

最后，如果我使用 SQLiteStatements 和 Cursors，我也会关闭它们。我应该使用@Justin 答案并在应用程序中有一个单一的数据库类吗？

这是我得到的错误：

```
E/SqliteDatabaseCpp(17377): sqlite3_open_v2("/data/data/com.skulptur/databases/LGM.s3db", &handle, 6, NULL) failed
E/SQLiteDatabase(17377): Failed to open the database. closing it.
E/SQLiteDatabase(17377):     android.database.sqlite.SQLiteDatabaseLockedException: database is locked
E/SQLiteDatabase(17377):    at android.database.sqlite.SQLiteDatabase.dbopen(Native Method)
E/SQLiteDatabase(17377):    at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:983)
E/SQLiteDatabase(17377):    at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:956)
E/SQLiteDatabase(17377):    at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:1021)
E/SQLiteDatabase(17377):    at   android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java:750)
E/SQLiteDatabase(17377):    at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:221)
E/SQLiteDatabase(17377):    at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:149)
E/SQLiteDatabase(17377):    at android.database.sqlite.SQLiteOpenHelper.getReadableDatabase(SQLiteOpenHelper.java:223) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T15:28:10.500

这是我为避免锁定问题所做的。我让我的应用程序处理我的数据库助手的单个实例，并始终引用它来处理我的数据库。

```
public class MyApp extends Application {
    // My instance of SQLiteOpenHelper
    public static DbHelper openHelper;

    @Override
    public void onCreate() {
        super.onCreate();
        if (openHelper == null) {
            openHelper = new DbHelper(this);
        }
    }

    public synchronized static SQLiteDatabase getDB() {
        return openHelper.getWritableDatabase();
    }
} 
```

一旦你这样做了，任何时候你想要做一个数据库查询，得到像 MyApp.getDB() 这样的数据库句柄，你就永远不会遇到锁定问题。确保永远不要关闭数据库。这种模式在您的应用程序中始终保持单一连接。SQLite 意味着在 Android 上是同步的，所以如果你有长时间运行的 DB 进程，比如在单个事务中插入 1000 次，你需要这样编码：

```
db.beginTransaction();
try {
    for (DBRow row : insertList) {
        // your insert code
        insertRow(row);
        db.yieldIfContendedSafely();
    }
    db.setTransactionSuccessful();
} finally {
    db.endTransaction();
} 
```

这将允许其他查询自行插入，这样您就不会看到您的应用程序在后台更新期间停止运行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T13:43:51.237

[使用Loaders](http://developer.android.com/guide/components/loaders.html)在数据库之上实现一个[ContentProvider](http://developer.android.com/guide/topics/providers/content-providers.html) ，它将处理线程。可以参考本教程：[http ://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T12:49:39.663

有几件事可以尝试。首先尝试将相同的实例传递`SQLiteOpenHelper`给您的每个任务。其次是在 Helper 内的 SQLiteDatabase 上使用 beginTransaction 和 endTransaction。第三是添加`synchronized`到任务中使用的每个辅助方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T12:50:39.883

我认为您错误地使用了数据库连接。它可能是由未关闭的游标或其他原因引起的。Sqlite 数据库实现是线程安全的，可以从不同的线程同时访问。请提供有关您的问题的更多详细信息（异常堆栈跟踪、导致异常的代码示例等），以便我们为您提供帮助。

# php - 合并两个 MYSQL SELECT 查询

> ID：12974224
> 
> 赞同：2
> 
> 时间：2012-10-19T12:22:17.727
> 
> 标签：php, mysql

> **可能重复：**
> [如何将两个 Post/Category 表 MYSQL SELECT 查询合并为一个](https://stackoverflow.com/questions/12972130/how-to-combine-two-post-category-tables-mysql-select-queries-into-one)

我有两个 MYSQL 查询：

```
1) "SELECT ID,post_title,post_category,post_perma FROM ".TBL_POSTS."
   WHERE  published='1' AND page='0' ORDER BY  ID ASC LIMIT 50"

2) "SELECT p.cat_ID,p.cat_nicename FROM ".TBL_CATEGORIES." n, 
   ".TBL_CATEGORIES." p
   WHERE n.lft BETWEEN p.lft 
   AND p.rgt AND n.cat_ID='".post_category."' ORDER BY p.lft 
```

我这样使用它：

```
$sql="SELECT ID, post_title, post_category,post_perma 
      FROM ".TBL_POSTS." 
      WHERE  published='1' 
      AND page='0' 
      ORDER BY ID ASC LIMIT 50";

$result=mysql_query($sql);

while($row=mysql_fetch_assoc($result)){

$sql2="SELECT p.cat_ID, p.cat_nicename 
       FROM ".TBL_CATEGORIES." n, ".TBL_CATEGORIES." p 
       WHERE n.lft BETWEEN p.lft 
       AND p.rgt 
       AND n.cat_ID='".$row['post_category']."' 
       ORDER BY p.lft";

    $result2=mysql_query($sql2);

    while($row2=mysql_fetch_assoc($result2)){
        $path.='/'.$row2['cat_nicename'];
    }

    $link.='<a href="'.$path.'">'.$row['post_title'].'</a><br>';
    $path='';

}
echo($link);
exit;

} 
```

这就是我在链接中获取路径的方式..现在我想要的是：

我想组合这两个查询，所以我没有在 while 循环中运行第二个查询。它变得非常糟糕，因为如果我收到 100 个帖子。第二个查询将运行 100 次以获取路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:27:35.313

你可以`JOIN`像这样的两个表：

```
SELECT 
  p.ID, 
  p.post_title,  
  c.cat_nicename, 
  p.post_perma 
FROM       TBL_POSTS p
INNER JOIN TBL_CATEGORIES c 
        ON p.CategoryID = c.Cat_ID
WHERE      p.published = '1' 
  AND      p.page = '0' 
ORDER BY   p.ID ASC 
 LIMIT 50 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T12:27:41.077

您可以使用 UNION 将所有这些组合到一个查询中。

真的，你需要做这样的事情，这样所有的列就不会相互组合。此外，两个 select 语句需要选择相同数量的列。

编辑：此外，在 MySQL UNION 中，您只能有 1 个 order by，并且必须在最后一个 SELECT 中，因此您必须相应地调整查询。

```
 (SELECT    ID, 
    post_title, 
    post_category, 
    post_perma, 
    NULL AS cat_id,
    NULL AS cat_nicename
  FROM ".TBL_POSTS."
  WHERE   published='1' 
  AND   page='0')
  ORDER BY  ID ASC LIMIT 50
UNION
(SELECT 
     NULL AS ID, 
     NULL AS post_title, 
     NULL AS post_category, 
     NULL AS post_perma, 
     p.cat_ID, 
     p.cat_nicename 
FROM ".TBL_CATEGORIES." n, 
     ".TBL_CATEGORIES." p
WHERE n.cat_ID='".post_category."' 
AND n.lft BETWEEN p.lft AND p.rgt)
ORDER BY p.lft 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T12:29:06.357

尝试使用 MySql [JOIN](http://dev.mysql.com/doc/refman/5.0/en/join.html)或[UNION](http://dev.mysql.com/doc/refman/5.0/en/union.html)

# java - 为什么我不能在不等待的情况下将 int 从 java 发送到 C？

> ID：12974228
> 
> 赞同：1
> 
> 时间：2012-10-19T12:22:26.953
> 
> 标签：java, c, sockets

我有一个奇怪的问题。我正在尝试编写 C 客户端和 Java 服务器之间的接口。为此，我用 Java 编写了一个网关（它使用 RMI 与服务器通信）。几乎一切正常，但我试图从网关返回一些整数到 C 客户端。这是代码：

Java网关：

```
import java.net.Socket;
import java.net.ServerSocket;
import java.net.MalformedURLException;
import java.io.BufferedReader;
import java.net.InetSocketAddress;
import java.io.InputStreamReader;
import java.io.DataOutputStream;
import java.lang.System;

public class hotelgw{

  public static final int PORT = 4242;
  public static final int BACKLOG = 5;
  public static final int MAX_ARGS = 5;

  public hotelgw(){
    InetSocketAddress address;
    ServerSocket socket = null;
    try{
      address = new InetSocketAddress(PORT);
      socket = new ServerSocket(PORT,BACKLOG);
    }catch (Exception e){
      System.out.println("Error: "+e);
      System.exit(1);
    }

    while(true){

      Socket newsock = null;
      try{
       newsock =  socket.accept();
      }catch (Exception e){
        System.out.println("Error: "+e);
        System.exit(1);
      }

      BufferedReader in = null;
      DataOutputStream out = null;

      try{
        in = new BufferedReader(new InputStreamReader(newsock.getInputStream()));
        out = new DataOutputStream(newsock.getOutputStream());
      }catch (Exception e){
        System.out.println("Error: "+e);
        System.exit(1);
      }

      String[] init_args = new String[MAX_ARGS];
      int i = 0;
      String c;

      try{
        while(!(c = in.readLine()).equals("end")){
          System.out.printf("%s",c);
          init_args[i] = c;
          i++;
        }
      }catch (Exception e){
        System.out.println("Error: "+e);
        System.exit(1);
      }

      for(int j=0;j<init_args.length;j++){
        System.out.printf("init_args[%d] = %s\n", j, init_args[j]);
      }

      int counter = 0;
      for(int j=0;j<init_args.length;j++){
        if(init_args[j] != null){
          counter++;
        }
      }

      String[] final_args = new String[counter];
      for(int j=0;j<counter;j++){
        final_args[j] = init_args[j];
      }

      if(final_args[1].equals("list")){
        int[] list = hotelclient.get_list(final_args);
        System.out.println("list received in hotelgw.java");
        for(int j=0;j<list.length;j++){
          try{
            out.writeInt(list[j]);
          }catch (Exception e){
            System.out.println("Error writing to socket: " + e);
            System.exit(1);
          }
        }
      }

      try{
        in.close();
        newsock.close();
      }catch (Exception e){
        System.out.println("Error: "+e);
        System.exit(1);
      }
    }
  }
} 
```

C客户端：

```
#include <stdio.h>
#include <sys/socket.h>
#include <errno.h>
#include <arpa/inet.h>
#include <netdb.h>
#include <unistd.h>
#include <stdlib.h>
#include <string.h>

#define PORT 4242
#define TYPES_OF_ROOMS 3
#define BUFFER_SIZE 64

/*Writes message to socket*/
ssize_t writen(int fd, const void *vptr, size_t n)
{
  size_t nleft;
  ssize_t nwritten;
  const int *ptr;

  ptr = vptr;
  nleft = n;
  while(nleft>0){
    if ( ((nwritten = write(fd,ptr,nleft)) <= 0)){
      if (errno == EINTR)
        nwritten = 0;
      else
        return -1;

    }
    nleft -= nwritten;
    ptr += nwritten;
  }
  return n;
}

int create_socket(char* address){
  struct hostent *server_address;
  struct in_addr *addr;
  struct sockaddr_in server_addr;
  socklen_t addrlen;
  char* ip;

  int sockfd = socket(AF_INET, SOCK_STREAM, 0);
  if(sockfd<0){
    perror("Error creating socket");
    exit(1);
  }

  server_address = gethostbyname(address);
  if(server_address == NULL){
    fprintf(stderr, "Server not found!\n");
    exit(1);
  }else{
    addr = (struct in_addr*) server_address->h_addr_list[0];
  }

  ip = inet_ntoa(*addr);

  server_addr.sin_family  =  AF_INET;
  server_addr.sin_port    =  htons(PORT);
  server_addr.sin_addr.s_addr  =  inet_addr(ip); 

  addrlen = (socklen_t) sizeof(struct sockaddr_in);

  if(connect(sockfd,(struct sockaddr *) &server_addr, addrlen)){
    perror("Error connecting to server");
    exit(1);
  }

  return sockfd;
}

int main(int argc, char** argv){
  int sockfd, err, i, type1=0, type2=0, type3=0;
  int int_buf[TYPES_OF_ROOMS];
  char string_buf[BUFFER_SIZE];
  char newline = '\n';
  char *end = "end";

  if(argc == 1){
    printf("Usage: hotelgwclient <address> {list,guests,book} [room type] [guest name]\n");
    exit(1);
  }

  sockfd = create_socket(argv[1]);
  printf("Socket created\n");

  if(strcmp(argv[2], "list")==0){
    if(argc != 3){
      printf("Usage: hotelgwclient <address> list\n");
      exit(1);
    }

    printf("list initiated\n");
    writen(sockfd, argv[1], strlen(argv[1]));
    writen(sockfd, &newline , sizeof(newline));
    writen(sockfd, argv[2], strlen(argv[2])); 
    writen(sockfd, &newline, sizeof(newline));
    writen(sockfd, end, strlen(end));
    writen(sockfd, &newline, sizeof(newline));
    printf("Written to socket\n");

    err = read(sockfd, &type1, sizeof(int));
    err = read(sockfd, &type2, sizeof(int));
    err = read(sockfd, &type3, sizeof(int));

    printf("Read from socket\n");
    if(err<0){
      perror("Error reading from socket");
      exit(1);
    }
    /*
    for(i=0;i<TYPES_OF_ROOMS;i++){
      printf("%d\t",int_buf[i]);
    }
    */
    type1 = htonl(type1);
    type2 = htonl(type2);
    type3 = htonl(type3);

    printf("%d\t",type1);
    printf("%d\t",type2);
    printf("%d\t",type3);
    printf("\n");
    return 0;
  }

  printf("Command not recognized.\nUsage: hotelgwclient <address> {list,guests,book} [room type] [guest name]\n");
  exit(1);
} 
```

（注意，我知道它很乱，我会在它工作时清理它:)）。

问题是，每当我调用 list 方法时，C 尝试读取响应（三个整数）它只会读取一个字节，而不是四个。如果我在从套接字读取之前添加 sleep() 调用，则此问题已修复。有谁知道发生了什么以及我应该做些什么来解决它？！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T12:29:00.447

我怀疑问题是您假设当最小值始终为 1（即使在 Java 中）时，您将读取尽可能多的数据

为什么您在其他字节之前获得一个字节是因为您使用的是没有 BufferedOutputStream 的 DataOutputStream ，因此它一次发送一个字节。使用此解决方法可能很诱人，但它只是隐藏了您需要能够一次正确读取一个字节的潜在问题，因为这总是有可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T12:28:33.923

它对`read`返回您请求的更少字节有效。从它的[手册页](http://linux.die.net/man/2/read)：

> 返回值
> 成功时，返回读取的字节数... 如果这个数字小于请求的字节数，则不是错误；这可能会发生

您需要`read`循环调用，直到返回预期的字节数或错误：

```
unsigned char* p = &type1;
int expected = sizeof(int);
while (expected > 0) {
    err = read(sockfd, p, expected);
    if (err < 0) {
        break;
    }
    p += err;
    expected -= err;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T12:27:28.127

当涉及阻塞调用并且必须并行执行时，您必须为每个任务添加线程（例如一个用于读取，另一个用于写入），以便它们不会阻塞执行。

还将收到的所有内容放入缓冲区并尝试从那里解析。使用 pthread api 实现线程。

# node.js - 尝试在 Restify API 中使用 Mongoose 保存模型时不会返回响应

> ID：12974230
> 
> 赞同：2
> 
> 时间：2012-10-19T12:22:37.103
> 
> 标签：node.js, mongodb, mongoose, restify

我正在使用 Restify 和 Mongoose 为 NodeJS 构建一个 API。在找到用户并验证其密码后的以下方法中，我试图在将响应发送回用户之前保存一些登录信息。问题是响应永远不会返回。如果我将响应放在保存调用之后和外部，则数据永远不会持久保存到 MongoDB。难道我做错了什么？并且帮助会很大，因为我过去 2 天一直在做这件事。

```
 login: function(req, res, next) {
        // Get the needed parameters
        var email = req.params.email;
        var password = req.params.password;

        // If the params contain an email and password
        if (email && password) {
            // Find the user
            findUserByEmail(email, function(err, user) {
                if (err) {
                    res.send(new restify.InternalError());
                    return next();
                }

                // If we found a user
                if (user) {
                    // Verify the password
                    user.verifyPassword(password, function(err, isMatch) {
                        if (err) {
                            res.send(new restify.InternalError());
                            return next();
                        }

                        // If it is a match
                        if (isMatch) {
                            // Update the login info for the user
                            user.loginCount++;
                            user.lastLoginAt = user.currentLoginAt;
                            user.currentLoginAt = moment.utc();
                            user.lastLoginIP = user.currentLoginIP;
                            user.currentLoginIP = req.connection.remoteAddress;

                            user.save(function (err) {
                                if (err) {
                                    res.send(new restify.InternalError());
                                    return next();
                                }

                                // NEVER RETURNS!!!!

                                // Send back the user
                                res.send(200, user);
                                return next();
                            });
                        }
                        else {
                            res.send(new restify.InvalidCredentialsError("Email and/or password are incorrect."));
                            return next();
                        }
                    });
                }
                else {
                    res.send(new restify.InvalidCredentialsError("Email and/or password are incorrect."));
                    return next();
                }
            });
        }
        else {
            res.send(new restify.MissingParameterError());
            return next();
        }
    }, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-25T13:01:37.840

导致此问题的一个原因可能是您`pre save hook`静默出现了 which 错误。

如果你发现你的模型是一个`.pre('save' () => {...})`函数，那么在你调用后仔细检查这个方法是否到达`save`，并且它返回没有错误。

可以在[此处找到有关 mongoose 中间件的文档](http://mongoosejs.com/docs/middleware.html)

# actionscript-3 - Greensock ImageLoader 将图像加载为位图而不创建影片剪辑

> ID：12974235
> 
> 赞同：0
> 
> 时间：2012-10-19T12:22:55.350
> 
> 标签：actionscript-3, gsap

我有时会使用greensock imageloader（这是一个很棒的插件，非常易于使用，我喜欢它），只是想知道有没有一种方法可以加载不会在容器内创建movieclip的位图？[我在 API http://www.greensock.com/as/docs/tween/com/greensock/loading/ImageLoader.html](http://www.greensock.com/as/docs/tween/com/greensock/loading/ImageLoader.html)中找不到这个解决方案

有人有经验吗？

干杯比尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T19:11:20.143

根据文档：

> ImageLoader 的内容指的是立即创建的 ContentDisplay (Sprite)，以便您可以在图像加载之前（或同时）定位/缩放/旋转它或添加 ROLL_OVER/ROLL_OUT/CLICK 侦听器。使用 ImageLoader 的 content 属性来获取 ContentDisplay Sprite，或者使用 rawContent 属性来获取实际的 Bitmap。如果在 vars 对象中定义了一个容器，则 ContentDisplay 将立即添加到该容器中）。

所以他们说你不必`container`在 vars 对象中提供 a 。如果您只想获取位图，那么它说您可以使用该`rawContent`属性。

尝试这样的事情：

```
//create an ImageLoader:
var loader:ImageLoader = new ImageLoader("your_image.jpg", {name:"image", 
x:0, y:0, width:200, height:200, onComplete:onImageLoad});

//begin loading
loader.load();

//see if we have a bitmap
function onImageLoad(event:LoaderEvent):void {
   trace(event.target.rawContent);
} 
```

尽管您说您喜欢这样，但在没有库的情况下，在 AS3 中加载位图是微不足道的：

```
var loader:Loader = new Loader();
loader.contentLoaderInfo.addEventListener(Event.COMPLETE, onComplete);
loader.load(new URLRequest("your_image.png"));

function onComplete (event:Event):void
{
     // get your loaded bitmap
     var bmp:Bitmap = Bitmap(LoaderInfo(event.target).content);
} 
```

# mysql - 如何从 Rails 3 中的 Stripe gem 捕获网络钩子？

> ID：12974241
> 
> 赞同：0
> 
> 时间：2012-10-19T12:23:09.177
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3, payment-gateway, stripe-payments

客户卡处理时如何从 Stripe 捕获网络挂钩？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T07:06:22.417

您可能会发现 stripe_event 有帮助：[https ://github.com/integrallis/stripe_event](https://github.com/integrallis/stripe_event)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T13:49:07.183

有[一个 RailsCast](http://railscasts.com/episodes/288-billing-with-stripe?view=asciicast)展示了如何实现条带来接受付款。

# javascript - 使用 Javascript 触发显示/隐藏外部嵌入资源

> ID：12974244
> 
> 赞同：-2
> 
> 时间：2012-10-19T12:23:14.303
> 
> 标签：javascript, jquery, dom, google-visualization

我有一个`<script>`显示 Google 可视化的（长）元素。代码直接来自谷歌；我没有办法改变它。

我需要这个隐藏的输出，直到用户点击显示。

我有两次尝试来实现这个目标：

1.  如果脚本标签在隐藏的 DOM 节点内处理，则在显示包含节点时它无法显示。

2.  如果脚本标签是动态插入的`jQuery('#parent-element').html('<script...>');`，那么它会失败，因为它需要`document.write`哪些[不能异步运行](https://stackoverflow.com/questions/7255526/invoking-document-write)（无法告诉文档中的*哪个位置*写入它）

我需要显示/隐藏按钮的原因是因为输出显示在全屏覆盖中（对于正常内容区域来说太大了）。

我想要一个通用的解决方案，这样我的客户就可以嵌入由外部 SAAS（google、youtube、...）提供的其他“神奇”html 块

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:27:17.657

而不是`display:none`使用不可见元素 ( `visibility:hidden`)。

`display:none`表示该元素不作为 DOM 的一部分呈现。
在显示属性更改为其他内容之前不会加载它。

`visibility:hidden`加载元素，但不显示它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T13:50:07.800

我通过`<script>`绝对定位 的父元素并远离视口（css:）解决了这个问题`position:absolute; left:-10000px;`。

然后我将`fixed`覆盖完全分开（即兄弟），默认隐藏。

在显示时，覆盖被`fadeIn()`ed 并且在淡入淡出完成时，屏幕外内容元素被设置为`position:fixed; left: 24px; top: 24px;`。

重新隐藏时，内容会在屏幕外重置，并且覆盖层会以`fadeOut()`.

叠加层需要低于`z-index`内容。

# unicode - 从 SQL Server 2008 R2 检索多语言数据（中文、日文...）并在 Java webapp 中显示

> ID：12974245
> 
> 赞同：3
> 
> 时间：2012-10-19T12:23:23.637
> 
> 标签：unicode, utf-8, sql-server-2008-r2, multilingual, collation

我的数据库中有中文数据，我需要在我的 Java Web 应用程序中显示它。但是我得到了**？？？**作为输出。

**使用的数据库：** SQL Server 2008 R2（`nvarchar`使用数据类型以支持 Unicode 数据，并使用默认排序规则名称创建 db，即 SQL_Latin1_General_CP1_CI_AS，将数据存储在 db 中没有问题）。

**开发环境：** Window 7

Treegrid 用于显示数据。

我已经：

```
1\. set charset and pageEncoding to UTF-8  in my HTML, jsp and Java
pages.

2\.  Updated my jdbc connection  with useUnicode=true;characterEncoding=UTF-8;.

3\.  Configured Tomcat’s server.xml connector to use UTF-8 (URIEncoding="UTF-8"). 
```

我曾经设置`collation_name`为`Latin1_General_CI_AI`仍然无法正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T13:10:15.563

`Latin1_General_CI_AI`--> 有一部分是你的问题。Latin1 与 Unicode 无关。得到“？？？” 意味着您的工具链中某处存在编码问题，您的 UTF-8 数据被加扰到另一种编码中。

# python - 在不退出的情况下关闭 pygame 窗口

> ID：12974250
> 
> 赞同：1
> 
> 时间：2012-10-19T12:23:47.857
> 
> 标签：python, pygame, pyopengl

我打开一个 pygame 窗口并使用 pyopengl 在其上绘制一些东西，调用如下：

```
def run(facets, SCREEN_SIZE=(800, 600)):
  pygame.init()
  screen = pygame.display.set_mode(SCREEN_SIZE, HWSURFACE|OPENGL|DOUBLEBUF)

  glViewport(0, 0, SCREEN_SIZE[0], SCREEN_SIZE[1])
  glMatrixMode(GL_PROJECTION)
  glLoadIdentity()
  gluPerspective(60.0, float(SCREEN_SIZE[0])/SCREEN_SIZE[1], .1, 1000.)
  glMatrixMode(GL_MODELVIEW)
  glLoadIdentity()

  clock = pygame.time.Clock()

  glMaterial(GL_FRONT, GL_AMBIENT, (0.1, 0.1, 0.1, 1.0))
  glMaterial(GL_FRONT, GL_DIFFUSE, (1.0, 1.0, 1.0, 1.0))

  pygame.mouse.set_visible(False)
  pygame.event.set_grab(True)

  while True:
    for event in pygame.event.get():
      if event.type == QUIT:
        pygame.quit()
        pygame.display.quit()
        print "returning..."
        return
      if event.type == KEYUP and event.key == K_ESCAPE:
        pygame.quit()
        pygame.display.quit()
        print "returning..."
        return

    pygame.mouse.set_visible(False)

    # Clear the screen, and z-buffer
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT)

    # other game loop code here, e.g. rendering the facets
    # and moving the viewport around. 
```

我已经留下了几乎所有的 pygame 和 pyopengl 调用，以防它们中的任何一个是相关的。

**我想要发生的事情：**在 bpython/IDLE/interactive python 提示符下运行会话，调用`run()`并查看某些内容，点击`ESC`并让它关闭窗口并将我返回到我的提示符。

**实际发生了什么：**运行我的交互式会话，构建数据结构，调用`run()`，查看内容，点击`ESC`并关闭窗口，然后立即重新打开。退出的唯一方法是杀死 python 进程（这不仅会杀死我的交互式会话，而且在 bpython 中会使我的 shell 窗口无法运行。）注意，我也*确实*看到了`print "returning..."`现在失效的 shell 的结果。

我看过这些问题：

*   [为什么 pygame 窗口不能正常关闭？](https://stackoverflow.com/questions/10694480/why-does-the-pygame-window-not-close-properly)
*   [Pygame 显示模块初始化和退出](https://stackoverflow.com/questions/10466411/pygame-display-module-init-and-quit)

但它们只会让我变得相当偏执：pygame 真的资源泄漏如此之大，以至于你必须*退出 python*才能让它收拾它的烂摊子？

另外，是什么黑魔法导致我的`return`电话*不返回*？

最后，谁能告诉我如何按照我想要的方式进行这项工作？现在，即使是完全邪恶的不受支持的黑客也很好，因为我只需要使用这个 3D 渲染器调试我的其他代码，看看我在做什么！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T14:04:44.523

答案是：*总是发布你所有的代码！*

这是调用代码中的一个缩进错误，它`run()`一遍又一遍地调用。`pygame`windows 似乎很高兴退出到交互式提示。

如果我有耐心按`ESC`9 次，我也会看到这一点。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-19T14:46:31.247

我总是用

```
sys.exit() 
```

只记得导入 sys

# python - 导出未完成

> ID：12974253
> 
> 赞同：0
> 
> 时间：2012-10-19T12:24:16.707
> 
> 标签：python, csv

这是我的脚本：

```
from itertools import groupby
import operator
import csv

l = [['Cautus  B.V.', 'Cautus  B.V.plein 92', 'plein 92', '1129008', '10', 'AVB', 'Geachte mevrouw Daa', 'Mevrouw C.P. Daa', 'admin@planet.nl'] ,
['Cautus  B.V.', 'Cautus  B.V.Wei 9-11', 'Wei 9-11', '1019123', '10', 'AVB', 'Geachte mevrouw Daa', 'Mevrouw C.P. Daa', 'admin@planet.nl'] ,
['Cautus  B.V.', 'Cautus  B.V.plein 92', 'plein 92', '1129008', '10', 'BEDR', 'Geachte mevrouw Daa', 'Mevrouw C.P. Daa', 'admin@planet.nl'] ,
['Cautus  B.V.', 'Cautus  B.V.Wei 9-11', 'Wei 9-11', '1019123', '10', 'BEDR', 'Geachte mevrouw Daa', 'Mevrouw C.P. Daa', 'admin.@planet.nl'] ,
['De company', 'De companytiellaan 42', 'tiellaan 42', 'KD0022232', '13', 'AVB', 'Geachte heer Tigch', 'De heer I. Tigch', 'imre@company.nl'] ,
['De company', 'De companytiellaan 42', 'tiellaan 42', 'KD0022232', '13', 'DAS', 'Geachte heer Tigch', 'De heer I. Tigch', 'imre@company.nl'] ,
['Slever ', 'Slever klopt 42', 'klopt 42', 'KD2220115', '17', 'AVB', 'Geachte heer Slever', 'De heer T. Slever', 'info@company.com']]

sortkey = operator.itemgetter(1,5)
l_clean = sorted(l,key=sortkey)
l_final = [(k, list(v)) for k,v in groupby(l_clean, key = operator.itemgetter(1))]

for k,v in l_final:
   info_rest = v[0][:5]+v[0][5:]
   info_combine = map(operator.itemgetter(5),v)
   uniekid = k
   verz = info_combine
   naam = info_rest[0]
   risicoadr = info_rest[2]
   polisnummer = info_rest[3]
   relatienummer = info_rest[4]
   aanhef = info_rest[6]
   contactpersoon = info_rest[7]
   emailadr = info_rest[8]
   klantgegevens = [uniekid,naam,verz,risicoadr,polisnummer,relatienummer,aanhef,contactpersoon,emailadr,]

import csv
   with open('export.csv', 'w') as f:
       writer = csv.writer(f)
       writer.writerows(klantgegevens) 
```

当我写的时候，我在我的 .csv 文件中得到了这个结果：

```
S   l   e   v   e   r       k   l   o   p   t       4   2 
```

如您所见，他只在其中写了一个街道名称。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T12:36:44.627

您只有*一个*列表（您在每个循环中重置`klantgegevens`），并且您编写该列表，就好像它是一组完整的多行。

CSV 模块将该列表视为一组序列，这意味着每个字符串条目都被视为单个字符的序列，然后将其写入您的 csv 文件：

```
>>> klantgegevens
['Slever klopt 42', 'Slever ', ['AVB'], 'klopt 42', 'KD2220115', '17', 'Geachte heer Slever', 'De heer T. Slever', 'info@company.com']
>>> list(klantgegevens[0])
['S', 'l', 'e', 'v', 'e', 'r', ' ', 'k', 'l', 'o', 'p', 't', ' ', '4', '2'] 
```

`klantgegevens`您可以在收集列表时分别编写每一行：

```
import csv
with open('export.csv', 'w') as f:
    writer = csv.writer(f)
    for k,v in l_final:
       info_rest = v[0][:5]+v[0][5:]
       info_combine = map(operator.itemgetter(5),v)
       uniekid = k
       verz = info_combine
       naam = info_rest[0]
       risicoadr = info_rest[2]
       polisnummer = info_rest[3]
       relatienummer = info_rest[4]
       aanhef = info_rest[6]
       contactpersoon = info_rest[7]
       emailadr = info_rest[8]
       klantgegevens = [uniekid,naam,verz,risicoadr,polisnummer,relatienummer,aanhef,contactpersoon,emailadr,]
       writer.writerow(klantgegevens) 
```

现在列表将被视为一系列列，在完成时写入每一行。

或者，您必须将每个`klantgegevens`列表收集到结果列表中：

```
results = []    
for k,v in l_final:
    # processing
    klantgegevens = [uniekid,naam,verz,risicoadr,polisnummer,relatienummer,aanhef,contactpersoon,emailadr,]
    results.append(klantgegevens) 
```

然后将该列表列表写入您的 CSV 文件：

```
import csv
with open('export.csv', 'w') as f:
    writer = csv.writer(f)
    writer.writerows(results) 
```

# mysql - 在Eclipse中使用C程序连接MYSQL

> ID：12974254
> 
> 赞同：0
> 
> 时间：2012-10-19T12:24:33.023
> 
> 标签：mysql, c, eclipse, eclipse-cdt

我正在连接`Mysql`using `c program in eclipse`，我正在使用`CYGWIN`编译器来编译程序。我已经安装`mysql c connector`并将包含文件添加到编译器和链接器

但我收到错误

```
**** Build of configuration Debug for project DbConnectionC ****

make all 
Building file: ../connection.c
Invoking: Cygwin C Compiler
gcc -I"C:\Program Files (x86)\MySQL\MySQL Connector C 6.0.2\include" -include"C:\Program Files (x86)\MySQL\MySQL Connector C 6.0.2\include\mysql.h" -O0 -g3 -Wall -c -fmessage-length=0 -MMD -MP -MF"connection.d" -MT"connection.d" -o "connection.o" "../connection.c"
cygwin warning:
  MS-DOS style path detected: D:\java\workspace\DbConnectionC\Debug
  Preferred POSIX equivalent is: /cygdrive/d/java/workspace/DbConnectionC/Debug
  CYGWIN environment variable option "nodosfilewarning" turns off this warning.
  Consult the user's guide for more details about POSIX paths:
    http://cygwin.com/cygwin-ug-net/using.html#using-pathnames
../connection.c: In function `main':
../connection.c:57: warning: char format, different type arg (arg 2)
../connection.c:57: warning: char format, different type arg (arg 2)
../connection.c:61: warning: char format, different type arg (arg 2)
../connection.c:61: warning: char format, different type arg (arg 2)
Finished building: ../connection.c

Building target: DbConnectionC.exe
Invoking: Cygwin C Linker
gcc -L"C:\Program Files (x86)\MySQL\MySQL Connector C 6.0.2\lib\opt" -o "DbConnectionC.exe"  ./connection.o   -llibmysql.lib -lmysqlclient.lib
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../i686-pc-cygwin/bin/ld: cannot find -llibmysql.lib
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../i686-pc-cygwin/bin/ld: cannot find -lmysqlclient.lib
collect2: ld returned 1 exit status
make: *** [DbConnectionC.exe] Error 1
makefile:29: recipe for target `DbConnectionC.exe' failed

**** Build Finished **** 
```

请提前帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T12:36:52.523

在第一部分中，您有一些关于可能出现的问题的警告：

> ../connection.c:39：警告：函数“退出”的隐式声明

这意味着`exit()`未声明函数，您的源代码需要一个`#include <stdlib.h>`

> ../connection.c:46：警告：控制到达非无效函数的结尾

末尾不返回值，如果程序成功`main()`，则添加 a 。`return 0;`

第二部分是链接器警告：

> /usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../i686-pc-cygwin/bin/ld：找不到-llibmysql.lib
> /usr/lib/ gcc/i686-pc-cygwin/3.4.4/../../../../i686-pc-cygwin/bin/ld：找不到-lmysqlclient.lib

这意味着链接器需要库的路径，或者库不存在或库名称拼写错误。

一种可能的解决方案是使用`-lmysql -lmysqlclient`而不是`-llibmysql.lib -lmysqlclient.lib`，但我对 Windows 不是很熟悉。

话虽如此，我强烈建议您查看[https://stackoverflow.com/tags/c/info](https://stackoverflow.com/tags/c/info)并查看一些书籍链接。

# python - 基本 Python 函数替换值

> ID：12974256
> 
> 赞同：0
> 
> 时间：2012-10-19T12:24:44.387
> 
> 标签：python, string

我正在尝试创建具有以下特征的函数；

函数名称：new_scores，

参数：（p1_score，p2_score，current_score，current_player）

`p1_score`：用户输入的玩家 1 分，

`p2_score`：用户输入的玩家 2 得分，

`current_score`：执行任何动作后设置玩家的当前得分

`current_player`：“PLAYER_ONE”或“PLAYER_TWO”

我的代码的问题在于它在所有情况下都不起作用，例如尝试替换 PLAYER_ONE 中的值，它只会吐出我输入的 p1_score 和 p2_score。谢谢您的帮助

```
def new_scores(p1_score,p2_score,current_score,current_player):
    if current_player == 'PLAYER_ONE':
        p1_score = current_score
        return (p1_score,p2_score)
    elif current_player == 'PLAYER_TWO':
        p2_score = current_score
        return (p1_score,p2_score) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T12:30:24.533

你的代码是不必要的复杂，这对于这么几行来说是相当了不起的壮举。:) 分配没有意义，直接返回预期的数据：

```
def new_scores(p1_score, p2_score, current_score, current_player):
   if current_player == 'PLAYER_ONE':
      return (current_score, p2_score)
   elif current_player == 'PLAYER_TWO':
      return (p1_score, current_score) 
```

不过，您的代码看起来是正确的。验证参数是否正确，使用字符串表示这样的语义有点容易出错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T12:42:22.287

确保您*使用*的是返回值，并且不期望您传入的参数会被更改为副作用。

```
>>> new_scores(3, 4, 5, "PLAYER_ONE")
(5, 4)
>>> new_scores(3, 4, 7, "PLAYER_TWO")
(3, 7) 
```

如上所述运行您的函数表明它按预期工作

# ember.js - 为 EmberJS 创建 TypeScript 声明文件

> ID：12974257
> 
> 赞同：2
> 
> 时间：2012-10-19T12:25:02.647
> 
> 标签：ember.js, typescript

我正在尝试为 EmberJS 创建声明文件。我尝试创建足够的声明来创建入门工具包应用程序。

```
var App = Em.Application.create();

App.MyView = Em.View.extend({
  mouseDown: function() {
    window.alert("hello world!");
  }
}); 
```

我尝试了几件事，比如创建模块调用 Em 并在其中创建接口，但我没能做到正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T13:30:48.670

根据您的示例，这会在您正在使用的项目周围添加键入内容。我已经做出了假设，例如`Application.create()`返回`Application`- 您可以根据需要调整示例。

```
declare module Em {
    class Application {
        static create() : Application;
        MyView: View;
    }

    class View {
        static extend(extender: {}) : View;
    }
}

var App = Em.Application.create();

App.MyView = Em.View.extend({
  mouseDown: function() {
    window.alert("hello world!");
  }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T01:55:45.707

如果您出于理解的目的创建定义文件，或者您只是尝试创建 ember 定义，那么您可能需要查看这个 github 项目：

[一堆流行库的打字稿定义](https://github.com/borisyankov/DefinitelyTyped)

这对我来说是一个巨大的帮助，帮助我了解创建有用的库类型定义所需的类型定义体操（主要是由于存在广泛变化的 javascript api 定义/使用样式）。

或者，如果您只想要一个 ember 定义，只需获取文件 :)

# macos - Mac OS X 应用程序中的密码验证

> ID：12974258
> 
> 赞同：0
> 
> 时间：2012-10-19T12:25:07.100
> 
> 标签：macos, cocoa, password-protection, amazon-dynamodb

我正在使用 DynamoDB 来保存我的用户及其密码。现在我现在请求从数据库中获取用户和他的密码，如果密码正确，我会在客户端检查。我对此进行了更多思考，您可能会通过网络嗅探器看到密码。但是当我进行服务器端验证时，我仍然需要将密码上传到服务器，所以效果相同。

我还考虑过单向哈希，这显然也不安全。

有没有更好的验证方式。在我的应用程序中，安全是一个重要方面。谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T14:59:15.457

我最终在客户端使用了 SHA-256 哈希并将哈希密码上传到数据库。

# ruby-on-rails - Rails 缓存清扫器在创建时失败

> ID：12974262
> 
> 赞同：0
> 
> 时间：2012-10-19T12:25:17.233
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activeadmin, sweeper

我有一个控制器，其中：

```
caches_action :show
cache_sweeper :the_model_sweeper, :only => [:update, :destroy] 
```

和清扫器：

```
observe TheModel

def after_save(the_model)
  expire_cache(the_model)
end

def after_destroy(the_model)
  expire_cache(the_model)
end

def expire_cache(the_model)
  expire_action :controller => '/the_model', :action => 'show'
end 
```

我得到：

```
ActionController::RoutingError (No route matches {:controller=>"/the_model", :action=>"show"}): 
```

我猜的问题是因为清扫器被称为 after_save，当在新记录上时不会有任何东西可以破坏，即使我已经明确表示它只是在更新或删除时清扫。

*（出于示例目的，我显然已将模型重命名为“模型”）*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T12:43:30.010

问题是由于使用 ActiveAdmin，并且忘记*（doh ...）*将 :only => [:update, :destroy] 添加到该模型的活动管理配置中

# mysql - Firefox 使回形针将特殊字符存储为问号

> ID：12974266
> 
> 赞同：3
> 
> 时间：2012-10-19T12:25:29.957
> 
> 标签：mysql, ruby-on-rails, paperclip

当我使用 Firefox 上传名为“åäöÅÄÖ.jpg”的文件时，它会将其存储为“a?a?o?A?A?O?.jpg”

使用 Google Chrome、Safari 和 Internet Explorer 可以正常工作。

当我观看 Rails 控制台时，插入文件名的查询看起来没问题：

```
BlogHeader Update (0.4ms)   UPDATE 'blog_headers' 
  SET 'large_file_name' = 'åäöÅÄÖ.jpg', 
  'updated_at' = '2012-10-19 14:13:36' WHERE 'id' = 14` 
```

显然是一个编码问题，但我似乎无法追踪它在哪里中断。有任何想法吗？使用 Rails 2.3.11 和 Paperclip 2.8.0。

**编辑：** 解决此问题的另一种方法是在文件上传后重命名文件名（例如，使用正则表达式删除所有非 az 字符）。我一直在研究 Paperclip 中的插值，但由于这适用于已经上传的文件，它也会破坏它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T03:37:17.783

我建议对您的字符串强制编码，例如，如果文件名在名为 file_name 的变量中：

```
file_name = file_name.force_encoding("UTF-8") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T23:03:49.860

这显然是一个编码问题，似乎firefox没有为您强制使用utf8，您可以尝试将其放在视图中：

```
# encoding utf-8 
```

和

```
if defined? Encoding 
  Encoding.default_internal = 'UTF-8'
  Encoding.default_external = Encoding::UTF_8
end 
```

在你的`environment.rb`

这也可能是您的 mysql 编码的问题，可能是 mysql 连接器未正确设置编码。试试上面的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T03:55:10.567

你还有一个选择。尝试更改 database.yml 文件。像这样

```
 development:
     adapter: mysql
     encoding: utf8
     database: depot1_dev
     pool: 5
     username: root
     password: 
     host: localhost
     ... 
```

我希望它可能是工作

# php - PHP mysql_fetch_assoc 错误

> ID：12974276
> 
> 赞同：-1
> 
> 时间：2012-10-19T12:26:13.317
> 
> 标签：php, mysql, fetch

> **可能重复：**
> [mysql_fetch_array() 期望参数 1 是资源，选择中给出的布尔值](https://stackoverflow.com/questions/2973202/mysql-fetch-array-expects-parameter-1-to-be-resource-boolean-given-in-select)
> [mysql_fetch_assoc() 期望参数 1 是资源](https://stackoverflow.com/questions/7916381/mysql-fetch-assoc-expects-parameter-1-to-be-resource)

我正在尝试从一个表中获取单个字段并将其添加到另一个表中。

这是我使用 MySQL/PHP 的第三天，所以我遇到了一个小问题。
PHP 抛出一个错误，期望一个资源，但给出了一个字符串。
它是一个表中自动递增的 ID 字段。

基本上，我提取名字和姓氏匹配的 ID。

```
$query5 = "SELECT FROM ".$db_prefix."customer_det (`id`) 
WHERE fname = '".$fname."' 
AND lname = '".$lname."'";

$result5 = mysql_query($query5);
while($row = mysql_fetch_assoc($result5)){
$uid = $row['id'];
echo "$uid";
} 
```

错误：

> 警告：mysql_fetch_assoc() 期望参数 1 是资源，给定的布尔值

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T12:27:38.527

```
$result5 = "mysql_query($query5)";
           ^                    ^ 
```

删除引号。

如果你用过`var_dump($result5);`，你会明白它是`string`. 原因是双引号或单引号中的所有内容在 php 中都被视为字符串。

您还需要处理这样的错误：

```
$result5 = mysql_query($query5) or die(mysql_error()); 
```

因为`mysql_query`会`false`在失败时返回

如果您对字符串表示感兴趣，请查看[手册](http://php.net/manual/en/language.types.string.php)。

此外，您的查询中有语法错误。您缺少要从 db 中检索的列：

```
$query5 = "select from ".$db_prefix."customer_det (`id`) where fname = '".$fname."' and lname = '".$lname."'";
                 ^ 
```

在之后添加`*`（或列名）`select`

**注意：** `mysql_*`函数已弃用。替代方案是：[`mysqli_*`](http://php.net/mysqli)和[`PDO`](http://php.net/pdo)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T12:28:05.630

```
$query5 = "select from ".$db_prefix."customer_det (`id`) where fname = '".$fname."' and lname = '".$lname."'";
$result5 = mysql_query($query5);
while($row = mysql_fetch_assoc($result5)){
  $uid = $row['id'];
  echo "$uid";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T12:28:24.143

改变 -

```
$result5 = "mysql_query($query5)"; 
```

到

```
$result5 = mysql_query($query5); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T12:30:03.643

用这个

```
$result5 = mysql_query($query5); 
```

而不是这个

```
$result5 = "mysql_query($query5)"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T12:34:08.013

我猜想抛出错误的那一行是：

```
while($row = mysql_fetch_assoc($result5)){ 
```

该函数`mysql_fetch_assoc`是“期望资源”，因为您需要将 SQL 查询的结果传递给它，它将从这些结果中获取。但是，`$result5`它不是 SQL 查询，而是一个字符串：

```
$result5 = "mysql_query($query5)"; 
```

我不确定为什么要在其周围加上引号，但是如果您想实际解释该代码，则不希望它们出现：

```
$result5 = mysql_query($query5); 
```

这将运行该`mysql_query`函数并将其返回值（这是一种资源）放入`$result5`.

* * *

现在对于更重要的事情......

首先，您的代码很容易受到[SQL 注入攻击](http://en.wikipedia.org/wiki/SQL_injection)。关于这一点有很多要了解的，单个 Stack Overflow 答案不会涵盖它。因此，我将尝试通过简单地说您永远不应该使用用户输入值的原始字符串连接来构建 SQL 查询来总结这个*概念*。用户可以输入恶意输入并修改您的查询，从而有效地访问您的数据库。如果您的数据库以提升的权限运行，那么他们可以访问服务器上的更多内容，依此类推。

基本上，*始终清理您的输入*，并且*永远不要隐含地信任来自用户的输入*。

其次，不要使用`mysql_`函数。它们已被`mysqli_`函数取代，原因与我刚才提到的 SQL 注入内容不完全无关。 [他们的文档页面甚至非常清楚地说明了这一点](http://php.net/manual/en/function.mysql-query.php)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-19T13:15:02.803

您在查询中缺少所选字段 ( `id`) 的名称：

```
$query = "SELECT id FROM {$db_prefix}customer_det WHERE fname = '{$fname}' AND lname = '{$lname}'";
$result = mysql_query($query);
while($row = mysql_fetch_assoc($result)){
    echo $row['id'];
} 
```

# c# - 如何将 FJCore 包含到现有项目中？

> ID：12974280
> 
> 赞同：0
> 
> 时间：2012-10-19T12:26:29.827
> 
> 标签：c#, visual-studio, silverlight, fjcore

我认为这就像创建一个新文件夹、将源树复制粘贴到其中并从源文件中引用 lib 一样简单。但复制的文件不会显示在解决方案资源管理器侧边栏中的新文件夹下。显然还有更多。

我需要做什么才能完成这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:47:03.270

您需要单击解决方案资源管理器工具栏中的“显示所有文件”，然后右键单击文件夹/文件并选择“包含在项目中”。

# oracle - Oracle PL/SQL 中的回调函数

> ID：12974284
> 
> 赞同：3
> 
> 时间：2012-10-19T12:26:41.273
> 
> 标签：oracle, plsql, table-functions

我一直在 PL/SQL 中进行一些数据转换/处理，我想从我的包中**消除重复的代码。**这是相关的代码部分。

表函数的输入类型：

```
type t_legs_cur is ref cursor return legs%rowtype; 
```

处理一条记录的程序：

```
procedure discontinuity_rule(p_leg in out nocopy legs%rowtype) as
begin
  null; --business logic here
end discontinuity_rule; 
```

遍历游标的表函数，处理游标中的每一行并通过管道输出（如果有）：

```
function apply_discontinuity_rule(p_cur t_legs_cur)
  return t_legs pipelined
  order p_cur by (/* some fields */)    
  parallel_enable (partition p_cur by range (/* some fields */))
as
  v_leg legs%rowtype;
begin
  loop
    fetch p_cur into v_leg;
    exit when p_cur%notfound;

    discontinuity_rule(v_leg); --call back

    if v_leg.id is not null then
      pipe row (v_leg);
    end if;

  end loop;
end apply_discontinuity_rule; 
```

转换/处理有几个步骤，例如，我将运行以下选择来进行一些处理并以给定的顺序应用一些规则：

```
select * from table(trip_rules.generate_trips_from_legs(cursor(
  select * from table(trip_rules.apply_5_legs_rule(cursor(
    select * from table (trip_rules.apply_previous_city_rule(cursor(
      select * from table (trip_rules.apply_backhaul_rule(cursor(
        select * from table(trip_rules.apply_connection_time_rule(cursor(
          select * from table(trip_rules.apply_discontinuity_rule(cursor(
            select * from table(trip_rules.generate_legs_from_input(cursor(
              select * from INPUT_DATA
            )))
          )))
        )))
      )))
    )))
  )))
))); 
```

这一切都很好，花花公子，唯一的问题是，我的 trip_rule 包包含许多`apply_*_rule`功能。它们都类似于示例`apply_discontinuity_rule`。唯一的区别是`discontinuity_rule`他们回调的实际过程 ( )。

所以，我的问题是，我怎样才能避免复制`apply_*`函数的代码。有没有更优雅的方法来做到这一点，然后使用一个大的 if：`if p_rule_name == 'discontinuity_rule' then`

```
function apply_rule(p_cur t_legs_cur, p_rule_name in varchar2)
  return t_legs pipelined
  order p_cur by (/* some fields */)    
  parallel_enable (partition p_cur by range (/* some fields */))
as
  v_leg legs%rowtype;
begin
  loop
    fetch p_cur into v_leg;
    exit when p_cur%notfound;

    if p_rule_name == 'discontinuity_rule' then
      discontinuity_rule(v_leg);
    elsif p_rule_name == 'other_rule' then
      other_rule(v_leg);
    elsif p_rule_name == 'totally_other_rule' then
      totally_other_rule(v_leg);
    -- and so on...
    end if;

    if v_leg.id is not null then
      pipe row (v_leg);
    end if;

  end loop;
end apply_rule; 
```

我还知道可以使用过程名称动态创建匿名 PL/SQL 块并将其作为动态 SQL 执行。我想知道它是否可以正确完成，而不会影响我的表现。任何想法都值得赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T13:01:00.833

您巨大的 IF 语句不是重复代码。

没错，它有一些彼此相似的部分，但是这个......

```
elsif p_rule_name == 'other_rule' then
    other_rule(v_leg); 
```

……绝对和这个不一样……

```
elsif p_rule_name == 'totally_other_rule' then
    totally_other_rule(v_leg); 
```

除非真的别无选择，否则我们应该避免使用动态 PL/SQL。这里没有必要。

# jquery - DropDownListFor，设置ID为

> ID：12974290
> 
> 赞同：1
> 
> 时间：2012-10-19T12:27:15.267
> 
> 标签：jquery, asp.net-mvc-3

MVC3 甚至可以做到这一点吗？

我想用相同的选项过滤两个不同的下拉菜单，这样当第一个选项被选中时，在第二个下拉菜单中该值应该被隐藏。

```
 $('#ddl1').change(function() {
    var selectedValue = $(this).val();
    $('#ddl2 option').each(function() {
        $(this).toggle($(this).val() !== selectedValue);
    });
});​ 
```

[http://jsfiddle.net/b4MjY/2/](http://jsfiddle.net/b4MjY/2/)`values`如果一切都一样， 这一切都很好。*但是我需要的是当值不同时它会做同样的事情。所以它过滤`Text`或过滤`ID`选项而不是`value`*

我只是不确定是否有办法通过 MVC 在其上分配任何内容，而无需更改或创建帮助程序。

**编辑**

是否有可能`innerHTML`从选项中获取价值并按该值过滤？

**更新** 感谢所有帮助的人！

这最终成为最简单的解决方案。 [http://jsfiddle.net/b4MjY/23/](http://jsfiddle.net/b4MjY/23/)

尽管列出的所有解决方案都适用于不同的场合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:41:09.247

> 我想用相同的选项过滤两个不同的下拉菜单，这样当第一个选项被选中时，在第二个下拉菜单中该值应该被隐藏。

我在之前的 stackoverflow 问题中玩过这个，发现它运行良好。请参阅下面的演示，它正是这样做的。它在另一个下拉列表中隐藏了一个值。

### [演示](http://jsfiddle.net/FranWahl/EMvWH/)- 隐藏在另一个下拉列表中选择的下拉列表中的值

这在 MVC3 中是可能的，您需要做的就是使用 JavaScript 复制完整列表并将其存储在例如数组中。

Youn 然后可以使用类似于`removeSelected`如下所示的代码来获取指定列表的选定值并将其从指定的目标列表中删除。

该方法将使用完整列表的本地副本，以便能够在删除项目之前“重新填充”列表，以确保再次添加任何未选择的项目。

无论您是否使用 MVC3，使用 JavaScript/jQuery 删除项目的功能都不会改变。MVC3 只是提供项目列表。

只是补充一下，您不需要每个项目的 id 值。如果他们都有独特的文字，你就可以了。正如您在下面看到的，我只是通过忽略 id 的值进行匹配。

```
var $ddl1 = $("#ddl1");
var $ddl2 = $("#ddl2");

var employees = [
    { Id: 0, Name: "Michael Jordan"},
    { Id: 1, Name: "Magic Johnson"},
    { Id: 2, Name: "Larry Bird"},
    { Id: 3, Name: "Some Guy"},
    { Id: 4, Name: "Another Dude"}
];

function resetEmployee($selectElement) {
    $selectElement.empty();

    employees.forEach(function(employee) {
        $selectElement.append('<option value="' + employee.Id + '">' + employee.Name + '</option>');
    });
};

resetEmployee($ddl1);
resetEmployee($ddl2);

removeSelected($ddl1, $ddl2);
removeSelected($ddl2, $ddl1);

function removeSelected($sourceSelect, $fromSelect) {
    var fromSelectedValue = $fromSelect.val();
    resetEmployee($fromSelect);

    $fromSelect.find('option[value="' + $sourceSelect.val()  + '"]').remove();
    $fromSelect.val(fromSelectedValue);
};

$ddl1.on('change', function(){
    removeSelected($ddl1, $ddl2);
});

$ddl2.on('change', function(){
    removeSelected($ddl2, $ddl1);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T13:29:36.260

好的，我喜欢你的问题，因为我将来可能会实现类似的东西，这里有一个类似插件的脚本。[活生生的例子](http://jsfiddle.net/b4MjY/21/)

基本上，您只需向`"mutual-exclusion"`希望值唯一的每个下拉列表添加一个类。这意味着该脚本将适用于您扔给它的任意数量的下拉菜单，并且现场示例有 3 个。当然，只有 2 个可以，因为它是最简单的情况

此外，如果你想隐藏而不是禁用（我更喜欢），你可以[在这个例子中看到](http://jsfiddle.net/7Zd9n/)

基本上我只改变了2个案例`if ($curSelected.filter('option[value="'`......

```
var $mutualExcludedDropdowns = $('.mutual-exclusion');
$mutualExcludedDropdowns.change(function() {
    var selectedValue = $(this).val();
    var curItem = $(this)
    var $curSelected = $('option:selected' , $mutualExcludedDropdowns);

    $mutualExcludedDropdowns.each(function(index, dropdownList) {
        if ($(curItem)[0]  !== $(dropdownList)[0])
        {
            $('option', $(dropdownList)).each(function(index, optionItem) {
                if ($curSelected.filter('option[value="' + $(optionItem).val() + '"]').length > 0)
                    {
                        $(optionItem).attr('disabled', 'disabled');
                    }
                    else
                    {
                        $(optionItem).removeAttr('disabled');
                    }
            });
        }
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T12:40:43.767

您可以使用 disabled 属性在第二个下拉列表中禁用该选项

```
$('#ddl1').change(function() {
var selectedValue = $(this).val();
$('#ddl2 option').each(function() {
    if($(this).val() == selectedValue) $(this).attr('disabled',true);
    else $(this).attr('disabled',false);
});
});​ 
```

您不能 .toggle() 或 hide() 选项，因为 IE 不允许将显示设置为无，替代方法是 .remove() 选项并在下一次更改时将它们添加回来。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T12:49:55.353

懒惰编码：

```
$('#ddl1').change(function() {
    var selectedValue = $(this).val();
    $('#ddl2 option').each(function() {
        if($(this).val() == selectedValue)
            { $(this).attr('disabled',true);
        } else {
            $(this).attr('disabled',false);
        };
    });
});
$('#ddl2').change(function() {
    var selectedValue = $(this).val();
    $('#ddl1 option').each(function() {
        if($(this).val() == selectedValue)
            { $(this).attr('disabled',true);
        } else {
            $(this).attr('disabled',false);
        };
    });
}); 
```

# xml - 我可以设置 XSD 以便在具有不同基本类型的两个属性之间共享 xs:enumeration - xs:ID 和 xs:string

> ID：12974293
> 
> 赞同：2
> 
> 时间：2012-10-19T12:27:18.607
> 
> 标签：xml, xsd, xsd-validation

我正在尝试确定如何修改我的 XSD 以在 XML 的两个位置使用枚举但具有不同的数据类型。我使用 Visual Studio 2010 作为我的 XML 编辑器。

想象一个包含车辆类型和所述车辆订单的 XML 文档。规则如下：

*   每辆车都必须有一个唯一的属性 - 型号 - 所以属性应该是 xs:ID 类型。
*   每个订单可以有多个车辆，因此模型属性应该是 xs:string 等类型。

这是我的 XML 文件——Test.xml

```
<?xml version="1.0" encoding="utf-8" ?>

<sample xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="Test.xsd">
  <vehicles>
    <vehicle model="Equinox" />
    <vehicle model="Impala"/>
    <!-- This should not be allowed because it's not unique -->
    <vehicle model="Impala" />
    <!-- This should not be allowed because it is not a valid model -->
    <vehicle model="Apple" />
  </vehicles>
  <orders>
    <order orderid="123">
      <item quantity="3"  model="Equinox" />
      <item quantity="2"  model="Impala" />
      <item quantity="3"  model="Impala" />
    </order>
  </orders>
</sample> 
```

这是我的 XSD 文件 - Test.xsd（与 XML 位于同一位置）

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           attributeFormDefault="unqualified"
           elementFormDefault="qualified"
           xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="sample">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="vehicles">
          <xs:complexType>
            <xs:sequence>
              <xs:element maxOccurs="unbounded" name="vehicle">
                <xs:complexType>
                  <!-- this instance of model should be unique -->
                  <xs:attribute name="model" type="UniqueModel" use="required" />
                </xs:complexType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="orders">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="order">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="item" maxOccurs="unbounded">
                      <xs:complexType>
                        <xs:attribute name="quantity" type="xs:unsignedByte" use="required" />
                        <!-- this instance of model can be repeated -->
                        <xs:attribute name="model" type="ModelList" use="required" />
                      </xs:complexType>
                    </xs:element>
                  </xs:sequence>
                  <xs:attribute name="orderid" type="xs:unsignedByte" use="required" />
                </xs:complexType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>

  <xs:simpleType name="UniqueModel">
    <xs:restriction base="xs:ID">
      <!-- I want to import ModelList here-->
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="ModelList">
    <xs:union memberTypes="ChevyModelList DodgeModelList" />
  </xs:simpleType>

  <xs:simpleType name="ChevyModelList">
    <xs:restriction base="xs:normalizedString">
      <xs:enumeration value="Equinox" />
      <xs:enumeration value="Impala" />
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="DodgeModelList">
    <xs:restriction base="xs:normalizedString">
      <xs:enumeration value="Charger" />
      <xs:enumeration value="Ram" />
    </xs:restriction>
  </xs:simpleType>

</xs:schema> 
```

我已经进行了许多 Google 和 Stack Overflow 搜索，试图确定这是否可行，但找不到任何相关内容。

也许我需要回到我最初的想法——使用 xs:unique 来限制数据。我也无法让它工作：

```
<xs:element name="vehicles">
  <!-- vehicle complexType here -->
  <xs:unique name="uniqueModel">
    <xs:selector xpath="vechicle" />
    <xs:field xpath="@model" />
  </xs:unique>
</xs:element> 
```

任何有关使这两种解决方案都能正常工作的帮助都会很棒！

谢谢！萨德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T12:41:35.250

`xs:ID`类型不仅仅意味着唯一性，它还将值限制为有效的 XML 名称，这特别意味着没有空格并且不以数字开头（例如，标致模型名为“307” ）. 我可能会通过使用密钥来解决问题

```
<xs:element name="sample">
  <xs:key name="modelName">
    <xs:selector xpath="vehicles/vehicle" />
    <xs:field xpath="@model" />
  </xs:key>
  <xs:keyRef name="orderModel" refer="modelName">
    <xs:selector xpath="orders/order/item" />
    <xs:field xpath="@model" />
  </xs:keyRef> 
```

并使`vehicle`元素的`model`属性为 type `ModelList`。`key`应确保其中的模型名称是`vehicles`唯一的，并`keyRef`检查每个订单项目中提到的模型实际上是下面列出的模型之一`vehicles`。这样你实际上根本不需要限制`item/@model`属性的类型，它可能只是一个普通`xs:string`的，因为`keyRef`它将为你强制枚举。

# macros - 如何解决 Visual Studio 2012 中缺少宏的问题

> ID：12974297
> 
> 赞同：6
> 
> 时间：2012-10-19T12:27:31.887
> 
> 标签：macros, visual-studio-2012, envdte, visual-studio-macros

我的组织有极其严格和严格的规则，我们的代码必须遵守才能获得认证和认可。在过去十年左右的时间里，我们开发了近百个 VS 宏来格式化代码、生成注释块、强制执行样式规则等。

我们的宏不是你记录一些鼠标移动的那种；它们都依赖于 EnvDTE* VS 自动化对象。随着 VS 2012 放弃宏，我们甚至不知道我们是否能够升级，而不会对团队造成巨大影响。

我知道 Microsoft 的发展方向是 VS Addins 路线，我愿意调查该路线，但我无法找到有关 VS 插件如何与 Visual Studio 中的活动代码文件交互的代码示例或文档。

例如，这是一个我们一直使用的宏，它将我们的 Try 包装器设计模式应用于所有能够抛出未处理异常的方法

```
''' <summary>
'''  Wraps active method in Try* access wrappers.
''' </summary>
Sub InsertSingleMethodTryWrappers()
    Dim textSelection As TextSelection
    Dim codeElement As CodeElement

    textSelection = DTE.ActiveWindow.Selection

    DTE.UndoContext.Open("Generate Try Wrappers")  'Allow for single Undo operation to rollback all changes

    Try
        codeElement = textSelection.ActivePoint.CodeElement(vsCMElement.vsCMElementFunction)
        If Not (codeElement Is Nothing) Then
            Dim textSelection2 As TextSelection
            Dim codeFunction As CodeFunction
            'Dim codeFunction2 As CodeFunction2
            Dim editPoint As EditPoint
            Dim codeParameter As CodeParameter
            Dim parameters As CodeElements
            Dim codeElement2 As CodeElement
            Dim isVirtual As Boolean = False
            Dim strVirtual As String = String.Empty
            Dim strTypeName As String = String.Empty

            '' Cast the codeElement to codeFunction object
            codeFunction = codeElement

            '' Move cursor to the start of the method
            textSelection.MoveToPoint(codeFunction.GetStartPoint(vsCMPart.vsCMPartHeader))

            '' Should be able to use codeFunction.Kind.ToString to retrieve the function type
            '' vsCMFunctionVirtual if the method is virtual but there is a bug in the API
            '' that returns vsCMFunctionFunction even if the function is virtual (C# parsing bug?)
            ''
            '' vsCMFunction Type
            '' http://msdn.microsoft.com/en-us/library/envdte.vscmfunction(v=vs.80).aspx
            ''
            '' This frustrating bug means that we have to parse the header to determine if virtual
            textSelection.EndOfLine(True)
            If (textSelection.Text.IndexOf("virtual") > 0) Then
                isVirtual = True
                strVirtual = " virtual"
            End If
            textSelection.StartOfLine()

            '' Try not to screw up comments and attributes
            editPoint = GetNoneCommentOrAttribHeaderEditPoint(textSelection)
            If editPoint Is Nothing Then
                MsgBox("Could not find a line above the method that isn't a comment or attribute", _
                       MsgBoxStyle.Critical + MsgBoxStyle.OkOnly, "Error")
                Exit Sub
            End If

            '' Create an EditPoint to inject Try* methods
            'editPoint = textSelection.TopPoint.CreateEditPoint()
            'editPoint.LineUp()  'Move up 1 line
            editPoint.EndOfLine()   'Go to end of line above signature
            editPoint.Insert(Environment.NewLine)   'Insert blank line for cleanliness
            editPoint.Insert(Environment.NewLine)   'Insert blank line for cleanliness
            editPoint.LineUp()  'Move up 1 line

            parameters = codeFunction.Parameters

            Dim strAccess As String : strAccess = GetAccessModifierString(codeFunction.Access) 'Access Modifier
            Dim strName As String : strName = codeElement.Name  'Member Name
            Dim strType As String : strType = codeFunction.Type.AsString    'Type Name

            '' Get the un-qualified object name
            If (strType.IndexOf(".") > 0) Then
                Dim arrType() As String = strType.Split(".")
                strTypeName = arrType(arrType.Length - 1)
            Else
                strTypeName = strType
            End If

            ''' Create parameter type/name arrayList
            Dim arrParams As System.Collections.ArrayList
            arrParams = New System.Collections.ArrayList()

            For Each codeElement2 In parameters
                codeParameter = codeElement2
                arrParams.Add(codeParameter.Type.AsString.Trim & " " & codeParameter.Name.Trim & ", ")
            Next

            Dim strParams As String
            Dim strParamNames As String

            '' Capture a string with parameter names and types and one just of names
            For Each strParam As String In arrParams
                strParams += strParam
                strParamNames += strParam.Split(" ")(1)
            Next

            '' Trim excess comma for members of type void
            If strType = "void" Then
                If Not String.IsNullOrEmpty(strParams) Then
                    If strParams.TrimEnd.EndsWith(",") Then
                        strParams = strParams.TrimEnd()
                        strParams = strParams.Remove(strParams.Length - 1, 1)
                    End If
                End If
            End If

            '' -- Try* swallow methods --
            '' we don't care what the exception is, we just want to know success or failure
            Dim strTrySwallowSignature As String
            Dim strTrySwallowBody As String
            Dim strTryOutParams As String
            Dim strOutDef As String
            Dim strOutSig As String

            '' Members of type 'void' get no out parameters
            If Not strType = "void" Then
                strTryOutParams = "out " & strTypeName & " outObjType"
                strOutDef = "outObjType = null;"
                strOutSig = " out outObjType,"
            End If

            strTrySwallowSignature = vbTab & vbTab & strAccess & strVirtual & " bool Try" & strName & "(" & strParams & strTryOutParams & ")"
            strTrySwallowBody = vbCrLf & vbTab & vbTab & "{" _
                              & vbCrLf & vbTab & vbTab & vbTab & "Exception exception;" _
                              & vbCrLf & vbTab & vbTab & vbTab & strOutDef _
                              & vbCrLf & vbTab & vbTab & vbTab & "return Try" & strName & "(" & strParamNames & strOutSig & " out exception);" _
                              & vbCrLf & vbTab & vbTab & "}"

            '' -- Try* re-throw methods --
            '' We want to know success or failure as well as the exception if it failed
            Dim strTryReThrowSignature As String
            Dim strTryReThrowBody As String

            '' Members of type 'void' only get out exception parameter
            If Not strType = "void" Then
                strTryOutParams = "out " & strTypeName & " outObjType, out Exception exception"
                'strOutDef = "outObjType = new " & strTypeName & "();"
                strOutDef = "outObjType = null;"
            Else
                strTryOutParams = "out Exception exception"
            End If

            strTryReThrowSignature = vbTab & vbTab & strAccess & strVirtual & " bool Try" & strName & "(" & strParams & strTryOutParams & ")"
            strTryReThrowBody = vbCrLf & vbTab & vbTab & "{" _
                              & vbCrLf & vbTab & vbTab & vbTab & "bool result = false;" _
                              & vbCrLf & vbTab & vbTab & vbTab & "exception = null;" _
                              & vbCrLf & vbTab & vbTab & vbTab & strOutDef _
                              & vbCrLf & vbTab & vbTab & vbTab & "try" _
                              & vbCrLf & vbTab & vbTab & vbTab & "{" _
                              & vbCrLf & vbTab & vbTab & vbTab & vbTab & "// insert code here " _
                              & vbCrLf & vbTab & vbTab & vbTab & vbTab & "//result = true; " _
                              & vbCrLf & vbTab & vbTab & vbTab & vbTab & "throw new NotImplementedException();" _
                              & vbCrLf & vbTab & vbTab & vbTab & "}" _
                              & vbCrLf & vbTab & vbTab & vbTab & "catch (Exception e)" _
                              & vbCrLf & vbTab & vbTab & vbTab & "{" _
                              & vbCrLf & vbTab & vbTab & vbTab & vbTab & "exception = e;" _
                              & vbCrLf & vbTab & vbTab & vbTab & "}" _
                              & vbCrLf & vbTab & vbTab & vbTab & "return result;" _
                              & vbCrLf & vbTab & vbTab & "}"

            editPoint.Insert(strTrySwallowSignature)
            editPoint.Insert(strTrySwallowBody)
            editPoint.Insert(vbCrLf & vbCrLf)
            editPoint.Insert(strTryReThrowSignature)
            editPoint.Insert(strTryReThrowBody)
            editPoint.Insert(vbCrLf)

        End If
    Catch Ex As Exception
        MsgBox(Ex.Message)
    Finally
        DTE.UndoContext.Close()
    End Try
End Sub 
```

有人可以指导我了解 VS 2012 插件如何操作活动/打开的代码文件（使用 EnvDTE* 或 2012 年可用的任何对象模型）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T21:52:10.340

事实证明这很简单。原来宏对象模型是 VS 模型的一部分，所以没问题。

[http://msdn.microsoft.com/en-us/library/za2b25t3%28v=vs.110%29.aspx](http://msdn.microsoft.com/en-us/library/za2b25t3%28v=vs.110%29.aspx)

[http://msdn.microsoft.com/en-us/library/ms228776.aspx](http://msdn.microsoft.com/en-us/library/ms228776.aspx)

我应该知道微软不会像那样让我们依赖宏的开发人员置身事外！

# java - 需要帮助在 Tomcat 中设置多个领域

> ID：12974304
> 
> 赞同：3
> 
> 时间：2012-10-19T12:27:47.187
> 
> 标签：java, tomcat, jdbcrealm

我正在尝试在 tomcat 中设置两个领域，但由于某种原因它不允许我这样做。我想使用标准的 UserDatabaseRealm (conf/tomcat-users.xml) 来做管理工作（比如部署 webapps），但我想要一个自定义领域来为特定的 webapp 进行身份验证。

所以，我试着把它放在我的 webapp 的上下文中：

```
<Context>
  <GlobalNamingResources>
    <Resource name="CustomDatabase" auth="Container"
      type="org.apache.catalina.UserDatabase"
      description="User database that can be updated and saved"
      factory="org.apache.catalina.users.MemoryUserDatabaseFactory"
      pathname="/usr/java/apache-tomcat-6.0.35/conf/tomcat-users.xml" 
    />
  </GlobalNamingResources>
  <Realm className="org.apache.catalina.realm.UserDatabaseRealm" 
    resourceName="CustomDatabase"
   />
</Context> 
```

这实际上只是 server.xml 中的内容的副本，并进行了一些更改：

*   名称从 UserDatabase 更改为 CustomDatabase。

*   路径名是绝对路径名（与我用于主领域的相同）。

我总是遇到同样的错误：

```
LifecycleException:  No UserDatabase component found under key CustomDatabase 
```

而且我不知道它在告诉我什么。它在谈论什么组件？

除了上面的上下文，我还尝试了其他一些方法，但它总是给出同样的错误：

*   我尝试使用 GlobalNamingResources 标记包装资源以及是否存在相同的错误。

*   我尝试将 Resource 的 auth 属性更改为 Container 和 Application 并得到相同的错误。

我错过了什么？谷歌的所有帮助主要是人们搞砸了他们的主要领域（我的很好）而不是试图配置第二个领域。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-02-04T11:33:08.273

您可以使用`org.apache.catalina.realm.CombinedRealm`. 从 Tomcat[文档](http://tomcat.apache.org/tomcat-6.0-doc/realm-howto.html)：

```
<Realm className="org.apache.catalina.realm.CombinedRealm" >
  <Realm className="org.apache.catalina.realm.UserDatabaseRealm"
         resourceName="UserDatabase"/>
  <Realm className="org.apache.catalina.realm.DataSourceRealm"
         dataSourceName="jdbc/authority"
         userTable="users" userNameCol="user_name" userCredCol="user_pass"
         userRoleTable="user_roles" roleNameCol="role_name"/>
</Realm> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T17:52:11.383

所以，我没有真正的答案，但我会解释我做了什么。

我无法让第二个 UserDatabaseRealm 工作，但我真的只需要两个领域进行测试，而且类型无关紧要（最终，第二个领域将是 LDAP）。

所以我查看了可用的领域，并为我的次要测试领域选择了一个 MemoryRealm，它的工作原理与它应该有的一样。然后我把它变成了一个 LDAP 领域，它也工作得很好。

所以，对于那些真正需要两个 UserDatabaseRealms 的人，我很抱歉，我没有适合你的解决方案。

注意：很奇怪 UserDatabaseRealm 使用 JNDI 而 JNDIRealm 用于 LDAP（据我所知，不涉及 JDNI）。我确信这只是一些遗留命名问题，但它令人困惑。

# regex - 请VB.net帮助我使用正则表达式

> ID：12974305
> 
> 赞同：0
> 
> 时间：2012-10-19T12:27:54.050
> 
> 标签：regex, vb.net, html-parsing

我以前没有使用过正则表达式...但是我需要解析大约 500 个 url 中的值，并且我需要正则表达式来自动化它。

每个站点包含大约 10 个值，我需要将它们分开到自己的列表中。

1.

```
<td width="78" style="padding-left:9px;" align="left"><a style="font-weight:bold;color:#E93393;" href="/meanings/Example1.html">Example1</a> </td> 
```

2.

```
<td width="78" style="padding-left:9px;" align="left"><a style="font-weight:bold;color:#004EFF;" href="/meanings/Example2.html">Example2</a> </td> 
```

所以，我需要将这两个值分开列表。它应该寻找颜色代码来确定列表值在哪个列表中。

有人可以帮我吗？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T12:30:04.030

**不不不..**

正则表达式不适用于解析 HTML 文件。

HTML 并不严格，其格式也不规则。

使用[htmlagilitypack](http://htmlagilitypack.codeplex.com/)

# java - 用“真实数据”搭建测试系统

> ID：12974308
> 
> 赞同：2
> 
> 时间：2012-10-19T12:28:00.383
> 
> 标签：java, testing, junit, junit4

所以现在我正在使用 JUnit 4，在`@BeforeClass`方法中我设置了重置用户模式或准备示例数据所需的一切。现在，并不是我不喜欢这种方法，而是我发现它非常令人沮丧，原因如下：

*   我正在使用*Parameterized*注释来使用不同的输入数据运行相同的测试。参数化不起作用，`@BeforeClass`因为`@BeforeClass`使用静态方法。

这意味着如果我想保持`@BeforeClass`逻辑，我必须复制测试。我不能使用@After，`@Before`因为这些都会在每次测试之后发生，这将是一个开销。

我在想我可以重构这个单元测试，因为我将编写一个处理测试的抽象类，并为我想尝试的每个组参数编写一个子类，这样我就可以只编写一次测试代码。

我希望您可以从以下起点建议一个更简洁的选项：使用`@Parameterized`，每个参数组只需要运行一次“数据库”方法。

编辑：

这是我的班级没有 BeforeClass 的一个例子

```
RunWith(LabelledParameterized.class)
public class TestCreateCampaign extends AbstractTestSubscriberCampaign {

    public TestCreateCampaign(String label, String apiKey, String userKey,
            int customerId) {
        super(label, apiKey, userKey, customerId);
    }

    @Before
    public void setUp() throws Exception {
        super.setUp();
    }

    @After
    public void tearDown() throws Exception {
        super.tearDown();
    }

    @Parameters
    public static Collection<Object[]> generatedData() {
        return DataProvider.generatedCorrectSubscriberData();
    }

    @Test
    public void testCreateEmailCampaignBothTriggered() {

        // TEST

    }

    @Test
    public void testCreateTextCampaignTriggered() {

        // TEST

    }

    @Test
    public void testCreateTextCampaignTest() {

        // TEST

    }

    // Other Tests

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T12:41:20.943

从参数化测试类的构造函数调用 setup 方法怎么样？

编辑：

好的，我不知道有什么会自动执行此操作，但我认为您可以编写代码`Rule`来执行此操作。您可以`Rule`从头开始执行 extend `ExternalResource`。这就是我认为它会做的事情。

1.  构造函数将采用测试类的一个实例和一个`ExternalResource`实例。
2.  在构造函数中，它会找到包含`@Test`注释的方法列表，并获得计数。它将迭代计数设置为 0。
3.  在该`before`方法中，它将增加迭代计数，如果它在增量之后为 1（或之前为 0），它将调用`before`传递的方法`ExternalResource`。
4.  在该`after`方法中，它将检查迭代计数是否等于测试次数，如果是，则调用`after`传递的方法`ExternalResource`。

您可能需要使用不同的回调类/接口，`ExternalResource`因为`before`和`after`方法是`protected`. 如果你真的想要很酷，你可以在你的规则中定义你自己的`BeforeParameters`和`AfterParameter`注解，它会在传递的实例中寻找那些方法。

如果您开发了它，请将其发布或提交给 JUnit 以供包含。

这是我想出的，没有我想要的那么好：

```
@RunWith(Parameterized.class)
public class TestExample {

private interface BeforeAfter {
    void before();

    void after();
}

public static class Resource extends ExternalResource {

    private final int count;
    private final BeforeAfter ba;
    private int iteration = 0;

    Resource(Object instance, BeforeAfter ba) {
        int localCount = 0;
        for (Method method : instance.getClass().getMethods()) {
            if (method.getAnnotation(Test.class) != null) {
                localCount++;
            }
        }
        this.count = localCount;
        this.ba = ba;
    }

    @Override
    protected void before() throws Throwable {
        if (iteration == 0) {
            ba.before();
        }

        iteration++;
    }

    @Override
    protected void after() {
        if (iteration == count) {
            ba.after();

            iteration = 0;
        }
    }
}

@Parameters
public static Iterable<Object[]> data() {
    return Arrays.asList(new Object[][] { { 3, 0 }, { 4, 1 } });
}

@Rule
public static Resource resource = new Resource(new TestExample(0, 0), new BeforeAfter() {

    @Override
    public void before() {
        System.out.println("setup");
    }

    @Override
    public void after() {
        System.out.println("cleanup");

    }
});

private int fInput;
private int fExpected;

public TestExample(int input, int expected) {

    // System.out.println("Constructor invoked" + fInput);
    fInput = input;
    fExpected = expected;
}

@Test
public void test1() {
    System.out.println("test1 fInput=" + fInput);
}

@Test
public void test2() {
    System.out.println("test2 fInput=" + fInput);
}
} 
```

结果：

```
setup
test1 fInput=3
test2 fInput=3
cleanup
setup
test1 fInput=4
test2 fInput=4
cleanup 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T13:24:34.900

这取决于您要如何设置课程，但您可以为此使用[ClassRule](http://kentbeck.github.com/junit/javadoc/latest/org/junit/ClassRule.html)。[这与TestRule](http://kentbeck.github.com/junit/javadoc/latest/org/junit/rules/TestRule.html)执行相同的工作，但它为每个类而不是每个测试运行一次。这可以与Parameterized和TestRule结合使用，例如：

```
@RunWith(Parameterized.class)
public class TestCreateCampaign {
  @ClassRule
  public static ExternalResource beforeAfterClass = new ExternalResource() {

    @Override
    protected void before() throws Throwable {
      System.out.println("before each class");
    }

    @Override
    protected void after() {
      System.out.println("after each class");
    }
  };

  @Rule
  public ExternalResource beforeAfter = new ExternalResource() {
    @Override
    protected void before() throws Throwable {
      System.out.println("before each test");
    }

    @Override
    protected void after() {
      System.out.println("after each test");
    }
  };

  @Parameters(name = "{index}: fib({0})={1}")
  public static Iterable<Object[]> data() {
    return Arrays.asList(new Object[][] { { 3, 0 }, { 4, 1 } });
  }

  private int fInput;
  private int fExpected;

  public TestCreateCampaign(int input, int expected) {
    fInput = input;
    fExpected = expected;
  }

  @Test
  public void test1() {
    System.out.println("test1 fInput=" + fInput);
  }
} 
```

这会产生以下输出：

```
before each class
before each test
test1 3
after each test
before each test
test1 4
after each test
after each class 
```

这似乎是您正在寻找的。为了减少重复的数量，您当然可以在单独的 java 类中定义 beforeAfterClass 和 beforeAfter。

这些在 JUnit 4.9+ 中可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T06:57:46.490

请参阅[如何使用 Spring Test 在每个案例中加载一次 DBUnit 测试数据，](https://stackoverflow.com/questions/3007425/how-to-load-dbunit-test-data-once-per-case-with-spring-test/9006655#9006655)了解每次测试运行仅初始化一次测试数据的方法。

# internet-explorer-8 - Z-index 在顶部菜单落在左侧菜单后面的 IE8 上不起作用

> ID：12974310
> 
> 赞同：0
> 
> 时间：2012-10-19T12:28:15.813
> 
> 标签：internet-explorer-8, z-index

我在[http://www.spanish-bookworld.com/delete-spanish-books.html上的顶部菜单落后于左手菜单时遇到问题](http://www.spanish-bookworld.com/delete-spanish-books.html)

我已经用于顶部菜单。我为将左侧菜单放在后面所做的一切都没有奏效。

有没有人有这个问题的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T12:38:40.493

我已经对其进行了测试，在这里应该解决什么问题：尝试在您的文件中设置`z-index`“ `#menu li`”，不仅是在`div`，在您的文件中使用“ `!important`”规则`css.css`，即：

```
#menu li {
z-index: 99999 !important;
} 
```

# linq - 实体框架 model.edmx 和多对多关系

> ID：12974312
> 
> 赞同：0
> 
> 时间：2012-10-19T12:28:27.747
> 
> 标签：linq, entity-framework, linq-to-entities

在数据库中，我有 3 个表，用户、组和一个查找表 UserGroup，其中包含 UserID 和 GroupId。

我创建了一个 model.edmx，这允许我： var users = context.User var groups = context.Group 但不为 context.UserGroup 创建对象。

获取组中的所有用户以及用户所属的所有组的语法是什么？

```
var results = from groups in db.Groups.Where(t => t.Users(u => u.UserID ==1))
select groups; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:31:42.553

如果您设置了正确的键，EF 将隐藏您的联结表，并创建一个导航属性以在表之间建立连接

获取用户所属的所有组：

```
var groupResults = db.Groups.Where(g => g.Users.Select(u => g.UserId).Contains(userId)); 
```

并获得所有用户：

```
var userResults = db.Users.Where(u => u.Groups.Select(g => g.GroupId).Contains(groupId)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T14:08:01.600

不会创建联结表。您将获得两个导航集合属性。用户实体中的组和组实体中的用户。

获取组中的所有用户：

```
var usersInGroup = context.Groups.Where(g => g.ID == groupId).SelectMany(g => g.Users); 
```

要获取用户所属的所有组：

```
var groupsOfUser = context.Users.Where(u => u.ID == userId).SelectMany(u => u.Groups); 
```

# jquery - 当fancybox打开时不重新加载页面

> ID：12974313
> 
> 赞同：0
> 
> 时间：2012-10-19T12:28:28.427
> 
> 标签：jquery, timeout, fancybox, reload, fancybox-2

我是法国人，抱歉我的拼写错误...

我有一个包含fancybox 的页面，我想在所有分钟内重新加载此页面，除非打开fancybox。该页面必须在fancybox关闭时再次充电。

我使用这段代码，当打开一个fancybox时，重新加载不会停止，fancybox的内容总是会重新充电。

```
var timeout
$(document).ready(function(){
   timeout = setTimeout('window.location.reload(true);',2000);
   $('.fancybox').fancybox({
      'beforeLoad': function() {if(timeout){clearTimeout(timeout); timeout = null; }},
      'beforeClose': function() {window.location.reload(true);}
   });          
}); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T13:01:57.417

这应该有效。

```
$("<your selector>").fancybox({
    afterClose: function() {
       var timeout = setTimeout('window.location.reload(true);',2000);
    },
    beforeShow:function(){
       if(timeout){ clearTimeout(timeout); timeout = null; }
    }
}) 
```

注：花式盒子的版本是`jquery.fancybox.js?v=2.1.2`

请检查[jsfiddle 链接](http://jsfiddle.net/EWTxv/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T19:37:46.040

以这种方式使用`beforeLoad`并`afterClose`为我工作：

```
function reloadPage(){
 location.reload();
}
$(document).ready(function(){
 var timeOut = setInterval("reloadPage()", 5000);
 $(".fancybox").fancybox({
  beforeLoad: function(){
   clearInterval(timeOut);
  },
  afterClose: function(){
   location.reload();
  }
 });
}); // ready 
```

请参阅[此处的工作演示](http://www.picssel.com/playground/jquery/reloadPagebutFancybox_19oct12.php)。

致敬

# php - 1500 行表，每行包含一个表单 - Ajax 还是其他？

> ID：12974317
> 
> 赞同：3
> 
> 时间：2012-10-19T12:28:46.673
> 
> 标签：php, ajax, forms, performance, html-table

我有一个非常大的 HTML 表，其中包含 1500 行（由 PHP 生成的标记）。每行都有一个 5 元素复选框和一个文本区域。

这是一个示例行：

```
<tr id="abc123">
    <td>abc123</td>
    <td valign="top"><input name="v1" value=1 type="checkbox"></td>
    <td valign="top"><input name="v2" value=2 type="checkbox"></td>
    <td valign="top"><input name="v3" value=3 type="checkbox"></td>
    <td valign="top"><input name="v4" value=4 type="checkbox"></td>
    <td valign="top"><input name="v5" value=5 type="checkbox"></td>
    <td valign="top"><textarea name="notes"></textarea></td>
    <td valign="top"><input type="submit" name="submit"></td>
    </tr> 
```

还有更多的列，但这是重要的部分。

最好的设置方法是什么，以便每 60 秒检查/重绘一次提交按钮？如果行/表单已提交，则提交按钮需要更改为链接。

一次发生这么多写入会导致糟糕的性能吗？我们的服务器可以处理它，但我更关心客户端功能（使用中档或更差的台式机）。

除了将记录拆分到单独的页面（客户对此不感兴趣）之外，是否有更好的方法在单个页面上处理这么多表单？

**更新** 我认为让用户点击他们想要更新的行可能更有意义，然后只会将该行转换为表单。如果一行失去焦点，我会显示一个确认框，这样他们就不会丢失或提交不完整的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T19:07:49.273

1) 将整个表格放在单个表单标签对之间。

2) 使用如下所示的名称标签标识每个复选框或其他元素：

```
checkbox_abc123_1  (value=1)
checkbox_abc123_2  (value=2)
textbox_abc123 (value=foobar) 
```

3) 为每个输入对象添加一个 onClick 或 onBlur 事件。这将是您的 ajax 调用。将 id 标签作为“名称”发送，将输入值作为“值”发送。您将使用这些进行 POST 处理。

4) 在您的 POST 页面上，识别您的输入元素（提示：explode('_',$name);），验证内容，然后写入您的 SQL 表。

您可以使用您的帖子页面为每个表格行上的 div 提供更新，向其他用户宣布该字段已更新。但是，这不会解决为其他用户更新输入对象的问题。

如果您需要回复实际的代码，但这应该会为您指明正确的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T12:43:20.303

客户端应该没有问题，除非您期望特定的限制，否则大多数现代浏览器应该可以轻松应对。这可能需要一些时间，但没问题。

如果您担心性能，请确保您的代码干净且正确嵌套，我们可以说，有效的 html 严格代码，这将有助于客户端呈现页面。

关于时间，你必须使用 javascript 或类似的，这取决于你喜欢什么来检查时间；在javascript中设置计时器并不难。在页面末尾加载脚本，这样它就不会干扰表格的初始呈现。

此外，如果您可以控制服务器，请尝试使用 mod_deflate，如果您不能并且您正在使用 php，请在输出缓冲区中使用 zip，如果您使用任何其他服务器端语言，请尝试使用任何可用的压缩方法。

更新

这是一个非常好的想法，它将大大减少页面传输的重量和渲染时间；您的用户会意识到这一点，而且 DOM 的遍历也将更快、更容易

再见

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T12:45:32.793

尝试使用插件更适合用户[jQuery Pagination](http://tympanus.net/codrops/2009/11/17/jpaginate-a-fancy-jquery-pagination-plugin/)或尝试[DataTable](http://datatables.net/)

# android - 屏幕方向更改后错误的替换片段视图

> ID：12974319
> 
> 赞同：3
> 
> 时间：2012-10-19T12:29:01.233
> 
> 标签：android, fragment, screen-orientation, fragmenttransaction

应用程序具有与父级匹配的框架布局容器的片段活动。用户与碎片 ui 交互，它们相互替换，将 old 放入 backstack，例如：A -> B -> C -> D -> E -> F

当用户改变手机方向时，例如，在fragment D上并想去fragment E，fragment A的视图显示，如果用户在这个fragment A中按下某些东西（通常会去fragment B），fragment F的视图显示。

屏幕方向更改后如何显示片段 E 而不是 A？

应用程序使用最新的 android 支持库，这发生在 android 4.1 模拟器和 android 2.3 手机（未测试其他 android 版本）。

所有片段都有这个 go next 片段方法：

```
public final void showNextFragment(final Fragment frg, final String tag) {
    final FragmentTransaction tr = getFragmentManager().beginTransaction();
    tr.remove(this);
    tr.add(R.id.fragment_container, frg, tag);
    tr.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
    tr.addToBackStack(tag);
    tr.commit();
} 
```

**编辑**

在fragment D上旋转屏幕时，所有旋转正常并显示fragment D的视图。如果用户使用上述方法转到fragment E旋转后，显示的是fragment A的视图而不是E。如果用户**不**旋转手机fragment E显示一般。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-19T12:43:21.147

一种解决方案是将当前标签或片段保留为静态变量。

否则，你想回到屏幕方向上的 A 吗？如果没有，你应该在你的清单中添加这个：

```
<activity android:configChanges="keyboardHidden|orientation" ... 
```

# java - 有谁知道一个包含java中所有本地化国家名称的库？

> ID：12974322
> 
> 赞同：10
> 
> 时间：2012-10-19T12:29:13.520
> 
> 标签：java

> **可能重复：**
> [本地化国家名称](https://stackoverflow.com/questions/3724970/localized-country-names)

是否有任何包含所有以欧洲主要语言本地化的国家/地区的 java 库？

我试过使用`java.util.Locale`，但它不包含所有国家（它缺少一些像圣马力诺、安道尔、阿塞拜疆......）

* * *

编辑

这：

```
for (Locale locale : Locale.getAvailableLocales())
    {
         System.out.println(locale.getCountry() + "  " + locale.getDisplayCountry());
    } 
```

输出这个：（我的语言环境是英语）

```
AE  United Arab Emirates
AL  Albania
AR  Argentina
AT  Austria
AU  Australia
BA  Bosnia and Herzegovina
BE  Belgium
BG  Bulgaria
BH  Bahrain
BO  Bolivia
BR  Brazil
BY  Belarus
CA  Canada
CH  Switzerland
CL  Chile
CN  China
CO  Colombia
CR  Costa Rica
CS  Serbia and Montenegro
CY  Cyprus
CZ  Czech Republic
DE  Germany
DK  Denmark
DO  Dominican Republic
DZ  Algeria
EC  Ecuador
EE  Estonia
EG  Egypt
ES  Spain
FI  Finland
FR  France
GB  United Kingdom
GR  Greece
GT  Guatemala
HK  Hong Kong
HN  Honduras
HR  Croatia
HU  Hungary
ID  Indonesia
IE  Ireland
IL  Israel
IN  India
IQ  Iraq
IS  Iceland
IT  Italy
JO  Jordan
JP  Japan
KR  South Korea
KW  Kuwait
LB  Lebanon
LT  Lithuania
LU  Luxembourg
LV  Latvia
LY  Libya
MA  Morocco
ME  Montenegro
MK  Macedonia
MT  Malta
MX  Mexico
MY  Malaysia
NI  Nicaragua
NL  Netherlands
NO  Norway
NZ  New Zealand
OM  Oman
PA  Panama
PE  Peru
PH  Philippines
PL  Poland
PR  Puerto Rico
PT  Portugal
PY  Paraguay
QA  Qatar
RO  Romania
RS  Serbia
RU  Russia
SA  Saudi Arabia
SD  Sudan
SE  Sweden
SG  Singapore
SI  Slovenia
SK  Slovakia
SV  El Salvador
SY  Syria
TH  Thailand
TN  Tunisia
TR  Turkey
TW  Taiwan
UA  Ukraine
US  United States
UY  Uruguay
VE  Venezuela
VN  Vietnam
YE  Yemen
ZA  South Africa 
```

* * *

# 在您点击“关闭”之前，请阅读以下问题：

这个问题不是候选人重复问题的欺骗！另一个问题与java没有任何关系！它甚至还有objective-c 代码！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-19T13:14:05.543

您可以使用`Locale.getISOCountries()`. 例如，以下代码打印 ISO 3166 中定义的所有国家/地区的德语名称。

```
Locale locale = Locale.GERMAN;      
for (String country : Locale.getISOCountries())
{
    System.out.println(new Locale("", country).getDisplayCountry(locale));
} 
```

这使用`LocaleNames_xx.properties`资源包。[这是 JDK 存储库中的默认版本。](http://hg.openjdk.java.net/jdk/jdk14/file/57148c79bd75/src/java.base/share/classes/sun/util/resources/LocaleNames.properties#l868)

**2020 年5**月 13 日更新：**[Javadoc](https://docs.oracle.com/en/java/javase/14/docs/api/java.base/java/util/Locale.html#getDisplayCountry())声明这将返回`a name for the locale's country that is appropriate for display to the user.`虽然有一些重叠，但上述代码并不总是返回 ISO-3166 名称。有一个[JDK 错误报告](https://bugs.java.com/bugdatabase/view_bug.do?bug_id=JDK-8245072)讨论这个问题。有关更多详细信息，请参阅下面的评论。**

# debugging - 使用 NetBeans Maven 项目调试 NetBeans 模块

> ID：12974328
> 
> 赞同：1
> 
> 时间：2012-10-19T12:29:45.180
> 
> 标签：debugging, maven, netbeans

我在 NetBeans IDE 中加载了一个使用 Maven 的 NetBeans 模块项目。我需要调试模块。当我按下调试按钮时，我收到以下错误消息：

> IDE 需要定义 ${netbeans.run.params.ide} 才能运行此操作。目前您项目的插件配置不解释此变量。调整 D:\mypath\pom.xml 以使用它定义？

在我的 pom 中，我没有设置附加参数标签，但我有：

```
<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <netbeans.run.params.ide></netbeans.run.params.ide>
    <netbeans.run.params>${netbeans.run.params.ide}</netbeans.run.params>
</properties> 
```

甚至 IDE 中的 pom 导航器也显示该属性在那里。所以我的问题很简单。到底是什么导致了这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T14:50:12.553

尽管审问比我聪明得多的人，但我已经找到了答案。沿着这条线的某个地方，有些东西增加了这条线

```
<netbeans.run.params></netbeans.run.params> 
```

到我的 ~home/.m2/settings.xml 文件。当 IDE 尝试设置它时，它会覆盖该属性。

# email - 包含链接时从我的网站发送的邮件会转到 gmail 垃圾邮件文件夹

> ID：12974329
> 
> 赞同：0
> 
> 时间：2012-10-19T12:29:46.187
> 
> 标签：email, hyperlink, gmail, spam

每当我尝试从我的网站发送邮件以进行电子邮件验证时，垃圾邮件文件夹中都会收到相同的邮件。我注意到收件箱中收到了普通邮件，但每当我尝试包含一个普通的 http 链接 [http://abcd.in/abcd/verify.php?key=2f27feb552c83c6c65b9bfc4d799e775] 时，邮件就会进入垃圾邮件文件夹。无法指出发生这种情况的原因。请帮我解决这个问题。谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:36:25.537

根据经验，我知道当超链接末尾带有字母数字参数时，垃圾邮件分数会受到影响。我建议尝试将 URL 重新格式化为：

```
http://abcd.in/abcd/f27feb552c83c6c65b9bfc4d799e775/verify.php 
```

`Regex`并使用 a或`Split(`)提取参考

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T12:39:31.963

*   您的外发邮件服务器是否配置为接收邮件？
*   您是在使用具有正确设置的正确邮件服务器，还是使用一些批量邮件发送无效的邮件？
*   您的邮件是否使用真实的发件人地址发送？我不是指您可以在软件中添加的标头来源，而是 sendmail 正在使用的协议来源
*   您是否为您的邮件服务器设置了域密钥/dkim？
*   标头或来自不同域地址的协议？他们是否设置了允许您的邮件服务器的域密钥？
*   您的邮件服务器在反向查找时是否具有相同的域名？
*   您的邮件服务器是否提供为他们发送的用户接收邮件？
*   您的虚拟主机是否使用智能继电器？他们会重写 from: 地址吗？
*   或者您是否使用内部邮件地址发送邮件？

# c - 读取文件时忽略注释

> ID：12974330
> 
> 赞同：0
> 
> 时间：2012-10-19T12:29:49.493
> 
> 标签：c

我意识到这是一个非常简单的问题，我希望能够通过在互联网上搜索找到答案，但我做不到。我想做的就是读入一个文件，但忽略以散列开头的注释。所以

```
FILE *fp_in;
if((fp_in = open("file_name.txt","r")) ==NULL) printf("file not opened\n");
const int bsz = 100; char buf[bsz];
fgets(buf, bsz, fp_in);  // to skip ONE line
while((fgets(buf,bsz,fp_in))! ==NULL) {
  double x,y,x;
  sscanf(buf, "%lf %lf %lf\n", &x,&y,&z);
  /////allocate values////
} 
```

所以跳过文件中的 1 行是可以的，但我有几行文件，前面有一个我需要跳过的哈希键。有人可以帮我解决这个问题，我似乎找不到答案。干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:32:09.743

添加`if (buf[0] == '#') continue;`到循环的开头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T12:32:37.987

如果注释标记是该行中的第一个字符，

```
while((fgets(buf,bsz,fp_in))! ==NULL) {
  if (buf[0] == '#') continue;
  double x,y,x;
  sscanf(buf, "%lf %lf %lf\n", &x,&y,&z);
  /////allocate values////
} 
```

会忽略注释行。如果不是那么简单，就没有办法避免扫描该行以获取评论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T12:33:33.080

```
FILE *fp_in;
int chr;
if((fp_in = fopen("file_name.txt","r")) == NULL){
   printf("File not opened\n");
   exit(1);
}

while((chr = fgetc(fp_in) != EOF){
    if(chr == '#'){
       while((chr = fgetc(fp_in)) != '#' || (chr != EOF)); /*skip*/
    }
  //do the processing.
} 
```

# java - 在 fa_IR 语言环境中显示数字

> ID：12974331
> 
> 赞同：4
> 
> 时间：2012-10-19T12:29:56.453
> 
> 标签：java, numbers, locale

我正在尝试在`fa_IR`语言环境中显示数字。
我正在使用这段代码：

```
NumberFormat.getNumberInstance(new Locale("fa","IR")).format(myNum); 
```

但这会打印英文 ( `en_US`) 数字。
如何在 Java 的特定语言环境中显示数字？

* * *

示例：
例如，如果`myNum`是`12`输出应该是`۱۲`

* * *

编辑：
似乎`java.text.NumberFormat`不支持`fa_IR`语言环境（？）。
改用`com.​ibm.​icu.​text.​NumberFormat`，解决问题！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-04-15T06:12:51.317

如您所知，Oracle（或者最好说*Java 编程语言*）不直接支持波斯语，为了获得波斯语（或阿拉伯语）数字格式，您可以使用以下代码：

```
NumberFormat numberFormat = NumberFormat.getNumberInstance(new Locale.Builder().setLanguageTag("ar-SA-u-nu-arab").build());
System.out.println(numberFormat.format(1234567890)); 
```

输出将是这样的： `۱،۲۳۴،۵۶۷،۸۹۰` 正如您所看到的，通过使用这种代码，您的输出编号不仅将采用波斯风格，而且其每三个数字将被分组并由**“，”**字符分隔。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-12-05T08:32:03.990

试试这个代码：

```
NumberFormat nf = NumberFormat.getNumberInstance(new Locale("fa"));
System.out.println(nf.format(1234567890)); 
```

输出：

```
۱۲۳٬۴۵۶٬۷۸۹ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-14T07:22:46.570

尝试这个：

```
String.format(new Locale("fa"), "%d", 123456) 
```

# yii - 如何将事件绑定到我的 gridview 代码（从 CGridView 扩展）

> ID：12974336
> 
> 赞同：1
> 
> 时间：2012-10-19T12:30:02.787
> 
> 标签：yii

我写了一个类 MyGridView 从 CGridView 扩展。
MyGridView会在表头自动生成两个按钮，一个是pdf图标，另一个是excel图标。但是如何将事件绑定到这两个图标？这样我就可以使用我的代码根据 dataprovider 和列为这个 CGridView 生成 PDF 或 EXCEL。

PDF导出代码和EXCEL导出代码都准备好了，就是不知道怎么绑定Class的服务端事件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T13:59:02.093

这很大程度上取决于您生成 PDF 和 EXCEL 文件的代码，有几种方法可以“绑定”这些按钮以生成文件。

1.  在首先呈现网格视图的同一操作中
2.  使用生成 CDataProvider 的相同代码库的不同操作。

对于第一种情况，您可以将参数传递给告诉它生成相应文件的操作：

```
<?php 
public function actionIndex()
{
  //Code base to generate the CActiveData provider.

  //Check if we are asking for the PDF version
  if(isset($_GET["pdf"])){
    //Your code to generate the PDF
  }elseif (isset($_GET["excel"])) {
    //Your code to generate the EXCEL
  }else{
    //render the view with the Grid
  }
}

 ?> 
```

然后在您的 MyGridClass 中，只需将您的按钮指向相应的 url：

```
//For the pdf
Yii::app()->controller->createUrl('', array('pdf' => '1'));
//For the excel
Yii::app()->controller->createUrl('', array('excel' => '1')); 
```

如果需要，您可以将其调整为具有 2 个单独的操作。

# c++ - 多少预编译的头文件会影响 mfc？

> ID：12974338
> 
> 赞同：0
> 
> 时间：2012-10-19T12:30:16.140
> 
> 标签：c++, mfc

我在 VC++ 2010 中有一个 C++ 项目，我在没有预编译头文件的情况下启动它。它工作正常，但是当我向它添加 MFC 多线程时，它开始在 afxmt.h 中给出异常。当我在另一个带有预编译头文件的项目中测试包含 afxmt.h 时，它可以正常工作。

问题是，我如何让 MFC (afxmt.h) 在没有预编译头文件的项目上工作？或者我应该把它改成一个带有预编译头的？

编辑：

这些是例外情况：

```
First-chance exception at 0x789394ea (mfc100ud.dll) in Quick_Test.exe: 0xC0000005: Access violation reading location 0x00000000.
Unhandled exception at 0x77b015de in Quick_Test.exe: 0xC0000005: Access violation reading location 0x00000000. 
```

这些发生在空项目（没有预编译头文件）中。代码是：

```
#include "afxmt.h" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:53:48.697

默认情况下，预编译的头文件是 stadfx.h，其中包含其他几个。如果您不使用预编译头文件，则需要手动包含包含您在代码中使用的所有函数声明的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T12:42:32.007

使用预编译头文件的项目会自动插入 #include afxmt.h; 进入每个源文件的编译过程。如果您不使用预编译头文件，则需要将该 #include 添加到每个需要该头文件的源文件中。

# php - PHP：VM guest 上的 Zend Server，主机上的 Zend Studio，调试很慢

> ID：12974340
> 
> 赞同：1
> 
> 时间：2012-10-19T12:30:24.800
> 
> 标签：php, virtualbox, remote-debugging, zend-studio, zend-server

我正在运行以下配置：主机是 MacOSX Lion 系统，在 Oracle VirtualBox 环境中运行来宾 Debian 6 服务器。

Debian 服务器运行 Zend 服务器。主机安装了 Zend Studio。源代码位于客户机上，其文件夹通过 samba 与主机共享。

在 Zend Studio 中，我使用连接的 samba 共享目录添加了“来自现有源”的项目。调试工作，但真的很慢，几乎无法使用。

我已经尝试将 samba 守护程序绑定到虚拟框中的仅主机网络接口，并且我还尝试在本机 VirtualBox 共享文件夹中找到源。尽管消息来源与zend studio一起在主机上撒谎，但我注意到速度没有变化。

我尝试搜索谷歌，但似乎没有人有类似的配置，我想知道其他人如何在虚拟机中使用 zend 服务器安装。

编辑：虚拟机通过 VirtualBox 中的网桥设置连接到主机。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T15:15:18.287

我尝试的最后一件事是创建一个远程同步项目，这意味着本地文件与来宾系统同步。文件映射已设置，但没有任何改变。调试仍然很慢。

解决方案是：Zend Studio 将我本地 tun0 设备的 IP 地址添加到 Preference | PHP | 调试 | 已安装的调试器 | Zend 调试器 | 配置使请求可能通过 VPN 隧道。从配置中删除此 IP 地址后，一切正常。

# mercurial - 在 Mercurial 中推送/拉取特定文件/文件夹

> ID：12974344
> 
> 赞同：1
> 
> 时间：2012-10-19T12:30:46.553
> 
> 标签：mercurial

我（仍在）尝试将我们公司的 SVN 完全迁移到 HG。在大多数情况下，我都成功了，但我们遇到了一个问题。

我们的代码库有 30 多个不同的项目，每个项目都在其文件夹中。

我被多次询问如何提交然后将特定文件推送到我们的中央存储库，而不是被迫在任何地方提交所有内容然后推送它，这当然很烦人。不能只提取特定项目也是一件麻烦事。

有没有办法像我们以前在 SVN 中那样处理这个问题？我们可以只提交我们想要的东西而不是所有东西，并且只更新必要的东西。

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T17:38:55.960

SVN 和 Mercurial 之间的一个主要区别是 Mercurial 中的每个项目都应该有一个存储库。

您可以使用 convert 扩展将您的存储库更改为多个存储库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T02:21:37.013

就像 Steve Kaye 说的那样，您应该为每个项目创建一个 repo，但您可能还想创建一个主 repo 并将所有项目作为[子repos 包含](http://mercurial.selenic.com/wiki/Subrepository)这将允许类似 svn 的行为来获取所有内容的副本。

# jsf - SelectOneMenu 只显示对象而不是应该显示的内容

> ID：12974345
> 
> 赞同：0
> 
> 时间：2012-10-19T12:30:47.483
> 
> 标签：jsf, primefaces

我有一个加载BD列表的selectOneMenu，调试可以验证所有步骤都是正确的，除了它在selectOneMenu中显示值的时间。在页面上出现对象名称“JanelaPortabilidade @ 7437”，而不像字符串。

我的代码：

```
public List<SelectItem> listarHoraJanela(DateSelectEvent event) {  

        dataF = event.getDate();  
        Calendar dataAux = new GregorianCalendar();               
        dataAux.setTime(dataF);   

        //Corrigir  
        if (listaHoraJanela == null) {  

            listaHoraJanela = new ArrayList<JanelaEAPortabilidade>();  
            listaHoraJanela = consultaJPortabilidade.listarHoraJanela(dataAux);  
            listSelectHoraJ.add(new SelectItem("", ""));              

            for (JanelaEAPortabilidade horaJ : listaHoraJanela) {  
                String dataFormat = String.format("%02d",horaJ.horIniJanela.get(Calendar.HOUR_OF_DAY));  
                System.out.println(dataFormat);//So here is ok, print in console correct string 
                listSelectHoraJ.add(new SelectItem(horaJ.getIdtJanela(),dataFormat));  

            }  
        } 
```

xhtml:

```
<h:outputText value="Hora da Janela:" for="horaJanela" />  
<h:selectOneMenu value="#{bean.codHoraJanela}" id="horaJanela"         
    rendered="#{bean.type == 'Fixo'}" >  
<f:selectItems value="#{bean.listaHoraJanela}" /> 
```

会是什么？我肯定错过了什么。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T13:24:24.697

我很惊讶代码甚至可以工作。如果我没有错过任何东西，代码应该抛出一个`NullPointerException`. 在您发布的 JSF`DateSelectEvent`中，没有创建一个，而是在没有任何参数的情况下调用该方法。因此`DateSelectEvent`，Java 方法中的`NULL`.

您看到的输出是对象`toString()`方法的结果。那里表示的对象可能来自`codHoraJanela`托管 bean 中的方法。修复`listarHoraJanela`返回对象列表的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T15:14:08.310

您需要做的是使用 f:selectItems 的 itemLabel 和 itemValue 属性。这是来自 PrimeFaces 网站的示例（来自代码的 pojo 部分的 http://www.primefaces.org/showcase-labs/ui/selectOneMenu.jsf）：

```
<f:selectItems value="#{autoCompleteBean.players}" var="player" itemLabel="#{player.name}" itemValue="#{player}"/> 
```

itemLabel 将显示在下拉列表中， itemValue 将返回（在您的示例中为 #{bean.codHoraJanela} ）。

# django - Django 查询集和 select_related()

> ID：12974352
> 
> 赞同：1
> 
> 时间：2012-10-19T12:31:20.130
> 
> 标签：django, django-queryset

我有一个关于 django 查询集和 select_related 的小问题。

使用此模型：

```
class DeviceGroup(models.Model):
  name = models.CharField(max_length=255, unique=True)
  owner = models.ForeignKey(User)

class Device(models.Model):
  name = models.CharField(max_length=255)
  address = models.GenericIPAddressField()
  port = models.IntegerField()
  group =    models.ForeignKey(DeviceGroup)

class Sensor(models.Model):
  device = models.ForeignKey(Device) 
```

我想得到一个像这样的列表：

```
- group 1
  - device 1
  - device 2
  - device 3
    -sensor 1
- group 2
- group 3
  - device 4
  - device 5
    - sensor 2 
```

我已经阅读了有关 select_related() 的文档，但我不知道该怎么做，因为我必须开始我的查询组原因，它直接链接到登录用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:35:57.810

如果您想在 Django 模板中以这种方式呈现它，您可能想要使用`regroup`： [https ://docs.djangoproject.com/en/dev/ref/templates/builtins/#regroup](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#regroup)

新文档稍微有点模糊，我发现旧文档版本很容易理解（例如来自[https://docs.djangoproject.com/en/1.3/ref/templates/builtins/#regroup](https://docs.djangoproject.com/en/1.3/ref/templates/builtins/#regroup)）：

```
{% regroup people by gender as gender_list %}

<ul>
{% for gender in gender_list %}
    <li>{{ gender.grouper }}
    <ul>
        {% for item in gender.list %}
        <li>{{ item.first_name }} {{ item.last_name }}</li>
        {% endfor %}
    </ul>
    </li>
{% endfor %}
</ul> 
```

在你的情况下：

从视图.py

```
group = Group.objects.all() 
```

模板.html

```
{% regroup groups by device as device_list %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T13:57:10.710

是否可以优化或更改我的模型。如果我无法查询它，那可能是模型问题而不是查询集问题:)

# php - 理论：关于php、mysql、逗号分隔值

> ID：12974355
> 
> 赞同：0
> 
> 时间：2012-10-19T12:31:22.177
> 
> 标签：php, mysql

我有一个包含员工的数据库。列是名字，姓氏，部门，内部编号等。

至于今天，它只是一个组织的数据库，但将来我想将来自其他相关组织的员工添加到这个数据库中。

正确的方法是什么：

1.  向第一个表添加另一个字段？
2.  要创建另一个具有 3 个字段的表：id、organization_name、employees（在此字段中，我会将第一个表中的 id 的逗号分隔值放在哪里）？

如果选择第二个答案，当更新查询将从不同帐户同时执行到同一组织时会发生什么。例如：我将向组织“警察”添加一个 ID 为 55 的用户，同时另一位管理员将向同一组织添加一个 ID 为 65 的用户。在这种情况下，是否存在错误或数据的可能性-损失 ？？？

如果有人以前遇到过这种问题，我真的很想读一读.. 谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T12:33:59.917

如果组织只是对用户进行分组的数字，那么我建议将它们放入员工表中。但是，如果您有更多关于组织的信息（例如名称、地址..），则为该组织创建一个新表，并将相应组织的主键保存在员工表中。

# jquery-validate - jquery 验证：我想在按下重置按钮时重置验证

> ID：12974356
> 
> 赞同：0
> 
> 时间：2012-10-19T12:31:22.840
> 
> 标签：jquery-validate

```
<script type="text/javascript">
            /* <![CDATA[ */
            jQuery(function(){
                jQuery("#ValidNumber").validate({
                    expression: "if (!isNaN(VAL) && VAL) return true; else return false;",
                    message: "Should be a number"
                });
                jQuery("#Email").validate({
                    expression: "if (VAL.match(/^[^\\W][a-zA-Z0-9\\_\\-\\.]+([a-zA-Z0-9\\_\\-\\.]+)*\\@[a-zA-Z0-9_]+(\\.[a-zA-Z0-9_]+)*\\.[a-zA-Z]{2,4}$/)) return true; else return false;",
                    message: "Should be a valid Email id"
                });
                jQuery("#ValidNumber").validate({
                    expression: "if (VAL > 100) return true; else return false;",
                    message: "Should be greater than 100"
                });
                jQuery("#Mobile").validate({
                    expression: "if (VAL.match(/^[9][0-9]{9}$/)) return true; else return false;",
                    message: "Should be a valid Mobile Number"
                });
            });
            /* ]]> */
        </script> 
```

实际上，这是我的 jquery 脚本来回答我的问题，当我按下表单中的重置按钮时，如何重置验证以及文本字段，其中涉及的过程是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T08:14:39.833

当您将验证代码捆绑到一个验证调用中时，如下所示：

```
window.validator = $('form#your_formid').validate({
rules: {
    validNumber: {
        expression: "if (!isNaN(VAL) && VAL) return true; else return false;"
    },
    email: {
        required: true,
        email: true
    },
    // ...
},
messages: {
    validNumber: {
        expression: 'Should be a number'
    },
    email: {
        required: 'Fill in your email,
        email: 'Valid email please'
    }
} 
```

当您单击重置按钮时，您可以在 de validate 对象上调用 resetForm

```
window.validator.resetForm(); 
```

# objective-c - 无法调整 UIView 的大小

> ID：12974358
> 
> 赞同：0
> 
> 时间：2012-10-19T12:31:34.367
> 
> 标签：objective-c, ios, xcode, uiview

我正在使用 xcode 4.5（以防有任何区别）和 Storyboard，我正在尝试做一些看似非常简单但没有任何运气的事情。在我的故事板视图中，我放置了一个 UIView 组件，正如您在此处的图片中看到的那样[http://www.shopow.co.uk/assets/storyboard-view.png](http://www.shopow.co.uk/assets/storyboard-view.png)其中绿色部分是高度为 100 的 UIView

在 viewDidLoad 方法中，我添加了以下代码

```
NSLog(@"View Height: %f", self.testView.bounds.size.height);

CGRect viewFrame = self.testView.frame;
CGSize newSize = CGSizeMake(viewFrame.size.width, 300);
viewFrame.size = newSize;
self.testView.frame = viewFrame;

NSLog(@"View Height: %f", self.testView.bounds.size.height); 
```

从我读到的关于调整大小的内容中，我假设绿色部分的大小调整为 300 高，但是尽管日志窗口中的输出显示以下内容，但这并没有发生

```
2012-10-19 13:05:28.015 TableTest[54318:c07] View Height: 460.000000
2012-10-19 13:05:28.016 TableTest[54318:c07] View Height: 300.000000 
```

注意初始高度是 460 而不是 100，这可能意味着什么！

iOS 模拟器显示了这个[http://www.shopow.co.uk/assets/simulator-view.png](http://www.shopow.co.uk/assets/simulator-view.png)

据我所知，我必须忽略一些明显的事情，这没有按预期工作。任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T12:39:47.433

我不确定它是否能解决你的问题，但你真的应该调整你的视图大小`viewWillAppear`而不是`viewDidLoad`.

`viewDidLoad`字面意思是它所说的“视图已加载”。但是，此时您的 nib 可能没有按照您的预期设置视图。

作为测试，请尝试在两者中记录以下`viewDidLoad`内容`viewWillAppear`

> NSLog(@"frame: %@", NSStringFromCGRect(self.view.frame));

您应该看到，在这两种方法中，您都会得到不同的结果。该`viewWillAppear`方法更可能是正确的，因为视图已设置好并准备好呈现。

我个人并没有那么多地使用 Interface Builder，因为它会导致比我能处理的更令人头疼的问题，但也许您设置了自动调整大小的蒙版或弹性约束，这会影响您的视图尺寸？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T12:43:07.607

就像@CaptainRedmuff 说的那样，你用错误的方法调用它。`viewDidLoad`在加载视图后调用，这意味着已经设置了框架。您正在寻找的方法是`loadView`, as`viewWillAppear:animated`和`viewDidAppear:animated`are 被调用 after `viewDidLoad`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-27T13:49:18.340

OP并不清楚他是如何解决的。以防其他人遇到此问题。

如果您的视图显示的布局与您在情节提要中看到的布局相同，尽管您正在以某种方式以编程方式调整/更改其属性，这是因为自动布局正在造成严重破坏。

只需选择要以编程方式更改的视图，然后转到“属性”窗格中的“文件检查器”。取消选中使用自动布局旁边的复选框。再次运行，你会看到你的问题神奇地消失了。

# c# - 将当前 url 与预定 url 路径进行比较

> ID：12974363
> 
> 赞同：0
> 
> 时间：2012-10-19T12:31:57.030
> 
> 标签：c#, asp.net, regex

如何检查当前路径是否为以下路径之一

```
http://sitename/dirname3/file1.aspx
http://sitename/dirname3/myfile.aspx 
```

...

使用正则表达式。

我知道如何获取当前路径，即

```
string currentUrl = HttpContext.Current.Request.Url.AbsoluteUri; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T12:34:42.647

为什么要使用正则表达式，而不仅仅是例如

```
HttpContext.Current.Request.Url.AbsoluteUri.StartsWith(pathToCheck); 
```

?

# c++ - c++中的向量这么慢吗？

> ID：12974365
> 
> 赞同：6
> 
> 时间：2012-10-19T12:32:00.603
> 
> 标签：c++, algorithm, vector

我正在制作一个解决此问题的程序：http: [//opc.iarcs.org.in/index.php/problems/BOOKLIST](http://opc.iarcs.org.in/index.php/problems/BOOKLIST)

我使用向量的唯一地方是：

```
for(int i =0;i < total_books; i++){
    int temp;
    cin >> temp;
    books_order.push_back(temp);
} 
```

和

```
for(int i = 0;i < total_entries; i++){
    int index;
    cin >> index;
    index--;
    cout << books_order[index] << endl;
    books_order.erase(books_order.begin()+index);
} 
```

（这是我的完整代码：[http](http://cpaste.org/1377/) ://cpaste.org/1377/ ）

我从向量中使用的唯一函数是vector::erase、vector::push_back 和vector::begin。对于大型输入，我的代码花费的时间超过 3 秒（这是该问题的时间限制），但是当我删除向量函数时，它运行得更快（但当然给出了错误的答案）

我知道在这个问题中使用向量是错误的，而且我的算法很慢，但我不明白为什么它很慢。

如果您知道为什么我使用的功能很慢，请向我解释。谢谢你。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-19T12:36:46.563

> 我从向量中使用的唯一函数是vector::erase、vector::push_back 和vector::begin

我会说这是你的问题。[`vector::erase`](http://www.cplusplus.com/reference/stl/vector/erase/)就是`O(n)`，其他都是常数时间，应该不会导致在线判断问题的效率问题。避免擦除方法。

但是，一般来说，如果您事先知道数组的大小，我只会使用一个简单的数组。如果您能提供帮助，请不要增加任何不必要的开销。

要解决您链接到的问题，请考虑使用[set](http://www.cplusplus.com/reference/stl/set/)：它的擦除方法是`O(log n)`，它的插入方法也是。如果您需要随机删除，那通常是您应该使用的。

**编辑：**我忘记了 C++ 也有[优先级队列](http://www.cplusplus.com/reference/stl/priority_queue/)，所以也要研究一下。由于您只关心这里的最大值，因此它可能比集合更快，尽管它们都具有相同的理论复杂性（堆可以**检索**中的最小值/最大值`O(1)`，但删除它，您必须为这个问题做的是`O(log n)`）在这种情况下，任何一个都应该可以正常工作。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-19T12:36:32.867

IMO 罪魁祸首是[`vector::erase`](http://en.cppreference.com/w/cpp/container/vector/erase)因为它会在移除一个元素后移动所有元素。所以除非你总是删除最后一个元素，否则它可能会很慢。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-19T12:35:37.747

除非您已调用将向量的大小调整为您拥有的元素数量，否则每次新大小超过向量容量时`reserve`，调用都会重新分配内存。`push_back`考虑使用`reserve`为您的元素分配足够的内存，您应该会看到性能加速，特别是在向量很大的情况下。还要注意有关使用的其他答案`erase`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-19T12:38:48.077

您的问题是“擦除”的调用。如果您在[此处](http://www.cplusplus.com/reference/stl/vector/erase/)查看文档，您会注意到：

> 因为向量保持数组格式，擦除向量末端以外的位置也会将擦除段之后的所有元素移动到它们的新位置，这可能不像在其他类型的序列容器（deque，list）中擦除那样有效.

从末尾运行循环或在循环后擦除。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-19T12:36:13.550

从向量中间移除元素（带有`vector::erase`）很慢。这是因为必须向下移动向量的所有较高元素以填充您已删除的元素留下的空白。

所以这不是向量很慢的情况，而是你的算法很慢，因为你选择了不合适的数据结构。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-19T12:36:14.033

如果您事先知道向量中有一定数量的元素，则可以保留足够的空间来包含所有内容，以节省向量内空间的重新分配：

```
books_order.reserve(total_books)
for(int i=0 ;i < total_books; ++i){
    int temp;
    cin >> temp;
    books_order.push_back(temp);
} 
```

然而，这不是这里的问题，我敢肯定，如果你分析你的代码，你会看到使用带来的巨大开销`.erase()`。从向量中间移除元素很慢，因为向量是如何实现的，它需要移动所有元素的一部分，即被移除的元素。考虑使用不同的数据结构，例如`std::array`代替。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-19T12:38:08.733

你真的需要一个向量来实现你正在做的事情吗？

您必须牢记向量是如何工作的：它们本质上是动态数组，当您在其中添加更多项目时，它们会调整大小。调整向量的大小是一个 O(n) 操作（其中 n 是向量中的项目数），因为它分配新内存并将项目复制到新向量。

[您可以在此处](http://www.cplusplus.com/reference/stl/vector/)阅读有关向量擅长的内容。

我建议改用标准数组——这似乎完全合理，因为您已经知道总共有多少元素（即`total_books`）

# grails - Grails 参数映射为 java.util.HashMap

> ID：12974368
> 
> 赞同：1
> 
> 时间：2012-10-19T12:32:11.060
> 
> 标签：grails, request, httprequest, params, grails-2.0

在我的 grails 项目中，我可以在应用程序级别使用参数映射（GrailsParameterMap 的对象）作为 java.util.HashMap 吗？

我想这样做是为了使用 java.util.HashMap 的 Serializability。我可以`params as java.util.HashMap`在代码中的任何地方使用。但是我怎样才能在应用程序级别实现这一点？

我正在使用 grails 1.3.7

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T14:35:09.783

好吧，按照@Gregg 的建议，将数据从参数映射中提取到一个对象中，您可以这样做：

```
Map paramsMap = new HashMap()

params.each {key, value ->
  paramsMap.put(key, value)
} 
```

并将这个 HashMap 保存在会话中。我希望它有所帮助。

# scala - 如何分组分组？

> ID：12974369
> 
> 赞同：0
> 
> 时间：2012-10-19T12:32:16.500
> 
> 标签：scala, group-by

我需要通过 a 进行映射`List[(A,B,C)]`以生成 html 报告。具体来说，一个

```
List[(Schedule,GameResult,Team)] 
```

Schedule 包含一个 gameDate 属性，我需要对其进行分组以获得

```
Map[JodaTime, List(Schedule,GameResult,Team)] 
```

我用来显示 gameDate 表行标题。很简单：

```
val data = repo.games.findAllByDate(fooDate).groupBy(_._1.gameDate) 
```

现在棘手的一点（对我来说）是，如何进一步细化分组以便能够通过游戏结果成对映射？澄清一下，每个 GameResult 包含一个团队的游戏“版本”（即得分、位置等），与对手团队共享一个公共的 Schedule gameID。

基本上，我需要在一行上显示游戏结果结果：

```
3 London Dragons vs. Paris Frogs 2 
```

在 gameDate 上分组让我做类似的事情：

```
data.map{case(date,games) =>
  // game date row headers
  <tr><td>{date.toString("MMMM dd, yyyy")}</td></tr>

  // print out game result data rows
  games.map{case(schedule,result, team)=>
    ...
    // BUT (result,team) slice is ungrouped, need grouped by Schedule gameID
  }
} 
```

在现有应用程序（PHP）的旧版本中，我曾经

```
for($x = 0; $x < $this->gameCnt; $x = $x + 2) {...} 
```

但我更喜欢引用变量名，而不是稍后回来的 wtf-is-that-inducing：

```
games._._2(rowCnt).total games._._3(rowCnt).name games._._1(rowCnt).location games._._2(rowCnt+1).total games._._3(rowCnt+1).name 
```

也许 zip 或 double up for(t1 <- data; t2 <- data) yield(?) 或其他完全可以解决问题的方法。无论如何，有一个简洁的解决方案，只是现在不来找我......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T17:26:04.477

好的，来自 Régis Jean-Gilles 的灵魂：

```
val data = repo.games.findAllByDate(fooDate).groupBy(_._1.gameDate).mapValues(_.groupBy(_._1.gameID)) 
```

你说它不正确，也许你没有正确使用它？结果中的每个 List 都是一对具有相同 GameId 的游戏。你可以这样处理 html：

```
data.map{case(date,games) =>
  // game date row headers
  <tr><td>{date.toString("MMMM dd, yyyy")}</td></tr>

  // print out game result data rows
  games.map{case (gameId, List((schedule, result, team), (schedule, result, team))) =>
    ...
  }
} 
```

由于您不需要 gameId，因此您可以只返回配对游戏：

```
val data = repo.games.findAllByDate(fooDate).groupBy(_._1.gameDate).mapValues(_.groupBy(_._1.gameID).values) 
```

结果提示现在是：

```
Map[JodaTime, Iterable[List[(Schedule,GameResult,Team)]]] 
```

每个列表再次列出具有相同 GameId 的两个游戏

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T12:49:24.017

也许我误解了您的要求，但在我看来，您需要的只是一个额外的 groupBy：

```
repo.games.findAllByDate(fooDate).groupBy(_._1.gameDate).mapValues(_.groupBy(_._1.gameID)) 
```

结果将是以下类型：

```
Map[JodaTime, Map[GameId, List[(Schedule,GameResult,Team)]]] 
```

（`GameId`返回类型的类型在哪里`Schedule.gameId`）

**更新：**如果您希望结果成对，那么模式匹配是您的朋友，如 Arjan 所示。这会给我们：

```
val byDate = repo.games.findAllByDate(fooDate).groupBy(_._1.gameDate)
val data = byDate.mapValues(_.groupBy(_._1.gameID).mapValues{ case List((sa, ra, ta), (sb, rb, tb)) => (sa, (ta, ra), (tb, rb))) 
```

这次结果是类型：

```
Map[JodaTime, Iterable[ (Schedule,(Team,GameResult),(Team,GameResult))]] 
```

请注意，`MatchError`如果不完全有 2 个具有相同 gameId 的条目，这将引发 a。在实际代码中，您肯定会想要检查这种情况。

# java - 如何使用java将数据插入到包含mediumtext数据类型的mysql数据库表中

> ID：12974378
> 
> 赞同：0
> 
> 时间：2012-10-19T12:33:17.083
> 
> 标签：java, mysql, jsp

我想将图像插入到包含数据类型为 MEDIUMTEXT 的字段的表中。请任何人告诉如何插入mediumtext数据

```
psmt=con.prepareStatement("INSERT INTO ofvcard (username,vcard) " + "VALUES (?,?)");
psmt.setString(1,"admin");
fis=new FileInputStream(image);
psmt.setBinaryStream(2, (InputStream)fis, (int)(image.length()));
int s = psmt.executeUpdate(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T12:47:18.383

如[The`BLOB`和`TEXT`Types](http://dev.mysql.com/doc/en/blob.html)下所述：

> `BLOB`值被视为二进制字符串（字节字符串）。它们没有字符集，排序和比较基于列值中字节的数值。`TEXT`值被视为非二进制字符串（字符串）。它们有一个字符集，并且根据字符集的排序规则对值进行排序和比较。

因此，当遇到在列的字符集中无效的字节序列时，您的图像文件（它是*binary*，而不是*character*数据）可能会遇到一些编码问题。

您*可以*改为使用该`MEDIUMBLOB`类型，但实际上应该将文件存储在文件系统（这是专门为此目的设计的数据库）中，并简单地将相应的文件系统路径存储在 MySQL 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T11:45:08.047

psmt=con.prepareStatement("INSERT INTO ofvcard (username,vcard)" + "VALUES (?,?)"); psmt.setString(1,"admin"); pstmt.setString(2,"testing") int s = psmt.executeUpdate();

# backbone.js - 在 Javascript / CoffeeScript 中拆分事件和函数

> ID：12974380
> 
> 赞同：0
> 
> 时间：2012-10-19T12:33:29.940
> 
> 标签：backbone.js, coffeescript

我最近一直在使用 Backbone，并且喜欢它，因为它可以让我的代码保持干净。

我只是在建立另一个站点，我真的很想使用一些主干/咖啡脚本语法。例如对于一个单页加载器，我正在考虑做这样的事情：

这是加载一个 JavaScript 文件的单个 HTML 页面

```
#query Events    
$(document).ready =>

  $(".click").click ->
    console.log "hello"
    alert()

#Functions

  alert: ->
    console.log "alert" 
```

所以我可以将我所有的功能整齐地拆分在下面，事件在上面。这样我就可以跟踪了。在上面的示例中，我试图让 click 事件在警报时触发。

在主干中，我可以有一个触发警报的事件列表，我觉得这非常有用。但我不需要所有的视图/控制器/模型等。

目前虽然这不起作用。让事件触发其自身功能之外的另一个功能的最佳方法是什么？

也许我这样做真的错了，但我喜欢将其拆分并保持清洁的简单性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T12:49:29.920

好吧，所以我把我的语法弄乱了很多......

```
$(document).ready ->
  $(".click").click ->
    console.log "hello"
    alert()

  alert = ->
    console.log "alert" 
```

有效，如果其他人想要这样做，那么这对我有用:)

# c# - 如何将两个数据源合二为一？

> ID：12974381
> 
> 赞同：2
> 
> 时间：2012-10-19T12:33:31.367
> 
> 标签：c#, .net, linq

我在两个表和 1 个对象中有记录，我想将两个表中的数据检索到 1 个网格视图中，（两个表都有相同的字段）我不能有连接，因为我需要显示所有行

这是我的代码：

```
var query = from all in DB.Movies
            where all.IsActive
            select new MoviesObject
            {
                PhotoId = all.PhotoId,
                Title = all.Title,
                Description = all.ShortDescription
            };
var querytwo = from all in DB.movieslisttwo
               where all.IsActive
               select new MoviesObject
               {
                   PhotoId = all.PhotoId,
                   Title = all.Title,
                   Description = all.ShortDescription
               ;
return query.ToList(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T12:34:36.000

```
return query.Concat(query2).ToList(); 
```

或者，您可以调用`.Union()`以跳过重复项。

# api - 使用 oauth2 的谷歌经销商 api

> ID：12974384
> 
> 赞同：0
> 
> 时间：2012-10-19T12:33:41.850
> 
> 标签：api, oauth-2.0, google-reseller-api

我正在尝试创建一个允许 joe bloggs 通过我们的经销商帐户注册 google 应用程序帐户的 php 页面。我查看了新的谷歌经销商 api，他们建议使用 oauth2，但是这可以通过转到用户必须登录谷歌以获得使用 api 的授权的页面来工作。（显然这不起作用，因为 joe bloggs 甚至可能没有任何类型的谷歌帐户）

我查看了一个 api 服务帐户，但这不适用于经销商 api。

谁能建议如何在不重定向到谷歌登录页面的情况下访问经销商 API

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-05T23:23:50.560

OAuth2 服务帐户确实与 Reseller API 兼容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T15:22:30.497

当您向 API 进行身份验证时，您正在对执行特定操作的用户进行身份验证。在经销商 API 的情况下，您需要作为经销商帐户的管理员而不是新域的用户进行身份验证 - 创建新域的是您的经销商帐户。

# c++ - 我什么时候应该使用 C++ AMP

> ID：12974389
> 
> 赞同：-4
> 
> 时间：2012-10-19T12:33:54.003
> 
> 标签：c++, performance, c++-amp

我什么时候应该使用 C++ AMP（或者不应该使用它）？

AMP 的开销是多少？将数据复制到 GPU 内存并返回需要多长时间？当 AMP 开始降低性能时，最小数据量是多少？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T12:44:12.443

只要您不做太多，复制数据就不会造成太大的开销。偶尔复制一些大块数据是可以的。例如，游戏通常会为每一帧上的每个对象复制实例数据，如果过度，这*会*降低性能，但通常没问题。值得注意的是，它们不会复制诸如 3D 几何之类的东西，那会毁了你。

通常，该用例用于对大量数据进行*简单（最多认为是 FSM）计算，其中每个数据都被单独处理。*

至于性能，嗯，配置文件是唯一可以确定的方法。GPU 是完全不同的野兽，最小数据大小实际上取决于手头的计算和数据传播。例如，当多个线程的分支方式不同时，GPU 并不真正喜欢它。

# javascript - 使用 Ajax 从 UIWebView 调用 Objective C 函数

> ID：12974390
> 
> 赞同：1
> 
> 时间：2012-10-19T12:33:56.490
> 
> 标签：javascript, ios, objective-c, ajax, uiwebview

我在网上找到了一个教程，它说可以使用以下 Javascript 代码从 WebView 调用 ObjectiveC 代码

```
var iframe = document.createElement("IFRAME");
iframe.setAttribute("src", "js-frame:myObjectiveCFunction");
document.documentElement.appendChild(iframe);
iframe.parentNode.removeChild(iframe);
iframe = null; 
```

然后从ObjectiveC我必须实现UIWebViewDelegate来接收shouldStartLoadWithRequest。我尝试了这段代码，它奏效了；但是，我想知道是否可以使用 AJAX 调用而不是使用 IFrame 来实现相同的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T21:25:32.300

如果你用JS改变window.location就可以做到。它将调用您正在使用的委托函数。

您还可以使用页面上的链接来使用相同的委托方法执行 obj-c 函数。

如果您打算使用 AJAX 进行特殊调用，请详细说明。

# javascript - 来自 http://trentrichardson.com/Impromptu/ 的插件在 IE8 中不起作用

> ID：12974394
> 
> 赞同：0
> 
> 时间：2012-10-19T12:34:11.403
> 
> 标签：javascript, jquery

请帮我解决我的问题。

我从[http://trentrichardson.com/Impromptu/](http://trentrichardson.com/Impromptu/)获得了一个插件 ，当我尝试在**IE8**中打开一个弹出窗口（iframe）时，它**无法正常工作**，但**Firefox、chrome、safari 和 IE9****工作**正常。错误说

```
SCRIPT5007: Unable to get value of the property 'constructor': object is null or undefined 
jquery-impromptu.3.2.min.js, line 37 character 9 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:39:37.483

尝试更新您的 jquery 版本

他们正在使用 jquery v1.7.1 可能对您有帮助，而且他们正在使用 impromptu.4.0.min.js 请升级这两个文件然后尝试

确保您已包含所有必需的 js 文件尝试查看他们网站的源代码

[你可以从这里](http://blog.jquery.com/2011/11/21/jquery-1-7-1-released/)下载 jquery v1.7.1

祝一切顺利

# python - 在 SublimeText2 插件中管理 python 导入依赖项。特别是 unicodedata 库

> ID：12974396
> 
> 赞同：6
> 
> 时间：2012-10-19T12:34:23.707
> 
> 标签：python, sublimetext2

我正在尝试修复一个小[SublimeText2 插件](https://github.com/alonisser/Sublime-Text-2-BIDI)。问题似乎是（来自 SublimeText python 控制台）是一个导入错误：

```
Traceback (most recent call last):
  File ".\sublime_plugin.py", line 62, in reload_plugin
  File ".\rtl.py", line 4, in <module>
    from algorithm import get_display
  File "lang\algorithm.py", line 20, in <module>
    from unicodedata import bidirectional, mirrored
ImportError: No module named unicodedata 
```

由于 unicodedata 是标准的 python 库，我尝试直接在控制台中导入它并得到相同的导入错误。我认为这是因为 sublimetext 没有使用系统安装的 python 版本（我在 windows 机器中使用 python2.7），但它是自己捆绑的 2.6 python，它不捆绑整个标准库。

当我尝试从我常用的 python 解释器导入时，一切正常。

我尝试添加一个指向“c:\python27\lib”和站点包等的 .pth 文件，但没有帮助。像这样直接添加到路径中：

```
sys.path.append(c:\\Python27\\lib) 
```

也没有帮助。还尝试调整我的用户设置文件以包括：

```
{
    "PATH": "C:\\Python27;c:\\Python27\\Scripts",
    "PYTHONPATH": "C:\\Python27\\Lib;C:\\Python27\\Lib\\site-packages;C:\\Python27\\DLLs"
} 
```

我的问题分为两个：

1.  如何在我的开发计算机上专门解决这个问题
2.  对于试图安装插件的人来说，解决这个问题的正确方法是什么。使插件动态了解默认的 python 安装并将其添加到路径中。

此外，最奇怪的是：程序文件中的主 SublimeText 文件夹实际上包含 unicodedata.pyd 文件。所以我无法弄清楚问题是什么！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T09:20:16.067

看起来这可能是一个 ST2 错误，而不是你做错了什么： [http ://www.sublimetext.com/forum/viewtopic.php?f=3&t=3462](http://www.sublimetext.com/forum/viewtopic.php?f=3&t=3462)

# php - 从 Ruby on Rails 学习 PHP？

> ID：12974397
> 
> 赞同：1
> 
> 时间：2012-10-19T12:34:26.473
> 
> 标签：php, ruby-on-rails

我是一名 Ruby on Rails 程序员，我将在一些 PHP 项目上工作一段时间。我知道 PHP 程序员切换到 Ruby on Rails 更为常见，但是是否有相反的好教程？

所以问题是，有没有人知道任何可以向 Rails 程序员教授 PHP 的教程或资源？我知道这可能听起来很模糊，但这里有一些我更喜欢的东西：

**简洁**——尽可能地，我更喜欢简短的教程，而不是 600 页的书。不是 PHP 的参考指南，而是更多的快速入门。

**对于 Ruby on Rails 程序员**- 如果可能的话，我更喜欢讨论和比较 Rails 的概念，例如如何处理 MVC、如何添加依赖项、路由、良好实践等。

**真实世界的例子**——如果有一些真实的例子，而不仅仅是一些显示 PHP 语法的片段，那就太好了。

教程视频会更好，我更喜欢免费教程，但付费的也可以，只要它们值得。提前非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T12:41:28.107

将你对一种语言的句法知识翻译成另一种语言的范式几乎总是导致灾难的根源。您将始终试图让 PHP 以“ruby/rails 方式”而不是 PHP 中的正确方式来做事。

Instead, clear your mind of everything you know about Ruby/Rails (except for general software engineering principles), grab a book, read some tutorials, and watch some "Learn PHP" videos on YouTube. Approaching it as something completely different and not trying to make an apples to apples comparison, you will find that it becomes a little easier to learn.

In the end [http://www.php.net](http://www.php.net) is your greatest resource.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T12:44:26.933

I would suggest you to start with some basic syntax and some basic functions of PHP, you can [Read them here](http://www.w3schools.com/php/default.asp). It would hardly take 2 - 3 hours to learn basics. and then you can go on with [This PHP tutorial](http://www.php.net/). Then You can strat with some frameworks viz [Symfony](http://symfony.com/), [CodeIgniter](http://codeigniter.com/) and [Yii Framework](http://www.yiiframework.com/)

# c# - 删除并删除行匹配字符串？

> ID：12974403
> 
> 赞同：0
> 
> 时间：2012-10-19T12:34:44.533
> 
> 标签：c#, datatable, delete-row

我想在 DataTable 中搜索一个字符串，如果它以`"null"`删除该字符串开头，如果该行没有值，那么也删除该行。有人可以告诉我怎么做吗？

```
ID    Name   Comment
2     lola    hallo
5     miky    hi
      null0          // delete null0 and remove this row     
      null1   ko     // delete null1 but do not remove this row
1      hub    why
3     null2          //delete null2 but do not remove this row 
```

我试图删除`"null"`，但它不起作用。

我的代码：

```
int ct1 = 0;
for (int i = 0; i < resE1.Rows.Count; i++ )
{
    if(resE1.Rows[i]["SignalName"].ToString() == "null" + ct1)
    {
        resE1.Rows[i].SetField<String>(2, "");
    }
    ct1++;
} 
```

我找到了一个`"null*"`用空格替换的解决方案，但是现在如果该行的单元格值为空，我想删除该行，我该怎么做？

```
int ct1 = 0;
for (int i = 0; i < resE1.Rows.Count; i++)
{
    string fix = resE1.Rows[i]["SignalName"].ToString();

    if(fix.Contains("null"))
    {
        resE1.Rows[i].SetField<String>(2, "");
    }
    ct1++;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:54:35.810

要回答您的一个问题，要删除整行，请执行以下操作：

```
if(resE1.Rows[i].Contains("null") && (resE1.Rows[i]["ID"].ToString() == "") && (resE1.Rows[i]["Comment"].ToString() == ""))
{
    resE1.Rows[i].Delete();
}

bool emptyFlag = false;
if(resE1.Rows[i].Contains("null"))
{
    for(int j = 0; j < resE1.Columns.Count; j++)
    {
       if(resE1.Rows[i][j].Equals(""))
        emptyFlag = true;
       else
        emptyFlag = false;
    }
   if(emptyFlag)
    resE1.Rows[i].Delete();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T12:55:43.327

这是您的代码已更改，因此它可以正常工作，尽管我不喜欢它的编写方式。检查答案：

```
int ct1 = 0;
int i = 0;
while(i < dt.Rows.Count)
{
    if ( dt.Rows[i]["Name"].ToString() == "null" + ct1)
    {
        if ((dt.Rows[i][0] == null || dt.Rows[i][0].ToString() == string.Empty) && (dt.Rows[i][2] == null || dt.Rows[i][2].ToString() == string.Empty))
        {
            dt.Rows.RemoveAt(i);
            i--;
        }
        else
        {
            dt.Rows[i].SetField<String>(1, "");
        }
        ct1++;
    }
    i++;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T12:58:13.620

我试过这个。为我工作。

```
List<DataRow> rowsToRemove = new List<DataRow>();
foreach (DataRow dr in resE1.Rows)
{
    if (dr["Name"].ToString().IndexOf("null") == 0)
    {
        dr.SetField("Name", "");
    }
    bool hasValue = false;
    for (int i = 0; i < dr.ItemArray.Count(); i++)
    {
        if (!dr[i].ToString().Equals(String.Empty))
           hasValue = true;
    }
    if (!hasValue) rowsToRemove.Add(dr);
}
foreach(DataRow dr in rowsToRemove)
{
    dr.Delete();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T13:37:50.847

假设您有类型的`DataTable`列，您可以像这样实现它：`"Name"``string`

```
private DataTable RemoveUnwanted(DataTable source)
{
    var rowsEnu = source.Rows.GetEnumerator();
    while (rowsEnu.MoveNext())
    {
        ((DataRow)rowsEnu.Current)["Name"] = ((DataRow)rowsEnu.Current)["Name"].ToString().StartsWith("null") ? string.Empty : ((DataRow)rowsEnu.Current)["Name"];
    }

    return (from i in source.AsEnumerable()
            where !(i.ItemArray.All(o => string.IsNullOrEmpty(o.ToString())))
            select i).CopyToDataTable();
} 
```

您还需要参考`System.Data.DataSetExtensions`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T12:50:52.783

你需要这样的东西：

```
String test = "Null01";
if (test.IndexOf("Null") == 0)
{
    test = test.Replace("Null", String.Empty);
} 
```

对于您问题的第二部分，只需检查是否`Comments`为`null`空，然后也替换字符串。

根据您自己的要求安排代码。

# python - 由 Timestamp 对象组成的 Pandas 系列的 min() 和 max() 方法的意外结果

> ID：12974404
> 
> 赞同：6
> 
> 时间：2012-10-19T12:34:46.750
> 
> 标签：python, pandas, timestamp, data-munging

我在进行基本数据处理时遇到了这种行为，就像在这个例子中一样：

```
In [55]: import pandas as pd
In [56]: import numpy as np
In [57]: rng = pd.date_range('1/1/2000', periods=10, freq='4h')
In [58]: lvls = ['A','A','A','B','B','B','C','C','C','C']
In [59]: df = pd.DataFrame({'TS': rng, 'V' : np.random.randn(len(rng)), 'L' : lvls})

In [60]: df
Out[60]: 
   L                  TS         V
0  A 2000-01-01 00:00:00 -1.152371
1  A 2000-01-01 04:00:00 -2.035737
2  A 2000-01-01 08:00:00 -0.493008
3  B 2000-01-01 12:00:00 -0.279055
4  B 2000-01-01 16:00:00 -0.132386
5  B 2000-01-01 20:00:00  0.584091
6  C 2000-01-02 00:00:00 -0.297270
7  C 2000-01-02 04:00:00 -0.949525
8  C 2000-01-02 08:00:00  0.517305
9  C 2000-01-02 12:00:00 -1.142195 
```

问题：

```
In [61]: df['TS'].min()
Out[61]: 31969-04-01 00:00:00

In [62]: df['TS'].max()
Out[62]: 31973-05-10 00:00:00 
```

虽然这看起来不错：

```
In [63]: df['V'].max()
Out[63]: 0.58409076701429163

In [64]: min(df['TS'])
Out[64]: <Timestamp: 2000-01-01 00:00:00> 
```

在 groupby 之后聚合时：

```
In [65]: df.groupby('L').min()
Out[65]: 
             TS         V
L                        
A  9.466848e+17 -2.035737
B  9.467280e+17 -0.279055
C  9.467712e+17 -1.142195

In [81]: val = df.groupby('L').agg('min')['TS']['A']
In [82]: type(val)
Out[82]: numpy.float64 
```

显然，在这种特殊情况下，它与使用频率日期时间索引作为 pd.Series 函数的参数有关：

```
In [76]: rng.min()
Out[76]: <Timestamp: 2000-01-01 00:00:00>

In [77]: ts = pd.Series(rng)
In [78]: ts.min()
Out[78]: 31969-04-01 00:00:00

In [79]: type(ts.min())
Out[79]: numpy.datetime64 
```

但是，我最初的问题是通过 pd.read_csv() 从字符串中解析的时间戳系列的最小值/最大值

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T14:39:59.173

正如@meteore 所指出的，这是 NumPy 1.6.x 中 np.datetime64 类型的字符串 repr 的问题。基础数据，应该仍然是正确的。要解决此问题，您可以执行以下操作：

```
In [15]: df
Out[15]: 
   L                  TS         V
0  A 2000-01-01 00:00:00  0.752035
1  A 2000-01-01 04:00:00 -1.047444
2  A 2000-01-01 08:00:00  1.177557
3  B 2000-01-01 12:00:00  0.394590
4  B 2000-01-01 16:00:00  1.835067
5  B 2000-01-01 20:00:00 -0.768274
6  C 2000-01-02 00:00:00 -0.564037
7  C 2000-01-02 04:00:00 -2.644367
8  C 2000-01-02 08:00:00 -0.571187
9  C 2000-01-02 12:00:00  1.618557

In [16]: df.TS.astype(object).min()
Out[16]: datetime.datetime(2000, 1, 1, 0, 0)

In [17]: df.TS.astype(object).max()
Out[17]: datetime.datetime(2000, 1, 2, 12, 0) 
```

# c++ - 选择部分执行C++的策略

> ID：12974407
> 
> 赞同：-2
> 
> 时间：2012-10-19T12:34:53.567
> 
> 标签：c++, boost, factory

让我先展示几个类：

```
class globalcontext
{
  public:
  /*partA context*/
  A;
  B;
  c;
  /*partB context*/
  D;
  E;
  F;
  .......
  execute();  //a method to do something (serialize) for context above

};

class mainprocess
{
     callsubprocess();
};
class subprocessA{};
class subprocessB{};
class subprocessC{};
.................. 
```

实际上，有几个后端运行主进程，所以上下文将从这里或那里发送，这就是我想要执行（序列化/反序列化）的原因。

流程是这样的： mainprocess::callsubprocess() ----> 选择一个子进程，所以选择 subprocessA----> 从 globalcontext 类中执行部分上下文。

是否可以在boost中使用工厂？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T12:47:14.687

也许您正在寻找一种策略模式？假设 AF 编码*behavior*，您可以“混合”不同的行为或将它们作为策略提供：

注意：下面，静态/非静态成员函数之间的分离有点随意（*mixin*可以很好地包含静态成员）。

### 混合

```
#include <iostream>

struct NormalPartABehaviour {
    void A() { std::cout << "Normal A" << std::endl; }
    void B() { std::cout << "Normal B" << std::endl; }
    void C() { std::cout << "Normal C" << std::endl; }
};

struct SpecialPartABehaviour {
    void A() { std::cout << "Special A" << std::endl; }
    void B() { std::cout << "Special B" << std::endl; }
    void C() { std::cout << "Special C" << std::endl; }
};

struct NormalPartBBehaviour {
    void D() { std::cout << "Normal D" << std::endl; }
    void E() { std::cout << "Normal E" << std::endl; }
    void F() { std::cout << "Normal F" << std::endl; }
};

template <typename PartAMixin, typename PartBMixin>
struct GlobalContext : public PartAMixin, public PartBMixin
{
};

///// test method:

template <class Context>
void test(Context globalcontext)
{
    globalcontext.A();
    globalcontext.B();
    globalcontext.C();
    globalcontext.D();
    globalcontext.E();
    globalcontext.F();
}

int main()
{
    GlobalContext<NormalPartABehaviour,  NormalPartBBehaviour> ctx1;
    GlobalContext<SpecialPartABehaviour, NormalPartBBehaviour> ctx2;

    std::cout << "testing ctx1: \n";
    test(ctx1);
    std::cout << "testing ctx2: \n";
    test(ctx2);
} 
```

输出[http://liveworkspace.org/code/b6b5cfffba11df68bc70c432b030b1d5](http://liveworkspace.org/code/b6b5cfffba11df68bc70c432b030b1d5)

```
testing ctx1:
Normal A
Normal B
Normal C
Normal D
Normal E
Normal F
testing ctx2:
Special A
Special B
Special C
Normal D
Normal E
Normal F 
```

## 战略

```
#include <iostream>

struct NormalPartABehaviour {
    static void A() { std::cout << "Normal A" << std::endl; }
    static void B() { std::cout << "Normal B" << std::endl; }
    static void C() { std::cout << "Normal C" << std::endl; }
};

struct SpecialPartABehaviour {
    static void A() { std::cout << "Special A" << std::endl; }
    static void B() { std::cout << "Special B" << std::endl; }
    static void C() { std::cout << "Special C" << std::endl; }
};

struct NormalPartBBehaviour {
    static void D() { std::cout << "Normal D" << std::endl; }
    static void E() { std::cout << "Normal E" << std::endl; }
    static void F() { std::cout << "Normal F" << std::endl; }
};

template <typename PartAMixin, typename PartBMixin>
struct GlobalContext
{
    static void A() { PartAMixin::A(); }
    static void B() { PartAMixin::B(); }
    static void C() { PartAMixin::C(); }

    static void D() { PartBMixin::D(); }
    static void E() { PartBMixin::E(); }
    static void F() { PartBMixin::F(); }
};

///// test method:

template <class Context>
void test()
{
    Context::A();
    Context::B();
    Context::C();
    Context::D();
    Context::E();
    Context::F();
}

int main()
{
    typedef GlobalContext<NormalPartABehaviour,  NormalPartBBehaviour> ctx1;
    typedef GlobalContext<SpecialPartABehaviour, NormalPartBBehaviour> ctx2;

    std::cout << "testing ctx1: \n";
    test<ctx1>();
    std::cout << "testing ctx2: \n";
    test<ctx2>();
} 
```

输出[http://liveworkspace.org/code/8bca96d0e9784026c6357a30110bc5fd](http://liveworkspace.org/code/8bca96d0e9784026c6357a30110bc5fd)

```
testing ctx1: 
Normal A
Normal B
Normal C
Normal D
Normal E
Normal F
testing ctx2: 
Special A
Special B
Special C
Normal D
Normal E
Normal F 
```

# arrays - ActionScript 3 数组返回运行时错误

> ID：12974409
> 
> 赞同：0
> 
> 时间：2012-10-19T12:35:02.400
> 
> 标签：arrays, actionscript-3, flash, runtime-error

好的，所以我有以下代码，它所做的只是在屏幕上放置 3 个纯色方块，在右下角放置一个彩虹色方块。当用户按下任何纯色方块时，该点会被彩虹色的方块填充，并且在彩虹的原始位置上会出现被点击的方块。除了一件事之外，该代码几乎可以完美运行。当用户试图点击彩虹方块下的方块时，它会返回一个运行时错误。

我的代码：

一世

```
mport flash.display.DisplayObject;
import flash.ui.Mouse;

var t1:DisplayObject = new mc_1;
var t2:DisplayObject = new mc_2;
var t3:DisplayObject = new mc_3;
var t4:DisplayObject = new mc_4;

var tile:Array = [[t1,t2],[t3,t4]];

var r:int;
var c:int;
var a:int = 50;
var b:int = 50;
var aa:int = 1;
var bb:int = 1;
function reDraw() {
    a = 50;
    b = 50;
    for (r=0;r<2;r++) {
        for (c=0;c<2;c++) {
            tile[r][c].x = a;
            tile[r][c].y = b;
            trace(tile[r][c]);
            stage.addChild(tile[r][c]);
            tile[r][c].addEventListener(MouseEvent.CLICK, go);
            a += 100;
        }
        a = 50;
        b += 100;
    }
}
reDraw();

function go(e:MouseEvent):void {
    trace(e.target);
    //Right:
        if (e.target == tile[aa][bb+1]) {
            tile[aa][bb] = e.target;
            bb += 1;
            tile[aa][bb] = t4;
            reDraw();
            trace("Right");
        }
    //Left:
        else if (e.target == tile[aa][bb-1]) {
            tile[aa][bb] = e.target;
            bb -= 1;
            tile[aa][bb] = t4;
            reDraw();
            trace("Left");
        }
    //Up:
        else if (e.target == tile[aa-1][bb]) {
            tile[aa][bb] = e.target;
            aa -= 1;
            tile[aa][bb] = t4;
            reDraw();
            trace("Up");
        }
    //Down:
        else if (e.target == tile[aa+1][bb]) {
            tile[aa][bb] = e.target;
            aa += 1;
            tile[aa][bb] = t4;
            reDraw();
            trace("Down");
        }
        else trace("FAILED!");
    trace(aa +" " +  bb);
} 
```

错误：

> TypeError：错误＃1010：术语未定义且没有属性。在 win_fla::MainTimeline/go()

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T13:08:47.197

If you take a look at your code you have this:

```
//Down:
    else if (e.target == tile[aa+1][bb]) {
        tile[aa][bb] = e.target;
        aa += 1;
        tile[aa][bb] = t4;
        reDraw();
        trace("Down");
    } 
```

now you can see here that its looking for tile[aa+1] however aa = 1 in the beginning so aa+1 = 2 and tile[2] doesn't exist or is undefined. You'll need to change your logic there to something like:

```
var tileFound:Boolean = false;
for(var i:int = 0; i < 2; i++){
    for(var j:int = 0; j < 2; j++){
        if(tile[i][j] == e.target){
            tileFound = true;
            tile[aa][bb] = e.target;
            tile[i][j] = t4;
            if(i > aa) trace ("Right");
            else if(i < aa) trace ("Left");
            if(j > bb) trace ("Bottom");
            else if(j < bb) trace ("Top");
            aa = i;
            bb = j;
            reDraw();
            tileFound = true;
            break;
        }
    }
    if(tileFound) break;
} 
```

# python - Python多处理，传递包含信号量的对象引用

> ID：12974414
> 
> 赞同：7
> 
> 时间：2012-10-19T12:35:25.693
> 
> 标签：python, multiprocessing

我有这样的场景：我创建了一个包含信号量的类元素的对象。

```
import multiprocessing as mpr

class Element(object):
    def __init__(self):
        self.sem = mpr.Semaphore()
        self.xyz = 33

def fun( ch ):
    a = ch.recv()
    print( a[0] )
    print( a[1].xyz )
    a[1].xyz = 99
    print( a[1].xyz )

el = Element()

( pa , ch ) = mpr.Pipe()
proc = mpr.Process(target=fun , args=( ch, ) )

proc.start()
pa.send( [ "Hallo" , el ])

print( el.xyz )

proc.join() 
```

此代码返回此错误：

```
 File "/usr/lib/python2.7/multiprocessing/forking.py", line 51, in assert_spawning
    ' through inheritance' % type(self).__name__
RuntimeError: Semaphore objects should only be shared between processes through inheritance 
```

但是，如果我从代码的声明中删除信号量，则`Element`分配给 a[1].xyz 的值将丢失。

现在我需要通过信号量和多处理同步大量对象。那么有一些方法可以在每个对象中设置一个信号量并只传递对主对象的引用吗？

```
import multiprocessing as mpr

class Element(object):
    def __init__(self):
        self.xyz = 33

def fun( ch ):
    a = ch.recv()
    print( a[0] )
    print( a[1].xyz )
    a[1].xyz = 99
    print( a[1].xyz )

el = Element()

( pa , ch ) = mpr.Pipe()
proc = mpr.Process(target=fun , args=( ch, ) )

proc.start()
pa.send( [ "Hallo" , el ])

print( el.xyz )

proc.join() 
```

第二个版本不会产生任何错误，但分配给的值`a[1].xyz = 99`将在主进程中丢失。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-19T16:55:39.453

我认为您不了解该`multiprocessing`模块的工作原理。

当您通过管道发送某些东西时，它会被腌制，然后在子流程中被取消腌制。这意味着子进程实际上拥有原始对象的*副本！*这就是改变“丢失”的原因。添加信号量不会改变任何东西。

如果您想要共享内存中的对象，您应该使用[multiprocessing.Value](http://docs.python.org/library/multiprocessing.html#multiprocessing.Value)，即使它不处理任意类型。可能[multiprocessing.Manager](http://docs.python.org/library/multiprocessing.html#managers)是您正在寻找的。

另一种方法是向提供修改对象的主进程发送响应。

# c++ - 安排 Cronjob 运行 C 程序，但该程序的一部分没有运行

> ID：12974416
> 
> 赞同：2
> 
> 时间：2012-10-19T12:35:33.853
> 
> 标签：c++, cron

该程序称为 temp，由 temp.c 和一些头文件构建而成。

它的目的是根据我从 USB 温度计获得的温度打开或关闭某些东西。

（跳过无聊的部分）vi temp.c：

```
if (tempc > 61)
{ 
    system("br a1 on"); 
    printf("The temperature was above 61 degrees");
}
else if(tempc < 60){ system("br a1 off"); } 
```

crontab -e：

```
*/1 * * * * cd /home/username/endpath; ./temper >> tempLog.txt 
```

tempLog.txt 每分钟每行都显示“温度高于 61 度”。所以我知道它正在输入该语句，但它没有执行系统命令。

我不知所措。

编辑：“br a1 on”是使用“BottleRocket”的 x10 家庭自动化命令。

# php - 使用视图列表成员更改控制器的默认视图：如何设置视图模型？

> ID：12974421
> 
> 赞同：2
> 
> 时间：2012-10-19T12:35:47.750
> 
> 标签：php, model-view-controller, joomla, joomla2.5

我正在构建一个 Joomla 2.5 组件，并且我想更改在“保存”项目操作之后呈现的视图。这很容易（在 JControllerAdmin 扩展类构造函数中）

```
$this->view_list = "myview" 
```

但是，`myview`需要加载几个模型才能工作。在代码的其他地方，这是由控制器完成的，例如 `controller.php`（组件根中的组件主控制器）：

```
$view = &$this->getView('myview', 'html');
$view->setModel($this->getModel('myviewSpecialModel'),false);
$view->display(); 
```

我的问题：我不确定`JControllerAdmin`我可以把这段代码放在哪里，以便在显示视图之前加载必要的模型。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T15:27:26.577

如果我正确理解您的问题，那么您有一个扩展 JControllerAdmin 的控制器。

所以**你前面提到的代码应该**在控制器类的 display() 方法中。

这回答了你的问题了吗？

Joomla 也很有帮助！文档：[在 MVC 组件中使用多个模型](http://docs.joomla.org/Using_multiple_models_in_an_MVC_component)

# c# - SqlDataAdapter->SelectCommand 并在 SQL 中使用 Print

> ID：12974430
> 
> 赞同：0
> 
> 时间：2012-10-19T12:36:17.393
> 
> 标签：c#, sql-server, sqldataadapter, output

MSSQL 有一个 PRINT 命令，可以让我编写存储过程和 sql 文本查询的输出。问题是使用 Fill 方法通过 SqlDataAdapter 调用时不返回此输出。

我不知道为什么，但如果不能使用 Print，那么也许还有一个替代管道：输出到结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:38:07.080

不，您想要的任何东西都需要与“结果”一起返回。

理论上，您可以使用 OUT 参数并为此添加其他信息。

[使用带有输出参数的存储过程](http://msdn.microsoft.com/en-us/library/ms378108%28v=sql.90%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T12:42:15.497

`PRINT`通过连接的`InfoMessage`事件接收输出。所以*从技术上讲*，你可以单独收集它们并合并。但是，我建议您使用`SELECT`或`out`参数/`return`值来从命令中传递信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T12:42:43.083

您只需从**`select`**命令中获取数据，也可以使用简单示例**`return`**

```
USE AdventureWorks2012;
GO
CREATE PROCEDURE checkstate @param varchar(11)
AS
IF (SELECT StateProvince FROM Person.vAdditionalContactInfo WHERE ContactID = @param) = 'WA'
    RETURN 1
ELSE
    RETURN 2;
GO 
```

在这里你也可以使用**`select`**而不是**`return`**

# jquery - jQuery 移动页面过渡总是淡出

> ID：12974442
> 
> 赞同：1
> 
> 时间：2012-10-19T12:36:54.537
> 
> 标签：jquery, cordova, jquery-mobile

这个来自 jQuery 的页面转换示例适用于 Chrome [http://jquerymobile.com/demos/1.0a4.1/docs/pages/#docs-transitions.html](http://jquerymobile.com/demos/1.0a4.1/docs/pages/#docs-transitions.html)

但是当我用这段代码自己尝试时，它总是使用淡入淡出效果。在 Firefox 中它确实有效。使用 phonegap 构建它时，它在 iOS 上不起作用，在 Android 上也不起作用。

```
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="js/jquery/jqueryMobile/jquery.mobile-1.2.0.css" />
    <script src="js/jquery/jquery-1.8.2.js"></script>
    <script src="js/jquery/jqueryMobile/jquery.mobile-1.2.0.js"></script>
</head>

<body id="body">
    <div id="page1" data-role="page">
        <a id="my_link" href="#page2" data-role="button" data-transition="slide">
            click me
        </a>
    </div>
    <div id="page2" data-role="page">
        <div>
            page2
        </div>
    </div>

</body> 
```

我查看了 jquery mobile javascript 文件，发现它在 changepage 函数中名为 $.mobile._maybeDegradeTransition。此函数检查浏览器是否支持 csstransform3d。Chrome 对此返回 false。当我将代码更改为始终返回 true 时，Chrome 只会进行转换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T02:00:12.093

根据 JQuery Mobile 网站：

> 只看到淡入淡出过渡？要查看所有过渡类型，您必须使用支持 3D 变换的浏览器。默认情况下，缺乏 3D 支持的设备（例如 Android 2.x）将回退到所有过渡类型的“淡入淡出”。此行为是可配置的（见下文）。

来源：http: [//jquerymobile.com/demos/1.1.0-rc.1/docs/pages/page-transitions.html](http://jquerymobile.com/demos/1.1.0-rc.1/docs/pages/page-transitions.html)

# php - php 简单的 socket_listen

> ID：12974450
> 
> 赞同：-1
> 
> 时间：2012-10-19T12:37:23.083
> 
> 标签：php, sockets

我有以下内容：

```
$host = "192.168.0.117";
$port = 777;

set_time_limit(0);

$socket = socket_create(AF_INET, SOCK_STREAM, 0) or die("Could not createsocket\n");
$result = socket_listen($socket, 3) or die("Could not set up socket listener\n"); 
```

该变量`result`给了我一个错误：

> 无法在套接字 [0] 上侦听：提供的参数无效

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:47:03.940

```
$host = '192.168.0.117';
$port = '777';

set_time_limit(0);

$socket = socket_create(AF_INET, SOCK_STREAM, 0);
socket_bind($socket, $adddress, $port) or die("Could not connect");
socket_listen($socket);

$client_connection = socket_accept($socket);
$input = socket_read($client_connection, 1024);

$output = ereg_replace('[\t\n\r]','', $input).chr(0);

//display output
socket_write($client_connection, $output);

socket_close($client_connection);
socket_close($socket); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T12:40:53.410

您需要先将套接字绑定到（地址，端口）对，然后才对其调用监听。

# silverlight - 如何在 AuthenticationService 中使用 CustomData

> ID：12974451
> 
> 赞同：0
> 
> 时间：2012-10-19T12:37:24.693
> 
> 标签：silverlight, forms-authentication, wcf-ria-services

Authentication 服务的 Login 方法接受四个参数，最后一个是字符串 customData。

```
 public T Login(string userName, string password, bool isPersistent, string customData); 
```

我想知道如何使用这个 customData 参数。我看不到它是如何给会员提供者的（因为membershipProvider ValidateUser 只接受用户名和密码），也看不到AuthenticationBase 域服务如何使用它。

我不明白的是这个声明，来自文档

> customData：可选的特定于实现的数据。此基类未使用它。

如果基类没有使用它，那么派生类应该如何使用它，因为 Login 方法不是虚拟的？

作为登录过程的一部分，我需要传递额外的身份验证数据，我宁愿希望在服务器端有一些可扩展点，使使用 customData 成为可能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T15:34:47.153

AuthenticationBase 实现了 IAuthentication 接口，这就是定义 Login 方法的地方。如果您创建自己的 DomainService 直接实现 IAuthentication 而不是继承 AuthenticationBase，那么您可以使用 customData。

# iphone - 如何使用 iphone 磁力计值计算来自墙壁插座的电流电压值？

> ID：12974453
> 
> 赞同：1
> 
> 时间：2012-10-19T12:37:38.550
> 
> 标签：iphone, magnetometer, cmmotionmanager

我想使用 iphone 计算通过壁式插座的电流。我正在使用 CMMotionmanagerFramework，我得到了 X、Y、Z 值，这些值我可以通过使用我想计算电压水平的那些值来计算周围的磁场的墙上插座。请给我答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T12:49:03.793

磁场强度为您提供[以伏特/米为单位的电场强度](http://www.livephysics.com/simulations/electricity-magnetism-sim/electric-current-magnetic-field/)，与电子的速度有关。电子的速度称为[漂移速度](http://en.wikipedia.org/wiki/Drift_velocity)，与电流有关。电场强度取决于导线中的[电荷密度，](http://faculty.wwu.edu/vawter/PhysicsNet/Topics/ElectricForce/LineChargeDer.html)对于您使用的导线，它应该是一个常数，以及从检测器到导线的距离。

所以你的磁场强度取决于一堆常数，这些常数与你的问题的物理排列和*电线中的电流有关*。您可以使用 iPhone 的磁力计、其准确性的知识和一些数学来推导出这一点。插座上的电压降（电位差）与[电抗](http://en.wikipedia.org/wiki/Electrical_reactance)的电流有关，因为您可能正在查看交流电系统，因此除了电阻之外，电感和电容也起作用。

但是，您可能不需要计算电位差，因为电力公司会告诉您它是什么。

# iphone - 在 UIButton 点击 上创建一个 UIImageView

> ID：12974456
> 
> 赞同：1
> 
> 时间：2012-10-19T12:37:52.257
> 
> 标签：iphone, uiimageview, uibutton, uiimage, ios6

我在一个类中有一个按钮设置，单击它时，我正在调用另一个类中的方法，在该方法中我有 UIImageView 的设置代码。

该方法被调用，但不知何故似乎没有创建 ImageView，我不明白为什么，因此我无法向该 ImageView 添加任何图像。

这是我正在尝试做的一些代码：

在我的第一个 viewControllerClass 中，我有一个在单击按钮时触发的方法：

```
- (IBAction)buttonClicked:(id)sender {

    [secondViewController createNewImageView];
} 
```

然后在第二个 viewController 中，我调用了 createNewImageView 方法，在该方法中，我在运行时创建了一个 ImageView：

```
-(void)createNewImageView {

    newImageView = [[UIImageView alloc] initWithFrame:CGRectMake(100,100, 100, 100)];
    newImageView.backgroundColor = [[UIColor yellowColor] colorWithAlphaComponent:0.4];
    [self.otherNewView addSubview:newImageView];
} 
```

但不知何故，ImageView 没有被添加到我的视图中，任何想法为什么会发生这种情况？

我在这里想念什么..？

谢谢你的时间 ：）

**编辑：持有按钮的类是 UIPopOverController。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T15:10:46.663

做之前有没有分配`secondViewController`，

```
[secondViewController createNewImageView]; 
```

我认为您还没有为`secondViewController`. 所以在调用函数之前为类创建对象。

# android - 在android中从另一个应用程序中删除一个应用程序的数据

> ID：12974458
> 
> 赞同：-2
> 
> 时间：2012-10-19T12:38:02.287
> 
> 标签：android

我们可以从android中的另一个应用程序中清除或删除一个应用程序的数据吗？如果不可能，请您建议任何棘手的方法来执行此操作，例如转到内部存储器中的文件夹并以编程方式删除该文件夹。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:44:37.277

简单的回答，

Android 被设计成这是不可能的。

但是当使用 root 访问权限时，您实际上可以从其他应用程序中删除文件夹。

我相信如果两个应用程序具有不同的包，但具有相同的签名，实际上可以访问彼此的私人文件夹。或者我不确定，我相信您可以在清单文件中添加某种声明，允许其他（朋友）应用程序访问您的私人文件夹。但我不确定我应该搜索它。

**搜索后编辑：**

具有相同`android:sharedUserId`和`android:sharedUserLabel`签名的应用程序可以访问彼此的私人文件。

[http://developer.android.com/guide/topics/manifest/manifest-element.html#uid](http://developer.android.com/guide/topics/manifest/manifest-element.html#uid)

[两个具有相同用户 ID 的 Android 应用程序](https://stackoverflow.com/questions/6354035/two-android-applications-with-same-user-id)

**编辑2：**

android API中有一些私有方法，我认为可以用来清除应用程序数据。我不确定，但是如果您在清单文件中反映这些具有正确权限的方法，则可以清除应用程序数据，但我不能 100% 确定。

一些小示例代码：

```
Method clearApplicationUserData = getReflectedMethod("clearApplicationUserData", String.class, IPackageDataObserver.class); 
```

而我使用的方法得到它的反映......

```
private Method getReflectedMethod(String methodname, Class<?>... args) {
    Method temp = null;
    try {
        temp = pm.getClass().getMethod(methodname, args);
    } catch (SecurityException e) {

        return null;
    } catch (NoSuchMethodException e) {

        return null;
    }
    return temp;
} 
```

该类`IPackageDataObserver`应从原始 android 源代码中复制，并作为新类添加到项目的源文件夹中 package 下`android.content.pm`。

当你想清除用户数据时，我认为你应该调用这样的方法：

```
public void clearApplicationUserData(String packageName) {
    if (clearApplicationUserData != null) {
        try {
            clearApplicationUserData.invoke(pm, packageName, data_helper);
        } catch (IllegalArgumentException e) {

        } catch (IllegalAccessException e) {

        } catch (InvocationTargetException e) {

        }
    }
} 
```

data_helper 是扩展该类的任何`IPackageDataObserver.Stub`类。

你可以在 stackoverflow 上找到很多关于反射方法和东西的问题。

我不知道这是否有效，但这是我能想到的唯一方法。

罗尔夫

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T12:45:28.587

如果它存储在数据库中，您可以通过以下方法使用内容提供程序删除数据

```
mRowsDeleted = getContentResolver().delete(
    UserDictionary.Words.CONTENT_URI,   // the user dictionary content URI
    mSelectionClause                    // the column to select on
    mSelectionArgs                      // the value to compare to
); 
```

按照[这里的方法](http://developer.android.com/guide/topics/providers/content-provider-basics.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T12:46:44.377

问题不是很清楚。

你的意思是你的应用程序会从其他人的应用程序中删除数据吗？答案是“视情况而定”。首先，如果数据在 SD 卡上，您可以访问并删除它。如果数据在应用程序的私有数据区域中，那么除非您的手机已植根，否则您无法这样做。

如果有问题的应用程序都是您制作的，答案是肯定的，有可能。您必须`android:sharedUserId`在每个应用程序的清单文件中使用该属性，使它们相同并使用相同的密钥对两个应用程序进行签名。这将使应用程序可以访问彼此的数据。

如果您所说的数据在设备 SD 卡上，是的，您可以。如果它在内部存储中，则没有（除非您创建了两个应用程序并使用了

# android - 使用 CSS3 转换时，Google 地图在 Android 2.2 的 WebView 中运行缓慢

> ID：12974461
> 
> 赞同：4
> 
> 时间：2012-10-19T12:38:07.500
> 
> 标签：android, google-maps, css, android-webview, flicker

我无法让 CSS3 转换和 Google 地图在 Android 2.2 的 WebView 中很好地配合使用。[这是一个 fiddle](http://jsbin.com/ejipaq/1/edit)，有两个按钮来测试转换。您需要在 Chrome 中启用“模拟触摸事件”才能在桌面上单击它们。我使用的设备有一个 1024x600 的屏幕。

如果我不做任何特别的事情，则在转换开始时会闪烁。现在，如果我添加 -webkit-backface-visibility: hidden 到我正在应用转换的元素，一切都如丝般光滑，没有闪烁，但地图变得异常缓慢，你不能勉强滚动。

我试图通过将 -webkit-backface-visibility 设置为可见来解决此问题。这可行，地图将再次正常，但设置属性会导致闪烁。我还玩过 -webkit-perspective 和 -webkit-transform-style，它们似乎也可以在转换开始时消除闪烁，但它们在移除时也会导致闪烁。

我还注意到将“-webkit-backface-visibility: hidden”应用于页面上的任何元素会使转换开始时的闪烁消失。所以我放了一个带有属性的小 div，当转换完成后，我用“display：none”隐藏它。这也会导致闪烁。

因此，我的问题是：我怎样才能拥有 -webkit-backface-visibility （我需要它以使转换无闪烁）和谷歌地图，而不会使地图变慢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-28T17:44:33.933

可能的问题是 2.2 已经过时了，您现在应该实际使用 3.0 来支持平板电脑。此外，如果您在模拟器上进行测试，那么这将是您的问题。

# ios - 在 MKMapView 中以编程方式显示大陆

> ID：12974463
> 
> 赞同：0
> 
> 时间：2012-10-19T12:38:08.620
> 
> 标签：ios, mkmapview, mapkit, geocoding

我有一个带有 3 个按钮（欧洲、亚洲、美洲）和一个 MKMapView 的视图。如果单击其中一个按钮，我需要显示特定的大陆。

`MKGeometry.h (Mapkit Framework)`
里面有一个常数，我可以用
`MKMapRectWorld`
它来展示整个世界。

各大洲有类似的东西吗？
如果没有，确定创建 MKCoordinateRegion 所需的所有信息的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T07:24:04.657

使用 Google Earth 或 Goole Maps 计算出纬度/经度边界，然后调用`setRegion`您的地图视图。

# android - 无法使用 android ndk 使图像变灰

> ID：12974467
> 
> 赞同：2
> 
> 时间：2012-10-19T12:38:26.297
> 
> 标签：android, c++, c, android-ndk

我是 android ndk 的新手。我已经开始通过 ruckus 和 IBM 博客的图像处理示例进行学习。我正在尝试使图像变灰。这是我正在使用的代码

显示的布局的 xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
  <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"  
  >
    <ImageView
      android:id="@+id/gimageView1"
      android:layout_width="400px"
      android:src="@drawable/wallace"
      android:layout_height="266px"
    />

    <Button
      android:id="@+id/gbutton"
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:text="Go Gray"
    />

    <ImageView
      android:id="@+id/gimageView2"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
    />
  </LinearLayout> 
```

java代码是

```
package com.example;

import android.app.Activity;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ImageView;

public class GrayClass extends Activity {
      private ImageView imageView;
      private Bitmap bitmap;
      private Button button;
      private Bitmap original;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.gray);
      original  = BitmapFactory.decodeResource(getResources(), R.drawable.wallace);
      bitmap    = BitmapFactory.decodeResource(getResources(), R.drawable.wallace);
      button    = (Button) findViewById(R.id.gbutton);
      imageView = (ImageView) findViewById(R.id.gimageView2);
      button.setOnClickListener(new OnClickListener() {

      public void onClick(View v) {
            ((ImageView)findViewById(R.id.gimageView1)).setVisibility(View.GONE);
            button.setVisibility(View.GONE);
              GoGray();     
      }

    });

  }

  private void GoGray() {
        Bitmap oBitmap = original.copy(Bitmap.Config.ARGB_8888, true);
        Bitmap gBitmap = bitmap.copy(Bitmap.Config.ARGB_8888, true);

        goGrayWithNative(oBitmap,gBitmap );
        imageView.setImageBitmap(gBitmap);

  }

  public native void goGrayWithNative(Bitmap bmp1, Bitmap bmp2);
} 
```

这是 .c 文件，我在其中编写了灰色逻辑的代码

```
/*
convertToGray
Pixel operation
*/
JNIEXPORT void JNICALL Java_com_example_GrayClass_goGrayWithNative(JNIEnv
* env, jobject  obj, jobject bitmapcolor,jobject bitmapgray)
{
    AndroidBitmapInfo  infocolor;
    void*              pixelscolor;
    AndroidBitmapInfo  infogray;
    void*              pixelsgray;
    int                ret;
    int             y;
    int             x;

    if ((ret = AndroidBitmap_getInfo(env, bitmapcolor, &infocolor)) < 0) {
        LOGE("AndroidBitmap_getInfo() failed ! error=%d", ret);
        return;
    }

    if ((ret = AndroidBitmap_getInfo(env, bitmapgray, &infogray)) < 0) {
        LOGE("AndroidBitmap_getInfo() failed ! error=%d", ret);
        return;
    }

    if (infocolor.format != ANDROID_BITMAP_FORMAT_RGBA_8888) {
        LOGE("Bitmap format is not RGBA_8888 !");
        return;
    }

LOGE("Bitmap format is not RGBA_8888 !====%d==", infocolor.format ) ;

    if ((ret = AndroidBitmap_lockPixels(env, bitmapcolor, &pixelscolor)) < 0) {
        LOGE("AndroidBitmap_lockPixels() failed ! error=%d", ret);
    }

    if ((ret = AndroidBitmap_lockPixels(env, bitmapgray, &pixelsgray)) < 0) {
        LOGE("AndroidBitmap_lockPixels() failed ! error=%d", ret);
    }

    // modify pixels with image processing algorithm
    LOGI("unlocking pixels height = %d",infocolor.height);
    for(y=0;y<infocolor.height;y++) {
    LOGI("unlocking pixels height = %d",infocolor.width);
        argb * line = (argb *) pixelscolor;
        uint8_t * grayline = (uint8_t *) pixelsgray;

        for(x=0;x<infocolor.width;x++) {

            grayline[x] = 0.3 * line[x].red + 0.59 * line[x].green + 0.11*line[x].blue;
        }
        pixelscolor = (char *)pixelscolor + infocolor.stride;
        pixelsgray = (char *) pixelsgray + infogray.stride;
    }

    LOGI("unlocking pixels");
    AndroidBitmap_unlockPixels(env, bitmapcolor);
    AndroidBitmap_unlockPixels(env, bitmapgray);

} 
```

代码运行良好，但我得到的输出不同，请参阅图片![在此处输入图像描述](../Images/f17626a508bf97457fec9096eaf08631.png)

单击 GoGray 按钮后，它会显示像这样的图像

![在此处输入图像描述](../Images/fa2fe634fda78285c3d7c008f39ea4f5.png)

谁能告诉我错误在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T12:49:22.627

据我所知，Android 位图只能处理每像素 32 位的图像，因此您必须通过在红色、绿色和蓝色通道中重复灰度值来将灰度结果存储为彩色图像，将 Alpha 通道设置为完全不透明。

顺便说一下，如果你分析你的截图，你会发现灰度版本的宽度正好是彩色图像的 1/4，这往往表明这是问题所在。

在 C++ 部分中使用此代码应该可以完成这项工作：

```
// modify pixels with image processing algorithm
LOGI("unlocking pixels height = %d",infocolor.height);
for(y=0;y<infocolor.height;y++) {
LOGI("unlocking pixels height = %d",infocolor.width);
    argb * line = (argb *) pixelscolor;
    argb * grayline = (argb *) pixelsgray;

    for(x=0;x<infocolor.width;x++) {

        uint8_t v = 0.3 * line[x].red + 0.59 * line[x].green + 0.11*line[x].blue;
        grayline[x].red = v;
        grayline[x].green = v;
        grayline[x].blue = v;
        grayline[x].alpha = line[x].alpha
    }
    pixelscolor = (char *)pixelscolor + infocolor.stride;
    pixelsgray = (char *) pixelsgray + infogray.stride;
} 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T12:49:28.360

我无法帮助您使用 NDK，但我很确定您可以使用普通的 Android SDK 创建灰度图像。

# python - 如何将元组列表解压缩到单个列表中？

> ID：12974474
> 
> 赞同：273
> 
> 时间：2012-10-19T12:38:40.790
> 
> 标签：python, list, tuples, list-comprehension

> **可能重复：**
> [Python 中的转置/解压缩函数](https://stackoverflow.com/questions/19339/a-transpose-unzip-function-in-python)

我有一个元组列表，我想将这个列表解压缩成两个独立的列表。我正在寻找 Python 中的一些标准化操作。

```
>>> l = [(1,2), (3,4), (8,9)]
>>> f_xxx (l)
[ [1, 3, 8], [2, 4, 9] ] 
```

我正在寻找一种简洁和pythonic的方式来实现这一点。

基本上，我正在寻找[`zip()`](http://docs.python.org/library/functions.html?highlight=zip#zip)函数的逆运算。

* * *

## 回答 #1

> 赞同：472
> 
> 时间：2012-10-19T12:40:13.177

使用`zip(*list)`：

```
>>> l = [(1,2), (3,4), (8,9)]
>>> list(zip(*l))
[(1, 3, 8), (2, 4, 9)] 
```

该[`zip()`函数](https://docs.python.org/3/library/functions.html#zip)将来自所有输入的元素配对，从第一个值开始，然后是第二个值，等等。通过使用，`*l`您[将所有元组`l`作为*单独的参数*应用到f `zip()`​​unction](https://stackoverflow.com/questions/36901)，因此与first`zip()`配对，然后与and配对。这些恰好与列*或*.`1``3``8``2``4``9`*`l`*

 *`zip()`产生元组；如果您必须有可变列表对象，只需列表`map()`的元组或使用列表推导来生成列表列表：

```
map(list, zip(*l))          # keep it a generator
[list(t) for t in zip(*l)]  # consume the zip generator into a list of lists 
```

* * *

## 回答 #2

> 赞同：87
> 
> 时间：2012-10-19T12:39:59.853

如果你想要一个列表列表：

```
>>> [list(t) for t in zip(*l)]
[[1, 3, 8], [2, 4, 9]] 
```

如果元组列表没问题：

```
>>> zip(*l)
[(1, 3, 8), (2, 4, 9)] 
```*

# java - 使用 javascript 验证 java 对象

> ID：12974477
> 
> 赞同：0
> 
> 时间：2012-10-19T12:38:53.350
> 
> 标签：java, javascript, validation, wicket

我的项目有以下任务：我需要根据脚本中的规则（例如 javascript）**验证一个 java 对象。**

为什么在 JavaScript 中？因为在 javascript 中我可以灵活地创建我想要的规则（例如验证字段的组合，如 validate(tax,recipient)）

现在这是我所拥有的：

1) 我在 javascript 文件 Rules.js 中定义了验证规则

```
function checkPrice(price){
  if(price < 0){
    return false;
  }
} 
```

2) 我有一个普通的 Java 对象（发票）。它必须保持简单！

```
public class Invoice implements Serializable {

  private String details;
  private String tax;
  private String recipient;
  private double price;

  //getter and setter
} 
```

3）我有一个ValidatorObject。这可以是 java 或 javascript 对象。根据你的建议。

这个 ValidatorObject 有一个方法 validate，它以 Javascript 规则文件（参见第 1 点）和 Java 对象 Invoice（参见第 2 点）作为参数。

```
validate(Rules.js, Invoice i){

  //here it must take the Rules.js and use the rules inside to validate the Invoice i 

} 
```

所以我的问题是：是否有任何框架可用于根据 javascript 文件中定义的规则来验证 Java 对象？或者任何教程、视频或建议？

或者如何将 javascript 文件读入 java 对象？javascript有没有getter或setter？

任何事情都会很好！

问候，戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T12:46:07.607

以下是将 ScripEngine 嵌入 Java 应用程序的方法：

```
import javax.script.Bindings;
import javax.script.ScriptContext;
import javax.script.ScriptEngine;
import javax.script.ScriptEngineManager;
import javax.script.ScriptException;

public static void main( String[] args )
   throws
      ScriptException, IOException
{
   final String run;
   if( args.length > 0 )
   {
      run = args[0];
      if( run.contains( "=" ))
      {
         usage();
      }
   }
   else
   {
      run = "run.js";
   }
   File script = new File( run );
   if( script.canRead())
   {
      ScriptEngine engine = new ScriptEngineManager().getEngineByMimeType( "text/javascript" );
      Bindings bindings = engine.getBindings( ScriptContext.GLOBAL_SCOPE );
      bindings.put( "controller", new Controller());
      for( int i = 1; i < args.length; ++i )
      {
         String[] varVal = args[i].split( "=" );
         if( varVal.length == 2 )
         {
            bindings.put( varVal[0], varVal[1] );
         }
         else
         {
            usage();
         }
      }
      info( "Loading and executing: " + script );
      engine.put( ScriptEngine.FILENAME, script.toString());
      engine.eval( new FileReader( script ));
   }
   else
   {
      System.err.println( "Can't read automation script file: " + script );
      usage();
   }
} 
```

在这种情况下，Controller Java 类向 JavaScript 公开了一些公共方法，以使用解释代码的灵活性以及编译的 Java 代码的健壮性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T01:05:27.907

我用犀牛解决了它！我可以在其中读取和操作我的 javascript 文件...

[https://developer.mozilla.org/en-US/docs/Rhino](https://developer.mozilla.org/en-US/docs/Rhino)

# haskell - 对用户定义类型的递归调用的表示法

> ID：12974478
> 
> 赞同：1
> 
> 时间：2012-10-19T12:38:56.427
> 
> 标签：haskell, types, recursion, notation

> **可能重复：**
> [遍历字符串并用haskell中的子字符串替换单个字符](https://stackoverflow.com/questions/12934730/iterating-through-a-string-and-replacing-single-chars-with-substrings-in-haskell)

我正在尝试实现一个查看字符串（[Chars]）并检查每个字母是否应该用另一个字符串替换的函数。例如，我们可能有一个由“XYF”和“X = HYHY”、“Y = OO”的规则组成的 [Chars]，那么我们的输出应该变成“HYHYOOF”。

我想使用我定义的以下两种类型：

```
type Letters = [Char]
data Rule = Rule Char Letters deriving Show 
```

我的想法是，使用警卫的函数应该如下所示。但是问题是，当我想浏览我的所有规则以查看它们中的任何一个是否适合当前字母 x 时，我找不到任何关于递归调用应该是什么样子的信息。我希望任何人都可以就符号的运行方式提供一些提示。

```
apply :: Letters -> [Rule] -> Letters
apply _ _ = []
apply (x:xs) (Rule t r:rs)  
| x /= t = apply x (Rule t rs)
| x == t = r++rs:x
| otherwise  = 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T13:10:01.493

I would suggest a helper function to check whether a rule matches,

```
matches :: Char -> Rule -> Bool
matches c (Rule x _) = c == x 
```

and then you check for each character whether there are any matching rules

```
apply :: Letters -> [Rule] -> Letters
apply [] _ = []
apply s [] = s
apply (c:cs) rules = case filter (matches c) rules of
                       [] -> c : apply cs rules
                       (Rule _ rs : _) -> rs ++ apply cs rules 
```

If you try an explicit recursion on `rules` within `apply`, it will become too ugly, since you need to remember the full rules list for replacing later characters.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T18:44:34.530

我建议您学习使用通用实用程序函数来做到这一点。您在此处需要的两个关键功能：

1.  `lookup :: Eq a => a -> [(a, b)] -> Maybe b`. 在关联列表中查找映射 - 用于表示映射或字典的对列表。
2.  `concatMap :: (a -> [b]) -> [a] -> [b]`. 这类似于`map`，但映射到列表上的函数返回一个列表，结果是连接的 ( `concatMap = concat . map`)。

要使用`lookup`，您需要将`Rule`类型更改为这个更通用的同义词：

```
type Rule = (Char, String) 
```

还要记住，这`String`是 的同义词`[Char]`。这意味着`concatMap`，当应用于 时`String`，将每个字符替换为字符串。现在你的例子可以这样写（我改变了参数顺序）：

```
apply :: [Rule] -> String -> String
apply rules = concatMap (applyChar rules) 

-- | Apply the first matching rule to the character.
applyChar :: [Rule] -> Char -> String
applyChar rules c = case lookup c rules of
                      Nothing -> [c]
                      Just str -> str

-- EXAMPLE
rules = [ ('X', "HYHY")
        , ('Y', "OO") ]

example = apply rules "XYF"  -- evaluates to "HYHYOOF" 
```

我更改了参数顺序，`apply`因为当参数与结果具有相同类型时，通常有助于将该参数设置为最后一个参数（使链接函数更容易）。

`fromMaybe :: a -> Maybe a -> a`我们可以更进一步，通过使用`Data.Maybe`模块中的实用函数（`fromMaybe default Nothing`= `default`，`fromMaybe default (Just x)`= ）将其变成单线`x`：

```
import Data.Maybe

apply rules = concatMap (\c -> fromMaybe [c] $ lookup c rules) 
```

您可以做一个补充练习，即自己手动编写所有这些实用函数的版本：`lookup`、`concatMap`（将其分解为`concat :: [[a]] -> [a]`和`map :: (a -> b) -> [a] -> [b]`）和`fromMaybe`。这样您就可以理解此解决方案中涉及的“全栈”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T22:15:00.337

我的解决方案在结构上与其他解决方案相似，但使用了 monad：

```
import Control.Monad 
import Data.Functor 
import Data.Maybe 

match :: Char -> Rule -> Maybe Letters
match c (Rule c' cs) = cs <$ guard (c == c')

apply :: Letters -> [Rule] -> Letters
apply cs rules = 
  [s | c <- cs
     , s <- fromMaybe [c] $ msum $ map (match c) rules] 
```

我们处理的第一个 monad 是`Maybe a`. 它实际上有点多， a `MonadPlus`，它允许我们使用`msum`（归结`[Nothing, Just 2, Nothing, Just 3]`为第一个“命中”，here `Just 2`）。

第二个 monad 是`[a]`，它允许我们在`apply`.

# css - 插件 Wordpress 高级响应式视频嵌入器 - 在某些浏览器中溢出不好

> ID：12974485
> 
> 赞同：0
> 
> 时间：2012-10-19T12:39:11.823
> 
> 标签：css, wordpress

在我的网站 wordpress 中，我使用插件“Advanced Responsive Video Embedder”来合并视频。这很酷，但我遇到了一个小问题，因为我在网站上添加了一个广告页面，当访问者进入网站时会显示该页面。碰巧在firefox和opera中，广告在插件嵌入的视频前面，所以很酷。但是，在 chrome、safari 和 Internet Explorer 中，嵌入的视频显示在广告的前面。

任何人都知道我该如何解决这个问题？这是插件css的问题吗？

```
.arve-thumbsize {
    width: <?php echo $thumb_width_px; ?>;
    height: <?php echo $thumb_height_px; ?>;
}
.arve-embed-container {
    margin-left: -5px;
    margin-top: 10px;
    position: relative;
    padding-bottom: 56.25%; /* 16/9 ratio */
    padding-top: 30px; /* IE6 workaround*/
    height: 0;
    overflow: hidden;
    margin-bottom: 10px;
}
* html .arve-embed-container {
    margin-bottom: 45px;
    margin-bot\tom: 0;
}
.arce-embed-container div,
.arve-embed-container iframe,
.arve-embed-container object,
.arve-embed-container embed {
    position: absolute;
    top: 0;
    left: 0;
    width: 97%;
    height: 98%;
}
.arve-thumb-wrapper {
    position: relative;
    z-index: 10;
    margin-bottom: 20px;
}
.arve-nothumb-link {
    display: block;
    z-index: 20;
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}
.arve-thumb-thumb {
    z-index: 15;
}
.arve-thumb-play {
    position: absolute;
    z-index: 20;
    opacity: 0.7;
    filter: alpha(opacity=70);
    width: 40px;
    height: 37px;
    top: 50%;
    left: 50%;
    margin-left: -25px;
    margin-top: -19px;
}
.arve-hidden {
    display: none;
}
.arve-hidden-obj {
    width: 100%;
    height: 100%;
} 
```

由于它适用于某些浏览器，我真的不知道它可能是什么。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-23T08:21:45.523

删除`z-index`：

```
.arve-embed-container iframe, .arve-embed-container object, .arve-embed-container embed 
```

我已经使用[Firebug](http://getfirebug.com/)来查明罪魁祸首。根据我的知识，我可以猜测这可能是一个`z-index`问题。然后我检查了所有的 div 看他们是否有一个`z-index`. 我发现我在上面发布的 div 上面有一个`z-index`of `5000`。我已经通过使用覆盖了它`z-index: 0!important;`。

# android - 通过单个编辑文本从 android 设备中搜索数据、文件夹、文件、联系人

> ID：12974487
> 
> 赞同：1
> 
> 时间：2012-10-19T12:39:17.497
> 
> 标签：android, search

下面是来自 android 模拟器的简单图像。如何进行这样的搜索。搜索可以在我们的设备中找到项目。

![在此处输入图像描述](../Images/f15b5ba239c7956ff3b36439897fd0cf.png)

# java - Selenium Webdriver 将鼠标移动到点

> ID：12974488
> 
> 赞同：17
> 
> 时间：2012-10-19T12:39:19.353
> 
> 标签：java, selenium, selenium-webdriver

我目前正在尝试将光标移动到`org.openqa.selenium.Point`已通过检查实时图表上是否出现标记来设置的点 ( )，我无法从中获得任何详细信息，但可以找到 X 和 Y 坐标。

如何将鼠标移至所述点以打开底层 JavaScript 菜单？

### 当前代码

```
//finds marker on the current web page

Point image = page.findImage("C:\\Pictures\\marker.png") ;

//move mouse to this x,y location 

driver.getMouse().mouseMove((Coordinates) image); 
```

这不起作用，因为`Point`不能强制转换为`org.openqa.selenium.interactions.internal.Coordinates`.

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-19T15:59:32.767

恕我直言，您应该注意[Robot.class](https://docs.oracle.com/javase/6/docs/api/java/awt/Robot.html)

*尽管如此，如果您想物理移动鼠标指针，您需要使用 Robot 类采取不同的方法*

```
 Point coordinates = driver.findElement(By.id("ctl00_portalmaster_txtUserName")).getLocation();
  Robot robot = new Robot();
  robot.mouseMove(coordinates.getX(),coordinates.getY()+120); 
```

*Webdriver 提供文档坐标，因为 Robot 类是基于屏幕坐标的，所以我添加了 +120 来补偿浏览器标题。
**屏幕坐标**：这些是从用户计算机屏幕的左上角测量的坐标。您很少会得到坐标 (0,0)，因为它通常在浏览器窗口之外。大约唯一需要这些坐标的情况是，如果要将新创建的浏览器窗口放置在用户单击的位置。在所有浏览器中，这些都位于`event.screenX`和中`event.screenY`。
**窗口坐标**：这些是从浏览器内容区域的左上角测量的坐标。如果窗口是垂直或水平滚动的，这将不同于文档的左上角。这很少是你想要的。在所有浏览器中，这些都在 event.clientX 和 event.clientY 中。
**文档坐标**：这些是从 HTML 文档的左上角测量的坐标。这些是您最常需要的坐标，因为这是定义文档的坐标系。*

更多细节你可以[在这里](http://bharath-marrivada.blogspot.com/2012/03/webdriverselenium-mouseoverhover.html)

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-03-28T18:14:22.973

为什么在[org.openqa.selenium.interactions.Actions.class](http://selenium.googlecode.com/git/docs/api/java/org/openqa/selenium/interactions/Actions.html)可以正常工作时使用*java.awt.Robot ？*只是在说。

```
Actions builder = new Actions(driver);

builder.keyDown(Keys.CONTROL)
   .click(someElement)
   .moveByOffset( 10, 25 );
   .click(someOtherElement)
   .keyUp(Keys.CONTROL).build().perform(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-06T14:36:56.830

我正在使用 JavaScript，但我确信其中一些原则很常见。

我正在使用的代码如下：

```
 var s = new webdriver.ActionSequence(d);
    d.findElement(By.className('fc-time')).then(function(result){
        s.mouseMove(result,l).click().perform();
    }); 
```

`driver = d`. _ `location = l`很简单-它`{x:300,y:500)`只是一个偏移量。

我在测试过程中发现，如果不首先使用该方法来查找现有元素，我无法使其工作，并以此为基础从哪里找到我的点击。

我怀疑定位中的数字比我想象的更难预测。

这是一个旧帖子，但这个回复可能会帮助像我这样的其他新人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-28T13:46:45.033

解决方案是以这种方式实现匿名类：

```
 import org.openqa.selenium.Point;
        import org.openqa.selenium.interactions.HasInputDevices;
        import org.openqa.selenium.interactions.Mouse;
        import org.openqa.selenium.interactions.internal.Coordinates;

        .....

        final Point image = page.findImage("C:\\Pictures\\marker.png") ;

        Mouse mouse = ((HasInputDevices) driver).getMouse();

        Coordinates imageCoordinates =  new Coordinates() {

              public Point onScreen() {
                throw new UnsupportedOperationException("Not supported yet.");
              }

              public Point inViewPort() {
                Response response = execute(DriverCommand.GET_ELEMENT_LOCATION_ONCE_SCROLLED_INTO_VIEW,
        ImmutableMap.of("id", getId()));

    @SuppressWarnings("unchecked")
    Map<String, Number> mapped = (Map<String, Number>) response.getValue();

    return new Point(mapped.get("x").intValue(), mapped.get("y").intValue());
              }

              public Point onPage() {
                return image;
              }

              public Object getAuxiliary() {
                // extract the selenium imageElement id (imageElement.toString() and parse out the "{sdafbsdkjfh}" format id) and return it
              }
            };

        mouse.mouseMove(imageCoordinates); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-27T04:06:10.617

使用 MoveToElement，您将能够找到或单击您想要的任何点，您只需定义第一个参数，它可以是实例 WindowsDriver 时创建的会话（winappdriver）或驱动程序（以其他方式）。否则，您可以将网格（我的情况）、列表、面板或任何您想要的设置为第一个参数。

注意：您的第一个参数元素的左上角将是位置 X = 0 和 Y = 0

```
 Actions actions = new Actions(this.session);
    int xPosition = this.session.FindElementsByAccessibilityId("GraphicView")[0].Size.Width - 530;
    int yPosition = this.session.FindElementsByAccessibilityId("GraphicView")[0].Size.Height- 150;
    actions.MoveToElement(this.xecuteClientSession.FindElementsByAccessibilityId("GraphicView")[0], xPosition, yPosition).ContextClick().Build().Perform(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-07-02T22:27:20.150

如果您使用的是 RemoteWebDriver，则可以将 WebElement 转换为 RemoteWebElement。然后，您可以在该对象上调用 getCoordinates() 以获取坐标。

```
 WebElement el = driver.findElementById("elementId");
        Coordinates c = ((RemoteWebElement)el).getCoordinates();
        driver.getMouse().mouseMove(c); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-04-22T15:38:50.647

得到它的工作

```
Actions builder = new Actions(driver);
WebElement el = some element;
builder.keyDown(Keys.CONTROL)
.moveByOffset( 10, 25 )
.clickAndHold(el)
.build().perform(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-04-28T17:27:32.260

你可以做：

```
JavascriptExecutor js = (JavascriptExecutor) driver;  
js.executeScript("document.elementFromPoint(25,25)"); 
```

然后你会得到元素。您可以添加`.click()`以单击元素。

`executeScript`允许您获取文档元素并使用`elementFromPoint`内置的javascript函数通过X，Y Cord点击

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-11-14T09:26:55.597

```
Robot robot = new Robot();
robot.mouseMove(coordinates.x,coordinates.y+80); 
```

Rotbot 是一个很好的解决方案。这个对我有用。

# c# - ASP.Net Regex Example

> ID：12974490
> 
> 赞同：1
> 
> 时间：2012-10-19T12:39:26.607
> 
> 标签：c#, asp.net, regex

I need a regex code which will detect format like this "1-2-2-2-1-5".This can be longer string or shorter like "1-8-5-6".I mean, the length is not entirely clear.But format is certain one int and one '-'. i tried "(^[-][0-9]){,}" this.But i have no idea about Regex. Can someone help me?Thnx.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:43:14.270

You can try the regex:

```
^[0-9](?:-[0-9])*$ 
```

[**See it**](http://www.rubular.com/r/sMMkMzQVd8)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T10:17:08.170

I found a bug.
My question missing. In situation "1-12-12-1" regex is not matched.
So I changed my regex with "^(\d+(-\d+)*)?$".

# jquery - 通过 jquery 显示跨度的正确方法

> ID：12974491
> 
> 赞同：-1
> 
> 时间：2012-10-19T12:39:28.760
> 
> 标签：jquery, html, css

我在表格单元格 td 中有一个文本框和跨度。如果文本框包含无效的字符范围，则会出现一条消息。我的问题是当消息（跨度）出现时，即使 td 中有足够的位置，文本框也会向左移动一点。这是代码。我如何使它不向左移动。

```
<td style="text-align:left;">
    <asp:TextBox ID="txtWSName" runat="server"></asp:TextBox>
    <span class="grayUrl" id="wrongNameSpan" style="display:none">wrong character</span>
</td> 
```

```
 $("#txtWSName").blur(function () {
     var value = $(this).attr("value");
     if (!IsValidName(value)) {
            $(this).addClass("missing");
            $("#wrongNameSpan").show("slow");
        }
 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:42:53.240

尝试

```
<td style="text-align:left;">
    <asp:TextBox ID="txtWSName" runat="server" style="float:left"></asp:TextBox>
    <span class="grayUrl" id="wrongNameSpan" style="display:none; float:left;">wrong character</span>
</td> 
```

如果您仍然遇到问题，则可能是宽度、填充、TD 或输入或 SPAN 的边距有问题

# asp.net - XSLT 1.0 xsl:boolean 选择测试

> ID：12974495
> 
> 赞同：0
> 
> 时间：2012-10-19T12:39:44.707
> 
> 标签：asp.net, xslt, xslt-1.0

我有一个带有用于序列化的数据注释的对象。它有一个布尔属性，它是真的（用调试器测试），所以 100% 确定，但是当我在 xslt 中有这个时：

```
<xsl:for-each select="order/Coupons/orderedCoupons" >
    <tr>
        <td>Discount <xsl:value-of select="@code"/></td>
        <td>
            <xsl:choose>
                <xsl:when test="@isperc='true'">
                    <xsl:value-of select="@disvalue"/>%
                </xsl:when>
                <xsl:otherwise>Epic fail
                    &#8364; <xsl:value-of select="format-number(@disvalue, '#.###,00', 'euro')" />
                </xsl:otherwise>
            </xsl:choose>
        </td>
    </tr>
</xsl:for-each> 
```

它总是显示**史诗失败**，所以测试总是失败。我也试过：

*   @isperc='真'
*   @isperc=1
*   布尔值（@isperc）
*   @isperc = true()

更多背景信息：它是一个 asp.net 对象，我使用内置数据注释对其进行序列化。.Net 中的 XSLT 支持仅为 1.0。

**编辑**我的一段`coupon.cs`

```
[XmlAttribute("isperc")]
public bool IsPerc
{
    get { return _isPerc; }
} 
```

它不可为空，但正如第二位评论者指出的那样，`<xsl:value-of select="@isperc"/>`well 的价值是什么，它似乎是空的。它在 html 中解析为空。不是空格，不是 null 等等，这很奇怪，因为布尔值是`true`......

**edit2**这也没有输出任何东西`<xsl:value-of select="string(@isperc)"/>`，所以这也失败了`<xsl:when test="string(@isperc) = 'true'">`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T13:07:12.363

```
<xsl:when test="@IsPerc = true()"> 
```

应该匹配 C# 布尔类型。

不过，我见过的一种解决方法是将布尔值转换为数字；

```
<xsl:when test="number(@IsPerc) > 0"> 
```

# eclipse - 如何从 Eclipse 插件中搜索文件？

> ID：12974508
> 
> 赞同：1
> 
> 时间：2012-10-19T12:40:15.393
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp

我想从 Eclipse 插件中搜索文件。我使用了以下代码，但它不起作用。

```
IWorkspaceRoot root = ResourcesPlugin.getWorkspace().getRoot();
    String str = JOptionPane.showInputDialog(null,
            "Please enter the search file name");
    for (IProject project : root.getProjects()) {
        IFile file = project.getFile(str);
        if (file.exists()) {
            JOptionPane.showMessageDialog(null, file.getName());
        } else {
            JOptionPane.showMessageDialog(null, "File Not Found! ");
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T13:30:09.197

获得文件名后，您可以编写一个递归方法，在容器中搜索文件和更多容器。从工作区根目录开始。需要注意的一些事项：

*   IWorkspaceRoot、IProject 和 IFolder 都是 IContainer。
*   IWorkspaceRoot 包含 IProjects
*   IProjects 和 IFolders 包含 IFolders 和 IFiles
*   IContainer 有一个 members() 方法，该方法返回直接包含在该容器中的 IFile 和 IContainer 的列表。
*   IWorkspaceRoot、IProjects、IFolders、IFiles 都是 IResources 并且 IResource 有一个方法可以告诉你它是什么类型的资源（项目、文件夹、文件等）
*   一个 IFile 可以告诉你它的文件名、项目、项目相对路径和绝对文件名

# c# - 如何使用带有 sql 查询的 OleDbDataAdapter 更新数据库？

> ID：12974515
> 
> 赞同：1
> 
> 时间：2012-10-19T12:40:46.857
> 
> 标签：c#, ado.net

我有这个代码：

```
OleDbDataAdapter dataAdapter = new OleDbDataAdapter("SELECT col1, col2 "
                                                  + "FROM tab1", 
                                                    connection); 
```

我希望能够这样做：

```
dataAdapter.UpdateCommand = new OleDbCommand(
            "UPDATE tab1 SET col1 = col1*2, col2 = 300"
          + "WHERE col1 = 5", connection); 
```

如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T12:57:41.920

像这样使用它：

```
var cmd = new OleDbCommand("UPDATE tab1 SET col1 = col1*2, col2 = 300 WHERE col1 = 5", connection);
cmd.ExecuteNonQuery(); 
```

您不需要数据适配器。

# c# - 如何从 url 下载 .txt 文件？

> ID：12974516
> 
> 赞同：-1
> 
> 时间：2012-10-19T12:40:47.763
> 
> 标签：c#, asp.net, download, response

我生成了一个文本文件并保存到项目文件夹中的某个位置。如何将它们重定向到包含该文本文件的 url，以便他们可以下载文本文件。

CreateCSVFile 将 csv 文件创建到基于数据表的文件路径。

来电：

```
string pth = ("C:\\Work\\PG\\AI Handheld Website\\AI Handheld Website\\Reports\\Files\\report.txt");
CreateCSVFile(data, pth); 
```

和功能：

```
public void CreateCSVFile(DataTable dt, string strFilePath)
{

    StreamWriter sw = new StreamWriter(strFilePath, false);
    int iColCount = dt.Columns.Count;

    for (int i = 0; i < iColCount; i++)
    {
        sw.Write(dt.Columns[i]);

        if (i < iColCount - 1)
        {
            sw.Write(",");
        }
    }

    sw.Write(sw.NewLine);
    // Now write all the rows.
    foreach (DataRow dr in dt.Rows)
    {
        for (int i = 0; i < iColCount; i++)
        {
            if (!Convert.IsDBNull(dr[i]))
            {
                sw.Write(dr[i].ToString());
            }

            if (i < iColCount - 1)
            {
                sw.Write(",");
            }
        }
        sw.Write(sw.NewLine);
    }
    sw.Close();
    Response.WriteFile(strFilePath);
    FileInfo fileInfo = new FileInfo(strFilePath);

    if (fileInfo.Exists)
    {
        //Response.Clear();
        //Response.AddHeader("Content-Disposition", "attachment; filename=" + fileInfo.Name);
        //Response.AddHeader("Content-Length", fileInfo.Length.ToString());
        //Response.ContentType = "application/octet-stream";
        //Response.Flush();
        //Response.TransmitFile(fileInfo.FullName);

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:59:40.067

之后`sw.Close();`只是`Response.Redirect()`他们到文本文件的 URL。但是，您必须获取 URL，而不是物理硬盘驱动器上的路径。根据您的代码，您可以执行以下操作：

```
Uri appRootUri = new Uri(HttpContext.Current.Request.ApplicationPath);
Uri fileUri = new Uri(Path.GetFullPath(strFilePath));

Uri relativeUri = fileUri.MakeRelativeUri(appRootUri);

Response.Redirect("~/" + relativeUri.ToString()); 
```

正如阿奎那在评论中所建议的那样，你真的应该走另一条路。您应该知道要存储文件的位置的相对路径，在这种情况下，您可以这样做：

```
// If you want to store it at http://yourapplication/files/file.txt
string relativeFilePath = "/files/file.txt";

CreateCSVFile(dt, Server.MapPath(relativeFilePath));
Response.Redirect("~" + relativeFilePath); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T12:52:22.377

Response.Redirect("~/Reports/Files/report.txt");

# emacs - Mx align-regexp 与 Cu Mx align-regexp 行为不一致

> ID：12974518
> 
> 赞同：6
> 
> 时间：2012-10-19T12:40:54.097
> 
> 标签：emacs, alignment, elisp

我尝试为 emacs 编写一些新的对齐规则，并发现这种奇怪且不一致的行为。当前缓冲区内容：

```
"some thing" like => this
   hello => world
and => again 
```

键入`M-x``align-regexp``RET``[[:lower:]]+\(\s-+\)=>``RET`结果后看起来如所愿：

```
"some thing" like => this
             hello => world
             and => again 
```

但是在`C-u``M-x``align-regexp``RET``[[:lower:]]+\(\s-+\)=>``RET``1``RET``1``RET``y``RET`我得到这个之后：

```
"some thing" like => this
   hello          => world
and               => again 
```

如果我将它放入`align-rules-list`. 如何解决这个问题？我想先得到结果。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-19T13:10:59.377

好问题。

当您在 Emacs 中运行*命令*时，请记住交互式表单是您的预处理参数。

要查看*函数*最终收到的内容，请按`C-x ESC ESC`

在这种情况下，您会在前一种情况下看到：

```
(align-regexp 1 57 "\\(\\s-*\\)[[:lower:]]+\\(\\s-+\\)=>" 1 1 nil) 
```

而这在后者

```
(align-regexp 1 57 "[[:lower:]]+\\(\\s-+\\)=>" 1 1 t) 
```

# c# - 指定行和单元格中的 DataGridView CellFormatting

> ID：12974520
> 
> 赞同：1
> 
> 时间：2012-10-19T12:41:06.530
> 
> 标签：c#, visual-studio-2010, datagridview, formatting

我正在尝试格式化 DataGridView 中的指定行，但它会一直格式化我的 DataGridView 中的所有行。这就是我正在做的事情：

```
private void dgwParti_CellFormatting(object sender, DataGridViewCellFormattingEventArgs e)
    {
        foreach (DeParti tmp in bnsParti)
        {
            if (tmp.Arti.Type == ArtiType.Fast)
            {
                if (e.ColumnIndex == 0 || e.ColumnIndex == 3 ||
                    e.ColumnIndex == 8 || e.ColumnIndex == 9)
                {
                    e.Value = "";
                }
            }
        }
    } 
```

使用这种类型的代码，它会在所有行中将单元格值设置为“”，但我只希望当 Arti 类型为 Fast 时该值为“”。有任何想法吗。
提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T12:47:26.790

如果您必须格式化指定的行，为什么要检查列？

访问 DataBoundItem（与正在格式化的行关联的对象）并根据您的逻辑修改 Value。不要直接访问绑定源。你的代码应该是

```
private void dgwParti_CellFormatting(object sender, DataGridViewCellFormattingEventArgs e)
{
    if ((Rows[e.RowIndex].DataBoundItem as DeParti).Arti.Type == ArtiType.Fast)
    {
         e.Value = "";
    }
} 
```

这将“清理”行中的所有单元格，如果您希望仅在某些列上设置 Value=""，则可以添加检查，例如

```
private void dgwParti_CellFormatting(object sender, DataGridViewCellFormattingEventArgs e)
{
    if ((Rows[e.RowIndex].DataBoundItem as DeParti).Arti.Type == ArtiType.Fast
        && e.ColumnIndex == 8)
    {
         e.Value = "";
    }
} 
```

# php - 使用 PHP 转换混合的 HTML 文本

> ID：12974523
> 
> 赞同：0
> 
> 时间：2012-10-19T12:41:16.903
> 
> 标签：php, html, regex, parsing

> **可能重复：**
> [如何使用 PHP 解析和处理 HTML？](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)

有人可以帮我找到一个解析具有 HTML 和常规文本的文本的解决方案。例如

```
This is my awesome <b>text</b>. Now <a href="http://google.com">starts</a> a new line...

<img src="http://example.com/image.png"/><br>
<br>
I push news to http://twitter.com . 
```

这应该成为

```
This is my awesome <b>text</b>. Now <a href="http://google.com">starts</a> a new line...<br>
<br>
<img src="http://example.com/image.png"/><br>
<br>
I push news to <a href="http://twitter.com">twitter.com</a> . 
```

我主要在寻找一个神奇的正则表达式替换功能......现在我做

```
$text = preg_replace("@(src|href)=\"https?://@i",'\\1="', $description);
$text = nl2br(preg_replace("@(((f|ht)tp:\/\/)[^\"\'\>\s]+)@",'<a href="\\1" target="_blank">\\1</a>', $text)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T12:44:16.280

[nl2br](http://php.net/manual/en/function.nl2br.php)做得很好。

```
file_get_contents('filename.html');
nl2br($text); 
```

它专为满足您的需求而设计。

如果您担心 double`\n`或已经存在的`<br />`元素，您必须为输入文本（如果您可以控制它）或预处理设计一个方案。

也许在申请之前将all 替换`\n\n`为`\n`and all `<br />\n`with 。`\n``nl2br`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T14:05:42.420

你可以试试这个

```
$text = your source text
$text = preg_replace(
    array('/\n/m',  '/\<br\>\<br\>/m' '/\<br\>$/'),
    array("\n<br>", "<br>", ''),
    $text
); 
```

再见

# database - 如何以单视图形式显示其他表格属性并在相应表格中插入值

> ID：12974532
> 
> 赞同：0
> 
> 时间：2012-10-19T12:41:44.033
> 
> 标签：database, yii

我有两个表 QBQuestion(Questionid,Question,OptionId) 和 Option(OptionId,Option)。我想在 QBQuestion 的视图表单上显示选项表单？我想创建多项选择题。即对于单个问题，我们可以添加多个选项。为此，我想使用添加按钮 si 创建选项字段，当我们单击添加按钮时，我们可以插入更多选项，并且还希望使用网格在表格中显示所有插入的选项。所以我该怎么做？请帮我....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T12:48:54.043

1）在模型中为这两个东西添加关系。

```
public function relations() {
    return array(
        'valOptions' => array(self::BELONGS_TO, 'Option', 'OptionId'),
    );
} 
```

2) 在 CGridView 中使用延迟加载。

```
$this->widget('zii.widgets.grid.CGridView', array(
    'dataProvider' => new CActiveDataProvider('QBQuestion'),
    'columns' => array(
        'Questionid',
        'Question',
        'valOptions.Option',
    ),
)); 
```

我认为这就是你所需要的。

# android - 无意刷新Android标签

> ID：12974542
> 
> 赞同：2
> 
> 时间：2012-10-19T12:42:57.013
> 
> 标签：android, tabs, android-tabhost

请问如何在不添加意图的情况下刷新 Tab 2（标签 2，Live blog）的内容。

TabHost th = (TabHost)findViewById(R.id.tabhost1); th.setup();

```
 TabHost.TabSpec spec = th.newTabSpec("tag1")
     .setIndicator("Testimonies", getResources()
      .getDrawable(R.drawable.icon_testimonies_tab))
        .setContent(R.id.tab1);
           th.addTab(spec);

     spec = th.newTabSpec("tag2")
     .setIndicator("Live Blog", getResources()
     .getDrawable(R.drawable.icon_liveblog_tab))
      .setContent(R.id.tab2);
        th.addTab(spec);

        spec = th.newTabSpec("tag3")
        .setIndicator("Streaming Settings", getResources()
        .getDrawable(R.drawable.icon_streamingsetting_tab))
        .setContent(R.id.tab3);
          th.addTab(spec);

          th.setCurrentTab(1);

          th.getCurrentView().setVisibility(View.VISIBLE); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T23:00:41.067

我们再次“见面”，@meduteniopeyemi！我努力解决你所说的问题。我曾经这样做的方法是：

```
tabHost.setOnTabChangedListener(new OnTabChangeListener() {

                    public void onTabChanged(String tabId) {
                            //YOUR CODE checking if "tabId" is the tab you want to REFRESH
                    }
            }); 
```

到目前为止它对我有用。它只是让您可以毫无问题地进行任何刷新。

# wcf - 关闭 WCF 代理

> ID：12974553
> 
> 赞同：2
> 
> 时间：2012-10-19T12:43:37.777
> 
> 标签：wcf

当涉及到 WCF 代理时，我一直遵循 try/Close/catch/Abort 的指导。我现在面临一个代码库，它在 MVC 控制器中创建代理并让它们超出范围。我认为我们需要编辑代码库以使用 try/Close/catch/Abort 但存在阻力。

有谁知道我可以捕获的指标（例如 perfmon）来说明问题/好处。或者一个明确的参考，说明问题/好处没有人可以争论？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T15:12:25.957

您可以创建一个示例应用程序来模拟该问题。虽然我没试过 你可以试试这个

1.  创建一个简单的服务并将 and 限制`maxConcurrentCalls`为`maxConcurrentSessions`5。

2.  创建一个客户端应用程序，并在其中调用服务方法而不关闭连接。

3.  启动 6 个或更多客户端

4.  查看从客户端打开新连接时会发生什么。客户可能会等待一段时间，然后您会遇到一些异常。

如果客户端没有正确关闭连接，连接仍将在服务中保持打开状态，那么如果有 1000 个客户端一次连接到服务并保持连接打开，会发生什么情况？该服务有一个限制，它可以一次提供“n”个连接，因此该服务无法处理来自客户端的任何新请求，这就是关闭连接非常重要的原因。

我想你知道[`using`](http://www.infoq.com/news/2009/03/WCF-Dispose)WCF 服务中的问题。在我的应用程序中，我使用此[线程](https://stackoverflow.com/questions/13000736/is-it-correct-to-implement-idisposable-on-singleton/13013904#13013904)中所述的扩展方法关闭了 WCF 连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T19:28:59.347

您是否在服务器和客户端的命令提示符下尝试过简单的“netstat -N”？Yoy 可能会看到很多等待/挂起的连接，这可能会无缘无故地耗尽您的服务器资源。

# c# - 正则表达式上的数学表达式

> ID：12974555
> 
> 赞同：1
> 
> 时间：2012-10-19T12:43:43.707
> 
> 标签：c#, .net, regex

我有很多文本行，我必须找到一些行并更改它们。

我写了这样的正则表达式规则：

```
^(Position) ([0-9]+)$ 
```

例如，我必须找到所有这样的行：

位置 10
位置 11
位置 12

现在我必须将数字增加到 5。我怎样才能通过正则表达式来做到这一点？我尝试编写这样的正则表达式规则：

```
$1 {$2+ 5} 
```

我需要得到结果：

位置 15
位置 16
位置 17

但我有：

位置 {10 +5}
位置 {11+5}
位置 {12+5}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T12:59:02.333

Regex Replace 函数采用字符串或函数。您使用了字符串替换，因此只插入了字符串。如果要进行整数运算，则需要使用函数替换方法。

[http://msdn.microsoft.com/library/cft8645c(v=vs.80).aspx](http://msdn.microsoft.com/library/cft8645c(v=vs.80).aspx)

这段代码不正确，它应该只是显示如何完成它

```
 Regex.Replace("^(Position) ([0-9]+)$", ReplaceFunction);

 public string ReplaceFunction(Match m)  { return "Position " + (int.Parse(m.Groups[2].Value) + 5); }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T13:00:45.757

```
string input = @"Position 10";
string output = Regex.Replace(input, "^Position ([0-9]+)$", match => "Position " + Int32.Parse(match.Groups[1].Value) + 5); 
```

# php - 无法识别对 Yii API 的 Ajax 调用没有响应标头的问题

> ID：12974559
> 
> 赞同：0
> 
> 时间：2012-10-19T12:44:01.320
> 
> 标签：php, jquery, ajax, api, yii

**概述**

我目前正在开发一个 jQuery/HTML5 项目，该项目使用一系列图表显示 Web 性能数据，使用内部 API 来检索数据。API 由 Yii 提供支持，但我没有在开发它，所以我不能自己更改或试验它。

基本上我希望有人可以帮助确定 API 是否是问题的根本原因，或者是否是我的 jQuery 中的 Ajax 不正确的问题。

我的应用程序经历的过程的一个小解释......

1.  应用程序加载，使用用户详细信息通过 API 进行身份验证。从 API 接收 API 密钥。
2.  检索到密钥后，会进行多次调用以从 APi 检索数据以显示为 Web 性能数据。
3.  在设定的时间间隔内，对数据库调用泛型以检查 API 密钥是否已过期。
4.  如果密钥已过期，它会再次向 API 请求新的 API 密钥，如步骤 1 中所述。如果获取 API 密钥有任何问题，则此时用户将被踢出。
5.  重新启动周期，不包括获取数据。

**问题**

所有的 Ajax 调用都是跨域的，因为项目和 API 都在不同的子域上。这些是使用 JSONP 和 jQuery 回调完成的。

我遇到的问题是，当我需要验证密钥是否有效时，如果它不再有效，API 会返回一个 401 错误，我的 Ajax 没有注册。如果我在 Firefox 中查看 API URL，我可以看到返回的 Json 数据，包含在回调中，但是当我检查 firebug 时，它说有请求，但没有响应。

基本上，当 API 返回不是 200 OK 的数据时，它根本不会发送响应头。

但是，我在终端中使用 cUrl 手动调用了 API，并收到了响应标头，以及在 Google Chrome 中。

如果有人能告诉我这是否是 Firefox/jQuery 的一个众所周知的问题，或者这是否是 Yii API 的问题，我将非常感激。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-19T13:12:04.623

尝试在您的 ajax 调用之前添加它：

```
jQuery.support.cors = true; // force cross-site scripting in IE 
```

# c# - 程序下载文件时进度条问题

> ID：12974562
> 
> 赞同：1
> 
> 时间：2012-10-19T12:44:10.647
> 
> 标签：c#, .net, asynchronous, download, progress-bar

我对一个简单的更新程序有疑问。它应该下载存档并提取它。嗯，这很好用。但我无法克服进度条。它显示在 setProgressBar(progressBar1.Maximum/20) 很好。但它的价值的所有其他变化根本没有表现出来。我无法定义这种行为的原因。有人可以帮我吗？

UPD：似乎 e.ProgressPercentage 总是返回 0，只有一次 100，就在下载完成之前。

这是我的代码：

```
static EventWaitHandle _waitHandle = new AutoResetEvent(false);

void UpdaterForm_Shown(object sender, System.EventArgs e)
{
    setProgressBar(progressBar1.Maximum/20);

    UpdateProgram(address, login, password);

    setProgressBar(progressBar1.Maximum);

    ExecuteProgram(Path + "../" + programName + ".exe");

    Application.Exit();     
}

private void UpdateProgram(string pathToUpdateArchive, string login, string pass)
{
    string downloadedArchive = null;

    Thread downloadAsync = new Thread(() => DownloadFileFromFtp(pathToUpdateArchive, login, pass, out downloadedArchive));
    downloadAsync.Name = "downloadAsync";
    downloadAsync.Start();

    _waitHandle.WaitOne();

    ExtractFile(downloadedArchive, Path + "/../");
}

private void DownloadFileFromFtp(string address, string login, string password, out string archivePath)
{
    fileName = address.Substring(address.LastIndexOf('/') + 1);

    try
    {
        WebClient wc = new WebClient();
        wc.Credentials = new NetworkCredential(login, password);

        wc.DownloadProgressChanged += new DownloadProgressChangedEventHandler(wc_DownloadProgressChanged);
        wc.DownloadFileCompleted += new System.ComponentModel.AsyncCompletedEventHandler(wc_DownloadFileCompleted);     

        archivePath =Path + fileName;
        wc.DownloadFileAsync(new Uri(address), archivePath);
    }
    catch
    {
    }
}

void wc_DownloadProgressChanged(object sender, DownloadProgressChangedEventArgs e)
{
    setProgressBar(e.ProgressPercentage*7/10 + 10);
}

void wc_DownloadFileCompleted(object sender, System.ComponentModel.AsyncCompletedEventArgs e)
{
    _waitHandle.Set();
}

private void setProgressBar(int value)
{
    if (progressBar1.InvokeRequired)
        this.BeginInvoke((MethodInvoker)delegate { progressBar1.Value = value; });
    else
        progressBar1.Value = value;
} 
```

# android - Android - 继承活动打造风格

> ID：12974574
> 
> 赞同：0
> 
> 时间：2012-10-19T12:44:53.253
> 
> 标签：android, inheritance, layout, user-interface, android-activity

我正在尝试在我的应用程序中的活动之间进行继承。
我想为我的所有应用程序创建“一般活动”样式。

例如，这个“一般活动”包括`toolbar`和`statusbar`。我想在我的程序的每个活动中都显示两者。

我这样写`BaseActivity`布局：

```
<include layout="@layout/titlebar" />
<!-- Some control that can contain layout -->
<include layout="@layout/statusbar" /> 
```

这`MainActivity`延伸了`BaseActivity`。
我想在代码中插入`MainActivity`到特定空间的布局`BaseActivity`。

有可能这样做吗？如果是，我如何在这个特定的空间中设置我的继承活动的布局`BaseActivity`？有没有可以包含布局的控件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:51:36.780

当然，有可能。您将像进行任何 Java 继承一样进行操作。您将要创建一个`BaseActivity`which will `extend` `Activity`。你的另一个`Activities,`意志`extend` `BaseActivity`。并非总是如此，但通常，您会希望自己`BaseActivity`成为`abstract class`. 您不想创建它的实例。所以，你应该`setContentView`从`EXTENDING` `Activity`. 这样每个`Activity`人都会有自己的布局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T13:05:33.190

*这可以从 java 端实现（请注意，我还没有尝试过），这是一个示例[Reusing layout XML and the code behind](https://stackoverflow.com/questions/3206643/reusing-layout-xml-and-the-code-behind) .*

***这也可以通过布局来完成。***

您必须为工具栏或状态栏制作单独的布局 (xml)，然后必须包含在所需的布局中。

[重用布局](http://developer.android.com/training/improving-layouts/reusing-layouts.html)将是有用的链接和[Android 布局技巧 #2：包含以重用](http://www.curious-creature.org/2009/02/25/android-layout-trick-2-include-to-reuse/)

# permissions - 不同的 DCOM / COM 安全设置意味着什么？

> ID：12974576
> 
> 赞同：10
> 
> 时间：2012-10-19T12:44:59.523
> 
> 标签：permissions, com, opc, dcom, opc-da

我们的应用程序广泛使用 COM 和 DCOM，因此我们需要确保正确设置 COM 安全权限。我知道我可以在组件服务 MMC 管理单元下访问这些权限，并且我可以在计算机的属性页下设置默认值/限制

![我的电脑属性页面的屏幕截图](../Images/3be4399ddc0ce37ea5290cca943aea34.png)

在 DCOM Config 节点下，我可以向下钻取并为各个应用程序设置安全权限

![Logger 应用程序属性页面的屏幕截图](../Images/0bfd8fbdca49f49e1db8d8f8cf25ade9.png)

我也了解“默认值”（除非在每个应用程序基础上明确设置权限，否则 DCOM 应用程序将使用什么）和“限制”（即使每个应用程序设置超过这些设置也会强制执行哪些权限）之间的关系，但是我不了解（也找不到任何文档）我可以设置的不同设置之间的区别

*   “访问”、“启动”、“激活”和“配置”权限有什么区别？
*   这些设置会影响 COM 应用程序，还是仅影响 DCOM 应用程序？
*   如果使用远程 DCOM，我需要在服务器和客户端上设置权限，还是只在客户端上设置权限？
*   是否有任何文件可以解释上述内容？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-19T13:12:31.697

[安全选项卡上的设置是注册表中每个 AppID 的安全配置，您将在AppID Key](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682359%28v=vs.85%29.aspx)中找到有关 MSDN 的更多信息：

> **AccessPermission** 描述可以访问此类实例的主体的访问控制列表 (ACL)。此 ACL 仅由不调用 CoInitializeSecurity 的应用程序使用。
> 
> **LaunchPermission** 描述可以为此类启动新服务器的主体的访问控制列表 (ACL)。

当 COM 客户端尝试访问 COM 服务器时，COM 子系统会根据这些访问列表检查客户端凭据并决定是否允许访问服务器，如果服务器尚未启动，是否允许其启动。因此，这两个列表 - 用于常规访问和*新服务器*启动（如果有必要）。

请注意，这些是每个应用程序的设置。特定类应该在注册表上具有[CLSID 到 APPID 的映射](http://msdn.microsoft.com/en-us/library/windows/desktop/ms679695%28v=vs.85%29.aspx)才能正确关联。

# iphone - 键盘在 UItextField / TextView iPhone 中向上移动时的滚动视图问题

> ID：12974579
> 
> 赞同：1
> 
> 时间：2012-10-19T12:45:12.193
> 
> 标签：iphone, objective-c, uiscrollview, uitextfield, uitextview

我的视图上有一个**滚动**视图，因为我有所有子视图，如下所示

界面视图

```
 Scroll View

          1.ImageView
          2.Table view
          3.Text View 
```

![在此处输入图像描述](../Images/5bb8128b8e9739cd15de676b1aca4044.png)

√√ 要在键盘出现/关闭时移动滚动视图，我在 textview 委托方法中实现了如下逻辑 √√

```
- (void)textViewDidBeginEditing:(UITextView *)textView;
{
      //To move the view down 
      [UIView beginAnimations:nil context:NULL];
      [UIView setAnimationDelegate:self];
      [UIView setAnimationDuration:0.3];
      [UIView setAnimationBeginsFromCurrentState:YES];
      scrollView.frame = CGRectMake(scrollView.frame.origin.x, (scrollView.frame.origin.y - 120), scrollView.frame.size.width, scrollView.frame.size.height);
      [UIView commitAnimations];

}

- (void)textViewDidEndEditing:(UITextView *)textView 
{   
      //To move the view down 
      [UIView beginAnimations:nil context:NULL];
      [UIView setAnimationDelegate:self];
      [UIView setAnimationDuration:0.3];
      [UIView setAnimationBeginsFromCurrentState:YES];
      scrollView.frame = CGRectMake(scrollView.frame.origin.x, (scrollView.frame.origin.y + 120), scrollView.frame.size.width, scrollView.frame.size.height);
      [UIView commitAnimations];
} 
```

√√ 此方法有助于根据键盘上下移动视图，

但这是滚动的问题。

**用户不能在键盘的感知中滚动所有视图。视图向上滚动到某个位置，如下所示，我们看不到图片/表格的第一列。**

![在此处输入图像描述](../Images/348c4730fd98a777958fe7372ed31e54.png)

**如果用户想要在存在键盘的情况下显示第一列/个人资料图片是不可能的。如何解决这个问题。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T12:58:56.840

首先将滚动内容设置为

```
scrollView.contentSize=CGSizeMake(320, 600); 
```

然后在调用 textView 委托方法时为内容设置动画

```
- (void)textViewDidBeginEditing:(UITextView *)textView;
{  
  [scrollView setContentOffset:CGPointMake(0, 120 ) animated:YES]; 
}

- (void)textViewDidEndEditing:(UITextView *)textView 
{
 [scrollView setContentOffset:CGPointMake(0, 0 ) animated:YES]; 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T12:59:25.210

首先，您不想使用`textViewDidBeginEditing:`显示/隐藏键盘的方法。为此，您应该注册相应的通知。这可以放在你的`viewDidLoad`.

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillShow:) name:UIKeyboardWillShowNotification object:nil];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillHide:) name:UIKeyboardWillHideNotification object:nil]; 
```

然后，如果显示键盘，请确保不要移动整个滚动视图，而是缩小它的大小。

```
- (void)keyboardWillShow:(NSNotification *)notif
{
    CGSize kbSize = [[[notif userInfo] objectForKey:UIKeyboardFrameEndUserInfoKey] CGRectValue].size;
    double duration = [[[notif userInfo] objectForKey:UIKeyboardAnimationDurationUserInfoKey] doubleValue];

    // Shrink the scroll view's content
    UIEdgeInsets contentInsets = UIEdgeInsetsMake(0.0, 0.0, kbSize.height, 0.0);
    self.scrollView.contentInset = contentInsets;
    self.scrollView.scrollIndicatorInsets = contentInsets;

    // Scroll the text field to be visible (use own animation with keyboard's duration)
    CGRect textFieldRect = [_activeTextField convertRect:_activeTextField.bounds toView:self.scrollView];
    [UIView animateWithDuration:duration animations:^{
        [self.scrollView scrollRectToVisible:CGRectInset(textFieldRect, 0.0, -10.0) animated:NO];
    }];
} 
```

此代码具有一些附加功能，因为我还必须移动滚动视图的内容，但可以帮助您入门。然后当键盘隐藏...

```
- (void)keyboardWillHide:(NSNotification *)notif
{
    double duration = [[[notif userInfo] objectForKey:UIKeyboardAnimationDurationUserInfoKey] doubleValue];

    // Set content inset back to default with a nice little animation
    [UIView animateWithDuration:duration animations:^{
        UIEdgeInsets contentInsets = UIEdgeInsetsZero;
        self.scrollView.contentInset = contentInsets;
        self.scrollView.scrollIndicatorInsets = contentInsets;
    }];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T12:55:27.527

显示键盘时应用内容偏移。并在隐藏时恢复。

```
[scrollView setContentOffset:CGPointMake(0.0f, 120.0f) animated:YES]; 
```

隐藏键盘调用后。

```
[scrollView setContentOffset:CGPointZero animated:YES]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T13:01:46.123

只需更改 ContentOffset`ScrollView` 无需更改`ScrollView`您在代码中所做的原点，这样滚动视图将始终滚动。这样做你需要设置 upur ScrollViw 的 ContentSize 至少 550 只检查什么是适当的 ContentSize。我创建了一个方法，您只需要调用我的方法并适当地传递所需的参数

还有一件事设置的`ContentSIze`超过`UISCrollView`它的`SuperView at where you have created the`ScrollView `or in`ViewViewAppear的高度`method. (CurrentView)`

```
 [contentScrollView setContentSize:CGSizeMake(320, 620)];

  And Call This Method As you click on TextField or on the Screen(In Touch Ended when you need to readjust ContentOffset)

  - (void)adjustContetOffset:(BOOL)yes withOffSet:(CGFloat)offSet
  {  

    contentOffSetY = offSet ;
     //By this you can track more suppose you have change the Orientation of Device then set Appropriate Offset.
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:0.4];

    if(yes){
        isScrolledUp = TRUE;
        contentScrollView.contentOffset = CGPointMake(0, contentOffSetY);
    }
    else
    {
        isScrolledUp = FALSE;
       //by this flag you can Track that OffSet of ScrollView has changed 
        contentScrollView.contentOffset = CGPointMake(0, contentOffSetY);
    }

    [UIView commitAnimations];

  }

    //this methods 'll call whenever you 'll touch the SCreen
  -(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event{

    if(isScrolledUp){
    [self adjustContetOffset:NO withOffSet: 0.0];
   }
    [searchTextField resignFirstResponder];
   } 
```

我希望它对你有帮助。

# c# - 无法理解函数 代码

> ID：12974591
> 
> 赞同：1
> 
> 时间：2012-10-19T12:45:55.967
> 
> 标签：c#

我知道 func 是什么，但无法理解以下代码：

有一个简单的属性：

```
 public Func<DomainFacade> BusinessFacadeFactory { get; set; } 
```

这就是属性的设置方式：

```
 this.BusinessFacadeFactory = () => new DomainFacade(); 
```

现在这种设置属性的方式，是匿名方法还是别的什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T12:47:06.983

这称为[lambda 表达式](http://msdn.microsoft.com/en-us/library/bb397687.aspx)。

它是一种更紧凑的匿名方法形式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T12:56:01.923

`() => new DomainFacade()`是一个 lambda 表达式

它是代替 a 编写 的**未命名方法****编译器**将其转换为**委托实例**`delegate`

 ****它的真实格式是

`(parameter)=>expression or a statement block`

由于`func`需要`delegate`分配 a，我们可以编写 a`lambda expression`而不是在`delegate`内部将其**转换**为委托实例。

所以，

`()`表示一个空参数

`new DomainFacade();`是表达式

内部被编译器转换为委托

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T12:47:31.460

`() => new DomainFacade()`是一个*lambda 表达式*。
它是一个内联方法，作为委托值返回。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T12:48:38.400

正如其他人所说，这是一个 lambda 表达式。以下是它会以这样的长格式分解的内容：

```
this.BusinessFacadeFactory = () => new DomainFacade(); 
```

然后

```
this.BusinessFacadeFactory = new delegate(){ return new DomainFacade()}; 
```

然后

```
...
BusinessFacadeFactory = OnBusinessFacadeFactory; 
...

private DomainFacade OnBusinessFacadeFactory()
{
  return new DomainFacade()
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-19T12:48:53.890

它是一个 lambda 表达式，是创建匿名方法的简写。

```
() 
```

是输入参数（即无）

```
new DomainFacade(); 
```

是方法体。****

# logging - 基于 xml 的配置的 Azure 诊断问题

> ID：12974593
> 
> 赞同：1
> 
> 时间：2012-10-19T12:46:02.933
> 
> 标签：logging, azure, azure-diagnostics

我花了一整天的时间尝试设置 Windows Azure 诊断模块。我使用 diagnostics.wadcfg 为工作人员和 Web 角色设置了 WAD。此 wadcfg 文件正确复制到 bin 文件夹。这是我的[WorkerRole](https://gist.github.com/3917916)和[WebRole](https://gist.github.com/3917924)的 wadcfg 文件（更清晰问题的链接）。对于诊断配置初始化，我使用非常简单和通用的调用：只是

```
DiagnosticMonitor.Start("Microsoft.WindowsAzure.Plugins.Diagnostics.ConnectionString"); 
```

在 WorkerRole 和 WebRole 中（两个类 - RoleEntryPoint 的后代） OnStart()

连接字符串设置正确，服务配置中的两个角色部分都包含 LocalResource 部分

```
<LocalResources>
    <LocalStorage name="DiagnosticStore" sizeInMB="5000" cleanOnRoleRecycle="false"/>
</LocalResources> 
```

不幸的是，这没有像我预期的那样工作：没有 IIS 日志发送，没有自定义目录内容发送到 blob，性能计数器和 WindowsEventLogs 一旦正确发送，但随后停止（由于很少有初始发送，所以没有添加更多行）

wad-control-container 对两个角色都有非常奇怪的 xml 配置：[WorkerRole](https://gist.github.com/3918017)和[WebRole](https://gist.github.com/3918025)。

我缺少什么以及通过 diagnostics.wadcfg 初始化诊断的正确方法是什么？

为什么存储的配置与 diagnostics.wadcfg 格式如此不同？

我应该`DiagnosticMonitor.SetCurrentConfiguration()`在监视器初始化后运行以将当前配置存储在 Blob 中吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T13:42:55.347

如果您想使用 diagnostics.wadcfg（我首选的角色实例默认方法），那么您应该从 OnStart() 中删除所有代码。如果您只是传递默认值，实际上没有理由再调用 Start 了。即使您什么都不做（假设您包含插件），代理也会自动以默认值启动。

此外，除非您特别需要超过 4GB 的磁盘配额空间，否则没有理由再设置 LocalResource。在这种情况下，您可以设置更大的值。默认情况下，诊断代理会为自己分配 4GB 的本地资源。

要使用 diagnostics.wadcfg，只需将其标记为内容或复制本地（确保已打包）。它需要位于辅助角色的根目录（在 Worker.cs 旁边）或 web 角色的 bin 目录中。假设您已正确配置它，如果它尚未在 blob 存储中找到一组配置的值，它将使用这些值作为默认值。

三个注意事项：

1.  您不能在此处使用自定义性能计数器（除非它们已经安装在机器上）。该代理在大多数将安装自定义计数器的启动脚本之前运行，因此如果您在 diagnostics.wadcfg 中配置自定义计数器，则为时过早，它将失败。
2.  小心你的配额号码。如果您不小心为您的数据源分配了超过 4GB 的空间（除非您更改配额限制），则 Stuff 将会失败。
3.  Diagnostics.wadcfg is used as the last default. If you set a value (which you are doing programmatically), it will use that first. If it finds a value already in blob storage (think reboot), it will use that. It only works when nothing has been set - no defaults already exist.

# android - 经常获取和存储位置更好 - 服务或广播接收器？

> ID：12974600
> 
> 赞同：3
> 
> 时间：2012-10-19T12:46:33.503
> 
> 标签：android, service, location, broadcastreceiver

我对 Service 和 BroadcastReceiver 感到困惑。我正在开发基于位置的应用程序。在此，每当用户的位置发生重大变化（例如 10 米）时，我想将用户的位置存储到数据库中。

我正在使用 LocationListener 并且它工作正常。但我的困境是：在哪里编写 onLocationChanged() 方法 - 在 BroadcastReceiver 的 onReceive() 方法中还是在服务中？

如果我使用的是 Service ，那么我应该在 Service 的哪个方法中编写下面的代码？

这是我的位置监听器：

```
 LocationManager locationManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);

    LocationListener locationListener = new LocationListener() {
        public void onLocationChanged(Location location) {
            if(location != null){
                //Code to populate location-data into the database table.
            }

        public void onStatusChanged(String provider, int status, Bundle extras) {}

        public void onProviderEnabled(String provider) {}

        public void onProviderDisabled(String provider) {}
      };

    locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 5, 10, locationListener); 
```

谁能建议我实施它的更好方法是什么？我已阅读有关 Service 和 BroadcastReceiver 的所有 Android 开发人员文档，但我仍然无法区分它们的用法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T12:59:31.593

这取决于你的目的。如果您想在后台捕获位置，请在服务中使用。

BroadcastReciever 的 onReceive 方法只会在您注册接收什么动作时调用。

如果你想在 Foreground 中做，你可以简单地在 Activity 中使用它。但是当您的活动关闭时，您将无法获取位置。

所以，你根据你的功能来决定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T13:02:09.647

服务用于在后台运行您的代码，主要用于下载、音乐播放.. 用户将应用程序置于后台（按主页或返回按钮）后。 `BroadcastReceivers`用于接收通过`sendBroadcast()`方法发送的消息，并用于捕获系统通知，如蓝牙、互联网可​​用性、从其他应用程序获取消息......

我认为您想在这里使用服务，因为`BroadcastReceiver`如果应用程序在后台，则无法帮助您收听位置更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T20:02:31.997

在我看来，这取决于你想做多少工作。

如果你想在收到广播时做一些小事，那么你可以在`onReceive()`你的`BroadcastReceiver`. 但是，`onReceive()`在主应用程序线程上调用。因此，如果时间过长，Android OS 会杀死它。

因此，如果你想做一些可能需要一段时间的事情，你应该在`Service`后台线程上做。正如建议的那样，您可以将代码放入服务的`onStart()`方法中。如果服务没有做任何事情（电池和其他资源的浪费），请不要让服务继续运行。每次收到广播时启动服务，并在完成分配的作业后立即完成。

PS Mark L. Murphy（又名 CommonsWare）有几本关于 Android 开发的优秀书籍。Google Busy Coder 的 Android 开发指南。

**更新：**

关于您希望在应用程序进入后台时取消后台任务。

考虑一下如果你的后台任务在中间被打断了你会怎么做。你需要处理这种情况。如果您对此感到满意，那么您可以使用其中一个`AsyncTask`或`Service`在后台执行您的任务。您的选择再次取决于您的任务的大小和类型。

`AsyncTask`一般是为了在UI线程上执行后台操作和发布结果。Android 文档[建议](http://developer.android.com/reference/android/os/AsyncTask.html)任务`AsyncTask`不应超过几秒钟。另一方面，`Service`设计用于在不与 UI 通信的情况下执行长时间操作。

关于取消。`AsyncTask`当你的活动完成时将被取消，因为它对 UI 线程很累。要停止服务，您需要[`stopService()`](http://developer.android.com/reference/android/content/Context.html#stopService)从您的活动中调用。

由于您需要经常存储位置信息，因此您可以在活动开始时启动服务，使用服务的`onBind()`方法与其通信，然后在`onPause()`活动的方法中停止服务。

# android - android每分钟强制终止计划服务

> ID：12974605
> 
> 赞同：3
> 
> 时间：2012-10-19T12:46:44.627
> 
> 标签：android, service, kill

我想安排一项服务每分钟运行一次，并检查我的应用程序是否仍在运行。（如果应用程序已关闭，我想重新打开它）。此外，如果我的应用程序被任务管理器强行杀死，我仍然希望此服务每分钟运行一次。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T13:20:43.843

> 另外，如果我的应用程序被任务管理器强行杀死，我仍然希望此服务每分钟运行一次

从 Android 3.1 开始，这是不可能的。如果用户进入设置并 force=stops 您的应用程序，您的应用程序将不会再次运行，直到用户手动启动您的组件之一。

如果您的进程因其他原因终止（例如，来自 Play 商店的普通任务杀手应用程序，将您的任务从“最近的任务”列表中滑出），您安排的警报`AlarmManager`应该保持不变，根据 Lucifer 的建议。

> 我正在编写一个安装在孩子手机上的“家长控制”应用程序。

任何足够聪明地使用手机的孩子都会足够聪明地以安全模式重新启动他们的设备并摆脱您的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T12:54:53.410

使用`AlarmManager`类，即使您的设备处于睡眠模式，它也能正常工作。

```
private static Intent alarmIntent = null;
private static PendingIntent pendingIntent = null;
private static AlarmManager alarmManager = null;

// First Creating an Intent
alarmIntent = new Intent ( context, yourClass.class );
// Create an Pending Intent which will Broadcast the Intent
pendingIntent = PendingIntent.getBroadcast(context, 234324243, alarmIntent, 0 );
// Set the AlarmManager class
alarmManager = ( AlarmManager ) context.getSystemService( ConstantCodes.ALARM_SERVICE );
// Set Repeating time interval
alarmManager.setRepeating( AlarmManager.RTC_WAKEUP, Interval * 1000, Interval * 1000, pendingIntent ); 
```

与 TimerTask 或 Thread 相比，AlarmManager 消耗的电池电量更少。它像无痛的 AsyncTask 一样工作。

# iphone - 计算两个日期之间的差异的问题

> ID：12974608
> 
> 赞同：0
> 
> 时间：2012-10-19T12:46:55.140
> 
> 标签：iphone, objective-c, ios, nsdate, nsdateformatter

我需要以分钟为单位计算两天之间的差异。

```
NSDate *now = [[NSDate alloc] init];

NSDateFormatter *outputFormatter = [[NSDateFormatter alloc] init];
    [outputFormatter setLocale:[[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"]];
    [outputFormatter setDateFormat:@"dd/MM/yyyy hh:mm:ss a"];

    NSString* dateStringFromDatabase = @"01/01/1900 11:00:00 AM";

    NSDate* dateFromString = [outputFormatter dateFromString:dateStringFromDatabase];

NSString* a = [outputFormatter stringFromDate:now];
    NSDate* b = [outputFormatter dateFromString:a];

    NSCalendar *gregorian = [[NSCalendar alloc]initWithCalendarIdentifier:NSGregorianCalendar];

    unsigned int unitFlags = NSHourCalendarUnit | NSMinuteCalendarUnit | NSDayCalendarUnit | NSMonthCalendarUnit;

    NSDateComponents *components = [gregorian components:unitFlags fromDate:dateFromString
                                                  toDate:b options:0];

    int hours = [components hour];
    int minutes = [components minute];

    self.lblResult.text = [NSString stringWithFormat:@"%i:%i", hours, minutes]; 
```

但我有以下问题： 对于当前时间，我得到：

```
2012-10-21 07:37:09 +0000 // wrong it's two hours late 
```

当我尝试投射`@"01/01/1900 11:00:00 AM"`到`NSDate`我得到

```
1900-01-01 10:00:00 +0000 // also two hours late 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:48:37.403

您需要设置`-dateStyle`而不是时间样式，因为该字符串中还包含一个日期。

编辑 - -

您现在需要`-dateFormat`将`dd/MM/yyyy HH:mm:ss a`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T13:02:54.037

尝试这个..................

如果您在字符串中有日期，则使用将其转换为日期`@"dd/MM/yyyy hh:mm:ss a"`

```
NSDate *startDate = ...;
NSDate *endDate = ...; 
```

现在日期比较

```
// Date Comparision
NSCalendar *gregorian = [[NSCalendar alloc]initWithCalendarIdentifier:NSGregorianCalendar];

unsigned int unitFlags = NSHourCalendarUnit | NSMinuteCalendarUnit | NSDayCalendarUnit | NSMonthCalendarUnit;

NSDateComponents *components = [gregorian components:unitFlags fromDate:LastDate
                                              toDate:CuurentDate options:0]; 
```

获取两个日期之间的差异

```
int months = [components month];
int days = [components day];
int hours = [components hour];
int minutes = [components minute]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T13:08:01.400

I hope this helps

```
 NSString *dtString = @"1900-01-01T11:00:00";
    dtString = [dtString stringByReplacingOccurrencesOfString:@"T" withString:@" "];
    NSDate *today = [NSDate date];
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"YYYY-MM-dd HH:mm:ss"];
    NSString *currentTime = [dateFormatter stringFromDate:today];
    NSDate *toTimeDate = [dateFormatter dateFromString:dtString];
    NSString *toTime = [dateFormatter stringFromDate:toTimeDate]; 
```

# javascript - 简单的跨浏览器绘制javascript库

> ID：12974617
> 
> 赞同：1
> 
> 时间：2012-10-19T12:47:25.087
> 
> 标签：javascript, draw

我们正在构建一个需要绘制一些折线/多边形/圆形/矩形的网络应用程序库。

我们还希望这些向量可以被编辑。

所以我想知道是否有一个跨浏览器的绘图库可以导入到我们的代码中？

我知道Raphael，但是我认为它太强大了，我的意思是有太多我们不需要的功能。

我们还发现[了这一点](http://www.walterzorn.de/en/jsgraphics/jsgraphics_e.htm)，它使用 div 像素逐像素渲染矢量。但我们认为效果并不好。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T12:51:41.897

我完全同意 Sirko 的评论，坚持 Raphael。在跨浏览器兼容性方面，没有什么比这更棒的了。除此之外，您可以查看 John Resig 的[处理库端口](http://processingjs.org/)（这是一种非常成熟的可视化语言）。

# javascript - 高图的散点图工具提示未显示

> ID：12974619
> 
> 赞同：4
> 
> 时间：2012-10-19T12:47:30.663
> 
> 标签：javascript, jquery, svg, highcharts

我有一个散点图和条形图。我无法查看超出栏的散点的工具提示...这里是小提琴[http://jsfiddle.net/tZ9Rt/](http://jsfiddle.net/tZ9Rt/)

我正在使用这两个系列：

```
series: [{
        type: 'scatter',
        index:2,
        data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4],
        name: 'Temperature'
    }, {
        type: 'column',
        index:1,
        data: [220,220,220,220,120,220,220,220,220,220,220,220],
        name: 'Rainfall'
    }] 
```

任何帮助都非常感谢...

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-25T01:26:53.847

进行`tooltip`共享，并将系列更改`type`为`'line'`和。然后你会得到一个看起来像散点图的“折线”图，但工具提示有效！`lineWidth``0`

```
tooltip: {
    shared: true //make the tooltip accessible across all series
},
plotOptions: {
    line: {
        lineWidth: 0 //make the lines disappear
    }
},
series: [{
    type: 'column',
    name: 'Column Data',
    data: [5, 4, 3, 2, 1, 0]
}, {
    type: 'line', //this is a 'fake' scatter plot
    name: 'Pseudo-scatter',
    data: [0, 1, 2, 3, 4, 5]
}] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T14:08:24.770

这是已知的错误，在这里报告：[https ://github.com/highslide-software/highcharts.com/issues/923](https://github.com/highslide-software/highcharts.com/issues/923)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T13:46:36.047

您无法查看条上散点的工具提示的原因是条在散点之前获得焦点。该栏将保持工具提示的焦点，直到鼠标不再位于该栏上。您始终可以使用本[**示例**](http://jsfiddle.net/tZ9Rt/1/)中的共享工具提示。通过这样做，它将显示与鼠标悬停的类别相关的所有数据。以下是相关代码：

```
tooltip: {
  shared: true            
}, 
```

# php - 使用 PHP 将数组发送到 Excel 文件

> ID：12974621
> 
> 赞同：-2
> 
> 时间：2012-10-19T12:47:34.577
> 
> 标签：php, mysql, arrays, excel

我想向 Excel 文件发送一个数组，这是一个包含不同类别的数组。

每个类别应进入一列。我编写的代码是将所有值发送到 Excel 上的一个字段。我在哪里弄错了？

```
$shop['id']=$id_array;
    $shop['name']=$name_array;
    $shop['cat1'] = $cat1;
    $shop['cat2'] = $cat2;
    $shop['cat3'] = $cat3;

    $id_excel=implode(",",$shop['id']);
    $name_excel=implode(",",$shop['name']);
    $cat1_excel=implode(",",$shop['cat1']);
    $cat2_excel=implode(",",$shop['cat2']);
    $cat3_excel=implode(",",$shop['cat3']);

}
    $filename ="cat.xls";
    $contents = "$id_excel \t $name_excel \t $cat1_excel \t $cat2_excel \t $cat3_excel \t \n";
    header('Content-type: application/ms-excel');
    header('Content-Disposition: attachment; filename='.$filename);
    echo $contents; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T13:00:13.040

尝试使用这个不错的插件：[PHPExel](http://phpexcel.codeplex.com/) 使用这个插件很简单

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T12:58:51.717

请尝试返回 CSV 文件而不是 Excel。这是代码：

```
<? $shop['id']=$id_array;
    $shop['name']=$name_array;
    $shop['cat1'] = $cat1;
    $shop['cat2'] = $cat2;
    $shop['cat3'] = $cat3;

    $id_excel[]=implode(",",$shop);

    $filename ="cat.csv";
    $contents = implode("\n",$id_excel);
    header('Content-type: text/csv');
    header('Content-Disposition: attachment; filename='.$filename);
    echo $contents;
?> 
```

# google-maps - 在谷歌地图中计算父瓦坐标

> ID：12974622
> 
> 赞同：0
> 
> 时间：2012-10-19T12:47:37.650
> 
> 标签：google-maps

如何最有效地计算给定图块的父图块坐标？
假设我有一个带坐标的瓷砖：

```
x = 2194
y = 1287
z = 12 
```

然后如何在缩放 11 中计算其父图块的坐标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T12:57:13.003

谷歌地图使用四叉树表示来计算他们的瓦片的 indizes。[您可以在此处](http://www.maptiler.org/google-maps-coordinates-tile-bounds-projection/)找到有关寻址系统如何工作的示例。在此链接中，还有一个类可用，其中包含许多用于转换的实用方法。

通常，如果您将 x 和 y 值除以（并可选择向下舍入），则父图块应该可用：

```
x = 1097
y = 643
z = 11 
```

# unity3d - 不将新值传递给尚未销毁的对象

> ID：12974625
> 
> 赞同：0
> 
> 时间：2012-10-19T12:47:43.860
> 
> 标签：unity3d

我有 2 个场景，希望将信息从一个场景传递到另一个场景。我在第一个场景中在一个空游戏对象上创建了一个脚本常量，它保​​留了我希望为下一个场景保存的数据。

这里是：

```
public class Constants : MonoBehaviour {

    public string scratchImageFront;
    public string scratchImageBack;

    void setScratchFront(string _scratchFront)
    {
       scratchImageFront = _scratchFront;
    }

    void setScratchBack(string _scratchBack)
    {   
       scratchImageBack = _scratchBack;
    }

} 
```

在进入下一个场景之前，我呼吁不要破坏常量脚本：

```
 GameObject constants = GameObject.Find("Constants");
     Constants script;
     script = constants.transform.GetComponentInChildren<Constants>();

     DontDestroyOnLoad(constants);
     Application.LoadLevel("scratch"); 
```

然后我在第二个场景中收集数据，一切都很好。在我完成第二个场景之后，我回到我的第一个场景

```
Application.LoadLevel("start"); 
```

并重做与我第一次相同的步骤，常量脚本不保留传递给它的新字符串，它保留旧字符串。为什么？

我需要在我的第二个场景中销毁常量脚本，以便一切正常，但我不想要这个。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T14:57:03.327

您应该有一个“引导”场景，其中包含所有不会被破坏的东西。这将是第一个场景。它会调用您的“开始”（没有`Constants`），并且您将始终从后续场景加载“开始”，也就是说，不会`Constants`创建新的，因为“引导程序”总是在开始时被调用一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T10:13:08.403

另一种解决方案是创建一个静态类；这是answers.unity上相同问题的链接：http: [//answers.unity3d.com/questions/334959/not-passing-new-values-to-object-that-has-not-been.html](http://answers.unity3d.com/questions/334959/not-passing-new-values-to-object-that-has-not-been.html)

# jsf - 复合组件：属性中的 EL

> ID：12974626
> 
> 赞同：1
> 
> 时间：2012-10-19T12:47:46.403
> 
> 标签：jsf, el, composite-component

我有一个自定义组件，它的属性定义如下：

```
<composite:attribute name="category"/> 
```

有问题的组件使用自定义 UIComponent 类，并且 - 出于记录目的 - 它在使用代码请求时打印出类别：

```
getAttributes().get("category") 
```

如果我在 JSF 中这样做，它会起作用：

```
<my:test category="test"/> 
```

日志显示：

```
** CATEGORY: test 
```

但是，假设我这样做：

```
<my:test category="#{myvar.value}"/> 
```

我使用哪个表达式并不重要，输出总是：

```
** CATEGORY: null 
```

这是特定于 mojarra 的错误吗？或者当涉及到自定义属性中的 EL 时，它是 JSF 的限制吗？

# c# - ASP.Net 中使用 ROW_NUMBER() 和总计数的不同分页

> ID：12974627
> 
> 赞同：1
> 
> 时间：2012-10-19T12:47:46.543
> 
> 标签：c#, sql-server, ado.net, pagination

在 Asp.net 中，我尝试使用以下代码实现分页：

```
String query="SELECT * "+
             "FROM (SELECT Distinct emp_name, emp_address, "+
             "         ROW_NUMBER() OVER(ORDER BY emp_id) AS rownum"+
             "       FROM Employee"+
             "     )as Person "+
             "WHERE rownum>"+ start +" and rownum <="+ end +";

SqlCommand cmd = new SqlCommand(query, conn);
conn.Open();

SqlDataReader reader = cmd.ExecuteReader(); 
```

上面的代码不检索`Distinct`行。
如何调整我`query`以获取`distinct` **emp_name**和`order by` **emp_id**以及 single 中的条目总数`ExecuteReader()`？

目前我打电话`ExecuteReader()`两次，第一次是数据，第二次是总数。

我遵循[SQL Server DISTINCT 分页，其中 ROW_NUMBER() 不明显](https://stackoverflow.com/questions/8160694/sql-server-distinct-pagination-with-row-number-not-distinct)，但无法理解如何在我的代码中实现它。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T13:35:49.037

Row_Number() 会杀死你的 Distinct。将 Distinct 放在您的子查询中，并将行号放在（外部）结果集上（在您拥有不同的集之后）。

```
String query="SELECT *, ROW_NUMBER()  OVER(ORDER BY emp_id) AS rownum "+
          "FROM (SELECT Distinct emp_name, emp_address, emp_id "+
          "       FROM Employee"+
          "     )as Person "+
          "WHERE rownum>"+ start +" and rownum <="+ end +"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T13:38:57.383

使用`String.Format`原始字符串 ( `@`) 来避免连接。

```
String query = String.Format(@"
    select emp_name, emp_address, rownum 
    from (
        select
            emp_name, emp_address,
            row_number() over(order by emp_id) as rownum
        from (
            select distinct emp_name, emp_address
            from employee
        ) s
    ) as Person 
    where rownum > {0} and rownum <= {1}
    ;
    select count(*) as total
    from (
        select distinct emp_name, emp_address
        from employee
        where rownum > {0} and rownum <= {1}
    ) s
    ;    
", start, end);

SqlCommand cmd = new SqlCommand(query, conn);
conn.Open();

SqlDataReader reader = cmd.ExecuteReader();

// gets the first data set
while (reader.Read())
{
    ...
}

// gets the second
reader.NextResult();
reader.Read();
int total = (int)reader["total"]; 
```

用于`NextResult`读取多个结果集。

# java - Android：覆盖 onPause 和 onResume - 正确的方法

> ID：12974630
> 
> 赞同：17
> 
> 时间：2012-10-19T12:48:05.883
> 
> 标签：java, android, design-patterns

当覆盖活动的`onPause()`and`onResume()`方法时，调用`super.onPause()`and的正确位置在`super.onResume()`哪里？在方法的开头还是结尾？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-19T12:52:30.710

**更新：**这是公认的答案，它包含大量有用的信息，包括一张有用的图表，并放在一个地方。然而，这似乎是*不正确*的，至少根据当前的 Android 文档，正如海报所指出的那样，它是 SDK 信息的最终来源。发布此答案后，可能会澄清文档。但是，无论如何，不​​要停止阅读这个答案，请查看[下面的 espinchi 的答案](https://stackoverflow.com/a/20805556/165164)。它有文档。

* * *

方法的放置`super`仅取决于您的偏好。仅当这些方法采用参数或您正在执行一些并发工作时才重要。例如，如果您这样做：

```
 @Override
    protected void onPause() {
        try {
            someOtherThread.join();
        } catch (InterruptedException e) {
            LOG.e(e);
        }
        super.onPause();
    } 
```

它可能会阻塞线程并阻止`super`被调用。

我建议您阅读所有可用的文档，因为它们对您有很大帮助。例如，这是您可以在`onPause`javadoc 中找到的内容。我将重要部分加粗：

> 当活动进入后台但尚未（尚未）被杀死时，作为活动生命周期的一部分调用。onResume() 的对应项。
> 
> 当活动 B 在活动 A 之前启动时，将在 A 上调用此回调。在 A 的 onPause() 返回之前不会创建 B，因此请确保此处不要做任何冗长的事情。
> 
> 此**回调主要用于保存活动正在编辑的任何持久状态，以向用户呈现“就地编辑”模型，并确保如果没有足够的资源来启动新活动而没有首先杀死该活动，则不会丢失任何内容。这也是一个很好的地方来做一些事情，比如停止动画和其他消耗大量 CPU**的事情，以便尽快切换到下一个活动，或者关闭诸如相机之类的独占访问资源。
> 
> 在系统需要更多内存的情况下，它可能会终止暂停的进程以回收资源。因此，**您应该确保在您从此函数返回时保存所有状态**。通常 onSaveInstanceState(Bundle) 用于在活动中保存每个实例的状态，此方法用于存储全局持久数据（在内容提供程序、文件等中）
> 
> 收到此调用后，您通常会收到对 onStop() 的后续调用（在下一个活动已恢复并显示后），但是在某些情况下会直接调用 onResume() 而不会进入停止状态。
> 
> 派生类必须调用该方法的超类实现。如果他们不这样做，将引发异常。

我确实为您推荐此流程图，它将极大地帮助您的开发：

![安卓活动流程图](../Images/e1849f5128a6665a90a2dce7590520e5.png)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-12-27T18:03:43.483

来自[http://developer.android.com/guide/components/activities.html#ImplementingLifecycleCallbacks](http://developer.android.com/guide/components/activities.html#ImplementingLifecycleCallbacks)：

> 这些生命周期方法的实现必须始终在执行任何工作之前调用超类实现，如上面的示例所示。

所以，对于生命周期回调，比如`onPause()`and `onResume()`，我们应该在一开始就做`super.onPause()`or `super.onResume()`。对于其他方法，这一切都取决于超类的语义。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-19T17:49:04.183

这可能无关紧要，但要确定，您需要知道超级方法在做什么，而且通常您无法获得这些信息。

我的风格是在我自己的方法体之前调用例如 super.onCreate()、super.onResume() 等，在我自己的方法体之后调用例如 super.onPause() 和 super.onDestroy()。

这背后的理论是，我喜欢在构建某些东西时让超级方法先运行，以防万一我正在做的事情取决于超类首先设置的东西，而当拆除某些东西时，我喜欢拆除我自己的在超类拆掉它的东西之前的东西。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-19T12:49:26.390

没有对与错。这取决于你对这些方法的实现做了什么。有时你会希望`super`在你的代码之前，有时在之后。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-19T12:51:34.647

你可以把它放在任何地方。首先你要了解Activity的生命周期。检查以下链接[这里](http://developer.android.com/training/basics/activity-lifecycle/index.html)

下载demo运行一下就明白了

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-10-19T13:13:00.803

深入研究android代码，你可以发现框架在调用super.onPause()时设置了一个名为mcall的标志。框架稍后在恢复时检查此标志。

```
if (!mCalled) {
            throw new SuperNotCalledException(
                "Activity " + mComponent.toShortString() +
                " did not call through to super.onResume()");
        } 
```

您需要做的就是确保拨打超级电话并且您很好。无需采取其他预防措施。

# excel - xlsread 只读取第一行

> ID：12974631
> 
> 赞同：0
> 
> 时间：2012-10-19T12:48:10.680
> 
> 标签：excel, matlab

在 matlab 中，我希望只读取 excel 工作表中的第一行，但不知道工作表中的列数。即我想做相当于

```
filename = 'myExample.xlsx';

columnB = xlsread(filename,'B:B') . 
```

知道方法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T13:08:31.820

```
firstrow = xlsread(filename, '1:1') 
```

应该这样做。

# php - PHP递归文件夹扫描成多数组（子文件夹和文件）

> ID：12974633
> 
> 赞同：5
> 
> 时间：2012-10-19T12:48:31.523
> 
> 标签：php, recursion, directory, subdirectory

我现在有点迷失在这里。我的目标是递归扫描每个子文件夹中包含子文件夹和图像的文件夹，将其放入多维数组中，然后能够解析每个子文件夹及其包含的图像。

我有以下起始代码，它基本上是扫描每个包含文件的子文件夹，现在只是丢失了将它放入一个多数组中。

```
$dir = 'data/uploads/farbmuster';
$results = array();

if(is_dir($dir)) {
    $iterator = new RecursiveDirectoryIterator($dir);

    foreach(new RecursiveIteratorIterator($iterator, RecursiveIteratorIterator::CHILD_FIRST) as $file) {
        if($file->isFile()) {
            $thispath = str_replace('\\','/',$file->getPath());
            $thisfile = utf8_encode($file->getFilename());

            $results[] = 'path: ' . $thispath. ',  filename: ' . $thisfile;
        }
    }
} 
```

有人可以帮我弄这个吗？

提前致谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-19T14:02:27.743

你可以试试

```
$dir = 'test/';
$results = array();
if (is_dir($dir)) {
    $iterator = new RecursiveDirectoryIterator($dir);
    foreach ( new RecursiveIteratorIterator($iterator, RecursiveIteratorIterator::CHILD_FIRST) as $file ) {
        if ($file->isFile()) {
            $thispath = str_replace('\\', '/', $file);
            $thisfile = utf8_encode($file->getFilename());
            $results = array_merge_recursive($results, pathToArray($thispath));
        }
    }
}
echo "<pre>";
print_r($results); 
```

输出

```
Array
(
    [test] => Array
        (
            [css] => Array
                (
                    [0] => a.css
                    [1] => b.css
                    [2] => c.css
                    [3] => css.php
                    [4] => css.run.php
                )

            [CSV] => Array
                (
                    [0] => abc.csv
                )

            [image] => Array
                (
                    [0] => a.jpg
                    [1] => ab.jpg
                    [2] => a_rgb_0.jpg
                    [3] => a_rgb_1.jpg
                    [4] => a_rgb_2.jpg
                    [5] => f.jpg
                )

            [img] => Array
                (
                    [users] => Array
                        (
                            [0] => a.jpg
                            [1] => a_rgb_0.jpg
                        )

                )

        ) 
```

使用的功能

```
function pathToArray($path , $separator = '/') {
    if (($pos = strpos($path, $separator)) === false) {
        return array($path);
    }
    return array(substr($path, 0, $pos) => pathToArray(substr($path, $pos + 1)));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T12:55:25.657

**RecursiveDirectoryIterator**以递归方式扫描到平面结构中。要创建深层结构，您需要使用**DirectoryIterator的****递归函数** *（调用自身）*。如果你当前的文件**是Dir** () 和！**isDot** () 通过以新目录作为参数再次调用该函数来深入了解它。并将新数组附加到您当前的集合中。

 *******如果你不能处理这个叫喊，我会在这里转储一些代码。必须记录一下（现在有忍者评论），所以......用懒惰的方式试试我的运气，并附上说明。*

**代码**：

```
/**
 * List files and folders inside a directory into a deep array.
 *
 * @param string $Path
 * @return array/null
 */
function EnumFiles($Path){
    // Validate argument
    if(!is_string($Path) or !strlen($Path = trim($Path))){
        trigger_error('$Path must be a non-empty trimmed string.', E_USER_WARNING);
        return null;
    }
    // If we get a file as argument, resolve its folder
    if(!is_dir($Path) and is_file($Path)){
        $Path = dirname($Path);
    }
    // Validate folder-ness
    if(!is_dir($Path) or !($Path = realpath($Path))){
        trigger_error('$Path must be an existing directory.', E_USER_WARNING);
        return null;
    }
    // Store initial Path for relative Paths (second argument is reserved)
    $RootPath = (func_num_args() > 1) ? func_get_arg(1) : $Path;
    $RootPathLen = strlen($RootPath);
    // Prepare the array of files
    $Files = array();
    $Iterator = new DirectoryIterator($Path);
    foreach($Iterator as /** @var \SplFileInfo */ $File){
        if($File->isDot()) continue; // Skip . and ..
        if($File->isLink() or (!$File->isDir() and !$File->isFile())) continue; // Skip links & other stuff
        $FilePath = $File->getPathname();
        $RelativePath = str_replace('\\', '/', substr($FilePath, $RootPathLen));
        $Files[$RelativePath] = $FilePath; // Files are string
        if(!$File->isDir()) continue;
        // Calls itself recursively [regardless of name :)]
        $SubFiles = call_user_func(__FUNCTION__, $FilePath, $RootPath);
        $Files[$RelativePath] = $SubFiles; // Folders are arrays
    }
    return $Files; // Return the tree
} 
```

测试它的输出并弄清楚:)*你可以做到！*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T11:59:50.693

**如果要获取带有子目录的文件列表，请使用**（但更改文件夹名称）

```
<?php
$path = realpath('yourfold/samplefolder');
foreach (new RecursiveIteratorIterator(new RecursiveDirectoryIterator($path)) as $filename)
{
        echo "$filename\n";
}
?> 
```******

# sql - 在触发器中获取已删除行的 ODBC 通用方法

> ID：12974636
> 
> 赞同：2
> 
> 时间：2012-10-19T12:48:42.883
> 
> 标签：sql, database, odbc, ansi-sql

是否有任何通用方法可以在触发器中获取已删除/插入/更新的行？我想创建一个触发器（我的意思是我的应用程序中的一段代码），它应该适用于 Oracle、Sql Server 和 Postgres。是否可以？我正在使用 odbc 驱动程序连接到不同的数据库。

它在 SQL Server 中工作，但在 Oracle 中不工作。

```
CREATE TRIGGER schema.trg_nameON schema.table_name
                FOR DELETE
                AS
                BEGIN
                    DECLARE @id BIGINT;

                    SELECT @id = d.ID
                    FROM deleted d

                    DELETE
                    FROM schema.table_name
                    WHERE TOP_ID = @id;
                END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:54:18.650

不，每个 RDMS 都有自己的语法。您使用的语法是 sql server 语法。

在应用程序上创建触发器是什么意思？请向我们提供更多信息

# sharepoint-2010 - 通过 schema.xml 增强的富文本字段

> ID：12974639
> 
> 赞同：4
> 
> 时间：2012-10-19T12:48:59.047
> 
> 标签：sharepoint-2010, schema, listitem

我正在尝试使用 schema.xml 创建增强的富文本字段。目前我有以下内容：

```
 <Field ID="8EE65A51-1427-4D5A-8DD0-3712BE5991F0" Name="AudioLinks" 
 DisplayName="AudioLinks" Type="Note" NumLines="1"  RichText="TRUE" 
 Description="Audio Link URL."/> 
```

以上创建了一个富文本字段。

我将如何将其创建到增强的富文本字段中？

现在坚持了一天多。任何帮助将不胜感激

非常感谢，

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-22T15:27:51.917

尝试将 RichTextMode 属性设置为 FullHtml：

```
<Field ID="8EE65A51-1427-4D5A-8DD0-3712BE5991F0"
    Name="AudioLinks"
    DisplayName="AudioLinks"
    Type="Note"
    NumLines="1"
    RichText="TRUE"
    RichTextMode="FullHtml"
    Description="Audio Link URL."/> 
```

有关更多信息，请参阅：

*   [字段元素（列表）](http://msdn.microsoft.com/en-us/library/ms437580.aspx)
*   [在您的 SharePoint 内容类型中创建增强的富文本字段](http://leedale.wordpress.com/2009/01/20/creating-an-enhanced-rich-text-field-in-your-sharepoint-content-types/)

# c++ - 为什么是wiz0；不等同于向导 wiz0(); 在我的代码中？C2228 错误

> ID：12974641
> 
> 赞同：3
> 
> 时间：2012-10-19T12:49:04.703
> 
> 标签：c++, compiler-errors, visual-c++-2010-express

> **可能重复：**
> [没有参数的构造函数上没有括号是语言标准吗？](https://stackoverflow.com/questions/2318650/is-no-parentheses-on-a-constructor-with-no-arguments-a-language-standard)

好的，我有一个泡菜。这是一个错误 C2228 问题，我查看了其他问题和答案，但给出的提示似乎都不适合我 - 这是我的第一个问题，我是新手，所以请温柔！注意：如果我使用该程序将编译

```
Wizard wiz0; 
```

但如果我使用

```
Wizard wiz0(); 
```

我正在使用的书告诉我这两个陈述应该是等价的，所以我试图弄清楚为什么我可以使用一个而不是另一个。

首先，这是我尝试使用 Wizard wiz0() 时的错误：

```
1>  Chapter5.cpp
1>Chapter5.cpp(14): error C2228: left of '.fight' must have class/struct/union
1>Chapter5.cpp(15): error C2228: left of '.talk' must have class/struct/union
1>Chapter5.cpp(17): error C2228: left of '.setArmor' must have class/struct/union
1>Chapter5.cpp(19): error C2228: left of '.getName' must have class/struct/union
1>Chapter5.cpp(21): error C2228: left of '.castSpell' must have class/struct/union 
```

这是（我认为）Chapter5.cpp 的相关代码是：

```
Wizard wiz0(); //declares a variable (wiz0) of type Wizard.

wiz0.fight();
wiz0.talk();

wiz0.setArmor(10);

cout << "Player's Name: " << wiz0.getName() << endl;

wiz0.castSpell(); 
```

此外，这里是来自 wiz.h 文件的信息：

```
public
//Constructor
Wizard();

//Overloaded Constructor
Wizard(std::string name, int hp, int mp, int armor);

//Destructor
~Wizard();

//Methods
void fight();
void talk();
void castSpell();
void setArmor(int mArmor);
std::string Wizard::getName();

private:
//Data members
std::string mName;
int mHitPoints;
int mMagicPoints;
int mArmor; 
```

...最后，来自 wiz.cpp 文件的信息！

```
//Wiz.cpp implementation file

#include "stdAfx.h"
#include "wiz.h"
using namespace std;

//The Constructor call
Wizard::Wizard()
{
/*If the client calls a constructor without
specifying values, these will be the default
values that the program will use */
mName = "DefaultName";
mHitPoints = 1;
mMagicPoints = 1;
mArmor = 0;
}

Wizard::Wizard(std::string name, int hp, int mp, int armor)
{
//Client called constructor WITH values, so create an
//object with them.
mName = name;
mHitPoints = hp;
mMagicPoints = mp;
mArmor = armor;
}

void Wizard::fight()
{
    cout << "Fighting." << endl;
}

void Wizard::talk()
{
    cout << "Talking." << endl;
}

void Wizard::castSpell()
{
    if (mMagicPoints < 4)
        cout << "Casting spell." << endl;
    else
        cout << "Not enough MP!" << endl;
}

void Wizard::setArmor(int armor)
{
    if(armor >= 0)
        mArmor = armor;
} 

std::string Wizard::getName()
{
return mName;
}

Wizard::~Wizard()
{
//Not using dynamic memory- nothing to clean
} 
```

呼……我想这就是一切。如果你们能弄清楚我做错了什么，我将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T12:51:04.187

```
Wizard wiz0; 
```

实例化一个`Wizard`名为`wiz0`

```
Wizard wiz0(); 
```

声明一个按值`wiz0`返回的函数`Wizard`。这是[最令人头疼的 parse](http://en.wikipedia.org/wiki/Most_vexing_parse)的简化版本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T12:50:56.317

这是解析 C++ 方式的一个奇怪部分。带括号的解释为函数原型。您应该使用不带括号的那个。

# assembly - NASM 中的位置无关代码（32 位）

> ID：12974648
> 
> 赞同：1
> 
> 时间：2012-10-19T12:49:27.493
> 
> 标签：assembly, x86, nasm

如何在用 32 位 x86 汇编器编写的库函数中简单地调用外部符号？这适用于 x86-64 (NASM)：

```
extern ExternSymbol

MyFunc:
    ...
    call ExternSymbol WRT ..plt 
```

为 32 位 x86 编译的相同代码跳转到地址 0x0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T22:25:16.950

你一定做错了什么，因为它对我有用：

```
$ cat >libfoo.c
int foo() { return 42; }
$ gcc -m32 -shared -o libfoo.so libfoo.c
$ cat >main.asm
[bits 32]
extern foo
global _start
_start:
call foo wrt ..plt
mov ebx, eax
mov eax, 1
int 80h
$ nasm -f elf32 main.asm
$ gcc -nostdlib -m32 -L. -lfoo main.o
$ LD_LIBRARY_PATH=. ./a.out
$ echo $?
42 
```

# magento-1.5 - Magento admin 中的“编辑评论”模板在哪里？

> ID：12974652
> 
> 赞同：0
> 
> 时间：2012-10-19T12:49:32.770
> 
> 标签：magento-1.5, magento-1.7, magento

我想在 Magento 管理员的“编辑评论”中添加一个额外的字段。Magento 中的“编辑评论”模板在哪里（文件路径）？或者在 Magento admin 中编辑评论是哪个文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:51:11.190

处理这种情况的块类称为`Mage_Adminhtml_Block_Review_Edit_Form`. 您将从类名中解析其位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T23:14:11.963

我相信您正在寻找的示例代码可以在这里找到：

```
/app/code/core/Mage/Adminhtml/Block/Review/Edit/Form.php 
```

当然，假设您有默认安装。

# php - 将测验替代品保存为 JSON 字符串或单独的行？

> ID：12974656
> 
> 赞同：0
> 
> 时间：2012-10-19T12:49:49.133
> 
> 标签：php, mysql, json, database-design

我正在做一个测验。每个问题由一个问题、三个备选方案组成，其中一个是正确的。服务器应该输出 HTML（不是 JS 将要解析的 JSON），并且用户选择一个答案。

我怀疑的原因是进行测验的人正在通过 JSON 发送替代方案。如果您想稍后编辑任何替代方案，您只需解析 JSON，进行更改并将其发送到服务器。然后服务器将只更新替代“单元格”。

但是，当用户进行测验时，服务器必须遍历数组才能找到正确的答案。如果答案存储在它们自己的单独行中（多对多），则服务器可以只查询正确答案。

除此之外，如果使用多对多关系，与许多小型 VARCHARS 相比，JSON 会导致将替代项保存在 TEXT 列中。

最有效的方法是什么？（速度）什么是最方便的方式，也是最被接受的方式呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T15:27:20.780

好吧，我会说你的桌子应该是这样的：

```
+------+------------+--------+--------+--------+--------------+
|  ID  |  Question  |  Ans1  |  Ans2  |  Ans3  |  CorrectAns  |
+------+------------+--------+--------+--------+--------------+
| PKey |    text    |  text  |  text  |  text  |     text     |
+------+------------+--------+--------+--------+--------------+
|   1  |    π = ?   | 3.1415 | 2.2465 | 5.6598 |     3.1415   |
+------+------------+--------+--------+--------+--------------+ 
```

您的查询将是：

```
SELECT (CorrectAns = %enteredanswer%) FROM QuizTable WHERE ID=%questionid% 
```

将 json 转换为该表非常容易，反之亦然。

**编辑**：对于未定义数量的替代方案：

你可以有一张`Question`桌子，还有`Options`一张像这样的桌子：

```
Question:
+-------+------------+---------------+
|  QID  |  Question  |  CorrectAnsID |
+-------+------------+---------------+
|  PKey |   text     |  FKey,integer |
+-------+------------+---------------+
|   1   |   π = ?    |        2      |
+-------+------------+---------------+

Options:
+-------+--------------+--------------+
|  OID  |  OptionText  |  QuestionID  |
+-------+--------------+--------------+
|  PKey |    text      | FKey,Integer |
+-------+--------------+--------------+
|   1   |    3.5600    |      1       |
+-------+--------------+--------------+
|   2   |    3.1415    |      1       |
+-------+--------------+--------------+
|   3   |    3.4567    |      1       |
+-------+--------------+--------------+
|   4   |    3.7894    |      1       |
+-------+--------------+--------------+
|   5   |    3.9874    |      1       |
+-------+--------------+--------------+ 
```

这可能比 json 方法工作得更快，但更难实现（连接和编写的东西），所以如果它是一个快速、较小规模的项目，我会使用 json 方法。

# php - PHP 数组未正确设置

> ID：12974658
> 
> 赞同：2
> 
> 时间：2012-10-19T12:49:57.963
> 
> 标签：php, arrays, simplexml

我正在尝试使用以下代码从 XML 文件中读取一些 RSS 提要详细信息：

```
$this->feedFile = file_get_contents(__ROOT__ . '/assets/feedList.xml'); //Define this externally
$this->feedDetailsArray = array();
$this->feedXML = new SimpleXMLElement($this->feedFile);
echo "1\. =========";
print_r($this->feedXML);
echo "1\. =========";
foreach($this->feedXML->Feed as $feedItem) {
    echo "2\. =========";
    echo "AJ:: feedName " . var_dump($feedItem->FeedName) . " feedURL " . var_dump($feedItem->FeedURL) . "\n";
    echo "2\. =========";
    $feedDetails = array(
        "feedName" => $feedItem->FeedName,
        "feedURL" => $feedItem->FeedURL/*,
        'favIconURL' => $feedItem->FavIconURL
        );
    echo "3\. =========";
    var_dump($feedDetails);
    echo "3\. ========="; 
```

print_r 输出以下内容：

```
1\. =========SimpleXMLElement Object
(
    [Feed] => Array
        (
            [0] => SimpleXMLElement Object
                (
                    [FeedName] => Hacker News
                    [FeedURL] => http://news.ycombinator.com/rss
                    [FavIconURL] => http://ycombinator.com/favicon.ico
                    [Segment] => Startups
                )

    .
    .
    . 
```

第一个 var_dump ( `echo "feedName " . var_dump($feedItem->FeedName) . " feedURL " . var_dump($feedItem->FeedURL) . "\n";`) 输出：

```
2\. =========class SimpleXMLElement#38 (1) {
    string(11) "Hacker News"
}
class SimpleXMLElement#38 (1) {
    string(31) "http://news.ycombinator.com/rss"
}
AJ:: feedName  feedURL 
2\. ========= 
```

第二个 var_dump 输出：

```
3\. =========array(2) {
  'feedName' =>
  class SimpleXMLElement#38 (1) {
        string(11) "Hacker News"
  }
  'feedURL' =>
  class SimpleXMLElement#37 (1) {
        string(31) "http://news.ycombinator.com/rss"
  }
}
3\. ========= 
```

我的问题是，为什么该语句`"feedName" => $feedItem->FeedName`导致分配对象而不是 SimpleXML 对象的值？我只想要价值而不是对象。有人可以指出我做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T12:52:05.093

SimpleXML 在其对象上实现了[`__toString()`魔术方法](http://www.php.net/manual/en/language.oop5.magic.php#object.tostring)，这些对象是由对象引用指定的。当它们在`echo`ed 字符串的上下文中使用时（作为一个示例），您将获得返回的字符串值，但在正常的赋值或引用中，您将获得整个`SimpleXMLElement`对象。

如果需要字符串值，可以将其转换为字符串：

```
$feedDetails = array(
    "feedName" => (string)$feedItem->FeedName,
    "feedURL" => (string)$feedItem->FeedURL
 ); 
```

# objective-c - 在 ARC 下释放时是否需要在 NSArray 上调用 removeAllObjects？

> ID：12974660
> 
> 赞同：3
> 
> 时间：2012-10-19T12:50:00.880
> 
> 标签：objective-c, memory-leaks, automatic-ref-counting, instruments

我正在调试一个在 Instrument 中使用 ARC 的应用程序。似乎如果`Object A`包含一个包含`Object B`s 的数组，我需要`removeAllObjects`在实例变量上显式调用方法`contents`，这是一个`NSArray`.

```
- (void)dealloc {
    NSLog(@"%@ deallocing", self);
   [_contents removeAllObjects];
} 
```

如果我要注释掉这一行`[_contents removeAllObjects]`，仪器会显示数组中包含的对象在父对象被释放后仍然存在。我认为当`NSArray`释放它时，它会自动减少其中包含的元素的保留计数。那么为什么需要显式删除呢？这种行为是调试本身的副作用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T13:42:22.577

一般：

*   如果一个对象被释放，它的所有 ivars 都被释放。
*   如果一个数组被释放，数组中的所有对象的保留计数都会减少。

如果我不得不猜测，您正在某个块中的某个块中使用数组中的对象。对于 ARC，块是内存泄漏的主要来源。

您在哪里或如何使用数组和数组中的对象？

# android - 定时器控制硬件，使闪光灯保持稳定

> ID：12974665
> 
> 赞同：2
> 
> 时间：2012-10-19T12:50:13.610
> 
> 标签：android, timer, camera, sleep

我是 Java / Android 的新手。我正在为一个学校项目开发一个应用程序，我需要打开和关闭相机的闪电/闪光灯，就像闪光灯一样，我需要控制它打开和关闭的时间，现在我`Thread.sleep();`用来控制等待时间，但这还不够准确。我可能想使用某种类型的计时器`System.nanotime()`，但我不知道使用它的好方法，你们中的任何黑客都可以帮助我吗？

我试过这个。希望有更好的方法。

```
public void waiton(int ms){
    long t0 = System.nanoTime()+ ms*1000000;
    while(t0 > System.nanoTime()){

    }
} 
```

而不是睡觉。

```
Threat.sleep(5); 
```

我想看看我能多快做出一个稳定的频闪灯，它最终不是我想要的频闪灯，但我想看看我能做到多快。这是为了学习！:P。

在这里你可以看到我正在处理的代码。

```
import android.app.Activity;
import android.hardware.Camera;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.Switch;

public class FlashActivity extends Activity {

public Camera cam = Camera.open();

int i = 1;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.setContentView(R.layout.flashview);

    final Button onbutton = (Button)findViewById(R.id.onbutton);
    final Button offbutton = (Button)findViewById(R.id.offbutton);

    final Switch switchonoff = (Switch)findViewById(R.id.switch1);

    onbutton.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            i = 1;

            new Thread(new Runnable() {
                public void run() {

                    Thread.currentThread().setPriority(Thread.MAX_PRIORITY);

                    Camera.Parameters p = cam.getParameters(), p2 = cam.getParameters();

                    p.setFlashMode(Camera.Parameters.FLASH_MODE_TORCH);
                    p2.setFlashMode(Camera.Parameters.FLASH_MODE_OFF);

                    cam.startPreview();
                    cam.cancelAutoFocus();
                    //cam.autoFocus(null);

                    while (i == 1){
                    cam.setParameters(p);

                    waiton(10);

                    cam.setParameters(p2);

                    waitoff(10);

                    }
                }

              }).start();   
        }
    });

    offbutton.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            i = 0;
            cam.stopPreview();          

        }
    });

    switchonoff.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
        Switch nv = (Switch)v;
        if(nv.isChecked()){
            i = 1;

        }else{
            i = 0;

        }
        }
    });
}

@Override
protected void onStop() {
    super.onStop();

    cam.stopPreview();
    i = 0;

    if (cam != null) {
        cam.release();
    }
}

@Override
protected void onPause() {
    super.onStop();

    cam.stopPreview();

    if (cam != null) {
        cam.release();
    }
}

public void waiton(int ms){
    long t0 = System.nanoTime()+ ms*1000000;
    while(t0 > System.nanoTime()){

    }
}

public void waitoff(int ms){
    long t1 = System.nanoTime()+ ms*1000000;
    while(t1 > System.nanoTime()){

    }
}
}; 
```

忽略开关，现在我正在从 2 个按钮转换为一个开关。但是我希望闪光灯之前可以工作，我对其进行了更多更改。

如果你们中的一些人有办法在不使用相机的情况下控制闪电战/闪光，那适用于所有较新的安卓手机。那将是完美的。

我的自动对焦有一些问题，会在一段时间内抛出错误，这可能会使我的程序更不稳定，焦点区域不能是 0,0,0,0，不知道我应该怎么做将其更改为。

稍后当它工作时，我想我会将它转换为状态机，以从中获得更多功能。如果对我来说可能的话：p。

# iphone - 使用 uimage 时的内存泄漏

> ID：12974666
> 
> 赞同：0
> 
> 时间：2012-10-19T12:50:26.137
> 
> 标签：iphone, memory-management, memory-leaks, storyboard, instruments

我正在开发一个包含大量图像的项目。我只是想确定，如果我的任何视图控制器包含大约 70 张图像并且我已经通过情节提要放置了这些图像，那是否也会消耗大约 2-3 MB 的内存？，因为它在仪器中显示或由于一些内存泄漏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:57:59.943

根据您的描述，没有泄漏，您的代码应该能够提供更多信息。所以简而言之，如果加载应用程序并渲染图像，它会占用内存。但是，如果您没有正确管理内存，它会泄漏，并且您的问题不包含足够的信息来对此发表任何评论。

# jqgrid - 显示记录下拉菜单的jqgrid分页问题

> ID：12974667
> 
> 赞同：0
> 
> 时间：2012-10-19T12:50:27.717
> 
> 标签：jqgrid

我在有分页的 jqgrid 中面临以下问题：考虑我的结果集有 12 条记录，并且我的显示记录下拉列表有选项`10,20`可以选择一次显示的记录数。

***step1*** - 当我第一次加载网格时，显示记录具有价值`20`，我可以`12`在网格中看到记录。 ***step2*** *-*现在我`10`从显示记录中选择；网格刷新，我可以看到 10 条记录。选择的页面是 1 of 2。 ***step3** - * 转到此结果集的第二页；网格刷新，我可以看到`2`记录。所选页面是 2 of 2 ***Step4** * 现在我将 Display Records 的值更改为 20；网格刷新，我看不到网格中的行。

发生这种情况是因为当我更改显示记录的值时，页码应始终作为 1 传递，但它被错误地作为当前值传递，因此我的 SP 返回不正确的结果。有什么解决办法吗？

我正在使用 jqgrid 3.5.2 版

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2017-04-08T11:49:23.653

## 当 page_num 大于 1 并且总记录数小于 Display Records 时，设置 page_num =1：

如果页面 > 1: 如果 int(request.get('hidden_​​total_records_count')) <= int(req.get('result_per_page')): page = 1

这个编码是在 python 中的。分享你的整个逻辑以获得更好的答案。

# android - 安卓兼容性

> ID：12974680
> 
> 赞同：1
> 
> 时间：2012-10-19T12:51:08.260
> 
> 标签：android, compatibility

我正在创建一个应用程序，我想在其中根据 Android 版本更改我的应用程序的视图。

在我看来，我想显示三个标签：

```
 Simple tab - lower API 10
 Action Bar tab 11 - API 14
 View Pager - above API 14. 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T13:02:50.943

如[android 文档](http://developer.android.com/reference/android/os/Build.VERSION.html#SDK_INT)中所述，手机 API 级别的 SDK 级别（整数）可用于：

```
android.os.Build.VERSION.SDK_INT; 
```

代码示例：

```
int currentapiVersion = android.os.Build.VERSION.SDK_INT;
if (currentapiVersion > 14) {
   // do something for View Pager
}
else if (currentapiVersion >= 11 && currentapiVersion <= 14) {
   // do something for Action Bar tab
}
else { 
   // do something Simple tab 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T12:58:42.253

对于 froyo 或更低：`if (android.os.Build.VERSION.SDK_INT < 9)`

对于蜂窝或更低：`if (android.os.Build.VERSION.SDK_INT < 12)`

所有其他用途:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T12:59:16.543

您可以使用操作栏 Sherlock。它根据版本行事。在此处浏览此[链接](http://actionbarsherlock.com/)

它可以帮助你

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-19T12:53:21.743

```
public static boolean froyoOrNewer() {
    // SDK_INT is introduced in 1.6 (API Level 4) so code referencing that would fail
    // Also we can't use SDK_INT since some modified ROMs play around with this value, RELEASE is most versatile variable
    if (android.os.Build.VERSION.RELEASE.startsWith("1.") ||
        android.os.Build.VERSION.RELEASE.startsWith("2.0") ||
        android.os.Build.VERSION.RELEASE.startsWith("2.1"))
        return false;

    return true;
} 
```

# php - How send parameter format uft8 by GET method?

> ID：12974693
> 
> 赞同：0
> 
> 时间：2012-10-19T12:51:48.403
> 
> 标签：php

I encode param as:

```
 $Title="CSVのアップロードに失敗しました。CSV(.zip)ファイルの内容を修正して、再度アップロードをやり直してください。"       ;
 $Title1=urlencode($Title); 
```

Value of $Title1 is:

```
"CSV%E3%81%AE%E3%82%A2%E3%83%83%E3%83%97%E3%83%AD%E3%83%BC%E3%83%89%E3%81%AB%E5%A4%B1%E6%95%97%E3%81%97%E3%81%BE%E3%81%97%E3%81%9F%E3%80%82CSV%28.zip%29%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E5%86%85%E5%AE%B9%E3%82%92%E4%BF%AE%E6%AD%A3%E3%81%97%E3%81%A6%E3%80%81%E5%86%8D%E5%BA%A6%E3%82%A2%E3%83%83%E3%83%97%E3%83%AD%E3%83%BC%E3%83%89%E3%82%92%E3%82%84%E3%82%8A%E7%9B%B4%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%E3%80%82" 
```

I send param as:

```
 header("Location:".JRoute::_('index.php?option=com_servicemanager&view=i0702'.'&msg='.$msg1."&Title=".$Title1)); 
```

Why on url : value of Title don't encode:

```
http://localhost:81/joomlandk/index.php/component/servicemanager/?view=i0702&amp;msg=File%20is%20invalid.&amp;Title=CSVă®ă‚¢ăƒƒăƒ—ăƒ­ăƒ¼ăƒ‰ă«å¤±æ•—ă—ă¾ă—ăŸă€‚CSV(.zip)ăƒ•ă‚¡ă‚¤ăƒ«ă®å†…å®¹ă‚’ä¿®æ­£ă—ă¦ă€å†åº¦ă‚¢ăƒƒăƒ—ăƒ­ăƒ¼ăƒ‰ă‚’ă‚„ă‚ç›´ă—ă¦ăă ă•ă„ă€‚ 
```

Can you help me?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T13:10:59.180

One way to properly exchange non-ASCII data is to encode it with [`base64_encode`](http://php.net/base64_encode). Since Base64 is not completely URL-safe can use `urlencode` and `urldecode` or you can write a function, which produces URL-safe Base64.

I took it from [this answer](https://stackoverflow.com/a/5835352/1401510) by [joeshmo](https://stackoverflow.com/users/197484/joeshmo):

```
function base64_url_encode($input) {
    return strtr(base64_encode($input), '+/=', '-_,');
}

function base64_url_decode($input) {
    return base64_decode(strtr($input, '-_,', '+/='));
} 
```

With this helper function you can encode your text:

```
$Title = "CSVのアップロードに失敗しました。CSV(.zip)ファイルの内容を修正して、再度アップロードをやり直してください。"       ;
$encoded_title = base64_url_encode($Title); 
```

To decode it on the other side, simply do this:

```
$Title = base64_url_decode($_GET['Title']); 
```

# documentation - 文档生成器如何工作？

> ID：12974694
> 
> 赞同：1
> 
> 时间：2012-10-19T12:52:02.750
> 
> 标签：documentation, javadoc, doxygen, documentation-generation

我试图了解 Doxygen、JavaDocs 等文档生成器是如何工作的。请不要误会我的意思，我不是在问如何使用它们，而是在问它们是如何做到的。我试图查找有关该主题的信息，但只找到 1 篇非常旧的文章，所以我有点沮丧。

有人知道这方面的任何文章或文献吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T13:37:32.453

对于 doxygen 有一个[关于 Doxygen 内部的手册页](http://www.doxygen.nl/manual/arch.html)。

一些小型文档生成器只是使用正则表达式来提取文档。更灵活和复杂的方法是开发语言解析器和文档语法解析器，就像 doxygen 和 Javadoc 一样。

# jquery - DateTimePicker AM/PM 下拉菜单

> ID：12974697
> 
> 赞同：11
> 
> 时间：2012-10-19T12:52:12.220
> 
> 标签：jquery, jquery-ui-datepicker, datetimepicker, custom-datetimepicker

我正在使用（并且喜欢）datetimepicker，它是 jQuery UI Datepicker 的绝佳补充。但是，我使用的是下拉选项（你可以在这里看到所有这些——http: [//trentrichardson.com/examples/timepicker/](http://trentrichardson.com/examples/timepicker/)），我想要三个下拉菜单——一个小时（1-12） 、分钟（00 到 60）和上午/下午。

现在，小时字段也有上午/下午，我不知道如何添加另一个下拉菜单来控制上午/下午。

这是我的初始化：

```
$( ".datepicker" ).datetimepicker({
                        controlType: 'select',
                        timeFormat: "h:mm TT",
                        ampm: true
                }); 
```

我觉得这可能是一个非常简单的问题，但我找不到任何真正的文档来暗示我是如何做到这一点的。请帮忙！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-12-27T03:48:30.637

检查这个，它对我来说很安静。

[http://xdsoft.net/jqplugins/datetimepicker/](http://xdsoft.net/jqplugins/datetimepicker/)

可行的脚本：

```
 $j('dDatetime').datetimepicker({
            format: 'Y/m/d A g:i',
            formatTime: 'A g:i',
        }); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-01T06:46:37.753

快速解决方案：

jquery-ui-timepicker-addon.js

覆盖或更改“controlType：'slider'”为“controlType：'select'”

# java - Windows 7 JNLP 文件上的 Webstart 应用程序消失

> ID：12974701
> 
> 赞同：2
> 
> 时间：2012-10-19T12:52:21.850
> 
> 标签：java, windows-7, desktop, jnlp, java-web-start

我们正在验证我们在 Windows 7 上的 Web 启动应用程序之一，因为这正是我们的企业正在转向的。

我们正在看到最奇怪的事情。当用户通过 VPN 连接到我们的网络时运行应用程序时，应用程序会下载并正常运行。

但是，从 VPN 断开连接后，jnlp 文件会立即从 Java 缓存中删除，随后尝试通过桌面快捷方式运行应用程序会失败，因为缓存中的 jnlp 文件（在快捷方式中引用）丢失。

我们还看到，有时当用户重新启动时，应用程序完全从 java 缓存中消失，根本没有 jar 文件，就好像它从未安装过一样。

有谁知道这里发生了什么？它与 Windows 7 中新的 LocalLow 安全性有关吗？

提前感谢您的帮助。如果我们无法解决，我们可能会完全放弃 Web Start。

# html - 下拉菜单无法在 IE 中显示

> ID：12974706
> 
> 赞同：0
> 
> 时间：2012-10-19T12:52:41.707
> 
> 标签：html, css, drop-down-menu

我有一个使用 css 的下拉菜单，我用看起来不错的 Firefox 打开。但是当我尝试使用 IE 9 打开时，下拉菜单显示，但它看起来透明且内容不显示。

这是在我检查了我的 CSS 之后，如果我删除了这段代码，在 IE 中就可以了。但我想保留这段代码。那么我该怎么做呢？

![在此处输入图像描述](../Images/21752c593605a760077b78dacb3882ed.png)

```
background-repeat:repeat-x;
filter:progid:dximagetransform.microsoft.gradient(
    startColorstr='#00a1bc',
    endColorstr='#008ba2',
    GradientType=0);
-webkit-box-shadow:0 1px 3px rgba(0,0,0,0.25),
    inset 0 -1px 0 rgba(0,0,0,0.1);
-moz-box-shadow:0 1px 3px rgba(0,0,0,0.25),
    inset 0 -1px 0 rgba(0,0,0,0.1);
box-shadow:0 1px 3px rgba(0,0,0,0.25),
    inset 0 -1px 0 rgba(0,0,0,0.1); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T15:27:29.447

无法确定，因为我需要查看更多代码，但是查看图像看起来可能是 z-index 的问题。在我看来，表格内容似乎位于下拉列表的顶部，从而阻止了其中的任何内容。

如果您在下拉列表中使用 position 属性，以及在其上方/之后的内容，请确保下拉列表的 z-index 高于其他内容的 z-index。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-19T14:21:54.550

请尝试为渐变添加 -ms- 供应商前缀。

# hadoop - 我应该如何处理映射作业中的中间数据？

> ID：12974711
> 
> 赞同：1
> 
> 时间：2012-10-19T12:53:06.543
> 
> 标签：hadoop, hbase

我正在考虑为 HBase 编写查询语言。使用这种查询语言，用户将能够应用过滤器、跨行映射函数以及聚合/减少数据。（而且，它是一种特定于领域的查询语言。）想象一下数据集非常大，如果使用 HBase，情况通常如此。

我的问题是：我应该如何处理不同过滤、映射和聚合之间的中间数据。我应该将数据保存在文件系统上吗？这似乎有点浪费。我应该尝试编写函数并一口气完成所有事情吗？

我意识到这在一定程度上取决于我想要实现的目标以及我的查询语言会是什么样子。但是这个普遍的问题通常是如何处理的呢？您有什么建议或见解要分享吗？有没有很好的文章/资源可以解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T14:07:01.497

看看[级联](http://www.cascading.org/)。

当我想连接几个 map reduce 作业时，我发现它非常有用。

您可以创建 Cascading [Hbase tap](http://wiki.apache.org/hadoop/Hbase/Cascading)然后将其插入管道并使用[Cascading API应用函数、聚合器、分组等](http://docs.cascading.org/cascading/2.0/javadoc/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T23:57:54.313

[Pig](http://pig.apache.org)和[Hive](http://hive.apache.org)都可以做到这一点（并且可以在 HBase 上工作）。他们的工作方式是双重的。首先，他们尝试尽可能多地适应每个 MR 阶段。然而，这有时根本不可能。例如，一个组，然后是一个变换，然后是另一个组，一次是不可能的。对于中间数据，它们只是写出到 HDFS。这是最简单的方法，对于任何合理数量的数据，无论如何您都必须写入磁盘。他们只是在完成后删除中间数据。

另外，您确定要重新发明轮子吗？你几乎刚刚描述了猪。将您的语言“编译”为 Pig Latin 甚至可能是值得的。

# installation - 为什么 Installshield 2010 不会在升级时部署更新的组件？

> ID：12974712
> 
> 赞同：0
> 
> 时间：2012-10-19T12:53:11.877
> 
> 标签：installation, installshield, installshield-2010

我有一个 install shield 项目，它经历了各种版本，目前是 3.7 版本。项目中有一个组件，其中包含四个 vdb 文件，设置为始终覆盖。在新机器上安装软件时，它工作正常。这四个文件被复制到目标目录中。如果我在以前的版本上执行升级，比如 3.6，文件将被忽略并且目录的内容不变（以前包含 2 个文件）。

我还将重新安装模式设置为 amus。

是否有任何其他方法可以确保文件被覆盖/组件部署？

谢谢

# c# - 基于插件架构的 Windows 服务

> ID：12974713
> 
> 赞同：1
> 
> 时间：2012-10-19T12:53:14.127
> 
> 标签：c#, windows-services

我正在构建基于插件架构的 Windows 服务，但遇到了一些问题。问题是我希望插件在主应用程序上触发事件。这是一些代码。

这些是代表

```
namespace eTreasury.SchedulerInterface
{
    public enum Severity
    {
        Message,
        Warning,
        Error
    }

    public delegate void ErrorHandler(string message, Severity errorSeverity);
    public delegate void CompletedHandler(string message);
    public delegate void ProgressReportHandler(string message, int percentCompleted);
} 
```

这是界面

```
public interface IPluginInterface : IDisposable
    {
        string Identifier{ get; }

        void Run();
        void Dispose();

        event ErrorHandler OnError;
        event CompletedHandler OnCompleted;
        event ProgressReportHandler OnProgress;
    } 
```

这是我希望所有插件继承的基类

```
public abstract class BasePlugin : MarshalByRefObject, IPluginInterface
{
    protected string _identifier;
    public string Identifier
    {
        get { return _identifier; }
    }

    public abstract void Run();

    protected void ReportError(string message, Severity errorSeverity)
    {
        if (OnError != null)
            OnError(message, errorSeverity);
    }
    protected void ReportProgress(string message, int percentCompleted)
    {
        if (OnProgress != null)
            OnProgress(message, percentCompleted);
    }
    protected void ReportProgress(string message)
    {
        ReportProgress(message, 0);
    }
    protected void ReportCompleted(string message)
    {
        if (OnCompleted != null)
            OnCompleted(message);
    }

    public void Dispose()
    {
        OnError = null;
        OnCompleted = null;
        OnProgress = null;
        _identifier = null;
    }

    public event ErrorHandler OnError;
    public event CompletedHandler OnCompleted;
    public event ProgressReportHandler OnProgress;
} 
```

这是插件

```
public class CurrencyRatesPlugin : BasePlugin
{
    public CurrencyRatesPlugin()
    {
        _identifier = "CurrencyRatesPlugin";
    }

    public override void Run()
    {
        try
        {
           ReportProgress("bla", 0);
        }
        catch (Exception e)
        {
            ReportError("bla");
        }
    }
} 
```

这是我的 Windows 服务代码

```
public partial class CurrencyRatesPluginService : ServiceBase
    {
        AppDomain appDomain;
        IPluginInterface pluginInterface;
        System.Timers.Timer Timer = null;

        public CurrencyRatesPluginService()
        {
            InitializeComponent();
        }

        protected override void OnStart(string[] args)
        {
           try
            {
                this.appDomain = CreateAppDomain();
                this.pluginInterface = (IPluginInterface)appDomain.CreateInstanceFrom("C:\\eTreasuryScheduler\\Plugins\\eTreasury.CurrencyRatesPlugin.dll", "eTreasury.Plugins.CurrencyRatesPlugin.CurrencyRatesPlugin").Unwrap();

                PluginSection section = (PluginSection)ConfigurationManager.GetSection("PluginSectionGroup/PluginSection");
                if (section == null)
                {
                    EventLogManager.LogError("bla");
                }
                else
                {
                    Timer = new System.Timers.Timer();
                    Timer.Enabled = false;
                    Timer.Interval = section.PluginItems[0].Interval;
                    Timer.Elapsed += new System.Timers.ElapsedEventHandler(Timer_Elapsed);
                    Timer.Start();
                }
            }
            catch(Exception ex)
            {
                EventLogManager.LogError(String.Format("{0}...{1}", ex.Message, ex.InnerException == null ? string.Empty : ex.InnerException.Message));
            }
        }

        protected override void OnStop()
        {
            Timer.Stop();
            this.pluginInterface.Dispose();
            AppDomain.Unload(this.appDomain);
        }

        void Timer_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
        {
            Process();
        }

        void Process()
        {
            try
            {
                this.pluginInterface.OnProgress += ProcessProgressReportHandler;
                this.pluginInterface.OnCompleted += ProcessCompletedHandler;

                pluginInterface.Run();

                this.pluginInterface.OnProgress -= ProcessProgressReportHandler;
                this.pluginInterface.OnCompleted -= ProcessCompletedHandler;
            }
            catch (Exception ex)
            {
                EventLogManager.LogError(String.Format("{0}...{1}", ex.Message, ex.InnerException == null ? string.Empty : ex.InnerException.Message));
            }
        }

        private void ProcessProgressReportHandler(string message, int percentCompleted)
        {
            EventLogManager.LogInformation(message);
        }

        private void ProcessCompletedHandler(string message)
        {
            EventLogManager.LogInformation(message);
        }

        AppDomain CreateAppDomain()
        {
            ...
        }
    } 
```

除了事件之外，一切都运行良好。错误发生在这里

```
this.pluginInterface.OnProgress += ProcessProgressReportHandler; 
```

错误信息是

```
Exception has been thrown by the target of an invocation....Could not load file or assembly 'eTreasury.SchedulerService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null' or one of its dependencies. The system cannot find the file specified. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:25:26.270

我在插件接口中添加了 IHost 接口和 Initialize 方法。在主机应用程序中加载插件时，我调用该插件的 Initialize 方法并将 Host 传递给它。在此之后，我可以从插件调用主机方法。

# iphone - 如何在自定义单元格中移动 CGRect？

> ID：12974714
> 
> 赞同：0
> 
> 时间：2012-10-19T12:53:17.107
> 
> 标签：iphone, objective-c, ios, xcode, uitableview

所以，我有一个自定义单元类，在实现中我有这个代码：

```
- (void)layoutSubviews {
    [super layoutSubviews];

    CGRect contentRect = self.contentView.bounds;
    CGFloat boundsX = contentRect.origin.x;
    CGRect frame;

    frame = CGRectMake(boundsX+10,10, 50, 50);
    picture.frame = frame;

    frame = CGRectMake(boundsX+75 ,0, 170, 50);
    nameLabel.frame = frame;

    frame = CGRectMake(boundsX+75 ,43, 225, 23);
    costLabel.frame = frame;

    frame = CGRectMake(boundsX+280, 30, 8, 13);
    arrow.frame = frame;
} 
```

现在让我们看看下图这个布局是如何工作的：

![在此处输入图像描述](../Images/c894b8960cb41c05296eefe51aa3647e.png)

我对结果很满意，但我也想根据 nameLabel 更改**单元**格中的**costLabel**位置。**如果nameLabel**中有两个文本，我不想更改 costLabel 的位置，但是如果 nameLabel 只有一个文本，我想将**costLabel上****移**，这样我就可以摆脱空间并制作**costLabel**更接近**nameLabel**。**`lines`**`line`****

 ******我在**cellForRowAtIndexPath**试过这个：

```
CGRect frame = cell.costLabel.frame;
frame.origin.y = frame.origin.y-10; // new y coordinate
cell.costLabel.frame = frame; 
```

但它没有用。

任何解决方案或想法，我怎样才能改变`CGRect`坐标（y原点）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T13:06:37.940

layoutSubviews 将在它想要绘制您的单元格时被调用。在 layoutSubviews 中进行框架更改（即

```
if (thereIsOnlyOneLineInThisCell) {
  frame = CGRectMake(boundsX+75 ,43 -10, 225, 23);
} else {
   frame = CGRectMake(boundsX+75 ,43, 225, 23);
}

   costLabel.frame = frame; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T13:13:29.320

您可以使用以下方法计算 nameLabel 的大小：[NSString UIKit addeds](http://developer.apple.com/library/ios/#documentation/uikit/reference/NSString_UIKit_Additions/Reference/Reference.html)******

# jquery - 显示隐藏输入的值

> ID：12974717
> 
> 赞同：0
> 
> 时间：2012-10-19T12:53:34.990
> 
> 标签：jquery, jquery-ui

我正在使用 jquery ui 日期选择器让用户在选择日期时选择日期我有一个隐藏字段，它以备用日期格式添加日期选择器的值。

我需要做的是动态输出隐藏输入的值。

我已经尝试过了，但它似乎只有在用户手动输入日期并且不使用日期选择器图像图标并滚动日历时才有效。

```
$('#datepicker').keyup(function () {
$('#date-output').text($(this).val());
}); 
```

任何帮助将不胜感激。

**Jquery 日期选择器代码**

```
//date pickers
$(function() {
    $( "#datepicker" ).datepicker({
        showOn: "button",
        buttonImage: "images/calendar.gif",
        buttonImageOnly: true,
        dateFormat:"dd/mm/yy",
        minDate: +0,
        altField: "#alternate",
        altFormat: "D MM d",
        onSelect: function(dateText, inst) {
        var suffix = "";
        switch(inst.selectedDay) {
            case '1': case '21': case '31': suffix = 'st'; break;
            case '2': case '22': suffix = 'nd'; break;
            case '3': case '23': suffix = 'rd'; break;
            default: suffix = 'th';
        }

    $("#alternate").val($("#alternate").val() + suffix);
}
        });
    }); 
```

**HTML**

```
<input name="datepicker" class="calendarInput" type="text" id="datepicker">
<input name="alternate" id="alternate" type="hidden" >
<span id="date-output"></span> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T12:58:11.127

您可以使用 onSelect API 方法

[http://api.jqueryui.com/datepicker/#option-onSelect](http://api.jqueryui.com/datepicker/#option-onSelect)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T13:11:51.427

你可以使用`onSelect`事件

```
$(function() {
    $("#datepicker").datepicker({
        dateFormat: "dd/mm/yy",
        minDate: +0,
        altField: "#alternate",
        altFormat: "D MM d",
        onSelect: function(dateText, inst) {
            debugger
            var suffix = "";
            switch (inst.selectedDay) {
            case '1':
            case '21':
            case '31':
                suffix = 'st';
                break;
            case '2':
            case '22':
                suffix = 'nd';
                break;
            case '3':
            case '23':
                suffix = 'rd';
                break;
            default:
                suffix = 'th';
            }

            $("#alternate").val($("#alternate").val() + suffix);
            $('#date-output').text($(this).val());
        }
    });
});​ 
```

[现场演示](http://jsfiddle.net/UqJtG/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T13:06:39.930

[演示](http://jsfiddle.net/mplungjan/Ucun7/)

```
 onSelect: function(dateText, inst) {
    var suffix = "";
    switch(inst.selectedDay) {
        case '1': case '21': case '31': suffix = 'st'; break;
        case '2': case '22': suffix = 'nd'; break;
        case '3': case '23': suffix = 'rd'; break;
        default: suffix = 'th';
    }

    var val = $("#alternate").val() + suffix;
    $("#alternate").val(val);
    $('#date-output').text(val);
} 
```

# ruby-on-rails-3 - STI 路由错误

> ID：12974719
> 
> 赞同：0
> 
> 时间：2012-10-19T12:53:38.947
> 
> 标签：ruby-on-rails-3, routing, sti

新手在学习了 Hartl 的 Rails 教程书籍和视频后，正在开发他的第一个 Rails 应用程序。

我正在使用 STI 模型，其中：

```
class User < ActiveRecord::Base
class Kid < User
class Parent < User 
```

用户具有基本元素：姓名、电子邮件等。

我遇到的问题是路由。我将继续努力确定哪种模型最终在这种情况下效果最好（STI 或多态）。我从 STI 开始，如果我能确定路由问题，我想我可以让它工作。

**我的问题是我的编辑正在寻找用户控制器中的“更新”操作，当我希望它路由到 Kidupdate**我一直在阅读许多关于 STI 路由的 SO 帖子但我似乎无法弄清楚为什么这不会路线正确。

Rspec 测试。错误来自“click_button”

```
describe "with valid information" do
  let(:new_first)   { "New First" }
  let(:new_last)    { "New Last" }
  let(:new_email)   { "new@example.com" }
  before do
    fill_in "First Name",               with: new_first
    fill_in "Last Name",                with: new_last
    fill_in "Email",                    with: new_email
    select  "Kid",  from: "Are you a Kid or Parent"
    fill_in "Password",                 with: kid.password
    fill_in "Confirmation",             with: kid.password
    click_button "Save changes"
  end 
```

Rspec 错误：

```
 KidPages edit with valid information 
     Failure/Error: click_button "Save changes"
     AbstractController::ActionNotFound:
       The action 'update' could not be found for UsersController
     # (eval):2:in `click_button'
     # ./spec/requests/kids_pages_spec.rb:32:in `block (4 levels) in <top (required)>' 
```

路线：

```
 root        /                         static_pages#home
       help        /help(.:format)           static_pages#help
    contact        /contact(.:format)        static_pages#contact
     signup        /signup(.:format)         users#new
     signin        /signin(.:format)         sessions#new
    signout DELETE /signout(.:format)        sessions#destroy
    kidshow        /kids/:id(.:format)       users#kidshow
  kidupate PUT    /kids/:id(.:format)       users#kidupdate
    kidedit        /kids/:id/edit(.:format)  users#kidedit
      users GET    /users(.:format)          users#index
            POST   /users(.:format)          users#create
   new_user GET    /users/new(.:format)      users#new
  edit_user GET    /users/:id/edit(.:format) users#edit
       user GET    /users/:id(.:format)      users#show
            PUT    /users/:id(.:format)      users#update
            DELETE /users/:id(.:format)      users#destroy
   sessions POST   /sessions(.:format)       sessions#create
new_session GET    /sessions/new(.:format)   sessions#new
    session DELETE /sessions/:id(.:format)   sessions#destroy 
```

路线.rb

```
 root to: 'static_pages#home'
  match '/help',    to: 'static_pages#help'
  match '/contact', to: 'static_pages#contact'
  match '/signup',  to: 'users#new'
  match '/signin',  to: 'sessions#new'
  match '/signout',  to: 'sessions#destroy', via: :delete
  match 'kids/:id', to: 'users#kidshow',  :as => 'kidshow'
  match 'kids/:id', to: 'users#kidupdate', :via => 'put', :as => 'kidupdate'
  match 'kids/:id/edit', to: 'users#kidedit',  :as => 'kidedit'
  resources :users
  resources :sessions, only: [:new, :create, :destroy] 
```

几周以来，我一直在为这些概念和这个问题苦苦挣扎，感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T13:46:40.890

你可以更好地组织你的控制器来完全避免这个问题。见下文

路线.rb

```
resources :kids 
resources :parents 
```

这将直接为您提供命名路径：

```
edit_kid_path(kid_id) 
edit_parent_path(parent_id) 
```

kids_controller.rb

```
class KidsController < ApplicationController
  def update
  end
end 
```

parents_controller.rb

```
class ParentsController < ApplicationController
  def update
  end    
end 
```

如果您想共享控制器行为，您可以这样做

```
class KidsController < UsersController
end

class ParentsController < UsersController
end 
```

并将常用操作放在 users_controller.rb 中，并在子控制器中覆盖它们。

关于使用什么模型关系的决定应该独立于你如何构建你的控制器。控制器和路由是考虑的领域之一。建模数据完全是单独考虑的。声明资源只是一些匹配路线的捷径。

如果您不打算使用 users#update 等，`resources :users`则不需要声明，因为您没有使用声明提供的任何路由。

# iphone - UILabel 文本换行在 IOS 6 中显示第二行，在第一行之前有一个空格

> ID：12974724
> 
> 赞同：0
> 
> 时间：2012-10-19T12:53:59.263
> 
> 标签：iphone, ios, ios6

我只是在 tableview 中使用自定义 Uilabel，我从我的 sqlite 表中给出了一些文本行。我设置 label.numberoflines=0;它换行但第二行出现在第一行之前的一个空格。如何使第二行位于与第一行相同的 x 位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:56:55.513

确保您的 UILabel 左对齐：

```
yourLabel.textAlignment = UITextAlignmentLeft; 
```

或者如果您正在使用它，请在 ib 中执行。

# java - 如何正确让两个线程更新同一个集合？

> ID：12974726
> 
> 赞同：0
> 
> 时间：2012-10-19T12:54:12.067
> 
> 标签：java, multithreading

我有一个程序需要来自 2 个来源的命令。另一个是套接字接口，另一个是事件监听器。

设置监听器后，程序通过调用等待命令：

```
wait(); 
```

命令，当它们到达时，会使用同步方法添加到 Vector （附加到末尾），在添加命令后调用

```
notify(); 
```

发生这种情况时，从 wait() 调用继续执行并处理命令 Vector 的内容，从第一个元素开始。为了测试功能，我在处理方法中添加了一个 Thread.sleep(5000) ，因此处理至少需要 5 秒。

然后我从两个来源生成命令。

事实证明，这些命令不是按照它们到达的顺序处理的！作为事件到达的事件最终会被首先处理，即使来自套接字的命令首先到达。

什么可能导致这种情况？我的设计坏了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:58:21.220

对我来说，听起来你想使用[BlockingQueue](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/BlockingQueue.html)。让源向它添加命令，并让处理程序按顺序执行它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T12:58:44.703

使用[BlockinQueue](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/BlockingQueue.html)，您可以提供：

*   对发送者、命令发布者没有阻止但受控的访问
*   消费者的等待点，安全弹出命令的能力

# ios - 我已经用java开发了一个应用程序我如何在xcode模拟器中打开它

> ID：12974731
> 
> 赞同：0
> 
> 时间：2012-10-19T12:54:21.503
> 
> 标签：ios, iphone, xcode

我的团队开发了一个大型社交网络应用程序。现在我想将它发布到应用商店。但是该应用程序不是用Objective C编写的。在应用商店发布它的方法是什么？或者至少我如何在 Xcode 模拟器中打开以进行测试和增强？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T13:02:18.790

我的猜测是您在 android 中创建了一个应用程序，现在想将其移植到 iOS。不幸的是，Xcode 无法将 Java 转换为 Objective-C，iOS 无法运行 Java 应用程序，因此您将无法将您的应用程序按原样提交到 App Store。

您将不得不以艰难的方式完成并用 Objective-C 重写整个应用程序。幸运的是，谷歌最近推出了一款翻译器，可能有助于完成部分工作：http: [//google-opensource.blogspot.com.br/2012/09/j2objc-java-to-ios-objective-c.html](http://google-opensource.blogspot.com.br/2012/09/j2objc-java-to-ios-objective-c.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T13:57:38.070

你不能。对不起。

我最近为 iOS 和 Android 发布了一个应用程序，我们决定进行并行开发。

您的 Java 代码与 iOS 不兼容，Xcode 没有将其转换为 Obj-c 的过程。我知道的跨平台开发的唯一选择是：

1）大量使用基于c/c++的库；这些可以在 Android 应用程序和 iOS 应用程序中使用（这是我们使用的）。但是必须重新实现应用程序的整个前端。

2) 跨平台框架，例如 PhoneGap 或 Appcelerator，但这需要从您当前的代码库进行大量重新开发。

3) 像 Breno Gazzola 建议的那样的“翻译器”（另一种选择是 XMLVM），但这些只能为您完成一些工作，而且它们远非完美。

在不了解您的代码的情况下很难判断，但如果我是您，我会尽可能地考虑组合选项 1 和 3，但预算要完全重写。

# ios - 用于从 coredata 查询字符串的子字符串的谓词

> ID：12974737
> 
> 赞同：5
> 
> 时间：2012-10-19T12:54:58.727
> 
> 标签：ios, sqlite, core-data, nspredicate, nsfilemanager

在我的项目中，我在一个实体中有一组属性。其中一个是作为字符串的路径。我想要所有将我的字符串作为路径中的子路径的记录。

示例： **路径：** /var/mobile/Applications/C4ECC129-36D2-4428-8BB0-6B1F4C971FC1/Library/Caches/Packages/1000

**我的字符串**：库/缓存/包/1000

我尝试使用 Like 并包含如下但失败了。

```
[NSPredicate predicateWithFormat:@"bookPath like[c] '%%%@'",Mystring];
[NSPredicate predicateWithFormat:@"bookPath Contains[cd] '%@'",Mystring]; 
```

有人可以帮助编写谓词来获取那些包含 mystring 的记录吗？

真的帮了我很多。

提前 Tnx

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-19T15:03:23.833

你需要有这样的谓词

```
[fecthRequest setPredicate:[NSPredicate predicateWithFormat:@"bookPath endswith[cd] %@", myString]]; 
```

或这个

```
[fecthRequest setPredicate:[NSPredicate predicateWithFormat:@"bookPath contains[cd] %@", myString]]; 
```

没有结果是由于您的`%@`. 从文档（[动态属性名称](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Predicates/Articles/pCreating.html#//apple_ref/doc/uid/TP40001793-208600)）：

> 字符串变量在使用 %@ 替换为格式字符串时用引号括起来

关于谓词，我真的建议使用第一个，如果您要查找的子路径始终位于原始路径的最后部分。

关于使用谓词，我真的建议阅读[String Comparisons](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Predicates/Articles/pSyntax.html#//apple_ref/doc/uid/TP40001795-215868)。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T14:50:08.860

尝试这个：

```
[NSPredicate predicateWithFormat:@"%K contains %@", @"bookPath", Mystring]; 
```

# objective-c - 在下载之前了解 iOS 中图像的大小

> ID：12974738
> 
> 赞同：0
> 
> 时间：2012-10-19T12:55:03.517
> 
> 标签：objective-c, ios, ios5

> **可能重复：**
> [无需下载的远程图像大小](https://stackoverflow.com/questions/7164435/remote-image-size-without-downloading)

我有一些表格、视图等显示远程 URL 上的图像。为了使应用程序更加流畅，所有图像都是异步下载的。

在这种情况下，我需要在不下载图像的情况下知道图像的宽度/高度，以便正确设置表格行和一个在另一个后面的视图的高度（如 Pinterest gui）。

有谁知道这是怎么做到的吗？

谢谢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T17:54:58.513

您应该在显示之前下载图像并检查其大小。或者限制它的大小并缩小它以适应您预定的视图高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T17:59:32.010

获取大小后下载图像并更改大小`UITableViewCell`等。`UIView's``UIImage's`

# sharepoint - 是否可以创建一个从列表的特定视图中获取值的自定义列？

> ID：12974739
> 
> 赞同：0
> 
> 时间：2012-10-19T12:55:05.687
> 
> 标签：sharepoint, sharepoint-2007

我有一个包含两列产品和产品系列的产品列表。

我想创建另一个列表，使用第一个列表作为其中一列的查找。我可以这样做，即我创建一个自定义列，然后使用“从现有站点列添加”链接到第二个列表的“列表设置”页面。

但是，我真正想要的是自定义列只建议属于特定产品系列的产品。我可以在第一个列表中创建一个视图，它允许我只显示特定系列中的产品。但是，当我创建自定义列时，我看不到任何仅指定此视图的方法。

有人有想法么 ？

此致，

科尔姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T18:35:34.030

如果我理解正确，您正在尝试创建一个动态选择字段，该字段将根据用户在之前的选择字段中选择的内容进行填充。您将无法使用开箱即用的 SharePoint 进行配置。可以在表单中添加一些 javascript 来实现这一点。我相信您也可以在 InfoPath 中执行此操作，但我正在仔细检查。

# jquery - “动态”处理程序？

> ID：12974742
> 
> 赞同：0
> 
> 时间：2012-10-19T12:55:15.857
> 
> 标签：jquery

假设我有这个代码：

```
$('.mask-preview:not(.selected)').click(function () {
    $('.mask-preview.selected').removeClass('selected');
    $(this).addClass('selected');
    console.log("added");
}); 
```

`class="mask-preview selected"`现在，没有调用带有此处理程序的元素。当我在没有 的元素上调用它时`selected`，将调用处理程序并添加类。

但是现在，我仍然可以在该元素上调用该处理程序，即使`selected`添加了。事实上，“处理程序”并没有“更新”到 DOM。有没有办法动态地做到这一点？

我会摆脱每次检查`if(element.hasClass())`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:58:14.533

绑定只发生一次，并且在您更改元素时不会更改。

最简单的方法是检查回调中的类。

```
$('.mask-preview').on('click', function() {
    if ($(this).hasClass('selected')) {
        ...
    } else {
        ...
    }
}); 
```

**编辑**此答案已更新，感谢评论指出选择器`.on`仅适用于后代，而不适用于注册元素本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T13:02:16.880

像这样的东西？

```
$('#mask-preview').click(function () {
    if ( !$(this).hasClass('selected') ) {
        $(this).addClass('selected');
        console.log("added");
    } else {
        $(this).addClass('not_selected');
        console.log("added");
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T13:08:45.373

may be `.live` can help you in this

```
$('.mask-preview:not(.selected)').live('click',function () {
    $('.mask-preview.selected').removeClass('selected');
    $(this).addClass('selected');
    console.log("added");
});​ 
```

[Live Demo](http://jsfiddle.net/6ZEmY/1/)

# actionscript-3 - 加载外部 swf 时 as3 / flex 接口不兼容

> ID：12974743
> 
> 赞同：2
> 
> 时间：2012-10-19T12:55:17.740
> 
> 标签：actionscript-3, apache-flex, flash, external

我有一个主项目，我想将另一个项目的 swf 加载到其中：

```
//loader code in Main class of main project
var url:URLRequest = new URLRequest("../src/components/TextTool.swf");      
var ttWrapper:UIComponent = new UIComponent();
var ldr:SWFLoader = new SWFLoader(); 
var context:LoaderContext   = new LoaderContext();
if (Security.sandboxType == Security.LOCAL_TRUSTED) {
context.applicationDomain   = new ApplicationDomain(ApplicationDomain.currentDomain);
    }         ldr.source = "../src/components/TextTool.swf";
        ldr.loaderContext = context;
        ldr.addEventListener(Event.COMPLETE, onLoadComplete);
        ldr.load();     
        can.addElement(ldr); 
```

这是第二个项目的 Main 类的代码：

```
<?xml version="1.0" encoding="utf-8"?>
    <s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
        xmlns:s="library://ns.adobe.com/flex/spark"
        xmlns:stark="stark.*" name="textModule" >    
        <stark:TextTool name="myTF" id="myTF"></stark:TextTool>
    </s:Application> 
```

现在这两个项目都包含一个接口文件：IModule，具有相同的代码，以及第二个项目（正在加载的那个）的一个元素，它是我的自定义类“TextTool”的一个实例，它扩展了 s:Group 并实现模块：

```
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009"
        xmlns:s="library://ns.adobe.com/flex/spark"
        xmlns:mx="library://ns.adobe.com/flex/mx" width="400"
        xmlns:com="src"
        height="130" creationComplete = "initText()" implements="IModule"></s:Group> 
```

现在，一旦我加载了 swf，我就想访问该 TextTool 实例，该实例的 ID 为“myTF”：

```
//Code in the main class of the main project
    trace(getQualifiedClassName(mySwf.getChildByName('textModule')['myTF']));
    trace(mySwf.getChildByName('textModule')['myTF'] is IModule);
    //output:

    //stark::TextTool
    //false 
```

正如我上面提到的，我在两个项目中都有接口，相同的代码，它具有相对于主类的相同路径，并且 myTF 确实扩展了 IModule。加载 swf 后，我得到了正确的元素，但是在验证它是否实现 IModule 时我仍然得到错误。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T16:50:48.690

您正在测试`Application`实施

```
trace(mySwf.getChildByName('textModule') is IModule); 
```

我想你忘了添加`['myTF']`

```
trace(mySwf.getChildByName('textModule')['myTF'] is IModule); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T00:51:28.950

您将两者都加载到不同的 ApplicationDomains 中，因此先加载者获胜。尝试将它们加载到同一个 ApplicationDomain 中。

# heroku - Heroku syslog 消耗：tcp 会话过多

> ID：12974744
> 
> 赞同：3
> 
> 时间：2012-10-19T12:55:19.527
> 
> 标签：heroku, tcp, rsyslog

我在我的 Heroku 应用程序上设置了日志消耗，以将日志发送到我的其他服务器。我的 rsyslogd 可以很好地接收来自 Heroku 的日志，但是几个小时后，rsyslog 开始丢弃数据包，因为打开了太多的 TCP 连接：

```
Oct 18 06:28:17 localhost rsyslogd-2079: too many tcp sessions - dropping incoming request [try http://www.rsyslog.com/e/2079 ]
Oct 18 06:28:24 localhost rsyslogd-2079: too many tcp sessions - dropping incoming request [try http://www.rsyslog.com/e/2079 ]
Oct 18 06:28:24 localhost rsyslogd-2079: too many tcp sessions - dropping incoming request [try http://www.rsyslog.com/e/2079 ]
Oct 18 06:28:26 localhost rsyslogd-2079: too many tcp sessions - dropping incoming request [try http://www.rsyslog.com/e/2079 ]
[...] 
```

我尝试增加允许进入 rsyslogd 配置的最大会话数（我将其设置为 1000，这通常足以处理所有事情）。

同样的问题，所以我将此值增加到 3000。我现在遇到的问题更少，但我认为 3000 最大会话数特别高。

```
$ModLoad imtcp
$InputTCPServerRun 514
$InputTCPMaxSessions 3000 
```

你认为还有其他事情要做吗？我需要减少这个数字吗？也许还有其他事情要做来更好地处理来自 Heroku LogPlex 的日志。

# extjs - 在表单中加载多个 extjs 组合框

> ID：12974748
> 
> 赞同：4
> 
> 时间：2012-10-19T12:55:39.477
> 
> 标签：extjs

另一个组合框问题。

在我的表中，大约有 10 个字段是外键，都带有组合框。如何在一个表单中填写所有这些组合，而不需要去服务器 10 次来加载每个组合的存储？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T15:10:10.027

它们是否在后端存储为单独的表？如果是，那么正确的方法是将*它们加载到服务器 10 次*。您可以通过以下方式优化此方案：

*   同时加载它们
*   在您提前到达该页面之前将它们全部加载

但是您仍然希望在您的 ExtJs 应用程序中有 10 个不同的商店。

如果您想将它们组合成一个商店，请记住几件事

*   您需要在此组合表中添加其他字段，以便区分不同的列表。
*   你会一次加载它们
*   那么您仍然需要将它们分成不同的存储对象，因为否则不同的 UI 组件（组合框）将无法显示不同的数据集

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T02:51:28.507

众所周知的问题:) 通常当我有这样的结构时

```
var data = {
    ForeignKeyObjectId: 123,
    ForeignKeyObject: {
        Id: 123,
        SomeValue: 'Some text 1'
    },

    SomeOtherObjectId: 456,
    SomeOtherObject: {
        Id: 456,
        SomeValue: 'Some text 2'
    }
    //, ... same 8 times more
} 
```

我必须手动加载每个组合：

```
var combo1 = this.down('#foreignKeyObjectCombo');
combo1.setValue(data.ForeignKeyObject.Id);
combo1.setRawValue(data.ForeignKeyObject.SomeValue);
combo1.store.loadData([data.ForeignKeyObject], true);

var combo2 = this.down('#someOtherObjectCombo');
combo2.setValue(data.SomeOtherObject.Id);
combo2.setRawValue(data.SomeOtherObject.SomeValue);
combo2.store.loadData([data.SomeOtherObject], true);

// same 8 times more 
```

在我之前关于 ExtJs 3 的一个项目中，我对表单和组合框行为进行了一些覆盖，这样我就可以使用`form.getForm().loadData(data)`一次而不是手动设置值，如本例中的 rawValue。但这种方式是隐含的，所以我更喜欢这种方式:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-03T22:05:21.070

例子：

**模型 1**

```
Ext.create('Ext.data.Store', {
        model: 'EmployeeType',
        data : [
            {type: 1,    description: 'Administrative'},
            {type: 2,    description: 'Operative'},
        ]
    }); 
```

**模型 2**

```
Ext.create('Ext.data.Store', {
    model: 'BloodType',
    data : [
        {type: 1,    description: 'A+'},
        {type: 2,    description: 'B+'},
    ]
}); 
```

即使您的商店有代理，您也可以禁用 AutoLoad，这样您就可以在一个请求中加载任意数量的文件，如下所示：

手动创建商店：

```
employeeType = Ext.create('Ext.data.Store', {model: EmployeeType});
bloodType = Ext.create('Ext.data.Store', {model: BloddType}); 
```

创建一个 Ajax 请求，您可以在其中一次带来所有组合：

```
Ext.ajax.request({
    url: './catalogs/getalldata',
    success: function(response) {
        var json = Ext.decode(response.responseText);
        employeeType.loadData(json.employeeTypes);
        bloodType.loadData(json.bloodTypes);
        //...
    } 
}); 
```

# c# - C# NUnit参数化TestCaseSource值识别

> ID：12974749
> 
> 赞同：5
> 
> 时间：2012-10-19T12:55:39.557
> 
> 标签：c#, nunit

我在 NUnit 2.6.1 上使用 TestCaseSource 来测试具有不同对象类构造函数参数的相同断言。

我是说，

```
[Test, TestCaseSource("myConstructorsForMale")}
public void CheckMale(Person p) 
{
     Assert.That(p.IsMale);
}

static Person[] myConstructorsForMale = 
                     {
                         new Person("John"),
                         new Person(isMale=true),
                         new Person("Doe")
                     }; 
```

好的，一切正常，但这是我在 NUnit 控制台上收到的结果：

> *   CheckMale
>     *   CheckMale(人)
>     *   CheckMale(人)
>     *   CheckMale(人)

所以我不知道每次迭代执行的测试是什么，如果其中任何一个失败，我无法得到失败的测试。

我的问题是：有没有办法用评论或类似的东西来识别传递给测试的参数是什么？（在 TestCaseSource 属性中做的方式）

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-19T13:27:37.057

如果使用“本机”NUnitor [ReSharper](http://www.jetbrains.com/resharper/)作为测试运行程序，您可以覆盖`ToString`方法，以便您拥有良好的 Person 定义。例如，您的测试代码可能如下所示：

```
public class PersonTests
{
    [Test, TestCaseSource("myConstructorsForMale")]
    public void CheckMale(Person p)
    {
        Assert.That(p.IsMale);
    }

    static Person[] myConstructorsForMale = 
                 {
                     new Person("John"),
                     new Person{IsMale=true},
                     new Person("Doe")
                 };
} 
```

Person 类可能是这样的：

```
public class Person
{
    public Person(string name)
    {
        this.Name = name;
    }

    public Person() { }

    public string Name { get; set; }
    public bool IsMale { get; set; }

    public override string ToString()
    {
        return string.Format("Name:{0};IsMale:{1}", Name, IsMale);
    }
} 
```

结果窗口将如下所示： ![ReSharper 测试运行结果](../Images/93040a09bdc0747a3c8540b8e15d1cbe.png)

我还在您可能使用的本机 NUnit 测试运行程序上检查了它。它还可以很好地显示 Persons： ![NUnit 测试运行结果](../Images/3cdb47e8970430cd440995384e26c033.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-05-13T18:24:09.813

根据 Ilya Ivanov 的回答，如果您不想修改被测类只是为了测试它，您可以将“to string”逻辑放在测试夹具中。

向夹具添加一个方法，例如：

```
IEnumerable<TestCaseData> PersonTestCases()
{
  myConstructorsForMale.Select(
    p => new TestCaseData(p).SetName(string.Format("Name:{0};IsMale:{1}" ,p.Name, p.IsMale));
  );
} 
```

`TestCaseData`这将为列表中的每个人创建一个实例`myConstructorsForMale`。诀窍是它设置实例的`Name`属性`TestCaseData`来告诉测试运行器要显示什么。

一些测试运行器可能会更好地使用`SetDescription`而不是`SetName`.

然后将您的`TestCaseSource`属性修改为：

```
[Test, TestCaseSource("PersonTestCases")] 
```

这应该会导致类似：

> *   CheckMale
>     *   姓名:;IsMale:真
>     *   姓名：Doe；IsMale：假
>     *   姓名：约翰；IsMale：假

# xml - 使用 XML 更新数据 - xCelsius（SAP 仪表板设计）

> ID：12974760
> 
> 赞同：-1
> 
> 时间：2012-10-19T12:56:16.603
> 
> 标签：xml, excel, sap, dashboard, xcelsius

我正在使用 SAP Dashboard Design 6，我需要使用 XML 数据更新 .swf。

主要思想是将 .swf 上传到 Web 服务器上，并从有时会更新的 XML 中获取数据。每次更新都会添加新行。

有些东西没有按预期工作。当我用新行更新 XML 时，这些行不会出现。我已经在数据连接上选中了“在加载组件之前刷新”选项。

我错过了什么？

* * *

*   编辑：我只想更新 xml。.swf 将不会重新上传。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:02:14.780

我刚刚找到了解决我的问题的方法。

我们需要在创建 [.swf] 之前插入空白行。因此，这些新行将限制可以插入到 [.xml] 中的新记录。

# php - 使用 PDO 生成一个简单的用户名数组

> ID：12974763
> 
> 赞同：0
> 
> 时间：2012-10-19T12:56:22.207
> 
> 标签：php, pdo

我的数据库

```
id  username
1   xxx
2   bbb
3   vvv
4   bbbbbb 
```

我需要输出为

```
array('xxx','bbb','vvv','bbbbb'); 
```

使用 PDO 我需要从数据库中获取用户名并将其设置为数组，以检查用户名是否存在

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T12:58:45.290

如果您只检查用户名是否存在，最好修改您的查询来做到这一点，而不是返回多余的数据：

```
$query = $pdo->prepare("SELECT `id` FROM `users` WHERE `username` = ? LIMIT 1");
$query->execute(array($username_to_test));

if ($query->rowCount() == 1)
{
    // user exists in table
} 
```

如果您确实需要一组用户名，请执行以下操作：

```
$usernames = array();
$query = $pdo->query("SELECT `username` FROM `users`");
while(($row = $query->fetchObject()) != null)
    $usernames[] = $row->username; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T13:03:56.503

```
$pdo = new PDO($dsn,$user,$pass);
$pdos = $pdo->prepare('select username from mytablename');
$pdos ->execute();
$results = array();
while ($row = $pdos->fetch(PDO::FETCH_ASSOC)) {
    $results[] = $row['username'];
}
var_dump($results); 
```

[根据 doc](http://cz1.php.net/manual/de/pdo.construct.php)设置您的数据库 $dsn、$user 和 $pass before 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T13:09:08.103

完全按照您的要求做：

```
$query = $dbh -> prepare("SELECT username from users");
if ($query -> execute()){
    $user_array = $query -> fetch(PDO::FETCH_ASSOC);
} 
```

不过，蒂姆库珀的回答可能是一个更好的解决方案。

# html - 带有链接和发送按钮的下拉菜单在同一窗口中打开？

> ID：12974766
> 
> 赞同：0
> 
> 时间：2012-10-19T12:56:39.613
> 
> 标签：html, css, forms, drop-down-menu, dropdownbox

我想要一个简单的下拉列表来选择 5 个链接（页面），但我希望在单击“发送”后在同一窗口（目标 _self）中打开链接页面。它应该尽可能简单。这是我到目前为止所拥有的：

```
<form>
<select id="setit" style="color: #0000FF" size="1" name="test">
<option value="#">please choose</option>
<option value="http://www.altavista.com">AltaVista</option>
<option value="http://www.yahoo.com">Yahoo</option>
 <option value="http://www.google.com">Google</option></select>
 <input type="button" value="send"
onclick="window.open(setit.options[setit.selectedIndex].value)">
</form> 
```

是否也可以让第一个“不可点击”（点击这个“发送”后什么都不应该发生）？

谢谢，你真棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T13:29:39.203

以下是我修改后的代码：

```
<script type="text/javascript">
function openWindow(location){
    if(location == "#")return;
    window.open(location,'_self');
}
</script>
<select id="setit" style="color: #0000FF" size="1" name="test">
<option value="#">please choose</option>
<option value="http://www.altavista.com">AltaVista</option>
<option value="http://www.yahoo.com">Yahoo</option>
<option value="http://www.google.com">Google</option></select>
<input type="button" value="send" target="_self"
onclick="openWindow(setit.options[setit.selectedIndex].value)"> 
```

# java - 使用受信任的证书自动运行 java 应用程序

> ID：12974770
> 
> 赞同：3
> 
> 时间：2012-10-19T12:57:08.397
> 
> 标签：java, security, certificate

[我知道有一种方法可以像这样](http://docs.oracle.com/javase/tutorial/security/toolsign/rstep2.html)将受信任的证书注入 java 运行时，但是当用户使用此证书启动应用程序时，他仍然会得到一个类似这样的窗口

![应用程序的数字签名已经过验证。 你想运行应用程序吗？](../Images/971cee6a4d7562f9601b44596a6007a4.png)

接受时，证书在 java 控制面板中可见。

如何在用户不需要接受该警告的情况下获得证书？我希望他在运行时没有任何障碍地运行应用程序，这意味着证书已经被信任并且应用程序可以立即运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T14:07:10.073

感谢评论中的所有人，我现在很清楚，通过自动化或配置这是不可能的。用户**必须**接受警告，因为它是操作系统和 Java 的重要安全功能。

# python - 如何按时间分组数据

> ID：12974774
> 
> 赞同：0
> 
> 时间：2012-10-19T12:57:21.567
> 
> 标签：python, matplotlib, pandas

我正在尝试找到一种每天对数据进行分组的方法。

这是我的数据集的一个例子。

```
Dates                              Price1                                 Price 2

2002-10-15  11:17:03pm              0.6                                     5.0

2002-10-15  11:20:04pm              1.4                                     2.4

2002-10-15  11:22:12pm              4.1                                     9.1

2002-10-16  12:21:03pm              1.6                                     1.4

2002-10-16  12:22:03pm              7.7                                     3.7 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T14:55:17.147

是的，我肯定会为此使用 Pandas。最棘手的部分只是找出 pandas 用于加载数据的日期时间解析器。之后，它只是对后续 DataFrame 的重新采样。

```
In [62]: parse = lambda x: datetime.datetime.strptime(x, '%Y-%m-%d %I:%M:%S%p')
In [63]: dframe = pandas.read_table("data.txt", delimiter=",", index_col=0, parse_dates=True, date_parser=parse)
In [64]: print dframe
                                 Price1                                   Price 2
Dates                                                                            
2002-10-15 23:17:03                                0.6                        5.0
2002-10-15 23:20:04                                1.4                        2.4
2002-10-15 23:22:12                                4.1                        9.1
2002-10-16 12:21:03                                1.6                        1.4
2002-10-16 12:22:03                                7.7                        3.7
In [78]: means = dframe.resample("D", how='mean', label='left')
In [79]: print means
                                 Price1                                   Price 2
Dates                                                                            
2002-10-15                                    2.033333                       5.50
2002-10-16                                    4.650000                       2.55 
```

其中`data.txt`：

```
Dates                 ,         Price1    ,                  Price 2
2002-10-15  11:17:03pm,          0.6      ,                    5.0
2002-10-15  11:20:04pm,          1.4      ,                    2.4
2002-10-15  11:22:12pm,          4.1      ,                    9.1
2002-10-16  12:21:03pm,          1.6      ,                    1.4
2002-10-16  12:22:03pm,          7.7      ,                    3.7 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T13:21:40.837

来自熊猫文档： http: [//pandas.pydata.org/pandas-docs/stable/pandas.pdf](http://pandas.pydata.org/pandas-docs/stable/pandas.pdf)

```
 # 72 hours starting with midnight Jan 1st, 2011
 In [1073]: rng = date_range(’1/1/2011’, periods=72, freq=’H’) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T13:10:24.280

Use

```
data.groupby(data['dates'].map(lambda x: x.day)) 
```

# less - 为什么在这种较少的语法中出现编译错误？

> ID：12974783
> 
> 赞同：1
> 
> 时间：2012-10-19T12:57:49.430
> 
> 标签：less

我使用[http://www.patternify.com](http://www.patternify.com)生成了一些背景图像 css 代码，并将它们添加到名为 backgrounds.less 的 .less 文件中。当我保存文件并通过编译器运行它时，它给了我一个解析错误。我似乎无法解决这些错误。

我已将每个背景定义为一个变量，并使用 @import "backgrounds.less" 将文件导入到我的主要 styles.less 样式表中；

我得到的确切错误是：

> ParseError：/Volumes/Clients/htdocs/gobet2/less/backgrounds.less:1:145 1 @headerbg {background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAADCAYAAABWKLW/AAAAIElEQVQIHWP8DwQMQHD6yVcGBhDn1OMvIOo/A4wB4gAAAAACZQ50CYIIY42重复MAAAAAAAACZQ50CYIIY42)中的第1行语法错误;}[0米
> 
> （此操作是由更改 backgrounds.less 触发的）

代码如下。

```
@headerbg {background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAADCAYAAABWKLW/AAAAIElEQVQIHWP8DwQMQHD6yVcGBhDn1OMvIOo/A4wB4gAACZQd0vY42rMAAAAASUVORK5CYII=) repeat;}
@navbg {background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAADCAYAAABWKLW/AAAAIUlEQVQIHWN8+fL5fwYgeP/uEQMTjCEoJMfABBIBMUAAADLvDH2vTm1NAAAAAElFTkSuQmCC) repeat;}
@subnavbg {background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAADCAYAAABWKLW/AAAAIElEQVQIHWP8DwQMQHD3zgUGBhDnzu3zIOo/A4wB4gAAA+UdgeoweSoAAAAASUVORK5CYII=) repeat;}
@footerbg {background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAADCAYAAABWKLW/AAAAIElEQVQIHWP8DwQMQPDs2TMGBhDn6dOnIOo/A4wB4gAADVod/MNEi1EAAAAASUVORK5CYII=) repeat;}
@basebg {background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAACCAYAAABytg0kAAAAFElEQVQIHWN8+/b5fwYgYAIRIAAAOj4DxOCeCacAAAAASUVORK5CYII=) repeat;} 
```

任何帮助或解决方案将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T13:16:57.887

变量可以包含一个值（不是任意规则）。所以你可以定义

```
@headerbg: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAADCAYAAABWKLW/AAAAIElEQVQIHWP8DwQMQHD6yVcGBhDn1OMvIOo/A4wB4gAACZQd0vY42rMAAAAASUVORK5CYII=) repeat; 
```

（注意`:`变量名后面的）及以后使用

```
#header {
  background: @headerbg;
} 
```

# sql - 有没有办法让 Sql Server FullText 引擎停止将数字识别为数字？

> ID：12974793
> 
> 赞同：3
> 
> 时间：2012-10-19T12:58:29.267
> 
> 标签：sql, sql-server, full-text-search

我有一个用户输入处理器，可以转换`this search`为`"this" AND "search"`. 我的处理器运行良好，它根据我认为的`word breakers`内容（包括标点符号）将用户输入分成几部分。

问题是，在编制索引时，Sql Server 在处理数字时采用了一种特殊的方法。

如果您索引以下字符串：

```
12,20.1231,213.23,45,345.234.324.556,234.534.345 
```

它将找到以下索引键：

```
12
1231
20
213
23,45 (detected decimal separator)
234.534.345 (detected thousand separator)
345.234.324.556 (detected thousand separator) 
```

现在，如果用户搜索`324`他/她将找不到任何东西，因为`324`包含在最后一个条目中，而不是在开头，所以它不会被找到。我希望它停止将数字视为数字，而只是像使用单词一样对其进行索引。

有没有办法改变这种行为？没有实现太多代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T16:08:01.083

不确定我是否正确理解了这个问题，但如果你说 SQL 正在查找数字，它应该在哪里找到字符串，然后将它们转换为字符串似乎是解决方案。

```
select cast(345234324556 as nvarchar) 
```

# java - OOP：抽象类可以/应该能够调用自己的抽象方法吗？

> ID：12974795
> 
> 赞同：1
> 
> 时间：2012-10-19T12:58:37.337
> 
> 标签：java, oop

例子

```
abstract class Foobar
{

  abstract void myAbstractMethod();

  public void myConcreteMethod()
  {
      //busy code begin
      myAbstractMethod();
      // busy code complete
  }

class childClass extends FooBar
{

  @Override
  public myAbstractMethod()
  {
   //busy code to make abstract method, concrete
  }

} 
```

这可以接受吗？这是正确的方法吗？这是糟糕的设计吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T13:02:06.857

完全可以接受。例如，您不能以任何其他方式使用[模板方法设计模式。](http://java.dzone.com/articles/design-patterns-template-method)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T12:59:54.717

是的，您正确使用了抽象类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T13:00:18.397

是的，这是有道理的，并且可以接受。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T13:01:26.933

抽象类调用自己的方法既合法又有用。

这是子类扩展抽象类行为的一种方式。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-19T13:01:54.713

您正在使用它应该使用它 - 抽象的全部意义在于该类知道该方法存在:)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-19T13:02:29.663

绝对，这是抽象方法的主要好处之一：您在抽象类中提供了一个更大的过程，但将其中的一部分推迟到子类中。您调用抽象方法以允许子类填写其贡献。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-19T13:03:16.117

是的。这是非常正确的。它表明您正在将抽象方法的实现责任委托给消费者，或者您可以说客户端并且您仍在使用该方法。

事件监听器仅以这种方式实现，当我们不知道实现但仍然假设客户端将以自己的方式处理事件时调用该方法。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-19T13:10:58.850

是的，这就是[模板方法](http://en.wikipedia.org/wiki/Template_method_pattern)设计模式的工作原理，它允许子类覆盖算法的某些步骤，以允许不同子类上的不同行为。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-10-19T13:09:36.603

This is possible and I think this is good approach. For instance, an abstract class *Stone* may have the implemented method *getMass()* where it calls its own abstract method *computeVolume()*. *computeVolume()* would be different for the cube or for the round stone.

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-10-19T13:04:06.893

是的。

例如，你想让一个方法先做一些共同的工作，然后再继续进行子类型（sub-class）的具体工作。

```
abstract class xxx{
public void work(){
  common1();
  common2();
  specific();
}

abstract void specific();

} 
```

# ruby-on-rails - 放大到 gmap4rails 中的特定区域

> ID：12974802
> 
> 赞同：1
> 
> 时间：2012-10-19T12:58:49.820
> 
> 标签：ruby-on-rails, google-maps-api-3, gmaps4rails

如何放大到 gmaps4rails 中的特定坐标。假设在我的应用程序的索引页面上，我想显示所有用户的地址，但希望最初地图应该集中在美国并具有一定的缩放级别

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T13:47:46.633

在您的 gmaps 调用之后：

```
<% content_for :scripts do %>
    <script type="text/javascript" charset="utf-8">
      Gmaps.map.callback = function() {
        setTimeout(function() {
          var bounds = new google.maps.LatLngBounds(new google.maps.LatLng(10, 0), new google.maps.LatLng(0, 10));
          Gmaps.map.serviceObject.panToBounds(bounds);
       }, 50);
      }
    </script>
<% end %> 
```

缩放将适应传递的边界，否则添加：

```
Gmaps.map.serviceObject.setZoom(your_int_value); 
```

* * *

更简洁的方法是使用 google 提供的回调：

```
Gmaps.map.callback = function() {
   google.maps.event.addListenerOnce(Gmaps.map.getMapObject(), 'idle', function(){
     var bounds = new google.maps.LatLngBounds(new google.maps.LatLng(10, 0), new google.maps.LatLng(0, 10));
     Gmaps.map.serviceObject.panToBounds(bounds);
   }
}); 
```

# objective-c - 我可以像java c#那样在objective-c中实现真正的单例吗

> ID：12974815
> 
> 赞同：1
> 
> 时间：2012-10-19T12:59:47.323
> 
> 标签：objective-c, ios, cocoa-touch

init 方法是在 NSObject 类中声明的，因此，客户端代码可以创建我的单例类的新实例，有没有办法实现真正​​的单例，使得客户端无法创建新实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T17:38:22.400

只需这样做：

```
 static SingletonClass  *singleton;

+ (SingletonClass *)sharedInstance 
 {
     @synchronized(self) { //For thread safety
         if (singleton == nil) {
           [[self alloc] init];
         }
         return singleton;
      }
 }

  -(id)init
   {
      if (singleton) { //This way init will always return the same instance
         return singleton;
       }
       self = [super init];
       if (self) {
           singleton = self; 
       }
       return singleton;

   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T18:10:50.837

这是在目标 c 中做单例的正确方法

```
+ (id)sharedManager
{
    static dispatch_once_t onceQueue;
    static SingletonObjectClass *singleton = nil;

    dispatch_once(&onceQueue, ^{
        singleton = [[self alloc] init];
    });

    return singleton;
}

- (id)init {
    self = [super init];
    if (self) {
       //.....
    }
   return self;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-19T13:03:53.447

init 方法用于实例变量的初始化。本身不会创建对象。需要重写 alloc、copy 方法才能实现真正的单吨。

希望这应该澄清。

```
+ (id)alloc {
    NSLog(@"%@: use +sharedInstance instead of +alloc", [[self class] name]);
  return nil; 
}
+ (id)new {
 return [self alloc];
}

+ (SingletonClass *)sharedInstance {
static SingletonClass *myInstance = nil; 
 if (!myInstance)
 {
    myInstance = [[super alloc] init];
 }
 return myInstance; 
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-19T13:04:14.267

您可以每次返回该类的静态对象，使其成为单例。

```
@implementation Singleton
@synthesize testVar;

+ (Singleton*) sharedObject {
    static Singleton * myInstance = nil;
    if (myInstance == nil) {
        myInstance = [[[self class] alloc] init];
        testVar = 5;
        // Set default values if needed
    return myInstance;
} 
```

访问对象及其成员：

```
[[Singleton sharedObject] testVar] 
```

# paypal - paypal ipn 不完整交易的最大时间

> ID：12974817
> 
> 赞同：0
> 
> 时间：2012-10-19T12:59:56.350
> 
> 标签：paypal, paypal-ipn

嘿伙计们希望你能帮助我。

我正在使用 PHP 将贝宝（第一次）集成到一个网站中。根据我的阅读，确认交易成功的方法有两种，PDT 和 IPN。

现在的问题是，正在出售的物品可能有有限的库存。因此，如果假设一个人预订了一件物品并被带到 PAYPAL 网站进行最终付款，我必须阻止所有其他人进行购买，因为该物品的最后一件将被“预订”。

但是假设这个人（已经预订了最后一件物品）进入了贝宝页面，然后简单地关闭了它。这会导致我收到一个“失败”的 ipn（所以我应该取消保留该项目以便其他人可以购买）？

如果是这样，失败的 IPN 需要多长时间才能出现？

如果没有，我应该如何处理。

是否有没有 IPN 出现的情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T03:19:09.093

您可以使用 Express Checkout API。使用 EC，付款是一个两步过程。在第一步中，您在设置交易的地方进行 API 调用 (SetExpressCheckout)，并将买家重定向到 PayPal。到达那里后，买家授权付款，然后返回您的网站。

在这一点上，没有钱易手。您需要进行第二次 API 调用以获取资金 (DoExpressCheckout)。

您可以将物品保留一段时间，如果买家放弃交易，或者批准付款的速度很慢，您可以将物品重新向公众发布。如果他最终批准并返回您的网站，您只需跳过第二步，并通知用户他的交易已超时。没有钱易手，没有物品被双卖。

# android - Google Checkout 取消政策

> ID：12974821
> 
> 赞同：0
> 
> 时间：2012-10-19T13:00:08.520
> 
> 标签：android, merchant-account

我是一名 Android 开发人员，我注意到一些用户下载了我的付费应用，然后他们取消了订单，最后他们得到了退款。

我听说如果他们获得退款，他们只能使用该应用程序 24 小时。这是真的？

无论如何，我很想禁用我的商家帐户中的“获得退款”功能。我读过它是一个选项，很久以前，但它不再可能。

谷歌帮助说：

> 您可以随时更新您的退货/取消政策信息。就是这样：
> 
> *   登录到您的帐户。
> *   单击设置选项卡
> *   编辑**退货/取消政策字段**。
> *   单击保存配置文件。

但请相信我，我的帐户中**没有**这样的字段。

用户/买家购买活动是这样的：

1.  订单已经收到。
2.  付款授权
3.  订单已发送（我猜是下载了应用程序）
4.  订单已发送（是的，两次）
5.  谷歌取消了订单。原因：**用户要求取消**。

所以，我猜他/她免费获得了该应用程序。
这里发生了什么事？如何避免这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T13:02:59.227

Google Play 允许用户在购买后最多 15 分钟内要求全额退款。这曾经是 24 小时，但后来有所减少。您不能禁用此选项。

但是，请放心，没有人会免费获得您的应用程序。如果用户要求退款，则会从他们的设备上卸载该应用程序。除非他们已经root并以某种方式阻止了此卸载，否则他们可能无论如何都不会购买您的应用程序。

# ruby-on-rails - 如何检测和防止产生失败的独角兽工人

> ID：12974826
> 
> 赞同：1
> 
> 时间：2012-10-19T13:00:26.870
> 
> 标签：ruby-on-rails, unicorn

**情况：**我正在使用 Rails + Unicorn，使用 Capistrano 进行部署。有时 Rails 应用程序无法在生产模式下启动（尽管它不是真正的生产，而是一个暂存环境）。这通常是由于部署脚本或配置中的错误（因此通常无法通过测试检测到）而发生。发生这种情况时，独角兽主进程会杀死失败的工作人员并生成一个新的工作人员，该工作人员也会失败，依此类推。在这段时间里，独角兽消耗了大量的 CPU 并使用相同的消息污染日志。

**手动方式（不好）：**去你的主页看看是否有效。看看`htop`。跟踪日志。手动杀死独角兽。*缺点：*容易忘记。日志被污染，CPU 在你反应的时候被加载。

**另一种解决方案：**使用独角兽的`preload_app true`. 这将导致主进程快速失败。*缺点：*快乐场景中的内存消耗更高。

**最佳实践：** - ???

有什么方法可以巧妙地检测到独角兽大师无用地试图产生失败的孩子并阻止它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T23:38:02.223

您的 Capistrano 脚本中有类似“独角兽开始”的内容，对吗？在调用该命令后立即让您的 Capistrano 脚本 ping Unicorn。如果 Unicorn 在超时内没有返回预期的响应，那么您就知道出了问题，您可以选择回滚部署或执行一些其他操作。

至于如何ping Unicorn，这取决于。如果你有 Unicorn 监听 TCP 套接字，那么你可以使用 curl。如果你有 Unicorn 监听 Unix 域套接字，那么你必须编写一个连接到它的小脚本，如下所示：

```
require 'socket'
sock = UNIXSocket.new('/path-to-unicorn.sock')
sock.write("HEAD / HTTP/1.0\r\n")
sock.write("Host: www.foo.com\r\n")
sock.write("Connection: close\r\n")
sock.write("\r\n")
if sock.read !~ /something/
  exit 1
end 
```

但听起来[Phusion Passenger Enterprise](https://www.phusionpassenger.com/enterprise)很好地解决了您的问题。它具有称为“抗部署错误”的特性。当您部署新版本并且 Phusion Passenger 检测到它无法为您的新代码库生成任何进程时，它将停止尝试生成您的新版本并无限期地保留旧版本的进程，直到您手动给出可以的信号为新版本生成进程。同时它将所有错误记录到日志文件中，以便您分析问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T00:38:24.927

我会建议刷掉你的 bash 技能。您需要的功能已经在 Unicorn 中，因为它利用了 Unix-y master/worker 进程。

您需要一个 init.d 脚本。或者至少是 godrb 或 monit。我推荐 init.d 脚本路由和监控。它更复杂，但您的监控软件可以更轻松地利用它，并且还可以在重新启动时自动启动。

它的要点是：

1.  向独角兽主进程发送 USR2 信号，这将分叉主进程。
2.  然后将 WINCH 发送到创建的旧主进程，这将杀死每个工人。
3.  然后您可以向旧的主进程发送 QUIT 信号。

[独角兽信号](http://unicorn.bogomips.org/SIGNALS.html)

这将启动一个新的主进程运行新代码并将旧的标记为（旧）。如果它失败了，旧的应该返回到它以前的状态，你不应该遭受中断，只是一个重新启动错误。这就是独角兽的美丽。您几乎可以获得代码的即时部署。

我使用了很多对冲词，因为一年多前我在我的应用程序上做过这项工作，所以楼上有很多蜘蛛网。希望这可以帮助！

这绝不是一个**正确**的脚本。不过，这是一个很好的起点……如果您可以改进它，请随时更新要点！:-)

[独角兽控制脚本示例](https://gist.github.com/3977588)

# prolog - 从数据库计数

> ID：12974830
> 
> 赞同：2
> 
> 时间：2012-10-19T13:00:44.983
> 
> 标签：prolog

我的数据库由以下谓词组成：

路（1,2，geel）。路（2,3，蓝）。路（1,3，geel）。

其中前 2 个数字是点。我必须检查每个点是否有偶数条道路。我设法用下面的代码做到了，但不知何故，我认为有更好的方法来做到这一点。

```
% Count(Element, List, Occurences) => Counts the amount of occurences of Element in the    given List
count(_, [], 0).
count(X, [X | T], N) :-
  !, count(X, T, N1),
  N is N1 + 1.
count(X, [_ | T], N) :-
  count(X, T, N).

checkRoad :-
    findall(Point,(weg(Point,_,_) ; weg(_,Point,_)),List),
    list_to_set(List,K),
    foreach( (member(P,K), count(P, List,N)), N mod 2 =:= 0 ). 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T13:18:30.243

我认为这种方法会有更好的性能：

```
checkRoad:-
  findall(Point,(road(Point,_,_) ; road(_,Point,_)),List), % renamed wge/3 with road/3
  msort(List, SList),
  checkEven(none, SList).

checkEven(_, []).
checkEven(Item, [Item|SList]):-
  !,
  checkOdd(Item, SList).
checkEven(_, [Item|SList]):-
  checkOdd(Item, SList).

checkOdd(Item, [Item|SList]):-
  checkEven(Item, SList). 
```

如果您首先对所有点进行排序，那么您只需遍历此排序列表一次即可测试每个点是否出现在偶数条道路中。

# sql - SQL Server：我可以使用 EXEC 运行外部应用程序吗？

> ID：12974832
> 
> 赞同：3
> 
> 时间：2012-10-19T13:00:46.883
> 
> 标签：sql, sql-server, triggers, talend

您好，感谢您的宝贵时间，

我一直在网上到处搜索一个例子，一个 SQL 触发器将运行一个外部应用程序，但我没有运气。我所看到的只是 EXEC 将执行一个 SQL 过程。

我需要这个的原因是，我有一个包含许多表的 SQL Server 2010，当某些表上发生更新或插入时，我需要我的 Talend 作业来运行和更新 Salesforce 表。

目前，Talend 作业正在通过 A 任务调度程序运行，但公司希望立即转移信息。

目前这是我的代码

```
CREATE TRIGGER UP_ACCOUNT ON ARCUS
AFTER INSERT, UPDATE
AS 

IF(exists(SELECT IDCUST FROM inserted WHERE IDCUST IS NOT NULL))
    BEGIN 
        EXEC [name_of_application]
    END 
```

我仍然需要进行所有检查以确保这不会导致任何崩溃，但 EXEC 语句似乎不想执行外部命令。任何建议将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T13:28:29.177

补充那个帖子的答案。我永远不会从 sql 调用另一个应用程序。有几个原因，因为安全，直到有人可能移动应用程序并且您需要更新触发器，这意味着您负责触发器和应用程序之间的直接通信。

我要做的是让您的触发器写入一个表，然后有一个进程来监视该表（读取和删除行），然后调用应用程序。我知道您还有其他播放器，但更安全且更易于维护。

# jquery - 展开/折叠所有 jquery

> ID：12974846
> 
> 赞同：0
> 
> 时间：2012-10-19T13:01:36.560
> 
> 标签：jquery, slidedown, slideup

我有以下 jquery 可以展开和折叠我页面上的部分。它还将记住上次扩展的部分，并在重新加载页面时应用该部分。

我想要做的是在我的页面上添加一个“全部展开”和“全部折叠”链接，但我不确定脚本应该是什么样子？有什么帮助吗？

```
<script type='text/javascript'>
$(function () {
    $(".toggle").hide();                                       //Hide .toggles

    $(window).load(function () {
        $('.toggle').not(':hidden').prev('.trigger').trigger("click");
    });

    $('.trigger').each(function () {                           //For each .trigger
        var theActive = $.cookie($(this).attr('id'));          //Retrieve the cookies
        if (theActive) {                                       //Verify if cookies exist
            $('#' + theActive).next(".toggle").slideDown(0);   //And slide down the respective .toggle
        }
    });

    $(".trigger").toggle(                                      //Toggle permits alternate clicks
   function () {
   $(this).next('.toggle').slideDown('slow');                  //On odd clicks, .toggle slides down...
   $.cookie($(this).attr('id'), $(this).attr('id'));           //...and the cookie is set by its ids.
   }, function () {
   $(this).next('.toggle').slideUp('slow');                    //On even clicks, .toggle slides up...
   $.cookie($(this).attr('id'), null);                         //...and the cookie is deleted.
   });
}); 
```

第 1 节

```
<div class = "toggle">
  Some stuff
</div>    
<h3 class = "trigger" id="H1">Section 2</h3>
<div class = "toggle">
  More stuff
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T13:05:28.843

除非我弄错了，否则切换类是您要扩展的部分，所以这样做

```
$(".toggle").slideDown(); 
```

应该使用类切换向下滑动所有元素。使用 slideUp 作为全部折叠按钮。

# php - eclipse 中的 PHP 脚本需要 php.ini 中的扩展

> ID：12974848
> 
> 赞同：2
> 
> 时间：2012-10-19T13:01:42.403
> 
> 标签：php, eclipse-pdt

我有一个带有 PDO 的 PHP 脚本。

在命令行上运行正常。

但要在 Eclipse 中运行它，我必须编辑 php.ini。我必须添加

```
extension=pdo.so 
```

有人可以解释一下吗？

谢谢，

埃里克·J。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T13:04:42.003

尝试

当“Run > as PHP script”时，Eclipse 首选项中指定的 php.ini 中的 include_path 选项将被忽略。

可重现：总是

重现步骤：

1.  在命令行中使用 phpinfo() 启动脚本
2.  在 Eclipse 中，配置 php 可执行文件及其 php.ini
3.  在eclipse中，运行php“as PHP script”，看到include_path和命令行中的不一样

# c# - facebook 分享带有照片的页面

> ID：12974853
> 
> 赞同：0
> 
> 时间：2012-10-19T13:01:51.137
> 
> 标签：c#, javascript, jquery, asp.net, facebook

当我点击“分享”时，它会在新标签页中打开 Facebook 分享页面。我想在此页面的左侧栏中显示 temp.jpg。这个怎么做？

测试.aspx

```
<div id="page-wrap">
<!-- AnythingSlider #1 -->
<ul id="slider1" style="width: 778px; height: 452px; background:#fff;">
    <li>
        <div style="float: left; padding-right: 35px; padding-left:50px;">
            <img src="../../img/temp.jpg" style="width: 264px;
                height: 377px; border: none;" />      
            <uc:DownloadControl ID="DownloadControl1" runat="server" PageParameters="1" />
        </div>                
    </li>
    <li>
    <uc:DownloadControl ID="DownloadControl2" runat="server" PageParameters="2" /> 
```

...

下载控件.ascx

```
<div style="float: left">
<a class="icerik" id="facebookShare" runat="server" target="_blank">
<img border="0" src="images/facebook.jpg" alt="Resorts"
    title="Hotels & Resortss" /> Share </a> 
```

下载Control.ascx.cs

```
protected void Page_Load(object sender, EventArgs e)
 {    
 facebookShare.HRef = "http://www.facebook.com/sharer.php?u=http://www.test.com/test.aspx";
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T13:56:17.720

如果您想在与*sharer.php*共享时添加有关您的页面的自定义信息，则必须在页面头部放置额外的开放图形元标记。对于此示例，test.com/test.aspx 包含以下标签：

```
<head>
<meta property="og:title" content="Test" />
<meta property="og:url" content="http://www.test.com/test.aspx" />
<meta property="og:image" content="http://www.test.com/img/temp.jpg" />
// other meta tags
</head> 
```

有关 Open Graph 协议的更多信息在[这里](http://ogp.me/)

# oracle - Oracle SQL - 更改逗号的小数点

> ID：12974856
> 
> 赞同：15
> 
> 时间：2012-10-19T13:01:57.460
> 
> 标签：oracle, currency, comma

我在巴西，我们的货币格式类似于“R$ 9.999,00”。

我正在尝试选择一个字段，并更改返回的格式。不过，我好像做不到。我试过了：

```
ALTER SESSION SET NLS_NUMERIC_CHARACTERS = ',.'; 
```

和

```
SELECT to_char(10,'9,999.00', 'NLS_NUMERIC_CHARACTERS = '',.''') FROM DUAL 
```

这些都没有奏效。不确定它是否可能是我的客户（我在使用 sqldeveloper 的 Ubuntu 上），或者我做错了什么。

有任何想法吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-19T13:15:27.840

采用

```
SELECT to_char(10,'9G990D00', 'NLS_NUMERIC_CHARACTERS = '',.''') FROM DUAL 
```

G 是千位分隔符的符号 D 是小数分隔符

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-19T13:16:14.280

我认为你的格式掩码是错误的。请试试这个格式掩码：

```
SELECT to_char(10000,'99G990D00', 'NLS_NUMERIC_CHARACTERS = '',.''') FROM DUAL 
```

确保您将在格式掩码中使用正确数量的前导“9”以获得更大的数字

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-28T11:46:12.047

我通过以下方式解决了这个问题：

```
SELECT TO_CHAR(1000000000,'999G999G999G999D99','NLS_NUMERIC_CHARACTERS = '',.''') FROM DUAL; 
```

以十亿为单位格式化一个数字。我认为它有帮助。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-03-14T10:48:41.147

```
CREATE OR REPLACE FUNCTION APPS.EX_number_format( ff number) RETURN char IS

xx varchar2(100);
yy varchar2(1);
tt varchar2(100);
x number:=0;
begin
xx:=to_char(ff,'99G990G990G990G990G990D00');
for i  in 1..length(xx) loop
yy:=substr(xx,i,1);
if yy in ('1','2','3','4','5','6','7','8','9') then
x:=i;
exit;
end if;
end loop;

tt:=substr(xx,x,length(xx));
return tt;

END EX_number_format; 
```

从对偶中选择 EX_number_format(1000)；

1,000.00

从对偶中选择 EX_number_format(1859684500)；

1,859,684,500.00

# html - 如何一次上传具有相同扩展名的图像 HTML5

> ID：12974857
> 
> 赞同：-2
> 
> 时间：2012-10-19T13:02:02.263
> 
> 标签：html

使用 HTML5 上传多个可以进行通配符上传。意味着如果用户在浏览选项中提供了 *.jpg，是否有可能上传所有具有 .jpg 扩展名的图像。

```
<input id="upload" type="file" multiple /> 
```

我对此进行了研究，但找不到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T13:06:19.977

不，该`multiple`属性将允许用户选择多个文件上传给您，但他们仍然需要自己选择它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-22T02:24:33.210

投反对票可能是因为您提出的问题没有理由回答！

现在看看为什么？

```
<input id="upload" type="file" multiple /> 
```

这里的这个属性是用来选择多个文件的，不包括文件的类型。所以你可以过滤掉任何一个图像，或者你可以选择音频，怎么样？这是代码

```
<input id="upload" type="file" multiple accept="image/*" /> 
```

这将让文件选择器，只让用户选择图像文件。

现在进一步深入编码并选择仅具有您想要的完美格式类型的图像。您将需要服务器端编码。然后在服务器端，您可以检查每个选定文件的文件扩展名，并保存每个具有 .jpg 文件扩展名的文件，而保留其他文件而不保存它们。

但是，不要进入底部，只检查 JS 中的每个文件，您可以使用 jQuery 来检查它们的文件扩展名，将它们的名称拆分为 '.' 并检查你得到的最后一个值。

这样，您将获得所需的结果。但`multiple`不这样做。

# events - 删除父视图后 RemoveEventListener 不起作用

> ID：12974861
> 
> 赞同：1
> 
> 时间：2012-10-19T13:02:11.687
> 
> 标签：events, button, addeventlistener, coronasdk

我已经实现了一个功能，我添加了一个带有一些按钮的视图以及添加了 Eventlistener 。

使用按钮侦听器，我转换到另一个视图并删除了最后一个视图，但按钮侦听器仍然处于活动状态。

```
 function loadingMenu()

     playBtn = display.newImage('play-btn.png', 170, 130)
    playBtn:addEventListener( "tap", listener )

    instructionBtn = display.newImage('instructions-btn.png', 150, 164)
   -- instructionBtn:addEventListener( "tap", instructionListener )

     creditBtn = display.newImage('credits-btn.png', 180, 201)
    --creditBtn:addEventListener( "tap",ceditsListener )

    titleBg = display.newImage('background-with-title.png')

   --titleView = display:newGroup()
     titleView = display.newGroup(titleBg, playBtn, instructionBtn,creditBtn)

end

function listener(event) 
      if titleView ~= nil then 
        playBtn:removeEventListener( "tap", listener ) 
        transition.to(titleView, {time = 300, y = -titleView.width, onComplete = function() --startButtonListeners('rmv') --titleView:removeSelf() display.remove(titleView) titleView = nil end}) 

       end 
       return true 
end 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T15:03:30.667

尝试这个。这将工作...

```
 ----------------------------------------------------------------------------
    local playBtn,instructionBtn,creditBtn,titleBg,titleView
    ----------------------------------------------------------------------------
    function newfunction()
      print("inside newfunction...")
    end
    ----------------------------------------------------------------------------
    function listener()
       print("inside listener...")
       if titleView ~= nil then 
               playBtn:removeEventListener( "tap", listener ) 
               transition.to(titleView, {time = 300, y = -titleView.width, onComplete = newfunction()}) --startButtonListeners('rmv') --titleView:removeSelf() display.remove(titleView) titleView = nil end}) 
       end 
       return true 
    end
   ----------------------------------------------------------------------------
   function loadingMenu()
      playBtn = display.newImage("play-btn.png", 170, 130)
      instructionBtn = display.newImage("instructions-btn.png", 150, 164)
      creditBtn = display.newImage("credits-btn.png", 180, 201)
      titleBg = display.newImage("background-with-title.png")
      titleView = display.newGroup(titleBg, playBtn, instructionBtn,creditBtn)

      playBtn:addEventListener( "tap", listener )
   end
  ----------------------------------------------------------------------------
  loadingMenu()
  ---------------------------------------------------------------------------- 
```

# python - 将分隔的字符串/单元格值拆分为多行

> ID：12974866
> 
> 赞同：3
> 
> 时间：2012-10-19T13:02:24.900
> 
> 标签：python, csv, import-from-csv

我可以通过多种方式解决这个问题，但我想使用 Python。这是问题：

我有一个 CSV 文件，其中包含如下值：

```
Name         Address                 Skills

Napoleon     Preston, Idaho          Bowhunting, Computer Hacking, Drawing Unicorns 
```

我想把它改成这样：

```
Name         Address                 Skill 
Napoleon     Preston, Idaho          Bowhunting
Napoleon     Preston, Idaho          Computer Hacking
Napoleon     Preston, Idaho          Drawing Unicorns 
```

我进行了研究，并且阅读了 CSV 库，但我觉得我最终会做一些非常丑陋和过于复杂的事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T13:15:36.417

现在你有一个平面文件，我相信操作数据的第一步是将它加载到 python 中，这样你就可以开始使用它了。

你在正确的轨道上。csv 模块就是为此而设计的

假设您的数据是制表符分隔的

```
import csv

with open('your_csv.csv') as f:
  f.readline() # these are headings should remove them
  csv_reader = csv.reader(f, delimiter='\t')
  for line_list in csv_reader:
     # line_list is a list of each row of your csv       
     # line_list[0] Contains 'Name' data   'Napolean'
     # line_list[1] Cotinas Address 'Preston, Idaho'
     # line_list[2] Contains skills 'Bowhunting, Computer Hacking, Drawing Unicorns'
     skills_list = [x.strip() for x in line_list[2].split(',')]
     for skill in skills_list:
        #line_list[0]   line_list[1],   skill

        Napoleon     Preston, Idaho          Bowhunting
        Napoleon     Preston, Idaho          Computer Hacking
        Napoleon     Preston, Idaho          Drawing Unicorns 
```

# c# - C# AccessViolation/Marshalling 中的本机 C-DLL

> ID：12974875
> 
> 赞同：0
> 
> 时间：2012-10-19T13:02:57.697
> 
> 标签：c#, c, dll, marshalling, unmanaged

我在调用 C# 中的 C DLL 时遇到问题

C 函数是（我没有 ac 标头或对此的好的规范：（）

```
int knr12_read ( char *kn12, char *ik9, char *wok, char *wlc,
char *plz, char *ort, char *woz ); 
```

kn12 是一个参考参数

这是我在 C# 中尝试过的

```
 [return: MarshalAs(UnmanagedType.U4)]
 [DllImport("Knr12.dll", CallingConvention = CallingConvention.StdCall, EntryPoint = "knr12_read", CharSet = CharSet.Ansi)] 
unsafe public static extern int knr12_read(out IntPtr buffer, string ik9, string wok, string wlc, string plz, string ort, string woz);

int knr = knr12_read(out pBuffer, knrTemp, "11111", "", "98529", "Suhl", "1");

string data = Marshal.PtrToStringAnsi(pBuffer); 
```

返回的 int 总是正确的，应该如何，但我对 ref 参数 pBuffer 有问题...

其他变量的刺痛类型也在工作......

当我使用 a`ref`时，我总是得到一个`AccessViolation error` `knr12_read()`。如果我使用`out`我得到一个指针，但字符串总是空的，这是不可能的。我什至尝试了as`String`但我得到了一个on 。`ref``char*``AccessViolation error``knr12_read()`

请指导。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T13:41:29.670

`StringBuilder`在对带有字符串返回参数的函数进行 P/Invoking 时，通常是一种很好的类型：

```
static extern int knr12_read(StringBuilder kn12, ...) 
```

您需要在调用函数之前初始化字符串生成器，例如：

```
StringBuilder outString = new StringBuilder(100); 
```

您不应该需要“不安全”，除非“C”代码在指针上的保留时间超过调用持续时间，否则您不必担心固定 - 框架正在为您做这件事。

这是一个应该有帮助的问题： [Marshal "char *" in C#](https://stackoverflow.com/questions/162897/marshal-char-in-c-sharp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T13:34:46.180

可能您还没有固定缓冲区。这是如何固定缓冲区数据的示例。

```
GCHandle pinnedRawData = GCHandle.Alloc(rawData,
        GCHandleType.Pinned); 
```

固定对象可确保指针有效，因为 .Net 运行时始终可以在它认为合适的时候重新分配内存。

试试看，如果它对你有帮助，请告诉我。

# python - 在生成器中嵌套生成器是 Pythonic 吗？

> ID：12974877
> 
> 赞同：1
> 
> 时间：2012-10-19T13:03:03.553
> 
> 标签：python, optimization, generator, list-comprehension

我需要构建空嵌套字典的大树，并想知道下面的代码是否是 Pythonic：

```
dictionary_name = dict((year, dict((month, dict((day, []) for day in days))
                       for month in months)) for year in years) 
```

*   如果这是不好的做法，那么编写上述代码的最 Pythonic 方式是什么？
*   如果这不是坏习惯，我应该在哪里使用换行符来保持这个清晰和“Pythonic”。此外，在嵌套生成器时，它们的速度优势是否仍然存在？

**注意：**这个问题也适用于列表推导。如果您认为我应该将这个问题分成多个问题，请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T13:18:02.783

你上面的内容对我来说有点太密集了......我实际上通常避免嵌套这样的表达式，因为我很难记住它们是从内到外，还是从外到内，或者通过某种奇怪的魔法随机方法。也就是说，我知道有些人编写了很棒的 python 代码，他们有时会嵌套，我认为只要你不嵌套太深就可以了。

就个人而言，我可能会创建一个`dict`使用元组来索引它的 - 我可能会考虑使用`defaultdict`：

```
from collections import defaultdict
dictionary_name = defaultdict(list)
dictionary_name[(year,month,day)].append(data)
#your way would be:  `dictionary_name[year][month][day].append(data)` 
```

这（恕我直言）比您上面的代码更容易理解（即更pythonic）。

如果你不想要一个`defaultdict`，你可以使用`itertools.product`来构建字典：

```
dictionary_name = dict( ( k,[] ) for k in it.product(years,months,days) ) 
```

或者

```
dictionary_name = { k:[] for k in it.product(years,months,days) }  #py2.7+ 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-19T13:20:20.100

如果您不介意使用 a `defaultdict`，我会选择

```
from collections import defaultdict
import itertools
dd = defaultdict( defaultdict )
for y, m, d in itertools.product( years, months, days ):
    dd[y][m][d] = [] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T13:18:06.623

列表理解的复杂性更多是个人/开发的问题。团队风格而不是纯粹的“Pythonic”问题。[Google Python Style Guide](http://google-styleguide.googlecode.com/svn/trunk/pyguide.html)是此类情况的一个很好的潜在参考工具。他们[关于 listcomps 的部分](http://google-styleguide.googlecode.com/svn/trunk/pyguide.html#List_Comprehensions)说：

> 可以用于简单的情况。

有一个“决定”（即谷歌内部如何解决这个问题）：

> 可以用于简单的情况。每个部分必须适合一行：映射表达式、for 子句、过滤器表达式。不允许使用多个 for 子句或过滤器表达式。当事情变得更复杂时，请使用循环。

就个人而言，我会选择嵌套的 listcomps *，只要它们可以立即理解*，否则会分解为多个部分、函数等。

您的问题的其他说明：

*   是的，您可以在 listcomps 中进行换行，这有时有助于提高可读性。
*   对于速度，答案是“视情况而定”，并且可能更多的是 Stack Overflow 的一个单独问题（我非常有信心您会在这里找到一些好的起点）。如果不出意外：（1）确保这是一个瓶颈，然后（2）基准替代品。

归根结底，风格问题是“使用你的判断”的问题——只要考虑到其他开发人员以后会遇到你的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T13:52:03.793

虽然我同意其他海报的观点，这个表达式有点密集，用另一种方式分解它可能是个好主意，如果你*要写*一些密集的东西，一点缩进调整可以很长的路要走使其更具可读性：

```
dictionary_name = dict(
    (year, dict((month, dict((day, [])
                             for day in days))
                for month in months))
    for year in years) 
```

# user-input - 如何允许 Joomla 用户创建/更新自己的列表并有指向该列表的菜单链接？

> ID：12974882
> 
> 赞同：0
> 
> 时间：2012-10-19T13:03:24.920
> 
> 标签：user-input, joomla2.5

我有一个我正在开发的 Joomla 网站，该网站以特定标签的设计师手袋为中心（不是我的网站，它是客户的）。它不是一个电子商务网站，更像是一个社交网站。

我要做的是向用户展示手袋样式和图案的列表，以便他们可以标记他们拥有哪些物品以及他们需要哪些物品。

然后将生成两部分内容 - 一部分列出他们拥有的内容，另一部分列出他们需要的内容。

我还需要能够包含指向该页面的直接菜单链接。

任何想法，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T13:54:12.030

可能最好的方法是扩展[社区构建器](http://www.joomlapolis.com/)或[JomSocial](http://www.jomsocial.com/)。两者都具有自定义用户配置文件的能力，这将大大有助于创建您正在寻找的内容。您甚至可以在其中一个扩展的基本结构中做任何您想做的事情。

# objective-c - 为什么这个 NSMutableArray 在初始化 NSMutableDictionary 时会丢失一个成员？

> ID：12974884
> 
> 赞同：0
> 
> 时间：2012-10-19T13:03:46.067
> 
> 标签：objective-c, ios

关于字典，我一定有什么不明白的地方。我有以下代码：

```
NSArray *keys=[[NSArray alloc] initWithObjects:@"first person singular", @"second person singular", @"third person singular", @"first person plural", @"second person plural", @"third person singular", nil];
//This array logs a count of 6.

NSMutableArray *endingsPossible = [[NSMutableArray alloc] initWithObjects:@"iar", @"iēris", @"iētur", @"iēmur", @"iēminī", @"ientur", nil];  
//This array logs a count of 6.

NSDictionary *setOfEndings = [[NSDictionary alloc] initWithObjects:endingsPossible forKeys:keys];  
//This dictionary logs a count of 5. 
```

其中一名成员是如何迷路的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T13:07:09.043

“第三人称单数”键重复两次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T13:08:03.797

您的密钥有重复条目，`third person singular`. 这就是为什么你只能得到 5 个对象。我猜将其更改`third person plural`为预期的输出。

# java - 在 enctype="multipart/form-data" 请求不起作用之后

> ID：12974890
> 
> 赞同：6
> 
> 时间：2012-10-19T13:04:02.720
> 
> 标签：java, jsp, servlets

```
public class Relay extends HttpServlet {   
    @Override
    public void service(HttpServletRequest request, HttpServletResponse response)
    throws ServletException, IOException {
        String command = request.getParameter("command");
        RequestDispatcher rd =request.getRequestDispatcher(command);
        rd.forward(request, response);
        System.out.println("Request forwarded to " + command + " servlet");
    }
} 
```

这是我的 Relay servlet，我正在从这个表单发送数据

```
<form action="Relay" method="POST" enctype="multipart/form-data"> /
    <input type="hidden" name="command" value="AddProduct" />
    <input type="text" name="pname" value="" />
    <input name="" type="submit" value="Add Product">
</form> 
```

它正在抛出一个`java.lang.NullPointerException`.

但是当我删除它时工作正常：

```
enctype="multipart/form-data" 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-19T13:17:10.707

那为什么还需要添加呢？把它放在外面。

如果您需要它来上传`<input type="file">`您打算稍后添加的文件，那么您应该`@MultipartConfig`在您的 servlet 上添加注释，这样就`request.getParameter()`可以工作并且所有上传的文件都可以通过`request.getPart()`.

```
@WebServlet("/Relay")
@MultipartConfig
public class Relay extends HttpServlet {   
    // ...
} 
```

### 也可以看看：

*   [如何使用 JSP/Servlet 将文件上传到服务器？](https://stackoverflow.com/questions/2422468/how-to-upload-files-to-server-using-jsp-servlet/2424824#2424824)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T13:16:02.833

用 编码的参数`multipart/form-data`在 POST 正文中发送 - 不是作为常规请求参数，因此无法使用`request.getParamter(...)`.

查看[Commons 文件上传](http://commons.apache.org/fileupload/apidocs/org/apache/commons/fileupload/package-summary.html)包以进行多部分请求处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-23T09:21:02.563

我将其包括在内只是为了提供更多故障排除信息。如果您被卡住并想知道所有参数是通过多部分请求获得的，您可以使用以下代码打印所有参数。

```
MultipartRequest multi = <Your code to retrieve multipart request goes here. Sorry but can not post code as I use proprietary APIs>  

Enumeration en1 = multi.getParameterNames();
        while (en1.hasMoreElements()) { 
            String strParamName = (String)en1.nextElement(); 
            String[] strParamValues = multi.getParameterValues(strParamName); 

            for (int i = 0; i < strParamValues.length; i++) { 
            System.out.println(strParamName + "=" + strParamValues[i]); 
            } 

        } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-09-30T02:58:46.557

删除表单标签并使用

```
echo <?php form_open_multipart('Controller/function'); 
```

每当我使用时，我都会遇到同样的问题，`enctype="multipart/form-data"` 我没有得到文件名，当我删除它工作正常时，尝试它对我有用

# javascript - 删除你点击的行（Javascript动态表）

> ID：12974893
> 
> 赞同：-2
> 
> 时间：2012-10-19T13:04:13.627
> 
> 标签：javascript, html, html-table, row

我想从表中删除一行，我正在使用 Javascript。我正在动态创建表格行，并且在最后一个单元格中我有删除按钮，那么如何让它删除该行？

```
var newData4 = document.createElement('td');
                var delButton = document.createElement('input');
                delButton.setAttribute('type', 'button');
                delButton.setAttribute('name', 'deleteButton');
                delButton.setAttribute('value', 'Delete');
                newData4.appendChild(delButton);
                newRow.appendChild(newData4); 
```

这是创建我的表格行的功能

```
 function addItem()
{
    document.getElementById('add').onclick=function()
    {
                var myTable = document.getElementById('tbody');
                var newRow = document.createElement('tr');

            //var element1 = document.createElement("input");
            //element1.type = "checkbox";
            //newRow.appendChild(element1);

            var newData1 = document.createElement('td');
            newData1.innerHTML = document.getElementById('desc').value;

            var newData2 = document.createElement('td');
            newData2.innerHTML = document.getElementById('taskPriority').value;

            var newData3 = document.createElement('td');
            newData3.innerHTML = document.getElementById('taskDue').value;

                    myTable.appendChild(newRow);
                    newRow.appendChild(newData1);
                    newRow.appendChild(newData2);
                    newRow.appendChild(newData3);

                var newData4 = document.createElement('td');
                var delButton = document.createElement('input');
                delButton.setAttribute('type', 'button');
                delButton.setAttribute('name', 'deleteButton');
                delButton.setAttribute('value', 'Delete');
                newData4.appendChild(delButton);
                newRow.appendChild(newData4);
            }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-08T04:35:49.313

```
function SomeDeleteRowFunction(btndel) {
    if (typeof(btndel) == "object") {
        $(btndel).closest("tr").remove();
    } else {
        return false;
    }
} 
```

试试这里的代码[是小提琴](http://codebins.com/bin/4ldqpa9/latest/Remove%20Table%20Row%20on%20click%20del)

或者尝试

```
//delete the table row
        $(document).on('click', '#del', function(){
              $(this).parents('tr').remove();
            });

        }); //del is the id of the delete block 
```

一种纯 JavaScript 方法

```
function deleteRowUI(btndel) {
    var table=document.getElementById('filterTableBody');
    if (typeof(btndel) == "object") {
        p=btndel.parentNode.parentNode;
        p.parentNode.removeChild(p);
        var oTable = document.getElementById('filterTableBody');

        //gets rows of table
        var rowLength = oTable.rows.length;
        for (var i = 1; i < rowLength; i++){

               var oCells = oTable.rows.item(i).cells;
               //gets cells of current row
               var cellLength = oCells.length-1;
                   for(var j = 0; j < cellLength; j++){
                       oCells.item(j).innerHTML = "";
                       break;
                   }
                   break;
        }
    } else {
        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T13:09:39.117

if you want to temporary hidden it you can do: this.parentNode.style.display='none'; in mind that the exclusion button is in a td. But if you want to really delete it from the html and the database: you need to make the same as above and a extra call to a function of php/plsqlwathever to delete from de db, i recommend using ajax to call it. [http://www.w3schools.com/ajax/default.asp](http://www.w3schools.com/ajax/default.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T13:14:49.553

使用 jQuery remove 方法来做到这一点。

通过 id 属性： $("#id here").remove();

通过类属性： $(".class name here").remove();

我希望我有一点帮助...

# php - 操作员不工作

> ID：12974896
> 
> 赞同：-3
> 
> 时间：2012-10-19T13:04:26.333
> 
> 标签：php

我在字符串中有一个运算符。

```
 $c['operator'] = ">=";

        if($sub_total.$c['operator'].$c['value'])
        {
        echo $sub_total.$c['operator'].$c['value'];

        } 
```

它获得的输出是`20610>=30000`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T13:08:13.173

我会将可能的运算符放在`switch`：

```
$result = null;

switch($c['operator'])
{

    case '>=':
        $result = $sub_total >= $c['value'];
    break;
    case '<=':
        $result = $sub_total <= $c['value'];
    break;

    // etc etc

} 
```

这比使用 安全得多`eval`，并且具有清理输入的额外好处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T13:06:54.640

字符串不能被解释为 php 代码，除非你使用[`eval`](http://www.php.net/manual/en/function.eval.php)（小心它）。

您在`if`语句示例中所做的是连接字符串，并且因为连接后的字符串不是`null`它的评估结果`true`，所以`if`执行语句。

在您的情况下，解决方案是查看使用了哪个运算符，就像@adam 在他的解决方案中所写的那样。

顺便说一句，在字符串中包含逻辑（可能在脚本之外）不是一个好主意。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T13:07:02.767

`$sub_total.$c['operator'].$c['value']`不是比较而是字符串连接。PHP 中填充的字符串始终为真，因此`if`- 语句始终为`true`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T13:07:16.357

使用[PHP eval](http://php.net/manual/en/function.eval.php)来评估您构建的代码。

```
$c['operator'] = ">=";

if(eval($sub_total.$c['operator'].$c['value']))
{
    echo $sub_total.$c['operator'].$c['value'];          
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T13:08:49.060

您不能在 PHP 中这样做，您应该执行以下操作：

```
if ($c['operator'] == '>=' and $sub_total >= $c['value']) {
    // Do something
} else if ($c['operator'] == '<=' and $sub_total <= $c['value']) {
    // Do something else
} // etc... 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-19T13:09:30.570

看一下 eval 方法。虽然很危险

[http://php.net/manual/en/function.eval.php](http://php.net/manual/en/function.eval.php)

# parsing - 如何获取导致解析错误的字符串？

> ID：12974898
> 
> 赞同：3
> 
> 时间：2012-10-19T13:04:35.030
> 
> 标签：parsing, error-handling, lisp, common-lisp

假设我有这个代码：

```
(handler-case (read ...)
  (parse-error (condition)
     (format t "What text was I reading last to get this error? ~s~&"
       (how-to-get-this-text? condition)))) 
```

我只能看到`parse-namestring`访问器，但它给出了错误消息，而不是它正在解析的文本。

**编辑**

在我的情况下，问题不那么普遍，因此不涉及无法解析的整个字符串的替代解决方案也很好。

想象一下我试图解析的这个示例代码：

```
prefix(perhaps (nested (symbolic)) expressions))suffix 
```

在某些情况下，我需要停止“后缀”，而在其他情况下，我需要继续，后缀本身没有其他含义，只是作为解析器下一步应该采取的行动的指标。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T14:44:21.713

READ 从流中解析，而不是从字符串中解析。s 表达式可以任意长。READ 是否应该保留已读内容的字符串？

您可能需要一个特殊的流。在标准的 Common Lisp 中，没有用户定义流的机制。但在现实生活中，每个实现都有这样的可扩展流。参见例如“灰色流”。

[http://www.sbcl.org/1.0/manual/Gray-Streams.html](http://www.sbcl.org/1.0/manual/Gray-Streams.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T14:22:38.363

没有标准功能可以做到这一点。你也许可以用 暴力破解某些东西`read-from-string`，但无论你做什么，都需要一些额外的工作。

# ios - 更新配置文件和证书

> ID：12974900
> 
> 赞同：11
> 
> 时间：2012-10-19T13:04:45.607
> 
> 标签：ios, xcode

我有 2 个 iOS 证书 - 一个用于开发，一个用于分发（App Store）。两者都将在 2 周后到期。我在 Xcode 4.4.1 上。我有 2 个开发配置文件和 4 个分发配置文件。

在 Xcode 中，我看到与分发证书相关的所有配置文件都设置为在 2 周内到期。我进入 Organizer->Provisioning Profiles 并尝试更新，但我收到一个错误对话框，指出“没有为参数 'deviceids' 提供值”。当我查看该配置文件的 Apple Provisioning Portal 时，它显示证书将在 2 周后到期，并且没有与之关联的设备（这是我一直这样做的方式）。

所以 - 我正在尝试更新这些，并且以前没有这样做过。有没有人在 Xcode 中看到过类似的错误？我是否需要先更新我的证书，如果需要，如何更新？我在 Provisioning Portal 或 Xcode 中看不到任何“创建新证书”按钮。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T17:07:10.107

好的 - 我想我已经解决了这个问题。这是我所做的，它似乎有效 - 当我上传下一个版本时，我会确定。

*   在 X-Code 中，我删除了所有的配置文件
*   然后我退出了 X-Code
*   在开发门户中，我吊销了我的开发人员和分发证书
*   我使用钥匙串应用程序创建了新钥匙
*   仍在钥匙链中，我删除了我的旧的，即将到期的密钥/证书
*   回到开发门户，我创建了新证书
*   仍然在开发门户上，我能够编辑我的所有配置文件并将正确的新证书关联到它
*   我下载了新的配置文件
*   然后，我按照此链接的建议解决了 X-Code 中明显的错误，以从我的项目中删除旧的配置文件： [协同设计错误：删除过期配置文件后找不到配置文件](https://stackoverflow.com/questions/1760518/codesign-error-provisioning-profile-cannot-be-found-after-deleting-expired-prof)
*   启动 X-Code 备份并将配置文件复制到 Organizer
*   专为设备打造，经测试正常。
*   为 IOS 设备构建，就好像我准备上传到 AppStore 并且构建成功一样。我还没有尝试上传到商店。

我实际上做了两次这些步骤，一次用于开发配置文件，然后在我的测试设备上工作/测试后，我修改了分发配置文件。

这些设置 X-Code 没有警告，并且 Organizer 现在显示我所有的有效配置文件，这些配置文件不会再过期一年。希望明年，如果我没有忘记这些步骤，我将能够更快地完成它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-24T01:16:56.150

最近更新证书后，我遇到了类似的问题。

以下更正了我的*Development Provisioning Profile*的问题：

*   在**Xcode Organizer**中单击*Refresh*。
***   确保您的**项目**和**目标的***代码签名*构建设置设置为正确的*Provisioning Profile*。您应该选择*iPhone Developer*以避免将来出现问题。*******   **或者，从Xcode Organizer的****Device**选项卡中删除过期的配置文件。********

 ********以下更正了我的*Distribution Provisioning Profile*的问题：

*   登录您的[iOS 开发者门户](https://developer.apple.com/devcenter/ios/index.action)
*   转到配置下的*分发**选项*卡
**   创建一个新的分布配置文件。*   配置文件生成后，在**Xcode Organizer中点击***Refresh**

 **** * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-17T06:08:44.907

一个更简单的方法是......

我的证书已过期，因此 Xcode Organizer 中的更新按钮按钮不起作用。

我做了以下事情：

*   登录到 iOS 配置门户
*   转到配置文件 > 分发
*   单击每个过期的配置文件并单击编辑
*   证书单选按钮未选中，因为我的证书已过期，所以我检查它并单击生成
*   然后系统会提示您下载新生成的配置文件....不要！
*   等待大约 5 分钟
*   进入 Xcode Organizer > 配置文件并点击刷新
*   然后配置文件应从“过期”更改为“有效”***********

# jboss5.x - MessageAwareListener 处理 courier 时出错，后退 32000 毫秒 (AS 5.1 + ESB 4.10)

> ID：12974904
> 
> 赞同：3
> 
> 时间：2012-10-19T13:05:09.437
> 
> 标签：jboss5.x, jbpm, jboss-esb

我的 ESB 档案有问题。我正在将 ESB 项目从 ESB 服务器 4.4 移植到 Jboss AS 5.1.0 中集成的 ESB 4.10。我用正确的运行时环境 5.1 构建了项目。服务器启动时，我会定期收到警告。我在 jboss esb 社区中看到了更多主题，但没有人解决这个问题。我试图在 jboss-esb.properties 中增加我的连接池，但没有改变。然后是提取日志：

```
 17:19:40,559 INFO  [MessageAwareListener] State reached : false
 17:19:41,565 WARN  [MessageAwareListener] Error processing courier, backing off for 8000 milliseconds
 17:19:49,568 INFO  [MessageAwareListener] State reached : false
 17:19:50,582 WARN  [MessageAwareListener] Error processing courier, backing off for 16000 milliseconds
 17:20:06,584 INFO  [MessageAwareListener] State reached : false
 17:20:07,592 WARN  [MessageAwareListener] Error processing courier, backing off for 32000 milliseconds
 17:20:39,594 INFO  [MessageAwareListener] State reached : false
 17:20:40,603 WARN  [MessageAwareListener] Error processing courier, backing off for 32000 milliseconds
 17:21:12,617 INFO  [MessageAwareListener] State reached : false
 17:21:13,639 WARN  [MessageAwareListener] Error processing courier, backing off for 32000 milliseconds
 17:21:45,641 INFO  [MessageAwareListener] State reached : false
 17:21:46,650 WARN  [MessageAwareListener] Error processing courier, backing off for 32000 milliseconds
 17:22:18,652 INFO  [MessageAwareListener] State reached : false
 17:22:19,662 WARN  [MessageAwareListener] Error processing courier, backing off for 32000 milliseconds
 17:22:51,664 INFO  [MessageAwareListener] State reached : false
 17:22:52,672 WARN  [MessageAwareListener] Error processing courier, backing off for 32000 milliseconds
 17:23:24,674 INFO  [MessageAwareListener] State reached : false
 17:23:25,683 WARN  [MessageAwareListener] Error processing courier, backing off for 32000 milliseconds
 17:23:57,684 INFO  [MessageAwareListener] State reached : false
 17:23:58,692 WARN  [MessageAwareListener] Error processing courier, backing off for 32000 milliseconds
 17:24:30,694 INFO  [MessageAwareListener] State reached : false
 17:24:31,701 WARN  [MessageAwareListener] Error processing courier, backing off for 32000 milliseconds
 17:25:03,703 INFO  [MessageAwareListener] State reached : false
 17:25:04,711 WARN  [MessageAwareListener] Error processing courier, backing off for 32000 milliseconds
 17:25:36,713 INFO  [MessageAwareListener] State reached : false
 17:25:37,720 WARN  [MessageAwareListener] Error processing courier, backing off for 32000 milliseconds
 17:26:09,722 INFO  [MessageAwareListener] State reached : false
 17:26:10,729 WARN  [MessageAwareListener] Error processing courier, backing off for 32000 milliseconds
 17:26:42,731 INFO  [MessageAwareListener] State reached : false
 17:26:43,738 WARN  [MessageAwareListener] Error processing courier, backing off for 32000 milliseconds
 17:27:15,740 INFO  [MessageAwareListener] State reached : false
 17:27:16,747 WARN  [MessageAwareListener] Error processing courier, backing off for 32000 milliseconds
 17:27:48,749 INFO  [MessageAwareListener] State reached : false
 17:27:49,756 WARN  [MessageAwareListener] Error processing courier, backing off for 32000 milliseconds 
```

在此先感谢您的帮助

此致

# javascript - 在 IOS 中排除 js 文件并在 android 中包含

> ID：12974905
> 
> 赞同：-1
> 
> 时间：2012-10-19T13:05:21.207
> 
> 标签：javascript, android, ios, cordova

我正在使用 cordova 2.1.0 进行 IOS/应用程序开发。我只想为 IOS 和 android 制作一个 index.html。所以，我想在 index.html 中包含以下针对 android 的语句和排除 IOS 的语句：-

```
<script type="text/javascript" src="iscroll.js"></script> 
```

我应该给出什么条件才能使该语句为 android 运行而为 IOS 跳过。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T14:13:59.727

```
 function init() {
        if(device.platform =="Android"){
            $("script").attr("src", "iscroll.js").appendTo("head");
        }
         document.addEventListener("deviceready", onDeviceReady, false);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T13:12:25.180

[device.platform](http://docs.phonegap.com/en/1.0.0/phonegap_device_device.md.html#device.platform)允许您根据平台过滤内容。

# jquery - LinkedIn Javascript API 不返回位置（结束日期）

> ID：12974906
> 
> 赞同：1
> 
> 时间：2012-10-19T13:05:22.947
> 
> 标签：jquery, ajax, json, api, linkedin

出于某种原因，职位的 endDate 正在挂起整个脚本？

```
function importJobsEducation() {
  IN.API.Profile("me")
    .fields(["id","positions:(company,title,summary,start-date,end-date,is-current)", "educations","skills", "headline"])
    .result(function(result) {
      profile = result.values[0];

      $("#headline").val(profile.headline);
      $("#linkedInID").val(profile.id)

    positions = "";
for (var index=0; index < profile.positions.values.length; index++) {

    JobTitle = profile.positions.values[index].title
    jobSummary = profile.positions.values[index].summary
    isCurrent = profile.positions.values[index].isCurrent
    JstartMDate = profile.positions.values[index].startDate.month
    JstartYDate = profile.positions.values[index].startDate.year

    alert(profile.positions.values[index].endDate.month)

    if (isCurrent === false) {

        }

// Company Fields

OrgName  = profile.positions.values[index].company.name
companyType = profile.positions.values[index].company.companyType
size = profile.positions.values[index].company.size
industry = profile.positions.values[index].company.industry
ticker = profile.positions.values[index].company.ticker

}

    education = "";
for (var index=0; index < profile.educations.values.length; index++) {
    schoolName = profile.educations.values[index].schoolName    
    startDate = profile.educations.values[index].startDate.year
    EndDate = profile.educations.values[index].endDate.year

}

skills = "";    
for (var index=0; index < profile.skills.values.length; index++) {
skills += '<a href="" class="tag">'+ profile.skills.values[index].skill.name + '</a>&nbsp;';
}

    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:33:00.753

您的代码的问题是当前位置没有结束日期，并且您的代码编写方式试图获取 endDate 即使是当前位置。

因此，我建议你有一个条件标签来检查这个位置是否是当前的，如果不是，它会获取结束日期。例子：

```
if (profile.positions.values[index].isCurrent === false) {
       endDate = profile.positions.values[index].endDate.month;
    } 
```

我希望这有帮助。

# javascript - require.js 没有加载任何模块

> ID：12974912
> 
> 赞同：6
> 
> 时间：2012-10-19T13:05:54.430
> 
> 标签：javascript, requirejs

我正在尝试使用 require.js 加载模块，并且我的 app.js 中有以下内容：

```
require.config({
baseUrl: "js"
});

alert("hello world"); // for debugging

require(['eh2'], function(eh2) {
    alert("nothing here"); // for debugging
}); 
```

但是，当我运行我的应用程序时，尽管 app.js 正在加载，但我需要的模块永远不会加载 - “hello world”会执行，但“nothing here”不会！

我在 HTML 页面中的脚本标记如下所示：

```
<script type="text/javascript" src="js/lib/require.js" data-main="app"></script> 
```

而 eh2.js 位于 js 文件夹中，它被包裹在一个定义语句中：

```
define(["./screens/Screens"], function(screens) {
    return {
        // code here
    };
}); 
```

我究竟做错了什么？require.js 是否在 screen.js 下加载某些子模块时静默失败，也许？

以下是 Screens 模块的代码：

```
 define([ "screens/TitleScreen", "screens/GameScreen" ], function(titleScreen, gameScreen) {
    return {

        screenFuncs: {
            "TitleScreen" : titleScreen.TitleScreen,
            "GameScreen" : gameScreen.GameScreen,
        },

        buildScreen: function(data) {
            var func = screenFuncs[data.type];
            var screen = new func(data.params);
            return screen;
        },
    };
}); 
```

无论如何，define 调用中的路径是否需要相对于我所在的 js 文件的当前位置，或者相对于 app.js 中定义的根？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T02:05:13.260

替换这个：

```
define(["./screens/Screens"], function(screens) {
    ....
}); 
```

使用绝对路径变体：

```
define(["screens/Screens"], function(screens) {
    ....
}); 
```

或使用：

```
define(function(require) {
    var screens = require("./screens/Screens");
    ....
}); 
```

* * *

从[文档](http://requirejs.org/docs/api.html#modulenotes)：

> **define() 中的相对模块名称：**
> 
> 对于可能在 define() 函数调用中发生的 require("./relative/name") 调用，请务必要求将“require”作为依赖项，以便正确解析相对名称：

```
define(["require", "./relative/name"], function(require) {
    var mod = require("./relative/name");
}); 
```

> 或者更好的是，使用可用于翻译 CommonJS 模块的缩短语法：

```
define(function(require) {
    var mod = require("./relative/name");
}); 
```

# cross-compiling - 交叉编译：如何在目标上使用与编译机相同的 libstdc++

> ID：12974915
> 
> 赞同：0
> 
> 时间：2012-10-19T13:06:08.993
> 
> 标签：cross-compiling, openwrt

我在 TP-Link MR3020 上运行 openwrt，并在 x86 ubuntu 上为此设备进行交叉编译。我遇到了问题，远程调试没有多大帮助。

也许我用来编译的工具链中的 c++ 标准库与目标机器上的不同。如何查看安装了哪个版本？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T11:17:20.810

您可以看到工具链的不同选项，例如 Binutils 版本、GCC 编译器版本、...

只需执行以下命令并按照说明进行操作

```
make menuconfig 
```

进入“高级配置选项（针对开发人员）”，然后进入“工具链选项”

您可以看到工具链的不同选项，例如 Binutils 版本、GCC 编译器版本、...

# linux - linux环境下最好的IDE是什么？

> ID：12974916
> 
> 赞同：-4
> 
> 时间：2012-10-19T13:06:11.043
> 
> 标签：linux, ide

是否有像 Visual Studio 这样的 IDE 可以帮助 linux env 中的开发人员？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T13:10:09.553

所有操作系统开发人员都在他们感到满意且易于使用的任何编辑器中编写代码（或者他们习惯了他们的编辑器）。除此之外，大多数操作系统都使用自定义 Make 脚本进行编码，并且不使用 IDE（除非您已修改 IDE 以使用某个 make 脚本）。

使用你所知道的比学习另一种工具来做同样的事情要容易得多，因为我旁边的另一个人正在使用它并且很有效率。

其次：一些操作系统开发人员我知道 VI/EMACS/NANO/gEDIT/MicroEMACS 中的代码。这是一个口味问题。只要您遵守编码标准，您就可以自由使用您想要的任何编辑器/IDE。

请在此处查看我的答案：[https ://softwareengineering.stackexchange.com/questions/169822/what-ides-or-editors-do-companies-like-google-apple-ibm-etc-use](https://softwareengineering.stackexchange.com/questions/169822/what-ides-or-editors-do-companies-like-google-apple-ibm-etc-use)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T13:17:20.633

有几种，但这在很大程度上取决于您计划使用的语言。对于 C++，您可以尝试 Qt Creator，对于 Java，显而易见的选择是 Eclipse。许多其他语言都有可供它们使用的 Eclipse 插件。

我个人最喜欢的是 Emacs，尽管它本身并不能算作 IDE。

# ruby - 无需下载即可获取图像的宽度和高度

> ID：12974917
> 
> 赞同：4
> 
> 时间：2012-10-19T13:06:11.613
> 
> 标签：ruby

我需要在 Ruby on Rails 中获取图像的大小。该图像位于远程 URL 中。我不想下载整个图像。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T13:35:25.527

如果不实际下载图像（如使用带宽），您很可能无法这样做。

话虽如此，您可以使用[FastImage](https://github.com/sdsykes/fastimage) gem 为您执行此操作。

```
require 'fastimage'

FastImage.size("http://stephensykes.com/images/ss.com_x.gif")
=> [266, 56]  # width, height 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T13:42:15.323

仅 HTTP 标头请求不会帮助您

```
$ http -h get "http://cdn.sstatic.net/stackoverflow/img/sprites.png"
HTTP/1.1 200 OK
Cache-Control: max-age=604800
Connection: close
Content-Length: 16425
Content-Type: image/png
Date: Fri, 19 Oct 2012 13:39:15 GMT
ETag: "0d1523d7cadcd1:0"
Last-Modified: Thu, 18 Oct 2012 22:02:18 GMT
Server: NetDNA-cache/2.2 
```

因此，您将需要一些 HTTP 响应正文。但是某些图像文件格式的顶部有描述分辨率的标题（尽管 jpeg 没有）。因此，也许您可​​以针对该位发出部分 HTTP 请求（范围请求）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T13:37:51.470

“[在 javascript 中验证或读取远程图像类型](https://stackoverflow.com/questions/11962445/validating-or-reading-a-remote-image-type-in-javascript)”几乎涵盖了您需要了解的内容。它可能比你真正需要的更深一些，但它已经得到了很好的解释。

否则，您可以创建一个服务器端控制器来执行此操作一次。您可以从任何地方读取图像及其尺寸。当用户获取图像时，将从您的服务器“缓存”中读取尺寸，而无需再次下载图像大小。如果有关该特定图像的信息不可用，您将获取它并存储尺寸和 URL。这可以节省大量带宽。

# ruby - 无法将命令行参数数组转换为符号参数

> ID：12974918
> 
> 赞同：0
> 
> 时间：2012-10-19T13:06:13.440
> 
> 标签：ruby, type-conversion, command-line-arguments, symbols

在以下脚本中（对于 Ruby >= 1.9），我只是想将字符串打印到屏幕上，而不是命令行中给出的符号。

这是我的尝试（SymbolsFromArgv.rb）

```
#!/usr/bin/env ruby

def switch_sybol(symbol)
    case symbol
        when :add
            "Addition !"
        when :mul
            "Multiplication !"
        else
            "Unkown symbol #{symbol} !"
    end
end

puts switch_sybol( :add )
puts switch_sybol( :mul )
puts switch_sybol( *(ARGV.collect {|elem| elem.to_sym}) ) 
```

但是，当我启动时：

```
$ ./SymbolsFromArgv.rb :mul 
```

我得到以下结果：

```
Addition !
Multiplication !
Unkown symbol :mul ! 
```

那么，为什么我没有得到“乘法！” 最后的结果？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T13:18:56.353

`":mul".to_sym`不是`:mul`

```
":mul".to_sym
=> :":mul" 
```

你只需要通过`mul`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T13:15:37.427

Shell 参数被解释为字符串。所以你应该`$ ./SymbolsFromArgv.rb mul`，否则它会和做一样

```
":mul".to_sym
=> :":mul" 
```

# c# - 如何通过drawImage复制图像

> ID：12974923
> 
> 赞同：0
> 
> 时间：2012-10-19T13:06:35.303
> 
> 标签：c#, image, bitmap

我需要在我的磁盘上制作一个 PNG 图像的副本。事实上我需要更复杂的思考，但这是其中的一部分。所以，

我正在这样做：

```
Bitmap oldbmp = new Bitmap( filename );

Bitmap newbmp = new Bitmap(oldbmp.Size.Width, oldbmp.Size.Height, oldbmp.PixelFormat);

// if I don't do this, destination image looks bigger and clipped
newbmp1.SetResolution(oldbmp.HorizontalResolution, oldbmp.VerticalResolution);

Graphics graphics = Graphics.FromImage(newbmp);
graphics.DrawImageUnscaled(oldbmp,0,0);

newbmp.Save( filename2 ); 
```

我所拥有的是第二个文件具有不同的文件大小（有时更多，有时小于第一个）。

我猜编码有问题，但无法理解到底是什么。我必须更改或添加什么？

PS Bitmap.Clone( ... ) 不能满足我的需要。

更新：

好的，我的实际任务是：

1.  将文件切割成几个较小的部分。

2.  将零件保存到磁盘。

3.  从磁盘读取部分。

4.  将零件组装回完整图像。

5.  将完整图像保存到磁盘。

第一个文件是PNG，最后一个文件是PNG，如果部分未更改，它们必须具有相同的大小。

不同的大小很重要，因为有些文件非常大，差异可能超过 2 MB！

更新2：

第一张图。执行代码后，文件的大小会增加。

![第一张图片](../Images/b3ece85b0329322944e431ec9f9700f9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T14:41:22.760

我认为这是由于缺乏对 .Net PNG 编码器的控制。您可以通过在结果文件上再次运行拆分组合来确认这一点，在我的测试中，文件大小第二次保持不变，我做的第二次测试是使用 Paint.Net 加载/保存，并且在我自己的代码中没有拆分/combining 这也增加了文件大小。我在仓促构建的拆分器/合并器中注意到的另一件事是，如果拆分的数量不是图像宽度的一个因素，那么由于舍入错误导致的结果文件略有不同，这当然会影响文件大小。

我认为获得相同文件大小的唯一方法是使用最初构建文件时使用的相同编码器。根据您生成图像的方式，这可能是可能的，但您很可能会被这种增加所困扰。

注意：使用上面的测试文件（最初是 103,191 字节）我的结果是 121,715 字节

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T13:59:51.063

```
 Bitmap source = new Bitmap("input.png");

        Rectangle rec = new Rectangle(0, 0, 80, 144);

        Bitmap[] parts = new Bitmap[10];

        for (int i = 0; i < 10; i++)
        {
            rec.Y = 144 * i;

            Bitmap b = (Bitmap)cropImage(source, rec);

            b.Save(String.Format("{0}.png", i), ImageFormat.Png);
            parts[i] = b;
        }

        Bitmap output = new Bitmap(source.Width, source.Height);
        Graphics g = Graphics.FromImage(output);

        for(int i=0; i<10; i++)
        {
            Bitmap b = parts[i];

            g.DrawImageUnscaled(b, new Point(0, i * 144));
        }

        output.MakeTransparent(Color.Transparent); // test if the image view don't changes, use this to reduce the overhead, in my test it reduced output size by 10 percent without changing the view

        output.Save("output.png", ImageFormat.Png); 
```

# javascript - jQuery 选择器没有注册添加的类

> ID：12974934
> 
> 赞同：0
> 
> 时间：2012-10-19T13:07:20.637
> 
> 标签：javascript, jquery, css

谁能解释一下为什么这段代码会做它的工作。

我想要实现的是，当第一个按钮被点击时，javascript 会向第二个按钮添加一个禁用类，当第二个按钮被禁用类按下时，javascript 将不会运行。

```
<!DOCTYPE html>  
<html lang="en">  
<head>
<meta charset="utf-8" />  
<title>jQuery question</title>  
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<style>
a.success { background: green }
</style>
</head>  
<body>
    <div id="holder">
        <a href="#" class="button">Button 1</a>
        <a href="#" class="button">Button 2</a>
    </div>
</body>
<script>
$(function(){

  $('#holder a.button:not(.disabled)').on('click', function() {

    // Toggle success class
    if($(this).hasClass('success')) {
        $(this).removeClass('success');
    }
    else {
        $(this).addClass('success');
    }

    // Add disabled class to the not so lucky button 
    $('#holder a.button:not(.success)').each(function() {
        $(this).addClass('disabled');
    });

  });

});
</script>
</html> 
```

查看控制台并非如此。即使第二个按钮获得禁用类。尽管有 :not(.disabled) 选择器，但按下禁用按钮仍会运行 javascript。

当我像这样更改它时，它的行为符合预期

```
$('#holder a.button').on('click', function() {
    if($(this).hasClass('disabled')) {
      return false;
    } 
```

但是有人可以解释为什么它会这样吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T13:11:50.163

每次触发事件时，选择器不会动态地重新评估自身。

解决此问题的最佳方法是使用事件委托：

```
$('#holder').on('click', '.button:not(.disabled)', function() {
    // snip...
}); 
```

# jakarta-ee - How do I deploy a JCA connector as an OSGI bundle

> ID：12974939
> 
> 赞同：1
> 
> 时间：2012-10-19T13:07:43.977
> 
> 标签：jakarta-ee, glassfish, osgi, jca

Is it possible to deploy an JCA Connector as an OSGI Bundle in GlassFish like it works with EJBs?

Best regards

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-06T12:55:33.910

这不是 Glashfish 特有的答案，但由于我主要使用基于 OSGI 容器的 Jboss，我假设与 JBOSS 一样，在 Glashfish 中您可以编写自定义 OSGI 扩展并将它们部署到容器。

现在有一些关于 JCA 适配器的主题：

*   JCA 适配器的主要目的是连接到遗留后端，或促进使用不兼容的资源（自定义线程、侦听服务器套接字、文件 IO 等）。
*   要根据功能（入站/出站、事务等）实现 JCA 适配器，您必须实现从几行到很多东西。
*   JCA 适配器的实现有望跨容器移植，可能免除几个部署描述符。
*   JCA 适配器被部署为标准的“rar”EE 档案。

现在我对 OSGI 的理解相当有限，但我知道的一两件事是：

*   容器使用 OSGI 模块（包）按需加载组件，从而获得更好的启动时间。
*   在容器内部，Web 服务器、servlet 引擎、数据源管理、事务等作为 OSGI 捆绑包连接在一起。
*   您可以将自定义 OSGI 扩展部署到容器和/或将插件和扩展写入现有模块。

所以从我的角度来看，我没有看到 OSGI 与 JCA 有太多功能重叠，我的回答是“从技术上讲，你不能将 JCA 适配器部署为 OSGI 包，因为它们遵循不同的合同并且取决于特定 JCA 适配器的功能，这可能毫无意义”。

# c# - 使用 c# 向文件添加属性

> ID：12974940
> 
> 赞同：3
> 
> 时间：2012-10-19T13:07:53.257
> 
> 标签：c#

我正在尝试构建一个应用程序，将我的计算机上的文件与我的网络服务器上的文件同步。在我目前的情况下，我的应用程序会监视一系列包含要同步的文件的路径。此解决方案的问题是，当我在本地重命名文件时，它不再匹配任何路径并作为新文件上传，而不是覆盖旧文件。我想要做的是在文件中添加一个像 documentID 这样的属性，这样无论文件名是什么我都可以检查它。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T13:17:46.683

你不能。您正在寻找的是将元数据添加到文件中。这就是为什么像 Perforce 这样的修订软件首先存在的原因。这种软件跟踪仓库内的所有文件，并记录所有文件的更改、重命名、删除和创建。但即使 Perforce 也有其局限性，因为它无法更改文件之间的链接。

如果您想要一个完整的解决方案，BigFile 是完美文件跟踪的答案。但此时，您不在 Windows 支持范围内。大多数视频游戏公司都使用 BigFile 的概念，因为它允许通过 ID 而不是名称来跟踪内部存在的每个文件。所有的文件都被称为 ID 和路径只是为了方便用户。一个文件通过其 ID 引用另一个文件，仅此而已。

在我参与的一个大型项目中，我们将 BigFile 与 Perforce 集成在顶部，作为修订历史记录。BigFile 将序列化一个“外部”文件并将其提供给 Perforce 以获取历史记录。当我们获得最新版本时，BigFile 会向 Perforce 询问所有最新版本并将它们重新集成到内部。

但如果你只做 Office 文件，Perforce、Alienbrain、CVS 或 Subversion 都是可以解决你问题的软件。

# boost - Boost::spirit 序列没有被解析

> ID：12974941
> 
> 赞同：2
> 
> 时间：2012-10-19T13:07:58.930
> 
> 标签：boost, boost-spirit

我编写了这个代码示例并希望它能够打印`OPERATION( OPERATOR(aaa) ID(bbb) )`，但我得到的只是`OPERATION ( OPERATOR(aaa) )`相反。两者都是真实的`result2`。`it1 == it2`为什么不解析操作数？

```
#include "stdafx.h"

#include <boost/serialization/strong_typedef.hpp>
#include <boost/bind.hpp>
#include <boost/tuple/tuple.hpp>
#include <boost/spirit/include/phoenix.hpp>
#include <boost/spirit/include/phoenix1.hpp>
#include <boost/spirit/include/phoenix_core.hpp>
#include <boost/spirit/include/phoenix_operator.hpp>
#include <boost/spirit/include/phoenix_object.hpp>
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/support.hpp>
#include <boost/fusion/include/adapt_struct.hpp>
#include <boost/variant/recursive_variant.hpp>
#include <iostream>
#include <string>

namespace NsSemSDK
{

struct STreeConstructionRuleRegexp {
    std::string m_strEntity;
};

struct STreeConstructionRuleString {
    std::string m_strEntity;
};

struct STreeConstructionRuleIdentifier {
    std::string m_strEntity;
};

typedef int STreeConstructionRuleNumber;

typedef std::string STreeConstructionRuleOperation;
typedef boost::variant<STreeConstructionRuleRegexp, STreeConstructionRuleNumber, STreeConstructionRuleString, STreeConstructionRuleIdentifier> STreeConstructionRuleOperand;
typedef boost::tuple<STreeConstructionRuleOperation, std::vector<STreeConstructionRuleOperand> > STreeConstructionRuleOperationWithOperands;

std::ostream& operator<<(std::ostream& stream, const NsSemSDK::STreeConstructionRuleIdentifier& val);
std::ostream& operator<<(std::ostream& stream, const NsSemSDK::STreeConstructionRuleString& val);
std::ostream& operator<<(std::ostream& stream, const NsSemSDK::STreeConstructionRuleRegexp& val);
std::ostream& operator<<(std::ostream& stream, const NsSemSDK::STreeConstructionRuleOperationWithOperands& val);

std::ostream& operator<<(std::ostream& stream, const NsSemSDK::STreeConstructionRuleOperationWithOperands& val)
{
    stream << "OPERATION( " << "OPERATOR(" << val.get<0>() << ")";
    for (int i = 0; i < val.get<1>().size(); i++)
    {
        stream << " " << val.get<1>()[i];
    }
    stream << " )";
    return stream;
}

std::ostream& operator<<(std::ostream& stream, const NsSemSDK::STreeConstructionRuleRegexp& val)
{
    return stream << "REGEXP(" << val.m_strEntity << ")";
}

std::ostream& operator<<(std::ostream& stream, const NsSemSDK::STreeConstructionRuleString& val)
{
    return stream << "STR(" << val.m_strEntity << ")";
}

std::ostream& operator<<(std::ostream& stream, const NsSemSDK::STreeConstructionRuleIdentifier& val)
{
    return stream << "ID(" << val.m_strEntity << ")";
}

}

BOOST_FUSION_ADAPT_STRUCT(
    NsSemSDK::STreeConstructionRuleRegexp,
    (std::string, m_strEntity)
)

BOOST_FUSION_ADAPT_STRUCT(
    NsSemSDK::STreeConstructionRuleString,
    (std::string, m_strEntity)
)

BOOST_FUSION_ADAPT_STRUCT(
    NsSemSDK::STreeConstructionRuleIdentifier,
    (std::string, m_strEntity)
)

namespace NsSemSDK{

namespace qi = boost::spirit::qi;
namespace phoenix = boost::phoenix;

template <typename Iterator, typename Skipper>
struct STreeContructionRulesGrammar : qi::grammar<Iterator, STreeConstructionRuleOperationWithOperands(), Skipper> // std::vector<STreeConstructionRule>()
{
    qi::rule<Iterator, STreeConstructionRuleOperationWithOperands(), Skipper> m_oOperationWithOperands;
    qi::rule<Iterator, STreeConstructionRuleOperation(), Skipper> m_oOperation;
    qi::rule<Iterator, std::vector<STreeConstructionRuleOperand>(), Skipper> m_oOperandsList;
    qi::rule<Iterator, STreeConstructionRuleOperand(), Skipper> m_oOperand;
    qi::rule<Iterator, STreeConstructionRuleString(), Skipper> m_oString;
    qi::rule<Iterator, STreeConstructionRuleRegexp(), Skipper> m_oRegexp;
    qi::rule<Iterator, STreeConstructionRuleNumber(), Skipper> m_oNumber;
    qi::rule<Iterator, STreeConstructionRuleIdentifier(), Skipper> m_oIdentifier;

    STreeContructionRulesGrammar() : STreeContructionRulesGrammar::base_type(m_oOperationWithOperands)
    {
        m_oOperationWithOperands %= m_oOperation >  m_oOperandsList;
        m_oOperation %= qi::lexeme[+(qi::alnum)];
        m_oOperandsList %= qi::lit("[") >> (m_oOperand % ',') >> qi::lit("]");
        m_oOperand %= m_oString | m_oRegexp | m_oNumber | m_oIdentifier;

        m_oString %= qi::lit("\"") >> qi::lexeme[*(qi::char_ - '"')] >> qi::lit("\""); 
        m_oRegexp %= qi::lit("'") >> qi::lexeme[*(qi::char_ - '\'')] >> qi::lit("'"); 
        m_oNumber %= qi::int_;
        m_oIdentifier %= +(qi::alpha) >> qi::eps;
    }

};

}
using namespace NsSemSDK;

int _tmain(int argc, _TCHAR* argv[])
{
    std::string str("aaa [bbb]");
    STreeContructionRulesGrammar<std::string::iterator, boost::spirit::ascii::space_type> grammar;
    STreeConstructionRuleOperationWithOperands result;
    std::string::iterator it1 = str.begin(), it2 = str.end();
    bool result2 = qi::phrase_parse(it1, it2, grammar, boost::spirit::ascii::space, result);
    std::cout << result << std::endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T13:30:22.330

我`BOOST_SPIRIT_DEBUG`是这样用的

*   [http://liveworkspace.org/code/ecb721b4b30e1f117e8905c0f13218c2](http://liveworkspace.org/code/ecb721b4b30e1f117e8905c0f13218c2)

如您所见，解析调试跟踪显示`bbb`正在匹配为标识符：

```
<m_oOperationWithOperands>
  <try>aaa [bbb]</try>
  <m_oOperation>
    <try>aaa [bbb]</try>
    <success> [bbb]</success>
    <attributes>[[a, a, a]]</attributes>
  </m_oOperation>
  <m_oOperandsList>
    <try> [bbb]</try>
    <m_oOperand>
      <try>bbb]</try>
      <m_oString>
        <try>bbb]</try>
        <fail/>
      </m_oString>
      <m_oRegexp>
        <try>bbb]</try>
        <fail/>
      </m_oRegexp>
      <m_oNumber>
        <try>bbb]</try>
        <fail/>
      </m_oNumber>
      <m_oIdentifier>
        <try>bbb]</try>
        <success>]</success>
        <attributes>[[[b, b, b]]]</attributes>
      </m_oIdentifier>
      <success>]</success>
      <attributes>[[[b, b, b]]]</attributes>
    </m_oOperand>
    <success></success>
    <attributes>[[[[b, b, b]]]]</attributes>
  </m_oOperandsList>
  <success></success>
  <attributes>[OPERATION( OPERATOR(aaa) )]</attributes>
</m_oOperationWithOperands> 
```

到现在为止还挺好。所以问题是为什么结果没有被分配到 rule 中的元组元素中`m_oOperationWithOperands`。在这里，恐怕我不能告诉你你应该做什么。

我利用我的经验检查了正确的*融合适应*是否对`tuple`s 有效。一时兴起我改变了

```
#include <boost/fusion/include/adapt_struct.hpp> 
```

到

```
#include <boost/fusion/include/adapted.hpp> 
```

现在输出是：

```
OPERATION( OPERATOR(aaa) ID(bbb) ) 
```

现场观看[http://liveworkspace.org/code/c0da90349fbcae6655ab3e6a45f1ef69](http://liveworkspace.org/code/c0da90349fbcae6655ab3e6a45f1ef69)

> **PS**：我很想说这是 Qi 中的一个错误，即不存在诊断表明暴露的属性未*完全*复制到*属性引用中*。您可能想在[https://lists.sourceforge.net/lists/listinfo/spirit-general上发布此信息](https://lists.sourceforge.net/lists/listinfo/spirit-general)

# powershell - How can I write an ISO image to USB with PowerShell?

> ID：12974947
> 
> 赞同：1
> 
> 时间：2012-10-19T13:08:08.023
> 
> 标签：powershell, powershell-2.0, iso, usb-drive

We are using PowerShell, and I have an ISO image that I want to write to a USB device.

In Unix using "dd" is very easy, and I've tried with third-party windows "rawrite.exe" but with mixed results.

Is there a way to do so using PowerShell internals only? Any cmdlet extension to do so?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-08-14T08:09:00.867

您实际上可以将目标 iso 挂载为磁盘映像，然后将文件从挂载的驱动器复制到目标位置，而不是从 iso 读取和提取数据。

这个想法来自以下网址。

[http://www.codebroth.com/extracting-iso-images-with-powershell/](http://www.codebroth.com/extracting-iso-images-with-powershell/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T13:21:47.773

如果什么都不存在，你可以自己滚动。

这里有几个起点（c#）：

*   如何编写 powershell cmdlet： http: [//www.codeproject.com/Articles/32999/How-to-Write-a-Custom-PowerShell-Cmdlet-Part-I](http://www.codeproject.com/Articles/32999/How-to-Write-a-Custom-PowerShell-Cmdlet-Part-I)
*   如何提取 ISO：[http ://discutils.codeplex.com/](http://discutils.codeplex.com/)

或者，7zip 允许您提取 iso 文件，因此您可以通过其命令行界面（通过脚本）调用它（或类似的）来实现您的目的？

# jquery - $("select>option[text='xxx']") 不起作用

> ID：12974948
> 
> 赞同：2
> 
> 时间：2012-10-19T13:08:08.803
> 
> 标签：jquery

我需要使用文本设置默认选定值，这是我的代码：

HTML：

```
<select id="sel">
    <option value="F">Firm</option>
    <option value="G" selected="selected">Government</option>
    <option value="I">Individual</option>
</select> 
```

JavaScript：

```
$("#sel>option[text='Firm']).prop("selected", true); 
```

它不起作用，以下值为0：

```
$("#sel>option[text='Firm']).length 
```

如果我使用属性值，它可以工作，但我需要在这里使用文本。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T13:08:54.187

不可能将元素的文本内容视为 CSS 选择器语法中的属性。

但是，您可以编写一个过滤器来执行此操作：

```
$('select option').filter(function() {
  return $(this).text() === "Firm";
}).whatever(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T13:11:39.403

那是因为`text`不是 CSS 属性。

但是，您可以使用[jQuery 的`:contains`选择器](http://api.jquery.com/contains-selector/)

```
$("select > option:contains('xxx')") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T13:10:20.567

您可以使用[`filter()`](http://api.jquery.com/filter/)根据其内部文本获取某个元素：

```
$("#sel > option").filter(function() {
    return this.innerHTML == "Firm";
}).prop("selected", true); 
```

# iphone - UIImage imageNamed suffixes

> ID：12974950
> 
> 赞同：1
> 
> 时间：2012-10-19T13:08:22.237
> 
> 标签：iphone, ios, uiimage

Is there a resource anywhere that shows different suffixes for the imageNamed function.

I know of these...

```
blah.png - normal image
blah@2x.png - retina image 
```

Then I've seen this mentioned...

```
blah@2x~ipad.png - a retina image specifically for ipad. 
```

Is there one for...

```
blah~ipad.png - a normal image specifically for ipad? 
```

Is there a proper list of these anywhere?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T13:39:16.337

通常，我们为 .png 图像命名。我们有两张图片，一张用于原始尺寸，另一张用于双倍尺寸以使图像清晰。

该命名约定是 blah.png 代表 1x 和 blah@2x.png 代表双倍大小。没有必要写blah_ipad.png。

# java - 使用 JAX-RS 从 put 请求中检索 UTF-8 正文的问题

> ID：12974953
> 
> 赞同：0
> 
> 时间：2012-10-19T13:08:31.457
> 
> 标签：java, rest, utf-8, jaxb, jax-rs

我正在尝试将以下 utf-8 编码的 XML 发送到使用 Java 中的 JAX-RS 实现的 rest api。

XML 数据：

```
<?xml version="1.0" encoding="UTF-8"?>
<incomingData><Text>καλημέρα</Text></incomingData> 
```

然后我尝试使用以下 REST API 调用解析数据：

```
@PUT()
@Produces(MediaType.TEXT_XML)
@Consumes(MediaType.TEXT_XML)
public void print(@QueryParam("printerID") int printerID,
                  InputStream requestBodyStream) {

    IncomingData StudentData = null;
    try {    
        JAXBContext jaxbContext =
          JAXBContext.newInstance(IncomingData.class);
        Unmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();
        StudentData = (IncomingData) jaxbUnmarshaller.unmarshal(requestBodyStream);
    } catch (JAXBException e) {
        e.printStackTrace();
    }

    try {
        System.out.println(new String(StudentData.Text.getBytes(), "UTF-8"));
    } catch (UnsupportedEncodingException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }
} 
```

为了轻松解析 XML 内容，我还使用了这个 JAXB 注释类：

```
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement
public class IncomingData {
    @XmlElement(name = "Text")
    String Text = new String();
} 
```

但是，当我将其内容打印为 UTF-8 编码字符串时， `Text`XML 标记的内容仍然显示。`?????`

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T13:16:02.423

首先确保您的容器编码设置为 UTF-8。其次，尝试将输出写入文件 not to `System.out`，因为您的输出可能已经是 UTF-8 但您“out”无法显示 UTF-8。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T18:47:55.230

我想知道是否`@Consumes(MediaType.TEXT_XML)`会绊倒你，如果你会更好`@Consumes(MediaType.APPLICATION_XML)`。我相信的编码`text/xml`是`US-ASCII`.

* * *

您如何发送 XML 数据？您确定要发送的数据是“UTF-8”编码的吗？我用一个独立的例子尝试了你的模型，一切正常。

**演示**

```
package forum12974953;

import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(IncomingData.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum12974953/input.xml");
        IncomingData id = (IncomingData) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(id, System.out);
    } 

} 
```

**input.xml（明确保存为 UTF-8）/输出**

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<incomingData>
    <Text>καλημέρα</Text>
</incomingData> 
```

# ajax - Chrome browser is possible to re-launch an ajax request

> ID：12974954
> 
> 赞同：1
> 
> 时间：2012-10-19T13:08:35.543
> 
> 标签：ajax, google-chrome

Is it possible to re-launch an **ajax request** after it was launched for the first time?

Can't find out how to **re-launch** it. I have the old one in the network tab, but as I see I can't repeat it.

# asp.net-mvc - ASP.Net MVC4 将“创建视图”绑定到包含列表的模型

> ID：12974957
> 
> 赞同：4
> 
> 时间：2012-10-19T13:08:45.907
> 
> 标签：asp.net-mvc

你好，在互联网领域，我有一个有趣的难题要问你：

如果该对象包含纯粹使用 MVC 视图/部分视图的其他对象列表，是否可以绑定视图以创建对象？

伙计，这一切都很复杂……让我给你一个快速的代码示例来说明我的意思：

```
Models:
public class ComplexObject
{
    public string title { get; set; }
    public List<ContainedObject> contents { get; set; }
}

public class ContainedObject
{
    public string name { get; set; }
    public string data { get; set; }
} 
```

又好又简单对吧？好的，因此对于“title”属性来说，创建其中之一的强类型视图非常简单：

```
something like:
@Html.TextBoxFor(x => x.title) 
```

但我想不出使用 MVC 绑定“ContainedObjects”列表的好方法。我得到的最接近的是使用“列表”脚手架模板创建一个强类型的 IEnumerable 部分视图，并将其包含在页面上。

在不添加样式等的情况下，该部分视图的默认外观是：

```
@model IEnumerable<MVCComplexObjects.Models.ContainedObject>

<p>
@Html.ActionLink("Create New", "Create")
</p>
<table>
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.name)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.data)
        </th>
        <th></th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.name)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.data)
        </td>
        <td>
            @Html.ActionLink("Edit", "Edit", new { /* id=item.PrimaryKey */ }) |
            @Html.ActionLink("Details", "Details", new { /* id=item.PrimaryKey */ }) |
            @Html.ActionLink("Delete", "Delete", new { /* id=item.PrimaryKey */ })
        </td>
    </tr> 
}

</table> 
```

但坦率地说，我不知道如何将其包含在与创建新的 ComplexObject 的绑定中。换句话说，我可以通过绑定显示已经存在的 ContainedObjects 列表：@Html.Partial("PartialCreate", Model.contents)

但我想我真正想要的是：

```
@Html.PartialFor("PartialCreate", x => x.contents) 
```

我应该注意，使用 Javascript 进行编码并没有太多麻烦（我将包括下面的代码），但我真的很想知道是否有一种方法可以纯粹使用 MVC 来做到这一点。我最近从 WebForms 转换过来（无论如何，我几乎只是用 AJAX 调用替换了我所有的回发），这种事情在我从事的项目中经常出现。

无论如何，这是我目前的做法：

html -

```
Name: <input type="text" id="enterName" />
Data: <input type="text" id="enterData" />
<a id="addItem">Add Item</a>

<ul id="addedItems">
</ul>

<a id="saveAll">Save Complex Object</a> 
```

Javascript -

```
<script>
var contents = [];
$(document).ready(function () {

    $('#addItem').click(function () {
        var newItem = { name: $('#enterName').val(), data: $('#enterData').val() };
        contents.push(newItem);
        $('#addedItems').html('');
        for (var i = 0; i < contents.length; i++) {
            $('#addedItems').append(
                "<li>" + contents[i].name + ", " + contents[i].data + "</li>"
            );
        }
    });

    $('#saveAll').click(function () {

        var toPost = { title: "someTitle", contents: contents };

        $.ajax({
                url: '/Home/SaveNew',
                type: 'POST',
                data: JSON.stringify(toPost),
                dataType: 'json',
                contentType: 'application/json; charset=utf-8',
                success: function (data, textStatus, jqXHR) {
                    alert("win");
                },
                error: function (objAJAXRequest, strError) {
                    alert("fail");
                }
            });
    });

});
</script> 
```

这不是一个糟糕的解决方案或任何东西，我只是不想每次我想保存一个新对象时都必须实现 Javascript 调用，而是在其他任何地方使用标准的 Razr 代码。我希望全面保持一致。

有没有其他人遇到过这个问题并找到了解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T13:35:56.850

阅读这篇文章：

[http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)

然后读这个：

[http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)

这些文章适用于 MVC2，但适用于 3 和 4。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-26T20:03:41.877

我最近发现自己需要完成同样的任务，并且和你一样，不想添加一堆 javascript。我正在使用 MVC4，据我所知，似乎没有一种开箱即用的方法可以将模型的可枚举属性绑定到视图。:(

但是，正如您在问题中所展示的，**可以**从视图中的模型中检索可枚举属性。诀窍就是将更新返回给控制器。离开您的示例模型，您的视图可能如下所示（您不需要制作部分模型）：

```
@model MVCComplexObjects.Models.ComplexObject

<p>
@Html.ActionLink("Create New", "Create")
</p>

@using (Html.BeginForm("SaveNew", "Home", FormMethod.Post))
{
    <table>

        <tr>
            <th>
                @Html.DisplayNameFor(model => model.contents[0].name)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.contents[0].data)
            </th>
            <th></th>
        </tr>

        @for (int i = 0; i < Model.contents.Count; i++)
        {
            <tr>
                <td>
                    @Html.TextBox("updatedContents["+i+"].name", Model.contents[i].name)
                </td>
                <td>
                    @Html.TextBox("updatedContents["+i+"].data", Model.contents[i].data)
                </td>
                <td>
                    @* Got rid of the edit and detail links here because this form can now act as both *@
                    @Html.ActionLink("Delete", "Delete", new { /* id=item.PrimaryKey */ })
                </td>
            </tr> 
        }

    </table>

    <input type="submit" value="Save" />
} 
```

您的控制器操作如下所示：

```
[HttpPost]
public ActionResult SaveNew(ICollection<ContainedObject> updatedContents)
{
    foreach (var co in updatedContents)
    {
        //Update the contained object...
    }

    return RedirectToAction("Index");
} 
```

基本上，我们在视图中定义了一个新的集合对象，以便 MVC 在表单提交时传递给您的操作方法。新对象（本例中为“updatedContents”）与在 ComplexObject 模型中定义和填充的列表属性（本例中为“contents”）基本相同。

这需要更多的工作，但确实实现了不需要任何 javascript 来回发的目标。一切都可以用标准的 MVC 来完成。

# java - 压缩 SHA-256 哈希

> ID：12974964
> 
> 赞同：4
> 
> 时间：2012-10-19T13:09:16.963
> 
> 标签：java, serialization, sha

我想自动生成 Java 的 serialVersionUID（很长，或 64 位）。要序列化的对象的区别是由大约 20 个整数决定的，但并不总是 20 个整数。我打算将整数转换为逗号分隔的数字字符串，并通过 SHA-256 哈希函数运行它。

由于 SHA-256 的长度为 32 字节（256 位），并且我需要它来适应 serialVersionUID（64 位），我如何将其转换为 64 位值并最大限度地减少良好哈希特性的损失？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T13:13:55.820

只需切断多余的部分。没有必要使事情复杂化。如果有一种更好的方法来获取第一个（或任何其他）64 位，那么哈希首先会被破坏。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T13:58:31.067

首先，你不可能在正常意义上压缩一个好的散列。压缩是关于减少冗余的可逆编码。在一个好的散列中不应该有冗余来减少，因此压缩将是无效的。

> 由于 SHA-256 的长度为 32 字节（256 位），并且我需要它来适应 serialVersionUID（64 位），我如何将其转换为 64 位值并最大限度地减少良好哈希特性的损失？

那么这些好的特性是什么？好的散列的主要特征是反转它是不切实际的。即，计算出导致散列的可能输入是不切实际的。一个相关的特征是，给定一个产生给定哈希的已知输入，产生另一个给出相同哈希的输入（即冲突）是不切实际的。

现在，当您从 256 位散列到 64 位散列时，您可以*更轻松*地反转散列或产生散列冲突……通过蛮力。基本上，64 位散列意味着`2^64`任何随机输入都有一个给定散列的机会。这个概率足够大，以至于一些拥有足够核心的“坏人”有足够大的成功机会（在合理的时间内）使蛮力成为一个合理的选择。

但这真的重要吗？有人会通过创建一个冲突的 serialVersion 字符串来实现什么？这些字符串不是秘密，它们不会告诉你任何关于对象 API 的明确信息......

底线是，如果这些简化的散列被用作 serialVersion 字符串被设计使用，那么（例如）仅使用 SHA-256 散列的前 64 位不会有任何问题。不需要 XOR 或校验和或进行任何其他更复杂的转换。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T13:16:04.207

您可以计算 SHA-256 摘要的循环冗余校验 (CRC)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T13:11:13.200

我会说要么使用 64 位校验和，或者如果你想坚持使用 SHA，那么对 64 位块进行异或。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-29T13:30:18.100

用ripemd-160 对其进行哈希处理。

例如，

```
4727c1278432c388eea822904f008468c02fd543fc347391d1f2b9918ec9b5b9 
```

变成

```
069e298ee9d1b14e7774434624703c0be1a47ee1 
```

即 66 个字符，减少到 40 个。

# security - Appropriate usage of tokens in a claims based security model?

> ID：12974966
> 
> 赞同：0
> 
> 时间：2012-10-19T13:09:24.063
> 
> 标签：security, wif, claims-based-identity

i'm new to claims based security. I understand the premise but have some questions regarding the token.

From what I understand, the token will carry all of the claims for a given user, and that different systems will use different claims to determine authorization to a system. On this point I have several questions;

1) Does this mean that the STS is aware of all claims for all systems? Does this not mean the token could become gargantuan in size? Or does the token only carry the claims as needed by the relying party requesting the authentication?

2) Should claims be leveraged to determine fine grained access to a system, or are relying parties expected to maintain a separate means of tracking permissions?

I have a system with 100's of different user permissions. In trying to move to a claims based solution, the missing piece for me is, are all of the permissions meant to be managed by the STS and provided in the token? Or, do I use the token to authenticate the user, then manage permissions myself? Or perhaps some inbetween?

Help and guidance would be appreciated!

Kind regards TheMistry

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T06:45:42.460

1) 使用 ADFS，每个 RP 单独配置一组声明。因此，用户只会获得该 RP 的声明。

2) / 3) 这是一个灰色区域。您可以将所有权限移至声明中。ADFS 允许来自 AD/LDAP/SQL Server 的声明。ADFS 还允许您将 AD 属性映射到角色。我通常做的是将所有基于角色的东西作为声明传递，这样 RP 就可以有像“IsInRole()”这样的代码，但其余的留给 RP 来处理。

# c# - Sorting array of string arrays

> ID：12974967
> 
> 赞同：0
> 
> 时间：2012-10-19T13:09:24.580
> 
> 标签：c#, asp.net, string, sorting

I am sending a ArrayList as below from a web service call :

private ArrayList testList = new ArrayList();

Which will store values like :

```
"xyz (pound) (4545)"
"abc (in)    (346)"
"def (off)   (42424)" 
```

I use this because of two reasons :

**1 : I have to fetch this value in ASP.NET 1.1 framework.**

**2 : I use testList.Sort(); before sending.**

But now I want to send these values as :

```
"xyz"   "pound"  "4545"
"abc"  "in"    "346"
"def"   "off" "42424" 
```

So I found a way as below :

```
string[][] data = { new string[]{"xyz", "pound", "4545"},
                    new string[]{"abc", "in", "346"}, 
                    new string[]{"def", "off", "42424"}}; 
```

**Question is : How can I sort it effectively?? OR Is there a better way to address this ?**

Sort will be done based on first element :

```
abc
def
xyz 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T13:15:54.653

您写道，您必须在 ASP 1.1 中*读取*此值，因此我假设您在*发送*端有一个更现代的 .NET 框架版本。

如果是这种情况，您可以使用Framework 3.5 或更高版本中包含的 LINQ的[OrderBy方法：](http://msdn.microsoft.com/en-us/library/bb534966.aspx)

```
string[][] data = { new string[] { "xyz", "pound", "4545" }, 
                    new string[] { "abc", "in", "346" }, 
                    new string[] { "def", "off", "42424" } };
data = data.OrderBy(entry => entry[0]).ToArray();  // sorts by first field 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T13:15:09.470

只需按数组中的第一项对内部数组进行排序

```
string[][] sorted = data.OrderBy(array => array[0]).ToArray(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-31T14:52:36.970

仅当我们尝试比较字符串的第一个字母时，接受的答案才是正确的。我有类似的问题并且要获得准确的排序，您需要按整个字符串排序，而不仅仅是第一个字符。

`data = data.OrderBy(entry => entry).ToArray(); // sorts by first field`

# c# - Allow access to but prevent instantiation of a nested class by external classes

> ID：12974969
> 
> 赞同：9
> 
> 时间：2012-10-19T13:09:30.553
> 
> 标签：c#, encapsulation, inner-classes, nested-class

I'm looking to define a nested class that is accessible to the container class and external classes, but I want to control instantiation of the nested class, such that only instances of the container class can create new instances of the nested class.

The proceeding code should hopefully demonstrate this:

```
public class Container
{
    public class Nested
    {
        public Nested() { }
    }

    public Nested CreateNested()
    {
        return new Nested();  // Allow
    }
}

class External
{
    static void Main(string[] args)
    {
        Container containerObj = new Container();
        Container.Nested nestedObj;

        nestedObj = new Container.Nested();       // Prevent
        nestedObj = containerObj.CreateNested();  // Allow

    }
} 
```

`Nested` must be public in order for it to be accessible by `External`. I tried making the constructor for `Nested` protected, however that prevents `Container` from creating instances, as `Container` isn't a base class of `Nested`. I could set the constructor for `Nested` to `internal`, but I'm looking to prevent access to the constructor by all external classes, including those in the same assembly. Is there a way to do this?

If this cannot be achieved through access modifiers, I wonder if I could throw an exception within `Nested()`. However, I don't know how to test for the context within which `new Nested()` is called.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-19T13:16:26.233

通过接口进行抽象怎么样？

```
public class Container
{
    public interface INested
    {
        /* members here */
    }
    private class Nested : INested
    {
        public Nested() { }
    }

    public INested CreateNested()
    {
        return new Nested();  // Allow
    }
}

class External
{
    static void Main(string[] args)
    {
        Container containerObj = new Container();
        Container.INested nestedObj;

        nestedObj = new Container.Nested();       // Prevent
        nestedObj = containerObj.CreateNested();  // Allow

    }
} 
```

你也可以用抽象基类做同样的事情：

```
public class Container
{
    public abstract class Nested { }
    private class NestedImpl : Nested { }
    public Nested CreateNested()
    {
        return new NestedImpl();  // Allow
    }
}

class External
{
    static void Main(string[] args)
    {
        Container containerObj = new Container();
        Container.Nested nestedObj;

        nestedObj = new Container.Nested();       // Prevent
        nestedObj = containerObj.CreateNested();  // Allow

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T13:16:58.060

以这种方式声明类是不可能的。我认为对您来说最好的方法是将类声明为私有并通过公共接口公开它：

```
class Program
{
    static void Main(string[] args)
    {
       // new S.N(); does not work
        var n = new S().Create();
    }
}

class S
{
    public interface IN
    {
        int MyProperty { get; set; }
    }
    class N : IN
    {
        public int MyProperty { get; set; }
        public N()
        {

        }
    }

    public IN Create()
    {
        return new N();
    }
} 
```

# url - Large querystring compression

> ID：12974973
> 
> 赞同：2
> 
> 时间：2012-10-19T13:09:39.810
> 
> 标签：url, compression, xor, data-compression, querystringparameter

> **Possible Duplicate:**
> [How to compress/decompress a long query string in PHP?](https://stackoverflow.com/questions/2996049/how-to-compress-decompress-a-long-query-string-in-php)

I have a huge amount of data inside my subquerystring for tracking needs.

I loose a lot of my data because of this too large url missinterpreted by clients or search engine or brower capability.

To avoid this problematics, I've decided to compress my querystrings into a smaller one. I've looked into the direction of xor, huffman, lzw & gzdeflate compression algorithm but I'm not satisfied for my url needs (I need to url encode after that...).

*Questions :*

*   Do you know any other algorythm which can fullfill my needs ?
*   Do you know which compression technics is the most efficient ?

*More details:*

*   No Post/Session method possible.
*   Every alphanumeric char can be inside the query string.
*   I have around 30 parameters to compress

# extjs - ExtJS - 依赖组合框

> ID：12974974
> 
> 赞同：0
> 
> 时间：2012-10-19T13:09:40.303
> 
> 标签：extjs, combobox, loaddata

我的依赖组合框中的 loadData() 函数有问题。我正在做一张桌子，我可以在其中创建快捷方式并对其进行修改。

尝试修改快捷方式并将“Tab con URL”传递给“Tab con Info de sistema”时会出现问题。当我选择 id="sistemas" 的组合时，在 loadData 函数中检测到错误。没有数据加载给我带来了商店中的 GetMenu 功能。返回 GetMenu 函数的数据不会加载到存储中。

我不知道为什么。这是我的代码，有人可以帮我吗？

店铺：

```
var cmb_menu = new Ext.data.SimpleStore({
            fields : ['id', 'menu'],
            data   : menu
            }); 
```

代码：

```
 {
      xtype    : "radio",
      boxLabel : "Tab con Info de sistema",
      value    : "oneway",
      tabIndex : 1,
      id       :'IdCheck',
      name     : "rt_rt_radiobutton",
      listeners: {
      check: function(){
        Ext.getCmp("sistemas").enable();
        Ext.getCmp("iconUrl").disable();
        }
      }
   },  

    {
      xtype:"radio",
      boxLabel:"Tab con URL",
      value:"twoway",
      id: 'idCheckedUrl',
      tabIndex:1,
      name:"rt_rt_radiobutton",
      listeners: {
          check: function (ctl, val) { 
                if(val){
                    Ext.getCmp("iconUrl").enable();
                    Ext.getCmp("sistemas").disable();
                    Ext.getCmp("sistemas").clearValue();
                    Ext.getCmp("menus").clearValue();
                    Ext.getCmp("items").clearValue();
                    Ext.getCmp("subMenu").clearValue();
                    Ext.getCmp("menus").disable();
                    Ext.getCmp("items").disable();
                    Ext.getCmp("subMenu").disable();
                        }
                         }
                    }
     },
    {
     xtype        : 'combo',
     store        : cmb_sistemas,
     hiddenName   : 'id_sistema',
     allowBlank   : false, 
     value       : sistemId,
     mode         : 'local',
     fieldLabel   : 'Sistemas',
     disabled     : true,
     name         : 'sistemas',
     id           : 'sistemas',
     anchor       : '90%',
     displayField : 'sistema',
     triggerAction: 'all',  //rdiaz
     emptyText    : 'Seleccione un sistema',//rdiaz
     editable     : false, //rdiaz
     valueField   : 'id',
     listeners    : {
        select: function (){
            idSistema = this.getValue();
                nombreSistema= this.getRawValue();
                var menu = Ext.getCmp("menus");
                iMenu = getMenu(idSistema);
                //menu.store.clear();
                menu.store.loadData(iMenu, true);
                menu.enable();
                var items = Ext.getCmp("items");    
                //menu.clearValue();    
                //menu.store.removeAll();//rdiaz        
                items.clearValue();
                items.disable();
                var subMenues= Ext.getCmp("subMenu");   
                subMenues.clearValue();
                subMenues.disable();
                }                                            
            }
    },
    {
    xtype        : 'combo',
    store        : cmb_menu,
    hiddenName   : 'id',
    valueField   : 'id',
    value        : menuID, 
    mode         : 'local',
    allowBlank   : false,
    fieldLabel   : 'menu',
    disabled     : true,
    triggerAction: 'all',//rdiaz
    emptyText    : 'Seleccione un menu',//rdiaz
    editable     : false, //rdiaz
    name         : 'menus',
    id           : 'menus',
    anchor       : '90%',
    displayField : 'menu',
    listeners    : {
        select: function () {                                           
                                                        selectedMenu = this.getValue();
            Ext.getCmp("subMenu").clearValue(); 
            //alert(selectedMenu);
            idSistema = Ext.getCmp("sistemas").getValue();  
            mItems    = getItemsMenu(selectedMenu, idSistema);
            if($.trim(selectedMenu) == "000060000000010000"){
                var subMenues= Ext.getCmp("subMenu");   
                subMenues.store.loadData(mItems);
                subMenues.enable();
                var items    = Ext.getCmp("items");
                items.clearValue();
                items.enable();
                }else{
                    var subMenues= Ext.getCmp("subMenu");   
                    subMenues.store.loadData(mItems);
                    subMenues.disable();
                    var items    = Ext.getCmp("items"); 
                    //alert(mItems);
                    items.store.loadData(mItems);
                    items.clearValue();
                    items.enable();
                                                            }
                                                        }

        } 
```

},

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T21:05:42.830

存储加载方法是异步的，这意味着 loadData 之后的代码会立即执行，但数据尚未加载。您需要在 loadData 的回调中执行其余逻辑，或者在加载事件侦听器中单独执行。

# php - 通过使用 ajax 的 PHP 从 DB 中获取数据来预选选项

> ID：12974975
> 
> 赞同：0
> 
> 时间：2012-10-19T13:09:42.813
> 
> 标签：php, javascript, jquery

我有一个选择标签，其中选项值来自使用 ajax 的 PHP 数据库。先前选择的值保存在 DB 中。

我想显示一个显示先前选择的值（保存在数据库中）的选择。

这是 HTML 代码

```
<select id='country'></select> 
```

这是 JS 代码（ajax 获取所有国家/地区列表）

```
$.ajax({
    url: 'country.php',
    scriptCharset: 'ANSI',              
    success:function(result) {
        $('#country').append(result);
    }
}); 
```

假设我想向国家显示哪个值为 27，我该如何实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T13:12:50.223

```
$.ajax({
url:"country.php",              
scriptCharset: 'ANSI' ,             
success:function(result){       
    $('#country').append(result);

    // Have you tried add this???
    $('#country').val(27);

   }
}); 
```

@谢谢拉胡尔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T13:13:16.950

用选项再做一次选择，在js中你可以使用onchange重新加载国家列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T13:26:15.177

$.ajax({
url:"country.php",
scriptCharset: 'ANSI' ,
success:function(result){
`$`('#country').append(result);
`$`('#country').val(VALUE);
} });

# c# - 在 asp.net & c# 中的 Listview 中加载嵌套的 XML 数据

> ID：12974976
> 
> 赞同：0
> 
> 时间：2012-10-19T13:09:47.023
> 
> 标签：c#, asp.net, xml, listview, xml-serialization

**XML 文件**

```
<?xml version="1.0" encoding="utf-8"?>
<Eticket>
    <BookingRef>17313</BookingRef>
    <CompID>HA</CompID>
    <DecimalPreference>2</DecimalPreference>
    <AttachGDSRules>False</AttachGDSRules>
    <FareDetails>
        <BaseFare>1440</BaseFare>
        <Fees>0</Fees>
    </FareDetails>
    <ClientInfo>
        <Client>xyz abc</Client>
        <Address>70 pqrlane</Address>
    </ClientInfo>
</Eticket> 
```

**ASPX**

```
<asp:XmlDataSource ID="XmlDataSource1" runat="server" DataFile="~/temp/temp.xml"></asp:XmlDataSource>
<asp:ListView ID="ListView1" runat="server" DataSourceID = "XmlDataSource1">
    <LayoutTemplate>
        <div id="ItemPlaceholderContainer" runat="server">
            <span id="ItemPlaceholder" runat="server"></span>
        </div>
    </LayoutTemplate>
    <ItemTemplate>
        <div class="Eticket">
            <asp:Label ID="BookingRef" runat="server" datasrc="#text" Text='<%#XPath("BookingRef") %>'></asp:Label>
            <asp:Label ID="CompID" runat="server" Text='<%#XPath("CompID") %>'></asp:Label>
            <asp:Label ID="DecimalPreference" runat="server" Text='<%#XPath("DecimalPreference") %>'></asp:Label>
            <asp:Label ID="BaseFare" runat="server" Text='<%#XPath("BaseFare") %>'></asp:Label>
            <asp:Label ID="Client" runat="server" Text='<%#XPath("Client") %>'></asp:Label>
            <asp:Label ID="Address" runat="server" Text='<%#XPath("Address") %>'></asp:Label>                    
        </div>
    </ItemTemplate>
</asp:ListView> 
```

以上数据只返回子值，即

预期输出为：

```
17313  HA  2  1440  xyz  abc  70 pqrlane 
```

我得到的实际输出是：

```
1440 xyz abc 70 pqrlane 
```

请让我知道我哪里出错了。
如果需要更多详细信息，希望这些信息就足够了。
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T14:16:21.387

我无法对此进行测试，但我想`XmlDataSource`假设您有一个包含一个或多个实体的根元素。您的 XML 文件在根目录中仅包含一个实体。

*   用另一个元素包装 xml 文件：

    ```
    <?xml version="1.0" encoding="utf-8"?>
    <Etickets>
        <Eticket>
            ...
        </Eticket>
    </Etickets> 
    ```

*   或在以下位置指定 XPath 属性`XmlDataSource`：

    ```
    <asp:XmlDataSource ID="XmlDataSource1" runat="server"
        DataFile="~/temp/temp.xml" XPath="/" /> 
    ```

# java - 使用 ObjectInputStream 读入的对象在 try-catch 块后未保留值

> ID：12974983
> 
> 赞同：2
> 
> 时间：2012-10-19T13:10:09.180
> 
> 标签：java

所以我将一个 Car 对象数组写到一个文件中。然后，当我尝试在汽车变量中读回它们时，我会在语句中设置`cars = (Car[])in.readObject();`。但是，当我使用调试器逐步完成它时，一旦我退出 try-catch 块，汽车变量就会“取消设置”。

```
Car[] cars;
try {
    ObjectInputStream in = new ObjectInputStream(new FileInputStream(filename)));
    cars = (Car[])in.readObject();
    in.close();
} catch (FileNotFoundException e) {
    e.printStackTrace();
} catch (IOException e) {
    e.printStackTrace();
} catch (ClassNotFoundException e) {
    e.printStackTrace();
} 
```

另一方面，如果我初始化汽车变量，例如初始化为一个空数组，汽车变量在 try-catch 块之后保持设置。

```
Car[] cars = new Car[0];
try {
    ObjectInputStream in = new ObjectInputStream(new FileInputStream(filename)));
    cars = (Car[])in.readObject();
    in.close();
} catch (FileNotFoundException e) {
    e.printStackTrace();
} catch (IOException e) {
    e.printStackTrace();
} catch (ClassNotFoundException e) {
    e.printStackTrace();
} 
```

那么为什么汽车变量只保留对我用 in.readObject 读取的 Car[] 的引用，前提是我事先对其进行了初始化？我不明白为什么无论我是否初始化汽车都会有任何区别......无论哪种方式，它都会在 try-catch 块中获取读取 Car[] 对象的引用。

似乎正在发生一些延迟初始化......虚拟机只是在 try catch 块中为汽车对象声明空间，因此当它退出块时它超出范围......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T13:13:19.117

它不会“未设置”-但您将无法在第一个示例中的块之后*读取*`cars`in code的值`try/catch`，因为它不是*明确分配*的。（如果您尝试这样做，您将得到一个编译时错误。）如果在`try`块的前两个语句中的任何一个中引发异常，则不会为其分配任何值。

*您可以通过不*只是盲目地捕获异常并在打印堆栈跟踪后继续来解决此问题：

*   仅捕获您感兴趣的特定异常。`catch (Exception e)`几乎*总是*一个坏主意
*   您不一定需要捕获任何东西-您的方法实际上可以*处理*异常吗？如果没有，只需声明它可能会被抛出。你总是可以抓住并重新抛出它。
*   如果你*真的*可以处理它，也许你实际上应该*在 catch 块中分配一个默认值*

如果您遵循这些要点（重新抛出、让它冒泡或分配适当的值），那么变量将被确定分配，一切都会好起来的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T13:16:28.420

我将尝试用一个例子来解释它。以下代码不可编译：

```
public static void main(String[] args)
{
    String something;
    try {
        something = "123"; 
    } catch (Exception e) {

    }
    System.out.println(something);
} 
```

另一方面，下一个片段是可编译的。但是调试器不会向您显示块`something`外部的值，`try`因为如果不初始化（上面的编译错误）引用它是不合法的。

```
public static void main(String[] args)
{
    String something;
    try {
        something = "123"; 
    } catch (Exception e) {

    }

    String somethingelse ="456";
    System.out.println(somethingelse);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T13:13:26.550

只要到达代码中的某个点，该点超出了 var 的最后一次使用，该变量就可以在运行时合法地“取消设置”。这种优化是由 HotSpot 例行完成的，有时它可以节省大量内存，甚至可以防止`OutOfMemoryError`. 但是，这可能不会在调试会话中发生。

在编译时，静态分析器可以确定您的 var 的范围可以缩小到仅在 try 块内，并像在 try 内实际声明 var 一样进行编译。这将准确解释为什么您在两个代码示例之间看到不同的行为：在第二个示例中，缩小范围是不可能的，因为您在外部范围内分配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T13:23:07.633

在第一种情况下，您必须得到一个编译时错误`Object not initialized`。

这是在 Java 中创建数组时发生的情况。

String[] 花色 = { "俱乐部", "钻石", "红心", "黑桃" };

![在此处输入图像描述](../Images/c7d83bbfccedb9a6288aaa0a8afb3881.png)

这适用于所有对象数组。现在，在您的情况下，您已经创建了`cars`将引用数组的数组，您正在 try catch 块中执行此操作。

来源[链接](http://www.oopweb.com/Java/Documents/ThinkCSJav/Volume/chap11.htm)

# android - Android - 画布drawBitmap和不同的分辨率？

> ID：12974988
> 
> 赞同：2
> 
> 时间：2012-10-19T13:10:32.580
> 
> 标签：android, canvas, resolution, density-independent-pixel, drawbitmap

例如，我在画布上绘制两个位图时遇到了这个问题（它用于动态壁纸）。问题是前面的小位图应该正好放在背景位图的正确位置。当然，它在模拟器上看起来不错（比如说 480x800 分辨率）。但是当我在我的手机（800x1280 res）上查看它时，它不适合正确的位置。

我试过使用thise：

```
 int pixel = 120;
final float scale = getResources().getDisplayMetrics().density;
int dip = (int) (pixel* scale + 0.5f); 
```

而不是硬像素，但它也没有什么好处。下面是整个类的代码：

```
public class DemoWallpaperService extends WallpaperService {

@Override
public Engine onCreateEngine() {
    return new DemoWallpaperEngine();
}

private class DemoWallpaperEngine extends Engine {
    private boolean mVisible = false;
    private final Handler mHandler = new Handler();

     int x=0,y=0,a=255,i=-1, a1=255, i1=-1;
     float r=0,rs=1;
     float rx1=10, rxs=-1;

     private Matrix mMatrix = new Matrix();
     private Matrix mMatrix1 = new Matrix();
     private Matrix mMatrixRotate1 = new Matrix();
     private Matrix mMatrixRotate2 = new Matrix();

     public Bitmap spaceShip = BitmapFactory.decodeResource(getResources(), R.drawable.spaceship);
     public Bitmap background= BitmapFactory.decodeResource(getResources(), R.drawable.back2short2j);
     public Bitmap wyspa= BitmapFactory.decodeResource(getResources(), R.drawable.wyspa22g);
     public Bitmap ksiezyc = BitmapFactory.decodeResource(getResources(), R.drawable.ksiezyc);
     public Bitmap reflektorfront= BitmapFactory.decodeResource(getResources(), R.drawable.reflektorwyspa);

     private float mPixels;
     private float mPixels1;

    private final Runnable mUpdateDisplay = new Runnable() {
    @Override
    public void run() {
        draw();
    }};

    private void draw() {
       SurfaceHolder holder = getSurfaceHolder();
       Canvas c = null;

       Display d = ((WindowManager)getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay();
       int wx= d.getWidth();
       int wy= d.getHeight();

       try {
           Runtime.getRuntime().gc();
          c = holder.lockCanvas();
          c.save();

          if (c != null) {

              Paint paintMoon = new Paint();

              if(a1<=15){
                  i1=1;
              }
              else if(a1>=255){
                  i1=-1;
              }
              a1+=5*i1;
              paintMoon.setAlpha(a1);

              c.translate((float)mPixels, 0f);
              c.drawBitmap(background, mMatrix, null);
              c.drawBitmap(ksiezyc, 1027*wx/480,15*wy/800, paintMoon);

              if(rx1<=-15){
                  rxs=1;
              }
              else if(rx1>=15){
                  rxs=-1;
              }
              rx1+=rxs*0.7;

              c.translate((float)mPixels1, 0f);
              //reflektor wyspa back
              mMatrixRotate2.setTranslate(340*wx/480,300*wy/800);
              mMatrixRotate2.preRotate(rx1,reflektorfront.getWidth()/2,20);
              c.drawBitmap(reflektorfront, mMatrixRotate2, null);

              c.drawBitmap(wyspa, mMatrix1, null);

              if(r<=-15){
                  rs=1;
              }
              else if(r>=15){
                  rs=-1;
              }
              r+=rs*0.5;

              mMatrixRotate1.setTranslate(160*wx/480,380*wy/800);

              mMatrixRotate1.preRotate(r,reflektorfront.getWidth()/2,20);

              c.drawBitmap(reflektorfront, mMatrixRotate1, null);

              if(x<c.getWidth()){
              x+=3;}
              else{x=0;}
              if(y<c.getHeight()){
              y+=3;}
              else{y=0;}
              Paint paint = new Paint();

              if(a<=5){
                  i=1;
              }
              else if(a>=255){
                  i=-1;
              }
              a+=10*i;
              paint.setAlpha(a);

              c.drawBitmap(spaceShip,x,y,paint);

                 c.restore();

          }
       } finally {
          if (c != null)
             holder.unlockCanvasAndPost(c);
       }
       mHandler.removeCallbacks(mUpdateDisplay);
       if (mVisible) {
           mHandler.postDelayed(mUpdateDisplay, 10);
       }
    }
    @Override
    public void onOffsetsChanged(float xOffset, float yOffset,
             float xStep, float yStep, int xPixels, int yPixels){

        super.onOffsetsChanged(xOffset, yOffset, xStep, yStep, xPixels, yPixels);                   
         mPixels = xPixels*7/4;

         mPixels1 = 500+xPixels;

            draw();
    }

    @Override
    public void onVisibilityChanged(boolean visible) {
        mVisible = visible;
        if (visible) {
            draw();
        } else {
            mHandler.removeCallbacks(mUpdateDisplay);
        }
    }

     @Override
      public void onSurfaceChanged(SurfaceHolder holder, int format, int width, int height) {

         super.onSurfaceChanged(holder, format, width, height);

         float w = background.getWidth();
         float h = background.getHeight();
         float s = height / (float)h;
         float z = height / (float)h;
         mMatrix.reset();
         mMatrix1.reset();
         mMatrixRotate1.reset();
         mMatrixRotate2.reset();

         mMatrix.setScale(s, s);
         mMatrix1.setScale(z, z);
         mMatrixRotate1.setScale(s, s);

         draw();
      }

    @Override
    public void onSurfaceDestroyed(SurfaceHolder holder) {
        super.onSurfaceDestroyed(holder);
        mVisible = false;
        mHandler.removeCallbacks(mUpdateDisplay);
    }

    @Override
     public void onCreate(SurfaceHolder surfaceHolder) {
         super.onCreate(surfaceHolder);

         setTouchEventsEnabled(false);
     }

    @Override
    public void onDestroy() {
         super.onDestroy();
         mVisible = false;
         mHandler.removeCallbacks(mUpdateDisplay);
    }
} 
```

所以如果可以的话，请帮助任何人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T13:40:48.240

用于`ViewTreeObserver`测量视图/屏幕尺寸并将位图与结果坐标一起放置。

这是一个测量布局宽度和高度的示例代码

```
final RelativeLayout mainLayout = (RelativeLayout) findViewById(R.id.main_layout);
        ViewTreeObserver vto = mainLayout.getViewTreeObserver();
        vto.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
            @Override
            public void onGlobalLayout() {
                final int viewWidth = mainLayout.getMeasuredWidth();
                final int viewHeight = mainLayout.getMeasuredHeight();
                if (Constants.LOG_ENABLED) {
                    Log.i(TAG, "Width: " + viewWidth);
                    Log.i(TAG, "Height: " + viewHeight);
                }
                /**
                 * Delete tree observer
                 */
                ViewTreeObserver obs = mainLayout.getViewTreeObserver();
                obs.removeGlobalOnLayoutListener(this);

}
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-29T05:46:27.760

1.  获取密度

    ```
    DisplayMetrics metrics;
    metrics = new DisplayMetrics();
    metrics = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(metrics);
    float density = metrics.density; 
    ```

2.  像这样申请

    ```
    Canvas canvas = new Canvas(bitmap);
    canvas.drawBitmap(ksiezyc, density * wx,density * wy, paintMoon); 
    ```

# asp.net - 如何通过 asp:SqlDataSource 将 Request.Querystring 作为参数传递给存储过程

> ID：12974990
> 
> 赞同：1
> 
> 时间：2012-10-19T13:10:39.383
> 
> 标签：asp.net, sqldatasource

我有一个存储过程，它需要一个案例文件 ID 来查找和返回我需要的数据。我有一个下拉列表，其中有`asp:SqlDataSource`一个调用存储过程的下拉列表。但我不知道/不确定如何将查询字符串传递给`<SelectParameters>`SqlDataSource。在我后面的代码中，我可以查询案例文件 ID`Request.QueryString["fileID"].ToString()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T13:20:58.477

您应该能够将 QueryStringParameter 的元素添加到 SqlDataSource 的 SelectParameters 集合中。

```
 <SelectParameters>
      <asp:QueryStringParameter Name="fileID" QueryStringField="fileID" />
 </SelectParameters> 
```

# android - 动态添加按钮事件监听器

> ID：12974991
> 
> 赞同：1
> 
> 时间：2012-10-19T13:10:43.937
> 
> 标签：android, database, sqlite, dynamic, event-listener

我有代码，我需要获取数据的 ArrayList（从 SQLite 数据库返回）并通过下面的代码将其转换为表。我想知道的是如何将 clickListener 添加到我动态添加到表中的按钮中？基本上，它会将行中某一列的值添加到我在其他地方访问的 SharedPreference 变量中。

如果需要更多信息，请告诉我，但我认为这是有道理的。

```
DatabaseHandler db = new DatabaseHandler(TabFragment3.this.getActivity());
List<FoodPoints> foodpoints = db.getAllFoodPoints();

    for (FoodPoints fp : foodpoints) {
        String listFood = fp.getFood();
        String listPoints = Integer.toString(fp.getPoints());
        String listDate = fp.getDate();

        listDate = listDate.substring(0, 12);

        insertRow(tablePoints, listFood, listPoints, listDate);
        // String log = "ID: " + fp.getID() + ", Food: " + fp.getFood() + ", Points: " + fp.getPoints() + ", Date: " + fp.getDate();
        // Log.d("FoodPoints", log);
    }

private void insertRow(TableLayout tablePoints, String tblFoodName, String tblFoodPoints, String tblFoodDate) {
    final TableRow newrow = new TableRow(currentActivity);

     addPlusButtonPointsTable(newrow);
    addTexttoRowswithValues(newrow, tblFoodName, 3);
    addTexttoRowswithValues(newrow, tblFoodPoints, 17);
    addTexttoRowswithValues(newrow, tblFoodDate, 17);
    tablePoints.addView(newrow);
}

...

private void addPlusButtonPointsTable(TableRow newrow) {
    Button plusButton = new Button(currentActivity);
    //plusButton.setBackgroundColor(R.drawable.);
    plusButton.setText("+");
    plusButton.setMinimumWidth(1);
    plusButton.setMinimumHeight(1);
    plusButton.setTextSize(14);

    newrow.addView(plusButton);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T13:24:46.043

您可以修改该`addPlusButtonPointsTable()`方法以获取在单击单击时您希望存储在首选项中的列的值（例如食物名称）`Button`（我认为这不是您想要的吗？），如下所示：

```
private void addPlusButtonPointsTable(TableRow newrow, String foodName) {
    // ...
    // set the data as the tag for the Button
    plusButton.setTag(foodName);
    plusButton.setOnClickListener(mListener);
    // ...
} 
```

这个方法会被这样调用：

```
addPlusButtonPointsTable(newrow, tblFoodName); 
```

`mListener`是这样的：

```
OnClickListener mListener = new OnCLickListener() {

     @Override
     public void onClick(View v) {
         String foodName = (String)v.getTag();
         // store the value.
     }
} 
```

我还建议您`LayoutParams` 在将视图添加到`TableRow`和时使用正确`TableRow` 的`TableLayout`.

将视图添加到`TableRow`：

```
newrow.addView(plusButton, new TableRow.LayoutParams(TableRow.LayoutParams.MATCH_PARENT, TableRow.LayoutParams.WRAP_CONTENT)); 
```

当添加`TableRow`到`TableLayout`：

```
tablePoints.addView(newrow, new Tablelayout.LayoutParams(Tablelayout.LayoutParams.MATCH_PARENT, Tablelayout.LayoutParams.WRAP_CONTENT)); 
```

如果您支持低于 2.2 的版本，请`FILL_PARENT`使用`MATCH_PARENT`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T13:17:17.513

在您的`addPlusButtonPointsTable()`方法中添加以下行：

```
plusButton.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        // do what you want
    }
}); 
```

# symfony - Symfony2 异常

> ID：12974992
> 
> 赞同：0
> 
> 时间：2012-10-19T13:10:47.963
> 
> 标签：symfony

我是 symfony2 的新手。我正在为“Hello {Name}”创建一个简单的页面并使用 WAMP。我的 routing.yml 如下

```
projectnew_bundle:
    resource: "@projectnew_bundle/Resources/config/routing.yml"
    type:     annotation
    prefix:   /start 
```

我的@projectnew_bundle/Resources/config/routing.yml 如下（projectnew_bundle 是 src 文件夹中 \project\new_bundle 的命名空间）：

```
projectnew_bundle_hello:
    pattern:  start/hello/{name}
    defaults: { _controller: projectnew_bundle:Start:hello } 
```

我还使用`"new project\new_bundle\projectnew_bundle()"`语法在 AppKernel.php 中注册了 bundle projectnew_bundle。我`\src\project\new_bundle\projectnew_bundle.php`的如下：

```
<?php

namespace project\new_bundle;

use Symfony\Component\HttpKernel\Bundle\Bundle;

class projectnew_bundle extends Bundle
{
} 
```

但是，当我尝试加载以下 URL 时：“ [http://localhost/symfony_project/Symfony/web/app_dev.php/start/hello/Riten](http://localhost/symfony_project/Symfony/web/app_dev.php/start/hello/Riten) ”，它给出了 500 内部服务器错误：

> 无法加载资源`"@projectnew_bundle/Resources/config/routing.yml"`。确保`"projectnew_bundle/Resources/config/routing.yml"`捆绑包已正确注册并加载到应用程序内核类中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T13:15:54.640

尝试从 routing.yml 中删除 type: 注释

编辑：

你的 app/cofig/routing.yml 有

```
projectnew_bundle:
    resource: "@projectnew_bundle/Resources/config/routing.yml"
    prefix:   /start 
```

*注意：我删除了`type: annotation`

`/start`因此，您在包含的任何路由上设置前缀`projectnew_bundle/Resources/config/routing.yml`

然后你`@projectnew_bundle/Resources/config/routing.yml`有：

```
projectnew_bundle_hello:
    pattern:  start/hello/{name}
    defaults: { _controller: projectnew_bundle:Start:hello } 
```

它使用从最终路由添加前缀`projectnew_bundle_hello`的模式创建路由，而不是您期望的那样。`start/hello/{name}``app/config/routing.yml``/startstart/hello/{name}``/start/hello/{name}`

如果您希望您的预期路线有效，您可以`start`从`@projectnew_bundle/Resources/config/routing.yml`.

该命令`php app/console router:debug`将向您显示您的路线实际上是什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-17T09:51:24.043

If you change to type: annotation you have to change the resource path to the controller path.

```
projectnew_bundle:
resource: "@projectnew_bundle/Controller"
type:     annotation
prefix:   /start 
```

# ios - 无法在 iOS 中打开/创建 SQLite 数据库

> ID：12974994
> 
> 赞同：2
> 
> 时间：2012-10-19T13:10:52.023
> 
> 标签：ios, objective-c, sqlite

我有 2 个文件 DatabaseViewController.h 文件

```
#import <UIKit/UIKit.h>
#import "sqlite3.h"

@interface DatabaseViewController : UIViewController
@property (weak, nonatomic) IBOutlet UILabel *status;
@property(strong,nonatomic) NSString *databasePath;
@property(nonatomic) sqlite3 *contactDb;

@end 
```

另一个 DatabaseViewController.m：

```
- (void)viewDidLoad
{

[super viewDidLoad];
NSString *docsDir;
NSArray *dirPaths;

// Get the documents directory

dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentationDirectory, NSUserDomainMask, YES);
docsDir = dirPaths[0];

//Buid the path for database file
_databasePath = [[NSString alloc]
                 initWithString:[docsDir stringByAppendingPathComponent:@"contacts.db"]];

NSFileManager *filemgr = [NSFileManager defaultManager];

if([filemgr fileExistsAtPath: _databasePath ] == NO)
{
    const char *db_path = [_databasePath UTF8String];

    if(sqlite3_open(db_path, &_contactDb) == SQLITE_OK)
    {
        char *errMsg;
        const char *sql_stmt =
        "CREATE TABLE IF NOT EXISTS CONTACTS (ID INTEGER PRIMARY KEY AUTOINCREMENT, NAME TEXT, ADDRESS TEXT, PHONE TEXT)";

        if (sqlite3_exec(_contactDb, sql_stmt, NULL, NULL, &errMsg) != SQLITE_OK)
        {
            _status.text = @"Failed to create table";
        }
        sqlite3_close(_contactDb);
    } else {

        _status.text = @"Failed to open/create database";
    }
}

} 
```

不幸的是，声明

```
if(sqlite3_open(db_path, &_contactDb) == SQLITE_OK) 
```

永远不会成功。

它只是路由到

```
 _status.text = @"Failed to open/create database"; 
```

问题是什么？

我确实将 libsqlite3.dylib 添加到项目中。我正在使用 Xcode 4.5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T13:46:00.120

的参考`NSDocumentationDirectory`应该是`NSDocumentDirectory`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T14:32:17.320

编辑：没关系 - 忘记 sqlite_open 如果它不存在也会创建数据库文件，问题只是错误的目录引用。

# javascript - html函数后的事件停止工作

> ID：12974997
> 
> 赞同：2
> 
> 时间：2012-10-19T13:10:56.823
> 
> 标签：javascript, html, jquery, client-side

问题是在 .html() jQuery 函数之后，按钮的事件停止了。这是一个例子 -

```
$(document).ready(function() {

    Create();

    $('body div input').click(function() {
       alert('Hello');
       Create();
    });

    function Create() {
       $('body').html('<div><input type="button" value="button" /></div>');
    }

}); 
```

在这里，我第一次单击按钮时该事件有效，但在再次调用 Create() 函数后，该事件将不再有效。

顺便说一句 - html 代码中的 body 标签是空白的，并且没有任何 CSS，所以这是一个 jQuery 问题。

JSFiddle - [http://jsfiddle.net/HVzcy/](http://jsfiddle.net/HVzcy/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T13:13:24.787

您可以使用函数 on() 而不是单击来解决它。 [http://api.jquery.com/on/](http://api.jquery.com/on/)

```
 $('body').on('click', 'div input', function() {
   alert('Hello');
   Create();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T13:14:21.050

这不是 jQuery 的问题，而是您建立事件处理程序的方式的问题。当您更新容器的内容时​​（`<body>`在本例中为 ），之前的所有内容以及绑定到它们的任何事件都将被丢弃。

您可以在元素本身使用事件委托`<body>`来防止处理程序丢失：

```
$('body').on('click', 'div input', function() {
  alert("hello");
}); 
```

这依赖于浏览器（有时在 jQuery 的帮助下）将事件向上传播到 DOM 树的事实。因此，通过将处理程序`<body>`与该选择器一起放置以过滤事件，您将能够随时处理`<input>`添加到正文的任何​​元素的“单击”事件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T13:16:02.690

**更新的答案**

jquery`delegate`可以帮助你

```
$(document).ready(function() {

   Create();

   $("body").delegate("div input", "click", function(){
      alert('Hello');
      Create();
   });

   function Create() {
      $('body').html('<div><input type="button" value="button" /></div>');
   }​

}); 
```

在这里你可以看到它

[http://jsfiddle.net/NjuJ2/1/](http://jsfiddle.net/NjuJ2/1/)