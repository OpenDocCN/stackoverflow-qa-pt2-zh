# StackOverflow 问答 15161000-15161999

# axis2 - AAR 档案可以包含已编译的类吗？

> ID：15161002
> 
> 赞同：0
> 
> 时间：2013-03-01T15:17:25.553
> 
> 标签：axis2

是否可以在 AAR 文件中编译类？

```
archive.aar
+-META-INF/ (wsdls + service.xml)
+-com/example/GeneratedArtifactFromWSDL.class 
```

我的问题是，如果archive.aar 在类路径上，不同类中的其他类是否可以使用这些生成的类。第二个问题，Axis 是否能够处理此类存档？或者是我生成 2 个档案的唯一方法 - 带有 wsdls 和 service.xml 的 aar 以及带有已编译类的 jar？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T17:05:13.587

在服务的 AAR 文件中包含特定于服务的编译类是正常的。它完全按照您的示例完成。当 Axis2 运行您的服务时，它提供了一个可以访问 AAR 内容的类加载器。

[这是](http://axis.apache.org/axis2/java/core/docs/quickstartguide.html#services)有关 AAR 文件布局的一些文档。

# asp.net-mvc-4 - 具有独立控制器和视图的 MVC 4 Partial

> ID：15161003
> 
> 赞同：5
> 
> 时间：2013-03-01T15:17:33.623
> 
> 标签：asp.net-mvc-4, controller, partial

我开发 ASP.NET Forms 已经有一段时间了，现在正在尝试学习 MVC，但是如何让它做我想做的事情并不完全有意义。也许我需要换个角度思考问题。这是我试图用一个虚构的例子做的事情：

目标 - 使用部分文件，该文件可以放置在网站上任何可以接受参数的地方。该参数将用于访问数据库并将结果模型传回视图。然后视图将显示一个或多个模型属性。

这不是我的代码，但显示了我正在尝试做的事情。

文件：控制器/UserController.cs

```
[ChildActionOnly]
public ActionResult DisplayUserName(string userId)
{
MyDataContext db = new MyDataContext()

var user = (from u in db.Users where u.UserId = userId select u).FirstOrDefault();

return PartialView(user);
} 
```

文件：Views/Shared/_DisplayUserName.cs

```
@model DataLibrary.Models.User

<h2>Your username is: @Model.UserName</h2> 
```

文件：Views/About/Index.cshtml

```
@{
    ViewBag.Title = "About";
}

<h2>About</h2>

{Insert Statement Here} 
```

我知道此时我需要渲染一个名为 DisplayUserName 的部分，但它如何知道要使用哪个视图以及如何将我的 userId 传递给部分？

我期望这是一个非常基本的问题，但我还没有找到涵盖此内容的教程。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T15:34:48.703

你应该调用 Html.Action 或 Html.RenderAction 像：

```
@Html.Action("DisplayUserName", "User", new {userId = "pass_user_id_from_somewhere"}); 
```

你的动作应该是这样的：

```
[ChildActionOnly]
public ActionResult DisplayUserName(string userId)
{
    MyDataContext db = new MyDataContext()

    var user = (from u in db.Users where u.UserId = userId select u).FirstOrDefault();

    return PartialView("_DisplayUserName", user);
} 
```

这应该可以解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-28T23:49:56.013

我总是确保关闭 MyDataContext ...也许将所有内容都包含在 using 语句中...如果您注意到 VS 为您执行此操作时，他们会在控制器类（控制器外部）中将实体创建为私有变量，然后使用 dispose 方法将其关闭...无论哪种方式，我相信您都需要确保释放这些资源以使事情顺利进行。我知道这不是问题，但我看到它看起来很脆弱。

# asp.net - gridview 无法识别受保护的财产

> ID：15161009
> 
> 赞同：0
> 
> 时间：2013-03-01T15:17:40.300
> 
> 标签：asp.net, .net, gridview

我有一个使用 asp.net 2.0/3.5 编写的 Web 表单应用程序。我正在将此应用程序升级到 Web 表单 4.5。我使用 vs 2012 创建了一个新项目，并正在创建新表单，然后从应用程序的早期版本复制/粘贴代码。我遇到了冲突，但已经解决了，除了以下内容。我有一个gridview，它在后面的代码中使用受保护的属性来确定它是否正在被编辑。我很困惑为什么这在 4.5 中不起作用。

```
 <asp:TemplateField HeaderText="Current Item Stock">
     <ItemTemplate>
          <asp:Label ID="lblTotalQty" runat="server" Text='<%# Eval("TotalQty") %>' 
           Visible="<%# Not CBool(IsInEditMode) %>" />
          <asp:TextBox ID="txtTotalQty" MaxLength="9" runat="server" Text='<%# Eval("TotalQty") %>' 
          Visible="<%# CBool(IsInEditMode) %>" />
          <asp:FilteredTextBoxExtender ID="FilteredTextBoxExtendertq" FilterType="Custom, Numbers" ValidChars="." runat="server" TargetControlID="txtTotalQty">
         </asp:FilteredTextBoxExtender>    
    </ItemTemplate>
    <ControlStyle CssClass="controltext" />
    <ItemStyle  Width="12%" />
 </asp:TemplateField>

Private isEditMode As Boolean = False
Protected Property IsInEditMode() As Boolean
    Get
        Return Me.isEditMode
    End Get

    Set(ByVal value As Boolean)
        Me.isEditMode = value
    End Set
End Property 
```

我转移到 4.5 的原因是因为这是将 vb.net 转换为 c# 然后再转换为 MVC 的第一步。

有谁知道为什么这不再起作用？

非常感谢

# c++ - 构建 C++ COM 对象以生成 UUID

> ID：15161011
> 
> 赞同：2
> 
> 时间：2013-03-01T15:17:41.867
> 
> 标签：c++, boost, com, uuid

我需要一个生成 GUID 的 COM 对象。我是 C# 开发人员，但这将部署在 unix 环境中，所以我想我需要用 C++ 构建它。这是我的第一个 Visual C++ 项目，我在完成它时遇到了一些麻烦。

我采取的步骤：

在 Visual Studio 中创建了一个新的 ATL 项目（动态链接库 - 没有其他选项）

右键项目 -> 添加类 -> ATL 简单对象（简称：GuidGenerator；ProgID：InfaGuidGenerator）

View -> ClassView -> IGuidGenerator -> Add Method（方法名称：Generate；参数类型：BSTR* [out]；参数名称：retGuid）

添加了 Boost 以获取独立于平台的 UUID 生成器。

```
// GuidGenerator.cpp : Implementation of CGuidGenerator

#include "stdafx.h"
#include "GuidGenerator.h"
#include <boost/lexical_cast.hpp>
#include <boost/uuid/uuid.hpp>            // uuid class
#include <boost/uuid/uuid_generators.hpp> // generators
#include <boost/uuid/uuid_io.hpp>         // streaming operators etc.

STDMETHODIMP CGuidGenerator::Generate(BSTR* retGuid)
{
    boost::uuids::uuid uuid = boost::uuids::random_generator()();
    std::string uuidStr = boost::lexical_cast<std::string>(uuid);
    //not really sure what to do from here. 
    //I've tried to convert to BSTR.
    //When I assign the resulting value to retGuid, I often get an error:
    //A value of type BSTR cannot be assigned to an entity of type BSTR*

    return S_OK;
} 
```

任何人都可以为我提供下一步的指导吗？

谢谢。

* * *

从评论编辑：

我已经尝试使用以下方法转换为 BSTR，但出现错误：

```
STDMETHODIMP CGuidGenerator::Generate(BSTR* retGuid)
{
    boost::uuids::uuid uuid = boost::uuids::random_generator()();
    std::string uuidStr = boost::lexical_cast<std::string>(uuid);

    int wslen = ::MultiByteToWideChar(CP_ACP, 0 /* no flags */,
                                  uuidStr.data(), uuidStr.length(),
                                  NULL, 0);

    BSTR wsdata = ::SysAllocStringLen(NULL, wslen);
    ::MultiByteToWideChar(CP_ACP, 0 /* no flags */,
                      uuidStr.data(), uuidStr.length(),
                      wsdata, wslen);
    retGuid = wsdata;
    //ERROR: A value of type BSTR cannot be assigned to an entity of type BSTR*

    return S_OK;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:00:57.917

假设这`std::string uuidStr`是您要作为`BSTR`输出参数返回的字符串，请考虑如下代码：

```
#include <atlbase.h> // for CComBSTR
#include <atlconv.h> // for CA2W

STDMETHODIMP CGuidGenerator::Generate(BSTR* retGuid)
{
    try
    {
        ....

        // Convert uuidStr from ASCII to Unicode
        CA2W wszUuid( uuidStr.c_str() );

        // Build a COM BSTR from the Unicode string
        CComBSTR bstrUuid( wszUuid );

        // Return the BSTR as output parameter
        *retGuid = bstrUuid.Detach();

        // All right
        return S_OK;
    }
    //
    // Catch exceptions and convert them to HRESULTs,
    // as C++ exceptions can't cross COM module boundaries.
    //
    catch(const CAtlException& ex)
    {
        return static_cast<HRESULT>(ex);
    }
    catch(const std::exception& ex)
    {
        // May log the exception message somewhere...

        return E_FAIL;
    }
} 
```

请注意 RAII 助手类如何`CA2W`简化从 ASCII 到 Unicode 的转换，并`CComBSTR`简化 raw`BSTR`的管理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T15:28:25.007

[这篇关于Unix 下 COM 的](http://msdn.microsoft.com/en-us/library/aa260790%28v=vs.60%29.aspx)Microsoft 文章可能会提供更广泛的帮助。

至于下一步，BSTR 不是您常用的字符串；.NET 对您隐藏了这种复杂性。BSTR 是一个专门的字符串，旨在跨线程/进程边界进行编组。

看看[这个答案](https://stackoverflow.com/questions/6284524/bstr-to-stdstring-stdwstring-and-vice-versa)，看看如何将你的 std::string 转换为 BSTR。

# python - 为单位解析 Python 字符串

> ID：15161012
> 
> 赞同：12
> 
> 时间：2013-03-01T15:17:45.033
> 
> 标签：python, units-of-measurement

假设我有一组字符串，如下所示：

```
"5 m^2"
"17 sq feet"
"3 inches"
"89 meters" 
```

是否有一个 Python 包可以读取这些字符串，将它们转换为 SI，并以易于使用的形式返回结果？例如：

```
>>> a=dream_parser.parse("17 sq feet")
>>> a.quantity
1.5793517
>>> a.type
'area'
>>> a.unit
'm^2' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2018-08-16T00:09:28.510

[Quantulum](https://pypi.org/project/quantulum/)将完全按照您的描述进行

摘自其描述：

```
from quantulum import parser

quants = parser.parse('I want 2 liters of wine') 

# quants [Quantity(2, 'litre')] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-20T16:26:32.780

最近，[品脱](http://pint.readthedocs.org/en/0.6/)是​​其中大多数开始的好地方。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-01T15:25:17.370

是否有 ipython 的扩展可以至少完成您想要的部分功能。它被称为[ipython-physics](https://bitbucket.org/birkenfeld/ipython-physics)

它确实存储了值和单位，并允许（至少）一些基本的数学运算。我自己从未使用过它，所以我不知道在 python 脚本中使用它有多容易

# python - Heroku Schedule 任务与 postgres 连接和 python

> ID：15161013
> 
> 赞同：2
> 
> 时间：2013-03-01T15:17:48.020
> 
> 标签：python, postgresql, heroku, sqlalchemy

我有一个使用烧瓶和 SQLAlchemy 在 heroku 上运行的网络应用程序。我现在想知道如何启动每天运行的计划任务并执行一些与数据库相关的任务（如果您需要知道，请删除一些行:)

heroku 上的文档建议使用 APScheduler，但我想使用 Heroku-Scheduler。尽管有这个决定，我想知道我如何在这个调度程序任务中连接到我的 postgres 数据库。我找不到任何例子或提示。

谢谢你的时间

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T05:00:17.577

Heroku 调度程序将运行您向其发送的任何命令。典型的方法是创建一个 Python 脚本/命令作为烧瓶应用程序的一部分。您可以执行类似于[http://flask-script.readthedocs.org/en/latest/](http://flask-script.readthedocs.org/en/latest/)的操作。然后在调度程序中，您将安排它类似于：

```
python manage.py mytask 
```

# javascript - IE8 中的 indexOf 引发错误，但适用于所有其他浏览器

> ID：15161016
> 
> 赞同：0
> 
> 时间：2013-03-01T15:17:53.597
> 
> 标签：javascript, internet-explorer, indexof

嘿，我有以下js代码：

```
for(var i = choicesOrder.indexOf(cat)+1; i<choicesOrder.length; i++) 
```

它抛出错误：*SCRIPT438：对象不支持属性或方法'indexOf'*

**由于它适用于所有其他浏览器**，我该如何解决这个问题？

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T15:21:01.533

您可以在此处找到可以实现的原型版本：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-07T14:20:18.290

您可以在 IE8 及更低版本中将此类功能扩展为 Fix for .indexOf

```
if (!Array.prototype.indexOf) {
  Array.prototype.indexOf = function(elt /*, from*/) {
    var len = this.length >>> 0,
        from = Number(arguments[1]) || 0;
    from = (from < 0) ? Math.ceil(from) : Math.floor(from);
    if (from < 0)
      from += len;

    for (; from < len; from++) {
      if (from in this && this[from] === elt)
        return from;
    }
    return -1;
  };
} 
```**

# c++ - 我应该在这里使用 goto 语句吗？

> ID：15161018
> 
> 赞同：0
> 
> 时间：2013-03-01T15:17:58.513
> 
> 标签：c++, goto

一位好先生告诉我 goto 语句不好，但我不明白我怎么不能在这里使用它：

```
int main()
{   
   using namespace std;
   int x;
   int y;
   int z;
   int a;
   int b;
   Calc: //How can i get back here, without using goto?
   {
   cout << "To begin, type a number" << endl;
   cin >> x;
   cout << "Excellent!" << endl;
   cout << "Now you need to type the second number" << endl;
   cin >> y;
   cout << "Excellent!" << endl;
   cout << "Now, what do you want to do with these numbers?" << endl;
   cout << "Alt. 1 +" << endl;
   cout << "Alt. 2 -" << endl;
   cout << "Alt. 3 *" << endl;
   cout << "Alt. 4 /" << endl;
   cin >> a;

       if (a == 1) {
    z = add(x, y);
   }

   if (a == 2) {
    z = sub(x, y);
   }

   if (a == 3) {
    z = mul(x, y);
   }

       if (a == 4) {
    z = dis(x, y);
   }
}

cout << "The answer to your math question is ";
cout << z << endl;
cout << "Do you want to enter another question?" << endl;
cout << "Type 1 for yes" << endl;
cout << "Type 0 for no" << endl;
cin >> b;

    if (b == 1) {
    goto Calc;
}
cout << "Happy trails!" << endl;
return 0;
} 
```

如您所见，它是一个计算器。另外，如果您愿意，您能否建议一种更好的方法（如果存在）让用户选择操作（+ - * /）。头文件在控制之下。我为很多`cout`言论道歉。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-01T15:22:48.037

`do`这是一个使用/`while`循环结构的清理和正确格式的版本：

```
using namespace std;

int main()
{   
    int x, y, z, a, b;

    do {
        cout << "To begin, type a number" << endl;
        cin >> x;
        cout << "Excellent!" << endl;
        cout << "Now you need to type the second number" << endl;
        cin >> y;
        cout << "Excellent!" << endl;
        cout << "Now, what do you want to do with these numbers?" << endl;
        cout << "Alt. 1 +" << endl;
        cout << "Alt. 2 -" << endl;
        cout << "Alt. 3 *" << endl;
        cout << "Alt. 4 /" << endl;
        cin >> a;
        if (a == 1) {
            z = add(x, y);
        }
        else if (a == 2) {
            z = sub(x, y);
        }
        else if (a == 3) {
            z = mul(x, y);
        }
        else if (a == 4) {
            z = dis(x, y);
        }
        cout << "The answer to your math question is ";
        cout << z << endl;
        cout << "Do you want to enter another question?" << endl;
        cout << "Type 1 for yes" << endl;
        cout << "Type 0 for no" << endl;
        cin >> b;
    } while (b != 0);
    cout << "Happy trails!" << endl;
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-01T15:20:29.273

Erm ，使用适当的循环结构`while`，`for`等等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T15:23:15.247

在这种情况下，“更普遍接受”的方法是`do {`......`} while(b==1);`但编译的结果可能是相同的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T15:44:02.843

`goto`不会自动坏。不可读的代码很糟糕。每当你发现自己需要一些像“goto”这样晦涩难懂的编程结构时，这*通常*意味着你的代码要么写得不好，要么你的程序设计有缺陷。

解决方案几乎总是*更多功能*。例如：

```
bool run_program();
int  prompt_user_begin();
int  prompt_user_again();
int  prompt_operation_type();
bool prompt_continue();

int main()
{
  while(run_program())
  {}

  cout << "Happy trails!" << endl;
  return 0; 
}

bool run_program()
{
  int first;
  int second;
  int operation_type;
  int result;

  first  = prompt_user_begin();
  cout << "Excellent!" << endl;

  second = prompt_user_again();
  cout << "Excellent!" << endl;

  operation_type = prompt_operation_type();

  switch(operation_type)
  {
    case 1: result = add(first, second); break;
    case 2: result = sub(first, second); break;
    case 3: result = mul(first, second); break;
    case 4: result = div(first, second); break;
  }

  cout << "The answer to your math question is ";
  cout << result << endl;

  return prompt_continue();
}

int prompt_user_begin ()
{
  int x;
  cout << "To begin, type a number" << endl;
  cin >> x;

  return x;
}

int prompt_user_again ()
{
  int x;
  cout << "Now you need to type the second number" << endl;
  cin >> x;
  return x;
}

int prompt_operation_type ()
{
  int x;
  cout << "Now, what do you want to do with these numbers?" << endl;
  cout << "Alt. 1 +" << endl;
  cout << "Alt. 2 -" << endl;
  cout << "Alt. 3 *" << endl;
  cout << "Alt. 4 /" << endl;
  cin >> x;
  return x;
}

bool prompt_continue ()
{
  int x;
  cout << "Do you want to enter another question?" << endl;
  cout << "Type 1 for yes" << endl;
  cout << "Type 0 for no" << endl;
  cin >> x;
  return x==1;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T15:31:34.963

对实际问题的简短回答：不，您不应`goto`在此代码中使用。没有必要。

的使用`goto`应该是“当它使代码更清晰或更安全时”。“使代码更清晰”的典型例子是当有多层嵌套循环时，并且某些特殊情况需要离开所有嵌套层级，并且添加“我们是否要退出循环”会使代码更加复杂。“让它更安全”的一个例子是如果一个函数持有一个锁，打开一个文件或类似的东西，并且需要提前返回 - 但你还需要关闭文件或释放锁，使用“goto exit_now;” 比试图记住持有哪些锁、文件等然后执行`return;`.

这个：

```
if (a == 1) {
    z = add(x, y);
}
if (a == 2) {
    z = sub(x, y);
}
if (a == 3) {
    z = mul(x, y);
}
if (a == 4) {
    z = dis(x, y);
} 
```

是您应该使用“开关”的经典案例：

```
switch(a)
{
   case 1:
     z = add(x, y);
     break;
   case 2:
     z = sub(x, y);
     break;
  ....
} 
```

使代码更清晰 - 也不会混淆`a`更改值是否可行，并且可能另一个`if`语句变得可行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-01T15:22:51.020

您可以在代码中轻松避免“goto”。只需将其划分为功能：

```
using namespace std;

void question () {
  cout << "To begin, type a number" << endl;
  cin >> x;

  // put rest of the code here
}

int main () {
  int ask = 1;
  while ( ask == 1 ) {
    question();
    cout << "Do you want to enter another question?" << endl;
    cout << "Type 1 for yes" << endl;
    cout << "Type 0 for no" << endl;
    cin >> ask;
  }

  return 0;
} 
```

* * *

**编辑：**如评论中所述，使用 do-while 实际上是一个更好的选择。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-01T15:27:38.587

*   `goto`使得很难跟踪执行的来源和去向。

*   `goto`鼓励 spagetti 代码，除非您严格限制使用它的位置（例如，您可以争辩说您只将其用于清理块，但在存在 RAII 的情况下这样的论点毫无意义）。

*   您正在使用 goto 来模拟循环。你为什么不写一个循环呢？

*   它晦涩难懂，因此使其他人无法使用您的代码。

*   `goto`使得跟踪对象的生命周期变得更加困难。

# perl - Getopt::Long 多个开关

> ID：15161020
> 
> 赞同：0
> 
> 时间：2013-03-01T15:18:16.567
> 
> 标签：perl, options, long-integer, getopt

我有三种方法和两种开关

我想

*   如果设置了 SwitchA，则运行 MethodA
*   如果设置了 SwitchA 和 SwitchB，则运行 MethodB
*   如果设置了 SwitchA 和 SwitchB 并产生了 SwitchB 的争论，则运行 MethodC

像这样

```
./main --switchA
./main --switchA --switchB
./main --switchA --switchB Hello 
```

我的代码

```
my $result = GetOptions{
             "SwitchA" => \$opt_a,
             "SwitchB:s" => \$opt_b
   };

 methodA if($opt_a);
 methodB if($opt_a && $opt_b eq "");
 methodC if($opt_a && $opt_b ne "") 
```

我尝试过不同的方法，但本质上，如果我只想运行 MethodB，则始终运行 Method A，如果我希望运行 MethodB，则始终运行 MethodA。

还没有开始测试 MethodC。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:44:01.813

```
methodA if $opt_a && !defined($opt_b);
methodB if $opt_a && defined($opt_b) && $opt_b eq "";
methodC if $opt_a && defined($opt_b) && $opt_b ne ""; 
```

或者

```
if ($opt_a) {
   if (defined($opt_b)) {
      if ($opt_b eq "") {
         methodB
      } else {
         methodC
      }
   } else {
      methodA
   }
} 
```

# android - android - 识别 ListView 中的项目

> ID：15161021
> 
> 赞同：0
> 
> 时间：2013-03-01T15:18:19.090
> 
> 标签：android, android-listview, android-asynctask

我在正确识别`ListView`.

有 4 个类很重要，代码很多，所以首先我将解释这些类的逻辑。

*   输入`ListActivity`并初始化其`ListView`
*   执行`AsyncTask`从服务器下载 JSON 响应，解析它，`ListView`用对象填充并设置适配器，同时显示`ProgressDialog`
*   **PlaylistItem**类包括简单地从单个 JSONObject 获取数据的方法。它用于参数化 ArrayList 及其对象
    *   完成后`AsyncTask`，列表中充满了项目，看起来像 |Button| 艺术家( `TextView`) - 标题( `TextView`)

**更新**

解决了第一个问题，但仍然无法弄清楚按钮有什么问题

2）。`OnClickListener`我在适配器的 getView() 方法中为我的按钮设置了一个。为了确定按钮是否被正确识别，我什么也没做，只是改变了它的背景。但是单击某个按钮*会强制更改每 11 个或第 12 个按钮的背景。到现在还想不通。*

在解决这些问题之前，我无法继续获取 url 和流式音频，因此非常感谢任何帮助。我的课在下面，请询问是否有不清楚的地方。

**音频列表**

```
 public class AudioList extends ListActivity {
private ListView lv;
private PlaylistLoader loader;
private AudioListAdapter adapter;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_audio_list);
    init(); // initialize the ListView

    /*--- populate the list with user's audio in case network connection is available ---*/
    loader = new PlaylistLoader(this, lv, adapter);
    if (Utils.isNetworkAvailable(this)) {
        loader.execute();
    } else {
        APP_CONSTANTS.NO_DATA_CONNECTION(this);
    }

}

@Override
protected void onResume() {
    super.onResume();
    lv.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {

            Toast.makeText(getApplicationContext(), Integer.toString(arg2),
                    Toast.LENGTH_SHORT).show();
            }
    });

}

private void init() {
    lv = getListView();
    lv.setTranscriptMode(0x00000000);
    lv.setDividerHeight(1);
    lv.setSmoothScrollbarEnabled(true);
    lv.setVerticalFadingEdgeEnabled(true);

} 
```

**播放列表加载器**

```
 public class PlaylistLoader extends AsyncTask<Void, Void, Void> {

private JSONObject usersPlaylist, singleJSONItem;
private JSONArray responseJSONArray;
private ListView lv;
private ArrayList<PlaylistItem> playlist;
private Activity a;
private PlaylistItem audioList;
private SharedPreferences prefs;
private ProgressDialog pd;
AudioListAdapter adapter;

public PlaylistLoader(Activity a, ListView lv, AudioListAdapter adapter) {
    this.lv = lv;
    this.a = a;
    this.adapter = adapter;
}

@Override
protected Void doInBackground(Void... arg0) {
    /*--- create new ArrayList of PlaylistItem Objects ---*/
    playlist = new ArrayList<PlaylistItem>();
    /*--- get the preferences using context of calling activity ---*/
    prefs = PreferenceManager.getDefaultSharedPreferences(a);
    try {
        /*--- download the response JSONObject from server // access_token and 
         * user_id come from activity's defaultSharedPreferences ---*/
        usersPlaylist = Utils.retrieveJsonObjectFromUrl(new URL(
                APP_CONSTANTS.REQUEST_AUDIO_LIST(prefs)), a);
        /*--- get the response array from received object ---*/
        responseJSONArray = usersPlaylist.getJSONArray("response");
        /*--- populate the ArrayList with Objects from the response array ---*/
        for (int i = 0; i < responseJSONArray.length(); i++) {
            singleJSONItem = responseJSONArray.getJSONObject(i);
            audioList = new PlaylistItem(singleJSONItem);
            playlist.add(audioList);

        }

    } catch (MalformedURLException e) {
        e.printStackTrace();
    } catch (JSONException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    return null;
}

@Override
protected void onPreExecute() {
    super.onPreExecute();
    pd = new ProgressDialog(a);
    pd.setTitle("Please wait");
    pd.setMessage("Retrieving audio list...");
    pd.show();

}

@Override
protected void onPostExecute(Void result) {
    super.onPostExecute(result);
    lv.setVisibility(View.VISIBLE);
    pd.dismiss();
    /*--- set the adapter passed in constructor as an adapter for passed ListView ---*/
    adapter = new AudioListAdapter(a, R.layout.playlist_item, playlist);
    lv.setAdapter(adapter);

}
    } 
```

**音频列表适配器**

```
 public class AudioListAdapter extends ArrayAdapter<PlaylistItem> {
private PlaylistItem pl;
private Context context;
private int layoutResourceId;
private PlaylistItem aud;
private ArrayList<PlaylistItem> data = null;

public AudioListAdapter(Context context, int layoutResourceId,
        ArrayList<PlaylistItem> data) {
    super(context, layoutResourceId, data);
    this.layoutResourceId = layoutResourceId;
    this.context = context;
    this.data = data;

}

@Override
public PlaylistItem getItem(int position) {
    return super.getItem(position);
}

@Override
public int getCount() {
    return data.size();
}

@Override
public int getPosition(PlaylistItem item) {
    return super.getPosition(item);
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {

    pl = new PlaylistItem();
    aud = getItem(position);

    if (convertView == null) {
        LayoutInflater inflater = ((Activity) context).getLayoutInflater();
        convertView = inflater.inflate(layoutResourceId, parent, false);
        pl.btnPlay = (Button) convertView.findViewById(R.id.btn_list_play);
        pl.imgSaved = (ImageView) convertView
                .findViewById(R.id.img_list_audio_saved);
        pl.tvArtist = (TextView) convertView
                .findViewById(R.id.tvListItemArtist);
        pl.tvTitle = (TextView) convertView
                .findViewById(R.id.tvListItemSong);

        convertView.setTag(pl);
    } else {
        pl = (PlaylistItem) convertView.getTag();
        pl.btnPlay.setBackgroundResource(R.drawable.list_button_play);
    }

    pl.tvArtist.setText(aud.getArtist() + " " + "-");
    pl.tvTitle.setText(aud.getTitle());

    pl.btnPlay.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            /*--- vibrate if this option is enabled in the preferences ---*/
            if (APP_CONSTANTS.isHapticFeedbackEnabled(getContext())) {
                APP_CONSTANTS.doVibrate(getContext());

            }
         pl.btnPlay.setBackgroundResource(R.drawable.list_button_pause);

        }
    });

    return convertView;
} 
```

**播放列表项**

```
 public class PlaylistItem {

private String artist, title;
private JSONObject obj;
public Button btnPlay;
public TextView tvArtist, tvTitle;
public ImageView imgSaved;
public int duration;
public int audio_id;
public String url;

/*--- the constructor takes a single JSONObject from the response array ---*/
public PlaylistItem(JSONObject obj) {
    this.obj = obj;
}

public PlaylistItem() {
    // default constructor
}

/*--- the methods below return values by key from the passed JSONObject ---*/

public String getArtist() {
    try {
        artist = obj.getString("artist");
    } catch (JSONException e) {

        e.printStackTrace();
    }
    return artist;

}

public String getTitle() {
    try {
        title = obj.getString("title");
    } catch (JSONException e) {

        e.printStackTrace();
    }
    return title;
}

public int getID() {
    try {
        audio_id = obj.getInt("aid");
    } catch (JSONException e) {

        e.printStackTrace();
    }
    return audio_id;
}

public String getURL() {
    try {
        url = obj.getString("url");
    } catch (JSONException e) {

        e.printStackTrace();
    }
    return url;
}
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T19:41:11.057

> 但是单击某个按钮*会强制更改每 11 个或第 12 个按钮的背景。到现在还想不通。*

您正在与 ListViews 回收行布局的方式作斗争。
可以这样想：如果你有一个有 10,000 行的 ListView，但屏幕上只能容纳其中的 9 个，那么创建 10,000 个独特的布局是没有意义的。这只是浪费资源，而 ListView 只创建约 10 个布局并重用它们。

解决方案：每行在重用时恢复到默认状态。补充`getView()`：

```
} else {
    pl = (PlaylistItem) convertView.getTag();
    pl.btnPlay.setBackgroundResource(R.drawable.list_button_play);
    // I guessed at the resource's name         ^^^^^^^^^^^^^^^^
} 
```

（你也可以做一些小的改变来加快你的代码。例如，你只需要一个 OnClickListener，因为它们都包含相同的代码，将其设为类变量并将其传递给每个播放按钮。还有更多。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T15:39:45.310

**编辑**：

尝试这个

在可绘制的 button_play.xml 中使用自定义选择器

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@drawable/pause_button"
          android:state_selected="true" />
    <item android:drawable="@drawable/play_button" />
</selector> 
```

像这样修改你的适配器

```
 public class AudioListAdapter extends ArrayAdapter<PlaylistItem> {
private PlaylistItem pl;
private Context context;
private int layoutResourceId;
private PlaylistItem aud;
private ArrayList<PlaylistItem> data = null;
Button previous;

public AudioListAdapter(Context context, int layoutResourceId,
        ArrayList<PlaylistItem> data) {
    super(context, layoutResourceId, data);
    this.layoutResourceId = layoutResourceId;
    previous=new Button(context);
    this.context = context;
    this.data = data;

}

....
....

@Override
public View getView(int position, View convertView, ViewGroup parent) {

    pl = new PlaylistItem();
    aud = getItem(position);

    if (convertView == null) {
        LayoutInflater inflater = ((Activity) context).getLayoutInflater();
        convertView = inflater.inflate(layoutResourceId, parent, false);
        pl.btnPlay = (Button) convertView.findViewById(R.id.btn_list_play);
pl.btnPlay.setBackGroundResouce(R.drawable.button_play); //you can set here or in xml

        pl.imgSaved = (ImageView) convertView
                .findViewById(R.id.img_list_audio_saved);
        pl.tvArtist = (TextView) convertView
                .findViewById(R.id.tvListItemArtist);
        pl.tvTitle = (TextView) convertView
                .findViewById(R.id.tvListItemSong);

        convertView.setTag(pl);
    } else {
        pl = (PlaylistItem) convertView.getTag();
    }

    pl.tvArtist.setText(aud.getArtist() + " " + "-");
    pl.tvTitle.setText(aud.getTitle());

    pl.btnPlay.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            /*--- vibrate if this option is enabled in the preferences ---*/
            if (APP_CONSTANTS.isHapticFeedbackEnabled(getContext())) {
                APP_CONSTANTS.doVibrate(getContext());
            }
                //for some reason, the background gets changed for every 11th or 12th button in the list
             Button current=((Button)v);
              current.setSelected(true);
              previous.setSelected(false);
              previous=current;
        }
    });

    return convertView;
}

    } 
```

* * *

你的按钮和列表项不可点击的原因是因为你的列表有一个焦点项目按钮，所以你需要为你的按钮设置 setFocusable=false 。尝试在 xml 中为您的按钮设置 focusable=false。如果它不适合你，那就这样做

在您的行 xml 文件中

1.为您的按钮设置 focusable=true。2.在您的父项的同一组`android:descendantFocusability="blocksDescendants"`中。（即您的视图所在的父布局）。

在为按钮设置onclickListener 后的getView() 方法中，为按钮设置focusable false。它肯定会起作用。我希望这能帮到您..

# core-data - 在 IOS6 中使用 Core Data（删除/编辑）

> ID：15161024
> 
> 赞同：0
> 
> 时间：2013-03-01T15:18:24.597
> 
> 标签：core-data, ios6, xcode4

我正在将我的 tableviewdata 的最新 Internet 请求保存在（核心数据）实体中，但遇到有关“故障”的错误异常的问题。我有两种方法“loadData”，它获取将在我的表格视图中加载的最新“ordersitems”和“loadThumbnails”，它将尝试将缩略图缓存到核心数据实体中。当托管对象被删除并且缩略图方法仍然尝试访问它时，就会出现问题。虽然我做了一个变量 stopThumbnails 来停止 loadThumbnails 方法，但问题一直在发生。

什么是延迟加载图像并将它们保存到 coredata 但检查对象是否未被删除的正确 iOS 6 方法？我发现这个[Core Data 多线程应用程序](https://stackoverflow.com/questions/2138252/core-data-multi-thread-application/11814957#11814957)很有用，但我新手对核心数据的理解仍然有限，而且我在编写代码时遇到问题。我阅读了有关[http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/coredata/Articles/cdConcurrency.html](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/coredata/Articles/cdConcurrency.html)的苹果文档，但很难完全理解。

我至少希望我的http请求加载异步（但最好尽可能多）我想出了以下内容：

```
-(void)viewdidload
{
     NSFetchRequest *fetchReq = [NSFetchRequest fetchRequestWithEntityName:@"OrderItems"];
    fetchReq.sortDescriptors = [NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"name" ascending:YES]];                    
    self.data = [self.managedObjectContext executeFetchRequest:fetchReq error:nil];

     MYFILTER = @"filter=companyX";

     [self loadData];
}

-(void)loadData
{
    dispatch_async( dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

        //json request from url
        NSDictionary *reqData = myOrderJSONRequest(MYFILTER);

        dispatch_async( dispatch_get_main_queue(), ^{

            if(reqData!=NULL && reqData!=nil)
            {
                //request successful so delete all items from entity before inserting new ones

                stopThumbnails = YES;
                for(int i=self.data.count-1;i>=0;i--)
                {
                   [self.managedObjectContext deleteObject:[self.data objectAtIndex:i]];
                }
                [self.managedObjectContext save:nil];

                if(reqData.count>0)
                {
                    //insert latest updates           
                    for (NSDictionary *row in reqData){
                        OrderItem *item = [NSEntityDescription insertNewObjectForEntityForName:@"OrderItem" inManagedObjectContext:self.managedObjectContext];
                        item.order_id =  [NSNumber numberWithInt:[[row objectForKey:@"order_id"] intValue]];
                        item.description = [row objectForKey:@"description"];
                        item.thumbnail_url = [row objectForKey:@"thumbnail_url"];
                    }
                    [self.managedObjectContext save:nil];
                }

                NSFetchRequest *fetchReq = [NSFetchRequest fetchRequestWithEntityName:@"OrderItems"];
                fetchReq.sortDescriptors = [NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"name" ascending:YES]];                    
                self.data = [self.managedObjectContext executeFetchRequest:fetchReq error:nil];                    

                [TableView reloadData];

                //LOAD THUMBNAILS ASYNCHRONOUS
                stopThumbnails = NO;
                [self loadThumbnails];                    
            }
            else{
                //NO INTERNET
            }
        });
    });
}

-(void)loadThumbnails
{
if(!loadingThumbnails)
{
    loadingThumbnails = YES;
    dispatch_async( dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

        for (int i=0;i<self.data.count; i++) {
            if(!stopThumbnails)
            {
                OrderItem *item = [self.data objectAtIndex:i];
                if(item.thumbnail==NULL)
                {
                    //ASYNCHRONOUS IMAGE REQUEST
                    NSURL *image_url = [NSURL URLWithString:item.thumbnail_url];
                    NSData *image_data = [NSData dataWithContentsOfURL:image_url];

                    dispatch_async( dispatch_get_main_queue(), ^{
                        if(image_data!=nil && image_data!=NULL && !stopThumbnails)
                        {
                            //IMAGE REQUEST SUCCESSFUL
                            item.thumbnail = image_data;
                            [self.managedObjectContext save:nil];

                            //RELOAD AFFECTED TABLEVIEWCELL
                            NSIndexPath* rowToReload = [NSIndexPath indexPathForRow:i inSection:0];
                            NSArray* rowsToReload = [NSArray arrayWithObjects:rowToReload, nil];
                            [TableView reloadRowsAtIndexPaths:rowsToReload withRowAnimation:UITableViewRowAnimationFade];
                        }
                        else
                        {
                            loadingThumbnails = NO;
                            return;
                        }
                    });
                }

                if(stopThumbnails)
                {
                    dispatch_async( dispatch_get_main_queue(), ^{
                        loadingThumbnails = NO;
                        return;
                    });
                }
            }
            else{
                dispatch_async( dispatch_get_main_queue(), ^{
                    loadingThumbnails = NO;
                    return;
                });
            }
        }
        dispatch_async( dispatch_get_main_queue(), ^{
            loadingThumbnails = NO;
            return;
        });
    });
}
} 
```

任何帮助当然都非常感谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T18:55:17.967

好吧，我不知道这是否是正确的方法，但它有效，所以我将其标记为答案。

为了在后台做所有事情，我使用了第二个 nsmanagedobjectcontext (MOC)，然后将更改合并到主 MOC。调度队列工作得很好，虽然我不得不使用 NSManagedObjectContextDidSaveNotification 来合并两个上下文的变化。

由于 IOS 5 可以使用块代替为您进行合并。所以我决定使用这个而不是调度方式（这样我就不必使用通知）。

同样使用块时，当一个对象在后台队列中被选中而在另一个队列中被删除时，我遇到了同样的问题（错误）。所以我决定不立即删除它，而是为 OrderItem 插入一个 NSDate 'deleted' 属性。然后有一个带有删除检查的计时器，以查看是否有超过 10 分钟前被删除的对象。这样我确信没有缩略图仍在下载。有用。虽然我仍然想知道这是正确的方法:)

# sql - DB2 SQL：在结果中对具有相同 ID 的记录进行分组？

> ID：15161027
> 
> 赞同：1
> 
> 时间：2013-03-01T15:18:39.327
> 
> 标签：sql, db2

如果我有一个有 2 列的表

```
text | id
---------
aaa  |  1
bbb  |  1
eee  |  1
mmm  |  2
zzz  |  2
... 
```

是否可以编写一个按 id 分组并输出以下结果的查询：

```
id | text
------------------
 1 | aaa, bbb, eee
 2 | mmm, zzz
... 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:20:06.440

试试这个，

```
SELECT  ID, 
        SUBSTR(xmlserialize(xmlagg(xmltext(CONCAT( ', ',text))) as VARCHAR(1024)), 3)
FROM    tableName
GROUP   BY ID; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T16:23:05.507

使用`listagg`DB2 中的函数：

```
select id, listagg(text, ', ') as text
from t
group by id 
```

如果您希望它们按字母顺序排列：

```
select id, listagg(text, ', ') within group (order by text) as text
from t
group by id 
```

# mysql - 具有多个选择语句的复杂 MySQL 查询

> ID：15161028
> 
> 赞同：1
> 
> 时间：2013-03-01T15:18:40.790
> 
> 标签：mysql, select, multi-table

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-01T15:22:59.927

You should be able to `JOIN` the tables on the `profile.id` and the `profileid` in the other tables.

If you are sure the `profileid` exists in all three tables, then you can use an `INNER JOIN`. The `INNER JOIN` returns matching rows in all of the tables:

```
select p.id,
  p.name,
  c.desc ContactDesc,
  a.desc AddressDesc
from profile p
inner join contact c
  on p.id = c.profileid
inner join address a
  on p.id = a.profileid
where p.name = 'bla'
  and c.ord = 1
  and a.ord = 1 
```

If you are not sure that you will have matching rows, then you can use a `LEFT JOIN`:

```
select p.id,
  p.name,
  c.desc ContactDesc,
  a.desc AddressDesc
from profile p
left join contact c
  on p.id = c.profileid
  and c.ord = 1
left join address a
  on p.id = a.profileid
  and a.ord = 1
where p.name = 'bla' 
```

If you need help learning `JOIN` syntax, here is a great [visual explanation of joins](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T15:23:48.807

This query below only selects column when an `ID` from `Profile` table has atleast one match on tables: `Contact` and `Address`. If one or both of them are *nullable*, use `LEFT JOIN` instead of `INNER JOIN` because `LEFT JOIN` displays all records from the *Left-hand* side table regardless if it has a match on other tables or not.

```
SELECT  a.*, 
        b.desc as BDESC,
        c.desc as CDESC
FROM    Profile a
        INNER JOIN Contact b
            ON a.ID = b.ProfileID
        INNER JOIN Address c
            ON a.ID = c.ProfileID
WHERE   b.ORD = 1 AND
        c.ORD = 1 AND
        a.Name = 'nameHERE' 
```

The `LEFT JOIN` version:

```
SELECT  a.*, 
        b.desc as BDESC,
        c.desc as CDESC
FROM    Profile a
        INNER JOIN Contact b
            ON a.ID = b.ProfileID AND b.ORD = 1
        INNER JOIN Address c
            ON a.ID = c.ProfileID AND c.ORD = 1
WHERE   a.Name = 'nameHERE' 
```

To further gain more knowledge about joins, kindly visit the link below:

*   [Visual Representation of SQL Joins](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T19:12:48.513

i have created [working demo](http://sqlfiddle.com/#!2/225fe3/2) as your requirement :

The query bellow will retrieve all matching records from the database.its retrieving profile id,name stufff and description of contact tables

```
select p.id,p.name,p.stauff,c.descr,a.descr from profile as p
 inner join contact as c on c.profileid=p.id
 inner join address as a on a.profileid=p.id
 where p.name="bla" and c.ord=1 and a.ord=1 
```

# java - Google Cloud Endpoints Security (OAuth2) 和自定义用户架构

> ID：15161030
> 
> 赞同：9
> 
> 时间：2013-03-01T15:18:43.647
> 
> 标签：java, oauth-2.0, google-cloud-endpoints

我正在阅读与 OAuth2 安全性相关的 Google Cloud Endpoints 文档。我认为这种安全措施是针对 Google 帐户的。

是否支持使用自定义用户模式进行身份验证？

我想要的是拥有使用 Google Cloud Endpoints 但对用户的本地存储（App Engine）进行身份验证的客户端 JS 应用程序。

Google Cloud Endpoints 是否适合这种情况，还是我需要编写自己的安全机制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-20T19:02:14.933

我对 OAuth 的理解是：

端点是由提供者实现的，因此当像您这样的应用程序对像我这样的用户进行身份验证时，它会返回一个结果。

现在的*问题*是谷歌的端点是否可以返回自定义模式。

您可以做的是，实现这些功能，并更改您的 DNS ( `/etc/conf`)，以便 google 的端点访问您的本地主机。原则上这会起作用，但在实践中我不确定我自己会这样做，但也许你有你的理由。

所以对于 AppEngine，我想可能会有一个类覆盖/实现这些东西。使用 DNS 重写技巧，您应该能够让它工作。

如果你这样做，请写下来，这样它可以帮助别人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-09T22:28:52.017

Cloud Endpoints 的 OAuth 仅适用于 Google 帐户。你必须自己写。

老实说，只需使用 Google 帐户，用户甚至可以使用自己的电子邮件地址注册 Google 帐户。将来他们可能也会支持 Open ID with Endpoints。

# jquery - jquery if 语句，当日期不匹配时显示'默认'

> ID：15161033
> 
> 赞同：0
> 
> 时间：2013-03-01T15:18:46.423
> 
> 标签：jquery

我有一个这样的json文件：

```
{
  "video": {
    "default" : {
      "url": "http://showmms.rd.llnwd.net/d4/u/video/mezzanine/mov/1002742_1_0_trl02.mov",
      "imgSm": "http://www.sho.com/assets/vendor/sxsw/img/iphone-video.png",
      "imgLg": "http://www.sho.com/assets/vendor/sxsw/img/video-img.jpg",
      "imgTitle": "http://www.sho.com/assets/vendor/sxsw/img/video-title.jpg"
    },
    "mar8" : {
      "url": "http://showmms.rd.llnwd.net/d4/u/video/mezzanine/mov/1002742_1_0_trl02.mov",
      "imgSm": "http://www.sho.com/assets/vendor/sxsw/img/promos/SXSW2013_VOD_Banners_Dexter_Small_320x41.png",
      "imgLg": "http://www.sho.com/assets/vendor/sxsw/img/promos/SXSW2013_VOD_Banners_Dexter_Large_320x264.png",
      "imgTitle": "http://www.sho.com/assets/vendor/sxsw/img/video-title.jpg"
    },
    "mar9" : {
      "url": "http://showmms.rd.llnwd.net/d4/u/video/mezzanine/mov/1002742_1_0_trl02.mov",
      "imgSm": "http://www.sho.com/assets/vendor/sxsw/img/iphone-video.png",
      "imgLg": "http://www.sho.com/assets/vendor/sxsw/img/video-img.jpg",
      "imgTitle": "http://www.sho.com/assets/vendor/sxsw/img/video-title.jpg"
    }
  }
} 
```

}

所以根据日期，它应该显示正确的图像和 url。但如果它与日期不匹配，它应该使用“默认”，我的 jquery 不工作，但我不知道为什么：

```
var today = new Date();
var dd = today.getDate();
var promo = 'mar' + dd;

var imgLg = data.video[promo].imgLg;
var imgSm = data.video[promo].imgSm;
var url = data.video[promo].url;

promo = data.video[promo] ? promo : 'default';

$("img.video-lg").attr("src",imgLg);
$("img.video-sm").attr("src",imgSm);    
$("a.play-btn").attr("href",url); 
```

如果日期匹配，它可以工作，但如果不匹配，它不会拉入“默认”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T15:24:46.450

可能 dd 会显示例如 09 而不仅仅是 9 你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T15:26:31.620

```
var today = new Date();
var dd = today.getDate();
var promo = 'mar' + dd;

if(data.video[promo] === undefined)
  promo = 'default';

var imgLg = data.video[promo].imgLg;
var imgSm = data.video[promo].imgSm;
var url = data.video[promo].url;

$("img.video-lg").attr("src",imgLg);
$("img.video-sm").attr("src",imgSm);    
$("a.play-btn").attr("href",url); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T15:28:26.740

如果您尝试调试代码，则 VAR dd 将仅返回 DAY。您必须先格式化日期。

# xml - 在 WebSphere AS 8.5 上部署 JAX-WS Web 服务时出错

> ID：15161037
> 
> 赞同：0
> 
> 时间：2013-03-01T15:19:08.063
> 
> 标签：xml, web-services, websphere, jax-ws

我正在尝试在安装在 *nix 操作系统上的 WAS 8.5 服务器上部署 JAX-WS Web 服务。我收到以下错误：

```
[3/1/13 15:31:19:687 CET] 000003c0 WSServerMetad E   WSWS7055E: The WEB-INF/wsdl/KeyPushTargetService.wsdl Web Services Description Language (WSDL) file specified by annotations in class com.cryptomathic.ckms.KeyPushTargetServiceSoapImpl cannot be loaded correctly due to the following error: java.lang.RuntimeException: WSWS7035E: The http://www.w3.org/2001/XMLSchema.dtd metadata file could not be found.
[3/1/13 15:31:19:698 CET] 000003c0 WSModuleDescr E   WSWS7011E: The configuration for the CKTC_MQ_WEB.war application module cannot load correctly. 
The following error occurred:  com.ibm.ws.websvcs.exception.DeploymentException: java.lang.RuntimeException: WSWS7035E: The http://www.w3.org/2001/XMLSchema.dtd metadata file could not be found.
    at com.ibm.ws.websvcs.deployment.WSServerMetadataMerger.attachWSDLDefinition(WSServerMetadataMerger.java:1852)
    at com.ibm.ws.websvcs.deployment.WSServerMetadataMerger.associateWSDLDefinitions(WSServerMetadataMerger.java:1688)
    at com.ibm.ws.websvcs.deployment.WSServerMetadataMerger.mergeMetadata(WSServerMetadataMerger.java:746)
    at com.ibm.ws.websvcs.desc.WSModuleDescriptorImpl.initDBCMap(WSModuleDescriptorImpl.java:2058)
    at com.ibm.ws.websvcs.desc.WSModuleDescriptorImpl.buildJAXWSServices(WSModuleDescriptorImpl.java:1303)
    at com.ibm.ws.websvcs.desc.WSModuleDescriptorImpl._containsJAXWSWebServices(WSModuleDescriptorImpl.java:481)
    at com.ibm.ws.websvcs.desc.WSModuleDescriptorImpl.containsJAXWSWebServices(WSModuleDescriptorImpl.java:456)
    at com.ibm.ws.webservices.admin.utils.ServiceContainmentHelper.<init>(ServiceContainmentHelper.java:71)
    at com.ibm.ws.webservices.admin.utils.CommonUtils.getServiceContianmentHelper(CommonUtils.java:690)
    at com.ibm.ws.webservices.admin.utils.CommonUtils.hasWebServices(CommonUtils.java:295)
    at com.ibm.ws.webservices.admin.utils.CommonUtils.hasJAXWSWebServices(CommonUtils.java:238)
    at com.ibm.ws.webservices.admin.deploy.DeploymentValidation.getWebServiceType(DeploymentValidation.java:309)
    at com.ibm.ws.webservices.admin.deploy.DeploymentValidation.validateEarModules(DeploymentValidation.java:381)
    at com.ibm.ws.webservices.admin.deploy.DeploymentValidation.validateOperation_Required(DeploymentValidation.java:204)
    at com.ibm.ws.management.application.task.ValidateAppTask.performTask(ValidateAppTask.java:392)
    at com.ibm.ws.management.application.SchedulerImpl.run(SchedulerImpl.java:315)
    at java.lang.Thread.run(Thread.java:772)
Caused by: java.lang.RuntimeException: WSWS7035E: The http://www.w3.org/2001/XMLSchema.dtd metadata file could not be found.
    at com.ibm.ws.websvcs.wsdl.BaseWSDLLocator.getImportInputSource(BaseWSDLLocator.java:251)
    at com.ibm.wsdl.xml.EntityResolverAdapter.resolveEntity(EntityResolverAdapter.java:40)
    at org.apache.xerces.util.EntityResolverWrapper.resolveEntity(Unknown Source)
    at org.apache.xerces.impl.XMLEntityManager.resolveEntity(Unknown Source)
    at org.apache.xerces.impl.XMLDocumentScannerImpl$DTDDispatcher.dispatch(Unknown Source)
    at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
    at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
    at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
    at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)
    at org.apache.xerces.parsers.DOMParser.parse(Unknown Source)
    at org.apache.xerces.jaxp.DocumentBuilderImpl.parse(Unknown Source)
    at com.ibm.wsdl.xml.WSDLReaderImpl.getDocument(WSDLReaderImpl.java:2245)
    at com.ibm.wsdl.xml.WSDLReaderImpl.parseSchema(WSDLReaderImpl.java:869)
    at com.ibm.wsdl.xml.WSDLReaderImpl.parseSchema(WSDLReaderImpl.java:903)
    at com.ibm.wsdl.xml.WSDLReaderImpl.parseSchema(WSDLReaderImpl.java:691)
    at com.ibm.wsdl.xml.WSDLReaderImpl.parseTypes(WSDLReaderImpl.java:647)
    at com.ibm.wsdl.xml.WSDLReaderImpl.parseDefinitions(WSDLReaderImpl.java:353)
    at com.ibm.wsdl.xml.WSDLReaderImpl.readWSDL(WSDLReaderImpl.java:2409)
    at com.ibm.wsdl.xml.WSDLReaderImpl.readWSDL(WSDLReaderImpl.java:2373)
    at com.ibm.wsdl.xml.WSDLReaderImpl.readWSDL(WSDLReaderImpl.java:2426)
    at com.ibm.wsdl.xml.WSDLReaderImpl.readWSDL(WSDLReaderImpl.java:2447)
    at com.ibm.wsdl.xml.WSDLReaderImpl.readWSDL(WSDLReaderImpl.java:2481)
    at com.ibm.ws.websvcs.deployment.WSServerMetadataMerger.attachWSDLDefinition(WSServerMetadataMerger.java:1818) 
```

WAS 是否真的试图下载 DTD frow W3C 服务器但未能做到这一点？我无法直接访问服务器机器，所以我无法直接验证它（但我可以问）。我们在 Windows 系统上的 WAS 7.0 和 WAS 8.5 上成功地部署了相同的 JAX-WS Web 服务（并且我们确信 WAS 在部署在 Windows 服务器上时不会尝试从 Internet 下载任何 DTD）。

任何想法？

谢谢，乔瓦尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T16:59:37.107

我不知道具体的答案，但我有几个想法可以贡献。

您是否将您在 Windows 上部署的 EAR/WAR 与您在 *nix 安装上部署的 EAR/WAR 进行了比较？我假设它们是相同的，但我要检查该错误的第一件事是确保 WEB-INF/wsdl/KeyPushTargetService.wsdl 存在于您的部署工件中。

如果 WAS 试图下载 XMLSchema 定义，我会觉得很奇怪。这可能表明服务器存在一些配置问题。如果您想对此进行测试，您可以尝试创建另一个基本的 JAX-WS 服务（如 HelloWorld 示例）来部署并查看是否遇到相同的问题。

作为最后的手段，您还可以尝试将 DTD 放入您的 EAR/WAR 中，看看这是否会使问题消失。我不会使用永久修复，但它可能会让你暂时移动。

让我知道这些是否可行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-02T18:29:47.730

检查您的运行时 jar 以获取 xml 解析器 - 看起来您遇到了类路径问题。

# javascript - 动态设置图片可拖动

> ID：15161039
> 
> 赞同：0
> 
> 时间：2013-03-01T15:19:12.600
> 
> 标签：javascript, image, draggable

我在将图像设置为可拖动时遇到问题。此代码似乎不起作用：

```
var thumb = document.createElement("img");
thumb.setAttribute('draggable', "true"); 
```

我创建图像并将其附加到 DOM，如下所示： var thumb = document.createElement("img");

```
 thumb.setAttribute('draggable', "true");
        thumb.setAttribute('alt', label);
        thumb.setAttribute('id', "dhmvseries_" + label);
        thumb.setAttribute("dhmvseriesuuid",label);

        thumb.ondragstart =  thumbDragStart;
        thumb.ondragend = thumbDragEnd;
        thumb.onmouseover = displayThumbInfo;
        thumb.onmouseout = hideThumbInfo;

var thinner = createElement("div", "dhThumbImage dhRounded");
thinner.appendChild(thumb); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:47:09.307

我在我正在构建的旨在与闭包编译器一起使用的公共域库中使用这些。

```
/** drag(node n, property p)
 *  sets dataTransfer text to value of property p when node n is dragged
**/
function drag(n,p){n['draggable']=1
    n['ondragstart']=function(a){a.dataTransfer.setData("Text",a.target?a.target[p]:a.srcElement[p])}}

/** drop(node n, function f)
 *  sets a drop event handler for node n that uses function f as its handler
 *  function f will be passed: the target node and the dataTransfer "Text" value
ex. var f=function(t,s){t.style.backgroundColor=s} //sets background the Text value
 *  * the "Text" is set to the value of property p in the drag event
 *  see drag(node n, property p)
**/
function drop(n,f){n['ondragover']=F
    n['ondrop']=function(a){f(n,a.dataTransfer.getData("Text"))
    return!!0}} 
```

# php - 在php中解码JSON数组

> ID：15161041
> 
> 赞同：-4
> 
> 时间：2013-03-01T15:19:21.993
> 
> 标签：php, arrays, json, object

我在 PHP 中有这个 JSON 数组，我从 Android 请求接收到它，我想对其进行解码，以便我可以在循环中获取每个对象的每个值并将它们发送到 mysql 数据库。

因此，在下面的示例中，有一个包含两个对象的类，包括属性 FirstName 和 LastName。我想解析这个 json，以便我可以在 PDO 函数中使用它们，该函数将这些行插入到 mysql 数据库中。

```
[
{ "firstName":"John" , "lastName":"Doe" }, 
{ "firstName":"Anna" , "lastName":"Smith" }, 
{ "firstName":"Peter" , "lastName":"Jones" }
] 
```

我该如何做到这一点。经过大量的试验和错误，它仍然无法正常工作。提前致谢！

编辑： json_decode 毕竟工作。JSON 语法问题是问题所在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T15:21:25.767

采用[`json_decode()`](http://www.php.net/manual/en/function.json-decode.php)

```
$json = '[
{ "firstName":"John" , "lastName":"Doe" }, 
{ "firstName":"Anna" , "lastName":"Smith" }, 
{ "firstName":"Peter" , "lastName":"Jones" }
]';
$json_decoded = json_decode($json);
var_dump($json_decoded); 
```

[看到它在行动](http://codepad.viper-7.com/Zsq1oB)

# python - 比较列表和字符串

> ID：15161042
> 
> 赞同：0
> 
> 时间：2013-03-01T15:19:23.970
> 
> 标签：python, comparison

lettersGuessed 是一个字母列表

```
def isWordGuessed(secretWord, lettersGuessed):
  listA = {'a','b','c','p','o','e','p','l'}
  abc = "apple" 
```

现在如果（部分或全部）在列表（listA）中猜测的字母包含在字符串中的所有字母（字符）中，那么它应该返回一个真正的布尔值......

但每次我做这个问题时，我都会得到一个错误的回报......即使上面的例子应该明确地返回“真”

那么任何人都可以帮助我吗？

非常感谢！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T15:23:35.693

您可以执行以下操作：

```
abc = 'apple'
setA = {'a','b','c','p','o','e','p','l'}
sabc = set(abc) 
print len(sabc) == len(sabc & setA) 
```

当然，这有点误导。你想在什么情况下发生`setA = { 'a','p','l','e' }`？这仍然会返回`True`，因为没有考虑到重复项。如果您需要考虑重复项，我建议您使用`Collections.Counter`：

```
from collections import Counter

def compare(word,guesses):
    return Counter(word) <= Counter(guesses) 
```

这是有效的，因为它确保字母的`word`数量总是小于猜测中相应字母的数量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T15:23:45.917

使用集：

```
>>> set('apple')<{'a','b','c','p','o','e','p','l'}
True
>>> set('abc')<{'a','b','c','p','o','e','p','l'}
True 
```

比较`<` [集 1 作为集 2 的完整子集](http://docs.python.org/2/library/stdtypes.html#set)

但是，正如@mgilson 所指出的，这对于具有重复项的字符串是不准确的。

按照他的建议使用计数器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T15:24:05.273

或者您可以使用`any`：

```
>>> letters_guessed = 'abc'
>>> letters_in_word = 'abcdefghi'
>>> any(letter for letter in letters_guessed if letter in letters_in_word)
True
>>> letters_guessed = 'zzz'
>>> any(letter for letter in letters_guessed if letter in letters_in_word)
False 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T16:14:10.153

正如有人所说，您的帖子样本不会返回任何内容。这是我想出的东西，但它不像其他的那样优雅。

```
actualWord = "apple"
guessList = ["a","b","c","e","l"]

def WordGuessed(secretWord, lettersGuessed):
    listSW = list(secretWord)
    answer = True
    for item in listSW:
        if item not in lettersGuessed:
            answer = False
            break
    return answer

print WordGuessed(actualWord,guessList) 
```

# razor - Webmatrix/Razor SQL 查询 - Websecurity 变量

> ID：15161046
> 
> 赞同：2
> 
> 时间：2013-03-01T15:19:31.927
> 
> 标签：razor, webmatrix, webmatrix-2, razor-declarative-helpers

我正在尝试编写一个查询来显示当前登录用户拥有的所有记录，但我在将“userid”变量插入字符串时遇到问题？

```
@{
Layout = "~/_template1.cshtml";
var db = Database.Open("StayInFlorida");

var userid = WebSecurity.CurrentUserId;
var premierproperty = "SELECT PropertyName, PropertyID FROM PropertyInfo WHERE OwnerID='userid'";
}

<h1>Properties - Page coming soon</h1>

@userid

@foreach (var row in db.Query(premierproperty)){
@row.propertyname
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T15:28:35.623

试试这样：

```
@{
    Layout = "~/_template1.cshtml";
    var db = Database.Open("StayInFlorida");
    var userid = WebSecurity.CurrentUserId;
    var premierproperty = "SELECT PropertyName, PropertyID FROM PropertyInfo WHERE OwnerID = @0";
}

<h1>Properties - Page coming soon</h1>

@userid

@foreach (var row in db.Query(premierproperty, userid))
{
    @row.propertyname
} 
```

# ios - 自定义视图控制器显示

> ID：15161047
> 
> 赞同：0
> 
> 时间：2013-03-01T15:19:34.593
> 
> 标签：ios, xcode, arrays, uiviewcontroller

我认为这可能是一个简单的问题，但我似乎无法弄清楚。我有一个屏幕显示来自数组的问题。当数组到达末尾时，我希望它显示我创建的另一个 VC。与我所有的其他 VC 一起，他们在故事板中使用它们之间的 segues 连接。但是，如果我已经到达数组的末尾，我只想显示这个屏幕？我正在尝试做的事情有意义吗？或者有没有人知道我可以查看任何有用的教程来为自己弄清楚？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:58:34.830

您可以使用您在情节提要的 segue 上设置的 segue 标识符，使用**performSegueWithIdentifier:sender:**方法“手动”触发一个 seque 。当您调用该方法时，系统会设置正确的信息，然后执行**prepareForSegue:sender:**然后实际执行 segue - 因此设置看起来与自动 segue 触发器相同。您可以“手动”使用标识符执行任何 segue。

至于创建要执行的转场，您可以在情节提要中创建从一个视图控制器到另一个视图控制器的转场（即从侧边栏中的视图控制器控制拖动，而不是从按钮或 TableView 单元格或其他任何东西）。这种转场必须“手动”执行。

您调用“NextVCPlease”segue 可能如下所示：

```
if (lastQuestionDone) {
     [self performSegueWithIdentifier:@"NextVCPlease" sender:whateverMakesSense]
} 
```

# asp.net - 表命名 - 解决方案资源管理器

> ID：15161050
> 
> 赞同：0
> 
> 时间：2013-03-01T15:19:48.857
> 
> 标签：asp.net

我可以在服务器资源管理器中查看我的表，但是如何找出它们在我的项目中实际调用的内容，例如在服务器资源管理器中，一个表称为“工作站点”，但在我的项目中引用它时如下所示：NavigateUrl= “~/Work_Sites/List.aspx”

更改为“Work_Sites”

我在哪里可以查看这些表的名称？

谢谢

# python - Django：在`manage.py shell`中自动执行语句

> ID：15161051
> 
> 赞同：2
> 
> 时间：2013-03-01T15:19:51.460
> 
> 标签：python, django, shell

每次我使用 启动 shell 时`python manage.py shell`，我都希望自动执行几行。（在我的情况下，它将是一些风格的导入行`import django, my_app`。）

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T15:29:36.937

该软件包`django-extensions`可以满足您的要求。如果您`pip install django-extensions`，并且您可以像往常一样添加应用程序（在您的应用程序列表中，然后`run syncdb`），那么您会得到一个名为`shell_plus`.

如果您运行，该命令会自动加载您的*所有*`python manage.py shell_plus`模型。真的好用！如果结合 IPython 的强大功能，您将获得一个使用 django ORM 与模型交互的良好环境。

更多信息：

*   对于包：[https ://github.com/django-extensions/django-extensions](https://github.com/django-extensions/django-extensions)
*   关于 shell_plus 的文档：http: [//pythonhosted.org/django-extensions/shell_plus.html](http://pythonhosted.org/django-extensions/shell_plus.html)
*   对于 django-extensions 的文档：http: [//pythonhosted.org/django-extensions/](http://pythonhosted.org/django-extensions/)

希望这可以帮助。它可能比编写启动脚本的工作量少。作为一个额外的 django-extensions 为您提供了很棒的功能，例如`graph_models`（可以为您提供数据库的 png 绘图）和 show_urls。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-01T18:15:28.720

我最终用猴子补丁`IPython.frontend.terminal.embed.InteractiveShellEmbed.__call__`添加了我想要的定义。（我知道很多人反对猴子补丁，但我发现在这种情况下它是一个很好的解决方案。）

# android - Android 更改 ListView 行宽以匹配非常宽屏幕上的屏幕宽度

> ID：15161054
> 
> 赞同：0
> 
> 时间：2013-03-01T15:19:56.253
> 
> 标签：android, listview, android-arrayadapter

我有一个`ListView`使用自定义行布局，每个布局由`TextView`水平的 6 个小部件组成。
即使在横向模式下，每一行都比大多数手机屏幕宽。
但在一些高端平板电脑上，行宽比横屏宽度要短。

***如何检测屏幕比该`ListView`行更宽，然后更改最后一个`TextView`小部件的宽度以匹配屏幕宽度？***

我不想让行*默认*变宽，因为它们对于普通设备**来说太宽了。**
我试图检查`ListView`适配器`getView()`方法中的宽度，但是所有宽度都是 0，甚至是`convertView`宽度，布局膨胀后的事件。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/layout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <TextView 
        android:id="@+id/log_time"
        android:layout_width="135dp"
        android:layout_height="wrap_content"
        android:padding="3dp"
        android:textSize="14sp" >
    </TextView>

    <TextView 
        android:id="@+id/log_level"
        android:layout_width="20dp"
        android:layout_height="wrap_content"
        android:padding="3dp"
        android:textSize="14sp" >
    </TextView>

    <TextView 
        android:id="@+id/log_pid"
        android:layout_width="50dp"
        android:layout_height="wrap_content"
        android:padding="3dp"
        android:textSize="14sp" >
    </TextView>

    <TextView 
        android:id="@+id/log_tid"
        android:layout_width="50dp"
        android:layout_height="wrap_content"
        android:padding="3dp"
        android:textSize="14sp" >
    </TextView>

    <TextView 
        android:id="@+id/log_tag"
        android:layout_width="150dp"
        android:layout_height="wrap_content"
        android:padding="3dp"
        android:maxLines="1"
        android:singleLine="true"
        android:ellipsize="end"
        android:textSize="14sp" >
    </TextView>

    <TextView 
        android:id="@+id/log_message"
        android:layout_width="600dp"
        android:layout_height="wrap_content"
        android:padding="3dp"
        android:maxLines="1"
        android:singleLine="true"
        android:ellipsize="end"
        android:textSize="14sp" >
    </TextView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:32:50.770

您可以将所有内容封装`TextViews`在 a`RelativeLayout`中，然后使用`RelativeLayout`的对齐属性使最后一个元素填充剩余的屏幕空间。

例如：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_toRightOf="@+id/textView1" />

</RelativeLayout> 
```

第二个`TextView`设置为与第一个的右侧对齐，并与其父级的右边缘对齐。因此，它将填充`TextView`.`RelativeLayout`

# javascript - Backbone.js：this.model 未定义

> ID：15161055
> 
> 赞同：0
> 
> 时间：2013-03-01T15:19:57.780
> 
> 标签：javascript, backbone.js, url-routing

在过去的两周里，我一直在尝试学习 Backbone.js，然后还使用 Require.js 对应用程序进行了模块化。但似乎在初始化和获取的整个过程中我没有得到一些东西。

我有两条路线，一条展示整个系列，而另一条只展示一个单独的模型。而且我希望能够使用两条路线中的任何一条来启动应用程序。

如果我开始加载集合 url，然后在单个模型 url 上加载，一切都会按预期工作。如果我使用指向单个模型的 url 路由启动应用程序，则会收到错误：`TypeError: this.model is undefined this.$el.html(tmpl(this.model.toJSON()));`在视图上。

如果我为模型设置默认值，它会渲染视图但不会使用真实数据获取它。我也尝试在模型的 fetch 函数中处理成功事件，但没有任何运气。

**路由器.js**

```
define(['jquery','underscore','backbone','models/offer','collections/offers','views/header','views/event','views/offer/list', 
], function($, _, Backbone, OfferModel, OffersCollection, HeaderView, EventView, OfferListView){

var AppRouter = Backbone.Router.extend({    

routes: {
    'event/:id' : 'showEvent',
  '*path': 'showOffers'
},

initialize : function() {       
    this.offersCollection = new OffersCollection();
    this.offersCollection.fetch();
    var headerView = new HeaderView();
    $('#header').html(headerView.render().el);          
},

showEvent : function(id) {
    if (this.offersCollection) {
        this.offerModel = this.offersCollection.get(id);
    } else {
        this.offerModel = new OfferModel({id: id});
        this.offerModel.fetch();
    }       
    var eventView = new EventView({model: this.offerModel});    
    $('#main').html(eventView.render().el);     
},

showOffers : function(path) {
    if (path === 'betting' || path === 'score') {
        var offerListView = new OfferListView({collection: this.offersCollection, mainTemplate: path});  
      $('#main').html(offerListView.render().el) ;       
    }       
},    
});

var initialize = function(){    
  window.router = new AppRouter;
  Backbone.history.start();
};

return {
  initialize: initialize
};
}); 
```

**意见/事件.js**

```
define(['jquery','underscore','backbone','text!templates/event/main.html',
], function($, _, Backbone, eventMainTemplate){

var EventView = Backbone.View.extend({
    initalize : function(options) {
        this.model = options.model; 
        this.model.on("change", this.render);       
    },

    render : function() {
        var tmpl = _.template(eventMainTemplate);
        this.$el.html(tmpl(this.model.toJSON()));
        return this;
    }
});

return EventView;   
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:40:16.980

`initialize`您正在路由器的方法中创建和获取 OffersCollection ，因此永远不会命中该`else`块，因为它始终是真实的。`showEvent``this.offersCollection`

在评论之后，我认为你需要这样做：

```
showEvent : function(id) {
    var that = this;
    var show = function(){
       var eventView = new EventView({model: that.offerModel});    
       $('#main').html(eventView.render().el); 
    };
    // offersCollection is always defined, so check if it has the model
    if (this.offersCollection && this.offersCollection.get(id)) {
        this.offerModel = this.offersCollection.get(id);
        show();
    } else {
        this.offerModel = new OfferModel({id: id});
        this.offerModel.fetch().done(function(){
           // model is fetched, show now to avoid your render problems.
           show();
        });
        // alternatively, set the defaults in the model,
        // so you don't need to wait for the fetch to complete.
    }       

} 
```

# r - R中的双循环图

> ID：15161056
> 
> 赞同：1
> 
> 时间：2013-03-01T15:19:58.840
> 
> 标签：r, loops, plot

我的问题是关于 for 循环与 R 中的 plot 函数相结合的问题。我想在一个图中绘制多个点。我不知道我的功能有什么问题。请问有什么帮助吗？

```
DATA
 a x y  z
149 1 1  0
153 1 1 10
160 1 1 10
149 1 2  0
153 1 2  0
160 1 2 10
149 2 1  0
153 2 1  0
160 2 1  5
149 2 2  0
153 2 2  0
160 2 2  5

PCH=0;
plot(c(142,169),c(0,11),type="n")
for(i in unique(DATA$x)) {
  for(j in unique(DATA$y)) {
    PCH=PCH+1
    select <- DATA[i,j]
    X = DATA[select,"a"]; 
    Y = DATA[select,"z"]
    points(X,Y,pch=PCH)
  }  
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T15:39:45.283

这是否偶然地达到了你想要达到的目的？

```
plot(z~a,data=DATA,
         pch=as.numeric(interaction(x,y)),
         xlim=c(142,169),ylim=c(0,11)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T15:39:19.530

你的选择是错误的。试试下面的代码：

```
PCH <- 0
plot(c(142,169), c(0,11), type="n")
for(i in unique(DATA$x)) {
  for(j in unique(DATA$y)) {
    PCH <- PCH+1
    select <- DATA$x == i & DATA$y == j
    X <- DATA[select,"a"] 
    Y <- DATA[select,"z"]
    points(X,Y,pch=PCH)
  }  
} 
```

请注意，使用`<-`而不是更好的样式`=`，因为`=`它也用于其他具有其他句法含义的目的。此外，您不需要`;`在 R 中的行尾。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T15:42:39.830

您的 X 和 Y 值已关闭..您不需要 select 语句

```
 plot(c(142,169),c(0,11),type="n")
  for(i in unique(DATA$x)) {
    for(j in unique(DATA$y)) {
      PCH=PCH+1
      X = DATA[(DATA$x==i) & (DATA$y==j),"a"]; 
      Y = DATA[(DATA$x==i) & (DATA$y==j),"z"]
     (points(X,Y,pch=PCH))
    }  
  } 
```

# javascript - 如何将静态数据附加到动态生成的 url 的末尾？

> ID：15161057
> 
> 赞同：0
> 
> 时间：2013-03-01T15:20:02.907
> 
> 标签：javascript, jquery, forms, url, redirect

我们正在从输入到表单中的数据生成动态 url。我们目前可以将此动态表单数据附加到 url 中，但需要在动态数据的 END 处包含静态数据。

这是附加数据的 jQuery 的最后一部分：

```
 var inputs = $('#form1').find('input[type=text]').not('#url');
 var str = "http://yoururlhere.com/dispatch.aspx?"
 var str2 = "&promoid=5030385&option1=999"
 inputs.each(
     function (i, item) {
         str += encodeURIComponent(item.name) + 
             "=" + 
             encodeURIComponent(item.value) + 
             "&";
     });

$('http://yoururlhere.com/dispatch.aspx?').val(str+str2);

 }); 
```

我们得到的最终结果： `http://yoururlhere.com/dispatch.aspx?address=1290 atlantis ave&zip=80026`

这就是我们正在努力实现的目标： `http://yoururlhere.com/dispatch.aspx?address=1290 atlantis ave&zip=80026&promoid=5030385&option1=999`

对于每个表单条目，最后一位 ( `promoid=5030385&option1=999`) 将是常量。

****编辑****

我通过将静态数据作为隐藏字段放在 html 中来解决它：

```
 <input type="hidden" name="promoid" value="5030385" id="promoid"/> 
```

谢谢大家的意见和帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:23:09.210

尝试这个

```
 var inputs = $('#form1').find('input[type=text]').not('#url');
  var str = "http://yoururlhere.com/dispatch.aspx?"
  var str2 = "&amp;promoid=5030385&option1=999"

   inputs.each(function (i, item) {
   str += encodeURIComponent(item.name) + "=" + encodeURIComponent(item.value) + "&";
 });
   str = str+str2;
}); 
```

# c++ - 获得等级“x”（C++）所需的最低分数（解释）

> ID：15161060
> 
> 赞同：0
> 
> 时间：2013-03-01T15:20:10.303
> 
> 标签：c++

我正在在线挑战 C++，我被困在这部分。

基本上，挑战如下。

“Derp 是一所大学的学生。他最喜欢的课是数学。年底快到了，Derp 会问自己最后一次考试需要多少分才能获得“K”级。

老师今年做了 5 次考试，一次考试最高可得 100 分。

```
If <=60 = Grade : 1
If >=60 && <= 69 = Grade : 2
If >=70 && <= 79 = Grade : 3
If >=80 && <= 89 = Grade : 4
If >=90 && <= 100 = Grade: 5 
```

如果您获得 89.8 分，您将获得 4 级，而不是 5 级。我们知道他的前四个测试的结果 - T1、T2、T3、T4。我们必须找出 Derp 在最后一次测试中需要多少最低分才能获得他想要的“K”级。

输入：在输入中，我们首先用 Derp "K" (2<= K <= 5) 输入想要的成绩。在第二行，我们输入他的前四次测试的结果。(0 <= T1,T2,T3,T4 <=100)

输出：我们必须输出 Derp 在最后一次考试中需要获得的最低分数，以便获得他想要的数学成绩“K”。如果 Derp 没有机会获得“K”级，即使他的最后一次测试有最高分，我们必须输出“不可能”。

例子：

输入：5 100 100 100 100

输出：50

输入：5 10 20 30 40

输出：不可能

输入：2 100 100 100 100

输出：0

输入：4 83 74 79 73

输出：91

这是我到目前为止所得到的。

```
#include <iostream>

using namespace std;

int main()
{
    int grade;
    cin >> grade;
    int t1,t2,t3,t4;
    cin >> t1 >> t2 >> t3 >> t4;
    if((t1+t2+t3+t4)/4<=59)
    {
        cout << "Grade: 1\n";
    }
    else if((t1+t2+t3+t4)/4>=60 && (t1+t2+t3+t4)/4<=69)
    {
        cout << "Grade: 2\n";
    }
    else if((t1+t2+t3+t4)/4>=70 && (t1+t2+t3+t4)/4<=79)
    {
        cout << "Grade: 3\n";
    }
    else if((t1+t2+t3+t4)/4>=80 && (t1+t2+t3+t4)/4<=89)
    {
        cout << "Grade: 4\n";
    }
    else if((t1+t2+t3+t4)/4>=90 && (t1+t2+t3+t4)/4<=100)
    {
        cout << "Grade: 5\n";
    }
    int t5;
    return 0;
} 
```

我也做了一些数学运算，得出了这个结论。

(100+100+100+100+x)/5>=90

(400+x)/5>=90

80+x/5 >= 90

x/5 >= 10

x >= 50

这基本上是上面的第一个示例输入/输出，以数学方式。我不确定我将如何编码。欢迎任何想法！

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:26:45.857

(t1 + t2 + t3 + t4 + t5)/5 = K
其中 K 等于给定 K 范围内的最小数。（如果为 3，则 K = 70）

求解 t5：

t5 = 5k - t1 - t2 - t3 - t4

如果 t5 <= 100，那么 t5 就是你的答案，否则它是不可能的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T15:28:28.423

关键是您必须使用所需的平均点数来计算结果。基本上，如果获得 5、4、3 和 2 所需的平均值分别为 90、80、70 和 60，那么五次测试的分数之和为 450、400、350 和 300。如果Derp需要的分数减去他目前的分数超过100分，那么不可能得到更好的分数。实际的实现可能如下所示：

```
int main()
{
    int mark;
    int t1, t2, t3, t4;

    std::cin >> mark >> t1 >> t2 >> t3 >> t4;
    int total = t1 + t2 + t3 + t4;
    int total_needed = 5 * (60 + (mark - 2) * 10);
    int diff = total_needed - total;

    if (diff > 100) {
    std::cout << "Impossible" << std::endl;
    } else if (diff <= 0) {
        std::cout << "You have already got enough points" << std::endl;
    } else {
        std::cout << diff << " points needed yet" << std::endl;
    }

    return 0;
} 
```

# c# - 监控远程 cmd.exe 进程的完成状态

> ID：15161063
> 
> 赞同：1
> 
> 时间：2013-03-01T15:20:19.583
> 
> 标签：c#, .net, wmi, wmic, tableau-api

我通过使用我的表单应用程序使用 WMI 发布仪表板，在计算机 B 中运行计算机 A 中的 .bat 文件。.bat 文件多次调用命令行实用程序 tabcmd.exe，实用程序更新计算机 A 中以下位置 **“C:\Users[UserName]\AppData\Roaming\Tableau\tabcmd.log”中的日志文件**

一旦在计算机 A 中完成该过程后，我想使用计算机 B 中的日志文件详细信息更新我的表单应用程序。我正在使用如下所示运行 .bat 文件，

```
 String path = @"C:\tabcmd.bat";
        String machineName = textBox1.Text;            
        var processToRun = new[] { path  };
        var connection = new ConnectionOptions();
        connection.Username = textBox3.Text;
        connection.Password = textBox2.Text;
        var wmiScope = new ManagementScope(String.Format("\\\\{0}\\root\\cimv2", machineName), connection);
        var wmiProcess = new ManagementClass(wmiScope, new ManagementPath("Win32_Process"), new ObjectGetOptions());
        wmiProcess.InvokeMethod("Create", processToRun); 
```

这个.bat文件基于动态数据源参数在计算机B中发布仪表板，所以.bat文件的运行时间是不可预测的，这种情况下如何确保.bat文件运行或更新日志文件完成。

有没有办法通过进程ID来监控这个进程？如果是这样，我可以在我的过程完成后读取日志文件。在这种情况下，以下内容对我没有帮助，因为 cmd.exe 仍在目标计算机 A 中运行。

```
 System.Diagnostics.Process prc = System.Diagnostics.Process.GetProcessById(10100, "CHORRL0110")
  prc.WaitForExit () 
```

谢谢你的帮助！

# oracle - 使用 PL/SQL 在触发器中中止插入/更新操作

> ID：15161064
> 
> 赞同：1
> 
> 时间：2013-03-01T15:20:21.447
> 
> 标签：oracle, plsql, oracle11g

我要编写一个触发器来检查一些插入/更新的信息，将它们与数据库中的数据进行比较，如果它们不正确，则停止整个操作。我在触发器（每个）之前编写，然后如果出现问题，则抛出应用程序异常，但它不起作用，因为我从更新的表中读取，所以我得到 ORA-04091 错误。

现在我想知道如何解决这个问题？现在我唯一的想法是编写一个前触发器，将一些必要的数据插入到包中，并使用后触发器读取它们，这不是每个都适用的。但是有一个问题如何中止这个版本？如果我进行回滚，它将撤消此事务中我认为不明智的所有操作。你将如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T15:39:45.167

不要去那里。

`ORA-04091: table XXXX is mutating`通常是一个很好的指标，表明您尝试做的任何事情都太复杂而无法通过触发器**可靠地完成。**

当然，您可以使用[包数组变量和一些触发器（啊！）](http://asktom.oracle.com/pls/asktom/ASKTOM.download_file?p_file=6551198119097816936)来解决此错误，但您的代码很可能会：

*   由于其复杂性和触发器的不可预测性而无法维护
*   对多用户环境反应不佳

这就是为什么您在遇到此错误时应该重新考虑您的方法。我建议您构建一组很好地分组在一个包中的程序来处理行间一致性。撤销所有权限以直接对表进行 DML，并仅使用这些过程对其进行修改。

例如，您的更新过程将是一个**原子**过程，它将：

1.  获取锁以防止对同一组行进行并发更新（例如锁定酒店预订应用程序中的房间记录）。
2.  检查要插入的行是否验证所有业务逻辑
3.  制作所有相关的 DML
4.  在发生错误时回滚其所有更改（并且仅回滚其更改 - 而不是整个事务）（使用 PL/SQL 很容易，只需引发错误）。

# jasper-reports - 如何在 iReport 中制作动态图像？

> ID：15161066
> 
> 赞同：0
> 
> 时间：2013-03-01T15:20:26.517
> 
> 标签：jasper-reports, ireport

我的报告中有一张图片。在图像表达中，我想做这样的事情：

```
if ($F{num} >= 10) {
    "C:\\Users\\zoudi\\workspace\\bfms\\red.jpg"
}
else if ($F{num} > 0) {
    "C:\\Users\\zoudi\\workspace\\bfms\\red.jpg"
}
else {} 
```

显然，这种语法是不正确的。创建这样的动态图像的正确方法是什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:47:52.530

如果您使用的是 Groovy，请尝试：

```
 ($F{num} >= 10) ? "C:\\Users\\zoudi\\workspace\\bfms\\red.jpg" : 
     ($F{num} > 0) ? "C:\\Users\\zoudi\\workspace\\bfms\\blue.jpg" :
           "C:\\Users\\zoudi\\workspace\\bfms\\yellow.jpg" 
```

# c - 是否使用一个函数，该函数使用空指针作为 C 中有效的参数分配给空指针？

> ID：15161073
> 
> 赞同：1
> 
> 时间：2013-03-01T15:20:44.833
> 
> 标签：c, singly-linked-list

我试图插入到链表的前面，并在 head 为 NULL 时返回分配的 head，但它似乎只在 head 不为 NULL 的情况下工作。

本质上，如果

```
node* x = NULL; 
```

是

```
x = addfront(x, 3) 
```

有效的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T15:22:40.533

只要您不尝试取消引用它们，空指针就可以了。

就像是

```
node* x = NULL;
x = NULL; 
```

完全没问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T15:22:43.173

> 是否使用一个函数，该函数使用空指针作为 C 中有效的参数分配给空指针？

这取决于`addfront`内容。只要您不取消引用`x`in `addfront`，它就完全有效，因为取消引用空指针是一种未定义的行为。

> 它似乎只在 head 不为 NULL 的情况下才有效。

我们需要`addfront`源代码。如果您不取消引用`x`，则错误在其他地方。

# jquery - 将外部页面插入 Jquery Mobile

> ID：15161074
> 
> 赞同：0
> 
> 时间：2013-03-01T15:20:51.330
> 
> 标签：jquery, ajax, mobile, external

我首先是一名设计师，所以要注意我的编程能力非常有限。我想做的是在我的 jquery 移动网页中插入一个外部页面。为此，我使用外部链接，它在 safari 中运行良好。

外部链接的问题是，当我将 web 应用程序保存到我的主屏幕时，除了外部链接之外，一切都像本机应用程序一样工作。单击这些后，我将进入 safari，并且后退按钮不再起作用。

所以我的问题是，我怎样才能将这个外部页面放入应用程序中，而无需返回 safari？我一直在论坛和谷歌上四处寻找，猜想我需要使用“pageinit”吗？但老实说，我真的不知道如何使用它。

如果有人能帮我解决这个问题，我会很高兴，因为我已经用这个工作了好几天了。

这是我的代码：

外部的：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta content="width=device-width, minimum-scale=1, maximum-scale=1" name="viewport">
<title>Test</title>
<style> 
    .smooth_zoom_preloader {
        background-image: url(zoom_assets/preloader.gif);
    }   
    .smooth_zoom_icons {
        background-image: url(zoom_assets/icons.png);
    }
    #zoom_container .landmarks{
        position:absolute;
        z-index:10; 
        top:0px;
        left:0px;
        font-family: Helvetica, Arial, Verdana;
        font-size:12px;
        color: #ffffff;
    }   
    #zoom_container .landmarks .item {
        position:absolute;      
        text-align:center;      
        display: none;  
    }   
    #zoom_container .landmarks .lable div {
        width: 100px;
        padding: 4px;       
    }   
    #zoom_container .landmarks .mark .text{
        background-color:#000000;
        padding:2px 6px;
    }   
</style>
<link href="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.css" rel="stylesheet" type="text/css"/>
<script src="zoom_assets/jquery-1.7.1.min.js"></script>
<script src="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.js" type="text/javascript"></script>
<script src="zoom_assets/jquery.smoothZoom.min.js"></script>
<script>
jQuery(function($){
        $('#yourImageID').smoothZoom({          
            width: 800,
            height: 1200,
            pan_BUTTONS_SHOW: "NO",
            pan_LIMIT_BOUNDARY: "NO",
            button_SIZE: 24,
            button_ALIGN: "top right",  
            zoom_MAX: 200,
            border_TRANSPARENCY: 0,
            container: 'zoom_container',

            /******************************************
            Enable Responsive settings below if needed.
            Max width and height values are optional.
            ******************************************/
            responsive: true,
            responsive_maintain_ratio: true,
            max_WIDTH: '',
            max_HEIGHT: ''
        }); 
    });

</script>

</head>

<body>
<div data-role="page" id="page6">
    <div data-role="header" data-theme="b">
      <h1>Test</h1><a href="#" data-rel="back">Tillbaka</a>
    </div>
<div id="zoom_container">
    <img id="yourImageID" src="images/Test1" width="3200" height="4800" />

    <div class="landmarks" data-show-at-zoom="100" data-allow-drag="true">    

        <!-- This is a mark-type landmark -->
        <div class="item mark" data-position="1600,1500" data-show-at-zoom="0">
            <div>
                <div class="text">
                    <strong>Test</strong>
                </div>
                <img src="images/mark.png" width="30px" height="30px" alt="Permanent Mark" />    
            </div>    
      </div>        

  </div>
</div>

</body>
</html> 
```

Jquery 主页面：

```
<div data-role="page" id="page5">
    <div data-role="header" data-theme="b">
      <h1>To test</h1><a href="#" data-rel="back">Back</a>
    </div><div data-role="content"><P><center>
    Search
    </center></P>
    <ul data-role="listview" data-filter="true" data-filter-placeholder="Search...">
      <li><a href="Test1.html" rel="external">Test</a></li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:27:55.140

我终于让它工作了，我用过

功能 navigator_Go(url) { window.location.assign(url);

在链接上：测试工作正常，但您必须重新处理所有链接。跟着导航器走。

我在这里找到了解决方案：

[如何让 iPhone/iPad 网络应用程序保持全屏模式？](https://stackoverflow.com/questions/6429492/how-do-you-keep-an-iphone-ipad-web-app-in-full-screen-mode)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T15:35:42.480

抱歉之前的代码是链接外部页面的简单代码

```
<a href="External.html" data-rel="external" id="#external">External page</a>
 <body>
<div id="indexPage" data-role="page">
    <script type="text/javascript">
        $("#external").live('pageinit', function() {
            // do something here...
        });
    </script>
  </div> 
```

检查这条线让我知道它是否工作

# c# - ListBox WP7 中的数据绑定错误，平台 C#

> ID：15161081
> 
> 赞同：0
> 
> 时间：2013-03-01T15:21:18.140
> 
> 标签：c#, windows-phone-7, data-binding, listbox, textblock

我尝试使用 C# 使用数据绑定添加到 WP7 中的 ListBox。但它似乎不起作用，我完全不知道为什么。仅绘制行的边框并且不显示文本的内容。

这是我要添加的课程

```
 public class ResultTemplate
    {
        public string Mealname;
        public string CanteenID;
        public DateTime Date;
    }

public class View
{
    List<ResultTemplate> result;
   //....
    void Load()
    {
       this.listbox.ItemSource = result;
    }
} 
```

我的 XAML 代码：

```
<Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
            <ListBox x:Name="searchlist" ItemsSource="{Binding}" SelectionChanged="searchlist_SelectionChanged" >
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Border BorderThickness="1" BorderBrush="#FF807C7C" Width="500" HorizontalAlignment="Center">
                            <StackPanel MinHeight="60" Width="450" HorizontalAlignment="Left" Margin="25,0,0,0">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Name="textblock1" Text="{Binding Mealname}" HorizontalAlignment="Left" TextWrapping="Wrap" FontSize="25" Width="385" />
                                    <!--<Image Source="{Binding Image}" Stretch="None" Margin="10,0,0,0" Height="50" Width="50"/>-->
                                </StackPanel>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Name="textblock2" Text="{Binding CanteenID}" HorizontalAlignment="Left" Width="150" FontSize="20" Foreground="#FF004AFF"/>
                                    <TextBlock Name="textblock3" Text="{Binding Date,StringFormat=dddd.dd/MM/yyyy}" HorizontalAlignment="Left" FontSize="20" Foreground="#FF00AB00"/>
                                </StackPanel>
                            </StackPanel>
                        </Border>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </Grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:26:30.570

您应该将 Property`ObservableCollection`用于绑定资源而不是 List OR implement `INotifyPropertyChanged`。

# performance - Linux 内核（和其他系统程序）：是否可以配置/调整它们以获得最佳性能，同时最大限度地利用硬件？

> ID：15161082
> 
> 赞同：-1
> 
> 时间：2013-03-01T15:21:17.573
> 
> 标签：performance, operating-system, utilization

我不是操作系统/系统程序员（但它一直吸引着我很多:)），所以我不确定这是否是一个好问题，而且可能不够清楚（实际上它不止一个问题）。

是否有可能/可行/实用地调整 Linux 内核（和其他系统程序）（通过配置或任何重写）以获得最佳性能，以便他们可以最大限度地利用硬件（如果不是 100%）？

我的问题并非特定于操作系统，但我认为操作系统优化可以提供巨大帮助。

我可以考虑控制线程数量并将负载平均分配给它们可以帮助实现这一目标。在使用大量多核（1/2/4/6/8）处理器的情况下，我认为软件应该（以某种方式（？））实现内核数量（在安装时或在调用时）并分配负载均匀分布在其中。如果没有充分利用硬件的软件，我认为这些硬件的力量是浪费的。

还有其他我可以想到的方法，例如我有一台四核机器，5400rpm sata HDD 是瓶颈，所以如果软件可以实现这一点并通过增加缓存和使用异步/延迟读取来最小化磁盘读取/写入/writes 它将有助于提高性能。

我还想知道，通过 OpenCL 和 CUDA 库，智能地使用 GPU 中的处理单元是否有很大帮助？

我没有写过（甚至读过）任何严肃的程序（除了我的工作，它是与网络相关的，客户端-服务器类型的），但我肯定会尝试一下。我的想法/假设和我的要求是否有意义？还是我要疯了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:29:16.733

一个进程花费的大部分时间都会被`I/O`. 例子是：

1.  将一大块数据从/向辅助存储读取/写入 RAM（在执行时`fread`或`fwrite`例如）
2.  等待数据包通过网络到达。

如您所见，在这些操作完成之前，该过程被阻止。如果应用程序进程中有逻辑在它等待时做一些有用的事情，是的，内核会很乐意为这些线程提供服务。如果不是，内核将把进程放到`sleep`它为属于其他进程的线程提供服务时`ready`。

计算密集型应用程序是不同的。他们倾向于在数据集（例如矩阵）上运行大量迭代来计算某些东西。编译器尝试自己的优化，例如`vectorization`减少现代处理器上的一些 CPU 周期。使用诸如 openMP 之类的库可以帮助您指示代码的并行部分，并指定在执行该代码段时要产生多少线程。同样，所有这些都是在用户空间中完成的同一应用程序的优化。

内核主要负责调度任务。有不同的调度程序算法，如果您查看任何发行版内核，它们会提供很少的变体。该`-desktop`变体是您通常会看到使用的变体，因为调度程序针对大多数桌面应用程序使用进行了优化。还有其他变体，如`-realtime``-xen 等，同样适用于特定应用程序。您可以查看调度程序在所有这些情况下的行为有何不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T17:14:28.820

对于更改磁盘 I/O 以进行缓存，这部分已经在现代操作系统中发生。例如，只要有足够的空间，Linux 就会将您访问的所有文件的内容缓存在 RAM 中（即使在某些情况下，如果可用 RAM 变少，更喜欢将这些文件保留在 RAM 中而不是实际的应用程序数据）。

但是，应用程序的概念是希望数据在写入磁盘后是安全和持久的（至少在他们保证之后，例如通过调用`fsync`）。操作系统必须确保它确实如此，因此它必须等待驱动器实际写入数据。如果应用程序不要求这样做，例如 Linux 将假装它已将数据写入磁盘，但实际上仅将其保留在内存中，同时以磁盘允许的速度将其写入磁盘。与此同时，应用程序可以继续执行它之前所做的任何事情。

您建议的许多事情已经在操作系统中发生，只是有时您真的不能使用 100% 的硬件，因为这会违反预期或保证（例如上面的磁盘 I/O），或者没有足够的工作要做. 如果您启动一个执行大量并行计算的应用程序（例如，使用 OpenCL），它肯定会加载它可以获得的所有 CPU，直到工作完成。

此外，有时您无法将 CPU 加载到 100%，因为它必须等待其他设备，如硬盘、内存、网络等。如果没有足够的内存来保存数据，最好的文件缓存将无济于事：您必须将数据交换到硬盘驱动器，这很慢，浪费 CPU 周期。

但是请注意，当应用程序在磁盘和其他设备上等待输入或输出时，其他应用程序通常可以运行。操作系统通常会尝试尽可能多地利用硬件。

# jquery - 两个函数以 Jquery 开头不工作

> ID：15161085
> 
> 赞同：-3
> 
> 时间：2013-03-01T15:21:28.173
> 
> 标签：jquery, joomla

我有两个这样开始的功能

功能一：

```
jQuery(function() {
    jQuery('.fancypantsaccordionholder').accordion({
        oneOpenedItem:true,
        speed:300,
        scrollSpeed:300,
        open:0          
    });
}); 
```

功能二

```
jQuery(document).ready(function(){
    jQuery('#sidepanel_jt').tabSlideOut({
       tabHandle: '.handle',                            
       pathToTabImage:'',
       imageHeight: '',                               
       imageWidth: '',                                    
       tabLocation: '<?php echo $panel_position;?>',                             
       speed: <?php echo $speed;?>,                                       
       action: 'click',                                 
       topPos: '<?php echo $topposition;?>px',                               
       fixedPosition: true                          
    });
}); 
```

但是如果我将 $ 放在一个函数中，即使它不起作用，它也不能使用这两个相同的 jquery 函数名称。

请帮助各位。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T15:26:50.807

快速的 Google 搜索表明 jQuery 不是 Joomla 使用的唯一 JavaScript 框架，而且它还使用 MooTools - 我自己对 Joomla 没有任何经验，所以我无法确认这一点。如果是这种情况，那么 jQuery 很可能处于“无冲突”模式，并且`$`不会映射到`jQuery`函数。

你可以做的是：

```
(function($) {
    // your code here using $ in place of jQuery
})(jQuery); 
```

这是一个立即调用的函数表达式，它`jQuery`作为参数传递给`$`参数。结果是它在其中创建了一个闭包，`$`并且`jQuery`将是相同的，即使它们不在外面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T15:25:26.987

你在使用更多的图书馆吗？对我来说看起来像是碰撞。

尝试将您的代码包装在此：

```
(function($) {
  //your code
})(jQuery); 
```

# ruby-on-rails - 处理 Rails 格式 */* 的请求

> ID：15161087
> 
> 赞同：0
> 
> 时间：2013-03-01T15:21:29.850
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, jbuilder

当我 curl 或其他服务器调用我的服务器时，它会将格式解释为`*/*`. 由于我已经安装了 jbuilder，它总是用 json 响应。

如何调整格式的偏好顺序以响应`*/*`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T20:34:53.407

问题与`respond_to`行动有关。

使用具有以下功能的操作：

```
respond_to do |fmt|
  fmt.json
  fmt.html
end 
```

任何类型的请求`*/*`都是 json。

要使其成为 html，您只需将其设为响应的第一种格式：

```
respond_to do |fmt|
  fmt.html
  fmt.json
end 
```

# sql-server-2008 - 批量插入失败“批量加载数据转换错误（截断）”

> ID：15161088
> 
> 赞同：2
> 
> 时间：2013-03-01T15:21:32.783
> 
> 标签：sql-server-2008, bulkinsert, data-import

我已经使用 SQL Server 的`BULK INSERT`任务完成了数百次数据导入，但这次我收到了一个不熟悉的错误，并且我尝试使用 Google 进行故障排除无济于事。以下是我使用逗号分隔文件的代码，其中新行由换行符指示：

```
BULK INSERT MyTable
FROM 'C:\myflatfile.txt'
WITH (
    FIELDTERMINATOR = ','
    ,ROWTERMINATOR = '/n')
GO 
```

它始终有效，但现在在一个带有日期和速率的简单文件上，它失败，错误为“ *Msg 4863, Level 16, State 1, Line 1 Bulk load data conversion error (truncation) for row 1, column 2 (ColumnTwo ）*。” 当我查看文件时，我不明白为什么会失败（通常 Google 故障排除表明分隔符可能在一行中存在多次，这会引发此错误）。从文件中，这里是前十行（注意它在第一行失败）：

```
1961-01-01,8.2
1961-02-01,8.2
1961-03-01,7.4
1961-04-01,7.6
1961-05-01,7.8
1961-06-01,8.5
1961-07-01,9.1
1961-08-01,8.8
1961-09-01,8.4
1961-10-01,8.8 
```

我将这些数据插入到的表有两个字段 thaare `VARCHAR(50)`，即使当我最初看到截断时，我将数据字段扩展为`VARCHAR(2000)`它并没有影响它。

```
CREATE TABLE MyTable (
    ColumnOne VARCHAR(50),
    ColumnTwo VARCHAR(50)
) 
```

我还尝试删除所有破折号，看看这是否搞砸了（即使我已经使用相同的代码使用破折号进行了大量数据导入，并且它可以正常工作），但它仍然收到相同的错误消息。

与 SSIS 一样，直接导入（通过`Tasks`）可以工作，但是这段代码失败了怎么办，因为它应该做完全相同的事情？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-01T15:26:08.687

问题可能是由于文件格式，行终止符无法正常工作。

尝试：

```
ROWTERMINATOR = '0x0a' 
```

编辑

实际上我只是注意到您使用的是正斜杠，它应该是反斜杠，所以这可能有效：

```
ROWTERMINATOR = '\n' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-16T04:09:27.920

在 SQL Server Management Studio (SSMS) 中，对于 Unix 样式的文件，ROWTERMINATOR = '0x0a' 有效。但是，ROWTERMINATOR = '\n' 不会，因为 SSMS 显然将 \n 解释为 Windows 样式的行尾序列 (\r\n) 并为您修复/破坏它。

有趣的是，如果您通过 SQL Server JDBC 驱动程序从 Java 代码发送相同的 ROWTERMINATOR = '\n'，它将被视为 Unix 风格的行尾，因为中间没有任何东西抛出额外的 \r。

所以，你必须做两件事：

1 - 确保您了解您的数据文件实际上是如何完成行尾的。

2 - 确保您了解将 BULK INSERT sql 传递到 SQL Server 的方式是如何解释任何转义序列的。我有限的经验是，对 SQL Server SQL 使用十六进制（'0x0a'）适用于所有环境。

# android - 如果另一个文本视图太长，如何在新行中移动文本视图

> ID：15161098
> 
> 赞同：2
> 
> 时间：2013-03-01T15:22:09.710
> 
> 标签：android, android-layout, textview, alignment

在 RelativeLayout 我有两个 TextViews 在同一行上对齐：第一个与左侧对齐，第二个与右侧对齐。仅当第一个 texview 太长时，如何才能将第二个 TextView 移动到“新行”中？

这是我的应用程序的屏幕截图：

[![这是截图](../Images/d876f630977aa19b02928633f11b71fa.png)](https://i.stack.imgur.com/ZHibp.jpg)

在第一种情况下，第一个文本视图“Something”和第二个（时间）对齐。在第二种情况下，我想将第二个文本视图移动到第一个文本视图下。

这是我的xml文件的代码

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/relativeView"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:paddingLeft="5dip"
android:paddingRight="5dip"
android:paddingTop="5dip"
android:paddingBottom="5dip" >

<ImageView
    android:id="@+id/immagine"
    android:layout_width="50dp"
    android:layout_height="50dp"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginRight="10dp"
    android:src="@drawable/ic_launcher" />

<TextView
    android:id="@+id/nickTextView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_toRightOf="@+id/immagine"
    android:text="Nickname"
    android:textSize="14dp" />

<TextView
    android:id="@+id/messaggioTextView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/nickTextView"
    android:layout_toRightOf="@+id/immagine"
    android:text="Messaggio"
    android:textColor="#333"
    android:textSize="14dp" />

<TextView
    android:id="@+id/oraText"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/nickTextView"
    android:layout_alignBottom="@+id/nickTextView"
    android:layout_alignParentRight="true"
    android:text="TextView"
    android:textColor="#999"
    android:textSize="12dip" />

<TextView
    android:id="@+id/dataText"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/messaggioTextView"
    android:layout_alignBottom="@+id/messaggioTextView"
    android:layout_alignParentRight="true"
    android:text="TextView"
    android:textColor="#999"
    android:textSize="12dip" /> 
```

感兴趣的文本视图是messaggioTextView 和oraText。

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T15:28:57.920

```
<TextView
    android:id="@+id/messaggioTextView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_toLeftOf="@+id/dataText"
    android:layout_below="@+id/nickTextView"
    android:layout_toRightOf="@+id/immagine"
    android:text="texttextkhgfkdklgfhkldfhghdgkljdlfkjhg;ldf;hhvasdv;svabsab"
    android:textColor="#333"
    android:textSize="14dp" />

<TextView
    android:id="@+id/dataText"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/messaggioTextView"
    android:layout_alignParentRight="true"
    android:text="TextView"
    android:textColor="#999"
    android:textSize="12dip" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T15:31:18.827

考虑为布局的文本部分实施 FlowLayout（或使用其他人在[此处制作的）。](https://github.com/ApmeM/android-flowlayout)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-15T13:44:09.327

我知道的三种方式，也许存在更好的方式：
1）在 Html 中加载您的文本并将其设置为文本视图（您可以使用 html 样式和...）

```
String text = "<font color=#cc0029>text 1</font> <font color=#ffcc00>text 2</font>";
textView.setText(Html.fromHtml(text)); 
```

2）在一个文本视图中加载您的文本，但为文本的每个部分设置跨度。
3）创建自定义 TextView 类并计算文本的长度，然后如果大于您想要在此下方设置另一个 textview 布局

# java - 未正确设置数组元素

> ID：15161102
> 
> 赞同：2
> 
> 时间：2013-03-01T15:22:23.013
> 
> 标签：java, arrays, logic

嗨，我有一个子弹对象数组。我将子弹对象 isAlive var 设置为 false。如果我在不单击空格按钮（触发子弹）的情况下运行代码并打印出数组对象 isAlive var 并将它们全部打印为假（应该如此）。

如果我在项目符号出现在屏幕上并正确移动时单击空格按钮，但是当我打印出显示 isAlive var 的项目符号数组时，它们都设置为 true，具有相同的 x/y 位置。如果我单击空格按钮两次 2 个项目符号出现并正常移动，但是当我打印数组时，它再次显示前十个元素是活动的，具有相同的 x/y 位置（屏幕上的第一个项目符号），接下来的十个元素也具有相同的 x/y 位置（屏幕上的第二个项目符号）

再按空格键不会添加新的项目符号。这里；是 fireButton() 的代码

```
public void fireBullet(){
    if(currentBullet > BULLETS -1){
        currentBullet = 0;
    }
    if(bullet[currentBullet].isAlive()==false){
        bullet[currentBullet].setAlive(true);
        bullet[currentBullet].setxPos(ship.getxPos());
        bullet[currentBullet].setyPos(ship.getyPos());
    }
    currentBullet ++;
} 
```

这是它在 KeyPressedMethod 中的调用

```
case KeyEvent.VK_SPACE: 
        fireBullet();
        break; 
```

谁能看到我哪里出错了？现在一直在搞乱代码，这让我很头疼:)

编辑：如果可以的话，我会回答所有问题 :) 1)currentBullet 是一个私有类成员，首先初始化为 0，然后在 fireBullet() 方法中为每个发射的子弹递增到 20 和然后重置为 0。

2）当我初始化子弹数组时，我为每个元素分配一个新的 Bullet()。每个子弹构造函数都将 isAlive 设置为 false

3）当它离开屏幕时，子弹变量 isAlive 被设置回 false 4）这是完整的 keypressed 方法

```
public void keyPressed(KeyEvent k) {
    int keyCode = k.getKeyCode();

    switch (keyCode) {

    case KeyEvent.VK_A:
        //move ship left
        if(ship.getxPos()<20){
            ship.setxPos(20);
        }else
        ship.setxPos(ship.getxPos()-1);
        break;
    case KeyEvent.VK_D:
        if(ship.getxPos()>1260){
            ship.setxPos(1260);
        }else
        ship.setxPos(ship.getxPos()+1);
        break;
    case KeyEvent.VK_SPACE: 
        fireBullet();
        break;
    }

}//end keypressed event 
```

我认为渲染没问题，因为它正在绘制子弹，但将其中的 10 或 20 个彼此重叠绘制，因此当运行代码时，您只会看到两个子弹在屏幕上移动，

问题是每次按下空格键应该只有 1 个活的子弹，但是一旦所有 20 个子弹都被设置为活的，就按下它！

第二次编辑：我在游戏循环结束时打印出当前的子弹，它似乎正在正确递增，这表明每次按下空格键都会调用 fireBullet() 方法，似乎每次按下时都会用活子弹填充数组

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T20:34:58.753

谢谢大家让它正常工作！就像上面建议的 NPE 一样，我在 fireBullet() 方法和其他 2 个按键中放入了一个小 println。发生的事情是，当代码接收到大量“命中”时，我正在点击空间. 原来我在我的paint方法中有addKeyListener（this）而不是在JFrame构造函数中，老实说不知道它是如何放入paint方法的:)

# ios - 在 UITableView 中滑动以取消而不是删除

> ID：15161103
> 
> 赞同：0
> 
> 时间：2013-03-01T15:22:23.773
> 
> 标签：ios, cocoa-touch

当用户滑动单元格时，我使用以下代码显示删除按钮`tableview`。我想在这个按钮中写取消而不是删除，我怎样才能实现这个功能？

```
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath {
  return YES;
} 
```

和

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath {
  if (editingStyle == UITableViewCellEditingStyleDelete) {
    //remove the deleted object from your data source.
    //If you're data source is an NSMutableArray, do this
    [self.dataArray removeObjectAtIndex:indexPath.row];
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T15:30:44.587

如果您只想将按钮的标题更改为“取消”，那么只需`-tableView:titleForDeleteConfirmationButtonForRowAtIndexPath:`在表格视图的委托中实现该方法。

```
-(NSString *)tableView:(UITableView *)tableView titleForDeleteConfirmationButtonForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return @"Cancel";
} 
```

# stored-procedures - 导出存储过程

> ID：15161107
> 
> 赞同：1
> 
> 时间：2013-03-01T15:22:40.610
> 
> 标签：stored-procedures, export, firebird

我正在寻找一个过程，该过程`DLL`通过其名称返回另一个存储过程，但不知道如何准确地做到这一点。这是我到目前为止所尝试的：

```
example output

    SET TERM ^ ;

     CREATE or ALTER PROCEDURE MY_REPORTS (
       objid my_id)
     returns (
       docdate my_datetime)
as

begin

  some body

end^

    SET TERM ; ^ 
```

非常感谢您的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T09:47:25.300

您需要访问“系统表”，例如 RDB$PROCEDURES 和 RDB$PROCEDURE_PARAMETERS。

`select p.RDB$PROCEDURE_NAME, p.RDB$PROCEDURE_SOURCE, pr.RDB$PARAMETER_NAME, pr.RDB$PARAMETER_TYPE, iif(pr.RDB$PARAMETER_TYPE=0,'INPUT','OUTPUT') PARAM_TYPE from RDB$PROCEDURES p left join RDB$PROCEDURE_PARAMETERS pr on p.RDB$PROCEDURE_NAME=pr.RDB$PROCEDURE_NAME where p.RDB$PROCEDURE_NAME='CALCULAVTO' order by pr.RDB$PARAMETER_TYPE, pr.RDB$PARAMETER_NUMBER`

# mysql - 如何从 mysql 中的“Table_locks_immediate”和“Table_locks_waited”了解数据库健康状况

> ID：15161111
> 
> 赞同：0
> 
> 时间：2013-03-01T15:22:50.580
> 
> 标签：mysql, database, table-locking

如何通过查看数据库状态中的“Table_locks_immediate”和“Table_locks_waited”值来了解 mysql 数据库的健康状况。

我想知道“Table_locks_immediate”和“Table_locks_waited”之间的比率是否重要。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-06-10T19:58:47.720

你可以从中学到一些东西：

[http://dev.mysql.com/doc/refman/5.0/en/internal-locking.html](http://dev.mysql.com/doc/refman/5.0/en/internal-locking.html)。

和

[http://www.mysqlperformancetuning.com/how-to-speed-up-mysql-by-optimization](http://www.mysqlperformancetuning.com/how-to-speed-up-mysql-by-optimization)

# smalltalk - 在 Smalltalk VisualWorks 7.9.1 中读取打开声音控制的数据包

> ID：15161113
> 
> 赞同：1
> 
> 时间：2013-03-01T15:22:55.137
> 
> 标签：smalltalk, osc, visualworks

有谁知道在哪里可以找到用于视觉作品的开放式声音控制阅读器？

我检查了 Siren 项目和 OSC VW 项目，但它们被要求发送 OSC 数据包，但我的目标是读取来自 TuioReactivision 模拟器的一些 OSC 数据包。

提前谢谢。

# powershell - 当 -path 是变量时，gci 没有接收作业结果

> ID：15161115
> 
> 赞同：1
> 
> 时间：2013-03-01T15:23:04.630
> 
> 标签：powershell, powershell-3.0, get-childitem, powershell-jobs

这不返回任何内容：

```
$x = "C:\temp"
Start-Job -ScriptBlock {get-childItem -path $x} | Wait-Job | Receive-job 
```

但是提供没有变量的路径参数，就像这样......

```
Start-Job -ScriptBlock {get-childItem -path C:\temp} | Wait-Job | Receive-job 
```

...返回该临时文件夹的内容，在本例中为 durrr.txt。这是在带有 Powershell $host.version 输出的 Windows Server 2008R2 SP1 上，如下所示：

```
Major  Minor  Build  Revision
-----  -----  -----  --------
3      0      -1     -1 
```

怀疑 Powershell 的 v3，我尝试将 Windows 7 SP1 桌面从 v2 更新到 v3，但没有运气重现问题。在升级后的桌面上，$host.version 输出现在与上述匹配。

这是怎么回事？

**编辑/发生了什么？**

被破坏的工作似乎等同于

```
Start-Job -ScriptBlock {get-childItem -path $null} | Wait-Job | Receive-job 
```

所以 gci 返回后台作业当前目录的结果，Documents 文件夹恰好是空的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:25:28.470

您需要将参数传递给脚本块

```
$x = "C:\temp"
Start-Job -ScriptBlock {get-childItem -path $args[0]} -argumentlist $x  | Wait-Job | Receive-job 
```

在 powershell V3 中，您可以执行以下操作：

```
$x = "C:\windows"
Start-Job -ScriptBlock {get-childItem -path $using:x} | Wait-Job | Receive-job 
```

# mysql - mysql 使用带有通配符的 substring_index 从字段中删除不需要的文本

> ID：15161124
> 
> 赞同：0
> 
> 时间：2013-03-01T15:23:40.483
> 
> 标签：mysql

我有一张桌子叫汉堡包。我想清理数据并从汉堡包名称周围删除一些垃圾文本，并且只在标题字段中使用汉堡包的名称。到目前为止，这就是我的小脑袋所能鼓起的全部......

```
UPDATE hamburgers
SET title = SELECT SUBSTRING_INDEX(title, "My favorite hamburger is called %, I'm not really sure why.   Yesterday was the first time I ate a %", -1) FROM hamburgers
where title like "%My favorite hamburger is called %.%"; 
```

我对 MySql 很烂，但我只是想找到一种方法来删除围绕汉堡名称的文本。大约有 3,000 条记录在汉堡包名称周围具有相同的确切文本。TIA。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:32:57.020

这可能会让你朝着正确的方向前进：

```
select substring_index(substring_index("My favorite hamburger is called Whopper, I'm not really sure why.   Yesterday was the first time I ate a Whopper","My favorite hamburger is called ",-1),",",1); 
```

这会给你：

```
Whopper 
```

所以：

```
UPDATE hamburgers
SET title = substring_index(substring_index(title,"My favorite hamburger is called ",-1),",",1)
where title like "My favorite hamburger is called %,"; 
```

不过，它确实有点依赖于汉堡包后面有一个逗号....

# php - PHP点名报告

> ID：15161126
> 
> 赞同：0
> 
> 时间：2013-03-01T15:23:47.270
> 
> 标签：php, phpmyadmin

下面是需要点名时运行报告的代码。它将显示此人的姓氏和状态（入或出）。我希望能够将第一个状态列中的按钮默认为 OUT（false），以便在单击它时，该特定行（记录）会变成不同的颜色。然后是更新 MySQL 数据库。第二个状态列将有一个清除按钮，它将行的颜色设置为白色或其他颜色。有没有人有任何想法？

```
$result = mysql_query("SELECT * FROM cardhldr ORDER BY Surname ASC")
or die(mysql_error());

echo "<table border='5' align='center'>";
echo "<tr> <th>Surname</th><th>Status</th><th>Status</th></tr>";

while($row = mysql_fetch_array( $result )) {
// Print out the contents of each row into a table
echo "<tr><td>";
echo $row['Surname'];
echo "</td><td>";
echo $row['Status'];
echo "</td><td>";   
echo $row['Status']; 
echo "</td></tr>";
}

echo "</table>"; 
```

# android - android图像捕获总是横向而不是全尺寸

> ID：15161131
> 
> 赞同：0
> 
> 时间：2013-03-01T15:24:02.187
> 
> 标签：android, image, screen-capture

我想在我的 Android 应用程序中添加图像捕获，用户可以在其中捕获图像，我使用以下代码：

```
public void open_camera() { 
    Intent intent = new Intent("android.media.action.IMAGE_CAPTURE");

    try {
        // place where to store camera taken picture
        photo = this.createTemporaryFile("picture", ".jpg");
        photo.delete();
    } catch(Exception e) {
        Toast.makeText(this, "Please check SD card! Image shot is impossible!", 10000);   
    }
    mImageUri = Uri.fromFile(photo);
    intent.putExtra(MediaStore.EXTRA_OUTPUT, mImageUri);
    //start camera intent
    startActivityForResult(intent,SELECT_PICTURE_CAMERA );

    //Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE); 
    //startActivityForResult(cameraIntent, SELECT_PICTURE_CAMERA); 
}

private File createTemporaryFile(String part, String ext) throws Exception {
    File tempDir= Environment.getExternalStorageDirectory();
    tempDir=new File(tempDir.getAbsolutePath()+"/.temp/");
    if(!tempDir.exists()) {
        tempDir.mkdir();
    }
    return File.createTempFile(part, ext, tempDir);
} 
```

当我找回

```
case SELECT_PICTURE_CAMERA:
    if(resultCode == RESULT_OK) {
        // Toast.makeText(this,"Camera" + imageReturnedIntent.getStringExtra(ZBarConstants.SCAN_RESULT), Toast.LENGTH_LONG).show();
        //this.yourSelectedImage = (Bitmap) imageReturnedIntent.getExtras().get("data");
        /*
        ImageButton imgbtn = (ImageButton) findViewById(R.id.imageButton_Photo);
        BitmapDrawable background = new BitmapDrawable(this.yourSelectedImage);
        imgbtn.setBackgroundDrawable(background);
        */

        try {
            File f=new File(mImageUri.getPath());

            ExifInterface exif = new ExifInterface(f.getPath());
            int orientation = exif.getAttributeInt(ExifInterface.TAG_ORIENTATION, ExifInterface.ORIENTATION_NORMAL);

            int angle = 0;
            if (orientation == ExifInterface.ORIENTATION_ROTATE_90) {
                angle = 90;
            } else if (orientation == ExifInterface.ORIENTATION_ROTATE_180) {
                angle = 180;
            } else if (orientation == ExifInterface.ORIENTATION_ROTATE_270) {
                angle = 270;
            }

            Matrix mat = new Matrix();
            mat.postRotate(90);

            Bitmap bmp = BitmapFactory.decodeStream(new FileInputStream(f), null, null);
            this.yourSelectedImage = Bitmap.createBitmap(bmp, 0, 0, bmp.getWidth(), bmp.getHeight(), mat, true);                 
        } catch (IOException e) {
            Log.w("TAG", "-- Error in setting image");
        } catch(OutOfMemoryError oom) {
            Log.w("TAG", "-- OOM Error in setting image");
        } 
```

但不幸的是，在完成所有这些之后，静止图像不是全尺寸的，它总是风景。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T11:41:59.027

你的代码有一个小错误，在你得到图像应该旋转的角度后，你需要在 postRotate 中使用这个值。

请替换行：mat.postRotate(90);

与：mat.postRotate（角度）；

希望我对你有帮助:-)

问候，伍迪。

# jquery - 更改图像来源

> ID：15161133
> 
> 赞同：1
> 
> 时间：2013-03-01T15:24:09.210
> 
> 标签：jquery, image

我想使用一个称为`#MapButtonImage`“按钮”的图像，所以当有人点击它时，会显示一个 div 和`#MapButtonImage`更改的来源。我已经做到了，它显示 div 如下：

```
$(window).load(function(){
  $("img#MapButtonImage").click(function(){
  $("div.MapMain").toggleClass('MapMainShow');
  });
}); 
```

当我现在单击按钮时，它会将地图 div 的类更改为 display:block，然后第二次单击又回到默认的 display:none。

但我似乎无法让它使用 jQuery 更改图像的来源。我按照指南使用了两个函数的切换，并将源作为我想要的两个图像，但它仅适用于早期版本的 jQuery，而不适用于最新版本。

图片#MapButtonImage 具有原始来源“ShowMapButton.jpg”，我想在单击它时将其更改为“HideMapButton.jpg”，然后在再次单击时将其更改为“ShowMapButton.jpg”。

目的是让它作为一个切换来显示它下面的 Map div，并且图像反映了按钮随后将采取的操作（显示或隐藏）。

任何帮助将不胜感激，我对此很陌生，无法理解为什么它在最新版本中不起作用但在以前的版本中起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:31:43.197

试试这个：

```
$(window).load(function(){
  $("img#MapButtonImage").click(function(){
  $("div.MapMain").toggleClass('MapMainShow');

  if($("div.MapMain").hasClass('MapMainShow')) {
      $(this).attr('src', 'HideMapButton.jpg');
  } else {
      $(this).attr('src', 'ShowMapButton.jpg');
  }
  });
}); 
```

# ios - UITableViewCells 中的 UIImageViews 在缓存的单元格中重新创建自己

> ID：15161134
> 
> 赞同：3
> 
> 时间：2013-03-01T15:24:11.093
> 
> 标签：ios, objective-c, caching, uitableview

我有一个`UITableViewCell`，我需要将插页式图像随机放入其中一些。这是有效的，但由于单元格的缓存，图像在表格的下方重复出现。假设我已经预先决定将图像放在单元格 1、12 和 25 中，这些单元格将有它们的图像，但在单元格 1 之后，单元格 4、8 等也可能包含第一个图像。

我猜我需要做的是专门告诉`cellForRowAtIndexPath`清除缓存并删除任何图像，如果它不符合添加图像的标准。我该怎么做呢？我已经尝试过`else`if 语句来做出决定并分配图像。在那`else`方面，我尝试将`UIImageView`' 的图像设置为`nil`，但这并没有任何区别。

有没有其他方法可以清除缓存以防止这些图像定期向页面发送垃圾邮件？这是我的`cellForRowAtIndexPath`方法，当前最后一行中的行`else`对图像没有影响，所以他们（我认为）需要用有效的东西替换！

```
- (UITableViewCell *) tableView: (UITableView *) tableView cellForRowAtIndexPath: (NSIndexPath *) indexPath
{
    // Make and allocate the cell if necessary.
    CustomCell *cell = [tableView dequeueReusableCellWithIdentifier: @"Cell"];
    if (cell == nil) {
        cell = [[CustomCell alloc] initWithStyle: UITableViewCellStyleValue1 reuseIdentifier: @"Cell"];
    }
    cell.lineLabel.text = [[self.fetchedResultsController objectAtIndexPath: indexPath] line];
    cell.actorLabel.text = [[self.fetchedResultsController objectAtIndexPath: indexPath] actor];
    [cell.lineLabel sizeToFitMultipleLines];

    // Get the size each label needs to be when constrained to set width and very long height (8000).
    CGSize labelSize = [cell.lineLabel.text sizeWithFont: cell.lineLabel.font constrainedToSize: CGSizeMake(265, 8000)];

    if ([[cellsToContainInterstitialImages allKeys] containsObject: [thisLine.lineID stringValue]]) {

        UIImageView *interstitialImage = [[UIImageView alloc] init];
        NSNumber *cellTypeNumber = [cellsToContainInterstitialImages valueForKey: [thisLine.lineID stringValue]];
        kInterstitialCellType cellType = [cellTypeNumber intValue];

        if (cellType == kInterstitialCellTypeFirst) {
            interstitialImage = [[UIImageView alloc] initWithImage: [UIImage imageNamed: @"man.png"]];
        }
        else if (cellType == kInterstitialCellTypeSecond) {
            interstitialImage = [[UIImageView alloc] initWithImage: [UIImage imageNamed: @"woman.png"]];
        }
        else {
            interstitialImage = [[UIImageView alloc] initWithImage: [UIImage imageNamed: @"child.png"]];
        }

        [interstitialImage setFrame: CGRectMake(10, cell.lineLabel.frame.size.height + cell.actorLabel.frame.size.height + 10, 150, 150)];
        [cell addSubview: interstitialImage];
    } else {
        UIImageView *interstitialImage = [[UIImageView alloc] init];
        [interstitialImage setImage: nil];
    }

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:30:01.640

您的`else`代码分支不会将`interstitialImage`图像添加到单元格中。您应该更改代码以`UIImageView`在单元格的构造函数中添加 ，这样`cellForRowAtIndexPath`您就必须设置图像，而不是添加子视图。

添加`UIImageView`到你的`CustomCell`，使其私有，并提供一个属性供`cellForRowAtIndexPath`使用：

```
@interface CustomCell : UITableViewCell {
    UIImageView *_interstitialImage;
}
@property (nonatomic,readonly) UIImageView *interstitialImage;
@end

@implementation CustomCell 
-(id)initWithStyle:(UITableViewCellStyle) style reuseIdentifier:(NSString*)reuseId {
    if (self = [super initWithStyle:style reuseIdentifier:reuseId]) {
        _interstitialImage = [[UIImageView alloc] init];
         [_interstitialImage setImage: nil];
         [_interstitialImage setFrame: CGRectMake(10, cell.lineLabel.frame.size.height + cell.actorLabel.frame.size.height + 10, 150, 150)];
         [cell addSubview: _interstitialImage];
    }
    return self;
}
-(UIImageView*)interstitialImage {
    return _interstitialImage;
}
@end 
```

现在你`cellForRowAtIndexPath`会使用`cell.interstitialImage`而不是一直分配新`UIImageView`的。这将避免多次添加图像：

```
if ([[cellsToContainInterstitialImages allKeys] containsObject: [thisLine.lineID stringValue]]) {
    NSNumber *cellTypeNumber = [cellsToContainInterstitialImages valueForKey: [thisLine.lineID stringValue]];
    kInterstitialCellType cellType = [cellTypeNumber intValue];

    if (cellType == kInterstitialCellTypeFirst) {
        [cell.interstitialImage setImage:[UIImage imageNamed: @"man.png"]];
    } else if (cellType == kInterstitialCellTypeSecond) {
        [cell.interstitialImage setImage:[UIImage imageNamed: @"woman.png"]];
    } else {
        [cell.interstitialImage setImage: [UIImage imageNamed: @"child.png"]];
    }
} else {
    [cell.interstitialImage setImage: nil];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T15:32:40.953

最简单的解决方案应该是使用[– tableView:willDisplayCell:forRowAtIndexPath:](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UITableViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITableViewDelegate/tableView%3awillDisplayCell%3aforRowAtIndexPath%3a)协议的方法`UITableViewDelegate`。用这种方法清洁你的细胞。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T15:34:15.273

问题是在`if`您添加图像视图的部分。这意味着随着单元格的重复使用，您会不断添加越来越多的图像视图。

在该`else`部分中，您创建一个虚拟图像视图并将其图像设置为`nil`. 此代码不符合您的预期 - 清除任何现有图像。

您需要做的是确保您永远不会向单元格添加第二个图像视图。当您需要清除图像时，您会获得对现有图像视图的引用，而不是创建新的。

# c# - 使用 TestContext 在单元测试之间共享信息

> ID：15161138
> 
> 赞同：1
> 
> 时间：2013-03-01T15:24:17.380
> 
> 标签：c#, unit-testing

我正在编写一组单元测试来测试 CRUD 系统。

我需要注册一个用户`Test1`- 它返回一个`ServiceKey` 然后我需要添加`Test2`我需要的数据`ServiceKey`

什么是通过的最佳方式`ServiceKey`？我试图将它设置在 中`TestContext`，但它似乎在测试之间消失了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T15:27:34.213

您不应该在单元测试之间共享任何状态，这是良好单元测试的非常重要的属性之一 - `Independency`. 测试不应相互影响。

请参阅此 StackOverflow 帖子：[什么是好的单元测试？](https://stackoverflow.com/questions/61400/what-makes-a-good-unit-test)

**编辑：**回答评论

要共享逻辑/行为（方法），您可以将公共代码提取到辅助方法中并从不同的测试中调用它，例如创建用户模拟的辅助方法：

```
private IUser CreateUser(string userName)
{
    var userMock = MockRepository.GenerateMock<IUser>();
    userMock.Expect(x => x.UserName).Return(userName);
    return userMock;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T17:02:03.523

单元测试的想法是每个测试检查一个功能。如果您在测试之间创建依赖关系，则不再确定它们会一直通过（它们可能会以不同的顺序执行，等等）。

在您的特定情况下，您可以做的就是保持`Test1`原样。它只关注注册过程的功能。您不必将其保存在`ServiceKey`任何地方。只需在测试方法中断言。

对于第二个测试，您必须设置（伪造）成功运行所需的一切。[遵循“安排行为断言”原则](http://www.arrangeactassert.com/why-and-what-is-arrange-act-assert/)通常是一个好主意，您可以在其中设置数据以进行测试，对其采取行动，然后检查一切是否按预期工作（它还为您的测试增加了更多的清晰度和结构）。

因此，最好伪造`ServiceKey`您在第一次测试运行中获得的信息。这样，控制要测试的数据也容易得多。使用模拟框架（例如 vs2012 中的 moq 或 fakes）以您需要的方式排列您的数据。[moq](http://code.google.com/p/moq/)是一个非常轻量级的模拟框架。如果您还没有使用任何模拟实用程序，您应该检查一下。

希望这可以帮助。

# migration - 2013 年 3 月 6 日，访问令牌和 /me/accounts/

> ID：15161140
> 
> 赞同：0
> 
> 时间：2013-03-01T15:24:22.900
> 
> 标签：migration, access-token, facebook-page

所以。根据待定的 3 月 6 日更改，我对“从 /me/accounts/ 和 page_admin FQL 表中删除应用程序”更改有疑问。

对我来说，这种变化似乎意味着您也将删除“ `/<user_id>/accounts/`” - 是这样吗？

因为我正在使用“ `/<user_id>/accounts/`”来获取未过期的访问令牌（参见[https://developers.facebook.com/roadmap/offline-access-removal/#page_access_token](https://developers.facebook.com/roadmap/offline-access-removal/#page_access_token)）。

干杯!

图像

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:47:04.197

请注意，路线图声明他们将“在 /me/accounts/ 下显示**应用程序”。**可以访问 Pages 的端点仍然存在。只有当前在该列表中的应用程序不会。如果您想获得他们作为开发人员的应用程序，文档状态“点击 /me/applications/developer/ 或使用 app_role FQL 表”。

[https://developers.facebook.com/blog/post/2013/02/27/platform-updates--operation-developer-love/](https://developers.facebook.com/blog/post/2013/02/27/platform-updates--operation-developer-love/)

# java - ANTLR：空白处理策略被破坏

> ID：15161141
> 
> 赞同：1
> 
> 时间：2013-03-01T15:24:32.783
> 
> 标签：java, antlr

好吧，根据我已经发布的问题数量，我经常觉得自己是使用 ANTLR 的最愚蠢的人，但在这里我再次寻求帮助。

我最终尝试重写现有策略以简化它，只是让“简化”的策略决定轰炸应该发送到 HIDDEN 通道的空白（skip() 也不起作用）。它可能只是乱序的 Lexer 令牌，但我很难过（也许我对如何指定顺序没有很好的理解）。

无论如何，这是整个（经过一定程度消毒的）政策：

```
grammar ValidatingPolicy;

options {
  language = Java;
    backtrack = true; 
}

// package and imports for the parser
@parser::header {
package org.jason.manager.impl;

import org.jason.manager.RecognitionRuntimeException;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
}

// package and imports for the lexer
@lexer::header {
package org.jason.manager.impl;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
}

// member functions and fields for the parser
@parser::members {

 private static final Logger log = LoggerFactory.getLogger(ValidatingPolicyParser.class);
 @Override
 protected Object recoverFromMismatchedToken(IntStream input, int ttype, BitSet follow) throws RecognitionException {
   throw new MismatchedTokenException(ttype, input);
 }

  @Override
 public Object recoverFromMismatchedSet(IntStream input, RecognitionException e, BitSet follow) throws RecognitionException {
   throw e;
 }

 @Override
 public String getErrorMessage(RecognitionException e, String[] tokenNames) {
  // wrap in a runtime exception to escape ANTLR's dungeon
  throw new RecognitionRuntimeException(e);
 }
}

// member functions and fields for the lexer
@lexer::members {
  private static final Logger log = LoggerFactory.getLogger(ValidatingPolicyLexer.class);
}

// validate a group of SHOW constructs
showGroup
  : show+ EOF
  ;

// validate a construct WITHOUT show (MINQ, MOS, etc)
noShow
  : simpleIfStatement+ EOF
  ;

// validate a SHOW construct (COMP or ELIG validation)
show
  : SHOW STRING FOR simpleIfStatement+
  ;

// handle an if statement
simpleIfStatement
  // basic if statement
  : IF chainedOperation THEN operationGroup (ELSE operationGroup)? ENDIF
  // if statement with recursive if statement in THEN or ELSE block
  | IF chainedOperation THEN simpleIfStatement (ELSE simpleIfStatement)? ENDIF
  | operationGroup
  ;

// aggregate multiple operations. When evaluated, there is an implicit AND
// when there are multiple groups
operationGroup
  : chainedOperation+
  ;

// chain an operation together optionally with AND/OR
chainedOperation
  @init {
    log.info("Entered chainedOperation");
  }
  : operation (AND operation | OR operation)*
  ;

// aggregate into a single rule that can be referenced up the chain
operation
  @init {
    log.info("Entered operation");
  }
  // legal operation
  : (booleanLogical | stringLogical | integerLogical | dateLogical | datePeriodLogical)
  ;

// LOGICAL OPERATIONS
// Logical operators do not have a pass through, but may have limits
// on which particular operators can be used

// compare DATE/DATE_FIELD to DATE/DATE_FIELD
dateLogical
  @init {
    log.info("Entered dateLogical");
  }
  : dateOp (EQ|NE|LT|LE|GT|GE) dateOp
  ;

// compare DATE_PERIOD/DATE_PERIOD_CONSTANT/DATE_PERIOD_FIELD
datePeriodLogical
  @init {
    log.info("Entered datePeriodLogical");
  }
  : datePeriodOp (EQ|NE|LT|LE|GT|GE) datePeriodOp
  ;

// compare INTEGER_FIELD/INTEGER
integerLogical
  @init {
    log.info("Entered integerLogical");
  }
  : integerOp (EQ|NE|LT|LE|GT|GE) integerOp
  ;

// compare BOOLEAN_FIELD/BOOLEAN_CONSTANT
booleanLogical
  : booleanOp (EQ|NE) booleanOp
  ;

// compare STRING_FIELD/STRING
stringLogical
  : stringOp (EQ|NE|LT|LE|GT|GE) stringOp
  {
    System.out.println("stringLogical: matched rule 1");
  }
  ;

dateOp
  @init {
    log.info("Entered dateOp");
  }
  // pass through if no math op needs to be performed
  : DATE_FIELD|DATE|DATE_CONSTANT
  // match a legal math op
  | DATE_FIELD|DATE|DATE_CONSTANT ((PLUS|MINUS) DATE_FIELD|DATE|DATE_CONSTANT|DATE_PERIOD_FIELD|DATE_PERIOD_CONSTANT (' ' DATE_PERIOD_CONSTANT)*)*
  ;

datePeriodOp
  // pass through if no math op needs to be performed
  : DATE_PERIOD_FIELD|DATE_PERIOD_CONSTANT
  // match a legal math op
  | DATE_PERIOD_FIELD ((PLUS|MINUS) DATE_FIELD|DATE|DATE_CONSTANT|DATE_PERIOD_FIELD|DATE_PERIOD_CONSTANT+)*
  ;

integerOp
  @init {
    log.info("Entered integerOp");
  }
  // pass through if no math op needs to be performed
  : INTEGER_FIELD | INTEGER
  // match a legal math op
  | INTEGER_FIELD (PLUS|MINUS INTEGER_FIELD|INTEGER)*
  ;

// booleanOp, stringOp, and waiverOp don't do anything since + and - ops are not
// supported for them
booleanOp
  : BOOLEAN_FIELD | BOOLEAN_CONSTANT
  ;

stringOp
  : STRING_FIELD | STRING
  ;

// these items are not directly referenced by parser rules, so they
// can be fragments

fragment DIGIT: ('0'..'9');
fragment DATE: ;
fragment DATE_PERIOD_CONSTANT: DIGIT+ ' '+ (YEAR | MONTH | WEEK | DAY);
YEAR: ('YEAR'|'YEARS');
MONTH: ('MONTH'|'MONTHS');
WEEK: ('WEEK'|'WEEKS');
DAY: ('DAY'|'DAYS');

DATE_FIELD:('DOB'|'TEST_DATE');
DATE_PERIOD_FIELD:('EMPLOYMENT_PERIOD');
BOOLEAN_FIELD:('CERTIFIED');
INTEGER_FIELD:('AGE'|'OPTION');
STRING_FIELD:('STATE'|'UF_USERID'|'USER_LEVEL');

// various tokens can't be fragments since they are directly referenced by parser rules
COMMENT_START: ';';
BOOLEAN_CONSTANT: ('TRUE'|'FALSE'|'"Y"'|'"N"');
DATE_CONSTANT:('TODAY'|'YESTERDAY'|'TOMMOROW');
SHOW: 'SHOW';
FOR: 'FOR';
IF: 'IF';
THEN: 'THEN';
ELSE: 'ELSE';
ENDIF: 'ENDIF';
AND: 'AND';
OR: 'OR';
EQ: '=';
NE: '<>';
LT: '<';
LE: '<=';
GT: '>';
GE: '>=';
NOT: 'NOT';
HAS: 'HAS';
PLUS: '+';
MINUS: '-';

// Commented ifs seem to take more than one line, even if comments are
// only supposed to be a single line
COMMENTED_IF: COMMENT_START WS* IF (options {greedy=false;} : .)* ENDIF '\r\n'
{
  log.info("Lexer: matched COMMENTED IF" + getText());
  $channel=HIDDEN;
  //skip();
};

// Handle an empty comment such as "; "
EMPTY_COMMENT: COMMENT_START WS* '\r\n'
{
  log.info("Lexer: matched EMPTY_COMMENT: " + getText());
  $channel=HIDDEN;
};

// Handle a single-line comment. Policies often end with a comment, so be ready for it
SINGLE_COMMENT: COMMENT_START ~('\r'|'\n')*  (('\r\n')+| EOF)
{
  log.info("Lexer: matched SINGLE_COMMENT: " + getText());
  $channel=HIDDEN;
};

INTEGER
  // Bart Kiers on SO helped me with this one, basically handle a date period such as
  // 4 WEEKS, 1 YEAR 6 MONTHS 2 WEEKS 8 DAYS, etc
 : (DATE_PERIOD_CONSTANT)=> DATE_PERIOD_CONSTANT ((' '+ DATE_PERIOD_CONSTANT)=> ' '+ DATE_PERIOD_CONSTANT)*
   {
      // manually switch the type from INTEGER to DATE_PERIOD_CONSTANT
     $type=DATE_PERIOD_CONSTANT;
     log.info("Matched DATE_PERIOD_CONSTANT: " + getText());
   }
 | DIGIT+
   {
      // match a 6-digit or 8-digit date format (20120101 or 201201)
     if ($text.matches("(19|20|21)[0-9]{2}[0-1]\\d{3}") || $text.matches("(19|20|21)\\d{2}(0[1-9]|1[0-2])")) {
      log.info("Matched DATE pattern: " + getText());
       $type = DATE;
     } else {
      log.info("Matched INTEGER: " + getText());
     }
   }   
 ;

STRING
  : '"' ID  (' ' ID)* '"'
  ;

ID: ('A'..'Z'|'a'..'z'|DIGIT|','|'!'|'?'|':')+;

WS: (' '+|'\r'|'\n'|'\t') 
{
  //skip();
  $channel=HIDDEN;
}; 
```

“show” 构造应该如下所示：

```
SHOW "DOES NOT MEET AGE REQUIREMENTS FOR EMPLOYMENT" FOR
  AGE < 18

SHOW "TOO YOUNG FOR CERTIFICATION IN KY" FOR
   IF STATE="KY" THEN AGE > 21 ENDIF 
```

它在我删除空格时起作用，例如字符串周围或运算符周围等。

此外，如果有人在语法中看到任何其他愚蠢之处，我会很高兴听到它们。

杰森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T05:55:58.257

您的词法分析器正在一个隐式的、未命名的词法分析器规则中匹配空格。此词法分析器规则在解析器规则中引用`dateOp`：

```
dateOp
  //...
  // pass through if no math op needs to be performed
  : DATE_FIELD|DATE|DATE_CONSTANT
  // match a legal math op
  | DATE_FIELD|DATE|DATE_CONSTANT 
     ((PLUS|MINUS) DATE_FIELD|DATE|DATE_CONSTANT|DATE_PERIOD_FIELD|DATE_PERIOD_CONSTANT 
       (' ' DATE_PERIOD_CONSTANT)* //<--- ' ' becomes a new lexer rule
     )*
  ; 
```

它的行为就像一个普通的词法分析器规则，所以使用这个输入：

```
SHOW "DOES NOT MEET AGE REQUIREMENTS FOR EMPLOYMENT" FOR
  AGE < 18 
```

词法分析器产生这些标记：

```
[SHOW : SHOW] [' ' :  ] [STRING : "DOES NOT MEET AGE REQUIREMENTS FOR EMPLOYMENT"] 
[' ' :  ] [FOR : FOR] [INTEGER_FIELD : AGE] [' ' :  ] [LT : <] [' ' :  ] 
[INTEGER : 18] 
```

注意`[' ' : ]`令牌。这些是隐含的词法分析器规则。解析器不期望这些标记超出`dateOp`规则，因此解析噱头。

删除`' '`from parser rule`dateOp`后，上面的输入按预期生成以下标记：

```
[SHOW : SHOW] [STRING : "DOES NOT MEET AGE REQUIREMENTS FOR EMPLOYMENT"] 
[FOR : FOR] [INTEGER_FIELD : AGE] [LT : <]
[INTEGER : 18] 
```

我不知道删除`' '`from`dateOp`在您的语法中是否可以接受。如果需要显式测试空格，请考虑重写您可以将空格测试向下移动到词法分析器中的内容。或者，解析器可以提前查看下一个标记是否是隐藏的 WS 标记。`dateOp`不过，对于初学者来说，我建议尽可能地清理干净，看看东西落在哪里。

# c++ - 无法从文件中读取

> ID：15161159
> 
> 赞同：0
> 
> 时间：2013-03-01T15:25:07.707
> 
> 标签：c++, mfc, fstream

我正在尝试从 .log 文件中读取文本。我最初让它在一个 Windows 控制台应用程序中运行，但我现在正在尝试使用 MFC 制作一个 GUI 版本。问题是当我将while循环设置为while（file.good（））时，它完全跳过了循环，我不知道为什么，因为file.open（）没有错误

```
void Conversion::toXml(CString openPath, CString savePath)
{
CString null("/0");

int c = openPath.GetLength(),q=0;
while(q<c)
{
    if(openPath[q] == '\\')
    {
        openPath.Insert(q,'\\');
        q++;
    }
    q++;
}

CStringA charstr(openPath);
const char* oPath((const char *) charstr);
CStringA charstr2(savePath);
const char* sPath((const char *) charstr2);

ifstream openFile;
ofstream savedFile(sPath);

string recText = "";
string temp;
openFile.open(oPath);

while(openFile.good())
{
    getline(openFile,temp);

    recText = recText + temp;
} 
```

较小的版本（应该编译）

```
#include <iostream>
#include <fstream>
#include <string>
#include "stdio.h"
#include <windows.h>
#include <algorithm>
#include <atlstr.h> 

using namespace std;

int main()
{
string recText = "";
string temp;
CString path = "C:\\Users\\name\\Desktop\\2012-08-281.log";
CStringA charstr(path);
const char* oPath((const char *) charstr);

ifstream xmlDoc (oPath);
ofstream finished ("C:\\Users\\name\\Documents\\example3.xml");

while(xmlDoc.good())
{
    getline(xmlDoc,temp);

    recText = recText + temp;
}
    finished<<recText<<endl;
    return 0;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:30:23.197

问题可能是您在不需要反斜杠时尝试对其进行转义，从而在路径中添加不必要的反斜杠。*只有字符串文字*才需要转义反斜杠。可能是 Windows 不喜欢带有多个连续反斜杠的路径。

# firebase - 如何通过 on("child_changed") 判断哪些后代发生了变化

> ID：15161161
> 
> 赞同：9
> 
> 时间：2013-03-01T15:25:10.137
> 
> 标签：firebase

例如，我有以下数据库结构：

```
/ 
+ users
  + 1
    + items
      + -xxx: "hello"
  + 2
    + items 
```

然后;

```
var usersRef = new Firebase("https://mydb.firebaseio.com/users");
usersRef.on("child_changed", function(snapshot) {
  utils.debug(JSON.stringify(snapshot.exportVal()));
}); 
```

如果将值“world”推送到“/users/1/items”，我可能会得到：

```
{"items": {"-xxx": "hello", "-yyy": "world"}} 
```

那么，如何判断哪一个被改变了呢？

我需要对“/users/$id/items”的每个引用都打开（“child_added”）？

注意：我正在尝试在 node.js 中编写一个管理进程。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-01T18:31:05.607

child_changed 事件仅提供有关哪个直接子级已更改的信息。如果数据结构中更深的节点发生更改，您将知道哪个直接子节点受到影响，但不知道更改数据的完整路径。这是设计使然。

如果您想要精确更新更改的内容，您应该递归地将回调附加到您关心的所有元素。这样，当一个项目发生变化时，你就会知道该项目是由哪个回调触发的。Firebase 实际上针对这个用例进行了优化；附加大量的回调——甚至数千个——应该可以正常工作。在幕后，Firebase 将所有回调聚合在一起，并且只同步所需的最少数据集。

因此，对于您的示例，如果您想在每次为任何用户添加新项目时收到警报，您可以执行以下操作：

```
var usersRef = new Firebase("https://mydb.firebaseio.com/users");
usersRef.on("child_added", function(userSnapshot) {
  userSnapshot.ref().child("items").on("child_added", function(itemSnapshot) 
    utils.debug(itemSnapshot.val());
  });
}); 
```

如果您正在处理大量用户（数十万或数百万），并且同步所有数据是不切实际的，那么还有另一种方法。与其让您的服务器直接监听所有数据，不如让它监听一系列更改。然后，当客户端将项目添加到他们的项目列表中时，他们也可以将项目添加到此队列中，以便服务器知道它。

这是客户端代码的样子：

```
var itemRef = new Firebase("https://mydb.firebaseio.com/users/MYID/items");
var serverEventQueue = new Firebase("https://mydb.firebaseio.com/serverEvents");
itemRef.push(newItem);
serverEventQueue.push(newItem); 
```

然后，您可以让服务器在该队列上侦听 child_add 并在事件进入时处理它们。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-05-13T12:37:35.507

Andrew Lee 给出了一个很好的答案，但我认为你应该尝试使用云功能。像这样的东西应该工作：

```
exports.getPath = functions.database.ref('/users/{id}/items/{itemId}')
.onWrite(event => {
  // Grab the current value of what was written to the Realtime Database.
  const original = event.data.val();
  console.log('user id', event.params.id);
  console.log('item id', event.params.itemId);
}); 
```

# blob - hsqldb中的VARBINARY和BLOB有什么区别？

> ID：15161168
> 
> 赞同：0
> 
> 时间：2013-03-01T15:25:44.297
> 
> 标签：blob, hsqldb

我想将文件存储在 hsqldb 数据库中。有些文件是大小从几 KB 到数百 KB 的文本文件，有些是大小可能达到几 MB 的二进制文件。

根据文档（[http://hsqldb.org/doc/guide/sqlgeneral-chapt.html#sgc_binary_types](http://hsqldb.org/doc/guide/sqlgeneral-chapt.html#sgc_binary_types)），我可以使用类型 VARCHAR、VARBINARY 和 BLOB 来存储文件。

我想我会将文件存储为二进制文件，以便能够以相同的方式存储文本和二进制文件。但我不明白这两种二进制类型 - VARBINARY 和 BLOB 之间的区别，除了它们具有不同的默认长度值。

它们之间有什么区别？哪一个更适合文件内容存储？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T16:46:53.660

VARCHAR 或 VARBINARY 类型不是存储几千字节文件的最佳类型。

您可以使用 BLOB 类型。this 和 VARBINARY 的区别在于 BLOB 和 CLOB 使用的大对象的专用存储机制。

有关更多详细信息，请参见此处：

[http://hsqldb.org/doc/guide/management-chapt.html#mtc_large_objects](http://hsqldb.org/doc/guide/management-chapt.html#mtc_large_objects)

# powershell-2.0 - 从 ForEach-Object 导出内容

> ID：15161170
> 
> 赞同：0
> 
> 时间：2013-03-01T15:25:45.100
> 
> 标签：powershell-2.0, active-directory-group

我正在尝试创建一个 PowerShell 命令来查找并导出 CVS 中提供的每个分发列表的所有者。

```
[PS] C:\WINDOWS\system32>Import-Csv $path_import | ForEach-Object {Get-QADGroup $_.Identity | select ManagedBy,Name | Export-Csv $path_export} 
```

目前，该脚本会将我尝试捕获的信息输出到屏幕上，但只导出最后一行。

任何援助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:41:01.560

试试这个：

```
Import-Csv $path_import | ForEach-Object {Get-QADGroup $_.Identity | 
select ManagedBy,Name } | Export-Csv $path_export -notypeinformation 
```

# python - 建立与 PyMOL python 的连接

> ID：15161174
> 
> 赞同：0
> 
> 时间：2013-03-01T15:26:02.433
> 
> 标签：python, pymol

我在 wxpython 中使用 matplotlib 创建了一个联系人地图，现在我要做的是与 pyMOL 建立一个“连接”。我希望我的程序像 CM-View 一样，当您将鼠标悬停在联系人地图上的点上时，它会显示 PyMOL 上的 2 个联系人，并在它们之间显示一条线。还有一些事情，比如告诉 pyMOL 只选择 1 个链。所以基本上我想将数据从我的 GUI 发送到 pyMOL 以使其执行某些操作，例如将鼠标悬停在联系人上或告诉 pyMOL 执行某些操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T12:34:26.177

如果你不是*Venkatramanan Krishnamani*，你可能想看看他的 PyMOL 扩展[CMPyMOL](http://emptyewer.github.io/CMPyMOL/)的代码。

嘿，他的扩展/插件也是用于可视化联系人地图的！

在他的插件中，当鼠标悬停在接触图上时，残留物不会突出显示，而是鼠标点击接触图。但这已经足够接近你想要的了，我猜。

# c# - 使用 LINQ 查找重复的行（带有指定列的列表）

> ID：15161180
> 
> 赞同：4
> 
> 时间：2013-03-01T15:26:12.480
> 
> 标签：c#, linq

我使用下面的代码来获取 3 列的重复行：字符串、日期、金钱。我想知道是否有任何通用方法可以在此 LINQ 中输入动态列名列表来查找重复行？

```
DataTable allDuplicates = dt.AsEnumerable()
    .GroupBy(dr => new
    { 
        Field1 = dr.Field<object>("String"), 
        Field2 = dr.Field<object>("Date"), 
        Field3 = dr.Field<object>("Money"), 
    })
    .Where(g => g.Count() > 1)
    .SelectMany(g => g)
    .ToList().CopyToDataTable();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T15:48:40.953

如何使用自定义 `ArrayEqualityComparer<T>`类型（例如[此处列出](https://stackoverflow.com/a/7244729/412770)的类型）：

```
string[] colsToConsider = ...

var allDuplicates = dt.AsEnumerable()
                      .GroupBy(dr => colsToConsider.Select(dr.Field<object>)
                                                   .ToArray(),
                               new ArrayEqualityComparer<object>())       
                      .Where(g => g.Count() > 1)
                      .SelectMany(g => g)
                      .CopyToDataTable(); 
```

`Dictionary<TKey, TValue>`如果您在此处发现隐式使用数组索引，您也可以考虑使用（和相关的字典比较器）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-27T08:30:31.977

同时执行上面的代码。

无法从用法中推断方法“System.Linq.Enumerable.Select(System.Collections.Generic.IEnumerable, System.Func)”的类型参数。尝试明确指定类型参数

# javascript - 我的菜单溢出了空间

> ID：15161187
> 
> 赞同：1
> 
> 时间：2013-03-01T15:26:43.980
> 
> 标签：javascript, jquery, css, menu, collapse

我试图制作一个折叠早期扩展选择的菜单，但我无法使其工作。

```
var currentId;

$(document).ready(function () {
    $(":range").rangeinput({
        progress: true
    });

    /* Slide Toogle */
    $("ul.expmenu li > div.header").click(function () {
        var arrow = $(this).find("span.arrow");

        if (arrow.hasClass("up")) {
            arrow.removeClass("up");
            arrow.addClass("down");
        } else if (arrow.hasClass("down")) {
            arrow.removeClass("down");
            arrow.addClass("up");
        }

        $('#' + currentId).parent().find("ul.menu").slideToggle();
        $(this).parent().find("ul.menu").slideToggle();
        currentId = $(this).attr('id');
    });
}); 
```

您可以在此地址找到主页：http: [//admin.dq.se/kramers/nyamenyer.html](http://admin.dq.se/kramers/nyamenyer.html)

因此，如果我按“BIL”，我希望“BIL”展开.. 然后如果我按“MC”，我希望 BIL 折叠并 MC 展开。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T15:31:16.977

在向下滑动之前向上滑动所有内容

```
$("ul.expmenu li > div.header").click(function () {

 $(this).parent().siblings().find('ul.menu').slideUp();
 $(this).parent().siblings().find('span.arrow').removeClass('up').addClass('down');

....

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T15:34:36.913

这不太对：

```
$(this).parent().find("ul.menu").slideToggle(); 
```

你需要走得更高：

```
$(this).closest('ul.expmenu').find("ul.menu").slideToggle(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T15:42:46.307

我会做大致这样的事情：

```
 /* Slide Toogle */
    $("ul.expmenu li > div.header").click(function () {
    var arrow = $(this).find("span.arrow");

    if (arrow.hasClass("up")) {
        arrow.removeClass("up");
        arrow.addClass("down");
    } else if (arrow.hasClass("down")) {
        $('.arrow.up.').parents('li').children('ul.menu').slideUp();
        $('.arrow.up.').removeClass('up').addClass('down');
        arrow.removeClass("down");
        arrow.addClass("up");
    } 
```

它基本上会查找任何“向上”箭头，并将其菜单向上（注意 DOM 遍历），仅在所讨论的箭头仍然“向下”的情况下。

# node.js - 视图内的nodejs服务器代码

> ID：15161194
> 
> 赞同：0
> 
> 时间：2013-03-01T15:26:53.077
> 
> 标签：node.js, express

我正在用 nodejs & express 建立一个网站。
我最初来自 .net 世界，使用 MVC / Razor 构建站点。

有没有办法使用 nodejs/express 将服务器端代码插入到视图中？
在我的脑海中，我正在考虑类似于我可以在 asp.net mvc 视图中执行的操作，如下所示：

```
<div class='user-info'>
    <%= Db.FetchUserById(1).Name %>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:32:47.290

好吧，你有很多选择。检查此列表： [https ://github.com/joyent/node/wiki/modules#wiki-templating](https://github.com/joyent/node/wiki/modules#wiki-templating)

听说最多的是 Jade：http: [//jade-lang.com/](http://jade-lang.com/)我想。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T11:07:51.607

[胡子是你要找的。](https://github.com/janl/mustache.js)

它也适用于 Express。这是有关[如何将对象推送到视图的快速指南。](http://bitdrift.com/post/2376383378/using-mustache-templates-in-express)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T12:32:59.017

看看ejs，我认为它有类似的语法。

[https://github.com/visionmedia/ejs](https://github.com/visionmedia/ejs)

您可以使用--ejs（即express--ejs）开始构建一个快速应用程序，以将其作为模板引擎包含在内。

# entity-framework - DDD 和实体框架：从聚合根中提取子级

> ID：15161196
> 
> 赞同：1
> 
> 时间：2013-03-01T15:27:13.913
> 
> 标签：entity-framework

这个快把我逼疯了！为简单起见，我不会列出用于我们的 DDD 的整个代码，而只是公开我尝试过的内容并解释什么不起作用。

我有一个简单的数据库结构：

Products（保存产品数据）
Orders（保存输入的订单）
OrderProducts（订单和产品之间的参考表）

我有一个订单聚合根，我想提取一个简单订单的产品数量。

我通过 id 获取我的 Order，这会产生一个 EF lambda：

```
var order = _orderRepository.Get(orderId); 
```

然后，我尝试使用以下命令按该顺序提取产品数量：

```
var count = order.OrderProducts.Count(); 
```

当订单有很多记录时，这条线会阻塞，因为它正在获取所有记录。美好的。因此，我通过向我想要从我的订单中计数的产品添加一些过滤器来对其进行一些改进。一个产品有几个属性，其中包括一个类型（因此，有一个类型 ID）。所以，现在我正在尝试这个：

```
//This is trimming down my results to about a dozen products)
var count = order.OrderProduct
                 .Where(op=>op.Product.TypeId == 2)
                 .Count(); 
```

如果我使用 Linqpad 查看生成了什么样的 SQL，令我惊讶的是，它仍然从这个订单中加载所有 OrderProducts！

如何强制它直接在查询中应用过滤器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:01:12.207

它正在加载所有这些，因为一旦您触摸导航属性（即`order.OrderProducts`）急切加载就会启动并加载所有它们（即甚至是您不想要的那些）。减少这种情况的唯一选择是在给定`orderID`. 也许是这样的：

```
_orderProductRepository.Where(p => p.OrderID == orderId && p.Product.TypeID == 2); 
```

# c# - 更新我的应用程序可以避免我获取旧文件

> ID：15161204
> 
> 赞同：0
> 
> 时间：2013-03-01T15:27:58.013
> 
> 标签：c#, clickonce, updates

我正在使用 C# winforms 开发桌面应用程序。我正在我的应用程序运行的目录上创建一些文件和文件夹。我正在使用单击一次方法来部署应用程序。我的问题是，每次我更新我的应用程序时，它都会创建一个新的根文件夹来运行。而且我将无法再使用这些文件了。有什么解决方法吗？我正在考虑在“C:\MyCompany\MyApplication”创建一个文件夹，但这样就很容易访问和破坏。我很高兴听到任何其他有利于我的建议或知识:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T15:42:02.467

您应该将文件和文件夹存储在用户的`Application Data`文件夹中。您可以使用以下语句获取此文件夹的路径：

```
string appDataPath = System.Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData); 
```

然后，您应该在该路径中为您的应用程序创建一个文件夹并将所有内容存储在那里。

当然还有其他解决方案，但重点是您不应该*使用*应用程序文件夹，因为这确实会在您每次发布时更改，*并且*由于其他几个原因（数据备份等），这是不好的做法。

# c++ - 在“C++”中获取或生成系统信息

> ID：15161207
> 
> 赞同：0
> 
> 时间：2013-03-01T15:28:11.323
> 
> 标签：c++, opengl, driver, gpu, system-information

如果您查看 Windows pc 的系统信息窗口并在左侧窗格中选择组件-> 显示。右窗格中的倒数第二个值是 PNP 设备 ID。无论如何，XP 就是这种情况。

我需要某种方式来访问或生成此 PNP 设备 ID 值。

我目前`glGetString ( RENDERER ) and glGetString ( VENDOR )`用来识别主gpu。有人告诉我，更新驱动程序时这些值可能会发生变化，因此不适合用作我们已知问题设备的列表。进一步搜索表明，这些 glGetString 值是从 PNP 设备 ID 生成的，它是 bios 信息和驱动程序 .inf 文件数据的组合。

有谁知道 C++ 中访问此 PNP 设备 ID 的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:23:57.277

OpenGL 不处理这种低级设备访问。它的设备模型纯粹是抽象的，报告的字符串大多具有信息价值。如果您想了解有关设备的特定信息，则必须使用依赖于操作系统的总线枚举函数。

# c# - 在 PDF 中查找某些文本，然后将找到的页码返回到另一个部分注意：使用 Docotic.pdf

> ID：15161209
> 
> 赞同：1
> 
> 时间：2013-03-01T15:28:16.593
> 
> 标签：c#, .net

在下面的代码中，用户将输入一个搜索字符串（barcodedata）。然后该字符串将被截断为前 5 个字符，并用作作业编号。作业编号也是我将扫描条形码数据的 pdf 的名称。

我想要的是“查找”按钮执行以下代码，然后将找到的值返回给 startpagedata。

我无法判断程序是否实际上并未扫描 PDF 以查找搜索字符串，或者该值是否根本没有返回到程序。

```
using BitMiracle.Docotic.Pdf;
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Diagnostics;
using System.IO;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Web;
using System.Windows.Forms;
using Acrobat;

namespace BarCodeReader
{
    public partial class Form1 : Form
    {
        public string stringsToFind;
        public string pathtofile;

        public Form1()
        {
            InitializeComponent();
        }

        private void barcodedata_TextChanged(object sender, EventArgs e)
        {
            stringsToFind=barcodedata.Text;
            pathtofile = "C:\\" + StringTool.Truncate(barcodedata.Text, 5) + ".pdf";
            jobnumberdata.Text = StringTool.Truncate(barcodedata.Text, 5);
        }

        private void label4_Click(object sender, EventArgs e)
        {

        }

        private void jobnumberdata_TextChanged(object sender, EventArgs e)
        {
            jobnumberdata.Text = jobnumberdata.Text.TrimStart('0');
            Console.WriteLine(jobnumberdata.Text);
        }

        private void startpagedata_TextChanged(object sender, EventArgs e)
        {
            Console.WriteLine(startpagedata.Text);
        }

        private void piecesdata_TextChanged(object sender, EventArgs e)
        {
        }

        private void FindIt_Click(object sender, EventArgs e)
        {
            PdfDocument pdf = new PdfDocument(pathtofile);
            for (int i = 0; i < pdf.Pages.Count; i++)
            {
                string pageText = pdf.Pages[i].GetText();
                int count = 0;
                int lastStartIndex = pageText.IndexOf(stringsToFind, 0, StringComparison.CurrentCultureIgnoreCase);
                while (lastStartIndex != -1)
                {
                    count++;
                    lastStartIndex = pageText.IndexOf(stringsToFind, lastStartIndex + 1, StringComparison.CurrentCultureIgnoreCase);
                }

                if (count != 0)
                    startpagedata.Text = Convert.ToString(lastStartIndex);
            }

        }
    }

    public static class StringTool
    {
        /// <summary>
        /// Get a substring of the first N characters.
        /// </summary>
        public static string Truncate(string source, int length)
        {
            if (source.Length > length)
            {
                source = source.Substring(0, length);
            }
            return source;
        }

        /// <summary>
        /// Get a substring of the first N characters. [Slow]
        /// </summary>
        public static string Truncate2(string source, int length)
        {
            return source.Substring(0, Math.Min(length, source.Length));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T03:44:24.760

这段代码有什么问题？如果 FindIt_Click 未在单击时执行，则可能您没有将其与“查找”按钮相关联。

FindIt_Click 中的代码看起来很正确，除了以下几点：

*   它可能无法达到您的预期。它返回*找到搜索字符串的最后一页文本中的最后一个索引*。但是您可能期望*找到搜索字符串的最后一页的索引*吗？
*   您可以使用[pageText.LastIndexOf](http://msdn.microsoft.com/en-us/library/ms224420.aspx)方法快速找到*lastStartIndex*。
*   不要忘记 Dispose PdfDocument 实例。例如使用*using*关键字：

```
    使用 (PdfDocument pdf = new PdfDocument(pathtofile))
    {
    ...
    }

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T12:03:25.560

为了使用`Docotic.pdf`你可以使用`Acrobat.dll`来查找当前页码。首先打开pdf文件并使用搜索字符串

```
Acroavdoc.open("Filepath","Temperory title") 
```

和

```
Acroavdoc.FindText("String"). 
```

如果在此 pdf 文件中找到字符串，则光标移动到特定页面，搜索到的字符串将突出显示。现在我们`Acroavpageview.GetPageNum()`用来获取当前页码。

```
Dim AcroXAVDoc As CAcroAVDoc
Dim Acroavpage As AcroAVPageView
Dim AcroXApp As CAcroApp

AcroXAVDoc = CType(CreateObject("AcroExch.AVDoc"), Acrobat.CAcroAVDoc)
AcroXApp = CType(CreateObject("AcroExch.App"), Acrobat.CAcroApp)

AcroXAVDoc.Open("File path", "Original document")
AcroXAVDoc.FindText("String is to searched", True, True, False)

Acroavpage = AcroXAVDoc.GetAVPageView()

Dim x As Integer = Acroavpage.GetPageNum
MsgBox("the string found in page number" & x) 
```

# flash - Flash 上的不透明度不起作用

> ID：15161211
> 
> 赞同：0
> 
> 时间：2013-03-01T15:28:18.717
> 
> 标签：flash, visibility, opacity

我正在尝试通过 YouTube 视频制作动画。问题是，当 Flash 未激活时，一切正常，但是当我激活 Flash 时，div 位于视频下方，您看不到它。我尝试使用 z-index，但它不起作用。这里有一些视频来说明：

这就是动画的外观：[https ://mega.co.nz/#!iVNExIxL!X_kxDWHtIPChRNz-Mef_KQ499QEluuc0rR-FHTYjUN0](https://mega.co.nz/#!iVNExIxL!X_kxDWHtIPChRNz-Mef_KQ499QEluuc0rR-FHTYjUN0)

激活闪光灯时会发生这种情况：[https ://mega.co.nz/#!fZk03J6D!KbY6CT7KTWnOg4a42K-UQx7vGGNxZ1zinaZnI8IpkmE](https://mega.co.nz/#!fZk03J6D!KbY6CT7KTWnOg4a42K-UQx7vGGNxZ1zinaZnI8IpkmE)

这是使用的代码：

```
#div {
left:698px;
top:65px;
width:320px;
height:390px;
visibility:visible;
animation:open 6s reverse ease-in;
}
@keyframes open {
0% {left:698px;opacity:0;visibility:collapse;}
50% {left:338px;opacity:1;visibility:visible;}
100% {left:698px;opacity:0;visibility:collapse;}
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:58:58.827

当您在页面上嵌入 Flash 对象时，`opaque`您需要指定参数。可能相关`wmode`的另一个值是. [您可以在此处](http://helpx.adobe.com/flash/kb/flash-object-embed-tag-attributes.html)阅读有关它们的信息。这两种方法都允许您在 Flash 应用程序的顶部或后面分层。`wmode``transparent`

请注意，使用这些`wmode`值会使 Flash 不得不更加努力地工作。它还可以暴露一些浏览器中的问题，如果这是一个问题，它会破坏 Flash 应用程序的可访问性。并不是要警告您，这些错误通常是极端情况，除非您从事火箭科学，否则您可能不会注意到任何性能问题。

# neo4j - neo4j 脚本文件格式 - 有吗？

> ID：15161221
> 
> 赞同：24
> 
> 时间：2013-03-01T15:28:36.417
> 
> 标签：neo4j, file-format

我想为 neo4j 预定义一些图形数据并能够加载它，也许是通过控制台工具。`.sql`我希望它与 MySQL CLI 和文件完全相同。有谁知道是否存在类似`.neo`or的文件格式`.neo4j`？我在文档中找不到这样的东西......

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-01T19:51:59.250

我们通常对脚本文件使用 .cql 或 .cypher。您可以将其通过管道传输到 shell 以运行它，如下所示：

```
./neo4j-shell -c < MY_FILE.cypher 
```

就在最近，Michael Hunger 也在这个功能上做了一些很棒的工作。他提高了性能并降低了控制台的噪音。我希望它进入 1.9 版本。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2019-05-10T16:06:27.687

来自[https://groups.google.com/forum/#!topic/openypher/PO5EnspBLs0](https://groups.google.com/forum/#!topic/opencypher/PO5EnspBLs0)

1：

> “很抱歉回复晚了，但我们只是想通知您，**官方建议使用`.cypher`**. 我们很快就会在样式指南中正式确定这一点。”

2：

> “在 Neo4j 运行的训练中，我们历来使用 .cyp。我相信首选是使用 .cypher，而**当需要扩展 3 个字符时**使用 .cyp 。”

3：

> “注意：**'.cql' 已经用于 Cassandra** - [https://cassandra.apache.org/doc/cql/CQL.html](https://cassandra.apache.org/doc/cql/CQL.html) ”

**从上面的摘录中：**
第一个偏好是`.cypher`
第二个偏好是`.cyp` （密码的第一个 3 个字符）
不要使用~~`.cql`~~

**更多的：**

如果您需要 notepad++ 中的颜色编码，请下载[https://gist.github.com/nicolewhite/b0344ea475852c8c9571](https://gist.github.com/nicolewhite/b0344ea475852c8c9571)给出的 xml ，通过菜单导入`Language > User Defined Language > Import > Restart the Notepad++, open a file with .cypher that has some cyper query language)`

**示例密码如下：**

```
MATCH (:Person {name: "Ann"})        -[:FB_FRIENDS]->    Create (:Person {name: "Dan"}) 
```

希望对某人有所帮助。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-08-21T22:29:41.277

使用[neo4j-client](https://cleishm.github.io/libneo4j-client/)作为 Neo4j 的 CLI 可以轻松评估脚本。有几种方法可以使用包含多个密码命令的脚本：

1.  您可以通过标准输入管道输入脚本，例如：

    ```
    neo4j-client -u neo4j -P localhost < my_script.cyp 
    ```

2.  您可以使用命令行选项`--source`或`-i`，例如：

    ```
    neo4j-client -u neo4j -P -i my_script.cyp localhost 
    ```

3.  您可以启动交互式 shell，然后获取脚本：

    ```
    $ neo4j-client localhost
    Username: neo4j
    Password: *****
    neo4j-client 1.2.1.
    Enter `:help` for usage hints.
    Connected to 'neo4j://neo4j@localhost:7687'
    neo4j>
    neo4j> :source my_script.cyp 
    ```

该扩展`.cyp`最常用于脚本。

# c# - 为什么实习不能处理字符串的副本？

> ID：15161225
> 
> 赞同：3
> 
> 时间：2013-03-01T15:28:45.490
> 
> 标签：c#

鉴于：

```
 object literal1 = "abc";
        object literal2 = "abc";

        object copiedVariable = string.Copy((string)literal1);

        if (literal1 == literal2)
            Console.WriteLine("objects are equal because of interning");//Are equal

        if(literal1 == copiedVariable)
            Console.WriteLine("copy is equal");
        else
            Console.WriteLine("copy not eq");//NOT equal 
```

这些结果意味着`copiedVariable`不受字符串实习的影响。为什么？

在这种情况下，有没有被实习的等效字符串是有用的，或者这种行为是由于某些语言细节造成的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T15:30:31.810

如果您考虑一下，字符串的实习是它在编译时在文字上触发的过程。这意味着：

*   当您将文字分配/绑定到变量时，它是隐式的
*   复制引用时它是隐式的（即字符串 a = some_other_string_variable;）

另一方面，如果您*手动*创建字符串的实例- 在运行时使用 StringBuilder 或通过 Copy-ing，则您必须通过调用String 类的[Intern方法专门请求对其进行实习。](http://msdn.microsoft.com/en-us/library/system.string.intern.aspx)

即使在文档的备注部分中也指出：

> 公共语言运行时通过维护一个称为实习池的表来保存字符串存储，该表包含对程序中以编程方式声明或创建的每个唯一文字字符串的单个引用。因此，具有特定值的文字字符串的实例在系统中仅存在一次。例如，如果您将相同的文字字符串分配给多个变量，则运行时会从实习池中检索对文字字符串的相同引用并将其分配给每个变量。

[String 类的Copy](http://msdn.microsoft.com/en-us/library/system.string.copy.aspx)方法的文档指出：

> 创建**一个新的 String 实例**，其值与指定的 String 相同。

这意味着它不会只返回对同一字符串的引用（来自实习生池）。再说一次，如果它这样做了，那么它就没有多大用处了，会有吗？！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T15:36:13.273

某些语言要求结果是某些方法/程序的副本。

例如在`substring`类型方法中。即使您调用`foo.substring(0, foo.length)`（以及您可能如何实现`stringcopy`），语义也会相同。

**注意**：IIRC*，但.NET 的实现并非如此`string.Substring`。从[MSDN](http://msdn.microsoft.com/en-us/library/aka44szs.aspx)也不是很清楚。（见下文）

它返回：

> 一个字符串，它等效于在此实例中从 startIndex 开始的长度为 length 的子字符串，如果 startIndex 等于此实例的长度且长度为零，则为 Empty。

它指出：

> 此方法不会修改当前实例的值。相反，它返回一个新字符串，其长度字符从当前字符串中的 startIndex 位置开始。

**更新**

我没记错，它确实会检查`string InternalSubString(int startIndex, int length, bool fAlwaysCopy)`if `fAlwaysCopy`is not `false`。`Substring`传递`false`给这个方法。

**更新 2**

看起来`string.Copy`可以使用`InternalSubString`并传递`true`给上述参数，但是从反汇编来看，它似乎使用了稍微优化的版本，并且可能节省了方法调用。

对不起，多余的信息。

* 我记得的原因是在实施`substring`IronScheme 的过程时，R6RS 规范要求制作一个副本 :)

# sql-server - 使用 Report Builder 3.0 创建目录

> ID：15161226
> 
> 赞同：2
> 
> 时间：2013-03-01T15:28:52.303
> 
> 标签：sql-server, ssrs-tablix, reportbuilder3.0

我将 Report Builder 3.0 for SQL Server 2012 与 Reporting Services 一起使用。

我知道没有开箱即用的 TOC 功能 - 只有“书签”，但我想用页码呈现我自己的 TOC。

我有一个 tablix 对象（“Tablix1”），它用通常的东西来呈现数据库中的所有人，比如 name、gebdat、telnr、...

至少我有两个想法，如何实现一个TOC

**第一的。**对于每个人，我添加了一个隐藏单元格，其中包含该元素的当前页码。

这是我当前页码的功能...

```
Function PageNumber() As String    
    Return Me.Report.Globals!PageNumber    
End Function 
```

对于每个人，单元格 ( `txtPageNumber`) 都正确`Pagenumber`- 这很完美。

唯一的问题是，如何在当前 tablix ( `Tablix1`) 之外生成另一个 tablix 并迭代每个人并打印单元格的值 ( `txtPageNumber`)？

我不知道如何在我的 tablix ( `Tablix1`) 后面的代码中获取引用...如果我得到引用，我可以使用 foreach 进行迭代...

我只需`txtPageNumber`要从 tablix 外部访问单元格 ( ) ...

**第二。**是否可以迭代我当前报告的所有 Tablix 对象并打印`Objectname`和/或它们的值`PageName`？如果我可以打印`PageName`，我可以设置`PageName`to的值`[=code.PageNumber]`并打印所有 tablix 对象及其`Name`和`PageName`属性 - 这样我还得到一个包含我的主要对象的小 TOC ...

我做了很长时间的研究 - 并没有找到任何解决方案......

谢谢你。

# c# - 在 Crystal Reports 中动态更改数据库类型、来源等（适用于 Visual Studio 2012）

> ID：15161227
> 
> 赞同：1
> 
> 时间：2013-03-01T15:28:53.257
> 
> 标签：c#, crystal-reports, oledb, dbf, visual-foxpro

我在 StackOverflow 上研究了许多不同的方法来动态更改数据源连接。我使用并验证了我能找到的几乎所有 c# 和 vb.net 示例，但不知何故，事情并没有按应有的方式进行。

我们项目的想法是将数据源连接从旧报告（使用 xBase dll）更改为 crdb_ado.dll，并使用 VFPOLEDB 提供程序连接到 Visual Foxpro DBF 文件（每个文件代表一个表）。

我在这里下载了 Visual Studio (2012) 的最新 Crystal Developer 版本：http: [//scn.sap.com/docs/DOC-35074](http://scn.sap.com/docs/DOC-35074) 为了能够直接在 VS 中使用这些组件，而无需在*程序文件中引用 dll -业务对象*目录（如在其他示例中所见）。

我尝试通过较旧的“更新”报告（参见下面的代码）的 VS 调试器以及 Crystal Reports 中新创建的报告（最新版本，它使用正确的路径和设置连接到 dbf）来验证内容，因此它们匹配向上。

但是，我遇到了这些问题：

1.  该代码能够更改所有参数和属性，但保存它**会丢弃所有更改**（文件不是只读的）
2.  更改 table.location 会引发**com 异常**（翻译：无法加载数据库数据，报告错误）
3.  将报表文档对象“附加”到水晶报表查看器时也会发生同样的情况。
4.  reportDocument.VerifyDatabase() 明显失败
5.  据我所见，所有设置都出现在两个文件中

开发环境为 windows 7/64bit/VS 2012 Pro。Crystal Reports（XI 或 2011）安装在这台机器上。我们所有的报表都是使用 Crystal Reports 版本 9 和 11 创建的。

下面是修改后的代码示例之一，它*确实更改了所有属性或参数*（表格位置除外）。我还使用了使用 Propertybag 对象的示例，但这些都不起作用。

```
reportDocument1.Load("path to document");

// also tried adding these two lines as a test 
reportDocument1.DataSourceConnections.Clear();
reportDocument1.DataSourceConnections[0].SetConnection(@"c:\testreports","",false);

//changing of table data connections
foreach (Table table in reportDocument1.Database.Tables)
{
    ChangeTableLogonInfo(table);
}

// ---
private void ChangeTableLogonInfo(Table table)
{ 
    // server = place containing *.DBF files
    table.LogOnInfo.ConnectionInfo.ServerName = @"c:\testreports\";
    // set to empty string (looking at generated report in CrRep)
    table.LogOnInfo.ConnectionInfo.DatabaseName = ""; 
    table.LogOnInfo.ConnectionInfo.UserID = "";
    table.LogOnInfo.ConnectionInfo.Password = "";

    // create logon properties
    var connectionAttributes = new DbConnectionAttributes();
    connectionAttributes.Collection.Set("Collating Sequence","Machine");
    connectionAttributes.Collection.Set("Data Source", @"c:\testreports");
    connectionAttributes.Collection.Set("Locale Identifier", 1033);
    connectionAttributes.Collection.Set("OLE DB Services", -5);
    connectionAttributes.Collection.Set("Provider", "VFPOLEDB"); //eg: SQLOLEDB
    connectionAttributes.Collection.Set("Use DSN Default Properties",false);

    // CLEAR and SET NEW attributes for the given table
    table.LogOnInfo.ConnectionInfo.Attributes.Collection.Clear();
    table.LogOnInfo.ConnectionInfo.Attributes.Collection.Add(new NameValuePair2 { Name = "Database DLL", Value = "crdb_ado.dll" });
    table.LogOnInfo.ConnectionInfo.Attributes.Collection.Add(new NameValuePair2 { Name = "QE_DatabaseName", Value = "" });
    table.LogOnInfo.ConnectionInfo.Attributes.Collection.Add(new NameValuePair2 { Name = "QE_DatabaseType", Value = "OLE DB (ADO)" });
    table.LogOnInfo.ConnectionInfo.Attributes.Collection.Add(new NameValuePair2 { Name = "QE_LogonProperties", Value = connectionAttributes });
    table.LogOnInfo.ConnectionInfo.Attributes.Collection.Add(new NameValuePair2 { Name = "QE_ServerDescription", Value = @"c:\testreports" });
    table.LogOnInfo.ConnectionInfo.Attributes.Collection.Add(new NameValuePair2 { Name = "QE_SQLDB", Value = true });
    table.LogOnInfo.ConnectionInfo.Attributes.Collection.Add(new NameValuePair2 { Name = "SSO Enabled", Value = false });

    // gives a COM error
    try
    {
        table.Location = "some-table-name";    
    }
    catch (Exception e)
    {
        // handling
    }   
} 
```

我们确实注意到 Crystal Reports 本身有一些“烦人”的东西。我想知道它是否与它有关：

当我们想通过 CR 本身更改 xbase 连接时，我们不能将其从“xbase 连接 dbf”指向“vfpoledb 连接 dbf”（如果您理解我的观点）而不丢失报告中的所有字段。

我尝试安装 32 位和 64 位版本的 VS CR 开发人员版，但它似乎没有改变任何东西。

此外，下一段代码确实可以在 Visual FoxPro 中运行（我可以在 Crystal Reports 文档查看器中读取这些转换后的文件）。这很烦人，它不能在 c# 中轻松完成（似乎:)）

```
lotest = CREATEOBJECT("crystalruntime.application.9")
lorap = lotest.openreport("c:\factuur.rpt")
loData = loRap.Database
LOCAL lnI
lnI = 1
FOR EACH loTable IN lodata.tables
      loconn = loTable.connectionproperties
      loTable.dllname = "crdb_odbc.dll"

      loConn.DeleteAll
      IF lnI = 1
            loCOnn.Add("Database", "Hoofding")
      ELSE 
            loCOnn.Add("Database", "Detail")
      ENDIF 
      loConn.Add("Database Type","ODBC")
      loConn.Add("DSN","DBFACTw")

      lnI = lnI + 1
ENDFOR 

loRap.Saveas("c:\Factuur2.rpt",2048) 
```

有什么想法或建议吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-19T10:58:15.193

我遇到了同样的问题，一周后我设法解决了它。

`ApplyLogOnInfo`of用报告文件中的原始属性`CrystalDecisions.Shared.Table`覆盖`ConnectionInfo`属性并仅更新用户名和密码。

您必须使用`PropertyBag`代替`DbConnectionAttributes`和`CrystalDecisions.ReportAppServer.DataDefModel.Table`代替`CrystalDecisions.Shared.Table`。

这是我的工作代码：

```
PropertyBag connectionAttributes = new PropertyBag();
connectionAttributes.Add("Auto Translate", "-1");
connectionAttributes.Add("Connect Timeout", "15");
connectionAttributes.Add("Data Source", Server);
connectionAttributes.Add("General Timeout", "0");
connectionAttributes.Add("Initial Catalog", Database);
connectionAttributes.Add("Integrated Security", false);
connectionAttributes.Add("Locale Identifier", "1040");
connectionAttributes.Add("OLE DB Services", "-5");
connectionAttributes.Add("Provider", "SQLOLEDB");
connectionAttributes.Add("Tag with column collation when possible", "0");
connectionAttributes.Add("Use DSN Default Properties", false);
connectionAttributes.Add("Use Encryption for Data", "0");

PropertyBag attributes = new PropertyBag();
attributes.Add("Database DLL", "crdb_ado.dll");
attributes.Add("QE_DatabaseName", Database);
attributes.Add("QE_DatabaseType", "OLE DB (ADO)");
attributes.Add("QE_LogonProperties", connectionAttributes);
attributes.Add("QE_ServerDescription", Server);
attributes.Add("QESQLDB", true);
attributes.Add("SSO Enabled", false);

CrystalDecisions.ReportAppServer.DataDefModel.ConnectionInfo ci = new CrystalDecisions.ReportAppServer.DataDefModel.ConnectionInfo();
ci.Attributes = attributes;
ci.Kind = CrConnectionInfoKindEnum.crConnectionInfoKindCRQE;
ci.UserName = Username;
ci.Password = Password;

foreach (CrystalDecisions.ReportAppServer.DataDefModel.Table table in Report.ReportClientDocument.DatabaseController.Database.Tables)
{
    CrystalDecisions.ReportAppServer.DataDefModel.Procedure newTable = new CrystalDecisions.ReportAppServer.DataDefModel.Procedure();

    newTable.ConnectionInfo = ci;
    newTable.Name = table.Name;
    newTable.Alias = table.Alias;
    newTable.QualifiedName = Database + ".dbo." + table.Name;
    Report.ReportClientDocument.DatabaseController.SetTableLocation(table, newTable);
}

foreach (ReportDocument subreport in Report.Subreports)
{
    foreach (CrystalDecisions.ReportAppServer.DataDefModel.Table table in Report.ReportClientDocument.SubreportController.GetSubreportDatabase(subreport.Name).Tables)
    {
        CrystalDecisions.ReportAppServer.DataDefModel.Procedure newTable = new CrystalDecisions.ReportAppServer.DataDefModel.Procedure();

        newTable.ConnectionInfo = ci;
        newTable.Name = table.Name;
        newTable.Alias = table.Alias;
        newTable.QualifiedName = Database + ".dbo." + table.Name;
        Report.ReportClientDocument.SubreportController.SetTableLocation(subreport.Name, table, newTable);
    }
} 
```

我希望这对其他开发人员也有帮助，因为在 SAP 文档或支持论坛中几乎不可能找到此信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-22T21:13:03.390

霓虹的回答对我帮助很大。除非服务器相同，否则我无法让大多数人谈论的表循环 ApplyLogOnInfo 方法起作用。就像他观察到的那样，它只会用报告文件中的原始值替换所有内容。

就我而言，我只是试图使用 web.config 中的连接字符串在 dev/test/prod 数据库之间切换。使用 DatabaseController.ReplaceConnection 最终对我有用。我不得不克隆（深拷贝）现有的 ConnectionInfo 并对少数相关属性进行更改，而不是尝试从头开始构建一个或直接修改现有的。

```
 public static void SetReportLogOnInfo(ReportDocument report)
    {
        if (!report.IsLoaded)
            report.Refresh(); //workaround for report.FileName empty error

        foreach (CrystalDecisions.ReportAppServer.DataDefModel.ConnectionInfo oldInfo in report.ReportClientDocument.DatabaseController.GetConnectionInfos())
        {
            var newInfo = oldInfo.Clone(true);
            newInfo.UserName = [ConnectionString.UserID];
            newInfo.Password = [ConnectionString.Password];
            newInfo.Attributes["QE_LogonProperties"]["Server"] = [ConnectionString.DataSource];
            report.ReportClientDocument.DatabaseController.ReplaceConnection(oldInfo, newInfo, null, CrDBOptionsEnum.crDBOptionDoNotVerifyDB);
        }
    } 
```

# c++ - 如何获取指向通用引用的指针？

> ID：15161231
> 
> 赞同：2
> 
> 时间：2013-03-01T15:29:01.433
> 
> 标签：c++, templates, c++11

我有这个代码：

```
char X[64];

template <typename E>
void f (E &&e, size_t len)
{
    memset(X, 0, 64);
    memcpy(X, &e, len);
} 
```

用这个调用：

```
const char* tx = "hello!";
f(tx, strlen(tx)); 
```

但是当我打印变量 X 不是我想要的！我认为我对**e**的普遍引用（即声明为**E&& e**）不正确。

任何的想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T15:31:35.307

`const char*`您的通用引用 [*]在类型推导后变成左值引用（`E`推导为 be `const char*&`）。

因此，而不是这样：

```
memcpy(X, &e, len);
//        ^^
//        This is a pointer to a pointer to const char!
//                ^^^^^^^^^^^^ 
```

你应该使用这个：

```
memcpy(X, e, len); 
```

* * *

[*] 术语“通用引用”是由 Scott Meyers 引入的，它*不是*C++11 标准的一部分。该标准仅定义参考折叠规则，通用参考的抽象只是为了更容易理解这些规则的工作原理。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-01T15:30:48.770

`E`将被推断为`const char*&`在这种情况下，因此`e`也将是类型`const char*&`（在引用折叠后）。`e`指针对象也是如此。然后你做`&e`，它正在获取指针的地址。您想要的只是将指针`e`直接传递给`memcpy`，因为它指向您要复制的数据：

```
memcpy(X, e, len); 
```

的类型扣除`e`：

```
E&& → const char*& && → const char*& 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T15:59:59.207

目前还不清楚您要达到的目标。如果要将常规变量复制到缓冲区，但要复制指针数据，则可以提供专门化：

字符 X[64];

```
template <typename E>
void f (E &&e, size_t len)
{
    memset(X, 0, 64);
    memcpy(X, &e, len);
}

template <typename E>
void f (E *e, size_t len)
{
    memset(X, 0, 64);
    memcpy(X, e, len);
} 
```

这应该可行，但在这种情况下，“通用”引用的 len 参数似乎是多余的。

# accelerometer - 将加速度计数据解释为精度度量

> ID：15161238
> 
> 赞同：1
> 
> 时间：2013-03-01T15:29:25.193
> 
> 标签：accelerometer

测试我的线跟随推车的运动稳定性。我使用了我的 xperia x8 的加速度计。我将在我的购物车中放入不同的负载。你能推荐一些我可以从 3 轴加速度计读数中测量或分析的参数吗？我将比较来自不同负载的acce rereadings。谢谢！

# udp - 编程处理，无法绑定到网络中的udp端口

> ID：15161239
> 
> 赞同：0
> 
> 时间：2013-03-01T15:29:28.247
> 
> 标签：udp, processing

我有一个在本地机器上工作的处理程序。它从本地 udp 端口​​读取数据并使用这些数据在我的屏幕上绘制圆圈。它起作用了，太好了。

但在生产中，程序必须在另一台计算机上运行。我无法让它工作。处理向我显示此错误消息：

```
opening socket failed!
> address:192.168.1.118, port:6666 [group:null]
> Cannot assign requested address: Cannot bind 
```

当然，我检查了 IP 地址，这些都可以，因为它在本地机器上运行良好。这是我的 UDP 部分代码：

```
// import UDP library
import hypermedia.net.*;

String HOST_IP = "192.168.1.118";
UDP udp;  // define the UDP object

// get an array ready 
int num = 20;
int[] xx = new int[num];
int[] yy = new int[num];

void setup() {
size(1024, 768);
smooth();
//noStroke();

// create a new datagram connection on port 6666
udp = new UDP(this, 6666, HOST_IP);
udp.listen( true );
}

//process events
void draw() {;}
/**
* To perform any action on datagram reception, you need to implement this 
* handler in your code. This method will be automatically called by the UDP 
* object each time he receive a nonnull message.
* By default, this method have just one argument (the received message as 
* byte[] array), but in addition, two arguments (representing in order the 
* sender IP address and his port) can be set like below.
*/
// void receive( byte[] data ) {       // <-- default handler
void receive( byte[] data ) {  

background(255);

// get the "real" message =
// forget the ";\n" at the end <-- !!! only for a communication with Pd !!!

 data = subset(data, 0, data.length-2);
String message = new String( data );

// print the result
println(message ); 
```

在两台机器上我都使用 Windows XP 并且它们通过交换机和 udp 电缆连接。

**我不知道从哪里开始故障排除以及如何进行。有任何想法吗？**

# sql - NULL 字段的重复记录计数 - 有没有更好的方法？

> ID：15161240
> 
> 赞同：2
> 
> 时间：2013-03-01T15:29:28.720
> 
> 标签：sql, sql-server, sql-server-2008

我需要根据特定列获取重复记录数。如果字段具有 NULL 值，则它**不**被视为重复。

```
SELECT  Leadid,COUNT(Lead)
FROM    #CheckNULLCOUNT
GROUP   BY LeadId,Lead 
```

但对于以下查询，它认为是重复的

```
 SELECT  Leadid,COUNT(ISNULL(Lead,'-'))
    FROM    #CheckNULLCOUNT
    GROUP   BY LeadId,Lead 
```

**我的问题是有没有更好的方法来获取 NULL 列的重复计数。**

```
/* Create Temporary Table*/
 CREATE table #CheckNULLCOUNT(
    Id Int PRIMARY key
    ,name varchar(100) 
    ,LeadId Int
    ,Lead varchar(100))

    /* Insert data into temporary Table*/

INSERT INTO #CheckNULLCOUNT VALUES(1,'Skip',101,'lead1')
INSERT INTO #CheckNULLCOUNT VALUES(2,'Turner',102,'lead2')
INSERT INTO #CheckNULLCOUNT VALUES(3,'Molisa',103,'lead3')
INSERT INTO #CheckNULLCOUNT VALUES(4,'Mario',104,'lead4')
INSERT INTO #CheckNULLCOUNT VALUES(5,'Jack',105,'lead5')
INSERT INTO #CheckNULLCOUNT VALUES(6,'Kris',106,'lead6')
INSERT INTO #CheckNULLCOUNT VALUES(7,'John',107,'lead7')
INSERT INTO #CheckNULLCOUNT VALUES(8,'Owen',109,NULL)
INSERT INTO #CheckNULLCOUNT VALUES(9,'Bill',109,NULL)
INSERT INTO #CheckNULLCOUNT VALUES(10,'Martin',109,NULL)
INSERT INTO #CheckNULLCOUNT VALUES(11,NULL,111,'lead9')
INSERT INTO #CheckNULLCOUNT VALUES(12,NULL,111,'lead9')

 /* **NOT** treating as duplicate */
SELECT  Leadid,COUNT(ISNULL(Lead,'-'))
FROM    #CheckNULLCOUNT
GROUP   BY LeadId,Lead

/* treating as duplicate */

SELECT  Leadid,COUNT(ISNULL(Lead,'-'))
FROM    #CheckNULLCOUNT
GROUP   BY LeadId,Lead

DROP TABLE #CheckNULLCOUNT 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T15:31:34.947

```
SELECT  Leadid,
        COUNT(Lead) totalNOTNULL,
        SUM(CASE WHEN Lead IS NULL THEN 1 ELSE 0 END) totalNULL
FROM    #CheckNULLCOUNT
GROUP   BY LeadId, [LEAD] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T15:42:05.290

作为替代解决方案，您可以使用这两个：

```
SELECT  Leadid,COUNT(Lead)
FROM    #CheckNULLCOUNT
GROUP   BY LeadId, 
     CASE WHEN Lead IS NULL 
        THEN CAST(LeadId AS varchar(8)) 
        ELSE Lead END, Lead 
```

然而，因为`CAST`不是那么好。我只是想补充一下，看看另一个想法，GROUP BY 本身如何使用`CASE...WHEN`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T16:00:52.503

为什么不只是

```
 SELECT  Leadid,COUNT(*)
    FROM    #CheckNULLCOUNT
    GROUP   BY LeadId,Lead 
```

# ruby-on-rails - Rails 3 + rails_admin + MongoDB 如何表示数组

> ID：15161241
> 
> 赞同：3
> 
> 时间：2013-03-01T15:29:36.220
> 
> 标签：ruby-on-rails, mongodb, rails-admin

在 rails_admin 中是否有另一种表示数组类型字段的方法？

现在它看起来：`- alsace - france - french - pinot blanc - dry`
数组项由 - 符号分隔。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T06:00:36.533

我为此引入了瞬态字段：

```
class KnowHow
  include Mongoid::Document

  SPLITTER = ','

  field :category, type: String
  field :content_array, type: Array

  def content
    (content_array || []).join(SPLITTER)
  end

  def content=(items)
    if items.present?
      self.content_array = items.split(SPLITTER).map(&:strip).reject(&:blank?)
    else
      self.content_array = []
    end
  end

  rails_admin do
    field :category
    field :content
  end
end 
```

# php - Objective-C 发送特殊字符 POST

> ID：15161243
> 
> 赞同：2
> 
> 时间：2013-03-01T15:29:41.913
> 
> 标签：php, objective-c, forms, http-post, urlencode

我创建了一个应用程序，将两个 POST 参数发送到我的文件 PHP，并将数据保存在我的数据库中。

发送参数的 xcode 项目中的代码是：

```
NSString *post = [[NSString alloc] initWithFormat:@"&key1=%@&key2=%@", myString1, myString2];
NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];
NSString *postLength = [NSString stringWithFormat:@"%d",[postData length]];
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
[request setURL:[NSURL URLWithString:[NSString stringWithFormat:@"http://www.mysite.com/test.php"]]];
[request setHTTPMethod:@"POST"];
[request setValue:postLength forHTTPHeaderField:@"Content-Length"];
[request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
[request setHTTPBody:postData]; 
```

将数据保存到我的数据库中的 PHP 文件中的代码是：

```
$val1 = $_POST['key1'];
$val2 = $_POST['key2'];
$val1 = urldecode($val1);
$val2 = urldecode($val2);

$sql = "INSERT INTO test(nome, cognome) VALUES ('$val1', '$val2')";
mysql_query($sql); 
```

问题是如果我插入一个包含特殊字符（例如`é`or `ä`）的参数，我的程序会保存到数据库普通字符（`e`and `a`）中。

有人可以帮我弄这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T15:32:45.853

```
NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES]; 
```

这里的问题是您使用的是 ASCII，但 ASCII 不包含 é、ä 等。您应该改用 Unicode。尝试在上面的代码中切换`NSASCIIStringEncoding`。`NSUTF8StringEncoding`

# embedded - 构建 U-boot 时出错

> ID：15161253
> 
> 赞同：0
> 
> 时间：2013-03-01T15:30:19.127
> 
> 标签：embedded, arm, cross-compiling, linux-toolchain

我正在为 A13-olinuxino 构建 u-boot。我已经下载了arm工具链。但是在构建时我收到以下*错误*。

```
root@vinuthan-pc:/home/vinuthan/Documents/u-boot-sunxi-sunxi# make a13_olinuxino CROSS_COMPILE=arm-linux-gnueabi-
/bin/bash: arm-linux-gnueabi-gcc: command not found
/bin/bash: arm-linux-gnueabi-gcc: command not found
dirname: missing operand 
```

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:28:55.443

谢谢，我打字的时候就知道了。没有安装 arm-linux-gnueabi-gcc。当我安装 arm-linux-gnueabi-gcc 4.7 时错过了它。

# cakephp - CakePHP belongsTo 关系不保存

> ID：15161255
> 
> 赞同：0
> 
> 时间：2013-03-01T15:30:25.240
> 
> 标签：cakephp

我有模型“PatientCase”和“Procedure”。一个案例可以有一个/多个程序。

```
class PatientCase extends AppModel {
    public $hasMany = 'Procedure';
}

class Procedure extends AppModel {
    public $belongsTo = array(
            'PatientCase'       => array(
                'className'     => 'PatientCase'
            )
        );
} 
```

我在我的 patientCasesController 中明确设置了一个值

```
$this->request->data["Procedure"]["side"] = 'left'; 
```

当我 saveAll my patientCase 时，案例被正确保存，并且在程序表中保存了一条新记录，具有相应的 patientCase id，但是，记录中没有保存其他数据。

谁能看到我哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T20:45:27.043

您的评论成功了 -`save()`仅保存主模型，同时`saveAll()`保存主模型和任何相关模型。

`save()` [[细节]](http://book.cakephp.org/2.0/en/models/saving-your-data.html#model-save-array-data-null-boolean-validate-true-array-fieldlist-array)

`saveAll()` [[细节]](http://book.cakephp.org/2.0/en/models/saving-your-data.html#model-saveall-array-data-null-array-options-array)

**更新：**

因为它是“hasMany”，你可能想要：

```
$this->request->data["Procedure"][0]["side"] = 'left'; 
```

（注意`[0]`）

# java - Java：如何从本地 Java 桌面应用程序与 Java Applet 通信？

> ID：15161256
> 
> 赞同：0
> 
> 时间：2013-03-01T15:30:25.750
> 
> 标签：java, applet, cross-domain, desktop-application, reverse-ajax

我会知道是否有办法让 Java 桌面应用程序与小程序通信，以便从桌面应用程序（通过小程序）调用 Javascript 函数。

**上下文 ：**

一方面，我有一个 ExtJS 应用程序（全 AJAX），它位于远程服务器上。另一方面，一个桌面 Java 应用程序（netbeans 应用程序），它是常驻的（实际上）。

**我会做什么：**

每次使用其中一个应用程序时，它都会将事件和数据发送到另一个应用程序。

经过一些研究，我在[这里](https://stackoverflow.com/questions/4519741/how-can-a-desktop-application-communicate-with-a-web-application)和[这里看到了有趣的帖子，以及关于](https://stackoverflow.com/questions/7278626/javascript-to-java-applet-communication)[如何在小程序之间进行通信](https://stackoverflow.com/questions/2622377/inter-applet-communication)的答案（另见[这里](https://stackoverflow.com/questions/11341692/how-to-share-data-between-applets-in-the-same-web-page)）。

问题不在于如何从小应用程序跨域到 destktop 应用程序（参见[那里](https://stackoverflow.com/questions/1908083/java-and-crossdomain-xml)和[这里](http://weblogs.java.net/blog/2008/05/28/java-doodle-crossdomainxml-support)），而是如开头所说的如何从桌面 java 应用程序到 javascript 进行通信。

**笔记**

webapp (ExtJS) 基于远程服务器，applet 也是。我可以在本地找到小程序，但这意味着要部署本地网络服务器。

桌面应用程序很重，所以我无法将其转换为小程序格式。

我放置了“reverse-AJAX”标签，因为它是我要做的全局概念。

如果这一切都可以在没有小程序的情况下实现（*请不要使用 Flash*），那也没关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:39:57.563

为了在浏览器中从 Java 小程序调用 javascript 方法，您需要使用 Netscape [LiveConnect API，](http://en.wikipedia.org/wiki/LiveConnect)[这里](http://www.codejava.net/java-se/applet/liveconnect-the-api-for-communication-between-java-applet-and-javascript)有一些示例。
基本上，这是一个由浏览器本地实现的 API，它允许 java 小程序访问浏览器的 javascript 引擎。

完成排序后，您需要从桌面应用程序调用小程序中的方法，这有点棘手。最简单的方法可能是`Enum`让您交换序列化实例来描述事件类型。

[这里](http://docs.oracle.com/javase/tutorial/networking/sockets/clientServer.html)有一个使用套接字进行通信的示例。

# c# - ViewPager 焦点问题

> ID：15161261
> 
> 赞同：1
> 
> 时间：2013-03-01T15:30:38.417
> 
> 标签：c#, android, xamarin.android

我有一个 ViewPager ，它包含 4 个片段/面板，每个片段/面板的半宽是一个景观屏幕。

```
 _______________ _______________ _______________ _______________
|1              |2              |3              |4              |
|               |               |               |               |
|               |               |  ___________  |  ___________  |
|               |               | | EditText1 | | | EditText2 | |
|               |               | |___________| | |___________| |
|_______________|_______________|_______________|_______________| 
```

面板 3 和 4 各有一个 EditText。

在程序开始时，用户显示屏幕 2 和 3（他们可以向后滑动以查看屏幕 1，并且屏幕 4 尚不存在，直到选择了 3 上的列表项）。

因此，托管面板（和关联的 ViewPager）的视图会调用

```
viewPager.SetCurrentItem(PANEL3,true);   // const int PANEL3 = 2;  - zero offset 
```

这会导致显示 2 和 3，并为 3 提供焦点（使 EditText1 获得焦点）。

当用户在 3 上选择某些东西导致 4 滑入（现在显示 3 和 4）时，在主机视图中进行另一个调用

```
viewPager.SetCurrentItem(PANEL4,true);    // const int PANEL4 = 3;  - zero offset 
```

这样现在面板 4 就获得了焦点（这使 EditText2 成为焦点）。

* * *

**这是问题：**

显示面板 3 和 4，其中 EditText2 具有焦点，如果我然后单击 EditText1，这会导致软键盘弹出，焦点将恢复到 EditText2（光标在 EditText2 中，并且任何输入都会输入其中）。

我需要知道是什么导致焦点恢复到 EditText2。

我推测对 viewPager.SetContentView(PANEL4) 的调用导致面板焦点状态保留在某处的 ViewPager 中，并且当软键盘弹出并导致一些“刷新”事件触发时，ViewPager 正在恢复该焦点状态（即 PANEL4），虽然我不确定。我在主机视图和每个面板中进行了很多打印输出，并且软键盘弹出窗口不会导致任何标准生命周期事件被触发，但是我知道 viewPager 的 OnLayout 确实会触发。

* * *

欢迎任何帮助或见解，谢谢。

* * *

**芝士男爵：**

这是支持性信息，可帮助说明如果我的解决方案中的一个视图未包装在其关联布局文件中的 ViewGroup (LinearLayout) 中时发生的膨胀问题。

如果**PagedFragmentRecordNoteBoxInput**没有包装在 LinearLayout 中，我们有

```
<?xml version="1.0" encoding="utf-8"?>
<FieldInspection.Droid.Views.Custom.PagedFragmentRecordNoteBox.PagedFragmentRecordNoteBoxInput
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/fi_record_note_box_input"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#FFFFFFFF"
    android:gravity="top"
    android:textSize="20sp"
    android:textColor="#FF000000"
    android:layout_margin="20dip"/> 
```

**PagedFragmentRecordNoteBox**中的通货膨胀代码更改为

```
protected override RecordNoteBoxInput InstantiateInput()
{
    View v = _inflater.Inflate(Resource.Layout.PagedFragmentRecordNoteBoxInput, null);

    _pagedFragmentFieldInput = (PagedFragmentRecordNoteBoxInput) v;

    _pagedFragmentFieldInput.OuterClass = this;

    return (RecordNoteBoxInput)_pagedFragmentFieldInput;
} 
```

然后产生异常：

```
07-02 16:21:32.494: I/MonoDroid(18642): UNHANDLED EXCEPTION: Android.Views.InflateException: Exception of type 'Android.Views.InflateException' was thrown.
07-02 16:21:32.494: I/MonoDroid(18642): at Android.Runtime.JNIEnv.CallObjectMethod (intptr,intptr,Android.Runtime.JValue[]) <0x00080>
07-02 16:21:32.494: I/MonoDroid(18642): at Android.Views.LayoutInflater.Inflate (int,Android.Views.ViewGroup) <0x0018f>
07-02 16:21:32.494: I/MonoDroid(18642): at FieldInspection.Droid.Views.Custom.PagedFragmentRecordNoteBox.InstantiateInput () <0x0002b>
07-02 16:21:32.494: I/MonoDroid(18642): at FieldInspection.Droid.Views.Custom.RecordNoteBox.Init (Android.Content.Context) <0x00063>
07-02 16:21:32.494: I/MonoDroid(18642): at FieldInspection.Droid.Views.Custom.RecordNoteBox..ctor (Android.Content.Context,Android.Util.IAttributeSet) <0x0002f>
07-02 16:21:32.494: I/MonoDroid(18642): at FieldInspection.Droid.Views.Custom.PagedFragmentRecordNoteBox..ctor (Android.Content.Context,Android.Util.IAttributeSet) <0x00023>
07-02 16:21:32.494: I/MonoDroid(18642): at (wrapper dynamic-method) object.705e129e-2c0d-42db-87f7-db1842b85d7c (intptr,object[]) <0x0005f>
07-02 16:21:32.494: I/MonoDroid(18642): at Java.Interop.TypeManager.n_Activate (intptr,intptr,intptr,intptr,intptr,intptr) <0x000f7>
07-02 16:21:32.494: I/MonoDroid(18642): at (wrapper native-to-managed) Java.Interop.TypeManager.n_Activate (intptr,intptr,intptr,intptr,intptr,intptr) <0x0006f>
07-02 16:21:32.494: I/MonoDroid(18642): at (wrapper delegate-invoke) <Module>.invoke_intptr__this___intptr_intptr_intptr_JValue[] (intptr,intptr,intptr,Android.Runtime.JValue[]) <0x000ab>
07-02 16:21:32.494: I/MonoDroid(18642): at Android.Runtime.JNIEnv.CallObjectMethod (intptr,intptr,Android.Runtime.JValue[]) <0x00053>
07-02 16:21:32.494: I/MonoDroid(18642): at Android.Views.LayoutInflater.Inflate (int,Android.Views.ViewGroup,bool) <0x001f3>
07-02 16:21:32.494: I/MonoDroid(18642): at FieldInspection.Droid.Views.ParcelRecordDetailInspectionView.Render () <0x0002f>
07-02 16:21:32.494: I/MonoDroid(18642): at FieldInspection.Droid.Views.ParcelRecordDetailInspectionView.OnCreateView (Android.Views.LayoutInflater,Android.Views.ViewGroup,Android.OS.Bundle) <0x000af>
07-02 16:21:32.494: I/MonoDroid(18642): at Android.App.Fragment.n_OnCreateView_Landroid_view_LayoutInflater_Landroid_view_ViewGroup_Landroid_os_Bundle_ (intptr,intptr,intptr,intptr,intptr) <0x0009f>
07-02 16:21:32.494: I/MonoDroid(18642): at (wrapper dynamic-method) object.5d994140-166d-44ce-ac16-71f1e1698262 (intptr,intptr,intptr,intptr,intptr) <0x0005b>
07-02 16:21:32.494: I/MonoDroid(18642):   --- End of managed exception stack trace ---
07-02 16:21:32.494: I/MonoDroid(18642): android.view.InflateException: Binary XML file line #5: Error inflating class FieldInspection.Droid.Views.Custom.PagedFragmentRecordNoteBox.PagedFragmentRecordNoteBoxInput
07-02 16:21:32.494: I/MonoDroid(18642):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:691)
07-02 16:21:32.494: I/MonoDroid(18642):     at android.view.LayoutInflater.inflate(LayoutInflater.java:466)
07-02 16:21:32.494: I/MonoDroid(18642):     at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
07-02 16:21:32.494: I/MonoDroid(18642):     at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
07-02 16:21:32.494: I/MonoDroid(18642):     at mono.android.TypeManager.n_activate(Native Method)
07-02 16:21:32.494: I/MonoDroid(18642):     at mono.android.TypeManager.Activate(TypeManager.java:7)
07-02 16:21:32.494: I/MonoDroid(18642):     at fieldinspection.droid.views.custom.PagedFragmentRecordNoteBox.<init>(PagedFragmentRecordNoteBox.java:29)
07-02 16:21:32.494: I/MonoDroid(18642):     at java.lang.reflect.Constructor.constructNative(Native Method)
07-02 16:21:32.494: I/MonoDroid(18642):     at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
07-02 16:21:32.494: I/MonoDroid(18642):     at android.view.LayoutInflater.createView(LayoutInflater.java:586)
07-02 16:21:32.494: I/MonoDroid(18642):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:680)
07-02 16:21:32.494: I/MonoDroid(18642):     at android.view.LayoutInflater.parseInclude(LayoutInflater.java:800)
07-02 16:21:32.494: I/MonoDroid(18642):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:729)
07-02 16:21:32.494: I/MonoDroid(18642):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:742)
07-02 16:21:32.494: I/MonoDroid(18642):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:742)
07-02 16:21:32.494: I/MonoDroid(18642):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:742)
07-02 16:21:32.494: I/MonoDroid(18642):     at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
07-02 16:21:32.494: I/MonoDroid(18642):     at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
07-02 16:21:32.494: I/MonoDroid(18642):     at fieldinspection.droid.views.ParcelRecordDetailInspectionView.n_onCreateView(Native Method)
07-02 16:21:32.494: I/MonoDroid(18642):     at fieldinspection.droid.views.ParcelRecordDetailInspectionView.onCreateView(ParcelRecordDetailInspectionView.java:52)
07-02 16:21:32.494: I/MonoDroid(18642):     at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:828)
07-02 16:21:32.494: I/MonoDroid(18642):     at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:1032)
07-02 16:21:32.494: I/MonoDroid(18642):     at android.app.BackStackRecord.run(BackStackRecord.java:622)
07-02 16:21:32.494: I/MonoDroid(18642):     at android.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1382)
07-02 16:21:32.494: I/MonoDroid(18642):     at android.app.FragmentManagerImpl.executePendingTransactions(FragmentManager.java:437)
07-02 16:21:32.494: I/MonoDroid(18642):     at android.support.v13.app.FragmentStatePagerAdapter.finishUpdate(FragmentStatePagerAdapter.java:167)
07-02 16:21:32.494: I/MonoDroid(18642):     at android.supp
07-02 16:21:32.504: E/mono(18642): Unhandled Exception:
07-02 16:21:32.504: E/mono(18642): Android.Views.InflateException: Exception of type 'Android.Views.InflateException' was thrown.
07-02 16:21:32.504: E/mono(18642): at Android.Runtime.JNIEnv.CallObjectMethod (intptr,intptr,Android.Runtime.JValue[]) <0x00080>
07-02 16:21:32.504: E/mono(18642): at Android.Views.LayoutInflater.Inflate (int,Android.Views.ViewGroup) <0x0018f>
07-02 16:21:32.504: E/mono(18642): at FieldInspection.Droid.Views.Custom.PagedFragmentRecordNoteBox.InstantiateInput () <0x0002b>
07-02 16:21:32.504: E/mono(18642): at FieldInspection.Droid.Views.Custom.RecordNoteBox.Init (Android.Content.Context) <0x00063>
07-02 16:21:32.504: E/mono(18642): at FieldInspection.Droid.Views.Custom.RecordNoteBox..ctor (Android.Content.Context,Android.Util.IAttributeSet) <0x0002f>
07-02 16:21:32.504: E/mono(18642): at FieldInspection.Droid.Views.Custom.PagedFragmentRecordNoteBox..ctor (Android.Content.Context,Android.Util.IAttributeSet) <0x00023>
07-02 16:21:32.504: E/mono(18642): at (wrapper dynamic-method) object.705e129e-2c0d-42db-87f7-db1842b85d7c (intptr,object[]) <0x0005f>
07-02 16:21:32.504: E/mono(18642): at Java.Interop.TypeManager.n_Activate (intptr,intptr,intptr,intptr,intptr,intptr) <0x000f7>
07-02 16:21:32.504: E/mono(18642): at (wrapper native-to-managed) Java.Interop.TypeManager.n_Activate (intptr,intptr,intptr,intptr,
07-02 16:21:32.504: I/mono(18642): [ERROR] FATAL UNHANDLED EXCEPTION: Android.Views.InflateException: Exception of type 'Android.Views.InflateException' was thrown.
07-02 16:21:32.504: I/mono(18642): at Android.Runtime.JNIEnv.CallObjectMethod (intptr,intptr,Android.Runtime.JValue[]) <0x00080>
07-02 16:21:32.504: I/mono(18642): at Android.Views.LayoutInflater.Inflate (int,Android.Views.ViewGroup) <0x0018f>
07-02 16:21:32.504: I/mono(18642): at FieldInspection.Droid.Views.Custom.PagedFragmentRecordNoteBox.InstantiateInput () <0x0002b>
07-02 16:21:32.504: I/mono(18642): at FieldInspection.Droid.Views.Custom.RecordNoteBox.Init (Android.Content.Context) <0x00063>
07-02 16:21:32.504: I/mono(18642): at FieldInspection.Droid.Views.Custom.RecordNoteBox..ctor (Android.Content.Context,Android.Util.IAttributeSet) <0x0002f>
07-02 16:21:32.504: I/mono(18642): at FieldInspection.Droid.Views.Custom.PagedFragmentRecordNoteBox..ctor (Android.Content.Context,Android.Util.IAttributeSet) <0x00023>
07-02 16:21:32.504: I/mono(18642): at (wrapper dynamic-method) object.705e129e-2c0d-42db-87f7-db1842b85d7c (intptr,object[]) <0x0005f>
07-02 16:21:32.504: I/mono(18642): at Java.Interop.TypeManager.n_Activate (intptr,intptr,intptr,intptr,intptr,intptr) <0x000f7>
07-02 16:21:32.504: I/mono(18642): at (wrapper native-to-managed) Java.Interop.TypeManager.n_Activate (intptr,intptr,i
07-02 16:21:32.524: W/InputDispatcher(215): channel '41b69d78 net.monocross.fieldinspection/fieldinspection.droid.FieldInspectionMain (server)' ~ Consumer closed input channel or an error occurred.  events=0x8
07-02 16:21:32.524: E/InputDispatcher(215): channel '41b69d78 net.monocross.fieldinspection/fieldinspection.droid.FieldInspectionMain (server)' ~ Channel is unrecoverably broken and will be disposed!
07-02 16:21:32.524: W/InputDispatcher(215): Attempted to unregister already unregistered input channel '41b69d78 net.monocross.fieldinspection/fieldinspection.droid.FieldInspectionMain (server)'
07-02 16:21:32.524: D/Zygote(116): Process 18642 exited cleanly (1)
07-02 16:21:32.524: W/InputDispatcher(215): channel '41aef860 net.monocross.fieldinspection/fieldinspection.droid.views.CalendarView (server)' ~ Consumer closed input channel or an error occurred.  events=0x8
07-02 16:21:32.524: E/InputDispatcher(215): channel '41aef860 net.monocross.fieldinspection/fieldinspection.droid.views.CalendarView (server)' ~ Channel is unrecoverably broken and will be disposed!
07-02 16:21:32.524: W/InputDispatcher(215): Attempted to unregister already unregistered input channel '41aef860 net.monocross.fieldinspection/fieldinspection.droid.views.CalendarView (server)'
07-02 16:21:32.524: I/ActivityManager(215): Process net.monocross.fieldinspection (pid 18642) has died. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:46:50.547

**我的答案在这个堆栈跟踪中，它来自上面提到的 EditText 子类 EditText2 的 OnFocusChange() 覆盖（跟踪这个的好时机）：**

**注意：**这仅用于存档目的，可能会帮助任何未来的读者解决此问题。我不会接受这个作为我的答案，并且仍然愿意寻求帮助（再次感谢）。

* * *

dalvik.system.VMStack.getThreadStackTrace(Native Method) java.lang.Thread.getStackTrace(Thread.java:591) appname.droid.views.EditText2.n_onFocusChanged(Native Method) appname.droid.views.EditText2.onFocusChanged(EditText2\. java:53) android.view.View.handleFocusGainInternal(View.java:3680) android.view.View.requestFocus(View.java:5373) android.view.ViewGroup.onRequestFocusInDescendants(ViewGroup.java:2154) android.view。 ViewGroup.requestFocus(ViewGroup.java:2110) android.view.ViewGroup.onRequestFocusInDescendants(ViewGroup.java:2154) android.view.ViewGroup.requestFocus(ViewGroup.java:2110) android.view.ViewGroup.onRequestFocusInDescendants(ViewGroup.java:第2154章、2113) android.view.ViewGroup.onRequestFocusInDescendants(ViewGroup.java:2154) android.view.ViewGroup.requestFocus(ViewGroup.java:2110) **android.view.View.requestFocus(View.java:5323)** **android.support.v4.view.ViewPager.populate(ViewPager.java:1051)** android.support.v4.view.ViewPager.populate(ViewPager.java:881) android.support.v4.view.ViewPager.onMeasure(ViewPager.java:1366) android.view.View.measure(View.java:12728) android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698) android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1369) android.widget.LinearLayout.measureVertical(LinearLayout.java:660) android.widget.LinearLayout.onMeasure( LinearLayout.java:553) android.view.View.measure(View.java:12728) android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698) android.widget.FrameLayout.onMeasure(FrameLayout.java:293) 安卓。 view.View.measure(View.java:12728) android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698) android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1369) android.widget.LinearLayout。measureVertical(LinearLayout.java:660) android.widget.LinearLayout.onMeasure(LinearLayout.java:553) android.view.View.measure(View.java:12728) android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698) android.widget.FrameLayout.onMeasure(FrameLayout.java:293) com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2092) android.view.View.measure(View.java:12728) android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1064) android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2442) android.os.Handler.dispatchMessage(Handler.java:99) android.os.Looper.loop( Looper.java:137) android.app.ActivityThread.main(ActivityThread.java:4424) java.lang.reflect.Method.invokeNative(Native Method) java.lang.reflect.Method.invoke(Method.java:511) com .android.internal.os.ZygoteInit$MethodAndArgsCaller。运行（ZygoteInit.java:784）com.android.internal.os.ZygoteInit.main（ZygoteInit.java:551）dalvik.system.NativeStart.main（本机方法）

```
public class ViewPager extends ViewGroup 
{
    ...

    void populate 
    {
        ...

        if (hasFocus()) {
            View currentFocused = findFocus();
            ItemInfo ii = currentFocused != null ? infoForAnyChild(currentFocused) : null;
            if (ii == null || ii.position != mCurItem) {
                for (int i=0; i<getChildCount(); i++) {
                View child = getChildAt(i);
                ii = infoForChild(child);
                if (ii != null && ii.position == mCurItem) {
                    if (child.requestFocus(FOCUS_FORWARD)) {
                        break;
                    }
                }
            }
        }

        ...
    }

    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-01T21:05:19.180

我找到的解决方案并不简单，但它就足够了，而且开销也不大。

因为 Android 的默认行为是为最子视图提供触摸/单击事件，在这种情况下是 EditText 的，我必须继承 EditText 并覆盖它们的 OnTouchEvent 成员。

在这种情况下，授权是不够的

```
myEditText.Touch += EditTextTouchEventHandler; 
```

因为我仍然想要 EditText（内置）触摸事件的默认行为（它做了一些很好的事情，比如将光标定位在用户触摸的位置，而不仅仅是在文本框的开头）。

**在 OnTouchEvent 中，保存此 EditText 所在片段的视图寻呼机收到了此单击事件的通知，并且 EditText 聚焦是手动处理的**（因此当任何刷新发生时 - 即键盘弹出 - 因此触发 RequestFocus , 最后点击的 EditText 不会失去焦点（如预期的那样）。通信是通过 Android 推荐的片段“回调”的父侦听器模式完成的，即

**此外，必须重写 ViewPager 的 RequestChildFocus 方法，以便可以拦截和吃掉事件。取而代之的是手动调用辅助 RequestChildFocus2 方法，该方法又调用基类 RequestChildFocus。**

包含 ViewPager 的 Activity 定义并实现了接口

```
public interface IFragmentToViewPagerEvent
{
    void ParcelRecordFieldClickEvent(Fragment child, View focused);
} 
```

并且每个片段都将持有对活动的引用，强制转换为该接口，因此片段可以通过接口方法与 ViewPager 通信（另一个接口可以声明片段实现，以便 ViewPager 可以调用片段 - 然后双向通信被覆盖的）。

```
private ParcelView.IFragmentToViewPagerEvent _fragmentToViewPagerEvent;

public override void OnAttach(Activity activity)
{
    base.OnAttach(activity);

    _fragmentToViewPagerEvent = (ParcelView.IFragmentToViewPagerEvent) activity;
} 
```

下面是子类的样子：

RecordNoteBoxInput 是一个自定义类，它被创建为一个 EditText，它被放置在一个选项卡中，扩展以填充包含它的选项卡，周围有一个统一的宽度边框。

```
public class RecordNoteBoxInput : EditText
{
    // sometime u need this, other times you don't - mono's missing nuts that android don't
    //public RecordNoteBoxInput(IntPtr jRef, JniHandleOwnership handle) : base(jRef, handle) { }

    public RecordNoteBoxInput(Context context) : base(context) { }
    public RecordNoteBoxInput(Context context, IAttributeSet attributes) : base(context, attributes) { }
    public RecordNoteBoxInput(Context context, IAttributeSet attributes, int defStyle) : base(context, attributes, defStyle) { }
}

public class RecordNoteBox : LinearLayout
{
    protected Context _context;
    protected LayoutInflater _inflater;

    protected RecordNoteBoxInput _inputFiled;

    public RecordNoteBoxInput Input
    {
        get { return _inputFiled; }
        set { _inputFiled = value; }
    }

    protected virtual RecordNoteBoxInput InstantiateInput()
    {
        return (RecordNoteBoxInput)_inflater.Inflate(Resource.Layout.RecordNoteBoxInput, this, false);
    }

    protected void Init(Context context)
    {
        _context = context;
        _inflater = LayoutInflater.From(context);
        _inputFiled = InstantiateInput(); 

        this.AddView(_inputFiled);
    }

    // sometime u need this, other times you don't - mono's missing nuts that android don't
    //public RecordNoteBox(IntPtr jRef, JniHandleOwnership handle) : base(jRef, handle) { }

    public RecordNoteBox(Context context) : base(context) { Init(context); }
    public RecordNoteBox(Context context, IAttributeSet attributes) : base(context, attributes) { Init(context); }
    public RecordNoteBox(Context context, IAttributeSet attributes, int defStyle) : base(context, attributes, defStyle) { Init(context); }

} 
```

创建 PagedFragmentRecordNoteBox 以便可以覆盖在 RecordNoteBox 中组成的 EditText 的 OnTouchEvent，从而有机会向 EditText 没有焦点的包含 ViewPager 发出信号。无法使用 SetCurrentItem()，因为我使用的是半屏 ViewPager 页面（在 ViewPagerAdapter 中为 PageWidth 返回 0.5f），当前位于右侧的任何页面最终都会在调用 SetCurrentItem 时自动向左移动，因为这是 ViewPager 的默认行为，我不愿意重写这个函数。此外，如果不重写整个 ViewPager 类，我无法控制此函数的内部/私有版本。

```
public class PagedFragmentRecordNoteBox : RecordNoteBox
{
    public Fragment ParentFragment { get; set; }
    public RecordView.IFragmentToViewPagerEvent PagerListener { get; set; }

    private PagedFragmentRecordNoteBoxInput _pagedFragmentFieldInput;

    // sometime u need this, other times you don't - mono's missing nuts that android don't
    //public PagedFragmentRecordNoteBox(IntPtr jRef, JniHandleOwnership handle) : base(jRef, handle) { }

    public PagedFragmentRecordNoteBox(Context context) : base(context) { }
    public PagedFragmentRecordNoteBox(Context context, IAttributeSet attributes) : base(context, attributes) { }
    public PagedFragmentRecordNoteBox(Context context, IAttributeSet attributes, int defStyle) : base(context, attributes, defStyle) { }

    protected override RecordNoteBoxInput InstantiateInput()
    {
        // Since I was getting inflation exception when the layout file 
        // PagedFragmentRecordRecordNoteBoxInput.axml had only a single, not wrapped in any ViewGroup, I had to 
        // wrap it up in a linear layout (whatever). Since this view will be added somewhere else, it needs to 
        // be removed from the wrapper (hence the call to RemoveAllViews - comment it out to see what happens).

        //LayoutInflater inflater = (LayoutInflater)_context.ApplicationContext.GetSystemService(Context.LayoutInflaterService);
        View v = _inflater.Inflate(Resource.Layout.PagedFragmentRecordRecordNoteBoxInput, null);

        _pagedFragmentFieldInput = ((ViewGroup)v).FindViewById<PagedFragmentRecordNoteBoxInput>(Resource.Id.fi_record_note_box_input);

        ((ViewGroup)v).RemoveAllViews();

        _pagedFragmentFieldInput.OuterClass = this;

        return (RecordNoteBoxInput)_pagedFragmentFieldInput;
    }

    protected class PagedFragmentRecordNoteBoxInput : RecordNoteBoxInput
    {
        public PagedFragmentRecordNoteBox OuterClass { get; set; }

        private Context _context { get; set; }

        // sometime u need this, other times you don't - mono's missing nuts that android don't
        //public PagedFragmentRecordNoteBoxInput(IntPtr jRef, JniHandleOwnership handle) : base(jRef, handle) { }

        public PagedFragmentRecordNoteBoxInput(Context context) : base(context) { _context = context; }
        public PagedFragmentRecordNoteBoxInput(Context context, IAttributeSet attributes) : base(context, attributes) { _context = context; }
        public PagedFragmentRecordNoteBoxInput(Context context, IAttributeSet attributes, int defStyle) : base(context, attributes, defStyle) { _context = context; }

        public override bool OnTouchEvent(MotionEvent e)
        {
            OuterClass.PagerListener.ParcelRecordFieldClickEvent(OuterClass.ParentFragment, this);

            return base.OnTouchEvent(e);
        }
    }
} 
```

然后，在具有 EditText 的片段的 OnCreateView 中，我将设置 EditText（或其子类），如

```
_thisView = (ViewGroup) _inflater.Inflate(Resource.Layout.Record, _container, false);

PagedFragmentRecordNoteBox userNotes = _thisView.FindViewById<PagedFragmentRecordNoteBox>(Resource.Id.ll_record_note_box);

PagedFragmentRecordNoteBox userNotes.ParentFragment = this;
PagedFragmentRecordNoteBox userNotes.PagerListener = _fragmentToViewPagerEvent; 
```

托管 ViewPager 的主要活动看起来像

```
public class ParcelView : Activity
{
    protected ViewPager _viewPager;
    private List<Android.App.Fragment> _fragments;

    public interface IFragmentToViewPagerEvent
    {
        void ParcelRecordFieldClickEvent(Fragment child, View focused);
    }

    void IFragmentToViewPagerEvent.ParcelRecordFieldClickEvent(Fragment child, View focused)
    {
        _viewPager.RequestChildFocus2(null, focused);
    }   
} 
```

需要的最后一个部分是覆盖 ViewPager 的 RequestChildFocus() 方法并将请求吃掉：

```
public class ViewPager2 : ViewPager
{
    private view _clearFocused;

    public override void RequestChildFocus(View child, View focused)
    {
        //base.RequestChildFocus(child, focused);
    }

    public void RequestChildFocus2(View child, View focused)
    {            
        if( _clearFocused != null )
        {
            _clearFocused.ClearFocus();
        }

        _clearFocused = focused;

        base.RequestChildFocus(child, focused);
    }

} 
```

其中布局文件定义如下

**Fragment.axml**（片段主要布局之一）：

```
 ...
  <TabHost
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <LinearLayout
      xmlns:android="http://schemas.android.com/apk/res/android"
      android:id="@+id/ll_record_detail_tab"
      android:layout_width="fill_parent"
      android:layout_height="fill_parent"
      android:orientation="vertical"
      android:background="#FF200000">

      <FieldInspection.Droid.Views.MyTabWidget
        android:id="@android:id/tabs"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"/>

      <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">

        ...

        <include layout="@layout/RecordNoteBox"/>

        ...

      </FrameLayout>

    </LinearLayout>

  </TabHost>
  ... 
```

**RecordNoteBox.axml**

```
<?xml version="1.0" encoding="utf-8"?>
<!--fieldinspection.droid.views.custom.RecordNoteBox-->
<fieldinspection.droid.views.custom.PagedFragmentRecordNoteBox
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/ll_record_note_box"
  android:orientation="vertical"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  android:background="#FF555555">

</fieldinspection.droid.views.custom.PagedFragmentRecordNoteBox> 
```

**RecordNotBoxInput.axml**

```
<?xml version="1.0" encoding="utf-8"?>
<fieldinspection.droid.views.custom.FieldInput
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/fi_record_note_box_input"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  android:background="#FFFFFFFF"
  android:gravity="top"
  android:textSize="20sp"
  android:textColor="#FF000000"
  android:layout_margin="20dip"/> 
```

**PagedFragmentRecordNoteBoxInput.axml** - 注意它被包裹在一个 LinearLayout 中。这是为了避免通货膨胀例外。尚不确定为什么某些视图需要包装在 ViewGroup 中才能被膨胀，但它们确实如此（更奇怪的是 ViewGroup 是 View 的子类，所以我可以弄清楚）。

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/ll_record_note_box_input_container"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content">

  <FieldInspection.Droid.Views.Custom.PagedFragmentRecordNoteBox.PagedFragmentRecordNoteBoxInput
    android:id="@+id/fi_record_note_box_input"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#FFFFFFFF"
    android:gravity="top"
    android:textSize="20sp"
    android:textColor="#FF000000"
    android:layout_margin="20dip"/>

  </LinearLayout> 
```

# sql - 合并SQL中的相邻行？

> ID：15161262
> 
> 赞同：5
> 
> 时间：2013-03-01T15:30:42.457
> 
> 标签：sql, sql-server-2008, tsql

我正在根据员工工作的时间块做一些报告。在某些情况下，数据包含两个单独的记录，实际上是一个时间块。

这是该表的基本版本和一些示例记录：

```
EmployeeID
StartTime
EndTime 
```

数据：

```
EmpID      Start         End
----------------------------
#1001   10:00 AM    12:00 PM
#1001    4:00 PM     5:30 PM
#1001    5:30 PM     8:00 PM 
```

在示例中，最后两条记录在时间上是连续的。我想编写一个组合任何相邻记录的查询，因此结果集是这样的：

```
EmpID      Start         End
----------------------------
#1001   10:00 AM    12:00 PM
#1001    4:00 PM     8:00 PM 
```

理想情况下，它还应该能够处理超过 2 个相邻记录，但这不是必需的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T15:39:33.383

本文为您的问题提供了很多可能的解决方案

[http://www.sqlmag.com/blog/puzzled-by-t-sql-blog-15/tsql/solutions-to-packing-date-and-time-intervals-puzzle-136851](http://www.sqlmag.com/blog/puzzled-by-t-sql-blog-15/tsql/solutions-to-packing-date-and-time-intervals-puzzle-136851)

这似乎是最直接的：

```
WITH StartTimes AS
(
  SELECT DISTINCT username, starttime
  FROM dbo.Sessions AS S1
  WHERE NOT EXISTS
    (SELECT * FROM dbo.Sessions AS S2
     WHERE S2.username = S1.username
       AND S2.starttime < S1.starttime
       AND S2.endtime >= S1.starttime)
),
EndTimes AS
(
  SELECT DISTINCT username, endtime
  FROM dbo.Sessions AS S1
  WHERE NOT EXISTS
    (SELECT * FROM dbo.Sessions AS S2
     WHERE S2.username = S1.username
       AND S2.endtime > S1.endtime
       AND S2.starttime <= S1.endtime)
)
SELECT username, starttime,
  (SELECT MIN(endtime) FROM EndTimes AS E
   WHERE E.username = S.username
     AND endtime >= starttime) AS endtime
FROM StartTimes AS S; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T21:58:43.507

如果这是严格关于相邻行（而不是重叠行），您可以尝试以下方法：

1.  取消旋转时间戳。

2.  只留下那些没有重复的。

3.  将其余的转回，将 each`Start`与直接跟随的`End`.

或者，在 Transact-SQL 中，如下所示：

```
WITH unpivoted AS (
  SELECT
    EmpID,
    event,
    dtime,
    count = COUNT(*) OVER (PARTITION BY EmpID, dtime)
  FROM atable
  UNPIVOT (
    dtime FOR event IN (StartTime, EndTime)
  ) u
)
, filtered AS (
  SELECT
    EmpID,
    event,
    dtime,
    rowno = ROW_NUMBER() OVER (PARTITION BY EmpID, event ORDER BY dtime)
  FROM unpivoted
  WHERE count = 1
)
, pivoted AS (
  SELECT
    EmpID,
    StartTime,
    EndTime
  FROM filtered
  PIVOT (
    MAX(dtime) FOR event IN (StartTime, EndTime)
  ) p
)
SELECT *
FROM pivoted
; 
```

[在 SQL Fiddle](http://sqlfiddle.com/#!3/b7ed8/1)有这个查询的演示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-02T12:16:09.850

累积总和的 CTE：

```
DECLARE @t TABLE(EmpId INT, Start TIME, Finish TIME)
INSERT INTO @t (EmpId, Start, Finish)
VALUES
    (1001, '10:00 AM', '12:00 PM'),
    (1001, '4:00 PM', '5:30 PM'),
    (1001, '5:30 PM', '8:00 PM')

;WITH rowind AS (
    SELECT EmpId, Start, Finish,
        -- IIF returns 1 for each row that should generate a new row in the final result
        IIF(Start = LAG(Finish, 1) OVER(PARTITION BY EmpId ORDER BY Start), 0, 1) newrow
    FROM @t),
    groups AS (
    SELECT EmpId, Start, Finish,
        -- Cumulative sum
        SUM(newrow) OVER(PARTITION BY EmpId ORDER BY Start) csum
    FROM rowind)

SELECT
    EmpId,
    MIN(Start) Start,
    MAX(Finish) Finish
FROM groups
GROUP BY EmpId, csum 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T15:58:11.220

我已经更改了一些名称和类型以使示例更小，但这可以工作并且应该非常快并且它没有记录数限制：

```
with cte as (
  select 
    x1.id
    ,x1.t1
    ,x1.t2
    ,case when x2.t1 is null then 1 else 0 end as bef
    ,case when x3.t1 is null then 1 else 0 end as aft
  from x x1
  left join x x2 on x1.id=x2.id and x1.t1=x2.t2
  left join x x3 on x1.id=x3.id and x1.t2=x3.t1
  where x2.id is null
  or    x3.id is null
)

select 
  cteo.id
  ,cteo.t1
  ,isnull(z.t2,cteo.t2) as t2

from cte cteo
outer apply (select top 1 * 
             from cte ctei 
             where cteo.id=ctei.id and cteo.aft=0 and ctei.t1>cteo.t1
             order by t1) z
where cteo.bef=1 
```

和它的小提琴：[http ://sqlfiddle.com/#!3/ad737/12/0](http://sqlfiddle.com/#!3/ad737/12/0)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T17:47:15.017

具有内联用户定义函数和 CTE 的选项

```
CREATE FUNCTION dbo.Overlap
 (
  @availStart datetime,
  @availEnd datetime,
  @availStart2 datetime,
  @availEnd2 datetime
  )
RETURNS TABLE
RETURN
  SELECT CASE WHEN @availStart > @availEnd2 OR @availEnd < @availStart2
              THEN @availStart ELSE
                               CASE WHEN @availStart > @availStart2 THEN @availStart2 ELSE @availStart END
                               END AS availStart,
         CASE WHEN @availStart > @availEnd2 OR @availEnd < @availStart2
              THEN @availEnd ELSE
                             CASE WHEN @availEnd > @availEnd2 THEN @availEnd ELSE @availEnd2 END
                             END AS availEnd

;WITH cte AS
 (
  SELECT EmpID, Start, [End], ROW_NUMBER() OVER (PARTITION BY EmpID ORDER BY Start) AS Id
  FROM dbo.TableName
  ), cte2 AS
 (
  SELECT Id, EmpID, Start, [End]
  FROM cte
  WHERE Id = 1
  UNION ALL
  SELECT c.Id, c.EmpID, o.availStart, o.availEnd
  FROM cte c JOIN cte2 ct ON c.Id = ct.Id + 1
             CROSS APPLY dbo.Overlap(c.Start, c.[End], ct.Start, ct.[End]) AS o
  )
  SELECT EmpID, Start, MAX([End])
  FROM cte2
  GROUP BY EmpID, Start 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/7fa2ca/4)上的演示[](http://sqlfiddle.com/#!3/7fa2ca/4)

# java - tabhost 中的动态样式更改

> ID：15161268
> 
> 赞同：-2
> 
> 时间：2013-03-01T15:30:57.550
> 
> 标签：java, android, styles

对不起我糟糕的英语。android 中有一个应用程序`TabHost`。标签包括`Activity`. 在应用程序中，我使用菜单编译`prefs.xml`

如何仅在活动中更改动态字体大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:34:10.480

您可以使用以下方法更改文本大小：

```
int size = 12;
TextView textView = findViewById(R.id.my_text_view);
textView.setTextSize(size); 
```

# python - 使用 argparse 参数作为关键字参数

> ID：15161269
> 
> 赞同：2
> 
> 时间：2013-03-01T15:30:58.830
> 
> 标签：python, argparse

假设我`args`在用 argparse 解析命令行后有一个命名空间。现在，我想用它来创建一些像这样的对象：

```
foo = Foo(bar=args.bar) 
```

不幸的是，我有一个限制，即*如果*设置了关键字参数，则不能是`None`. 现在，我需要检查是否`args.bar`已设置并采取相应措施：

```
if args.bar:
    foo = Foo(bar=args.bar)
else:
    foo = Foo() 
```

这是笨拙的，并且不能扩展到更多的论点。我想要的是这样的：

```
foo = Foo(**args.__dict__) 
```

但这仍然受到我最初的问题的影响，并且对于不是方法的关键字参数的键也不起作用`__init__`。有没有很好的方法来实现这些事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T15:36:12.283

你可以尝试这样的事情：

```
>>> defined_args = {k:v for k,v in args._get_kwargs() if v is not None}
>>> foo = Foo(**defined_args) 
```

例如：

```
>>> import argparse
>>> args = argparse.Namespace(key1=None,key2='value')
>>> {k:v for k,v in args._get_kwargs() if v is not None}
{'key2': 'value'} 
```

但是请注意，这`_get_kwargs()`不是公共 API 的一部分，因此可能会或可能不会在未来的版本/版本中可用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-05-29T13:45:40.893

我认为您可以使用[vars()](http://docs.python.org/2/library/functions.html#vars)：

```
args = parser.parse_args()
Foo(**vars(args)) 
```

vars([object]) 将命名空间作为字典返回

# javascript - 迭代时出现未终止的字符串错误

> ID：15161270
> 
> 赞同：0
> 
> 时间：2013-03-01T15:31:04.557
> 
> 标签：javascript, jquery

这是我的代码：

```
<c:forEach items="${entry.value}" var="keyval">
 var bdgroup= {
   elem1: '${keyval.partno}',
   elem2: '${keyval.location}',
   elem3: '${keyval.village}',
   elem4: '${keyval.id}'
   };
   exampleArray.push(bdgroup);
</c:forEach> 
```

我正进入（状态

'未终止的字符串文字错误'`

有时它工作正常，但有时会发生此错误..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T15:33:08.120

当 eg`${keyval.id}`被扩展时，如果它有一个单引号，那么 Javascript 将看起来像

```
elem1: 'what's up?' 
```

因此您的未终止字符串错误。

在将它们放入 JSON 之前转义引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T15:33:08.833

看起来您正在使用标记库，并且单引号内的元素是由页面处理器生成的。

我敢打赌，在它失败的时候，你的值包含单引号。

转义单引号，这应该可以解决它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T15:35:55.823

转义单引号和任何其他特殊字符，以便正确获取值。

我是 ==> 我是

# java - 如何从 Java Servlet 中的 HttpServletRequest 获取文件

> ID：15161271
> 
> 赞同：8
> 
> 时间：2013-03-01T15:31:13.540
> 
> 标签：java, servlets

HTML中的表单就像

```
...
<form method="post" action="/foobar">
  <input type="file" name="attachment" />
  <input type="text" name="foo" />
  ... other input fields
</form> 
```

Servlet 就像

```
@Override
protected void doPost(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    String attachment = request.getParameter("attachement");
    String foo = request.getParameter("foo");
    // get other parameters from the request
    // and get the attachment file
} 
```

我想知道

1.  有没有不使用 3rd-party 库从`HttpServletRequest`对象获取文件的方法？

2.  什么`request.getParameter("attachement")`回报？是文件名还是其他？

3.  二进制输入是由 Web 容器自动存储在文件系统中还是暂时存储在内存中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:39:18.593

在任何事情之前，您的表单操作应该是“POST”和 enctype="multipart/form-data"。

那就是说...要获得文件，您必须自己准备请求。

你应该检查：

[多部分请求/响应 java](https://stackoverflow.com/questions/4595173/multipart-requests-responses-java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T16:13:13.683

在您的表单中添加 enctype="multipart/form-data"

```
<form name="formname" action="servletName" method="post"  enctype="multipart/form-data">
<input type="file" name="attachment" />
  <input type="text" name="foo" />
  ... other input fields
</form> 
```

现在，当您在控制器端提交表单时，您可以通过

```
String picture = (request.getParameter("attachment")).getBytes(); 
```

我假设文件是​​图像，你可以传递任何文件

# java - 使用 ExecutorService 在 Java 中并行重命名图像：不使用 100% 的 cpu-power

> ID：15161272
> 
> 赞同：2
> 
> 时间：2013-03-01T15:31:14.547
> 
> 标签：java, multithreading, parallel-processing, executor

我的并行 Java 代码有问题。我尝试从磁盘读取一些图像，更改图像的名称，然后将它们再次保存到不同的文件夹中。为此，我尝试按如下方式并行运行它：

```
 int nrOfThreads = Runtime.getRuntime().availableProcessors();
    int nrOfImagesPerThread = Math.round(remainingImages.size()/((float)nrOfThreads));

    ExecutorService ex2 = Executors.newFixedThreadPool(nrOfThreads);
    int indexCounter = 0; 
    for(int i = 0; i<  nrOfThreads; ++i) {
        if(i != (nrOfThreads-1)) {
            ex2.execute(new ImageProcessing(remainingImages.subList(indexCounter, indexCounter+nrOfImagesPerThread), newNames.subList(indexCounter,indexCounter+nrOfImagesPerThread))); 
            indexCounter+=nrOfImagesPerThread;
        }else {
            ex2.execute(new ImageProcessing(remainingImages.subList(indexCounter, remainingImages.size()), newNames.subList(indexCounter,remainingImages.size()))); 
        } 
    }

    ex2.shutdown();

    try {
        ex2.awaitTermination(12, TimeUnit.HOURS);
    } catch (InterruptedException e) {
        e.printStackTrace();
    } 
```

这是 ImageProcessing 类：

```
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import java.util.List;

import javax.imageio.ImageIO;

public class ImageProcessing implements Runnable {

private List<String> oldPaths;
private List<String> newPaths;

public ImageProcessing(List<String> oldPaths, List<String> newPaths) {
    this.oldPaths = oldPaths;
    this.newPaths = newPaths;
}

@Override
public void run() { 
    for(int i = 0; i<  oldPaths.size();++i) {
        try {
            BufferedImage img = ImageIO.read(new File(oldPaths.get(i)));
            File output = new File(newPaths.get(i)); 
            ImageIO.write(img, "jpg", output);
        } catch (IOException e) { 
            e.printStackTrace();
        }
    }
} 
```

}

我将 for 循环中的图像位置划分为（线程数）部分，所以在我的情况下大约 8 个部分。当我现在运行代码时，它确实并行运行，但它并没有利用我 100% 的 cpu 功率。它只使用了每个处理器的 25% 左右。

有人知道为什么会这样吗？还是我只是在编程的某个地方搞砸了？

非常感谢！

**编辑**：只是为了让寻找相同功能的人完成，我查看了 Apache 公共库（[见此处](http://commons.apache.org/proper/commons-io//)）并找到了一种将图像从一个 HDD 复制到另一个的好且更快的方法。ImageProcessing 类现在如下所示：

```
import java.io.File;
import java.io.IOException;
import java.util.List;

import org.apache.commons.io.FileUtils;

public class ImageProcessing implements Runnable {

private List<String> oldPaths;
private List<String> newPaths;

public ImageProcessing(List<String> oldPaths, List<String> newPaths) {
    this.oldPaths = oldPaths;
    this.newPaths = newPaths;
}

@Override
public void run() { 
    for(int i = 0; i<  oldPaths.size();++i) {
        File sourceFile = new File(oldPaths.get(i)); 

        File targetFile = new File(newPaths.get(i)); 
        //copy file from one location to other
        try {
            FileUtils.copyFile(sourceFile, targetFile);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:01:16.933

您的问题是，这里的瓶颈肯定是磁盘的 I/O。您可能需要在没有 ExecutorService 的情况下同时重命名文件。

换句话说：将更改（重命名文件）写入磁盘所消耗的时间比 CPU 使用的时间要多。

您不能多线程这样的操作。

只需测量代码的串行（非多线程）版本所需的时间，并将其与多线程代码所需的时间进行比较。这将或多或少相同。

# python - Python C-ext 命名空间与常规 python 子模块混合？

> ID：15161277
> 
> 赞同：2
> 
> 时间：2013-03-01T15:31:26.430
> 
> 标签：python, namespaces, python-import, python-c-extension

这个问题与以下内容有一些相似之处：

[嵌套的 Python C 扩展/模块？](https://stackoverflow.com/questions/1681281/nested-python-c-extensions-modules)

只有轻微的扭曲。在这里，我不是想混合两个 C-ext，而是一个 C-ext 和一个常规的 python 子模块。

C-extension 有没有办法在符号“module.so”和子模块中的符号之间共享模块命名空间？

我的模块结构如下所示：

```
facs/
    facs/
      __init__.py
      setup.py
      facs.so
      [*.c files]
      utils/
        __init__.py
        galaxy.py 
```

如果我从层次结构中删除“utils”，我可以导入 facs 并查看`facs.so`方法：

```
>>> import facs
>>> dir(facs)
['__doc__', '__file__', '__name__', '__package__', 'build', 'query', 'remove'] 
```

但是，当我将 utils 子模块放回原处并尝试导入不同的部分时，一个命名空间似乎掩盖了另一个命名空间（`utils`掩盖了由 导出的符号`facs.so`）：

```
>>> import facs
>>> dir(facs)
['__builtins__', '__doc__', '__file__', '__name__', '__package__', '__path__']
>>> import facs.utils
>>> facs.utils.galaxy.rsync_genomes("phix")
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'module' object has no attribute 'galaxy'
>>> from facs.utils import galaxy
>>> galaxy.rsync_genomes("phix")
'Hello world' 
```

如您所见， after `dir(facs)`, `build`, `query`and`remove`消失了，并且`galaxy` 没有正确导入，除非我执行 a`from facs.utils import galaxy`而不是重新使用初始 import 语句并直接访问 via `facs.utils.galaxy.rsync_genomes()`。

总而言之，我对这个模块的预期用途是：

```
>>> import facs
>>> dir(facs)
['__doc__', '__file__', '__name__', '__package__', 'build', 'query', 'remove'
, 'utils'] <--- (Directly accessible from "facs")
>>> facs.utils.galaxy.rsync_genomes("phix")
'Hello world' 
```

（目前正在开发中）代码位于：

[https://github.com/brainstorm/facs/tree/develop](https://github.com/brainstorm/facs/tree/develop)

万一有人想自己尝试一下。我正在使用 virtualenvs，我的 $PYTHONPATH 似乎是正确的：

```
/home/roman/.venvburrito/lib/python:
/home/roman/.virtualenvs/py27/lib/python2.7/site-packages 
```

安装似乎也成功了：

```
cd ~/.virtualenvs/py27/lib/python2.7/site-packages/facs-2.0dev-py2.7.egg/
(py27)$ ls
EGG-INFO  facs.py  facs.pyc  facs.so  utils/ 
```

似乎没有`__init__.py`文件实际上被复制到顶级目录，但是在那里触摸它不会影响上述导入行为。

有任何想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:32:48.213

请注意，您首先导入的是 so 文件，而不是 facs 包。你是否在 facs 包源目录上运行你的 python 控制台？

尝试走出包目录，一切都会变得有意义。

此外，下一个导入并没有说明 facs 目录后面的所有模块都将被导入：

```
>> import facs
>> dir (facs)
['__builtins__', '__doc__', '__file__', '__name__', '__package__', '__path__'] 
```

你必须在每个`__init__.py`文件中设置你的导入，例如，如果你想在你的文件中导出一些符号，你的`.so`文件`import facs`中应该有以下内容`__init__.py`：

```
>> from _facs import function_name, function_name ..... 
```

然后，当你`import facs`，它会为你导入这些功能。

为您的子包实用程序采用相同的模式。

我还建议将您的`facs.so`文件重命名为`_facs.so`文件以避免包名称和模块名称之间的名称冲突。

# opencv - 在没有 GPU 的情况下编译 OpenCV？

> ID：15161278
> 
> 赞同：15
> 
> 时间：2013-03-01T15:31:29.730
> 
> 标签：opencv, cmake, gpu

我刚刚`cmake -D CMAKE_BUILD_TYPE=RELEASE ..`从运行`OpenCV/build`，并得到了我的输出：

```
--   OpenCV modules:
--     To be built:                 core imgproc flann highgui features2d calib3d ml video
                                    objdetect contrib nonfree gpu legacy photo python
                                    stitching ts videostab
--     Disabled:                    -
--     Disabled by dependency:      -
--     Unavailable:                 androidcamera java world 
```

问题是，编译`gpu`失败，可能是因为我的机器没有？（这是一个 EC2 实例）。

`make`失败并出现一个奇怪的错误：

```
Scanning dependencies of target opencv_test_gpu
[ 72%] Building CXX object modules/gpu/CMakeFiles/opencv_test_gpu.dir/test/test_gpumat.cpp.o
[ 72%] Building CXX object modules/gpu/CMakeFiles/opencv_test_gpu.dir/test/utility.cpp.o
[ 73%] Building CXX object modules/gpu/CMakeFiles/opencv_test_gpu.dir/test/test_filters.cpp.o
[ 73%] Building CXX object modules/gpu/CMakeFiles/opencv_test_gpu.dir/test/test_copy_make_border.cpp.o
[ 73%] Building CXX object modules/gpu/CMakeFiles/opencv_test_gpu.dir/test/main.cpp.o
[ 73%] Building CXX object modules/gpu/CMakeFiles/opencv_test_gpu.dir/test/test_threshold.cpp.o
[ 73%] Building CXX object modules/gpu/CMakeFiles/opencv_test_gpu.dir/test/test_video.cpp.o
[ 73%] Building CXX object modules/gpu/CMakeFiles/opencv_test_gpu.dir/test/test_core.cpp.o
c++: internal compiler error: Killed (program cc1plus)
Please submit a full bug report,
with preprocessed source if appropriate.
See <file:///usr/share/doc/gcc-4.6/README.Bugs> for instructions.
make[2]: *** [modules/gpu/CMakeFiles/opencv_test_gpu.dir/test/test_core.cpp.o] Error 4
make[1]: *** [modules/gpu/CMakeFiles/opencv_test_gpu.dir/all] Error 2
make: *** [all] Error 2 
```

我尝试过使用该标志`-DOPENCV_MODULES_DISABLED_USER="gpu"`，但这会产生奇怪的输出，其中`gpu`列出为`to be built` *and* `disabled`。

```
--   OpenCV modules:
--     To be built:                 core imgproc flann highgui features2d calib3d ml video objdetect contrib nonfree gpu legacy photo python stitching ts videostab
--     Disabled:                    gpu
--     Disabled by dependency:      -
--     Unavailable:                 androidcamera java world 
```

没有 怎么编译`gpu`？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-05-08T02:35:37.103

要禁用构建特定模块，请使用

```
-D BUILD_opencv_{modulename}=OFF 
```

在这种情况下，使用

```
-D BUILD_opencv_gpu=OFF 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-01T16:01:55.447

尝试添加`-D WITH_CUDA=OFF`到您的`cmake`命令行。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-12-04T19:32:03.200

对于 EC2 上的 OpenCV 2.4.11，我必须同时包含`-D BUILD_opencv_gpu=OFF`和`-D WITH_CUDA=OFF`. 我还包括`-D WITH_1394=OFF`以避免在 python 中出现警告。所以：

```
cd opencv-2.4.11/
mkdir release
cd release/
cmake -D BUILD_opencv_gpu=OFF -D WITH_CUDA=OFF -D WITH_1394=OFF -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local ..
make
sudo make install 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-03-31T20:09:52.967

这是由于您的 EC2 实例没有足够的内存造成的。我在运行 Ubuntu 12.10 的 EC2/Micro 上遇到了类似的错误（不同的模块），但在 EC2/Small 上运行顺利。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-06-10T04:03:15.467

真正的问题是，您的设备内存不足。当 gcc 没有足够的内存时会发生这种情况。相信我，因为我有同样的问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-08-12T06:27:40.927

有同样的问题。这是一个内存问题；增加交换空间为我修复了它。打开终端并输入：

```
free
dd if=/dev/zero of=/var/swap.img bs=1024k count=1000
mkswap /var/swap.img
swapon /var/swap.img
free 
```

然后继续您的`make`.

[来源](https://bitcointalk.org/index.php?topic=304389.msg7374545#msg7374545)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-05T14:51:19.877

我以最可怕的方式解决了这个特殊问题：

```
touch modules/gpu/CMakeFiles/opencv_test_gpu.dir/test/test_core.cpp.o
make 
```

编译完成就ok了。不过，这并不是真正的解决方案，所以我想知道是否有适当的解决方案。

# css - 图像在浏览器调整大小时重叠文本

> ID：15161289
> 
> 赞同：1
> 
> 时间：2013-03-01T15:31:56.450
> 
> 标签：css, image-resizing, overlap

我已经完成了 CSS 验证（确实发现了一些讨厌的未封闭标签，现在已排序）。我正在尝试将图像与页面的右上角对齐，标题文本在左上角。

我可以这样做，但是当我调整浏览器窗口的大小时，图像总是希望在它们中的任何一个调整大小之前与标题文本重叠。如果我删除了用于放置图像的边距，则图像位于标题文本下方（并且位于右侧）而不是仅位于其右侧，但我觉得删除它（同时保持定位）可能是钥匙。我确实需要图像与其他一些元素重叠。

这是我的图像代码片段：

```
img#site-logo {
    max-width: 100%;
    height: auto;
    clear: both;
    position: relative;
    z-index: 0;
    margin: -12.87em 2em -16em 0px;
} 
```

对于网站标题：

```
#site-title a {
    font-size: 4.875em;
    font-weight: bold;
    line-height: 78px;
    padding: 0px;
    margin-right: auto;
    white-space: nowrap;
    z-index: 2;
    position: relative;
} 
```

现场直播：

[http://dominicpalma.com/](http://dominicpalma.com/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T15:48:01.793

肯定有几种不同的方法可以解决您的问题。但在我看来，这将是`min-width`为您的`#page`元素设置 a 的最佳解决方案。

```
#page{
    min-width:900px;
} 
```

我对宽度进行了一些尝试，并认为`min-width`900 px 最适合您的情况。

# android - 膨胀 android.support.v4.app.FragmentTabHost 时出错

> ID：15161292
> 
> 赞同：1
> 
> 时间：2013-03-01T15:32:04.167
> 
> 标签：android, layout, android-fragments

我正在尝试创建一个可以与 android sdk 7 一起使用的日历应用程序，直到现在。我想使用标签来显示不同的日历视图（每周、每月、每日、议程）。因此，我需要为每个视图使用片段并使用支持库来实现向后兼容性。

这是我的 xml 布局文件

```
<android.support.v4.app.FragmentTabHost
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <LinearLayout
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="match_parent">

        <TabWidget
            android:id="@android:id/tabs"
            android:orientation="horizontal"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="0"/>

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_weight="0"/>

        <FrameLayout
            android:id="@+id/realtabcontent"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1"/>

    </LinearLayout>
</android.support.v4.app.FragmentTabHost> 
```

这是随之而来的活动

```
package com.bmooredev.bpassistant;

import com.bmooredev.bpassistant.R;
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentTabHost;
import android.support.v4.app.FragmentTransaction;

public class EventsActivity extends FragmentActivity{
private WeekFragment FragWeek=new WeekFragment();
private MonthFragment FragMonth=new MonthFragment();
private DayFragment FragDay=new DayFragment();
private AgendaFragment FragAgenda=new AgendaFragment();

private int month;
private int day;
private int year;

 private FragmentTabHost mTabHost;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_events);

        mTabHost = (FragmentTabHost)findViewById(android.R.id.tabhost);
        mTabHost.setup(this, getSupportFragmentManager(), R.id.realtabcontent);

        mTabHost.addTab(mTabHost.newTabSpec("simple").setIndicator("Simple"),
                WeekFragment.class, null);
        mTabHost.addTab(mTabHost.newTabSpec("contacts").setIndicator("Contacts"),
                MonthFragment.class, null);
        mTabHost.addTab(mTabHost.newTabSpec("custom").setIndicator("Custom"),
                DayFragment.class, null);
        mTabHost.addTab(mTabHost.newTabSpec("throttle").setIndicator("Throttle"),
                AgendaFragment.class, null);

        showFragWeek();
    }

private void showFragWeek(){
    FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
    ft.replace(R.id.realtabcontent, FragWeek);
    ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
    ft.commit();
}

private void showFragMonth(){
    FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
    ft.replace(R.id.realtabcontent, FragMonth);
    ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
    ft.commit();
}

private void showFragDay(){
    FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
    ft.replace(R.id.realtabcontent, FragDay);
    ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
    ft.commit();
}

private void showFragAgenda(){
     FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
     ft.replace(R.id.realtabcontent, FragAgenda);
     ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
     ft.commit();
}

} 
```

这是我运行 logcat 时显示的内容

```
03-01 10:07:28.655: E/AndroidRuntime(6814): FATAL EXCEPTION: main
03-01 10:07:28.655: E/AndroidRuntime(6814): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.bmooredev.bpassistant/com.bmooredev.bpassistant.EventsActivity}: android.view.InflateException: Binary XML file line #1: Error inflating class android.support.v4.app.FragmentTabHost
03-01 10:07:28.655: E/AndroidRuntime(6814):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
03-01 10:07:28.655: E/AndroidRuntime(6814):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
03-01 10:07:28.655: E/AndroidRuntime(6814):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
03-01 10:07:28.655: E/AndroidRuntime(6814):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
03-01 10:07:28.655: E/AndroidRuntime(6814):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-01 10:07:28.655: E/AndroidRuntime(6814):     at android.os.Looper.loop(Looper.java:137)
03-01 10:07:28.655: E/AndroidRuntime(6814):     at android.app.ActivityThread.main(ActivityThread.java:4745)
03-01 10:07:28.655: E/AndroidRuntime(6814):     at java.lang.reflect.Method.invokeNative(Native Method)
03-01 10:07:28.655: E/AndroidRuntime(6814):     at java.lang.reflect.Method.invoke(Method.java:511)
03-01 10:07:28.655: E/AndroidRuntime(6814):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
03-01 10:07:28.655: E/AndroidRuntime(6814):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
03-01 10:07:28.655: E/AndroidRuntime(6814):     at dalvik.system.NativeStart.main(Native Method)
03-01 10:07:28.655: E/AndroidRuntime(6814): Caused by: android.view.InflateException: Binary XML file line #1: Error inflating class android.support.v4.app.FragmentTabHost
03-01 10:07:28.655: E/AndroidRuntime(6814):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:698)
03-01 10:07:28.655: E/AndroidRuntime(6814):     at android.view.LayoutInflater.inflate(LayoutInflater.java:466)
03-01 10:07:28.655: E/AndroidRuntime(6814):     at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
03-01 10:07:28.655: E/AndroidRuntime(6814):     at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
03-01 10:07:28.655: E/AndroidRuntime(6814):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:256)
03-01 10:07:28.655: E/AndroidRuntime(6814):     at android.app.Activity.setContentView(Activity.java:1867)
03-01 10:07:28.655: E/AndroidRuntime(6814):     at com.bmooredev.bpassistant.EventsActivity.onCreate(EventsActivity.java:26)
03-01 10:07:28.655: E/AndroidRuntime(6814):     at android.app.Activity.performCreate(Activity.java:5008)
03-01 10:07:28.655: E/AndroidRuntime(6814):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
03-01 10:07:28.655: E/AndroidRuntime(6814):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
03-01 10:07:28.655: E/AndroidRuntime(6814):     ... 11 more
03-01 10:07:28.655: E/AndroidRuntime(6814): Caused by: java.lang.ClassNotFoundException: android.support.v4.app.FragmentTabHost
03-01 10:07:28.655: E/AndroidRuntime(6814):     at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
03-01 10:07:28.655: E/AndroidRuntime(6814):     at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
03-01 10:07:28.655: E/AndroidRuntime(6814):     at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
03-01 10:07:28.655: E/AndroidRuntime(6814):     at android.view.LayoutInflater.createView(LayoutInflater.java:552)
03-01 10:07:28.655: E/AndroidRuntime(6814):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:687)
03-01 10:07:28.655: E/AndroidRuntime(6814):     ... 20 more 
```

此外，如果我使用 2.2 构建项目，该项目使用完全相同的代码运行良好。

# python - 如何在 PyBrain 中进行有监督的深度信念训练？

> ID：15161295
> 
> 赞同：10
> 
> 时间：2013-03-01T15:32:29.763
> 
> 标签：python, machine-learning, neural-network, pybrain, dbn

我无法让 DeepBeliefTrainer 在 PyBrain/Python 中处理我的数据。由于除了无监督的如何在 PyBrain 中使用深度学习之外，我找不到任何示例，我希望有人可以给出示例来展示基本的使用概念。

我尝试使用以下方法进行初始化：

```
epochs = 100
layerDims = [768,100,100,1]

net = buildNetwork(*layerDims)
dataset = self.dataset
trainer = DeepBeliefTrainer(net, dataset=dataSet)
trainer.trainEpochs(epochs) 
```

我尝试使用 SupervisedDataset 进行回归，但训练失败了。有没有人成功使用深度学习训练器进行监督机器学习？你是怎么做到的？

我得到的错误：

```
File "/Library/Python/2.7/site-packages/PyBrain-0.3.1-py2.7.egg/pybrain/structure/networks/rbm.py", line 39, in __init__
self.con = self.net.connections[self.visible][0]
KeyError: None 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-18T15:35:51.137

这是因为您的初始网络： `net = buildNetwork(*layerDims)`在您的深度信念网络中没有一个具有可见层名称的层，它是“可见的”。因此，为了找到它在初始网络中的映射，您可以执行以下操作：

```
net.addInputModule(LinearLayer(input_dim, 'visible'))
[...]
trainer = DeepBeliefTrainer(net, dataset=dataSet) 
```

# heroku - 如何调试自定义 Heroku buildpack：未驱动发布脚本

> ID：15161296
> 
> 赞同：3
> 
> 时间：2013-03-01T15:32:30.830
> 
> 标签：heroku, eclipse-virgo, buildpack

我正在开发一个 Eclipse [Virgo buildpack](https://github.com/glyn/virgo-buildpack)，但是当我使用 Heroku 尝试它并推送一个[琐碎的应用程序](https://github.com/glyn/virgo-buildpack-snifftest)时，检测失败：

```
-----> Fetching custom git buildpack... done
!     Heroku push rejected, no Cedar-supported app detected 
```

buildpack 的检测脚本在应用程序的根目录中本地运行良好：

```
$[...]virgo-buildpack/bin/detect .
Virgo Web 
```

关于如何调试的任何提示？我尝试让检测脚本写入标准输出和标准错误，但输出没有出现在“heroku 日志”下。

我正在运行 Mac OS X 10.8.2、Ruby 1.9.3p374 和 gems 1.8.23。

更新：在前两个答案之后，我在驱动 detect.rb 脚本之前使用了 bash 检测脚本来安装丢失的 gem。我还更改了 buildpack 脚本以写入标准输出。

heroku push 更进一步，但仍然失败。我可以看到编译脚本正在退出，但是发布 bash 脚本在开始时有一个 echo 命令，并且这不会出现在输出中。

**所以似乎没有调用发布脚本。**

输出如下（# 表示注释以避免混乱）：

```
-----> Fetching custom git buildpack... done
# detect script enter and exit
Virgo Web app detected
# compile script enter and exit
-----> Discovering process types
       Procfile declares types                                                                                                                                                                                                                                                                                                                                                                                             

                               -> (none)
# detect script enter and exit (again)
Virgo Web -> web

-----> Compiled slug size: 60.4MB
-----> Launching... !     Heroku push rejected, failure releasing code 
```

heroku logs --tail 简单地显示：

```
2013-03-06T10:53:48+00:00 heroku[slugc]: Slug compilation started
2013-03-06T10:54:27+00:00 heroku[slugc]: Slug compilation failed: failure releasing code 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T05:04:51.963

For a custom buildpack, the `detect` script doesn't really need to be that complicated because users will be specifying it manually with `BUILDPACK_URL` anyway. A sophisticated `detect` script really only makes sense for the default Heroku buildpacks because they need to detect if the buildpack applies for any given app.

If you want to completely punt on detection, you can get away with something like this:

```
#!/usr/bin/env bash
# bin/detect <build-dir>

echo "Vergo"
exit 0 
```

Once you get that working (and work out any issues with `compile` and `release`), you can make it a little more intelligent. For example, you could detect if a certain file pattern exists:

```
#!/usr/bin/env bash
# bin/detect <build-dir>
if [ -f $1/index.jsp ]; then
  echo "Vergo" && exit 0
else
  echo "no" && exit 1
fi 
```

Also, speaking of simplicity, it looks like you are basing your buildpack on the [Ruby buildpack](https://github.com/heroku/heroku-buildpack-ruby), which is one of the most complicated ones out there. You may want to take a look at the [list of third-party buildpacks](https://devcenter.heroku.com/articles/third-party-buildpacks) to see how most are done in simple bash.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T20:16:48.117

目前有一些工具可以让这变得更容易。

1.  这个构建包[https://github.com/kr/heroku-buildpack-inline](https://github.com/kr/heroku-buildpack-inline)（帮助构建 buildpack 的构建包）

2.  `heroku run bash`是你最好的朋友。

使用内联 buildpack 将您的 build pack 推送到平台上，这样您就可以获得良好的日志记录，并使用`heroku run bash`它以便您可以在您将使用它的环境中实际修改您的 buildpack。

# c# - 向 MVC 控制器传递列列表并返回这些列的数据？

> ID：15161300
> 
> 赞同：0
> 
> 时间：2013-03-01T15:32:44.103
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, datatables, jquery-datatables

我正在尝试为[Datatables](http://www.datatables.net/)构建一个帮助类，需要一些建议。

我想创建一个助手，我可以传入一个对象，该对象代表`DataTables`由特定模型键入的 a 的设置。该对象将包含一组表达式，这些表达式表示助手要使用的列。作为`DataTables`对象的一部分，将有一个属性保存为网格提供数据的 URL。这将有效地成为`sAjaxSource`参数。作为 URL 调用的一部分，将发送一个 JSON 包，其中包含有关列的信息。这整个部分，我了解如何构建。基本上，我会构建`DataTables`包含列定义的 JavaScript 代码，并创建一个 JSON 对象来表示我想在 URL 中传递的列。

我需要一些建议的领域是在对服务器/控制器进行调用后为特定列构建数据。所以我的控制器可能看起来像这样：

```
public ActionResult GetUsersList(IEnumerable<DatatableColumnJson> columns)
    {
        var users = _someUserRepository.GetAll();

        foreach (var user in users)
        {
            //Here I would build the JSON that DataTables needs to render the grid.
            //I would iterate through the users and pull out the data for the specific columns
        }

        return Json(someCompleteDataTablesObject, JsonRequestBehavior.AllowGet);
    } 
```

支持类：

```
public class DatatableColumnJson
{
    public string Name { get; set; }
    public string Visible { get; set; }
}

public class User
{
    public string UserName { get; set; }
    public string Email { get; set; }
} 
```

所以我首先想到我可以使用反射，但这似乎有点密集，也许。另一个想法是将列名转换为表达式以可能提取数据。我想要一些高效的东西，而且没有太多的开销，但也许我要求太多了。

# html - 在 Django 的每个页面上都包含一个菜单

> ID：15161309
> 
> 赞同：5
> 
> 时间：2013-03-01T15:33:14.993
> 
> 标签：html, css, django

我对如何正确地做到这一点有点困惑。我有一个名为 menu.html 的模板文件。我想将 menu.html 包含到我网站的每个页面中，所以我已经完成了`{% include "menu.html" %}`，而且效果很好。我坚持的是，如果我点击一个菜单链接，那么它的颜色应该变成红色，并且只要我在那个页面上就应该保持红色。

假设菜单有指向 A、B、C 和 D 的链接。如果我在页面 B 上，那么 B 应该是红色的，而所有其他的应该是黑色的。

关于如何实现这一点有什么想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-01T15:37:46.733

我发现这是最干净的解决方案之一：http: [//djangosnippets.org/snippets/2421/](http://djangosnippets.org/snippets/2421/)

以防万一该链接失效，这是代码：

### CSS

```
ul.tab-menu li a {
  text-decoration: none;
  color: #000;
}

ul.tab-menu li.active a {
  color: #F00;
} 
```

### 菜单.html

```
<ul class="tab-menu">
    <li class="{% if active_tab == 'A' %}active{% endif %}"><a href="#">A</a></li>
    <li class="{% if active_tab == 'B' %}active{% endif %}"><a href="#">B</a></li>
    <li class="{% if active_tab == 'C' %}active{% endif %}"><a href="#">C</a></li>
</ul> 
```

### 页面'A'</h3>

```
{% include "menu.html" with active_tab='A' %} 
```

### 页面'B'</h3>

```
{% include "menu.html" with active_tab='B' %} 
```

### 页面'C'</h3>

```
{% include "menu.html" with active_tab='C' %} 
```

# android - 广播接收器停止工作

> ID：15161310
> 
> 赞同：2
> 
> 时间：2013-03-01T15:33:18.610
> 
> 标签：android, broadcastreceiver

一般来说，我有一项服务向我的活动发送一个意图，该意图总是每 6 秒`BroadcastReceiver`一次，并且每次接收更新一个计时器。

我偶然发现一段时间后（这是随机的）特定接收器停止工作。

`OnPause`我`unregister`它，`onResume`我再次注册。

这也在任何设备和安卓版本中随机发生。

我通过在网上研究发现，在`onReceive`接收器准备好被 Android 杀死后，我的却一直在获取意图。

“接收器生命周期

BroadcastReceiver 对象仅在调用 onReceive(Context, Intent) 期间有效。一旦您的代码从此函数返回，系统就会认为该对象已完成且不再处于活动状态。"

仅供参考，我在我的活动中这样声明

```
public class MyReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context arg0, Intent intent) {

        Log.i("Intent received", "+_ " + intent.getAction());
        if (intent.getAction().equals(TEST)) {
        //do sth
        } else {

        //do sth else
        }

    }
} 
```

甚至花时间阅读也非常感谢:)。

我没有在我的清单中声明任何内容，至于我的 logcat，我必须在它发生的那一刻通过我的电话。该服务是一个异步任务后的简单发送广播。我做的最后一个测试是通过记录发送的蜜蜂来确保服务中的代码正在运行。而且服务还在继续。

我现在远离我的代码编写，但我认为不会有任何帮助，因为它非常简单。纳克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T11:04:11.927

好吧，我仍然可以弄清楚，但我找到了解决问题的方法

计时器现在处于活动状态，接收器正在发送事件，但经过 10000 次尝试后，我想触发 END EVENT。现在接收器，因为他没有工作，所以我无法得到它，但现在我开始一个带有附加功能的意图，用于相同的活动，总是带有标志 new_task 和 clear_top。

无论我的接收器是否工作，由于服务正常，我将启动特定的 Activity 并伪显示 END EVENT。

PS:: 这种行为并不总是触发，但有时。所以现在我没事了。

如果我不明白，请发表评论并提出任何问题。谢谢

# python - 安装 biopython - 在注册表中找不到 python 3.3

> ID：15161315
> 
> 赞同：6
> 
> 时间：2013-03-01T15:33:45.253
> 
> 标签：python, windows-7, registry, biopython

我正在尝试安装 biopython 以在 Windows7 计算机上运行 Python 3.3。

我已经下载了 biopython 可执行文件 biopython-1.61.win32-py3.3-beta.exe。但是，当我尝试运行可执行文件时，我收到消息“需要 Python 版本 3.3，在注册表中找不到”。我的电脑上有 Python 3.3 版。我已经通过它运行程序一两个月了。它是从文件 python-3.3.0.amd64.msi 安装的，位于 Program Files (x86) 目录中。我尝试重新安装 Python 3.3，但得到相同的错误消息。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-01T17:32:44.750

Python.org 提供两种版本的 Windows 安装程序，32 位（“win32”）和 64 位（“amd64”）。您需要为您的 Python 版本匹配的库安装程序。您正在尝试将 32 位 Biopython 安装程序与 64 位 Python 一起使用。

[按照这里http://biopython.org/wiki/Download](http://biopython.org/wiki/Download)的说明，这里有用于 Biopython、NumPy 等的实验性 64 位 Windows 安装程序：[http ://www.lfd.uci.edu/~gohlke/pythonlibs/](http://www.lfd.uci.edu/~gohlke/pythonlibs/)

或者，您可以安装 32 位版本的 Python 3.3 for Windows，然后使用 biopython-1.61.win32-py3.3-beta.exe

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-26T05:24:49.957

您可以尝试通过修复 Windows 注册表中的空白选项来解决此问题。 [https://stackoverflow.com/a/11507968/3962648](https://stackoverflow.com/a/11507968/3962648)在安装 numpy 时提供了类似问题的详细信息。简而言之，您只需运行 windows 命令行并输入：“reg copy HKEY_LOCAL_MACHINE\SOFTWARE\Python HKLM\SOFTWARE\Wow6432Node\Python /s”

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-11-11T07:59:01.223

probelm 是 windows 64bit 和 biopython 32bit ... 获得 biopython 的 64bit 版本得到这个： [http ://www.lfd.uci.edu/~gohlke/pythonlibs/](http://www.lfd.uci.edu/~gohlke/pythonlibs/)

# c - 实现异或链表。尺寸 1 或 2

> ID：15161318
> 
> 赞同：0
> 
> 时间：2013-03-01T15:33:47.350
> 
> 标签：c, linked-list, xor-linkedlist

假设这是我的 XOR 链表结构......

```
结构 xList {
    整数数据；
    xList* 异或；
}

```

**如果异或链表的大小是 1 或 2**应该`xor`包含什么？

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T15:37:36.047

> 如果 xor 链表的大小是 1 或 2，xor 应该包含什么？

它应该包含`prev ^ next`where`prev`是指向前一个元素`next`的指针，是指向下一个元素的指针，并且`^`是 XOR 运算符。列表中的第一个元素显然具有`nil`前一项，最后一项具有`nil`最后一项，因此您将分别获得`nil ^ next`和`prev ^ nil`那些元素。在大小为 1 的列表中，没有上一个*或*下一个元素，因此您可能可以弄清楚您将在该`xor`字段中存储什么。

异或链表的想法是，您必须已经知道列表中前一个或下一个元素的地址才能确定下一个或前一个元素。但是，如果您正在遍历列表，那没问题，而且由于这就是您对链接列表*所做*的事情，因此它可能是一个有用的优化。例如，如果您从头到尾进行迭代，则从指向列表中第一个元素的指针开始。前一个元素是`nil`，因此要获得您计算的下一个元素：`next = prev ^ xor`。在移动到下一个元素之前，您还必须记住指向当前元素的指针，以便您可以使用它来获取下一个元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T15:47:35.197

您将（上一个 ^ 下一个）存储在 xorlink 指针中。

考虑

```
struct xList 
{
    int data;
    xList* xorlink;
} 
```

A -> B -> C -> D

你从头开始。你知道 head 没有前一个 - 所以 xorlink 将指向 B 节点。您保存当前指针 (A) 并移动到下一个 (B)。您执行 (A ^ B->xorlink) 以获取指向 C 的指针。 (B ^ C->xorlink) 将为您提供指向 D 的指针。依此类推

反向遍历也是类似的。

无论如何，回答你的问题

1.  如果大小为 1，则第一个节点的 xorlink 应包含 NULL。
2.  如果大小为 2，则第一个节点的 xorlink 应包含指向第二个节点的指针。第二个节点的 xorlink 应该包含一个指向第一个节点的指针。**

# text-services-framework - 如何知道输入是 ime 还是 tsf？

> ID：15161319
> 
> 赞同：1
> 
> 时间：2013-03-01T15:33:50.157
> 
> 标签：text-services-framework

我用的是win7 64bit，本地语言是中文。

有些输入使用ime，有些输入使用tsf。

我有时想使用 LoadKeyboardLayout() 来激活特殊的键盘布局，但是当调用 GetKeyboardLayoutName() 时，tsf 输入和默认 ime 返回相同的键盘布局“0x00000804”。</p>

所以我不能使用 LoadKeyboardLayout() 激活 tsf 输入，我知道如何通过 ITfInputProcessorProfiles 接口激活 tsf 输入。

但是如何获取当前输入是 ime 还是 tsf？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-09T19:14:29.950

当*语言*发生变化时，TSF 会通过[ITfLanguageProfileNotifySink](http://msdn.microsoft.com/en-us/library/windows/desktop/ms628769%28v=vs.85%29.aspx)发送通知，当*IME发生变化时，TSF 会通过*[ItfActiveLanguageProfileNotifySink](http://msdn.microsoft.com/en-us/library/windows/desktop/ms538491%28v=vs.85%29.aspx)发送通知。

# javascript - 增量while循环变为无限

> ID：15161323
> 
> 赞同：0
> 
> 时间：2013-03-01T15:34:09.733
> 
> 标签：javascript, while-loop, directory, infinite-loop

如果文件夹已经存在，我正在尝试创建一个末尾带有升序数字的新文件夹，但我最终陷入无限循环

```
var i=1;
while (myFolder.exists == true) {
var myFolder = new Folder(wf+"/"+curFile+"_folder"+i)
i++;
}; 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:45:12.963

它*看起来*像是`myFolder.exists`一个方法，而不是一个属性，所以你必须调用它：

```
while (myFolder.exists()) {
    var myFolder = new Folder(wf + "/" + curFile + "_folder" + i);
    i++;
}; 
```

否则，您将评估方法本身，它确实总是`true`在布尔上下文中。

请注意，`myFolder`在循环内部重新定义可能不是这里的问题。Javascript 中的循环与封闭代码共享相同的范围，并且变量将被提升到该范围的开头。正如 jdwire 所说，`undefined`最初可能是这样，但随后您会收到错误消息，而不是触发无限循环。

# sql - 游标中的查询何时执行？

> ID：15161324
> 
> 赞同：9
> 
> 时间：2013-03-01T15:34:10.277
> 
> 标签：sql, oracle, plsql, oracle11g, database-cursor

假设我有类似的东西：

```
CURSOR foo_cur IS
  SELECT * FROM foo;

...

DELETE FROM foo WHERE bar=1;

FOR row IN foo_cur 
LOOP
...
END LOOP; 
```

如果我在打开游标之前删除行`foo`，这些行仍然是游标结果的一部分吗？查询是否`SELECT * FROM foo`在该行执行`FOR row IN foo_cur`？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-01T15:42:22.420

将从游标返回的行集在打开游标时确定（通过循环显式`OPEN`或隐式）。`FOR`在这种情况下，您删除的行将不会在您的循环中返回。

通常，查询不会一次全部执行。Oracle 执行足够多的查询以获取下一组行，将这些行返回给 PL/SQL VM，并等待直到请求到来以获取更多行。在 11g 中，Oracle 将一次隐式`BULK COLLECT`执行 100 行，因此每 100 次循环迭代，查询将进一步执行，直到没有更多行返回。由于多版本读取一致性，Oracle 将始终将数据返回给您，即使在您的代码运行时其他会话正在进行更改并提交更改，当游标打开时仍然存在。

# svn - svn move 后找到旧文件的新位置

> ID：15161329
> 
> 赞同：1
> 
> 时间：2013-03-01T15:34:34.810
> 
> 标签：svn, tortoisesvn, visualsvn

有没有办法从旧版本中获得一个已知的目录或文件......然后（知道它已经被“移动”在以后的时间）找出它被移动的位置？

例子。

```
https:\\myserver.com\Repository1\OldFolderStructure\Folder01\FolderA\MyFile01.txt 
```

（此结构/文件存在于修订版 333）

...........

```
svn mkdir "https:\\myserver.com\Repository1\NewFolderStructure\"

svn move "https:\\myserver.com\Repository1\OldFolderStructure\Folder01" "https:\\myserver.com\Repository1\NewFolderStructure" 

svn ls "https:\\myserver.com\Repository1\NewFolderStructure\Folder01" 
```

..........（现在假设有 1,000 多个其他签到，但没有更多的 svn 移动），所以我跳转到修订版 1444。） ..........

所以现在，如果我查看修订版 333，我有这个文件“MyFile01.txt”（或文件夹“FolderA”）。我正在尝试找出它在 HEAD 修订版中的位置。

你可能会想，“他为什么需要这个？” 我希望我没有。但是我需要 30 分钟才能给你那个修订历史。（<< 坏笑话）。

.........编辑..............

所以一些额外的东西。

一：svn info 从来没有给我足够的信息来找到新家。造成这种情况的主要原因是目录的嵌套。我 svn 移动了一些文件夹，但是该文件夹有几个嵌套在 1 级以上的子文件夹。

然而，使用 svn diff，虽然我得到了很多信息（在修订 1444 和 333 之间）......信息就在那里。我的意思是，svn diff 任务大约需要 33 秒，但是一旦它回来，我就有了 xml 中的信息，我正在解析它并将其放入一些简单的 DTO 对象中。

二（相同文件名问题）：

如果我的物品的原始位置是：

```
https://mySvnServer.com/Repo1/SoccerClubWebSite/scripts/validationRoutines.js 
```

然后我做了一个svn diff（详细），我在HEAD修订中有以下两项：

```
<path props="none" kind="file" item="add">https://mySvnServer.com/Repo1/WebSites/SoccerClubWebSite/scripts/validationRoutines.js</path>
<path props="none" kind="file" item="add">https://mySvnServer.com/Repo1/WebSites/CriticalBusinessAppWebSite/scripts/validationRoutines.js</path> 
```

我遇到了一些我的文件名不是唯一的地方。

所以我不得不编写一个 Uri Segment Matcher 来尝试找到匹配项......通过向后处理 Uri。

例子。在上述 2 项中......我首先尝试了 URI 的最后一段。

```
validationRoutines.js 
```

我在那个字符串上有 2 个匹配项。因此，我不知道我关心的确切一个。我抓住父母文件夹并使用它。

```
scripts/validationRoutines.js 
```

还是两场比赛。

现在我添加第三个 uri 段（从右到左工作）

```
SoccerClubWebSite/scripts/validationRoutines.js 
```

现在我找到了一个独特的匹配。

所以我现在做的基本模板是：

(1) svn 差异 333:HEAD

（仅供参考，这会返回很多信息）。

(2)解析xml并将其推送到简单的DTO对象。

(3) 在该 xml 中查找“添加”或“修改”的项目，并使用基于上面列出的段逻辑的匹配系统。

(3b) 因为同一个文件可能已被修改多次（因此多次出现在 xml 中（但使用相同的头 svn-path）...我不得不做一个 GROUP BY（svn-path）。 LINQ group by 在这里工作得很好。

我仍然需要根据更多示例来测试我的逻辑。但是YOUCH，这不是微不足道的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T05:11:49.793

对于 CLI，它更多的是手工操作（或 gawk+grep+... 或解析 XML）

围绕 CLI 的一些迭代。

**关于 hello.txt 的故事，它出生在树干，以及他在树枝上的生活，并附有图片和评论**

```
svn log http://mayorat.ursinecorner.ru:8088/svn/Hello/branches/i18n/ -v --stop-on-copy -q
------------------------------------------------------------------------
r25 | lazybadger | 2010-09-14 20:59:35 +0600 (Вт, 14 сен 2010)
Changed paths:
   D /branches/i18n/Beaujour.txt
   A /branches/i18n/Buongiornor.txt (from /branches/i18n/Beaujour.txt:24)
   A /branches/i18n/Goededag.txt (from /branches/i18n/GuterTag.txt:24)
   D /branches/i18n/GuterTag.txt
------------------------------------------------------------------------
r23 | lazybadger | 2010-07-17 06:05:00 +0600 (Сб, 17 июл 2010)
Changed paths:
   A /branches/i18n/Beaujour.txt (from /branches/i18n/Hello.fr.txt:22)
   A /branches/i18n/GuterTag.txt (from /branches/i18n/Hello.de.txt:20)
   D /branches/i18n/Hello.de.txt
   D /branches/i18n/Hello.en.txt
   D /branches/i18n/Hello.fr.txt
   A /branches/i18n/Hello.txt (from /branches/i18n/Hello.en.txt:20)
------------------------------------------------------------------------
r20 | lazybadger | 2010-07-17 05:23:59 +0600 (Сб, 17 июл 2010)
Changed paths:
   A /branches/i18n/Hello.en.txt (from /branches/i18n/Hello.txt:19)
   D /branches/i18n/Hello.txt
------------------------------------------------------------------------
r19 | lazybadger | 2010-07-17 05:22:16 +0600 (Сб, 17 июл 2010)
Changed paths:
   A /branches/i18n/Hello.de.txt
   A /branches/i18n/Hello.fr.txt
------------------------------------------------------------------------
r18 | lazybadger | 2010-07-17 05:11:40 +0600 (Сб, 17 июл 2010)
Changed paths:
   A /branches/i18n (from /trunk:17)
------------------------------------------------------------------------ 
```

r18 - /trunk/hello.txt 现在必须标识为 /branches/i18n/hello.txt（在检测到“来自 /trunk”的更改路径字符串中）

r20 - 根据“来自/branches/i18n/Hello.txt”文件名是/branches/i18n/Hello.en.txt

r23 - 根据“从/branches/i18n/Hello.en.txt”文件名返回到/branches/i18n/Hello.txt

**XML 版本**

```
>svn log http://mayorat.ursinecorner.ru:8088/svn/Hello/branches/i18n/ -v -q --xml -r 18 -r 20 -r 23
<?xml version="1.0" encoding="UTF-8"?>
<log>
<logentry
   revision="18">
<author>lazybadger</author>
<date>2010-07-16T23:11:40.388125Z</date>
<paths>
<path
   action="A"
   prop-mods="true"
   text-mods="false"
   kind="dir"
   copyfrom-path="/trunk"
   copyfrom-rev="17">/branches/i18n</path>
</paths>
</logentry>
<logentry
   revision="20">
<author>lazybadger</author>
<date>2010-07-16T23:23:59.075625Z</date>
<paths>
<path
   prop-mods="false"
   text-mods="false"
   kind="file"
   action="D">/branches/i18n/Hello.txt</path>
<path
   prop-mods="false"
   text-mods="false"
   kind="file"
   copyfrom-path="/branches/i18n/Hello.txt"
   copyfrom-rev="19"
   action="A">/branches/i18n/Hello.en.txt</path>
</paths>
</logentry>
<logentry
   revision="23">
<author>lazybadger</author>
<date>2010-07-17T00:05:00.997500Z</date>
<paths>
<path
   prop-mods="true"
   text-mods="false"
   kind="file"
   copyfrom-path="/branches/i18n/Hello.fr.txt"
   copyfrom-rev="22"
   action="A">/branches/i18n/Beaujour.txt</path>
<path
   prop-mods="false"
   text-mods="false"
   kind="file"
   copyfrom-path="/branches/i18n/Hello.de.txt"
   copyfrom-rev="20"
   action="A">/branches/i18n/GuterTag.txt</path>
<path
   prop-mods="false"
   text-mods="false"
   kind="file"
   copyfrom-path="/branches/i18n/Hello.en.txt"
   copyfrom-rev="20"
   action="A">/branches/i18n/Hello.txt</path>
<path
   prop-mods="false"
   text-mods="false"
   kind="file"
   action="D">/branches/i18n/Hello.en.txt</path>
<path
   prop-mods="false"
   text-mods="false"
   kind="file"
   action="D">/branches/i18n/Hello.fr.txt</path>
<path
   prop-mods="false"
   text-mods="false"
   kind="file"
   action="D">/branches/i18n/Hello.de.txt</path>
</paths>
</logentry>
</log> 
```

在路径节点中检查`copyfrom-path`文件名或目录，并在同一节点`action="A"`参数中检查新文件名。对好的 XML-tree 解析器来说不是一件大事，但我更喜欢纯文本和眼睛

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T17:33:46.323

你通常做的是使用 TortoiseSVN 日志查看器。执行以下步骤：

*   在您确定文件所在或现在所在的目录上打开。在最坏的情况下，从根目录开始（如您的示例中所示）。
*   在搜索框中输入文件名的部分内容，请记住，这是一个正则表达式。因此，对于 search `MyFile01.txt`，输入`MyFile01\.txt`（在 the 之前使用反斜杠`.`以确保该点被视为字符，而不是任何字符）。
*   日志查看器现在列出了与您的文件有关的所有修订。您现在应该立即看到文件的移动，文件名本身以红色突出显示。移动本身在对话框中显示为与一个`delete`组合`add`（Subversion 没有移动状态）。

我做了一个例子，带有一个文件`readme.txt`，这个结果对话框（在创建和移动文件之后）看起来像这样：

![在此处输入图像描述](../Images/bd439109373ff9aff3efddf343d875f3.png)

如您所见，突出显示的文本（红色）显示所选版本的已删除文件（最后一行）和添加的文件（第二行），这是 TortoiseSVN 显示移动的方式。

有关详细信息，请参阅文档中的[过滤日志消息](http://tortoisesvn.net/docs/nightly/TortoiseSVN_en/tsvn-dug-showlog.html#tsvn-dug-showlog-filter)。

`svn log`使用命令也有类似的可能（请参阅[文档](http://svnbook.red-bean.com/en/1.7/svn-book.html#svn.ref.svn.c.log)为您提供的第一部分：

*   按日期和目录过滤
*   第二个（通过日志消息或文件名中的匹配过滤）你必须通过例如`grep`Unix / Linux / MacOS X中的命令来获得。所以这取决于你的操作系统（Windows？）和你对shell的技能。

# java - 在 java 中使用 GridBagLayout 时设置最大组件大小

> ID：15161332
> 
> 赞同：6
> 
> 时间：2013-03-01T15:34:37.473
> 
> 标签：java, swing, user-interface, gridbaglayout

我的问题如下：我试图让 JScrollPane 随窗口调整大小，水平达到一定大小，它应该停止尝试随窗口增长。

我可以用 GridBagLayout 做到这一点吗？如果是这样，如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T17:02:04.237

一种方法是`JPanel`用 a将滚动窗格包装在另一个滚动窗格中，`BoxLayout`并在滚动窗格上设置 BoxLayout 将强制执行的 MaximumSize：

包装：

![包装展示](../Images/edb271c5e3ccedbd3584ef84a72ef621.png)

拉伸（最大宽度已设置为 700 像素）： ![拉伸显示](../Images/ace73187da5f03396376394ac99c06c7.png)

```
import java.awt.Dimension;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.net.MalformedURLException;
import java.util.Arrays;
import java.util.Vector;

import javax.swing.BoxLayout;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.SwingUtilities;
import javax.swing.table.DefaultTableModel;

public class TestGridBagLayout2 {

    protected void initUI() throws MalformedURLException {
        final JFrame frame = new JFrame();
        frame.setTitle(TestGridBagLayout2.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        final JPanel panel = new JPanel(new GridBagLayout());
        Vector<Vector<String>> data = new Vector<Vector<String>>();
        for (int i = 0; i < 20; i++) {
            Vector<String> v = new Vector<String>();
            for (int j = 0; j < 1; j++) {
                v.add("Cell (" + (i + 1) + "," + (j + 1) + ")");
            }
            data.add(v);
        }
        DefaultTableModel model = new DefaultTableModel(data, new Vector<String>(
                Arrays.asList("Col-1"/*, "Col-2", "Col-3", "Col-4", "Col-5"*/)));
        JTable table = new JTable(model);
        JScrollPane scroll = new JScrollPane(table);
        scroll.setMaximumSize(new Dimension(700, Integer.MAX_VALUE));
        JPanel wrappingPanel = new JPanel(null);
        wrappingPanel.setLayout(new BoxLayout(wrappingPanel, BoxLayout.LINE_AXIS));
        wrappingPanel.add(scroll);
        GridBagConstraints gbc = new GridBagConstraints();
        gbc.weightx = 1.0;
        gbc.fill = GridBagConstraints.BOTH;
        panel.add(wrappingPanel, gbc);
        frame.add(panel);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    new TestGridBagLayout2().initUI();
                } catch (MalformedURLException e) {
                    e.printStackTrace();
                }
            }
        });
    }

} 
```

# objective-c - 在 UIImageView 上绘制路径 - Objective-c

> ID：15161333
> 
> 赞同：-1
> 
> 时间：2013-03-01T15:34:39.203
> 
> 标签：objective-c, cocoa-touch, quartz-2d

我在 UIView 中有一些圆圈、标签和按钮。我还有一个应该显示背景图片的 imageView。所以我希望圆圈（路径）位于 imageView 的顶部。标签和按钮位于图像视图的顶部，因为我在 IB 中如此排列它们。但是我应该怎么做才能把路径带到前面呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:38:16.623

你有两个选择，我相信：

1.  子类`UIImageView`和支持子视图。然后，您添加一个透明`UIView`子类作为子视图并在此子视图中绘制路径/任何内容。您的子类`UIImageView`需要管理此“路径子视图”的自动调整大小，这就像设置其框架以匹配图像视图一样简单，但是知道要覆盖哪些方法可能会很棘手。
2.  更新图像视图的背景图像中显示的图像以合成路径/图像上的任何内容。

# powershell - 在 Powershell 中执行 wmi 查询时函数失败

> ID：15161338
> 
> 赞同：0
> 
> 时间：2013-03-01T15:34:51.077
> 
> 标签：powershell, wmi

我正在尝试使用 powershell 从服务器获取远程注册表值。

我在网上找到了一些对我有用的代码：

```
$strComputer = "remoteComputerName"    
$reg = [mcrosoft.win32.registryKey]::openRemoteBaseKey('LocalMachine',$strComputer)
$regKey = $reg.OpenSubKey("Software\\Microsoft\\Windows\\CurrentVersion")
$regKey.getValue("ProgramFilesDir") 
```

但是当我尝试把它放在一个函数中时：

```
$strComputer = "remoteComputerName"

function getRegValue {
    param($computerName, $strPath, $strKey)
    $reg = [mcrosoft.win32.registryKey]::openRemoteBaseKey('LocalMachine',$computerName) #Errors out here
    $regKey = $reg.OpenSubKey($strPath)
    $regKey.getValue($strKey)
}

$a = "Software\\Microsoft\\Windows\\CurrentVersion"
$b = "ProgramFilesDir"
getRegValue($strComputer, $a, $b) 
```

错误：

```
Exception calling "OpenRemoteBaseKey" with "2" argument(s): "The endpoint format is invalid." 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T16:04:54.147

您应该按如下方式调用您的函数，因为当前格式会导致问题。

```
getRegValue $strComputer $a $b 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T18:14:09.600

为避免此类问题，您可以使用 PowerShell 的严格模式。当遇到不正确的语法（您的函数调用就是这种情况）时，此选项会引发异常。

```
function someFunction{
param($a,$b,$c)
Write-host $a $b $c
}

> someFunction("param1","param2","param3")
> # Nothing happens

> Set-strictmode -version 2
> someFunction("param1","param2","param3")

The function or command was called as if it were a method. Parameters should
be separated by spaces. For information about parameters, see the
about_Parameters Help topic.
At line:1 char:1
+ someFunction("param1","param2","param3")
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : InvalidOperation: (:) [], RuntimeException
    + FullyQualifiedErrorId : StrictModeFunctionCallWithParens 
```

# java - Wicket + Atmosphere + Guice

> ID：15161339
> 
> 赞同：2
> 
> 时间：2013-03-01T15:34:51.560
> 
> 标签：java, wicket, guice, atmosphere

我正在尝试配置 Atmosphere，这就是我将事件发布到 EventBus 时得到的

```
java.lang.IllegalStateException: MeteorServlet not defined in web.xml
at org.atmosphere.cpr.Meteor.build(Meteor.java:170) ~[atmosphere-runtime-1.0.8.jar:1.0.8]
at org.atmosphere.cpr.Meteor.build(Meteor.java:151) ~[atmosphere-runtime-1.0.8.jar:1.0.8]
at org.atmosphere.cpr.Meteor.build(Meteor.java:137) ~[atmosphere-runtime-1.0.8.jar:1.0.8]
at org.atmosphere.cpr.Meteor.build(Meteor.java:124) ~[atmosphere-runtime-1.0.8.jar:1.0.8]
at org.apache.wicket.atmosphere.AtmosphereBehavior.onResourceRequested(AtmosphereBehavior.java:107) ~[wicket-atmosphere-0.7.jar:0.7]
... 56 common frames omitted 
```

我使用 Wicket，这是 AjaxButton onSubmit 实现：

```
public void onSubmit(AjaxRequestTarget target, Form<?> form) {
      EventBus.get().post(message.getModelObject());
} 
```

我正在使用 Guice 配置 Atmosphere。在我的 ServletModule 实现中：

```
Map<String, String> params = new HashMap<String, String>();
            params.put("applicationClassName", "org.mycompany.MyWebApplication");
            params.put(ApplicationConfig.PROPERTY_SERVLET_MAPPING, "/session/**");
            params.put(ApplicationConfig.PROPERTY_SESSION_SUPPORT, "true");
            params.put(ApplicationConfig.WEBSOCKET_PROTOCOL, "org.atmosphere.websocket.protocol.EchoProtocol");
            params.put(ApplicationConfig.BROADCAST_FILTER_CLASSES, "org.apache.wicket.atmosphere.TrackMessageSizeFilter");
            filter("/session/**").through(AtmosphereFilter.class, params); 
```

这是我的大气.xml：

```
<atmosphere-handler context-root="/session/**"
    class-name="org.atmosphere.handler.ReflectorServletProcessor">
</atmosphere-handler> 
```

我想以编程方式配置过滤器，我可以使用大气过滤器吗？如果是，我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T11:39:07.293

问题已经解决了。不需要使用then`MeteorServlet`而不是an ，您应该将init 参数传递给.`AtmosphereFilter``atmosphere.xml``WicketFilter``MeteorServlet`

# javascript - Android - HTML 地理定位

> ID：15161341
> 
> 赞同：0
> 
> 时间：2013-03-01T15:34:56.057
> 
> 标签：javascript, android, geolocation

我无法在 Android 手机上使用我网站上的地理位置。

我有以下 javascript 代码：

```
if (navigator.geolocation) {
    console.log("true"); //gets logged
    navigator.geolocation.getCurrentPosition(sucess, error, {timeout: 5000});
} 
```

它总是以 error.code 3 和 error.message "Timeout expired" 超时。

这发生在 Android 的 2.x 和 4.x 版本上。

请记住，这不能与 phonegap 或类似功能结合使用。这是一个在浏览器中打开的普通旧网站。

该代码在 iPhone 上运行良好。

有没有。我的代码有问题还是android方面的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T11:11:00.933

我在我的android上使用了下面的代码没有问题。如果您想再次调用该函数，只需在坐标函数中设置超时。

```
if (navigator.geolocation) {
    console.log("true"); //gets logged
    navigator.geolocation.getCurrentPosition(coordinates);
} 

function coordinates(location) {
    latitude =  location.coords.latitude;
    longitude = location.coords.longitude;
} 
```

# sql-server - 插入视图，代替触发器，身份，多个表？

> ID：15161345
> 
> 赞同：2
> 
> 时间：2013-03-01T15:35:10.973
> 
> 标签：sql-server, view, triggers

这是我的表格（Entier = Integer // Caractère long variable = Varchar）：

[http://i.stack.imgur.com/lNjyy.jpg](https://i.stack.imgur.com/lNjyy.jpg)

![在此处输入图像描述](../Images/6c01274d525ae9c65ddcc0fdf2eefa0d.png)

我创建了一个视图 V_Enterprise(idContact, phoneNumber, email, name, city, adress)

我试图在该视图上创建一个触发器以允许用户更新视图：

```
CREATE TRIGGER test
ON V_Entreprise
INSTEAD OF INSERT
AS 
DECLARE @T_ContactId INT
BEGIN
    INSERT INTO T_Contact 
    SELECT i.phoneNumber, i.email
    FROM Inserted i 

    SELECT @T_ContactId = @@IDENTITY

    INSERT INTO T_Entreprise
    SELECT @T_ContactId, i.name, i.city, i.adress
    FROM Inserted i 
END ; 
```

正如我所料，它适用于简单的插入，但是当我一次添加几行时，它会失败，因为 @T_ContactId 只包含第一个 id。有人可以帮我解决吗？我觉得我应该使用 INNER JOIN 插入，但我不知道如何处理它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T15:41:32.113

好的，您永远不应该将标量变量设置为触发器中插入或删除的值。

请改用 OUTPUT 子句来获取您的 id 值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T16:56:28.783

此触发器使用游标上的循环，并且不需要表中有任何特定的唯一性；

```
CREATE TRIGGER test
ON V_Enterprise
INSTEAD OF INSERT
AS 
BEGIN
   DECLARE @name    VARCHAR(32)
   DECLARE @city    VARCHAR(32)
   DECLARE @address VARCHAR(32)
   DECLARE @pn      VARCHAR(32)
   DECLARE @email   VARCHAR(32)

   DECLARE cursor1 CURSOR FOR
      SELECT name,city,address,phoneNumber,email FROM inserted;

    OPEN cursor1;
    FETCH NEXT FROM cursor1 INTO @name, @city, @address, @pn, @email;
    WHILE @@FETCH_STATUS = 0
    BEGIN
      INSERT INTO T_Contact (phoneNumber,email) VALUES (@pn, @email);
      INSERT INTO T_Enterprise (idcontact,name,city,address) VALUES
         (@@IDENTITY,@name,@city,@address);
      FETCH NEXT FROM cursor1 INTO @name, @city, @address, @pn, @email;
    END
    CLOSE cursor1;
    DEALLOCATE cursor1;
END
GO 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-02T18:11:14.663

我不知道这是否是一种*好*方法，但您可以在不依赖唯一列或使用游标的情况下使用 OUTPUT 子句进行 INSERT。这种方法确实利用了内存中的临时表，该表可能会因大量插入而变大。

```
DECLARE @Table table( NewID BIGINT);

INSERT INTO T_Contact (PhoneNumber) 
    OUTPUT Inserted.ID
    INTO @Table
SELECT PhoneNumber FROM inserted WHERE 
;

INSERT INTO T_Enterprise (Contact_ID)
SELECT NewID FROM @Table; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T15:42:46.283

如果`phoneNumber`和`email`是唯一键，`T_Contact`那么您可以这样做：

```
CREATE TRIGGER test
ON V_Entreprise
INSTEAD OF INSERT
AS 
DECLARE @T_ContactId INT
BEGIN
    INSERT INTO T_Contact 
    SELECT i.phoneNumber, i.email
    FROM Inserted i 

    SELECT @T_ContactId = @@IDENTITY

    INSERT INTO T_Entreprise
    SELECT
        (SELECT idContact FROM T_Contact
            WHERE phoneNumber = i.phoneNumber AND email = i.email),
        i.name, i.city, i.adress
    FROM Inserted i 
END ; 
```

# ios - 如何计算具有固定宽度的 UILabel 的行数？

> ID：15161348
> 
> 赞同：12
> 
> 时间：2013-03-01T15:35:19.857
> 
> 标签：ios, uilabel

如何计算具有固定宽度和给定文本的 UILabel 的行数？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-01T15:58:13.987

此代码假定`label`具有所需的文本，并且其框架已设置为所需的宽度。

```
- (int)lineCountForLabel:(UILabel *)label {
    CGSize constrain = CGSizeMake(label.bounds.size.width, FLT_MAX);
    CGSize size = [label.text sizeWithFont:label.font constrainedToSize:constrain lineBreakMode:UILineBreakModeWordWrap];

    return ceil(size.height / label.font.lineHeight);
} 
```

**更新**：

如果您只想根据其文本和当前宽度确定标签所需的高度，则将其更改为：

```
- (CGSize)sizeForLabel:(UILabel *)label {
    CGSize constrain = CGSizeMake(label.bounds.size.width, FLT_MAX);
    CGSize size = [label.text sizeWithFont:label.font constrainedToSize:constrain lineBreakMode:UILineBreakModeWordWrap];

    return size;
} 
```

返回`size`的是包含标签的正确宽度和高度。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-01T15:41:06.837

首先使用从标签大小获取标签的高度`constrainedSize`

```
CGSize labelSize = [label.text sizeWithFont:label.font 
                            constrainedToSize:label.frame.size 
                                lineBreakMode:UILineBreakModeWordWrap];
CGFloat labelHeight = labelSize.height; 
```

一旦你有了标签高度，然后检查字体大小的行数，`fontsize`你的标签使用的大小在哪里。例如，它可以是 10 或取决于您的要求

```
CGSize sizeOfText = [label.text sizeWithFont:label.font 
                        constrainedToSize:label.frame.size 
                            lineBreakMode:UILineBreakModeWordWrap];
int numberOfLines = sizeOfText.height / label.font.pointSize; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-01T15:41:32.360

**您可以使用NSString上的****sizeWithFont:constrainedToSize:**方法计算显示字符串所需的垂直高度。给定该大小，您可以调整标签的大小以显示整个字符串。

# rest - 单个服务AngularJS的多个路由url

> ID：15161349
> 
> 赞同：14
> 
> 时间：2013-03-01T15:35:25.850
> 
> 标签：rest, angularjs

我有多个要映射到单个资源的 URL 路径。但是我不确定如何根据调用的函数更改 URL。例如，查询的 :dest 映射将是 /allProducts，但是 destroy 将类似于 /delete/:id

```
service.factory('ProductsRest', ['$resource', function ($resource) {
    return $resource('service/products/:dest', {}, {
        query: {method: 'GET', params: {}, isArray: true },
        save: {method: 'POST'},
        show: { method: 'GET'},
        edit: { method: 'GET'},
        update: { method: 'PUT'},
        destroy: { method: 'DELETE' }
    });
}]); 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-12-24T08:26:26.130

对于每个操作，您都可以覆盖 url 参数。特别是这个`url: {...}`论点。

**在您的示例中：**

```
service.factory('ProductsRest', ['$resource', function ($resource) {
    return $resource('service/products/', {}, {
        query: {method: 'GET', params: {}, isArray: true },
        save: {method: 'POST', url: 'service/products/modifyProduct'},
        update: { method: 'PUT', url: 'service/products/modifyProduct'}
    });
}]); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-03-01T15:48:51.733

我只需要将 url 作为参数放入。

```
service.factory('ProductsRest', ['$resource', function ($resource) {
    return $resource('service/products/:dest', {}, {
        query: {method: 'GET', params: {dest:"allProducts"}, isArray: true },
        save: {method: 'POST', params: {dest:"modifyProduct"}},
        update: { method: 'POST', params: {dest:"modifyProduct"}},
    });
}]); 
```

# php - load() 函数添加的内容在 ajax 操作后消失

> ID：15161360
> 
> 赞同：1
> 
> 时间：2013-03-01T15:36:06.340
> 
> 标签：php, html, mysql, ajax, load

我正在创建一个排序页面，它将显示数据库的内容，用户可以使用 listjs 对其进行排序。问题是当我按下任何按钮时，从数据库加载的内容就会消失。当我手动填充内容时，效果很好。有人可以帮我解决这个问题吗？

我的加载功能：

```
$(document).ready(function(){
     $(".list").load("../wp-content/php/sorting.php");
}); 
```

排序.php

```
<?php
mysql_connect("***", "***", "**") or die(mysql_error());
mysql_select_db("***");

$result = mysql_query("SELECT * FROM business");

while($row = mysql_fetch_array($result))
  {
 ?><li class="onebusiness"><a href="<?php
  echo $row['link'];?>"><img src="<?php
  echo $row['img'];?>" height="125" width="125"/><p class="name"><?php
  echo $row['name'];?></p><p class="category" style="display:none;"><?php
  echo $row['category'];?></p></a></li><?php
  }
mysql_close();
?> 
```

HTML：

```
<script src="../wp-content/js/filter/call-php.js" type="text/javascript"></script>
<script src="../wp-content/js/list/list-min.js" type="text/javascript"></script>
<div id="busineseslist">
    <input class="search" placeholder="Search Business" />
    <ul class="sort-by">
        <li class="sort btn" data-sort="name">Sort by name</li>
        <li class="sort btn" data-sort="category">Sort by category</li>
    </ul>
    <ul class="filter">
        <li class="btn" id="filter-none">Show all</li>
        <li class="btn" id="filter-something">Only show something</li>
        <li class="btn" id="filter-else">Only show something else</li>
    </ul>
    <div class="list"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:48:50.500

为什么你不这样做：

```
<script src="../wp-content/js/filter/call-php.js" type="text/javascript"></script>
<script src="../wp-content/js/list/list-min.js" type="text/javascript"></script>
<div id="busineseslist">
<input class="search" placeholder="Search Business" />
<ul class="sort-by">
    <li class="sort btn" data-sort="name">Sort by name</li>
    <li class="sort btn" data-sort="category">Sort by category</li>
</ul>
<ul class="filter">
    <li class="btn" id="filter-none">Show all</li>
    <li class="btn" id="filter-something">Only show something</li>
    <li class="btn" id="filter-else">Only show something else</li>
</ul>
<div class="list"><?php include '../wp-content/php/sorting.php'; ?></div>
</div> 
```

有了这个，你可以删除这一行：

```
<script src="../wp-content/js/filter/call-php.js" type="text/javascript"></script>//delete this 
```

我认为它的 js 具有以下代码：

```
$(document).ready(function(){
 $(".list").load("../wp-content/php/sorting.php");
}); 
```

因为使用 php 包含您不需要加载功能；）

------------------------已编辑------------- ---------------

在 wordpress 中，您可以通过以下方式包含文件：

将包含文件放在主题文件夹中，并在主题的 footer.php 中使用它：

```
 <?php include (TEMPLATEPATH . '/sorting.php'); ?> 
```

请参阅此参考链接： http: [//www.deluxeblogtips.com/2010/06/wordpress-include-template-files.html](http://www.deluxeblogtips.com/2010/06/wordpress-include-template-files.html)

您的 div 应如下所示：

转到“主题编辑器”，查找生成 html 的文件。编辑它并将这段代码放在 divs 标签之间：

```
<div class="list"><?php include (TEMPLATEPATH . '/sorting.php'); ?></div> 
```

萨卢多斯。

# linux - 替换文件中的行

> ID：15161365
> 
> 赞同：0
> 
> 时间：2013-03-01T15:36:32.437
> 
> 标签：linux, bash, shell, unix, sed

如何替换文件中以`aaa`我不知道该行在哪里的文本开头的行。

文件.txt：

```
sadasd_dsada = (aa,bb,cc)
aaa = (aa,bb,cc)
sadasd_dsada = (aa,bb,cc) 
```

代替：

```
aaa = (aa,bb,cc) 
```

为了：

```
aaa = (dd,ee,ff) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-01T15:39:57.747

最简单的方法是用 进行替换`sed`：

```
$ sed 's/^aaa = (aa,bb,cc)$/aaa = (dd,ee,ff)/' file
sadasd_dsada = (aa,bb,cc)
aaa = (dd,ee,ff)
sadasd_dsada = (aa,bb,cc) 
```

字符`^`和`$`分别匹配正则表达式中的行首和行尾，这意味着替换只会发生在整行匹配中。

一旦您对更改感到满意，请使用`-i`选项保存回文件。

```
$  sed -i 's/^aaa = (aa,bb,cc)$/aaa = (dd,ee,ff)/' file 
```

**编辑：**

```
$ cat file
sadasd_dsada = (aa,bb,cc)
aaa = (aa,bb,cc)
aaa = foo
sadasd_dsada = (aa,bb,cc)
aaa = bar

$ sed 's/^aaa = .*/aaa = (dd,ee,ff)/' file
sadasd_dsada = (aa,bb,cc)
aaa = (dd,ee,ff)
aaa = (dd,ee,ff)
sadasd_dsada = (aa,bb,cc)
aaa = (dd,ee,ff) 
```

# javascript - 这可以在没有 jquery 的情况下完成吗？

> ID：15161367
> 
> 赞同：0
> 
> 时间：2013-03-01T15:36:35.523
> 
> 标签：javascript, jquery

当我向右滚动 300 像素时如何显示警报？

```
$('.container').scroll(function () {
    if ($(this).scroll() === 300) { //
        alert("You've scrolled 300 pixels.");
    }
}); 
```

我可以在不使用 jquery 的情况下获得回调吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:40:27.737

您可以像 onclick on 元素一样使用 onscroll 事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T15:40:12.417

您可以绑定到 onscroll 方法：

```
window.onscroll = function() {
    if (window.pageYOffset == 300) {
        alert("You've scrolled 300 pixels.");
    }
}; 
```

# c# - 在其他项目中使用命名空间

> ID：15161368
> 
> 赞同：3
> 
> 时间：2013-03-01T15:36:36.097
> 
> 标签：c#, visual-studio-2010, namespaces

如屏幕截图所示，我有一个`SampleApp`使用命名空间`EDAM`和`Thrift`. 我想将功能复制`SampleApp`到另一个项目。

我是否必须在我的另一个项目中包含两个项目（`EDAM`和`Thrift`）？我可以只复制文件夹而不包括实际的项目文件吗？我可以将它们转换为某种 DLL 或其他东西吗？

![在此处输入图像描述](../Images/bb59d8163755f88fd1fd010b7fc4d736.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T15:38:39.050

您绝对应该从 SampleApp 项目中添加对 EDAM 和 Thrift 项目的引用。

为此，请按照下列步骤操作：

1.  右键单击 SampleApp 项目中的“参考”文件夹。

2.  选择“添加参考...”

3.  在弹出窗口中，转到“解决方案”选项卡。

4.  选择 EDAM 和 Thrift 项目。

在任何情况下，您都不应该只复制文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T15:40:01.357

不要复制文件夹，只需添加对项目的引用。即使项目是类库，您也不想复制 DLL，而是应该添加引用，以防更新 DLL：

[如何：在 Visual Studio 中添加或删除引用](http://msdn.microsoft.com/en-us/library/wkze6zky%28v=vs.80%29.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T15:43:09.360

如果“其他”项目在同一个解决方案中，您应该能够从该项目中引用 EDAM、Thrift 甚至 SampleApp，就像您为 SampleApp 设置引用一样。

如果这个“其他”项目将在一个新的解决方案中......我必须做一些研究和测试。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-01T15:43:21.287

Visual Studio 项目引用相当于直接引用程序集，但它有一个很大的优势：当你构建一个项目时，Visual Studio 也会负责构建它的依赖项目。

此外，Visual Studio 将阻止循环引用。

还有很多其他的优点，但这是一个很好的总结。

复制粘贴代码文件不是导入命名空间：这是复制代码！直接引用程序集是浪费时间和功能！

# tag-cloud - 标签云和谷歌标签管理器的区别？

> ID：15161375
> 
> 赞同：0
> 
> 时间：2013-03-01T15:37:08.630
> 
> 标签：tag-cloud, google-tag-manager

我喜欢[标签云](http://lotsofcode.github.com/tag-cloud/)，但在Google 标签管理器的[技术网络研讨会](http://www.youtube.com/watch?v=6H52Yierpa8)上，我无法在网页上找到标签。所以我需要了解其中的区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T23:46:50.957

不同种类的标签。“标签云”所指的“标签”是对内容的简短的通常是单个单词的文本描述。例如，您使用“google”“marketing”“tag-cloud”和“google-tag-manager”标记了这个问题。

由 Google 跟踪代码管理器管理的“标记”是用于 Google Analytics 等服务或其他为您提供 HTML 的服务的 HTML 标记，您需要将这些 HTML 包含在您的网站中才能正常工作。

两者没有任何关系，只是“标签”这个词有很多含义。

# php - 通过 PHP 中的 JSON API 获取 Youtube 订阅者数量

> ID：15161377
> 
> 赞同：3
> 
> 时间：2013-03-01T15:37:20.213
> 
> 标签：php, json, youtube-api

我想从此 JSON 文件中获取订阅者计数值：[http ://gdata.youtube.com/feeds/api/users/googlechrome?v=2&alt=json](http://gdata.youtube.com/feeds/api/users/googlechrome?v=2&alt=json)

这就是我所做的，但它不起作用。

```
$youtube_url = json_decode( file_get_contents( 'http://gdata.youtube.com/feeds/api/users/googlechrome?v=2&alt=json' ), true );
$youtube_data = $youtube_url['entry']['yt$statistics']['subscriberCount']; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-16T22:35:17.447

PHP代码：

```
function get_yt_subs($username) { 

$xmlData = file_get_contents('http://gdata.youtube.com/feeds/api/users/' . strtolower($username)); 
$xmlData = str_replace('yt:', 'yt', $xmlData); 

$xml = new SimpleXMLElement($xmlData); 

$subs = $xml->ytstatistics['subscriberCount']; 

return($subs); 

} 
```

使用示例： PHP 代码：

```
get_yt_subs('3moeslam') 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-02T08:43:00.333

我只是将 JSON 方法更改为 XML，一切对我来说都很好。我写的问题对@Matt Koskela 很有用，但对我没有用。无论如何，我会用这种方法去尝试，但我真的很想知道 JSON 方法的问题。

```
$youtube_url = file_get_contents( 'http://gdata.youtube.com/feeds/api/users/googlechrome'; 
$youtube_url = str_replace( 'yt:', 'yt', $youtube_url ); 
$youtube_data = $youtube_url->ytstatistics['subscriberCount']; 
```

# php - Sonata Admin Bundle 列表框排序顺序

> ID：15161378
> 
> 赞同：0
> 
> 时间：2013-03-01T15:37:21.773
> 
> 标签：php, symfony

我有 2 个实体，一个引用另一个具有多对一关系的实体。例如，用户和城市。我需要用户编辑页面中的城市列表框按名称排序，而不是按 ID 排序。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T18:59:31.360

在您的实体中，您可以指定 ordering 。

例子 ：

```
<?php
/**
 * @ManyToMany(targetEntity="Group")
 * @OrderBy({"name" = "ASC"})
 */
private $groups; 
```

# php - PHP通过表单传递变量

> ID：15161384
> 
> 赞同：0
> 
> 时间：2013-03-01T15:37:36.543
> 
> 标签：php, html

大家好，最近几天我一直在学习 PHP，并决定使用表单和单选按钮进行测试。通过使用提交按钮，我设法将变量传递到流程测试页面，该页面进行计算并将其发送回原始页面。虽然我在使用 GET 请求来接收和显示数据时遇到问题。我对这个问题的无知表示歉意。

进程测试.php

```
<?php

session_start();

$totalScore = 0;

if($_POST['q1'] == "a"){$totalScore += 20;}
if($_POST['q2'] == "c"){$totalScore += 20;}
if($_POST['q3'] == "b"){$totalScore += 20;}
if($_POST['q4'] == "a"){$totalScore += 20;}
if($_POST['q5'] == "c"){$totalScore += 20;}

header("Location: C1L4.php?totalscore = $totalScore");
exit();
?> 
```

C1L4.php（测试的来源）

```
<?
$totalScore=$_GET['totalscore'];
echo $totalScore;
?> 
```

如果可能的话，有人可以给我一个简短的描述，我在 GET 请求中做错了什么以及为什么没有定义变量将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T15:39:37.597

尝试改变

```
header("Location: C1L4.php?totalscore = $totalScore"); 
```

至

```
header("Location: C1L4.php?totalscore=$totalScore"); 
```

# javascript - 如何获得文本的真实高度？

> ID：15161385
> 
> 赞同：16
> 
> 时间：2013-03-01T15:37:38.780
> 
> 标签：javascript, jquery, text, height

参考这个例子
[http://jsfiddle.net/uzgJX/](http://jsfiddle.net/uzgJX/)

结果是包含文本的框的高度（如果您用鼠标选择文本，您可以看到的高度..）wichi 高于文本的实际高度。
有没有办法用 jquery 或纯 js 获得真正的高度？
在我尝试的示例中

```
text.height() 
```

和

```
text[0].getBoundingClientRect().height 
```

没有运气，它说 19px 而不是 14px

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-01T15:47:24.310

`font-size`取而代之的是为您的文本元素计算：

```
parseInt(window.getComputedStyle(text[0]).fontSize, 10); 
```

`font-size`表示字体的 em 正方形的大小。应该注意的是，虽然大多数字形将保持在 em 正方形的范围内，但有些*可能会*超出这些范围。不过，这通常不会发生在垂直维度上。

试一试：http: **[//jsfiddle.net/uzgJX/1/](http://jsfiddle.net/uzgJX/1/)**。提示：截图并复制到您最喜欢的图像编辑器中，然后选择与文本高度完全一致的像素，并与小提琴中给出的值进行比较。

# java - 我正在开发一个 Java Appet，它会淡化图像，然后在小程序窗口的不同位置再次显示它

> ID：15161387
> 
> 赞同：0
> 
> 时间：2013-03-01T15:37:40.003
> 
> 标签：java, applet

小程序工作正常，在显示图像和文本时，我希望图像在当前位置淡出但重新出现在另一个位置，然后稍后在同一位置重新加载。

我也想淡化和移动测试，

到目前为止，这是我的代码，请原谅我是新手！

```
import java.applet.*;
import java.awt.*;
import java.awt.image.*;
import java.net.*;

public class FadeImage extends Applet {
Image   img, faded;
int level, sign;
MediaTracker tracker;
AlphaFilter f;
FilteredImageSource fis;
String  msg2 = "University of Utah Football";

public void init() {
   setBackground(Color.red);
   setForeground(Color.black);

   level = 0;
 sign =  15;
 tracker = new MediaTracker(this);
 try { 
   img = getImage(new URL(getDocumentBase(), "uofu.jpg"));
   tracker.addImage(img,0);
   tracker.waitForID(0); 
   }
 catch (Exception e) {
   e.printStackTrace();
   }
 f = new AlphaFilter();
 f.setLevel(level);
 fis = new FilteredImageSource(img.getSource(), f) ;

 FadeThread ft = new FadeThread();
 ft.delayedFading(this, 20); 
 ft.start();
 }

public void paint(Graphics g) {
   Font myFont = new Font("Times New Roman", Font.BOLD, 24);
   g.setFont(myFont);
   g.setColor(Color.red);
   g.drawString(msg2, 10, 465);
   if (faded != null) {
    g.drawImage(faded,0,0,this);

    Font myFont2 = new Font("Times New Roman", Font.BOLD, 33);
    g.setFont(myFont2);

   setBackground(Color.black);
   setForeground(Color.white);
       g.setColor(Color.white);
       g.drawString("Get Season tickets now!", 10, 490);
    }
 }

public void fadeIt() {

 Graphics g = this.getGraphics();
 level += sign;
 if (level < 0) {
    level=0; 
    sign = sign * -1;
    }
 if (level > 255) {
    level=255; 
    sign =  sign * -1;
  try {
    Thread.sleep(1000);
    }
  catch (Exception e) {}
    }
 f.setLevel(level);
 if (faded != null) faded.flush();
 faded = this.createImage(fis);
 tracker.addImage(faded,0);
 try { 
   tracker.waitForID(0); 
   }
 catch (Exception ex) {
   ex.printStackTrace();
   }
 repaint();
 }

 class FadeThread extends Thread {
 FadeImage fadeApplet;
 int delay; 

 public void delayedFading(FadeImage f, int delay) {
   this.fadeApplet = f;
   this.delay = delay;
   }

 public void run() {
   while (true) {
     try {
       sleep(delay);
       fadeApplet.fadeIt();
       } 
     catch (Exception e) {
       e.printStackTrace();
       }
     }
   }
 }

class AlphaFilter extends RGBImageFilter {
  private int level;

  public AlphaFilter() { 
    canFilterIndexColorModel = true;
    }

  public void setLevel(int lev) {
    level = lev;
    }

  public int filterRGB(int x, int y, int rgb) {
    int a = level * 0x01000000;
    return (rgb &   0x00ffffff) | a;
    }
  }
} 
```

# testing - 测试直接使用服务的 AngularJS 指令

> ID：15161391
> 
> 赞同：3
> 
> 时间：2013-03-01T15:37:49.927
> 
> 标签：testing, angularjs, directive

我有一个使用服务的指令：

```
 MyDirective = (myService) ->

    compile: () ->
      stuff = myService.getStuff()

  MyDirective.$inject = ['MyService']

  app = A.module 'myApp'
  app.directive 'myDirective', MyDirective 
```

我希望能够测试 myService.getStuff 是否被调用。

对于我的控制器测试，我已经能够做到：

```
angular.mock.inject ($controller) ->
  myController = $controller 'MyController',
    $scope: $scope
    mockMe: mockMethod: () ->
      assert.ok()
      done() 
```

如果我对指令执行类似操作，则会收到以下错误：

```
angular.mock.inject ($directive) ->
  myDirective = $directive 'MyDirective',
    $scope: $scope
    myService: getStuff: () ->
      assert.ok()
      done()

Error: Unknown provider: $directiveProvider <- $directive 
```

有什么想法可以获取对指令的引用并将模拟注入其中吗？

在我做所有测试之前：

```
angular.mock.module 'myApp' 
```

我已经能够通过指令 -> 控制器 -> 服务而不是指令 -> 服务来解决这个问题。这是推荐的解决方案吗？例如

```
$scope.getStuff = (name, success) ->
  assert.ok true
  done()

$_compile(elm) $scope
$scope.$digest() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-11T12:07:36.903

这就是你在说的吗？

```
var scope, element;

angular.mock.inject(function ($compile, $rootScope) {
    scope = $rootScope;
    element = $compile('<my-directive />')(scope);
    scope.$digest();
}); 
```

从这里您可以对 进行更改`scope`，再次调用`$digest()`以查看在 中反映的那些更改`element`。如果通过注入`myDirective`依赖于`myService`您想要模拟的服务，您需要在调用之前执行以下操作`inject()`：

```
module('moduleWithDirective', function ($provide) {
    $provide.provider('myService', {
        $get: function () {
            return { /* service goes here. */ };
        }
    });
}); 
```

# c# - 我似乎无法在 WinRT BackgroundTask 中使用依赖注入

> ID：15161393
> 
> 赞同：2
> 
> 时间：2013-03-01T15:37:54.517
> 
> 标签：c#, dependency-injection, background, windows-runtime

我正在 Windows 运行时组件中实现 IBackgroundTask，我想向其中注入一个记录器依赖项，但应用程序在调用后台任务时退出。它甚至不会进入构造函数。我使用 Ninject 作为 DI 容器，在应用程序的其他任何地方使用它都没有问题。

我想做这样的事情：

```
private readonly ILog _logger;

public BackroundTask(ILog logger)
{
    _logger = logger;
}

    public async void Run(IBackgroundTaskInstance taskInstance)
    {
        var deferral = taskInstance.GetDeferral();

        try
        {
            // do something here
        }
        catch (Exception ex)
        {
            // log the error with injected logger...
            logger.ErrorFormat("{0}Error in QueueTimer {1}{0}",
                Environment.NewLine, ex.ToString());
        }

        deferral.Complete();
    } 
```

我尝试过的任何事情都没有成功，现在只需登录调用 .cs 文件中的 OnComplete 方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T23:31:46.097

在我创建 Windows Store 应用程序的有限经验中，您必须为后台任务提供默认构造函数；不会调用任何其他构造函数。

不过，希望我错了；能够传递后台任务的依赖项是可行的，但我不确定这是否有意义，因为您自己的代码甚至可能在任务开始时都没有运行。我认为在程序和任务之间进行通信的唯一方法是使用永久存储。

# php - PHP中的JS消息返回HTML页面

> ID：15161395
> 
> 赞同：0
> 
> 时间：2013-03-01T15:38:00.107
> 
> 标签：php, javascript, html, forms

HTML 代码

```
<div id="fourmstyle" class="fourm">

<form action="scripts/mail.php" method="post">

    <label for="name">Your Name <required>*</required>
        </label>
    <input type="text" name="Name" id="Name" placeholder="Joe Bloggs">

    <label for="email">Your Email <required>*</required>
        </label>
    <input type="text" name="Email" id="Email" placeholder="Joebloggs@example.com">

    <label for="telephone">Telephone
        </label>
    <input type="text" name="Telephone" id="Telephone">

    <label for="type">Type
        </label>
        <select name="Type">                
            <option value="Booking" selected>Booking</option>
            <option value="B&B">B&amp;B</option>
            <option value="Question">Question</option>
            <option value="General">General</option>
            <option value="Website Feedback">Website Feedback</option>
        </select></p>

         <label for="messsage">Message <required>*</required>
            </label>
         <textarea name="Message" id="Message" rows="5" cols="25">
         </textarea></p>

         <label for="btn">&nbsp;</label>
         <button type="submit" class="button">Submit
         </button>
         <br>&nbsp;<requireddescription> *(indicates that the information is required)
         </requireddescription>
</form> 
```

PHP 代码

```
<?php
if(isset($_POST)) 
{
    $name = (isset($_POST['Name'])) ? strip_tags($_POST['Name']) : NULL; //if name is set, strip html tags, and return it, otherwise set the string as NULL.
    $email = (isset($_POST['Email'])) ? strip_tags($_POST['Email']) : NULL; //same as above.
    $telephone = (isset($_POST['Telephone'])) ? preg_replace('~[^0-9\-]~','',$_POST['Telephone']) : NULL; //if telephone is set, remove any characters that are not a number, or a dash, othewise set as NULL.
    $type = (isset($_POST['Type'])) ? strip_tags($_POST['Type']) : NULL; //strip tags.
    $message = (isset($_POST['Message'])) ? strip_tags($_POST['Message']) : NULL; //strip tags.
    if(empty($name) || empty($email) || empty($message)) 
    { 
        //name, email, and message are required fields, if they are empty, tell the user to go back and fill them in.
        echo '<script type="text/javascript"> alert ("Please go back and fill in all required lines"); </script>';
    }
    else 
    { 
        //if the fields are NOT empty, proceed with the mailing.
        $formcontent=" From: $name \n Type: $type \n\n Message: $message \n\n Telephone: $telephone";
        $recipient = "joebloggs@example.com";
        $subject = "Website Contact Form: $type";
        $mailheader = "From: $email \r\n";  

        if(mail($recipient, $subject, $formcontent, $mailheader)) 
        { 
            //if mail is sent to the SMTP server successfully, echo 'thank you'.
            echo '<script type="text/javascript"> alert ("Thankyou '.$name.' we have submitted your message and we will get back to you as soon as possible, if you need to speak to us in the mean time please call 01983 872244 "); </script>';
        }
        else 
        { 
            //otherwise, tell the user it did not go through.
            echo '<script type="text/javascript"> alert ("I am sorry but there has been an error submitting your request please try again or call us on 01983 872244"); </script>';
        }
    }
}
?> 
```

好的，所以我上面的代码工作得很好，我有 JS 弹出警报。但是，当我确定 JS 警报时，它会将我带回 mail.php 脚本，而不是它源自的 HTML 页面，我将如何纠正这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:18:24.430

这应该有助于解决您当前的问题......但在未来，请尝试 AJAX 调用。

```
if(mail($recipient, $subject, $formcontent, $mailheader)) 
        { 
            //if mail is sent to the SMTP server successfully, echo 'thank you' and return to previous page.
            echo '<script type="text/javascript"> alert ("Thankyou '.$name.' we have submitted your message and we will get back to you as soon as possible, if you need to speak to us in the mean time please call 01983 872244 "); window.history.back(); </script>';
        }
        else 
        { 
            //otherwise, tell the user it did not go through.
            echo '<script type="text/javascript"> alert ("I am sorry but there has been an error submitting your request please try again or call us on 01983 872244"); window.history.back(); </script>';
        } 
```

**编辑**

忘记包括第一个实例

```
if(empty($name) || empty($email) || empty($message)) 
    { 
        //name, email, and message are required fields, if they are empty, tell the user to go back and fill them in and send them back.
        echo '<script type="text/javascript"> alert ("Please go back and fill in all required lines"); window.history.back()</script>';
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T15:44:28.510

当您提交到 mail.php 时，mail.php 将成为您的用户所在的新页面。如果您希望他们仍然在他们调用它的页面上，您需要通过 AJAX 提交它，或者告诉浏览器返回调用脚本的页面。要以第二种方式执行此操作，请将其添加到您的脚本回显中：

```
window.history.back() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T15:45:10.717

这取决于您在 HTML 页面中所做的工作：

1.  如果您的 PHP 是通过 ajax 调用的，那么您需要添加`return false`到启动该 ajax 调用的 javascript 函数中。

2.  如果您有一个表单，并且表单通过常规回发到操作的 url 提交是您处理该 PHP 页面的方式，那么您需要在 PHP 中添加一个重定向回该页面，同时将该警报消息存储在会话中，这样它就不会迷路，或者在 PHP 之后抛​​出一些 HTML。

# c# - 在 LINQ 查询中获取持续的错误指示而不是 Intellisense 帮助

> ID：15161401
> 
> 赞同：0
> 
> 时间：2013-03-01T15:38:21.683
> 
> 标签：c#, linq, visual-studio-2012, intellisense

我不是 Visual Studio 的新手，但我是 VS2012 和 LINQ 的新手。当我尝试构建查询时，我没有从 Intellisense 获得有关表字段名称的有用帮助，而是在下一行代码中指示了前瞻和错误。假设我有两行代码。当我尝试在其间插入一行时，VS 在新的第 3 行上画了红色下划线，因为第 2 行在我输入时仍然不完整。

这只是我在学习这些东西时正在开发的一个简单的控制台应用程序。我在文件中有一个“使用 System.Linq”。

请注意，在我的示例屏幕截图中，当我输入“where”、“foreach”时，它是如何用红色下划线的。当我在 c 之后键入句点时，我希望会弹出一个字段名称列表。

![代码](../Images/d44b750079d2c095a2add7b23a504a31.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:48:23.467

我被 Resharper 宠坏了，所以 Visual Studio 并没有给我同样的行为，但这里有一些提示可能会有所帮助：

1.  确保你有一个`using System.Linq;`声明。这并不总是很明显，因为它感觉像是`where`一个关键字并且不应该依赖于特定的包，但是由于 LINQ 依赖扩展方法的方式，这是必要的。
2.  尝试在您的 LINQ 语句后放置一个分号：

    ```
    var Test = from t in new[] {1, 2, 3} where t.  ; 
    ```

    这应该有助于避免前瞻问题，因为更明显的`foreach`是与此无关。

3.  考虑获得 Resharper。

# forms - Play2.1 中 inputRadioGroup 的 Scala 示例

> ID：15161402
> 
> 赞同：2
> 
> 时间：2013-03-01T15:38:22.483
> 
> 标签：forms, scala, radio-group, playframework-2.1

我正在浏览文档，但找不到如何在控制器中使用 inputRadioGroup 的示例。

我想我应该使用[这个](http://www.playframework.com/documentation/api/2.1.0/scala/index.html#views.html.helper.inputRadioGroup%24)助手。但是如何将它绑定到我的控制器中的表单？我想展示一个代表 1-5 年级的广播组

**控制器：**

```
object Sms extends Controller {  

val testForm: Form[Test] = Form (
    mapping(
      "firstname" -> nonEmptyText,
      "lastname" -> nonEmptyText,
      "password" -> tuple(
        "main" -> text(minLength = 6),
        "confirm" -> text
      ).verifying(
        "Passwords don't match", passwords => passwords._1 == passwords._2
      ),
      "email" -> tuple(
        "main" -> (text verifying pattern("^([0-9a-zA-Z]([-\\.\\w]*[0-9a-zA-Z])*@([0-9a-zA-Z][-\\w]*[0-9a-zA-Z]\\.)+[a-zA-Z]{2,9})$".r, error="A valid email is req")),
        "confirm" -> text
        ).verifying(
        "Emails don't match", emails => emails._1 == emails._2
      ),
      "grade" -> Do the magic happen here?
    )(Test.apply)(Test.unapply)
  )

case class Test(
                    firstname: String,
                    lastname: String,
                    password: String,
                    email: String,
                    grade: Int
                    )

} 
```

**看法：**

```
@inputRadioGroup(
testForm("grade"),
options = Seq("1"->1,"2"->2....and so on)
'_label -> "Grade",
'_error -> testForm("grade").error.map(_.withMessage("some error"))) 
```

我不知道该怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T17:07:25.143

在您的控制器中，您创建一个可能成绩的序列并将序列传递给您的视图。我更喜欢使用案例类`Grade`，然后将 Tuple2[String, String] 传递给视图。但我想这是一个见仁见智的问题。

```
case class Grade(value: Int, name: String)
private val grades = Seq(Grade(1, "Brilliant"), Grade(2, "Good"), Grade(3, "Ok")) 

val testForm: Form[Test] = Form (...
"grade"-> number
)(Test.apply)(Test.unapply)

def edit(id: Long) = Action {
  val model = ...obtain model
  Ok(views.html.edit(testForm.fill(model), grades))
}

def submit() = Action { 
  testForm.bindFromRequest.fold(
   formWithErrors => Ok(views.html.edit(formWithErrors, grades))
  }, test => {
    Logger.info("grade: " +  grades.find(_.value == test.grade).map(_.name))
    //save model...
    Redirect(...
  })
} 
```

在您看来，您将成绩 Seq 映射到 Tuple2[String, String] 以供`inputRadioGroup`

```
@(testForm: Form[Test], grades: Seq[Grade])

@inputRadioGroup(contactForm("grade"), 
options = grades.map(g => g.value.toString -> g.name), 
'_label -> "Grade") 
```

# c# - Regex.Replace() 中的正则表达式反向引用

> ID：15161403
> 
> 赞同：1
> 
> 时间：2013-03-01T15:38:24.347
> 
> 标签：c#

我正在使用正则表达式替换某些 html 代码中的值。它正确匹配 html 代码中的所有实例，但是当使用带有反向引用的 Regex.Replace() 时，它不会替换反向引用。

例如

```
html = "<td>[element]elementreference='oldvalue';[/element]</td>";

html = Regex.Replace(html, @"(['""#(=])" + elementReference.Key + @"(['""#)];|&)", "$1" +   elementReference.Value + "$2", RegexOptions.IgnoreCase); 
```

结果是：

```
"<td>[element]elementreference=$1newvalue'[/element]</td>" 
```

但如果我使用

```
html = "<td>[element]elementreference='oldvalue';[/element]</td>";

var regex = new Regex(@"(['""#(=])" + elementReference.Key + @"(['""#)];|&)", RegexOptions.IgnoreCase);
foreach (Match match in regex.Matches(html))
{
    html = html.Replace(match.Value, match.Groups[1] + elementReference.Value + match.Groups[2]);
} 
```

结果是

```
"<td>[element]elementreference='newvalue'[/element]</td>" 
```

这是我所期望的。

谁能解释为什么使用 Regex.Replace() 不起作用？

**编辑**

我不是在尝试替换内部 html，而是在尝试替换恰好位于 html 标记中的`'oldvalue'`部分。`[element]elementreference='oldvalue'[/element]`我的问题在于我试图通过使用反向引用来替换文本周围的撇号。这个撇号可以是多个值，这就是我使用反向引用的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:00:03.670

如果我尝试您的代码，也没有任何替换，因为您尝试替换的值后面没有分号。

如果您从正则表达式中删除分号，则两者都有效：

```
html = Regex.Replace(html, @"(['""#(=])" + "oldvalue" + @"(['""#)]|&)", "$1" + "asdf" + "$2", RegexOptions.IgnoreCase); 
```

与以下内容相同：

```
var regex = new Regex(@"(['""#(=])" + "oldvalue" + @"(['""#)]|&)", RegexOptions.IgnoreCase);
foreach (Match match in regex.Matches(html))
{
    html = html.Replace(match.Value, match.Groups[1] + "asdf" + match.Groups[2]);
} 
```

### 编辑：

当我尝试问题中的更新代码时，它工作正常：

```
string html;
KeyValuePair<string, string> elementReference = new KeyValuePair<string, string>("oldvalue", "newvalue");

html = "<td>[element]elementreference='oldvalue';[/element]</td>";

html = Regex.Replace(html, @"(['""#(=])" + elementReference.Key + @"(['""#)];|&)", "$1" + elementReference.Value + "$2", RegexOptions.IgnoreCase);

Console.WriteLine(html);

html = "<td>[element]elementreference='oldvalue';[/element]</td>";

var regex = new Regex(@"(['""#(=])" + elementReference.Key + @"(['""#)];|&)", RegexOptions.IgnoreCase);
foreach (Match match in regex.Matches(html)) {
  html = html.Replace(match.Value, match.Groups[1] + elementReference.Value + match.Groups[2]);
}

Console.WriteLine(html); 
```

输出：

```
<td>[element]elementreference='newvalue';[/element]</td>
<td>[element]elementreference='newvalue';[/element]</td> 
```

# jquery - 如何更新列表 在 MVC 4 中使用 jQuery

> ID：15161409
> 
> 赞同：3
> 
> 时间：2013-03-01T15:39:04.027
> 
> 标签：jquery, collections, asp.net-mvc-4

我目前正在尝试使用修改后的索引视图创建设置页面。目标是用户显示*所有设置，并且可以**在一个视图*中更改所有设置并*使用一个按钮*保存所有设置。应使用 Ajax 更新该设置。

**我目前的做法：**

*看法：*

```
<script language="javascript">
    $(function() {
        $('#editSettings').submit(function () {
            if ($(this).valid()) {
                $.ajax({
                    url: this.action,
                    type: this.method,
                    data: $(this).serialize(),
                    success: function (result)
                    {
                        alert(result);                       
                    }
                });
            }
            return false;
        });
    });
</script>

[ ... ]

@using (Ajax.BeginForm("Edit", "Settings", new AjaxOptions {UpdateTargetId = "result"}, new { @class = "form-horizontal", @id = "editSettings" } ))
{
    foreach (Setting item in ViewBag.Settings) 
    {
        @Html.Partial("_SingleSetting", item)
    }
    <input type="submit" value="modify" />
} 
```

*局部视图加载设置：*

```
 <div class="control-group">
            <label class="control-label">@settingName</label>
            <div class="controls">
                @Html.EditorFor(model => model.Value)
                <span class="help-inline">@settingDescription</span>
            </div>
        </div> 
```

*模型：*

```
[Table("Settings")]
public class Setting
{
    [Key]
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public int SettingId { get; set; }

    public string Name { get; set; }

    [Required(AllowEmptyStrings = true)]
    [DisplayFormat(ConvertEmptyStringToNull = false)]
    public string Value { get; set; }
} 
```

我正在使用设置 ViewBag`ViewBag.Settings = _db.Settings.ToList();`

jQuery 将数据解析为以下方法：

```
 [HttpPost]
    public ActionResult Edit(IList<Setting> setting)
    {
        Console.WriteLine(setting.Count);
        return Content(""); // Currently for testing purposes only. Breakpoint is set to setting.Count
    } 
```

`Count`抛出错误，因为设置是`null`. 我很不确定如何解决这个问题。

有人可以给我一个提示吗？

[这个](https://stackoverflow.com/questions/7419742/how-to-updating-ienumerablemyobject-in-mvc)关于 SO 的主题已经涵盖了在没有 Ajax 的情况下更新集合。但我不会明白这一点。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-04T07:51:23.163

您正在使用`Ajax.BeginForm`jQuery 再次使用并 ajaxifying 表单。那没有必要。但是您的代码的真正问题是部分输入字段的名称。您不尊重[`naming convention`](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)默认模型绑定器用于绑定到列表的方法。

让我们举一个完整的例子（为简单起见，去除了实体框架等所有噪音）：

模型：

```
public class Setting
{
    public int SettingId { get; set; }
    public string Name { get; set; }
    public string Value { get; set; }
} 
```

控制器：

```
public class SettingsController : Controller
{
    public ActionResult Index()
    {
        // No idea why you are using ViewBag instead of view model
        // but I am really sick of repeating this so will leave it just that way
        ViewBag.Settings = Enumerable.Range(1, 5).Select(x => new Setting
        {
            SettingId = x,
            Name = "setting " + x,
            Value = "value " + x
        }).ToList();
        return View();
    }

    [HttpPost]
    public ActionResult Edit(IList<Setting> setting)
    {
        // Currently for testing purposes only. Breakpoint is set to setting.Count
        return Content(setting.Count.ToString()); 
    }
} 
```

查看 ( `~/Views/Settings/Index.cshtml`):

```
@using (Html.BeginForm("Edit", "Settings", FormMethod.Post, new { @class = "form-horizontal", id = "editSettings" }))
{
    foreach (Setting item in ViewBag.Settings) 
    {
        @Html.Partial("_SingleSetting", item)
    }
    <input type="submit" value="modify" />
}

@section scripts {
    <script type="text/javascript">
        $('#editSettings').submit(function () {
            if ($(this).valid()) {
                $.ajax({
                    url: this.action,
                    type: this.method,
                    data: $(this).serialize(),
                    success: function (result) {
                        alert(result);
                    }
                });
            }
            return false;
        });
    </script>
} 
```

设置部分（`~/Views/Settings/_SingleSetting.cshtml`）：

```
@model Setting
@{
    var index = Guid.NewGuid().ToString();
    ViewData.TemplateInfo.HtmlFieldPrefix = "[" + index + "]";
}

<input type="hidden" name="index" value="@index" />

<div class="control-group">
    <label class="control-label">@Html.LabelFor(x => x.Name)</label>
    <div class="controls">
        @Html.EditorFor(model => model.Value)
    </div>
</div> 
```

请注意如何在部分内部更改 HtmlFieldPrefix 以便 html 帮助程序为您的输入字段生成正确的名称并遵守命名约定。

* * *

好吧，现在让我们剪掉**ViewCrap**并正确地做事（即当然使用视图模型）。

与往常一样，我们从编写视图模型开始：

```
public class MyViewModel
{
    public IList<Setting> Settings { get; set; }
} 
```

然后我们调整控制器：

```
public class SettingsController : Controller
{
    public ActionResult Index()
    {
        var model = new MyViewModel();

        // you will probably wanna call your database here to 
        // retrieve those values, but for the purpose of my example that
        // should be fine
        model.Settings = Enumerable.Range(1, 5).Select(x => new Setting
        {
            SettingId = x,
            Name = "setting " + x,
            Value = "value " + x
        }).ToList();
        return View(model);
    }

    [HttpPost]
    public ActionResult Edit(IList<Setting> setting)
    {
        // Currently for testing purposes only. Breakpoint is set to setting.Count
        return Content(setting.Count.ToString()); 
    }
} 
```

查看 ( `~/Views/Settings/Index.cshtml`):

```
@model MyViewModel

@using (Html.BeginForm("Edit", "Settings", FormMethod.Post, new { @class = "form-horizontal", id = "editSettings" }))
{
    @Html.EditorFor(x => x.Settings)
    <input type="submit" value="modify" />
}

@section scripts {
    <script type="text/javascript">
        $('#editSettings').submit(function () {
            if ($(this).valid()) {
                $.ajax({
                    url: this.action,
                    type: this.method,
                    data: $(this).serialize(),
                    success: function (result) {
                        alert(result);
                    }
                });
            }
            return false;
        });
    </script>
} 
```

Settings 模型的编辑器模板 ( `~/Views/Settings/EditorTemplates/Settings.cshtml`)：

```
@model Setting
<div class="control-group">
    <label class="control-label">@Html.LabelFor(x => x.Name)</label>
    <div class="controls">
        @Html.EditorFor(model => model.Value)
    </div>
</div> 
```

现在所有的作品都按照惯例。无需编写任何 foreach 循环。Index 视图中的`@Html.EditorFor(x => x.Settings)`调用分析视图模型的 Settings 属性并检测到它是某个其他模型的集合（`Setting`在本例中）。因此它将开始循环遍历该集合并搜索相应的编辑器模板 ( `~/Views/Settings/EditorTemplates/Setting.cshtml`)，该模板将自动为该集合的每个元素呈现。因此，您甚至不需要在视图中编写任何循环。除了简化您的代码之外，现在`Html.EditorFor(x => x.Value)`编辑器模板中的 将为输入字段生成正确的名称。

# java - 创建动态数组数组的最佳方法是什么

> ID：15161411
> 
> 赞同：1
> 
> 时间：2013-03-01T15:39:07.827
> 
> 标签：java, arrays, dynamic, hyperlink

我有问题。我需要创建一个数组数组。我已经阅读了一些关于在 Java 中创建动态数组的文章，但我不确定我应该选择哪种方式。

第一个是声明每个数组的最大可能大小`int arr[][][] = new int[10000][10000][10000];`，但在我的情况下，每个数组的大小取决于另一个数组的大小。我的意思是每个数组可能有一个最大数组的大小，如果我用这种方式声明我的数组数组，它​​应该占用大量内存大小。

方法是使用`ArrayList`. 但是我以前从未使用过它，而且我不知道声明`ListArray`of`ListArrays`以及`ListArray`of`ListArrays`的语法`ListArrays`。另外，我不确定是否应该使用它，因为`ListArray`包含对象作为元素，如果我有一个数组，比如`[10000][100][20]`我的内存使用和其他 pc 资源会发生什么？..

第三个问题是，在最好的情况下，我不希望对象或任何其他数据类型变量作为数组元素，而是链接到另一个数组元素的其他元素（我的意思是`arr[z][x][y] = @arrOfStr[i]`）。我从未在 Java 中使用过链接，我什至不知道是否可以将链接用作数组元素以及我应该如何声明我的数组。

所以伙计们，我真的需要帮助，因为我已经打破了我的大脑，试图用最少的电脑资源来解决这个问题。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:41:52.673

免责声明：这可能是一个糟糕的设计，因为很少有列表必须嵌套这么深，或者根本嵌套。您可能希望将其展平或使用`Set`or `Map`。我的猜测是`Map`，您从第三个列表中的内容中获得了哪些有意义的信息？好吧，如果“3rd”是有意义的，那么 a`map.add(3, myInt)`是访问它的更好方法。

尽管如此，语法还是很微妙的，所以这里有一个工作代码示例。

> 但是我以前从未使用过它，而且我不知道声明 ListArrays 的 ListArray 以及 ListArrays 的 ListArrays 的 ListArray 的语法。

所以有你的问题。

```
List<Integer> array1 = new ArrayList<>();  //java 7 only
List<List<Integer>> array2 = new ArrayList<>(); 
array2.add(array1);
// ... 
```

等等。

创建 10x10x10 列表并填充一些数字的示例代码：

```
List<List<List<Integer>>> list = new ArrayList<>();
int n = 0;
for(int i = 0; i < 10; i++) {
    List<List<Integer>> list2 = new ArrayList<>();
    list.add(list2);
    for(int j = 0; j < 10; j++) {
    List<Integer> list3 = new ArrayList();
    list2.add(list3);
        for(int k = 0; k < 10; k++) {
            list3.add(n++);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T14:33:01.693

更明确地说 - 这样做：

```
import java.awt.Point; 
```

`Point`通常用于图形案例，我怀疑您只需要一对整数。您可以[使用 Apache 的不可变点类](http://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/tuple/ImmutablePair.html)或滚动您自己的，如果您使用后者记得实现`hashCode()`.

```
Map<Point, Integer> map = new Hashmap<>(); 
```

在那里，只有一张地图，没有清单。我强烈怀疑您的代码中根本没有理由需要一个列表，而您只想通过它们的坐标检索事物。

# c# - Exchange Webservice Managed API - 锁定约会以进行删除

> ID：15161412
> 
> 赞同：0
> 
> 时间：2013-03-01T15:39:17.040
> 
> 标签：c#, exchange-server, exchangewebservices

是否可以使用 EWS 锁定从代码创建的约会，因此交换帐户的用户不能移动或更改有关约会的任何信息。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:09:53.240

不，你不能那样做。不是来自 EWS，不是来自 Outlook 对象模型，不是来自扩展 MAPI。

# android - Android: android:textOn 和 android:textOff on Switch 不工作

> ID：15161417
> 
> 赞同：2
> 
> 时间：2013-03-01T15:39:30.210
> 
> 标签：android

更改 的`android:textOn`和`android:textOff`属性`Switch`在我的 S3 上不起作用。我的开关上的标签总是显示*"ON"*和*"OFF"*。

[`Switch`文档](http://developer.android.com/reference/android/widget/Switch.html#attr_android%3atextOff)

```
<Switch
                        xmlns:android="http://schemas.android.com/apk/res/android"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:textOn="@string/on"
                        android:textOff="@string/off"
                        android:includeFontPadding="false"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:53:12.947

我刚刚在三星 Galaxy S3 上进行了测试，效果很好。

这是我的 XML

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <ToggleButton
        android:id="@+id/toggleButton1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/switch1"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="16dp"
        android:textOn="CHANGEMEON"
        android:textOff="CHANGEMOFF"
        android:text="ToggleButton" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-01T15:49:39.493

试试下面的代码：

```
 toggle=(ToggleButton)findViewById(R.id.tglbtn);
      toggle.setOnClickListener(new OnClickListener() {
      public void onClick(View v) {
       // TODO Auto-generated method stub
      if(toggle.isChecked())
      {
       Toast.makeText(getApplicationContext(), "The state is changed to on", Toast.LENGTH_LONG).show();
       }
        else
        {
          Toast.makeText(getApplicationContext(), "The state is changed to off", Toast.LENGTH_LONG).show();
         }
         }
         }); 
```

# javascript - mongo（1.4.4）请求有问题

> ID：15161418
> 
> 赞同：0
> 
> 时间：2013-03-01T15:39:30.477
> 
> 标签：javascript, node.js, mongodb, node-mongodb-native

当我这样查询时：

```
collection.find({ "position": { $in: [ 1, 2 ] } }).toArray().... 
```

当我使用`$and`or时，我得到了正确的结果，`$or`例如：

```
collection.find({ $or: [ { "position": 1 }, { "position": 2 }  ] }).toArray()... 
```

我总是得到空的结果

编辑：尝试在控制台中查询时，我得到：

```
> db.foo.find({"position":{$in:[1,2]}})
{ "name" : "Jon Doe", "position" : 1, "arrival" : "8:00", "_id" :ObjectId("512e2ed286d19b9e4d000001") }
{ "name" : "Jack Smith", "position" : 2, "arrival" : "10:00", "_id" : ObjectId("512e2ed286d19b9e4d000007") } 
```

> db.foo.find( { $or : [{"position":1},{"position":2}]} )

```
 //nothing here 
```

由此，我得到的印象是，我的代码还可以，问题出在其他地方……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T16:17:23.093

您需要使用较新版本的 Mongo。**版本 > 1.6**支持它。

请参阅[更改日志](http://blog.mongodb.org/post/908172564/mongodb-1-6-released)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T15:54:16.137

查询这样的事情，

```
> db.foo.find({"x":{$in:[1,2]}})
{ "_id" : ObjectId("513046c8ec1e5e38449f1789"), "x" : 1, "y" : 2 }
{ "_id" : ObjectId("5130cdfdf8378ccc2005bcf2"), "x" : 2 }
> 

> db.foo.find( { $or : [{"x":1},{"x":2}]} )
{ "_id" : ObjectId("513046c8ec1e5e38449f1789"), "x" : 1, "y" : 2 }
{ "_id" : ObjectId("5130cdfdf8378ccc2005bcf2"), "x" : 2 }
> 
```

# grails - Grails 资源未找到异常

> ID：15161422
> 
> 赞同：2
> 
> 时间：2013-03-01T15:39:41.410
> 
> 标签：grails, grails-2.0

我注意到我的生产日志文件中有一些例外，如下所示：

```
ERROR resource.ResourceMeta  - Resource not found: /LtNVgQynp0cINYtXjS33eA1ohCJO9gLXjm4wJuXKedJ.png
2013-03-01 04:58:43.276:WARN:oejs.ErrorPageErrorHandler:EXCEPTION 
javax.servlet.ServletException: java.lang.NullPointerException
... 
```

这是我应该关心的事情吗？考虑到错误发生的时间（通常是在半夜），我认为它们不是由真实用户的活动创建的，而是由机器人或爬虫创建的，但我仍然想了解潜在的问题以及如何解决防止它（或如何防止日志文件爆炸！）

我正在使用资源、缓存和压缩资源插件。

我在这方面取得了更多进展。如果 ResourceProcessor 找不到资源，它似乎会发送 404 响应。但是，我已将 404 映射到错误处理程序/控制器：

```
"404"(controller: "errors", action: "error404") 
```

该请求通过 PageFragmentCachingFilter.lookupController() 尝试获取控制器名称：

```
return getBean(controllerClass.getName()); 
```

但是，由于此错误并非源自控制器，因此我在 controllerClass 对象上得到了一个空指针

托比

完整的堆栈跟踪：

```
2013-03-01 04:58:43,253 [qtp1136524856-60] ERROR resource.ResourceMeta  - Resource not found: /LtNVgQynp0cINYtXjS33eA1oh
CJO9gLXjm4wJuXKedJ.png
2013-03-01 04:58:43.276:WARN:oejs.ErrorPageErrorHandler:EXCEPTION 
javax.servlet.ServletException: java.lang.NullPointerException
        at grails.plugin.cache.web.filter.AbstractFilter.logThrowable(AbstractFilter.java:116)
        at grails.plugin.cache.web.filter.AbstractFilter.doFilter(AbstractFilter.java:70)
        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
        at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1307)
        at org.codehaus.groovy.grails.web.mapping.filter.UrlMappingsFilter.processFilterChain(UrlMappingsFilter.java:364
)
        at org.codehaus.groovy.grails.web.mapping.filter.UrlMappingsFilter.doFilterInternal(UrlMappingsFilter.java:231)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
        at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1307)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:70)
        at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1307)
        at org.codehaus.groovy.grails.web.filters.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:69
)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
        at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1307)
        at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:453)
        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:137)
        at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:577)
        at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:231)
        at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1072)
        at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:382)
        at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:193)
        at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1006)
        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:135)
        at org.eclipse.jetty.server.Dispatcher.forward(Dispatcher.java:276)
        at org.eclipse.jetty.server.Dispatcher.forward(Dispatcher.java:103)
        at org.codehaus.groovy.grails.web.util.WebUtils.forwardRequestForUrlMappingInfo(WebUtils.java:312)
        at org.codehaus.groovy.grails.web.util.WebUtils.forwardRequestForUrlMappingInfo(WebUtils.java:277)
        at org.codehaus.groovy.grails.web.servlet.ErrorHandlingServlet.doDispatch(ErrorHandlingServlet.java:134)
        at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
        at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
        at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:735)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:848)
        at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:648)
        at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1336)
        at org.codehaus.groovy.grails.web.sitemesh.GrailsPageFilter.obtainContent(GrailsPageFilter.java:200)
        at org.codehaus.groovy.grails.web.sitemesh.GrailsPageFilter.doFilter(GrailsPageFilter.java:151)
        at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1307)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:369)
        at org.springframework.security.web.authentication.switchuser.SwitchUserFilter.doFilter(SwitchUserFilter.java:17
8)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
        at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.
java:109)
        at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityIntercepto
r.java:83)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
        at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:9
7)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
        at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:78)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
        at org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:112)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
        at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
        at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:187)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
        at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:187)
        at org.codehaus.groovy.grails.plugins.springsecurity.RequestHolderAuthenticationFilter.doFilter(RequestHolderAuthenticationFilter.java:40)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
        at org.codehaus.groovy.grails.plugins.springsecurity.MutableLogoutFilter.doFilter(MutableLogoutFilter.java:79)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
        at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:79)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
        at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:168)
        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
        at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1307)
        at org.codehaus.groovy.grails.web.servlet.mvc.GrailsWebRequestFilter.doFilterInternal(GrailsWebRequestFilter.java:69)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
        at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1307)
        at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:453)
        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:137)
        at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:577)
        at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:231)
        at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1072)
        at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:382)
        at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:193)
        at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1006)
        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:135)
        at org.eclipse.jetty.server.Dispatcher.forward(Dispatcher.java:276)
        at org.eclipse.jetty.server.Dispatcher.error(Dispatcher.java:112)
        at org.eclipse.jetty.servlet.ErrorPageErrorHandler.handle(ErrorPageErrorHandler.java:136)
        at org.eclipse.jetty.server.Response.sendError(Response.java:348)
        at org.eclipse.jetty.server.Response.sendError(Response.java:416)
        at javax.servlet.http.HttpServletResponseWrapper.sendError(HttpServletResponseWrapper.java:164)
        at org.eclipse.jetty.http.gzip.GzipResponseWrapper.sendError(GzipResponseWrapper.java:296)
        at javax.servlet.http.HttpServletResponse$sendError.call(Unknown Source)
        at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:42)
        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:108)
        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:116)
        at org.grails.plugin.resource.ResourceProcessor.processModernResource(ResourceProcessor.groovy:324)
        at org.grails.plugin.resource.ResourceProcessor$processModernResource.call(Unknown Source)
        at org.grails.plugin.resource.ProcessingFilter.doFilter(ProcessingFilter.groovy:39)
at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1307)
        at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
        at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1307)
        at org.eclipse.jetty.servlets.UserAgentFilter.doFilter(UserAgentFilter.java:77)
        at org.eclipse.jetty.servlets.GzipFilter.doFilter(GzipFilter.java:144)
        at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1307)
        at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:453)
        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:137)
        at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:559)
        at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:231)
        at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1072)
        at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:382)
        at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:193)
        at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1006)
        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:135)
        at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:255)
        at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:154)
        at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116)
        at org.eclipse.jetty.server.Server.handle(Server.java:365)
        at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:485)
        at org.eclipse.jetty.server.AbstractHttpConnection.headerComplete(AbstractHttpConnection.java:926)
        at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.headerComplete(AbstractHttpConnection.java:988)
        at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:635)
        at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:235)
        at org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:82)
        at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:627)
        at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:51)
        at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)
        at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543)
        at java.lang.Thread.run(Thread.java:722) 
```

# objective-c - 解析 nsmutabledictionary 会带来一个空的 uitable。我错过了什么？

> ID：15161426
> 
> 赞同：1
> 
> 时间：2013-03-01T15:39:53.247
> 
> 标签：objective-c, xcode, nsmutablearray, plist

我正在尝试显示远程服务器上 plist 中关键字“word”中的所有单词。清单如下：

```
<plist version="1.0">
<array>
<dict>
    <key>word</key>
    <string>wordhere</string>
    <key>definition</key>
    <string>definition Here</string>
    <key>partOfSpeech</key>
    <string>part of speech here</string>
    <key>crossReference</key>
    <string>cross reference here</string>
</dict>
<dict>
    <key>word</key>
    <string>wordhere2</string>
    <key>definition</key>
    <string>definition here2</string>
    <key>partOfSPeech</key>
    <string>part of speech here2</string>
    <key>crossReference</key>
    <string>cross reference here2</string>
</dict> 
```

**更新**可以忽略 plist。我重写了它，所以它是一个硬编码数组。虽然仍然是同样的错误。我已经访问了 plist 的 url，所以我知道它有效。但这是我的代码。出于某种原因，当我跑步时，它并没有进入我的 uitable。也许我错过了一些东西。我只是想要关键：填充词以形成合适的列表。任何帮助将不胜感激：D**已更新**

```
[super viewDidLoad];
self.title = @"Dictionary";
 [myArray addObject:[[NSMutableDictionary alloc] initWithObjectsAndKeys:@"word1", @"word", @"Definition1", @"definition", @"Part of speech1", @"partOfSpeech", @"cross Reference1", @"crossReference", nil]]; 
```

这是我的 UITableViewCell

```
static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier]
            ;
}
cell.textLabel.text = [[myArray objectAtIndex:indexPath.row] objectForKey:@"word"]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:50:55.823

给定`myArray`的是一个字典数组，那么这*应该*工作：

```
cell.textLabel.text = [[myArray objectAtIndex:indexPath.row] objectForKey:@"key"]; 
```

# objective-c - 你如何安排一个块在下一次运行循环迭代中运行？

> ID：15161434
> 
> 赞同：46
> 
> 时间：2013-03-01T15:40:11.690
> 
> 标签：objective-c, cocoa, cocoa-touch, grand-central-dispatch, nsrunloop

我希望能够`block`在下一次运行循环迭代中执行 a 。它是在下一个运行循环的开始还是结束时执行并不那么重要，只是延迟执行，直到当前运行循环中的所有代码都执行完。

我知道以下内容不起作用，因为它与主运行循环交错，因此我的代码可能会在下一个运行循环上执行，但可能不会。

```
dispatch_async(dispatch_get_main_queue(),^{
    //my code
}); 
```

我认为以下内容与上述问题相同：

```
dispatch_after(DISPATCH_TIME_NOW, dispatch_get_main_queue(), ^(void){
    //my code
}); 
```

现在我*相信*以下内容会起作用，因为它被放置在当前运行循环的末尾（如果我错了，请纠正我），这真的有效吗？

```
[self performSelector:@selector(myMethod) withObject:nil afterDelay:0]; 
```

有`0`间隔的计时器呢？文档指出：`If seconds is less than or equal to 0.0, this method chooses the nonnegative value of 0.1 milliseconds instead.`这是否转化为保证下一次运行循环迭代的执行？

```
[NSTimer scheduledTimerWithTimeInterval:0 target:self selector:@selector(myMethod) userInfo:nil repeats:NO]; 
```

这就是我能想到的所有选项，但我仍然没有更接近在下一次运行循环迭代中执行一个块（而不是调用一个方法），并保证它不会更早。

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2013-03-01T23:16:49.223

您可能不知道运行循环在每次迭代中所做的一切。（在我研究这个答案之前，我没有！）碰巧它`CFRunLoop`是[开源 CoreFoundation 包](http://opensource.apple.com/source/CF/CF-744.12/)的一部分，所以我们可以看看它到底意味着什么。运行循环大致如下所示：

```
while (true) {
    Call kCFRunLoopBeforeTimers observer callbacks;
    Call kCFRunLoopBeforeSources observer callbacks;
    Perform blocks queued by CFRunLoopPerformBlock;
    Call the callback of each version 0 CFRunLoopSource that has been signalled;
    if (any version 0 source callbacks were called) {
        Perform blocks newly queued by CFRunLoopPerformBlock;
    }
    if (I didn't drain the main queue on the last iteration
        AND the main queue has any blocks waiting)
    {
        while (main queue has blocks) {
            perform the next block on the main queue
        }
    } else {
        Call kCFRunLoopBeforeWaiting observer callbacks;
        Wait for a CFRunLoopSource to be signalled
          OR for a timer to fire
          OR for a block to be added to the main queue;
        Call kCFRunLoopAfterWaiting observer callbacks;
        if (the event was a timer) {
            call CFRunLoopTimer callbacks for timers that should have fired by now
        } else if (event was a block arriving on the main queue) {
            while (main queue has blocks) {
                perform the next block on the main queue
            }
        } else {
            look up the version 1 CFRunLoopSource for the event
            if (I found a version 1 source) {
                call the source's callback
            }
        }
    }
    Perform blocks queued by CFRunLoopPerformBlock;
} 
```

您可以看到有多种方法可以挂接到运行循环。`CFRunLoopObserver`您可以为您想要的任何“活动”创建一个被调用的对象。您可以创建版本 0`CFRunLoopSource`并立即发出信号。您可以创建一对连接的`CFMessagePorts`，将一个包装在版本 1`CFRunLoopSource`中，然后向其发送消息。您可以创建一个`CFRunLoopTimer`. 您可以使用`dispatch_get_main_queue`或对块进行排队`CFRunLoopPerformBlock`。

您需要根据调度块的时间以及需要调用它的时间来决定使用哪些 API。

例如，触摸是在版本 1 源中处理的，但如果您通过更新屏幕来处理触摸，则在提交核心动画事务之前不会实际执行更新，这发生在`kCFRunLoopBeforeWaiting`观察者中。

现在假设您想在处理触摸时安排块，但您希望它在事务提交后执行。

`CFRunLoopObserver`你可以为活动添加你自己的`kCFRunLoopBeforeWaiting`，但是这个观察者可能会在 Core Animation 的观察者之前或之后运行，这取决于你指定的顺序和 Core Animation 指定的顺序。（Core Animation 当前指定了 2000000 的顺序，但没有记录，因此可能会更改。）

为了确保你的块在 Core Animation 的观察者之后运行，即使你的观察者在 Core Animation 的观察者*之前*运行，也不要在你的观察者的回调中直接调用块。相反，`dispatch_async`此时使用将块添加到主队列。将块放入主队列将强制运行循环立即从其“等待”中唤醒。它将运行任何`kCFRunLoopAfterWaiting`观察者，然后它将耗尽主队列，此时它将运行您的块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-01-25T13:08:11.183

Rob 的回答很棒而且内容丰富。我不是想取代它。

只是阅读[UIView 文档](https://developer.apple.com/documentation/uikit/uiview/1622515-animatewithduration?language=objc)，我发现：

> **完成**
> 
> 动画序列结束时要执行的块对象。该块没有返回值，并采用一个布尔参数，该参数指示动画是否在调用完成处理程序之前实际完成。如果动画的持续时间为 0，则在下一个 run loop 循环开始时执行此块。此参数可能为 NULL。

所以一个简单的解决方案是：

```
UIView.animate(withDuration: 0) {
    // anything
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T16:25:55.937

我不相信有任何 API 可以让您保证代码在下一个事件循环轮次中运行。我也很好奇为什么你需要保证没有其他东西在循环上运行，特别是主要的。

我还可以确认使用 perforSelector:withObject:afterDelay 确实使用了基于 runloop 的计时器，并且在功能上与 dispatch_get_main_queue() 上的 dispatch_async'ing 具有相似的行为。

编辑：

实际上，在重新阅读您的问题后，听起来您只需要完成*当前*的runloop 即可。如果这是真的，那么 dispatch_async 正是你所需要的。事实上，上面的所有代码都保证了*当前*的runloop 循环将完成。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-05-31T08:07:17.787

mainQueue 上的 dispatch_async 是一个很好的建议，但它不会在下一个运行循环中运行，而是插入到循环中的当前运行中。

要获得您所追求的行为，您需要采用传统方式：

```
[self performSelector:@selector(myMethod) withObject:nil afterDelay:0]; 
```

这也带来了额外的优势，即可以使用 NSObject 的 cancelPreviousPerforms 取消它。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-05-31T08:32:47.250

我自己写了一个[NSObject 类别](https://github.com/gradha/ELHASO-iOS-snippets/blob/master/src/NSObject%2BELHASO.m)，它接受一个可变的延迟值，基于[另一个 stackoverflow 问题](https://stackoverflow.com/questions/4007023/blocks-instead-of-performselectorwithobjectafterdelay)。通过传递零值，您可以有效地使代码在下一次可用的 runloop 迭代中运行。

# netsuite - 已保存的搜索 - 用引号括起来的电子邮件字段

> ID：15161436
> 
> 赞同：0
> 
> 时间：2013-03-01T15:40:15.170
> 
> 标签：netsuite

我们目前已保存搜索设置以从 NetSuite 中提取库存。这些保存的搜索通过电子邮件发送，报告以 CSV 文件的形式发送。我们需要将要在 CSV 中发送的字段值加上引号。

例如：

如果我们只是做一个正常的保存搜索，我们的报告看起来像：

SKU, 数量 ABC123, 5

如果我们将结果字段设置为公式（文本）字段，公式如下：

Concat('"', Concat({some_field}, '"'))

报告中的输出（在浏览器中）如下所示： Sku, Qty "ABC123", 5

我们遇到的问题是，在使用公式的版本中，当文件实际上是使用预定信息通过电子邮件发送时，它被导出到 CSV 并且 CSV 看起来像这样：

天空, 数量 """ABC""", 5

Netsuite 在我的出口报告中转义了我的报价。

我如何创建它，以便发送时的 CSV 看起来像这样：Sky, Qty "ABC123", 5

# perl - 什么是找不到变量的正确循环/条件选项？

> ID：15161439
> 
> 赞同：0
> 
> 时间：2013-03-01T15:40:24.657
> 
> 标签：perl, bioinformatics

我正在三个文本文件中搜索四个特定基因名称之一（存储在 中`$var#`）。找到后，它会将在基因名称后找到的值添加到计数中。然后，我们通过总计`$count_exp#`并除以所有文件中的出现次数来平均该值。

**当在每个文件中找不到基因名称时，让用户知道的正确方法是什么？我在处理这个循环/条件的流程时遇到了困难。**

这是处理三个文本文件之一的代码片段......

```
 foreach $hyperosmotic(@hyperosmotic)
{
    @hyperosmotic1=split(/\t/,$hyperosmotic);
    $name=$hyperosmotic1[0];
    $exp=$hyperosmotic1[1];
    chomp $name;
    chomp $exp;
    if ($name eq $var1)
    {
    $count_exp1 = $count_exp1 + $exp;       
    $count_var1 = ++$count_var1;    
    }
    elsif ($name eq $var2)
    {
    $count_exp2 = $count_exp2 + $exp;
    $count_var2 = ++$count_var2;    
    }
    elsif ($name eq $var3)
    {
    $count_exp3 = $count_exp3 + $exp;
    $count_var3 = ++$count_var3;    
    }
    elsif ($name eq $var4)
    {
    $count_exp4 = $count_exp4 + $exp;
    $count_var4 = ++$count_var4;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T15:56:03.677

你基本上想使用数组：

（和`use strict; use warnings;`）

```
my @count_var = (0)x4;
my @count_exp = (0)x4;
my @var = ($var1, $var2, ...);

HYPEROSMOTIC:
for my $hyperosmotic (@hyperosmotic) {

    my ($name, $exp) = split /\t/, $hyperosmotic;

    for my $i (0 .. $#var) {
      if ($name eq $var[$i]) {
        $count_exp[$i] += $exp;
        $count_var[$i]++;
        next HYPEROSMOTIC; # jump into next iteration of the labeled loop
      }
    }

    # this code is only reached if no var matched:
    die qq[I don't have a var for name "$name"];
    # That just threw a fatal error. You may want to do something different.
} 
```

您可以通过使用哈希来提高效率：

```
my %counts = (
  $var1 => {exp => 0, var => 0},
  $var2 => {exp => 0, var => 0},
  $var3 => {exp => 0, var => 0},
  $var4 => {exp => 0, var => 0},
);

for my $hyperosmotic (@hyperosmotic) {
  my ($name, $exp) = split ...;
  if (my $count = $counts{$name}) {
    $count->{exp} += $exp;
    $count->{var}++;
  } else {
    die qq[I don't have a var for name "$name"];
  }
} 
```

# sql - 组合键的唯一组合

> ID：15161443
> 
> 赞同：0
> 
> 时间：2013-03-01T15:40:32.467
> 
> 标签：sql, sql-server, database, tsql

我想用复合键创建表，其组合必须是唯一的。

例如，

```
CREATE TABLE [dbo].[TEST3](
    [field1][int] NOT NULL,
    [field2][int] NOT NULL
PRIMARY KEY (field1,field2)
)
GO 
```

行：

```
field1    field2
----------------
   1        2
   2        1 
```

如何防止此类行为？`2,1`当用户将行（）插入已经有行（`1,2`）的表时，我需要出错

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T15:46:28.530

您可能可以使用用户定义的类型来做到这一点，但恕我直言，这听起来像是一个糟糕的设计，并且可能是一个 XY 问题。

如果您尝试创建一个多对多表（例如，共同朋友的表），我建议您使用检查约束来始终确保`field1`严格小于`field2`.

您甚至可以更进一步，要求使用存储过程来插入行或创建`INSTEAD OF INSERT`触发器。这将为您将行按正确的顺序排列，这样您就不必依赖前端知道列的顺序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T15:53:24.670

一些插入（和更新）触发器将是可能的解决方案，即

```
create trigger prevent 
on TEST3 
for insert 
as 
if (select count(1) 
    from TEST3, inserted 
    where TEST3.field1=inserted.field2 and TEST3.field2=inserted.field1) > 0  
/* Cancel the insert and print a message.*/
  begin
    rollback transaction 
    print "Failed." 
  end  
/* Otherwise, allow it. */
else
  print "Added!" 
```

# rest - Spring MVC @ModelAttribute 与 REST 不兼容

> ID：15161445
> 
> 赞同：0
> 
> 时间：2013-03-01T15:40:38.220
> 
> 标签：rest, spring-mvc

我正在使用 RESTful 请求开发一个新的 Spring MVC 应用程序。该应用程序执行标准数据库加载对象、绑定值和保存。为了不丢失表单上不可用的对象值，我使用@ModelAttribute 方法在绑定之前预加载对象。

使用 URL 加载代理时

`/agency/418`

我的@ModelAttribute 方法现在可以学习“418”ID。我的理解是只能处理常规请求属性，所以我的 URL 需要是

`/agency/418?id=418`

这有点打破了 RESTful 模式。发布数据时也是如此。

有人可以评论这个观察吗……我错过了什么吗？

谢谢西蒙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T23:46:05.017

您可以很好地使用路径变量来初始化模型属性：

```
@controller
public controller {
   @modelattribute("model")
   public Entity initentity(@pathvariable integer id) {
     return dao.getentity(id);
   }

   @requestmapping("/{id}")
   public String somerequest(@modelattribute("model") Entity entity) {
      ....
   }      
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T19:35:20.520

我们放弃了在 Spring 2 中使用 @ModelAttribute 替换过去的“formBackingObject”的想法。相反，我们使用普通表单对象类进行表单绑定，然后将值复制到持久实体。表单对象可以由 Spring 即时创建，因此我们不再需要 @ModelAttribute 来加载数据库。该主题包含在[Spring MVC 是否需要将实体复制/粘贴到 FormObject 中？](https://stackoverflow.com/questions/15221194/does-spring-mvc-require-copy-paste-of-entity-to-formobject).

# asp.net-mvc - 如何使用 FormMethod.Post 而不是从查询字符串将四个文本框值之一从视图发布到控制器？

> ID：15161447
> 
> 赞同：0
> 
> 时间：2013-03-01T15:40:46.630
> 
> 标签：asp.net-mvc, razor

我有一个带有四个文本框（ID、batchID、EmployeeNumber、RefNumber）的搜索页面，它们都是数字。我不想使用查询字符串将这些值中的任何一个发送到控制器。所以我正在使用 Form.Post 方法，如下所示：

@using (Html.BeginForm("Details", "Search", FormMethod.Post, new { @id = Model.id }))

但我想让它成为全球性的，以便根据用户用于搜索的文本框，该值应该被发送到控制器并且如果可能的话它也是类型（比如他们输入了 ID 或 batchID 或....），以便它我将很容易相应地搜索数据库。请有人帮忙。

仅供参考：我的路线在 global.asax 中看起来像这样

```
routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        ); 
```

我实际上正在考虑从我进行所有条件检查的javascript方法发送值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:51:44.373

您可以定义一个视图模型：

```
public class SearchViewModel
{
    public int? Id { get; set; }
    public int? BatchID { get; set; }
    public int? EmployeeNumber { get; set; }
    public int? RefNumber { get; set; }
} 
```

然后让您发布的控制器操作将此视图模型作为参数，您将能够检索用户在文本框中输入的值：

```
[HttpPost]
public ActionResult Details(SearchViewModel model)
{
    if (!ModelState.IsValid)
    {
        return View(model);
    }

    if (model.Id != null)
    {
        // the user entered something into the textbox containing the id
    }

    if (model.BatchId != null)
    {
        // the user entered something into the textbox containing the batch id
    }

    ...
} 
```

# php - 使用php和sql会话的在线测验系统

> ID：15161448
> 
> 赞同：0
> 
> 时间：2013-03-01T15:40:48.610
> 
> 标签：php, mysql, session, random

我目前正在开发一个在线测验系统，该系统将值用户答案存储在数据库中，但只有分数而不是问题。在测验页面上，使用 php 的随机函数从 10 个问题中选择一个问题。我正在为用户登录创建会话每次并在会话变量中存储变量..请帮助这个网络世界的新手..

我面临以下问题：-

1-现在，每当我尝试将答案存储在数据库中时，它都会增加一次，如果刷新页面，它会再次增加一次，这就是我刷新的时间..这是可耻的，有什么办法可以避免这种情况并增加标记列用户只有一次。

2.第二件事是我如何在测验页面中选择下一个问题，即每次选择一个 1/10 问题而不刷新页面并同时隐藏其他问题，就像我们在使用 php 的测验系统中所做的那样，而不使用随机函数

我的代码是——在页面上使用 4 个问题——

```
<?php
session_start();
$username=$_SESSION['username'];
$total=$_SESSION['total'];
$q1=isset($_POST['q1']);
$q2=isset($_POST['q2']);
$q3=isset($_POST['q3']);
$q4=isset($_POST['q4']);
$q5=isset($_POST['q5']);
$full=30;
echo 'Welcome '.$username;
echo $total;

function quiz(){
$set=rand(1,5);
$total=0;

echo $set;
 switch($set)
 {

 case 1:

 echo '<form action="quiz.php" method="post" align="center">
<table align="center">
<tr><label name="question" id="ques"><h1 >ISM stands for?</h1></label><tr>
<tr>
<td align="right"><input type="radio" name="q1" value="A"></td>
<td>Indian School Of Mines</input><br></td>
</tr>

<tr>
<td align="right"><input type="radio" name="q1" value="B"></td>
<td >Indian Science Of Mines</input><br></td>
</tr>

<tr>
<td align="right"><input type="radio" name="q1" value="C"></td>
<td>Indian School Of Mineral</input><br></td>
</tr>

<tr >
<td align="right"><input type="radio" name="q1" value="D"></td>
<td>Indian School Of Machines</input><br></td>
</tr>

<tr >

<td align="center"><br><input type="submit" name="snext" value="Save/Next"><br></td>
</tr>

</form>';

if(isset($_POST['q1'])=='A')
{
$total =$total + 1;
include ('process.php');

}
else{

}

break;

case 2:

 echo '<form action="quiz.php" method="post" align="center" id="">
<table align="center">
<tr><label name="question" id="ques"><h1 >HTML stands for?</h1></label><tr>
<tr>
<td align="right"><input type="radio" name="q2" value="A"></td>
<td>Indian School Of Mines</input><br></td>
</tr>

<tr>
<td align="right"><input type="radio" name="q2" value="B"></td>
<td >Indian Science Of Mines</input><br></td>
</tr>

<tr>
<td align="right"><input type="radio" name="q2" value="C"></td>
<td>Indian School Of Mineral</input><br></td>
</tr>

<tr >
<td align="right"><input type="radio" name="q2" value="D"></td>
<td>Indian School Of Machines</input><br></td>
</tr>

<tr >

<td align="center"><br><input type="submit" name="snext" value="Save/Next"><br></td>
</tr>

</form>';

if(isset($_POST['q2'])=='C')
{
$total =$total + 1;
include ('process.php');

}
else{

}
break;

case 3:

 echo '<form action="quiz.php" method="post" align="center">
<table align="center">
<tr><label name="question" id="ques"><h1 >CSS stands for?</h1></label><tr>
<tr>
<td align="right"><input type="radio" name="q3" value="A"></td>
<td>Indian School Of Mines</input><br></td>
</tr>

<tr>
<td align="right"><input type="radio" name="q3" value="B"></td>
<td >Indian Science Of Mines</input><br></td>
</tr>

<tr>
<td align="right"><input type="radio" name="q3" value="C"></td>
<td>Indian School Of Mineral</input><br></td>
</tr>

<tr >
<td align="right"><input type="radio" name="q3" value="D"></td>
<td>Indian School Of Machines</input><br></td>
</tr>

<tr >

<td align="center"><br><input type="submit" name="snext" value="Save/Next"><br></td>
</tr>

</form>';
if(isset($_POST['q3'])=='D')
{
$total =$total + 1;
include ('process.php');

}
else{

}
break;

case 4:

 echo '<form action="quiz.php" method="post" align="center">
<table align="center">
<tr><label name="question" id="ques"><h1 >PHP stands for?</h1></label><tr>
<tr>
<td align="right"><input type="radio" name="q4" value="A"></td>
<td>Indian School Of Mines</input><br></td>
</tr>

<tr>
<td align="right"><input type="radio" name="q4" value="B"></td>
<td >Indian Science Of Mines</input><br></td>
</tr>

<tr>
<td align="right"><input type="radio" name="q4" value="C"></td>
<td>Indian School Of Mineral</input><br></td>
</tr>

<tr >
<td align="right"><input type="radio" name="q4" value="D"></td>
<td>Indian School Of Machines</input><br></td>
</tr>

<tr >

<td align="center"><br><input type="submit" name="snext" value="Save/Next"><br></td>
</tr>
</table>
</form>';
if(isset($_POST['q4'])=='D')
{
$total =$total + 1;
include ('process.php');

}
else{

}
break;

default:

Echo "This is quiz application";

break;

}

}

?>

<html>
<head>
</head>

<body>
<?php echo quiz(); ?>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T15:53:51.417

就像开始的一个小提示：

利用

```
if(isset($_POST['q1']) && $_POST['q1']=='A'){
  ...
} 
```

`isset($_POST['q1'])`只是检查是否`$_POST['q1']`设置。

# java - 来自用户的每个请求都调用一个新的 getConnection()？

> ID：15161449
> 
> 赞同：1
> 
> 时间：2013-03-01T15:40:54.363
> 
> 标签：java, connection, weblogic, datasource

数据库连接如下

```
public Connection getDBConection(){  
   Context context = new InitialContext();  
   DataSource dataSource = (javax.sql.DataSource) context.lookup("java:myDataSource");  
   Connection conn = dataSource.getConnection();  
} 
```

对于用户A，是每个数据库请求都应该调用`getDBConnection()`一次；但不需要控制所有请求使用相同的连接？

也就是说，如果userA有3个数据库请求，那么userA应该调用`getDBConnection()`3次，`Connection.closed()`每次请求都用完后调用？

如果userA调用`getDBConnection()`了3次（也就是调用`dataSource.getConnection()`了3次），是不是创建了三个连接？或者它是未知的，由weblogic控制？

感觉很乱，是不是一个数据库请求就应该有一个新的连接？或者只是`DataSource.getConnection()`为每个数据库请求调用，创建的新连接数由 Web 服务器控制，无需考虑实际创建了多少连接。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T16:43:53.963

每次调用`DataSource.getConnection`时，数据源都会为您检索连接。返回的连接应该没有被其他任何人积极使用，但它不一定是全新的连接。

例如，如果您使用连接池，这是一种非常常见的做法，那么当您调用 时`Connection.close`，连接实际上并没有关闭，而是返回到可用连接池中。然后，当您调用 时`DataSource.getConnection`，连接池将查看它周围是否有任何尚未分发的空闲连接。如果是这样，它通常会测试它们是否过时（通常通过对虚拟表执行非常快速的查询）。如果没有，它会将现有的连接返回给调用者。但是，如果连接是陈旧的，那么连接池将从底层数据库驱动程序中检索一个真正的新连接，并返回它。

通常，连接池在任何时候都拥有最大数量的真实连接（例如 50 个）。如果您的应用程序尝试同时请求超过 50 个连接，`DataSource.getConnection`将抛出异常。或者在某些实现中，它会阻塞一段时间，直到一个可用，然后在该时间到期后抛出异常。有关示例实现，请查看[Apache Commons DBCP](http://commons.apache.org/proper/commons-dbcp/)。

希望这能回答你的问题！

# javascript - 当值为 0 时，数字框不会在 keyup 上触发事件

> ID：15161453
> 
> 赞同：1
> 
> 时间：2013-03-01T15:41:02.960
> 
> 标签：javascript, javascript-events, backbone.js

在我看来，我有这样的事件：

```
events: {
      'click .po_total .updates_total': 'updateTotal',
      'focusout .po_total .updates_total': 'updateTotal',
      'keyup .po_total .updates_total': 'updateTotal'
} 
```

哈姆 JSHTML 是：

```
%input.span2#shipping.updates_total{type: "number", name: "shipping", min: "0.00", step: "0.01", value: "0.00"} 
```

这是更新的代码

```
updateTotal: function(e) {
  if(e){
    e.preventDefault();
    e.stopImmediatePropagation();
  }
  this.$el.find('.po_total #total').html(this.getOrderTotal());

  if (Application.Helpers.currencyToValue(this.$('#total').html()) > 0 ) {
    this.watchTotal(e);
  }
}, 
```

问题是当值更改为 0 时 updateTotal 事件不会触发。它在所有其他时间都有效，但在为 0 时不会。我需要它在值为 0 时工作，因为 updateTotal 中发生了条件行为当值为 0 时，当前从未发生过。

当值更改为 0 时如何触发事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:19:00.683

事实证明，由于某种原因，由于 .po_class 而没有正确初始化事件。尽管 dom 结构是正确的，但这不适用于值为 0 的元素。我删除了那个类，现在它可以工作了

# java - 在 javacv 中使用 cvSetMouseCallback

> ID：15161454
> 
> 赞同：0
> 
> 时间：2013-03-01T15:41:05.547
> 
> 标签：java, javacv, iplimage

我对编程很陌生，我一直在使用 javacv 进行一些图像处理，但是我无法使用 iplimage 的鼠标事件找到坐标。我基本上想使用左键单击获取 iplimage 的 (x,y) 坐标。如果有人能给我一个如何使用此功能的基本示例，我将不胜感激。我在网上看了看，我看到的所有东西都相当混乱。我知道参数是 cvSetMouseCallback("string", on_mouse, null) ，但是我不知道 on_mouse 是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-29T20:15:05.887

所以使用这种方法的一段代码是：

```
 cvNamedWindow("LKpyr_OpticalFlow", CV_WINDOW_AUTOSIZE);
    cvShowImage("LKpyr_OpticalFlow", imgC);
    CvMouseCallback on_mouse = new CvMouseCallback() {
        @Override
        public void call(int event, int x, int y, int flags, com.googlecode.javacpp.Pointer param) {
            System.out.println("point = (" + x + ", " + y + ")");
        }
    };
    cvSetMouseCallback("LKpyr_OpticalFlow", on_mouse, null);

    cvWaitKey(0); 
```

要回答 on_mouse 问题，它只是一个鼠标回调。换句话说，当鼠标事件发生时会发生什么？在上面的代码中，通过重写 call 方法实现了一个简短的 CvMouseCallback。在此代码中，x 和 y 坐标显示到标准输出。 可以在此处找到原始类 CvMouseCallback的[代码。](http://code.google.com/p/javacv/source/browse/src/main/java/com/googlecode/javacv/cpp/opencv_highgui.java?r=4c039aed5e1593d913b83d84fdee8385aa1b464d)

那么你怎么知道什么叫回调呢？这是在要调用的事件参数中给出的。区分的常用方法是对事件执行 switch 语句。例如，左键对应`CV_EVENT_LBUTTONDOWN`。因此，如果您只想打印左键，请确保 even 等于上述常量。

# php - 用相同的值填充一个固定长度的数组

> ID：15161456
> 
> 赞同：-3
> 
> 时间：2013-03-01T15:41:20.703
> 
> 标签：php, arrays, for-loop

我想像这样初始化数组

$my_arr = 数组（1,1,1,1,1, 1,1,1,1,1, 1,1,1,1,1, 1,1,1,1,1）；

有没有更好的方法来为 php 数组设置 20 个？

使用方式`for i=0 ... to 19`至少需要 3 个字符串，所以我认为这不是更好的选择。

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T15:43:13.467

是的，使用[`array_fill()`](http://php.net/array_fill)：

```
$my_arr = array_fill( 0, 20, 1); 
```

现在，`$my_arr`有 20 个条目，从索引 0 到 19，值为 1。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T15:43:29.430

使用`array_fill`功能

`$arr = array_fill(0, 20, 1);`

# c# - 解析电子邮件和收集所需信息的最佳实践

> ID：15161458
> 
> 赞同：1
> 
> 时间：2013-03-01T15:41:29.223
> 
> 标签：c#, parsing, email, gmail

我们已经实现了解析电子邮件并从中收集信息的算法，例如电子邮件是否是

```
Hi John,

Here is your reservation info  

    Name : John F 
    Date : 2/12/2013 
    State : NY .... 
```

我们为每个电子邮件表单保存一个配置，例如查找“名称”、“日期”、“状态”等键，这些是我们的键，“：”是分隔符，“：”之后的任何内容都是 VALUE那把钥匙。这就是我们解析和收集我们想要的信息的方式。我们从 GMAIL 收件箱中读取电子邮件有时我们从 GMAIL 收到的电子邮件正文很混乱，我们的算法无法读取 KEY:VALUE 对并且什么也没有捕获。如果您在 GMAIL 收件箱中看到实际电子邮件，它的所有格式和内容都很整洁，但我们在代码中获得的电子邮件源不同。不确定这是否与编码有关。请提出可能是什么原因。谢谢

真的很感激你的想法。

![](../Images/73659af44582d2adbe22dcd422f99b95.png)

这是一个示例，第一张图片是我们在 gmail 中看到的，第二张图片是我们作为源获得的（纯文本不是 HTML）。顺便说一下，我们解析的是纯文本而不是 HTML

# bash - 通用维基转换器抛出内存不足错误

> ID：15161461
> 
> 赞同：0
> 
> 时间：2013-03-01T15:41:33.980
> 
> 标签：bash, confluence

我正在尝试使用 uwc 4.0 来转换 moinmoin 站点，但是无论我增加多少内存，堆空间都用完了。目前它的（run_cmdline.sh）

```
# BEGIN
#!/bin/bash

MYCWD=`pwd`

CLASSPATHORIG=$CLASSPATH

CLASSPATH="uwc.jar"
for file in lib/*.jar ; do
    CLASSPATH=$MYCWD/$file:$CLASSPATH
done

CLASSPATH=$CLASSPATH:$CLASSPATHORIG

export CLASSPATH

# run out of the sample_files dir
#cd sample_files
java -Xdebug -Xms2G -Xmx4G $APPLE_ARGS -classpath $CLASSPATH com.atlassian.uwc.ui.UWCCommandLineInterface $1 $2 $3 $4
## END 
```

我在命令行上运行以下命令：

```
sudo ./run_cmdline.sh conf/confluenceSettings.properties conf/converter.moinmoin.properties /opt/atlassian/moin/ 
```

PS 如果我只使用 moinmoin pages 目录中的一个小文件夹，并尝试导出它，我会得到：

```
java.lang.NullPointerException
    at java.util.Hashtable.put(Hashtable.java:542)
    at com.atlassian.uwc.ui.ConverterEngine.createPageTable(ConverterEngine.java:2112)
    at com.atlassian.uwc.ui.ConverterEngine.sendPage(ConverterEngine.java:2014)
    at com.atlassian.uwc.ui.ConverterEngine.sendPage(ConverterEngine.java:1719)
    at com.atlassian.uwc.ui.ConverterEngine.writePages(ConverterEngine.java:1356)
    at com.atlassian.uwc.ui.ConverterEngine.convert(ConverterEngine.java:421)
    at com.atlassian.uwc.ui.ConverterEngine.convert(ConverterEngine.java:215)
    at com.atlassian.uwc.ui.UWCCommandLineInterface.convert(UWCCommandLineInterface.java:175)
    at com.atlassian.uwc.ui.UWCCommandLineInterface.main(UWCCommandLineInterface.java:61) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:51:36.173

UWC 仅支持 Confluence 3.5 及更低版本，不支持 3.5 以上的任何 Confluence 版本

# jquery - jQuery/jQueryUI 升级后自动完成功能不起作用

> ID：15161463
> 
> 赞同：0
> 
> 时间：2013-03-01T15:41:39.850
> 
> 标签：jquery, jquery-ui, autocomplete

jQuery和jQueryUI升级后，自动完成部分报错：

> SCRIPT5007：预期对象

这是代码：

```
(function($) {

$.widget("ui.fwcomplete", {

    // default options
    options: {
        baseUrl: "${querycompletion.base.url}",
        searchUrl: "",
        format: "opensearch",
        collection: "",
        highlight: false,
        minLength: 2,
        hlPre: "<b>",
        hlPost: "</b>",
        withNumbers: false,
        dataType: "jsonp"
    },
    _open: false,
    _enabled: true,

    _create: function() {
        var self = this;
        this.element.autocomplete({
            source: function(request, fn) {
                $.ajax({
                    url: self.options.baseUrl + "/complete.do",
                    dataType: self.options.dataType,
                    data: {
                        format: self.options.format,
                        q: request.term,
                        c: self.options.collection
                    },
                    success: function(data) {
                        if ($.isArray(data) && "opensearch" == self.options.format) {
                            fn(self._responseOpenSearch(data, request.term));

                        } else if ($.isPlainObject(data) && "json" == self.options.format) {
                            fn(self._responseJSON(data, request.term));
                        }
                    }
                });
            },
            minLength: this.options.minLength,
            select: function(event, ui) {
            var url = self.options.searchUrl == "" ? window.location.toString().split('?')[0] : self.options.searchUrl;
                url += "?q=" + ui.item.value;
                if (getURLParameter('sp') != 'null')
                    url += "&sp=" + getURLParameter('sp');
                window.location = url;
            },
            open: function(event, ui) {
                self._open = true;
            },
            close: function(event, ui) {
                self._open = false;
            }
        });
    },

    _responseOpenSearch: function(data, term, fn) {
        return this._unique(data[1]);
    },

    _responseJSON: function(data, term) {
        if (this.options.highlight) {
            data = this._highlight(data, term);

            if (!$.isEmptyObject(data[0])) {
                return this._unique(data);
            }
            return data;
        } else {
            return this._unique(data.suggestions[0].suggestions);
        }
    },

    _highlight: function(data, term) {
        var termregex = new RegExp("(" + term + ")", "i"),
            self = this,
            res = [];
        $(data.suggestions).each(function() {
            $(this.suggestions).each(function() {
                this.label = this.label || this.value;
                this.value = this.value || this.label;
                this.label = this.label.replace(termregex, self.options.hlPre + "$1" + self.options.hlPost);

                if (self.options.withNumbers && this.hits) {
                    this.label = this.label + " (" + this.hits + ")";
                }
                res.push({
                    label: this.label,
                    value: this.value
                });
            });
        });
        return res;
    },

    _unique: function(arr) {
        var unique = [];
        outer: for (var i = 0, len = arr.length; i < len; i++) {
            for (var j = 0, len2 = unique.length; j < len2; j++) {
                if ($.isPlainObject(arr[i]) && unique[j].label == arr[i].label) {
                    continue outer;
                } else if (unique[j] == arr[i]) {
                    continue outer;
                }
            }
            unique.push(arr[i]);
        }
        return unique;
    },

    _setOption: function(key) {
        this.element.autocomplete("option", arguments[0], arguments[1]);
        $.Widget.prototype._setOption.apply(this, arguments);
    },

    isOpen: function() {
        return this._open;
    },

    open: function() {
        this.element.autocomplete("open");
    },

    close: function() {
        this.element.autocomplete("close");
    },

    enable: function() {
        this.element.autocomplete("enable");
        this._enabled = true;
    },

    isEnabled: function() {
        return this._enabled;
    },

    disable: function() {
        this.element.autocomplete("disable");
        this._enabled = false;
    },

    destroy: function() {
        this.element.autocomplete("destroy");
        $.Widget.prototype.destroy.apply(this, arguments);
    }
});
} (jQuery));

// Replace the functionality of the jQuery autocomplete widget to
// allow inserting HTML labels rather than text-only.
(function( $ ) {
$(function() {
    $.extend($.ui.autocomplete.prototype, {
        _renderItem_orig: $.ui.autocomplete.prototype._renderItem,
        _response_orig: $.ui.autocomplete.prototype._response,

        _renderItem: function( ul, item) {
            return $( "<li></li>" )
                .data( "item.autocomplete", item )
                .append( "<a>" + item.label + "</a>" )
                .appendTo( ul );
        },

        _response: function( content ) {
            if ( !this.options.disabled && content && content.length ) {
                    content = this._normalize( content );
                    this._suggest( content );
                    this._trigger( "open" );
            } else {
                    this.close();
            }
            this.element.removeClass( "ui-autocomplete-loading" );
        }
    });
});
})(jQuery) 
```

调试时，我得到这行代码：

```
fn(self._responseJSON(data, request.term)); 
```

这会立即向我抛出该异常，我可以看到“fn”未定义。我在这里做错了什么？我希望有人能解决这个问题，我已经失去了它。:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T20:28:23.367

自动补全版本 1.8.18，注意没有返回值：-

```
_response: function( content ) {
    if ( !this.options.disabled && content && content.length ) {
        content = this._normalize( content );
        this._suggest( content );
        this._trigger( "open" );
    } else {
        this.close();
    }
    this.pending--;
    if ( !this.pending ) {
        this.element.removeClass( "ui-autocomplete-loading" );
    }
} 
```

自动完成版本 1.10.1（最新）

```
_response: function() {
    var that = this,
        index = ++requestIndex;

    return function( content ) {
        if ( index === requestIndex ) {
            that.__response( content );
        }

        that.pending--;
        if ( !that.pending ) {
            that.element.removeClass( "ui-autocomplete-loading" );
        }
    };
},

__response: function( content ) {
    if ( content ) {
        content = this._normalize( content );
    }
    this._trigger( "response", null, { content: content } );
    if ( !this.options.disabled && content && content.length && !this.cancelSearch ) {
        this._suggest( content );
        this._trigger( "open" );
    } else {
        // use ._close() instead of .close() so we don't cancel future searches
        this._close();
    }
} 
```

您正在覆盖 _response 但此函数现在需要一个返回值，看起来您现在应该覆盖 _response 和 __response

# wordpress - Wordpress：获取使用图像的帖子的链接

> ID：15161471
> 
> 赞同：0
> 
> 时间：2013-03-01T15:42:15.540
> 
> 标签：wordpress, photos, sidebar

我想在我的侧边栏中使用[最近的照片插件](http://www.instruite.com/blog/2010/02/28/recent-photos-plugin/)来显示最后上传的照片，而不是将它们链接到更大版本的图像，我想链接到它们使用的帖子。有人可以告诉我我是怎么得到的使用图像的最后一篇文章的链接？

谢谢，乌多

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T21:19:08.633

如果您根据帖子制作侧边栏并显示图像，您可以显示帖子中的图像，然后将其链接到基于帖子的永久链接。如果您像您一样根据图像进行操作，则没有标识符可以告诉 wordpress 该图像是否是任何特定帖子的一部分。因此，反过来，如果您愿意，您可以设置一个条件来提取帖子并将其放入一个数组中，并使其交叉引用并按每张图片的上传日期降序。

# ios - 如何将 NSData 转换回 NSArray

> ID：15161474
> 
> 赞同：1
> 
> 时间：2013-03-01T15:42:32.487
> 
> 标签：ios, nsarray, nsdata, binary-data

所以首先我有这段代码将 NSArray 转换为 NSData：

```
NSArray *myArray = [[NSArray alloc] initWithObjects:[NSNumber numberWithInt:3], nil];

NSData* encodedArray = [NSData dataWithBytes:myArray length:1]; 
```

现在我想将它转换回 NSArray 但我不知道该怎么做。

这就是我尝试这样做的方式：

```
NSArray *receivedArray = [encodedArray bytes]; 
```

但它会崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:45:26.240

请改用此代码：

```
NSArray *myArray = [[NSArray alloc] initWithObjects:[NSNumber numberWithInt:3], nil];
NSData *data = [NSKeyedArchiver archivedDataWithRootObject:myArray];

...

NSArray *arrayCopy = [NSKeyedUnarchiver unarchiveObjectWithData:data]; 
```

请参阅有关该主题的[Apple 指南](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Archiving/Articles/creating.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T15:43:39.460

试试这个：

```
NSArray *array=[NSKeyedUnarchiver unarchiveObjectWithData:encodedArray] 
```

# eclipse - Eclipse代码变更工作说明

> ID：15161478
> 
> 赞同：1
> 
> 时间：2013-03-01T15:42:49.440
> 
> 标签：eclipse, build

如果您正在使用 Eclipse 并且您的开发服务器正在调试器中运行，那么当您保存对该文件的更改时，Eclipse 会自动编译新代码，然后尝试将新代码插入到已经运行的服务器中。对类、JSP、静态文件和 appengine-web.xml 的更改会立即反映在正在运行的服务器中，无需重新启动

PLZ任何人都可以解释这一点????????????

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:48:49.487

它不会自动发生。检查`Project --> Build Automatically`选项。应该已经检查过了。

如果您取消选中它；那么项目将不会自动构建/部署。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T15:49:05.730

对于像 JSP 文件这样的类：它使用 JPDA 进行调试。

IDE 通过套接字连接到您正在运行的应用程序的 JVM 并热重新部署非永久代码（又名 PermGen）。

为此有不同的技术和框架：

```
http://en.wikipedia.org/wiki/Java_Platform_Debugger_Architecture 
```

# mysql - MySQL 听起来像是忽略 'The,a' 等

> ID：15161479
> 
> 赞同：0
> 
> 时间：2013-03-01T15:42:52.800
> 
> 标签：mysql

我有一个包含名称的表，每个都有一个唯一的`itemcode`字段，但是我还有另一个表，我们将其用作所有内容的*根*表，这个额外的表是我最近添加的一个额外的表。

因为我的根表中的名称与这个新表中的名称不同，所以我需要一个*桥接*表，它是我使用一个查询创建的，该查询执行`INSERT..SELECT`一个表中的名称与另一个表中的名称相同的位置。这很好，但是它限制了我的结果，因为有些名字包括`The`或`A`开头，所以我错过了它们。所以现在我已经将我的`a = b`查询更改为 a`SOUNDS LIKE`但是它只包含最后有差异的名称。

我正在寻找的是一种忽略某些单词的方法，例如：

*   这
*   一个
*   是
*   和

等等并使用名称的其余部分？我不能做'LIKE %%'，因为那会捕获太多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:49:25.417

您可以使用语句删除单词`The`,`A`等。确保在搜索词的两边都有空格，以便它匹配整个词，而不是部分词。`Be``like`

```
SELECT * FROM namestable where names Like '% The %' 
```

# c# - 文本框保存并从 .txt 文件显示

> ID：15161483
> 
> 赞同：0
> 
> 时间：2013-03-01T15:43:13.500
> 
> 标签：c#, winforms, textbox

我有一个连续 15 个文本框的 WinForm，每个文本框旁边都有一个保存和显示按钮。用户可以在这些框中写入文本，当他们打开表单时，他们可以单击显示并查看他们编写的文本，然后保存并关闭应用程序，它仍然可以显示。

对于我认为可以在每个文本框和按钮上单独使用的代码

```
namespace UniversityProject
{

public partial class managementsystem : Form
{
    private const string fileName = @"C:\txtBoxdata.txt";

    public managementsystem()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        textBox3.Text = File.ReadAllText(fileName);
    }

    private void button2_Click(object sender, EventArgs e)
    {
        File.WriteAllText(fileName, textBox3.Text);
    } 
```

我认为它可以通过更改文本框数字来工作，但我认为它可能与阅读所有内容有关。由于所有文本框都显示相同的数据，这是不正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T19:48:00.780

让我试着澄清你的问题：

您有一堆文本框，每个文本框代表文本文件中的一行。每次用户单击文本框旁边的按钮时，您要替换相应的行。

替换文本文件中的一行非常容易。只需将所有行读入一个数组，替换该行并将所有内容写回文件：

```
private static void ReplaceLineInFile(string path, int lineNumber, string newLine)
{
    if (File.Exists(path))
    {
        string[] lines = File.ReadAllLines(path);
        lines[lineNumber] = newLine;
        File.WriteAllLines(path, lines);
    }
} 
```

唯一剩下的就是知道应该更换哪条线。您可以为每个按钮添加一个处理程序（注意行号以 0 开头）：

```
private void button1_Click(object sender, EventArgs e)
{
    ReplaceLineInFile(fileName, 0, textBox1.Text);
}

private void button2_Click(object sender, EventArgs e)
{
    ReplaceLineInFile(fileName, 1, textBox2.Text);
}

etc. 
```

这不是很优雅，因为它复制了相同的代码。最好对所有按钮使用单个事件处理程序，然后找出它处理哪个文本框以及应该替换哪一行。我建议为文本框和按钮设置数组并在构造函数中构建它们：

```
private TextBox[] textBoxes;
private Button[] buttons;

public managementsystem()
{
    InitializeComponent();

    textBoxes = new TextBox[] { textBox1, textBox2, textBox3, textBox4, textBox5 };
    buttons = new Button[] { button1, button2, button3, button4, button5 };
} 
```

您的单个事件处理程序将是：

```
private void button_Click(object sender, EventArgs e)
{
    Button button = sender as Button;
    if (button != null)
    {
        int lineNumber = Array.IndexOf(buttons, button);
        if (lineNumber >= 0)
        {
            ReplaceLineInFile(fileName, lineNumber, textBoxes[lineNumber].Text);
        }
    }
} 
```

在某些时候，您可能想要保存所有值和/或创建文件。此外，您可能希望在加载表单时将现有值加载到文本框中：

```
private void Form1_Load(object sender, EventArgs e)
{
    LoadFile();
}

private void LoadFile()
{
    if (!File.Exists(fileName))
    {
        WriteAllLines();
        return;
    }

    string[] lines = File.ReadAllLines(fileName);
    if (lines.Length != textBoxes.Length)
    {
        // the number of lines in the file doesn't fit so create a new file
        WriteAllLines();
        return;
    }

    for (int i = 0; i < lines.Length; i++)
    {
        textBoxes[i].Text = lines[i];
    }
}

private void WriteAllLines()
{
    // this will create the file or overwrite an existing one
    File.WriteAllLines(fileName, textBoxes.Select(tb => tb.Text));
} 
```

请注意，当您添加新文本框时，这仍然有效。您唯一需要更改的是在构造函数中创建数组。但是，如果您更改文本框的数量，这将删除现有文件。为避免这种情况，您可以手动添加或删除新行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T15:50:52.263

基本问题是您试图将不同的文本框值保存到一个 txt 文件中。更改 txt 文件名和文本框名称，你会很高兴.. :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T15:57:48.973

掌握[`StreamWriter`](http://msdn.microsoft.com/en-us/library/system.io.streamwriter.aspx)和[`StreamReader`](http://msdn.microsoft.com/en-us/library/system.io.streamreader.aspx)。在 OnClick 事件中使用流编写器或读取器打开一个新流。然后使用类似的东西

```
using(StreamWriter sw = new StreamWriter("C:\\Path\\to\\file.txt")){
    sw.WriteLine("TEXTBOX1: " + textbox1.text);
    sw.Close();
} 
```

对所有文本框执行此操作。并最终使用 StreamReader 从您的文件中读取

```
using(StreamReader sr = new StreamReader("C:\\Path\\to\\file.txt")){
    string s  = sr.ReadToEnd();
    //find value for your textbox;
    textbox1.Text = s;
    sw.Close();
} 
```

试一试！

# regex - Perl 正则表达式在特定位置插入/替换字符串

> ID：15161487
> 
> 赞同：0
> 
> 时间：2013-03-01T15:43:17.670
> 
> 标签：regex, string, perl, substitution, string-substitution

给定一个 url，以下正则表达式可以在 url 的某些点插入/替换单词。

代码：

```
#!/usr/bin/perl

use strict;
use warnings;
#use diagnostics;

my @insert_words = qw/HELLO GOODBYE/;
my $word = 0;
my $match;

while (<DATA>) {
    chomp;
    foreach my $word (@insert_words)
    {
        my $repeat = 1;
        while ((my $match=$_) =~ s|(?<![/])(?:[/](?![/])[^/]*){$repeat}[^/]*\K|$word|)
        {
            print "$match\n";
            $repeat++;
        }

    print "\n";
    }
}

__DATA__
http://www.stackoverflow.com/dog/cat/rabbit/
http://www.superuser.co.uk/dog/cat/rabbit/hamster/
10.15.16.17/dog/cat/rabbit/ 
```

**给出的输出（对于`__DATA__`带有`HELLO`单词的第一个示例 url）：**

```
http://www.stackoverflow.com/dogHELLO/cat/rabbit/
http://www.stackoverflow.com/dog/catHELLO/rabbit/
http://www.stackoverflow.com/dog/cat/rabbitHELLO/
http://www.stackoverflow.com/dog/cat/rabbit/HELLO 
```

**我现在陷入困境的地方：**

我现在想更改正则表达式，使输出如下所示：

```
http://www.stackoverflow.com/dogHELLO/cat/rabbit/
http://www.stackoverflow.com/dog/catHELLO/rabbit/
http://www.stackoverflow.com/dog/cat/rabbitHELLO/
http://www.stackoverflow.com/dog/cat/rabbit/HELLO
#above is what it already does at the moment
#below is what i also want it to be able to do as well
http://www.stackoverflow.com/HELLOdog/cat/rabbit/  #<-puts the word at the start of the string
http://www.stackoverflow.com/dog/HELLOcat/rabbit/
http://www.stackoverflow.com/dog/cat/HELLOrabbit/
http://www.stackoverflow.com/dog/cat/rabbit/HELLO
http://www.stackoverflow.com/HELLO/cat/rabbit/  #<- now also replaces the string with the word
http://www.stackoverflow.com/dog/HELLO/rabbit/
http://www.stackoverflow.com/dog/cat/HELLO/
http://www.stackoverflow.com/dog/cat/rabbit/HELLO 
```

但是我无法让它在一个正则表达式中自动执行此操作。

非常感谢您对此事的任何帮助，非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:47:55.660

一种解决方案：

```
use strict;
use warnings;

use URI qw( );

my @insert_words = qw( HELLO );

while (<DATA>) {
   chomp;
   my $url = URI->new($_);
   my $path = $url->path();

   for (@insert_words) {
      # Use package vars to communicate with /(?{})/ blocks.
      local our $insert_word = $_;
      local our @paths;
      $path =~ m{
         ^(.*/)([^/]*)((?:/.*)?)\z
         (?{
            push @paths, "$1$insert_word$2$3";
            if (length($2)) {
               push @paths, "$1$insert_word$3";
               push @paths, "$1$2$insert_word$3";
            }
         })
         (?!)
      }x;

      for (@paths) {
         $url->path($_);
         print "$url\n";
      }
   }
}

__DATA__
http://www.stackoverflow.com/dog/cat/rabbit/
http://www.superuser.co.uk/dog/cat/rabbit/hamster/
http://10.15.16.17/dog/cat/rabbit/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T16:56:35.230

没有疯狂的正则表达式：

```
use strict;
use warnings;

use URI qw( );

my @insert_words = qw( HELLO );

while (<DATA>) {
   chomp;
   my $url = URI->new($_);
   my $path = $url->path();

   for my $insert_word (@insert_words) {
      my @parts = $path =~ m{/([^/]*)}g;
      my @paths;
      for my $part_idx (0..$#parts) {
         my $orig_part = $parts[$part_idx];
         local $parts[$part_idx];
         {
            $parts[$part_idx] = $insert_word . $orig_part;
            push @paths, join '', map "/$_", @parts;
         }
         if (length($orig_part)) {
            {
               $parts[$part_idx] = $insert_word;
               push @paths, join '', map "/$_", @parts;
            }
            {
               $parts[$part_idx] = $orig_part . $insert_word;
               push @paths, join '', map "/$_", @parts;
            }
         }
      }

      for (@paths) {
         $url->path($_);
         print "$url\n";
      }
   }
}

__DATA__
http://www.stackoverflow.com/dog/cat/rabbit/
http://www.superuser.co.uk/dog/cat/rabbit/hamster/
http://10.15.16.17/dog/cat/rabbit/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T17:10:16.867

另一种解决方案：

```
#!/usr/bin/perl

use strict;
use warnings;

my @insert_words = qw/HELLO GOODBYE/;

while (<DATA>) {
    chomp;
    /(?<![\/])(?:[\/](?![\/])[^\/]*)/p;
    my $begin_part = ${^PREMATCH};
    my $tail = ${^MATCH} . ${^POSTMATCH};
    my @tail_chunks = split /\//, $tail; 

    foreach my $word (@insert_words) {                      
        for my $index (1..$#tail_chunks) {
            my @new_tail = @tail_chunks;

            $new_tail[$index] = $word . $tail_chunks[$index];
            my $str = $begin_part . join "/", @new_tail;
            print $str, "\n";

            $new_tail[$index] = $tail_chunks[$index] . $word;
            $str = $begin_part . join "/", @new_tail;  
            print $str, "\n";
        }

        print "\n";
    }
}

__DATA__
http://www.stackoverflow.com/dog/cat/rabbit/
http://www.superuser.co.uk/dog/cat/rabbit/hamster/
10.15.16.17/dog/cat/rabbit/ 
```

# spring - Spring PROPAGATION_REQUIRED.. 加入

> ID：15161491
> 
> 赞同：-1
> 
> 时间：2013-03-01T15:43:27.633
> 
> 标签：spring, transactions

我使用 Spring 并有两种使用声明性事务的方法......

在某些情况下methodA调用methodB ..我需要知道的是在声明性事务中提交是否发生两次......

例子

```
public void methodA() throws Exception {

            this.transactionTemplate.setPropagationBehavior(TransactionDefinition.PROPAGATION_REQUIRED)
                final Order order = this.transactionTemplate.execute(new TransactionCallback<Order>() {
                    @Override
                    public Order doInTransaction(TransactionStatus status) {
                            Order order = new Order();
                            String name = "Customer 2 " + (new Date()).toLocaleString();
                            order.setCustomer(name);                                                            
                            entityManager.persist(order);
                         ..........................
                           .......................
                         // call methodB
                        methodB();

 }

public void methodB() throws Exception {

this.transactionTemplate.setPropagationBehavior(TransactionDefinition.PROPAGATION_REQUIRED);
                    final Address add = this.transactionTemplate.execute(new TransactionCallback<Address >() {
                        @Override
                        public Order doInTransaction(TransactionStatus status) {
                                Address add= new Address ();
                                add.setAddress("address");                                                          
                                entityManager.persist(add);

                        ......................
                        .....................
    } 
```

通过使用 PROPOGATION_REQUIRED，methodB 中的事务将加入 methodA 中启动的事务。

但这是否意味着事务被提交了两次？

我在 methodB 的事务中添加了同步器：

```
TransactionSynchronizationManager.registerSynchronization(new TransactionSynchronization(){

                    public void afterCommit() {
                        System.out.println("====> AFTER SUCCESSFUL COMMIT 2 TO DB..."); 

                    } 
```

我在 methodA 的事务中添加了同步器：

TransactionSynchronizationManager.registerSynchronization(new TransactionSynchronization(){

```
 public void afterCommit() {
                    System.out.println("====> AFTER SUCCESSFUL COMMIT 1 TO DB..."); 

                } 
```

我得到的输出是在方法A完成之后::

```
====> AFTER SUCCESSFUL COMMIT 2 TO DB...
====> AFTER SUCCESSFUL COMMIT 1 TO DB... 
```

我想这意味着已经将两个同步器分配给了他的 trans..manager，并且当提交发生一次时......两个同步器都被调用了？......对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:16:39.923

由于您正在使用`PROPAGATION_REQUIRED`不会有两个不同的事务，因此两种方法都将在同一个事务中运行。如果你看它的定义`PROPAGATION_REQUIRED`说

> 支持当前交易；如果不存在，则创建一个新的。

.

因此，如果`methodB`成功完成，则不会提交事务，但如果失败，则会将事务标记为`rollback-only`. 实际提交或回滚的责任将落在创建事务的人身上。在您的情况下，它将开启`methodA`

# caching - Cassandra 行缓存不值得

> ID：15161499
> 
> 赞同：4
> 
> 时间：2013-03-01T15:43:48.967
> 
> 标签：caching, cassandra

Cassandra 1.2.2 提供的示例配置文件的 a`row_cache_size_in_mb`为 0，它完全关闭行缓存。鉴于行缓存[被吹捧为可以提高读取性能](http://www.datastax.com/dev/blog/maximizing-cache-benefit-with-cassandra)，令我惊讶的是根本没有预留行缓存，甚至没有几十 MB。

在大多数情况下，行缓存实际上是否*不再*值得？还是在大多数情况下都不值得？是否只[值得作为替代品`memcached`](https://stackoverflow.com/a/2866448/545127)？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T18:13:01.157

当从相对较小的列族进行多次读取时，行缓存会有所帮助。尽管数据本来会存储在 OS 文件系统缓存中，但从行缓存对象构建响应的 CPU 比从缓存的 SSTable 中构建响应的 CPU 更少。在我所做的一些测试中，从行缓存中读取的速度提高了 30%，尽管这在很大程度上取决于您的数据模型。

行缓存的另一个用例是当您希望优先将列族固定在缓存中而不是依赖于操作系统缓存策略时。

但是，对于不可缓存的 CF，行缓存会降低性能。这可能是它默认关闭的原因。因此，只有在获得合理的命中率时才应该使用行缓存。您可以从 nodetool 信息输出中检查这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-03T14:36:25.963

从 2.1 开始，行缓存现在更加有用，因为您不必将整个分区存储在内存中。这是通过表定义上的每个分区设置的行数来实现的。它最适用于您选择最近的 x 并使用聚类顺序的查询。

[http://www.datastax.com/dev/blog/row-caching-in-cassandra-2-1](http://www.datastax.com/dev/blog/row-caching-in-cassandra-2-1)

# ajax - Wordpress Ajax 深度链接给出 404

> ID：15161504
> 
> 赞同：0
> 
> 时间：2013-03-01T15:44:01.237
> 
> 标签：ajax, wordpress, url, http-status-code-404

**嗨伙计，**

我在这里的第一篇文章，感谢我之前已经阅读过的任何帮助。

我正在开发一个 wordpress 项目。看来我错过了我的问题的概述。我使用 ajax 来接收额外的产品数据。http:url/product/additional_ajax_data...

这工作正常，除了直接调用 ajax url。直接调用 ajax url 会导致 404 未找到。

请不要给出如下指示：在标题中添加 200 ok... 因为该项目将包含数千页，并且像这样的解决方法是行不通的...

**附加信息：网址没有 ajax 哈希标签...**并且内容将根据最后一个 url 片段动态加载

# 我找到了解决方案：

为了防止 Wordpress 在直接调用 ajax url 时出现 404，请向系统添加重写端点。

您可以在 Wordpress 上关注 Jon Cave 的帖子：

[http://make.wordpress.org/plugins/2012/06/07/rewrite-endpoints-api/](http://make.wordpress.org/plugins/2012/06/07/rewrite-endpoints-api/)

也适用于自定义 post_types 和自定义分类法，密切关注您想要注册自定义端点重写的类型（这可能取决于您的帖子类型、页面类型等选项......）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:50:11.420

如果您确定 url 正确且文件存在，请检查文件的权限是否不太严格。还要检查 .htaccess 以确保它不会直接加载某些文件扩展名

# sql - 使用查询访问 SQL 中的列描述

> ID：15161505
> 
> 赞同：36
> 
> 时间：2013-03-01T15:44:00.717
> 
> 标签：sql, sql-server

我正在尝试使用 INFORMATION_SCHEMA 访问列描述属性

我过去创建了这个查询来获取列名，但我不知道如何获取列的描述

```
SELECT COLUMN_NAME AS Output, ORDINAL_POSITION 
FROM INFORMATION_SCHEMA.COLUMNS 
WHERE  (TABLE_NAME = @Tablename) AND (ORDINAL_POSITION = @Location) 
```

![截屏](../Images/6bc6c35acec40c0cfd7f9ac284d8f201.png)

这是描述在字段属性上的位置

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2013-03-01T16:38:18.407

如果“描述”是指在设计模式下在 SQL Management Studio 中显示的“描述”，则为：

```
 select 
        st.name [Table],
        sc.name [Column],
        sep.value [Description]
    from sys.tables st
    inner join sys.columns sc on st.object_id = sc.object_id
    left join sys.extended_properties sep on st.object_id = sep.major_id
                                         and sc.column_id = sep.minor_id
                                         and sep.name = 'MS_Description'
    where st.name = @TableName
    and sc.name = @ColumnName 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2017-06-07T10:19:23.080

如果您特别想使用 INFORMATION_SCHEMA （就像我一样），那么以下查询应该可以帮助您获取列的描述字段：

```
SELECT COLUMN_NAME AS [Output]
    ,ORDINAL_POSITION
    ,prop.value AS [COLUMN_DESCRIPTION]
FROM INFORMATION_SCHEMA.TABLES AS tbl
INNER JOIN INFORMATION_SCHEMA.COLUMNS AS col ON col.TABLE_NAME = tbl.TABLE_NAME
INNER JOIN sys.columns AS sc ON sc.object_id = object_id(tbl.table_schema + '.' + tbl.table_name)
    AND sc.NAME = col.COLUMN_NAME
LEFT JOIN sys.extended_properties prop ON prop.major_id = sc.object_id
    AND prop.minor_id = sc.column_id
    AND prop.NAME = 'MS_Description'
WHERE tbl.TABLE_NAME = @TableName 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-04-17T20:55:36.023

系统功能将[`fn_listextendedproperty`](http://msdn.microsoft.com/en-us/library/ms179853(v=sql.105).aspx)满足您的需求。

它也被称为`sys.fn_listextendedproperty`.

语法如下：

```
fn_listextendedproperty ( 
  { default | 'property_name' | NULL } 
, { default | 'level0_object_type' | NULL } 
, { default | 'level0_object_name' | NULL } 
, { default | 'level1_object_type' | NULL } 
, { default | 'level1_object_name' | NULL } 
, { default | 'level2_object_type' | NULL } 
, { default | 'level2_object_name' | NULL } 
) 
```

示例用法：列出架构`ScrapReason`中表的所有列的扩展属性`Production`

```
USE AdventureWorks2012;
GO
SELECT objtype, objname, name, value
FROM fn_listextendedproperty (NULL, 'schema', 'Production', 'table', 'ScrapReason', 'column', NULL);
GO 
```

`sp_helptext`将不起作用，因为它不能用于根据[TechNet](http://technet.microsoft.com/en-us/library/ms176112.aspx)的表。

> 显示用户定义的规则、默认、未加密的 Transact-SQL 存储过程、用户定义的 Transact-SQL 函数、触发器、计算列、CHECK 约束、视图或系统对象（例如系统存储过程）的定义。

`sp_columns`不返回`sys.extended_properties.value`您要查找的字段。

`fn_listextendedproperty`可以说比接受答案中的查询更容易使用和更通用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-01T16:16:11.790

exec sp_columns @Tablename... 这是系统存储过程，将为您提供信息。

除此之外，这里有一篇关于 INFORMATION SCHEMA 视图的大量有用信息的帖子：[SQL Server 中“描述表”的等价物是什么？](https://stackoverflow.com/questions/319354/what-is-the-equivalent-of-describe-table-in-mssql)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T16:37:59.747

您是否在 sys.extended_properties 视图中查找信息？

[https://stackoverflow.com/a/15008885/1948904](https://stackoverflow.com/a/15008885/1948904)

# javascript - 如何监控 Javascript 对象的新属性设置

> ID：15161508
> 
> 赞同：3
> 
> 时间：2013-03-01T15:44:03.217
> 
> 标签：javascript, object, properties, monitoring

每当在 Javascript 对象上设置*新*属性时，我如何获得回调？
即我不知道要设置哪些属性，但想要对设置的任何属性进行*回调*。

我想要的是

```
var obj = {};
obj.a = "something"; // triggers callback function

function callback(obj,key,val) {
    console.log(key + " was set to " + val + " on ", obj);
} 
```

这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T15:57:41.133

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T15:53:04.990

不幸的是，JavaScript 不会让您知道属性何时更改。很多时候我希望它会，但因为它不会，我不得不找到一个解决方法。不是直接设置属性，而是通过触发回调函数的 setter 方法设置它（也可能使用 getter 方法来访问属性），如下所示：

```
function callback(obj,key,val) {
    console.log(key + " was set to " + val + " on ", obj);
}

var obj = {};
obj.setA=function(value){
    obj.a=value;
    callback(obj,'a',value);// triggers callback function
}
obj.getA=function(){
    return obj.a;
}

obj.setA("something"); 
```

jsFiddle：http: [//jsfiddle.net/jdwire/v8sJt/](http://jsfiddle.net/jdwire/v8sJt/)

编辑：如果您想完全防止在没有回调的情况下更改属性，则另一种选择：

```
function callback(obj,key,val) {
    console.log(key + " was set to " + val + " on ", obj);
}

var obj={};
(function(){
   var a=null;
   obj.setA=function(value){
       a=value;
       callback(obj,'a',value);// triggers callback function
   }
   obj.getA=function(){
       return a;
   }
})()

console.log("a is "+obj.getA());// a is null
obj.setA("something"); // Set a to something
console.log("a is now "+obj.getA()); // a is now something
obj.a="something else"; // Set obj.a to something else to show how a is only accessible through setA
console.log("a is still "+obj.getA()); // a is still something 
```

jsFiddle：http: [//jsfiddle.net/jdwire/wwaL2/](http://jsfiddle.net/jdwire/wwaL2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T15:56:31.687

最好的办法是一个 setter 函数，你不需要一个 getter，

```
var obj = {};
setKey(obj, 'a', "something"); // triggers callback function

function setKey(obj, key, val){
    obj[key] = val;
    callback(obj, key, val);
}

function callback(obj, key, val) {
    console.log(key + " was set to " + val + " on ", obj);
} 
```

尽可能通用，不要对所有键执行不同的功能

[在这里](http://jsfiddle.net/markus85/nTYN5/3/)试试

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-01T16:04:17.240

最好的办法是拥有 setter 和 getter 方法。但是根据您之前的实现，您仍然可以在不使用 setter 和 getter 的情况下更改您的对象属性。因此，您应该将敏感变量设为私有。这是一个简短的例子：

```
var Person = (function() {

    function Person() {};

    var _name;

    Person.prototype.setName = function(name) {

        _name = name;

    };

    Person.prototype.getName = function() {

        return _name;

    };

    return Person;

})();

var john = new Person();

john.getName();

// => undefined

john.setName("John");
john.getName();

// => "John"

john._name;

// => undefined

john._name = "NOT John";
john.getName();

// => "John" 
```

# c# - 面板默认按钮在 Safari 中不起作用

> ID：15161509
> 
> 赞同：0
> 
> 时间：2013-03-01T15:44:13.833
> 
> 标签：c#, asp.net, safari

我有一个基本的登录表单，我希望在用户按 Enter 时提交表单

```
<asp:Panel ID="pnlLogin" runat="server" DefaultButton="lbLogin">
    <asp:TextBox ID="txtUsername" runat="server" />
    <asp:TextBox ID="txtPassword" runat="server" TextMode="Password" />
    <asp:LinkButton ID="lbLogin" runat="server" onclick="lbLogin_Click" />
</asp:Panel> 
```

这适用于 IE、Firefox 和 Chrome，但不适用于 Safari。任何人都知道当我在 Safari 中按 Enter 时如何点击链接按钮？

# java - java.util.Date 获取毫秒数

> ID：15161510
> 
> 赞同：7
> 
> 时间：2013-03-01T15:44:14.900
> 
> 标签：java, date, time

我做了以下事情：

```
String standardRange = "00:01:01";
SimpleDateFormat rangeFormatter = new SimpleDateFormat("hh:mm:ss");
Date range = rangeFormatter.parse(standardRange); 
```

现在：

```
range.getTime(); 
```

.. 我得到 -3539000 而不是 61,000 的输出

我不确定我做错了什么；调试时，`cdate`存在，该属性包含a `fraction`，其中包含值61,000，这就是我想要的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T15:59:00.753

你看到这个的原因是你创建的日期实际上是在日期纪元的过去，而不是它之后的 1m1s：

```
String standartRange = "00:01:01";
SimpleDateFormat rangeFormatter = new SimpleDateFormat("hh:mm:ss");
Date range = rangeFormatter.parse(standartRange);

System.out.println(new Date(0L));
System.out.println(new Date(0L).getTime());
System.out.println(range);
System.out.println(range.getTime()); 
```

* * *

及其输出；

```
Thu Jan 01 01:00:00 GMT 1970
0
Thu Jan 01 00:01:01 GMT 1970
-3539000 
```

这里的纪元日期不正确 - 它应该是 00:00:00，但由于BST/GMT 更改日期和时区无法跟踪的[历史错误。](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4832236)Sun/Oracle 似乎认为这是历史上的“不准确”。

查看错误报告 - 它更全面地描述了问题。

从您的语言（德语）来看，这可能不是直接由于这个 BST 问题，但几乎可以肯定是相关的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T17:32:09.807

Java Date 并非旨在计算给定时间段的持续时间。getTime() 调用返回自 1970 年 1 月 1 日 00:00:00 GMT 以来的毫秒数。在您的情况下，您实际上最终得到的日期早于那个时代（因此是负数）。当我运行您的代码时，我得到 21661000。（请参阅[Sean Landsman](https://stackoverflow.com/users/2067704/sean-landsman)的答案，因为我相信他已经解释了为什么您会得到负面结果……提示：我的电话号码与 GMT 或 21600000 毫秒相差 6 小时）

[Joda-Time](http://www.joda.org/joda-time/)是一个非常适合解决您的潜在问题的库。

```
PeriodFormatter formatter = new PeriodFormatterBuilder()
         .appendHours()
         .appendSeparator(":")
         .appendMinutes()
         .appendSeparator(":")
         .appendSeconds()
         .toFormatter();
Period period = formatter.parsePeriod("00:01:01");
assert period.toStandardDuration().getMillis() == 61000 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T17:49:06.390

`hh:mm:ss`代表 12 小时制时间，始终代表“时间点”，而不是“时间间隔”。所以当然，时区会影响价值。但是，在 GMT +0 中，该值等于表示“时间间隔”。

您只需要：

```
rangeFormatter.setTimeZone(TimeZone.getTimeZone("GMT")); 
```

试试看！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T16:06:19.327

According to the JavaDoc, `getTime()`:

> Returns the number of milliseconds since January 1, 1970, 00:00:00 GMT represented by this Date object.

You want the number of milliseconds in one minute and one second.

```
(60*minutes+seconds)*1000 
```

It really doesn't need to come from a `Date` object.

If you need to compute the time in milliseconds for some interval, maybe use the [joda time](http://joda-time.sourceforge.net/) library, or get the day, hour, minute, second and millisecond components out of your date object and compute the value by hand.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T16:07:54.613

Try:

```
Date range1 = rangeFormatter.parse("00:01:01");
Date range2 = rangeFormatter.parse("00:00:00");
System.out.println(range1.getTime() - range2.getTime()); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-01T16:01:09.847

为了得到你想要的，你应该比较你想要的时间和时间的起源。使用以下代码：

```
String standardRange = "00:01:01";
SimpleDateFormat rangeFormatter = new SimpleDateFormat("HH:mm:ss");
Date range = rangeFormatter.parse(standardRange);
Date range2 = rangeFormatter.parse("00:00:00");
System.out.println(range.getTime() - range2.getTime()); 
```

# python - 抽象现有的 Django 模型

> ID：15161515
> 
> 赞同：0
> 
> 时间：2013-03-01T15:44:28.290
> 
> 标签：python, django

我在 Django 应用程序中有两个模型，它们具有完全相同的字段，但每个模型中都存储了不同类型的信息。

例如：

```
class A(models.Model)
    field_a =  models.CharField(primary_key = True, max_length = 24)
    field_b =  models.CharField(primary_key = True, max_length = 24)

class B(models.Model)
    field_a =  models.CharField(primary_key = True, max_length = 24)
    field_b =  models.CharField(primary_key = True, max_length = 24) 
```

将这些包含在抽象模型中并将这两个类作为子类似乎是有意义的。我假设我可以简单地做到这一点，而无需进行数据库修改，但 Django 无法再找到我的模型的字段。

有人可以提供建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T15:52:07.907

如果您创建一个新的抽象类，这不会干扰您的数据库。正如您在文档中看到的那样[https://docs.djangoproject.com/en/dev/topics/db/models/#abstract-base-classes](https://docs.djangoproject.com/en/dev/topics/db/models/#abstract-base-classes)抽象类只是没有数据库影响的 python 类。

您的代码可能如下所示：

```
class Parent(models.Model)
    field_a =  models.CharField(primary_key = True, max_length = 24)
    field_b =  models.CharField(primary_key = True, max_length = 24)

    class Meta:
        abstract = True

class A(Parent)
    pass

class B(Parent)
    pass 
```

# ruby - 如何将哈希输出到 CSV 行

> ID：15161517
> 
> 赞同：7
> 
> 时间：2013-03-01T15:44:31.947
> 
> 标签：ruby, csv

我想将哈希映射到 CSV 行。

我在哈希中有几个对象：

```
person1 = {'first_name' => 'John', 'second_name' => 'Doe', 'favorite_color' => 'blue', 'favorite_band' => 'Backstreet Boys'}
person2 = {'first_name' => 'Susan', 'favorite_color' => 'green', 'second_name' => 'Smith'} 
```

我想将其转换为 CSV 文件，其中键为列，每行的值。

我可以通过创建`CSV::Row`这样的来轻松创建标题：

```
h = CSV::Row.new(all_keys_as_array,[],true) 
```

我不能依赖订单，更重要的是，并非所有值都一直填写。

但是当我现在尝试通过[`<<`](http://ruby-doc.org/stdlib-1.9.2/libdoc/csv/rdoc/CSV/Row.html#method-i-3C-3C)和数组向表中添加行时，标题的映射被忽略了。它必须以正确的顺序排列。

为了证明这一点，我编写了这个小脚本：

```
require 'csv'

person1 = {'first_name' => 'John', 'second_name' => 'Doe', 'favorite_color' => 'blue', 'favorite_band' => 'Backstreet Boys'}
person2 = {'first_name' => 'Susan', 'favorite_color' => 'green', 'second_name' => 'Smith'}

persons = [person1, person2]
all_keys_as_array = %w{first_name second_name favorite_color favorite_band}

h = CSV::Row.new(all_keys_as_array,[],true)
t = CSV::Table.new([h])

persons.each do |p|
  r = CSV::Row.new([],[],false)
  p.each do |k, v|
    r << {k => v}
  end
  t << r
end

puts t.to_csv 
```

我希望这个输出：

```
first_name,last_name,favorite_color,favorite_band
John,Doe,blue,Backstreet Boys
Susan,Smith,green, 
```

而是按它们出现的顺序排列的值。所以输出是这样的：

```
first_name,second_name,favorite_color,favorite_band
John,Doe,blue,Backstreet Boys
Susan,green,Smith 
```

最奇怪的部分是，当我通过我进行查找时，[`['key']`](http://ruby-doc.org/stdlib-1.9.2/libdoc/csv/rdoc/CSV/Table.html#method-i-5B-5D)我得到了正确的值：

```
puts "favorite_bands: #{t['favorite_band']}"
> favorite_bands: [nil, "Backstreet Boys", nil] 
```

那么有什么方法可以像我期望的那样写入 CSV 文件吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T16:37:10.647

您可以迭代列名

```
persons.each do |person|
  r = CSV::Row.new([],[],false)
  all_keys_as_array.each do |key|
    r << person[key]
  end
  t << r
end 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-02T16:13:08.123

目前的建议都有效，所以谢谢你。

[但是，我通过使用CSV::Row#fields](http://ruby-doc.org/stdlib-1.9.2/libdoc/csv/rdoc/CSV/Row.html#method-i-fields)偶然发现了一个更优雅的解决方案。

然后我可以在将 CSV 行添加到表之前将其转换为正确的数组：

```
t << r.fields(*all_keys_as_array) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-01T17:58:44.540

您也许可以只使用`#to_csv`和省去所有这些`CSV::Row`东西`CSV::Table`：

```
headers = %w{first_name second_name favorite_color favorite_band} # fyi if you have commas in here you'll get messed up

people = []
people << {'first_name' => 'John', 'second_name' => 'Doe', 'favorite_color' => 'blue', 'favorite_band' => 'Backstreet Boys'}
people << {'first_name' => 'Susan', 'favorite_color' => 'green', 'second_name' => 'Smith'}

require 'csv'
File.open('output.csv', 'w') do |f|
  f.puts headers.to_csv
  people.each do |person|
    f.puts headers.map { |h| person[h] }.to_csv
  end
end 
```

# mysql - 保持mysql连接打开

> ID：15161519
> 
> 赞同：2
> 
> 时间：2013-03-01T15:44:40.207
> 
> 标签：mysql, tcl, eggdrop

我正在制作一个 eggdrop tcl 脚本来将几个公共 IRC 频道的活动写入数据库（随着时间的推移，我认为这将是 10 到 15 个频道）。我有两种选择如何处理数据库连接。

1.  用户说了些什么 -> 打开与数据库的 mysql 连接 -> 插入有关用户所说内容的信息 -> 关闭连接
2.  启动机器人 -> 打开与数据库的 mysql 连接 -> 在有通道活动时插入信息 -> 等待更多信息等。

我认为使用案例 1 更好，但是当有很多通道活动时，我认为每次打开和关闭连接都会导致服务器负载过大，并在一段时间后大幅减慢速度。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T17:24:37.047

如果您想保持连接打开，只需调用

```
mysql::ping $dbhandle 
```

时。

这可以通过以下方式完成：

```
proc keepMySqlOpen {dbhandle} {
    mysql::ping $dbhandle
    after 2000 [list keepMySqlOpen $dbhandle]
}
....
    set dbh [mysql::open ...]
    keepMySqlOpen $dbh
... 
```

另一个选项是`mysql::ping`在访问数据库之前使用，如果需要，应该根据[mysqltcl 手动](http://www.xdobry.de/mysqltcl/mysqltcl.html#16)重新连接。这可能是两全其美的（如果没有太多活动，让连接超时，否则保持打开状态）。

# ruby - 在 Ruby 中使用 Regex 解析出一大块文件名

> ID：15161523
> 
> 赞同：0
> 
> 时间：2013-03-01T15:44:59.613
> 
> 标签：ruby, regex

我正在尝试标准化目录中具有一些相似性但并不总是一致的文件名。然而，它们已经足够标准了。

文件名示例（日期为月/日/年）：

*   每周销售报告 022213 LV.xls
*   每周销售报告 091908 LV-F.xls
*   每周销售 072508.xls
*   每周美国销售 V1.0 061308.xls
*   每周美国销售额 Jan0606.xls

我当前的解决方案是一种有效但丑陋的查找和替换任何可能的字符串组合。x.gsub!(/^Weekly|sales|report|US|US|\s/,'')

但是，我会假设有一种方法可以查看文件名字符串并获取包含所有日期信息的块。这将是左侧以空格为界的块，并以至少 4 位数字结尾。有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T15:50:41.157

如您所述，您的要求将提出以下建议：

```
date_portion = x.match(/\s(\S*\d{4,8})/)[1] 
```

那就是：匹配一个空白字符，然后捕获零个或多个非空白字符，然后是 4 到 8 个数字；返回捕获的文本。

# jquery - 如何在 jqgrid 表列上添加 jquery UI 微调器

> ID：15161526
> 
> 赞同：-1
> 
> 时间：2013-03-01T15:45:03.420
> 
> 标签：jquery, cakephp, spinner, jqgrid-php

是否可以在 jqgrid 表列上添加 jQuery UI 微调器？

我有一个包含 7000 多条记录的 jqgrid 表，我想在一列上应用微调器。jqgrid 允许这样做吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-24T18:10:28.567

是的，有很多方法。

您可以将 html 作为单元格数据传递，而不是仅传递一个数字（不是最好的方法）：

```
<input class="spinner" name="value"> 
```

网格加载后使用：

```
your_jqgrid.gridComplete(function(){$(".spinner")..spinner(); 
```

更好的是，您还可以为该列设置一个格式化程序，然后一次性完成所有操作。

# javascript - AngularJS 从服务加载数据

> ID：15161537
> 
> 赞同：14
> 
> 时间：2013-03-01T15:45:36.393
> 
> 标签：javascript, angularjs, service, load

我在从填充到我的视图中的服务中获取数据时遇到问题。我有这样定义的服务

```
app.factory('nukeService', function($rootScope, $http) {
    var nukeService = {};

    nukeService.nuke = {};

    //Gets the list of nuclear weapons
    nukeService.getNukes = function() {
        $http.get('nukes/nukes.json')
            .success(function(data) {
                nukeService.nukes = data;
            });

        return nukeService.nukes;
    };

    return nukeService;
}); 
```

和我的控制器

```
function NavigationCtrl($scope, $http, nukeService){

    /*$http.get('nukes/nukes.json').success(function(data) {
        $scope.nukes = data;
    });*/

    $scope.nukes = nukeService.getNukes();

} 
```

如果我使用控制器中的 $http.get ，数据填充得很好，但是，如果我尝试从服务中调用数据，我什么也得不到。我知道查询是异步的，但我很难理解如何在返回数据后填充 $scope 变量。我可以使用 $rootscope 广播一个事件并在控制器中监听它，但这似乎不是完成此任务的正确方法。我非常感谢有关如何以正确方式执行此操作的任何建议。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-01T16:01:26.510

我认为这应该可以解决您的问题

```
app.factory('nukeService', function($rootScope, $http) {
    var nukeService = {};

    nukeService.data = {};

    //Gets the list of nuclear weapons
    nukeService.getNukes = function() {
        $http.get('nukes/nukes.json')
            .success(function(data) {
                nukeService.data.nukes = data;
            });

        return nukeService.data;
    };

    return nukeService;
});

function NavigationCtrl($scope, $http, nukeService){

    $scope.data = nukeService.getNukes();

    //then refer to nukes list as `data.nukes`

} 
```

这是对象引用的问题。

当您调用时，`nukeService.getNukes()`您将获得对对象的引用，`a`然后您的变量将`$scope.nukes`引用该内存位置。

在您设置远程服务器调用之后，您`nukeService.nukes = data;`不会更改对象，`a`而是`nukeService.nukes`从引用对象更改`a`为对象`b`。但是你`$scope.nukes`不知道这个重新分配，它仍然指向 object `a`。

在这种情况下，我的解决方案是传递一个`a`带有属性的对象，`data`然后只更改数据属性而不是更改对`a`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-09-10T20:43:25.680

这应该如下。正如 NickWiggill 的评论所提到的，如果我们不返回承诺，undefined 将被分配给 nukeService.data。

```
app.factory('nukeService', function($rootScope, $http) {
    var nukeService = {};
    //Gets the list of nuclear weapons
    nukeService.getNukes = function() {
       return $http.get('nukes/nukes.json');
    };

    return nukeService;
});

  function NavigationCtrl($scope, $http, nukeService){
     nukeService.getNukes().then(function(response){

        $scope.data = response.data;
    });

   } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-01-28T17:30:42.027

我所做的是直接从服务公开数据，并有一个初始化这些数据的方法。这有什么问题？

服务：

```
app.factory('nukeService', function($scope, $http) {
    var data = {};
    data.nukes = [];

    //Gets the list of nuclear weapons
    var getNukes = function() {
        $http.get('nukes/nukes.json').success(function(data) {
                data.nukes = data;
        });
    };

    // Fill the list with actual nukes, async why not.
    getNukes();

    return {
        data : data
        // expose more functions or data if you want
    };
}); 
```

控制器：

```
function NavigationCtrl($scope, nukeService){
     $scope.data = nukeService.data;
     //then refer to nukes list as `$scope.data.nukes`
} 
```

# jenkins - 是否有任何 Jenkins 插件可以根据推荐检查作业配置？

> ID：15161538
> 
> 赞同：3
> 
> 时间：2013-03-01T15:45:41.247
> 
> 标签：jenkins, jenkins-plugins

我们管理一个大型 Jenkins 实例（< 1000 个工作）。我们对作业配置提出了一些建议，例如要保留的工件数量、要保留的作业数量等。

是否有插件可以检查不遵守此建议的工作并报告它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T15:55:32.907

我使用[Groovy 脚本控制台](https://wiki.jenkins-ci.org/display/JENKINS/Jenkins+Script+Console)或[配置切片插件](https://wiki.jenkins-ci.org/display/JENKINS/Configuration+Slicing+Plugin)来完成这些任务。

# eclipse - 在 META-INF 目录中找不到 XML 文件

> ID：15161545
> 
> 赞同：1
> 
> 时间：2013-03-01T15:46:29.023
> 
> 标签：eclipse, web-services, tomcat, xfire

我已经设置了一个我试图在 Eclipse 中调试的 Web 服务。

它有一个这样的目录结构：

> 根 /
>   + src
>   + META-INF
>   + WEB-INF

在`META-INF`目录里面，有一个文件夹`\xfire\services.xml`。

当我启动服务器时，出现以下错误：

```
java.io.FileNotFoundException：类路径资源 [META-INF/xfire/services.xml] 无法打开，因为它不存在
```

当我`procmon.exe`从**sysinternals**运行时，我看到以下路径出现“PATH NOT FOUND”错误：

*   `C:\Program Files\Apache Software Foundation\Tomcat 6.0\lib\META-INF\xfire\services.xml`
*   `C:\Program Files\Apache Software Foundation\Tomcat 6.0\webapps\MyWebService\WEB-INF\META-INF\xfire\services.xml`
*   `C:\Program Files\Apache Software Foundation\Tomcat 6.0\webapps\MyWebService\WEB-INF\classes\META-INF\xfire\services.xml`

当文件存储在：

*   `C:\Program Files\Apache Software Foundation\Tomcat 6.0\webapps\MyWebService\META-INF\xfire\services.xml`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-11T19:06:16.343

我遇到了一个问题，即 META-INF 文件夹必须保留在 WEB-INF 内......这样向上，您可以保留普通文件夹。试试这个...

```
<servlet>
   <servlet-name>XFire</servlet-name>
   <servlet-class>org.codehaus.xfire.transport.http.XFireConfigurableServlet</servlet-class>
   <init-param>
      <param-name>config</param-name>
      <param-value>../META-INF/xfire/services.xml</param-value>
   </init-param>
</servlet> 
```

强制您需要的文件的位置。在这种情况下，我使用**“.. \”**上一级。这是在***web.xml中完成的***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T11:50:01.187

看起来 getRessources() 用于读取您的 xml，因此该文件需要位于类路径中。

只需在您的项目源目录之一中移动或复制 META-INF（我猜是 src 或 src/main ...）。

# git - 提交文件而不暂存

> ID：15161546
> 
> 赞同：4
> 
> 时间：2013-03-01T15:46:38.827
> 
> 标签：git

我是 Git 新手，我正在使用 Git 扩展。我想问一下，当我提交目录时，这些文件是自动进行暂存还是在不暂存的情况下提交？我可以在不暂存的情况下提交文件吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-01T15:49:21.467

是的，您可以在提交中使用`a`and`m`进行暂存和提交：

`git commit -am "my commit message"`

但是，我还是倾向于使用`git add -u`，因为上面的命令不会暂存未跟踪的文件。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-09-14T18:42:02.237

这里值得一提的是，所有这些方法都使用索引，也就是暂存区，也就是缓存。

当 Git 进行新的提交时，它会使用“索引”中的任何内容。正如*索引一词所*暗示的那样，有一个单一的、特殊的、杰出的东西：*索引*，而不是*索引*。但实际上，Git 可以使用*其他*一些索引。我们需要知道“该”索引*是什么，以及**作为*索引与其他索引相比意味着什么。

简短的版本是索引是 Git 用来构建下一次提交的东西。我们从*这个*提交中的内容开始，即当前或`HEAD`提交。你运行`git checkout master`或`git checkout branch`其他什么，Git 用一堆文件填满你的工作树。它将*相同的*文件放入（单个、特殊、杰出）索引，也称为暂存区。这意味着索引/暂存区开始时充满了许多文件：大多数情况下，工作树中的相同文件，您在其中进行工作。例外是某些工作树文件可能*未跟踪*。

未*跟踪*的文件是不在索引中的文件。真的就这么简单：任何不在索引中的文件*都是*未跟踪的；跟踪索引中的*任何*文件。索引中的那些开始与你编辑的那些相同`git checkout`，它们`git checkout`放在你的工作树中。

然后，您对一堆文件进行大量更改。但是，如果您`git commit`现在运行，索引/暂存区域仍然具有原始`git checkout`版本，而不是修改后的工作树版本。因此，您必须`git add`将更改的文件复制到索引中。

这有点麻烦，所以 Git`git add -u`和`git commit -a`. 但是这两个都只是查看索引中的内容，然后将它们的新工作树版本复制到索引中。所以`git commit -a -m "commit message"`不会添加工作树中但*不在*索引中的文件，即当前未跟踪的文件*。*这与: 仅更新*跟踪*的文件相同。*`git add -u`*

 **### 这里有点复杂

除了上述之外，`git commit`还可以将路径名作为参数：

```
git commit -m "some message" file1 file2 
```

例如。但这意味着`--only`标志，即*只*`file1`提交和中的更改`file2`。您还可以运行：

```
git commit -m "some message" --include file1 file2 
```

这会覆盖`--only`.

所有这些工作的方式是 Git 可以使用*不同*的索引，而不是标准索引。使用 时`--only`，Git 所做的是从`HEAD`提交中构建一个新的临时索引。然后，Git 将工作树中的指定文件复制到这个临时索引中，替换旧版本或添加新文件。然后 Git 从这个临时索引进行提交：新提交与提交具有所有相同的文件`HEAD`，除了由于`--only file1 file2`.

当您使用 时`--include`，Git 通过复制当前索引而不是`HEAD`再次提取来创建其临时索引。所以现在你`git add`到目前为止所拥有的任何东西都在临时索引中。然后 Git 添加指定的文件，并进行新的提交。

在所有情况下，在 Git 做出新的提交之后，它也必须修复*真正的*索引，因为现在你已经提交了最新的`file1`和`file2`（如果你使用了，可能还有其他更新`--include`）。如果你使用`--include`了，临时索引就变成了真正的索引。

如果您使用`--only`，这是最复杂的情​​况。在这里，Git 也将添加的文件复制到实际索引中，但除此之外，单独保留实际索引。这样，您之前上演的任何内容仍然是上演的。新提交包含提交中的任何内容`HEAD`（通过临时索引），除了指定的文件（被`git add`-ed 到临时索引中）。而且，您刚才特别提交的任何内容现在也被`git add`-ed 到*真正的*索引中，就好像您`git add`在这些文件上运行一样。**

# linux - Apache httpd 在中断/断点处终止

> ID：15161547
> 
> 赞同：1
> 
> 时间：2013-03-01T15:46:43.670
> 
> 标签：linux, gdb, valgrind, apache

我尝试使用“valgrind --vgdb=yes httpd -X”来调试通过httpd运行的服务，并在每次请求后使用“monitor leak_check full reachable increase”来监控内存泄漏。问题是我无法可靠地中断 httpd 以便在 gdb 中运行“监视器”命令 - 当我在 valgrind/httpd 终端中按 Ctrl-C 时，它通常会终止，与我发送 kill -INT 时相同。我尝试了不同的“处理 SIGINT/SIGTERM nopass/pass”，但没有运气。

通常，当我在 Eclipse CDT/gdb 调试器中添加断点并暂停 httpd 时，httpd 也会终止。

那么是否有可能在 90% 的情况下中断 httpd 而不使其退出？

# c# - 接口最佳实践

> ID：15161551
> 
> 赞同：5
> 
> 时间：2013-03-01T15:47:17.373
> 
> 标签：c#, oop, interface, dependency-injection, dependencies

我正在开发一个按以下方式拆分的应用程序（简化了一点）

```
App
|
Framework
|
Data (Persistance)
|
Data.Couchbase 
```

在 App 内部，我们正在设置 DI 容器并注册在需要特定接口时将使用哪些具体实现。

即 Data 命名空间中的 IUserRepository 将由 Data.Couchbase 命名空间中的 CouchbaseUserRepository 完成。将来，如果我们用另一种技术（比如 Mongo）替换持久层，我们可以更新 DI 注册，它会通过 MongoUserRepository 来实现

一切都很好……

**问题 1**

提供跨系统边界但在Data.Couchbase 命名空间本身*内的接口有一个明显的好处。*如果 ICouchbaseUserRepository 接口本身不提供任何额外的功能，那么它有什么意义吗？好像我们注册 IUserRepository -> CouchbaseUserRepository 就足够了？在具体实现中相似的是，将这些组件进一步拆分为可能不会被换出的接口是否有任何意义

**问题2**

同样，是否值得在框架中拥有一堆接口，其唯一目的是代理数据中的接口，因此应用程序可以仅依赖于框架，而不必依赖于数据。我可以看到优势......实际上也许我不能......看起来我们将在框架中拥有数百个接口，因此我们可以依赖“数据”，特别是如果这些程序集将生活在同一个罐头上

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:59:57.557

## 答案 1

实现 IUserRepository 的 CouchbaseUserRepository 非常有意义。您的所有应用程序逻辑仅使用接口，因此如果您稍后切换到 Mongo，您只需让您的 MongoUserRepository 实现相同的接口。

## 答案 2

如果您正在构建一个大型应用程序，那么肯定会使用两层接口：数据库级别和框架级别。如果它不是那么大，它可能太多了。在任何一种情况下，在您的框架级别创建接口都不会是不正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T16:05:43.617

这两个问题都属于编码和设计风格领域。因此，它们可能更适合 Programmers 站点。( [https://softwareengineering.stackexchange.com/](https://softwareengineering.stackexchange.com/) )

在处理设计问题时，领先的做法很明确——您应该有一个定义数据库层的接口，然后您可以轻松地注入一种新的数据访问类型。

如果对接口没有功能需求（正如您在问题中描述的那样），则对接口的需求是为了提供清晰性——它是使您的系统更清晰的编码风格。

例如，在联系人管理系统中，为定义联系人的数据库/系统“对象”定义接口可能是有意义的。然后另外为人和组织制作接口。这在此应用程序的上下文中很有帮助。为文档管理系统创建这样的接口是没有意义的。对于他们两个，您都希望为 DB 注入定义接口。

作为设计师和程序员，你已经决定——在设计系统时，在风格选择方面没有硬性规定。

# java - 如何在java中将FileInputStream转换为字符串？

> ID：15161553
> 
> 赞同：27
> 
> 时间：2013-03-01T15:47:23.093
> 
> 标签：java, fileinputstream

在我的 java 项目中，我将 FileInputStream 传递给一个函数，我需要转换（将 FileInputStream 类型转换为字符串），怎么做。？？

```
public static void checkfor(FileInputStream fis) {
   String a=new String;
   a=fis         //how to do convert fileInputStream into string
   print string here
} 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-01T15:53:31.750

您不能直接将其转换为字符串。您应该实现类似这样的内容将此代码添加到您的方法中

```
 //Commented this out because this is not the efficient way to achieve that
    //StringBuilder builder = new StringBuilder();
    //int ch;
    //while((ch = fis.read()) != -1){
    //  builder.append((char)ch);
    //}
    //          
    //System.out.println(builder.toString()); 
```

使用 Aubin 的解决方案：

```
public static String getFileContent(
   FileInputStream fis,
   String          encoding ) throws IOException
 {
   try( BufferedReader br =
           new BufferedReader( new InputStreamReader(fis, encoding )))
   {
      StringBuilder sb = new StringBuilder();
      String line;
      while(( line = br.readLine()) != null ) {
         sb.append( line );
         sb.append( '\n' );
      }
      return sb.toString();
   }
} 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-03-01T15:49:22.590

```
public static String getFileContent(
   FileInputStream fis,
   String          encoding ) throws IOException
 {
   try( BufferedReader br =
           new BufferedReader( new InputStreamReader(fis, encoding )))
   {
      StringBuilder sb = new StringBuilder();
      String line;
      while(( line = br.readLine()) != null ) {
         sb.append( line );
         sb.append( '\n' );
      }
      return sb.toString();
   }
} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2018-02-21T22:02:41.500

使用 Apache commons IOUtils 函数

```
import org.apache.commons.io.IOUtils;

InputStream inStream = new FileInputStream("filename.txt");
String body = IOUtils.toString(inStream, StandardCharsets.UTF_8.name()); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-01T15:54:19.330

不要犯依赖或不必要地转换/丢失端行字符的错误。一个字一个字地做。不要忘记使用正确的字符编码来解释流。

```
public String getFileContent( FileInputStream fis ) {
    StringBuilder sb = new StringBuilder();
    Reader r = new InputStreamReader(fis, "UTF-8");  //or whatever encoding
    int ch = r.read();
    while(ch >= 0) {
        sb.append(ch);
        ch = r.read();
    }
    return sb.toString();
} 
```

如果你想让它更高效一点，你可以使用字符数组来代替，但老实说，循环遍历字符仍然很快。

```
public String getFileContent( FileInputStream fis ) {
    StringBuilder sb = new StringBuilder();
    Reader r = new InputStreamReader(fis, "UTF-8");  //or whatever encoding
    char[] buf = new char[1024];
    int amt = r.read(buf);
    while(amt > 0) {
        sb.append(buf, 0, amt);
        amt = r.read(buf);
    }
    return sb.toString();
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-08-29T16:41:42.063

[从我在这里](https://stackoverflow.com/a/5445161/1599699)编辑的答案：

```
static String convertStreamToString(java.io.InputStream is) {
    if (is == null) {
        return "";
    }

    java.util.Scanner s = new java.util.Scanner(is);
    s.useDelimiter("\\A");

    String streamString = s.hasNext() ? s.next() : "";

    s.close();

    return streamString;
} 
```

这避免了所有错误并且运行良好。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-11-06T18:39:02.983

使用以下代码---->

```
try {
    FileInputStream fis=new FileInputStream("filename.txt");
    int i=0;    
    while((i = fis.read()) !=-1 ) {  // to reach until the laste bytecode -1
        System.out.print((char)i);   /* For converting each bytecode into character */ 
    }
    fis.close();
} catch(Exception ex) {
    System.out.println(ex); 
} 
```

# android - Nonin Onyx II 9560 数据

> ID：15161555
> 
> 赞同：0
> 
> 时间：2013-03-01T15:47:30.680
> 
> 标签：android, bluetooth

我正在创建一个 android 应用程序，以使用蓝牙接口准备好脉搏血氧仪数据。我能够连接并且看到数据进入，但它与 OEM 规范中定义的任何格式（13 或 2、7、8）都不匹配。

这是我得到的数据转储。有谁知道这可能是什么？

谢谢！

```
Hex Dump of data Read [54] 
 e2 00 00 32 80 00 00 00 00 01 00 2a 50 79 00 26    "...2.......*Py.&"
 80 00 00 00 80 00 80 00 00 00 00 00 00 00 00 80    "................"
 00 00 00 08 00 1c 05 01 00 00 94 97 01 91 00 01    "................"
 01 00 00 00 00 00 

                             "......" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T00:10:33.820

从 Nonin 开发人员那里得知，这只是从设备接收到的初始消息。在收到最终测量数据之前，android 设备必须响应并接收一组事务。

我正在使用 HDP 配置文件。使用 HDP 时，您必须遵循 IEEE 11073 规范。如果您想要串行数据，则必须使用 SPP（串行端口配置文件）。

# c# - 如何在画布中移动矩形？

> ID：15161557
> 
> 赞同：1
> 
> 时间：2013-03-01T15:47:51.487
> 
> 标签：c#, wpf, canvas

如果我想在 Canvas 中移动一个矩形，我是否必须修改 Top 和 Left 属性？那是我认为可能的唯一方法。我正在制作一个基于图块的游戏，我想要移动的矩形充满了敌人和我的英雄的图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:49:52.800

您还可以在矩形上使用 RenderTransform。

```
<Window x:Class="WpfApplication2.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Canvas>
        <Rectangle Width="10" Height="10" Fill="Red">
            <Rectangle.RenderTransform>
                <TranslateTransform X="10" Y="10"/>
            </Rectangle.RenderTransform>
        </Rectangle>
    </Canvas>
</Window> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T15:58:30.350

如果您的游戏通常基于图块，则您不会移动图块。您将有一个固定的瓷砖网格，您只需移动内容。例如，想想棋盘。当一个棋子从正方形 A1 移动到 A7 时，您并没有将 A1 移动到 A7，而是将 A1 中的棋子移动到 A7。即使您的瓦片地图是可滚动的，您也希望移动包含瓦片的网格而不是单个瓦片。

您可以为此任务使用 WPF Grid 控件，它允许您定义行数和列数，并且在每个网格单元格中您可以容纳一个图像控件。然后可以将每个图像源绑定到模型的各个图块。

# php - 会话无法识别

> ID：15161559
> 
> 赞同：1
> 
> 时间：2013-03-01T15:47:53.933
> 
> 标签：php, session, cookies

昨天我花了大约 45 分钟试图研究和解决这个问题，所以希望有人有另一个想法我可以尝试。

它从我的一个 PHP 脚本开始，检测到会话`$_SESSION`为空，因此它停止执行其余部分并为我抛出错误。

整个项目在该服务器上运行了至少半年，没有任何问题，此后代码或服务器没有更新。

这是我当时所做的：我创建了一个新的 PHP 文件进行测试，确保`<?php ?>`容器之前或之后没有任何内容，然后编写了以下代码：

```
session_start();
var_dump($_SESSION);
$_SESSION['test'] = 5; 
```

然后我自己反复运行文件，它总是想出一个空会话。

我之前遇到过这个问题，所以我检查了服务器上会话文件所在的文件夹（在我的情况下`/var/lib/php5`），确保它具有正确的目录所有者和权限，删除其中的所有文件并重新启动 apache。没有骰子...

我再次运行该文件几次，每次运行都创建了一个新的会话文件，并且会话文件确实包含 test=5 条目，因此会话确实可以正确写入。

所以我检查了浏览器的cookies。据我所知，它们在那里并且正在工作 - phpsessid cookie 和我的网站创建的另一个 cookie 都在那里。如果我删除所有 cookie，然后再次运行我的测试文件，则`phpsessid`cookie 会正常重新创建，并且确实包含作为会话文件创建的相同会话 id。

之后我还添加`var_dump(session_id());`了代码`session_start();`，每次脚本运行时它都会给我一个全新的会话 ID。

我们正在运行一个尚不支持的 PHP 版本`session_status()`，所以这也不是一个选择（不确定它会做什么，反正我在这里很盲目地飞行）。

因此，我们知道会话创建正确，文件包含数据，cookie 包含正确的 id。

据我所知，问题必须在于浏览器没有将 cookie 数据发送回服务器，或者服务器没有将 cookie 中的会话 ID 识别为现有会话。

当我测试这个时，Firefox 想要安装更新，所以我运行了更新，但没有任何变化。Firefox 设置为接收 cookie，我没有发现任何可以阻止它们的异常设置。

鉴于这已经运行了超过 6 个月，因此一定是发生了一些奇怪的事故，但我对 Linux 或 PHP 和会话的内部工作方式了解得不够多，甚至不知道从哪里开始诊断。

在某些时候，我确实尝试`session_write_close()`了它并没有改变任何东西（没有它，我的整个项目一直运行良好）。

唯一有效的是：

```
 $c = $_COOKIE['phpsessid'];
 session_name($c);
 session_start();
 var_dump($_SESSION);
 $_SESSION['test'] = 5; 
```

但是我`session_start`在大量页面中使用并且不想通过所有这些页面来输入我一开始就不需要的代码......

有什么想法吗？

提前致谢！

- - 编辑 - -

我再次检查了这个问题，我可以确认 cookie 名称`phpsessid`不是`PHPSESSID`（感谢您指出这一点，@Cobra_Fast），所以这越来越接近问题的原因。我进入`php.ini`文件将值`session.name`放入引号中，然后重新启动 apache，但仍然没有变化 - cookie 名称仍然是小写的。我还没有在计算机上找到防病毒程序，并且我怀疑是否有任何网络安全可以做到这一点......如果 PHP 设置如@Cobra_Fast 建议的那样损坏，如何解决这个问题？刚刚编辑文件没有帮助......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T16:06:15.390

又测试了一番，我们发现了一件很奇怪的事情：只有一台客户端电脑受到了影响！我们在另一台计算机上运行代码，它工作正常，会话 cookie 被正确写入和读取。所以根本不是服务器在起作用！我不知道这台计算机如何只是将 cookie 名称转换为小写 - 这根本没有意义，特别是因为它发生在两个浏览器中......但至少我们有一个针对这种情况的“修复”，它是由于他们立即表示将检查该计算机并在需要时重新安装它，因此我们无法控制。我现在对此感到非常困惑，但至少结束了:-) 感谢您的回复！

# powershell - 如何将批处理文件的参数内部传递到 powershell 脚本？

> ID：15161562
> 
> 赞同：0
> 
> 时间：2013-03-01T15:48:03.117
> 
> 标签：powershell, batch-file, arguments, argument-passing

我正在尝试通过 bat 文件调用 powershell 脚本，如下所示；

Bat 文件名为 Script .bat ，其当前文件如下；

```
Powershell -sta -Windowstyle Hidden Script.Ps1 
```

我正在将一个参数传递给 bat 文件，如何将它传递给 bat 文件中的 powershell 脚本？

如果需要任何问题或确认，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T15:50:45.140

在您的 shell 脚本（批处理文件）中，您可以编写：

```
powershell -file script.ps1 %1 
```

%1 将替换为 shell 脚本的第一个命令行参数，它将作为第一个参数传递给 script.ps1。

账单

# ios - 如何防止文本像 UITextView 一样被截断？

> ID：15161564
> 
> 赞同：1
> 
> 时间：2013-03-01T15:48:16.513
> 
> 标签：ios, uikit, uilabel, uitextview

我有一个 UILabel 和一个 UITextView 都具有相同的文本（字符串“SnellRoundhand”，Snell Roundhand Bold 字体，点大小 21）。UITextView 中的文本显示正确，但 UILabel 的文本在左侧和右侧被截断。如何让标签中的文本正确显示？

![https://twitter.com/dandelarosa64/status/307549623717867520/photo/1](../Images/418333e97fd6a4a4e558b819b3e6ea80.png)

一些注意事项：

*   扩展标签的框架不起作用，因为它可能会解决文本右侧的截断问题，但不能解决左侧的截断问题。
*   我不能以便宜的方式让文本居中；文本必须保持现在的任何对齐方式。
*   我不能将所有内容都更改为 UITextViews 的原因是因为我的应用程序在后台进行了一些处理，并且每当实例化 UITextView 时它都会崩溃。我希望我可以通过使用 UILabel 来渲染文本来解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T18:05:09.867

在 iOS 6 中，UILabel 的一个非常好的新特性是它支持属性字符串。属性字符串可以包括段落边距。因此，您可以为字符串添加边距，从而确保标签边缘和字符串的绘制之间会有一些额外的空间。

我书的这一部分有示例代码，可以为 UILabel 中绘制的字符串添加边距：

[http://www.aeth.com/iOSBook/ch23.html#_attributed_strings](http://www.apeth.com/iOSBook/ch23.html#_attributed_strings)

如果您想在 iOS 6 之前的系统上运行，您可以继承 UILabel 以强制从标签边缘插入文本，如以下代码所示（也来自我的书）：

```
- (void)drawTextInRect:(CGRect)rect {
    [super drawTextInRect:CGRectInset(rect, 5.0, 5.0)];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-08T15:46:56.367

在 iOS 6 上，UITextView 在每一侧都有边距，您可以调整内容插入以防止文本使用这些边距。

> [textView setContentInset:UIEdgeInsetsMake(-8, -8, -8, -8)];

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T17:18:46.053

我没有一个好的答案，但我可以建议一个可以做你想做的事情的组合，并且可能会给你一些有用的想法。这个问题似乎暗示了 Label 和 TextView 处理时髦字体的基本问题。

这个概念很简单：

*   使用左（或右）对齐调整 TextField 的大小以适合内容。
*   稍微扩大文本字段的宽度。
*   将理由更改为居中。

这将产生一个足够宽的字段以显示文本而无需剪切（如果您将其放大到适当的数量）。我知道您说过您不能更改文本对齐方式，但是这样做只会将文本移动一两点，最终会到达显示全文所需的位置。该字段以大小结束，文本位于*应有*的位置。例如：

```
self.textField.textAlignment = NSTextAlignmentLeft;
[self.textField sizeToFit];
CGRect frame = self.textField.frame;
frame.size.width += 4;
self.textField.frame = frame;
self.textField.textAlignment = NSTextAlignmentCenter; 
```

这*行得通*。如果它对您没有直接用处，我希望它能给您一些想法。

我尝试过的没有帮助的方法是继承 UITextField 并覆盖**textRectForBounds:**以扩大用于绘制文本的区域。我可以将文本起始位置稍微向右移动，但它仍然剪裁了左边缘。关闭**clipsSubviews**属性没有帮助。似乎苹果的问题在这里。

# jquery - 根据单选按钮更改 Jquery AJAX 帖子 URL

> ID：15161571
> 
> 赞同：0
> 
> 时间：2013-03-01T15:48:29.033
> 
> 标签：jquery, html, ajax, radio

我目前有一个产品搜索框；您可以通过墨盒名称或打印机名称进行搜索。这些是不同的 SQL 查询，所以我为查询制作了适当的 PHP 文件，但是我无法让 Jquery 检查单选按钮的值，然后根据该单选按钮修改发布文件。

当用户对表单进行任何操作时，它需要检查单选按钮更新。

任何帮助将不胜感激！

这是jQuery：

```
 $("#faq_search_input").watermark("Begin Typing to Search");
        $("#faq_search_input").keyup(function()
        {
            var faq_search_input = $(this).val();
            var dataString = 'keyword='+ faq_search_input;
            if(faq_search_input.length>1)
            {
                var search_method = $("#search_method").val();
                if(search_method == 'Cartridge'){
                    $.ajax({
                        type: "GET",
                        url: "<?php echo $site_Config_Url; ?>/resources/ajax-search.php",
                        data: dataString,
                        beforeSend:  function() {
                            $('input#faq_search_input').addClass('loading');
                        },
                        success: function(server_response){
                            $('#searchresultdata').html(server_response).show();
                            $('span#faq_category_title').html(faq_search_input);

                            if ($('input#faq_search_input').hasClass("loading")) {
                                $("input#faq_search_input").removeClass("loading");
                            }
                        }
                    });
                }else{
                    $.ajax({
                        type: "GET",
                        url: "<?php echo $site_Config_Url; ?>/resources/ajax-search2.php",
                        data: dataString,
                        beforeSend:  function() {
                            $('input#faq_search_input').addClass('loading');
                        },
                        success: function(server_response){
                            $('#searchresultdata').html(server_response).show();
                            $('span#faq_category_title').html(faq_search_input);

                            if ($('input#faq_search_input').hasClass("loading")) {
                                $("input#faq_search_input").removeClass("loading");
                            }
                        }
                    });
                }
            }return false;
        });
    }); 
```

这是表单的 HTML：

```
 <form action="<?php echo $site_Config_Url; ?>controllers/product_Search_Process.Controllers.php" method="get">
<div style="width:885px;padding-left:15px;height:127px;padding-top:50px;margin-left:auto;margin-right:auto;background-image:url(<?php echo $site_Config_Url; ?>/display/img/layout/ink_and_toner_finder.png);">
    <div style="width:400px;height:108px;float:left;padding-top:7px;">
        <div style="width:400px;padding-left:20px;float:left;">
            <div style="float:left;">
                <select name="drop_1" id="drop_1" style="width:300px;">
                    <option value="" selected="selected" disabled="disabled">Select Printer Brand</option>
                    <?php getTierOne(); ?>
                </select>
            </div>
            <div style="width:80px;padding-left:5px;padding-top:5px;float:left;">
                <span id="wait_1">
                    <img alt="Please Wait" src="<?php echo $site_Config_Url; ?>display/img/ui/ajax-loader.gif"/>
                </span>
            </div>
            <div class="clear"></div>
        </div>
        <div class="clear"></div>

        <span id="result_1" style="display: none;"></span>
        <span id="result_2" style="display: none;"></span>

    </div>
    <div style="width:70px;height:115px;float:left;"></div>
    <div style="width:400px;float:left;">
        <h2 style="padding-top:15px;padding-bottom:0;margin-bottom:0;padding-left:10px;">Search by Cartridge or Printer</h2>
        <div class="clear"></div>
        <div style="padding-left:10px;padding-top:10px;">
            <span style="padding-left:10px;"><input type="radio" name="search_method" value="Cartridge" checked>Cartridge</span>
            <span style="padding-left:20px;"><input type="radio" name="search_method" value="Printer">Printer</span>
            <div class="clear"></div>
            <div style="padding-top:5px;">
                <div style="padding-top:5px;float:left;">
                    <input type="text" name="search_text" style="float:left;width:230px;" id="faq_search_input"/>
                </div>
                <div style="padding-left:18px;float:left;">
                    <input id="submit_right" type="submit" name="submit_right" value="Find Ink!" />
                </div>
                <div class="clear"></div>
            </div>
        </div>
        <div id="searchresultdata" class="faq-articles"> </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:54:34.393

要获取所选单选框的值，您可以使用`$('input:radio[name="search_method"]:checked').val();`

```
$("#faq_search_input").watermark("Begin Typing to Search");
$("#faq_search_input").keyup(function() {
    updateResult();
    return false;
});

$('input[name="search_method"]').on('click', updateResult)

function updateResult(){
    var faq_search_input = $('#faq_search_input').val();
    var dataString = 'keyword='+ faq_search_input;
    if(faq_search_input.length>1)
    {
        var search_method = $('input:radio[name="search_method"]:checked').val();

        $.ajax({
            type: "GET",
            url: "<?php echo $site_Config_Url; ?>/resources/ajax-search" + (search_method == 'Cartridge'? '': '2') + ".php",
            data: dataString,
            beforeSend:  function() {
                $('input#faq_search_input').addClass('loading');
            },
            success: function(server_response){
                $('#searchresultdata').html(server_response).show();
                $('span#faq_category_title').html(faq_search_input);

                if ($('input#faq_search_input').hasClass("loading")) {
                    $("input#faq_search_input").removeClass("loading");
                }
            }
        });
    }
} 
```

# cuda - 当大小不是 2 的幂时向量和的减少？

> ID：15161575
> 
> 赞同：4
> 
> 时间：2013-03-01T15:48:38.567
> 
> 标签：cuda

对于 GPU 上的经典归约算法，如果向量的大小是 2 的幂，它就可以完美地工作。如果不是这样怎么办？在某些时候，我们将不得不找到奇数个元素的总和。处理它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T16:21:05.573

您可以计算大小不是 2 次方的矩阵的总和。看例子：

```
#include <math.h>
#define N 1022 //total size
__global__ void sum(int *A, int *C)
{
        __shared__ int temp[blockDim.x];
        int idx = threadIdx.x+blockDim.x*blockIdx.x;
        int local_idx = threadIdx.x;
        temp[local_idx] = A[idx];
        int i=ceil(blockDim.x/2);
        __syncthreads();
        while(i!=0)
        {
                 if(idx+i<N && local_idx<i)
                          temp[local_idx] += tmp[local_idx+i];
                 i/=2;
                 __syncthreads();

        }
       if(local_idx == 0)
           C[blockIdx.x] = temp[0]; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-16T07:56:36.140

放

`int i = 1024;`

代替

`int i=ceil(blockDim.x/2);`

即 int i 应该是整数 ^ 2 > N。

# java - 如何关闭 YIntervalRenderer 中的形状？

> ID：15161576
> 
> 赞同：2
> 
> 时间：2013-03-01T15:48:39.737
> 
> 标签：java, jfreechart

发现无法关闭访问渲染器本身的形状。

```
renderer.setSeriesShape(0, null); 
```

禁用系列形状，但会导致来自供应商的形状。

```
renderer.setAutoPopulateSeriesShape(false); 
```

禁用供应商，但会导致默认形状绘制。

```
renderer.setBaseShape(null); 
```

导致异常，因为此处不允许 null 作为参数。

那么在哪里关闭形状呢？可能在情节或图表对象中？找不到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T00:26:20.520

`Shape`您可以为任何系列提供一个空的：

```
YIntervalRenderer r = new YIntervalRenderer();
r.setSeriesShape(0, new Rectangle()); 
```

# sql - 需要说明 ON DUPLICATE KEY UPDATE 的 SQL 查询

> ID：15161578
> 
> 赞同：0
> 
> 时间：2013-03-01T15:48:41.943
> 
> 标签：sql, oracle

我正在尝试使用以下查询：

```
 INSERT INTO table1(col1, col2, col3)
   SELECT ss.col1, ss.col2, ss.col3
   FROM table2 ss
   ON DUPLICATE KEY UPDATE
   col1=ss.col1,
   col2=ss.col2,
   col3=ss.col3; 
```

不幸的是，我得到的只是“SQL 查询未正确结束”消息。在这个例子中，哪里的语法是错误的？

插入时会弹出错误消息

```
ON DUPLICATE KEY UPDATE
       col1=ss.col1,
       col2=ss.col2,
       col3=ss.col3; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T15:53:15.827

Oracle 不支持该`ON DUPLICATE KEY UPDATE`语法。这似乎是特定于 MySQL 的语法。

最有可能的是，您似乎想要一个`MERGE`声明

```
MERGE INTO table1 t1
  USING (SELECT col1, col2, col3 
           FROM table2) ss
     ON (t1.col1 = ss.col1) -- whatever the key is
   WHEN MATCHED THEN
     UPDATE SET t1.col1 = ss.col1,
                t1.col2 = ss.col2,
                t1.col3 = ss.col3
   WHEN NOT MATCHED THEN 
     INSERT( t1.col1, t1.col2, t1.col3 )
       VALUES( ss.col1, ss.col2, ss.col3 ) 
```

# ios - 输入/清除特定的 UITextfields？

> ID：15161579
> 
> 赞同：0
> 
> 时间：2013-03-01T15:48:42.977
> 
> 标签：ios, objective-c, cocos2d-iphone, keyboard, uitextfield

我的目标是拥有文本框 - 每个级别的固定数量，供人们猜测隐藏的单词。我不希望 UITextfield 被点击然后调出键盘，我希望有一个不同的按钮来调出键盘 - 如果可能的话。

如果每个框都是一个单独的文本字段，我该如何输入文本。当用户在标准苹果键盘上打字时，如何将每个字符输入到某个文本字段中。我希望文本在按下键后立即显示在框中。

我也无法清除某些字母。假设一个用户拼错了一些东西并且直到键盘作为第一响应者才意识到，如果其余的单词拼写正确并且程序清除它，我怎么能做到这样用户可以点击两个框?

有没有什么方法可以编写程序以便仅在文本字段为空时才输入文本？继续上面的例子，他们切换两个字母，点击清除，然后调出小键盘，然后按下下一个键填充空框。不允许程序在只包含单个字符的已用文本字段中输入文本？

我正在使用 Cocos2d - 我不知道这是否会有所不同。我希望你明白我的意思，虽然我不太擅长解释。

提前感谢您的时间和任何帮助:)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:00:38.897

与其拥有不想让用户编辑的文本框，不如使用标签？

要显示键盘，您需要将其链接到一些 UITextField （或类似的）。您可以使用不可见的 UITextField，然后监视输入并将字符发送到相应的标签。参考[这个问题](https://stackoverflow.com/questions/4384072/how-to-show-a-keyboard-via-press-a-nsbutton)。

要检查文本字段中是否有任何内容：

`[textField.text length] > 0`，但我会使用标签而不是文本字段。

我真的不明白你问题的其他部分。

# diff - 为什么托管和非托管解决方案文件在 MS CRM 中如此不同？

> ID：15161582
> 
> 赞同：2
> 
> 时间：2013-03-01T15:48:50.997
> 
> 标签：diff, dynamics-crm-2011, dynamics-crm

我在 MS Dynamics CRM 中创建了解决方案，然后将其导出为托管和非托管解决方案。解压缩两者，我在`customizations.xml`文件上运行 diff 工具。而且它们之间有太多的区别，很难说到底是什么改变了，为什么改变了。

这些变化是否至关重要？

我可以通过将`<Managed>`标签中的值更改为`1`而不是创建托管解决方案`0`吗？会安全吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T13:51:15.977

如果您将解决方案交付给客户，则“具有适当的发布者和版本”的适当托管解决方案将是非常关键的部分。

如果您深入定制，您就会明白，仅更改托管标签并不能真正形成正确意义上的托管解决方案。

通过更新托管标签，您可以从 CRM 安装/卸载解决方案，但如果您将深入了解托管解决方案的正确使用，您可以在字段级别控制“哪个字段可自定义，哪个字段不可自定义”，以便您可以以这样的方式控制 CRM，以便之后导入的其他解决方案不会破坏您的自定义，您将开始看到差异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T16:54:08.330

围绕托管和非托管解决方案的差异细节的文档极少。根据我的个人经验，在指定托管解决方案时需要更多元数据。例如，如果一个实体是托管的，它必须包含元数据来说明您是否可以向实体添加其他字段，或者更新表单等。

至于这些变化是否至关重要？人们会假设它们对于定义描述托管解决方案所需的所有元数据至关重要。

是否可以将标签更改为 1 而不是 0？是的。它是否受支持/会起作用吗？没有。托管解决方案和非托管解决方案之间的 XML 存在许多未记录的差异。在最好的情况下，只需更改托管标签就会在导入时炸弹，最坏的情况下，会破坏您的 CRM 解决方案环境。

# c# - 使用 ExecuteStoreQuery 从数据库中获取行，而不知道表中的列数

> ID：15161584
> 
> 赞同：0
> 
> 时间：2013-03-01T15:48:53.470
> 
> 标签：c#, database, entity-framework, sqlite, executestorequery

我正在尝试使用`ExecuteStoreQuery`我的`ObjectContext`.

问题是我并不总是知道我正在查询的表中有多少列。理想情况下，我希望每个提取的行都只是一个`string[]`对象。

我在这里查看了示例 2：http: [//msdn.microsoft.com/en-us/library/vstudio/dd487208 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/vstudio/dd487208(v=vs.100).aspx)

它接近我想要做的，除了我不知道`TElement`我正在获取的结构，所以我不能像他们在示例中那样定义一个结构。

下面是我的一些代码（由于 没有编译`????` `TElement`）。下面的代码试图获取表信息，所以在这种情况下，我确实知道行的结构，但通常我不知道。

有没有办法做到这一点`ExecuteStoreQuery`？还是有不同的方法，同时仍然使用我的现有连接`ObjectContext`（而不是打开到数据库的新 SQL 连接）？

```
public void PrintColumnHeaders(NWRevalDatabaseEntities entities, string tableName)
{
    string columnListQuery = string.Format("PRAGMA table_info({0})", tableName);

    var result = entities.ExecuteStoreQuery<????>(columnListQuery);

    foreach (string[] row in result)
    {
        string columnHeader = row[1]; // Column header is in second column of table
        Console.WriteLine("Column Header: {0}", columnHeader);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T11:19:59.810

我根据 Gert Arnold 的评论得到了这个工作。此外，我花了一些力气才发现我需要一个 SQLiteConnection，而不是我可以直接从 ObjectContext 获得的 EntityConnection。[这个](https://stackoverflow.com/questions/6830410/can-i-use-the-connection-from-entity-framework-or-should-i-create-a-new-one)问题的答案帮助了我。

工作代码如下：

```
public static void PrintColumnHeaders(NWRevalDatabaseEntities entities, string tableName)
{
    var sc = ((System.Data.EntityClient.EntityConnection)entities.Connection).StoreConnection;
    System.Data.SQLite.SQLiteConnection sqliteConnection = (System.Data.SQLite.SQLiteConnection)sc;

    sqliteConnection.Open();
    System.Data.Common.DbCommand cmd = sc.CreateCommand();
    cmd.CommandType = System.Data.CommandType.Text;
    cmd.CommandText = string.Format("PRAGMA table_info('{0}');", tableName);
    System.Data.Common.DbDataReader reader = cmd.ExecuteReader();

    if (reader.HasRows)
    {
        object[] values = new object[reader.FieldCount];
        while (reader.Read())
        {
            int result = reader.GetValues(values);
            string columnHeader = (string)values[1]; // table_info returns a row for each column, with the column header in the second column.
            Console.WriteLine("Column Header: {0}", columnHeader);
        }
    }
    sqliteConnection.Close();
} 
```

# emacs - 使 emacs rgrep 默认为最后一个搜索词而不是该点的词

> ID：15161592
> 
> 赞同：0
> 
> 时间：2013-03-01T15:49:31.303
> 
> 标签：emacs, elisp

在 emacs 中，有没有办法让 rgrep 默认搜索传递给它的最后一个词而不是当前的词？我几乎总是想做前者而不是后者。我查看了 rgrep 的帮助，但它在这一点上保持沉默。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T16:46:08.313

如果您仔细阅读源代码，您会发现通过设置变量可以得到您想要的`find-tag-default-function`。您还可以重新定义函数`grep-tag-default`，或通过 将属性与主模式相关联[`put`](http://www.gnu.org/software/emacs/manual/html_node/elisp/Symbol-Plists.html)。这是设置变量的解决方案：

```
(setq find-tag-default-function 'last-grep-tag)
(defun last-grep-tag ()
  (if grep-regexp-history
      (car grep-regexp-history)
    "")) 
```

# android - 适用于 android 的 opencv 2.4.4 不起作用

> ID：15161594
> 
> 赞同：3
> 
> 时间：2013-03-01T15:49:36.513
> 
> 标签：android, opencv

我已经按照 OpenCV 网站上的教程进行操作：http: [//opencv.org/platforms/android.html](http://opencv.org/platforms/android.html) 在 Eclipse IDE 上配置 OpenCV 以进行 android 开发，我已经编译了 OpenCV 附带的所有示例，并且它们编译得很好，并带有一些警告. 但是当我在模拟器上运行编译包时，它会显示一条错误消息，提示**“OpenCV 未正确初始化。应用程序将被关闭”** ，例如，当我在模拟器上运行**“15 拼图”**示例时，它会显示以下内容：

![在此处输入图像描述](../Images/0d99ccc516e9955ba1bd9205ceb8b0b9.png)

**编译器警告：**

![](../Images/e3e0410d29080576a9e8fe4be663878e.png)

**日志输出**

```
03-01 18:08:32.519: I/ActivityManager(61): Starting: Intent {     act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000     cmp=org.opencv.samples.puzzle15/.Puzzle15Activity } from pid 136
03-01 18:08:32.710: I/WindowManager(61): Setting rotation to 1, animFlags=1
03-01 18:08:32.880: I/ActivityManager(61): Config changed: { scale=1.0 imsi=310/260     loc=en_US touch=3 keys=1/1/2 nav=3/1 orien=2 layout=34 uiMode=17 seq=15}
03-01 18:08:33.069: D/CameraBridge(509): Attr count: 3
03-01 18:08:33.089: D/JavaCameraView(509): Java camera view ctor
03-01 18:08:33.120: I/ActivityManager(61): Start proc     org.opencv.engine:OpenCVEngineProcess for service org.opencv.engine/.OpenCVEngineService:     pid=525 uid=10042 gids={}
03-01 18:08:33.269: I/ActivityManager(61): Displayed     org.opencv.samples.puzzle15/.Puzzle15Activity: +556ms
03-01 18:08:33.639: D/dalvikvm(33): GC_EXPLICIT freed 9K, 50% free 2719K/5379K, external     1625K/2137K, paused 503ms
03-01 18:08:33.858: D/CameraBridge(509): call surfaceChanged event
03-01 18:08:34.378: D/dalvikvm(33): GC_EXPLICIT freed <1K, 50% free 2719K/5379K,     external 1625K/2137K, paused 741ms
03-01 18:08:34.588: I/OpenCVEngine/Service(525): Service starting
03-01 18:08:34.598: I/OpenCVEngine/Service(525): Engine binder component creating
03-01 18:08:34.618: D/dalvikvm(525): Trying to load lib     /data/data/org.opencv.engine/lib/libOpenCVEngine.so 0x40515178
03-01 18:08:34.618: D/dalvikvm(33): GC_EXPLICIT freed <1K, 50% free 2719K/5379K,     external 1625K/2137K, paused 229ms
03-01 18:08:34.648: D/OpenCVEngine(525): Using ARM HW detector
03-01 18:08:34.659: D/dalvikvm(525): Added shared lib     /data/data/org.opencv.engine/lib/libOpenCVEngine.so 0x40515178
03-01 18:08:34.659: D/dalvikvm(525): No JNI_OnLoad found in      /data/data/org.opencv.engine/lib/libOpenCVEngine.so 0x40515178, skipping init
03-01 18:08:34.659: D/dalvikvm(525): Trying to load lib     /data/data/org.opencv.engine/lib/libOpenCVEngine_jni.so 0x40515178
03-01 18:08:34.668: D/dalvikvm(525): Added shared lib     /data/data/org.opencv.engine/lib/libOpenCVEngine_jni.so 0x40515178
03-01 18:08:34.668: D/dalvikvm(525): No JNI_OnLoad found in     /data/data/org.opencv.engine/lib/libOpenCVEngine_jni.so 0x40515178, skipping init
03-01 18:08:34.668: D/OpenCVEngine/JNI(525): Java_org_opencv_engine_BinderConnector_Init
03-01 18:08:34.668: I/OpenCVEngine/JNI(525): Creating new component
03-01 18:08:34.668: I/OpenCVEngine/JNI(525): New component created successfully
03-01 18:08:34.678: I/OpenCVEngine/Service(525): Service started successfully
03-01 18:08:34.678: I/OpenCVEngine/Service(525): Service onBind called for intent Intent     { act=org.opencv.engine.BIND }
03-01 18:08:34.688: D/OpenCVManager/Helper(509): Service connection created
03-01 18:08:34.688: D/OpenCVEngine(525): OpenCVEngine::OnTransact(1,16)
03-01 18:08:34.688: D/OpenCVEngine(525): OpenCVEngine OCVE_GET_ENGINE_VERSION request
03-01 18:08:34.688: D/OpenCVEngine(525): OpenCVEngine::GetVersion()
03-01 18:08:34.688: D/OpenCVManager/Helper(509): Trying to get library path
03-01 18:08:34.688: D/OpenCVEngine(525): OpenCVEngine::OnTransact(2,16)
03-01 18:08:34.688: D/OpenCVEngine(525): OpenCVEngine OCVE_GET_LIB_PATH_BY_VERSION      request
03-01 18:08:34.688: D/OpenCVEngine(525): OpenCVEngine::GetLibPathByVersion(2.4.3)
03-01 18:08:34.688: D/OpenCVEngine(525): OpenCVEngine::GetLibPathByVersion(2.4.3) impl
03-01 18:08:34.688: D/OpenCVEngine(525): PackageInfo::PackageInfo: package arch ARMv5
03-01 18:08:34.688: D/JavaBasedPackageManager(525):     JavaBasedPackageManager::GetInstalledPackages() begin
03-01 18:08:34.688: D/JavaBasedPackageManager(525): GetObjectClass call
03-01 18:08:34.688: D/JavaBasedPackageManager(525): GetMethodID call
03-01 18:08:34.688: D/JavaBasedPackageManager(525): Java package manager call
03-01 18:08:34.908: D/JavaBasedPackageManager(525): Package info conversion
03-01 18:08:34.908: D/OpenCVEngine(525): PackageInfo::PackageInfo("org.opencv.engine",     "/data/data/org.opencv.engine/lib", "2.5")
03-01 18:08:34.908: D/OpenCVEngine(525): Trying to load info library     "/data/data/org.opencv.engine/lib/libopencv_info.so"
03-01 18:08:34.908: I/OpenCVEngine(525): OpenCV package "org.opencv.lib_v24_armv5"     revision "4.1" found
03-01 18:08:34.918: W/dalvikvm(525): JNI WARNING: 0x40530680 is not a valid JNI     reference
03-01 18:08:34.918: W/dalvikvm(525):              in Ldalvik/system/NativeStart;.run ()V     (DeleteLocalRef)
03-01 18:08:34.918: I/dalvikvm(525): "Binder Thread #1" prio=5 tid=7 RUNNABLE
03-01 18:08:34.918: I/dalvikvm(525):   | group="main" sCount=0 dsCount=0 obj=0x40510908     self=0x116d20
03-01 18:08:34.918: I/dalvikvm(525):   | sysTid=531 nice=0 sched=0/0 cgrp=default     handle=1145392
03-01 18:08:34.918: I/dalvikvm(525):   | schedstat=( 105702049 76397389 24 )
03-01 18:08:34.918: I/dalvikvm(525):   at dalvik.system.NativeStart.run(Native Method)
03-01 18:08:34.918: E/dalvikvm(525): VM aborting
03-01 18:08:35.052: W/IInputConnectionWrapper(136): showStatusIcon on inactive     InputConnection
03-01 18:08:35.058: I/DEBUG(31): *** *** *** *** *** *** *** *** *** *** *** *** *** ***     *** ***
03-01 18:08:35.058: I/DEBUG(31): Build fingerprint:     'generic/google_sdk/generic:2.3.4/GINGERBREAD/123630:eng/test-keys'
03-01 18:08:35.058: I/DEBUG(31): pid: 525, tid: 531  >>>     org.opencv.engine:OpenCVEngineProcess <<<
03-01 18:08:35.058: I/DEBUG(31): signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr     deadd00d
03-01 18:08:35.058: I/DEBUG(31):  r0 fffffec4  r1 deadd00d  r2 00000026  r3 00000000
03-01 18:08:35.058: I/DEBUG(31):  r4 800a45c0  r5 800857c4  r6 800857c4  r7 43db2c10
03-01 18:08:35.058: I/DEBUG(31):  r8 00000000  r9 40530680  10 00000020  fp 002987a8
03-01 18:08:35.058: I/DEBUG(31):  ip 800a4720  sp 43db2a28  lr afd19375  pc 80045a4a      cpsr 20000030
03-01 18:08:35.288: I/DEBUG(31):          #00  pc 00045a4a  /system/lib/libdvm.so
03-01 18:08:35.288: I/DEBUG(31):          #01  pc 00037748  /system/lib/libdvm.so
03-01 18:08:35.288: I/DEBUG(31):          #02  pc 000386ec  /system/lib/libdvm.so
03-01 18:08:35.298: I/DEBUG(31):          #03  pc 0003871e  /system/lib/libdvm.so
03-01 18:08:35.298: I/DEBUG(31):          #04  pc 00039236  /system/lib/libdvm.so
03-01 18:08:35.298: I/DEBUG(31): code around pc:
03-01 18:08:35.308: I/DEBUG(31): 80045a28 447a4479 ed0cf7d1 20004c09 ee34f7d1 
03-01 18:08:35.308: I/DEBUG(31): 80045a38 447c4808 6bdb5823 d0002b00 49064798 
03-01 18:08:35.308: I/DEBUG(31): 80045a48 700a2226 eea0f7d1 000436b7 00045275 
03-01 18:08:35.308: I/DEBUG(31): 80045a58 0005eb82 fffffec4 deadd00d b510b40e 
03-01 18:08:35.328: I/DEBUG(31): 80045a68 4c0a4b09 447bb083 aa05591b 6b5bca02 
03-01 18:08:35.328: I/DEBUG(31): code around lr:
03-01 18:08:35.328: I/DEBUG(31): afd19354 b0834a0d 589c447b 26009001 686768a5 
03-01 18:08:35.328: I/DEBUG(31): afd19364 220ce008 2b005eab 1c28d003 47889901 
03-01 18:08:35.338: I/DEBUG(31): afd19374 35544306 d5f43f01 2c006824 b003d1ee 
03-01 18:08:35.338: I/DEBUG(31): afd19384 bdf01c30 000281a8 ffffff88 1c0fb5f0 
03-01 18:08:35.338: I/DEBUG(31): afd19394 43551c3d a904b087 1c16ac01 604d9004 
03-01 18:08:35.338: I/DEBUG(31): stack:
03-01 18:08:35.338: I/DEBUG(31):     43db29e8  00000015  
03-01 18:08:35.338: I/DEBUG(31):     43db29ec  afd18407  /system/lib/libc.so
03-01 18:08:35.348: I/DEBUG(31):     43db29f0  afd4270c  /system/lib/libc.so
03-01 18:08:35.348: I/DEBUG(31):     43db29f4  afd426b8  /system/lib/libc.so
03-01 18:08:35.348: I/DEBUG(31):     43db29f8  00000000  
03-01 18:08:35.348: I/DEBUG(31):     43db29fc  afd19375  /system/lib/libc.so
03-01 18:08:35.348: I/DEBUG(31):     43db2a00  00116d20  [heap]
03-01 18:08:35.358: I/DEBUG(31):     43db2a04  afd183d9  /system/lib/libc.so
03-01 18:08:35.358: I/DEBUG(31):     43db2a08  43db2c10  
03-01 18:08:35.358: I/DEBUG(31):     43db2a0c  0005eb82  [heap]
03-01 18:08:35.358: I/DEBUG(31):     43db2a10  800857c4  /system/lib/libdvm.so
03-01 18:08:35.358: I/DEBUG(31):     43db2a14  800857c4  /system/lib/libdvm.so
03-01 18:08:35.358: I/DEBUG(31):     43db2a18  43db2c10  
03-01 18:08:35.358: I/DEBUG(31):     43db2a1c  afd18437  /system/lib/libc.so
03-01 18:08:35.358: I/DEBUG(31):     43db2a20  df002777  
03-01 18:08:35.358: I/DEBUG(31):     43db2a24  e3a070ad  
03-01 18:08:35.368: I/DEBUG(31): #00 43db2a28  40530680  /dev/ashmem/dalvik-heap      (deleted)
03-01 18:08:35.368: I/DEBUG(31):     43db2a2c  8003774d  /system/lib/libdvm.so
03-01 18:08:35.368: I/DEBUG(31): #01 43db2a30  40530680  /dev/ashmem/dalvik-heap     (deleted)
03-01 18:08:35.368: I/DEBUG(31):     43db2a34  800386f1  /system/lib/libdvm.so
03-01 18:08:36.498: D/dalvikvm(61): GC_EXPLICIT freed 45K, 45% free 4987K/9031K,     external 3897K/4867K, paused 196ms
03-01 18:08:37.318: I/BootReceiver(61): Copying /data/tombstones/tombstone_08 to DropBox     (SYSTEM_TOMBSTONE)
03-01 18:08:37.378: D/Zygote(33): Process 525 terminated by signal (11)
03-01 18:08:37.419: I/ActivityManager(61): Process org.opencv.engine:OpenCVEngineProcess      (pid 525) has died.
03-01 18:08:37.419: W/ActivityManager(61): Scheduling restart of crashed service     org.opencv.engine/.OpenCVEngineService in 5000ms
03-01 18:08:37.428: W/System.err(509): android.os.DeadObjectException
03-01 18:08:37.428: W/System.err(509):  at android.os.BinderProxy.transact(Native     Method)
03-01 18:08:37.428: W/System.err(509):  at     org.opencv.engine.OpenCVEngineInterface$Stub$Proxy.getLibPathByVersion(OpenCVEngineInterface    .java:137)
03-01 18:08:37.428: W/System.err(509):  at      org.opencv.android.AsyncServiceHelper$1.onServiceConnected(AsyncServiceHelper.java:182)
03-01 18:08:37.428: W/System.err(509):  at     android.app.LoadedApk$ServiceDispatcher.doConnected(LoadedApk.java:1064)
03-01 18:08:37.428: W/System.err(509):  at     android.app.LoadedApk$ServiceDispatcher$RunConnection.run(LoadedApk.java:1081)
03-01 18:08:37.428: W/System.err(509):  at     android.os.Handler.handleCallback(Handler.java:587)
03-01 18:08:37.428: W/System.err(509):  at     android.os.Handler.dispatchMessage(Handler.java:92)
03-01 18:08:37.428: W/System.err(509):  at android.os.Looper.loop(Looper.java:130)
03-01 18:08:37.428: W/System.err(509):  at      android.app.ActivityThread.main(ActivityThread.java:3683)
03-01 18:08:37.448: W/System.err(509):  at     java.lang.reflect.Method.invokeNative(Native Method)
03-01 18:08:37.448: W/System.err(509):  at     java.lang.reflect.Method.invoke(Method.java:507)
03-01 18:08:37.448: W/System.err(509):  at     com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
03-01 18:08:37.448: W/System.err(509):  at     com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
03-01 18:08:37.448: W/System.err(509):  at dalvik.system.NativeStart.main(Native       Method)
03-01 18:08:37.458: D/OpenCVManager/Helper(509): Init finished with status 255
03-01 18:08:37.458: D/OpenCVManager/Helper(509): Unbind from service
03-01 18:08:37.458: D/OpenCVManager/Helper(509): Calling using callback
03-01 18:08:37.458: E/OpenCVLoader/BaseLoaderCallback(509): OpenCV loading failed!
03-01 18:08:37.728: D/dalvikvm(509): GC_EXTERNAL_ALLOC freed 137K, 49% free 2785K/5379K,     external 2050K/2137K, paused 183ms
03-01 18:08:43.148: I/WindowManager(61): Setting rotation to 0, animFlags=1
03-01 18:08:43.168: I/ActivityManager(61): Config changed: { scale=1.0 imsi=310/260        loc=en_US touch=3 keys=1/1/2 nav=3/1 orien=1 layout=34 uiMode=17 seq=16}
03-01 18:08:45.288: W/IInputConnectionWrapper(509): showStatusIcon on inactive     InputConnection 
```

我正在使用**适用于 android 的 OpenCV 2.4.4 beta**，

**日食 4.2.1 朱诺**，

**Windows 6 x64 位作为开发平台** ，

模拟器以**Google API 11**为目标，这与 iv'e 构建示例项目时使用的相同

我还在模拟器上安装了android mangaer **OpenCV_2.4.4_Manager_2.5_armeabi.apk**。

**任何建议，谢谢**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:47:52.783

试试刚刚发布的 2.4.4 发布包。（[http://sourceforge.net/projects/opencvlibrary/files/opencv-android/2.4.4/OpenCV-2.4.4-android-sdk.zip/download](http://sourceforge.net/projects/opencvlibrary/files/opencv-android/2.4.4/OpenCV-2.4.4-android-sdk.zip/download)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T09:49:46.050

对于从 OpenCV 2.4.4 开始的 OpenCv4Android，在运行任何 OpenCv-Android 应用程序之前必须安装 OpenCV Manager。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T10:55:53.613

尝试安装最后一个 OpenCV 管理器（2.6）。通常，模拟器在真实设备上的工作方式并不完全...你的模拟器的配置是什么？

# ios - iOS：应用主页按钮快捷方式

> ID：15161595
> 
> 赞同：0
> 
> 时间：2013-03-01T15:49:39.007
> 
> 标签：ios

单击主页按钮时无法找到主屏幕快捷方式的 API。我的应用程序播放音频，我希望像 iPod 那样弹出这些类似的快捷方式，让我可以选择停止播放。

有人可以指点我参考吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:55:53.467

这是一个很好的起点：

[远程控制事件](http://developer.apple.com/library/ios/documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/Remote-ControlEvents/Remote-ControlEvents.html#//apple_ref/doc/uid/TP40009541-CH7-SW3)

从苹果文档：

> 使用“正在播放”控件测试您的应用是否正确接收和处理远程控制事件。这些控件在运行 iOS 4.0 或更高版本的最新 iOS 设备上可用。要访问这些控件，请按两次主屏幕按钮，然后向右滑动屏幕底部，直到找到音频播放控件。这些控件将远程控制事件发送到当前或最近播放音频的应用程序。播放控件右侧的图标代表当前正在接收远程控制事件的应用程序。

# rvm - 尝试使用 RVM 安装后“未安装 ruby -2.0.0-p0”

> ID：15161600
> 
> 赞同：0
> 
> 时间：2013-03-01T15:49:43.103
> 
> 标签：rvm, ruby-2.0

如果我运行`rvm install 2.0.0`，它会执行正常步骤（下载、解压缩、配置、编译、安装），但最后会简单地说：

```
ruby-2.0.0-p0 is not installed.
To install do: 'rvm install ruby-2.0.0-p0' 
```

我尝试了以下方法：

*   `rvm remove 2.0.0`
*   `rvm get head`
*   `rvm requirements`
*   `rvm install ruby-2.0.0`

我一直得到相同的结果：没有错误，只是“未安装”。有人知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T19:51:49.070

我遇到了同样的问题并设法解决了。

当我这样做时，`echo $CC`它想出了`/usr/bin/gcc-4.2`. 所以我做了一个`export CC=clang`，然后`rvm reinstall 2.0.0`它起作用了。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T07:12:00.793

rvm 在这里获取 ruby​​ => [http://ftp.ruby-lang.org/pub/ruby/](http://ftp.ruby-lang.org/pub/ruby/)

也许你应该得到正确的 ruby​​ 版本来安装。ruby-2.0.0-rc1 或 ruby​​-2.0.0-rc2 之类的东西是最新的 ruby​​ 版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-15T16:01:15.767

如果您**在打开 Rails 文件夹时**收到此消息，则需要删除文件夹内的 .ruby-version 文件并重新运行`bundle install`：

```
rm .ruby-version
bundle install 
```

# ruby - RSPEC 测试和 Ruby 对象

> ID：15161602
> 
> 赞同：0
> 
> 时间：2013-03-01T15:49:48.587
> 
> 标签：ruby, rspec

所以我正在尝试编写一些代码来使 Ruby 的 RSPEC 测试通过。但是我什至无法通过第一个测试。我想如果我能在这方面得到一点帮助，我就能得到剩下的。但如果这样更容易提供建议，我可以发布其余的测试。

所以它正在构建一个华氏/摄氏度转换器，但使用对象和类而不是仅仅定义几个方法来进行转换。

第一部分看起来像这样

```
 require "temperature"

describe Temperature do

  describe "can be constructed with an options hash" do
    describe "in degrees fahrenheit" do
      it "at 50 degrees" do
        Temperature.new(:f => 50).in_fahrenheit.should == 50
      end 
```

说明中的一个提示说，温度对象构造函数应该接受带有 :celsius 或 :fahrenheit 条目的选项散列。

任何帮助或提示将不胜感激。在过去的几周里，我一直被困在这个测试中。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:58:36.050

我认为您的温度课程需要一些工作。为什么不具有可以设置温度对象的基值的“比例”属性？

这是您发布的内容的修改版本：

```
class Temperature
  attr_accessor :value, :scale
  def initialize(value, options={})
    @value = value
    if options.has_key?(:scale)
      @scale = options[:scale]
    else
      @scale = :c
    end
  end
  def in_fahrenheit()
    if @scale == :c
      ( @value * 9.0/5.0 ) + 32.0 
    else
      @value
    end
  end 
end 
```

调用#in_fahrenheit 时无需创建新的温度对象。您可以使当前对象将数字（存储在属性中）转换为华氏温度。您可以在创建对象时添加温度信息：

```
t1=Temperature.new(68, :scale =>:f)
t2=Temperature.new(0)

2.0.0dev :199 > t1.in_fahrenheit  => 68 
2.0.0dev :200 > t2.in_fahrenheit  => 32.0 
```

# search - 在 VsVim 中启用文本突出显示

> ID：15161604
> 
> 赞同：2
> 
> 时间：2013-03-01T15:50:04.373
> 
> 标签：search, vim, highlight, vsvim

我真的很喜欢在 Vim 中突出显示文本以进行搜索和`Shift`- `8`。无论如何在 VS 2010 或 VS 2012 上的 VsVim 中启用它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T15:07:53.787

I added a `.vsvimrc` file into my user home directory i.e. `C:\Users\joe.bloggs` that contains the following command:

```
 :set hlsearch 
```

which is the regular Vim *highlight search* option.

# jquery - jQuery 循环在 Safari 和 Chrome 上不起作用

> ID：15161606
> 
> 赞同：0
> 
> 时间：2013-03-01T15:50:13.090
> 
> 标签：jquery, cycle

我有一个奇怪的问题，似乎只发生在 Safari 和 Chrome 上。我使用 jQuery 循环插件创建了幻灯片，使用 Safari 或 Chrome 时出现此错误：

[循环] 1 - img 幻灯片未加载，重新排队幻灯片： http: [//www.blahblahblah.co.uk/images/commercial_main.png](http://www.blahblahblah.co.uk/images/commercial_main.png) 0 0

这是我的代码：

```
<div id="banner_wrapper">
        <div id="main_banner_shadow">
            <div id="main_banner">
                <div class="buttons">

                </div>
                <div class="banner_image">
                    <img class="commercial_main" src="/images/commercial_main.png" />
                    <img class="domestic_main"  src="/images/domestic_main.png" />
                    <img class="kitchens_main"  src="/images/kitchens_main.jpg" />
                    <img class="build_main"  src="/images/build_main.jpg" />
                    <img class="Renovation"  src="/images/Renovation.jpg" />                        
                </div>
            </div>
        </div>
    </div> 
```

和 jQuery：

```
$('.buttons a:contains("1")').html("COMMERCIAL");
$('.buttons a:contains("2")').html("DOMESTIC");
$('.buttons a:contains("3")').html("KITCHENS & BEDROOMS");
$('.buttons a:contains("4")').html("NEW BUILDS/EXTENSIONS");
$('.buttons a:contains("5")').html("RENOVATION"); 
```

我似乎无法摆脱这个问题。有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T16:24:40.877

好的，我设法解决了这个错误。我需要在标记中的图像上设置宽度和高度。希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T04:43:50.183

我也有这个问题，但通过将宽度放在实际的幻灯片容器上来解决它。我需要图像响应地调整大小，所以我很欣慰地找到了那个解决方案。

# web-services - Web Service (JAX-WS,SOAP) WSDL 结构设计

> ID：15161607
> 
> 赞同：2
> 
> 时间：2013-03-01T15:50:12.877
> 
> 标签：web-services, soap, wsdl, jax-ws

这是一个开放式问题和相当多的文字，但请继续关注我。

首先介绍一点背景。去年我一直在编写 Web 服务。我从这个领域的零知识开始。我的工作是准备 WSDL（我可以按照自己的意愿构建它）并实施它。我对 XSD Schema 的准备方式有一点影响，但影响不大。我参加了2个项目。第一个只有大约 5 个 Web 服务，而第二个有 20 多个并且还在增长。两者都经过不断的 XSD 架构修改。

现在说到重点。

就我如何构建 WSDL 设计而言，我决定在每种方法中使用两种不同的方法。在第一个项目中，我在 WSDL 之间分离了 WS，每个 WSDL 一个 WS。这工作得很好，特别是因为每个操作使用的 XSD 模式都是不同的（除了一个很少更改的基本模式）。但是，您确实有 5 种不同的 WSDL，这对我来说似乎很浪费。

第二个项目有更多的 WS 和更多数量和更复杂的模式。在这里，我决定根据它们的用途将服务分成几个 WSDL。一切似乎都很好，直到我意识到（我缺乏知识）当调用 WS 时，它们的身体主要元素会被识别（实际上我仍然不知道为什么会这样）。我们的许多 WS 具有与输入相同的元素，并且由于它们位于相同的 WSDL 中，因此它们具有相同的路径。这导致来自应用程序服务器（Weblogic 10.3）的警告，但它起作用了。我猜它使用了 SOAPAction 标头，因为我们使用的是 SOAP 1.1。当我们在企业总线 (OSB) 上部署服务时出现了一个问题。除非选择 SOAPAction 作为选择算法，否则它将不起作用，或者像我们的 oracle 顾问建议的那样，为每个 WS 创建一个额外的唯一元素。

这就是问题所在。如何构建 WSDL。我考虑的选项是：

*   选择 SOAPAction 标头作为选择算法。我个人喜欢这个解决方案，但由于 SOAP 1.2 不再具有它，因此（我的老板）的权力告诉我我们不能使用它。我知道 SOAP 1.2 将有一个可选的“动作”标头，但由于它是可选的，我再次不能使用它（老板推理：可能根本不在下一个版本中，客户可能不想使用可选功能，因为它是额外的成本，我不知道，这是一个商业问题）。
*   为每个 WS 使用独特的元素。这看起来丑陋且不必要，但它是我们迄今为止最好的。
*   回到之前的设置并为每个 WSDL 做一个 WS。这绝对是最不受欢迎的方法。感觉不对，从我读到的内容来看，这只是糟糕的设计。但它有效并且提供了相当多的灵活性。

现在，如果有人有任何其他解决方案，我很想听听他们，因为这让我在上个月左右感到难过。我只是找不到感觉正确的解决方案。

提前致谢。

# c - 提供下面提到的 typdef 和 #define 行为差异的原因

> ID：15161609
> 
> 赞同：3
> 
> 时间：2013-03-01T15:50:20.300
> 
> 标签：c, macros, typedef

我已经浏览了现有的可用信息

typedef 和 define & [typedef,#define](https://stackoverflow.com/questions/3316474/typedef-define?rq=1)[的区别](https://stackoverflow.com/questions/12202220/difference-between-typedef-and-define)

所有回复都非常有用。我刚刚又遇到了一个例子，谁能提供这种行为的原因。

**对于声明 unsigned int 变量**，这将起作用：

```
#define INTEGER int
unsigned INTEGER i = 10; 
```

但是，它在 typedef 的情况下不起作用，

*例如*

```
typedef int INTEGER;
unsigned INTEGER i = 10; 
```

它会抛出错误： *'i' undeclared (first use in this function)*

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T15:54:26.470

预处理器只是复制和粘贴。当你写：

```
#define INTEGER int
unsigned INTEGER i = 10; 
```

在编译器本身之前，预处理器将代码转入：

```
unsigned int i = 10; 
```

但是，`typedef`由编译器处理。

> ### C11 (n1570), § 6.7.8 类型定义
> 
> `typedef`声明不会引入新类型，只会引入如此指定类型的同义词。也就是说，在以下声明中：
> 
> ```
> typedef T type_ident;
> type_ident D; 
> ```
> 
> `type_ident`被定义为一个名称，其类型由（称为）`typedef`中的声明说明符指定，并且 D 中的标识符具有类型“派生声明符类型列表”，其中派生声明符类型列表由的声明者。`T``T``T``D`

换句话说，`<INTEGER>`是 的同义词`<int>`。但是`<unsigned INTEGER>`被视为单一类型，不存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T15:54:04.373

`typedef`为声明中的确切类型创建类型别名`typedef`。该类型被编译器识别为真正的类型。在您的情况下，将有一个适当的 type `INTEGER`，但没​​有`unsigned INTEGER`type 这就是错误的原因。

宏 ( `#define`) 甚至在编译器看到它之前就被预处理器替换了。所以对于编译器来说，第一种情况很简单

```
unsigned int i = 10; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T15:54:17.553

原因是这`typedef`不是 1:1 的文字替换。基本上，在第一种情况下，`unsigned INTEGER`扩展为`unsigned int`，这是一个有效的类型名称（C 中只允许类型名称和限定符的某些组合，并且`unsigned int`是其中之一。）

但是，在第二种情况下，`unsigned INTEGER`它不是类型名称的有效组合。

# objective-c - ARC 和视图控制器

> ID：15161610
> 
> 赞同：1
> 
> 时间：2013-03-01T15:50:21.273
> 
> 标签：objective-c, memory-management, automatic-ref-counting

我对ARC有一点误解。我正在使用以下代码创建一个新的 UIViewController：

```
 CGRect screenRect = [[UIScreen mainScreen] bounds];

    LocationProfileView *locationProfile = [[LocationProfileView alloc] initWithLocation:l];

    locationProfile.view.frame = CGRectMake(0, screenRect.size.height, screenRect.size.width, 400);
    [appDelegate.window addSubview:locationProfile.view];

    [UIView animateWithDuration:.25 animations:^{
      locationProfile.view.frame = CGRectMake(0, 0, screenRect.size.width, screenRect.size.height);
    }]; 
```

在其 UIVIew 中，我放置了一个从屏幕上删除视图的按钮。问题在于`locationProfile`它在添加到屏幕后立即被释放，所以每次我试图点击“关闭”按钮（它调用`LocationProfileView`类中的方法）时，我的应用程序都会崩溃。

所以我添加了一个属性：

```
@property(nonatomic, strong) LocationProfileView *locationProfile; 
```

并将第二行代码更改为：

```
locationProfile = [[LocationProfileView alloc] initWithLocation:l]; 
```

但是现在我的类在我再次启动它之前不会被释放（因为它失去了对第一个实例的引用`LocationProfileView`？）。每次点击“关闭”按钮时，我应该怎么做才能让我的班级被解除分配？我想设置`locationProfile`to`nil`会起作用，但这意味着我必须在主类（包含代码块的那个）中调用一个方法。

这样做的正确方法是什么？对不起，如果我的问题太无聊了。

注意： `l`是一个自定义类的实例，其中包含一些要在`LocationProfileView`'s中显示的信息`UIVIew`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T16:53:02.520

```
- (void)closeButtonCallBack {
    [self.locationProfile removeFromSuperview];
    self.locationProfile = nil;
} 
```

我假设您的关闭按钮的目标是视图控制器本身

一个强指针将保留对象，直到 viewController 本身被释放，除非你分配给它 nil

局部变量超出范围时将被释放

或者

不使用强指针，你可以这样做

```
LocationProfileView *locationProfile = [[LocationProfileView alloc] initWithLocation:l];

UIButton *close = [UIButton buttonWithType:UIButtonTypeRoundedRect];
close.frame = CGRectMake(0, 100, 100, 30);
[close addTarget:locationProfile action:@selector(removeFromSuperview) forControlEvents:UIControlEventTouchUpInside];
[self.view addSubview:close]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T16:00:41.327

在你原来的例子中，

```
LocationProfile *locationProfile=... 
```

是一个局部变量。因此，一旦您从构造函数返回，它就会被释放。这就是你观察到的。

当您将其设为强属性时，视图控制器会保留 locationProfile：

```
 @property(nonatomic, strong) LocationProfileView *locationProfile; 
```

# android - Google+ Api - 在 android 中获取关联帐户

> ID：15161611
> 
> 赞同：1
> 
> 时间：2013-03-01T15:50:27.713
> 
> 标签：android, google-plus, google-play-services

我正在使用新的 Google+ 登录 API。用户单击登录后，他们可以选择要使用的谷歌帐户，然后继续授权该应用程序。我怎样才能得到他们选择的帐户？

原因是我一直在为我的应用程序使用常规的谷歌身份验证，并且用户帐户与电子邮件地址相关联。使用此 Google+，我不确定如何在不要求用户再次选择帐户的情况下获取帐户电子邮件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:02:22.450

[`PlusClient.loadPerson()`您可以使用方法](https://developers.google.com/+/mobile/android/people#retrieve_profile_information)检索用户的个人资料信息，如果他们选择公开，可以包括他们的电子邮件地址。为了[可靠地获取他们的电子邮件地址](https://developers.google.com/+/mobile/android/people#retrieve_an_authenticated_users_email_address)，您可以在请求范围后`PlusClient.getAccountName()`使用 或使用REST 端点。`userinfo``userinfo.email`

文档中的代码示例遍历了上述每个案例。

# java - jsoup 可以处理 1GB 左右的巨大 html 文件吗

> ID：15161612
> 
> 赞同：0
> 
> 时间：2013-03-01T15:50:31.233
> 
> 标签：java, jsoup

jsoup 可以处理的 html 字符串的最大大小是多少？我有需要解析的 html 字符串，html 字符串可能非常大，大约 500MB。jsoup可以处理吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:10:07.603

如果您增加虚拟机的内存，它*应该可以*工作；使用`-Xms<n>`和`-Xmx<n>`选项（`<n>`内存大小在哪里）。

例如。`java -Xms500m -Xmx600m ...`

可能您必须*微调*这些值；您还可以使用分析器来检查使用了多少内存。

另请参阅：[java - Java 应用程序启动器](http://docs.oracle.com/javase/6/docs/technotes/tools/windows/java.html)

# java - 在无连接服务器中获取远程 IP 地址

> ID：15161613
> 
> 赞同：3
> 
> 时间：2013-03-01T15:50:33.660
> 
> 标签：java, netty

目前我已经制作了一个无连接服务器，我想知道每个 udp 数据包的远程 IP 地址。

为此，我使用

```
addr = ((InetSocketAddress)ctx.getChannel().getRemoteAddress()).getAddress(); 
```

在我的频道处理程序中，例如

```
public void messageReceived(ChannelHandlerContext ctx, MessageEvent ev) throws Exception 
```

但是*NullPointerException*出来了。在我的猜测中，由于无连接通道，在收到每个 udp 数据包后通道已关闭。

在这种情况下我怎么知道呢？

谢谢~

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T17:04:07.297

我注意到同样的事情，即通道不会提供远程地址，但是当您考虑它时，甚至知道远程地址的不是通道（或它包装的 DatagramSocket），而是数据报本身，这是有效载荷。有效负载在 netty [MessageEvent](http://netty.io/3.6/api/org/jboss/netty/channel/MessageEvent.html)中传递，如果您调用[MessageEvent.getRemoteAddress()](http://netty.io/3.6/api/org/jboss/netty/channel/MessageEvent.html#getRemoteAddress%28%29)，它会返回您想要的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T16:22:54.413

目前尚不清楚（至少对我而言）您所引用的 ChannelHandlerContext 类是什么。

如果使用 DatagramSocket[1]，则可以使用 receive[1] 方法读取 UDP 数据包。如接收方法 [2] 中所述，DatagramPacket[3] 将具有发送者的 IP 地址和端口号。

[1] - [http://docs.oracle.com/javase/6/docs/api/java/net/DatagramSocket.html](http://docs.oracle.com/javase/6/docs/api/java/net/DatagramSocket.html) [2] - [http://docs.oracle.com/javase/6/docs/api /java/net/DatagramSocket.html#receive(java.net.DatagramPacket)](http://docs.oracle.com/javase/6/docs/api/java/net/DatagramSocket.html#receive(java.net.DatagramPacket)) [3] - [http://docs.oracle.com/javase/6/docs/api/java/net/DatagramPacket.html](http://docs.oracle.com/javase/6/docs/api/java/net/DatagramPacket.html)

# android - Android：如何处理 android 和 pc 之间的蓝牙连接

> ID：15161625
> 
> 赞同：-4
> 
> 时间：2013-03-01T15:51:38.457
> 
> 标签：android, eclipse, bluetooth

如何使用蓝牙处理 Android 和 PC 之间的连接。Android 设备发送和 PC 接收。PC 是 Windows 7 64x 位机器。Android 设备 = Android 4.1.2 会很高兴得到任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:56:40.413

首先，您需要使您的 PC 蓝牙兼容。如果它已经具有原生蓝牙支持，那么您就在正确的轨道上。然后，您需要做的就是[按照文档中的](http://developer.android.com/guide/topics/connectivity/bluetooth.html)描述编写连接。您具体需要哪些帮助？

# java - 在基元数组中重新分配数组值不会更改数组

> ID：15161626
> 
> 赞同：2
> 
> 时间：2013-03-01T15:51:42.037
> 
> 标签：java, multidimensional-array

我尝试使用 2 个循环设置 2D 布尔数组的值，如下所示：

```
 boolean[][] frame = new boolean[10][4];
    for (boolean[] column : frame)
        for (boolean b : column)
            b = true; 
```

但这似乎不起作用，所有布尔值都保持错误，为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T15:54:27.357

您不能为数组中的对象分配新值，因为不会更改原始对象。以下代码可以解决问题。

```
boolean[][] frame = new boolean[10][4];
for (boolean[] column : frame)
    for (int i = 0; i < column.length; i++)
        column[i] = true; 
```

多一点解释：

该数组包含指向布尔值的元素。当您将数组元素之一的值赋给名为 b ( `for (boolean b : column)`) 的变量时，该变量`b`指向数组中的元素所指向的同一对象。接下来，将变量`b`指向`true`. 现在，b 将是真的。但是，数组中的元素仍然指向同一个对象。

我希望这现在很清楚。一张图会让你更容易理解...

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-01T15:55:42.380

因为您正在重新分配`b`哪个是 的副本`column[i]`，而不是`column[i]`它本身。Java 中的原语是（或至少“被认为是最好的”）按值传递/复制，而不是通过引用。

更准确地说，Java 是按值传递的引用，它抛弃了业余的“按值传递”/“按引用传递”二分法。对于原语，我不知道“严格来说”它们是否按值计算，但它们是不可变的，因此在这种情况下没有语义区别。例如

```
public class Foo {
      public int x;

      public static void main(String args[]) {
            Foo a = new Foo();
            Foo b = a;
            Foo c = new Foo();
            a.x = 1; //b.x is now 1
            b.x = 2; //a.x is now 2
            a = c;
            a.x = 3; //b.x is still 2 because a's reference changed
      }
} 
```

了解该代码，您将了解您的问题。

# html - 网站布局在 Chrome/IE/FF 中很好，但在 Macbook 上查看时会中断

> ID：15161630
> 
> 赞同：0
> 
> 时间：2013-03-01T15:52:08.213
> 
> 标签：html, css, layout, cross-browser

我已经在具有不同屏幕尺寸的 PC 和笔记本电脑（均为 Windows）上使用最新版本的 Chrome+IE+FF 测试了该站点，它通常看起来不错。

但是当使用 Chrome 使用 Macbook 查看时，一些 div 元素会移动。

[http://www.benphilippi.com](http://www.benphilippi.com)

这是一个已知的问题？任何建议表示赞赏。

编辑：抱歉链接断开，已修复。

再次：唯一出现的问题是当使用 Macbook 查看该站点时。我已经使用 Win PC 和 Win 笔记本电脑测试了该网站，确保它可以在 Chrome、IE 和 FF 中运行。

页面左上角的导航按钮是在运行 Chrome 的 Macbook 上查看时移动的 div。

# jquery - 分别为每个选择器设置动画

> ID：15161631
> 
> 赞同：0
> 
> 时间：2013-03-01T15:52:10.887
> 
> 标签：jquery

我有几个有图像的DIV。在这些图像后面会有要动画的标签。

问题是动画效果是对所有这些都完成的，而不是分别为每个动画制作。这是代码。

HTML

```
<div class="MainGallery">                   
        <div class="MainGalleryData" id="MainGalleryData">
            <ul>
                <li>   
                    <img  src="img/pic1a.png" alt="" /> 
                    <label class="MainGalleryDataSite">     
                       <a href="Contact.aspx" target="_top">    </a>    
                    </label>    
                </li>
            </ul>
        </div>

     <div class="MainGalleryData" id="MainGalleryData2">
            <ul>
                <li>   
                    <img  src="img/pic1a.png" alt="" /> 
                    <label class="MainGalleryDataSite">     
                       <a href="Contact.aspx" target="_top">    </a>    
                    </label>    
                </li>
            </ul>
      </div> 
```

JS

```
$(document).ready(function () {

  $(".MainGallery li").hover(function () {

    $(".MainGallery li .MainGalleryDataSite").animate({ "top": "-178px" }, "fast");

   },function () {

    $(".MainGallery li .MainGalleryDataSite").animate({ "top": "-148px" }, "fast");

  }

);

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T16:17:41.643

问题在于您指的是具有合适类的所有元素，而不仅仅是将鼠标悬停在其上的元素的子元素。看看你的问题的这个简化的[jsfiddle](http://jsfiddle.net/tVR6R/)，使用

```
$(this) 
```

另外，请注意两个函数的使用：和`mousesenter`现在被认为已弃用，并且应该避免与高于 1.8 的 jQuery 版本兼容。`mouseleave``hover`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T15:59:17.757

如果您这样称呼它，您正在为所有列表项设置动画：

```
$(".MainGallery li .MainGalleryDataSite").animate({ "top": "-148px" }, "fast"); 
```

将您的 javascript 更改为：

```
$(document).ready(function () {
    $(".MainGallery li").hover(function () {
        $("this").find(".MainGalleryDataSite").animate({ "top": "-178px" }, "fast");
    },function () {
        $("this").find(".MainGalleryDataSite").animate({ "top": "-148px" }, "fast");
    }
);}); 
```

# machine-learning - 给定物品列表，预测要出售的物品

> ID：15161633
> 
> 赞同：0
> 
> 时间：2013-03-01T15:52:21.467
> 
> 标签：machine-learning, prediction, apriori

我们有一个数据集，其中包含客户到他喜欢的产品的映射

```
c1->{P1, P2, p5} 
c2->{P3, P5, p4} 
c3->{P5, P2, p3}
.... 
```

在此基础上，我们需要为客户推荐产品，

假设对于 cx 客户，我们需要推荐产品，因为我们有 cx 从上述集合中购买的数据，并且我们运行 apriori 来找出推荐，但是对于大数据集，它非常慢？

有人可以给我们一些建议来解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T18:15:21.820

我假设商家销售的商品是您的训练数据，然后随机商品是您的测试数据。因此，最有可能出售的物品将取决于商家当前出售的物品的“特征”。“功能”是指商品的价格、类别，这些是您将拥有的详细信息。然后决定算法，我建议你看一下特征空间。如果有小集群，那么即使是最近邻搜索也会更好。如果分布很复杂，那么您可以选择 SVM。有各种数据可视化技术。采用 PCA 并可视化前两个维度可能是一个不错的选择。

# php - 制作自定义布局文章视图

> ID：15161634
> 
> 赞同：0
> 
> 时间：2013-03-01T15:52:25.040
> 
> 标签：php, layout, joomla, article

我正在为一家汽车公司制作网站。每当我添加一篇文章时，都有两个选项：博客和类别。我想要一个带有图像预览的类别，而不是创建日期以显示价格或品牌之类的东西。

有什么简单的方法吗？或者已经进行了任何扩展？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T19:47:10.233

如果您想要特定于汽车的东西，那么我会推荐 RD Autos。他们有一个免费版本，可以满足您的大部分需求，还有一个具有附加功能的专业版。

[https://extensions.joomla.org/extensions/vertical-markets/vehicles/5458](https://extensions.joomla.org/extensions/vertical-markets/vehicles/5458)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T11:41:08.333

试试这个扩展。[http://extensions.joomla.org/extensions/authoring-a-content/content-construction/8061](http://extensions.joomla.org/extensions/authoring-a-content/content-construction/8061)。使用 k2，您可以为文章添加自定义字段。之后，您可以调整模板以显示其他字段。

# parsing - 制作语法 LL(1)

> ID：15161636
> 
> 赞同：8
> 
> 时间：2013-03-01T15:52:30.100
> 
> 标签：parsing, programming-languages, grammar, context-free-grammar, ll

我有以下语法：

S → a S b S | b S a S | ε

由于我正在尝试为其编写一个小型编译器，因此我想将其设为 LL(1)。我看到这里似乎存在 FIRST/FOLLOW 冲突，我知道我必须使用替换来解决它，但我不完全确定如何去做。这是我提出的语法，但我不确定它是否正确：

S-> aSbT | ε

T->bFaF| ε

F-> ε

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T01:44:42.953

在他[关于 LR 解析的原始论文中](http://www.cs.dartmouth.edu/~mckeeman/cs48/mxcom/doc/knuth65.pdf)，Knuth 给出了这种语言的以下语法，他推测“这是这种语言的最简短的可能明确的语法：”

> S → ε | 抗体 | bBaS
> 
> A → ε | 抗体
> 
> B → ε | bBaB

直观地说，这试图将任何一串 As 和 B 分解成完全平衡的块。有些块以 a 开头，以 b 结尾，而另一些以 b 开头，以 a 结尾。

我们可以按如下方式计算 FIRST 和 FOLLOW 集：

> FIRST(S) = { ε, a, b }
> 
> FIRST(A) = { ε, a }
> 
> FIRST(B) = { ε, b }
> 
> 关注(S) = { $ }
> 
> 跟随(A) = { b }
> 
> 跟随(B) = {一个}

基于此，我们得到以下 LL(1) 解析表：

```
 |   a   |   b   |   $   
 --+-------+-------+-------
 S | aAbS  | bBaS  |  e
 A | aAbA  |   e   |
 B |   e   | bBaB  | 
```

所以这个文法不仅是 LR(1)，而且也是 LL(1)。

希望这可以帮助！

# html - 跨越多行 + 列的动态网格图块

> ID：15161637
> 
> 赞同：6
> 
> 时间：2013-03-01T15:52:32.720
> 
> 标签：html, css

如果没有看到结果，这可能很难解释，所以请看一下这些示例：

[JSFiddle 示例 1 - 看起来不错](http://jsfiddle.net/tsdesigns/27heU/)
[JSFiddle 示例 2 - 损坏](http://jsfiddle.net/tsdesigns/dmBfs/)

小提琴的代码：

HTML：

```
<ul id="homepage-grid">
        <li id="tile11" class="col1 row1 sizex1 sizey1">
            <a href="#" title="test">
                <img src="http://placehold.it/295x160" alt="test" title="test" style="width: 295px;height: 160px" />
            </a>
        </li>
        <li id="tile8" class="col2 row1 sizex2 sizey1 last">
            <a href="#" title="test">
                <img src="http://placehold.it/602x160" alt="test" title="test" style="width: 602px;height: 160px" />
            </a>
        </li>
        <li id="tile1" class="col1 row2 sizex1 sizey1">
            <a href="#" title="testing">
                <img src="http://placehold.it/295x160" alt="testing" title="testing" style="width: 295px;height: 160px" />
            </a>
        </li>
        <li id="tile4" class="col2 row2 sizex2 sizey1 last">
            <a href="#" title="test3">
                <img src="http://placehold.it/602x160" alt="test3" title="test3" style="width: 602px;height: 160px" />
            </a>
        </li>
        <li id="tile10" class="col1 row3 sizex1 sizey2">
            <a href="#" title="test">
                <img src="http://placehold.it/295x332" alt="test" title="test" style="width: 295px;height: 332px" />
            </a>
        </li>
        <li id="tile12" class="col2 row3 sizex1 sizey2">
            <a href="#" title="test">
                <img src="http://placehold.it/295x332" alt="test" title="test" style="width: 295px;height: 332px" />
            </a>
        </li>
        <li id="tile2" class="col3 row3 sizex1 sizey1 last">
            <a href="#" title="testing2">
                <img src="http://placehold.it/295x160" alt="testing2" title="testing2" style="width: 295px;height: 160px" />
            </a>
        </li>
        <li id="tile9" class="col3 row4 sizex1 sizey1 last">
            <a href="#" title="test">
                <img src="http://placehold.it/295x160" alt="test" title="test" style="width: 295px;height: 160px" />
            </a>
        </li>
    </ul> 
```

CSS：

```
#homepage-grid {
    width:910px;
    position:relative;
    padding:0;
    overflow: hidden;
}

#homepage-grid li {
    list-style:none;
    float:left;
    padding:0 12px 12px 0;
    display:block;
}

#homepage-grid li.last {
    list-style:none;
    float:left;
    padding:0 0 12px 0;
}

#homepage-grid li a {
    display:block;
} 
```

基本上我想要创建的是一个动态网格，它由一个数据库填充（数据库部分目前工作正常）。在网格中，每个图块最多可以跨越 3 列宽，但是可以跨越无限行，这似乎是我遇到问题的地方。

对于如此动态的东西，我在使用 HTML/CSS 时遇到了麻烦。如您所见，从示例 1 到示例 2 的一个小变化，它破坏了大部分网格，因为左下方的瓷砖应该向上推以填充空间，而右侧的瓷砖应该向上移动以填充该空间。

但是，我可以完全控制代码，因此 HTML/CSS 可以根据需要进行更改（即添加类/内联样式/等）。

我想这可以（相对）轻松地使用表格，但由于它不是表格内容，我真的不想走这条路。

有没有办法让 CSS 变得如此动态？
我需要使用更多的内联样式来实现这一点吗？
我应该以另一种方式来做，例如绝对定位而不是浮动？

任何有关如何实现这一目标的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T05:28:23.403

我的第一个想法只是将 of 设置`height`为`#title12`，`160px`但如果它下面的元素相同，这将不起作用`width`。

相反，您可以尝试以下方法：

假设网格的每个“行”都有固定的高度，用一个`<div>...</div>`或类似的块元素包裹它`height:160px;`（或任何合适的大小，但每个`div`“行”都一样）。

用第一行图像填充第一行。对于第二行（和后续行），确定每个“单元格”是否与之前的行重叠。如果是这样，请添加一个由空块元素组成的“填充”块，该块元素具有`height`并`width`等于您想要的行和列大小。

这允许`<li>...</li>`项目将`div`“行”溢出到下面的行中（因为`visible`默认设置为溢出）。空块元素防止下一行与前一行的溢出重叠。

这种方法的缺点是：

*   它使您的 HTML 有点难看。
*   它可能太像一张桌子，而不是真正的桌子值得使用。
*   这将需要在服务器端进行一些额外的工作。

编辑：此外，`<div>`不允许在列表中，因此您需要在每一行中启动/停止列表。或者，也许使用`<ul> </ul>`as rows 而不是`<div>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T08:48:19.403

好吧，这只是一个想法。假设您最多有 3 列和固定的行高，您可以通过数组存储每列的超出行数，然后添加一个负边距顶部或一个类以“拉起”特定数量的行。例如：

在开始时，每列的行池是`[0][0][0]`在添加一个 2 行项目之后`[2][0][0]`添加两个具有 3 和 2 行高度`[2][3][2]` 的项目，我们将放置下一个项目应该放在第一个最短的列中并且将被最大减去最短的差值拉起，在本例中为一列 (3 - 2)，如果添加的元素是 2 行高，则池将是`[5][3][2]`下一个项目将被放在最右边的列中，并且将是拉起 3 行 (5 - 2)。

就这样！乍一看，它似乎可以工作，但我还没有对其进行足够的测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T15:51:20.603

你会遇到浮点数的这个问题。但是，您可以更改该页面上某个元素的位置，一切都会如您所愿。

[更新小提琴](http://jsfiddle.net/dmBfs/5/)

将以下内容添加到您的 CSS 中：

```
#homepage-grid li#tile10 {
    position: absolute;
    top: 342px;
} 
```

这将有问题的元素从文档流中分离出来，从而消除了由应用于其余列表项的“浮动”分配给它的垂直空间的保留。最后一项是向右浮动的，因此不会与绝对定位的图块重叠。

**编辑**

根据下面的评论，[这是一种更灵活的方法](http://jsfiddle.net/dmBfs/7/)。该示例适用于发布的代码。

使用更新的小提琴做出的假设：

1.  sizex1、sizey1、sizex2 等...是常数值
2.  这些右侧的内容将向右浮动（对于左侧浮动的项目，这将反向工作，但这些场景似乎不会成为问题，因为如果左侧的元素是，右侧的项目将正确浮动垂直更大）
3.  用户有能力覆盖样式，或在创建布局时应用样式*这主要是为了控制`position: absolute`不必要地应用于某些元素*

**这是做什么的：**

该 CSS 根据具有某些类的兄弟姐妹的存在设置不同的规则。这就是为什么`sizex1 sizex2 sizey1`和`sizey2`值的恒定性很重要。

**CSS：**

```
#homepage-grid li.col1:not(.row1):not(.row2) {
    position: absolute;
}
#homepage-grid li.col1.sizey1.row1 ~ li.col1.row2 { /* The first column of the first row has a sizey of 1 */
    top: 172px;
}
#homepage-grid li.col1.sizey2.row1 ~ li.col1.row2{ /* The first column of the first row has a sizey of 2 */
    top: 342px;
}
#homepage-grid li.col1.sizey1.row1 ~ li.col1.sizey1.row2 ~ li.col1.row3 { /* The first column of the first row has a sizey of 1 and the first column of the first row has a sizey of 1 */
    top: 344px;
}
#homepage-grid li.col1.sizey2.row1 ~ li.col1.sizey2.row2 ~ li.col1.row3{ /* The first column of the first row has a sizey of 2 and the first column of the second row has a sizey of 2 */
    top: 684px;
}
#homepage-grid li.col1.sizey2.row1 ~ li.col1.sizey1.row2 ~ li.col1.row3,
#homepage-grid li.col1.sizey1.row1 ~ li.col1.sizey2.row2 ~ li.col1.row3 { /* The first column of the first row has a sizey of 2 and the first column of the second row has a sizey of 1, or vice versa */
    top: 514px;
} 
```

理想情况下，您希望`#homepage_grid li.col1`在页面交付时设置该值。这样，您可以选择从文档流中分离出哪些图块以保持正确的间距。我通常会通过使用`:not()`选择器来完成此操作，但如果您正在寻找旧版浏览器兼容性，您可以轻松地使用覆盖。

**例子：**

```
#homepage-grid li.col1:not(.row1):not(.row2) {
    position: absolute;
} 
```

*以上内容只会破坏文档流中的第 3 行和更大行。

```
#homepage-grid li.col1 {
  position: absolute;
}
#homepage-grid li.col1.row1, #homepage-grid li.col1.row2 {
  position: static;
} 
```

*这完成了与上面相同的事情，但更冗长。但是，它将在不符合标准的浏览器中适当呈现。*

**编辑 2** 为清楚起见，这是一个使用 jQuery 在页面加载时将适当元素设置为静态的示例。

[另一个小提琴示例](http://jsfiddle.net/dmBfs/8/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T15:46:21.427

您需要有一个允许嵌套的网格系统。

然后在网格布局中搜索整行。

然后在每一行中搜索完整的列，依此类推。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-06T21:37:24.387

我真的会推荐使用像[Masonry](http://masonry.desandro.com/)这样的 JavaScript 插件。

# java - BigInteger Modulo '%' 运算和小于/大于运算

> ID：15161639
> 
> 赞同：2
> 
> 时间：2013-03-01T15:52:35.793
> 
> 标签：java, operators, long-integer, biginteger, modulo

嗨，我有一个算法，我需要对 BigInt 应用操作。

我知道 BigInt 可以使用 Maths 类进行操作，例如：

```
import java.math.*;

BigInteger a;
BigInteger b = BigInteger.ZERO;
BigInteger c = BigInteger.ONE;
BigInteger d = new BigInteger ("3");
BigInteger e = BigInteger.valueOf(5);

a.multiply(b);
a.add(b);
a.substract(b);
a.divide(b); 
```

我需要能够申请大于一段时间的条件，例如

```
while (a > 0) { 
```

这给了我一个语法错误，说“二元运算符'>'的操作数类型错误，第一种类型：java.math.BigInteger，第二种类型：int。

我还需要能够将模 (%) 运算符应用于 BigInteger。

```
b = a % c; 
```

任何人都可以建议这样做的方法吗？

如果没有解决方案，那么我将不得不使用 reduce 函数以某种方式将我的 BigInteger 操纵为唯一的 Long （这远非理想）。

Silverzx。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T16:01:57.993

要比较`BigInteger`，请使用[`BigInteger.compareTo`](http://docs.oracle.com/javase/1.4.2/docs/api/java/math/BigInteger.html#compareTo(java.math.BigInteger)).

```
while(a.compareTo(BigInteger.ZERO) > 0)
    //... 
```

对于模 ( `%`)，使用[`BigInteger.mod`](http://docs.oracle.com/javase/1.4.2/docs/api/java/math/BigInteger.html#mod(java.math.BigInteger)).

```
BigInteger blah = a.mod(b); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T16:00:18.677

您可以使用 BigIntegers 进行比较`compareTo`，但在特殊情况下，当您与 0 进行比较时，该`signum`方法也可以完成这项工作（并且可能会更快一些）。至于取给定除法的余数，您可以使用该方法`mod`（这里是更好的选择），或者使用`divideAndRemainder`which 返回一个包含除法结果和余数的数组。

# unix - 如何编写一个 sh 脚本？

> ID：15161648
> 
> 赞同：0
> 
> 时间：2013-03-01T15:52:52.107
> 
> 标签：unix, sh

我希望我在这里使用了正确的术语，但我想编写一个在 unix 中执行的脚本，它将按顺序执行许多命令（即一个接一个）。我可以将我想要的命令放在记事本中，用换行符分隔它们，然后将其保存为 script.sh 然后执行

```
sh script.sh 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T19:15:22.027

我只在 bash 中对此进行了测试，但是您可以将每个命令放在自己的行上，不需要 shebang 或任何必要的东西。您必须使用 chmod 授予文件执行权限，然后您可以使用

```
 ./myscript 
```

（假设“myscript”在当前目录中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T16:52:50.733

您需要确保为您的脚本文件设置了执行位。此外，您可以指定使用哪个应用程序来运行您的脚本。默认情况下，如果您不指定应用程序，它将默认使用正在执行您的脚本的当前 shell。我通常把应用程序具体如下...

```
#!/bin/bash 
```

这将指定`bash`应该用于处理您的脚本。如果您涉及任何特殊的脚本，您将需要具体，因为 , , 等之间`sh`存在`bash`差异`ksh`。

此外，由于您提到要按顺序运行多个命令，因此您可能需要使用一些条件。

一个简单的条件是在您的脚本中使用`&&`或使用。`||`这将允许您指定命令执行成功与否时会发生什么。例如...

```
#!/bin/bash

command1 || exit
command2 || exit
command3 
```

这将尝试执行 command1**或**如果不成功则退出（返回代码高于 0）。否则它将继续执行以下行。

另一个使用表示“**和**`&&`”的语法的例子......

 **```
command1 && command2 && command3 
```

最后，您可能需要专门检查返回代码并以错误消息进行响应。

```
#!/bin/bash

command1
if [ $? -gt 0 ] ; then
  echo "command1 failed with error code $?"
  exit
fi
command2 .... 
```

最后一个示例是更高级的 shell 脚本，但您可能需要进一步研究。如果您使用任何条件脚本，请始终记住为正确的 shell 添加您的 shebang (#!/bin/bash)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T15:54:20.607

你需要在顶部有一个[shebang/hashbang](http://en.wikipedia.org/wiki/Shebang_%28Unix%29)

`#!/bin/sh`**

# ruby - Ruby 将 JSON 映射到 Ruby 类 - 无法将字符串转换为整数

> ID：15161652
> 
> 赞同：0
> 
> 时间：2013-03-01T15:53:07.830
> 
> 标签：ruby, json, rhomobile

JSON/RUBY 的新手。我有一个返回 JSON 字符串的 Rest 服务，我想将其解析为 Ruby 类。这是推荐的吗？我尝试了以下示例并收到错误-无法将字符串转换为整数。这是针对我正在开发的 rhomobile 应用程序。我在想 POJO--> JSON--> Ruby。任何意见，将不胜感激。

```
Ruby

  @@get_result = @params['body']
     puts "@@get_result : #{@@get_result}"

     data2 =@@get_result

     cust1 = data2["PolicyList"].map { |rd| PolicyList.new(rd["policyNbr"], rd["systemId"], rd["insuredName"], 
                      rd["type"], rd["statusCd"], rd["statusDes"], rd["payorZipcode"], 
                      rd["lastPaymentDate"], rd[lastPaymentAmount], rd["pastDueDate"], rd["pastDueAmount"], 
                      rd["currentDueDate"], rd["currentDueAmount"], rd["eft"], 
                      rd["suspenseAmt"], rd["expireTime"]) } 
```

班级

```
 class PolicyList  
       attr_accessor :policyNbr, :systemId, :insuredName,
            :type, :statusCd, :statusDes, :payorZipcode,
            :lastPaymentDate,:lastPaymentAmount,:pastDueDate,
            :pastDueAmount,:currentDueDate,:currentDueAmount,:eft,
            :suspenseAmt,:expireTime

       def initialize(policyNbr,             systemId,insuredName,type,statusCd,statusDes,payorZipcode,lastPaymentDate,lastPaymentAmount,
             pastDueDate,pastDueAmount,currentDueDate,currentDueAmount,eft,suspenseAmt,expireTime)
   @systemId = systemId
   @insuredName = insuredName
   @type = type  
   @statusCd = statusCd  
    @statusDes = statusDes
   @payorZipcode = payorZipcode
   @lastPaymentDate =  lastPaymentDate
   @lastPaymentAmount = lastPaymentAmount
   @pastDueDate = pastDueDate 
   @pastDueAmount = pastDueAmount
   @currentDueDate = currentDueDate
   @currentDueAmount = currentDueAmount
   @eft = eft
   @suspenseAmt = suspenseAmt
   @expireTime = expireTime
  end

 end 
```

返回的 JSON

```
 [{"policyNbr":"0000001","systemId":"MB","insuredName":"JOHN DOE ","type":"MEMBERSHIP","statusCd":"01","statusDes":"PAID","payorZipcode":"99999","lastPaymentDate":"07/12/2012","lastPaymentAmount":25.00,"pastDueDate":"","pastDueAmount":0.00,"currentDueDate":"","currentDueAmount":0.00,"eft":false,"suspenseAmt":false,"expireTime":1362152384971},{"policyNbr":"0000002","systemId":"PC","insuredName":"JOHN DOE","type":"AUTO","statusCd":"01","statusDes":"PAID","payorZipcode":"99999","lastPaymentDate":"02/15/2013","lastPaymentAmount":308.50,"pastDueDate":"","pastDueAmount":0.00,"currentDueDate":"","currentDueAmount":0.00,"eft":false,"suspenseAmt":false,"expireTime":0},{"policyNbr":"0000003","systemId":"PC","insuredName":"JOHN DOE","type":"HOME","statusCd":"01","statusDes":"PAID","payorZipcode":"99999","lastPaymentDate":"09/05/2012","lastPaymentAmount":149.00,"pastDueDate":"","pastDueAmount":0.00,"currentDueDate":"","currentDueAmount":0.00,"eft":false,"suspenseAmt":false,"expireTime":0}] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:08:45.090

You're getting an array of PolicyList objects, but there is no key called 'PolicyList'. I think you need this:

```
cust1 = data2.map { |rd| PolicyList.new(rd["policyNbr"], rd["systemId"], rd["insuredName"],
                rd["type"], rd["statusCd"], rd["statusDes"], rd["payorZipcode"],
                rd["lastPaymentDate"], rd['lastPaymentAmount'], rd["pastDueDate"], rd["pastDueAmount"],
                rd["currentDueDate"], rd["currentDueAmount"], rd["eft"],
                rd["suspenseAmt"], rd["expireTime"]) } 
```

To make it easier for you. Here is a complete example.

```
class PolicyList
     attr_accessor :policyNbr, :systemId, :insuredName,
          :type, :statusCd, :statusDes, :payorZipcode,
          :lastPaymentDate,:lastPaymentAmount,:pastDueDate,
          :pastDueAmount,:currentDueDate,:currentDueAmount,:eft,
          :suspenseAmt,:expireTime

       def initialize(policyNbr,             systemId,insuredName,type,statusCd,statusDes,payorZipcode,lastPaymentDate,lastPaymentAmount,
             pastDueDate,pastDueAmount,currentDueDate,currentDueAmount,eft,suspenseAmt,expireTime)
   @systemId = systemId
   @insuredName = insuredName
   @type = type
   @statusCd = statusCd
    @statusDes = statusDes
   @payorZipcode = payorZipcode
   @lastPaymentDate =  lastPaymentDate
   @lastPaymentAmount = lastPaymentAmount
   @pastDueDate = pastDueDate
   @pastDueAmount = pastDueAmount
   @currentDueDate = currentDueDate
   @currentDueAmount = currentDueAmount
   @eft = eft
   @suspenseAmt = suspenseAmt
   @expireTime = expireTime
  end

end

require 'json'
json = <<-JSON
  [{"policyNbr":"0000001","systemId":"MB","insuredName":"JOHN DOE ","type":"MEMBERSHIP","statusCd":"01","statusDes":"PAID","payorZipcode":"99999","lastPaymentDate":"07/12/2012","lastPaymentAmount":25.00,"pastDueDate":"","pastDueAmount":0.00,"currentDueDate":"","currentDueAmount":0.00,"eft":false,"suspenseAmt":false,"expireTime":1362152384971},{"policyNbr":"0000002","systemId":"PC","insuredName":"JOHN DOE","type":"AUTO","statusCd":"01","statusDes":"PAID","payorZipcode":"99999","lastPaymentDate":"02/15/2013","lastPaymentAmount":308.50,"pastDueDate":"","pastDueAmount":0.00,"currentDueDate":"","currentDueAmount":0.00,"eft":false,"suspenseAmt":false,"expireTime":0},{"policyNbr":"0000003","systemId":"PC","insuredName":"JOHN DOE","type":"HOME","statusCd":"01","statusDes":"PAID","payorZipcode":"99999","lastPaymentDate":"09/05/2012","lastPaymentAmount":149.00,"pastDueDate":"","pastDueAmount":0.00,"currentDueDate":"","currentDueAmount":0.00,"eft":false,"suspenseAmt":false,"expireTime":0}]
JSON

@@get_result = JSON.parse(json)

puts "@@get_result : #{@@get_result}\n\n"

data2 =@@get_result

cust1 = data2.map { |rd| PolicyList.new(rd["policyNbr"], rd["systemId"], rd["insuredName"],
                rd["type"], rd["statusCd"], rd["statusDes"], rd["payorZipcode"],
                rd["lastPaymentDate"], rd['lastPaymentAmount'], rd["pastDueDate"], rd["pastDueAmount"],
                rd["currentDueDate"], rd["currentDueAmount"], rd["eft"],
                rd["suspenseAmt"], rd["expireTime"]) }

puts cust1.inspect 
```

# javascript - FullCalendar 中的重复事件

> ID：15161654
> 
> 赞同：40
> 
> 时间：2013-03-01T15:53:12.907
> 
> 标签：javascript, jquery, calendar, fullcalendar, fullcalendar-3

我使用 jQuery FullCalendar 作为我的日历，在我的网站中用于可用性议程。

fullcalendar 中是否有任何功能/方法/选项可以按天处理我的重复事件？例如，星期一只到早上 7:00 到上午 9:00，星期二 - 下午 4:00 到晚上 9:00，类似这样？

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2015-04-01T14:13:44.427

## 简单的重复事件

为了添加此处列出的简单替代方案，Fullcalendar 现在（在某种程度上）支持每周重复发生的事件。因此，如果您只需要类似的内容：`[Every Monday and Thursday from 10:00am to 02:00pm]`，您可以使用以下内容：

```
events: [{
    title:"My repeating event",
    start: '10:00', // a start time (10am in this example)
    end: '14:00', // an end time (2pm in this example)
    dow: [ 1, 4 ] // Repeat monday and thursday
}], 
```

[JSFiddle](http://jsfiddle.net/slicedtoad/duu0dx2t/1/)

这记录在[后台事件](http://fullcalendar.io/docs/event_rendering/Background_Events/)中，但它也适用于常规事件。

将其保存到数据库并不难。

## 添加一些限制

如果您不希望它们无限重复，则需要添加一些开始日期和结束日期。

所以，在数据库中：

*   让上面显示的事件代表父记录
*   有另一个带有开始/结束日期的表。
*   连接表示例：

```
eventId  timeStart  timeEnd   dow    dateStart      dateEnd
     1      10:00    12:00  [1,4]  2015/03/01   2015/04/01  // Month of March
     1      10:00    12:00  [1,4]  2015/05/01   2015/06/01  // Month of May
     1      10:00    12:00  [1,4]  2016/01/01   2017/01/01  // Year of 2017 
```

将此作为 JSON 传递给客户端：

```
{ id:1, start:"10:00", end:"12:00", dow:[1,4],
  ranges[{start:"2015/03/01", end:"2015/04/01"},
         {start:"2015/05/01", end:"2015/06/01"},
         {start:"2016/01/01", end:"2017/01/01"},]
} 
```

在客户端，使用 fullcalendar 的[eventRender](http://fullcalendar.io/docs/event_rendering/eventRender/)仅在其中一个时间范围内呈现事件。像这样的东西应该工作：

```
eventRender: function(event){
    return (event.ranges.filter(function(range){ // test event against all the ranges

        return (event.start.isBefore(range.end) &&
                event.end.isAfter(range.start));

    }).length)>0; //if it isn't in one of the ranges, don't render it (by returning false)
}, 
```

假设您的事件的结构如下：

```
var repeatingEvents = [{
    title:"My repeating event",
    id: 1,
    start: '10:00', 
    end: '14:00', 
    dow: [ 1, 4 ], 
    ranges: [{ //repeating events are only displayed if they are within at least one of the following ranges.
        start: moment().startOf('week'), //next two weeks
        end: moment().endOf('week').add(7,'d'),
    },{
        start: moment('2015-02-01','YYYY-MM-DD'), //all of february
        end: moment('2015-02-01','YYYY-MM-DD').endOf('month'),
    },/*...other ranges*/],
},/*...other repeating events*/]; 
```

[JSFiddle](http://jsfiddle.net/slicedtoad/duu0dx2t/5/)

* * *

## 过夜

如果你想要一夜之间重复的事件（[比如这里](https://stackoverflow.com/questions/32136130/recurring-overnight-events-in-fullcalendar/32145493#32145493)），就过去看看`24:00`结束时间。例如：

```
{
  start: '10:00', //starts at 10 on monday
  end:   '27:00', //24+3 is handled correctly.
  dow: [1]
} 
```

[JSFiddle](http://jsfiddle.net/slicedtoad/duu0dx2t/102/)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-04T16:18:39.233

看看这个网站... [http://fajitanachos.com/Fullcalendar-and-recurring-events/](http://fajitanachos.com/Fullcalendar-and-recurring-events/)

它提供了很多关于经常性事件的好网站。FullCalendar 确实支持与 id 相关的重复事件。您可以在服务器端或客户端处理事件，但首选是服务器端。我会给你一些想法，但它不是包罗万象的。据我所知，重复发生的事件很难维持。

如果您想在客户端处理它们，则必须遍历重复事件的频率和哪几天的逻辑。您可能需要使用 eventRender 回调，然后使用选项回调呈现每个循环事件。这样做的问题是您仍然必须在数据库中保存重复频率和频率选项的逻辑运算符......

> （column1:frequency=(int)8, column2:type=enum(a'b'c), a=daily, b=weekly, c=monthly 等等）。

...然后，无论何时您编辑该事件，它都会编辑所有事件。如果您只需要删除一个事件，您将在逻辑中遇到一系列问题，并且很容易变成一个巨大的混乱。

第二种选择是做所有这些服务器端。创建两个表，一个包含父事件，第二个包含所有重复事件。在父表中，您将存储一般信息，例如唯一 id、颜色、背景颜色、标题、allDay、isRecurring、频率、类型等。在子表中，您将使用父表中的唯一 id 来关联每次重复（请记住，如果您想删除/编辑单个事件，子表行也需要有自己的唯一 ID 以及标记它所在的表的列）。添加周期性事件时，您需要添加一个枚举字段，用于标记它是否是周期性事件 AKA...

> column:recurring=enum('0','1')---真/假

...然后您需要将每个重复添加到具有特定信息（例如开始和结束等）的子表中。当您查询事件时，您可以从父项查询，然后如果事件重复发生，则将这些事件关联到第二个查询，或者您可以在一个查询中对 table1.id=table2.parentID 使用 INNER JOIN。

如您所见，重复事件可以非常快速地变得非常详细，找出您需要的逻辑，我希望这至少可以帮助您或某人开始。干杯。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-05-21T15:27:39.967

无需在此处建立父子关系是为 jquery 中的重复事件提供简单解决方案的代码 Full calender 在您的 php 文件中使用以下这些函数，您可以进一步使用这些函数来调用所有事件。

```
function render_fccalendar_events() {
        $_POST['start'] = strtotime('2013-05-01');
        $_POST['end'] = strtotime('2013-05-31');
        $start = date('Y-m-d',$_POST['start']);
        $end = date('Y-m-d', $_POST['end']);
        $readonly = (isset($_POST['readonly'])) ? true : false;    
        $events = fcdb_query_events($start, $end);       
        render_json(process_events($events, $start, $end, $readonly));
}

function process_events($events, $start, $end, $readonly) {
    if ($events) {
        $output = array();
        foreach ($events as $event) {
            $event->view_start = $start;
            $event->view_end = $end;
            $event = process_event($event, $readonly, true);
            if (is_array($event)) {
                foreach ($event as $repeat) {
                    array_push($output, $repeat);
                }
            } else {
                array_push($output, $event);
            }
        }
        return $output;
    }
}

function process_event($input, $readonly = false, $queue = false) {
    $output = array();
    if ($repeats = generate_repeating_event($input)) {
        foreach ($repeats as $repeat) {
            array_push($output, generate_event($repeat));
        }
    } else {
        array_push($output, generate_event($input));
    }

    if ($queue) {
        return $output;
    }
    render_json($output);
}

function generate_event($input) {
    $output = array(
        'id' => $input->id,
        'title' => $input->name,
        'start' => $input->start_date,
        'end' => $input->end_date,
        'allDay' => ($input->allDay) ? true : false,
        //'className' => "cat{$repeats}",
        'editable' => true,
        'repeat_i' => $input->repeat_int,
        'repeat_f' => $input->repeat_freq,
        'repeat_e' => $input->repeat_end
    );
    return $output;
}

function generate_repeating_event($event) {

    $repeat_desk = json_decode($event->repeat_desk);
    if ($event->repeat == "daily") {
        $event->repeat_int =0;
        $event->repeat_freq = $repeat_desk->every_day;
    }
    if ($event->repeat == "monthly") {
        $event->repeat_int =2;        
        $event->repeat_freq = $repeat_desk->every_month;
    }
    if ($event->repeat == "weekly") {
        $event->repeat_int =1;                
       $event->repeat_freq = $repeat_desk->every_weak;
    }
    if ($event->repeat == "year") {
        $event->repeat_int =3;                        
        $event->repeat_freq = $repeat_desk->every_year;
    }

    if ($event->occurrence == "after-no-of-occurrences") {
        if($event->repeat_int == 0){
            $ext = "days";
        }
        if($event->repeat_int == 1){
            $ext = "weeks";
        }
        if($event->repeat_int == 2){
            $ext = "months";
        }
        if($event->repeat_int == 3){
            $ext = "years";
        }
       $event->repeat_end =  date('Y-m-d',strtotime("+" . $event->repeat_int . " ".$ext));
    } else if ($event->occurrence == "no-end-date") {
        $event->repeat_end = "2023-04-13";
    } else if ($event->occurrence == "end-by-end-date") {
        $event->repeat_end = $event->end_date;
    }

    if ($event->repeat_freq) {

        $event_start = strtotime($event->start_date);
        $event_end = strtotime($event->end_date);
        $repeat_end = strtotime($event->repeat_end) + 86400;
        $view_start = strtotime($event->view_start);
        $view_end = strtotime($event->view_end);
        $repeats = array();

        while ($event_start < $repeat_end) {
            if ($event_start >= $view_start && $event_start <= $view_end) {
                $event = clone $event; // clone event details and override dates
                $event->start_date = date(AEC_DB_DATETIME_FORMAT, $event_start);
                $event->end_date = date(AEC_DB_DATETIME_FORMAT, $event_end);
                array_push($repeats, $event);
            }
            $event_start = get_next_date($event_start, $event->repeat_freq, $event->repeat_int);
            $event_end = get_next_date($event_end, $event->repeat_freq, $event->repeat_int);
        }
        return $repeats;
    }
    return false;
 }

function get_next_date($date, $freq, $int) {
    if ($int == 0)
        return strtotime("+" . $freq . " days", $date);
    if ($int == 1)
        return strtotime("+" . $freq . " weeks", $date);
    if ($int == 2)
        return get_next_month($date, $freq);
    if ($int == 3)
        return get_next_year($date, $freq);
}

function get_next_month($date, $n = 1) {
    $newDate = strtotime("+{$n} months", $date);
    // adjustment for events that repeat on the 29th, 30th and 31st of a month
    if (date('j', $date) !== (date('j', $newDate))) {
        $newDate = strtotime("+" . $n + 1 . " months", $date);
    }
    return $newDate;
}

function get_next_year($date, $n = 1) {
    $newDate = strtotime("+{$n} years", $date);
    // adjustment for events that repeat on february 29th
    if (date('j', $date) !== (date('j', $newDate))) {
        $newDate = strtotime("+" . $n + 3 . " years", $date);
    }
    return $newDate;
}

function render_json($output) {
    header("Content-Type: application/json");
    echo json_encode(cleanse_output($output));
    exit;
}

function cleanse_output($output) {
    if (is_array($output)) {
        array_walk_recursive($output, create_function('&$val', '$val = trim(stripslashes($val));'));
    } else {
        $output = stripslashes($output);
    }
    return $output;
}

function fcdb_query_events($start, $end) {
    global $wpdb;
    $limit = ($limit) ? " LIMIT {$limit}" : "";
    $result = $wpdb->get_results("SELECT id, name,start_date,end_date,repeat_desk,`repeat`,occurrence,occurrence_desk

                                        FROM " . 

$wpdb->prefix . "lgc_events
                                        WHERE (
                                        (start_date >= '{$start}' AND start_date < '{$end}')
                                        OR (end_date >= '{$start}' AND end_date < '{$end}')
                                        OR (start_date <= '{$start}' AND end_date >= '{$end}')
                                        OR (start_date < '{$end}' AND (`repeat`!= ''))

                            )
                                        ORDER BY start_date{$limit};");

    return return_result($result);
}

function return_result($result) {
    if ($result === false) {
        global $wpdb;
        $this->log($wpdb->print_error());
        return false;
    }
    return $result;
} 
```

在上面的代码中，我使用了 repeat_desk，在其中存储了重复频率的 json 代码![在此处输入图像描述](../Images/774ab405a35ff273929f02d6d8a0c908.png)

和 jquery 调用你的文件

```
 events:  {
                url: '<?php echo $lgc_plugindir; ?>includes/imagerotator.php',
                data: {
                    action: 'get_events'
                },
                type: 'POST'
            } 
```

我将此用于wordpress，您可以根据您的要求使用此代码

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-07-16T08:45:40.587

对于具有比 FullCalendar 可以处理的内置事件更复杂的重复事件的人（[请参阅 slicedtoad 的答案](https://stackoverflow.com/a/29393128/5490505)），您可以使用[rSchedule](https://gitlab.com/john.carroll.p/rschedule)。

> 例如，仅周一至上午 7:00 至上午 9:00，周二 - 下午 4:00 至晚上 9:00

```
import { Schedule } from '@rschedule/rschedule';
import { StandardDateAdapter } from '@rschedule/standard-date-adapter';

const mondayDate = new Date(2019, 6, 15);
const tuesdayDate = new Date(2019, 6, 16);

const schedule = new Schedule({
  // add specific dates
  dates: [
    new StandardDateAdapter(mondayDate, {duration: 1000 * 60 * 60 * 2})
  ],
  // add recurrence rules
  rrules: [{
    start: tuesdayDate,
    duration: 1000 * 60 * 60 * 5, // duration is expressed in milliseconds
    frequency: 'WEEKLY'
  }],
});

const firstFiveEvents = schedule
  .occurrences({ take: 5 })
  .toArray()
  .map(adapter => 
    ({title: 'My event title', start: adapter.date, end: adapter.end})
  );

// You can then pass `firstFiveEvents` to fullcalendar for rendering 
```

rSchedule 还支持`moment`/`luxon`以及时区。有关更多信息，您可以查看[rSchedule 文档](https://gitlab.com/john.carroll.p/rschedule)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-03-07T07:18:34.593

目前我正在做有 FullCalendar 的项目，我必须做经常性事件。所以这就是我为什么可以做到这一点。希望这段代码对某人有所帮助:)

我在数据库中有下一个表：

```
CREATE TABLE IF NOT EXISTS `app_ext_calendar_events` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `users_id` int(11) NOT NULL,
  `name` varchar(255) NOT NULL,
  `description` text,
  `start_date` int(11) NOT NULL,
  `end_date` int(11) NOT NULL,
  `event_type` varchar(16) NOT NULL,
  `is_public` tinyint(1) DEFAULT NULL,
  `bg_color` varchar(16) DEFAULT NULL,
  `repeat_type` varchar(16) DEFAULT NULL,
  `repeat_interval` int(11) DEFAULT NULL,
  `repeat_days` varchar(16) DEFAULT NULL,
  `repeat_end` int(11) DEFAULT NULL,
  `repeat_limit` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `idx_users_id` (`users_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=18 ; 
```

我开发了下一个 php 类来获取带有重复事件的事件：

```
<?php

class calendar
{
  static public function get_events($date_from, $date_to,$calendar_type)
  {
    global $app_user;

    $list = array();

    $events_query = db_query("select * from app_ext_calendar_events where FROM_UNIXTIME(start_date,'%Y-%m-%d')>='" . $date_from . "' and  FROM_UNIXTIME(end_date,'%Y-%m-%d')<='" . $date_to . "' and event_type='" . $calendar_type . "' and users_id='" . db_input($app_user['id']) . "'");
    while($events = db_fetch_array($events_query))
    {
      $list[] = $events; 
    }

    if(count($repeat_events_list = calendar::get_repeat_events($date_to,$calendar_type)))
    {
      $list = array_merge($list,$repeat_events_list);
    }

    return $list;
  }

  public static function weeks_dif($start, $end)
  {
    $year_start = date('Y',$start);
    $year_end = date('Y',$end);

    $week_start = date('W',$start); 
    $week_end = date('W',$end);

    $dif_years = $year_end - $year_start;
    $dif_weeks = $week_end - $week_start;

    if($dif_years==0 and $dif_weeks==0)
    {
      return 0;
    }
    elseif($dif_years==0 and $dif_weeks>0)
    {
      return $dif_weeks;
    }
    elseif($dif_years==1)
    {
      return (42-$week_start)+$week_end;
    }
    elseif($dif_years>1)
    {
      return (42-$week_start)+$week_end+(($dif_years-2)*42);
    }

  }

  public static function months_dif($start, $end)
  {
    // Assume YYYY-mm-dd - as is common MYSQL format
    $splitStart = explode('-', date('Y-n',$start));
    $splitEnd = explode('-', date('Y-n',$end));

    if (is_array($splitStart) && is_array($splitEnd)) 
    {
        $startYear = $splitStart[0];
        $startMonth = $splitStart[1];
        $endYear = $splitEnd[0];
        $endMonth = $splitEnd[1];

        $difYears = $endYear - $startYear;
        $difMonth = $endMonth - $startMonth;

        if (0 == $difYears && 0 == $difMonth) 
        { // month and year are same
            return 0;
        }
        else if (0 == $difYears && $difMonth > 0) 
        { // same year, dif months
            return $difMonth;
        }
        else if (1 == $difYears) 
        {
            $startToEnd = 13 - $startMonth; // months remaining in start year(13 to include final month
            return ($startToEnd + $endMonth); // above + end month date
        }
        else if ($difYears > 1) 
        {
            $startToEnd = 13 - $startMonth; // months remaining in start year 
            $yearsRemaing = $difYears - 2;  // minus the years of the start and the end year
            $remainingMonths = 12 * $yearsRemaing; // tally up remaining months
            $totalMonths = $startToEnd + $remainingMonths + $endMonth; // Monthsleft + full years in between + months of last year
            return $totalMonths;
        }
    }
    else 
    {
      return false;
    }
  }

  public static function get_repeat_events($date_to,$calendar_type)
  {
    global $app_user;

    //convert date to timestamp
    $date_to_timestamp = get_date_timestamp($date_to);

    $list = array();

    //get all events that already started (start_date<=date_to)      
    $events_query = db_query("select * from app_ext_calendar_events where length(repeat_type)>0 and FROM_UNIXTIME(start_date,'%Y-%m-%d')<='" . $date_to . "' and  event_type='" . $calendar_type . "' and users_id='" . db_input($app_user['id']) . "'");
    while($events = db_fetch_array($events_query))
    {
      $start_date = $events['start_date'];

      //set repeat end      
      $repeat_end = false;
      if($events['repeat_end']>0)
      {
        $repeat_end = $events['repeat_end'];
      } 

      //get repeat events by type                       
      switch($events['repeat_type'])
      {
        case 'daily': 
            //check repeat events day bay day       
            for($date = $start_date; $date<=$date_to_timestamp; $date+=86400)            
            {
              if($date>$start_date)
              {
                $dif = round(abs($date-$start_date)/86400);

                if($dif>0)
                {  
                  $event_obj = $events;                                                
                  $event_obj['start_date'] = strtotime('+' . $dif . ' day',$event_obj['start_date']);                                                          
                  $event_obj['end_date'] = strtotime('+' . $dif . ' day',$event_obj['end_date']);

                  if(calendar::check_repeat_event_dif($dif,$event_obj,$repeat_end))
                  {                
                    $list[] = $event_obj;                
                  }
                }
              }
            }                                                          
          break;
        case 'weekly':  
            //check repeat events day bay day    
            for($date = $start_date; $date<=$date_to_timestamp; $date+=86400)            
            {
              if($date>$start_date)
              {
                //find days dif
                $dif = round(abs($date-$start_date)/86400);
                //find week dif
                $week_dif = calendar::weeks_dif($start_date, $date);

                if($dif>0 and (in_array(date('N',$date),explode(',',$events['repeat_days']))))
                {  
                  $event_obj = $events;                                                
                  $event_obj['start_date'] = strtotime('+' . $dif . ' day',$event_obj['start_date']);                                                          
                  $event_obj['end_date'] = strtotime('+' . $dif . ' day',$event_obj['end_date']);

                  if(calendar::check_repeat_event_dif($week_dif,$event_obj,$repeat_end))
                  {                
                    $list[] = $event_obj;                
                  }
                }
              }
            }                       

          break;            
        case 'monthly':                        
            /**
             *in calendar we display 3 month in one view
             *so we have to check difference for each month
             */

             //check 1                                      
            $date_to_timestamp2 = strtotime('-2 month',$date_to_timestamp);

            $dif =  calendar::months_dif($start_date, $date_to_timestamp2);

            if($dif>0)
            {  
              $event_obj = $events;                                                
              $event_obj['start_date'] = strtotime('+' . $dif . ' month',$event_obj['start_date']);                                                          
              $event_obj['end_date'] = strtotime('+' . $dif . ' month',$event_obj['end_date']);

              if(calendar::check_repeat_event_dif($dif,$event_obj,$repeat_end))
              {                
                $list[] = $event_obj;                
              }
            }

            //check 2
            $date_to_timestamp1 = strtotime('-1 month',$date_to_timestamp);

            $dif =  calendar::months_dif($start_date, $date_to_timestamp1);

            if($dif>0)
            {  
              $event_obj = $events;                                                
              $event_obj['start_date'] = strtotime('+' . $dif . ' month',$event_obj['start_date']);                                                          
              $event_obj['end_date'] = strtotime('+' . $dif . ' month',$event_obj['end_date']);

              if(calendar::check_repeat_event_dif($dif,$event_obj,$repeat_end))
              {                
                $list[] = $event_obj;                
              }
            }

            //check 3
            $dif =  calendar::months_dif($start_date, $date_to_timestamp);

            if($dif>0)
            {     
              $event_obj = $events;                                             
              $event_obj['start_date'] = strtotime('+' . $dif . ' month',$event_obj['start_date']);                                                          
              $event_obj['end_date'] = strtotime('+' . $dif . ' month',$event_obj['end_date']);

              if(calendar::check_repeat_event_dif($dif,$event_obj,$repeat_end))
              {                                
                $list[] = $event_obj;
              }
            }

          break;
        case 'yearly':                        
            $dif =  date('Y',$date_to_timestamp)-date('Y',$start_date);

            if($dif>0)
            {             
              $events['start_date'] = strtotime('+' . $dif . ' year',$events['start_date']);                                                          
              $events['end_date'] = strtotime('+' . $dif . ' year',$events['end_date']);

              if(calendar::check_repeat_event_dif($dif,$events,$repeat_end))
              {
                $list[] = $events;
              }
            }                                                                                               
          break;
      }            

    }

    return $list;

  }

  static public function check_repeat_event_dif($dif,$events,$repeat_end)
  {
    $check = true;

    if($dif>0)
    {
      //check interval
      if($dif/$events['repeat_interval']!=floor($dif/$events['repeat_interval'])) $check=false;            

      //check repeat limit
      if($events['repeat_limit']>0)            
      if(floor($dif/$events['repeat_interval'])>$events['repeat_limit']) $check=false;
    }
    else
    {
      $check=false; 
    } 

    //check repeat end date            
    if($repeat_end>0)
    {
      if($repeat_end<$events['start_date'])
      {
         $check=false;
      }
    }

    return $check;
  }  

} 
```

函数 get_events 以我的方式获取所有事件 + 重复事件有 4 种重复事件类型：每日、每周、每月、每年 + 有重复间隔、重复日期结束和重复限制。

函数 get_repeat_events 计算每种事件类型的差异，如果存在，则包括重复事件。

注意：函数 db_​​query() 可以替换为 myslq_query 或其他

准备事件到 FullCalendar 我正在使用下一个代码

```
$list = array();        

  foreach(calendar::get_events($_GET['start'],$_GET['end'],'personal') as $events)
  {
    $start = date('Y-m-d H:i',$events['start_date']);
    $end = date('Y-m-d H:i',$events['end_date']);

    $list[] = array('id' => $events['id'],
                  'title' => addslashes($events['name']),
                  'description' => str_replace(array("\n\r","\n","\r"),'<br>',$events['description']),
                  'start' => str_replace(' 00:00','',$start),
                  'end' => str_replace(' 00:00','',$end),
                  'color'=> $events['bg_color'],                      
                  'allDay'=>(strstr($start,'00:00') and strstr($end,'00:00')),
                  'url' => url_for('ext/calendar/personal_form','id=' . $events['id'])                      
                  );      
  }

  echo json_encode($list); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-12-18T12:51:10.827

这似乎在 eventRender 中工作得很好：function(event, element){}

```
 EXAMPLE JSON:
            var json = [{title: "All Day Event",
              start: "2015-12-22T00:00",
              end: "2015-12-22T23:55",
              dow: [2,4],
              recurstart: moment("2015-12-22").startOf("week"),
              recurend: moment("2015-12-22").endOf("week").add(1,'w')},{
              title: "Long Event",
              start: "2015-12-21T00:00",
              end: "2015-12-24T23:55",
              recurstart: moment("2015-12-21").startOf("month"),
              recurend: moment("2015-12-24").endOf("month"),
            }];

            eventRender: function(event, element){
            var theDate = moment(event.start).format("YYYY-MM-DD");
            var startDate = event.recurstart;
            var endDate = event.recurend;

            if (startDate < theDate && theDate < endDate) {
                console.log(theDate);
                }
            else {
                return event.length>0;
            }
            }, /* End eventRender */ 
```

1) 在 JSON 中设置开始/结束日期和时间。

2）在JSON中创建两个自定义recur Start和recur Ends。

3) 使用 moment.js 创建重复持续时间：http: [//momentjs.com/docs/#/durations/](http://momentjs.com/docs/#/durations/)。

4) Recur Start 使用 (start:) 日期来确定一周的开始。

5) Recur End 使用 (end:) 日期来确定一周的结束 + 增加 1 周。

6) 添加 1、2、3 周可以创建重复限制。

7) 添加名为 (recurlimit:"") 的 JSON 的另一部分可以管理重复限制。

8) 在 eventRender 中使用变量 - 设置我的示例使用的日期 (theDate)，即 moment(event.start)。正确设置格式很重要，这样 start/end/recurstart 等都匹配格式，即 (YYYY-MM-DD) [http://momentjs.com/docs/#/displaying/format/](http://momentjs.com/docs/#/displaying/format/)。

9) 自定义 recurstart 的变量

10) 自定义递归变量

11) 使用 IF 语句查看 (theDate) 介于 (recurstart) 和 (recurend) 之间的天气 - 记录结果

12) 使用 ELSE 语句返回长度>0 以隐藏不属于该参数的其他事件。

13) 非重复事件必须有 moment("match start date").startOf("month") & moment("match start date").endOf("month") 否则它们将不可见。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-04-22T13:11:58.840

要处理复杂的重复规则，我们应该使用 iCal 的 rrule 实现库。我们有[JS 库 (rrule)](https://jakubroztocil.github.io/rrule/)。FullCalendar 现在也支持[rrule 插件](https://fullcalendar.io/docs/rrule-plugin)。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-08-13T10:27:32.837

您可以使用下面的代码显示**一天、每天、每周、每两周和每月**事件，并在鼠标悬停事件上使用工具提示。

```
/*This is js*/

document.addEventListener('DOMContentLoaded', function() {
  var calendarEl = document.getElementById('calendar');

  var calendar = new FullCalendar.Calendar(calendarEl, {

    //NOTE MUST HAVE REFERENCE rrule javascript and plugin 'rrule', not rrPlugin like docs
    //if using scripts, not import/build method
    defaultDate: "2021-08-25",
    plugins: ['interaction', 'dayGrid', 'timeGrid', 'rrule'],
   timeZone: 'UTC',
   defaultView: 'dayGridMonth',
   header: {
     left: 'prev,next today',
     center: 'title',
     right: 'dayGridMonth,timeGridWeek,timeGridDay'
   },
   editable: true,
    eventClick: function(arg) {
      console.log(arg);
      if (confirm('Are you sure you want to delete this event?')) {
        arg.event.remove()
      }
    },
    eventMouseEnter: function(info) {
            var tis=info.el;
            var popup=info.event.extendedProps.popup;
            var tooltip = '<div class="tooltipevent" style="top:'+($(tis).offset().top-5)+'px;left:'+($(tis).offset().left+($(tis).width())/2)+'px"><div>' + popup.title + '</div><div>' + popup.description + '</div></div>';
            var $tooltip = $(tooltip).appendTo('body');
        },
        eventMouseLeave: function(info) {           
            $(info.el).css('z-index', 8);
            $('.tooltipevent').remove();
        },
    events: [    
   { 
     title: 'One Day',
      popup: {
          title: 'One Day',
          description: 'This is the description',
      }, 
     backgroundColor: '#c1391c',
     rrule: {        
        dtstart: '2021-08-01T10:30:00',
        until: '2021-08-01T19:30:00',        
        },          
    },    
    {     
     title: 'Daily',
     popup: {
          title: 'Daily',
          description: 'This is Daily the description',
      },       
     backgroundColor: '#bcc11c',
     rrule: {        
        freq: 'daily',
        dtstart: '2021-08-02T10:30:00',
        until: '2021-08-05T19:30:00',        
        },          
    }, 
    {     
     title: 'Weekly Event',
     popup: {
          title: 'Daily',
          description: 'This is Daily the description',
      },             
     backgroundColor: '#1cc1ab',
     rrule: {        
        freq: 'weekly',
        dtstart: '2021-08-06T10:30:00',
        until: '2021-08-20T19:30:00',        
        },          
    },    
    {     
     title: 'Two Weekly Event',
     popup: {
          title: 'Daily',
          description: 'This is Daily the description',
      },             
     backgroundColor: '#1c60c1',
     rrule: {        
        interval: 2,
        freq: 'weekly',
        dtstart: '2021-08-07T10:30:00',
        until: '2021-08-30T19:30:00',        
        },          
    },
    {     
     title: 'Four Weekl Event',
     popup: {
          title: 'Daily',
          description: 'This is Daily the description',
      },             
     backgroundColor: '#c11cbc',
     rrule: {        
        interval: 4,
        freq: 'weekly',
        dtstart: '2021-08-01T10:30:00',
        until: '2021-12-30T19:30:00',        
        },          
    },       
    ]

  });

  calendar.render();
});
```

```
html, body {
  margin: 0;
  padding: 0;
  font-family: Arial, Helvetica Neue, Helvetica, sans-serif;
  font-size: 14px;
}

#calendar {
  max-width: 900px;
  margin: 40px auto;
}
.tooltipevent{
    width:200px;/*
    height:100px;*/
    background:#ccc;
    position:absolute;
    z-index:10001;
    transform:translate3d(-50%,-100%,0);
    font-size: 0.8rem;
    box-shadow: 1px 1px 3px 0px #888888;
    line-height: 1rem;
}
.tooltipevent div{
    padding:10px;
}
.tooltipevent div:first-child{
    font-weight:bold;
    color:White;
    background-color:#888888;
    border:solid 1px black;
}
.tooltipevent div:last-child{
    background-color:whitesmoke;
    position:relative;
}
.tooltipevent div:last-child::after, .tooltipevent div:last-child::before{
    width:0;
    height:0;
    border:solid 5px transparent;/*
    box-shadow: 1px 1px 2px 0px #888888;*/
    border-bottom:0;
    border-top-color:whitesmoke;
    position: absolute;
    display: block;
    content: "";
    bottom:-4px;
    left:50%;
    transform:translateX(-50%);
}
.tooltipevent div:last-child::before{
    border-top-color:#888888;
    bottom:-5px;
}
```

```
<!-- Required js and css with url -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/rrule@2.6.3/dist/es5/rrule.min.js"></script>
<script type="text/javascript" src="https://unpkg.com/@fullcalendar/core@4.3.1/main.min.js"></script>
<script type="text/javascript" src="https://unpkg.com/@fullcalendar/daygrid@4.3.0/main.min.js"></script>
<script type="text/javascript" src="https://unpkg.com/@fullcalendar/timegrid@4.3.0/main.min.js"></script>
<script type="text/javascript" src="https://unpkg.com/@fullcalendar/interaction@4.3.0/main.min.js"></script>
<script type="text/javascript" src="https://unpkg.com/@fullcalendar/rrule@4.3.0/main.min.js"></script>
<script type="text/javascript" src="https://unpkg.com/tooltip.js/dist/umd/tooltip.min.js"></script>
<script type="text/javascript" src="https://unpkg.com/popper.js/dist/umd/popper.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>

<link rel="stylesheet" type="text/css" href="https://unpkg.com/@fullcalendar/core@4.3.1/main.min.css">
<link rel="stylesheet" type="text/css" href="https://unpkg.com/@fullcalendar/daygrid@4.3.0/main.min.css">
<link rel="stylesheet" type="text/css" href="https://unpkg.com/@fullcalendar/timegrid@4.3.0/main.min.css">
<div id='calendar'></div>
```

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2015-03-23T21:11:59.677

现在有一个插件可以做你想做的事：http: [//momentjs.com/docs/#/plugins/recur/](http://momentjs.com/docs/#/plugins/recur/)

# python - 迭代python中的变量名？

> ID：15161657
> 
> 赞同：10
> 
> 时间：2013-03-01T15:53:14.467
> 
> 标签：python, variables, names

我有一组名为 k1、k2 k3....k52 的变量。它们的变量是列表/numpy 数组，具体取决于场景。本质上，我想在一个循环中对它们执行相同的操作，但是在遍历它们时遇到了麻烦。基本上我想要的是这样的：

```
for i in arange(0,52):
  'k'+ str(i) = log10(eval('k' + str(i))) 
```

显然我知道上面的方法行不通，但它给出了这个想法。我的实际尝试是这样的：

```
for i in arange(0,10):

   rate = eval('k' + str(i))
   rate = np.array(rate,dtype=float)
   rate = log10(rate)
   rate.tolist()
   vars()[rate] = 'k' + str(i) 
```

（它已更改为 numpy 数组，因此我可以记录它，然后返回列表，因此我将变量名称更改回原来的名称）感谢您提供的任何帮助。我觉得这是一件很简单的事情，但现在它却让我无法理解。

编辑：非常感谢您的回答，我应该解释说我不能真正将它们存储为一个集合数组，出于我不想进入的原因，它们需要保留为独立变量。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T16:12:06.587

该行：

```
vars()[rate] = 'k' + str(i) 
```

必须替换为：

```
vars()['k' + str(i)]=rate 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-01T15:56:24.577

如果项目都是全局的，您可以使用`globals()`调用来获取映射，然后操作它们：

```
g = globals()

for i in arange(0,52):
    varname = 'k{}'.format(i)
    g[varname] = log10(g[varname]) 
```

但是您*真的*只想将所有这些项目存储在列表或字典中。

# sql-server-2008 - 为已经包含数据的子类型表填充外键

> ID：15161660
> 
> 赞同：1
> 
> 时间：2013-03-01T15:53:23.533
> 
> 标签：sql-server-2008, tsql, foreign-keys, normalization, supertype

我有表 [Moulds]、[Machines] 和 [SpareParts]，每个表都有不同的属性/列。我想将它们变成子类型并为它们创建一个名为 [Assets] 的超类型表，这样我就可以在维护计划应用程序中同时引用它们。

[Assets] 表将仅包含 [Asset_ID]、[Asset_Type] 和 [Description] 列。[Asset_ID] 是一个标识 PK，[Asset_Type] 是一个 int（例如 Molds = 1、Machines = 2 等），并且 [Description] 将从子类型表中获取。我将在每个子类型表中添加一个名为 [Asset_FK] 的列作为外键。

我的问题是每个子类型表中已经有数百到数千行数据。为每个现有记录手动创建 PK-FK 是不合理的，但我不确定自动化它所需的 SQL。

为了填充 [Assets] 表，我目前有这个：

```
DECLARE @AssetID TABLE (ID int)
INSERT INTO Assets (Assets.Description, Assets.Asset_Type)
OUTPUT Inserted.Asset_ID INTO @AssetID
SELECT IsNull(Moulds.Description,''), 5
FROM Moulds 
```

但是，我不确定如何在同一个查询中更新 [Moulds] 中的 FK，或者这是否是正确的方法。具体来说，我不确定如何识别我选择的要更新的子类型中的行。

**总结我的问题，我有一个空白的超类型表和填充的子类型表。我想使用子类型表填充超类型表，并自动填写现有子类型记录的 FK 值以链接它们。如何使用 SQL (MS SQL Server 2008r2) 做到这一点？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:00:31.343

尝试这个：

```
update m 
set m.fkid = a.id 
from moulds m 
inner join assets a 
   on isnull(m.description,'') = a.description and a.Asset_Type = 5
inner join @AssetID a2 on a.id = a2.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T16:29:49.227

所以，根据rs.的回答，我想出了一个主意。我向存储表 [Moulds]（或其他一些子类型表）的 PK 的表 [Assets] 添加了一个临时列，将其用于更新操作，然后删除该列。它看起来像这样：

```
USE [Maintenance]

ALTER TABLE Assets
ADD Asset_FK int null

GO

DECLARE @AssetID TABLE (ID int)

INSERT INTO Assets (Description, Asset_Type, Asset_FK)
OUTPUT Inserted.Asset_ID INTO @AssetID
SELECT IsNull(Description,''), 5, Mould_PK
FROM Moulds

UPDATE m 
SET m.Asset_ID = a.Asset_ID
FROM Moulds m 
INNER JOIN Assets a 
   ON m.Mould_PK = a.Asset_FK AND a.Asset_Type = 5
INNER JOIN @AssetID a2 ON a.Asset_ID = a2.ID

GO

ALTER TABLE Assets
DROP COLUMN Asset_FK 
```

可能不是最优雅的答案，但它看起来很简单并且有效。

# opencv - 具有两个功能差异的平均图像

> ID：15161669
> 
> 赞同：1
> 
> 时间：2013-03-01T15:53:48.820
> 
> 标签：opencv, image-processing

我想要处理图像，所以每个像素值都是它的值和 4 个邻居的平均值。

创建了两个不同的函数：

```
Mat meanImage(cv::Mat& inputImage)
{
    Mat output;
    Mat kernel(3,3,CV_32F,0.0);
    kernel.at<float>(0,1) = 0.2;
    kernel.at<float>(1,0) = 0.2;
    kernel.at<float>(1,1) = 0.2;
    kernel.at<float>(1,2) = 0.2;
    kernel.at<float>(2,1) = 0.2;
    filter2D(inputImage,output,-1,kernel);
    return output;
} 
```

和：

```
Mat meanImage2(Mat& inputImage)
{
    Mat temp;
    Mat output(inputImage.rows,inputImage.cols,inputImage.type());
    copyMakeBorder(inputImage,temp,1,1,1,1,BORDER_REPLICATE);
    CV_Assert(output.isContinuous());
    CV_Assert(temp.isContinuous());
    const int len = output.rows * output.cols * output.channels();
    const int rowLenTemp = temp.cols * temp.channels();
    const int twoRowLenTemp = 2 * rowLenTemp;
    const int rowLen = output.cols * output.channels();
    uchar* outPtr = output.ptr<uchar>(0);
    uchar* tempPtr = temp.ptr<uchar>(0);
    for(int i = 0; i < len; ++i)
    {
        const int a = 6 * (i / rowLen) + 3;
        outPtr[i] = (tempPtr[i+rowLenTemp+a] + tempPtr[i+a] + 
                    tempPtr[i+rowLenTemp+a+3] + tempPtr[i+rowLenTemp+a-3] +   
                    tempPtr[i+twoRowLenTemp+a]) / 5;
    }
    return output;
} 
```

我假设结果是一样的。所以我比较了图像：

```
Mat diff;
compare(meanImg1,meanImg2,diff,CMP_NE);
printf("Difference: %d\n",countNonZero(diff));
imshow("diff",diff); 
```

并消除很多差异。**这个功能有什么区别？**

编辑：从[Lena拍摄的 lena 图像的差异](http://www.hack4fun.org/h4f/sites/default/files/bindump/lena.bmp)

![Lena_diff](../Images/50db75d6228eae9bf48e3b6ba2a47794.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T15:59:44.277

请注意，当您对像素求和时，您添加了`unsigned char`s 并且您可能会溢出。

通过将这些像素值转换为`int`.

```
outPtr[i] = ((int)tempPtr[i+rowLenTemp+a] + (int)tempPtr[i+a] + 
             (int)tempPtr[i+rowLenTemp+a+3] + (int)tempPtr[i+rowLenTemp+a-3] +   
             (int)tempPtr[i+twoRowLenTemp+a]) / 5; 
```

**编辑**：我宁愿这样编码（假设图像类型是 uchar 并且它有 3 个通道）

```
for (int r = 0; r < output.rows; r++)
{
  uchar* previousRow = temp.ptr<uchar>(r) + 3; 
  uchar* currentRow = temp.ptr<uchar>(r+1) + 3; 
  uchar* nextRow = temp.ptr<uchar>(r+2) + 3; 

  uchar* outRow = output.ptr<uchar>(r);

  for (int c = 0; c < 3*output.cols; c++)
  {
    int value =              (int)previousRow[c] +  
      (int)currentRow[c-3] + (int)currentRow [c] + (int)currentRow[c+3] + 
                             (int)nextRow    [c];

    outRow[c] = value / 5;
  }
} 
```

# c++ - QtSerialPort 在错误的线程中实例化，导致信号/插槽失败

> ID：15161671
> 
> 赞同：11
> 
> 时间：2013-03-01T15:53:54.803
> 
> 标签：c++, qt, serial-port, qthread, qtserialport

我正在使用[QtSerialPort](http://qt-project.org/wiki/QtSerialPort)库通过 USB 与虚拟 COM 端口通信。COM 端口返回数据并在使用 QtSerialPort 给出的示例项目对其进行测试时正常工作，但当我将其作为项目的一部分运行时失败。

我检查了导致 QtSerialPort 被实例化的实例化链和线程，发现有些奇怪。结果如下。

```
main()
  MainWindow (Thread 0xbf8dbe0)        // Thread "A"
    HardwareManager (Thread 0xbf8dbe0) // Thread "A"
      QSerialPort (Thread 0xbfb95f0)   // Thread "B" !? 
```

在我的代码中，main() 函数实例化了 MainWindow，而 MainWindow 又实例化了 HardwareManager 并将其存储为私有变量。当 HardwareManager 被实例化时，它也会实例化 QSerialPort 实例，以便它可以正确地与 COM 端口通信。

但是，您会注意到上面我的 QSerialPort与父对象以及它的父对象位于**不同的线程中（它在线程 B 中，而两个祖先都在线程 A 中）。**我认为这个其他线程导致我的信号/插槽失败。如果我[dumpObjectInfo](http://qt-project.org/doc/qt-4.8/qobject.html#dumpObjectInfo)，它会将我的 Signal/Slot 列为已设置，但事件永远不会触发。

```
this->serial = new QSerialPort();
connect(this->serial, SIGNAL(readyRead()), this, SLOT(readSerialData()); 
```

以上是我用来创建新串行端口并将其连接到正确插槽的代码。实际的波特率、奇偶校验和数据/停止位配置分别发生（并且工作正常，如 QtSerialPort 提供的示例应用程序中所测试的那样）。

有没有人知道为什么这个特定对象（QSerialPort 实例）在不同的线程中被实例化？我试过“moveToThread”来切换线程关联，但似乎没有任何效果。

我还在[Qt 项目论坛上发过帖子](http://qt-project.org/forums/viewthread/25316/)，但还没有有用的回复。

**编辑：** 以下是调用链中的相关代码：

```
// main()
QApplication a(argc, argv)
MainWindow window = new MainWindow(); // [1]
MainWindow.show();
return a.exec();

// MainWindow::MainWindow() [1]
this->toolController = new QtToolController(this);
HardwareManager *manager = new HardwareManager(this->toolController); // [2]

// HardwareManager::HardwareManager() [2]
this->serial = new QSerialPort();
connect(this->serial, SIGNAL(readyRead()), this, SLOT(readSerialData())); 
```

当 QSerialPort 准备好被读取时（它有数据要提供），它会触发`readyRead`信号（至少，它应该如此）。此信号在 Qt 示例项目中正确触发，但我从未在我的应用程序中收到该信号。我相信我没有收到信号的原因是因为这些线程问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T12:56:48.820

您可以使用[QueuedConnection](http://qt-project.org/doc/qt-4.8/qt.html#ConnectionType-enum)来捕获来自不同线程的信号。

```
connect(this->serial, SIGNAL(readyRead()), 
    this, SLOT(readSerialData()), Qt::QueuedConnection); 
```

这样，一旦控件返回到它的事件循环，插槽就应该在主线程的上下文中执行。

此外，[这篇文章](http://www.qtcentre.org/threads/52374-Need-Qt-SerialPort-class-example-using-signals-and-slots-WITHIN-A-THREAD?p=234446#post234446)似乎建议您不应该为 QtSerialPort 设置父级（可能是因为 moveToThread 不适用于有父级的 QObjects）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-10T20:22:38.287

本着让遇到此问题的任何其他人都能获得答案的精神，该问题与发布/调试版本有关。QtSerialPort 库仅为我的发布环境而构建，无论出于何种原因，在调试模式下运行我的应用程序时都会链接到发布 QtSerialPort，并且线程上下文会丢失。

为了解决这个问题，我确保我已经构建了正确版本的库，然后确保我链接到适合我的环境的正确版本。

# html - 响应式设计 - 使用 css 重新排列元素位置

> ID：15161674
> 
> 赞同：2
> 
> 时间：2013-03-01T15:53:59.057
> 
> 标签：html, css, media-queries

如果可能的话，我想在没有 JavaScript 的情况下这样做：

我将在页面上有 2 个或更多元素，我想更改页面为特定大小时的顺序。我正在使用媒体查询，并将根据屏幕尺寸提供不同的 CSS。div“a”通常应该在顶部，但如果屏幕尺寸低于 480px，那么 b 应该直接在 a 上方。

```
<div id="a" class="myDivs">Top when on desktop</div>
<div id="b" class="myDivs">Becomes top when under 480px wide screen</div> 
```

我必须保留在 mobile.css 中的 CSS：

```
.myDivs {
  width: 100%;
} 
```

所以没有指定高度；因此，我不能简单地定位绝对并设置边距顶部或顶部。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-10-06T19:04:21.703

```
 <div class="parent">
    <div class="child-1">This is Child One</div>
    <div class="child-2">This is Child Two</div>
    <div class="child-3">This is Child Three</div>
 </div> 
```

使用 CSS 中的表格布局重新排列 div。

```
@media screen and (max-width: 768px) {
    .parent { 
      display: table;
    }
    .child-3 {
      display: table-header-group;
    }
    .child-1 {
      display: table-footer-group;
    }
} 
```

元素将按以下顺序显示：Child 3、Child2、Child1

小提琴位于：http: [//jsfiddle.net/lockedown/gyef3vj7/1/](http://jsfiddle.net/lockedown/gyef3vj7/1/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-01T15:59:35.343

您在表示方面谈论源顺序独立性。坏消息是，从今天开始，如果你没有变得超级笨拙（阅读：用 JS 或类似的东西移动 DOM），你有点不走运。好消息是，以[CSS Flexbox](http://net.tutsplus.com/tutorials/html-css-techniques/an-introduction-to-css-flexbox/)的形式提供帮助- 查看该页面上的“排序”。

其他资源：

[https://developer.mozilla.org/en-US/docs/CSS/Tutorials/Using_CSS_flexible_boxes](https://developer.mozilla.org/en-US/docs/CSS/Tutorials/Using_CSS_flexible_boxes)

[http://css-tricks.com/old-flexbox-and-new-flexbox/](http://css-tricks.com/old-flexbox-and-new-flexbox/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-01T16:21:42.840

这个可能会奏效，但可能会有缺点......

CSS：

```
.child-1,.child-2 {
    width:100%;
}

.parent{position:relative;}

@media screen and (max-width:480px){
    .child-1{
       position: absolute;
       top: 100%;
    }
} 
```

HTML：

```
<div class="parent">
    <div class="child-1">This is Child One</div>
    <div class="child-2">This is Child Two</div>
</div> 
```

演示：http: [//jsfiddle.net/pavloschris/pYkfK/embedded/result/](http://jsfiddle.net/pavloschris/pYkfK/embedded/result/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-16T20:33:44.320

```
<div class="parent">
    <div class="child-1">This is Child One</div>
    <div class="child-2">This is Child Two</div>
</div> 
```

使用 FlexBox - 在 iPad iOS7 上测试，这将反转两列。

```
@media screen and (max-width: 480px)
{
   .parent 
   {
       display: -webkit-flex;
       display: flex;
       -webkit-flex-direction: column-reverse;
       flex-direction: column-reverse; 
   }
} 
```

我正在使用 Modernizr，因此我可以通过从 HTML 标记的类中删除“flexbox”类来轻松测试对非 flexbox 的支持。

```
.flexbox .parent 
{
    display: -webkit-flex;
    display: flex;
    -webkit-flex-direction: column-reverse;
    flex-direction: column-reverse; 
} 
```

*注意：*我对 Flexbox**很**陌生，这些可能不是现在或将来需要的所有正确前缀，但我已经在我的 iPad 上进行了测试，这是我的主要目标，它工作得很好。另请参阅[iPad 上的 CSS 灵活框布局](https://stackoverflow.com/questions/19028531/css-flexible-box-layout-on-ipad)

# xna - 如何在 XNA Visual Studio 中使用拇指杆对 360 度运动进行编码

> ID：15161677
> 
> 赞同：0
> 
> 时间：2013-03-01T15:54:04.537
> 
> 标签：xna, rotation, controls

好的，所以我正准备制作一款游戏，它都围绕着玩家控制的一个圆圈。这个游戏是一个自上而下的视图。枪指向北方或“向上”。我创建了一个精灵表，其中枪指向每个直角之间的 4 个方向。所以在枪指向 ^ 和它指向 > 之间还有 4 个其他位置。这是真的。

我想要做的是对游戏进行编码，这样如果你将右拇指旋转一圈，它就会使枪在整个 360 度范围内旋转。但我不知道该怎么做，因为我只工作过到目前为止的基本方向。即使我让拇指杆轴运行，我也不确定如何将每个点作为拇指杆的位置。

帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:50:44.617

```
//Gets us the rotation from the stick: (taking this from memory, som might be reverse order etc)
float radians = Math.Atan2(GamePadState.ThumbSticks.Left.Y, GamePadState.ThumbSticks.Left.X);

//Top half: 0 = stick to the right to Pi = stick to the left.
//Bottom half: 0 = stick to the right to -Pi = stick to the left.

//I'll just do this for 4 directions, as I have limited time, and the concept should be obvious:

if ((radians > Math.Pi * -0.25f) && (radians < Math.Pi * 0.25f))
    //Direction is Right
else if ((radians >= Math.Pi * 0.25f) && (radians < Math.Pi * 0.75f))
    //Direction is Up
else if ((radians >= Math.Pi * 0.75f) || (radians <= Math.Pi * -0.75f))
    //Direction is Left
else if ((radians <= Math.Pi * -0.25f) && (radians > Math.Pi * -0.75f))
    //Direction is Down 
```

To get more angles, you just do more of this. you may find it easier to just use the Thumbstick:

```
Vector2 stick = GamePadState.ThumbSticks.Left;
stick.Normalize();

if (stick.X >= 0.5f) (NE, E, SE)
{
    if (stick.Y >= 0.5f)
        //Direction is NE
    else if (stick.Y <= -0.5f)
        //Direction is SE
    else
        //Direction is E
}
else if (stick.X <= -0.5f) (NW, W, SW)
{
    if (stick.Y >= 0.5f)
        //Direction is NW
    else if (stick.Y <= -0.5f)
        //Direction is SW
    else
        //Direction is W
}
else if (stick.Y >= 0.5f)
    //Direction is N
else if (stick.Y <= -0.5f)
    //Direction is S
else
    //Direction is nothing. should not happen 
```

Edit; To shoot bullets in the direction of the thumbstick, just use the thumbstick normalized * speed as velocity for the bullets.

# php - Apache 并行路径文档根目录

> ID：15161678
> 
> 赞同：1
> 
> 时间：2013-03-01T15:54:07.620
> 
> 标签：php, windows, apache

我在 apache2 (Windows 7) 中建立了一个网站，说我的 DocumentRoot 是 /mysite/content

但我也包含在并行目录中，例如 /mysite/lib

所以我的 index.php 文件说：

```
require_once("/mysite/lib/myfile.php"); 
```

但它不会找到该文件，因为它从文档根目录中获取它。所以它正在寻找

```
/mysite/content/mysite/lib/myfile.php instead of /mysite/lib/myfile.php 
```

而且我无法创建根目录/mysite，因为包含的文件是指根目录，mysite/content。任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T16:01:48.363

您必须更改 php.ini 文件中的包含路径

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T17:48:23.530

当包括尝试使用完全限定的路径名​​时，这样你就不会在需要 php 文件时遇到这些问题。您可以将`__DIR__`常量与 realpath 结合使用，以建立一种根目录，然后包含您需要的内容。

假设根目录是某事/公共，并且您想从某事/库中包含。假设您在某些/公共的 index.php 中，您将执行以下操作：

```
$rootPath = realpath(__DIR__ . "/../");
require_once $rootPath . "/libs/somefile.php"; 
```

我认为这应该可以帮助您解决问题。在 *nix 系统上，请注意您需要 apache 拥有 libs 目录的权限才能从那里读取。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T08:28:21.877

这个答案的本质是找到当前 index.php 位置并确定应用程序的基本路径，然后通过使用该基本路径，相对轻松地解决应用程序中的任何内容。

您可以从 php 获取信息：下面的示例路径是针对 xampp 服务器设置的，您可能（可能）得到不同的结果，但它们（我希望）是正确的。

```
$path = str_replace('\\','/',dirname(__FILE__)); 
```

这将为您提供 index.php 的服务器相对路径，例如：'d:/xampp/htdocs/mysite/content'

那么您可以通过以下方式删除“内容”

```
$path = substr($path, 0, strrpos($path,'/')+1); 
```

现在您将拥有类似应用程序根目录的内容：

'd:/xampp/htdocs/mysite/'

现在你可以通过说来访问 lib：

```
require_once($path.'lib/myfile.php'); 
```

希望这会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T13:41:55.223

这很可能是您的 php.ini 的问题。

在您的 webroot 中创建一个名为 phpinfo.php 的文件，其内容为：

```
<?php
phpinfo(); 
```

没有别的了。保存它然后在您的网络浏览器中加载它，您正在寻找两件事

1.  安全模式
2.  open_basedir

如果安全模式已打开，请将其关闭。如果 open_basedir 不是 none，请将其设置为 none。如果您出于某种原因无法编辑 php.ini，则可以在 .htaccess 中设置它：

```
php_admin_value open_basedir none 
```

**来源**：
[http ://www.php.net/manual/en/ini.sect.safe-mode.php#ini.safe-mode-include-dir](http://www.php.net/manual/en/ini.sect.safe-mode.php#ini.safe-mode-include-dir)
[http://www.php.net/manual/en/ini .core.php#ini.open-basedir](http://www.php.net/manual/en/ini.core.php#ini.open-basedir)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T16:51:09.500

在调用之前，您可以使用这样的东西`require_once("myfile.php");`：

```
$base  = realpath(dirname(__FILE__) . '/../');
$paths = array(
    $base . '/mysite/lib',
    '.',
    get_include_path()
);

set_include_path(implode(PATH_SEPARATOR, $paths)); 
```

# c# - 了解操作和 UriQuery

> ID：15161679
> 
> 赞同：1
> 
> 时间：2013-03-01T15:54:12.660
> 
> 标签：c#, wpf, mvvm

我在工作中被分配了一项任务，作为实习生，一切都是新的哈哈。我被要求做以下事情：

```
//To test this you will need to update the code CoreModuleDesktop.cs.
this.NavManager.RegisterCommonActionItem("History Audit Log", "AuditLog", 110,
                    new BitmapImage(new Uri("pack://application:,,,/Core;component/Resources/maintenance.png")),
                    new Action(() => _regionManager.RequestNavigate(RegionNames.MainRegion, typeof(Views.HistoryAuditLogView).FullName)));

//The part inside the action will need to be changed to look something like this 
//where you specify the parameters.  Then you can pull them out OnNavigateTo method
//like in the ServiceOrderMaintenanceViewModel.  For this step just pass in the 
//Table and Key ID, leave the connection string hard coded.

IRegionManager regionManager = AllianceApp.Container.GetExportedValue<IRegionManager>();
UriQuery query = new UriQuery();

query.Add("AccountID", accountID.ToString());
query.Add("ServiceOrderID", serviceOrderID.ToString());

regionManager.RequestNavigate(RegionNames.MainRegion, new Uri(typeof(ServiceOrderMaintenanceView).FullName + query.ToString(), UriKind.Relative)); 
```

它们在 Action 内部的部分是什么意思？以及提供的查询到底是如何工作的。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:01:45.807

“行动内部”是`<here>`：

```
new Action(() => <here> ); 
```

为了在其中放置多行，`Action`您需要使用花括号定义一个块`{}`：

```
new Action(() => 
    {
        // this is
        // a couple of lines
        // of code to modify
    }); 
```

希望这可以帮助您入门。有关`Action`C# 工作原理的一些背景信息，[请参阅 msdn 文档](http://msdn.microsoft.com/en-us/library/018hxwa8.aspx)。

# javascript - 在使用数组的方法调用中设置选项

> ID：15161680
> 
> 赞同：0
> 
> 时间：2013-03-01T15:54:14.757
> 
> 标签：javascript, jquery, arrays

我怎样才能使它`.slider()`使用数组中的值？

我有这个相同的滑块，我必须设置几次，所以我想我会调用它一次，然后输入带有索引的值。这可能不是这样做的方法，但它就是我的想法。

每次调用滑块时，我都想逐步更改索引号，以便将其更新为接下来的 6 个值。我意识到这段代码不起作用，它只是为了解释。

```
var yolo = ["yield", "true", "15.2", "308", "0.3", "[75.8, 241.4]", "tensile", "true", "37.7", "345", "[81.2, 243.3]"];

     $( yolo[0] ).slider({
        range: yolo[1],
        min: yolo[2],
        max: yolo[3],
        step : yolo[4],
        values: yolo[5],

        slide: function( event, ui ) {
            $( "#" + yolo[0] + "-value" ).val( ui.values[ 0 ] + " - " + ui.values[ 1 ] );
        }
     }); //When done, call again, just that updating the index numbers to the next 6 
```

也许一个`.each()`with `$.extend()`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:59:40.957

您可以执行以下操作：

```
var settings = {
    "yield" : {
         range: true,
         etc..
    },
    "yield2" : {
         range: true,
         etc..
    }
}

$.each(settings, function(key, value){
    var _key = key;
    $( "#" + _key ).slider(
        $.extend(value, {    
            slide: function( event, ui ) {
                $( "#" + _key + "-value" ).val( ui.values[ 0 ] + " - " + ui.values[ 1 ] );
            }
        })
    );
}); 
```

额外信息：

1.  [jQuery.扩展](http://api.jquery.com/jQuery.extend/)
2.  [jQuery.each](http://api.jquery.com/jQuery.each/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T16:00:10.197

您可以只使用普通对象，而不是使用数组：

```
var yolo = {
   range : true,
   min : 15.2,
   max : 308,
   slide : function(){}
}; 
```

然后将其传递给滑块。

```
$(...).slider(yolo); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T15:56:48.373

使用 .each [http://api.jquery.com/each/](http://api.jquery.com/each/)遍历数组。

# compiler-construction - 编译器考试说明

> ID：15161685
> 
> 赞同：0
> 
> 时间：2013-03-01T15:54:20.853
> 
> 标签：compiler-construction, invariants, induction

我正在准备编译器考试，我在过去的论文中发现了以下两个我不知道如何回答的问题：

```
1\. Array bounds checking requires code to check each array subscript to ensure it
falls within the array's declared range. How could induction variable analysis be
used to avoid repeated bounds checks in "for" loops.

2\. Give a short example in Java in which one array address calculation is loop-
invariant and another array address is an induction variable. 
```

我知道不变量和归纳变量的含义，但我真的不知道在解释这两种解决方案方面对我的期望是什么。

如果有人帮助我解释，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:04:10.793

第一个非常简单 - 因为归纳变量每次迭代都会增加固定量，您可以预先计算用作数组下标的任何归纳变量的最大值，并检查它是否不超过数组边界。您将在执行循环之前执行一次此操作，而不是在每次迭代时检查下标。

至于第二个，有很多关于循环不变和归纳变量循环的例子（用各种语言，包括Java）——这些术语只需要谷歌。

# emacs - 如何发送 M-。到 Emacs 中的终端（多项）

> ID：15161689
> 
> 赞同：5
> 
> 时间：2013-03-01T15:54:31.340
> 
> 标签：emacs, terminal, ansi-term

我正在尝试将命令`M-.`（即）发送到在 Emacs中以[多术语](http://www.emacswiki.org/MultiTerm)`<ALT> .`运行的终端。作为参考，通常必须在终端中插入上一个命令的最后一个参数（即/ ）`M-.``yank-last-arg``insert-last-argument`

我有以下设置：

```
(require 'multi-term)
(multi-term-keystroke-setup)
(setq multi-term-program "/home/john/sw/zsh/bin/zsh")

(setq term-bind-key-alist
    (list
    ( cons "C-c C-j" 'term-line-mode)
    ( cons "C-c C-k" 'term-char-mode)
    ( cons "C-p"  'term-send-raw)
    ( cons "C-n"  'term-send-raw)
    ( cons "C-a"  'term-send-raw)
    ( cons "C-e"  'term-send-raw)
    ( cons "M-b"  'term-send-backward-word)
    ( cons "M-f"  'term-send-forward-word)
    ( cons "M-d"  'term-send-forward-kill-word)
    ( cons "C-k"  'term-send-raw)
))
)

# Make sure yanking works:
(add-hook 'term-mode-hook (lambda ()
                            (define-key term-raw-map (kbd "C-y") 'term-paste))) 
```

我试过添加：

```
( cons "M-."  'term-send-raw) 
```

但它似乎没有做任何事情。

如果它有用，这里是似乎具有术语前缀并在`term.el`

```
term-send-M-x
term-send-backspace
term-send-backward-kill-word
term-send-backward-word
term-send-del
term-send-down
term-send-end
term-send-eof
term-send-forward-kill-word
term-send-forward-word
term-send-home
term-send-input
term-send-insert
term-send-invisible
term-send-left
term-send-next
term-send-prior
term-send-quote
term-send-raw
term-send-raw-meta
term-send-reverse-search-history
term-send-right
term-send-up 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T18:43:45.507

我不必`multi-term`测试它，但您可以尝试使用`term-send-raw-meta`而不是`term-send-raw`：

```
(setq term-bind-key-alist
    (list (cons "C-c C-j" 'term-line-mode)
          ; ...
          (cons "M-."  'term-send-raw-meta))) 
```

# bash - bash：逐行读取文件并 sed 追加

> ID：15161694
> 
> 赞同：3
> 
> 时间：2013-03-01T15:54:57.877
> 
> 标签：bash, sed, while-loop

我有一个文本文件，它可以有 X 个字段，每个字段用逗号分隔。在我的脚本中，我逐行阅读，检查该行上填充了多少字段，并确定我需要在该行末尾附加多少逗号来表示所有字段。例如，一个文件如下所示：

```
Address,nbItems,item1,item2,item3,item4,item5,item6,item7    
2325988023,7,1,2,3,4,5,6,7
2327036284,5,1,2,3,4,5
2326168436,4,1,2,3,4 
```

应该变成这样：

```
Address,nbItems,item1,item2,item3,item4,item5,item6,item7
2325988023,7,1,2,3,4,5,6,7
2327036284,5,1,2,3,4,5,,
2326168436,4,1,2,3,4,,, 
```

我下面的脚本有效，但它似乎非常低效。是逐行阅读对大文件有困难吗？是 sed 导致减速吗？更好的方法来做到这一点？

```
#!/bin/bash

lineNum=0
numFields=`head -1 File.txt | egrep -o "," | wc -l`

cat File.txt | while read LINE
do
        lineNum=`expr 1 + $lineNum`
        num=`echo $LINE | egrep -o "," | wc -l`
        needed=$(( numFields - num ))
        for (( i=0 ; i < $needed ; i++ ))
        do
                sed -i "${lineNum}s/$/,/" File.txt
        done
done 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-01T16:08:52.860

这种类型的事情通常最好使用类似的语言来完成`awk`，例如：

```
awk 'NR==1{n=NF}{$n=$n}1' FS=, OFS=, file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T16:08:59.893

这是一个完整的`bash`解决方案。

```
(
    IFS=","
    read hdrLine
    echo "$hdrLine"
    read -a header <<< "$hdrLine"
    numFields="${#header[@]}"

    while read -a line; do
        pad=${#line[@]}
        while (( pad < numFields )); do
            line[pad++]=
        done
        echo "${line[*]}"
    done
) < File.txt > newFile.txt
mv newFile.txt File.txt 
```

`awk`解决方案要好得多；最好将其视为`bash`演示。

# c++ - GetKeyboardState 返回错误结果

> ID：15161695
> 
> 赞同：0
> 
> 时间：2013-03-01T15:55:05.220
> 
> 标签：c++, winapi

我用的是win7 64位。我使用 GetKeyboardState() 来获取键盘状态。

```
BYTE keyState[256];
GetKeyboardState(keyState);
BOOL leftButtonClicked = GetKeyState(VK_LBUTTON); 
```

如果在主 wnd 内部单击，一切正常，但如果在主 wnd 外部单击，leftButtonClicked 仍然为 true。

msdn说，

> 应用程序可以调用此函数来检索所有虚拟键的当前状态。当线程从其消息队列中删除键盘消息时，状态会发生变化。状态不会随着键盘消息被发布到线程的消息队列而改变，也不会随着键盘消息被发布到其他线程的消息队列或从其他线程的消息队列中检索而改变。

但是 main wnd 没有收到 WM_LBUTTONDOWN，那么为什么这个函数会得到错误的结果呢？还是我误解了什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T01:48:13.297

GetKeyboardState 和 GetKeyState 返回键盘和鼠标的*缓冲*状态。当最后一个输入事件进入消息队列时存储。一个重要的特性是，如果程序不发送消息，消息可以在队列中存储一段时间。

当您在窗口外单击时，生成的输入事件会转到与您单击的窗口相关联的任何队列。不是您的程序的队列。因此，键盘状态不会改变。

您需要使用 GetAsyncKeyState() 来获取当前状态。

# php - 如何使用 Zend\Soap\AutoDiscover 在我的服务类中描述 wsdl 选择元素？

> ID：15161696
> 
> 赞同：2
> 
> 时间：2013-03-01T15:55:08.993
> 
> 标签：php, zend-framework, soap, wsdl

我使用 \Zend\Soap\AutoDiscover 类从服务类生成肥皂服务的 wsdl。我描述了文档块中的属性类型。但是，我必须描述选择元素 (xsd:choice) 但我不知道如何？

```
 <xsd:complexType name="PaymentModeType">
    <xsd:sequence>
      <xsd:element name="mode" type="xsd:unsignedLong" />    
      <xsd:choice>
        <xsd:element name="check" type="CheckType"/>
        <xsd:element name="balance" type="BalanceType"/>        
        <xsd:element name="money_transfer_received" type="MoneyTransferReceivedType"/>        
       </xsd:choice>
     </xsd:sequence>
   </xsd:complexType> 
```

谢谢你的帮助。

# ruby-on-rails - 似乎无法弄清楚基本 ROR 博客应用程序中的帖子和评论关系

> ID：15161698
> 
> 赞同：0
> 
> 时间：2013-03-01T15:55:14.800
> 
> 标签：ruby-on-rails, ruby

所以当我尝试访问时`http://127.0.0.1:3000/users/1/posts/17`出现错误

```
undefined method `post_comments_path' for #<#<Class:0x007fece23212a8>:0x007fece2a7c110>

Extracted source (around line #1):

1: <%= form_for([@post, @comment]) do |f| %>
2: 
3:  <%= f.label :name %>
4: 
```

这是引用我的文件 -`/app/views/posts/_form_comment.html.erb where line #1 raised:`

我的`/app/views/posts/_form_comment.html.erb`文件如下 -

```
<%= form_for([@post, @comment]) do |f| %>

    <%= f.label :name %>
    <br />
    <%= f.text_field :name%>
    <br />
    <%= f.label :comment %>
    <br />
    <%= f.text_area :comment%>
    <br />

<%= f.submit "Create comment" %>

<% end %> 
```

这是我的 PostController 中的 show 方法

```
def show
    @post = Post.find(params[:id])
    @comment = @post.comments.build
    @cl = Comment.where(:post_id => @comment[:post_id])

  end 
```

现在请注意，如果清空文件的内容`/app/views/posts/_form_comment.html.erb`，页面加载就好了。显示帖子标题和内容。除了评论区。所以，我猜评论部分有问题。但我不知道是什么。

**重要提示：这以前没有发生过。在我将用户模型与帖子模型相关联之前，它工作正常。** 非常感谢。

更新：我的路线看起来像 -

```
 resources :users, only: [:show] do 
    resources :posts do
    end
    resources :comments, only: [:create]
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:58:14.563

你应该有类似的东西

```
resources :posts do
  resources :comments
end 
```

在您的路线中。这是`url_for`成功创建路线所需的`[@post, @comment]`

更新：包括帖子和用户的嵌套资源

以下完全没问题

```
resources :posts do
  resources :comments
end

resources :users do
  resources :posts
end 
```

# jquery - jQuery Supersized IE9 问题

> ID：15161699
> 
> 赞同：0
> 
> 时间：2013-03-01T15:55:15.350
> 
> 标签：jquery, windows, background, internet-explorer-9, supersized

因此，正如您在这张图片中看到的那样[http://cl.ly/image/3I0K1c1J3L1T](http://cl.ly/image/3I0K1c1J3L1T)出于某种原因 IE9 没有像在其他所有浏览器中那样缩放超大幻灯片。只是为了表明它在其他 IE 浏览器中工作，我将 IE8 放在它旁边。

在做了一些研究后，我把它从我的“头脑”中删除了

```
meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" 
```

但没有任何运气。有任何想法吗？

如果您愿意，可以查看[此页面上的代码。](http://comanchenationcasinos.com.s163905.gridserver.com/)

我在单独的笔记本电脑上运行 Windows 进行测试，但它是 Windows 8，因此它不会单独运行 IE9 或出于某种原因在 IE Tester 中运行。

# angularjs - ng-options 选择单个值

> ID：15161701
> 
> 赞同：2
> 
> 时间：2013-03-01T15:55:20.400
> 
> 标签：angularjs

我有一个简单的下拉列表，里面有状态列表：

```
<select name="state" ng-model="state_id" ng-options="s.name for s in states"></select> 
```

如何仅将状态 id 放入我的模型中，而不是包含 id 和名称的整个对象？

"state_id": "MI" INSTEAD OF "state_id": {"id": "MI", "name": "Michigan" }

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T16:03:11.787

明白了，是

```
ng-options="s.id as s.name for s in states" 
```

# css - 更正 CSS 以覆盖引导程序中的下拉菜单项

> ID：15161706
> 
> 赞同：-1
> 
> 时间：2013-03-01T15:55:40.103
> 
> 标签：css, twitter-bootstrap

我有以下 CSS（在页面最后加载）

```
.dropdown-menu-normal:hover,
.dropdown-menu-normal a:hover
{
    background: transparent!important;
    color: #5cac7c;
    text-decoration: underline!important;
    text-align: right;
    float: right;
}

.dropdown-menu-normal,
.dropdown-menu-normal a
{
    color: #5cac7c!important;
    text-align: right;
    float: right;
} 
```

此类应用于标准引导下拉菜单中的 LI 元素。

这设置了下拉菜单项的样式，就像在菜单中浮动的普通链接一样。现在，如果没有 !important 标志，我无法正确使用选择器来使用此 CSS 任何人都可以帮忙吗？

我知道我可以用它来运行，但我真的很讨厌必须使用 !important 来处理我应该能够直接替换的东西。

jsFiddle 使用 !important [http://jsfiddle.net/y67qP/](http://jsfiddle.net/y67qP/)

jsFiddle 没有[http://jsfiddle.net/y67qP/1/](http://jsfiddle.net/y67qP/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T16:30:06.297

CSS 中的特异性以四个整数 (0,0,0,0) 开始

`Inline style == first number`

`Id == Second number`

`Attribute selectors and Pseudo-classes, Classes == Third`

`Type selectors == Fourth`

* * *

您只需要弄清楚`bootstrap.css`文件中选择器的特殊性。

目前，常规状态的具体值为 12（一类 - 两个元素）

`.dropdown-menu > li > a`== 12

你`.dropdown-menu-normal, .dropdown-menu-normal a`的 == 10 / 11 分别

为了使常规状态正常工作，使您的选择器更加具体，例如：

`ul .dropdown-menu-normal, ul .dropdown-menu-normal a`这似乎有效。

对于悬停，只需遵循相同的概念，您将覆盖它。

[这](http://jsfiddle.net/y67qP/3/)是一个例子

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T15:58:43.717

为了避免必须使用重要，您应该使您的选择器更具体，即进一步向后移动 DOM 以获得该特定元素的更准确的精度

例如，`.dropdown-menu`您可以从 etc 开始，`.dropdown .dropdown-menu`然后在需要时进一步向上移动。

# python - 为什么 print my_list[10:0:-1] 在 Python 中以第二项而不是第一项停止？

> ID：15161709
> 
> 赞同：2
> 
> 时间：2013-03-01T15:55:49.807
> 
> 标签：python

```
my_list = range(1,11)
print my_list[10:0:-1] 
```

此代码打印 [10, 9, 8, 7, 6, 5, 4, 3, 2] 没有意义。为什么这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T15:57:32.503

因为切片中的第二个元素是*独占*的。指数从 10 一直运行到 1，而不是直到 0。

要反转`my_list`，只需省略开始和结束：

```
print my_list[::-1] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T15:58:29.697

这只是符号的工作方式。正如@GregHewgill[所说的](https://stackoverflow.com/a/509295/44853:)那样：

> 要记住的关键点是 :end 值表示不在所选切片中的第一个值。因此，end 和 start 之间的区别在于所选元素的数量（如果 step 为 1，则为默认值）。

这将以相反的顺序选择所有元素，从索引 10 处的元素开始，直到索引 0 处的元素（但不包括该元素）。

另一种方法是将符号视为`for`索引上传统循环的简写。在这种情况下：

```
for(int i=10; i>0; i-=1) 
```

# java - Java：将子类类型作为 Main() 的参数传递

> ID：15161718
> 
> 赞同：3
> 
> 时间：2013-03-01T15:56:35.537
> 
> 标签：java, class, subclass, main

我想指定要实现哪个子类`args[]`。`public static void main(String args[])`如何将`args[]`(a `String`) 的参数转换为类声明？

例如，如果`args[0]`= `"Subclass1"`，那么我需要在下面的某个地方声明：
`BaseClass b = new Subclass1()`

Java可以做到这一点吗？

**编辑**
为了使这一步更棘手，这些子类来自外部`.jar`. 有什么方法可以动态导入子类，还是需要事先导入？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-01T15:58:00.330

类名应该是类的完整路径，即 [package].[classname] 你可以使用`Class.forName([class name]).newInstance();`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-01T15:59:01.360

```
public static void main(String[] args) {
    if (args.length > 0) {
        // exceptions handling omitted
        Class<?> clazz = Class.forName(args[0]);
        // check before casting
        if (BaseClass.class.isAssignableFrom(clazz)) {
            BaseClass instance = (BaseClass) clazz.newInstance();
            // use
        }
    }
} 
```

请注意，它`className`应该是类的*完整路径*，即不仅是`Subclass1`，而是`your.package.Subclass1`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-01T16:01:25.023

如果你的主类被调用`com.acme.app.Main`，并且它有一个子类`public static class Subclass1`，那么使用这个代码片段：

```
Class<?> cls = Class.forName("com.acme.app.Main$"+args[0]);
Object instance = cls.getConstructor().newInstance(); 
```

通过`$`标记访问内部类。

请注意，`cls.getConstructor().newInstance()`比旧的更推荐`cls.newInstance()`。

如果您知道您的内部类实现或扩展了某个接口或类，那么您可以使用`Class<MyInterface>`and`MyInterface instance`来代替通用对象。

# .net - 如何转换为具有集合的强类型？

> ID：15161719
> 
> 赞同：1
> 
> 时间：2013-03-01T15:56:37.593
> 
> 标签：.net, vb.net, linq, casting

我正在尝试将包含一些集合的实体转换为`Model`但我不知道如何在模型中包含这些集合。

只是一个简单的例子，请看下面的模型：

```
Namespace Models

    Public Class ProductModel
        Public Property ID As Integer
        Public Property Description As String
        Public Property IsInStock as Boolean
        Public Property Orders As List(Of ProductOrderModel)

    End Class

    Public Class ProductOrderModel
        Public Property ID As Integer
        Public Property OrderDate As DateTime
        Public Property DeliveredDate As DateTime?
        Public Property ShippingAddress As String
    End Class

End Namespace 
```

现在我可以轻松地转换为如下所示的产品模型：

```
Dim simplifiedProductModel as ProductModel =
    From p in dc.Products _
    Select New ProductModel With { _
        .ID = p.ProductID, _
        .Description = p.ProductDescription, _
        .IsInStock = p.ProductIsInStock, _
        .OrderCount = p.Orders.Count() _
        } 
```

我想不通的是如何使用其简化模型来包含该集合。

```
Dim simplifiedProductModel as ProductModel =
    From p in dc.Products _
    Select New ProductModel With { _
    .ID = p.ProductID, _
    .Description = p.ProductDescription, _
    .IsInStock = p.ProductIsInStock, _
    .OrderCount = p.Orders.Count(), _
    .Orders = p.orders.???? ===> New ProductOrderModel 
        With { 
            .ID = ???? o.OrderID , 
            .OrderDate = ???? o.Createdate, 
            etc.  
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:02:23.783

像这样？

```
Dim simplifiedProductModel as ProductModel = From p in dc.Products _
                                        Select New ProductModel With { _
                                        .ID = p.ProductID, _
                                        .Description = p.ProductDescription, _
                                        .IsInStock = p.ProductIsInStock, _
                                        .OrderCount = p.Orders.Count(), _
                                        .Orders = p.orders.Select( _
                                            Function(o) New ProductOrderModel _
                                                With { _
                                                    .ID = o.OrderID , _
                                                    .OrderDate = o.Createdate, _
                                                    etc.  
                                                }
                                            )
                                         } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T16:04:35.393

首先，您必须将您的声明修复`Public Property Orders As String As List(Of ProductOrderModel)`为`Public Property Orders As List(Of ProductOrderModel)`. 然后你可以使用这个

```
.Orders = (from order in p.orders
              Select New ProductOrderModel 
                     With { 
                             .ID = order .OrderID , 
                             .OrderDate = order.Createdate, 
                                  etc.
                          }).ToList() 
```

# multithreading - 集成多线程测试以对服务器进行压力测试

> ID：15161721
> 
> 赞同：0
> 
> 时间：2013-03-01T15:56:39.653
> 
> 标签：multithreading, testing, integration, stress-testing

我是 C# 线程世界的新手，想对特定的服务器方法进行压力测试。我想以某种方式捕获运行该过程并以某种方式返回它所花费的时间。或者，如果服务器返回错误消息，因为我增加了并发线程......也就是说，随着用户增加，某种衰减统计信息。我正在寻找一些简单而有效的东西......
我将从这样的集成测试中调用这个过程：

```
[Test]
public void StressTest_SomeExpensiveMethod_Approach()
{

    int NO_THREADS = 10;
    Thread thread = null;
    MyClass myC = new MyClass();

    for (int i = 0; i < NO_THREADS; i++)
    {
        thread = new Thread(myC.DoExpensiveWork);
        thread.Name = i.ToString();
        thread.Priority = ThreadPriority.Highest;
        thread.Start(); 
    }
} 
```

我有`MyClass`下面的课。此类包含方法`DoExpensiveWork()`。我正在尝试调用`DoExpensiveWork()`指定的固定数量的线程（比如 10 或 20 并从那里开始增加） SomeExpensiveMethod （一个昂贵的过程，虽然通常<1秒），然后将结果存储在 List

我被告知我需要使用回调和锁定机制，但我被卡住了。任何人都可以帮助我吗？我正在使用参数化线程，但我认为我所拥有的是错误的。

我需要一些关于这个的编码帮助。如果您可以根据您的建议修改下面的示例，我将不胜感激...

谢谢桑德拉

```
public class MyClass
{   
        public void DoExpensiveWork()
        {

            ServerClass cs = new ServerClass();
            string testData = "sometestdata";

            //*** CALL TO METHOD-UNDER-TEST ***//
            DateTime startTime = DateTime.Now;
            IList<string> response = cs.SomeExpensiveMethod(testData);
            DateTime endTime = DateTime.Now;        
        }   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T20:50:29.403

如果您有 VS 2010 Ultimate 或更新版本，您可以使用一堆不同的参数创建负载测试，并且即使在运行时它为您提供的报告也非常有用。下面的链接可能会对您有所帮助：http: [//visualstudiomagazine.com/articles/2010/07/08/load-testing-with-visual-studio-2010.aspx](http://visualstudiomagazine.com/articles/2010/07/08/load-testing-with-visual-studio-2010.aspx)

# ado.net - ADO.NET 连接方法

> ID：15161723
> 
> 赞同：-2
> 
> 时间：2013-03-01T15:56:43.227
> 
> 标签：ado.net

在使用数据库时的连接方法中，如何从日期时间选择器的 Windows 表单中添加日期字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:14:45.870

始终使用属性类型，所以不要`string`使用`datetime`. 您应该使用参数来防止 sql 注入：

```
using (var con = new SqlConnection(connectionString))
{
    using (var cmd = new SqlCommand("INSERT INTO dbo.Table(DateCol)VALUES(@Date)", con))
    {
        cmd.Parameters.Add("@Date", SqlDbType.DateTime).Value = dateTimePicker1.Value;
        con.Open();
        cmd.ExecuteNonQuery();
    }
} 
```

# c++ - 为什么大量的 libcurl 连接会锁定我的 Windows 系统？

> ID：15161725
> 
> 赞同：1
> 
> 时间：2013-03-01T15:56:50.360
> 
> 标签：c++, c, windows, network-programming, libcurl

我制作了一个简单的应用程序，它创建了一个 libcurl 对象并开始发送 http 消息。我将它们指向我本地网络上运行 netcat 作为服务器的另一个框。我在我的 Windows 机器上启动了其中的 200 个。netcat 服务器响应了许多请求，尽管有很多请求正在进行，以至于由于超时而错过了大多数请求。

[您可以在这里](https://github.com/tomisarobot/curl_race)找到完整的源代码，实际代码在[这里](https://github.com/tomisarobot/curl_race/blob/master/source/main_curl_race.cpp)。如果您在那里闲逛，您可以看到我如何构建和运行测试应用程序。

在几分钟内，系统将变得无响应。我被迫按下电源按钮才能再次访问。它不响应 telnet、远程调试、RDP，但它会响应 ping。它不会创建故障转储。

这里真正的问题是我不明白如何在它发生时抓住它，所以我不知道如何调试它。我希望有人知道诊断此问题的正确方法。

我可以通过实现一些 QoS 类型的行为来避免这种情况。除非我可以测量实际锁定系统的原因，否则恐怕我只会掩盖这个问题。

如果您使用 /BELOWNORMAL 启动进程，它的重现速度似乎要快得多。

在安全模式下，我无法在同一台机器上重现它。我无法在我的 Mac 上重现它。我已经禁用了 AV/防火墙，没有区别。我检查了我的驱动程序，它似乎是最新的。我已经在具有不同硬件配置的多台机器上实现了它。

我已经监控了我知道要检查的所有指标，cpu、ram、NPP、端口、句柄、线程，似乎没有什么令人担忧的。我已经启动了 600 个，差别不大，所以我认为我没有达到一些硬资源限制。

我询问了 libcurl 邮件列表，他们声称 libcurl 不应该能够做到这一点，尽管他们对问题所在没有任何意见。

# ruby - Ruby 在选定的行中加载配置文件组件

> ID：15161727
> 
> 赞同：0
> 
> 时间：2013-03-01T15:56:54.707
> 
> 标签：ruby, sketchup

我在编写可以在`SketchUp`程序中进行 3d 建模的 ruby​​ 代码时遇到一个问题，我希望我的配置文件组件能够拉伸所选行中的长度，以创建棒状和单元化系统的玻璃幕墙系统。目前，我知道有一种方法可以只创建一条连接线，但还没有创建多条和分隔线的方法。因此，我正在寻找一种方法来编写代码以单击示例配置文件组件然后在多行上加载。

有什么建议做这种代码吗？我一直在尝试解决代码，但由于我是编程新手，所以我不能自己解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:20:57.493

Follow Me 功能仅沿一个线段拉伸轮廓。如果您有多个分支段，则需要以不同的方式进行处理。您可以尝试的一种方法是整理不同的片段并将它们作为组单独创建 - 它们应该各自产生一个实体对象，然后您可以使用在 SketchUp 8 Pro 中引入的实体布尔运算。

# ios - 在 viewWillAppear 之前设置 UINavigationItem 标题

> ID：15161734
> 
> 赞同：1
> 
> 时间：2013-03-01T15:57:20.867
> 
> 标签：ios, cocoa-touch

这就是重点：我正在编写一个“构建自身”的应用程序来读取配置文件。我需要做的是创建一个`UITabBarController`包含几个`UINavigationController`s 和它们各自的`rootViewController`. 由于应用程序不知道`viewController`标题是什么，因此我需要在触发方法`AppDelegat`之前以编程方式设置它们（从 e 开始） 。`viewWillAppear:`

如果我在方法中设置标题，则`viewWillAppear`只有第一个 vc`tabBarViewController`会在`tabBar`.

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:07:38.043

基于对您要实现的目标的许多假设，我认为以`application:didFinishLaunchingWithOptions:`您的方法执行此操作`AppDelegate`应该有效：

```
UITabBarController *cont = [[UITabBarController alloc] init];

for (int i=0; i<CONTROLLERS_COUNT; i++) {
    UINavigationController *navCont = [[UINavigationController alloc] init];
    navCont.title = TITLE_HERE;
    [cont addChildViewController:navCont];
}

[self.window setRootViewController:cont]; 
```

# python - 尝试直到有效果

> ID：15161735
> 
> 赞同：0
> 
> 时间：2013-03-01T15:57:23.160
> 
> 标签：python, exception

有没有办法在 Python 中执行以下操作？

```
try:
  Thing1()
try_this_too:
  Thing2()
try_this_too:
  Thing3()
except:
  print "Nothing worked :-(" 
```

请注意，如果 Thing1() 成功，我不想做任何其他事情。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-01T16:01:46.857

```
for thing in (Thing1,Thing2,Thing3):
    try:
       thing()
       break  #break out of loop, don't execute else clause
    except:   #BARE EXCEPT IS USUALLY A BAD IDEA!
       pass
else:
    print "nothing worked" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-01T16:01:09.280

这很容易扩展到任意数量的功能：

```
funcs = (Thing1, Thing2, Thing3)

failures = 0

for func in funcs:
    try:
       func()
       break
    except Exception:
       failures += 1

if failures == len(funcs):
    print "Cry evrytime :-(" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T15:59:44.750

```
try:
  Thing1()
except:
  try:
     Thing2()
  except:
     try:
        Thing3()
     except:
        print "Nothing worked :-(" 
```

# javascript - 如果 HTML5 本地浏览器数据库条目超过其固定大小

> ID：15161737
> 
> 赞同：0
> 
> 时间：2013-03-01T15:57:29.747
> 
> 标签：javascript, jquery, html, local-storage

我有一个`HTML5`2MB 大小的本地浏览器数据库。假设条目是逐个插入或循环插入，如果条目超过了固定大小的限制，即 2mb，会发生什么情况？

确实大小不会自动超过，但如果超过限制，那么首先输入的顶部条目将自动删除以调整新条目或新条目将停止插入？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T16:03:17.653

如果超出存储空间，它将引发“QUOTA_EXCEEDED_ERR”异常。然后，您可以捕获此异常并手动管理您的存储

# asp.net-mvc - 标签在 Html.ActionLink 时不起作用？

> ID：15161739
> 
> 赞同：1
> 
> 时间：2013-03-01T15:57:33.820
> 
> 标签：asp.net-mvc, html, visual-studio, hyperlink

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T16:41:08.490

I think u can use Url.action for address

```
<a href="@Url.Action("Page1", "Home")"><div class = "col1"> Function 1 </div></a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T16:01:22.857

问题是路径，改变这个：

```
<a href="../Home/Page1"> 
```

对此：

```
<a href="/Home/Page1"> 
```

***请记住***我假设这`Page1`是一个动作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T22:51:58.183

解决了！原来我没有遵循 MVC 的命名约定，并且“Page1”应该被称为“Index”，所以每当我尝试调用该页面时，系统都会出现轻微的心脏病发作。至于 Url.Action() 方法，它实际上解决了我首先要解决的实际问题，所以谢谢！

# gwt - DatePickerCell 打破表格选择

> ID：15161741
> 
> 赞同：0
> 
> 时间：2013-03-01T15:57:43.657
> 
> 标签：gwt, datagrid

当我单击一个为 DatePickerCell 的单元格时，表格选择不再起作用。

下表只有 2 列：日期、文本

用 GWT 测试是 2.4 和 2.5 用 Chrome、IE9 测试

发布的代码有问题吗？

是否有与具有 SelectionModel 和 DateCellPicker 的 DataGrid 的工作示例的链接，该选择是否正常？

一个工作示例将回答我的问题。

**更新：**

我发布了一个完整的可运行示例。

```
import com.google.gwt.cell.client.DatePickerCell;
import com.google.gwt.cell.client.FieldUpdater;
import com.google.gwt.core.client.EntryPoint;
import com.google.gwt.user.cellview.client.*;
import com.google.gwt.user.client.Window;
import com.google.gwt.user.client.ui.RootPanel;
import com.google.gwt.view.client.SelectionChangeEvent;
import com.google.gwt.view.client.SingleSelectionModel;

import java.util.Arrays;
import java.util.Date;
import java.util.List;
/**
 * Entry point classes define <code>onModuleLoad()</code>.
 */
public class DataGridCss implements EntryPoint
{

    /**
     * A simple data type that represents a contact.
     */
    private static class Contact
    {
        private final String address;
        private Date birthday;
        private final String name;

        public Contact(String name, Date birthday, String address)
        {
            this.name = name;
            this.birthday = birthday;
            this.address = address;
        }
    }

    /**
     * The list of data to display.
     */
    private static final List<Contact> CONTACTS = Arrays.asList(new Contact("John", new Date(), "123 Fourth Avenue"), new Contact("Joe", new Date(), "22 Lance Ln"), new Contact("George", new Date(),"1600 Pennsylvania Avenue"));

    public void onModuleLoad()
    {
        final DataGrid<Contact> table = new DataGrid<Contact>(100);
        table.setSize("700px", "300px");

        table.setKeyboardSelectionPolicy(KeyboardSelectionPolicy.ENABLED);

        // Add a date column to show the birthday.
        DatePickerCell dateCell = new DatePickerCell();
        Column<Contact, Date> dateColumn = new Column<Contact, Date>(dateCell)
        {
            @Override
            public Date getValue(Contact object)
            {
                return object.birthday;
            }
        };

        // Add a field updater to be notified when the user enters a new name.
        dateColumn.setFieldUpdater(new FieldUpdater<Contact, Date>()
        {
            @Override
            public void update(int index, Contact object, Date value)
            {
                object.birthday = value;
            }
        });

        table.addColumn(dateColumn, new TextHeader("Birthday"));

        TextColumn<Contact> addressColumn = new TextColumn<Contact>()
        {
            @Override
            public String getValue(Contact object)
            {
                return object.address;
            }
        };

        table.addColumn(addressColumn, new TextHeader("Address"));

        // Add a selection model to handle user selection.
        final SingleSelectionModel<Contact> selectionModel = new SingleSelectionModel<Contact>();
        table.setSelectionModel(selectionModel);
        selectionModel.addSelectionChangeHandler(new SelectionChangeEvent.Handler()
        {
            public void onSelectionChange(SelectionChangeEvent event)
            {
                Contact selected = selectionModel.getSelectedObject();
                if (selected != null)
                {
                     Window.alert("You selected: " + selected.name);
                }
            }
        });

        table.setRowCount(CONTACTS.size(), true);
        table.setRowData(0, CONTACTS);

        RootPanel.get().add(table);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T17:02:13.297

从 AbstractCellTable 的源代码看起来，您确实必须使用 KeyboardSelectionPolicy.BOUND_TO_SELECTION 或提供至少一种处理选择的单元格类型。

向 Google 提交了错误报告：

[http://code.google.com/p/google-web-toolkit/issues/detail?id=8064](http://code.google.com/p/google-web-toolkit/issues/detail?id=8064)

# sql - 如何根据其他列中的值（对于同一行）更新表中所有行中的列？

> ID：15161751
> 
> 赞同：10
> 
> 时间：2013-03-01T15:58:29.970
> 
> 标签：sql, sql-update

如果 SQL 不能以这种方式工作，我提前道歉，我主要用 C++/C# 编写代码，而且我在 SQL 方面没有太多经验。我基本上想遍历表的每一行并根据其他列更改列值。示例表可能如下所示：

```
__________________________
|first #|second #|third #|
|_______|________|_______|
|___1___|___1____|___0___|
|___5___|___2____|___0___|
|___3___|___6____|___0___|
|___2___|___4____|___0___| 
```

现在，在伪代码中，我试图获得相当于：

```
foreach row in mytable, column 3 = column 1 + column 2 
```

获得与此等效的 SQL 的方法是什么，或者不能以这种方式完成？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-01T15:59:29.417

可以这么简单，

```
UPDATE tableName
SET    thirdCol = firstCol + secondCol 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-01T16:05:46.720

正如已经回答的那样，可以使用以下方法完成简单的更新：

```
UPDATE  MyTable
SET     Column3 = Column1 + Column2; 
```

然而，存储计算值，尤其是对于简单的计算不是一个好的做法（总是有例外，这是一个准则而不是规则），如果 column3 应该始终是 Column1 和 column2 的总和，那么如果您的 DBMS 允许，您可以创建一个计算的柱子。

例如在 SQL-Server 中：

```
ALTER TABLE MyTable ADD Column4 AS Column1 + Column2; 
```

如果您的 DBMS 不允许计算列，那么您可以创建一个视图，因此您只存储基础数据而不是计算（同样语法可能因 DBMS 而异）：

```
CREATE VIEW myTableWithTotal
AS
    SELECT  Column1, Column2, Column1 + Column2 AS Column2
    FROM    MyTable 
```

这些方法中的任何一种都将确保您的 column3 值保持最新，即使 column1 或 column2 已更新

# ios - AF网络。检查所有操作队列的下载进度

> ID：15161758
> 
> 赞同：4
> 
> 时间：2013-03-01T15:58:45.860
> 
> 标签：ios, afnetworking

我有一个用 AFNetworking 制作的 iOS 应用程序。我有一个单例自定义 httpclient 子类，我用它来使用我的 api 并从服务器下载二进制文件。

我需要下载大约 100 个文件。遍历我的 url 数组并为每个 url 创建一个 AFHTTPRequestionOperation 是否安全？我的代码是这样的：

```
NSMutableURLRequest* rq = [[MIHTTPClient sharedInstance] requestWithMethod:@"GET" path:@"...." parameters:nil];
AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:rq] ;
operation.outputStream = [NSOutputStream outputStreamToFileAtPath:path append:NO];

[operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
    //completion

} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    //manage error
}];

[[MIHTTPClient sharedInstance] enqueueHTTPRequestOperation:operation]; 
```

我怎样才能收到来自这个队列的反馈？我没有看到任何“HTTPClientDelegate”协议或类似的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T17:16:39.783

关于进度，请参阅[`setDownloadProgressBlock`](http://afnetworking.github.com/AFNetworking/Classes/AFURLConnectionOperation.html#//api/name/setDownloadProgressBlock:)（部分`AFURLConnectionOperation`，从中`AFHTTPRequestOperation`分出），例如：

```
[operation setDownloadProgressBlock:^(NSInteger bytesWritten, NSInteger totalBytesWritten, NSInteger totalBytesExpectedToWrite) {
    NSLog(@"Sent %d of %d bytes, %@", totalBytesWritten, totalBytesExpectedToWrite, path);
}]; 
```

而且，在您的代码示例中，您正在调用`setCompletionBlockWithSuccess:failure:`，以便提供有关各个操作完成的状态。就个人而言，在我的小测试中，我只维护了一组我请求的下载，并让这三个块（进度、成功和失败）更新我的下载状态代码，如下所示：

```
for (NSInteger i = 0; i < 20; i++)
{
    NSURLRequest *request = ... // set the request accordingly

    // create a download object to keep track of the status of my download

    DownloadObject *object = [[DownloadObject alloc] init];
    download.title = [NSString stringWithFormat:@"Download %d", i];
    download.status = kDownloadObjectStatusNotStarted;
    [self.downloadObjects addObject:download];

    AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];

    [operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
        download.status = kDownloadObjectStatusDoneSucceeded;

        // update my UI, for example, I have table view with one row per download
        //
        // [self.tableView reloadRowsAtIndexPaths:@[[NSIndexPath indexPathForRow:i inSection:0]]
        //                       withRowAnimation:UITableViewRowAnimationNone];
    } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
        download.status = kDownloadObjectStatusDoneFailed;

        // update UI
        //
        // [self.tableView reloadRowsAtIndexPaths:@[[NSIndexPath indexPathForRow:i inSection:0]]
        //                       withRowAnimation:UITableViewRowAnimationNone];
    }];

    [operation setDownloadProgressBlock:^(NSUInteger bytesRead, long long totalBytesRead, long long totalBytesExpectedToRead) {
        download.totalBytesRead = totalBytesRead;
        download.status = kDownloadObjectStatusInProgress;

        // update UI
        //
        // [self.tableView reloadRowsAtIndexPaths:@[[NSIndexPath indexPathForRow:i inSection:0]]
        //                       withRowAnimation:UITableViewRowAnimationNone];
    }];

    [queue addOperation:operation];
} 
```

您可以通过这种方式跟踪各个下载。您也可以只跟踪待处理的操作（或查询`HTTPClient`对象的`operationQueue`属性，然后查看它的`operationCount`属性）。

* * *

在下载100个文件方面，有两个考虑：

*   我原以为您会想要调用您的`setMaxConcurrentOperationCount`子类，将其设置为某个合理的数字（4 或 5），就像查看 AFNetworking 代码一样，它似乎并没有这样做。我发现，如果您超出此范围，则收益会递减，并且如果所有文件都来自单个服务器，则给定客户端和给定服务器之间可以执行多少并发操作会受到限制。`operationQueue``HTTPClient`

*   我读过传闻称苹果将拒绝通过蜂窝网络提出特殊请求的应用程序。请参阅[https://stackoverflow.com/a/14922807/1271826](https://stackoverflow.com/a/14922807/1271826)。

# ruby-on-rails - 使用 rails_admin 在 belongs_to 关联上显示下拉列表

> ID：15161759
> 
> 赞同：6
> 
> 时间：2013-03-01T15:58:46.617
> 
> 标签：ruby-on-rails, associations, model-associations, rails-admin

我`rails_admin`用来管理 Rails 应用程序中的数据。

我有这堂课：

```
class Activity < ActiveRecord::Base
  attr_accessible :content, :title, :category_id
  belongs_to :category, :inverse_of => :activities
end 
```

另一端是：

```
class Category < ActiveRecord::Base
  attr_accessible :title, :category_id, :activities_ids
  has_many :activities, :inverse_of => :category
end 
```

我的 Activity rails_admin 初始化程序如下所示：

```
config.model Activity do
  edit do
    field :title
    field :content, :text do
      bootstrap_wysihtml5 true
    end
    field :category
  end
end 
```

现在，它以如下形式呈现类别：

![缺少字段](../Images/b4e27a16e64a9076c85abd85f8d55e40.png)

它应该呈现类别的名称，对吧？我在这里想念什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-13T11:58:48.040

我一直在寻找这个很长一段时间。要获得一个非常好的自动完成下拉菜单，只需添加：

```
config.model Activity do
  edit do
    field :category, :belongs_to_association
  end
end 
```

# google-plus - Google Plus 登录和无线安装不起作用？

> ID：15161766
> 
> 赞同：1
> 
> 时间：2013-03-01T15:59:07.880
> 
> 标签：google-plus

我已经设法构建了 PhotoHunt ( [https://developers.google.com/+/web/signin/android-app-installs](https://developers.google.com/+/web/signin/android-app-installs) ) 演示应用程序，但没有设法让登录以显示 Google Play 弹出窗口为了下载Android应用程序。

我创建了我的 api 项目，给了它 2 个客户端 ID，一个用于 Web 应用程序（托管在此处： http: [//getnowtesting.appspot.com/](http://getnowtesting.appspot.com/)），一个用于 Android 应用程序（正确获取包名称和证书指纹。 ) 并且登录名正确附加了 apppackagename。

有关更多信息，我已经在 Play 商店中安装了该应用程序，测试帐户连接了一个可以运行该应用程序的设备，并且该应用程序尚未安装在该设备上。

任何想法我做错了什么？该功能是否适用于某人？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T16:49:24.407

可能的原因是您的应用尚未超过 Google 的无线安装质量阈值。此质量阈值未发布，但旨在确保只有具有足够评论、评级和安装的优质应用才能推送到设备。

[https://developers.google.com/+/features/play-installs](https://developers.google.com/+/features/play-installs)

编辑：应用程序也必须是免费的。在您的情况下，这似乎是正确的。

# asp.net-mvc - 如何在 VB.net 中使用 DropCreateDatabaseIfModelChanges

> ID：15161767
> 
> 赞同：1
> 
> 时间：2013-03-01T15:59:15.027
> 
> 标签：asp.net-mvc, vb.net, scaffolding

在模型经常更改的早期开发状态下，如何在 VB.NET 应用程序中使用 DropCreateDatabaseIfModelChanges。我知道我必须将这些行添加到 Global.asax - 但我只找到使用 C# 的示例 - 有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:14:22.400

您应该定义一个用于初始化数据库的类。我通常称我为 DatabaseContextIntializer。这需要继承自 DropCreateDatabaseIfModelChanges

DatabaseContextIntializer 类需要实现 Seed(YourDataContextClassNameHere context) 方法，您可以在最初创建数据库时使用它来填充数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T16:09:07.253

明白了：global.asax.vb

```
Imports System.Data.Entity
...
Database.SetInitializer(New DropCreateDatabaseIfModelChanges(Of <ENTITYNAME>)()) 
```

# air-native-extension - 如何为 android maps v2 本机扩展实现 isSupported() 函数

> ID：15161769
> 
> 赞同：0
> 
> 时间：2013-03-01T15:59:18.820
> 
> 标签：air-native-extension, android-maps-v2

我想知道`isSupported()`在使用 android maps v2 的空中原生扩展中实现方法的最佳方法是什么。

我知道如果未安装 Google Play 服务，则返回 null，但只有在调用`MapFragment.getMap()`片段后才能检查。`onCreateView()`在舞台上显示地图之前，我需要检查设备是否支持地图。

这可能吗？如果可以，最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T12:34:11.040

您可以尝试使用[GooglePlayServicesUtil.isGooglePlayServicesAvailable](http://developer.android.com/reference/com/google/android/gms/common/GooglePlayServicesUtil.html#isGooglePlayServicesAvailable%28android.content.Context%29)。

# android - 系统音量与铃声音量挂钩

> ID：15161772
> 
> 赞同：0
> 
> 时间：2013-03-01T15:59:34.220
> 
> 标签：android, volume, ringtone

有什么方法可以检查系统音量是否与铃声音量相关联？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T21:04:35.987

一种简单的方法是存储系统音量和铃声音量的值，然后更改系统音量并将铃声音量与之前存储的值进行比较，看看是否有任何变化（如果值不同，这意味着系统和铃声音量已链接）。之后，您可以再次将卷恢复到较早的值。

# c - 如何在 C 中创建一个字符串数组？

> ID：15161774
> 
> 赞同：10
> 
> 时间：2013-03-01T15:59:39.693
> 
> 标签：c, arrays, string

我正在从一本书中自学 C，并且我正在尝试创建一个填字游戏。我需要制作一个字符串数组，但不断遇到问题。另外，我对数组不太了解...

这是一段代码：

```
char word1 [6] ="fluffy", word2[5]="small",word3[5]="bunny";

char words_array[3]; /*This is my array*/

char *first_slot = &words_array[0]; /*I've made a pointer to the first slot of words*/

words_array[0]=word1; /*(line 20)Trying to put the word 'fluffy' into the fist slot of the array*/ 
```

但我不断收到消息：

```
crossword.c:20:16: warning: assignment makes integer from pointer without a cast [enabled by default] 
```

不知道是什么问题......我试图查找如何制作字符串数组但没有运气

任何帮助都感激不尽，

山姆

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-01T16:01:31.173

> ```
> words_array[0]=word1; 
> ```

`word_array[0]`是一个`char`，而是`word1`一个`char *`。您的角色无法保存地址。

字符串数组可能如下所示：

```
char array[NUMBER_STRINGS][STRING_MAX_SIZE]; 
```

如果您想要一个指向字符串的指针数组：

```
char *array[NUMBER_STRINGS]; 
```

接着：

```
array[0] = word1;
array[1] = word2;
array[2] = word3; 
```

也许你应该读[这个](http://c-faq.com/aryptr/index.html)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-01T16:03:57.817

如果你需要一个字符串数组。有两种方法：

**1.二维字符数组**

在这种情况下，您必须事先知道字符串的大小。如下所示：

```
// This is an array for storing 10 strings,
// each of length up to 49 characters (excluding the null terminator).
char arr[10][50]; 
```

**2\. 字符指针数组**

如下所示：

```
// In this case you have an array of 10 character pointers 
// and you will have to allocate memory dynamically for each string.
char *arr[10];

// This allocates a memory for 50 characters.
// You'll need to allocate memory for each element of the array.
arr[1] = malloc(50 *sizeof(char)); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-01T16:02:00.650

宣言

```
char words_array[3]; 
```

*创建一个由三个字符*组成的数组。您似乎想声明一个字符*指针*数组：

```
char *words_array[3]; 
```

* * *

你有一个更严重的问题。宣言

```
char word1 [6] ="fluffy"; 
```

创建一个包含六个字符的数组，但您实际上告诉它有*七个*字符。所有字符串都有一个额外的字符 ,`'\0'`用于表示字符串的结尾。

要么将数组声明为大小为 7：

```
char word1 [7] ="fluffy"; 
```

或者忽略大小，编译器会自己计算出来：

```
char word1 [] ="fluffy"; 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-01T16:08:24.450

You can also use `malloc()` to allocate memory manually:

```
int N = 3;
char **array = (char**) malloc((N+1)*sizeof(char*));
array[0] = "fluffy";
array[1] = "small";
array[2] = "bunny";
array[3] = 0; 
```

If you don't know in advance (at coding time) how many strings will be in an array and how lengthy they'll be, this is a way to go. But you'll have to free the memory when it's not used anymore (call `free()`).

# configuration - AngularJS“常量”工厂

> ID：15161784
> 
> 赞同：7
> 
> 时间：2013-03-01T16:00:01.737
> 
> 标签：configuration, angularjs, constants, factory

我正在努力在 AngularJS 中设置配置文件。是否可以在 AngularJS 中创建一个无法覆盖其密钥的工厂？比如我可以这样设置一个常量，不能被覆盖

> module.constant('animals', {"cat": "meow", "dog": "woof"});

但我想做这样的事情，允许覆盖*值*而不是工厂本身

```
module.value('catSound','meow')
      .value('dogSound','woof')
      .factory('animals', ['catSound','dogSound', function(catSound, dogSound) {
            return {
                 "cat": catSound,
                 "dog": dogSound
            }
      }); 
```

上面的工厂可以被覆盖，允许另一段代码拥有`module.factory('animals',function(){ return 7 })`并破坏一切。但是，作为工厂，各个值*可以*（并且应该）是可覆盖的，因此我应该能够分配`module.value('catSound','hiss')`并让事情仍然按预期工作。

我试过注入常量，但据我所知，这是不可能的。如何防止我的工厂声明被覆盖？我意识到在描述我想要的东西时，*常量可能不是正确的术语，但我确实希望工厂的函数**定义*是常量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-29T12:24:29.283

javascript 中的一切都是可变的，所以设置这样的东西很棘手，而且永远不会完全安全。我在角度代码中环顾四周，没有发现任何证据表明您似乎要求使用任何保护机制。

我的建议是忍受风险。除了测试和漂亮的长名称之外，不值得尝试保护自己。我假设你被咬过一次，但我认为机会非常低，除非你用非常短的名称定义工厂。

# responsive-design - zurb Foundation 4 移动与桌面内容

> ID：15161786
> 
> 赞同：4
> 
> 时间：2013-03-01T16:00:09.203
> 
> 标签：responsive-design, zurb-foundation

我是 Zurb 基金会的忠实粉丝。他们刚刚发布了 Zurb Foundation 4，它被重新设计为移动优先。考虑到移动设备、平板电脑和传统桌面体验，我对响应式设计还很陌生。我正在努力思考如何最好地为这些不同的设备管理我的网站内容。使用 Zurb Foundation 4，您可以根据小型、中型或大型设备尺寸隐藏或显示内容。因此，Zurb 的方法似乎是将所有内容放到设备上，让 CSS 决定根据设备显示哪些内容（这是响应式设计）。

我的问题是为什么我们必须将所有内容放到设备上？这似乎浪费了服务器上的处理，浪费了带宽，因为浏览器处理内容而导致体验变慢，其中一些内容可能永远不会显示给用户，因为他们正在使用的设备。我错过了什么吗？回到服务器并让它向客户端发送适合设备类型的内容不是更好吗？难道我们不应该关心移动用户的数据计划并且不发送不适合他们设备类型的内容吗？我在响应式设计中看到的所有示例都将桌面和移动/平板电脑的内容下载到客户端，这似乎是一种浪费。

我正在开发一个时间输入应用程序，它根据设备类型具有不同的用户体验。台式机（全屏时）具有更详细的数据输入体验，而移动/平板电脑具有不同的体验，因为设备空间更小。我正在开发应用程序，因此当桌面浏览器的大小调整为小于 768px 宽时，jQuery 会调用服务器以将 UI 换成“较小”的移动/平板电脑版本。这合适吗？我当然不想下载 2 个版本的应用程序并根据设备宽度隐藏一个或另一个。

我的 jQuery 方法是否走在正确的轨道上？我是否遗漏了有关响应式设计和需要为设备定制内容的内容？任何想法、建议和指导表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T00:12:44.517

Zurb Foundation 的 Mobile First 基本上是 Zurb 团队的理念改变，如果你想开发一个响应式网站而不是采用 Mobile First 方法，那么我建议使用 Foundation 3，它仍然可用且很棒。我正在阅读一本书，它为 Mobile First 提供了很好的宣传，这本书由 Luke Wroblewski 称为 Mobile First，他也被列为 Zurb 的顾问。

这是同一作者的一篇文章，可能很有趣：

[http://www.netmagazine.com/interviews/luke-wroblewski-mobile-first](http://www.netmagazine.com/interviews/luke-wroblewski-mobile-first)

基本上：前提是您开始为移动设备进行开发和设计，这意味着基本上是 iOS 或 Android 风格的浏览器，然后添加功能。

因此，与其从桌面/平板电脑体验开始并删除基础 3 中的 .hide 类通常所做的事情并且仍然可以在基础 4 中以这种方式实现，他们建议使用 .show 类来添加额外的内容。

使用 Compass 和 Sass Mixins 可以更进一步。关于如何执行此操作的文档并不多，但您基本上可以保持标记语义，应用 id 而不是类，并使用 mixins 将其应用于该 id。这里有一个 id 与一个类的速度遍历 dom 的优势，所以它可能是一个很好的方法。

注意：foundation 4 使用名为 Zepto 的 jQuery 替换（有一些限制）。如果你在foundation 4中确实需要它，你可以用jQuery替换Zepto，或者使用foundation 3来代替。Zepto 更轻巧，因此非常适合移动设备。

至于通过使用 jQuery 根据浏览器的大小异步加载数据（我假设）来更快，这是一种方法。我不确定您是否会在这里大幅提高速度。有很多策略，分页，异步加载更多数据，这取决于你如何围绕这些数据安排 UX/UI。

还有许多其他问题，例如缓存资源、CDN 等，这些都是前端工程中的典型问题，可能会提供更快的加载时间。您可以查看与此相关的一个资源是 ySlow。

还有许多设计模式，例如画布幻灯片、3 行（汉堡菜单）、在滚动上加载更多数据、无状态应用程序，可以让您在移动应用程序中拥有相同的功能。如果你去无状态，在初始页面加载后，其他页面应该看起来几乎是瞬时的。

我认为这里的问题更具哲学性，您是否需要所有功能，这是我认为采用移动优先方法正在尝试解决的一件事。

要考虑的另一件事是感知的加载时间。我想我读到的是 Seductive UX（另一篇很棒的读物），但是你可以用加载器或微调器更快地打开页面，它被认为加载得越快，即使实际上它可能加载得更慢。

最后一点，如果您打算使用 Foundation，您可能会考虑将 jQuery/Zepto 与 Modernizr 一起使用，以从 Foundation 正在使用的相同媒体查询中提取。这样，您就不会复制或创建与其余响应能力不一致的东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T04:11:34.143

> 我正在开发应用程序，因此当桌面浏览器的大小调整为小于 768px 宽时，jQuery 会调用服务器以将 UI 换成“较小”的移动/平板电脑版本。这合适吗？

这听起来不是一个好方法，您是否考虑到orientationChange？

> 我当然不想下载 2 个版本的应用程序并根据设备宽度隐藏一个或另一个。

如果您在大多数平板电脑上以纵向访问网站并更改为横向，则您必须在下载 <768px UI 后下载 >768px UI。

zb4 中的移动优先方法（带有媒体查询）允许您防止将属于大型设备的内容下载到小型设备中。基本上你从移动样式开始，如果设备满足你在媒体查询上设置的条件（你可以有比 zf4 框架默认给你的更多的断点），那么下一个规则就会进入。

即使在媒体查询前的日子里，我也曾在几个“响应式”项目中工作过，如果我使用 javascript 来测量窗口大小

关于javascript，就像@powjames3 说zepto 比jquery 更轻/更快，如果你可以编写自己的javacript 函数将比使用过度膨胀的库好得多。

现在我做 mobileFirst 响应式 webapps 和网站使用混合用户代理嗅探（有时决定交付什么图像 src 或脚本/样式 src），尽管用户代理测试的决定我总是提供移动优先媒体查询和有条件加载的内容.

> “正如 Ethan Marcote（和他之前的 John Allsopp）指出的那样，网络固有的灵活性是一个特性，而不是一个错误。”

以下是一些可能使您走上正轨的资源：

用户代理解析和检测：http: [//mobiledetect.net/](http://mobiledetect.net/)

教程[http://www.html5rocks.com/en/mobile/responsivedesign/](http://www.html5rocks.com/en/mobile/responsivedesign/)涵盖：

*   为什么我们需要创建移动优先、响应迅速、适应性强的体验
*   如何为自适应站点构建 HTML 以优化性能并优先考虑灵活性
*   如何编写首先定义共享样式、使用媒体查询为大屏幕构建样式以及使用相对单位的 CSS
*   如何编写不显眼的 Javascript 以有条件地加载内容片段，利用触摸事件和地理位置
*   我们可以做些什么来进一步增强我们的适应性体验

希望能帮助到你

# ios - Objective-C 中的 hexdump

> ID：15161788
> 
> 赞同：0
> 
> 时间：2013-03-01T16:00:12.933
> 
> 标签：ios, objective-c, hexdump

我想`sqlite` `.db`在我的 Xcode 项目中查看我的文件转储，就像在`UILableView`.

如何`hexdump`在我的 iOS 应用程序中运行命令行命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:27:20.383

> 如何从我的 iOS 应用程序中运行像 hexdump 这样的命令行命令？

在 MacOS X 上，您可以使用它`NSTask`来运行您想要的任何程序。您将用于`NSPipe`向命令发送数据和/或从命令中获取数据。

但是你不能在 iOS 上做到这一点。首先，该`hexdump`命令可能存在也可能不存在于标准 iOS 安装中。二`NSTask`是不可用。如果您真的只是想将文件中的字节转储到标签中，那并不难。我会考虑使用`NSInputStream`来打开文件并读取其数据，然后将每个字节转换为适当的十六进制字符串，并将其添加到一个更大的字符串中，该字符串将累积总转储。完成后，将较大的字符串指定为标签的文本。或者，您可以自己做同样的事情，只需将文件读入一个实例`NSData`并迭代`bytes`自己以生成十六进制字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T16:19:27.127

使用[NSData](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSData_Class/Reference/Reference.html)将文件作为原始数据读取，然后根据需要显示字节（例如，使用[格式字符串](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/clm/NSString/stringWithFormat:)）。

-实际上来自另一个用户[@jtbandes](https://stackoverflow.com/users/23649/jtbandes)

# r - 如何按中位数排序列表？

> ID：15161789
> 
> 赞同：0
> 
> 时间：2013-03-01T14:02:16.883
> 
> 标签：r, median, ranking

我对 R 很陌生，并且在理解重新排序功能时遇到了一些问题。

假设我有一个包含 3 个向量的列表，例如：

```
myList <- (c(7,5,2),c(2,3,4),c(1,1,1)) 
```

我希望我的列表按每个向量的中位数重新排序，以便对列表进行箱线图绘制给我一个有序的图。现在我该怎么做？我阅读了 ?reorder 的帮助说明，但我似乎无法为我的列表调整给定的示例。

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T14:04:50.697

我想你想要

```
myList <- list(c(7,5,2),c(2,3,4),c(1,1,1))
unordered.median <- unlist(lapply(myList, median))
ordered.median <- order(unordered.median)

myList[ordered.median]
[[1]]
[1] 1 1 1

[[2]]
[1] 2 3 4

[[3]]
[1] 7 5 2 
```

# ssh - SSH 通过多个主机执行另一个 ssh 会话

> ID：15161794
> 
> 赞同：0
> 
> 时间：2013-03-01T16:00:21.203
> 
> 标签：ssh, tunnel

我花了很多时间尝试做一些简单来说看起来很简单的事情

我在家，没有防火墙和所有开放端口。我需要通过 ssh 连接到可以访问 ssh 端口 22 的工作路由器。我的个人计算机位于具有内部 IP 地址的子网上。所以，我需要做的是从一台机器ssh到第二台，从第二台到第三台。第三，我需要执行另一个 ssh，它将一些端口通过隧道连接到我的家用机器。所有这些都来自我家的 bash 脚本。我在互联网上尝试了许多解决方案，但没有任何效果。

整个理想是在工作时到达我的 PC 并为端口 22 运行 ssh 隧道，这将允许我对我的工作 PC 进行 sshfs。

我可以手动完成，通过 ssh 到路由器，形成路由器到工作 pc，然后执行 ssh 隧道。我需要一键式解决方案。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T16:09:06.887

您是否尝试过仅堆叠 ssh 命令，例如`ssh -t localhost ssh localhost`确保为`-t`除最后一个跃点之外的每个跃点添加选项`ssh -t localhost ssh -t localhost ssh localhost`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T16:10:39.913

也许尝试VNC？通过正确的设置/端口转发，您不必从一台 PC 跳到下一台。

# r - 如何更改 list.files() 的显示顺序：例如基于文件全名的一部分

> ID：15161797
> 
> 赞同：-1
> 
> 时间：2013-03-01T16:00:30.940
> 
> 标签：r

我在一个目录中有几个 nc 文件。文件的命名很复杂，例如：

```
 LPRM-AMSR_E_L3_D_SOILM3_V002-20120601T214436Z_20100801.nc 
```

我想列出文件以便我可以使用它们，似乎 R 按特定顺序列出了它们。

我如何告诉 R 更改 list.files 的默认显示，并仅根据 _yearmonthday**为它们排序文件，这代表所有文件中的年月日**

LPRM-AMSR_E_L3_D_SOILM3_V002-20120601T214436Z **_20100801**

要在 RI 中列出文件，请使用以下命令：

```
a<-list.files("D:\\semon", "*.nc", full.names = TRUE) 
```

我明白了：

```
[1] "D:\\LPRM-AMSR_E_L3_D_SOILM3_V002-20120603T170757Z_20110916.nc"
[2] "D:\\/LPRM-AMSR_E_L3_D_SOILM3_V002-20120603T194524Z_20110917.nc"
[3] "D:\\/LPRM-AMSR_E_L3_D_SOILM3_V002-20120604T122649Z_20110915.nc" 
```

我想得到这个：

```
[1] "D:\\/LPRM-AMSR_E_L3_D_SOILM3_V002-20120604T122649Z_20110915.nc"
[2] "D:\\/LPRM-AMSR_E_L3_D_SOILM3_V002-20120603T170757Z_20110916.nc"
[3] "D:\\/LPRM-AMSR_E_L3_D_SOILM3_V002-20120603T194524Z_20110917.nc" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T16:03:02.933

```
 a<-list.files("D:\\semon", "*_20100801.nc", full.names = TRUE) 
```

你要这个 ：

```
 a<-list.files("D:\\semon", "*_[0-9]{8}[.]nc", full.names = TRUE) 
```

或匹配经典日期模式：

```
 a<-list.files("D:\\semon", "*_\\d{4}\\d{2}\\d{2}[.]nc", full.names = TRUE) 
```

**编辑**

OP 正在寻求订购`list.files`

```
 a<-list.files("D:\\semon", "*.nc", full.names = TRUE)
   a[order(gsub('.*_(\\d{8})[.].*','\\1',a))] 
```

例如：

```
a <- c('D:\\AMSER\\amser2010+2011/LPRM-AMSR_E_L3_D_SOILM3_V002-20120603T170757Z_20110916.nc',
        "D:\\AMSER\\amser2010+2011/LPRM-AMSR_E_L3_D_SOILM3_V002-20120603T194524Z_20110917.nc",
        "D:\\AMSER\\amser2010+2011/LPRM-AMSR_E_L3_D_SOILM3_V002-20120604T122649Z_20110915.nc")

a[order(gsub('.*_(\\d{8})[.].*','\\1',a))]

[1] "D:\\AMSER\\amser2010+2011/LPRM-AMSR_E_L3_D_SOILM3_V002-20120604T122649Z_20110915.nc"
[2] "D:\\AMSER\\amser2010+2011/LPRM-AMSR_E_L3_D_SOILM3_V002-20120603T170757Z_20110916.nc"
[3] "D:\\AMSER\\amser2010+2011/LPRM-AMSR_E_L3_D_SOILM3_V002-20120603T194524Z_20110917.nc" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T16:06:22.960

列出文件名以八个数字加“.nc”结尾的所有文件：

```
a <- list.files("/path/to/your/files", "_[0-9]{8}\\.nc$", full.names = TRUE) 
```

要仅获取有效日期，您必须稍微调整模式，但这没什么大不了的（如果您愿意，可以作为练习留下）。

# python - python - 当函数需要成为一个类时

> ID：15161799
> 
> 赞同：1
> 
> 时间：2013-03-01T16:00:35.637
> 
> 标签：python, class, function, optimization, coding-style

我正在学习使用`class`in `Python`。通常我会写几个`function`来运行我的脚本，但最近我正在使用类编写。

对于这个基本问题，我很抱歉，但是什么时候可以限制使用课程？

另一方面，在我的代码中，我编写了这个函数，您可以在其中读取目录中的所有文本文件，并将所有值保存在临时文件中。文本文件为 x、y 和 z 格式。该函数返回临时文件的名称、边界框、原点（左上角）和底部（右下角）。在类中转换这样的函数有用吗？如果是，为什么？如果没有，为什么？

```
import os
import tempfile
import glob

class LaserException(Exception):
    """Laser exception, indicates a laser-related error."""
    pass

sepType = {
        "space": ' ',
        "tab": '\t',
        "comma": ',',
        "colon": ':',
        "semicolon": ';',
        "hyphen": '-',
        "dot": '.'
        }

def tempfile_merge(path,separator,wildcard= '*.txt'):
    file_temp = tempfile.NamedTemporaryFile(delete=False,dir=path)
    name = file_temp.name
    minx = float('+inf')
    maxx = float('-inf')
    miny = float('+inf')
    maxy = float('-inf')
    for file in glob.glob(os.path.join(path,wildcard)):
        for line in open(file, "r"):
            element = line.split(sepType[separator])
            if len(element) < 3:
                raise TypeError("not enough arguments: %s has only %s columns" % (inFile_name_suffix,len(element)))
            try:
                maxx = max(maxx, float(element[0]))
                minx = min(minx, float(element[0]))
                maxy = max(maxy, float(element[1]))
                miny = min(miny, float(element[1]))
            except ValueError:
                raise LaserException("x,y,z are not float-values")
            newelement = " ".join([str(e) for e in element])+ "\n"
            file_temp.write(newelement)
    file_temp.close()
    return(name, ((minx,maxy),(maxx,maxy),(maxx,miny),(minx,miny)),(minx,maxy),(maxx,miny)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T16:12:58.833

不要对这个问题感到抱歉。这不是一个愚蠢的问题。当您学习编程时，这是一个不断挣扎的问题。

底线是关于如何将工作划分为函数与类的指导方针，但每个程序员都有自己的意见。您应该找到一些对您有意义的规则并尝试遵守它们。但是，请保持开放的心态并随着您了解更多而适应。

我建议你在这个网站上寻找“何时使用类与函数”的谷歌答案。这是一个很好的例子：[在 Python 中，我什么时候应该使用函数而不是方法？](https://stackoverflow.com/questions/8108688/in-python-when-should-i-use-a-function-instead-of-a-method)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-01T16:10:32.377

通常，当您可能希望对给定的一组持久数据执行多个常见操作时，您希望使用一个类。在这种情况下，将数据和对它们进行操作的函数捆绑到一个对象中会很方便。

在您的情况下，您*可以*将其转换为一个函数，该函数在其构造函数中读取文件并计算值，然后将它们作为对象的属性提供。但是您没有提供任何方法来使用这些值做任何其他事情，那么为什么要麻烦呢？

*或者*你可以简单地`collections.namedtuple`从你的函数中返回一个。这将为您提供命名属性访问，同时还允许数字索引。

我认为作为返回 a 的函数更简单`namedtuple`，但这在很大程度上取决于您喜欢的风格。

PS——我不希望一个名为`tempfile_merge`返回边界框或坐标的函数。我可能会谦虚地建议改名。

# solr - SolrJ HttpSolrServer 在实例化期间抛出 NoHttpResponseException

> ID：15161800
> 
> 赞同：5
> 
> 时间：2013-03-01T16:00:36.203
> 
> 标签：solr, apache-httpclient-4.x, solrj

SolrJ 在尝试实例化 HttpSolrServer 时抛出 NoHttpResponseException。有谁知道为什么？

在我做的代码中：

```
SolrServer server = new HttpSolrServer ("http://localhost:8983/solr/"); // or some other url. 
```

它抛出：

```
 javax.servlet.ServletException: java.lang.NoClassDefFoundError: org/apache/http/NoHttpResponseException 
```

我正在使用 Solr 和 SolrJ 4.1.0

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T09:03:27.693

我不知道您的问题是否与我的相同，但我认为我遇到了相同的异常，直到我注意到我遇到了异常`noClassFound :NoHttpResponseException`并且仅通过添加此包`httpclient-4.1.3`问题就解决了。希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-10T14:12:34.617

我有同样的问题，但我使用`solrj-4.3.1`. 你需要`org.apache.httpcomponents:httpcore`在你的类路径上安装 jar 来解决这个问题。

我用了`httpcore-4.2.5.jar`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-30T08:50:18.983

添加 httpclient-4.xx 后我的问题甚至没有解决我添加了所有由 solr-4.4.0 分发的库， dist 文件夹。之后我的问题得到了解决。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-17T14:11:56.590

你的问题和我的一样。我通过添加包 httpclient *-.jar 和包 httpcore-* .jar 解决了这个问题。我希望这对你有帮助

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-05-19T11:15:08.850

我遇到了同样的问题，但在添加了以下 3 个罐子后，我能够修复它。1.httpclient **2.httpcore** 3.httpmime **_** _ **_**

并且在您各自的 solr 框架中提供了这些合适的 jar。示例我正在使用 solr4.7.2，这些 jar 文件以 solr-4.7.2\dist\solrj-lib\ 的形式存在于文件夹中

# jsf - JSF 无法选中复选框

> ID：15161804
> 
> 赞同：0
> 
> 时间：2013-03-01T16:00:45.727
> 
> 标签：jsf, primefaces, browser-cache

我有一个奇怪的问题，我在 Chrome 中打开我的 JSF 应用程序，但我无法选择复选框。但是，如果我以隐身模式或其他浏览器打开同一页面，则该复选框可以正常工作。

在有问题的浏览器上，源包含以下内容：

```
<head>
      <link type="text/css" rel="stylesheet" href="/javax.faces.resource/theme.css.xhtml?ln=primefaces-bootstrap">
      <link type="text/css" rel="stylesheet" href="/javax.faces.resource/primefaces.css.xhtml?ln=primefaces">
      <script type="text/javascript" src="/javax.faces.resource/jquery/jquery.js.xhtml?ln=primefaces"></script>
      <script type="text/javascript" src="/javax.faces.resource/primefaces.js.xhtml?ln=primefaces"></script>
      <link type="text/css" rel="stylesheet" href="/javax.faces.resource/undefined/undefined.css.xhtml?ln=primefaces">
</head> 
```

但是，如果我在不同的浏览器或隐身模式中打开 sam 页面，我会得到以下信息：

```
 <head>
       <link type="text/css" rel="stylesheet" href="/javax.faces.resource/theme.css.xhtml?ln=primefaces-bootstrap">
       <link type="text/css" rel="stylesheet" href="/javax.faces.resource/primefaces.css.xhtml?ln=primefaces">
       <script type="text/javascript" src="/javax.faces.resource/jquery/jquery.js.xhtml?ln=primefaces"></script>
       <script type="text/javascript" src="/javax.faces.resource/primefaces.js.xhtml?ln=primefaces"></script>
</head> 
```

为什么资源在不同浏览器中出现的方式不同？

# git - git duplicate parent 导致一半的历史消失

> ID：15161809
> 
> 赞同：2
> 
> 时间：2013-03-01T16:00:56.820
> 
> 标签：git, git-filter-branch

我运行 a`git filter-branch`来重命名我的 git 存储库中的一些作者，我得到：

```
$ git log --oneline | wc -l
665
$ ./git-rename-author.rb "First Last" new-email@email.com old-email@email.com
Rewrite 453a72b4f690620c04fce80a0aa237b9dee7038f (653/665)error: duplicate parent f61ea265c9069723f58557c55d3efae450ab2bd0 ignored
Rewrite 566c89fd59cf7e5c2992ee11adbf876343dc4a85 (665/665)
$ git log --oneline | wc -l
339 
```

所以我从 665 次提交开始，以 339 次提交结束。

查看[git - duplicate parent](https://stackoverflow.com/a/7501703/238292)答案，似乎`git filter-branch`应该解决重复问题本身。决议是这样的吗？是否有 326 次重复提交？

先感谢您。

**编辑**：这是`git filter-branch`我运行的脚本。这是一个简单的 Ruby 脚本，可以将多个电子邮件地址重命名为一个用户。

```
#!/usr/bin/env ruby

ARGV[2].split(',').each do |old_email|
  puts "Renaming #{old_email} to #{ARGV[0]} <#{ARGV[1]}>"

  env_filter = <<-EOS
  '
  an="$GIT_AUTHOR_NAME"
  am="$GIT_AUTHOR_EMAIL"
  cn="$GIT_COMMITTER_NAME"
  cm="$GIT_COMMITTER_EMAIL"

  if [ "$GIT_AUTHOR_EMAIL" = "#{old_email}" ]
  then
      an="#{ARGV[0]}"
      am="#{ARGV[1]}"
  fi
  if [ "$GIT_COMMITTER_EMAIL" = "#{old_email}" ]
  then
      cn="#{ARGV[0]}"
      cm="#{ARGV[1]}"
  fi

  export GIT_AUTHOR_NAME="$an"
  export GIT_AUTHOR_EMAIL="$am"
  export GIT_COMMITTER_NAME="$cn"
  export GIT_COMMITTER_EMAIL="$cm"
  '
  EOS

  system "git filter-branch -f --env-filter #{env_filter}"
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T05:20:32.163

您可能已经有两次具有相同父级的提交；`git filter-branch`没有指定过滤器将检测到并修复它。在进行任何作者更改之前，请先尝试此操作。

`filter-branch`您可能还与一对当前不同但在您的脚本转换后将相同的父母进行提交。如果你的`filter-branch`命令是正确的，那么你并没有丢失任何工作——你只是在你的历史中拥有一组并行的重写前和重写后提交，现在它们已经统一了。

# php - 获取某个日期范围内的用户生日

> ID：15161817
> 
> 赞同：0
> 
> 时间：2013-03-01T16:01:25.873
> 
> 标签：php, mysql, cakephp

我想获取今天日期前后 3 天生日的用户列表。我的意思是，如果今天是`March 2,2013`，我想让有生日的用户`Feb 27,2013`开始`March 5,2013`. 这是我的数据库设计。

**用户表**

```
id | name | birth_day | birth_month | birth_year 
```

我无法再更改数据库设计，因为我无法访问它，并且更改设计只会在网站发生巨大变化时发生。

这是我当前的代码：

```
if (empty($date))
            $date = date('Y-m-d'); // now

        $start_date = strtotime($date.' -'.$day_range.' day');
        $end_date = strtotime($date.' +'.$day_range.' day');
        $start_month = date('m', $start_date);
        $end_month = date('m', $end_date);
        $start_day = date('d', $start_date);
        $end_day = date('d', $end_date);

        if ($start_day > $end_day) {
            $tmp = $start_day;
            $start_day = $end_day;
            $end_day = $tmp;
        }

        /* This is a dirty fix for getting birthdays between dates */
        $this->User->contain(array('User' => array('first_name', 'last_name', 'userstatus_id')));
        $user = $this->User->find('all', array(
            'conditions' => array(
                'User.birth_month BETWEEN ? AND ?' => array($start_month, $end_month),
                'User.birth_day BETWEEN ? AND ?' => array($start_day, $end_day),
            ),
            'fields' => array(
                'birth_year',
                'birth_day',
                'birth_month'
            ),
            'order' => array(
                'birth_month' => 'ASC',
                'birth_day' => 'ASC'
            )
        ));

        foreach($user as $k => $v) {
            $temp = strtotime(date('Y-'.$user[$k]['User']['birth_month'].'-'.$user[$k]['User']['birth_day']));

            if ($temp >= $start_date && $temp <= $end_date) {
            }
            else {
                unset($user[$k]);
            }

        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T16:11:20.443

如果您无法更改表格设计，那么我将从三列创建一个日期时间，然后将其用于过滤器：

```
select *
from 
(
  select id, name,
    str_to_date(concat(year(now()), '-', birth_month, '-', birth_day), '%Y-%m-%d') birthdate
  from users
) d
where birthdate >= '2013-02-27'
  and birthdate <= '2013-03-05' 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!2/764e5/2)。

这使用[`STR_TO_DATE()`](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)和[`CONCAT()`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat)函数将生日创建为日期数据类型。一旦你有了日期，你就可以应用你的日期过滤器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T16:19:46.980

您需要按字母顺序获取日期，以便查询年月日。问题在于月初和月底的重叠。使用[MySQL 日期格式选项](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)，您可以连接日期并将它们转换为日期对象以进行搜索。如果您有很多行，这将很慢并且效率不高，因为必须评估每一行。

另一种方法是查询您已经拥有的列，但使用从应用程序逻辑得出的范围条件并生成内联 SQL，例如

```
SELECT * FROM users
WHERE 1=1 
```

然后：

```
AND birth_year = X 
```

或重叠范围

```
AND (birth_year = X OR birth_year = Y) 
```

对birth_month 和birth_day 执行相同操作

Not an elegant solution, but given your poor schema design I can only see one of these two alternatives. The first is easier but the 2nd should generally perform better provided the query isn't performing a full table scan - if you're not indexing then just use the string to date option.

# python - 找不到匀称的 parallel_offset

> ID：15161821
> 
> 赞同：1
> 
> 时间：2013-03-01T16:01:43.623
> 
> 标签：python, attributeerror, shapely

我正在尝试使用 Shapely `parallel_offset`，但似乎找不到。我已经包含了示例中的导入，但它就是无法识别`parallel_offset`.

```
from matplotlib import pyplot
from shapely.geometry import LineString
from descartes import PolygonPatch

line=LineString([(0,0),(0,1),(1,1),(2,0)])
offset = line.parallel_offset(1,'left',join_style=2) 
```

我得到：

```
$ python parallel_offset.py 
Traceback (most recent call last):
  File "parallel_offset.py", line 6, in <module>
    offset = line.parallel_offset(1,'left',join_style=2)
AttributeError: 'LineString' object has no attribute 'parallel_offset' 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-15T02:30:59.587

此功能有两个需要同时满足的要求：

*   匀称 >= 1.2.8
*   GEOS >= 3.2.0

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-19T15:54:48.957

我复制了下面的“你的几行代码”，这也有效。

```
from shapely.geometry import LineString
line=LineString([(0,0),(0,1),(1,1),(2,0)])
offset = line.parallel_offset(1,'left',join_style=2) 
```

[我得到了如图所示的结果](https://i.stack.imgur.com/mebvL.png)。

您的原因可能是由于安装错误，因此请使用更新版本重新安装。

# resharper - Resharper 加载 StyleCop 设置

> ID：15161830
> 
> 赞同：7
> 
> 时间：2013-03-01T16:02:03.497
> 
> 标签：resharper, stylecop

我正在使用 Resharper 7.1 和 StyleCop 4.7（使用 Visual Studio 2012）。默认情况下，Resharper 会加载所有 StyleCop 规则以供检查，并且对于所有关闭它们，要采取的操作是“警告”，即使在 Settings.StyleCop 文件中某些规则被禁用。

如果某个 StyleCop 规则被禁用，我希望 Resharper “不显示”任何内容（因为当然，并非所有默认规则始终都有意义）。

我知道这可以在 Resharper - 选项 - 检查严重性中手动完成，方法是自己选择对每个规则采取的操作。但是有没有办法自动做到这一点？也就是说，如果在 Stylecop.Settings 中禁用规则，是否让 resharper 不会警告您该规则被破坏？

自动执行此操作很有意义，因为我想定义一组强制规则供所有团队应用，并且让每个工程师手动修复为每个现有规则采取的操作是多余的（因为它们很多）。

提前致谢， 米海

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:06:55.753

似乎没有办法做到这一点，但可以在 Resharper 选项中手动配置规则，然后导出您的选项（通过管理 -> 导出到文件），然后可以将它们导入其他机器。

# ios - 从 AFHTTPRequestOperation 更新主线程上的 UI

> ID：15161832
> 
> 赞同：0
> 
> 时间：2013-03-01T16:02:06.740
> 
> 标签：ios, multithreading, grand-central-dispatch, afnetworking

我为 iOS 应用程序构建了一个 Rails 后端，它允许用户仅在授权设备后才能访问 RESTful API。基本上授权是通过检索令牌来管理的。

当用户提交用户名和密码时，网络服务会被调用`AFHTTPRequestOperation`（见下面的代码）。我还向用户显示 HUD ( `MBProgressHUD`) 以跟踪请求的进度。我已经为成功和失败设置了回调，我想更新 HUD 并让它在屏幕上显示更新的消息几秒钟，然后再将其关闭。

```
//Set HUD
MBProgressHUD *hud = [MBProgressHUD showHUDAddedTo:self.view animated:YES];
hud.mode = MBProgressHUDModeIndeterminate;
hud.labelText = @"Authenticating";

//Set HTTP Client and request
NSURL *url = [NSURL URLWithString:@"http://localhost:3000"];
AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:url];
[httpClient setParameterEncoding:AFFormURLParameterEncoding]; //setting x-www-form-urlencoded
NSMutableURLRequest *request = [httpClient requestWithMethod:@"POST" path:@"/api/v1/tokens.json" parameters:@{@"password":_passwordField.text, @"email":_emailField.text}];

//Set operation
AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];

//Success and failure blocks
[operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject){
    NSError *error;
    NSDictionary* jsonFromData = (NSDictionary*)[NSJSONSerialization JSONObjectWithData:responseObject options:NSJSONReadingMutableContainers error:&error];
    NSLog(@"%@", jsonFromData);
    _statusLabel.text = @"Device authenticated!";
    hud.customView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"37x-Checkmark.png"]];
    hud.mode = MBProgressHUDModeCustomView;
    hud.labelText = @"Authenticated!";
    sleep(2);
    [MBProgressHUD hideAllHUDsForView:self.view animated:YES];
}
failure:^(AFHTTPRequestOperation *operation, NSError *error){
    NSLog(@"Error");
    sleep(2);
    _statusLabel.text = @"Wrong username or password!";
    [MBProgressHUD hideAllHUDsForView:self.view animated:YES];
}]; 
```

当成功/失败操作回调被调用时：

*   我尝试更新HUD模式和文本；
*   我等`sleep()`了几秒钟；
*   我解散了HUD `[MBProgressHUD hideAllHUDsForView:self.view animated:YES];`；

我也尝试`dispatch_queue_t dispatch_get_main_queue(void);`在主线程上使用并运行 HUD 更新，但无济于事。

关于我做错了什么的任何想法？

# c++ - 通过值或指向 C++ 上的动态分配的指针返回大型结构对象

> ID：15161833
> 
> 赞同：5
> 
> 时间：2013-03-01T16:02:08.807
> 
> 标签：c++, memory-management, heap-memory, stack-memory

这是我的问题。我有一个函数`struct`作为输入，分配一个新的`struct`然后返回它。有以下`struct`内容

```
struct Data {
std::vector<custom_type> vector_vars;
std::string key;
std::map<std::string, Data*> index;
}; 
```

`vector_vars`大小为 500-1000。custom_type 如果相关是[此类](https://research.microsoft.com/en-us/um/redmond/projects/z3/classz3_1_1ast.html)。`index`帮助我访问不同的`Data`结构`key`。这就是功能。

```
Data func(Data inputData) {

 Data outputData;
//compare values with inputData
//change some values in Data struct
 return outputData
} 
```

1.  我是否使用堆栈分配并将其返回，以便将其复制到 RHS。这是可取的，因为复制可能会产生很多开销？

2.  我可以返回一个引用/指针，指向函数内堆栈上分配的结构吗？

3.  为了提高效率，是否建议在这里（可能与）使用动态分配`std::shared_ptr`？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-01T16:06:58.880

1.  按值返回对象。复制省略是标准允许编译器进行的一种优化，可以删除不必要的副本。在 C++03 中，编译器几乎肯定会忽略副本。在 C++11 中，复制首先会被视为一个移动（这反过来会移动其内容），甚至可能会被忽略。

    > 在`return`具有类返回类型的函数的语句中，当表达式是具有与函数返回类型相同的 cv 非限定类型的非易失性自动对象（函数或 catch 子句参数除外）的名称时，可以通过将自动对象直接构造到函数的返回值中来省略复制/移动操作

    具体来说，当这个标准导致复制省略时，它通常被称为命名返回值优化，返回值优化的一种[形式](http://en.wikipedia.org/wiki/Return_value_optimization)。

    所以这里最惯用和性能友好的选择是按值返回。当然，如果你*测量*到即使在优化下按值返回*也是一个问题*，那么当然，你可以考虑动态分配（见第 3 点）。

2.  不，您不应该返回指向局部变量的引用或指针。具有自动存储持续时间（您所说的在堆栈上分配）的对象将不再存在。引用或指针将悬空。以任何有意义的方式使用它都会导致未定义的行为。

3.  不，如上所述，建议按值返回。但是，如果您真的需要，您可以动态分配`Data`并通过智能指针返回它。这里首选的智能指针是 a`std::unique_ptr`因为您的函数正在将所有权传递给调用函数（不共享所有权）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T16:06:41.407

1.  实际上，这里可能会发生两种快速操作中的一种：或者`outputData`可以移动到返回值中，或者可以省略这个移动。在这两种情况下都不会有任何昂贵的副本。的副本`inputData`似乎没有必要，也许您应该将其传递为`Data const& inputData`.
2.  您可以这样做，但这会导致未定义的行为。
3.  不会。动态分配可能更不安全、更慢、更混乱并且通常更糟。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-01T16:12:36.723

```
Data func1(Data inputData) {
    Data outputData;
    return outputData
} 
```

按值获取类型的对象`Data`并创建另一个实例，`Data`然后按值返回。因此，不仅在`outputData`返回时创建副本，而且`inputData`在接收时创建副本。不用担心按值返回时的性能，有一些机制会处理它（值得一提的是*复制省略*和可能的*返回值优化*）。我建议您`inputData`通过参考通过：`Data func1(const Data& inputData)`.

> *这是可取的，因为复制可能会产生很多开销？*

经验法则：除非遇到性能问题，否则不要担心代码的性能。

> *我可以返回一个引用/指针，指向函数内堆栈上分配的结构吗？*

Don't return a reference / pointer to the object with automatic storage duration defined within the scope of that function. The object is destructed once the execution goes out of scope, so you will end up with *dangling pointer* (*invalid reference*) which will lead to **undefined behavior**

> *Is it advisable to use dynamic allocation instead here for efficiency?*

Avoid dynamic allocation wherever possible. Not because of efficiency, but for the sake of the memory management within your code. Follow [RAII idiom](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization) and avoid handling the ugly memory management on your own.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-01T21:47:24.087

You could rewrite `func()` to take return a `Data*` instead of a `Data`. Certainly it's much faster to copy a `Data*` than it is to copy a `Data`. But before that: do you care? Does this function run once during program initialization, taking a tenth of second of wall clock time, or do you expect to call it once a frame, or what?

When you're writing a program, or optimizing an existing one, your goal should always be to make it "fast enough" (and "responsive enough", but never mind that for now). The definition of "fast enough" varies a lot: in a simulation you might be happy to crunch one terabyte of data per hour, while in a video game you need to show the player a new graphics frame every 16 milliseconds.

So: is your program "fast enough" with just stack allocation? If it is, leave it alone. If it's not, use dynamic allocation instead. In general, it's good C++ style to return pointers instead of large structs, but you shouldn't worry about that while you're still learning. Make it work, make it right, *then* make it fast.

# ibm-mobilefirst - 调试无 apk 文件的提示/帮助

> ID：15161837
> 
> 赞同：0
> 
> 时间：2013-03-01T16:02:18.817
> 
> 标签：ibm-mobilefirst

我的环境：

*   Eclipse SDK 3.7.2
*   工作灯插件 5.0.5
*   安卓 SDK 2.2

首先，我尝试了一个简单的 Hello World，一切正常，创建了 android 原生项目，我看到在构建和部署后生成了相应的 apk 文件。

接下来我导入了一个示例项目，成功地让它在测试（localhost）服务器上运行，能够在 android Mobile Browser Simulator 上看到预期的结果，但现在的问题是我没有看到生成了相应的 android apk 文件（android本机项目已创建）。日志上没有错误，知道可能是什么问题吗？怎么调试这样的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T16:24:22.293

首次运行应用程序后，APK 将在 \bin\ 文件夹下生成。通过 USB 电缆将您的 Android 设备连接到开发机器（假设您安装了 Android SDK 等），右键单击 Android 项目并执行 Run as->Android app。

该应用程序将在 Android 设备上安装并启动。APK 将在 \bin 文件夹中生成。

一般来说，你不需要设备，同样的事情可以用模拟器来完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T17:18:40.013

您还可以对 android 应用程序项目进行导出。如果您正在考虑进行一些密钥签名，这就是您会做的事情。如果您要上传到 Google play 或企业应用商店，这就是您想要导出的方式。

请记住，Worklight 不会构建您的 .ipa、.apk 等文件。它会构建您已编译好的资源。它将为您构建在相应的本地环境中构建所需的文件夹结构和项目层（对于苹果，您将导出到 xcode，构建它并运行）。

# java - java 7 jnlp 未运行无法加载资源

> ID：15161838
> 
> 赞同：2
> 
> 时间：2013-03-01T16:02:21.220
> 
> 标签：java, jnlp, java-web-start

我有一台带有 java 6 的 windows 计算机，jnlp 文件工作正常，但 java 7 显示以下消息：

```
com.sun.deploy.net.FailedDownloadException: Unable to load resource: http://www.pscode.org/jws/persistserv.jnlp
    at com.sun.deploy.net.DownloadEngine.actionDownload(Unknown Source)
    at com.sun.deploy.net.DownloadEngine._downloadCacheEntry(Unknown Source)
    at com.sun.deploy.cache.ResourceProviderImpl.getResourceCacheEntry(Unknown Source)
    at com.sun.deploy.cache.ResourceProviderImpl.getResourceCacheEntry(Unknown Source)
    at com.sun.deploy.cache.ResourceProviderImpl.getResource(Unknown Source)
    at com.sun.javaws.Launcher.updateFinalLaunchDesc(Unknown Source)
    at com.sun.javaws.Launcher.prepareToLaunch(Unknown Source)
    at com.sun.javaws.Launcher.prepareToLaunch(Unknown Source)
    at com.sun.javaws.Launcher.launch(Unknown Source)
    at com.sun.javaws.Main.launchApp(Unknown Source)
    at com.sun.javaws.Main.continueInSecureThread(Unknown Source)
    at com.sun.javaws.Main.access$000(Unknown Source)
    at com.sun.javaws.Main$1.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

# python - 导入后python模块为空

> ID：15161843
> 
> 赞同：2
> 
> 时间：2013-03-01T16:02:29.923
> 
> 标签：python, python-import

在尝试以不同方式导入名为 rmod2 的 python 模块时，我注意到一些看似奇怪的行为。如果我从*rmod2.py*文件所在的目录启动 python，它工作正常。但是，如果我将文件移动到其他模块所在的另一个文件夹，它将不再按预期工作。模块/包文件夹是*/usr/lib/pymodules/python2.7*它也包含在*sys.path*中。所以我创建了文件夹*/usr/lib/pymodules/python2.7/rmod2*并将一个空的*__init__.py*和*rmod2.py*放在那里。如果我没有*__init__.py*我得到：

```
>>> import rmod2
Traceback (most recent call last):
 File "<stdin>", line 1, in <module>
ImportError: No module named rmod2 
```

使用*__init__.py*文件，导入似乎工作，但包是空的：

```
>>> import rmod2
>>> dir()
['__builtins__', '__doc__', '__name__', '__package__', 'rmod2']
>>> dir(rmod2)
['__builtins__', '__doc__', '__file__', '__name__', '__package__', '__path__']
>>> rmod2.__path__
['/usr/lib/pymodules/python2.7/rmod2']
>>> rmod2.__file__
'/usr/lib/pymodules/python2.7/rmod2/__init__.py' 
```

有人可以告诉我发生了什么，以及如何修复它以在导入时实际加载模块内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:06:14.177

您希望将模块所在目录的路径添加到[`sys.path`变量](http://docs.python.org/2/library/sys.html#sys.path)中，*或者*将`rmod.py`模块*直接*添加到路径上的目录（而不是子目录中）。

通过添加`__init__.py`到目录，您将其转换为 python 包，使其成为可导入的。如果这是您的意图，那么您将`rmod`-the-module 移动到`rmod`-the-package 中，您可以通过该命名空间导入它：

```
from rmod2 import rmod2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-09T10:57:34.587

一旦我碰巧无法从包中访问包的模块，但是直接导入时，它可以工作。`__all__`可能在包裹中丢失`__init__.py`

这没有用：

导入 mypkg obj = mypkg.mymodule.MyClass()

这有效：

```
import mypkg.mymodule
obj = mypkg.mymodule.MyClass() 
```

# android - 如何配置操作栏以在每个长流程中显示进度条？

> ID：15161844
> 
> 赞同：0
> 
> 时间：2013-03-01T16:02:41.967
> 
> 标签：android, progress-bar, android-actionbar, fragment, viewstub

我想在我的操作栏中有一个方法或其他东西，以便在每次我需要做一个漫长的过程时显示一个不确定的进度条。我一直在尝试使用 ViewStub，我还考虑过使用 frameLayout 和片段，但我不确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T22:54:37.327

使用[`Activity#setProgressBarIndeterminateVisibility(boolean)`](http://developer.android.com/reference/android/app/Activity.html#setProgressBarIndeterminateVisibility%28boolean%29).

```
// This has to be called before setContentView
requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);

// This shows an indeterminate progress bar in the action bar
setProgressBarIndeterminateVisibility(true); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-01T17:50:04.207

*   在操作栏中放置一个 ProgressBar 视图。
*   将长任务作为 AsyncTask 运行。
*   在长任务期间使用 PublishProgress 方法来指示到目前为止已经完成了多少工作。
*   使用 OnProgressUpdate 回调来更新 ProgressBar。

# jquery - 抓取特定字段的标签名称

> ID：15161851
> 
> 赞同：0
> 
> 时间：2013-03-01T16:03:17.013
> 
> 标签：jquery, html

我不知道如何在这个 jquery 代码中获取特定字段的标签名称

我使用下面的代码将字段值放置在文本区域框中。我想获取该字段的标签名称。现在它正在获取字段的**名称**，它是一个数字，并且该数字是必需的，

**我的html是这样的结构-**

```
<fieldset id="section-106"><legend class='sectiontitle'>Project Overview</legend><table width='90%' border='0' cellpadding='2' cellspacing='0'><tr class="tr-106-608 tr-106" id="field-608"><td width='30%' valign='top' align='left' class="td-106-608 td-106 labeltext" id="td-field-608">Request Name :</td><td width='70%' align='left' class="td-106-608 td-106 td-106-608-label-name_Request Name labeltext" id="td-field-608"><table border='0' style='table-layout:auto'><tr><td id="td_2-field-608"><input id="608" name="608" maxlength="150" size="40" class="valuetext" value="" 0="" ></td><td valign='top'></td></tr></table></td></tr><tr class="tr-106-609 tr-106" id="field-609"> 
```

有没有办法从上面的 html 结构中获取标签名称并包含在下面的 jQuery 中？

**我的jQuery是这样的：**

```
function combineFields(event) {
        $('#7470').val('');
        $("#6974,#1782, #1783").each(function(){
            if ($(this).val() != '') {
               var val = $(this).attr('name')+':  '+$(this).val();
               var mytextareaFld = $('#7470');
              mytextareaFld.val(mytextareaFld.val() + val + '\n');
            }

        })
} 
$("#6974,#1782, #1783").blur(combineFields); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:00:15.720

发现周围 - 对于那些处于类似情况的人。我使用了“alt”属性，将标签名称应用于该属性，将其添加到代码中，因此这为该字段提供了另一个“名称”，我可以将其用作参考。

# ios - iOS5：确定核心数据方法是否在异步调度队列中运行？

> ID：15161853
> 
> 赞同：0
> 
> 时间：2013-03-01T16:03:23.990
> 
> 标签：ios, cocoa-touch, cocoa, core-data

如何判断一个方法是否异步运行？

我有几个与核心数据相关的方法，它们有时通过异步调度队列 (GCD) 异步调用，而其他时候则同步调用。

```
// sometimes this happens
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^{
  [[DataServices sharedInstance] doSomeCoreDataStuff:^(BOOL result, NSString *message) 
  {
      // do some post-stuff here        
  }];
});

// other times this happens
[[DataServices sharedInstance] doSomeCoreDataStuff:^(BOOL result, NSString *message) 
{
    // do some post-stuff here        
}]; 
```

除此之外，我在`NSManagedObjectContext`整个应用程序中都使用了单例。由于上下文不是线程安全的，在核心数据方法异步运行的情况下，我需要在这些方法中创建一个新的上下文，否则我想使用单例实例上下文。

想到的唯一方法是类似的`[[NSThread mainThread] isMainThread]`，但 GCD 可能会或可能不会在主线程上工作，所以这不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T17:53:48.650

处理此问题的正确方法是将托管对象上下文配置为使用线程限制并发类型之一-`NSPrivateQueueConcurrencyType`或`NSMainQueueConcurrencyType`- 然后`performBlock:`在您想要使用它时使用它的方法。那是，

```
[[DataServices sharedInstance] performBlock:^{
    // do Core Data stuff here
}]; 
```

您可以在任何线程或队列上执行此操作，并且它是异步的。还有`performBlockAndWait:`，如果您需要立即获得结果。

你会*在任何地方*使用那个调用。唯一的例外是，如果您使用`NSMainQueueConcurrencyType`并且您**知道**您正在主队列上运行，您可以直接在上下文上进行调用，而不是通过`performBlock:`

# python - 将语法切片到对象

> ID：15161856
> 
> 赞同：1
> 
> 时间：2013-03-01T16:03:41.477
> 
> 标签：python, numpy, slice

我有一个保存数据的类（一个 numpy ndarray），其中包括一个将数据存储到 mat 文件的方法（使用 scipy.io.savemat）。数据可能非常大，所以我可能只想存储一段数据。因此我传递了一个切片对象，如下所示：

```
def write_mat(self, fn, fields=None, sel=None):
    # (set fields and sel to sensible values if None)
    scipy.io.savemat(fn, dict(data=self.data[fields][sel])) 
```

这里，`fields`可能是字符串列表（for`self.data`是结构化数组），并且`sel`是切片对象。当然，我不能直接将切片语法传递给`write_mat`:`obj.write_mat(fn, fields, [::10])`是一个 SyntaxError。当然，我可以`slice(None, None, 10)`改为传入，但我不是很喜欢这种解决方案。

是否有任何内置的便利对象可以让我从切片语法创建切片对象？当然，它很容易实现：

```
In [574]: class Foo:
     ...:     def __getitem__(self, item):
     ...:         return item
     ...:     

In [578]: slicer = Foo()

In [579]: slicer[::100]
Out[579]: slice(None, None, 100) 
```

但即使是易于实施的东西，也可能已经有了更标准的解决方案。有没有？按照标准，我的意思是存在于 Python、numpy 或 scipy 中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T16:48:29.727

[将Python 切片语法传递给函数](https://stackoverflow.com/questions/13706258/passing-python-slice-syntax-around-to-functions)的答案是正确的，但由于您已经在使用 NumPy，您可以使用[`np.s_`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.s_.html)：

```
import numpy as np
np.s_[1:2:3]
Out[1]: slice(1, 2, 3) 
```

# java - NativeActivity 中的 GestureDetector

> ID：15161857
> 
> 赞同：1
> 
> 时间：2013-03-01T16:03:42.480
> 
> 标签：java, android, android-ndk, gesture

我想`GestureDetector`在我的`NativeActivity`课堂上使用，但它似乎不起作用。可以`GestureDetector`在`NativeActivity`应用程序中使用吗？我的代码是这样的：

```
public class HollywoodActivity extends android.app.NativeActivity {

    private GestureDetector mGestureDetector;
    private View.OnTouchListener mGestureListener;

    @Override
    public void onCreate(Bundle savedInstanceState) {

            super.onCreate(savedInstanceState);

            mGestureDetector = new GestureDetector(new MyGestureDetector());
            mGestureListener = new View.OnTouchListener() {

                public boolean onTouch(View v, MotionEvent event) {
                    Log.i("DEBUG", "*** TOUCH VIEW ***");
                    return mGestureDetector.onTouchEvent(event);
                }
            };                                  
    }

    private class MyGestureDetector extends SimpleOnGestureListener {

          @Override
          public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {

              Log.i("DEBUG", "FLING" + velocityX + " " + velocityY);
              return true;
          }

          @Override
          public boolean onDown(MotionEvent e) {
              Log.i("DEBUG", "ON DOWN");
              return true;
          }         
    }
} 
```

当我运行我的应用程序时，既不会`onTouch()`，也`onFling()`不会`onDown()`被调用。我在这里遗漏了一些明显的东西还是不能使用`GestureDetector`with `NativeActivity`？

谢谢

**编辑：** 由于似乎不可能在 Java 端拦截 MotionEvents 在它们被传递到 C 端之前，我现在已经反过来尝试：每当我在 C 端获得 AINPUT_EVENT_TYPE_MOTION 时，我我通过 JNI 将其提供给 Java 端的 GestureDetector，如下所示：

```
(*env)->CallVoidMethod(env, g_android->activity->clazz, (*env)->GetMethodID(env, globalMyNativeActivityClass, "runGestureDetector", "(JJIIFFFFIFFII)V"), AMotionEvent_getDownTime(event), AMotionEvent_getEventTime(event), AMotionEvent_getAction(event), AMotionEvent_getPointerCount(event), AMotionEvent_getRawX(event, 0), AMotionEvent_getRawY(event, 0), AMotionEvent_getPressure(event, 0), AMotionEvent_getSize(event, 0), AMotionEvent_getMetaState(event), AMotionEvent_getXPrecision(event), AMotionEvent_getYPrecision(event), AInputEvent_getDeviceId(event), AMotionEvent_getEdgeFlags(event)); 
```

Java 方法 runGestureDetector() 简单地执行以下操作：

```
public void runGestureDetector(long downTime, long eventTime, int action, int pointerCount, float x, float y, float pressure, float size, int metaState, float xPrecision, float yPrecision, int deviceId, int edgeFlags) {

    mGestureDetector.onTouchEvent(MotionEvent.obtain(downTime, eventTime, action, pointerCount, x, y, pressure, size, metaState, xPrecision, yPrecision, deviceId, edgeFlags));             
} 
```

通过这样做，我能够检测到一些手势。onDown()、onSingleTap() 和 onScroll() 都很好。然而，不起作用的是 onFling()。但是 onFling() 对我来说是最重要的。

我的怀疑是 onFling() 不起作用，因为它可能依赖于可以存储在 MotionEvent 中的历史值（每个 MotionEvent 都有一个带有历史参数的历史大小，请参阅 android/input.h）。但是，MotionEvent 类的 gain() 构造函数不允许我构造具有历史值的 MotionEvent 对象。

那么有什么方法可以将我在 C 端获得的真实 MotionEvent 提供给 Java 端的 onTouchEvent() 吗？我可以通过 NDK API 获取历史值，但 AFAICS 无法在 Java 端构造带有历史信息的 MotionEvent :-(

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T20:18:58.020

我没有**对此**进行测试，我也不熟悉，`NativeActivity`但据我所知，你没有连接你的`GestureDetector`.
不要创建一个`OnTouchListener`，而是尝试覆盖您的 Activity 的`onTouchEvent(MotionEvent event)`：

```
@Override
public boolean onTouchEvent (MotionEvent event) {
    Log.i("DEBUG", "*** TOUCH VIEW ***");
    return mGestureDetector.onTouchEvent(event);
} 
```

这会将您的 Activity 上的每个 MotionEvent 传递给您的 GestureDetector。如果您只想捕获特定视图上的 MotionEvents，您可以将 OnTouchListener 附加到它：

```
findViewById(R.id.yourView).setOnTouchListener(mGestureListener); 
```

就像我已经说过的，这可能只适用于正常的活动，我不知道 NativeActivities 是如何工作的......

无论如何，我希望这会有所帮助。

# php - 如何动态保护某些页面？

> ID：15161861
> 
> 赞同：1
> 
> 时间：2013-03-01T16:04:01.010
> 
> 标签：php, symfony

我有一个视频列表。很少有人是公开的，还有一些是私人的。这些有登录名和密码，但不是一个登录名/密码，所有私人视频都有自己的保护。目前：

```
class VideoController extends Controller
{
    /**
     * @Route("/videos", name="videos")
     * @Template()
     */
    public function indexAction()
    {
        $videos = $this->getDoctrine()->getRepository('CcTestBundle:Video')->findAll();
        return array('videos' => $videos);
    }

    /**
     * @Route("/video/{videoId}", name="video_show")
     * @Template()
     */
    public function showAction($videoId)
    {
        $video = $this->getDoctrine()->getRepository('CcTestBundle:Video')->find($videoId);
        if($video->isSecured()) {
            **????**
        }
        else return array('video' => $video);
    }

    /**
     * @Route("/video/{videoId}/login", name="video_login")
     * @Template()
     */
    public function loginAction($video)
    {
        **????**
    }

    /**
     * @Route("/video/{videoId}/login_check", name="video_security_check")
     */
    public function securityCheckAction($videoId)
    {
        **????**
    }
} 
```

我不知道该怎么做，如何使用转发和重定向操作。你可以帮帮我吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T04:16:44.853

我有类似的需要来保护我运行的网站上的图像文件。

我所做的是将我想要私有的文件放在具有权限的子目录中，`chmod 700`然后使用 if 语句调用生成的函数`DATA URI`将 Base64 编码到 PHP 页面中以供浏览器读取。由于视频的大小，我不知道这对视频的效果如何，但这是功能。

```
function data_uri($file, $mime) {
    $contents = file_get_contents($file);
    $base64 = base64_encode($contents);
    return "data:$mime;base64,$base64";
} 
```

然后我只调用我想要图片的函数。

```
<input class="map" name="pos" type="image" src="<?php echo data_uri("./img/overlay_$sessionid.png", 'image/png')?>" /> 
```

您只需要相应地更改文件类型。

# javascript - 从 html 调用 javascript 对象方法

> ID：15161862
> 
> 赞同：1
> 
> 时间：2013-03-01T16:04:03.187
> 
> 标签：javascript, html, object

我对 Javascript 编程比较陌生。我正在研究一个示例，并且在从 HTML 中调用对象上的方法时遇到了困难。我怀疑这与方法的范围界定或外部化有关，但我不确定。

索引.html：

```
<script type="text/javascript">
var f = new Fred();
f.bar();
f.foo();
</script> 
```

弗雷德.js：

```
function Fred() {
this.a = 1;

function foo() {
    if (a == 1) {
        a++;
    } 
    var e = 0;
}

this.bar = function () {
    var a = 3;
    var b = 4;
};

this.c = 3;
this.d = 4; 
```

}

调用`bar()`有效，调用`foo()`无效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T16:12:25.707

是的，你是对的，这确实与范围界定和闭包的概念有关。`foo()`如果您熟悉其他面向对象的语言（如 Java 或 C#），则可以将该函数视为“私有”方法。它仅在您的`Fred()`对象范围内可用。该`bar()`函数是“公共的”，因为使用 this.bar 声明它会将其添加到`Fred()`对象的公开可用属性中。所以，也要`foo()`“公开”，然后将其声明为：

```
this.foo = function () {
    if (a == 1) {
        a++;
    } 
    var e = 0;
} 
```

有关 javaScript 中闭包的更深入解释，请尝试以下链接：[http ://www.sitepoint.com/javascript-closures-demystified/](http://www.sitepoint.com/javascript-closures-demystified/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T16:06:48.190

您没有将[函数指针](http://invisibleblocks.com/2006/01/10/javascript-oo-and-function-pointers/)分配给 foo。将其更改为

```
this.foo = function() {
    if (a == 1) {
        a++;
    } 
    var e = 0;
}; 
```

就像你所做的那样：

```
this.bar = function () {
    var a = 3;
    var b = 4;
}; 
```

# highcharts - 如何使用 JavaScript 动态更改 Highcharts 中的数据点

> ID：15161869
> 
> 赞同：12
> 
> 时间：2013-03-01T16:04:24.327
> 
> 标签：highcharts

我正在尝试更改现有系列中的一个点。通过查看 API，我一直在尝试以下操作：

```
chart.series[0].data[0].y = 43;
chart.redraw(); 
```

我确定我错过了一些简单的东西，但我无法弄清楚。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-01T16:09:26.237

你不能只设置值。chart.series[0].data[0] 返回一个点对象，然后您可以使用它的“更新”方法来更改它的值。

```
chart.series[0].data[0].update(y += 10); 
```

你可以在这里看到一个例子：http: [//jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/members/point-update-column/](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/members/point-update-column/)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-04T14:37:15.270

它适用于两个坐标：http: [//jsfiddle.net/PsBh7/](http://jsfiddle.net/PsBh7/)

```
 chart.series[0].data[0].update({
                x:20
            }); 
```

# http - 两台服务器应该如何通信

> ID：15161874
> 
> 赞同：0
> 
> 时间：2013-03-01T16:04:33.073
> 
> 标签：http, messagepack

对于一个新项目，我需要用 Python 设计一个多组件后端。最初，它将有两个基本组件——一个业务规则服务器和一个为来自浏览器的请求提供服务的前端。

```
|--------------------|
     Business API
|--------------------|
         ||
         ||
         ||
|--------------------|
    Front server
|--------------------| 
```

随着该系统获得更多功能，我可能需要添加更多连接到业务 API 的服务器/组件。

现在，我已经（经过大量研究）选择 MessagePack 用于序列化/反序列化目的。

我无法决定的应该是什么应该是传输（有线协议），应该通过它进行通信。有一些选择：

*   原始 TCP/IP 套接字
*   zeromq 套接字 ( [zerorpc](http://zerorpc.dotcloud.com) )
*   纯HTTP

我认为 http 是一个不错的选择——但我应该如何通过 http 发送有效负载？通过进行base64编码？在这种情况下，我将不得不这样做：

```
on one end
[actual message] -> [msgpack encode] -> [base64 encode]

on the other end
[base64 decode] -> [msgpack decode] ->   [actual message] 
```

这在不同组件之间发生大量喋喋不休的系统中是否可以接受？有没有更好的解决方案？有没有更好的方法通过http来做到这一点？

注意：我不能使用纯 JSON，因为我需要传输二进制数据 - 所以序列化库将是 msgpack。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:10:14.683

这实际上取决于您的系统的详细信息。

如果您的组件都*在*Python（或 Node.js）中，并且所有通信都发生在您的网络中，您可以使用 ZeroRPC。

如果您需要穿越防火墙或者如果您使用更奇特的语言，您可以使用 HTTP，正如 Hazzit 在评论中所说的 HTTP 完全可以在 HTTP 文档的正文中传输二进制数据，或者您可以使用 Multipart Post 编码.

# jquery - 如何在画布上选择形状并返回其名称？

> ID：15161881
> 
> 赞同：0
> 
> 时间：2013-03-01T16:04:52.213
> 
> 标签：jquery, jcanvas

我使用带有此功能的 jCanvas 库在画布上绘制了几个形状：

```
var factoryCounter = 1;

$(".atom").click(function() {
    //get element by tag id
    var AtomId = jQuery(this).attr("id");
    var elementRef = "#el" + factoryCounter;
    $("canvas")
    .drawImage({
        source:'images/' + AtomId + '.png',
        layer: true,
        name: "myAtom" + factoryCounter,    //I need this value
          fillStyle: "#36b",
          strokeStyle: '#36b',
          strokeWidth: 0.3,
          x: 36, y: 28,
          width: 45, height: 35,
          radius: 100,
          ccw: true,
          draggable: true,
            click: function(layer) {
                            console.log("name")  //here I need to return "name", but don't know how.

        }                   
    });
    factoryCounter++; 
```

如您所见，每个形状都有自己独特的名称。我想创建一个函数，在我用鼠标单击它后返回所选形状的名称。我可以成功编辑名称已知的形状的属性，如下所示：

```
 $("canvas").setLayer("myAtom" + 2, {
    fillStyle: "#36b",
    width: 100, height: 200,
    rotate: 30
    })
         .drawLayers();
    }); 
```

但不知道如何实现 shapeSelect() 函数，该函数通过单击返回现有形状的名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T13:33:36.870

好吧，我问了做图书馆的那个人，他给了我正确的答案。如果你需要它，这里是：

* * *

好吧，与其将点击事件绑定到画布元素，不如为每个新的 jCanvas 层设置一个点击事件。当您单击其中一个图层时，根据您创建的某些图层属性（例如 layer.selected），让回调函数在要执行的操作之间切换。这是基本思想：

```
 $("canvas").drawImage({
// image properties here...
layer: true,
name: "someLayer",
selected: false,
click: function(layer) {
    if (layer.selected === false) {
        layer.selected = true;
        // do something with the layer name
    } else if (layer.selected === true) {
        layer.selected = false;
        // deselect the layer
    }
 }
}); 
```

-迦勒

* * *

# javascript - 使用 toString() 的参数在 javascript 中输出字母

> ID：15161885
> 
> 赞同：-1
> 
> 时间：2013-03-01T16:05:02.287
> 
> 标签：javascript, cryptography, tostring

我不明白这里发生了什么：

```
var x = 14;
alert(x.toString(36)); //alerts 'e'

alert(x.toString(16)); //also alerts 'e'

x = 20;
alert(x.toString(16)); //alerts '14'
alert(x.toString(36)); //alerts 'k' 
```

我认为第一个参数决定了要转换的数字的数值系统，但我不确定。任何人都可以详细解释到底发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T16:12:08.183

您正在通过传递 number 参数来更改基数。第二个例子最容易解释。. . base16 中的 14 是“e”。base16 的“数字”是 0、1、2、3、4、5、6、7、8、9、a (10)、b (11)、c (12)、d (13)、e (14) , 和 f (15)。

对于任何 15 或以上的数字系统，实际上，14 将 = 'e'。

在 20 的情况下，base16 给你 14，因为你有 116，再加上 4 个 (16 + 4 = 20)。

对于水平集，十进制（base10 ......我们最习惯的系统），14 在技术上是 1 十加 4。

如果您不熟悉不同的编号系统，可能需要一点时间来适应。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T16:07:19.900

The parameter is the radix.

```
number.toString( [radix] ) 
```

See [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/toString](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/toString)

> The Number object overrides the toString method of the Object object; it does not inherit Object.toString. For Number objects, the toString method returns a string representation of the object in the specified radix.
> 
> The toString method parses its first argument, and attempts to return a string representation in the specified radix (base). For radixes above 10, the letters of the alphabet indicate numerals greater than 9\. For example, for hexadecimal numbers (base 16), a through f are used.
> 
> If toString is given a radix not between 2 and 36, an exception is thrown.
> 
> If the radix is not specified, the preferred radix is assumed to be 10.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T16:11:02.977

可选参数是[radix](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/toString)。

# regex - 正则表达式选择到换行符

> ID：15161892
> 
> 赞同：9
> 
> 时间：2013-03-01T16:05:30.787
> 
> 标签：regex

我试图在`CORP ACT OPTION NO`2 个新行和回车之后选择所有内容（例如，直到保管帐户）

我用于提取信息的 reg 表达式 atm（所有信息都在 CORP ACT OPTION 之后）是

```
CORP ACT OPTION NO\.([\s\S]*) 
```

样品达拉：

```
CORP ACT REFERENCE                  : 007XS0212069115
SENDER'S REFERENCE                  : 1212070800330001
FUNCTION OF MESSAGE                 : NEW MESSAGE
CORP ACT EVENT                      : INTEREST PAYMENT
PLACE OF SAFEKEEPING                : US
ISIN                                : XS0212069115
ISIN/DESCRIPTION                    : KFW 4.750 071212 GBP
METHOD OF INTEREST COMPUTATION      : A006
EX-DATE                             : 20121207
RECORD DATE                         : 20121206
CORP ACT OPTION NO.                 : 001
CORPORATE ACTION OPTION CODE        : CASH
CURRENCY OPTION                     : GBP
RESULTING AMT                       : GBP617,5
PAYMENT DATE                        : 20121207
EXCHANGE RATE                       : GBP/GBP/1,
INTEREST RATE                       : 4,75

SAFEKEEPING ACCOUNT                 : 000000000000
CONFIRMED BALANCE                   : FAMT/13000,
CREDIT/DEBIT IND                    : CREDIT 
```

在上面的换行符之前如何选择`SAFEKEEPING ACCOUNT?`非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T16:10:26.247

`/.*\s*:\s*.*/g`应该可以正常工作。没有`m`匹配就不会匹配超过一行。

正则表达式的解释：

*   `.*` *尽可能匹配，直到后面跟着：*
*   `\s*:`*任意数量的空格（0个或更多）后跟一个字面`:`字符
*   `\s*` *任意数量的空格（0 个或更多）*
*   `.*` *尽可能匹配直到换行*

[**正则表达式 101 演示**](http://regex101.com/r/dA0cL1)

您还可以使用捕获组并检查每个键的每个值：

`/(.*)\s*:\s*(.*)/g`

[**正则表达式 101 演示**](http://regex101.com/r/hA8vO6)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T16:12:38.593

基于您的文件格式、编码、操作系统...的新行可能是 '\r'、'\r\n' 或 '\n'。所以你需要匹配其中任何一个，即`[\n|\r\n|\r]{2}`

```
'CORP ACT OPTION NO.([\s\S]*)[\n|\r\n|\r]{2}' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T16:12:45.583

我想`(CORP ACT OPTION NO.*?)(?:\r|\n|\r\n){2}`这就是你要找的。检查此[演示](http://regexr.com?33vdl)以查看它的工作原理。不要忘记`DOTALL`国旗。

# c# - 使用 Google Calendar API .NET v3 的 C# 桌面应用程序 - Howto？

> ID：15161902
> 
> 赞同：2
> 
> 时间：2013-03-01T16:06:12.773
> 
> 标签：c#, google-api-dotnet-client

可能不是唯一一个问这个的人，但我没有发现任何有用的东西……就像丛林；）

我有一个 C# 桌面应用程序（5-10 个用户），我想连接到我的 Google 日历。我想在日历中添加、移动、删除、更新事件。我下载了安装的最后一个.Net api v.3。

根据我的阅读，困难的部分是身份验证/连接过程。我想我们需要使用 OAuth 2.0 身份验证？我希望我的用户进行一次身份验证，而不是每次他们想要执行操作（添加、移动、删除、更新）时。在某些示例中，我得到我们必须将令牌从网页剪切并粘贴到控制台...不是真正的用户友好。以及如何仅进行 1 次身份验证（或者只是将令牌直接放入代码中以不进行身份验证？）？

现在，我可以在 C# 中有一个很好的工作示例代码来实现吗？

非常感谢您的帮助！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:38:08.987

我使用了类似于[此处](https://code.google.com/p/google-api-dotnet-client/wiki/OAuth2)示例的内容。我最初所做的是使用示例逻辑创建一个简单的 Web 应用程序来设置 Google 需要的初始身份验证。我通过并从该州获得了刷新令牌。然后，我将其保存在应用程序设置中，以后可以在以后的 GetAuthorization 请求中使用。至少对于我所做的一切运作良好，只要应用程序保持连接，用户就不需要授权。

```
private IAuthorizationState GetAuthorization(WebServerClient client)
    {
        IAuthorizationState state = new AuthorizationState(new[] { CalendarService.Scopes.Calendar.GetStringValue() });
        string refreshToken = LoadRefreshToken();//this where I wrote code to load it from the app settings
        if (!string.IsNullOrEmpty(refreshToken))
        {
            state.RefreshToken = refreshToken;
            try
            {
                if (client.RefreshToken(state))
                    return state;
            }
            catch (ProtocolException)
            {
                return null;
            }
        }

        return null;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-16T09:40:45.127

我今天有同样的问题，现在找到了解决方案

1.  准备 API 访问[https://console.developers.google.com/apis/dashboard](https://console.developers.google.com/apis/dashboard)

    1.  按下“启用 API 和服务”按钮
    2.  搜索“日历”并选择“Google 日历 API”
    3.  按下“创建项目”按钮
    4.  创建项目
    5.  按“启用”
    6.  按下“创建凭据”按钮
    7.  选择“您将从哪里调用 API？” -> 其他用户界面
    8.  选择“您将访问哪些数据？” -> 应用数据
    9.  创建服务帐号
    10.  选择角色项目 -> 编辑器
    11.  选择密钥类型 JSON
    12.  按下“继续”按钮
    13.  将文件重命名为“credential.json”并保存在visual studio项目中
    14.  在 Visual Studio 中更改复制到输出目录->“如果较新则复制”
2.  更改您的谷歌日历的共享配置（共享此日历）

    1.  在谷歌日历配置“与特定人共享”中添加来自 json 文件“client_email”的电子邮件地址

示例代码

```
using Google.Apis.Auth.OAuth2;
using Google.Apis.Calendar.v3;
using Google.Apis.Calendar.v3.Data;
using Google.Apis.Services;
using System.IO;

namespace Test.GoogleCalendar
{
    class Program
    {
        static void Main(string[] args)
        {
            GoogleCredential credential;
            using (var stream = new FileStream("credential.json", FileMode.Open, FileAccess.Read))
            {
                credential = GoogleCredential.FromStream(stream).CreateScoped(CalendarService.Scope.Calendar);
            }

            // Create Google Calendar API service.
            var service = new CalendarService(new BaseClientService.Initializer()
            {
                HttpClientInitializer = credential,
                ApplicationName = "Test Calendar Reader",
            });

            var calendars = service.CalendarList.List().Execute().Items;
            foreach (CalendarListEntry calendar in calendars)
            {
                var events = service.Events.List(calendar.Id).Execute();
            }          
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-17T18:13:14.110

[这是](https://developers.google.com/api-client-library/dotnet/apis/calendar/v3)帮助下载 .NET 的日历客户端 API 库的链接。该库使 OAuth 和访问日历更容易。请参阅链接了解 OAuth 详细信息，但我很确定这是您想要的 - 用户只需登录一次即可授权。

在同一页面上有使用 VB.NET 和 MVC 中的客户端 API 的示例应用程序。

# solr - 文件的部分更新

> ID：15161903
> 
> 赞同：3
> 
> 时间：2013-03-01T16:06:13.183
> 
> 标签：solr, search-engine, elasticsearch, linkedin

我们要求我们目前在 SOLR 中索引的文档可能需要定期进行部分更新。更新可以是一个。添加新字段 b. 更新现有字段的内容。我们模式中的一些字段被存储，其他的则没有。

SOLR 4 确实允许这样做，但必须存储所有字段。请参阅[将新字段更新到现有文档](https://stackoverflow.com/questions/11791803/update-a-new-field-to-existing-document)和[http://solr.pl/en/2012/07/09/solr-4-0-partial-documents-update/](http://solr.pl/en/2012/07/09/solr-4-0-partial-documents-update/)

问题： 1\. SOLR 有没有办法做到这一点。我们过去曾尝试过 SOLR JOIN，但它并不适合我们所有的用例。

2.  另一方面，elasticsearch、linkedin的senseidb或其他文本搜索引擎能做到吗？

目前，我们通过在需要索引受影响的文档时重新索引它们来进行管理

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-01T16:29:56.603

Solr 有存储字段的限制，这是正确的。底层 lucene 总是需要删除旧文档并索引新文档。事实上，lucene 段是一次性写入的，它永远不会回过头来修改现有的段，因此它只会将文档标记为已删除，并在合并发生时将它们真正删除。

lucene 之上的搜索服务器尝试通过公开一个能够删除旧文档并自动重新索引新文档的端点来解决此问题，但必须有一种方法可以以某种方式检索旧文档。仅当您存储所有字段时，Solr 才能做到这一点。

Elasticsearch 默认将源文档存储在一个名为`_source`. 这正是您在索引时首先发送给搜索引擎的文档。顺便说一下，这是使 elasticsearch 类似于 NoSQL 数据库的功能之一。elasticsearch[更新 API](http://www.elasticsearch.org/guide/reference/api/update.html)允许您以两种方式更新文档：

1.  发送一个新的部分文档，它将与现有的文档合并（仍然删除旧文档并索引合并的结果
2.  在现有文档上执行脚本并在删除旧文档后对结果进行索引

这两种选择都依赖于该`_source`字段的存在。存储源可以被禁用，如果你禁用它，你当然会失去这个伟大的功能。

# python - 修改当前代码

> ID：15161908
> 
> 赞同：1
> 
> 时间：2013-03-01T16:06:17.110
> 
> 标签：python, loops

我的下一个任务是修改当前代码。在之前的练习中，我编写了一个涵盖数字猜谜游戏的基本应用程序。代码如下： -

```
# Guess My Number
#
# The computer picks a random number between 1 and 100
# The player tries to guess it and the computer lets
# the player know if the guess is too high, too low
# or right on the money

import random  

print("\tWelcome to 'Guess My Number'!")
print("\nI'm thinking of a number between 1 and 100.")
print("Try to guess it in as few attempts as possible.\n")

# set the initial values
the_number = random.randint(1, 100)
guess = int(input("Take a guess: "))
tries = 1

# guessing loop
while guess != the_number:
    if guess > the_number:
        print("Lower...")
    else:
        print("Higher...")

    guess = int(input("Take a guess: "))
    tries += 1

print("You guessed it!  The number was", the_number)
print("And it only took you", tries, "tries!\n")

input("\n\nPress the enter key to exit.") 
```

我的任务是对此进行修改，以便在将失败消息提供给用户之前进行有限的运行次数。到目前为止，本章已经涵盖了“if、elif、else、for、循环，避免无限循环”。因此，我只想限制我对这些概念的回应。下一章将介绍 for 循环。

**我尝试了什么？**

到目前为止，我已经尝试在另一个 while 循环中使用 5 go 和ries 变量来修改块，但它似乎不起作用。

```
# guessing loop
while tries < 6:
    guess = int(input("Take a guess: "))
    if guess > the_number:
        print("Lower...")
    elif guess < the_number:
        print("Higher...")
    elif guess == the_number:
        print("You guessed it!  The number was", the_number)
        print("And it only took you", tries, "tries!\n")
    break
    tries += 1

input("You didn't do it in time!")
input("\n\nPress the enter key to exit.") 
```

任何指针或突出显示我错过的内容将不胜感激，以及对我错过的任何解释。教自己以编程方式思考也被证明很棘手。

**什么不起作用** 当我运行它时，循环条件似乎不起作用。我的闲置反馈如下。

这意味着我的问题可以概括为我的循环逻辑在哪里损坏？

```
>>> ================================ RESTART ================================
>>> 
    Welcome to 'Guess My Number'!

I'm thinking of a number between 1 and 100.
Try to guess it in as few attempts as possible.

Take a guess: 2
Take a guess: 5
Higher...
You didn't do it in time!

Press the enter key to exit. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T16:08:10.110

问题是您的`break`声明没有缩进包含在您的`elif`：

```
elif guess == the_number:
    print("You guessed it!  The number was", the_number)
    print("And it only took you", tries, "tries!\n")
break 
```

因此，循环总是在第一次迭代后停止。缩进`break`要包含在的中`elif`，它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T16:10:11.333

休息不是有条件的。在它之前添加一个选项卡。

# php - 带有 php 数组和特定计数的嵌套 ul li

> ID：15161913
> 
> 赞同：0
> 
> 时间：2013-03-01T16:06:42.617
> 
> 标签：php, arrays

我在一个数组中有 10 个用户：

```
$array = array(
    "aaa",
    "bbb",
    "ccc",
    "ddd",
    "eee",
    "fff",
    "ggg",
    "hhh",
    "iii",
    "jjj",
); 
```

我想显示基于 5 个或更少用户的列表，例如：

```
<ul>
    <li>
        <ul>
            <li>aaa</li>
            <li>bbb</li>
            <li>ccc</li>
            <li>ddd</li>
            <li>eee</li>
        </ul>
    </li>
    <li>
        <ul>
            <li>fff</li>
            <li>ggg</li>
            <li>hhh</li>
            <li>iii</li>
            <li>jjj</li>
        </ul>
    </li>
</ul> 
```

目前我有：

```
<ul>
<?php foreach($users as $user): ?>
    <li><?php echo $user ?></li>
<?php endforeach; ?>
</ul> 
```

但是我不是在创建内部 uls。解决这个问题的最佳方法是什么？使用 for 循环并数出 5？或者有没有更简洁的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T16:15:58.160

用于[`array_chunk()`](http://php.net/manual/en/function.array-chunk.php)将数组拆分为具有指定项数的多个数组。

```
<ul>
<?php
$users = array_chunk($array, 5);
foreach ($users as $user) {
    echo "<li><ul>";
    foreach ($user as $idv) {
        echo "<li>" . $idv . "</li>";
    }
    echo "</ul></li>";
}
?>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T16:23:21.763

寻找替代解决方案:)

```
<li>
 <ul>
     <?php
        echo '<li>'.join('</li><li>',array_slice($array,0,5)).'</li>';
    ?>
 </ul>
</li>

<li>
 <ul>
   <?php
       echo '<li>'.join('</li><li>',array_slice($array,5,10)).'</li>';
  ?>
</ul>
</li> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T16:41:07.023

```
<ul>
<?php 
$lenght = count($users);
for( $i=0; $i<$lenght; $i++ ){
if( $i%5 == 0 ){ 
   echo '<li><ul>';
}
echo '<li>'.$users[0].'</li>';
if( $i%5 == 4 || ($i+1==$lenght) ){ 
    echo '</ul></li>';
}
}?>
</ul> 
```

# c++ - 创建标题中带有时间戳的文本文件

> ID：15161914
> 
> 赞同：2
> 
> 时间：2013-03-01T16:06:44.317
> 
> 标签：c++, timestamp, text-files, fstream, datestamp

我正在尝试编写一个在单独的文本文件中输出大量数据的程序。我希望每个文件的标题是*Poker_Log_timestamp_datesamp.txt* 但是，它实际上并没有创建文件，也不会抛出任何错误！

这是代码：

```
#include <fstream>
#include <iostream>
#include <ctime>
#include <string>
using namespace std;

int main(){
    char sdate[9];
    char stime[9];
    fstream log;
    _strdate_s(sdate);
    _strtime_s(stime);
    string filename = "Poker_Log_";
    filename.append(stime);
    filename.append("_");
    filename.append(sdate);
    filename.append(".txt");
    cout<<"Filename == "<<filename<<endl;
    log.open(filename.c_str());
    log<<"\n\nHuman won the tournament.\n";
    log.close();
    system("Pause");
} 
```

我该如何进行这项工作？另一件事：如果我注释掉`filename.append(stime)`and `filename.append(sdate)`，它工作正常。

已解决：D 文件名不能有任何斜杠或冒号，所以我将它们都替换为破折号。这是工作代码：

```
#include <fstream>
#include <iostream>
#include <ctime>
#include <string>
#include <cstdio>

using namespace std;

int main(){
    char sdate[9];
    char stime[9];
    ofstream log;
    _strdate_s(sdate);
    _strtime_s(stime);
    string filename = "Poker_Log_";
    filename.append(stime);
    filename.append("_");
    filename.append(sdate);
    filename.append(".txt");
    for(int i = 0; i<filename.length(); ++i){
        if (filename[i] == '/' || filename[i] == ':')
            filename[i] = '-';
    }
    log.open(filename.c_str());
    if (log.fail())
        perror(filename.c_str());

    log<<"\n\nHuman won the tournament.\n";
    log.close();
    system("Pause");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T17:30:23.177

日期和时间字符串中可能包含可能不是文件系统合法字符的字符（如冒号）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T16:12:07.687

使用以下内容：

```
 log.open(filename.c_str()); 
```

该`open`方法需要一个`char *`，也就是一个 C 风格的字符串，而不是一个 C++ `std::string`。

# wcf - IISExpress: Unable to automatically step into the server. the remote procedure cannot be debugged

> ID：15161916
> 
> 赞同：1
> 
> 时间：2013-03-01T16:06:50.517
> 
> 标签：wcf, web-services, visual-studio, asmx, iis-express

I'm hosing a webservice in IISExpress and can browse to the endpoint using my browser so I know its alive. I'm writing a test application in WinForms and want to call a method on the service.

When I try and step into the call, I get this error.

**IISExpress: Unable to automatically step into the server. the remote procedure cannot be debugged.**

The webservice is set to be in debug mode, I'm wondering is there some setting which is preventing IISExpress from allowing debugging?

**Update:** I'm wondering if this is because the Test app doesn't have any .pdb files loaded into memory as these are stored elsewhere within the webservice folder, NOT the test app bin folder. I've tried to specify the folder of the bin folder where the app_code.pdb is located for the webservices, but still not luck.

So how is this done? I'm stumped.

**Update 2:** Still haven't been able to get this to work after a week of looking into it.

So here are my basic requirements: I need a 1) WinForms app to 2) be able to make calls to different webservices and 3) be able to step into each service call. The services are hosted as sub-applications of a root website using IISExpress. The WinForm test app is making the web service calls, but IISExpress is started via a Nant task. The webservices are old web site type projects, so they have app_code.dll files. I've tried setting symbol paths up to point to the built pdb file, but I then get an error along the lines of:

"A matching symbol file was not found in this folder".

I never thought debugging webservices would be this difficult?!?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:36:43.803

1) Reference the DLL of your webservice in your test project.

2) IISExpress is a completely different application then your winforms application, just having the DLLs referenced still won't automatically allow you to step into your web service code. You need to attach to the IISExpress.exe process. When you start your winforms project, Hit Debug...Attach to Process and choose IISExpress.exe. *Now* you should be able to actually step into your web service code.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-02T13:11:20.167

我意识到这是一个较晚的响应，但这是我遇到的问题（尤其是在长时间离开 WCF 项目之后）。

确保在“服务器端”服务类代码中设置断点……而不是在“客户端”调用代码中。这样服务器端服务将必要的调试信息（您的断点）编译到服务器上的 .pdb 文件中。

# git - 多个大型开发分支的 Git 与 Subversion

> ID：15161919
> 
> 赞同：3
> 
> 时间：2013-03-01T16:06:59.590
> 
> 标签：git, svn, continuous-integration, workflow

在我的公司，我们目前正在使用 Subversion。我们的项目开发过程包括一个“实时”代码分支（这是我们实时 Web 服务器上的代码）、一个用于较小项目的通用开发分支，然后每个较大的项目都有自己独立的分支。在任何给定时间，我们通常至少有 2 个更大的项目正在开发中。将它们合并回实时分支可能会很痛苦，但更痛苦的是，当大型项目 1 上线时，大型项目 2 将在稍后上线，而合并过程只是……混乱。

我在 SVN 中所做的就是每天从实时（因此发生的任何错误修复等）合并到开发分支。但是更大的项目合并过程仍然很混乱，我想知道它是否会用 Git 更干净。作为 SVN 发生的“坏”事件的一个例子，我们将在 dev 上拥有一个小功能，将其合并到 live，然后在执行 live backmerge 时，SVN 尝试再次将该功能合并回 dev（导致冲突），除非我们在合并中手动取消选择该提交。据我了解，Git 足够“聪明”，可以知道提交起源于 dev，因此它不会尝试将其合并回......但我的理解可能是错误的。我还听说 Git 更擅长自动处理我们正在尝试做的复杂合并。

所以，第一个问题是：对于我们正在做的事情，Git 是否明显优于 SVN，还是我们仍然可能遇到同样的问题和毛茸茸的合并？

第二个问题：是否有其他集成方法可能更适合我们的场景？特别是，我正在阅读一篇关于[混杂集成](http://agile.dzone.com/news/promiscuous-integration-vs)的文章，该文章看起来不错，尽管同时进行的项目越多，这似乎也会变得越来越困难。但话又说回来，我不希望我们同时拥有三个以上的大型项目，通常只有两个。对于我们的许多项目来说，持续集成并不是一种选择，因为它们往往是全有或全无的项目，或者如果部分推进的话会令用户感到不安（例如，我们最近重新设计了我们的结帐流程）。 [对于我们的情况，这篇文章](http://nvie.com/posts/a-successful-git-branching-model/)似乎也是一个很好的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T16:34:18.517

我们让人们使用他们觉得最舒服的任何工具。git-svn 为更熟悉或想要学习 git 以进行专业发展的人们提供了 git-lite 体验。有一个名为[SubGit](http://subgit.com/)的项目，它可以让您拥有 SVN 和 Git 供任何想要使用的人使用。

一般来说，根据特性分支开发风格进行大量分支/合并的人往往更喜欢 git。几个团队成员独立于团队其他成员进行协作的开销也少了很多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T16:19:04.920

试试 git，你不会回去的。

我会说只有在你不进行任何合并的情况下才坚持使用 Svn（即在一个小团队中的主干上工作）。所有其他情况，包括你的情况——git 会让你的生活更轻松。

在分支、合并和解决冲突方面，Git 比 SVN 好得多。例如，考虑 SVN“每个分支一个结帐目录”场景。此外，git 在合并/分支方面要好得多，以至于有些人正在使用 git-svn 来合并 SVN 分支。想象一下，反过来...

此外，[这个答案](https://stackoverflow.com/a/531042/760757)非常适合解释 Git 与 SVN。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-01T18:38:02.617

“Git 有一条学习曲线”——没错。另一方面，在学习曲线之后，开发人员开始更好地理解源代码控制系统的概念。他们变得更有条理，以更实际的方式做事。

是的，如果您需要将存储库从 Subversion 迁移到 Git，您的分支布局将有所不同（除其他外）。但历史都会在那里。

学习曲线通常较慢的一个原因是很多命令具有不同的名称，并且需要一些时间来理解它。

Git 不适用于大型存储库（就数据而言）。但是，您始终可以模块化系统并提取其中的一部分。这个概念的好处通常没有被很好地理解（在拥有大量糟糕的遗留设计的公司和公司中），以便得到足够的赞赏。如果您有一个巨大的存储库（例如在 SVN/Perforce 等下通常是这种情况），那么您将所有项目的所有代码都放在一个地方。但是，Git 允许您将项目的整个历史记录保存在本地克隆中。想象一下，如果您已将所有内容正确模块化——您可以将模块的完整历史记录为单个实体。Git 遵循的原则是每个项目都应该有一个存储库（至少大多数人是这样采用的）。维护一小棵代码树总是更简单、更快、更整洁。分支、合并、重写历史、将目录及其历史提取到单独的新存储库中……所有这一切都非常简单。

Git 是你绝对应该尝试的东西。即使你害怕它。阅读 ProGit 书。它很好，并且有很好的例子和解释。你会很快发现 Subversion 的局限性。我从早期开始使用 CVS，然后迁移到 Subversion 并管理它多年。当我开始与 git 打交道时（一旦我读过这本书），我真的意识到这个版本控制是多么聪明。

真的，如果您尝试并为此付出一些时间，那么您将没有回头路。

如果您想开始并快速学习它，我建议您在 GitHub 中建立一个项目并尝试一下。他们有很好的解释让你快速入门。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T16:13:14.677

我想如果你习惯了 SVN，请继续使用它。Git 非常好，但你仍然有学习曲线，开始使用它会造成破坏。Svn 工作得很好，所以也许你可以改进你公司的“分支”和“项目”的结构。听起来您遇到了与该工具无关的结构性问题。无论如何，这只是我的拙见。我希望它有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-02T06:23:51.573

> 较大的项目合并过程仍然很混乱，我想知道使用 Git 是否会更干净。

不。您的问题（大多数情况下，我可以理解过程）不在于使用的工具，它们是开发过程的组织和管理方面的**更重**的问题。改变工具不会破坏坏习惯。

你的主要问题不是“糟糕的合并”（顺便说一句，我从未见过描述过“奇怪的反向合并”，同时使用同步合并到分支 - 稍后将这些分支合并到主干），而是“头脑中的混乱”。Git-merge（通常）更健壮，但你会踩到其他耙子，这在 Git 中要多得多

# ios - 表达式不可分配，来自 MKAnnotation 类委托的坐标属性

> ID：15161923
> 
> 赞同：4
> 
> 时间：2013-03-01T16:07:10.120
> 
> 标签：ios, xcode, compiler-errors, mkannotation

我做了这个模式是为了更好地解释我的麻烦。

![在此处输入图像描述](../Images/cdf0f484ffffd43152d45aa18f1c3611.png)

那么，我能做些什么来解决它呢？谢谢你=)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T16:16:42.727

改变：

```
puntoXML.coordinate.latitude = [valor floatValue]; 
```

到：

```
CLLocationCoordinate2D coord = puntoXML.coordinate;
coord.latitude = [valor floatValue];
puntoXML.coordinate = coord; 
```

对`longitude`. 另请注意，您需要在`if`语句中添加花括号。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T16:16:57.980

是`CLLocationCoordinate2D`一个`struct`，即一个值类型。它是按值传递的，这是“复制”的另一种说法。如果您分配其字段（例如经度），那么所有要做的就是修改*副本*；`coordinate`你里面的原件`Annotation`会保持原样。这就是为什么该财产不可转让的原因。

要解决此问题，您应该为纬度和经度添加单独的属性，并改为使用它们：

```
@interface Annotation : NSObject<MKAnnotation>
    @property (readwrite) CLLocationDegrees latitude;
    @property (readwrite) CLLocationDegrees longitude;
    @property (nonatomic,assign) CLLocationCoordinate2D coordinate;
    ...
@end

@implementation Annotation
    -(CLLocationDegrees) latitude {
        return _coordinate.latitude;
    }
    -(void)setLatitude:(CLLocationDegrees)val {
        _coordinate.latitude = val;
    }
    -(CLLocationDegrees) longitude{
        return _coordinate.longitude;
    }
    -(void)setLongitude:(CLLocationDegrees)val {
        _coordinate.longitude = val;
    }
@end 
```

现在您的 XML 解析器代码可以执行此操作：

```
if ([llave isEqualTo:@"lat"]) {
    puntoXML.latitude = [valor doubleValue];
} else if ([llave isEqualTo:@"lon"]) {
    puntoXML.longitude = [valor doubleValue];
} ... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-01T16:18:11.893

问题是您正在分配`CLLocationCoordinate2D`带有纬度/经度的副本。

`puntoXML.coorinate`返回一个`CLLocationCoordinate2D`（副本），因此分配`latitude`将无效。

相反，您需要`CLLocationCoordinate2D`使用新的纬度和经度创建一个完整的并一次性设置。

**编辑**最好仍然为纬度/经度提供单独的属性，并为每个在`coordinate`实例变量中设置其值的自定义设置器。

# javascript - Jasmine shared specs scoping issues with coffeescript

> ID：15161926
> 
> 赞同：6
> 
> 时间：2013-03-01T16:07:30.540
> 
> 标签：javascript, coffeescript, tdd, jasmine

I'm attempting to DRY up some jasmine tests by extracting out shared examples.

```
@sharedExamplesForThing = (thing) ->
  beforeEach ->
    @thingy = new thing

  it "is neat", ->
    expect(@thingy.neat).toBeTruthy()

describe "widget with shared behavior", ->
  sharedExamplesForThing(-> new Widget) 
```

This works nicely when everything is defined in one file. The problems I'm encountering occur when I try to move the sharedExamples to a separate file. I get `Can't find variable: sharedExamplesForThing ...`

So in the interest of debugging, I tried the following:

```
describe "widget with shared behavior", ->
  it "is acting like a meany", ->
    console.log sharedExamplesForThing
    expect(false).toBeTruthy()
  sharedExamplesForThing(-> new Widget) 
```

In the `is acting like a meany` block, the log shows `sharedExamplesForThing` as `[Function]` but I still get the `Can't find variable` outside the `it`. I feel like this might have something to do with a scoping issue outside of my current experience, but I could be completely wrong about that. What am I missing here?

(using rails, jasminerice, guard-jasmine)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-28T00:39:32.737

我发现关于[thoughtbot 共享示例的文章](http://robots.thoughtbot.com/post/9611103221/jasmine-and-shared-examples)非常有用。

我在*coffeescript*中实现它如下：

1）在所有规范文件之前加载的一些帮助文件中：

```
window.FooSpec =
  sharedExamples: {}

window.itShouldBehaveLike = (->
  exampleName      = _.first(arguments)
  exampleArguments =
    _.select(_.rest(arguments), ((arg) => return !_.isFunction(arg)))
  innerBlock       = _.detect(arguments, ((arg) => return _.isFunction(arg)))
  exampleGroup     = FooSpec.sharedExamples[exampleName]

  if(exampleGroup)
    return describe(exampleName, (->
      exampleGroup.apply(this, exampleArguments)
      if(innerBlock) then innerBlock()
      )
    )
  else
    return it("cannot find shared behavior: '" + exampleName + "'", (->
      expect(false).toEqual(true)
      )
    )
) 
```

2）对于我的规格：

(a) 我可以定义一个共享行为：

```
FooSpec.sharedExamples["had a good day"] = (->
  it "finds good code examples", ->
      expect(this.thoughtbot_spy).toHaveBeenCalled()
) 
```

(b) 并在某些规范中的任何地方使用它：

```
itShouldBehaveLike("had a good day") 
```

（注意：我假设规范`this.thoughtbot_spy`在上述行之前已相应定义）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T19:59:09.127

当您在 CoffeeScript 中分配顶级成员变量时，它被分配为全局对象的属性（`window`在浏览器中）。因此它会生成以下 JavaScript：

```
window.sharedExamplesForThing = ...; 
```

这意味着您可以在文件外部将其引用`window.sharedExamplesForThing`为`sharedExamplesForThing`. 因此，假设已在规范文件之前加载了共享示例文件，那么您所做的应该可以工作。我认为您遇到的问题是首先加载了规范文件（因为在加载文件时运行描述函数，而在加载所有文件后运行函数）。所以你可能需要调整加载顺序，你可以尝试将你的共享示例文件放在一个`support`目录中，然后首先需要它。

与其将变量直接分配给窗口对象，不如设置一个命名空间以将共享变量导出到其中（这样您就不会弄乱全局对象）：

```
window.MyNamespace = {}

MyNamespace.sharedExamplesForThing = ... 
```

然后在您的规范文件中，您可以将其称为`MyNamespace.sharedExamplesForThing`.

我发现查看生成的 JavaScript 有助于了解 CoffeeScript 如何在文件之间导出变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T19:07:05.413

这是我写的关于如何最好地做共享示例的博客文章。希望这可以帮助。

[http://pivotallabs.com/drying-up-jasmine-specs-with-shared-behavior/](http://pivotallabs.com/drying-up-jasmine-specs-with-shared-behavior/)

# django - ChoiceField 的 CBV Django 表单视图集数据

> ID：15161927
> 
> 赞同：1
> 
> 时间：2013-03-01T16:07:31.483
> 
> 标签：django, django-forms, django-views

我正在使用 Django 表单视图，我想将每个用户的自定义选项输入到我的`Choicefield`.

我怎样才能做到这一点？

我可以使用这个`get_initial`功能吗？我可以覆盖该字段吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:27:12.347

当我想更改有关表单的某些内容时，例如标签文本、添加必填字段或过滤选项列表等。我遵循使用 ModelForm 并向其中添加一些实用程序方法的模式，其中包含我的覆盖代码（这有助于保持`__init__`整洁）。然后调用这些方法`__init__`以覆盖默认值。

```
class ProfileForm(forms.ModelForm):
    class Meta:
        model = Profile
        fields = ('country', 'contact_phone', )

    def __init__(self, *args, **kwargs):
        super(ProfileForm, self).__init__(*args, **kwargs)

        self.set_querysets()
        self.set_labels()
        self.set_required_values()
        self.set_initial_values()

    def set_querysets(self):
        """Filter ChoiceFields here."""
        # only show active countries in the ‘country’ choices list
        self.fields["country"].queryset = Country.objects.filter(active=True)

    def set_labels(self):
        """Override field labels here."""
        pass

    def set_required_values(self):
        """Make specific fields mandatory here."""
        pass

    def set_initial_values(self):
        """Set initial field values here."""
        pass 
```

如果这`ChoiceField`是您要自定义的唯一内容，那么这就是您所需要的：

```
class ProfileForm(forms.ModelForm):
    class Meta:
        model = Profile
        fields = ('country', 'contact_phone', )

    def __init__(self, *args, **kwargs):
        super(ProfileForm, self).__init__(*args, **kwargs)

        # only show active countries in the ‘country’ choices list
        self.fields["country"].queryset = Country.objects.filter(active=True) 
```

然后，您可以让您的 FormView 使用此表单，如下所示：

```
class ProfileFormView(FormView):
    template_name = "profile.html"
    form_class = ProfileForm 
```

# ruby - Capistrano: create tasks with roles did not work

> ID：15161931
> 
> 赞同：0
> 
> 时间：2013-03-01T16:07:41.207
> 
> 标签：ruby, capistrano

I try to create tasks with different roles :

```
namespace :foo do
  task :mytasks, :roles => [:a, :b,] do
    task_a
    task_b
  end

  task :task_a, :roles => :a do
    run 'echo A'
  end

  task :task_b, :roles => :b do
    run 'echo B'
  end
end 
```

When i execute 'mytasks' here is the result :

```
$ cap -n ROLES=b foo:mytasks
  * 2013-03-01 16:59:14 executing `foo:mytasks'
  * executing "echo A"
  * executing "echo B" 
```

All tasks get executed, why ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T06:57:38.600

[Capistrano 角色](https://github.com/capistrano/capistrano/wiki/2.x-DSL-Configuration-Roles-Role)旨在将给定服务器（或多个服务器）与特定功能相关联，例如说“machine-a”是 Web 服务器，而“machine-b”是数据库服务器，这很有用，因为某些任务只需要在某些机器上执行。

因此，角色并不是一种在您运行 Capistrano 时有条件地选择在哪些机器上运行任务的方法，它们只是选择应该在哪些机器上运行哪些任务。

但是，您可能正在寻找另一个名为[Multistage的 Capistrano 功能。](https://github.com/capistrano/capistrano/wiki/2.x-Multistage-Extension)它允许您根据要部署到的“阶段”指定不同的服务器集（甚至将它们与不同的角色相关联）。因此，您可以有**a**和**b**阶段，每个阶段都有单独的服务器集，您可以使用以下方法进行部署：

```
cap a foo:mytasks
cap b foo:mytasks 
```

# c++ - Hiding an element using Qt

> ID：15161935
> 
> 赞同：2
> 
> 时间：2013-03-01T16:07:54.780
> 
> 标签：c++, qt, qlayout

I'm trying to hide a QDoubleSpinBox in a Qt interface program, using c++.

I have found the function hide(), but it is not working as I expected, since when I hide the element, the space it used to occupy, is not taken into account, so all my window turns crazy. I was wondering if there is any function to hide and keep the space occupied, like if it is normal. I thought that maybe would be a function like this because is common in other frameworks or even JavaScript.

If there is not... any solution?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T16:11:24.220

这是因为布局。当您添加/删除或显示/隐藏元素时，布局会自动重新计算。您可以选择不使用布局。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T16:16:53.390

您可能还想尝试将不透明度设置为 0.0，而不是隐藏 QDoubleSpinBox。

```
mySpinBox.setWindowOpacity(0.0); 
```

实际上，我认为这行不通。

我能想到的最简单的事情是继承 QDoubleSpinBox，然后用您自己的变量覆盖要打开和关闭的绘制函数（可能还有鼠标处理）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T08:58:27.513

一个相当快速但不优雅的解决方案是对所需的小部件进行子类化，添加一个额外的 bool 以使小部件不可见而不删除其几何形状和切换它的方法，并在重载的绘制事件中，如果 bool 为真，则调用来自基类的原始绘制事件，否则不绘制任何东西。这将导致一个仍然接受事件的完全透明的小部件，这就是为什么您也可以使用`setEnabled()`bool 来在隐藏时禁用它。

当您想要隐藏和显示许多对象时不太适用，但在一个或两个的情况下它可以工作并且非常快速地实现。

# c - Is the offset of a pair variable/structure ever the same?

> ID：15161936
> 
> 赞同：2
> 
> 时间：2013-03-01T16:07:55.243
> 
> 标签：c, pointers, struct

suppose I have this

```
typedef struct{
  int n;
  double* x;
}array;

array a;
double* a_;

array b;
double* b_; 
```

Is `&a_-&a == &b_-&b`, and so on for every couple array/double*?

In the negative case, how is possible to ensure this?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T16:10:07.613

您不能依赖具有任何特定关系的单独变量的地址。此外，您不能有效地将地址减去不同的变量。

也许如果你能澄清你*为什么*想要这个（你想做什么？）它可能会真正提供帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T16:12:55.310

不，一些编译器会将“小”变量放在与大型结构\数组不同的位置。

为了保持在一起，声明一个结合了 2 个元素的结构......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T16:11:05.083

编译器可以自由地在变量之间添加填充字节。一般来说，这将取决于您的数据的对齐方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T16:13:46.603

我认为它取决于编译器，并且局部变量的顺序在规范中没有固定。

您可以尝试创建一个用 a 包装这些成员的结构，`#pragma pack`以避免编译器最终添加任何填充字节。

# javascript - Too much Recursion calling a method of the same name

> ID：15161940
> 
> 赞同：1
> 
> 时间：2013-03-01T16:08:24.113
> 
> 标签：javascript

Consider the following code snippet...

```
 this.destroy = function () {
    var grid= $("#gridObject").data("uiMyGrid");
    grid.destroy();
 } 
```

When i call .destroy() on the parent object it seems to be going into a recursive loop. (Too much recursion).

I debugged a while and notice it is calling itself rather than the grid objects destroy method? How can i make it call the grid destroy?

I am sure i am missing something here.. What is it?

# jquery - 加载 Ajax 内容后 Jquery 悬停不起作用

> ID：15161947
> 
> 赞同：10
> 
> 时间：2013-03-01T16:08:49.500
> 
> 标签：jquery

我遇到了一个问题，我的悬停事件在 ajax 加载后不起作用，它只适用于初始页面加载......这是我目前使用的代码：

```
 $(".table tbody tr").hover(
        function () {
            $(this).children('td').children('.operation').children('.btn-group').fadeIn();
        },
        function () {
            $(this).children('td').children('.operation').children('.btn-group').fadeOut();
        }
    ); 
```

我知道我需要使用 $(document).on() 作为选择器，但我不确定执行原始代码功能的正确语法。任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-01T16:14:19.333

**解决方案**

[来自评论](https://stackoverflow.com/questions/15161947/jquery-hover-not-working-after-ajax-content-is-loaded/15162051#comment21352400_15162051)的海报自己的解决方案。是的，`document`（或任何不受 ajax 调用影响的祖先）必须使用。

```
$(document).on({
    mouseenter: function () {
        $(this).find('.btn-group').fadeIn();
    },
    mouseleave: function () {
        $(this).find('.btn-group').fadeOut();
    }
}, '.table tbody tr'); 
```

**原来的**

```
$(".table tbody").on("hover","tr",
    function () {
        $(this).children('td').children('.operation').children('.btn-group').fadeIn();
    },
    function () {
        $(this).children('td').children('.operation').children('.btn-group').fadeOut();
    }
); 
```

**编辑**

没错，`hover`是老派，我猜在这种情况下不起作用！试试这个：

```
$(".table tbody").on({
    mouseenter: function () {
        $(this).children('td').children('.operation').children('.btn-group').fadeIn();
    },
    mouseleave: function () {
        $(this).children('td').children('.operation').children('.btn-group').fadeOut();
    }
},'tr'); 
```

而且我不确定你在做什么，但这可能更短：

```
$(".table tbody").on({
    mouseenter: function () {
        $(this).find('.btn-group').fadeIn();
    },
    mouseleave: function () {
        $(this).find('.btn-group').fadeOut();
    }
},'tr'); 
```

# javascript - JQUERY slider mad

> ID：15161948
> 
> 赞同：0
> 
> 时间：2013-03-01T16:08:49.807
> 
> 标签：javascript, jquery, slider

the site is [http://www.quadrifoglio4.it/index.php/quadrifoglio4/gallery.html](http://www.quadrifoglio4.it/index.php/quadrifoglio4/gallery.html)

the slide when slide 12 or 13 pics, not work fine, the left value of animate set to 0 and to good position.. the code is:

```
ogreGalleryStart = window.setInterval(function(){
            var ogreGalleryRailCurrentPosition = __jQuery__('#ogreRail').position();
            __jQuery__('.preloadThis').css('display','none');
            __jQuery__('#ogreRail').animate({
                left: eval(ogreGalleryRailCurrentPosition.left-__jQuery__('#ogreRail > .ogreDrawer').eq(0).outerWidth(true))+'px'
            }, 500, function(){
                var ogreGalleryRailCurrentPosition = __jQuery__('#ogreRail').position();
                if (ogreGalleryRailCurrentPosition.left <= -eval(__jQuery__('#ogreRail').outerWidth(true)-__jQuery__('#ogreRail > .ogreDrawer').eq(0).outerWidth(true))) {
                    __jQuery__(this).css({
                        'left': '0px'
                    });
                }
            });
        }, 4000); 
```

why?

# ruby-on-rails - Rails and factory patterns

> ID：15161950
> 
> 赞同：0
> 
> 时间：2013-03-01T16:08:54.300
> 
> 标签：ruby-on-rails, design-patterns, erb, restful-architecture

Imagine a Rails project that looks up animal celeberties based on their names. This Rails app is backed by an external service that does the actual lookup. The service returns back results based on a key. For example, if I make a request to this external api like [GET] /animal?name=benji, I would get back something like {"type":"dog", "legs":"4", "tail-length":"short", "collar":"blue"}. However, if I pass in ...?name=flipper to the animal endpoint, I would get back {"type":"dolphin", "color":"gray", "food":"fish"}. (The data is returned in actual JSON or XML. I am just using pseudo code here to communicate the point.)

My first question is this... Given that the attributes of the return call vary based on data which is passed in, when unmarshaling a response (for lack of a better term) into a "model" object, does it make sense to implement some type of factory pattern (ala Design Patterns in Ruby, by Russ Olsen, Chapter 13) to create objects of an appropriate class? Are there other approaches that would make sense?

My next question is this, lets say that I want to display a list of all animals on a web page (using ERB templates.) Does it make sense to create different partial templates (eg _dolphin.html.erb and _dog.html.erb) and then put a *case* in the main list view that can deligate rendering each list item to an appropriate template.

For example:

list.html.erb...

```
 <ul>
  <% for animal in @animals.each %>
     <li>   
        <% if animal.type == 'dog' %>
          <%= render :partial => 'dog', :locals => {:animal => animal} %>
        <% elsif item.type == 'dolphin' %>
          <%= render :partial => 'dolphin', :locals => {:animal => animal} %>
        <% else %>
          <%= render :partial => 'generic_animal', :locals => {:animal => animal} %>
        <% end %>
      </li>          
  <% end %>
  </ul> 
```

(Here animal.type=='dog' is intentional. I am not using a symbol (:dog) because the data returned back from the API is a string value, and it is used to populate the animal.type attribute. Bad, I know.)

The project that I am working on is using this approach right now. (Obivously, I have changed the elements/domain.) I am wondering if this is a valid approach, and/or if others have dealt with similar problems and how they went about it.

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:13:34.407

我会说创建一个包含所有可能属性的单个模型和一个视图（不能是无限数；））。

然后你有一个

```
if attribute_x exists then
  display it
end

if attribute_y exists then
  display it
end 
```

对于每个属性。

如果你为每只动物创建一个视图，这根本不会是 DRY，因为你会重复自己很多次，只知道每只动物都有最喜欢的食物和颜色等。另一个原因：如果 API 发生变化一点点，动物会聚集或失去你必须适应这种变化的属性。

只有一种观点，这一切都会好起来的。

如果你想非常确定你收集了所有属性，你可以在你的控制器中放置一个所有已知属性的数组，如果有未知的东西：将它写入日志文件。

* * *

如果您希望能够为某些动物显示完全不同的东西，我只会选择“每只动物一个视图”的方式。但是你也可以告诉你的控制器，如果`name = 'Donkey Kong'`. 你知道我的意思。

# bash - Bash/Shell 脚本 - 算术运算符失败

> ID：15161951
> 
> 赞同：0
> 
> 时间：2013-03-01T16:08:56.387
> 
> 标签：bash, shell, math

如果 CPU 负载超过一定的限制，我试图减慢我的无限循环，但是，它只是不能正常工作，下面是代码。if 条件总是结果为真

```
c=1
while [ $c -le 1 ]
do
#echo "Welcome $c times"
#php BALHABLH.php

IN=$(cat /proc/loadavg);

set -- "$IN"
IFS=" "; declare -a Array=($*)
echo "${Array[@]}"
echo "${Array[0]}"
echo "${Array[1]}"

#var = ${Array[1]}

x=$(expr "${Array[1]}" )

if [ $x > 0.91 ]
then
    echo "CPU LOAD > 0.91"
    sleep 2
fi

(( c++ ))
done 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T16:15:45.960

您需要`bc`用于浮点比较并`(( ... ))`用于算术表达式：

```
if (( $(bc -l <<< "$x > 0.91") == 1 )) 
```

也不要使用`cat`，使用：

```
IN=$(</proc/loadavg) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T16:33:07.997

Bash 不能使用浮点运算。你可以这样做：

```
if [ $( echo "$x > 0.91" | bc ) -eq 1 ]; then 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T16:14:49.533

Bash 只处理整数。要`bc`像这样处理浮动管道：

```
[ $(echo " $x > 0.91" | bc -l) -eq 1 ] 
```

`bc``1`如果比较为真，则返回。我们与 1 进行比较（使用 -eq 运算符）。

验证

```
$ cat test.sh
#!/bin/bash  
x="$1"
if [ $(echo " $x > 0.91" | bc -l) -eq 1 ]; then
   echo greater;
else 
   echo smaller;
fi
$ ./test.sh 0.5
smaller
$ ./test.sh 1.5
greater 
```

您还可以像这样简化脚本：

```
#!/bin/bash
c=10
for (( i=1;i<=c;i++ )); do
    load=$(awk '{print $2}' /proc/loadavg)
    echo "$i: load is $load"
    if (( $(echo "$load > 0.91" | bc) == 1 )); then
        echo "CPU LOAD > 0.91"       
        sleep 2
    fi
done 
```

# ruby - 字符串需要的正则表达式

> ID：15161958
> 
> 赞同：0
> 
> 时间：2013-03-01T16:09:07.340
> 
> 标签：ruby, regex

我正在尝试使用正则表达式解决以下问题。我的输入字符串是这样的

```
"MTSGNN0002(  1), MTSGNN0028( 645), MTSGNN0050(  10)" 
```

我想要这样的输出

```
"MTSGNN0002,MTSGNN0028,MTSGNN0050" 
```

它应该删除括号之间的所有字符。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T16:33:08.093

有时找到你想要的比删除你不想要的更简单：

```
s = "MTSGNN0002( 1), MTSGNN0028( 645), MTSGNN0050( 10)" 
s.scan(/MT\w+/).join(',')   # Change MT to whatever suits your data. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T16:20:08.963

干得好..

```
\([^\)]*\)|\s 
```

根据您的问题..上面替换了括号和里面的文本并删除了空格。

[示例和源演示：](http://rubular.com/r/oQ37XhpJEn)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T16:14:52.103

看看这个正则表达式：

```
([a-zA-Z0-9]*)\(.*\) 
```

[http://rubular.com/r/maZNs0mDkv](http://rubular.com/r/maZNs0mDkv)

从那里开始很容易;-)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-01T17:17:00.887

在这里，我还有一个解决方案

```
([(\b]\s.[0-9]*\b\)) 
```

[http://rubular.com/r/9NyoU3RKUT](http://rubular.com/r/9NyoU3RKUT)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T16:18:02.087

`\([ \d]+\)`用空字符串替换这个正则表达式的数学

# php - 在联系表格 7 中实施垃圾邮件拦截

> ID：15161961
> 
> 赞同：0
> 
> 时间：2013-03-01T16:09:19.617
> 
> 标签：php, wordpress, forms, contact

我目前正在考虑在表单的前端和后端添加一些代码，但我无法弄清楚如何去做。

这是前端代码

```
<li id="user"> <label for="username">Username</label> <input type="text" name="username"> </li> 
```

我将不显示任何内容并将其用作垃圾邮件机器人的蜜罐。

但是，我需要实现的下一段代码是：

```
<?php if( !isset($_POST['name'])) { die("No Direct Access"); } // Make sure the form has actually been submitted 
$name = $_POST['name']; 
$email = $_POST['email']; 
$spam = $_POST['username']; // This is our Honeypot field if($spam) { // If the Honeypot field has been filled in die("No spamming allowed bitch!"); } 
else { // Process the form like normal } ?> 
```

现在的重点是 $name 和 $email 是联系表 7 中的动态字段。我可以做些什么来使联系表 7 中的这些字段作为该脚本的 var 使用？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T19:23:11.810

在 /contact-form-7/includes/classes.php 中，您可以添加代码并将其标记为垃圾邮件（如果需要）。

函数 spam() 下的第 432 行添加类似于以下内容的行：

```
if (isset($_POST['username'])) {
    $spam = true;
} 
```

# c# - 在响应式扩展中实现 String Split() 运算符

> ID：15161962
> 
> 赞同：1
> 
> 时间：2013-03-01T16:09:22.440
> 
> 标签：c#, system.reactive

我希望能够解释传入的字符并“拆分”它们（在这种情况下，通过空格字符）。

```
var incomingCharacters = "This is a test".ToCharArray().ToObservable();

// Yields a sequence of words - "This", "is", "a", "test"
var incomingWords = incomingCharacters.Split(' '); 
```

我做了一个操作员来做这个，但我想知道是否有更好的方法？

```
public static IObservable<string> Split(this IObservable<char> incomingCharacters, char s)
{
    var wordSeq = Observable.Create<string>(observer =>
        {
            // Create an inner sequence to look for word separators; publish each word to the
            // "outer sequence" as it is found
            var innerSeq = incomingCharacters
                .Concat(Observable.Return(s))           // Enables the last word to be processed
                .Scan(new StringBuilder(), (builder, c) =>
                    {
                        if (c != s)
                        {
                            builder.Append(c);
                            return builder;
                        }

                        // We encountered a "split" character; publish the current completed word
                        // and begin collecting a new one
                        observer.OnNext(builder.ToString());
                        return new StringBuilder();
                    });

            innerSeq.Subscribe(list => { });

            return Disposable.Empty;
    });

    // Return the outer sequence
    return wordSeq;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T17:40:18.327

有一种更简单的方法可以使用`Buffer`：

```
public static IObservable<string> Split(
          this IObservable<char> incomingCharacters, 
          char sep)
{
    // Share a single subscription
    var oneSource = incomingCharacters.Publish().RefCount();

    // Our "stop buffering" trigger will be the separators
    var onlySeparators = oneSource
        .Where(c => c == sep);

    return oneSource
        // buffer until we get a separator
        .Buffer(onlySeparators)
        // then return a new string from the buffered chars
        .Select(carr => new string(carr.ToArray()));        
} 
```

测试：

```
void Main()
{
    var feeder = new Subject<char>();   
    var query = feeder.Split(' ');

    using(query.Subscribe(Console.WriteLine))
    {
        foreach(var c in "this should split words on spaces ".ToCharArray())
        {
            feeder.OnNext(c);
        }
        Console.ReadLine();
    }       
} 
```

输出：

```
this 
should 
split 
words 
on 
spaces 
```

编辑：一个基本的`BufferUntil`实现

```
public static class Ext
{
    public static IObservable<IList<T>> BufferUntil<T>(
         this IObservable<T> source, 
         Func<T, bool> predicate)
    {
        var singleSource = source.Publish().RefCount();
        var trigger = singleSource.Where(predicate);
        return singleSource.Buffer(trigger);
    }

    public static IObservable<string> Split(
       this IObservable<char> incomingCharacters, 
       char sep)
    {
        return incomingCharacters
             .BufferUntil(c => c == sep)
             .Select(carr => new string(carr.ToArray()));
    }
} 
```

# javascript - websockets（pusherapp）和主干何时更新视图？

> ID：15161966
> 
> 赞同：0
> 
> 时间：2013-03-01T16:09:35.903
> 
> 标签：javascript, backbone.js, requirejs, pusher

我已经在我的主干应用程序中包含了 Pusher，我想知道处理更新的正确方法是什么。目前，当在客户端修改模型时，会将 PUT 事件发送到服务器，服务器更新 DB 并触发客户端上的 Pusher 正在接收的更新事件。

我的问题：我应该立即在客户端上更新视图（以保持 snappy-nes）并且对启动客户端上的 Pusher 事件不执行任何操作，还是应该在 Pusher 的“更新事件”中更新我的视图？

注意：我最初的实现是在客户端模型的更改事件中更新视图。

# real-time - OpenGL 与 wxMathPlot 在 wxWidgets 中的实时绘图？

> ID：15161967
> 
> 赞同：1
> 
> 时间：2013-03-01T16:09:40.910
> 
> 标签：real-time, wxwidgets

我是使用 wxWidgets 的新手，我希望做一个连续的实时绘图。我对可用于 wxWidgets 的实时（连续）绘图工具进行了一些研究。我最感兴趣的是使用**mxMathPlot**进行绘图，并支持**mpFXYVector**输入点。（我也知道有 Numerix 库，但似乎没有太多文档）

但是，我想每秒进行大约**100 次更新**？或一秒钟内获得 100 个新积分。

使用带有 mpFXYVector 的 mxMathPlot 是否可行，或者这种方法是否太慢？

还是应该考虑 OpenGL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T16:34:52.367

使用 wxMathPlot 显示以 100 Hz 更新的实时数据图是可行的。

以下是使用三个 wxMathplot 实例的应用程序的屏幕截图，所有显示的数据都以 128Hz 更新

![在此处输入图像描述](../Images/5826d0bdfb83f121fb68a5caac70b0d5.png)

如果您想要一种实时图表，其中旧数据在左侧消失，而新数据出现在右侧，但显示的数据量在最后 10 秒是恒定的，那么 mpFXYVector 很难使用。有关如何处理此问题的讨论，请参阅[此答案。](https://stackoverflow.com/a/1589894/16582)

然而，对于第一次通过，这个框架应该让你开始

```
... in Myframe constructor

vector <double> xs, ys;
mpFXYVector * data_layer
mpWindow * graph;

// initialize

...

 // Set up 100 Hz timer

...

MyFrame::OnTimer( ... )
{

// add new data point(s)

 ...

// copy data into layer

data_layer.SetData(xs,ys);

// redraw

graph->Fit();

/*  Note that at this point we have requested a redraw
 But it hasn't taken place yet
 We need to return so that the windows system can update the screen etc
 We will back in 1/100 sec to do it all again.
 */

} 
```

所以，现在的问题是，我们能以多快的速度完成这个计划？我已经尝试了一个计时器事件处理程序，它只是跟踪它被调用的次数。

```
void MyFrame::OnTimer2(wxTimerEvent& )
{
    static int ticks = 0;
    ticks++;

    static clock_t start;
    if( ticks == 1 ) {
        start = clock();
    }
    if( ticks == 1000 ) {
        double duration = (double)(clock() - start) / CLOCKS_PER_SEC;
        wxMessageBox(wxString::Format("1000 ticks in %f secs\n",duration));
        myTimer->Stop();
        return;
    }

} 
```

在功能强大的台式机上，我能做到的最快速度是 66 Hz。

这有关系吗？

恕我直言，它没有。人眼无法欣赏以 100Hz 更新的图形。重要的是图表显示以 100Hz 采集的数据，没有任何损失或滞后，但图表显示不需要如此频繁地更新。

因此，在生成此答案顶部屏幕截图的应用程序和我开发的其他类似应用程序中，图表以 10Hz 更新，wxWidgets 框架可以轻松维护，并且数据采集发生在更高的频率在另一个线程或进程中的频率。图形显示代码每秒十次复制同时获取的数据并更新显示。

# cloud-foundry - 运行 UAA login.rb 示例时出错

> ID：15161969
> 
> 赞同：0
> 
> 时间：2013-03-01T16:09:41.590
> 
> 标签：cloud-foundry

我一直在调查一个 CF 部署方案，其中我有一个现有的身份验证基础结构，我需要配置 UAA 以将登录委托给现有的 SSO 权限。作为第一步，我决定使用 login.rb 示例服务器，只是为了让事情顺利进行。

我已经使用示例 login.rb 和在 localhost 上运行的示例应用程序以及在另一台主机上运行的 UAA 实例设置了我的环境。从应用程序到 localhost:3000 的登录页面的重定向工作正常，查看我的日志我可以看到当 login.rb 示例发布到 UAA 时（直通）身份验证成功，此外收到对授权的帖子的响应也给出了 200 OK....我可以看到正在返回带有所需提示字符串的 JSON。但是，erb 确认对话框出现问题。我在 login.rb 的第 124 行遇到异常

```
NoMethodError - undefined method `[]' for nil:NilClass:
    /home/fieldj1/Documents/workspace-sts-3.1.0.RELEASE/uaa/samples/login/login.rb:124:in `block in <class:LoginApplication>'
    /var/lib/gems/1.9.1/gems/sinatra-1.3.2/lib/sinatra/base.rb:1212:in `call'
    /var/lib/gems/1.9.1/gems/sinatra-1.3.2/lib/sinatra/base.rb:1212:in `block in compile!'
    /var/lib/gems/1.9.1/gems/sinatra-1.3.2/lib/sinatra/base.rb:785:in `[]'
    /var/lib/gems/1.9.1/gems/sinatra-1.3.2/lib/sinatra/base.rb:785:in `block (3 levels) in route!'
    /var/lib/gems/1.9.1/gems/sinatra-1.3.2/lib/sinatra/base.rb:801:in `route_eval'
 ... 
```

问题似乎是解析来自 UAA 的 JSON OAUTH 响应的代码已过时。我通过更改第 124 行来修复它：

```
erb :confirm, :locals => {:client_id => confirmation_info["authorizationRequest" ["clientId"], \
                          :scopes => confirmation_info["authorizationRequest"]["scope"]} 
```

对此：

```
erb :confirm, :locals => {:client_id => confirmation_info["auth_request"]["authorizationParameters"]["client_id"], \
                                :scopes => confirmation_info["auth_request"]["authorizationParameters"]["scope"]} 
```

有没有其他人看过这个？我相当确定我正在运行的代码应该是自洽的，因为我对整个 UAA 进行了 git 克隆。不确定我的环境是否不一致，或者我是否发现了真正的问题。

谢谢，约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T19:50:05.537

这是一个真正的问题，因为 ruby​​ 样本不是最新的，而且没有人愿意更新它，因为我们没有在任何地方使用它。如果您可以发送一个拉取请求，那就太棒了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T19:50:53.103

我们目前正在努力更新我们所有的文档和示例应用程序示例，您使用的登录 ruby​​ 示例应用程序当前已过时。欢迎您提出拉取请求。

同时，您可以查看新文档，它的工作正在进行中：[http](http://cloudfoundry.github.com/) ://cloudfoundry.github.com/ 。

谢谢， - Hitesh

# php - 更改日期格式 -PHP / SQL

> ID：15161974
> 
> 赞同：0
> 
> 时间：2013-03-01T16:09:56.020
> 
> 标签：php, mysql, date

我有一段涉及日期但想更改日期格式的代码；它已被设置（MYSQL 默认设置）`YYYY/MM/DD`但是我想要它，所以它的形式是`DD/MM/YYYY`. 我怎样才能改变这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:11:19.397

```
date( 'd/m/Y', strtotime( $date ) ); 
```

这应该可以工作，尽管你确定 mysql 没有像规范那样默认为 yyyy-mm-dd

**更新评论**

```
$date = "2013-03-01";
date( 'd-m-Y', strtotime( $date ) ); 
```

输出：01-03-2013

**更新评论 2**

```
$loan_date = date( 'd-m-Y', strtotime($_POST['loan_date'])); 
$return_date = date( 'd-m-Y', strtotime($_POST['return_date']));

echo $loandate;
echo $return_date; 
```

在这种情况下的工作示例我只是用示例字符串替换了 post vars，但显示它有效。如果它不起作用，请检查您的输入字符串，但它应该适用于任何格式的日期戳。 [http://phpfiddle.org/main/code/viu-ghp](http://phpfiddle.org/main/code/viu-ghp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T16:13:01.947

如果由于格式不同而计划更新列的值，请保持原样`DATE`。最好保存日期`DATE`。`VARCHAR`

但是，您可以在列的投影期间更改格式（*SELECT 语句*）

```
SELECT DATE_FORMAT(colNAME, '%d/%m/%Y') as newDATE
FROM   tableNAme 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T16:26:49.720

使用 DateTime 类而不是 PHP 的旧日期处理函数：

```
$dateFromSQL = "2013-03-01";

$dateObj = DateTime::createFromFormat($dateFromSQL, 'Y-m-d');
print $dateObj->format('d/m/Y'); 
```

# iphone - 为单个音频文件读取和写入音频文件服务以与其内容同步

> ID：15161975
> 
> 赞同：0
> 
> 时间：2013-03-01T16:10:00.957
> 
> 标签：iphone, objective-c, ios6, core-audio

我如何使用音频文件服务读取和写入单个音频文件以与其内容同步。有一个音频文件以编程方式在 textview 中播放和显示其内容，但在音频播放和内容显示在文本视图中时没有同步。

是否有任何示例或示例代码。

感谢帮助。

谢谢

# django - 如何同时提交表单和表单集

> ID：15161982
> 
> 赞同：9
> 
> 时间：2013-03-01T16:10:12.143
> 
> 标签：django, django-forms, formsets

我正在尝试一次渲染一个表单和一个表单集。表单集工作正常（我认为），但表单没有验证（好像没有发布数据）

我试过玩这个按钮，但它的主要提交功能是通过 js 来的。

这些表格都是独立工作的，但在提交 togetehr 时不能独立工作，所以看起来问题出在视图中，这里是代码：

```
views.py

from django.shortcuts import render, render_to_response
from django.http import HttpResponseRedirect
from forms import LessonForm, AddMaterialForm
from models import Lesson, SUBJECT_OPTIONS, Materials, MATERIAL_TYPES
from django.forms.formsets import formset_factory

def Create_Lesson(request):
    AddMaterials=formset_factory(AddMaterialForm, extra=9)
    if request.method == "POST": # If the form has been submitted...
        lesson = LessonForm(request.POST, prefix="lesson") # A form bound to the POST data
        formset = AddMaterials(request.POST, request.FILES) # A form bound to the POST data
        if lesson.is_valid() and formset.is_valid(): # All validation rules pass
            lesson = lesson.save(commit=False)
            lesson.creator = request.user
            lesson.save()
            for form in formset:
                form = form.save(commit=False)
                form.lesson = lesson.pk
                form.save()
            return render(request, 'index.html',)
    else:
        lesson= LessonForm(prefix='lesson') # An unbound form
        formset = AddMaterials()
    return render(request, 'create_lesson/create.html', {
    'form': lesson,'formset':formset
}) 
```

.html

```
 <form id="create_lesson_form" method="post" action="">
    <h2>1: Create Your Lesson</h2>

        {{ form.non_field_errors }}
        <label for="subject"><span>Subject</span></label>
        {{form.subject}}
        {{ form.subject.errors }}
        <label for="title"><span>Title</span></label>
        <input type="text" id="title" name="name" placeholder="Give it a name"/>
        {{ form.name.errors }}
        <label class="error" for="title" id="title_error">You must choose a title!</label>            
        <label for="subtitle"><span>Subtitle</span></label>
        <input type="text" id="subtitle" name="subtitle" placeholder="Type your subtitle here"/>
        {{ form.subtitle.errors }}
        <label class="error" for="subtitle" id="subtitle_error">are you sure you want to leave subtititle blank?</label>
        <label for="description"><span>Description</span></label>
        <textarea id="description" name= "description" cols="42" rows="5" placeholder="why is it important? this can be a longer description"'></textarea>
        {{ form.description.errors }}
        <label class="error" for="description" id="description_error">are you sure you want to leave the description blank?</label>
        <label for="success" id="Goals_title"><span>Goals</span></label>
        <textarea id="success" name="success" cols="42" rows="5" placeholder="explain what sucess might look like for someone doing this lesson...what does mastery look like?" '></textarea>
        {{ form.success.errors }}
        <label class="error" for="success" id="success_error">are you sure you want to leave the goals blank?</label>
    {{ form.directions.errors }}
        <label class="error" for="directions" id="directions_error">are you sure you do not want to include dierections?</label>
    <label for="directions" id="Directions_title"><span>Directions</span></label>
        <textarea id="directions" name="directions" cols="42" rows="5" placeholder="you can add simple directions here" '></textarea><br>
    </form>

    <form id="add_elements_form" method="post" action="">
    {% csrf_token %}
    {{ formset.as_p}}
    <button type='submit' id='finish'>Finish Editing Lesson</button>
    </form> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-02T01:06:05.963

这将同时提交表单和表单集。

```
//When your uploading files or images don't forget to put "multipart/form-data" 
//   in your form. 
//To connect formset in your form, don't forget to put the model in the formset 
//   for instance.
//In this you can add many lines as you want or delete it. 
```

**表格.py**

```
class LessonForm(forms.ModelForm):
    class Meta:
        model = Lesson

MaterialsFormset = inlineformset_factory(Lesson, Materials, 
    fields=('field_name', 'field_name'), can_delete=True) 
```

**视图.py**

```
def view_name(request):
    form = LessonForm()
    formset = MaterialsFormset(instance=Lesson())
    if request.method == 'POST':
        form = LessonForm(request.POST)
        if form.is_valid():
            lesson = form.save()
            formset = MaterialsFormset(request.POST, request.FILES,
                instance=lesson)
            if formset.is_valid():
                formset.save()
                return render(request, 'index.html',)
    return render(request, "page.html", {
        'form': form, 'formset': formset
    }) 
```

**html**

```
<form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    {{ form.as_p }}
    {{ formset.as_p }}
    <input type="submit" value="Save"/>
</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T19:44:21.870

您只需要一个表单标签。如果您希望同时接收所有数据，则需要用一个表单标签包装所有字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-02T15:27:00.160

[现在 django 4 已经发布，可以使用Reusable templates](https://docs.djangoproject.com/en/4.0/topics/forms/#reusable-form-templates)在表单本身内做同样的事情。我更喜欢这个解决方案，因为这样可以更简单地重用复杂的表单而不会弄乱视图。

## 为了记录，这是我的做法

2个相关模型：

```
# models.py
from django.db import models

class Recipe(models.Model):
    name = models.CharField(max_length=100)
    def __str__(self):
        return self.name

class Ingredient(models.Model):
    name = models.CharField(max_length=100)
    quantity = models.FloatField()
    recipe = models.ForeignKey(Recipe, on_delete=models.CASCADE, related_name="ingredients")
    def __str__(self):
        return self.name 
```

绑定在一起的表格：

```
# forms.py
from django import forms
from .models import Recipe, Ingredient

class IngredientForm(forms.ModelForm):
    class Meta:
        model = Ingredient
        exclude = ('recipe',)

IngredientFormSet = forms.inlineformset_factory(Recipe, Ingredient, form=IngredientForm)

class RecipeForm(forms.ModelForm):
    class Meta:
        model = Recipe
        fields = '__all__'

    template_name = 'recipe_form.html'

    def __init__(self, *args, **kwargs):
        """Initialize the formset with its fields."""
        self.formset = IngredientFormSet(*args, **kwargs)
        super().__init__(*args, **kwargs)

    def get_context(self):
        """Add the formset to the context for rendering."""
        context = super().get_context()
        context['formset'] = self.formset
        return context

    def save(self, commit=True):
        """Bind both models together."""
        instance = super().save(commit=False)
        self.formset.instance = instance
        if self.formset.is_valid():
            instance.save()
            self.formset.save()
        return instance 
```

表格模板：

```
<!-- templates/recipe_form.html -->
<p>Recipe: {{ form.name }}</p> <!-- calling "form" creates a rendering recursion -->
<p>Ingredients:</p>
{{ formset.management_form }}
<ul>
{% for elt in formset %}
  <li>{{ elt }}</li>
{% endfor %}
</ul> 
```

以及使用它的视图：

```
# views.py
from django.views.generic import TemplateView
from .forms import RecipeForm

class RecipeView(TemplateView):
    template_name = 'recipe.html'
    def get_context_data(self):
        context = super().get_context_data()
        context['form'] = RecipeForm()
        return context

    def post(self, *args, **kwargs):
        form = RecipeForm(self.request.POST)
        if form.is_valid():
            form.save()
        else:
            raise Exception('Something bad happened!')
        return self.get(*args, **kwargs) 
```

使用一个非常基本的模板：

```
<!-- templates/recipe.html -->
<form action="." method="post">
    {% csrf_token %}
    {{ form }}
    <button type="submit">Submit</button>
</form> 
```

最后你很高兴：

```
# tests.py
from django.test import TestCase
from django.urls import reverse
from .models import Recipe

class TestFormSet(TestCase):
    def test_new_recipe(self):
        data = {
            "name": "quiche",
            "ingredients-TOTAL_FORMS": 3,
            "ingredients-INITIAL_FORMS": 0,
            "ingredients-0-name": 'bacon bits',
            "ingredients-0-quantity": 200,
            "ingredients-1-name": 'eggs',
            "ingredients-1-quantity": 4,
            "ingredients-2-name": 'cream',
            "ingredients-2-quantity": 150,
        }
        r = self.client.post(reverse('recipe'), data=data)
        self.assertEqual(Recipe.objects.first().ingredients.count(),3) 
```

```
$ python manage.py test
OK 
```

希望它对某人有用。

# eclipse - 在 windows 中使用 Apache Cascading

> ID：15161984
> 
> 赞同：1
> 
> 时间：2013-03-01T16:10:18.190
> 
> 标签：eclipse, apache, cascading

我开始使用 Cascading 库，但我搜索信息，所有都是关于 linux 上的级联......我在 ubuntu 服务器中执行了很好的不耐烦示例。

但我想在 windows 中使用 eclipse 开发和测试我的应用程序......

这可能吗？？我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T12:39:20.773

要在 windows 中使用 eclipse 开发和测试 Cascading 应用程序，您需要应用补丁 ( [https://github.com/congainc/patch-hadoop_7682-1.0.x-win](https://github.com/congainc/patch-hadoop_7682-1.0.x-win) )。下载补丁 jar，然后添加到应用程序的 CLASSPATH。在您的代码中，您需要设置属性“fs.file.impl”

```
Properties properties = new Properties();
AppProps.setApplicationJarClass(properties, Main.class);
if (System.getProperty("os.name").toLowerCase().indexOf("win") >= 0) {
  properties.put("fs.file.impl",
  "com.conga.services.hadoop.patch.HADOOP_7682.WinLocalFileSystem");
}
HadoopFlowConnector flowConnector = new HadoopFlowConnector(properties); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T21:12:14.527

很高兴听到“不耐烦”的例子有所帮助-

有两个问题：(1) Windows 和 (2) Eclipse。

Hadoop 在 Java 中运行，主要用于在集群上运行应用程序。在 Windows 上你必须小心，因为 Java 支持是有问题的。我见过很多学生尝试使用 Cygwin，认为这会提供 Java 层——但事实并非如此。在 Cygwin 上运行 Hadoop 通常麻烦多于其价值。显然，Microsoft 的[HDInsight](https://www.hadooponazure.com/)工作是在 Windows 和 Azure 上运行 Hadoop 的好方法。要在桌面 Windows 上运行 Hadoop，最好使用虚拟机。然后一定要以“独立模式”运行，而不是伪分布式模式或尝试在您的桌面上创建集群。否则，最好在 Azure 上的 HDInsight for Hadoop 中运行级联应用程序。

Eclipse 是一个更简单的答案。“不耐烦”系列中的 Gradle 构建脚本展示了如何使用“gradle eclipse”生成要导入 IDE 的项目。即便如此，您可能必须清理一些路径——据我所见，Eclipse 并没有像应有的那样干净地处理 Gradle 导入。

希望有帮助-

# .net - Azure 服务总线队列 ScheduledEnqueueTimeUtc 延迟

> ID：15161986
> 
> 赞同：6
> 
> 时间：2013-03-01T16:10:26.893
> 
> 标签：.net, azure, servicebus

我遇到了一个奇怪的问题。我有一个云服务 A，它将消息放入服务总线队列中，供另一个云服务 B 读取。云服务 B 可能需要大约一秒钟的时间来处理它需要做的事情，然后它将一条消息放回云服务 A 的队列中。当云服务 B 执行此操作时，它使用 ScheduledEnqueueTimeUtc 来延迟大约 1 - 10 秒消息上。

上周五，天蓝色的中断使该应用程序完全瘫痪。当我重新上线时，ScheduledEnqueueTimeUtc 总是会导致至少 10 秒的延迟。例如，我生成一个未来 1 到 10 秒之间的日期时间。我将其设置为 ScheduledEnqueueTimeUtc，并将该时间作为我发送的消息的属性，当我在云服务 A 中收到消息时，我将该日期时间属性与消息的 EnqueuedTimeUtc 属性进行比较。这两次应该很漂亮紧密相连，直到上周五为止，这就是它几个月来一直工作的方式。

所以现在云服务 B 说它会在 1 秒内将此消息放入队列。云服务 A 说它在 12-14 秒内没有进入队列。我在将消息放入队列时使用异步方法。如果我不使用 ScheduledEnqueueTimeUtc，则没有延迟，当我在云服务 A 中查看它们时，时间匹配得足够近。但如果我将 ScheduledEnqueueTimeUtc 设置为未来 1 秒，它似乎不会出现在队列中 12 -14 秒。

我现在通过使用quartz.net 来安排消息而不是设置ScheduledEnqueueTimeUtc 属性来解决这个问题。但这种情况开始发生似乎真的很奇怪。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T17:13:12.217

从[ScheduledEnqueueTimeUtc 属性的文档](http://msdn.microsoft.com/en-us/library/microsoft.servicebus.messaging.brokeredmessage.scheduledenqueuetimeutc.aspx)：

“消息入队时间并不意味着消息会同时发送。它会入队，但实际发送时间取决于队列的工作量及其状态。”

该属性导致消息不会立即传递。它不会在设定的时间**之前**交付，但不能保证它会在那个时间**准确交付。**

如果您需要高分辨率调度，Quartz 可能是一种选择。您还可以评估作为移动服务预览一部分的新[作业调度程序。](http://www.windowsazure.com/en-us/develop/mobile/tutorials/schedule-backend-tasks/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T21:33:15.747

最近在 ShcheduledEnqueueTimeUtc 功能中有一个回归，在某些边缘情况下会导致您在上面看到的行为。这将在接下来的几天内修复，您应该会看到预期/原始行为。

根据队列的繁忙程度，预定消息可能会有一些延迟，但可以在您上面提到的场景中使用。任何影响您的应用程序的功能回归都可以作为 Azure 支持票提出：http: [//www.windowsazure.com/en-us/support/contact/](http://www.windowsazure.com/en-us/support/contact/)

# events - Backbone：子视图、默认的“div”包装器和委托事件

> ID：15161987
> 
> 赞同：1
> 
> 时间：2013-03-01T16:10:28.867
> 
> 标签：events, backbone.js, subviews

我们有两个主干视图：一个父视图（PersonView）和它的子视图（LocationView）。他们的模板，在 Mustache 表示法中，是下一个：

```
PersonView template:
    <h2>{{fullName}}</h2>
    <div>
        <h3>Address:</h3>
        {{{location}}}
    </div>

LocationView template:
    <hr />
    <dl>
        <dt>City:</dt>
        <dd>{{city}}</dd>
        <dt>Place:</dt>
        <dd>{{place}}</dd>
    </dl> 
```

注意这些模板没有父元素；因此，Backbone 将默认在“el”属性中为它们指定“div”元素。

在 PersonView 的“render”方法中，我们如何在不丢失 LocationView 的事件和不添加“LocationView.el”的默认包装“div”元素的情况下将 LocationView 的渲染 HTML 添加到“PersonView.el”中？

我们尝试了很多方法，如果我们删除 de subview 的“el”属性，我们总是会丢失事件（在子视图中），但是如果我们保留那个“el”，那么如果我们想将它与 jQuery 事件相关联就会出现问题:-(

有人对此有任何解决方案吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:25:21.523

详细说明我的评论...

位置视图：

```
var LocationView = Backbone.View.extend({
    tagName: 'dl'
}); 
```

位置视图模板：

```
<dt>City:</dt>
<dd>{{city}}</dd>
<dt>Place:</dt>
<dd>{{place}}</dd> 
```

PersonView 模板：

```
<h2>{{fullName}}</h2>
<div>
    <h3>Address:</h3>
    <hr />
    {{{location}}}
</div> 
```

现在，在 LocationView 实例中，`this.el`将是 a`<dl>`而不是`<div>`.

# java - Lucene 4.1 忽略 FieldType.tokenized = false

> ID：15161990
> 
> 赞同：1
> 
> 时间：2013-03-01T16:10:37.590
> 
> 标签：java, lucene

我正在使用 Lucene 4.1 来索引关键字/值对，其中关键字和值不是真实的单词 - 即它们是电压、设置，不应分析或标记化。例如 $P14R / 16777216。（这是任何流式细胞仪的 FCS 数据）

对于索引，我使用 indexed = true、stored = true 和**tokenized = false**创建了一个 FieldType 。这些模仿了来自 Lucene 1 的古老 Field.Keyword，我有这本书。:-) 我什至冻结了 fieldType。

我在调试器中看到了这些值。我创建文档和索引。

当我阅读索引和文档并查看调试器中的字段时，我看到了我的所有字段。名称和字段数据看起来正确。但是，FieldType 是错误的。它显示 indexed = true、stored = true 和**tokenized = true**。结果是我的搜索（使用 TermQuery）不起作用。

我怎样才能解决这个问题？谢谢。

ps 我在 IndexWriterConfig 中使用 KeywordAnalyzer。稍后我会尝试发布一些演示代码，但这与我今天的实际工作无关。:-)

演示代码：

```
public class LuceneDemo {

  public static void main(String[] args) throws IOException {
    Directory lDir = new RAMDirectory();
    Analyzer analyzer = new KeywordAnalyzer();
    IndexWriterConfig iwc = new IndexWriterConfig(Version.LUCENE_41, analyzer);
    iwc.setOpenMode(OpenMode.CREATE);
    IndexWriter writer = new IndexWriter(lDir, iwc);

    // BTW, Lucene, anyway you could make this even more tedious???
    // ever heard of builders, Enums, or even old fashioned bits?
    FieldType keywordFieldType = new FieldType();
    keywordFieldType.setStored(true);
    keywordFieldType.setIndexed(true);
    keywordFieldType.setTokenized(false);

    Document doc = new Document();
    doc.add(new Field("$foo",  "$bar123", keywordFieldType));
    doc.add(new Field("contents",  "$foo=$bar123", keywordFieldType));
    doc.add(new Field("$foo2",  "$bar12345", keywordFieldType));

    Field onCreation = new Field("contents",  "$foo2=$bar12345", keywordFieldType);
    doc.add(onCreation);
    System.out.println("When creating, the field's tokenized is " + onCreation.fieldType().tokenized());
    writer.addDocument(doc);
    writer.close();

    IndexReader reader = DirectoryReader.open(lDir);
    Document d1 = reader.document(0);
    Field readBackField = (Field) d1.getFields().get(0);
    System.out.println("When read back the field's tokenized is " + readBackField.fieldType().tokenized());

    IndexSearcher searcher = new IndexSearcher(reader);

// exact match works
Term term = new Term("$foo", "$bar123" );
    Query query = new TermQuery(term);
    TopDocs results = searcher.search(query, 10);
    System.out.println("when searching for : " + query.toString() + "  hits = " + results.totalHits);

    // partial match fails
    term = new Term("$foo", "123" );
    query = new TermQuery(term);
    results = searcher.search(query, 10);
    System.out.println("when searching for : " + query.toString() + "  hits = " + results.totalHits);

    // wildcard search works
    term = new Term("contents", "*$bar12345" );
    query = new WildcardQuery(term);
    results = searcher.search(query, 10);
    System.out.println("when searching for : " + query.toString() + "  hits = " + results.totalHits);
    }
} 
```

输出将是：

```
When creating, the field's tokenized is false
When read back the field's tokenized is true
when searching for : $foo:$bar123  hits = 1
when searching for : $foo:123  hits = 0
when searching for : contents:*$bar12345  hits = 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:35:36.553

您可以尝试对不想标记的字段使用[KeywordAnalyzer 。](http://lucene.apache.org/core/4_1_0/analyzers-common/org/apache/lucene/analysis/core/KeywordAnalyzer.html)

如果您需要多个分析器（即，如果您有其他需要标记化的字段），[则 PerFieldAnalyzerWrapper](http://lucene.apache.org/core/4_1_0/analyzers-common/org/apache/lucene/analysis/miscellaneous/PerFieldAnalyzerWrapper.html)是一种方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-19T08:21:05.770

Lucene 以**小写形式**存储所有标记- 因此，对于非标记化字段，您需要首先将搜索字符串转换为小写。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T07:25:58.343

演示代码证明，当你读回来时，tokenized 的值是不同的。不确定这是否是一个错误。

但这不是部分搜索不起作用的原因。部分搜索不起作用，因为 Lucene 不进行部分搜索（除非您使用通配符）例如[在 StackOverflow 中这样说](https://stackoverflow.com/questions/5786338/document-search-on-partial-words)

使用谷歌这么久我想我不明白这一点。:-)

# android - 无法将字符串转换为 JSONObject 错误 Android

> ID：15161992
> 
> 赞同：-2
> 
> 时间：2013-03-01T16:10:42.393
> 
> 标签：android, json

嗨，我收到 JSON 异常错误，但不知道为什么有人可以帮忙？

这是我的代码

```
public static void updateLocalDataWithObject(Context activityContext, JSONObject fullNetworkDataFromFile) throws JSONException{

             JSONObject userPrefsDict = new JSONObject();
             JSONObject fullNetworkfile = fullNetworkDataFromFile.getJSONObject("data");
             JSONObject tempUserDict = fullNetworkfile.getJSONObject("user");
             String user_pref_club = tempUserDict.getString("primary_club_id");
             Log.v("globals", "3.)user_pref_club = " + user_pref_club);
             JSONObject userClubsDict = fullNetworkfile.getJSONObject("user_clubs");
             Log.v("globals", "userClubsDict = " + userClubsDict);

             if(userClubsDict.length()!= 0){
                 try { 

                 JSONArray userClubsDictKeys = new JSONArray();          
                 userClubsDictKeys=userClubsDict.names();

                 ArrayList<String> stringArray = new ArrayList<String>();
                 for(int i = 0, count = userClubsDictKeys.length(); i< count; i++)
                 {

                         JSONObject jsonObject = userClubsDictKeys.getJSONObject(i);
                         stringArray.add(jsonObject.toString());

                 }

                 for(String myString : stringArray){
                     Log.v("globals", "myString = " + myString);

                 }

                 Log.v("globals", "ARRAY userClubsDictKeys = " + userClubsDictKeys);
                 String clubID = userClubsDictKeys.getString(0);
                 Log.v("globals", "clubID = " + clubID);

                 if(user_pref_club =="" || (userClubsDictKeys.getString(0) == null)) user_pref_club = clubID; 

                 userClubsDict.put("selected_club", user_pref_club);
                 Log.v("globals", "userClubsDict EDITED = " + userClubsDict);

                 fullNetworkfile.put("user_prefs", userClubsDict);
                 Log.v("globals", "fullNetworkfile EDITED = " + fullNetworkfile);

                 String writableString  = fullNetworkfile.toString();
                 writeDataToFile(activityContext,writableString, "mynetwork.json");
                 Log.v("globals", "fullNetworkfile Written = to FIle");
                 JSONObject returnDataFromFile = GlobalActions.returnDataFromFile(null,"mynetwork.json");
                 Log.v("globals", "returnDataFromFile= " + returnDataFromFile);
                 JSONObject userprefsdata = returnDataFromFile.getJSONObject("user_prefs");
                 Log.v("globals", "user_prefs= " + userprefsdata);

                 }
                 catch (JSONException e) {
                     e.printStackTrace();
                 }
             } 
        } 
```

这是错误

```
03-01 15:34:11.219: W/System.err(2462): org.json.JSONException: Value 6496 at 0 of type java.lang.String cannot be converted to JSONObject
03-01 15:34:11.229: W/System.err(2462):     at org.json.JSON.typeMismatch(JSON.java:96)
03-01 15:34:11.229: W/System.err(2462):     at org.json.JSONArray.getJSONObject(JSONArray.java:484)
03-01 15:34:11.229: W/System.err(2462):     at com.myApp.myApp.GlobalActions.updateLocalDataWithObject(GlobalActions.java:346)
03-01 15:34:11.229: W/System.err(2462):     at com.myApp.myApp.LoginForm.apiNetworkCallResponse(LoginForm.java:268)
03-01 15:34:11.229: W/System.err(2462):     at com.myApp.myApp.LoginForm$loginSuccessTask.onPostExecute(LoginForm.java:255)
03-01 15:34:11.229: W/System.err(2462):     at com.myApp.myApp.LoginForm$loginSuccessTask.onPostExecute(LoginForm.java:1)
03-01 15:34:11.229: W/System.err(2462):     at android.os.AsyncTask.finish(AsyncTask.java:417)
03-01 15:34:11.229: W/System.err(2462):     at android.os.AsyncTask.access$300(AsyncTask.java:127)
03-01 15:34:11.229: W/System.err(2462):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
03-01 15:34:11.229: W/System.err(2462):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-01 15:34:11.229: W/System.err(2462):     at android.os.Looper.loop(Looper.java:123)
03-01 15:34:11.229: W/System.err(2462):     at android.app.ActivityThread.main(ActivityThread.java:3687)
03-01 15:34:11.229: W/System.err(2462):     at java.lang.reflect.Method.invokeNative(Native Method)
03-01 15:34:11.229: W/System.err(2462):     at java.lang.reflect.Method.invoke(Method.java:507)
03-01 15:34:11.229: W/System.err(2462):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
03-01 15:34:11.229: W/System.err(2462):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
03-01 15:34:11.229: W/System.err(2462):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-03-01T17:31:59.693

解决了它在try and catch中移动我的JSON，它似乎有效

```
public static void updateLocalDataWithObject(Context activityContext, JSONObject fullNetworkDataFromFile) throws JSONException{

             JSONObject fullNetworkfile = fullNetworkDataFromFile.getJSONObject("data");
             JSONObject tempUserDict = fullNetworkfile.getJSONObject("user");
             String user_pref_club = tempUserDict.getString("primary_club_id");
             Log.v("globals", "3.)user_pref_club = " + user_pref_club);
             JSONObject userClubsDict = fullNetworkfile.getJSONObject("user_clubs");
             Log.v("globals", "userClubsDict = " + userClubsDict);

             if(userClubsDict.length()!= 0){

                 JSONObject userPrefsDict = new JSONObject();

                 JSONArray userClubsDictKeys = new JSONArray();          
                 userClubsDictKeys=userClubsDict.names();

                 ArrayList<String> stringArray = new ArrayList<String>();
                 for(int i = 0, count = userClubsDictKeys.length(); i< count; i++)
                 {
                     try {
                         JSONObject jsonObject = userClubsDictKeys.getJSONObject(i);
                         stringArray.add(jsonObject.toString());
                     }
                     catch (JSONException e) {
                         e.printStackTrace();
                     }
                 }

                 String clubID = userClubsDictKeys.getString(0);

                 if(user_pref_club =="" || (userClubsDictKeys.getString(0) == null)) user_pref_club = clubID; 

                 userPrefsDict.put("selected_club", user_pref_club);
                 fullNetworkfile.put("user_prefs", userPrefsDict);

                 String writableString  = fullNetworkfile.toString();
                 writeDataToFile(activityContext ,writableString, "mynetwork.json");

             } 
        } 
```

# php - PHP PDO execute() 返回重复结果

> ID：15161995
> 
> 赞同：3
> 
> 时间：2013-03-01T16:10:57.963
> 
> 标签：php, mysql, pdo

对于此代码：

```
$title = '0';
$subTitle = '1';
$tableName = 'someString';

$stmt = $dbh->prepare("SELECT `".$title."`, `".$subTitle."` FROM `".$tableName."_data` WHERE `id` = :key");

$stmt->bindValue(':key', '127');
$stmt->execute();
$result = $stmt->fetchAll();
print_r($result); 
```

我得到 $result 如下：

```
Array
(
    [0] => Array
        (
            [0] => 91651
            [1] => 91651 - DESCRIPTION
            [2] => 91651 - DESCRIPTION
        )

) 
```

当预期的结果应该是这样的：

```
Array
(
    [0] => Array
        (
            [0] => 91651
            [1] => 91651 - DESCRIPTION
        )

) 
```

当我在 mySQL 中运行相同的查询时，它会返回预期的结果。当它通过 PHP PDO 执行时，它会添加一个副本。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-11-15T02:50:30.863

使用`fetchAll(PDO::FETCH_ASSOC)`而不是`fetchAll()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T16:25:47.633

通过与比我自己更擅长数据库的人核对来解决...

我愚蠢地将列命名为整数值。

因此，出现“重复值”的只是列号和列名相同的事实！

总之，我不擅长数据库结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T16:32:40.387

尝试检查 fetch_style 和 fetch_argument 并将其设置为您需要的值。

参见示例 #3： [http ://www.php.net/manual/en/pdostatement.fetchall.php](http://www.php.net/manual/en/pdostatement.fetchall.php)

有时省。在您的 php 版本/pdo 版本上，使用 bindvalue 时存在错误。尽量避免这种情况并改用示例 #3。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-01T16:28:52.337

您可以更改为使用 fetch() 而不是 fetchAll()，这将返回一行。但我只是确保在数据库中 id 是唯一的。

# safari - Safari Web 内容意外退出

> ID：15161996
> 
> 赞同：0
> 
> 时间：2013-03-01T16:10:58.710
> 
> 标签：safari

这是一个我以前从未见过的奇怪错误。当我在 Safari (Mac OS 10.8.2) 中加载我正在处理的 web 应用程序的登录页面时，整个浏览器崩溃并退出，并显示消息“Safari 网页内容意外退出”。我认为我以前从未见过一个网站实际上在 javascript 或其他东西的无限循环之外崩溃了浏览器（实际上，这似乎不应该是可能的）。是否有任何 Apache 标头或已知会使 Safari 崩溃的东西？任何为我指明正确方向的帮助将不胜感激。

**我做了什么：**

*   删除了所有元标记，它仍然崩溃。
*   它在崩溃之前获取 SSL 证书，因为我收到了安全警告（证书与 url 不匹配，因为我正在本地测试）
*   它几乎立即崩溃，所以我怀疑是否有任何 javascript 导致它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:12:44.357

使用消除过程。删除一些代码，测试应用程序。如果它不起作用，请继续删除代码，直到找到原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T21:19:29.427

万一有人偶然发现这个问题，问题最终是结合使用 CSS3 过渡和`calc()`值。显然将它们放在一起会导致 Safari 崩溃（在触发转换之前，我可能会补充）。我通过做一些简单的浏览器检测来解决这个问题，当浏览器不是 Safari 时向正文添加一个类，并且只执行与`calc()`该类内元素的值相关的转换。

# rest - REST - 如果某些资源已被删除，则在创建或更新资源集合时该怎么办？

> ID：15161999
> 
> 赞同：1
> 
> 时间：2013-03-01T16:11:17.640
> 
> 标签：rest

假设我的服务器有一组员工资源。此外，假设客户端应用程序使用此员工资源集合来创建其他资源，或者为了简单起见，假设我想从客户端应用程序更新整个员工集合。

如果我的客户端应用程序与服务器不同步，一些员工资源已从服务器中删除，然后客户端应用程序尝试更新大量员工，例如 100,000 或一些较大的数量，会发生什么情况。这笔交易应该怎么办？

交易应该处理好员工并忽略缺失的员工，还是应该整个交易失败并通知客户失败的原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T16:26:31.067

有很多选择。

`410 Gone`可用于表示“404 曾经是资源，将永远不会再出现”，用于通知某些内容已被删除。收到 410 的客户端然后可以采取行动。

您还可以使用 ETags 机制，它提供了另一个并发流程。每个资源都应该有一个 ETag，服务器可以使用标头`If-None-Match`和代码`412 Precondition Failed`来解决如何通知客户端有关冲突的问题。

您可以忽略丢失的那些并使用`Warning`可以包含更多数据的标头通知客户端。

WebDAV（扩展了 HTTP）支持批处理操作并支持返回多个状态码。它用于具有类似并发问题的 HTTP 文件系统。

避免在 JSON 响应中重复可以使用标头和状态代码表达的内容。消息正文应仅包含有关资源的信息，而不是有关事务的信息。