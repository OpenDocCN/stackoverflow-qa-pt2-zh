# StackOverflow 问答 14942000-14942999

# java - Java 方法返回 arraylist 并希望将其复制到另一个 arraylist？

> ID：14942001
> 
> 赞同：-2
> 
> 时间：2013-02-18T17:30:18.170
> 
> 标签：java, arraylist

我有一个方法正在返回和`Arraylist`（值列表），现在我想将此值放入`arraylist`. 这是我的例子。

```
// ORIGINAL METHOD
public ArrayList groupname(\String userName) {
    .....
    return port.groupname(userName);
} 
```

如何在 arralist 中获得上述返回值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:31:52.407

如果我理解正确：

```
return Arrays.asList(port.groupname(userName)); 
```

使用标准[`java.util.Arrays`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html)实用程序类。如果您需要一个可变列表，则结果是不可变的：

```
return new ArrayList(Arrays.asList(port.groupname(userName))); 
```

BTW 考虑使用泛型，Java 1.4 和 5.0 不再受支持，6.0 不会在 2 月底之前推出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T17:32:52.820

您可以使用`ArrayList`如下的复制构造函数：`new ArrayList(oldList)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T17:32:46.073

```
return new ArrayList (Arrays.asList (port.groupname(userName))); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T17:32:58.597

如果您需要将 arraylist 传递给另一个类，则为该类设置一个 setter 方法，或者在对象创建（构造函数）期间传递它。希望现在实现起来更简单

# wpf - 我可以在 WPF 的密码框中显示输入密码吗？Windows 手机应用程序

> ID：14942006
> 
> 赞同：1
> 
> 时间：2013-02-18T17:30:28.053
> 
> 标签：wpf, windows-phone-7, windows-phone-8, passwordbox

嗨，我的 UI 中有一个文本框和一个密码框。现在我想在文本框中显示“输入用户名”，并且出于众所周知的原因想在密码框中显示“输入密码”。但是我已经看到 PasswordBox 中缺少此选项。

现在我的方法是在与 passwordBox 相同位置的另一个文本框，并在 gotFocus 事件中翻转控件。但只是想知道有没有其他方法可以做到这一点？

默认情况下，passwordBox 不包含任何字符串。

我需要 windows phone 应用程序的这个功能，你们提供的例子很好，但不适用于 windows phone，因为没有 . 无论如何感谢大家的回答。但是请您提供解决方案，同时牢记 Windows 手机功能

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T17:42:19.300

您可以为密码框创建样式。检查下面的链接

[http://prabu-guru.blogspot.in/2010/06/how-to-add-watermark-text-to-textbox.html](http://prabu-guru.blogspot.in/2010/06/how-to-add-watermark-text-to-textbox.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T17:41:32.817

您绝对可以通过创建一个新的控件模板并在其中设置一些触发器。

请参阅此[SO 帖子](https://stackoverflow.com/questions/1607066/wpf-watermark-passwordbox-from-watermark-textbox)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T17:35:43.767

实际上，无法`Enter Password`在 PasswordBox 中显示文本。通常显示用户输入密码，它显示为：

![密码箱](../Images/8feef28dbee6c4b8a32662972e1e80f6.png)

你可以设置悬停文本`Enter Password`。

# mysql - 从不同的结果中选择后获取身份

> ID：14942013
> 
> 赞同：0
> 
> 时间：2013-02-18T17:30:59.593
> 
> 标签：mysql, sql, sql-server, tsql

我有 2 个表（ Model_Table ， Items_Table）

```
Model_Tabl ( ID, ModelName, ModelQuantity)
Items_Tabl ( I_Code, IName, ID) 
```

将新行插入 (Model_Table) 后 - 触发器将多行插入 (Items_Table) 取决于 (Model_Table) 中的 ModelQuantity ，直到现在它工作正常

我建立

```
"select distinct ModelName , Sum(ModelQuantity) group by ModelName" 
```

我得到了很好的结果

我的问题是：

当我从（DISTINCT）查询中选择模型名称时，我想知道我从（Model_Table）中选择了哪个（ID）

(Model_ID) 到 (ModelName) = 1 到多个

泰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T17:41:29.837

只需选择 id ，试试这个

```
 select id, ModelName , Sum(ModelQuantity) 
 from Model_Tabl group by ModelName 
```

你不需要`DISTINCT`，因为你已经分组了，他们做同样的工作

# macos - applescript中的无限循环停止注销

> ID：14942020
> 
> 赞同：1
> 
> 时间：2013-02-18T17:31:12.637
> 
> 标签：macos, applescript, infinite-loop, repeat

所以我正在编写一个基本的applescript来结束一个非常烦人的程序，该程序在我工作时随机打开并打断我。该程序需要保留，但我不想看到它。我希望我的脚本在计算机重新启动时自动打开（我在设置中这样做了）。我想测试以确保它可以正常工作，但是将其保存为应用程序后，如果不手动强制退出，我将无法注销或关闭或重新启动。我认为这是因为重复循环，但我不知道如何解决这个问题。我已经尝试了我能想到的一切。任何帮助将不胜感激。谢谢你

```
on appIsRunning(appName)
    tell application "System Events" to (name of processes) contains appName
end appIsRunning

repeat

if appIsRunning("LiveUpdate") then
    tell application "LiveUpdate"
        quit
    end tell

end repeat 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T21:04:13.030

我也不确定您是否有正确的方法。但是，如果你想做你想做的事情，那么你想创建一个保持打开的应用程序。为此，您可以将 applescript 保存为应用程序并选中“运行处理程序后保持打开”复选框。这是您为此编写代码的方式...

```
on idle
    if appIsRunning("LiveUpdate") then tell application "LiveUpdate" to quit
    return 10
end idle

on appIsRunning(appName)
    tell application "System Events" to (name of processes) contains appName
end appIsRunning 
```

注意“空闲”处理程序。这是在应用程序保持打开状态时重复运行的处理程序。请注意，我在该处理程序的末尾放置了“return 10”。这决定了空闲处理程序运行的频率，在这种情况下每 10 秒运行一次。您可以将其更改为您想要的。

这种方法的优点是您可以退出这个保持打开的应用程序。您不会陷入无法退出的重复循环中。

您提到您不想在此应用程序运行时看到它。为此，您必须修改应用程序包中的 info.plist 文件（右键单击应用程序并显示包内容）。您必须将“LSUIElement”键添加到 plist 并将其值设为 true。然后，您在 Dock 运行时将看不到该应用程序。

因为你看不到它正在运行，所以你需要一些方法来退出应用程序。你可以使用另一个applescript来做到这一点......

```
tell application "My Stay Open Application" to quit. 
```

或者您可以打开活动监视器并从那里退出。祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T04:13:23.093

这是另一种方法：

```
on idle
if application "LiveUpdate" is running then tell application "LiveUpdate" to quit
return 10
end idle 
```

# perl - Perl更改括号内的文本文件

> ID：14942021
> 
> 赞同：2
> 
> 时间：2013-02-18T17:31:13.407
> 
> 标签：perl, parsing, matching

希望你们能提供帮助，我承认我是 Perl 的一个相当新的用户并且做了一些搜索，但老实说不理解那里的选项。希望你们能更好地向我解释并帮助我开始。因此，我已经能够让 Perl 打开文本文件，将其读取到数组中，然后写入新文件就好了。下面是我的文本文件的简短示例：

```
Composition {
  CurrentTime = 0,
  OutputClips = {
    "",
  },
  Tools = {
      Text3 = Text3D {
          NameSet = true,
          Inputs  = {
            Size       = Input { Value = 0.6282723, },
            Font       = Input { Value = "KG Shadow of the Day", },
            StyledText = Input { Value = "Your Text Goes Here 3", },
      },
      ShadowDensity = BrightnessContrast {
          NameSet = true,
          Inputs  = {
            Alpha = Input { Value = 1, },
            Gain  = Input { Value = 0.5, },
            Input = Input {
                SourceOp = "Loader2",
                Source   = "Output",
            },
          },
          ViewInfo = OperatorInfo { Pos = { -220, 82.5, }, },
      },
  },
} 
```

我需要能够更改值`Text3 'StyledText = Input'`以及`ShadowDensity 'Alpha = Input'`值。而且我不能只做一个正常的表达式来查找`'Alpha = Input'`，因为数组内部还有其他嵌套项在不同的工具下具有相同的确切名称。与文本部分相同，如果我有多个文本工具，它将找不到正确的工具。欢迎任何帮助和建议。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:33:12.307

这是使用[`Marpa::R2`](https://metacpan.org/module/JKEGL/Marpa-R2-2.046000/pod/Marpa_R2.pod)和重载对象的解决方案。结果比预期的要长，但看起来往返兼容。

标题很简单：

```
use strict; use warnings; use feature 'say';
use Marpa::R2;

use constant DEBUG => 0;

exit main(); 
```

这将需要 Perl5 版本 10 或更高版本。接下来是`parse`子程序。这将进行标记化，并调用解析器。大多数标记被指定为数据（不是显式代码），因此可以轻松扩展它们。

这`$print_diag`是一个匿名子。它关闭`$string`和`$last_pos`，因此可以打印类似于 的适当错误消息`die`。它将用`HERE-->`箭头指出标记化问题的上下文。

`$match`if 类似的闭包。它遍历所有可用的令牌并返回匹配的令牌，或者失败时返回错误值。它使用`m/\G.../gc`正则表达式。这些类似于`s/^...//`，但不会破坏字符串。`\G`断言将在`pos($string)`. 该`/c`选项确保失败不会改变`pos`。

字符串标记是手动匹配的。您可能想要处理转义。我添加了对一些流行的转义符（`\\`、`\"`、`\n`和`\t`换行反斜杠）的支持。

该`TOKEN`循环提取令牌并将它们塞入识别器中。它包括很少的代码和很多错误处理。

最后，我们取第一个可能的`$parse`树（可能有多个），并检查它是否成功。如果是，我们返回数据结构：

```
my $grammar; # filled later in INIT block

sub parse {
    my ($string) = @_;
    my ($last_pos, $length) = (0, length $string);
    my $rec = Marpa::R2::Recognizer->new({ grammar => $grammar });

    my $print_diag = sub {
        my ($problem) = @_;
        my ($behind, $ahead) = (15, 30);
        my $start = $last_pos > $behind ? $last_pos - $behind : 0;
        say STDERR "$problem at ", map ">>$_<<", join " HERE-->",
            substr($string, $start,    $behind),
            substr($string, $last_pos, $ahead );
        exit 1;
    };

    my @capture_token = (
        [qr/true|false/     => 'Bool'],     # bool must come before ident
        [qr/-?\d+(?:\.\d+)?/=> 'Number'],   # number must come before ident
        [qr/\w+/            => 'Ident'],
    );
    my @non_capture_token  = (
        [qr/\{/     => 'LCurly'],
        [qr/\}/     => 'RCurly'],
        [qr/=/      => 'Equal'],
        [qr/,/      => 'Comma'],
    );

    my $match = sub {
        # try String manually here:
        if ($string =~ m/\G"( (?: [^"]++ | \\. )*+ )"/gcxs) {
            my $str = $1;
            my %escapes = ( n => "\n", t => "\t", "\n" => '' );
            $str =~ s{\\(.)}{ $escapes{$1} // $1 }esg;
            return String => $str;
        }
        for (@non_capture_token) {
            my ($re, $type) = @$_;
            return $type if $string =~ m/\G$re/gc;
        }
        for (@capture_token) {
            my ($re, $type) = @$_;
            return $type, $1 if $string =~ m/\G($re)/gc;
        }
        return;
    };

    pos $string = $last_pos; # set match start for \G assertion to beginning

    TOKEN: while ($last_pos < $length) {
        next TOKEN if $string =~ m/\G\s+/gc;
        next TOKEN if $string =~ m/\G\#\N+/gc; # skip comments if you have such

        if (my @token = $match->()) {
            say STDERR "Token [@token]" if DEBUG;
            my $ok = $rec->read(@token);
            unless (defined $ok) {
                $print_diag->("Token [@token] rejected");
            }
        } else {
            $print_diag->("Can't understand input");
        }
    } continue {
        $last_pos = pos $string;
    }

    my $parse = $rec->value;
    unless ($parse) {
        say STDERR "Could not parse input";
        say STDERR "The Progress so far:";
        say STDERR $rec->show_progress;
        exit 1;
    }
    return $$parse;
} 
```

现在我们指定语法。Marpa 可以通过我在这里使用的类似 BNF 的符号来处理。它主要是低级方法之上的语法糖。我可以指定动作（我稍后会写），并且可以决定*不*通过将令牌放入括号中来捕获它们。在这个阶段，我只能处理令牌类型，而不是令牌的值。指定语法后，我必须使用`$grammar->precompute`.

```
INIT {
    $grammar = Marpa::R2::Grammar->new({
        actions         => "MyActions", # a package name
        default_action  => 'first_arg',
        source          => \(<<'END_OF_GRAMMAR'),
        :start  ::= Value

        Value   ::= Bool            action => doBool
                |   Number          # use auto-action
                |   String          # use auto-action
                ||  Array
                ||  Struct

        Struct  ::= Ident (LCurly) PairList (RCurly)    action => doStruct
                |         (LCurly) PairList (RCurly)    action => doStruct1

        Array   ::= Ident (LCurly) ItemList (RCurly)    action => doArray
                |         (LCurly) ItemList (RCurly)    action => doArray1

        ItemList::= Value +         separator => Comma  action => doList
        PairList::= Pair +          separator => Comma  action => doList
        Pair    ::= Ident (Equal) Value                 action => doPair
END_OF_GRAMMAR
    });
    $grammar->precompute;
} 
```

以上是在一个 INIT 块中，因此它将在`parse`完成之前执行。

现在来我们的行动。每个动作都将使用动作对象作为第一个参数来调用，我们不需要（它有助于更​​高级的解析技术）。其他参数是匹配的标记/规则的值（不是类型）。大多数这些丢弃或打包参数，或将数据放入稍后定义的对象中。

```
sub MyActions::first_arg {
    say STDERR "rule default action" if DEBUG;
    my (undef, $first) = @_;
    return $first;
}

sub MyActions::doStruct {
    say STDERR "rule Struct" if DEBUG;
    my (undef, $ident, $pair_list) = @_;
    my %hash;
    for (@$pair_list) {
        my ($k, $v) = @$_;
        $hash{$k} = $v;
    }
    return MyHash->new($ident, \%hash);
}

sub MyActions::doStruct1 {
    say STDERR "rule Struct sans Ident" if DEBUG;
    my (undef, $pair_list) = @_;
    return MyActions::doStruct(undef, undef, $pair_list);
}

sub MyActions::doArray {
    say STDERR "rule Array" if DEBUG;
    my (undef, $ident, $items) = @_;
    return MyArray->new($ident, $items);
}

sub MyActions::doArray1 {
    say STDERR "rule Array sans Ident" if DEBUG;
    my (undef, $items) = @_;
    MyActions::doArray(undef, undef, $items);
}

sub MyActions::doList {
    say STDERR "List" if DEBUG;
    my (undef, @list) = @_;
    return \@list;
}

sub MyActions::doPair {
    say STDERR "Pair" if DEBUG;
    my (undef, $key, $value) = @_;
    return [$key, $value];
}

sub MyActions::doBool {
    say STDERR "Bool" if DEBUG;
    my (undef, $bool) = @_;
    return MyBool->new($bool);
} 
```

那是相当不起眼的。我们需要这些特殊的对象，因为 (a) 它们稍后会将自己字符串化为正确的形式，以及 (b) 以便我可以关联类型或在花括号之前的任何不完全名称的东西。（而且 (c)，Perl 没有布尔类型，我必须重写它）。

首先是两个助手：`$My::Indent`设置打印输出将缩进的空格数。`My::stringifyHelper`只是确保对象被强制转换为它们的字符串表示，并且字符串（不是数字的所有其他内容）都被引号包围。

```
INIT{ $My::Indent = 4 }
sub My::stringifyHelper {
    my (@objects) = @_;
    for (@objects) {
        if (ref $_) {
            $_ = "$_";
        } elsif ( not /\A-?\d+(?:\.\d+)?\z/) {
            $_ = qq("$_");
        }
    }
    return @objects;
} 
```

这里是`MyHash`类型。字符串化代码很丑陋，但它似乎可以工作→偶然编程。

```
{
    package MyHash;
    sub new {
        my ($class, $type, $hashref) = @_;
        bless [$type, $hashref] => $class;
    }
    sub type {
        my ($self) = @_;
        return $self->[0];
    }
    sub hash {
        my ($self) = @_;
        return $self->[1];
    }
    sub asString {
        my ($self) = @_;
        my @keys = sort keys %{ $self->hash };
        my @vals =
            map { s/\n\K/" "x$My::Indent/meg; $_ }
            My::stringifyHelper @{ $self->hash }{@keys};
        my $string = "";
        for my $i (0 .. $#keys) {
            $string .= (" "x$My::Indent) . "$keys[$i] = $vals[$i],\n";
        }
        return +($self->type // "") . "{\n$string}";
    }
    use overload
        '""'        => \&asString,
        '%{}'       => \&hash,
        fallback    => 1;
} 
```

这实现了`MyArray`. 字符串化稍微不那么难看，但我将对象表示为哈希。我不够熟练，`overload`无法确保在访问实际数组时不会递归。

```
{
    package MyArray;
    sub new {
        my ($class, $type, $aryref) = @_;
        bless { type => $type, array => $aryref } => $class;
    }
    sub type {
        my ($self) = @_;
        return $self->{type};
    }
    sub array {
        my ($self) = @_;
        no overload;
        return $self->{array};
    }
    sub asString {
        my ($self) = @_;
        my @els = My::stringifyHelper @{$self->array};
        my $string = $self->type // "";
        if (@els <= 1) {
            $string .=  "{ @els, }";
        } else {
            my $els = join '', map "$_,\n", @els;
            $els =~ s/^/" "x$My::Indent/meg;
            $string .= "{\n$els}";
        }
        return $string;
    }
    use overload
        '""'        => \&asString,
        '@{}'       => \&array,
        fallback    => 1;
} 
```

现在小`MyBool`实现。它甚至应该像布尔值一样工作:)

```
{
    package MyBool;
    sub new {
        my ($class, $str) = @_;
        my $bool;
        if ('true' eq lc $str)      { $bool = 1     }
        elsif ('false' eq lc $str)  { $bool = undef }
        else { die "Don't know if $str is true or false" }
        bless \$bool => $class;
    }
    use overload
        'bool' => sub {
            my ($self) = @_;
            return $$self;
        },
        '""' => sub {
            my ($self) = @_;
            $$self ? 'true' : 'false';
        },
        fallback => 1;
} 
```

现在我们快完成了。来了`main`：

```
sub main {
    local $/;
    my $data = <DATA>;
    my $dsc = parse($data);

    say "/:";
    say $dsc;

    say "/Tools:";
    say $dsc->{Tools};

    say "/Tools/ShadowDensity/:";
    say $dsc->{Tools}{ShadowDensity};

    say "/Tools/ShadowDensity/Inputs/:";
    say $dsc->{Tools}{ShadowDensity}{Inputs};

    return 0;
} 
```

这将加载并解析数据。然后它打印出整个对象，并且只打印出某些部分。到目前为止，这似乎有效。

注意：如果您对作为输入提供的数据运行解析器，它将失败。标记化成功，但您在某处忘记了右括号。修复后，它应该可以工作。

### 去做：

*   有些部分使用`exit 1`应该抛出异常的地方。
*   上述访问有效，但其他路径失败（它们返回 undef）。某处有一个错误，需要修复，但我不知道。
*   更好的错误消息会很棒，调试级别也会更多样化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T23:37:23.137

我认为它是一个结构化文件，其中包含您可能想要处理的“事件”。所以我创建了一个结构化路径“事件”类/对象和一个处理程序复用类/对象。

```
use strict;
use warnings;

{   package LineEvent;  # our "event" class
    use strict;
    use warnings;

    # use overload to create a default stringification for the class/object
    use overload '""' => 'as_string', fallback => 1;

    # Create new path-tracking object    
    sub new { 
        my $self   = bless {}, shift;
        my %params = @_ % 2 ? ( base => @_ ) : @_;
        for ( qw<base delim verbose> ) { 
            $self->{$_} = $params{ $_ };
        }
        $self->{base}  ||= '';
        $self->{delim} ||= '.';
        return $self;
    }

    # pop back to larger named scope
    sub pop { 
        my $self  = shift;
        my $ref   = \$self->{base};
        my $pos   = rindex( $$ref, $self->{delim} );
        if ( $pos == -1 ) { 
            $self->{current} = '!Close';
        }
        else { 
            my $node = substr( $$ref, $pos + 1 );
            substr( $$ref, $pos ) = '';
            $self->{current} = "$node.!Close";
        }
        say qq{After pop, now "$self".} if $self->{verbose};
        return $self;
    }

    # push a new name as the current scope of the path
    sub push { 
        my ( $self, $level ) = @_;
        return unless $level;
        $self->{current} = '!Open';
        my $delim        = $self->{delim};
        $self->{base}
            .= ( substr( $level, 0, length( $delim )) eq $delim ? '' : $delim ) 
            .  $level
            ;
        say qq{After push, now "$self".} if $self->{verbose};
        return $self;
    }

    # push the temporary name sitting as current onto our base
    sub push_current { 
        return $_[0]->push( $_[0]->{current} ); 
    }

    # set a temporary name to identify the current line.
    sub update { 
        my ( $self, $tip ) = @_;
        $self->{current} = $tip // '';
        say qq{After update, now: "$self".} if $self->{verbose};
        return $self;
    }

    sub null_current { delete $_[0]->{current}; }

    # used in overload
    sub as_string {
        my $self  = shift;
        return join( $self->{delim}, grep {; length } @{ $self }{ qw<base current> } );
    }
};

sub pair_up {
    return map { [ @_[ $_, $_ + 1 ] ] } grep { $_ % 2 == 0 } 0..$#_;
}

{   package PathProcessor; # our mux class

    # create a event list and handler, by splitting them into pairs.
    sub new { 
        my $self = bless [], shift;
        @$self   = &::pair_up;
        return $self;
    }

    # process the current path
    sub process_path { 
        my ( $self, $path ) = @_;
        foreach my $pair ( @$self ) {
            my ( $test, $func ) = @$pair;
            next unless ref( $test ) 
                    ? $path =~ /$test/ 
                    : substr( $path, - length( $test )) eq $test
                    ;
            my $v = $func->( $path );
            return $v || !defined( $v );
        }
        return 1;
    }
}

my $path  = LineEvent->new( base => 'x' );

my $processor  
    = PathProcessor->new( 
      '.Text3.Inputs.StyledText' => sub { s/\bText\b/_Styled_ Text/ || 1; }
    , '.ShadowDensity.Inputs.Alpha' => sub { 
          s/(Value \s+ = \s+ )\K(\d+(?:\.\d+)?)/0.5/x || 1;
      }
    #, '.!Close' => sub { 
    #    say 'Closed!';
    #  }
    );

# We only handle a couple of conditions...
while ( <DATA> ) { 
    chomp;
    # ... If there is a keyword as the first thing in line
    if ( m/^ \s* ( \p{IsUpper} \w+ \b )/gcx ) {
        $path->update( $1 );
        # ... if it is followed by a equals sign, an optional name and
        # and open-bracket
        if ( m/\G \s+ = \s+ (?: \p{IsUpper} \w+ \s+ )? [{] \s* $/gcx ) {
            $path->push_current;
        }
    }
    # ... if it's a closing brace with an optional comma. 
    elsif ( m/^ \s* [}] ,? \s* $/x ) { 
        $path->pop;
    }
    else {
        $path->null_current;
    }
    say $path;
    # you can omit a line by passing back a false value
    say if $processor->process_path( $path );
}

__DATA__
Composition {
  CurrentTime = 0,
  OutputClips = {
    "",
  },
  Tools = {
      Text3 = Text3D {
          NameSet = true,
          Inputs  = {
            Size       = Input { Value = 0.6282723, },
            Font       = Input { Value = "KG Shadow of the Day", },
            StyledText = Input { Value = "Your Text Goes Here 3", },
          },
      },
      ShadowDensity = BrightnessContrast {
          NameSet = true,
          Inputs  = {
            Alpha = Input { Value = 1, },
            Gain  = Input { Value = 0.5, },
            Input = Input {
                SourceOp = "Loader2",
                Source   = "Output",
            },
          },
          ViewInfo = OperatorInfo { Pos = { -220, 82.5, }, },
      },
  },
} 
```

输出是：

```
x.Composition
Composition {
x.CurrentTime
  CurrentTime = 0,
x.OutputClips.!Open
  OutputClips = {
x.OutputClips.!Text.1
    "",
x.OutputClips.!Close
  },
x.Tools.!Open
  Tools = {
x.Tools.Text3.!Open
      Text3 = Text3D {
x.Tools.Text3.NameSet
          NameSet = true,
x.Tools.Text3.Inputs.!Open
          Inputs  = {
x.Tools.Text3.Inputs.Size
            Size       = Input { Value = 0.6282723, },
x.Tools.Text3.Inputs.Font
            Font       = Input { Value = "KG Shadow of the Day", },
x.Tools.Text3.Inputs.StyledText
            StyledText = Input { Value = "Your _Styled_ Text Goes Here 3", },
x.Tools.Text3.Inputs.!Close
          },
x.Tools.Text3.!Close
      },
x.Tools.ShadowDensity.!Open
      ShadowDensity = BrightnessContrast {
x.Tools.ShadowDensity.NameSet
          NameSet = true,
x.Tools.ShadowDensity.Inputs.!Open
          Inputs  = {
x.Tools.ShadowDensity.Inputs.Alpha
            Alpha = Input { Value = 0.5, },
x.Tools.ShadowDensity.Inputs.Gain
            Gain  = Input { Value = 0.5, },
x.Tools.ShadowDensity.Inputs.Input.!Open
            Input = Input {
x.Tools.ShadowDensity.Inputs.Input.SourceOp
                SourceOp = "Loader2",
x.Tools.ShadowDensity.Inputs.Input.Source
                Source   = "Output",
x.Tools.ShadowDensity.Inputs.Input.!Close
            },
x.Tools.ShadowDensity.Inputs.!Close
          },
x.Tools.ShadowDensity.ViewInfo
          ViewInfo = OperatorInfo { Pos = { -220, 82.5, }, },
x.Tools.ShadowDensity.!Close
      },
x.Tools.!Close
  },
x.!Close
} 
```

# sql - 当月份是一月在oracle中使用存储过程时如何插入

> ID：14942022
> 
> 赞同：-3
> 
> 时间：2013-02-18T17:31:22.453
> 
> 标签：sql, oracle, plsql, oracle11g

```
CREATE OR REPLACE PROCEDURE spInsertSale2(SALES_ID in number,PRODUCT in varchar2,UNITCOST in decimal,QUANTITY in number)
AS
BEGIN
    if to_char(sysdate,'mm') from dual = '01' then
    {
        INSERT INTO Studenta_1004195.SALES VALUES(SALES_ID,PRODUCT,UNITCOST,QUANTITY);
    }endif
END spInsertSale2;
/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T17:38:18.150

您的语法已关闭：

```
CREATE OR REPLACE PROCEDURE spInsertSale2(
  SALES_ID in number,PRODUCT in varchar2,UNITCOST in decimal,QUANTITY in number)
AS
BEGIN
    if to_char(sysdate,'mm') = '01' then
        INSERT INTO Studenta_1004195.SALES 
        VALUES(SALES_ID,PRODUCT,UNITCOST,QUANTITY);
    end if;
END spInsertSale2;
/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T17:34:16.483

乍一看，您似乎缺少“选择”一词

```
AS BEGIN
if
this is where you are missing the word select
to_char(sysdate, 'mm') = '01'
etc 
```

# c++ - HashMap - 插入类型错误

> ID：14942028
> 
> 赞同：0
> 
> 时间：2013-02-18T17:31:54.430
> 
> 标签：c++, templates

在我的 main 方法中，以下代码在包含插入的行有错误。

```
hashTable<string, pair<string, string>> friendsHash = hashTable<string, pair<string, string>>(friendTotal);
        if(critChoice == 1)
        {
            for(int counter = 0; counter < friendTotal; counter ++)
            {
                string name = friends[counter].getName();
                string date = friends[counter].getBirthDate();
                string homeTown = friends[counter].getHomeTown();
                friendsHash.insert(pair<name, pair<date, homeTown>>);
            }
        } 
```

hashMap的插入函数如下：

```
template<class K, class E>
void hashTable<K, E>::insert(const pair<const K, E>& thePair)
{
    int b = search(thePair.first);

    //check if matching element found
    if(table[b] == NULL)
    {
        //no matching element and table not full
        table[b] = new pair<const K, E> (thePair);
        dSize ++;
    }
    else
    {//check if duplicate or table full
        if(table[b]->first == thePair.first)
        {//duplicate, change table[b]->second
            table[b]->second = thePair.second;
        }
        else //table is full
            throw hashTableFull();
    }
} 
```

错误是插入函数调用中的 3 个参数中的每一个`is not a valid template type argument for parameter`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T17:35:55.173

您正在混淆用于实例化类模板以获取类型的语法，以及用于实例化类型以获取对象的语法。

```
pair<name, pair<date, homeTown>> 
```

应该

```
make_pair(name, make_pair(date, homeTown)) 
```

或者如果你可以使用 C++11

```
{name, {date, homeTown}} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T17:39:32.643

在这一行：

```
friendsHash.insert(pair<name, pair<date, homeTown>>); 
```

您将某些变量的值作为*模板参数*提供给类 template `pair<>`。这是一个基本的误解：模板参数必须在编译时知道。因此，它们不能是变量。

但是，您可能在这里尝试做的不是指定`pair<>`类模板的正确实例化（应该是`pair<string, pair<string, string>>`，而是生成该类型的*实例*。

因此，您很可能希望将该行更改为：

```
friendsHash.insert(make_pair(name, make_pair(date, homeTown))); 
```

辅助函数模板`make_pair<>()`能够*推断*其参数的类型并生成正确的实例化`pair<>`，从而减轻您显式指定模板参数的负担。

# sql - 覆盖记录的 SQL 查询

> ID：14942039
> 
> 赞同：1
> 
> 时间：2013-02-18T17:32:34.070
> 
> 标签：sql, sql-server, linq

我有一个配置表，其中有 30 条默认配置记录。对于其他配置，我为那些不同的设置添加新记录。例如：

```
ConfigurationId     SettingKey          SettingValue
1(default)             A                    2
1(default)             B                    5
1(default)             C                    9
.                      .                    .
.                      .                    .
2                      A                    5
3                      B                    7 
```

在这里您可以看到默认设置的 ConfigurationId 1 具有所有 30 个设置。对于其他配置，例如 2 仅针对 A 设置，而 3 仅针对 B

因此，当我获取 Id 2 的记录时，我希望 2 中不存在的所有 SettingKey 和 SEttingValue 应该来自 1 并且存在于 2 中的将像这样被覆盖

```
ConfigurationId     SettingKey          SettingValue
2                     A                    5
2                     B                    5
2                     C                    9 
```

所以对于 2，所有 30 个设置都应该来自 1，这将被 2 中可用的设置覆盖。在上面的 SettingKey A 已被 2 覆盖。B，C 来自 1

请问我是否不清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T17:41:55.357

你可以试试这个。

```
DECLARE @SeletedConfigurationID int

SELECT Settingkey, SettingValue
FROM
    (
    SELECT SettingKey, SettingValue,
        row_number() over (partition BY SettingKey ORDER BY ConfiurationID DESC) AS rn
    FROM Configuration
    WHERE ConfigurationID = 1
        OR ConfigurationID = @SelectedConfigurationID
    ) AS Settings
WHERE rn = 1
ORDER BY SettingKey 
```

内部派生查询从默认配置 (ConfigurationID = 1) 中获取行以及所选配置的行。它为每个设置键设置一个行号，其中第 1 行将来自所选配置（如果存在）。否则，将使用默认配置中的值。

外部查询仅选择第一行，其中行号为 1。

# c# - 有没有更好的方法使用 .NET 将文件移动到只读文件夹？

> ID：14942042
> 
> 赞同：0
> 
> 时间：2013-02-18T17:32:41.813
> 
> 标签：c#, service, directory, move, readonly

我正在编写一个 C#/WPF 业务应用程序，它需要（除其他外）重新组织一些媒体文件（音频、视频和图像文件）。应用程序还必须在当前用户的安全上下文中运行，因此具有与他们相同的访问权限。

该应用程序将成为可以访问媒体的一个地方，以阻止对文件进行任何未经授权的访问。我最初的想法是将媒体组织在只读文件夹中，并使用具有适当权限的服务将文件移动到只读文件夹中。

实际应用程序将无权将文件移动到只读文件夹，因为它共享当前用户的权限，而当前用户不能访问该文件夹。

起初，我查看了一个 Windows 服务，但认为与它进行通信设置起来太痛苦了。因此，我正在使用 WCF 服务，但是虽然服务设置有效，但拥有一个只有一种方法“MoveFile”的服务似乎有点浪费......应用程序（和用户）仍然可以从文件夹中读取，只是不写它。

将文件移动到 .NET 中的只读文件夹是否有更好的解决方案？例如，是否可以在将文件移动到只读文件夹时让应用程序的一部分作为单独的用户运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T18:08:43.733

如果当前用户正在运行应用程序，那么应用程序应该具有相同的权限。您无需移动到只读文件夹即可绕过安全性。如果当前用户没有适当的权限，您可能必须捕获诸如 UnauthorizedAccessException 之类的异常。

您是否测试过读取具有不同访问级别的目录和文件以查看它是否自动工作？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T09:51:08.340

您是否尝试过**模拟**从主应用程序中移动文件的过程？您可以使用：[WindowsIdentity.Impersonate 方法](http://msdn.microsoft.com/library/vstudio/w070t6ka)

# maven - 强制 maven 在其他模块之前构建插件

> ID：14942047
> 
> 赞同：2
> 
> 时间：2013-02-18T17:32:59.937
> 
> 标签：maven

在一个多模块项目中，其中包含其他普通模块使用的一些 Maven 插件，例如：

```
parent
|
 ---- maven-plugins
      |
       ---- plugin1
      |
       ---- plugin2
|
 ---- module1
|
 ---- module2
|
 ---- ...
|
 ---- moduleN 
```

有什么方法可以强制 Maven 在其他人之前构建/安装插件工件？

我的意思是，我想避免在构建父项目之前手动安装插件的步骤。我试图把它放在模块的第一个，但没有结果，reactor 插件看起来无法处理它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:17:19.817

我认为这是由于 Maven 中的一个错误：

[MNG-1911 - 在反应器中构建带有扩展的插件失败](http://jira.codehaus.org/browse/MNG-1911)

您需要首先在反应器之外构建插件，以使它们可用于其他模块。

# jquery - 为什么我的 jquery .on('change') 不适用于动态添加的选择

> ID：14942048
> 
> 赞同：23
> 
> 时间：2013-02-18T17:32:59.880
> 
> 标签：jquery

我正在动态添加选择元素，如下面的 HTML 所示。我不确定为什么 .on('change' ...) 不适用于动态选择。我错过了什么？

我正在使用 Chrome 24.0.1312.57 + jquery 1.8.3。

```
<script type="text/javascript">
  $(document).ready(function() {
      $('#x select').on('change', function () { alert('helo'); })
      $('#y select').on('change', function () { alert('helo'); })

      $('#x').html($('#y').html());
  });
</script>

<div id="x"></div>
<div id="y">
    <select>
        <option>O1</option>
        <option>O2</option>
    </select>
</div> 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-02-18T17:41:29.977

你的代码：

```
$('#x select').on('change', function () { alert('helo'); }) 
```

将事件处理程序附加到 #x 元素内的选择。

你想要的（据我所知）是这样的：

```
$("#y").on('change','select',function () { alert('helo'); }); 
```

这会将事件处理程序附加到 #y 元素，该元素被委托给其子“选择”元素

来自[http://api.jquery.com/on/](http://api.jquery.com/on/)

> .on() 方法将事件处理程序附加到 jQuery 对象中当前选定的元素集。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-18T17:38:41.683

事件绑定到初始页面加载时不在 DOM 中的元素将不起作用。您需要绑定到存在的 DOM 更上层的元素，以允许事件向下传播。这通常是我采取的方法：

```
$(document).on({
  change: function() {
    alert('helo');
  }
}, '#x select');

$(document).on({
  change: function() {
    alert('helo');
  }
}, '#y select'); 
```

我更喜欢它，因为您可以轻松添加后续事件。

```
$(document).on({
  change: function() {
    alert('helo');
  },
  blur: function() {
    alert('helo');
  }
}, '#x select'); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-03-14T06:48:08.257

但是，不要使用`.live()`/ `.bind()`/ `.delegate()`。你应该使用 . `on()`.

对于静态和动态选择更改

```
$(document).on('change', 'select', function (e) {
    // do something 
}); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-18T17:38:41.327

您的事件绑定设置在 $(document).ready() 上。但是，如果您稍后动态添加它们（例如通过 jQuery.appendTo() 等），则需要绑定新添加的组件，因为它们不是 $(document).ready() 中发生的初始组件的一部分，它只在页面加载并且 DOM 初始完成时运行一次。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-18T17:35:06.953

正确的语法：

```
 $('#x').on(
        'change', 
         'select', 
          function () { 
            alert('helo'); 
          }
       ); 
```

`on()`所以动态元素的语法似乎是：

```
$(staticParent).on( eventName, target, handler); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-18T17:40:48.600

.on() 的全部意义在于您可以将事件绑定到文档以外的其他内容。这就是现在贬值的 .live() 所做的，并且在大多数情况下效率低下。您需要将事件绑定到最近的不会动态更改的父元素。

据我所知，这是正确的语法：

```
$('#x').on('change', 'select', function(){
    alert('hello');
}); 
```

如果 #x 或 #y 将被更改，请将它们包装在一个元素上并将事件绑定到该元素。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-09-01T17:45:08.840

这很简单。无论您的目标是什么类别或 id，请尝试更精确，但无需包含超级父级。

错误方式示例：

```
 $('#tablecontent').on('change', '#tablecontent > table.CampaignGrid > tbody > tr > td', function(e) {
            console.log('IN TABLE CONTENT CHANGE');
            var value = e.target.value;
            $('button#updateLuck').prop('disabled', false).css({'color': '#000', 'font-weight': 600});

            //alert($(ele[0]).html());
        });
```

正确方法：

```
 $('#tablecontent').on('change', 'table.CampaignGrid > tbody > tr > td', function(e) {
            console.log('IN TABLE CONTENT CHANGE');
            var value = e.target.value;
            $('button#updateLuck').prop('disabled', false).css({'color': '#000', 'font-weight': 600});

            //alert($(ele[0]).html());
        });
```

请注意，我删除了超级父级：'#tablecontent'

这一切都与清晰度有关。

*   五

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-11-21T09:59:02.387

```
 $('#tablecontent').on('change', '#tablecontent > table.CampaignGrid > tbody > tr > td', function(e) {
            console.log('IN TABLE CONTENT CHANGE');
            var value = e.target.value;
            $('button#updateLuck').prop('disabled', false).css({'color': '#000', 'font-weight': 600});

            //alert($(ele[0]).html());
        });
```

```
 $('#tablecontent').on('change', '#tablecontent > table.CampaignGrid > tbody > tr > td', function(e) {
            console.log('IN TABLE CONTENT CHANGE');
            var value = e.target.value;
            $('button#updateLuck').prop('disabled', false).css({'color': '#000', 'font-weight': 600});

            //alert($(ele[0]).html());
        });
```

```
 $('#tablecontent').on('change', 'table.CampaignGrid > tbody > tr > td', function(e) {
            console.log('IN TABLE CONTENT CHANGE');
            var value = e.target.value;
            $('button#updateLuck').prop('disabled', false).css({'color': '#000', 'font-weight': 600});

            //alert($(ele[0]).html());
        });
```

```
 $('#tablecontent').on('change', '#tablecontent > table.CampaignGrid > tbody > tr > td', function(e) {
            console.log('IN TABLE CONTENT CHANGE');
            var value = e.target.value;
            $('button#updateLuck').prop('disabled', false).css({'color': '#000', 'font-weight': 600});

            //alert($(ele[0]).html());
        });
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-11-21T10:02:14.100

方括号中的单词是替代文本，如果浏览器无法显示图像，则会显示该文本。确保为屏幕阅读软件包含有意义的替代文本。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-05-06T15:59:16.913

遇到了这个问题，因为我无法获得动态创建的选择，这些选择是从具有动态 id 的 ajax 帖子返回的，以触发事件。

```
$(document).on('change', 'select', function (e) {
    $("#theDiv select").on("change",function(){ post("SelectChanged");} );
}); 
```

这在我先改变一些东西之前是行不通的，所以我添加了

```
$("#theDiv select").on("change",function(){ post("SelectChanged");} ); 
```

但这并不意味着，在更改之后，所有其他更改都会触发两次。这可能不是很好的做法。但我所做的是放入一个在开始时调用的函数，并且每次返回 ajax。

```
 `function myFuncs(){
    $('#theDiv select').unbind('change');
    $('#theDiv select').on('change' function(){ post('selectChanged'); });
  }` 
```

但是必须在每个函数调用开始时解除绑定，否则每次都会使函数加倍。我确信必须有一个正确的方法来做到这一点，我只是还没有找到它。感谢您开始提问。

# data-structures - T-trees：为什么它们不用于磁盘索引？

> ID：14942049
> 
> 赞同：1
> 
> 时间：2013-02-18T17:33:02.510
> 
> 标签：data-structures

我最近一直在研究 B+ 树和 T-树。似乎有一种趋势，即 B+ 树用于磁盘索引，而 T 树用于内存。

我相信这是由于磁盘 I/O 造成的，但我找不到任何证实这一概念的东西。我的假设是否正确？

此外，如果 T-tree 的磁盘访问可以通过缓存限制为 log B，那么它们在 logB N 上的性能难道不能胜过 B+ 树吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T18:32:00.613

T-Tree本质上是一棵二叉树。因此，树深度类似于 T-Tree 的 log2(N/B) 与 B+Tree 的 logB(N) （N=#data 项，B=存储在每个节点中的键数=B 的分支因子+树）。这些是近似的，因为两棵树在每个节点中都没有固定数量的项目。无论如何，对于大 N，B+Tree 将在该指标上轻松获胜。在统一内存访问的假设下，该数字无关紧要，但在辅助存储上确实很重要，它大致是辅助存储访问的数量。它在具有分层内存的现代机器上也很重要（在 Vax 11/750 上测试的原始 T-Tree 论文）。

我对如何为各自的环境更新这两种结构做出了上述假设。我相信它们是对称和公平的。我主要假设数据和密钥通过引用存储在内存中并通过复制存储在辅助存储中。如果不以这种方式调整结构，对于将统一访问成本作为其设计核心的 T-tree 来说将是灾难性的，因为每个密钥比较都需要外部访问。对于非固定大小的数据，在这两种情况下（并在现实世界中使用）都需要进行一些其他的打包调整。

# tomcat7 - RESTlet ClientResource 在多次调用远程主机后挂起

> ID：14942050
> 
> 赞同：0
> 
> 时间：2013-02-18T17:33:04.820
> 
> 标签：tomcat7, restlet, freeze, restlet-2.0

我正在使用 RESTlet ClientResource 从服务器资源调用 Google Places 端点。具体来说，REST 请求调用 RESTlet ServerResource，后者调用 ClientResource 并返回 Google Places 结果。这在 Tomcat 中作为 Web 应用程序运行。

这可以正常工作大约一个小时，然后每个请求都会挂起。停止 tomcat 后，我​​看到所有请求都在日志中得到处理。这是非常不稳定的，因为 Tomcat 需要每隔一小时重新启动一次。

我已经寻求答案一段时间了，发现问题可能是连接没有被释放。建议是在表示上使用耗尽并在客户端资源上停止。

我正在使用restlets 2.1.1 的最新稳定版本。

以下是我执行上面解释的过程的方式：

```
 ClientResource storeRoot = new ClientResource(placeEndPoint);
 Client c = (Client)storeRoot.getNext();

 String jsonString = storeRoot.get().getText();
    try {
    c.stop();
} catch (Exception e) {
    e.printStackTrace();
}

storeRoot.release(); 
```

在服务器资源返回表示的部分中，我称之为排气，如下所示：

```
 JSONArray ja = new JSONArray(placesList);
    JsonRepresentation jr = new JsonRepresentation(ja);
    jr.setCharacterSet(CharacterSet.UTF_8);
    try {
        jr.exhaust();
        jr.release();
    } catch (IOException e) {
        e.printStackTrace();
    } finally{

    }

    return jr; 
```

有谁知道如何阻止客户端资源挂起？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-21T03:20:13.253

ClientConnectionHelper 负责关闭 ClientResource 的连接。每当您完成请求时，您应该调用 storeRoot.release() 来告诉 ClientConnectionHelper 停止连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T18:08:16.250

问题是 ClientResource 有关闭连接的问题。对我有用的是使用 apache httpclient。

我使用以下方法在 RESTlet 资源中执行 http get：

```
 public String httpGet(String url) throws IllegalStateException, IOException {

    HttpClient httpclient = new DefaultHttpClient();

     // Prepare a request object
     HttpGet httpget = new HttpGet(url);

     // Execute the request
     HttpResponse response = httpclient.execute(httpget);

     // Examine the response status
     System.out.println(response.getStatusLine());

     // Get hold of the response entity
     HttpEntity entity = response.getEntity();

     // If the response does not enclose an entity, there is no need
     // to worry about connection release
     if (entity != null) {
         InputStream instream = entity.getContent();
         try {

             BufferedReader reader = new BufferedReader(
                     new InputStreamReader(instream));
             // do something useful with the response
             //System.out.println(reader.readLine());

             StringBuilder builder = new StringBuilder();
             String aux = "";

             while ((aux = reader.readLine()) != null) {
                 builder.append(aux);
             }

             String text = builder.toString();

             return text;

         } catch (IOException ex) {

             // In case of an IOException the connection will be released
             // back to the connection manager automatically
             throw ex;

         } catch (RuntimeException ex) {

             // In case of an unexpected exception you may want to abort
             // the HTTP request in order to shut down the underlying
             // connection and release it back to the connection manager.
             httpget.abort();
             throw ex;

         } finally {

             // Closing the input stream will trigger connection release
             instream.close();
             httpclient.getConnectionManager().shutdown();
         }

         // When HttpClient instance is no longer needed,
         // shut down the connection manager to ensure
         // immediate deallocation of all system resources

     }

     return null;
  } 
```

# c# - LINQ/DataTable 查询重复

> ID：14942054
> 
> 赞同：0
> 
> 时间：2013-02-18T17:33:12.193
> 
> 标签：c#, sql, linq, datatable, group-by

我正在尝试将 SQL 语句转换为 LINQ 并且遇到了一些困难。基本上，我正在尝试查询包含产品导航数据的 DataTable（4 个类别级别的 ID 和描述，例如男士 > 夹克 > 夏季 > 套头衫）。导航类别应按顺序出现且没有“重复”。我的意思是，一旦描述出现在数据行中，它可能会再次发生，但是一旦它更改为另一个描述，它就不能再变回之前的描述。我在 Access 中开发了这个 SQL 查询，它似乎对我的测试数据做了我需要它做的事情：

```
SELECT Count(Nav.Level1Text) AS CountOfLevel1Text, Nav.Level1ID, Nav.SO, Nav.DC, Nav.Language
FROM Nav
GROUP BY Nav.Level1ID, Nav.SO, Nav.DC, Nav.Language
HAVING Count(Nav.Level1Text) > 1; 
```

这是我到目前为止所得到的：

```
var query = from table in navTable.AsEnumerable()
            group table by new
                           {
                               Cat1Id = table["Cat1Id"],
                               Cat1Text = table["Cat1Desc"],
                               SalesOrg = table["SalesOrg"],
                               DistChan = table["DistChan"],
                               Language = table["Language"]
                            }
            into groupedTable
            where groupedTable.Key.Cat1Text.Count() > 1 //Count doesn't exist
            select new {Cat1Count = groupedTable.Key.Cat1Text.Count(), groupedTable.Key.Cat1Id, groupedTable.Key.SalesOrg,
            groupedTable.Key.DistChan, groupedTable.Key.Language}; 
```

看起来我已经很接近了，但是我在“哪里”这块上遇到了麻烦。我不知道如何获得 Level1Text 的计数（没有 Cat1Text.Count 方法，但我把它留在里面来演示我认为它应该做什么）。

编辑：所以我意识到我没有很清楚地解释这一点，但是查询检测到何时有一个 Cat1Id 分配给了 2 个不同的 Cat1Desc。这就是我所说的“重复”。例如，如果 Cat1Id 为“1”且 Cat1Desc 为“Mens”，然后出现 Cat1Id 为“2”且 Cat1Desc 为“Womens”，则此查询应该让我知道，因为“Count(Cat1Desc) > 1”使用不同的 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:51:01.957

我想出了解决方案并想发布以便其他人可以看到：

```
var query = from table in navTable.AsEnumerable()
            group table by new
            {
                Cat1Id = table["Cat1Id"], SalesOrg = table["SalesOrg"],
                DistChan = table["DistChan"], Language = table["Language"]
            }
            into groupedTable
            where groupedTable.Select(x => x["Cat1Desc"]).Distinct().Count() > 1
            select new
            {
                Cat1Count = groupedTable.Select(x => x["Cat1Desc"]).Distinct().Count(),
                groupedTable.Key.Cat1Id, groupedTable.Key.SalesOrg,
                groupedTable.Key.DistChan, groupedTable.Key.Language
            }; 
```

从组中删除 'Cat1Desc' 然后在 'where' 和 'select' 中使用 Distinct() 很重要。

# xml-parsing - 如何创建具有多个付款配置文件（CIM）的客户配置文件？

> ID：14942055
> 
> 赞同：1
> 
> 时间：2013-02-18T17:33:18.220
> 
> 标签：xml-parsing, payment-gateway, authorize.net, authorize.net-cim

如何创建具有多个付款配置文件（CIM）的客户配置文件？

使用单一付款配置文件创建客户配置文件工作正常。但是，当我尝试将两个或多个付款资料添加到客户资料时，我收到以下错误。

> E00003 - 命名空间“AnetApi/xml/v1/schema/AnetApiSchema.xsd”中的元素“paymentProfiles”在命名空间“AnetApi/xml/v1/schema/AnetApiSchema.xsd”中具有无效的子元素“customerType”。预期的可能元素列表：命名空间“AnetApi/xml/v1/schema/AnetApiSchema.xsd”中的“driversLicense，taxId”。

```
for (int 1=0;i< n;i++){
    list.add (createPaymentProfile());
}

Transaction.setPaymentProfileList(list); 
```

上面的代码生成如下所示的 xml。

```
<?xml version="1.0" encoding="UTF-8"?>

<createCustomerProfileRequest xmlns="AnetApi/xml/v1/schema/AnetApiSchema.xsd">
   <merchantAuthentication>
      <name>33k7hYV736488Bs8</name>
      <transactionKey>86SV776773Ac6tMV22313fE</transactionKey>
   </merchantAuthentication>
   <refId>1361101257555</refId>
   <profile>
      <merchantCustomerId>2CLINC056</merchantCustomerId>
      <description>hiiiiii.</description>
      <email />
      <paymentProfiles>
         <customerType>individual</customerType>
         <billTo>
            <firstName>Joe</firstName>
            <lastName>Test</lastName>
            <company>CompanyA</company>
            <address>hello</address>
            <city>Bangalore</city>
            <state>Delhi</state>
            <zip>560078</zip>
            <country>IN</country>
            <phoneNumber>415-555-1212</phoneNumber>
            <faxNumber>415-555-1313</faxNumber>
         </billTo>
         <payment>
            <creditCard>
               <cardNumber>370000000000002</cardNumber>
               <expirationDate>2029-12</expirationDate>
            </creditCard>
         </payment>
         <customerType>individual</customerType>
         <billTo>
            <firstName>Joe</firstName>
            <lastName>Test</lastName>
            <company>CompanyA</company>
            <address>vel</address>
            <city>Chennai</city>
            <state>AK</state>
            <zip>560089</zip>
            <country>US</country>
            <phoneNumber>415-555-1212</phoneNumber>
            <faxNumber>415-555-1313</faxNumber>
         </billTo>
         <payment>
            <creditCard>
               <cardNumber>38000000000006</cardNumber>
               <expirationDate>2029-12</expirationDate>
            </creditCard>
         </payment>
      </paymentProfiles>
   </profile>
   <validationMode>testMode</validationMode>
    </createCustomerProfileRequest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-23T19:23:23.270

万一其他人好奇，您必须`<paymentProfiles></paymentProfiles>`为要创建的每个付款配置文件重复此操作。

```
<?xml version="1.0" encoding="UTF-8"?>

<createCustomerProfileRequest xmlns="AnetApi/xml/v1/schema/AnetApiSchema.xsd">
   <merchantAuthentication>
      <name>33k7hYV736488Bs8</name>
      <transactionKey>86SV776773Ac6tMV22313fE</transactionKey>
   </merchantAuthentication>
   <refId>1361101257555</refId>
   <profile>
      <merchantCustomerId>2CLINC056</merchantCustomerId>
      <description>hiiiiii.</description>
      <email />
      <paymentProfiles>
         <customerType>individual</customerType>
         <billTo>
            <firstName>Joe</firstName>
            <lastName>Test</lastName>
            <company>CompanyA</company>
            <address>hello</address>
            <city>Bangalore</city>
            <state>Delhi</state>
            <zip>560078</zip>
            <country>IN</country>
            <phoneNumber>415-555-1212</phoneNumber>
            <faxNumber>415-555-1313</faxNumber>
         </billTo>
         <payment>
            <creditCard>
               <cardNumber>370000000000002</cardNumber>
               <expirationDate>2029-12</expirationDate>
            </creditCard>
         </payment>
        </paymentProfiles>
        <paymentProfiles>
         <customerType>individual</customerType>
         <billTo>
            <firstName>Joe</firstName>
            <lastName>Test</lastName>
            <company>CompanyA</company>
            <address>vel</address>
            <city>Chennai</city>
            <state>AK</state>
            <zip>560089</zip>
            <country>US</country>
            <phoneNumber>415-555-1212</phoneNumber>
            <faxNumber>415-555-1313</faxNumber>
         </billTo>
         <payment>
            <creditCard>
               <cardNumber>38000000000006</cardNumber>
               <expirationDate>2029-12</expirationDate>
            </creditCard>
         </payment>
      </paymentProfiles>
   </profile>
   <validationMode>testMode</validationMode>
    </createCustomerProfileRequest> 
```

# android - 如何通过意图从微调器发送字符串

> ID：14942056
> 
> 赞同：-1
> 
> 时间：2013-02-18T17:33:19.780
> 
> 标签：android, android-spinner

我在从 a 获取信息`Spinner`并将其通过意图传递给另一个活动时遇到问题。

意图发送一个包，其中包含来自 an 的字符串`EditText`以及来自 的项目`Spinner`。

我认为问题是由于`getText()`下面的行。但是我不确定如何解决这个问题。

```
String messagecolor = editTextcolor.getText().toString(); 
```

任何人都可以提供有关问题所在的见解吗？

```
 package com.example.myfirstapp;

    import android.app.Activity;
    import android.content.Intent;
    import android.os.Bundle;
    import android.view.Menu;
    import android.view.View;
    import android.widget.AdapterView;
    import android.widget.AdapterView.OnItemSelectedListener;
    import android.widget.ArrayAdapter;
    import android.widget.EditText;
    import android.widget.Spinner;

    public class MainActivity extends Activity {
        public final static String EXTRA_MESSAGE = "com.example.myfirstapp.MESSAGE";
        public final static String EXTRA_MESSAGE_COLOR = "com.example.myfirstapp.MESSAGE2";

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);

            Spinner spinner = (Spinner) findViewById(R.id.spinner);
            // Create an ArrayAdapter using the string array and a default spinner layout
            ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this,
                    R.array.color_array, android.R.layout.simple_spinner_item);
            // Specify the layout to use when the list of choices appears
            adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            // Apply the adapter to the spinner
            spinner.setAdapter(adapter);

        class SpinnerActivity extends Activity implements OnItemSelectedListener {
            public void onItemSelected(AdapterView<?> parent, View view, 
                    int pos, long id) {
                // An item was selected. You can retrieve the selected item using
                // parent.getItemAtPosition(pos)
            }

            public void onNothingSelected(AdapterView<?> parent) {
                // Another interface callback

            Spinner spinner = (Spinner) findViewById(R.id.spinner);
            spinner.setOnItemSelectedListener(this);
            }
        }
        }

        @Override
        public boolean onCreateOptionsMenu(Menu menu) {
            // Inflate the menu; this adds items to the action bar if it is present.
            getMenuInflater().inflate(R.menu.activity_main, menu);
            return true;
        }  

    /** Called when the user clicks the Send button */
    public void sendMessage (View view)   {
        Intent i = new Intent(this, DisplayMessageActivity.class);
        EditText editText = (EditText) findViewById(R.id.edit_message);
        Spinner editTextcolor = (Spinner) findViewById(R.id.spinner);
        String message = editText.getText().toString();
        String messagecolor = editTextcolor.getText().toString();
        Bundle extras = new Bundle();
        extras.putString(EXTRA_MESSAGE, message);
        extras.putString(EXTRA_MESSAGE_COLOR, messagecolor );
        i.putExtras(extras);
        startActivity(i);

    }} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:42:36.910

您可能面临的问题是您没有获得所选项目的字符串。您可以尝试使用[`getSelectedItem()`](http://developer.android.com/reference/android/widget/Spinner.html)：

```
String messagecolor = editTextcolor.getSelectedItem().toString(); 
```

这个方法*可以*返回`null`，所以你也应该检查一下。

# android - Android 异常 org.xmlpull.v1.XmlPullParserException：预期：START_TAG

> ID：14942057
> 
> 赞同：0
> 
> 时间：2013-02-18T17:33:20.940
> 
> 标签：android, web-services, exception, android-ksoap2, xmlpullparser

我一直在尝试使用 .NET webservice（首先测试的 HelloWorld 方法），使用几乎与另一个 webservice 相同的代码。

```
public class MainActivity extends Activity {

    private static final String SOAP_ACTION = "http://tempuri.org/HelloWorld";

    private static final String METHOD_NAME = "HelloWorld";

    private static final String NAMESPACE = "http://tempuri.org/";
    private static final String URL = "http://demo.digiparc.com/autocomplete.asmx";

    private static final String TAG = "MyActivity";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        TextView tv = (TextView)findViewById(R.id.textView1);

        SoapObject Request = new SoapObject(NAMESPACE,METHOD_NAME);

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.dotNet=true;
        envelope.setOutputSoapObject(Request);

        HttpTransportSE aht = new HttpTransportSE(URL);

        try{

            aht.call(SOAP_ACTION,envelope);
            Log.i(TAG, "ind");
            SoapPrimitive resultString = (SoapPrimitive)envelope.getResponse();
            System.out.println("Result: "+resultString);
            tv.setText("Status : " + resultString);

        }
        catch(Exception e){
            Log.i(TAG, e.toString());
            e.printStackTrace();
        }

    } 
```

我的第一个日志没有出现在 logcat 中，第二个日志我发现了以下异常：

```
org.xmlpull.v1.XmlPullParserException: expected: START_TAG {http://schemas.xmlsoap.org/soap/envelope/}Envelope (position:START_TAG <html>@1:6 in java.io.InputStreamReader@45f9a950) 
```

难道我做错了什么 ？如果有人遇到同样的问题或有任何线索可以提供帮助吗？我的 Web 服务详细信息是准确的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:35:57.600

它不是 android 或 WebService 的问题。
可能有一个不允许它在线运行`app_html.offline`。 转到 C# 中的解决方案资源管理器。 右键单击并将其从项目中排除。:D`APPCODE`

# c# - 是否有 IQueryable 提供程序来保留订单？

> ID：14942061
> 
> 赞同：0
> 
> 时间：2013-02-18T17:33:31.480
> 
> 标签：c#, linq, iqueryable

我想创建一个自定义`IQueryable`提供程序。

我的`IQueryable`实现是否保留了源元素的顺序？

例如，可以`(new [] { 1, 2, 3 }).AsMyQueriable().Select(x => x).ToArray()`退货`3, 2, 1`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:37:18.013

不。

如果使用您的提供程序的任何人需要以特定顺序访问元素，他们可以使用[`IQueryable.OrderBy`](http://msdn.microsoft.com/en-us/library/bb549264.aspx)代替。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T17:36:20.717

从技术上讲，您的可查询对象可以做任何感觉。作为`IQueryable`一个接口，没有构造函数，因此在这方面没有必须遵循的约定——可查询对象只是可以通过某些特定方法查询的东西，它的开始状态不包含在接口契约。但是，您的扩展方法的文档应该清楚地表明输入序列的顺序是否由返回的`IQueryable`对象保留。

当然，如果有人调用`.OrderBy()`您的可查询实例，那么您应该相应地重新排序元素。但是，如果开发人员不调用，`.OrderBy()`那么您可以自由地以您想要的任何顺序返回元素。

# java - Spring防止表单标签的自动ID

> ID：14942063
> 
> 赞同：0
> 
> 时间：2013-02-18T17:33:38.833
> 
> 标签：java, spring, jquery-ui, jsp

我在我的 web 应用程序中为表单使用弹簧表单标签。现在我看到所有输入的弹簧自动生成 ID，选择元素。我在单独的选项卡中有几个表单，这些表单可能具有相同名称的输入（例如 user_category in ）。Spring 使用输入元素的名称作为标签的 id。这成为一个问题，因为我在同一页面的不同形式中有多个具有相同名称的输入。我最终得到了多个具有相同 ID 的选择元素。当我使用[jquery-ui-multiselect](http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/)插件来装饰我的选择框时，问题变得更糟。如果同一页面上有多个具有相同 id 的选择器，则更改其中一个选择器上的选择会影响另一个选择器。

我发现的一种解决方法是明确地为我的所有选择框提供唯一 ID。但我认为更简洁的方法是防止 spring 完全在表单标签上生成 id。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T19:50:52.017

Spring`<form:...>`标签允许你指定一个`id`属性，例如：

```
<form:select id="select1"...> 
```

因此，您可以指定自己的`id`s.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-26T13:23:40.700

似乎只有一种简单而明显的方法可以防止写入“id”属性（至少在 Spring 4.1.4 中）——只是设置一个空的 id：

```
<form:input id="" .../> 
```

然后*AbstractDataBoundFormElementTag#resolveId()*将返回 null 而*AbstractFormTag#writeOptionalAttribute*将跳过它。

# c# - 线和标记 只看到标记，但没有线条？

> ID：14942064
> 
> 赞同：0
> 
> 时间：2013-02-18T17:33:38.830
> 
> 标签：c#, wpf, marker, linegraph, dynamic-data-display

我正在尝试绘制由一堆与线相连的点表示的数据。但是，当我绘制绘图时，我只能看到显示的点，但看不到任何线条。我不知道有什么问题。这是我的代码，这就是 LineAndMarker 绘图仪的启动方式：

```
public SignalStatsDisplay()
        {
            InitializeComponent();

            plotter.Legend.Remove();

            _initialChildrenCount = plotter.Children.Count;

            int count = plotter.Children.Count;

            //do not remove the initial children
            if (count > _initialChildrenCount)
            {
                for (int i = count - 1; i >= _initialChildrenCount; i--)
                {
                    plotter.Children.RemoveAt(i);
                }
            }

            _nColorChannels = 4;

           // _lineprofileColor = new Color[4];

           // _lineprofileColor[0] = Colors.Transparent;
            //_lineprofileColor[1] = Colors.Red;
           // _lineprofileColor[2] = Colors.Black;
           // _lineprofileColor[3] = Colors.Blue;

            LineAndMarker<MarkerPointsGraph> lam = new LineAndMarker<MarkerPointsGraph>();
            CirclePointMarker pm = new CirclePointMarker { Size = 5, Fill = Brushes.Red };

            if (_nColorChannels > 0)    // plotter init
            {
                _dataX = new List<int[]>();
                _dataY = new List<int[]>();

                int[] dataXOneCh = new int[1];
                int[] dataYOneCh = new int[1];

                dataXOneCh[0] = 0;
                dataYOneCh[0] = 0;

                for (int i = 0; i < 4; i++)
                {
                    _dataX.Add(dataXOneCh);    // data x-y mapping init
                    _dataY.Add(dataYOneCh);

                    EnumerableDataSource<int> xOneCh = new EnumerableDataSource<int>(dataXOneCh);
                    EnumerableDataSource<int> yOneCh = new EnumerableDataSource<int>(dataYOneCh);

                    xOneCh.SetXMapping(xVal => xVal);
                    yOneCh.SetXMapping(yVal => yVal);

                    CompositeDataSource dsOneCh = new CompositeDataSource(xOneCh, yOneCh);

                    lam = plotter.AddLineGraph(dsOneCh,
                        (new Pen(Brushes.Green, 2)),
                         new CirclePointMarker { Size = 5, Fill = Brushes.Yellow },
                        (new PenDescription("Data")));

                }

                plotter.FitToView();
            }
            else
            {
                return;
            }
        } 
```

以下是动态显示数据的更新方式：

```
 public void RedrawSignalAnalysisPlot()
        {
            int startIndex = _initialChildrenCount;

            if ((_nColorChannels > 0) && (_dataX != null) && (_dataY != null))
            {
                CompositeDataSource[] dsCh = new CompositeDataSource[_nColorChannels];

                //for (int i = 0; i < 4; i++)    // color reset
               // {
               //     ((LineGraph)plotter.Children.ElementAt(startIndex + i)).LinePen = new Pen(new SolidColorBrush(Colors.Transparent), 1);
              //  }

                for (int i = 0; i < 1; i++)
                {
                    if (_dataX[i].Length == _dataY[i].Length)
                    {
                        EnumerableDataSource<int> xOneCh = new EnumerableDataSource<int>(_dataX[i]);
                        xOneCh.SetXMapping(xVal => xVal);
                        EnumerableDataSource<int> yOneCh = new EnumerableDataSource<int>(_dataY[i]);
                        yOneCh.SetYMapping(yVal => yVal);
                        CompositeDataSource ds = new CompositeDataSource(xOneCh, yOneCh);

                        Action UpdateData = delegate()
                        {

                            ((PointsGraphBase)plotter.Children.ElementAt(startIndex + i + 1)).DataSource = ds;
                            //((CirclePointMarker)plotter.Children.ElementAt(startIndex + i + 1)).Pen = new Pen(new SolidColorBrush(Colors.Green), 1);                

                        };

                        this.Dispatcher.Invoke(System.Windows.Threading.DispatcherPriority.Normal, UpdateData);
                    }
                }

                Action PlotFitToView = delegate()
                {
                    plotter.FitToView();

                };
                this.Dispatcher.Invoke(System.Windows.Threading.DispatcherPriority.Normal, PlotFitToView);
            }
        } 
```

基本思路很简单：创建绘图仪，然后只更新数据和颜色。我只看到彼此分开的红点，但我没有看到任何绿色，或者连接这些点的任何颜色线。我很困惑。谁能指出我哪里做错了？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T20:36:26.987

这是因为我没有更新行数据。这是新代码：

```
 Action UpdateData = delegate()
                        {
                            ((LineGraph)plotter.Children.ElementAt(startIndex + i)).DataSource = ds;
                            ((LineGraph)plotter.Children.ElementAt(startIndex + i)).LinePen = new Pen(new SolidColorBrush(Colors.Green), 1);

                            ((PointsGraphBase)plotter.Children.ElementAt(startIndex + i + 1)).DataSource = ds;
                            ((MarkerPointsGraph)plotter.Children.ElementAt(startIndex + i + 1)).Marker = new CirclePointMarker { Size = 5, Fill = Brushes.Red };                 
                        };

                        this.Dispatcher.Invoke(System.Windows.Threading.DispatcherPriority.Normal, UpdateData); 
```

在这里您可以注意到不仅标记数据被更新，线数据也需要更新。标记有一个数据源，线条有一个数据源。如果您指定两个来源，并更新两种颜色，您应该能够同时看到线条和标记。

# git - 创建分支后，无法使用自定义隧道方案 git svn fetch

> ID：14942068
> 
> 赞同：0
> 
> 时间：2013-02-18T17:34:15.593
> 
> 标签：git, git-svn

我正在尝试获取创建分支的最新 svn 历史记录。这就是发生的事情：

```
$ g svn fetch
Found possible branch point: svn+xyz://.../trunk => svn+xyz://.../branches/etc, 24743
Found branch parent: (refs/remotes/svn/etc) dd98917ae2e94e414a2a70cf7dfb032aadf89d43
Following parent with do_switch
Malformed network data: Malformed network data at /usr/lib/perl5/site_perl/Git/SVN/Ra.pm line 307 
```

看着 307 行附近`lib/perl5/site_perl/Git/SVN/Ra.pm`，我看到了评论：

```
# this requires SVN 1.4.3 or later (do_switch didn't work before 1.4.3, and
# svn_ra_reparent didn't work before 1.4) 
```

~~我公司的 SVN 服务器很可能早于 1.4.3 - 我该怎么做才能说服 git 获取这个分支？~~ **编辑：**不，我们在 1.4.4。那么为什么这不起作用呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T17:53:04.040

原来这是[git 中的一个错误](https://github.com/msysgit/git/pull/58)，仅在使用自定义隧道方案时出现。

# sql - 如何在给定 SQL 中的子级列表的情况下获取一组唯一的父级

> ID：14942077
> 
> 赞同：0
> 
> 时间：2013-02-18T17:34:36.503
> 
> 标签：sql, sql-server, common-table-expression

我有一个包含层次结构数据的表：

```
ID  Name      ParentID
--- --------- ---------
1   Alpha     2
2   Beta      3
3   Gamma     NULL
4   Delta     2
5   Epsilon   6
6   Zeta      NULL
7   Eta       1
8   Theta     NULL 
```

给定一个 ID 列表，我如何获得所有唯一根父 ID 的列表？我不想要中间父母。

例如，假设给我的 ID 列表是`1, 2, 3, 4, 5`. 我正在寻找的结果是：

```
ID
---
3
6 
```

显然，这需要某种递归查询。我认为使用公用表表达式 (CTE) 可能可以实现，但我真的很难理解它是如何完成的。到目前为止，我看到的所有示例似乎都将所有孩子和父母聚集在一起以产生完整的层次结构列表，这不是我想要的。是否有任何 SQL 专家可以帮助我朝着正确的方向发展？我确实意识到我可以通过对数据库的多个查询来迭代地执行此操作，但我希望不必诉诸于此。

我应该注意我使用的是 SQL Server 2008。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T17:39:23.737

这是一个例子。CTE 从子级递归到父级。

```
; with  Cte as
        (
        select  ID
        ,       ParentID
        from    Table1
        where   ID in (1, 2, 3, 4, 5)
        union all
        select  parent.ID
        ,       parent.ParentID
        from    Table1 parent
        join    Cte child
        on      child.ParentID = parent.ID
        )
select  distinct ID
from    Cte
where   ParentID is null 
```

[SQL Fiddle 的示例。](http://sqlfiddle.com/#!3/4c64f/3/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T17:44:24.747

你为什么不试试：

```
HAVING(count(ParentID)) < 2 
```

在您的查询结束时。适当地使用 group by。

# ios - 网格的简单布局数学

> ID：14942079
> 
> 赞同：0
> 
> 时间：2013-02-18T17:34:56.947
> 
> 标签：ios, objective-c, math

在读完高中和大学的 8 门数学课程后，我仍然想不通：

在我的 iPhone 游戏中，许多图像将放置在网格中（仅 1 行高）。所有图像的大小相同。如何编写函数来放置、居中和缩放它们？

例子：

```
If there's only one image:  [        [IMAGE]         ]   - Middle of screen
Two images:                 [   [IMAGE]  [IMAGE]     ]
Three images:               [  [IMAGE][IMAGE][IMAGE  ]
etc... 
```

每张图片宽 100 px，左右各有一个 10 px 的插图。

如果有超过 3 张图片.. 所有图片都需要按比例缩小以适合屏幕宽度（300 像素，带插图）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T19:17:12.427

如果您使用的是 iOS 6+，我绝对建议您考虑使用[UICollectionView](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UICollectionView_class/Reference/Reference.html)（您也可以找到一些[YouTube 视频教程](http://www.youtube.com/results?search_query=uicollectionview+tutorial&oq=uicolle&gs_l=youtube.3.1.0l10.1530.2282.0.3861.7.5.0.2.2.0.157.523.3j2.5.0...0.0...1ac.1.HW5Bn9tmzjo)）。我自己还没有使用过它们，但我的理解是它们是专门为这种情况创建的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T17:54:38.760

在我看来，您的公式应该类似于：可用空间 = 屏幕宽度 - (2 * inset)

然后根据您刚刚计算的可用空间计算出图片的大小为：单个图片宽度 = 可用空间/图片数量

我不确定这是否是您正在寻找的东西，如果不是，请更具体一点。

# css - 检测是否使用移动设备（iOS/Android 手机/平板电脑）中的浏览器

> ID：14942081
> 
> 赞同：68
> 
> 时间：2013-02-18T17:35:00.730
> 
> 标签：css, media-queries

有没有办法检测是否使用了手持浏览器（iOS/Android 手机/平板电脑）？

我尝试这样做的目的是让手持设备上的浏览器中的元素宽度减半，但这并没有什么不同。

```
width: 600px;
@media handheld { width: 300px; } 
```

可以做到吗？如果可以，怎么做？

**编辑：**来自我使用的 jmaes 答案中的参考页面

`@media only screen and (max-device-width: 480px)`.

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-02-18T17:41:20.587

**更新（2016 年 6 月）**：我现在尝试在每个分辨率上支持触摸和鼠标输入，因为设备环境正在慢慢模糊事物是和非触摸设备之间的界限。iPad Pro 仅支持触控，分辨率相当于 13 英寸笔记本电脑。Windows 笔记本电脑现在经常配备触摸屏。

其他类似的 SO 答案（请参阅此问题的其他答案）可能有不同的方法来尝试找出用户正在使用哪种设备，但它们都不是万无一失的。如果您绝对需要尝试确定设备，我鼓励您检查这些答案。

* * *

一方面，iPhone 忽略了`handheld`查询（[Source](https://developer.apple.com/library/archive/documentation/AppleApplications/Reference/SafariWebContent/OptimizingforSafarioniPhone/OptimizingforSafarioniPhone.html)）。如果其他智能手机也出于类似的原因，我也不会感到惊讶。

我目前用来检测移动设备的最佳方法是知道它的宽度并使用[相应的媒体查询](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)来捕获它。那里的链接列出了一些流行的链接。我敢肯定，快速的 Google 搜索会为您提供您可能需要的任何其他内容。

有关更多特定于 iPhone 的内容（例如 Retina 显示屏），请查看我发布的第一个链接。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2018-05-12T02:18:16.833

我是这样做的：

```
@media (pointer:none), (pointer:coarse) {
} 
```

基于[https://stackoverflow.com/a/42835826/1365066](https://stackoverflow.com/a/42835826/1365066)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2016-07-09T11:58:46.690

不要检测移动设备，而是使用固定设备。

如今（2016 年）有一种方法可以检测每英寸/厘米/像素的点数，这似乎适用于大多数现代浏览器（请参阅[http://caniuse.com/#feat=css-media-resolution](http://caniuse.com/#feat=css-media-resolution)）。我需要一种方法来区分相对较小的屏幕、方向无关紧要和固定的计算机显示器。

由于许多移动浏览器不支持这一点，因此可以为所有情况编写通用 css 代码，并将此异常用于大屏幕：

```
@media (max-resolution: 1dppx) {
    /* ... */
} 
```

Windows XP 和 7 都具有每像素 1 个点（或 96dpi）的默认设置。我不了解其他操作系统，但这非常适合我的需求。

编辑：*dppx*似乎在 Internet Explorer 中不起作用。请改用 (96)dpi。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-02-18T18:00:41.843

**检测移动设备**

相关答案：[https ://stackoverflow.com/a/13805337/1306809](https://stackoverflow.com/a/13805337/1306809)

没有一种方法是真正万无一失的。最好的办法是根据需要混合搭配各种技巧，以增加成功检测到更广泛的手持设备的机会。有关几个不同的选项，请参阅上面的链接。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-06-20T21:08:13.443

我相信检测移动设备的一种更可靠的方法是查看 navigator.userAgent 字符串。例如，在我的 iPhone 上，用户代理字符串是：

> Mozilla/5.0 (iPhone; CPU iPhone OS 10_3_2 like Mac OS X) AppleWebKit/603.2.4 (KHTML, like Gecko) Version/10.0 Mobile/14F89 Safari/602.1

请注意，此字符串包含两个说明关键字：iPhone 和 Mobile。我没有的设备的其他用户代理字符串在以下位置提供：

[https://deviceatlas.com/blog/list-of-user-agent-strings](https://deviceatlas.com/blog/list-of-user-agent-strings)

使用此字符串，我使用以下代码将我网站上的 JavaScript 布尔变量 bMobile 设置为 true 或 false：

```
var bMobile =   // will be true if running on a mobile device
  navigator.userAgent.indexOf( "Mobile" ) !== -1 || 
  navigator.userAgent.indexOf( "iPhone" ) !== -1 || 
  navigator.userAgent.indexOf( "Android" ) !== -1 || 
  navigator.userAgent.indexOf( "Windows Phone" ) !== -1 ; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-04-05T01:03:16.097

许多移动设备的分辨率非常高，以至于很难将它们与更大的屏幕区分开来。有两种方法可以解决这个问题：

使用以下 HTML 代码缩放像素（将较小的像素分组为单位像素大小的组 - 96dpi，因此`px`单位在所有屏幕上都具有相同的物理尺寸）。请注意，这将影响您网站中几乎所有内容的规模，但这通常是使网站适合移动设备的方式。

```
<meta name="viewport" content="width=device-width, initial-scale=1"> 
```

`@media`或者，使用`cm`而不是单位测量查询中的屏幕宽度`px`可以告诉您是否正在处理物理上的小屏幕，而不管分辨率如何。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2017-06-05T08:51:43.203

我知道这是一个旧线程，但我认为这可能对某人有所帮助：

移动设备的高度大于宽度，相反，计算机的宽度大于高度。例如：

```
@media all and (max-width: 320px) and (min-height: 320px) 
```

所以我猜每个宽度都必须这样做。

* * *

## 回答 #8

> 赞同：-7
> 
> 时间：2021-02-12T17:31:57.600

简单的！把它扔到 CSS 文件的底部，这部分 CSS 将在手机中修改：-

```
/* ON A PHONE */
@media only screen and (max-width: 600px) { /* CSS HERE ONLY ON PHONE */ } 
```

瞧！

# uart - UTXEN 不会设置

> ID：14942084
> 
> 赞同：0
> 
> 时间：2013-02-18T17:35:20.463
> 
> 标签：uart, pic24

芯片为PIC24FJ256GB210

UART #3 上的#UTXEN 位不会设置。

它使用完全相同的指令序列在 UART #1 上设置良好。UART #2 也是如此。

**作品...**

```
 096E6  204000     mov.w #0x400,0x0000            111:           Mov     #Uart_1_Status_Control_Pattern, W0      ;Defined in CONSTANT.INC file
 096E8  881110     mov.w 0x0000,0x0222            112:           Mov     W0, U1STA                               ;ibid, page 230 Reg 17-2 
```

**失败...**

```
09748  204000     mov.w #0x400,0x0000            248:           Mov.W   #Uart_3_Status_Control_Pattern, W0              ;Defined in CONSTANT.INC file
0974A  881290     mov.w 0x0000,0x0252            249:           Mov.W   W0, U3STA                                       ;ibid, page 230, Reg 17-2 
```

所以我想，“啊，这是我想要的一个位，而在所有只读位之上移动的完整字会以某种方式导致问题。我将只设置一个位”。

不，仍然不会设置那个位。

**失败...**

```
 09754  A84253     bset.b 0x0253,#2               256:      Bset.W  U3STA, #UTXEN                   ;DEBUG DEBUG DEBUG Date: 2013-02-18  Time: 11:37:07 
```

- 更新 -

我可以在 MpLab 中设置该位。有什么不同 ？

我真的很困惑。这里还有什么可以防止该位被设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T17:43:32.080

## 错误

除了 UART 状态寄存器，我正在使用的 PIC24 中的每个 UART 都有一个相应的 UART 模式寄存器。

在这种情况下，它的名字是`U3MODE`。

在相应的模式寄存器中有一个“UART Enable”位

在这种情况下，该位称为`UARTEN`，它是（根据我对这个特定 PIC 的文档）高位。

根据`p24FJ256GB210.inc`我用来组装它的文件，他们有这样定义的......

```
 .equiv UARTEN,  0x000F 
```

如果在您尝试设置相应状态寄存器（在本例中为寄存器）中的位*之前*未设置 U3MODE 寄存器中的该位，则状态寄存器将不会按照您想要的方式更改其值。`UTXEN``U3STA`

## 修复

先设置寄存器`UARTEN`中的位`U3MODE`，然后再设置寄存器`UTXEN`中的位`U3STA`。

## 代码示例

我从这里的反汇编窗口中复制了源代码和实际的十六进制值，以及每条指令的物理十六进制编码。

标签实际上只是我编造的常数；有效的代码，你可以阅读的代码；那种想法。您可以在每条指令的反汇编部分查看它们的值。

在这种情况下，重要的是`U3MODE`在尝试设置寄存器中的位之前确保寄存器的高位`U3STA`。

这解决了这个问题。

```
 ;-------------------------------------
                                                                             ; --- THIS MUST COME FIRST ---
                                                                             ;
280080  mov.w #0x8008,0x0000  Mov.W   #Uart_3_Mode_Pattern, W0            ;Defined in Constant.Inc File
881280  mov.w 0x0000,0x0250   Mov.W   W0, U3MODE                          ;Documented in Manual DS39975A, p. 228, Register 17-1
                                                                             ;
                                                                             ; --- IN ORDER FOR THIS TO WORK ---
                                                                             ;
204000  mov.w #0x400,0x0000   Mov.W   #Uart_3_Status_Control_Pattern, W0  ;Defined in CONSTANT.INC file
881290  mov.w 0x0000,0x0252   Mov.W   W0, U3STA                           ;Manual DS39975A, page 230, Reg 17-2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-27T15:23:45.590

我自己被这个绊倒了（感谢你的帖子）并最终发现：

Microchip 的 PIC24F 系列参考手册，第 21.4 节 UART 配置，第 21.4.1 节启用 UART 表示“在设置 UARTEN 位之前不应设置 UTXEN 位，否则将无法启用 UART 传输。”

[http://ww1.microchip.com/downloads/en/DeviceDoc/39708B.pdf](http://ww1.microchip.com/downloads/en/DeviceDoc/39708B.pdf)

# c# - 将gridview导出到excel文件时Response.End()产生错误

> ID：14942085
> 
> 赞同：6
> 
> 时间：2013-02-18T17:35:22.730
> 
> 标签：c#, asp.net, gridview, export-to-excel

我有这个代码：

```
protected void ibtGenerateReport_Click(object sender, ImageClickEventArgs e)
{
    string filename = "report.xls";             

    StringWriter stringWriter = new StringWriter();
    HtmlTextWriter htmlWrite = new HtmlTextWriter(stringWriter);
    DataGrid DataGrd = new DataGrid();            
    DataGrd.DataSource = odsLSRAudit;
    DataGrd.DataBind();

    DataGrd.RenderControl(htmlWrite);            

    System.IO.StreamWriter vw = new System.IO.StreamWriter(filename, true);
    stringWriter.ToString().Normalize();
    vw.Write(stringWriter.ToString());
    vw.Flush();
    vw.Close();
    WriteAttachment(filename, "application/vnd.ms-excel", stringWriter.ToString());           
}

public static void WriteAttachment(string FileName, string FileType, string content)
{
    HttpResponse Response = System.Web.HttpContext.Current.Response;
    Response.ClearHeaders();
    Response.AppendHeader("Content-Disposition", "attachment; filename=" + FileName);
    Response.ContentType = FileType;
    Response.Write(content);            
    Response.End();
} 
```

但是这`Response.End()`给了我以下错误：

`Microsoft JScript runtime error: Sys.WebForms.PageRequestManagerParserErrorException: The message received from the server could not be parsed. Common causes for this error are when the response is modified by calls to Response.Write(), response filters, HttpModules, or server trace is enabled. Details: Error parsing near '<table cellspacing="'.`

`Response.Write(content)`正如我所见，它具有正确的信息。但是除了上述错误之外，没有出现保存/打开对话框。

我正在使用更新面板。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-18T17:45:07.310

**将此添加到您的 Page_Load() 方法中**

假设 ibtGenerateReport 是您的按钮

```
protected void Page_Load(object sender, EventArgs e) {
   ScriptManager scriptManager = ScriptManager.GetCurrent(this.Page);
   scriptManager.RegisterPostBackControl(this.ibtGenerateReport);
   //Further code goes here....
} 
```

**解释：**

UpdatePanel 控件使用异步回发来控制呈现页面的哪些部分。它使用客户端上的一大堆 JavaScript 和服务器上的一大堆 C# 来做到这一点。这是使用客户端上的 JavaScript 可以理解的特殊格式呈现出来的。如果您通过在页面的渲染阶段之外渲染内容来弄乱格式，那么格式就会被弄乱。

**为什么我不断收到 PageRequestManagerParserErrorException？**

好吧，您可能正在做错误消息中提到的事情之一。以下是最常见的原因以及它们不起作用的原因：

**调用 Response.Write()：** 通过直接调用 Response.Write()，您绕过了 ASP.NET 控件的正常呈现机制。您编写的位将直接发送给客户端，无需进一步处理。

**响应过滤器 /HttpModules ：** 与 Response.Write() 类似，它们可以以 UpdatePanel 不知道的方式更改渲染。

**启用服务器跟踪：** 使用 Response.Write() 有效地写出跟踪，因此弄乱了我们用于 UpdatePanel 的特殊格式。

**调用 Server.Transfer()：** 不幸的是，无法检测到调用了 Server.Transfer()。这意味着当有人调用 Server.Transfer() 时，UpdatePanel 无法执行任何智能操作。发送回客户端的响应是来自您传输到的页面的 HTML 标记。由于它的 HTML 而不是特殊格式，因此无法解析，并且您会收到错误消息。

**解决方案：** 避免解析错误的一种方法是通过调用**ScriptManager.RegisterPostBackControl()进行常规回发而不是异步回发**

请 [在此处参考 Ellon Lipton 博客中的完整说明和其他解决方案](http://weblogs.asp.net/leftslipper/sys-webforms-pagerequestmanagerparsererrorexception-what-it-is-and-how-to-avoid-it)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-18T17:40:41.943

通过以下方式更改 Response.End：

```
Response.Flush();
HttpContext.Current.ApplicationInstance.CompleteRequest(); 
```

Response.End 是一种不好的做法，它会中止线程以绕过 http 请求生命周期中的其余操作并引发异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T17:48:30.620

由于您尝试通过 UpdatePanels 执行此操作，因此您应该尝试使用 jQuery Ajax 并在页面加载事件的单独页面中编写此代码，以便在调用此页面的请求时获取文件。新的响应实际上是删除需要解析为对先前更新面板请求的响应的信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T17:37:44.270

您是否在向响应写入任何内容之前尝试了 Response.Clear() ，然后在结束响应之前尝试了 Response.Flush() ？

此外，在 Response.End() 中传递 true 值也无妨，以避免重定向时出现 HTTP 异常错误。只要确保其余的代码隐藏没有做你不想要的额外处理。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-29T07:00:50.767

此代码与您的 aspx 中的某些**UpdatePanel/AJAX冲突。**

尝试在您的 aspx 中编写此代码：

[代码](http://i.stack.imgur.com/pPnPL.png)- 这应该工作！:')

# java - Jsoup 1.7.1 SSLHandshakeException

> ID：14942087
> 
> 赞同：0
> 
> 时间：2013-02-18T17:35:29.640
> 
> 标签：java, ssl-certificate, jsoup

我在某些 SSL URL 上遇到了 JSoup 1.7.1 的异常。

javax.net.ssl.SSLHandshakeException：sun.security.validator.ValidatorException：PKIX 路径验证失败：java.security.cert.CertPathValidatorException：路径未与任何信任锚链接

但是，当我在浏览器中打开 URL 时，它不会给我任何安全警告。我错过了什么？

例如 URL - [https://www.barbican.org.uk/wonder/participation/barbican-weekender](https://www.barbican.org.uk/wonder/participation/barbican-weekender)

# ms-access - 日期函数 VBA

> ID：14942090
> 
> 赞同：-1
> 
> 时间：2013-02-18T17:35:34.053
> 
> 标签：ms-access, vba

尝试创建一个函数来比较 VBA 中的两个日期（所需日期和订单日期），如果所需日期早于订单日期，那么这应该会产生错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T17:56:49.787

除了我的第一条评论，这里有四个日期比较示例

```
'~~> Direct Date Comparision
Sub Sample1()
    Dim dt1 As Date, dt2 As Date

    dt1 = #12/12/2014#
    dt2 = #12/12/2013#

    Debug.Print IsGreater(dt1, dt2)
End Sub

'~~> Converting string to date and directly comparing
Sub Sample2()
    Dim dt1 As String, dt2 As String

    dt1 = "12/12/2014"
    dt2 = "12/12/2013"

    Debug.Print IsGreater(CDate(dt1), CDate(dt2))
End Sub

'~~> Using DateDiff with direct date comparision
Sub Sample3()
    Dim dt1 As Date, dt2 As Date

    dt1 = #12/12/2014#
    dt2 = #12/12/2013#

    If DateDiff("d", dt2, dt1) > 0 Then
        MsgBox "Greater"
    Else
        MsgBox "Smaller or Equal"
    End If
End Sub

'~~> Using DateDiff with converting string to date and directly comparing
Sub Sample4()
    Dim dt1 As Date, dt2 As Date

    dt1 = "12/12/2014"
    dt2 = "12/12/2013"

    If DateDiff("d", CDate(dt2), CDate(dt1)) > 0 Then
        MsgBox "Greater"
    Else
        MsgBox "Smaller or Equal"
    End If
End Sub

Function IsGreater(d1 As Date, d2 As Date) As Boolean
    IsGreater = d1 > d2
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T09:52:03.603

将订单日期作为日期

较早日期为日期

orderdate = InputBox("请输入订单日期")

较早日期 = “12 / 12 / 2011”

如果 orderdate > earlydate 则

```
 MsgBox "Error" 
```

万一

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T17:46:10.087

尝试这个

```
If dateRequired < orderDate Then
    Debug.Print "this should generate an error."
End If 
```

# matlab - matlab中的矩阵大小

> ID：14942091
> 
> 赞同：0
> 
> 时间：2013-02-18T17:35:35.317
> 
> 标签：matlab

我有问题，怎么办？！

我在matlab中读取了两个不同大小的图像，然后我将它们转换为加倍以对它们进行操作，但问题是它们的大小不同，所以如何使它们与更大的图像相同，然后将其他空大小填充为零?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T17:49:56.087

假设您有两个矩阵：

```
a = 1  2  3 
    4  5  6 
    7  8  9

b = 1  2 
    3  4 
```

你可以这样做：

```
c = zeros(size(a)) %since a is bigger 
```

这将创建：

```
c = 0  0  0
    0  0  0 
    0  0  0 
```

然后复制较小矩阵的内容（`b`在本例中）：

```
c(1:size(b,1), 1:size(b,2)) = b; 
```

（*size(b,1) 返回行数， size(b,2) 返回列数*）

最终结果将是一个大小矩阵，其中`a`填充了`b`和`0`其他任何地方的值：

```
c = 1  2  0
    3  4  0
    0  0  0 
```

## 编辑：

```
 image1=imread(image1Path); 
 image2=imread(image2Path); 
 image1= double(image1); 
 image2= double(image2); 

 %%%ASSUME image1 is bigger%%%

 new_image = zeros(size(image1));
 new_image(1:size(image2,1), 1:size(image2,2)) = image2;
 %NOW new_image will be as you want. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T18:32:54.990

您的问题有点模糊，但假设您有两个矩阵`A`并且`B`它们的大小不同。现在，如果您总是想用零填充最小尺寸，您可以这样做：

```
rs = max([size(A);size(B)]); % Find out what size you want
A(rs(1)+1,rs(2)+1) = 0; % Automatically pad the matrix to the desired corner (plus 1)
B(rs(1)+1,rs(2)+1) = 0; % Plus one is required to prevent loss of the value at (end,end)
A = A(1:end,1:end); %Now remove that one again
B = B(1:end,1:end); 
```

请注意，无论哪个更大，以及一个更高而另一个更宽，这都有效。当您喜欢使用 if 语句时，这可能更容易理解：

```
rs = max([size(A);size(B)]); % Find out what size you want
if any(size(A) < rs)
     A(rs(1),rs(2)) = 0;
end
if any(size(B) < rs)
     B(rs(1),rs(2)) = 0;
end 
```

# c# - 为什么 .net 对字符串使用 UTF16 编码，但默认使用 UTF-8 来保存文件？

> ID：14942092
> 
> 赞同：69
> 
> 时间：2013-02-18T17:35:42.237
> 
> 标签：c#, .net, string, utf-8, utf-16

[从这里](http://csharpindepth.com/Articles/General/strings.aspx)

> 本质上，字符串使用 UTF-16 字符编码形式

但是当保存 vs [StreamWriter](http://msdn.microsoft.com/en-us/library/wtbhzte9.aspx)时：

> 此构造函数使用 UTF-8 编码创建一个没有字节顺序标记 (BOM) 的 StreamWriter，

我看过这个示例（已删除断开的链接）：

![在此处输入图像描述](../Images/56e0774fabe973c7c802b6c6796a8c99.png)

`utf8`对于某些字符串，它看起来更小，而`utf-16`在其他一些字符串中则更小。

*   那么为什么 .net用作字符串和保存文件`utf16`的默认编码呢？`utf8`

谢谢你。

*ps 我已经阅读[了著名的文章](http://www.joelonsoftware.com/articles/Unicode.html)*

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-02-18T17:39:01.290

*如果*您乐于忽略代理对（或等效地，您的应用程序需要基本多语言平面之外的字符的可能性），UTF-16 有一些很好的属性，主要是因为每个代码单元总是需要两个字节并表示所有 BMP 字符每个单个代码单元。

考虑原始类型`char`。如果我们使用 UTF-8 作为内存中的表示并且想要处理*所有*的Unicode 字符，那应该有多大？它可能最多 4 个字节......这意味着我们总是必须分配 4 个字节。那时我们不妨使用 UTF-32！

当然，我们可以使用 UTF-32 作为`char`表示，但在表示中使用 UTF-8 ，我们可以随时`string`转换。

UTF-16 的两个缺点是：

*   每个 Unicode 字符的代码单元数是可变的，因为并非所有字符*都*在 BMP 中。在表情符号流行之前，这并没有影响许多日常使用的应用程序。如今，对于消息传递应用程序等，使用 UTF-16 的开发人员确实需要了解代理对。
*   对于纯 ASCII（至少在西方有很多文本），它占用的空间是等效 UTF-8 编码文本的两倍。

（作为旁注，我相信 Windows 使用 UTF-16 处理 Unicode 数据，出于互操作的原因，.NET 效仿是有意义的。不过，这只是将问题推向了一步。）

考虑到代理对的问题，我怀疑如果一种语言/平台是从头开始设计的，没有互操作要求（但基于 Unicode 的文本处理），UTF-16 不会是最佳选择。UTF-8（如果您想要内存效率并且不介意在获取第 n 个字符方面的一些处理复杂性）或 UTF-32（反之亦然）将是更好的选择。（由于不同的规范化形式，即使到达第 n 个字符也有“问题”。文本很难......）

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-02-18T18:18:24.777

与许多“为什么选择这个”问题一样，这是由历史决定的。Windows 于 1993 年成为其核心的 Unicode 操作系统。当时，Unicode 仍然只有 65535 个代码点的代码空间，现在称为 UCS。直到 1996 年，Unicode 才获得了补充平面，将编码空间扩展到一百万个代码点。并使用代理对将它们放入 16 位编码中，从而设置 utf-16 标准。

.NET 字符串是 utf-16，因为它非常适合操作系统编码，不需要转换。

utf-8 的历史更加模糊。绝对超越 Windows NT，RFC-3629 始于 1993 年 11 月。它需要一段时间才能站稳脚跟，互联网发挥了重要作用。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-07-16T21:49:15.997

UTF-8 是文本存储和传输的默认设置，因为它对于大多数语言来说是一种相对紧凑的形式（有些语言在 UTF-16 中比在 UTF-8 中更紧凑）。每种特定语言都有更有效的编码。

UTF-16 用于内存中的字符串，因为它可以更快地解析每个字符并直接映射到 unicode 字符类和其他表。Windows 中的所有字符串函数都使用 UTF-16 并且已经使用了多年。

# matlab - 从 C 访问 MATLAB 的 unicode 字符串

> ID：14942097
> 
> 赞同：3
> 
> 时间：2013-02-18T17:35:59.163
> 
> 标签：matlab, unicode, encoding, mex, matlab-engine

如何通过 MATLAB 引擎或 MEX C 接口访问 MATLAB 字符串的底层 unicode 数据？

这是一个例子。让我们将 unicode 字符放入一个 UTF-8 编码的文件 test.txt 中，然后将其读取为

```
fid=fopen('test.txt','r','l','UTF-8');
s=fscanf(fid, '%s') 
```

在 MATLAB 中。

现在，如果我先这样做`feature('DefaultCharacterSet', 'UTF-8')`，然后从 C 开始`engEvalString(ep, "s")`，然后作为输出，我会从文件中以 UTF-8 格式取回文本。这证明 MATLAB 在内部将其存储为 unicode。但是，如果我这样做`mxArrayToString(engGetVariable(ep, "s"))`，我`unicode2native(s, 'Latin-1')`会在 MATLAB 中得到什么：所有非拉丁 1 字符都替换为字符代码 26。我需要以任何 unicode 格式（UTF-8）作为 C 字符串访问底层 unicode 数据、UTF-16 等），并保留非拉丁 1 字符。**这可能吗？**

我的平台是 OS X，MATLAB R2012b。

附录：[文档](http://www.mathworks.com/help/matlab/apiref/mxarraytostring.html)明确指出“[mxArrayToString()] 支持多字节编码字符”，但它仍然只给了我原始数据的 Latin-1 近似值。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T16:31:07.590

首先，让我分享一些我在网上找到的参考资料：

*   根据[`mxChar`](http://www.mathworks.com/help/matlab/apiref/mxchar.html)描述，

    > MATLAB 在具有多字节字符集的机器上将字符存储为 2 字节 Unicode 字符

    仍然 MBCS 这个词对我来说有点[模棱两可](https://stackoverflow.com/questions/748965/what-is-a-multibyte-character-set)，我认为它们在这种情况下是指 UTF-16（尽管我不确定[surrogate pairs](https://en.wikipedia.org/wiki/UTF-16)，这可能使它改为 UCS-2）。

    ***更新：*** MathWorks 将措辞更改为：

    > MATLAB 对 Unicode 字符使用 16 位无符号整数字符编码。

*   该[`mxArrayToString`](http://www.mathworks.com/help/matlab/apiref/mxarraytostring.html)页面声明它确实处理多字节编码字符（unlinke[`mxGetString`](http://www.mathworks.com/help/matlab/apiref/mxgetstring.html)仅处理单字节编码方案）。不幸的是，没有关于如何做到这一点的例子。

*   最后，这是 MATLAB 新闻组上的一个[线程](http://www.mathworks.com/matlabcentral/newsreader/view_thread/301249)，其中提到了一些与此相关的未记录函数（您可以通过将`libmx.dll`库加载到Windows 上的*Dependency Walker等工具中自己找到这些函数）。*

* * *

这是我在 MEX 中做的一个小实验：

### my_func.c

```
#include "mex.h"

void mexFunction(int nlhs, mxArray *plhs[], int nrhs, const mxArray *prhs[])
{
    char str_ascii[] = {0x41, 0x6D, 0x72, 0x6F, 0x00};   // {'A','m','r','o',0}
    char str_utf8[] = {
        0x41,                   // U+0041
        0xC3, 0x80,             // U+00C0
        0xE6, 0xB0, 0xB4,       // U+6C34
        0x00
    };
    char str_utf16_le[] = {
        0x41, 0x00,             // U+0041
        0xC0, 0x00,             // U+00C0
        0x34, 0x6C,             // U+6C34
        0x00, 0x00
    };

    plhs[0] = mxCreateString(str_ascii);
    plhs[1] = mxCreateString_UTF8(str_utf8);        // undocumented!
    plhs[2] = mxCreateString_UTF16(str_utf16_le);   // undocumented!
} 
```

我分别用 ASCII、UTF-8 和 UTF-16LE 编码的 C 代码创建了三个字符串。`mxCreateString`然后我使用MEX 函数（以及它的其他未记录版本）将它们传递给 MATLAB 。

我通过咨询*Fileformat.info*网站获得了字节序列： [A (U+0041)](http://www.fileformat.info/info/unicode/char/41/index.htm)、[À (U+00C0)](http://www.fileformat.info/info/unicode/char/c0/index.htm)和[水 (U+6C34)](http://www.fileformat.info/info/unicode/char/6c34/index.htm)。

让我们在 MATLAB 中测试上述函数：

```
%# call the MEX function
[str_ascii, str_utf8, str_utf16_le] = my_func()

%# MATLAB exposes the two strings in a decoded form (Unicode code points)
double(str_utf8)       %# decimal form: [65, 192, 27700]
assert(isequal(str_utf8, str_utf16_le))

%# convert them to bytes (in HEX)
b1 = unicode2native(str_utf8, 'UTF-8')
b2 = unicode2native(str_utf16_le, 'UTF-16')
cellstr(dec2hex(b1))'  %# {'41','C3','80','E6','B0','B4'}
cellstr(dec2hex(b2))'  %# {'FF','FE','41','00','C0','00','34','6C'}
                       %# (note that first two bytes are BOM markers)

%# show string
view_unicode_string(str_utf8) 
```

![unicode_string AÀ水"></p> <p>我正在使用 <a href=](../Images/3c3ff001731c79501a9ac5edcfa6fd53.png)用于查看字符串的嵌入式 Java 功能：

```
function view_unicode_string(str)
    %# create Swing JLabel
    jlabel = javaObjectEDT('javax.swing.JLabel', str);
    font = java.awt.Font('Arial Unicode MS', java.awt.Font.PLAIN, 72);
    jlabel.setFont(font);
    jlabel.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);

    %# place Java component inside a MATLAB figure
    hfig = figure('Menubar','none');
    [~,jlabelHG] = javacomponent(jlabel, [], hfig);
    set(jlabelHG, 'Units','normalized', 'Position',[0 0 1 1])
end 
```

* * *

现在让我们以相反的方向工作（接受来自 MATLAB 的字符串到 C 中）：

### my_func_reverse.c

```
#include "mex.h"

void print_hex(const unsigned char* s, size_t len)
{
    size_t i;
    for(i=0; i<len; ++i) {
        mexPrintf("0x%02X ", s[i] & 0xFF);
    }
    mexPrintf("0x00\n");
}

void mexFunction(int nlhs, mxArray *plhs[], int nrhs, const mxArray *prhs[])
{
    char *str;
    if (nrhs<1 || !mxIsChar(prhs[0])) {
        mexErrMsgIdAndTxt("mex:error", "Expecting a string");
    }
    str = mxArrayToString_UTF8(prhs[0]); // get UTF-8 encoded string from Unicode
    print_hex(str, strlen(str));         // print bytes
    plhs[0] = mxCreateString_UTF8(str);  // create Unicode string from UTF-8
    mxFree(str);
} 
```

我们在 MATLAB 内部对此进行了测试：

```
>> s = char(hex2dec(['0041';'00C0';'6C34'])');   %# "\u0041\u00C0\u6C34"
>> ss = my_func_reverse(s);
0x41 0xC3 0x80 0xE6 0xB0 0xB4 0x00               %# UTF-8 encoding
>> assert(isequal(s,ss)) 
```

* * *

最后我应该说，如果由于某种原因您仍然遇到问题，最简单的方法是将非 ASCII 字符串转换为`uint8`数据类型，然后再将其从 MATLAB 传递到您的引擎程序。

所以在 MATLAB 进程中执行以下操作：

```
%# read contents of a UTF-8 file
fid = fopen('test.txt', 'rb', 'native', 'UTF-8');
str = fread(fid, '*char')';
fclose(fid);
str_bytes = unicode2native(str,'UTF-8');  %# convert to bytes

%# or simply read the file contents as bytes to begin with
%fid = fopen('test.txt', 'rb');
%str_bytes = fread(fid, '*uint8')';
%fclose(fid); 
```

并使用 Engine API 访问变量，如下所示：

```
mxArray *arr = engGetVariable(ep, "str_bytes");
uint8_T *bytes = (uint8_T*) mxGetData(arr);
// now you decode this utf-8 string on your end ... 
```

* * *

所有测试均在运行 R2012b 且使用默认字符集的 WinXP 上完成：

```
>> feature('DefaultCharacterSet')
ans =
windows-1252 
```

希望这可以帮助..

* * *

## 编辑：

在 MATLAB R2014a 中，从库中删除了许多*未记录*`libmx`的 C 函数（包括上面使用的函数），并替换为在 namespace 下公开的等效 C++ 函数`matrix::detail::noninlined::mx_array_api`。

应该很容易调整上面的示例（如此[处](http://undocumentedmatlab.com/blog/serializing-deserializing-matlab-data/#MEX)所述）以在最新的 R2014a 版本上运行。

# android - Android : HTC 手机上的 UDP 多播

> ID：14942098
> 
> 赞同：1
> 
> 时间：2013-02-18T17:36:05.390
> 
> 标签：android, udp, multicast

好的，我编写了一个发送和接收多播 UDP 数据包的应用程序。该应用程序在我的三星 S3 上运行良好，但在运行 Android 2.3.5 的 HTC Explorer 上没有收到任何数据包。在进一步的研究中，我发现有些手机完全不支持 UDP 多播。我想确保我的应用程序适用于所有手机。我们可以在 HTC 手机上启用多播吗？如果没有，这个问题还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T00:18:10.923

我在运行 Android 4.1.2 的 HTC One 上遇到了同样的问题

[这是一个从Android 错误报告](https://code.google.com/p/android/issues/detail?id=8407#c35)中为我解决的解决方案：

```
Wanting to receive broadcasts in a async routine I now use the following code just before the loop where the broadcast messages are received:

WifiManager wifi;
wifi = (WifiManager) getSystemService(Context.WIFI_SERVICE);
MulticastLock ml = wifi.createMulticastLock("just some tag text");
ml.acquire();

When the asynctask stops I do a 
ml.release(); 
```

我还必须在 AndroidManifest.xml 中包含以下内容：

```
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.CHANGE_WIFI_MULTICAST_STATE" /> 
```

# twitter-bootstrap - 在LESS中混入时引用嵌套规则

> ID：14942102
> 
> 赞同：0
> 
> 时间：2013-02-18T17:36:24.377
> 
> 标签：twitter-bootstrap, less, mixins

我试图保持我的 HTML 干净，并使用 mixins 而不是非语义引导类。

我所有的“索引”表都应该有 .table 和 .table-hover。

```
table.index {
  .table;
  .table-hover;
} 
```

这很好用，除了应用于 .table 下的元素的规则，例如：

`.table tbody tr`

有没有我可以混入`.table tbody tr`的地方`.index tbody tr`？

```
table.index {
  .table;
  .table-hover;

  tbody tr {
   .table tbody tr;
  }
} 
```

当然，最后一段代码失败了，原因很简单：第六行的语法错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T03:28:04.817

答案是不。” 目前，您不能混合在选择器字符串中有元素的选择器。虽然这可能是 LESS 的限制，但很难区分 a`tr`应该是 mixin 还是选择器。

*真正的*问题是引导程序未能对其部分代码使用嵌套。例如，以下来自[`tables.less`](https://github.com/twitter/bootstrap/blob/master/less/tables.less)（截至 2013 年 2 月 18 日）：

```
.table tbody tr {
  &.success > td {
    background-color: @successBackground;
  }
  &.error > td {
    background-color: @errorBackground;
  }
  &.warning > td {
    background-color: @warningBackground;
  }
  &.info > td {
    background-color: @infoBackground;
  }
} 
```

***如果它是这样构造***`.table`的（注意和之间的额外嵌套括号`tbody`）......

```
.table { 
   tbody tr {
      &.success > td {
        background-color: red;
      }
      &.error > td {
        background-color: blue;
      }
      &.warning > td {
        background-color: cyan;
      }
      &.info > td {
        background-color: yellow;
      }
   }
} 
```

...然后它会混合到你的`.index`就好了。所以要得到你想要的，你需要将引导代码“更正”到上面，确保所有元素都嵌套在一个`.table`调用中；其他未嵌套的选择器调用也需要更正。您可以执行类似`corrections.less`在 之后加载的文件之类的操作`bootstrap.less`，这样，如果引导程序更新，您就不会丢失更正。然后，当它更新时，您需要进入并检查您的更正是否需要更新（或消除，如果引导程序自己解决问题）。

您需要复制和更正多少都取决于您想要用作 mixin 的错误嵌套的数量。如果您不需要混合，请不要费心纠正它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T16:36:12.187

基于 ScottS 答案的最终解决方案是：

```
@import "twitter/bootstrap/bootstrap";
...
@import "corrections";

.index {
  .table;
  .table-hover;
} 
```

我不得不在corrections.less 中再次导入variables.less（它最初是在bootstrap.less 中导入的，但在corrections.less 中不可用）。请注意，导入时不需要 .less 扩展名。

```
//corrections.less

@import "twitter/bootstrap/variables.less";

.table {
  tbody tr {
    &.success > td {
      background-color: @successBackground;
    }
    &.error > td {
      background-color: @errorBackground;
    }
    &.warning > td {
      background-color: @warningBackground;
    }
    &.info > td {
      background-color: @infoBackground;
    }
  }
}
.table-hover {
  tbody tr {
    &.success:hover > td {
      background-color: darken(@successBackground, 5%);
    }
    &.error:hover > td {
      background-color: darken(@errorBackground, 5%);
    }
    &.warning:hover > td {
      background-color: darken(@warningBackground, 5%);
    }
    &.info:hover > td {
      background-color: darken(@infoBackground, 5%);
    }
  }
} 
```

# php - 自定义脚本中客户的 Magento 产品 getFinalPrice

> ID：14942103
> 
> 赞同：0
> 
> 时间：2013-02-18T17:36:45.797
> 
> 标签：php, magento

我有几个针对某些客户群的目录价格规则。以登录客户的身份查看产品时，价格显示正确。我想创建一个库存文件，我可以将其发送给具有此折扣价的客户。我该怎么做？

**我试过的：**

*   在获取产品集合之前为客户（使用 ）启动会话`Mage::getSingleton('customer/session')->loginById($customerId)`，但这似乎并没有影响`$product->getFinalPrice()`.

    > *编辑：*我还应该说，我已经通过从会话中回显客户组 ID 来确认会话正常工作。

*   将产品添加到`sales/quote`为该客户创建的产品中，然后降低价格，`quote_item`但这也不起作用。

*   我跟着`Mage_Catalog_Model_Product::getFinalPrice()`发现了两个事件观察者，`Mage_CatalogRule_Model_Observer::processFrontFinalPrice()`和`processAdminFinalPrice()`。看起来我应该能够在产品上设置一个客户组 ID，所以我也尝试过这样做......不走运。确定客户组ID的逻辑`processFrontFinalPrice()`如下所示：

    ```
    if ($observer->hasCustomerGroupId()) {
        $gId = $observer->getEvent()->getCustomerGroupId();
    } elseif ($product->hasCustomerGroupId()) {
        $gId = $product->getCustomerGroupId();
    } else {
        $gId = Mage::getSingleton('customer/session')->getCustomerGroupId();
    } 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:21:05.073

你检查方法头了吗？`public function login($username, $password)`. 您不能将 login() 与 customerId 一起使用。

但是还有：

```
Mage::getSingleton('customer/session')->loginById($customerId); 
```

# vim - vim 在搜索和替换表达式中使用变量的内容

> ID：14942104
> 
> 赞同：8
> 
> 时间：2013-02-18T17:36:47.363
> 
> 标签：vim

在 vimscript 中，我定义了一个像这样的变量：

```
let b:myvar = 'abc' 
```

现在我如何将该 var 的内容插入到搜索和替换中，例如：

```
:s/123/&myvar/ 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-19T08:03:40.727

肯特的回答很适合替换零件；对于以交互方式键入替换命令时的通用插入，您可以通过以下方式插入任何表达式（不仅是变量，还有函数等）`<C-R><C-R>=`（这些必须键入为`Ctrl`+ `R`，而不是字面意思）：

```
:substitute/<C-R><C-R>=b:myvar<CR>/replacement/<CR> 
```

在脚本中，您将使用`:execute`：

```
:execute 'substitute/' . b:myvar . '/replacement/' 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-18T17:56:30.957

试试这一行：

```
:s/123/\=b:myvar/ 
```

# c# - DataTable 作为 DataGrid.ItemsSource

> ID：14942105
> 
> 赞同：11
> 
> 时间：2013-02-18T17:36:49.280
> 
> 标签：c#, wpf, binding, datagrid, datatable

嗨，我想将`DataTable`具有多列的 a 绑定到`DataGrid`代码隐藏中

```
 var dt = new DataTable();

    dt.Columns.Add(new DataColumn("1"));
    dt.Columns.Add(new DataColumn("2"));
    dt.Columns.Add(new DataColumn("3"));

    dt.Rows.Add(ff.Mo);
    dt.Rows.Add(ff.Di);
    dt.Rows.Add(ff.Mi);
    dt.Rows.Add(ff.Do);
    dt.Rows.Add(ff.Fr);
    dt.Rows.Add(ff.Sa);
    dt.Rows.Add(ff.So);
// ff is a object that contains List<myCellObj>

DataGrid DGrid = new DataGrid();
for (int i = 0; i < 3; i++)
{
   DataGridTemplateColumn templateColumn = new DataGridTemplateColumn();
   templateColumn.HeaderTemplate = HeaderDt;
   templateColumn.CellTemplate = ItemDt; //specified DataTemplate for myCellObj

   DGrid.Columns.Add(templateColumn);
} 
```

现在我该如何设置我`dt`的身份`ItemsSource`，`Datacontext`或者`View` 如果你能给我提供一种直接绑定到我的方法的话，如何将它放入我的`Object ff`

非常感谢任何可以提供帮助的东西

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-18T18:47:59.390

假设您在 WPF 中，只需说：

```
DGrid.ItemsSource = dt.AsDataView(); 
```

无需在 DataGrid 上手动设置列，分配 DataTable 将为您设置这些。

# ember.js - 子视图未处理 emberjs 中的事件

> ID：14942106
> 
> 赞同：1
> 
> 时间：2013-02-18T17:36:51.277
> 
> 标签：ember.js

我有一个模板作为页面的一部分，如下所示：

```
<script type="text/x-handlebars" data-template-name="listbeer">

    <table>
    {{#each content}}
        {{#view "DHApp.BeerrowView"}}
        <tr>
            <td><button>{{name}}</button></td>
            <td>{{brewery}}</td>
        </tr>   
        {{/view}}

    {{/each}}
    </table>
</script> 
```

我还有两个视图，一个封装表格，一个封装行。当我点击按钮时，只有父（整个表）视图点击处理程序被调用（下面的那个说父拾取点击）。我无法调用子视图处理程序。有什么想法，为什么我尝试了各种各样的事情却无处可去？

视图代码如下所示：

```
DHApp.BeerrowView = Ember.View.extend({
        click: function(evt) {
            alert("ClickableView was clicked!");
        }
    });

DHApp.ListbeerView = Ember.View.extend({
        templateName: 'listbeer',
        click: function(evt) {
            alert("parent picked up view");
        }
    }); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T18:46:11.430

您需要`BeerrowView`通过以下方式定义您的：

```
DHApp.BeerrowView = Ember.View.extend({
    tagName: 'tr',
    click: function(evt) {
        alert("ClickableView was clicked!");
    }
}); 
```

和模板：

```
<script type="text/x-handlebars" data-template-name="listbeer">

    <table>
        {{#each content}}
            {{#view "DHApp.BeerrowView"}}
                <td><button>{{name}}</button></td>
                <td>{{brewery}}</td>
            {{/view}}

       {{/each}}
    </table>
</script> 
```

`div`之后的原因是如果您不定义标签名称，视图会添加额外的内容。
请参阅[ember 查看指南](http://emberjs.com/guides/views/customizing-a-views-element/)以获取更多参考。

# c# - monodevelop 上的消息对话框

> ID：14942107
> 
> 赞同：-1
> 
> 时间：2013-02-18T17:36:57.157
> 
> 标签：c#, winforms, monodevelop

我正在monodevelop上创建一个winforms应用程序，但我在编程messagedialogs是/否时遇到问题，特别是：

```
Gtk.Window main = new Gtk.Window ("MessageDialog");
            MessageDialog question = new MessageDialog(main, 
                                                       DialogFlags.Modal,
                                                       MessageType.Question, 
                                                       ButtonsType.YesNo, "Are you sure you want to quit?");
            question.Title="CsoundConverter";
            ResponseType response = (ResponseType)question.Run();

            question.Show();

            if (response == ResponseType.Yes)
           {                  
            // some statements
            question.Destroy();
           }

            if (response == ResponseType.Yes)
          {
            //some statements
            question.Destroy();
          } 
```

这段代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T17:41:56.790

**第二个答案：**

尽量不要将`MessageDialog.Run()`返回值转换为`ResponseType`. 将其保留为`int`：

```
int response = question.Run(); 
```

我假设您正在使用 Gnome MessageDialog。

请参阅下面我对您的评论的回复

**第一个答案：** 如果您的第二个 If 语句不是：

```
if (response == ResponseType.No)
{
    //some statements
    question.Destroy()
} 
```

我也认为这应该是一个 If/Else。

# html - 如何禁用文本环绕复选框

> ID：14942110
> 
> 赞同：5
> 
> 时间：2013-02-18T17:37:01.040
> 
> 标签：html, css, checkbox, word-wrap

如何防止文本环绕复选框？我需要在复选框之后对齐文本，而不是在它下面。我知道我不是第一个问的人，但我似乎找不到解决方案。

[http://jsfiddle.net/csYPu/77/](http://jsfiddle.net/csYPu/77/)

```
.sign-newsletter {
padding:40px;
width:200px;
}

form li {display:inline;}

fieldset {border:0;}

.checkbox {
width: 13px;
height: 13px;
padding: 0;
margin:0 10px 0 0;
vertical-align: bottom;
position: relative;
top: -2px;
*overflow: hidden;
}

input {background:#636566; padding:7px;
width:100%;
margin-bottom:5px;
-webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */
-moz-box-sizing: border-box;    /* Firefox, other Gecko */
box-sizing: border-box;         /* Opera/IE 8+ */
}

<div class="sign-newsletter">

<form method="post" action="submit-sign-newsletter.php">
    <fieldset>

        <ul>
            <li><input type="text" name="name" placeholder="Name" /></li>
            <li><input type="email" name="email" placeholder="Email" /></li>
            <li><input class="checkbox" type="checkbox" name="sign_me_in" value="" /><label>"Lorem ipsum dolor sit amet, consectetur      </label></li>
            <li><input type="submit" value="Submit" class="button" /></li>
        </ul>

    </fieldset>
</form>

</div> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-18T17:47:50.503

尝试改变：

**HTML**

```
<li>
    <div class="chkLabel">
       <input class="checkbox" type="checkbox" name="sign_me_in" value="" />
       <label>"Lorem ipsum dolor sit amet, consectetur</label>
    </div>
</li> 
```

**CSS**

```
.chkLabel input { float: left; margin-top:0.5em;}
.chkLabel label { display: block; margin-left: 1.5em;} 
```

[演示](http://jsfiddle.net/csYPu/80/)

# php - json_decode() 后缺少分号？

> ID：14942114
> 
> 赞同：0
> 
> 时间：2013-02-18T17:37:12.993
> 
> 标签：php, regex, json

在 PHP 中，我正在加载一个用 JSON 编写的配置文件。见摘录：

```
"test":{
    "regexp":"^var1=([A-Za-z0-9_]+)(;var2=([0-9]+))?(;var3=([0-9]+))?$"
} 
```

注意分号！

当我使用 json_decode() 在 PHP 5.3.3 中加载它时，以下内容作为字符串返回：

```
^var1=([A-Za-z0-9_]+)(var2=([0-9]+))?(var3=([0-9]+))?$ 
```

有谁知道我的分号怎么了？他们有点重要！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T18:22:35.243

使用 PHP 5.3.21 它工作得很好这是我的代码

```
<?php 
    $json = '{"test":{"regexp":"^var1=([A-Za-z0-9_]+)(;var2=([0-9]+))?(;var3=([0-9]+))?$"}}';
    $tested=json_decode($json, true);
    echo $tested["test"]["regexp"];
?> 
```

我的输出符合预期

```
^var1=([A-Za-z0-9_]+)(;var2=([0-9]+))?(;var3=([0-9]+))?$ 
```

# javascript - 未包含在标签中的 url 的正则表达式

> ID：14942118
> 
> 赞同：1
> 
> 时间：2013-02-18T17:37:22.847
> 
> 标签：javascript, jquery, regex, contenteditable

我有一个 contenteditable div，当用户按下空格或粘贴到其中时，会搜索其内容以查找替换为的 url（通过正则表达式）：

`<a href="' + url + '" title="' + url + '" target="_blank" class="label label-info label-url" contenteditable="false">url: \'' + url + '\'</a>&nbsp;`

它有效。

问题是，当您继续编写或粘贴时，该`<a>`标签中的三个 url 将再次被评估并被替换，从而造成严重破坏，因此我需要一种方法来避免它们被评估，或者通过更改正则表达式（它应该忽略 url前面有`href="`,`title="`或`url: '`) 或更改 js.

jsfiddle：http: [//jsfiddle.net/YUekd/](http://jsfiddle.net/YUekd/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T18:04:33.717

第一个问题是，在 JS 正则表达式引擎中没有负面的后视。但是您可以使用带有该`replace`方法的回调函数来执行此操作：

```
html = html.replace(
    /(href="|title="|url: )?(yoururlregex)/ig, 
    function($0, $1, $2) {
        return $1 
             ? $0 
             : '<a href="' + $2 + '" title="' + $2 + '">url: ' + $2 + '</a>';
    }
); 
```

我用一个常量字符串替换了您的 URL 正则表达式以使其更清晰，您可以将您的正则表达式替换为大括号。

编辑：放置位置`match`：

```
 function($0, $1, $2) {
        if ($1) {
            return $0;
        } else {
            match = true;
            return '<a href="' + $2 + '" title="' + $2 + '">url: ' + $2 + '</a>';
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T18:11:55.060

您可以重新处理所有内容，将您`<a></a>`的文本转换回来，因此您重做所有过程。

# ruby-on-rails - 设计，没有电子邮件

> ID：14942120
> 
> 赞同：1
> 
> 时间：2013-02-18T17:37:30.340
> 
> 标签：ruby-on-rails, devise

我安装了设计。

我运行 rails server -e development 并在 config/environments 中设置这一行：

```
config.action_mailer.default_url_options = {:host => 'localhost:3000'} 
```

设计 说：

```
 message with a confirmation link has been sent to your email address. Please open the      link to activate your account. 
```

但是我没有收到任何邮件。

你怎么看？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T17:59:42.680

将这些行添加到您的`development.rb`文件中

```
config.action_mailer.delivery_method = :smtp
config.action_mailer.smtp_settings = {
  :address              => "smtp.gmail.com",
  :port                 => 587,
  :domain               => 'baci.lindsaar.net',
  :user_name            => '<username>',
  :password             => '<password>',
  :authentication       => 'plain',
  :enable_starttls_auto => true  } 
```

[有关在此处](http://guides.rubyonrails.org/action_mailer_basics.html)发送和设置电子邮件的更多信息

# javascript - 我是否需要了解 HTML 和 CSS 才能使用 jQuery Mobile？

> ID：14942121
> 
> 赞同：0
> 
> 时间：2013-02-18T17:37:32.273
> 
> 标签：javascript, html, css, jquery-mobile, web

我是否需要 HTML、CSS 知识才能使用 jQuery Mobile。我会将它与Phonegap 结合使用。我知道这听起来可能很奇怪，但是框架是否创建了自己的 CSS 和 HTML？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:40:00.150

是的，你需要了解 CSS 和 HTML 才能做很多事情。但是，如果您认识的人知道这些事情，您可以自己不了解它们。

# jquery - 如何在 HTML 中使用 jquery 读取 XML 元素

> ID：14942122
> 
> 赞同：1
> 
> 时间：2013-02-18T17:37:37.923
> 
> 标签：jquery, xml

我正在尝试在不使用元素名称的情况下读取 XML 元素，即以下示例中的“书籍”。例如

```
 <Books>
           <book>
              <title>C++</title>
              <author>A</author>
           </book>
           <book>
              <title>XML</title>
              <author>X</author>
           </book>
    </Books> 
```

换句话说，如何在 HTML 中使用 jquery 动态读取“Books”元素并将子元素分配给数组。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:47:59.677

我为你写了简单的 HTML。演示在[http://jsfiddle.net/UC2dM/185/](http://jsfiddle.net/UC2dM/185/)

```
$.ajax({
    url:'/echo/xml/',
    data: {xml:'<Books><book><title>C++</title><author>A</author> </book><book><title>XML</title><author>X</author></book></Books>'},
    dataType: 'xml',
    type:'post',
    success: function(data){
        var xml = $(data);
        $('#container').append( CategoryToUl(xml.children()) );
    }
});

function CategoryToUl(xml){
    var categories = xml.children('book');
    if (categories.length > 0)
    {
        var ul = $('<ul/>');
        categories.each(function(){
            var $this = $(this);
            var li = $('<li/>');
            var a = $('<a/>',{
                text: $this.children('title').text()
            });
            li.append(a);
            li.append( CategoryToUl( $this ) );
            ul.append(li);
        });
        return ul;
    }
    return null;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T18:37:38.090

谢谢你们。我找到了我的解决方案

```
var xml = "<root><stuff></stuff><stuff><stuffchild></stuffchild></stuff></root>";

function alertit(jqueryObject) {
    if (jqueryObject.length === 0) return;

    jqueryObject.each(function() {
        alert(this.nodeName.toLowerCase());
    });

    alertit(jqueryObject.children());
}

alertit($(xml));

http://jsfiddle.net/TBwm8/3/ 
```

谢谢。

# html - HTML5 服务器使用不同的事件与不同的 url 发送事件

> ID：14942124
> 
> 赞同：1
> 
> 时间：2013-02-18T17:37:42.510
> 
> 标签：html, server-sent-events

如果我有两种不同类型的事件，那么似乎有两种方法可以使用 HTML5 服务器发送事件来分隔不同类型的事件：

1.  **将相应的事件**关键字附加到从服务器推送的每条消息。
2.  在不同的 URL 公开不同的事件类型。

作为刚开始学习使用 HTML5 SSE 的人，我想知道我什么时候会使用每种方法。

这个 API 的有经验的用户有什么见解吗？

**附言**

我认为这并不重要，但我的服务器端是 Node+Express。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T00:30:15.727

如果这两种类型的事件仍在同一个应用程序中，那么最好的解决方案是使用**单个 SSE**连接并在流中使用不同类型的事件。

通过这种方式，您可以减少打开连接的数量以及建立和保持连接的开销。

如果您在同一页面上有两个独立的应用程序（例如股票行情和聊天窗口），那么为了保持代码库的独立性，拥有两个单独的流可能会更容易。

# cordova - Blackberry 9300：找不到已安装的应用程序

> ID：14942127
> 
> 赞同：-1
> 
> 时间：2013-02-18T17:37:55.640
> 
> 标签：cordova, blackberry

我有一个 Blackberry 9300。我通过无线方式安装了一个应用程序，但我无法在任何地方看到该应用程序。该应用程序在安装后首次运行。如果我去选项/应用程序，我可以看到它安装在那里。但是图标应用程序无处可寻，我无法再次运行它。

我正在测试的应用程序是用于黑莓的 2.0 Cordova 示例。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T17:49:14.647

你在下载文件夹中检查了吗？

# windows-8 - Windows 8 Metro App 中的烟花动画 Microsoft Minesweeper

> ID：14942129
> 
> 赞同：0
> 
> 时间：2013-02-18T17:38:09.720
> 
> 标签：windows-8

我正在寻找在我自己的 Windows 8 Metro App 中创建 Fireworks 动画的具体帮助，该动画将基于在最新的“Microsoft Minesweeper”Windows 8 Metro App 中成功完成游戏后的 Fireworks 动画。

任何想法、提示、文档都会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T18:15:06.810

在 Windows 应用商店 XAML 应用程序中创建动画有两种方法：1) 故事板和 2) 程序动画。

故事板非常适合在屏幕上移动按钮和列表框等 UI 元素。您基本上可以为您想要随时间更改的对象上的任何属性设置动画。故事板的问题在于它们*针对*场景中的特定元素，例如，每次播放时它总是会为同一个按钮设置动画。您可以在此处阅读有关故事板动画的更多信息：

[http://msdn.microsoft.com/en-us/magazine/cc721608.aspx](http://msdn.microsoft.com/en-us/magazine/cc721608.aspx)

对于烟花和其他动态动画（如粒子效果），您确实需要使用程序动画。程序动画之所以称为程序动画，是因为它们是在代码中逐帧生成的。这听起来很复杂，而且比在 Blend 中使用时间线功能更难想出，但结果令人震惊，您通常可以在网上找到一些好的示例。事实上，这是一篇关于程序动画的精彩文章，其中包括爆炸和旋转星星的代码。我敢打赌，您可以根据这两个示例提出一些很酷的东西。

[http://blogs.claritycon.com/blog/2011/03/advanced-animation-animating-15000-visuals-in-silverlight-2/](http://blogs.claritycon.com/blog/2011/03/advanced-animation-animating-15000-visuals-in-silverlight-2/)

开发支持、设计支持和更多的好处：http: [//bit.ly/winappsupport](http://bit.ly/winappsupport)

# sql - 将列转置为行而不求和

> ID：14942131
> 
> 赞同：1
> 
> 时间：2013-02-18T17:38:14.657
> 
> 标签：sql, sql-server, pivot

我有下表：

```
 id     name     year     month     value     code
    1      George   1991       1       675       1234
    2      George   1991       2       675       1234
    3      George   1991       2       675       1234
    5      George   1991       3       675       1234
    ...    ...      ...       ...      ...       ... 
```

但我必须像这样展示它，所以我可以连续几个月使用一个 id：

```
 id     year     name     code     jan     feb     mar     apr   ...  dec
    1      1991     George   1234     675     675     675      0          0
    2      1991     George   1234      0      675      0       0          0
    ...    ...      ...      ...      ...     ...     ...     ...   ...  ... 
```

问题是：同一个月内可能有超过 1 个值，如果不对这些值求和（在本例中为 2 月），我就无法创建该结构，我不希望这样。有没有办法使用枢轴或其他东西来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T17:52:00.340

如果您希望每个月有多个值保持唯一，那么您应该考虑`row_number()`在使用之前应用`PIVOT`：

```
select name, year, code,
  coalesce([1], 0) as jan,
  coalesce([2], 0) as feb,
  coalesce([3], 0) as mar
from
(
  select name, year, month, value, code,
    row_number() over(partition by name, year, month
                      order by year, month) rn
  from yourtable
) src
pivot
(
  max(value)
  for month in ([1], [2], [3])
) piv 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/6b547/5)

结果是：

```
|   NAME | YEAR | CODE | JAN | FEB | MAR |
------------------------------------------
| George | 1991 | 1234 | 675 | 675 | 675 |
| George | 1991 | 1234 |   0 | 675 |   0 | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T17:49:07.003

使用 PIVOT 会有什么问题？

通过这种查询，当 ID、NAME、CODE、YEAR 和 MONTH 之间存在唯一性时，您将获得例外的结果。

```
select id, name, code, year,
        [1] as JAN,
        [2] as FEB,
        ...
        [11] as NOV,
        [12] as DEC
from (
        select id, name, code, year, month, value
        from <table>
    )
pivot (
    max (value) for month in ([1],[2], ... [11],[12])
) 
```

# php - php代码中的Javascript不显示

> ID：14942141
> 
> 赞同：-2
> 
> 时间：2013-02-18T17:39:00.913
> 
> 标签：php, javascript

我在我的 php 代码里面

```
var_dump($var);

$var ='
<script type="text/javascript">
    '.$var.'
</script>'
;

var_dump($var); 
```

第一个`var_dump`正确显示一些值，但第二个显示一个空字符串。

[示例输出](http://codepad.viper-7.com/IdpgMo)：

> **注意：**未定义变量：第**3**行**/code/IdpgMo**中的 var NULL**注意：**未定义变量：第**7**行**/code/IdpgMo**中的 var string(50) " " PHP 注意：未定义变量：第 3 行 /code/IdpgMo 中的 var PHP 注意：未定义变量：第**7**行 /code/IdpgMo 中的 var

 ******为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T17:40:58.720

这是因为您的浏览器正在像处理脚本一样处理它。脚本未显示它们正在运行，因此脚本在您的源中未显示在屏幕上

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T17:41:58.883

可能是因为您将`Content-Type`标题保留为默认值，并且文档正在作为 HTML 处理。

脚本元素对页面没有可见的影响。

您可以通过以下方式查看数据：

*   编写将公开数据的 JS（尽管您必须确保它在语法上是有效的 JS）。
*   使用 DOM 检查器
*   查看源
*   添加`header('Content-Type: text/plain');`到 PHP。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T17:42:20.283

查看 HTML 页面的源代码，如果它在 var 转储中正确显示，这应该与 javascript 语法有关

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T17:47:21.573

你可能会看到这样的东西：

> 字符串（48）“”

这是因为 Web 浏览器正在理解脚本标签并对其进行处理，而不是显示文本。

如果您希望能够看到文本，请使用 htmlentities 函数，以便将特殊的 HTML 字符转换为浏览器而不会将其理解为标签：

`print htmlentities($var);`******

# entity-framework-5 - Entity Framewok递归关系和子选择

> ID：14942145
> 
> 赞同：0
> 
> 时间：2013-02-18T17:39:04.697
> 
> 标签：entity-framework-5, recursive-query

我正在使用带有数据库优先方法的实体框架。我有与 Offers 实体相关的类别的递归关系。
**我需要从单个类别中获取所有优惠，包括儿童类别的优惠。**
我的模型：
![在此处输入图像描述](../Images/de085a2817963363c1219e867c3e3ddd.png)

~~我的查询：~~

 ~~```
Dim category As Categories = DbContext.Categories.Include("Categories1").FirstOrDefault(Function(c) c.Id = 2)
Dim offers = category.Offers.Union(category.Categories1.SelectMany(Function(c) c.Offers)) 
```~~ 

~~这个查询给了我预期的结果，但我想知道是否还有其他更优化的方法~~
**编辑：**我的查询是错误的，因为关系不仅仅是 1 级深

# windows-8 - Windows 8 应用交互

> ID：14942150
> 
> 赞同：1
> 
> 时间：2013-02-18T17:39:25.700
> 
> 标签：windows-8, windows-store-apps

是否可以创建一个 Windows 8 商店应用程序，该应用程序具有 JSON 形式的数据和一些与之关联的 REST API，我是否能够在我开发的另一个应用程序中调用该 JSON 数据和 API？这可能吗？我我使用 VS 2012 作为 IDE，我的编程语言是 C#

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T18:12:29.093

不能。Windows 8 应用商店应用程序无法以这种方式相互通信。但是，您可以轻松地开发一个 Web 服务，商店应用程序都可以访问并以这种方式进行同步或通信。也就是说，通过云进行通信，而不是在客户端进行应用到应用的通信。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T18:46:17.097

是和不是。一方面，John 是对的，您不能直接在两个 Windows 8 应用程序之间进行交互。但是，有一些技术可以进行交互。您的第一个选择是通过服务进行交互。虽然这听起来不像你可以做的，但它是一种选择。您的第二个选择是将数据保存到文件中（但不是在本地存储中），并让您的第二个应用程序使用文件激活来选择它。您的第三个选项是使用协议激活将 JSON 字符串传递给您的第二个应用程序。您应该意识到，最后两个选项都不是真正的交互。无法保证甚至安装了第二个应用程序（或第一个应用程序）。并且交互必须由第一个应用程序启动，并且不能由第二个应用程序请求。就通信而言，它并不多，但它会根据您的情况为您提供选择。[http://blog.jerrynixon.com/2012/10/walkthrough-using-windows-8-custom.html](http://blog.jerrynixon.com/2012/10/walkthrough-using-windows-8-custom.html)我讨厌做工作，但开发人员是创新的，你会像他们一样使用这些技术设计的。不攻击他们。但你可能无法从他们那里得到你想要的。

# faraday - 如何用 Faraday 捕获 Faraday::Error::ConnectionFailed 异常？

> ID：14942154
> 
> 赞同：3
> 
> 时间：2013-02-18T17:39:46.930
> 
> 标签：faraday

如果我运行来自 Faraday 的 HTTP 请求，而网络不可用（即在 wifi 环境中或离线工作），那么默认情况下捕获此异常会很好：

```
/Users/pmu/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/net/http.rb:762:in `initialize': getaddrinfo: nodename or servname provided, or not known (Faraday: :错误::连接失败)
    来自 /Users/pmu/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/net/http.rb:762:in `open'
    来自 /Users/pmu/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/net/http.rb:762:in `block in connect'
    来自 /Users/pmu/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/timeout.rb:54:in `timeout'
    来自 /Users/pmu/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/timeout.rb:99:in `timeout'
    来自 /Users/pmu/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/net/http.rb:762:in `connect'
    来自 /Users/pmu/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/net/http.rb:755:in `do_start'
    来自 /Users/pmu/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/net/http.rb:744:in `start'
    来自 /Users/pmu/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/net/http.rb:1284:in `request'
    来自 /Users/pmu/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/net/http.rb:1026:in `get'
    来自 /Users/pmu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/faraday-0.8.5/lib/faraday/adapter/net_http.rb:73:in `perform_request '
    来自 /Users/pmu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/faraday-0.8.5/lib/faraday/adapter/net_http.rb:38:in `call '
    来自 /Users/pmu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/faraday-0.8.5/lib/faraday/response.rb:8:in `call'
    来自 /Users/pmu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/faraday-0.8.5/lib/faraday/response/logger.rb:20:in `call '
    来自 /Users/pmu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/faraday-0.8.5/lib/faraday/request/authorization.rb:36:in `call '
    来自 /Users/pmu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/faraday-0.8.5/lib/faraday/request/url_encoded.rb:14:in `call '
    来自 /Users/pmu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/faraday-0.8.5/lib/faraday/request/multipart.rb:13:in `call '
    来自 /Users/pmu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/faraday-0.8.5/lib/faraday/connection.rb:245:in `run_request'
    来自 /Users/pmu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/faraday-0.8.5/lib/faraday/connection.rb:98:in `get'
    来自 /Users/pmu/projects/bar/cli/lib/foo/rest_client.rb:32:in `list'

```

默认情况下，法拉第如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-07T13:10:41.423

如果你想让它做一些比完整的堆栈跟踪更好的事情，你可以在你的法拉第设置的基础上做这样的事情：

```
begin
 @app.call(env)
rescue Faraday::Error::ConnectionFailed => e
  puts "Connection failed: #{e}"
  # Choose what you want to happen, for example in my gem I do
  exit 1
end 
```

# mysql - 如何对按日期排序的不断更新的提要进行分页

> ID：14942162
> 
> 赞同：1
> 
> 时间：2013-02-18T17:40:09.187
> 
> 标签：mysql, pagination, infinite-scroll

我有一个内容提要，按`date DESC, id DESC`.
`date`只是一个日期，而不是日期时间。
`id`是典型的`INT auto_increment`。

我需要查询`n`“在特定行之后”的行。（想象一个无限滚动，它需要“获取比当前最后一个项目更旧的项目”）

我会查询`where id < :last_id`，但问题是 的顺序与 的顺序`date`不一致`_id`。

我会查询`where date < :last_date`，但问题是“每天”有超过 1 个项目。我会丢失所有使用相同日期的项目。

我会查询，`ORDER BY date DESC, id DESC LIMIT x, n`但提要可能会在 2 个查询之间发生变化，将新项目添加到顶部，从而移动整个偏移量。

我目前的 hacky 解决方案是查询`where date <= :last_date ORDER BY LIMIT date DESC, id DESC LIMIT n+20`然后“手动”丢弃当前最新项目之前的结果。（希望不超过 20 个）。

我确定我不是第一个遇到类似问题的人......有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:43:17.993

如果您每天有超过一件物品，那么您应该已经有一个二级排序顺序。如果它是 id，那么像这样编写你的 where 子句：

```
WHERE date < :last_date OR (date = :last_date AND id < :last_id) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T17:46:17.670

您可以创建一个存储时间戳的字段（+ on update current_timestamp？）。我假设您不会在一秒钟内获得多个条目。得到结果后，保存最新的时间戳，并在下一个查询中将其传递给脚本。您的查询可能会更改为：

```
SELECT * FROM [table] WHERE timestamp_field > [last timestamp] ORDER BY timestamp_field DESC 
```

# .htaccess - 设置文档根

> ID：14942171
> 
> 赞同：0
> 
> 时间：2013-02-18T17:40:39.447
> 
> 标签：.htaccess

我有一个专用服务器**Centos 6**，我只用来存储文件。我的文件不在文件夹`/home/public_html/`中，位于服务器根目录中的文件夹中`/srv/files/`。

怎么激活。`Htaccess`在这个目录中`/srv/files/`？

我正在`/etc/httpd/conf/httpd.conf`按如下方式设置文件：

```
<Directory '/srv/arqivos/'>
    Options FollowSymLinks Indexes
    AllowOverride AuthConfig
    Order deny,allow
    Deny from all
</Directory> 
```

重新启动 apache 但没有得到任何结果。

有人能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T17:42:59.367

我认为您需要设置`AllowOverride`为`All`：

```
AllowOverride All 
```

我将这个配置用于我的所有服务器。

# gcc - GNU GCC：如何编译 google-pertools 使其不需要@GLIBCXX_3.4

> ID：14942173
> 
> 赞同：1
> 
> 时间：2013-02-18T17:40:44.263
> 
> 标签：gcc, compiler-construction, linker, freebsd, libstdc++

我编译了库并使用 readelf 命令检查了符号，我得到了

```
$ readelf -s ./.libs/libtcmalloc.so.5 | grep GLIB

94: 0000000000000000    32 OBJECT  GLOBAL DEFAULT  UND _ZNSs4_Rep20_S_empty_rep_@GLIBCXX_3.4 (5) 
```

我想以省略@GLIBCXX_3.4 的方式编译库。

我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:52:35.447

做到这一点的唯一方法是使用不使用版本符号的旧 GCC 构建，或者使用重新编译 GCC 本身，`--disable-symbol-versioning`然后使用新的 GCC 重新编译库。

你为什么要这个？

# android - Android Phonegap 日期选择器在 4.2 OS 设备以外的其他设备上不工作

> ID：14942175
> 
> 赞同：1
> 
> 时间：2013-02-18T17:40:49.673
> 
> 标签：android, phonegap-plugins

我正在使用 phonegap 2.4 为 android 实现 datepicker。

日期选择器不适用于除 android 4.2 操作系统设备之外的其他设备。

谢谢你的帮助。

# java - 自定义字母顺序

> ID：14942180
> 
> 赞同：1
> 
> 时间：2013-02-18T17:41:00.250
> 
> 标签：java, string, sorting, alphabetical

我想将字母“h”放在“u”和“v”之间。我找到了一个解决方案，但我认为这可以用更短更好的方式解决。

```
public class CustomStringSort
{
    public static void main(String[] args)
    {
        String[] abc = "abcdefghijklmnopqrstuvwxyz".split("");

        List<String> letters = Arrays.asList(abc);

        Collections.sort(letters, new MyStringComparator());

        for(String letter : letters)
        {
            System.out.println(letter);
        }
    }

    static class MyStringComparator implements Comparator<String>
    {
        @Override
        public int compare(String o1, String o2)
        {
            if(o1.equals("h") && o2.compareTo("u") <= 0)
            {
                return 1;
            }

            if(o1.equals("h") && o2.compareTo("v") >= 0)
            {
                return -1;
            }

            if(o2.equals("h") && o1.compareTo("u") <= 0)
            {
                return -1;
            }

            if(o2.equals("h") && o1.compareTo("v") >= 0)
            {
                return 1;
            }

            return o1.compareTo(o2);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T17:44:49.220

我可以建议你使用枚举类型，不确定如何实现，但枚举是为自定义列表制作的

# sql - 如何从sql中的关联表中获取某个值

> ID：14942182
> 
> 赞同：0
> 
> 时间：2013-02-18T17:41:03.847
> 
> 标签：sql, select, associative

我有两张表和一张将这两张表关联起来的表。表 A 有两列 (pk,name) 表 B 也有两列 (id,name) 表 AB 有三列 (pk(A 的 FK), id(B 的 FK), 日期)

如何编写一个选择来检索某个 A.pk 的 A.name、B.name 和 AB.date？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T17:45:40.123

```
select A.name, B.name, AB.date
from A
join AB on A.pk=AB.pk
join B on AB.id=B.id
where A.pk=value 
```

# drupal - Drupal 子目录多站点和提升

> ID：14942183
> 
> 赞同：0
> 
> 时间：2013-02-18T17:41:06.023
> 
> 标签：drupal

很长一段时间以来，我一直在努力使用 drupal 多站点。现在我正在尝试优化一个大型多站点（子目录，而不是子域），并且遇到了 boost 模块的问题。

显然，默认子站点与 boost 配合得很好；但其余的告诉我*.htaccess*中的规则是错误的，因为它们位于子目录中。

解决这个问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T19:04:18.633

在这里结帐：http: [//banavoz.com/2010/08/drupal-multisite-boost-cache/](http://banavoz.com/2010/08/drupal-multisite-boost-cache/)

这里博主提供了可能有用的 htaccess 设置。

如果这没有帮助，请检查：[http ://drupal.org/project/provision_boost](http://drupal.org/project/provision_boost)

# shell - 使用函数、数组和 Awk 将大写字母转换为小写字母

> ID：14942196
> 
> 赞同：-4
> 
> 时间：2013-02-18T17:41:55.843
> 
> 标签：shell, awk

如何将文件每个句子中的第一个字母大写并将其他大写字母转换为小写字母（如果有）并将修改后的文本重写到同一个输入文件中？

输入文件：

> 这是测试文件。它用于测试脚本。它用于将大写字母转换为小写字母。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T18:13:32.823

与`sed`：

```
$ sed -r 's/(.*)/\L\1/;s/((^|\.)\s*.)/\U\1/g' file
This is the test file.It is used for testing a script.Which is used for converting capital letters to small letters.

# Save changes to file
$ sed -ri 's/(.*)/\L\1/;s/((^|\.)\s*.)/\U\1/g' file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T21:05:49.263

像这样的东西？

```
awk '{sub($0,tolower($0)); sub(/./, toupper(substr($0,1,1)))}1' RS=. ORS=. file 
```

输出：

```
This is the test file.It is used for testing a script.Which is used for converting capital letters to small letters. 
```

这适用于以 . 结尾的句子**。**，但不适用于感叹号、问号等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T06:11:05.190

如果您愿意，它在 perl 中非常简单：

```
s/(\w+)/\u\L$1/g 
```

[在此处](http://theunixshell.blogspot.com/2013/02/capitalize-every-first-letter-of-word.html)或[此处查看](http://theunixshell.blogspot.com/2013/01/caplitalizechange-to-uppercase-first.html)与您的查询相关的内容

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T18:16:47.567

您可以在 Perl 中使用[tr 子例程：](http://perldoc.perl.org/functions/tr.html)

```
$ cat original-file.txt | perl -ne 'tr/A-Za-z/a-zA-Z/; print;' \
    > new-file-with-toggled-case.txt
$ mv new-file-with-toggled-case.txt original-file.txt 
```

# sql-server - 将 varchar 数据插入 varbinary

> ID：14942204
> 
> 赞同：0
> 
> 时间：2013-02-18T17:42:20.710
> 
> 标签：sql-server

我有两张桌子（例如）：

**OPERATION_TYPE**

```
 ROWID(int, not null)
  ID(PK, varchar(15), not null)
  DESCRIPTION(varchar(40),null) ... 
```

**OPER_TYPE_BINARY**

```
 ROWID(int,not null)
  OPERATION_TYPE_ID(PK, FK, varchar(15), not null)
  TYPE(PK, char(1), not null)
  BITS(image, null)
  BITS_LENGTH(int, not null) 
```

如何插入`OPER_TYPE_BINARY`from `OPERATION_TYPE`？

*   `OPERATION_TYPE_ID = ID`
*   `TYPE = 'D'`
    ? `BITS = DESCRIPTION`
    ?`BITS_LENGTH =`

# forms - ExtJS4，在面板中添加一行组合框和其他字段 - 组合框列表问题

> ID：14942208
> 
> 赞同：1
> 
> 时间：2013-02-18T17:42:28.463
> 
> 标签：forms, combobox, extjs4, row, add

首先感谢大家对这些论坛的贡献/帮助。我已经在网上搜索了几天，但我无法/找到解决方案/找出问题所在。我有一个表单面板，它最初有一组字段（组合框、文本字段、按钮等）的单行（使用 hbox 布局的容器），用户可以使用这些字段来构建布尔语句。该容器还有用于“AND”、“OR”和“DEL”的按钮，可用于附加另一行（布尔语句）或删除当前行到表单面板。我有组合框值的本地商店，这一切都很好/很好......有点。我的问题是在用户在任何组合框中输入了一个值并且当他们添加新行时，新行的组合框列表仅限于在前一行中选择的内容 - 并且仅限于该值。我可以看到新行组合框的存储通过 firebug 具有所有正确的值，但这些值无法通过 GUI 访问。我以为是浏览器问题，但在 Ffox 和 IE 中都无法解决。如果他们只通过鼠标进行选择，那绝对不是问题。我尝试使用字段集而不是容器来删除组合框配置等，在线搜索。有什么想法/想法吗？

```
Ext.define('SearchTool.view.main.component.QueryBuilderRow', {
extend: 'Ext.container.Container',
alias: 'widget.builderRow',
requires: ['SearchTool.config.Config'],
layout: 'hbox',
items: [{
    xtype: 'combo',
    cls: 'cboxFields',
    store: new Ext.data.SimpleStore({
        fields: ['fieldname', 'fieldvalue'],
        data: [
            ['field1', 'FIELD1'],
            ['field2', 'FIELD2'],
            ['field3', 'FIELD3'],
            ['field4', 'FIELD4']
        ]
    }),
    editable: true,
    selectOnFocus: false,
    forceSelection: true,
    displayField: 'fieldname',
    valueField: 'fieldvalue',
    emptyText: '(Select Field)',
    typeAhead: true,
    value: '',
    triggerAction: 'query',
    queryMode: 'local',
    width: '15%'
    }, {
    xtype: 'combo',
    cls: 'cboxOpers',
    store: operStore,
    displayField: 'opername',
    valueField: 'opervalue',
    emptyText: '(Select Oper)',
    forceSelection: true,
    typeAhead: true,
    triggerAction: 'query',
    shrinkWrap: 1,
    selectOnFocus: false,
    queryMode: 'local',
    width: '15%',
    enableKeyEvents: true
    }, {
    xtype: 'textfield',
    // itemId: 'val1',
    width: '18%',
    emptyText: '(Enter value...)',
    regex: SearchTool.config.Config.qryBuilderTextFieldRegex,
    regexText: SearchTool.config.Config.qryBuilderErrText,
    enableKeyEvents: true
    }, {
    xtype: 'combo',
    cls: 'cboxAndOr',
    store: andorStore,
    minChars: 1,
    disabled: true,
    displayField: 'opername',
    valueField: 'opervalue',
    typeAhead: true,
    emptyText: '(AND/OR)',
    allowBlank: true,
    enforceMaxLength: true,
    matchFieldWidth: true,
    mode: 'local',
    width: '12%'
    }, {
    xtype: 'textfield',
    width: '17%',
    emptyText: '(Enter value...)'
    }, {
    xtype: 'hidden',
    value: ''
    }, {
    xtype: 'button',
    iconCls: 'icon-btnAdd',
    text: 'AND',
    width: '7%',
    handler: function (t) {
    t.up('panel').add({xtype:'builderRow'}); //add new row
    t.up('panel').items.items[t.up('panel').items.items.length -                     
        2].down('button').next('button').next('button').hide();
    t.prev('hidden').setValue(' AND '); //to be passed in w/ form
    }
    }, {
    xtype: 'button',
    iconCls: 'icon-btnAdd',
    text: 'OR',
    width: '6.5%',
    handler: function (t) {
    t.up('panel').add({xtype:'builderRow'}); //add new row
    t.up('panel').items.items[t.up('panel').items.items.length - 2].down('button').next('button').next('button').hide();
    t.prev('hidden').setValue(' OR ');
    }
    }, {
    xtype: 'button',
    iconCls: 'icon-btnDelete',
    text: 'DEL',
    width: '7%',
    handler: function (t, e, o) {
    var i = t.up('panel').items.items;
    var l = i.length; //length of the array of items
    if (l > 2) i[l - 2].down('button').next('button').next('button').show();
    i[t.up('panel').items.items.length - 2].down('hidden').setValue(''); //prev row hidden reset

    t.up('panel').remove(t.up('container')); //remove this row
    }
}]
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T03:31:40.177

不要为不同的组合框重复使用商店。为每一行的每个组合创建新商店。这是因为，当您键入时，您正在过滤组合框中的数据。数据包含在商店中，因此您基本上是在过滤商店，它在组合之间共享。

因此，一旦您过滤了第 1 行，过滤器就会对第 2 行保持活动状态。如果每个组合都使用新存储，则不会出现问题。

# unity3d - OpenGL 着色语言 TRANSFORM_TEX

> ID：14942210
> 
> 赞同：13
> 
> 时间：2013-02-18T17:42:34.890
> 
> 标签：unity3d, shader

在 unity3d 中有一段代码用于顶点着色器：

```
v2f vert(appdata_full v) {
    v2f o;

    o.pos = mul (UNITY_MATRIX_MVP, v.vertex);   
    o.uv = TRANSFORM_TEX(v.texcoord, _MainTex);
    o.vertexColor = v.color * _TintColor;

    return o; 
} 
```

在下面的行中：

```
o.uv = TRANSFORM_TEX(v.texcoord, _MainTex); 
```

TRANSFORM_TEX 函数的主要任务是什么，它在 CgFx 中的等价物是什么！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-20T10:16:57.640

这只是一个`Unity3D`特定的**宏**，没有`Cg`等价物。您可以在文件中找到此宏定义：

> Unity\Editor\Data\CGIncludes\UnityCG.inc

它是这样定义的：

```
// Transforms 2D UV by scale/bias property
#define TRANSFORM_TEX(tex,name) (tex.xy * name##_ST.xy + name##_ST.zw) 
```

它缩放和偏移纹理坐标。 `XY`values 控制**纹理平铺**和**偏移**`ZW`量。

# ios - 如何构建一个能够插入、删除和编辑的 plist？

> ID：14942215
> 
> 赞同：0
> 
> 时间：2013-02-18T17:43:03.063
> 
> 标签：ios, objective-c, plist, uitableview

在 iOS 编程方面，我完全是个菜鸟。我正在尝试编写一个程序，我可以在其中插入、编辑和删除基于 plist 文件的 tableviewcell：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>Factors</key>
    <array>
        <string>Time</string>
        <string>Cost</string>
    </array>
    <key>Rank</key>
    <array>
        <string>10</string>
        <string>9</string>
    </array>
</dict>
</plist> 
```

时间与10有关 成本与9有关

我希望能够在不同的视图控制器中删除、添加和编辑这些值。

我做的正确吗？我是否以某种方式设置了我的 plist，将来会破坏我的代码？我希望能够在我的编辑视图控制器中单击单元格并能够编辑它们。

当我删除时，我想让它更新 plist 文件。我希望能够将因子显示为文本标签，将排名显示为详细标签。

我是否正确构建了 plist？

我已经制作了另外两个用于编辑和添加的视图控制器。如何通过为 segue 做准备来管理 plist？我希望能够将行变量传递到字段中，以便以后可以对其进行编辑。

我是否必须制作另一个 NSObject 类来对此进行建模？

我现在超级困惑@.@。这样做的正确方法或更聪明的方法是什么？

到目前为止，这就是我连接故事板的方式： ![在此处输入图像描述](../Images/a62049b11e951602f728005e345d1422.png)

有这方面的教程吗？

这是我正在使用的仓库：[https ://github.com/rlam3/test.git](https://github.com/rlam3/test.git)

谢谢您的帮助！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T21:18:38.083

我可能会将 plist 的结构更像：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
    <array>
        <dict>
            <key>Factor</key>
            <string>Time</string>
            <key>Rank</key>
            <string>10</string>
        </dict>
        <dict>
            <key>Factor</key>
            <string>Cost</string>
            <key>Rank</key>
            <string>9</string>
        </dict>
    </array>
</plist> 
```

我假设 plist 存储在设备上，如果是这样，您可以使用：

```
+ (id)arrayWithContentsOfFile:(NSString *)aPath 
```

将 plist 读入数组。

对其进行变异后，您可以通过在变异数组上使用将其写回 plist 文件：

```
- (BOOL)writeToFile:(NSString *)path atomically:(BOOL)flag 
```

您可以找到有关这些方法的更多信息@https [://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html)

# android - 我的安卓按钮不起作用

> ID：14942217
> 
> 赞同：0
> 
> 时间：2013-02-18T17:43:08.617
> 
> 标签：android, button, exit

我有2个活动和2个文件.xml，在nameActivity中有buttonCancel和buttonNewUser，在SignUpActivity中有buttonBack，当我点击buttonNewUser时它执行SignUpActivity，当我点击buttonBack它回到nameActivity但是当我点击buttonCancel时它是回到 SignUpActivity，就像在绕圈子走一样。

nameActivity 中的代码如下：

```
Button signUp, cancel;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_name);

    signUp = (Button)findViewById(R.id.buttonNewUser);
    signUp.setOnClickListener(new OnClickListener(){
        public void onClick(View v) {
            Intent intent = new Intent(v.getContext(),SignUpActivity.class);
            startActivityForResult(intent, 0);
        }

    });

    cancel = (Button)findViewById(R.id.buttonCancel);
    cancel.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            finish();
            System.exit(0);
        }
    });
} 
```

SignUpActivity 中的代码：

按钮返回；

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_sign_up);

    back = (Button)findViewById(R.id.btnBackSignUp);
    back.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            Intent intent = new Intent(v.getContext(),NameActivity.class);
            startActivityForResult(intent, 0);
        }
    });
} 
```

为什么，怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T17:48:45.867

修改您`SignUpActivity`以使用完成活动而不是再次开始原始活动，因为现在您只是创建一个新的`NameActivity`.

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_sign_up);

    back = (Button)findViewById(R.id.btnBackSignUp);
    back.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            finish();
        }
    });
} 
```

另外，不要使用`System.exit()`. 在 Java 中使用时，您无需在 Android 开发中执行此操作。

# asp.net - 使用邻接表模型的在线系统数据库设计

> ID：14942220
> 
> 赞同：0
> 
> 时间：2013-02-18T17:43:17.207
> 
> 标签：asp.net, mysql, database-design, hierarchical-data, adjacency-list-model

我正在尝试使用 asp.net c# 和 mysql 创建一个在线购物应用程序，我有很多类别，它们有两个级别的子类别，有些类别没有子类别，有点像：

```
1.clothing   
1.1-mens                    
     1.1.1-shirts                          
     1.1.2-trousers
     1.1.3-jeans  
1.2-womens      
     1.2.1-casual  
     1.2.2-jeans  
2.Books  
 -tecnhology  
 -medical  
 -history   

3.mobiles
  3.1-nokia  
  3.2-samsung   
  3.3-Apple   
  3.4-accesories   
    3.4.1-headset   
    3.4.2-cases and chargers    

4.movies         
  4.1-action    
  4.2-horror   
  4.3-romance 
```

*我的第一个问题是- *我是否应该使用邻接表模型为每个类别创建单独的表，因为我已经开始了解这个模型并且我已经看到在邻接表模型中只使用一个根节点的示例。
*我的第二个问题是- *我是否可以在邻接列表模型中添加多个根节点，并且可以添加添加产品并使用父节点遍历特定类别。谢谢..帮助表示赞赏..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T20:33:14.503

您可以有多个根节点，即使在同一个表中。根节点是没有父节点的任何节点。通常，您只需设置 parent_id=null 以使节点成为其树的根。

我认为没有必要将每个类别存储在单独的表中。

您可能还对我的演示文稿感兴趣，[使用 SQL 和 PHP 构建分层数据模型](http://www.slideshare.net/billkarwin/models-for-hierarchical-data)（PHP 部分只是材料的一小部分）。

# android - Android中加载Imageview的进度条

> ID：14942225
> 
> 赞同：0
> 
> 时间：2013-02-18T17:43:41.317
> 
> 标签：android, android-asynctask, android-imageview, android-gridview, android-progressbar

在我的 Android 应用程序中，我正在检索所有图库图片并以网格视图显示。我已经使用以下参考链接实现了在异步任务上加载图像：- [http://developer.android.com/training/displaying-bitmaps/process-bitmap.html](http://developer.android.com/training/displaying-bitmaps/process-bitmap.html)

它工作正常。

我的网格视图看起来像这样

![在此处输入图像描述](../Images/60678d5a20303d9eb1f219b2cc2a8b71.png)

但我想加载这样的图像的进度条

![在此处输入图像描述](../Images/f2e24975f53302a639190f06ecf38b64.png)

此外，如果使用默认图像代替加载图像而不是进度 bae 会更容易。

请为我提供解决方案来实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T18:04:10.917

在网格视图中，您膨胀布局（由进度条和图像视图组成）而不仅仅是图像视图，即在适配器类的 getview 方法中并将进度条 ID 作为参数传递给每个 asyc 类，在 onpreExecute 方法中使其可见，并在执行后使其可见性消失

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T17:59:54.163

考虑使用这个库，它允许你在它的选项生成器中指定

```
showStubImage(R.drawable.pic_placeholder) 
```

这将出现在库正在加载您的图像时。

[https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)

示例用法是：

```
// Outside your getView method
picOptions = new DisplayImageOptions.Builder()
            .showStubImage(R.drawable.clip_placeholder)
            .build();

// Inside getView method
ImageLoader.getInstance().displayImage(picUri, imageView, picOptions); 
```

# java - “<”和“>”符号的问题

> ID：14942229
> 
> 赞同：0
> 
> 时间：2013-02-18T17:44:01.880
> 
> 标签：java, android

我想说的是，如果文本框中的数字超过 10，那么文本就会改变。但是，Eclipse 不喜欢这个`>`符号。我究竟做错了什么？

```
if ( v == txtCarsInCarPark){
    txtCarsInCarPark = > 10;
    txtCarsInCarPark.setText("Car park Full");
} 
```

此外，它似乎在这里做同样的事情。但是，这一次我试图在文本框低于 0 时禁用按钮。同样，它不喜欢该`<`符号。

```
if ( v == txtCarsInCarPark){
    txtCarsInCarPark = < 0;
    btnCarOut.setEnabled(false);
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-18T17:45:40.683

if 语句的语法是：

```
if (x >= 10)
{
     // do something
} 
```

在您的情况下，您首先需要将文本框中的字符串转换为整数：

```
num = Integer.parseInt(txtCarsInCarPark.getText().toString());
if (num >= 10)
    txtCarsInCarPark.setText("Car park Full"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T17:45:19.843

您颠倒了符号的顺序，并在它们之间添加了空格，导致语法错误。正确的语法：

```
>= 
```

和

```
<= 
```

而且，当然，这应该在你的条件之内，而不是在外面：

```
if(v == txtCarsInCarPark && txtCarsInCarPark >= 10) {
    // stuff...
} 
```

（假设您希望两个条件都匹配：`v`必须等于`txtCarsInCarPark`，并且它们至少应该是`10`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T17:45:46.947

它应该是 >= not => 切换你的运营商，它会起作用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T17:45:50.993

尝试 >= 和 <= 也**没有空格**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-18T17:46:48.793

请改用 >= 和 <=

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-18T17:48:46.567

您的代码中的变量“ **v ”是什么？**

如果您只想检查 txtCarsInCarPark 的值，请将其放在**if**后面的括号中：

```
if (txtCarsInCarPark >= 10){
    txtCarsInCarPark.setText("Car park Full");
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-18T17:50:37.437

txtCarsInCarPark 这个数据类型是什么？

如果它是字符串或对象，您可能必须使用 compareTo()

# c# - Web API 是否需要模型 POCO 才能使用模型验证？

> ID：14942238
> 
> 赞同：0
> 
> 时间：2013-02-18T17:44:38.260
> 
> 标签：c#, validation, asp.net-web-api, model-binding, http-get

我有一个非常“GET”密集型的 ASP.NET WEB API 应用程序。大多数方法接受方法签名不同的参数变化

例如

```
[HttpGet]
public async Task<HttpResponseMessage> GetProducts(int year)
{
    //...
}

[HttpGet]
public async Task<HttpResponseMessage> GetProducts(int year, string category)
{
    //...
}

[HttpGet]
public async Task<HttpResponseMessage> GetProducts(int year, string category, int minPrice)
{
    //...
}

[HttpGet]
public async Task<HttpResponseMessage> GetProducts(int year, string category, decimal minPrice, decimal maxPrice)
{
    //...
} 
```

我想使用数据注释，`System.ComponentModel.DataAnnotations`但我注意到我必须将所有简单的 url 参数转换为模型？换句话说，我必须*为每个方法变体*创建输入模型（参见下面的示例）。

```
[HttpGet]
public async Task<HttpResponseMessage> GetProducts([FromUri] yearModel)
{
    //...
}

public class YearModel
{
    [Required]
    [Range(1966, 2013)]
    public int Year { get; set; }
} 
```

如果我想保留我的方法变体并仍然使用数据注释，有没有一种方法可以在不创建所有输入模型的情况下使用它们（有没有办法以某种方式“内联”使用它们？）？

# iphone - 状态栏旋转通知

> ID：14942241
> 
> 赞同：6
> 
> 时间：2013-02-18T17:44:51.940
> 
> 标签：iphone, ios, objective-c, uiview, uistatusbar

我想知道状态栏何时旋转。接收屏幕旋转通知可能会将事情与“面朝上”和“面朝下”等方向混淆。因此，根据状态栏的方向管理旋转是最简单和最干净的方法。方向改变时如何收到通知？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-18T18:11:04.950

您需要注册才能`UIApplicationDidChangeStatusBarOrientationNotification`收到通知。

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(statusBarOrientationChange:) name:UIApplicationDidChangeStatusBarOrientationNotification object:nil];

- (void)statusBarOrientationChange:(NSNotification *)notification {
    UIInterfaceOrientation orient = [notification.userInfo[UIApplicationStatusBarOrientationUserInfoKey] integerValue];

    // handle the interface orientation as needed
} 
```

请注意，这种方法永远不会导致“面朝上”或“面朝下”的设备方向，因为这只涉及界面方向。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-18T18:04:30.903

```
//register to receive orientation notifications somewhere:
[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(detectOrientation) name:UIDeviceOrientationDidChangeNotification object:nil];

    -(void)detectOrientation{

        switch ([[UIDevice currentDevice] orientation]) {

            case UIDeviceOrientationFaceDown:{
            }
            break;

            default:{
            }
            break;

        }
    } 
```

如果它不起作用，请检查方向锁定！浪费了几个小时。

# c# - 如何将数据库附加到树视图作为数据源？

> ID：14942245
> 
> 赞同：0
> 
> 时间：2013-02-18T17:45:03.673
> 
> 标签：c#, database, treeview

我想用 SQL Server 数据库中的自引用表的单列数据加载树视图。我想根据`slno`表的自我引用将树视图显示为像父级和子级一样的分层方式。

我的桌子看起来像这样

```
 slno     Ac_nm        Ac_acgrpPrnt
      =====================================
        1         A              0
        2         B              0
        3         c              0
        4         D              0
        5         E              1
        6         F              1
        7         G              3 
```

这里是`A,B,C,D`父节点，1 表示 的子节点，3 表示 的子节点，所以这些是我想在应用程序的表单加载中显示的层次结构，我不知道这样做吗？`Ac_acgrpPrnt``0, E, F``A``G``C`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T02:49:25.133

也许最简单的方法是首先使用 Entity Framework 创建到表的自引用映射。这会给你一个像

```
class Foo
{
     public ObservableCollection<Foo> Children { get; set; }
     {...}
} 
```

然后它只是绑定到 xaml 中的根节点集合的一种情况。创建一个 Hierarchial DataTemplate 来告诉 WPF 使用什么属性来查找子项，延迟加载将处理其余部分。

但是，您可能会在这里发现一些性能问题...

# java - 将 Object[] 类型转换为 OtherObject[]

> ID：14942248
> 
> 赞同：1
> 
> 时间：2013-02-18T17:45:11.503
> 
> 标签：java, casting, arraylist

我有一堂课

```
public class ABC {
    public int i;
    public float f;

    public ABC(int d1,float d2) {
        i=d1;
        f=d2;
    }
} 
```

我创建了一个 ABC 对象的 ArrayList。

```
 ArrayList<ABC> list = new ArrayList<ABC>();
    ABC abc1=new ABC(1,1.0f);
    ABC abc2=new ABC(2,2.0f);
    list.add(abc1);
    list.add(abc2); 
```

现在我想用`toArray()`方法将 ArrayList 转换为数组，但是这个方法返回`Object[];`.

现在我可以将元素`Object[]`一个一个地类型转换为 ABC 类型对象并创建`ABC[];`，

**但是有没有其他方法可以在一个命令中将 Object[] 类型转换为 ABC[] ？像这样的东西**

```
 ABC[] array=(ABC[])list.toArray(); 
```

虽然这个命令抛出了这个异常

> 线程“main”中的异常 java.lang.ClassCastException: [Ljava.lang.Object; 不能转换为 [LABC;**

任何帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T17:46:26.467

该[`List`接口](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#toArray%28T%5B%5D%29)有一个`toArray`返回泛型数组的方法，因此您可以使用[`use`ArrayList`'s implementation of that`](http://docs.oracle.com/javase/7/docs/api/)：

```
ABC[] array = new ABC [list.size()]
array = list.toArray(array); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T17:48:20.173

[toArray() 文档](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#toArray(T[]))

```
ABC[] array = list.toArray(new ABC[list.size()]) 
```

# sql - 如何轻松过滤我的查询

> ID：14942250
> 
> 赞同：2
> 
> 时间：2013-02-18T09:36:08.767
> 
> 标签：sql, ms-access

我正在尝试通过表单上的文本框过滤查询。我在查询的条件中有这个：

```
Like "*" & [Forms]![Form_Name]![Textbox] & "*" 
```

但是，如果文本框为空白，则它仅显示查询中在字段中有文本的数据。它不显示所有数据，即没有数据的字段。这可能吗？

我发现这样做的唯一方法是让 2 个查询 1 使用过滤器和 1 不使用过滤器并运行代码，如果文本框为空，则交换查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T15:50:46.760

只需在字段中附加一个长度为零的字符串进行比较，那么所有字段都不会为空，因此它们将匹配 *.

```
WHERE MyField & "" 
Like "*" & [Forms]![Form_Name]![Textbox] & "*" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T11:30:29.347

我目前没有可用的 Access 副本，但快速 google 和一些修修补补告诉我，这很可能满足您的需要：

```
Like "*" & [Forms]![Form_Name]![Textbox] & "*" 
Or (Len(Nz([Forms]![Form_Name]![Textbox],"")) = 0 And Len(Nz([Column],"")) = 0) 
```

资料来源：

[http://bytes.com/topic/access/answers/607087-validation-if-null-empty-string](http://bytes.com/topic/access/answers/607087-validation-if-null-empty-string) [http://office.microsoft.com/en-001/access-help/table-of-operators-HA010235862 .aspx](http://office.microsoft.com/en-001/access-help/table-of-operators-HA010235862.aspx) [http://www.techonthenet.com/access/functions/advanced/nz.php](http://www.techonthenet.com/access/functions/advanced/nz.php)

# algorithm - 输出所有可能性，可以是三个 int 数，如下例所示

> ID：14942254
> 
> 赞同：1
> 
> 时间：2013-02-18T17:45:36.733
> 
> 标签：algorithm

给定一个有序数组，输出所有满足ab=c的三元组，数组示例为：{-24, -15, -8, -6, 0, 3, 6, 9, 17, 36}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T18:57:06.727

我将建议`O(n^2)`基于以下属性的解决方案：如果您修复`a`并按顺序增加`b`，则`c`减少。因此，您可以执行以下操作：

```
 for( i = 0; i < arr.size(); i++ ) // index of a
    {
        t = arr.size() - 1; // index of possible c
        for( j = 0; j < arr.size(); j++ ) // index of b
        {
            a = arr[ i ];
            b = arr[ j ];
            c = a - b;
            while( t >= 0 && arr[ t ] > c ) // using monotonicity
               t--;
            if( t >= 0 && arr[ t ] == c )
            { /* output a, b, c */ }
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T18:32:38.817

可以`O(n^2)`通过将所有内容存储`a - b`在哈希表中然后查询`c`数组中每个元素的哈希值来完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T01:04:27.327

哈斯克尔版本：

```
triples set = 
  [[a,b,c] | a <- set, b <- set, b /= a, c <- set, c /= b && c /= a, a - b == c] 
```

*Main> 三元组 [-24, -15, -8, -6, 0, 3, 6, 9, 17, 36]
[[-15,-24,9],[-15,9,-24], [-6,-15,9],[-6,9,-15],[0,-6,6],[0,6,-6],[3,-6,9],[3, 9,-6],[9,-8,17],[9,3,6],[9,6,3],[9,17,-8]]

# php - PHP正则表达式匹配单词

> ID：14942255
> 
> 赞同：10
> 
> 时间：2013-02-18T17:45:37.667
> 
> 标签：php, regex

给定一个字符串，我想要一个包含单词的字符串数组，每个字符串前面都有任何非单词字符。

**示例输入字符串：**

`one "two" (three) -four-`

字符串中的单词可以是任何东西，甚至是乱码，带有任意数量的标点符号或符号。

**我想看到的：**

```
大批：
一
 “二
“ （三
) -四
-
```

本质上，对于每场比赛，最后一件事是一个单词，前面是前一场比赛留下的任何东西。

我将在 PHP 中使用它。我尝试了 preg_match_all() 和 preg_split() 的各种组合，其中的模式包含许多“\w”、“\b”、“[^\w]”等变体。

**更大的图景**

如何在字符串中的每个单词后放置 * 以进行搜索？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-18T17:53:24.820

如果您只想在每个“单词”之后添加一个星号，您可以这样做：

```
<?php
$test = 'one "two" (three) -four-';

echo preg_replace('/(\w+)/', "$1*", $test);
?> 
```

[http://phpfiddle.org/main/code/8nr-bpb](http://phpfiddle.org/main/code/8nr-bpb)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-18T17:50:09.253

您可以使用负前瞻来拆分单词边界，如下所示：

```
$array = preg_split( '/(?!\w)\b/', 'one "two" (three) -four-'); 
```

A`print_r( $array);` [为您提供](http://viper-7.com/jxZai4)所需的确切输出：

```
大批
(
    [0] => 一
    [1] =>“两个
    [2] => "（三个
    [3] => ) -四
    [4] => -
)
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T17:52:54.050

这是一个如何在 PHP 中使用正则表达式查找单词的示例。

```
<?php
    $subject = "abcdef";
    $pattern = '/^def/';
    preg_match($pattern, substr($subject, 3), $matches, PREG_OFFSET_CAPTURE);
    print_r($matches);
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T18:00:00.450

### 替代

```
[^\w]*(\b\w*\b)?
----- ----------
 |        |
 |        |-> Matches a word 0 or 1 time
 |-> Matches 0 to many characters except [a-zA-Z0-9_] 
```

你需要匹配！

# grails - 如何将源文件夹添加到 grails 应用程序

> ID：14942263
> 
> 赞同：3
> 
> 时间：2013-02-18T17:46:04.357
> 
> 标签：grails, sts-springsourcetoolsuite

我使用 STS 开发 Grails 应用程序，我需要在那里使用 wsimport 实用程序生成的一堆类。为了不将我的源代码与自动生成的源代码混合，我想添加单独的目录并将生成的类放在那里，如下所示：

```
grails-project  
 |  
 |-- .classpath  
 |-- .groovy  
 |-- .project  
 |-- .settings  
 |-- application.properties  
 |-- grails-app  
 |-- lib  
 |-- scripts  
 |-- src
 |   |-- groovy
 |   |-- java
 |   `-- wsimport     <- where I want to make additional source folder
 |-- target  
 |-- target-eclipse  
 |-- test  
 `-- web-app 
```

我可以向 .classpath 文件添加新的类路径条目，STS 将识别源，但我对 Grails 该怎么办？我需要在某个配置文件中指定它吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T18:00:51.183

答案在这里：

[http://ofps.oreilly.com/titles/9781449323936/chapter_configuration.html](http://ofps.oreilly.com/titles/9781449323936/chapter_configuration.html)

总而言之，您可以使用如下配置：

```
extraSrcDirs = ["$basedir/src/extra1", "$basedir/src/extra2", ...]

eventCompileStart = {
   for (String path in extraSrcDirs) {
      projectCompiler.srcDirectories << path
   }
   copyResources buildSettings.resourcesDir
}

eventCreateWarStart = { warName, stagingDir ->
   copyResources "$stagingDir/WEB-INF/classes"
}

private copyResources(destination) {
   ant.copy(todir: destination,
            failonerror: false,
            preservelastmodified: true) {
      for (String path in extraSrcDirs) {
         fileset(dir: path) {
            exclude(name: '*.groovy')
            exclude(name: '*.java')
         }
      }
   }
} 
```

这将使 grails 编译器知道额外的源文件夹，但我认为 STS 知道源文件夹还不够。为此，您将不得不继续更新项目的 .classpath。

# java - Swing 应用程序对 Spring 运行时应用程序的依赖，如何启动 Spring 上下文？

> ID：14942266
> 
> 赞同：0
> 
> 时间：2013-02-18T17:46:16.770
> 
> 标签：java, spring, swing, applicationcontext

我有 2 个应用程序。

一个是 Swing 应用程序，我们称之为**SWING_ONE**，另一个是启用了 JSE Spring 的带有 Spring Context 的应用程序，它用于与 Web 服务通信，我们称之为**SPRING_ONE**。

现在，我需要**SWING_ONE**在加载完成后启动**SPRING_ONE**。

但 ！！！ **SPRING_ONE**是在运行时通过 Maven 配置文件添加的……所以`new appStart();`对我来说不是。

**SWING_ONE**没有任何 Spring 依赖项，也无法添加它们。

我可以随心所欲地使用**SPRING_ONE**。

这是通过使用此代码的**SWING_ONE来完成的**

```
 String file = "jax-ws-embedded-context-" + Type + ".xml";
        AbstractApplicationContext ctx = new ClassPathXmlApplicationContext(
              new String[] {file});
        ctx.registerShutdownHook(); 
```

但是 Spring 被禁止使用它，因为没有必要在那里拥有它，但现在我想不出一种方法来拥有**SPRING_ONE** ...

我在**SPRING_ONE**`public void Main(String[args])`中创建了一个方法，但**没有使用反射（我也不能使用它。）**我想不出一种方法来启动它或让它成为 ApplicationContext 自动加载。

 ****谢谢;****

# delphi - 如何在 Delphi 6 中编码 base64？

> ID：14942269
> 
> 赞同：3
> 
> 时间：2013-02-18T17:46:18.210
> 
> 标签：delphi, pdf, encoding, base64, delphi-6

我需要在 Delphi6 中将 pdf 文档编码为 base64。谁能帮我？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-18T19:06:00.970

您可以使用`EncdDecd`随 Delphi 提供的单元。您需要的功能是`EncodeStream`. 您只需要创建两个流，一个用于输入，一个用于输出。如果您正在处理文件，那么您应该创建`TFileStream`实例。

创建两个文件流后，您只需要：

```
EncodeStream(InputStream, OutputStream); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-18T17:57:35.427

```
unit base64;

interface

uses Classes;

function base64encode(f:TStream):string;

implementation

const
  Base64Codes:array[0..63] of char=
    'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';

function base64encode(f:TStream):string;
const
  dSize=57*100;//must be multiple of 3
var
  d:array[0..dSize-1] of byte;
  i,l:integer;
begin
  Result:='';
  l:=dSize;
  while l=dSize do
   begin
    l:=f.Read(d[0],dSize);
    i:=0;
    while i<l do
     begin
      if i+1=l then
        Result:=Result+
          Base64Codes[  d[i  ] shr  2]+
          Base64Codes[((d[i  ] and $3) shl 4)]+
          '=='
      else if i+2=l then
        Result:=Result+
          Base64Codes[  d[i  ] shr  2]+
          Base64Codes[((d[i  ] and $3) shl 4) or (d[i+1] shr 4)]+
          Base64Codes[((d[i+1] and $F) shl 2)]+
          '='
      else
        Result:=Result+
          Base64Codes[  d[i  ] shr  2]+
          Base64Codes[((d[i  ] and $3) shl 4) or (d[i+1] shr 4)]+
          Base64Codes[((d[i+1] and $F) shl 2) or (d[i+2] shr 6)]+
          Base64Codes[  d[i+2] and $3F];
      inc(i,3);
      if ((i mod 57)=0) then Result:=Result+#13#10;
     end;
   end;
end;

end. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T18:52:57.820

您可以使用[INDY](http://www.indyproject.org/Sockets/wizard/DownloadWizard.EN.aspx)的[TIdEncoderMIME](http://www.indyproject.org/docsite/html/TIdEncoderMIME.html)类对任何文件进行编码。

AFAIK，INDY 9 预装在 Delphi 6 中，但建议更新您的 INDY 版本，因为 INDY 10 是最新的，与旧的 INDY 9 相比有很多改进和错误修复。

您的代码可能如下所示：

```
uses IdCoder, IdCoder3to4, IdCoderMIME, IdBaseComponent;

procedure TForm1.Button1Click(Sender: TObject);
var
  SourceStr: TFileStream;
  Encoder: TIdEncoderMIME;
begin
  if OpenDialog1.Execute then
  begin
    SourceStr := TFileStream.Create(OpenDialog1.FileName, fmOpenRead);
    try
      Encoder := TIdEncoderMIME.Create(nil);
      try
        Memo1.Lines.Text := Encoder.Encode(SourceStr);
      finally
        Encoder.Free;
      end;
    finally
      SourceStr.Free;
    end;
  end;
end; 
```

# knockout.js - Knockout.js 模板范围的半全局变量

> ID：14942270
> 
> 赞同：4
> 
> 时间：2013-02-18T17:46:18.800
> 
> 标签：knockout.js

有没有办法为 KO 定义（没有更好的术语）“半全局”变量？

我想让一个变量可用于单个 KO 模板，而不管上下文如何，同时将其与实际的全局范围和其他模板隔离开来。

*目标是在不使用$parent*的情况下，在任何绑定上下文中（例如，在 KO 的 foreach 中）拥有一组仅可用于该一个模板的辅助函数，就像全局变量总是可以在没有任何特殊语法的情况下访问一样。下面的例子：

```
// Template 1 - helpers.foo has been set for this Template or ViewModel
<div data-bind="text:helpers.foo('Works')"></div>
<div data-bind="foreach: someList">
    <div data-bind="text:helpers.foo('Context is inside someList. helpers.foo is not available :( ')"></div>
</div>

// Template 2 - helpers.foo is not set for this Template or ViewModel
<div data-bind="text:helpers.foo('Should not work')"></div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T23:26:23.023

我还不确定，但我想我找到了解决方案。在第 n 次浏览 KO 文档后，我发现了这一点：[为后代绑定提供附加值](http://knockoutjs.com/documentation/custom-bindings-controlling-descendant-bindings.html#example_supplying_additional_values_to_descendant_bindings)。

对于那些 tl;dr 的人：我可以使用该自定义绑定处理程序在每个子上下文中向模板公开任何变量，这正是我所寻找的。换句话说，这成为可能：

**视图模型**

```
<script>
ViewModel = {
    Helpers: {
        foo: function(message) {return message;}
    },
    someList: [
        'foo',
        'bar',
        'baz'
    ]
}
</script> 
```

**HTML**

```
<div data-bind="text:helpers.foo('Helpers.foo can be used because we are in the root context')"></div>

<div data-bind="foreach: someList">
    <div data-bind="text:helpers.foo('We are in the context of someList. This will fail.')"></div>
</div>

<div data-bind="withProperties:{Helpers:Helpers}">
    <div data-bind="foreach: someList">
        <div data-bind="text:helpers.foo('Helpers.foo can now be used inside every subcontext, thanks to the withProperties custom binding')"> </div>
    </div>
</div> 
```

在我的情况下，自定义绑定包装器可以在加载每个模板时自动应用，所以这对我来说似乎是一个很好的解决方案！

如果发生我忽略了某些事情，我会尝试这种方法并发布后续内容。这个问题将暂时开放，因为我不能这么快接受自己的答案。同时随时发布您的解决方案，我相信有更多的方法可以解决这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T20:21:01.067

您应该定义新的自定义绑定，从您的“助手”中获取值。仅举一个简单的例子：

```
// your "semi-globally" accessible helpers
var helpers = {
    foo: function(text){ return "<b>" + text + "</b>"; },
    boo: function(text){ return "<u>" + text + "</u>"; }
};

// custom binding
ko.bindingHandlers.helpers = {
    init: function(element, valueAccessor) {
        var opts = valueAccessor();
        element.innerHTML = helpers[opts.name].apply(element, opts.args);
    }
};

// two different primitive ViewModels without any ref to helpers
function VM_1 () { this.name = "vm-1"; }
function VM_2 () { this.name = "vm-2"; }

// binding models
ko.applyBindings(new VM_1, document.getElementById("vm-1"));
ko.applyBindings(new VM_2, document.getElementById("vm-2")); 
```

HTML：

```
<div id="vm-1">
    <span data-bind="text: name"></span>
    <span data-bind="helpers: { name: 'foo', args: ['Works!'] }"></span>
</div>

<div id="vm-2">
    <span data-bind="text: name"></span>
    <span data-bind="helpers: { name: 'foo', args: ['Works perfectly!'] }"></span>
</div> 
```

[http://jsfiddle.net/ostgals/GfBJ9/1/](http://jsfiddle.net/ostgals/GfBJ9/1/)

# php - 具有相同键的 2 个数组元素的总和

> ID：14942272
> 
> 赞同：5
> 
> 时间：2013-02-18T17:46:23.460
> 
> 标签：php, arrays, multidimensional-array, sum

嗨，我有 2 个数组，例如

```
 array(a) {  [0]=> array(2) { ["count"]=> string(2) "22" ["hour"]=> string(1) "0" }
             [1]=> array(2) { ["count"]=> string(2) "17" ["hour"]=> string(1) "1" } 
             [2]=> array(2) { ["count"]=> string(2) "22" ["hour"]=> string(1) "2" } 
             [3]=> array(2) { ["count"]=> string(2) "15" ["hour"]=> string(1) "3" } 
             [4]=> array(2) { ["count"]=> string(2) "15" ["hour"]=> string(1) "4" }
            } 
```

我有第二个具有不同（计数）值的数组

```
 array(b) {  [0]=> array(2) { ["count"]=> string(2) "12" ["hour"]=> string(1) "0" }
             [1]=> array(2) { ["count"]=> string(2) "36" ["hour"]=> string(1) "1" } 
             [2]=> array(2) { ["count"]=> string(2) "59" ["hour"]=> string(1) "2" } 
             [3]=> array(2) { ["count"]=> string(2) "5"  ["hour"]=> string(1) "3" } 
             [4]=> array(2) { ["count"]=> string(2) "27" ["hour"]=> string(1) "4" }
            } 
```

您能告诉我如何获得两个数组的 ["count"] 的总和并获得一个新数组，例如

```
 array(c) {  [0]=> array(2) { ["count"]=> string(2) "34" ["hour"]=> string(1) "0" }
             [1]=> array(2) { ["count"]=> string(2) "53" ["hour"]=> string(1) "1" } 
             [2]=> array(2) { ["count"]=> string(2) "81" ["hour"]=> string(1) "2" } 
             [3]=> array(2) { ["count"]=> string(2) "20"  ["hour"]=> string(1) "3" } 
             [4]=> array(2) { ["count"]=> string(2) "42" ["hour"]=> string(1) "4" }
            } 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T17:51:09.900

```
$result_array = array() ;

for ($i = 0, $length = count($a_array) ; $i < $length ; $i++){
  $result_array[$i] = $a_array[$i] ;
  $result_array[$i]["count"] += $b_array[$i]['count'] ;  
}

var_dump($result_array) ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T17:49:31.230

试试这个

```
$count1 = array_count_values($array1);

$count1 = array_count_values($array2);

$count = $count1 + $count2; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T17:51:04.537

```
$sum = array();
foreach($array1 as $k=>$v) {
  foreach($array2 as $k1=>$v1) {
    if($v['hour'] == $v1['hour']) {
      $sum[] = array('count'=> ($v['count'] == $v1['count']), 'hour' => $v['hour']);
    }
  }
} 
```

应该给你一个新的数组， $sum 以你指定的格式。我的假设是您的前 2 个数组称为 $array1 和 $array2。希望有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T17:51:54.863

```
//new array to hold answers
$array_results=array();

//loop through first array
foreach ($array_first as $key=>$v){

//use key of current element to get corresponding value from second array
//add them together and add into combined array
$array_results[]=$v['count']+$array_second[$key]['count'];

} 
```

# macos - vim 不显示颜色

> ID：14942277
> 
> 赞同：1
> 
> 时间：2013-02-18T17:46:38.100
> 
> 标签：macos, vim

我正在使用带有 xterm256-color 选项的 Mac OS 10.8.2 终端

当通过 vim 在本地机器上打开文件时，它工作正常。但是当我去服务器并在那里打开文件时它不起作用。所有文字都是白色的。

我检查了服务器上的 .vimrc 并且还设置了语法（语法打开）

有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T17:49:00.043

Vim 在你的服务器上使用他自己的 .vimrc。

**UPD**：一个实际的解决方案——[在这里](http://grasmash.com/article/osx-lion-terminal-unknown-terminal-xterm-256color)。

# python - 访问原始装饰函数以进行测试

> ID：14942282
> 
> 赞同：4
> 
> 时间：2013-02-18T17:47:03.327
> 
> 标签：python, testing, decorator, python-decorators, introspection

我在视图函数中使用装饰器（`@render_to`来自包）。`django_annoying`

但问题是我想获取视图函数返回的原始 dict 用于测试目的，而不是`HttpResponse`装饰器返回的对象。

装饰器使用`@wraps`(from `functools`)。

如果无法访问它，那么您是否知道如何测试它？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-18T17:59:57.200

包装的函数将作为函数闭包单元使用。哪个单元格完全取决于有多少闭包变量。

对于一个简单的包装器，其中唯一的闭包变量是要包装的函数，它将是第一个：

```
wrapped = decorated.func_closure[0].cell_contents 
```

但您可能必须检查所有`func_closure`值。

[`functools.wraps()`使用示例装饰器](http://docs.python.org/2/library/functools.html#functools.wraps)进行演示：

```
>>> from functools import wraps
>>> def my_decorator(f):
...     @wraps(f)
...     def wrapper(*args, **kwds):
...         print 'Calling decorated function'
...         return f(*args, **kwds)
...     return wrapper
... 
>>> @my_decorator
... def example():
...     """Docstring"""
...     print 'Called example function'
... 
>>> example
<function example at 0x107ddfaa0>
>>> example.func_closure
(<cell at 0x107de3d70: function object at 0x107dc3b18>,)
>>> example.func_closure[0].cell_contents
<function example at 0x107dc3b18>
>>> example()
Calling decorated function
Called example function
>>> example.func_closure[0].cell_contents()
Called example function 
```

不过，查看[源代码`@render_to`](https://github.com/skorokithakis/django-annoying/blob/master/annoying/decorators.py#L25)不必担心这一点；被包装的函数将被存储在第一个闭包槽中，保证。

如果这是 Python 3，则可以使用`__wrapped__`属性访问包装的函数：

```
>>> example.__wrapped__
<function example at 0x103329050> 
```

如果您可以访问装饰器代码本身，您也可以轻松地在 Python 2 代码中添加相同的引用：

```
def my_decorator(f):
    @wraps(f)
    def wrapper(*args, **kwds):
        # implementation

    wrapper.__wrapped__ = f
    return wrapper 
```

让内省变得容易一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-29T05:14:47.760

这是一个递归搜索在多个级别装饰的原始函数的代码。这背后的逻辑与@Martin提到的答案相同

```
def get_original_decorated_function(deco_func, org_func_name= None):
    if not deco_func.func_closure:
        if deco_func.__name__ == org_func_name:
            return deco_func
        else:
            return None
    for closure in deco_func.func_closure:
        func = closure.cell_contents
        if func.__name__ == org_func_name:
            # This is the original function name
            return func
        else:
            # Recursively call the intermediate function
            return get_original_decorated_function(func, org_func_name) 
```

# python - colorbar 查找颜色段的宽度

> ID：14942283
> 
> 赞同：1
> 
> 时间：2013-02-18T17:47:10.027
> 
> 标签：python, matplotlib, wxpython

我有一个颜色条，它有几个颜色块。我怎样才能找到每个颜色段的宽度，然后我可以在其他地方打印出来。我试过 mouseevent.ydata 等，但只输出你点击的地方。有没有办法可以得到色段的宽度？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:12:53.283

这是 matplotlib 站点中一个演示的修改示例，它还打印出绘制颜色条的路径。

使用`iPython`其方便的自动完成功能，您可以找出类的成员；

```
cb.[Press Tab]
cb.add_checker        cb.extend             cb.set_cmap
cb.add_lines          cb.filled             cb.set_colorbar
cb.alpha              cb.formatter          cb.set_label
cb.autoscale          cb.get_array          cb.set_norm
cb.autoscale_None     cb.get_clim           cb.set_ticklabels
cb.ax                 cb.get_cmap           cb.set_ticks
cb.boundaries         cb.lines              cb.solids
cb.callbacksSM        cb.locator            cb.spacing
cb.changed            cb.mappable           cb.to_rgba
cb.check_update       cb.norm               cb.update_bruteforce
cb.cmap               cb.orientation        cb.update_dict
cb.colorbar           cb.outline            cb.update_normal
cb.config_axis        cb.patch              cb.update_ticks
cb.dividers           cb.set_alpha          cb.values
cb.draw_all           cb.set_array          cb.vmax
cb.drawedges          cb.set_clim           cb.vmin 
```

所以我只是尝试了这些。`solids`似乎最有希望。

```
In [53]: print cb.solids
<matplotlib.collections.QuadMesh object at 0xb1a620c> 
```

然后我只是查看了[Quadmesh 的文档](http://matplotlib.org/api/collections_api.html?highlight=quadmesh#matplotlib.collections.QuadMesh)，发现了一些看起来很有希望的东西。

```
#!/usr/bin/env python
"""
Use a pcolor or imshow with a custom colormap to make a contour plot.

Since this example was initially written, a proper contour routine was
added to matplotlib - see contour_demo.py and
http://matplotlib.sf.net/matplotlib.pylab.html#-contour.
"""

from pylab import *

delta = 0.01
x = arange(-3.0, 3.0, delta)
y = arange(-3.0, 3.0, delta)
X,Y = meshgrid(x, y)
Z1 = bivariate_normal(X, Y, 1.0, 1.0, 0.0, 0.0)
Z2 = bivariate_normal(X, Y, 1.5, 0.5, 1, 1)
Z = Z2 - Z1 # difference of Gaussians

cmap = cm.get_cmap('PiYG', 11)    # 11 discrete colors

im = imshow(Z, cmap=cmap, interpolation='bilinear',
            vmax=abs(Z).max(), vmin=-abs(Z).max())
#axis('off')
cb = colorbar()

for path in cb.solids.get_paths():
    print path

show() 
```

![在此处输入图像描述](../Images/5d96be277a685a54bae32d1ca28ee4a7.png)

然后是终端输出：

```
Path([[ 0\.          0\.        ]
 [ 1\.          0\.        ]
 [ 1\.          0.09090909]
 [ 0\.          0.09090909]
 [ 0\.          0\.        ]], None)
Path([[ 0\.          0.09090909]
 [ 1\.          0.09090909]
 [ 1\.          0.18181818]
 [ 0\.          0.18181818]
 [ 0\.          0.09090909]], None)
Path([[ 0\.          0.18181818]
 [ 1\.          0.18181818]
 [ 1\.          0.27272727]
 [ 0\.          0.27272727]
 [ 0\.          0.18181818]], None)
Path([[ 0\.          0.27272727]
 [ 1\.          0.27272727]
 [ 1\.          0.36363636]
 [ 0\.          0.36363636]
 [ 0\.          0.27272727]], None)
Path([[ 0\.          0.36363636]
 [ 1\.          0.36363636]
 [ 1\.          0.45454545]
 [ 0\.          0.45454545]
 [ 0\.          0.36363636]], None)
Path([[ 0\.          0.45454545]
 [ 1\.          0.45454545]
 [ 1\.          0.54545455]
 [ 0\.          0.54545455]
 [ 0\.          0.45454545]], None)
Path([[ 0\.          0.54545455]
 [ 1\.          0.54545455]
 [ 1\.          0.63636364]
 [ 0\.          0.63636364]
 [ 0\.          0.54545455]], None)
Path([[ 0\.          0.63636364]
 [ 1\.          0.63636364]
 [ 1\.          0.72727273]
 [ 0\.          0.72727273]
 [ 0\.          0.63636364]], None)
Path([[ 0\.          0.72727273]
 [ 1\.          0.72727273]
 [ 1\.          0.81818182]
 [ 0\.          0.81818182]
 [ 0\.          0.72727273]], None)
Path([[ 0\.          0.81818182]
 [ 1\.          0.81818182]
 [ 1\.          0.90909091]
 [ 0\.          0.90909091]
 [ 0\.          0.81818182]], None)
Path([[ 0\.          0.90909091]
 [ 1\.          0.90909091]
 [ 1\.          1\.        ]
 [ 0\.          1\.        ]
 [ 0\.          0.90909091]], None) 
```

我不知道这些数字在什么坐标空间上。对不起。

# visual-studio-2010 - 如何删除此特定的链接器错误？

> ID：14942285
> 
> 赞同：0
> 
> 时间：2013-02-18T17:47:12.087
> 
> 标签：visual-studio-2010, opencv

```
 int match(int page,Mat img_frame){
Mat des_frame;
std::vector<KeyPoint> kp_frame;
std::vector<vector<DMatch > > matches;
detector.detect( img_frame, kp_frame );
extractor.compute(img_frame,kp_frame,des_frame);
std::vector<DMatch > good_matches;
if(page<0)
    return 0;
switch(pageNumber)
{
    case 0:
        matcher.knnMatch(des_page[0], des_frame, matches, 2);
        break;
    case 2:
        matcher.knnMatch(des_page[1], des_frame, matches, 2);
        //cout<<"matcigpage23";
        break;
    case 4:
        matcher.knnMatch(des_page[2], des_frame, matches, 2);
        break;
    case 6:
        matcher.knnMatch(des_page[3], des_frame, matches, 2);
        break;
    case 8:
        matcher.knnMatch(des_page[4], des_frame, matches, 2);
        break;
    case 10:
        matcher.knnMatch(des_page[5], des_frame, matches, 2);
        break;
    }
    for(int i = 0; i < min(des_frame.rows-1,(int) matches.size()); i++) //THIS LOOP IS SENSITIVE TO SEGFAULTS
    {
        if((matches[i][0].distance < 0.6*(matches[i][1].distance)) && ((int) matches[i].size()<=2 && (int) matches[i].size()>0))
        {
            good_matches.push_back(matches[i][0]);
        }
    }
    return good_matches.size();
} 
```

我的“.cpp”中有这样的功能。当我在 Visual Studio 2010 中编译它时，我收到如下链接器错误：

> 1>realtime.obj：错误 LNK2019：引用了未解析的外部符号“public：__thiscall cv::SIFT::SIFT(int,int,double,double,double)”(??0SIFT@cv@@QAE@HHNNN@Z)在函数“void _ *cdecl 'detector''(void) 的动态初始化程序”中 (??* _Edetector@@YAXXZ)
> 
> 1>realtime.obj：错误 LNK2019：未解析的外部符号“公共：__thiscall cv::flann::KDTreeIndexParams::KDTreeIndexParams(int)”(??0KDTreeIndexParams@flann@cv@@QAE@H@Z) 在函数中引用“ void _ *cdecl 'matcher'的动态初始化器'(void)" (??* _Ematcher@@YAXXZ)
> 
> 1>realtime.obj：错误 LNK2019：未解析的外部符号“公共：__thiscall cv::flann::SearchParams::SearchParams(int,float,bool)”(??0SearchParams@flann@cv@@QAE@HM_N@Z)在函数“void _ *cdecl 'matcher'(void) 的动态初始化程序”中引用 (??* _Ematcher@@YAXXZ)
> 
> 1>realtime.obj：错误 LNK2019：未解析的外部符号“public：__thiscall cv::flann::IndexParams::~IndexParams(void)”(??1IndexParams@flann@cv@@QAE@XZ) 在函数“public”中引用: void * __thiscall cv::flann::IndexParams::`标量删除析构函数'(unsigned int)" (??_GIndexParams@flann@cv@@QAEPAXI@Z)
> 
> 1>C:\Users\vinit\documents\visual studio 2010\Projects\mynewopencv\Debug\mynewopencv.exe : 致命错误 LNK1120: 4 unresolved externals

我是新的 Visual Studio，我将非常感谢一些帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T06:33:21.387

you need to link the library in the visual studio editor.

Please right click on **project** in the Solution Explorer and select **Properties** from the menu.

Under Configuration Properties -> Linker -> Input -> Additional Dependencies add the (.lib) such as-opencv_calib3d220d.lib opencv_contrib220d.lib opencv_core220d.lib opencv_features2d220d.lib

and then do Apply, I hope your problem will be solved.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T19:54:30.350

您正在使用`opencv`而不是链接其库（.lib 文件）。

**在解决方案资源管理器**中右键单击您的项目，然后从上下文菜单中选择**属性。**

在**Configuration Properties > Linker > Input**下，将 .lib 文件添加`opencv`到**Additional Dependencies**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-24T12:29:56.370

对于 Flann Matcher，您需要链接：opencv_flannXXXd.lib

# twitter-bootstrap - Twitter Bootstrap 的响应式 CSS 适用于调整大小的窗口，但不适用于移动设备

> ID：14942287
> 
> 赞同：5
> 
> 时间：2013-02-18T17:47:18.703
> 
> 标签：twitter-bootstrap

我使用 Twitter Bootstrap 框架来构建我的最新网站。我曾经`boostrap.responsive.css`让它在移动设备上工作。但事实并非如此。似乎它根本看不到 CSS。当我在我的 Android 手机上运行它时，它就像我的 PC 一样显示我的网站。但是当我在 PC 上调整浏览器窗口的大小时，效果很好。可能是什么问题？我没有弄乱引导程序的CSS。

当我运行`alert($(window).width());`时，它返回 980。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-18T18:59:18.350

[确保按照 Bootstrap 的响应文档](http://twitter.github.com/bootstrap/scaffolding.html#responsive)中的说明包含元视口元素，以便布局将缩放到设备宽度。

```
<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-22T04:56:58.890

您必须按照样式表的顺序在 bootstrap.css 之后调用 bootstrap-responsive.css。

即 bootstrap.css bootstrap-responsive.css

# ios - 以编程方式在 View Controller 中设置 UITableView

> ID：14942289
> 
> 赞同：0
> 
> 时间：2013-02-18T17:47:30.683
> 
> 标签：ios, uitableview, ios5, uiview, uiviewcontroller

我在我的视图控制器中设置了一个 UITableView 控制器，如下所示：

```
fieldView = [[UITableView alloc] initWithFrame:CGRectMake(0, logoView.bounds.size.height, 320, (screen.size.height - logoView.bounds.size.height)) style:UITableViewStylePlain];
[fieldView setBackgroundColor:[UIColor greenColor]];
fieldView.autoresizingMask = UIViewAutoresizingFlexibleWidth|UIViewAutoresizingFlexibleTopMargin; 
```

视图控制器设置为 TableViewDelegate，如下所示：

```
 UIViewController <UITableViewDelegate, UITableViewDataSource... 
```

问题：我需要对表视图委托方法做什么才能控制这个添加的子视图？

```
#pragma mark - 
#pragma Table View Delegate Methods
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    NSLog(@"Here");
    return 1;
}
- (NSString *)tableView:(UITableView *)fieldView titleForHeaderInSection:(NSInteger)section {
    NSString *sectionName;
    NSLog(@"Here2"); 
```

上述方法在视图控制器中但没有被调用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T17:58:34.670

你需要：

```
// Add these right after creating the UITableView
fieldView.delegate = self;
fieldView.dataSource = self;

// don't forget to add the tableview
[self.view addSubview:fieldView]; 
```

您还需要所有基本`UITableViewDelegate`和`UITableViewDataSource`方法。这与您实现了一个`UITableViewController`. 您至少需要：

```
tableView:numberOfRowsInSection:
tableView:cellForRowAtIndexPath: 
```

如果您计划支持表格编辑，则必须实现和覆盖其他方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T17:59:06.760

您需要为表格视图设置委托和数据源。

```
fieldView.delegate = controller; // self, if you are creating this table inside your controller 
```

# c# - 任务完成后更改光标

> ID：14942295
> 
> 赞同：-1
> 
> 时间：2013-02-18T17:47:55.410
> 
> 标签：c#, .net, wpf, user-interface, cursor

我正在尝试将鼠标光标更改为`Wait`任务开始之前和`Arrow`完成时。但是，光标似乎立即从一个变为另一个。这是我的代码：

```
this.Cursor = Cursors.Wait;
dtResults.WriteXml(saveFileDialog.FileName);
this.Cursor = Cursors.Arrow;
MessageBox.Show("Exporting Complete!", "Complete!", MessageBoxButton.OK, MessageBoxImage.Information); 
```

关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T17:55:09.700

您正在同步执行任务。因此，就用户所见而言，消息泵永远不会真正获得等待光标调用。

要解决此问题，您应该异步执行此操作。由于您使用的是 .NET 4.0，因此您可以使用[任务并行库：](http://msdn.microsoft.com/en-us/library/dd460717.aspx)

```
this.Cursor = Cursors.Wait
//Avoid any closure problems
string fileName = saveFileDialog.FileName
//Start the task of writing the xml (It will run on the next availabled thread)
var writeXmlTask = Task.Factory.StartNew(()=>dtResults.WriteXml(fileName));
//Use the created task to attach what the action will be whenever the task returns.
//Making sure to use the current UI thread to perform the processing
writeXmlTask.ContinueWith(
    (previousTask)=>{this.Cursor = Cursors.Arrow;MessageBox.Show....}, TaskScheduler.FromCurrentSynchronizationContext()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T17:56:27.790

我的猜测是所有这些都发生在 UI 线程上。因为`DataTable.WriteXml`是同步完成的，所以它会阻塞 UI 并且不会进行任何更新。这就是为什么光标永远不会显示为等待光标的原因。

要允许 UI 更新并显示等待光标，您需要将调用移至`dtResults.WriteXml`后台线程。我建议使用[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)

# sql - 特定距离内的点

> ID：14942297
> 
> 赞同：2
> 
> 时间：2013-02-18T17:48:04.083
> 
> 标签：sql, postgresql, geospatial, postgis, spatial-query

我有一张包含一组点的表格。我想做一个查询来检查点之间的距离，如果距离小于公差，它会将点设置为一个。

有什么建议我可以完成这样的任务吗？

以下是我所拥有的图形问题。现在我希望只有一个点存在于三条不同的道路交汇处

![在此处输入图像描述](../Images/b204fab3b9f633f196ef79b3ef5698ae.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:50:52.423

这是一个棘手的问题，有不止一种方法可以解决它。

一种明显的策略是尝试使用[ST_SnapToGrid](http://postgis.refractions.net/documentation/manual-2.0/ST_SnapToGrid.html)找到捕捉到虚拟网格的独特点。这种技术最适用于投影单位（例如，具有 UTM 的米），但不适用于具有可变物理距离的地理坐标（具有纬度/经度）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T20:23:21.580

如果我没听错的话：

1)阅读[ST_Distance](http://postgis.net/docs/manual-dev/ST_Distance.html)

2）编写您自己的函数，它将使用 ST_Distance 并且可能使用其中一种[算法](http://en.wikipedia.org/wiki/Closest_pair_of_points_problem)（为您的任务稍微简化）

# java - Java 中两个 Int 数组的并集

> ID：14942298
> 
> 赞同：-3
> 
> 时间：2013-02-18T17:48:07.610
> 
> 标签：java, arrays, exception, union

这是我的代码

```
 import java.util.Arrays;
class union {
    public static void main(String args[]) {

int[] A = new int[1000];
int[] B = new int[1000];
int[] C = new int[2000];    
    for (int i= 3;i < 1000 ; i += 3) {
        A[i/3] = i; 
    }
    for (int j=5; j < 1000; j += 5) {
        B[j/5] = j;
    }

    C = unionArrays(A, B);

    }
} 
```

我在编译时收到以下错误

```
Exception in thread "main" java.lang.Error: Unresolved compilation problem: 
    The method unionArrays(int[], int[]) is undefined for the type union

    at union.main(union.java:15) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T18:10:54.143

在这种情况下，您可能希望使用 HashSet 而不是这样的数组：

```
import java.util.HashSet;
public class ProjectEulerOne{
 public static void main(String[] args){
 HashSet<Integer> SetA= new HashSet<Integer>();
  for(int i = 3; i<1000; i+=3){
     SetA.add(new Integer(i));
  }
  for(int i = 3; i<1000; i+=3){
     SetA.add(new Integer(i));
  }
  int total =0;
  Iterator<Integer> iter = numSet.iterator();
  Integer current;
  while(iter.hasnext()){
   current = iter.next();
   total += current.intValue();
  }
 }
} 
```

这是[HashSet javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/HashSet.html)，我完成了这个，因为“迭代器很奇怪”，但祝你项目 Euler 的其余部分好运。

如果你想用我推荐的数学方法来做，我建议使用支持列表数学的 APL / J / K。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T17:53:34.957

`unionArrays(int[], int[])`在你的课堂上定义。在此处查看类似[的 SO 帖子](https://stackoverflow.com/questions/5818057/union-of-2-arrays-in-java)。

# ios - 关闭模态呈现的 ViewController 后 UITableViewCell 不反映更改

> ID：14942300
> 
> 赞同：2
> 
> 时间：2013-02-18T17:48:15.443
> 
> 标签：ios, uitableview, core-data, nsfetchedresultscontroller, segue

我有一个带有 TableView 的 UIViewController 用于显示“清单”项目。这个 ViewController 还有一个按钮，可以触发 segue 以模态方式呈现另一个 UIViewController，供用户添加新的清单项。

所有清单项目都存储在 CoreData 中。

新的 CoreData 实体由`SecondViewController`. 用户可以`checklist`在点击触发解除`SecondViewController`. 在这里，由于这`SecondViewController`是模态呈现的，我假设它的活动与 根本没有任何关系`FirstUIViewController`。

在`FirstViewController`包含的 中`UITableView`，有一个`NSFetchedResultsController`再次在 CoreData 执行获取请求并将所有数据提供给`UITableView`. NSFetchedResultsController 的委托也指向 this `FirstUIViewController`。

问题是，在解除 后`SecondViewController`，`UITableView`似乎注意到新清单实体的插入，并`UITableCell`在 UITableView 中插入了新实体。然而，奇怪的是，这个新插入的行没有显示正确的`cell.textlabel`. `UITableViewCell`仅显示标签上没有任何内容的空白。

下面是我如何配置`UITableViewCell`.

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"ChecklistCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];
    [self configureCell:cell atIndexPath:indexPath];
    return cell;
}

- (void)configureCell:(UITableViewCell *)cell atIndexPath:(NSIndexPath *)indexPath
{
    ChecklistItem *item = [self.fetch_controller objectAtIndexPath:indexPath];
    cell.textLabel.text = item.name;    
} 
```

这是我为 NSFetchedResultsControllerDelegate 提供的

```
- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject atIndexPath:(NSIndexPath *)indexPath forChangeType:(NSFetchedResultsChangeType)type newIndexPath:(NSIndexPath *)newIndexPath
{
    switch (type) {
        case NSFetchedResultsChangeInsert:
            NSLog(@"*** controllerDidChangeObject - NSFetchedResultsChangeInsert");
            [self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;
    }
} 
```

强迫`[self.tableView reloadData]`似乎有帮助。我知道这一点是因为我添加了一个按钮来调用此方法，并且单元格的标签相应地被刷新和更新。

因此，我尝试了这个，因为我希望它会在解雇后被调用`SecondViewController`。但是，该方法被调用，因为已`Reload Data!`记录，但不知何故 tableView 仍然没有正确显示新添加的单元格的标签。

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    [self performFetch];
    [self.tableView reloadData];
    NSLog(@"Reload Data!");
} 
```

我想知道这里可能有什么问题。不知何故，`self.tableView`在解雇`SecondViewController`. 有什么建议么？

##已编辑

OK，更奇怪的是我`[self.tableView reloadData]`在里面试过`- (void)viewDidAppear:(BOOL)animated`。新的 tableViewCell 仍然不能正确显示它的标签；然而，在等待 30 秒后，标签就神奇地弹出了！这是否意味着我的 iPhone/iPhone 模拟器需要时间思考？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T18:38:30.563

**解释**

您的核心数据保存需要时间。如果您正在保存数据，然后立即关闭模态视图控制器，则该`performFetch`函数存在竞争条件。这就是为什么您看到它在`viewWillAppear`函数中不起作用，但在您按下按钮时它起作用。它有时会在 viewDidAppear 中工作，但不能保证。这取决于您是否使用模拟器，以及系统的繁忙程度。

**具体建议**

由于您是从核心数据中提取数据，我建议您使用`NSFetchedResultsController`并实现`NSFetchedResultsControllerDelegate`. 这些是专门为将 coreData 绑定到 UITableViewController 而设计的。它侦听更改并根据这些更改立即添加、删除或更新行。

**更新代码**

要正确实施`NSFetchedResultsControllerDelegate`，您只需从该网站复制代码：http: [//developer.apple.com/library/ios/#documentation/CoreData/Reference/NSFetchedResultsControllerDelegate_Protocol/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/CoreData/Reference/NSFetchedResultsControllerDelegate_Protocol/Reference/Reference.html)

一些提示：

1.  您需要对实施方式稍作更改`cellForRowAtIndexPath`。创建一个名为`configureCell`. 这是一个很旧的模式，因此您可以在 Apple 和其他地方的许多示例代码中找到它。
2.  从上面网站的“典型用途”部分复制代码。您不需要实施“用户驱动的更新”。一定要设置

    `self.fetchedResultsController.delegate = self;`

3.  如果你想检查这段代码是否正常工作，你可以将 breakPoints 或 NSLogs 放入`controllerWillChangeContent`or`controller:didChangeObject`中。

4.  在第一次之后，您无需再次调用 performFetch。此代码适当地侦听更改和更新。
5.  正如我一直建议大家——我喜欢 MagicalRecord——所以使用它。

**配置单元**

下面的 configureCell:atIndexPath 方法由 NSFetchedResultsController 委托调用。

```
- (void)configureCell:(UITableViewCell *)cell atIndexPath:(NSIndexPath *)indexPath {
    Product *product = [_fetchedResultsController objectAtIndexPath:indexPath];
    cell.textLabel.text = product.name;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Product Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }

    [self configureCell:cell atIndexPath:indexPath];

    return cell;
} 
```

请参阅此处的委托实现代码。查看对象更新时如何调用 configureCell。

```
- (void)controllerWillChangeContent:(NSFetchedResultsController *)controller {
    [self.tableView beginUpdates];
}

- (void)controller:(NSFetchedResultsController *)controller didChangeSection:(id <NSFetchedResultsSectionInfo>)sectionInfo
           atIndex:(NSUInteger)sectionIndex forChangeType:(NSFetchedResultsChangeType)type {

    switch(type) {
        case NSFetchedResultsChangeInsert:
            [self.tableView insertSections:[NSIndexSet indexSetWithIndex:sectionIndex]
                          withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeDelete:
            [self.tableView deleteSections:[NSIndexSet indexSetWithIndex:sectionIndex]
                          withRowAnimation:UITableViewRowAnimationFade];
            break;
    }
}

- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject
       atIndexPath:(NSIndexPath *)indexPath forChangeType:(NSFetchedResultsChangeType)type
      newIndexPath:(NSIndexPath *)newIndexPath {

    UITableView *tableView = self.tableView;

    switch(type) {

        case NSFetchedResultsChangeInsert:
            [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath]
                             withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeDelete:
            [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]
                             withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeUpdate:
            [self configureCell:[tableView cellForRowAtIndexPath:indexPath]
                    atIndexPath:indexPath];
            break;

        case NSFetchedResultsChangeMove:
            [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]
                             withRowAnimation:UITableViewRowAnimationFade];
            [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath]
                             withRowAnimation:UITableViewRowAnimationFade];
            break;
    }
}

- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller {
    [self.tableView endUpdates];
} 
```

# javascript - 对象没有方法 eq 或 find

> ID：14942301
> 
> 赞同：0
> 
> 时间：2013-02-18T17:48:15.963
> 
> 标签：javascript, jquery, jquery-ui-sortable

我有一些元素在文档中被声明为可排序的。稍后在一个函数中，我使用 toArray 将它们放入一个数组中。我想要做的是遍历这个数组并获取其中包含我正在寻找的特定元素的那些。我遍历数组并使用了.find，但它说元素myarray [index]没有方法find，所以我尝试了myarray.eq(index).find，然后它说他们没有方法eq。对此的任何帮助将不胜感激。我的代码如下。

```
 var imageBlocks = $(".imageBlocks").sortable("toArray");
  images = Array();

  for(i = 0; i < imageBlocks.length ; i++)
  {
    image = imageBlocks.eq(i).find(".post_image");
    if(image.length > 0){
      images.push(image); 
    }

  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T18:10:37.857

看起来 toArrray() 只是返回一个与对象的 id 对应的字符串数组，而不是我拥有的对象本身的数组。我通过将代码更改为：

```
 var imageBlocks = $(".imageBlocks").sortable("toArray");
  images = Array();

  for(i = 0; i < imageBlocks.length ; i++)
  {
    imageID = $("#"+imageBlocks[i]);
    image = imageID.find(".post_image");

    if(image.length > 0){
      images.push(image);
    }    
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T17:49:39.970

尝试这个：

```
image = imageBlocks[i].find(".post_image"); 
```

和正确的`$imageBlocks / imageBlocks`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T17:50:06.610

**图像块 === $图像块**

```
this should work:

var imageBlocks = $(".imageBlocks").sortable("toArray");
  images = Array();

  for(i = 0; i < imageBlocks.length ; i++)
  {
    image = imageBlocks.eq(i).find(".post_image");
    if(image.length > 0){
      images.push(image); 
    }

  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T18:56:18.487

看着你有限的范围，我不明白为什么这不起作用：

```
var myimages = imageBlocks.filter(function(){
     return $(this).find('.post_Image').length >0;
});
var myArray = myimages.toArray(); 
```

编辑：链式：

```
var myArray = imageBlocks.filter(function(){
     return $(this).find('.post_Image').length > 0;
}).toArray(); 
```

我在这里错过了什么吗？

编辑：为了清楚起见，请使用您的示例；我上面的代码，在实际使用中展开：

```
$(".imageBlocks").filter(function(){
     return $(this).find('.post_Image').length > 0;
}).toArray(); 
```

我把上面的小提琴和一些标记放在一起，这样你就可以看到它完全被暗示了：http: [//jsfiddle.net/kDNuc/](http://jsfiddle.net/kDNuc/)

# java - Spring 的 JavaConfig 和 CustomScopeConfigurer 问题

> ID：14942304
> 
> 赞同：11
> 
> 时间：2013-02-18T17:48:21.743
> 
> 标签：java, spring

我看到了一些奇怪的行为，我希望这里有人可以对这个问题有所了解。

让我从描述我的设置开始。一、简单的数据对象

```
public class Apple {
    private String name;
    public Apple withName(String name) {
        this.name = name;
        return this;
    }
    public String getName() {
        return name;
    }
} 
```

还有一个测试班。。

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(classes={TestConfig.class})
public class AppleTest {
    @Autowired private Apple apples;

    @Test
    public void simpleTest() {
        System.out.println("OBJ: "+apples);
    }
} 
```

配置如下

```
@Configuration
public interface ConfigInterface {
    public Apple getApple();
} 
```

有一个实现类

```
@Configuration
@Import(AbstractTestConfig.class)
public class TestConfig implements ConfigInterface {
    public Apple getApple() {
        return new Apple().withName("Granny apples");
    }
} 
```

随着配置依赖...

```
@Configuration
public class AbstractTestConfig {
    @Autowired ConfigInterface conf;

    @Bean Apple myTestApple() {
        return conf.getApple();
    }
} 
```

所有这一切都很好。我运行测试，我看到了我期望的输出。但随后我将扳手扔进方向盘并修改 AbstractTestConfig 如下所示。

```
@Configuration
public class AbstractTestConfig {
    @Autowired ConfigInterface conf;

    @Bean Apple myTestApple() {
        return conf.getApple();
    }

    // NEW CODE
    @Bean CustomScopeConfigurer scopeConfigurer() {
        return new CustomScopeConfigurer();
    }
} 
```

突然间，当需要构造bean时，该`@Autowired`对象为空。`conf``Apple`

更奇怪的是，如果我将`CustomScopeConfigurer`bean 移到`TestConfig`课堂上，那么它就可以工作。

`CustomScopeConfigurer`关于范围或对象，我有什么不知道的吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-18T18:37:38.727

从 Spring @Bean [javadoc](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/)复制：

> BeanFactoryPostProcessor-返回@Bean 方法
> 
> 必须特别考虑返回 Spring BeanFactoryPostProcessor (BFPP) 类型的 @Bean 方法。因为 BFPP 对象必须在容器生命周期的早期实例化，它们可能会干扰 @Configuration 类中的 @Autowired、@Value 和 @PostConstruct 等注解的处理。为避免这些生命周期问题，请将返回 BFPP 的 @Bean 方法标记为静态。例如：

```
@Bean
 public static PropertyPlaceholderConfigurer ppc() {
     // instantiate, configure and return ppc ...
 } 
```

> 通过将此方法标记为静态，可以在不导致其声明的@Configuration 类的实例化的情况下调用它，从而避免上述生命周期冲突。但是请注意，如上所述，静态@Bean 方法不会针对作用域和 AOP 语义进行增强。这适用于 BFPP 情况，因为它们通常不会被其他 @Bean 方法引用。提醒一下，对于任何具有可分配给 BeanFactoryPostProcessor 的返回类型的非静态 @Bean 方法，都会发出 WARN 级别的日志消息。

# android - 将当前活动设置为启动活动

> ID：14942306
> 
> 赞同：0
> 
> 时间：2013-02-18T17:48:30.397
> 
> 标签：android, android-activity, android-lifecycle

我的应用程序在不同的活动之间切换，每个活动在切换到另一个活动后被杀死。这工作得很好，但我想做的是，当用户杀死应用程序（通过按返回键或以其他方式）时，它的最后一次运行活动是下次启动应用程序时。

我试过了 ...

```
onSaveInstanceState(Bundle bundle) 
```

...但这似乎不适用于其他活动。

还有另一种方法吗？我也考虑过直接编辑清单，但得出的结论是它可能不起作用并且会很脏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T18:07:48.633

据我了解，例如，您有 3 个活动`ActivityA`：`ActivityB`和`ActivityC`。如果用户通过 退出应用程序`ActivityB`，然后再次启动应用程序，则您`ActivityB`要先启动。

您可以通过两种方式做到这一点。

**首先**，您可以拥有一个`Activity`带有占位符的单曲，其中包含 3 个[片段](http://developer.android.com/guide/components/fragments.html)之一。然后您可以根据需要替换片段。

**其次**，您可以将上次打开的活动存储在首选项中，使用[`SharedPreferences`](http://developer.android.com/reference/android/preference/PreferenceManager.html). 您可以在您拥有`onStart()`的每个活动中执行此操作`ActivityX`，并在确定要开始哪个活动时阅读它。

```
SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);

// save:
Editor edit = prefs.edit();
edit.putString("lastActivity", getClass().getName());
edit.commit();

// restore later:
String activityName = prefs.getString("lastActivity", YourActivityA.getClass().getName()); 
```

// if (activityName == null) activityName = YourActivityA.getClass().getName(); /// 根据需要启动该活动

# javascript - 更改下拉菜单中的选定选项，从而导致 onchange 事件；javascript

> ID：14942307
> 
> 赞同：0
> 
> 时间：2013-02-18T17:48:34.917
> 
> 标签：javascript, html, html-select

好吧，我花了很长时间摆弄这个，但进展甚微。但是，我已经看到了很多解决方案，将它们实施到我的情况中不起作用，我真的不知道为什么。

我试图让一些图像在单击时更改下拉菜单的选定值，从而导致下拉菜单上的 onchange 事件发生。

```
<script type="text/javascript">
 function parse_theme(input){
    var index = document.getElementById('themes').length; /* this bit is working fine */
    for(var i=0;i<=index;i++;){
       if(document.getElementById('themes').options[i].value == input){ /*error is here */
          document.getElementById('themes').selectedIndex = i;
       }
    }
}
</script> 
```

和html：

```
<select id="themes" style="display:none;" onchange="selectTheme()">
  <option value="default" selected="selected">default</option>
  <option value="ambiance">ambiance</option>
  <option value="cobalt">cobalt</option>
</select>

<img id="default" onclick="parse_theme(this.id)" src="images/default.png" width="10" height="10">
<img id="ambiance" onclick="parse_theme(this.id)" src="images/ambiance.png" width="10" height="10">
<img id="cobalt" onclick="parse_theme(this.id)" src="images/cobalt.png" width="10" height="10"> 
```

我收到“未捕获的类型错误：无法读取未定义的属性‘值’。

onchange 函数工作正常，但是当我只有下拉菜单时，我希望它通过一系列图像来完成，并让图像引用列表中的选项并使列表不可见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T18:00:25.477

将其更改为

```
for(var i=0;i<index;i++;){ 
```

您可能在循环的最后一个索引上失败，因为索引值为 3，您将循环 0、1、2、3 而不是仅 3 次

# ios - 格式字符串未使用数据参数

> ID：14942308
> 
> 赞同：3
> 
> 时间：2013-02-18T17:48:38.753
> 
> 标签：ios, objective-c, c, xcode

在 lynda 的目标视频之后，我介绍了一个小问题，

```
#import <Foundation/Foundation.h>
#import "Player.h"

int main(int argc, const char * argv[])
{

@autoreleasepool {

    Player *p = [[Player alloc] init];
    NSLog(@"The score is @i", [p score]); <-- Data argument not used by format string

}
return 0;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-18T17:50:38.390

您没有有效的格式字符串。你想要`%i`，没有`@i`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-18T17:50:45.993

利用`NSLog(@"The score is %i", [p score]);`

`score`返回整数所以`%i`或`%d`不应该使用`@i`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-18T17:54:03.510

如果 [p score] 返回的值是一个整数，那么它应该是
NSLog(@"The score is **%i** ", [p score]); // 总是使用 '%' 作为格式说明符而不是 '@'

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-18T17:54:43.533

格式字符串应该使用`%i`而不是`@i`：

```
NSLog(@"The score is %i", [p score]); 
```

# javascript - JavaScript "this.variable" 在一个实例中返回未定义，但在另一个实例中不返回

> ID：14942313
> 
> 赞同：0
> 
> 时间：2013-02-18T17:48:52.933
> 
> 标签：javascript, object, undefined

我正在用 JavaScript 构建一个滑块/推子。我通过这样声明一个对象，以一种我以前从未真正使用过它的方式使用 JavaScript：

```
var Object
{
    // Statements & functions.
} 
```

我在`testing`从对象内部的函数 ( `change_slide()`) 中检索对象内部变量 () 的值时遇到问题。我有这个代码：

```
var Fader = 
{
    // Fader properties.
    speed: 1,                                   // The time each interval will take.
    fade: 0.1,                                  // How much to change the slides opacity with each interval.
    divs: ["fade_1", "fade_2", "fade_3"],       // Array.
    callbacks: [],                              // Array.
    testing: 0123456798,

    // Initialise fader.
    initialise: function()
    {
        // Randomise the starting slide.
        this.start_div = Math.floor((Math.random() * this.divs.length) + 1);

        // Add pips and initialise display (block or none) for the slides.
        for(var i = 0; i < this.divs.length; i++)
        {
            /*
            *       Create pips.
            */
            var new_pip = document.createElement("div");

            new_pip.className = "item";
            new_pip.id        = "pip_" + (1 + i);
            document.getElementById("pips").appendChild(new_pip);

            /*
            *       Get current div number.
            */
            var extract_div_number = this.divs[i].replace("fade_", "");

            if(extract_div_number == this.start_div)
            {
                //this.current_slide = extract_div_number;

                document.getElementById("fade_" + extract_div_number).style.display = "block";
            }
            else
            {
                document.getElementById("fade_" + extract_div_number).style.display = "none";
            }
        }

        this.pip_controller();
    },

    pip_controller: function()
    {
        for(var i = 0; i < this.divs.length; i++)
        {
            this.callbacks[i] = this.add_event("pip_" + (1 + i));
        }
    },

    add_event: function(item)
    {
        if(window.addEventListener)
        {
            return document.getElementById(item).addEventListener("click", this.change_slide, false);
        }
        else
        {
            return document.getElementById(item).attachEvent("onclick", this.change_slide);
        }
    },

    change_slide: function()
    {
        // Always returns "undefined" despite 'testing' being defined previously.
        console.log(this.testing);
    },
}

Fader.initialise();

// This works:
// Fader.change_slide(); 
```

这是我的 HTML：

```
<div id="main_slide">

    <div id="fade_1"><h1>Slide 1</h1></div>
    <div id="fade_2"><h1>Slide 2</h1></div>
    <div id="fade_3"><h1>Slide 3</h1></div>

    <div id="pips"></div>

</div> 
```

为了记录，“点”是滑块底部的那些小圆圈，您可以单击以更改幻灯片。

那么，谁能告诉我为什么`testing`返回`undefined`，以及如何让我当前的代码检索 的实际值`testing`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T17:51:08.203

`addEventListener`调用你给它的函数`this`指向 DOM 元素，而不是你的类的实例，所以这条线（和其他类似的）是问题：

```
return document.getElementById(item).addEventListener("click", this.change_slide, false); 
```

有几种方法可以解决这个问题，例如：

```
initialize: function() {
    var self = this;

    // ...

    return document.getElementById(item).addEventListener("click", function(e) {
        return self.change_slide(e);
    }, false);

    // ...
}, 
```

或者在启用 ES5 的环境中（或者如果您加载了 ES5 垫片，因为这是可垫片的），您可以使用新的[`Function#bind`](http://www.ecma-international.org/ecma-262/5.1/#sec-15.3.4.5)：

```
return document.getElementById(item).addEventListener("click", this.change_slide.bind(this), false); 
```

更多（在我的博客上）：

*   [*神话方法*](http://blog.niftysnippets.org/2008/03/mythical-methods.html)
*   [*你必须记住`this`*](http://blog.niftysnippets.org/2008/04/you-must-remember-this.html)

# wpf - 当 WPF 文本框是多行时，如何显示文本对齐到顶部

> ID：14942314
> 
> 赞同：5
> 
> 时间：2013-02-18T17:48:52.620
> 
> 标签：wpf, wpf-controls

当我使用多行文本框时，文本框的文本/内容应该对齐到顶部，如果它是单行文本框，那么它的文本对齐方式应该是默认的（中心），我需要在文本框样式中设置它，所以当有一个多行文本框时，我的样式会自动相应地调整内容。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-07-30T14:53:11.820

你只需要`VerticalContentAlignment="Top"`在你的文本框中设置，如：

```
<TextBox     
    TextWrapping="Wrap" 
    AcceptsReturn="True" 
    Text="sample ... "
    VerticalContentAlignment="Top"                                
/> 
```

# sql - SQLCMD 错误 SQL Native Client 未正确安装

> ID：14942318
> 
> 赞同：2
> 
> 时间：2013-02-18T17:49:13.990
> 
> 标签：sql, database-backups, sqlcmd

我正在尝试备份我的 sql 数据库。我已将以下命令添加到批处理文件中。双击我收到的批处理文件时：

sqlcmd：错误：连接失败。SQL Native Client 未正确安装。要更正此问题，请运行 SQL 服务器安装程序。

我已经运行了 SQL 服务器设置，卸载并重新安装了 SQL Native Client。我不确定我的下一个选择是什么，并希望社区能够为我指明正确的方向。

```
 "C:\Program Files\Microsoft SQL Server\100\Tools\Binn\SQLCMD.EXE" -S .\TAMV9 -q"BACKUP
 DATABASE 'C:\sqlbackup\tambackup.sql'" 
```

# inheritance - JPA 2映射继承类型JOINED还是SINGLE？

> ID：14942321
> 
> 赞同：0
> 
> 时间：2013-02-18T17:49:36.090
> 
> 标签：inheritance, annotations, jpa-2.0, discriminator

我有一个测试用例，它有三个表/类（Language、Caption 和 CaptionLanguage）。

语言表存储语言数据。
Caption 表存储字幕索引数据。
CaptionLanguage 表存储每种语言的字幕数据。

![MER](../Images/907f7b878b9d1b6ada18bbcb35ab79d8.png)

我可以使用哪种继承类型来解决问题？

如果我使用“@Inheritance(strategy=InheritanceType.JOINED)”设置“@DiscriminatorColumn(name="ID_LANG",discriminatorType=DiscriminatorType.Integer) ”，会起作用吗？
不使用 @DiscriminatorValue(value="Value")

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:40:58.253

这看起来不像可以通过继承解决的问题。尽管有名称，但`CaptionLanguage`不是的子类型`Language`- 它也不是 的子类型`Caption`。

相反，它看起来像三个具有以下特征的实体：

*   一对多从`Language`到`CaptionLanguage`（和/或多对一逆）
*   一对多从`Caption`到`CaptionLanguage`（和/或可能是多对一逆）
*   多对一从`Caption`父`Caption`（和/或一对多逆）
*   `CaptionLanguage`确实有复合主键，所以应该 使用[@IdClass](http://docs.oracle.com/javaee/6/api/javax/persistence/IdClass.html)[或 @EmbeddedId 。](http://docs.oracle.com/javaee/6/api/javax/persistence/EmbeddedId.html)

# java - 如何避免库 jar 中的资源冲突？

> ID：14942323
> 
> 赞同：9
> 
> 时间：2013-02-18T17:49:40.423
> 
> 标签：java, maven, packages, dependency-management

我担心库`Foo`和`Bar`每个库都在类路径上以相同名称公开资源的情况，例如`properties.txt`在这个例子中。

假设一个 Maven 设置并`jars`使用 Maven 部署，如果我有这个设置：

图书馆福：

```
$ cat Foo/src/main/resources/properties.txt
$ Foo 
```

和图书馆酒吧：

```
$ cat Bar/src/main/resources/properties.txt
$ Bar 
```

并且`App`依赖于它们，它`pom`看起来像这样 - 简而言之，这只是说“构建一个带有依赖关系的 jar，并依赖于`Foo`and `Bar`：

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-assembly-plugin</artifactId>
  <executions>
    <execution>
      <id>bundle-project-sources</id>
      <phase>package</phase>
      <goals>
        <goal>single</goal>
      </goals>
      <configuration>
        <archive>
          <manifest>
            <mainClass>me.unroll.deptest.App</mainClass>
            <addDefaultImplementationEntries>true</addDefaultImplementationEntries>
          </manifest>
          <manifestEntries>
            <Implementation-Build>${buildNumber}</Implementation-Build>
          </manifestEntries>
        </archive>
        <descriptorRefs>
          <descriptorRef>jar-with-dependencies</descriptorRef>
        </descriptorRefs>
      </configuration>
    </execution>
  </executions>
</plugin> 
```

问题是文件似乎真的`properties.txt`被破坏了。让我们尝试一下`jar tf`：

```
unrollme-dev-dan:target Dan$ jar tf App-1.0-SNAPSHOT-jar-with-dependencies.jar 
META-INF/
META-INF/MANIFEST.MF
properties.txt
META-INF/maven/
META-INF/maven/me.unroll.deptest/
META-INF/maven/me.unroll.deptest/Bar/
META-INF/maven/me.unroll.deptest/Bar/pom.xml
META-INF/maven/me.unroll.deptest/Bar/pom.properties
META-INF/maven/me.unroll.deptest/Foo/
META-INF/maven/me.unroll.deptest/Foo/pom.xml
META-INF/maven/me.unroll.deptest/Foo/pom.properties
me/
me/unroll/
me/unroll/deptest/
me/unroll/deptest/App.class 
```

所以我跑了一`main`堂课`App`：

```
try (InputStream is = App.class.getClassLoader().getResourceAsStream("properties.txt")) {

    java.util.Scanner s = new java.util.Scanner(is);
        System.out.println("Scanner: " + s.next());

} 
```

输出是：

```
unrollme-dev-dan:target Dan$ java -jar App-1.0-SNAPSHOT-jar-with-dependencies.jar 
Scanner: Bar 
```

哎呀，巴尔赢了。`mvn package`-ing时没有警告或错误`App`。运行时没有警告或错误，可能选择了错误的文件，实际上它默默地失败了。

所以我想要求适当的练习来避免这种情况。一，这样的事情应该大声失败，而不是轻声细语。第二，我能想到的唯一解决方案是所有资源文件都应该像Java开发中的其他所有东西一样正确打包，即，一个库不应该暴露`properties.txt`在“全局”命名空间中；它应该`me/unroll/deptest/foo`像其他所有内容一样出现在一个文件夹中。我对此持怀疑态度，因为我还没有看到任何实际执行此操作的 Maven 示例。那么这里的最佳实践是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T17:56:09.087

你在*Java*中做了什么来避免库之间的冲突？包裹！这是已确立且易于理解的方法。包也适用于资源：

```
com/example/foo/Foo.class
com/example/foo/properties.txt 
```

第二个图书馆：

```
com/example/bar/Bar.class
com/example/bar/properties.txt 
```

请注意，它`properties.txt`位于不同的包中，因此位于最终 JAR 中的目录中。实际上，这种方法是首选，因为用于检索此类资源的 API 变得更容易：

```
App.class.getResourceAsStream("properties.txt")) 
```

对比

```
Bar.class.getResourceAsStream("properties.txt")) 
```

它之所以有效，`Class.getResourceAsStream()`是因为默认情况下它是底层类包的本地。当然，当您在其中一个的实例方法中时，`Foo`或者`Bar`您只是说`getClass().getResourceAsStream("properties.txt")`. 此外，您仍然可以轻松引用这两个文件，就像引用类一样：

```
getClass().getResourceAsStream("/com/example/foo/properties.txt");
getClass().getResourceAsStream("/com/example/bar/properties.txt"); 
```

* * *

> 我对此持怀疑态度，因为我还没有看到任何实际执行此操作的 Maven 示例。

真实世界的例子：你有一个名为`com.example.foo.FooTest`. 默认情况下，Spring 期望上下文文件位于：`/src/test/resources/com/example/foo/FooTest-context.xml`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-02-07T08:24:00.973

要使用 maven 代码完成 @Tomasz 的回答：

```
<build>
    <resources>
        <resource>
            <directory>src/main/resources</directory>
            <targetPath>com/example/bar/</targetPath>
        </resource>
    </resources>
</build> 
```

# android - Android：致命异常主要

> ID：14942327
> 
> 赞同：0
> 
> 时间：2013-02-18T17:49:57.677
> 
> 标签：android, crash, fatal-error

我收到以下日志，我的活动由于某种未知原因而崩溃。这个问题可能与admob有关。请提出建议。

```
 02-18 22:30:45.122: W/dalvikvm(8179): threadid=1: thread exiting with uncaught exception (group=0x400207d8)
            02-18 22:30:45.232: V/webview(8179): destroy : called.
            02-18 22:30:45.232: V/webview(8179): destroy : called.
            02-18 22:30:45.232: V/webview(8179): destroy : called.
            02-18 22:30:45.252: E/AndroidRuntime(8179): FATAL EXCEPTION: main
            02-18 22:30:45.252: E/AndroidRuntime(8179): android.util.AndroidRuntimeException: Calling startActivity() from outside of an Activity  context requires the FLAG_ACTIVITY_NEW_TASK flag. Is this really what you want?
            02-18 22:30:45.252: E/AndroidRuntime(8179):     at android.app.ContextImpl.startActivity(ContextImpl.java:625)
            02-18 22:30:45.252: E/AndroidRuntime(8179):     at android.content.ContextWrapper.startActivity(ContextWrapper.java:258)
            02-18 22:30:45.252: E/AndroidRuntime(8179):     at android.webkit.CallbackProxy.uiOverrideUrlLoading(CallbackProxy.java:229)
            02-18 22:30:45.252: E/AndroidRuntime(8179):     at android.webkit.CallbackProxy.handleMessage(CallbackProxy.java:336)
            02-18 22:30:45.252: E/AndroidRuntime(8179):     at android.os.Handler.dispatchMessage(Handler.java:99)
            02-18 22:30:45.252: E/AndroidRuntime(8179):     at android.os.Looper.loop(Looper.java:123)
            02-18 22:30:45.252: E/AndroidRuntime(8179):     at android.app.ActivityThread.main(ActivityThread.java:4633)
            02-18 22:30:45.252: E/AndroidRuntime(8179):     at java.lang.reflect.Method.invokeNative(Native Method)
            02-18 22:30:45.252: E/AndroidRuntime(8179):     at java.lang.reflect.Method.invoke(Method.java:521)
            02-18 22:30:45.252: E/AndroidRuntime(8179):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
            02-18 22:30:45.252: E/AndroidRuntime(8179):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
            02-18 22:30:45.252: E/AndroidRuntime(8179):     at dalvik.system.NativeStart.main(Native Method)
            02-18 22:30:45.252: W/ActivityManager(175):   Force finishing activity com.xyz.android/.SelectActivity 
```

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:53:30.793

您正在从广播接收器或某种服务启动 Intent。由于这些组件没有附加 UI，因此您需要`FLAG_ACTIVITY_NEW_TASK`附加到 Intent。尝试类似：

```
Intent intent = new Intent(context, Activity.class);
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
context.startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T10:58:25.877

这是 admob 的一些奇怪的错误。使用最新的 jar 为我修复了它。

# c - CUDA 内核和二维数组——它是如何工作的？

> ID：14942330
> 
> 赞同：0
> 
> 时间：2013-02-18T17:50:03.260
> 
> 标签：c, cuda, nvidia

我正在做一个图像旋转方法。它需要两个矩阵和一定程度的旋转。它按度数旋转原始矩阵并将其存储到旋转矩阵中。我有以下“正常”代码（用于 CPU - 取自本网站 - [http://sinepost.wordpress.com/2012/07/24/image-rotation/](http://sinepost.wordpress.com/2012/07/24/image-rotation/)）并且它正在正常工作；

```
static void RotateImage(unsigned char original[RAW_HEIGHT][RAW_WIDTH] , unsigned char rotated[RAW_HEIGHT][RAW_WIDTH] , int degrees)
{
    double centerX = RAW_WIDTH/2;
    double centerY = RAW_HEIGHT/2;

    for(int x = 0; x< RAW_HEIGHT;x++)
    {
        for (int y = 0; y < RAW_WIDTH; y++)
        {
            double dir = calculateDirection(x-centerX,y-centerY);
            double mag = calculateMagnitude(x-centerX,y-centerY);

            dir-=degrees;

            int origX = (int)(centerX + calculateX(dir,mag));
            int origY = (int)(centerY + calculateY(dir,mag));

            if (origX >= 0 && origX < RAW_HEIGHT && origY >= 0 && origY < RAW_WIDTH)
            {
                    rotated[x][y] = original[origX][origY];
            }
        }
    }
} 
```

我想将此代码转移到 CUDA 代码。这是我的版本：

```
#define RAW_WIDTH 1600*3
#define RAW_HEIGHT 1200

unsigned char *dev_original_image;
unsigned char *dev_rotated_image;

__global__ void rotatePicture(unsigned char *original, unsigned char *rotated, int degrees)
{
    int x = threadIdx.x + blockDim.x * blockIdx.x;
    int y = threadIdx.y + blockDim.y * blockIdx.y;
    int offset_rotated = x + y * blockDim.x * gridDim.x;

    double centerX = 2400.0;
    double centerY = 600.0;

    double dir = (atan2(y-centerY,x-centerX))*180/3.14159265;
    double mag = sqrt((x-centerX)*(x-centerX) + (y-centerY)*(y-centerY));

    dir = dir - degrees;

    int origX = (int)(centerX + cos((dir*3.14159265/180)) * mag);
    int origY = (int)(centerY + sin((dir*3.14159265/180)) * mag);
    int offset_original = origX + origY * blockDim.x * gridDim.x;

    if(offset_original > 0 && offset_original < RAW_HEIGHT*RAW_WIDTH)
        *(rotated + offset_rotated) = *(original + offset_original);
} 
```

但它并没有给我与 CPU 部分相同的结果。我认为问题在于传递 CUDA kerenl 的参数。我将它们作为二维数组传递，可以吗？谁可以给我解释一下这个？这是我的 kerenl 配置和调用：

```
dim3 BlockPerGrid(450,400,1);
dim3 ThreadsPerGrid(8,4,1);

cudaMalloc((void**)&dev_original_image,sizeof(unsigned char)*RAW_HEIGHT*RAW_WIDTH);
cudaMalloc((void**)&dev_rotated_image,sizeof(unsigned char)*RAW_HEIGHT*RAW_WIDTH);

cudaMemcpy(dev_original_image, raw_image2D, sizeof(unsigned char)*RAW_HEIGHT*RAW_WIDTH,cudaMemcpyHostToDevice);
cudaMemcpy(dev_rotated_image, raw_image2D_rotated, sizeof(unsigned char)*RAW_HEIGHT*RAW_WIDTH, cudaMemcpyHostToDevice);

rotatePicture<<<BlockPerGrid,ThreadsPerGrid>>>(dev_original_image,dev_rotated_image, deg); 
```

感谢您的建议！

**注意：我修改了我的代码并且工作得更好但仍然不正确。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:04:53.350

这是潜伏在这些水域中的其他人的解决方案。这是我正确的内核：

```
__global__ void rotatePicture(unsigned char *original, unsigned char *rotated, int degrees)
{
    int x = threadIdx.x + blockDim.x * blockIdx.x;
    int y = threadIdx.y + blockDim.y * blockIdx.y;
    int offset_rotated = x + y * blockDim.x * gridDim.x;

    double centerX = 2400.0;
    double centerY = 600.0;

    double dir = (atan2(x-centerX,y-centerY))*180/3.14159265;
    double mag = sqrt((x-centerX)*(x-centerX) + (y-centerY)*(y-centerY));

    dir = dir - degrees;

    int origX = (int)(centerX + sin((dir*3.14159265/180)) * mag);
    int origY = (int)(centerY + cos((dir*3.14159265/180)) * mag);
    int offset_original = origX + origY * blockDim.x * gridDim.x;

    if(origX > 0 && origX < RAW_WIDTH && origY > 0 && origY < RAW_HEIGHT)
        *(rotated + offset_rotated) = *(original + offset_original);
} 
```

另外，我像这样更改了内核尺寸（以适应我的 1600*3 宽度和 1200 高度）：

```
dim3 BlockPerGrid(600,300,1);
dim3 ThreadsPerGrid(8,4,1); 
```

因此，它的运行方式与上述 CPU 版本相同，但使用的是 GPU 资源。享受

# pyqt4 - 使用 QtDesigner PyQt4 创建自定义小部件

> ID：14942338
> 
> 赞同：0
> 
> 时间：2013-02-18T17:50:38.997
> 
> 标签：pyqt4, qtableview, qtablewidget, custom-widgets, qcheckbox

谁能建议我使用 PyQt4 创建自定义小部件的最佳实践？

我想看看如何在 QTable Widgets 的单元格中添加 Qpushbutton 或 QCheckboxGroup ，这将在用户单击在运行时向 QTable 添加新行时添加

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T11:33:03.237

在 QtDesigner 中创建您的自定义小部件，将其保存为`name.ui`. 在 cmdp 中转到文件`name.ui`位置并使用此命令将其转换为 python 模块：

```
pyuic4 -x name.ui -o name.py 
```

稍后您可以导入该模块（自定义小部件）并在您的 GUI 中使用它。在您的情况下，您可以通过这种方式使用 QTableWidget 和 QPushButton 创建主窗口，但您不能在表格内创建动态按钮。您必须像这样重新实现 QPushButton 类：

```
import YourMainWindowModule #YourMainWindowModule is MainWindow created in QtDesigner and it has QPushButton named "addRowButton" and QTableWidget named "tableWidget", both in grid layer
import sys
from PyQt4 import QtGui, QtCore

class MainWindow(QtGui.QMainWindow):
    def __init__(self, parent = None):    
        QtGui.QWidget.__init__(self, parent)
        self.ui = YourMainWindowModule.Ui_MainWindow()
        self.ui.setupUi(self)

        self.connect(self.ui.addRowButton, QtCore.SIGNAL('clicked()'), self.AddRowToTable)
        self.connect(self, QtCore.SIGNAL("printButtonContent(PyQt_PyObject)"), self.PrintButtonContent)

    def AddRowToTable(self):
        rowData = ["some text", 65454, "more text"]# add what you want
        self.ui.tableWidget.setColumnCount(len(rowData)+1)
        row = self.ui.tableWidget.rowCount()
        self.ui.tableWidget.insertRow(row)
        for col in range(0, len(rowData)):
            item = QtGui.QTableWidgetItem(QtCore.QString(unicode(rowData[col])))
            self.ui.tableWidget.setItem(row, col, item)
        button = OverloadedPushButton(row, self)# row number is this button's ID
        button.setText("Button %s"%(row))
        self.ui.tableWidget.setCellWidget(row, len(rowData), button)

    def PrintButtonContent(self, rowId):
        print "Id of the row where clicked overloaded push button is: ", rowId
        #here you have rowId, so you know in which row button is clicked and you can do what you want

class OverloadedPushButton(QtGui.QPushButton):
    def __init__(self, rowID, mainWindow):
        super(OverloadedPushButton, self).__init__()
        self.__rowID = rowID
        self.__mainWindow = mainWindow
        self.connect(self, QtCore.SIGNAL('clicked()'), self, QtCore.SLOT("triggerOutput()")) 

    @QtCore.pyqtSlot()
    def triggerOutput(self):
        self.__mainWindow.emit(QtCore.SIGNAL("printButtonContent(PyQt_PyObject)"), self.__rowID) 

def main():
    app = QtGui.QApplication(sys.argv)
    form = MainWindow()
    form.show()
    app.exec_()

if __name__ == '__main__':
    main() 
```

我希望这会有所帮助：当您按下`addRowButton`（简单的 QPushButton）时，`AddRowToTable`将在表格中添加行。在该行的最后一列中将重载 QPushButton，当按下该按钮时，它会`printButtonContent`向 mainWindow 发出信号，因此方法`PrintButtonContent`将打印 rowId。您可以通过这种方式重载您想要的任何小部件。

# java - 带有外部 jar 的 Java 小程序无法显示整个苹果应用程序

> ID：14942339
> 
> 赞同：-1
> 
> 时间：2013-02-18T17:50:43.147
> 
> 标签：java, applet, antlr, japplet

我使用 ANTLR 制作了一个小的 java 小程序。我可以毫无问题地从eclipse运行它，但是一旦我把它放在网页上。Applet 无法显示任何内容。例如按钮永远不会显示，直到我将鼠标悬停在它上面。

```
 <applet 
     code="gui.FGG_main" 
     width="790" 
     height="545"
     archive="fgg.jar,antlrworks-1.4.3.jar,output.jar">
    </applet> 
```

任何人都可以帮助，并告诉我发生了什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T19:12:51.550

也许您需要使用 deployJava.js。您可以在[本 Oracle 教程中找到它。](http://docs.oracle.com/javase/tutorial/deployment/applet/deployingApplet.html) 本教程详细描述了每个必要的步骤。

# python - Google App Engine - webapp2 - 路由 - 没有读取我的网址 - 怎么了？

> ID：14942343
> 
> 赞同：0
> 
> 时间：2013-02-18T17:50:51.903
> 
> 标签：python, google-app-engine

从我的 HTML 模板 - 我正在生成一个 URL 以从表单提交到下面：

```
localhost:8080/AD/institution/?institName=Poal+Instit&submit=Add+New 
```

但是，我的 URL 路由页面有正则表达式来捕获上面的 URL - 但它不是 - 关于为什么我的正则表达式读取上述 URL 不正确的任何想法？

```
(r'/institName=<instit_new:[a-zA-Z&=+]+>', handler='xyz') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T18:33:14.927

如果您显示您的实际代码会有所帮助。我的猜测是您的正则表达式需要显示：

```
r'/AD/institution/.*' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T20:28:30.623

url的`query`一部分（在 ? 之后的任何内容）与路由不匹配。

# php - 一次更改多个元素的类别

> ID：14942344
> 
> 赞同：0
> 
> 时间：2013-02-18T17:50:53.577
> 
> 标签：php, jquery, css

我站在一片森林前。你能帮我找到那棵树吗？

目前我正在用 PHP 生成一个列表

```
echo '<div>';
echo '  <ul>';
foreach ( $myArray as $key => $value):
    echo '<li>'. $value . '</li>';
endforeach;
echo '  </ul>';
echo '</div>'; 
```

该数组包含有限数量的项目，这些项目可能会有所不同。

我想要做的是突出显示当前项目并正常显示所有其他项目。因此，在显示页面时，第一项应显示为突出显示。单击第二项时，

*   第一项不应突出（没有任何样式）。
*   第二项应突出显示，直到单击另一个项。
*   所有其他项目应显示为正常样式。

我希望能够只使用 CSS 来做到这一点。

要命名，当单击列表项时，我计划显示/隐藏其他 div 元素，我计划在其中使用 jQuery。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T17:53:34.290

```
$('li').on('click', function() {
  $('li.highlight').removClass('highlight');  // first un-highlight all lis
  $(this).addClass('highlight');  // then highlight only clicked li
}); 
```

要将第一项设置为`highlight`页面加载时，您也可以在 PHP/jQuery 中进行。

如果你想在 jQuery 中做，那么试试：

```
$(document).ready(function() {
    $('div > ul > li:first').addClass('highlight'); // set first item 
                                                // highlight at page load
    $('li').on('click', function() {
      $('li.highlight').removClass('highlight');  // first un-highlight all lis
      $(this).addClass('highlight');  // then highlight only clicked li
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T17:54:59.480

尝试`.addClass() .removeClass()`并`.eq()`：

```
$(function(){
   $('div ul li').eq(1).addClass('active');
   $('div ul li').click(function(){
      $(this).siblings().removeClass('active');
      $(this).addClass('active');
   });
}); 
```

由于`.eq()`已`0`编入索引，因此`.eq(1)`将在页面加载时选择第二个 li。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T17:56:12.580

您可能需要在`li`'s 中添加一个类名，以便为您提供方便的选择器。在下面的示例中，我已`some_class`用于此目的。我还假设您想使用一个类来指示所选项目。在这个例子中，我使用`selected`了这个类名。

```
$('li.some_class').click(function() {
    $('li.some_class').removeClass('selected');
    $(this).addClass('selected');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T18:33:04.793

感谢您的快速回复。

我终于混合了你的答案，让它为我工作

```
$(document).ready(function() 
{
    $('div#myclass > ul.myid > li:first').addClass('current'); // set first item 

    $('div#myclass > ul.myid > li').click(function()
    {
        $(this).siblings().removeClass('current');
        $(this).addClass('current');
    });
}); 
```

我添加的 myclass 和 myid 用于区分其他列表项。

@thecodeparadox：您的提案未完成单击其他项目时的更新。@jai：最初的设置没有完成你的提议。

但是对于最终的混合，它可以 100% 满足我的需要。

再次非常感谢。

沃尔夫冈

# java - Java InputStream函数`available()`如何用C语言实现？

> ID：14942346
> 
> 赞同：0
> 
> 时间：2013-02-18T17:50:54.740
> 
> 标签：java, c, networking, inputstream, ioctl

Java InputStream函数如何`available()`用C语言实现？

此函数返回对可以从 InputStream 读取的字节数的估计值，而不会在下一次调用该 InputStream 的方法时阻塞。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T22:53:57.123

查找`ioctl(2)`功能，`FIONREAD`选项。

# c++ - C++11 线程与 boost 线程

> ID：14942349
> 
> 赞同：1
> 
> 时间：2013-02-18T17:51:08.553
> 
> 标签：c++, multithreading, visual-c++, boost, c++11

我正在使用 msvc110 将我的项目迁移到 c++11 标准，不幸的是，在 dll 上使用的线程变量的行为与我所拥有的 boost 版本不同。

所以，最初这是在 msvc90 上工作的，基本上 Dll 调用了一个创建线程的 InitDll。该线程基本上与 dll 的主线程一起充当侦听器。现在，当我创建线程时，它挂起并且什么也不做，甚至不执行用于初始化线程的函数。

您能帮我解释一下如何获得与 boost 版本相同的行为吗？

编辑：代码

抱歉，无法回复评论中的代码

应用程序通过 dll 使用记录器。要在一个非常简单的控制台应用程序中使用记录器，如下所示

```
#include <Somewhere/Logger.h>

int main()
{
    COOL_LOGGER("Here we go logging on console!");

return 0;
} 
```

我们可以讨论代码的编写方式（取自我提到的演示），但是如何初始化 dll 和线程是：

```
#include "Logger.h"

#ifdef _WIN32

BOOL APIENTRY DllMain( HMODULE hModule,
                   DWORD  ul_reason_for_call,
                   LPVOID lpReserved
                 )
{
switch (ul_reason_for_call)
{
     case DLL_PROCESS_ATTACH:
    TheLog::InitLog();
            break;
     case DLL_THREAD_ATTACH:
    break;
         case DLL_THREAD_DETACH:
    break;
     case DLL_PROCESS_DETACH:
    break;
}
    return TRUE;
 }

 #endif

 #include <thread>

 void InitLog()
 {
// Do the init taken from library demos
 std::thread m_thread(LogListener);
 }

 void LogListener()
 {
while(!bAppEnd)
{
    std::cin>>str;
    // change log behavior according to the user input
}
 }

 // to stop the thread when shutting down
 void EndLog()
 {
     // retrieve thread thought id or some other way
     thread.join();
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T09:47:37.780

如果出现问题，`DllMain`那么您的操作将受到严重限制——Windows 加载程序通常只会终止应用程序，并且通常不会调用错误处理程序。

挂起表明代码正在执行需要加载 DLL 的操作，或者正在等待另一个 DLL 初始化，这两种情况都不会发生，直到`DllMain`对该 DLL 的调用完成。有可能`std::thread`是在做这些事情之一。

编辑：避免该问题的一种方法是`std::call_once`在与此后台线程通信的每个导出函数中使用，以确保启动线程。这样您就不会使用`std::thread`in `DllMain`，但您不需要公开“init”函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T02:26:56.557

您的 InitLog 函数有一个线程，该线程的范围似乎仅限于该函数。当函数退出时，它立即执行，线程被销毁。然而，销毁未连接的 std::thread（但不是 boost::thread？）调用 std::terminate。如果您想测试正在发生的事情，请放入终止处理程序。

# mysql - 分组限制为 2 个表

> ID：14942354
> 
> 赞同：0
> 
> 时间：2013-02-18T17:51:16.183
> 
> 标签：mysql

我有这个 MYSQL 查询

```
 select * from {$this->table} sc
        join db_sc_profile scp 
        on scp.subcategory_id = sc.subcategory_id
        join db_profile p
        on p.profile_id = scp.profile_id
        where sc.subcategory_id in (" . implode(',', $subcategories) . ")
        and p.profile_id in  (" .implode(',', $profiles) .
        group by p.profile limit #### 
```

此查询不适用于此行`group by p.profile limit ####`。所以我想分组，`p.profile`但限制为`12/count(profiles)`.

我可以这样做吗？请任何帮助。

注意：我正在使用 Codeigniter 2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T18:05:13.853

输入示例

```
 [subcategories] =  Array
(
[0] => 101
[1] => 102
[2] => 103

)

 [profiles] => Array
    (
        [0] => 5
        [1] => 6
    ) 
```

它们是数据库中的两个表，由第三个表链接

```
profile = [profile_id, profile_name]

subcategory  = [sc_id, sc_name,...]

profile_subcategory = [profile_id, sc_id] 
```

# r - 如何使用 Wordnet 在 R 中进行词形还原？

> ID：14942356
> 
> 赞同：0
> 
> 时间：2013-02-18T17:51:29.470
> 
> 标签：r, wordnet, lemmatization

我想在 R 中使用 Wordnet 的 getLemma 函数对语料库进行词形还原。但我不太确定如何使用它。

这是使用 R. 中的 wordnet 包进行词形还原的文档。

```
filter <- getTermFilter("StartsWithFilter", "car", TRUE)
terms <- getIndexTerms("NOUN", 5, filter)
sapply(terms, getLemma) 
```

我的问题是我有一个包含 5000 个单词的文档，在这种情况下，我想将每个单词转换为其基本/根单词。例如：发烧->发烧；发烧-->发烧

我想对语料库中的所有单词进行词形还原，并且不会将其限制为单词 StartingWith...，我也不明白数字 5 在`terms <- getIndexTerms("NOUN", 5, filter)`

如果有人可以为我解决这个问题，那就太好了。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-25T15:52:42.513

5 指的是 maxLimit，这是您想要的最大结果数... [http://cran.r-project.org/web/packages/wordnet/wordnet.pdf](http://cran.r-project.org/web/packages/wordnet/wordnet.pdf) <--这就是解决问题所需的一切

# java - Perl5Matcher.matches(input, pattern) 为包含分号的输入返回 true，即使分号不在模式中

> ID：14942357
> 
> 赞同：1
> 
> 时间：2013-02-18T17:51:32.227
> 
> 标签：java, pattern-matching

我有一个字符串`MyString = "AP;";`或任何其他数量的字符串，其中包含 ;

当我尝试验证 MyString 匹配模式时，例如。`MyPattern = "^[a-zA-Z0-9 ()+-_.]*$";`

我认为应该允许 AlphaNumerics 和字符 ()+-_.]* **但不允许；**

但是下面的语句返回 True！

```
Pattern sepMatchPattern = sepMatchCompiler.compile("^[a-zA-Z0-9 ()+-_.]*$");

Perl5Matcher matcher = new Perl5Matcher();

if (matcher.matches("AP;", sepMatchPattern)) {
  return true;
} else {
  return false;
} 
```

谁能解释为什么分号一直被允许通过？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T18:34:53.673

问题在于您定义的正则表达式 - `^[a-zA-Z0-9 ()+-_.]*$`。在这个正则表达式中是一个由字母（大写和小写）、数字、空格、括号和一些标点符号组成的字符类。标点符号之一是句号。句号没有转义，因此它具有任何字符（包括分号）的本义。

此正则表达式将匹配任何字符串 - 它本质上是`^.*$`.

要解决此问题，请避开该时期。

```
Pattern sepMatchPattern = sepMatchCompiler.compile("^[a-zA-Z0-9 ()+-_\\.]*$"); 
```

编辑：

事实证明，我错过了另一个具有特殊含义的项目。“+-_”字符类中的连字符不表示“加号、连字符或下划线”。相反，它表示从 0x2B 到 0x5F（包括）的所有字符。一个快速测试表明这`^[+-_]*$`也匹配`AP;`，因为 A 和 P 是 0x41 和 0x50，而臭名昭著的分号是 0x3B - 都在 0x2B 到 0x5F 的范围内。

正确的正则表达式是：

`"^[a-zA-Z0-9 ()+\\-_\\.]*$"`

# android - 使用 dropbox api 从 Dropbox 文件中获取文件 url

> ID：14942371
> 
> 赞同：1
> 
> 时间：2013-02-18T17:52:20.267
> 
> 标签：android, dropbox, dropbox-api

我需要从保管箱上的非公共文件夹中获取文件列表。在此之后，我需要为每个文件获取一个 URL，以便我通过 http 访问它。Dropbox api可以做到这一点吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T18:06:59.137

[在此处](https://www.dropbox.com/static/developers/dropbox-android-sdk-1.5.3-docs/index.html)查看 DropboxAPI.Entry metadata() 和 DropboxAPI.DropboxLink share()

# c# - 删除 IList IList 中的项目 项目

> ID：14942373
> 
> 赞同：1
> 
> 时间：2013-02-18T17:52:24.733
> 
> 标签：c#, list

我正在尝试从items2中删除`List<int>`项目`List<int>`

```
List<int> item1 = new List<int> {1,2,3,4,5,6,7,8,9,10};
List<int> item2 = new List<int> {1,2,3,4}; 
```

从 item1 中删除 item2 值后，所需的结果是

```
item1 = {5,6,7,8,9,10 } 
```

是否有任何直接方法或任何其他方法可以从另一个项目列表的内容中删除一个项目列表的内容，而不使用 'for' 或 'foreach' ？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-18T17:55:11.933

某处将不得不循环*。**不过，您*不必循环输入源代码。至于你做什么......这取决于你的要求。

如果您将变量的类型更改为`List<int>`您可以使用`List<T>.RemoveAll`：

```
item1.RemoveAll(x => item2.Contains(x)); 
```

`item1`或者您可以只使用 LINQ，如果您对更改值以引用不同的列表感到满意：

```
item1 = item1.Except(item2).ToList(); 
```

请注意，上述内容*还将*生成`item1`一组不同的值 - 如果您有任何重复，它们将被删除（即使它们不在 中`item2`）。

没有重复删除方面的替代方案：

```
item1 = item1.Where(x => !item2.Contains(x)).ToList(); 
```

或者如果它很大，则使其性能更好`item2`：

```
var item2Set = new HashSet<int>(item2);
item1 = item1.Where(x => !item2Set.Contains(x)).ToList(); 
```

# nuget - 在构建期间未将 NuGet 包文件复制到项目内容

> ID：14942374
> 
> 赞同：23
> 
> 时间：2013-02-18T17:52:31.900
> 
> 标签：nuget, nuget-package

我正在使用带有 NuGet 包管理器版本 2.2.31210 的 VS2012 专业版构建 MVC4 Web 应用程序。我的解决方案中有多个项目，所有项目都共享我使用 NuGet 安装的各种包。我的一个项目是一个 MVC4 Web 应用程序，我在其中使用引导程序、jquery UI 等包，所有这些包都是使用 NuGet 安装的。

当我从我的存储库克隆我的整个解决方案的新副本并构建我的 MVC4 项目时，包还原功能似乎正在工作：它在解决方案目录下创建包目录并将其填充到我期望的包的所有版本看。但是，内容文件不会复制到 MVC 应用程序目录中的适当位置。奇怪的是它确实为内容创建目录，但不复制内容文件本身。

例如，我正在使用出现在 packages/Twitter.Bootstrap.2.2.2 中的 Twitter Bootstrap 包。在 MVC 项目中，在 Content 目录中创建了一个名为 bootstrap 的目录（包含 css、img 和 js 目录）。但是，没有 css 或 js 文件被复制到这些目录中！

有没有人知道我必须说出什么魔法才能让构建从 NuGet 包目录中复制这些内容文件？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-09-07T18:33:43.900

这是我们所有人都面临的一个非常普遍的问题。我创建了一个 MSBuild 任务**NugetContentRestoreTask**，它将为您完成这个技巧。在包管理器控制台中运行以下命令：

### 安装 Nuget 内容还原 MSBuild 目标

```
 PM> Install-Package MSBuild.NugetContentRestore 
```

唯一剩下的就是从你的`BeforeBuild`Target 调用它，如下所示：

### 项目文件目标

```
 <Target Name="BeforeBuild">
      <NugetContentRestoreTask SolutionDir="$(SolutionDir)" ProjectDir="$(ProjectDir)" />
    </Target> 
```

您可以查看[源代码库并在](https://github.com/panchilo/MSBuild.NugetContentRestore)[nuget.org](https://www.nuget.org/packages/MSBuild.NugetContentRestore/)上找到它

## 其他内容文件夹

此 nuget[仅包含默认文件夹](https://github.com/panchilo/MSBuild.NugetContentRestore/blob/master/MSBuild.NugetContentRestore.Tasks/NugetContentRestoreTask.cs#L21) `scripts`、`images`、`fonts`和`content`，它不是递归目录包含的。对于其他内容子文件夹 - 您必须分配属性`AdditionalFolders`。

```
 <Target Name="BeforeBuild">
        <NugetContentRestoreTask SolutionDir="$(SolutionDir)" ProjectDir="$(ProjectDir)" 
              AdditionalFolders="less;sass;common" />
    </Target> 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-20T15:14:21.390

我找到了一种解决方法，但它很难看。通过在 NuGet 包管理器控制台中执行以下命令：`Update-Package -Reinstall`确实将所有文件复制到 Mvc 项目`Content`和`Scripts`目录中的适当位置。

不幸的是，这是有风险的，因为您最终可能会得到某些软件包的错误版本。例如，在我的情况下，在命令完成执行后（顺便说一下，这需要相当长的时间），我最终得到了 jQuery 版本 1.4.4。这已经很老了，我认为它必须是某个正在更新的其他包的显式依赖项。因此，NuGet 实际更新包的顺序似乎很重要（它似乎没有解析所有包的整个依赖关系树，并且只从所有依赖项的联合中选择最新版本，这似乎是首选行为）。相反，当命令执行时，我看到它多次用不同版本替换 jQuery 包，因为它通过所有包及其依赖项工作，

一种类似的方法是`Update-Package -Reinstall`为导致我的问题的每个包显式执行命令，但这非常乏味且容易出错。

`Install-Package`NuGet 包还原功能应产生与手动执行包的or命令相同的结果`Update-Package -Reinstall`，但事实并非如此。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-07-18T08:53:41.860

我也不喜欢将第三方 JavaScript 文件置于源代码控制之下。这就是为什么我在[http://nuget.codeplex.com/workitem/2094](http://nuget.codeplex.com/workitem/2094)中遵循 Jeff Handley 的建议来创建我自己的解决方案。我没有采用可执行的方式，而是创建了一个可以解决问题的 nuget 解决方案级别包。

[http://www.nuget.org/packages/Baseclass.Contrib.Nuget.GitIgnoreContent/](http://www.nuget.org/packages/Baseclass.Contrib.Nuget.GitIgnoreContent/)

它与 git 相关联，因为它会自动更新 .gitignore 文件。

简短的介绍：

忽略 git 中的 nuget 内容文件：

*   在 .gitignore 文件中生成条目以从源存储库中排除 nuget 内容文件

*   在构建之前恢复 nuget 内容文件（在 VS 中自动并使用 powershell 脚本手动

我写了一篇博客文章来描述如何使用它。 [http://www.baseclass.ch/blog/Lists/Beitraege/Post.aspx?ID=9&mobile=0](http://www.baseclass.ch/blog/Lists/Beitraege/Post.aspx?ID=9&mobile=0)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-04-15T19:42:39.287

在 Visual Studio 2015 Update 1 中，它们现在支持[contentFiles](http://docs.nuget.org/Create/Nuspec-Reference#contentfiles-with-visual-studio-2015-update-1-and-later)。需要注意的是，它仅适用于使用 project.json 的项目。

关于您遇到的问题，有一篇很好的博客文章解释了为什么您会看到这种行为：[NuGet Package Restore Common Misconceptions](http://jeffhandley.com/archive/2013/12/09/nuget-package-restore-misconceptions.aspx)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-14T08:11:37.553

对于我的项目，事实证明内容文件`PackageReferences`仅适用于：

1.  通过 nuget 引用的现有项目`packages.config`
2.  安装了带有内容文件的 NuGet 包
3.  构建项目
4.  > 输出目录中没有内容文件

5.  转换`packages.config`为`PackageReferences`
6.  构建项目
7.  > 内容文件已复制到输出目录

IDE 是 Visual Studio 2017。该项目是一个应用程序项目，这意味着它是旧`csproj`格式。

# java - 输出是什么？

> ID：14942377
> 
> 赞同：-2
> 
> 时间：2013-02-18T17:52:41.383
> 
> 标签：java, pass-by-reference

引用传递让我有点头疼，所以我想看看社区的其他人会发现这个问题有多混乱。如果您认为这是一个愚蠢的问题，请随时说。

你会说以下程序的输出是什么？

```
class Demo {
    public static void main(String[] args) {
        ArrayList<Container> list = new ArrayList<Container>();
        Container c1 = new Container();
        Container c2 = new Container();
        c1.setSt("c1");
        c2.setSt("c2");
        list.add(c1);
        list.add(c2);

        Container c3 = new Container();
        c3.setSt("c3");
        modify(list, c3);

        for (Container st : list) {
            System.out.println(st.getSt());
        }
        System.out.println("c3.st: " + c3.getSt());
    }

    private static void modify(ArrayList<Container> list, Container container) {
        list.get(1).setSt("modified");
        container.setSt("modified c3");
        container = new Container();
        container.setSt("new container");
    }
}

class Container {
    private String st;

    public String getSt() {
        return st;
    }

    public void setSt(String st) {
        this.st = st;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T17:55:10.417

这是

```
c1
modified
c3.st: modified c3 
```

我赢什么？

# jquery - jQuery UI 自动完成：如何允许自由文本

> ID：14942379
> 
> 赞同：5
> 
> 时间：2013-02-18T17:52:42.850
> 
> 标签：jquery, jquery-autocomplete, jquery-ui-autocomplete

我想为用户提供添加自己的变体的可能性，而不仅仅是建议中的一个。但是当我在字段中输入内容并单击 ENTER 时，我的表单提交。

然后我尝试为我的字段捕获 keydown 事件，但在这种情况下，我失去了使用箭头从建议中选择变体并输入键的可能性，因为 ui 参数未定义。

```
 $('#field_id').on('keydown', function(event) {
        if (event.keyCode == $.ui.keyCode.ENTER
            || event.keyCode == $.ui.keyCode.NUMPAD_ENTER)
        {

            $('#field_id').trigger('autocompleteselect');
        }
    });

    $('#field_id').autocomplete({
        source: [{"id":"20","value":"This is not mandatory decline reason"},{"id":"21","value":"You are have to be rejected"}]
        minLength: 0
    }).on('autocompleteselect', function(event, ui) {
        // if I click on suggestion using mouse - everything is ok
        // but not for ENTER-key choosing

        // I want something like that:
        if (ui.item) {
              id = ui.item.id;
              value = ui.item.value;
        } else {
              id = 'my_new_item';
              value = $(this).val();
        }
        return false;
    }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T19:59:31.003

如果您想阻止表单在输入时提交，您可以使用 preventDefault：

```
$(document).ready(function() {
  $(window).keydown(function(event){
    if(event.keyCode == 13) {
      event.preventDefault();
      return false;
    }
  });
}); 
```

对于自动完成，请注意，当用户按下回车键时触发“自动完成选择”事件将触发“自动完成选择”处理程序两次。为避免这种情况以及缺少 ui 参数，请尝试使用响应回调将用户输入添加为建议项并将自动对焦设置为 true。

这是一个示例，当自动完成没有匹配项时，用户输入被添加到建议列表中。

```
$('#field_id').autocomplete({
    source: [{
        "id": "20",
            "value": "This is not mandatory decline reason"
    }, {
        "id": "21",
            "value": "You are have to be rejected"
    }],
    minLength: 0,
    autoFocus: true,
    response: function (event, ui) {

        if (ui.content.length == 0) {
            ui.content.push({
                label: "New Search value: " + $(this).val(),
                value: $(this).val(),
                id: 0
            });
        }
    }
}).on('autocompleteselect', function (event, ui) {
    id = ui.item.id;
    value = ui.item.value;

    return false;
}); 
```

这是上面的[jsfiddle](http://jsfiddle.net/jfbalanc/wwcHp/6/)示例。

希望这可以帮助。

# php - PHP 使用 Google cse 搜索搜索查询

> ID：14942380
> 
> 赞同：0
> 
> 时间：2013-02-18T17:52:43.470
> 
> 标签：php, search

似乎这天谷歌做了一些改变，脚本不得不使用搜索谷歌显示结果但不再有效。此代码查看“ [http://www.google.com/cse?as_q=youtube](http://www.google.com/cse?as_q=youtube) ”，并提取内容以获取文件内容，但现在该路径重定向到正常的 Google 搜索“ [https://www.google.com /search?as_q=youtube](https://www.google.com/search?as_q=youtube) " 并且不显示结果。

这是我的代码，也许可以修改它，这将有效，但我需要你的帮助，非常感谢你提前

这是课程：[http ://tny.cz/1c82c0b4](http://tny.cz/1c82c0b4)

代码 php：

```
<?php
    $artist = str_replace("-", " ", $artist);

require("search.class.php");
$z          = new zentido();

function resultados($q, $p){
    global $z;
    $p          = ($p-1);
    $q          = $z->slug($q, '+');
    $contents   = $z->getUrlContains('http://www.google.com/cse?as_q='.$q.'&start='.$p.'0&lr=lang_es');
    $contents   = $z->comprimir($contents);

        preg_match_all('#<a class="l" href="(.*?)" onmousedown="(?:.*?)">(.*?)</a>#si',$contents, $lnk);
        preg_match_all('#<span class="s">(.*?)</span>#si', $contents, $info);

        $contents = array_merge($lnk, $info);
        /*
        4 -> info
        2 -> title
        1 -> url
        */
        for($i=0;$i<count($contents[0]);$i++){
            $_url = $contents[1][$i];

            if(strpos($_url,'argentinawarez.com') === false){
                echo "<article><div class='resultados_bus'><div class='resultados_bus_cont'><div class='bus'><span class='ico-stars'>&nbsp;</span><a target='_blank' rel='nofollow' href='".($_url)."'><h2>".strip_tags($contents[2][$i])."</h2></a></div><div class='bus_p'><p>";
                echo ($contents[4][$i])."</p></div></div><div class='resultados_bus_puntos'><p>".rand(10,100)."<br>Visitas</p></div></div></article>";
            }else{
                echo "<article><div class='resultados_bus'><div class='resultados_bus_cont'><div class='bus'><span class='ico-stars'>&nbsp;</span><a target='_blank' rel='nofollow' href='".($_url)."'><h2>".strip_tags($contents[2][$i])."</h2></a></div><div class='bus_p'><p>";
                echo ($contents[4][$i])."</p></div></div><div class='resultados_bus_puntos'><p>".rand(10,100)."<br>Visitas</p></div></div></article>";
            }
        }
    }

    resultados($_GET['artist'], 1);
    resultados($_GET['artist'], 2);

    ?> 
```

# c# - 将 C# 数组传递给 Javascript

> ID：14942385
> 
> 赞同：4
> 
> 时间：2013-02-18T17:52:50.537
> 
> 标签：c#, javascript, asp.net, arrays

将 C# 数组传递给 javascript 变量的最佳方法是什么？

我有示例代码，但是这个从 C# 数组中逐个字符地返回，我想以正常方式返回，就像在 javascript 数组中逐字一样；

后面的 C# 代码：

```
 public string[] names = { "John", "Pesho", "Maria"};
 public JavaScriptSerializer javaSerial = new JavaScriptSerializer(); 
```

javascript代码：

```
 <script>
    var a = '<%= this.javaSerial.Serialize(this.names) %>';
    for (var i = 0; i < a.length; i++) {
        console.log(a[i]);
    }
 </script> 
```

此脚本以单个字符数组的形式返回“名称”数组中的所有单词。我想以正常方式返回，例如 ["John"] ["Pesho"] ...

**将 C# 数组传递给 javascript 的最佳方法是什么？**

当我运行此代码时，我在 Chrome 浏览器的控制台中得到以下信息：

```
[ Profile.aspx:44
" Profile.aspx:44
v Profile.aspx:44
a Profile.aspx:44
l Profile.aspx:44
e Profile.aspx:44
r Profile.aspx:44
i Profile.aspx:44
" Profile.aspx:44
, Profile.aspx:44
" Profile.aspx:44
p Profile.aspx:44
e Profile.aspx:44
s Profile.aspx:44
h Profile.aspx:44
o Profile.aspx:44
" Profile.aspx:44
, Profile.aspx:44
" Profile.aspx:44
m Profile.aspx:44
a Profile.aspx:44
r Profile.aspx:44
i Profile.aspx:44
a Profile.aspx:44
" Profile.aspx:44
] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-18T18:01:59.330

代替

```
var a = '<%= this.javaSerial.Serialize(this.names) %>'; 
```

和

```
var a = <%= this.javaSerial.Serialize(this.names) %>; 
```

您将生成的 JSON 放入 javascript 字符串中，这将导致您的示例输出遍历`Serialize`调用的每个字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T18:01:18.430

您的 c# 代码将返回一个字符串，您必须首先使用 JSON.parse 解析该字符串，然后对其进行迭代：

```
var a = JSON.parse('<%= this.javaSerial.Serialize(this.names) %>');
for (var i = 0; i < a.length; i++) {
    console.log(a[i]);
} 
```

或者正如@Matthew 所说，不要在它周围加上引号，这样你就不必解析它。

# php - 为什么 simple_html_dom 这么慢？

> ID：14942394
> 
> 赞同：1
> 
> 时间：2013-02-18T17:53:03.660
> 
> 标签：php, html, simple-html-dom

我在我的网页上使用 simple_html_dom 来保存 3 个单独的页面，并在这些页面中搜索和打印各种内容。这使得页面需要几秒钟才能加载。

有什么方法可以优化 simple_html_dom 以更快地运行？还是我应该完全使用其他东西以获得更好的速度？我认为 3 页不算多，但也许我错了。我想这就像一次加载 3 个单独的页面 - 但是，有什么东西可以用来让事情变得更快吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T17:58:35.937

这可能取决于您搜索的内容，即解析器需要执行多少 DOM 抓取。我最近使用 simple_html_dom 从近一千个页面中提取数据，所有这些都在一个请求中，处理所有数据大约需要 10 秒。

可能是 HTTP 请求占用了大部分时间。尝试获取要抓取的页面`wget`或任何您喜欢的方法，然后针对保存到本地硬盘的文件运行 simple_html_dom。

# javascript - 最近对 underscore.js 的更改破坏了 Backbone.ModelBinder。如何进行？

> ID：14942399
> 
> 赞同：2
> 
> 时间：2013-02-18T17:53:26.547
> 
> 标签：javascript, backbone.js, underscore.js

我最近开始使用 Backbone.js（它使用 underscore.js）并想使用 Backbone.ModelBinder [https://github.com/theironcook/Backbone.ModelBinder](https://github.com/theironcook/Backbone.ModelBinder)来补充。

最近对 underscore.js 中 bindAll() 方法的更改似乎破坏了 Backbone.ModelBinder 提供的示例。显然，如果调用中没有提供任何函数，它现在会引发异常。

我通过更改构造函数中的一行代码“解决了”问题： `_.bindAll(this);` 现在替换为 `_.bindAll.apply(_, [this].concat(_.functions(this)));` （这要归功于[https://github.com/documentcloud/underscore/commit/bf657be243a075b5e72acc8a83e6f12a564d8f55](https://github.com/documentcloud/underscore/commit/bf657be243a075b5e72acc8a83e6f12a564d8f55)上的一个线程）

这些例子现在似乎有效，但我想知道我是否还会遇到其他地雷？在他们的oncook 的好人推出Backbone.ModelBinder 的兼容版本之前，我是否最好恢复到underscore.js 的先前版本？

# php - Facebook 相册创建 php

> ID：14942401
> 
> 赞同：0
> 
> 时间：2013-02-18T17:53:31.950
> 
> 标签：php

当我发出以下发布命令来创建相册时，什么都没有创建。

```
 $album_url="https://graph.facebook.com/".$fanpage_id."/albums?"
    . "name=" . urlencode($album_name)
    . "&message=" . urlencode($album_description)
    . "&method=POST"
    . "&access_token=" . $fanpage_token; 
    file_get_contents($graph_url); 
```

但是，可以使用以下硬代码创建相册。上面的 post 命令有问题吗？

```
 $album_url = 'https://graph.facebook.com/xxx/albums?name=%22album%20php%20%20name%22&message=%22Album%20php%20%20description%22&method=POST&access_token=xx;
   file_get_contents($album_url); 
```

# facebook - Facebook 请求进入 Facebook 页面应用程序

> ID：14942404
> 
> 赞同：-2
> 
> 时间：2013-02-18T17:53:40.950
> 
> 标签：facebook, facebook-javascript-sdk

有谁知道是否可以将 Facebook 请求重定向到 Facebook 页面应用程序而不是 Canvas 应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T19:03:37.453

不，它不会重定向到您提供的任何网址。您应该让他们从 Canvas 应用程序重定向到 Facebook 页面。尽管这将是丑陋/糟糕的用户体验。那是你唯一的选择。

# python - 阿帕奇和 Django

> ID：14942405
> 
> 赞同：0
> 
> 时间：2013-02-18T17:53:55.593
> 
> 标签：python, django

我试图配置我的 Django 站点，以便它由 Apache 提供服务。

**文件夹布局**

```
`-- django
    |
    `-- webtools
        |-- 1
        |-- __init__.py
        |-- __init__.pyc
        |-- apache
        |   `-- django.wsgi
        |-- macmonster
        |   |-- __init__.py
        |   |-- __init__.pyc
        |   |-- models.py
        |   |-- models.pyc
        |   |-- tests.py
        |   |-- views.py
        |   `-- views.pyc
        |-- manage.py
        |-- modules
        |   |-- __init__.py
        |   |-- __init__.pyc
        |   |-- macaddr.py
        |   |-- macaddr.pyc
        |   |-- validate.py
        |   `-- validate.pyc
        |-- settings.py
        |-- settings.pyc
        |-- urls.py
        `-- urls.pyc 
```

**/etc/httpd/conf.d/django.conf**

```
<VirtualHost *:80 >
  ServerName direct.macmonster.co.uk
  WSGIScriptAlias / /opt/django/webtools/apache/django.wsgi
</VirtualHost> 
```

**/opt/django/webtools/apache/django.wsgi**

```
import os, sys

sys.path.append('/opt/django/webtools')
os.environ.setdefault("DJANGO_SETTINGS_MODULE", "settings")

import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler() 
```

我目前在日志中遇到的主要错误是：

**`TemplateSyntaxError: Caught ImportError while rendering: No module named webtools.macmonster`**

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T17:59:03.607

如果 webtools 是您的顶级包，您应该添加`/opt/django`到.`sys.path`而不是`/opt/django/webtools`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-30T13:48:48.450

这个配置对我有用。这应该适合你。

```
import os, sys

root = os.path.join(os.path.dirname(__file__),'..')
sys.path.insert(0,root)
os.environ.setdefault("DJANGO_SETTINGS_MODULE", "webtools.settings")

import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler() 
```

# c# - 如何在生产服务器上迁移 EF Code First 数据库

> ID：14942406
> 
> 赞同：1
> 
> 时间：2013-02-18T17:53:59.480
> 
> 标签：c#, asp.net, entity-framework, ef-code-first, migration

我阅读[了这篇](http://msdn.microsoft.com/en-us/data/jj591621)关于 EF 代码首次迁移的帖子，但它使用了“包管理器控制台”，这对共享主机无效。我想知道您如何在生产环境中部署 EF 代码优先数据库更改。手动更改数据库好不好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T18:00:52.033

您不需要使用包管理器控制台来进行迁移。有一个名为 MigrateDatabaseToLatestVersion 的数据库初始化程序可以为您解决问题（可以在[此处](http://msdn.microsoft.com/en-us/library/hh829293%28v=vs.103%29.aspx)阅读）。它将让您创建一个配置文件，该文件将包含您希望数据库在任何迁移时执行的任何特定设置或播种。

设置好之后，您需要在代码中执行以下操作：

```
Database.SetInitializer(new MigrateDatabaseToLatestVersion<MyDbContext,Configuration>());
var db = new MyDbContext();
db.Database.Initialize(true); 
```

这将根据您的代码优先设置自动为您执行迁移。

# asp.net-mvc-3 - 模拟通用存储库方法

> ID：14942409
> 
> 赞同：1
> 
> 时间：2013-02-18T17:54:06.910
> 
> 标签：asp.net-mvc-3, linq, lambda, mocking, moq

为了对我的 asp.net MVC Web 应用程序进行单元测试，我想模拟我的 IGenericRepository（我正在使用 Moq）。

必须模拟的方法如下所示：

```
IEnumerable<TEntity> Get(Expression<Func<TEntity, bool>> filter = null, 
        Func<IQueryable<TEntity>, IOrderedQueryable<TEntity>> orderBy = null, string includeProperties = ""); 
```

我已经模拟了存储库，没有任何问题：

```
useraccountRepository = new Mock<IGenericRepository<Useraccount>>(); 
```

现在我想告诉 Moq，当我的接口的 Get 方法被调用时，应该返回一个用户帐户列表：

```
useraccountRepository.Setup(r => r.Get(u => u.Email == useraccount.Email && u.Password == useraccount.Password)).Returns(useraccounts); 
```

我认为我的第二个 lambda 有一个错误，因为这个有效：

```
useraccountRepository.Setup(r => r.Get(null, null, "")).Returns(useraccounts); 
```

但我的错误在哪里？

什么也有效：

```
useraccountRepository.Setup(r => r.Get(u => u.Email == useraccount.Email 
            && u.Password == useraccount.Password, null, "")).Returns(useraccounts); 
```

看起来默认参数值不适用于我的模拟。这是为什么？

如果我使用

```
useraccountRepository.Setup(r => r.Get(u => u.Email == useraccount.Email 
            && u.Password == useraccount.Password, null, "")).Returns(useraccounts); 
```

无论如何，当调用 Get 消息时，我的控制器中的方法会引发异常：

```
private bool validateUser(Useraccount useraccount)
    {
        try
        {
            Useraccount useraccountLogin = UnitOfWork.UseraccountRepository.Get(
                u => u.Email == useraccount.Email && u.Password == useraccount.Password).Single<Useraccount>();

            return (useraccountLogin != null);
        }
        catch (Exception exc)
        {
            return false;
        }            
    } 
```

我的错误在哪里？

先感谢您。迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T18:36:52.173

According to this question [Moq.Mock<T> - how to setup a method that takes an expression](https://stackoverflow.com/questions/2751935/moq-mockt-how-to-setup-a-method-that-takes-an-expression), setting constraints on expression parameters is unsupported by Moq.

# regex - 需要一个处理这个 URL 的正则表达式：

> ID：14942411
> 
> 赞同：-1
> 
> 时间：2013-02-18T17:54:16.470
> 
> 标签：regex

我有一个来自谷歌圈子的 URL，它没有得到普通正则表达式的验证。例如，asp.net 提供了一个标准的正则表达式来处理 URL，即：

```
"http(s)?://([\w-]+\.)+[\w-]+(/[\w- ./?%&amp;=]*)?" 
```

但是当你得到一个谷歌圈子网址时：

[https://plus.google.com/photos/114197249914471021468/albums/5845982797151575009/5845982803176407170?authkey=CKfNzLrhmenraA#photos/114197249914471021468/albums/5845982797151575009/5845982803176407170?authkey=CKfNzLrhmenraA](https://plus.google.com/photos/114197249914471021468/albums/5845982797151575009/5845982803176407170?authkey=CKfNzLrhmenraA#photos/114197249914471021468/albums/5845982797151575009/5845982803176407170?authkey=CKfNzLrhmenraA)

它无法应付。

我想在末尾附加以下表达式：`(\?.+)?` 这基本上意味着 URL 后面可以有一个问号，然后是任意数量的任何类型的字符，但这不起作用。

整个表达式将是：

```
"[Hh][Tt][Tt][Pp]([Ss])?://([\w-]+\.)+[\w-]+(/[\w- ./?%&amp;=]*(\?.+)?)?" 
```

出于某种原因，这也不适用于复杂的 URL。帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T18:46:18.483

我添加了锚点`^`，`$`出于本测试的目的，转义了，`/`因为以下是 javascript 正则表达式文字，将`&amp;`没有业务存在的 更改为`&;`，删除了空格并添加`#`到第三个字符集，它似乎工作正常：

```
/^http(s)?:\/\/([\w-]+\.)+[\w-]+(\/[\w.\/?%&;#=-]*)?$/.test( 
    'https://plus.google.com/photos/114197249914471021468/albums/5845982797151575009/5845982803176407170?authkey=CKfNzLrhmenraA#photos/114197249914471021468/albums/5845982797151575009/5845982803176407170?authkey=CKfNzLrhmenraA' )   
// true 
```

我还在`-`第三个字符集中将 移到了末尾，因为如果未指定范围，它应该位于字符集的开头或结尾。

免责声明：我不建议将其作为一般验证 url 的好方法，它只是原始正则表达式的编辑版本，现在适用于这种特定情况。

# java - Java Bean 未被识别

> ID：14942416
> 
> 赞同：0
> 
> 时间：2013-02-18T17:54:38.670
> 
> 标签：java, jsp, javabeans

我创建了一个包含以下信息的 java bean：

包：com.mysite

类别：文件夹

该文件位于 ROOT/WEB-INF/classes/com/mysite/Folders.class

电话是：

```
<jsp:useBean id="folders" scope="session" class="com.mysite.Folders" /> 
```

如果它有帮助的话，这就是这门课，它很简单，因为我想在做任何更复杂的事情之前启动并运行它。

```
public class Folders implements Serializable {

public Folders(String accountNumber, String folderName, String groupName, ArrayList<String> folderNames, ArrayList<String> groupNames) {
    this.accountNumber = accountNumber;
    this.folderName = folderName;
    this.groupName = groupName;
    this.folderNames = folderNames;
    this.groupNames = groupNames;
}

public String getAccountNumber() {
    return accountNumber;
}

public void setAccountNumber(String accountNumber) {
    this.accountNumber = accountNumber;
}

public String getFolderName() {
    return folderName;
}

public void setFolderName(String folderName) {
    this.folderName = folderName;
}

public ArrayList<String> getFolderNames() {
    return folderNames;
}

public void setFolderNames(ArrayList<String> folderNames) {
    this.folderNames = folderNames;
}

public String getGroupName() {
    return groupName;
}

public void setGroupName(String groupName) {
    this.groupName = groupName;
}

public ArrayList<String> getGroupNames() {
    return groupNames;
}

public void setGroupNames(ArrayList<String> groupNames) {
    this.groupNames = groupNames;
}

private String accountNumber;
private String folderName;
private String groupName;
private ArrayList<String> folderNames;
private ArrayList<String> groupNames;
} 
```

每次都得到相同的结果。

错误是：

```
SEVERE: Servlet.service() for servlet jsp threw exception org.apache.jasper.JasperException: /custom/folders.jsp(13,0) The value for the useBean class attribute com.mysite.Folders is invalid. 
```

我已经重新启动了 Tomcat 和服务器本身，但都没有帮助。对此问题的任何见解都非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T14:59:28.237

为了成为一个有效的 Java Bean，一个类必须有一个无参数的构造函数（它也可以有其他的构造函数，但*必须*至少有一个无参数的构造函数）。尝试将这样的构造函数添加到您的`Folders`类中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T18:35:54.567

我认为您必须将 JAR 包含到您的构建路径中，不是吗！？

# ios - 运行应用程序时出现“无法分配区域”错误

> ID：14942418
> 
> 赞同：0
> 
> 时间：2013-02-18T17:54:40.053
> 
> 标签：ios, xcode

我什至无法在我的 ipod Touch 5g 上运行该应用程序，它在 10 秒后崩溃并给出此错误：

```
2013-02-18 18:49:57.518 Splash-it[1340:907] Error: HTTP status code: 200
Splash-it(1340,0x453d000) malloc: *** mmap(size=516096) failed (error code=12)
*** error: can't allocate region
*** set a breakpoint in malloc_error_break to debug 
```

该应用程序是 ipad 和 iphone 应用程序，但在 ipad 上运行良好。

有时我也会收到此错误：

```
0x1c41e8:  str.w  r10, [r0, #72] 
```

这一切意味着什么？我在 Instruments 上运行我的应用程序，我可以看到叮咬在不断增长，但我不明白是什么原因造成的......

# r - 按月选择时间序列数据

> ID：14942419
> 
> 赞同：-1
> 
> 时间：2013-02-18T16:39:44.150
> 
> 标签：r, time-series, zoo

我有如下所示的时间序列数据：

```
data

          Jan      Feb      Mar      Apr      May      Jun      Jul      Aug      Sep      
1960 -10.3000  -7.1000   2.9000  18.0000  18.9000  29.5000  31.4000  28.0000  20.7000  
1961  -1.8000  -4.2000   4.0000  13.2000  22.0000  23.4000  24.0000  23.4000  17.3000  
1962 -12.1000  -3.1000  -0.1000   9.5000  22.9000  24.4000  26.4000  30.0000  21.2000  
1963  -2.9000  -5.9000   5.4000   9.3000  21.0000  25.3000  27.9000  24.6000  21.4000  
1964  -2.8000  -7.4000   2.2000   9.1000  17.6000  25.3000  25.1000  25.3000  18.0000  
1965  -9.5000   1.0000   6.3000  14.3000  18.3000  24.7000  28.4000  26.7000  21.9000  
1966  -5.4000  -2.7000   6.6000  14.3000  17.7000  24.2000  26.2000  25.3000  20.5000   
1967  -8.1000  -0.6000   3.0000  13.8000  23.2000  23.8000  27.6000  24.3000  20.4000 
```

我想按月绘制数据，例如，我想绘制 1960-1967 年 1 月的数据。我尝试使用`zoo`函数，但它不起作用。问题是即使在安装`zoo`包之后，该`zoo`功能似乎也无法被系统识别。错误消息如下所示：

```
> install.packages("zoo")
Installing package(s) into ‘C:/Users/skhanal2.RUSSELL/Documents/R/win-library/2.15’
(as ‘lib’ is unspecified)
trying URL 'http://streaming.stat.iastate.edu/CRAN/bin/windows/contrib/2.15/zoo_1.7-9.zip'
Content type 'application/zip' length 868277 bytes (847 Kb)
opened URL
downloaded 847 Kb
package ‘zoo’ successfully unpacked and MD5 sums checked
Warning: cannot remove prior installation of package ‘zoo’

The downloaded binary packages are in
        C:\Users\skhanal2.RUSSELL\AppData\Local\Temp\RtmpCSHWVD\downloaded_packages
> test<-zoo(data,by="month")
**Error: could not find function "zoo"** 
```

有没有人尝试按月绘制时间序列数据？如果是这样，如果有人可以帮助我找到解决方案，我将不胜感激。另外，任何人都可以提出`zoo`功能问题吗？我正在使用 R 版本 2.15.2，并且在 32 位机器上使用 Windows 7。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:14:25.860

安装包是不够的。您还必须使用命令将其加载到内存中`library()`，例如`library(zoo)`. 一旦你正确加载了动物园包......

```
 test<-zoo(data,order.by=sort(data$year))
 plot(test)
 #or
 plot(test[,c("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep")]) 
```

# php - 无法使用 PDO 插入十进制值

> ID：14942422
> 
> 赞同：0
> 
> 时间：2013-02-18T17:54:46.130
> 
> 标签：php, mysql, insert, pdo, decimal

我已经在网上搜索了几个小时并尝试了不同的方法，但我无法弄清楚为什么 PDO 不能插入其中一个值包含小数的任何行。

例如，如果输入到成本字段中的值没有十进制值，那么它可以正常工作。但是任何像小数一样的东西，它都会忽略整行。

200 件作品，甚至 200.00 件作品。但是像 39.99 这样的东西没有。

这是代码：

```
$invoice_id = $db->lastInsertId('id');

$item_name = $_POST['item_name'];
$item_qty = $_POST['item_qty'];
$item_cost = $_POST['item_cost'];
$item_vat = $_POST['item_vat'];

for($i = 0; $i < count($item_name); $i++) {
$item_query = $db->prepare("INSERT INTO hm_invoice_items(invoice, item, qty, amount, vat) VALUES(:invoice, :item, :qty, :amount, :vat)");
$item_query->bindParam(":invoice", $invoice_id);
$item_query->bindParam(":item", $item_name[$i]);
$item_query->bindParam(":qty", $item_qty[$i]);
$item_query->bindParam(":amount", $item_cost[$i]);
$item_query->bindParam(":vat", $item_vat[$i]);

if (!$item_query->execute())
    {
        die(showMessage("There has been a problem adding the invoice items.", "Error!"));
    }
} 
```

var_dump 告诉我插入查询正在接收值，但它不喜欢处理小数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T18:07:20.463

小数点分隔符可能存在问题。
在调试此类情况时，对e-ve-ry-thing**至关重要！** 您为什么不 var_dump 您的值以进行更仔细的检查？你为什么不只玩小数，没有 POST，没有其他值？`var_dump()`

题为“无法使用 PDO 插入十进制值”的问题应包含简短的可复制代码，其中包含向读者呈现的十进制值和结果。
以间接的方式判断对你没有帮助，尤其是不会给你带来陌生人的帮助。

“var_dump your values”表示每个可疑值，例如

```
var_dump($item_cost[$i]); 
```

如果没有输出，则在 循环内部-然后有空值，因此，难怪没有插入任何内容。

顺便说一句，您将显然十进制`item_cost`值绑定到显然整数`amount`字段。是错字吗？

但同样——某个可复制的证明代码在哪里包含一个插入查询、一个硬编码的十进制值和一个结果？呃——当然还有表定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-31T05:52:42.560

尝试这个？

```
$item_query->bindParam(":amount", floatval($item_cost[$i])); 
```

至少当我使用 PDO 处理 MySQL 十进制数据类型时，它对我有用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-01-01T22:16:23.057

使用以下内容显示发布到 PHP 脚本的**所有值的内容：**

```
print_r($_POST); 
```

# android - 以下代码中的 LayoutInflator.Inflate 方法有什么问题？

> ID：14942424
> 
> 赞同：0
> 
> 时间：2013-02-18T17:55:08.263
> 
> 标签：android, baseadapter

当语句`convertView = mInflater.inflate(R.layout.listitem_course, null);`在 BaseAdapter 的以下重写方法中执行时，应用程序将停止。我不知道为什么。

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    Log.i(StudyManagerDataSource.LOG_TAG,
            "CourseListAdapter -> getView called!");
    if (convertView == null) {
        Log.i(StudyManagerDataSource.LOG_TAG,
                "CourseListAdapter -> Convet view is null called 1!");
        convertView = mInflater.inflate(R.layout.listitem_course, null);

        mViewHolder = new ViewHolder();

        mViewHolder.courseNameTextView = (TextView) convertView
                .findViewById(R.id.courseNameTextView);

        convertView.setTag(mViewHolder);

    } else {
        mViewHolder = (ViewHolder) convertView.getTag();
    }

    Course mCourse = mCourses.get(position);

    mViewHolder.courseNameTextView.setText(mCourse.getCourseName());

    Log.i(StudyManagerDataSource.LOG_TAG,
            "CourseListAdapter -> getView executed!");

    return convertView;
} 
```

的代码`listitem_course`如下：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:orientation="vertical" >

<TextView
    android:id="@+id/courseNameTextView"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:textSize="20sp" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T18:01:01.027

您应该使用它来为您的项目充气：

```
mInflater.inflate(R.layout.listitem_course, parent, false); 
```

编辑：

这`parent`是您的膨胀视图将插入的 ViewGroup，在您的情况下，是 getView() 方法的父参数。

# coldfusion - 如何在coldfusion中将域添加到jsessionid cookie？

> ID：14942426
> 
> 赞同：1
> 
> 时间：2013-02-18T17:55:09.683
> 
> 标签：coldfusion

我们正在使用 ColdFusion 9.0.1，并且在域和子域之间共享 JSESSION cookie 时遇到问题。它们是两个不同的网站，我们不希望在它们之间共享任何会话信息。

如何向 jsessionid cookie 的域字段添加值？我见过一些人手动创建第二个 jsessionid cookie 的例子，但我宁愿只坚持一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T19:21:02.060

我认为默认情况下不会在 cookie 上设置域，这应该将其限制在同一个域中，也许有人编辑了您的 jrun-web.xml 文件并硬编码了一个值（查找 cookie-domain 标记）？有关详细信息，请参阅[http://livedocs.adobe.com/jrun/4/Programmers_Guide/techniques_servlet13.htm](http://livedocs.adobe.com/jrun/4/Programmers_Guide/techniques_servlet13.htm)。

# android - 通过 Whatsapp 或邮件以编程方式发送 VCard 文件/字符串

> ID：14942434
> 
> 赞同：2
> 
> 时间：2013-02-18T17:55:34.753
> 
> 标签：android, vcf-vcard, whatsapp

我正在尝试通过 Intents 选择应用程序（例如 Whatsapp）从字符串或文件发送 VCard。你有什么想法？

谢谢

编辑：

我试过这段代码。还有设置类型文本/纯文本。vcard 变量是一个带有 VCard 的字符串。

```
Intent intent = new Intent(android.content.Intent.ACTION_SEND);
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
intent.setType("text/x-vcard");
intent.putExtra(android.content.Intent.EXTRA_STREAM, vcard);
intent.setPackage(packageName); 
```

如果我将此发送到 Whatsapp，我必须像字符串一样发送电子名片，但不能像卡片一样识别

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:34:48.550

尝试使用`EXTRA_TEXT`而不是`EXTRA_STREAM`，因为`EXTRA_STREAM`应该指向一个文件。

另外，请删除`setPackage()`通话。你并不比你的用户更重要。因此，您的用户可以控制他们与哪些应用共享电子名片，而不是您。

除此之外，请联系 Whatsapp 以获取有关其应用程序的帮助。特别是考虑到您的`setPackage()`来电，Whatsapp 完全有可能根本不支持 vCard via `ACTION_SEND`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-20T07:12:16.803

尝试这个：

```
intentShareFile.setDataAndType(Uri.fromFile(vcfFile),"text/x-vcard");
intentShareFile.putExtra(Intent.EXTRA_STREAM, Uri.parse("file://"+vcfFile)); 
```

代替：

```
intent.setType("text/x-vcard"); 
```

# html - 中心图像和切断边缘 Twitter Bootstrap

> ID：14942435
> 
> 赞同：0
> 
> 时间：2013-02-18T17:55:36.830
> 
> 标签：html, css, user-interface, twitter-bootstrap

我正在使用 twitter bootstrap 创建一个网站。我在这里有一个预览：[预览](http://faithpointdallas.com/gg/)

我正在尝试制作全宽背景滑块。如果您以 1100 像素以上的分辨率进行预览，它看起来很好，我想要它。但是您会注意到，如果您缩小浏览器窗口，图像将保持左对齐，而不是在窗口中居中并切断边缘（这是我想要的）。我试图解决这个问题，但找不到解决方案。我会很感激任何想法。

这是我的滑块代码：

```
<!-- Slider Top -->
    <div id="myCarousel" class="carousel slide">
        <ol class="carousel-indicators">
            <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
            <li data-target="#myCarousel" data-slide-to="1"></li>
        </ol>
        <!-- Carousel items -->
        <div class="carousel-inner">
            <div class="active item"><img src="img/backgrounds/01.jpg" alt="graduation gift" /></div>
            <div class="item"><img src="img/backgrounds/02.jpg" alt="graduation gift" /></div>
        </div>
        <div class="clearfix"></div>
    </div>
    <!-- End Slider Top -->

    <!-- Slider Overlay -->
    <div class="container">
        <div class="row">
            <div class="span4 sliderFeature">
                <h1 class="whiteShadow">Primary Heading</h1>
                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
                <div class="signUp">
                    <h4>Get Started With GraduationGifts.com</h4>
                    <a href="#" class="btn btn-primary full-button">Start a Registry</a><br />
                    <a href="#" class="btn btn-primary full-button">Find a Registry</a>
                    <p class="smallText">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
                </div>
            </div>
        </div>
    </div>
    <!-- End Slider Overlay --> 
```

这是我的CSS：

```
 /* Slider */
.carousel {
    position:absolute !important;
}

div.signUp {
    background:url(../img/trans-white.png) repeat;
    border:1px solid #c5c5c5;
    padding:20px;
    border-radius:6px;
    -moz-border-radius:6px;
    -webkit-border-radius:6px;
}

.full-button {
    width:92%;
    text-align:center;
    padding:10px 12px;
    margin-bottom:12px;
}

p.smallText {
    font-size:11px;
}

.sliderFeature {
    padding-top:20px;
    width:50%;
}

div#myCarousel {
    border-bottom:4px solid #164466;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-16T20:06:44.730

您可以在以下位置找到解决方案：[center oversized image in div](https://stackoverflow.com/questions/14562457/center-oversized-image-in-div)其中 Guffa 提供了一个 jsfiddle。

它帮助我设置了我的。

要在引导程序中使用，请创建一个全宽容器。将提供的代码中的选择器更改为：全宽容器而不是 .imageContainer，.carousel 而不是 .imageCenterer，以及 .carousel .item img 而不是 .imageCenterer img。

# gcc - 使用 ARM 循环计数后处理“objdump --disassemble”

> ID：14942436
> 
> 赞同：2
> 
> 时间：2013-02-18T17:55:42.663
> 
> 标签：gcc, open-source, arm, objdump

是否有可用于对某些`objdump --disassemble`输出进行后处理以使用周期计数进行注释的脚本？特别是对于 ARM 家族。 ~~大多数情况下，这只是与计数的表查找的模式匹配。我想`+5M`可能需要像五个内存周期这样的注释。~~ Perl、python、bash`C`等都很好。我认为这通常可以完成，但我对具有*正交*指令集的**ARM感兴趣。**这是[68HC11](http://tech.groups.yahoo.com/group/gnu-m68hc11/message/694)上做同样事情的线程。该脚本需要一个 CPU**模型**选项来选择适当的循环计数；我认为这些计数已经存在于机器描述中。***`gcc`***

 ***我不认为有一个`objdump`开关，但 RTFM 会很棒。

**编辑：**为了澄清，假设从缓存中执行代码时的最佳情况内存子系统是可以的。目标不是根据某些正在运行的机器进行 100% 准确的循环计数。有可能得到一个合理的估计，否则编译器设计是不可能的。

正如[DWelch](https://stackoverflow.com/users/16007/dwelch)指出的那样，使用深度流水线架构（例如最近的 Cortex 芯片）无法实现简单的运行总计。`objdump`后处理必须查看周围的操作码。gcc 插件更有可能实现这一点，因为那是新的（4.5+），我不认为这样的事情存在。ARM926 的脚本当然是可能的，而且相当简单。

内存延迟无关紧要。内存控制器就像另一个`CPU`。它在 CPU 做算术等时做它的业务。一个好的/调整好的算法将使内存访问与计算[并行。](http://en.wikipedia.org/wiki/Amdahl%27s_law)通过计算加载/存储和周期，您可以确定当您使用计时器主动分析时完成了多少并行度。由于寄存器之间的互锁，流水线很重要，但即使在现代 ARM 处理器上也可以可靠地计算和使用[基本块的周期计数；](http://en.wikipedia.org/wiki/Basic_block)这对于一个简单的脚本来说太复杂了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T19:22:19.173

周期计数不能通过仅查看现代高端 ARM 上的指令来评估。有很多运行时状态会影响一条指令在现实世界中的退休率。它需要的数据是否存在于缓存中？该指令是否对先前的指令结果有任何依赖性？如果是这样的话，转发单元消除了哪些延迟？加载/存储缓冲区有多满？触动了怎样的记忆映射？这条指令需要的处理器流水线有多满？流中是否有同步指令？推测是否提出了一些它所依赖的数据？寄存器重命名器的状态是什么？条件指令是否填充了管道，或者解码器是否足够聪明，可以完全跳过它们？核心时钟与总线和内存时钟之间的比率是多少？分支预测表的大小是多少？

如果没有完整的处理器模拟，您所能得到的只是猜测。这些数字对你是否有意义取决于你试图用它们完成什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T20:26:35.150

有一个在线工具[可以估计 Cortex-A8 上的循环计数](http://pulsar.webshaker.net/ccc/index.php)。然而，这个 CPU 已经很老了，针对它优化的程序在较新的 CPU 上可能不是最理想的。

AFAIK ARM 还在其 RVDS 软件中提供了 Cortex-A9 和 Cortex-A5[周期精确仿真器](http://www.arm.com/products/tools/models/fast-models/index.php)，但价格相当昂贵。***

# android - 线性布局 XML 错误

> ID：14942437
> 
> 赞同：0
> 
> 时间：2013-02-18T17:55:52.837
> 
> 标签：android, xml

嗨，我正在网上做一个 mapOverLay 教程，我的 xml 中出现错误。在 LinearLayout 标记处，我收到错误“为标记 LinearLayout 找到了意外的命名空间前缀 xmlns”，我尝试将其删除，但这没有用。任何想法可能是什么问题？

```
 <?xml version="1.0" encoding="utf-8"?>
    <FrameLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

        <view android:id="@+id/mv"
            class="com.google.android.maps.MapView"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="1" 
            android:clickable="true"
            android:apiKey="07WVUg-srWUY6iEC2qTEiuT1mKYkoo6EVPK74pA"
            />

            <!-- Must replace apiKey above with appropriate one for your development machine  -->

         <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:orientation="horizontal"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" 
            android:padding="0px"           
            >

        <Button android:id="@+id/doOverlay"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="30px"
            android:layout_weight="1.0" 
            android:textSize="12sp"   
            android:text="@string/overlay_label" />

        <Button android:id="@+id/doAccess"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1.0"
            android:textSize="12sp" 
            android:text="@string/access_label" />

        <Button android:id="@+id/doRoute"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginRight="30px"
            android:layout_weight="1.0"
            android:textSize="12sp" 
            android:text="@string/route_label" />

        </LinearLayout>

    </FrameLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T18:01:42.173

在

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
                android:orientation="horizontal"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" 
                android:padding="0px"           
                > 
```

消除`xmlns:android="http://schemas.android.com/apk/res/android`

# java - 使用 apache poi 读取 Excel 文件并将它们存储到数组中

> ID：14942438
> 
> 赞同：0
> 
> 时间：2013-02-18T17:37:55.453
> 
> 标签：java, apache-poi

我是编程世界的新手。好吧，我正在尝试使用 apache-poi 库读取一个 excel 文件（5 行，5 列）。我实际上有两个相同问题的实现。在第一个代码片段中，我只是读取了我的 excel 文件并将它们打印到控制台中。

但是现在我试图将读取的 excel 数据保存到一个数组中。所以我想在动态获取excel行和列大小后设置数组大小。但令我惊讶的是，当我执行我的第二个代码片段时，即使我的输入 excel 文件中只有 5 行、5 列，“while（cellIterator.hasNext（）”似乎也在不断迭代。请指导我哪里出错了.

感谢 Hussain 代码片段 1（按预期工作）

```
public static void main(String args[]) {
    readFile(ConfigReader.readConfigValues("XLS-path"),
            ConfigReader.readConfigValues("SheetName"));
}

public static void readFile(String filePath, String sheetName) {

    try {

        FileInputStream file = new FileInputStream(new File(filePath));

        // Get the workbook instance for XLS file
        HSSFWorkbook workbook = new HSSFWorkbook(file);

        // Get first sheet from the workbook
        HSSFSheet sheet = workbook.getSheet(sheetName);

        // Iterate through each rows from first sheet
        Iterator<Row> rowIterator = sheet.iterator();
        while (rowIterator.hasNext()) {
            Row row = rowIterator.next();

            // For each row, iterate through each columns
            Iterator<Cell> cellIterator = row.cellIterator();
            while (cellIterator.hasNext()) {

                Cell cell = cellIterator.next();

                switch (cell.getCellType()) {
                case Cell.CELL_TYPE_BOOLEAN:
                    System.out.print(cell.getBooleanCellValue() + "\t\t");
                    break;
                case Cell.CELL_TYPE_NUMERIC:
                    System.out.print(cell.getNumericCellValue() + "\t\t");
                    break;
                case Cell.CELL_TYPE_STRING:
                    System.out.print(cell.getStringCellValue() + "\t\t");
                    break;
                }
            }
            System.out.println("");
        }
        file.close();
        FileOutputStream out = new FileOutputStream(new java.io.File(
                "G:\\test1.xls"));
        workbook.write(out);
        out.close();

    } catch (FileNotFoundException e1) {
        e1.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

代码片段 2（未按预期工作）

```
public static void main(String args[]) {
    readFile(ConfigReader.readConfigValues("XLS-path"),
            ConfigReader.readConfigValues("SheetName"));
}

public static void readFile(String filePath, String sheetName) {

    try {

        FileInputStream file = new FileInputStream(new File(filePath));

        // Get the workbook instance for XLS file
        HSSFWorkbook workbook = new HSSFWorkbook(file);

        // Get first sheet from the workbook
        HSSFSheet sheet = workbook.getSheet(sheetName);

        // Iterate through each rows from first sheet
        Iterator<Row> rowIterator = sheet.iterator();
        String[][] excelArray = null;
        excelArray = new String[getRowCount(rowIterator, excelArray)][];

        file.close();
        FileOutputStream out = new FileOutputStream(new java.io.File(
                "G:\\test1.xls"));
        workbook.write(out);
        out.close();

    } catch (FileNotFoundException e1) {
        e1.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
}

public static int getRowCount(Iterator<Row> rowIterator,
        String[][] excelArray) {
    int sizeArrayRow = 0;
    while (rowIterator.hasNext()) {
        Row row = rowIterator.next();
        excelArray[sizeArrayRow] = new String[getColCount(row)];
        sizeArrayRow++;

    }

    return sizeArrayRow;
}

public static int getColCount(Row row) {

    int sizeArrayCol = 0;
    // For each row, iterate through each columns
    Iterator<Cell> cellIterator = row.cellIterator();
    while (cellIterator.hasNext()) {
        sizeArrayCol++;
    }
    return sizeArrayCol;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T18:28:49.387

要了解 Java 迭代器是如何工作的，请阅读：[http](http://www.tutorialspoint.com/java/java_using_iterator.htm) : //www.tutorialspoint.com/java/java_using_iterator.htm 特别注意 hasNext() 和 next() 之间的区别

您正在检查：

```
while (cellIterator.hasNext()) 
```

但是您永远不会从该迭代器中“读取”任何内容，因此它会保持在当前位置并继续为 hasNext 返回 true。您可以通过以下方式推动它：

```
cellIterator.next(); 
```

另外，我认为代码混乱且难以理解。考虑使用 List 而不是 String 数组。这样，您可以在事先不知道其大小的情况下填充它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-04T13:10:32.667

```
 public class ExcelToArrayConverter {
        public String[] excelvalue(String columnWanted,int sheet_no){
            int i=0;
            String[] column_content_array =new String[140];
            try{
                int instindicator=-1;       
                InputStream fileIn = this.getClass().getClassLoader().getResourceAsStream("db.xls");
                POIFSFileSystem fs = new POIFSFileSystem(fileIn);
                HSSFWorkbook filename = new HSSFWorkbook(fs);
                HSSFSheet sheet = filename.getSheetAt(sheet_no);                                                // in the row 0 (which is first row of a work sheet)                                                    // search for column index containing string "Inst_Code"
                Integer columnNo = null;
                Integer rowNo = null;
                List<Cell> cells = new ArrayList<Cell>();
                Row firstRow = sheet.getRow(0);
                for (Cell cell : firstRow) {
                    if (cell.getStringCellValue().equals(columnWanted)) {
                        columnNo = cell.getColumnIndex();
                        rowNo=cell.getRowIndex();
                    }
                }
                if (columnNo != null) {
                    for (Row row : sheet) {
                        Cell c = row.getCell(columnNo);
                        String cell_value=""+c;
                        cell_value=cell_value.trim();
                        try{
                            if((!cell_value.equals(""))&&(!cell_value.equals("null"))&&(!cell_value.equals(columnWanted))){ 
                                column_content_array[i]=cell_value;
                                i++;
                            }}
                        catch(Exception e){
                        }

                    }
                    return column_content_array;
                }}
            catch(Exception ex){
                return column_content_array;
            }
            return column_content_array;

        }}

 This method will convert any specific column of a specific sheet to an array. 
```

# sql-server - 尝试通过 SQL 查询从组中查找最小值

> ID：14942441
> 
> 赞同：0
> 
> 时间：2013-02-18T17:56:09.600
> 
> 标签：sql-server, sql-server-2008-r2

我非常接近这个查询（SQL Server 2008 R2）：

```
Select selectedicao, selectedyear, selectedmonth
From weatherdaily
Where Selectedyear = 1990 and selectedmonth = 1
Group By selectedicao, selectedyear, selectedmonth 
```

输出：

```
selectedicao    selectedyear    selectedmonth
-------------------------------------------------
KPKB            1990            1
KORD            1990            1
KFWA            1990            1
KCDW            1990            1
KFDY            1990            1
KLCK            1990            1 
```

我只需要在另一个名为`kfactor`.

该列对于每个组都有数百个值，我无法在上述查询中为每个组列出一个值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T17:59:51.153

我认为您只需要添加该`max()`功能。

```
Select selectedicao, selectedyear, selectedmonth, max(kfactor) as max_kfactor
From weatherdaily
Where Selectedyear = 1990 and selectedmonth = 1
Group By selectedicao, selectedyear, selectedmonth 
```

# java - Java 博士帮助输入的方程不起作用

> ID：14942443
> 
> 赞同：0
> 
> 时间：2013-02-18T17:56:15.777
> 
> 标签：java

//在下面的代码行中，要求用户输入长度以确定正二十面体的体积，但是，当输入时，程序总是输出 0.0 作为体积的答案？？？

```
import java.io.*; //allows I/o statements

class VolumeIcosahedron //creating the 'volumeIcosahedron' class
{
  //allows strings with exceptions to IO = input/output
  public static void main (String[] args) throws IOException
  {
    BufferedReader myInput = new BufferedReader(
                   new InputStreamReader (System.in)); //system input/ output

    String stringNum; // the number string
    double V; // integer with decimals volume
    int L; // integer required length

    //System output
    System.out.println("Hello, what is the required length");
    stringNum  = myInput.readLine();

    L = Integer.parseInt(stringNum);
    V =  5/12 *(3 + Math.sqrt(5))*(L*L*L);                      

    System.out.println("The volume of the regular Icosahedron is " + V);  
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:59:27.320

因为`5/12`整数等于`0`所以它总是导致`0`。

尝试使用`5.0`强制除法而不涉及整数除法。

```
V = 5.0/12 *(3.0 + Math.sqrt(5))*(L*L*L); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T18:00:10.717

我认为这是违规行：

```
V          =  5/12 *(3 + Math.sqrt(5))*(L*L*L); 
```

5/12 返回一个`int`（整数），它总是被截断为 0，因此 0 * 任何东西都将返回 0。

将其更改为此，使用字母 d 表示这些数字是 double 类型：

```
V          =  5d/12d *(3 + Math.sqrt(5))*(L*L*L); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T18:10:09.650

原因是您在计算中使用整数。对于整数，您应该将除法视为欧几里得运算，即 a = bq + r。所以在你的程序中，5/12 总是返回 0 (5 = 0 * 12 + 5)。

如果您将行更改为这样（将每个整数替换为双精度）：

```
V = 5.D/12.D *(3.D + Math.sqrt(5.D))*(L*L*L); 
```

那么结果就会不一样。

# javascript - 更改 Aloha-Editor 的语言

> ID：14942447
> 
> 赞同：0
> 
> 时间：2013-02-18T17:56:26.407
> 
> 标签：javascript, html, internationalization, aloha-editor

我想在我的一个项目中使用[Aloha-Editor](http://aloha-editor.org)。默认项目语言是德语，但我找不到任何方法来更改编辑器的语言。（搜索了网络和他们网站的指南。）

我唯一发现的是在为编辑器开发插件时如何使用 i18n，而不是如何在当前稳定版本中设置语言。

这就是我所做的：

```
<!-- load the jQuery and require.js libraries -->
<script type="text/javascript" src="http://cdn.aloha-editor.org/latest/lib/require.js"></script>
<script type="text/javascript" src="http://cdn.aloha-editor.org/latest/lib/vendor/jquery-1.7.2.js"></script>

<!-- load the Aloha Editor core and some plugins -->
<script src="http://cdn.aloha-editor.org/latest/lib/aloha.js"
        data-aloha-plugins="common/ui,
                            common/format,
                            common/list,
                            common/link,
                            common/highlighteditables">
</script>

<!-- load the Aloha Editor CSS styles -->
<link href="http://cdn.aloha-editor.org/latest/css/aloha.css" rel="stylesheet" type="text/css" />

<!-- make all elements with class="editable" editable with Aloha Editor -->
<script type="text/javascript">
    Aloha.ready( function() {
        var $ = Aloha.jQuery;
        $('.editable').aloha();
    });
</script> 
```

有谁知道我需要添加或更改什么才能获得其他语言的编辑器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T08:34:29.270

起初我在[Aloha 指南中找到了一些关于本地化](http://www.xebia.com/sites/all/libraries/aloha/doc/guides/using_aloha.html#localization)的内容，但这样做对我不起作用。

然后我查看了演示页面并找到了这个可行的解决方案。我必须在包含之前添加以下 javascript`require.js`和`aloha.js`

```
<script language="javascript">
    Aloha = window.Aloha || {};
    Aloha.settings = {
        locale: 'de'
    };
</script> 
```

然后 Aloha 脚本会自动加载所选语言的 i18n 文件。我使用了本地版本的 aloha 并没有使用来自`http://cdn.aloha-editor.org/latest`. 我的版本是 0.22.7。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T18:03:49.720

[您可以在此处](http://gengo.com/string/p/aloha-editor-1/)下载其他语言[帮助文件](http://gengo.com/string/help/importing_and_downloading/) 中提供了更多信息 您可以随时在项目中通过 Admin->Languages 更改主语言。

希望这可以帮助

雷切尔

# ios - iOS：将 .jpg 图像作为 base64 发送到 tcp 服务器

> ID：14942449
> 
> 赞同：0
> 
> 时间：2013-02-18T17:56:30.403
> 
> 标签：ios, objective-c, xcode, nsstream, nsoutputstream

这个要杀了我。除了这个愚蠢的问题外，我已经很接近完成这项工作了。而且我不确定我是否能够充分描述这个问题，但我会尝试。

我的企业应用程序使用 iPhone 相机拍摄我们的现场人员购买的收据。我使用了一个非常酷的 API 将 jpeg 数据转换为 base 64 ( [https://github.com/nicklockwood/Base64](https://github.com/nicklockwood/Base64) ) 以通过 TCP 连接发送到 VB 2010 服务器，该服务器将其读取为文本字符串并将其转换回一个二进制文件。

base64文件创建的时候，先保存到手机磁盘，因为可能图片比较多。然后当准备好发送时，该进程将读取每个 base64 文件并一次发送一个。

base64 函数创建的文本字符串非常大，起初它只发送大约 131,000 个字节，这很容易转换回二进制，但会渲染大约 1/4 到 1/3 的图像。我只是认为数据被截断了，因为该应用程序试图超越自己。

然后我找到了一个很好的片段，它向我展示了如何使用 NSStreamEventHasSpaceAvailable 事件将 base64 字符串拆分为几个块并按顺序发送它们。（[http://www.ios-developer.net/iphone-ipad-programmer/development/tcpip/tcp-client](http://www.ios-developer.net/iphone-ipad-programmer/development/tcpip/tcp-client)）就发送完整文件而言，它的效果很好 - 也就是说，服务器接收到的结果文件是正确的大小，与发送前的base64文件相同。

这里的问题是，在某些时候，服务器接收到的文件已损坏，因为它似乎从文件的开头重新开始......换句话说，数据开始自我重复。

奇怪的是，重复部分每次都从接收文件中完全相同的位置开始：位置 131016。它不会在文件末尾开始重复，它只是在该点中断文件并跳回到开始。碰巧这是在我开始使用 HasSpaceAvailable 事件之前发送的文件的大小。我无法弄清楚值 131,016 的意义是什么。某处的最大缓冲区大小？

使用各种 NSLogs 和断点，我几乎可以确定数据以这种方式离开手机，而不是被服务器打乱。我还写了一个 NSMailComposeViewer 方法，该方法会将 base64 文件作为附件通过电子邮件发送给我，并且它完美地通过了。

以下是从磁盘读取文件并发送到服务器的代码：

```
 int i;
    for (i = 0; i < [imageList count];i++){
    NSArray *documentsPath = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory= [documentsPath objectAtIndex:0]; //Get the docs directory
    NSString *imagePath = [documentsDirectory stringByAppendingPathComponent:imageFileName];
    imageFileName = [imageList objectAtIndex:i] ;
    NSLog(@"Image index: %d - image file name: %@",i,imageFileName);

    BOOL fileExists = [[NSFileManager defaultManager] fileExistsAtPath:imagePath];
    if(fileExists == YES){
        NSString *imageReceipt = [NSString stringWithContentsOfFile:imagePath encoding:NSASCIIStringEncoding error:nil];
        int32_t imageStringLen = [imageReceipt length];
        NSString *imageSize = [NSString stringWithFormat: @"%d",imageStringLen];
        NSString *currentImage = [NSString stringWithFormat:@"image,%@,%@,%@",imageFileName,imageSize,imageReceipt]; //creates a CSV string with a header string with the filename and file size, and then appends the image data as the final comma-separated string.
        data = [[NSMutableData alloc] initWithData:[currentImage dataUsingEncoding:NSASCIIStringEncoding]];

        [outputStream write:[data bytes] maxLength:[data length]]; 
```

然后是使用 HasSpaceAvailable 事件的代码：

```
 case NSStreamEventHasSpaceAvailable:
        if (data != nil)
        {
            //Send rest of the packet
            int ActualOutputBytes = [outputStream write:[data bytes] maxLength:[data length]];
            int totalLength = [data length];

            if (ActualOutputBytes >= totalLength)
            {
                //It was all sent
                data = nil;

            }
            else
            {
                //Only partially sent
                [data replaceBytesInRange:NSMakeRange(0, ActualOutputBytes) withBytes:NULL length:0];       //Remove sent bytes from the start
            }
        }

        break; 
```

（我特别喜欢这段代码，因为它允许在屏幕上放置 ProgressView 控件。）

网络流事件处理程序代码位于根视图控制器中，但 base64 中的图像数据是从另一个视图控制器发送的。我的直觉告诉我，这不是问题，因为到目前为止它工作得很好，但是字符串要短得多。

现在，还有另一个可能相关的问题——而且很可能是相关的。除非我关闭应用程序，否则我似乎无法完成数据传输。我猜，在连接关闭之前，服务器不会看到它。我曾尝试将 [outputStream close] 放在代码中的各个位置，但无济于事。我还尝试使用换行符或回车符或两者兼有来终止 base64 字符串。

服务器被编程为在看到正确的字节数时保存文件，但在应用程序关闭之前不会发生这种情况。通过在服务器上使用 WireShark，我知道正在接收一些数据，但正如我所说，其余数据在应用程序关闭之前不会到达。

我怀疑最后一部分（完成转移）是问题，但对于我的生活，我在网上找不到任何解决这个问题的东西，除非我太无知，不知道要使用什么搜索词......这很有可能。

我希望我已经提供了足够的信息。谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:10:10.587

**编辑**

问题的解决方案似乎与原始答案中的怀疑不同。通过评论中的讨论，QP 已经找到了解决方案。这是一个摘要：

通过原始 TCP 套接字传输数据需要彻底处理入队逻辑，而 QP 没有正确考虑到这一点。我建议使用套接字库`CocoaAsyncSocket`来处理这部分任务，进而引导 QP 找到一个可行的解决方案。

**原答案：**

我猜`NSString`是达不到任务的。它是用来固定的，嗯，弦。

尝试直接将文件读入 a`NSData`并将其作为二进制文件发送。（它到底是 ascii，不是吗？）此外，这将比您当前的代码更加资源友好。

# wordpress - .htpasswd 在 Wordpress 安装的子文件夹中

> ID：14942450
> 
> 赞同：0
> 
> 时间：2013-02-18T17:56:28.850
> 
> 标签：wordpress, .htaccess

我在我的主文件夹的根目录安装了一个 wordpress，并且我有一个子文件夹，我正在尝试使用基于 .htaccess 的登录来保护它。在根目录中有一个带有以下规则的 .htaccess：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>
# END WordPress 
```

然后在我的子文件夹中我有这个 .htaccess

```
<IfModule mod_rewrite.c>
RewriteEngine off
</IfModule>
AuthName "MySQLDumper"
AuthType Basic
AuthUserFile "/home/freegame/public_html/msdump/.htpasswd"
require valid-user 
```

激活 Wordpress 规则后，访问子文件夹会导致 404 错误。当我删除 wordpress 规则时，它工作正常。关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T16:04:33.880

您的方法仅适用于文件。为了保护目录，您必须执行一个附加步骤。修改站点根目录下的 htaccess 文件，在`#Begin WordPress comment`.

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_URI} ^/(failed_auth\.html).*$ [NC]
RewriteRule . - [L]
</IfModule> 
```

当您尝试访问受密码保护的目录时，这将阻止 WordPress 提供 404 错误代码。相反，它会给出 403（需要授权）并提示您输入有效的用户名/密码来访问它。

[资料来源：Dreamhost](http://wiki.dreamhost.com/Password-protecting_directories#Password_Protecting_Directories_within_WordPress)

# sql-server-2008-r2 - Sql server 鼠标光标指针不会自动到行尾

> ID：14942453
> 
> 赞同：1
> 
> 时间：2013-02-18T17:56:42.960
> 
> 标签：sql-server-2008-r2, usability

这是我面临的一个简单的可用性问题。不知何故，我的版本的设置发生了变化，当我单击查询窗口时，鼠标光标不会自动转到行尾。相反，它仍然存在于我点击的任何地方。

我已经检查了工具中的选项，但我找不到可以重置此功能的位置。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T05:38:45.923

您已在设置中启用了[虚拟空间](http://blogs.msdn.com/b/zainnab/archive/2010/02/28/understanding-virtual-space-vstipedit0023.aspx)选项。

在菜单栏上，转到*Tools* -> *Options*，然后选择*Text Editor* -> *All Languages*并取消选中该`Enable virtual space`选项。

看看这个截图：

![虚拟空间](../Images/72a6cb7e8f11c20b5aff572723eb32af.png)

# android - SherlockActionBar：导出签名的 apk，然后 Eclipse 崩溃 :(

> ID：14942456
> 
> 赞同：7
> 
> 时间：2013-02-18T17:56:51.160
> 
> 标签：android, eclipse, ubuntu, actionbarsherlock

今天我完成了我的新安卓应用程序的测试..

我使用 SherlockActionBar。

导入为 /library

我的操作系统是 Ubuntu 12.10 64bit ..

我可以从 Eclipse 构建 .apk，并且该应用程序在我的 Android 2.3.3（移动设备）和我的 Android 4.0（平板电脑）上运行。

但是当我尝试: 时`Android tools -> Export signed application package`，Eclipse 崩溃:(

我收到此错误：（在导出/崩溃之前）

```
Invalid ZIP archive: /home/voidcode/Ubuntu One/workspace/JakeWharton-ActionBarSherlock-e5c2d1c/library/bin/library.jar 
```

这是崩溃后我在 Eclipse 文件夹中找到 的**错误日志：http:** [//paste.ubuntu.com/1677938/](http://paste.ubuntu.com/1677938/)

我的**AndroidManifest.xml**看起来像这样：

> ```
> <uses-sdk
>     android:minSdkVersion="4"
>     android:targetSdkVersion="15" /> 
> ```

我的**project.properties**看起来像这样：

```
# This file is automatically generated by Android Tools.
# Do not modify this file -- YOUR CHANGES WILL BE ERASED!
#
# This file must be checked in Version Control Systems.
#
# To customize properties used by the Ant build system edit
# "ant.properties", and override values to adapt the script to your
# project structure.
#
# To enable ProGuard to shrink and obfuscate your code, uncomment this (available properties: sdk.dir, user.home):
#proguard.config=${sdk.dir}/tools/proguard/proguard-android.txt:proguard-project.txt

# Project target.
target=android-14
android.library.reference.1=../JakeWharton-ActionBarSherlock-e5c2d1c/library 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-18T20:38:47.483

您可能需要检查项目中的几件事。

*   您的*project.properties*文件以 Android API14 为目标，但您的清单以 API15 为目标。这些应该是一样的
*   Sherlock ActionBar 仅适用于 API7+。这实际上可能是您的问题。尝试更改`android:minSdkVersion="4"`为`android:minSdkVersion="7"`
    *   显然，这在 Android 2.1 之前不允许任何内容，但您仍将针对近 100% 的生态系统。

如果这不起作用，我也遇到了很多麻烦，并且导出包的解决方案是相当随机的。

我的一般解决方案是禁用自动构建，清理它，然后手动构建库项目。

例如

*   在**项目**菜单下
*   取消选中**自动构建**
*   然后**项目**>**清理...**
*   在此窗口中，取消选中**立即开始构建**
*   选择**清理所有项目**，然后单击**确定**
*   选择您的*Sherlock ActionBar*项目
*   执行**项目**>**构建项目**（不是全部构建）。
    *   这将只构建这个库
    *   对您包含的任何库项目执行此操作。
*   单击现在，将您的项目导出为签名的 APK。

这通常对我有用，并停止了许多无法解释的出口问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T11:01:26.847

对于使用 Mac 的任何人，请检查以下问题：[Exporting APK from eclipse (ADT) quietly crash](https://stackoverflow.com/questions/11752270/exporting-apk-from-eclipse-adt-silently-crashes)

基本上，禁用*自动构建*

# silverlight - Silverlight 中有哪些库可用于在所有平台上进行快速精灵渲染

> ID：14942457
> 
> 赞同：1
> 
> 时间：2013-02-18T17:56:55.387
> 
> 标签：silverlight, graphics, sprite, silverlight-5.0, game-engine

问题是如果存在用于渲染游戏中快速精灵图形的库（如果有的话）。这将包括渲染平铺背景（像素精确定位和大小）、绘制字符精灵（透明键或 alpha 混合）以及理想的旋转。

显而易见的答案是 XNA，它是 Silverlight 第 5 版的一部分，但实际上并非所有平台都支持它——显然它只适用于 Windows 而不是 Mac，因为它利用了 DirectX。跨平台 Silverlight 游戏有哪些 XNA 替代品？

# uitableview - UITableView iOS6底部的UIRefreshControl？

> ID：14942460
> 
> 赞同：30
> 
> 时间：2013-02-18T17:57:07.217
> 
> 标签：uitableview, ios6, uirefreshcontrol

是否可以`UIRefreshControl`在底部添加`UITableView`？我会用它来加载更多数据。请问，有什么建议吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-30T13:29:15.167

我相信这个问题不会有任何简单的解决方案。可能有人可以编写一个单独的库来实现这种行为，而且一旦你在 tableview 中缓存数据，它会导致更多的复杂性。

但是让我们分解问题，这可能会帮助您实现您想要的。我使用以下代码在应用程序中添加更多行：

```
- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
{
    float endScrolling = scrollView.contentOffset.y + scrollView.frame.size.height;
    if (endScrolling >= scrollView.contentSize.height)
    {
        NSLog(@"Scroll End Called");
        [self fetchMoreEntries];
    }
} 
```

或者你可以做这样的事情：

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    if ((scrollView.contentOffset.y + scrollView.frame.size.height) >= scrollView.contentSize.height)
    {
        if (!self.isMoreData)
        {
            self.MoreData = YES;

            // call some method that handles more rows
        }
    }
} 
```

您一定已经在我上面描述的许多问题中看到过这样的方法，当然不是您所要求的。但是您可以做的是，在上述代码加载更多数据的过程中，您可以添加一个子视图并显示一些类似于 UIRefreshControl 提供的图像。在子视图中添加图像以显示为进度，直到执行上述代码。回家这有帮助。

顺便说一句，我建议你不要这样做，因为它只会浪费你的时间来制作如此小的东西，除非你只是为了学习目的而这样做。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2017-04-11T10:39:00.390

以下答案在 Xcode 8 和 Swift 3 中。

先声明

```
var spinner = UIActivityIndicatorView() 
```

比在`viewDidLoad`方法中编写以下代码：

```
spinner = UIActivityIndicatorView(activityIndicatorStyle: .whiteLarge)
spinner.stopAnimating()
spinner.hidesWhenStopped = true
spinner.frame = CGRect(x: 0, y: 0, width: UIScreen.main.bounds.size.width, height: 60)
tableView.tableFooterView = spinner 
```

现在终于有了`override`以下`scrollViewDidEndDragging`委托方法：

```
override func scrollViewDidEndDragging(_ scrollView: UIScrollView, willDecelerate decelerate: Bool) {
        let offset = scrollView.contentOffset
        let bounds = scrollView.bounds
        let size = scrollView.contentSize
        let inset = scrollView.contentInset

        let y = offset.y + bounds.size.height - inset.bottom
        let h = size.height

        let reloadDistance = CGFloat(30.0)
        if y > h + reloadDistance {
            print("fetch more data")
            spinner.startAnimating()
        }
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-04-05T19:55:43.107

您可以使用 UIView 在底部自定义您的 refreshControl。创建 UIView 并将其作为 footerView 添加到 UITableView。

```
UIView* footerView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 50)];

[footerView setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"refreshImage.png"]]];

tableView.tableFooterView = footerView; 
```

把它藏起来：`tableView.tableFooterView.hidden = YES;`

实现 UIScrollView 委托 -

```
(void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    if ((scrollView.contentOffset.y + scrollView.frame.size.height) >= scrollView.contentSize.height)
    {
             tableView.tableFooterView.hidden = NO;
            // call method to add data to tableView
    }

} 
```

在将数据添加到 tableView 之前保存当前偏移量`CGPoint offset = tableView.contentOffset;`

调用 reloadData 然后将之前保存的偏移设置回 tableView`[tableView setContentOffset:offset animated:NO];`

这样您就可以感受到底部添加的新数据。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-01-20T19:37:42.933

我最近遇到了同样的问题，并为 UIScrollView 类编写了一个类别。这是[CCBottomRefreshControl](https://github.com/vlasov/CCBottomRefreshControl)。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-03-30T22:04:42.523

实际上，免费的 Sensible TableView 框架确实提供了开箱即用的功能。您指定批号，它将自动获取数据，将最后一个单元格显示为“加载更多”单元格。单击该单元格后，它将自动加载下一批，依此类推。值得一看。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-05-19T11:56:04.493

对于 UITableView 我建议采用以下方法：

```
-(void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath
{    
    // if this is the last row that we have in local data
    // and we didn't reach the total count of rows from the server side
    if (count == indexPath.row+1 && count < total)
    {
        // .. fetch more rows and reload table when data comes
    }
} 
```

我没有故意使用滚动视图方法，因为滚动视图很慢。滚动视图发生滚动，我们请求更多数据，刷新更多行，滚动视图尚未完成滚动，它仍在减速并导致获取更多数据的问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-12-13T11:27:45.357

这个**Swift**库在`UITableview`.

[https://github.com/marwendoukh/PullUpToRefresh-iOS](https://github.com/marwendoukh/PullUpToRefresh-iOS)

I hope this help you.

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2018-11-28T07:43:33.550

在 cocoapods 中使用 CCBottomRefreshControl，

因为它是语言目标。您可以将 pod 文件添加到您的 swift 项目中然后运行它，我已经完成了，对我来说没有问题

希望能帮助到你。

# python - Python DB-API 如何将 json 格式的数据读取到现有数据库中？

> ID：14942462
> 
> 赞同：0
> 
> 时间：2013-02-18T17:57:26.907
> 
> 标签：python, database, json, sqlalchemy, python-db-api

如果我们有一个 json 格式的数据文件，其中存储了我们所有的数据库数据内容，例如表名、行和列等内容，我们如何使用 DB-API 对象将 json 文件中的数据插入/更新/删除到数据库中，例如sqlite，mysql等。如果您有更好的处理方法，请分享。人们说数据库数据信息最好保存成json格式，这样在python中使用数据库会方便很多。

非常感谢！请给建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T07:02:27.190

没有什么神奇的方法，你必须编写一个 Python 程序来将你的 JSON 数据加载到数据库中。SQLAlchemy 是一个让它变得更容易的好工具。

# java - Java 删除除某事之外的所有内容

> ID：14942463
> 
> 赞同：0
> 
> 时间：2013-02-18T17:57:33.740
> 
> 标签：java

这是一些代码：

```
 String cakes = "I like to eat ice cream sandwiches at night";
    cakes = cakes.replace("ice cream", "");
    System.out.println(cakes); 
```

这将删除冰淇淋。凉爽的。但我想要的是：

```
 String cakes = "I like to eat ice cream sandwiches at night";
    cakes = "ice" thru "sandwiches";
    System.out.println(cakes); 
```

组合操作要做的是删除除冰和三明治之间的字母之外的所有内容，使串蛋糕成为“冰淇淋三明治”。这有可能吗？

**编辑：**我有一个新代码：

```
 String cakes = "I like to eat ice cream sandwiches at night";
    String ice = "ice";
    String sandwiches = "sandwiches";
    cakes = cakes.substring(cakes.indexOf(ice),cakes.indexOf(sandwiches)+sandwiches.length());

    System.out.println(cakes); 
```

这可行，但有一个问题：对于 cake 的某些值（例如网站的 html 代码），我收到一个错误：

```
 Exception in thread "main" java.lang.StringIndexOutOfBoundsException: String index out of range: -number
          at java.lang.String.substring(Unknown Source)
          at package.cclass.main(cat.java:31) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T18:00:00.340

为此，我想到了正则表达式。

这篇文章有一个在 Java 中仅使用正则表达式的示例：[Java regex to remove all tr​​ailing numbers？](https://stackoverflow.com/questions/1375466/java-regex-to-remove-all-trailing-numbers)

在这种情况下，表达式将类似于：`"ice.*sandwiches"`

**编辑：**我以为我们要删除这些词。我的错。这是一些应该做更多你正在寻找的代码。

```
Pattern p = Pattern.compile("ice.*sandwiches");
Matcher m = p.matcher("I like to eat ice cream sandwiches at night");
while (m.find()) {
    String s = m.group(1);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T18:03:26.877

您可以使用正则表达式或仅使用 String.indexOf() 等。

```
String wordOne = "ice";
String wordTwo = "sandwiches";

startIndex = cakes.indexOf(wordOne);
endIndex = cakes.indexOf(wordTwo) + wordTwo.length();

String result = cakes.substring(startIndex, endIndex); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T18:06:21.817

你可以试试这个：

```
String ice = "ice";
String sandwiches = "sandwiches";
cakes = cakes.substring(cakes.indexOf(ice),cakes.indexOf(sandwiches)+sandwiches.length()); 
```

# c# - 为什么这本字典在 VB.NET 和 C# 之间的调试中显示不同？

> ID：14942469
> 
> 赞同：7
> 
> 时间：2013-02-18T17:57:55.160
> 
> 标签：c#, vb.net, visual-studio-2010, visual-studio-debugging

我最近一直在使用 C# 和 VB.NET，前几天晚上，当我通过调试器运行一些程序并尝试查看 Dictionary 对象的内容时，我注意到了这种奇怪的行为。我相当肯定我之前在 C# 中查看过字典并看到了它的内容，但现在我看到的是：

![调试器中的 C# 字典](../Images/afbd0b670f39f04de122474dee2c4b5b.png)

在这些子部分中四处寻找，例如键和值，不会显示字典中的内容，只需将我循环到同一个调试器窗口即可。我无法在这里看到我的价值观。

VB.NET 看起来不错的地方：

![调试器中的 VB.NET 字典](../Images/cc7dfa46357fdd7dd6120d226c8cb4b8.png)

知道为什么 C# 不同吗？有没有设置或我有什么东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-11T08:06:38.130

不知何故，您会看到“原始视图-> 非公共成员”窗口。~~但是，如果您在此窗口中向下滚动到倒数第二行“值”，则应该可以访问数字索引值的列表。您可以发布一个显示扩展的“键”窗口的屏幕截图吗？~~

取消选中工具 -> 选项 -> 调试 -> 常规，倒数第四个选项：“在变量窗口中显示对象的原始结构”。（也应该感谢[https://stackoverflow.com/a/13422426/2236012](https://stackoverflow.com/a/13422426/2236012)分享此设置路径。）

# lua - 在不影响全局命名空间的情况下创建相互依赖的 Lua 文件套件

> ID：14942472
> 
> 赞同：5
> 
> 时间：2013-02-18T17:58:12.863
> 
> 标签：lua

**tl;dr**：什么设计模式允许您将 Lua 代码拆分到需要共享某些信息而不影响全局表的多个文件上？

### 背景

在 Lua 中创建库会影响全局命名空间，这种做法被认为是不好的形式：

```
--> somelib.lua <--
SomeLib = { ... }

--> usercode.lua <--
require 'somelib'
print(SomeLib) -- global key created == bad 
```

相反，最好的做法是创建一个使用局部变量的库，然后将它们返回给用户以在他们认为合适的时候进行分配：

```
--> somelib.lua <--
local SomeLib = { ... }
return SomeLib

--> usercode.lua <--
local theLib = require 'somelib' -- consumers name lib as they wish == good 
```

使用单个文件时，上述模式可以正常工作。但是，当您有多个相互引用的文件时，这变得相当困难。

### 具体例子

您如何重写以下文件套件以使断言全部通过？理想情况下，重写将在磁盘上保留相同的文件以及每个文件的职责。（通过将所有代码合并到一个文件中进行重写是有效的，但没有帮助；）

```
--> test_usage.lua <--
require 'master'

assert(MASTER.Simple)
assert(MASTER.simple)
assert(MASTER.Shared)
assert(MASTER.Shared.go1)
assert(MASTER.Shared.go2)
assert(MASTER.Simple.ref1()==MASTER.Multi1)
assert(pcall(MASTER.Simple.ref2))
assert(_G.MASTER == nil)                   -- Does not currently pass 
```

```
--> master.lua <--
MASTER = {}
require 'simple'
require 'multi'
require 'shared1'
require 'shared2'
require 'shared3'
require 'reference'

--> simple.lua <--
MASTER.Simple = {}
function MASTER:simple() end

--> multi.lua <--
MASTER.Multi1 = {}
MASTER.Multi2 = {}

--> shared1.lua <--
MASTER.Shared = {}

--> shared2.lua <--
function MASTER.Shared:go1() end

--> shared3.lua <--
function MASTER.Shared:go2() end

--> reference.lua <--
function MASTER.Simple:ref1() return MASTER.Multi1 end
function MASTER.Simple:ref2() MASTER:simple()      end 
```

* * *

### 失败：设置环境

我想通过使用自我参考将环境设置到我的主表来解决问题。然而，这在调用函数时不起作用`require`，因为它们会改变环境：

```
--> master.lua <--
foo = "original"
local MASTER = setmetatable({foo="captured"},{__index=_G})
MASTER.MASTER = MASTER
setfenv(1,MASTER)
require 'simple'

--> simple.lua <--
print(foo)         --> "original"
MASTER.Simple = {} --> attempt to index global 'MASTER' (a nil value) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T16:38:14.000

您赋予 master.lua 两项职责：

1.  它定义了通用模块表
2.  它导入所有子模块

相反，您应该为 (1) 创建一个单独的模块并将其导入所有子模块：

```
--> common.lua <--
return {}

--> master.lua <--
require 'simple'
require 'multi'
require 'shared1'
require 'shared2'
require 'shared3'
require 'reference'
return require'common' -- return the common table

--> simple.lua <--
local MASTER = require'common' -- import the common table
MASTER.Simple = {}
function MASTER:simple() end 
```

等等

最后，将 的第一行更改`test_usage.lua`为使用局部变量：

```
--> test_usage.lua <--
local MASTER = require'master'
... 
```

测试现在应该通过了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T10:56:25.610

我有一个系统的方法来解决这个问题。我已经在 Git 存储库中重构了您的模块，以向您展示它是如何工作的：[https ://github.com/catwell/dont-touch-global-namespace/commit/34b390fa34931464c1dc6f32a26dc4b27d5ebd69](https://github.com/catwell/dont-touch-global-namespace/commit/34b390fa34931464c1dc6f32a26dc4b27d5ebd69)

这个想法是你应该让子部分返回一个以主模块作为参数的函数。

如果你通过打开*master.lua*中的源文件来作弊，添加页眉和页脚并使用`loadstring`，你甚至可以不加修改地使用它们（只有*master.lua*必须修改，但它更复杂）。就个人而言，我更喜欢保持明确，这就是我在这里所做的。我不喜欢魔法:)

编辑：它非常接近 Andrew Stark 的第一个解决方案，除了我直接在子模块中修补 MASTER 表。优点是您可以一次定义多个内容，例如在您的*simple.lua*、*multi.lua*和*reference.lua*文件中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T05:12:10.593

问题涉及：

1.  制作模块时不污染全局空间。
2.  出于维护等原因，以这样的方式制作模块，它们可能会被拆分为多个文件。

我对上述问题的解决方案在于调整 Lua 中的“return as table”习语，当需要在子模块之间传递状态时，您不会返回一个表，而是返回一个返回一个表的函数。

这适用于完全依赖于某些根模块的子模块。如果它们*是*独立加载的，那么它们需要用户知道他们需要*调用*模块才能使用它。这与其他所有具有一组方法的模块不同，准备好从`local a = require('a')`.

无论如何，这是这样工作的：

```
--callbacks.lua a -- sub-module
return function(self)
    local callbacks = {}
    callbacks.StartElement =  function(parser, elementName, attributes)
        local res = {}
            local stack = self.stack

    ---awesome stuff for about 150 lines...

    return callbacks
end 
```

要使用它，您可以...

```
local make_callbacks = require'callbacks'
self.callbacks = make_callbacks(self) 
```

或者，更好的是，在将回调表分配给父模块时，只需调用*require的**返回值*，如下所示：

 *```
self.callbacks = require'trms.xml.callbacks'(self) 
```

大多数情况下，我尽量不这样做。如果我在子模块之间传递状态或自我，我发现我经常做错了。我的内部政策是，如果我正在做与另一个文件高度相关的事情，我*可能*会没事。更有可能的是，我将某些东西放在了错误的位置，并且有一种方法可以做到这一点，而无需在模块之间传递任何东西。

我不喜欢这个的原因是我通过表传递的方法和属性在我正在处理的文件中看不到。我不能自由地重构我的一个文件的内部实现，而不会影响其他文件。所以，我谦虚地建议这个成语是一面*黄旗*，但可能不是一面红旗。:)

虽然这解决了没有全局变量的状态共享问题，但它并不能真正保护用户免受意外遗漏`local`. 如果我可以谈谈那个隐含的问题......

我要做的第一件事是从我的模块中删除对全局环境的访问。记住它只有在我不重置时才可用，重置`_ENV`它是我做的第一件事。这是通过仅将需要的内容打包到新`_ENV`表中来完成的。

```
_ENV = {print = print, 
    pairs = pairs, --etc
} 
```

然而，不断地将我需要的所有东西从 lua 重新输入到每个文件中是一个巨大的、容易出错的痛苦。为避免这种情况，我在模块的基本目录中创建了一个文件，并将其用作所有模块和子模块的公共环境的主目录。我称之为`_ENV.lua`。

注意：我不能为此使用“init.lua”或任何其他根模块，因为我需要能够从子模块加载它，这些子模块由根模块加载，根模块加载子模块模块，它们是...

我的缩写`_ENV.lua`文件如下所示：

```
--_ENV.lua
_ENV = {
    type = type,  pairs = pairs,  ipairs = ipairs,  next = next,  print =
    print,  require = require, io = io,  table = table,  string = string,        
    lxp = require"lxp", lfs = require"lfs",
    socket = require("socket"), lpeg = require'lpeg', --etc..
}
return _ENV 
```

有了这个文件，我现在有了一个共同的工作基础。我的所有其他模块都首先加载它，使用以下命令：

```
 _ENV = require'root_mod._ENV' --where root_mod is the base of my module. 
```

这个设施对我来说很重要，有两个原因。首先，它让我远离全球空间。如果我发现我在全局环境中遗漏了一些东西`_G`（我花了很长时间才发现我没有 tostring！），我可以回到我的`_ENV.lua`文件并添加它。作为必需文件，它只会加载一次，因此将其应用于我的所有子模块是 0 卡路里。

其次，我发现它为我提供了使用“将模块作为表”协议真正需要的一切，只有少数例外情况需要“返回一个返回表的函数”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T18:17:49.680

我们可以通过更改主文件来修改运行所有必需代码的环境来解决问题：

```
--> master.lua <--
local m = {}                        -- The actual master table
local env = getfenv(0)              -- The current environment
local sandbox = { MASTER=m }        -- Environment for all requires
setmetatable(sandbox,{__index=env}) -- ...also exposes read access to real env

setfenv(0,sandbox)                  -- Use the sandbox as the environment
-- require all files as before
setfenv(0,env)                      -- Restore the original environment

return m 
```

这`sandbox`是一个空表，它继承了值，`_G`但也有对该`MASTER`表的引用，从后面的代码的角度模拟一个全局。使用此沙箱作为环境会导致所有后续需要在此上下文中评估其“全局”代码。

我们保存真实环境以供以后恢复，这样我们就不会弄乱任何以后可能想要实际设置全局变量的代码。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-06-15T03:30:20.550

**TL;DR：** *不要* `return`模块，`package.loaded[...] = your_module`尽早设置（仍然可以为空），然后只是`require`子模块中的模块，它将被正确共享。

* * *

做到这一点的干净方法是显式注册模块，而不是依赖于`require`在最后隐式注册它。文档说：

> ### [`require (modname)`](https://www.lua.org/manual/5.3/manual.html#pdf-require)
> 
> 加载给定的模块。**该函数首先查看 `package.loaded`表以确定是否`modname`已加载。如果是，则`require`返回存储在的值 `package.loaded[modname]`。** *[这让你得到每个文件只运行一次的缓存行为。]* 否则，它会尝试为模块找到一个*加载器*。 *[其中一位搜索者正在寻找要运行的 Lua 文件，这可以让您获得通常的文件加载行为。]*
> 
> […]
> 
> 找到`require`加载器后，使用两个参数调用加载器： `modname`以及一个取决于它如何获取加载器的额外值。（如果加载器来自一个文件，这个额外的值就是文件名。）如果加载器返回任何非零值*[例如你的文件`return`是模块表]*， `require`则将返回的值分配给`package.loaded[modname]`. 如果 loader 没有返回一个非 nil 值并且没有**给 赋值 `package.loaded[modname]`**，那么`require`赋值`true`给这个条目。 **无论如何，`require`返回 的最终值 `package.loaded[modname]`**。
> 
> [（**重点**，*[评论]*由我添加。）]

使用`return mymodule`习惯用法，如果您的依赖项中有循环，则缓存行为会失败——缓存更新得太晚。（结果，文件可能会被加载多次（您甚至可能会出现无限循环！）并且共享会失败。）但是明确地说

```
local _M = { }           -- your module, however you define / name it
package.loaded[...] = _M -- recall: require calls loader( modname, something )
                 -- so `...` is `modname, something` which is shortened
                 -- to just `modname` because only one value is used 
```

立即更新缓存，以便其他模块可以`require`在其主块`return`编辑之前已经您的模块。（当然，当时他们只能实际使用已经定义的内容。但这通常不是问题。）

该`package.loaded[...] = mymodule`方法适用于 5.1-5.3（包括 LuaJIT）。

* * *

对于您的示例，您可以将开始调整`master.lua`为

```
1c1,2
< MASTER = {}
---
> local MASTER = {}
> package.loaded[...] = MASTER 
```

和所有其他文件

```
0a1
> local MASTER = require "master" 
```

你就完成了。*

# windows - 用于编译 LaTeX 的 Windows 批处理文件

> ID：14942473
> 
> 赞同：2
> 
> 时间：2013-02-18T17:58:21.930
> 
> 标签：windows, batch-file, latex, cmd

我正在尝试创建一个批处理文件来编译 LaTeX 文档。我还没有找到一个解决方案来让它编译批处理文件文件夹中的每个 .tex 文件。这很容易实现吗？

```
SET STR=document

pdflatex "%STR%.tex"
bibtex "%STR%.aux"
pdflatex "%STR%.tex"
pdflatex "%STR%.tex"

DEL "%STR%.log"
DEL "%STR%.toc"
DEL "%STR%.aux"
DEL "%STR%.out"
DEL "%STR%.blg"
DEL "%STR%.bbl"

"%STR%.pdf" 
```

# java - 如何在不四舍五入的情况下显示最多 2 位小数？

> ID：14942474
> 
> 赞同：1
> 
> 时间：2013-02-18T17:58:30.813
> 
> 标签：java, android, math

我只想为浮点数取小数点后两位而不四舍五入。例如。4.21777 应该是 4.21 而不是 4.22。我该怎么做呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T18:00:59.457

一个简单的答案：

```
double x = 4.21777;
double y = Math.floor(x * 100) / 100; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T18:01:52.940

减去`0.005`然后四舍五入。例如，如果您只想打印数字，则可以使用格式`%f6.2`和值`x-0.005`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T18:02:12.323

```
float f = 4.21777 * 100;
int solution = (int)f;
f = solution/100; 
```

这应该工作;）

解释：乘以 100，您将得到 421.777，将 castet 转换为 int，向下舍入为 421。现在除以 100 返回其实际值。

# php - 在php中求和字符串，转换为整数

> ID：14942477
> 
> 赞同：2
> 
> 时间：2013-02-18T17:58:35.573
> 
> 标签：php, string, integer, sum

尝试对某些哈希使用简单的“版本控制”系统，我执行以下操作：

```
$last_version = '009';
$increment = '001';

$result = $last_version + $increment;

var_dump($result); 
```

我会期望：`string(010)`但是`int(10)`在我跳入`if`'s and之前`str-pad`，我想知道是否还有其他方法可以保存所需的格式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T18:01:33.253

Using`+`自动将变量转换为适当的`number`类型（在本例中为`int`，但可以将不同的字符串格式转换为`float`）。

如果要保留所需的 0 左填充，可以使用[`sprintf()`](http://php.net/sprintf)来格式化结果，如下所示：

```
$result = sprintf('%03d', $last_version + $increment); 
```

格式说明符`%03d`指定您想要`d`一个长度为`3`左填充字符的整数字符串 ( ) `0`。

更多关于 PHP 的 Type Juggling 逻辑的信息可以在[PHP 文档中找到：Type Juggling](http://php.net/types.type-juggling)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T17:59:36.557

```
$last_version = '009';
$increment = '001';

$result = $last_version + $increment;

$result = (string) $result ;

var_dump($result) ; 
```

当您尝试使用字符串执行数学运算时，它们会被转换为适当的类型。在这种情况下为 int。但是您可以在上面的示例中将整数转换回字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T18:01:54.257

您不能添加字符串（就这么简单）。这就是 PHP 将两个字符串隐式转换为整数的原因（这称为[动态类型](http://php.net/manual/en/language.types.type-juggling.php)）。

要格式化您的号码，您可以执行以下操作：

```
$last_version = '009';
$increment    = '001';

$result = $last_version + $increment; // = 10
$result = sprintf("%03d", $result) // = "010" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T18:04:05.333

当您使用 时`+`，PHP 会自动将字符串转换为整数，从而得到`int(10`您所看到的结果。您将无法以这种方式添加字符串。因此，最好的办法是将版本保持为整数和字符串填充，如下所示：

```
$last_version = 9;
$increment = 1; 
$pad_length = 3;
$pad_string = '0';

$result = $last_version + increment; // or simply $last_version++; if increment will always be 1

$string_result = str_pad((string)$result, $pad_length, $pad_string, STR_PAD_LEFT); 
```

# python - matplotlib 轴在缩放时重绘

> ID：14942481
> 
> 赞同：1
> 
> 时间：2013-02-18T17:58:45.073
> 
> 标签：python, matplotlib, tkinter, tk

我有一个带有导航工具栏的简单图表。当我缩放或平移时，图形会正确更新，但轴标签会混乱。就好像它在绘制新文本之前没有清除旧文本一样。因此，您会看到新文本覆盖了旧文本。如果我调整窗口大小，它似乎会重新绘制并修复标签。这是我的简单示例：

```
import matplotlib
matplotlib.use('TkAgg')
from matplotlib.backends.backend_tkagg import FigureCanvasTkAgg, NavigationToolbar2TkAgg
from matplotlib.backend_bases import key_press_handler
from matplotlib.figure import Figure

from Tix import *
from Tkconstants import *

root = Tk()
f = Figure(figsize=(12,5), dpi=100, frameon=False)
s = f.add_subplot(111, title="test")
x = [0,1,2,3,4,5]
y = [5,2,6,7,3,6]

s.plot(x,y,label="Test")

canvas = FigureCanvasTkAgg(f, master=root)
canvas.show()
canvas.get_tk_widget().pack(side=TOP, fill=BOTH, expand=1)
canvas._tkcanvas.pack(side=TOP, fill=BOTH, expand=1)
NavigationToolbar2TkAgg(canvas, root)

root.mainloop() 
```

这是之前的： ![在此处输入图像描述](../Images/54bc57cdda747680cbd49b92ca31184f.png)

这是平移之后： ![在此处输入图像描述](../Images/91fc0ca91d8b5a6bf09db9ae9742a620.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-20T12:03:17.460

正如[Oblivion](https://stackoverflow.com/users/1635557/oblivion)所建议的：从解决问题中
删除`frameon=False`选项。`f = Figure(figsize=(12,5), dpi=100, frameon=False)`

# magento - 产品未通过 magmi 分配到类别

> ID：14942482
> 
> 赞同：0
> 
> 时间：2013-02-18T17:58:49.280
> 
> 标签：magento, magmi

我正在使用 magmi 上传工作正常的产品，正在上传产品。只有一个问题他们没有出现在前端，但是当我试图找到我发现产品没有被分配到任何类别的原因时，它们没有出现在前端，但它们却出现在了前端。任何机构都可以提供帮助吗？

这是我的 CSV 示例

```
sku _store  _attribute_set  _type   _category   _root_category  _product_websites   ada_compliant   backplate_dimension base_dimension  brand   bulb_included   bulb_type   bulb_wattage    canopy_dimension    carton_height   carton_length   carton_width    collection1 cost    country_of_manufacture  country_orgin   created_at  custom_design   custom_design_from  custom_design_to    custom_layout_update    depth   description designer    diameter    dimension   enable_googlecheckout   energy  extension   finish  finish1 gallery gender  gift_message_available  harddrive_speed hardrive    has_options height  height_1    image   image_label in_depth    lamping length  manufacturer1   max_resolution  media_gallery   megapixels  memory  meta_description    meta_keyword    meta_title  minimal_price   model   msrp    msrp_display_actual_price_type  msrp_enabled    name    news_from_date  news_to_date    no_bulbs    options_container   page_layout price   processor   ram_size    required_options    response_time   room    screensize  shade_color shade_dimension shade_material  shape   shirt_size  shoe_size   shoe_type   short_description   small_image small_image_label   special_from_date   special_price   special_to_date status  style   switch  tax_class_id    thumbnail   thumbnail_label updated_at  url_key url_path    visibility  weight  width   qty min_qty use_config_min_qty  is_qty_decimal  backorders  use_config_backorders   min_sale_qty    use_config_min_sale_qty max_sale_qty    use_config_max_sale_qty is_in_stock notify_stock_qty    use_config_notify_stock_qty manage_stock    use_config_manage_stock stock_status_changed_auto   use_config_qty_increments   qty_increments  use_config_enable_qty_inc   enable_qty_increments   is_decimal_divided  _links_related_sku  _links_related_position _links_crosssell_sku    _links_crosssell_position   _links_upsell_sku   _links_upsell_position  _associated_sku _associated_default_qty _associated_position    _tier_price_website _tier_price_customer_group  _tier_price_qty _tier_price_price   _group_price_website    _group_price_customer_group _group_price_price  _media_attribute_id _media_image    _media_lable    _media_position _media_is_disabled
EP777777-81 admin   Default simple  Wall Lights/Wall Sconces        base    No          Maxim Lighting  No  Medium base bulbs   100     29.72   33.66   10.43   Basix   170                                 Contemporary collection with sweeping arms and clean lines. Offered in Ice glass and Satin Nickel finish or Wilshire glass and Oil Rubbed Bronze finish.    Maxim Lighting      31.5 H x 32 W x  L          Dry Locations           Satin Nickel            1                   31.5    /10001CLPC.jpg  Basix 9-Light Chandelier                Maxim Lighting      0           Basix 9-Light Chandelier7777    Ceiling Lights, Chandeliers, lighting, lights, Maxim Lighting   Maxim Lighting Basix 9-Light Chandelier         $510.00             Basix 9-Light Chandelier9999            9           255                                                     Basix 9-Light Chandelier    /10001CLPC.jpg  Basix 9-Light Chandelier                1   Contemporary        2   /10001CLPC.jpg  Basix 9-Light Chandelier                4   26  32  10  0   1   0   0   1   1   1   100 1   1       1   0   1   0   1   0   1   0   0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-30T13:33:21.037

我有同样的问题。但是我在个人项目中使用了 magmi 类，而不是使用 magmi 界面。我通过在产品数据数组中添加 "category_ids"=> "2" 解决了我的问题。这是类别的 ID。它可能对您没有帮助，但可能会帮助其他人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-17T14:58:13.500

尝试将字段命名为“类别”而不是“类别”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-30T16:14:54.297

查看您的 CSV，您的某些列名不正确（包括类别）

例如：

```
_store  _attribute_set  _type   _category    _product_websites 
```

应该：

```
store   attribute_set   type    category     websites 
```

[您可以在Magmi](http://sourceforge.net/apps/mediawiki/magmi/index.php?title=Import_new_products)中查看所需的列名称：导入新产品

还要确保您在 Magmi 配置中启用了[On the fly 类别创建器/导入](http://sourceforge.net/apps/mediawiki/magmi/index.php?title=On_the_fly_category_creator/importer)器插件，并且您的 Category 列值遵循[文档](http://sourceforge.net/apps/mediawiki/magmi/index.php?title=On_the_fly_category_creator/importer#Basic_example)中概述的格式。

# actionscript-3 - 如何使用 actionscript 3 为带有附加键事件的按钮设置动画？

> ID：14942491
> 
> 赞同：0
> 
> 时间：2013-02-18T17:59:13.860
> 
> 标签：actionscript-3

我想知道当一个键事件附加到它时，如何使用 actionscript 3 在 Flash 中制作一个按钮动画。我可以使用鼠标单击事件（当您双击按钮并创建向上、向上和向下更改时）制作简单的动画，使按钮更改形状，但是当键盘事件附加到它时，按钮只是它的功能和没有动画......有人知道我如何为我的关键事件制作动画吗？

```
//initialise variables with functions
var mySound:Sound = new Sound();
mySound.load(new URLRequest("acapella.mp3"));
var myChannel:SoundChannel = new SoundChannel();
clicktoplaymusic.addEventListener(MouseEvent.CLICK, playSound);

function playSound(event:MouseEvent):void
{
    myChannel = mySound.play();
}

pausebutton.addEventListener(MouseEvent.CLICK, stopSound);
function stopSound(event:MouseEvent):void
{
myChannel.stop();
}

 // The array now holds the drum button objects, the filename, and the corresponding         keys.
 var soundArray:Array = [
    { "btn": butt1, "file": 't.mp3', "key": 84 },
    { "btn": butt2, "file": 'r.mp3', "key": 82 },
    { "btn": butt3, "file": 'p.mp3', "key": 80 },
    { "btn": butt4, "file": 'o.mp3', "key": 79 },
    { "btn": butt5, "file": 'e.mp3', "key": 69 },
    { "btn": butt6, "file": 'i.mp3', "key": 73 },
    { "btn": butt7, "file": 'u.mp3', "key": 85 },
    { "btn": butt8, "file": 'w.mp3', "key": 87 },
    { "btn": butt9, "file": 'y.mp3', "key": 89 },
    { "btn": butt10, "file": 'q.mp3', "key": 81 } ];

 //This adds the mouse click event to the buttons. 
 for each (var item:Object in soundArray)
 {
     item.btn.addEventListener(MouseEvent.CLICK, buttonClicked);
 }
 // This was registered to a button.  It needs to be on the stage.;
stage.addEventListener(KeyboardEvent.KEY_DOWN, tsymbolkeyhit);

function tsymbolkeyhit(e:KeyboardEvent):void
{
// Handles playing the sound when hitting keyboard buttons.
    for each (var item:Object in soundArray)
    {
    // If the key we hit matches the keystroke in the array, play the       appropriate sound, and break the loop.
    if (item.key == e.keyCode)
    {
        playKey(item.file);
        break;
    }
}
}

  function buttonClicked(e:MouseEvent):void
  {
// Handles playing sound when hitting onscreen buttons.
for each (var item:Object in soundArray)
{
    // If the button we clicked matches the button in the array, play the appropriate sound, and break the loop.
    if (item.btn == e.currentTarget)
    {
        playKey(item.file);
        break;
    }
}
 }

 function playKey(filePath:String):void
{
//plays my specified file.
var snd:Sound = new Sound();
var channel:SoundChannel = new SoundChannel();
snd.load(new URLRequest(filePath));
channel = snd.play();
}

// Replaces my mouse with Drumsticks.
stage.addEventListener(Event.ENTER_FRAME, MoveMouse);
Mouse.hide();
function MoveMouse(Event)
{
drum_stick.x = mouseX;
drum_stick.y = mouseY;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T19:49:06.653

代码运行起来就像一台 rube goldberg 机器。你有一行由鼠标事件触发的事件，现在你只需要通过键盘事件对同一系列事件进行排队。

这是一个简单的例子：

```
button.addEventListener(MouseEvent.MOUSE_DOWN, btnEvent);
button.addEventListener(MouseEvent.MOUSE_UP, btnEvent);
stage.addEventListener(KeyboardEvent.KEY_DOWN, keyEvent);
stage.addEventListener(KeyboardEvent.KEY_UP, keyEvent);

function btnEvent(e:MouseEvent):void {
    switch (e.type) {
        case "mouseDown":
            animateBtn("down");
            break;
        case "mouseUp":
            animateBtn("up");
            break;
    }
}

function keyEvent(e:KeyboardEvent):void {
    switch (e.type) {
        case "keyDown":
            animateBtn("down");
            break;
        case "keyUp":
            animateBtn("up");
            break;
    }
}

function animateBtn(state:String):void {
    if (state == "down") {
        button.alpha = 0.5;
    } else if (state == "up") {
        button.alpha = 1;
    }
} 
```

# .net - 使用 TCP Socket 发送文件同时发送字符串

> ID：14942492
> 
> 赞同：0
> 
> 时间：2013-02-18T17:59:18.733
> 
> 标签：.net, vb.net, file-sharing, tcpsocket

我有一个具有日志记录功能的文件共享应用程序。每次用户连接时，客户端都会发送一个字符串，告知用户已连接，同样当客户端断开一个字符串时，会在服务器上发送一个告知用户已断开连接的字符串。

现在我的问题是，当用户连接或断开连接同时发送文件时，程序可能无法猜测哪些数据用于日志记录部分，哪些数据用于文件共享部分. 我想要的是将它们分开而不互相打扰。TCP 连接是在单个 TCP 套接字中实现的，现在我在想，也许为这两个功能中的任何一个使用单独的套接字可以解决问题。或者可能是某种算法来确定发送的数据类型，无论是文件数据还是字符串。涉及 IO 库之类的东西。我的朋友告诉我，也许我们可以尝试获取正在发送的文件的文件名，然后将其与为日志记录部分发送的字符串进行比较。为日志记录部分发送的字符串是恒定的，

我脑子里有一些想法，但我认为有更好的方法来做到这一点。有什么建议么？

提前致谢！

# javascript - 将路由段作为回调参数传递

> ID：14942495
> 
> 赞同：0
> 
> 时间：2013-02-18T17:59:30.500
> 
> 标签：javascript, node.js, express

我正在快速构建我的第一个应用程序。是否有可能以某种方式将路由段作为参数传递给回调？

```
app.get('/connect/:mySegment', myCallback(mySegment)); 
```

具体来说，我正在使用具有多种身份验证策略的护照。所以与其做，

```
app.get('/connect/twitter',
  passport.authorize('twitter')
);
app.get('/connect/facebook',
  passport.authorize('facebook')
); 
```

我想做一些类似的事情......

```
app.get('/connect/:service', passport.authorize(service)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T18:30:26.633

当然，你可以做

```
app.get('/connect/:mySegment', function(req, res){
    // then you can use req.params.mySegment
}); 
```

# c++ - C++：string.find 仅在字符串位于 pos1 时才在字符串中找到一个字符

> ID：14942502
> 
> 赞同：0
> 
> 时间：2013-02-18T17:59:53.597
> 
> 标签：c++

我想在字符串（word）中找到一个char（expected_char）

```
if (word.find(expected_char)==true)
{
    cout << "You got one! It's on pos" << word.find(expected_char);
}
else
{
...
} 
```

如果我的字符串是例如“abcd”并且我搜索“c”，否则将执行；如果我搜索“b”，则将执行 if 语句。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T18:02:42.520

的返回类型[`std::string::find()`](http://en.cppreference.com/w/cpp/string/basic_string/find)是无符号类型`std::string::size_type`，如果未找到字符，则返回`std::string::npos`（可以表示的最大值`std::string::size_type`）或字符串中找到的字符的第一个索引。

现在您将 的结果与 的结果进行比较`std::string::find()`，`true`这会导致布尔值整体提升为`true`整数值`1`。因此，当且仅当`expected_char`在位置 1 中找到字符时（即，当它是字符串中的第二个字符时），您的条件才满足。

如果要检查字符`expected_char`是否在字符串`word`中，请使用

```
if (word.find(expected_char) != std::string::npos)
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-18T18:03:22.627

看到[这个](http://www.cplusplus.com/reference/string/string/find/)你就明白了。有趣的部分：

```
 std::string str("There are two needles in this haystack with needles.");
  std::string str2("needle");

  unsigned found = str.find(str2);
  if (found != std::string::npos)
    std::cout << "first 'needle' found at: " << found << '\n'; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-18T18:02:14.180

`find`返回一个位置，`npos`如果没有匹配则返回特殊值。你需要测试：

```
word.find(expected_char) != word.npos 
```

（恰好`b`在位置 1，这也是 的整数值`true`。）

# jquery - 从 jQuery UI Slider 中取消绑定 Slide 方法

> ID：14942505
> 
> 赞同：1
> 
> 时间：2013-02-18T17:59:58.203
> 
> 标签：jquery, jquery-ui, slider

在使用某个滑动功能初始化滑块后，我想覆盖/覆盖 jQuery UI 滑块的滑动方法。

相关代码如下所示，在此[JSFiddle](http://jsfiddle.net/4ff9S/1/)中：

```
$(function() {
    var myslider = $("#myslider");
    $( myslider ).slider({
        slide: function( event, ui ) {
            console.log("sliding AAAAA");
        } //end slide function
    });//end slider definition

    //how do I unbind the original slide action?
    $(myslider).off("slide");     //doesn't work
    $(myslider).unbind("slide");  //doesn't work

    $(myslider).on("slide", function( event, ui ) {
        //I want this to be the only action fired.
        console.log("sliding BBBBB");
    });
}); 
```

在上面的示例/小提琴中，当用户滑动滑块时，这两个动作仍在触发。我怎样才能做到只有第二种`slide`方法被触发，从而覆盖第一种方法？

谢谢！

## 编辑

我不确定这是执行此操作的“正确”方法，但它似乎有效：

```
$(myslider).slider("option","slide",""); 
```

也许我应该输入这个作为我自己问题的答案？但我认为有更好的定义/设计的方式，所以我会保持开放。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T18:38:24.987

这是我对自己的问题的最佳答案：

```
$(myslider).slider("option","slide",""); //clear the slide option 
```

如果有更好或更清洁或更“jQuery”的方式来做到这一点，请发布。

## 编辑

或者，正如@FrédéricHamidi 的评论所建议的那样，将`slide`选项设置为 null （而不是空字符串）。两者都将达到覆盖现有`slide`功能的效果。

```
$(myslider).slider("option","slide",null); //clear the slide option 
```

# c# - form_load 方法执行的顺序

> ID：14942509
> 
> 赞同：1
> 
> 时间：2013-02-18T18:00:01.117
> 
> 标签：c#, .net, winforms

我正在创建一个使用 Gmaps.net 的 winforms 应用程序。我无法更改调用 on Load 方法的顺序。由于某种原因，map_load 在 man_Load 之前被调用。有没有办法改变这个顺序？

如果我可以提供更多信息来帮助，请询问。谢谢！担。

```
public partial class main : Form
{
    public main()
    {
        InitializeComponent();
    }

    private void main_Load(object sender, EventArgs e)
    {
        MessageBox.Show("main_load");
    }

    private void map_Load(object sender, EventArgs e)
    {
        MessageBox.Show("map_load");
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T18:10:19.023

您似乎使用 WinForms 设计器来创建地图。后面的代码在`InitializeComponent()`方法中，并且似乎在加载地图之前正在加载地图`MainForm`。

我的建议是在加载 MainForm 后创建地图：

```
public partial class main : Form
{
    public main()
    {
        InitializeComponent();
    }

    private void main_Load(object sender, EventArgs e)
    {
        Control map = CreateMap();
        map.Docking = DockStyle.Fill;
        this.Controls.Add(map);
    }

    private Control CreateMap()
    {
       // Create a new GMaps.NET object, intialize it and return
    }
} 
```

希望能帮助到你。

# python - 使用 python 更改 Linux 主机名

> ID：14942511
> 
> 赞同：0
> 
> 时间：2013-02-18T18:00:05.153
> 
> 标签：python, linux, random, text-files, hostname

我试图通过让python程序从文件中随机选择一个名称然后将其设置为主机名来更改linux主机名。该代码仅在随机数字值为 1 时才有效。我做错了什么？我正在使用的代码如下。

```
import random
import os
import socket

contents=[]

with open("/root/Desktop/names.txt") as rnd:
    for line in rnd:
        line=line.strip()
        contents.append(line)
name = contents[random.randint(0,len(contents)-1)]
rnd.close()
name = "hostname -b "+name
os.system(name)
hostname = socket.gethostname()
print "Hostname:", hostname 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T18:03:54.567

该`random`模块提供了从序列中选择随机元素的功能：

```
name = random.choice(contents) 
```

我想，这正是你想要的。此外，它的优点是如果`contents`无论出于何种原因为空，都会抛出异常。

* * *

更新：

顺便说一句，您不需要调用`rnd.close()`，因为您在首先打开文件时使用上下文管理器 ( ) - 当您离开子句`with open(...) as rnd:`的范围时，它将自动调用。`with`

# c - 数组 [] 括号内的静态关键字

> ID：14942520
> 
> 赞同：8
> 
> 时间：2013-02-18T18:00:58.440
> 
> 标签：c, arrays, function, static

我最近遇到了`static`关键字的新用法。这里是什么`static` 意思？

```
void fun(int some_array[static 7]); 
```

**编辑**：有人可以举一个有用的例子吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-18T18:05:57.257

该标准在 6.7.6.3 中说：

> 将参数声明为“类型数组”应调整为“类型限定指针”，其中类型限定符（如果有）是在数组类型派生的 [ 和 ] 中指定的那些。如果 **关键字 static 也出现在数组类型派生的 [ 和 ] 中**，则对于函数的每次调用，对应的实际参数的值应提供对至少与指定元素一样多的数组的第一个元素的访问由大小表达式。

这是 C99 中引入的一个特性。所以你有它：`some_array`必须至少有 7 个元素长。

* * *

正如他们所说，没有关键字的新用法就不可能有新标准`static`。

# c# - c#中的字典迭代器

> ID：14942528
> 
> 赞同：-1
> 
> 时间：2013-02-18T18:01:04.993
> 
> 标签：c#, dictionary

我想知道在遍历字典时是否有任何方法可以存储键值对枚举器的值。我想将枚举数的键和值存储在某个变量中。解决办法是什么？我想做的是在遍历字典时引用当前键值对和字典中的下一个键值对。我不知道为什么它不起作用

解决方案可能如下所示：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Collections;
using System.Diagnostics;

namespace WellPuzzle
{

    class Solution
    {
        Hashtable h1 = new Hashtable();
        List<int> listofitemstoremove = new List<int>();

        Dictionary<int, int> d1 = new Dictionary<int, int>();

        public void falling_disks(int[] A, int[] B)
        {
            var itemstoremove = new List<int>();

            var en = d1.GetEnumerator();
            int count = 0;
            for (int i = 0; i <= A.Length - 1; i++)
            {
                d1.Add(count++, A[i]);
            }
            //for each incoming element in array
            foreach (int ele in B)
            {
               //store prev as current position of enumerator
                var prev = new KeyValuePair<int, int>();
                prev = en.Current;
                //check if it is possible to iterate to next element in dictionary
                if (en.MoveNext())
                {
                   //loop till end of dictionary
                    while (en.MoveNext())
                    {
                       //if current value of enumerator in dictionary is less than incoming                                                element and check if corroesponding key for that value is in hashtable or not
                        if (en.Current.Value <= ele && !(checkifthatvalueisfilled(en.Current.Key)))
                            continue;
                        else
                        {//if current enumerator value is greater than incoming element from array B then remove all elements from prev reference till end of dictionary
                            h1.Add(en.Current.Key, true);
                            listofitemstoremove.Add(en.Current.Key);
                        }
                        prev = en.Current;
                    }

                    if (!(h1.ContainsKey(en.Current.Key)))
                    {
                        h1.Add(en.Current.Key, true);
                        listofitemstoremove.Add(en.Current.Key);
                    }
                }
                else
                {
                    h1.Add(prev.Key, true);
                    listofitemstoremove.Add(prev.Key);
                }
                foreach (int item in listofitemstoremove)
                {
                    for (int i = item; i < d1.Count; i++)
                    {
                        d1.Remove(i++);
                    }
                }
            }

            Console.WriteLine(h1.Count);
        }

        public bool checkifthatvalueisfilled(int value)
        {
            if (h1.ContainsValue(h1.ContainsKey(value)) == true)
                return true;
            else return false;
        }
    }

    class Program
    {
        static void Main(string[] args)
        {
            int[] A = new int[] { 5, 6, 4, 3, 6, 2, 3 };
            int[] B = new int[] { 2, 3 };
            Solution s1 = new Solution();
            s1.falling_disks(A, B);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T18:13:01.620

似乎您希望能够访问序列的先前值以及当前值。这是一个简单的辅助方法，它接受一个序列并将其转换为一个对序列，该序列对表示每个值及其在原始序列中的前一个值：

```
public static IEnumerable<Tuple<T, T>> GroupAdjacent<T>(IEnumerable<T> source)
{
    using (var iterator = source.GetEnumerator())
    {
        if (!iterator.MoveNext())
        {
            yield break;
        }
        T previous = iterator.Current;

        while (iterator.MoveNext())
        {
            yield return Tuple.Create(previous, iterator.Current);
        }
    }
} 
```

然后可以像这样使用它：

```
foreach(var pair in GroupAdjacent(dictionary))
{
    var previous = pair.Item1;
    var current = pair.Item2;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T18:07:08.527

您是否有充分的理由不能使用：-

```
// Replace TKey and TValue with the types from the dictionary
TKey previousKey;
TValue previousValue;

bool first = true;

foreach(var key in dictionary.Keys)
{
  var value = dictionary[key];

  if (!first)
  {
  ... // Do whatever you need to do with the keys and values
  }

  previousKey = key;
  previousValue = value;
  first = false;
} 
```

（但请注意，您可能必须`.OrderBy(...)`这样`.Keys`做才能有意义）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T18:13:29.600

```
List<KeyValuePair<Int32, Int32>> keyValuePairsWithIterations = new List<KeyValuePair<Int32, Int32>>();

foreach(var keyvaluepair in d1)
{
   keyValuePairsWithIterations.Add(keyvaluepair);
} 
```

现在您可以通过迭代访问您的键值对。但它看起来有点强大......我仍然不明白你需要它......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T18:12:22.617

除了 Iain 和其他人的方法之外，您也可以这样做（就像 Iain 的那样，这给出了上一个和当前而不是当前和下一个，但它们几乎是一回事）：

```
using System;
using System.Collections.Generic;

namespace Demo
{
    public static class Program
    {
        private static void Main(string[] args)
        {
            var d1 = new Dictionary<int, int> {{1, 1}, {2, 2}, {3, 3}, {4, 4}};
            bool isFirst = true;
            var previous = new KeyValuePair<int, int>();

            foreach (var current in d1)
            {
                if (!isFirst)
                {
                    // You have current and previous available now.
                    Console.WriteLine("Current = " + current.Value + ", previous = " + previous.Value);
                }

                previous = current;
                isFirst = false;
            }
        }
    }
} 
```

以下是手动使用枚举器的方法：

```
 using System;
    using System.Collections.Generic;

    namespace Demo
    {
        public static class Program
        {
            private static void Main(string[] args)
            {
                var d1 = new Dictionary<int, int> {{1, 1}, {2, 2}, {3, 3}, {4, 4}};
                var iter = d1.GetEnumerator();

                if (iter.MoveNext())
                {
                    var previous = iter.Current;

                    while (iter.MoveNext())
                    {
                        // You have current and previous available now.
                        Console.WriteLine("Current = " + iter.Current.Value + ", previous = " + previous.Value);
                        previous = iter.Current;
                    }
                }
            }
        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-18T18:12:42.083

为什么需要迭代器？foreach 循环将为您执行此操作。

如果您需要当前和上一个项目，您可以在每次迭代中存储上一个项目：

```
Dictionary<int, int> d1 = new Dictionary<int, int>();
KeyValuePair<int, int> previous = null;
KeyValuePair<int, int> current = null;
foreach (KeyValuePair<int, int> item in d1)
{
    previous = current;
    current = item;
    // do what you need to do with previous and current
} 
```

你也可以使用一个 SortedDictionary，它会给你一个索引。

# c - C 将指向 char* 的指针设置为 char*

> ID：14942529
> 
> 赞同：-1
> 
> 时间：2013-02-18T18:01:06.433
> 
> 标签：c, pointers, char

我有一个功能

```
setCharVal(char *s, int value){
   valueStruct* makeStruct = malloc(sizeof(valueStruct));
   makeStruct->s = s;
   //set other values
} 
```

valueStruct 有一个 char*s; 当我打印进入函数的 s 时，这很好，但是当我打印 makeStruct->s 时，它什么也没打印。

我试过了

```
makeStruct->s = strdup(s); 
```

和

```
makeStruct->s = malloc(sizeof(s);
makeStruct->s = s; 
```

这些都不起作用；它仍然没有为 makeStruct->s 打印任何内容。

我打电话给 setCharVal

```
setCharVal(anotherStruct.s); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T18:05:26.580

```
makeStruct->s = malloc(sizeof(s);
makeStruct->s = s; 
```

导致内存泄漏，并且一无所获。

你应该怎么做才能将字符串复制到分配的缓冲区（另外，长度是使用`strlen`if`s`是一个字符串或从函数外部给出的，not `sizeof`）：

```
// added valueStruct* because I assume you want to return it from the function
valueStruct* setCharVal(char *s,size_t s_size int value){
   valueStruct* makeStruct = malloc(sizeof(valueStruct));
   makeStruct->s = malloc(s_size);
   memcpy(makeStruct->s, s, s_size);
   // ..
   return makeStruct;
} 
```

# javascript - 模型销毁时未发出同步事件 - Backbonejs

> ID：14942530
> 
> 赞同：3
> 
> 时间：2013-02-18T18:01:07.417
> 
> 标签：javascript, backbone.js

当模型被销毁时，模型集合不会发出“同步”事件。文档[似乎相反](http://backbonejs.org/#Model-destroy)。这是我的代码片段：

```
var MyModel = Backbone.Model.extend({ id: 1, val: "foo" });
var MyCollection = Backbone.Collection.extend({ model: MyModel, url: '/api/models' });

var myCollection = new MyCollection();

myCollection.on('sync', function () { console.log('synced!'); });
myCollection.on('remove', function () { console.log('removed!'); });

myCollection.fetch(); // => outputs synced!

    // .. wait for collection to load

myCollection.at(0).destroy(); // => outputs removed! but *NOT* synced! 
```

如果我理解得很好，文档说“销毁”事件应该冒泡到集合中并发出一个“同步”事件。上面代码中的集合是否应该发出“同步”事件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T20:12:59.433

从集合中删除后，在销毁的对象上触发“同步”事件。这就是集合不触发“同步”事件的原因。不过，该系列传达了“毁灭”事件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-18T18:30:01.203

编辑：从集合中删除模型后，即使使用了`wait:true`选项，也会在模型上触发“同步”。

这是来自 Backbone 的代码，它触发集合上的模型事件。

```
// Internal method called every time a model in the set fires an event.
// Sets need to update their indexes when models change ids. All other
// events simply proxy through. "add" and "remove" events that originate
// in other collections are ignored.
_onModelEvent: function(event, model, collection, options) {
  if ((event === 'add' || event === 'remove') && collection !== this) return;
  if (event === 'destroy') this.remove(model, options);
  if (model && event === 'change:' + model.idAttribute) {
    delete this._byId[model.previous(model.idAttribute)];
    if (model.id != null) this._byId[model.id] = model;
  }
  this.trigger.apply(this, arguments);
}, 
```

您的问题很可能是因为同步期间出现错误而未在模型上触发“同步”事件（然后在集合上触发）。

从 Backbone 源代码中，您可以看到请求成功时触发了“同步”，所以也许您可以调试它并查看是否`sync`命中了成功回调？

```
var success = options.success;
    options.success = function(resp) {
      if (success) success(model, resp, options);
      model.trigger('sync', model, resp, options);  // breakpoint here.
    }; 
```

你能在里面放一个断点，看看是否触发了事件吗？我认为它不会触及这条线。

还可以尝试使用错误回调：

```
myCollection.at(0).destroy({
    error: function(model, xhr, options){
        console.log(model);  // this will probably get hit
    }
}); 
```

# python - 利用简单的元类来允许子类重载 __init__ 而不必调用任何额外的好主意？

> ID：14942531
> 
> 赞同：0
> 
> 时间：2013-02-18T18:01:09.243
> 
> 标签：python, instantiation, metaclass

一些上下文：

*   我正在创建一个非常简单的组件实体 2d 游戏引擎

*   绝大多数类将具有扁平的子类层次结构

*   几乎所有基类都不需要任何参数

*   我正在使用 Python 2

所以，目前的解决方案是让`__init__`基类调用可覆盖的`_on_init`方法，因为不得不这样做`BaseClass.__init__`让我觉得难看，所以不得不使用`super()`

我不一定要问你对这种做法的想法（尽管他们绝对是受欢迎的），但主要只是问我是否有任何陷阱或其他不愉快的事情，我可能会订阅自己。

# c - 让程序在按键被按下时发出状态报告

> ID：14942533
> 
> 赞同：1
> 
> 时间：2013-02-18T18:01:11.687
> 
> 标签：c, linux, openmp

我正在做一些非常繁重和缓慢的科学模拟，我想知道是否有可能让我的程序在用户按下一个键时显示一些关于其状态的信息。

它不需要是可移植的，只适用于linux。

目前，我有这样的代码：

```
main()
{
    //SOME GLOBAL INITIALIZATIONS

    //this loop is parallelized
    for(i=0;i<max;i++)
    {
        //Some particular to i initializations

        for(j=0;max2;j++)
        {
            // Here are all the slow and ugly calculations
            // the status should be able to be shown when
            // my program is here
        }
    }
    // Final calculations and final data
} 
```

不确定这是否可能，但有时人们可能会认为代码已停止或什么也不做，这可能非常有帮助。

此外，如果无法做到这一点并同时使用 omp，我可以使用更“手动”的并行化。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:17:05.983

您可以使用 ncurses 的 getch()

```
#include <ctype.h>
#include <ncurses.h>
#include <stdio.h>

int keywaiting(int *key) {
  int ch;
  ch = getch();
  if ((ch != ERR) && key) *key = ch;
  return (ch != ERR);
}

int yourprogram(void) {
  int max = 1000, max2 = 1000;
  int i, j;
  int ch;
  /* SOME GLOBAL INITIALIZATIONS */
  /* this loop is parallelized */
  for (i = 0; i < max; i++) {
    /* Some particular to i initializations */
    for (j = 0; j < max2; j++) {
    /* Here are all the slow and ugly calculations */
    /* the status should be able to be shown when */
    /* my program is here */
      printf("%03d%03d\r", i, j);
      if (keywaiting(&ch)) {
        printf("\r\n\r\nAborted @ i = %d; j = %d\r\n", i, j);
        printf("Keypress %d ('%c')\r\n\n", ch, isprint((unsigned char)ch) ? ch : '.');
        printf("Press any key ...");
        refresh();
        i = max;
        j = max2;
      }
    }
  }
  /* Final calculations and final data */
  return 0;
}
int main(void) {
  /* initialize ncurses */
  initscr();
  nodelay(stdscr, TRUE);
  noecho();
  keypad(stdscr, TRUE);
  curs_set(0);

  yourprogram();

  getchar();
  /* done with ncurses */
  clear();
  refresh();
  endwin();

  return 0;
} 
```

不要忘记与 curses 库链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T19:00:48.873

您可以使用该`pthreads`库：让一个线程等待密钥或任何信号以及何时触发。如果您需要进行一些昂贵的计算来显示输出变量，请使用锁来停止模拟的执行，打印变量并释放锁。不知道这是否可以与 openmp 思想一起使用。

如果您只需要打印变量，那么混合 pthread 和 openmp 应该没有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T19:36:27.437

好的，感谢您的所有建议。我设法得到了与我想要的相似的东西，它不一样，但会服务（^_^）

这是代码，它只是生成一个等待字符的线程，然后将报告数组从 0“切换”到 1。当每个 omp 线程开始每个“j”迭代时，它们将检查报告并在需要时报告.

```
#include <stdio.h>
#include <stdlib.h>
#include <omp.h>
#include <pthread.h>
#include <ncurses.h>

unsigned char *report; // this will store whether a thread has to report or not
int max_threads;

void *check_keyboard(void *whatever)
{
    int c;
    int i;

    newterm(NULL,stdin,stdout); // I want to still see the terminal :)
    noecho();
    cbreak();

    while(1)
    {
        if(getch())
        {
            for(i = 0; i < max_threads; i++)
                report[i]=1;
        }
    }

    return NULL;
}

int main(int argc, const char *argv[])
{
    int i,j;
    int tid;
    pthread_t thread0;

    max_threads = omp_get_max_threads();
    report = malloc(max_threads*sizeof(unsigned char));

    pthread_create(&thread0,NULL,check_keyboard,NULL);

#pragma omp parallel private(i,j,tid) shared(report)
    {
    tid = omp_get_thread_num();

#pragma omp for
    for(i = 0; i < 10; i++)
    {
        for(j = 0; j < 10; j++)
        {
#pragma omp critical
            {
            if(report[tid])
            {
                fprintf(stderr,"Hello World from thread %d\n\r",tid);
                fprintf(stderr,"This is iteration i: %d, j: %d\n\r",i,j);
                report[tid] = 0;
            }
            }
            sleep(1); // This 'is' a test for the long and ugly code
        }
    }
    }

    pthread_cancel(thread0);
    pthread_exit(NULL);
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T18:18:38.053

这是一个使用信号的示例（但部分用 C++ 编写，信号处理不是）：

```
//ctrl+c to output status, ctrl+z to quit

//#include <iostream> c++ syntax
#include <stdio.h>
#include <signal.h>
volatile sig_atomic_t showStatus = 0;

void signalHandler(int sig){
    if (sig==SIGINT){
        showStatus=1;
    }
    if (sig==SIGTSTP){
        showStatus=2;
    }
}

int main(int argc, char** argv){
    signal(SIGINT,signalHandler);
    signal(SIGTSTP,signalHandler);
    while(true){
        if (showStatus==1){
            showStatus=0;
            //std::cout << "status" << std::endl; c++ syntax
                    printf("status\n");
        }else if(showStatus>1){
            break;
        }

    }

    return 0;

} 
```

# hibernate - 从 db4o 到 hibernate 的查询转换

> ID：14942534
> 
> 赞同：0
> 
> 时间：2013-02-18T18:01:11.213
> 
> 标签：hibernate, hibernate-mapping, db4o, object-oriented-database

我目前正在开发一个实现 OODB（面向对象的数据库）缓存的项目，其中要求使用 db4o 数据库作为缓存并在其中存储对象。我的后端数据库在 MySQL 中，我使用 Hibernate 从中获取数据并形成对象。

我可以使用它们的本机查询或通过示例方法查询来查询 db4o 中的对象，在休眠中我可以使用 HQL 或 SQL 从 RDBMS 获取数据。然而，我的问题在于如何弥合 db4o 和 Hibernate 之间的差距并根据需要转换查询（我正在使用两者，因为已经给出了这样的要求）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T00:11:55.790

嗯，据我所知，没有真正的桥梁。您基本上需要编写两次查询。

曾经在[DataNucleus](http://www.datanucleus.org/)中使用 JPA / JDO 包装器支持 db4o。但是 afaik 它不支持 JPQL（Hibernate 支持 JPQL）。同时他们也放弃了对 db4o 的支持，因为它没有得到很好的维护。

因此，答案是：您的查询问题没有很好的解决方案。

您的缓存层应该能够做什么？为什么选择 db4o？为什么不能使用常规的二级缓存，比如 Hibernate 中集成的 Ehcache？

# html - 在 Internet Explorer 中对齐 iframe

> ID：14942537
> 
> 赞同：0
> 
> 时间：2013-02-18T18:01:19.007
> 
> 标签：html, css, internet-explorer

我有这样的CSS

```
.iframe1 {
position: fixed; 
height: 100%;
width: 100%;
padding-left: 160px;
padding-right: 160px;
text-align: center;
margin-left: auto;
margin-right: auto;
} 
```

这会在除 IE7 之外的所有浏览器中对齐中心。我知道这是一个旧浏览器，但我的客户坚持使用它。而不是在 IE7 中对齐中心，它只向左填充 160 像素而不是中心。

如何在 IE 中将其居中？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-27T00:02:55.300

尝试这个：

```
<center><div class="iframe1>bla bla</div></center> 
```

或这个：

IE浏览器：

```
.iframe1 , * html .frame1 , *+html iframe1 {
margin: auto\9;
margin: auto\0/;
position: fixed; 
height: 100%;
width: 100%;
padding-left: 160px;
padding-right: 160px;
text-align: center;
margin-left: 50%;
margin-right: 50%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T18:12:42.183

text-align:center 通常是在 IE7 中更正此问题的方法。如果你摆脱了位置：固定，你应该很高兴。否则，我认为不需要固定位置。

# jsf-2 - 如何编译 primefaces 源？

> ID：14942538
> 
> 赞同：1
> 
> 时间：2013-02-18T18:01:19.773
> 
> 标签：jsf-2, primefaces

在 primefaces 的下载部分有 3 个链接：

```
binary
bundle
sources 
```

我使用 primefaces 3.4.2 并想重新编译一个 java 类来满足我的需要。我下载了源码。现在我想重新编译这个类，但我不知道如何实现。如何编译 primefaces 源？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-28T12:42:49.407

来自 primefaces 网站：

[http://code.google.com/p/primefaces/wiki/BuildingFromSource](http://code.google.com/p/primefaces/wiki/BuildingFromSource)

> PrimeFaces 使用 maven 作为构建工具。有一个自定义的 maven 插件来生成 jsf 工件。首先，您可能需要检查并构建 PrimeFaces maven-jsf-plugin，以防使用的版本在 Prime Repository 中不可用。
> 
> ```
> svn checkout http://primefaces.googlecode.com/svn/maven/trunk/maven-jsf-plugin/ build 
> ```
> 
> cd 到构建并进行 maven 安装
> 
> ```
> cd build
> mvn install 
> ```
> 
> 接下来要做的是自己构建 PrimeFaces，检查代码；
> 
> ```
> svn checkout http://primefaces.googlecode.com/svn/primefaces/trunk 
> ```
> 
> cd 到 primefaces 文件夹并运行 maven build。
> 
> ```
> cd primefaces
> mvn install 
> ```
> 
> 组件开发
> 
> PrimeFaces JSF 插件生成必要的工件，包括组件源、faces-config.xml 和 facelets taglib。组件开发者只需要实现组件的 Renderer 类即可。组件元数据文件定义在 src/main/resources-maven-jsf 文件夹下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T18:05:08.110

[来自repo](https://github.com/primefaces/primefaces)的结帐来源。它是[maven](http://maven.apache.org/)项目，所以用 maven 构建它。

# javascript - 获取 offset() 的值并除以 windowheight 的因子

> ID：14942544
> 
> 赞同：0
> 
> 时间：2013-02-18T18:01:37.403
> 
> 标签：javascript, jquery, html

我遇到了以下问题：在调整窗口大小时，我触发了一些事件，其中之一是：

```
var height = $(window).height()
var getfactor = $('.second').offset().left/height
var getleft = getfactor*height 
```

我这样做：

```
$('.second').css('left', getleft); 
```

但是在窗口调整大小时，它总是在同一个位置，并且没有左被操纵。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:34:25.443

如果我正确阅读了您的代码，那么您实际上是在执行以下操作：

```
var getleft = ($('.second').offset().left / $(window).height()) * $(window).height(); 
```

除以一个数字然后乘以相同的数字将抵消对原始左偏移量的任何修改。每次调整窗口大小时，您实际上是将偏移量重置为其初始值。

# google-app-engine - GWT - GAE 的 RPC 失败 - 在本地工作的问候示例

> ID：14942545
> 
> 赞同：0
> 
> 时间：2013-02-18T18:01:39.393
> 
> 标签：google-app-engine, servlets, rpc

我的 GWT 应用程序遇到问题。一切都在本地运行良好，但当应用程序部署在 Google App Engine 上时出现错误 500。

为了理解这个问题，我尝试使用 Greetings 服务部署示例 Web 应用程序示例，但仍然遇到相同的错误 Remote Procedure Call - Failure。

我认为它来自我的 IDE 设置，但无法弄清楚问题所在。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T18:43:39.750

您面临的问题是`ONLY`servlet 路径。

开发模式和部署环境中的环境和文件夹结构将完全不同。

在下面的链接中，解释了您面临的问题。

[Eclipse GWT 示例问候项目 RPC 失败](https://stackoverflow.com/questions/12623964/eclipse-gwt-sample-greeting-project-rpc-failure)。

# geolocation - 当我使用地理编码器谷歌时，我在 Dom-Tom 的城市中得到了错误的纬度

> ID：14942547
> 
> 赞同：0
> 
> 时间：2013-02-18T18:01:46.357
> 
> 标签：geolocation, geocoding, google-geocoder

我的脚本

```
<script type="text/javascript">
// ....
//....

var adresse = jQuery.trim(region) + ", " +jQuery.trim(adresse) + ", " + jQuery.trim(codePostal) + ", " + jQuery.trim(ville) + ", " +  jQuery.trim(pays);

var geocoder = new google.maps.Geocoder();

                    geocoder.geocode({ address: adresse, region: 'no' },
                    function (coords, status) {
                         if (status.toLowerCase() == 'ok') {
                                var lat = coords[0].geometry.location.lat();
                                var lon = coords[0].geometry.location.lng();    
                                console.log("lat :"+lat+",  lon :"+lon);

                         }
                         else {
                            alert("address not found");
                         }
                    } );

</scrip> 
```

我在法国的 dom-tom 地区遇到问题，当我插入此地址“La Réunion, 9 Rue des Poivriers, 97400, Saint-Denis, France”时我有 latlong false 我喜欢 latlong => (lat: 48.936181, lon : 2.3574429999999893) 但这是错误的

我希望有人有一个解决方案，如果是这样，谢谢你帮助我（对不起我的英语！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T21:14:13.303

我最终找到了解决方案，只是消除了这样的海外地区的国家：

```
<script type="text/javascript">
// ....
//....

if(jQuery.trim(pays) == 'France'){
var adresse = jQuery.trim(region) + ", " +jQuery.trim(adresse) + ", " + jQuery.trim(codePostal) + ", " + jQuery.trim(ville);
}
else{
var adresse = jQuery.trim(region) + ", " +jQuery.trim(adresse) + ", " + jQuery.trim(codePostal) + ", " + jQuery.trim(ville) + ", " +  jQuery.trim(pays);
}

//...

</script> 
```

非常感谢亚历克斯维恩

# android - 使用jsoup解析android html

> ID：14942551
> 
> 赞同：0
> 
> 时间：2013-02-18T18:01:58.283
> 
> 标签：android, html

试图在 android 上解析像[http://www.ts.kg/serials/这样的 html 页面。](http://www.ts.kg/serials/)试图用 htmlcleaner 来做，但没有用。试图用jsoup做到这一点。一开始是我的代码复杂。这是最短的代码。同样的事情适用于java请帮助。我的日志[http://smartpics.kz/imgs/1361209668WW5O.JPG](http://smartpics.kz/imgs/1361209668WW5O.JPG) 这是我的课：

```
public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    String[] names= {};
    String url = "http://www.ts.kg/mults/";

    try {
        Document doc = Jsoup.connect(url).get();
        Element e = doc.body();
        Elements ggg = e.getElementsByAttributeValue("class", "categoryblocks");
        for (int i =0;i<ggg.size();i++) {
            Element linkk = ggg.get(i);
            if(linkk.getElementsByTag("a")!=null){
                Element atom = linkk.getElementsByTag("a").first();
                String n = atom.getElementsByTag("span").first().text();
                names[i] = n;
            }

        }
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    ListView lvMain = (ListView) findViewById(R.id.listViewData);

    // создаем адаптер
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
        android.R.layout.simple_list_item_1, names);

    // присваиваем адаптер списку
    lvMain.setAdapter(adapter);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

} 
```

2013 年 2 月 20 日发布：

尝试按照 Shoshy 的建议进行操作（感谢您的回答），但没有奏效（可能是因为我的手不是来自正确的地方）。这是我修改后的代码： public class MainActivity extends Activity {

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    url = "http://www.ts.kg/mults/";
    pd = ProgressDialog.show(MainActivity.this, "Working...", "request to server", true, false);
    //Запускаем парсинг
    new AsyncExecution().execute();
}
private ProgressDialog pd;
String url;;
String names[];

private class AsyncExecution extends AsyncTask<Void, Void, Void>{

    @Override
    protected Void doInBackground(Void... params) {
          // here your task will be done in seperate thread from UI thread
          // and if you want to use the variables (that will be modifed here)
          // from anywhere in MainActivity, then you should declare them as global
          // variable in MainActivity. remember you cannot update UI from here , like
          // Toast message. if you want to do that you can use OnPostExecute 
          // method bellow .
               try {
                  ArrayList<String> array = new ArrayList<String>();
                  Document doc = Jsoup.connect(url).get();
                  Element e = doc.body();
                  Elements ggg = e.getElementsByAttributeValue("class", "categoryblocks");
                  for (int i =0;i<ggg.size();i++) {
                      Element linkk = ggg.get(i);
                      if(linkk.getElementsByTag("a")!=null){
                          Element atom = linkk.getElementsByTag("a").first();
                          String n = atom.getElementsByTag("span").first().text();
                          array.add(n);
                      }

                  }
                  for (int i = 0;i<array.size();i++){
                      names[i]=array.get(i);
                  }
              } catch (IOException e) {
                  // TODO Auto-generated catch block
                  e.printStackTrace();
              }
            return null;
    }

    @Override
    protected void onPostExecute(Void result) {         
        //Убираем диалог загрузки
        pd.dismiss();
        //Находим ListView
        ListView listview = (ListView) findViewById(R.id.listViewData);
        //Загружаем в него результат работы doInBackground
        listview.setAdapter(new ArrayAdapter<String>(MainActivity.this,
            android.R.layout.simple_list_item_1, names));

       }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T00:06:48.187

you have to make the request for getting the page in another thread from UI thread. you can use `AsyncTask`. i am giving some example by editing your code : the link about `AsyncTask` is : [about AsynckTask](http://developer.android.com/reference/android/os/AsyncTask.html)

```
public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    //the class is defined bellow
    new AsyncExecution().execute();

    //other codes.....
     .......................
}
/// your other codes .....

    // you need to add this class
    private class AsyncExecution extends AsyncTask<Void, Void, Void>{

    @Override
    protected Void doInBackground(Void... params) {
          // here your task will be done in seperate thread from UI thread
          // and if you want to use the variables (that will be modifed here)
          // from anywhere in MainActivity, then you should declare them as global
          // variable in MainActivity. remember you cannot update UI from here , like
          // Toast message. if you want to do that you can use OnPostExecute 
          // method bellow .
               try {
                  Document doc = Jsoup.connect(url).get();
                  Element e = doc.body();
                  Elements ggg = e.getElementsByAttributeValue("class", "categoryblocks");
                  for (int i =0;i<ggg.size();i++) {
                      Element linkk = ggg.get(i);
                      if(linkk.getElementsByTag("a")!=null){
                          Element atom = linkk.getElementsByTag("a").first();
                          String n = atom.getElementsByTag("span").first().text();
                          names[i] = n;
                      }

                  }
              } catch (IOException e) {
                  // TODO Auto-generated catch block
                  e.printStackTrace();
              }
    }

    @Override
    protected void onPostExecute(Void result) {

        }

} 
```

# batch-file - 我需要一种使用批处理提示用户输入的方法

> ID：14942553
> 
> 赞同：0
> 
> 时间：2013-02-18T18:02:02.853
> 
> 标签：batch-file

我注意到一篇关于如何制作一个批处理的帖子，该批处理会在输入时打开另一个批处理。但是，我需要一种让代码暂停的方法，直到输入正确的输入，然后继续。

例如，代码会询问访问代码是什么？

然后用户将输入正确的代码，例如 123。

然后代码会说“欢迎！” 然后它会执行另一个问题，比如“你今天想做什么？” 会有一个选项列表：

一个游戏

B. 浏览

C. 没关系

用户将输入 a、b 或 c，脚本将启动游戏或 Web 浏览器。如果用户选择了 C，那么它将退出。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T18:10:41.003

```
@echo off

echo Welcome!
echo What do you want to do today?
echo.
echo A. Game
echo.
echo B. Browse
echo.
echo C. Nevermind
echo.

choice /C:ABC /N /M "Enter your choice:  "
if "%errorlevel%"=="1" goto :game
if "%errorlevel%"=="2" goto :browse
if "%errorlevel%"=="3" goto :nevermind
goto :error 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T23:06:00.347

我认为稍微修改版本的代码应该可以正常工作。

```
@Echo off
:Start
cls
echo Welcome !
echo To Greet press one.
echo For Goodbye press two.
echo To Abort press 3 
ECHO.
ECHO.

SET /p Option=Choice:
if "%Option%"=="1" GOTO Sub_MenuA
if "%Option%"=="2" GOTO Sub_MenuB
if "%Option%"=="3" GOTO Sub_MenuC
if "%Option%"=="quit" GOTO EOF
Goto Start

:Sub_MenuA
echo Hi There!
pause
Goto Start
:Sub_MenuB
echo tatas !
pause
Goto Start
:Sub_MenuC
echo Aborted
Pause
Goto Start
:EOF 
```

# asp.net-mvc - 带有条件自定义命令按钮的 MVC 中的 Kendo UI 网格

> ID：14942557
> 
> 赞同：4
> 
> 时间：2013-02-18T18:02:24.277
> 
> 标签：asp.net-mvc, button, command, kendo-ui, kendo-grid

我有一个 KendoUI Grid 我正在使用 MVC Web 应用程序，一切正常，但是我想添加一个自定义命令按钮，该按钮有条件地显示在 UI 中，并简单地在我的控制器上执行一个命令，传递给它所需的参数。

```
columns.Command(command => command.Custom("UnlockAccount").SendDataKeys(true).Click()) 
```

该命令如上所述指定，但我只希望按钮在 DataItems IsLocked 属性为 true 时显示。

我也无法弄清楚如何在控制器上调用和方法。我在剑道网站上找不到这个演示，也不知道如何推进。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-09T22:07:01.953

下面是使用客户端模板作为条件命令按钮的具体示例。

```
const string ShowUpdateButton = "#if (IsNetReversal == false) {#<a class='k-button k-button-icontext k-grid-edit' href='\\#'><span class='k-icon k-edit'></span>Update</a>#}#";
const string ShowReverseButton = "#if (IsNetReversal == false) {#<a class='k-button k-button-icontext k-grid-reverse' href='/JournalDetail/Reverse/#: ID #'  ><span class='k-icon k-reverse'></span>Reverse</a>#}#";
const string ShowDeleteButton = "#if (IsAdjustment == true) {#<a class='k-button k-button-icontext k-grid-delete' href='\\#'><span class='k-icon k-delete'></span>Delete</a>#}#"; 
```

您可以内联模板，但如果您声明常量然后使用 string.format 连接它们，我发现它更容易（特别是对于多个按钮）。

```
col.Template(o => o).ClientTemplate(string.Format("{0}{1}{2}", ShowUpdateButton, ShowDeleteButton, ShowReverseButton)); 
```

好处是它将与弹出编辑器一起使用，而当用户取消编辑时，jquery hacks 将忽略条件状态。弹出编辑器中的取消将从视图模型或 Kendo 存储它的任何位置恢复网格行，这会导致任何 jquery/javascript hack 之前的按钮状态。上面的方法也将自动连接标准命令，因为我为客户端模板复制了它们的 HTML 输出。

不利的一面是，如果 Kendo 更改命令按钮的模式，客户端模板可能会失败。我厌倦了除此之外的其他几种方法，这种方法的缺点似乎比其他方法更好。

关于剑道论坛的注意事项：截至本文发布之日，他们似乎不允许不支付支持费用的人在论坛上发帖，所以我建议在这里发布问题。他们监控 Stack Overflow，根据我的经验，他们似乎在这里更快地回答问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T18:10:13.643

改用模板列 - 通过**ClientTemplate**方法。

条件模板在[这里](http://docs.kendoui.com/getting-started/framework/templates/overview)和论坛上多次介绍 - 命令列不是那么灵活。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-07-10T17:38:55.227

从 2018 年 12 月发布的 Kendo 开始，您现在可以更轻松地有条件地显示自定义按钮，但它仍然依赖 JavaScript 来完成它的工作，这个函数应该在您的 dataGrid 之前定义，否则您会遇到问题。

```
function showCommand(dataItem) {
        console.log("determining to hide or show" + dataItem);
        // show the Edit button for the item with Status='New'
        if (dataItem.Status == 'New') {
            return true;
        }
        else {
            return false;
        }       
} 
```

然后是网格的代码。

```
.Columns (columns => {
columns.Command (
        command => command.Custom ("Approve")
        .Visible ("showCommand")
        .Click ("approveFunc")
    )
    .Width (100)
    .HeaderTemplate ("Actions")
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-17T14:32:07.113

*您可以通过Visible*属性控制自定义命令按钮的可见性。

```
columns.Command(command => command.Custom("UnlockAccount").SendDataKeys(true).Click().Visible("unlockAccountVisible")) 
```

*Visible*属性接受 JS 函数名称并将当前*dataItem*作为参数传递。评估按钮可见性的 JS 函数：

```
<script>
  function unlockAccountVisible(dataItem) {
  // show the UnlockAccount button only when data item property IsLocked == true
  return dataItem.IsLocked;
  }
</script> 
```

[在有条件地显示命令按钮](https://docs.telerik.com/aspnet-mvc/helpers/grid/how-to/editing/show-command-buttons-conditionally)kendo-ui 文档文章中阅读更多内容。

# java - 在另一个方法中调用带有参数的方法

> ID：14942558
> 
> 赞同：0
> 
> 时间：2013-02-18T18:02:34.703
> 
> 标签：java

我需要在另一个方法中调用带有参数的方法。这是我的代码：

```
 public void createNodesAndRelationships(List<String[]> all, GraphDatabaseService      graphDb) {

    Node firstNode = null;
    Node secondNode = null;
    Relationship relationship;

    //register the shutdown msg
    registerShutdownHook(graphDb);
    Index<Node> nodeIndex;
    for (int i = 0; i < all.size(); i++) {
        Transaction tx = graphDb.beginTx();
        long id, id2;
        try {
            //convert IPs to long numbers format
            long ip1 = Long.parseLong(all.get(i)[0]);
            long ip2 = Long.parseLong(all.get(i)[1]);

            //check if src higher than dest
            //if yes reorder src < dest
            //this is used make relationships from lower IP to higher ones
            if (ip1 > ip2) {
                long ip3 = ip1;
                ip1 = ip2;
                ip2 = ip3;
            }
            //LuceneIndexService finder = new LuceneIndexService(graphDb);
            //firstNode = finder.getSingleNode("IP", all.get(i)[0]);
            //firstNode = null;
            nodeIndex = graphDb.index().forNodes("users");

            //get node if exists or create it
            firstNode = getOrCreateNode(graphDb, "IP", ip1);
            if (firstNode == null) {
                firstNode = graphDb.createNode();
                firstNode.setProperty("IP", ip1);
                nodeIndex.add(firstNode, "IP", ip1);
                Node node = graph.addNode("Ip");
                node.setProperty("IP",ip1);
            }
            //secondNode = finder.getSingleNode("IP", all.get(i)[1]);
            //secondNode = null;
            secondNode = getOrCreateNode(graphDb, "IP", ip2);
            if (secondNode == null) {
                secondNode = graphDb.createNode();
                secondNode.setProperty("IP", ip2);
                nodeIndex.add(secondNode, "IP", ip2);
                Node node2 = graph.addNode("Ip");
                node2.setProperty("IP",ip2);
            }

            //get relationships of one IP (src)
            Iterable<Relationship> rels = firstNode.getRelationships(RelTypes.COMMUNICATE);
            Iterator it = rels.iterator();

            //set relationship still not found
            boolean found = false;
            while (it.hasNext() && found == false) {
                Relationship rel = (Relationship) it.next();

                //get dest node from relationship
                Node otherNode = rel.getOtherNode(firstNode);

                //if dest IP == relationship dest
                //then update relationship weight
                if (otherNode == secondNode) {
                    int weight = Integer.parseInt(all.get(i)[2]);
                    int relWeight = Integer.parseInt(rel.getProperty("weight").toString());
                    int finalWeight = weight + relWeight;
                    rel.setProperty("weight", finalWeight);
                    System.out.println("index: " + i + " srcID: " + firstNode.getId() + " src:" + firstNode.getProperty("IP") + " dest: " + secondNode.getProperty("IP") + " weight: " + rel.getProperty("weight"));
                     Node rell = graph.addEdge("IP","IP",null);
                      rell.setProperty("IP",finalWeight);
                    //relationship found
                    found = true;
                }

            }

            //relationship not found
            if (found == false) {

                //create new relationship
                relationship = firstNode.createRelationshipTo(secondNode, RelTypes.COMMUNICATE);
                relationship.setProperty("weight", all.get(i)[2]);
                 Node rell = graph.addEdge("weight","IP","IP");
                     rell.setProperty("IP",RelTypes.COMMUNICATE);
                System.out.println("index: " + i + " srcID: " + firstNode.getId() + " src:" + firstNode.getProperty("IP") + " dest: " + secondNode.getProperty("IP") + " weight: " + relationship.getProperty("weight"));
            }

            tx.success();
        } finally {
            tx.finish();
            id = firstNode.getId();
            Node testnode = graphDb.getNodeById(id);
            id2 = secondNode.getId();
            Node testnode2 = graphDb.getNodeById(id2);
            System.out.println(testnode.getId() + " " + testnode2.getId());
        }
    }
}

public void run() {

     contentPane = new JPanel();
    contentPane.setBackground(Color.DARK_GRAY);
    contentPane.setBorder(new EmptyBorder(0,0,0,0));
    contentPane.setLayout(new BorderLayout(0, 0));
    setContentPane(contentPane);
    JPanel panelSettings = new JPanel();
    panelSettings.setBorder(new EmptyBorder(0, 8, 0, 8));
  //  panelSettings.setBackground(SystemColor.activeCaption);
    panelSettings.setLayout(new FlowLayout());
     panelSettings.add(b1);
    contentPane.add(panelSettings, BorderLayout.WEST);

    viewer.enableAutoLayout();
    view = viewer.addDefaultView(false);

    contentPane.add(view, BorderLayout.CENTER);

    setSize(800, 600);
    setVisible(true);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

} 
```

问题是如何在方法 run() 中调用方法 createNodesAndRelationships(...) ？我需要使用 Node node = graph.addNode("Ip") 和 node.setProperty("IP",ip1) 来绘制图表。谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T07:08:39.763

将此移动`registerShutdownHook(graphDb);`到您创建`EmbeddedGraphDatabase`.

然后只需使用您的数组和数据库作为参数调用该方法。

# ruby-on-rails-3 - cucumber + capybara 步骤定义 - 发送 POST 请求

> ID：14942559
> 
> 赞同：-1
> 
> 时间：2013-02-18T18:02:37.013
> 
> 标签：ruby-on-rails-3, cucumber, capybara, webrat

我有以下步骤定义：

```
When /^I upload it$/ do

end 
```

这与文件上传有关。capybara 中的访问方法，据我所知，这是一个仅限 GET 的方法.. 进行 POST 请求的唯一方法是通过实现：

```
visit "/files/new"
within('#upload-form') do
  attach_file('File', @files_path+'/file.txt')
  click_button('Upload')
end 
```

这似乎不是一个非常强大的测试，因为它依赖于文件/新模板中的 HTML 和表单标签。

有没有更好的方法来处理这个问题，或者这样做可以吗？我想到了这样的事情：

发布 files_new_path { 文件：=> 'a_file_on_the_system.txt' }

但是黄瓜测试又是集成测试..那么在这个级别编写测试的“官方”或最佳方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T18:25:09.710

水豚代码模仿人类行为。您不能指望人类“发布”，而只能“访问”、“click_button”等。

您提到的语法更适合控制器测试，但不适合与 Capybara 的集成测试。

在我看来，集成测试的最佳风格是像人一样思考和行动，而不是像机器一样思考和行动。

# ios - NSManagedObjectContext 类别

> ID：14942562
> 
> 赞同：0
> 
> 时间：2013-02-18T18:02:46.480
> 
> 标签：ios, cocoa, core-data, nsmanagedobjectcontext, anti-patterns

我经常在多个类中设置获取请求以从核心数据中检索“ `allRecipes`”或“ ”（以及其他一些结果）。`lastModifiedDate`

为此使用专门的类别 , 会很方便`NSManagedObjectContext+RecipeAppConveniences`。我真的不需要把这个通用化，我会根据具体情况决定是否经常获取相同的东西以使其在该类别中有用。

这是标准做法吗？我没有太多使用类别，只是想检查它不是反模式，并且我没有忽略一些会导致我痛苦的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T18:06:37.213

它不会是一种反模式，如果你认为这会使你的代码通用、可读，你可以选择它。

它被添加到objective-c 只是为了这种灵活性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-04T21:59:31.043

Apple 的方法是将方法添加到以 NSManagedObjectContext 作为参数的 NSManagedObject 子类中，例如

```
@interface Recipe : NSManagedObject

+ (NSArray *)allRecipesInContext:(NSManagedObjectContext *)moc;

@end 
```

这种模式也更好地与用于插入新对象的新 API 保持一致，例如`[Recipe.alloc initWithContext:moc]`.

# ios - Objective C 在执行 self = [super init] 之后是否 self 指向父级？

> ID：14942567
> 
> 赞同：1
> 
> 时间：2013-02-18T18:03:17.830
> 
> 标签：ios, objective-c

当我有如下代码时：

```
self = [super init] 
```

self 指向 super 吗？如果是这样，你为什么要这个？如果我的实例对象有变量“someVal”，我将无法通过执行 [self someVal] 来获得它。正确的？

那么当 self 指向 super 时，我将如何使用 self 来访问实例变量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T18:25:13.107

> self 指向 super 吗？

这真的是相反的。`super`实际上与 相同`self`，只是它告诉编译器从超​​类而不是类本身开始寻找方法实现。您可以通过记录 的值`super`和`self`;的值来检查这一点。你会发现它们都指向同一个地址。

当你创建一个对象时，你这样做：

```
Foo *f = [[Foo alloc] init]; 
```

分配将成为您正在创建的对象的`alloc`内存，但在该内存被初始化之前，它只是一块内存——不是有效的对象。如果`Foo`是 的子类`Bar`并且`Bar`是 的子类`NSObject`，那么按照惯例 Foo 的初始化器会调用 Bar 的，而 Bar 的会调用 NSObject 的，这样初始化就按顺序进行：首先由 NSObjects 初始化内存`-init`，Bar 的 init 接收返回的值并将其分配给`self`. 然后它继续执行任何特定于 Bar 的初始化，并返回`self`. Foo`-init`然后将返回的值`self`再次分配给，最后进行任何 Foo 特定的初始化。

所有分配给的`self`东西可能看起来既多余又令人困惑。这实际上只是一种约定，但目的是允许超类的初始化程序返回一些对象，而不是分配的对象，包括`nil`. 因此，例如，如果由于`Bar`某种原因初始化失败，则`-[Bar init]`可能返回 nil。`nil`可能返回的可能性`[super init]`是我们将`self = [super init]`赋值放在条件中的原因：如果赋值为`nil`，则跳过初始化部分并`nil`返回。也有`-[Bar init]`可能返回指向已分配对象以外的对象的指针，例如当与正在创建的对象相似的对象已经存在并且可以重用时。

大多数情况下，您返回的指针与您从 中获得的指针`-init`相同`+alloc`，因此您*可以这样*写：

```
Foo *f = [Foo alloc];
[f init]; 
```

但是，如果您这样写，则假设您的类的初始化程序和它继承的所有类将*始终*返回相同的对象，并且永远不会返回`nil`。通过这样做，你打破了约定，严重地束缚了你自己和编写 Foo 继承的类的人——如果他们在类的未来版本中返回不同的对象，他们将破坏你的代码。此外，看起来你不知道自己在做什么。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T18:07:09.640

> self 指向 super 吗？

这个问题在实例方法中没有意义，因为实际上`super`并没有具体/实际的指向实例的指针，它只是表明必须调用超类的实现。并且由于在*大多数*对象（类簇除外）所有方法的情况下`return self;`，答案是**否定的：指向实例的实际指针本身不会神奇地改变。**

记录一下：异常是由类簇（大多数 Cocoa 容器类，例如 、 等）表现出来`NSString`的`NSArray`。这些类通常有一个初始化方法，该方法返回与最初分配的实例不同的实例，并且该类是原始类的具体子类`self`。例如，`NSString`初始化程序的实现可能是：

```
@implementation NSString

- (NSString *)init
{
    [self release];
    self = [[__NSCFString alloc] init];
    return self;
}

@end 
```

这样做的原因是可以通过这种方式实现针对不同类型初始化的优化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T18:07:10.900

自我总是指向一个实例。当您使用 super 时，您引用的是父方法而不是父实例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T18:07:59.720

`self`表示当前类的实例。

`self = [super init]`表示 self 正在获取`[super init]`.

# actionscript-3 - AS3 项目内存使用

> ID：14942572
> 
> 赞同：-3
> 
> 时间：2013-02-18T18:03:30.873
> 
> 标签：actionscript-3

我正在为 AQW 制作饼干（游戏）

但有时它会崩溃所以，我有一个关于制作 ReOpen 功能的想法

但我需要检测项目的 Mem 使用情况，所以如果它很高，Prog 会自行重启

你能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T21:33:32.587

AQW Cracker 是一个 Prog，用于尝试用户名，直到两次匹配它在我打开它后崩溃（10 - 15 分钟）重新打开函数是一个重新启动项目的函数我注意到在它崩溃之前它的 CPU 使用率太高了

# php - 显示与用户实际使用的 php 页面不同的 URL

> ID：14942573
> 
> 赞同：1
> 
> 时间：2013-02-18T18:03:34.150
> 
> 标签：php, .htaccess, lighttpd

我正在用 PHP 为我的网站构建一个搜索引擎，现在当一个人提交搜索表单时，无论是通过按 Enter 还是单击提交按钮，它都会将它们带到一个如下所示的 url：`myDomain.com/search.php?search=searchedTerm&submit=`

有没有办法我可以“更改”网址，使其看起来像 myDomain.com?search=searchTerm 只是为了不显示为搜索引擎提供动力的文件的位置？

我的测试服务器可以接受 .htaccess 文件，但我的部署服务器正在运行 LighttPD。

因此，如果需要进行服务器配置来实现这一点，我要求它们在 .htaccess 或可以与运行 LighttPD 的服务器一起使用的解决方案中完成

或者，如果有人对这两种情况都有解决方案，那就太好了！

所以，总而言之，我想知道是否可以提交搜索并转到结果页面而不显示执行搜索的 php 文档的位置。

如果这在 PHP、.htaccess 或 lightPD 设置中可行，请告诉我。

PS我从哪里得到这个想法是谷歌没有透露执行搜索的文件的位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T18:06:16.553

也许您最好更新您的主 index.php 文件以接受搜索 GET 参数，然后包含 search.php（如果存在）：

```
 if( isset( $_GET['search'] ) ) {
    require( 'search.php' );
    exit( 0 );
  } 
```

# svm - 如何使用 SVM 设置具有彼此没有共同点的图像的类？

> ID：14942574
> 
> 赞同：1
> 
> 时间：2013-02-18T18:03:42.377
> 
> 标签：svm

我有一些易于分类的图像，例如：正方形、箭头、三角形等。我也有一些图像，我称之为“其他”，它们不能轻易分类为正方形、箭头或三角形，而且它们彼此没有任何共同点！这些其他图像应该被编译成一个大类“其他”还是从训练集中丢弃？

# python - Python中的模型IV

> ID：14942582
> 
> 赞同：6
> 
> 时间：2013-02-18T18:04:23.880
> 
> 标签：python, numpy, scipy, integration, physics

模型四。

方法：执行积分，作为 E 的函数，它为每个使用的电压值输出电流。这对 v_values 数组重复。方程可以在下面找到。

![在此处输入图像描述](../Images/7c4ae0afbdc82df7551da2b511c3158e.png)

虽然这个方程中的限制范围从`-inf`到`inf`，但必须限制限制，以便 (E+eV)^2-\Delta^2>0 和 E^2-\Delta^2>0，以避免极点。(\Delta_1 = \Delta_2)。因此，目前有两个积分，限制从`-inf`to`-gap-e*v` 和`gap`to `inf`。

`math range error`但是，尽管我相信我已经通过使用上述限制排除了麻烦的 E 值，但我一直返回 a 。错误的粘贴：http: [//pastie.org/private/o3ugxtxai8zbktyxtxuvg](http://pastie.org/private/o3ugxtxai8zbktyxtxuvg)

为这个问题的模糊性道歉。但是，任何人都可以看到明显的错误或代码滥用吗？

我的尝试：

```
from scipy import integrate
from numpy import *
import scipy as sp
import pylab as pl
import numpy as np
import math

e = 1.60217646*10**(-19)
r = 3000
gap = 400*10**(-6)*e
g = (gap)**2
t = 0.02
k = 1.3806503*10**(-23)
kt = k*t

v_values = np.arange(0,0.001,0.0001)

I=[]
for v in v_values:
    val, err = integrate.quad(lambda E:(1/(e*r))*(abs(E)/np.sqrt(abs(E**2-g)))*(abs(E+e*v)/(np.sqrt(abs((E+e*v)**2-g))))*((1/(1+math.exp((E+e*v)/kt)))-(1/(1+math.exp(E/k*t)))),-inf,(-gap-e*v)*0.9)
    I.append(val)
I = array(I)

I2=[]
for v in v_values:
    val2, err = integrate.quad(lambda E:(1/(e*r))*(abs(E)/np.sqrt(abs(E**2-g)))*(abs(E+e*v)/(np.sqrt(abs((E+e*v)**2-g))))*((1/(1+math.exp((E+e*v)/kt)))-(1/(1+math.exp(E/k*t)))),gap*0.9,inf)
    I2.append(val2)
I2 = array(I2)

I[np.isnan(I)] = 0
I[np.isnan(I2)] = 0

pl.plot(v_values,I,'-b',v_values,I2,'-b')
pl.show() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T11:33:14.597

这个问题更适合[计算科学](https://scicomp.stackexchange.com/)网站。仍然有一些要点供您考虑。

首先，积分范围是 和 的`(-oo, -eV-gap) U (-eV+gap, +oo)`交集`(-oo, -gap) U (gap, +oo)`。有两种可能的情况：

*   如果`eV < 2*gap`那么允许的能量值在`(-oo, -eV-gap) U (gap, +oo)`；
*   如果`eV > 2*gap`那么允许的能量值在`(-oo, -eV-gap) U (-eV+gap, -gap) U (gap, +oo)`.

其次，你在一个非常低的温度区域工作。`t`等于 0.02 K 时，玻尔兹曼因子中的分母为 1.7 µeV，而能隙为 400 µeV 。在这种情况下，指数的值对于正能量来说是巨大的，它很快就会超出 Python 使用的双精度浮点数的限制。由于这是*最小*可能的正能量，因此在更高的能量下事情不会变得更好。对于负能量，该值将始终非常接近于零。请注意，在此温度下，费米-狄拉克分布具有非常尖锐的边缘，类似于反射的 theta 函数。在`E = gap`你将有`exp(E/kT)`大约 6.24E+100。`E/kT > 709.78`当或时，您将超出范围`E > 3.06*gap`。

然而，使用这样的能量是没有意义的，因为在那个温度下，两个费米函数之间的差异很快就在区间之外变为零，该`[-eV, 0]`区间完全落在给定温度`V < (2*gap)/e`（0.8 mV）的间隙内。这就是为什么人们会期望当偏置电压小于 0.8 mV 时电流会非常接近于零。当它大于 0.8 mV 时，积分的主要值将来自 中的被积函数`(-eV+gap, -gap)`，尽管一些非零值来自于奇点附近的`E = gap`区域和一些来自奇点附近的区域`E = -eV-gap`。*您不应避免*DoS 中的奇点，否则您将无法在 I(V) 曲线中获得预期的不连续性（垂直线）（图像取自[维基百科](http://en.wikipedia.org/wiki/File:STJ_IV_Curve.jpg)）：

![STJ 电流电压图](../Images/e851365393a65ab636f9ca8352a56a46.png)

相反，您必须在每个奇点附近推导出等效的近似表达式并将它们整合。

如您所见，被积函数的值有许多特殊情况，在进行数值计算时必须将它们全部考虑在内。如果您不想这样做，您可能应该转向其他一些数学软件包，例如 Maple 或 Mathematica。这些具有更复杂的数值积分例程，并且可能能够直接处理您的公式。

请注意，这不是试图回答您的问题，而是很长的评论，不适合任何评论字段。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T21:43:44.473

数学范围错误的原因是您的指数趋于无穷大。取`v = 0.0009`and `E = 5.18e-23`，表达式`exp((E + e*v) / kt)`（我更正了 Hristo Liev 在您的 Python 表达式中指出的错字）`exp(709.984..)`超出了您可以用双精度数字表示的范围（最高 ca. 1E308）。

两个附加说明：

*   正如其他人所指出的，您可能应该使用提供较小范围内的数字的单位系统来重新调整方程式。也许，原子单位是一个可能的选择，因为它会设置`e = 1`，但我没有尝试将你的方程转换成它。（很可能，您的时间步长会变得非常大，因为在原子单位中，时间单位大约是 1/40 fs）。

*   通常，对浮点数使用指数表示法：`e = 1.60217E-19`而不是`e = 1.60217*10**(-19)`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T13:41:14.307

最终解决这个问题的最好方法是使用重载函数来防止`E`变量超过`\Delta`变量。

# php - 使用正则表达式从链接中获取子字符串

> ID：14942585
> 
> 赞同：-1
> 
> 时间：2013-02-18T18:04:34.740
> 
> 标签：php, regex

需要`theme10`从`catalog/view/theme/theme10/`

我试过这个：

```
preg_match('|catalog/view/theme/(.*)/|',$html, $theme); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T18:15:37.337

```
$matches = [] ;
$pattern = "@catalog/view/theme/([a-zA-Z0-9]+)/{0,1}@" ;
$string = "catalog/view/theme/theme10" ;

preg_match($pattern, $string, $matches) ;

echo $matches[1] ; 
```

最终有无`/`工作。

# ssis - 为什么使用两个参数时执行 SQL 任务会失败？

> ID：14942586
> 
> 赞同：3
> 
> 时间：2013-02-18T18:04:44.783
> 
> 标签：ssis

我正在使用 SQL Server Data Tools (SSDT) 2010。在*执行 SQL 任务*中出现以下错误：

```
Multiple-step OLE DB operation generated errors. Check each OLE DB status value, 
if available. No work was done 
```

SQL 语句设置为：

```
INSERT INTO DerivedSoftware
           (Name, VendorID, RuleID, GroupID, SourceEnumID, DeviceID)
    VALUES ('?', '1', '1', '1', '1', ?) 
```

使用的参数是数据类型*String*和*Int32*。

如果我编辑 Execute SQL Task 以便它只使用这些参数之一，它工作正常。任何一个都可以正常工作。但是尝试使用两者都失败并出现上述错误。

在 SQL Server Management Studio 中手动运行类似的命令可以正常工作。

有谁知道为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T18:19:23.067

更改查询语句以删除**`'`**第一个参数占位符周围的单引号 ( )。将其更改**`'?'`**为简单**`?`**

### 从：

```
INSERT INTO DerivedSoftware
(Name, VendorID, RuleID, GroupID, SourceEnumID, DeviceID)
VALUES ('?', '1', '1', '1', '1', ?); 
```

### 至：

```
INSERT INTO DerivedSoftware
(Name, VendorID, RuleID, GroupID, SourceEnumID, DeviceID)
VALUES (?, '1', '1', '1', '1', ?); 
```

### 问题原因：

当您将第一个参数占位符括在单引号中时，它实际上被视为字符串值。我假设您在*`Parameter Mapping`*选项卡上按以下提到的顺序定义了参数：

*   **`String`**数据类型，换句话说**`VARCHAR`**
*   **`Long`**数据类型参数

现在，第一个问号被视为文字字符串值。*Execute SQL Task*试图将字符串值传递给第二个问号，这实际上是一个整数字段。这导致`Execute SQL Task`失败，因为它无法将字符串插入整数字段。

# sas - 需要使用 sas 重复从多个文件读取数据并在从单独文件创建的单独数据集上运行频率

> ID：14942589
> 
> 赞同：0
> 
> 时间：2013-02-18T18:04:54.430
> 
> 标签：sas

我是 SAS 新手，在创建以下程序时遇到了一些困难。

我的要求是传递动态生成的文件名并读取它，这样就不必编写五次代码来从 5 个不同的文件中读取数据，然后在数据集上运行频率。

我提供了下面的代码，并且必须为 50 多个文件编写此代码：

**代码**

```
filename inp1 '/chshttp/prod/clients/coms/raw/coms_coms_relg_f1102_t1102_c10216_vEL5535.raw';
filename inp2 '/chshttp/prod/clients/coms/raw/coms_coms_relg_f1103_t1103_c10317_vEL8312.raw';
filename inp3 '/chshttp/prod/clients/coms/raw/coms_coms_relg_f1104_t1104_c10420_vEL11614.raw';
filename inp4 '/chshttp/prod/clients/coms/raw/coms_coms_relg_f1105_t1105_c10510_vEL13913.raw';
filename inp5 '/chshttp/prod/clients/coms/raw/coms_coms_relg_f1106_t1106_c10628_vEL17663.raw';

data test;

Do i = 1 to 5;

infile_name = 'inp' || i;

infile infile_name recfm = v lrecl=1800 end=eof truncover;

        INPUT 
                @1      E_CUSTDEF1_CLIENT_ID                          $CHAR5.
                @1235   E_MED_PLAN_CODE                               $CHAR20.
                @1090   MED_INS_ELIG_COVERAGE_IND                     $CHAR20.
                @1064   MED_COVERAGE_BEGIN_DATE                       $CHAR8.
                @1072   MED_COVERAGE_TERM_DATE                        $CHAR8.
                ;

                if E_CUSTDEF1_CLIENT_ID ='00002' then 

                output test;
end;
run;

proc freq data = test;
tables E_CUSTDEF1_CLIENT_ID*E_MED_PLAN_CODE / list missing;

run; 
```

请帮忙！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T00:07:13.360

要直接回答您的问题，这里有一个 SAS 宏来读取每个文件并运行`PROC FREQ`：

```
%macro freqme(dsn);

data test;
   infile "&dsn" recfm = v lrecl=1800 end=eof truncover;

   INPUT  @1   E_CUSTDEF1_CLIENT_ID        $CHAR5.
         @1235   E_MED_PLAN_CODE             $CHAR20.
         @1090   MED_INS_ELIG_COVERAGE_IND   $CHAR20.
         @1064   MED_COVERAGE_BEGIN_DATE     $CHAR8.
         @1072   MED_COVERAGE_TERM_DATE      $CHAR8.
         ;

   if E_CUSTDEF1_CLIENT_ID = '00002';
run;

proc freq data=test;
   tables E_CUSTDEF1_CLIENT_ID*E_MED_PLAN_CODE / list missing;
run;
proc delete data=test;
run;
%mend;

%freqme(/chshttp/prod/clients/coms/raw/coms_coms_relg_f1102_t1102_c10216_vEL5535.raw);
%freqme(/chshttp/prod/clients/coms/raw/coms_coms_relg_f1103_t1103_c10317_vEL8312.raw);
%freqme(/chshttp/prod/clients/coms/raw/coms_coms_relg_f1104_t1104_c10420_vEL11614.raw);
%freqme(/chshttp/prod/clients/coms/raw/coms_coms_relg_f1105_t1105_c10510_vEL13913.raw);
%freqme(/chshttp/prod/clients/coms/raw/coms_coms_relg_f1106_t1106_c10628_vEL17663.raw); 
```

请注意，我`PROC DELETE`在创建报告后添加了删除 SAS 数据集的步骤。我做了更多的说明，因为您没有说您需要将该文件作为 SAS 数据集进行后续处理。

您可以将其用作其他宏编程的模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T18:57:02.277

这是一个你可以适应的例子。有不同的方法可以做到这一点，但这是一个 - 取决于你想要的频率。

第 1 步：创建一个数据集“my_filenames”，将您要读取的文件名（每行一个）存储在变量 FILE_NAME 中。

第二步：读入文件。

```
data my_data;
set my_filenames;
infile a filevar=file_name <the rest of your options>;
<your input statement>;
run;

proc freq data=mydata;
by file_name;
<your table statements>;
run; 
```

这是一个简单的数据驱动代码，不需要宏或将大量数据存储在不应包含数据的事物中（宏变量、文件名等）

# java - 创建两种接受数字作为参数的方法，一种是数字的平方，另一种是数字的立方

> ID：14942591
> 
> 赞同：0
> 
> 时间：2013-02-18T18:04:59.450
> 
> 标签：java

我已经设法完成了这个问题的一部分，但我遇到了立方体方法的问题。我需要从多维数据集方法中调用 square 方法来返回多维数据集结果。示例：对数字 5 求平方，结果将是 25。然后我将此方法调用到立方体方法中以返回答案 125。有人可以告诉我哪里出错了吗？

这是我的代码：

```
import java.util.*;
public class ExamPaper2011
{
public static void main(String [] args){

    int totalSquared = 0;
    int totalCubed = 0;

    cubedNumber(totalSquared, totalCubed);
}

 public static int squaredNumber(int totalSquared){

    Scanner in = new Scanner(System.in);

    System.out.print("Please enter a number to square: ");
    int numSquare = in.nextInt();
    System.out.println("You entered " + numSquare);
    totalSquared = (int) Math.pow (numSquare, 2); 
    System.out.println("The number squared is " + totalSquared);
    return totalSquared;
}

public static int cubedNumber(int totalSquared, int totalCubed){
    squaredNumber(totalSquared);
    totalSquared = (int) Math.sqrt(totalSquared * totalSquared);
    System.out.println(totalSquared);
    totalCubed = totalSquared;
    totalCubed = (int) Math.pow (numSquare, 3); 
    return totalCubed;
}

} 
```

方法 cubedNumber 似乎返回 0。非常感谢任何帮助。请原谅我的基本代码。这是一个班级会议。

这是答案。再次感谢大家。

```
import java.util.*;
public class ExamPaper2011
{
public static void main(String [] args){

    Scanner in = new Scanner(System.in);

    System.out.print("Please enter a number to square and cube: ");
    int n = in.nextInt();

    cubedNumber(n);

}

public static int squaredNumber(int n){//Question 4
    System.out.println("You entered " + n);
    n = n * n;
    System.out.println("Squared = " + n);
    return n;
}

public static int cubedNumber(int n){
    squaredNumber(n); 
    n = n * squaredNumber(n);
    System.out.println("Cubed = " + n);
    return n;
}

} 
```

我很感激这个很棒的反馈。真的很有帮助。谢谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T18:14:40.990

如何将用户输入检查部分移出您的逻辑方法？

```
public class ExamPaper2011
{
    public static void main(String [] args){

        Scanner in = new Scanner(System.in);

        System.out.print("Please enter a number: ");
        //here you get user input, maybe ask user what calculation he wants to do ^2 Or ^3
        //...get n from user input.
        //if he wants square
        print squaredNumber(n);
        //if he wants cubed
        print cubedNumber(n);
    }

    public static int squaredNumber(int n){
        return n*n;

    }

    public static int cubedNumber(int n){
        return n*squaredNumber(n);
    }

} 
```

# backbone.js - 骨干集合创造成功

> ID：14942592
> 
> 赞同：3
> 
> 时间：2013-02-18T18:05:00.043
> 
> 标签：backbone.js

伙计们，我有这个代码：

```
 var newCustomer = customers.create({
                'id_pais' : usrinfo.country,
                'nombre' : usrinfo.name,
                'apellido' : usrinfo.lastname,
                'pasaporte' : usrinfo.passport,
                'mail' : usrinfo.mail,
                'birth' : usrinfo.birth
            });
            console.log(newCustomer.get('id'));
            // Create Guest
            var cama = beds.get(usrinfo.dorm);
            var newGuest = guests.create({
                'id_room' : cama.get('id_room'),
                'id_bed' : usrinfo.dorm,
                'id_customer' : newCustomer.get('id'),
                'inDate' : usrinfo.inDate,
                'outDate' : usrinfo.outDate,
                'notas' : usrinfo.notes
            }); 
```

问题是，我需要获取 newCustomer 的 RESTFul 给定 ID，但不知道有什么方法可以等到服务器响应发布请求。有任何想法吗？

谢谢！

更新：

我让它这样工作：

```
 var newCustomer;
            newCustomer = customers.create({
                'id_pais' : usrinfo.country,
                'nombre' : usrinfo.name,
                'apellido' : usrinfo.lastname,
                'pasaporte' : usrinfo.passport,
                'mail' : usrinfo.mail,
                'birth' : usrinfo.birth
            }, {
                success: function(response){
                    var a = newCustomer.changedAttributes();
                    var cama = beds.get(usrinfo.dorm);
                    var newGuest = guests.create({
                        'id_room' : cama.get('id_room'),
                        'id_bed' : usrinfo.dorm,
                        'id_customer' : a.attributes.id,
                        'inDate' : usrinfo.inDate,
                        'outDate' : usrinfo.outDate,
                        'notas' : usrinfo.notes
                    });
                }
            }); 
```

所以，有：

```
var a = newCustomer.changedAttributes(); 
```

然后我可以访问 id，如下所示：

```
a.attributes.id 
```

谢谢您的帮助！

更新 2：

现在的问题是，主干没有使用从服务器返回的新值更新模型的数据。

任何想法？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T18:21:01.013

您可以`success`在创建选项中提供回调：

```
var newCustomer;
newCustomer = customers.create({
    'id_pais' : usrinfo.country,
    'nombre' : usrinfo.name,
    'apellido' : usrinfo.lastname,
    'pasaporte' : usrinfo.passport,
    'mail' : usrinfo.mail,
    'birth' : usrinfo.birth
}, {
    success: function() {
        console.log(newCustomer.get('id'));
        // Create Guest
        var cama = beds.get(usrinfo.dorm);
        var newGuest = guests.create({
            'id_room' : cama.get('id_room'),
            'id_bed' : usrinfo.dorm,
            'id_customer' : newCustomer.get('id'),
            'inDate' : usrinfo.inDate,
            'outDate' : usrinfo.outDate,
            'notas' : usrinfo.notes
        });
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T00:27:21.777

发现问题！这是 Laravel 控制器返回的 Eloquent 对象，而不仅仅是模型的数据。

使用此代码，可以完美运行：

```
 var newCustomer;
        newCustomer = customers.create({
            'id_pais' : usrinfo.country,
            'nombre' : usrinfo.name,
            'apellido' : usrinfo.lastname,
            'pasaporte' : usrinfo.passport,
            'mail' : usrinfo.mail,
            'birth' : usrinfo.birth
        }, {
            success: function(response){
                var a = newCustomer.changedAttributes();
                var cama = beds.get(usrinfo.dorm);
                var newGuest = guests.create({
                    'id_room' : cama.get('id_room'),
                    'id_bed' : usrinfo.dorm,
                    'id_customer' : a.attributes.id,
                    'inDate' : usrinfo.inDate,
                    'outDate' : usrinfo.outDate,
                    'notas' : usrinfo.notes
                });
            }
        }); 
```

非常感谢！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T18:24:45.483

我在以下页面上找到了这个：http: [//lab.devaddiction.com/backbone-js-tutorial-synchronization-and-persistence/](http://lab.devaddiction.com/backbone-js-tutorial-synchronization-and-persistence/)

```
user.save({}, {              // generate POST /users - content: {name: 'John'}
     success: function() {
        // Assuming that the server returned the object {"id": 1}
        alert(user.id);  // show 1
     }
 }); 
```

所以回调中的 init newguest 应该可以完成这项工作，不是吗？

否则，您应该能够收听集合与服务器同步后触发的“重置”事件。

希望能帮助到你

# c# - 从 XMLText Reader 读取并添加到类列表

> ID：14942593
> 
> 赞同：0
> 
> 时间：2013-02-18T18:05:01.603
> 
> 标签：c#, xml, list, class, xmltextreader

我在需要使用 XMLText Reader 阅读的网站上托管了一个 XML 文件。在阅读时，我需要将阅读 XML 文档中的项目添加到类列表中。我不确定我应该通过哪些参数以及 foreach 部分。

transList 是我的列表，Transaction 是我的课程。它们已在顶部全局定义，以供 XML Serializer 将来用于写入我已经编写的 XML 文件。

具有多个事务的 XML 文件

```
<portfolio>
<transaction>
<ticker>GOOG</ticker>
<action>buy</action>
<date>20071116</date>
<shares>44</shares>
</transaction>

public class Transaction
{
    public string ticker { get; set; }
    public string action { get; set; }
    public string date { get; set; }
    public int numShares { get; set; }
    public double price { get; set; }
}

List<Transaction> transList = new List<Transaction>();

void readPortfolio(string filename)
    {
        XmlTextReader reader = new XmlTextReader(filename);
        reader.WhitespaceHandling = WhitespaceHandling.None;

        foreach(var transaction in reader) //for each reader node equal to “transaction” do:
         {
                TransList.add(Transaction tr = new Transaction(ticker, action, date, number of shares))

         } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T18:36:30.183

尝试这个：

```
public class Transaction
{
    public string Ticker { get; set; }
    public string Action { get; set; }
    public string Date { get; set; }
    public int NumShares { get; set; }
    public double Price { get; set; }
}

void ReadPortfolio(string filename)
{
    if (File.Exists(filename))
    {
        var transList = new List<Transaction>();

        foreach (XElement transaction in XDocument.Load(filename).Descendants("transaction"))
        {
            XElement ticker = transaction.Element("ticker");
            XElement action = transaction.Element("action");
            XElement date = transaction.Element("date");
            XElement shares = transaction.Element("shares");
            XElement price = transaction.Element("price");

            transList.Add(new Transaction
                {
                    Ticker = ticker != null ? ticker.Value : string.Empty,
                    Action = action != null ? action.Value : string.Empty,
                    Date = date != null ? date.Value : string.Empty,
                    NumShares = shares != null ? int.Parse(shares.Value) : default(int),
                    Price = price != null ? double.Parse(price.Value) : default(double)
                });
        }
    }
} 
```

此方法处理可能缺少元素的情况，并且我已经稍微重写了您的代码以更符合惯例。它还检查文件是否存在。

这看起来像一个金融应用程序，所以我还应该指出，你最好使用`decimal`而不是`double`. `decimal`由于`double`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T18:24:50.273

这是使用 XDocument 执行此操作的方法...只需取消注释带有文件名的行（并注释解析常量的行！）并传入文件名。

```
class Program
{
    static void Main(string[] args)
    {
        var test = new AnotherXmlTest();
        test.readPortfolio("filename");

        //Put a break on this line and instect object 'test'
        Console.ReadLine();
    }
}

public class AnotherXmlTest
{
    public const string xml = @"<portfolio><transaction><ticker>GOOG</ticker><action>buy</action><date>20071116</date><shares>44</shares></transaction></portfolio>";

    public class Transaction
    {
        public string ticker { get; set; }
        public string action { get; set; }
        public string date { get; set; }
        public int numShares { get; set; }
        public double price { get; set; }
    }

    List<Transaction> transList = new List<Transaction>();

    public void readPortfolio(string filename)
    {
        //Use this instead!
        //XmlTextReader reader = new XmlTextReader(filename);
        //XDocument xDoc = XDocument.Load(reader);
        XDocument xDoc = XDocument.Parse(xml);

        transList.AddRange(from transaction in xDoc.Descendants("transaction")
                           select new Transaction
                           {
                               ticker = transaction.Element("ticker").Value,
                               action = transaction.Element("action").Value,
                               date = transaction.Element("date").Value,
                               numShares = Convert.ToInt32(transaction.Element("shares").Value)
                               // No price?? 
                           });

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T18:45:02.947

如果你想变得漂亮，[我提供的另一种](https://stackoverflow.com/a/14943087/197591)方法是使用 LINQ：

```
public class Transaction
{
    public string Ticker { get; set; }
    public string Action { get; set; }
    public string Date { get; set; }
    public int NumShares { get; set; }
    public double Price { get; set; }
}

void ReadPortfolio(string filename)
{
    if (File.Exists(filename))
    {
        var transList = new List<Transaction>();
        transList.AddRange(from transaction in XDocument.Load(filename).Descendants("transaction")
                           let ticker = transaction.Element("ticker")
                           let action = transaction.Element("action")
                           let date = transaction.Element("date")
                           let shares = transaction.Element("shares")
                           let price = transaction.Element("price")
                           select new Transaction
                               {
                                   Ticker = ticker != null ? ticker.Value : string.Empty,
                                   Action = action != null ? action.Value : string.Empty,
                                   Date = date != null ? date.Value : string.Empty,
                                   NumShares = shares != null ? int.Parse(shares.Value) : default(int),
                                   Price = price != null ? double.Parse(price.Value) : default(double)
                               });
    }
} 
```

# jquery - 用于选择具有空值属性的元素的 jQuery 选择器？

> ID：14942597
> 
> 赞同：4
> 
> 时间：2013-02-18T18:05:20.020
> 
> 标签：jquery, select, jquery-selectors

我正在使用下面的选择器来获取所有预先填充了值的表单输入。

```
$('input[value!=""]'); 
```

这很好用，所以我认为我可以使用以下选择器将相同的逻辑应用于我的选择元素，尽管它似乎选择了 Chrome 中的所有选择元素。

```
$('select[value!=""]'); 
```

下面是表单上两种选择的示例：

```
<select name="phone2_type" id="phone2_type">
  <option value="">Select one:</option>
  <option value="HOME">Home</option>
  <option value="CELL">Cell</option>
  <option value="BUSN">Business</option>
</select>

<select name="state" id="state">
  <option value="">Select one:</option>
  <option value="XX">Outside USA/Canada</option>
  <option value="AL" selected="selected">Alabama</option>
  <option value="AK">Alaska</option>
  ...
</select> 
```

我想选择第二个选择，因为它已经用 select="selected" 选择了一个值

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T18:06:26.703

`value`不是`select`标签的属性。

所以你需要尝试：

```
var emptySelect = $('select').filter(function() {
                     return $.trim( $(this).val() ) == '';
                  }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T18:09:06.363

对于选择，您需要使用 JQuery 提供的特殊选择器：：selected

所以

```
$('#state option:selected').val() 
```

是当前选定的值。

如果您需要对*选择*元素本身执行某些操作，您可以执行以下操作：

```
$('#select option:selected').parents('select').dosomething(...) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T18:10:26.410

```
$('select').has('option[selected="selected"]') 
```

将获得选择元素。**[jsFiddle 示例](http://jsfiddle.net/j08691/2hNAb/)**。

# css - 如何制作这个很酷的导航菜单

> ID：14942600
> 
> 赞同：0
> 
> 时间：2013-02-18T18:05:25.973
> 
> 标签：css, navigation

我在网上冲浪时发现了一个很酷的导航，我想在我自己的网站上使用它。但我真的不知道我怎么能做到。这是链接：[http](http://www.welikesmall.com) ://www.welikesmall.com有人有教程或想帮助我的人吗？

已经谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T18:09:44.230

这不是让人们为您编写代码的地方。我只是查看了该站点，所有源代码都可读且格式很好。我建议学习 CSS 和 javascript 的基础知识，以便更好地了解如何做你想做的事。

# c# - C#- 验证美国或加拿大邮政编码

> ID：14942602
> 
> 赞同：21
> 
> 时间：2013-02-18T18:05:26.487
> 
> 标签：c#, asp.net, .net

我正在使用以下方法来验证美国或加拿大的邮政编码，但我认为它对我来说效果不佳。请建议我更改正则表达式。

```
private bool IsUSorCanadianZipCode(string zipCode)
    {
        bool isValidUsOrCanadianZip = false;
        string pattern = @"^\d{5}-\d{4}|\d{5}|[A-Z]\d[A-Z] \d[A-Z]\d$";
        Regex regex = new Regex(pattern);
        return isValidUsOrCanadianZip = regex.IsMatch(zipCode);
    } 
```

谢谢。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-02-18T18:19:43.327

```
 var _usZipRegEx = @"^\d{5}(?:[-\s]\d{4})?$";
    var _caZipRegEx = @"^([ABCEGHJKLMNPRSTVXY]\d[ABCEGHJKLMNPRSTVWXYZ])\ {0,1}(\d[ABCEGHJKLMNPRSTVWXYZ]\d)$";

    private bool IsUSOrCanadianZipCode(string zipCode)
    {
        var validZipCode = true;
        if ((!Regex.Match(zipCode, _usZipRegEx).Success) && (!Regex.Match(zipCode, _caZipRegEx).Success))
        {
            validZipCode = false;
        }
        return validZipCode;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-03T22:27:49.483

如果您使用的是数据注释验证器，则可以使用正则表达式属性，如下所示：

```
[RegularExpression(@"(^\d{5}(-\d{4})?$)|(^[ABCEGHJKLMNPRSTVXYabceghjklmnprstvxy]{1}\d{1}[ABCEGHJKLMNPRSTVWXYZabceghjklmnprstv‌​xy]{1} *\d{1}[ABCEGHJKLMNPRSTVWXYZabceghjklmnprstvxy]{1}\d{1}$)", ErrorMessage = "That postal code is not a valid US or Canadian postal code.")] 
```

（正则表达式来自上面发布的链接@huMptyduMpty [http://geekswithblogs.net/MainaD/archive/2007/12/03/117321.aspx](http://geekswithblogs.net/MainaD/archive/2007/12/03/117321.aspx)，但我的正则表达式允许大小写字母）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-26T10:50:52.983

“在我的机器上”工作的美国邮政编码验证是

```
[RegularExpression(@"\d{5}$", ErrorMessage = "Invalid Zip Code")] 
```

# dart - 如何使用 Dart 获取点击元素的文本内容？

> ID：14942606
> 
> 赞同：1
> 
> 时间：2013-02-18T18:05:40.247
> 
> 标签：dart, dart-webui

我正在使用 dart 开发一个应用程序，我想获取点击元素的值。IE：

html:

```
<div id="blah">Value!!</div> 
```

镖：

```
void main(){
    query("#blah").onClick.listen(showValue);
}

void showValue(Event e){
   //Get #blah's innerHtml based on the Event(Something like e.target.innerHtml or e.target.value)
} 
```

任何人？我知道如何在 JS 中做到这一点，但我想知道是否有办法在 DART 中做到这一点！

**编辑**

谢谢大家，我会尽量清楚一点。我有一个循环动态生成 9 个元素并将它们添加到容器中。

代码：

```
var j = 0;
  var optionsSquare = query("#optionsPanel");
    while(j < 9){
      DivElement minorSquare = new DivElement();

      var minorSquareHeight = optionsSquare.clientHeight/3;
      var minorSquareWidth = optionsSquare.clientWidth/3;

      minorSquare
       ..attributes = {"class": "miniSugg"}
       ..style.width = (minorSquareWidth.round()-2).toString().concat("px")
       ..style.height = (minorSquareHeight.round()-2).toString().concat("px")
       ..style.float = "left"
       ..style.border = "1px solid"
       ..innerHtml = (j+1).toString();
       ..onClick.listen(showOptionsSquare);

      optionsSquare.children.add(minorSquare);
      j++;
    } 
```

如果我尝试使用@Pandian 的方式，它可以工作，但我只能得到循环内最后一个元素的值。我想要的是以某种方式追踪点击的元素并获得它的价值！

**编辑 2**

各位，刚刚解决了！

如果有人需要这些信息，我会把这里的代码作为回购：

```
void showOptionsSquare(Event e){
  window.location.hash = "#optionsPanel";
  mainDiv.style.opacity = (0.2).toString();

  DivElement clicked = e.target;
  window.alert(clicked.innerHtml);
} 
```

[]的

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T20:14:53.677

使用您的示例代码，您可以编写

```
print(e.target.innerHtml); 
```

在你的`showValue`函数内部，它会起作用。你得到一个错误或什么？如果您担心警告，您可以添加演员表`Element`or `DivElement`：

```
print((e.target as Element).innerHtml); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T18:36:20.400

试试下面...它会帮助你...

```
DivElement div;

void showValue(){
      window.alert(div.innerHTML); 
}

void main() { 
  div = query('#blah');
  div.on.click.add((Event e) => showValue());
} 
```

# azure-table-storage - 使用生成的共享访问签名将具有 REST API 的表实体插入 Azure 表存储

> ID：14942607
> 
> 赞同：4
> 
> 时间：2013-02-18T18:05:43.887
> 
> 标签：azure-table-storage

我正在尝试使用已使用安全 Web 服务生成的共享访问密钥将项目插入 Azure 表存储（以确保密钥安全）。我的问题是我收到 400（错误请求）错误。请有人能告诉我我做错了什么吗？

我从服务返回一个带有 SaS 的 Uri，例如

[https://myaccount.table.core.windows.net/l4nlog?sv=2012-02-12&se=2013-02-18T17:42:58Z&tn=L4NLog&sp=a&sig=rGImh0XZ8KcbMI+k1JuNvGGfq13UioYaQFXxg+M1an0=](https://myaccount.table.core.windows.net/l4nlog?sv=2012-02-12&se=2013-02-18T17:42:58Z&tn=L4NLog&sp=a&sig=rGImh0XZ8KcbMI+k1JuNvGGfq13UioYaQFXxg+M1an0=)

然后，我以 Microsoft 网站上指定的格式将表的信息添加到请求流中（除了 Atom 命名空间的属性定义为 xmlns:a="http://www.w3.org/2005/Atom "):

[http://msdn.microsoft.com/en-us/library/windowsazure/dd894033.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/dd894033.aspx)

我还添加：request.Method = "POST"; request.ContentType ="application/atom+xml" x-ms-date 为 RFS1123 格式

但是，我没有设置 Authorization 标头（这可能是我的失败），因为我认为 SaS 应该为我完成这项工作。

因此，任何指针将不胜感激......！

如果我错过了任何信息，请原谅我...

史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-12T14:25:15.507

这是一个难题。此错误表示您的请求中有问题。我建议尝试以下方法：

1-) 验证 SaaS 服务是否指向正确版本的存储服务 API（1.6、1.7、1.8 或任何其他版本）

2-) 验证 Azure 表存储的请求限制

3-）是的，您需要验证请求的身份验证，*（但我认为这不是问题）*

# ruby-on-rails - Ruby on Rails ActiveRecord 唯一性验证

> ID：14942608
> 
> 赞同：1
> 
> 时间：2013-02-18T18:05:53.083
> 
> 标签：ruby-on-rails, validation, rails-activerecord

我对 Rails 很陌生，并且正在阅读有关该主题的一些资源。我有一些问题。好的，假设我们确实有一个模型，可以验证某些属性的唯一性：

```
class User < ActiveRecord::Base
  attr_accesible :name
  validates :name, uniqueness: true
end 
```

因此，我现在有理由期望，我将无法在数据库中创建（或更准确地说——保存）两个具有相同名称的 User 实例。但是，该资源确实坚持认为它仍然是可能的！

> *   一些用户登录。
> *   多次点击“登录”按钮
> *   请求1在内存中创建用户（有效）
> *   请求 2 在内存中创建用户（有效）
> *   请求 1 保存成功
> *   请求 2 保存成功

后来这个来源建议将数据库中的索引添加到“名称”列并使其唯一。

但是，如果正如我之前所说的那样——在保存过程中进行验证，那么如何保存第二个请求呢？还是我失去了什么？

（我提到的资源是[Rails 教程](http://ruby.railstutorial.org/chapters/modeling-users#sec-format_validation)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T18:14:05.757

第二个请求在第一条记录保存到 DB 之前被触发，因此 rails 验证没有指定名称的记录并允许它保存。这就是为什么建议在数据库字段中添加一个唯一的，以避免这些边缘情况。

或者换句话说，记录通过内存中的验证。

# java - 如何在 facelet 页面中加载 CSS 文件

> ID：14942609
> 
> 赞同：0
> 
> 时间：2013-02-18T18:05:54.073
> 
> 标签：java, jsf, jakarta-ee, facelets

我有以下代码在母版页上收费，我需要为其插入特定的 css，但不起作用

```
<div xmlns="http://www.w3.org/1999/xhtml"
xmlns:h="http://java.sun.com/jsf/html" xmlns:ui="http://java.sun.com/jsf/facelets"    class="contenido">
<h:outputStylesheet library="css" name="style-pago-anual.css" target="head" />
<p id="miClase">Prueba de houtputStyle</p>
<h2 class="mod2">Cobro de Recibos</h2>
<p> Bienvenido a la Pagina de Cobros</p>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T20:27:40.310

假设您的 css 文件位于 WebContent/css 中，然后使用它

```
<link href="<%=request.getContextPath()%>/css/mycss.css" rel="stylesheet" type="text/css"> 
```

那应该加载css文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T18:08:47.150

JSF 有自己的方式来处理 CSS、Images 等资源，它被称为 Resource Handler。检查这些链接：

[http://www.mkyong.com/jsf2/resources-library-in-jsf-2-0/](http://www.mkyong.com/jsf2/resources-library-in-jsf-2-0/)

[JSF 资源库有什么用途，应该如何使用？](https://stackoverflow.com/questions/11988415/what-is-the-jsf-resource-library-for-and-how-should-it-be-used)

# javascript - node.js：异步回调值

> ID：14942613
> 
> 赞同：1
> 
> 时间：2013-02-18T18:06:03.520
> 
> 标签：javascript, node.js, asynchronous

我很困惑。我很想学习如何传递我在异步函数中获得的值。

我有一个具有基本身份验证功能的模块。在登录中，我要求用户模型搜索具有给定用户名的用户。

```
login: function(req){
    var username = req.body.username,
        password = req.body.password;

    user.find(username);
} 
```

然后用户模型继续并执行此操作。

```
exports.find = function(username){
console.log(User.find({username: username}, function(error, users){
    // I get nice results here. But how can I pass them back.
}));
} 
```

但是我怎样才能将该用户对象传递回登录函数呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T18:11:29.970

您需要将回调函数传递给该方法。Node.js 需要非常回调驱动的编程风格。

例如：

```
// in your module
exports.find = function(username, callback){
    User.find({username: username}, function(error, users){
        callback(error, users);
    });
}

// elsewhere... assume you've required the module above as module
module.find(req.params.username, function(err, username) {
    console.log(username);
}); 
```

所以你不*返回*值；你*传入*函数然后*接收*值（冲洗，重复）

您在 User 类上的登录方法将如下所示：

```
login: function(req, callback){
    var username = req.body.username,
        password = req.body.password;

    user.find(username, function(err, user) {
        // do something to check the password and log the user in
        var success = true; // just as an example to demonstrate the next line
        callback(success); // the request continues
    };
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T18:07:59.450

您不能将其传*回*（因为函数 os 是异步`login`的，并且在完成时已经返回）。但是您可以将其传递*给*另一个函数。

# ruby-on-rails - 为什么 Ruby on Rails 不保存我的数据？

> ID：14942614
> 
> 赞同：0
> 
> 时间：2013-02-18T18:06:07.423
> 
> 标签：ruby-on-rails, delayed-job, rails-activerecord

这是我编写的一个类，用于跟踪我的 Rails 应用程序中的后台活动。

我的问题是该`status`字段已正确更新，但该`logs`字段未正确更新。知道为什么吗？

ps1：我可以在`tmp_logs`包含我想要的数据的日志中看到，即从根目录中找到的html文件列表）

`rake`ps2：此代码通过`delayed_job`gem 运行。

```
class MaintenanceOperation < ActiveRecord::Base
  attr_accessible :logs, :status, :operation

  def track_object_elements_in_html
    status = "started"
    tmp_logs = logs
    self.save
    begin
      nb_files = 0
      html_files = File.join(my_root, "**", "*.{html,htm,HTML,HTM}")
      Dir.glob(html_files).each do |file|
        nb_files += 1
        tmp_logs << file << "\n"
        logger.debug tmp_logs
      end
      tmp_logs << "Found #{nb_files} files." << "\n"
      self.logs = tmp_logs

      self.status = "done"
    rescue Exception => e
      logger.error "Finished performing maintenance operation with error"
      logger.error e.message
      e.backtrace.each { |line| logger.error line }
      logger.error "Flagging as error"
      self.status = "error"
    end
    self.save
  end
end 
```

编辑：

更改`logs`.

```
2013-02-18 19:15:28.981 [meh]  (0.1ms)  begin transaction (pid:80725)
2013-02-18 19:15:28.982 [meh]  (0.0ms)  commit transaction (pid:80725) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T18:17:20.923

我认为您在这里被活动记录的更改跟踪所吸引。简而言之，当您调用 save Active Record 时，只会更新它认为您已更新的列。特别是，如果你修改了一个属性（例如调用 gsub! 或 << ），那么 Active Record 不会发现它。

你在做

```
self.logs = tmp_logs 
```

但是，`tmp_logs`之前设置为`logs`，因此`self.logs`和`tmp_logs`是同一个对象。在您进行分配时，Active Record 比较 self.logs 和 tmp_logs，发现它们是同一个对象，因此不会将该列标记为已更改。

您可以更改您的代码，以便 Active Record 认为您正在为日志列分配一个新值（例如将 tmp_logs 设置为 self.logs.dup），或者您可以调用`logs_will_change!`告诉 Active Record 您已经修改了该属性并且应该在下次调用 save 时更新它。

# python - 处理带有前导零的标记

> ID：14942615
> 
> 赞同：3
> 
> 时间：2013-02-18T18:06:13.990
> 
> 标签：python, tokenize

为了标记我正在使用的输入表达式`tokenize.generate_tokens()`：

```
tokens = cStringIO.StringIO(SourceLine).readline
tokens = tokenize.generate_tokens(tokens) 
```

现在，当`SourceLine = "Y123 = 00911 + 98 / 3"` 在`tokens`元组中时，我得到以下标记值：

```
"Y123", "=" , "00", "911","+", "98" , "/" , "3" 
```

但是，当我通过时`SourceLine = "Y123 = 00411 + 98 / 3"`，我得到：

```
"Y123", "=" , "00411", "+" ,"98","/","3" 
```

我不明白为什么在第一种情况下`00911`它生成了两个令牌`00`，`911`而不是只有一个具有价值的令牌`00911`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T18:13:20.697

在 Python 2 中，以 开头的整数文字`0`被解释为八进制数（以 8 为基数）。因此，您的第一个`SourceLine`实际上在语法上无效，因为`9`它不是八进制的有效数字：

```
>>> Y123 = 00911 + 98 / 3
  File "<stdin>", line 1
    Y123 = 00911 + 98 / 3
               ^
SyntaxError: invalid token 
```

因此，标记器似乎将其解析为十进制文字旁边的有效八进制文字。如果您尝试解析一些类似 Python 的语言，您可以将其后处理回您想要的格式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T18:13:15.847

原因是 tokenize 将 '00411' 解释为八进制数，而 '00911' 不是。所以它返回“00”，一个有效的八进制数，后跟“911”，一个有效的十进制数。

# c# - (A*) 寻路

> ID：14942617
> 
> 赞同：-2
> 
> 时间：2013-02-18T18:06:17.953
> 
> 标签：c#, .net, path-finding

**(A*) 寻路**

仅适用于上、下、左、右

无论如何，我不确定，我已经检查了一些示例，但是，会是这样吗？：

```
Point StartTile;
Point EndTile;
List<Point> CheckedPoints;
List<Point> UncheckedPoints; 
```

所以，我会将**StartTile**添加到**UncheckedPoints**。

我将循环浏览**UncheckedPoints**，并将 (Up, Down, Left, Right) 磁贴添加到**UncheckedPoints**（如果它不在**CheckedPoints**中） 。并删除我刚刚检查的点，并将其添加到**CheckedPoints**。

在**UncheckedPoints到达****EndTile**之前，我会这样做，然后呢？

 ****1 如果我无法到达 EndTile，它会永远循环吗？我怎样才能防止这种情况？**

**2 如果我无法到达 EndTile，有没有办法让最接近 EndTile 的瓷砖？**

**3 如何获取从 StartTile 到 EndTile 的图块列表？为每个周期保留一个长列表会占用大量内存，对吧？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T18:19:28.930

> 1 如果我无法到达 EndTile，它会永远循环吗？我怎样才能防止这种情况？

不，算法应该只运行，只要有 UncheckedPoints。一旦到达 EndTile，您可以中止，但这不是必需的。

并且您绝不能将已包含在 CheckedPoints 中的点添加到 UncheckedPoints

> 2 如果我无法到达 EndTile，有没有办法让最接近 EndTile 的瓷砖？

是的，由于您将所有访问过的 ppint 存储在 CheckedPoints 中，您可以选择其中最近的点。

> 3 如何获取从 StartTile 到 EndTile 的图块列表？为每个周期保留一个长列表会占用大量内存，对吧？

您可以存储每个点，从哪个点访问它。

这将使所需的内存增加一倍，但它不会是“内存负载”，因为无论如何您已经必须存储所有访问点，以避免循环运行。

--

您可能想在网格（而不是图表）上查看 Dijkstra 的算法，这更简单。A* 只是一种优化，不以一种随机顺序探索所有标题，而是首先探索最接近结尾图块的标题。**

# json - 在单声道上使用 HttpWebRequest 发送包含转义字符串的 json 序列化对象

> ID：14942621
> 
> 赞同：2
> 
> 时间：2013-02-18T18:06:25.697
> 
> 标签：json, mono, xamarin.ios, httpwebrequest, monomac

要求序列化一个类并将其发送到服务器。

开发环境：

MonoDevelop 3.0.6

运行时：Mono 2.10.9（压缩包）

```
GTK 2.24.10

GTK# (2.12.0.0) 
```

操作系统：

```
Mac OS X 10.7.4 
```

该类包含一个带有转义双引号的字符串。

```
class CustomClass
{
    public string foo = "hi!\""; 
} 
```

问题是，当我对其进行序列化、编码并创建一个 URI 对象时，变量 foo 中用于转义双引号的反斜杠被转换为正斜杠，从而破坏了 json。

下面是 URI 实例的不同变量的值

```
Uri:
http://myserver/hello_world/0/{"foo":"hi!/""}

AbsoluteUri:
http://myserver/hello_world/0/%7B%22foo%22%3A%22hi%21/%22%22%7D

OriginalString:
http://myserver/hello_world/0/%7B%22foo%22%3A%22hi%21%5C%22%22%7D 
```

HttpWebRequest 将值发送`"http://myserver/hello_world/0/{"foo":"hi!/""}"`到服务器，但根据我的要求，它应该使用 OriginalString 从服务器获取有效响应。

如果我在 .NET 上测试代码，则 OriginalString 由 HttpWebRequest 类发送到服务器，但是还有其他代码（hack）在单声道 mac 上不起作用

```
string paq = requestUri.PathAndQuery;
FieldInfo flagsFieldInfo = typeof(Uri).GetField("m_Flags", BindingFlags.Instance | BindingFlags.NonPublic);
ulong flags = (ulong)flagsFieldInfo.GetValue(requestUri);
flags &= ~((ulong)0x30); // Flags.PathNotCanonical|Flags.QueryNotCanonical
flagsFieldInfo.SetValue(requestUri, flags); 
```

编码 ：

```
object messageObject = new CustomClass();

//try 1
//string jsonString = Uri.EscapeUriString(JsonConvert.SerializeObject(message2));

//try 2
//string jsonString = Uri.EscapeDataString(JsonConvert.SerializeObject(message2));

//try 3

string jsonString = System.Web.HttpUtility.UrlEncode(JsonConvert.SerializeObject(messageObject));

Uri uri = new Uri(string.Format("http://myserver/hello_world/0/{0}", jsonString)); 

//try 4:
//HttpWebRequest request = (HttpWebRequest)WebRequest.Create(uri.AbsoluteUri);

//try 5
//HttpWebRequest request =(HttpWebRequest)WebRequest.Create(string.Format("http://myserver/hello_world/0/{0}",jsonString));

//try 6
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(uri.OriginalString);

try
{
    using (HttpWebResponse resp = request.GetResponse() as HttpWebResponse)
    {
        var reader = new StreamReader(resp.GetResponseStream());
        string jsonResponse = reader.ReadToEnd();
    }
} 
catch (WebException wex)
{
    Debug.WriteLine(wex.ToString());
} 
```

如您所见，我尝试使用 Uri.EscapeUriString、Uri.EscapeDataString 和 System.Web.HttpUtility.UrlEncode 并使用 AbsouluteUri 和 OriginalString 创建 WebRequest 实例并使用字符串创建它。

我也尝试在配置中使用以下代码。

```
<uri>
    <schemeSettings>
        <clear/>
        <add name="http" genericUriParserOptions="DontUnescapePathDotsAndSlashes"/>
    </schemeSettings>
</uri> 
```

但是这些方法都不起作用，并且在创建请求时编码会丢失。

任何使它起作用的想法将不胜感激。

**更新：**

我已经尝试了很多东西，包括使用一些 3rd 方开源代码进行测试，但在发送编码的 url 时仍然面临同样的问题。

我修改了代码以使用 WebClient 而不是 WebRequest 但仍然没有运气。

因此，在 MonoMac 和 MonoTouch（模拟器，我没有在设备上测试过）对我有用的解决方案是使用 TcpClient 创建请求。

```
using (TcpClient tc = new TcpClient()) {
tc.Connect ("myserver", 80);

using (NetworkStream ns = tc.GetStream()) {
    using (System.IO.StreamWriter sw = new System.IO.StreamWriter(ns)) {
                    using (System.IO.StreamReader sr = new System.IO.StreamReader(ns)) {
                        sw.Write("GET /hello_world/0/%7B%22foo%22:%22hi!%5C%22%22%7D HTTP/1.1 Host:myserver \r\n\r\n");
                        sw.Flush ();
                        string line;
                        while ((line=sr.ReadLine())!=null)
                            Console.Write (line);
                    }
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-05T01:43:04.377

我已经尝试了很多东西，包括使用一些 3rd 方开源代码进行测试，但在发送编码的 url 时仍然面临同样的问题。

我修改了代码以使用 WebClient 而不是 WebRequest 但仍然没有运气。

因此，在 MonoMac 和 MonoTouch（模拟器，我没有在设备上测试过）对我有用的解决方案是使用 TcpClient 创建请求。

```
using (TcpClient tc = new TcpClient()) {
tc.Connect ("myserver", 80);

using (NetworkStream ns = tc.GetStream()) {
    using (System.IO.StreamWriter sw = new System.IO.StreamWriter(ns)) {
        using (System.IO.StreamReader sr = new System.IO.StreamReader(ns)) {
            sw.Write("GET /hello_world/0/%7B%22foo%22:%22hi!%5C%22%22%7D HTTP/1.1 Host:myserver \r\n\r\n");
            sw.Flush ();
            string line;
            while ((line=sr.ReadLine())!=null)
                Console.Write (line);
            }
        }
    }
} 
```

# java - SAML2 SSO 断言消费者

> ID：14942623
> 
> 赞同：1
> 
> 时间：2013-02-18T18:06:30.997
> 
> 标签：java, single-sign-on, saml-2.0, openam, shibboleth

我有一个客户想要使用基于 SAML2 断言的方法来实现 SSO。客户将成为身份提供者 (IDP)，而我的应用程序将有效地成为服务提供者 (SP)。

在过去，我实施了 SSO 解决方案，其中 IDP 是 Oracle Access Manager，因此我们获得了 idp.xml 文件，它允许我们使用提供的 Fedlet 配置我们的 SP 环境。这方便地创建了一个相关的 WAR 文件，在部署后，我可以将 sp.xml 文件分发给将其导入 IDP 的客户。这一切都很好，我理解这些概念，即我们收到初始请求，fedlet 处理这个并将用户带到他们进行身份验证的 IDP，然后通过 Fedlet 允许我们的 SAML 响应将它们传递回我们的 SP解析和提取一些识别用户的数据。然后，我执行将它们登录到我们的应用程序所需的操作。

然而，目前的要求是不使用任何后端框架来提供 IDP，他们已经声明它是定制的。他们给了我 IDP URL 和证书文件，并要求我们提供“AssertionConsumerServiceURL”和“AudienceURI”。

我为其启用 SSO 的应用程序主要基于 Java。到目前为止，我的调查使我找到了 Forgerock 的 OpenAM 解决方案以及 Shibboleth 的 OpenSAML。然而，我在第一步中挣扎，基本上我在哪里开始构建一个使用 OpenAM/Shibboleth/AnotherFramework 连接到第三方 IDP 的自定义 SP 应用程序。

任何指针都会非常有用。

谢谢，李

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:39:31.853

取决于你的要求是什么。OpenAM feldlet 或 Shibboleth 我可能是最好的方法，因为你不必自己做这么多的编码。

OpenSAML 是一个用于处理 SAML 消息的非常底层的工具包。如果不是真的需要，我不会推荐它。

至于他们要求的东西，AssertionConsumerServiceURL 是您接收 SSO SAML 消息的服务端点。

AudienceURI 的定义是相当灰色的。基本上，您向他们发送一个标识符，他们将其包含在他们的消息中，并且您验证该标识符与您给他们的标识符相同。我自己不明白这和目的地之间的区别......

我有点惊讶他们问你这个。执行此第一次信息交换的标准方法是通过 SAML 元数据文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T08:32:08.643

您可能知道 OpenAM 还提供了 FedLet，它是一个轻量级的 SAML2.0 SP 实现。如果你想自己做这一切，你必须自己构建一个 SAML2.0 SP。

如果你想弄乱 Spring 你也可以使用 Spring Security SAML2 扩展 ..' [http://static.springsource.org/spring-security/site/extensions/saml/index.html](http://static.springsource.org/spring-security/site/extensions/saml/index.html) '

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T12:30:58.317

为什么要推出那些繁重的 SAML 解决方案？您是否从 Ping Identity 了解过 PingOne APS（应用程序提供商服务）或 PingFederate？您可以在不到一天的时间内实施 APS，并且您的第一个客户配置是免费的。包括仪表板报告、用于配置的 IDP 自助服务功能以及用于您的应用程序的非常简单的 REST API 集成。[注：我为 Ping 工作。]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-19T19:21:44.250

您可以设置 Spring Security SAML 扩展。该扩展程序会创建一个 AssertionConsumerServiceURL，如果他们想在您访问他们的元数据时访问您的元数据，他们只需要访问 www.yourwebsite.com/saml/metadata，他们就会下载您的 SP 元数据。

# c# - 通过字符串名称显示表单而不进行反射

> ID：14942629
> 
> 赞同：-1
> 
> 时间：2013-02-18T18:07:03.290
> 
> 标签：c#

我想知道是否可以在不使用反射的情况下通过名称字符串动态显示表单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T18:11:18.807

你的问题不清楚。但这是你要找的东西：

```
if (form.Name == "name1") form.Show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T18:12:45.870

你可以，用这样一个巨大的[`switch`声明](http://msdn.microsoft.com/en-us/library/06tc147t%28v=vs.71%29.aspx)：

```
switch (formName)
{
    case "form1":
        new Form1().Show();
        break;
    ...
} 
```

同样的`switch`声明也适用于[工厂模式](http://en.wikipedia.org/wiki/Factory_method_pattern)。

但是，按照以下方式做更多的事情肯定会更干净：

```
var o = Activator.CreateInstance(Type.GetType(formName)); 
```

默认情况下，该[`Type.GetType(string)`](http://msdn.microsoft.com/en-us/library/w3f99sx1.aspx)方法执行区分大小写的搜索，因此如果这不起作用，您可以使用不同的重载[`Type.GetType(string, bool, bool)`](http://msdn.microsoft.com/en-us/library/a87che9d.aspx)，您可以在其中确定是否要忽略大小写。它可能看起来像这样：

```
var o = Activator.CreateInstance(Type.GetType(formName, true, false)); 
```

# visual-studio - 删除自动生成评论

> ID：14942636
> 
> 赞同：2
> 
> 时间：2013-02-18T18:07:23.040
> 
> 标签：visual-studio, entity-framework, presentation, ef-model-first

我使用 Model First，EF4x 创建了一些类，您可以[在 algreat 的这个答案](https://stackoverflow.com/a/10132947/662581)中看到类似的示例。

我的问题是关于生成的默认注释，如下面的块引用中所示

```
//------------------------------------------------------------------------------
// <auto-generated>
//    This code was generated from a template.
//
//    Manual changes to this file may cause unexpected behavior in your application.
//    Manual changes to this file will be overwritten if the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------ 
```

有没有办法避免创建这些评论？或全部删除？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T20:06:14.970

如果您打开您的 EDMX 模型，您可以右键单击并选择“添加代码生成项”
这将为您的项目添加一个 T4 模板（与您的 EDMX 模型的默认模板相同）。如果你看一下这个模板背后的代码，你会发现注释。您可以删除它们并保存模板，您的代码将在没有注释的情况下生成。

您引用的部分实际上在模板中看起来像这样

```
//------------------------------------------------------------------------------
// <auto-generated>
// <#=GetResourceString("Template_GeneratedCodeCommentLine1")#>
//
// <#=GetResourceString("Template_GeneratedCodeCommentLine2")#>
// <#=GetResourceString("Template_GeneratedCodeCommentLine3")#>
// </auto-generated>
//------------------------------------------------------------------------------ 
```

# html - 将两个 id 定义为一段 css 代码

> ID：14942637
> 
> 赞同：0
> 
> 时间：2013-02-18T18:07:41.950
> 
> 标签：html, css

我想知道是否有任何方法可以将两个部分 id 定义为一段 css 代码。

目前，除了id之外，代码完全相同，有没有办法让两个id都在一段代码中，而不是复制相同的代码。例如

# 滑块#nav ul

```
#slider ul {
list-style-type:none;
height:80px;
width:620px;
background: rgb(206,220,231); /* Old browsers */
background: -moz-linear-gradient(top,  rgba(206,220,231,1) 0%, rgba(89,106,114,1) 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(206,220,231,1)), color-stop(100%,rgba(89,106,114,1))); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  rgba(206,220,231,1) 0%,rgba(89,106,114,1) 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  rgba(206,220,231,1) 0%,rgba(89,106,114,1) 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  rgba(206,220,231,1) 0%,rgba(89,106,114,1) 100%); /* IE10+ */
background: linear-gradient(to bottom,  rgba(206,220,231,1) 0%,rgba(89,106,114,1) 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#cedce7', endColorstr='#596a72',GradientType=0 ); /* IE6-9 */
-webkit-box-shadow: inset 1px 1px 3px 1px ; 
box-shadow: inset 1px 1px 3px 1px ;
opacity:0.8;
}

#nav ul {
list-style-type:none;
height:80px;
width:620px;
background: rgb(206,220,231); /* Old browsers */
background: -moz-linear-gradient(top,  rgba(206,220,231,1) 0%, rgba(89,106,114,1) 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(206,220,231,1)), color-stop(100%,rgba(89,106,114,1))); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  rgba(206,220,231,1) 0%,rgba(89,106,114,1) 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  rgba(206,220,231,1) 0%,rgba(89,106,114,1) 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  rgba(206,220,231,1) 0%,rgba(89,106,114,1) 100%); /* IE10+ */
background: linear-gradient(to bottom,  rgba(206,220,231,1) 0%,rgba(89,106,114,1) 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#cedce7', endColorstr='#596a72',GradientType=0 ); /* IE6-9 */
-webkit-box-shadow: inset 1px 1px 3px 1px ; 
box-shadow: inset 1px 1px 3px 1px ;
opacity:0.8;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-18T18:09:13.430

只需添加一个逗号。

```
#nav ul, #slider ul {
//Code
} 
```

您的代码现在将应用于两个 id

# javascript - 将当前运行的函数绑定到一个元素

> ID：14942641
> 
> 赞同：-1
> 
> 时间：2013-02-18T18:07:57.650
> 
> 标签：javascript, jquery

我的 JQuery 有问题。

我的代码是这样工作的，

表格底部有一个带有输入框的名称表，用于添加新的名称和角色，当两个输入框都填写时，代码将输入框的值添加到新的表格行中。

我的问题是，添加内容时，我想添加另一行输入框，以便可以添加更多人，但是...当输入框失去焦点/模糊时运行的功能绑定到我的原始输入元素并且当添加下一行输入时，我基本上是在尝试将我当前正在运行的函数绑定到元素......这是否可能或者我应该如何解决这个问题......

代码：

```
$('.add_new_castcrew').bind("blur",function(){
    castCrewBlur(this);
});

function castCrewBlur(element){

    if(castChangeLength == 2){
        $('#newCast').removeAttr('id');
        console.log("HAHAHAHA");
        $('#cast_table').append("<tr id=\"newCast\"><td><input type=\"text\" value=\"Cast Member Name\" class=\"add_new_castcrew\" id=\"new_cast_name\"></td><td><input type=\"text\" value=\"Cast Member Role\" class=\"add_new_castcrew\" id=\"new_cast_role\"></td></tr>");    
        castChangeLength = 0;
        $('#newCast.contentAdded ').each(function(){$(element).removeClass("contentAdded"); console.log("Removed"); });
        $('.add_new_castcrew').bind("click",function(){
            newCastCrewClick(this);
        });    

        $('.add_new_castcrew').bind("click",function(){
            castCrewBlur(this);
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T18:23:19.380

> “这只是我将模糊绑定到新附加的输入框的部分”

看起来你实际上是绑定到 .click()...

```
$('.add_new_castcrew').bind("click",function(){
    castCrewBlur(this);
}); 
```

# mysql - Sql 查询 LIKE 不起作用

> ID：14942646
> 
> 赞同：0
> 
> 时间：2013-02-18T18:08:02.573
> 
> 标签：mysql, jsp, jsp-tags

嗨，我试图做一个查询，接收查询字符串上的值，但不工作我认为它自己的查询不好。你可以帮帮我吗？

所以我收到了关于

```
<%String detalhe = request.getParameter("value");%> 
```

我不会放置连接和东西，因为它们与其他查询一起使用，所以问题不在于连接。

```
// sql query to retrieve values from the specified table. 

String QueryString = "SELECT * FROM ebooko.dadoslivros WHERE Autor LIKE '%"+detalhe+"%'

OR ano LIKE '%"+detalhe+"%'";;
rs = statement.executeQuery(QueryString); 
```

它根本无法检索值，我正在查询。

Adicional 信息：表：dadoslivros 我需要比较值的列：Autor，ano。

例如，当我运行 Href 时，传递的值是：Jules%Verne（我猜它会用 '%' 更改空格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T18:17:43.753

用于[`URLDecoder#decode()`](http://docs.oracle.com/javase/7/docs/api/java/net/URLDecoder.html)解码查询字符串中的参数。

您还应该考虑使用 a`PreparedStatement`来防止[SQL 注入](https://www.owasp.org/index.php/SQL_Injection)攻击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T20:36:10.320

我解决了它改变查询：

```
String QueryString = "SELECT * FROM dadoslivros WHERE (Data LIKE '%"+detalhe+"%') OR (Autor LIKE '%"+detalhe+"%')";; 
```

也许它可以帮助另一个人；）

# javascript - href="#" 中的 event.preventDefault() 不会阻止在 IE 和 Firefox 中跳转到页面顶部

> ID：14942647
> 
> 赞同：1
> 
> 时间：2013-02-18T18:08:06.087
> 
> 标签：javascript, jquery, firefox

HTML：

```
<a href="#" class="button" onclick="sendDetails(\'Edu\')"> 
```

JS：

```
function sendDetails(type) {
    if (event.preventDefault) {
        event.preventDefault();
    } else {
        event.returnValue = false;
    }
    names = $("#names" + type).val();
    Input = encodeURIComponent($("#Input" + type).val());
    .... 
```

链接跳转到页面顶部。我试图用`event.preventDefault()`停止跳转到页面顶部。但是，它仅适用于 Chrome，不适用于 IE 和 Firefox。我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T18:23:52.207

而不是“#”你可以使用`javascript:;`所以没有跳转，确保返回false来禁用链接行为

```
<a href="javascript:;" onclick="something();return false;">link</a> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T18:17:14.970

您不能**只**使用`window.event`来控制事件。尝试像这样标准化它：

```
function sendDetails(e, type) {
    var evt = window.event || e;
    if (evt.preventDefault) {
        evt.preventDefault();
    } else {
        evt.returnValue = false;
    }
    // ...
} 
```

您的 HTML 必须是：

```
<a href="#" class="button" onclick="sendDetails(event, 'Edu');">ASDF</a> 
```

另一种非 jQuery 解决方案是将您的 HTML 修改为：

```
<a href="#" class="button" onclick="sendDetails(event, 'Edu'); return false;">ASDF</a> 
```

在这种情况下，您不必`event`在`sendDetails`函数中使用任何处理。将`return false;`自动阻止默认行为。`sendDetails`但请注意 - 如果您的函数中发生任何异常，`return false;`则不会执行并允许默认行为。这就是我喜欢使用的原因`preventDefault`- 您可以在函数中立即调用它以立即停止行为，然后执行您需要的操作。

同时，如果您使用的是 jQuery，请尝试像这样绑定 click 事件：

```
$(document).ready(function () {
    $(".button").on("click", function (e) {
        e.preventDefault();
        // Your sendDetails code (without the "event" stuff)
        // OR call sendDetails (and remove the "event" stuff in the sendDetails function)
    });
}); 
```

在这种情况下，您的 HTML 将是：

```
<a href="#" class="button">ASDF</a> 
```

尽管定位到适用的特定元素会容易得多，而不是使用`.button`我提供的选择器。我确信“按钮”类不仅仅适用于这些目标`<a>`，但也许我错了:)

在这种情况下使用 jQuery 很好，因为它已经标准化了`event`对象，您可以只使用我在回调`e`中包含的变量。`click`我确信它不仅仅是`window.event || e`，所以我更喜欢/建议使用 jQuery 来处理事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T18:31:19.733

您已经在使用 jQuery，只需使用 jQuery 方式即可。jQuery 包装了事件对象并提供了一个规范化的事件对象，因此您可以只使用标准的[preventDefault](http://api.jquery.com/event.preventDefault/)，您不需要根据浏览器支持的内容进行分叉。

```
<button class="senddetail" data-type="edu">Education</button>
<button class="senddetail" data-type="com">Commercial</button>
<!-- why not just use a button instead of styling a link to look
     like a button? If it does need to be a link for some reason
     just change this back to an anchor tag, but keep the data
     attributes and change the class to "button senddetail" -->

<script>
    function sendDetails(type) {

    // Assuming names and input are not globals you need to declare
    // them or they will become implicit globals which can cause
    // all sorts of strange errors if other code uses them too
    var names, input;

    names = $("#names" + type).val();

    // you should only use capitalized variables for
    // Constructor functions, it's a convention in JS
    input = encodeURIComponent($("#Input" + type).val());

    //....
    }

  // just calling $ with a function inside of the invocation
  // is the same as using $(document).ready
  $(function () {
    // instead of using onClick, use jQuery to attach the
    // click event in a less intrusive way
    $('.senddetail').on('click', function (event) {
      // no matter what browser this runs in jQuery will
      // provide us a standard .preventDefault to use
      event.preventDefault();
      // jQuery sets 'this' to the DOM element that the event fired on,
      // wrapping it in another jQuery object will allow us to use the
      // .data method to grab the HMLM5 data attribute
      var type = $(this).data('type');
      sendDetails(type);
    });
  });
</script> 
```

# backup - 转储增量文件位置

> ID：14942649
> 
> 赞同：0
> 
> 时间：2013-02-18T18:08:18.867
> 
> 标签：backup, dump

dump 如何创建增量备份？创建 1 级转储时，我似乎应该使用相同的文件名：

完全备份：

```
dump -0aLuf /mnt/bkup/backup.dump / 
```

然后对于增量

```
dump -1aLuf /mnt/bkup/backup.dump / 
```

如果我将级别 1 转储到不同的文件会发生什么：

```
dump -1aLuf /mnt/bkup/backup1.dump / 
```

我试图了解转储如何跟踪更改。我正在使用 ext3 文件系统。

这是我的 /etc/dumpdates：

```
# cat /etc/dumpdates 
/dev/sda2 0 Wed Feb 13 10:55:42 2013 -0600
/dev/sda2 1 Mon Feb 18 11:41:00 2013 -0600 
```

我的这个系统的 0 级大约是 11GB，然后我今天运行了 1 级，我使用了相同的文件名，大小大约是 5GB。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:36:34.350

我想我弄清楚了这个问题。看起来转储在文件中添加了信息，因此它知道上一级别发生的时间。

0级备份

```
# file bkup_tmp_0_20130220 
bkup_tmp_0_20130220: new-fs dump file (little endian), This dump Wed Feb 20 14:29:31 2013,    Previous dump Wed Dec 31 18:00:00 1969, Volume 1, Level zero, type: tape header, Label my-label, Filesystem /tmp, Device /dev/sda3, Host myhostname, Flags 3 
```

一级备份，经过一些改动

```
# file bkup_tmp_1_20130220 
bkup_tmp_1_20130220: new-fs dump file (little endian), This dump Wed Feb 20 14:30:48 2013,   Previous dump Wed Feb 20 14:29:31 2013, Volume 1, Level 1, type: tape header, Label my-label,   Filesystem /tmp, Device /dev/sda3, Host myhostname, Flags 3 
```

# c# - 使用 C# 将文件移动到目录下

> ID：14942650
> 
> 赞同：3
> 
> 时间：2013-02-18T18:08:24.497
> 
> 标签：c#, file, copy, directory, move

```
string str = "C:\\efe.txt";
string dir = "D:\\"; 
```

我想移动或复制“D:\”目录下的“efe.txt”文件。我怎样才能做到这一点。

谢谢你的建议.....

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T18:15:12.397

正如其他人提到的那样，您想使用`File.Move`，但鉴于您的输入，您也想使用`Path.Combine`并`Path.GetFileName` 喜欢这样

```
string str = "C:\\efe.txt";
string dir = "D:\\";
File.Move(str, Path.Combine(dir, Path.GetFileName(str))); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-18T18:09:44.227

来自 MSDN：*[如何：复制、删除和移动文件和文件夹（C# 编程指南）](http://msdn.microsoft.com/en-us/library/cc148994.aspx)*：

```
// Simple synchronous file move operations with no user interface. 
public class SimpleFileMove
{
    static void Main()
    {
        string sourceFile = @"C:\Users\Public\public\test.txt";
        string destinationFile = @"C:\Users\Public\private\test.txt";

        // To move a file or folder to a new location:
        System.IO.File.Move(sourceFile, destinationFile);

        // To move an entire directory. To programmatically modify or combine 
        // path strings, use the System.IO.Path class.
        System.IO.Directory.Move(@"C:\Users\Public\public\test\", @"C:\Users\Public\private");
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-18T18:10:47.007

尝试[`File.Move`](http://msdn.microsoft.com/en-us/library/system.io.file.move.aspx)

```
using System.IO;
...
string src = "C:\\efe.txt";
string dest = "D:\\efe.txt";
File.Move(src, dest); 
```

# regex - 使用 unicode 字符属性时如何模拟单词边界？

> ID：14942652
> 
> 赞同：9
> 
> 时间：2013-02-18T18:08:36.027
> 
> 标签：regex, perl, unicode, utf-8, locale

来自我之前的问题[为什么 locale-pragma 下的单词字符不匹配？](https://stackoverflow.com/questions/14863899/why-under-locale-pragma-word-characters-do-not-match)以及[如何更改嵌套引号](https://stackoverflow.com/questions/14921070/how-to-change-nested-quotes)我了解到，在处理 UTF-8 数据时，您不能将其信任`\w`为 word-char，您必须使用 Unicode 字符属性`\p{Word}`。现在我发现零宽度单词边界`\b`也不适用于 UTF-8（启用了语言环境），但我在 Unicode 字符属性中没有找到任何等效项。我想我可以自己构造它：`(?<=\P{Word})(\p{Word}+)(?=\P{Word})`，它应该等同于`\b(\w+)\b`.

在下面的测试脚本中，我有两个数组来测试两个不同的正则表达式。`\b`当未启用语言环境时，第一个基于工作正常。为了让它也适用于语言环境，我编写了另一个模拟边界的版本，`(?=\P{Word})`但它没有按我的预期工作（我也在脚本中显示了预期的结果）。

您是否看到出了什么问题以及如何让模拟的正则表达式首先使用 ASCII（或没有语言环境）工作？

```
#!/usr/bin/perl

use 5.010;
use utf8::all;
use locale; # et_EE.UTF-8 in my case
$| = 1;

my @test_boundary = (  # EXPECTED RESULT:
  '"abc def"',         # '«abc def»'
  '"abc "d e f" ghi"', # '«abc «d e f» ghi»'
  '"abc "d e f""',     # '«abc «d e f»»'
  '"abc "d e f"',      # '«abc "d e f»'
  '"abc "d" "e" f"',   # '«abc «d» «e» f»'
  # below won't work with \b when locale enabled
  '"100 Естонiï"',     #  '«100 Естонiï»'
  '"äöõ "ä õ ü" ï"',   # '«äöõ «ä õ ü» ï»'
  '"äöõ "ä õ ü""',     # '«äöõ «ä õ ü»»'
  '"äöõ "ä õ ü"',      # '«äöõ «ä õ ü»'
  '"äöõ "ä" "õ" ï"',   # '«äöõ «ä» «õ» ï»'
);

my @test_emulate = (   # EXPECTED RESULT:
  '"100 Естонiï"',     # '«100 Естонiï»'
  '"äöõ "ä õ ü" ï"',   # '«äöõ «ä õ ü» ï»'
  '"äöõ "ä õ ü""',     # '«äöõ «ä õ ü»»'
  '"äöõ "ä õ ü"',      # '«äöõ "ä õ ü»'
  '"äöõ "ä" "õ" ï"',   # '«äöõ «ä» «õ» ï»'
);

say "BOUNDARY";
for my $sentence ( @test_boundary ) {
  my $quote_count = ( $sentence =~ tr/"/"/ );

  for ( my $i = 0 ; $i <= $quote_count ; $i += 2 ) {
    $sentence =~ s/
      "(                          # first qoute, start capture
        [\p{Word}\.]+?            # suva word-char
        .*?\b[\.,?!»]*?           # any char followed boundary + opt. punctuation
      )"                          # stop capture, ending quote
      /«$1»/xg;                   # change to fancy
  }
  say $sentence;
}

say "EMULATE";
for my $sentence ( @test_emulate ) {
  my $quote_count =  ( $sentence =~ tr/"/"/ );

  for ( my $i = 0 ; $i <= $quote_count ; $i += 2 ) {
    $sentence =~ s/
      "(                         # first qoute, start capture
      [\p{Word}\.]+?             # at least one word-char or point
      .*?(?=\P{Word})            # any char followed boundary 
      [\.,?!»]*?                 # optional punctuation
      )"                         # stop capture, ending quote
      /«$1»/gx;                  # change to fancy
  }
  say $sentence;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T18:25:24.650

由于 the 位置后面的字符`\b`要么是一些标点符号，要么是`"`（为安全起见，请仔细检查`\p{Word}`与它们中的任何一个都不匹配），它属于 case `\b\W`。因此，我们可以模拟`\b`：

```
(?<=\p{Word}) 
```

我不熟悉 Perl，但从[我在这里测试的结果](http://ideone.com/6YgBTX)`\w`来看，当编码设置为 UTF-8 时， （和）似乎`\b`也能很好地工作。

```
$sentence =~ s/
  "(
    [\w\.]+?
    .*?\b[\.,?!»]*?
  )"
  /«$1»/xg; 
```

如果您升级到 Perl 5.14 及更高版本，您可以将字符集设置为带有`u`标志的 Unicode。

* * *

您可以使用这种通用策略来构造对应于字符类的边界。（就像`\b`单词边界定义如何基于 的定义一样`\w`）。

让我们`C`成为字符类。我们想定义一个基于字符类 C 的边界。

当您知道当前字符属于`C`字符类（相当于`(\b\w)`）时，下面的构造将模拟前面的边界：

```
(?<!C)C 
```

或后面（相当于`\w\b`）：

```
C(?!C) 
```

*为什么是消极的环顾四周？*因为正向环视（使用互补字符类）也将断言前面/后面必须有一个字符（断言前面/后面的*宽度*至少为 1）。负环视将允许字符串开始/结束的情况，而无需编写繁琐的正则表达式。

* * *

对于`\B\w`仿真：

```
(?<=C)C 
```

同样`\w\B`：

```
C(?=C) 
```

`\B`与 直接相反`\b`，因此，我们可以翻转正/负环视来模拟效果。这也是有道理的——只有在前面/后面有更多字符时才能形成无边界。

* * *

其他仿真（假设`c`为 的补码字符类`C`）：

*   `\b\W`：`(?<=C)c`
*   `\W\b`：`c(?=C)`
*   `\B\W`：`(?<!C)c`
*   `\W\B`：`c(?!C)`

* * *

对于独立边界的仿真（相当于`\b`）：

```
(?:(?<!C)(?=C)|(?<=C)(?!C)) 
```

和独立的非边界（相当于`\B`）：

```
(?:(?<!C)(?!C)|(?<=C)(?=C)) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-18T18:24:15.847

您应该使用负面环视：

```
(?<!\p{Word})(\p{Word}+)(?!\p{Word}) 
```

正向环视在字符串的开头或结尾失败，因为它们需要存在非单词字符。消极的环视在这两种情况下都有效。

# c++ - 如何在 Python 中使用 OpenCV 的 C++ 函数？

> ID：14942656
> 
> 赞同：5
> 
> 时间：2013-02-18T18:08:44.030
> 
> 标签：c++, python, opencv

我正在使用 OpenCV 的 Python 绑定，它真的很棒。但是，Python 绑定、BackgroundSubtractorMOG2 和许多特征检测算法等 C++ 版本中缺少一些函数。从 Python 调用它们的最简单方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-24T15:02:37.770

我希望这可以帮助人们寻找一种快速简便的方法。

这是我为使用 OpenCV 的 Mat 类以尽可能少的痛苦公开代码而编写的开放 C++ 代码的[github 存储库。](https://github.com/Algomorph/pyboostcvconverter)它最初的灵感来自于[Yati Sagade 的例子](https://github.com/yati-sagade/blog-content/blob/master/content/numpy-boost-python-opencv.rst)。

[更新] 此代码现在适用于**OpenCV 2.X**和**OpenCV 3.X**。现在还提供对 Python 3.X 的CMake 和~~实验性支持。~~

我还发现，在我最初的实用程序编写几个月后，Sudeep Pillai 也为 C++/CMake编写了[类似的东西。](https://github.com/spillai/numpy-opencv-converter)似乎也支持 OpenCV 2 和 OpenCV 3。可能值得一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T17:48:02.870

看看[SimpleCV](http://www.simplecv.org/)。它是 Python 基础，它是一个扭曲的 OpenCV。也许你可以在那里找到一些东西。

# opencv - 有没有 Xcode 的 opencv 框架？

> ID：14942660
> 
> 赞同：0
> 
> 时间：2013-02-18T18:09:11.950
> 
> 标签：opencv, xcode4.3

我尝试按照[此说明创建opencv框架](http://docs.opencv.org/trunk/doc/tutorials/introduction/ios_install/ios_install.html)

我不知道为什么，但我得到了一个空框架。我单独下载了一个框架。我正确地添加了它....一切都很好。但是当我输入（例如）时：

```
#include "opencv/cv.h"
#include "opencv/highgui.h"
#include "stdio.h"
#import <UIKit/UIKit.h>

#import "AppDelegate.h"

int main(int argc, char *argv[])
{
    cvNamedWindow("Wi", CV_WINDOW_NORMAL);
} 
```

我收到此错误：体系结构 i386 的未定义符号：“_cvNamedWindow”，引用自：main.o 中的 _main ld：未找到体系结构 i386 clang 的符号：错误：链接器命令失败，退出代码为 1（使用 -v 到见调用）

也许有人知道如何解决这个问题。或者也许任何人都有一个正确的框架。请给我一个链接以下载正确的框架。我花了很多次。帮助任何人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T18:55:15.167

以下是一些与 XCode 4.5+ 兼容的小型 iOS 示例项目，以及最近构建的 openCV 框架：

[http://www.github.com/foundry](http://www.github.com/foundry)

看看您是否可以让其中一个运行（它们不需要任何修改），然后尝试将 openCV 框架拖到您的项目中。

如果您运行的是 xcode4.3，您可能会遇到问题，因为其中大多数是使用 Xcode 4.5 创建的。但是这个：

[http://www.github.com/foundry/OpenCVsquaresSL](http://www.github.com/foundry/OpenCVSquaresSL)

拥有三个目标。SL 目标使用 openCV 框架和构建设置，旨在在 Snow Leopard 下与 XCode 4.2 一起运行，如果其他目标不这样做，它可能会工作。

或者 - 更好 - 升级到当前的 XCode (4.6)

# titanium - 钛 NSInvalidArgumentException

> ID：14942662
> 
> 赞同：1
> 
> 时间：2013-02-18T18:09:14.080
> 
> 标签：titanium, titanium-mobile

我正在尝试使用 Titanium SDK 构建跨平台（Android-ios）移动应用程序。好久没机会为ios搭建了，只用了我的windows-android组合，测试了一下，在安卓系统上效果很好。但是当我尝试在 Mac 上为 ios 构建它时，我收到了这条消息，并且应用程序在一秒钟内关闭：

> 应用程序因未捕获的异常“NSInvalidArgumentException”而崩溃。

由于我无法提供任何相关代码，因为异常没有显示我的 javascript 代码有什么问题，而且我当然没有编写任何本机的 ios 特定代码，我不知道该怎么办。

从我在这里找到的几篇文章中，我尝试过：

*   重启钛工作室
*   清理项目
*   确保在完成所有`ResultSet`, 和`DB`对象后关闭它们（如此处建议： [主题](http://developer.appcelerator.com/question/53311/log-shows-app-termination-but-app-continues-to-run)）
*   在 3.0.0 和 2.xx 版本上测试代码

我期待着任何建议，关于你如何解决这个问题，如果你有的话！提前致谢！

**更新：** 问题如下：我调用`hasOwnProperty`了 Titanium UI 元素，而在 ios 版本上，这些元素没有这个功能（这很奇怪，因为每个 javascript 对象都有它，如果我没记错的话）。

如果你有类似的问题，我推荐阅读这篇[文章](http://developer.appcelerator.com/blog/2012/02/what-is-a-titanium-proxy-object.html)，除了 Mr.VVoos 的回答，它对避免我遇到的问题有很大帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:12:14.050

我用 Titanim 和 iOS 和 Android 开发了很长时间。通常 iOS 和 Android 部分的代码有很多不同之处。

在大多数情况下，此异常意味着调用了对被调用类不可用的操作。（在 Java 中，这意味着：Class.method() -> Class 没有称为 method() 的方法）。

您可以尝试在调试模式下运行应用程序（在 iOS 模拟器上）。与 Android 相比，调试 iOS 有很大的优势。通常，如果出现异常，iOS 模拟器会停止并显示导致异常的 JavaScript 代码。不幸的是，这并不总是有效，它只适用于模拟器。

如果这没有提供任何进一步的信息，您可以执行以下操作： - 转到您的 app.js 并在第一行之一中设置断点。- 在调试模式下启动应用程序。- 每次在此断点上移动，直到您的应用程序崩溃 - 也许您能够检测到错误或提供更多信息。

最后一个提示：检查您的代码是否有任何特定于平台的部分。（比如 Android Intents 和 iOS 上不可用的东西）。

我知道这可能非常难看，但我们必须在从 iOS 迁移到 Android 时解决许多这些令人讨厌的问题。

# extjs - 对列应用排序时，ExtJS 4 无限网格挂在“正在加载...”

> ID：14942663
> 
> 赞同：2
> 
> 时间：2013-02-18T18:09:17.897
> 
> 标签：extjs

我有一个无限网格，默认情况下效果很好，它可以很好地通过结果获取页面。

但是，当我单击列标题以在其中一列上定义排序顺序时，即使我发送回与排序前完全相同的数据，网格也会挂起“正在加载”消息（我是目前忽略服务器端的“排序”变量只是为了测试目的。）

由于这是针对开源项目的，因此可以提供您可能需要帮助的任何其他资源。

任何帮助将不胜感激。先感谢您。

亲切的问候，约翰。

我在服务器上收到此请求：

```
"GET /lextjsapi/reader/tblname?_dc=1361204535173&page=1&start=0&limit=10&sort=%5B%7B%22property%22%3A%22id%22%2C%22direction%22%3A%22DESC%22%7D%5D HTTP/1.1" 200 832 "http://lextjs/sa-test/app.html" 
```

这是 PHP 服务器端代码：

```
echo json_encode(array('success' => true, 'total' => 1000, $model_name => $tblNameRows)); 
```

这是商店的代码：

```
Ext.define('MyApp.store.tblnameStore', {
extend: 'Ext.data.Store',

requires: [
    'MyApp.model.tblname'
],

constructor: function(cfg) {
    var me = this;
    cfg = cfg || {};
    me.callParent([Ext.apply({
        autoLoad: true,
        remoteSort: true,
        storeId: 'tblnameStore',
        model: 'MyApp.model.tblname',
        buffered: true,
        leadingBufferZone: 10,
        pageSize: 10,
        purgePageCount: 0,
        trailingBufferZone: 10,
        proxy: {
            type: 'ajax',
            url: 'http://lextjs/lextjsapi/reader/tblname',
            reader: {
                type: 'json',
                root: 'tblname'
            }
        }
    }, cfg)]);
} }); 
```

这是网格的代码：

```
Ext.define('MyApp.view.MyGridPanel2', {
extend: 'Ext.grid.Panel',

height: 250,
width: 450,
title: 'My Grid Panel',
store: 'tblnameStore',

initComponent: function() {
    var me = this;

    Ext.applyIf(me, {
        viewConfig: {

        },
        columns: [
            {
                xtype: 'gridcolumn',
                dataIndex: 'id',
                text: 'Id'
            },
            {
                xtype: 'gridcolumn',
                sortable: false,
                dataIndex: 'name',
                text: 'Name'
            },
            {
                xtype: 'gridcolumn',
                sortable: false,
                dataIndex: 'address1',
                text: 'Address1'
            },
            {
                xtype: 'gridcolumn',
                sortable: false,
                dataIndex: 'city',
                text: 'City'
            }
        ]
    });

    me.callParent(arguments);
} }); 
```

# definition - IEEE 软件工程定义中的术语“系统的”、“有纪律的”、“可量化的”

> ID：14942669
> 
> 赞同：1
> 
> 时间：2013-02-18T18:09:57.697
> 
> 标签：definition, ieee

IEEE 以下列方式定义软件工程：

> (1) 对软件的开发、操作和维护应用系统的、规范的、可量化的方法；即工程对软件的应用。资料来源：[http ://www.idi.ntnu.no/grupper/su/publ/ese/ieee-se-glossary-610.12-1990.pdf](http://www.idi.ntnu.no/grupper/su/publ/ese/ieee-se-glossary-610.12-1990.pdf)

但在这种情况下，系统的、有纪律的和可量化的意味着什么？IEEE有没有进一步的解释？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T21:08:00.600

您可以依靠字典：

[http://dictionary.reference.com/browse/systematic](http://dictionary.reference.com/browse/systematic)：拥有、展示或涉及系统、方法或计划

[http://dictionary.reference.com/browse/disciplined](http://dictionary.reference.com/browse/disciplined)：拥有或表现出纪律；严格的

[http://dictionary.reference.com/browse/quantifiable](http://dictionary.reference.com/browse/quantifiable)：确定、指示或表达数量。

因此，应用软件工程需要精确的方法执行，该方法具有量化的步骤和精确的软件开发、操作和维护程序。

或者最后的状态：

[http://dictionary.reference.com/browse/engineering](http://dictionary.reference.com/browse/engineering)：将科学知识付诸实践的艺术或科学，如*计算机科学，如***软件**构建。（我稍微改变了这个定义）=）

# r - 更改 ggplot2 中轴标题和标签的大小

> ID：14942681
> 
> 赞同：203
> 
> 时间：2013-02-18T18:10:39.593
> 
> 标签：r, ggplot2

我有一个非常简单的问题，我正在努力寻找答案。我希望这里有人可以帮助我。

下面给出了一个示例数据框：

```
a <- c(1:10)
b <- c(10:1)
df <- data.frame(a,b)
library(ggplot2)
g = ggplot(data=df) + geom_point(aes(x=a, y=b)) +
  xlab("x axis")
g 
```

我只想了解如何更改轴标题和轴标签的文本大小。

* * *

## 回答 #1

> 赞同：394
> 
> 时间：2013-02-18T18:15:27.513

您可以使用参数`axis.text=`和`axis.title=`在函数中更改轴文本和标签大小`theme()`。例如，如果您需要仅更改 x 轴标题大小，则使用`axis.title.x=`.

```
g+theme(axis.text=element_text(size=12),
        axis.title=element_text(size=14,face="bold")) 
```

[在ggplot2 page](https://ggplot2.tidyverse.org/reference/theme.html)中有关于设置不同`theme()`参数的很好的例子。

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2018-07-30T22:02:45.303

我认为更好的方法是改变`base_size`论点。它将持续增加文本大小。

```
g + theme_grey(base_size = 22) 
```

[如此处](https://ggplot2.tidyverse.org/reference/ggtheme.html)所见。

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2019-04-29T05:53:29.133

如果您要创建许多图表，您可能会厌倦为每个图表键入控制标题和文本大小的代码行。我通常做的是创建一个定义所需主题特征的对象（属于“主题”“gg”类）。您可以在代码的开头执行此操作。

```
My_Theme = theme(
  axis.title.x = element_text(size = 16),
  axis.text.x = element_text(size = 14),
  axis.title.y = element_text(size = 16)) 
```

接下来，您所要做的就是将 My_Theme 添加到您的图表中。

```
g + My_Theme 
```

如果您有另一个图表 g1，只需编写：

```
g1 + My_Theme 
```

等等。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2019-09-28T04:40:45.810

在一个地方同步更改（几乎）所有文本元素的大小`rel()`是非常有效的：
`g+theme(text = element_text(size=rel(3.5))`

您可能需要稍微调整一下数字，以获得最佳结果。它将水平和垂直轴标签和标题以及其他文本元素设置在相同的比例上。一个例外是分面网格的标题，它必须手动设置为相同的值，例如，如果在图中同时使用 x 和 y 分面：
`theme(text = element_text(size=rel(3.5)), strip.text.x = element_text(size=rel(3.5)), strip.text.y = element_text(size=rel(3.5)))`

# django - 编辑 Django Formwizard：获取初始数据

> ID：14942686
> 
> 赞同：1
> 
> 时间：2013-02-18T18:10:50.933
> 
> 标签：django, edit, wizard

我正在尝试使用我的 Django FormWizard 编辑现有对象。我正在遵循[此博客文章](http://ten.ynottony.net/2011/01/using-django-formwizard-in-a-view/)中描述的技术，但它不起作用。这是我的编辑视图：

```
@login_required
def edit_wizard(request, id):
    thing = get_object_or_404(Thing, pk=id)
    if thing.user != request.user:
        raise HttpResponseForbidden()
    else:
        initial = {0: {'year': thing.year,
                       'make': thing.make,
                       'series': thing.series,
                        ....etc.
                       },
                   1: {'condition': thing.condition,
                        ....etc.
                       },
                   }

     form = CreateWizard.as_view([StepOneForm, StepTwoForm, StepThreeForm], initial_dict=initial)
     return form(context=RequestContext(request), request=request) 
```

你能帮我弄清楚如何向向导提供初始数据，以便我可以允许用户编辑他们的对象吗？谢谢你的想法！

* * *

编辑：（2/18/13）

得到一个：

```
TypeError at /edit/10/   __init__() takes exactly 1 argument (3 given) 
```

@sneawo 在下面的回答解决了这个问题，但仍然没有传递初始数据，而是向导创建了新对象。

* * *

编辑：（2/19/13）

```
class CreateWizard(SessionWizardView):
    file_storage = FileSystemStorage(location=os.path.join(settings.MEDIA_ROOT))
    def done(self, form_list, **kwargs):
        instance = Thing()
        for form in form_list:
            for field, value in form.cleaned_data.iteritems():
                setattr(instance, field, value)
        instance.user = self.request.user
        instance.save()
        return render_to_response('wizard-done.html', {
            'form_data': [form.cleaned_data for form in form_list],
        }) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T16:47:38.727

根据文档，对于 Django 1.4+，您在**initial_dict**关键字参数中传递初始数据。对于以前的版本（1.3，它似乎在 1.3 之前不存在），关键字参数是**initial**。此外，初始数据字典中步骤的键应该是字符串而不是整数。

```
initial = {'0': {'year': thing.year,
                 'make': thing.make,
                 'series': thing.series,
                  ....etc.
                },
           '1': {'condition': thing.condition,
                  ....etc.
                },
          } 
```

**更新**：要更新同一个对象，您还必须设置 id，否则 django 无法知道要更新哪个对象。一种简单的方法是在隐藏字段中传递 id，但您必须在 (done) 方法中再次进行用户权限检查。

```
initial = {0: {'id': thing.id,

class CreateWizard(SessionWizardView):
    file_storage = FileSystemStorage(location=os.path.join(settings.MEDIA_ROOT))
    def done(self, form_list, **kwargs):
       id = form_list[0].cleaned_data['id']
       thing = get_object_or_404(Thing, pk=id)
       if thing.user != self.request.user:
           raise HttpResponseForbidden()
       else:
         instance = Thing()
         for form in form_list:
             for field, value in form.cleaned_data.iteritems():
                 setattr(instance, field, value)
         instance.user = self.request.user
         instance.save()
         return render_to_response('wizard-done.html', {
             'form_data': [form.cleaned_data for form in form_list],}) 
```

当然 StepOneForm 应该有隐藏字段的 id：

```
class StepOneForm(forms.Form):
    id = forms.IntegerField(widget=forms.HiddenInput) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T22:56:07.440

尝试使用`form = CreateWizard.as_view([StepOneForm, StepTwoForm, StepThreeForm], initial=initial)`

# tomcat7 - 403 Access Denied on tomcat 7 访问主机管理器

> ID：14942691
> 
> 赞同：7
> 
> 时间：2013-02-18T18:11:13.393
> 
> 标签：tomcat7

我在带有 tomcat 7 的 linux（fedora 17）机器上添加了如下用户和角色，但我仍然收到 403 access denied 错误。如何解决这个问题？

```
<role rolename="tomcat"/>
<role rolename="manager"/>
<role rolename="admin"/>
<role rolename="admin-gui"/>
<role rolename="manager-gui"/>  
<user username="tomcat" password="tomcat" roles="admin_gui,manager_gui"/> 
<user username="admin" password="admin" roles="admin,manager,admin_gui,manager_gui"/> 
<user username="hextek" password="123456" roles="admin,admin_gui,manager,manager_gui"/> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-02T15:32:18.440

I had same problem with manager access denied and couldn't enter into manager GUI but after adding these lines to server.xml in conf folder

LINE 103.. add after

```
<Engine name="Catalina" defaultHost="localhost"> 

<Realm className="org.apache.catalina.realm.MemoryRealm" /> 
```

and tomcat-users.xml file

```
<tomcat-users>
  <role rolename="manager-gui"/>
  <user name="manager" password="password" roles="manager-gui" />
</tomcat-users>` 
```

.... now good to go..

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T10:34:16.647

检查您在使用定义中使用的角色名称。它们不同于标准，以及您定义的那些。
应该是经理-gui

> 请注意，对于 Tomcat 6.0.30 及更高版本，使用管理器应用程序所需的角色已从单个管理器角色更改为添加以下四个角色。（经理角色仍然可用，但不应使用，因为它避免了 CSRF 保护）。您将需要分配您希望访问的功能所需的角色。
> 
> ```
> manager-gui - allows access to the HTML GUI and the status pages
> manager-script - allows access to the text interface and the status pages
> manager-jmx - allows access to the JMX proxy and the status pages
> manager-status - allows access to the status pages only 
> ```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-19T09:23:11.753

我遇到了和拉曼一样的问题，我添加了“admin-gui”角色并能够获取主机管理器页面。这是参考：[http ://www.gayward-concepts.com/cannot-access-host-manager-in-tomcat7/](http://www.gayward-concepts.com/cannot-access-host-manager-in-tomcat7/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-10-09T10:41:46.763

在“tomcat-users”标签下的“tomcat-users.xml”中添加以下内容。（最好在“tomcat-users”标签之间评论存在）

```
<role rolename="manager-gui"/>
<role rolename="admin-gui"/>
<user username="admin" password="admin" roles="manager-gui,admin-gui"/> 
```

保存并重启tomcat！！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-03-27T15:49:04.473

*如果您在正确配置了tomcat-users.xml*后仍然收到 403 ，请查看管理器中的*content.xml*。

例子，

```
<Context antiResourceLocking="false" privileged="true" >
  <Valve className="org.apache.catalina.valves.RemoteAddrValve"
         allow="127\.\d+\.\d+\.\d+|::1|0:0:0:0:0:0:0:1" />
</Context> 
```

请注意，它要求您使用 127.0.0.1 或 [::1]，因此请根据您的安全要求进行修改。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-25T12:00:03.987

当您修改 Tomcat 目录安装中的配置文件时，经常会发生这种情况，但如果您使用的是带有 NetBeans 的 Tomcat，则要修改的 conf 文件不是那个： 对于 Window 用户，请转到：

**C:\Users\YOURACCOUNTNAME.netbeans\7.1.2\apache-tomcat-7.0.22.0_base\conf**

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-11-17T07:29:00.663

要使用 web 管理 gui，您必须添加 gui 角色：

```
<tomcat-users>
  <role rolename="manager-script"/>
  <role rolename="manager-gui"/>
  <role rolename="manager-jmx"/>
  <role rolename="manager-status"/>
  <user username="tomcat" password="tomcat" roles="manager-gui,manager-status"/>
</tomcat-users> 
```

# c++ - Qt 将动态按钮附加到窗口

> ID：14942696
> 
> 赞同：0
> 
> 时间：2013-02-18T18:11:41.293
> 
> 标签：c++, qt

所以基本上我想做以下事情：当按下按钮时，在点 X 处创建一个大小为 Y 的按钮，其中包含从 textEdit 中提取的文本。这是我所做的功能：

```
void MainWindow::on_pushButton_released()
{
    QString a = ui->textEdit->toPlainText();
    QPushButton* ptr = new QPushButton(a);
    addWidget(ptr); // I figured I should use this function, thing is I don't know what should call it
    ptr->show();
    ptr->setGeometry(260, 140, 40, 40);
} 
```

它可以工作，但是该窗口出现在我桌面上的 260、140 上。我希望它在主窗口中为 260,140，无论它在哪里。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T18:50:08.223

你应该给`QPushButton`父母，这将是谎言。使用以下 QPushButton 的构造函数：

```
QPushButton ( const QString & text, QWidget * parent = 0 ); 
```

代码将如下所示：

```
void MainWindow::on_pushButton_released()
{
    QString a = ui->textEdit->toPlainText();
    QPushButton* ptr = new QPushButton( a, this /* <------------ */ );
    ptr->show();
    ptr->setGeometry(260, 140, 40, 40);
} 
```

# r - 比较 R 中的两列后交换值

> ID：14942697
> 
> 赞同：0
> 
> 时间：2013-02-18T18:11:43.143
> 
> 标签：r

我想编写一个代码来检查数据框中的两列并进行比较。一个应该有下限，另一个应该有上限。如果上限列上的值小于下限，则它们应该交换值。如果下限和上限都为零，则应将上限列替换为 2。示例数据如下：

```
lower_limit upper_limit
0   3
0   4
5   2
0   15
0   0
0   0
7   4
8   2 
```

运行代码后，它应该产生类似

```
lower_limit upper_limit
0   3
0   4
2   5
0   15
0   2
0   2
4   7
2   8 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T18:24:16.447

```
dfrm <- read.table(text="lower_limit upper_limit
 0   3
 0   4
 5   2
 0   15
 0   0
 0   0
 7   4
 8   2", header=TRUE)

dfrm2 <- dfrm
 dfrm2[,2] <- pmax(dfrm[,1], dfrm[,2] )
 dfrm2[,1] <- pmin(dfrm[,1], dfrm[,2] );
dfrm2[abs(pmax(dfrm[,1],dfrm[,2]))==0 , 2] <- 2

> dfrm2
  lower_limit upper_limit
1           0           3
2           0           4
3           2           5
4           0          15
5           0           2
6           0           2
7           4           7
8           2           8 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T18:25:41.717

假设`dat`是您的数据框/矩阵的名称：

```
setNames(as.data.frame(t(apply(dat, 1, function(x) { 
                                         tmp <- sort(x);
                                         tmp[2] <- tmp[2] + (!any(x)) * 2; 
                                         return(tmp) }))), colnames(dat))
  lower_limit upper_limit
1           0           3
2           0           4
3           2           5
4           0          15
5           0           2
6           0           2
7           4           7
8           2           8 
```

*这个怎么运作？*

该函数`apply`用于将函数应用于每一行（参数`1`）。在这个函数中，`x`代表一行`dat`。首先，将值排序（用`sort`）并存储在对象中`tmp`。然后，如果两个值都是，`tmp`则替换为的第二个值。最后，被退回。该函数将结果作为矩阵返回，该矩阵需要转置（使用）。该矩阵被转换为与原始对象具有相同列名的数据框 ( ) (with )。`2``0``tmp``apply``t``as.data.frame``dat``setNames`

# video-streaming - WebRTC - 当防火墙阻止 p2p 连接时使用中继服务器 (TURN/STUN)

> ID：14942698
> 
> 赞同：0
> 
> 时间：2013-02-18T18:11:48.793
> 
> 标签：video-streaming, html5-video, webrtc

如何使用某种网络服务器通过端口 80 或 443 中继 WebRTC 视频通话？我正在寻找解决方案：客户端 A (getUserMedia()) => 我的服务器通过端口 80/443 => 客户端 B 谢谢！

====== 编辑：我知道解决方案可能是 STUN/TURN 服务器，但我似乎没有找到任何合适的简单且有据可查的解决方案。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:34:40.133

使用专门为此设计的内置 TURN 服务的 Ingate E-SBC。

# php - 解释器如何知道双引号变量何时结束？

> ID：14942699
> 
> 赞同：0
> 
> 时间：2013-02-18T18:11:51.507
> 
> 标签：php, interpreter

我正在使用这个有效的代码：

```
$this->path_medium = $this->PICTURES . "$this->file_hash-2.jpg"; 
```

但是，我需要更新它，因为它不是很可读；

```
$this->file_hash 
```

是一个变量。

`-2.jpg`

是我附加到变量的字符串。

解释器如何知道变量在哪里结束和字符串从哪里开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T18:14:33.640

您的代码恰好按原样工作的原因是因为`-`它不是变量名中的有效字符。PHP 在遇到无效变量名字符的边界处停止解析变量名。如果您尝试这样做：

```
$this->path_medium = $this->PICTURES . "$this->file_hash2.jpg"; 
```

PHP 会认为`$this->file_hash2`是被引用的变量。

有几种方法可以解决这个问题。我个人的偏好是根本不将变量括在引号中，如下所示：

```
$this->path_medium = $this->PICTURES . $this->file_hash . '-2.jpg'; 
```

您还可以`{}`在变量周围使用以提高可读性：

```
$this->path_medium = $this->PICTURES . "{$this->file_hash}-2.jpg"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T18:16:05.827

> 解释器如何知道变量在哪里结束和字符串从哪里开始。

不包含 (-) 字符的变量。像 ( `echo "$var-$var";`) 然后 PHP 在这种情况下将 file_hash 视为变量。

来自[http://www.php.net/manual/en/language.variables.basics.php](http://www.php.net/manual/en/language.variables.basics.php)

> 变量名称遵循与 PHP 中其他标签相同的规则。有效的变量名称以字母或下划线开头，后跟任意数量的字母、数字或下划线。作为正则表达式，它会这样表达：'[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*'

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T18:12:43.993

尝试：

```
$this->path_medium = $this->PICTURES . $this->file_hash . "-2.jpg"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T18:14:02.660

> 另外，我怎样才能更新这个，所以更清楚？

将花括号包裹在变量周围：

```
$this->path_medium = "{$this->PICTURES}{$this->file_hash}-2.jpg"; 
```

（或使用连接，就像你对第一个变量所做的那样）

> 口译员怎么知道

我假设它将在变量的第一个无效字符处停止（`-`其中之一）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-18T18:16:15.480

在语法上不正确将变量插入字符串，因此您必须使用@Sean 代码，否则编译器无法“拆分”变量文本。

# javascript - ajax 调用后敲除模板绑定元素不可用

> ID：14942701
> 
> 赞同：1
> 
> 时间：2013-02-18T18:11:58.057
> 
> 标签：javascript, knockout.js

我无法绑定到由 afterRender 事件中的 AJAX 调用触发的 Knockout 模板创建的元素。正如您在此[Fiddle](http://jsfiddle.net/jeljeljel/nSPsM/)中看到的，结果正确呈现，但在 afterRender 事件处理程序中，元素仍然不可用。

问题...

*   由于 afterRender 事件处理程序运行时模板似乎没有呈现，因此模板如何正确呈现？

*   为什么 AJAX 调用会影响结果？如果取消注释掉 AJAX 调用上方的行，则模板元素在 afterRender 事件中可用。

这是代码...

**HTML**

```
<div id="plugin" data-bind="template: { name: 'fooTemplate', data: $data, afterRender: postProcess }"></div>
<br />
<br />
<hr />
<div id="results"></div>

<script type="text/html" id="fooTemplate">
    <div data-bind="foreach: items()">
        <span data-bind="text: displayText"></span>
    </div>
</script> 
```

**JAVASCRIPT**

```
var data = {
    items: [{
        displayText: 'Name',
    }, {
        displayText: 'Last Login Date',
    }, {
        displayText: 'Email',
    }]
};

function DataModel() {
    var self = this;
    self.items = ko.observableArray([]);
    self.data = ko.dependentObservable(function () {
        //self.items(data.items);//   <<== UNCOMMENT THIS LINE AND THE postProcess FUNCTION SHOWS FULLY RENDERED DOM
        $.ajax({
            url: '/some/path',
            error: function () {
                self.items(data.items);
            }
        });
    });

    postProcess = function () {
        $('#results').text($('#plugin').html());
    }
}

dataModel = new DataModel();
ko.applyBindings(dataModel); 
```

一个注释...小提琴对虚假地址进行了 AJAX 调用。这样 Fiddle 就没有服务器依赖项了。错误属性用于更改导致模板运行的数据。但是，在我的开发环境中调用有效的 url 会产生与小提琴中显示的结果相同的结果。另外，我没有使用从服务器返回的数据来加载模板。而是小提琴在顶部使用静态定义的数据源（再次只是为了演示问题）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:08:40.283

查看您的示例，您遇到了异步问题。

以下是在没有 $.ajax 调用的情况下流程的工作方式：

1.  dependentObservable 触发以更新值
2.  self.items 使用新值更新
3.  模板呈现
4.  调用 postProcess 方法，一切看起来都很好。

但是对于 $.ajax 调用，完成（和错误）方法是回调，因此流程会发生变化：

1.  dependentObservable（使用 ko.computed 代替！）触发更新值
2.  对服务器进行 $.ajax 调用。
3.  完成（或错误）回调在完成时排队等待。
4.  模板呈现
5.  调用了 postProcess 方法，但 self.items 仍然为空。
6.  既然服务器响应并更新 self.items，done 回调就会触发
7.  渲染的模板仍然绑定到您的视图模型，因此渲染的模板会更新。

我认为最简单的解决方法是将您的 ajax 调用从您的dependentObservable 中拉出，以允许您注释掉的情况。

# android - SQLiteQueryBuilder 不返回任何结果

> ID：14942703
> 
> 赞同：1
> 
> 时间：2013-02-18T18:12:02.837
> 
> 标签：android, database, android-sqlite

我使用 SQLiteQueryBuilder 使用以下代码从我的数据库中查询信息

```
SQLiteQueryBuilder builder = new SQLiteQueryBuilder();
builder.setTables("customers");
Cursor cursor = builder.query(database, null, null, null, null, null, null); 
```

但我没有收到光标中的任何元素

我确信数据库中有数据

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:15:51.367

It's hard to determine from what you've placed, but the most likely is the previous query you posted.

```
final static String CUSTOMERS_TABLE = "customers";
database.rawQuery("select * from CUSTOMERS_TABLE", null); 
```

If this is what your code actually is, you need to concatenate your query with the constant, otherwise you will get no results because `CUSTOMERS_TABLE` doesn't exist, but `customers` does.

Something like this

```
final static String CUSTOMERS_TABLE = "customers";
database.rawQuery("select * from " + CUSTOMERS_TABLE, null); 
```

Be careful here

*   The first example will create the query `"select * from CUSTOMERS_TABLE"`
*   The second example will create the query `"select * from customers"`

If you're still getting no results, you may actually have no data. Make sure to check that as well.

# java - 用于套接字扫描的 Android Asynctask

> ID：14942705
> 
> 赞同：0
> 
> 时间：2013-02-18T18:12:07.007
> 
> 标签：java, android, sockets

我试图找出在一个范围内（IE 192.168.5.0-192.168.5.255）循环所有 ips 以找到正在侦听给定端口的设备的最佳方法。以下代码正在运行，但我担心我找不到所有设备，因为我的套接字上的超时太低了。第 22 个问题是我希望它超级快，但如果我超时，它开始需要永远。

```
private class findNetworkDevices extends AsyncTask<String, Integer, String> {

    private String source;
    private Activity activity;
    private Context context;
    public findNetworkDevices(Activity activity) {
        this.activity = activity;
        context = activity;
    }

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
    }

    @Override
    protected String doInBackground(String... params) {
        for (int dest = 0; dest < 255; dest++) {
            String host = "192.168.5." + dest; // TODO: add net address instead of hardcoding
            try {
                Socket s = new Socket();
                s.connect(new InetSocketAddress(InetAddress.getByName(host), 9999), 50);
                Log.v(LOG_TAG, "conn:" + s.toString());
                if (s.isConnected()) {
                    Log.v(LOG_TAG, "connected " + host);
                    foundDevicesArray.add(host);
                } else {
                    return "failed";
                }
            } catch (Exception e) {
                Log.e(LOG_TAG, "Not found", e);
            }
            }
            Log.v(LOG_TAG, "end");

            return "All Done!";
        }

        @Override
        protected void onProgressUpdate(Integer... values) {
            super.onProgressUpdate(values);
        }

        @Override
        protected void onPostExecute(String result) {
            super.onPostExecute(result);
            ListView lv = (ListView) activity.findViewById(R.id.foundDevicesList);
            ((BaseAdapter) lv.getAdapter()).notifyDataSetChanged();

        }
    } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:37:00.627

I went away from using Async because it took so long. I went with ExecutorService

```
 ExecutorService executor = Executors.newFixedThreadPool(NB_THREADS);
    String ip = getLocalIpAddress();
    int endIndex = ip.lastIndexOf(".");
    String subnet = ip.substring(0, endIndex);
    for (int dest = 0; dest < 255; dest++) {
        String host = subnet + "." + dest;
        executor.execute(pingRunnable(host));
    } 
```

It seems to spawn multiple threads where Async did it in the background but only in one thread.

# sql - 选择字段 varchar 大小受限的记录

> ID：14942708
> 
> 赞同：1
> 
> 时间：2013-02-18T18:12:29.340
> 
> 标签：sql, oracle

是否可以进行选择以带来字符数受限的字符串列？例如，我有一列有 10 和 15 个字符的记录，我只想要 10 个字符。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T18:18:31.297

使用[`substr`](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions162.htm). 此处测试示例：[http ://sqlfiddle.com/#!4/9b800/1](http://sqlfiddle.com/#!4/9b800/1)

```
create table t (v varchar(50));

insert into t values ('this is a test of the substr fn');
insert into t values ('this is another test of the substr fn');

select 
  substr(v,1,10) restricted_output, 
  v unrestricted_output
from t 
```

结果集：

```
RESTRICTED_OUTPUT UNRESTRICTED_OUTPUT
这是一个这是对 substr fn 的测试
这是一个这是对 substr fn 的另一个测试

```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T18:17:20.897

你的问题很模糊。您是说表中的字段允许 X 个字符（15,30 等），而您只想要长度为 10 的那些记录？如果是这样...以下将用表名和 yourField 替换系统中的值。

```
Select * from tableName where length(yourField) = 10 
```

但是，如果您在所有表列的长度为 10 之后。查看 All_tab_cols 视图以获取表/列和字段大小的列表。

# python - 使用来自 python 的终端关闭程序

> ID：14942709
> 
> 赞同：2
> 
> 时间：2013-02-18T18:12:35.907
> 
> 标签：python, macos, python-2.7, applescript

我有一个使用 Xfoil 处理数据文件的函数。但是，我正在尝试整理一些松散的结局。当我运行 OS X 10.8.2 时，Xfoil 使用 X11（作为 XQuartz 运行）来创建其图形等。我希望我的函数在完成后也关闭 XQuartz 应用程序，所以我正在尝试：

```
os.system("""'echo osascript -e 'tell application "XQuartz" to quit'""") 
```

但我没有运气。我正在使用三重双引号将整个内容作为字符串并导入 os。我相信“osascript -e '告诉应用程序“XQuartz”退出'”是我试图与 echo 函数一起使用的 Apple 脚本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T18:15:22.893

您正在运行错误的命令；您正在使用`echo`而不是直接使用，并且命令中*包含*`osascript`的单引号不平衡（您有 3 个）。

 *改用该[`subprocess`模块](http://docs.python.org/2/library/subprocess.html)会更容易：

```
import subprocess

subprocess.call(['osascript', '-e', 'tell application "XQuartz" to quit']) 
```

因为`subprocess`需要一个过程参数列表，所以您不必（太多）担心引用。*

# c# - 像 EF 设计器这样的映射工具，但适用于数据对象？

> ID：14942714
> 
> 赞同：0
> 
> 时间：2013-02-18T18:12:44.420
> 
> 标签：c#, asp.net-mvc, entity-framework, data-objects

在尝试分离我的域层和 GUI 并研究所有不同的方法来做到这一点时，我一直在问的一件事是为什么这如此困难？为什么所有额外的数据对象代码，然后是属性的所有额外映射，将值复制进出等等。难道不应该有更简单的方法吗？

然后我记得当我使用 MS Access 编写更小的 db 应用程序时，Access 有 Dynaset 的概念，基本上 Dynaset 是一个视图，就像 SQL Server 视图一样，除了它是一个可更新的视图。因此，MS Access 表单将基于视图/动态集，因此不必知道所涉及的所有单个表的详细信息。对我来说，这听起来像是数据对象模式。现在，既然 Access 已经有 2 年了，难道不应该有一个类似的用于实体框架的动态集、视图、映射工具，可以从演示文稿中抽象出实体吗？有没有我不知道的？第三方？

对此有什么想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T18:23:41.190

如果我理解正确，您可能正在寻找带有 POCO 实体的实体框架。您可以在模板的在线库中找到它们的模板（当您在项目中添加新项目时）。或者，您可以在 .edmx 设计视图中使用右键单击，选择“添加代码生成项”并选择 Fluent Generator。

这些方法创建多个文件，而不是默认的多合一 EF 生成文件。一个这样的文件是 DbContext（与 ObjectContext 相对），一个只包含实体（以常规 C# 对象的形式，没有属性或任何东西，只是普通对象），最后一个包含以流畅规则形式生成的映射。

在此阶段，您可以将实体文件与其模板分离并将其移动到另一个程序集。瞧，您拥有独立于 EF 基础架构的实体。您可以像以前一样传递这些实体的上下文，它会自己进行映射。

或者，您可以使用**[AutoMapper](http://www.codeproject.com/Articles/61629/AutoMapper)**之类的工具，但您必须手动提供映射，这需要大量工作，但在某些情况下可能会很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T18:24:03.767

好的设计需要工作。如果这很容易，每个人都会自动完成。毕竟，每个人都希望做尽可能少的工作。

你抱怨的所有事情都是好的设计过程的一部分，如果你想要一个好的设计，就没有办法绕过它们。

如果你想走捷径，那么一定要跳过它们。这是你的代码。没有什么需要你以任何特定的方式做事。

Access 可以做很多事情，因为它是桌面应用程序，而不是 Web 应用程序。Web 应用程序与桌面应用程序的设计方式、工作方式以及面临的问题有着根本的不同。例如，您有一个无状态的环境并且无法在请求之间保持结果集这一事实使得人们在 Access 中认为理所当然的许多事情都无法在 Web 应用程序中完成。

具体来说，如果你想使用视图，你可以这样做。如果设计得当，视图是可更新的，但通常需要只影响视图中一个表的更新语句）。EF 也可以处理视图，但它有很多你必须处理的怪癖。

数据映射器模式已经成为网页设计中的一种常见模式，因为它是在层和/或层之间清晰分离关注点的最简单直接的方法。我建议你想办法让它们在你的开发过程中发挥作用。

也可能 MVC 不是最适合您使用的框架。听起来您更像是想以您使用 Access 的方式构建 Web 应用程序，在这种情况下，Visual Studio Lightswitch 可能是您更好的选择。

[http://msdn.microsoft.com/en-us/library/ff851953.aspx](http://msdn.microsoft.com/en-us/library/ff851953.aspx)

# java - 是否可以从 maven 编译 grunt 项目？

> ID：14942733
> 
> 赞同：42
> 
> 时间：2013-02-18T18:13:49.943
> 
> 标签：java, node.js, maven, gruntjs

我正在尝试从 maven 中执行 grunt 任务，而无需安装 Node.js 或任何东西。这是因为我不想让 Jenkins 打包我的工件，并且我无法在该机器上安装 Node.js。

我知道使用 npm 和一些命令很容易让它工作，但我也认为它应该很容易与 maven 集成，问题是我不知道从哪里开始，因为我是 npm 新手。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-10-25T23:11:30.447

是的，使用[frontend-maven-plugin](https://github.com/eirslett/frontend-maven-plugin)，您可以通过 Maven 编译 Grunt 项目（通过[NodeJS 邮件列表](https://groups.google.com/forum/#!topic/nodejs/NUkLRVU-G8w)找到）。

正如文档指出的那样，该插件具有以下功能：

> *   通过将它们之间的交互量减少到最低限度，让您的前端和后端构建尽可能分开；仅使用 1 个插件。
> *   让您在构建过程中使用 Node.js 及其库，而无需为构建系统全局安装 Node/NPM
> *   让您确保在每个构建环境中运行的 Node 和 NPM 的版本都是相同的

我已经浏览了代码，它相当简单。谢天谢地，终于有人把它放在一起了；这是一个优雅的解决方案。该存储库包含[一个](https://github.com/eirslett/frontend-maven-plugin/tree/master/frontend-maven-plugin/src/it/example%20project)使用正则`Gruntfile.js`调用 jshint 分析的示例。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-02-19T07:23:33.757

*更新 2014-09-19：这不再是最准确的答案 - 请查看下面的其他一些答案。当我回答这个问题时，它是准确的，但从那时起，这方面似乎取得了很大进展。*

恐怕你运气不好。Grunt 是使用 node 构建的，需要使用 npm 安装。如果您不想使用 npm，您也许可以从另一台机器上复制现有的 Grunt 安装，但仍会`grunt`在构建服务器上使用可执行文件及其所有依赖项。

除此之外，许多 Grunt 任务都是作为 Node.js 模块实现的，您还必须安装它们。同样，您可能能够从另一台服务器复制它们，在该服务器上您已经完成了 Node.js/Grunt 的安装，但在某一时刻，您必须这样做。

要从 Maven 运行 Grunt，最好的办法是使用 Maven exec 插件，然后从那里执行 grunt 可执行文件。

作为替代方案，有几个 Maven 插件允许您以基于 Java 的方式执行类似于 Grunt 的操作。它们需要与 Grunt 不兼容的额外配置，因此需要使用 YMMV。我过去使用的一个是[http://code.google.com/p/wro4j/](http://code.google.com/p/wro4j/)，它也带有一个 Maven 插件：[http ://code.google.com/p/wro4j/wiki/ Maven插件](http://code.google.com/p/wro4j/wiki/MavenPlugin)

为什么你不能在你的构建服务器上安装 Node.js 有什么特别的原因吗？

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-10-10T13:54:42.137

您可以使用[grunt-maven-plugin](https://github.com/allegro/grunt-maven-plugin)。它允许您轻松地将 Grunt 任务集成到 Maven 构建过程中。没有肮脏的黑客。

这就是我在当前项目中使用的，它工作得非常完美。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-02-19T21:12:21.003

Finally I ended up with this (which is close enough but doesn't solve the problem):

```
<plugin>
<groupId>org.mule.tools.javascript</groupId>
<artifactId>npm-maven-plugin</artifactId>
<version>1.0</version>
<executions>
    <execution>
        <phase>generate-resources</phase>
            <goals>
                <goal>fetch-modules</goal>
            </goals>
            <configuration>
                <packages>
                    <package>grunt-cli:0.1.6</package>
                </packages>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

that installs locally the grunt-cli, but if I don't have installed node.js it's worthless. Although I try to install node.js locally there's the need to have installed python, g++ and make. So I'll go with the KISS solution: install grunt in the build server.

References:
[https://github.com/mulesoft/npm-maven-plugin](https://github.com/mulesoft/npm-maven-plugin)
[https://github.com/joyent/node/wiki/Installing-Node.js-via-package-manager](https://github.com/joyent/node/wiki/Installing-Node.js-via-package-manager)
[https://github.com/mcheely/requirejs-maven-plugin](https://github.com/mcheely/requirejs-maven-plugin)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-12-28T07:23:47.727

你可能想查看[http://jhipster.github.io/](http://jhipster.github.io/)：它是一个 Yeoman 生成器，它生成一个应用程序，它让 Maven、Grunt 和 Bower 一起工作。

这有点像您的第三个选项，但一切都是为您配置的，这并不容易。它还为您生成基本的 AngularJS 和 Java REST 服务

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-04-26T12:25:09.447

这是一个完整的复制/粘贴解决方案，在 2017 年使用**frontend-maven-plugin**进行前端构建，使用 maven-war-plugin 构建战争。

它能做什么 ？安装 npm、bower grunt 和你需要的一切，然后运行 ​​npm install、bower install，最后运行 grunt build。

您可以删除/添加替换您想要的步骤，对我来说，这是一个完整的 30 秒安装/构建库和项目。

```
<dependencies>
  ...
</dependencies>

<dependencyManagement>
    <dependencies>
        <!-- https://mvnrepository.com/artifact/com.github.eirslett/frontend-maven-plugin -->
        <dependency>
            <groupId>com.github.eirslett</groupId>
            <artifactId>frontend-maven-plugin</artifactId>
        </dependency>
    </dependencies>
</dependencyManagement>

<build>
    <pluginManagement>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-war-plugin</artifactId>
                <version>2.4</version>
                <configuration>
                    <warSourceDirectory>src/main/webapp/YourFrontJsFolder/dist</warSourceDirectory>
                    <warName>YouWarName</warName>
                    <failOnMissingWebXml>false</failOnMissingWebXml>
                    <warSourceExcludes>node_modules/**</warSourceExcludes>
                    <includeScope>system</includeScope>
                    <webResources>
                        <resource>
                            <directory>WebContent/WEB-INF</directory>
                            <targetPath>WEB-INF</targetPath>
                            <includes>
                                <include>**/*.jar</include>
                                <include>**/*.jsp</include>
                            </includes>
                        </resource>
                    </webResources>
                </configuration>
            </plugin>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>3.3</version>
                <configuration>
                    <source>1.7</source>
                    <target>1.7</target>
                    <encoding>Cp1252</encoding>
                </configuration>
            </plugin>
        </plugins>
    </pluginManagement>

    <finalName>YourAppName</finalName>
</build>

<profiles>
    <profile>
        <id>release</id>
        <build>
            <plugins>
                <plugin>
                    <groupId>com.github.eirslett</groupId>
                    <artifactId>frontend-maven-plugin</artifactId>
                    <executions>
                        <execution>
                            <!-- optional: you don't really need execution ids, but it looks 
                                nice in your build log. -->
                            <id>install node and npm</id>
                            <goals>
                                <goal>install-node-and-npm</goal>
                            </goals>
                            <!-- optional: default phase is "generate-resources" -->
                            <phase>generate-resources</phase>

                            <configuration>
                                <nodeVersion>v7.6.0</nodeVersion>
                            </configuration>
                        </execution>

                        <execution>
                            <id>npm install</id>
                            <goals>
                                <goal>npm</goal>
                            </goals>

                            <!-- optional: default phase is "generate-resources" -->
                            <phase>generate-resources</phase>

                            <configuration>
                                <arguments>install</arguments>
                            </configuration>
                        </execution>

                        <execution>
                            <id>bower install</id>
                            <goals>
                                <goal>bower</goal>
                            </goals>

                            <configuration>
                                <!-- optional: The default argument is actually "install", so unless 
                                    you need to run some other bower command, you can remove this whole <configuration> 
                                    section. -->
                                <arguments>install</arguments>
                            </configuration>
                        </execution>

                        <execution>
                            <id>grunt build</id>
                            <goals>
                                <goal>grunt</goal>
                            </goals>

                            <!-- optional: the default phase is "generate-resources" -->
                            <phase>generate-resources</phase>

                            <configuration>
                                <!-- optional: if not specified, it will run Grunt's default task 
                                    (and you can remove this whole <configuration> section.) -->
                                <arguments>build</arguments>
                            </configuration>
                        </execution>
                    </executions>

                    <configuration>
                        <installDirectory>target</installDirectory>
                        <workingDirectory>src/main/webapp/YourFrontJsFolder</workingDirectory>
                    </configuration>
                </plugin>
            </plugins>
        </build>
    </profile>
    <profile>
        <id>debug</id>
        <activation>
            <activeByDefault>true</activeByDefault>
        </activation>
    </profile>
    <profile>
        <id>IDE</id>
        <activation>
            <property>
                <name>m2e.version</name>
            </property>
        </activation>
        <build>
            <!-- Put the IDE's build output in a folder other than target, so that 
                IDE builds don't interact with Maven builds -->
            <directory>target-ide</directory>
        </build>
    </profile>
</profiles> 
```

然后你可以`Run as`-> `Maven build ...`，有目标`clean install`和个人资料`release`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-21T17:23:43.770

第一个问题是 Maven 是 Java，但 Grunt.js 在 Node.js 运行时上运行。我在两者之间实现的最简单的集成涉及 maven-exec-plugin。maven-exec-plugin 能够执行 .sh/.bat/.cmd 脚本，无论您使用的操作系统是本机的。因此，在 Maven 构建期间，我会让 maven-exec-plugin 执行一个名为 optimize-js.sh 的脚本，例如，它会简单地执行类似“grunt release –force”之类的操作。脚本可以做任何事情。重要的是配置 maven-exec-plugin 以在正确的工作目录中执行它们。当然，“grunt”和“node”需要从命令行执行。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-02-05T03:37:53.337

如果问题是在 Jenkins 机器上安装 NodeJS，那么您可以使用 NodeJS Jenkins 插件。

[https://wiki.jenkins-ci.org/display/JENKINS/NodeJS+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/NodeJS+Plugin)

我们还没有在 Maven 中使用它，但我们已经开始运行了。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-10-17T05:53:31.653

可以用**exec-maven-plugin**完成。

在你的**package.json**中定义一个**脚本和对****grunt-cli**的依赖：

 **```
...
  "scripts": {
    "build": "./node_modules/.bin/grunt install"
  },
  "devDependencies": {
  "grunt-cli": "^1.2.0",
... 
```

在您的 pom 中，添加要运行的命令：

```
 <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>exec-maven-plugin</artifactId>
            <version>X.Y.Z</version>
            <executions>
                <execution>
                    <id>exec-npm-install</id>
                    <phase>generate-sources</phase>
                    <configuration>
                        <workingDirectory>${project.basedir}</workingDirectory>
                        <executable>npm</executable>
                        <arguments>
                            <argument>install</argument>
                        </arguments>
                    </configuration>
                    <goals>
                        <goal>exec</goal>
                    </goals>
                </execution>
                <execution>
                    <id>exec-grunt-install</id>
                    <phase>generate-sources</phase>
                    <configuration>
                        <workingDirectory>${project.basedir}</workingDirectory>
                        <executable>npm</executable>
                        <arguments>
                            <argument>run</argument>
                            <argument>build</argument>
                        </arguments>
                    </configuration>
                    <goals>
                        <goal>exec</goal>
                    </goals>
                </execution>
            </executions>
        </plugin> 
```

它现在将在**mvn 包上运行****

# hibernate - hibernate命名查询xml映射

> ID：14942736
> 
> 赞同：0
> 
> 时间：2013-02-18T18:14:02.413
> 
> 标签：hibernate, hibernate-mapping, hibernate-session

如果我`<query..>`在我的 Car.hbm.xml 中放入 a，那么我返回的会话`(Session) HibernateUtil.getSessionFactory().getCurrentSession();`为空，如果我从我的 xml 映射文件中删除查询，则会话不再为空。为什么我会收到此错误？我真的被这种问题困住了。

我得到了这个 xml 映射：

```
<hibernate-mapping package="at.opendata.entitys">      
    <class name="Car" table="Cars">     
        <id name="id" column="car_Id">
            <generator class="increment"/>
        </id>
        <set name="carDetails" table="Cardetail" cascade="all" lazy="false" fetch="select" >
            <key column="car_id" not-null="true"/>
            <one-to-many class="CarDetail" />
        </set>  
        <property name="name" not-null="true"/>
        <property name="vin" not-null="true"/>              
    </class>    

    <query name="dailysales">
        <![CDATA[select sum(date_part('minute', age(cd.gone, cd.back))) from Car as c left join c.carDetails as cd where cd.gone is not null and cd.back is not null]]>
    </query>
</hibernate-mapping> 
```

这就是我要调用命名查询的地方：

```
Transaction transaction = null;
int amount = 0;

try{
    Session session = (Session) HibernateUtil.getSessionFactory().getCurrentSession();  
    transaction = session.beginTransaction();

    amount = (Integer)session.getNamedQuery("dailysales").uniqueResult(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T18:50:46.083

查询不是有效的 HQL 查询。它似乎包含特定于所选数据库的 SQL 方言的函数（date_part、age）。一种选择是改用[命名 SQL 查询](http://docs.jboss.org/hibernate/core/4.0/manual/en-US/html/querysql.html#querysql-namedqueries)。其他选择是扩展方言以包含这些功能。

# ios - iOS 全球可访问的当前用户？

> ID：14942737
> 
> 赞同：0
> 
> 时间：2013-02-18T18:14:03.510
> 
> 标签：ios, authentication, core-data

全局（例如从所有视图控制器）可访问当前用户对象的最佳实践是什么？

我正在使用核心数据。

编辑：

我刚刚意识到我应该详细说明一下（并立即收到关于此的评论）..

当前用户是指作为电话所有者并与远程数据库中的条目相关联的用户。用户输入登录名/密码（或注册），然后可以访问远程服务器，获取数据等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T18:18:29.307

对象可见性是应用程序架构的主要部分。您可以让您的对象对可能需要引用它的其他对象可见。不能给出简单的规则。我的书中有关于如何以绝对全局的方式使对象可见的提示：

[http://www.aeth.com/iOSBook/ch13.html#_global_visibility](http://www.apeth.com/iOSBook/ch13.html#_global_visibility)

例如，在应用程序委托中存储一个引用，其他所有对象都可以轻松获取到该引用。但是还有很多其他的解决方案和方法（那一章也谈到了）。这是提前计划的问题。

# git - 如何在没有本地分支的情况下从 netbeans 推送到 github

> ID：14942738
> 
> 赞同：2
> 
> 时间：2013-02-18T18:14:05.013
> 
> 标签：git, netbeans, github, repository

我从我的一个朋友那里收到了一个 github 项目 url，他给了我 r/w 访问他的 repo 的权限。我用 github 上的“下载为 zip”按钮下载了这些东西，在项目上工作，但是现在当我在 netbeans 中右键单击/远程/推送时，我输入 repo 信息，然后它要求我选择一个本地分支，我没有，因为我手动下载了文件。

所以我创建了一个本地分支，它与我在 github 上可以看到的项目的唯一分支同名，但是当我执行“推送”时，repo 上没有任何变化。我的版本根本没有上传。

有什么线索吗？如果我问一些看起来很明显的问题，我是 git 的新手，很抱歉。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T23:37:11.740

我自己也遇到过这个问题。

我找到的解决方案是更改代码，提交更改然后推送。

简而言之：

1.  更改代码
2.  提交更改（在团队菜单下）
3.  推送更改（在团队->远程下）

希望这可以帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T18:45:09.353

您可以尝试以下方法：

1.  备份您的更改。
2.  （假设 git 安装正确）使用从 GitHub 签出项目[`git clone <url>`](http://www.kernel.org/pub/software/scm/git/docs/git-clone.html)（现在你应该在 master 分支上。如果只有一个分支没关系，如果有其他分支，请务必使用正确的分支`git checkout`）
3.  然后尝试将您的更改（来自备份的文件）复制到由`git clone`.
4.  在 repo 的根目录中运行`git status`并检查是否有文件需要暂存到索引[( `git add`)](http://www.kernel.org/pub/software/scm/git/docs/git-add.html)
5.  如果一切都上演到索引运行[`git commit -a -m "some message"`](http://www.kernel.org/pub/software/scm/git/docs/git-commit.html)
6.  终于跑了`git push`

使用 GitHub，您可能需要 ssh 密钥或使用 HTTP 连接。 **但这**当然是一个糟糕的解决方案，因为您蔑视 SCM 的想法。将来，您应该首先连接到存储库，提交更改并推送它们。只有这样，您才能进行细粒度的提交，并在出现问题时恢复它们。提交大量更改不是正确的方法！

# java - 将通用类型传递给 indexOf 方法 JAVA

> ID：14942740
> 
> 赞同：1
> 
> 时间：2013-02-18T18:14:09.870
> 
> 标签：java, generics, indexof

我想使用该`indexOf`方法查找字符串中的单词数和字母数。

indexOf 方法可以接受：

```
indexOf(String s)
indexOf(Char c)
indexOf(String s, index start) 
```

所以该方法可以接受**字符串**或**字符**，也可以接受**起点**

我希望能够将字符串或字符传递到此方法中，因此我尝试使用泛型。下面的代码是 main 和 2 个函数。正如您所看到的，我希望能够让 indexOf 与传入的字符串或字符一起工作。如果我将 indexOf 中的 's' 转换为字符串，它可以工作，但是当它尝试作为 Char 运行时会崩溃。提前非常感谢！

```
public static void main(String[] args) {
    MyStringMethods2 msm = new MyStringMethods2();
    msm.readString();
    msm.printCounts("big", 'a');
}

public <T> void printCounts(T s, T c) {
    System.out.println("***************************************");
    System.out.println("Analyzing sentence = " + myStr);
    System.out.println("Number of '" + s + "' is " + countOccurrences(s));

    System.out.println("Number of '" + c + "' is " + countOccurrences(c));
}

public <T> int countOccurrences(T s) {
    // use indexOf and return the number of occurrences of the string or
    // char "s"
    int index = 0;
    int count = 0;
    do {
        index = myStr.indexOf(s, index); //FAILS Here
        if (index != -1) {
            index++;
            count++;
        }
    } while (index != -1);
    return count;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T18:17:20.813

`String.indexOf`不使用泛型。它采用特定类型的参数。您应该改用重载方法。因此：

```
public int countOccurrences(String s) {
    ...
}

public int countOccurrences(char c) {
    return countOccurrences(String.valueOf(c));
} 
```

# windows-phone-7 - MVVM 如何摆脱事件背后的代码

> ID：14942741
> 
> 赞同：3
> 
> 时间：2013-02-18T18:14:16.377
> 
> 标签：windows-phone-7, mvvm, mvvm-light, simple-mvvm

在查看了一些 MVVM 工具包（MVVM Light、SimpleMVVM）之后，共同主题似乎尝试使用尽可能多的可混合事件而不是使用代码隐藏。

我不确定如何进行所有活动。例如，在执行 windows phone 7 时会绑定 2 个事件。

1.  OnNavigatedTo/From
2.  负载

有没有人有关于如何在 MVVM 中执行此操作的示例？我正在使用 SimpleMVVM，但我希望这些示例可能是相似的，也许 MVVM 轻量级工具包，甚至只是展示这点的一般 MVVM 教程可能会有所帮助。

我只找到了显示如何像按钮单击一样的操作。

**编辑**

我对何时使用事件背后的代码或使用混合事件来命令感到困惑。

例如，在 MVVM Light 教程中，他们使用 MVVM 进行导航，但为什么这比使用代码隐藏事件更好？

当人们说我现在也有点困惑

> Codebehind 并不邪恶。它的业务逻辑和代码隐藏的混合是有问题的。让您的 UI 在代码隐藏中处理 UI 任务。

好吧，在 MVVM 轻量级示例中，当列表或其他任何内容（忘记）正在加载“加载标志出现”时，他们在其中一个示例中有“忙”。这一切都是在 ViewModel 中完成的，而不是代码隐藏事件。

所以这对我来说似乎有点矛盾（也许我错过了一些东西）。让我感到困惑的是，如果 ViewModel 对加载一无所知，你怎么知道加载何时开始或完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T19:34:19.280

正如 HighCore 评论的那样，使用`EventToCommand`. 它使用起来非常简单，尽管您首先需要 Blend SDK。

```
...
xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
xmlns:cmd="clr-namespace:GalaSoft.MvvmLight.Command;assembly=GalaSoft.MvvmLight.Extras.SL4"
xmlns:im="clr-namespace:Microsoft.Expression.Interactivity.Media;assembly=Microsoft.Expression.Interactions"
xmlns:ic="clr-namespace:Microsoft.Expression.Interactivity.Core;assembly=Microsoft.Expression.Interactions"
...
<i:Interaction.Triggers>
    <i:EventTrigger EventName="Loaded">
            <cmd:EventToCommand Command="{Binding GetTweetsCommand}" CommandParameter="Twitter" />
        </i:EventTrigger>
</i:Interaction.Triggers> 
```

此外，只是关于代码隐藏的一般要点：在代码隐藏中拥有与 UI 相关的功能并不是世界上最糟糕的事情！它与您的 ViewModel 是分开的，并且位于合乎逻辑的位置。但是，我发现行为更容易测试。例如，使用继承自的类`TargetedTriggerAction`允许故事板由属性更改和控件控制：

```
public class ImageAnimationTrigger : TargetedTriggerAction<Storyboard>
{
    protected override void Invoke(object parameter)
    {
        if (Target == null)
            return;

        if (parameter is DependencyPropertyChangedEventArgs)
        {
            DependencyPropertyChangedEventArgs args = (DependencyPropertyChangedEventArgs)parameter;

            if ((bool)args.NewValue)
                Target.Begin();
            else
                Target.Stop();
        }
        else if (parameter is RoutedEventArgs)
        {
            RoutedEventArgs args = (RoutedEventArgs)parameter;

            if (!(args.OriginalSource as Button).IsEnabled)
                Target.Begin();
            else
                Target.Stop();
        }
    }
} 
```

我使用这种行为`PropertyChangedTrigger`如下：

```
<i:Interaction.Triggers>
    <ic:PropertyChangedTrigger Binding="{Binding Loading}">
        <behav:ImageAnimationTrigger TargetName="animStoryboard" />
    </ic:PropertyChangedTrigger>
</i:Interaction.Triggers> 
```

正如 Laurent Bugnion 所说，如果需要，请使用代码隐藏！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T14:58:40.507

1）不幸的是，我没有找到好的例子，所以你自己一个人。

2）如果您将代码隐藏保留为空白（通过使用命令而不是单击按钮），则您仅将代码集中在 ViewModel 中。我可以看到两点好处：

a) 如果您将一个 ViewModel 用于不同的视图（并且在多个视图中有一些通用命令），

b) 如果您使用 ViewModel 的一些私有变量/方法，而这些私有变量/方法在 View 中不可用。

3）您可以使用 RaisePropertyChanged 加载（重新加载）数据，在 ViewModel 构造函数中加载数据以避免使用 OnNavigatedTo 或其他东西。

# php - 将变量值发送到 URL php 页面

> ID：14942745
> 
> 赞同：0
> 
> 时间：2013-02-18T18:14:33.723
> 
> 标签：php, url

我正在使用学校的服务器，他们显然不允许学生使用 mail() php 函数或其他任何东西:( 所以我决定使用我朋友的服务器并将数据发送到他的服务器。所以我准备好了变量：

```
$to = "$to";
$subject = "$subject";
$message = "$message"; 
$headers = "$headers"; 
```

我如何将这些数据发送到他的服务器，它将在那里执行 mail($to, $subject, $message, $headers); 他告诉我在我的机器上调用一个 php 页面，它只显示 5 条信息而不使用我的会话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T18:16:45.250

为什么不直接将它传递给他的脚本`GET`呢？

```
$url = "hisScript.php?";
$url .= "to=" . urlencode($to);
$url .= "&subject=" . urlencode($subject);
$url .= "&message=" . urlencode($message);
$url .= "&headers=" . urlencode($headers);

echo $url; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T18:16:59.240

您可以通过 URL (GET) 或通过“提交”数据 (POST) 来传输信息。

# java - 模式匹配解析器

> ID：14942750
> 
> 赞同：-1
> 
> 时间：2013-02-18T18:15:07.917
> 
> 标签：java, regex, parsing

实际上，我构建了一个 Java 代码来解析以下文本文件：

```
 (FAMIX.Attribute (id: 22)
(name 'obj_I')
(parentType (ref: 11))
(declaredType (ref: 27))
(isPrivate true)
   )

   (FAMIX.Attribute (id: 38)
(name 'obj_k')
(parentType (ref: 34))
(declaredType (ref: 43))
(isPrivate true)
   )

  (FAMIX.Attribute (id: 56)
(name 'obj_K')
(parentType (ref: 46))
(declaredType (ref: 43))
(isPrivate true)
    )

  (FAMIX.Attribute (id: 73)
(name 'obj_L')
(parentType (ref: 64))
(declaredType (ref: 45))
(isPrivate true)
    )

 (FAMIX.Attribute (id: 67)
(name 'obj_G')
(parentType (ref: 64))
(declaredType (ref: 46))
(isPrivate true)
    )

 (FAMIX.Attribute (id: 93)
(name 'classD')
(parentType (ref: 85))
(declaredType (ref: 94))
(isPrivate true)
   )

  (FAMIX.Attribute (id: 99)
(name 'classC')
(parentType (ref: 86))
(declaredType(ref: 86))
(isPackage true)
    )

 (FAMIX.Attribute (id: 114)
(name 'classB')
(parentType (ref: 94))
(declaredType (ref: 11))
(isPrivate true)
    )

  (FAMIX.Attribute (id: 107)
(name 'obj_c')
(parentType (ref: 94))
(declaredType (ref: 86))
(isPrivate true)
     ) 
```

Java 代码：

```
// Find Attributes

Pattern p111 = Pattern.compile("FAMIX.Attribute");

Matcher m111 = p111.matcher(line);
while (m111.find()) {

    FAMIXAttribute obj = new FAMIXAttribute();              
    Pattern p222 = Pattern.compile("id:\\s*([0-9]+)");
    Matcher m222 = p222.matcher(line);

    while (m222.find()) {
        System.out.print(m222.group(1));
    }

    while ((line = br.readLine()) != null && !(line.contains("FAMIX"))) {

        Pattern p333 = Pattern.compile("name\\s*'([\\w]+)\\s*'");
        Matcher m333 = p333.matcher(line);

        while (m333.find()) {       

            System.out.print(m333.group(1));
        }

        Pattern p555 = Pattern.compile("parentType\\s*\\(ref:\\s*([0-9]+)\\)");
        Matcher m555 = p555.matcher(line);
        while (m555.find()) {
           System.out.print(m555.group(1));
        }

        Pattern p666 =   Pattern.compile("declaredType\\s*\\(ref:\\s*([0-9]+)\\)");
        Matcher m666 = p666.matcher(line);
        while (m666.find()) {
           System.out.print(m666.group(1));
        } 

    }

} // exit from finding Attribute 
```

输出：

```
 ***************** Attributes *****************
       obj_k    38   34   43
       obj_L    73   64   45
       classD   93   85   94
       classB   114  94   11 
```

根据输出，问题是解析器跳过一些输出（跳转）

如果问题不清楚，请告诉我，我会尽力进一步澄清。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T18:20:18.667

您忘记了检查`IsPrivate`or`IsPackage`部分的正则表达式

编辑：几个步骤将告诉您出了什么问题添加该行的打印输出以准确查看哪些行失败以及 Pattern 如何看到它们

```
 // Find Attributes
                System.out.print("***"+line+"***"); 
                Pattern p111 = Pattern.compile("FAMIX.Attribute");
                Matcher m111 = p111.matcher(line);
                while (m111.find()) { 
```

这`"***"`将让您了解关于 java.util 的确切开头和结尾。有时，看起来与眼睛相同的字符对于匹配器来说是不同的。

编辑 2：您的代码缺少外循环，其中 line 被第一次读取。您是否意识到代码：

```
 while ((line = br.readLine()) != null && !(line.contains("FAMIX"))) { 
```

消耗出现“FAMIX.Attribute”的下一行？如果您在（丢失的）外部循环中再次读取，您将丢失所有其他记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T19:08:13.227

如果您确定该文件包含指定格式的行：

*   `id`, `name`, `parentType`, 中的每一个都`declaredType`必须在一行上完全声明。即你没有这样的输入：

    ```
    (FAMIX.Attribute (id:
    38)
    (name 
    'obj_k')
    (parentType 
      (ref: 34))
    (declaredType (ref: 43))
    (isPrivate true)
    ) 
    ```

    但这是允许的：

    ```
    (FAMIX.Attribute (id: 38)
    (name 'obj_k') (parentType (ref: 34)) (declaredType (ref: 43)) (isPrivate true)) 
    ```

*这是下面的修改生效*的前提条件。**此假设源自您当前的代码。**

```
String line;

FAMIXAttribute obj = new FAMIXAttribute();
boolean isModified = false;

while ((line = br.readLine()) != null) {
    if (line.contains("FAMIX.Attribute")) {
        if (isModified) {
            // TODO: Save the previous obj

            obj = new FAMIXAttribute();
            isModified = false;
        } 
    }

    // TODO: Add the block of code to parse id here
    // TODO: Add id attribute to obj, set isModified to true

    // TODO: Add the block of code to parse other stuffs here
    // TODO: Add those attributes to obj, set isModified to true
}

if (isModified) {
    // TODO: Save the last obj
} 
```

# android - 应用程序字段可以变为空吗？

> ID：14942756
> 
> 赞同：0
> 
> 时间：2013-02-18T18:15:22.970
> 
> 标签：android, android-lifecycle

在我的 Android 应用程序中，我设置了一个自定义的应用程序派生类。在其中我有一个成员字段来存储一些任意对象。

所以我有：

```
public class MyApp extends Application {

public static MyApp mInstance;
public Object mData;

@Override
public void onCreate() {
   mInstance = this;
}

public void setData(Object data) {
    mData = data;
}

public Object getData() { return mData; } 

} 
```

现在`Activity`我正在做

```
public doSetData() {

     someMyData = ....
     MyApp.mInstance.setData(someMyData);

} 
```

在另一个`Activity`我正在做

```
@Override
public void onCreate(Bundle) {

     Object myDataRetrieved = MyApp.mInstance.getData();

} 
```

我可以看到有时`myDataRetrieved`是`null`。但是，我相信我从来没有通过`null`。`MyApp.setData()`当然，我可能是错的。

然而，会不会有这样的情况下`MyApp.mData`会自行变为无效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T18:48:01.010

> 但是，是否存在 MyApp.mData 本身变为 null 的情况？

当然。每次 Android 终止进程时都会发生这种情况，当您的应用程序不在前台时，Android 需要 RAM，并且您的应用程序接下来要终止时，就会发生这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T19:37:46.630

您永远无法保证您的数据将保留在内存中，因为系统始终可以获取进程以回收资源。

因此，您的应用程序必须*始终准备好在*[onSaveInstanceState()](http://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState%28android.os.Bundle%29)（短期）或[onPause()](http://developer.android.com/reference/android/app/Activity.html#onPause%28%29) （长期）中保存任何持久性数据，然后在 onCreate() 中检索它。

也就是说，还有我非常喜欢的“单例模式”。这是一种软件设计模式，您可以在其中创建一个特殊的类来保存您的持久数据。该类的实例只有一次（因此称为“singleton”），它是在第一次需要您的数据时按需创建的。保留单例，以便后续对持久数据的需求只需使用相同的对象，而无需从长期存储中重新加载数据。只要系统没有收获您的流程，数据就始终存在，访问成本几乎为零。如果系统*确实*获得了您的进程，数据会透明地重新加载，并且您的应用程序永远不会注意到差异。

有关我的单例实现，请参阅[https://stackoverflow.com/a/14779357/338479](https://stackoverflow.com/a/14779357/338479)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-18T09:20:14.817

如果实例被销毁，只需保存您的数据并在创建应用程序对象时加载它，这将始终在活动之前创建。

如果你最小化内存使用，那么它会在被清除之前在 android zygote 中存活更长时间。saveinstancestate 等仅适用于小数据块。通过应用程序实例共享数据是可以的，有时也是推荐的，但它与使用静态字段没有什么不同。同样的限制适用。

如果您想要最少的内存使用，那么不推荐使用包裹等来保存您的数据，即使是谷歌也不推荐。

# java - 随机值与赋值/组合运算符相结合

> ID：14942757
> 
> 赞同：-2
> 
> 时间：2013-02-18T18:15:24.560
> 
> 标签：java, random, assignment-operator

以下代码示例是创建两个随机值，还是重复使用第一个？

```
Random r = new Random();
int[] a = new int[10];

a[r.nextInt(10)] += 1;

// Equals this, creating two random values:
a[r.nextInt(10)] = a[r.nextInt(10)] + 1;

// Or this, using 6 as the result of the first random operation
a[6] = 6 + 1; 
```

编辑：当我们这样做的时候，这个操作符（和其他像`-=`,`/=`等）有名字吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T18:20:48.350

当您编写`a[r.nextInt(10)] += 1;`时，只会生成一个随机数。因此，如果这个随机数恰好是`6`这等价于`a[6] = a[6] + 1;`（但效率稍高）。

> 这个操作符（以及其他像 -=、/= 等）有名字吗？

它们被称为快捷赋值运算符。

# vba - 在Excel中按单元格值获取列号

> ID：14942758
> 
> 赞同：4
> 
> 时间：2013-02-18T18:15:25.107
> 
> 标签：vba, excel

我正在尝试获取具有特定值的第一行中单元格的列号。我正在使用的代码由于某种原因无法正常工作。

```
Dim colNum As Integer
'sheetName is a String
With ActiveWorkbook.Sheets(sheetName)
colNum = column(.Match("ID", 1:1, 0)) 
```

它告诉我它需要一个“列表分隔符或)”。我如何使它工作？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-18T18:26:19.757

试试这个代码：

```
Dim colNum As Integer
'sheetName is a String
colNum = WorksheetFunction.Match("ID", ActiveWorkbook.Sheets(sheetname).Range("1:1"), 0) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-20T05:20:17.000

请注意，如果未找到匹配项，则会返回错误；试试这个来处理。

```
Dim Result As Variant
If Not VBA.IsError(Application.Match(...)) Then
    Result = Application.Match(...)
End If 
```

这会尝试匹配，如果函数出现错误，它将不会分配结果。

[WorksheetFunction.Match 方法 (Excel)](http://msdn.microsoft.com/en-us/library/office/ff835873.aspx)

# java - java在线程中访问类的变量并在线程外使用

> ID：14942763
> 
> 赞同：-1
> 
> 时间：2013-02-18T18:15:43.423
> 
> 标签：java, eclipse, swing, netbeans, thread-safety

我有一个名为 as 的 GUI 类`NewFrame.java`，另一个是`Client.java`. 在 Client.java 中，NewFrame 的对象是在一个线程中创建的。前任，

```
public class ClientA {

NewJFrame gui;
int x ;

public void go() {
            java.awt.EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                gui  = new NewJFrame();
                gui.setVisible(true);
                x = 10;
            }
        });

        System.out.println(x); // does not print 10 but it prints 0

        gui.setTextboxvalue("value changed !!!"); 

        // can'se pass value to the function, with this error occurs as,
        // "java.lang.NullPointerException" at here.

      }
} 
```

这里出现了两个问题，在 NewFrame 类中有一个 setter 方法，`setTextboxValue`但如上所示调用它会发生错误“java.lang.NullPointerException”。

另一个问题是：为什么我不能`x`在该线程内设置变量，在线程内设置此变量，外部打印变量`x`的值 10 不是在那里打印而是打印`0`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T18:21:37.253

`EventQueue.invokeLater`在一个单独的线程上调用它的方法，在事件调度线程上的所有其他任务完成后，该线程在事件调度线程上异步触发。换句话说，run() 方法中的代码很可能会在您的方法完成后执行。因此，该`gui`变量仍将为 null，导致`NullPointerException`调用`gui.setTextboxvalue`; 当您打印出该值时，x 仍将为 0。

# git - 如何将本地 git repo 克隆到 github？

> ID：14942766
> 
> 赞同：1
> 
> 时间：2013-02-18T18:15:46.280
> 
> 标签：git, github, repository

我在本地服务器上有几个 git 存储库，我想将它们与 Github 同步以进行远程访问。

如何将这些本地存储库克隆到 Github？

在此之后，是否只是将 github repo 分配为本地服务器 repo 的远程的一种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T18:20:41.297

只需在 GitHub 上创建您的存储库，然后将 GitHub 添加为远程并推送您要推送的分支：

```
git remote add github git@github.com:user/repo.git
git push github master 
```

# delphi - 如何调整 TrackBar 拇指大小？

> ID：14942768
> 
> 赞同：4
> 
> 时间：2013-02-18T18:16:01.280
> 
> 标签：delphi, delphi-7, trackbar

我无法将`TTrackBar`拇指大小调整为更大的大小。看图片：

![Trackbar 拇指小（在左侧）](../Images/031bc560ab354260df50735c56abde6a.png)

我在左边有个小拇指，我不能把它变大（但不是 TrackBar 本身）。
所需的拇指大小显示在带有红色区域的图像上。
也许我可以以某种方式使用 WINAPI？C++ 应用程序通常有更大的拇指。

这就是我真正想要的：

![NotePad++ TrackBar 风格](../Images/b8c2316e49f2caa8efdc77f2af3f059f.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-18T18:42:20.990

使用标准的轨迹栏控件似乎无法做到这一点。事实上，我看不到任何与此相关的[轨迹栏样式](http://msdn.microsoft.com/en-us/library/windows/desktop/bb760147(v=vs.85).aspx)或[轨迹栏消息](http://msdn.microsoft.com/en-us/library/windows/desktop/ff486075(v=vs.85).aspx)。只有[`TBM_SETTHUMBLENGTH`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb760234(v=vs.85).aspx)，您也可以从 VCL 访问`TTrackBar.ThumbLength`，但这也会影响背景凹陷矩形的高度。

一个推论是我怀疑“C++ 应用程序经常有更大的拇指”的观察。

当然，您始终可以制作[自己的类似轨迹栏的控件](https://stackoverflow.com/questions/4387690/component-similar-to-trackbar-to-enter-a-range-of-values)。

还是您只想缩小凹陷的矩形？然后只需在对象检查器中设置`ShowSelRange`为。`False`但是，如果打开主题，您仍然不能使拇指大于 24 左右。

如果您在旧版本的 Delphi 上没有`TrackBar.ShowSelRange`，则需要`TBS_ENABLESELRANGE`手动删除窗口样式。您可以随时使用 执行此操作`SetWindowLong`，也可以在`CreateParams`子类化的轨迹栏控件中执行此操作。最简单的方法可能是使用“插入器类”：

```
type
  TTrackBar = class(ComCtrls.TTrackBar)
  protected
    procedure CreateParams(var Params: TCreateParams); override;
  end;

...   
implementation

{ TTrackBar }

procedure TTrackBar.CreateParams(var Params: TCreateParams);
begin
  inherited;
  Params.Style := Params.Style and not TBS_ENABLESELRANGE;
end; 
```

要获得 Notepad++ 屏幕截图中的外观，您还应该设置`TickMarks`为`tmBoth`和`TickStyle`。`tsNone`

但是，这并不能回答您的问题，即关于使*拇指变大*的问题。这将使*凹陷的矩形更小*......但是，从您的屏幕截图中，我猜这就是您想要的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-19T00:13:43.310

Trackbar 是支持自定义绘制的原生控件之一。基本上，启用主题后，您可以控制绘制控件的各个方面，或者您可以告诉操作系统您正在超越自己的绘图部分。[在此处](http://msdn.microsoft.com/en-us/library/ff919569(v=vs.85).aspx)查看有关自定义绘图的更多信息。

我们不必超越任何绘图来稍微调整某些部分的大小。绘制*通道*（凹陷的跟踪背景）和刻度的是 VCL。对于刻度，已经有我们可以使用的属性。对于通道，我们可以将矩形缩小一点，VCL 将从那里接管。拇指是由默认窗口程序绘制的，但没关系，操作系统会将拇指绘制到修改后的矩形。

下面的示例（对于水平轨迹栏）拦截`WM_NOTIFY`发送到表单的通知以执行这些修改。这仅在将轨迹栏直接放置在表单上时才有效。如果不是这种情况，您可以派生一个新控件，该控件继承自`TTrackBar`处理`CN_NOTIFY`，或子类化该控件或其父级`WM_NOTIFY`。重要的是在执行实际绘图之前处理通知。

这是示例的外观：
![在此处输入图像描述](../Images/4285b6f3af1918dc49c2955aa746c6f2.png)

```
type
  TForm1 = class(TForm)
    Button1: TButton;
    TrackBar1: TTrackBar;
    procedure FormCreate(Sender: TObject);
  protected
    procedure WMNotify(var Msg: TWMNotify); message WM_NOTIFY;
  end;

...

uses
  themes, commctrl, xpman;

{$R *.dfm}

procedure TForm1.FormCreate(Sender: TObject);
begin
  if ThemeServices.ThemesEnabled and
      (TrackBar1.Orientation = trHorizontal) then begin
    TrackBar1.TickMarks := tmBoth;
    TrackBar1.TickStyle := tsNone;
    TrackBar1.ThumbLength := 38;
  end;
end;

procedure TForm1.WMNotify(var Msg: TWMNotify);
begin
  if ThemeServices.ThemesEnabled and
      (TrackBar1.Orientation = trHorizontal) then begin

    if (Msg.IDCtrl = Longint(TrackBar1.Handle)) and
        (Msg.NMHdr.code = NM_CUSTOMDRAW) and
        (PNMCustomDraw(Msg.NMHdr).dwDrawStage = CDDS_ITEMPREPAINT) then begin

      case PNMCustomDraw(Msg.NMHdr).dwItemSpec of
        TBCD_THUMB: InflateRect(PNMCustomDraw(Msg.NMHdr).rc, -4, 0);
        TBCD_CHANNEL:
          with PNMCustomDraw(Msg.NMHdr).rc do begin
            Top := Bottom div 2 + 2;
            Bottom := Top + 5;
            Inc(Left, 4);
            Dec(Right, 4);
          end;
      end;
    end;
  end;

  inherited;
end; 
```

# php - 谷歌新闻提要内容

> ID：14942771
> 
> 赞同：1
> 
> 时间：2013-02-18T18:16:11.347
> 
> 标签：php, xml, feed

所以假设我有一个谷歌新闻提要，像这样：[https ://news.google.com/news/feeds?pz=1&cf=all&ned=no_no&hl=no&q=%22something%22&output=atom&num=1](https://news.google.com/news/feeds?pz=1&cf=all&ned=no_no&hl=no&q=%22something%22&output=atom&num=1)

获取标题、作者和链接很容易，但我要如何才能说出内容的前 200 个字符呢？它充满了html，并与标题和作者混合在一起。

我可以在上面使用 strip_tags，但它仍然是一团糟。

有什么方法可以让谷歌返回一个 ['description'] 吗？

或者是否有任何其他好消息以更易于管理的方式为我提供内容？

[编辑]

更新我最终是如何做到的。

```
$news = @simplexml_load_string(file_get_contents('https://news.google.com/news/feeds?pz=1&cf=all&ned=no_no&hl=no&q=%22molde+fotballklubb%22+OR+%22tornekrattet%22+OR+%22mfk%22+OR+%22oddmund+bjerkeset%22+-%22moss%22&output=atom&num=1'),  'SimpleXMLElement', LIBXML_NOCDATA);

        $data = get_object_vars($news->{'entry'});
        $test = explode('<font size="-1">', $data['content']);
        $link = get_object_vars($data['link']);

        $return['title']        = strip_tags($test[0]);
        $return['author']       = strip_tags($test[1]);
        $return['description'] = strip_tags($test[2]);
        $return['link']         = $link['@attributes']['href']; 
```

它仍然无法正常工作，但那是因为提要一直以不同的方式为我提供内容。有时，新闻文章本身的内容只是像作者和图像描述这样的元数据。

当 html 不时更改时，通过 html 标签将其分解会导致一些问题。但我想不出用这个提要做的任何其他方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T18:41:37.377

您可以尝试在 DOMDocument 实例中加载 HTML 并提取您需要的部分，或者使用 Goutte 之类的包装器，这样可以更轻松地提取您需要的部分。

[http://php.net/manual/en/class.domdocument.php](http://php.net/manual/en/class.domdocument.php)

[https://github.com/fabpot/Goutte](https://github.com/fabpot/Goutte)

# vba - 如何在 Outlook 2010 VBA 中编写的电子邮件中进行搜索和替换

> ID：14942774
> 
> 赞同：0
> 
> 时间：2013-02-18T18:16:27.040
> 
> 标签：vba, outlook

我正在尝试编写一些 VBA 搜索并将段落标记替换为我正在撰写的电子邮件中的手动换行符。

虽然我在 Excel 中编写 VBA，但我是 Outlook 2012 VBA 的新手。

我从这段代码开始

```
tmp = Split(mail.HTMLBody, vbCrLf)
For Each Line In tmp
    If Line <> "" Then
        newBody = newBody  & Line & vbCrLf
    End If
Next
mail.HTMLBody = newBody 
```

来自[VBA Outlook - Replace Paragraph Mark With Manual Line Break](https://stackoverflow.com/questions/13950252/vba-outlook-replace-paragraph-mark-with-manual-line-break)。

我尝试将“邮件”更改为“item.htmlbody”，但出现“需要对象”错误。

有人可以让我走上正确的道路吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T02:07:47.293

在处理当前项目之前

设置邮件 = ActiveInspector.CurrentItem

# c# - 通过建立关系？

> ID：14942776
> 
> 赞同：0
> 
> 时间：2013-02-18T18:16:36.463
> 
> 标签：c#, asp.net

我正在阅读 packtpub asp.net 社交网络，但我无法理解以下内容

“这是我们需要的表格关系”

*   通过拥有帐户的朋友和帐户
*   通过朋友帐户的朋友和帐户
*   ...

    真正的意思是什么？你会使用什么类型的关系？

    *   通过拥有帐户的朋友和帐户（多对一？）
    *   通过朋友帐户的朋友和帐户（对许多人来说？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:38:03.360

没看过书，但是意思是Friends表和Account表之间有两个类似的关系，但是每个关系使用了不同的Friends列。

友谊是两个帐户之间的关系。所以 Friends 表需要引用两个帐户。举个简单的例子：

账户表：

*   ID（主键）
*   用户名

好友表：

*   Account1ID（主键）
*   Account2ID（主键）

Friends 表唯一地代表任意两个帐户之间的友谊。为了保持参照完整性，Friends 表和 Account 表之间需要有两种关系（作为外键）：

*   Friend.Account1 -> Account.ID
*   Friend.Account2 -> Account.ID

友谊中涉及的每个帐户对应一个关系。

实际上，Friends 表是多对多关系中的链接表，只是 Accounts 恰好是关系两边的表。这是一个帐户和另一个帐户之间的多对多关系。

# jquery - jQuery.Timeago 插件需要解释

> ID：14942777
> 
> 赞同：0
> 
> 时间：2013-02-18T18:16:39.913
> 
> 标签：jquery, datetime, jquery-plugins, timezone, timeago

有没有人使用过 jQuery [Timeago](http://timeago.yarp.com/)插件并能给出一些建议？

我把自己搞得一团糟。我在英国使用 GMT 和夏令时 (DST)，我的服务器在美国使用 MST，并且我一直将所有日期作为 UTC 存储在数据库中（使用 MySQL 的 UTC_TIMESTAMP()）。是的，令人困惑。

我想在从数据库返回的所有日期字段上使用这个插件，所以我知道所有需要使用 Timeago 转换的日期都将采用 UTC。

现在，Timeago 插件是否会确定我在 DST 国家并自动计算正确的时差？能否请您赐教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T18:27:00.613

此报价是否有助于解决任何问题（来自[http://timeago.yarp.com/](http://timeago.yarp.com/)）？

> 您是否担心时区支持？不要这样。Timeago 也处理这个问题。只要您的时间戳采用 ISO 8601 格式并包含完整的时区指示符 (±hhmm)，那么无论您的访问者居住在哪个时区，一切都应该开箱即用。

# html - 在 CSS 中，为什么在多个元素上“float:left;display:table;margin:x”的组合会使边距减小？

> ID：14942781
> 
> 赞同：11
> 
> 时间：2013-02-18T18:16:55.387
> 
> 标签：html, css, css-tables

在设计布局时，我决定尝试将主要列的基于浮动的布局与子元素的基于表格的布局结合起来。因此，我的 html/css 标记是这样的：

HTML：

```
<div class="column">
    <div class="sub-element"></div>
    <div class="sub-element"></div>
</div>
<div class="column">
    <div class="sub-element"></div>
    <div class="sub-element"></div>
</div>
... 
```

CSS：

```
.column {
    float: left;
    display: table;
    width: 15%;
    margin: 2%;
    /*  ...  */
}
.sub-element {
    display: table-cell;
    /*  ...  */
} 
```

具体的宽度和边距并不重要。请参阅[此 jsFiddle](http://jsfiddle.net/XMXuc/)以获取参考示例。

我看到发生的情况是，从左到右穿过页面的每个列块的边距都比上一个略小。由于没有额外的标记或 CSS 来实现这一点，我很困惑。在尝试了不同的值之后，我发现注释掉会`display: table`导致我期望的正常行为，例如恒定的列宽。

现在，我可以使用其他方法来获得我想要的布局，这不是问题；但我真的很好奇为什么会这样。有什么想法吗？

### 编辑

看起来这是一个 webkit 错误。`display: table`浮动和边距在 Firefox 中工作正常。关于为后代修复 webkit 的任何建议？

### 进一步编辑

我刚刚在 Safari 中进行了测试，它似乎也可以在那里工作。WTF 铬？？

### 最终编辑

在 Firefox 18、Safari 和 Chrome Canary（除了标准 Chrome）中进行测试后，看来这实际上是 Chrome 特有的错误。

最简单的解决方法是在每个浮动的内容中添加一个简单的附加包装器 div 以包含内容并将包装器的 CSS 设置为`width: 100%; height:100%; display: table;`，然后`display: table`从浮动的外部元素中删除 。奇迹般有效。

[http://jsfiddle.net/XMXuc/8/](http://jsfiddle.net/XMXuc/8/)

HTML：

```
<div class="column">
    <div class="sub-element-wrapper">
        <div class="sub-element"></div>
        <div class="sub-element"></div>
    </div>
</div>
<div class="column">
    <div class="sub-element-wrapper">
        <div class="sub-element"></div>
        <div class="sub-element"></div>
    </div>
</div>
... 
```

CSS：

```
.column {
    float: left;
    width: 15%;
    margin: 2%;
    /*  ...  */
}
.sub-element-wrapper {
    width: 100%;
    height: 100%;
    display: table;
}
.sub-element {
    display: table-cell;
    /*  ...  */
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T18:51:12.213

这不应该发生。块级表格的水平边距应该以与任何其他块级非替换元素相同的方式计算，如CSS2.1 规范[第 10.3.3 节](http://www.w3.org/TR/CSS21/visudet.html#blockwidth)所述，无论使用[哪种表格布局算法](http://www.w3.org/TR/CSS21/tables.html#width-layout)。特别是，[边距的百分比值](http://www.w3.org/TR/CSS21/box.html#margin-properties)应根据您显示为表格的元素的包含块的宽度计算；由于您的所有元素都是共享相同父元素和相同边距百分比值的兄弟元素，因此只要它们是浮动块框，它们就应该是等距的。

在除 Google Chrome 之外的所有浏览器中，元素*都是*等距的，正如预期的那样。所以我最好的猜测是这是另一个 Chrome 错误。

If you comment out the `display: table` declaration — which as you say causes the behavior to return to normal — browsers will still generate anonymous block table boxes *within* your floats to contain the table cells. This *should not* adversely affect the layout, but if it does, I can't comment further as I'm not intimately familiar with how table layout works in terms of CSS.

# node.js - Node.js 和 Apache：连接问题

> ID：14942795
> 
> 赞同：0
> 
> 时间：2013-02-18T18:17:54.560
> 
> 标签：node.js, centos, socket.io

我已经在 CentOS 服务器上安装了带有 Socket.io 的 Node.js，该服务器在端口 80 上运行 Apache。我创建了一个套接字测试，它只监听端口 8080。

如果我从服务器的外壳中卷曲地址 localhost:8080，我会收到 Socket.io-welcome 消息。如果我有这样的一行：

```
<script src="http://localhost:8080/socket.io/socket.io.js"></script> 
```

然后浏览器找不到该文件。

一个“解决方案”是将请求代理到`/nodejs/`to `http://localhost:8080/`，但这个解决方案并没有工作很长时间。

安装 Apache 后是否可以运行 Node.js 服务器？必须更改哪些设置才能访问 url: `http://server.com:8080`？似乎 Node.js 只接受来自 localhost 的连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T18:28:01.077

问题很可能出在您的 node.js 程序中。它应该监听`0.0.0.0`而不是`127.0.0.1`仅本地监听。

所以你有类似的东西：

```
.listen(8080, '127.0.0.1'); // '127.0.0.1' or 'localhost' 
```

您应该将其更改为：

```
.listen(8080); // or 0.0.0.0 
```

Apache 只有在它也使用端口 8080 时才会干扰，但如果是这种情况，在启动节点应用程序时应该会出错。

此外，如果您`http://localhost`在浏览器中连接，则仅当服务器与浏览器位于同一本地计算机上时，它才会起作用。我猜对测试很好。

如果您有托管服务器，则必须连接到域或 IP 地址，否则浏览器将找不到它。

更新：您的 socket.io 代码也需要正确连接：

```
var socket = io.connect('http://correct.server.com:8080'); // not localhost 
```

并且您的浏览器需要从正确的位置加载 javascript 文件：

```
<script src="http://correct.server.com/socket.io/socket.io.js"></script> // not localhost 
```

这可能有助于解决防火墙/负载平衡器问题：

[https://github.com/LearnBoost/socket.io/wiki/Socket.IO-and-firewall-software](https://github.com/LearnBoost/socket.io/wiki/Socket.IO-and-firewall-software)

# jquery - 段落ID中每个子复选框的jQuery

> ID：14942796
> 
> 赞同：0
> 
> 时间：2013-02-18T18:17:55.963
> 
> 标签：jquery

如何在名为 id="Paragraph1" 的段落中选择每个子复选框，如果选中则取消选中它，然后在 jQuery 中禁用它。

例子：

```
<input type="checkbox" id="chkMain"><br />
<p id="Paragraph1">
    <input type="checkbox" id"chk1"><br />
    <input type="checkbox" id"chk2"><br />
    <input type="checkbox" id"chk3"><br />
    <input type="checkbox" id"chk4"><br />
</p> 
```

jQuery选择：

```
$("#chkMain:not(:checked)").change(function() {
    $("#Paragraph1").children("input[type='checkbox' :checked]").each(function() {
        $(this).removeAttr("checked").attr("disabled",disabled");     
    });
}); 
```

此代码无法正常工作 b/c 由于某种原因在 IE8 中只能工作一半时间。同样使用 find 也不能正常工作，也许 b/ca 段落不是一个好父母。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T18:19:05.557

`input[type='checkbox' :checked]`不是正确的选择器。

它应该是：

`input[type='checkbox']:checked`

而且我认为您可以简化代码，例如：

```
$('#Paragraph1 input[type="checkbox"]:checked')  // select all checked input
                    .removeAttr('checked')       // remove checked attribute
                    .prop('disabled', true);     // make em disabled 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T18:21:43.637

替换所有这些：

```
$("#Paragraph1").children("input[type='checkbox' :checked]").each(function() {
   $(this).removeAttr("checked").attr("disabled",disabled");     
  }); 
```

有了这个：

```
 $("#Paragraph1 input[type='checkbox']:checked")
     .prop('checked', false)
     .prop('disabled', true); 
```

*   `each`当您想要对集合中的每个元素执行 jQuery API 不可用的操作时，您应该使用它，例如`alert`或发送 AJAX 请求。

*   尽可能使用`prop`，不要乱用属性。

*   CSS 选择器中的空格表示“子级”，因此删除空格`:checked`并在 Paragraph1 和输入之间添加空格。对于直接孩子，您可以使用`parent > children`

像这样：

```
$("#Paragraph1 > input[type='checkbox']:checked")
     .prop('checked', false)
     .prop('disabled', true); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T18:22:15.760

您的代码中有几个语法错误，您可以使用`prop`方法：

```
$("#chkMain").change(function() {
     $("#Paragraph1 input[type='checkbox']")
              .prop('checked', this.checked) 
              .prop('disabled', !this.checked)
}); 
```

# android - 是否可以在不使用 XML 资源的情况下使用 PreferenceFragment 创建首选项屏幕？

> ID：14942803
> 
> 赞同：1
> 
> 时间：2013-02-18T18:18:18.477
> 
> 标签：android, xml, fragment, preferences, preferenceactivity

我目前能够使用 PreferenceFragment 创建一个首选项屏幕，在其中我使用以下方式分配我的首选项：

```
addPreferencesFromResource(R.xml.preferences); 
```

我不想使用资源“R.xml.preferences”，而是想使用我已经保存的 SharedPreferences，例如：

```
SharedPreferences prefs = this.getActivity().getSharedPreferences("preferences", 0);

addPreferencesFromResource(prefs); 
```

但是，这不起作用。是否有可能做到这一点？如果是这样，如何？还是需要我使用 xml 文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-07T19:02:14.100

我碰巧遇到了完全相同的问题，但我想通了，希望这会有所帮助。

您需要执行以下步骤才能在不使用 XML Reouser 的情况下添加自定义首选项

首先：您需要创建一个首选项屏幕，正如它所说的一个“屏幕”，它可以包含多个首选项，并且必须链接到您的 PreferenceFragment 或 PreferenceActivity。例如考虑以下 PreferenceFragment （并认为它包含在高级活动中......）

```
public static class YourPreferenceFragment extends PreferenceFragment implements OnSharedPreferenceChangeListener {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        PreferenceScreen p = createPreferences();
        this.setPreferenceScreen(p);//Set the PreferenceScreen as the current one on this fragment

        //now bind values, notice we use p.findPreference which means whe look into the preferenceScreen Associated with the PreferenceFragment/Activity
        bindPreferenceSummaryToValue(p.findPreference("some_key"));
    }
} 
```

现在考虑 createPreferences 是一个方法，它将返回一个带有您的自定义首选项的 PreferenceScreen，例如 ListPreference 或 CheckboxPreference。这就是您真正创建首选项并将它们添加到 PreferenceScreen 中的方式

```
private PreferenceScreen createPreferences()
    {
        PreferenceScreen p =
        getPreferenceManager().createPreferenceScreen(getActivity());

        ListPreference listPref = new ListPreference(getActivity());

        listPref.setKey("some_key"); //Refer to get the pref value
        CharSequence[] csEntries = new String[]{"Item1","Item2"};
        CharSequence[] csValues = new String[]{"1","2"};
        listPref.setDefaultValue(-1);
        listPref.setEntries(csEntries); //Entries(how you display them)
        listPref.setEntryValues(csValues);//actual values
        listPref.setDialogTitle("Dialog title");
        listPref.setTitle("Title");
        listPref.setSummary("Some summary");

        p.addPreference(listPref);

        return p;
    } 
```

请让我知道这是否最有帮助，

编辑：bindPreferenceSummaryToValue 的代码

```
private static void bindPreferenceSummaryToValue(Preference preference) {
    // Set the listener to watch for value changes.
    preference.setOnPreferenceChangeListener(sBindPreferenceSummaryToValueListener);

    // Trigger the listener immediately with the preference's
    // current value.

    if (preference instanceof CheckBoxPreference) {
        sBindPreferenceSummaryToValueListener.onPreferenceChange(preference, PreferenceManager.
                getDefaultSharedPreferences(preference.getContext()).
                getBoolean(preference.getKey(),false));

    } else {
        sBindPreferenceSummaryToValueListener.onPreferenceChange(preference, PreferenceManager.
                getDefaultSharedPreferences(preference.getContext()).
                getString(preference.getKey(),""));
    }

} 
```

# hibernate - 当数据源丢失时，如何防止 Bootstrap 数据迁移运行

> ID：14942806
> 
> 赞同：0
> 
> 时间：2013-02-18T18:18:25.667
> 
> 标签：hibernate, grails, configuration, grails-orm, grails-2.0

grails v2.0.1 配置已外部化到一个文件中，以便它可以位于安全分区上。

这是通过修改 Config.groovy 和 DataSource.groovy 来完成的

```
grails.config.locations = ["file:/Volumes/secure/local.config.groovy"] 
```

当这个添加的配置位置不可用时，引导代码无法连接到数据库，我得到这个令人困惑的错误：

运行 Grails 应用程序错误 util.JDBCExceptionReporter - 未找到表“USER”；SQL 语句： select count(*) as y0_ from user this_ ; 嵌套异常是 org.hibernate.exception.SQLGrammarException：无法执行查询

我想要一个错误，告诉我数据源不可用。我需要在我的 grails 配置中进行哪些更改才能做到这一点？

```
class BootStrap {

    def init = { servletContext ->

        if (!User.count()) {
            setupAdminUsers() // inserts admin user for shiro
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T18:35:09.153

这些是旧式引导数据迁移，应作为迁移添加（使用[数据库迁移](http://grails.org/plugin/database-migration)插件）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T18:27:09.830

在运行 GORM 之前添加条件更好，但似乎仍然是错误的。

```
class BootStrap {

    def grailsApplication    

    def init = { servletContext ->

        if (!grailsApplication.resources) {
           throw new RuntimeException("data source is missing")
        }

        if (!User.count()) {
            setupAdminUsers()
        }
    }
} 
```

# javascript - JQuery：如何将日期值获取为“YYYYMMDDHHMMSSXXX”？

> ID：14942807
> 
> 赞同：0
> 
> 时间：2013-02-18T18:18:25.760
> 
> 标签：javascript, jquery, timestamp

当我点击我的

```
<button id="A">Hello!</button> 
```

我想触发我的函数 clickButton() **，但还想获得一个军事日期样式的时间戳 YYYYMMDDHHMMSSXXX**，用于单击按钮的确切时间。**我怎样才能在 JS 或更好的 JQuery 中做？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T18:23:08.193

只需垫并粘在一起

```
function makeStamp(d) { // Date d
    var y = d.getUTCFullYear(),
        M = d.getUTCMonth() + 1,
        D = d.getUTCDate(),
        h = d.getUTCHours(),
        m = d.getUTCMinutes(),
        s = d.getUTCSeconds(),
        pad = function (x) {
            x = x+'';
            if (x.length === 1) {
                return '0' + x;
            }
            return x;
        };
        return y + pad(M) + pad(D) + pad(h) + pad(m) + pad(s);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T20:35:50.353

Paul S. 的分叉，包括毫秒（[小提琴](http://jsfiddle.net/Xf8sT/1/)）：

```
//makeStamp: Create a timestamp with format YYYYMMDDhhmmssxxx
function makeStamp(d) { // Date d
    // Get date's subparts as variables:
    var y = d.getUTCFullYear(), //   4 digits
        M = d.getUTCMonth() + 1,// 1-2 digits
        D = d.getUTCDate(),     // 1-2 digits
        h = d.getUTCHours(),    // 1-2 digits
        m = d.getUTCMinutes(),  // 1-2 digits
        s = d.getUTCSeconds();  // 1-2 digits
    ms = d.getUTCMilliseconds();// 1-3 digits
    // 2\. Adjust lengths to be right:
    function l2(x) { // for months, days, hours, seconds. Force length=2 digits.
        x = x + ''; // stingify
        if (x.length === 1) { return '0' + x; }
        return x;
    }

    function l3(x) { // for milliseconds. Force length=3 digits
        x = x + ''; // stingify
        if (x.length === 1) { return '00' + x; }
        if (x.length === 2) { return  '0' + x; }
        return x;
    }
    // Concatenate to YYYYMMMDDDhhmmssxxx format:
    return y + l2(M) + l2(D) + l2(h) + l2(m) + l2(s) + l3(ms);
}

var c = makeStamp(new Date());
alert('Time on run was: ' + c); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T18:36:07.447

如果格式不固定并且只关心您的按钮被点击的确切时间，您可以简单地使用[`toString()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/toString)

如果您需要更大的灵活性并且需要在 JS 中进行大量的日期管理，请确保签[出 Datejs](http://www.datejs.com/)。[正如您在toString](http://code.google.com/p/datejs/wiki/APIDocumentation#toString)函数的情况下看到的那样，它非常令人印象深刻并且有据可查。

# matlab - knnsearch(X,Y) 不返回 X 的元素

> ID：14942813
> 
> 赞同：1
> 
> 时间：2013-02-18T18:18:44.077
> 
> 标签：matlab

我正在尝试在我的一些代码中实现 k 最近邻函数。我遇到了一个我无法理解的相当奇怪的问题。让

```
X=[1,4,51,3,2,4,6]' % a column vector
knnsearch(X,8) %returns 7! 
```

我已经对此进行了测试，通常 knnsearch(X,Y) 将返回 Y 中的给定元素，即*X*中的最近邻居。但是当然 '7' 根本不是 X 中的一个元素，但是 knnsearch(X,8) 返回 7。我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T18:23:29.643

它返回**索引**而**不是元素**本身。

```
>> X = [1, 12, 33, 14]';
>> nn = knnsearch(X, 8);
>> X(nn) %Will print 12 
```

`nn`保存索引（在本例中为`2`）。

所以`X(nn)`会给你`12`，这是预期的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T18:23:09.847

从[文档](http://www.mathworks.com/help/stats/exhaustivesearcher.knnsearch.html)：

```
IDX = knnsearch(NS,Y)

[...]

IDX is a column vector with ny rows, where ny is the number of rows in Y. 
Each row in IDX contains the index of observation in NS.X which has the 
smallest distance to the corresponding observation in Y. 
```

`knnsearch`不返回最近的邻居，它返回最近邻居的*索引*。在您的示例中，`6`是最接近 的元素`8`，并且它位于 index `7`，因此您得到`7`.

# c# - 如何检查一个项目是否等于数组中的任何项目？

> ID：14942814
> 
> 赞同：2
> 
> 时间：2013-02-18T18:18:50.770
> 
> 标签：c#, arrays

例如，如果我有一个`int[5] array = {1, 2, 3, 4, 5}`

和`int check = 5`

有没有一种简单的方法来检查`if (check == any item in array)`然后做某事？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-18T18:19:39.290

只需使用`Contains`LINQ 方法。您需要添加`using System.Linq`才能访问该方法。

```
if(array.Contains(5))
{
    //TODO do stuff
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T18:20:24.057

你可以使用[`Enumerable.Contains()`](http://msdn.microsoft.com/en-us/library/bb352880.aspx)方法。`true`如果源序列包含具有指定值的元素，则此方法返回；否则，`false`。

> 使用默认相等比较器确定序列是否包含指定元素。

```
int[] array = {1, 2, 3, 4, 5};
if(array.Contains(5))
{
   Console.WriteLine("Array has an element called 5");
} 
```

这是一个**[演示](http://ideone.com/9Br8Mm)**。

不要忘记添加**[`System.Linq`](http://msdn.microsoft.com/en-us/library/gg145016.aspx)**命名空间。

***注意***：方法的积极方面，`Contains()`只要找到匹配的元素，枚举就会终止。如果您搜索类似的元素；

```
foreach(var i in array)
{
  if(i == 5)
  ///
} 
```

您必须枚举数组中的所有元素。我认为这是这种情况下这种方法的最大好处。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T18:20:23.950

```
if (array.Contains(check))
{
    //code
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T18:21:17.593

你可以说：

```
array.Contains(check) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-18T18:45:55.440

你可以试试这段代码：

```
int[] array = { 1, 2, 3, 3, 5 };
int check = 5;

int r = Array.Find<int>(array, (arr => arr == check));
if (r != 0)
{
    // then do something.
} 
```

# actionscript-3 - 比较位图不起作用

> ID：14942816
> 
> 赞同：0
> 
> 时间：2013-02-18T18:19:06.150
> 
> 标签：actionscript-3

我正在尝试将位图 1 与位图 2 进行比较，如果它们等于 0，我希望它们做一些事情。因此，为了查看它返回的内容，我添加了一条痕迹。但似乎它正在追踪与我预期完全不同的东西。这是代码：

```
var scratch_c : Scratch_card = new Scratch_card ();
var backgr: Background = new Background ();
var mouseclick:Number;
var masking:Sprite = new Sprite()

var bmd1:BitmapData = new BitmapData(742, 165);
var bm:Bitmap = new Bitmap(bmd1);
addChild (bm);
bm.x=20;
bm.y=40;
bmd1.draw(scratch_c);

var bmd2:BitmapData = new BitmapData(742, 165);
var bm2:Bitmap = new Bitmap(bmd2);
addChild (bm2);
bm2.x=20;
bm2.y=40;
bmd2.draw(backgr);
bm2.mask = masking;
addChild(masking);

stage.addEventListener(MouseEvent.MOUSE_DOWN, Pressing);
stage.addEventListener(MouseEvent.MOUSE_MOVE, Moving);
stage.addEventListener(MouseEvent.MOUSE_UP, Lifting);

function Pressing(event:MouseEvent):void {
mouseclick = 1;
}

function Moving(event:MouseEvent):void {
if (mouseclick == 1) {
masking.graphics.beginFill(0x000000);
masking.graphics.drawEllipse(mouseX, mouseY, 70, 60);
masking.graphics.endFill();

}
}

function Lifting(event:MouseEvent):void {
trace(bmd1.compare(bmd2));
mouseclick = 0;
} 
```

这就是它正在追踪的内容![痕迹：](../Images/1dfa21593c2fa95026cc70a773228ee4.png)

如何让它比较 bmd1 和 bmd2 的像素？为什么它不返回一个数字？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T18:41:34.040

> 不是百分比，但它应该返回一个可以指定为图像的新 BitMapData 对象。位图数据比较（）

返回 Object — 如果两个 BitmapData 对象具有相同的尺寸（宽度和高度），则该方法返回一个新的 BitmapData 对象，该对象具有两个对象之间的差异（请参阅主要讨论）。如果 BitmapData 对象相等，该方法返回数字 0。如果 BitmapData 对象的宽度不相等，该方法返回数字 -3。如果 BitmapData 对象的高度不相等，则该方法返回数字 -4。

取自[这里](https://stackoverflow.com/questions/9136048/comparing-two-bitmapdata-in-actionscript-3)

结果：

> 您的位图不等价，这就是为什么您会得到一个由 2 个不同位图组成的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T21:37:26.167

你有没有尝试过

```
if(bmd1.compare(bmd2) == bmd2){
    // complete
} 
```

但是，在查看您的代码之后。我认为你需要测试掩蔽而不是 bmd1
所以像这样。

```
var mymask:BitmapData = new BitmapData(742, 165, true,0x000000000);
mymask.draw(masking);

if(mymask.compare(bmd2) == bmd2){
    // complete
} 
```

未经测试的代码，但应该让你走上正确的道路

# hosting - 可以从同一托管公司的不同帐户访问网站

> ID：14942817
> 
> 赞同：0
> 
> 时间：2013-02-18T18:19:10.347
> 
> 标签：hosting

这是我面临的一个非常奇怪的问题，我什至从未听说过。

我在 Liquidweb 的服务器上有 2 个托管帐户。两人共享。在家里，我无法使用一个帐户访问网站。在工作中，我无法访问其他帐户上的网站。工作和家庭都有相同的 ISP。

当我无法访问时，我测试过的多个浏览器无法连接，并出现错误“连接失败”。其他一切都很好。Ping 也超时。

如果有帮助，我正在使用 macbook pro。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T09:40:18.300

与支持人员交谈。显然，当我在几次尝试后未能登录到 cPanel 时，我的 ip 被他们的防火墙列入黑名单。具有讽刺意味的是，我在家里和工作场所分别忘记了它们（由于我的密码应用程序失败）。

都整理好了。谢谢各位麻烦。

# ruby-on-rails - 如何在 Rails 中使用 Rspec 存根错误引发？

> ID：14942828
> 
> 赞同：16
> 
> 时间：2013-02-18T18:19:53.450
> 
> 标签：ruby-on-rails, ruby, unit-testing, rspec, stubbing

我是 Rails 和 Rspec 的新手，我正在使用 Rspec 测试这个控制器方法，其中包括异常处理：

```
def search_movies_director
  @current_movie = Movie.find(params[:id])
  begin
    @movies = Movie.find_movies_director(params[:id])
  rescue Movie::NoDirectorError
    flash[:warning] = "#{@current_movie} has no director info"
    redirect_to movies_path
  end
end 
```

我不知道如何正确测试所述路径：在无效搜索后（收到错误时）它应该重定向到主页。我试过这样的事情：

```
describe MoviesController do
  describe 'Finding Movies With Same Director' do
    #some other code

    context 'after invalid search' do
      it 'should redirect to the homepage' do
        Movie.stub(:find)
        Movie.stub(:find_movies_director).and_raise(Movie::NoDirectorError)
        get :search_movies_director, {:id => '1'}
        response.should redirect_to movies_path
      end
    end

  end
end 
```

运行测试失败并出现错误后： `NameError: uninitialized constant Movie::NoDirectorError`

如何伪造在此测试中引发错误，以便实际检查是否发生重定向？

谢谢！

**更新：**

正如 nzifnab 解释的那样，它找不到`Movie::NoDirectorError`. 我忘了定义这个异常类。所以我将它添加到`app/models/movie.rb`：

```
class Movie < ActiveRecord::Base
  class Movie::NoDirectorError < StandardError ; end
  #some model methods
end 
```

这解决了我的问题，这个测试通过了。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-18T18:35:28.010

你很亲密。你需要`any_instance`在那里添加。

```
Movie.any_instance.stub(:find_movies_director).and_raise(Movie::NoDirectorError) 
```

编辑：我误读了帖子。给定电影的实例，上述内容将起作用，但不适用于 OP 的问题。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-18T18:37:37.267

该错误表明它不知道该`Movie::NoDirectorError`异常类的定义位置。您可能需要明确`require`定义该类的文件，否则测试可能无法找到它。

Rails 将自动尝试`constant missing`使用传统的文件目录格式定位任何常量。它将根据常量的名称在`load_path`at`movie/no_director_error`中查找文件。`movie`如果找不到该文件或该文件未定义预期的常量，则您需要自己专门要求该文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-10T12:33:53.210

在 Rails 4.1 中：

`verse_selector = double("VerseSelector", select_verses: ActiveRecord::RecordNotFound.new("Verses not found"))`

`verse_selector.select_verses`现在将返回一个`ActiveRecord::RecordNotFound`

# ios - 网络摄像机应用

> ID：14942829
> 
> 赞同：1
> 
> 时间：2013-02-18T18:19:57.037
> 
> 标签：ios, camera, ip, onvif, psia

请建议我如何开发一个基于 iPhone/Android 的应用程序，它可以显示来自 IP 摄像机的实时流媒体？

是否可以使用简单的 HTTP 编程进行开发？

如果可能，HTTP API 是否特定于 IP cam 的制造商？这些 ONVIF 和 PSIA 真正定义了什么？

这是否意味着如果 IP cam 遵循 ONVIF 是同一个应用程序可以与任何其他遵循 ONVIF 的 IP cam 一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:26:08.120

ONVIF 定义了一个标准化接口来向 IP 摄像机发送命令。它还通过其测试仪认可相机的行为，所以是的，您可以预期，如果您与相机互操作，那么您可能也会与其他相机互操作。

ONVIF 规范可在[此处](http://www.onvif.org/Documents/Specifications.aspx)找到。

最后，假设 HTTP 编程通常是不够的。您将不得不处理一个 SOAP 定义的协议，并且手动编码它，恕我直言，太疯狂了：永远不要自己编写解析器！（除非你真的知道你在做什么）。因此，您需要使用 gsoap 或 Visual Studio 或任何其他为您生成编码和解码的框架。

# version-control - 自动化 IEC 62304 和 FDA 标准要求的工具

> ID：14942833
> 
> 赞同：7
> 
> 时间：2013-02-18T18:20:12.673
> 
> 标签：version-control, automation, standards, medical, traceability

我正在寻找一个免费的软件工具（或工具集）来自动生成需要 IEC 62304 和 FDA V&V 标准（医疗设备软件）的文档。

基本上，维护不同文档之间的可追溯性、问题/错误跟踪器、SVN、源代码、测试用例等、报告生成、文档版本控制、项目跟踪、听觉功能等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-05-02T22:31:29.093

[法规文档管理器](https://github.com/innolitics/rdm)( RDM) 是一组模板和 python 脚本，旨在帮助尽可能地自动化 IEC62304 合规性。IEC62304 的核心是使用最佳实践来构建已考虑和减轻尽可能多风险的高质量软件。

RDM 的既定设计目标是：

1.  提供涵盖常见用例但可定制的通用模板。
2.  提供可读文件；例如，其他 62304 模板包括许多短的深度嵌套的子部分。我们最多使用两层嵌套。我们还提供了标记（例如，针对不同的安全等级）来删减文档中不相关的部分，以便文档只包含特定项目所必需的内容。
3.  专注于软件开发人员；计划文档旨在供团队中的软件开发人员经常阅读和使用。因此，无论在使开发人员易于阅读与监管机构/审计人员之间进行权衡时，我们都针对开发人员进行了优化。例如，我们对 IEC62304 部分重新排序，以便为开发人员遵循更合乎逻辑的顺序，但代价是与 IEC62304 的结构不太平行。
4.  易于审计。为了使监管机构/审核员更容易阅读该文件，我们提供了审核员评论和返回 IEC62304 的链接。这些链接和注释默认是隐藏的，但是有一个标志可以打开它们。这样，我们可以在日常工作中使用不带注释的“官方”版本，但我们可以给审核员两份副本——“官方”版本和包含所有这些额外注释的“审核员”版本。
5.  提供精美的文件。很多时候没有人准备需求文件；我们认为这部分是因为标准模板又大又丑。
6.  在开发新版本的 62304 和相关标准时，尽可能轻松地“升级”您的文档。

该工具以 Markdown 格式生成文档，这些文档旨在存储在源代码管理中，以及 PDF 格式。[您可以在此处查看 PDF 和 markdown 版本](https://github.com/innolitics/rdm/tree/master/examples)的示例。

请注意，该工具并不完整，但正在积极开发中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T18:39:22.950

与法规遵从性无关，但也许[Axiom](http://www.iconcur-software.com/)可以提供帮助。它可以根据您的要求生成 Word 文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-05T09:32:38.983

MathWorks有一种称为[基于模型的设计](https://www.mathworks.com/discovery/iec-62304.html)的方法，它有助于集成和自动化 IEC 62304 医疗软件开发所需的大部分 V&V 流程。通过这种方式，您可以完成从需求管理到软件集成和测试的所有步骤。标准要求的文档工件是在该过程中自动生成的。

# build - LLVM 3.3 的黄金插件

> ID：14942840
> 
> 赞同：3
> 
> 时间：2013-02-18T18:20:39.177
> 
> 标签：build, llvm, clang, llvm-clang, gold-linker

我构建了 LLVM 并正在使用它，现在我想添加 Gold 插件以用作链接器，我只是在 LLVM 网站上关注了“build gold with plugin support”，现在有了 ld-new 但我不想重新构建 LLVM ，有没有办法在不重建 LLVM 的情况下添加这个插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T15:37:31.510

好吧，我发布了我的解决方案，如果不重新编译 LLVM，就无法使用黄金插件。如果您不想更改根目录中的任何内容，则可以在同一位置编译和安装 binutils 和 LLVM查找工具的目录（clang -print-search-dirs），因此您可以确定 clang 将首先在链接时调用 ld gold。LLVMgold.html 中没有提到它，但它需要在 lib 中创建 bfd-plugins 目录并在那里安装 LLVMgold.so 和 linLTO.so。

# sql - oracle sql查询报错

> ID：14942844
> 
> 赞同：1
> 
> 时间：2013-02-18T18:20:57.833
> 
> 标签：sql, oracle, ora-01858

以下查询给出错误：

```
SELECT to_char(last_day(add_months(to_char(to_date('01-02-2013','dd-mm-yyyy'),
    'dd-MON-yyyy'),-1)) + 1,'dd-mm-yyyy') FROM dual;

ORA-01858: a non-numeric character was found where a numeric was expected 
```

我在两个系统上试过这个：

1.  使用 NLS_DATE_FORMAT='DD-MON-RR' - 此查询工作正常。

2.  使用 NLS_DATE_FORMAT='MM-DD-YYYY' - 给我错误`ORA-01858: a non-numeric character was found where a numeric was expected`。

关于此查询为何失败的任何线索？我不能让查询依赖于 DATE 格式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T18:26:27.337

为什么在调用 add_months 时要执行 to_char ，您需要传递一个日期，例如

```
SELECT to_char(last_day(add_months(to_date('01-02-2013','dd-mm-yyyy'),
    ,-1)) + 1,'dd-mm-yyyy') FROM dual; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T18:27:15.880

您在调用中有一个隐式的 char-to-date 转换`add_months()`；您传递的参数是字符串，而不是日期。您的`to_char()`内部是多余的，当您的 NLS_DATE_FORMAT 与您在其中使用的格式不匹配时会导致错误`to_char()`：

```
SELECT to_char(last_day(add_months(to_date('01-02-2013','dd-mm-yyyy'),-1)) + 1,
    'dd-mm-yyyy') FROM dual; 
```

我不完全确定你在做什么......如果你想要那个日期所在月份的第一天，你可以这样做：

```
SELECT to_char(trunc(to_date('01-02-2013', 'dd-mm-yyyy'), 'MM'),
    'dd-mm-yyyy') FROM dual; 
```

这使用该[`TRUNC(date)`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions220.htm)函数有效地向下舍入到月初。

# android-intent - Android如何阻止访问指定的URL？

> ID：14942846
> 
> 赞同：1
> 
> 时间：2013-02-18T18:21:03.683
> 
> 标签：android-intent, service, filter

我需要创建一个应该在后面工作的应用程序并检查输入到浏览器的 url。例如：假设网址：www.youtube.com 应用程序需要告诉用户她/他无法访问该网站。我的意思是我需要一个网络过滤器。

它尝试了广播接收器，但我不能这样做。我尝试编辑主机并做到了，但这不是我真正想要的应用程序。因为我想通过网络服务连接到我的应用程序并向我的应用程序发送一些网址，这些网址将被阻止。我试图访问写入网络浏览器的文本，如果它在我的黑名单 url 上，我停止了网络浏览器，但这又不是我想要的。

你能建议我如何实现这个应用程序吗？多谢你们。

# networking - 使用 Wireshark 或 ngrep 保存 FLV 视频 - 或其他

> ID：14942847
> 
> 赞同：1
> 
> 时间：2013-02-18T18:21:04.497
> 
> 标签：networking, flv, wireshark, dump, ngrep

网站上有一个 FLV 视频，我想保存它以便离线显示。我已经尝试了几种不起作用的解决方案：

*   基本上，不可能从 HTML 源代码中获取视频。我确实知道视频的确切 URL，但有某种保护措施禁止在浏览器或 wget 中再次播放相同的 URL。
*   使用 Firefox 或 Chrome 工具也是不可能的。此外，使用查看 Flash 缓存目录（我在 Ubuntu 上运行）的工具是不可能的，如[flashdownload.sh](http://techie-buzz.com/foss/a-script-to-save-cached-flash-videos-on-linux.html)
*   我尝试将代理设置为 squid，但失败了：似乎外国网站检测到它，不接受代理并将我转发给 Google！另外，我不确定如何正确设置 squid 以在缓存目录中保存一个可播放的视频文件。

因此，我的线索是“嗅探”HTTP 连接并转储 FLV。我已经尝试过使用 Wireshark 和在菜单中保存 HTTP 对象的选项，但不幸的是它没有显示 FLV 文件（如果我去经典视频网站它会显示它）。它显示 TCP 数据包的反弹，但我的问题是我非常无法将它重新组合到一个文件中！有什么简单的解决方案吗？

我也尝试使用 ngrep，就像使用 Ubuntu 一样，但同样的问题，我很难找到正确的命令。

谢谢大家的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T16:24:21.793

我想我找到了一个可以达成交易的软件：[TubeMaster++](http://www.tubemaster.net/)

它给了我 FLV 文件！不幸的是，该文件不可读......我怀疑某种加密：似乎给了 SWGF 播放器一个密钥，然后使文件清晰。不幸的是，我无法理解如何做到这一点......我认为它被加密的原因是因为我使用这个工具来获取其他 FLV 文件（Youtube 等）没有问题。

因此，我放弃了这种方式。剩下的唯一解决方案是使用 RecordMyDesktop 之类的工具捕获视频流。

谢谢你的帮助！

# playframework-1.x - db进化，oracle多线

> ID：14942850
> 
> 赞同：2
> 
> 时间：2013-02-18T18:21:30.147
> 
> 标签：playframework-1.x, multiline

我使用 play 1.2.5，

我想将 db evolution 系统与 oracle 11g Release 2 一起使用。

但是当我有一个多行请求时，

```
# --- la table champ pointe directement sur la table categorie (pas de relation n, n )

# --- !Ups

    DROP TABLE CATEGORIE_CHAMP;
    ALTER TABLE CHAMP ADD (ID_CATEGORIE  NUMBER(38));
    ALTER TABLE CHAMP ADD CONSTRAINT FK_CHAMP_CATEGORIE FOREIGN KEY (ID_CATEGORIE) REFERENCES CATEGORIE(ID_CATEGORIE);

# --- !Downs
  CREATE TABLE "CATEGORIE_CHAMP" 
   (    "ID_CATEGORIE" NUMBER(38,0), 
    "ID_CHAMP" NUMBER(38,0), 
     CONSTRAINT "Categorie_Champ PK" PRIMARY KEY ("ID_CHAMP", "ID_CATEGORIE")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS NOCOMPRESS LOGGING
  TABLESPACE "USERS"  ENABLE, 
     CONSTRAINT "CATEGORIE_CHAMP_CATEGORIE" FOREIGN KEY ("ID_CATEGORIE")
      REFERENCES "RENTIT"."CATEGORIE" ("ID_CATEGORIE") ENABLE, 
     CONSTRAINT "CATEGORIE_CHAMP_CHAMP" FOREIGN KEY ("ID_CHAMP")
      REFERENCES "RENTIT"."CHAMP" ("ID_CHAMP") ENABLE
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  TABLESPACE "USERS" ;

 ALTER TABLE CHAMP DROP COLUMN ID_CATEGORIE; 
```

此请求不起作用并产生问题：

```
ORA-00911: caractère non valide
[ERROR:911, SQLSTATE:22019]
 invalid character. The character is the ;. 
```

多行请求的解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:57:07.043

有关我已解决问题的信息，我更改了 play.db.SQLSplitter 类。

我已经更改了以下的 ligne 195 和 196：

```
++i;
CharSequence ret = sql.subSequence(prev, i); 
```

在 ：

```
CharSequence ret = sql.subSequence(prev, i);
++i; 
```

所以最后; 未使用，并且请求工作。

# android - 源附件不包含文件 Layoutinflater.class 的源

> ID：14942851
> 
> 赞同：2
> 
> 时间：2013-02-18T18:21:36.217
> 
> 标签：android

我正在尝试编写一个使用 google maps api 版本 2 的 android 应用程序。
在 Debug 中，应用程序在执行指令时崩溃：

```
 setContentView(R.layout.activity_poi_map); 
```

这是错误：

> 源附件不包含文件 Layoutinflater.class 的源

我不明白原因。在标题中我导入了整个班级

```
android.view.* 
```

提前感谢您的任何回答。

这是代码：

```
public class PoiMap extends FragmentActivity {

    private GoogleMap pMap;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        Intent callerIntent = getIntent();
        final LatLng userCoord = callerIntent.getParcelableExtra("userCoord");
        final Poi poi = (Poi) callerIntent.getSerializableExtra("poi");

        setContentView(R.layout.activity_poi_map);
        setUpMapIfNeeded(userCoord);

        // Sets a callback that's invoked when the camera changes.
        pMap.setOnCameraChangeListener(new OnCameraChangeListener() {

            @Override
            /* Only use the simpler method newLatLngBounds(boundary, padding) to generate 
             * a CameraUpdate if it is going to be used to move the camera *after* the map 
             * has undergone layout. During layout, the API calculates the display boundaries 
             * of the map which are needed to correctly project the bounding box. 
             * In comparison, you can use the CameraUpdate returned by the more complex method 
             * newLatLngBounds(boundary, width, height, padding) at any time, even before the 
             * map has undergone layout, because the API calculates the display boundaries 
             * from the arguments that you pass. 
             * @see com.google.android.gms.maps.GoogleMap.OnCameraChangeListener#onCameraChange(com.google.android.gms.maps.model.CameraPosition)
             */
            public void onCameraChange(CameraPosition arg0) {
                // Move camera.
                if (poi != null){
                    LatLng poiCoord = poi.getLatLng();
                    pMap.addMarker(new MarkerOptions()
                    .position(poiCoord)
                    .title(poi.getName())
                    .snippet(poi.getCategory())
                    .icon(BitmapDescriptorFactory.fromResource(R.drawable.ic_star)));

                    Log.d("userCoord", userCoord.toString());
                    Log.d("poiCoord", poiCoord.toString());

                    double minY = Math.min(userCoord.latitude, poiCoord.latitude);
                    double minX = Math.min(userCoord.longitude, poiCoord.longitude);
                    double maxY = Math.max(userCoord.latitude, poiCoord.latitude);
                    double maxX = Math.max(userCoord.longitude, poiCoord.longitude);

                    Log.d("minY", " " + minY);
                    Log.d("minX", " " + minX);
                    Log.d("maxY", " " + maxY);
                    Log.d("maxX", " " + maxX);

                    LatLng northEast = new LatLng(maxY, maxX);
                    LatLng southWest = new LatLng(minY, minX);
                    LatLngBounds bounds = new LatLngBounds(southWest, northEast);

                    // move camera
                    pMap.animateCamera(CameraUpdateFactory.newLatLngBounds(bounds, 40));

                    // Remove listener to prevent position reset on camera move.
                    pMap.setOnCameraChangeListener(null);
                }
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_poi_map, menu);
        return true;
    }

    @Override
    protected void onResume() {
        super.onResume();
        setUpMapIfNeeded(new LatLng(0.0, 0.0));
    }

    private void setUpMapIfNeeded(LatLng coord) {
        // Do a null check to confirm that we have not already instantiated the map.
        if (pMap == null) {
            // Try to obtain the map from the SupportMapFragment.
            pMap = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map))
                    .getMap();
            // Check if we were successful in obtaining the map.
            if (pMap != null) {
                setUpMap(coord);
            }
        }
    }

    private void setUpMap(LatLng userCoord) {
        pMap.addMarker(new MarkerOptions()
                            .position(userCoord)
                            .title("Your location")
                            .icon(BitmapDescriptorFactory.fromResource(R.drawable.ic_user)));
        pMap.animateCamera(CameraUpdateFactory.newLatLng(userCoord));

        /* public static CameraUpdate newLatLngZoom (LatLng latLng, float zoom) 
         * Returns a CameraUpdate that moves the center of the screen to a latitude 
         * and longitude specified by a LatLng object, and moves to the given zoom 
         * level.
         * Parameters
         * latLng   a LatLng object containing the desired latitude and longitude.
         * zoom     the desired zoom level, in the range of 2.0 to 21.0\. 
         * Values below this range are set to 2.0, and values above it are set to 21.0\. 
         * Increase the value to zoom in. Not all areas have tiles at the largest zoom levels.
         * Returns
         * a CameraUpdate containing the transformation. 
*/
        pMap.animateCamera(CameraUpdateFactory.newLatLngZoom(userCoord, 15));

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T19:25:46.627

这是一个常见问题，我永远无法为任何人找到一个好的答案，所以我会尽力提供帮助。

这听起来像您缺少 Android 的源代码。您需要使用**SDK Manager**在 Eclipse中下载**Android SDK 的源**代码。

 **1.  在 Eclipse 中打开**SDK 管理器**
2.  找到您想要源代码的 android 版本。在本例中，**Android 4.2 (API17)**
3.  选中**Android SDK 的源框**
4.  点击**安装#个包**

例如

![在此处输入图像描述](../Images/1b4c7f481c9432ba1181833192750def.png)

之后，运行您的程序并到达您收到该错误的地步。现在您需要附上您下载的文档

**短的**

1.  单击按钮**编辑源查找路径**
2.  单击**默认**文件夹
3.  点击**添加**
4.  选择**文件系统目录**并单击**确定**
5.  找到您下载的源代码。在此示例中，为 API17 查找*android-17*。它将在一个目录中，例如`adt-bundle\sdk\sources\android-17`
6.  单击确定几次，您的源现在已链接。

**长**

单击按钮**编辑源查找路径**

![在此处输入图像描述](../Images/71c79cbc1f3494def05fcb2e234d1131.png)

单击**默认**文件夹，然后单击**添加**

![在此处输入图像描述](../Images/8d10332ec0a30cf297777dce80d7bc06.png)

选择**文件系统目录**并单击**确定**

![在此处输入图像描述](../Images/2115723b658fb6a10b54349f6edcd7a6.png)

找到您下载的源代码。在此示例中，为 API17 查找*android-17*。它将在一个目录中，例如`adt-bundle\sdk\sources\android-17`

![在此处输入图像描述](../Images/92262acb10b89fabee1d815f7132ac66.png)

单击**确定**两次，它应该看起来像这样

![在此处输入图像描述](../Images/d9684f103d103db3202da14cd01269e2.png)

单击**确定**并享受您的源代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-14T20:53:00.370

这通常意味着您无法访问正在调用其字节码的源代码。为了列出例外情况，您需要原始来源，不幸的是，原始来源通常在 jar 格式中不可用。

您的选择是通过使用正确的 Rev 更新您的 Android SDK 来更新 .jar 文件，并让它再次编译以解决问题。**

# php - 该语句将终止 SQL Server

> ID：14942860
> 
> 赞同：0
> 
> 时间：2013-02-18T18:22:23.640
> 
> 标签：php, sql-server, insert

我遇到了 SQL Server 查询问题。

我已经在 StackOverflow 上查看过这个错误。应该是其中一列的长度不够长，但在这种情况下，这是不可能的。

表格是这样的：

```
id numeric (10),
project varchar(10),
name varchar(50),
path varchar(500),
categorie(50) 
```

这是错误：

```
The statement has been terminated.[ 
INSERT INTO [2tlm_spec].[links] (project, name, path, categorie) VALUES('2tlm',      
'Project Definition','http://caevgl03.caecorp.cae.com/projects/2tlm/2tlm_proj_def.htm',   
'Project Info') ] 
```

谢谢你的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:43:16.617

在这种情况下，问题是`id numeric(18, 0),not NULL)`

如果你改变它可以`null`的地方，sql语句将被正确执行。

# ruby-on-rails - Fresh Rails 4 应用程序无法识别“rails”命令，坚持我使用“rails new”

> ID：14942863
> 
> 赞同：2
> 
> 时间：2013-02-18T18:22:38.860
> 
> 标签：ruby-on-rails, rvm, ruby-on-rails-4

我已经使用`rails new`来自 Rails 主分支的克隆的命令成功地创建了一个新应用程序。该应用程序看起来不错，绝对是 Rails 4。但是当我尝试运行任何其他`rails`命令时，提示符给了我：

```
Usage:
  rails new APP_PATH [options]

Options:
  -r, [--ruby=PATH]              # Path to the Ruby binary of your choice
  ... etc etc 
```

我试过`rails`,`bundle exec rails`和`bin/rails`, 都给出相同的提示。我创建一个新的 Rails 4 应用程序的步骤是：

1.  将 Rails 主分支克隆到我的本地计算机
2.  创建一个新的 rvm gemset，并使用它 (1.9.3)
3.  跑`rails/railties/bin/rails new myapp --edge -T --skip-index-html`
4.  `cd myapp`然后跑`bundle install`，`bundle update`只是为了确定
5.  运行任何`rails`命令

我究竟做错了什么？`rvm-prompt`建议我使用正确的 gemset。我确实注意到的一件事是，即使我从我的 Gemfile 中删除 jbuilder 并运行 a `bundle update`，它仍然出现在我的`gem list`. 我的 rvm 有问题吗？

`rails-v`输出是'Rails 4.0.0.beta'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:49:40.827

在这里查看我的第一条评论，它包含一个可能的修复：[https ://github.com/rails/rails/issues/9715](https://github.com/rails/rails/issues/9715)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T03:52:33.530

这看起来像一个错误，向 ruby​​ 报告 Rails 问题跟踪：[https ://github.com/rails/rails/issues](https://github.com/rails/rails/issues)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-28T04:26:15.460

当我的“bin”文件夹丢失时，我遇到了这个问题。

# sql - 如何将 yyyymm 转换为 Mon-yyyy？

> ID：14942866
> 
> 赞同：3
> 
> 时间：2013-02-18T18:23:06.023
> 
> 标签：sql, sql-server, date, format, sql-server-2012

我有一列 YearMonth，其值类似于 (201208)。我想将整列转换为 2012 年 8 月（星期一）格式。我做到了这一点。

```
select Convert(varchar(11),Cast(right(yearmonth,2)+'-'+left(yearmonth,4) as varchar (11)),0)
from report.TEST 
```

此代码将 201208 更改为 08-2012 但后来我无法将其更改为 2012 年 8 月。有什么建议么。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T18:41:32.307

实际上，对于 SQL Server 2012，有[格式化](http://msdn.microsoft.com/en-us/library/hh213505.aspx)函数：

```
SELECT FORMAT(CONVERT(DATE,yearmonth+'01'), N'MMM-yyyy', 'en-US') AS YearMonth; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T18:35:31.257

对于 MS-SQL

```
DECLARE @d1 INT; SET @d1 = 201208
DECLARE @d2 VARCHAR(6); SET @d2 = 201208

SELECT 'data type'='int'
, 'in'=@d1
, 'out'=CONVERT(VARCHAR(3), CAST(LEFT(@d1,6)+'01' AS DATE), 107) 
  + '-' + LEFT(@d1,4)

SELECT 'data type'='varchar'
, 'in'=@d2
, 'out'=CONVERT(VARCHAR(3), CAST(@d2+'01' AS DATE), 107) 
  + '-' +LEFT(@d2,4)

/* -- OUTPUT
data type   in      out
int         201208  Aug-2012

data type   in      out
varchar     201208  Aug-2012
*/ 
```

您还可以使用 DATENAME

```
SELECT 'data type' = 'int'
, 'in' = @d1
, 'out' = LEFT(DATENAME(month, CAST(LEFT(@d1,6)+'01' AS DATE)), 3) 
  + '-' + LEFT(@d1,4)

SELECT 'data type' = 'varchar'
, 'in' = @d2
, 'out' = LEFT(DATENAME(month, CAST(@d2+'01' AS DATE)), 3)
  + '-' + LEFT(@d2,4) 
```

或者使用不同的东西 :)

```
DECLARE @d1 INT; SET @d1 = 201208
DECLARE @d2 VARCHAR(6); SET @d2 = 201208

SELECT 'data type' = 'int'
, 'in' = @d1
, 'out' = STUFF(CONVERT(VARCHAR(20), CAST(LEFT(@d1,6)+'01' AS DATE), 107), 4, 5, '-')

SELECT 'data type' = 'varchar'
, 'in' = @d2
, 'out' = STUFF(CONVERT(VARCHAR(20), CAST(@d2+'01' AS DATE), 107), 4, 5, '-') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T18:40:53.210

您必须将 08-2012 转换为有效的日期时间，但这可以解决问题。

```
SELECT REPLACE(RIGHT(CONVERT(VARCHAR(11), GETDATE(), 106), 8), ' ', '-') AS [Mon-YYYY] 
```

来源：[http ://www.sql-server-helper.com/tips/date-formats.aspx](http://www.sql-server-helper.com/tips/date-formats.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T18:43:53.853

`select Substring(Convert(VarChar(11),Convert(DateTime,SomeMinthYear) + '01',113),4,8)`将是一种方式。例如，将日期转换为格式为 mon yyyy 的格式化字符串之一，然后将其切掉。

# .net - Windows Server 2012 上的 INetFwMgr 问题

> ID：14942876
> 
> 赞同：0
> 
> 时间：2013-02-18T18:23:38.333
> 
> 标签：.net, com, com-interop, windows-firewall, windows-server-2012

除了我的 Windows Server 2012 机器之外，使用以下代码适用于我测试过的所有操作系统：

```
public static Type FwMgrType = Type.GetTypeFromProgID("HNetCfg.FwMgr");

public static void Main()
{
  var fwMgr = (INetFwMgr) Activator.CreateInstance(FwMgrType);

  var ssh = fwMgr.LocalPolicy.CurrentProfile.GloballyOpenPorts.Item(22, 
      NET_FW_IP_PROTOCOL_.NET_FW_IP_PROTOCOL_TCP); // throws FileNotFoundException

  ssh.RemoteAddresses = "123.234.123.235";
} 
```

创建`ssh`变量的行正在抛出：

> 该系统找不到指定的文件。（来自 HRESULT 的异常：0x80070002）

我不明白它找不到什么文件。FirewallAPI.dll 存在于机器上。我什至使用 tlbimp.exe 在服务器上构建了互操作程序集。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T18:58:31.390

原来问题是找不到我所针对的防火墙规则。我所追求的特定规则是由我正在使用的服务器创建的。当我删除该规则并手动重新创建时，事情开始起作用了。

FileNotFoundException 让我相信操作系统的内部缺少某些东西。

# c# - 在区域内的视图中使用 MVC HtmlHelper 扩展方法

> ID：14942878
> 
> 赞同：4
> 
> 时间：2013-02-18T18:23:45.150
> 
> 标签：c#, asp.net-mvc-4, extension-methods, html-helper, asp.net-mvc-areas

我有一个 HtmlHelper 扩展方法，它从数据库缓存中提取本地化文本。代码是这样的。（MVCWeb 是我的 MVC 应用程序的命名空间。）

```
using System.Web;
using System.Web.Mvc;

namespace MVCWeb.PresentationExtensions
{
    public static class HtmlHelperExtensions
    {
        public static HtmlString GetText(this HtmlHelper Html, string keyword)
        {
            // code to get the text based on the keyword
        }
    }
} 
```

我`@using MVCWeb.PresentationExtensions`在我的视图中使用。在 ~/Views 文件夹中，调用扩展方法工作正常。

我最近添加了一个区域。我在 ~/Areas/AreaName/Views 文件夹中的 View 文件中使用扩展方法，并且代码正在编译并且它确实有效，但是我在 IDE 中遇到错误。

每次我`@Html.GetText("SomeKeyword")`从“区域”视图中使用时，错误列表中都会显示以下两个错误。

*   “System.Web.WebPages.Html.HtmlHelper”不包含“GetText”的定义，并且最佳扩展方法重载“MVCWeb.PresenationExtension.HtmlHelperExtensions.GetText(System.Web.Mvc.HtmlHelper, string)”有一些无效参数
*   实例参数：无法从“System.Web.WebPages.Html.HtmlHelper”转换为“System.Web.Mvc.HtmlHelper”

我发现在 ~/Views 中，@Html 有以下代码注释：

```
HtmlHelper<dynamic> WebViewPage<dynamic>.Html 
Gets or sets the System.Web.Mvc.HtmlHelper object that is used to render HTML elements. 
```

在 ~/Area/AreaName/Views 中，@Html 有以下注释：

```
HtmlHelper WebPage.Html
Gets the System.Web.WebPages.Html.HtmlHelper object that is associated with a page. 
```

作为参考，我在 ~/Views 和 ~/Areas/AreaName/Views 中的 Web.config 文件匹配。这是 .NET 4.5 上的 MVC4 应用程序，尚未从先前版本的 MVC 转换。

*   @Html 在常规视图与区域视图中被定义为不同类型是否正常？
*   如果 IDE 显示错误，为什么编译和运行正确？这是一个IDE错误吗？
*   如何阻止这些错误在 IDE 中显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:11:40.743

它运行良好，因为您的 web.config 包含正确的引用，并且在运行时正确匹配。

这只是区域的 ide 错误。要摆脱它，您可以使用 @include 将其指定为视图顶部的包含，这将为智能感知提供帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-28T13:41:30.803

我刚刚在尝试将 MvcSiteMap 帮助器添加到区域中的视图时遇到了同样的问题。

问题是 NuGet 包将其命名空间添加到根和视图级别的 Web.Config 文件中，但不足为奇的是它不够聪明，无法寻找埋在 Areas/area_name/Views 文件夹中的那些。解决方案只是添加命名空间，例如

```
<system.web.webPages.razor>
<host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=5.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
<pages pageBaseType="System.Web.Mvc.WebViewPage">
  <namespaces>
    <add namespace="System.Web.Mvc" />
    <add namespace="System.Web.Mvc.Ajax" />
    <add namespace="System.Web.Mvc.Html" />
    <add namespace="System.Web.Optimization" />
    <add namespace="System.Web.Routing" />
    <add namespace="FarmingtonCo.CacPortalWeb" />
    <add namespace="MvcSiteMapProvider.Web.Html" />
    <add namespace="MvcSiteMapProvider.Web.Html.Models" />
  </namespaces>
</pages> 
```

# opencv - 图像 3D 旋转 OpenCV

> ID：14942881
> 
> 赞同：2
> 
> 时间：2013-02-18T18:23:57.163
> 
> 标签：opencv, image-processing, rotation, homography

我需要在 x 和 y 轴上执行 2D 图像的 3D 旋转。我读到我必须在 OpenCV 上使用 Homographic 矩阵，但我不知道如何设置矩阵以执行常见的旋转角度。例如 x 轴上的 30 度或 y 轴上的 45°。

我读了这篇文章：[Translating and Rotating an Image in 3D using OpenCV](https://stackoverflow.com/questions/7019407/translating-and-rotating-an-image-in-3d-using-opencv)。我尝试了不同的 f 值，但它不起作用。

我想知道我必须更改矩阵的哪些参数以及如何更改（公式）。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T20:19:46.513

按照[同一篇文章](https://stackoverflow.com/questions/7019407/translating-and-rotating-an-image-in-3d-using-opencv)，但替换您的旋转矩阵。熟悉[Rorigues() 函数](http://docs.opencv.org/modules/calib3d/doc/camera_calibration_and_3d_reconstruction.html?highlight=rodrigues#void%20Rodrigues%28InputArray%20src,%20OutputArray%20dst,%20OutputArray%20jacobian%29)。您可以向它发送一个 1 x 3 的 x、y 和 z 旋转数组。它会给你一个 3 x 3 的旋转矩阵。将此矩阵作为 R 的前 3 列和 3 行插入（其余保持不变）。如果您不想进行任何翻译，请确保在该页面的代码中将变量 dist 设置为 0。

# java - java聊天小程序需要帮助

> ID：14942884
> 
> 赞同：0
> 
> 时间：2013-02-18T18:24:07.800
> 
> 标签：java, applet, chat

好吧，我需要帮助来运行我以前的老师给我的 Java 小程序。他们是两个..一个被称为服务器另一个被称为客户端。你在一台电脑上运行服务器，它要求你输入端口号。您在同一网络上的另一台 PC 上运行客户端小程序并输入相同的端口号。两者都已连接，现在您可以在这两台电脑之间发送消息。我的老师就是这样给我看的。现在我正在尝试这样做，但我收到错误“java.net.ConnectException：连接被拒绝：连接”

现在我知道它曾经很久以前就可以工作并且代码没有被修改。但我现在无法让它工作。也许我错过了什么？我把小程序的代码放在这里吗？因为我找不到附加某些东西的选项。

* * *

**ChatClient.java 代码：**

```
import java.awt.*;
import javax.swing.*;
import java.awt.event.*;
import java.net.*;
import java.io.*;
public class ChatClient implements ActionListener{
    static JTextArea ta = null;
    static JButton b1=null;
    static DataInputStream in = null;
    static DataOutputStream out = null;
    static Socket s = null;
    static ServerSocket ss = null;
    public ChatClient(){
        JFrame jf = new JFrame("Chat Client");
        jf.setSize(300,300);
        jf.setLocation(150,150);
        ta = new JTextArea();
        b1 = new JButton("Send");

        jf.add("South",b1);
        jf.add("North",ta);

        b1.addActionListener(this);
        jf.setVisible(true);        
    }
    public void actionPerformed(ActionEvent evt){
        if(evt.getSource()==b1){
            try{
                out.writeUTF(ta.getText());
            }
            catch(Exception e){
                System.out.println(e);
            }
        }
    }
    public static void main(String[]args){
        new ChatClient();
        try{
            int port = Integer.parseInt(JOptionPane.showInputDialog("Enter port number"));
            s = new Socket("127.0.0.1",port);
            System.out.println("client is connected");
            in = new DataInputStream(s.getInputStream());
            out = new DataOutputStream(s.getOutputStream());
            while(true){
                ta.setText(in.readUTF());
            }   
        }
        catch(Exception e){
            System.out.println(e);
        }
    }
} 
```

* * *

**ChatServer.java 代码：**

```
import java.awt.*;
import javax.swing.*;
import java.awt.event.*;
import java.net.*;
import java.io.*;
public class ChatServer implements ActionListener{
    static JTextArea ta = null;
    static JButton b1=null;
    static DataInputStream in = null;
    static DataOutputStream out = null;
    static Socket s = null;
    static ServerSocket ss = null;
    public ChatServer(){
        JFrame jf = new JFrame("Chat Server");
        jf.setSize(300,300);
        jf.setLocation(50,50);
        ta = new JTextArea();
        b1 = new JButton("Send");

        jf.add("South",b1);
        jf.add("North",ta);

        b1.addActionListener(this);
        jf.setVisible(true);        
    }
    public void actionPerformed(ActionEvent evt){
        if(evt.getSource()==b1){
            try{
                out.writeUTF(ta.getText());
            }
            catch(Exception e){
                System.out.println(e);
            }
        }
    }
    public static void main(String[]args){
        new ChatServer();
        try{
            int port = Integer.parseInt(JOptionPane.showInputDialog("Enter port number"));
            ss = new ServerSocket(port);
            System.out.println("Server start and wait...........");
            s = ss.accept();
            System.out.println("client is connected");
            in = new DataInputStream(s.getInputStream());
            out = new DataOutputStream(s.getOutputStream());
            while(true){
                ta.setText(in.readUTF());
            }   
        }
        catch(Exception e){
            System.out.println(e);
        }
    }
} 
```

* * *

我真的需要这个工作，我都很困惑。请指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-20T15:50:14.977

你问的问题看起来有几年了。你问了另一个关于发送按钮的问题。您可以删除发送按钮并添加一个 TextField。TextField 有一个 actionListener。

# bash - 在while循环中存储bash关联数组的值

> ID：14942890
> 
> 赞同：1
> 
> 时间：2013-02-18T18:24:26.270
> 
> 标签：bash, associative-array

我正在尝试编写一个脚本来扫描蓝牙设备并跟踪设备的名称、mac 和第一次和最后一次看到的时间。我遇到了在扫描之间将数据存储到关联数组中的问题。

在第二次扫描中，我原以为会填充数组，但事实并非如此。所以我无法知道我第一次看到设备的时间。我很确定问题是数据被存储到数组的本地版本而不是全局版本中，但我不确定如何修复它。

这是我第一次尝试超越非常基本的 shell 脚本，因此对脚本任何部分的任何建议都将不胜感激。当我遇到问题时，我一直在谷歌搜索，并且毫无疑问我做的事情不是 100% 正确或有效的。

```
 #!/bin/bash

    declare -A bt_name
    declare -A last_seen
    declare -A first_seen

    while [ 1 ] ; do
            echo ""> ../data/bt_host.log
            date=$(date +%s)
            hcitool -i $1 scan| grep -v Scanning | sed "s/\t/$date, /" | sed "s/\t/, /" | while IFS="," read -r time mac name
            do
                    #debug to see if array values are there from last loop
                    echo "PREFILL-mac: $mac first: ${first_seen[$mac]} name: ${bt_name[$mac]} last: ${last_seen[$mac]}"

                    #populate arrays
                    bt_name["$mac"]="$name"
                    last_seen["$mac"]="$time"

                    #test if have seen this device before or not
                    if [[ ! ${first_seen[$mac]} ]]; then
                            first_seen["$mac"]="$time"
                            echo "Setting first"
                    fi

                    #resulting array values
                    echo "POSTFILL-mac: $mac first: ${first_seen[$mac]} name: ${bt_name[$mac]} last: ${last_seen[$mac]}"

            done
            sleep 10
    done 
```

谢谢您的帮助。

更新：发现问题（在我问后很粗糙）。这是我的 while 循环中的进程替换问题。

我把它改成

```
    while IFS="," 读取 -r 时间 mac 名称
    做
            #echo "$mac, $name, $time"
            echo "PRE-mac: $mac first: ${first_seen[$mac]} name: ${bt_name[$mac]} last: ${last_seen[$mac]}"
            bt_name["$mac"]="$name"
            last_seen["$mac"]="$time"
            如果 [[ ！${first_seen[$mac]} ]]; 然后
                    first_seen["$mac"]="$time"
                    echo "先设置"
            菲

            echo "POST-mac: $mac first: ${first_seen[$mac]} name: ${bt_name[$mac]} last: ${last_seen[$mac]}"
    完毕
```

这解决了问题。

如果人们有任何其他改进/建议，他们将不胜感激。

很抱歉在提出问题的早期就成为了一次搜索。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T17:49:12.880

在 bash 4.2 中，您可以要求在当前 shell 中运行最后一个命令：`shopt -s lastpipe`

# javascript - 无法从子视图引用 JSF 模板中的 DOM 元素

> ID：14942893
> 
> 赞同：0
> 
> 时间：2013-02-18T18:24:47.757
> 
> 标签：javascript, html, jsf-2, xhtml, facelets

我正在使用 JSF 模板和 Primefaces。我似乎无法从子视图中引用主页中的特定 div。

模板页面**template.xhtml：**

```
 <!DOCTYPE html>
 <html lang="en"
     xmlns="http://www.w3.org/1999/xhtml"
     xmlns:ui="http://java.sun.com/jsf/facelets"
     xmlns:h="http://java.sun.com/jsf/html"
     xmlns:f="http://java.sun.com/jsf/core"
     xmlns:p="http://primefaces.org/ui"
     xmlns:comp="http://java.sun.com/jsf/composite/components"
     xmlns:pe="http://primefaces.org/ui/extensions">
  <h:head>
     <title><ui:insert name="title">Default title</ui:insert></title>
  </h:head>
  <h:body>
     <div id="header">Header</div>        
     <div id="content"><ui:insert name="content">Default content</ui:insert></div>
     <div id="footer">Footer</div>
  </h:body>
 </html> 
```

客户页面**page.xhtml**

```
<ui:composition template="template.xhtml"
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:p="http://primefaces.org/ui"
        xmlns:comp="http://java.sun.com/jsf/composite/components"
        xmlns:pe="http://primefaces.org/ui/extensions">

    <ui:define name="content">
         <script type="text/javascript">
              $(window).load(function() {
                       alert($('header').html());
               });
         </script>

        <h1>New content here</h1>
        <p>Stuff</p>
    </ui:define>
</ui:composition> 
```

警报显示“空”。我尝试将脚本放在子视图内的不同位置，但没有运气。知道为什么它不可见吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T18:36:49.163

我认为您正在尝试在其 ID 中选择带有“标题”的元素，因此您需要使用它：

```
$('#header') 
```

如果您想选择`<header>`元素，那么您将使用`$('header')`它来选择它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T18:57:03.000

您的原始代码有一个单独的标题部分，然后您还将标题部分作为 div 包含在您的正文中。标头 html 标记已删除，ui 标记已移至您的 div。

```
<!DOCTYPE html>
 <html lang="en"
     xmlns="http://www.w3.org/1999/xhtml"
     xmlns:ui="http://java.sun.com/jsf/facelets"
     xmlns:h="http://java.sun.com/jsf/html"
     xmlns:f="http://java.sun.com/jsf/core"
     xmlns:p="http://primefaces.org/ui"
     xmlns:comp="http://java.sun.com/jsf/composite/components"
     xmlns:pe="http://primefaces.org/ui/extensions">
  <h:body>
     <div id="header"><ui:insert name="title">Default Title</ui:insert></div>        
     <div id="content"><ui:insert name="content">Default Content</ui:insert></div>
     <div id="footer">Footer</div>
  </h:body>
 </html> 
```

# javascript - 隐藏 div 的高度不会随砌体内容扩展

> ID：14942897
> 
> 赞同：0
> 
> 时间：2013-02-18T18:25:08.227
> 
> 标签：javascript, jquery, jquery-masonry

我有一个脚本可以切换 div 的可见性，在 div 内部是使用 masonry 插件加载的内容。我遇到的问题是砖石 div（以及因此两个包装器 div）在加载砖石内容时不会在高度上扩展 - 它会将砖石项目挤压在一起。

这是我的代码：

```
<html>
    <head>
        <title>view?</title>
        <script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js'></script>
        <script type='text/javascript' src="http://masonry.desandro.com/jquery.masonry.min.js"></script>

        <style type="text/css">
            #step_wrapper{
                width:960px;
                margin:0px auto;
                /*float:left;*/
            }
            .step_num{
                float:left;
                width:50px;
                background-color:#0099ff;
            }
            .step{
                float:left;
                width:910px;
                background-color:#ff0000;
                padding-bottom:20px;
                margin-bottom:20px;
            }
            .step h2{
                padding:0px;
                margin:0px;
            }
            .media{
                background-color:#59A20E;
                width:100%;
                text-align:center;
                cursor:hand;
                float:left;
            }
            #content-step-1{

            }
            .content{
                float:left;
                min-width:785px;
                margin-left:40px;
                background-color:#0066ff;
                padding-left:15px;
                display:none;
            }
            .item {
              width: 165px;
              float: left;
              padding:5px;
              background-color:#FF0;
              margin-top:10px;
            }
        </style>
        <script>
        $(function(){
            <!-- masonry plugin -->
            var $container = $('#content-step-1');
            $container.imagesLoaded(function(){
              $container.masonry({
                itemSelector : '.item',
                columnWidth : 165
              });
            });
            $($container).masonry({
                // options
                itemSelector : '.item',
                columnWidth : 165,
                gutterWidth : 35
            });
            <!-- masonry plugin -->

            <!-- needs to be auto generated -->
            $("#step-1").click(function () {
                $("#content-step-1").toggle("fast");
            });
            <!-- needs to be auto generated -->
        });
        </script>
    </head>
    <body>
        <div id="step_wrapper">
            <div class="step_num">1)</div>
            <div class="step">
                <h2>STEP ONE SON</h2>
                <p>Description here bro</p>
                <div id="step-1" class="media">expand</div>
                <div id="content-step-1" class="content">
                    <div class="item">asjdlajskdla</div>
                    <div class="item"><img src="http://farm5.static.flickr.com/4153/5013039741_d860fb640b.jpg" width='165' /></div>
                    <div class="item">baksdkjasdasdsdadasdasda</div> 
                    <div class="item">asjdlajskdla</div>
                    <div class="item">baksdkjjsdksd</div> 
                    <div class="item">baksdkjasdasdsdadasdasda</div> 
                    <div class="item">asjdlajskdla</div>
                    <div class="item">baksdkjjsdksd</div> 
                </div>
            </div>

        </div>
    </body>
</html> 
```

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-10T13:35:08.020

几天前我遇到了微笑问题。你需要在这里做什么，当你点击打开隐藏的 div 而不是`reload`砌体视图时。通过使用下面。

```
$("#step-1").click(function () {
     $("#content-step-1").toggle("fast");
     $container.masonry('reload');
}); 
```

# php - 获取数组值

> ID：14942903
> 
> 赞同：-3
> 
> 时间：2013-02-18T18:25:14.517
> 
> 标签：php, arrays, session

转储会话后，我得到以下结果。谁能告诉我如何获得数组（2）中的值“product_id”和“info”；

```
array(3) { 
    ["DYN_outskin"]=> string(3) "ten" 
    ["DYN_inskin"]=> string(3) "one" 
    ["cart"]=> array(1) { 
        ["2000_facebook"]=> array(2) { 
            ["product_id"]=> string(13) "2000_facebook" 
            ["info"]=> string(7) "nur1952"
        } 
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T18:28:59.473

试试这样：

```
$array['cart']['2000_facebook']['product_id'];
$array['cart']['2000_facebook']['info']; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T18:29:52.410

```
$_SESSION["cart"]["2000_facebook"]["product_id"] ;

$_SESSION["cart"]["2000_facebook"]["info"] ; 
```

遍历购物车：

```
foreach ($_SESSION["cart"] as $product){
  echo "Product info : {$product['info']} | Product ID : {$product['product_id']} <br/>" ;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T18:31:47.707

以清楚地显示数组结构的方式显示数组始终是一个好习惯，如下所示：

```
array(3) { 
  ["DYN_outskin"]=> string(3) "ten" 
  ["DYN_inskin"]=> string(3) "one" 
  ["cart"]=> array(1) { 
    ["2000_facebook"]=> array(2) { 
      ["product_id"]=> string(13) "2000_facebook" 
      ["info"]=> string(7) "nur1952" 
    } 
  } 
} 
```

现在，您可以清楚地了解如何访问所需的元素：

```
$array["cart"]["2000_facebook"]["product_id"]
$array["cart"]["2000_facebook"]["info"] 
```

# jquery - 在 img 鼠标悬停时显示 div (jquery)

> ID：14942907
> 
> 赞同：0
> 
> 时间：2013-02-18T18:25:30.547
> 
> 标签：jquery, css, wordpress, hover, mouseover

因此，我正在研究将显示文本 div 的图像的鼠标悬停效果。我已经设置好了css，但是我在使用Jquery 时遇到了问题。我在 wordpress 主题中使用这个内联，我想知道这是否是我的问题。

```
<script type="text/javascript" src="scripts/jquery.js"></script>
<script type="text/javascript">
    $(".imgHover").hover(function() {
        $(this).children("img").fadeTo(200, 0.25)
        .end().children(".hover").show();
    }, function() {
        $(this).children("img").fadeTo(200, 1)
        .end().children(".hover").hide();
    });
</script>

<div class="imgHover">
    <div class="hover">Test Content for the hover</div>
    <img src="http://www.google.com/intl/en_ALL/images/logo.gif" alt="" />
</div> 
```

谁能帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T18:30:36.300

将您的代码包装在[`$(document).ready`](http://api.jquery.com/ready/)：

```
$(document).ready(function() {
    $(".imgHover").hover(function() {
        $(this).children("img").fadeTo(200, 0.25).end()
            .children(".hover").show();
    }, function() {
        $(this).children("img").fadeTo(200, 1).end()
            .children(".hover").hide();
    });
}); 
```

或使用[事件委托](http://api.jquery.com/on/#direct-and-delegated-events)：

```
$(document).on("mouseover",".imgHover",function() {
    $(this).children("img").fadeTo(200, 0.25).end()
            .children(".hover").show();
}).on("mouseleave",".imgHover", function() {
    $(this).children("img").fadeTo(200, 1).end()
            .children(".hover").hide();
}); 
```

# jasper-reports - 在 iReports 的 Web 框架类别中使用“排序”组件（用于 HTML Jasper 报告）

> ID：14942910
> 
> 赞同：1
> 
> 时间：2013-02-18T18:25:43.810
> 
> 标签：jasper-reports, ireport

我需要创建一个表格，该表格将作为 HTML 代码插入网页中。

我已经创建了一个表格，但我找不到任何信息/文档，说明我应该如何通过单击列标题对 ASC 或 DESC 进行排序。

我已经能够在调色板（Web 框架类别）中找到 SORT 组件，但我需要有人解释它必须如何使用，我还尝试通过编辑数据源的查询来添加 SORT BY 选项。我得到的只是正确排序的报告，但标题中的 ▲ 符号只是一个字符（单击它时，不执行任何操作）。

我需要做的是能够动态地对某些列进行排序，我将不胜感激可以给我的任何帮助。

# ios - 如何使用 NSPredicate 在 NSDate 中按天分组 - 需要创建多个 UITableView 部分

> ID：14942912
> 
> 赞同：16
> 
> 时间：2013-02-18T18:25:47.340
> 
> 标签：ios, sql, uitableview, core-data

### 也可以看看

> [使用 FetchedResultsController 按日期对核心数据进行排序](https://stackoverflow.com/questions/11424485/core-data-sort-by-date-with-fetchedresultscontroller-into-sections)

有没有办法按日期对 CoreData 实体中的对象进行分组，并使用它们在 UITableView 控件上创建多个部分？

本质上，我需要类似于以下伪 SQL 的东西，其中 my_group_criteria() 按天对所有测试进行分组：

```
SELECT * FROM tests GROUP BY my_group_criteria(date) 
```

例如，查询会将以下行分为 3 个单独的部分：

```
[test1 | 2013-03-18 15.30.22]
[test2 | 2013-03-18 14.30.22]
[test3 | 2013-03-18 13.30.22]

[test4 | 2013-03-17 18.30.22]
[test5 | 2013-03-17 19.30.22]

[test6 | 2013-03-15 20.30.22] 
```

正如[2](https://stackoverflow.com/questions/6839556/nspredicate-something-equivalent-of-sqls-group-by)中已经回答的那样， NSPredicate 不适用于对实体进行分组，因此这可能不是要走的路。

鉴于此，如何根据类似于 SQL GROUP BY 的某些标准在 UITableView 中创建多个部分？

如果可能的话，我想避免直接访问 SQL-lite 数据库。

相关问题1： [NSPredicate：按NSDate属性的日期过滤对象](https://stackoverflow.com/questions/1965331/nspredicate-filtering-objects-by-day-of-nsdate-property%20NSPredicate:%20filtering%20objects%20by%20day%20of%20NSDate%20property)

相关问题 2： [NSPredicate 相当于 SQL 的 GROUP BY](https://stackoverflow.com/questions/6839556/nspredicate-something-equivalent-of-sqls-group-by)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-19T12:36:49.413

您可以根据需要修改 Apple Developer Library 中的[DateSectionTitles](http://developer.apple.com/library/ios/samplecode/DateSectionTitles/Introduction/Intro.html)示例项目。

首先，您必须修改瞬态`sectionIdentifier`属性的访问器函数以创建基于年+月+日（而不是仅年+月）的节标识符：

```
- (NSString *)sectionIdentifier {

    // Create and cache the section identifier on demand.

    [self willAccessValueForKey:@"sectionIdentifier"];
    NSString *tmp = [self primitiveSectionIdentifier];
    [self didAccessValueForKey:@"sectionIdentifier"];

    if (!tmp) {
        /*
         Sections are organized by month and year. Create the section identifier
         as a string representing the number (year * 10000 + month * 100 + day);
         this way they will be correctly ordered chronologically regardless of
         the actual name of the month.
         */
        NSCalendar *calendar = [NSCalendar currentCalendar];

        NSDateComponents *components = [calendar components:(NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit)
                               fromDate:[self timeStamp]];
        tmp = [NSString stringWithFormat:@"%d", [components year] * 10000 + [components month] * 100  + [components day]];
        [self setPrimitiveSectionIdentifier:tmp];
    }
    return tmp;
} 
```

其次，`titleForHeaderInSection`必须更改委托方法，但思路相同：从节标识符中提取年、月和日，并从中创建标题标题字符串：

```
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {

    id <NSFetchedResultsSectionInfo> theSection = [[fetchedResultsController sections] objectAtIndex:section];

    NSInteger numericSection = [[theSection name] integerValue];
    NSInteger year = numericSection / 10000;
    NSInteger month = (numericSection / 100) % 100;
    NSInteger day = numericSection % 100;

    // Create header title YYYY-MM-DD (as an example):
    NSString *titleString = [NSString stringWithFormat:@"%d-%d-%d", year, month, day];
    return titleString;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T18:35:32.873

假设这个想法是将对象数组分组到对象数组中，我将采取的方法是，首先找到日期的可能值（或任何您想要分组的值），然后实际对其进行排序。

```
NSArray *values = ...;
NSArray *sorting = [values valueForKey:@"@distinctUnionOfObject.propertyToGroupBy"];
NSUInteger sectionCount = [sorting count];
NSMutableArray *sections = [NSMutableArray arrayWithCapacity:sectionCount];
for (int i = 0; i < sectionCount; i++)
    [sections addObject:[NSMutableArray array]];

[values enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
    // Figure out the section for this object
    NSUInteger section = [sorting indexOfObject:obj.propertyToGroupBy];
    [[sections objectAtIndex:section] addObject:obj];
}];

// sections will contain as many sections as there were unique values
// each of those values is an array containing values that matched the criteria 
```

这可能会被优化，但在我看来，这似乎符合要求。

编辑：再次通过问题后，propertyToGroupBy 必须规范化该值，即删除日期的时间分量，因为分组是由**唯一**值完成的（即比较基于 isEqual:)

# java - 如何将 java 打印行移动到控制台窗口的顶部？

> ID：14942915
> 
> 赞同：0
> 
> 时间：2013-02-18T18:26:01.613
> 
> 标签：java, linux, console

我正在制作java应用程序。在控制台上运行。我目前正在实现一个类似于`clear`Linux 的命令。

我找到了一种通过这个[问题清除控制台的方法](https://stackoverflow.com/questions/4888362/commands-in-java-to-clear-the-screen)

我正在使用这个[答案](https://stackoverflow.com/a/4888438)

然而，问题是当前行没有向上移动成为顶行。发生的情况是当前行上方的每一行都被清除，但当前保持在原处。

如何将当前行移动到第一行 --- 位于顶部？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-06T03:56:51.367

System.out.print("\f"); 打印换页，清除屏幕并将光标移动到顶部。

# iframe - 播放另一个时暂停 YouTube iframe 嵌入

> ID：14942916
> 
> 赞同：9
> 
> 时间：2013-02-18T18:26:06.990
> 
> 标签：iframe, youtube, youtube-api, youtube-javascript-api

我在一个页面上嵌入了多个 YouTube iFrame。如果其中一部电影已经在播放，然后用户决定开始播放另一部电影，是否可以停止播放第一部电影以便一次只播放一部电影？

我查看了“iframe 嵌入的 YouTube 播放器 API 参考” [https://developers.google.com/youtube/iframe_api_reference](https://developers.google.com/youtube/iframe_api_reference)但老实说我就是不明白。我的开发人员技能非常有限......显然。

可怜我知道，但这就是我目前所拥有的（只是 iFrames）...... [http://jsfiddle.net/YGMUJ/](http://jsfiddle.net/YGMUJ/)

```
<iframe width="520" height="293" src="http://www.youtube.com/v/zXV8GMSc5Vg?version=3&enablejsapi=1" frameborder="0" allowfullscreen></iframe>
<iframe width="520" height="293" src="http://www.youtube.com/v/LTy0TzA_4DQ?version=3&enablejsapi=1" frameborder="0" allowfullscreen></iframe> 
```

我认为我需要做的就是在视频 URL 的末尾添加“&enablejsapi=1”。

任何帮助将非常感激。
先感谢您。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-04-29T16:15:07.373

这是[@Matt Koskela](https://stackoverflow.com/users/1174628/matt-koskela)版本的高级版本。它不需要您通过 JavaScript 创建视频。例如，如果视频是在 PHP 端生成的（想想 Wordpress），它就可以工作。

JsFiddle[演示在这里](http://jsfiddle.net/B6ZyJ/3/)。

```
<script>
    var tag = document.createElement('script');
    tag.src = "//www.youtube.com/iframe_api";
    var firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

    function onYouTubeIframeAPIReady() {
        var $ = jQuery;
        var players = [];
        $('iframe').filter(function(){return this.src.indexOf('http://www.youtube.com/') == 0}).each( function (k, v) {
            if (!this.id) { this.id='embeddedvideoiframe' + k }
            players.push(new YT.Player(this.id, {
                events: {
                    'onStateChange': function(event) {
                        if (event.data == YT.PlayerState.PLAYING) {
                            $.each(players, function(k, v) {
                                if (this.getIframe().id != event.target.getIframe().id) {
                                    this.pauseVideo();
                                }
                            });
                        }
                    }
                }
            }))
        });
    }
</script>

One: 
<iframe frameborder="0" allowfullscreen="1" title="YouTube video player" width="160" height="100" src="http://www.youtube.com/embed/zXV8GMSc5Vg?enablejsapi=1&amp;origin=http%3A%2F%2Ffiddle.jshell.net"></iframe>
<br/>
Two:
<iframe frameborder="0" allowfullscreen="1" title="YouTube video player" width="160" height="100" src="http://www.youtube.com/embed/LTy0TzA_4DQ?enablejsapi=1&amp;origin=http%3A%2F%2Ffiddle.jshell.net"></iframe> 
```

**编辑：**如果您的视频以缩略图开头，请查看[下面 Jennie Sadler 的微调版本。](https://stackoverflow.com/a/38405859/638471)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-19T07:43:18.420

您实际上想要使用 iFrame Player API，而不是使用 iframe。根据您实际想要嵌入的视频数量，您可能希望让这个 javascript 更加动态，但是这个工作示例应该足以让您开始。

基本上我在这里做的是初始化两个播放器，并在播放器状态更改为播放时暂停相反的视频。

您可以在[http://jsfiddle.net/mattkoskela/Whxjx/使用以下代码](http://jsfiddle.net/mattkoskela/Whxjx/)

```
<script>
var tag = document.createElement('script');
tag.src = "//www.youtube.com/iframe_api";
var firstScriptTag = document.getElementsByTagName('script')[0];
firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

var player;
function onYouTubeIframeAPIReady() {
    player1 = new YT.Player('player1', {
        height: '293',
        width: '520',
        videoId: 'zXV8GMSc5Vg',
        events: {
            'onStateChange': onPlayerStateChange
        }
    });
    player2 = new YT.Player('player2', {
        height: '293',
        width: '520',
        videoId: 'LTy0TzA_4DQ',
        events: {
            'onStateChange': onPlayerStateChange
        }
    });
}

function onPlayerStateChange(event) {
    if (event.data == YT.PlayerState.PLAYING) {
        stopVideo(event.target.a.id);
    }
}

function stopVideo(player_id) {
    if (player_id == "player1") {
        player2.stopVideo();
    } else if (player_id == "player2") {
        player1.stopVideo();
    }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-07-15T22:31:34.163

[vbence](https://stackoverflow.com/users/638471/vbence)的解决方案非常接近，但我建议进行一个编辑。您应该在暂停之前检查其他播放器是否正在播放，否则，播放页面上的第一个嵌入将播放/暂停页面上的所有其他嵌入，删除预览缩略图并产生令人吃惊的副作用。

```
<script>
var tag = document.createElement('script');
tag.src = "//www.youtube.com/iframe_api";
var firstScriptTag = document.getElementsByTagName('script')[0];
firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

function onYouTubeIframeAPIReady() {
    var $ = jQuery;
    var players = [];
    $('iframe').filter(function(){return this.src.indexOf('http://www.youtube.com/') == 0}).each( function (k, v) {
        if (!this.id) { this.id='embeddedvideoiframe' + k }
        players.push(new YT.Player(this.id, {
            events: {
                'onStateChange': function(event) {
                    if (event.data == YT.PlayerState.PLAYING) {
                        $.each(players, function(k, v) {
                            if (this.getPlayerState() == YT.PlayerState.PLAYING # checks for only players that are playing
                                  && this.getIframe().id != event.target.getIframe().id) { 
                                this.pauseVideo();
                            }
                        });
                    }
                }
            }
        }))
    });
}
</script>

One: 
<iframe frameborder="0" allowfullscreen="1" title="YouTube video player" width="160" height="100" src="http://www.youtube.com/embed/zXV8GMSc5Vg?enablejsapi=1&amp;origin=http%3A%2F%2Ffiddle.jshell.net"></iframe>
<br/>
Two:
<iframe frameborder="0" allowfullscreen="1" title="YouTube video player" width="160" height="100" src="http://www.youtube.com/embed/LTy0TzA_4DQ?enablejsapi=1&amp;origin=http%3A%2F%2Ffiddle.jshell.net"></iframe> 
```

# r - 表数组

> ID：14942917
> 
> 赞同：1
> 
> 时间：2013-02-18T18:26:08.000
> 
> 标签：r

我想将一些 R 表写入一个 excel 文件。所以我有跟随？

```
 data <- list.files(path=getwd())
 n <- length(list)
 for (i in 1:n) 
     {
      data1 <- read.csv(data[i])
      outline <- data1[,2]
      outline <- as.table(outline)
      print(outline)   # this prints all n tables
      write.csv(outline, 'Test.csv') # this only writes the last table
     } 
```

但我只将最后一个文件写入 csv 文件。不是所有的人。我将如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T18:32:48.950

你的写作`test.csv`每次。所以你一直在写文件。您需要更改每个步骤的文件名以保留不同的文件。

尝试：

```
data <- list.files(path=getwd())
 n <- length(list)
 for (i in 1:n) 
     {
      data1 <- read.csv(data[i])
      outline <- data1[,2]
      outline <- as.table(outline)
      print(outline)   # this prints all n tables
      name <- paste0(i,"X.csv")
      write.csv(outline, name)
     } 
```

查看您的代码也许您想要这个：

```
data <- list.files(path=getwd())
     n <- length(list)
     for (i in 1:n) 
         {
          data1 <- read.csv(data[i])
          outline <- data1[,2]
          outline <- as.data.frame(table(outline))
          print(outline)   # this prints all n tables
          name <- paste0(i,"X.csv")
          write.csv(outline, name)
     } 
```

# ksh - ksh 脚本中的模式匹配

> ID：14942920
> 
> 赞同：0
> 
> 时间：2013-02-18T18:26:26.277
> 
> 标签：ksh

我 在变量中有一个**URL 参数，例如**

`a=44&search=My World`

在这里我想做一个模式匹配，比如

```
if [ $a =~ "search" ] ;
then
   value=1
else
   value=0

fi 
```

但它不适用于 KSH 脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T09:47:10.177

您需要`[[` ksh 正则表达式，而不是 Bourne shell `[`。尽管在这种情况下似乎不值得使用 RE。

所以：

```
if [[ $a =~ "search" ]]
then 
    value=1 
else 
    value=0
fi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-21T15:04:17.830

```
found=`echo $a | grep search`
if [ -z $found ]; then
  value=0
else
  value=1
fi 
```

# javascript - 隐藏元素后滚动到顶部不起作用（jQuery）

> ID：14942923
> 
> 赞同：1
> 
> 时间：2013-02-18T18:26:31.727
> 
> 标签：javascript, jquery, html, css, animation

目前，我的菜单有一个功能，可以滚动到页面上的不同 div，作为一种导航形式。目前我正在使用以下方法。

滚动到投资组合

```
$("html, body").animate({ scrollTop: $('#portfolio').offset().top }, 600); 
```

由于我正在动态构建整个页面，因此当有人单击链接时，我使用 .hide() 隐藏主页元素并生成其他内容。

```
function hideElements() {

$("#something").hide();

} 
```

在内容页面上，如果他们想返回投资组合，他们会再次单击投资组合链接。我正在使用以下方法将它们“滚动”到重新显示的元素。

```
$("#nav").click(){
    unhideMainElements();
    $("html, body").animate({ scrollTop: $('#portfolio').offset().top }, 1200);
    $("#container").fadeIn(300);
} 
```

**问题是，淡入淡出会起作用，但不会滚动到元素。我认为它与 .hide() 元素和 .show() 元素有关，但我不知道为什么。我很欣赏任何见解。谢谢！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:37:52.793

您可以尝试使用该[`visibility`](http://www.w3schools.com/cssref/pr_class_visibility.asp)属性而不是`display`：

```
$('#something').css({'visibility':'hidden'}); //or visible 
```

该元素应保持其原始尺寸而不显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T19:29:15.527

**解决**

动画和这两个函数`fadeIn`被放入`.show()`回调中 `unhideMainElements();`。这样，动画只会在所有`.show()`完成时触发。

我想这是一个时间问题。

谢谢你的帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T21:35:14.857

而不是`hide()`and `show()`，你为什么不尝试`.animate({'opacity':0})`隐藏然后`.animate({'opacity':1})`显示。

# webkit - Opera 的 DragonFly 和 Extensions 还会在 Webkit 世界中存在吗？

> ID：14942925
> 
> 赞同：4
> 
> 时间：2013-02-18T18:26:34.697
> 
> 标签：webkit, opera, blink, opera-dragonfly

[我刚刚看到 Opera 将停止使用 Presto](http://www.opera.com/press/releases/2013/02/13/)并切换到 WebKit，那么 DragonFly 是否仍然存在，或者这将被 Chrome Inspector 取代？

那么扩展呢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-30T21:26:26.603

是的，Opera Dragonfly 仍然存在。当前的 Opera 15 测试版包括 Web Inspector，但是，Opera 正在将 Opera Dragonfly 移植到 Blink。准备好后将包括在内。

注：在转公司之前，我是 Opera Dragonfly 的产品经理。

Opera Extensions 对基于 Blink 的 Opera 使用不同的格式。它使用 Chrome 扩展模型的子集。有一个工具可以转换现有的扩展和文档：[http ://dev.opera.com/extension-docs/](http://dev.opera.com/extension-docs/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T08:23:53.207

Opera 中不会有使用 WebKit 的 Dragonfly（Blink）： [https ://twitter.com/runeh/status/301616059729969152](https://twitter.com/runeh/status/301616059729969152)

# java - 无法从 Appengine 下载代码 - Java

> ID：14942929
> 
> 赞同：2
> 
> 时间：2013-02-18T18:26:55.093
> 
> 标签：java, google-app-engine, jakarta-ee

以下是我尝试执行以从 AppEngine 下载源代码的代码：

```
/Users/sridhar/Desktop/backupdata/appengine-java-sdk-1.7.4/bin/appcfg.sh download_app -A maharasims2 -V 23 download_app . 
```

我收到错误格式错误：

```
Bad argument: Expected download directory as an argument after download_app.
AppCfg [options] -A app_id [ -V version ] download_app <out-dir>

Download a previously-uploaded app to the specified directory.  The app
ID is specified by the "-A" option.  The optional version is specified
by the "-V" option. 
```

谁能帮我吗？

* * *

我尝试了以下方法，它奏效了。

**第一步：** jdk/bin/appcfg.sh -A <apppid> -V <版本> download_app <目录>

**例子 ：**

/Users/Desktop/appengine-java-sdk-1.7.4/bin/appcfg.sh -A testapp -V 23 download_app ~/Desktop/backupdata/downloads/

**第 2 步： http:** [//architecturalatrocities.com/post/19073788679/fixing-the-trustanchors-problem-when-running-openjdk-7](http://architecturalatrocities.com/post/19073788679/fixing-the-trustanchors-problem-when-running-openjdk-7)

**注意：** 如果遇到以下错误，请使用第 2 步：

“java.security.InvalidAlgorithmParameterException：trustAnchors 参数必须非空”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T19:22:34.677

选项应该*在*命令之前：

```
appcfg.sh -A maharasims2 -V 23 download_app . 
```

# c - 释放 C 中函数使用的内存时出错

> ID：14942932
> 
> 赞同：0
> 
> 时间：2013-02-18T18:27:04.487
> 
> 标签：c, pointers, memory-management

我有一个主要的：

```
unsigned char *f_hmac = calculate_hmac(output_file_path, mac_key, keyLength);
fwrite(f_hmac, 1, 64, fpout);
free(f_hmac); 
```

和一个函数（原型是：）`unsigned char *calculate_hmac(const char *filename, const unsigned char *key, size_t keylen)`，它做：

```
unsigned char *hmac = malloc(64);
hmac = gcry_md_read(hd, GCRY_MD_SHA512);
return hmac; 
```

我的问题是，当`free(f_hmac)`我得到主要内容时：

```
*** glibc detected *** ./polcrypt: free(): invalid pointer: 0x00000000023a8ad8 ***
======= Backtrace: =========
/lib/x86_64-linux-gnu/libc.so.6(+0x7eb96)[0x7f0fd662db96]
./polcrypt[0x40220f]
./polcrypt[0x401851]
/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xed)[0x7f0fd65d076d]
./polcrypt[0x4015e9] 
```

我不明白为什么。

操作系统：GNU/Linux Ubuntu 12.10
GCC 4.7.2/Clang 3.2
cflags`-Wall -Wextra -D_FORTIFY_SOURCE=2 -O2 -Wformat -Wformat-security -fstack-protector-all -fmudflap -fPIE`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T18:29:13.397

从[文档](http://www.fifi.org/doc/libgcrypt-doc/reference.html#AEN338)：

> 返回的消息摘要在消息上下文中分配，因此在上下文 [原文如此] 被释放之前有效。

因此，您需要确保释放消息上下文，但不需要 allocate 或 free `hmac`。

如果要在从返回之前释放消息上下文`calculate_hmac`，则需要将 hmac 复制出来：

```
unsigned char *hmac = malloc(64);
unsigned char *m_hmac = gcry_md_read(gd, GCRY_MD_SHA512);
memcpy(hmac, m_hmac, 64);
return hmac; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T18:28:57.417

您正在分配`hmac`，然后用以下结果覆盖新分配的指针`gcry_md_read`：

```
unsigned char *hmac = malloc(64);
hmac = gcry_md_read(hd, GCRY_MD_SHA512); 
```

[gcry_md_read](http://www.fifi.org/doc/libgcrypt-doc/reference.html#AEN338)的文档指出：

> gcry_md_read 在完成计算后返回消息摘要。这个函数可以根据需要经常使用，但它总是会为一个句柄返回相同的值。返回的消息摘要在消息上下文中分配，因此在上下文被释放之前有效。

因此，除非您想在上下文释放后保留指针，否则您不需要 malloc 或释放任何东西：

```
unsigned char *hmac = gcry_md_read(hd, GCRY_MD_SHA512); 
```

# macos - xcode 在 OS X 中显示 iPad 相机胶卷

> ID：14942934
> 
> 赞同：0
> 
> 时间：2013-02-18T18:27:11.490
> 
> 标签：macos, ipad, xcode4.5

我正在尝试创建一个 OSX 应用程序，当我的 ipad 通过 USB 连接时，它将在我的 Mac 上显示照片并允许将它们下载到特定文件夹。基本上它就像一个 iPhoto 克隆，但每次拍摄照片时都会实时同步。我知道如何在 iPad 本身上做到这一点，但我不熟悉 OSX 编程。如果有人有任何样品或可以指出我正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T19:45:24.310

[SimpleCameraBrowser](http://developer.apple.com/library/mac/#samplecode/SimpleCameraBrowser/Introduction/Intro.html)示例代码将是一个很好的起点。它使用[ImageCaptureCore](http://developer.apple.com/library/mac/#documentation/Carbon/Conceptual/ImageCaptureServicesProgrammingGuide/CreatinganApplicationUsingImageCaptureCore/CreatinganApplicationUsingImageCaptureCore.html)框架显示已连接相机上的图像列表，并将这些图像下载到文件夹中。iOS 设备被识别为相机，它应该可以在 iPad 上正常工作。

# javascript - 正则表达式以逗号分隔，但不包括大括号、方括号和括号内的那些

> ID：14942935
> 
> 赞同：4
> 
> 时间：2013-02-18T18:27:12.343
> 
> 标签：javascript, regex

我正在尝试解析一个逗号分隔的列表，同时省略位于由大括号、方括号或括号定义的内部结构中的逗号。例如，这个字符串：

```
'text:firstName,css:{left:x,top:y},values:["a","b"],visible:(true,false),broken:["str", 1, {}, [],()]' 
```

应拆分为：

```
text:firstName
css:{left:x,top:y}
values:["a","b"]
visible:(true,false)
broken:["str", 1, {}, [],()] 
```

到目前为止，我有以下内容......它很接近但在嵌套结构上中断：

```
[^,\[\]{}]+(({|\[)[^\[\]{}]*(}|\]))? 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T19:37:15.943

除非您愿意更改您的数据格式，或者您可以找到一种简单的方法在接收后将其转换为正确的 JSON，否则最好的选择是手动解析。

最简单的匹配器（假设“nice”值）：

```
On ([{   - increment parens
On )]}   - decrement parens or emit error if parens is zero
On ,     - emit and reset the buffer if parens is zero (finish a match)
If not , - push into the output buffer 
```

这不适用于“丑陋”的字符串（带引号的括号、转义的引号、转义的转义......）。此解析器应该正确解析所有有效输入，同时仍然相对简单：

```
On ([{ - increment parens if the state is "start". Push to buffer.
On )]} - decrement parens if the state is "start" and parens is positive.
         Emit an error if parens is zero. Push to buffer.
On ,   - emit and reset the buffer if parens is zero and the state is "start"
         (finish a match). Push to buffer.
On \   - Push to buffer, and push and read the next symbol as well.
On '   - If the state is "start", change the state to "squote", and vice versa.
         Push to buffer.
On "   - If the state is "start", change the state to "dquote", and vice versa.
         Push to buffer.
On EOF - Emit error if parens is not zero or the state is not "start". 
```

这是 Javascript 中的实现草图：

```
function splitLiteralBodyByCommas(input){
  var out = [];
  var iLen = input.length;
  var parens = 0;
  var state = "";
  var buffer = ""; //using string for simplicity, but an array might be faster

  for(var i=0; i<iLen; i++){
    if(input[i] == ',' && !parens && !state){
      out.push(buffer);
      buffer = ""; 
    }else{
      buffer += input[i];
    }
    switch(input[i]){
      case '(':
      case '[':
      case '{':
        if(!state) parens++;
        break;
      case ')':
      case ']':
      case '}':
        if(!state) if(!parens--)
          throw new SyntaxError("closing paren, but no opening");
        break;
      case '"':
        if(!state) state = '"';
        else if(state === '"') state = '';
        break;
      case "'":
        if(!state) state = "'";
        else if(state === "'") state = '';
        break;
      case '\\':
        buffer += input[++i];
        break;
    }//end of switch-input
  }//end of for-input
  if(state || parens)
    throw new SyntaxError("unfinished input");
  out.push(buffer);
  return out;
} 
```

这个解析器仍然有它的缺陷：

它允许用大括号等关闭括号。为了解决这个问题，制作`parens`一堆符号；如果开始和结束符号不匹配，则引发异常。

它允许格式错误的 unicode 转义字符串。`\utest`被解析器接受。

它允许转义顶级逗号。这可能不是错误：`\,,\,`是一个有效的字符串，包含两个由一个未转义的逗号分隔的顶级转义逗号。

尾部反斜杠会产生意外的输出。同样，这将通过读取我们正在转义的数据来解决。一个更简单的解决方法是`buffer += input[++i] || ''`(附加一个空字符串而不是`undefined`，但这允许无效输入。

它允许各种其他无效输入：`[""'']{'\\'}"a"`只是一个例子。修复需要更好（更复杂）的语法，以及相应的更复杂的解析器。

* * *

话虽如此，使用 JSON 传输数据不是更好吗？

选项 1：一个真实的对象：`{"text":"firstName", "css":{`...
选项 2（仅当您*真的*希望时）：一个字符串数组：`["text:firstName, css:{`...

在这两种情况下，`JSON.parse(input)`都是你的朋友。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-01T23:54:21.257

使用递归匹配：

```
(?>[^(){}[\], ]+:)?(?>(?>\([^()]*(?R)?[^()]*\))|(?>\[[^[\]]*(?R)?[^[\]]*\])|(?>{[^{}]*(?R)?[^{}]*})|(?>[^(){}[\], ]+)) 
```

第一部分匹配到并包括冒号：

```
(?>[^(){}[\], ]+:)? 
```

其余部分包含 balance `()`、`[]`、`{}`和除逗号或空格之外的任何其他选项：

```
(?>(?>\([^()]*(?R)?[^()]*\))|
(?>\[[^[\]]*(?R)?[^[\]]*\])|
(?>{[^{}]*(?R)?[^{}]*})|
(?>[^(){}[\], ]+)) 
```

# ios - 尝试将视频与 AVMutableComposition 合并时出现异常错误：“对象不能为零”......但它们似乎不是零？

> ID：14942938
> 
> 赞同：0
> 
> 时间：2013-02-18T18:27:22.850
> 
> 标签：ios, objective-c, nsmutablearray, avfoundation, avmutablecomposition

我的大脑感觉就像炒鸡蛋……我正在尝试将视频剪辑合并在一起。我将每个剪辑 URL 存储在 NSMutableArray (arrayClipURL) 中，这一切都很好。当我在调试控制台中打印 timeRanges 和轨道（都是 NSMutableArrays）时，一切都检查出来了，这意味着 for 循环正在完成它的工作。我不断收到异常错误：' *** -[__NSArrayM insertObject:atIndex:]: object cannot be nil'。

我抛出了一个异常断点，它在下面的最后一行中断。我无法弄清楚，因为 timeRanges 和 track 都不是零……我可以在调试控制台中打印它们，并在断线之前直接看到它们。

```
composition = [[AVMutableComposition composition] init];

composedTrack = [[AVMutableCompositionTrack alloc] init];
composedTrack = [composition addMutableTrackWithMediaType:AVMediaTypeVideo
                                         preferredTrackID:kCMPersistentTrackID_Invalid];

NSMutableArray * timeRanges = [[NSMutableArray alloc] initWithCapacity:arrayClipURL.count];
NSMutableArray * tracks = [[NSMutableArray alloc] initWithCapacity:arrayClipURL.count];

for (int i=0; i<[arrayClipURL count]; i++){
    AVURLAsset *assetClip = [[AVURLAsset alloc] initWithURL:[arrayClipURL objectAtIndex:i] options:nil];
    AVAssetTrack *clipTrack = [[AVAssetTrack alloc] init];
    clipTrack = [[assetClip tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0];
    [timeRanges addObject:[NSValue valueWithCMTimeRange:CMTimeRangeMake(kCMTimeZero, assetClip.duration)]];
    [tracks addObject:clipTrack];
}
debug(@"timeranges:  %@",timeRanges);
debug(@"tracks:  %@",tracks);

[composedTrack insertTimeRanges:timeRanges ofTracks:tracks atTime:kCMTimeZero error:nil]; 
```

我需要一些资深的帮助:(知道可能是什么导致了这个问题吗？

编辑：这是 2 个数组在控制台中打印的样子。我唯一能想到的可能是 CMTimeRange 或 AVAssetTrack 没有在数组中正确格式化？？？我不知道。只是认为在抛出异常时查看它实际尝试插入的内容可能会有所帮助。

```
 2013-02-18 13:18:20.811 app[5242:907] [AVCaptureManager.m:401] timeranges array:  (
    "CMTimeRange: {{0/1 = 0.000}, {498/600 = 0.830}}",
    "CMTimeRange: {{0/1 = 0.000}, {556/600 = 0.927}}"
)
2013-02-18 13:18:20.812 app[5242:907] [AVCaptureManager.m:402] tracks array:  (
    "<AVAssetTrack: 0x220c21a0, trackID = 1, mediaType = vide>",
    "<AVAssetTrack: 0x1cdec820, trackID = 1, mediaType = vide>"
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:17:16.950

您的问题是由 AVURLAsset 实例的范围引起的

由于您 AVURLAsset *assetClip 在 for 循环内，它在它之外无效，您提取的曲目也无效。

如果您将assetClip 保存在一个在for 循环范围内幸存的数组中，它应该可以解决您的问题

# java - 如何列出对象在 Java 中扩展的所有类？

> ID：14942939
> 
> 赞同：2
> 
> 时间：2013-02-18T18:27:28.793
> 
> 标签：java, decorator

在 Java 中，我使用的是装饰器模式。有时一个`Object`可以有很多类型，因为它可以用很多类来装饰。我怎样才能得到一个对象的所有不同类型？

```
abstract class: plate
concrete class: JapanesePlate, WesternPlate

abstract plateDecorator extends plate
concrete decorators: MeatPlateDecorator, TomatoPlateDecorator, 
```

有时， a`JapanesePlate`可以用`MeatPlateDecorator`或 `TomatoPlateDecorator`或两者装饰。

我只是想知道是否有任何方法可以知道这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T18:42:52.497

您无法找到形成任意装饰层次结构的所有类，因为装饰器*具有*装饰类的实例，并且不形成*is-a*关系。

举一个来自 JDK 的具体示例：[BufferedInputStream](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedInputStream.html)是输入流的装饰器。它是包含`FilterInputStream`and的类层次结构的一部分`InputStream`，但它不会告诉您它正在*装饰*的类。

如果你碰巧知道它`BufferedInputStream`是如何实现的，你可以使用反射来检查它正在装饰的流，但这并不能帮助你检查，比如说`BufferedOutputStream`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T18:35:15.937

使用[getSuperClass](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html#getSuperclass%28%29)。如果需要，您还可以使用`getInterfaces`：

```
 Class objectClass = object.getClass();
   while (objectClass != null) {
     Class parent = objectClass.getSuperClass();
     Class [] implementedInterfaces = objectClass.getInterfaces()

     objectClass =  parent; // continue upward in the hierarchy.
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T18:53:54.620

如果您控制类层次结构，最好的选择可能是引入装饰器接口：

```
public interface Decorator<T> {
    T getDecoratedObject();
} 
```

现在你的装饰器 walk 可以检查特殊`Decorator`接口并撬开包装的对象。

如果你不能改变类，你可能不得不依赖反射黑客和启发式。

# iphone - 如何在 iPhone 推特应用程序 (MGTwitterEngine) 上回复推文？

> ID：14942946
> 
> 赞同：0
> 
> 时间：2013-02-18T18:28:19.340
> 
> 标签：iphone, ipad, twitter, ios-simulator, mgtwitterengine

如何在 iPhone 推特应用程序 (MGTwitterEngine) 上回复推文？

任何人都可以给我链接或源代码来回复推文吗？

谢谢，光辉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:38:32.347

谢谢你们的回复，但我已经使用 FHSTwitterEngine 完成了对推文的回复。

[https://github.com/fhsjaagshs/FHSTwitterEngine](https://github.com/fhsjaagshs/FHSTwitterEngine)

# java - 使用扫描仪读取文件并将其保存在包含空格的字符串中

> ID：14942947
> 
> 赞同：0
> 
> 时间：2013-02-18T18:28:19.863
> 
> 标签：java, java.util.scanner

我有一个要阅读的文本文件。我这样做没有问题。我的问题是我需要检查一行是否有空格。例如，假设以下是我的文本文件。我想将“某物”保存在新字符串中，如果该列和行中没有任何内容，那么我想将“”作为字符串。列1 列2 列3 行1 某事 某事 行2 某事 某事 行3 某事

我试图用扫描仪读取文件并将每一行保存在新字符串中。但我不知道如何从字符串中获取空格。我不确定这种方法是否有效。

有什么建议么

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T18:43:04.660

如果你想检查空格，只需使用

```
String out;
if(inputLine.indexOf(" ")!=-1){
  // Whitespace exists in string
  out = "something";
} else {
  // No whitespace exists
  out = " ";
} 
```

# android - 活动中的键盘类型

> ID：14942951
> 
> 赞同：1
> 
> 时间：2013-02-18T18:28:37.427
> 
> 标签：android, keyboard

一些包含 edittext 的应用程序使用具有一种选项卡按钮而不是返回按钮的默认键盘。有一种方法可以在我的应用程序中调用它而不是经典的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T18:36:07.497

嗨，在您的 EditText 中尝试此属性

```
 android:imeOptions="actionSend|flagNoEnterAction" 
```

# jquery - 对 div 的操作 - 如何停止 1 次选择？

> ID：14942954
> 
> 赞同：0
> 
> 时间：2013-02-18T18:28:49.450
> 
> 标签：jquery, drop-down-menu, blockui

我在包含“动作”按钮的 div 上设置了一个 jQuery BlockUI 调用。Onclick，这个灰色的页面是为了防止双击等。我们引入了一个新选项，它有一个选择框/转到按钮组合。

问题是，选择框更改会导致它进入等待屏幕，然后您才能点击提交按钮。

我如何将 blockui 定位为不触发选择？不幸的是，select name="" 区域是动态的，并且会随着它从 cms 构建而不断变化，所以我不能使用 select[name=] 定位。如有必要，我可以给它上课。“其他”是我目前所拥有的。如果选择单击，我需要构建 if 顶部基本上什么都不做。

```
$('.actionbuttons').click(function() {
    if($SELECT?)
       alert('select');
    }
else{
       $.blockUI({ message: '<h1>thinking...</h1>' });
    }
}); 
```

html:

```
<div class="actionbuttons">
  <input type="submit" name="a" value="Save" onclick="return verify(this.form);">
  <input type="submit" name="b" value="Close" onclick="return verify(this.form);">
  <select name="c" size="1" onchange="changeit();">
      <option selected="selected">Default</option>
      <!-- dont do anything when clicking here -->
  </select>
  <input type="submit" name="d" value="Change C" onclick="return verify(this.form);">
</div> 
```

不，只是为了记录，由于规范，onchange + submit in 1 move 是不可接受的。所以按钮需要在 d 上才能提交 c。请记住，这些名称字母是动态的，并且在每次页面加载时都会发生变化，因此对于定位毫无用处。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T20:13:10.447

如果您的意图是仅在单击`input`元素时触发 BlockUI 覆盖`type="submit"`，您可以简单地在选择器上更具体。

**HTML**

```
<div class="actionbuttons">
    <input type="submit" name="a" value="Save" />
    <input type="submit" name="b" value="Close" />
    <select name="c" size="1">
        <option selected="selected">Default</option>
        <option>Other</option>
        <!-- dont do anything when clicking here -->
    </select>
    <input type="submit" name="d" value="Change C" />
</div> 
```

**JS**

```
$('.actionbuttons input[type="submit"]').click(function (e) {
    $.blockUI({
        message: '<h1>thinking...</h1>'
    });
    verify( /* Pass in your form */ );
});

$('.actionbuttons select').change(function (e) {
    changeit();
}); 
```

这将触发具有该类的容器的子元素（不一定是直接元素）的任何`input`元素的行为。然后，您不需要在回调函数内部围绕调出覆盖层进行任何逻辑。此外，您还可以选择将呼叫直接移到那里。`type="submit"``actionbuttons``verify`

[jsfiddle](http://jsfiddle.net/VhHyE/2/)

# html - CSS - 盒子模型 - 仅适用于 Chrome

> ID：14942961
> 
> 赞同：1
> 
> 时间：2013-02-18T18:29:26.423
> 
> 标签：html, twitter-bootstrap, css

**在使用 Bootstrap 的 css 创建了一个简单的流体布局后，我注意到除了 Chrome 之外，每个浏览器**的布局并没有在右侧对齐。

看看这个 jsFiddle： http: [//jsfiddle.net/47JND/5/](http://jsfiddle.net/47JND/5/) ，例如，firefox 或 IE9。

你会注意到这一点：

![在此处输入图像描述](../Images/cc6e7753b5e8feac3e1c8fd4e2772a89.png)

Chrome 之间只有大约 1px 的差异，（见下文）：

![在此处输入图像描述](../Images/bde4d595c474d605f93423c01bf9ab84.png)

另请注意，我正在使用以下 box-sizing 属性：

```
box-sizing: border-box;
-moz-box-sizing: border-box;
-webkit-box-sizing: border-box; 
```

有什么我想念的吗？我已经尝试了我能想到的一切来找出导致这种情况的原因！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T18:38:36.437

相当肯定这是一个亚像素渲染问题。宽度被四舍五入到最近的像素，这使得它们根据父级的宽度而具有不同的宽度。

我也在 Chrome 上看到了 1 个像素的重叠。

# javascript - 当多个触摸靠得太近时，iOS 触摸会卡住？

> ID：14942964
> 
> 赞同：0
> 
> 时间：2013-02-18T18:29:33.653
> 
> 标签：javascript, iphone, ios, ipad, touch

我的问题与此页面有关：http: [//bokehcreative.co.uk/projects/touch.html](http://bokehcreative.co.uk/projects/touch.html)

它是一个简单的触摸跟踪器和计数器，但是当两个触摸距离太近时，它有时似乎只在其中一个上注册 .touchend。我可以理解为什么会发生这种情况，但不确定如何防止它发生。

任何帮助表示赞赏，如有必要，可以发布更多详细信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T11:26:32.273

iOS 正在尽力解释用户交互，您无法更改 iOS“认为”它看到的触摸次数。但是，在您的代码中，根据您“认为”用户尝试执行的操作，您可以进行调整：当您仍然有活动触摸时忽略触摸结束（您甚至可以通过假设它移动来移动触摸结束的点其他人 - 如果它最初这样做），警告触摸太近，继续用圆圈标记点，直到触摸返回。

如果您需要更多帮助，请添加有关您要完成的工作的更多详细信息。

# html - 带有标题的下拉框 - 不会包含在选项中

> ID：14942965
> 
> 赞同：0
> 
> 时间：2013-02-18T18:29:47.393
> 
> 标签：html, css

你知道带标题的下拉框的一个很好的实现吗？不会包含在下拉框的选项中。

我正在尝试在屏幕右上角放置一个选择框，该框将显示用户名；当用户单击名称时，我想向他展示几个选项，例如 "Sign-Out" 和 "Set-Up" 。我不想仅将用户名作为选项显示为标题。

我检查了 HTML5 选择标签，虽然它没有显示标题的能力。

现在似乎这个功能存在于很多网站中，我想知道是否有人听说过实现它的好方法？或现有的实现。

问候， 卢克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T18:32:41.183

我在上面看到的大多数网站都没有使用 HTML 表单元素，而是使用在点击事件中显示/隐藏的浮动 div。这将是我的首选，您是否需要使用 SELECT 标签？

# c++ - 如果足够多的活动，boost::mutex 可以锁定操作系统吗？

> ID：14942966
> 
> 赞同：1
> 
> 时间：2013-02-18T18:29:48.233
> 
> 标签：c++, multithreading, boost-thread

我正在使用中间处理线程解决生产者消费者问题。当我运行 200 个这样的应用程序时，它会在大量连接超时时将系统锁定在 win7 中。不幸的是，不是以我知道如何调试它的方式。系统变得无响应，我必须使用电源按钮重新启动它。它在我的 mac 上运行良好，奇怪的是，它在安全模式下的 windows 下运行良好。

我正在使用 boost 1.44，因为这是主机应用程序使用的。

这是我的队列。我的意图是队列的大小是同步的。我已经操纵它来`timed_wait`确保我不会丢失通知，尽管我没有看到效果上有什么不同。

```
class ConcurrentQueue {
public:
    void push(const std::string& str, size_t notify_size, size_t max_size);
    std::string pop();

private:
    std::queue<std::string> queue;
    boost::mutex mutex;
    boost::condition_variable cond;
};

void ConcurrentQueue::push(
  const std::string& str, size_t notify_size, size_t max_size) {
    size_t queue_size;
    {{
        boost::mutex::scoped_lock lock(mutex);
        if (queue.size() < max_size) {
            queue.push(str);
        }
        queue_size = queue.size();
    }}
    if (queue_size >= notify_size)
        cond.notify_one();
}

std::string ConcurrentQueue::pop() {
    boost::mutex::scoped_lock lock(mutex);
    while (!queue.size())
        cond.wait(lock);
    std::string str = queue.front();
    queue.pop();
    return str;
} 
```

这些线程使用以下队列使用 libcurl 进行处理和发送。

```
boost::shared_ptr<ConcurrentQueue> queue_a(new ConcurrentQueue);
boost::shared_ptr<ConcurrentQueue> queue_b(new ConcurrentQueue);

void prod_run(size_t iterations) {
    try {
        // stagger startup
        boost::this_thread::sleep(
              boost::posix_time::seconds(random_num(0, 25)));
        size_t save_frequency = random_num(41, 97);
        for (size_t i = 0; i < iterations; i++) {
            // compute
            size_t v = 1;
            for (size_t j = 2; j < (i % 7890) + 4567; j++) {
                v *= j;
                v = std::max(v % 39484, v % 85783);
            }
            // save
            if (i % save_frequency == 0) {
                std::string iv = 
                              boost::str( boost::format("%1%=%2%") % i % v );
                queue_a->push(iv, 1, 200);
            }
            sleep_frame();
        }
    } catch (boost::thread_interrupted&) {
    }
}

void prodcons_run() {
    try {
        for (;;) {
            std::string iv = queue_a->pop();
            queue_b->push(iv, 1, 200);
        }
    } catch (boost::thread_interrupted&) {
    }
}

void cons_run() {
    try {
        for (;;) {
            std::string iv = queue_b->pop();
            send_http_post("http://127.0.0.1", iv);
        }
    } catch (boost::thread_interrupted&) {
    }
} 
```

我对以这种方式使用互斥锁的理解不应使系统无响应。如果有的话，我的应用程序会死锁并永远休眠。

有没有什么方法可以同时拥有 200 个这样的场景，而情况并非如此？

更新：

当我重新启动计算机时，大多数时候我需要重新插入 USB 键盘才能使其响应。鉴于司机的评论，我认为这可能是相关的。我尝试更新北桥驱动程序，尽管它们是最新的。我会看看是否还有其他需要注意的驱动程序。

更新：

我观察了内存、非分页池、cpu、句柄、端口，在系统响应时，它们都没有处于惊人的速度。最后可能会有一些尖峰，尽管这对我来说是不可见的。

更新：

当系统挂起时，它会停止渲染并且不响应键盘。它渲染的最后一帧仍然存在。系统听起来它仍在运行，当系统恢复运行时，事件查看器中没有任何内容表明它崩溃了。也没有故障转储文件。我将此解释为操作系统被阻止执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T18:37:30.240

互斥锁锁定使用相同锁的其他应用程序。操作系统使用的任何互斥锁都不应该（直接）对任何应用程序可用。

当然，如果互斥锁是使用操作系统以某种方式实现的，它很可能会调用操作系统，从而使用 CPU 资源。但是，互斥锁不会导致比应用程序以任何其他方式使用 CPU 资源更糟糕的行为。

当然，如果你以不恰当的方式使用锁，应用程序的不同部分可能会陷入死锁，因为函数 1 获取锁 A，然后函数 2 获取锁 B。如果函数 1 尝试获取锁 B，并且函数2 试图在释放各自的锁之前获取锁A，你就有了死锁。这里的技巧是始终以相同的顺序获取多个锁。所以如果你同时需要两个锁，总是先获取锁A，再获取锁B。

死锁不应该像这样影响操作系统——如果有的话，它会使它变得更好，但如果应用程序在死锁的情况下以某种方式“行为不端”，它可能会通过大量调用操作系统而导致问题——例如，如果锁定是由：

```
while (!trylock(lock))
{
      /// do nothing here
} 
```

它可能会导致系统使用高峰。

# ios - 如何在iOS中按最大和小于排序

> ID：14942969
> 
> 赞同：0
> 
> 时间：2013-02-18T18:29:58.950
> 
> 标签：ios, arrays, sorting

我将 200 到 1 的值作为字符串存储在一个名为 beaus 的数组中。

```
 NSSortDescriptor *sortDesc = [NSSortDescriptor sortDescriptorWithKey:@"dataoflar" ascending:NO];
    [beaus sortUsingDescriptors:@[sortDesc]]; 
```

但是，这仅按第一个数字对它们进行排序（2 大于 10）。有没有办法按数量排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T18:58:52.993

假设最终数组中的值是 NSStrings 并不重要，您应该像这样对其进行排序

```
NSMutableArray *mutableBeaus = [[beaus mutableCopy] autorelease];
[mutableBeaus sortUsingComparator:^NSComparisonResult(NSString *obj1, NSString *obj2) {
    return [obj1 compare:obj2 options:NSNumericSearch];
}];

// mutableBeaus now has the array sorted in an ascending order 1 < 002 < 3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T19:04:45.043

您可以像这样更新您的排序描述：

```
NSSortDescriptor *sortDesc = [NSSortDescriptor sortDescriptorWithKey:@"dataoflar.integerValue" ascending:NO];
[beaus sortUsingDescriptors:@[sortDesc]]; 
```

这将获得每个字符串的整数值，并且排序将基于该数字而不是字符串值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T18:58:34.400

如果由于某些原因您不想在导入期间将字符串转换为 int，则必须编写并使用自己的排序器：

这显示了如何通过包含数字的 NSString 类型的属性“datatoflat”进行排序。排序完成升序。对于降序交换最后一行到`return (i1- i2)`.

```
NSArray *sortedArray;
sortedArray = [beaus sortedArrayUsingComparator:^NSComparisonResult(id a, id b) {
    NSString* s1 = [(NSString*) a dataoflar];
    NSString* s2 = [(NSString*) b dataoflar];

    int i1 = [s1 integerValue];
    int i2 = [s2 integerValue];
    return (i2 - i1);
}]; 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-18T18:49:42.627

如果你必须使用字符串，然后用零填充你的数字，那么它会像你想要的那样排序，而不是其他更改，比如：'002' 而不是 '2' 和 '034' 而不是 '34'

# objective-c - 在objective-c中正确使用@private关键字

> ID：14942970
> 
> 赞同：0
> 
> 时间：2013-02-18T18:30:00.377
> 
> 标签：objective-c, private

我读过私有变量应该标记为私有，否则它们会受到保护，并且被认为是最佳实践？有人可以为目标 C 解释这一点吗？我来自 C# 背景。

```
 // BAD

    @interface Test: NSObject
    {
        NSString* _name;
    }

    @property (nonatomic, retain) NSString* name;

    // GOOD

    @interface Test: NSObject
    {
        @private
        NSString* _name;
    }

    @property (nonatomic, retain) NSString* name; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T18:37:01.010

利用现代 Objective-C：

```
// Best
// .h file
@interface Test : NSObject

// public properties and methods declarations

@end

// .m file
@interface Test ()

// private properties declarations here

@end

@implementation Test {
    // private ivars here - if needed
}

// method implementations here

@end 
```

您发布的示例代表了在新方法可用于现代 Objective-C 之前的旧实践。

不再需要将任何 ivars 放在 .h 文件中，这意味着声明没有用处`@private`。唯一应该在 .h 中的是公共方法和公共属性声明。其他所有内容都在 .m 文件中。

# java - Http POST 适用于标准 Java 在 Android 上无法正常工作

> ID：14942978
> 
> 赞同：1
> 
> 时间：2013-02-18T18:30:27.507
> 
> 标签：java, android, http

我正在研究以下代码，这些代码在命令行中适用于 std java，但在运行 4.2 的 Galaxy Nexus 上的 Android 中不起作用。我在尝试向[http://cleverbot.com/webservicemin](http://cleverbot.com/webservicemin)发布帖子时包含了两种变体。最初的帖子逻辑取自[chatterbot API](http://code.google.com/p/chatter-bot-api/)，修改后的逻辑是我尝试使用 Java 中可用的不同 Http API。这是在测试项目中包含[chatterbot API](http://code.google.com/p/chatter-bot-api/)的天真尝试。原始应用程序使用标准 Java 在 cmd 行上的主应用程序中工作，而这两个版本都不能在 Android 中工作。

```
private static String revisedPostLogic(String url, Map<String, String> parameters) throws IOException {
    HttpClient httpClient = new DefaultHttpClient();
    HttpPost httpPost = new HttpPost(url);
    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(parameters.size());
    for(Map.Entry<String,String>eachEntry : parameters.entrySet())
        nameValuePairs.add(new BasicNameValuePair(eachEntry.getKey(),eachEntry.getValue()));
    httpPost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
    HttpResponse response = httpClient.execute(httpPost);
    ByteArrayOutputStream rawResponse = new ByteArrayOutputStream();
    response.getEntity().writeTo(rawResponse);
    return rawResponse.toString();
}

private static String old_post_logic(String url, Map<String, String> parameters) throws Exception {
    URLConnection connection = new URL(url).openConnection();
    ((HttpURLConnection) connection).setRequestMethod("POST");
    connection.setDoOutput(true);
    connection.setDoInput(true);
    OutputStreamWriter osw = new OutputStreamWriter(connection.getOutputStream());
    osw.write(parametersToWWWFormURLEncoded(parameters));
    osw.flush();
    osw.close();
    Reader r = new BufferedReader(new InputStreamReader(connection.getInputStream()));
    StringWriter w = new StringWriter();
    char[] buffer = new char[1024];
    int n = 0;
    while ((n = r.read(buffer)) != -1) {
        w.write(buffer, 0, n);
    }
    r.close();
    return w.toString();
} 
```

使用修改后的逻辑，我得到服务器异常的无响应，而使用原始逻辑，我得到一个 EOFException。

**更新**

我尝试从 Android 和桌面 Java 运行它，但我得到了一个差异：

```
new java.net.URL("http://cleverbot.com/webservicemin").openConnection().getResponseCode() 
```

在桌面 Java 上，我得到一个响应代码 200。（我没有尝试读取流，但我猜它会返回文本“DENIED”）在 Android 上，我得到“EOFException”。在桌面 Java 上（现在使用 Groovy 作为快捷方式），我转储响应代码、标头和响应内容，我得到：

```
response code: 200
Headers: [null:[HTTP/1.1 200 OK], SC:[6870], RPS:[server52054], MIME-Version:[1.0], Content-Length:[29], Expires:[Mon, 18 Feb 2013 20:07:20 GMT], Set-Cookie:[RPS=server52054, JSESSIONID=6C765C93A085F67D69F800D9EB76646C; Path=/], Connection:[keep-alive], Server:[Jabberwacky], RLM:[2416], Cache-Control:[no-cache;no-store], Pragma:[no-cache], Date:[Mon, 18 Feb 2013 19:56:42 GMT], Content-Type:[text/html;charset=iso-8859-1]]
Response: DENIED 
```

如果我在 Android 上尝试同样的操作，我再次无法通过响应代码。我可以在没有路径的情况下毫无问题地连接到根 URL，只是当我尝试从根 url 中击中路径时，当我使用 GET 或 POST 获得 EOFException 时。我还尝试将 outputstreamwriter close() 调用移到最后，这样我就可以在关闭输出流之前读取响应代码。在这种情况下，我仍然得到 EOFException 。（我从经验中了解到，在移动应用程序中过早关闭输出流可能会关闭您的整个连接。）

# javascript - 过滤类似的值

> ID：14942980
> 
> 赞同：0
> 
> 时间：2013-02-18T18:30:38.870
> 
> 标签：javascript, jquery

我想要类似的过滤值，我尝试了下面的js代码，但是这段代码不能过滤值`111`，因为这个没有`,`。我的 html 代码如下（有些可以，有些不可以：）`,`。

如何修复用于过滤所有字符串的 js 代码？

**演示：http:** [//jsfiddle.net/bNuRE/](http://jsfiddle.net/bNuRE/)

**HTML：**

```
<div class="oo">111</div>
<div class="oo">111, 222, 333</div>
<div class="oo">444, 111</div>
<div class="oo">222, 333</div>
///////////////////////////////////////////////////////
<div class="ww">111</div>
<div class="ww">777</div>
<div class="ww">333</div>
<div class="ww">666</div> 
```

**JS：**

```
var valeache = $('.oo').text().split(', ');
$.each(valeache, function (a, val) {
    $('.ww').filter(function () {
        return $(this).text() == val
    }).remove();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T18:40:21.543

你的构造`valeache`是错误的。

您需要遍历每个`.oo`元素才能正确构造`valeache`.

```
var valeache = $('.oo').map(function(){
    return $(this).text().split(', ');
}).get();
$.each(valeache, function (a, val) {
    $('.ww').filter(function () {
        return $(this).text().trim() == val;
    }).remove();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T19:05:16.510

我不完全清楚你想要做什么。您是否只是试图从目标列表中删除其值与源列表的任何元素中的一个（可能是逗号分隔的）值匹配的元素？如果是这样，我认为您可以更轻松地做到这一点：

```
var vals = $.map($('.oo'), $.text).join(", ").split(", ");

$('.ww').filter(function () {
    return $.inArray($(this).text(), vals) > -1;
}).remove(); 
```

**演示：http: [//jsfiddle.net/CrossEye/MVGLQ/1/](http://jsfiddle.net/CrossEye/MVGLQ/1/)**

该初始数组包含重复项，但这应该不是问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T18:44:52.660

```
var valeache = null;

$('.oo').text(function(i, text) {
    valeache += text.replace(/\s/g,'') + ',';
})
valeache = $.unique( valeache .replace(/,$/,'').split(',') );

$.each(valeache, function (a, val) {
    $('.ww').filter(function () {
        return $(this).text() == val
    }).remove();
}); 
```

**演示：http: [//jsfiddle.net/xfSK4/3/](http://jsfiddle.net/xfSK4/3/)**

# php - 投资组合网站数据库设计建议

> ID：14942981
> 
> 赞同：0
> 
> 时间：2013-02-18T18:30:44.733
> 
> 标签：php, mysql, database, codeigniter

所以我是一个视觉设计师类型的人，学习了大量的 PHP 和一点 SQL。

我正在组建一个个人多媒体作品集网站。我正在使用 CI 并且喜欢它。问题是我对数据库设计一无所知，我一直在重写（和破坏）我的表。这是我需要的。

我有一个表来存储项目：

*我想对标题和描述进行全文搜索，所以我认为这需要是 MyISAM*

**项目**

*   ID
*   名称（仅管理员可读）
*   标题（供访客阅读的标题）
*   描述
*   日期（项目完成的日期）
*   已发布（项目发布时的时间戳）

然后我需要标签：

*我想我已经想通了。从研究。*

**标签**

*   tag_id
*   标签名称

**项目标签**

*   project_id（外键项目表）
*   tag_id（外键标签表）

这是我有四种媒体类型的问题；相册、Flash 应用程序、打印件和网站设计。没有项目可以有两种类型，因为（除了一种例外）它们都需要在视图中显示不同的逻辑。我不确定是将媒体类型*放在*项目表中并直接加入类型表*还是*使用中间表来定义标签等关系。我还考虑了父类型/子类型，即；博客、项目 - Flash、项目 - 网络。我真的很感激一些方向。

也可能对如何使用给定的解决方案有效地查询项目有一些帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T18:39:20.277

你为什么不把所有的共同点放在一个表格中，然后把特定的东西放在表格中，这样你就可以在一个表格中搜索所有的标题和描述。

```
Basic Table
- ID int
- Name varchar()
- Title varchar()
etc

Blogs
-ID int (just an auto_increment key)
-basicID int (this matches the id of the item in the basic table)
etc 
```

每种媒体类型都有一个。这样，您可以一次搜索所有描述和标题，并在用户单击搜索页面中的链接时加载适当的数据。（我认为当您说您希望能够让人们搜索时，您的意思就是这种功能。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T18:45:27.300

另一个可能的想法是向项目表中添加满足所有媒体类型需求的列，然后在编辑数据时，您将仅使用给定媒体类型所需的某些列。

那将是更高效的数据库（更少的连接）。

如果您的媒体类型在您需要的列中没有太大差异，我会选择这种方法。

如果它们差别很大，我会选择@cosmicsafari 推荐。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T19:09:37.550

首先要考虑的是您的数据库引擎 MyISAM。数据库引擎是 MySQL 存储数据的方式。有关 MyISAM 的更多信息，您可以查看：[http](http://dev.mysql.com/doc/refman/5.0/en/myisam-storage-engine.html) ://dev.mysql.com/doc/refman/5.0/en/myisam-storage-engine.html 。如果你想拥有参照完整性（推荐），你希望你的数据库引擎是 InnoDB（[http://dev.mysql.com/doc/refman/5.0/en/innodb-storage-engine.html](http://dev.mysql.com/doc/refman/5.0/en/innodb-storage-engine.html)）。InnoDB 允许您创建外键并强制执行该外键关系（我发现 MyISAM 没有这样的困难方式）。MyISAM 是 MySQL 数据库的默认引擎。如果您使用 phpMyAdmin（这是 MySQL 和 PHP 开发的强烈推荐工具），您可以轻松更改数据库的引擎类型（参见：[http://www.electrictoolbox.com/mysql-change-table-storage-engine/](http://www.electrictoolbox.com/mysql-change-table-storage-engine/)）。

话虽如此，搜索或查询可以在 MyISAM 和 InnoDB 数据库引擎中完成。您还可以索引列以使搜索查询（SELECT 语句）更快，但代价是 INSERT 语句将花费更长的时间。如果您的数据库不是很大（即数百万条记录），那么您应该不会看到明显的差异。

就您的设计而言，有几件事需要解决。首先要了解的是实体关系图或 ERD。这是您的表格及其对应关系的图表。

可以存在几种类型的关系：一对一关系、一对多关系、多对多关系以及分层或递归关系。多对多关系是最复杂的，不能直接在数据库中产生，必须用间歇性的表来解决（我会用一个例子进一步解释）。

一对一的关系很简单。例如，如果您有一个包含所有员工列表的员工表和一个包含所有薪水列表的薪水表。一名员工只能拥有一份薪水，一份薪水只能属于一名员工。

话虽如此，要添加到组合中的另一个元素是基数。基数是指关系是否可能存在或必须存在。在前面的员工示例中，工资和员工之间必须存在关系（否则可能不会向员工支付报酬）。这种关系被解读为，一个员工必须有一个且只有一个薪水，而一个薪水可能有也可能没有一个且只有一个员工（因为薪水可以不属于员工而存在）。

短语“只有一个”是指它是一对一的关系。短语“必须”和“可能或可能不”指的是需要存在或不需要存在的关系。这转化为设计，因为我在员工表中的薪水 id 的外键不能为空，并且在薪水表中没有引用员工的外键。

**EMPLOYEE**
id 主键
名称 VARCHAR(100)
Salary_id NOT NULL UNIQUE

**SALARY**
id PRIMARY KEY
金额 INTEGER NOT NULL

一对多关系被定义为具有多个的潜力。例如，与您的投资组合有关，客户可能有一个或多个项目。因此，项目表 client_id 中的外键字段不能是唯一的，因为它可能会重复。

多对多关系被定义为不止一个可以双向。例如，正如您正确显示的那样，项目可能有一个或多个标签，并且标签可能分配给一个或多个项目。因此，您需要 PROJECT_TAGS 表来解决多对多问题。

关于直接解决您的问题，您将需要创建一个单独的媒体类型表，如果项目所在的位置存在任何可能与多种类型相关联，您将需要一个间歇性表，并可以将一个字段添加到名为 primary_type 的 project_media_type 表允许您将项目类型主要区分为该媒体类型，尽管如果您按类别过滤它可能属于其他类别。

这让我想到了递归关系。因为您有可能具有递归关系或 media_types，所以您需要添加一个名为 parent_id 的字段。您可以将外键索引添加到 parent_id 引用 media_type 表的 id。它必须允许空值，因为所有顶级父 media_types 的 parent_id 都将具有空值。因此，要选择您可以使用的所有父 media_types：

```
SELECT * FROM media_type WHERE parent_id IS NULL 
```

然后，要让孩子遍历每个父母，并可以使用以下查询：

```
SELECT * FROM media_type WHERE parent_id = {$media_type_row->id} 
```

这需要在一个递归函数中，所以你循环直到没有更多的孩子。可以在[递归函数类别数据库](https://stackoverflow.com/questions/3300468/recursive-function-category-database)中查看与层次类别相关的使用 PHP 的示例。

I hope this helps and know it's a lot but essentially, I tried to highlight a whole semester of database design and modeling. If you need any more information, I can attach an example ERD as well.

# jpa - JEE6战争打包成几个模块

> ID：14942982
> 
> 赞同：4
> 
> 时间：2013-02-18T18:30:47.753
> 
> 标签：jpa, jar, ejb, war, packaging

我想将部分 WAR 应用程序拆分为不同的 JAR 组件。每个 JAR 组件都包含 JPA-Entities、EJB 和 JSF-Composite-Components。

示例：将用户管理（XHTML、EJB、JPA-Entities）提取到自己的 jar 中。

起初，只要我不必使用 entityManager，一切看起来都很好。

问题：在 JAR 文件的 EJB 中，entityManager 永远不会被注入。

我正在使用 @PersistenceContext 注释进行注入。

我在所有 META-INF 文件夹中有一个 beans.xml，并且所有内容（entityManager 除外）都已正确注入。我是否将persistence.xml 放在所有JAR 文件中或仅放在WAR 文件中都没有关系。

有没有人有胶水如何做到这一点？

我必须在哪里放置不同的配置文件（beans.xml、persistence.xml）？

我需要一个 ejb-jar.xml 文件吗？

这可能吗？

技术栈：JBoss 6.1 / PrimeFaces 3.2 / Maven / EJB 3.1 / Hibernate / JTA / CDI

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T12:11:41.763

在每个包含实体的 jar 中都需要一个 persistence.xml 文件。每个这样的持久性 xml 都应该定义一个不同的持久性单元。

如果您希望一个持久性单元引用在不同的持久性单元中定义的实体，那么您需要将其作为 jar 文件条目包含在持久性单元定义中（参见下面的示例）。这适用于我们非常相似的堆栈 JBoss 5.1（然后是 7）/EJB3/Hibernate、Maven、...

http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd" version="1.0">

```
<persistence-unit name="PersistenceUnitA">
    <jar-file>JarContainingOtherPersistenceUnit</jar-file>
    <jta-data-source>java:/jboss-mysql-ds</jta-data-source>
    <properties>
        <property name="hibernate.dialect" value="org.hibernate.dialect.MySQL5InnoDBDialect"/>
    </properties>
</persistence-unit> 
```

# c# - asp.net 应用程序的类库中的相对路径

> ID：14942983
> 
> 赞同：0
> 
> 时间：2013-02-18T18:30:50.950
> 
> 标签：c#, asp.net, path, class-library

我在使用我的 Web 应用程序在服务器上读取和写入文件时遇到了一些问题。

我有用于我的业务逻辑的 ac#-class 库和一个 ASP.net Web 应用程序作为前端。当我从 Visual Studio 启动时，整个应用程序运行良好。当我第一次尝试部署它时，我收到了一个错误，我没有权限写`c:/inetpub/wwwroot/myfolder...`

然后我尝试使用相对路径，`/myfolder`但我总是收到消息无法访问`C:/myfolder`！我真的不知道“C”是从哪里来的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T18:45:05.050

我假设您正在尝试从您的应用程序写入文件系统。在这种情况下，“C”来自服务器。ASP.Net 和 IIS 知道您的应用程序在服务器上的位置，并将路径从 URL 映射到文件系统 (C:)。当您从 Visual Studio 启动时，它会起作用，因为它是在对文件系统具有写入权限的帐户下运行的。在您的服务器上运行的 IIS 应用程序池用户没有写入权限。要解决此问题，您可以授予该用户写入权限。[你可以在这篇文章](https://stackoverflow.com/questions/2532079/iis7-folder-permissions-for-web-application%20post)中看到如何做到这一点。

# node.js - 我应该如何监视在另一个对象内部调用的构造函数？

> ID：14942984
> 
> 赞同：1
> 
> 时间：2013-02-18T18:30:52.507
> 
> 标签：node.js, testing, coffeescript, sinon

假设我有一个对象，该对象具有创建另一个对象作为其操作的一部分的函数。

```
sinon = require('sinon')
chai = require 'chai'
sinonChai = require("sinon-chai")
chai.use(sinonChai)
chai.should()
Paper = {}
Paper.Origami = require('../assets/src/coffee/origami.coffee').Paper.Origami

describe '#throwOrigami', ->
  it 'should create origami and throw it', ->
    m = new Monkey()
    throwSpy = sinon.spy(m, 'throwOrigami') 
    createSpy = sinon.spy(Paper, 'Origami')     
    # next function creates origami, then 'throws' it at someone
    m.throwOrigami(); 
    createSpy.should.have.been.calledWithNew
    throwSpy.should.have.been.calledOnce 
```

Monkey 类在顶部有一个 require `Paper.Origami`。

如果我在测试中创建一个 Origami，我可以通过这个测试，但如果我将它留给 Monkey 对象的 create 内部，它将不会通过。我怀疑这是因为两个对象之间的要求路径不同——也许节点不会将它们视为同一个对象。

问题：我可以让`sinon`间谍监视`Origami`对象内部发生的`Monkey`对象的创建吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-25T08:04:39.590

`require`在查看其缓存之前解析路径，因此路径不同并不重要。但是，您在测试中创建了一个`Paper`具有`Origami`属性的新对象。因此，当您监视 时`Paper, 'Origami'`，它是您在测试文件中本地创建`Origami`的`Paper`对象的属性，它被替换为 spy. 我想您可以改为执行以下操作：

```
Paper = require('../assets/src/coffee/origami.coffee').Paper 
```

如果您现在更改`Paper`对象，它将与您的`Monkey`模块中使用的相同。但是，我建议使用诸如[proxyquire 之](https://github.com/thlorenz/proxyquire)类的东西来监视或模拟依赖项。

# sql-server-2008 - 在 mssql 2008 的列末尾显示列的总和

> ID：14942987
> 
> 赞同：1
> 
> 时间：2013-02-18T18:30:55.637
> 
> 标签：sql-server-2008, dynamic-sql, rollup

在 MsSQL 2008 中，我试图在其末尾显示 3 个不同列的总和。

目前我的查询返回![在此处输入图像描述](../Images/85594fb3c9f877c727815d983bdc6345.png)

这是由 (@grouping = maingroup,subgroup,subsubgroup,season,vendorid,[01] as '01',[02] as '02',Total) 选择的

```
set @sql = 'select '+@grouping+' from ##aa'
execute sp_executesql @sql 
```

我需要在各自列的末尾加上 01,02 和 Total 的总和。我试过使用汇总，但这并没有给我正确的结果。可能只是做错了，但是选择语句必须是什么样子才能得到我需要的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T19:03:54.530

有两种方法可以做到这一点。第一种是旧的 sql-server-2008 之前的方法是使用 a `UNION ALL`，第一个`SELECT`返回表中的原始数据，第二个返回 01、02 和 Total 字段的 SUMS：

```
SELECT   maingroup,
         subgroup,
         subsubgroup,
         season,
         vendorid,
         [01] AS '01',
         [02] AS '02',
         Total AS Total
FROM     #aa
UNION ALL
SELECT   null as maingroup,
         null as subgroup,
         null as subsubgroup,
         null as season,
         null as vendorid,
         sum([01]) AS '01',
         sum([02]) AS '02',
         sum(Total) AS Total
FROM     #aa 
```

在 sql-server-2008 及更高版本中，您可以使用它来代替使用[`GROUPING SETS`](http://blogs.msdn.com/b/craigfr/archive/2007/10/11/grouping-sets-in-sql-server-2008.aspx)。上面使用的等效查询`GROUPING SETS`是：

```
SELECT   maingroup,
         subgroup,
         subsubgroup,
         season,
         vendorid,
         sum([01]) AS '01',
         sum([02]) AS '02',
         sum(Total) AS Total
FROM     #aa
GROUP BY GROUPING SETS((maingroup, subgroup, subsubgroup, season, vendorid), ()) 
```

两者都应该返回：

![GROUPING SETS 的结果](../Images/970e0a96f0ee394c17870bde14c3573d.png)

[GROUPING SETS Equivalents](http://msdn.microsoft.com/en-us/library/bb510427%28v=sql.105%29.aspx)和[Using GROUP BY with ROLLUP、CUBE 和 GROUPING SETS](http://msdn.microsoft.com/en-us/library/bb522495%28v=sql.105%29.aspx)是另外两个来源，其中包含有关使用的良好信息`GROUPING SETS`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T18:35:16.733

```
Select maingroup, subgroup, subsubgroup, season, vendorid, sum([01]) as '01', sum([02]) as '02', sum(Total)
FROM ##aa
Group by grouping sets ((maingroup, subgroup, subsubgroup, season, vendorid),()) 
```

最后一个条目将是除 01、02 和总计之外的所有列中为 NULL 的行。

# python - python中的元组列表

> ID：14942992
> 
> 赞同：1
> 
> 时间：2013-02-18T18:31:11.467
> 
> 标签：python, list, tuples

我是 Python 新手，对列表和元组有一些疑问。我有一个由带有句子和词类标签的元组组成的列表。这是我列表中的一个元素：

```
[('It', 'PPS'), ('says', 'VBZ'), ('that', 'CS'), ('``', '``'), ('in', 'IN'), ('the', 'AT'), ('event', 'NN'), ('Congress', 'NP'), ('does', 'DOZ'), ('provide', 'VB'), ('this', 'DT'), ('increase', 'NN'), ('in', 'IN'), ('federal', 'JJ'), ('funds', 'NNS'), ("''", "''"), (',', ','), ('the', 'AT'), ('State', 'NN-TL'), ('Board', 'NN-TL'), ('of', 'IN-TL'), ('Education', 'NN-TL'), ('should', 'MD'), ('be', 'BE'), ('directed', 'VBN'), ('to', 'TO'), ('``', '``'), ('give', 'VB'), ('priority', 'NN'), ("''", "''"), ('to', 'IN'), ('teacher', 'NN'), ('pay', 'NN'), ('raises', 'NNS'), ('.', '.')] 
```

如您所见，每个单词都有一个 wordclass-tag。如何在我的列表中搜索 word + wordclass？前任 如果我想查看 about 元素是否包含附加到 wordclass-tag "JJ" 的单词 "federal" ？

非常感谢帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T18:34:14.560

我会用一套来代替。然后您可以`in`有效地使用运算符：

```
wlist = set([('It', 'PPS'), ('says', 'VBZ'), ('that', 'CS'), ('``', '``'), ('in', 'IN'), ('the', 'AT'), ('event', 'NN'), ('Congress', 'NP'), ('does', 'DOZ'), ('provide', 'VB'), ('this', 'DT'), ('increase', 'NN'), ('in', 'IN'), ('federal', 'JJ'), ('funds', 'NNS'), ("''", "''"), (',', ','), ('the', 'AT'), ('State', 'NN-TL'), ('Board', 'NN-TL'), ('of', 'IN-TL'), ('Education', 'NN-TL'), ('should', 'MD'), ('be', 'BE'), ('directed', 'VBN'), ('to', 'TO'), ('``', '``'), ('give', 'VB'), ('priority', 'NN'), ("''", "''"), ('to', 'IN'), ('teacher', 'NN'), ('pay', 'NN'), ('raises', 'NNS'), ('.', '.')])

print ('federal', 'JJ') in wlist # prints True 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T18:38:04.893

要检查您的列表中是否有带有“JJ”标签的“联邦”一词：

```
your_list = [('It', 'PPS'), ('says', 'VBZ'), ('that', 'CS'), ('``', '``'), ('in', 'IN'), ('the', 'AT'), ('event', 'NN'), ('Congress', 'NP'), ('does', 'DOZ'), ('provide', 'VB'), ('this', 'DT'), ('increase', 'NN'), ('in', 'IN'), ('federal', 'JJ'), ('funds', 'NNS'), ("''", "''"), (',', ','), ('the', 'AT'), ('State', 'NN-TL'), ('Board', 'NN-TL'), ('of', 'IN-TL'), ('Education', 'NN-TL'), ('should', 'MD'), ('be', 'BE'), ('directed', 'VBN'), ('to', 'TO'), ('``', '``'), ('give', 'VB'), ('priority', 'NN'), ("''", "''"), ('to', 'IN'), ('teacher', 'NN'), ('pay', 'NN'), ('raises', 'NNS'), ('.', '.')]
print ('federal', 'JJ') in your_list 
```

使用列表理解语法，您可以对列表做更多有趣的事情，例如查看一个单词所有出现的所有标签：

```
print " ".join([wordclass for word, wordclass in your_list if word == 'federal']) 
```

最好构建一些对您使用的数据结构进行通用操作的函数，例如检查它是否包含单词或标签：

```
def hasWord(l, word):
    for w, wordclass in l:
        if w == word:
            return True
    return False

def hasTag(l, tag):
    for w, wordclass in l:
        if wordclass == tag:
            return True
    return False

if hasTag(your_list, 'JJ'): print your_list 
```

要在评论中回答您的问题：

```
for sentence in sentences:
    if ('federal', 'JJ') in sentence:
        print sentence 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T19:01:58.997

我的第一种方法是：

```
def find_tuple(input, l):
    for (e1, e2) in l:
        if e1==input[0] and e2==input[1]:
            return True
    return False 
```

它是直截了当但静态的，仅适用于您的问题。更一般但平等的方法：

```
def my_any(iterable, input, func):
    for element in iterable:
        if func(element, input):
            return True
    return False

input = ("federal","JJ")
l = [("It", "PPS"),("federal","JJ")]
print(my_any(l, input, lambda x, y: x[0]==y[0] and x[1]==y[1])) 
```

传入一个 lambda 函数来自己决定你喜欢什么布尔匹配。一个简单的方法是：

```
input = ("federal","JJ")
l = [("It", "PPS"),("federal","JJ")]
if input in l:
    print("True") 
```

如果您想更具体地解决您想解决的问题，那么提供具体建议会更容易。（即：您的返回类型是什么：布尔/字符串/元组..？）希望这会有所帮助。

干杯!

# highcharts - Highcharts 服务器端生成无法在 Windows 2008 服务器上运行

> ID：14942994
> 
> 赞同：1
> 
> 时间：2013-02-18T18:31:16.860
> 
> 标签：highcharts

我正在尝试在 windows 2008 rc2 服务器上使用 phantomjs 生成 highcharts 图像，但由于某种原因，命令退出而不生成 SVG。正在执行以下命令以生成图表，

```
E://BrandManagement//HighCharts//phantomjs//phantomjs E://BrandManagement//HighCharts//js//highcharts-convert.js -infile C:\Tomcatx64\temp\ILmZ47YS4358686612292944754.json -outfile C:\Tomcatx64\temp\ILmZ47YS4358686612292944754.svg -callback C:\Tomcatx64\temp\OpwX6N8a931179010207236357cb.js -constr  Chart 
```

如果我执行命令提示符，svg 会被创建，但不是来自 java 进程。如果有什么特别的事情需要处理。

问候，

阿尤什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T05:37:17.897

问题在于 Windows 权限，tomcat 作为服务运行，因此可能无法执行该命令。

转到服务>>属性>>安全并开始以管理员登录权限运行该服务，这就成功了。

问候， 阿尤什

# asp.net - _ViewStart 在自定义 ViewEngine 后未使用

> ID：14942995
> 
> 赞同：4
> 
> 时间：2013-02-18T18:31:18.500
> 
> 标签：asp.net, asp.net-mvc, viewengine

有谁知道 _ViewStart.cshtml 是否有理由在 MVC 3 中使用自定义 ViewEngine 不被选中？

我的观点现在住在

〜\用户界面\视图\

~\UI\视图\共享\

ViewStart 位于 ~\UI\Views_ViewStart.cshtml。

我已经清除了现有的 RazorViewEngine 并在 global.asax 中将其替换为我的，并且所有视图都正确解析，除非我在每个视图中单独指定它，否则不会应用任何布局页面。

我的引擎路径格式代码是：

```
 this.ViewLocationFormats = new[]
                                       {
                                           "~/UI/Views/{1}/{0}.cshtml", 
                                           "~/UI/Views/Shared/{0}.cshtml"
                                       };

        this.PartialViewLocationFormats = new[]
                                              {
                                                  "~/UI/Views/Shared/{0}.cshtml", 
                                                  "~/UI/Views/Shared/Partial/{0}.cshtml", 
                                                  "~/UI/Views/{1}/Partial/{0}.cshtml"
                                              };

        this.AreaMasterLocationFormats = new[] 
                                            { 
                                                "~/UI/Views/Admin/Shared/{0}.cshtml" 
                                            };

        this.AreaPartialViewLocationFormats = new[]
                                                  {
                                                      "~/UI/Views/Admin/Shared/{0}.cshtml", 
                                                      "~/UI/Views/Admin/Shared/Partial/{0}.cshtml"
                                                  };

        this.AreaViewLocationFormats = new[] { "~/UI/Views/Admin/{1}/{0}.cshtml" };

    this.MasterLocationFormats = new[]
    {
         "~/UI/Views/{1}/{0}.cshtml",
         "~/UI/Views/Shared/{0}.cshtml"
    }; 
```

在此先感谢，斯科特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T22:48:49.193

不幸的是，愚蠢这次赢了。我的自定义 ViewEngine 是基于我从一篇文章中引用的一些代码。在文章中，他们详细介绍了 CreateView 的覆盖。它有一个布尔参数 (runViewStartPages) 设置为 false，但由于它不是命名参数，所以我错过了它。

```
public class XyzViewEngine : RazorViewEngine
{    
    protected override IView CreateView(ControllerContext controllerContext, string viewPath, string masterPath)
    {
        return new RazorView(
            controllerContext,
            viewPath,
            masterPath,
            true, //<--- this drives whether to use _ViewStart pages.  It was set to false
            FileExtensions,
            ViewPageActivator
        );
    }
} 
```