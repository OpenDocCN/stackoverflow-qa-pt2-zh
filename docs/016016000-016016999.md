# StackOverflow 问答 16016000-16016999

# ruby-on-rails - Ruby on Rails API 查询

> ID：16016001
> 
> 赞同：0
> 
> 时间：2013-04-15T13:09:11.180
> 
> 标签：ruby-on-rails, api

我正在考虑创建一个可以访问此 API 的基本 Rails 应用程序[http://instructure.github.io/](http://instructure.github.io/)我已经查看了文档，但不幸的是找不到任何我可以掌握的地方。我对 Rails 很陌生，但我了解基础知识。我想知道是否有人知道一个好的教程或资源，我可以在其中学习如何构建调用第三方 API 并显示结果的 Rails 应用程序。我知道 Canvas Instructure API 是通过 JSON 请求实现的。任何信息将不胜感激。

我想指出，它使用 Oauth2 对请求进行 API 授权。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T15:36:11.737

我会看看[Httparty](http://httparty.rubyforge.org/) gem，它应该做你需要使用 api 的一切

这是使用[omniauth 和Httparty](https://github.com/quintonwall/omniauth-rails3-forcedotcom/wiki/Build-Mobile-Apps-in-the-Cloud-with-Omniauth,-Httparty-and-Force.com)连接到第3 方api的示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T15:47:31.453

您还可以查看 oauth-plugin - [https://github.com/pelle/oauth-plugin](https://github.com/pelle/oauth-plugin) - 它为您提供 OAuth Provider 和 Consumer。实施消费者应该会给你你需要的东西。

# python - Django：如何从时间帖子中获得时差？

> ID：16016002
> 
> 赞同：26
> 
> 时间：2013-04-15T13:09:14.103
> 
> 标签：python, django, datetime, django-models

假设我有一个模型类

```
 class Post(models.Model):
     time_posted = models.DateTimeField(auto_now_add=True, blank=True)

     def get_time_diff(self):
         timediff = timediff = datetime.datetime.now() - self.time_posted
         print timediff # this line is never executed
         return timediff 
```

我定义了一个get_time_diff来获取从发布到现在的时间差，根据文档，DateTimeField应该可以自动转换为日期时间，对吗？为什么 print 语句永远不会运行？如何提取时差？

此外，如果您得到时间差，是否有一种简单的方法可以将时间差转换为整数，例如总时间的秒数。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-04-15T13:15:53.860

您的代码已经在运行；返回一个[`datetime.timedelta`对象](http://docs.python.org/2/library/datetime.html#datetime.timedelta)。

要获取总*秒数*，您需要在结果上调用该[`.total_seconds()`方法](http://docs.python.org/2/library/datetime.html#datetime.timedelta.total_seconds)`timedelta`：

```
from django.utils.timezone import utc

def get_time_diff(self):
    if self.time_posted:
        now = datetime.datetime.utcnow().replace(tzinfo=utc)
        timediff = now - self.time_posted
        return timediff.total_seconds() 
```

`.total_seconds()`返回一个`float`值，包括微秒。

请注意，您需要使用*时区感知* `datetime`对象，因为 Django也`DateTimeField`处理时区感知`datetime`对象。请参阅[Django 时区文档](https://docs.djangoproject.com/en/stable/topics/i18n/timezones/#time-zones)。

演示`.total_seconds()`（带有幼稚`datetime`对象，但原理相同）：

```
>>> import datetime
>>> time_posted = datetime.datetime(2013, 3, 31, 12, 55, 10)
>>> timediff = datetime.datetime.now() - time_posted
>>> timediff.total_seconds()
1304529.299168 
```

因为这两个对象都是时区感知的（具有`.tzinfo`not 的属性`None`），所以它们之间的计算会处理时区，并且在考虑到任一对象的时区时，从另一个中减去一个将做正确的事情。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-15T13:27:26.020

假设您在模板中执行此操作，您还可以使用[timesince](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#timesince)模板标签。

例如：

```
{{ blog_date|timesince:comment_date }} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T13:13:28.680

你的代码

```
timediff = datetime.datetime.now() - self.pub_date 
```

应该努力获得时差。但是，这会返回[`timedelta`](http://docs.python.org/2/library/datetime.html#timedelta-objects)对象。要以秒为单位获得差异，请使用`.seconds`属性

```
timediff = datetime.datetime.now() - self.pub_date
timediff.seconds  # difference in seconds. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-07T08:32:18.833

以防万一你想把这个过程放在你的 Django 信号中。这是为我工作的那个。希望这可以帮助！

```
from django.db.models.signals import pre_save
from django.dispatch import receiver
from .models import YourModel
from datetime import datetime

@receiver(pre_save, sender = YourModel)
def beforeSave(sender, instance, **kwargs): 
     date_format = "%H:%M:%S"

     # Getting the instances in your model.
     time_start = str(instance.time_start)
     time_end = str(instance.time_end)

     # Now to get the time difference.
     diff = datetime.strptime(time_end, date_format) - datetime.strptime(time_start, date_format)

     # Get the time in hours i.e. 9.60, 8.5
     result = diff.seconds / 3600; 
```

# excel - 系列 VBA 散点图之间的不同颜色

> ID：16016003
> 
> 赞同：0
> 
> 时间：2013-04-15T13:09:19.647
> 
> 标签：excel, vba, graph

我有以下宏，它为三列绘制散点图。一列（AL13，向下）在 x 轴上。如何将其他两列（AK 和 AM）绘制到同一个散点上？还互有不同的颜色？谢谢你

```
Sub Graphing()

        Set rng4 = ActiveSheet.Range(Range("AP13"), Range("AV33"))

With ActiveSheet.ChartObjects.Add(Left:=rng4.Left, Width:=rng4.Width, Top:=rng4.Top, Height:=rng4.Height)
    .Chart.ChartType = xlXYScatter
    .Chart.HasLegend = False
    .Chart.Axes(xlCategory).TickLabels.Font.Size = 18
    .Chart.Axes(xlValue).TickLabels.Font.Size = 18
    Set srs = .Chart.SeriesCollection.NewSeries
    srs.Values = Range(Range("AK13"), Range("AK13").End(xlDown))
    srs.XValues = Range(Range("AL13"), Range("AL13").End(xlDown))
    srs.Values = Range(Range("AM13"), Range("AM13").End(xlDown)) 

End With
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:31:41.183

我将重新发布我在上面为您修改的代码，感谢您对我的信任:)

```
Sub Graphing()
'Declare all the variables to be used:'
Dim rng4 as Range
Dim srs as Series
Dim cht as Chart
Dim xVals as Range
Dim srsVals as Range 

'Set the chart's data range:'
Set rng4 = ActiveSheet.Range(Range("AP13"), Range("AV33"))

'Set the range variable to contain the series values'
' You can later modify this to include any number of columns, and the '
'  loop structure below will add each column as a series to the chart.'
Set srsVals = ActiveSheet.Range(Range("AL13"),Range("AM13").End(xlDown))

'Set the cht variable:'
Set cht= ActiveSheet.ChartObjects.Add(Left:=rng4.Left, Width:=rng4.Width, Top:=rng4.Top, Height:=rng4.Height).Chart

'Set the Range variable for xValues:
Set xVals = Range(Range("AK13"),Range("AK13").End(xlDown))

'Format the chart and add series to the chart by iterating over the columns in srsVals:'
With cht
    .ChartType = xlXYScatter
    .HasLegend = False
    .Axes(xlCategory).TickLabels.Font.Size = 18
    .Axes(xlValue).TickLabels.Font.Size = 18

    'Create the series in a loop
    For c = 1 to srsVal.Columns.Count
        Set srs = .SeriesCollection.NewSeries
        With srs
            .Values = xVals
            .XValues = Range(srsVals.Columns(c).Address)
            .Name = "Series " & c '<-- Modify as needed.'
        End With
    Next

End With
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T13:44:57.863

我发现如果我将系列设置为两个单独的系列，那么它将绘制两者并赋予它们不同的颜色。不确定这是否是最有效的方法，但它确实有效。

```
 Sub Graphing()
    'Declare all the variables to be used:'
    Dim rng4 as Range
    Dim srs as Series
    Dim cht as Chart
    Dim xVals as Range
    Dim srsVals as Range 

    'Set the chart's data range:'
    Set rng4 = ActiveSheet.Range(Range("AP13"), Range("AV33"))

    'Set the range variable to contain the series values'
    ' You can later modify this to include any number of columns, and the '
    '  loop structure below will add each column as a series to the chart.'
    Set srsVals = ActiveSheet.Range(Range("AL13"),Range("AM13").End(xlDown))

    'Set the cht variable:'
    Set cht= ActiveSheet.ChartObjects.Add(Left:=rng4.Left, Width:=rng4.Width, Top:=rng4.Top, Height:=rng4.Height).Chart

    'Set the Range variable for xValues:
    Set xVals = Range(Range("AK13"),Range("AK13").End(xlDown))

    'Format the chart and add series to the chart by iterating over the columns in srsVals:'
    With cht
        .ChartType = xlXYScatter
        .HasLegend = False
        .Axes(xlCategory).TickLabels.Font.Size = 18
        .Axes(xlValue).TickLabels.Font.Size = 18

        'Create the series in a loop
        For c = 1 to srsVal.Columns.Count
            Set srs = .SeriesCollection.NewSeries
            With srs
                .Values = xVals
                .XValues = Range(srsVals.Columns(c).Address)
                .Name = "Series " & c '<-- Modify as needed.'
            End With
        Next

    End With
End Sub 
```

# php - 用 json & PHP 显示谷歌图表

> ID：16016005
> 
> 赞同：1
> 
> 时间：2013-04-15T13:09:30.287
> 
> 标签：php, json

我正在尝试使用 php 从 mysql 数据生成谷歌图表。到目前为止，这是我的代码：get_json.php

```
<?php
/* $server = the IP address or network name of the server
 * $userName = the user to log into the database with
 * $password = the database account password
 * $databaseName = the name of the database to pull data from
 * table structure - colum1 is cas: has text/description - column2 is data has the value
 */
$con = mysql_connect('localhost','root','') ;

mysql_select_db('gcm', $con); 

// write your SQL query here (you may use parameters from $_GET or $_POST if you need them)
$query = mysql_query('SELECT count(name) As Subscribers,CAST(`created_at` AS DATE) As Date FROM gcm_users GROUP BY created_at ORDER BY created_at')or die(mysql_error());

$table = array();
$table['cols'] = array(
    /* define your DataTable columns here
     * each column gets its own array
     * syntax of the arrays is:
     * label => column label
     * type => data type of column (string, number, date, datetime, boolean)
     */
    // I assumed your first column is a "string" type
    // and your second column is a "number" type
    // but you can change them if they are not
    array('label' => 'Date', 'type' => 'string'),
    array('label' => 'Subscribers', 'type' => 'number')
);

$rows = array();
while($r = mysql_fetch_assoc($query)) {
    $temp = array();
    // each column needs to have data inserted via the $temp array
    $temp[] = array('v' => $r['Date']);
    $temp[] = array('v' => (int) $r['Subscribers']); 

    // insert the temp array into $rows
    $rows[] = array('c' => $temp);
}

// populate the table with rows of data
$table['rows'] = $rows;

// encode the table as JSON
$jsonTable = json_encode($table);

// set up header; first two prevent IE from caching queries
header('Cache-Control: no-cache, must-revalidate');
header('Content-type: application/json');

// return the JSON data
echo $jsonTable;
?> 
```

它显示正确：`{"cols":[{"label":"Date","type":"string"},{"label":"Subscribers","type":"number"}],"rows":[{"c":[{"v":"2013-04-14"},{"v":1}]},{"c":[{"v":"2013-04-15"},{"v":1}]}]}` 这是我显示的位置：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>
      Google Visualization API Sample
    </title>
    <script type="text/javascript" src="http://www.google.com/jsapi"></script>
    <script type="text/javascript">
      google.load('visualization', '1', {packages: ['corechart']});
    </script>
    <script type="text/javascript">
      function drawVisualization() {
        var jsonData = null;

        var json = $.ajax({
          url: "get_json.php", // make this url point to the data file
          dataType: "json",
          async: false,
          success: (
        function(data) {
            jsonData = data;
        })
        }).responseText;

        // Create and populate the data table.
        var data = new google.visualization.DataTable(jsonData);

        // Create and draw the visualization.
      var chart= new google.visualization.LineChart(document.getElementById('visualization')).
            draw(data, {curveType: "function",
                        width: 500, height: 400,
                        vAxis: {maxValue: 10}}
                );
      }

      google.setOnLoadCallback(drawVisualization);
    </script>
  </head>
  <body style="font-family: Arial;border: 0 none;">
    <div id="visualization" style="width: 500px; height: 400px;"></div>
  </body>
</html> 
```

但是当我运行这段代码时，我什么也没得到，它是空白的！我的错误在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T13:27:06.757

现在测试：

您的页面中没有包含 jQuery。将此行添加到您的中`<head>`，它可以工作。

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

如果您的 AJAX 调用需要更长的时间，可能会发生另一件事：`success: function()`在 AJAX 调用完成后调用您时，脚本的其余部分已经运行。该脚本不会等到 AJAX 调用完成，直到执行“创建和填充”部分。您必须将这些行放在`success: function()`.

```
<script type="text/javascript">
  function drawVisualization() {
    var jsonData = null;

    var json = $.ajax({
      url: "get_json.php", // make this url point to the data file
      dataType: "json",
      async: false,
      success: (
    function(data) {
        jsonData = data;

    // Create and populate the data table.
    var data = new google.visualization.DataTable(jsonData);

    // Create and draw the visualization.
  var chart= new google.visualization.LineChart(document.getElementById('visualization')).
        draw(data, {curveType: "function",
                    width: 500, height: 400,
                    vAxis: {maxValue: 10}}
            );

    })
    }).responseText;

  }

  google.setOnLoadCallback(drawVisualization);
</script> 
```

这样，您可以确保所有相关代码仅在 AJAX 调用完成后执行。

# java - 爪哇 txt文件数据的采集与操作

> ID：16016008
> 
> 赞同：-1
> 
> 时间：2013-04-15T13:09:32.983
> 
> 标签：java, string, collections, integer

我已经使用了这个链接中的信息，但是我在其他方面有很多问题。 [如何使用包含三列的 hashmap 读取文本文件？](https://stackoverflow.com/questions/13809645/how-can-i-read-text-file-with-hashmap-that-contain-three-columns)

我有 .txt 文件，其中包含如下数据：

```
1 WORD1 WORD11 WORD111

2 WORD2 WORD22 WORD222

3 WORD3 WORD33 WORD333 
```

我想得到什么：

*   k = 从 1 到 x 生成的数字（取决于 txt 文件中的行 - 我可以处理）
*   显示 k（作为 WORD1 或 WORD2 或...）我的意思是：`System.out.println(1) -> OUTPUT: WORD1`
*   之后从键盘读取“WORD11”和“WORD111”，如果输入的 WORD11 和 WORD111 与文件中的单词相同，则返回 true。

我不知道如何对这些数据进行操作。第二点似乎是最困难的，但我不知道应该使用什么集合（地图、数组、列表等）。任何信息都有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:17:43.363

简单的方法是定义一个代表一行的类，如下所示：

```
public class Row {
    private String col1;
    private String col2;
    private String col3;

    // ... getter & setter
} 
```

然后有一个使用这个类的地图：`Map<Integer, Row> rows = new HashMap<Integer,Row>()`.

为了改进课程，您可以保持列的灵活性。

```
public class Row {
    private List<String> cols = new ArrayList<String>();

    // ... getter & setter etc.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T13:18:33.317

使用数字、word1、word11 和 word111 创建一个对象，当您读取数据时，您会在集合或哈希图中创建此对象。当用户输入 word11, text 时，您只需要将文字与对象的成员进行比较。

像 Moritz Petersen 在他的回答中建议的简单对象。

# wordpress - 在 next_post_link 函数中排除类别帖子

> ID：16016010
> 
> 赞同：0
> 
> 时间：2013-04-15T13:09:48.757
> 
> 标签：wordpress, pagination

我的帖子属于赞助和其他多个类别。使用下一个按钮，我希望帖子仅出现在赞助类别中，而不是来自其他类别。

我尝试在`next_post_link`函数排除类别参数中排除其他类别，但没有奏效。

我们怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:37:42.227

在`next_post_link`函数中尝试也将参数设置`in_same_cat`为 true。

来自法典：

```
<?php next_post_link('format', 'link', 'in_same_cat', 'excluded_categories'); ?> 
```

范围：

> in_same_cat (boolean) (可选)
> 
> 指示下一篇文章是否必须与当前文章属于同一类别。如果设置为“true”，则仅显示当前类别的帖子。如果帖子同时属于父类别和子类别，或者多个类别，则下一个帖子链接将指向任何这些类别中的下一个帖子。

# android - 如何检测新 InputDevice 何时连接到 android 设备？

> ID：16016012
> 
> 赞同：0
> 
> 时间：2013-04-15T13:09:58.533
> 
> 标签：android, device, hid

我需要检测新设备何时连接到我的 android 设备。

目前我一直在定期 pooling `InputDevice.getDeviceIds()`，但这个解决方案有其自身的缺点。

# linux - 为什么 Linux Kernel 的 sysfs API 中的 store 函数需要返回使用的字节？

> ID：16016014
> 
> 赞同：2
> 
> 时间：2013-04-15T13:09:58.753
> 
> 标签：linux, kernel, sysfs

从文档中：

> *   store() 应该返回缓冲区中使用的字节数。如果整个缓冲区已被使用，则只需返回 count 参数。

它对这个值有什么作用？如果从大小为 FOO 的缓冲区读取 4 而不是 6 字节，有什么区别？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T13:22:13.863

您必须意识到，通过实现 sysfs 文件，您正试图表现得像一个文件。

让我们先从另一面来看这个。从手册页`fwrite(3)`：

> **返回值**
> fread() 和 fwrite() 返回成功读取或写入的项目数（即，不是字符数）。如果发生错误或到达文件结尾，则返回值是一个短项目计数（或零）。

更好的是，来自以下的手册页`write(2)`：

> 写入的字节数可能少于 count，例如，底层物理介质上的空间不足，或者遇到 RLIMIT_FSIZE 资源限制（参见 setrlimit(2)），或者调用被信号处理程序中断后写入少于 count 个字节。（另请参见管道 (7)。）

这意味着，为您的特定文件`store()`实现函数的另一端`write(2)`应该返回写入（即由您读取）的字节数，至少`write(2)`可以将该值返回给用户。

在大多数情况下，如果输入没有错误，您只需返回`count`确认您已阅读所有内容并且一切正常。

# image - 图案图像处理

> ID：16016022
> 
> 赞同：0
> 
> 时间：2013-04-15T13:10:13.627
> 
> 标签：image, opencv, image-processing, pattern-matching

我想做一个简单的应用程序来检测墙上的图案，如下图所示。 ![图案](https://i.stack.imgur.com/A09J4.jpg)

所以图案会贴在墙上。相机将旋转 360 度并识别图案。我问了我在 EEE 领域认识的人，他说我可以使用 OpenCV。但他说 OpenCV 只能识别 1 种模式。这是真的。

我是图像处理的新手。我希望有人能给我建议我应该如何处理这个项目。如果有什么有价值的参考，欢迎分享。您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:49:51.343

是的，这是真的，但不完全是。您只需要图像上的一种图案即可使用 Surf 等方法。但是您可以使用轮廓分析来识别像您的图像这样的图案。如果它们更复杂，您也可以使用 AdaBoost 来查找您的模式。

OpenCv 只是一个库，并且有一些图像处理方法。你可以使用最适合你的。

关于AdaBoost的教程很多，Surf/Sift/Orb/Brisk...轮廓分析比较复杂。

祝你好运！

# c# - 在任何应用程序中，持久层有什么用？

> ID：16016023
> 
> 赞同：45
> 
> 时间：2013-04-15T13:10:15.577
> 
> 标签：c#, .net

我必须创建一个应用程序，要求我在应用程序中创建一个持久层。该应用程序位于.net 中。我已经创建了一个业务层和一个表示层，但我不知道如何以及为什么应该创建一个持久层。

我用谷歌搜索并知道持久层通常用于存储和检索数据库中的数据。

谁能详细解释一下？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-04-15T13:18:57.233

您在数据库引擎和业务/应用程序逻辑之间构建 DAL（数据访问层）或任何其他类型的中间层的原因是，通过在两者之间添加此层，您将应用程序的其余/上层与您现在正在使用的特定数据库引擎/技术。

这有几个优点，比如更容易迁移到其他存储引擎，在单层中更好地封装数据库逻辑（更容易替换或修改，具体取决于您设计的跨层接口等...）

在这里看到我的答案，这是一个关于 ASP.NET MVC 和 EF 的示例，但解决方案和项目的结构实际上是技术独立的：[MVC3 和实体框架](https://stackoverflow.com/questions/7474267/mvc3-and-entity-framework/7474357#7474357)

还可以阅读一些文章以更好地理解这件事，例如： http: [//www.developerfusion.com/article/84492/net-and-data-persistence/](http://www.developerfusion.com/article/84492/net-and-data-persistence/)

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-04-15T13:16:12.427

持久层也称为数据访问层或其他术语。

它将获取和保存数据的内容与业务层分开。您这样做的原因是您的业务逻辑（应用程序中为您的数据操作执行繁重工作的部分）不依赖于特定类型的数据源。

需要将数据层编写为特定于数据库。因此，如果您使用 MySQL 来访问所有数据，那么您将为此编写 dataLayer。

如果在某个时候您决定迁移到 MongoDB，那么不要重写整个应用程序。您可以只重写数据访问部分以从 MongoDB 获取数据。由于业务逻辑并不关心您如何获取数据，只有您这样做，它和 Presenation 层才能保持原样。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-04-15T13:14:48.077

用非常简单的术语来说，持久层是一种**保存**和**检索**应用程序使用的项目的方法。

一个简单的例子是你有一个代表一个人（姓名、年龄和性别）的类。当您的应用程序运行时，它保存在内存中。但是，假设您希望该信息在您关闭并再次打开应用程序时可用。好吧，你需要一些方法来**保存**那个人，然后再**找回**它。这就是持久层的用武之地，它将把你的人写在“永久”的地方。

这可能是数据库、平面文件、注册表，具体取决于生命周期和要求等。

在您的持久层中，您将执行 CRUD（创建、读取、更新、删除）操作。通常针对数据库，因此您将**创建**一个新人（Fred Bloggs）。假设他们更改了他们的名称，您系统的另一个用户可能会**读取**记录并更改为 Fred Migins 并**更新**数据库。然后该客户离开该国家/地区，因此您将其**删除**。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2016-08-15T10:33:59.630

持久性 = 将记录读/写/删除到磁盘或数据库。

层=绝缘等。

持久层=通常意味着将读/写/删除逻辑与业务逻辑隔离。理想情况下，通过在业务逻辑和持久性模块之间放置几个（或单个）交互点。

我认为这是我们都做过的事情（保存到磁盘、数据库等），这只是一个花哨的学术术语，他们只是要求我们：

1.  确保持久性部分很好地组合在一起，
2.  理想情况下，业务逻辑（即网关模式）之间的交互点很少（或恰好是单个），
3.  所以将来也许我们想切换数据库类型或主机（即更小的范围——我们只需要绕过持久性部分来让它运行）。

干杯，

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-04-15T13:18:36.777

如果您没有将数据保存在某处，那么当您的应用再次打开时，它就不会再存在了。您可以按照您所说的将其保存到数据库（SQL、Oracle、PostGRE 等），或直接保存到磁盘（以二进制格式或纯文本等序列化）。

使用层来做到这一点是一个很好的做法。它减少了耦合（即意大利面条代码），并使维护更加容易。

我建议您阅读有关 Hibernate 和它的 .NET 表亲 NHibernate 的信息。

# ruby - 用于每个 3 个值的数据集的 Ruby 解决方案

> ID：16016025
> 
> 赞同：5
> 
> 时间：2013-04-15T13:10:17.363
> 
> 标签：ruby, arrays, hash

所以我没有太多`Ruby`知识，但需要编写一个简单的脚本。我将尝试详细解释我的困境，但如果您仍需要澄清，请告诉我。

我的脚本每组包含 3 个数字。比方说，例如，我们有每个人的这三条信息：`Age, Size, and Score`。所以，我需要有一种方法来评估一个人是否存在一定的年龄和体型。如果是这样，那么我想输出那个人的分数。

我知道跟踪此信息的唯一方法是创建`3 separate arrays`，每个都包含一个`information`. 我可以检查年龄是否包含在一个数组中，如果是，我可以找到它的索引（每个类别中的每个值都是唯一的——因此不会重复“**年龄**”、“**大小**”或“**分数**”）。然后我可以检查大小数组中相同索引处的值是否与指定大小匹配。如果是这样，我可以输出在同一索引处的第三个数组中找到的分数。我宁愿不这样做，而是将每个人的**年龄**、**体型**和**分数**保持在一起。

所以，我在这样的数组中尝试了数组：

```
testarray = [
  [27, 8, 92],
  [52, 12, 84]
] 
```

但是，问题在于我不确定如何访问这些子数组中的值。所以我知道我可以使用类似 testarray.include?(27) 的东西来检查主数组中是否存在 27，但是我将如何检查 27 和 8 是否是 testarray 子数组中的前两个值，如果是，然后输出 的第三个值`subarray`，92。

然后我尝试了一个哈希数组，如下所示：

```
testarrayb = [
{ :age => 27, :size => 8, :score => 92 },
{ :age => 52, :size => 12, :score => 84 }
] 
```

我知道我可以`testarrayb[0][:score]`用来获取 92，但我如何首先检查数组是否包含一个同时具有指定年龄和大小的哈希，如果是，则输出该哈希的分数？类似于`testarrayb[:age].include?(value)`检查每个哈希的年龄，然后检查相同哈希的大小。如果两者都匹配指定值，则输出该哈希的分数。

如果有人能指出我正确的方向，我将不胜感激。如果您建议这样做，请随意展示一种更有效且完全不同的技术。谢谢你的时间！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T16:28:41.570

为什么不创建一个简单的类来表示您的数据，例如使用`Struct`. 然后提供一些类方法来处理过滤。

```
Entry = Struct.new(:age, :size, :score) do
  # Holds the data (example)
  def self.entries; @entries ||= [] end

  # Example filtering method
  def self.score_by_age_and_size(age, size)
    entry = entries.find { |e| e.age == age && e.size == size }
    entry.score if entry
  end
end

# Add some entries
Entry.entries << Entry.new(27, 8, 92)
Entry.entries << Entry.new(52, 13, 90)

# Get score
Entry.score_by_age_and_size(27, 8) # => 92
Entry.score_by_age_and_size(27, 34) # => nil 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T15:14:55.677

这将返回一个满足条件的哈希数组，然后在返回的哈希数组中分配第一个哈希的分数。

```
# return an array of hashes that satisfy the conditions
array_of_hashes = testarrayb.select { |h| h[:age] == 27 && h[:size] == 8 }

# assign the score
score = array_of_hashes[0][:score] 
```

编辑：你可能想把它放在一个方法中

```
# use an instance variable to reference the initial array defined outside this method
@testarrayb = [{:age=>27, :size=>8, :score=>92}, {:age=>52, :size=>12, :score=>84}]

def find_person(age, size)
  array_of_hashes = @testarrayb.select { |h| h[:age] == age && h[:size] == size }

  # since values in each column are unique we can assume array size of 0 or 1
  # return false if not found otherwise return the score
  !array_of_hashes.empty? && array_of_hashes[0][:score]
end 
```

并这样称呼它：

```
find_person 27, 8
# => 92 

find_person 27, 7
# => false 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T16:48:47.037

从您的要求中我可以看出（*“我需要有一种方法来评估一个人是否存在具有特定年龄和大小”*，*“我如何首先检查数组是否包含具有指定年龄和大小的哈希"* )，您总是通过他们的年龄和大小对来识别一个人，并且您希望基于该对作为键来引用他们的分数。由于 Ruby 允许任何类型的 Object 作为 Hashes 中的键（或值），我们可以直接翻译：

```
# `scores` hash is structured { [age, size] => score, ... }
scores = {[27, 8] => 92, [52, 12] => 84} 
```

您可以询问是否存在具有特定年龄和尺寸对的人：

```
scores.include?([27, 8])  # => true
scores.include?([27, 7])  # => false
scores.include?([28, 8])  # => false
scores.include?([52, 12]) # => true 
```

您可以为一个人分配一个新分数（同样，由年龄/大小对标识）：

```
scores[[52, 12]] = 97
scores                    # => {[27, 8]=>92, [52, 12]=>97} 
```

或者当然，因为你想访问这个值，你总是可以在`nil`之后进行测试：

```
score = scores[[27, 8]]   # `score` is now `92`
if !score.nil?
  # Do something with `score`
end 
```

我更喜欢使用 Array 来表示一对，但另一种选择是使用 Hash，以便您可以为清楚起见命名元素而不必担心顺序：

```
scores = {{:age => 27, :size => 8} => 92, {:age => 52, :size => 12} => 84}
scores[{:size => 8, :age => 27}] # => 92 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-15T15:09:02.703

哈希的哈希值会为您解决问题吗？

```
testhash = {27 => {8 => 92}, 52 => {12 => 84}}
p testhash             # {27=>{8=>92}, 52=>{12=>84}}
p testhash[27][8]      # 92
p testhash[27][42]     # nil
testhash[27][42] = 99
p testhash             # {27=>{8=>92, 42=>99}, 52=>{12=>84}}
p testhash[27][42]     # 99 
```

只要年龄/尺寸对是唯一的，这应该是非常有效的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-15T14:04:48.657

```
def person_score (*input)
    testarray = [
    [27, 8, 92],
    [52, 12, 84]
    ]
        testarray.each_with_object("") do|i,mem| 
            h = Hash[*([:age,:size,:score].zip(i).flatten)]
            (h.values.first(2) == input) ? (return h[:score]) : ( mem.replace("age and size not matched"))
        end
end

p person_score(27,12)  #=> "age and size not matched" 
p person_score(27,8)   #=> 92
p person_score(52,44)  #=> "age and size not matched"
p person_score(52,12)  #=> 84 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-15T13:31:25.503

你可能会做这样的事情：

```
[
  { age: 27, size: 8,  score: 92 },
  { age: 52, size: 12, score: 84 }
].map { |e| e[:age] == 27 && e[:size] == 8 ? e[:score] : nil }.compact 
```

`map`将返回一个`array`带有块结果的新的（`e[:score]`如果条件匹配或`nil`不匹配，它将为您提供。`compact`然后将删除结果中不需要`nil`的`array`.

然而，这种行为听起来很适合它自己的类，因为我刚刚展示的内容包含很多硬编码的东西（尤其是选择条目的条件），这很糟糕。也许尝试为此找出一个不错的课程？

# localization - 在 Orchard 中本地化内容类型的名称

> ID：16016032
> 
> 赞同：2
> 
> 时间：2013-04-15T13:10:50.037
> 
> 标签：localization, orchardcms, orchardcms-1.6

如何本地化内置内容类型的名称，在本例中为“页面”？

我通过使用相关的 po 文件等对管理界面的其他部分进行了本地化，因此我对该过程相当熟悉。

当我找不到其他方法时，我将“页面”的“显示名称”重命名为我想要的名称。在这种情况下哪个有效，因为该网站只能以一种语言运行，但这显然不是“正确”的做法，所以知道如何正确地做会很有趣..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T20:19:02.497

您目前无法本地化内容类型、部分和字段显示名称。有一些错误打开，但尚未修复。

# r - 等效于 bash 命令 **time**

> ID：16016033
> 
> 赞同：2
> 
> 时间：2013-04-15T13:10:50.537
> 
> 标签：r, time

如何计算 R 脚本的运行时间？

我基本上想要一个等效于 bash 命令**time**。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T13:13:22.050

使用`system.time`，或查看`microbenchmark` 包装。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T13:50:06.710

您还可以使用包中的`benchmark`功能`rbenchmark`。[在此处](http://cran.r-project.org/web/packages/rbenchmark/rbenchmark.pdf)查看帮助文件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T00:14:01.387

如果它是一个无法评估的复杂脚本`system.time()`，请尝试：

```
start_time = proc.time()
<your script here>
end_time = proc.time()
print(end_time - start_time) 
```

显然，您需要将第 1-3 行尽可能靠近地运行。

[这里](https://stat.ethz.ch/pipermail/r-help/2010-July/247399.html)有一些例子。

# com - 发布版本引入了 COM 对象的错误

> ID：16016035
> 
> 赞同：1
> 
> 时间：2013-04-15T13:10:58.460
> 
> 标签：com, build, rcw

我有一个类库，我在其中使用[OutlookStorage.cs](http://www.codeproject.com/Articles/32899/Reading-an-Outlook-MSG-File-in-C)来阅读（Outlook .msg）电子邮件和该电子邮件中的附件。我使用自定义文档查看器打开每个附件，该查看器将附件中的任何内容转换为 PDF。在调试模式下，这完美地工作。在发布模式下，读取 1 个附件后，会引发 COM 异常，指出“无法使用已与其底层 RCW 分离的 COM 对象”。

使发布构建工作的属性是： 1\. 必须禁用优化代码。2\. 在 Advanced Build Settings 中，Debug Info 设置必须设置为 Full。

我试图通过添加如下属性来禁用该方法的优化：

```
[MethodImpl(MethodImplOptions.NoOptimization)] 
```

但是，如果仍然启用了发布模式设置的优化代码选项，这并没有什么不同。

这是从 COM 对象读取流的代码：

```
 foreach (OutlookStorage.Attachment attachment in _attachments)
    {
      using (Stream stream = new MemoryStream())
      {
        stream.Write(attachment.Data, 0, attachment.Data.Length);
        string fileExtension = Path.GetExtension(attachment.Filename).Replace(".", "");
        Pdf document = new Pdf(stream, fileExtension);
        DocumentDetailControl document = new DocumentDetailControl(document);
        OpenInNewDialog(document);
      }
    } 
```

_attachments 是一个通用列表，OpenInNewDialog 在文档打开后返回（无需等待用户干预）。

有没有人可以对此有所了解？我可以在代码中做些什么来防止发布版本引入这个错误吗？

# c# - 模拟是运算符

> ID：16016037
> 
> 赞同：2
> 
> 时间：2013-04-15T13:11:04.270
> 
> 标签：c#, unit-testing, generics, rhino-mocks

是否可以模拟`is`操作员？在我的代码中，我的逻辑取决于它是什么类型的类，但值本身作为公共接口存储在类中。

基本上，我想做的是`true`通过将模拟定义为 of 来返回，`IValue`但返回`true``is Value`

```
public class Value : IValue
{
}

public interface IValue
{
}
public class Tester
{
    public bool CheckIfValue(IValue value)
    {
        return value is Value;
    }
}

[Test]
public void TestIfValue()
{
    Tester tester = new Tester();

    var value = MockRepository.GenerateStub<IValue>();
    // can I add anything here which will make CheckIfValue return true?

    bool isValue = tester.CheckIfValue(value);
    Assert.That(isValue, Is.True);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T13:21:41.763

不，不可能“模拟”`is`操作员，`is`在以下情况下只会返回 true：

1.  被检查的对象是被检查类型的一个实例。
2.  被检查的对象是被检查类型的子类。
3.  被检查的对象实现被检查的接口类型。

您的设计很糟糕，`IValue`如果您确实需要它作为`Value`.

关键是依赖于抽象而不是实现，这就是为什么你有`IValue`接口开始的原因。`Tester`不应该关心它是否得到 a或其他任何东西`Value`，`MockValue`它应该只取决于`IValue`接口中定义的方法和属性。

创建模拟的重点是`Tester`在特定场景中测试您的类的行为，模拟允许您指定该`Tester`测试接收的对象的行为，而无需创建大量虚拟类，例如`class FakeValueWhichDoes... : IValue`为了测试它。

# python - Django：openpyxl 将工作簿保存为附件

> ID：16016039
> 
> 赞同：22
> 
> 时间：2013-04-15T13:11:07.857
> 
> 标签：python, django, excel, xlsx, openpyxl

嗨，我有一个快速的问题。我在互联网上没有找到答案，也许你们中的某个人可以帮助我。

所以我想将工作簿另存为附件，但我不知道如何让我们看一个例子：

```
 from openpyxl import Workbook
    from openpyxl.cell import get_column_letter
    wb = Workbook(encoding='utf-8')
    dest_filename = 'file.xlsx'
    ws = wb.worksheets[0]
    ws.title = "range names"
    for col_idx in xrange(1, 40):
        col = get_column_letter(col_idx)
        for row in xrange(1, 600):
            ws.cell('%s%s'%(col, row)).value = '%s%s' % (col, row)
    ws = wb.create_sheet()
    ws.title = 'Pi'
    ws.cell('F5').value = 3.14 
```

然后我尝试了：

```
response = HttpResponse(wb, content_type='application/vnd.ms-excel')
response['Content-Disposition'] = 'attachment; filename="foo.xls"'
return response 
```

它确实返回 xlsx 文件，但在文件中只有对象地址而不是文件的内容：

```
<openpyxl.workbook.Workbook object at 0x00000000042806D8> 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-04-15T13:50:36.297

试试看：

```
from openpyxl.writer.excel import save_virtual_workbook
...
response = HttpResponse(save_virtual_workbook(wb), content_type='application/vnd.ms-excel') 
```

`save_virtual_workbook`专为您的用例而设计。这是一个文档字符串：

> """返回一个内存工作簿，适合 Django 响应。"""

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-15T13:31:43.820

我通常使用

```
ws = wb.add_sheet("Pi") 
```

代替

```
ws = wb.create_sheet()
ws.title = "Pi" 
```

此外，您可以尝试这样做：（请参阅[文档](https://secure.simplistix.co.uk/svn/xlwt/trunk/xlwt/doc/xlwt.html?p=4966)）

```
wb.save(stream) 
```

然后在 HttpResponse 中使用流。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-07-27T19:13:08.640

至少在 django/python/openpyxl 的某些版本上，给定的解决方案不起作用。请参阅[https://bitbucket.org/openpyxl/openpyxl/issues/657/save_virtual_workbook-generates-junk-data](https://bitbucket.org/openpyxl/openpyxl/issues/657/save_virtual_workbook-generates-junk-data)

简单的工作解决方案：

```
wb = Workbook(write_only=True, encoding='utf-8')
ws = wb.create_sheet()
for row in data:
    ws.append([str(cell) for cell in row])
response = HttpResponse(content_type='application/vnd.ms-excel')
wb.save(response) 
```

这里发生的是 Django 的 HttpResponse 是一个类似文件的对象。`Workbook.save()`可以采用类似文件的对象。（在内部，它使用[zipfile](https://docs.python.org/3/library/zipfile.html)，它采用文件名或类似文件的对象。）

如果您在内存中操作文件，这是最简单且可能最有效的解决方案。流式响应实际上没有意义，因为数据不是使用生成器创建的。即使 save_virtual_workbook 工作，它写入的数据在可读之前作为一个块生成。

另一种选择是创建一个 NamedTemporaryFile （来自[tempfile](https://docs.python.org/3/library/tempfile.html)或 Django 的包装器），将其传递给`Workbook.save()`，然后使用[FileResponse](https://docs.djangoproject.com/en/1.9/ref/request-response/#fileresponse-objects)从文件系统而不是从内存中流式传输。

# c# - C# FtpWebRequest 异步下载

> ID：16016046
> 
> 赞同：-2
> 
> 时间：2013-04-15T13:11:27.967
> 
> 标签：c#, asynchronous, download, ftpwebrequest

我看到了很多关于如何异步上传的示例，但没有太多关于如何从 FTP 服务器异步下载的信息。

有人可以在 c# 中提供一个使用 FtpWebRequest 从 FPT 服务器异步下载文件的小示例吗？

我有要从 ftp 服务器下载的文件的完整路径，我需要使用 1 个连接来开始异步下载到我的本地机器，所以我不需要逐个文件打开/关闭每个文件的连接。线程不是一个选项，因为我只想要（出于性能原因）1 个到 ftp 服务器的连接，并且我的所有下载都使用现有连接（或连接？？）进行下载。

我阅读了 MSDN 文档，但不确定如何正确使用 ConnectionGroupName 或内置 FtpWebRequest 连接池等属性，这些属性假设与异步操作一起工作以提高性能。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T01:46:28.567

最简单的方法是使用[此](http://msdn.microsoft.com/en-us/library/ms229711.aspx)链接中提到的代码并在单独的线程中使用它。您不必担心在 C# 中创建异步处理程序。事实上，您可以简单地将链接上的代码放入一个方法中并使用它：

```
YourClass c = new YourClass();
Thread thread = new Thread(c.method_to_download);
thread.Start();

// continue with WinForms application.

/* You can also do the following */

YourClass c = new YourClass();
c.Execute();

// where YourClass is defined as :

public class YourClass() {

    public YourClass() {}

    public void Execute() {
        // code to execute the download in a try-catch block.
    }
} 
```

YourClass 是一个自定义类，您可以使用它来执行下载。当从 finally 块完成下载时，它可以选择带有参数的简单事件。您的调用代码可以通过事件处理程序接受此事件并找出下载结果。

这只是您可以处理此问题的两种方法，还有其他方法，例如使用后台线程或使用 FtpWebRequest 类的异步回调，但它们都可以达到相同的结果。

# c++ - STD 错误分配异常

> ID：16016051
> 
> 赞同：0
> 
> 时间：2013-04-15T13:11:40.310
> 
> 标签：c++, vector, bad-alloc

该程序严格只读取字母，并按原样推回向量。但是，文本文件就像任何其他文本文件一样。

我遇到过这个STD bad alloc异常，如下。

```
char keyArray[5][5];

keyArray[0][1] = 'a';
keyArray[0][2] = 'b';
keyArray[0][3] = 'c';
keyArray[0][4] = 'd';
keyArray[0][5] = 'e';
keyArray[1][1] = 'f';
keyArray[1][2] = 'g';
keyArray[1][3] = 'h';
keyArray[1][4] = 'i';
keyArray[1][5] = 'k';
keyArray[2][1] = 'l';
keyArray[2][2] = 'm';
keyArray[2][3] = 'n';
keyArray[2][4] = 'o';
keyArray[2][5] = 'p';
keyArray[3][1] = 'q';
keyArray[3][2] = 'r';
keyArray[3][3] = 's';
keyArray[3][4] = 't';
keyArray[3][5] = 'u';
keyArray[4][1] = 'v';
keyArray[4][2] = 'w';
keyArray[4][3] = 'x';
keyArray[4][4] = 'y';
keyArray[4][5] = 'z';

ifstream readFile;
vector<char> paddedVector;
char c;
int number_of_chars = 0;
readFile.open ("test.txt", ifstream::in);
while(  !readFile.eof() )
{
    if(readFile.peek() == -1)
        break;
    c = readFile.get();
    if(!isalpha(c))
        continue;

    if(c != '\n') //bad alloc here
    {
        ++number_of_chars;
        paddedVector.push_back(c); //std bad alloc happens here
    }
} 
```

请多多指教。

*编辑*当我拿走 keyArray 部分时，它工作正常。为什么会这样？我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T13:40:04.267

您的问题是以下 5 行：

```
keyArray[?][5] = '?'; 
```

您在`keyArray`数组边界之外的位置进行索引。它可能已经覆盖了`paddedVector`对象中的内部指针。反过来，当向量尝试（重新）分配内存时，您会收到此异常，因为`delete[]`无法理解该地址的来源。

* * *

请注意，出于同样的原因，您从 开始您的第一个索引`0`，您也应该从`0`！因此，两个索引都应该在范围内`[0, 5)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T13:38:55.690

```
char keyArray[5][5];
// ...
keyArray[4][5] = 'z'; 
```

以上写入超出了数组的末尾。`keyArray`are 的有效索引`keyArray[0..4][0..4]`。您的程序处于未定义的行为领域。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T13:40:35.040

您错误地寻址内部数组。它们也是基于 0 的，所以格式应该是

```
keyArray[0][0] = 'a'
.
.
.
keyArray[4][4] = 'z' 
```

# java - Hibernate Reverse Engineering - 如何对链接/连接表进行反向工程以在每个主要类中包含一个集合

> ID：16016053
> 
> 赞同：0
> 
> 时间：2013-04-15T13:11:42.277
> 
> 标签：java, hibernate, reverse-engineering

我的数据库中有 3 个表：User、UserRole 和 UserRoleMapping。UserRoleMapping 包含用户与其角色之间的关联。

在我的 Java Wicket 应用程序中，我想使用休眠逆向工程来生成类和 xml 映射（我使用的是 netbeans）。这样做时，我希望逆向工程在每个基类中创建一个集合，如下所示：

```
User {
   ...

   Set <UserRole> userroles = new HashSet(0);

} 
```

和

```
UserRole {
    ...
    Set <User> users = new HashSet(0);

} 
```

我需要在 hibernate.reveng.xml 类中做什么才能做到这一点？

注意：我没有使用任何向导来生成 reveng 文件，也没有使用 eclipse。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:28:05.933

UserRoleMapping 必须

1.  有用户 ID 字段
2.  有roleid字段
3.  没有任何其他字段
4.  必须是 userid 和 roleid 的唯一约束
5.  两个字段都必须是“非空”
6.  两个字段都必须具有它们相对表的 pk 的外键（仅限 innodb）。

# windows - 可以直接在 Windows 中调用任务吗？

> ID：16016058
> 
> 赞同：1
> 
> 时间：2013-04-15T13:12:07.527
> 
> 标签：windows, assembly, x86

我知道在 x86 处理器中，您可以通过执行引用 TSS 描述符的`call`or来直接调用任务。`jmp`

但我从未听说过在 Windows 中以这种方式直接调用不同的进程。这是操作系统隐藏/未使用的处理器功能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T13:19:04.503

您不能直接从用户模式代码访问或使用 TSS。这受到 CPU 和操作系统的保护。您只能通过在内核模式下执行的代码来做到这一点。

此外，进程不会为了调用或跳转到它们而公开它们的 TSS（顺便说一句，整个系统中可能只有一个 TSS），它们也不是为这种用途而设计的（进程）。你看，进程不是要调用的子程序。并且调度程序不使用基于 TSS 的进程间切换。

所以，没有听到这个是正常的，因为这不是在实践中正在做的事情。

# c++ - 使用 QXmlStreamWriter 编写 XML 代码

> ID：16016059
> 
> 赞同：2
> 
> 时间：2013-04-15T13:12:08.330
> 
> 标签：c++, xml, qt, qstring

如何在 XML 中编写 XML 文本？

```
QXmlStreamWriter xmlWriter(&file);
(...)
QString xmlCode = "This is a <b>XML</b> code. And should be written as is it";
xmlWriter.writeStartElement("start");
xmlWriter.writeCharacters(xmlCode);
xmlWriter.writeEndElement(); 
```

输出应该是：

```
<start>
    This is a <b>XML</b> code. And should be written as is it
</start> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-05-14T21:33:37.873

是的，你可以直接[在QXmlStreamWriter的](https://doc.qt.io/qt-5/qxmlstreamwriter.html#device)设备上使用write方法；例子：

```
QXmlStreamWriter xmlWriter(&file);
xmlWriter.writeStartElement("start");
xmlWriter.writeCharacters("");  // This will open and close <start> tag correctly
xmlWriter.device()->write(xmlCode.toLatin1().constData(), xmlCode.length());
xmlWriter.writeEndElement(); 
```

这里也有人建议：[http ://www.qtcentre.org/threads/60045-writing-raw-data-into-xml-sub-node](http://www.qtcentre.org/threads/60045-writing-raw-data-into-xml-sub-node)

# python - 在运行时更改蓝图或重新加载烧瓶应用程序

> ID：16016060
> 
> 赞同：4
> 
> 时间：2013-04-15T13:12:12.010
> 
> 标签：python, flask

我正在编写一个支持插件架构的 Flask 应用程序。每个插件都位于一个单独的文件夹中，并且是一个模块，它至少具有一个类，该类是一个类的子`Plugin`类。出于安全原因，我不想在烧瓶应用程序最初运行时加载所有插件。相反，用户可以从烧瓶应用程序中启用插件。一旦他这样做了，我们就会在数据库中存储一个备忘录，将应用程序列入白名单以供加载。但是，我们仍然必须记住哪些插件被禁用并证明了这些插件的视图。我通过为未启用且不加载任何自定义代码的插件创建一个虚拟类来做到这一点。

每个插件都有自己的蓝图。我们在加载插件时注册它。蓝图还定义了启用插件的路线。整个事情看起来像这样：

```
for plugin_name in os.listdir(plugin_dir):
    plugin_path = os.path.join(plugin_paths, plugin_name)
    module_name = "plugins.{}.__init__".format(plugin_name)
    plugin_enabled = ask_db_whether_plugin_is_enabled(plugin_name)

    if os.path.isdir(plugin_path) and plugin_enabled:
        module = __import__(module_name)
        for plugin in load_plugins_from_module(module):
            app.register_blueprint(plugin.blueprint, url_prefix='/plugins')
    else:
        PluginCls = type(identifier, (Plugin, ), {})
        disabled_plugin = PluginCls()
        app.register_blueprint(disabled_plugin.blueprint, url_prefix='/plugins') 
```

`load_plugins_from_module`看起来像这样：

```
def load_plugins_from_module(module):
    def is_plugin(c):
        return inspect.isclass(c) and \
               issubclass(c, Plugin) and \
               c != Plugin

    for name, objects in inspect.getmembers(module, lambda c: inspect.ismodule(c)):
        for name, PluginCls in inspect.getmembers(objects, is_plugin):
            plugin = PluginCls()
            yield plugin 
```

现在问题如下：当我将插件更改为启用时，我基本上想重新运行

```
module = __import__(module_name)
for plugin in load_plugins_from_module(module):
    app.register_blueprint(plugin.blueprint, url_prefix='/plugins') 
```

对于该插件的模块，使其变为活动状态并注册已在子类插件中定义的所有路由。这将引发一个`AssertionError`因为我无法在运行时更改蓝图。什么是一个好的解决方法？我可以从应用程序内重新加载应用程序吗？我可以在运行时修改现有的蓝图吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T20:55:13.967

我不确定如何在运行时修改应用程序对象，但是您可以尝试另一种方法来满足您的需要。

*   创建一个名为“插件”的表，其中包含 2 列：

    ```
    Field 1: Blueprint name

    Field 2: isActive 
    ```

*   为用户提供一个界面，他们可以在其中“激活”所需的插件。您可以根据需要控制对它的访问。因此，您可以编写一个视图，例如：

    ```
    @login_required
    def activate_plugin(name):

    #whatever code is needed to activate the flag in Plugins table. 
    ```

*   蓝图可以有一个 before_request() 方法，您可以使用它来检查插件/蓝图是否已启用。如果未启用，则返回 404 或任何代码。

    ```
    @blueprintname.before_request
    def check_if_active(blueprintname):

        is_active = some_function_that_checks_plugin_active_flag()
        if is_active:
          #Normal processing
        else:
            abort(404) 
    ```

*   这样，对蓝图视图的每个请求都会在返回响应之前首先检查它是否处于活动状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T20:03:34.770

我不确定你是否需要把这个复杂化。

您可以简单地为要启用的插件设置配置选项。您可以在“Start_app()”方法中根据该配置注册您的蓝图。

您还可以动态设置配置选项以从某些文件夹/文件继承，例如使其更具动态性。

插件通常由开发人员提供，因此配置选项并不繁琐，除非您尝试构建每个随机用户都可以修改您的网站的东西——这可能会带来巨大的安全问题。

> 出于安全原因，我不想在烧瓶应用程序最初运行时加载所有插件。

我不确定这一点。不允许用户手动启动插件，这会带来更多的安全风险（因此，如果用户能够秘密上传代码，然后他现在可以启用它们）。

您可以制作一个像 WordPress 一样支持插件的 CMS，只需在用户单击“激活插件”之前不路由插件的 url

# java - 边框布局未占用所有可用空间

> ID：16016064
> 
> 赞同：1
> 
> 时间：2013-04-15T13:12:18.933
> 
> 标签：java, swing, user-interface

我是新手，我怀疑这个问题与 BoxLayout 有关。我正在尝试在框架顶部一个接一个地制作一系列文本字段和标签。这是我的代码：

```
public static void main(String[] args) {
    JFrame frame = new JFrame("New Message");
    frame.setSize(100, 100);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    JTextArea textArea = new JTextArea();
    frame.add(textArea, BorderLayout.CENTER);

    JPanel list = new JPanel();
    list.setLayout(new BoxLayout(list, BoxLayout.Y_AXIS));
    frame.add(list, BorderLayout.NORTH);

    String[] labels = {"To: ", "Cc: ", "Bcc: ", "Subject: "};
    for (int i = 0; i < labels.length; i++) {
        JLabel l = new JLabel(labels[i]);
        JTextField f = new JTextField();
        JPanel p = new JPanel();
        p.add(l, BorderLayout.WEST);
        p.add(f, BorderLayout.CENTER);
        list.add(p);
    }

    frame.pack();

    frame.setVisible(true);

} 
```

这是结果： ![在此处输入图像描述](https://i.stack.imgur.com/R8Q9I.png)

我想要的是 To、Cc、Bcc 和 Subject 一直在左边，而 TextField 占据了其余的空间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T13:59:07.793

一些旁注：

*   通过将 UI 初始化包装在一个`SwingUtilities.invokeLater`
*   `JTextField`为 a 指定列数，为 a 指定行数和列数总是一个好主意`JTextArea`
*   `setSize()`如果你在之后打电话，打电话是没用的`pack()`。一般来说，忘记`setSize()/setLocation/setBounds()`在任何 Swing 组件上使用（将所有这些留给 LayoutManager 的）

`GridBagLayout`在这里做得很好。`GroupLayout`也可以工作。

看这个例子：

```
import java.awt.BorderLayout;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Insets;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;

public class Mail {

    protected void initUI() {
        JFrame frame = new JFrame("New Message");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JPanel list = new JPanel(new GridBagLayout());
        frame.add(list, BorderLayout.CENTER);
        GridBagConstraints labelGBC = new GridBagConstraints();
        labelGBC.insets = new Insets(3, 3, 3, 3); // Put some space between elements for nicer look
        labelGBC.anchor = GridBagConstraints.WEST; // Align left within its cell
        GridBagConstraints fieldGBC = new GridBagConstraints();
        fieldGBC.gridwidth = GridBagConstraints.REMAINDER; // Last element of the row
        fieldGBC.weightx = 1.0; // Cell takes up all extra horizontal space
        fieldGBC.fill = GridBagConstraints.HORIZONTAL; // Fill the cell horizontally
        fieldGBC.insets = new Insets(3, 3, 3, 3); // Put some space between elements for nicer look
        String[] labels = { "To: ", "Cc: ", "Bcc: ", "Subject: " };
        for (int i = 0; i < labels.length; i++) {
            JLabel l = new JLabel(labels[i]);
            JTextField f = new JTextField(50);
            list.add(l, labelGBC);
            list.add(f, fieldGBC);
        }
        GridBagConstraints taGBC = new GridBagConstraints();
        taGBC.gridwidth = 2;
        taGBC.weightx = 1.0; // Cell takes up all extra horizontal space
        taGBC.weighty = 1.0; // Cell takes up all extra vertical space
        taGBC.fill = GridBagConstraints.BOTH; // Fill cell in both direction
        taGBC.insets = new Insets(3, 3, 3, 3); // Put some space between elements for nicer look
        JTextArea textArea = new JTextArea(10, 80);
        list.add(new JScrollPane(textArea), taGBC);

        frame.pack();

        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new Mail().initUI();
            }
        });

    }
} 
```

结果

![在此处输入图像描述](https://i.stack.imgur.com/0KW4H.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T13:16:09.737

尝试`java.awt.FlowLayout`查看一个组件旁边的另一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T13:24:28.657

您可以尝试`BorderLayout`在每个上设置一个`JPanel p`：

```
public static void main(String[] args) {
    JFrame frame = new JFrame("New Message");
    frame.setSize(100, 100);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    JTextArea textArea = new JTextArea();
    frame.add(textArea, BorderLayout.CENTER);

    JPanel list = new JPanel();
    list.setLayout(new BoxLayout(list, BoxLayout.Y_AXIS));
    frame.add(list, BorderLayout.NORTH);

    String[] labels = {"To: ", "Cc: ", "Bcc: ", "Subject: "};
    for (int i = 0; i < labels.length; i++) {
        JLabel l = new JLabel(labels[i]);
        JTextField f = new JTextField();
        JPanel p = new JPanel(new BorderLayout());
        p.add(l, BorderLayout.WEST);
        p.add(f, BorderLayout.CENTER);
        list.add(p);
    }

    frame.pack();

    frame.setVisible(true);

} 
```

# c# - 根据操作系统或框架跳过方法的编译

> ID：16016065
> 
> 赞同：0
> 
> 时间：2013-04-15T13:12:19.230
> 
> 标签：c#, .net, visual-studio-2008, compact-framework

在 Visual Studio 2008 中，我有一个在同一解决方案中的两个项目之间共享的类。

我添加了一些对“ImageConverter”类的调用，这些调用在 Full .Net 框架上可用，但在 Compact Framework 上不可用。

它仅用于完整的框架项目，并且编译得很好。但是当我编译 Compact Framework 项目时，它显然会出错，因为这个类不可用。

如果它是 Compact Framework 或 WinCE 目标项目，是否有办法让编译器跳过方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T13:20:27.300

You can use conditional compilation or preprocessor directives like

```
#if CE
 ....
#else
 ...
#endif 
```

You can define a set of active directives in project properties, for each build configuration.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:20:46.237

I found the solution to the problem.

In the project properties under the "Build" tab you have "Conditional compilation symbols". Add a symbol here eg. WindowsCE

Inside your code you can now use the #if #endif to group parts of code to be skipped.

Example.

```
#if !WindowsCE

    // Some WindowsCE unsupported code here. 

#endif 
```

The compiler will now skip this section.

# python - 使用 theano 时 Django 服务器超时

> ID：16016067
> 
> 赞同：0
> 
> 时间：2013-04-15T13:12:26.840
> 
> 标签：python, django

我想部署一个基于 django 的网站，使用 theano 进行科学计算。但是只有一行

```
import theano 
```

使服务器超时。服务器使用 Apache2 和 mod_wsgi。

如果我删除了导入 theano 的行，它工作正常。我想知道原因是什么。

顺便说一句，如果我通过简单地运行在本地测试网站

```
manage.py runserver 
```

即使导入 theano 库，它也能正常工作。

请问有人知道原因吗？:(

（环境为ubuntu-server 12.04 LTS）

这是apache的error.log：

```
[Mon Apr 15 21:53:50 2013] [warn] mod_wsgi: Compiled for Python/2.7.2+.
[Mon Apr 15 21:53:50 2013] [warn] mod_wsgi: Runtime using Python/2.7.3.
[Mon Apr 15 21:53:50 2013] [notice] Apache/2.2.22 (Ubuntu) DAV/2 SVN/1.6.17 PHP/5.3.10-1ubuntu3.6 with Suhosin-Patch mod_ssl/2.2.22 OpenSSL/1.0.1 mod_wsgi/3.3 Python/2.7.3 configured -- resuming normal operations 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-11T09:05:21.697

通常是由于以下描述的：

*   [http://code.google.com/p/modwsgi/wiki/ApplicationIssues#Python_Simplified_GIL_State_API](http://code.google.com/p/modwsgi/wiki/ApplicationIssues#Python_Simplified_GIL_State_API)

# java - BluetoothConnectionException / 无法连接到蓝牙设备

> ID：16016069
> 
> 赞同：0
> 
> 时间：2013-04-15T13:12:31.003
> 
> 标签：java, bluetooth, bluecove

我无法让我的 java 应用程序连接到特定的蓝牙设备。该设备是一个自建的东西，工作正常。到目前为止，我的应用程序使用串行端口连接到设备，效果很好。不好的是我无法自动检测设备连接到哪个 COM 端口。因此，用户必须在设备管理器中查找并手动输入。几周后，我编写了一个连接到同一设备的安卓应用程序。这使用了直接的蓝牙连接，并且一切运行良好，以至于我想在我的桌面应用程序中使用 bluecove 库进行尝试（仅仅是因为它是免费的，而且似乎是我需要的）。

我能够发现设备、发现服务并从该服务中检索 url。到目前为止一切顺利，但是当我尝试根据我在网上找到的几个示例打开连接时，它总是在`Connector.open(url)`我的代码部分给我一个 BluetoothConnectionException：

```
String url = service.getConnectionURL(ServiceRecord.NOAUTHENTICATE_NOENCRYPT, false);
// url = "btspp://001203280265:1;authenticate=false;encrypt=false;master=false";
StreamConnection conn = (StreamConnection) Connector.open(url); 
```

例外情况如下：

```
javax.bluetooth.BluetoothConnectionException: Failed to connect; [10051] Ein Socketvorgang bezog sich auf ein nicht verfügbares Netzwerk.
// translation: A socket operation was attempted to an unreachable network. This usually means the local software knows no route to reach the remote host.
at com.intel.bluetooth.BluetoothStackMicrosoft.connect(Native Method)
at com.intel.bluetooth.BluetoothStackMicrosoft.access$700(BluetoothStackMicrosoft.java:44)
at com.intel.bluetooth.BluetoothStackMicrosoft$ConnectThread.run(BluetoothStackMicrosoft.java:651) 
```

我不知道为什么会发生此异常以及如何修复它。（这也是我不提供更多代码的原因——我根本不知道在哪里寻找错误。）

这是在带有 Bluecove 2.1.1 (63) 最新快照的 Windows 7 64 位机器上运行的。

如果您知道如何处理此问题，我将非常感谢任何有用的评论和答案！

# extjs - 在 Ext 网格中切换时如何跳过特定的单元格？

> ID：16016073
> 
> 赞同：2
> 
> 时间：2013-04-15T13:12:41.480
> 
> 标签：extjs, grid, extjs4, cell, extjs4.1

我有一个网格面板，其中一些单元格是可编辑的，而另一些则不是。我想这样当你用键盘在网格中切换时，不可编辑的单元格会被跳过，即永远不会被选中。

到目前为止，这是我的简单网格：

```
var store = Ext.create('Ext.data.Store', {
    fields:['name', 'age', 'country'],
    data:[
        {name:'Lisa', age:13, country: 'USA'},
        {name:'Bart', age:75, country: 'France'},
        {name:'Homer', age:32, country: 'Germany'},
        {name:'Marge', age:56, country: 'Australia'}
    ]
});

var grid = Ext.create('Ext.grid.Panel', {
    title: 'People',
    store: store,
    columns: [
        {header: 'Name',  dataIndex: 'name', flex: 1},
        {header: 'Age',  dataIndex: 'age', flex: 1, editor: 'numberfield'},
        {header: 'Country',  dataIndex: 'country', flex: 1, editor: 'textfield'},
    ],
    selType: 'cellmodel',
    plugins: [{
        ptype: 'cellediting',
        clicksToEdit: 2
    }],
    height: 150,
    width: 200,
    renderTo: Ext.getBody()
}); 
```

如您所见，第一列 (Name) 不可编辑，而第二列 (Age) 和第三列 (Country) 定义了编辑器。每当您使用键盘在网格中切换时，我希望跳过名称列。换句话说，我的意思是这种标签顺序：

```
 COL1  |   COL2  |   COL3  |
-----------------------------
  SKIP  |    1    |    2    |
-----------------------------
  SKIP  |    3    |    4    |
-----------------------------
  SKIP  |    5    |    6    |
----------------------------- 
```

我不知道在哪里可以注入这种自定义标签行为，但我无法想象这是不可能的。

这是我的代码的 JS 小提琴：http: [//jsfiddle.net/qnXrp/](http://jsfiddle.net/qnXrp/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:32:56.587

只需`selType: "cellmodel"`从配置中删除。然后它将默认为 rowmodel，并且唯一可以在行中选择的是可编辑单元格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T17:59:35.073

查看网格视图上的覆盖[walkCells 。](http://docs.sencha.com/extjs/4.1.3/#!/api/Ext.view.Table-method-walkCells)

这是在通过网格单元格切换时跳过第一列的一种非常hacky的方法：

```
Ext.ComponentManager.create({
    viewConfig: {
        xhooks: {
            walkCells: function(pos, direction, e, preventWrap, verifierFn, scope) {
                return this.callParent([pos, direction, e, preventWrap, function(newPos) {
                    var newerPos = false;
                    if (newPos.column !== 0) {
                        return true;
                    }
                    newerPos = this.walkCells(newPos, direction, e, preventWrap);
                    if (newerPos) {
                        Ext.apply(newPos, newerPos);
                        return true;
                    }
                    return false;
                }, this]);
            }
        }
    }
 }, 'grid'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-07T13:24:55.953

我找到了解决我的问题的方法，所以我在这里分享。尝试将其用作当前网格中的配置：

```
var grid = Ext.create('Ext.grid.Panel', {
    ...
    selModel: Ext.create('selection.cellmodel', {
        onEditorTab: function(editingPlugin, e) {
            var me = this,
                direction = e.shiftKey ? 'left' : 'right',
                position  = me.move(direction, e);

            if (position) {
                while(!editingPlugin.startEdit(position.row, position.column)){
                    position = me.move(direction, e);

                    // go to first editable cell
                    if(!position) editingPlugin.startEdit(0, 1); // TODO: make this dynamic
                }
                me.wasEditing = false;

            } else {
                // go to first editable cell
                if (editingPlugin.startEdit(0, 1)) { // TODO: make this dynamic
                    me.wasEditing = false;
                }
            }
        },
    }),
    //selType: 'cellmodel', // remove selType
    ...
}) 
```

# iphone - 在没有 Xcode 的情况下启动 iPhone 模拟器

> ID：16016078
> 
> 赞同：1
> 
> 时间：2013-04-15T13:12:47.577
> 
> 标签：iphone, xcode, ios-simulator

是否可以在不使用 Xcode 的情况下从行命令启动 iPhone 模拟器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T13:20:23.487

```
open `xcode-select --print-path`/Platforms/iPhoneSimulator.platform/Developer/Applications/iPhone\ Simulator.app 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-08T09:38:28.730

Command + Shift + H 是在模拟器上完成主页按钮工作的快捷方式。使用它，它会将其带到菜单中。如果您的应用程序已经构建，并且没有被删除，您可以在那里找到它。

# php - 来自 php 数组或 html 响应的 Jmeter 循环控制器数据

> ID：16016082
> 
> 赞同：0
> 
> 时间：2013-04-15T13:13:01.117
> 
> 标签：php, jmeter

我的想法是创建包含 url 的动态 php 数组，然后将其发送到 jmeter。如何将此数组作为 url dataprovider 并对其进行迭代？是否使用用户定义的变量以某种方式完成？那将是真棒。

谢谢

编辑：如果第一个想法是不可能的，是否可以从 http 响应中读取 URL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:25:25.843

我解决了 XML http 响应和 xPath Extractor Sampler 的问题。然后将 ForEach Controller 与从 XML 响应中获得的数据一起使用。我认为这是最好的方法。

# f# - F# 记录的奇怪行为

> ID：16016087
> 
> 赞同：8
> 
> 时间：2013-04-15T13:13:12.240
> 
> 标签：f#

在某些情况下，F# 记录行为对我来说很奇怪：

**没有关于歧义的警告**

```
type AnotherPerson = {Id: int; Name: string}
type Person = {Id: int; Name: string;}

// F# compiler will use second type without any complains or warnings
let p = {Id = 42; Name = "Foo";} 
```

**关于记录解构而不是记录构建的警告**

F# 编译器在记录“解构”时发出警告，而不是在前一种情况下收到有关记录构造的警告：

```
// Using Person and AnotherPerson types and "p" from the previous example!
// We'll get a warning here: "The field labels and expected type of this 
// record expression or pattern do not uniquely determine a corresponding record type"
let {Id = id; Name = name} = p 
```

请注意，模式匹配没有警告（我怀疑这是因为模式是使用“记录构造表达式”而不是“记录解构表达式”构建的）：

```
match p with
| {Id = _; Name = "Foo"} -> printfn "case 1"
| {Id = 42; Name = _} -> printfn "case 2"
| _ -> printfn "case 3" 
```

**缺少字段的类型推断错误**

F# 编译器将选择第二种类型，然后会因为缺少 Age 字段而发出错误！

```
type AnotherPerson = {Id: int; Name: string}
type Person = {Id: int; Name: string; Age: int}

// Error: "No assignment given for field 'Age' of type 'Person'"
let p = {Id = 42; Name = "Foo";} 
```

**“记录解构”的丑陋语法**

我问了我的几位同事一个问题：“这段代码是关于什么的？”

```
type Person = {Id: int; Name: string;}
let p = {Id = 42; Name = "Foo";}

// What will happend here?
let {Id = id; Name = name} = p 
```

尽管“id”和“name”实际上是“左值”，但它们位于表达式的“右手边”，这让每个人都感到非常惊讶。我知道这更多地与个人喜好有关，但对于大多数人来说，在一种特定情况下，输出值放在表达式的右侧似乎很奇怪。

我不认为所有这些都是错误，我怀疑大多数这些东西实际上是功能。
我的问题是：**这种晦涩的行为背后是否有任何理性？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T14:14:54.410

我认为您的大多数评论都与记录名称在定义记录的命名空间中直接可用的事实有关 - 也就是说，当您定义`Person`具有属性`Name`和的记录时`Id`，名称`Name`和`Id`是全局可见的。这既有优点也有缺点：

*   好处是它使编程更容易，因为你可以写`{Id=1; Name="bob"}`
*   坏事是名称可能与范围内的其他记录名称发生冲突，因此如果您的名称不是唯一的（您的第一个示例），您就会遇到麻烦。

您可以告诉编译器您希望始终使用`RequireQualifiedAccess`属性明确限定名称。这意味着您不能只写`Id`or `Name`，但您需要始终包含类型名称：

```
[<RequireQualifiedAccess>]
type AnotherPerson = {Id: int; Name: string}
[<RequireQualifiedAccess>]
type Person = {Id: int; Name: string;}

// You have to use `Person.Id` or `AnotherPerson.Id` to determine the record
let p = {Person.Id = 42; Person.Name = "Foo" } 
```

这为您提供了更严格的模式，但它使编程不太方便。@pad 已经解释了默认（有点模棱两可的行为） - 编译器将简单地选择一个稍后在您的源代码中定义的名称。即使在可以通过查看表达式中的其他字段来推断类型的情况下，它也会这样做 - 仅仅是因为查看其他字段并不总是有效（例如，当您使用`with`关键字时），所以最好坚持一个简单的一致的策略。

至于模式匹配，当我第一次看到语法时，我也很困惑。我认为它不经常使用，但它可能很有用。

重要的是要意识到 F# 不使用*结构类型*（这意味着您不能将具有更多字段的记录用作获取具有较少字段的记录的函数的参数）。这可能是一个有用的特性，但它不适合 .NET 类型系统。这基本上意味着你不能期望太花哨的东西 - 参数必须是众所周知的命名记录类型的记录。

当你写：

```
let {Id = id; Name = name} = p 
```

术语*左值*是指`id`和`name`出现在*模式*中而不是*表达式*中的事实。F# 中的语法定义告诉你这样的事情：

```
expr := let <pat> = <expr>
      | { id = <expr>; ... }
      | <lots of other expressions>

pat  := id
      | { id = <pat>; ... }
      | <lots of other patterns> 
```

`=`因此， in的左侧`let`是一个模式，而右侧是一个表达式。两者在 F# 中具有相似的结构 -`(x, y)`可用于构造和解构元组。记录也是如此……

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-15T14:09:54.983

您的示例可以分为两类：**记录表达式**和**记录模式**。虽然记录表达式*需要声明所有字段*并返回一些表达式，但记录模式具有*可选字段*并且用于模式匹配。[Records 上的 MSDN 页面上](http://msdn.microsoft.com/en-us/library/dd233184.aspx)有两个明确的部分，可能值得一读。

在这个例子中，

```
type AnotherPerson = {Id: int; Name: string}
type Person = {Id: int; Name: string;}

// F# compiler will use second type without any complains or warnings
let p = {Id = 42; Name = "Foo";} 
```

[从上面 MSDN 页面](http://msdn.microsoft.com/en-us/library/dd233184.aspx)中所述的规则可以清楚地看出这种行为。

> 最近声明的类型的标签优先于先前声明的类型的标签

在模式匹配的情况下，您专注于创建一些您需要的绑定。所以你可以写

```
type Person = {Id: int; Name: string;}
let {Id = id} = p 
```

为了获得`id`绑定以供以后使用。let 绑定上的模式匹配可能看起来有点奇怪，但它与您通常在函数参数中进行模式匹配的方式非常相似：

```
type Person = {Id: int; Name: string;}
let extractName {Name = name} = name 
```

我认为对您的模式匹配示例的警告是合理的，因为编译器无法猜测您的意图。

但是，不建议使用具有重复字段的不同记录。至少您应该使用限定名称以避免混淆：

```
type AnotherPerson = {Id: int; Name: string}
type Person = {Id: int; Name: string; Age: int}

let p = {AnotherPerson.Id = 42; Name = "Foo"} 
```

# c# - 将对象序列化为 JSON

> ID：16016091
> 
> 赞同：0
> 
> 时间：2013-04-15T13:13:25.960
> 
> 标签：c#, json.net, javascriptserializer

我正在尝试将一个对象序列化为 JSON，但无法弄清楚为什么要省略一大堆属性。作为参考，我尝试使用 `DataContractJsonSerializer`for 同样无济于事，因为它会生成一个`StackOverflowException`.

本质上，我有一个`Basket`对象：-

```
public class Basket : BusinessListBase<Basket, BasketItem>
{
    private Voucher _voucher;
    public Voucher Voucher;

    public decimal GrandTotalIncVat
    {
        get { return Math.Round(BasketTotalIncVat + DeliveryTotalIncVat, 2); }
    }
} 
```

我序列化为 Json 的代码是：-

```
JavaScriptSerializer objSerialiser = new JavaScriptSerializer();
StringBuilder objSB = new StringBuilder();
objSerialiser.ConvertToType<T>(value);
objSerialiser.Serialize(value, objSB);
return objSB.ToString(); 
```

对此 Json 代码的调用工作正常，但生成的字符串仅包含 for`BasketItem`和 not的属性`Basket`，这正是我想要的。

这里有什么问题？

我现在用以下方式调用序列化程序：-

```
universalVariableBase.BasketData = BasketManager.SessionBasket;
JsonHelper.ToJson<Core.UniversalVariable>(universalVariableBase) 
```

序列化器很简单：-

```
public static string ToJson<T>(this T value)
{   
     return Newtonsoft.Json.JsonConvert.SerializeObject(value, Formatting.Indented);
} 
```

因此，这种情况下的值是存储为 BasketManager.SessionBasket 的 Basket 对象

我可以打电话给

```
((Basket)BasketManager.SessionBasket).GrandTotalIncVAT 
```

它包含一个值。

但是，当我对此进行序列化时，只有 BasketItem 的成员作为列表而没有 Basket，因此 GrandTotalIncVAT 不会出现。

为了回答您的问题，BusinessListBase 是 CSLA.NET 的第三方对象。我没有实施这种方法，所以我想知道这是否在某处引起了一些奇怪。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-15T13:19:13.700

you can use newtonsoft json converter. It is easy to use and serializes in just a few lines

```
tring jsonOutput = JsonConvert.SerializeObject(obj, conv); 
```

# java - JAVA循环问题

> ID：16016092
> 
> 赞同：0
> 
> 时间：2013-04-15T13:13:27.563
> 
> 标签：java, mpi

大家好，我的代码循环有问题，我想做的是运行一段代码 20 次，跟踪所用时间，然后除以 20 得出平均值

这是目前不起作用的代码：

```
edit 
```

它给了我以下错误：

```
PJ Express (0.35) is started in the cluster configuration
Starting process <0> on <Tornado>
Starting process <1> on <Predator>
mpi.MPIException: Error in SimplePacker : count <1> is less than length <2>
        at mpi.SimplePackerChar.unpack(SimplePackerChar.java:105)
        at mpi.Comm.recv(Comm.java:1305)
        at mpi.Comm.Recv(Comm.java:1255)
        at PingPongVariousLengths.main(PingPongVariousLengths.java:29)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
sorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at runtime.daemon.Wrapper.execute(Wrapper.java:165)
        at runtime.daemon.Wrapper.main(Wrapper.java:180)
java.lang.reflect.InvocationTargetException
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
sorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at runtime.daemon.Wrapper.execute(Wrapper.java:165)
        at runtime.daemon.Wrapper.main(Wrapper.java:180)
Caused by: mpi.MPIException: mpi.MPIException: mpi.MPIException: Error in Simple
Packer : count <1> is less than length <2>
        at mpi.Comm.Recv(Comm.java:1259)
        at PingPongVariousLengths.main(PingPongVariousLengths.java:29)
        ... 6 more
Caused by: mpi.MPIException: mpi.MPIException: Error in SimplePacker : count <1>
 is less than length <2>
        at mpi.Comm.recv(Comm.java:1317)
        at mpi.Comm.Recv(Comm.java:1255)
        ... 7 more
Caused by: mpi.MPIException: Error in SimplePacker : count <1> is less than leng
th <2>
        at mpi.SimplePackerChar.unpack(SimplePackerChar.java:105)
        at mpi.Comm.recv(Comm.java:1305)
        ... 8 more 
```

但是在添加循环之前，我有这段代码并且工作正常：

编辑

是什么导致程序中的循环给出错误消息，我该如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:26:40.707

错误在 SimplePacker 中，并引发 MPIException。你能提供一些你的 SimplePacker 的编码器，它在 MPI.Rec()- 方法中被调用吗？

# javascript - 相对路径的 document.location.href

> ID：16016095
> 
> 赞同：2
> 
> 时间：2013-04-15T13:13:33.697
> 
> 标签：javascript

我想在按钮单击时重新定位到**相对 url**：

```
<button onclick="document.location.href='/Recruiters.aspx'"></button> 
```

但这不起作用...

有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T13:26:33.107

按钮的默认设置`type`是`"submit"`，当在表单中时，单击按钮会提交它。虽然它应该首先重定向，但值得一试：

```
<button type="button" onclick="document.location.href='/Recruiters.aspx'"></button> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:15:16.607

您的 onclick 需要是一个处理程序。你可以这样做：

```
<script>
    function redirect()
    {
        window.location.href='/Recruiters.aspx';
    }
</script>

<button onclick="redirect()"></button> 
```

如果您不想使用处理程序，您仍然可以像这样内联：

```
<button onclick="javascript: window.location.href='/Recruiters.aspx';"></button> 
```

# objective-c - 谁能帮我理解这段代码？

> ID：16016096
> 
> 赞同：1
> 
> 时间：2013-04-15T13:13:35.773
> 
> 标签：objective-c

查看代码块，它是一个类方法。谁能给我一些关于这种方法的解释？它做了什么？

```
+ (PeriodicElements *)sharedPeriodicElements {
  @synchronized(self) {
    static dispatch_once_t pred;
    dispatch_once(&pred, ^{ sharedPeriodicElementsInstance = [[self alloc] init]; });
  }
  return sharedPeriodicElementsInstance;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T13:16:21.783

它用于创建单例。`dispatch_once`将确保无论您调用多少次`sharedPeriodicElements`，初始化程序在您的应用程序的整个生命周期内只会被调用一次。

该`synchronized`块有点过头了，因为`dispatch_once`它已经是线程安全的。似乎您正在查看旧的单例方式的部分变异版本：

```
+ (PeriodicElements *)sharedInstance {
    static PeriodicElements *sharedPeriodicElementsInstance;
    @synchronized(self) {
        if (sharedPeriodicElementsInstance == nil) {
            sharedPeriodicElementsInstance = [[PeriodicElements alloc] init];
        }
    }
    return sharedPeriodicElementsInstance;
} 
```

要清楚（谢谢@bbum），这确实是您应该运行的：

```
+(PeriodicElements *)sharedPeriodicElements {
    static dispatch_once_t pred;
    dispatch_once(&pred, ^{ sharedPeriodicElementsInstance = [[self alloc] init]; });
    return sharedPeriodicElementsInstance;
} 
```

# java - 使用用户名/密码连接到远程服务器以下载文件

> ID：16016099
> 
> 赞同：0
> 
> 时间：2013-04-15T13:14:13.290
> 
> 标签：java, passwords, connection

我需要连接到需要用户名/密码并需要下载视频和其他 pdf 文档的远程服务器。java中最好的方法是什么。一个小的代码示例将是非常可观的。如果我刚开始使用 Java 并从像你这样的大师那里学习最佳实践时，这段代码看起来像是新手的努力，我尝试了以下，请提前接受我的道歉:)。问题是如何进行身份验证，如何向服务器提供用户名/密码。

```
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.net.MalformedURLException;
import java.net.URL;
import java.net.URLConnection;

public class Downloader {
URL url;
public Downloader(){
    try {
        url = new URL("https://d396qusza40orc.cloudfront.net/algs4partI/slides%2F13StacksAndQueues.pdf");
        try {
            URLConnection con = url.openConnection();
            con.connect();
            InputStream inStream = url.openStream();
            FileOutputStream outStream = new FileOutputStream("data.dat");
            int bytesRead;
            byte[] buffer = new byte[100000];
            while((bytesRead = inStream.read(buffer)) > 0){

                outStream.write(buffer, 0 , bytesRead);
                buffer = new byte[100000];
            }
            outStream.close();

        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    } catch (MalformedURLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}
public static void main(String[] args){
    Downloader d = new Downloader();
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:32:09.960

您应该能够提供用户名/密码作为 URL 的一部分：

例如

```
https://username:password@example.com/secure/myfile.pdf 
```

这确实假定该站点正在使用标准 HTTP 身份验证。

如果正在进行某种自定义身份验证，您可能需要提供包含身份验证信息的每个生成的 cookie，或者可能在尝试下载文件之前执行单独的登录请求。这一切都取决于远程服务器的设置。

# r - 如何在ggplot2中添加错误栏

> ID：16016100
> 
> 赞同：0
> 
> 时间：2013-04-15T13:14:24.760
> 
> 标签：r, ggplot2

这是我的数据框

```
Month   foresttype  type    average sd
May.    LYL branch  9.18    6.21
May.    LYL leaf    2.41    0.63
May.    LYL flower  5.48    4.83
May.    LYL barks   0.56    0.17
May.    HBS branch  6.38    1.14
May.    HBS leaf    6.81    4.48
May.    HBS flower  2.55    1.38
May.    HBS barks   0.48    0.17
May.    YSL branch  0.9 0.18
May.    YSL leaf    10.38   8.18
May.    YSL flower  10.19   3.81
May.    YSL barks   0.39    0.14
Jun.    LYL branch  10.17   7.62
Jun.    LYL leaf    1.99    1.33
Jun.    LYL flower  0.4 0.26
Jun.    LYL barks   0.16    0.13
Jun.    HBS branch  9.81    8.79
Jun.    HBS leaf    3.02    0.41
Jun.    HBS flower  3.41    4.93
Jun.    HBS barks   0.62    0.6
Jun.    YSL branch  1.39    0.26
Jun.    YSL leaf    4.39    5.26
Jun.    YSL flower  10.67   10.39
Jun.    YSL barks   0.33    0.03
Jul.    LYL branch  3.23    3.99
Jul.    LYL leaf    1.21    0.09
Jul.    LYL flower  1.74    1.04
Jul.    LYL barks   0.23    0.25
Jul.    HBS branch  2.73    3.11
Jul.    HBS leaf    3.46    2.06
Jul.    HBS flower  3.31    4.93
Jul.    HBS barks   0.7 0.38
Jul.    YSL branch  1.38    0.84
Jul.    YSL leaf    3.4 4.44
Jul.    YSL flower  10.9    9.81
Jul.    YSL barks   0.66    0.5
Jul.    LYL branch  1.54    1.7
Aug.    LYL leaf    2.01    0.75
Aug.    LYL flower  2.61    0.77
Aug.    LYL barks   0.3 0.51
Aug.    HBS branch  0.22    0.37
Aug.    HBS leaf    9.25    9.87
Aug.    HBS flower  2.58    1.61
Aug.    HBS barks   0.14    0.1
Aug.    YSL branch  0.8 0.52
Aug.    YSL leaf    1.86    0.65
Aug.    YSL flower  4.92    4.45
Aug.    YSL barks   0.71    0.35
Sep.    LYL branch  8.92    3.25
Sep.    LYL leaf    42.16   29.3
Sep.    LYL flower  17.38   12.96
Sep.    LYL barks   0.16    0.04
Sep.    HBS branch  2.9 2.74
Sep.    HBS leaf    52.47   42.82
Sep.    HBS flower  3.02    2.29
Sep.    HBS barks   0.1 0.1
Sep.    YSL branch  4.58    1.5
Sep.    YSL leaf    17.25   17.17
Sep.    YSL flower  5.15    4.06
Sep.    YSL barks   0.14    0.06
Oct.    LYL branch  3.18    2.13
Oct.    LYL leaf    65.74   59.98
Oct.    LYL flower  0.69    0.41
Oct.    LYL barks   0.14    0.12
Oct.    HBS branch  0.1 0.1
Oct.    HBS leaf    60.08   62.02
Oct.    HBS flower  0.3 0.28
Oct.    HBS barks   0.04    0.04
Oct.    YSL branch  1.21    1.15
Oct.    YSL leaf    41.54   25.02
Oct.    YSL flower  2.75    2.06
Oct.    YSL barks   0.14    0.09

df <- ddply(data1,.(Month,foresttype),transform,ystart = cumsum(average),yend = cumsum(average) + sd) 

p=ggplot() +geom_bar(data=df, aes(y = average, x = foresttype, fill = type),stat="identity",position='stack') +theme_bw() + facet_grid( ~ Month)

m=p+geom_segment(data=df,aes(x=foresttype,xend=foresttype,ymin = ystart,ymax = yend))+theme_bw()

n=m+geom_point(data=df,aes(x = foresttype,y = yend),shape = "|",show_guide = FALSE) 
```

现在，我不知道为什么不能添加错误栏？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T13:36:33.940

您可以添加误差线`geom_errorbar()`（参数`width=0`只会使垂直线没有水平线）。`df`还通过 put和`x=foresttype`inside调用简化了您的代码，`ggplot()`因为它用于所有几何图形。

```
ggplot(df,aes(x = foresttype))+
  geom_bar(aes(y = average, fill = type),stat="identity",position='stack')+
  geom_errorbar(aes(ymin = ystart,ymax = yend),width=0)+facet_grid( ~ Month) 
```

![在此处输入图像描述](https://i.stack.imgur.com/CZV9k.png)

# php - 迭代 $_POST 会产生意想不到的结果

> ID：16016101
> 
> 赞同：0
> 
> 时间：2013-04-15T13:14:26.190
> 
> 标签：php, arrays

我给这个函数一个数组。

```
function updateColors($mysqli, $variables){

var_dump($variables);

foreach($variables as $key=>$value) {

    if (is_int($key) && $value){
        error_log("changing: " . $key . " to " .  $value);

        $mysqli->select_db("hotel");

        $sql = $mysqli->prepare("UPDATE `statuses`
        SET  `color` =  ?
        WHERE  `ID` =  ?;
        ");

        $sql->bind_param('si', $value, $key);

        if($sql->execute())
            return("Colors updated.");
        else
            return("Unexpected error while updating colors.");

    } else 
    error_log("NOT changing: " . $key . " to " .  $value);

}

} 
```

这是结果`var_dump`

```
array(11) { 
["statcolor0"]=> string(6) "000000" 
[0]=> string(12) "rgb(0, 0, 0)"
["statcolor1"]=> string(6) "000000"
[1]=> string(12) "rgb(0, 0, 0)"
["statcolor2"]=> string(6) "000000"
[2]=> string(12) "rgb(0, 0, 0)"
["statcolor3"]=> string(6) "000000"
[3]=> string(12) "rgb(0, 0, 0)"
["statcolor4"]=> string(6) "000000"
[4]=> string(12) "rgb(0, 0, 0)"

["UpdateColors"]=> string(13) "Update Colors" } 
```

但是，看起来我的 foreach 循环没有正确遍历数组中的所有值。这是结果`error_log`

```
[15-Apr-2013 15:08:37] NOT changing: statcolor0 to 000000
[15-Apr-2013 15:08:37] changing: 0 to rgb(0, 0, 0) 
```

没有别的！奇怪的是，数组中的大多数项目都丢失了，并且没有记录在错误日志中。这是为什么？

# python - Matplotlib 和多处理 RuntimeError

> ID：16016102
> 
> 赞同：4
> 
> 时间：2013-04-15T13:14:26.210
> 
> 标签：python, matplotlib, multiprocessing, tk

我正在尝试同时使用多处理和 matplotlib。

我正在创建一个标准`Pool`，使用 的回调函数添加工作`apply_async`并更新 GUI `apply_async`，该函数在 Pool 的父进程上运行（我用 验证了这一点`os.getpid()`）。例子 ：

```
from pylab import *
from numpy import *
from numpy.random import random
from multiprocessing import Pool

# Output image
global out_all
out_all = zeros((256, 256))

# Only does something to in_image, doesn't access anything else
def do_work(in_image):
    for x in xrange(100000):
        out_image = in_image[::-1, ::-1]
    return out_image

# Update the output image and display if needed
def do_update(out_image):
    global out_all
    print ("Updating")
    out_all += out_image
    clf()
    imshow(out_all)
    show()

# Input images (close enough to what I do as well)
work = [random((256, 256)) for f in range(20)]

# Don't block when showing something
ion()

# Do the work
print "Starting pool"
pool = Pool()
for o in work:
    pool.apply_async(do_work, [o], callback=do_update).get()
pool.close()
pool.join()
print "Stopping pool"

# Block
ioff()
show()
print "Done" 
```

处理本身工作正常，进程真的被破坏了`pool.join()`，但是 Matplotlib（和 TK，我猜）一旦我尝试做某事，即使只退出程序，也会抱怨：

```
Traceback (most recent call last):
  File "test_thread.py", line 27, in <module>
    show()
  File "/usr/lib/pymodules/python2.7/matplotlib/pyplot.py", line 139, in show
    _show(*args, **kw)
  File "/usr/lib/pymodules/python2.7/matplotlib/backend_bases.py", line 83, in __call__
    manager.show()
  File "/usr/lib/pymodules/python2.7/matplotlib/backends/backend_tkagg.py", line 444, in show
    self.canvas.draw_idle()
  File "/usr/lib/pymodules/python2.7/matplotlib/backends/backend_tkagg.py", line 258, in draw_idle
    self._idle_callback = self._tkcanvas.after_idle(idle_draw)
  File "/usr/lib/python2.7/lib-tk/Tkinter.py", line 512, in after_idle
    return self.after('idle', func, *args)
  File "/usr/lib/python2.7/lib-tk/Tkinter.py", line 504, in after
    name = self._register(callit)
  File "/usr/lib/python2.7/lib-tk/Tkinter.py", line 1101, in _register
    self.tk.createcommand(name, f)
RuntimeError: main thread is not in main loop
Error in atexit._run_exitfuncs:
Traceback (most recent call last):
  File "/usr/lib/python2.7/atexit.py", line 24, in _run_exitfuncs
    func(*targs, **kargs)
  File "/usr/lib/pymodules/python2.7/matplotlib/_pylab_helpers.py", line 82, in destroy_all
    manager.destroy()
  File "/usr/lib/pymodules/python2.7/matplotlib/backends/backend_tkagg.py", line 452, in destroy
    self.canvas._tkcanvas.after_cancel(self.canvas._idle_callback)
  File "/usr/lib/python2.7/lib-tk/Tkinter.py", line 519, in after_cancel
    data = self.tk.call('after', 'info', id)
RuntimeError: main thread is not in main loop
Error in sys.exitfunc:
Traceback (most recent call last):
  File "/usr/lib/python2.7/atexit.py", line 24, in _run_exitfuncs
    func(*targs, **kargs)
  File "/usr/lib/pymodules/python2.7/matplotlib/_pylab_helpers.py", line 82, in destroy_all
    manager.destroy()
  File "/usr/lib/pymodules/python2.7/matplotlib/backends/backend_tkagg.py", line 452, in destroy
    self.canvas._tkcanvas.after_cancel(self.canvas._idle_callback)
  File "/usr/lib/python2.7/lib-tk/Tkinter.py", line 519, in after_cancel
    data = self.tk.call('after', 'info', id)
RuntimeError: main thread is not in main loop 
```

我的第一个想法是每个 TK 上下文都重复`fork()`，这以某种方式干扰了主流程中的 TK 循环，但我没有在我的工作人员中做任何与 TK 相关的事情。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T13:29:14.977

错误消息参考`Tkinter`。所以看起来你正在使用 TkAgg 后端。下面的代码是特定于 TkAgg/Tkinter 的。特别是调用

```
win.after(100, animate) 
```

使用了 Tkinter 特有的`after`方法。GtkAgg/PyGtk 有类似的调用，其他后端也有类似的调用。但我只想强调，接下来的内容是特定于 TkAgg/Tkinter 的。

* * *

Tkinter 旨在在单个线程中运行。也就是说，所有 Tkinter GUI 调用都应该源自单个线程（通常，不一定是主线程）。

Pool 的回调方法在主进程`apply_async`的单独 ( ) 线程中运行。`_handle_results`由于`imshow()`是从池的`_handle_results`线程`show()`中调用并在主线程中调用的，因此`Tkinter`抱怨

```
RuntimeError: main thread is not in main loop 
```

在这种情况下，我看不到使用`apply_async`回调的方法。

相反，我们可以做的是安排`do_work`放入`out_image`一个`multiprocessing.Queue()`（我`out_queue`在下面的代码中调用它）。然后，我们将让主进程的主线程轮询此队列中的项目，并在它们从队列中出来时显示它们。此轮询在`animate`下面的函数中完成。

* * *

`plt.ion()`仅用于交互式会话。尽管有时可以编写一些似乎可以使用的小脚本，但如果您拒绝在脚本中使用，而是编写尊重 GUI 框架事件循环的代码`plt.ion()`，您将获得更好的结果和更清晰的 GUI 。`plt.ion()`

虽然可能可以修复您的脚本并使用`plt.ion()`，因为这不是编写 matplotlib 脚本的推荐方式，让我们看看我们是否可以避免这样做。

* * *

`plt.show()`告诉 Tkinter 运行它的事件循环。请注意，一旦进行此调用，就会绘制 GUI 窗口，您可以单击按钮、放大和缩小等。

不知何故，我们需要在这个事件循环中注入一个函数，由事件循环定期运行，并与可能发生的所有其他 GUI 事件协作。我们希望这个函数检查我们的任何工作子进程是否有输出给我们，如果有，更新 imshow 图像。

使用 TkAgg/Tkinter，注入这样一个函数的方法是

```
win = fig.canvas.manager.window
win.after(100, animate) 
```

这将告诉 Tkinter`animate`在（大约）100 毫秒后运行该函数（一次）。由于我们希望该函数`animate`定期运行，我们只需粘贴另一个

```
win.after(100, animate) 
```

结束时调用`animate`。

* * *

```
import matplotlib as mpl
mpl.use('TkAgg')
import matplotlib.pyplot as plt
import numpy as np
import multiprocessing as mp
import logging
import Queue
logger = mp.log_to_stderr(logging.INFO)

# Only does something to in_image, doesn't access anything else
def do_work(in_image):
    logger.info('Processing in_image')
    for x in xrange(100000):
        out_image = in_image[::-1, ::-1]
    out_queue.put(out_image)

# Update the output image and display if needed
out_all = np.zeros((256, 256))

def pool_initializer(out_queue_):
    # Setup out_queue as a global variable *in the worker subprocesses*
    global out_queue
    out_queue = out_queue_

def animate():
    global out_all
    try:
        out_image = out_queue.get_nowait()
    except Queue.Empty:
        pass
    else:
        logger.info("Updating")
        out_all += out_image
        im.set_data(out_all)
        fig.canvas.draw()  # redraw the canvas
    win.after(100, animate)

if __name__ == '__main__':
    out_queue = mp.Queue()
    logger.info("Starting pool")
    pool = mp.Pool(initializer=pool_initializer, initargs=(out_queue, ))
    work = [np.random.random((256, 256)) for f in range(20)]
    for o in work:
        pool.apply_async(do_work, [o])
    pool.close()

    fig, ax = plt.subplots()
    win = fig.canvas.manager.window
    # Output image
    im = plt.imshow(out_all, vmin=0, vmax=1)

    # Register a function to be run once
    win.after(100, animate)
    plt.show()
    logger.info("Done") 
```

# jquery - 如何更新 jqxGrid 页面大小？

> ID：16016105
> 
> 赞同：0
> 
> 时间：2013-04-15T13:14:29.433
> 
> 标签：jquery

我正在使用[JqWidgets](http://www.jqwidgets.com/jquery-widgets-documentation/documentation/jqxgrid/jquery-grid-getting-started.htm)和自定义 pagerenderer。就像这样：

```
 // pager customizer method
    var pagerrenderer = function() {
        var element = $("<div style='padding-top: 10px; margin: 0 auto; width: 470px; height: 100%;'></div>");
        var paginginfo = $("#jqxgrid").jqxGrid('getpaginginformation');
        var datainfo = $("#jqxgrid").jqxGrid('getdatainformation');
        var nextPage = paginginfo.pagenum < paginginfo.pagescount - 1 ? paginginfo.pagenum + 1 : paginginfo.pagenum;
        var next = $("<a class='btn btn-small' href='#" + nextPage + "'>Next</a>");
        next.appendTo(element);
        next.click(function () {
            $("#jqxgrid").jqxGrid('gotoprevpage');
        });
        var prevPage = paginginfo.pagenum > 0 ? paginginfo.pagenum - 1 : paginginfo.pagenum;
        var prev = $("<a class='btn btn-small' href='#" + prevPage + "'>Prev</a>");
        prev.appendTo(element);
        prev.click(function () {
            $("#jqxgrid").jqxGrid('gotonextpage');
        });
        var rowsCount = datainfo.rowscount;
        var firstElement = paginginfo.pagenum * paginginfo.pagesize + 1;
        var lastElement = firstElement + paginginfo.pagesize - 1;
        if (lastElement > rowsCount) lastElement = rowsCount;
        $("<span class='info'>" + firstElement + "-" + lastElement + " of " + rowsCount + "</span>").appendTo(element);
        var pageSize = $("<div id='jqxPageSize'></div>");
        pageSize.appendTo(element);
        pageSize.jqxDropDownList({ source: ["10", "20", "30"], selectedIndex: 0, dropDownHeight: '90px', width: '40px', height: '20px', theme: 'firmtel' });
        pageSize.on('change', function (event) {
            var args = event.args;
            var item = args.item;
            $(this).val(item.label);

            // here I am trying to change pagesize of the grid.

            paginginfo.pagesize = item.label;
            $('#jqxGrid').jqxGrid('render');
        });
        $("<span class='info'> Shows rows: </span>").appendTo(element);
        var pageBox = $("<input type='text' name='page-number' style='width: 20px; text-align: right; height: 12px;' />");
        $(pageBox).val(parseInt(paginginfo.pagenum) + 1);
        $(pageBox).keyup(function (event) {
            if (event.keyCode == 13) {
                var val = $(this).val();
                $("#jqxgrid").jqxGrid('gotopage', val - 1);
            }
        });
        pageBox.appendTo(element);
        $("<span class='info'>Go to page: </span>").appendTo(element);

        return element;
    }; 
```

如何更改页面大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-15T09:16:38.337

您可以使用

```
$("#grid").jqxGrid({pagesize:5}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-18T09:32:43.360

var recordsPerPageDropDown = \创建一个用于放置下拉菜单的div

```
var sizes = new Array(25, 50, 75);
recordsPerPageDropDown.jqxDropDownList({ width: 100, height: 17, dropDownHeight: 80, placeHolder: "Page size", source: sizes });

recordsPerPageDropDown.on('select', function (event) {
    var args = event.args;
    if (args) {
        var item = args.item;
        var label = item.label;
        $('#jqxgrid').jqxGrid({ pagesize: parseInt(label) });
    }
});

recordsPerPageDropDown.appendTo(element); 
```

# php - 登录 Facebook 时遇到问题

> ID：16016111
> 
> 赞同：-1
> 
> 时间：2013-04-15T13:14:51.797
> 
> 标签：php, facebook, facebook-login

大家好，我在使用 facebook 登录应用程序时遇到问题，它甚至可以很好地登录，但它以某种方式为特定用户存储了错误的 ID。测试站点位于 lahebe.com 我特别没有遇到问题，或者可能是因为我是管理员，这是我的代码。我能做些什么？？ `$_SESSION['user_profile'] = $user_profile;` 这就是我设置会话的方式，它对我来说非常棒，但对其他用户来说却不是。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:24:01.893

您是否将其存储在数据库中？如果是，我在数据类型不正确时遇到了这样的问题。尝试将数据类型更改为 varchar(100)

# c++ - 类成员函数的 std::bind

> ID：16016112
> 
> 赞同：14
> 
> 时间：2013-04-15T13:14:55.123
> 
> 标签：c++, c++11

我有这个代码：

```
#include <iostream>
#include <functional>

struct Foo
{
        int get(int n) { return 5+n; }
};

int main()
{
        Foo foo;
        auto L = std::bind(&Foo::get, &foo, 3);

        std::cout << L() << std::endl;

        return 0;
} 
```

似乎是这样的：

```
auto L = std::bind(&Foo::get, &foo, 3); 
```

相当于：

```
auto L = std::bind(&Foo::get, foo, 3); 
```

为什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-15T13:21:47.783

`std::bind()`**按值**接受其参数。这意味着在第一种情况下，您按值传递*指针*，从而产生指针的副本。在第二种情况下，您`foo`按值传递类型对象，从而生成类型对象的副本`Foo`。

因此，在第二种情况下，表达式的评估会导致在原始 object的*副本*上调用`L()`成员函数，这可能是也可能不是您想要的。`get()`*`foo`*

 *这个例子说明了区别（忘记违反三规则/五规则，这只是为了说明目的）：

```
#include <iostream>
#include <functional>

struct Foo
{
    int _x;

    Foo(int x) : _x(x) { }

    Foo(Foo const& f) : _x(f._x)
    {
        std::cout << "Foo(Foo const&)" << std::endl;
    }

    int get(int n) { return _x + n; }
};

int main()
{
   Foo foo1(42);

   std::cout << "=== FIRST CALL ===" << std::endl;
   auto L1 = std::bind(&Foo::get, foo1, 3);
   foo1._x = 1729;
   std::cout << L1() << std::endl; // Prints 45

   Foo foo2(42);

   std::cout << "=== SECOND CALL ===" << std::endl;
   auto L2 = std::bind(&Foo::get, &foo2, 3);
   foo2._x = 1729;
   std::cout << L2() << std::endl; // Prints 1732
} 
```

[***活生生的例子***](http://coliru.stacked-crooked.com/a/a26e3c4ba76171db)。

如果出于任何原因不想使用指针形式，则可以使用[`std::ref()`](http://en.cppreference.com/w/cpp/utility/functional/ref)来防止创建参数的副本：

```
auto L = std::bind(&Foo::get, std::ref(foo), 3); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-15T13:21:08.147

它们是不相同的。通用函数 binder`std::bind` **复制**它的参数。在 的情况下`std::bind(&Foo::get,&foo,3)`，*指针*被复制，但是当您调用绑定对象时，它仍然适用于原始`foo`对象。在`std::bind(&Foo::get,foo,3)`对象`foo`被复制时，后面的调用适用于绑定的副本，而不是原始对象。

您可以使用访问对象内部状态的成员函数对此进行测试，以两种方式绑定对象，更改原始对象并查看结果有何不同。*

# jsf - 如何从 bean 动态添加和更新 JSF 组件？

> ID：16016113
> 
> 赞同：1
> 
> 时间：2013-04-15T13:14:56.277
> 
> 标签：jsf, jsf-2, primefaces

我正在尝试在 PanelGroup 中生成动态聊天窗口。结构是这样的：

```
 <h:panelGroup id="chats">
       <p:dialog id="chatWindow1">

       </p:dialog>
       <p:dialog id="chatWindow2">

       </p:dialog>
    </h:panelGroup> 
```

问题是当我添加一个新的聊天窗口时，它没有显示。我认为新创建的对话框没有更新[通过 RequestContext 的更新方法]，因为它还不存在。因此，我必须更新“聊天”面板组才能看到新对话框。但问题是该面板组中预先存在的对话框已更新。

考虑一个场景：用户在聊天窗口中输入一些文本。突然一个新的聊天窗口弹出，他在该预先存在的对话框中的所有聊天文本都消失了。

我只是想防止这种情况发生。怎么做到呢？

# linux - 定时器中断是否与系统处于内核模式或用户模式无关？

> ID：16016116
> 
> 赞同：6
> 
> 时间：2013-04-15T13:15:14.620
> 
> 标签：linux, linux-kernel, linux-device-driver

在Linux单处理器系统中，定时器中断与系统处于内核模式还是用户模式无关？

系统处于内核模式时，定时器中断有什么不同的行为吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-15T17:58:18.577

简单的答案是硬件时钟中断服务程序的执行和动态定时器处理程序的调度都不受硬件时钟中断之前系统所处的模式的影响。原因是时钟定时器中断是一个立即服务的硬件中断，不管执行是在内核还是用户上下文（假设定时器中断是启用的），而时钟定时器中断的中断服务程序它本身会引发运行动态定时器处理程序的软件中断。

警告：1）我实际上并没有通过经验证明这一点。2) 这不适用于无滴答内核或高分辨率计时器。

Linux 内核代码使用“计时器”这个词来表示几个不同的东西：

1.  为内核提供“滴答声”的硬件定时器或时钟中断
2.  动态计时器 - 内核和驱动程序使用的软件计时器
3.  间隔计时器 -（setitimer 和警报系统调用）用于用户模式进程的软件计时器

**硬件时钟或滴答计时器**

在使用硬件时钟提供“滴答声”的系统上，时钟定时器中断是一个依赖于架构的硬件中断。例如，在[arch/powerpc/kernel/head_booke.h](http://lxr.free-electrons.com/source/arch/powerpc/kernel/head_booke.h?a=powerpc)中查找“timer_interrupt” ，然后在[arch/powerpc/kernel/time.c](http://lxr.free-electrons.com/source/arch/powerpc/kernel/time.c?v=3.0)`timer_interrupt`中查看中断服务例程 (ISR)实现。此 ISR 在发生定时器中断时立即执行，而与当前执行上下文无关。但是，此硬件中断与其他硬件中断的不同之处在于，当它返回时，处理不会返回到先前的上下文。而是输入调度程序。

对于设置为每秒产生 1000 个时钟中断的系统，在处理其他中断时，有时可能会屏蔽时钟中断。这通常被称为“丢失滴答声”问题。如果不补偿丢失的刻度，加载的系统可能会减慢时间感。在某些架构上，内核通过使用更细粒度的硬件增量计数器来补偿丢失的滴答声，每次时钟定时器中断都会读取并记录其值。通过比较当前滴答的增量计数器值与前一个滴答的增量计数器值，内核可以判断一个滴答是否丢失。

**软件定时器**

已到期的动态计时器的动态计时器处理程序列表（您使用 设置的类型`linux/timer.h`）在时钟计时器中断结束时设置，在它返回之前。顺序是（大约）：

```
[arch dependent]:timer_interrupt( )
kernel/time/tick-common.c:tick_handle_periodic( )
kernel/time/tick-common.c:tick_periodic( )
kernel/timer.c:update_process_times( )
kernel/timer.c:run_local_timers( )
kernel/softirq.c:raise_softirq(TIMER_SOFTIRQ) 
```

我省略了为`timer_interrupt`to设置处理程序`tick_handle_periodic`和为`TIMER_SOFTIRQ`.

调用`raise_softirq(TIMER_SOFTIRQ)`生成一个立即服务的软件中断。中断的 ISR 运行动态定时器队列。计时器处理程序在 softirq 上下文中运行，并启用了硬件中断。当 ISR 返回时，调度程序被调用。这意味着如果设置了很多计时器，那么运行队列中的下一个进程将被延迟。

如果有丢失的滴答声，则定时器处理程序的执行可能会延迟，但是，延迟不取决于运行时钟定时器中断之前的执行情况。

**关于动态定时器精度的注意事项**

“......内核无法确保计时器函数在其到期时间正确启动。它只能确保它们在适当的时间或延迟最多几百毫秒后执行。” *了解 Linux 内核*，播威和 Cesati，第 3 版，O'reilly。

因此，如果您需要更好的计时器精度，则需要使用高分辨率计时器。

参考：[软件中断和实时](https://lwn.net/Articles/520076/)

# command-line - Appcmd命令不起作用

> ID：16016119
> 
> 赞同：0
> 
> 时间：2013-04-15T13:15:20.463
> 
> 标签：command-line, iis-7.5, appcmd

```
appcmd set config /section:applicationPools /[name='xxx - yyy'].processModel.idleTimeout:0.00:00:00 
```

当我运行此命令时，该命令不会收到验证消息或错误消息，而是“空闲”。它实际上只是显示插入符号，我可以写文本，或者无论如何......直到我 CTRL+Break 命令。我试着等了 10 分钟，但没有其他任何事情发生。

真的很奇怪，命令似乎正确：S

你知道我可能做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T07:48:33.427

显然，当应用程序池名称中有空格时，您必须将“修改参数”放在引号中。所以命令实际上应该是这样的：

```
appcmd set config /section:applicationPools "/[name='xxx - yyy'].processModel.idleTimeout:0.00:00:00" 
```

这真的让我想知道为什么简单的引号不够用。

# selenium - webdriverimplicitWait 没有按预期工作

> ID：16016120
> 
> 赞同：5
> 
> 时间：2013-04-15T13:15:27.183
> 
> 标签：selenium, selenium-webdriver

如果我使用 webdriver 代码`thread.sleep(20000)`。它正在等待 20 秒，我的代码也可以正常工作。如果我使用隐式等待，则归档相同

```
driver.manage().timeouts().implicitlyWait(20, TimeUnit.SECONDS); 
```

它不会强制等待 20 秒，只需 3 到 4 秒即可进入下一步。页面仍在加载。

这是有线情况，因为我正在使用流利的等待来查找一些元素。如果元素仍在页面上加载，则不会显示错误并使测试通过。

```
Wait<WebDriver> wait = new FluentWait<WebDriver>(driver)
  .withTimeout(50, TimeUnit.SECONDS)
  .pollingEvery(5, TimeUnit.SECONDS)
  .ignoring(NoSuchElementException.class);

WebElement foo = wait.until(new Function<WebDriver, WebElement>() {
  public WebElement apply(WebDriver driver) {
    return driver.findElement(By.id("jxxx"));
  }
}); 
```

但是，如果我说错误的 ID，它会等待 50 秒，但其他测试没有点击就通过了.. 它没有显示任何错误。

我的问题是我应该如何避免`Thread.sleep()`，因为其他硒方法对我没有帮助..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T16:47:03.223

使用以下方法等待元素：

```
public boolean waitForElementToBePresent(By by, int waitInMilliSeconds) throws Exception
{

    int wait = waitInMilliSeconds;
    int iterations  = (wait/250);
    long startmilliSec = System.currentTimeMillis();
    for (int i = 0; i < iterations; i++)
    {
        if((System.currentTimeMillis()-startmilliSec)>wait)
            return false;
        List<WebElement> elements = driver.findElements(by);
        if (elements != null && elements.size() > 0)
            return true;
        Thread.sleep(250);
    }
    return false;
} 
```

下面的方法是等待页面加载：

```
public void waitForPageLoadingToComplete() throws Exception {
    ExpectedCondition<Boolean> expectation = new ExpectedCondition<Boolean>() {
        public Boolean apply(WebDriver driver) {
            return ((JavascriptExecutor) driver).executeScript(
                    "return      document.readyState").equals("complete");
        }
    };
    Wait<WebDriver> wait = new WebDriverWait(driver, 30);
    wait.until(expectation);
} 
```

假设您正在等待页面加载。`true`然后调用第一个方法，等待时间和页面加载后出现的任何元素，否则它将返回`false`。像这样使用它，

```
waitForElementToBePresent(By.id("Something"), 20000) 
```

上面调用的函数一直等待，直到它在给定的持续时间内找到给定的元素。

在上述方法之后尝试以下任何代码

```
WebDriverWait wait = new WebDriverWait(webDriver, timeoutInSeconds);
wait.until(ExpectedConditions.visibilityOfElementLocated(By.id<locator>)); 
```

或者

```
wait.until(ExpectedConditions.elementToBeClickable(By.id<locator>)); 
```

更新：

```
public boolean waitForTextFiled(By by, int waitInMilliSeconds, WebDriver wdriver) throws Exception
    {
        WebDriver driver = wdriver;
        int wait = waitInMilliSeconds;
        int iterations  = (wait/250);
        long startmilliSec = System.currentTimeMillis();
        for (int i = 0; i < iterations; i++)
        {
            if((System.currentTimeMillis()-startmilliSec)>wait)
                return false;
            driver.findElement(By.id("txt")).sendKeys("Something");
            String name =  driver.findElement(by).getAttribute("value");

            if (name != null && !name.equals("")){
                return true;
            }
            Thread.sleep(250);
        }
        return false;
    } 
```

这将尝试在文本字段中输入文本，直到给定时间（以毫秒为单位）。如果`getAttribute()`不适合您的情况使用`getText()`。如果输入了文本，则返回 true。把你可以等到的最长时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T02:12:17.440

您可能想尝试这样做以使元素在屏幕上可见。

```
new WebDriverWait(10, driver).until(ExpectedConditions.visibilityOfElementLocated(By.id("jxxx")). 
```

在这种情况下，等待时间最长为 10 秒。

# ruby-on-rails - 通过 has_many 访问连接模型数据

> ID：16016123
> 
> 赞同：1
> 
> 时间：2013-04-15T13:15:36.323
> 
> 标签：ruby-on-rails, ruby, has-many-through

我有一个多对多的关联，例如

```
class User < ActiveRecord::Base
  has_many :working_groups
  has_many :groups, :through => :working_groups

class Group < ActiveRecord::Base
  has_many :working_groups
  has_many :users, :through => :working_groups

class WorkingGroup < ActiveRecord::Base
    belongs_to :user
    belongs_to :group 
```

Working_Groups 关联有一些关于每个关系的附加信息（例如成员的顺序和类型）：

```
create_table "working_groups", :force => true do |t|
    t.integer  "group_id"
    t.integer  "user_id"
    t.integer  "position"
    t.string   "role"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false 
```

在用户视图中，我试图显示用户所属的所有组的列表及其成员资格类型（存储在联接表中）。我发现完成这项工作的唯一方法是这样的，它看起来非常丑陋，而且不是有史以来最有效的事情......

名称 角色

有一个更好的方法吗？一定会有更好的办法...

# sql-server-2008 - SQL Server 2008 共享点列表

> ID：16016124
> 
> 赞同：0
> 
> 时间：2013-04-15T13:15:40.043
> 
> 标签：sql-server-2008, sharepoint

我正在尝试将`sharepoint`列表链接到另一个使用`sql server database`. 理想的情况是链接到实时链接，这样当共享点列表中的数据更新时，sql server 数据库中的数据也会更新。我需要这样做的原因是我有一个 ASP 页面，它将查询 SQL 数据库并在网页上显示结果。

任何指导将不胜感激

提前致谢

西杰

> PS：在使用外部数据选项卡->更多->共享点列表之前，我已经在访问中完成了此操作，然后按照向导中的步骤进行操作，所以我知道这是可能的。只是不确定如何使用 SQL Server 作为数据的目标来重新创建它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:38:15.400

您可以使用 BCS（业务连接服务）或使用[http://www.bendsoft.com/net-sharepoint-connector/之类的连接器构建自定义内容](http://www.bendsoft.com/net-sharepoint-connector/)

这是关于 BCS 的小指南[http://zimmergren.net/technical/sp-2010-programmatically-work-with-external-lists-bcs-in-sharepoint-2010](http://zimmergren.net/technical/sp-2010-programmatically-work-with-external-lists-bcs-in-sharepoint-2010)

# java - 使用用户输入通过 Web 应用程序安排作业

> ID：16016125
> 
> 赞同：1
> 
> 时间：2013-04-15T13:15:44.487
> 
> 标签：java, jsp, quartz-scheduler

我正在使用石英调度程序。而且我可以毫无问题地以通常的方式安排工作。

**代码**

```
public class QuartzTest implements Job {

    public void execute(JobExecutionContext context)
            throws JobExecutionException {
                System.out.println("Hello Quartz on " + new Date());
            }

    public static Scheduler scheduler;

    public void scheduleLoad(String time, int jobNo) {
        try {
            // Transform user input into a date
            SimpleDateFormat dateFormat = new SimpleDateFormat("MM/dd/yyyy:HH:mm:ss");
            Date scheduleDate = dateFormat.parse(time);

            // Grab the Scheduler instance from the Factory 
            //Scheduler 
            scheduler = StdSchedulerFactory.getDefaultScheduler();

            // Listener
            //scheduler.getListenerManager().addJobListener(new SimpleJobListener());

            // and start it if it is shut down
            if(!scheduler.isStarted())
                scheduler.start();

            // Define a job and tie it to a class
            JobDetail job = newJob(QuartzTest.class)
                    .withIdentity("job"+jobNo)
                    .build();

            // Define trigger 
            SimpleTrigger trigger = (SimpleTrigger) newTrigger()
                    .startAt(scheduleDate)
                    .forJob("job"+jobNo)
                    .build();

            // Schedule job using trigger
            scheduler.scheduleJob(job, trigger);

        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public static void main(String[] args) throws SchedulerException {
        String runTime = "04/15/2013:17:37:10";
        QuartzTest quartz = new QuartzTest();
        quartz.scheduleLoad(runTime,1);
        String runTime2 = "04/15/2013:17:37:15";
        quartz.scheduleLoad(runTime2,2);
        String runTime3 = "04/15/2013:17:37:20";
        quartz.scheduleLoad(runTime3,3);
    }
} 
```

但我必须创建一个网络应用程序，在其中我必须使用“用户输入”来安排工作。这就是我卡住的地方。我该怎么做呢 ？我将使用 JSP。

**例如-用户 1 的命令**- /home/user/load.sh -a -b -c（安排在星期一） **用户 2 的命令**- /home/user/load.sh -a -b -g（安排在星期二）

我可以从网页中获取用户的命令、计划日期等作为字符串，然后稍后在 Quartz 调度程序中解析该字符串。但是我如何首先将这个字符串传递给 Quartz 来安排用户的工作？

只是为了让自己清楚- **我希望用户能够定义自己的工作和时间表。**

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:43:56.240

您需要一个`HttpServlet`在应用程序`web.xml`文件中注册的扩展类。再次，查看[wiki](https://stackoverflow.com/tags/servlets/info)，了解如何执行此操作

```
@WebServlet("/jobs") // only with Servlet 3.0  
public class SchedulerServlet extends HttpServlet {

    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // get input parameter
        String time = request.getParameter("time");
        // validate that it is not null/empty and is valid time (custom method)
        if (time != null && !time.isEmpty() && isValidTime(time)) {
            int jobNo = ... // generate job no
            YourJobScheduler scheduler = ... // get scheduler
            JobDetails jobDetails = scheduler.scheduleLoad(time, jobNo); // maybe this return details of the scheduled job

            request.setAttribute("jobDetails", jobDetails);             
            // do something with response
            request.getRequestDispatcher("/WEB-INF/ShowJobDetails.jsp").forward(request, response);
        }

        // missing input parameter, so send error 
    }
} 
```

此类将获取输入参数`time`，对其进行验证，然后将其传递给您的调度程序，这基本上是您在问题中使用的方法，除了它可能返回一个包含您刚刚安排的作业的详细信息的对象。如果将该对象添加到请求属性中，则可以在视图中显示它（作为`jsp`）。

# javascript - 在数组中使用字符串

> ID：16016129
> 
> 赞同：0
> 
> 时间：2013-04-15T13:15:47.083
> 
> 标签：javascript, arrays, string

我有一个字符串变量，我定义为：

```
var regn="[1,75],[2,59],[3,66],[4,92],[5,67],[6,77],[7,75],[8,80],[9,67],[10,56],[11,67],"; 
```

我还使用了一些 javascript 代码，它获取数组中的值并从这些值中绘制折线图。部分代码如下所示。

```
 var graphData = [{
        data: [[1,75],[2,59],[3,66],[4,92],[5,67],[6,77],[7,75],[8,80],[9,67],[10,56],[11,67],],
        color: '#77b7c5',
        points: { radius: 4, fillColor: '#77b7c5' }
    }
]; 
```

我试图用我上面定义的变量替换数组中的数据，但是当我这样做时图表不起作用。这是我的代码：

```
var graphData = [{
        data: [regn],
        color: '#77b7c5',
        points: { radius: 4, fillColor: '#77b7c5' }
    }
]; 
```

我哪里出错了，或者我应该如何将我的字符串中的数据获取到该数组？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T13:20:03.853

You need to parse the string first. This is usually done using **[`JSON.parse`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/parse)**:

```
var regn="[[1,75],[2,59],[3,66],[4,92],[5,67],[6,77],[7,75],[8,80],[9,67],[10,56],[11,67]]";
var arr = JSON.parse(regn) // now it's an Array 
```

If you need to support browsers that don't support `JSON.parse` you can patch this using **[JSON3](https://github.com/bestiejs/json3)**

Aside: In addition to that please notice that regn has a stray trailing comma and needs to be wrapped in a `[]` or `{}` (the object approach would also need keys then, so the array is the way to go here), so it's not valid JSON the way you have posted it (don't know if this happened by accident or not).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T06:41:54.343

1.  用 '],[' 分割 regn。
2.  从每个块中删除除数字和逗号之外的任何内容
3.  用 ',' 分割每个块，限制为 2 个块
4.  完毕！

 `````
var parseRegn = function (regnStr) {  

    var pairs = regnStr.split('],['),                 // 1
        pairStr = '';

    for (var i = 0; i < pairs.length; i++) {

        pairStr = pairs[i].replace(/[^\d|,]/g, '');   // 2

        if (pairStr.length > 0) {
            pairs[i] = pairStr.split(',', 2);         // 3
        }
    }
    return pairs;                                     // 4
}; 
````  `* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T13:42:22.297

带有正则表达式解析的替代版本：

```
var regn="[1,75],[2,59],[3,66],[4,92],[5,67],[6,77],[7,75],[8,80],[9,67],[10,56],[11,67],";
var rez = [];
var regex = /\[(\d+),(\d+)\]/g;
var match;
while ((match = regex.exec(regn)) != null) {
    rez.push([match[1], match[2]]);
}

graphData.data = rez; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T13:45:25.057

代替

```
var regn="[1,75],[2,59],[3,66],[4,92],[5,67],[6,77],[7,75],[8,80],[9,67],[10,56],[11,67]," 
```

尝试这个，

```
var regn=[[1,75],[2,59],[3,66],[4,92],[5,67],[6,77],[7,75],[8,80],[9,67],[10,56],[11,67]];

var graphData = [{
            data: regn,
            color: '#77b7c5',
            points: { radius: 4, fillColor: '#77b7c5' }
        }
    ]; 
`````

# facebook - 在 Facebook Graph API 中搜索长帖子？

> ID：16016131
> 
> 赞同：0
> 
> 时间：2013-04-15T13:15:57.810
> 
> 标签：facebook, facebook-graph-api

是否可以在 Graph API 中搜索 Facebook 成员在 post.length > n 处所写的帖子？

或者我是否必须在我的代码中提取帖子并解析/过滤它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T13:46:13.773

您可以使用[FQL](https://developers.facebook.com/docs/technical-guides/fql/)进行过滤的 Graph API 调用。

此查询将让您发布一条包含超过 50 个字符的单词“this”的消息。

```
SELECT message, post_id FROM stream WHERE CONTAINS("this") and strlen(message) > 50 LIMIT 100 
```

该`CONTAINS()`功能没有记录。根据我的实验，它搜索多个字段并进行了优化以返回基于全名的匹配项。

# ruby-on-rails - 发送邮件时出错（SSL_connect returned=1 errno=0 state=SSLv2/v3 read server hello A: unknown protocol）

> ID：16016137
> 
> 赞同：6
> 
> 时间：2013-04-15T13:16:12.983
> 
> 标签：ruby-on-rails, redmine

配置.yml

```
development:
   email_delivery:
     delivery_method: :smtp
     smtp_settings:
      #tls: true
       #enable_starttls_auto: true
       openssl_verify_mode: 'none'
       address: "domain name" 
       port: 25
       authentication: :login
       domain: 'mail domail name'
       user_name: 'mail id'
       password: 'pwd' 
```

此代码用于发生以下错误

发送邮件时出错：

`SSL_connect returned=1 errno=0 state=SSLv2/v3 read server hello A: unknown protocol`

* * *

```
development:
email_delivery:
delivery_method: :smtp
smtp_settings:
tls: true
enable_starttls_auto: true
openssl_verify_mode: 'none'
address: "domain name" 
port: 587
authentication: :login
domain: 'mail domail name'
user_name: 'mail id'
password: 'pwd' 
```

此代码用于发生以下错误

发送邮件时出错：

`No connection could be made because the target machine actively refused it. - connect(2)`

* * *

```
development:
email_delivery:
delivery_method: :async_smtp
smtp_settings:
tls: true
enable_starttls_auto: true
openssl_verify_mode: 'none'
address: "domain name" 
port: 25
authentication: :login
domain: 'mail domail name'
user_name: 'mail id'
password: 'pwd' 
```

## 没有发生错误但仍然没有收到用户的邮件。

```
development:
email_delivery:
delivery_method: :smtp
smtp_settings:
tls: true
enable_starttls_auto: true
openssl_verify_mode: 'none'
address: "domain name" 
port: 25
authentication: :login
domain: 'mail domail name'
user_name: 'mail id'
password: 'pwd' 
```

此代码使用 redmine 版本 2.2.3 可以正常使用。但现在使用的 2.3.0 版无法正常工作。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-07-07T10:25:33.207

在与这个问题斗争了几个小时之后，这就是我想出的（对我有用）

```
email_delivery:
  delivery_method: smtp
  smtp_settings:
    openssl_verify_mode: none
    tls: false
    enable_starttls_auto: true
    address: smtp.xxx.xx
    port: 587
    domain: xxx.xx
    authentication: login
    user_name: "xxx@xxx.xx"
    password: xxx 
```

确保地址与域匹配并且可以解析

# php - wordpress get_post_meta 只给出第一个值

> ID：16016143
> 
> 赞同：0
> 
> 时间：2013-04-15T13:16:39.930
> 
> 标签：php, wordpress

我发了一篇自定义帖子，其中有一个*自定义字段*调用**_as_roomname**。

我创建了总共 5 个自定义帖子，我想检索它的所有名称，但我只得到第一个值。

```
function postlogo(){
global $post;
$counting = 1;
$count = 1;
$args = array( 'post_type' => 'casino', 'posts_per_page' => 5 );
$rPosts = new WP_Query($args);

while ($rPosts->have_posts()) : $rPosts->the_post();?>
<h1><?php echo get_post_meta(get_the_id(), '_as_roomname', true);?> Review </h1><?php
$count = $count + 1;    
endwhile;
} 
```

**输出**

```
Casino.com Review
Casino.com Review
Casino.com Review
Casino.com Review
Casino.com Review 
```

我想要所有帖子中的这个唯一名称，但它只给我第一个值。我怎么会得到我不知道的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T13:19:30.797

You are passing current post id (`get_the_id()`) in get_post_meta function which seems incorrect. Pass the id of the post you are getting in loop.

```
 get_post_meta($rPosts->post->ID , '_as_roomname', true); 
```

# http - 使用 WinInet 进行 HTTP 上传

> ID：16016144
> 
> 赞同：1
> 
> 时间：2013-04-15T13:16:40.210
> 
> 标签：http

我正在使用 WinInet 库进行 http(PUT) 上传，在 WinXP 上它工作正常，但在 Win7 上它不工作，奇怪的是 WinInet 文件的“InterWriteFile”函数返回 true。任何帮助将不胜感激。提前致谢。

```
//this is the first function that is called when upload is requested.
void Upload()
{
//check if handle is already open or not
    if(!m_hNetOpen)
    {
    //open interconnect: Initializes an application's use of the WinINet functions.
        m_hNetOpen = InternetOpen("XYZ", 
            INTERNET_OPEN_TYPE_DIRECT,
            NULL,
            NULL,
            INTERNET_INVALID_PORT_NUMBER);  

        //return if handle is NULL
        if(m_hNetOpen == NULL)
        {
            return FALSE;
        }   
    }                                                                        

    //we'll get user specified URL, could be some xyz.com too. 
    if(!m_hNetConnect)
    {
    //opens HTTP or FTP connection for a site requested...pchServerName requested
        m_hNetConnect = InternetConnect(m_hNetOpen, 
            strServerName, 
            INTERNET_DEFAULT_HTTP_PORT,
            NULL,
            NULL,
            INTERNET_SERVICE_HTTP,
            INTERNET_FLAG_PASSIVE,
            dwContext);  
        //return if handle is NULL
        if(m_hNetConnect == NULL)
        {
            return FALSE;
        }
    }    

    dwContext = 0;
    //now, create HTTP request
    m_hHttpConnect = HttpOpenRequest(m_hNetConnect,
        "PUT",
        strObjectName,
        NULL,
        NULL,
        NULL,
        INTERNET_FLAG_CACHE_IF_NET_FAIL,
        dwContext);  
    //return if handle is NULL
    if(m_hHttpConnect == NULL)
    {
        return FALSE;
    }    

    //call UseHttpSendReqEx
    BOOL bRet = UseHttpSendReqEx(m_hHttpConnect, strUploadFileName);  

//if not suuceeded log the message
    if(!bRet)
    {
        //Logmessage
    }  
    if(m_hHttpConnect)
    {
        //close the handle
        InternetCloseHandle(m_hHttpConnect);
    }    

    return bRet;
}

//this function is will send HTTP request and writes data to internetfile
BOOL UseHttpSendReqEx(HINTERNET hConnect, char *upFile)
{
    INTERNET_BUFFERS BufferIn = {0};
    DWORD dwBytesRead = 0;
    DWORD dwBytesWritten = 0;
  //buffer
    BYTE strBuffer[20480] = {0};
    BOOL bRead;
    BOOL bRet = TRUE;  

    //get the size of structure
    BufferIn.dwStructSize = sizeof(INTERNET_BUFFERS);  

    //create file
    m_hFile = CreateFile(upFile, GENERIC_READ, FILE_SHARE_READ | FILE_SHARE_DELETE,
        NULL, OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL, NULL);

    //check for invalid handle
    if (m_hFile == INVALID_HANDLE_VALUE)  
    {
        return FALSE;
    }  

    //get the file size
    BufferIn.dwBufferTotal = GetFileSize(m_hFile, NULL);  

    //send request to HTTP server
    if(!HttpSendRequestEx(hConnect, &BufferIn, NULL, HSR_INITIATE, 0))
    {
        //close the file handle
        CloseHandle(m_hFile);
        m_hFile = NULL;
        return FALSE;
    }  

    DWORD sum = 0;
    do
    {
        //read the file that is to be uploaded
        if (!(bRead = ReadFile(m_hFile, strBuffer, sizeof(strBuffer),
            &dwBytesRead, NULL)))
        {
            bRet = FALSE;
            break;
        }  

        //write the internet file
        bRet=InternetWriteFile(hConnect, strBuffer, dwBytesRead,
            &dwBytesWritten);  

        if(!bRet)
        {
            DWORD d = GetLastError();
            bRet = FALSE;
            break;
        }
        memset(strBuffer, '\0', sizeof(strBuffer));
        sum += dwBytesWritten;
    }
    while(dwBytesRead == sizeof(strBuffer)) ;

    //This sleep was introduced as if we immediately after the above loop
    //if we try to close the handle then file does not get created on the   server  
    Sleep(100);
    BOOL b = CloseHandle(m_hFile);
    m_hFile = NULL;  

    return bRet;
} 
```

# sitemap - 谷歌站点地图只需要站点中的所有文章或索引最新吗？

> ID：16016157
> 
> 赞同：0
> 
> 时间：2013-04-15T13:17:15.483
> 
> 标签：sitemap

现在，我们有大约 400 种产品动态生成的站点地图，并将其提交到谷歌站点地图中以用于索引目的。每次谷歌站点地图抓取它时，它总是会访问服务器资源以生成 400 个产品的 xml 格式。由于大多数产品已经被谷歌索引，我想减少动态站点地图，只生成最新的 50 个产品以节省服务器资源。

我正在搜索有关谷歌站点地图是否需要定期索引所有产品或只需要尚未索引的最新产品的解释？请给我建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:18:48.543

将您想要编入索引的每个页面都放在站点地图中。即使是那些旧的并且已经包含在谷歌索引中的页面。站点地图不会告诉搜索引擎有关新内容的信息。他们在那里告诉他们您想要编入索引的*所有内容。*

# python-2.7 - SIP Makefile 失败（gnuwin 和 mingw）

> ID：16016160
> 
> 赞同：2
> 
> 时间：2013-04-15T13:17:21.590
> 
> 标签：python-2.7, makefile, mingw, python-sip, gnuwin32

我已经下载了适用于 python 2.7 的 Sip 模块，创建了一个 makefile 并在`make`带有 makefile 的目录上尝试了命令，但是我收到了这个错误：

```
Makefile:3: recipe for target 'all' failed
mingw32-make[10]: *** [all] Error 2
mingw32-make[10]: Leaving directory 'D:/Users/myLogin/Downloads/python/sip-4.14.5' 
```

Gnuwin 和 mingw32 都出现此错误。所以我现在不知道该怎么办。任何想法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-17T04:00:18.963

如果使用`python configure.py`，则生成`Makefile`的 s 实际上是`nmake`makefile。`nmake`是微软的等价物`make`。`nmake`如果您安装了 Visual Studio 命令提示符，则可以通过调用它来运行它。

对于使用 进行构建`mingw`，您必须在创建 makefile 时指明要使用该特定平台，如下所示：

```
python configure.py --platform win32-g++ 
```

之后，调用`make`工作正常。

* * *

`make`关于在`nmake`makefile上运行时会发生什么的一些细节。生成的`nmake`文件以以下行开头：

```
all:
    cd sipgen
    $(MAKE)
    @cd ..
    cd siplib
    $(MAKE)
    @cd .. 
```

因为每一行的每条命令都是在一个新的shell中执行的，所以结果`cd sipgen`实际上是无效的。然后，`make`在当前目录中再次调用——这会导致`make`调用的无限递归循环。您的`[10]`错误消息中的 表明它处于第 10 级递归。我想那是你按下的那一刻`Ctrl`- `C`:-)

# powershell - Powershell：所有新对象都不是平等的吗？

> ID：16016166
> 
> 赞同：5
> 
> 时间：2013-04-15T13:17:40.313
> 
> 标签：powershell

我正在为 powershell 上的演示文稿编写一些简短的演示脚本，当然我自己的一个简单演示让我感到困惑。此演示的目的是展示在 powershell 中创建对象的不同方法。这是我的代码：

```
$file = ls 'C:\temp' | Where-Object {$_.Extension -eq '.txt'}
$file.FullName
$path = 'C:\temp\jdh.txt'
$newfile = New-Object -TypeName System.IO.FileInfo -ArgumentList $path
$newfile.FullName

$file.GetType()
$newfile.GetType()
$file
$newfile

$file | Get-Content | out-null
$newfile | Get-Content | out-null 
```

简单吧？通过不同的方法创建两个 FileInfo 对象并读取它们。输出显示文件是相同的：

```
C:\temp\jdh.txt
C:\temp\jdh.txt

IsPublic IsSerial Name                                     BaseType                                                                               
-------- -------- ----                                     --------                                                                               
True     True     FileInfo                                 System.IO.FileSystemInfo                                                               
True     True     FileInfo                                 System.IO.FileSystemInfo                                                               

LastWriteTime : 4/10/2013 3:38:29 PM
Length        : 46046
Name          : jdh.txt

LastWriteTime : 4/10/2013 3:38:29 PM
Length        : 46046
Name          : jdh.txt 
```

但是，当 Get-Content 尝试读取 $newfile 对象时，我收到以下错误：

```
Get-Content : The input object cannot be bound to any parameters for the command either because the command does not take pipeline input or the 
input and its properties do not match any of the parameters that take pipeline input.
At line:16 char:12
+ $newfile | Get-Content | out-null
+            ~~~~~~~~~~~
    + CategoryInfo          : InvalidArgument: (C:\temp\jdh.txt:PSObject) [Get-Content], ParameterBindingException
    + FullyQualifiedErrorId : InputObjectNotBound,Microsoft.PowerShell.Commands.GetContentCommand 
```

所以我在错误中注意到它说 PSObject 让我感到困惑，因为在我的输出中似乎 $newfile 是一个 FileInfo 对象。所以我想做的下一个合乎逻辑的事情是将 $newfile 类型转换为类型 [System.IO.FileInfo]。这产生了同样的错误，除了现在而不是 PSObject 它显示 FileInfo 作为类型。那么，如果 $file 和 $newfile 看起来相同并且 get-content 在 $file 上工作，我怎么会收到该错误？使用 new-object 命令时是否有一些细微的差别？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T13:50:28.330

我跟踪了使用创建的对象的绑定，`New-Object`问题是`Get-Content`无法绑定到`FileInfo`info 对象上的任何属性。

您可以使用以下命令进行检查：

```
Trace-Command -psHost -Name ParameterBinding {$newFile | gc}
Trace-Command -psHost -Name ParameterBinding {$file | gc} 
```

因此，当您查看成功绑定的跟踪时，您会看到 Literal path 绑定到以`Microsoft.PowerShell.Core\FileSystem::`PsPath 开头的属性。因此，通过仔细检查比较管道时的对象属性，`Get-Member`您会发现有效的对象具有这些注释属性，而创建的对象`New-Object`则没有 -

*   PSChildName
*   PSDrive
*   PSI容器
*   PSParentPath
*   PS路径
*   PSProvider

查看`Get-Content`cmdlet 参数，我们可以看到它`LiteralPath`的别名为`PsPath`：

```
(Get-Command -Name Get-Content).ParameterSets

  Parameter Name: LiteralPath
    ParameterType = System.String[]
    Position = 0
    IsMandatory = True
    IsDynamic = False
    HelpMessage =
    ValueFromPipeline = False
    ValueFromPipelineByPropertyName = True
    ValueFromRemainingArguments = False
    Aliases = {PSPath}
    Attributes =
      System.Management.Automation.AliasAttribute
      System.Management.Automation.ParameterAttribute 
```

如果您将属性添加到`New-Object`创建的`FileInfo`它将起作用：

```
$newFile | Add-Member -MemberType NoteProperty -Name PsPath -Value 'Microsoft.PowerShell.Core\FileSystem::C:\temp\jdh.txt' 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-15T13:47:19.507

请记住，New-Object 只是创建了一个 PowerShell 对象的实例……它没有将任何内容写入文件。使用

```
Test-Path $path 
```

显示该文件尚不存在。因此，添加一些代码来实际创建文件，然后分配回它，不会产生错误。

```
Test-Path $path

$stream = [System.IO.StreamWriter] $path
1..10 | % {
      $stream.WriteLine($s)
}
$stream.close()

$newfile = Get-Content $path

$file | Get-Content | out-null
$newfile | Get-Content | out-null 
```

我们分配回 $newfile 因为它是一个参考。如果我们事后创建文件，它不会自动更新。

# ruby-on-rails - 如何在 rspec/capybara 中使用一个参数通过数组中的迭代运行相同的测试

> ID：16016167
> 
> 赞同：1
> 
> 时间：2013-04-15T13:17:42.530
> 
> 标签：ruby-on-rails, rspec, iteration, capybara, declarative-authorization

我正在使用 rails rspec/capybara/declarative_authorization。我必须对很多不同的用户运行相同的测试：

```
 describe "Revision in root folder" do
   before do
     with_user(@guest) do
       visit revisions_path
     end
   end
   it { should have_selector('div.alert.alert-error', text: auth_error_text) }
 end
...
 describe "Revision in root folder" do
   before do
     with_user(@user1) do
       visit revisions_path
     end
   end
   it { should have_selector('div.alert.alert-error', text: auth_error_text) }
 end 
```

唯一的参数是调用**with_user**的用户。我能否以某种方式只使用一个**描述**块，并遍历一组用户，以保持我的测试 DRY。重要的是，@guest 和 @user1 是在**before(:all)**块中创建的，因此在解析规范时它们不可用。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T13:32:17.357

```
describe "Revision in root folder" do
  users = [@guest, @user1]
  users.each do |user|
    before do
      with_user(user) do
        visit revisions_path
      end
    end
    it { should have_selector('div.alert.alert-error', text: auth_error_text) }
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:56:38.257

没有那么多 DRYer，但你介意嵌套你的规格吗？这样，您就可以考虑用户和来宾之间的任何不同的预期行为。

```
describe "Revision in root folder" do
  context "as a guest" do
    before do
      with_user(@guest) do
        visit revisions_path
      end
    end
    it { should have_selector('div.alert.alert-error', text: auth_error_text) }
  end

  context "as a user" do
    before do
      with_user(@user1) do
        visit revisions_path
      end
    end
    it { should have_selector('div.alert.alert-error', text: auth_error_text) }
  end
end 
```

如果您最终得到更多重复的`it`语句，您可能可以将它们重构为[共享示例](https://www.relishapp.com/rspec/rspec-core/docs/example-groups/shared-examples)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-21T13:04:10.480

现代版本的 Rspec 允许在没有猴子补丁的情况下复制示例。请看一下这个要点[https://gist.github.com/SamMolokanov/713efc170d4ac36c5d5a16024ce633ea](https://gist.github.com/SamMolokanov/713efc170d4ac36c5d5a16024ce633ea)

可能会提供不同的用户作为`shared_context`-`user`将在实际测试中可用：

```
 shared_context "Tested user" do
    let(:user) { |example| example.metadata[:user] }
  end 
```

在克隆期间，我们可以做

```
 USERS.each { |user| example.duplicate_with(user: user) } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-24T09:41:04.497

我有同样的问题，我通过以下方式解决它：

```
[:user_type_1, :user_type_2].each do |user_type|
   let(:user) { create(user_type) }
   before do
     with_user(user) do
       visit revisions_path
     end
   end
   it { should have_selector('div.alert.alert-error', text: auth_error_text) }
end 
```

# javascript - jQuery：放大网页元素

> ID：16016169
> 
> 赞同：0
> 
> 时间：2013-04-15T13:17:43.343
> 
> 标签：javascript, jquery, html, css

有谁知道用于放大页面上的 html 元素的插件或一些示例代码？我使用*了 zoomooz.js*，它运行良好，但我希望当用户放大一个元素时，该元素有滚动条。我的元素还包含另一个像这样的元素：

```
<div id="zoomView">
   <div id="innerElement">
      some elements ...
      <input type="text" />
   </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T15:07:27.430

JavaScript 函数：

```
function zoom(value){
  document.getElementById('idofyourelement').style.zoom=value;  
} 
```

在您的 html 中，您可以使用它：

```
<!--Zoom Controls-->
<div id="zoom_controls">
  <span>-</span>
  <input type="range" min="0.7" max="2.2" value="1" step="0.1" onchange="zoom(this.value)"/>
  <span>+</span>
</div> 
```

# c# - C# ASP.Net 中带有 HTML 标记的 HTML 字符串的 PDF

> ID：16016172
> 
> 赞同：0
> 
> 时间：2013-04-15T13:17:46.380
> 
> 标签：c#, asp.net, c#-4.0, c#-3.0, itextsharp

我正在使用 ITextSharp 从 HTML 字符串创建 PDF。我已经编写了以下代码，但是如果 strReplace 是我的带有标签的 HTML 字符串，我如何在 C# 中使用 itextSharp 生成 PDF？

```
 MemoryStream PDFData = new MemoryStream();
      Document document = new Document(PageSize.LETTER, 50, 50, 80, 50);
      PdfWriter PDFWriter = PdfWriter.GetInstance(document, PDFData);
      PDFWriter.ViewerPreferences = PdfWriter.PageModeUseOutlines;

     document.Open();
     AddOutline(PDFWriter, "", document.PageSize.Height);

     document.Add(new Paragraph("\r\n"));

       StringBuilder strReplace = new StringBuilder();
       strReplace.Append(strTemplate);

                        var query = (from c in objAMSContainer.tblincomes
                                     join o in objAMSContainer.tblincomedetails on     c.colId equals o.ColId
                                     where c.colId == 9
                                     && c.colIsDeleted == false
                                     select new { c.colId, o.colQuantity, o.colPrice, o.colAmount }).ToList();

                        for (int j = 0; j < query.Count; j++)
                        {

                            // strReplace.Replace("[ITEM]", Convert.ToString(query[j].colId));
                            strReplace.Replace("${QTY}", Convert.ToString(query[j].colQuantity));
                            strReplace.Replace("${PRICE}", Convert.ToString(query[j].colPrice));
                            strReplace.Replace("${TOTAL}", Convert.ToString(query[j].colAmount));

                        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:59:49.903

不是最好的方法，但您可以通过 iText 的 HTML 到 PDF 转换器运行它。

```
// convert string to stream
byte[] byteArray = Encoding.UTF8.GetBytes(strReplace);
MemoryStream stream = new MemoryStream(byteArray);

//get the XMLWorkerHelper Instance
XMLWorkerHelper worker = XMLWorkerHelper.getInstance();
//convert to PDF
worker.parseXHtml(PDFWriter , document, stream);

//close the document
   document.close();
   //close the writer
   pdfWriter.close(); 
```

# c++ - 如何将本地端点绑定到套接字？

> ID：16016174
> 
> 赞同：0
> 
> 时间：2013-04-15T13:17:52.320
> 
> 标签：c++, sockets, boost-asio, local, endpoint

我有以下代码，我试图通过手动更改套接字的端点将数据包发送到特定客户端，但我不确定如何配置套接字以使用该`async_write`函数发送数据包。第 44-47 行用于尝试解决 boost 异步服务器示例（已修改）中的问题。

```
#include <cstdlib>
#include <iostream>
#include <boost/bind.hpp>
#include <boost/asio.hpp>

using boost::asio::ip::tcp;

class session
{
public:
  session(boost::asio::io_service& io_service)
    : socket_(io_service)
  {
  }

  tcp::socket& socket()
  {
    return socket_;
  }

  void start()
  {
      std::cout<<"start(): "<<std::endl;
          socket_.async_read_some(boost::asio::buffer(data_, max_length),
          boost::bind(&session::handle_read, this,
          boost::asio::placeholders::error,
          boost::asio::placeholders::bytes_transferred));
  }
void read_handler(const boost::system::error_code& ec, std::size_t bytes_transferred);

private:
  void handle_read(const boost::system::error_code& error,
      size_t bytes_transferred)
  {
      std::cout<<"handle read: bytes_transferred"<<bytes_transferred<<std::endl;
    if (!error)
    {
          data_ = {'0','1','2','3','4','5','6','7','8','9'};
          /*read_handler(error, bytes_transferred);
          boost::asio::async_write(socket_,boost::asio::buffer(data_, bytes_transferred),
                boost::bind(&session::handle_write, this,
                            boost::asio::placeholders::error));*/
          boost::system::error_code ec;
          boost::asio::ip::tcp::endpoint endpoint = socket_.remote_endpoint(ec);
          std::cout<<"ip address: "<<endpoint.address()<<std::endl;
          std::cout<<"port: "<<endpoint.port()<<std::endl;
          //how to get the socket to send data to specific port, ip-address e.g. changing the ip-address and port by editing it?
          async_write(socket_, boost::asio::buffer(data_, max_length), boost::bind(&session::writeHandler, this, boost::asio::placeholders::error, boost::asio::placeholders::bytes_transferred));
    }
    else
    {
      delete this;
    }
  }
  void writeHandler(const boost::system::error_code& errorCode, size_t bytesTransferred)
  {
        std::cout << "DEBUG> Transfered " << bytesTransferred << " bytes to " << socket_.remote_endpoint().address().to_string() << std::endl;
  }
  void handle_write(const boost::system::error_code& error)
  {
      std::cout<<"handle write: "<<std::endl;

    if (!error)
    {
            std::cout<<"before: "<<data_<<std::endl;

            socket_.async_read_some(boost::asio::buffer(data_, max_length),
            boost::bind(&session::handle_read, this,
            boost::asio::placeholders::error,
            boost::asio::placeholders::bytes_transferred));

            std::cout<<"after: "<<data_<<std::endl;
    }
    else
    {
      delete this;
    }
  }

  tcp::socket socket_;
  enum { max_length = 1024 };
  char data_[max_length];
};
void session::read_handler(const boost::system::error_code& ec, std::size_t bytes_transferred)
{
      std::cout<<bytes_transferred<<std::endl;
}

class server
{
public:
  server(boost::asio::io_service& io_service, short port)
    : io_service_(io_service),
      acceptor_(io_service, tcp::endpoint(tcp::v4(), port))
  {
    start_accept();
  }

private:
  void start_accept()
  {
    session* new_session = new session(io_service_);
    acceptor_.async_accept(new_session->socket(),
        boost::bind(&server::handle_accept, this, new_session,
          boost::asio::placeholders::error));
  }

  void handle_accept(session* new_session,
      const boost::system::error_code& error)
  {
    if (!error)
    {
      new_session->start();
    }
    else
    {
      delete new_session;
    }

    start_accept();
  }

  boost::asio::io_service& io_service_;
  tcp::acceptor acceptor_;
};

int main()
{
  try
  {
    boost::asio::io_service io_service;
    server s(io_service, 4000);

    io_service.run();
  }
  catch (std::exception& e)
  {
    std::cerr << "Exception: " << e.what() << "\n";
  }

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T13:31:19.380

看起来您正在尝试将 UDP 的一些概念应用于 TCP 流。

TCP 需要通过 3 次握手建立连接。因此，您不能简单地通过修改套接字的 ip 远程端点地址来向另一个客户端发送数据。

TCP 服务器侦听传入的连接，接受它们，并在此过程结束时有一个有效的 TCP 套接字，您可以在其中写入数据。每个客户端都有自己的套接字。另请注意，TCP 套接字提供数据流（不是数据包/数据报）。

另一方面，UDP 没有连接的概念。您可以使用同一个 UDP 套接字（boost::asio::ip::udp::socket::send_to）将数据报发送到多个端点

# javascript - 使用 javascript 聚焦时清除 TextField

> ID：16016176
> 
> 赞同：0
> 
> 时间：2013-04-15T13:17:55.057
> 
> 标签：javascript, testing, user-interface, automation

我想从我之前设置的文本字段中删除文本。注意：不使用 javascript 进行 Web 开发或 CSS 等，我是自动化测试和设计用于 GUI 测试的测试脚本的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:21:45.000

`onfocus="this.value = '';"`在你的输入标签中怎么样？

注意：通过更多的脚本和使用像 jQuery 这样的库，有更好的方法来做到这一点，但这是最基本的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:22:05.313

@壳牌/伊恩

Dhruv 在不使用 JS/CSS 的情况下询问。

从像 selenium 这样的自动化脚本，你必须编写一些代码，比如

```
Driver.getElementById("id").sendKeys(""); 
```

问候， 阿米特

# asp.net - 可以调整剑道条形图的大小以填充屏幕，但不能调整饼图或仪表

> ID：16016177
> 
> 赞同：0
> 
> 时间：2013-04-15T13:18:00.407
> 
> 标签：asp.net, razor, charts, kendo-ui

单击图表时，我将以下样式应用于我的图表，它隐藏了所有其他 Div 元素并使单击的一个看起来“全屏”：

```
<style>
     .hidden {
                display: none;
             }
     .overlay {
                position: absolute !important;
                top: 0 !important;
                left: 0 !important;
                bottom: 0 !important;
                right: 0 !important;
                width: 100% !important;
                height: 100% !important;
              }
    </style> 
```

使用以下内容：

```
var fullScreen = 0;

    $('#VehicleStatus').click(function () {

    if (fullScreen == 0) {
        var position = $("#VehicleStatus").position();
        var leftCoord = position.left;
        var rightCoord = position.right;
        var topCoord = position.top;
        var bottomCoord = position.bottom;
        $(".all").addClass("hidden");
        $("#VehicleStatus").removeClass("hidden");
        $("#VehicleStatus").addClass("overlay");
        fullScreen = 1;
    }
    else {

        $(".all").removeClass("hidden");
        $("#VehicleStatus").removeClass("overlay");
        $("#VehicleStatus").css("position", "relative");
        $("#VehicleStatus").css("top", topCoord);
        $("#VehicleStatus").css("bottom", bottomCoord);
        $("#VehicleStatus").css("left", leftCoord);
        $("#VehicleStatus").css("right", rightCoord);
        $("#VehicleStatus").css("width", "500px");
        $("#VehicleStatus").css("height", "280px");
        fullScreen = 0;

    }
}) 
```

但是当我使用我的饼图或仪表之一的 ID 时，它们不起作用。仪表只是转到屏幕的左上角并保持其原始大小，而饼图只是从页面中删除所有内容。

有谁知道我要去哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T15:03:55.450

你需要调用刷新，请看我的例子：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="KendoPieChart.aspx.cs"     Inherits="Demo.KendoPieChart" %>

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>
<script src="Scripts/jquery.js"></script>
<script src="Scripts/kendo.all.min.js"></script>

<style>
    .smallChart{ width: 200px;}
    .bigChart{ width: 900px;}
</style>
</head>
<body>
<form id="form1" runat="server">
    <div id="chartContainer" class="smallChart">
        <div id="chart"></div>
    </div>

    <div id="resize">Resize</div>
</form>

<script>
    $("#chart").kendoChart({
        title: {
            text: "Break-up of Spain Electricity Production for 2008"
        },
        legend: {
            position: "bottom"
        },
        seriesDefaults: {
            labels: {
                visible: true,
                format: "{0}%"
            }
        },
        series: [{
            type: "pie",
            data: [{
                category: "Hydro",
                value: 22
            }, {
                category: "Solar",
                value: 2
            }, {
                category: "Nuclear",
                value: 49
            }, {
                category: "Wind",
                value: 27
            }]
        }]
    });

    $('#resize').click(function() {
        $('#chartContainer').toggleClass('smallChart');
        $('#chartContainer').toggleClass('bigChart');

        //$("#chart").redraw();
        var chart = $("#chart").data("kendoChart");
        chart.refresh();
    });
</script> 
```

# c++ - c++错误C2512

> ID：16016178
> 
> 赞同：-1
> 
> 时间：2013-04-15T13:18:07.250
> 
> 标签：c++, constructor

我得到了错误：

```
error C2512:'std::basic_ostream<_Elem,_Traits>' : no appropriate default
constructor available 
```

使用以下代码：

```
class Sentence
{
public:
    Sentence(void){}
    ~Sentence(void);
    static void CreateHeader(std:string& s);
    class Word {
        public:
            std:ostream s;

            Sentence::Word(){ s<<""; }

            Word(char*);
            ~Word();
    };
}; 
```

构造函数`Sentence::World(){ s <<""; };`不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:31:15.817

std:ostream 没有默认构造函数 - 请参阅[http://en.cppreference.com/w/cpp/io/basic_ostream/basic_ostream](http://en.cppreference.com/w/cpp/io/basic_ostream/basic_ostream)

你想做什么？您在寻找 std::cout、std::ofstream 还是 std::stringstream ？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:38:53.900

这是msdn的解释[http://msdn.microsoft.com/fr-fr/library/9zkz8dx6(v=vs.80).aspx](http://msdn.microsoft.com/fr-fr/library/9zkz8dx6(v=vs.80).aspx)

简而言之，您需要添加一个默认构造函数：

```
Sentence(){} 
```

# html - “像素不是像素”和画布，正确的方法是什么？

> ID：16016180
> 
> 赞同：1
> 
> 时间：2013-04-15T13:18:10.667
> 
> 标签：html, mobile, webkit, viewport, gecko

删除 target-densitydpi 后，现在的任务非常有趣。主要浏览器在我的设备上缩放页面 1.5 倍（华为荣耀 android 4.0）。如何防止画布像素化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:19:23.030

可能是由于您的设备没有阻止浏览器根据布局放大或缩小屏幕。在您的头部部分添加一个视口元标记。

```
<meta name="viewport" content="initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width" /> 
```

希望这有效。

# ruby - 你如何上传一个zip文件并解压到s3？

> ID：16016188
> 
> 赞同：1
> 
> 时间：2013-04-15T13:18:35.667
> 
> 标签：ruby, amazon-s3, zip, rubyzip

我正在开发一个必须上传 zip 文件的应用程序。zip 文件基本上是一个静态网站，因此它有很多文件和几个子目录。我已经玩了一段时间的 ruby​​zip gem 并且不知道如何简单地从中提取文件。关于我可以在哪里阅读一些示例的任何指示？我相信以前有人遇到过这个问题。rubyzip 的文档不是很好，所以我希望有人能给我一些指示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-18T02:41:43.443

给你，一个超级神奇的多线程 zip-to-S3 上传器，我根本没有测试过 - 发疯！看来我晚了三年。

```
class S3ZipUploader

  require 'thread'
  require 'thwait'
  require 'find'

  attr_reader *%i{ bucket s3 zip failed_uploads }

  def initialize(zipfilepath, mys3creds)
    # next 4 lines are important
    @s3 = AWS::S3.new(access_key_id: mys3creds[Rails.env]['aws_access_key'],
                         secret_access_key: mys3creds[Rails.env]['aws_secret_access_key'],
                         region: 'us-west-2')
    @bucket = @s3.buckets[ mys3creds[Rails.env]['bucket'] ]

    @failed_uploads = []
    @zip = Zip::File.open(zipfilepath)

  end

  def upload_zip_contents

    rootpath = "mypath/"

    desired_threads = 10
    total_entries = zip.entries.count
    slice_size = (total_entries / desired_threats).ceil
    threads = []
    zip.entries.each_slice(slice_size) do |e_arr|
      threads << Thread.new do |et|
        e_arr.each do |e|
          result = upload_to_s3(rootpath + e.name, e.get_input_stream.read) 
          if !result
            @failed_uploads << {name: e.name, entry: e, error: err}
          end
        end
      end
    end
    ThreadsWait.all_waits(*threads)
  end

  def upload_file_to_s3(filedata,path, rewrite_basepath)
    retries = 0
    success = false
    while !success && retries < 3
      success = begin
        obj = bucket.objects[path]
        obj.write(Pathname.new(outputhtml))
        obj.acl = :public_read
        success = true
      rescue
        retries += 1
        success = false
      end
    end
    return success
  end

end

uploader = S3ZipUploader.new("/path/to/myzip.zip", MYS3CREDS)
uploader.upload_zip_contents 
```

# c# - 操作已返回，但浏览器未获取结果

> ID：16016194
> 
> 赞同：1
> 
> 时间：2013-04-15T13:18:49.050
> 
> 标签：c#, browser, asp.net-mvc-4, lag, jsonresult

在 ASP.NET MVC 4 中，我有一个 [HttpGet] 操作方法，它返回一个 JsonResponse。

```
 public JsonResult List(int domainId)
    {
            ....
    } 
```

当我使用浏览器调用此方法时，通过键入 URL：localhost:43229/GroupsAjax/List?domainId=1，我必须等待大约 50 秒才能看到结果。

我的第一个想法是这个方法太慢了，但是通过添加断点我注意到它已经返回了。

![断点](https://i.stack.imgur.com/84gFt.png)

我也尝试过使用 Iexplorer 并且发生了同样的延迟。根据时间线，在 chrome 中，延迟与“等待时间”相关联

**可能会发生什么？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-24T16:31:55.910

我正在审查（由我提出的）没有答案的旧问题，答案是/曾经：

我应该包含 AsJson() 代码：

```
 public dynamic AsJson()
    {
        return new
        {
           name = this.Name,
           membersCount = this.Members.Count()
        }
    } 
```

查询是这样的：

```
 dynamic results = from g in groups.ToList()
                   select g.AsJson(); 
```

由于 ToList()，“this.Members.Count()”在内存中运行。

所以：查询分为几个部分：**SQL To Entities**和**SQL To Objects**

第一部分很快，第二部分很慢（必须做 Members.Count() N 次，N 是“groups.ToList()”中的结果数

# php - 在 Zend Framework 2 的身份验证中使用加密和盐

> ID：16016197
> 
> 赞同：0
> 
> 时间：2013-04-15T13:18:56.427
> 
> 标签：php, encryption, passwords, zend-framework2, salt

我是一个初学者，但我一直在尝试学习使用 Zend Framework 2。我正在使用从公共存储库克隆的模块来验证用户。它使用 MD5，如下所示：

```
$dbAdapter      = $sm->get('Zend\Db\Adapter\Adapter');
$dbAuthAdapter  = new DbAuthAdapter($dbAdapter, 'user','username','password', 'MD5(?)'); 
```

但是，首先我想使用 MD5 以外的东西（比如 SHA-2？），因为我多次读到 MD5 不再安全，而且我还想使用盐值. 我想为每个用户生成一个随机盐值并将其存储在他们的表行中的单独列中，并将他们的密码存储为哈希盐 + 密码。那部分应该没有问题。

我遇到的问题是如何使用我在模块中设置的适配器来验证它。我想从数据库中获取盐值，将其添加到用户通过登录表单提供的密码中，对其进行加密，并将其与存储的密码进行比较。如何从数据库中获取用户的盐值？如何使用不同的加密而不是 MD5？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T14:05:54.977

我建议你做几件事：

*   在您的用户表中添加另一列，称为 salt 或类似名称。当用户注册时，创建一个 salt 并将其存储到此列中。
*   将站点的静态盐存储在配置文件中。
*   当用户注册时，使用散列函数（如果你愿意，可以使用 sha2）并将密码、静态盐和自定义盐连接成一个经过散列的字符串。
*   存储哈希并确保您使用相同的方法来检查登录密码。

这里有更多信息： http: [//framework.zend.com/manual/2.0/en/modules/zend.crypt.key.derivation.html](http://framework.zend.com/manual/2.0/en/modules/zend.crypt.key.derivation.html)

文档也暗示了这个实现：http: [//framework.zend.com/manual/2.1/en/modules/zend.authentication.adapter.dbtable.html](http://framework.zend.com/manual/2.1/en/modules/zend.authentication.adapter.dbtable.html)

# ios - 减少在 iOS 上使用 OpenCv 的方法消耗的内存

> ID：16016199
> 
> 赞同：8
> 
> 时间：2013-04-15T13:18:56.200
> 
> 标签：ios, objective-c, optimization, opencv, image-processing

我[在 iOS](http://docs.opencv.org/doc/tutorials/ios/table_of_content_ios/table_of_content_ios.html)上使用 OpenCV 在`UIImage`.

该方法`processImage`消耗太多内存。当我使用 Instruments 中的分配来分析应用程序时。`Live Bytes`峰值大约`65MB`持续一`70MB`秒钟。这会导致应用程序崩溃。

它曾经更高，即`~90MB`改变`int ddepth`减少了这个（从`CV_16S`到`CV_8U`）。虽然我确实理解减少“目标图像的所需深度”可能会减少消耗的内存，但我不明白选择最佳格式的内部工作原理。

的减少`ddepth`似乎也增加了方法的执行时间。

我希望大大降低`Live Bytes`峰值并减少方法的执行时间。

任何有关如何实现这一目标的见解将不胜感激。

```
- (void)processImage:(UIImage *)imageToProcess
{
cv::Mat imageMatrix;

double  sigmaX = 1.0;

int ddepth = CV_8U; //  ddepth – The desired depth of the destination image

cv::GaussianBlur( [self cvMatFromUIImage:imageToProcess], imageMatrix, cv::Size(3,3), sigmaX);

cv::Laplacian(imageMatrix, imageMatrix, ddepth, 1);

double minVal;
double maxVal;

cv::minMaxLoc(imageMatrix, &minVal, &maxVal);

std::cout << "min val : " << minVal << std::endl;
std::cout << "max val: " << maxVal << std::endl;

} 
```

编辑说明：我正在使用来自的[cvMatFromUIImage](http://docs.opencv.org/doc/tutorials/ios/image_manipulation/image_manipulation.html#opencviosimagemanipulation)`docs.opencv.org`

编辑更新：我接受了@sansuiso 的回答，因为它减少了`Live Bytes`by `~3MB`。但是，我仍在寻找进一步的减少，任何建议将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T14:18:57.897

该函数`cv::GaussianBlur`可以就地处理图像。您可以将 的输出分配`[self cvMatFromUIImage:imageToProcess]`给您的变量`imageMatrix`，这将避免创建额外的图像并降低峰值，即继续：

```
cv::Mat imageMatrix = `[self cvMatFromUIImage:imageToProcess];
cv::GaussianBlur(imageMatrix, imageMatrix, cv::Size(3,3), sigmax); 
```

您可能还想检查`cvMatFromUIImage`方法的内容，以确保所有内容都在内部正确释放。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T08:08:02.287

它要么是内存泄漏，`[self cvMatFromUIImage:]`要么**经常是内存分配问题**。

为确保没有内存泄漏，请向我们展示`cvMatFromUIImage`清单。

**内存分配**

尝试将所有临时图像转移给班级成员。这消除了不必要的内存分配，您的代码将在每一帧上重用分配的内存。没有内存管理器喜欢用户代码不断分配大量内存并释放它。你应该尽量避免它，因为它会导致内存消耗和崩溃，因为内存管理器可以保持空闲内存使用一段时间（在你解除分配 cv::Mat 之后）。

# session - 我的 PHP 会话路径是如何变化的？

> ID：16016200
> 
> 赞同：0
> 
> 时间：2013-04-15T13:18:58.457
> 
> 标签：session, plesk, parallels

**编辑 - 我的巨大错误**

我发现另一个站点存在我知道的问题不在同一台服务器上。然后我意识到有问题的原始站点也在另一台服务器上，还没有完全移动。有问题的服务器实际上是 Plesk Parallels 的服务器，问题是由于安全更新而在周末应用到服务器的补丁引起的。该服务器确实具有文件路径，我只需将其更改为 777 而不是 77x 即可工作。对于造成的混乱，我深表歉意，并感谢大家试图提供帮助。+ 适合所有人。:)

**原帖**

我在共享托管服务器（也是我的）上有一个网站，从昨天开始给我这个错误：

```
 Warning: session_start() [function.session-start]: open(/var/lib/php/session/sess_678cf69f0f17b87c52136ee0280d23cc, O_RDWR) failed: Permission denied (13) in /var/www/vhosts/domain.net/httpdocs/index.php on line 1 
```

我已经检查`/usr/lib/php.ini`并`/usr/local/lib/php.ini`查看它的设置位置，并且都说它设置为`/tmp`目录，这是它应该设置的位置并且一直存在。该`/var/lib/php/session`目录甚至从未存在过。我确实创建了它并赋予它 777 权限，但这并没有帮助。虽然这里更大的问题是它为什么一开始就改变了。该站点没有 .htaccess 文件，我也无法在站点本身的任何位置找到此文件。

这是此服务器上唯一存在此问题的站点，告诉我它是该网站的本地内容。我只是不知道是什么。所以我的问题是：我应该寻找什么来检查共享托管环境中单个站点的会话保存路径设置，以找出为什么它突然为这个客户端改变？

仅供参考，我正在运行 WHM 服务器。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T13:26:03.813

```
session_save_path(realpath(dirname($_SERVER['DOCUMENT_ROOT']) . '/../tmp')); 
```

您需要在开始会话之前添加上述代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T13:21:37.383

您似乎对服务器上的 /var 目录没有写权限。这有点奇怪，但你可以解决它。在调用 session_start() 之前，调用 session_save_path() 并为其指定服务器可写目录的名称。[更多细节在这里](http://php.net/manual/en/function.session-save-path.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T15:20:58.710

我发现另一个站点存在我知道的问题不在同一台服务器上。然后我意识到有问题的原始站点也在另一台服务器上，还没有完全移动。有问题的服务器实际上是 Plesk Parallels 的服务器，问题是由于安全更新而在周末应用到服务器的补丁引起的。该服务器确实具有文件路径，我只需将其更改为 777 而不是 77x 即可工作。对于造成的混乱，我深表歉意，并感谢大家试图提供帮助。+ 适合所有人。:)

# php - How to get several data from a form?

> ID：16016205
> 
> 赞同：1
> 
> 时间：2013-04-15T13:19:14.187
> 
> 标签：php, forms, symfony-1.4

I have two added form. In the first, I choose one client and for him I add several domains names. Then, when I clik to next, I arrived on a second form in which there are the several domains names (I added before ) in each row with others fields for each one (registar, url and remark). It seems to like this :

> toto.com | Directnic | www.toto.com | blablabla
> toto.fr | Afnic | www.toto.fr | bla
> toto.net | Gandi | www.toto.net | blabla

But when I want to recover this data into my action to add them into my database, I get only the last line. Why ?

My form :

```
<form action="<?php echo url_for('@add_domaines');?>" method="post">

    <?php echo $form->renderGlobalErrors() ?>

    <table class="form_add_domaines">
        <thead>
            <tr>
                <th><?php echo $form['nom_domaine']->renderLabel()?></th>
                <th><?php echo $form['compte_registar_id']->renderLabel() ?></th>
                <th><?php echo $form['url']->renderLabel() ?></th>
                <th><?php echo $form['remarque']->renderLabel() ?></th>
            </tr>   
        </thead>

        <tbody>
            <?php 
            $domaines = explode("\n",$add_domaines);
            for($i=0; $i<count($domaines); $i++)
            {?> 
                <tr>
                    <td>
                        <?php 
                        if(1==strcmp(' ', $domaines[$i]))
                        {
                            echo "<span style='color:red;'>"."<b>Warning, missing domain name.</b>"."</span>";
                        }
                        else 
                        {
                            echo $domaines[$i];
                        }
                        ?>
                    </td>

                    <td>

                        <?php echo $form['compte_registar_id']->renderError() ?>

                        <?php echo $form['compte_registar_id'] ?>
                    </td>

                    <td>

                        <?php echo $form['url']->renderError() ?>

                        <?php echo $form['url'] ?>
                    </td>

                    <td>

                        <?php echo $form['remarque']->renderError() ?>

                        <?php echo $form['remarque'] ?>
                    </td>           
                </tr>
            <?php
            }
            ?>          
        </tbody>

        <tfoot>
            <tr>
                <td>
                    <?php echo link_to(__('Back', array(), 'sf_admin'), '@domaine_new') ?>
                </td>
                <td>

                    <?php echo $form->renderHiddenFields(false) ?>
                    <input type="submit" class="submit" value="Add" />
                </td>
            </tr>
        </tfoot>
    </table>
</form> 
```

My action :

```
[...]    
$this->form = new AddDomainesForm();

$this->form->setDefault('client_id', $idClient);
$this->form->setDefault('nom_domaine', $noms_domaine);

if($request->isMethod('post'))
            {

                $name = $this->form->getName();

                $values = $request->getParameter($name);
                $files = $request->getFiles($name);

                $this->form->bind($values, $files);

                if($this->form->isValid())
                {
                    print_r($values);break;
                    //$this->form->save();

                    $this->getUser()->setFlash('notice', 'OK.');
                    $this->redirect('@domaine');
                }
            } 
```

`print_r($values)` return only the last row of my form

> Array ( [compte_registar_id] => 1 [url] => www.toto.net [remarque] => blabla [nom_domaine] => toto.com toto.fr toto.net [client_id] => 17 [_csrf_token] => ... )

Thank you !

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T19:37:54.083

当多个表单元素具有相同名称时，只会取最后一个。

看到 cou 可以直接发送数组了吗？

```
<inut type="text" name="foobarlist[]">
<inut type="text" name="foobarlist[]">
<inut type="text" name="foobarlist[]"> 
```

$_GET['foobarlist'] 将返回一个包含 3 个元素的数组。

括号是关键。

# html - How to remove white space at the top of my form?

> ID：16016213
> 
> 赞同：2
> 
> 时间：2013-04-15T13:19:45.750
> 
> 标签：html, css

I'm getting white spaces at the top of my form and I believe I have tried everything but, it's still there. Can someone give some sugesstions at to how to get rid of the white space at the top? When I open the form in firefox it seems to be okay but, when I use IE I get white space. Also, it is a .cfm form. Thanks.

Here is my code.

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>Untitled Document</title>
<style type="text/css">
.body
{
margin-top:0px;
padding-top:0px;
}
.mytable1
{
border-collapse:collapse;
border-color:#000000; 
border-style:solid; 
border-width:2px;
}
.mytable1 th
{
border-color:#333333;
border-style:solid; 
border-width:1px;
}
.mytable1 td
{
border-color:#333333;
border-style:solid; 
border-width:1px;
}
.mytable1
{
border-collapse:collapse;
border-color:#000000; 
border-style:solid; 
border-width:2px;
}
</style>
</head>

<body lang=EN-US style='tab-interval:.5in'>
<div id=Section1>
<cfoutput>

<form name="reportform" action="UpdateFormStatus.cfm" method="post">
<input type="hidden" name="UserEmail" value="#search_review.UserEmail#">
  <table class="mytable1">
    <tr>
      <td valign="top" class="blacktext" align="center" colspan="14"><strong>Review Form</strong></td>
    </tr>
    <tr>
      <td valign="top" class="blacktext" colspan="4"><strong>Type:</strong> #form.Type# </td>
      <td valign="top" class="blacktext" colspan="4"><strong>Number: </strong> #form.Number#   </td>         
    </tr>
    <cfif not search_results.RecordCount>
      <tr>
        <td class="blacktextbold" colspan="2"> No results match those criteria.</td>
         <td align="left" colspan="1"><a href="search_form.cfm">Search Again</a></td>
      </tr>
      <cfelse>
      <tr>
        <td valign="top" colspan="3" class="blacktext"><strong>Name:</strong> #form.Name# </td>
        <td valign="top" colspan="3" class="blacktext"><strong>Project Code: </strong> #form.ProjectCode# </td>
      </tr>
 </table>
</form>
</cfoutput>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T13:22:41.423

你已经`body`作为一个班级

应该是：

```
body{
margin-top:0px;
padding-top:0px;
} 
```

对于您使用`#`的类的 ID `.`，如果您要定位一个像 div 这样的对象，您只需放置`div`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:24:01.210

要从`form`元素中删除边距和填充，只需添加以下内容：

```
form
{
margin: 0px;
padding: 0px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T13:31:29.057

看起来您缺少`cfif`. 浏览器正在尝试修复您的 html 并将此标记放在表格上方。您也没有 div 的结束标签`id="Section1"`。CFML 与 HTML 不一样。由于 Cold Fusion 特定标签，这将无法正确呈现为 HTML。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T14:23:17.270

您没有关闭父 div。 `<div id="Section1">` 另外，正如@Andrew 提到的，您已`body`设置为一个类。（`body {}`而不是`.body{}`）。

[http://jsfiddle.net/fKMHe/](http://jsfiddle.net/fKMHe/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-15T13:23:01.483

您应该将 html 的边距和填充也设置为 0 并删除 . 从正文选择器：

```
html, body
{
margin-top:0px;
padding-top:0px;
} 
```

# php - Determine Datatype using Regexp

> ID：16016216
> 
> 赞同：1
> 
> 时间：2013-04-15T13:19:48.483
> 
> 标签：php, sql, regex

I have a string. I should generate a sql text. Can I determine datatype using regexp. For examle : 15.04.2013 or 2013/04/15 or 15/04/2013 is date. 15 , 46 is integer / int 1 or 0 is boolean ... etc.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T14:19:00.907

使用[gettype()](http://php.net/gettype)和[strtotime()](http://php.net/manual/en/function.strtotime.php)，以下函数检查它是布尔值、整数、浮点数还是日期：

```
function get_type($input){
    $type = gettype($input);
    if($type == 'string'){
        if(filter_var($input, FILTER_VALIDATE_INT) !== false){
            return 'integer';
        }elseif(filter_var($input, FILTER_VALIDATE_FLOAT) !== false){
            return 'float';
        }elseif(filter_var($input, FILTER_VALIDATE_BOOLEAN) !== false){
            return 'boolean';
        }elseif(strtotime($input) !== false){
            return 'date';
        }
    }elseif($type == 'double'){
        return 'float';
    }
    return $type;
} 
```

**输入：**

```
echo '0 : <b>'.get_type(0).'</b><br>';
echo '1 : <b>'.get_type(1).'</b><br>';
echo '1.11 : <b>'.get_type(1.11).'</b><br>';
echo '1.2e3 : <b>'.get_type(1.2e3).'</b><br>';
echo 'true : <b>'.get_type(true).'</b><br>';
echo 'false : <b>'.get_type(false).'</b><br>';
echo '\'wut\' : <b>'.get_type('wut').'</b><br>';
echo 'array() : <b>'.get_type(array()).'</b><br>';
echo '\'TRUE\' : <b>'.get_type('TRUE').'</b><br>';
echo '\'false\' : <b>'.get_type('TRUE').'</b><br>';
echo '\'0\' : <b>'.get_type('0').'</b><br>';
echo '\'1\' : <b>'.get_type('1').'</b><br>';
echo '\'15.04.2013\' : <b>'.get_type('15.04.2013').'</b><br>';
echo '\'15 april 2013\' : <b>'.get_type('15 april 2013').'</b><br>';
echo '\'+7 days\' : <b>'.get_type('+7 days').'</b><br>'; // fail in a way
echo '\'15/04/2013\' : <b>'.get_type('15/04/2013').'</b><br>'; // fail
echo '\'25-10-2013 wut\' : <b>'.get_type('25-10-2013 wut').'</b><br>';
echo '\'500\' : <b>'.get_type('500').'</b><br>';
echo '\'54.360\' : <b>'.get_type('54.360').'</b><br>';
echo '\'+54.360\' : <b>'.get_type('+54.360').'</b><br>';
echo '\'1.2e3\' : <b>'.get_type('1.2e3').'</b><br>';
echo '\'7E-10\' : <b>'.get_type('7E-10').'</b><br>'; 
```

**输出：**

```
0 : integer
1 : integer
1.11 : float
1.2e3 : float
true : boolean
false : boolean
'wut' : string
array() : array
'TRUE' : boolean
'false' : boolean
'0' : integer
'1' : integer
'15.04.2013' : date
'15 april 2013' : date
'+7 days' : date
'15/04/2013' : string
'25-10-2013 wut' : string
'500' : integer
'54.360' : float
'+54.360' : float
'1.2e3' : float
'7E-10' : float 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T13:49:11.290

这是一个简单而愚蠢的检查器......但我不得不提到你不能确定日期和月份......（对于<13天）......

```
 $s = '01/04/2013';

 if (($s=='0') || ($s=='1') || ($s=='true') || ($s=='false')) return('boolean');

 if ((string)intval($s) == $s) return('integer');

 if (intval($s).'TL' == $s) return('currency');

 if ((string)parseFloat($s) == $s) return('float');

 $a = explode('.', $s);
 if (count($a) != 3) $a = explode('/', $s);
 if (count($a) != 3) return('I do not know'); 
```

在这里您必须填写检查`$a`...的每个成员

`$a[0]`, `$a[1]`, 并且`$a[2]`应该包含日期元素，所以你检查它们......

请注意，月份可能是“Nisan”、“Mayıs”、“Haziran”之类的文本

如果它们是有效的返回：

```
 return('date'); 
```

# excel - 将工作表中的行或列传递给 VBA 函数

> ID：16016217
> 
> 赞同：1
> 
> 时间：2013-04-15T13:19:52.320
> 
> 标签：excel, vba

我编写了一个 VBA 代码来解决一组代数方程的形式

A(i)X(i-1)+B(i)X(i)+C(i)X(i+1)=R(i)

下面给出了部分功能。目前，系数 A、B、C 和 R 必须存储在主工作表的列中才能传递给函数。有没有办法提供在行或列中具有系数的灵活性？

```
Function TRIDI(ByVal Ac As Range, ByVal Bc As Range, ByVal Cc As Range, _
ByVal Rc As Range) As Variant
Dim BN As Single
Dim i As Integer
Dim II As Integer
Dim A() As Single, B() As Single, C() As Single, R() As Single, X() As Single
N = Ac.Rows.Count
ReDim A(N), B(N), C(N), R(N), X(N)
For i = 1 To N
A(i) = Ac.Parent.Cells(Ac.Row + i - 1, Ac.Column)
B(i) = Bc.Parent.Cells(Bc.Row + i - 1, Bc.Column)
C(i) = Cc.Parent.Cells(Cc.Row + i - 1, Cc.Column)
R(i) = Rc.Parent.Cells(Rc.Row + i - 1, Rc.Column)
Next i 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:08:36.507

也许您可以在函数中添加一个可选变量来指示列函数。

示例：（**已编辑）**

```
Function TRIDI(ByVal Ac As Range, ByVal Bc As Range, ByVal Cc As Range, ByVal Rc As Range) As Variant

    Dim BN As Single
    Dim i As Integer
    Dim II As Integer
    Dim ColumnN As Boolean
    Dim A() As Single, B() As Single, C() As Single, R() As Single, X() As Single

    If Ac.Rows.Count = 1 Then
        N = Ac.Columns.Count
        ColumnN = True
    Else If Ac.Columns.Count = 1 Then
        N = Ac.Rows.Count
    Else
        Exit Function
    End If

    ReDim A(N), B(N), C(N), R(N), X(N)

    If ColumnN = True Then
        For i = 1 To N

            A(i) = Ac.Parent.Cells(Ac.Row, Ac.Column + i - 1)
            B(i) = Bc.Parent.Cells(Bc.Row, Bc.Column + i - 1)
            C(i) = Cc.Parent.Cells(Cc.Row, Cc.Column + i - 1)
            R(i) = Rc.Parent.Cells(Rc.Row, Rc.Column + i - 1)

        Next i
    Else
        For i = 1 To N

            A(i) = Ac.Parent.Cells(Ac.Row + i - 1, Ac.Column)
            B(i) = Bc.Parent.Cells(Bc.Row + i - 1, Bc.Column)
            C(i) = Cc.Parent.Cells(Cc.Row + i - 1, Cc.Column)
            R(i) = Rc.Parent.Cells(Rc.Row + i - 1, Rc.Column)

        Next i
    End If

End Function 
```

我可能错过了示例中您的函数的一些功能，但我认为您明白了。如果这不起作用，请给我反馈并尝试另一种解决方案。:)

**编辑：**您还可以使函数上面的函数接收来自其他两个名为 CTRIDI 和 RTRIDI 的函数的输入。这两个函数只是将 ether true 或 false 传递给列变量。

# php - Storing Facebook User Likes` array in MYSQL table

> ID：16016225
> 
> 赞同：1
> 
> 时间：2013-04-15T13:20:13.220
> 
> 标签：php, mysql, sql, facebook

I have an application which analyzes facebook user likes and shows him/her a video based on that data. Now the question is that I need to store the user like data in MYSQL table. the data looks approximately like this

```
array(2) { ["data"]=> array(46) { [0]=> array(4) { ["category"]=> string(21) "Media/news/publishing" ["name"]=> string(20) "Cosmopolitan Armenia" ["id"]=> string(15) "146307748762264" ["created_time"]=> string(24) "2013-03-20T14:40:43+0000" } [1]=> array(4) { ["category"]=> string(17) "Telecommunication" ["name"]=> string(5) "Zangi" ["id"]=> string(15) "386291674718829" ["created_time"]=> string(24) "2013-03-20T11:07:46+0000" } [2]=> array(4) { ["category"]=> string(13) "Musician/band" ["name"]=> string(11) "Ray Charles" ["id"]=> string(12) "430894850091" ["created_time"]=> string(24) "2013-03-16T22:03:46+0000" } [3]=> array(4) { ["category"]=> string(4) "Cars" ["name"]=> string(13) "Mazda Armenia" ["id"]=> string(15) "447042531989769" ["created_time"]=> string(24) "2013-03-16T22:01:46+0000" } [4]=> array(4) { ["category"]=> string(13) "Musician/band" ["name"]=> string(16) "Lockport Artists" ["id"]=> string(15) "615416628475063" ["created_time"]=> string(24) "2013-03-16T21:07:22+0000" } 
```

what structure could you recommend for keeping such a data. I could keep in one column as a long text but it will be very unprofessional and the response time will be very high.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:39:18.640

我的建议是让您创建一个适当的表并将每个值存储在一列中。为什么？一列中的值是序列化的，它们只是填充空间，如果您愿意，您无法创建适当的查询，将来您可能想要创建统计信息或使用这些数据来研究用户的行为或类似的东西。

所以一个简单的查询只是为了计算你有多少喜欢的类别“媒体/新闻/出版”，你将被迫使用 like 函数在序列化数据中找到你需要的东西。

没有比查询数据库更容易的了，将结果作为数组检索，然后使用 json_encode 进行序列化

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T13:44:55.570

假设您的数组名为 $likes。你可以做类似的事情

```
$likes_to_store = json_encode($likes); 
```

然后，您希望将您的存储`$likes_to_store`在您的数据库中。

稍后，在检索信息以供使用时，您会这样做

```
$likes_to_analyze = json_decode($likes_from_db); 
```

这是将数组存储在数据库中以供以后使用的一种干净且简单的方法，因为数组被序列化为字符串，占用少量空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T13:23:55.007

facebook 图以 JSON 回复。

您可以将 JSON 作为序列化数组存储在 MySQL 中。

不过，我建议在您的应用程序中创建一个“Like”类，并从 Facebook JSON 响应中实例化和持久化“Like”。

# git - 比较不同分支上的 git 提交

> ID：16016227
> 
> 赞同：0
> 
> 时间：2013-04-15T13:20:19.457
> 
> 标签：git, gitk

我有两个分支 - 主分支和实验分支。我如何查看哪些提交是在实验中而不是在 master 中？很高兴在 gitk 中看到这一点，但在终端中也可以。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T13:39:22.393

您可以使用 'git log' 看到：

```
git log master..experimental 
```

这将向您显示哪些提交处于实验状态，但不在 master 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T13:40:53.870

选择修订的语法记录在`man gitrevisions`. 在处理一整套修订的命令中，仅命名一个意味着“从该版本可以访问的所有内容”，`^`在前面附加一个插入符号表示“但不能从该版本访问任何内容”，并且`A..B`是`^A B`.

（编辑：哦，男孩，我的 A..B 完全倒过来了。）

# authentication - Symfony2 - FOS UserBundle - 原始请求重定向

> ID：16016231
> 
> 赞同：0
> 
> 时间：2013-04-15T13:20:32.263
> 
> 标签：authentication, redirect, symfony, fosuserbundle

我正在使用 FOS UserBundle 并且我已经定义了一个自定义`AuthenticationSuccessHandler`来根据角色显示不同的主页，但我认为只有在用户最初请求登录页面时才应该调用它，不是吗？

登录成功后，我想被重定向到原始请求。

如[文档](http://symfony.com/doc/2.1/book/security.html#using-a-traditional-login-form)中所述，这似乎是默认行为，但在我的情况下，它仍然使用我的身份验证处理程序。

有人可以帮我将用户重定向到他的原始请求吗？

* * *

作为记录，这是我注册身份验证成功处理程序服务的方式：

```
services:
    security.success_handler:
        class:  Glide\SecurityBundle\[...]\AuthenticationSuccessHandler
        public: false
        arguments: ['@router', '@security.context'] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T14:53:50.227

是的，默认行为是将用户重定向到他们最初请求的页面。但是，由于您要覆盖默认身份验证处理程序，因此您需要自己处理将它们重定向到该页面。

我建议您查看[symfonys 身份验证处理程序](https://github.com/symfony/symfony/blob/2.2/src/Symfony/Component/Security/Http/Authentication/DefaultAuthenticationSuccessHandler.php)并模仿其确定用户原始请求的过程。

# javascript - javascript send data in a table

> ID：16016232
> 
> 赞同：0
> 
> 时间：2013-04-15T13:20:33.230
> 
> 标签：javascript

I want to send some specific data in a table into a specific IP . the other IP is a microcontroller and I need to change every data that has been changed . but the apply/reboot button just send the whole variables . I want to change the button change/reboot tags so that it sends every data in its block instead of the whole data.

```
<script>
function validateForm()
{
 var x=document.forms[myForm][fname].value;
 if (x==null || x==)
   {
  alert(First name must be filled out); 
  return false; 
   }
 }
 </script>
</head>
<body>
<form name=myForm onsubmit=return validateForm() method=post>
<table>  <tr>
    <td>Device Info :</td>
   <td><input type=text name=dev-info id=1  size="3" value=></td>
   <td>.<input type=text name=dev-info id=11  size="3" value=></td>
   <td></td>
   <td></td>
   <td></td>
   <td></td>
   <td> <input type=submit value=Apply/change></td>
  </tr>
  <tr>
   <td>MAC Adress :</td>
  <td><input type=text name=mac-addr id=2 size="3"></td>
  <td>.<input type=text name=mac-addr id=21 size="3"></td>
  <td>.<input type=text name=mac-addr id=22 size="3"></td>
  <td>.<input type=text name=mac-addr id=23 size="3"></td>
  <td>.<input type=text name=mac-addr id=23 size="3"></td>
  <td>.<input type=text name=mac-addr id=23 size="3"></td>
  <td> <input type=submit value=Apply/change></td>
 </tr>
 <tr>
   <td>IP Adress :</td>
   <td><input type=text name=ip-addr id=3 size="3"></td>
   <td>.<input type=text name=ip-addr id=31 size="3"></td>
   <td>.<input type=text name=ip-addr id=32 size="3"></td>
   <td>.<input type=text name=ip-addr id=33 size="3"></td>
 <td></td>\r\n  <td></td>
 <td> <input type=submit value=Apply/change></td>

 </tr>
 <tr>
   <td>Gateway Adress :</td>
   <td><input type=text name=gate-addr id=4 size="3"></td>
   <td>.<input type=text name=gate-addr id=41 size="3"></td>
   <td>.<input type=text name=gate-addr id=42 size="3"></td>
   <td>.<input type=text name=gate-addr id=43 size="3"></td>
   <td></td>
  <td></td>
 <td> <input type=submit value=Apply/change></td>
   </tr>
  <tr>
   <td>Subnet Mask :</td>
   <td><input type=text name=sub-msk id=5 size="3"></td>
   <td>.<input type=text name=sub-msk id=51 size="3"></td>
   <td>.<input type=text name=sub-msk id=52 size="3"></td>
   <td>.<input type=text name=sub-msk id=53 size="3"></td>
   <td></td>
    <td></td>
     <td> <input type=submit value=Apply/change></td>
   </tr>
  <tr>
    <td>Ntp Server IP :</td>
  <td><input type=text name=ntp-ip id=6  size="3"></td>
  <td>.<input type=text name=ntp-ip id=61 size="3"></td>
  <td>.<input type=text name=ntp-ip id=62 size="3"></td>
  <td>.<input type=text name=ntp-ip id=63 size="3"></td>
  <td></td>
  <td></td>
  <td> <input type=submit value=Apply/change></td>
    </tr>
</table>
<input type=submit action=http://192.168.1.250  value=Apply/Reboot>
</form>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:28:56.697

仅发送给定块中的数据的一种方法是将每个块分成其自己的 html 表单，以便提交按钮仅提交与该块相关的值。这里的缺点是您将无法使用整体提交按钮一次提交整个表单。

另一种方法是让每个块提交按钮触发一个 javascript 函数，该函数仅发送与块相关的数据。这可以通过 Ajax 请求来完成，或者通过重定向和传递您要重定向到的位置的查询字符串中的相关值来完成。这很可能通过设置一个 javascript 函数来处理，然后通过 jQuery 的`.click()`功能、通过`document.getElementById("buttonId").Click`或通过向按钮添加`onclick="relevantFunction();return false;"`属性将其分配给按钮来完成。

请注意，如果您采用每个块的路线，您将需要将提交按钮切换为按钮类型而不是提交类型，或者您需要使用它`return false;`来阻止它们提交整个表单。有关执行此操作的示例，请参[见此答案](https://stackoverflow.com/a/3384971/259014)。

`onclick`这是通过第一个块的实现使用该方法的示例。在您的 javascript 中：

```
function SingleSectionSubmit(inputIds, name, targetUrl)
{ //inputIds needs to be an array of the IDs for the section
   var querystring = "";

   //build requestParameter value; since each block is only one type of input, we can combine these together as long as your processing page supports that (and if it doesn't you will need to customize)
   var requestParam = "";
   for (var i = 0; i < inputIds.length; i++)
   { requestParam = requestParam + inputIds[i] + "."; }
   requestParam = requestParam.substring(0, requestParam.length - 1); //get rid of the trailing period

   querystring = "?" + name + "=" + requestParam;

   //perform the redirect
   window.location(targetUrl + querystring);
} 
```

然后在 html 中，您可以将相关按钮设置为：

```
<input type="submit" value="Apply/change" onclick="SingleSectionSubmit(['1','11'], 'dev-info', 'http://192.168.1.250');"> 
```

同样，这假设您提交到的页面（`http://192.168.1.250`在这种情况下）能够使用来自查询字符串的 GET 变量来处理请求。

# cognos - cognos monitoring

> ID：16016234
> 
> 赞同：2
> 
> 时间：2013-04-15T13:20:44.263
> 
> 标签：cognos

Does cognos 8 have an api which can be queried to find out:

1.  the last time a scheduled report has run
2.  was it successful?
3.  if not, what caused it to fail?

it would be preferable for the api to be web based. I have read about a JMX interface but documentation was lacking.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-11T15:40:57.843

通常，要以 API 方式完成此操作，您需要使用 Cognos SDK。SDK 允许您查询与报告运行相关的计划和历史记录，并查看请求是完成还是失败。如果失败，您将看到与失败相关的历史，就像您在查看失败的运行时在 Cognos 管理部分中看到的一样。

这是开始查看示例的好地方： [http ://www-01.ibm.com/support/docview.wss?uid=swg21343791](http://www-01.ibm.com/support/docview.wss?uid=swg21343791)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T03:21:58.690

Cognos 8 有一个选项可以启用对审计数据库的日志记录。然后可以查询数据库以获取详细信息，例如报告何时运行、使用了哪些参数以及是否存在任何错误。

[链接到 IBM 站点以设置日志记录数据库。](http://publib.boulder.ibm.com/infocenter/c8bi/v8r4m0/index.jsp?topic=/com.ibm.swg.im.cognos.inst_cr_winux.8.4.1.doc/inst_cr_winux_id18024creat_log_db.html)

[链接到 IBM 站点以设置与数据库的连接。](http://publib.boulder.ibm.com/infocenter/c8bi/v8r4m0/index.jsp?topic=/com.ibm.swg.im.cognos.inst_cr_winux.8.4.1.doc/inst_cr_winux_id18117SetUptheDatabaseClientforaLoggingD.html)

基本上，您使用适当的设置创建一个兼容的数据库，然后告诉 Cognos 如何连接到它，然后在下次 Cognos 服务启动时，它将自动创建必要的记录表并开始自动填充它们。

# php - How to use AJAX in joomla 2.5 module?

> ID：16016236
> 
> 赞同：1
> 
> 时间：2013-04-15T13:20:48.950
> 
> 标签：php, ajax, jquery, module, joomla2.5

I have three drop down in my module.I want to call ajax on drop down onChange() event in my joomla 2.5 module. Country,State,City are drop down. user select country from first drop down when all state result display in second drop down using ajax.

How to do above functionality using AJAX in joomla 2.5 module.

Please help me.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-05T10:57:29.487

没有正式的方法可以从模块中执行 ajax。
如果你在哪里开发一个组件，你可以调用你的组件 `index.php?option=com_yourcomponent&task=getjsondata&view=yourview&format=json`

这样你的文件`views/yourview/view.json.php`就会被调用，你可以在那里把你的数据发送出去，`echo json_encode( array("success"=>true) ); jexit()` 请注意使用`jexit()`insted o`exit()`

如果你真的需要从一个模块做 ajax，这里有一个在你的文件中导入 joomla 的技巧

```
<?php
if (! class_exists('JFactory') ) {
    define( 'DS', DIRECTORY_SEPARATOR );
    $rootFolder = explode(DS,dirname(__FILE__));
    $currentfolderlevel = 2;

    array_splice($rootFolder,-$currentfolderlevel);

    $base_folder = implode(DS,$rootFolder);

    if(is_dir($base_folder.DS.'libraries'.DS.'joomla'))
    {
        define( '_JEXEC', 1 );
        define('JPATH_BASE',implode(DS,$rootFolder));

        require_once ( JPATH_BASE .DS.'includes'.DS.'defines.php' );
        require_once ( JPATH_BASE .DS.'includes'.DS.'framework.php' );

        // Joomla is loaded! horray!
        $email = JRequest::getVar('email');
        $tags = implode(",",JRequest::getVar('tags',array()));

        $db = JFactory::getDbo();
        $db->setQuery("INSERT INTO `#__newsletter_users` (email,tags) VALUES('$email','$tags')");
        $db->query();

    }
} 
```

?>

`save_email.php`在您的模块文件夹中创建一个像上面的文件（对我来说）并直接调用它。这是我的模块模板的一部分：

```
$.get('<?php echo JUri::base()."modules/mod_newsletter/save_email.php?email=" ?>'+email, function(data) {
    console.log(data);
    modal.hide();
}); 
```

# android - Designing threaded mail interface in Android

> ID：16016237
> 
> 赞同：0
> 
> 时间：2013-04-15T13:20:50.483
> 
> 标签：android, performance, email, android-webview

I am trying to build a threaded mail interface in my mail app. As there can be any number of messages in a particular conversation, each message will be having a header and a body part. Now for the body part, whether I should use WebView for each message in that threaded mail? Because using multiple WebViews in a single activity will slow down the performance I assume. There can be 50 messages and each message will have one WebView attached to it.

Is there any other lighter control available in Android where I can render HTML instead of using WebView?

# algorithm - What is the most efficient way of finding the first element of the ith row when A[i,j]=j*(A[i-1,j+1]-A[i-1,j])?

> ID：16016238
> 
> 赞同：13
> 
> 时间：2013-04-15T13:20:51.513
> 
> 标签：algorithm, math, bernoulli-numbers

When the first row is 1, 1/2 , 1/3 .... Here's an image to support the question. ![image for better description.](https://s23.postimg.cc/9k5w5h88b/algos.png)

Does there exist a more efficient approach than the naive O(n^2) approach?

I came across this when studying Bernoulli numbers and then consequently on reaching "Akiyama–Tanigawa algorithm".

One of the ways could be simple precomputing the results and storing them in a table. Since Bernoulli numbers grow very quickly, for most practical purposes we wouldn't need Bernoulli numbers for much larger n. Consider Bernoulli(400)- its around -(10^550).

But looking at it only algorithmically, is there a better approach than the O(n^2) one?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-01T17:42:18.343

第一个元素形成[伯努利数](http://mathworld.wolfram.com/BernoulliNumber.html)列。伯努利数的分子和分母分别使用[A027641](http://oeis.org/A027641)序列和[A027642](http://oeis.org/A027642)序列找到。这两个序列在​​它们各自的页面上都有封闭形式的和，可用于计算它们的项。

# c++ - 在 Lua 中调用 tolua++ 中可能未公开的函数

> ID：16016243
> 
> 赞同：1
> 
> 时间：2013-04-15T13:20:56.640
> 
> 标签：c++, lua, call, tolua++

我有一个使用我的 C++ 应用程序的一些功能的 Lua 脚本。我将此脚本与 2 个不同的 C++ 应用程序一起使用，并且我希望能够保护未通过 tolua 绑定的调用。

例如： - 假设我有两个 C++ 应用程序：MyApp1 和 MyApp2 - 我用 tolua++ 制作了 MyApp1 的包装器，并在 Lua 脚本中调用它的一个函数：

```
MyApp1:MyFunc() 
```

现在我在 MyApp2 中使用相同的脚本，它没有任何这种类型的 tolua++ 绑定。然后我得到这种类型的错误：

> [string "MyApp2.lua"]:157: 尝试索引全局 'MyApp1' (一个 nil 值)

所以我希望 Lua 在调用这个方法时不要给我一个错误。我尝试使用：

```
pcall( MyApp1:MyFunc() ) 
```

但是脚本一直在这条线上崩溃。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T13:53:32.043

```
if MyApp1 then 
  MyApp1:MyFunc() 
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T13:54:03.403

```
if MyApp1 then
   MyApp1:MyFunc()
end 
```

上面会起作用，但是将依赖于应用程序的脚本和独立的脚本分开不是更干净吗？这样你就不用担心了。

# nivo-slider - NivoSlider images to capture the exact width and height of the div

> ID：16016247
> 
> 赞同：0
> 
> 时间：2013-04-15T13:21:08.073
> 
> 标签：nivo-slider

The slider images that I use is not the same width and height as the NivoSlider div. I want my images to scale into the exact width and height of the NivoSlider div, with no losing any part of the image. How can i do this?

I am using the v3.2 JQuery plugin, not Wordpress.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:32:09.213

您可以在 Photoshop 中执行此操作，但如果比例不同，则很难，您将丢失像素

您可以做的是调整滑块大小或编辑照片

# html - 是否可以将多个步骤与相对路径链接起来？

> ID：16016248
> 
> 赞同：0
> 
> 时间：2013-04-15T13:21:09.890
> 
> 标签：html, hyperlink, relative-path

这是我想要做的一个例子：

`http://mysite.com/lorem/ipsum/ to http://mywebsite.com/`使用相对路径从带有路径的页面链接。

我的第一个想法是使用这个：`<a href='.../'>link</a>`. 但这最终给了我`http://mysite/lorem/ipsum/.../`.

有没有办法在不调用实际 URL 的情况下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:24:43.330

怎么样

```
<a href="../../">link</a> 
```

:)

# jquery - 如何从多个文本区域获取 tinyMCE 内容

> ID：16016250
> 
> 赞同：7
> 
> 时间：2013-04-15T13:21:11.747
> 
> 标签：jquery, tinymce

嗨，当我需要从多个文本区域获取内容时，我遇到了问题。所以我看到 tinyMCE 有从特定文本区域或活动区域获取内容的方法，但如何做到这一点将我拥有的所有文本区域（注意：文本区域计数不是静态的）。

我正在考虑使用变体来创建每个文本区域的动态 ID，以及何时需要提交内容以遍历所有文本区域。像这样的东西：

```
for 0 to my textareas length
var all content = tinyMCE.get('area1').getContent();
var all content += tinyMCE.get('area2').getContent(); 
```

类似的东西，但我不知道这是否是正确的方法。请帮我解决这个问题。提前致谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-15T13:58:11.680

Tinymce 将其所有编辑器存储在一个数组中：`tinyMCE.editors`. 您需要做的就是遍历它们并访问内容：

```
for (i=0; i < tinyMCE.editors.length; i++){
    var content = tinyMCE.editors[i].getContent();
    alert('Editor-Id(' + tinyMCE.editors[i].id + '):' + content);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T13:40:07.653

要访问多个 tinymce 实例：

[http://www.tinymce.com/wiki.php/API3:property.tinymce.editors](http://www.tinymce.com/wiki.php/API3:property.tinymce.editors)

例子：

```
for (edId in tinyMCE.editors)
    tinyMCE.editors[edId].save(); 
```

最好的方法（我的观点）是将内容保存到数组中：

```
for (edId in tinyMCE.editors)
    array[edId] = tinyMCE.editors[edId].getContent(); 
```

# python - 在 Python 中为按钮添加点击功能

> ID：16016254
> 
> 赞同：0
> 
> 时间：2013-04-15T13:21:22.260
> 
> 标签：python, vizard

我对 Python 很陌生。我正在使用 Vizard 4.0 创建一个简单的 3D 世界，我想在屏幕上添加一个秒表。我不想要一个真正的 3D 秒表，只是屏幕一角的一个简单文本框，它会随着秒表计数而更新。这是我到目前为止所拥有的，但它不起作用，任何建议或帮助将不胜感激！

```
def mytimer(num):
    time = 'Elapsed time:',viz.elapsed(),'seconds'
    print time
    timer_update = viz.addText('Time:', viz.SCREEN)
    timer_update.color(viz.GREEN)
    timer_update.fontSize(42)

    viz.callback(viz.TIMER_EVENT,mytimer)
    viz.starttimer(0,1, viz.FOREVER) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T16:12:39.727

破解它:)

```
#Add text fields to a dictionary.
text_dict = {}
for kind in ['score','instructions','time' ]:
    text = viz.addText('', viz.SCREEN )
    text.setScale( .5,.5)
    text.alignment( viz.TEXT_CENTER_BASE )
    text.alpha( 1 )
    text_dict[ kind ] = text
text_dict['score'].setPosition( .1,.9 )
text_dict['instructions'].setPosition( .5,.5 )
text_dict['time'].setPosition( .1,.85 )

def game_timer_task():
    #Grab the text field for
    #time.
    text = text_dict[ 'time' ]
    time = 0
    text.message( 'Time: 0' )
    #Loop through as long as time
    #is under a certain number of
    #seconds.
    while time < 10:
        yield viztask.waitTime( 1 )
        time += 1
        text.message( 'Time: ' + str( time ) )

def game():
    time_passing = viztask.waitTask( game_timer_task() )
    data = viz.Data()

    yield viztask.waitAny( [time_passing], data )

    if data.condition == time_passing:
        game_over = text.message( 'Game Over!' )
        game_over.setPosition( .1,.85 )

def main_sequence():
    yield game()

viztask.schedule( main_sequence() ) 
```

# mysql - 对 MySQL 结果进行排序以使两列中任一列中具有特定值的结果最后显示

> ID：16016255
> 
> 赞同：1
> 
> 时间：2013-04-15T13:21:27.140
> 
> 标签：mysql, sql

假设这是一个名为的表`fixtures`：

```
id | team1 | team2
1  | 25    | 40
2  | 10    | 0
3  | 13    | 8
4  | 0     | 18
5  | 32    | 12 
```

我需要以这样的方式对结果进行排序，以使`team1`0 或`team2`0 的行最后结束。其他行的顺序无关紧要，只要它们都排在至少有一个 0 的行之前。0 行相对于彼此的顺序也无关紧要。因此，对于上面的示例，输出行 ID 的顺序应该类似于：

```
1, 3, 5, 2, 4 
```

我知道在获得所有结果后我可以在 PHP 中执行此操作，但我想知道是否有办法在查询中执行此操作。

注意：所有其他值（除了 0）只能是正整数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T13:23:26.610

试试这个，

```
SELECT  ID
FROM    TableName
ORDER   BY (LEAST(team1, team2) = 0), ID 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!9/3da76/1)

输出

```
╔════╗
║ ID ║
╠════╣
║  1 ║
║  3 ║
║  5 ║
║  2 ║
║  4 ║
╚════╝ 
```

# javascript - 折叠网站的侧边菜单

> ID：16016256
> 
> 赞同：-2
> 
> 时间：2013-04-15T13:21:29.123
> 
> 标签：javascript, jquery, html, twitter-bootstrap

我想做的是为网站创建一个悬停的侧边菜单，但是由于我是网页设计的新手，所以我有点迷路了，如[本例所示](http://www.cryptrade.com/#/home)，我想要实现的是侧面“联系我们”表单和社交媒体共享菜单。但我想通过使用 html5 css 或 Java 脚本来创建它。我已经用 Bootstrap jQuery 尝试了很多东西，但到目前为止还没有运气，所以我非常感谢任何指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:24:24.903

我相信您正在寻找可[联系的](http://www.jqueryscript.net/form/Slide-Out-Contact-Form-Plugin-with-jQuery-Contactable.html)

通过正确的调整，您可以从您给出的示例中获得相同的结果。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:29:12.920

您将要设置要离开页面的联系块元素的 css 样式`position: absolute; right: n`（其中`n`= 您想要伸出侧面的按钮的宽度）。单击链接时，您的 jQuery 函数应该增加到`n`您最初隐藏的完整 div 的宽度。

基本上，您只是将联系人框从页面的右边缘渲染出来并将其移出。不过，Contactable 应该会为您解决这个问题，所以如果这符合您的需求，那么它可能会更容易。

# extjs4.2 - 从商店填充网格面板不起作用 EXTJS 4.2

> ID：16016270
> 
> 赞同：1
> 
> 时间：2013-04-15T13:22:17.200
> 
> 标签：extjs4.2

早上好，当我尝试从我的网络服务填充我的网格面板时遇到一些问题，结果是一个空的网格，谢谢你的提前。

```
// Create store

var myStore = new Ext.data.JsonStore({
    proxy: new Ext.data.HttpProxy({
        url: 'Service.asmx/GetPeople',
        headers: {
            'Content-type': 'application/json' 
        }
    }),
    root: 'd', 
    id: 'Id', 
    fields: ['Id', 'FistName', 'LastName', 'BirthDate'], 
    autoLoad: true
});

//Create grid to display data from store

var gridTest = new Ext.grid.Panel({
     store: myStore, // Our store
     renderTo: Ext.getBody(),
     forceFit: true,
     columns: [ // Grid columns
         { xtype: 'gridcolumn', width: 100, text: 'Id', dataIndex: 'Id', flex: 1 },
         { xtype: 'gridcolumn', width: 100, text: 'Nom', dataIndex: 'FirstName', flex: 1 },
         { xtype: 'gridcolumn', width: 100, text: 'Mail', dataIndex: 'LastName', flex: 1 },
         { xtype: 'gridcolumn', width: 100, text: 'Phone', dataIndex: 'BirthDate', flex: 1 }    
     ]
}); 
```

这是我的视口：

```
Ext.create('Ext.container.Viewport', {
    layout: "border",
    items: [{
        region: "north",
        height: 50,
        title: "Nord"
    }, {
        region: "south",
        height: 200,
        title: "sud",
        bodyStyle: 'background: #fffff;',
        border: false
    }, {
        region: "center",
        title: "centre",
        bodyStyle: 'background: #00000;',
        border: false,
        items: gridTest                                     
    }, {
        region: "west",
        width: 100,
        title: "ouest"
    }, {
        region: "east",
        width: 100,
        title: "est"
    }]
}); 
```

这是来自 FIREBUG MOZILLA FIREFOX 的回应：

```
{"d": [{
    "__type":"WebService4ExtJS.Model.Person", 
    "Id":0,
     "FirstName":"sami", 
     "LastName":"samibizani@gmail.com",
     "BirthDate":"23188219"
  }, {
     "__type":"WebService4ExtJS.Model.Person",
     "Id":1,"FirstName":"admin",
     "LastName":"admin@gmail.com",
     "BirthDate":"1111111"
  }, {
     "__type":"WebService4ExtJS.Model.Person",
     "Id":2,
     "FirstName":"user",
     "LastName":"user@gmail.com",
     "BirthDate":"2222222"
  }]
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T20:41:18.833

您的商店阅读器未定义：

```
reader: {
    type: 'json',
    root: 'd',
    idProperty: 'Id'
} 
```

[您可以在此处](http://jsfiddle.net/hY9WR/3/)找到工作代码。

还有一个小错误：在 fields 数组中，您写`FistName`的不是`FirstName`.

# ios - 目标c全局键字符串？

> ID：16016275
> 
> 赞同：3
> 
> 时间：2013-04-15T13:22:30.480
> 
> 标签：ios, objective-c, string, global

我正在使用项目中多个位置的键字符串访问存储在 NSUserDefaults 中的对象。为避免在键入密钥字符串时出现错误，我想在全局中设置。可能吗 ？？

```
[[NSUserDefaults standardUserDefaults] objectForKey:@"UD_GPS_LAST_UPDATE"]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T13:27:49.570

有不同的方法可以做到这一点。两种常用方法是使用全局`NSString`常量或预处理器`#define`指令。

## 全局常数

一种流行的方法是使用全局变量。您需要将其添加到某个文件中。它可以是现有文件或单独的文件。`@implementation`如果它存在，请确保它在该部分之外。它可能看起来像这样：

```
NSString *const MyStringConstantIdentifier = @"UD_GPS_LAST_UPDATE"; 
```

然后将具有属性的相同标识符添加`extern`到头文件中，该头文件包含在要使用字符串常量的所有源文件中。

```
extern NSString *const MyStringConstantIdentifier; 
```

现在`MyStringConstantIdentifier`将在所有使用它的地方引用相同的字符串。

```
[[NSUserDefaults standardUserDefaults] objectForKey:MyStringConstantIdentifier]; 
```

## 预处理程序指令

`#define`另一种方法是在头文件中使用预处理器指令。确保将头文件包含在要使用标识符的所有源文件中。

```
#define MyStringConstantIdentifier @"UD_GPS_LAST_UPDATE" 
```

现在，当您包含该头文件时，`MyStringConstantIdentifier`它将作为编写`@"UD_GPS_LAST_UPDATE"`. 然而，这会给预处理器带来负担，而不是编译器。与使用全局变量的区别在于，当您使用

```
[[NSUserDefaults standardUserDefaults] objectForKey:MyStringConstantIdentifier]; 
```

预处理器实际上将替换`MyStringConstantIdentifier`为，`@"UD_GPS_LAST_UPDATE"`以便编译器处理的代码如下所示：

```
[[NSUserDefaults standardUserDefaults] objectForKey:@"UD_GPS_LAST_UPDATE"]; 
```

如果您的部分代码曾经移动到库中，这可能会成为问题。因为预处理发生在（实际上就在之前取决于你如何看待它）编译时，替换将在所有使用它的地方用字符串替换常量。假设这是在库中定义的。每当库中的字符串发生更改时，任何使用它的应用程序都必须重新编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T13:24:14.497

对的，这是可能的。

事实上，这是使用所有常量字符串的最佳方式。

`GlobalConstantsAndKeys.h`您可以使用以下和其他人创建文件

```
#define kUDGpsLastUpdate @"UD_GPS_LAST_UPDATE" 
```

然后在整个项目中使用它。

```
[[NSUserDefaults standardUserDefaults] objectForKey:kUDGpsLastUpdate]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T13:26:43.153

是的，创建**example.h**文件并写入`#define SEND_MESSAGE_ID @"2"`或您想要的任何内容，然后转到 .pch 文件并导入**example.h**以在所有应用程序中查看它。

# jquery - jquery $.ajax 无法正常工作

> ID：16016279
> 
> 赞同：0
> 
> 时间：2013-04-15T13:22:38.850
> 
> 标签：jquery, ajax

我有以下我想运行的代码

```
 $.ajax({
      cache: false,
      url: './animationPlay.php',
      data: 'animation='+text,
      type: 'POST',
      datatype: 'text',
      success: function(data) { alert("succsess") },
      error: function(ts) { alert('error:'+ts.responseText) }
   }); 
```

我已经看到[如何捕获 ajax 查询发布错误？](https://stackoverflow.com/questions/2833951/how-to-catch-ajax-query-post-error)和[jQuery $.get 或 $.post 来捕获页面加载错误（例如 404）](https://stackoverflow.com/questions/4687235/jquery-get-or-post-to-catch-page-load-error-eg-404)，但它不适用于我的代码。它只是设置为“错误”。如何获得有关问题所在的更多详细信息？

提前致谢。

编辑：我试过

```
error: function(xhr, textStatus, error){
  console.log(xhr.statusText);
  console.log(textStatus);
  console.log(error);
} 
```

我在控制台中收到错误，错误，一个空字符串。这是什么意思？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:29:17.013

尝试这个 ：：

```
$.ajax({
        cache: false,
        url: './animationPlay.php',
        data: {
            animation: text
        },
        type: 'POST',
        datatype: 'text',
        success: function(data) { alert("succsess") },
        error: function(XMLHttpRequest, textStatus, errorThrown){
            alert('status:' + XMLHttpRequest.status + ', status text: ' + XMLHttpRequest.statusText);
        } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-15T13:24:04.883

尝试将帖子数据作为对象发送...

```
$.ajax({
    cache: false,
    url: './animationPlay.php',
    data: {
        animation: text
    },
    type: 'POST',
    success: function(data) { alert("succsess") },
    error: function(ts) { alert('error:'+ts.responseText) }
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-15T13:28:02.290

```
$.ajax({
      cache: false,
      url: './animationPlay.php',
      data: 'animation='+text,
      type: 'POST',
      dataType: 'text',
      success: function(data) { alert("succsess") },
      error: function(ts) { alert('error:'+ts.responseText) }
      contentType:'SET THE CONTENT TYPE'
   }); 
```

检查 URL 是否存在

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-15T13:44:51.413

尝试这个：

```
$.ajax({
        cache: false,
        url: 'animationPlay.php',
        data:  text,
        type: 'POST',
        dataType: 'text',       //<== see, in your question's code you have small 't'
        success: function(data) { alert("succsess") },
        error: function(){
            alert('error');
        } 
```

# wpf - WPF：在运行时添加项目后刷新 ListView

> ID：16016287
> 
> 赞同：0
> 
> 时间：2013-04-15T13:22:55.177
> 
> 标签：wpf, vb.net, listview

我有一个记录进程的 ListView。发送到 ListView 日志的消息应在添加后显示。在我的情况下，程序停止任何用户交互，如果过程完成，所有项目都是可见的。

但我需要在添加后直接查看该项目，并且在最后添加的列表底部。添加每个项目后是否有可能刷新 ListView？

我的 XAML：

```
<ListView Name="lvUpgrade">
    <ListView.View>
        <GridView>
            <GridViewColumn Width="20px">
                <GridViewColumn.CellTemplate>
                    <DataTemplate>
                        <Image Source="{Binding Path=Icon}" />
                    </DataTemplate>
                </GridViewColumn.CellTemplate>
            </GridViewColumn>
            <GridViewColumn Width="75px" DisplayMemberBinding="{Binding Path=Time, StringFormat={}{0:HH:mm:ss}}" />
            <GridViewColumn Width="300px" Header="Nachricht" DisplayMemberBinding="{Binding Path=Message}" />
        </GridView>
    </ListView.View>
</ListView> 
```

以及背后的代码：

```
Public Class Upgrade

    Public Sub AddMessage(ByVal message As Message)
        Me.lvUpgrade.Items.Add(message)
    End Sub

    Public Class Message

        Public Enum MessageType

            Normal
            Information
            Success
            Warning
            [Error]
        End Enum

        Public Sub New(ByVal type As MessageType, ByVal message As String)
            _Type = type
            _Message = message
        End Sub

        Private _Type As MessageType = MessageType.Normal
        Public ReadOnly Property Type As MessageType
            Get
                Return _Type
            End Get
        End Property

        Private _Message As String = String.Empty
        Public ReadOnly Property Message As String
            Get
                Return _Message
            End Get
        End Property

        Private _Time As DateTime = Now
        Public ReadOnly Property Time As DateTime
            Get
                Return _Time
            End Get
        End Property

        Public ReadOnly Property Icon As BitmapImage
            Get
                Select Case Me.Type
                    Case MessageType.Information
                        Return My.Resources.Information16.ToBitmapImage
                    Case MessageType.Success
                        Return My.Resources.OK16.ToBitmapImage
                    Case MessageType.Warning
                        Return My.Resources.Alert16.ToBitmapImage
                    Case MessageType.Error
                        Return My.Resources.Error16.ToBitmapImage
                    Case Else
                End Select

                Return Nothing
            End Get
        End Property
    End Class
End Class 
```

感谢您的任何回复。

# javascript - 使用 underscore.js 和 knockout.js 按列创建和排序表

> ID：16016293
> 
> 赞同：2
> 
> 时间：2013-04-15T13:23:17.017
> 
> 标签：javascript, knockout.js, underscore.js, tablesorter

首先，我是 Knockout.js 和 underscore.js 的新手，这是我学习这些库的第一天。任务是通过在第一次单击时按升序单击列标题，在第二次单击时按降序对表格进行排序。

我有这种 HTML 标记：

```
<table>
    <thead>
        <tr data-bind="foreach: columnNames">
            <td data-bind="text: $data, click: $root.sortColumn, css: { 'active': $root.currentItem() == $data }"></td>
        </tr>
    </thead>
    <tbody data-bind="foreach: persons">
        <tr>
            <td data-bind="text: name"></td>
            <td data-bind="text: formattedAge"></td>
            <td data-bind="text: sex"></td>
            <td data-bind="text: married"></td>
        </tr>
    </tbody>
</table> 
```

这个 js 代码为 knockout.js：

```
function personViewModel()
{
    var self = this;
    self.currentItem = ko.observable('');
    self.columnNames = ko.observableArray([
                'Name',
                'Age',
                'Sex',
                'Married'
    ]);
            self.persons = ko.observableArray([...]);
            self.sortColumn = function(item)
    {
        self.currentItem(item);
        var sorted = _(self.persons()).sortBy(item.toLowerCase());
        self.persons(sorted);
    };
};
ko.applyBindings(new personViewModel()); 
```

现在的问题是：

是否可以在单击 td 时获取元素描述符，所以我可以在 self.sortColumn 中使用类似“$(this)”的东西？因为现在我可以通过单击适当的列标题对表格进行排序，但我不知道如何标记一个列，它已经被单击（并检查它），使用`_(self.persons()).sortBy(item.toLowerCase()).reverse()`, 按列的降序对其进行排序。

谢谢：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:41:21.660

答案很简单。现在你只保存列名，你还需要有排序方向的变量，你在 sortColumn 中的逻辑是：

```
 function personViewModel()
 {
     var self = this;
     self.currentItem = ko.observable('');
     self.sortDirection = ko.observable(true);
     self.columnNames = ko.observableArray([
            'Name','Age','Sex','Married'
     ]);
     self.persons = ko.observableArray([
         { name : "John", formattedAge:27, sex:"Male", married:"No"},
         { name : "Bob", formattedAge:30, sex:"Male", married:"Yes"}           
     ]);

     self.sortColumn = function(item)
     {
         if (item == self.currentItem()) {
             self.sortDirection(!self.sortDirection())   
         } else{            
             self.currentItem(item);
             self.sortDirection(true)
         }
         if( self.sortDirection() ) {
             var sorted = _(self.persons()).sortBy(item.toLowerCase());
             self.persons(sorted);
         } else {
             var sorted = _(self.persons()).sortBy(item.toLowerCase()).reverse();
             self.persons(sorted);            
         }
     };
 };

 ko.applyBindings(new personViewModel()); 
```

请参阅带有工作示例的[jsfiddle 。](http://jsfiddle.net/vittore/vnwZJ/11/)

另请注意，您实际上并不需要 underscore.js，因为 ko.js 为您提供

```
myObservableArray.reverse()

myObservableArray.sort() 
```

你需要的一切。

```
var sortDirection = true
self.sortColumn = function(item) {
   if (item == self.currentItem()) {
      sortDirection = !sortDirection
      self.persons.reverse()
   } else {
      sortDirection = true
      var field = self.currentItem()
      self.persons.sort(function(left, right) { 
           return left[field] == right[field] ? 0 
              : ( left[field]< right[field] ? -1 : 1 ) 
      })
   }
} 
```

# windows-runtime - 如何判断控件是否不再对用户可见？

> ID：16016296
> 
> 赞同：0
> 
> 时间：2013-04-15T13:23:24.293
> 
> 标签：windows-runtime

我有一个控件，我在其中反复运行一些动画（例如 DoubleAnimation）。我可以检测我的控件是否不再对用户可见吗？例如，它被滚动离开，用户向前导航到另一个页面，或者它被其他控件遮挡。我不想运行这些动画，除非我的控件的至少一部分对用户可见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T16:18:35.233

您可以分析视觉树或从控件坐标转换到屏幕坐标，以查看其位置是否在视口内，还可以检查视觉树路径下控件的不透明度、可见性等内容，但这需要大量处理不值得一直为一个通用的解决方案做。

唯一有意义的是处理`ScrollViewer.ViewChanged`事件并检查偏移量是否使其可见，同时将`TransformToVisual`or`VisualTreeHelper`调用限制为仅在实际布局`ScrollViewer`更改时的时间。

# ruby-on-rails-3 - Rails List 记录和计数

> ID：16016297
> 
> 赞同：0
> 
> 时间：2013-04-15T13:23:24.823
> 
> 标签：ruby-on-rails-3, activerecord, rails-activerecord

我有一个名为 Note 的模型。每个音符都属于_to :call_reason。并且 call_reason has_many :notes。

我想在视图中显示一个 call_reasons 列表以及旁边的每个呼叫原因的总数，以便我们可以看到最受欢迎的呼叫原因是什么。

这是我到目前为止所拥有的：

仪表板控制器：

```
 def index
    @notes = Note.all
  end 
```

仪表板视图：

```
<% @notes.each do |n| %>
   <%= n.call_reason.reason %>
<% end %> 
```

这列出了所有笔记的 call_reasons。

我绊倒了如何列出每个 call_reason 一次，旁边有一个总数。我现在所拥有的只是列出了每个音符的所有 call_reasons，这是一团糟。我想我可以以某种方式确定范围或更改实例变量，但我很难让它正确。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:39:07.627

由于您想列出通话原因，您应该从以下内容开始：

```
def index
  @call_reasons = CallReason.all
end 
```

然后在您看来，您可以这样做：

```
<% @call_reasons.each do |call_reason| %>
  <%= call_reason.reason %> <%= call_reason.notes.count %>
<% end %> 
```

请注意，这将对数据库中的每个呼叫原因执行查询。为了防止这种情况，您可以使用[计数器缓存](http://railscasts.com/episodes/23-counter-cache-column)。也可以查看Rails Guides上关于[计数器缓存的部分。](http://guides.rubyonrails.org/association_basics.html#belongs_to-counter_cache)

# c - 在动态库中打包一些 OpenGL 命令，得到“wglMakeCurrent failed”

> ID：16016300
> 
> 赞同：1
> 
> 时间：2013-04-15T13:23:34.783
> 
> 标签：c, opengl, dll, tcl

我正在尝试将我的一些 OpenGL 命令放入外部库中。具体来说，我目前正在使用 Tcl 语言绘制 3d 场景，现在我想将一些 openGl 函数（例如绘图函数）**放入 dll（用 C 编程）并从****Tcl**加载它。这是因为我将要渲染大量数据。使用已编译的 C 库，它将运行得更快。

但是，我这样做有问题。当我启动我的程序时，在我的显示回调函数**第二次运行之前出现“** **wglMakeCurrent failed** ”错误。

 **Tcl 和 C 部分都报告**相同的线程 ID**。所以我想我不必担心多线程和上下文共享问题。

这是我的显示回调函数：

```
proc DisplayCallback { toglwin } {

    # adjust camera and objects ... 

    if {[catch {set cubeList [ExternalDrawCube $::cube(size)]}]} {
        puts "Catch drawcube error !!"
    } else {
        glCallList $cubeList
    }

    $toglwin swapbuffers
} 
```

有什么帮助或建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:15:33.480

我终于找到了我在代码中所做的愚蠢错误..

在 C 函数中，我写了“ **glEnd** ”而不是“ **glEnd()** ”。我从 tcl 转换代码时忘记了它！

希望这会帮助有类似**wglMakeCurrent 失败**错误的人......

对所有人都很好的调试**

# c++ - 转换数组 ^ 到 IBuffer

> ID：16016302
> 
> 赞同：2
> 
> 时间：2013-04-15T13:23:49.907
> 
> 标签：c++, windows-runtime, c++-cx

有没有办法将一个转换`Array<unsigned char>^`为一个`IBuffer^`？我想做的就是在 c# (WinRT) 到 c++/CX

```
Byte[] somebytes = GetBytes();
using (var stream = new InMemoryRandomAccessStream())
{
    await stream.WriteAsync(somebytes.AsBuffer());
    ....
    DoSomeOtherStuff();
} 
```

`.AsBuffer()`我在 c++/cx 中找不到/使用“魔术”扩展方法。

有没有其他方法可以在 c++/cx 中实现 .AsBuffer 功能？

# ruby-on-rails-3 - 如何从 Rails 控制台运行控制器操作，但设置 request.shot？

> ID：16016308
> 
> 赞同：1
> 
> 时间：2013-04-15T13:23:57.837
> 
> 标签：ruby-on-rails-3, rails-routing, rails-console

我正在开发一个多租户应用程序，因此几乎所有内容（从路由开始）都希望有一个看起来像“tenant_id.myapp.com”的“request.host”。

我正在尝试从 Rails 控制台运行控制器操作，但我无法弄清楚这一点。

最简单的事情似乎是“app.get”，但我不知道如何设置主机。

我还看到[一个提到使用“ActionController::TestProcess”的答案](https://stackoverflow.com/a/4403462/3314)，据我所知，它已从 Rails 中删除（或者如果没有，我还没有找到如何包含它）

还有其他选择吗？

谢谢！
丹尼尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T14:15:36.320

我刚刚在我的控制台中验证了它（Pry）

```
# Send request with fake HTTP_HOST
>>app.get(app.root_path, nil, {"HTTP_HOST" => "123.myapp.com"})
>>#=>200

# Then check if it works
>>app.request.env
>>#...
>># "HTTP_HOST" : "123.myapp.com" 
```

# css - 铬框阴影错误？

> ID：16016310
> 
> 赞同：0
> 
> 时间：2013-04-15T13:23:58.957
> 
> 标签：css

当我设置`#wrap {height: 0; overflow: hidden}`时，内部锚标记应该被隐藏，因此单击阴影区域应该没有任何反应。

我在 Firefox 和 IE 上进行了测试。他们都工作正常。

但是在 Chrome 上，当我点击阴影区域时，我仍然会看到警报窗口。

它是一个 WebKit 错误吗？

这是演示：http: [//jsbin.com/ofuxar/3](http://jsbin.com/ofuxar/3)

```
<div id="wrap">         
    <a href="#" onclick="alert('clicked')">click</a>            
</div>
#wrap {
  height: 0;
  overflow: hidden;
  position: absolute;
  box-shadow: 0 10px 10px 10px black;
}
#wrap a {
  display: block;
  height: 100px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T14:10:37.673

您将高度设置为 0，但仍显示其属性。因此，您应用于该元素的任何样式仍将显示。如果你做了一个 1px 的边框，它会显示一个 1px 的边框颜色。最广为人知的情况可能是当您在父 div 中有浮动元素并且父 div 折叠时。保留所有边距和边框元素，但 div 的高度为 0。

正如@Andrew 在评论中所说，您应该使用`display:none;`隐藏元素。如果我可能会问，您将某些内容设置为的原因是什么`height: 0`？

**编辑** [http://jsfiddle.net/bHPFN/](http://jsfiddle.net/bHPFN/)如前所述，元素的属性导致它的高度不是 0px，而是将元素的功能维度扩展到 CSS 属性委托的任何内容。

# asp.net-mvc - 如何在 ASP.Net MVC 视图中使用下划线/javascript 模板

> ID：16016316
> 
> 赞同：3
> 
> 时间：2013-04-15T13:24:06.500
> 
> 标签：asp.net-mvc, underscore.js, underscore.js-templating

我只是想知道您如何在 .aspx 视图中使用下划线模板，因为下划线使用的 <%= %> 标记被 .aspx 渲染引擎拾取并给我错误。

例如：

```
<script type="text/template" id="my-template">
  <span class="event" title="<%= description %>">
      <%= title %>
  </span>
</script> 
```

这个模板给了我一个错误，因为 .aspx 渲染引擎认为我正在尝试将这些东西绑定到模型。

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-15T16:48:40.133

来自[精美手册](http://underscorejs.org/#template)：

> **template** `_.template(templateString, [data], [settings])`
> [...]
> 如果 ERB 样式的分隔符不是您的菜，您可以更改 Underscore 的模板设置以使用不同的符号来衬托内插代码。定义一个**插值**正则表达式以匹配应逐字插入的表达式，一个**转义**正则表达式以匹配应在 HTML 转义后插入的表达式，以及一个**评估**正则表达式以匹配应在不插入结果字符串的情况下计算的表达式。

因此，如果默认`<%=...%>`的`<%-...%>`、 和`<%...%>`分隔符不适合您，那么您可以通过简单的配置更改来使用不同的分隔符。例如，如果您想使用`{%...%}`而不是，则在加载之后和使用之前`<%...%>`执行此操作：`underscore.js``_.template`

```
_.templateSettings = {
    interpolate: /\{%=(.+?)%\}/g,
    escape:      /\{%-(.+?)%\}/g,
    evaluate:    /\{%(.+?)%\}/g
}; 
```

演示：http: [//jsfiddle.net/ambiguous/TfB5M/](http://jsfiddle.net/ambiguous/TfB5M/)

# android - android将列表适配器项拖放到bin中

> ID：16016319
> 
> 赞同：3
> 
> 时间：2013-04-15T13:24:12.363
> 
> 标签：android, drag-and-drop, swipe-gesture

我想实现一个列表活动，用户可以从列表视图中拖动一个项目，然后我想显示一个小型回收站，用户可以在其中放置所选项目。回收站可以从屏幕的侧面或底部出现，也可以直接弹出。如果用户丢弃了一个项目，这个回收站应该会消失。

我怎样才能使它成为可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:40:52.617

#ProTip ：从搜索官方文档开始有时会产生有趣的结果，例如查找文档：http: [//developer.android.com/guide/topics/ui/drag-drop.html](http://developer.android.com/guide/topics/ui/drag-drop.html)

# php - 来自不同服务器的 PHP 日期

> ID：16016322
> 
> 赞同：0
> 
> 时间：2013-04-15T13:24:26.667
> 
> 标签：php, date, time

我们目前的托管公司位于加拿大，因此显然他们的时代与英国不同。

PHP中是否有任何方法可以显示日期/时间，但如果我指定IP，则可以从不同的服务器获取它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T13:25:31.327

您可以使用[`date_default_timezone_set`（请参阅文档）](http://it2.php.net/manual/en/function.date-default-timezone-set.php)功能将您的实际脚本时间设置为您需要的任何时间

例如`Rome`

```
date_default_timezone_set('Europe/Rome'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:27:31.943

使用时区将是一个更好的主意。

```
$now = new DateTime(null, new DateTimeZone('America/Toronto'));
$now->setTimezone(new DateTimeZone('Europe/London'));
echo now->format('Y-m-d H:i:s); 
```

# javascript - 选择目录保存图片

> ID：16016323
> 
> 赞同：1
> 
> 时间：2013-04-15T13:24:28.390
> 
> 标签：javascript, html, html5-canvas

我正在运行以下代码

```
<a href="#" id="" download="">Save Image</a> 
```

但我想知道您是否必须选择默认保存图像的目录，它保存在“下载”中

[如果对这个问题有疑问，这里有一些更复杂的东西](https://stackoverflow.com/questions/16014870/canvas-url-to-download-image)

注意：此链接用于下载画布

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:29:34.730

您无法从服务器端设置目标（由浏览器处理），但您可以使用一些类似[这样的解决方法](http://www.ardentedge.com/pr_fd.htm)

alltrough 我不会推荐它，因为它违反了用户空间。它也取决于浏览器，它将被保存在哪里，例如，您可以设置 Firefox，默认打开，毫无疑问地保存，记住最后的保存路径，但这都是由用户选择的，在他这边。

# .net - 您如何评估多项任务的结果

> ID：16016326
> 
> 赞同：1
> 
> 时间：2013-04-15T13:24:37.063
> 
> 标签：.net, task-parallel-library

使用 TPL，我设置了多个任务（动态创建，可能是一个很大的数字），每个任务返回一个布尔值，我想检查所有任务返回值是否为真。我该怎么做？可能吗？如果没有，是否可以将共享对象传递给每个任务并让任务更新此对象？

编辑：这将是我的任务的一个例子。ProcessEntity 返回一个布尔值。现在我创建并执行了多个这样的任务。我需要检查所有结果是否正确。

```
 private Task<bool> CreateTask(MyEntity entity, Action onStart, Action onComplete)
    {
        return (new Task<bool>(
            () =>
            {
                onStart.Invoke();
                var result = false;
                try
                {
                    result = ProcessEntity(myEntity);
                }
                catch (Exception ex)
                {
                }

                onComplete.Invoke();
                return result;
            })
               );
    }

 for (int i = 0; i < counter; i++)
        {
            CreateTask(entities[i], () => _taskCounter++, () => _taskCounter--).Start();
        } 
```

因此，此时我需要继续执行其他代码，并且只有在所有任务都返回 true 时才会发生这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T14:41:11.170

只需查询每个的[Task.Result](http://msdn.microsoft.com/en-us/library/dd321468.aspx)属性，这将等待任务完成并返回结果：

```
void Main()
{
    var tasks = new List<Task<bool>>();

    // spawn all the tasks
    for (int index = 0; index < 10; index++)  
        tasks.Add(Task.Factory.StartNew(new Func<bool>(GetValue)));

    // now wait for them to return
    bool didAllReturnTrue = tasks.All(t => t.Result);
    // note that if one task returns false, the rest of the tasks will not be
    // waited upon, and will finish in their own time.

    // show the results (LINQPad syntax)
    didAllReturnTrue.Dump();
}

public bool GetValue()
{
    Thread.Sleep(500);
    return true;
} 
```

请注意，这不会很好地处理任何任务中的异常，您必须将其内置。此外，借助 C# 5.0 / .NET 4.5 中新的 async/await 支持，您可以稍微编写上面的代码对异步也更友好，但我将不理会这个答案。

# dependencies - 用于自动生成依赖项的英特尔 Fortran 编译器选项

> ID：16016327
> 
> 赞同：4
> 
> 时间：2013-04-15T13:24:40.877
> 
> 标签：dependencies, fortran, intel, automatic-generalization

INTEL Fortran 编译器是否有自动生成依赖项的选项，例如 c/c++ 编译器的“-MM”选项，我们可以在 makefile 中使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T14:10:15.017

`-gen-dep`这样做，但是当使用预处理器时，我有问题使它工作。

但它更容易使用`Scons`或`waf`比`make`无论如何。至少 Scons 完全独立于编译器自动完成了这项工作。

否则请参阅[http://lagrange.mechse.illinois.edu/mwest/f90_mod_deps/](http://lagrange.mechse.illinois.edu/mwest/f90_mod_deps/)

或[http://personal.inet.fi/private/erikedelmann/makedepf90/](http://personal.inet.fi/private/erikedelmann/makedepf90/)

# iphone - UISearch 栏键盘颜色 iphone monotouch

> ID：16016331
> 
> 赞同：0
> 
> 时间：2013-04-15T13:24:54.173
> 
> 标签：iphone, ios, objective-c, xamarin.ios, uikeyboard

如何将`UISeachBar`键盘颜色更改为黑色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:36:38.247

尝试将`keyboardAppearance`文本字段的属性设置为`UIKeyboardAppearanceAlert`. 这给出了**黑色背景**。

```
for(UIView *subView in searchBar.subviews)
    if([subView isKindOfClass: [UITextField class]])
        [(UITextField *)subView setKeyboardAppearance: UIKeyboardAppearanceAlert]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:29:29.797

简短的回答是**NO**您不能更改键盘的颜色，因为 Apple/iPhone 不提供任何此类功能。

但是你可以改变键盘的外观，阅读[这个官方文档。](http://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html)

# html - 计算 HTML 中子块的宽度

> ID：16016333
> 
> 赞同：1
> 
> 时间：2013-04-15T13:25:02.103
> 
> 标签：html, css

我想在一个页面上创建 3 列，我想给每列一个 20px 的填充，给第 1 列和第 2 列一个 20px 的边距，我现在的问题是如何计算给定页面的每一列的宽度宽度为 960 像素？我是网络新手，想知道如何正确计算宽度？填充是否会增加页面的宽度？边界呢？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T13:37:09.147

我推荐阅读[这篇 CSS 技巧文章](http://css-tricks.com/the-css-box-model/)。深入了解[盒子模型](https://developer.mozilla.org/en-US/docs/CSS/box_model)：

> 在 CSS 中，每个 [元素] 都使用标准的盒子模型来描述。该模型描述了元素占用的空间内容。每个框有四个边缘：外边距边缘、边框边缘、填充边缘和内容边缘。

所以，基本上：

> 宽度 = 宽度 + 左填充 + 右填充 + 左边框 + 右边框

阅读并理解这一点，以及 CSS 定位的基础知识。然后你可以考虑设置`box-sizing`其他东西（你会看到`border-box`很多，特别是在响应式设计中。它（可以说）是一种更合乎逻辑的方法，但如果你愿意，正确掌握标准模型很重要根本没有进展。IE7（如果它甚至在你的雷达上）不支持`box-sizing`.

Firebug 和/或 Chrome 开发工具是你目前最好的朋友。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T13:31:44.817

有多个层被添加到一个元素中（参见[Box-Model](http://www.w3schools.com/css/css_boxmodel.asp)）。

通常在设置宽度时，添加填充会改变元素的大小，这有点不直观。然而，大多数浏览器都支持 css-attribute `box-sizing`，它改变了计算宽度（和高度）的方式：

价值观：

```
box-sizing: content-box;
    width = content

box-sizing: padding-box;
    width = content + padding (added to the spec later, less support)

box-sizing: border-box;      
    width = content + padding + border (easiest to understand, recommended)

box-sizing: margin-box;      
    width = content + padding + margin (quite useless) 
```

正如我所说，在大多数项目中，我强烈推荐`box-sizing: border-box;`它，因为它受到广泛支持且最直观。您可能需要为其添加前缀。我会这样做（霰弹枪方法）：

```
* {
    -webkit-box-sizing: border-box;
       -moz-box-sizing: border-box;
        -ms-box-sizing: border-box;
            box-sizing: border-box;
} 
```

请参阅[w3c School](http://www.w3schools.com/cssref/css3_pr_box-sizing.asp)以获取完整的文档和[caniuse](http://caniuse.com/#search=box-sizing)以了解浏览器支持的概述。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T13:37:20.123

填充和边框宽度都添加到元素（您的列）的宽度。边距不会影响列的宽度，但会包含在您的一般页面宽度中。

[您可以在此处](http://www.w3.org/TR/CSS2/box.html)阅读有关盒子模型的信息

在你的情况下，

```
column 1: 20 + X + 20

column 2: 20 + x + 20

column 3: 20 + X + 20 
```

1 和 2 后的边距：`20 + 20`

所以...

8*20 + 3X = 960

x = 266.6666...（您的列宽）

# breeze - 在我的激活函数中一个接一个地执行我的 3 个调用

> ID：16016334
> 
> 赞同：0
> 
> 时间：2013-04-15T13:25:06.977
> 
> 标签：breeze, durandal

**我在durandal/breeze**的一个项目上工作。我的`activate`函数中有以下代码：

```
var activate = function (routeData) {

    initLookups();
    var idTran = parseInt(routeData.idTran);
    var idItin = parseInt(routeData.idItin);

    if (idItin == -1)
        idItin = datacontext.createItineraryDetailTransport(idTran);

    datacontext.getTransportById(idTran, transport);
    datacontext.getItineraryById(idItin, itinerary);
} 
```

正如您在上面的代码中看到的，我对数据上下文有 3 次调用：

*   datacontext.createItineraryDetailTransport >>*最终... if (idItin == -1)*
*   datacontext.getTransportById
*   datacontext.getItineraryById

现在的问题是每个调用在执行之前都没有等待前一个调用完成。

**我的问题**：如何继续确保在执行下一个呼叫之前完成一个呼叫？请注意，第一个电话是在一个条件内......我正在考虑使用“承诺”，但不知道。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:25:23.097

你的例子的某些部分我不清楚。

是`initLookups`异步的吗？如果是这样，您是否必须等待它完成才能执行其他异步步骤？

`createItineraryDetailTransport`返回整数时如何异步`idItin`？

到底`createItineraryDetailTransport`是做什么的？我的猜测是，`idItin == -1`当您还没有`ItineraryDetailTransport`实体，因此没有您需要调用的密钥时`getItineraryById`。如果是这样，您必须重组`createItineraryDetailTransport`.

当他们看似毫无共同之处时，为什么`getItineraryById`还要等待？`getTransportById`

`transport`和是什么`itinerary`？我猜它们是意外省略的变量，这些变量将在这些数据上下文方法中使用异步调用的结果进行设置。

你的错误处理在哪里？如果其中一个异步调用失败应该怎么办？

这些问题必须先解决，然后才能有人给你一个很好的答案。

Joseph Gabriel 对我来说似乎大部分都在正确的轨道上，尽管我可能写的有点不同

```
...
var 运输、行程；

var 承诺 = (idItin == -1) ？
      datacontext.createItineraryDetailTransport(aCallBackThatSets_idItin) ：
      Q.resolve(); // 创建一个已解决的承诺

承诺=承诺
          .then(datacontext.getTransportById(idTran, 运输)
          .then(datacontext.getItineraryById(idItin, itinerary))
          .fail(yourErrorHandler);

回报承诺；// 不要忘记返回承诺！      

```

Joseph Gabriel 的建议中缺少的最重要的一步……以及您无法使他的建议发挥作用的原因……是它忽略了兑现承诺。

**如果您希望 Durandal 在激活视图之前等待，您必须返回一个承诺**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T17:38:51.447

您尝试做的事情的棘手部分是*有条件*地将三个调用链接在一起。

`then()`您可以使用该方法简单地将多个调用链接在一起。但是，在您的情况下，当第一个条件不满足时，您需要一个初始承诺来链接。

该`$.when()`方法是这里的诀窍，因为您可以链接 Breeze 返回的承诺，也可以链接“虚拟”承诺，这就是 $.when() 给你的。如果传递给的第一个参数`$.when`不是 Promise，则它返回一个立即解析的 Promise。

如果我正确理解您的问题，您应该能够编写如下代码：

```
var activate = function (routeData) {

    initLookups();
    var idTran = parseInt(routeData.idTran);
    var idItin = parseInt(routeData.idItin);
    var idtDeferred = $.when();
    if (idItin == -1)
        idtDeferred = datacontext.createItineraryDetailTransport(idTran);

    idtDeferred
        .then(datacontext.getTransportById(idTran, transport))
        .then(datacontext.getItineraryById(idItin, itinerary));
} 
```

您的代码示例看起来像 datacontext.createItineraryDetailTransport 应该设置 idItin var，但我假设它返回一个类似于典型微风查询的承诺。

# c# - C#：关闭应用程序进程的进程'杀死（与taskman）

> ID：16016337
> 
> 赞同：7
> 
> 时间：2013-04-15T13:25:10.357
> 
> 标签：c#, windows, process

我对 C# 很陌生，所以我的问题听起来很荒谬。我正在开发一个有时需要运行 ffmpeg 的应用程序。正如您所猜测的，当它的主机应用程序关闭时，这个 ffmpeg 进程必须被杀死。我使用这样的代码来完成这个任务：

```
AppDomain.CurrentDomain.ProcessExit += new EventHandler(OnProcessExit);
private void OnProcessExit(object sender, EventArgs e)
   {
      proc.Kill();
   } 
```

当应用程序正确关闭时（通过它的界面或使用 Taskman - 应用程序），这可以正常工作。问题是 OnProcessExit 事件不会触发，如果程序的进程被杀死（使用 Taskman - Processes）。据我所知，在底层杀死进程和关闭程序动作是不一样的，但我想，杀死进程是对它的命令，可以用C#工具来处理。那么，在这种情况下是否可以关闭子进程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:05:38.477

我想试试这个

```
Application.Exit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T11:19:09.083

我建议使用工作对象（根据 Scott Miller 的建议）。另一种选择是为您的应用程序提供特殊的帮助应用程序，它执行以下操作：

*   启动您的应用
*   当您的应用程序崩溃时，请对其进行清理。

但是工作对象绝对是更好的选择，它专门为此而生

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-17T12:01:37.200

让您的主机程序将其程序 ID 作为参数提交，然后在程序退出时进行侦听。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    static class Program
    {
        [STAThread]
        static void Main(string[] args)
        {
            if (args.Length != 0)
                new System.Threading.Thread( new System.Threading.ParameterizedThreadStart(handelexit)).Start(args[0]);

            // your code here
        }

        static void handelexit(object data)
        {
            int id = System.Convert.ToInt32(data.ToString());

            System.Diagnostics.Process p = System.Diagnostics.Process.GetProcessById(id);
            while (!p.HasExited)
                System.Threading.Thread.Sleep(100);

            System.Environment.Exit(0);
        }
    }
} 
```

# c++ - c++ 表达式：字符串下标超出范围

> ID：16016338
> 
> 赞同：0
> 
> 时间：2013-04-15T13:25:15.137
> 
> 标签：c++, expression

当我尝试调试代码时，它会遇到调试错误“c++ 表达式：字符串下标超出范围”很确定问题是在调用 setCode() 时带来的。如何修复 setCode() 中的代码？

```
#include <iostream>
#include <stdlib.h>
#include <string>
#include <fstream>
#include <list>
using namespace std;

class test
{
    private:
        string code;
        int digit;

    public:
        //constructor
        test(): code(""), digit(0) { }

        //copy constructor
        test(const test &other):
        digit(other.digit)
        { 
            for(unsigned int i=0; i < code.length(); i++)   
                code[digit] = other.code[digit];
        }

        //set up the private values 
        void setCode(const string &temp, const int num);
        void setDigit(const int &num);

        //return the value of the pointer character 
        const string &getCode() const;
        const unsigned int getDigit() const;
};

const string& test::getCode() const
{
    return code;
}
const unsigned int test::getDigit() const
{
    return digit;
}
void test::setCode(const string &temp, int num) 
{
    code[num] = temp[num];  
}
void test::setDigit(const int &num)
{
    digit = num;
}

int main()
{
    string contents = "dfskr-123";

    test aisbn;
    list<test> simul;
    list<test>::iterator testitr;
    testitr = simul.begin();
    int count = 0;

    cout << contents << '\n';
    aisbn.setCode(contents, count);
    aisbn.setDigit(count);
    simul.push_back(aisbn);
    count++;

    /*for(; testitr !=simul.end(); simul++)
    {
        cout << testitr->getCode() << "\n";
    }*/

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T13:30:00.970

当你创建一个`test`类的实例时，它里面的字符串是空的。这意味着无论您何时这样做，例如`code[something]`，您都将超出范围。索引是什么并不重要。

您要么需要从一开始就将字符串设置为一定的长度，并确保索引在该范围内。或者通过在需要时动态扩展字符串来确保索引在范围内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T13:30:09.033

您必须确保在执行此语句时：

```
 code[num] = temp[num]; 
```

两者`code`和`temp`至少是 size `num + 1`。

# javascript - 复选框已选中，但 :checked 不起作用

> ID：16016343
> 
> 赞同：0
> 
> 时间：2013-04-15T13:25:23.297
> 
> 标签：javascript, jquery

我有几个复选框。我正在使用 .prop() 函数设置和重置复选框的默认值，基于 JSON 响应（通过 ajax-requests 加载数据）。问题是，如果我手动更改它们，它们显然不会改变这种行为。我无法通过 $('#checkbox :checked').val() 传递复选框的值，控制台日志显示“未定义”。这是因为 .prop() 函数吗？如何获取选中复选框的值？

如果您需要更多信息，我很乐意提供。这里有一些代码：

```
if (json.event.public_visible == 1) {
  $('#event_public_visible').prop('checked', true);
} else {
  $('#event_public_visible').prop('checked', false);
}

if (json.event.package_event == 1) {
  $('#event_package_only').prop('checked', true);
} else {
  $('#event_package_only').prop('checked', false);
} 
```

更新：更多代码

```
var editEvent = function () {
  if ($('#event_public_visible').is(':checked')) {
    console.log('test');
  }
  formData = {
    // ... other fields
    event_package_only: $('#event_package_only :checked').val(),
    event_public_visible: $('#event_public_visible :checked').val(),
    // ... more fields
  };

  $.ajax({
    url: base_url + "admin/events/editAsync",
    type: "POST",
    data: formData,
    dataType: "json",
    success: function (json) {
      // success handling
    }
  });
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T13:30:30.110

试试这个： `$('#event_public_visible:checked').val()`和`$('#event_public_visible:checked').val()`

你可以试试：`('#event_public_visible:checked').length ? $('#event_public_visible:checked').val() : '';`

示例：http: [//jsfiddle.net/infernalbadger/SfcjG/](http://jsfiddle.net/infernalbadger/SfcjG/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T13:29:28.387

您正在为 ID 为“event_public_visible”和“event_package_only”的元素设置属性，然后尝试从 ID 为“checkbox”的元素中读取。

你的意思是用这个吗？

```
$('[type=checkbox]:checked').val() 
```

可以看到它在这里工作：

[http://jsfiddle.net/vRba3/](http://jsfiddle.net/vRba3/)

# windows - 带有可变参数列表的 ActiveX 方法？

> ID：16016350
> 
> 赞同：0
> 
> 时间：2013-04-15T13:25:35.337
> 
> 标签：windows, mfc, activex, ocx

我有一个 DLL，它为函数提供了一个可变参数列表，其定义如下

my_func(int var,...)

根据 my_func() 的调用方式，它需要或多或少的附加参数。

现在这个 DLL 必须被一个基于 MFC 的 ActiveX 控件包装。对于方法定义，我可以找到许多 VT_ 和 VTS_ 定义包装到特定的预定义类型。但是是否也可以有一个带有这样一个可变参数列表的 ActiveX 方法？

如果是：如何实施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:50:13.790

尽管在技术上是可行的，但通过使用`vararg`IDL 中的关键字与指定为的参数结合使用`SAFEARRAY(VARIANT)`，不支持在 MFC ActiveX 项目中指定这种方法。你可以用 ATL 来代替，但我认为这将是一个巨大的不便，只是为了获得你描述的功能。

一些更好的选择（在我看来）是：

1.  为包装函数的每个用例提供特定方法。
2.  提供一个公开*所有*参数的方法，并添加一个 UINT 以根据应使用的参数设置标志。

我的选择是1。

# matlab - 在 Matlab 中创建一个简单的表格

> ID：16016355
> 
> 赞同：0
> 
> 时间：2013-04-15T13:25:57.287
> 
> 标签：matlab, printf

我已经和 fprintf 打了一个小时了，应该很容易，但显然不是。有一个称为 的描述性统计向量`datasave`，包含 9 个数字，如平均值、标准偏差、峰度等。

我有一个`datalabels`带有标签的向量 'Average' ， 'St.dev' ， 'Kurt' 等。

使用 fileopen 打开文件
打印标签
新行
打印值（正好在标签下！）
关闭文件

这是我迄今为止尝试过的：

```
fileID = fopen('descstat2.txt','w'); 
fprintf(fileID,'MediaTonnes MinTonnes MaxTonnes Sigma Skew Kurt SigmadTonnes SkewdTonnes KurtdTonnes\r\n');
format short;
fprintf(fileID, '%g\t%g\t%g\n', datasave.'); 
```

帮助？

我至少有 50 种不同的组合，所以我真的不能给你我的输出......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:51:11.627

也许试试这个：

```
fileID = fopen('descstat2.txt','w'); 
fprintf(fileID,'%s\t%s\t%s\t%s\t%s\t%s\t%s\t%s\t%s\r\n', datalabels);
fprintf(fileID, '%g\t%g\t%g\t%g\t%g\t%g\t%g\t%g\t%g\r\n', datasave);
fclose 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T14:58:07.960

要使用 XLSWRITE，您需要创建一个元胞数组：

```
out = [datalabels(:)'; num2cell(datasave)];
xlswrite('descstat2', out) 
```

如果您要保存到的文件作为文本文件存在，`xlswrite`则也将其另存为文本。

它可能会更慢`fprintf`（由于 COM 接口），但您不必处理格式化输出。只需要将所有内容都转换为单元格。

* * *

另一种选择是使用 Statistical Toolbox 中的 TBLWRITE。你可以这样做：

```
tblwrite(datasave, datalabels, [], filename, '\t') 
```

它还将放置指定为第三个参数的行号或标签。可能对某些数据有用。

# c# - Image1.ImageUrl asp.net 的 URL 崩溃

> ID：16016358
> 
> 赞同：0
> 
> 时间：2013-04-15T13:26:14.267
> 
> 标签：c#, asp.net, image, url

问题：

我更改图片网址：

```
chartPic.ImageUrl = "~/Serieschart_pic.ashx?ID=" 
+ Series_ID.ToString() + "&IntervalFrom=" + txtDateFromf.Text; 
```

当 `txtDateFromf.Text == "`“它起作用时。（我会得到这个图像网址`...testbox1/monitoring/Serieschart_pic.ashx?ID=5&IntervalFrom=`：）

什么时候`txtDateFromf.Text`是日期，（格式：yyyy-MM-dd HH:mm:ss.fff），图像 URL 变砖并变成这样的东西： `...testbox1/~monitoring/monitoring/Serieschart_pic.ashx?ID=5&IntervalFrom=2013-04-15%2012:30:00.000`

这个网址不起作用...！为什么？唯一的事情是另一个get参数-.-

感谢帮助 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:34:04.940

我从您所说的内容中猜测，`Serieschart_pic.ashx`不希望参数像您所做的那样（即`2013-04-15%2012:30:00.000`）传递，而是以不同的格式传递。您是否将代码写入**ASHX**文件以查看它的预期内容？

# iphone - 在 iOS 中删除 html 标签和不需要的字符

> ID：16016359
> 
> 赞同：3
> 
> 时间：2013-04-15T13:26:15.140
> 
> 标签：iphone, ios, objective-c, xcode

我有以下方法可以从字符串中删除 html 标签和不需要的字符：

```
-(NSString *) stringByStrippingHTML: (NSString*) s {
NSRange r;
while ((r = [s rangeOfString:@"<[^>]+>" options:NSRegularExpressionSearch]).location != NSNotFound)
    s = [s stringByReplacingCharactersInRange:r withString:@""];
while ((r = [s rangeOfString:@"&#8217;" options:NSRegularExpressionSearch]).location != NSNotFound)
    s = [s stringByReplacingCharactersInRange:r withString:@"\'"];
while ((r = [s rangeOfString:@"&#8221;" options:NSRegularExpressionSearch]).location != NSNotFound)
    s = [s stringByReplacingCharactersInRange:r withString:@"\""];
while ((r = [s rangeOfString:@"&#8220;" options:NSRegularExpressionSearch]).location != NSNotFound)
    s = [s stringByReplacingCharactersInRange:r withString:@"\""];
while ((r = [s rangeOfString:@"&#8230;" options:NSRegularExpressionSearch]).location != NSNotFound)
    s = [s stringByReplacingCharactersInRange:r withString:@"..."];
while ((r = [s rangeOfString:@"&#8211;" options:NSRegularExpressionSearch]).location != NSNotFound)
    s = [s stringByReplacingCharactersInRange:r withString:@"-"];

return s;
} 
```

我有太多的 while 案例，如何以更优雅的方式完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:33:09.577

我相信这`NSString`有一些内置的方法。 [检查这个答案。](https://stackoverflow.com/a/2843443/2282538)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T13:52:52.283

[google-toolbox-for-mac](http://code.google.com/p/google-toolbox-for-mac/)库（是的，这也适用于 iOS）有一些`NSString`类别方法可以更有效地取消转义 & 编码字符。看看[GTMNSString+HTML](http://code.google.com/p/google-toolbox-for-mac/source/browse/trunk/Foundation/GTMNSString%2BHTML.h)。

这不会处理第一种情况（剥离 HTML 标记），但对于您正在做的其他替换，它应该是一个更快、更全面的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T13:33:41.860

`[s stringByReplacingOccurrencesOfString:"&#8221;" withString:@"\""];`除了第一种情况，您可以使用 like 。

# c++ - 如何用自己的类型实例化超类模板？

> ID：16016360
> 
> 赞同：1
> 
> 时间：2013-04-15T13:26:15.683
> 
> 标签：c++, templates, inheritance

我有很多类 A，除了它们的数据结构外，它们非常相似，所以我想将常见的东西移到基本模板 B 中。问题是模板参数是继承类的一部分，所以它在点我需要将它传递给模板。如果不将 X 从 A 中移出（试图保持封装），如何实现这一点？

```
template<class X>
class B {
    int somefunction( X a );
};

class A : public B<X> {
  public:
    struct X { // different in each class A
        int x;
    };
}; 
```

注意：出于架构原因，A 的“成员”需要委托给中央容器，所以我需要这个子结构。是的，我知道，我也不喜欢它，但这无法改变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T13:35:23.553

这是无法做到的，因为在实例化基础时，类型仍然不完整，并且未定义嵌套类型。您要解决的问题是什么？可能有比您尝试的更简单的解决方案。

# javascript - 使用 JavaScript 检查位置栏是否正在显示（对于 Internet Explorer）

> ID：16016362
> 
> 赞同：1
> 
> 时间：2013-04-15T13:26:16.877
> 
> 标签：javascript, debugging, cross-browser, popup

我正在使用一个函数来在打开弹出窗口时调整窗口大小。它应该计算表格的坐标并根据它打开弹出窗口。（避免弹出窗口太小而需要使用滚动）。

问题是，当我在本地环境中测试它时，它工作正常，但是当我在另一个环境中测试它时，它似乎没有被应用（但我在同一台机器上使用相同的浏览器对其进行了测试。）你知道可能是什么问题吗？这是我调整大小的javascript函数：

```
function resizeWindowHeightForLittleRows(bottom){
    var tHeader = parseInt(document.getElementById('xtFzRow').style.height) + 
                  parseInt(document.getElementById('headerTable').clientHeight) +
                  28; /*Title Bar*/
    var isChrome = navigator.userAgent.toLowerCase().indexOf('chrome') > -1;
    var isFF = navigator.userAgent.indexOf("Firefox") > -1;
    var titleBarHeight = isChrome ? 40 : (isFF ? 55 : 20); 
    var tableHeight = parseInt(document.getElementById('xtFCInner').style.height) + titleBarHeight;
    var screenHeight = tHeader + tableHeight + bottom;
    var availHeight = screen.availHeight-100;
    window.resizeTo(screen.availWidth-100, screenHeight <= availHeight ? screenHeight : availHeight);

} 
```

当我验证在这两种情况下都应用了相同的 javascript 并且我使用 sabe 浏览器在同一台机器上进行了测试时，我不知道什么配置（或其他）可能是导致此问题的原因。我可以尝试任何想法吗？

**更新：问题是我的函数没有考虑是否显示 url bar**

我需要在我的调整大小函数中添加验证是否正在显示 url 栏，以便在调整大小时获得正确的值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T03:22:35.700

在 FF 和 Chrome 中，您可以使用`window.locationbar`它来检查它是否可见，但这不适用于 IE。

我的建议是考虑在 JavaScript 函数中的 titlebarheight 上再增加 30px：

```
function resizeWindowHeightForLittleRows(bottom){
    var tHeader = parseInt(document.getElementById('xtFzRow').style.height) + 
              parseInt(document.getElementById('headerTable').clientHeight) +
              28; /*Title Bar*/
    var isChrome = navigator.userAgent.toLowerCase().indexOf('chrome') > -1;
    var isFF = navigator.userAgent.indexOf("Firefox") > -1;
    var titleBarHeight = isChrome ? 40 : (isFF ? 55 : 50);// adding 30px if it's not chrome or FF
    var tableHeight = parseInt(document.getElementById('xtFCInner').style.height) + titleBarHeight;
    var screenHeight = tHeader + tableHeight + bottom;
    var availHeight = screen.availHeight-100;
    window.resizeTo(screen.availWidth-100, screenHeight <= availHeight ? screenHeight : availHeight);
} 
```

# html - 如何用css定位div并强制文本环绕

> ID：16016363
> 
> 赞同：0
> 
> 时间：2013-04-15T13:26:17.123
> 
> 标签：html, css, position, word-wrap

我阅读了以前的帖子并从绝对位置更改了我的 CSS 以使文本环绕。

我希望这个 div 位于右下角，并且文本可以在它周围移动。

但是，目前文本正在迫使 div 向下。

任何人都知道如何解决这个问题？

html:

```
<div id="top-image">
        image
    </div>

    <p>dummy text dummy text dummy text dummy text dummy text dummy text 
dummy text dummy text dummy text dummy text dummy text dummy text dummy text 
dummy text dummy text dummy text dummy text dummy text dummy text dummy text 
dummy text dummy text dummy text dummy text dummy text dummy text dummy text 
dummy text      <br><br>

dummy text dummy text dummy text dummy text dummy text dummy text dummy 
text dummy text dummy text dummy text dummy text dummy text dummy text dummy 
text dummy text dummy text dummy text dummy text dummy text dummy text dummy 
text dummy text dummy text dummy text dummy text dummy text dummy text dummy
text<p>

<div id="bottom-image">
    image
</div> 
```

CSS：

```
#bottom{
float:left;
height:215px;
width:100%;
margin-top:10px;
margin-bottom:10px;
}

#top-image{
    background-color:#999;
    float:left;
    width:140px;
    height:110px;
    margin-right:10px;
    margin-bottom:10px;
    }

#bottom-image{
    background-color:#999;
    float:right;
    width:140px;
    height:110px;
    margin-left:10px;
    } 
```

这是它目前的样子： ![截屏](https://i.stack.imgur.com/YWuut.jpg)

如您所见，文本将底部图像向下推到页脚中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T13:42:46.733

由于 a`<p>`是块级元素，它总是会强制其他内容向下。如果将图像放在段落内，它会在右侧的段落内浮动。只需将其放在您希望它对齐的文本行的开头即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T13:34:21.237

就这么简单：[http ://codepen.io/anon/pen/qiIob](http://codepen.io/anon/pen/qiIob)

您需要将 float:left 添加到您的`<img>`并且不要将您的文本包装到 div 或 p 中。

# php - SMTP 使用 localhost 中的 codeigniter 发送电子邮件，但不在虚拟主机上

> ID：16016366
> 
> 赞同：2
> 
> 时间：2013-04-15T13:26:20.423
> 
> 标签：php, smtp, fsockopen

我已经设法让我的 sendmail 功能在我的本地主机上工作，但是当我将它上传到我的虚拟主机时，我会看到一长串错误。我正在使用 gmail，它在本地运行良好。我认为这与 SSL 有关。这是我收到的错误：

```
A PHP Error was encountered

Severity: Warning

Message: fsockopen() [function.fsockopen]: unable to connect to ssl://smtp.gmail.com:465 (Connection timed out)

Filename: libraries/Email.php

Line Number: 1689

A PHP Error was encountered

Severity: Warning

Message: fwrite(): supplied argument is not a valid stream resource

Filename: libraries/Email.php

Line Number: 1846 
```

这个列表还在继续。这是我发送电子邮件和使用的配置数组的函数：

```
 $config = array(
                'protocol' => "smtp",
                'smtp_host' => "smtp.gmail.com",
                'smtp_port' => 465,
                'smtp_user' => "removed",
                'smtp_pass' => "removed",
                'mailtype'  => "html",
                'charset'   => "iso-8859-1"
            );

            //generate a random key
            $key = md5(uniqid());

            //load email library and set config settings
            $this->load->library("email", $config);//array("mailtype"=>"html")
            $this->email->set_newline("\r\n");
            $this->load->model("model_users");
            $this->email->initialize($config); 
```

我的主机是 123-reg.co.uk，我认为这与 SSL 有关。任何帮助都会非常感谢。

# .net - VB .NET 中的双重菜单和状态栏？

> ID：16016375
> 
> 赞同：0
> 
> 时间：2013-04-15T13:26:44.860
> 
> 标签：.net, vb.net, menu, duplicates, statusbar

这有点奇怪，我开始认为这可能是 VB 2010 的一个错误，但我很想知道是否有其他人遇到过这个问题并有解决方案，不过如此.

我正在研究我工作的库存数据库程序。事情进展顺利，直到完全靠它自己，界面开始在菜单和表单上的状态栏上加倍......但只有当我运行它时。他们说一张图片值一千字，但由于我没有发布那么多，我将尝试以文字为例：

> 文件选项模板帮助

它在运行时的作用是使菜单栏加倍，因此相同的菜单（和状态栏）位于其自身之上：

> 文件选项模板帮助
> 
> > 文件选项模板帮助

两个栏中的每个对象都具有相同的功能......子菜单项的工作方式就像它们应该做的那样，它只是在运行时将所有内容加倍。

我已经从表单中删除了两个栏，保存，然后重新创建它们，但问题也回来了。对此有任何想法或想法吗？多谢你们。:)

# xcode - 快速多次运行后 XCode 不编译/运行/清理

> ID：16016377
> 
> 赞同：0
> 
> 时间：2013-04-15T13:26:47.220
> 
> 标签：xcode

从 XCode 4.2 开始，我一直面临这个问题。这些天来，它变得非常烦人。我正在运行 XCode 4.6，但这个问题仍然存在。如果我快速保存（Command + S）并多次运行（Command + R）项目，对项目进行小的更改，它最终根本无法编译。必须强制退出 XCode 并重新打开它。除了编译之外，其他一切都有效。

其他人有同样的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T08:59:45.957

我感觉这个问题已经在 XCode5 中修复了。使用了几天，到目前为止我还没有遇到过这个问题。

# c# - 为 Windows 应用程序创建设置文件

> ID：16016381
> 
> 赞同：-1
> 
> 时间：2013-04-15T13:27:02.783
> 
> 标签：c#, installation, setup-deployment, windows-applications

我是我的 windows 应用程序项目中的三个类库。现在我想为我的项目创建安装文件。所以我所做的是，只需创建一个新的安装项目并添加我的解决方案文件。但它只添加了 Forms 类。所以我在设置的解决方案上手动添加了所有剩余的 3 个类库，单击添加现有项目然后浏览我的类库。并构建项目得到了exe文件。

当我尝试打开已安装的应用程序时，它说项目中缺少 dll。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:36:51.450

在您的**安装**项目中，您需要包含**内容**文件以及Windows 项目的**主要输出**。

可以在[此处找到添加文件的示例](http://maffelu.net/c-setup-projet/)

# php - PHP根据带有多组单选按钮的表单提交重定向到特定的url

> ID：16016386
> 
> 赞同：0
> 
> 时间：2013-04-15T13:27:23.600
> 
> 标签：php, forms, redirect, submit

我正在尝试设置一个表单，我的网站 - piciscan.co.uk - 的用户将使用它来订购相册。我想在订购他们的相册时为他们提供一些选项，并且在提交表格时，我希望客户被重定向到我的单独商店网站 - piciscanshop.co.uk 的相关页面。

例如，如果用户想要订购排版 4 中带有打印页码的肖像相册，他们应该被重定向到 piciscanshop.co.uk/portrait-layout4-pagenums-photobook。

到目前为止，我有一个表单的 html，并且相信使用一些 php 可以使我正在寻找的东西发生。

这是html代码：

```
<form id="layoutSelector" method="get" action="layoutSelector.php">

<fieldset>
<input type="radio" name="aspect" id="layoutAspectPortrait" value="portrait">
<label for="layoutAspectPortrait">Portrait</label>
<br>
<input type="radio" name="aspect" id="layoutAspectPortrait" value="landscape" checked="checked">
<label for="layoutAspectPortrait">Landscape</label>
</fieldset>

<fieldset>
<input type="radio" name="layout" id="layoutNumber1" value="layout1">
<label for="layoutNumber1">Layout 1</label>
<br>
<input type="radio" name="layout" id="layoutNumber2" value="layout2">
<label for="layoutNumber2">Layout 2</label>
<br>
<input type="radio" name="layout" id="layoutNumber3" value="layout3" checked="checked">
<label for="layoutNumber3">Layout 3</label>
<br>
<input type="radio" name="layout" id="layoutNumber4" value="layout4">
<label for="layoutNumber4">Layout 4</label>
</fieldset>

<fieldset>
<input type="radio" name="pageNums" id="layoutPageNums" value="pageNums">
<label for="layoutPageNums">Page Numbers</label>
<br>
<input type="radio" name="pageNums" id="layoutNoPageNums" value="" checked="checked">
<label for="layoutNoPageNums">No page numbers</label>
<br>
</fieldset>
<div class="submitsAndHiddens">
<input type="submit" value="Submit">
</div>
</form> 
```

所以，我想我正在寻求帮助的是：如何编写 layoutSelector.php。

非常感激任何的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:34:06.223

在 layoutSelector.php 中，通过 获取表单数据`$_GET['field_name_here']`，根据需要进行处理（用于`var_dump($_GET);`查看传入的所有内容）。然后，使用 . 重定向到相应的页面`die(header('Location: other_page.php'));`。

因此，对于您问题中的示例，layoutSelector.php 可能如下所示：

```
<?php
    if ($_GET['layout'] === 'layout4' && $_GET['pageNums'] === 'layoutPageNums') {
        die(header('Location: /portrait-layout4-pagenums-photobook'));
    }
?> 
```

或者，如果您的所有页面都以这种方式布局，您可能只需执行以下操作：

```
<?php
    die(header('Location: /'. $_GET['aspect'] .'-'. $_GET['layout'] .'-'. $_GET['pageNums'] .'-photobook'));
?> 
```

* * *

更好的解决方案是在提交表单时通过 JavaScript 检查这些值并更改表单操作，因此不需要重定向（这样会更快）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:41:11.273

在 layoutSelector.php 中放置这段代码

```
$page = $_GET['aspect'] . "-" . $_GET['layout'] . '-' . $_GET['pageNums'] . '-' .'photobook';

header('Location : '. 'http://piciscanshop.co.uk/'.$page); 
```

# javascript - 访问在 javascript 中存储为会话变量的 List 对象

> ID：16016388
> 
> 赞同：0
> 
> 时间：2013-04-15T13:27:28.397
> 
> 标签：javascript, asp.net, json, oop

我在我的 ASP.NET 应用程序的会话中存储了一个 ID 列表。出于上下文目的：

*   这是一个类似 facebook 的聊天模块。ID 与各个聊天选项卡相关。
*   jQuery 正在处理很多事情，并且需要每个框的特定 id。
*   当一个新的聊天会话被创建时，它会在服务器端获得一个 id，用于客户端交互，如 jQuery 事件绑定

该程序运行良好我只需要一种访问前端列表的方法。我认为将对象转换为 json 对象是最有意义的，但我不太确定从哪里开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:34:56.910

您始终可以通过执行以下操作将服务器端内容呈现给客户端：

```
var ids = '<%= Session["Keys"].ToString() %>'; 
```

然后拆分结果并根据需要进行转换。这实际上取决于 ID 的外观（只是数字，或者涉及更多信息）以及您如何使用它们，因此如果没有有关结构的更多信息，很难提供额外的建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T13:33:41.173

将此添加到您的项目[http://www.nuget.org/packages/Newtonsoft.Json](http://www.nuget.org/packages/Newtonsoft.Json)然后查看此资源[http://james.newtonking.com/projects/json/help/index.html?topic=html/SerializingJSON。 htm](http://james.newtonking.com/projects/json/help/index.html?topic=html/SerializingJSON.htm)来确定如何进行序列化/反序列化操作；o)

# oop - 具有附加属性的自定义异常？

> ID：16016390
> 
> 赞同：3
> 
> 时间：2013-04-15T13:27:34.067
> 
> 标签：oop, exception, exception-handling

我希望这个问题有一个明确的答案。

**是否最好使用附加属性（如项目 ID 或类似内容）扩展自定义异常，以允许接收客户端分析异常？**

另一种方法是将所有有价值的信息隐藏在消息字符串中。或者将异常替换为具有实际结果和附加上下文信息的复杂返回值，否则这些信息将在异常的属性中。

谢谢你的建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:44:26.190

这真的取决于场景。通常，如果这是一个实际的异常（阻止正在执行的方法），我会使用扩展异常类的第一个选项。

字符串选项听起来很糟糕，无论场景是什么。

当我们谈论诸如响应之类的事情（例如 - HttpResponse）时，复杂的返回对象听起来不错在服务器端？）。

# asp.net-mvc - 在 Html.ValueFor() 中指定 Css 类

> ID：16016394
> 
> 赞同：0
> 
> 时间：2013-04-15T13:27:45.740
> 
> 标签：asp.net-mvc

我想`name`在调用时使用 CSS 类显示模型的属性`Html.ValueFor(x => x.Name)`。

如何使用`@Class`或其他方式完成此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:34:23.263

```
<span class="YOUR CLASS NAME">
if(Model!=null){
@Model.Name
}
</span> 
```

# c# - 在 C# 中绘制和打印复杂文档（改进/替换我的 PrintDocument）

> ID：16016395
> 
> 赞同：2
> 
> 时间：2013-04-15T13:27:47.227
> 
> 标签：c#, printdocument

我正在尝试用 C# 生成一个文档，主要用于打印。基本上它是一个表格，我将在其中填写来自数据库对象的值。

我过去使用的代码很丑，很长，写起来很痛苦，维护起来也更糟。

```
public class MyDoc : PrintDocument
{
    private MyContainer _myObject; //Inherits from list.

    private int PageCount()
    {
        return (int)Math.Ceiling(_myObject.Count / 5f);
    }

    protected override void OnPrintPage(PrintPageEventArgs e)
    {
        Graphics g = e.Graphics;
        g.PageUnit = GraphicsUnit.Millimeter;

        Font bigFont = new Font("Arial", 16, FontStyle.Regular, GraphicsUnit.Point);
        Font mediumFont = new Font("Arial", 10, FontStyle.Regular, GraphicsUnit.Point);
        Font smallFont = new Font("Arial", 10, FontStyle.Regular, GraphicsUnit.Point);
        Font smallNumberFont = new Font("Courier New", 7, FontStyle.Regular, GraphicsUnit.Point);
        Pen linePen = new Pen(Brushes.Black, 0.2F);

        int rowPosition = 5;
        int rowIncrement = 9;

        g.DrawString(string.Format("Page {0} of {1}", _pageNumber, PageCount()), smallFont, Brushes.Black, 175, rowPosition);
        rowPosition = 15;

        g.DrawImage(Image.FromFile("myfile.jpg"), 127, rowPosition);

        g.DrawString("Name:", smallFont, Brushes.Black, 3, rowPosition);
        g.DrawString(_myObject.Name, smallBoldFont, Brushes.Black, 50, rowPosition);
        rowPosition += rowIncrement;

        //Sub-Items Table Header
        g.DrawRectangle(linePen, 3, rowPosition, 35, 10);
        g.DrawRectangle(linePen, 38, rowPosition, 85, 10);
        g.DrawRectangle(linePen, 123, rowPosition, 25, 10);
        g.DrawRectangle(linePen, 148, rowPosition, 20, 10);
        g.DrawRectangle(linePen, 168, rowPosition, 25, 10);

        foreach (var i in _myObject)
        {
            //Draw a grid and write out all details of everything in the collection.
            //If there are 2 many, stop and we will create a page 2.
        }

        //Write Standard page footer
        //etc etc.
    }
} 
```

也是一个新要求，我需要将其保存为 pdf 或图像。

基本上，我有 300-500 行代码来编写一个看起来还不错的文档。

我还有更多工作要做，这将非常相似，我需要更好的方法！

* * *

我想过：

**XAML** - 然后数据绑定我需要填写的属性。不知道如何处理它传播到 2 个或更多页面上。

**Word Interop** - 我不知道是否可以。它在未安装 Office 的网络服务器上运行。（如果这就是我所需要的，我可以打包几个 dll，但我不确定。）

所以我正在寻找你们所有好人的想法。

我不想使用外部库，但如果这是最好的方法，它需要是免费的并且有良好的许可:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:39:10.870

尝试 [FlowDocument](http://msdn.microsoft.com/en-us/library/system.windows.documents.flowdocument.aspx)，另请参阅这篇文章：[使用 WPF PrintDialog 打印流文档。](http://miteshsureja.blogspot.hk/2012/06/printing-flow-document-using-wpf.html)

![在此处输入图像描述](https://i.stack.imgur.com/ikJ2L.png)

![在此处输入图像描述](https://i.stack.imgur.com/DNgkI.png)

# c++ - mysql++ 示例未编译 mysql.h：没有此类文件或目录编译终止

> ID：16016400
> 
> 赞同：0
> 
> 时间：2013-04-15T13:28:02.850
> 
> 标签：c++, mysql, compilation, compiler-errors, mysql++

每当我尝试从**mysql++**库中编译一些示例时，都会出现以下错误：

```
In file included from /home/testbed/Tools/mysql++-3.1.0/lib/cmdline.h:32:0,
from multiquery.cpp:32:
/home/testbed/Tools/mysql++-3.1.0/lib/common.h:189:20: fatal error: mysql.h:
No such file or directory
compilation terminated. 
```

我已经安装了所有的 MySQL 库，当我搜索 mysql.h 文件时，它会显示出来！

我究竟做错了什么？

# jquery-ui-sortable - 拖动期间jquery ui可排序临时元素交换

> ID：16016404
> 
> 赞同：1
> 
> 时间：2013-04-15T13:28:06.853
> 
> 标签：jquery-ui-sortable, swap

我需要在大小有限的 jquery ui 可排序列表中实现临时拖动替换。

我有 2 个可排序的列表：

*   一个“插槽”，只有 1 个点可容纳单个元素
*   一个“桶”，其中包含多个元素，用户可以从中选择任何元素来填充“槽”

用户必须将一个元素从桶中拖到槽中。当用户将鼠标悬停在插槽上时，**如果插槽已被占用**，则应将当前插槽元素移动到存储桶中，以便在视觉上为拖动的元素腾出空间。然后用户有2个选项：

*   如果用户丢弃了新元素：将新元素插入槽中
*   如果用户取消放置：将先前插入槽的元素移回槽中（原样）

这种行为应该重复，直到用户取消拖动或将元素放入槽或桶中。

为了在视觉上将插槽限制为单个元素，我将其限制为单个元素的确切高度，并将其溢出设置为隐藏。

不幸的是，我一直无法在插槽中保留单个元素的同时产生效果。

编辑1：[这是我到目前为止的一个例子](http://jsfiddle.net/uUSJG/)

```
$(".slot").bind("sortchange", function (event, ui) {
    var slot = $(event.target);
    var bucket = $(".bucket");

    // Move any element already in the slot (other than the currently
    // dragged element) into the bucket
    var slotElements = slot.children(".item").not(ui.item);
    if (slotElements.length > 0) {
        for (var idx = 0; idx < slotElements.length; idx += 1) {
            var element = $(slotElements[idx]);
            moveAnimate(element, bucket);
        }
    }
}); 
```

# jsf - 事件：cellEdit 不支持 primefaces 数据表单元格编辑

> ID：16016407
> 
> 赞同：0
> 
> 时间：2013-04-15T13:28:14.383
> 
> 标签：jsf, primefaces

我正在尝试使用单元格编辑来实现 primefaces 数据表。类似于此处实现的内容：

[http://www.primefaces.org/showcase/ui/datatableCellEditing.jsf](http://www.primefaces.org/showcase/ui/datatableCellEditing.jsf)

所以这是我的 jsf 数据表代码：

```
<h:form>
<p:growl id="messages" showDetail="true"/>
<p:panel id="dataPanel">                
    <p:dataTable 
    id="imagesDataTable"
    var="cRImageData" 
    value="#{syncCenterBean.cRImageDataList}"
    widgetVar="imagesTable" 
    paginator="true"
    sortMode="multiple"
    rows="10"
    paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
    rowsPerPageTemplate="10,15,20,30" 
    paginatorAlwaysVisible="false"
            editable="true"
            editMode="cell">

        <p:ajax event="cellEdit" listener="#{syncCenterBean.onCellEdit}" update=":form:messages" />
        <p:column sortBy="#{cRImageData.imId}" headerText="ID" style="width:100px;text-align:center;">
            <h:outputText value="#{cRImageData.imId}" />
        </p:column>

        <p:column headerText="Image Name" style="width:180px;text-align:center;">
            <h:outputText value="#{cRImageData.imName}" />
        </p:column>

        <p:column headerText="Image Type" style="width:170px;text-align:center;">
             <p:cellEditor>  
                <f:facet name="output">
                    <h:outputText value="#{cRImageData.imType}" />
                </f:facet>  
                <f:facet name="input">  
                    <h:selectOneMenu value="#{syncCenterBean.cRImageTypeList}" style="width:100%">  
                        <f:selectItems value="#{syncCenterBean.cRImageTypeList}" var="imTypeId" itemLabel="#{imTypeId}" itemValue="#{imTypeId}" />  
                    </h:selectOneMenu>  
                </f:facet>  
            </p:cellEditor>
        </p:column>
        ... 
```

这是我的后豆的代码：

```
@ManagedBean(name = "syncCenterBean")
@RequestScoped
public class SyncCenterBean implements Serializable {

    ....

    List<CRImageData> cRImageDataList;
    List<CRImageType> cRImageTypeList;

    @SuppressWarnings("unchecked")
    public SyncCenterBean(){

        cRImageTypeList = getImageTypesDB(); //returns a populated list of objects
        cRImageDataList = getImageDataDB(); //returns a populated list of objects
    }
    ...
    public void onCellEdit(CellEditEvent event) {  
    Object oldValue = event.getOldValue();  
    Object newValue = event.getNewValue();  

    if(newValue != null && !newValue.equals(oldValue)) {  
        FacesMessage msg = new FacesMessage(FacesMessage.SEVERITY_INFO, "Cell Changed", "Old: " + oldValue + ", New:" + newValue);  
        FacesContext.getCurrentInstance().addMessage(null, msg);  
    }  
} 
```

但是当我尝试加载视图时，我得到：

```
Caused by: javax.faces.view.facelets.TagException: .... Event:cellEdit is not supported. 
```

在线的：

```
<p:ajax event="cellEdit" listener="#{syncCenterBean.onCellEdit}" update=":form:messages" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:52:35.463

您应该为此事件编辑数据表

```
<p:datatable editable="true" editMode="cell" /> 
```

# if-statement - Visual Basic - 回到起点

> ID：16016414
> 
> 赞同：0
> 
> 时间：2013-04-15T13:28:28.430
> 
> 标签：if-statement

我只是想知道如果按下回车键（或任何键），是否有一种简单的方法可以让您的程序返回到开头。这意味着输出窗口将保持打开状态，他们不必关闭它并重新运行程序。

例子：

```
Console.WriteLine("Enter your age")
age = Console.ReadLine()

If age < 18 Then
    Console.WriteLine("Not old enough, please enter age again")
    ' GO BACK TO BEGINING TO ASK THE USER TO ENTER THEIR AGE AGAIN
End If 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:32:39.713

```
DIM Age as INT = 0

DO UNTIL Age > 18
    Age = Console.ReadLine()

    IF AGE < 18 THEN
        Console.WriteLine("Not Old Enough... blah")
    END IF

LOOP 
```

（自从我使用VB以来，它一直存在，语法可能有点偏离）

编辑：您需要检查以确保 console.readline() 输入是一个数字，否则您可能会遇到异常。

祝你好运

# python - 在 argparse 中指定浮点数列表

> ID：16016416
> 
> 赞同：2
> 
> 时间：2013-04-15T13:28:32.480
> 
> 标签：python, input, argparse

使用`argparse`，我希望用户指定 6 个值作为一个可选输入参数的参数。是否有内置方法来检查这些值是否为浮点数？

```
parser.add_argument("-e", nargs=6, metavar=('a', 'b', 'c', 'd', 'e', 'f'),
                        help="my help message",
                        default=None) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-15T13:30:29.333

使用[`type=float`](http://docs.python.org/2/library/argparse.html#type)：

```
parser.add_argument("-e", nargs=6, metavar=('a', 'b', 'c', 'd', 'e', 'f'),
                        help="my help message", type=float,
                        default=None) 
```

演示：

```
>>> import argparse
>>> parser = argparse.ArgumentParser(description='Process some floats.')
>>> parser.add_argument("-e", nargs=6, metavar=('a', 'b', 'c', 'd', 'e', 'f'),
...                         help="my help message", type=float,
...                         default=None)
_StoreAction(option_strings=['-e'], dest='e', nargs=6, const=None, default=None, type=<type 'float'>, choices=None, help='my help message', metavar=('a', 'b', 'c', 'd', 'e', 'f'))
>>> try:
...     parser.parse_args('-e 1.0 2.0 3.33 4.45 5.15 6.0'.split())
... except SystemExit:
...     pass
... 
Namespace(e=[1.0, 2.0, 3.33, 4.45, 5.15, 6.0])
>>> try:
...     parser.parse_args('-e foo bar baz spam ham eggs'.split())
... except SystemExit:
...     pass
... 
usage: [-h] [-e a b c d e f]
: error: argument -e: invalid float value: 'foo' 
```

# ruby-on-rails - 如何在 Sinatra 发布请求上测试 Mailer？

> ID：16016422
> 
> 赞同：2
> 
> 时间：2013-04-15T13:28:57.560
> 
> 标签：ruby-on-rails, ruby, rspec, sinatra, pony

我有 Sinatra 应用程序，可根据邮寄请求发送电子邮件：

```
post '/test_mailer' do
  Pony.mail(
    to: 'me@mine.com.au',
    from: 'me@mine.com.au',
    subject: 'Howdy!',
    body: erb(:body) )
end 
```

所以我想使用以下方法测试这种行为：

```
require 'spec_helper'

describe 'App' do
  before(:each) do
    Pony.stub!(:deliver)
  end

  it "sends mail" do
    Pony.should_receive(:mail) do |mail|
      mail.to.should == [ 'joe@example.com' ]
      mail.from.should == [ 'sender@example.com' ]
      mail.subject.should == 'hi'
      mail.body.should == 'Hello, Joe.'
    end

    Pony.mail(to: 'joe@example.com', from: 'sender@example.com', subject: 'hi', body: 'Hello, Joe.')
  end

  it 'test_mailer' do
    Pony.should_receive(:mail) do |mail|
        mail.to.should == ['me@mine.com.au']
    end
    post '/test_mailer'
  end

end 
```

这是我的`spec_helper`

```
require File.join(File.dirname(__FILE__), '..', 'app.rb')

require 'sinatra'
require 'rack/test'

# setup test environment
set :environment, :test
set :run, false
set :raise_errors, true
set :logging, false

def app
  Sinatra::Application
end

RSpec.configure do |config|
  config.include Rack::Test::Methods
end 
```

但我收到错误：

```
mailer(master)» rspec spec/app_spec.rb
.F

Failures:

  1) App test_mailer
     Failure/Error: Pony.should_receive(:mail) do |mail|
       (Pony).deliver(any args)
           expected: 1 time
           received: 0 times
     # ./spec/app_spec.rb:20:in `block (2 levels) in <top (required)>'

Finished in 0.02542 seconds
2 examples, 1 failure

Failed examples:

rspec ./spec/app_spec.rb:19 # App test_mailer 
```

那么，我应该如何正确测试该`post '/test_mailer'`请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T17:56:29.547

也许我很愚蠢，但它看起来很明显 - 你的生产代码中没有任何东西调用`deliver`方法。不应该验证`Pony.should_receive(:mail)`吗？

更新：我看到 Pony 有一个名为 Deliver 的私有类方法，但你正在存根，所以它永远不会被调用。

# ios - 连续调用几个 [UIVIew setFrame:] 并不会全部执行

> ID：16016423
> 
> 赞同：1
> 
> 时间：2013-04-15T13:28:59.060
> 
> 标签：ios, objective-c, ipad, uiview

`UIView`在滑出视图的其他内容时，我在滑入另一个时遇到了一个奇怪的问题。

这是代码：

```
- (void)moveAddStudentViewIntoSuperView
{
     CGRect viewFrame1 = self.viewThatShoudlDisappear1.frame;
     CGRect viewFrame2 = self.viewThatShoudlDisappear2.frame;
     CGRect newFrame = self.viewControllerThatshouldAppear.view.frame;

     viewFrame1.origin.x = -300;
     viewFrame2.origin.x = -300;
     newStudentFrame.origin.x = 0;

     NSLog(@"\n 1: %@ \n 2: %@ \n 3: %@", self.viewThatShoudlDisappear1, self.viewThatShoudlDisappear2, self.viewControllerThatshouldAppear.view);

     [self.viewThatShoudlDisappear1 setFrame:viewFrame1];
     [self.viewThatShoudlDisappear2 setFrame:viewFrame2];
     [self.viewControllerThatshouldAppear.view setFrame:newFrame];

     NSLog(@"\n 1: %@ \n 2: %@ \n 3: %@", self.viewThatShoudlDisappear1, self.viewThatShoudlDisappear2, self.viewControllerThatshouldAppear.view);

} 
```

（通常我会`setFrame`在动画中做 s`UIView`但这对于这个例子并不重要，因为它无论如何都不起作用）

发生的情况是应该滑入或更确切地说现在位于`(0,0)`的视图出现，但其他视图没有移开。并且仍然显示在新视图下。

奇怪的是，日志输出所有视图都在正确的位置。`[self.view setNeedsLayout]`调用之间`setFrame`也没有改变任何东西，更有趣的是，如果我`setFrame`从新视图中删除，应该消失的视图实际上会正确消失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T17:34:02.963

当我不小心从后台线程使用 UIKit 时，我看到过这样的奇怪事情。UIKit 应该只在主线程中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:34:23.427

这一行有一个错字：

```
 CGRect viewFrame2 = self.viewThatShoudlDisappear1.frame; 
```

据推测，这应该是：

```
 CGRect viewFrame2 = self.viewThatShoudlDisappear2.frame; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T23:50:12.320

好的，所以我想我并不完全了解 AutoLayout。由于[Toto的](https://alpha.app.net/mrtoto)[提示](https://alpha.app.net/mrtoto/post/4775059#4775004)，我尝试在 iOS 5 下对其进行测试，并且不得不在各处停用 AutoLayout 才能运行它。

它立即与 iOS 5 一起工作。之后我切换回 iOS 6 没有再次激活 AutoLayout，它也在那里完美地工作。

**我的解决方案是：在 XIB 文件中停用 AutoLayout。**

但我想不出这应该是默认行为的方式。也许我错过了 AutoLayout 的一点，或者这是一个奇怪的错误。一旦我与更喜欢它的开发人员交谈，我可能会在必要时提交错误报告。

# spring - 在 jms 提供程序之间切换

> ID：16016429
> 
> 赞同：0
> 
> 时间：2013-04-15T13:29:15.720
> 
> 标签：spring, spring-mvc, spring-jms

我想做一个 SPRING (3.2.1) 设置，我可以根据您所处的环境切换底层 JMS 提供程序，例如开发、测试、生产。我不是专家，但遇到过 Spring 的 @Profile 注释。我真的不知道如何使用它。所以我需要做的是在 DEV 环境中我想使用 ActiveMQ，而在 PRODUCTION 中我想使用 IBM MQ。这可能吗？如果是这样，如果您能提供一些配置或代码来做到这一点，将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:07:31.820

[http://static.springsource.org/spring-framework/docs/3.2.1.RELEASE/spring-framework-reference/html/new-in-3.1.html#new-in-3.1-bean-definition-profiles](http://static.springsource.org/spring-framework/docs/3.2.1.RELEASE/spring-framework-reference/html/new-in-3.1.html#new-in-3.1-bean-definition-profiles)

对于 XML 配置，请参阅此博客... [http://blog.springsource.com/2011/02/11/spring-framework-3-1-m1-released/](http://blog.springsource.com/2011/02/11/spring-framework-3-1-m1-released/)

请参阅有关@Profile 的博客：http: [//blog.springsource.com/2011/02/14/spring-3-1-m1-introducing-profile/](http://blog.springsource.com/2011/02/14/spring-3-1-m1-introducing-profile/)以使用带有@Configuration 的配置文件。

它归结为...

使用 XML 配置时，只需`<beans/>`在 spring 配置文件的末尾添加元素...

```
<beans ...>
    <bean... />

    <beans profile="DEV">
        <bean ... // my ActiveMQ config .../>
    </beans?

    <beans profile="default">
        <bean ... // my IBM (or JNDI) config .../>
    <beans/>
</beans> 
```

然后在 dev 中运行`-Dspring-profiles-active=DEV`.

类似地，@Profile 可以添加到 @Configuration 类中，以限制它们对特定活动配置文件的使用。

# c++ - mt19937 生成的重复值

> ID：16016432
> 
> 赞同：0
> 
> 时间：2013-04-15T13:29:26.640
> 
> 标签：c++, random, prng, mersenne-twister

我正在使用 C++11 的`random`库，并且我有一个小程序可以在具有单位半径的圆上生成坐标对 x, y。这是简单的多线程程序

```
#include <iostream>
#include <fstream>
#include <random>

using namespace std;

int main()
{
    const double PI = 3.1415;

    double angle, radius, X, Y;
    int i;
    vector<double> finalPositionX, finalPositionY;

    #pragma omp parallel
    {
        vector <double> positionX, positionY;

        mt19937 engine(0);
        uniform_real_distribution<> uniform(0, 1);
        normal_distribution<double> normal(0, 1);

        #pragma omp for private(angle, radius, X, Y)
        for(i=0; i<1000000; ++i)
        {
            angle  = uniform(engine)*2.0*PI;
            radius = sqrt(uniform(engine));
            X      = radius*cos(angle);
            Y      = radius*sin(angle);

            positionX.push_back(X);
            positionY.push_back(Y);
        }
        #pragma omp barrier

        #pragma omp critical
        finalPositionX.insert(finalPositionX.end(), positionX.begin(), positionX.end());
        finalPositionY.insert(finalPositionY.end(), positionY.begin(), positionY.end());
    }

    ofstream output_data("positions.txt", ios::out);
    output_data.precision(9);
    for(unsigned long long temp_var=0; temp_var<(unsigned long long)finalPositionX.size(); temp_var++)
    {
        output_data << finalPositionX[temp_var]
                    << "\t\t\t\t"
                    << finalPositionY[temp_var]
                    << "\n";
    }
    output_data.close();
    return 0;
} 
```

**问题**：许多 x 坐标出现两次（与 y 坐标相同）。我不明白这一点，因为周期`mt19937`比 1.000.000 长得多。有谁知道这里有什么问题？

**注意**：当我不对应用程序进行多线程处理时，我会得到相同的行为，因此问题与错误的多线程处理无关。

**编辑**正如其中一个答案所指出的，我不应该对两个线程使用相同的种子 - 但这是我在制定这个问题时犯的一个错误，在我的实际程序中，我似乎线程不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:39:44.303

正如[本文](http://telescoper.wordpress.com/2009/04/04/points-and-poisson-davril/)（以及Stack Overflow 版主[稍后发表的文章](http://www.billthelizard.com/2009/05/how-do-you-test-random-number-generator.html)）中所述，真正的随机性并不完美分布。

良好的随机性：

![在此处输入图像描述](https://i.stack.imgur.com/xW2Ja.jpg)

不好的随机性：

![在此处输入图像描述](https://i.stack.imgur.com/xQySM.jpg)

我真的建议阅读这篇文章，但总结一下：RNG 必须是不可预测的，这意味着调用它 100 次不能完美地填充 10x10 网格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T13:46:33.387

使用代码的核心部分，我编写了这个不完美的测试，但从我可以看到分布非常均匀：

```
#include <iostream>
#include <fstream>
#include <random>
#include <map>
#include <iomanip>

using namespace std;

int main()
{
    int i;
    vector<double> finalPositionX, finalPositionY; 
    std::map<int, int> hist;

    vector <double> positionX, positionY;

    mt19937 engine(0);
    uniform_real_distribution<> uniform(0, 1);
    //normal_distribution<double> normal(0, 1);
    for(i=0; i<1000000; ++i)
    {
        double rnum = uniform(engine);            

       ++hist[std::round(1000*rnum)];

    }

    for (auto p : hist) {
        std::cout << std::fixed << std::setprecision(1) << std::setw(2)
                  << p.first << ' ' << std::string(p.second/200, '*') << '\n';
    }

    return 0;
} 
```

正如其他人已经说过的那样，看到一些重复值并不意外。对于`normal`发行版，我使用了以下修改`rnum`来`hist`测试它，它看起来也不错：

```
double rnum = normal(engine);                  
++hist[std::round(10*rnum)]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T13:38:17.233

首先 - 仅仅因为您两次获得相同的数字并不意味着它不是随机的。如果你掷骰子六次，你会期待六种不同的结果吗？参见生日悖论。话虽如此 - 你是对的，在这种特殊情况下你不应该看到太多重复。

我不熟悉“#pragma omp parallel”，但我猜你正在生成多个线程，这些线程都使用相同的种子 (0) 为 mt19937 播种。您应该为所有线程使用不同的种子 - 例如线程 ID。

# java - 不使用 web.xml 的错误页面

> ID：16016438
> 
> 赞同：1
> 
> 时间：2013-04-15T13:29:36.760
> 
> 标签：java, spring

没有响应对象如何在不使用 web.xml 的情况下给出错误页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:39:40.880

@戴夫...

你可以在jsp中写错误......

1) 错误.jsp 2) 错误页面.jsp

在 errorPage.jsp 中，您可以添加以下标签

1.  <%@ page isErrorPage="true" import="java.io.*" %>

在 error.jsp 你可以添加下面的标签

1.  <%@page errorPage="errorPage.jsp" %>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:41:50.090

从评论来看，您在没有引用`HttpServletResponse`对象的方法中遇到错误情况。大概是由 servlet 或 JSP 页面调用（可能是间接调用）。

在这种情况下，您需要做的是抛出异常。如果不适合检查的异常，那么您可以抛出一个`IllegalStateException`或任何子类`RuntimeException`（可能创建您自己的）。

正确处理错误需要在其他代码中处理知道`HttpServletResponse`. 如果你抛出一个自定义的异常，它应该很容易抓住它。

# php - 具有多个目标实体的多对一

> ID：16016444
> 
> 赞同：13
> 
> 时间：2013-04-15T13:29:48.863
> 
> 标签：php, database, symfony, doctrine-orm

这看起来很简单，但我做错了：

共有三个实体`Fruit`：`Vegetable`和`Snack`。小吃有领域`id`，`time`和`food`。食物是指*一种*水果*或*一种蔬菜。所以它基本上是一种多对一/一对多的关系，因为一种零食总是只能容纳一种食物。但目标实体不止一个。

我将如何在 Doctrine2 中映射它？

在了解 Doctrine2 之前我会使用的一个简单解决方案是使用两个字段：`food_type`和`food_id`. 但是我怎样才能将食物类型与正确的实体联系起来呢？我想到了一个 JoinColumns 数组，但找不到连接正确实体的方法。我还查看了映射的超类，因为有一个 DiscriminatorColumn，但这似乎也是错误的方法。如果我做对了，超类本身就不能是一个实体——所以我不能创建一个食物实体。

任何帮助表示赞赏。我确定我在这里遗漏了一些简单的东西。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-15T14:10:31.513

您可以创建一个名为 的（抽象）映射超类`Food`，它可以保存`Fruit`和的一些基本信息`Vegetable`。

您问题的关键字是`inheritance mapping`，这是它的文档：[https ://www.doctrine-project.org/projects/doctrine-orm/en/2.6/reference/inheritance-mapping.html#inheritance-mapping](https://www.doctrine-project.org/projects/doctrine-orm/en/2.6/reference/inheritance-mapping.html#inheritance-mapping)

然后你可以在你的实体关系中引用这个映射的超类。

# java - selenium webdriver 点击标签中的链接

> ID：16016450
> 
> 赞同：0
> 
> 时间：2013-04-15T13:29:59.440
> 
> 标签：java, selenium-webdriver

```
<div id="sbGlobalNav" class="">
  <div id="sbGlobalNavContent">
    <div id="sbGlobalNavRightContent">...</div>
    <div id="sbGlobalNavLeftContent">
 <a href="/" id="globalNavSBLogo"></a>
       <ul id="globalNavMenu">
     <li class="globalNavSeparator firstSeparator">..</li>
     <li>..</li>
     <li>..</li>
     <li>..</li>
     <li>..</li>
     <li class="globalNavDropdown">
    <span>Answer</span>
    <ul class="globalNavDropdownContainer" style="display: none;">
        <li>..</li>
        <li><a href="/p/polls" class="navIconPolls">Daily Polls</a></li>
        <li>..</li>
    </ul>
     </li>
     <li class="globalNavDropdown">..</li>
     <li class="globalNavSeparator">..</li>
     <li class="globalNavDropdown" id="globalNavRewards">..</li>
<div class="clear"></div> 
```

在此我需要使用 Selenium webdriver(java) 查找并单击 Daily Poll 链接，但我无法做到。我所做的是：

```
 Actions builder = new Actions(driver);
    builder.moveToElement(driver.findElement(By.xpath("//div[@id='sbGlobalNav']//span[text()='Answer']"))).build().perform();
    driver.findElement(By.linkText("Daily Polls")).click(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:50:48.093

检查它，您是否必须这样做才能触发该元素。Javascript 也许，通过鼠标悬停？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T16:41:56.527

尝试这个：

```
driver.findElement(By.xpath("//*[text()='Daily Polls']")).click(); 
```

它可能会起作用。

# .htaccess - htaccess 重定向参数不起作用

> ID：16016454
> 
> 赞同：0
> 
> 时间：2013-04-15T13:30:05.483
> 
> 标签：.htaccess, mod-rewrite, redirect

我正在为 Apache 重写而苦苦挣扎。我需要执行以下操作：

永久重定向：

[http://domain.com/folder/viewer/data/settings.xml?prevent_cache=4760](http://domain.com/folder/viewer/data/settings.xml?prevent_cache=4760)

到

[http://domain.com/siteid/includes/themes/siteid/swfs/viewer/data/settings.xml?prevent_cache=4760](http://domain.com/siteid/includes/themes/siteid/swfs/viewer/data/settings.xml?prevent_cache=4760)

我有下面的代码，它可以在没有 url 参数的情况下工作，但我似乎无法让它与参数一起工作。我错过了什么吗？

```
RewriteCond %{QUERY_STRING} ^prevent_cache=([0-9]*)$
RewriteRule ^/folder/viewer/data/settings.xml$ http://domain.com/siteid/includes/themes/siteid/swfs/viewer/data/settings.xml [R=301,L] 
```

干杯

肖恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:56:56.253

`/`我能看到的唯一错误是模式中的前导斜杠`RewriteRule`。这应该是

```
RewriteCond %{QUERY_STRING} ^prevent_cache=[0-9]*$
RewriteRule ^folder/viewer/data/settings.xml$ /siteid/includes/themes/siteid/swfs/viewer/data/settings.xml [R,L] 
```

您不需要将查询字符串附加到替换 URL，因为这是自动完成的。

当一切按预期工作时，您可以更改`R`为`R=301`. 永远不要在启用的情况下进行测试，有关详细信息`301`，请参阅此答案[提示调试 .htaccess 重写规则](https://stackoverflow.com/a/9204355/1741542)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:52:50.273

我可以。以下是您要查找的重写条件和规则：

```
# once per htaccess file
RewriteEngine on

RewriteCond %{QUERY_STRING} prevent_cache=([0-9]*)
RewriteRule ^folder/viewer/data/settings.xml http://domain.com/siteid/includes/themes/siteid/swfs/viewer/data/settings.xml?prevent_cache=%1 [R=301,L] 
```

但请考虑关于*[R=301]*标志的这个答案：[https ://stackoverflow.com/a/15999177/2007055](https://stackoverflow.com/a/15999177/2007055)

# android - 自定义列表视图未正确显示

> ID：16016458
> 
> 赞同：0
> 
> 时间：2013-04-15T13:30:13.423
> 
> 标签：android, listview, android-listfragment

我创建了一个使用自定义列表视图片段的应用程序。但自定义列表视图显示不正确。

下面附上我的屏幕截图。

![在此处输入图像描述](https://i.stack.imgur.com/XVaS0.jpg)

这是我的单个行项的 Xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:orientation="vertical" >

<TextView
    android:id="@+id/Jobtitle"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:paddingLeft="7dp"
    android:paddingRight="7dp"
    android:paddingTop="2dp"
    android:text="Large Text"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textColor="@color/green"
    android:textStyle="bold" >
</TextView>

<RelativeLayout
    android:id="@+id/relativeLayout1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/Jobtitle"
    android:orientation="horizontal"
    android:paddingLeft="10dp"
    android:paddingRight="10dp"
    android:paddingTop="5dp" 
    android:paddingBottom="5dp">

    <TextView
        android:id="@+id/publishdate"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="PubDate:-"
        android:textColor="@color/textgrey"
        />

    <TextView
        android:id="@+id/lefttime"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/publishdate"
        android:layout_alignBottom="@+id/publishdate"
        android:layout_alignParentRight="true"
        android:text="Time Left:-"
        android:textColor="@color/textgrey"
         />
  </RelativeLayout>

 <LinearLayout
    android:layout_width="match_parent"
    android:layout_height="1dp"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/relativeLayout1"
    android:background="@drawable/dividr" >
 </LinearLayout> 
```

这是列表片段布局文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:orientation="vertical" >

    <ListView
    android:id="@android:id/list"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" 
  >
</ListView>

<TextView
    android:id="@android:id/empty"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="No text" >

</TextView> 
```

这是我的适配器

```
 package my.newapp.freelanceeye;
import android.content.Context;
import android.os.Bundle;
import android.support.v4.app.ListFragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;

public class joblisted extends ListFragment {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        adapt my=new adapt(getActivity(), R.layout.listrow,m);
        setListAdapter(my);
    }

    Context ctx;
    public class adapt extends ArrayAdapter<String>{
       @Override
        public View getView(int position, View convertView, ViewGroup parent) {
           LayoutInflater inflater=(LayoutInflater)ctx.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
           View row=inflater.inflate(R.layout.listrow,parent,false);
           return row;
            //return super.getView(position, convertView, parent);

        }

        public adapt(Context context, int textViewResourceId, String[] objects) {
            super(context, textViewResourceId, objects);
            ctx=context;

        }

    }
    String[] m={"as","asa","sd","Ad","sad","asda"};

    @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
            View v=inflater.inflate(R.layout.listfragmnetlayout,container,false);
            return v;

            }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:37:45.530

您应该像这样设置片段的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

    <ListView
    android:id="@android:id/list"
    android:layout_width="match_parent"
    android:layout_height="match_parent" />

</<LinearLayout> 
```

我认为问题在于您的视图高度，这就是为什么尝试使用`match_parent`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:33:13.530

您正在构建自定义数组适配器，但您没有在行字段中设置参数。

看一下这个适配器的实现，每一步都有注释解释：

```
private class CustomArrayAdapter extends ArrayAdapter<RowData>
{   
private ArrayList<RowData> list;

//this custom adapter receives an ArrayList of RowData objects.
//RowData is my class that represents the data for a single row and could be anything.
public CustomArrayAdapter(Context context, int textViewResourceId, ArrayList<RowData> rowDataList) 
{
    //populate the local list with data.
    super(context, textViewResourceId, rowDataList);
    this.list = new ArrayList<RowData>();
    this.list.addAll(rowDataList);
}

public View getView(final int position, View convertView, ViewGroup parent)
{
    //creating the ViewHolder we defined earlier.
    ViewHolder holder = new ViewHolder();) 

    //creating LayoutInflator for inflating the row layout.
    LayoutInflater inflator = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    //inflating the row layout we defined earlier.
    convertView = inflator.inflate(R.layout.row_item_layout, null);

    //setting the views into the ViewHolder.
    holder.title = (TextView) convertView.findViewById(R.id.tvItemTitle);
    holder.changeRowStatus = (ImageView) convertView.findViewById(R.id.iStatus);
    holder.changeRowStatus.setTag(position);

    //define an onClickListener for the ImageView.
    holder.changeRowStatus.setOnClickListener(new OnClickListener() 
    {           
        @Override
        public void onClick(View v) 
        {
            Toast.makeText(activity, "Image from row " + position + " was pressed", Toast.LENGTH_LONG).show();
        }
    });
    holder.checked = (CheckBox) convertView.findViewById(R.id.cbCheckListItem);
    holder.checked.setTag(position);

    //define an onClickListener for the CheckBox.
    holder.checked.setOnClickListener(new OnClickListener() 
    {       
        @Override
        public void onClick(View v)
        {
            //assign check-box state to the corresponding object in list.    
            CheckBox checkbox = (CheckBox) v;
            rowDataList.get(position).setChecked(checkbox.isChecked());
            Toast.makeText(activity, "CheckBox from row " + position + " was checked", Toast.LENGTH_LONG).show();    
        }
    });

    //setting data into the the ViewHolder.
    holder.title.setText(RowData.getName());
    holder.checked.setChecked(RowData.isChecked());

    //return the row view.
    return convertView;
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-06T06:09:51.840

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="fill_parent"
android:orientation="vertical" > 
```

Change layout_height to fill_parent

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T14:00:51.157

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/text1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Large Text"
            android:textColor="#339966"
            android:textAppearance="?android:attr/textAppearanceLarge" 
            android:textStyle="bold" />

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/text2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                  android:text="PubDate:-"
                android:textColor="#606060"
                 />

            <TextView
                android:id="@+id/text3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Time Left:-"
                android:textColor="#606060"
                android:paddingLeft="180dp"
               />
        </LinearLayout>
    </LinearLayout>

</LinearLayout> 
```

尝试这个....

# scala - 我在哪里可以找到 Scales Xml 的一些代码示例

> ID：16016466
> 
> 赞同：5
> 
> 时间：2013-04-15T13:30:37.783
> 
> 标签：scala, xml-parsing

我目前正在解析大于 40 MB 的非常大的 xml 文件。我刚刚开始在 scala 中进行开发，所以我在网上浏览了一些好的库并偶然发现了 Scala Scales，它似乎非常擅长处理大文件。

我已阅读： [http](http://scala-scales.googlecode.com/svn/sites/scales/scales-xml_2.9.1/0.2/ScalesXmlIntro.html) ://scala-scales.googlecode.com/svn/sites/scales/scales-xml_2.9.1/0.2/ScalesXmlIntro.html，http : [//scala-scales.googlecode.com/svn/sites/尺度/scales-xml_2.9.2/0.4.4/PullParsing.html](http://scala-scales.googlecode.com/svn/sites/scales/scales-xml_2.9.2/0.4.4/PullParsing.html)

然后测试 pullXml 函数，以确保正确导入所有库。

```
val pull = pullXml(new FileReader("/Users/mycrazyxml/tmp/large.xml"))
while( pull.hasNext ){
   pull.next match {
        case Left( i : XmlItem ) =>
          // Handle XmlItem
          Logger.info("XmlItem: "+i)

        case Left( e : Elem ) => {
          // Handle Element
          Logger.info("Element: "+e)
        }

        case Right(endElem) =>
          // Handle endElement
          Logger.info("Endelement: "+endElem)        
      }
    } 
```

这导致整个文件被打印到控制台！好的！现在是时候创建对象并保存到数据库了，但是我在掌握如何以一种好的方式做到这一点时遇到了麻烦。我真的需要一些很好的例子来说明如何做到这一点。

例如。下面的 XML 有几个 Enterprise 元素，它们可以由一个或多个 LocalUnits 组成。这里的想法是创建一个带有 LocalUnits 数组的 Enterprise 对象。当 endElement 是 Enterprise 的结束标记时，使用 Enterprise 对象及其 LocalUnits 调用 save 方法。

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE Info SYSTEM "info.dtd">
<Info>
  <Enterprise>
    <RegNo>12345678</RegNo>
    <Address>
      <StreetInfo>
        <StreetName>Infinite Loop</StreetName>
        <StreetNumber>1</StreetNumber>
      </StreetInfo>
    </Address>
    <EName>
      <Legal>Crazy Company</Legal>
    </EName>
    <SNI>
      <Code>00000</Code>
      <Rank>1</Rank>
    </SNI>
    <LocalUnit>
      <CFARNo>987654321</CFARNo>
      <LUType>1</LUType>
      <LUName>Crazy Company Gym</LUName>
      <LUStatus>1</LUStatus>
      <SNI>
        <Code>46772</Code>
        <Rank>1</Rank>
      </SNI>
      <SNI>
        <Code>68203</Code>
        <Rank>2</Rank>
      </SNI>
      <Address>
        <StreetInfo>
          <StreetName>Infinite Loop</StreetName>
          <StreetNumber>1</StreetNumber>
        </StreetInfo>
      </Address>
    </LocalUnit>
    <LocalUnit>
      <CFARNo>987654322</CFARNo>
      <LUType>1</LUType>
      <LUName>Crazy Company Restaurant</LUName>
      <LUStatus>1</LUStatus>
      <SNI>
        <Code>46772</Code>
        <Rank>1</Rank>
      </SNI>
      <SNI>
        <Code>68203</Code>
        <Rank>2</Rank>
      </SNI>
      <Address>
        <StreetInfo>
          <StreetName>Infinite Loop</StreetName>
          <StreetNumber>1</StreetNumber>
        </StreetInfo>
      </Address>
    </LocalUnit>
  </Enterprise>
<Enterprise>
    <RegNo>12345671220</RegNo>
    <Address>
      <StreetInfo>
        <StreetName>Cupertino Road</StreetName>
        <StreetNumber>2</StreetNumber>
      </StreetInfo>
    </Address>
    <EName>
      <Legal>Fun Company HQ</Legal>
    </EName>
    <SNI>
      <Code>00000</Code>
      <Rank>1</Rank>
    </SNI>
    <LocalUnit>
      <CFARNo>987654321</CFARNo>
      <LUType>1</LUType>
      <LUName>Fun Company</LUName>
      <LUStatus>1</LUStatus>
      <SNI>
        <Code>46772</Code>
        <Rank>1</Rank>
      </SNI>
      <SNI>
        <Code>68203</Code>
        <Rank>2</Rank>
      </SNI>
      <Address>
        <StreetInfo>
          <StreetName>Cupertino road</StreetName>
          <StreetNumber>2</StreetNumber>
        </StreetInfo>
      </Address>
    </LocalUnit>       
  </Enterprise>
</Info> 
```

把它们加起来。对于给定的 xml，我应该如何使用 pullXml 创建我的对象并使用它们调用 save 方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T07:46:09.697

```
val xmlFile = resource(this, "/data/enterprise_info.xml")
val xml = pullXml(xmlFile)

val Info = NoNamespaceQName("Info")
val Enterprise = NoNamespaceQName("Enterprise")
val LocalUnit = NoNamespaceQName("LocalUnit")
val LocalUnitName = NoNamespaceQName("LUName")
val EName = NoNamespaceQName("EName")
val Legal = NoNamespaceQName("Legal")

val EnterprisePath = List(Info, Enterprise)

// iterate over each Enterprise
// only an Enterprise at a time is in memory
val itr =  iterate(EnterprisePath, xml)

for { 
  enterprise <- itr
  enterpriseName <- enterprise \* EName \* Legal
} {
  println("enterprise "+text(enterpriseName) +" has units:")
  for {
    localUnits <- enterprise \* LocalUnit 
    localName <- localUnits \* LocalUnitName
  }{
    println("  " + text(localName))
  }
  //do a save
} 
```

目前，懒惰地拉入每个 LocalUnit 更加困难，您必须为每个不是 LocalUnit 的小节分隔 Paths。

Hth

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-01-14T09:02:31.463

也许这可以帮助你？我认为使用 xml 的小片段在 Scala 中效果很好。 [http://joncook.github.io/blog/2013/11/03/xml-processing-with-scala/](http://joncook.github.io/blog/2013/11/03/xml-processing-with-scala/)

# php - 使用 wget 远程登录

> ID：16016467
> 
> 赞同：0
> 
> 时间：2013-04-15T13:30:50.080
> 
> 标签：php, linux, login, wget

我正在尝试远程连接我的站点。所以我把

```
wget "http://mysite.org/index.php?page=login" --post-data "e-mail=mymail&password=mypassword" 
```

但我不断收到这条消息（从法语翻译）：

```
--2013-04-15 15:25:49--  http://mysite.org/index.php?page=login
Resolution of mysite.org (mysite.org )... 178.33.232.186
Connection to mysite.org  (mysite.org )|178.33.232.186|:80...connected.
requête HTTP transmise, waiting for response...200 OK
Longueur: non spécifié [text/html]
Saved in : «index.php?page=login.1»

    [ <=>                                                                                                                                                               ] 13.310      --.-K/s   ds 0,02s   

2013-04-15 15:25:50 (762 KB/s) - «index.php?page=login.1» saved [13310] 
```

当我放置一些随机发布数据时，我得到了相同的响应。好像没有登录。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:48:52.000

wget 不会在成功发布后重定向您，您需要设置一个 cookie。该文档有一个示例：[http ://www.gnu.org/software/wget/manual/wget.html](http://www.gnu.org/software/wget/manual/wget.html)

# .net - 关闭时未从 dm_qn_subscriptions 删除 SqlDependency 订阅

> ID：16016469
> 
> 赞同：4
> 
> 时间：2013-04-15T13:31:05.097
> 
> 标签：.net, sql-server, service-broker, sqldependency, event-viewer

我的*SqlDependency*工作正常，当应用程序退出时，代理队列和服务会被正确删除（我在终止进程之前确实按照建议执行*SqlDependency.Stop(...)*），但我注意到由*SqlDependency*创建的通知订阅仍然存在应用程序关闭后在“sys.dm_qn_subscriptions”表中打开。

如果我稍后（应用程序关闭后）执行应该使此订阅触发的条件，它似乎会触发，因为 SQL Server 在事件查看器中记录了一条信息消息，大意是：

> `'{3F03B693-C0A5-E211-A97B-E06995EBDB20}.'`由于以下错误，对话句柄上的查询通知对话框 已关闭： `'<?xml version="1.0"?><Error xmlns="http://schemas.microsoft.com/SQL/ServiceBroker/Error"><Code>-8490</Code><Description>Cannot find the remote service &apos;SqlQueryNotificationService-0ea1f686-e554-4e25-aa7d-4f6d85171cc3&apos; because it does not exist.</Description></Error>'`。

然后从“sys.dm_qn_subscriptions”中删除订阅。

注意：当应用程序处于活动状态时，订阅也会正确触发。就我的应用程序而言，没有任何问题，但让我担心的是，一旦它们所依赖的代理队列/服务终止，订阅就不会在数据库系统表中自动擦除。这可能导致（至少）在数据库中积累大量幻影/不死订阅记录，并在事件查看器中产生不必要的 SQL Server 清理消息（每个应用程序运行都会在“sys.dm_qn_subscriptions”中生成新的不死记录）。

这种行为正常吗？可以让事情变得更整洁吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T14:05:59.280

这是正常行为。QN 的寿命很长，它们会在数据库重新启动时触发（因此也会在服务器重新启动后触发）。但是`SqlDependency`设置了一个临时服务/队列来接收通知，并且这些应该在崩溃的情况下通过使用[对话计时器](http://msdn.microsoft.com/en-us/library/ms187804.aspx)和[内部激活](http://msdn.microsoft.com/en-us/library/ms171585%28v=sql.105%29.aspx)来拆除。这两种机制交互的方式就是你所看到的，即 ERRORLOG 污染。没有什么*不好的*事情发生，[至少通常不会](http://rusanu.com/2007/11/10/when-it-rains-it-pours/)发生，但显然不整洁。

> 可以让事情变得更整洁吗？

[`SqlNotificationRequest`](http://msdn.microsoft.com/en-us/library/system.data.sql.sqlnotificationrequest.aspx)您可以直接使用不再提供创建服务/队列以接收您的 appdomain 通知并将它们路由到适当`SqlDependency.OnChange`事件的“服务”来推出您自己的解决方案。有可行的替代方案，具体取决于具体情况。但这是相当低级的工作，您最终可能会以比原始`SqlDependency`解决方案更糟糕的方式解决问题......

顺便说一句，无法在应用程序退出时“删除”挂起的 QN 订阅。该问题是 QN 用作通知传递机制的单向对话所固有的。适当的通知（订阅）应该由订阅者发起，并且通知应该是从目标（通知者）返回给发起者（订阅者）的响应消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-12T04:48:15.690

如果你不介意有点俗气，我已经找到了一种在退出时清理这些的方法......

首先，设置一个 onDependencyChange 可以观察到的标志，让它知道*不要*重新订阅查询。

其次，设置标志并执行你知道会触发依赖订阅的无操作更新。

```
 update foo_master set foo_bar = foo_bar where foo_id = @id; 
```

我的依赖监控是在单独的行上完成的，所以我只需要搔痒一排就可以触发它。这可能不是您想要在大型结果集上执行的操作。

在我的 FormClosing 事件中，我在断开连接之前触发了每个依赖项。

部分代码：

```
Private _dependency As SqlDependency = Nothing
Private _beingKilled = False

' dependency is set up in loadRecord(ByVal idRow as Integer)

Private Sub onDependencyChange(ByVal sender As Object, ByVal e As SqlNotificationEventArgs)
    ' This event may occur on a thread pool thread; It is illegal to update the UI from a worker thread.
    ' The following code checks to see if it is safe update the UI.
    Dim iSync As ISynchronizeInvoke = CType(_connection.masterForm, ISynchronizeInvoke)

    ' If InvokeRequired returns True, the code is executing on a worker thread.
    If iSync.InvokeRequired Then
        Dim tempDelegate As New OnChangeEventHandler(AddressOf onDependencyChange) ' Create a delegate to perform the thread switch
        Dim args() As Object = {sender, e}
        iSync.BeginInvoke(tempDelegate, args) ' Marshal the data from the worker thread to the UI thread.
    Else
        RemoveHandler _dependency.OnChange, AddressOf onDependencyChange
        If Not _beingKilled Then loadRecord(_id)
    End If
End Sub 
```

然后只需将 _beingKilled 设置为 True 并执行无操作更新。

# php - 使用 PHP 获取已连接用户的列表

> ID：16016479
> 
> 赞同：0
> 
> 时间：2013-04-15T13:31:32.947
> 
> 标签：php, list, sockets, session

为了满足客户的需求，我必须在 PHP 中创建一个简单的仪表板，客户管理员可以在其中看到已连接用户的列表。

所以，我想，当客户端登录网站时，创建一个套接字。为什么 ？因为如果客户在没有注销的情况下关闭浏览器，那么套接字将自动关闭。如果我只使用带有连接用户表和布尔值的会话，如果用户关闭浏览器而不是注销，则表将不会更新......所以对我来说，这不是一个好方法。

是否存在一种方法来获取打开的套接字列表？如果是，是否可以获取与打开的套接字关联的 id 用户？或者，也许还有其他方法可以继续......

PS：我见过 Node.js，这很有帮助，但我不能使用这个技术。我没有权限。

谢谢大家，我正在等待任何建议或链接参考文档:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:39:41.533

为此，您将需要[websockets](http://en.wikipedia.org/wiki/WebSocket)。查看[Ratchet](http://socketo.me/) for PHP，它应该可以满足您的需求。

# extjs - 按钮的背景图片

> ID：16016481
> 
> 赞同：0
> 
> 时间：2013-04-15T13:31:40.917
> 
> 标签：extjs, sencha-touch, sencha-architect, sencha-touch-2.1

我正在尝试设置按钮的图像，但它没有覆盖整个按钮。我的意思是，按钮的背景仍然可见。

我试图在运行时通过为循环中的每个按钮提供不同的图像来做到这一点。

这里是：

```
for(var i=0; i<tvStore.getCount(); i++)
   {
     var aButton = Ext.create('Ext.Button',
     { 
       margin:8,
      id:'button'+i,
      itemId:i,
      style: 'width: 110px;height:110px;background-image:url(someRandomWebURLToImage) !important', 
```

但图像并未覆盖所有按钮。或者如果图像无法拉伸，那么如何使按钮的背景透明？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T05:44:29.060

您可以使用`iconCls`属性来指定 CSS，如下所示：

```
{
    xtype           : 'button',
    iconCls         : 'cart',
    text            : 'Add to Cart',
    iconMask        : true,
    padding         : 10,
    margin          : 10,
    id              : 'addToBagBtn'
} 
```

和 CSS 文件应该有：

```
.x-tab .x-button-icon.cart, .x-button .x-button-icon.x-icon-mask.cart {
    -webkit-mask-image: url('../../touch/resources/themes/images/default/pictos/shop1.png');
} 
```

# php - 尝试嵌入表单集合时的 Symfony2 异常

> ID：16016482
> 
> 赞同：0
> 
> 时间：2013-04-15T13:31:41.770
> 
> 标签：php, forms, symfony, doctrine

[这个问题](https://stackoverflow.com/q/15977529/399584)的延续：

我正在尝试嵌入[此处](http://symfony.com/doc/current/cookbook/form/form_collections.html)官方文档中描述的表单集合。不幸的是，我遇到了以下异常：

> 表单的视图数据应该是 Acme\SiteBundle\Entity\BlogPost 类的一个实例，但它是一个 (n) 数组。您可以通过将“data_class”选项设置为 null 或添加将 a(n) 数组转换为 Acme\SiteBundle\Entity\BlogPost 实例的视图转换器来避免此错误。

这很奇怪，因为我相信我遵循了官方文档到“t”：

博客帖子类型：

```
class BlogPostType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        // static text fields/attrs (title, body, etc)
        $builder->add('comments', 'collection', array('type' => new CommentType()));
    }

    public function getName()
    {
        return 'blogpost';
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array('data_class' => 'Acme\SiteBundle\Entity\BlogPost'));
    }
} 
```

评论类型：

```
class CommentType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->add('commentId', 'hidden');
        $builder->add('commentBody','text',array('label' => 'Comment:','attr'=>array('size'=>80,'class'=>'form-item-input form-type-texfield')));
    }

    public function getName()
    {
        return 'comment';
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array('data_class' => 'Acme\SiteBundle\Entity\Comment'));
    }
} 
```

BlogPost 中定义的关系：

```
/**
 * @var \Acme\SiteBundle\Entity\Comment.php
 *
 * @ORM\OneToMany(targetEntity="Comment", mappedBy="blogpost",
    cascade={"all"},orphanRemoval=true)
 * @ORM\OrderBy({"commentId" = "ASC"})
 */
private $comments; 
```

并在评论中：

```
/**
 * @var BlogPost
 *
 * @ORM\ManyToOne(targetEntity="BlogPost", inversedBy="comments")
 * @ORM\JoinColumns({
 *   @ORM\JoinColumn(name="blog_id", referencedColumnName="id")
 * })
 */
private $blogPost; 
```

所以，我不确定我哪里出错了。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:45:02.010

原来我是个白痴（在那里大吃一惊）并且正在向表单构建器传递一个数组。过去可以工作的旧代码现在正在破坏它。呸！

# java - 在 Collection 中保存表行有什么好处？

> ID：16016485
> 
> 赞同：6
> 
> 时间：2013-04-15T13:31:51.523
> 
> 标签：java, database, collections

我见过一些 Java 代码，其中数据库表中的行保存在集合中（通常是 ArrayList 或 HashMap）。

*   这种方法有什么好处？
*   你如何保持集合和表同步？
*   为什么不为每次检索向数据库发送查询？

这是一个好习惯吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T13:35:41.790

**好处是性能。** 查询数据库是资源和时间密集型的。如果您的表足够小，可以将项目保存在内存中，那么对本地内存的简单引用会快几个数量级。

就使它们保持同步而言，这是一个更困难的答案，并且取决于用例。在大多数情况下，除非您设置了一些良好的自定义架构，否则一旦您将数据库和内存中的集合检索到内存中，就无法保证同步。

如果您*想*采用这种方法*并使*集合和数据库保持同步（就像吃蛋糕一样），您可以执行以下操作：

1.  在您的表上为任何创建、插入、更新或删除设置数据库触发器。
2.  让触发器运行一个脚本，以某种方式通知您的应用程序（监控线程、服务等）。
3.  让应用程序在收到通知后通过读取数据库来更新集合。

当然，这是否会给您带来性能改进取决于您的数据库被其他程序修改的频率。

你也可以在你的程序中简单地维护一个数据库锁，这样在你的处理期间没有其他人可以修改它（允许你将项目保存在内存中*并*保证数据库不变），但这非常糟糕练习，因为您基本上会同时破坏使用该表的任何其他应用程序（除了阅读之外的任何其他应用程序）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-15T13:44:53.027

如果您经常读取永远不会更改的相同数据，那么将这些数据保存在 Java 集合中是有意义的，例如 List 或 Set。这一切都与性能有关，通过 Java 进行数据库调用和执行数据库事务确实需要时间（我在伦敦大学的论文就是关于这个问题的）。但是，如果您在 Java 集合中拥有该数据，则不必继续与具有“阻抗不匹配”的数据库通信，因为它们是两个独立的实体；一个使用 Java 范式，另一个使用数据库范式。

至于让它们保持同步，那是完全不同的野兽。

# windows - Win8的Win95编程

> ID：16016492
> 
> 赞同：1
> 
> 时间：2013-04-15T13:32:02.573
> 
> 标签：windows, winapi, compatibility, backwards-compatibility

我知道你们中的一些人会认为这很愚蠢，但我想在 Win95 上编译一个 Windows 程序，它可以在 Win95/98/98SE/2K/ME/XP/VD/7/8 上运行，但不一定是 WinCE/3.1/RT他们没有原生实现 Win32 API。我意识到 Win32 API 自其 Win95 规范以来已经发展，但它应该向后兼容，因为这是人们使用 Windows 的主要原因，据我所知。必须进行哪些级别的 API 仿真才能使这成为可能？WinVD/7/8如何实现兼容性？我要求这样我才能编写在 Windows 操作系统上尽可能无缝运行的 Windows 软件。

此外，虽然略有不同但相关，是否可以从其他 Windows 发行版或 Mac 或 Linux 交叉编译 Metro？我意识到调试或运行是不可能的，但我认为编译应该是。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T14:23:52.697

绝对没有问题。如果您可以在 Windows 95 上编译和运行程序，那么该程序应该可以在 Windows 98、ME、2000、XP、Vista、7 和 8 上运行。但您可能需要旧的开发环境，例如 Visual Studio 6。

但是如果你正在编写一个应该在 Win 95 上运行的程序，你就不能使用 Windows 95 之后引入的 API。

但老实说，今天应该支持 Windows 95 的理由并不多。

参见[这里](http://msdn.microsoft.com/en-us/library/6sehtctf.aspx)。

# jquery-mobile - JQuery Mobile：页面初始化事件的问题

> ID：16016495
> 
> 赞同：0
> 
> 时间：2013-04-15T13:32:10.570
> 
> 标签：jquery-mobile, jquery, openlayers

我在我的 JQuery Mobile 网站上初始化事件时遇到了一些问题，我只是想看看我是否以正确的方式进行操作。这是我的代码的样子：

```
<!DOCTYPE html>
<html>
    <head>
        <title>My page</title>

        <link rel="stylesheet" href="jquery.mobile-1.3.0-beta.1.css" />
        <script src="jquery-1.9.0.js"></script>
        <script src="jquery.mobile-1.3.0-beta.1.js"></script>
        <script text/javascript>
            function myFunction()
            {
                //do some code
            }
        </script>
        </head>
        <body>
            <div data-role="page" id="home">
                <div data-role="header">
                    <h1>Home</h1>
                </div>

                <div data-role="content" data-theme="f">
                    <p><a href="#next-page" data-role="button" data-transition="fade">2nd page</a></p>        
                </div>
            </div>
            <div data-role="page" id="next-page">
                <div data-role="header">
                    <h1>2nd page</h1>
                </div>
                <div data-role="content" data-theme="f">
                    <script text/javascript>
                        $("#next-page").on("pageinit", function() {
                            myFunction();
                        });
                    </script>
                </div>
            </div>
        </body>
</html> 
```

出于某种原因，当我加载第二页时，我只是得到了 AJAX 加载图标并且它并没有停止加载。

另一件事是，我不想`myFunction()`在第二页加载之前被调用，这就是为什么我在第二页中有脚本的原因。

任何帮助深表感谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:39:01.733

Javascript 对键敏感，如果您调用函数**myfuncion()**则必须存在相同的函数。

在您的情况下，您的函数的名称中有一个大 F：**myFunction()**，因为调用的函数 myfuncion() 不存在浏览器将报告错误并且 jQuery Mobile 将停止执行。

另一方面，这段代码：

```
$("#next-page").on("pageinit", function() {

}); 
```

如果您想在第二页初始化期间执行此功能，则可以。Jzst一点建议，将其更改为：

```
$(document).on("pageinit", "#next-page",function() {

}); 
```

**编辑 ：**

要解决您的问题，请将您的 pageinit 事件替换为 pageshow 事件。jQuery Mobile 在处理其他“图形”框架（地图、轮播）时存在问题，它们通常只能在 pageshow 事件中工作。

```
$(document).on("pageshow", "#next-page",function() {

}); 
```

# c# - 属性去哪儿了？我做了 Properties.Resources 但属性不存在

> ID：16016498
> 
> 赞同：0
> 
> 时间：2013-04-15T13:32:16.217
> 
> 标签：c#, winforms

这是我班上的代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Text;
using System.Windows.Forms;
using System.Drawing.Drawing2D;
using System.IO;
using System.Drawing.Imaging;

namespace Magnifier20070401
{
    public partial class MagnifierForm : Form
    {
        public MagnifierForm(Configuration configuration, Point startPoint)
        {
            InitializeComponent();

            //--- My Init ---
            mConfiguration = configuration;
            FormBorderStyle = FormBorderStyle.None;

            ShowInTaskbar = mConfiguration.ShowInTaskbar;
            TopMost = mConfiguration.TopMostWindow;
            Width = mConfiguration.MagnifierWidth;
            Height = mConfiguration.MagnifierHeight;

            // Make the window (the form) circular
            GraphicsPath gp = new GraphicsPath();
            gp.AddEllipse(ClientRectangle);
            Region = new Region(gp);

            mImageMagnifier = Properties.Resources.magnifierGlass; 
```

在我得到的属性上：错误 1 ​​当前上下文中不存在名称“属性”

我将此表单作为现有项目添加到我的项目中，并且在此属性上出现错误。我在资源中有 magnifierGlass 图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:34:43.197

发现需要在属性前添加我的项目名称：

```
mImageMagnifier = ScreenVideoRecorder.Properties.Resources.magnifierGlass; 
```

现在它正在工作，谢谢。

# jsf - 标签库支持命名空间：https://ajax4jsf.dev.java.net/ajax，但没有为名称定义标签：支持

> ID：16016501
> 
> 赞同：2
> 
> 时间：2013-04-15T13:32:16.850
> 
> 标签：jsf, taglib, ajax4jsf

当我尝试向`<a4j:support>`JSF 2.0 添加标签时，出现以下错误

> 标签库支持命名空间：[https](https://ajax4jsf.dev.java.net/ajax) ://ajax4jsf.dev.java.net/ajax ，但没有为名称定义标签：支持

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T00:19:25.937

命名空间 URI`https://ajax4jsf.dev.java.net/ajax`可识别为来自[Ajax4jsf](http://en.wikipedia.org/wiki/Ajax4jsf) 1.x 的那个，它存在于史前，早在 2006 年 RichFaces 3.x 收购 Ajax4jsf 之前。Ajax4jsf 1.x 是一个古老的标签库，针对 JSP 上的 JSF 1.1，早在 JSF 2.0 引入内置 ajax 功能之前。

更重要的是，目前在 JSF 2.0 中，JSP 已被弃用并由 Facelets（许多初学者过度概括为“XHTML”）取代。JSP 目标标记库（如 Ajax4jsf 1.x）与 Facelets 不兼容。您基本上需要一个与 JSF 2.0 兼容的标记库。如果您正在寻找 Ajax4jsf 功能，那么您应该寻找 RichFaces 4.x。请注意，`<a4j:support>`自 RichFaces 4.x 起已重命名为`<a4j:ajax>`符合 JSF 2.0 标准`<f:ajax>`。

然而，如前所述，JSF 2.0 因此已经提供了内置的 ajax 功能`<f:ajax>`。鉴于您尝试在 JSF 2.0 上使用 Ajax4jsf 1.x，您可能正在阅读一本过时的 JSF 书籍/教程/资源。我强烈建议把它放在一边，寻找一个更新的，如果你想要一个针对 JSF 2.0 的，最好不要早于 2010 年。[您可以在我们的 JSF wiki 页面](https://stackoverflow.com/tags/jsf/info)底部的某处找到几个链接的理智教程。

祝你好运。

# c# - 从 AJAX Toolkit ReorderList 中删除项目，位置混乱

> ID：16016504
> 
> 赞同：0
> 
> 时间：2013-04-15T13:32:19.857
> 
> 标签：c#, asp.net, ajax, reorderlist

我有一个`Reorderlist`效果很好。唯一的事情是，如果我`item`从 中删除一个，则`list`该项目会被删除`database`（就像它应该的那样），但`positions`不会得到`updated`. 例如，我有位置为的`five`项目，我删除了编号，数据库中的位置是 1、2、4 和 5。我希望它是 1 到 4，其中 4 和 5 向上移动。有谁知道如何做到这一点？`1``5``3`

# jquery - jquery删除onclick事件

> ID：16016510
> 
> 赞同：0
> 
> 时间：2013-04-15T13:32:41.773
> 
> 标签：jquery, onclick

我有几个按钮，但根据选择的单选按钮，我希望发生两件事中的一件。例如

when buildings radio button is selected, and the button is clicked then shows all building but doesnt show parks. similarly when parks radio button is selected, and the button is clicked shows all parks but doesnt show buildings.

我想删除不需要的相应功能的 onclick 事件，我可以这样做。

```
$('#youLinkID').attr('onclick','').unbind('click'); 
```

但是，这将删除**两个**onclick 事件。

有没有办法只删除一个 onclick 事件，可能是按名称，或者有一种方法可以按名称添加回一个 onclick 事件？

编辑：所以我在下面使用了 Mark 的帮助并使用了命名空间，并想出了这个：

```
$('#showOver').bind('click.buildOver', function(){ 
        $(this).unbind('click.parkOver')
    }); 
```

但是不起作用，我知道它在调用它并在运行我的测试时工作，

```
.css({"backgroundColor":"black","color":"white"}) 
```

它似乎没有添加 buildOver() 函数的 onclick 事件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T13:39:02.590

您可以将命名空间用于`unbind`特定的单击处理程序。

```
$("a").bind("click.pick1", function () {
    alert('pick 1');
    $(this).unbind("click.pick1");
}).bind("click.pick2", function () {
    alert('pick 2');
}); 
```

[jsfiddle 上的示例](http://jsfiddle.net/markcoleman/j4PsN/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:38:46.560

检查这个：[**演示**](http://jsfiddle.net/wRuj5/)

```
<a href="#" onclick="alert('hello');">I produce an alert via onclick</a>
<a href="#" onclick="alert('hello');">Me too</a>

<a href="#" onclick="$('a').removeAttr('onclick');">I remove them</a> 
```

诀窍是这段代码：

```
$('a').removeAttr('onclick'); 
```

[**参考**](http://api.jquery.com/removeAttr/)

# magento - Magento 按产品 sku 过滤订单集合

> ID：16016514
> 
> 赞同：1
> 
> 时间：2013-04-15T13:32:55.077
> 
> 标签：magento

我正在使用 magento 1.7，我需要从包含至少一个与 sku 匹配的项目的某个 increment_id 获取所有订单。

这是我所拥有的：

```
 $orderCollection = Mage::getModel('sales/order')->getCollection()
        ->addFieldToFilter('status',
            array(
                'nin' => array(
                    'new',
                    'pending',
                    'pending_payment',
                    'holded',
                    'canceled')
            ))
        ->addFieldToFilter('increment_id', array('gteq' => $last_order)); 
```

如果我添加一行：

```
 $orderCollection->addFieldToFilter('sku', $findSku); 
```

我会收到一个 PHP 致命错误，因为 'sku' 不是一个字段。我试过 addAttributeToFilter() ，它也不会工作。

我知道我需要与另一个表建立连接，但我不知道在 Magento 中如何进行连接，也不知道我应该加入哪个表。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T15:02:03.083

SKU 放置在订单项目表中，而不是订单中。您的最终查询必须如下所示：

```
SELECT o.increment_id 
FROM sales_flat_order_item oi 
INNER JOIN sales_flat_order o ON o.entity_id = oi.order_id 
WHERE product_id=XXX 
ORDER BY o.increment_id DESC; 
```

可以使用几乎这样的语法来完成此查询：

```
$orderItem = Mage::getModel('sales/order_item')->getCollection();
$orderItem
     ->getSelect()
     ->joinInner(array('order' => Mage::getSingleton('core/resource')->getTableName('sales/order')), 'order.entity_id = main_table.order_id' )
     ->where('product_id=?', $productId)
     ->order('main_table.order_id DESC'); 
```

# jquery - 插入 Ajax 后加载页面 Jquery Mobile

> ID：16016515
> 
> 赞同：0
> 
> 时间：2013-04-15T13:32:55.733
> 
> 标签：jquery, jquery-mobile, setinterval, clearinterval

在 jQuery Mobile 中，我使用的是多页 ajax 系统。我想要做的是当用户选择一个页面时出现 jquery 加载器，而另一个页面仅在将 ajax 插入页面后显示。

例如，如果我有一个页面`#list`和另一个页面`#listdetails`，当用户在列表页面上选择一个列表项时，它会加载，显示加载图形。只有当页面完全加载了 ajax 内容时，listdetails 页面才会显示给用户。如何做到这一点任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T15:52:34.717

可以的，我给你做了个例子。这不是你想要的 100%，但你会明白的：http: [//jsfiddle.net/Gajotres/AzXdT/](http://jsfiddle.net/Gajotres/AzXdT/)

基本上我在我的示例中所做的是在页面即将被隐藏时显示 ajax 加载器：

```
$(document).live('pagebeforehide', '[data-role="page"]',function(e,data){  
    var loader = setInterval(function(){
        $.mobile.loading('show');
        clearInterval(loader);
    },1); 
}); 
```

并在页面加载时隐藏它：

```
$(document).live('pageshow', '[data-role="page"]',function(e,data){  
    var loader = setInterval(function(){
        $.mobile.loading('hide');
        clearInterval(loader);
    },1); 
}); 
```

setInterval 在这里是因为 Web 工具包浏览器在显示 ajax 加载器时出现问题，甚至除了 pageshow。

您可以使用我的代码在显示页面时隐藏 ajax 加载器，但有时您的 ajax 会在 pageshow 之后成功结束，所以假设这是您的 ajax 调用：

```
$.ajax({
    type: "POST",
    url: host,
    dataType: "xml",
    data: somedata,
    success: function(xml) {
        //Do something
        hideloader();           
    },
    error: function (request,error) {
        //Report an error
        hideloader();
    }
});

function hideloader() {
    var loader = setInterval(function(){
        $.mobile.loading('hide');
        clearInterval(loader);
    },1); 
} 
```

在这种情况下，我使用了 2 个装载机

# android - 自定义列表视图的行位置编号混乱

> ID：16016518
> 
> 赞同：0
> 
> 时间：2013-04-15T13:33:02.300
> 
> 标签：android, android-layout, android-listview, layout-inflater

**更新** 正如建议的那样，我已将数据视图持有者添加到我的代码中，但我仍然面临同样的问题。我已经编辑了我的问题，我的代码请看一下。

我想根据行号在我的列表视图中显示 2 个视图。我想在第一行显示右手火车引擎，在第二行显示左手火车引擎，反之亦然。

反之亦然行视图更改我放置 if 条件并通过 mod%2==0 检查位置，而不是奇怪的.. 但是当我启动应用程序时，我得到准确的左右视图但是当我向下滚动时，我得到了两个右手火车引擎一排排。

这是代码

```
public LazyAdapter(Activity a, ArrayList<String> songsList) {
    activity = a;
    data=songsList;
    inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
}
public int getCount() {
    Log.d("Listview","Count is"+data.size());
    return data.size();
}
public Object getItem(int position) {
    return position;
}
public long getItemId(int position) {
    return position;
}

@Override
public int getItemViewType(int position) {
    Log.d("position is - ", "position is "+position);
    if(position%2==0)
    {
    return 0;
    }
    else
    {
    return 1;
    }

}
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    ViewHolder holder = null;
    int type = getItemViewType(position);
    System.out.println("getView " + position + " " + convertView + " type = " + type);
    if (convertView == null) {
        holder = new ViewHolder();
        switch (type) {
            case 0:
                convertView = inflater.inflate(R.layout.list_row1, null);
                holder.caption = holder.caption = ((ImageView)convertView.findViewById(R.id.train).findViewById(R.id.boogi1).findViewById(R.id.imageView1));
                break;
            case 1:
                convertView = inflater.inflate(R.layout.list_row2, null);
                holder.caption = holder.caption = ((ImageView)convertView.findViewById(R.id.train2).findViewById(R.id.boogi2).findViewById(R.id.imageView1)); 
                break;
        }
        convertView.setTag(holder);
    } else {
        holder = (ViewHolder)convertView.getTag();
    }

    return convertView;
}

static class ViewHolder {
    ImageView caption;

    } 
```

List_row1.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="500dp"
android:background="@drawable/list_selector"
android:orientation="horizontal"
android:padding="5dip" >
 <include android:id="@+id/mainview" layout="@layout/activity_main" /> 
```

activity_main.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="horizontal">
<HorizontalScrollView
    android:id="@+id/horizontalScrollView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >
    <include android:id="@+id/train" layout="@layout/train" />
</HorizontalScrollView> 
```

火车.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="horizontal">
    <include android:id="@+id/boogi1" layout="@layout/boogi" />
    <include android:id="@+id/boogi2" layout="@layout/boogi" />
     <include android:id="@+id/engine" layout="@layout/engine" /> 
```

在 Train2.xml 中包含标记顺序已更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:46:59.440

你没有`View Holder`用来保持视图，因为当我们滚动列表持有者应该在那里保持`inflated`视图......

膨胀你的视图后初始化视图持有者，然后在里面做你的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T08:22:48.633

正如 mahaveermuttha 和 paresh mayani 建议使用 viewholder 和 adilsoomra 指出我忘记添加 getViewTypeCount(); 它解决了我的问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T13:46:20.140

`if(convertView==null)`可能会在这里给您带来问题。

目前，只有在 convertView = null 时才会检查您检查要使用哪个视图的代码。在您的情况下， convertView 可能不为空，因此它多次重复使用同一视图，直到 convertView 再次为空（可能是因为滚动）。

试着留下那部分，然后再试一次。

# php - 有什么方法可以阻止 PHP 将两个字符串“1”和“1.0”评估为相同？

> ID：16016519
> 
> 赞同：2
> 
> 时间：2013-04-15T13:33:05.183
> 
> 标签：php

在 PHP 中，有没有办法阻止它评估两个字符串“1”和“1.0”相同？下面的代码说明了我在说什么：

```
<?php
    $str1 = "1";
    $str2 = "1.0";

    if($str1==$str2){
      echo "equal";
    }else{
      echo "not equal";
    }
?> 
```

对我来说，问题是我试图检查用户在将值提交回服务器时是否更改了值。目前，如果用户将值从“1”更改为“1.0”，它应该会发现他们已经更改了记录并允许他们将其保存到数据库中 - 但是因为 PHP 在比较时将它们都作为数字评估他们认为用户没有进行任何更改并且不允许他们保存它。

有没有办法解决？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-15T13:33:38.347

您可以随时使用

```
=== 
```

操作员。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-15T13:39:30.140

来自[PHP 文档](http://www.php.net/manual/en/language.operators.comparison.php)：

> 如果将数字与字符串进行比较，或者比较涉及数字字符串，则**每个字符串都将转换为数字并以数字方式进行比较**。[...]。**当比较是 === 或 !== 时不会发生类型转换，**因为这涉及比较类型和值。

因此，`==`运算符进行了导致`1`等于的*数字*转换`1.0`。如果您改用`===`运算符，则将字符串的每个字符与字符串的另一个对应字符进行比较，从而进行逐个字符比较`"1"`，并`"1.0"`成为两个不同的字符串，因此评估为假。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-15T13:35:11.450

为了避免问题使用

```
=== 
```

代替

```
== 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-15T13:37:02.360

如果要严格比较字符串，请使用[`strcmp()`](http://php.net/strcmp)：

```
if (strcmp($str1, $str2) == 0) {
    // they're the same
} 
```

当然，这更冗长，但是`===`已经很好地讨论了使用的替代方法。

# xpath - 如何使用 XPath 选择任意深度的子元素？

> ID：16016521
> 
> 赞同：129
> 
> 时间：2013-04-15T13:33:07.543
> 
> 标签：xpath

假设我有这个（简化）：

```
<form id="myform">
    <!-- some input fields -->
    <input type="submit" value="proceed"/>
</form> 
```

然后我可以通过 XPath 选择提交按钮`//form[@id='myform']/input[@type='submit']`。伟大的。

但是，我的模板可能会发生变化，我希望在提交按钮所在的深度上保持灵活。它可以放在一个表中，如下所示：

```
<form id="myform">
    <!-- some input fields -->
    <table><tr><td>
           <input type="submit" value="proceed"/>
    </td></tr></table>
</form> 
```

我知道我可以选择孙子元素，但我不能选择任何深度的grand-grand-grand-...-childeren。例如：

*   `//form[@id='myform']/*/input[@type='submit']`只选孙子，不深。
*   `//form[@id='myform']/*/*/input[@type='submit']`只选孙子，不深不深。
*   `//form[@id='myform']/**/input[@type='submit']`无效。

那么，如何在不使用元素 ID 的情况下可靠地选择此提交按钮？

* * *

## 回答 #1

> 赞同：194
> 
> 时间：2013-04-15T13:35:58.087

您快到了。只需使用：

```
//form[@id='myform']//input[@type='submit'] 
```

`//`快捷方式也可以在表达式中使用。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2017-01-20T02:30:30.183

如果您使用的是 XmlDocument 和 XmlNode。

说：

```
XmlNode f = root.SelectSingleNode("//form[@id='myform']"); 
```

采用：

```
XmlNode s = f.SelectSingleNode(".//input[@type='submit']"); 
```

这取决于您使用的工具。但是 .// 将从参考节点中选择任何孩子，任何深度。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-07-01T03:12:14.210

```
//form/descendant::input[@type='submit'] 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2018-07-04T07:56:57.433

此外，您可以使用 css 选择器来做到这一点：

```
form#myform input[type='submit'] 
```

css 选举器中元素之间的空间意味着搜索 input[type='submit'] 父表单任何深度的元素#myform element

# c - hdparm 和磁盘读取速度

> ID：16016522
> 
> 赞同：0
> 
> 时间：2013-04-15T13:33:08.137
> 
> 标签：c, bandwidth, fread

我的`hdparm -t`缓冲磁盘读取输出约为 120 MB/秒。但是，当我设法在大约一秒钟（`fread()`on `c`）内将其全部读取时，我正在编写一个涉及读取大文件（大约 400MB）的小代码。hdparm 输出是否不太符合我的理解？为什么我能读得这么快？

我对读取的字节进行了非常简单的处理，计算了字母“A”的数量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-13T15:57:11.223

hdparm 正在绕过您操作系统的缓存，但您的测试程序正在利用它。假设您正在运行 Linux，请使用以下命令从页面缓存中清除所有内容（来源： http: [//linux-mm.org/Drop_Caches](http://linux-mm.org/Drop_Caches)）：

```
echo 3 > /proc/sys/vm/drop_caches 
```

然后，运行您的测试程序。它应该等于或低于 hdparm 报告的速率。

# struts - 如果对象有另一个对象，如何以struts形式显示数据

> ID：16016526
> 
> 赞同：1
> 
> 时间：2013-04-15T13:33:23.593
> 
> 标签：struts, struts-1

我正在研究 struts 1.3 框架应用程序。我有一个在请求属性中设置的对象。

```
request.setAttribute("school",school); 
```

我正在尝试通过`<bean:define>`标签显示该对象。

例如，学校是价值对象

```
School school; 
```

在学校 VO 对象我还有另外两个对象

```
Student student;
Teacher teacher; 
```

我正在尝试显示学生和教师对象的价值

`<bean:define id="summary" name="school" />
<bean:define id="StudentSummary" name="summary" property="student"/>
<bean:define id="TeacherSummary" name="summary" property="teacher"/>`

并通过标签写这个元素

`<bean:write name="StudentSummary" property="name" />
<bean:write name="StudentSummary" property="class" />
<bean:write name="TeacherSummary" property="name" />`

但它给出了
javax.servlet.jsp.JspException: Cannot find message resources under key org.apache.struts.action.MESSAGE

代码有什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T20:51:21.453

我从来没有使用过 bean 标签，但你可以使用表达式语言（EL）来做到这一点。EL，我相信这是一种更标准的做事方式。

看看这个以前的帖子。我认为它有助于[链接](https://stackoverflow.com/questions/3579172/how-to-obtain-request-attribute-in-jsp-using-el)

我认为在你的情况下你可以做一些事情

`<c:out value="${school.student.name}"/>`

如果您的学生对象中有“name”属性，上述语句将打印“name”的值。

# php - Android SDK - 应用程序不读取 php/MySQL

> ID：16016535
> 
> 赞同：-2
> 
> 时间：2013-04-15T13:33:44.997
> 
> 标签：php, android, mysql, sdk

正如我在标题中所说

Activity_main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <WebView
        android:id="@+id/webView"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true" />

</RelativeLayout> 
```

AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.achkars.espaceado"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />
<uses-permission android:name="android.permission.INTERNET" />
    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.achkars.espaceado.MainActivity"
            android:label="@string/app_name"
            android:theme="@style/Theme.FullScreen"
            android:noHistory="true"
            android:screenOrientation="portrait" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

MainActivity.java

```
package com.achkars.espaceado;

import android.os.Bundle;
import android.annotation.SuppressLint;
import android.app.Activity;
import android.view.Menu;
import android.webkit.WebChromeClient;
import android.webkit.WebView;

public class MainActivity extends Activity {

    @SuppressLint("SetJavaScriptEnabled")
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        WebView webview = new WebView(this);
         setContentView(webview);
         webview.getSettings().setJavaScriptEnabled(true);
         webview.setWebChromeClient(new WebChromeClient());
        // Simplest usage: note that an exception will NOT be thrown
         // if there is an error loading this page (see below).
         webview.loadUrl("file:///android_asset/index.html");
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

和文件 News.php

```
<html>
<head>
<link rel="stylesheet" type="text/css" href="file:///android_asset/style.css" media="screen"/>
</head>
<body>
<img alt="full screen background image" src="file:///android_asset/back.jpg" id="full-screen-background-image" />
<center><img alt="up" src="file:///android_asset/top.png" id="up" /> </center>
<center><img alt="down" src="file:///android_asset/down.png" id="down"/></center>
<h2><center>
Les nouvelles (Blagues)
</center></h2>
<ul>
<a href="file:///android_asset/index.html"><li class="arrow">La page precedente</li></a>
</ul>
<ul>
<?php
$con = mysql_connect("The Domain","Username","Password");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("DB Name", $con);

$result = mysql_query("SELECT * FROM espace");

while($row = mysql_fetch_array($result))
  {
echo "<a href=".$row['link'].">","<li class=".$row['arrow'].">";
echo $row['news'];
echo "</li></a>";
  };
mysql_close($con);
?>
</ul>
</body>
</html> 
```

在PC上它工作正常，但在电话上我得到：

```
"," ";echo $row['news'}; echo " 
";}; mysql_close($con); ?> 
```

它需要任何许可吗？

感谢您的任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:36:36.040

Android 无法在设备本身上运行 PHP 代码。PHP 是一种服务器端语言，您必须将所有 PHP 功能转移到网络服务器上，并通过它访问它。

请注意，有一个[PHP for Android](http://phpforandroid.net/)项目，您可以使用它在本地运行代码，但我不确定该端口的完整或活跃程度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T13:36:46.290

php 页面是一个脚本，需要一个 PHP 解释器来解析并正确显示。你不能在你的 Android 中拥有它（这不是你真正想要的）。您需要将此脚本存储在与 PHP 兼容的网络服务器中，并通过手机浏览器通过互联网查看它（再次，我想这不是您想要的）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-30T19:37:40.010

为 Android 获取一个 Web 服务器，将您的 php 脚本移动到`htdocs`（或其他）文档文件夹，当以`localhost:8080/`. 我在智能手机和平板电脑上都使用 KSWeb 服务器，没有任何问题。

# c# - 使用 SevenZipSharp 压缩多卷？

> ID：16016540
> 
> 赞同：6
> 
> 时间：2013-04-15T13:34:00.487
> 
> 标签：c#, .net, vb.net, compression, sevenzipsharp

我想使用 SevenZipsharp 压缩卷中的文件，例如将 100 mb 的文件压缩成 10 个每个 10 mb 的文件。我们可以使用 7zip.exe -volume 参数来做同样的事情......

例如，当我使用 7Zip 压缩多卷时，我得到以下文件结构：

```
File.7z.001
File.7z.002
File.7z.003
etc... 
```

文件不是独立的，不是一个大小相同的7zip文件，是一个不同卷的压缩文件，我的意思是提取整个内容我们需要第一个文件“File.7z.001”

我想用 SevenZipSharp 做同样的事情（如果可能的话）。

我在 vb.net 中制作了这个片段（但无论答案是否在 C# 代码中），我需要实现多卷选项，我需要帮助：

```
 Imports SevenZip

   Dim dll As String = "7z.dll"

   Private Function SevenZipSharp_Compress(ByVal Input_DirOrFile As String, _
                                      Optional ByVal OutputFileName As String = Nothing, _
                                      Optional ByVal Format As OutArchiveFormat = OutArchiveFormat.SevenZip, _
                                      Optional ByVal CompressionMode As CompressionMode = CompressionMode.Create, _
                                      Optional ByVal CompressionMethod As CompressionMethod = CompressionMethod.Lzma, _
                                      Optional ByVal CompressionLevel As CompressionLevel = CompressionLevel.Normal, _
                                      Optional ByVal Password As String = Nothing) As Boolean
       Try
           ' Set library path
           SevenZipExtractor.SetLibraryPath(dll)

       ' Create compressor and specify the file or folder to compress
       Dim Compressor As SevenZipCompressor = New SevenZipCompressor()

       ' Set compression parameters
       Compressor.CompressionLevel = CompressionLevel ' Archiving compression level.
       Compressor.CompressionMethod = CompressionMethod ' Append files to compressed file or overwrite the compressed file.
       Compressor.ArchiveFormat = Format ' Compression file format
       Compressor.CompressionMode = CompressionMode ' Compression mode
       Compressor.DirectoryStructure = True ' Preserve the directory structure.
       Compressor.IncludeEmptyDirectories = True ' Include empty directories to archives.
       Compressor.ScanOnlyWritable = False ' Compress files only open for writing.
       Compressor.EncryptHeaders = False ' Encrypt 7-Zip archive headers
       Compressor.TempFolderPath = System.IO.Path.GetTempPath() ' Temporary folder path
       Compressor.FastCompression = False ' Compress as fast as possible, without calling events.
       Compressor.PreserveDirectoryRoot = True ' Preserve the directory root for CompressDirectory.
       Compressor.ZipEncryptionMethod = ZipEncryptionMethod.ZipCrypto ' Encryption method for zip archives.
       Compressor.DefaultItemName = "File.7z" ' Item name used when an item to be compressed has no name, for example, when you compress a MemoryStream instance

       ' Get File extension
       Dim CompressedFileExtension As String = Nothing
       Select Case Compressor.ArchiveFormat
           Case OutArchiveFormat.SevenZip : CompressedFileExtension = ".7z"
           Case OutArchiveFormat.BZip2 : CompressedFileExtension = ".bz"
           Case OutArchiveFormat.GZip : CompressedFileExtension = ".gzip"
           Case OutArchiveFormat.Tar : CompressedFileExtension = ".tar"
           Case OutArchiveFormat.XZ : CompressedFileExtension = ".xz"
           Case OutArchiveFormat.Zip : CompressedFileExtension = ".zip"
       End Select

       ' Add Progress Handler
       'AddHandler Compressor.Compressing, AddressOf SevenZipSharp_Compress_Progress

       ' Removes the end slash ("\") if given for a directory
       If Input_DirOrFile.EndsWith("\") Then Input_DirOrFile = Input_DirOrFile.Substring(0, Input_DirOrFile.Length - 1)

       ' Generate the OutputFileName if any is given.
       If OutputFileName Is Nothing Then _
           OutputFileName = (My.Computer.FileSystem.GetFileInfo(Input_DirOrFile).DirectoryName & "\" & (Input_DirOrFile.Split("\").Last) & CompressedFileExtension).Replace("\\", "\")

       ' Check if given argument is Dir or File ...then start the compression
       If IO.Directory.Exists(Input_DirOrFile) Then ' Is a Dir
           If Not Password Is Nothing Then
               Compressor.CompressDirectory(Input_DirOrFile, OutputFileName, True, Password)
           Else
               Compressor.CompressDirectory(Input_DirOrFile, OutputFileName, True)
           End If
       ElseIf IO.File.Exists(Input_DirOrFile) Then ' Is a File
           If Not Password Is Nothing Then
               Compressor.CompressFilesEncrypted(OutputFileName, Password, Input_DirOrFile)
           Else
               Compressor.CompressFiles(OutputFileName, Input_DirOrFile)
           End If
       End If

   Catch ex As Exception
       'Return False ' File not compressed
       Throw New Exception(ex.Message)
   End Try

   Return True ' File compressed

   End Function 
```

**片段的用法：**

```
 SevenZipSharp_Compress("C:\File or folder", _
                           "Optional: Output dir", _
                           OutArchiveFormat.SevenZip, _
                           CompressionMode.Create, _
                           CompressionMethod.Lzma, _
                           CompressionLevel.Ultra, _
                           "Optional: Password") 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-28T01:45:38.217

在您的`Compressor`对象上，设置`VolumeSize`为所需的输出文件大小（以字节为单位）。使用下面的示例代码，在源目录中包含大约 72MB 的 mp3 文件，压缩器创建了 8 个输出文件，名为 zipped.7z.001、zipped.7z.002 等。

查看该`SevenZipExtractor`课程的当前源代码，看起来多卷压缩仅在您`OutArchiveFormat.SevenZip`使用`ArchiveFormat`.

```
string dll = @"C:\Users\WarrenG\Desktop\7z.dll";
string source = @"C:\Users\WarrenG\Desktop\source";
string output = @"C:\Users\WarrenG\Desktop\output\zipped.7z";

SevenZipExtractor.SetLibraryPath(dll);
SevenZipCompressor compressor = new SevenZipCompressor();
compressor.ArchiveFormat = OutArchiveFormat.SevenZip;
compressor.CompressionMode = CompressionMode.Create;
compressor.TempFolderPath = System.IO.Path.GetTempPath();
compressor.VolumeSize = 10000000;   // output file size in bytes
compressor.CompressDirectory(source, output); 
```

# jquery - 加载上下文中的 ASP.NET WebMethod 性能问题

> ID：16016541
> 
> 赞同：1
> 
> 时间：2013-04-15T13:34:02.470
> 
> 标签：jquery, asp.net, ajax, webmethod

我有一个 WebMethod，用于在初始加载后将一些 HTML 返回到页面中。该方法通过 jQuery 的 ajax 方法调用。

一切正常，但是，从这些调用加载请求状态时存在相当严重的性能问题。随着流量的增加，CPU 使用率会达到最大值，实际上会扼杀整个站点的响应能力。

使用一个分析器，**System.Web.Handlers.ScriptModule.OnPostAcquireRequestState()**被称为罪魁祸首，几乎 100% 的调用持续时间。

另一个分析器调用**System.Web.HttpApplication.System.Web.IHttpAsyncHandler.BeginProcessRequest(HttpContext context, AsyncCallback cb, object extraData)**。

因此，我可以通过负载测试在本地重现该行为，但是对于库中的罪魁祸首，我不知道如何解决它。是否有任何“陷阱”会导致上下文恢复成本高昂？我可以简单地从 WebMethod 中删除上下文吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T12:40:18.600

事实证明，问题在于 Page 类中有 WebMethod。这迫使 WebMethod 加载 Session State，它在 Session 对象上有一个读/写锁。这迫使请求**同步**执行，排队等待锁打开的请求。

我无法强制页面中的 WebMethod 不加载 Session，甚至将其加载为只读。将 WebMethod 移动到它自己的 WebService 中允许这样做 - 并解决了问题。

这解决了进入 WebMethod 时 CPU 的“锁定”问题，并允许方法同时执行，极大地帮助了页面的加载时间。

# ios - UIPageControl 没有在 valueChanged 上调用选择器

> ID：16016542
> 
> 赞同：4
> 
> 时间：2013-04-15T13:34:04.273
> 
> 标签：ios, objective-c, xcode, uiscrollview, uipagecontrol

我`UIPageControl`第一次尝试使用 a ，但似乎无法让它在`UIControlEventValueChanged`. 我在这里错过了什么吗？我什至尝试了情节提要实现，但结果相同。我也尝试`UIControlEventTouchUpInside`了其他动作。没有人调用`changePage:`下面的函数。

在.h中：

```
@property (nonatomic, retain) UIPageControl *introPageControl;
-(IBAction)changePage:(id)sender; 
```

在他们中：

```
@synthesize introPageControl;

- (void)viewDidLoad {
    [super viewDidLoad];
    self.introPageControl = [[UIPageControl alloc] initWithFrame:CGRectMake(0,208,self.view.frame.size.width,36)];
    self.introPageControl.numberOfPages = 4;
    self.introPageControl.currentPage = 0;
    [self.introPageControl addTarget:self action:@selector(changePage:) forControlEvents:UIControlEventValueChanged];
    [self.view addSubview:self.introPageControl];
}

-(IBAction)changePage:(id)sender {
    // NEVER GETS CALLED :(
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-17T17:03:33.687

UIControlEventValueChanged 仅在点击 UIPageControl 视图对象时调用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-02-06T20:31:17.053

**斯威夫特 3：**

```
pageControl.numberOfPages = 6
pageControl.currentPage = 0
pageControl.addTarget(self, action: #selector(pageControlTapHandler(sender:)), for: .touchUpInside)

...

func pageControlTapHandler(sender:UIPageControl) {
    print("currentPage:", sender.currentPage) //currentPage: 1
} 
```

# python - 使用 NetCDF 文件中的数据加载 PostgreSQL 数据库

> ID：16016545
> 
> 赞同：3
> 
> 时间：2013-04-15T13:34:06.940
> 
> 标签：python, postgresql, netcdf

我有一个包含八个变量的 netCDF 文件。（对不起，不能分享实际文件）每个变量都有两个维度，时间和站点。时间大约是 14 步，车站目前有 38000 个不同的 id。因此，对于 38000 个不同的“位置”（实际上只是一个 id），我们有 8 个变量和 14 个不同的时间。

```
$ncdump -h stationdata.nc
netcdf stationdata {
dimensions:
    station = 38000 ;
    name_strlen = 40 ;
    time = UNLIMITED ; // (14 currently)
variables:
    int time(time) ;
            time:long_name = "time" ;
            time:units = "seconds since 1970-01-01" ;
    char station_name(station, name_strlen) ;
            station_name:long_name = "station_name" ;
            station_name:cf_role = "timeseries_id" ;
    float var1(time, station) ;
            var1:long_name = "Variable 1" ;
            var1:units = "m3/s" ;
    float var2(time, station) ;
            var2:long_name = "Variable 2" ;
            var2:units = "m3/s" ;
... 
```

需要将此数据加载到 PostGres 数据库中，以便将数据连接到与 station_name 匹配的某些几何图形，以便以后进行可视化。

目前我已经在 Python 中使用 netCDF4 模块完成了这项工作。工作，但它需要永远！现在我像这样循环：

```
times = rootgrp.variables['time']
stations = rootgrp.variables['station_name']
for timeindex, time in enumerate(times):
    stations = rootgrp.variables['station_name']
    for stationindex, stationnamearr in enumerate(stations):
        var1val = var1[timeindex][stationindex]
        print "INSERT INTO ncdata (validtime, stationname, var1) \
            VALUES ('%s','%s', %s);" % \
            ( time, stationnamearr, var1val ) 
```

这需要在我的机器上运行几分钟，我觉得它可以以更聪明的方式完成。

任何人都知道如何以更智能的方式完成此操作？最好在 Python 中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T08:41:42.747

不确定这是不是正确的方法，但我找到了解决这个问题的好方法，并认为我应该分享它。

在第一个版本中，脚本运行大约需要一个小时。重写代码后，它现在可以在不到 30 秒内运行！

最重要的是使用 numpy 数组并将来自 NetCDF 读取器的变量数组转换为行，然后将所有列堆叠到一个矩阵中。然后使用 psycopg2 copy_from 函数将该矩阵加载到数据库中。我从这个问题中得到了代码

[使用带有 psycopg2 的二进制 COPY 表 FROM](https://stackoverflow.com/questions/8144002/use-binary-copy-table-from-with-psycopg2/8150329#8150329)

我的部分代码：

```
dates = num2date(rootgrp.variables['time'][:],units=rootgrp.variables['time'].units)
var1=rootgrp.variables['var1']
var2=rootgrp.variables['var2']

cpy = cStringIO.StringIO()

for timeindex, time in enumerate(dates):

    validtimes=np.empty(var1[timeindex].size, dtype="object")
    validtimes.fill(time)

    #  Transponse and stack the arrays of parameters
    #    [a,a,a,a]        [[a,b,c],
    #    [b,b,b,b]  =>     [a,b,c],
    #    [c,c,c,c]         [a,b,c],
    #                      [a,b,c]]

    a = np.hstack((
              validtimes.reshape(validtimes.size,1),
              stationnames.reshape(stationnames.size,1),
              var1[timeindex].reshape(var1[timeindex].size,1),
              var2[timeindex].reshape(var2[timeindex].size,1)
    ))

    # Fill the cStringIO with text representation of the created array
    for row in a:
            cpy.write(row[0].strftime("%Y-%m-%d %H:%M")+'\t'+ row[1] +'\t' + '\t'.join([str(x) for x in row[2:]]) + '\n')

conn = psycopg2.connect("host=postgresserver dbname=nc user=user password=passwd")
curs = conn.cursor()

cpy.seek(0)
curs.copy_from(cpy, 'ncdata', columns=('validtime', 'stationname', 'var1', 'var2'))
conn.commit() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T23:47:20.777

您可以进行一些简单的改进来加快速度。所有这些都是独立的，您可以尝试所有这些或只尝试几个，看看它是否足够快。它们的难度大致按升序排列：

*   使用`psycopg2`数据库驱动，速度更快
*   将整个插入块包装在事务中。如果您正在使用`psycopg2`，您已经在执行此操作 - 它会`commit`在最后自动打开您必须执行的事务。
*   在一个数组中收集几行值，然后每 n 行执行一次多值 INSERT。
*   使用多个连接通过辅助进程进行插入 - 请参阅`multiprocessing`模块。由于 GIL（全局解释器锁定）问题，线程无法正常工作。

如果您不想使用一个大事务，您可以设置`synchronous_commit = off`并设置 a`commit_delay`以便连接可以在磁盘刷新实际完成之前返回。如果您在一个事务中完成所有工作，这对您没有多大帮助。

## 多值插入

Psycopg2 不直接支持多值`INSERT`，但你可以写：

```
curs.execute("""
INSERT INTO blah(a,b) VALUES
(%s,%s),
(%s,%s),
(%s,%s),
(%s,%s),
(%s,%s);
""", parms); 
```

并循环类似：

```
parms = []
rownum = 0
for x in input_data:
    parms.extend([x.firstvalue, x.secondvalue])
    rownum += 1
    if rownum % 5 == 0:
        curs.execute("""INSERT ...""", tuple(parms))
        del(parms[:]) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T19:13:30.950

组织您的循环以访问每次的所有变量。换句话说，一次读取和写入一条记录，而不是一次读取一个变量。这可以极大地加快速度，特别是如果源 netCDF 数据集存储在具有大磁盘块（例如 1MB 或更大）的文件系统上。有关为什么这更快的解释以及数量级导致的加速的讨论，请参阅[此 NCO 加速讨论](http://sourceforge.net/projects/nco/forums/forum/9829/topic/4898620)，从条目 7 开始。

# iphone - iPhone在触摸位置清除UIView alpha

> ID：16016550
> 
> 赞同：2
> 
> 时间：2013-04-15T13:34:18.390
> 
> 标签：iphone, ios, transparent, alpha, quartz-core

我想在 a 中呈现图像`UIView`，因为我必须自定义`(void)drawRect:(CGRect)rect`. 我必须清除用户“摩擦”屏幕的视图的 alpha，因此该视图后面的子视图将变得可见。
如果我使用纯色效果很好，但是当我尝试绘制图像并清除用户触摸屏幕的视图时，不会绘制图像。你能帮我吗，我应该如何`UIImage`绘制 , 在背景中绘制并在特定*rect*中变得透明，好吗？

这是我的代码，它适用于纯色（就像现在一样）：

```
- (void)drawRect:(CGRect)rect {
    CGContextRef context = UIGraphicsGetCurrentContext();

    CGContextSaveGState(context);

    CGContextSetFillColorWithColor( context, [UIColor greenColor].CGColor );
    CGContextFillRect( context, rect );

    CGContextSetFillColorWithColor( context, [UIColor clearColor].CGColor );
    CGContextSetBlendMode(context, kCGBlendModeClear);
    CGContextFillRect(context, CGRectMake(lastTouch.x, lastTouch.y, 30, 30));

    CGContextRestoreGState(context);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:48:06.833

为此目的，github 上有一个很好的控件。查看：

[https://github.com/akopanev/iOS-Scratch-n-See](https://github.com/akopanev/iOS-Scratch-n-See)

我已经将它用作“scratch game”应用程序的起点。代表还接收到多少屏幕/图像已经被清除（即“被刮掉”）的信息。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:41:53.297

我不确定你的问题......但如果问题是当用户触摸屏幕时没有调用drawRect......试试这个：

放一个

```
[self setNeedsDisplay]; 
```

在您的触摸事件中... UIGestureRecognizer 或覆盖 UITouches 方法

# ruby - heroku pg:transfer - postgresql db 上传期间接收错误

> ID：16016555
> 
> 赞同：1
> 
> 时间：2013-04-15T13:34:25.727
> 
> 标签：ruby, database, ruby-on-rails-3, heroku, rails-postgresql

我正在尝试将本地数据库上传到生产环境，但在处理过程中一直遇到以下错误：

```
$ heroku pg:transfer --from postgres://username:password@localhost/blog_develo
pment --to olive --confirm appname
Source database: blog_development on localhost:5432
Target database: HEROKU_POSTGRESQL_OLIVE_URL on afternoon-taiga-2766.herokuapp.com
pg_dump: reading schemas
pg_dump: reading user-defined tables
pg_dump: reading extensions
pg_dump: reading user-defined functions
pg_dump: reading user-defined types
pg_dump: reading procedural languages
pg_dump: reading user-defined aggregate functions
pg_dump: reading user-defined operators
pg_dump: reading user-defined operator classes
pg_dump: reading user-defined operator families
pg_dump: reading user-defined text search parsers
pg_dump: reading user-defined text search templates
pg_dump: reading user-defined text search dictionaries
pg_dump: reading user-defined text search configurations
pg_dump: reading user-defined foreign-data wrappers
pg_dump: reading user-defined foreign servers
pg_dump: reading default privileges
pg_dump: reading user-defined collations
pg_dump: reading user-defined conversions
pg_dump: reading type casts
pg_dump: reading table inheritance information
pg_dump: reading rewrite rules
pg_dump: finding extension members
pg_dump: finding inheritance relationships
pg_dump: reading column info for interesting tables
pg_dump: finding the columns and types of table "schema_migrations"
pg_dump: finding the columns and types of table "articles"
pg_dump: finding default expressions of table "articles"
pg_dump: flagging inherited columns in subtables
pg_dump: reading indexes
pg_dump: reading indexes for table "schema_migrations"
pg_dump: reading indexes for table "articles"
pg_dump: reading constraints
pg_dump: reading triggers
pg_dump: reading large objects
pg_dump: reading dependency data
pg_dump: saving encoding = WIN1252
pg_dump: saving standard_conforming_strings = on
pg_dump: saving database definition
pg_dump: [custom archiver] WARNING: ftell mismatch with expected position -- ftell used
pg_dump: [custom archiver] WARNING: ftell mismatch with expected position -- ftell used
pg_dump: dumping contents of table articles
pg_dump: [custom archiver] WARNING: ftell mismatch with expected position -- ftell used
pg_dump: dumping contents of table schema_migrations
pg_restore: [archiver] did not find magic string in file header 
```

这是我刚刚创建的一个非常简单的应用程序，用于练习使用 postgresql 数据库（它只有两个表、文章和迁移）。有没有人见过这个错误。我正在尝试使用 pg:transfer 上传到数据库。谢谢您的帮助。

**编辑**

数据库.yml

```
development:
   adapter: postgresql
   encoding: unicode
   database: blog_development
   pool: 5
   username: benjaminw
   password:

test:
   adapter: postgresql
   encoding: unicode
   database: blog_test
   pool: 5
   username: benjaminw
   password:

production:
   adapter: postgresql
   encoding: unicode
   database: blog_production
   pool: 5
   username: blog
   password: 
```

这是 Gemfile。

```
source 'https://rubygems.org'

gem 'rails', '3.2.13'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'pg'
#gem 'activerecord-postgresql-adapter'
#gem 'sequel'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
   gem 'sass-rails',   '~> 3.2.3'
   gem 'coffee-rails', '~> 3.2.1'

# See https://github.com/sstephenson/execjs#readme for more supported runtimes
# gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails' 
```

# javascript - JayData 创建具有关系的实体

> ID：16016558
> 
> 赞同：2
> 
> 时间：2013-04-15T13:34:35.833
> 
> 标签：javascript, wcf-data-services, odata, jaydata

我想在两个现有实体之间创建一个实体，比如说“连接”。到目前为止，我有这个：

```
BusinessLayer.context.DefinitionSet.attach(existingDefinition1);
BusinessLayer.context.DefinitionSet.attach(existingDefinition2);

DataEntities.context.ConnectionSet.add({
                SrcDefinition: existingDefinition1,
                DstDefinition: existingDefinition2
            }); 
```

当我运行时`BusinessLayer.context.saveChanges()`，DefinitionSet 上有一个 post-request，每次添加连接时都会添加 2 个定义。

为什么要添加 2 个定义而不是使用现有的定义，或者我该如何避免这种情况？我已经挣扎太久了。

- 编辑 -

我一直在摆弄它，它仍然给我这个问题。请注意，我最初的问题已简化为仅显示我的问题，因此我的 JsFiddle 具有更多实体的范围更广。

这是我的 JsFiddle：

[http://jsfiddle.net/ghNCx/](http://jsfiddle.net/ghNCx/)

# plone - 重氮规则对某些用户而不是其他用户执行？

> ID：16016560
> 
> 赞同：0
> 
> 时间：2013-04-15T13:34:41.740
> 
> 标签：plone, diazo

我正在微调重氮主题。我们正在开发站点的服务器包含多个 Plone 站点，在该服务器的根目录下，我有一个用户帐户，它使我能够管理访问每个子站点，而无需在每次创建新 Plone 时为自己创建用户帐户地点。

我遇到了一个问题，当我登录到我正在开发的网站（运行有问题的主题）时 - 它可以正常执行所有规则，但是如果我在这个开发网站上创建一个标准用户并登录.. 规则确实不执行。我将“登录”规则基于`#user-name`仅在用户登录站点后才出现的元素的存在，当我以标准用户或管理员帐户登录时，我可以确认该元素存在于页面上.

规则：

```
<rules css:if-content="#user-name">
 <prepend theme="/html/head" content="/html/head/link"/>
 <append theme="/html/head" content="/html/head/script"/>
 <append theme="/html/head">
  <link href="/eatonbray/++theme++eatonbray/style/editing.css" type="text/css"
   rel="stylesheet" />
 </append>
 <replace css:theme-children="#main-content" css:content="#portal-column-content"/>
 <drop css:content="#portal-column-content" attributes="class"/>
</rules> 
```

有谁知道为什么他们不为普通用户帐户执行，即使元素存在？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:25:39.227

刷新正确的站点就是这个问题的答案，上面的规则没有错。

# xml - 读取 XML 文件经典 ASP

> ID：16016565
> 
> 赞同：1
> 
> 时间：2013-04-15T13:34:52.423
> 
> 标签：xml, asp-classic, vbscript

我需要用经典的 ASP 阅读 XML 文档。

XML 文件如下所示：

```
<config>
    ...
    <applications>
        <application id="1" link="http://office.microsoft.com/en-001/word-help/what-s-new-in-word-2013-HA102809597.aspx">Word 2013</application>
        <application id="2" link="http://office.microsoft.com/en-001/excel-help/what-s-new-in-excel-2013-HA102809308.aspx">Excel 2013</application>
        ...
    </applications>
    ...
</config> 
```

我想检索所有`application`标签并将它们存储到字典中。键是应用程序名称，值是链接属性。

这是我的代码（**用我得到的非常好的回复更正**）：

```
Set xmlObj = Server.CreateObject("Microsoft.XMLDOM")
xmlObj.async = False
xmlObj.load(Server.MapPath("/SomePath/Applications.xml"))

' List of application nodes
Dim xmlApp : Set xmlApp = xmlObj.DocumentElement.SelectNodes("/config/applications/application")

' Dictionnary of applications
Dim xmlAppCollection : Set xmlAppCollection = CreateObject("Scripting.Dictionary")
' Single application node
Dim app

For Each app In xmlApp
    ' Populate the application dictionnary
    If app.Attributes.GetNamedItem("link") Is Nothing Then
        xmlAppCollection.Add app.Text, ""
    Else
        xmlAppCollection.Add app.Text, app.Attributes.GetNamedItem("link")
    End If
Next

Response.write("Count: "&xmlAppCollection.Count) 
```

但是，`xmlAppCollection.Count`返回零。

我想念什么？

* * *

**更新 1：**

现在我收到以下错误： `Object doesn't support this property or method: 'app.Value'`.

问题来自`xmlAppCollection.Add app.Value, app.Attributes.GetNamedItem("link")`

* * *

**更新 2：**

我希望这是最后一个问题。我想遍历字典：

```
' applications is an array of application names
For Each member In applications
    ' Test that the software exists in the dictionary and the link is not empty
    If xmlAppCollection.Exists(member) = True And xmlAppCollection.Item(member) <> "" Then
        Response.write("<tr><th>Software</th><td><a href='" & xmlAppCollection.Item(member) & "'>" & member & "</a></td></tr>")
    Else
        Response.write("<tr><th>Software</th><td>"&member&"</td></tr>")
    End If
Next 
```

但是我收到了错误信息：`Object doesn't support this property or method`就行了`If xmlAppCollection.Exists(member) = True And xmlAppCollection.Item(member) <> "" Then`。它似乎来自`Item` [财产](http://www.w3schools.com/asp/prop_item.asp)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T13:39:47.577

如果我是对的，不舒尔，但选择器应该以 / 开头，如果它的根，或者 // 如果在任何地方，也不需要 DocumentElement 部分。

所以尝试使用

设置 xmlApp = xmlObj.SelectNodes("//application")

或者

设置 xmlApp = xmlObj.SelectNodes("/config/applications/application")

此外，为每个循环添加一些 debog response.write，因此在开发过程中您可以查看它是否真的在做任何事情。

[参考点击这里。](https://www.w3schools.com/xml/xpath_syntax.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T14:07:12.910

我会说你应该使用`app.text`而不是`app.Value`. 见[这里](http://msdn.microsoft.com/en-us/library/windows/desktop/ms762687%28v=vs.85%29.aspx)。

# sql - 在需要时创建变量是否有助于提高性能？

> ID：16016568
> 
> 赞同：0
> 
> 时间：2013-04-15T13:35:07.037
> 
> 标签：sql, sql-server, sql-server-2008

在存储过程或函数或触发器中根据需要创建变量是否有助于性能优化？下面哪个更好或两者具有相同的性能？

> **选项1：**

```
CREATE TRIGGER [dbo].[UpdateAmount] ON [RequestDB].[dbo].[Invoice]
AFTER UPDATE
AS
BEGIN
 IF UPDATE(Service_Amount)
 BEGIN
  DECLARE @NewService_Amount float,@OldService_Amount float //Var Created When needed
  SELECT @NewService_Amount = I.Service_Amount FROM INSERTED I
  SELECT @OldService_Amount = D.Service_Amount FROM DELETED D   
  IF (@NewService_Amount <> @OldService_Amount)
  BEGIN
   SELECT @InvId = I.Id FROM INSERTED I 
   DECLARE @DiffService_Amount float //Var Created When needed
   SET @DiffService_Amount = @NewService_Amount - @OldService_Amount
   UPDATE [RequestDB].[dbo].[Request] SET Actual_Amount = @DiffService_Amount WHERE Invoice_Id = @InvId
  END
 END
END 
```

> **选项 2：**

```
CREATE TRIGGER [dbo].[UpdateAmount] ON [RequestDB].[dbo].[Invoice]
AFTER UPDATE
AS
BEGIN
 DECLARE @NewService_Amount float,@OldService_Amount float.@DiffService_Amount float //All Var Created at once on top of code
 IF UPDATE(Service_Amount)
 BEGIN
  SELECT @NewService_Amount = I.Service_Amount FROM INSERTED I /*For New UPDATE Value: INSERTED. For Old BEFORE UPDATE Valie: DELETED*/
  SELECT @OldService_Amount = D.Service_Amount FROM DELETED D   
  IF (@NewService_Amount <> @OldService_Amount)
  BEGIN
   SELECT @InvId = I.Id FROM INSERTED I 
   SET @DiffService_Amount = @NewService_Amount - @OldService_Amount
   UPDATE [RequestDB].[dbo].[Request] SET Actual_Amount = @DiffService_Amount WHERE Invoice_Id = @InvId
  END
 END
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:43:46.313

[文档](http://msdn.microsoft.com/en-us/library/ms187953.aspx)对变量并没有太具体，只是说一旦声明它就可以通过该批处理过程获得：

> 变量的范围从声明它的那一刻开始一直持续到声明它的批处理或存储过程结束。

我的*假设*是稍后声明它会更好（考虑到他们如何使用文档）——如果你不使用它，请避免声明它。**然而**，真正的答案是对其进行测试和分析。*恕我直言，在实践*中效果更好的将是真正的解决方案。

我也希望这不是过早的优化。如果您想通过声明顺序来使您的脚本运行得更快，那么您可能找错地方了。

# angularjs - 单击另一个元素或发生其他事件时设置焦点

> ID：16016570
> 
> 赞同：3
> 
> 时间：2013-04-15T13:35:11.590
> 
> 标签：angularjs

我的页面上有一个类似选项卡的视图，并且有各种需要将焦点设置到其中一个选项卡的事件。（显示/隐藏 div 很容易，因为我只使用模型变量。）导致 div 聚焦的事件是单击选项卡标题、数据加载完成和初始加载。我知道在哪里拦截所有这些事件，但我不确定如何告诉其他元素设置焦点（拦截站点都不知道其他元素，只知道模型）。

我环顾四周，但找不到很好的参考。我假设我想收听一些消息并从其他各个位置发布。

如何设置这种类型的消息传递事件？

* * *

**答案**：我在答案的基础上提出了以下指令。它结合了 div 的焦点和显示状态。

```
newsendApp.directive('showAndFocus', function() {
    return {
        link: function(scope, element, attr){ 
            scope.$on('SetArticlesListFocus',function() {
                if( scope.$eval( attr.showAndFocus ) ) {
                    $(element).focus();
                }
            })

            scope.$watch(attr.showAndFocus, function(value) {
                if( value ) {
                    $(element).show();
                    setTimeout( function() { $(element).focus(); }, 0 );
                } else {
                    $(element).hide();
                }
            })
        }
    }
}); 
```

如果发生可能需要重置焦点的事件，那么我会：`$rootScope.$broadcast( 'SetArticlesListFocus' );`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T13:45:56.247

您可以广播事件，也可以让侦听器在此类广播发生后执行操作。

您可以使用`$scope.$broadcast('changed-tab', objectSentWithBroadcast)`. 第二个参数是您可以选择发送的对象，例如您要关注的选项卡。

然后你会有一个像这样的监听器，你可以在其中选择想要的选项卡：

```
$scope.$on('changed-tab', function(e, objectSentWithBroadcast) {
   // do something here to select the tab
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:45:43.217

看看 angularjs 中提出的这个问题。

[https://github.com/angular/angular.js/issues/1277#issuecomment-16012024](https://github.com/angular/angular.js/issues/1277#issuecomment-16012024)

这是最后一个创建 ng-focus 指令的 plunk，该指令管理变量和元素焦点状态之间的双向数据绑定。

[http://plnkr.co/edit/bntEsfngnJKuneg2raD1](http://plnkr.co/edit/bntEsfngnJKuneg2raD1)

这将允许您将模型绑定到元素焦点状态，然后设置或取消设置此变量将使元素获得/失去焦点。您必须注意，如果您使用 div 等（默认情况下不可聚焦！），您需要在它们上设置 tabIndex = -1。除此之外，它应该可以正常工作并且非常适合您操纵模型的需要。

# java - 如何在 Play Framework 2.1.1 的不同环境中运行测试？

> ID：16016571
> 
> 赞同：2
> 
> 时间：2013-04-15T13:35:13.270
> 
> 标签：java, continuous-integration, playframework-2.0

我知道这个领域有很多类似的问题，我都试过了，但没有用。`play run`另外，只是命令似乎没问题

我设置了 Jenkins，它将使用 RDS 中的数据库。本地开发将使用 MySQL localhost。但我似乎无法在不同的配置文件中运行测试。它总是寻找 application.conf

这是我的 application.conf

```
 ...
db.default.driver=com.mysql.jdbc.Driver
db.default.url="jdbc:mysql://localhost/mydb"
db.default.user=root
db.default.pass=""
db.default.logStatements=true
... 

```

这是我的 ci.conf

```
 include "application.conf"
db.default.driver=com.mysql.jdbc.Driver
db.default.url="jdbc:mysql://${ENDPOINT_TO_RDS}/mydb"
db.default.user=username
db.default.pass=password
db.default.logStatements=true
... 

```

但是当我运行`play -Dconfig.file=conf/ci.conf test`我的测试时，我仍然在寻找 application.conf。我通过在 application.conf 中输入错误密码来确认这一点。

# servicestack - 如何仅获取服务的 Mini-Profiler 网页

> ID：16016572
> 
> 赞同：2
> 
> 时间：2013-04-15T13:35:17.143
> 
> 标签：servicestack, mvc-mini-profiler

我有一个 ServiceStack API，我想查看一些分析数据。我在 Web 项目中没有任何页面（MVC 或本机）。如何查看分析数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T08:28:45.470

当您从浏览器加载`ServiceStack`端点时，您会看到该数据的 HTML 视图。如果您激活了 MiniProfiler，它将显示在页面的右上角。

请在此处查看说明：[https ://github.com/ServiceStack/ServiceStack/wiki/Built-in-profiling](https://github.com/ServiceStack/ServiceStack/wiki/Built-in-profiling)

# html - 手机页面无法背景滚动

> ID：16016574
> 
> 赞同：1
> 
> 时间：2013-04-15T13:35:29.273
> 
> 标签：html, css

我的CSS：

```
background-repeat: repeat;
background-image: url('image.jpg');
background-size:100%;
background-attachment: fixed;
background-attachement: fixed; 
```

这在浏览器上运行良好，但在手机上查看时 - 在诺基亚 Lumia 和三星 S2 上使用最新的 Firefox 版本进行了测试。

我说的是在桌面视图中查看网站。是否需要不同的代码行来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:29:50.720

Only small thing you are missing, just add thi in your code.

```
background-size:100% 100%; 
```

Hope this works.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:58:35.883

我遇到过同样的问题。

我改变了它，所以背景大小是：

```
background-size:cover; 
```

在我的移动媒体查询中。假设您的背景图像不是瓷砖，这可能会给您想要的效果。

# javascript - JQuery，在表格列中查找结果

> ID：16016575
> 
> 赞同：0
> 
> 时间：2013-04-15T13:35:31.957
> 
> 标签：javascript, jquery

我试图在表格列中找到结果，如果它在下面的函数中设置，其中大部分是由其他人设置的，我只是在其中添加了一些额外内容，我的最后一个是仅通过在 thead 中设置的名称搜索 1 列但是唉，在其当前版本中什么也没有发生：|

谢谢你的帮助

用法

```
<a href='javascript:searchTable("Bob", "table",1,"Name");'>Test</a> 
```

桌子

```
 <table id="table" class="table">
       <thead>
          <tr>
            <th id="blank">&nbsp;</th>
            <th id="Name">Name</th>
            <th id="Dept">Department</th>
            <th id="JobTitle">Job Title</th>
          </tr>
       </thead>
       <tbody>
          <tr>
            <td>&nbsp;</td>
            <td>Bob</td>
            <td>IT</td>
            <td>IT Support</td>
          </tr>    
          <tr>
            <td>&nbsp;</td>
            <td>Fred</td>
            <td>Finance</td>
            <td>Finance Man</td>
          </tr>     
       </tbody>
   </table 
```

功能

```
function searchTable(inputVal, tablename,starts, column) {
    var table = $(tablename);
    table.find('tr:not(.header)').each(function (index, row) {
        if (column != '') {
            //Columnname
            var Cells = $(row).find('td').eq(column);
        } else {
            //AllCells
            var Cells = $(row).find('td');
        }
        if (Cells.length > 0) {
            var found = false;
            Cells.each(function (index, td) {
                if (starts == 1) {
                    var regExp = new RegExp((starts ? '^' : '') + inputVal, 'i');
                } else {
                    var regExp = new RegExp(inputVal, 'i');
                }

                if (regExp.test($(td).text())) {
                    found = true;
                    return false;
                }
            });
            if (found == true) $(row).show().removeClass('exclude'); else 
            $(row).hide().addClass('exclude');
            }
        });
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:52:45.813

我不确定您要控制什么，但您可以使用它来遍历行并获取单元格的值。

```
$("#table>tbody>tr").each(function(){
 var name= $(this).children("td").eq(1).html();//Name
 var department=  $(this).children("td").eq(2).html();//Department
 var jobTitle=  $(this).children("td").eq(2).html();//Job Title
  alert(name);
}); 
```

[http://jsbin.com/uvefud/1/edit](http://jsbin.com/uvefud/1/edit)

编辑：你可以试试这个 searchTable 功能。

```
function searchTable(name,tableName,row,column){

var $Tds= $("#"+tableName+">tbody>tr").eq(row-1).children("td");
 if(column=="Name"){
    $Tds.eq(1).html(name);
  }
  else if(column=="Dept"){
    $Tds.eq(2).html(name);
  }
  else if(column=="JobTitle"){
    $Tds.eq(3).html(name);
  }

} 
```

[http://jsfiddle.net/W9zpq/2/](http://jsfiddle.net/W9zpq/2/)

**用法：**这会将 tbody 的第二行的 name 列更新为 'Bob'

```
searchTable("Bob", "table",2,"Name") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:16:16.610

当您`column`作为字符串传递时，您需要获取相应的元素索引：

```
var Cells = $(row).find('td:eq(' + $('#' + column).index() + ')'); 
```

以上假设您基于 匹配`id`，如果您基于 中的文本进行匹配，则`<th>`可以使用`:contains`选择器：

```
$(row).find('td:eq(' + $(table.prop('id') + ' th:contains(' + column + ')').index() + ')'); 
```

如果您可以控制和修改函数调用，最好的办法是将元素索引直接传递给函数：

```
javascript:searchTable("Bob", "table", 1, 1); <-- Would be the "Name" column 
```

这样，您就不必执行上述任何操作。

顺便说一句，根据您的评论，您的表格选择器不正确，不确定这是否只是您的拼写错误？

```
var table = $(tablename); 
```

应该：

```
var table = $('#' + tablename); 
```

# java - 为什么 Java 没有 Repl 模式

> ID：16016576
> 
> 赞同：3
> 
> 时间：2013-04-15T13:35:39.353
> 
> 标签：java

好吧，我知道这是一个愚蠢的问题，但让我们考虑一下。

为什么我们不能有一个用于 Java 的 repl 模式或某种 shell。假设我只想`Math.max(2,3)`获得输出 3。它可以类似于 Scala repl 模式，其中默认处理类和 main 声明（它扩展为`App`）并且只评估一个表达式。

技术上：

1.  后面有一个解释器可以执行它 - 如果 scala 和 groovy 可以，那么这意味着 JVM 不是主要问题
2.  如果javac是原因，假设我们删除了所有优化并且它直接将严格逐行转换为java字节码，那么应该有一个出路。类型推断可能无法显示大量信息，但至少可以显示方法的输出。对于这种情况，可能`javac`会稍作修改
3.  例如：在调试器中，我们将断点附加到该行，然后向前执行。可以应用类似的策略

为每个 JVM 进程拥有一个默认 shell 会很酷，在运行时，可以访问或设置一些静态变量并拥有实时信息。

所有这些都被考虑过了，但为什么它没有被大多数人接受（虽然有一些开源实现）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T13:39:57.783

这或多或少正是[BeanShell](http://www.beanshell.org/manual/quickstart.html)所做的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T13:47:24.863

就像@Sean 建议的那样，您确实可以在 repl 模式下使用 bean shell。

```
java -cp ./bsh-2.0b4.jar bsh.Interpreter
BeanShell 2.0b4 - by Pat Niemeyer (pat@pat.net)
bsh % System.out.println("Hello World");
Hello World 
```

或者，`Display`Eclipse IDE 上鲜为人知的选项卡可以执行任意 java 代码并动态评估表达式。`Ctrl+U`运行表达式并`Ctrl+Shift+I`评估它们。它不是repl模式，但很接近。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-15T13:46:32.757

Eclipse 中的 Display 视图在这方面提供了许多方便的行为，包括命令完成、访问正在运行的应用程序堆栈以及通过 System.out 进行控制台输出。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-07T13:06:11.690

您可以尝试[http://www.javarepl.com/或来自](http://www.javarepl.com/)[https://github.com/albertlatacz/java-repl](https://github.com/albertlatacz/java-repl)的控制台版本

# gnuplot - （gnu）绘制具有易失性源的多个系列

> ID：16016577
> 
> 赞同：2
> 
> 时间：2013-04-15T13:35:40.583
> 
> 标签：gnuplot

我有一个生成一些数据系列的程序，假设它们的格式如下

```
t1 x1 y1 z1
t2 x2 y2 z2
t3 x3 y3 z3
    ...
tN xN yN zN 
```

我通常会用

```
plot "data.data" u 1:2, "" u 1:3, "" u 1:4 
```

我想在加载数据的时候直接调用程序

```
plot "< source_programs" ... 
```

问题是，程序产生随机数据，所以我尝试使用`volatile`关键字，但程序为每个数据系列重新加载。

可以用gnuplot做到这一点吗？也许以某种方式缓冲数据而无需再次调用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T10:34:46.450

我认为“缓冲”数据的唯一方法是在临时文件中：

```
!bash source_programs > temp.dat
plot "temp.dat" u 1:2, "" u 1:3, "" u 1:4
!rm temp.dat 
```

# node.js - node.js 中异步列表处理的模式

> ID：16016583
> 
> 赞同：0
> 
> 时间：2013-04-15T13:35:55.123
> 
> 标签：node.js, design-patterns, asynchronous

我有一个应用程序，其中数据库查询返回许多行（通常少于 100 行）。对于每一行，我需要进行 http 调用以获取补充数据。我想触发所有请求，然后当最后一个回调完成时，继续渲染结果页面。

到目前为止，我看过的类似问题的答案要么是通过在请求 #1 的回调中发出请求 #2 来链接请求（优点：简单，避免将服务器埋在多个请求中），或者通过触发所有没有跟踪是否所有请求都已完成的请求（在回调更新 UI 的浏览器中运行良好）。

我目前的计划是保留一个请求计数器，并让回调递减计数器；如果它达到零，我可以调用渲染函数。我可能还需要处理响应速度快于发出请求的情况（不太可能，但可能是边缘情况）。

这类问题还有其他有用的模式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:13:06.570

使用[异步](https://github.com/caolan/async)代码时大致如下所示：

```
var async = require('async');

results = [];

var queue = async.queue(function(row, callback) {
    http.fetchResultForRow(row, function(data){
        result.push(data);
        callback();      
    });
}, 1);

queue.drain = function() {
    console.log("All results loaded");
    renderEverything(results);
}

database.fetch(function(rows) {
    for (var i=0; i < rows.length; i++) {
        queue.push(rows[i]);
    }
}); 
```

如果顺序无关紧要，您也可以使用：[map](https://github.com/caolan/async/#map)

看看 async 的文档，有很多有用的模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:20:44.583

`when`您可以使用该库通过 Promise 很好地实现这一点。虽然如果你想对获取额外信息的调用进行速率限制，你需要比我认为的 TheHippo 的异步方法做更多的工作。

这是一个例子：

```
when = require('when')

// This is the function that gets the extra info.
// I've added a setTimeout to show how it is async.    
function get_extra_info_for_row(x, callback) {
   setTimeout( function(){ return callback(null, x+10); }, 1 );
};

rows = [1,2,3,4,5];

row_promises = rows.map(
   function(x) {
      var defered = when.defer()
      get_extra_info_for_row(x, function(err,extra_info) {
         if(err) return defered.reject(err);
         defered.resolve([x,extra_info]);
      });
      return defered.promise;
   })

when.all( row_promises )
   .then(
      function(augmented_rows) { console.log( augmented_rows ); },
      function(err) { console.log("Error", err ); }
      ); 
```

这输出

```
[ [ 1, 11 ], [ 2, 12 ], [ 3, 13 ], [ 4, 14 ], [ 5, 15 ] ] 
```

# java - 如何在Java中将多个复选框值插入单列数据库

> ID：16016586
> 
> 赞同：1
> 
> 时间：2013-04-15T13:35:57.853
> 
> 标签：java, database, checkbox

当然，我如何将多个选中的复选框插入到 Java 中的数据库中。我添加了“，”，但它只存储了第一个选中的复选框。

我该如何解决这个问题？

这是我当前的代码：

```
String haspaper = null;

if(yes3.isSelected() == true){
    if(checkcontract.isSelected()==true){haspaper=checkcontract.getText()+",";}
    else if(checkcivile.isSelected()==true){haspaper=checkcivile.getText()+" , ";}
    else if(checkcontartpar.isSelected()==true){haspaper=checkcontartpar.getText()+" ,";}
    else {haspaper=mahiyapaper.getText()+" ,";}
}else{haspaper=no3.getText();} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:43:52.130

您正在为每个 if 条件赋值给**haspaper**变量。根据您的逻辑附加值，而不是 if else put if block Like ：

```
haspaper += value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T13:44:16.333

您可以在 servlet/jsp 中捕获检查的值，并将其作为对象存储在 pojo/model 类中，最后使用 jdbc/hibernate 存储到数据库中...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T14:00:16.243

更正您的代码：

```
String haspaper="" ;
    if(yes3.isSelected()){
        if(checkcontract.isSelected()){
             haspaper = haspaper + checkcontract.getText()+",";
        }
        else if(checkcivile.isSelected()){
             haspaper = haspaper + checkcivile.getText()+" , ";
        }
        else if(checkcontartpar.isSelected()){
             haspaper = haspaper + checkcontartpar.getText()+" ,";
        }
        else {
             haspaper = haspaper + mahiyapaper.getText()+" ,";
        }
    }else{
         haspaper=no3.getText();
    } 
```

# cakephp - 致命错误：在 ..\cakephp\2.3\lib\Cake\bootstrap.php 中找不到类“配置”

> ID：16016591
> 
> 赞同：1
> 
> 时间：2013-04-15T13:36:10.073
> 
> 标签：cakephp

**错误信息：**

```
Fatal error: Class 'Configure' not found in C:\wamp\cakephp\2.3\lib\Cake\bootstrap.php on line 163 
```

我已经看到了关于这个问题的其他答案（[比如这个](https://cakephp.lighthouseapp.com/projects/42648/tickets/2764-fatal-error-class-configure-not-found-in-varwwwmypostmaillibcakebootstrapphp-on-line-142)），都暗示要确保我没有丢失任何文件，但是我已经从[通过 Github 重新下载的 CakePHP v.2.3](https://github.com/cakephp/cakephp)添加了所有文件和文件夹。

谁能解释为什么我仍然会遇到这样的错误？

关键代码行如下所示：

**webroot/index.php**

```
if (!defined('CAKE_CORE_INCLUDE_PATH')) {
    define('CAKE_CORE_INCLUDE_PATH', '../../../cakephp/2.3/lib');
}

if (!defined('CORE_PATH')) {
    if (function_exists('ini_set') && ini_set('include_path', CAKE_CORE_INCLUDE_PATH . PATH_SEPARATOR . ROOT . DS . APP_DIR . DS . PATH_SEPARATOR . ini_get('include_path'))) {
        [...]
        define('CORE_PATH', null);
    } else {
        [...]
        define('CORE_PATH', CAKE_CORE_INCLUDE_PATH . DS);
    }
} 
```

**lib/Cake/bootstrap.php**

```
App::uses('Configure', 'Core');

Configure::bootstrap(isset($boot) ? $boot : true); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T13:50:12.960

您似乎有旧版本的 index.php

使用 github 上现有的一个。

它包含

```
if (!defined('CAKE_CORE_INCLUDE_PATH')) {} 
```

而不是你的

```
if (!defined('CORE_PATH')) {} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T23:18:17.993

DocumentRoot 指向哪里？

如果您加载（例如）/index.php，那么您的 include_path 可能不正确并且一个目录太深。改用：

```
if (!defined('CAKE_CORE_INCLUDE_PATH')) {
    define('CAKE_CORE_INCLUDE_PATH', '../../cakephp/2.3/lib');
} 
```

# javascript - 滚动退出时在 Chrome 中调整大小的 JS 滚动

> ID：16016593
> 
> 赞同：0
> 
> 时间：2013-04-15T13:36:12.667
> 
> 标签：javascript, html, rollover

我有一个适用于其他浏览器的 javascript 翻转，一旦我使用 Chrome 翻转它，在退出时它会调整到一个荒谬的小尺寸。

有任何想法吗？

```
<script type="text/javascript">
$('<img />',{ src: 'images/image.gif'});
$(function() {
    $("#logohover").hover(
        function() {
            $(this).attr("src", "images/image.gif");
        },
        function() {
            $(this).attr("src", "images/image.svg");
        }                         
    );                  
}); 
```

```
<img id="logohover" src="images/image.svg" width="50" height="50" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:13:29.370

我相信您已经[在 Webkit 中发现了这个错误](https://bugs.webkit.org/show_bug.cgi?id=82487)。现在基于 Webkit 的浏览器还不能 100% 支持缩放 SVG。

您最好的选择是在标签本身中设置`width`and`height`属性（可能还有[and](https://blueprints.launchpad.net/inkscape/+spec/allow-browser-resizing)，我不知道这是否有必要），然后使用百分比缩放标签。`<svg>`[`viewbox``preserveAspectRatio`](https://blueprints.launchpad.net/inkscape/+spec/allow-browser-resizing)`<img>`

在 SVG 文件中：

```
<svg
    ...
    width="50"
    height="50"
    preserveAspectRatio="xMinYMin meet"
    viewBox="0 0 50 50"
    ...
> 
```

在 HTML 中：

```
<img id="logohover" src="images/image.svg" width="100%" height="100%" /> 
```

# c# - 全屏 WPF 程序中的 Metro 风格 Appbar

> ID：16016594
> 
> 赞同：7
> 
> 时间：2013-04-15T13:36:16.667
> 
> 标签：c#, wpf, windows, microsoft-metro, appbar

我目前正在开发一个桌面 C# WPF 应用程序，目标是让它看起来和感觉像一个`"real"`Windows 应用商店应用程序。

我想添加一个`appbar`应该在用户从底部向上滑动时显示的内容。要在普通应用程序中执行此操作，您只需将手指放在屏幕区域之外，然后向上滑动即可。但是，如果我在全屏 WPF 程序中这样做，我不会收到任何事件`TouchDown`或`TouchMove`事件 - 可能是因为在进入实际屏幕区域时手指已经向下。我也尝试过使用 Manipulation 框架，但结果相同。即使我使用`WndProc`或其他挂钩直接挂接到消息队列中，我也根本没有收到任何事件。

有趣的是，我可以看到`"touch cursor"`屏幕周围的移动，因此至少通知了底层框架中的某些内容。

有谁知道如何做到这一点？

ps 由于硬件连接问题，我不能只使用 Windows 商店应用程序；-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-06-08T18:49:34.140

您将需要跟踪光标位置坐标，并查看光标（滑动）何时从屏幕边缘开始并移入。当触发时（使用您想要的任何触发器，最有可能覆盖的距离）您可以启动你的应用栏。

在 MSDN 上有一个类似的问题： [https ://social.msdn.microsoft.com/Forums/vstudio/en-US/d85dcde7-839a-44d3-9f2a-8b47b947576c/swipe-gesture-and-page-change?forum =wpf](https://social.msdn.microsoft.com/Forums/vstudio/en-US/d85dcde7-839a-44d3-9f2a-8b47b947576c/swipe-gesture-and-page-change?forum=wpf)

# android - ASyncTask execute() 未调用 onPostExecute

> ID：16016597
> 
> 赞同：1
> 
> 时间：2013-04-15T13:36:32.710
> 
> 标签：android, android-asynctask

我无法解释为什么我的代码中没有调用 onPostExecute。我之前已经成功地将几乎这个确切的代码用于不同的应用程序。它打印'onPreExecute'和之前从doInBackground获取JSON的成功结果，`return result;`但是onPostExecute不打印任何东西 - 无论是否使用超级调用 - 而且不会将我的字符串返回到UI线程。有任何想法吗？

```
public class PrivateLoadFromServer extends AsyncTask<String, Integer, String> {

    InputStream is = null;
    String result = null;
    String error_text="";
    JSONObject j = null;
    String url;
    SQLiteOpenHelper helper;
    CustomActivity activity;
    private Context context;
    private ProgressDialog dialog;
    private int count;
    String employee;
    String text;

    public PrivateLoadFromServer(CustomActivity activity,String employee,String url){
        this.url=url;
        this.employee=employee;
        this.activity=activity;
    }

    @Override
    protected void onPreExecute() {
        system.out.println("onPreExecute");

    }

    @Override
    protected void onPostExecute(String result) {
        super.onPostExecute(result);
        System.out.println("onPostExecute");

        activity.setJSONResult(result);
        /*
        if(result!=null){
            System.out.println("Task reported successful");
            taskHandler.taskSuccessful(this.result);
            activity.setJSONResult(this.result);
        } else {
            taskHandler.taskFailed();
        }
        */
        //return;
    }

    @Override
    protected String doInBackground(String... params) {
        System.out.println("Running aSyncTask");

            // Successful code to get JSON result string from server omitted.

        System.out.println("Raw at doInBackground: " + result);
    return result; 
```

编辑：最初应该发布这个，我把它称为 CustomActivity 中的内部类，如下所示：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_login);
    helper=new DBHelper(this);
    loadBasicData();

}

 private void loadBasicData() {

    // If you can encode all of these into one JSON Object, cool.

    String url="*****" //Omitted URL.
    String employee=null;

    PrivateLoadFromServer syncTask = new PrivateLoadFromServer(this,employee,url);

    syncTask.execute();

    try {
        syncTask.get(15000, TimeUnit.MILLISECONDS);
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (ExecutionException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (TimeoutException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    System.out.println("JSONResult at Activity:"+jsonResult); // jsonResult is null

    }
}

    public void setJSONResult(String result){
    System.out.println("setJSONResult"+result);
    this.jsonResult=result; // jsonResult is a field in the Activity.
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-19T11:13:02.543

onPostExecute() 在主 UI 线程上调用。如果它没有被调用，则意味着您的 UI 线程被阻止执行其他操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:45:48.153

检查您是否在代码中某处显式取消 AsyncTask，然后才能发布执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T14:14:11.427

因为您正在调用 get，所以该方法也会返回 JSON 结果（请参阅[AsyncTask.java](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/os/AsyncTask.java)的源代码。因此您可以直接在输出上调用您的方法。

```
try {
    setJSONResult(syncTask.get(15000, TimeUnit.MILLISECONDS));
} catch (InterruptedException e) {
    e.printStackTrace();
} catch (ExecutionException e) {
    e.printStackTrace();
} catch (TimeoutException e) {
    e.printStackTrace();
} 
```

# android - 电话状态监听器被多次调用

> ID：16016603
> 
> 赞同：8
> 
> 时间：2013-04-15T13:36:42.527
> 
> 标签：android

嗨，我想将传入的号码记录到数据库中。我正在使用广播接收器来收听电话并使用电话状态监听器。这是我的代码

ThePhoneStateListener.java

```
package com.example.netlogger.Receiver;
import android.content.Context;
import android.telephony.PhoneStateListener;
import android.telephony.TelephonyManager;
import android.util.Log;

public class ThePhoneStateListener extends PhoneStateListener {
    Context context;
    public ThePhoneStateListener(Context context) {
        this.context = context;
    }
    @Override
    public void onCallStateChanged(int state, String incomingNumber) {
        super.onCallStateChanged(state, incomingNumber);
        if (state == TelephonyManager.CALL_STATE_OFFHOOK) {
            Log.d("TAGG", "Insert: " + incomingNumber);
        }

    }
} 
```

CallActionReceiver.java

```
package com.example.netlogger.Receiver;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.telephony.TelephonyManager;
import android.util.Log;
import android.widget.Toast;

public class CallActionsReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context arg0, Intent arg1) {
        TelephonyManager manager = (TelephonyManager) arg0
                .getSystemService(arg0.TELEPHONY_SERVICE);
        manager.listen(new ThePhoneStateListener(arg0),
                android.telephony.PhoneStateListener.LISTEN_CALL_STATE);
    }
} 
```

清单文件.xml

```
<receiver android:name="com.example.netlogger.Receiver.CallActionsReceiver">
    <intent-filter android:priority="2147483647">
        <action android:name="android.intent.action.PHONE_STATE"/>
    </intent-filter>
    <intent-filter android:priority="2147483647">
        <action android:name="android.intent.action.NEW_OUTGOING_CALL"/>
    </intent-filter>
</receiver> 
```

在`ThePhoneStateListener`onCallStateChanged() 为什么它被多次调用。我只想将传入的号码插入数据库一次。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-16T07:22:10.560

一些方法，我解决了。问题是，当我的广播接收器的 onReceive() 被调用时，每次我试图收听一个新的 PhoneStateListener。你只需要做一次。就像跟随

```
package com.example.netlogger.Receiver;

import java.util.Date;

import com.example.netlogger.util.LocalDatabase;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.preference.PreferenceManager;
import android.telephony.TelephonyManager;
import android.util.Log;
import android.widget.Toast;

public class CallActionsReceiver extends BroadcastReceiver {
    static ThePhoneStateListener phoneStateListener;

    @Override
    public void onReceive(Context arg0, Intent arg1) {
        TelephonyManager manager = (TelephonyManager) arg0
                .getSystemService(arg0.TELEPHONY_SERVICE);      
        if (phoneStateListener == null) {
            phoneStateListener = new ThePhoneStateListener(arg0);
            manager.listen(phoneStateListener,
                    android.telephony.PhoneStateListener.LISTEN_CALL_STATE);
        }

    }

} 
```

问题解决了。干杯

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-05T10:39:24.027

感谢您的解决方案，但是当我实现`PhoneStateListener`班级的单例对象时，它对我有用。`onReceive`在我的广播接收器中：

```
@Override
public void onReceive(final Context context, Intent intent) {
    telephony = (TelephonyManager)context.getSystemService(Context.TELEPHONY_SERVICE);
    if (phoneListener == null) {
        phoneListener = CallStateListener.getCallStateInstance(context);CallStateListener(context);
        telephony.listen(phoneListener, android.telephony.PhoneStateListener.LISTEN_CALL_STATE);
    }
} 
```

这是我的 PhoneStateListener 类中的方法：

```
public static CallStateListener getCallStateInstance(Context ctx) {
    if (callStateInstance == null)
        callStateInstance = new CallStateListener(ctx);

    return callStateInstance;
} 
```

希望它对某人有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-07T16:02:26.980

我只是创建静态变量并检查

```
 public class IncomingCallReceiver extends BroadcastReceiver
{
    private static String canEndCall;

    @Override
    public void onReceive(final Context context, Intent intent)
    {
        if (canEndCall == null)
        {
            TelephonyManager tmgr = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);
            tmgr.listen(new PhoneStateListener()
            {
                @Override
                public void onCallStateChanged(int state, String incomingNumber)
                {

                }
            }, PhoneStateListener.LISTEN_CALL_STATE);
            canEndCall = "...";
        }
    } 
```

# maven - 如何在 maven 2 中更快地构建多模块项目？

> ID：16016604
> 
> 赞同：1
> 
> 时间：2013-04-15T13:36:42.917
> 
> 标签：maven, build

我有一个多模块 Maven 项目，其中有 7 个模块。每次我修改其中一个模块中的代码并运行 mvn clean install 时，都需要一些时间，我认为可能有一种方法可以减少构建时间，因为我只更改了一小部分代码，而且我认为它的影响有限区域。所以我猜不是运行“mvn clean install”，而是有一个更好的命令选项。

我正在使用 Maven 2.x。

有更好的想法吗？

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T16:15:27.383

“干净”目标会删除所有包含已编译类的目标文件夹，作为修改-编译-测试周期的一部分，您可能每天运行多次，因此没有必要运行该目标。在您的情况下，大部分时间可能都花在重新编译所有 Java 文件上，因为在“清理”目标期间类文件已被删除。所以我会在测试本地更改时使用“mvn install”，并且只定期使用“mvn clean install”，例如当您让其他开发人员更改集成时，或者在发布前立即进行测试时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:45:42.837

我建议使用[以下内容](http://www.sonatype.com/books/mvnref-book/reference/running-sect-options.html)：

```
mvn -pl TheModuleYouHaveChanged -amd install 
```

或者也许是

```
mvn -pl TheModuleYouHaveChanged -amd package 
```

足够的。

# jquery - tablesort jquery 插件在谷歌浏览器中工作吗

> ID：16016605
> 
> 赞同：0
> 
> 时间：2013-04-15T13:36:44.030
> 
> 标签：jquery, jquery-plugins, tablesorter

有没有办法我可以添加一个 jquery tablesorter 插件，以便我使用 google chrome 浏览器对我的表进行排序，这是我在头文件中的代码

```
<script type="text/javascript" src="jquery/jquery/jquery-latest.js"></script> 
<script type="text/javascript" src="jquery/jquery/jquery.tablesorter.js"></script> 

<script type="text/javascript">

$(document).ready(function() 
    { 
        $("#soop").tablesorter(); 
    } 
); 

</script> 

echo "<table id='soop' border='1' cellpadding='10' >";

    echo " <thead> 
    <tr>
    <th>Id</th>
    <th>First Name</th>
    <th>Last Name</th>
    <th>Address</th>
    <th>Phone Number</th>
</tr> </thead>";

    echo "<tbody>";
    while($row = mysql_fetch_array( $result ))
    {

    echo " <tr>";
    echo '<td><b>' . $row['id'] . '</b></td>';
    echo '<td><b>' . $row['first_name'] . '</b></td>';
    echo '<td><b>' . $row['last_name'] . '</b></td>';
    echo '<td><b>' . $row['address'] . '</b></td>';
    echo '<td><b>' . $row['phone_number'] . '</b></td>';

    echo " </tr>";

    }
     echo "</tbody>"; 
```

有没有办法让 tablesort 插件在谷歌浏览器中工作，或者只是我犯了错误

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-06-25T18:19:48.157

您需要为表提供类名并包含插件中给出的样式表。

```
<script type="text/javascript" src="jquery/jquery-latest.js"></script> 
<script type="text/javascript" src="jquery/jquery.tablesorter.js"></script> 
<link rel="stylesheet" href="styles/style.css" type="text/css" />

<script type="text/javascript">

$(document).ready(function() 
{ 
    $("#soop").tablesorter(); 
} 
); 

</script> 

<?php
echo "<table id='soop' class='tablesorter' border='1' cellpadding='10' >"; 
```

希望这会有所帮助... :)

# django - 如何在 Django 中显示来自特定组的帖子？

> ID：16016608
> 
> 赞同：0
> 
> 时间：2013-04-15T13:36:47.027
> 
> 标签：django

在我的 Django 设置中，我有一个名为“作者”的组。我想在首页显示他们的帖子，按日期排序。我可以为组找到的所有模板示例都涉及检查当前登录用户的组成员身份，这不是我想要的。我只想根据全局组成员身份进行聚合，而不是根据用户的组成员身份进行身份验证或显示。这似乎应该是一种简单而常见的方法，但我很难找到一种方法来做到这一点（而且我也是一个新手，我确定这对我没有帮助）。

欢迎提出建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T13:41:41.587

你可以这样做：

```
from django.contrib.auth.models import Group

group = Group.objects.get(name='authors')
authors = group.user_set.all() 
```

现在，您有了作者列表，您可以查询这些用户的帖子列表并将其显示在主页上。

# ios - 在 NSUserDefaults 中保存凭据会导致应用被拒绝？

> ID：16016609
> 
> 赞同：1
> 
> 时间：2013-04-15T13:36:50.660
> 
> 标签：ios, objective-c, appstore-approval

我是iOS开发的新手，我习惯于`NSUserDefaults`保存用户的用户名和密码。

我现在知道我应该使用 Keychain 而不是`NSUserDefaults`为此，但我没有太多时间，需要尽快发布应用程序。

我只想知道我的应用是否有可能因此被拒绝？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T13:44:06.693

几乎没有理由不使用钥匙串，有许多包装库使其非常易于使用。Apple 非常保护用户的私人信息，因此绝对可以拒绝您。

*   [`SFSHKeychainUtils`](http://github.com/ldandersen/scifihifi-iphone/tree/master/security/)是一个很好的，这里有一个教程： http: [//gorgando.com/blog/tag/sfhfkeychainutils](http://gorgando.com/blog/tag/sfhfkeychainutils)。

*   [`Lockbox`](https://github.com/granoff/Lockbox)是另一个很好的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-27T18:45:02.177

This may not be the best thing to do, but it answers your question: **Apple won't reject the app.**

I have published some apps that use NSUserDefaults to store user credentials. As you told, sometimes it is simply faster.

Just analyse how sensitive your app data should be. Most times the app won't need THAT MUCH security.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-15T13:45:16.433

我不建议这样做。github上有一些简单的钥匙串包装器：

[https://github.com/kishikawakatsumi/UICKeyChainStore](https://github.com/kishikawakatsumi/UICKeyChainStore)
[https://github.com/nicklockwood/FXKeychain](https://github.com/nicklockwood/FXKeychain)

用上述之一替换 NSUserDefaults 需要 5 分钟。

# android - 我怎样才能用通用图像加载器下载图像

> ID：16016619
> 
> 赞同：11
> 
> 时间：2013-04-15T13:37:14.720
> 
> 标签：android, universal-image-loader

据我所知，universal-image-loader 提供了两种显示图像的方法。imageLoader.loadImage 和 imageLoader.displayImage。但是这两种方法必须绑定到 UI 元素才能显示。我可以只下载文件以在线程中缓存（以供将来显示）。我现在不需要显示这些图像。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-12-23T18:15:04.103

您仍然可以使用`UIL`. 根据`displayOptions`下面使用的图像将被缓存。

请参阅此处 - [https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)

// 加载图片，解码为Bitmap，返回Bitmap回调

```
imageLoader.loadImage(imageUri, displayOptions, new SimpleImageLoadingListener() {
    @Override
    public void onLoadingComplete(String imageUri, View view, Bitmap loadedImage) {
        // Do whatever you want with Bitmap
    }
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-15T15:30:46.433

> 我可以只下载文件以在线程中缓存（以供将来显示）。我现在不需要显示这些图像。

您可以使用 Executor 或创建线程来下载文件。您不需要使用通用图像加载器。

[http://developer.android.com/reference/java/util/concurrent/Executor.html](http://developer.android.com/reference/java/util/concurrent/Executor.html)。

您还可以使用 DownloadManager 并将文件保存在 sdcard 中。您可以检索相同的内容以供以后使用。

[http://oodlestechnologies.com/blogs/Downloading-and-Retrieving-Files-on-SD-card-in-Android-using-Android-SDK-in-Eclipse](http://oodlestechnologies.com/blogs/Downloading-and-Retrieving-Files-on-SD-card-in-Android-using-Android-SDK-in-Eclipse)

要缓存位图，您可以将图像写入 sdcard 中的文件夹。

缓存位图

[http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html](http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html)。

您将位图缓存在内存或磁盘中。该链接包含有关该主题的详细信息。

您基本上使用 UIL ofr 在 listview 或 grdiview 中显示图像。要在列表视图或网格视图中使用 UIL，您可以执行以下操作。

[https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)。它基于惰性列表（工作原理相同）。但它还有很多其他配置。如果下载失败，您可以显示错误图像。可以显示带圆角的图像。可以缓存在磁盘或内存上。可以压缩图像。

在您的自定义适配器构造函数中

```
 File cacheDir = StorageUtils.getOwnCacheDirectory(a, "your folder");

 // Get singletone instance of ImageLoader
 imageLoader = ImageLoader.getInstance();
 // Create configuration for ImageLoader (all options are optional)
 ImageLoaderConfiguration config = new ImageLoaderConfiguration.Builder(a)
      // You can pass your own memory cache implementation
     .discCache(new UnlimitedDiscCache(cacheDir)) // You can pass your own disc cache implementation
     .discCacheFileNameGenerator(new HashCodeFileNameGenerator())
     .enableLogging()
     .build();
 // Initialize ImageLoader with created configuration. Do it once.
 imageLoader.init(config);
 options = new DisplayImageOptions.Builder()
 .showStubImage(R.drawable.stub_id)//display stub image
 .cacheInMemory()
 .cacheOnDisc()
 .displayer(new RoundedBitmapDisplayer(20))
 .build(); 
```

在你的 getView()

```
 ImageView image=(ImageView)vi.findViewById(R.id.imageview); 
 imageLoader.displayImage(imageurl, image,options);//provide imageurl, imageview and options 
```

您可以配置其他选项以满足您的需求。

与延迟加载/通用图像加载器一起，您可以查看持有者以实现平滑滚动和性能。[http://developer.android.com/training/improving-layouts/smooth-scrolling.html](http://developer.android.com/training/improving-layouts/smooth-scrolling.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-15T13:42:00.853

Theres `loadImage(String uri, ImageLoadingListener listener)`，我认为如果你不需要的话，你可以用 null 来调用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-28T09:50:09.303

添加到@Robin Srivastava 的答案：

您还必须实例化`ImageLoader`上下文，例如： `imageLoader = ImageLoader.getInstance();`在您可以使用该`loadImage`方法之前。该`displayOptions`参数也是可选的，因此您可以在需要时排除它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-22T07:50:33.837

使用[UIL](https://github.com/nostra13/Android-Universal-Image-Loader)，我们可以在图像完全加载时保存图像。

加载完成后使用 ImageLoading 监听器，监听器有一个方法调用`onLoadingComplete()`我们可以获取图像的位图，我们可以使用以下方法存储此位图`saveImage()`

```
Bitmap imageBitmap=null;
ImageLoader.getInstance().displayImage(String.valueOf(mediaPath), imageView, options, new ImageLoadingListener() {
                @Override
                public void onLoadingStarted(String imageUri, View view) {
                    progressBar.setVisibility(View.VISIBLE);
                }

                @Override
                public void onLoadingFailed(String imageUri, View view, FailReason failReason) {
                    String message = null;
                    switch (failReason.getType()) {
                        case UNKNOWN:
                            message = "Unknown error";
                            break;
                        case IO_ERROR:
                            message = "I/O error";
                            break;
                        case NETWORK_DENIED:
                            message = "Network Denied";
                            break;
                        case OUT_OF_MEMORY:
                            message = "Out of memory";
                            break;
                        case DECODING_ERROR:
                            message = "decoding error";
                            break;
                    }
                    Toast.makeText(FullScreenActivity.this, message, Toast.LENGTH_SHORT).show();
                    progressBar.setVisibility(View.GONE);

                }

                @Override
                public void onLoadingComplete(String imageUri, View view, Bitmap loadedImage) {
                    //we can get imageBitmap here when loading is completed
                    imageBitmap=loadedImage;
                    progressBar.setVisibility(View.GONE);
                }

                @Override
                public void onLoadingCancelled(String imageUri, View view) {

                }
            }); 
```

使用此方法将文件保存在本地存储中

```
 public void saveImage(){
        if(imageBitmap!=null){
            File dir = new File( Environment.getExternalStorageDirectory().getAbsolutePath() + “/Images/");
            if (!dir.exists()) {
                if (dir.mkdirs()) {
                    Log.i(TAG, "Directory created");
                }
            }
            //put your image file name here
            File mypath=new File(dir,"yourImageName.png");
            FileOutputStream fos = null;
            try {
                fos = new FileOutputStream(mypath);
                // Use the compress method on the BitMap object to write image to the OutputStream
                if(imageBitmap.compress(Bitmap.CompressFormat.PNG, 100, fos)){
                    showToast("Successfully downloaded");
                }
                fos.close();
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }

Toast toast=null;
private void showToast(String message) {
        if (toast != null) toast.cancel();
        toast = Toast.makeText(FullScreenActivity.this, message, Toast.LENGTH_SHORT);
        toast.show();
} 
```

# html - 粘页脚问题..这是另一个

> ID：16016622
> 
> 赞同：1
> 
> 时间：2013-04-15T13:37:22.310
> 
> 标签：html, css, sticky-footer

首先，为看似非常常见的问题道歉，看看类似问题的数量，你对另一个问题感到恼火是可以原谅的，但不管我读过的所有其他问题（并试图实施），还有很多在谷歌上找到的其他链接，我仍在努力解决我的问题，所以很抱歉，但是这里..

当主要内容比浏览器窗口长时，我的页脚很好，但是当内容很少时，而不是粘在浏览器窗口的底部，而是粘在主要内容的底部，留下一个可怕的空白页脚下方的空间。

我已经使用我的代码的精简版本创建了一个简单的（ish）小提琴。[这里](http://jsfiddle.net/Z67PM/)是那些能够在没有“摆弄”的情况下看到问题的代码。

```
<body>
    <!-- Header -->
    <div id="header-wrapper">
        <header class="5grid-layout" id="site-header">
            <div class="row">
                <div class="12u">
                    <div id="logo">
                            <h1 class="mobileUI-site-name">HEADER</h1>

                    </div>
                </div>
            </div>
        </header>
    </div>
    <!-- Main -->
    <div id="main-wrapper" class="subpage">
        <div class="5grid-layout">
            <div class="row">
                <div class="12u">MAIN CONTENT </div>
                          </div>
        </div>
    </div>

    <!-- Footer -->
    <div id="footer-wrapper">
        <footer class="5grid-layout" id="site-footer">
            <div class="row">
                <div class="12u">PROBLEM FOOTER</div>
            </div>
        </footer>
    </div>
</body> 
```

这是CSS ..

```
#header-wrapper {
    background: #12ff00;
    height: 110px;
    position: relative;
    padding: 0.0em 0 1em 0;
}
#main-wrapper {
    border-top: 3px solid #662d91;
    border-bottom: 3px solid #662d91;
    background: #ff5a00;
    position: relative;
    padding: 1em 0 2em 0;

}
#footer-wrapper {
    background: #ff00fc;
    position: relative;
    padding: 1em 0 1em 0;
    height: 100px;

} 
```

当然，为了这个演示，上面的很多 Div 都不是必需的，但我把它们留了下来，以防万一它是导致问题的其中一个。我还是新手，所以我真的不知道。

所以基本上，我到底如何让那个页脚表现出来，以前基于其他 Stack Overflow 答案的尝试让我要么没有页脚，要么页脚位于屏幕中央，无论有很多还是很少内容。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T14:57:45.010

我以前回答过这个问题

[点击这里](https://stackoverflow.com/a/12580337/1453921)

或者查看这个[JSFiddle](http://jsfiddle.net/wWBPJ/1/)以获得粘性页脚的工作示例。

HTML

```
<div class="wrapper">
   <div class="header"></div>     
</div>      
<div class="footer"></div> 
```

CSS

```
* {margin: 0;}
html, body {height: 100%;}

.wrapper {
min-height: 100%;
height: auto !important;
height: 100%;
margin: 0 auto -200px; /* the bottom margin is the negative value of the footer's height */}

.footer { height: 200px;background-color:#000;} 
```

这个想法是底部边距是页脚高度的负值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T13:46:55.393

你有没有尝试过：

```
html, body {
   height: 100%;
   min-height: 100%;
}
#main-wrapper {
   height:100%;
} 
```

这是一个有效的**[DEMO1](http://jsfiddle.net/Z67PM/9/)**

### 更新：

我在您的代码中更改了一些内容，但现在可以正常工作了！

以下是更改：

*   `#container`为标题和主 div添加了一个。
*   我已将页脚`padding`从更改`em`为`px`，因为我需要精确的高度。
*   我给了`main-wrapper`'s 背景`#container`
*   和`border-bottom`to 页脚为`border-top`

**[演示2](http://jsfiddle.net/Z67PM/43/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T14:06:00.173

我通常这样做的方式是使用 [http://www.cssstickyfooter.com/using-sticky-footer-code.html](http://www.cssstickyfooter.com/using-sticky-footer-code.html)

如果可以，请尽量接近这一点，它与旧版浏览器兼容。

我没有找到更好的替代品，并且得到了很好的解释

# iphone - 页面上的 Facebook 图像上传在模拟器中正常工作但在设备中不正常

> ID：16016623
> 
> 赞同：4
> 
> 时间：2013-04-15T13:37:22.350
> 
> 标签：iphone, ios, ipad, facebook-graph-api

当我在模拟器中运行相同的代码时，我得到了图像发布的成功响应：

```
 {
        id = 248572435289479;
        "post_id" = "244759709004085_248572441956145";
    } 
```

当我在设备中运行相同的代码时，我得到：

```
Error Domain=facebookErrDomain Code=10000 "The operation couldn’t be completed. (facebookErrDomain error 10000.)" UserInfo=0x208a8dd0 {error={
    code = 1;
    message = "(#1) An unknown error occurred";
    type = OAuthException;
}}

" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-12T22:39:49.357

`OAuthException`表示存在身份验证问题。确保在您的设备上满足以下条件。

*   **您已成功**登录 facebook 帐户
***   如果是，请从手机中删除该应用程序*   清理并重新部署到手机**

 **如果以上都不起作用，请尝试在手机上的*“设置”*中注销并重新登录。然后尝试通过 safari 登录。有时 iOS facebook 身份验证可能会有点问题。还可以尝试使用保证与 iOS facebook 帐户一起使用的其他应用程序。像，*Hootsuite*。

*如果***毕竟**还有问题......我不确定你告诉你什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-12T13:37:24.693

[此链接](https://stackoverflow.com/questions/12984976/how-to-post-a-photo-ios-facebook-sdk-3-1/12984978#12984978)可能会对您有所帮助。

并且@giff 的回答也在这个[链接](https://stackoverflow.com/questions/6702135/post-photo-on-users-wall-using-facebook-ios-sdk)上进行了一定程度的解释。

在此记录您的问题可能会帮助您获得有关错误的更多详细信息。

```
- (void)request:(FBRequest *)request didFailWithError:(NSError *)error {
    NSLog(@"%@", [error localizedDescription]);
    NSLog(@"Err details: %@", [error description]);
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-13T05:28:57.540

如果上面给出的解决方案都不能帮助你，我建议你试试这个。

从授权应用程序列表中删除应用程序并使用所需权限再次对其进行授权。

希望这对你有用**

# c - 动态数组和预建数据

> ID：16016627
> 
> 赞同：25
> 
> 时间：2013-04-15T13:37:36.060
> 
> 标签：c, arrays, static

在 C 中，我正在尝试执行以下操作：

```
typedef struct {
    int length;
    int items[];     /* 1 */
} wchararray_t;

typedef struct {
    long hash;
    wchararray_t chars;   /* 2 */
} string_t;

static string_t s1 = {
    617862378,
    { 5, { 'H', 'e', 'l', 'l', 'o' } }  /* 3 */
}; 
```

简而言之，我想要一种以另一种本身动态调整大小的类型`string_t`结尾的类型——它的大小存储在. 此外，我还想编写一个预先构建的特定字符串，作为静态数据，这里长度为 5。`wchararray_t``length``s1`

上面的代码假定 C99 支持`/* 1 */`. `/* 2 */`据我了解，即使 C99 标准也不支持将子结构包含在更大的结构中，但 GCC 接受了它。然而，在`/* 3 */`GCC 放弃了：

```
error: initialization of flexible array member in a nested context 
```

作为一种解决方法，到目前为止，上面的理想代码编写为以下 hack，“有点工作”：

```
typedef struct { int length; int items[1]; } wchararray_t;
typedef struct { long hash; wchararray_t chars; } string_t;

typedef struct { int length; int items[5]; } wchararray_len5_t;
typedef struct { long hash; wchararray_len5_t chars; } string_len5_t;

static union { string_len5_t a; string_t b; } s1 = {
    617862378,
    { 5, { 'H', 'e', 'l', 'l', 'o' } }
}; 
```

...并且我们将使用“s1.b”作为预构建的 string_t（并且永远不要引用“s1.a”，它仅用于 s1 的静态声明）。然而，它在最新的 GCC 4.8 中中断，它优化了我们的部分代码，因为——显然——任何`items`对 a 的`wchararray_t`循环都只能迭代一次，因为它是一个长度为 1 的数组。

通过为 gcc 提供选项来解决此特定问题`-fno-aggressive-loop-optimizations`。它也可以通过不声明数组中的长度来修复`wchararray_t`，`items[]`使其成为“仅仅因为”的动态数组。但是，这种编写代码的方式是一种 hack，我宁愿用一种完全不同的方式来解决这个问题......

（请注意，这都是由 PyPy 生成的 C 代码，而不是手写代码；任何更改都可以，包括是否需要更改我们在任何地方访问数据的方式，只要“有效”的 C 优化不是防止。）

**编辑：**将“char[]”替换为“int[]”，它不接受双引号语法`"hello"`。这是因为我正在寻找任何数组类型的解决方案。

**未解决：**感谢大家的建议。似乎没有干净的方法，所以我实现了骇人听闻的解决方案：声明类型 k+1 次，一次使用灵活的数组“int items[];” 其他 k 次使用“int items[N];” 对于所需的各种 N 值。这需要一些额外的技巧：例如不为 MSVC 使用灵活的数组（它们在那里的工作方式不同；我没有调查是否知道完全相同的语法是否可以工作）；`int items[];`并且 GCC 遵循 C99 所说的内容，并且对仅包含字段的结构不满意。然而，如果我们添加一个虚拟字段会很高兴`char _dummy[0];`......据我所知，这不是严格意义上的 C99......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T21:29:58.783

回答我自己的问题并写下来。另一个技巧是建立在 Alok 的建议之上，这可能会偶尔产生虚假对齐 --- 然后通过 init-time 代码修复对齐。这假设程序中使用的大多数此类类型恰好正确对齐。代码：

```
typedef struct {
    long stuff;   /* to show misalignment on 64-bit */
    int length;
    int items[];
} chararray_t;

typedef struct {
    long hash;
    chararray_t chars;
    int dummy[];
} string_t;

static string_t b1 = {
    617862378,
    { 42, 5 },
    {-1, -2, -3, -4, -5}
};
/* same with b2 .. b6 */

void fixme(void) {
    /* often compares as equal, and the whole function is removed */
    if (offsetof(string_t, dummy) !=
            offsetof(string_t, chars) + offsetof(chararray_t, items)) {
        static string_t *p_array[] = { &b1, &b2, &b3, &b4, &b5, &b6 };
        string_t *p;
        int i;
        for (i=0; i<6; i++) {
            p = p_array[i];
            memmove(p->chars.items, p->dummy, p->chars.length * sizeof(int));
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T17:55:43.633

这很hackish，但这可以工作吗？

```
#include <stdio.h>

typedef struct {
    int length;
    int items[];     /* 1 */
} wchararray_t;

typedef struct {
    long hash;
    wchararray_t chars;   /* 2 */
    int dummy[]; /* hack here */
} string_t;

static string_t s1 = {
    617862378, { 5 },
    { 'H', 'e', 'l', 'l', 'o' }  /* 3: changed assignment */
};

int main(void)
{
    int i;
    for (i=0; i < 5; ++i) {
        putchar(s1.chars.items[i]);
    }
    putchar('\n');
    return 0;
} 
```

GCC 给我警告：

```
xx.c:10:22: warning: invalid use of structure with flexible array member [-pedantic]
xx.c:16:9: warning: initialization of a flexible array member [-pedantic]
xx.c:16:9: warning: (near initialization for ‘s1.dummy’) [-pedantic] 
```

但它似乎工作。

[参考](http://gcc.gnu.org/ml/gcc-help/2003-10/msg00089.html)

*编辑*：如何添加确保`items[]`始终正确对齐的“填充成员”？

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <stddef.h>

/* change to the strictest alignment type */
typedef long aligner;

typedef struct {
    long stuff;   /* to show misalignment on 64-bit */
    int length;
    aligner padding;
    int items[];
} chararray_t;

typedef struct {
    long hash;
    chararray_t chars;
    int dummy[];
} string_t;

static string_t b1 = {
    617862378,
    { 42, 5 },
    {-1, -2, -3, -4, -5}
};

int main(void)
{
    int i;

    printf("sizeof chararray_t: %zu\n", sizeof(chararray_t));
    printf("offsetof items: %zu\n", offsetof(chararray_t, items));

    printf("sizeof string_t: %zu\n", sizeof(string_t));
    printf("offsetof dummy: %zu\n", offsetof(string_t, dummy));

    for (i=0; i < 5; ++i) {
        printf("%d ", b1.chars.items[i]);
    }
    putchar('\n');
    for (i=0; i < 5; ++i) {
        printf("%d ", b1.dummy[i]);
    }
    putchar('\n');
    return 0;
} 
```

当我运行上述内容时，我似乎得到了正确的答案：

```
sizeof chararray_t: 24
offsetof items: 24
sizeof string_t: 32
offsetof dummy: 32
-1 -2 -3 -4 -5 
-1 -2 -3 -4 -5 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T14:35:32.090

```
#include <stdio.h>
typedef struct {
    int length;
    char items[];     /* 1 */
} chararray_t;

typedef struct {
    long hash;
    chararray_t chars;   /* 2 */
} string_t;

/*static string_t s1 = {
    617862378,
    { 5, { 'H', 'e', 'l', 'l', 'o' } }  // 3
};*/

static string_t s1 =
{
    617862378,
    {6,"Hello"} /* 3 */
};

int main()
{
    printf("%d %d %s\n",s1.hash,s1.chars.length,s1.chars.items);
    return 0;
} 
```

为空字符加 1，瞧！:)

编辑，也适用于 2 级嵌套（GCC 4.8.0）

```
#include <stdio.h>
typedef struct {
    int length;
    char items[];     /* 1 */
} chararray_t;

typedef struct {
    long hash;
    chararray_t chars;   /* 2 */
} string_t;

typedef struct {
    long number;
    string_t arr;
}experiment_t;

static experiment_t s1 =
{
    617862378,
    {786,{6,"Hello"}} /* 3 */
};

int main()
{
    printf("%d %d %d %s\n",s1.number,s1.arr.hash,s1.arr.chars.length,s1.arr.chars.items);
    return 0;
} 
```

----------编辑 2----------------- 找到了一种方法来解决限制[C 在结构中初始化数组](https://stackoverflow.com/questions/1558025/c-initialize-array-within-structure)

最终代码::

```
#include <stdio.h>
typedef struct {
    int length;
    int *items;     /* 1 */
} intarray_t;

typedef struct {
    long hash;
    intarray_t chars;   /* 2 */
    int dummy[2];
} string_t;

/*string_t s1 =
{
    617862378,
    {
        6,
        {1,2,3,4,5,6}
    },
    {
        0,0
    }
};*/

string_t s1 = {617862378,{},{0,0}};

int main()
{
    int i=0;
    intarray_t  t1 = {.length = 6, .items = (int[6]){1,2,3,4,5,6}};
    s1.chars = t1;
    printf("%d %d\n",s1.hash,s1.chars.length);
    while(i<s1.chars.length)
    {
        printf("%d",s1.chars.items[i]);
        i++;
    }
    putchar('\n');
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T14:32:56.670

我认为有一些理由将字符串保留在结构“内部”并且您希望通过不使用 C 字符串进行初始化来保存一个字符。

但是，如果没有，你可以这样做：

```
typedef struct {
    int length;
    char *items;     /* 1 */
} chararray_t;

typedef struct {
    long hash;
    chararray_t chars;   /* 2 */
} string_t;

static string_t s1 = {
    617862378,
    { 5, "Hell" }  /* 3 */
}; 
s1.chars.items[4] = 'o' ; 
```

看起来您可以使用联合技巧，但使用类型转换？

```
#include <stdio.h>

typedef struct { int length; int items[]; } wchararray_t;
typedef struct { long hash; wchararray_t chars; } string_t;

typedef struct { int length; int items[5]; } wchararray_len5_t;
typedef struct { long hash; wchararray_len5_t chars; } string_len5_t;

static union { string_len5_t a; string_t b; } s5 = {
    617862378,
    { 5, { 'H', 'e', 'l', 'l', 'o' } }
};

string_t *s1 = (string_t*) &s5 ;

int main( int argc, char *argv[])
{

  for( int i = 0 ; i < s1->chars.length ; i++ )
    {
      printf ( "%c", s1->chars.items[i] );
    }
  printf( "\n" );
} 
```

# c# - 执行 2 个 SQL 命令而不在其间执行其他命令的正确方法

> ID：16016636
> 
> 赞同：2
> 
> 时间：2013-04-15T13:38:09.357
> 
> 标签：c#, .net, sql, sql-server, sql-server-2012

**建议的副本没有回答标题中的问题。**

我想在没有任何其他“用户”（我不确定正确的术语）在它们之间执行命令的情况下执行两个 MSSQL 命令。

搜索时，我发现了两种似乎可以实现但不确定的方法：

1.  使用制表符。- 但我已经看到它被认为是不好的做法。

2.  使用事务——但我能找到的只是它是原子的，不一定会锁定其他操作。

什么方法是正确的方法？

更多信息：只有我的程序将访问数据库，但它可能来自它的多个实例，我不介意短暂的等待 - 如果一个实例必须排队等待一两秒钟 - 这很好。

编辑：我正在尝试插入一行并获取其身份。（这似乎不像我期望的那样简单。）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-15T13:44:56.743

要插入一行并获取其标识，您无需阻止所有其他命令。只需结合使用事务`SCOPE_IDENTITY`：

```
BEGIN TRAN;

INSERT INTO MyTable (MyColumn)
VALUES ('MyValue');

SELECT SCOPE_IDENTITY();

COMMIT TRAN; 
```

更多关于[MSDN](http://msdn.microsoft.com/en-us/library/ms190315.aspx)`SCOPE_IDENTITY`的信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T13:42:53.203

您需要使用[隔离级别](http://msdn.microsoft.com/en-us/library/system.data.isolationlevel.aspx)为的事务`Serializable`。这将防止其他用户在事务期间读取或修改查询使用的行，而不会完全锁定表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T13:45:05.137

您不能阻止在其他两个*命令* 之间执行命令。您所能做的就是防止数据被修改，直到您自己完成修改为止。这是使用使用相应隔离级别的事务来完成的。

# c++ - 提升 C++ 和 Windows CE 6.0

> ID：16016637
> 
> 赞同：3
> 
> 时间：2013-04-15T13:38:09.493
> 
> 标签：c++, boost, windows-ce

我已经成功地为 Windows CE 6.0 构建了 STLPort 和 Boost c++。我可以在调试结束发布模式下使用 Windows CE 6 和 STLPort 运行应用程序。

我使用以下批处理文件构建了 boost：

```
@echo off
cls

:build

:release

echo building boost in release shared library

bjam ^
--with-system ^
--with-chrono ^
--with-date_time ^
--with-thread ^
--with-atomic ^
toolset=msvc-9.0~CEPlatform ^
variant=release ^
threading=multi ^
stdlib=stlport-5.2.1 ^
link=shared ^
runtime-link=shared

:debug

echo building boost in debug shared library

bjam ^
--with-system ^
--with-chrono ^
--with-date_time ^
--with-thread ^
--with-atomic ^
toolset=msvc-9.0~CEPlatform ^
define=_STLP_DEBUG=1 ^
variant=debug ^
threading=multi ^
stdlib=stlport-5.2.1 ^
link=shared ^
runtime-link=shared

goto exit

:exit
pause 
```

我已根据此链接修改了 user-config.jam：[http://stackoverflow.com/questions/15906901/build-boost-c-wince/15939679#15939679][1]

我可以在发布模式下使用 boost 运行应用程序，但存在一些问题：

boost::this_thread::sleep_for(boost::chrono::seconds(1));

将导致应用程序在发布模式下崩溃：如果先前的语句不存在，我将无法应用程序。似乎失去了一些依赖。我使用了 Dependency walker 并解决了所有依赖项（COREDLL.DLL、STLPORT.5.2.DLL、BOOST_SYSTEM-VC90-MT-P-1_53.DLL、BOOST_THREAD-VC90-MT-P-1_53.DLL、BOOST_DATE_TIME-VC90- MT-P-1_53.DLL）。

在调试模式下，情况最糟糕：如果包含 boost 标头（boost/thread.hpp、boost/chorono.hpp），我将无法启动应用程序。似乎又缺少一些 dll，但依赖 walker 似乎一切正常。没有丢失的DLL...链接的DLL是：COREDLL.DLL、STLPORTSTLD.5.2.DLL、BOOST_SYSTEM-VC90-MT-GDP-1_53.DLL、BOOST_THREAD-VC90-MT-GDP-1_53.DLL、BOOST_DATE_TIME-VC90-MT -GDP-1_53.DLL

我是不是错过了什么。有人有想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T21:29:18.147

使用隐式加载加载时，CE 的 DLL 名称长度限制为 32 个字符。疯狂的是，这仍然没有在 CE 中修复（更不用说正确的错误消息），也没有在 Boost 中解决。我们在工作中采用的方法是使用“bsystem”而不是“boost_system”（类似“bthread”、“bregex”等）#ifdef UNDER_CE。也许我们还删除了“-mt”，因为 CE 不支持单线程代码，但我必须检查源代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-18T06:27:31.360

这些选项可能已被更高版本的 boost 更改。我使用 --layout=system 选项和 BOOST_AUTO_LINK_NOMANGLE 宏，它们可以工作。

我正在使用提升 1.55。

# eclipse - 当 IClasspathContainer 包含零 IClasspathEntry

> ID：16016642
> 
> 赞同：1
> 
> 时间：2013-04-15T13:38:15.783
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp

我已经构建了自己的 IClasspathContainer 以链接到第 3 方 JAR。有时找不到 JAR，getClasspathEntries 返回一个由零个 IClasspathEntry 对象组成的数组。

这对项目树的影响是出乎意料的——库/类路径容器从项目显示中*完全*消失。

理想情况下，库图标将保留在项目树中，留给我一些装饰以指示错误。更理想的是，我可以装饰根项目图标以指示构建错误。

任何人都可以建议我如何实现这一目标 - 如果可以实现的话？

M。

# qt - 停用 QListWidgetItem ：悬停

> ID：16016644
> 
> 赞同：2
> 
> 时间：2013-04-15T13:38:24.337
> 
> 标签：qt, hover, qlistwidget, qtstylesheets

我实现了一个`QListWidget`并添加了它以防止当我将鼠标悬停在一个项目上时出现高亮效果：

```
QListWidget::item:hover { background: transparent; } 
```

但是后来我用`lwi->setFlags(lwi->flags() & ~Qt::ItemIsEnabled);`（`lwi`要禁用的 QListWidgetItem ）禁用了一些项目以防止选择，现在这些不受

```
QListWidget::item:hover. 
```

如何禁用所有项目（包括禁用）的突出显示效果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T03:42:26.590

您可以尝试设置以下样式，应该可以

```
QListWidget::item:hover,
QListWidget::item:disabled:hover,
QListWidget::item:hover:!active,
{background: transparent;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-20T09:19:28.323

刚碰到这个问题。这似乎起到了作用：

```
QListWidget::item:disabled
{
    background: transparent;
}
```

# php - Python Script 可以包含在 PHP 中吗？

> ID：16016645
> 
> 赞同：0
> 
> 时间：2013-04-15T13:38:24.707
> 
> 标签：php, python-2.7

我想实现一个用 python 编写的逻辑，这段代码会做一些搜索，我有一个用 PHP 完成的网站。谁能告诉我是否可以在 PHP 中包含 python 脚本？如果是，我该怎么做？

> 标准：python 脚本的输入将来自 php 或 html [文本或文件]。python的输出直接显示到页面或通过php或存储在mysql并通过PHP显示。[请推荐我最好的一个]。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:41:53.527

如果您有权访问`exec`，则可以运行 python 解释器。然而，那是：

1.  矫枉过正
2.  不一定是明智的
3.  严重的资源浪费

如果你的逻辑很简单，为什么不用 PHP 编写呢？此外，如果您的逻辑**不简单**......为什么不制作某种 API 来访问它并支持通信而不是重复代码删除？

# android - 上传完成时发送的意图

> ID：16016646
> 
> 赞同：0
> 
> 时间：2013-04-15T13:38:30.633
> 
> 标签：android, file-upload, upload

当我们在我们的 android 设备上上传文档/图像时是否发送了任何广播意图/消息。我正在寻找类似于下载完成时发送的 DownloadManager.ACTION_DOWNLOAD_COMPLETE 的内容。我的应用程序的要求是监视在手机上完成的所有上传，因此我正在寻找我可以收听的任何广播消息/意图

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:43:03.627

使用 [异步任务](http://developer.android.com/reference/android/os/AsyncTask.html)

私有类 LongOperation 扩展 AsyncTask {

```
 @Override
      protected String doInBackground(String... params) {
           // upload file code
      }      

      @Override
      protected void onPostExecute(String result) {
            // start new intent
      }

      @Override
      protected void onPreExecute() {
      }

      @Override
      protected void onProgressUpdate(Void... values) {
      }
} 
```

[演示](https://stackoverflow.com/questions/9671546/asynctask-android-example)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:46:44.237

只需使用 AsyncTask。

从一段时间到现在，我意识到 AsyncTask 的功能改进了“服务”和“广播消息”功能。

# java - 在java中按键播种的PRNG

> ID：16016651
> 
> 赞同：2
> 
> 时间：2013-04-15T13:38:46.747
> 
> 标签：java, random, cryptography, prng, random-seed

我需要使用密钥伪随机地创建数字。key 是一个转换为字节数组的字符串。这就是我想出的：

```
 int N=10;
    int key[]= {13,10,1,5};
    int tmp,j=0;
    for (int i=0; i < N; i++) { 
        j = (j + key[i % key.length]) % N; 
        System.out.println(j);
    } 
```

此代码取自 RC4 的 PRNG 并进行了修改。它没有按预期工作，值正在重复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T15:33:13.787

此代码将为您提供数字 0 到 9 的一致、随机排列...排列是随机的，但对于相同的密钥将始终相同

```
public static void main(String[] args) throws Exception
{
    byte key[]= {13,2,4,6,7}; 
    SecureRandom random = new SecureRandom(key); 

    List<Integer> nums = new ArrayList<Integer>();
    for (int i = 0; i < 10; i++) { 
        nums.add(i);
    }

    Collections.shuffle(nums,random);

    for(Integer n: nums) {
        System.out.println(n);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T13:59:50.360

嗯，第一个问题是你试图从一个四字节的密钥中创建一个 PRG。这本质上是不安全的。攻击者将能够很容易地猜测。

第二个问题是你只使用了十轮 PRG，这意味着即使你有一个 128 位的密钥，你也只会使用前 10 轮，这本质上是不安全的。

您的第三个问题是您将`i % key.length`其用作 mod 函数的索引。这是一个问题，因为您使用的索引将恰好递增一。如果你有一个更大的密钥，这将更好地模拟随机性，但由于你的密钥只有四个字节，它不会。

此外，您似乎在`% N`函数末尾任意添加了 a 。我不确定你想要完成什么，但我并不惊讶你会发现重复的模式。您已将函数压缩为一个很小的数字。同样重要的是要注意，随着迭代次数的增加，输出大小也会增加，这通常是没有用的。

你的算法也忽略了RC4生成算法的大部分关键点；阅读[此处](http://en.m.wikipedia.org/wiki/RC4#section_2)了解更多信息。

没有办法告诉你如何解决这个问题，因为我认为你*无法解决*这个问题。我认为这个概念本质上是不安全的。

# rally - 在 Rally .NET SDK 中使用内联 CSS 上传描述

> ID：16016652
> 
> 赞同：1
> 
> 时间：2013-04-15T13:38:47.200
> 
> 标签：rally

我有桌面实用程序应用程序来上传更新并为 Rally 创建新的用户故事。我正在使用 WPF Richtextbox，并且正在使用[MSDN](http://msdn.microsoft.com/en-us/library/vstudio/aa972129%28v=vs.90%29.aspx)上的 XAML 到 HTML 转换演示。

当我尝试上传具有富文本格式的用户故事时，它在 CreateResult 对象中失败并出现以下错误：

```
"Cannot parse input stream due to I/O error as JSON document: Parse error: expected '}'
but saw 'f' [ chars read = >>>{\"hierarchicalrequirement\":{\"Name\":\"Test
Story\",\"Description\":\"<HTML><BODY><P><SPAN STYLE=\"f<<< ]" 
```

这是整个字符串：

```
"<HTML><BODY><P><SPAN STYLE=\"font-weight:bold;\">This is a test</SPAN> of a new story.</P></BODY></HTML>" 
```

当我阅读另​​一个具有粗体文本的用户故事时，它使用“强”HTML 标记。转换器仅使用内联 CSS。Rally API 是否支持内联 CSS，我只需要重新格式化字符串，因为它在第一个引号 (") 处失败？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T00:13:12.540

Rally 在描述字段中支持很多标记方式 - 我认为这与您正在使用的 .NET REST DLL 版本有关，而不是 Rally 服务器端问题。我使用您的测试字符串测试了通过最新的[.NET REST 工具包](https://developer.help.rallydev.com/rest-api-net)创建故事，能够正确创建故事，包括格式。

您使用的是哪个版本的 .NET REST Toolkit DLL？当某些字符串包含 HTML 标记时，某些版本会出现将数据序列化为 JSON 的问题。

最新版本：我在测试中使用的[REST .NET 1.0.15 DLL ，成功创建了一个包含上述测试字符串的用户故事，其中包含感兴趣的标记 - 没有看到解析错误。](http://people.rallydev.com/connector/RallyRestApiDotNet/Rally.RestApi-1.0.15.zip)

# winforms - 关于分层架构的建议（Win Forms + WinService；WCF；LINQ to SQL）

> ID：16016654
> 
> 赞同：0
> 
> 时间：2013-04-15T13:38:51.563
> 
> 标签：winforms, wcf, linq-to-sql, architecture, windows-services

我将尝试尽可能简要地解释：

**用于文件类别和描述的 C#.Windows 应用程序。**

**Windows 窗体**- 为用户

**我想保存一个库以备将来使用**- 我为 XML、文件、字符串的任务提供了很好的算法。在这种情况下，它们将服务于 WF，但我不想将它们保留在 Form 类中。我想将它们作为一个单独的库，其中包含命名空间和类。但我不知道整个 VS“解决方案”必须是什么类型的项目或补充。

**Windows 服务**- 获取有关文件更改的通知并更新 WF 正在使用的同一数据库。

**LINQ to SQL** - 用于数据访问

**WCF** - 我只是把它扔在这里，因为我似乎需要使用它（来自先前相关主题的答案）：[https ://stackoverflow.com/a/15998122/1356685](https://stackoverflow.com/a/15998122/1356685)

所以……是的……建筑，建筑。在我的案例中，任何关于良好架构的指南都是受欢迎的。现在我知道在这些对话中人们开始抛出诸如“业务逻辑”、“持久层”、“模型层”之类的术语。但是我不太了解它们，所以请具体说明。

在此先感谢您的帮助 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:01:06.550

微软有一个相当广泛的[应用程序架构指南](http://msdn.microsoft.com/en-us/library/ff650706.aspx)，他们的[模式和实践网站](http://msdn.microsoft.com/en-us/library/ff921345.aspx)有很多信息和代码示例，向您展示如何构建应用程序。

至于您的“要保存以供将来使用的库”......您可以创建一个[C# 类库](http://msdn.microsoft.com/en-us/library/vstudio/ms229042%28v=vs.100%29.aspx)项目并将其作为参考添加到您想要使用它的任何应用程序中。

# css - 网站页脚与 内容

> ID：16016659
> 
> 赞同：0
> 
> 时间：2013-04-15T13:39:02.217
> 
> 标签：css, html, joomla2.5

我在 Joomla 中设置了一个站点，[这是](http://www.thebarnandpinncottage.co.uk/index.php)使用自定义网格响应模板的站点。目前我有一个非常基本的布局......页眉 - 部分 - 旁边 - 页脚。

然而，页脚似乎上升到了旁边的模块中，而不是像使用 section 组件那样位于其下方。我已经尝试了所有粘性页脚解决方案，但可惜我失败了！我在这里错过了一些非常直接的浮动和清除吗？还是页脚是一个模块？这是代码......应该相关的位！

**索引.php**

```
</head>

<body>

<?php  if($this->countModules('hidden')) : ?>
<div id="hidden">
<jdoc:include type="modules" name="hidden"  style="xhtml" />
</div>
<?php endif; ?>

<header>
<jdoc:include type="modules" name="header" style="xhtml" />
</header>
<nav>
  <jdoc:include type="modules" name="nav" style="xhtml" />
</nav>

<section>
    <jdoc:include type="component" style="xhtml" />
</section> 

<?php  if($this->countModules('aside')) : ?>
<aside>
  <jdoc:include type="modules" name="aside" style="xhtml" />
</aside>
<?php endif; ?>

<footer>
    <jdoc:include type="modules" name="footer"  style="xhtml" />
</footer> 
```

**样式.css**

```
html {
    min-height: 100%;
    font-family:'OpenSansRegular';
    overflow-x: hidden;
}

body {
    overflow: hidden; /* Useful for mobile window width */
}

header {
    -webkit-background-size:    cover;
    -moz-background-size:       cover;
    -o-background-size:         cover;
    background-size:            cover;
    border-bottom: 4px solid #4B77B1;
}

section {
    background: white;
    color: #333;
    -webkit-box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-ms-box-sizing:border-box;box-sizing:border-box;
}

aside {
    right: 0;
    color: #333;
}

footer {
    height: 200px;
    background: #B3BCC6;
    border-top: 4px solid #4B77B1;
    margin-bottom: 1em;
    text-align: center;
} 
```

还有一个响应式样式表，但上面显示的主 css 中的样式会覆盖它。希望有人能帮忙！

我添加了一些背景颜色，以便更容易看到旁边的模块与页脚行为不端......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:03:08.393

html 标记可以做一些轻微的跳动。如果您使用的是浮动元素，那么所有主容器都应该是浮动的，并且可能会添加一些宽度以确保 IE7 能够正常运行。如果您不使用浮点数，则应使用 / 和 / 或 css 对内容进行明确的修复::after{display:block; 内容：””; 等清除元素。

我会建议更多的父容器包含左列和右列，然后清除 - 这会将页脚向下推 - 考虑为一些较旧的浏览器添加宽度或包含在特定的 @import url 中。

# php - 预先批准的嵌入式支付流程中的访客支付支持

> ID：16016664
> 
> 赞同：2
> 
> 时间：2013-04-15T13:39:11.237
> 
> 标签：php, paypal, paypal-sandbox, paypal-adaptive-payments

我们目前正在将我们的用户重定向到 PayPal，以便接受预先批准（自适应付款）。在那里，用户可以登录 PayPal 或只输入他的信用卡信息。

如果我们使用“嵌入式流程”（灯箱或新窗口）而不是重定向用户，则用户只能登录或注册。

如何让用户在嵌入式流程中插入他们的信用卡信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-21T19:23:58.810

如果您将 Preapprovals 与 Adaptive Payments 一起使用，则不能使用访客结帐，即您的用户需要使用他们的 Paypal 帐户登录或创建一个帐户。

我知道这很糟糕，但据我所知，没有解决方法。

# c# - 在不知道编码的情况下将字节 [] 转换为字符串

> ID：16016665
> 
> 赞同：2
> 
> 时间：2013-04-15T13:39:13.553
> 
> 标签：c#, decoding

我看到了[这个](https://stackoverflow.com/questions/1003275/byte-to-string-in-c-sharp)答案，问题是 - 所以我还需要知道使用什么类型的编码器来获取正确的字符串 - 它可能是 UTF\UTF8\ANSI。

这是来自即时窗口的示例。

```
Encoding.Unicode.GetString(combinedBuf)
"믯ힿ힩힜힕�"
Encoding.UTF8.GetString(combinedBuf)
"﻿שלום" 
```

# ruby-on-rails-3 - 范围但错误消息 ArgumentError: 试图创建没有块的 Proc 对象

> ID：16016668
> 
> 赞同：13
> 
> 时间：2013-04-15T13:39:20.263
> 
> 标签：ruby-on-rails-3, scope

我正在尝试创建一个范围，以找出所有地址为 0 的联系人。`Got error message ArgumentError: tried to create Proc object without a block`在 rails c 中运行命令“Contact.noaddress”时。

这是我的联系模型，包括范围：

```
class Contact < ActiveRecord::Base
  attr_accessible :email, :firstname, :lastname, :mobilephone, :fullname
  has_many :addresses
  validates_presence_of :firstname, :lastname

   scope :noaddressed, lambda do |addresses|
    joins(:addresses).where('addresses.created_at.empty?', true)
   end
end 
```

这是地址模型

```
class Address < ActiveRecord::Base
  attr_accessible :city, :country, :postalcode, :region, :street
  belongs_to :contact
end 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-15T17:11:04.040

这听起来像是[这里](https://stackoverflow.com/questions/1476678/rails-named-scope-lambda-and-blocks)引用的（优先级问题？） 。

如果将范围更改为：

```
scope :noaddresses, (lambda do
  joins(:addresses).where('addresses.created_at is null')
end) 
```

或者

```
scope :noaddresses, lambda { joins(:addresses).where('addresses.created_at is null') } 
```

另外，我看不到您在哪里使用 block 参数`|addresses|`。你忘记使用了吗？否则，您可以将其及其周围的管道移除。

更新：我删除了`|addresses|`参数并将查询更新为有效的 SQL 语法。

# c++ - 本地静态变量初始化 - Visual Studio 2010 的错误？

> ID：16016671
> 
> 赞同：0
> 
> 时间：2013-04-15T13:39:26.603
> 
> 标签：c++, visual-studio-2010, initialization, static-variables

我最近调试了一些像这样的遗留代码：

```
template<size_t count>
struct SomeData
{
    char m_data[count];
};

template<>
struct SomeData<0>
{
};

template<int n>
struct SomeDataLength : public SomeDataLength<n-1>
{
    SomeDataLength(){ value[n] = sizeof(SomeData<n>); }
};

template<>
struct SomeDataLength<0>
{
    SomeDataLength(){ value[0] = sizeof(SomeData<0>); }

    size_t value[10];
};

template<typename T>
void SomeClass::SomeMethod(size_t count)
{
    ...

    static SomeDataLength<5> dataLength;

    size_t length = dataLength.value[count]; // sometimes may be 0 on the method first call

    ...
} 
```

令我惊讶的是，第一次调用时变量有时（很少）`length`等于。C++ 标准是否没有保证在访问之前必须初始化局部静态变量，或者这是编译器的错误？`0``SomeMethod`

PS`value`数组永远不会在 SomeDataLength 构造函数之外修改。编译器是来自 Visual Studio 2010 的编译器。

# php - PHP 第 n 个 foreach 记录

> ID：16016674
> 
> 赞同：-2
> 
> 时间：2013-04-15T13:39:33.890
> 
> 标签：php

我正在寻找一种方法来进行稍微复杂的第 n 条记录调整，类似于`nth-child(3n-1)`PHP 中的 jQuery/CSS3，因此每行有三个列，中间需要添加“mid”类。我最好不想使用 jQuery，因为页面加载和添加的类似乎总是存在延迟。

所以像下面这样，但我知道这意味着`$zxc % 2`，但我们都从某个地方开始。

```
<?php $zxc = 1; ?>
<?php foreach($products as $product): ?>
<div class="theProductListItem<?php if($zxc % (3-1) == 0){?> mid<?php } ?>">
<!--product contents-->
</div>
<?php $zxc++; ?>
<?php endforeach; ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T13:42:21.947

用这个：

```
if( ($zxc % 3) == 1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:47:27.020

`% 3`根据定义，您需要使用“每第三项”。

然后你有一些选择，你可以从一个偏移量开始你的变量。例如

```
$x = 2;
foreach ($array as $item) {
    ...
    if ($x % 3 == 0) {
        ...
    }
    ...
} 
```

您也可以从更常见的 0 或 1 开始并更改您的比较。

```
$x = 0;
foreach ($array as $item) {
    ...
    if ($x % 3 == 1) {
        ...
    }
    ...
} 
```

从表面上看，您可以将最后一个示例更改为此。

```
$x = 0;
foreach ($array as $item) {
    ...
    if (($x % 3) - 1 == 0) {
        ...
    }
    ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T14:05:01.317

这是完成您想要的事情的一种方法，而无需担心模数计算，虽然被授予，但它有点冗长。它通过一些方法来扩展标准[`ArrayIterator`](http://php.net/arrayiterator)以跳过记录：

```
class NthArrayItemIterator extends ArrayIterator
{
    private $step;
    private $offset;

    public function __construct($array, $step = 1, $offset = 0)
    {
        parent::__construct($array);
        $this->step = $step;
        $this->offset = $offset;
    }

    private function skipn($n)
    {
        echo "skipn($n)\n";
        while ($n-- && $this->valid()) {
            parent::next();
        }
    }

    public function rewind()
    {
        parent::rewind();
        $this->skipn($this->offset);
    }

    public function next()
    {
        $this->skipn($this->step);
    }
}

foreach (new NthArrayItemIterator(array(1, 2, 3, 4, 5, 6), 3, 2) as $item) {
    echo "$item<br />";
} 
```

[**演示**](http://codepad.org/UY38g1Tf)

在这种情况下，它输出第三个和第六个项目。

# d3.js - d3js - 类型错误：字符串未定义

> ID：16016680
> 
> 赞同：7
> 
> 时间：2013-04-15T13:39:49.377
> 
> 标签：d3.js

我不明白这个错误：

> TypeError: string is undefined function d3_time_parse(date, template, string, j) { var c, p, i = 0, n = template.length, m = string.length; ...

这是我的代码：

```

    var margin = {上：20，右：80，下：30，左：50}，
        宽度 = 960 - margin.left - margin.right,
        高度 = 500 - margin.top - margin.bottom;

    var parseDate = d3.time.format("%Y%m%d").parse;

    var x = d3.time.scale()
        .range([0, 宽度]);

    var y = d3.scale.linear()
        .range([高度, 0]);

    var color = d3.scale.category10();

    var xAxis = d3.svg.axis()
        .scale(x)
        .orient("底部");

    var yAxis = d3.svg.axis()
        .scale(y)
        .orient("左");

    var line = d3.svg.line()
        .interpolate("基础")
        .x(函数(d) { 返回 x(d.date); })
        .y(function(d) { return y(d.index); });

    var svg = d3.select("body").append("svg")
        .attr("宽度", width + margin.left + margin.right)
        .attr("高度", 高度 + margin.top + margin.bottom)
      .append("g")
        .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

    d3.csv("data.csv", function(error, data) {
      color.domain(d3.keys(data[0]).filter(function(key) { return key !== "date"; }));

      data.forEach（函数（d）{
        d.date = parseDate(d.date);
      });

      var 索引 = color.domain().map(function(name) {
        返回 {
          姓名：姓名，
          值：data.map（函数（d）{
            返回{日期：d.date，索引：+d[name]}；
          })
        };
      });

      x.domain(d3.extent(data, function(d) { return d.date; }));

      y.domain([
        d3.min(indexes, function(c) { return d3.min(c.values, function(v) { return v.index; }); }),
        d3.max(indexes, function(c) { return d3.max(c.values, function(v) { return v.index; }); })
      ]);

      svg.append("g")
          .attr("类", "x 轴")
          .attr("变换", "翻译(0," + 高度 + ")")
          .call(xAxis);

      svg.append("g")
          .attr("类", "y 轴")
          .call(yAxis)
        .append("文本")
          .attr("变换", "旋转(-90)")
          .attr("y", 6)
          .attr("dy", ".71em")
          .style("文本锚", "结束")
          .text("变化 (%)");

      var index = svg.selectAll(".index")
          .data（索引）
        .enter().append("g")
          .attr("类", "索引");

      index.append("路径")
          .attr("类", "行")
          .attr("d", function(d) { return line(d.values); })
          .style("stroke", function(d) { return color(d.name); });

      index.append("文本")
          .datum(function(d) { return {name: d.name, value: d.values[d.values.length - 1]}; })
          .attr("transform", function(d) { return "translate(" + x(d.value.date) + "," + y(d.value.index) + ")"; })
          .attr("x", 3)
          .attr("dy", ".35em")
          .text(function(d) { return d.name; });
    });

```

我的 csv 文件如下所示：

```
日期,DAX,CAC40,FTSE,NASDAQ,其他
20060407,-0.000712859,-0.009013212,0.010819606,0.009846526,0.003082604
20060413,-0.007765968,-0.024263398,0.011238971,0.004128621,0.005952774
20060421,0.02261859,0.00330204,0.028734861,0.001688981,0.003459211
20060428,0.007170521,-0.007531405,0.010534438,-0.002416181,0.004012361
...

```

有人可以帮我吗？谢谢你

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-15T13:49:57.567

> 日期,DAX,CAC40,FTSE,NASDAQ,其他

JavaScript 变量名区分大小写，因此在解析带有上述标题的 CSV 文件时，您需要引用以下字段：

```
d.Date // note the uppercase D
d.DAX // note all uppercase 
```

[这是来自 d3 wiki https://github.com/mbostock/d3/wiki/CSV#wiki-parse](https://github.com/mbostock/d3/wiki/CSV#wiki-parse)的示例

> 年份、品牌、型号、长度
> 
> 1997,福特,E350,2.34
> 
> 2000，水星，美洲狮，2.38

当使用 d3 的 CSV 解析器解析时，结果数据将由以下数组表示：

```
[
  {"Year": "1997", "Make": "Ford", "Model": "E350", "Length": "2.34"},
  {"Year": "2000", "Make": "Mercury", "Model": "Cougar", "Length": "2.38"}
] 
```

注意大写的对象键。要访问第一个条目的年份，需要一个带有大写 Y 的“年份” `data[0].Year`。

因此，在您的`forEach`功能中，您将需要：

```
data.forEach(function (d) {
    d.Date = parseDate(d.Date);
}); 
```

...后来：

```
return {date: d.Date, index: +d[name]}; 
```

# c# - Silverlight 数据网格单元格多行

> ID：16016682
> 
> 赞同：0
> 
> 时间：2013-04-15T13:39:54.233
> 
> 标签：c#, silverlight-4.0

是否可以在 Silverlight Datagrid 中手动定义换行符的位置？（而不是到达边界时自动换行到下一行）

这似乎是代码（[source](https://stackoverflow.com/questions/4299653/multiline-cell-in-silverlight-datagrid)）：

```
 <sdk:DataGridTextColumn 
    Header="Address"
    Width="150"
    Binding="{Binding Address}" >
    <sdk:DataGridTextColumn.ElementStyle>
        <Style TargetType="TextBlock">
            <Setter Property="TextWrapping" Value="Wrap"/>
        </Style>
    </sdk:DataGridTextColumn.ElementStyle>
 </sdk:DataGridTextColumn> 
```

但是我如何手动换行呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T15:22:08.170

在常见的 WPF 控件中是可能的，所以我相信在 Silverlight 上也应该是可能的。基本上，您需要将 TextBlock 控件定位在列的每个单元格上，类似于为它提供文本环绕样式所做的工作。

由于您没有从您的问题中澄清您是要以编程方式还是在 XAML 上分配文本，所以我将为您提供有关如何执行这两种操作的提示。

您可以使用类似于此[答案](https://stackoverflow.com/a/1560517/1000257 "在 WPF 文本块中获取段落的最佳方法是什么？ （换行符？）")的方法以编程方式分配文本：

```
txtBlock.Inlines.Add("This is the first paragraph");
txtBlock.Inlines.Add(new LineBreak());
txtBlock.Inlines.Add("This is the second paragraph"); 
```

另一方面，如果您想直接在 XAML 上分配文本，您可以`<LineBreak/>`直接在文本中使用标记，如本[答案](https://stackoverflow.com/a/483821/1000257 "WPF标签中的换行符？")所述：

```
<TextBlock>
    This is the first paragraph <LineBreak/>
    This is the second paragraph
</TextBlock> 
```

# zend-framework - Zend Framework 从 Handler 内部设置 HTTP 响应代码

> ID：16016690
> 
> 赞同：2
> 
> 时间：2013-04-15T13:40:09.680
> 
> 标签：zend-framework, rest, frameworks, handler

我正在使用 Zend Framework 1.12.3 开发一个 REST API。我想知道是否可以从处理程序内部设置 HTTP 响应代码。

我正在使用处理程序来检查“接受”标题。如果不支持请求的格式类型，我应该设置一个 415 HTTP 错误（不支持的媒体类型）。但是，我无法从处理程序内部设置响应代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T14:06:16.233

你说的handler是什么意思？

您可以在可以访问 Response 对象的任何地方设置响应代码。

从技术上讲，您几乎可以在任何地方（至少在 Bootstrap 之后）使用以下方式访问 Response 对象：

```
$response = Zend_Controller_Front::getInstance()->getResponse(); 
```

使用以下方法设置您的响应代码：

```
$response->setHttpResponseCode($code); 
```

在控制器中这样做是最自然的，因为每个控制器都已经引用了 Response 对象：

```
$this->_response 
```

# c++ - RabbitMQ C 库如何在 amqp_simple_wait_frame 上进行定时等待？

> ID：16016694
> 
> 赞同：1
> 
> 时间：2013-04-15T13:40:26.960
> 
> 标签：c++, c, multithreading, rabbitmq

我尝试用 RabbitMQ 监听器中断线程。然而线程目前保持`amqp_simple_wait_frame`功能。它等待更早。我想知道如何`amqp_simple_wait_frame`按照他们所说的定时（这样我可以看看我是要终止那个线程还是继续等待）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-21T05:27:05.413

`amqp_simple_wait_frame_noblock`可以使用具有超时值作为参数的。如果 timeout 为 NULL，则 func 的行为就像`amqp_simple_wait_frame`else 等待读取帧直到达到超时一样。

# java - 与数据库交互时发生 ClassNotFoundException 错误

> ID：16016695
> 
> 赞同：1
> 
> 时间：2013-04-15T13:40:27.940
> 
> 标签：java, database, hadoop, mapreduce

我试图运行一个在底层数据库之上运行的 mapreduce 程序。当我安装了 hadoop 的发行版时，可以在 hadoop 下载中找到它。这些程序在此发行版中运行良好。但是当我编译我自己的 hadoop 发行版并尝试运行相同的程序时，我得到了以下错误。我遵循了将mysql连接器jar放在hadoop/lib目录中并将一个放在分布式缓存中的过程。虽然这些程序适用于在 hadoop 下载下可用的发行版，但它们不适用于我创建的发行版。谁能告诉我可能出了什么问题？我尝试了所有其他方法，例如更新类路径和 HADOOP_CLASSPATH 变量，但都没有奏效。

```
hduser@ramanujan:~$ hadoop jar SimpleConn.jar 
13/04/15 13:50:16 WARN util.NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable
13/04/15 13:50:17 INFO service.AbstractService: Service:org.apache.hadoop.yarn.client.YarnClientImpl is inited.
13/04/15 13:50:17 INFO service.AbstractService: Service:org.apache.hadoop.yarn.client.YarnClientImpl is started.
13/04/15 13:50:17 INFO mapreduce.JobSubmitter: Cleaning up the staging area /tmp/hadoop-yarn/staging/hduser/.staging/job_1366013851608_0001
Exception in thread "main" java.lang.RuntimeException: java.lang.RuntimeException: java.lang.ClassNotFoundException: com.mysql.jdbc.Driver
    at org.apache.hadoop.mapreduce.lib.db.DBInputFormat.setConf(DBInputFormat.java:169)
    at org.apache.hadoop.util.ReflectionUtils.setConf(ReflectionUtils.java:70)
    at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:130)
    at org.apache.hadoop.mapreduce.JobSubmitter.writeNewSplits(JobSubmitter.java:470)
    at org.apache.hadoop.mapreduce.JobSubmitter.writeSplits(JobSubmitter.java:490)
    at org.apache.hadoop.mapreduce.JobSubmitter.submitJobInternal(JobSubmitter.java:387)
    at org.apache.hadoop.mapreduce.Job$11.run(Job.java:1218)
    at org.apache.hadoop.mapreduce.Job$11.run(Job.java:1215)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:415)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1489)
    at org.apache.hadoop.mapreduce.Job.submit(Job.java:1215)
    at org.apache.hadoop.mapreduce.Job.waitForCompletion(Job.java:1236)
    at DBCountPageView.run(DBCountPageView.java:227)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:70)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:84)
    at DBCountPageView.main(DBCountPageView.java:236)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.hadoop.util.RunJar.main(RunJar.java:212)
Caused by: java.lang.RuntimeException: java.lang.ClassNotFoundException: com.mysql.jdbc.Driver
    at org.apache.hadoop.mapreduce.lib.db.DBInputFormat.getConnection(DBInputFormat.java:195)
    at org.apache.hadoop.mapreduce.lib.db.DBInputFormat.setConf(DBInputFormat.java:163)
    ... 21 more
Caused by: java.lang.ClassNotFoundException: com.mysql.jdbc.Driver
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:188)
    at org.apache.hadoop.mapreduce.lib.db.DBConfiguration.getConnection(DBConfiguration.java:148)
    at org.apache.hadoop.mapreduce.lib.db.DBInputFormat.getConnection(DBInputFormat.java:189)
    ... 22 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T15:28:54.753

请务必在提交作业时添加任何依赖项，`HADOOP_CLASSPATH`如下`-libjars`例所示：

使用以下命令添加当前目录和`lib`目录中的所有 jar 依赖项：

```
export HADOOP_CLASSPATH=$HADOOP_CLASSPATH:`echo *.jar`:`echo lib/*.jar | sed 's/ /:/g'` 
```

请记住，当您开始工作时，`hadoop jar`您还需要通过使用`-libjars`. 我喜欢使用：

```
hadoop jar <jar> <class> -libjars `echo ./lib/*.jar | sed 's/ /,/g'` [args...] 
```

**注意：**命令`sed`需要不同的分隔符；是分开的，`HADOOP_CLASSPATH`需要分开的。`:``-libjars``,`

# database - 从 Delphi XE2 对各种 DBMS 的高效数据库访问

> ID：16016700
> 
> 赞同：12
> 
> 时间：2013-04-15T13:40:50.550
> 
> 标签：database, performance, delphi, c++builder, hana

## 我的需求

我使用 Delphi/C++Builder XE2。

我至少需要访问这些**DBMS**：

*   火鸟
*   DB2/400
*   SQL 服务器
*   SAP HANA（一个新的内存数据库，可用接口：JDBC、ODBC、ODBO、SQLDBC）

我需要在数据感知可视控件中显示和编辑数据。**数据可以驻留在这些 DBMS 中的任何一个上**，我将在外部文本文件上配置连接属性和 SQL 语句。

因此**，我正在寻找一组**支持此类 DBMS 并具有**良好性能**的数据库访问组件，类似于旧的 Paradox 表。

## 我的猜测

1.  使用 ODBC 性能将比使用本机驱动程序差。如果属实，我该如何克服这个问题？
2.  即使通过 ODBC，HANA 内存数据库的性能也会很棒（我现在无法测试）。

## 到目前为止我发现了什么

*   [**BDE**](http://docwiki.embarcadero.com/RADStudio/XE3/en/BDE_Overview) (Borland 数据库引擎) (`TDatabase`,`TTable`...)

    已弃用。

*   DBX (Embarcadero [**dbExpress**](http://docwiki.embarcadero.com/RADStudio/XE3/en/DbExpress_Feature_Overview) ) ( `TSQLConnection`, `TSQLTable`...)

    替换 BDE，单向数据集（光标只在前面；不在内存中缓冲数据，这样的数据集不能在 DBGrid 中显示；要使用 dbExpress 构建用户界面，您需要再使用两个组件：`TDataSetProvider`和`TClientDataSet`）

    使用本机驱动程序（HANA 没有）或 ODBC。

*   [**FireDAC**](http://docwiki.embarcadero.com/RADStudio/XE3/en/FireDAC)（Embarcadero Fire 数据访问组件）（`TADConnection`...`TADTable`）

    这是[AnyDAC](http://www.da-soft.com/anydac/)的延续；使用本机驱动程序（HANA 没有）或 ODBC 或 dbExpress。

*   [**UniDAC**](http://www.devart.com/unidac/)（Devart 通用数据访问组件）

    不是免费的；使用本机驱动程序（HANA 没有）或 ODBC 或“DB 客户端”。

*   DA（ Delphi 的RemObjects[**数据摘要）**](http://www.remobjects.com/da/)

    不是免费的。

*   [**ZDBC**](http://zeos.firmos.at/portal.php) (Zeos 数据库连接接口) (`TZConnection`,`TZQuery`...)

    开源；开始作为 JDBC 到 Object Pascal 的一个端口；不提供与数据感知可视控件的绑定。

*   [**dbGo**](http://docwiki.embarcadero.com/RADStudio/XE3/en/DbGo_Overview) (Embarcadero dbGo) (`TADOConnection`,`TADOTable`...)

    实现 ADO（因此通过 OLE DB 通过 ODBC）。有许多怪癖，例如在查询中重复同名参数。

*   **Jv BDE** ( `TJvQuery`, `TJvBDESQLScript`...)

    相应标准库的增强。

*   **合资数据访问** ( `TJvADODataset`, `TJvADOQuery`...)

    相应标准库的增强。

*（请随时增强此列表）*

**所以我的选择是**：

*   dbExpress 或 FireDAC：Embarcadero 未来将走向何方？
*   dbGo：ADO 是一个不错的选择吗？貌似它依赖于ODBC，那么性能呢？
*   像 UniDAC 或 Data Abstract 这样的商业产品：有必要吗？会更好吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-21T11:03:48.667

我决定在 Delphi XE3 上进行一些性能研究：UniDAC (5.0.1) 与 FireDAC (8.0.1)。数据库：Firebird、MySQL 和 SQL Server。

这是 150k 条记录的提取结果（内存使用量被认为是提取前后的差异）。

火鸟：

```
CREATE TABLE TEST_PERF (
    ID  INTEGER PRIMARY KEY,
    VC  VARCHAR(200),
    NM  NUMERIC(18,2),
    DT  TIMESTAMP
) 
```

UniDAC - 0,909 秒，消耗 12 324 044 内存

FireDAC - 0,967 秒，吃掉 282 179 668 内存（我很震惊）

MySQL：

```
CREATE TABLE TEST_PERF (
    ID  INTEGER PRIMARY KEY,
    VC  VARCHAR(200),
    NM  NUMERIC(18,2),
    DT  DATETIME
) 
```

UniDAC - 0,363 秒和 11 552 604 内存

FireDAC - 0,713 秒和 49 375 108 内存

SQL 服务器：

```
CREATE TABLE TEST_PERF (
    ID  INTEGER PRIMARY KEY,
    VC  VARCHAR(200),
    NM  NUMERIC(18,2),
    DT  DATETIME
) 
```

UniDAC - 0,391 秒和 14 155 576 内存

FireDAC - 0,324 秒和 51 775 844 内存

一切都被简单地测量了：

```
function MemoryUsed: Cardinal;
var
  st: TMemoryManagerState;
  sb: TSmallBlockTypeState;
begin
  GetMemoryManagerState(st);
  Result := st.TotalAllocatedMediumBlockSize + st.TotalAllocatedLargeBlockSize;
  for sb in st.SmallBlockTypeStates do
    Result := Result + sb.UseableBlockSize * sb.AllocatedBlockCount;
end; 
```

* * *

```
 UniQuery1.SQL.Text := 'select * from test_perf';
  UniQuery1.SpecificOptions.Values['FetchAll'] := 'True';
  mem := MemoryUsed;
  tc := Now;
  UniQuery1.Open;
  UniQuery1.Last;
  tc := Now - tc;
  mem := MemoryUsed - mem;
  Memo1.Lines.Add('UniDAC Firebird: Time: ' + FloatToStr(tc * 24 * 60 * 60) + ' sec; Memory used: ' + IntToStr(mem)); 
```

* * *

```
 ADQuery1.SQL.Text := 'select * from test_perf';
  ADQuery1.FetchOptions.Mode := fmAll;
  mem := MemoryUsed;
  tc := Now;
  ADQuery1.Open;
  ADQuery1.Last;
  tc := Now - tc;
  mem := MemoryUsed - mem;
  Memo1.Lines.Add('FireDAC Firebird: Time: ' + FloatToStr(tc * 24 * 60 * 60) + ' sec; Memory used: ' + IntToStr(mem)); 
```

* * *

如果有人感兴趣，这里是[测试应用程序](http://www.sql.ru/forum/actualfile.aspx?id=14326655)，你可以添加 ADO、dbExpress、ZeosLib 和其他你感兴趣的性能比较。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T14:40:18.237

如果您使用的是 XE2，我会推荐 dbExpress。

*   它支持 ODBC（但不支持 SAP HANA）
*   单向数据集可以与 ClientDataSet 一起用于缓存。事实上，ClientDataSets 可用于缓存任何数据集组件。

如果您使用的是 XE3 或更高版本，我会推荐 FireDAC。

*   Embarcadero 收购了 AnyDAC 并将其重命名为 FireDAC。
*   它包含在 Enterprise SKU 及更高版本中。获得许可的 XE3 用户可以免费下载。
*   我相信这将是他们未来的数据访问策略。请参阅[此最近的博客文章](http://blog.blong.com/2013/03/more-on-firedac.html)。

我知道 FireDAC 可以与 XE2 一起使用，但我不确定是否有任何问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T02:47:46.047

我**总是**使用 ADO——将它与 SQLServer、Oracle、Sybase、PostGreSQL 等一起使用。您几乎可以为任何数据库找到 ADO 提供程序。从来没有遇到过我无法通过一些研究解决的问题。由于 ADO 应用如此广泛，因此大多数问题都是众所周知的。UDL 文件可以让您的生活更轻松。

但是我从不在组件面板上使用 Delphi ADO 组件——要么我在内存中使用它们，要么更经常地将 ADO 调用的结果直接转储到 TKBMMemtable 中，并完全避免使用 Delphi 的“开箱即用”的东西。您可以编写一个实用函数来自动为您执行此操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-06T23:05:27.410

Firedac-带有Delphi，因此无论如何您可能都必须为此付费。UNidac-Faster 让你不用那么频繁地升级Delphi，为了让数据Acess不断更新，如果你有一天决定去Lazzarus你也省了很多工作。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2016-07-12T23:34:41.903

许多线程中有很多误解，所以我会尝试给我的 2 美分。问题是我们 Delphian 过去思考过`executables`，所以我们寻找移动数据的方法（特别是当我们的数据库和应用程序服务器托管在外部时）；这些场景永远不会击败`RIA`应用程序，因为您不再移动数据，而只是屏幕的表示。另一个误解是说`TDATASET`不能很好地与`AJAX`. 只是看一些`UNIGUI`例子`youtube`。顺便说一句，我使用的是普通`DataSnap`的`clientdataset`，而不是 ORM。

# rest - 如何通过 REST API 删除关系的索引

> ID：16016705
> 
> 赞同：0
> 
> 时间：2013-04-15T13:41:06.257
> 
> 标签：rest, graph, neo4j

[我在REST API](http://docs.neo4j.org/chunked/stable/rest-api.html)中找不到任何删除关系索引的方法。但我可以通过neo4j webadmin 工具删除关系索引。neo4j server 的稳定版 1.8.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T19:42:01.463

您是否尝试向 发送 HTTP DELETE `http://localhost:7474/db/data/index/relationship/[indexname]`？

# android - 通过按下行的按钮来更改 ListView 项目中的图像状态

> ID：16016707
> 
> 赞同：0
> 
> 时间：2013-04-15T13:41:12.653
> 
> 标签：android, gridview, adapter

我的主要目的是在列表视图中制作一些按钮，以更改某些图像的状态（也在列表视图项目中）。所以我编写了这段代码，创建了一个像这样的自定义适配器：

```
public class CategoriesGridViewAdapter extends BaseAdapter {

private Activity context;

private List<CategoryHolder> mCategoriesList = new ArrayList<CategoryHolder>();
private CategoryHolder mCategoryHolder;

// @SuppressLint("UseSparseArrays")
// private Map<Integer, Boolean> favVisibilitiesMap = new HashMap<Integer,
// Boolean>();

// @SuppressLint("UseSparseArrays")
// private Map<Integer, Boolean> cartVisibilitiesMap = new HashMap<Integer,
// Boolean>();

private ViewHolder holder = null;

private int[] mTestingImagesForCategories = new int[] { R.drawable.pic1,
        R.drawable.pic2, R.drawable.pic3, R.drawable.pic4, R.drawable.pic5

};

public CategoriesGridViewAdapter(Activity activity,
        List<CategoryHolder> categoriesList) {
    this.context = activity;
    this.mCategoriesList = categoriesList;
}

@Override
public int getCount() {

    return mCategoriesList.size();
}

@Override
public Object getItem(int pos) {
    return mCategoriesList.get(pos);
}

@Override
public long getItemId(int arg0) {
    return 0;
}

@Override
public View getView(int pos, View convertView, ViewGroup parent) {

    mCategoryHolder = mCategoriesList.get(pos);

    if (convertView == null) {
        convertView = context.getLayoutInflater().inflate(
                R.layout.cell_categories_gridview, parent, false);

        holder = new ViewHolder(convertView);

        holder.btn_cell_categoryAddCart
                .setOnClickListener(new View.OnClickListener() {

                    @Override
                    public void onClick(View v) {

                        int getPosition = (Integer) v.getTag();

                        CategoryHolder localCategoryHolder = mCategoriesList
                                .get(getPosition);

                        localCategoryHolder.setCartVisible(!mCategoriesList
                                .get(getPosition).isCartVisible());

                        holder.iv_cell_categoryCart
                                .setVisibility(setImageVisibility(localCategoryHolder
                                        .isCartVisible()));

                    }
                });

        holder.btn_cell_categoryAddFav
                .setOnClickListener(new View.OnClickListener() {

                    @Override
                    public void onClick(View v) {

                        int getPosition = (Integer) v.getTag();

                        CategoryHolder localCategoryHolder = mCategoriesList
                                .get(getPosition);

                        localCategoryHolder.setFavVisible(!mCategoriesList
                                .get(getPosition).isFavVisible());

                        holder.iv_cell_categoryFav
                                .setVisibility(setImageVisibility(localCategoryHolder
                                        .isFavVisible()));

                    }
                });

        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }

    holder.btn_cell_categoryAddCart.setTag(pos);
    holder.btn_cell_categoryAddFav.setTag(pos);

    holder.iv_cell_categoryCart
            .setVisibility(setImageVisibility(mCategoryHolder
                    .isCartVisible()));
    holder.iv_cell_categoryFav
            .setVisibility(setImageVisibility(mCategoryHolder
                    .isFavVisible()));

    // just for testing, the final images will be some bitmaps downloaded from a server
    holder.iv_cell_categoryContent
            .setBackgroundResource(mTestingImagesForCategories[pos]);

    return convertView;
}

private int setImageVisibility(boolean isVisible) {
    return (isVisible) ? View.VISIBLE : View.INVISIBLE;
}

static class ViewHolder {

    public ImageView iv_cell_categoryCart;
    public ImageView iv_cell_categoryFav;
    public ImageView iv_cell_categoryContent;
    public Button btn_cell_categoryAddFav;
    public Button btn_cell_categoryAddCart;

    public ViewHolder(View convertView) {

        iv_cell_categoryContent = (ImageView) convertView
                .findViewById(R.id.iv_cell_category_image);
        iv_cell_categoryCart = (ImageView) convertView
                .findViewById(R.id.iv_cell_category_cart);
        iv_cell_categoryFav = (ImageView) convertView
                .findViewById(R.id.iv_cell_category_fav);
        btn_cell_categoryAddFav = (Button) convertView
                .findViewById(R.id.btn_cell_category_add_fav);
        btn_cell_categoryAddCart = (Button) convertView
                .findViewById(R.id.btn_cell_category_add_cart);

    }

} 
```

}

我只是不明白我的代码有什么问题？！

我有这个适配器，我对其进行了调试并且一切正常（更改了我放置在布局中的那些图像的布尔状态），但是：

## 1.

*   它不会使图像（holder.iv_cell_categoryCart，holder.iv_cell_categoryFav）可见/不可见。问题可能是什么？（在每个 setOnClickListener 中使用 notifyDataSetChanged 解决了问题.. 是的，我知道.. 愚蠢的我）

## 2.

*   这些静态图像（mTestingImagesForCategories -- R.drawable.pic1、R.drawable.pic2、R.drawable.pic3、R.drawable.pic4、R.drawable.pic5）从未显示。

此 GridView 的布局如下所示：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<ImageView
    android:id="@+id/iv_cell_category_image"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_above="@+id/lay_cell_category_content"
    android:layout_below="@+id/lay_cell_category_header"
    android:background="@drawable/ic_launcher"
    android:paddingLeft="5dp"
    android:paddingRight="5dp"
    android:paddingTop="5dp"
    android:scaleType="fitXY" />

<RelativeLayout
    android:id="@+id/lay_cell_category_header"
    android:layout_width="fill_parent"
    android:layout_height="@dimen/activity_categories_gridview_cornerimage_height"
    android:layout_alignParentTop="true" >

    <ImageView
        android:id="@+id/iv_cell_category_fav"
        android:layout_width="@dimen/activity_categories_gridview_cornerimage_width"
        android:layout_height="fill_parent"
        android:layout_above="@+id/lay_cell_category_content"
        android:layout_alignParentLeft="true"
        android:background="@drawable/carti" />

    <ImageView
        android:id="@+id/iv_cell_category_cart"
        android:layout_width="@dimen/activity_categories_gridview_cornerimage_width"
        android:layout_height="fill_parent"
        android:layout_alignParentRight="true"
        android:background="@drawable/star" />
</RelativeLayout>

<LinearLayout
    android:id="@+id/lay_cell_category_content"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/btn_cell_category_add_cart"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:focusable="false"
        android:focusableInTouchMode="false"
        android:text="Add Cart"
        android:textSize="12sp" />

    <Button
        android:id="@+id/btn_cell_category_add_fav"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:focusable="false"
        android:focusableInTouchMode="false"
        android:text="Add Fav"
        android:textSize="12sp" />
</LinearLayout> 
```

这种布局的想法是有一个图像的布局主要内容，有 2 个底部按钮，使布局的右上角和左上角的 2 个小图像可见/不可见。（如果用户按下 Add Fav，右上角的星形图像将可见。如果他再次按下它，图像将变得不可见 - 模拟添加/删除产品到收藏夹）。请任何帮助表示赞赏！

LE：我应该提一下，我正在以编程方式在 Fragment（在 ViewPager 中使用）内创建 GridView。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:41:27.717

看起来问题出在 mCategoriesList 上。在活动中设置适配器时它为空，之后我对其进行了初始化，导致它仅显示 gridview 单元布局的静态内容（2 个按钮和 2 个不可更改的图像）。

# ajax - 在页面加载时自动将焦点设置在 p:editor 上

> ID：16016709
> 
> 赞同：3
> 
> 时间：2013-04-15T13:41:29.743
> 
> 标签：ajax, jsf, primefaces, facelets

如何自动将焦点设置[`<p:editor>`](http://www.primefaces.org/showcase/ui/editor.jsf)在页面加载上？

页面加载后，我希望能够在编辑器中编写，而无需额外单击编辑器面板。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T14:02:35.340

Primefaces 提供属性“widgetVar”，因此您可以从客户端获取元素并聚焦它：

```
<h:head>
        <script type="text/javascript">
            function test() {
                xxx.focus();
            }
        </script>
    </h:head>
    <h:body onload="test()">        
        <h:form id="form">  
            <p:inputText id="rongnk" value="test"/>
            <p:editor widgetVar="xxx" id="nkrong" value="123" width="600"/>  
        </h:form>  
    </h:body> 
```

# blackberry-webworks - 黑莓本地存储

> ID：16016712
> 
> 赞同：1
> 
> 时间：2013-04-15T13:41:34.937
> 
> 标签：blackberry-webworks

我正在开发一个混合（phonegap 和 webworks）Blackberry 应用程序。我正在使用 localstroage 来保存可变数据。请告诉我我们如何查看可变数据以及黑莓应用程序在设备中的何处存储该数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:28:21.767

基本演示：

```
//Insert/Update 
window.localStorage.setItem("foo", "bar");       //foo = bar

//Read
var value = window.localStorage.getItem("foo");  //bar

//Remove
window.localStorage.removeItem("foo");  //foo = undefined

//Remove all
window.localStorage.clear();  //length = 0 
```

这是我写的一个例子，展示了如何在 BlackBerry 上使用 localStorage API：http: [//blackberry.github.io/WebWorks-Samples/kitchenSink/html/html5/storage.html](http://blackberry.github.io/WebWorks-Samples/kitchenSink/html/html5/storage.html)

您可以在基于浏览器的网页、PhoneGap 应用程序或 WebWorks 应用程序中重复使用此代码。

# django - Celery, Django, Heroku -- ImportError: No module named tasks

> ID：16016714
> 
> 赞同：0
> 
> 时间：2013-04-15T13:41:40.197
> 
> 标签：django, heroku, celery, django-celery, djcelery

我正在尝试使用 IronMQ 运行 celery 并缓存在 Heroku 上的 Django 项目中，但我收到以下信息：

```
2013-04-14T22:29:17.479887+00:00 app[celeryd.1]: ImportError: No module named tasks 
```

我究竟做错了什么？以下是我的相关代码，djcelery 和我的应用程序都在已安装的应用程序中：

要求（Rabbit AMQP 在那里，因为我在 IronMQ 之前尝试过）：

```
Django==1.5.1
amqp==1.0.11
anyjson==0.3.3
billiard==2.7.3.27
boto==2.8.0
celery==3.0.18
dj-database-url==0.2.1
django-celery==3.0.17
django-storages==1.1.8
gunicorn==0.17.2
iron-cache==0.2.0
iron-celery==0.3.1
iron-core==1.0.2
iron-mq==0.4
iso8601==0.1.4
kombu==2.5.10
psycopg2==2.4.6
python-dateutil==2.1
pytz==2013b
requests==1.2.0
six==1.3.0
wsgiref==0.1.2 
```

简介：

```
web: gunicorn myapp.wsgi
celeryd: celery -A tasks worker --loglevel=info -E 
```

设置：

```
BROKER_URL = 'ironmq://'
CELERY_RESULT_BACKEND = 'ironcache://'

import djcelery
import iron_celery

djcelery.setup_loader() 
```

任务：

```
from celery import task
@task()
def batchAdd(result_length, result_amount): 
```

意见：

```
from app import tasks
r = batchAdd.delay(result_length, result_amount)
return HttpResponse(r.task_id) 
```

还尝试过（在视图中）：

```
from tasks import batchAdd
r = batchAdd.delay(result_length, result_amount)
return HttpResponse(r.task_id) 
```

并尝试过（在视图中）：

```
from app.tasks import batchAdd
r = batchAdd.delay(result_length, result_amount)
return HttpResponse(r.task_id) 
```

这也是我的结构：

```
projectname
--app
----__init__.py
----__init__.pyc
----admin.py
----admin.pyc
----forms.py
----forms.pyc
----models.py
----models.pyc
----tasks.py
----tests.py
----views.py
----views.pyc
--manage.py
--Procfile
--projectname
----__init__.py
----__init__.pyc
----settings.py
----settings.pyc
----static
----templates
----urls.py
----urls.pyc
----wsgi.py
----wsgi.pyc
--requirements.txt 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T15:36:01.360

您是否尝试过通过 manage.py 加载芹菜？

```
python manage.py celery worker --loglevel=info 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T06:42:13.103

您不能只使用以下方法运行芹菜：

```
celery -A tasks worker --loglevel=info -E 
```

Celery 需要带有 -A 选项的 celeryconfig 文件。您应该按照 djcelery 文档中的说明运行 celery。

```
python manage.py celery worker --loglevel=info 
```

此外，您应该将您的 views.py 修复为

```
from app.tasks import batchAdd 
```

# linux - 支持书签的 Linux 文本编辑器

> ID：16016715
> 
> 赞同：1
> 
> 时间：2013-04-15T13:41:41.203
> 
> 标签：linux, editor, bookmarks, nagios

我有大约 19k 行*配置*文件（实际上是在 DSL - Nagios 中），我需要对其进行大量分析，提出重构计划，然后实施。

我正在寻找 - 但没有找到 - 支持**全局**书签的 Linux GUI 文本编辑器 - 即我可以单击一行，给它一个名称/标签，然后让它显示在我可以单击的全局列表中然后跳回去。关键是它必须跨文件工作，所以我可以从一个文件中的位置跳转到另一个文件中的相应位置。

由于它是 DSL，因此我无法找到任何原生支持该语言的 IDE。我试过 Kate，但书签列表仅针对每个文件，并且用行本身的文本“标记”每一行，无法添加自定义注释。

有人知道满足此目标功能集的应用程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T19:52:19.410

您可以使用 Eclipse IDE。添加 EclipseColorer - 用于语法高亮（尝试 .ini 文件格式）和 Eclipse Color Theme 插件。这些插件一起使用非常适合突出显示 Nagios 配置文件。它会做书签，并有一个单独的视口，可拆卸，以便轻松导航它们——即使在多个文件中也是如此。

# mysql - 加入后 MySQL 限制 LEFT JOIN 子查询

> ID：16016719
> 
> 赞同：5
> 
> 时间：2013-04-15T13:41:42.407
> 
> 标签：mysql, join, subquery, limit

目前我有这个查询：

```
SELECT post.id AS postID, sCom.id as CommentID FROM `post` LEFT JOIN (SELECT * FROM `comment` LIMIT 5) AS sCom ON sCom.post_id = post.id; 
```

输出：

```
postID | CommentID
1      | 1
2      | null
3      | null
4      | 2
5      | 3
5      | 4
5      | 5 
```

它有效，但它在加入之前限制了评论表。结果是，它选择了前 5 条评论并将其映射。id 为 5 的所有评论都会被忽略。

如何重写查询以选择最多 5 条评论的帖子？

当前表结构：

邮政 ：

```
如果不存在 `post` 则创建表 (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `feed_id` int(11) 默认为空，
 `user_id` int(11) 默认为 NULL，
 `origin_id` int(11) 默认为 NULL，
 `content` longtext COLLATE utf8_unicode_ci NOT NULL,
 `启用` tinyint(1) NOT NULL,
 `created_at` 日期时间不为空，
 `updated_at` 日期时间不为空，
 主键（`id`），
 KEY `IDX_5A8A6C8D51A5BC03` (`feed_id`),
 KEY `IDX_5A8A6C8DA76ED395` (`user_id`),
 KEY `IDX_5A8A6C8D56A273CC`（`origin_id`）
) 引擎=InnoDB 默认字符集=utf8 排序=utf8_unicode_ci AUTO_INCREMENT=6 ；

```

评论：

```
如果不存在 `comment` 则创建表 (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `feed_id` int(11) 默认为空，
 `user_id` int(11) 默认为 NULL，
 `post_id` int(11) 默认为 NULL，
 `content` longtext COLLATE utf8_unicode_ci NOT NULL,
 `启用` tinyint(1) NOT NULL,
 `created_at` 日期时间不为空，
 `updated_at` 日期时间不为空，
 主键（`id`），
 KEY `IDX_9474526C51A5BC03` (`feed_id`),
 KEY `IDX_9474526CA76ED395` (`user_id`),
 KEY `IDX_9474526C4B89032C`（`post_id`）
) 引擎=InnoDB 默认字符集=utf8 排序=utf8_unicode_ci AUTO_INCREMENT=11 ；

```

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-15T13:48:25.190

这将为每个帖子提供 5 条评论。

```
SELECT  p.*,
        c.*
FROM    Post p
        LEFT JOIN
        (
            SELECT  a.*
            FROM    Comments a
            WHERE    
                    (
                       SELECT   COUNT(*) 
                       FROM     Comments b
                       WHERE    a.Post_ID = b.Post_ID AND 
                                a.ID <= b.ID
                    ) <= 5
        ) c ON  a.ID = c.Post_ID 
```

# android - 谷歌地图 v2 未显示

> ID：16016721
> 
> 赞同：0
> 
> 时间：2013-04-15T13:41:46.717
> 
> 标签：android, maps, fragment, android-fragmentactivity

我有 FragmentActivity 负责拍照并为其布局我有 SurfaceView 负责显示相机预览，另外两个布局（布局 A 和布局 B）在开始时可见 =“gone”，布局 B 中包含地图片段。

当您拍照时，布局 A 变得可见，并且您可以从它切换到布局 B。当您这样做时，地图片段不会显示，而是您可以在打算用于的区域中看到相机预览地图。如果我不去参加其他活动并回到这个活动，地图就在那里。

我在这个应用程序中还有一项活动，其中只有地图，它工作正常。

如果有人遇到这个问题，请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T11:14:24.707

问题是 SurfaceView 和 SupportMapFragment 都使用 openGL，如果你想使用其中一个（可见）而不是你必须删除（消失）另一个。

# javascript - 如何计算灵活图像上的区域坐标

> ID：16016722
> 
> 赞同：0
> 
> 时间：2013-04-15T13:41:47.447
> 
> 标签：javascript, jquery, image, responsive-design

想象一个带有图像面部标记的响应式应用程序。您可以拖动一个区域，标记人员并使用（[http://odyniec.net/projects/imgareaselect/](http://odyniec.net/projects/imgareaselect/)）记录坐标

但是想象一下用 css 调整图像大小以适应窗口大小，当然绝对坐标不再适合了。

实现这一目标的更好策略是什么？

# php - 是否有一个好的 PHP 库可用于将布尔搜索运算符解析为 MySQL 全文运算符？

> ID：16016723
> 
> 赞同：6
> 
> 时间：2013-04-15T13:41:48.200
> 
> 标签：php, mysql, boolean-search

我们已经使用 MySQL 全文搜索好几年了，但需求已经发生了变化。我们希望将 AND/OR/NOT 参数解析为 MySQL 能够理解的形式。我写了一个单元测试，很明显这很复杂。

我相信更多的人会遇到这个问题，所以我想一定有某种图书馆能够为我做到这一点。我试过谷歌，但不幸的是，我找不到这样的图书馆。有人知道好的吗？

该库应该能够处理引号、括号、AND/OR/NOT 运算符，在我们的例子中，它应该默认为 AND 而不是 OR（如果没有设置运算符）。以下是我的一些预期结果：

*   'ict' 变成 '+ict'
*   'ict it' 变成 '+ict +it'
*   'ict OR it' 变成 'ict it'
*   '不是 ict' 变成 '-ict'
*   'it NOT ict' 变成 '+it -ict'
*   'web AND (ict OR it)' 变成 '+web +(ict it)'
*   'ict OR (it AND web)' 变成 'ict (+it +web)'
*   'ict NOT (ict AND it AND web)' 变成 '+ict -(+ict +it +web)'
*   'php OR (NOT web NOT embedded ict OR it)' 变成 'php (-web -embedded ict it)'
*   '(web OR embedded) (ict OR it)' 变成 '+(web embedded) +(ict it)'
*   开发 AND (web OR (ict AND php))' 变为 '+develop +(web (+ict +php))'
*   '"ict' 变成 '+"ict"'
*   '"ict OR it"'*保持* '+"ict OR it"'

这是我们过去几年使用的功能（不能正常工作）：

```
/**
 * Parses search string.
 * @param string $s The unparsed search string.
 * @return string $s The parsed search string.
 */
public function parseSearchString( $s )
{
    // Place a space at the beginning.
    $s = ' ' . $s;

    // AND - Remove multiple spaces, AND, &.
    $s = preg_replace( '/\s\s+/', ' ', $s );
    $s = preg_replace( '/\sAND\s/i', ' ', $s );
    $s = preg_replace( '/\s&\s/', ' ', $s );

    // OR - Make replacements. Execute double, so we replace all occurences.
    $s = preg_replace( '/(\w+)\s(?:OR|\|)\s(\|?\w+)/i', '|\\1|\\2', $s );
    $s = preg_replace( '/(\w+)\s(?:OR|\|)\s(\|?\w+)/i', '|\\1|\\2', $s );
    $s = preg_replace( '/(\w+)\s*(?:\\\|\\/)\s*(\|?\w+)/i', '|\\1|\\2', $s );
    $s = preg_replace( '/(\w+)\s*(?:\\\|\\/)\s*(\|?\w+)/i', '|\\1|\\2', $s );

    // NOT
    $s = preg_replace( '/\bNOT\s(\w+)/i', '|-\\1', $s );

    // Quoted strings.
    $s = preg_replace( '/\s"/', ' +"', $s );

    // Place + in front of words.
    $s = preg_replace( '/\s(\w+)/', ' +\\1', $s );

    // Replace | to spaces.
    $s = preg_replace( '/\|/', ' ', $s );

    return trim( $s );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:05:41.463

这可能无法回答您的问题，但如果您需要更高级的全文搜索功能，我建议您使用 sphinx 或 apache solr 之类的东西。[https://stackoverflow.com/a/1297561/2170561](https://stackoverflow.com/a/1297561/2170561)

# vb.net - 无需单击即可编辑数据网格

> ID：16016725
> 
> 赞同：0
> 
> 时间：2013-04-15T13:41:50.150
> 
> 标签：vb.net, gridview, ultrawingrid

我有一个`UltraGridWinGrid`，我需要在不使用鼠标的情况下浏览它。
我可以使用`Tabs`. 我可以用和
将焦点放在任何行上。`Tabs``Arrow Keys`

突出显示一行后，如何选择特定单元格来编辑其内容？（我所有的单元格都是可编辑的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:01:18.700

如果您可以修改按下 TAB 键时执行的代码，您可以手动选择下一个单元格并开始编辑，如下所示：

```
DataGridView.CurrentCell = theNextCell;
DataGridView.BeginEdit(true) 
```

您仍然需要计算下一个单元格。这应该很容易，当您按 Tab 时增加列索引，但是如果您到达最后一列，只需更改行并将索引设置为 0。

对于箭头键，您可以根据箭头增加/减少列或行索引，并应用与上面相同的代码。

# iphone - 如何检测iphone中按下的键盘键？

> ID：16016729
> 
> 赞同：13
> 
> 时间：2013-04-15T13:41:55.210
> 
> 标签：iphone, ios, objective-c

我想检测用户何时按下任何键盘键。

仅在键入任何字符而不是在显示键盘时调用的任何方法。

谢谢！！

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-04-15T13:51:29.710

每次用户按键时，您都可以直接处理键盘事件：

**迅速**

对于 Textfield，请使用以下委托方法 -

```
func textField(_ textField: UITextField, shouldChangeCharactersIn range: NSRange, replacementString string: String) -> Bool { 
```

}

对于 TextView 使用以下委托方法 -

```
func textView(_ textView: UITextView, shouldChangeTextIn range: NSRange, replacementText text: String) -> Bool {

} 
```

**目标 C**

如果是**UITextField**

```
- (BOOL)textField:(UITextField *)textField
          shouldChangeCharactersInRange:(NSRange)range
          replacementString:(NSString *)string {

    // Do something here...
} 
```

在**UITextView**的情况下：

```
- (BOOL)textView:(UITextView *)textView
      shouldChangeTextInRange:(NSRange)range 
      replacementText:(NSString *)text {

    // Do something here...
} 
```

因此，每次使用键盘按下的每个键都会调用其中一个方法。

你也可以使用 NSNotificationCenter。您只需要在 ViewDidLoad 方法中添加任何这些。

```
NSNotificationCenter *notificationCenter = [NSNotificationCenter defaultCenter]; 
```

**UITextField：**

```
[notificationCenter addObserver:self
                       selector:@selector(textFieldText:)
                           name:UITextFieldTextDidChangeNotification
                         object:yourtextfield]; 
```

然后你可以把你的代码放在方法中`textFieldText:`：

```
- (void)textFieldText:(id)notification {

    // Do something here...
} 
```

**UITextView**

```
[notificationCenter addObserver:self
                       selector:@selector(textViewText:)
                           name:UITextViewTextDidChangeNotification
                         object:yourtextView]; 
```

然后你可以把你的代码放在方法中`textViewText:`：

```
- (void)textViewText:(id)notification {

    // Do something here...
} 
```

希望能帮助到你 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T13:46:38.720

假设由于用户点击 UITextfield 而显示键盘，您可以让自己成为委托并实现此方法：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string 
```

每次用户按键时都会调用它。

# php - 设置PDO连接超时时间小于1秒

> ID：16016731
> 
> 赞同：3
> 
> 时间：2013-04-15T13:42:04.483
> 
> 标签：php, mysql, pdo

我正在使用 PHP 和 PDO 对象连接到 mysql。我有 3 个数据库服务器，我的 php 代码可以连接到这些服务器。如果我尝试连接到 DB 服务器 #1 并且连接失败，我想立即尝试连接到 DB 服务器 #2。我可以使用下面的代码设置连接超时时间的最低值是 1 秒。

`$DBH = new PDO("mysql:host=$host;dbname=$dbname", $username, $password,array(PDO::ATTR_TIMEOUT => "1",PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION));`

理想情况下，我想将超时时间设置为 <50 毫秒。或者如果可能的话 0ms。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T13:44:42.670

这是不可能的，因为底层的 MySQL 驱动程序不允许这样做：

[**请求 #60716**：能够以毫秒为单位设置 PDO 连接超时](https://bugs.php.net/bug.php?id=60716)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:48:27.510

我认为使用毫秒设置超时是不可能的。参考php [doucmnetation](http://www.php.net/manual/en/mysql.configuration.php#ini.mysql.connect-timeout)：`mysql.connect_timeout`

> mysql.connect_timeout：
> 
> 以秒为单位的连接超时。在 Linux 上，此超时也用于等待来自服务器的第一个答复。

顺便说一句，我觉得你要做的事情对我来说听起来有点*老套*。如果您有专业要求，我会使用负载均衡器。你可以按照这个[教程](http://www.severalnines.com/resources/clustercontrol-mysql-haproxy-load-balancing-tutorial)

# windows - 有没有办法找到要在 GetProcAddress 中使用的 C++ 错位名称？

> ID：16016732
> 
> 赞同：9
> 
> 时间：2013-04-15T13:42:05.030
> 
> 标签：windows, visual-c++

与 C++一起使用的常见“解决方案”`GetProcAddress`是“extern“C”，但这会破坏重载。名称修改允许多个函数共存，只要它们的签名不同。但是有没有办法找到这些修改后的名称`GetProcAddress`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T13:47:10.953

VC++ 编译器知道它自己的名称修饰方案，那么为什么不使用它呢？在内部`template<typename T> T GetProcAddress(HMODULE h, const char* name)`，宏`__FUNCDNAME__`包含`GetProcAddress`. 这包括`T`部分。因此，在 内部`GetProcAddress<void(*)(int)`，我们有一个名称为 的子字符串`void(*)(int)`。从中，我们可以简单地推导出`void foo(int);`

此代码依赖于 VC++ 宏`__FUNCDNAME__`。~~对于MinGW~~ ~~，您需要基于此`__PRETTY_FUNCTION__`~~。

```
FARPROC GetProcAddress_CppImpl(HMODULE h, const char* name, std::string const& Signature)
{
    // The signature of T appears twice in the signature of T GetProcAddress<T>(HMODULE, const char*) 
    size_t len = Signature.find("@@YA");
    std::string templateParam = Signature.substr(0, len);
    std::string returnType    = Signature.substr(len+4);
    returnType.resize(templateParam.size()); // Strip off our own arguments (HMODULE and const char*)
    assert(templateParam == returnType); 
    // templateParam and returnType are _pointers_ to functions (P6), so adjust to function type (Y)
    std::string funName = "?" + std::string(name) + "@@Y" + templateParam.substr(2);
    return ::GetProcAddress(h, funName.c_str());
}

template <typename T>
T GetProcAddress(HMODULE h, const char* name)
{
    // Get our own signature. We use `const char* name` to keep it simple.
    std::string Signature = __FUNCDNAME__ + 18; // Ignore prefix "??$GetProcAddress@"
    return reinterpret_cast<T>(GetProcAddress_CppImpl(h, name, Signature));
}

// Showing the result

struct Dummy { };

__declspec(dllexport) void foo( const char* s)
{
    std::cout << s;
}

__declspec(dllexport) void foo( int i, Dummy )
{
    std::cout << "Overloaded foo(), got " << i << std::endl;
}

__declspec(dllexport) void foo( std::string const& s )
{
    std::cout << "Overloaded foo(), got " << s << std::endl;
}

__declspec(dllexport) int foo( std::map<std::string, double> volatile& )
{
    std::cout << "Overloaded foo(), complex type\n";
    return 42;
}

int main()
{
    HMODULE h = GetModuleHandleW(0);
    foo("Hello, ");
    auto pFoo1 = GetProcAddress<void (*)( const char*)>(h, "foo");
    // This templated version of GetProcAddress is typesafe: You can't pass 
    // a float to pFoo1\. That is a compile-time error.
    pFoo1(" world\n");
    auto pFoo2 = GetProcAddress<void (*)( int, Dummy )>(h, "foo");
    pFoo2(42, Dummy()); // Again, typesafe.
    auto pFoo3 = GetProcAddress<void (*)( std::string const& )>(h, "foo");
    pFoo3("std::string overload\n");
    auto pFoo4 = GetProcAddress<int (*)( std::map<std::string, double> volatile& )>(h, "foo");
    // pFoo4 != NULL, this overload exists.
    auto pFoo5 = GetProcAddress<void (*)( float )>(h, "foo");
    // pFoo5==NULL - no such overload.
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-15T13:46:48.903

用于`dumpbin /exports 'file.dll'`获取所有符号的装饰/未装饰名称。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-15T13:51:06.470

仅仅通过使用是不可能做到的`GetProcAddress`。但是，一种方法是枚举该特定模块的所有导出函数，并进行模式匹配以查找所有损坏的名称。

更具体地说，请在[此处参考此答案](https://stackoverflow.com/a/4354755/762123)。您需要做的唯一更改是将`TRUE`for参数和for`MappedAsImage`参数的返回值传递给函数调用。`GetModuleHandle``Base``ImageDirectoryEntryToData`

```
void EnumerateExportedFunctions(HMODULE hModule, vector<string>& slListOfDllFunctions)
{
    DWORD *dNameRVAs(0);
    _IMAGE_EXPORT_DIRECTORY *ImageExportDirectory;
    unsigned long cDirSize;
    _LOADED_IMAGE LoadedImage;
    string sName;
    slListOfDllFunctions.clear();

    ImageExportDirectory = (_IMAGE_EXPORT_DIRECTORY*)
        ImageDirectoryEntryToData(hModule,
        TRUE, IMAGE_DIRECTORY_ENTRY_EXPORT, &cDirSize);
    if (ImageExportDirectory != NULL)
    {
        dNameRVAs = (DWORD *)ImageRvaToVa(LoadedImage.FileHeader, 
            LoadedImage.MappedAddress,
        ImageExportDirectory->AddressOfNames, NULL);
        for(size_t i = 0; i < ImageExportDirectory->NumberOfNames; i++)
        {
            sName = (char *)ImageRvaToVa(LoadedImage.FileHeader, 
                    LoadedImage.MappedAddress,
                   dNameRVAs[i], NULL);
         slListOfDllFunctions.push_back(sName);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-26T11:26:06.373

我不明白为什么你会想要/需要[MSalters 解决方案](https://stackoverflow.com/a/16016860/4832499)的 constexpr 版本，但它就是这样，完成了命名空间修改。用于

```
using F = int(double*);
constexpr auto f = mangled::name<F>([]{ return "foo::bar::frobnicate"; });
constexpr const char* cstr = f.data(); 
```

其中`F`是函数签名，`foo::bar::frobnicate`是函数的（可能是限定的）名称。

```
#include<string_view>
#include<array>

namespace mangled
{
    namespace detail
    {
        template<typename F>
        inline constexpr std::string_view suffix()
        {
            auto str = std::string_view(__FUNCDNAME__);
            return str.substr(14, str.size() - 87);
        }

        template<typename L>
        struct constexpr_string
        {
            constexpr constexpr_string(L) {}
            static constexpr std::string_view data = L{}();
        };

        template<typename Name>
        inline constexpr int qualifiers()
        {
            int i = -2, count = -1;
            while(i != std::string_view::npos)
            {
                i = Name::data.find("::", i + 2);
                count++;
            }
            return count;
        }

        template<typename Name>
        inline constexpr auto split()
        {
            std::array<std::string_view, qualifiers<Name>() + 1> arr = {};
            int prev = -2;
            for(int i = arr.size() - 1; i > 0; i--)
            {
                int cur = Name::data.find("::", prev + 2);
                arr[i] = Name::data.substr(prev + 2, cur - prev - 2);
                prev = cur;
            }
            arr[0] = Name::data.substr(prev + 2);
            return arr;
        }

        template<typename F, typename Name>
        struct name_builder
        {
            static constexpr auto suf = detail::suffix<F>();
            static constexpr auto toks = split<Name>();
            static constexpr auto len = Name::data.size() + suf.size() - toks.size() + 6;
            static constexpr auto str = [] {
                std::array<char, len> arr = {};
                arr[0] = '?';
                int i = 1;
                for(int t = 0; t < toks.size(); t++)
                {
                    if(t > 0)
                        arr[i++] = '@';
                    for(auto c : toks[t])
                        arr[i++] = c;
                }

                arr[i++] = '@';
                arr[i++] = '@';
                arr[i++] = 'Y';

                for(auto c : suf)
                    arr[i++] = c;

                return arr;
            }();
        };
    }

    template<typename F, typename LambdaString>
    inline constexpr std::string_view name(LambdaString)
    {
        using Cs = detail::constexpr_string<LambdaString>;
        using N = detail::name_builder<F, Cs>;
        return {N::str.data(), N::len};
    }
} 
```

# apache - 带有 LDAP 身份验证的 SVN 不起作用

> ID：16016735
> 
> 赞同：2
> 
> 时间：2013-04-15T13:42:12.593
> 
> 标签：apache, svn, ldap, openldap

我将首先从我的设置开始。为此，我们有 2 台服务器

Server1 将用于所有源代码、文件等，而在 Server2 上，我们拥有所有用户信息和登录信息。两台服务器都在 Centos 6.4 上运行

现在我们想在 server1 上设置一个 SVN 存储库，它与 apache (httpd) 一起使用，并有一个使用服务器 2 帐户的 LDAP 身份验证。

以前我设置了一个 CVS repo aswel，所以我 100% 确定 ldap 正在工作。

我的 SVN 存储库正在与 apache 一起正常工作，但我似乎无法正确设置我的 ldap 身份验证。

我已经找了几天了，我不知道该怎么办了。

我的`/etc/httpd/conf.d/subversion.conf`样子如下

```
<Location /svn>

    DAV svn
    SVNPath                 /var/www/svn/testProject
    AuthType                Basic
    AuthName                "My repo"
    AuthzLDAPAuthoritative  on
    AuthLDAPURL             "ldap://192.168.1.2:389/cn=users,dc=server2,dc=intranet,dc=myCompany,dc=com?sAMAccountName?sub?(objectClass=*)" NONE
    AuthUserFile            /var/www/svn-auth-conf
    Require valid-user
    #AuthzSVNAccessFile     /var/www/svn-acces-control 
```

我`/etc/openldap/ldap.conf`在 server1 上看起来像这样

```
REFERRALS off
TLS_CACERTDIR /etc/openldap/cacerts
URI ldap://macserver.intranet.zappware.com
BASE cn=users,dc=server2,dc=intranet,dc=myCompany,dc=com 
```

在 server1 上，我具有 root 访问权限，因此我能够正确设置它。当我在我的用户帐户上转到 Server2 时，我可以像这样进行 ldapsearch

```
userM$ ldapsearch -x -b cn=users,dc=server2,dc=intranet,dc=myCompany,dc=com 
```

我获得了该服务器上的所有用户帐户

但是当我尝试`ldapsearch -x -b cn=users,dc=server2,dc=intranet,dc=myCompany,dc=com -W sAMAccount` Server2 时会询问我 LDAP 密码。但是我没有那个密码，我们以前负责所有服务器工作的 IT 经理已经离开了公司。

所以我想我可以再输入一个密码并输入

```
/etc/openldap/slapd.conf 
```

但是当我在服务器 2 上检查该文件时，它只是空的

希望有人能给我一些关于如何解决这个问题的新的和有用的提示

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T14:48:59.027

好的，我解决了

更改了我的 LDAPURL，因为我不需要绑定它。

```
 <Location /svn>

        DAV svn
        SVNPath                 /var/www/svn/testProject
        AuthBasicProvider       ldap
        AuthType                Basic
        AuthName                "My repo"
        AuthzLDAPAuthoritative  off
        AuthLDAPURL             "ldap://192.168.1.2:389/cn=users,dc=server2,dc=intranet,dc=myCompany,dc=com" NONE
        Require valid-user
</Location> 
```

我忘了声明**AuthBasicProvider ldap**

希望这对其他人有用

# javascript - 制作 select2 的滚动输入类型文本

> ID：16016737
> 
> 赞同：2
> 
> 时间：2013-04-15T13:42:17.027
> 
> 标签：javascript, jquery, jquery-select2

我正在使用 select2 代替搜索框。

在这里我用来加载这样的国家值

```
 <label class="description"> Countries </label>
<input type="text" placeholder="Enter Comma Separated Countries..." class="save_check" 
    style="overflow: auto; width: 208px; margin: 5px 0px 5px; border-style: solid;" id="countries" /> 
```

这里发生的情况是，每当我在其中选择值时，此输入类型文本的高度会继续增加，超出其父 div 高度，我不希望它随着参数的增加而滚动。在`select2.css`我改变`overflow: auto`但没有工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T14:40:02.837

将高度设置为`overflow: auto`要工作的元素。

```
.select2-container-multi .select2-choices {
 height: 70px; 
 overflow: auto;
} 
```

# c++ - 使用库编译 C++ 项目

> ID：16016739
> 
> 赞同：0
> 
> 时间：2013-04-15T13:42:20.437
> 
> 标签：c++, compiler-errors, g++, box2d, sfml

我的朋友在 Windows 上的 Visual Studio 中开发了一个 C++ 游戏，我想在我的 Linux x64 机器上编译它。我对 C++ 不是很熟悉，但我正在命令行上尝试 g++。但是我只得到一堆*未定义的参考*错误。

基本文件结构是：

```
Libraries/SFML-2.0/lib
Libraries/SFML-2.0/include
Libraries/SFML_Linux64/lib
Libraries/SFML_Linux64/include
Libraries/Box2D/lib
Libraries/Box2D/include
Libraries/Box2DLinux/lib
Libraries/Box2DLinux/include
Game
Game/lib
Game/includes
Game/... (other subdirectories) 
```

我尝试了以下命令：

`g++ -Wall Multiplaya/app.cpp -I Libraries/SFML_Linux64/include/ -I Libraries/Box2DLinux/include/ -L Libraries/SFML_Linux64/lib/ -L Libraries/Box2DLinux/lib/`

这是我得到的错误（有些行被剪断并替换为`...`）：

```
/usr/lib/gcc/x86_64-linux-gnu/4.7/../../../x86_64-linux-gnu/crt1.o: I funktionen "_start":
(.text+0x20): undefined reference to `main'
/tmp/ccFXe37c.o: I funktionen "mp::createNetworkThread(void*)":
app.cpp:(.text+0x10): undefined reference to `worldDataMutex'
app.cpp:(.text+0x15): undefined reference to `sf::Mutex::lock()'
...
/tmp/ccFXe37c.o: I funktionen "mp::App::exec()":
app.cpp:(.text+0x148): undefined reference to `mp::ResourceHandler::instance()'
app.cpp:(.text+0x15a): undefined reference to `mp::ResourceHandler::loadTexture(std::string)'
app.cpp:(.text+0x3d7): undefined reference to `mp::Window::Window(mp::WorldData*)'
app.cpp:(.text+0x406): undefined reference to `mp::Controller::Controller(mp::World*, mp::Window*)'
...
app.cpp:(.text+0x471): undefined reference to `sf::Mutex::unlock()'
app.cpp:(.text+0x4bb): undefined reference to `sf::Thread::launch()'
app.cpp:(.text+0x4d7): undefined reference to `sf::Clock::Clock()'
app.cpp:(.text+0x4e6): undefined reference to `sf::Clock::getElapsedTime() const'
...
collect2: fel: ld returnerade avslutningsstatus 1 
```

（希望你能看透上面的瑞典文。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T14:17:34.560

您为链接器提供库路径非常有礼貌。但是，链接器是忘恩负义的 slob，当它们看到对函数的未定义引用时，通常*不会自行查找任何库文件。*

像，`undefined reference to `sf::Mutex::lock()`-我敢打赌目录`libsfml-system.so.2.0`中有或其他任何东西，`Libraries/SFML_Linux64/lib/`定义为`sf::Mutex::lock()`. 但是链接器不在乎。您必须`-lsfml-system`在编译调用结束时说。

这将有助于`g++`理解不仅在`libstdc++`库中查找函数，而且在`libsfml-system`文件中查找函数。如果`g++`碰巧在默认或附加（用`-L`标志指定）库目录中找到这样的文件，他将使用它来解析对函数调用的引用。

但是你必须明确地告诉它你想要放入哪些库文件，只指定带有库的*目录*并没有多大作用。所以，尝试使用

```
g++ -Wall Multiplaya/app.cpp -I Libraries/SFML_Linux64/include/ -I Libraries/Box2DLinux/include/ -L Libraries/SFML_Linux64/lib/ -L Libraries/Box2DLinux/lib/ -lsfml-system 
```

> # 如何构建 C++ 程序

C++ 程序的构建分为两步：第一步是编译，第二步是链接。

在编译期间，您将源文件转换为目标文件——其中包含已编译的机器代码。现在有一个技巧你必须明白。说，如果你`a.cpp`有

```
// a.cpp
int f(int x);

int main() {
    return f(42);
} 
```

你可以编译它，`g++ -c a.cpp`它会得到你的目标文件`a.o`（带有编译的代码），没有任何编译错误。可是等等！里面的内容没有实际的`f()`定义`a.cpp`！

现在，当您进行第二步，链接和调用`g++ -o test a.o`时，它会抱怨有未定义的引用`f()`。所以让我们`b.cpp`用这个文本：

```
// b.cpp
int f(int x) {
    return 2 * x - 3;
} 
```

编译它`g++ -c b.cpp`然后执行链接`g++ -o test a.o b.o`- 哇，现在它链接没有错误！

发生了什么？好吧，当编译器看到一个函数调用时，它在目标文件中放入的不是实际`call`指令，而是一个占位符，上面写着“调用具有某某名称和某某参数的函数”。然后链接器获取一堆目标文件，并将它们缝合在一起。当它看到这样的占位符时，它会在给定它的目标文件中查找提到的函数，并实际调用它而不是占位符。

因此，C++ 程序的构建看起来像这样：

1.  对于您拥有的每个`x.cpp`文件，请致电`g++ -c x.cpp <bunch of flags> -I<include directories>`
2.  然后打电话`g++ -o resultprogram a.o b.o c.o d.o ... <bunch of flags> -L<library directories> -l<additional libraries>`

`-l`flag 告诉链接器，如果他看到对函数的调用，并且在指定的目标文件（ao、bo 等）中的任何地方都没有定义这样的函数，那么它应该在这个库中查找。请不要，链接器不会查看任何目标文件和/或库，除了您指定的那些（好的，它也会查看标准 C++ 库`libstdc++`，但仅此而已）。

但是，如果您有 10 个或更多文件，则手动执行此过程非常无聊。这就是人们使用“项目文件”和“构建系统”的原因。当 Visual Studio 构建项目时，它会执行我提到的所有步骤：它编译项目中的每个文件，然后将结果链接在一起。在 Linux 上，您没有 Visual Studio，但您有`make`实用程序。我相信有一些实用程序可以将 VS 项目转换为 makefile。

# php - 使用 ajax post 方法从 DB 结果创建 JSON 对象以回发到 jquery UI 对话框

> ID：16016744
> 
> 赞同：0
> 
> 时间：2013-04-15T13:42:29.300
> 
> 标签：php, javascript, jquery, json, jquery-ui

我有一个脚本，可以在从数据库中相关类别的页面加载时从数据库加载示例图像。

```
<?php
$category = 'granite'; 
$samples = 'SELECT * FROM material WHERE material_type = :cat';
$res = $db->prepare($samples);
$res->execute(array(':cat' => $category));
$count = $res->rowCount();
if($count > 0) 
while ($row = $res -> fetch()){
    $postimggranite = $row[mat_image];
    $postidgranite = $row[id];
?>
<?php
    echo "<div class='sample'>";
    echo "<h3 class='sample_h'>$row[name]</h3>";
    echo "<a href='/images/granite-worktops/samples/$postimggranite'><img src='/images/granite-worktops/thumbs/$postimggranite' alt='$row[name]' width='100' height='100' class='aligncenter size-full' title='$row[name]'></a>";
    echo "<br /><a class=\"button\" href=\" \" rel=\"nofollow\" onClick=\"user_notice(this,''); return false;\">More Details</a>";
    echo "</div>";
}
?> 
```

正如您在关闭 div 之前的最后一个回显中从上面的脚本中看到的那样，我有一个“更多详细信息”按钮，通过单击屏幕上出现的对话框，我需要显示来自同一数据库的其他信息。我正在计划的方法使用是

```
function user_dialog(a,b){
    "undefined"!=typeof jQuery.ui?($("#dialog").attr("title","Detailed Information").html(a),
    $("#dialog").dialog({
        modal:true,
        width:400,
        buttons: {
            Cancel: function() {
                $(this).dialog("close");
                },
                Download: function(){
                    $(this).dialog("close");
                    window.location=b
                    }
                    }
                    }
                    ))
                    :window.location=b}

function user_notice(a){
    download_link=$(a).attr("href");
    $.ajax({
        type:"POST",
        url:"/includes/json.php",
        data:"action=reminder&thepath="+download_link,
        dataType:"json",
        error:function(){
            window.location=download_link
            },
        success:function(a){
            1==a.status&&user_dialog(a.html,download_link);
            }
            })
            }; 
```

这里还有我的 json.php 文件的脚本

```
<?php
header('X-Robots-Tag: noindex, noarchive');
$a = session_id();
if(empty($a)) session_start();
if($_SERVER['HTTP_REFERER']){

  $resp_dialog = array(
    'status' => 1,
    'html' => '<p>Here is you sample and rest of staff</p>'
  );
  echo json_encode($resp_dialog);
  }else{
      header('HTTP/1.1 403 Forbidden');
      exit;
      }
?> 
```

很明显，这一切正常，并且该行`<p>Here is you sample and rest of staff</p>`出现在对话框中，但我真正需要的是创建一个 json 对象，该对象从 DB 带来额外的信息，并且不知道`json.php`文件内部的位置或创建某种额外的文件并放置在 href用`urlid="something to get fromdb"`比`$_GET['urlid']`在`json.php`发送它做数据库。基本上不知道做什么和在哪里做。

请放轻松，因为我还在学习这一切，而且大部分内容对我来说还是很新的，所以如果我没有正确解释某些内容，请原谅我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:06:54.503

您需要在 $.ajax 中传递您想要详细说明的类别的 ID。

```
$.ajax({
    type:"POST",
    url:"/includes/json.php",
    data:['cat_id': cat_id], // passing var cat_id from the link... 
```

那么你的 json.php 文件应该是这样的：

```
<?php
header('X-Robots-Tag: noindex, noarchive');
$a = session_id();
if(empty($a)) session_start();
if($_SERVER['HTTP_REFERER']){

  $cat_id = $_POST['cat_id']; // Grab the Id of the category you want to detail...

   // Here you have to fetch the info from the DB...
   $samples = '... WHERE cat_id = :cat'; // Create the sql here!
   $res = $db->prepare($samples);
   $res->execute(array(':cat' => $cat_id));
   $count = $res->rowCount();
   $htmlToDisplay = '';
   if($count > 0) 
   while ($row = $res -> fetch()){
    $htmlToDisplay += $row['...']; // format yout output...
  }

  $resp_dialog = array(
    'status' => 1,
    'html' => $htmlToDisplay,
  );
  echo json_encode($resp_dialog);
  }else{
      header('HTTP/1.1 403 Forbidden');
      exit;
      }
?> 
```

**编辑：**

要创建“更多详细信息”链接，请尝试执行以下操作：

```
echo "<div class='sample'>";
/* ... */
// Passing $row[id] to user_notice() function!
echo "<br /><a class=\"button\" onClick=\"user_notice(this,". $row[id] ."); return false;\">More Details</a>";
echo "</div>"; 
```

然后，将`user_notice()`函数更改为：

```
function user_notice(a,cat_id){ // New parameter cat_id!
    download_link=$(a).attr("href");
    $.ajax({
        type:"POST",
        url:"/includes/json.php",
        data:{ cat_id: cat_id }, // Passing cat_id to json.php... don't forget to pass your other variables
        /* ... */ 
```

[在此处](http://api.jquery.com/jQuery.ajax/)查看如何通过 $.ajax 传递变量

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:58:44.897

在 $.Ajax() 函数中更改您传递的数据

```
data:"action=reminder&thepath="+download_link, 
```

至

```
data: "{'action':'reminder','thepath':'"+download_link+"'}" 
```

# android - 在哪里可以找到 BlackBerry 的 Android 运行时？

> ID：16016747
> 
> 赞同：0
> 
> 时间：2013-04-15T13:42:35.970
> 
> 标签：android, blackberry, runtime

黑莓现在有一个[Android Runtime](https://developer.blackberry.com/android/)。凉爽的。但我想知道这个运行时是否可以自行下载。我读到只有 BlackBerry 10 设备带有这个运行时，我正在研究如何将我的 Android 应用程序放在旧的 BlackBerries 上。有人知道下载运行时的位置（不是模拟器或打包应用程序的工具）吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T13:51:17.360

AFAIK 无法下载，因为它是操作系统本身的一部分。无论如何，Blackberry Playbook 也带有 Androud Runtime。

# python - Python - 不执行异常处理程序

> ID：16016749
> 
> 赞同：0
> 
> 时间：2013-04-15T13:42:40.113
> 
> 标签：python, argparse

我不知道为什么，但是 cislo 仍然是 10，当我在程序结束时打印它时，所以异常处理程序没有被执行，但我确信异常被引发了。

```
import argparse
import locale
import sys

locale.setlocale(locale.LC_ALL, 'cs_CZ.UTF-8')

cislo = 10

parser = argparse.ArgumentParser(prog='dka', description="Determinizace konecneho automatu(DKA)")
parser.add_argument("--inputs", help='vstupni soubor', default=sys.stdin)

try:
    parser.parse_args(['--input', 'agas', '--input', 'agag'])
except argparse.ArgumentError:
    cislo = 20

print(cislo) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T13:47:03.467

没有引发异常有两个原因：

`--inputs`参数不是必需的。

```
 parser.add_argument("--inputs", help='vstupni soubor', default=sys.stdin, required=True) 
```

解析器接受`--input`缩写`--inputs`，因为没有歧义。

argparse 也不会引发 ArgumentError，它只会退出。您可以捕获 SystemExit 或子类 ArgumentParser 来覆盖此行为。

*   [`required`参数_](http://docs.python.org/2/library/argparse.html#required)
*   [参数缩写](http://docs.python.org/2/library/argparse.html#argument-abbreviations)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T14:07:42.940

那就扩展类吧。

```
class myparse(argparse.ArgumentParser):
    def exit(self,status,message):
        print("You are bad: ", status, message)
        exit(5)

cislo = 10

parser = myparse(prog='dka', description="Determinizace konecnehoautomatu(DKA)") 
```

给出：

```
usage: dka [-h] [--inputs INPUTS] 
You are bad:  2 dka: error: unrecognized arguments: --inputss agas 
```

# html - 悬停链接上的 CSS3 HTML5 跨浏览器 3d 翻转效果

> ID：16016751
> 
> 赞同：2
> 
> 时间：2013-04-15T13:42:47.457
> 
> 标签：html, css, hyperlink, css-transitions

我在我的网站上放置了几个链接，放在 div 和 span 标签内，当将鼠标悬停在它们上面时，它们会以 3d 外观翻转以显示新消息。[看这里，翻过第一段文字中的链接](http://elitedesignstudios.com/about/)。它工作正常，但我有一些问题。显示的文本有点模糊，我无法修复它，如果我包含一个比我的链接文本长几个字符的显示消息，它将切断它而不是扩展它。我认为这只发生在“溢出”声明中。想法有人吗？

的HTML：

```
<a href="/portfolio" title="View Our Portfolio" class="roll-link">
<span data-title="Check It Out ...">Our Portfolio</span></a> 
```

CSS：

```
/* ROLL LINKS */

.roll-link {
display: inline-block;
overflow: hidden;
vertical-align: top;
-webkit-perspective: 600px;
-moz-perspective: 600px;
-webkit-perspective-origin: 50% 50%;
-moz-perspective-origin: 50% 50%;
text-decoration:underline;
}

.roll-link:hover {
text-decoration:none;
}

.roll-link span {
display: block;
position: relative;
padding: 0 2px;
-webkit-transition: all 400ms ease;
-moz-transition: all 400ms ease;
-webkit-transform-origin: 50% 0%;
-moz-transform-origin: 50% 0%;
-webkit-transform-style: preserve-3d;
-moz-transform-style: preserve-3d;
}
.roll-link:hover span {
background: #3887be;
-webkit-transform: translate3d( 0px, 0px, -30px ) rotateX( 90deg );
-moz-transform: translate3d( 0px, 0px, -30px ) rotateX( 90deg );
}

.roll-link span:after {
content: attr(data-title);
display: block;
position: absolute;
left: 0;
top: 0;
padding: 0 2px;
color: #fff;
background: #3887be;
-webkit-transform-origin: 50% 0%;
-moz-transform-origin: 50% 0%;
-webkit-transform: translate3d( 0px, 105%, 0px ) rotateX( -90deg );
-moz-transform: translate3d( 0px, 105%, 0px ) rotateX( -90deg );
} 
```

编辑：我在我的网站上添加了指向它的链接，这[是要弄乱的标记](http://jsfiddle.net/LVFSA/)。我看到它在 chrome、safari 和 firefox 中都可以在 osx 上运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T10:43:04.650

我认为没有真正的解决方案，但此时，您可以使用`text-shadow`and`text-stroke`属性。（[对中风有一些帮助](http://css-tricks.com/adding-stroke-to-web-text/)）。

[Webdesignerdepot](http://www.webdesignerdepot.com/)也使用这种链接视图，他们遇到了与我看到的相同的问题。可悲的是，数据标题不是真实/真实的文本，因此它总是会模糊（除非浏览器开发人员对其进行处理），并且如果它比真实文本长，它将总是被剪切。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-11T19:33:25.743

前段时间我用 css 做了这样的事情。相同的属性但不同的设置。希望它能解决你的模糊问题。这里的教程 - [http://www.howtokickblogger.com/2012/11/post-links-hover-effect.html](http://www.howtokickblogger.com/2012/11/post-links-hover-effect.html)

jsFiddle 上的演示 - [http://bit.ly/14AHwcc](http://bit.ly/14AHwcc)

但是，似乎没有解决方案可以在显示时删除多余的单词。

# c# - 使用 PDFSharp“结果视图”内容 C# 读取 PDF 注释内容

> ID：16016756
> 
> 赞同：1
> 
> 时间：2013-04-15T13:43:00.013
> 
> 标签：c#, pdf, annotations, comments, pdfsharp

我正在尝试使用 PDFSharp 读取 PDF 文档中所有注释的内容，同时跟踪它们所在的页面。我试图检索的“内容”在 PdfItem 的“结果视图”中，其中显示“扩展结果视图将枚举 IEnumerable”

我正在使用以下代码：

```
private void LoadCommentList(string file) //using pdfsharp
    {
        PdfSharp.Pdf.PdfDocument inputDoc = PdfSharp.Pdf.IO.PdfReader.Open(file, PdfDocumentOpenMode.Import);
        PdfSharp.Pdf.PdfDocument document = new PdfSharp.Pdf.PdfDocument();
        PdfSharp.Pdf.PdfPage page = new PdfSharp.Pdf.PdfPage();
        for (int i = 0; i < inputDoc.PageCount; i++)
        {
            page = inputDoc.Pages[i];
            page = document.AddPage(page);

            for (int p = 0; p < document.Pages[i].Annotations.Elements.Count; p++)
            {
                PdfItem textAnnot = document.Pages[i].Annotations.Elements.GetObject(p);
                //add specific item in "Results View" to CommentList here......
            }
        }
    } 
```

如何以编程方式通读“结果视图”以便获取 PDF 注释的内容？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:04:29.063

结果证明比我尝试的方法更容易实现这一点。不要使用 Pdfitem 对象，而是使用 PdfAnnotation 对象。从一开始就应该这样做。下面的代码示例：

```
private void LoadCommentList(string file) //using pdfsharp
    {
        PdfSharp.Pdf.PdfDocument inputDoc = PdfSharp.Pdf.IO.PdfReader.Open(file, PdfDocumentOpenMode.Import);
        PdfSharp.Pdf.PdfDocument document = new PdfSharp.Pdf.PdfDocument();
        PdfSharp.Pdf.PdfPage page = new PdfSharp.Pdf.PdfPage();

        for (int i = 0; i < inputDoc.PageCount; i++)
        {
            page = inputDoc.Pages[i];
            page = document.AddPage(page);

            for (int p = 0; p < document.Pages[i].Annotations.Elements.Count; p++)
            {
                PdfAnnotation textAnnot = document.Pages[i].Annotations[p];

                string content = textAnnot.Contents;
                if (content != null)
                {
                    CommentList.Add(content);
                }

            }
        }
    } 
```

# git - 使用 Git，如何将分支 A 上两个版本的差异应用到分支 B？

> ID：16016759
> 
> 赞同：0
> 
> 时间：2013-04-15T13:43:06.177
> 
> 标签：git, diff, vendor-branch

我们有第三方软件，每年更改大约 3 或 4 次。供应商的代码显然没有考虑到我们的定制，当他们的最新代码（单个 Pro*C 文件）应用于我们的生产系统时，它会清除所有这些。

一位同事建议我们将此代码放入 Git，并尝试使用其工具来管理更改。为此，我们做了以下工作。我在 Git 中创建了两个分支，默认的 master 分支和另一个名为“custom”的分支。在自定义分支中，文件的第一个版本是去年 10 月的未修改点发布，文件的第二个版本是我们成功应用和测试的自定义。

在 master 分支中，第一个版本又是 10 月发布。第二个是他们（当前）3 月发布的版本。

我需要采取哪些步骤将两个自定义分支版本之间的差异应用到主分支？

在颠覆中，有一些教程和示例可用于所谓的“供应商下降”，但我在 Git 的这种情况下没有找到太多。绝对需要提高我的 Git 技能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T13:50:01.597

这*太*简单了，svn 甚至会因为有这方面的教程而感到尴尬。

让我们在此图中查看您的场景：

```
A -- master
 \
  B -- custom 
```

在此图中，`A`是第三方软件的原始 10 月版本。`B`是您所做的更改。

现在有一个新的 3 月版本的第三方软件。

### 第 1 步：明显的部分

首先，将新版本放在分支的存储库中`master`：

```
$ git checkout master    # go to master
$ cp -R ../march/* .     # overwrite with new version
$ git add ????           # add any new files they might have added (check with `git status`)
$ git commit -a          # make a new commit 
```

我相信这一步是很明显的。所以现在你有下面的图表：

```
A----C -- master
 \
  B -- custom 
```

`C`新提交在哪里，包含 3 月版本。

### 第 2 步：超级简单的部分

这就是您现在需要做的所有事情：

```
$ git checkout custom    # go to custom
$ git merge master       # get the changes over 
```

完毕。

现在的图表是：

```
A----C -- master
 \    \
  B----D -- custom 
```

# c# - MVC 4 模态窗口，部分视图和验证

> ID：16016761
> 
> 赞同：8
> 
> 时间：2013-04-15T13:43:18.340
> 
> 标签：c#, jquery, ajax, asp.net-mvc, twitter-bootstrap

我正在使用 MVC4 和实体框架来开发 Web 应用程序。我有一张表，其中列出了我在数据库中拥有的所有人员。对于他们每个人，我可以通过一个模式窗口编辑他们的信息，这是一个部分视图。但是，当我输入一些错误信息时，我的应用程序会将我重定向到我的部分视图。我想做的是将错误显示**到**我的模式窗口中。

我的行动：

```
[HttpGet]
public ActionResult EditPerson(long id)
{
    var person = db.Persons.Single(p => p.Id_Person == id);

    ViewBag.Id_ProductPackageCategory = new SelectList(db.ProductPackageCategories, "Id_ProductPackageCategory", "Name", person.Id_ProductPackageCategory);

    return PartialView("_EditPerson", person);
}

[HttpPost]
public ActionResult EditPerson(Person person)
{

    ViewBag.Id_ProductPackageCategory = new SelectList(db.ProductPackageCategories, "Id_ProductPackageCategory", "Name", person.Id_ProductPackageCategory);

    if (ModelState.IsValid)
    {
        ModelStateDictionary errorDictionary = Validator.isValid(person);

        if (errorDictionary.Count > 0)
        {
            ModelState.Merge(errorDictionary);
            return PartialView("_EditPerson", person);
        }

        db.Persons.Attach(person);
        db.ObjectStateManager.ChangeObjectState(person, EntityState.Modified);
        db.SaveChanges();
        return View("Index");
    }

    return PartialView("_EditPerson", person);
} 
```

我的部分观点：

```
@model BuSIMaterial.Models.Person

<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="myModalLabel">Edit</h3>
</div>
<div>

@using (Ajax.BeginForm("EditPerson", "Person", FormMethod.Post,
                    new AjaxOptions
                    {
                        InsertionMode = InsertionMode.Replace,
                        HttpMethod = "POST",
                        UpdateTargetId = "table"
                    }))
{

    @Html.ValidationSummary()
    @Html.AntiForgeryToken()

    @Html.HiddenFor(model => model.Id_Person)

    <div class="modal-body">
       <div class="editor-label">
            First name :
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(model => model.FirstName, new { maxlength = 50 })
            @Html.ValidationMessageFor(model => model.FirstName)
        </div>
        <div class="editor-label">
            Last name :
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(model => model.LastName, new { maxlength = 50 })
            @Html.ValidationMessageFor(model => model.LastName)
        </div>
        <div class="editor-label">
            National number :
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.NumNat, new { maxlength = 11 })
            @Html.ValidationMessageFor(model => model.NumNat)
        </div>
        <div class="editor-label">
            Start date :
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(model => model.StartDate, new { @class = "datepicker", @Value = Model.StartDate.ToString("yyyy/MM/dd") })
            @Html.ValidationMessageFor(model => model.StartDate)
        </div>
        <div class="editor-label">
            End date :
        </div>
        <div class="editor-field">
            @if (Model.EndDate.HasValue)
            {
                @Html.TextBoxFor(model => model.EndDate, new { @class = "datepicker", @Value = Model.EndDate.Value.ToString("yyyy/MM/dd") })
                @Html.ValidationMessageFor(model => model.EndDate)
            }
            else
            {
                @Html.TextBoxFor(model => model.EndDate, new { @class = "datepicker" })
                @Html.ValidationMessageFor(model => model.EndDate)
            }
        </div>
        <div class="editor-label">
            Distance House - Work (km) :
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.HouseToWorkKilometers)
            @Html.ValidationMessageFor(model => model.HouseToWorkKilometers)
        </div>
        <div class="editor-label">
            Category :
        </div>
        <div class="editor-field">
            @Html.DropDownList("Id_ProductPackageCategory", "Choose one ...")
            @Html.ValidationMessageFor(model => model.Id_ProductPackageCategory) <a href="../ProductPackageCategory/Create">
                Add a new category?</a>
        </div>
        <div class="editor-label">
            Upgrade? :
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Upgrade)
            @Html.ValidationMessageFor(model => model.Upgrade)
        </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-inverse" id="save" type="submit">Save</button>
    </div>
}

</div> 
```

我在索引视图中的脚本：

```
 $('.edit-person').click(function () {
               var id = $(this).data("id");
               var url = '/Person/EditPerson/'+id;
               $.get(url, function(data) {

                   $('#edit-person-container').html(data);
                   $('#edit-person').modal('show');

               });
        }); 
```

此外，如您所见，我已经为我的文本框设置了一个大小，但在我的模式中，它似乎没有被考虑在内。对这些问题有什么想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-15T15:10:57.353

您必须在表单上手动触发验证器，该验证器会动态加载到您的 html 页面中。

尝试这个：

在您的视图中使用`Ajax.ActionLink`将部分视图的内容加载到您的对话框容器中，以避免不必要的 JavaScript。

```
@Ajax.ActionLink("AjaxLink", "EditPerson", new { PersonID = model.Id_Person }, new AjaxOptions { UpdateTargetId = "myModalDialog", HttpMethod = "Post",OnSuccess="OpenDialog(myModalDialog)" })

<div id="myModalDialog" title="" style="display: none">
</div> 
```

在您的 JS 文件中执行此操作

```
function OpenDialog(DialogContainerID)
{
     var $DialogContainer = $('#' + DialogContainerID);
     var $jQval = $.validator; //This is the validator
     $jQval.unobtrusive.parse($DialogContainer); // and here is where you set it up.
     $DialogContainer.modal();

     var $form = $DialogContainer.find("form");
     $.validator.unobtrusive.parse($form);

     $form.on("submit", function (event)
     {
             var $form = $(this);

             //Function is defined later...
             submitAsyncForm($form,
             function (data)
             {
                     $DialogContainer.modal("hide");
                     window.location.href = window.location.href;

             },
             function (xhr, ajaxOptions, thrownError)
             {
                     console.log(xhr.responseText);
                     $("body").html(xhr.responseText);
             });
             event.preventDefault();
     });
}

//This is the function that will submit the form using ajax and check for validation errors before that.
function submitAsyncForm($formToSubmit, fnSuccess, fnError)
{
        if (!$formToSubmit.valid())
                return false;

        $.ajax({
                type: $formToSubmit.attr('method'),
                url: $formToSubmit.attr('action'),
                data: $formToSubmit.serialize(),

                success: fnSuccess,
                error: fnError

        });

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T15:06:04.357

您需要通过 JavaScript 处理编辑表单的提交，否则它会将您重定向到您的局部视图。

你可以这样做：

```
$('form.edit').submit(function(e) {

    e.preventDefault();

    $.ajax({
        type: 'POST',
        url: '/Person/EditPerson/'
        data: { person: $(this).serialize() },
        success: function(data) {

            /* Add logic to check if successful edit or with errors. Or just return true when edit is successful. */

            $('#edit-person-container').html(data);
        }
    });

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-14T15:09:56.310

这对我有用：

```
//allow the validation framework to re-prase the DOM
jQuery.validator.unobtrusive.parse();    
//or to give the parser some context, supply it with a selector
//jQuery validator will parse all child elements (deep) starting
//from the selector element supplied
jQuery.validator.unobtrusive.parse("#formId");
// and then:
$("#formId").valid() 
```

取自[这里](http://code.davidferguson.me.uk/post/47540738095/mvc-client-validation-after-partialview-loaded-via)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-23T19:39:30.760

您是否将以下脚本添加到布局或包含部分的视图中？jquery.unobtrusive-ajax.min.js。这是异步请求所必需的，默认情况下不添加，但存在于脚本下的新解决方案中。

# php - WordPress 额外的空格会破坏布局

> ID：16016763
> 
> 赞同：2
> 
> 时间：2013-04-15T13:43:24.803
> 
> 标签：php, wordpress, layout, whitespace

我正在创建和开发一个自定义的 Wordpress 主题，我正在努力解决一个问题，这让我发疯，我找不到任何解决方法，也无法弄清楚我做错了什么......

输出中添加了一些额外的空格，这会破坏布局并创建空白空间

这是我的源代码（index.php）：

```
<div class="c6">
    <h4>news</h4>
    <?php query_posts('showposts=3'); ?>
    <?php if (have_posts()) : while(have_posts()) : the_post(); ?>
        <?php get_template_part('content', get_post_format()); ?>
    <?php endwhile; else : ?>

        <p><?php _e('No posts were found!', 'unqvsn-framework'); ?></p>

    <?php endif ?>

    <p class="articles-nav-prev"><?php next_posts_link(__('&raquo; Older Posts', 'unqvsn-framework')); ?></p>

</div> 
```

这里也是左栏侧边栏的代码，它也在发生（以及我创建的每个侧边栏）：

```
<h4>Line up</h4>
<div class="sidebar"><?php get_sidebar('lineup-sidebar'); ?></div> 
```

这是在浏览器中检查代码的输出（Chrome，在 Firefox 中也是如此）：

[截屏](http://imageshack.us/a/img13/1392/screenissued.png)

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:54:24.557

您可以尝试的一件事是在您的 php 标签之间添加 html 注释以防止多余的空格

```
<h4>news</h4><!-- no whitespace
    --><?php query_posts('showposts=3'); ?><!-- no whitespace
    etc...
    --><p class="articles-nav-prev"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:55:37.020

如果您的文件保存为 UTF8，可能会导致不需要的空白。

要修复它，请尝试将受影响的文件重新保存为不带 BOM 的 UTF-8，在 Notepad++ 中执行此操作，只需转到编码-> 以不带 BOM 的 UTF-8 编码并保存。

[http://en.wikipedia.org/wiki/Byte_order_mark](http://en.wikipedia.org/wiki/Byte_order_mark)

[UTF-8 和没有 BOM 的 UTF-8 有什么不同？](https://stackoverflow.com/questions/2223882/whats-different-between-utf-8-and-utf-8-without-bom)

# entity-framework-5 - 实体框架5空间查询

> ID：16016764
> 
> 赞同：1
> 
> 时间：2013-04-15T13:43:29.643
> 
> 标签：entity-framework-5, spatial

我正在使用 Entity Framework 5 Code First 并有一个包含某些人位置（DbGeography）的数据库。该数据库还包含具有位置的对象列表（当然还有 DbGeography）。作为 NearestPerson 属性和 NearestPersonDistance 属性的对象实体 - 它们都没有在 EF 中映射。

我想进行以下查询：“返回最近的人的所有对象以及到最近的人的距离”

我想编写一个 LINQ 表达式来执行查询并希望得到帮助。

为此使用 LINQ 查询是一种不好的方法，还是您更愿意编写视图或存储过程？

# json - Google Web Toolkit (GWT) rpc 到 Google App Engine (GAE) 上的 Python 服务器

> ID：16016767
> 
> 赞同：0
> 
> 时间：2013-04-15T13:43:35.080
> 
> 标签：json, eclipse, google-app-engine, gwt, pydev

我正在构建一个基于网络的碳足迹工具。

我有一个成熟的 Google Web Toolkit (GWT) 客户端。

我在 Python 中有一个成熟的 Google App Engine (GAE) 服务器。我正在使用 Eclipse 插件：PyDev、GWT、GAE

我想交换几个包含多个嵌套数据级别的类，包括 Python numpy 数组（矩阵）。（遗憾的是 Jython 不支持 Numpy，所以我不能使用 Jython。）

我可以在服务器上使用 Python Json 和客户端上的 GWT 类型覆盖来做到这一点，但感觉有点笨拙。我想念 GWT RPC 的自动（反）序列化。

我查看了几个 GWT rpc 选项，但（可以理解）它们似乎在服务器上使用 Java 和/或开发似乎已经停滞：

1.  爱马仕：
2.  可爱的.gwt.jsonrpc：类似于爱马仕
3.  RestyGWT：没有 Python 端
4.  python-gwt-rpc：旧的和 alpha 版本
5.  GWT AutoBean：看起来对客户端很有希望，但我不清楚如何在 Python 中使用
6.  gwt-rpc-plus：2010 年停滞不前

谷歌显示：没有找到 +gwt +rpc +python 的结果

我欢迎想法和/或指点

谢谢

朱利安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:09:53.547

我相信 GWT-RPC 仅适用于 Java 后端。查看[文档](https://developers.google.com/web-toolkit/doc/latest/DevGuideServerCommunication#DevGuideRemoteProcedureCalls)

> GWT 提供了一种基于 Java Servlets 的 RPC 机制来提供对服务器端资源的访问

现在，您可以在 GWT 中编写客户端代码，并使用远程过程调用原则与您的 Python 服务器通信。没有什么能阻止你这样做。

一种方法是在你的 python 后端编写一个 REST API。然后你可以在你的客户端中使用 RestyGWT

RestyGWT 是一个用于 REST 服务的 GWT 生成器。您可以使用 REST api（用 Java、python 或其他任何东西编写）定位任何后端

# windows-phone-8 - Windows Phone 8：如何显示锁屏图标而不在磁贴上显示计数器？

> ID：16016769
> 
> 赞同：1
> 
> 时间：2013-04-15T13:43:44.493
> 
> 标签：windows-phone-8

我想显示一个带计数器的锁屏图标，如下所述：http: [//msdn.microsoft.com/en-us/library/windowsphone/develop/jj207048 (v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207048(v=vs.105).aspx)

但是，执行此操作时，计数器也会显示在应用程序的主图块上。我可以避免吗？（瓷砖上的柜台看起来真的很难看）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T17:52:14.927

你不能。
锁屏图标旨在与标志性的磁贴模板一起使用，该模板将显示计数。

您可以做的最好的事情是设计图标以与计数一起使用。

如果您原则上不喜欢计数，请记住您不是典型用户。许多本地应用程序都使用计数和标志性磁贴模板，手机用户会熟悉它，因为他们会在很多应用程序中看到它。

# php - 从 magento 结帐购物车中的项目选项中删除价格

> ID：16016775
> 
> 赞同：1
> 
> 时间：2013-04-15T13:44:06.210
> 
> 标签：php, css, magento, shopping-cart

我正在寻找一种从结帐购物车中删除项目选项值的方法，只需删除如下突出显示的文本： ![在此处输入图像描述](https://i.stack.imgur.com/n9xpd.png)

我相信这位于文件 app/design/frontend/base/default/template/checkout/cart/item/default.phtml 作为“item-option”

```
<?php if ($_options = $this->getOptionList()):?>
        <dl class="item-options">
            <?php foreach ($_options as $_option) : ?>
            <?php $_formatedOptionValue = $this->getFormatedOptionValue($_option) ?>
            <dt><?php echo $this->htmlEscape($_option['label']) ?></dt>
            <dd<?php if (isset($_formatedOptionValue['full_view'])): ?> class="truncated"<?php endif; ?>><?php echo $_formatedOptionValue['value'] ?>
                <?php if (isset($_formatedOptionValue['full_view'])): ?>
                <div class="truncated_full_value">
                    <dl class="item-options">
                        <dt><?php echo $this->htmlEscape($_option['label']) ?></dt>
                        <dd><?php echo $_formatedOptionValue['full_view'] ?></dd>
                    </dl>
                </div>
                <?php endif; ?>
            </dd>
            <?php endforeach; ?>
        </dl>
        <?php endif;?> 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T10:40:06.603

要解决此问题，您必须覆盖 *Mage_Bundle_Helper_Catalog_Product_Configuration* 类。

在您的本地池中创建一个新的*Mage*文件夹，其中包含帮助程序的相应子文件夹

```
/---app
|   /---code
|       /---local
|           /---Mage
|               /---Bundle
|                   /---Helper
|                       /---Catalog
|                           /---Product
|                               /---Configuration.php 
```

复制帮助程序并编辑方法 getBundleOptions。您必须在 $option['value'] 中删除此代码

```
Mage::helper('core')->currency($this->getSelectionFinalPrice($item, bundleSelection) 
```

获得这种新方法

```
 public function getBundleOptions(Mage_Catalog_Model_Product_Configuration_Item_Interface $item)
    {
        $options = array();
        $product = $item->getProduct();

        /**
         * @var Mage_Bundle_Model_Product_Type
         */
        $typeInstance = $product->getTypeInstance(true);

        // get bundle options
        $optionsQuoteItemOption = $item->getOptionByCode('bundle_option_ids');
        $bundleOptionsIds = $optionsQuoteItemOption ? unserialize($optionsQuoteItemOption->getValue()) : array();
        if ($bundleOptionsIds) {
            /**
            * @var Mage_Bundle_Model_Mysql4_Option_Collection
            */
            $optionsCollection = $typeInstance->getOptionsByIds($bundleOptionsIds, $product);

            // get and add bundle selections collection
            $selectionsQuoteItemOption = $item->getOptionByCode('bundle_selection_ids');

            $selectionsCollection = $typeInstance->getSelectionsByIds(
                unserialize($selectionsQuoteItemOption->getValue()),
                $product
            );

            $bundleOptions = $optionsCollection->appendSelections($selectionsCollection, true);
            foreach ($bundleOptions as $bundleOption) {
                if ($bundleOption->getSelections()) {
                    $option = array(
                        'label' => $bundleOption->getTitle(),
                        'value' => array()
                    );

                    $bundleSelections = $bundleOption->getSelections();

                    foreach ($bundleSelections as $bundleSelection) {
                        $qty = $this->getSelectionQty($product, $bundleSelection->getSelectionId()) * 1;
                        if ($qty) {
                            $option['value'][] = $qty . ' x ' . $this->escapeHtml($bundleSelection->getName());

                        }
                    }

                    if ($option['value']) {
                        $options[] = $option;
                    }
                }
            }
        }

        return $options;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T05:05:56.300

您也可以通过纯 css 实现相同的结果。在您的 css 中尝试以下代码以删除捆绑产品项目的价格。

> `.item-options dd span.price{ display:none; }`

# c# - 在 WPF 中重新加载绑定到 Datagrid 的 DataTable

> ID：16016777
> 
> 赞同：3
> 
> 时间：2013-04-15T13:44:09.473
> 
> 标签：c#, wpf, datagrid, datatable

我想在我的 WPF Datagrid 中显示一个 SQL 表，在运行时编写 SQL 查询。我已经建立了我的 View（简化）和 ViewModel 关联：

看法：

-----------------MyDataGrid.xaml-----------------

```
<DataGrid x:Name="CurrentSqlGrid" 
          ItemsSource="{Binding Path=CurrentDataTable,Mode=OneWay}"  
          Grid.Row="2" AutoGenerateColumns="True"  IsReadOnly="True" />
<TextBox x:Name="TextBoxSql" Height="120" Grid.Row="1" 
         TextWrapping="Wrap" VerticalAlignment="Top"/> 
```

-----------------MyDataGrid.cs-----------------

```
public partial class MyDataGrid : UserControl
{
    private SqlDataGridViewModel sqlDataGridViewModel;

    public MyDataGrid()
    {
        InitializeComponent();
        sqlDataGridViewModel = new SqlDataGridViewModel();
        this.DataContext = sqlDataGridViewModel;
    }

    private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        sqlDataGridViewModel.FillDataTableWithQuery(TextBoxSql.Text);          
    }
} 
```

视图模型：

-----------------SqlDataGridViewModel.cs-----------------

```
public class SqlDataGridViewModel 
{
    private DataTable _dataTable;
    private SqlDataAdapter _adapter;

    public DataTable CurrentDataTable
    {
        get
        {
            return _dataTable;
        }
        set
        {
            _dataTable = value;
        }
    }

    public SqlDataGridViewModel()
    {
        _dataTable = new DataTable("QUERY");
        FillDataTableWithQuery("SELECT TOP 500 * FROM XUSER");           
    }

    public void FillDataTableWithQuery(string query)
    {
        CurrentDataTable.Reset();
        CurrentDataTable.Clear();

        try
        {
            using (SqlConnection sqlConn = new SqlConnection(SessionProvider.Instance.currentConnectionString))
            {
                _adapter = new SqlDataAdapter(query, sqlConn);
                _adapter.Fill(CurrentDataTable);
            }
        }
        catch (Exception ex)
        {
            MartuLogger.Instance.Error("Exception in SqlDataGridViewModel :" + ex.Message);
        }
    }
} 
```

此解决方案向我显示第一个查询的第一个 DataTable。

但是当我编写另一个 SQL 查询时，我调用`FillDataTableWithQuery("SELECT * from another_table")`Datagrid 并清除所有行，但它不会加载新列和新行！（只显示旧列！）。在调试中，`CurrentDataTable`包含新查询的结果....有什么想法吗？

**解决方案** 在 Faisal Hafeez 的帮助下，我们找到了这个解决方案：

Xaml 和后面的代码是一样的。它适用于 OneWay 和 TwoWay 模式。

我的视图模型变为：

```
public class SqlDataGridViewModel : INotifyPropertyChanged
{
    private DataTable _dataTable;
    private SqlDataAdapter _adapter;
    public event PropertyChangedEventHandler PropertyChanged;

    protected void NotifyPropertyChange(string PropertyName)
    {
        PropertyChanged(this, new PropertyChangedEventArgs(PropertyName));
    }

    public DataTable CurrentDataTable
    {
        get
        {
            return _dataTable;
        }
        set
        {
            _dataTable = value;
            //NotifyPropertyChange("CurrentDataTable");
        }
    }

    public SqlDataGridViewModel()
    {
        _dataTable = new DataTable("QUERY");
        FillDataTableWithQuery("SELECT TOP 500 * FROM XUSER");           
    }

    public void FillDataTableWithQuery(string query)
    {
        _dataTable = new DataTable("QUERY");

        try
        {
            using (SqlConnection sqlConn = new SqlConnection(SessionProvider.Instance.currentConnectionString))
            {
                _adapter = new SqlDataAdapter(query, sqlConn);
                _adapter.Fill(CurrentDataTable);
            }

            NotifyPropertyChange("CurrentDataTable");
        }
        catch (Exception ex)
        {
            MartuLogger.Instance.Error("Exception in SqlDataGridViewModel :" + ex.Message);
        }
    }
} 
```

如果我在 _adapter.Fill 之后没有 NotifyPropertyChange，则视图不会刷新。（我尝试在 Set CurrentTable 中通知，但 _adapter.Fill 显然不调用 CurrentTable 的 set 方法）。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:34:31.133

尝试这个。您需要实现 INotifyPropertyChanged 并在数据网格的设置事件上调用 PropertyChanged。

公共类 SqlDataGridViewModel：INotifyPropertyChanged {

```
public event PropertyChangedEventHandler PropertyChanged;

public void OnPropertyChanged(String info)
{
    if (PropertyChanged != null)
    {
        PropertyChanged(this, new PropertyChangedEventArgs(info));
    }
}

public DataTable CurrentDataTable
    {
        get
        {
            return _dataTable;
        }
        set
        {
            _dataTable = value;
            OnPropertyChanged("CurrentDataTable");
        }
    }
} 
```

# html - 表格只接受数字？

> ID：16016778
> 
> 赞同：0
> 
> 时间：2013-04-15T13:44:10.367
> 
> 标签：html, forms

我有这样的表格。我尝试将 text type="text to digit" 更改，但没有成功。我只想接受数字。

```
<tr>
    <td width="100">
        <font face="arial" size="2">* Age</font>
    </td>
    <td width="250">
        <input id="your_age" name="your_age" type="digit" />
    </td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:45:15.557

如果您不使用 HTML5，则无法使用 HTML 标签来做到这一点。您需要使用 javascript 或 php 进行某种验证以仅接受数字/数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:45:19.353

您可以使用`<input type="number">`. 不过，您可能还想在 PHP 之后检查它是否是一个数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T13:45:57.173

您正在谈论与 PHP 无关的客户端验证。

在 HTML5 中，您可以使用`type="number"`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T13:46:47.410

如果您使用 HTML 5，您可以使用如下方式

```
 <input type="number" /> 
```

# html - 阻止其他人调用您的 JSON Web 服务

> ID：16016779
> 
> 赞同：4
> 
> 时间：2013-04-15T13:44:10.533
> 
> 标签：html, json, web-services, security

假设我有一些代码可以创建一个带有 JSON 服务调用的 HTML 页面。

如何防止他人复制粘贴源代码、调用服务并获取第一个用户的结果集？

如果我将域作为服务的参数或获取其他信息，例如用户名或密码，它们也可以被复制和粘贴并用于另一个域。

我没有看到防止这种情况的方法，还是我错了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T22:01:58.540

你是对的，没有办法绝对阻止这种情况，但你可以让它变得更加困难，你可以做到这一点，这样你就可以识别出滥用 API 或自己被黑客入侵的用户。

做到这一点的方法是使用证书（非对称加密）。每个客户端都有一个私钥和一个公钥，对于该客户端来说是完全唯一的。公钥是公共知识（通常存储在服务器或第三方数据库中，如 Comodo 或 Verisign）。私钥对客户端是私有的。服务器还有一个私钥/公钥。

每次客户端发出请求时，请求都会用服务器的*公钥加密，并用客户端的**私钥*签名（加密）。服务器的密钥确保只有服务器可以解密请求，客户端的密钥确保只有客户端可以加密该请求，以便使用客户端的*公钥*完全可逆。

这意味着恶意用户只能以他/她自己的名义提出请求，因此您将知道谁在捣乱，或者您知道哪个用户被入侵，因此您可以通知他/她并禁用他们的帐户。这还可以防止其他用户嗅探网络并恢复其他用户的请求以执行重放攻击。

还有其他方法可以实现这一点，例如使用安全 cookie 来跟踪用户请求。我将为您发布一些有关安全 cookie 实施的有用问题的链接。其中一些适用于其他平台，但概念是相同的。

这有很多内容需要考虑。在开始实施之前，您可能需要[做更多的阅读。](https://en.wikipedia.org/wiki/Public-key_cryptography)

其他有用的问题：

1.  [REST Web 服务身份验证令牌实现](https://stackoverflow.com/questions/15490265/rest-web-service-authentication-token-implementation/15490642#15490642)
2.  [在 iPhone 应用程序中使用 REST API 时的安全性](https://stackoverflow.com/questions/15273705/security-when-using-rest-api-in-an-iphone-application/15277589#15277589)
3.  ~~[https://stackoverflow.com/questions/15390354/api-key-alternative/15390892#15390892](https://stackoverflow.com/questions/15390354/api-key-alternative/15390892#15390892)~~链接断开。

# php - 用于将根据数据创建的图像附加到电子邮件并在 test.php 文件中发送作品的代码，但不在我的主要对象函数中。怎么了？

> ID：16016784
> 
> 赞同：2
> 
> 时间：2013-04-15T13:44:21.210
> 
> 标签：php, email, attachment, ob-start

我的 php 文件获得了传递的图像/png 数据，需要将其附加到电子邮件并发送所述电子邮件。

这是来自测试文件的工作代码：

```
<?php
include("include.php");
$subject = "Laptop Collection " . date("Y");
//create a boundary string
$random_hash = md5(date('r', time()));
//define the headers we want passed
$headers[] = "From: Do Not Reply <email@example.com>";
//add boundary string and mime type specification
$headers[] = "Content-Type: multipart/mixed; boundary=\"PHP-mixed-".$random_hash."\"";
ob_start();
$image = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAArwAAADICAYAAAAKljK9AAALF0lEQVR4nO3dfYylV10H8G277W5bSympte+vY2k7zJ15zvc8d3o7sb1IAvYVrIxBNJE/uq2gqYIGoolEI6KhkaSQEN/gL4pJtUiVgBHBIEpQwca3NsagxDcSLd12u253d7Zb/5hz6e3S7m53F+/u9vNJftlJ5s6dc5+5m/u7537PORs2AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwFFhPB5vnJ+fP2VS4/F44+rq6kmrq6snzXpsx6gTJtdvUtPXt13jzUlOm66VlZUzDlST287NzW2an58/JcnJ7e904qwfNADArJwwGo1OTXLmYDA4Z3l5+cK+7y9PclWSm4fD4Ru6rntNrfW2SSV5ba113GqYpNRab+v7/tYk5dtV/x+/40j/rue7n67rRlPXb1xrHZdSbp2+xrXWHyil/PB01VrvSvLW/dXU7W+vtd5WSnldu//vSVL6vr+1lHJLrfVVSa4qpcwNh8PL+r6/qOu68weDwTkLCwtnDQaD05OcPOsnJwDAizY3N7cpydlLS0uXdl13Ta11WGv9oSTvSHJPkvuSfDbJw0l2J3kmyZ4ku6Zqd5K1VnvbbdTB19NT12+t1rrv9d1VStmVZMdUPZXkf/dXpZTtSXbUWneUUnbu87faM/X715L8e5J/qLV+sdb66ST3J/mtJL+W5F2llLeUUl5XSkmt9VXD4fDK9pw5P8nZy8vLLxuPx5s3mDkGAI4CJy4tLb2867pLktyc5MdKKe8ppXwqyVdrrWtJdramaXv7d6dG9riuPe3v/GSSJ5I8nuTxWuvk623t+5MG/D+SfCXJJ0spH07y3iR3J1ntuu76rusWu667JskVSS5Ocl7Xdd+Z9U8NJjPFJ+znOfotEY8D3B4AeKmbn58/ZTAYnDMcDq/suu76Wus7k3yiNS978+zM34Ga2r1J/ifJV6fq60kea7XnAD+vvrWemrp+k/qXfa7xI0m+vE99rpTymf3V1G3/qd3Pf7X7f/IQx/p0mynenvVGeDLerbXWbVmfed6T9Qb5n5P8WZKPJ/nNJL+S5B2llLfUWm9qEY1bWnP8zcp6zOK6SbQjyatbBOPaFgW5ueu6ayYzzMvLyxcuLy9/12g0esXKysoZc3NzmzZojgHgpaEtUDqvlHJ1y26+v9b6UPu4fHcp5fma211JHkrysSTvrbXeVWu9sc3WnTbrx8SRNx6PN/Z9f27f9/N9399Qa31j1vO/P5/k3tawfinJf+bg3tCstSb+yUzNFrfaNolZZP3N01q7zaS2TRrrTEU8Wj3dvrc7659E/HX7VOK+JB9I8u6sZ5Zv7/v+ulLKoJRydZIr+r6/aDAYnLO0tPTy0Wh0qsWVAHAMW11dPSnJ2cPh8Mq26Ok3kvxrKWXSQOzb5O5M8rFa611938+Px+ONs34MHL3G4/HGxcXFC7quG7VFcG9Pcm+t9Q+S/G1rWg92tnhvkr211j3tTdjBNNN7W+Rm+/M000/UWqfjN48leaTW+vlSyu9kPYv800ne3Pf9DV3XLZZSru77/vLl5eULJ5ELOWQAOEqNRqNT28r6G2qtv5zkH9uM2HOaiFLK07XWL5ZSfq7W2m3w0S9H2Gg0ekXWd6N4fdtF4t2llA8mub/W+vmsL37ctZ+m9vkiHvu7/QvNMu9os8yPJ9ma9Uzytnb/k9jFI0k+l+Sjtdb3lVJ+qpTyg0lWW9zimuFweGXf95f3fX9RXnwWGQA4XEnOHA6HVyZ5c5LPttmvtekX/1rrU6WUj5dSfmRhYeGsWY8ZNmzYsGFhYeGs6Upy5oF+Zjwebx4Oh5fVWldaY/qTWd9J5KNJvpDka3l2J5EDNsS11m2llK1JHiulbG2L9La3N4u7s56l/pvWFN+f9Szyr2afLHKSm2utr+y67pK+78+dRCc2aIYB4NC1fXJfW2t9T5KHWx73m3GFWuuOJPfVWm9rL7zwUnFi13Xnd103SrKa5GeSfKDFLv4uBxe7mOSLt7dZ4edEJ9rs8PY2WzxZ9PlQKeXBUsoHa63vrLW+qe/765IsLC0tfXeSi9u+1i+bn58/ZdYXCQCOaisrK2d0XfemNnP7nLhCKeVP2myvBWbwAhYWFs7qum6xHZpyd1vQ+UCSL7ddKA46PtHebO5u0YtHkzxaSpnshLGW5OullL8qpfxeKeX9Se5uh4/0+zbDKysrZ2iGAXjJG4/Hm9us7vSL7rZa6/uSnDfr8cHxYG5ublM7aW5Ua319krcl+cUkH8r6rhVfaPnf/cYn9tnCbWuSx0spT+bZ7QD/O8mXWrN9T5K39n1/53R+eHLqXd/35yY5Oy0/PDc3t8luEwAcd8bj8cZa6y9MvZjuyvpm/2ZzYUbm5+dP6fv+8lLKrUne1XZG+fODiE7sLqVsnzrc4/GsH+4xnR/+SpI/brtMfCjJL9Va395Ovfv+Usr3dl1Xk1wx6+sAAIetbTf2o1M53b+fn5//jlmPC3h+7f/sFbXWm9oit1/P+hHd/5b9H/DyQvnhrbXWJ0opT04dFb3W3vw+OOvHCwCHZTAYnF5KuTPP7r7wtXaaFHAMSnJayxC/McnP1lo/0maFX1R+uNXWJPfO+jEBwCFJcvLS0tKltdafyLOnTH1DVheOX3Nzc5uSXDzJD5dSfrzlh387yR8m+cusH9v8jTa7+6lZjxkAXrTJaVa11htrrX8xNZOzazQaXTXr8QEAwCFrK7FfXUp5IFOnpNVanxqNRhfMenwAAHBIxuPxxr7vvy/J7yZZa3t7PlNr3ZPkHntzAgBwzGrN7vXTC1ZKKXtLKQ/0fX/5rMcHAACHLMnJpZRb2kzupNn9TK31lbMeGwAAHJY2s3vn1GlNa0tLSzfNelwAAHDY2qlpt5VSnm6zuo91XXfJrMcFAACHbRJjmNpbd2cpZW7W4wIAgMOW5OQkb5iKMexeWlq6dNbjAgCAw5bktHZq0uSI4EcXFxftrQsAwDHvhMXFxQuS3D3ZX1dmFwCA48WJXdfdmORPp44IltkFAOD4cO2115ZSys6pZneHGAMAAMeF4XB42dTitGdKKR8ej8ebZz0uAAA4bIPB4PRSysOt2d1bSrl91mMCAIAjptb64KTZTfK2WY8HAACOmFLKtVOZ3U/OejwAAHBETWV2dyY5bdbjAQCAI2rS8K6srJwx67EAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADHnS1btnxiy5YtzyillFJKvcTr92fdl/FtsmXLlj86Cp5gSimllFIzrTvuuOPTs+7LAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgOPS/wF0o6u7NRb1FQAAAABJRU5ErkJggg==";
$imgPng = imageCreateFromPng($image);
imageAlphaBlending($imgPng, true);
imageSaveAlpha($imgPng, true);
header("Content-type: image/png");
imagePng($imgPng); 
$i = ob_get_contents();
$attachment = chunk_split(base64_encode($i));
// clear the buffer, but don't destroy it
ob_clean();
// Define Body
ob_start(); //Turn on output buffering
?>
--PHP-mixed-<?php echo $random_hash; ?> 
Content-Type: multipart/alternative; boundary="PHP-alt-<?php echo $random_hash; ?>"

--PHP-alt-<?php echo $random_hash; ?> 
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: 7bit

This is the information for laptop problems.  Your signature is attached to this e-mail.

--PHP-alt-<?php echo $random_hash; ?> 
Content-Type: text/html; charset="iso-8859-1"
Content-Transfer-Encoding: 7bit

<h2>Hello World!</h2>
<p>This is something with <b>HTML</b> formatting.</p>
<img src="cid:signature.png" />
--PHP-alt-<?php echo $random_hash; ?>--

--PHP-mixed-<?php echo $random_hash; ?> 
Content-Type: application/zip; name="signature.png" 
Content-Transfer-Encoding: base64 
Content-Disposition: attachment 

<?php echo $attachment; ?>
--PHP-mixed-<?php echo $random_hash; ?>--

<?php
//copy current buffer contents into $message variable and delete current output buffer
$message = ob_get_clean();

$mail = new \helpdesk\core\mail("email@example.com", $subject, $message);
$mail->setHeaders($headers);
$mail->send();
unset($mail);
?> 
```

这是我的 hd（帮助台）对象中正在调用的函数的代码。它是从 test.php 复制和粘贴的。我什至在两者上都将图像数据设置为相同的字符串，它在 test.php 中运行良好，但由于发送所有多部分 php 内容的纯文本而失败。

```
public static function createWorkflowData($signatureData, $signatureImage, $reviewData){
        //print_r($signatureData);
       // print_r($signatureImage);
        //print_r($reviewData);
        //exit;
        $stages = $_SESSION['student']->workflow->getAllStages();
        $updateAssignment = array();
        $assignmentID = "";
        $workflowID = null;
        $mysqli = \helpdesk\db\DB::connect();
        $stmt = $mysqli->prepare("INSERT INTO `check_workflow_data`
        (`workflowID`, `key`, `section`, `questionDate`, `answer`, `checkIn`, `WO`, `internalWO`)
        VALUES  (?,?,?,?,?,?,?,?)");
        foreach( $stages as $stage){
            // Skip main stages
            if($stage->getSection() == "main")
                continue;
            // Create Workflow in DB if it is the 1st one
            if($stage->getAssignmentGroup() != $assignmentID){
                $assignmentID = $stage->getAssignmentGroup();
                $workflowID =  \helpdesk\db\hd::createWorkflow($assignmentID, $signatureData);
            }
            //Create Any WO's
            if($stage->getPreparedWO() != null){
                $stage->setWOID( \helpdesk\db\hd::createWO( $stage->getPreparedWO() ) );
            }
            if($stage->getPreparedInternalWO() != null){
                $stage->setInternalWOID( \helpdesk\db\hd::createInternalWO( $stage->getPreparedInternalWO() ) );
            }
            $key = $stage->getKey();
            $section = $stage->getSection();
            $questionDate = (($stage->getAnswerTime())?$stage->getAnswerTime():time());
            $answer = (($stage->getAnswer())?$stage->getAnswer():"Not Answered");
            $checkIn = (($stage->getAnswerCheckIn()=="true")?1:0);
            $WO = $stage->getWOID();
            $internalWO = $stage->getInternalWOID();
            $stmt->bind_param("issisiss",$workflowID, $key, $section, $questionDate,$answer,$checkIn,$WO,$internalWO);
            $stmt->execute();
            if($stmt->error != ""){
                printf("Error: %s.\n", $stmt->error);
            }

            if(($CheckIn = $stage->getAnswerCheckIn()) != null){
                if($CheckIn == "true"){
                    //echo "Will update ".$assignmentID." by setting ".$stage->getSection()." to 1";
                    $updateAssignment[$assignmentID][$stage->getSection()] = 1;
                }else if($CheckIn == "false"){
                    $updateAssignment[$assignmentID][$stage->getSection()] = 0;
                }
            }
            //Prepare this item for this assignment for turn in
        }
        foreach($updateAssignment as $assignmentID => $assignmentUpdate){
            \helpdesk\db\hd::updateAssignment($assignmentID, $assignmentUpdate);
        }
        $stmt->close();
        $subject = "Laptop Collection " . date("Y");
        //create a boundary string
        $random_hash = md5(date('r', time()));
        //define the headers we want passed
        $headers[] = "From: Do Not Reply <email@example.com>";
        //add boundary string and mime type specification
        $headers[] = "Content-Type: multipart/mixed; boundary=\"PHP-mixed-".$random_hash."\"";
        ob_start();
        $image = $signatureImage;
        $imgPng = imageCreateFromPng($image);
        imageAlphaBlending($imgPng, true);
        imageSaveAlpha($imgPng, true);
        header("Content-type: image/png");
        imagePng($imgPng); 
        $i = ob_get_contents();
        $attachment = chunk_split(base64_encode($i));
        // clear the buffer, but don't destroy it
        ob_clean();
        // Define Body
        ob_start(); //Turn on output buffering
        ?>
        --PHP-mixed-<?php echo $random_hash; ?> 
        Content-Type: multipart/alternative; boundary="PHP-alt-<?php echo $random_hash; ?>"

        --PHP-alt-<?php echo $random_hash; ?> 
        Content-Type: text/plain; charset="iso-8859-1"
        Content-Transfer-Encoding: 7bit

        This is the information for laptop problems.  Your signature is attached to this e-mail.

        --PHP-alt-<?php echo $random_hash; ?> 
        Content-Type: text/html; charset="iso-8859-1"
        Content-Transfer-Encoding: 7bit

        <h2>Hello World!</h2>
        <p>This is something with <b>HTML</b> formatting.</p>
        <img src="cid:signature.png" />
        --PHP-alt-<?php echo $random_hash; ?>--

        --PHP-mixed-<?php echo $random_hash; ?> 
        Content-Type: application/zip; name="signature.png" 
        Content-Transfer-Encoding: base64 
        Content-Disposition: attachment 

        <?php echo $attachment; ?>
        --PHP-mixed-<?php echo $random_hash; ?>--

        <?php
        //copy current buffer contents into $message variable and delete current output buffer
        $message = ob_get_clean();

        $mail = new \helpdesk\core\mail("email@example.com", $subject, $message);
        $mail->setHeaders($headers);
        $mail->send();
        unset($mail);
    } 
```

有人可以告诉我我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:32:45.413

检查图像数据中是否有任何添加的字符、空格或制表符。

# php - Joomla 空会话和 Cookie

> ID：16016788
> 
> 赞同：2
> 
> 时间：2013-04-15T13:44:31.600
> 
> 标签：php, session, cookies, joomla

我在使用 Joomla 时遇到会话/cookie 问题！版本：Joomla！1.5.9 生产/稳定 [Vatani] 2009 年 1 月 9 日 23:00 GMT。

我正在尝试将数据保存到会话中并在下一页上访问它，我尝试过：

1) 使用 joomlas 会话 ($session->set('var', 'data')) - 这是我的首选方法

2) 使用普通的 PHP 会话 ($_SESSION['Var'] = 'data') - 这工作正常，直到我初始化 joomla 大型机

3) 使用 PHP Cookies (setcookie('var', 'data', time()+3600,'/');) - 这在我初始化 joomla 之前仍然有效。

这是我尝试使用的代码：

第 1 页：

```
define( '_JEXEC', 1 );
define( 'JPATH_BASE', realpath(dirname(__FILE__).'/../../..' ));
define( 'DS', DIRECTORY_SEPARATOR );
require_once ( JPATH_BASE .DS.'includes'.DS.'defines.php' );
require_once ( JPATH_BASE .DS.'includes'.DS.'framework.php' );
$mainframe =& JFactory::getApplication('site');
$mainframe->initialise();

$session = JFactory::getSession();

$thedata = array();
$i = 0;
if($resultscount > 0) // $resultscount = mysql_num_rows($sql) == 1097 in my script
{
      while($row = mysql_fetch_assoc($result))
                $thedata[$i]['id'] = $row['user_id'];
                ...LOTS more additions to $thedata, 1000+ rows containing 28 variables each.
$i++;
}
$session->set('thedata',$thedata); 
```

第2页：

```
define( '_JEXEC', 1 );
define( 'JPATH_BASE', realpath(dirname(__FILE__).'/../../..' ));
define( 'DS', DIRECTORY_SEPARATOR );
require_once ( JPATH_BASE .DS.'includes'.DS.'defines.php' );
require_once ( JPATH_BASE .DS.'includes'.DS.'framework.php' );
$mainframe =& JFactory::getApplication('site');
$mainframe->initialise();

$session = JFactory::getSession();
print_r($session->get('thedata')); 
```

会话始终为空。我注意到如果会话只包含少量数据（1 或 2 行）它可以工作，但是当我尝试将大量结果保存到会话中时它会中断并且下一页上的会话是空的。

cookie 也会发生同样的情况，结果很少 = 工作正常，结果很多 = cookie 为空。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-01T21:11:39.100

最有可能的是，将超过 30000 个变量存储在会话中的二维数组中，您会得到一个溢出来破坏您的数据，因此它们会丢失。通过在会话存储（空间有限）中复制数据库，您一无所获。

重新查询数据更合适。此外，使用 Joomla！API而不是直接使用mysql函数。

```
$db = JFactory::getDBO();
$db->setQuery("SELECT ...");
$thedata = $db->loadObjectList('id'); 
```

就是你所需要的（双索引`$i`没有任何目的）。

# jquery - 文件丢失在文件系统中，赶上表单提交

> ID：16016790
> 
> 赞同：4
> 
> 时间：2013-04-15T13:44:34.633
> 
> 标签：jquery, html, jsp, file-upload, struts2

我有一个通过 jQuery`ajaxSubmit()`函数提交的表单。此表单包含一个文件控件，并且已提出一个可能的故障点，即如果所选文件在提交表单之前被重命名、删除或以其他方式无法访问，则表单可能会根据浏览器提交，也可能不会提交。虽然提交失败是预期的行为，但没有向用户指示表单提交失败或原因，这被认为是阻碍。更糟糕的是，在 IE 中，表单提交时没有任何文件数据；虽然我可以在服务器端捕捉到这一点，但如果表单根本不提交会更理想。

我知道 JavaScript 在能够了解有关文件系统的任何信息方面受到限制，并且我同样知道与跨浏览器兼容性有关的任何事情都存在一些不重要的问题。当表单提交失败或 jQuery 吞下它时，Firefox 似乎没有抛出任何异常。IE 不知不觉地蹒跚而行。我想看看是否有办法捕捉表单未提交或提交无效文件的事实。我还想在提交之前捕获文件字段是否有问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:59:06.727

您总是可以使用 Struts2[验证](https://struts.apache.org/core-developers/validation.html)框架来验证文件对象。

将[`fileUpload`拦截器](http://struts.apache.org/core-developers/file-upload-interceptor.html)应用于您的操作，`File`在您提交表单时将对象设置为您的操作。

一旦你得到了对象而不是它，`null`你就可以继续进行某种验证。例如`file.exists()`.

# c# - DrawToBitmap 缺少面板的右下角

> ID：16016799
> 
> 赞同：1
> 
> 时间：2013-04-15T13:44:56.417
> 
> 标签：c#, winforms, drawing

我正在使用 DrawtoBitmap 将面板中的绘图保存到特定位置，但是当我打开文件时，图像的右下角部分应该是空白的。这个空白矩形的大小似乎因绘图而异。这是我的代码：

```
Bitmap bmp = new Bitmap(panel1.Width, panel1.Height);
Graphics g = Graphics.FromImage(bmp);   
Rectangle rect = panel1.RectangleToScreen(panel1.ClientRectangle);
g.CopyFromScreen(rect.Location, Point.Empty, panel1.ClientSize);
g.Dispose();

panel1.DrawToBitmap(bmp, rect); 
```

然后我使用 SaveFileDialog 来存储位图。问题可能是我绘制的面板停靠在父 toolStripContainer.ContentPanel 中，我不确定。

非常感谢您对此事的任何想法或解决方案！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T15:00:04.037

```
Rectangle rect = panel1.RectangleToScreen(panel1.ClientRectangle);
...
panel1.DrawToBitmap(bmp, rect); 
```

您只是传递了错误的矩形。它在屏幕坐标中，它需要在客户端坐标中。您使用 CopyFromScreen() 遇到了这个麻烦，它确实需要屏幕坐标。但没有做任何有用的事情，只是摆脱它。使固定：

```
Rectangle rect = new Rectangle(Point.Empty, panel1.Size);
panel1.DrawToBitmap(bmp, rect); 
```

# garbage-collection - 垃圾回收+内存分页

> ID：16016804
> 
> 赞同：3
> 
> 时间：2013-04-15T13:45:06.637
> 
> 标签：garbage-collection, operating-system, jvm

我试图了解内部和内存分页`collaboration`之间的关系。我有一个已分配的盒子。如果我运行一个需要大量内存的应用程序，我想知道何时发生内存分页以及何时发生内存不足错误。当一个对象被创建时，它是在堆上创建的，如果它没有被使用，它将被垃圾收集，如果它被应用程序使用，它将被回收。`GC``JVM``linux``4GB RAM``1.2GB for JVM``throws`

所以我的问题是操作系统何时开始进行内存分页`JVM`以及分页的活动对象会发生什么`OS`？

此外，如果操作系统页面存在 java 对象，它如何优先考虑应该首先分页的对象？它会分页占用大部分内存的对象吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T17:35:40.293

简短的回答是：JVM 绝对无法知道操作系统交换了堆，或者阻止它交换。

更准确地说，您可以打开 JVM 标志以防止交换 ( `-XX:+UseLargePages`)，但如果操作系统用完大页面，它将恢复为常规交换。此外，任何 GC 周期都会强制将每个页面提取到 RAM 中，以便对其进行检查。所以基本上，交换 + Full GC = 你会遇到一个停止世界的地狱。

G1 的行为会略有不同，因为它会首先收集充满死对象的内存区域，但由于页面错误，它仍然需要更多时间。

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T13:56:41.107

首先，内存分页由底层操作系统而不是 JVM 处理。

如果您的意思是碎片整理，那么是的，JVM 会为您完成。[这](http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html)提供了更多关于垃圾收集器如何处理它的信息，垃圾收集器将长期存在的对象转移到不同的代，从而在旅途中进行碎片整理。这显然会影响哪些对象被调出/不被调出。但这是你所拥有的最大间接控制（通过延长或缩短对象的寿命）

根据内存堆，纯粹是在没有更多空间的情况下。

# c# - 将任何文本添加到 Windows Phone 的语音命令定义

> ID：16016806
> 
> 赞同：1
> 
> 时间：2013-04-15T13:45:09.647
> 
> 标签：c#, windows-phone-8, voice-recognition

我有一个购物清单应用程序，我希望用户能够在应用程序启动时说出“购物清单添加牛奶”并将“牛奶”添加到要购买的物品列表中。

我关注了[http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206959(v=vs.105).aspx#BKMK_CreatingaVCDfile](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206959(v=vs.105).aspx#BKMK_CreatingaVCDfile)但看起来您在定义语音命令时不能只使用任何文本。我想定义类似的东西

```
<ListenFor> add {anyText} </ListenFor> 
```

但是如果我理解正确的话，`{anyText}`一定是VCD中定义的PhraseList。那么有什么方法可以像我的示例中那样在命令后跟任何文本说话？

# java - 使用 Spring Security 进行身份验证 - PRE-Authentication 场景

> ID：16016810
> 
> 赞同：0
> 
> 时间：2013-04-15T13:45:17.103
> 
> 标签：java, spring, spring-mvc, spring-security

我想验证是否可以使用 Spring Security - Pre authentication 方案解决以下身份验证问题：

问题：

1.  用户通过旧系统登录
2.  将页面调用到 Web 系统（在 spring mvc 中创建）
3.  当将页面调用到 web 系统时，它（遗留系统）传递一个令牌、用户名和 user_role
4.  然后，Web 系统使用遗留系统提供的 Web 服务来验证用户名和令牌。
5.  如果在 Web 系统上创建了有效的会话并且用户能够使用该网页，否则用户将被定向到错误页面

我可以使用 Spring Security 提供的预身份验证方案吗？或者只创建一个验证令牌和用户有效性的 Spring AOP 方面是否更容易？

spring 安全文档在解释预认证场景的正确使用方面并不是很好。请指导我采取最好的路线。如果需要更多信息，请告诉我。

欢迎好的例子或链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:57:54.583

遗留系统和 Web 系统 2 是不同的应用程序吗？

基本上，我认为您希望在另一个 Web 应用程序中从旧系统中的用户创建登录会话。一种自动登录到第二个系统。Spring Security 可以在这里为您提供帮助，但您必须使用它对 OAuth 1.0 或 2.0 的支持。 [http://static.springsource.org/spring-security/oauth/](http://static.springsource.org/spring-security/oauth/)

[https://github.com/SpringSource/spring-security-oauth/wiki/oauth1](https://github.com/SpringSource/spring-security-oauth/wiki/oauth1)

我在很久以前就将 OAuth1.0 用于类似的场景。在我的脑海中，我认为 OAUth 已经预定义了步骤 1）消费者请求 Auth 令牌 2）服务器提供请求令牌 3）消费者请求令牌被授权 4）接下来它传递 Auth 令牌并请求访问令牌 5 ) 一旦获得它，它就可以向服务器上的目标 url 发出请求并授予访问权限。

它比我写的更复杂，但关于 spring oauth 支持的好处是 spring 负责令牌位，你必须做最少的编码。希望这能回答你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-13T12:02:49.930

用户使用旧系统登录后，您可以在服务器端生成身份验证令牌，该令牌将存储在数据库中，并在用户端存储在 cookie 或 localStorage 中。然后在每个请求中传递此令牌并在预身份验证过滤器中检查它，就像我在此处的回答中描述的那样：[https ://stackoverflow.com/a/372​​04764/1562234](https://stackoverflow.com/a/37204764/1562234)

# mysql - 在 MySQL 表中替换 R 中的特殊字符

> ID：16016811
> 
> 赞同：4
> 
> 时间：2013-04-15T13:45:17.653
> 
> 标签：mysql, r, rodbc, stx

我有一个使用“RODBC”包从 R 访问的 MySQL 表。一些列具有由 STX 字符 (\x02) 分隔的长连接字符串。我已经显示了下面字符的屏幕打印（字符被圈出）：

![STX 符号](https://i.stack.imgur.com/13Ux6.jpg)

我想从 R（RODBC 包）运行以下查询，用不同的字符替换 STX 分隔符：

```
SELECT REPLACE(columnName, '**\x02**', '#') FROM tableName 
```

我在下面给出了完整的代码：

```
library(RODBC)
myconn <-odbcConnect("mydsn")
query <- "SELECT REPLACE(columnName, '\x02', '#') FROM tableName"
queryResults <- sqlQuery(myconn, query) 
```

有没有办法从 R 中实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T16:44:04.350

RODBC 包含函数`sqlQuery()`，它允许您向连接发送 SQL 查询。根据文档，“‘查询’一词包括任何有效的 SQL 语句，包括表创建、更改、更新等以及 SELECT。sql​​Query 命令是一个方便的包装器，它首先调用 odbcQuery，然后调用 sqlGetResults。如果更细粒度的控制是需要，例如在获取的行数上，可以将其他参数传递给 sqlQuery 或直接调用的底层函数。”

# c++ - 代码中的 C++ 错误（非法成员初始化、“类”类型重新定义、“返回”：无法转换）

> ID：16016813
> 
> 赞同：0
> 
> 时间：2013-04-15T13:45:20.167
> 
> 标签：c++, visual-studio-2010, visual-c++

我的代码中有许多错误，我似乎无法解决问题。当我运行代码时，我有 3 种不同类型的错误：

*   非法成员初始化
*   'class' 类型重新定义
*   'return' : 无法转换

我想做的是创建一个空间模拟器，它有一个菜单驱动的前端。下面的代码能够从以下可能性列表中选择可能在太空中找到的项目：小行星、彗星、飞碟、火箭、空间站、宇航员、卫星、垃圾、月球。

然后需要在 spaceItem 工厂中创建此项目。

抽象类Item.h

```
class AItems // error C2011: 'AItems' : 'class' type redefinition
{
    std::string name;
public:
    AItems(std::string n)
        :name(n)
    {

    }

    //This method is for testing only
    std::string GetName()
    {
        return name;
    }
}; 
```

空间项目.h

```
#include <list>
#include <algorithm>
#include <stdexcept>
#include <memory>
#include <iostream>
using namespace std;

#include "Abstract Class Item.h"

//Lets declare all the concrete ITEMS

class Asteroid : public AItems // error C2504: 'AItems' : base class undefined
{
public: Asteroid() // error spaceitems.h(14): error C2614: 'Asteroid' : illegal member initialization: 'AItems' is not a base or member
            :AItems("Asteroid"){}
};

class Comet : public AItems
{
public: Comet() 
            :AItems("Comet"){}
};

class FlyingSaucer : public AItems
{
public: FlyingSaucer()
            :AItems("Flying Saucer"){}
};

class Rocket : public AItems
{
public: Rocket()
            :AItems("Rocket"){}
};

class SpaceStation : public AItems
{
public : SpaceStation()
             :AItems("Space Station"){}
};

class Astronaut : public AItems
{
public : Astronaut()
             :AItems("Astronaut"){}
};

class Satellite : public AItems
{
    public : Satellite()
                 :AItems("Satellite"){}
};

class Junk : public AItems
{
public : Junk()
             :AItems("Junk"){}
};

class Moon : public AItems
{
public : Moon()
             :AItems("Moon"){}}; 
```

选择项.h

```
 #include <list>
    #include <algorithm>
    #include <stdexcept>
    #include <memory>
    #include <iostream>
    using namespace std;

    #include "Abstract Class Item.h"
    #include "SpaceItems.h"

    class SelectItem
    {
    public:

        enum ITEM_TYPE
        {
            ASTEROID,
            COMET,
            FLYINGSAUCER,
            ROCKET,
            SPACESTATION,
            ASTRONAUT,
            SATELLITE,
            JUNK,
            MOON
        };

        static AItems* createItem(ITEM_TYPE itemType)
        {
            switch (itemType)
            {
            case ASTEROID:
                return new Asteroid(); //error C2440: 'return' : cannot convert from 'Asteroid *' to 'AItems *'
Types pointed to are unrelated; conversion requires reinterpret_cast, C-style cast or function-style cast
            case COMET:
                return new Comet();
            case FLYINGSAUCER:
                return new FlyingSaucer();
            case ROCKET:
                return new Rocket();
            case SPACESTATION:
                return new SpaceStation();
            case ASTRONAUT:
                return new Astronaut();
            case SATELLITE:
                return new Satellite();
            case JUNK:
                return new Junk();
            case MOON:
                return new Moon();
            }
            throw "Invalid Item Type";
        }
    }; 
```

主文件

```
#include <list>
#include <algorithm>
#include <iostream>
using namespace std;

#include "Select Item.h"

void item_information (SelectItem::ITEM_TYPE itemtype)
{
    AItems* createItem = SelectItem::createItem(itemtype);
    std::cout << "Item Type" << std::endl;
    std::cout << itemtype << std::endl;
    delete createItem; // warning C4150: deletion of pointer to incomplete type 'AItems'; no destructor called
}

int main()
{
    item_information (SelectItem::ASTEROID);
    item_information (SelectItem::COMET);
    item_information (SelectItem::FLYINGSAUCER);
    item_information (SelectItem::ROCKET);
    item_information (SelectItem::SPACESTATION);
    item_information (SelectItem::ASTRONAUT);
    item_information (SelectItem::SATELLITE);
    item_information (SelectItem::JUNK);
    item_information (SelectItem::MOON);
} 
```

你能帮我看看我哪里出错了。谢谢

以下是错误列表：

```
spaceitems.h(13)：错误 C2504：“AItems”：未定义的基类

spaceitems.h(14)：错误 C2614：“小行星”：非法成员初始化：“AItems”不是基础或成员

spaceitems.h(19)：错误 C2504：“AItems”：未定义的基类

spaceitems.h(20)：错误 C2614：“彗星”：非法成员初始化：“AItems”不是基础或成员

spaceitems.h(25): 错误 C2504: 'AItems' : 基类未定义

spaceitems.h(26)：错误 C2614：“FlyingSaucer”：非法成员初始化：“AItems”不是基础或成员

spaceitems.h(31): 错误 C2504: 'AItems' : 基类未定义

spaceitems.h(32)：错误 C2614：“Rocket”：非法成员初始化：“AItems”不是基础或成员

spaceitems.h(37)：错误 C2504：“AItems”：未定义基类

spaceitems.h(38)：错误 C2614：“SpaceStation”：非法成员初始化：“AItems”不是基础或成员

spaceitems.h(43): 错误 C2504: 'AItems': 基类未定义

spaceitems.h(44)：错误 C2614：“宇航员”：非法成员初始化：“AItems”不是基础或成员

spaceitems.h(49): 错误 C2504: 'AItems': 基类未定义

spaceitems.h(50)：错误 C2614：“卫星”：非法成员初始化：“AItems”不是基础或成员

spaceitems.h(55): 错误 C2504: 'AItems': 基类未定义

spaceitems.h(56)：错误 C2614：“垃圾”：非法成员初始化：“AItems”不是基础或成员

spaceitems.h(61): 错误 C2504: 'AItems' : 基类未定义

spaceitems.h(62)：错误 C2614：“Moon”：非法成员初始化：“AItems”不是基础或成员

选择 item.h(33)：错误 C2440：“返回”：无法从“小行星 *”转换为“AItems *”
指向的类型是不相关的；转换需要 reinterpret_cast、C-style cast 或 function-style cast

选择 item.h(35)：错误 C2440：“返回”：无法从“彗星 *”转换为“AItems *”
指向的类型是不相关的；转换需要 reinterpret_cast、C-style cast 或 function-style cast

选择 item.h(37)：错误 C2440：'return'：无法从 'FlyingSaucer *' 转换为 'AItems *'
指向的类型是不相关的；转换需要 reinterpret_cast、C-style cast 或 function-style cast

选择 item.h(39)：错误 C2440：'return'：无法从 'Rocket *' 转换为 'AItems *'
指向的类型是不相关的；转换需要 reinterpret_cast、C-style cast 或 function-style cast

选择 item.h(41)：错误 C2440：'return'：无法从 'SpaceStation *' 转换为 'AItems *'
指向的类型是不相关的；转换需要 reinterpret_cast、C-style cast 或 function-style cast

选择 item.h(43)：错误 C2440：“返回”：无法从“宇航员 *”转换为“AItems *”
指向的类型是不相关的；转换需要 reinterpret_cast、C-style cast 或 function-style cast

选择 item.h(45)：错误 C2440：“返回”：无法从“卫星 *”转换为“AItems *”
指向的类型是不相关的；转换需要 reinterpret_cast、C-style cast 或 function-style cast

选择 item.h(47)：错误 C2440：'return'：无法从 'Junk *' 转换为 'AItems *'
指向的类型是不相关的；转换需要 reinterpret_cast、C-style cast 或 function-style cast

选择 item.h(49)：错误 C2440：'return'：无法从 'Moon *' 转换为 'AItems *'
指向的类型是不相关的；转换需要 reinterpret_cast、C-style cast 或 function-style cast

main.cpp(13)：警告 C4150：删除指向不完整类型“AItems”的指针；没有调用析构函数

我已经解决了这个问题。但是，它没有做我想做的事。我希望能够选择一个项目，然后显示该项目。

相反，它显示以下内容

Item Type
0
Item Type
1
Item Type
2 
```

以此类推，直到第 8 位。

该程序应该向我询问项目并列出该特定项目，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:58:08.467

如前所述，我会说放入一些双重防护！

但是，我确实尝试过，Visual Studio/C++ 2010 编译得很好：

```
#include "stdafx.h"

#include <list>
#include <algorithm>
#include <stdexcept>
#include <memory>
#include <iostream>

class AItems
{
    std::string name;
public:
    AItems(std::string n)
        :name(n)
    {

    }

    //This method is for testing only
    std::string GetName()
    {
        return name;
    }
};

//Lets declare all the concrete ITEMS

class Asteroid : public AItems
{
public: Asteroid()
            :AItems("Asteroid"){}
};

class Comet : public AItems
{
public: Comet() 
            :AItems("Comet"){}
};

class FlyingSaucer : public AItems
{
public: FlyingSaucer()
            :AItems("Flying Saucer"){}
};

class Rocket : public AItems
{
public: Rocket()
            :AItems("Rocket"){}
};

class SpaceStation : public AItems
{
public : SpaceStation()
             :AItems("Space Station"){}
};

class Astronaut : public AItems
{
public : Astronaut()
             :AItems("Astronaut"){}
};

class Satellite : public AItems
{
    public : Satellite()
                 :AItems("Satellite"){}
};

class Junk : public AItems
{
public : Junk()
             :AItems("Junk"){}
};

class Moon : public AItems
{
public : Moon()
             :AItems("Moon"){}};

#include <list>
#include <algorithm>
#include <stdexcept>
#include <memory>
#include <iostream>

class SelectItem
{
public:

    enum ITEM_TYPE
    {
        ASTEROID,
        COMET,
        FLYINGSAUCER,
        ROCKET,
        SPACESTATION,
        ASTRONAUT,
        SATELLITE,
        JUNK,
        MOON
    };

    static AItems* createItem(ITEM_TYPE itemType)
    {
        switch (itemType)
        {
        case ASTEROID:
            return new Asteroid();
        case COMET:
            return new Comet();
        case FLYINGSAUCER:
            return new FlyingSaucer();
        case ROCKET:
            return new Rocket();
        case SPACESTATION:
            return new SpaceStation();
        case ASTRONAUT:
            return new Astronaut();
        case SATELLITE:
            return new Satellite();
        case JUNK:
            return new Junk();
        case MOON:
            return new Moon();
        }
        throw "Invalid Item Type";
    }
};

#include <list>
#include <algorithm>
#include <iostream>

void item_information (SelectItem::ITEM_TYPE itemtype)
{
    AItems* createItem = SelectItem::createItem(itemtype);
    std::cout << "Item Type" << std::endl;
    std::cout << itemtype << std::endl;
    delete createItem;
}

int _tmain(int argc, _TCHAR* argv[])
{
    item_information (SelectItem::ASTEROID);
    item_information (SelectItem::COMET);
    item_information (SelectItem::FLYINGSAUCER);
    item_information (SelectItem::ROCKET);
    item_information (SelectItem::SPACESTATION);
    item_information (SelectItem::ASTRONAUT);
    item_information (SelectItem::SATELLITE);
    item_information (SelectItem::JUNK);
    item_information (SelectItem::MOON);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:11:36.927

你需要[包括警卫](http://en.wikipedia.org/wiki/Include_guard)。

如果你在一个源文件中多次包含一个头文件，编译器会报错多个定义。这是因为头文件完全包含在源文件中。

执行此操作的最常见和标准的方法是使用预处理器来确保内容不包含多次。

一些随机头文件：

```
#ifndef SOME_RANDOM_HEADER_FILE
#define SOME_RANDOM_HEADER_FILE

// Contents of header file

#endif // SOME_RANDOM_HEADER_FILE 
```

这将确保`#ifndef`和之间的所有内容`#endif`仅包含在源文件中一次。

还有一个更新的东西，主要由 Visual C++ 使用，称为[`#pragma once`](http://en.wikipedia.org/wiki/Pragma_once). 您将它放在头文件的顶部，编译器将确保头文件在源文件中不会被多次包含。

还应该注意的是，这些方法不会阻止头文件包含在多个源文件中。

# iphone - 在提醒警报弹出期间 MpMovieplayer 崩溃

> ID：16016814
> 
> 赞同：2
> 
> 时间：2013-04-15T13:45:20.480
> 
> 标签：iphone, ios, objective-c, ipad, mpmovieplayercontroller

我有这个奇怪的问题。当我使用 播放任何视频时`MpMoviePlayerController`，如果我收到任何**提醒警报**并选择**Close**，那么我的应用程序会因 Log 崩溃：

> “一个 AVPlayerItem 不能与多个 AVPlayer 实例相关联”。

我只使用一个实例`MpPlayerController`。

我在这个问题上搜索了一下，发现如果我设置 的属性可以避免这种`useApplicationAudioSession = NO` 情况`MpMoviePlayerController`，那么我没有任何崩溃。但问题是这个属性在 IOS6 之后被**弃用**了，苹果不推荐使用这个属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:34:49.493

我猜问题是您的音频会话被警报消息的音频 ping 打断了。尝试使用共享实例来获取您的音频会话。然后设置一个通知监听器来正确处理中断。在此处查看苹果指南[处理音频中断](http://developer.apple.com/library/ios/#documentation/Audio/Conceptual/AudioSessionProgrammingGuide/HandlingAudioInterruptions/HandlingAudioInterruptions.html#//apple_ref/doc/uid/TP40007875-CH11-SW9%20%22Apple%20Guide%20For%20Audio%20Interuptions)

```
NSError *setCategoryError = nil;
[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error:      &setCategoryError];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(interruptionHandler:) name:AVAudioSessionInterruptionNotification object:nil]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T14:42:41.410

我想你想要的是：`AVAudioSessionCategoryAmbient`

请参阅所有[“音频会话类别”的描述</a>。](https://developer.apple.com/library/ios/documentation/Audio/Conceptual/AudioSessionProgrammingGuide/AudioSessionBasics/AudioSessionBasics.html)

 [这应该适合你：

```
NSError *setCategoryError = nil;
BOOL success = [[AVAudioSession sharedInstance]
                 setCategory: AVAudioSessionCategoryAmbient
                 error: &setCategoryError]; 
```](https://developer.apple.com/library/ios/documentation/Audio/Conceptual/AudioSessionProgrammingGuide/AudioSessionBasics/AudioSessionBasics.html) 

[如中](https://developer.apple.com/library/ios/documentation/Audio/Conceptual/AudioSessionProgrammingGuide/AudioSessionBasics/AudioSessionBasics.html)[所述：设置类别](https://developer.apple.com/library/ios/documentation/Audio/Conceptual/AudioSessionProgrammingGuide/AudioSessionBasics/AudioSessionBasics.html#//apple_ref/doc/uid/TP40007875-CH3-SW7)。

# c - 使用引用参数从 c 调用汇编函数

> ID：16016829
> 
> 赞同：0
> 
> 时间：2013-04-15T13:45:53.620
> 
> 标签：c, assembly, x86, nasm

我正在实现一个汇编函数来反转一个字符串。在 C 中使用签名调用此函数 函数中的`void strrev(char *str) ;` 一切似乎都工作正常，使用 gdb 进行调试，但在调用后打印字符串的内容`strrev()` 只会打印空字符串。

```
getlast:
        cmp     byte [edi], 0
        je      reverse_string
        inc     edi
        inc     ecx
        jmp     getlast

reverse_string:
        cmp     esi, edi
        jae     reversed
        mov     al, [esi]
        mov     bl, [edi]
        mov     [esi], bl
        mov     [edi], al
        inc     esi
        dec     edi

        jmp     reverse_string 
```

主程序

```
void strrev(char *str) ;

int main() {
   char *str1;

   str1 = strdup("Hello World") ;
   strrev(str1) ;
   printf("str1 = \"%s\"\n", str1) ;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:49:02.970

我对汇编语言不是特别流利，但对我来说

```
 cmp     byte [edi], 0
    je      reverse_string 
```

看起来您在反转中包含了 0 终止符，因此您反转的“字符串”都以 0 字节开头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T13:49:30.017

看来您将 包括`'\0'`在反转中，即您将其移到前面。

我对 x86 程序集不是很热，但是`edi`当您输入时它似乎指向终结符`reverse_string`，因此包含在第一次交换中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T13:50:09.973

这

```
 cmp     byte [edi], 0
    je      reverse_string 
```

会导致这个

```
 mov     bl, [edi]
    mov     [esi], bl 
```

在字符串的开头写入 0。

您需要从字符串终止符退后一步。

# iphone - 从 xml 中提取特定元素

> ID：16016832
> 
> 赞同：0
> 
> 时间：2013-04-15T13:46:02.163
> 
> 标签：iphone, ios, objective-c, nsxmlparser

我在我的 iOS 应用程序中实现了 XML 解析，但是我遇到了以下文件的问题：

```
<?xml version="1.0" encoding="UTF-8"?>
<AllJobs>
    <Mainjobs>
     <job1 name="simple">
     <Group name="one">
        <item name>"itemone"</item name>
        <item name>"itemtwo"</item name>
        <item name>"itemthree"</item name>
      </Group>
      <Group name="two">
        <item name>"itemfour"</item name>
        <item name>"itemfive"</item name>
        <item name>"itemsix"</item name>
      </Group>
    </job1>
    <job2 name="medium" />
    </job2>
    <job3 name="hard" />
    </job3>
    </Mainjobs>
</AllJobs> 
```

我正在尝试解析“itemfour、itemfive、itemsix”的项目名称并将它们显示在 tableview 中：

```
<Group name="two">
    <item>"itemfour"</item>
    <item>"itemfive"</item>
    <item>"itemsix"</item>
</Group> 
```

我是这样解析的，但它正在检索每个组标签中的所有项目名称：

```
-(void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict {

    if([elementName isEqualToString:@"Alljobs"]){
        jobNameArray=[[NSMutableArray alloc]init];

    } else if ([elementName isEqualToString:@"Mainjobs"]) {
        //  self.itemDict = [[NSMutableDictionary alloc] init];
        object=[[parseObject alloc]init];
        dict=[[NSMutableDictionary alloc] init];
    } else if ([elementName isEqualToString:@"Group"]) {
        if ([str isEqualToString:@"Two"]) {
            currentElement=nil;
            currentElement=[[NSMutableString alloc]init];
        }
    } else if([elementName isEqualToString:@"item"]) {
        str=[attributeDict objectForKey:@"name"];
        NSLog(@"the attribute string is %@",[attributeDict objectForKey:@"name"]);
    }
}

-(void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string {
    if(string) {
        [currentElement appendString:string];
        NSLog(@"  the element00000000%@", currentElement);
    }
}

-(void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:    (NSString *)namespaceURI qualifiedName:(NSString *)qName {

    if([elementName isEqualToString:@"Mainjobs"]){
        NSLog(@"the array count is %i",[jobNameArray count]);
    } else if([elementName isEqualToString:@"Job1"]) {

    }

    if([elementName isEqualToString:@"</item>"]) {
        NSLog(@"element ---------%@",elementName);

        [jobNameArray addObject:str];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:12:22.443

XML 标记名称不能有空格。

涉及的结果`<item name>`未定义。

# c++ - 如果可以加入，如何加入线程，否则什么都不做？

> ID：16016836
> 
> 赞同：7
> 
> 时间：2013-04-15T13:46:14.453
> 
> 标签：c++, boost

我正在使用`boost::thread join`方法等待线程完成。`join`但是，如果我在线程已经完成时尝试线程，我会收到一个异常。那我怎么能：

如果活跃则加入线程，如果不活跃则不执行任何操作？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-15T13:57:40.370

使用该`joinable()`函数检查是否应加入：

```
if (thread.joinable()) thread.join(); 
```

您可以（事实上，您必须）加入一个线程，即使它已经完成，除非它已被分离。加入两次，或者加入一个空的或分离的线程是错误的。

# c# - wp8的longlistselector工具

> ID：16016837
> 
> 赞同：3
> 
> 时间：2013-04-15T13:46:19.497
> 
> 标签：c#, windows-phone-8

我目前正在使用 windows phone 8 ，使用`Longlistselector`. 我正在列出我的产品列表，我需要获取选定的项目索引，使用该索引我需要导航到相应的页面。如何从中获取选定的索引`longlistselector`？我得到了`selectedItem`，但我不知道如何使用`selecteditem`来获取它的索引？提前致谢

我的长名单选择器代码是

```
<phone:PhoneApplicationPage.Resources>
        <DataTemplate x:Key="trainlistitemtemplate">
            <StackPanel Orientation="Horizontal">
                <Image Height="170" Width="170" Source="{Binding Imgcity}" Margin="0,0,9,0"></Image>
                <StackPanel VerticalAlignment="Top">
                    <TextBlock FontWeight="Bold" Text="{Binding Cityname}" />
                    <TextBlock Text="{Binding Citycode}"/>
                    <Button Content="BOOK" BorderBrush="{x:Null}" Background="{StaticResource PhoneAccentBrush}" Click="Button_Click_1"></Button>
                </StackPanel>
            </StackPanel>
        </DataTemplate>

        <DataTemplate x:Name="grpheadtemplate">
            <Border Background="Transparent" Padding="5">
                <Border Background="{StaticResource PhoneAccentBrush}" BorderBrush="{StaticResource PhoneAccentBrush}" BorderThickness="2" Width="62" 
                        Height="62" Margin="0,0,18,0" HorizontalAlignment="Left">
                    <TextBlock Text="{Binding Key}" Foreground="{StaticResource PhoneForegroundBrush}" FontSize="48" Padding="6" 
                                FontFamily="{StaticResource PhoneFontFamilySemiLight}" HorizontalAlignment="Left" VerticalAlignment="Center">
                    </TextBlock>
                </Border>
            </Border>
        </DataTemplate>

        <phone:JumpListItemBackgroundConverter x:Key="BackgroundConverter"/>
        <phone:JumpListItemForegroundConverter x:Key="ForegroundConverter"/>
        <Style x:Key="trainlist" TargetType="phone:LongListSelector">
            <Setter Property="GridCellSize"  Value="113,113"/>
            <Setter Property="LayoutMode" Value="Grid" />
            <Setter Property="ItemTemplate">
                <Setter.Value>
                    <DataTemplate>
                        <Border Background="{Binding Converter={StaticResource BackgroundConverter}}" Width="113" Height="113" Margin="6" >
                            <TextBlock Text="{Binding Key}" FontFamily="{StaticResource PhoneFontFamilySemiBold}" FontSize="48" Padding="6" 
               Foreground="{Binding Converter={StaticResource ForegroundConverter}}" VerticalAlignment="Center"/>
                        </Border>
                    </DataTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </phone:PhoneApplicationPage.Resources>
    <!--LayoutRoot is the root grid where all page content is placed-->
    <Grid x:Name="LayoutRoot" Background="Transparent">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!--TitlePanel contains the name of the application and page title-->
        <StackPanel x:Name="TitlePanel" Grid.Row="0" Margin="12,17,0,28">
            <TextBlock x:Name="ApplicationTitle" Text="Select Destination" Style="{StaticResource PhoneTextNormalStyle}" FontSize="40" FontFamily="Batang" FontWeight="Bold"/>
        </StackPanel>

        <!--ContentPanel - place additional content here-->

        <Grid Grid.Row="1">
            <phone:LongListSelector HorizontalAlignment="Left" Height="703" Margin="10,10,0,-36" VerticalAlignment="Top" Width="458" x:Name="lls1"
                                    Background="Transparent" HideEmptyGroups="True" LayoutMode="List" IsGroupingEnabled="True"
                                    ItemTemplate="{StaticResource trainlistitemtemplate}" GroupHeaderTemplate="{StaticResource grpheadtemplate}"
                                    JumpListStyle="{StaticResource trainlist}" MouseLeftButtonDown="lls1_MouseLeftButtonDown" SelectionChanged="lls1_SelectionChanged"/>
        </Grid>
    </Grid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:56:50.203

您真正想要的不是获取索引，而是获取`DataContext`用户点击的项目的。我想，您正在使用数据绑定来填充 LongListSelector。然后，您需要监听`Tap`列表项上的事件，并且在该事件的处理程序中，您需要检索`DataContext`属性，将其转换为所需的类型，并使用该值来决定转到哪个页面。这已在 StackOverflow 上多次讨论过，例如，请参阅[此答案。](https://stackoverflow.com/a/7728445/371804)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-10T09:14:18.203

sender 是 longlistselector 并且选定的项目是特定属性，例如： var t = (sender as LongListSelector).SelectedItem as Sample;

# javascript - 如何在页面中包含 Bootstrap 而不会破坏页面的现有样式？

> ID：16016839
> 
> 赞同：1
> 
> 时间：2013-04-15T13:46:22.233
> 
> 标签：javascript, css, twitter-bootstrap, modal-dialog

我想根据页面中的某些操作将包含[Bootstrap](http://twitter.github.io/bootstrap/)（和[Bootstrap Modal](https://github.com/jschr/bootstrap-modal)）的 JavaScript 编写到页面中。

但是，我不想踩踏页面中现有的样式，我不知道这些样式将包含哪些样式，因为这将发生在超过 15 个站点上，并且每个站点的开发人员都将不断变化网站。

我唯一可以保证的是，`<script type="text/javascript" src="path/to/myscript/that/adds/bootstrap.js"></script>`它将包含在每个页面的`<head>`元素中。

如何在不遇到上述问题的情况下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:50:57.173

如果所有内容都已使用定义的类进行样式设置，那么我只会指示您的开发人员将引导程序包含在其样式列表的顶部。这将*有助于*但不一定*解决*您的问题，因为引导程序可能比现有样式更具体地针对元素。

已经提出了一个相关问题：[CSS 样式的应用顺序是什么？](https://stackoverflow.com/questions/2826368/in-which-order-are-css-styles-applied)

# html - 不允许加载本地资源，在对象中嵌入 pdf

> ID：16016862
> 
> 赞同：5
> 
> 时间：2013-04-15T13:47:14.860
> 
> 标签：html, embed

我需要在我的网页中打开 pdf，问题是我从另一台服务器获取文件，所以我尝试使用`<object>`带有 url 的元素到 PDF 文件，但它没有用。因此，起初我将 pdf 文件下载到我的服务器，然后我尝试使用

```
<object alt="pdf" border="0" data="d:/WEB/ASP/soubory/Download/189005864.pdf" 
        type="application/pdf" width="100%" height="100%"></object> 
```

但我收到错误。在铬它说

> 不允许加载本地资源

并在 IE 中

> 拒绝访问

所以我检查了我下载的文件是否受到某种限制，但它们不是，即使我右键单击源代码中的链接并选择“在新选项卡中打开”选项，浏览器也会在新选项卡中打开 pdf。那么有什么想法可能是错的吗？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-15T14:28:28.487

您的网页（以及更广泛地通过网页浏览器）无权访问您的文件系统。要通过网页访问文件，您需要虚拟路径而不是物理路径。

尝试像`http://[Your server]/directory/yourPDF.pdf`对象的 src 之类的东西。

# sql-server - 如何在预处理查询中调用存储过程

> ID：16016863
> 
> 赞同：2
> 
> 时间：2013-04-15T13:47:17.410
> 
> 标签：sql-server, entity-framework, stored-procedures, parameters, visual-studio-lightswitch

我有一个存储过程，它返回我需要在屏幕上查看的所有数据。我的问题很简单，如何调用存储过程，带参数？

```
partial void Query1_PreprocessQuery(int? UserSaveId, ref IQueryable<RuleEntry> query)
{
     query = ????   
}

CREATE PROCEDURE [dbo].[FilterRuleEntriesByUserSaveId]
@userSaveId INT
AS    
BEGIN
WITH records
AS
.......
.......
SELECT  [One], [Two], [Three]
FROM    records 
WHERE   rn = 1
END 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:06:09.520

如果要**显示**数据，最简单的方法是使用自定义 RIA 服务。

本文向您展示了如何在 LightSwitch 中创建 RIA 服务（尽管它的目的是创建图表，但它向您展示了您需要的所有技术）。

[我如何：显示基于聚合数据的图表 (Eric Erhardt)](http://blogs.msdn.com/b/lightswitch/archive/2011/04/08/how-do-i-display-a-chart-built-on-aggregated-data-eric-erhardt.aspx)

有关在 LightSwitch 中执行存储过程的一些附加信息（虽然不完全是您的场景，但它可能会帮助您理解这个概念）。

但是一旦您创建了 RIA 服务，您几乎可以做任何您想做的事情，包括使用 David 的链接中描述的技术。

[在 LightSwitch 中执行一个简单的存储过程](http://blogs.msdn.com/b/eric_erhardt/archive/2012/04/17/executing-a-simple-stored-procedure-in-lightswitch.aspx)

要访问*ConfigurationManager*，您需要添加对*System.Configuration.dll*的引用（如果尚未添加）。然后在您的代码中，您将需要一个*using/imports System.Configuration*语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T05:06:49.780

是的，RIA 服务是在 lightswitch 中使用存储过程的唯一方法。

我还发现，如果在实体数据模型之上构建 RIA 服务，那么 RIA 服务类必须与 EDM 在同一个项目（程序集）中。否则，LS 无法使用 RIA 服务。

# javascript - 带有 elFinder 的 TinyMCE 4

> ID：16016870
> 
> 赞同：5
> 
> 时间：2013-04-15T13:47:30.673
> 
> 标签：javascript, jquery, tinymce, elfinder

是否有人已经尝试将 elFinder 集成到新 (4b1) 版本的 TinyMCE 中？看起来[以前的](http://www.tinymce.com/wiki.php/how-to_implement_a_custom_file_browser) [实现](https://github.com/Studio-42/elFinder/wiki/Integration-with-TinyMCE-3.x)不起作用。请发一些片段，非常感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T18:38:23.447

好的。我找到了解决方案：

1.  在名为 elfinder 的插件中创建文件夹。
2.  下载最新[的 elFinder](http://elfinder.org/)并放入此文件夹 plugins/elfinder。
3.  将插件“elfinder”添加到插件列表 (tinymce.init)。
4.  将 js/elfinder.min.js 重命名为 js/plugin.min.js
5.  在插件的根文件夹中创建文件 plugin.min.js (elfinder/plugin.min.js)
6.  在里面插入下一个文本并保存：

> tinymce.PluginManager.add("elfinder", function (editor, url) {
> 
> editor.settings.file_browser_callback = function (id, value, type, win) {
> 
> ```
>  $('<div />').dialogelfinder({
>      url: url + '/php/connector.php',
>      commandsOptions: {
>         getfile: {
>            oncomplete: 'destroy'
>         }
>      },
>      getFileCallback: function (url)
>      {
>         var fieldElm = win.document.getElementById(id);
>         fieldElm.value = editor.convertURL(url, null, true);
>         if ("fireEvent"in fieldElm) {
>            fieldElm.fireEvent("onchange")
>         } else {
>            var evt = document.createEvent("HTMLEvents");
>            evt.initEvent("change", false, true);
>            fieldElm.dispatchEvent(evt)
>         }
>      }
>   }); 
> ```
> 
> }; }, ["elfinder/js"]);

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-08-26T14:51:30.400

我更新了 Wiki，现在应该按照以下步骤工作：[https ://github.com/Studio-42/elFinder/wiki/Integration-with-TinyMCE-4.x](https://github.com/Studio-42/elFinder/wiki/Integration-with-TinyMCE-4.x)

主要的变化是 TinyMCE 不再使用 InlinePopup 插件，回调被改变，而不是`file_browser_callback : 'elFinderBrowser'`你必须删除引号：

在 TinyMCE 初始化中： `file_browser_callback : elFinderBrowser`

将 elFinderBrowser 回调添加到您的 javascript：

```
function elFinderBrowser (field_name, url, type, win) {
  tinymce.activeEditor.windowManager.open({
    file: '/elfinder/elfinder.html',// use an absolute path!
    title: 'elFinder 2.0',
    width: 900,  
    height: 450,
    resizable: 'yes'
  }, {
    setUrl: function (url) {
      win.document.getElementById(field_name).value = url;
    }
  });
  return false;
} 
```

最后修改/复制 elfinder.html 文件以使用回调：

```
<!-- Include jQuery, jQuery UI, elFinder (REQUIRED) -->

<script type="text/javascript">
  var FileBrowserDialogue = {
    init: function() {
      // Here goes your code for setting your custom things onLoad.
    },
    mySubmit: function (URL) {
      // pass selected file path to TinyMCE
      top.tinymce.activeEditor.windowManager.getParams().setUrl(URL);

      // close popup window
      top.tinymce.activeEditor.windowManager.close();
    }
  }

  $().ready(function() {
    var elf = $('#elfinder').elfinder({
      // set your elFinder options here
      url: 'php/connector.php',  // connector URL
      getFileCallback: function(file) { // editor callback
        FileBrowserDialogue.mySubmit(file.url); // pass selected file path to TinyMCE 
      }
    }).elfinder('instance');      
  });
</script> 
```

# java - 如何在屏幕上移动 jlabel 图像？

> ID：16016872
> 
> 赞同：0
> 
> 时间：2013-04-15T13:47:37.373
> 
> 标签：java, swing, jpanel

我想点击屏幕让角色移动到那个目的地。不是立即，而是“步行”到给定的坐标。目前我正在使用 JLabels，如果我只使用静态图像它们很好，但每次我点击屏幕上的某个位置时，图像都会显示在那个确切的位置。有人可以给我一些提示吗？

编辑：我应该覆盖绘画类并以这种方式绘制一些项目吗？

这是一些代码：

```
package mod;

import java.awt.Color;
import java.awt.Component;
import java.awt.Dimension;
import java.awt.Font;
import java.awt.FontMetrics;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Image;
import java.awt.Rectangle;
import java.awt.Toolkit;
import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.image.BufferedImage;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import java.beans.PropertyChangeEvent;
import java.io.File;
import java.io.IOException;
import java.text.DecimalFormat;
import java.util.ArrayList;
import java.awt.KeyboardFocusManager;

import javax.imageio.ImageIO;
import javax.swing.*;

public class Board2 extends JPanel  {

private Thread animator;
int x, y;
double ix, iy;
double dx, dy;
final int frameCount = 8;
BufferedImage flower;
private int[][] fPos = {{232, 15},{400, 200},{335, 335}}; // flower coordinates 
private static int bWIDTH = 800; // width of window 
private static int bHEIGHT = 600;// height of window
private Font font;
private FontMetrics metrics;

ImageIcon grassI = new ImageIcon(this.getClass().getResource("grass.png"));
ImageIcon riverI = new ImageIcon(this.getClass().getResource("river.png"));
private Image grass = grassI.getImage();
private Image river = riverI.getImage();

private House house = new House();
private River river1 = new River();
//private Flower flower = new Flower(); 
private TitleScreenLayer ts = new TitleScreenLayer();
private Player girlP = new Player();
private static int px = 250;
private static int py = 250;
private boolean visTl = false;
private boolean plant = false;
ArrayList<Flower> flowers= new ArrayList<Flower>();
private long period;

private volatile boolean running = false;
private volatile boolean gameOver = false;
private volatile boolean isPaused = false;

// New stuff for Board2 below

private JLayeredPane lpane;
private JLabel grassLabel;
private JLabel riverLabel;
private JLabel houseLabel;
private JLabel pear1Label;
private JLabel pear2Label;
private JLabel pear3Label;
private JLabel drivewayLabel;
private JLabel girlLabel;
private JProgressBar progressBar;
private JLabel toolLabel;
private JTextArea textBubble;

ImageIcon girlImage = new ImageIcon(girlP.getImage());

int mouseClicks = 0;

CountdownTimer cTimer;

private static String message;

public static String setMessage(String newMessage){
    return message = newMessage;
}

private static ImageIcon playerTool = new ImageIcon("BradfordPear.png");

public ImageIcon getPlayerTool(){
    return playerTool;
}

public static void setPlayerTool(String image){
    playerTool = new ImageIcon(image);
}

public JTextArea getTextBubble(){
    return textBubble;
}

public Player getPlayer(){
    return girlP;
}

public static int getPlayerX(){
    return px;
}

public static int getPlayerY(){
    return py;
}

public JLayeredPane getLayeredPane(){
    return lpane;
}

public Board2(){
    setLayout(new BoxLayout(this, BoxLayout.Y_AXIS));

    //create the layered pane
    lpane = new JLayeredPane();
    lpane.setPreferredSize(new Dimension(800, 600));

    //create the "background" image
    ImageIcon image = new ImageIcon("grass.png");
    grassLabel = new JLabel(image);
    grassLabel.setBounds(0, 0, image.getIconWidth(), image.getIconHeight());

    //create the house image
    ImageIcon houseImage = new ImageIcon("house.png");
    houseLabel = new JLabel(houseImage);
    houseLabel.setBounds(-330, -150, image.getIconWidth(), image.getIconHeight());

    //create the driveway image
    ImageIcon drivewayImage = new ImageIcon("driveway.png");
    drivewayLabel = new JLabel(drivewayImage);
    drivewayLabel.setBounds(-335, 105, image.getIconWidth(), image.getIconHeight());

    //create the river image
    ImageIcon riverImage = new ImageIcon("river.png");
    riverLabel = new JLabel(riverImage);
    riverLabel.setBounds(360, 0, image.getIconWidth(), image.getIconHeight());

    //create pear1 image
    ImageIcon pear1Image = new ImageIcon("BradfordPear.png");
    pear1Label = new JLabel(pear1Image);
    pear1Label.setBounds(100, 100, image.getIconWidth(), image.getIconHeight());

    //create pear2 image
    ImageIcon pear2Image = new ImageIcon("BradfordPear.png");
    pear2Label = new JLabel(pear2Image);
    pear2Label.setBounds(50, -100, image.getIconWidth(), image.getIconHeight());

    //create pear3 image
    ImageIcon pear3Image = new ImageIcon("BradfordPear.png");
    pear3Label = new JLabel(pear3Image);
    pear3Label.setBounds(-100, -50, image.getIconWidth(), image.getIconHeight());

    //create initial Player(girl) image
    //ImageIcon girlImage = new ImageIcon(girlP.getImage());
    girlLabel = new JLabel(girlImage);
    girlLabel.setBounds((int)girlP.getPositionX(), (int)girlP.getPositionY(), image.getIconWidth(), image.getIconHeight());

    //create progress bar
    progressBar = new JProgressBar(JProgressBar.VERTICAL, 0, 10);
    progressBar.setValue(0);
    progressBar.setBounds(720, 50, 100, 500);

    //create timer
    JTextField timerField = new JTextField();
    cTimer = new CountdownTimer(timerField);
    timerField.setBounds(400, 0, 50, 50);

    //create toolbox
    Toolbox toolbox = new Toolbox();
    toolbox.setBounds(550, 0, 250, 50);

    //create the text bubble
    textBubble = new JTextArea("IDPC is the best coding group ever");
    textBubble.setLineWrap(true);
    //textBubble.setBounds(200, 200, 100, 100);

    //add the background & various images
    lpane.add(grassLabel, new Integer(1));
    lpane.add(houseLabel, new Integer(2));
    lpane.add(riverLabel, new Integer(2));
    lpane.add(drivewayLabel, new Integer(2));
    lpane.add(pear1Label, new Integer(2));
    lpane.add(pear2Label, new Integer(2));
    lpane.add(pear3Label, new Integer(2));
    lpane.add(progressBar, new Integer(3));
    lpane.add(girlLabel, new Integer(3));
    lpane.add(timerField, new Integer(2));
    lpane.add(toolbox, new Integer(3));

    add(lpane);

    cTimer.start();
    // listen for action events
    new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            girlP.move();
            //girlLabel.setLocation(px, py);
        }
    };

    // listen for mouse presses
    addMouseListener(new MouseAdapter() {
        public void mousePressed(MouseEvent e) {
            //lpane.remove(textBubble);
            mouseClicks+= 1;
            testPress(e.getX(), e.getY());
            //textBubble.setBounds(e.getX(), e.getY(), 40, 40);
            updateProgressBar();
        }
    });

    //listen for player action
    addMouseListener(new MouseAdapter() {
        public void mouseClicked(MouseEvent e) {
            if(e.getClickCount() == 2){
                ImageIcon flowerImage = playerTool;
                JLabel flowerPanel = new JLabel(flowerImage);
                flowerPanel.setBounds((px -((int)girlP.getPositionX() / 2)), 
                        (py - ((int)girlP.getPositionY() / 2)),
                        flowerImage.getIconWidth(),
                        flowerImage.getIconHeight());
                lpane.add(flowerPanel, new Integer(3));
                textBubble.setBounds(e.getX(), e.getY(), 200, 40);
                textBubble.replaceSelection(message);
                lpane.add(textBubble, new Integer(3));
                //lpane.remove(textBubble);
            }
        }
    });

    x = 15;
    y = 150;
    ix = 0;
    iy = 0;
    dx = .05;
    dy = .05;
    girlP.setDestination(px, py);

}

public void testPress(int x, int y){
    px = x;
    py = y;

    if (px < (ix + house.getImage().getWidth(this))
            && (py < (iy + house.getImage().getHeight(this)))) {
        px = px + (house.getImage().getWidth(this)/3);
        py = py + (house.getImage().getHeight(this)/3);

    }
    if (px > (bWIDTH - river1.getImage().getWidth(this))) {
        px = px - 80 - (river1.getImage().getWidth(this)/2);

    }

    girlLabel.setBounds((px -((int)(girlP.getPositionX()*2.5))), 
            (py - ((int)(girlP.getPositionY()*2.5))), 
            girlImage.getIconWidth(), girlImage.getIconHeight());

    girlP.setDestination((px-(girlP.getImage().getWidth(this)/2)), 
            (py-(girlP.getImage().getHeight(this)/2)));
    girlP.pinned(x, y);

}

public void updateProgressBar(){
    if(progressBar.getValue() == 3){
        //progressBar.setBackground(Color.red);
        //UIManager.put("progressBar.foreground", Color.RED);
        UIDefaults defaults = new UIDefaults();
        defaults.put("progressBar[Enabled].foregroundPainter", Color.RED);
            progressBar.putClientProperty("Nimbus.Overrides.InheritDefaults",     Boolean.TRUE);
        progressBar.putClientProperty("Nimbus.Overrides", defaults);
    }
    progressBar.setValue(mouseClicks);
}

/**
 * Create the GUI and show it.  For thread safety,
 * this method should be invoked from the
 * event-dispatching thread.
 */
private static void createAndShowGUI() {
    //Create and set up the window.
    JFrame frame = new JFrame("Game");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    //Create and set up the content pane.
    JComponent newContentPane = new TitleScreenLayer();
    newContentPane.setOpaque(true); //content panes must be opaque
    frame.setContentPane(newContentPane);

    //Display the window.
    frame.pack();
    frame.setVisible(true);
}

public static void main(String[] args) {
    //Schedule a job for the event-dispatching thread:
    //creating and showing this application's GUI.
    javax.swing.SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            createAndShowGUI();
        }
    });
}

} 
```

这是播放器类：

```
package mod;

import java.awt.Graphics;
import java.awt.Image;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.image.ImageObserver;
import java.awt.*;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import java.io.*;

import javax.imageio.ImageIO;
import javax.swing.ImageIcon;

public class Player {
int tile;
double positionX;
double positionY;
int destinationX;//Used when moving from place to place
int destinationY;
Tool currentTool;
int direction; //Position the image is facing
double dx;
double dy;
int [] pin = new int[10];
private String girl = "girl.png";
ImageIcon ii = new ImageIcon(this.getClass().getResource(girl)); // load girl         image 
private Image image = ii.getImage();

private boolean visible = true;
public boolean plant = false;

Image playerImage;

public double getPositionX() {
    return positionX;
}

public void setPositionX(double positionX) {
    this.positionX = positionX;
}

public double getPositionY() {
    return positionY;
}

public void setPositionY(double positionY) {
    this.positionY = positionY;
}

public Player(){
    positionX=30;
    positionY=20;
    dx = 0.2;
    dy = 0.2;
    destinationX=(int)positionX;
    destinationY=(int)positionY;

    //this.playerImage=playerImage;
}

public void doAction() {
    //currentTool.getNum();
    plant = true;
}

public void pinned(int x, int y) {
    if (plant == true) {
        pin[0] = x;
        pin[1] = y;
    }

    //plant = false;

}

public void plant(Graphics g, ImageObserver io) {
    int x = pin[0];
    int y = pin[1];
    if (plant == true) {
//          g.drawImage(flower.getImage(), x, y, io);
    }

}

public void ActionPerformed(ActionEvent e) {
    positionX += dx;
    positionY += dy;
}

public boolean isVisible() {
    return visible;
}

public void setVisible(Boolean visible) {
    this.visible = visible;
}

public Image getImage() {
    return image;
}

public void move(){
    //MOVE LEFT AND RIGHT
    if(destinationX<positionX){
        positionX-=dx;
    }
    if(destinationX>positionX){
        positionX+=dx;
    }

    //MOVE UP AND DOWN
    if(destinationY<positionY){
        positionY-=dy;
    }
    if(destinationY>positionY){
        positionY+=dy;
    }
}

public double setDx(double speed) {
    dx = speed;

    return dx;
}

public double setDy(double speed) {
    dy = speed;

    return dy;
}
public void TileIn(int px, int py)
{
    px=destinationX;
    py=destinationY;
    int tileX=1;
    int tileY = 1;
    int bWIDTH=800;
    int bHEIGHT=600;
    if(px >= 0 && px <= 800*.1)
    {
        tileX=2;
    }
    else if(px> bWIDTH*.1 && px <= bWIDTH*.2)
    {
        tileX=3;
    }
    else if(px > bWIDTH*.2 && px <= bWIDTH*.3)
    {
        tileX=4;
    }
    else if(px > bWIDTH*.3 && px <= bWIDTH*.4)
    {
        tileX=5;
    }
    else if(px > bWIDTH*.4 && px <= bWIDTH*.5)
    {
        tileX=6;
    }
    else if(px > bWIDTH*.5 && px <= bWIDTH*.6)
    {
        tileX=7;
    }
    else if(px > bWIDTH*.6 && px <= bWIDTH*.7)
    {
        tileX=8;
    }
    else if(px > bWIDTH*.7 && px <= bWIDTH*.8)
    {
        tileX=9;
    }
    else if(px > bWIDTH*.8 && px <= bWIDTH*.9)
    {
        tileX=10;
    }
    else if(px > bWIDTH*.9 && px <= bWIDTH)
    {
        tileX=11;
    }
    if(py >= 0 && py <= bHEIGHT*.1)
    {
        tileY=2;
    }
    else if(py> bHEIGHT*.1 && py <= bHEIGHT*.2)
    {
        tileY=3;
    }
    else if(py > bHEIGHT*.2 && py <= bHEIGHT*.3)
    {
        tileY=4;
    }
    else if(py > bHEIGHT*.3 && py <= bHEIGHT*.4)
    {
        tileY=5;
    }
    else if(py > bHEIGHT*.4 && py <= bHEIGHT*.5)
    {
        tileY=6;
    }
    else if(py > bHEIGHT*.5 && py <= bHEIGHT*.6)
    {
        tileY=7;
    }
    else if(py > bHEIGHT*.6 && py <= bHEIGHT*.7)
    {
        tileY=8;
    }
    else if(py > bHEIGHT*.7 && py <= bHEIGHT*.8)
    {
        tileY=9;
    }
    else if(py > bHEIGHT*.8 && py <= bHEIGHT*.9)
    {
        tileY=10;
    }
    else if(py > bHEIGHT*.9 && py <= bHEIGHT)
    {
        tileY=11;
    }
    System.out.println("Grid X: " + tileX + " Grid Y: " + tileY);
}

public void setDestination(int x, int y){
    destinationX=x;
    destinationY=y;
    System.out.println(x + "," + y);
    TileIn(x,y);
}
//  public void tileIn(int a)
//  {
//      
//      b=destinationY;
//      return TileIn(x,y)
//  }

public void draw(Graphics g,ImageObserver io){
    g.drawImage(image, (int)positionX,(int) positionY,io);
}

} 
```

这是主要课程：

```
package mod;
import java.awt.Container;
import java.awt.event.WindowEvent;
import java.awt.event.WindowListener;

import javax.swing.JFrame;

public class Skeleton2 extends JFrame /*implements WindowListener*/{
private static int DEFAULT_FPS = 80;

private Board2 bd;

public Skeleton2(long period) {
    super("Skeleton");
    makeGUI(period);

    //addWindowListener(this);
    pack();
    setResizable(false);
    setVisible(true);

}

public void makeGUI(long period) {
    Container c = getContentPane();

    bd = new Board2();
    c.add(bd, "Center");

}   // end of makeGUI()

//==================================================================================
// Window Events
//==================================================================================
/*
    public void windowActivated(WindowEvent e) {
        bd.resumeGame();
    }

    public void windowDeactivated(WindowEvent e) {
        bd.pauseGame();
    }

    public void windowDeiconified(WindowEvent e) {
        bd.resumeGame();
    }

    public void windowIconified(WindowEvent e) {
        bd.pauseGame();
    }

    public void windowClosing(WindowEvent e) {
        bd.stopGame();
    }
    */

    public void windowClosed(WindowEvent e) {}
    public void windowOpened(WindowEvent e) {}
     //==================================================================================

public static void main(String[] args) {
    int fps = DEFAULT_FPS;
    long period = (long) 1000.0/fps;

    new Skeleton2(period);
    System.out.println("Period: " + period);
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T15:23:10.493

> 不是立即，而是“步行”到给定的坐标。

然后你需要使用一个摆动定时器。Timer 用于安排动画。所以你需要计算两点之间的路径。每次 Timer 触发时，您都会将标签移动几个像素，直到它到达目的地。

无需为此进行自定义绘画。JLabel 可以正常工作。困难的部分是计算你希望角色走的路径。还要确保在添加 JLabel 的面板上使用空布局，这意味着您还需要将标签的大小设置为与标签的首选大小相等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T15:03:26.247

您应该在组件的 paintComponent 方法中使用 g.drawImage。

# c# - 如何在 JScript.NET 中启动一个新线程

> ID：16016873
> 
> 赞同：1
> 
> 时间：2013-04-15T13:47:39.687
> 
> 标签：c#, jscript

我在我的 Jscript.Net 文件中开始一个新线程，如下所示：

```
 function clearinternalfaults( param : String)
 {

ThreadPool.QueueUserWorkItem(MyWorkItem);
 }

 public function MyWorkItem(state : Object) : void
 {
informationTextBox1.Text = "tesT";
 } 
```

正如它应该的那样，它引发了跨线程操作异常。我该如何解决这个问题。我不知道我是否可以在主窗体上使用 Invoke。我确定我不能在 Jscript.Net 中声明委托和事件。你知道如何解决这个问题吗？

事实上，我在后台对我的 c# 代码有一个委托。

我将该委托连接到我的方法：

```
 MyClass.myRF = clearinternalfaults; 
```

所以当我调用代码时

```
 myRF("test") 
```

clearinternalfauls 应该运行，它确实运行正常。但在我的情况下，如果我尝试从那里更新 GUI，它会阻塞，我不知道为什么，所以我正在创建那个线程来为我完成这项工作。交叉操作马上就会出现。

如果有人知道一些 Jscript 技巧，请帮帮我。谢谢。

# wpf - WPF：有没有办法只使用 PrintDialog 来选择目标打印机而不必提供 DocumentPaginator 类？

> ID：16016874
> 
> 赞同：4
> 
> 时间：2013-04-15T13:47:40.787
> 
> 标签：wpf, printing, documentpaginator

我想打印一个非常简单的布局`PrintDocument`，适合一页，所以它不需要`DocumentPaginator`. 但是我想用来`PrinterDialog`选择打印机。我看到了`PrinterSettings`作为属性的例子，`PrinterDialog`它被简单地分配给`PrintDocument`. 但这似乎不再可能了。我还寻找了其他解决方案，例如要使用的自定义分页器类，但结果是空的。我可能对 WPF 没有这么深入的了解，但为什么它必须始终以这种方式加密.​​..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T07:32:45.883

尝试这个：

*   进口`System.Printing`
*   创建一个`PrintDialog`

接着：

```
PrintDialog printDialog = new PrintDialog();
printDialog.PrintQueue = new PrintQueue(new PrintServer(), "PrinterName");
printDialog.PrintDocument(document, "PrintDocument"); 
```

# javascript - 使用javascript更改下拉列表中的内容

> ID：16016877
> 
> 赞同：-1
> 
> 时间：2013-04-15T13:47:52.940
> 
> 标签：javascript

认为我让这变得比它需要的更难。这是我的jsfiddle`http://jsfiddle.net/justmelat/pArU7/2/`

**直接的html：**

```
<form>
.
<input type="radio" name="sex" value="House">House&nbsp;&nbsp;&nbsp;
<input type="radio" name="sex" value="Cars">Cars
    <hr>
        <select name="cars">
            <option value="0">--Select--</option>
<option value="volvo">Volvo</option>
<option value="saab">Saab</option>
<option value="fiat">Fiat</option>
<option value="wood">Wood</option>
<option value="audi">Audi</option>
<option value="brick">Brick</option>

</select>
</form> 
```

当用户选择**房子**时，我只希望**选择**、**木材**和**砖块**选项出现在下拉列表中，当然如果选择了汽车，那么**木材**和**砖块**应该**消失**。

我怎样才能在javascript中轻松做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T14:14:03.293

演示：http: [//jsfiddle.net/33tJR/](http://jsfiddle.net/33tJR/)

只是我制作的一个快速模型，没有什么太花哨的使用 jQuery 或任何东西

```
function createOption(value) {
    el = document.createElement('option');
    el.value = value;
    el.innerHTML = value;
    el.id = value;

    document.getElementById('select').appendChild(el);
}

document.getElementById('house').addEventListener('click', function() {
    document.getElementById('select').innerHTML = '';

    createOption('Volvo');
    createOption('Saab');
    createOption('Fiat');
});

document.getElementById('cars').addEventListener('click', function() {
      document.getElementById('select').innerHTML = '';

    createOption('Wood');
    createOption('Brick')
}); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-15T13:50:40.690

使用单选按钮的 onchange 事件，如果值与 male 匹配，则调用将创建选项列表并清除现有列表并附加新列表的 javascript。所有这些都使用了jquery

```
 $(document).ready(function(){
  $("input[name='sex']").change(function() {
       if($(this).value === "male") { loadDLLWithOption1();  }
       else { loadDLLWithOption2(); }
    }
   });
   function loadDLLWithOption1()
    {
         var optionList = '<option>option1</option><option>option2</option>';
         $("#cars").html(optionList); 
    } 
```

# sql - Firebird - 确定删除发生在受约束或不在触发器内部的方法

> ID：16016878
> 
> 赞同：2
> 
> 时间：2013-04-15T13:47:55.913
> 
> 标签：sql, triggers, firebird

有没有办法确定使用 constraint with cascade delete 或不在触发器内发生删除？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T14:05:03.787

否 - 当删除一行时，将触发适当的触发器，但没有导致删除的“上下文”。但是，在`AFTER DELETE`触发器中，您可以检查主记录是否存在 - 如果不存在，则很有可能删除是由`ON DELETE CASCADE`约束触发的，而不是因为用户在行上发出“直接” `DELETE`。

# javascript - 如何以最小的开销实现简单的无服务器 p2p 浏览器到浏览器消息传递？

> ID：16016880
> 
> 赞同：24
> 
> 时间：2013-04-15T13:48:01.337
> 
> 标签：javascript, ajax, text, p2p

我正在尝试创建一些简单游戏的基本实现（井字游戏是起始项目），这些游戏可以在互联网上播放而无需中央服务器。该页面甚至不需要托管，可以在机器上本地运行，也可以托管在 Web 服务器上。托管游戏时，页面会通知主机他的 IP 地址，然后可以通过任何方式（电话、即时消息等）将其发送给朋友。该朋友将输入或复制/粘贴 IP 到加入对话框中，并能够玩有问题的游戏。我希望这两方能够在不安装任何其他软件且不联系任何类型的中央服务器的情况下做到这一点。

我研究了许多潜在的解决方案，涉及 node.js、webrtc、websockets、flash、java 等。每一个都有与之相关的问题，例如需要中央服务器，或者要求客户端可能必须下载一些东西尚未安装在他们的计算机上，或者仅传输音频和视频并且对发送数据消息没有用处。告诉某人他们需要下载 java.. 或者让我使用 flash 开发应用程序似乎微不足道，但这一切都与我的最终目标背道而驰。

如果完全用javascript做我想做的事情是不可能的，那么它就是不可能的。但我不明白为什么不能，考虑到浏览器本身能够向解析为 IP 或直接解析为 IP 的 URL 发送和接收文本数据。欢迎使用其他解决方案，但如果无法做到这一点，那确实应该这样做。

我正在尝试做的确切要求的简单解释是：

1.  应该使用完全免费的（如啤酒）技术。（没有 Flash，我意识到 Flash 播放器的网络应用程序可以免费编码，但层中的点对点需要注册一个 beta 密钥，假设我可以免费获得，不一定永远免费。）

2.  没有外部服务器或虚假的点对点。（同样在基于闪存或统一的解决方案中，只要您使用他们的中央服务器，就可以实现对等的模仿）

3.  没有客户端下载（当然，大多数人都安装了 java 或 flash，但很多人没有，而且 java 下载量很大，对计算机文盲用户不友好。它甚至现在尝试安装工具栏。除此之外，许多我的用户根本不愿意下载任何东西，包括 java 或 unity。如前所述，它们有自己的与该项目相关的问题）

总之，如果 ajax 可以向指定的 IP 发送请求并监听响应.. 为什么我不能在纯 js 中获得简单的点对点消息传递？或者我可以吗？

我不需要托管完整的 Web 服务器或任何类型的单独应用程序或插件来发送和接收数据。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-22T04:25:50.470

在推荐了 pubnub 之后，我看了看那里并留下了部分印象。然而，我最终偶然发现了我正在寻找的令人难以置信的东西。RTCDataChannel 就是答案。[这个网站](https://webrtc-experiment.appspot.com/docs/rtc-datachannel-for-beginners.html)终于表明我想要的都是可能的。浏览器对此功能的支持很小，但在不断增长，整个考验增强了我对浏览器社区对点对点应用程序日益增长的支持的信心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T16:31:19.723

> 总之，如果 ajax 可以向指定的 IP 发送请求并监听响应.. 为什么我不能在纯 js 中获得简单的点对点消息传递？或者我可以吗？

这是因为 ajax 请求必须由 HTTP 服务器处理，因此您仍然需要为每个客户端安装服务器。

说你想要

1.  自由的
2.  没有外部服务器
3.  没有客户端下载

我会说，除了你切断其中一个要求之外，不可能归档所有这些要求。

我的建议是[pubnub](http://www.pubnub.com/solutions/how-pubnub-works)。这个解决方案仍然需要一个服务器并且它不是免费的（他们有一个免费的使用层）。但好在你有一个模拟的 p2p 连接，而不需要做服务器的事情，也不需要客户端下载。

# sql - 访问 VBA - 将参数传递给 SQL 查询？

> ID：16016884
> 
> 赞同：0
> 
> 时间：2013-04-15T13:48:14.723
> 
> 标签：sql, vba, parameters

我在 VBA 中创建了一个函数来连接到 Web 服务并检索 XML 文件。然后我想解析 XML 并将捕获的节点导入 SQL 数据库。

我已经设法连接到 Web 服务并解析 XML 文件，甚至在消息框中显示值，但是当我尝试通过 SQL 查询存储参数时，它要求我提供参数值？

例子：

```
Set BodyStyle = domResponse.SelectSingleNode("/GetVehicles/DataArea/Vehicles/Vehicle/BodyStyle")

MsgBox (BodyStyle.Text)

DoCmd.RunSQL "INSERT INTO vHPI (BodyStyle) BodyStyle.Text" 
```

弹出消息框，其值为 MOTORCYCLE，但随后我收到提示，要求我输入 BodyStyle.Text 的参数

我不明白系统如何在消息框中显示参数，但是当我想将参数插入数据库时​​说参数为空？

请帮忙！谢谢亚当。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T13:54:27.183

你可以简单地这样做：

```
DoCmd.RunSQL "INSERT INTO vHPI (BodyStyle) VALUES ('" & BodyStyle.Text & "')" 
```

假设您的列名为 BodyStyle 并且表是 vHPI

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:53:36.980

现在，您的 SQL 语句中有“BodyStyle.Text”的字面值。试试这样...

```
DoCmd.RunSQL "INSERT INTO vHPI (BodyStyle) " + BodyStyle.Text 
```

# javascript - 清除 Javascript 中的文本框检查复选框

> ID：16016890
> 
> 赞同：0
> 
> 时间：2013-04-15T13:48:25.727
> 
> 标签：javascript, checkbox, dynamics-crm-2011, xrm

我有一些 javascript 控制 MS 动态 2011 表单上的逻辑。

当我单击一个复选框（默认选中）时，有一个文本框允许您输入数据。当我取消选中此框时，文本框消失。但是，当我重新选中复选框时，文本框会重新出现（根据需要），但仍然有之前输入的任何文本，仍然存储。如何确保文本框设置为空？包括代码片段。

谢谢。

```
function SetupForm() {
     debugger;
     HA_OtherText();
 }

 function HA_OtherText() {
     Xrm.Page.getAttribute("ha_other").getValue();
     if (Xrm.Page.getAttribute("ha_other").getValue() == true) {
         Xrm.Page.ui.controls.get("ha_othertext").setVisible(true);
     } else {
         Xrm.Page.ui.controls.get("ha_othertext").setVisible(false);
     }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:52:05.800

您所做的只是将字段设置为可见或可见，如果要“清除”它，则需要将字段值设置为 null：

```
function HA_OtherText()
{
  Xrm.Page.getAttribute("ha_other").getValue();
  if (Xrm.Page.getAttribute("ha_other").getValue() == true) 
  {
    Xrm.Page.ui.controls.get("ha_othertext").setVisible(true);
  }
  else
  {
    Xrm.Page.ui.controls.get("ha_othertext").setVisible(false);
    Xrm.Page.getAttribute("ha_othertext").setValue(null);
  }
} 
```

# wpf - WPF 从列表框中拖动项目并放入文本框中

> ID：16016892
> 
> 赞同：4
> 
> 时间：2013-04-15T13:48:29.173
> 
> 标签：wpf, drag-and-drop

我正在尝试将项目从列表框中拖动到 WPF 中的文本框。我无法获得任何可以让我这样做的代码。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-25T10:05:46.827

使用列表框的选择更改事件

```
private void listBox2_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    ListBoxItem i = (ListBoxItem)listBox2.Items[listBox2.SelectedIndex];
    s = i.Content.ToString();
    DragDrop.DoDragDrop(listBox2, i.Content.ToString(), DragDropEffects.All);
} 
```

# emacs - 单击时突出显示事件

> ID：16016893
> 
> 赞同：3
> 
> 时间：2013-04-15T13:48:33.820
> 
> 标签：emacs

当您单击一个单词时，如何自动突出显示所有出现的单词？

我不经常使用鼠标，但希望我的编辑器尽可能具有交互性。

*像这样，但更聪明：*

![伊姆古尔](https://i.imgur.com/YJs5WeZ.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T14:03:03.610

您可以使用`idle-highlight-mode`来获得类似的行为。这会突出显示该单词的所有出现，而无需单击。

此模式可以从`package.el`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T15:34:43.853

我一直在使用这个片段来选择当前单词：[http ://emacswiki.org/emacs/MarkCommands#toc5](http://emacswiki.org/emacs/MarkCommands#toc5)

我曾尝试使用它来构建类似于您所要求的东西。可能不完全是你想要的，但希望是一个起点。

```
(defun click-select-word (event)
  (interactive "e")
  (hi-lock-mode 0)
  (let ((phrase (concat "\\b" (regexp-quote (thing-at-point 'symbol)) "\\b")))
    (highlight-regexp phrase)))

(global-set-key [mouse-1] 'click-select-word) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-21T10:47:00.353

看来，[使用 Tern](https://github.com/ternjs/tern/blob/master/emacs/tern.el#L372)[突出显示范围内的 JavaScript**变量**](https://github.com/ternjs/tern/blob/master/emacs/tern.el#L372)非常容易。

[![gif](https://i.stack.imgur.com/r0f3X.gif)](https://i.stack.imgur.com/r0f3X.gif)

您可以将其绑定到鼠标单击：

```
(autoload 'tern-mode "tern" nil t)
(tern-mode t)
(local-set-key [mouse-1] 'tern-highlight-refs) 
```

# java - 在 java 中配置通配符 SSL hostnameverifier

> ID：16016894
> 
> 赞同：0
> 
> 时间：2013-04-15T13:48:34.170
> 
> 标签：java, ssl, salesforce, httpsurlconnection

我的问题基本上是解决由于在我的 Web 服务调用中使用通配符证书而导致的 SSLException。现在，在人们将我重定向到任何现有的 SO 问题之前，请注意我知道使用/创建自定义主机名验证器并将其设置在 weblogic 中。

我的主要问题是，由于我的应用程序在共享的 weblogic 服务器上运行，我不允许对 weblogic config.xml 文件进行任何更改。所以，我需要以某种方式在我的 java 代码中进行主机名验证器设置。我遇到了[这个](https://stackoverflow.com/questions/13470998/ignoring-ssl-validation-in-java/13483271#13483271)问题，它描述了如何编写自定义 HttpsURLConnection 类。

**问题**：现在我不明白如何从 DataOutputStream 的 writeBytes 方法调用我的 Web 服务方法（使用自定义 SoapConnection 类）？

注意：
1.以上链接的问题忽略了 SSL 验证。我不会这么做。我找到了一个允许通配符证书主机名 的[类。](http://jandrewthompson.blogspot.in/2010/04/weblogic-and-wildcard-ssl-certificates.html)
2.我忘了说我使用的是weblogic 10.3.2.0，默认情况下不允许通配符证书。

# c - C编程频率计数器输入/输出

> ID：16016895
> 
> 赞同：1
> 
> 时间：2013-04-15T13:48:34.507
> 
> 标签：c, csv, word-frequency

我编写了一个简单的 C 程序，它读取一个文件并生成一个包含每个单词及其频率的表格。

该程序有效，我已经能够在 Linux 上运行的终端中获得显示的输出，但是，我不确定如何让生成的显示生成一个包含词频输出的 .csv 文件（因为它是在终端）。

以下是我的程序各部分的代码片段，以便您更好地理解它的结构。

```
int main
{
   table (int *freqCount);
   processLine (int * freqCount, char *buffer);

   ...
   printTable (results);
}

void printTable(int *results)
{
   double tableAVG (int *results);
   ... table print layout

   for (i = 1; i < MAX_WORD_LEN; ++i)
{
    if (results[i] > 0)
        printf(" %2i%11i\n", i, results[i]);
}
}

void processLine (int *results,  char *buffer)
{
    char *token;
char *delimiter = " ,.;:'\"&!? -_\n\t";

... buffer rule
...     token rule 

while (token != NULL)
{

    results[strlen(token)]++;
    token = strtok(NULL,  delimiter);

}
}

double tableAverage (int *results)
{
int i;
int words = 0;
int sum = 0;

for (i = 1; i < MAX_WORD_LEN; ++i)
{
    ... rule
}

return (double)sum/(double)words;
} 
```

如何将终端的输出发送到 .csv？任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T13:50:23.963

启动程序时使用重定向：

```
/path/to/you/executable > data.csv 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T15:12:49.707

您可以使用 > 运算符将程序的输出定向到文件。您可以使用 < 运算符从文件中读取程序的输入。您可以使用 | 运算符将程序的输出链接到另一个程序的输入。

示例：在您的终端中写入，

```
helloworld.exe > helloworld.txt 
```

# google-maps - Google 禁止使用 Maps API for V3

> ID：16016896
> 
> 赞同：0
> 
> 时间：2013-04-15T13:48:39.323
> 
> 标签：google-maps

我是一名业余网站开发人员，但精通 html 和 javascript。我有几个网站使用 Google Maps API V2 没有问题。我尝试升级到 V3。我得到了一个新的 API 密钥并使用了 Google 提供的示例 html（基于澳大利亚）。我得到的只是**“禁用”**消息。如果我完全移除钥匙，它就可以工作！我究竟做错了什么？！！( [www.gn45.com/gmap.html](http://www.gn45.com/gmap.html) )

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-27T14:40:41.677

This message appears, because there's a particular domain whitelist, that is configured for each business account. By default, you can always access google APIs with an API key from localhost, but any other domain should be specifically set within account management.

With the mobile application, your index.html is read from the filesystem and then passed to in App Browser. Therefore google rejects a request to the API with API key. You can temporarily remove API key from your request and access the API without any, this way you'll have a 50k request/month limit, which should be sufficient for development purposes.

I'm looking for a way to configure this myself, as soon as I find one, I'll provide an update.

# android - 如何在一个活动中以不同的视频视图播放多个视频

> ID：16016906
> 
> 赞同：6
> 
> 时间：2013-04-15T13:49:02.103
> 
> 标签：android, android-videoview

示例代码：

如何在一个活动中播放两个视频

```
public class Two_videos extends Activity 
{
VideoView video1, video2;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.two_video);

VideoView video1= (VideoView) findViewById(R.id.video1);
              video1.setVideoPath("/mnt/sdcard/Movies/com.bnb.giggle/IMG_20130415184609.mp4");
            video1.start();

VideoView video2= (VideoView) findViewById(R.id.video2);
        video2.setVideoPath("/mnt/sdcard/Movies/com.bnb.giggle/IMG_20130415184608.mp4");
        video2.start();
   }
} 
```

不能同时播放两个视频。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-03T14:28:56.990

播放多个视频取决于硬件，但如果您的设备仅支持一个媒体播放器实例，那么您必须调用 yourVideoView.stopPlayBack() 以在另一个视频视图中播放视频。您可以使用其 resume() 方法在第一个 videoview 中恢复视频，但在从第二个停止播放之后。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-05T05:10:54.493

您的设备应支持播放多个视频以及需要高端设备的视频质量（高清视频），否则会引发错误。

我尝试[了此](https://stackoverflow.com/questions/9834882/how-to-play-multiple-video-files-simultaneously-in-one-layout-side-by-side-in-di/20370974#20370974)代码，它适用于所有 nexus 设备。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T13:56:48.367

根据[这个答案](https://stackoverflow.com/a/10161316/762442)，很有可能同时播放多个视频，但这取决于设备及其硬件。安卓版本好像没问题。我建议您阅读他的评论和代码以便更好地理解。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-09T04:54:26.060

请参见下面的代码，这里在一个活动中以不同的视频视图播放 4 个视频

main_activity.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_weight="1.0"
    android:orientation="vertical"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context="ycrathi.com.multiplevideoplay.MainActivity">

    <VideoView
        android:id="@+id/v1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="0.25" />

    <VideoView
        android:id="@+id/v2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="0.25" />

    <VideoView
        android:id="@+id/v3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="0.25" />

    <VideoView
        android:id="@+id/v4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="0.25" />

</LinearLayout> 
```

MainActivity.java

```
 package ycrathi.com.multiplevideoplay;

import android.net.Uri;
import android.os.Bundle;
import android.support.v7.app.AppCompatActivity;
import android.widget.VideoView;

public class MainActivity extends AppCompatActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        VideoView v1 = (VideoView) findViewById(R.id.v1);
        VideoView v2 = (VideoView) findViewById(R.id.v2);
        VideoView v3 = (VideoView) findViewById(R.id.v3);
        VideoView v4 = (VideoView) findViewById(R.id.v4);
        v1.setVideoURI(Uri.parse("http://192.168.1.1/Video/vid5.mp4"));
        v1.start();
        v1.requestFocus();
        v1.setKeepScreenOn(true);

        v2.setVideoURI(Uri.parse("http://192.168.1.1/Video/vid5.mp4"));
        v2.start();
        v2.requestFocus();
        v2.setKeepScreenOn(true);

        v3.setVideoURI(Uri.parse("http://192.168.1.1/Video/vid5.mp4"));
        v3.start();
        v3.requestFocus();
        v3.setKeepScreenOn(true);

        v4.setVideoURI(Uri.parse("http://192.168.1.1/Video/vid5.mp4"));
        v4.start();
        v4.requestFocus();
        v4.setKeepScreenOn(true);

    }
} 
```

AndroidMenifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="ycrathi.com.multiplevideoplay">
<uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
    <application
        android:allowBackup="true"
        android:icon="@mipmap/ic_launcher"
        android:label="@string/app_name"
        android:supportsRtl="true"
        android:theme="@style/AppTheme">
        <activity android:name=".MainActivity">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-05-29T12:13:34.693

这是在一项活动中显示多个视频的完整答案。在所有设备中工作。我使用 Surfaceview 和 Textureview 播放视频。

活动：

```
 public class ReactionViewActivity extends AppCompatActivity   {
    private static final String TAG = ReactionViewActivity.class.getSimpleName();

    private String mainVideo = "";
    private ProgressBar progress_bar;

    private SurfaceView mSurfaceView;
    private TextureView mTextureView;
    private MediaPlayer mMediaPlayer, mMediaPlayer1;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_reaction_view);
        initView();
    }

    private void initView() {
        progress_bar = findViewById(R.id.progress_bar);
        mSurfaceView = findViewById(R.id.surface_view);
        mTextureView = findViewById(R.id.textureView);

        textureParams = (FrameLayout.LayoutParams) mTextureView.getLayoutParams();
        surfaceParams = (FrameLayout.LayoutParams) mSurfaceView.getLayoutParams();

        final String video = getIntent().getStringExtra("video");
        mTextureView.setSurfaceTextureListener(new TextureView.SurfaceTextureListener() {
            @Override
            public void onSurfaceTextureAvailable(SurfaceTexture surfaceTexture, int i, int i1) {
                Surface surface = new Surface(surfaceTexture);
                try {
                    mMediaPlayer1 = new MediaPlayer();
                    mMediaPlayer1.setDataSource(video);
                    mMediaPlayer1.setSurface(surface);
                    mMediaPlayer1.setLooping(true);
                    mMediaPlayer1.prepareAsync();

                    // Play video when the media source is ready for playback.
                    mMediaPlayer1.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {
                        @Override
                        public void onPrepared(MediaPlayer mediaPlayer) {
                            progress_bar.setVisibility(View.GONE);
                            mediaPlayer.start();
                        }
                    });
                    mMediaPlayer1.setAudioStreamType(AudioManager.STREAM_MUSIC);
                } catch (IllegalArgumentException e) {
                    Log.d(TAG, e.getMessage());
                } catch (SecurityException e) {
                    Log.d(TAG, e.getMessage());
                } catch (IllegalStateException e) {
                    Log.d(TAG, e.getMessage());
                } catch (IOException e) {
                    Log.d(TAG, e.getMessage());
                }
            }

            @Override
            public void onSurfaceTextureSizeChanged(SurfaceTexture surfaceTexture, int i, int i1) {

            }

            @Override
            public boolean onSurfaceTextureDestroyed(SurfaceTexture surfaceTexture) {
                return false;
            }

            @Override
            public void onSurfaceTextureUpdated(SurfaceTexture surfaceTexture) {

            }
        });

        if (Objects.requireNonNull(getIntent().getExtras()).containsKey("mainVideo")) {
            mainVideo = getIntent().getStringExtra("mainVideo");
            mSurfaceView.getHolder().addCallback(new SurfaceHolder.Callback() {
                @Override
                public void surfaceCreated(SurfaceHolder surfaceHolder) {
                    mMediaPlayer = new MediaPlayer();
                    mMediaPlayer.setDisplay(surfaceHolder);
                    try {
                        mMediaPlayer.setDataSource(mainVideo);
                        mMediaPlayer.setLooping(true);
                        mMediaPlayer.prepare();
                        mMediaPlayer.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {
                            @Override
                            public void onPrepared(MediaPlayer mediaPlayer) {
                                mMediaPlayer.start();
                            }
                        });
                        mMediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
                    } catch (IOException e) {
                        e.printStackTrace();
                    }
                }

                @Override
                public void surfaceChanged(SurfaceHolder surfaceHolder, int i, int i1, int i2) {

                }

                @Override
                public void surfaceDestroyed(SurfaceHolder surfaceHolder) {

                }
            });
        }

    }

    @Override
    public void onBackPressed() {
        releaseMediaPlayer();
        finish();
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        releaseMediaPlayer();
    }

    private void releaseMediaPlayer() {
        if (mMediaPlayer != null) {
            mMediaPlayer.release();
            mMediaPlayer = null;
        }

        if (mMediaPlayer1 != null) {
            mMediaPlayer1.release();
            mMediaPlayer1 = null;
        }
    }
} 
```

XML:

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    tools:context=".ReactionViewActivity">

   <FrameLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@color/black"
        android:layout_below="@+id/rlTopbar">

        <TextureView
            android:id="@+id/textureView"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_gravity="center" />

        <SurfaceView
            android:id="@+id/surface_view"
            android:layout_width="110dp"
            android:layout_height="140dp"
            android:layout_gravity="right"
            android:layout_marginRight="@dimen/margin_20"
            android:layout_marginTop="@dimen/margin_20" />

        <ProgressBar
            android:id="@+id/progress_bar"
            android:layout_width="@dimen/margin_50"
            android:layout_height="@dimen/margin_50"
            android:layout_gravity="center"
            android:indeterminateDrawable="@drawable/custom_progress" />

    </FrameLayout>
</RelativeLayout> 
```

# c# - 如果 DLL 可能或可能不可用，如何扩展 C# ASP.NET 类？

> ID：16016908
> 
> 赞同：1
> 
> 时间：2013-04-15T13:49:06.160
> 
> 标签：c#, asp.net, .net, reflection, umbraco

好的，按照插件的思路思考。

我有自己的 dll，它有自己的功能。如果存在第三方 dll，我将从该 dll 中扩展一个类。

除非缺少第三方 DLL，否则一切正常。这是问题的症结所在。

当 dll 不存在时，我会收到此异常：

> “无法加载文件或程序集 'SOME_THIRD_PARTY_ASSEMBLY, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null' 或其依赖项之一。系统找不到指定的文件。”

这个想法是如果第三方 dll 存在则允许附加功能，如果不存在则不允许该功能。

我知道我可以使用 Reflection 来测试一个类型是否存在，但是为了得到那部分代码，我必须让它通过上面的异常。

这并不是说我只需要知道一个类是否可用，我也在扩展这个类。

所以为了编译我的 dll，我需要在 Visual Studio 中添加对第三方 dll 的引用。

我可以在某处捕捉到这个异常吗？我应该以不同的方式解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T14:04:48.917

您可以将扩展第三方 DLL 的代码分离到另一个 DLL 中。然后，在您的“扩展管理器”dll 中，使用配置文件将您的扩展程序集与第 3 方的程序集相匹配。

因此，配置文件可能有一个包含两个条目的项目，例如“someClass;inSome3rdPartDll”，然后是“yourClass;inYourDll”。

浏览配置文件以查看列出的第 3 方程序集是否存在，如果存在，则将关联的程序集加载到应用程序域中。

现在，如果你想扩展未来的第 3 方程序集，你只需要添加你的 dll 并在配置文件中添加一行。

[这是](https://stackoverflow.com/questions/6578170/using-appdomain-in-c-sharp-to-dynamically-load-and-unload-dll)帮助将程序集加载到应用程序域的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:10:27.677

您还可以查看 MEF 并利用组合来完成此操作。

[https://mef.codeplex.com](https://mef.codeplex.com)

# php - Cakephp2.3 文本区域未正确发布

> ID：16016911
> 
> 赞同：0
> 
> 时间：2013-04-15T13:49:18.067
> 
> 标签：php, cakephp-2.3

我正在尝试`description`在数据库中保存一个具有 varchar(500) 的字段。当我在 firebug 中查看网络面板时，正在发布整个描述（200 多个字）。然而，在 cakephp 中只保存了 75 个单词。我在控制器中设置了一个断点并查看了 this->request->data，它有大约 150 个字符。下面是我的代码：

```
<fieldset>
<legend>Create Log</legend>
<?php echo $this->Form->Create('Log', array('inputDefaults' => array('div' => false, 'label' => false))); ?>
    <div class="control-group">
        <div class="input-prepend">
            <span class="add-on"><i class="icon-folder-open"></i></span>
            <?php echo $this->Form->input('project_id'); ?>
        </div>
    </div>

    <div class="control-group">
        <div class="input-prepend">
            <span class="add-on"><i class="icon-user"></i></span>
            <input type="text" id="txtName" placeholder="Customer" />
            <?php echo $this->Form->Hidden('customer_id'); ?>
            <a><span class="add-on"><i class="icon-plus" style="color: green;" onclick="window.open('<?php echo $this->Html->Url(array('controller' => 'customers', 'action' => 'add?popup')); ?>', 'Add Customer', 'height=630, width=430')"></i></span></a>
        </div>
    </div>

    <div class="control-group">
        <div class="input-prepend">
            <span class="add-on"><i class="icon-time"></i></span>
            <?php echo $this->Form->input('time_spent', array('placeholder' => 'Time spent (hrs)')); ?>             
        </div>
    </div> 

    <div class="control-group">
        <div class="input-prepend">
            <span class="add-on"><i class="icon-book"></i></span>
            <?php echo $this->Form->textarea('description', array('placeholder' => 'Description', 'class' => 'logTextArea', 'rows' => '7')); ?>

        </div>
    </div>

<?php echo $this->Form->end(array(
    'label' => 'Save Record',
    'class' => 'btn btn-primary',
    'div' => false
)); ?> 
```

```
<?php echo $this->Html->script('jquery.autocomplete', array('inline' => false)); ?>

<?php $this->start('script'); ?>
<script type="text/javascript">
    $(document).ready(function () {
        var options, a;
        jQuery(function() {
            options = { 
                serviceUrl: "<?php echo $this->Html->Url(array('controller' => 'logs', 'action' => 'autoComplete.json')); ?>",
                minChars: 2,
                onSelect: function(suggestion){ $('#LogCustomerId').val(suggestion.data); }
            };
            a = $('#txtName').autocomplete(options);
        });
    });
</script>
<?php $this->end(); ?> 
```

控制器：

```
public function add() {
    $this->set('title_for_layout', 'Add log');

    // Populate projects DDL
    $this->set('projects', $this->Log->Project->find('list', array(
        'order' => array('Project.project_name')
        )));

    if ($this->request->is('post'))
    {
        $this->Log->create();
        if ($this->Log->save($this->request->data))
        {
            $this->Session->setFlash('Log has succesfully been created', 'default', array('class' => 'alert alert-success'));
            $this->redirect(array('action' => 'index'));
        } else {
            $this->Session->setFlash('Unable to save log', 'default', array('class' => 'alert alert-error'));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:37:44.720

此问题可能是由某些 PHP 版本中截断`$_POST`值的错误引起的。

在不重新发布信息的情况下，此问题包含一些附加信息。

[PHP $_POST 数组变量被截断](https://stackoverflow.com/questions/12684449/php-post-array-variables-are-truncated)

一些（可能）相关的错误；

[错误 #42824 发布数据被截断](https://bugs.php.net/bug.php?id=42824)

# firebird - 运行脚本出错

> ID：16016913
> 
> 赞同：0
> 
> 时间：2013-04-15T13:49:26.233
> 
> 标签：firebird, ibexpert

我有一个 Firebird SQL 脚本如下：-

```
ALTER TABLE COSTCENT DROP ROW_VER;
ALTER TABLE COSTNUMB DROP ROW_VER; 
```

当我在 ibexpert 中运行它时，出现以下错误：-

```
Invalid token.
Dynamic SQL Error.
SQL error code = -104.
Token unknown - line 2, column 1.
ALTER. 
```

为什么是这样？

为什么它不会一个接一个地运行多个语句？

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T14:16:48.293

来自[IBExpert 文档](http://ibexpert.net/ibe/index.php?n=Doc.SQLEditor)：

> SQL 编辑器旨在执行单个命令。Script Executive 应该用于更复杂的脚本。
> 
> Script Executive 可用于查看、编辑和执行 SQL 脚本。它可以从 IBExpert 工具菜单启动，使用工具工具栏中的相应图标或 [Ctrl + F12]。它用于覆盖多行的 SQL。脚本执行器既可以读取也可以执行脚本。

# permissions - GNU Make 错误 126，C:\Program 是一个目录

> ID：16016914
> 
> 赞同：1
> 
> 时间：2013-04-15T13:49:29.347
> 
> 标签：permissions, makefile, gnu-make

GNU make 给了我一个奇怪的错误信息，我不明白。

```
gao@L8470-130213 ~
$ make
echo Test
C:\Program: C:\Program: is a directory
make: *** [test] Error 126 
```

这是我想验证的：

```
gao@L8470-130213 ~
$ less makefile
test:
        echo Test

gao@L8470-130213 ~
$ which make
/c/Programx86/GnuWin32/bin/make
gao@L8470-130213 ~
$ /c/Progra~2/GnuWin32/bin/make.exe test
echo Test
C:\Program: C:\Program: is a directory
make: *** [test] Error 126
gao@L8470-130213 ~
$ make --version
GNU Make 3.81
Copyright (C) 2006  Free Software Foundation, Inc.
This is free software; see the source for copying conditions.
There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A
PARTICULAR PURPOSE.

This program built for i386-pc-mingw32 
```

感觉就像其他程序试图在最后运行，并且它的路径包含一些空格。在那种情况下，它可能是什么程序，我怎样才能阻止它运行？

我看过[这个帖子](https://stackoverflow.com/questions/5256963/android-ndk-build-mysteriously-failing-under-cygwin-with-error-126)并试图禁用我的防病毒软件，但没有帮助。我也研究了权限，但我不确定是否`makefile`需要执行权限。无论如何，我似乎无法更改它（在 Windows 上以 bash 运行。`makefile`在我签入资源管理器时不是只读的）：

```
gao@L8470-130213 ~
$ ls -l makefile
-rw-r--r--    1 gao      Administ       21 Apr 15 14:53 makefile
gao@L8470-130213 ~
$ chmod +x makefile
gao@L8470-130213 ~
$ ls -l makefile
-rw-r--r--    1 gao      Administ       21 Apr 15 14:53 makefile 
```

这是怎么回事`make`，我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T20:34:12.773

尝试运行的不是“其他程序”，而是`echo`命令。Make 打印要运行的命令`echo test`，但您永远看不到输出 ( `test`)，这意味着它试图找到 echo 程序失败。不幸的是，我对在 Windows 上运行 GNU make 的变幻莫测不是很熟悉：有很多不同的选择。一种可能是获得更新版本的 GNU make。3.81 很老了。3.82 现在可用，可能更适合您。

您在上面添加的有关您的环境的好信息：使用 bash；从最初的问题中并不清楚，在 Windows 上有很多不同的方法来做事。您正在使用 make 的 mingw 版本；该版本（据我了解）不使用 bash 作为在其中运行命令的 shell：它应该与本机 Windows 环境一起使用，这些环境当然没有 bash 可用。我相信您拥有的 make 版本是直接调用命令和/或使用 command.com。当然不是像 bash 这样的 UNIX shell。

如果要使用 bash，则应将`SHELL`make 变量设置为 bash.exe 程序的路径。如果您使用的是 Cygwin 环境，则可以使用 Cygwin 附带的 GNU make，它的行为更像传统的 make + shell。

否则，您需要使用 Windows command.com 语句编写命令。

同样，我不使用 Windows，所以这主要是传闻。

PS。makefile 不需要是可执行的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T17:34:49.930

发生的事情是[make 不喜欢文件名或目录名中带有空格，](https://stackoverflow.com/questions/9838384/can-gnu-make-handle-filenames-with-spaces)例如`Program Files`. makefile 通常依赖的大多数实用程序也没有，例如用于执行命令的 shell。

每当我遇到这样的情况时，我都会创建一个[连接](http://en.wikipedia.org/wiki/NTFS_junction_point)from `Program Files`to并使用后者。`ProgramFiles`

# meteor - [meteor][0.6.*] 没有数据显示，但它在控制台中可用

> ID：16016916
> 
> 赞同：0
> 
> 时间：2013-04-15T13:49:36.640
> 
> 标签：meteor

我有一个使用命令在流星托管上发布的应用程序：

```
meteor deploy spyermeteor 
```

[该应用程序在http://spyermeteor.meteor.com](http://www.github.com/Rebolon/spyerMeteor)上呈现，但在客户端不使用任何数据。

如果我执行以下操作，我可以看到该应用程序在服务器端运行良好：

```
meteor logs spyermeteor 
```

然后我检查浏览器控制台，我发现我可以访问数据库：

```
Annonces.find().count() // per exemple 
```

您如何解释反应性在客户端不起作用？也许我的概念有问题，但在我的计算机（Windows）和虚拟机（Linux debian）上它运行良好。欢迎任何帮助。

源代码可在此处获得[http://www.github.com/Rebolon/spyerMeteor](http://www.github.com/Rebolon/spyerMeteor)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T09:58:59.303

在生产模式下，所有文件都被连接并缩小为一个 javascript 文件。如果您的代码中的某处甚至存在轻微的语法错误，则其余代码将不会执行。

查看您部署的站点，您必须拆分客户端和服务器端代码。我收到一个错误

```
Uncaught ReferenceError: Npm is not defined 
```

这意味着仅在服务器上运行，但您使用的代码`Npm`正在客户端上运行，而它应该只在服务器上运行。它还会在生产模式下导致错误，但由于文件未连接和缩小，因此错误不会阻止其他 javascript 文件运行。

您可以将此代码移动到文件中`/server`或`if(Meteor.isServer) {..}`块中

看起来您的代码也是为 <= Meteor 0.5.9 编写的。在部署应用程序之前，您应该将本地实例升级到 0.6.2 并在 js 控制台中查找所有这些异常。

# php - 使用 preg_split 避免空键值

> ID：16016917
> 
> 赞同：1
> 
> 时间：2013-04-15T13:49:37.720
> 
> 标签：php, html, arrays

我想知道在使用`preg_split`.

问题是我有一个输入字段，每个输入都将被空格分割。在这种情况下，甚至会创建一个新的 Array 键。

所以我使用：

```
$search_term = preg_split('/[\s]+/', $search_term); 
```

当我输入`abc`它时，它会创建一个数组：

```
[0] => abc 
```

但是当我进入时：

`abc ...`

它创建一个数组，如：

```
[0] => abc
[1] => 
```

就像它会为价值做好准备。但我想知道我是否可以取消设置这个键，直到它获得一些价值。

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T13:51:38.293

你...

```
preg_split('/[\s]+/', $search_term, -1, PREG_SPLIT_NO_EMPTY); 
```

可能最好在问这些问题之前检查[文档。](http://php.net/manual/en/function.preg-split.php)

# sed - sed 脚本删除多行括号中的所有内容

> ID：16016919
> 
> 赞同：1
> 
> 时间：2013-04-15T13:49:44.357
> 
> 标签：sed

我正在尝试使用 sed 脚本来删除文件中数组的内容。我试图删除内容只留下括号（）。但是我不能让 sed 脚本在多行上工作。

我正在尝试更改文件的当前状态：

```
LIST = ( "content"
         "content1"
         "content3") 
```

对此：

```
LIST = () 
```

但是，我使用的 sed 脚本仅将文件更改为：

```
LIST = ()
     "content"
     "content1"
     "content2" 
```

```
sed -e 's/LIST=\([^)]*\)/LIST=() /g' filename 
```

我还应该提到文件中还有其他一组我不想受到影响的括号。

例如

```
LISTNUMBER2("CONTENT") 
```

不应清空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:56:53.923

这个**sed**单线适用于您的示例：

```
sed -n '1!H;1h;${x;s/(.*)/()/;p}' 
```

测试：

```
kent$  echo 'LIST = ( "content"
         "content1"
         "content3")'|sed -n '1!H;1h;${x;s/(.*)/()/;p}'
LIST = () 
```

如果您可以使用**awk**，则此单行代码也适用于您的示例：

```
awk -v RS="" '{sub(/\(.*\)/,"()")}1' 
```

测试：

```
kent$  echo 'LIST = ( "content"
         "content1"
         "content3")'|awk -v RS="" '{sub(/\(.*\)/,"()")}1'                                                                                                                  
LIST = () 
```

**编辑** OP 的评论

多括号情况：

**awk**

```
 awk -v RS="\0" -v ORS="" '{gsub(/LIST\s*=\s*\([^)]*\)/,"LIST = ()")}1' file 
```

测试：

```
kent$  cat file
LISTKEEP2("CONTENT")  
LIST = ( "content"
         "content1"
         "content3")
LISTNUMBER2("CONTENT")  

kent$  awk -v RS="\0" -v ORS="" '{gsub(/LIST\s*=\s*\([^)]*\)/,"LIST = ()")}1' file
LISTKEEP2("CONTENT")  
LIST = ()
LISTNUMBER2("CONTENT") 
```

**赛德**：

```
 sed -nr '1!H;1h;${x;s/(LIST\s*=\s*\()[^)]*\)/\1)/;p}' file

kent$  sed -nr '1!H;1h;${x;s/(LIST\s*=\s*\()[^)]*\)/\1)/;p}' file
LISTKEEP2("CONTENT")  
LIST = ()
LISTNUMBER2("CONTENT") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T14:10:35.563

另一个 sed 解决方案：

```
sed '/LIST = (/{:next;/)/{s/(.*)/()/;b;};N;b next;}' 
```

这是一个不会更改任何包含特定字符串的块的版本（在本例中为“keepme”，但可以是任何内容）：

```
sed '/LIST = (/{:next;/)/{/keepme/b;s/(.*)/()/;b;};N;b next;}' 
```

*因为这会在找到右括号后*进行 keepme 测试，该右括号表示标签可以位于块中的任何位置。

# c - 将整数类型转换为 void*

> ID：16016920
> 
> 赞同：10
> 
> 时间：2013-04-15T13:49:49.190
> 
> 标签：c, linux, pointers, pthreads, void-pointers

```
#include <stdio.h>
void pass(void* );
int main()
{
    int x;
    x = 10;
    pass((void*)x);
    return 0;
}
void pass(void* x)
{
   int y = (int)x;
   printf("%d\n", y);
}

output: 10 
```

我对上述代码的问题..

1.  当我们将普通变量类型转换为 void* 或任何指针变量时会发生什么？

2.  我们必须将变量的地址传递给函数，因为在函数定义中，参数是指针变量。但是这段代码传递了普通变量..

这种格式在linux pthread编程中遵循......我是一个入门级的C程序员。我在 linux gcc 编译器中编译这个程序..

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-15T13:53:10.777

我只是在这里猜测，但我认为你应该做的实际上是将变量的*地址*传递给函数。您使用 address-of 运算符`&`来做到这一点

```
int x = 10;
void *pointer = &x; 
```

在函数中，您可以使用取消引用运算符获取指针的值`*`：

```
int y = *((int *) pointer); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:01:10.287

如果您打算使用`pthreads`并且打算将`pass`函数传递给`pthread_create`，则必须`malloc`/`free`您打算使用的参数（即使线程函数只需要一个 int ）。

使用整数地址（如`&x`）可能是错误的，实际上您将执行的每个修改`x`都会影响`pass`行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T14:00:47.183

请阅读[为什么 glib](https://developer.gnome.org/glib/2.34/glib-Type-Conversion-Macros.html)为这种转换提供宏，这里无需重复文本。要点是：指针具有平台相关的大小。

# java - Java：java.util.NoSuchElementException：找不到行

> ID：16016934
> 
> 赞同：1
> 
> 时间：2013-04-15T13:50:15.803
> 
> 标签：java, constructor, nosuchelementexception

我有一个问题，不知道该怎么办。这是一个例外：

```
Exception in thread "main" java.util.NoSuchElementException: No line found
    at java.util.Scanner.nextLine(Unknown Source)
    at Auto.<init>(Auto.java:32)
    at Auto.main(Auto.java:22) 
```

这就是我的代码：

```
import java.util.Scanner;

public class Auto {
    private String Marke1; 
    String Modell1; 
    String Farbe1; 
    double Höhe;
    double Breite;
    double Länge;
    int Tueren = 4;

    public static void main(String[] args) {
        System.out.println("Hello Auto!");

        Auto myFerrari = new Auto();
        myFerrari.einfacheNachricht();
        Auto myOpel = new Auto();
        myOpel.einfacheNachricht();
    }

    public Auto() {
        Scanner r = new Scanner(System.in);
        System.out.println("Bitte geben Sie die Marke ihres Autos an");
        Marke1 = r.nextLine()
        System.out.println("Bitte geben Sie das Modell ihres Autos an");             
        Modell1 = r.nextLine();
        System.out.println("Bitte geben Sie die Farbe ihres Autos an");
        Farbe1 = r.nextLine();
        System.out.println("Bitte geben Sie an, wiehoch ihr Auto ist");
        Höhe = r.nextDouble();
        System.out.println("Bitte geben Sie an, wie breit ihr Auto ist");
        Breite = r.nextDouble();
        System.out.println("Bitte geben Sie an, wie lang ihr Auto ist"); 
        Länge = r.nextDouble();
        r.close();
    }

    public Auto(String aMarke1, String aModell1, String aFarbe1, double aHöhe, double aBreite, double aLänge) { 
        Marke1 = aMarke1; 
        Modell1 = aModell1;
        Farbe1 = aFarbe1;
        Höhe = aHöhe;
        Breite = aBreite;
        Länge = aLänge;
    }

    public int getSitzreihen() { 
        return Tueren = 2; 
    }

    public void einfacheNachricht() {
        System.out.println("------------------------------------------");
        System.out.println("Automarke: " + Marke1);
        System.out.println("Modell: " + Modell1);
        System.out.println("Farbe: " + Farbe1);
        System.out.println("Sitzreihen: " + getSitzreihen());
        System.out.println("Volumen: " +(Höhe * Breite * Länge) +"m²" ) ;
        System.out.println("Ihr " + Farbe1 + "er " + Marke1 + " " + Modell1 + " hat ein Volumen von "+(Höhe * Breite * Länge) +"m²");
        System.out.println("------------------------------------------\n");
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T13:55:23.277

关闭 a`Scanner`会导致底层证券`InputStream`也被关闭。由于只有一个`System.in`，任何新创建`Scanner`的对象都无法从同一个流中读取：

```
r.close(); 
```

此行应删除

请参阅：[不要在单个 InputStream 上创建多个缓冲包装器](https://www.securecoding.cert.org/confluence/display/java/FIO06-J.+Do+not+create+multiple+buffered+wrappers+on+a+single+InputStream)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T13:57:34.393

您需要检查下一行之前是否存在，`hasNextLine()`在调用之前使用`nextLine()`

# spring - 对于基于 Web 或基于移动的应用程序，是否值得使用 Spring Integration 而不是 Spring MVC？

> ID：16016935
> 
> 赞同：5
> 
> 时间：2013-04-15T13:50:16.937
> 
> 标签：spring, spring-mvc, spring-integration

我正在开发网络应用程序，在我的产品中我们还提供金融非金融移动服务。

进入细节。

在我的 Web 应用程序中，没有什么比逐步维护流程更简单的了，所有 CRUD 操作都很简单，目前我们正在使用符合我们要求的**Spring MVC**，但是对于基于移动的服务，我们提供了类似**消息总线**的支持来交换捎带之间的信息客户端和服务器，我们有自定义代码来实现解决方案。

此外，我们基于移动的服务需要通过不同的协议（如 SOAP、REST）公开，同时需要将通信数据包与服务分离。

**我们仅使用SPRING MVC**解决了上述所有问题。

我的问题是

1.  是否值得使用**Spring Integration**框架替换自定义代码解决方案以使用 Spring Integration 实现消息总线，如果是，我的 Web 应用程序的流程是什么？
2.  如果我为我的 Web 应用程序使用 Spring Integration，它将如何将 HTTP 请求呈现给 SI？
3.  Spring Integration 是任何基于 Web 的独立应用程序的正确选择吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T11:28:51.410

Spring Integration 以企业集成模式为模型，最好将其视为支持消息驱动架构。Spring MVC 的历史和起源是为类似于 Struts 的 MVC 模式提供解决方案，主要以线性方式公开由服务支持的模型和控制视图。Spring MVC 的核心之一是允许动态填充将由 JSP 页面（视图）访问的模型。所有这些都是面向 Web 应用程序并结束它们的。

随着服务（Web、RESTful）的发展，Spring MVC 填补了空白并不断扩展以支持对服务的 HTTP 访问，尽管这是其职责的扩展，而不是最初的起源。同时，Spring Integration 的设计目的是处理消息和与服务的消息交互，独立于访问它的协议。为了启用不同的协议，可以使用不同的端点来公开相同的服务。例如，我可以将我的 crud 服务构建在 POJO 中，通过 Service Activator 公开，现在可用于许多不同的协议，包括通过 HTTP、WebServices、Twitter、XMPP 聊天服务、RMI、TCP 等的 REST。

简而言之，Spring MVC == HTTP 访问，Spring Integration == 消息访问（来自 HTTP、File、DB 等）

要在 Spring Integration 中通过 HTTP 公开服务，请使用 HTTP 端点。通常在请求/响应（比如从数据库中读取）中，您会想要使用`<int-http:inbound-gateway/>`它，它看起来像这样；

```
<int-http:inbound-gateway request-channel="request.channel" reply-channel="reply.channel"
   path="/myService" supported-methods="GET"/>
<int:channel id="request.channel"/>
<int:service-activator input-channel="request.channel" ref="myService"/>
<int:channel id="output.channel"/> 
```

（要记住的关键点是以下...

```
<bean class="org.springframework.integration.http.inbound.UriPathHandlerMapping"/> 
```

这有助于`path`将入站网关的属性映射到 servletdispatcher）

# javascript - chrome选择滚动条中的Jquery所有选择器（*）

> ID：16016942
> 
> 赞同：3
> 
> 时间：2013-04-15T13:50:28.770
> 
> 标签：javascript, jquery, google-chrome

我有这个代码：

```
$("*").bind("mousedown.sg", { 'self':this }, this.sgMousedown); 
```

它在页面上的所有元素上简单地绑定事件侦听器，并且它在除 chrome 之外的所有浏览器中都能正常工作。在 chrome 监听器中，甚至在滚动条上绑定，以便它停止响应点击。

问题是我可以使用哪个选择器来避免这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:57:00.227

不确定您要达到什么目的，但是否可以选择绑定到正文？

```
$("body").bind("mousedown.sg", { 'self':this }, this.sgMousedown); 
```

# apache - 在 Lucene 4 中查找文档/字段长度

> ID：16016943
> 
> 赞同：1
> 
> 时间：2013-04-15T13:50:29.483
> 
> 标签：apache, lucene

我希望能够访问文档索引后特定字段的长度（以术语表示）。最好，如果有一种无需重新索引的方法，我想这样做。但是，如果以某种方式重新索引可以轻松访问此值，那也可以。

[http://blog.mikemccandless.com/2012/03/new-index-statistics-in-lucene-40.html](http://blog.mikemccandless.com/2012/03/new-index-statistics-in-lucene-40.html)

该链接（向下滑动一点并找到提到的*长度*）谈到在索引时访问该值。我希望能够在索引后这样做。该链接还讨论了将值保存为 doc 值，但它没有提供如何执行此操作的示例。

如果有人可以提供保存文档长度或在索引后访问它的示例，那将非常有帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T15:31:44.783

文章中提到该统计数据是指[FieldInvertState](http://lucene.apache.org/core/4_1_0/core/org/apache/lucene/index/FieldInvertState.html)。一旦你有了它，如何获得你正在寻找的统计数据应该是相当简单的（只需调用`getLength`，`getUniquetermCount`或任何你需要的东西）。

FieldInvertState 被传递给`Similarity`，尤其是调用[`Similarity.computeNorm`](http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/search/similarities/Similarity.html#computeNorm%28org.apache.lucene.index.FieldInvertState,%20org.apache.lucene.index.Norm%29)。规范值是在索引时计算和存储的，而不是在查询时评估的，因此有效地使用它需要您重新索引。

使用它的典型方法是创建一个自定义的`Similarity`，可能是扩展的[`DefaultSimilarity`](http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/search/similarities/DefaultSimilarity.html)。简单地覆盖`lengthNorm`方法`DefaultSimilarity`将是最简单的方法。它的标准实现是：

```
return (float)(1.0 / Math.sqrt(numTerms)); 
```

你可以用你喜欢的任何东西覆盖它。

这将有助于根据自定义的基于长度的计算来调整得分。如果这不是您要查找的内容，而是需要能够仅获取该信息，那么我认为仅存储和字段，并从获取时返回的字段值中获取长度 a`Document`将是最简单的实现。

# cassandra - 如何检查 Cassandra 表是否存在

> ID：16016946
> 
> 赞同：23
> 
> 时间：2013-04-15T13:50:38.193
> 
> 标签：cassandra, cql

有没有一种简单的方法来检查表（列族）是否在 Cassandra 中使用 CQL（或 API，可能使用 com.datastax.driver）定义？

现在我倾向于执行`SELECT 1 FROM table`和检查异常，但也许有更好的方法？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-15T14:52:01.613

从 1.1 开始，您应该能够查询`system`键空间、`schema_columnfamilies`列族。如果您知道要检查哪个键空间，则此 CQL 应列出键空间中的所有列族：

```
SELECT columnfamily_name
FROM schema_columnfamilies WHERE keyspace_name='myKeyspaceName'; 
```

描述此功能的报告在这里：[https ://issues.apache.org/jira/browse/CASSANDRA-2477](https://issues.apache.org/jira/browse/CASSANDRA-2477)

虽然，他们确实注意到一些系统列名在 1.1 和 1.2 之间发生了变化。因此，您可能不得不对其进行一些处理才能获得所需的结果。

**编辑 20160523 - Cassandra 3.x 更新：**

请注意，对于 Cassandra 3.0 及更高版本，您需要对上述查询进行一些调整：

```
SELECT table_name 
FROM system_schema.tables WHERE keyspace_name='myKeyspaceName'; 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2015-07-16T12:27:37.167

Java 驱动程序（因为您在问题中提到它）还维护模式的本地表示。

驱动程序 3.x 及以下：

```
KeyspaceMetadata ks = cluster.getMetadata().getKeyspace("myKeyspace");
TableMetadata table = ks.getTable("myTable");
boolean tableExists = (table != null); 
```

驱动程序 4.x 及更高版本：

```
Metadata metadata = session.getMetadata();
boolean tableExists =
  metadata.getKeyspace("myKeyspace")
    .flatMap(ks -> ks.getTable("myTable"))
    .isPresent(); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-10-02T00:35:16.243

我只需要使用 cqlsh 手动检查表是否存在。可能有用的一般信息。

```
describe keyspace_name.table_name 
```

如果它不存在，你会得到'table_name' not found in keyspace 'keyspace' 如果它确实存在，你会得到表的描述。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-28T00:53:29.893

对于 .NET 驱动程序`CassandraCSharpDriver`版本 3.17.1，如果表尚不存在，则以下代码会创建一个表：

```
var ks = _cassandraSession.Cluster.Metadata.GetKeyspace(keyspaceName);
var tableNames = ks.GetTablesNames();
if(!tableNames.Contains(tableName.ToLowerInvariant()))
{
   var stmt = new SimpleStatement($"CREATE TABLE {tableName} (id text PRIMARY KEY, name text, price decimal, volume int, time timestamp)");
   _cassandraSession.Execute(stmt);
} 
```

您需要根据需要调整表格列的列表。这也可以通过使用`await _cassandraSession.ExecuteAsync(stmt).ConfigureAwait(false)`异步方法来等待。

另外，我想提一下我使用的是 Cassandra 4.0.1 版。

# git - git remote submodule url 不适用于本地 git 存储库

> ID：16016953
> 
> 赞同：-1
> 
> 时间：2013-04-15T13:50:59.777
> 
> 标签：git, git-submodules

我有一个 git 存储库，它有一个子模块，其 url 指向机器上的本地目录。（该目录实际上在 git 存储库的目录中，但应该作为一个单独的项目进行维护。）在我将该存储库克隆到远程计算机之前，这很有效。子模块保留该远程存储库的本地 url——它在克隆的存储库中不存在。

有什么办法可以使这项工作？或者，我应该只删除子模块并单独跟踪它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:07:26.467

添加子模块时，您应该使用远程存储库。例如（见[这里](http://chrisjean.com/2009/04/20/git-submodules-adding-using-removing-and-updating/)）：

> git 子模块添加 git@mygithost:billboard lib/billboard

所以现在你要做的是：

1）将您的子模块克隆到远程存储库，

2) 将本地子模块引用更改为新的远程位置。

你可以 [在这里](https://stackoverflow.com/questions/913701/changing-remote-repository-for-a-git-submodule)看到如何做到这一点。

# c# - 我的 C# Windows 窗体应用程序是空白的？

> ID：16016955
> 
> 赞同：4
> 
> 时间：2013-04-15T13:51:03.727
> 
> 标签：c#

我正在制作一个 Windows 窗体应用程序，每次我执行它时，我看到的都是一个空白表单，我的项目名为 frmMain.cs，这是我使用的标题：

```
using System;
using System.Windows.Forms;

public class frmMain : Form
{
private TextBox txtYear;
private Button btnCheck;
private Button btnClose;
private Label label1;
#region windows code
private void IntitializeComonent()
{
}
#endregion
public frmMain()
{
    IntitializeComonent();
}
[STAThread]
public static void Main()
{
    frmMain main = new frmMain();
    Application.Run(main);
}

 private void InitializeComponent()
{
    this.label1 = new System.Windows.Forms.Label();
    this.txtYear = new System.Windows.Forms.TextBox();
    this.btnCheck = new System.Windows.Forms.Button();
    this.btnClose = new System.Windows.Forms.Button();
    this.SuspendLayout();
    // 
    // label1
    // 
    this.label1.BorderStyle = System.Windows.Forms.BorderStyle.Fixed3D;
    this.label1.Location = new System.Drawing.Point(25, 24);
    this.label1.Name = "label1";
    this.label1.Size = new System.Drawing.Size(98, 20);
    this.label1.TabIndex = 0;
    this.label1.Text = "Year To Test: ";
    this.label1.TextAlign = System.Drawing.ContentAlignment.MiddleRight;
    // 
    // txtYear
    // 
    this.txtYear.Location = new System.Drawing.Point(129, 24);
    this.txtYear.Name = "txtYear";
    this.txtYear.Size = new System.Drawing.Size(100, 20);
    this.txtYear.TabIndex = 1;
    // 
    // btnCheck
    // 
    this.btnCheck.Location = new System.Drawing.Point(25, 93);
    this.btnCheck.Name = "btnCheck";
    this.btnCheck.Size = new System.Drawing.Size(75, 23);
    this.btnCheck.TabIndex = 2;
    this.btnCheck.Text = "Leap Year?";
    this.btnCheck.UseVisualStyleBackColor = true;
    // 
    // btnClose
    // 
    this.btnClose.Location = new System.Drawing.Point(154, 93);
    this.btnClose.Name = "btnClose";
    this.btnClose.Size = new System.Drawing.Size(75, 23);
    this.btnClose.TabIndex = 3;
    this.btnClose.Text = "&Close";
    this.btnClose.UseVisualStyleBackColor = true;
    // 
    // frmMain
    // 
    this.ClientSize = new System.Drawing.Size(284, 262);
    this.Controls.Add(this.btnClose);
    this.Controls.Add(this.btnCheck);
    this.Controls.Add(this.txtYear);
    this.Controls.Add(this.label1);
    this.Name = "frmMain";
    this.StartPosition = System.Windows.Forms.FormStartPosition.CenterScreen;
    this.Text = "Determain a Leap Year";
    this.Load += new System.EventHandler(this.frmMain_Load);
    this.ResumeLayout(false);
    this.PerformLayout();

}

private void frmMain_Load(object sender, EventArgs e)
{

}
} 
```

我也有删除program.cs和frmMain.Designer.cs的习惯，因为我的程序中不需要它们，这和我的问题有什么关系吗？请帮忙！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T13:56:48.750

在`frmMain()`你打电话`InitializeComonent()`（这是空的）而不是打电话`InitializeComponent()`。可能只是一个错字。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T13:58:56.257

你的代码很好。只是一个小错字

```
public frmMain()
{
    // In your constructor change 'IntitializeComonent' to 'InitializeComponent'
    IntitializeComonent();
} 
```

# .net - 配置 SocialAuthNet

> ID：16016956
> 
> 赞同：1
> 
> 时间：2013-04-15T13:51:04.447
> 
> 标签：.net

我正在尝试将 SocialAuthNet 配置为能够从 LinkedIn 中提取个人资料数据。我正在尝试开始使用由 SocialAuthNet 自己提供的 Quickstart_Guide，可以在以下位置找到：

[快速入门指南](https://code.google.com/p/socialauthnet/wiki/Quickstart_Guide#Create_a_new_web_application)

我已按照提供的所有步骤进行操作。但是，我收到此错误：

> HTTP 错误 404.0 - 未找到 您要查找的资源已被删除、名称已更改或暂时不可用。

有没有人可以解决我的问题？

谢谢

# python - scipy.stats 种子？

> ID：16016959
> 
> 赞同：42
> 
> 时间：2013-04-15T13:51:09.477
> 
> 标签：python, random, python-2.7, numpy, scipy

我正在尝试使用不同的种子生成 scipy.stats.pareto.rvs(b, loc=0, scale=1, size=1) 。

在 numpy 中，我们可以使用 numpy.random.seed(seed=233423) 播种。

有什么方法可以播种 scipy stats 生成的随机数。

注意：我没有使用 numpy pareto，因为我想给出不同的比例值。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-04-15T15:23:23.113

`scipy.stats`只是用来`numpy.random`生成它的随机数，所以`numpy.random.seed()`也可以在这里工作。例如，

```
import numpy as np
from scipy.stats import pareto
b = 0.9
np.random.seed(seed=233423)
print pareto.rvs(b, loc=0, scale=1, size=5)
np.random.seed(seed=233423)
print pareto.rvs(b, loc=0, scale=1, size=5) 
```

将打印`[ 9.7758784 10.78405752 4.19704602 1.19256849 1.02750628]`两次。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2020-09-20T15:44:03.080

对于那些在 7 年后偶然发现这个问题的人来说，numpy 随机状态生成器函数发生了重大变化。根据[此处](https://numpy.org/doc/stable/reference/random/legacy.html#numpy.random.RandomState)和[此处](https://numpy.org/doc/stable/reference/random/generator.html?highlight=generator#numpy.random.Generator)的文档，`RandomState`该类已替换为`Generator`该类。`RandomState`保证与旧版本/代码兼容，但不会收到任何实质性更改，包括为`Generator`.

为了说明如何在同一实验中将现有的基于 Numpy 的随机流传递给 Scipy 函数，下面给出了一些示例和推理，哪些情况是可取的以及为什么。

```
from numpy.random import Generator, PCG64
from scipy.stats import binom

n, p, size, seed = 10, 0.5, 10, 12345

# Case 1 : Scipy uses some default Random Generator
numpy_randomGen = Generator(PCG64(seed))
scipy_randomGen = binom
print(scipy_randomGen.rvs(n, p, size))
print(numpy_randomGen.binomial(n, p, size))
# prints
# [6 6 5 4 6 6 8 6 6 4]
# [4 4 6 6 5 4 5 4 6 7]
# NOT DESIRABLE as we don't have control over the seed of Scipy random number generation

# Case 2 : Scipy uses same seed and Random generator (new object though)
scipy_randomGen.random_state=Generator(PCG64(seed))
numpy_randomGen = Generator(PCG64(seed))
print(scipy_randomGen.rvs(n, p, size))
print(numpy_randomGen.binomial(n, p, size))
# prints
# [4 4 6 6 5 4 5 4 6 7]
# [4 4 6 6 5 4 5 4 6 7]
    # This experiment is using same sequence of random numbers, one is being used by Scipy
# and other by Numpy. NOT DESIRABLE as we don't want repetition of some random 
# stream in same experiment.

# Case 3 (IMP) : Scipy uses an existing Random Generator which can being passed to Scipy based 
# random generator object
numpy_randomGen = Generator(PCG64(seed))
scipy_randomGen.random_state=numpy_randomGen
print(scipy_randomGen.rvs(n, p, size))
print(numpy_randomGen.binomial(n, p, size))
# prints
# [4 4 6 6 5 4 5 4 6 7]
# [4 8 6 3 5 7 6 4 6 4]
# This should be the case which we mostly want (DESIRABLE). If we are using both Numpy based and 
#Scipy based random number generators/function, then not only do we have no repetition of 
#random number sequences but also have reproducibility of results in this case. 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2018-04-26T02:33:01.680

对于四年后看到这篇文章的人，Scipy 确实提供了一种将`np.random.RandomState`对象传递给其随机变量类的方法，请参阅[rv_continuous](https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.rv_continuous.html#scipy.stats.rv_continuous)和[rv_discrete](https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.rv_discrete.html#scipy.stats.rv_discrete)了解更多详细信息。scipy 文档是这样说的：

> 种子：无或 int 或 numpy.random.RandomState 实例，可选
> 
> 此参数定义用于绘制随机变量的 RandomState 对象。如果没有（或 np.random），则使用全局 np.random 状态。如果是整数，则用于播种本地 RandomState 实例。默认为无。

不幸的是，在连续/离散 rvs 子类`rv_continuous`或`rv_discrete`. 但是，该`random_state`属性确实属于子类，这意味着我们可以使用`np.random.RandomState`after 实例化的实例来设置种子，如下所示：

```
import numpy as np
import scipy.stats as stats

alpha_rv = stats.alpha(3.57)
alpha_rv.random_state = np.random.RandomState(seed=342423) 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2020-06-10T09:01:45.777

除了 user5915738 的答案之外，我认为这通常是最好的答案，我想指出最方便的方式来播种`scipy.stats`分布的随机生成器。

您可以在使用该`rvs`方法生成分布时设置种子，或者通过将种子定义为整数，该整数用于`np.random.RandomState`内部种子：

```
uni_int_seed = scipy.stats.uniform(-.1, 1.).rvs(10, random_state=12) 
```

或直接定义`np.random.RandomState`：

```
uni_state_seed = scipy.stats.uniform(-.1, 1.).rvs(
    10, random_state=np.random.RandomState(seed=12)) 
```

两种方法是等效的：

```
np.all(uni_int_seed == uni_state_seed)
# Out: True 
```

与将其分配给or相比，此方法的优势`random_state`在于，您始终可以显式控制 的随机状态，而**在每次调用 之后**，种子都会丢失，在失去对分布的跟踪时可能会导致不可重现的结果. 同样根据[The Zen of Python](https://www.python.org/dev/peps/pep-0020/#id2)：`rv_continuous``rv_discrete``rvs``my_dist.random_state = np.random.RandomState(seed=342423)`**`rvs`**

> 2.  显式优于隐式。

:)

# c# - 使用智能卡读卡器读取和写入卡详细信息

> ID：16016961
> 
> 赞同：2
> 
> 时间：2013-04-15T13:51:13.923
> 
> 标签：c#, smartcard

我需要将我的应用程序与智能卡读卡器集成。它是 Advanced Card Systems (www.acs.com.hk) 的非接触式读卡器，型号 ACR122U-A2。

目前我的客户已经在使用其他人开发的另一个应用程序，它使用了这个读卡器。他们通常将卡放在读卡器的顶部，即使它是非接触式读卡器。

此卡在俱乐部中用于会员访问。我需要阅读会员ID号姓名等，还需要编写激活卡的代码。

我需要示例 C# 代码。我浏览了制造商网站上的技术手册，但它使用十六进制代码提供了太多低级细节。我正在寻找使用 C# 的高级示例。

编辑1：由于卡中的数据是由另一个应用程序写入的，我是否能够在不知道架构详细信息的情况下有意义地读取数据？如果这是一个愚蠢的问题，我很抱歉，但我是第一次对智能卡进行编程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T11:43:46.593

你可以先看看[这个项目](http://www.codeproject.com/Articles/16653/A-Smart-Card-Framework-for-NET)。请注意，读卡器通常比卡需要更少的制造商特定地址（至少在它支持 PCSC 的情况下）。卡片往往需要稍微不同的低级字节，这就是为什么您需要提到的 SDK 手册来进行非平凡访问的原因。[我在这里](http://www.scdeveloper.com/datasheet/REFACOS3V23.pdf)找到了一份可能有用的手册。

请注意 1：如果应用程序是在没有任何安全性的情况下编写的，您可能会成功读取所需的信息。但是，如果您不知道该成员 ID 从偏移量 a 开始并以 b 格式编码 c 字节长，则您必须询问信息提供者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:58:33.223

该产品有一个 SDK，表明***它包含 C# 中的示例代码***。

[http://www.acs.com.hk/index.php?pid=product&id=ACR122-SDK](http://www.acs.com.hk/index.php?pid=product&id=ACR122-SDK)

我认为这是最好的起点。希望有帮助。

# vmware - 从 BB10 模拟器访问 Internet

> ID：16016963
> 
> 赞同：1
> 
> 时间：2013-04-15T13:51:22.083
> 
> 标签：vmware, blackberry-simulator, blackberry-10, blackberry-qnx

我想从我的 BB10 模拟器访问 Internet。

我已更改虚拟机的设置并将网络连接类型从 更改`NAT`为`Bridged`。

但是在此之后，当我重新启动模拟器时，它无法获取 IP 地址。因此 QNX IDE 无法发现它。

请建议我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T06:55:49.473

根据黑莓论坛管理员的说法，您可以执行以下操作：http: [//supportforums.blackberry.com/t5/Cascades-Development/BB10-Dev-Alpha-Simulator-not-connecting-to-WiFi/td-p/ 1842579](http://supportforums.blackberry.com/t5/Cascades-Development/BB10-Dev-Alpha-Simulator-not-connecting-to-WiFi/td-p/1842579)

1）关闭你的虚拟机

2) 在 VMWare 中选择您的 VM，然后单击“编辑虚拟机设置”

3) 选择网络适配器

4) 将 NAT 模式更改为 Bridge 模式，这将允许模拟器直接访问您的物理网卡。

5) 再次启动模拟器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-16T09:04:20.357

如果这仍然是您或其他任何人的问题；如果我理解正确，当您切换到桥接连接时，您的模拟器确实可以访问互联网，但 QNX IDE 无法通过设备发现找到它。

我刚遇到同样的问题，手动输入模拟器IP就可以解决。请注意，您必须使用 VMWare 在内容窗口最底部显示的地址，而不是在开发设置中设置的 IP。

我怀疑 QNX IDE 只扫描目标设备的特定 IP 范围。因此，当您切换到桥接模式并且您的设备在 LAN 中获得任意地址时，它不会（必然）落在该范围内。

# php - PHP取消链接不断失败

> ID：16016964
> 
> 赞同：0
> 
> 时间：2013-04-15T13:51:29.010
> 
> 标签：php, mysql, unlink

我正在尝试编写脚本来上传脚本以从我的服务器中删除图像。我不断收到错误消息。谁能发现这段代码有什么问题？

```
// Delete image
if(isset($_GET['deleteImg']) && !empty($_GET['deleteImg']) && $_GET['deleteImg'] == true)
{
 // Get imagepath from database
 $result = mysql_query("SELECT image FROM frankkluytmans WHERE id=$id");
 $imageDeletePath = mysql_fetch_assoc($result);

 // Delete image from server
 if(unlink($imageDeletePath['image']))
 {
    // Continue if image has been reset in database
    if(mysql_query("UPDATE frankkluytmans SET `image`='' WHERE id=$id")){
        // once deleted, redirect back to the view page
        header("Location: index.php"); 
    }
 }
 else
 {
    ?>
    <script type="text/javascript">
        window.alert('This image could not be deleted.';
    </script>
    <?
 }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:01:46.267

我猜你的错误出在`path`你的`unlink()`函数中，正如你所说的那样，实际字段`/gfx/image.png`在我看来并不像绝对路径，如果我错了，请纠正我。

要删除`file`并`unlink()`直接使用，您的脚本应与图像位于同一文件夹中。所以我认为最好`absolute path`为您的条目设置一个

```
$path_abs = ' /customers/d/8/e/frankkluytmans.nl/httpd.www/testsite/cms'; //is the `gfx` folder inside `cms` folder? if it is this will work otherwise you have to change
if(unlink($path_abs . $imageDeletePath['image'])) 
```

# android - 如何在Android上启动串口服务

> ID：16016966
> 
> 赞同：1
> 
> 时间：2013-04-15T13:51:33.207
> 
> 标签：android, bluetooth, serial-port, spp

我正在尝试制作一个简单的 android 应用程序，该应用程序通过蓝牙连接到 PC 并不断监视从 PC 发送给它的字符。但它必须使用串行端口配置文件（SPP），因为 PC 必须通过虚拟蓝牙 com 端口发送字符（我实际上是使用 mat-lab 通过 com 端口发送字符）。问题是当我开始为蓝牙配置传入的虚拟串口时（在蓝牙设置中），它说我的安卓设备没有运行串口服务。我怎么能在我的手机上启动该服务，或者是否有任何应用程序在后台运行并为我启动服务......请帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:36:42.563

使用终端应用程序，您可以执行以下操作：

```
sdptool add --channel=16 SP 
```

其中 16 可替换为您的频道号。

# azure - Azure Active Directory 组/角色

> ID：16016967
> 
> 赞同：6
> 
> 时间：2013-04-15T13:51:34.737
> 
> 标签：azure, active-directory, azure-active-directory

我试图弄清楚如何从 Web 门户创建 Windows azure Active Directory 组和/或角色。我在这里遗漏了什么明显的东西吗？我可以创建用户，并将他们分配给 2 个内置角色，但如何创建新角色？还是团体？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T22:42:52.333

诚然，我还没有尝试过，但 PowerShell 扩展应该能够做到这一点：

[http://technet.microsoft.com/en-us/library/jj151815.aspx](http://technet.microsoft.com/en-us/library/jj151815.aspx)

在“管理组和角色成员资格”下查看相关命令的详细信息。

我还假设 Graph API 可以处理它。我也希望 Azure 管理门户能让我们在他们的 GUI 中进行操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-19T20:09:19.733

似乎添加组等的方法是通过图形 api 或如上面 PS 脚本所建议的那样。图形 api 非常强大，虽然不如 Azure 门户中的这种功能方便。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-11T21:05:22.733

基本上你有2个选择：

1.  创建应用角色并为其分配安全组（需要 AAD 高级版）
2.  启用安全组作为声明（AAD Free 就足够了）

请遵循本官方手册：[https ://docs.microsoft.com/en-us/azure/active-directory/develop/howto-add-app-roles-in-azure-ad-apps](https://docs.microsoft.com/en-us/azure/active-directory/develop/howto-add-app-roles-in-azure-ad-apps)

# controls - 如何在simulink中表示止回阀？

> ID：16016969
> 
> 赞同：0
> 
> 时间：2013-04-15T13:51:39.253
> 
> 标签：controls, simulink

我是 simulink 新用户，如何在 simulink 中表示止回阀？我使用的是 2012b 版本。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T16:55:16.220

如果您可以访问 SimHydraulics 工具箱，那么它就像使用[止回阀](http://www.mathworks.com/help/physmod/hydro/ref/checkvalve.html)块一样简单。

如果您还不熟悉这个工具箱，[SimHydraulics](http://www.mathworks.com/help/physmod/hydro/ug/product-description.html)是[Simscape](http://www.mathworks.com/help/physmod/simscape/gs/product-description.html)工具箱的扩展。当您进行此类物理建模时，Simscape 会很有用，因为它提供了一个物理组件库，可以以与现实生活系统相同的结构进行连接。这与“标准”Simulink 模型有些不同，后者更像是一个框图，通常表示描述系统底层动态的实际数学方程。

话虽如此，如果您没有 Simscape 并且需要使用基本 Simulink 模块对此进行建模，那么您需要首先弄清楚描述止回阀的底层逻辑/方程式是什么。

# magento - 如何在分层导航 magento 中显示类别？

> ID：16016970
> 
> 赞同：-1
> 
> 时间：2013-04-15T13:51:42.257
> 
> 标签：magento, layered

已经将我的类别设置为活动锚我的属性正确显示，更多类别未显示。

谁能帮我？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:56:01.343

请仔细检查您要显示的类别是否为空。Magento 隐藏空的类别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T10:01:26.553

确保您的类别是默认（根）类别的子类别。Magento 会创建您的默认类别（确保不要删除它）。当您开始构建导航时，创建子类别并将它们放在您的默认（根）类别下。

# php - 表单解析不正确

> ID：16016982
> 
> 赞同：0
> 
> 时间：2013-04-15T13:52:24.257
> 
> 标签：php, wordpress, forms, url, redirect

我在解析我在 wordpress 中创建的自定义表单时遇到了很多麻烦，我在一个名为`front-page.php`我的表单所在的页面上，解析器在一个名为的页面上`formhandler.php`，我的解析器从一个单独的页面运行。

我真的很困惑，因为表单本身正在识别另一页上的解析器，只是没有真正解析数据并将您带到正确的页面。我得到一个很长的未知 URL，将我带到网站本身的 404 页面。

我需要帮助弄清楚为什么这个表单代码不起作用，或者解析器是否不在正确的位置来实际执行解析工作。我对 wordpress 还很陌生，所以现在有任何帮助。我现在必须为我的客户完成这项工作，任何帮助都会很棒。我只是以前不必在 WordPress 中使用自定义表单。

```
URL:

http://50.22.79.62/~pftech/formhandler.php?selection=http%3A%2F%2F50.22.79.62%2F~pftech%2Fwater-delivery-service%2F&zip=92115&home=on&did_submit=Get+Started%21

FORM PARSER:
<?php
    if(isset($_GET['zip'])){
        $sandiego =  array('91911', '91914', '91915', '91932', '91942', '91945', '91950', '92014', '92025', '92027', '92029', '92037', '92064', '92065', '92067', '92071', '92075', '92101', '92102', '92103', '92104', '92105', '92106', '92107', '92108', '92109', '92110', '92111', '92113', '92114', '92115', '92116', '92117', '92118', '92119', '92120', '92121', '92122', '92123', '92124', '92126', '92127', '92128', '92129', '92130', '92131', '92132', '92134', '92135', '92139', '92140', '92145', '92147', '92154', '92173');

        if (in_array($_GET['zip'], $sandiego)){
            header("Location: ".urldecode($_GET['selection'])."?zip=".$_GET['zip']."&type=".$_GET['type']);
        } else {
            header("Location: http://www.pureflo.com/");
        }
        exit;
    }
?>

FORM:
<form method='get' id='gform_1' action='front-page.php'>
  <div class="serviceinput">
    <label for="services">Services: </label>
    <select id="selection" name="selection">
      <option value=''>Select a Service</option>
      <option value='http://50.22.79.62/~pftech/water-delivery-service/'>Water Delivery</option>
      <option value='http://50.22.79.62/~pftech/coffee-delivery/'>Coffee Services</option>
      <option value='http://50.22.79.62/~pftech/water-filtration-systems/'>Water Filtration</option>
    </select>
  </div>
  &nbsp;
  <div class="zipcode">
    <label for="zip">Zip Code: </label>
    <input name="zip" type="text" maxlength="5" id="zip" />
  </div>
  <div class="frontradio">
    <input name="type" type="radio" id="homeradio" value="home" />
    <div class="homelabel"> <label for="homeradio">Home</label></div>
    <input name="type" type="radio" id="officeradio" value="office" />
    <label for="officeradio">Office</label>
  </div>
  <div class="homebutton">
    <input type='submit' id="submithome" name="did_submit" value="Get Started!">
  </div>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:11:20.597

似乎在动作中，您有 front-page.php ，它是表单文件的名称。这是你想要的吗？404 表示没有找到该页面。

我相信你应该试试 action='formhandler.php'。找到后，您可以检查您的解析器。

# javascript - 带有 kendo ui 的嵌套数据源和 TreeView

> ID：16016983
> 
> 赞同：1
> 
> 时间：2013-04-15T13:52:27.583
> 
> 标签：javascript, kendo-ui, kendo-treeview

我在将分层数据源与 TreeView 和嵌套结合使用时遇到问题。目标是显示一个树视图，其中包含“员工”、“个人资料”等根项目，而子项目是实际项目。所以每个根项目都使用不同的数据源。这不起作用，因为根节点没有扩展，而数据源似乎完美加载。这是代码：

```
$(document).ready(function() {
var userProfileDataSource  = new kendo.data.HierarchicalDataSource( {
            transport: {
                read: function (options) {
                    var items = [
                        {
                            text: "userprofile 1",
                            hasChildren: false
                        },
                        {
                            text: "userprofile 2",
                            hasChildren: false
                        }
                    ];
                    options.success(items);
                }
            }
        }),
    categories = new kendo.data.HierarchicalDataSource({
            transport: {
                read: function(options) {
                    options.success([
                        {
                            text: "Employees",
                            hasChildren: false
                        },
                        {
                            text: "UserProfiles",
                            children: userProfileDataSource,
                            hasChildren: true
                        }
                    ]);
                }
            }
        });

   $("#navigation-treeview").kendoTreeView( { dataSource: categories } );
}); 
```

[JSFiddle](http://jsfiddle.net/ruapho/GaFd6/4/ "JSFiddle")

有任何想法吗？

# python - 将两个CSV与python中的唯一列合并

> ID：16016984
> 
> 赞同：2
> 
> 时间：2013-04-15T13:52:30.180
> 
> 标签：python, csv

我有两个代表来自两个不同年份的数据的 CSV 文件。我知道如何使用 csvwriter 和 dictkeys 进行基本的合并，但问题出在此处：虽然 CSV 大多共享列标题，但每个列可能都有唯一的列。如果一个物种在一年内被捕获，而在另一年没有被捕获，则该列将仅在该年出现。如何将新数据合并到旧数据，创建新列并在这些列中用零填充旧数据？

文件 1： `"Date","Time","Species A","Species B", "Species X"`

文件 2： `"Date","Time", "Species A", "Species B", "Species C"`

我需要最终结果是一个带有此标头的 csv："`Date","Time","Species A","Species B", "Species C", "Species X"`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T14:36:58.850

其他人可能会使用该`csv`模块发布解决方案，因此我将提供一个[pandas](http://pandas.pydata.org)解决方案以供比较：

```
import pandas as pd

df1 = pd.read_csv("fish1.csv")
df2 = pd.read_csv("fish2.csv")

df = pd.concat([df1, df2]).fillna(0)
df = df[["Date", "Time"] + list(df.columns[1:-1])]
df.to_csv("merged_fish.csv", index=False) 
```

* * *

解释：

首先，我们读入两个文件：

```
>>> df1 = pd.read_csv("fish1.csv")
>>> df2 = pd.read_csv("fish2.csv")
>>> df1
   Date  Time  Species A  Species B  Species X
0     1     2          3          4          5
1     6     7          8          9         10
2    11    12         13         14         15
>>> df2
   Date  Time  Species A  Species B  Species C
0    16    17         18         19         20
1    21    22         23         24         25
2    26    27         28         29         30 
```

然后我们简单地将它们连接起来，它会自动用以下内容填充缺失的数据`NaN`：

```
>>> df = pd.concat([df1, df2])
>>> df
   Date  Species A  Species B  Species C  Species X  Time
0     1          3          4        NaN          5     2
1     6          8          9        NaN         10     7
2    11         13         14        NaN         15    12
0    16         18         19         20        NaN    17
1    21         23         24         25        NaN    22
2    26         28         29         30        NaN    27 
```

你希望它们用 0 填充，所以：

```
>>> df = pd.concat([df1, df2]).fillna(0)
>>> df
   Date  Species A  Species B  Species C  Species X  Time
0     1          3          4          0          5     2
1     6          8          9          0         10     7
2    11         13         14          0         15    12
0    16         18         19         20          0    17
1    21         23         24         25          0    22
2    26         28         29         30          0    27 
```

但是，这个订单并不是您想要的，而且是您想要`Time`的`Date`第一个，所以：

```
>>> df = df[["Date", "Time"] + list(df.columns[1:-1])]
>>> df
   Date  Time  Species A  Species B  Species C  Species X
0     1     2          3          4          0          5
1     6     7          8          9          0         10
2    11    12         13         14          0         15
0    16    17         18         19         20          0
1    21    22         23         24         25          0
2    26    27         28         29         30          0 
```

然后我们将其保存为 CSV 文件：

```
>>> df.to_csv("merged_fish.csv", index=False) 
```

生产

```
Date,Time,Species A,Species B,Species C,Species X
1,2,3,4,0.0,5.0
6,7,8,9,0.0,10.0
11,12,13,14,0.0,15.0
16,17,18,19,20.0,0.0
21,22,23,24,25.0,0.0
26,27,28,29,30.0,0.0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T15:24:05.790

这是`csv`Python 3 中的模块解决方案：

```
import csv

# Generate some data...

csv1 = '''\
Date,Time,Species A,Species B,Species C
04/01/2012,13:00,1,2,3
04/02/2012,13:00,1,2,3
04/03/2012,13:00,1,2,3
04/04/2012,13:00,1,2,3
'''

csv2 = '''\
Date,Time,Species A,Species B,Species X
04/01/2013,13:00,1,2,3
04/02/2013,13:00,1,2,3
04/03/2013,13:00,1,2,3
04/04/2013,13:00,1,2,3
'''

with open('2012.csv','w') as f:
    f.write(csv1)
with open('2013.csv','w') as f:
    f.write(csv2)

# The actual program

years = ['2012.csv','2013.csv']

lines = []
headers = set()
for year in years:
    with open(year,'r',newline='') as f:
        r = csv.DictReader(f)
        lines.extend(list(r))                 # Merge lines from all files.
        headers = headers.union(r.fieldnames) # Collect unique column names.

# Sort the unique headers keeping Date,Time columns first.
new_headers = ['Date','Time'] + sorted(headers - set(['Date','Time']))

with open('result.csv','w',newline='') as f:
    # The 3rd parameter is the default if the key isn't present.
    w = csv.DictWriter(f,new_headers,0)
    w.writeheader()
    w.writerows(lines)

# View the result

with open('result.csv') as f:
    print(f.read()) 
```

输出：

```
Date,Time,Species A,Species B,Species C,Species X
04/01/2012,13:00,1,2,3,0
04/02/2012,13:00,1,2,3,0
04/03/2012,13:00,1,2,3,0
04/04/2012,13:00,1,2,3,0
04/01/2013,13:00,1,2,0,3
04/02/2013,13:00,1,2,0,3
04/03/2013,13:00,1,2,0,3
04/04/2013,13:00,1,2,0,3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T14:06:38.200

根据[文档](http://docs.python.org/2/library/csv.html#csv.DictReader)，看起来您应该能够读出两个文件，合并两个提取字典中的键，然后使用编写器上的`fieldnames`和`restval`参数来实现您的 0 默认值。

# ant - 由于 JBoss 服务器的类路径错误，Ant Build 失败

> ID：16016985
> 
> 赞同：1
> 
> 时间：2013-04-15T13:52:32.927
> 
> 标签：ant, jboss

我该如何修复它或在哪里修复它？

它应该指向：

```
C:\jboss\jboss-5.1.0.GA\server\default\lib 
```

**控制台日志**

```
C:\PSC Updated\src>ant build-ejb
Buildfile: C:\PSC Updated\src\build.xml

clean:

build-core:
    [mkdir] Created dir: C:\PSC Updated\src\build\classes
    [javac] Compiling 159 source files to C:\PSC Updated\src\build\classes

BUILD FAILED
C:\PSC Updated\src\build.xml:110: C:\home\apps\jboss-5.1.0.GA\server\default\lib does not exist. 
```

工作：当我指向我的 {jboss.home}\server\default\lib

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:00:37.930

尝试在 ant 文件上使用双斜杠作为 windows 路径。

```
 C:\\jboss\\jboss-5.1.0.GA\\server\\default\\lib 
```

您能否发布您的 build.xml 以获得更多说明。

# ruby - #new 中的 ArgumentError，子类化枚举器

> ID：16016995
> 
> 赞同：3
> 
> 时间：2013-04-15T13:53:00.310
> 
> 标签：ruby, enumerator

我是这样子`Enumerator`类化的：

```
class CuadraticPrimeGenerator < Enumerator
  def initialize(a=1,b=49)
    super do |y|
      x = 1
      loop do 
        y << x**2 + a*x + b
        x += 1
      end
    end
  end
end 
```

然而...

```
> CuadraticPrimeGenerator.new(1,49)
0027.rb:41:in `initialize': 49 is not a symbol (TypeError)
    from 0027.rb:41:in `initialize'
    from 0027.rb:48:in `new'
    from 0027.rb:48:in `<main>' 
```

想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T14:07:07.000

关于什么：

```
class CuadraticPrimeGenerator < Enumerator
  def initialize(a=1,b=49)
    super() do |y|
      count, x = 0, 1
      loop { y.yield(x**2 + a*x + b) }
    end
  end
end 
```

# c++ - 替换失败有时是一个错误

> ID：16016996
> 
> 赞同：1
> 
> 时间：2013-04-15T13:53:02.483
> 
> 标签：c++, templates, c++11, sfinae

似乎替换失败有时是一个错误。
有人可以告诉我什么时候会出错，什么时候不会？[在这里](http://liveworkspace.org/code/29sdst%240)
查看运行结果 谢谢！

感谢您提供信息丰富的答案！
此代码无法使用 g++ 4.8 编译，但可以按预期使用 clang++ 3.2、g++ 4.7.3 和 intel 13.0.1。所以现在我确定这是 g++ 4.8 的一个错误。我已将此报告给 gcc bugzila。

```
In substitution of ‘template<class C> static constexpr int has<T>::test(decltype (sizeof (C:: x))) [with C = C; T = foo] [with C = foo]’:
required from ‘const int has<foo>::value’
required from here
error: invalid use of non-static member function ‘std::string foo::x()’ 
```

编码

```
template <typename T>
struct has {
    template <typename>
    constexpr static int test(...) {
      return 0;
    }
    template <typename C>
    constexpr static int test(decltype(sizeof(C::x))) {  // Doesn't compile.
      return 1;   // Is a member variable.
    }
    template <typename C, int c =
        sizeof(decltype(((C*)nullptr)->x()))>
    constexpr static int test(int) {
      return 2;   // Is a member function.
    }
    static const int value = test<T>(0);
};

struct foo {
    string x();
};
struct bar {
    string x;
};
int main() {
    std::cout << has<int>::value << std::endl;
    std::cout << has<foo>::value << std::endl;
    std::cout << has<bar>::value << std::endl;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T13:57:38.467

规则本质上是错误必须依赖于它直接所属的声明的模板参数。

这个例子看起来像一个编译器错误。它不能正确地排除特定的语法缺陷。

如果您希望它在类具有名为 的非静态成员函数时返回成功`x`，则应使用`&C::x`，因为您可以获取指向成员函数的指针，但不能简单地将其命名为独立的子表达式。

我首选的方法是

```
template< typename, typename = void >
struct has_x
    : std::false_type {};

template< typename t >
struct has_x< t, typename std::enable_if< & t::x == & t::x >::type >
    : std::true_type {}; 
```