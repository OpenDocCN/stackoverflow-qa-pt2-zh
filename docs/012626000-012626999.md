# StackOverflow 问答 12626000-12626999

# c# - 为什么此代码会导致“当前上下文中不存在该名称”错误？

> ID：12626003
> 
> 赞同：2
> 
> 时间：2012-09-27T16:31:27.753
> 
> 标签：c#, wpf, xaml, code-behind

我在使用下面的代码时遇到问题：

```
<Window x:Class="ChangePage.PageSwitcher"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:ChangePage"
    Title="ECE Showcase"
    WindowState="Maximized">

    <Window.Resources>
        <local:PageSwitcher x:Name="pageTransitionControl" TransitionType="SlideAndFade"/>
    </Window.Resources> 
```

在文件 PageSwitcher.xaml.cs 后面的代码中，我有以下行：

```
pageTransitionControl.TransitionType = whatever; 
```

但是，这会导致以下错误：

> 当前上下文中不存在名称“pageTransitionControl”

我已经在互联网上搜索了几个小时，试图找到原因，但还没有弄清楚。Build Action 设置为 Page，所有文件都保存了，我试过重建，PageSwitcher 在 ChangePage 命名空间中，PageSwitcher 有一个构造函数。

还有什么我做错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T16:43:07.717

您不能为资源分配名称。资源有键。

```
<Window x:Class="ChangePage.PageSwitcher"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:ChangePage"
    Title="ECE Showcase"
    WindowState="Maximized">

    <Window.Resources>
        <local:PageSwitcher x:Key="pageTransitionControl" TransitionType="SlideAndFade"/>
    </Window.Resources> 
```

然后在 xaml.cs 中：

```
var pageTransitionControl = (PageSwitcher)Resources["pageTransitionControl"];
pageTransitionControl.TransitionType = whatever; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T16:44:00.430

该项目存在于窗口的资源中，而不是窗口本身

您可以将其直接放置在 Window 本身而不是 Resources 中以使您的代码正常工作，或者将其分配为 an`x:Key`而不是 an`x:Name`并使用它

```
(PageSwitcher)this.Resources["pageTransitionControl"] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T16:44:14.230

似乎您无法直接访问后面代码中的资源。您可能需要使用 Resources["pageTransitionControl"] 来访问它。

# php - 没有子元素的元素的 PHP DOMDocument 值

> ID：12626005
> 
> 赞同：3
> 
> 时间：2012-09-27T16:31:31.077
> 
> 标签：php, html, domdocument

我得到了一个 DOMDocument，它看起来像这样：

```
<font size="6" face="Arial">
CONTENT
    <font size="5" face="Arial">...</font>
    <br>
    <table cellspacing="1" cellpadding="1" border="3" bgcolor="#E7E7E7" rules="all">...</table>
    <table cellspacing="1" cellpadding="1">...</table>
    <font size="3" face="Arial" color="#000000">...</font>
</font> 
```

现在我只想获得 CONTENT 而不是所有其他子元素。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T16:42:13.083

您可以做的是获取第一个标签[`DOMText`](http://php.net/domtext)的子节点的第一个节点。`<font>`

```
// Get the first <font> tag
$font = $doc->getElementsByTagName( 'font')->item(0);

// Find the first DOMText element
$first_text = null;
foreach( $font->childNodes as $child) {
    if( $child->nodeType === XML_TEXT_NODE) {
        $first_text = $child; 
        break;
    }
}

if( $first_text != null) {
    echo 'OUTPUT: ' . $first_text->textContent;
} 
```

您可以从[演示](http://viper-7.com/15CfYr)中看到这打印：

```
OUTPUT: CONTENT 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T17:30:18.460

更短：

```
$output = $xml->getElementsByTagName("font")->item(1)firstChild->textContent; 
```

nickb 的解决方案也有效，如果内容出现在其中一个子孩子之后，效果会更好。但由于在我的情况下它没有这样做，所以这个更短。

# python - Django - login()-function 似乎坏了

> ID：12626007
> 
> 赞同：1
> 
> 时间：2012-09-27T16:31:33.137
> 
> 标签：python, django, django-users

在被迫离开 PHP 并使用 Python 和 Django 工作之后，我遇到了一个小问题。

我想要做的是使用 Django 附带的内置用户身份验证。问题是，当我尝试使用“login()”函数时，它不会将用户保存在会话中，或者应该保存在任何地方。

我的代码如下所示：

```
@csrf_exempt    
def dologin(request):
    username = request.POST['username']
    password = request.POST['password']
    user = authenticate(username=username, password=password)

    if user is not None:
        if user.is_active:
            login(request, user)
            # Redirect to a success page.
            return render_to_response('bsys/profile.html', {'message': 'Success!', 'user': request.user.get_full_name()})
        else:
            # Return a 'disabled account' error message
            return render_to_response('bsys/login.html', {'message': 'Disabled!'})
    else:
        # Return an 'invalid login' error message.
        return render_to_response('bsys/login.html', {'message': 'Sumthin Wong!'}) 
```

所以问题是当我运行时：

```
request.user.get_full_name() 
```

它说：

```
Exception Type: AttributeError   
Exception Value: 'AnonymousUser' object has no attribute 'get_full_name' 
```

所以显然它没有登录用户。

当我做同样的事情，但使用：

```
user.get_full_name() 
```

它可以工作，然后验证功能显然也可以正常工作。所以我猜想是关于 login() 的。

我还尝试过以管理员身份通过 admin-login 登录，然后从另一个视图使用相同的 request.user.get_full_name() ，它工作正常。

有什么想法可以解决这个问题吗？也许我只是错过了框架的一些重要部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T17:10:59.970

为什么要在成功登录时呈现模板？与所有 POST 的 HTTP 请求一样，最好在成功时重定向以减少用户重新提交请求的机会。

更相关的是，我相信这将解决您的问题，因为模板在使用上下文处理器填充其上下文时`auth`，会将其`{{ user }}`变量设置为 的值`request.user`，这是请求开始时的匿名用户。如果您重定向，新请求将具有 non-anonymous `request.user`，因此应正确填充模板的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T16:44:22.303

我认为您检查用户是否登录的方式导致了这种情况。

代替：

```
if user is not None: 
```

尝试：

```
if user.is_authenticated: 
```

这是它将绕过 AnonymousUser 案例。

（可能是，不记得从我的头顶）

```
if user.is_authenticated(): 
```

# html - 如果 iframe 未从 URL 加载，则加载缩略图

> ID：12626009
> 
> 赞同：1
> 
> 时间：2012-09-27T16:31:39.693
> 
> 标签：html

我有一个从 CartoDB 加载地图的 iframe。

```
<iframe src='https://recology.cartodb.com/tables/condma_1_cleaned/embed_map' width='900' height='600'></iframe> 
```

此 iframe 嵌入在 html 演示文稿中。当我做演示时，可能没有互联网。在这种情况下，如果可以加载地图的屏幕截图，那就太好了。

当加载实时版本由于缺乏互联网访问而失败时，如何获取要加载的地图屏幕截图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T16:46:26.813

借用[这个](https://stackoverflow.com/questions/2384167/check-if-internet-connection-exists-with-javascript)答案，您可以执行以下操作：

```
<script type="text/javascript" src="/javascripts/jquery.js"></script>
<script id="iframe_loader">
function loadIframe() {
  var iframe_element = document.getElementById('iframe_id');
  if (navigator.onLine) {
    iframe_element.src = 'www.CartDB_url.com';
  } else {
    iframe_element.src = '/local_version_CartDB.htm';
  }
}
</script> 
```

然后就在您关闭网站末尾的 BODY-tag 之前

```
<script>
  loadIframe();
</script> 
```

# apache - Expires 指令 - 修改基础 VS 访问基础

> ID：12626011
> 
> 赞同：4
> 
> 时间：2012-09-27T16:31:47.957
> 
> 标签：apache, .htaccess, browser-cache, mod-expires

据我所知：

```
ExpiresByType text/html "access plus 30 days" 
```

将在存储内容 30 天后使浏览器缓存请求新鲜内容死亡。

但是有：

```
ExpiresByType text/html "modification plus 30 days" 
```

浏览器缓存将在 LAST MODIFIED HEADER 的帮助下知道在修改 30 天之前不要请求新内容。

所以我的问题是，**为什么不一直使用修改库，因为它似乎更有意义，或者我缺少什么？**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-27T17:50:26.100

[apache mod_expires 文档](http://httpd.apache.org/docs/current/mod/mod_expires.html)这样说：

> 效果上的差异是微妙的。如果使用**M**，则所有缓存中文档的所有当前副本都将同时过期，这对于始终在同一 URL 中找到的每周通知之类的东西很有用。如果使用**A**，则每个客户端的到期日期都不同；这对于不经常更改的图像文件很有用，特别是对于一组都引用相同图像的相关文档（即，图像将在相对较短的时间跨度内重复访问）。

其中**M**是*修改加*，**A**是*访问加*。因此，您希望如何缓存以在所有浏览器中工作似乎是一个问题。您是否希望您的资源的缓存*同时在所有浏览器中*过期？*或者您是否希望您的资源在所有浏览器中错开*缓存到期？特别是，它归结为这里缓存的资源类型。

例如，如果我有一个页面，`/live_shows.html`除了每周一次，我只在一周开始时更新它以列出我将在我的酒吧中拥有的所有现场表演，然后我会去想用`"modification plus 7 days"`。因为它会每 7 天更新一次，不多也不少。

如果我有一个显示在`/live_shows.html`页面上的图像目录，但它们很少被更改，因为它们就像图标、横幅和项目符号，我会一直使用它们。然后我会想要制作它们`"access plus 30 days"`，因为如果有任何更改，获取这些更改的更新并不是那么重要。

# objective-c - 隐藏 KeyWindow 以导致截取空白屏幕截图

> ID：12626017
> 
> 赞同：2
> 
> 时间：2012-09-27T16:32:09.490
> 
> 标签：objective-c, ios, xcode, ios5, ios4

当应用程序暂停到后台时，我试图阻止 Apple 实现对当前屏幕内容的屏幕截图。我发现了一段可以工作的代码，但它有一个问题。它的作用是清除屏幕上的键窗口，因此当拍摄快照时，它是一个空白屏幕。这是该功能的代码片段：

```
- (void)applicationWillResignActive:(UIApplication *)application
{
    [ UIApplication sharedApplication ].keyWindow.hidden = YES;
}

- (void)applicationDidEnterBackground:(UIApplication *)application
{
    [ UIApplication sharedApplication ].keyWindow.hidden = YES;
} 
```

上述代码的问题在于，当应用程序返回前台时，视图消失了，因为它已被隐藏，我无法通过简单的方式取消隐藏它

```
[ UIApplication sharedApplication ].keyWindow.hidden = NO; 
```

在应用程序委托的 applicationWillEnterForeground 方法中。一旦我将隐藏视图隐藏在后台方法中，有谁知道如何恢复隐藏视图？现在它是一个黑屏，因为视图已被隐藏。当您在进入后台然后返回之前隐藏一个键窗口时究竟会发生什么。你之前隐藏的那个keywindow不再是keywindow了吗？谁能指出我正确的方向？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T17:29:55.807

刚刚制作了一个演示项目，并且能够重现您的问题。实际上，`keyWindow`应用程序的属性是`nil`何时`applicationWillEnterForeground:`被调用。

很多时候，你的应用程序的委托会引用它的窗口——这通常是许多应用程序的 Xcode 默认模板。我能够通过致电解决问题

```
self.window.hidden = NO; 
```

而不是`[UIApplication sharedApplication.keyWindow.hidden = NO;`. 假设像大多数模板一样，您的应用程序委托具有窗口引用。

对我有用的另一种选择是调用`[self.window makeKeyAndVisible];`.

所有这些都是在 iOS 6 模拟器上完成的。

希望这可以帮助！

# python - 处理文件名时出现 UnicodeDecodeError

> ID：12626019
> 
> 赞同：0
> 
> 时间：2012-09-27T16:32:14.027
> 
> 标签：python, python-2.7

我在 Ubuntu 12 x64 上使用 Python 2.7.3。

我的文件系统上的一个文件夹中有大约 200,000 个文件。一些文件的文件名包含 html 编码和转义字符，因为这些文件最初是从网站下载的。以下是示例：

> 牙买加%2008%20114.jpg
> thai_trip_%E8%B0%83%E6%95%B4%E5%A4%A7%E5%B0%8F%20RAY_5313.jpg

我编写了一个简单的 Python 脚本，它遍历文件夹并重命名所有文件名中带有编码字符的文件。新文件名是通过简单地解码构成文件名的字符串来实现的。

该脚本适用于大多数文件，但是对于某些文件，Python 会阻塞并吐出以下错误：

```
UnicodeDecodeError: 'ascii' codec can't decode byte 0xe2 in position 11: ordinal not in range(128)
Traceback (most recent call last):
  File "./download.py", line 53, in downloadGalleries
    numDownloaded = downloadGallery(opener, galleryLink)
  File "./download.py", line 75, in downloadGallery
    filePathPrefix = getFilePath(content)
  File "./download.py", line 90, in getFilePath
    return cleanupString(match.group(1).strip()) + '/' + cleanupString(match.group(2).strip())
  File "/home/abc/XYZ/common.py", line 22, in cleanupString
    return HTMLParser.HTMLParser().unescape(string)
  File "/usr/lib/python2.7/HTMLParser.py", line 472, in unescape
    return re.sub(r"&(#?[xX]?(?:[0-9a-fA-F]+|\w{1,8}));", replaceEntities, s)
  File "/usr/lib/python2.7/re.py", line 151, in sub
    return _compile(pattern, flags).sub(repl, string, count) 
```

这是我的 cleanupString 函数的内容：

```
def cleanupString(string):
    string = urllib2.unquote(string)

    return HTMLParser.HTMLParser().unescape(string) 
```

这是调用 cleanupString 函数的代码片段（此代码与上述回溯中的代码不同，但会产生相同的错误）：

```
rootFolder = sys.argv[1]
pattern = r'.*\.jpg\s*$|.*\.jpeg\s*$'
reobj = re.compile(pattern, re.IGNORECASE)
imgs = []

for root, dirs, files in os.walk(rootFolder):
    for filename in files:
        foundFile = os.path.join(root, filename)

        if reobj.match(foundFile):
            imgs.append(foundFile)

for img in imgs :
    print 'Checking file: ' + img
    newImg = cleanupString(img) #Code blows up here for some files 
```

任何人都可以为我提供解决此错误的方法吗？我已经尝试添加

```
# -*- coding: utf-8 -*- 
```

到脚本的顶部，但这没有效果。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T16:46:41.290

您的文件名是包含代表 unicode 字符的 UTF-8 字节的字节字符串。HTML 解析器通常使用 unicode 数据而不是字节字符串，特别是当它遇到 & 转义时，因此 Python 会自动尝试为您解码该值，但默认情况下它`ASCII`用于该解码。这对于 UTF-8 数据失败，因为它包含超出 ASCII 范围的字节。

您需要将字符串显式解码为 un​​icode 对象：

```
def cleanupString(string):
    string = urllib2.unquote(string).decode('utf8')

    return HTMLParser.HTMLParser().unescape(string) 
```

您的下一个问题将是您现在拥有 unicode 文件名，但是您的文件系统将需要某种编码来处理这些文件名。`sys.getfilesystemencoding()`您可以使用;检查该编码是什么 用它来重新编码你的文件名：

```
def cleanupString(string):
    string = urllib2.unquote(string).decode('utf8')

    return HTMLParser.HTMLParser().unescape(string).encode(sys.getfilesystemencoding()) 
```

[您可以在Unicode HOWTO](http://docs.python.org/howto/unicode.html)中了解 Python 如何处理Unicode 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T16:46:00.370

看起来你遇到了[这个问题](http://bugs.python.org/issue3932)。我会尝试颠倒您调用`unescape`and的顺序`unquote`，因为`unquote`会在您的文件名中添加非 ASCII 字符，尽管这可能无法解决问题。

它窒息的实际文件名是什么？

# automation - Microsoft Project 自动化重命名字段

> ID：12626020
> 
> 赞同：1
> 
> 时间：2012-09-27T16:32:20.440
> 
> 标签：automation, ms-project

我一直在使用 c# 与 Microsoft Project 进行复杂的集成。

我已经完成了我需要做的几乎所有事情，但有一个问题我正在努力寻找解决方法。我需要在计划中添加一些自定义列，并通过使用“Text1”等其他列来实现这一点，但需要重命名该列以使其更有意义。这在项目本身很容易，但我目前无法看到 API 的正确部分来执行此操作。任何指针都非常感谢。

# javascript - 停止 Mozilla Firefox 在新标签页中打开弹出窗口

> ID：12626023
> 
> 赞同：0
> 
> 时间：2012-09-27T16:32:39.037
> 
> 标签：javascript, firefox

我正在建立一个站点，当您单击链接时，它会打开两件事；它会在新选项卡中打开一个弹出窗口和一个外部网站。这样用户可以在他/她浏览外部网页时与弹出窗口进行交互。

这对我来说很好，但我认为当我的 FF 在 OSX lion 上更新到 15.0.1 版时，我不能再让它按照我想要的方式运行。

我什至更改了 FF 中的设置：FF->Preferences->Tabs->Open new window in Tab 而不是关闭并且没有这样的运气。

我还注意到，任何网站上的 facebook connect 都会打开一个新标签，而不是一个新的弹出窗口。

我似乎在网上找不到任何说明这是 FF 的本机行为的文档，即使在他们的变更日志中也是如此。

这是我的 javascript 触发器，我确信所有参数都是正确的：

```
popWin = window.open('http://somesite.com','myTargetWindowName','height=650,width=450,pageXOffset=900,pageYOffset=900,scrollbars=yes'); 
```

# tomcat - 如何使用 logstash 读取 tomcat 日志

> ID：12626026
> 
> 赞同：5
> 
> 时间：2012-09-27T16:32:52.807
> 
> 标签：tomcat, logstash

我正在尝试配置logstash。在 wiki 中，我发现我们可以阅读 apache 或其他系统日志。读取tomcat日志的配置和步骤是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-29T12:56:07.120

Tomcat 使用 Java-Util-Logging。

您可以使用直接 GELF appender 将日志从 Tomcat 提交到 logstash。

您需要在启动脚本和记录器配置（和两个 jar）中进行一些更改：

**/conf/logging.properties**：

```
handlers = 1catalina.org.apache.juli.FileHandler, 2localhost.org.apache.juli.FileHandler, 3manager.org.apache.juli.FileHandler, 4host-manager.org.apache.juli.FileHandler, java.util.logging.ConsoleHandler, biz.paluch.logging.gelf.jul.GelfLogHandler

.handlers = 1catalina.org.apache.juli.FileHandler, java.util.logging.ConsoleHandler, biz.paluch.logging.gelf.jul.GelfLogHandler

biz.paluch.logging.gelf.jul.GelfLogHandler.host=udp:localhost
biz.paluch.logging.gelf.jul.GelfLogHandler.port=12201
biz.paluch.logging.gelf.jul.GelfLogHandler.level=INFO 
```

**/bin/catalina.sh**：

```
if [ -r "$CATALINA_BASE/bin/logstash-gelf-1.4.2.jar" ] ; then
  CLASSPATH=$CLASSPATH:$CATALINA_BASE/bin/logstash-gelf-1.4.2.jar:$CATALINA_BASE/bin/json-simple-1.1.jar:$CATALINA_BASE/bin/jedis-2.5.1.jar:$CATALINA_BASE/bin/commons-pool2-2.0.jar
fi 
```

**logstash-gelf**： [logstash-gelf-1.5.2-logging-module.zip](http://search.maven.org/remotecontent?filepath=biz/paluch/logging/logstash-gelf/1.5.2/logstash-gelf-1.5.2-logging-module.zip)

另请参阅[对 Tomcat 的 logstash-gelf 的更改](https://gist.github.com/mp911de/69385b908d129a74b205)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T16:55:00.330

这可能取决于 Java 日志框架的选择以及日志框架的输出是如何格式化的。

logstash 文档给出了一个示例 log4j 输入解析器：[http ://logstash.net/docs/1.1.9/inputs/log4j](http://logstash.net/docs/1.1.9/inputs/log4j)

```
input {
  log4j {
    add_field => ... # hash (optional), default: {}
    charset => ... # string, one of ["ASCII-8BIT", "UTF-8", "US-ASCII", ...] (optional), default: "UTF-8"
    data_timeout => ... # number (optional), default: 5
    debug => ... # boolean (optional), default: false
    format => ... # string, one of ["plain", "json", "json_event"] (optional)
    host => ... # string (optional), default: "0.0.0.0"
    message_format => ... # string (optional)
    mode => ... # string, one of ["server", "client"] (optional), default: "server"
    port => ... # number (required)
    tags => ... # array (optional)
    type => ... # string (required)
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T21:27:34.000

如此[处](http://logstash.net/docs/1.1.1/inputs/file)所述，您可以使用任何日志文件，无论它来自什么来源。您必须将输入用作文件并相应地配置其他内容！

```
input {
  file {
## Your configuration goes here like file path 
## and other config, check documentation
}
} 
```

# openssl - 链式客户端证书

> ID：12626027
> 
> 赞同：5
> 
> 时间：2012-09-27T16:32:59.003
> 
> 标签：openssl, client, certificate, chained

我想使用 SSL 客户端证书来验证连接到 tomcat6/7 的用户。我已经正确配置了 tomcat，并且我使用我提供给 tomcat 的信任库中的证书签署的证书正在成功地从 IE 和 Firefox 进行身份验证。

我还想链接客户端证书，因为我想让客户能够管理自己的用户。我可以通过向客户颁发一个中间管理 CA 证书来实现这一点，他们将使用该证书来签署其他用户证书。我需要用户的浏览器发送用户证书，并与管理 CA（由我的根证书签名）链接以进行身份​​验证。

我正在使用openssl，我已经创建了一个根CA和一个中间CA，我已经使用中间CA签署了一个叶子证书。我已将所有三个证书都转换为 pkcs12 和 pem，并使用 keytool 将根证书导入到 tomcat 的信任库中。openssl –verify 将根据中间证书验证叶子 pkcs12（并根据根证书进行中间验证）。但我无法获得叶证书（pkcs12）来验证根证书（pkcs12）。我也无法让 IE 或 Firefox 使用叶子证书进行身份验证。IE 会提示我输入证书，但无法进行身份验证（在 tomcat 的日志中没有提及连接或失败）。Firefox 不提示叶证书；它根本无法进行身份验证。

以下是我尝试使用 openssl 验证叶子与根的方法：

```
openssl verify -CAfile ..\root\Root.pem Leaf.pem 
```

以下是我用来生成三个证书的脚本：
root.bat：

```
set name=Root
set keyPassword=dummypassword
set trustPassword=dummypassword
openssl genrsa -des3 -passout pass:%keyPassword% -out %name%.key 4096
openssl req -new -key %name%.key -passin pass:%keyPassword% -out %name%.csr -subj "/C=US/ST=Chaos/L=TimeNSpace/O=None/CN=%name%"
openssl x509 -req -days 3650 -in %name%.csr -signkey %name%.key -passin pass:%keyPassword% -extfile GenerateCertificate.cfg -extensions v3_ca -out %name%.crt
openssl pkcs12 -export -in %name%.crt -inkey %name%.key -passin pass:%keyPassword% -passout pass:%keyPassword% -out %name%.pkcs12
keytool -noprompt -import -file %name%.crt -alias %name% -keystore %name%.truststore -deststorepass %trustPassword%
keytool -list -v -keystore %name%.truststore -storepass %trustPassword% > %name%.truststore.dump.txt
keytool -exportcert -alias %name% -keystore %name%.truststore -storetype jks -storepass %trustPassword% -rfc -file %name%.truststore.pem
openssl pkcs12 -in %name%.pkcs12     -out %name%.pem     -nodes -passin pass:%keyPassword% 
```

中间.bat：

```
set name=Intermediate
set password=dummypassword
set caDir=../root
set caName=Root
set caPassword=dummypassword
openssl genrsa -des3 -passout pass:%password% -out %name%.key 2048
openssl req -new -key %name%.key -passin pass:%password% -out %name%.csr -subj "/C=US/ST=Chaos/L=TimeNSpace/O=None/CN=%name%"
openssl x509 -req -days 3650 -in %name%.csr -CA %caDir%/%caName%.crt -CAkey %caDir%/%caName%.key -passin pass:%caPassword% -set_serial 1 -extfile GenerateCertificate.cfg -extensions v3_ca -out %name%.crt
openssl pkcs12 -export -in %name%.crt -inkey %name%.key -passin pass:%password% -passout pass:%password% -chain -CAfile %caDir%/%caName%.crt -out %name%.pkcs12
openssl pkcs12 -in %name%.pkcs12     -out %name%.pem     -nodes -passin pass:%password% 
```

叶.bat：

```
set name=Leaf
set password=dummypassword
set caDir=../intermediate
set caName=Intermediate
set caPassword=dummypassword
openssl genrsa -des3 -passout pass:%password% -out %name%.key 2048
openssl req -new -key %name%.key -passin pass:%password% -out %name%.csr -subj "/C=US/ST=Chaos/L=TimeNSpace/O=None/CN=%name%"
openssl x509 -req -days 3650 -in %name%.csr -CA %caDir%/%caName%.crt -CAkey %caDir%/%caName%.key -passin pass:%caPassword% -set_serial 1 -out %name%.crt
openssl pkcs12 -export -in %name%.crt -inkey %name%.key -passin pass:%password% -passout pass:%password% -chain -CAfile %caDir%/%caName%.pem -out %name%.pkcs12
openssl pkcs12 -in %name%.pkcs12     -out %name%.pem     -nodes -passin pass:%password% 
```

生成证书.cfg：

```
[ v3_ca ]
subjectKeyIdentifier=hash
authorityKeyIdentifier=keyid:always,issuer
basicConstraints = CA:true,pathlen:3 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T20:13:15.150

问题是根证书和中间证书没有创建为 CA 证书。

要将它们创建为 CA 证书，我添加了

```
-extfile GenerateCertificate.cfg -extensions v3_ca 
```

到他们的创建脚本，并将 GenerateCertificate.cfg 文件添加到我的工作目录（其中包含证书创建批处理文件）。

我已经编辑了我的原始帖子以反映这些变化。

# jquery - 如何在div之间设置可排序

> ID：12626028
> 
> 赞同：2
> 
> 时间：2012-09-27T16:33:05.107
> 
> 标签：jquery, jquery-ui

我有 div：

```
<div class="sortable container">
    <div class="line">
        content
    </div>
    <div class="line">
        content
    </div>
</div>
<div class="sortable container">
    <div class="line">
        content
    </div>
    <div class="line">
        content
    </div>
    <div class="line">
        content
    </div>
    <div class="line">
        content
    </div>
</div>
<div class="sortable container">
    <div class="line">
        content
    </div>
    <div class="line">
        content
    </div>
    <div class="line">
        content
    </div>
    <div class="line">
        content
    </div>
</div> 
```

和js：

```
$(function() {
    $(".sortable").sortable();
    $(".sortable").disableSelection();
}); 
```

这项工作很好 - 我可以拖放“线” div，但我想在“容器” div 之间拖动这个 div。怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T16:34:46.753

jQuery UI 可排序页面有一个关于连接列表的完整示例：http: [//jqueryui.com/demos/sortable/#connect-lists](http://jqueryui.com/demos/sortable/#connect-lists)

从那里提取：

```
<style>
    #sortable1, #sortable2 { list-style-type: none; margin: 0; padding: 0 0 2.5em; float: left; margin-right: 10px; }
    #sortable1 li, #sortable2 li { margin: 0 5px 5px 5px; padding: 5px; font-size: 1.2em; width: 120px; }
</style>
<script>
    $(function() {
        $( "#sortable1, #sortable2" ).sortable({
            connectWith: ".connectedSortable"
        }).disableSelection();
    });
</script>
<div class="demo">

<ul id="sortable1" class="connectedSortable">
    <li class="ui-state-default">Item 1</li>
    <li class="ui-state-default">Item 2</li>
    <li class="ui-state-default">Item 3</li>
    <li class="ui-state-default">Item 4</li>
    <li class="ui-state-default">Item 5</li>
</ul>

<ul id="sortable2" class="connectedSortable">
    <li class="ui-state-highlight">Item 1</li>
    <li class="ui-state-highlight">Item 2</li>
    <li class="ui-state-highlight">Item 3</li>
    <li class="ui-state-highlight">Item 4</li>
    <li class="ui-state-highlight">Item 5</li>
</ul> 
```

# iphone - MKPinAnnotationView 标题

> ID：12626032
> 
> 赞同：1
> 
> 时间：2012-09-27T16:33:25.307
> 
> 标签：iphone, map, mkannotationview, heading

在我的应用程序中，MapView 是动态的，并且由于 Iphone 的方向而更新，如下所示：

```
CLLocationDirection  theHeading = ((locationManager.heading.trueHeading > 0) ?
                                   locationManager.heading.trueHeading :     locationManager.heading.magneticHeading);
[mapView setTransform:CGAffineTransformMakeRotation(-DEGREES_TO_RADIANS(theHeading))]; 
```

如果用户打开 MKPinAnnotationView，我希望这个视图也响应 iphone 标题，所以我还使用了“setTransform:CGAffineTransformMakeRotation”。

每次更新设备标题时，mapview 和 PinAnnotationView 也会更新。问题是，一开始需要 3-4 圈（左右），直到他们的方向变得稳定，在此之前他们有点“狂野”。我希望我以正确的方式解释它

谢谢

# html - 我的 HTML/CSS 电子邮件中的问题

> ID：12626033
> 
> 赞同：0
> 
> 时间：2012-09-27T16:33:26.450
> 
> 标签：html, email, html-email

我知道当我使用 HTML 电子邮件时，我必须使用表格布局。这就是我在[这里](http://jsbin.com/ihuxok/1)所做的不幸的是，当我使用这个[在线工具](http://ctrlq.org/html-mail/)对我的 Hotmail 和 gmail 进行一些测试时，布局并不完全相同。在电子邮件中，与我的[HTML 代码](http://jsbin.com/ihuxok/1/edit)的不同之处在于它在文本中没有获得相同的 H2 字体样式和系列，*`<h2>"Responda correctamente a las preguntas y gane un viaje a Roma!"</h2>`*并且第二张图片与顶部的一张和底部的一张分开。解决问题的最佳解决方案是什么？我怎样才能实现相同的布局？

谢谢你的时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T16:37:04.190

不要依赖外部 ( `<link rel="stylesheet">`) 或嵌入的样式表（包含在`<style>`标签上方的`<body>`标签中）。这是要避免的最重要的事情。许多电子邮件服务会删除正文标签上方的所有内容并禁用外部样式表。也就是说，您可以包含一些嵌入式 CSS 语句（例如链接颜色），只要您同意它们不在某些电子邮件客户端中呈现即可。

品尝这篇文章： http: [//groundwire.org/labs/email-publishing/using-css-and-html-in-email-newsletters](http://groundwire.org/labs/email-publishing/using-css-and-html-in-email-newsletters)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T17:12:25.160

尝试添加`style="display:block;"`到所有 img 标签，而不是 h2 使用带有 style 属性的字体标签：

```
<font style="color:#202020; font-family: 'Georgia',serif; font-size: 14px; line-height: 20px;">
    <b>Some title</b>
</font>
<br> 
```

# homebrew - brew install nginx 链接失败

> ID：12626038
> 
> 赞同：8
> 
> 时间：2012-09-27T16:33:37.430
> 
> 标签：homebrew

我正在尝试使用 brew 包管理器安装 nginx，但它无法链接。我怎样才能解决这个问题？

```
roc-web5537:Downloads cmuench$ brew install nginx
Warning: Your Xcode (4.3.3) is outdated
Please install Xcode 4.5.
==> Installing nginx dependency: pcre
==> Downloading ftp://ftp.csx.cam.ac.uk/pub/software/programming/pcre/pcre-8.31.tar.bz2
Already downloaded: /Library/Caches/Homebrew/pcre-8.31.tar.bz2
==> ./configure --prefix=/usr/local/Cellar/pcre/8.31 --enable-utf8 --enable-unicode-properties --enable-pcregrep-libz --enable-pcregrep-libbz2
==> make test
==> make install
Warning: Could not link pcre. Unlinking...
Error: The `brew link` step did not complete successfully
The formula built, but is not symlinked into /usr/local
You can try again using `brew link pcre'
==> Summary
/usr/local/Cellar/pcre/8.31: 130 files, 3.2M, built in 18 seconds
==> Installing nginx
==> Downloading http://nginx.org/download/nginx-1.2.4.tar.gz
Already downloaded: /Library/Caches/Homebrew/nginx-1.2.4.tar.gz
==> Patching
patching file conf/nginx.conf
==> ./configure --prefix=/usr/local/Cellar/nginx/1.2.4 --with-http_ssl_module --with-pcre --with-ipv6 --with-cc-opt=-I/usr/local/include --with-ld-opt=-L/usr/local/lib --conf-path=/usr/loca
==> make
==> make install
==> Caveats
In the interest of allowing you to run `nginx` without `sudo`, the default
port is set to localhost:8080.

If you want to host pages on your local machine to the public, you should
change that to localhost:80, and run `sudo nginx`. You'll need to turn off
any other web servers running port 80, of course.

You can start nginx automatically on login running as your user with:
  mkdir -p ~/Library/LaunchAgents
  cp /usr/local/Cellar/nginx/1.2.4/homebrew.mxcl.nginx.plist ~/Library/LaunchAgents/
  launchctl load -w ~/Library/LaunchAgents/homebrew.mxcl.nginx.plist

Though note that if running as your user, the launch agent will fail if you
try to use a port below 1024 (such as http's default of 80.)
Warning: Could not link nginx. Unlinking...
Error: The `brew link` step did not complete successfully
The formula built, but is not symlinked into /usr/local
You can try again using `brew link nginx'
Warning: /usr/local/sbin is not in your PATH
You can amend this by altering your ~/.bashrc file
==> Summary
/usr/local/Cellar/nginx/1.2.4: 9 files, 952K, built in 9 seconds 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-02T20:21:01.973

几天前我在安装 Yeoman 时遇到了这个问题。似乎 /usr/local 中的某些文件夹可能不归您所有，这可能会导致问题。就我而言，我在 /usr/local/ 中有几个文件夹。

转到 /usr/local

```
cd /usr/local 
```

检查谁拥有文件夹

```
ls -l 
```

对不属于您的文件夹执行以下操作（显然用子文件夹名称替换子文件夹名称）：

```
sudo chown $(whoami) /usr/local/<sub-foldername> 
```

然后打电话

```
brew link pcre 
```

它应该成功链接。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-06T13:59:43.763

如果已经存在同名的文件（或符号链接），有时会发生这种情况。要强制链接，您可以使用`brew link -f pcre`. 如果要查看是否有阻止链接的文件，可以使用`brew link --dry-run pcre`.

如果没有列出的文件`brew link --dry-run pcre`，则 jwwishart 的答案很可能是正确的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-26T00:04:32.160

我必须手动删除并重新安装 pcre 和 openssl 然后 nginx 才能工作：

```
brew remove pcre
brew remove openssl
brew install pcre
brew install openssl
nginx 
```

# sql-server - 将多个sql数据表加载到单个数据表中，所有表共享一列

> ID：12626039
> 
> 赞同：2
> 
> 时间：2012-09-27T16:33:42.080
> 
> 标签：sql-server, vb.net, merge, datatable, dataset

我有以下 3 个共享唯一 id 列的数据表

```
table1 columns : [catalogid]  [name] [price]

table2 columns : [catalogid]  [stock]

table3 columns : [catalogid]  [minstock] 
```

结果数据表应如下所示

```
result datatable : [catalogid]  [name] [price] [stock] [minstock] 
```

我尝试了该`Datatable.Merge`方法，但它不能正常工作，它没有将 3 个数据表的数据放在同一行中。

我不知道该怎么做

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T16:42:54.487

在一个查询中连接表是一种基于集合的操作数据库非常擅长为您做。如果您的数据源是 SQL 查询，例如，

```
SELECT
                [t1].[catalogid]
              , [t1].[name]
              , [t1].[price]
              , [t2].[stock]
              , [t3].[minstock]
    FROM
              [table1] [t1]
        LEFT JOIN
              [table2] [t2]
                ON [t2].[catalogid] = [t1].[catalogid]
        LEFT JOIN
              [table3] [t3]
                ON [t3].[catalogid] = [t1].[catalogid] 
```

服务器会在返回数据之前给你你想要的。

# ios - 归档应用程序时出现 iOS 代码签名问题

> ID：12626044
> 
> 赞同：0
> 
> 时间：2012-09-27T16:34:00.187
> 
> 标签：ios, code-signing

我试图将我的应用程序的新版本制作为临时分发。但是，不幸的是，我有一个奇怪的错误：

> 配置文件“WL Moon”指定了与当前设置“asap.WeatherApp”不匹配的应用程序标识符“asap.WeatherApp”

我撤销了配置文件，然后再次创建它，但没有任何改变。

使用开发配置文件我没有任何问题，我可以在我的测试 iPhone 上运行应用程序。

有谁能够帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T16:51:02.347

我自己解决了这个问题。

我从 XCode Organizer 清理了我 iPhone 上的所有配置文件。我也重新启动了 XCode。

我认为，问题发生是因为我更改了分发证书（我们向应用程序添加了推送通知），并且在我的设备上有两个同名的不同证书。

# python - pytz 和 astimezone() 不能应用于天真的日期时间

> ID：12626045
> 
> 赞同：56
> 
> 时间：2012-09-27T16:34:02.753
> 
> 标签：python, datetime, timezone, pytz

我有一个日期，我需要让它知道时区。

```
local_tz = timezone('Asia/Tokyo')
start_date = '2012-09-27'
start_date = datetime.strptime(start_date, "%Y-%m-%d")   
start_date = start_date.astimezone(local_tz)

now_utc = datetime.now(timezone('UTC'))
local_now = now_utc.astimezone(local_tz) 
```

我需要确定这是否属实：

```
print start_date>local_now 
```

但我得到这个错误。

```
 start_date = start_date.astimezone(local_tz)
   ValueError: astimezone() cannot be applied to a naive datetime 
```

我毫无问题地将UTC转换为东京。我需要在东京制作 start_date 时区感知广告。

谢谢

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-09-27T16:37:38.633

对于`pytz`时区，使用他们的`.localize()`方法将一个天真的`datetime`对象变成一个带有时区的对象：

```
start_date = local_tz.localize(start_date) 
```

对于没有 DST 转换的时区，将时区附加到天真的对象的[`.replace()`方法](http://docs.python.org/library/datetime.html#datetime.datetime.replace)`datetime`通常也应该有效：

```
start_date = start_date.replace(tzinfo=local_tz) 
```

有关更多详细信息，请参阅 pytz 文档的[本地化时间和日期算法](http://pytz.sourceforge.net/#localized-times-and-date-arithmetic)。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-10-03T16:51:54.757

您可以使用`local_tz.localize(naive_dt, is_dst=None)`将天真的日期时间对象转换为时区感知对象。

```
from datetime import datetime
import pytz

local_tz = pytz.timezone('Asia/Tokyo')

start_date = local_tz.localize(datetime(2012, 9, 27), is_dst=None)
now_utc = datetime.utcnow().replace(tzinfo=pytz.utc)

print start_date > now_utc 
```

`is_dst=None`如果给定的本地时间不明确，则强制 .localize() 引发异常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-06-19T10:11:15.597

如果您使用的是 Django Rest Framework，则可以覆盖 DateTimeField 类，例如：

```
class DateTimeFieldOverridden(serializers.DateTimeField):

def to_representation(self, value):
    local_tz = pytz.timezone(TIME_ZONE)
    value = local_tz.localize(value)
    return super(DateTimeFieldOverridden, self).to_representation(value) 
```

你在你的序列化器中像这样使用它：

```
date_time = DateTimeFieldOverridden(format='%d-%b-%Y', read_only=True) 
```

希望这可以帮助某人。

# jquery - 从网站打开弹出窗口而没有弹出窗口阻止程序捕获它

> ID：12626051
> 
> 赞同：-1
> 
> 时间：2012-09-27T16:34:25.507
> 
> 标签：jquery, popup-blocker

我有一个奇怪的查询，我想打开一个新窗口（弹出窗口），当使用 asp.net、Jquery 关闭浏览器/选项卡时，但我想绕过阻止窗口的弹出窗口阻止程序，谁能帮我这个，当用户关闭浏览器/选项卡或任何其他可以帮助我实现相同功能的替代方法时，我如何打开一个弹出窗口。主要问题是我想忽略弹出窗口阻止程序。在一个[SO Post](https://stackoverflow.com/questions/9514698/bypass-popup-blocker-on-window-open-when-jquery-event-preventdefault-is-set)

我阅读了以下示例可能会有所帮助：

```
jQuery(function($) {
  // This version does work, because the window.open is
  // during the event processing. But it uses a synchronous
  // ajax call, locking up the browser UI while the call is
  // in progress.
  $("#theButton").click(function(e) {
    e.preventDefault();
    $.ajax({
      url:      "http://jsbin.com/uriyip",
      async:    false,
      dataType: "json",
      success:  function() {
        window.open("http://jsbin.com/ubiqev");
      }
    });
  });
}); 
```

我替换了点击事件，`$(window).unload`但这也没有帮助。弹出窗口没有打开，但是当我删除`e.preventDefault();`弹出窗口时会打开，但需要启用弹出窗口阻止程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T16:38:02.633

我认为没有办法绕过弹出窗口阻止程序。

您应该更改方法并尝试在[jQuery UI 模式对话框中](http://jqueryui.com/demos/dialog/#modal)打开内容，而不是使用实际的浏览器窗口弹出窗口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T09:59:18.923

您必须在与 相同的功能内打开窗口`$.ajax`，否则某些浏览器仍会拒绝弹出窗口。

```
jQuery(function($) {
  // This version does work, because the window.open is
  // during the event processing. But it uses a synchronous
  // ajax call, locking up the browser UI while the call is
  // in progress.
  $("#theButton").click(function(e) {
    // use success flag
    var success = false;
    e.preventDefault();
    $.ajax({
      url:      "http://jsbin.com/uriyip",
      async:    false,
      dataType: "json",
      success:  function() {
          success = true; // set flag to true
      }
    });
    if (success) { // and read the flag here
        window.open("http://jsbin.com/ubiqev");
    }
  });
}); 
```

这是确保在`uriyip`加载完成后被调用并弹出一个窗口的唯一可靠方法；所以它冻结了浏览器，太糟糕了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T16:59:14.340

弹出窗口阻止程序旨在防止这种行为。

我建议使用模态窗口而不是实际的浏览器窗口。我不认为这些被阻止是因为它们是在页面本身中打开的。

至于事件......你可以做类似......

```
window.onbeforeunload = function whatever() {
       //Do code here for your modal to show up.
 } 
```

如果您只是想发出警告或您可以做的事情

```
window.onbeforeunload = function showWarning() {
       return 'This is my warning to show';
 } 
```

# mysql - 从mysql中的所有（大约5000个表）表中选择特定数据

> ID：12626052
> 
> 赞同：0
> 
> 时间：2012-09-27T16:34:26.207
> 
> 标签：mysql

在单个数据库中创建大量表是非常糟糕的主意。我现在明白了。所以我想通过创建新的单表来解决这个问题。所以我想将所有表的所有行提取到单个表中。

我到处搜索，但没有解决方案，所以需要帮助

这是我的情况：

每个表都有以下列

```
id
name
flag
poststatus 
```

我可以运行以下查询以从两个表中获取数据：

```
SELECT * FROM table1 WHERE poststatus = '2' UNION SELECT * FROM table2 WHERE poststatus = '2'; 
```

但这仅适用于两个表，我必须对近 5000 个表运行查询。

有没有更好的方法来在单个查询或任何其他想法中获取所有数据..

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T16:55:03.880

执行替换模式和`like`表达式。

```
set group_concat_max_len = 1048576;
select 
    concat('select * from ',
    group_concat(table_name separator ' where poststatus = ''2'' union select * from ')
    ) as query
from information_schema.tables
where table_schema = 'database_name' and table_name like 'table%' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T16:38:53.473

如果您手头有 PHP（如标签所示），您可以创建一个小脚本，为您创建所有 5000 个 SELECT 语句，例如：

```
for($i=1;$i<=5000;$i++)
    $sql.="INSERT INTO combined (name, flag, poststatus) SELECT name, flag, poststatus FROM table".$i." WHERE poststatus=2\n";
file_put_contents('combine.sql', $sql); 
```

后状态 = '2';

# ruby-on-rails - 与 Active Record 的跨数据库连接

> ID：12626061
> 
> 赞同：0
> 
> 时间：2012-09-27T16:35:04.937
> 
> 标签：ruby-on-rails, ruby

我有两个网站，每个网站都连接到自己独特的数据库。我需要在网站“A”中验证网站“B”数据库中是否存在电子邮件地址。我正在按如下方式进行验证：

从网站“A”类调用`AccountController < ApplicationController`：

```
config = YAML::load(File.open("#{RAILS_ROOT}/config/database.yml"))
      ActiveRecord::Base.establish_connection(config["database B"])
      if ActiveRecord::Base.connection.select_values("SELECT "database B".X
          FROM 'database B".X WHERE 'database B'.X.email = @member_email") 
```

当我在我的开发和 QA 环境中测试它时，这个调用有效，但在我的生产环境中失败。在生产中似乎发生的是 ActiveRecord 的值以及`select`get 与当前登录用户的活动记录混合在一起，但仅在生产中。

好的，所以我根据反馈将我的文件修改为以下内容。仍然无法正常工作...有人可以查看下面的文件并查看我缺少哪些步骤吗？谢谢！

谢谢！我认为这就是我所做的，但我创建了“模型”，而且，作为一个新手，我不确定 Rails 是否会正常生成它......

仍然失败，您介意看看以下内容，看看您是否看到我做错了什么？

首先，这是我想在现有应用程序中连接到的第二个数据库的“旧”数据库模型（请注意，执行“文件加载”是我不会出错的唯一方法。）：

```
class MMSDB < ActiveRecord::Base 
```

self.abstract_class = true #important！

config = YAML::load(File.open("#{RAILS_ROOT}/config/database.yml"))

建立连接（配置[“deals_qa”]）

结尾

其次，这是调用“MMSDB”模型的模型（见上文）

```
class Redirect < MMSDB 
```

定义初始化

结尾

# 检查电子邮件地址是否存在于旧数据库中，如果存在，#increment #database table 'members' 上的重定向计数

# 我是否需要以某种方式告诉应用程序我想从哪个表中提取，因为旧数据库（成员）中的表 # 与当前应用程序 #database（用户）中的表不同

def email_exists?(email) if find_by_email(email) user = find_by_email(email) user.redirect_count += 1 user.save end end

结尾

然后这是帐户控制器文件中的代码片段。

```
 else
        if user == Redirect::User.email_exists?(@email)
            @Redirect_Flag = true
        else
            flash.now[:error] = 'Invalid email or password; please try again.'
        end
     end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T18:35:49.827

子类化 ActiveRecord::Base 将允许您与不同的数据库建立多个连接。

```
module DatabaseB
  class Base < ActiveRecord::Base
    @abstract_class = true
    establish_connection(config["database B"])
  end
end

class YourAwesomeModel < DatabaseB::Base
  set_table_name "X"
  # Use your regular active record magic
end 
```

您仍然可以使用通过 ActiveRecord::Base 与主数据库建立连接的其他模型。

# python - 断开连接时的龙卷风内存泄漏

> ID：12626064
> 
> 赞同：12
> 
> 时间：2012-09-27T16:35:07.557
> 
> 标签：python, asynchronous, memory-leaks, tornado

我有一个设置，其中 Tornado 被用作工人的一种传递。Tornado 收到请求，将请求发送给 N 个工作人员，汇总结果并将其发送回客户端。哪个工作正常，除非由于某种原因发生超时 - 然后我有内存泄漏。

我有一个类似于这个伪代码的设置：

```
workers = ["http://worker1.example.com:1234/",
           "http://worker2.example.com:1234/", 
           "http://worker3.example.com:1234/" ...]

class MyHandler(tornado.web.RequestHandler):
    @tornado.web.asynchronous
    def post(self):
        responses = []

        def __callback(response):
            responses.append(response)
            if len(responses) == len(workers):
                self._finish_req(responses)

        for url in workers:
            async_client = tornado.httpclient.AsyncHTTPClient()
            request = tornado.httpclient.HTTPRequest(url, method=self.request.method, body=body)
            async_client.fetch(request, __callback) 

    def _finish_req(self, responses):
        good_responses = [r for r in responses if not r.error]
        if not good_responses:
            raise tornado.web.HTTPError(500, "\n".join(str(r.error) for r in responses))
        results = aggregate_results(good_responses)
        self.set_header("Content-Type", "application/json")
        self.write(json.dumps(results))
        self.finish()

application = tornado.web.Application([
    (r"/", MyHandler),
])

if __name__ == "__main__":
    ##.. some locking code 
    application.listen()
    tornado.ioloop.IOLoop.instance().start() 
```

我究竟做错了什么？内存泄漏从何而来？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T07:39:36.993

我不知道问题的根源，似乎 gc 应该可以解决它，但是您可以尝试两件事。

第一种方法是简化一些引用（看起来可能还有`responses`对 RequestHandler 完成时的引用）：

```
class MyHandler(tornado.web.RequestHandler):
    @tornado.web.asynchronous
    def post(self):
        self.responses = []

        for url in workers:
            async_client = tornado.httpclient.AsyncHTTPClient()
            request = tornado.httpclient.HTTPRequest(url, method=self.request.method, body=body)
            async_client.fetch(request, self._handle_worker_response) 

    def _handle_worker_response(self, response):
        self.responses.append(response)
        if len(self.responses) == len(workers):
            self._finish_req()

    def _finish_req(self):
        .... 
```

如果这不起作用，您始终可以手动调用垃圾收集：

```
import gc
class MyHandler(tornado.web.RequestHandler):
    @tornado.web.asynchronous
    def post(self):
        ....

    def _finish_req(self):
        ....

    def on_connection_close(self):
        gc.collect() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T07:33:48.840

代码看起来不错。泄漏可能在 Tornado 内部。

我只是偶然发现了这一行：

```
async_client = tornado.httpclient.AsyncHTTPClient() 
```

你知道这个构造函数中的实例化魔法吗？从文档：

```
"""
The constructor for this class is magic in several respects:  It actually
creates an instance of an implementation-specific subclass, and instances
are reused as a kind of pseudo-singleton (one per IOLoop).  The keyword
argument force_instance=True can be used to suppress this singleton
behavior.  Constructor arguments other than io_loop and force_instance
are deprecated.  The implementation subclass as well as arguments to
its constructor can be set with the static method configure()
""" 
```

所以实际上，您不需要在循环内执行此操作。（另一方面，它不应该造成任何伤害。）但是您使用的是哪个实现 CurlAsyncHTTPClient 或 SimpleAsyncHTTPClient？

如果是 SimpleAsyncHTTPClient，请注意代码中的这条注释：

```
"""
This class has not been tested extensively in production and
should be considered somewhat experimental as of the release of
tornado 1.2\. 
""" 
```

您可以尝试切换到 CurlAsyncHTTPClient。或者按照 Nikolay Fominyh 的建议跟踪对 __callback() 的调用。

# android - 未找到 JNI_OnLoad 跳过初始化 > 应用程序关闭

> ID：12626067
> 
> 赞同：15
> 
> 时间：2012-09-27T16:35:20.047
> 
> 标签：android, android-ndk, java-native-interface

伙计们，

我正在开发一个需要第三方 .so 库的 android 应用程序。我按照他们的说明构建了这个第三方库（使用 ndk-build），然后希望将这个 .so 包含到我的 Android 项目中。

因此，我按照 docs/PREBUILTS.html 中描述的步骤，在 jni/prebuilt 目录中成功构建了新的 .so。现在我尝试通过在一个简单的测试 android 应用程序中使用 .so 工具来利用它。所以我要做的是：

```
static {
  Log.i("load so > ","load so");
  System.loadLibrary("xyz");
   }
/* The native functions */
private static native int openFile(String filename);

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    try{
        String path =  getPathForDownloadDirectoryFile();
        Log.i("file path> ", path);
        int num= openFile(path);
    }catch(Exception e){
        Log.e(">", "could not open the file");
    }
} 
```

现在，当我运行我的应用程序时，我收到一条调试消息：No JNI_OnLoad found in /data/data/com.example.myfirstapp/lib/xyz.so 0x411e6738，跳过初始化然后应用程序关闭。

有关更多信息，这是错误日志：

```
No JNI_OnLoad found in /data/data/com.example.mysecondapp/lib/xyz.so 0x411e67a0,   skipping init
W/dalvikvm(  570): No implementation found for native    Lcom/example/mysecondapp/MainActivity;.openFile:(Ljava/lang/String;)I
D/AndroidRuntime(  570): Shutting down VM
W/dalvikvm(  570): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
E/AndroidRuntime(  570): FATAL EXCEPTION: main
E/AndroidRuntime(  570): java.lang.UnsatisfiedLinkError: Native method not found:  com.example.mysecondapp.MainActivity.openFile:(Ljava/lang/String;)I
E/AndroidRuntime(  570):    at com.example.mysecondapp.MainActivity.openFile(Native  Method)
E/AndroidRuntime(  570):    at   com.example.mysecondapp.MainActivity.onCreate(MainActivity.java:31)
E/AndroidRuntime(  570):    at android.app.Activity.performCreate(Activity.java:5008)
E/AndroidRuntime(  570):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
E/AndroidRuntime(  570):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
E/AndroidRuntime(  570):    at    android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
E/AndroidRuntime(  570):    at android.app.ActivityThread.access$600(ActivityThread.java:130)
E/AndroidRuntime(  570):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
E/AndroidRuntime(  570):    at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(  570):    at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(  570):    at android.app.ActivityThread.main(ActivityThread.java:4745)
E/AndroidRuntime(  570):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(  570):    at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(  570):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
E/AndroidRuntime(  570):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
E/AndroidRuntime(  570):    at dalvik.system.NativeStart.main(Native Method)
W/ActivityManager(  146):   Force finishing activity com.example.mysecondapp/.MainActivity 
```

正如我所看到的，未找到 openFile() 方法的本机实现，但相同的 xyz.so lib 与第三方的原始示例应用程序一起工作得非常好。我几乎是 Android-ndk 世界的初学者。

Java-Android-NDK Ninjas ..猜猜我可能会错过什么？我将非常感谢这里的任何帮助:)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-27T17:05:32.897

正如 Guycole 所说，“No JNI_OnLoad”只是一个警告，你的问题出在其他地方。

正如您提到的，您成功编译了“so”文件，问题可能在于您的 c/C++ 代码中的函数签名，它应该是这样的

```
JNIEXPORT jint JNICALL Java_com_your_package_class_method(JNIEnv *d, jobject e, jstring f)
{
//some action

} 
```

函数签名来自使用 javah 工具生成的头文件。您需要生成头文件并将函数签名与您的包名称一起使用。对于不同的包名和类名，头文件和相应的函数签名会发生变化。

```
worked pretty neat with the original sample app from the third party 
```

这可能是它在示例应用程序而不是您的应用程序上运行的原因。

参考：[https ://thenewcircle.com/s/post/49/using_ndk_to_call_c_code_from_android_apps](https://thenewcircle.com/s/post/49/using_ndk_to_call_c_code_from_android_apps)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-27T16:46:44.590

“No JNI_OnLoad”消息只是一个警告。JNI_OnLoad 是一个可选的初始化钩子。

我猜您的问题出在 openFile() 方法中。尝试从 Java 中注释掉调用，看看你能走多远。

[我在http://guycole.blogspot.com/2012/03/yet-another-android-ndk-blog-posting.html](http://guycole.blogspot.com/2012/03/yet-another-android-ndk-blog-posting.html)上有一篇关于 JNI 的博客文章和一些示例代码- 也许你会发现它很有用。

祝你好运。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T11:51:15.313

它还附带此日志

> ??-?? ??:??:??.???: INFO/(): java.lang.UnsatisfiedLinkError: 无法加载*** : findLibrary 返回 null

对？？

我认为这是 android.mk 文件的问题。1：尝试切换到armabi v7。2：加载函数会调用open()。检查so的许可。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-29T10:05:32.187

如前面的答案所述，No JNI_OnLoad 只是一个警告。

我有类似的问题，我认为问题是因为文件操作。

我的应用程序没有外部存储写入权限。在清单中添加以下代码后，它工作正常

# ruby-on-rails - 如何将数据库对象作为哈希返回

> ID：12626068
> 
> 赞同：0
> 
> 时间：2012-09-27T16:35:21.497
> 
> 标签：ruby-on-rails, ruby-on-rails-3

为什么我的应用程序返回`@users = User.where(acceptance: true)`为`#<User:0x007f9b0d444328>`？

当控制台返回与以下相同的查询时：

`[#<User id: 1, acceptance: "t", created_at: "2012-09-27 13:01:50", updated_at: "2012-09-27 13:02:52">]`

我希望用户作为哈希传递给这种东西：

```
respond_to do |format|
  format.html
  format.csv { render text: @users.to_csv }
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T17:09:47.443

```
@user.attributes
@users.map { |user| user.attributes } 
```

这是数据库中字段的 ruby​​ 哈希。然后由您决定将其编码为 JSON 或 CSV。

# jira - 如何在 JIRA 中按“状态 ID”而不是“按标签”排序任务？

> ID：12626069
> 
> 赞同：0
> 
> 时间：2012-09-27T16:35:26.643
> 
> 标签：jira

有人知道如何在 JIRA 中按“状态 ID”而不是“按标签”来排序任务吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-23T19:28:09.450

您无法使用 Jira 的搜索界面按状态 ID 进行搜索。使用 JQL 通过 Web 界面只能搜索可导航字段，而 statusID 不是其中之一......

# c# - 403 禁止：Asp.net MVC

> ID：12626078
> 
> 赞同：2
> 
> 时间：2012-09-27T16:36:05.427
> 
> 标签：c#, asp.net, asp.net-mvc, iis, http-status-code-403

我正在编写一个 Web 应用程序，它必须从另一个网站下载用户个人资料图片并将这些图片存储在 Web 服务器中。我有下载功能，但是当我试图在网络浏览器中显示该图片时，图片没有显示，我发现对于来自浏览器的文件请求，我的服务器正在给出

```
403 Forbidden 
```

这是权限问题吗？如何从我的应用程序中提供这些图片？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T17:15:56.453

IIS 不允许从 App_Data 文件夹中读取文件。一个简单的选项将个人资料图片存储在其他文件夹中。

[上传图片 - 安全](https://stackoverflow.com/questions/4978932/uploading-images-security)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T16:37:52.593

这是一个权限问题。确保您保存文件的位置至少对每个人都具有读取权限，以便浏览该站点的人可以看到它。

# php - 您应该在使用 CloudFlare 的 PHP 站点上使用哪些缓存标头，以便“始终在线”工作？

> ID：12626079
> 
> 赞同：5
> 
> 时间：2012-09-27T16:36:05.677
> 
> 标签：php, caching, browser-cache, cloudflare

您应该使用 CloudFlare 在您的 PHP 站点上使用哪些缓存标头，以便“[始终在线](http://blog.cloudflare.com/always-online-v2)”工作并且您的图像被他们的 CDN 缓存？

CloudFlare 的文档很糟糕，他们的支持团队似乎并不知道。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T01:29:05.173

如果您希望 Always Online（以及我们的许多缓存）正常工作，您肯定不希望有无缓存和私有标头。

“你的图片被他们的 CDN 缓存了？” 我们通过文件扩展名自动缓存现场资源（显然，我们不会缓存场外资源，例如 Flickr 或 Facebook 小部件）。

注意：Always Online 确实有一些限制，我们的文档（服务器响应代码等）中概述了所有这些限制。如果您只是最近才将该站点添加到 CloudFlare，那么缓存中将不会显示任何内容（Always Online 爬虫会在特定时间退出）。

Always Online 的未来迭代将允许用户“固定”特定页面，这将（希望）消除我们目前的一些限制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T23:53:40.727

通常，您不需要做任何事情——大多数“正常”的 Web 服务器将使用适当的静态缓存标头提供静态内容。但是，如果您指定自己的或由于某种原因您的服务器正在发送导致静态内容不被缓存的标头，您将需要覆盖或删除任何阻止内容被缓存的标头。

使用可以查看内容标题的程序（Firefox 中 Firebug 的“Net”选项卡，网站[http://web-sniffer.net/](http://web-sniffer.net/)或类似网站）查看您的内容当前具有哪些标题。检查诸如“Cache-Control”和“Expires”之类的东西。如果内容具有阻止缓存或已经过期的缓存控制标头，这可能会阻止 Cloudflare（和任何其他缓存）缓存它，您将需要删除或更改它们。

作为一个非常普遍的规则，要允许缓存某些内容，请指定将来某些内容的 Expires 时间，以及具有 max-age=某个时间的 public 的 Cache-Control，但是您发送的标头将取决于你在服务什么，你使用什么服务器，客户端是什么，等等。

无需学习和理解各种缓存标头的最简单方法可能是使用[http://web-sniffer.net/](http://web-sniffer.net/)之类的东西来查看缓存的其他内容，然后复制其标头。例如，[http://web-sniffer.net/?url=ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js](http://web-sniffer.net/?url=ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js)

请注意，根据我的经验，Always Online 通常不起作用。

```
// set the most basic caching headers in PHP (cache for 1 month)
header('Cache-Control: public');
header('Expires: '.gmdate('D, d M Y H:i:s', strtotime('+1 month')).' GMT'); 
```

有关简要说明，请参阅[http://hardanswers.net/dynamic-webpage-caching](http://hardanswers.net/dynamic-webpage-caching)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T21:14:19.040

使用“公共”作为缓存控制对我来说是个问题，因为我的大多数页面都是非常动态的（网上商店）。这就是为什么我只告诉 CloudFlare 进行缓存。

Cloudflare 使用[Mozilla/5.0（兼容；CloudFlare-AlwaysOnline/1.0；+http://www.cloudflare.com/always-online）](http://www.cloudflare.com/always-online)作为用户代理。您可以告诉 CloudFlare 使用 PHP 或 .htaccess 缓存您的页面（请参阅 Ned Martin 的解决方案），但告诉其他访问者不要缓存您的页面。

# ios - 在 iOS 上嵌入 webkit-transform 比例的 Youtube iframe

> ID：12626080
> 
> 赞同：4
> 
> 时间：2012-09-27T16:36:07.273
> 
> 标签：ios, iframe, webkit, youtube, css-transforms

我会喜欢在嵌入式 youtube iframe 上为移动用户使用 -webkit-transform scale()。但是，如果您在 iOS 上访问[http://jsfiddle.net/tKbHz/9/，iframe](http://jsfiddle.net/tKbHz/9/)的缩放会有些奇怪。Chrome 或桌面 Safari (Mac) 中并非如此。我相信我在 youtube 中发现了一个错误 - 因为其他 iframe 似乎表现正常。有人经历过这个或知道修复吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T14:03:49.990

移动设备上的 youtube 视频不只是转到媒体播放器吗？

# php - Wordpress 元标记说明

> ID：12626081
> 
> 赞同：1
> 
> 时间：2012-09-27T16:36:08.023
> 
> 标签：php, wordpress, meta-tags

我需要为输入到 WP 的每个元标记附加一个描述行。例如：

标签：狗，猫，牛，附在一些帖子上

会成为：

```
dog - spoiled domestic animal
cat - doesn't care about me
cow - has brown spots 
```

目的是在搜索到的标签下方显示描述行。即：www.wordpressite.com/tag/dog/

会显示：

```
TAG
TAG DESCRIPTION
RESULTS 
```

老实说，我不知道从哪里开始，除了创建一个名为“tag_description”的额外数据库字段的插件，并在管理部分创建某种“标签管理区域”，但这将是我的最后选择。有没有更简单的方法？

任何帮助表示赞赏！

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T18:20:43.880

WordPress为每个添加的术语/分类单元内置了“标签”、“类别”和自定义“分类法”的**描述。**

您可以使用 API 函数`tag_description()`，或较低级别的 API fn [`term_description()`](http://queryposts.com/function/tag_description/)。

# java - 读取文本文件会给出 ArrayIndexOutOfBoundsException

> ID：12626083
> 
> 赞同：0
> 
> 时间：2012-09-27T16:36:08.277
> 
> 标签：java, file-io, postfix-notation

我正在尝试将此 .txt 文件读入我的程序（作为对手动输入的改进），但我无法将我的方法转换为接受输入 txt 文件。我在“infix[--pos]='\0';”行得到了一个 arrayindexoutofboundsexception

```
class Functions {
    void postfix(char infix[], char post[]) {
        int position, und = 1;
        int outposition = 0;
        char topsymb = '+';
        char symb;
        Stack opstk = new Stack();
        opstk.top = -1;
        for (position = 0; (symb = infix[position]) != '\0'; position++) {
            if (isoperand(symb))
                post[outposition++] = symb;
            else {
                if (opstk.isempty() == 1)
                    und = 1;
                else {
                    und = 0;
                    topsymb = opstk.pop();
                }
                while (und == 0 && precedence(topsymb, symb) == 1) {
                    post[outposition++] = topsymb;
                    if (opstk.isempty() == 1)
                        und = 1;
                    else {
                        und = 0;
                        topsymb = opstk.pop();
                    }
                }// end while
                if (und == 0)
                    opstk.push(topsymb);
                if (und == 1 || (symb != ')'))
                    opstk.push(symb);
                else
                    topsymb = opstk.pop();
            }// end else
        }// end for
        while (opstk.isempty() == 0)
            post[outposition++] = opstk.pop();
        post[outposition] = '\0';
    }// end postfix function

    int precedence(char topsymb, char symb) {
        /* check precedence and return 0 or 1 */
        if (topsymb == '(')
            return 0;
        if (symb == '(')
            return 0;
        if (symb == ')')
            return 1;
        if (topsymb == '$' && symb == '$')
            return 0;
        if (topsymb == '$' && symb != '$')
            return 1;
        if (topsymb != '$' && symb == '$')
            return 0;
        if ((topsymb == '*' || topsymb == '/') && (symb != '$'))
            return 1;
        if ((topsymb == '+' || topsymb == '-') && (symb == '-' || symb == '+'))
            return 1;
        if ((topsymb == '+' || topsymb == '-') && (symb == '*' || symb == '/'))
            return 0;
        return 1;
    } /* end precedence function */

    private boolean isoperand(char symb) {
        /* Return 1 if symbol is digit and 0 otherwise */
        if (symb >= '0' && symb <= '9')
            return true;
        else
            return false;
    }/* end isoperand function */

}

public class Driver {
    public static void main(String[] args) throws IOException {
        Functions f = new Functions();
        char infix[] = new char[80];
        char post[] = new char[80];
        int pos = 0;
        char c;
        System.out.println("\nEnter an expression is infix form : ");

        try {
            BufferedReader in = new BufferedReader(new FileReader("infix.txt"));
            String str;
            while ((str = in.readLine()) != null) {
                infix = str.toCharArray();
            }
            in.close();
        } catch (IOException e) {
        }

        infix[--pos] = '\0';
        System.out.println("The original infix expression is : ");
        for (int i = 0; i < pos; i++)
            System.out.print(infix[i]);
        f.postfix(infix, post);
        System.out.println("\nThe postfix expression is : ");
        for (int i = 0; post[i] != '\0'; i++)
            System.out.println(post[i]);

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T16:50:38.010

永远不应该这样做：

```
try {
...
} catch (IOException e) {
} 
```

您丢失了有关代码运行的一些基本信息。

至少您应该打印堆栈跟踪以跟踪调查：

```
e.printStackTrace(); 
```

您可能有 FileNotFound 异常。

此外，您尝试将数组索引为 -1 in `infix[--pos]`，在此语句之前将 pos 设置为 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T17:24:14.017

1) 完全放在一边，但我认为 main 中的行应该是：System.out.println("\nEnter an expression in infix form : "); 2) 同样，我同意 catch 声明。您已经将其缩小为 IOExcpetion，但是您可以通过在 catch System.err.println(e.getMessage()); 中打印以下内容来找到更多信息。或 e.printStackTrace()

**现在回答你的问题。**您正在将 pos 初始化为值 0，但是您正在 infix[--pos] = '\0'; 行上执行 PREINCREMENT 所以 pos 变为 -1（显然超出了数组边界的范围）。

我认为您想将其更改为后增量中缀 [pos--] = '\0';。也许？

是的，你的代码看起来像 C ......

# drupal-7 - drupal 7 make 字段在 form_user_profile_form_alter 中是必需的

> ID：12626086
> 
> 赞同：1
> 
> 时间：2012-09-27T16:36:17.393
> 
> 标签：drupal-7, drupal-modules

我使用 Drupal 7.x。我在用户配置文件表单中添加了几个字段。

在注册时我不需要它们，但在第一次登录时必须填写。我不能使用 Profile2 模块。

在我的模块中：

```
function mymodule_form_user_profile_form_alter(&$form, &$form_state) {      
          $form['field_test_field']['#required'] = 'TRUE';   
} 
```

该函数被触发，但不要使其成为必需。

我也试过：

```
$form['field_test_field'][0]['#required'] = 'TRUE';  
$form['#field_info']['field_test_field']['required'] = '1'; 
```

如何使`user_profile_form` 表单中的必填字段更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T16:34:32.663

以下示例可用于文本字段：

`$form['field_full_name'][LANGUAGE_NONE]['0']['value']['#required'] = TRUE;`

第二个示例是电子邮件字段：

`$form['field_custom_email_address'][LANGUAGE_NONE]['0']['email']['#required'] = TRUE;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T17:30:44.590

您当前正在将 #required 设置为字符串（使用单引号），而不是它需要的布尔值。试一试`$form['field_test_field']['#required'] = true;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T06:11:29.953

我找到了解决方案：[How to disable a field or make it readonly in Drupal 7](https://stackoverflow.com/questions/5399380/how-to-disable-a-field-or-make-it-readonly-in-drupal-7)

```
$form['field_secured_title']['und']['0']['value']['#attributes']['disabled'] = TRUE; 
```

这行得通。

但是，如果我使用多语言，它仍然可以工作吗？

对不起我的英语不好。

# scala - 如何在 SBT 中的项目之间共享资源

> ID：12626089
> 
> 赞同：7
> 
> 时间：2012-09-27T16:36:29.490
> 
> 标签：scala, sbt, xsbt-web-plugin

我正在工作的项目是[Lift](http://liftweb.net/) Framework 上的一个 webapp。我们也在使用[xsbt 网络插件](https://github.com/siasia/xsbt-web-plugin)。有一个“核心”项目，其中包含绝大多数功能；我当前的目标是创建两个“分发”项目，将一组不同的类路径资源添加到“核心”项目。问题是我要么 1) 无法运行“分发”项目，要么 2) 让它们运行，但所需的资源似乎不存在。

**我试过的**

这是我的删节版`project/Build.scala`：

```
lazy val core = Project("Core", file("core"))
  .settings( /*some dependencies, resolvers, webSettings */ )

lazy val app1 = Project("App1", file("app1"))
  .aggregate(core)
  .settings( /*the same settings as core */ )

lazy val app2 = Project("App2", file("app2"))
  .aggregate(core)
  .settings( /*the same settings as core*/ ) 
```

然后在 和 的目录结构中`app1`，`app2`我在`src/main/resources/aFileINeed`. 核心应用程序正在使用`class.getResource`从类路径加载文件的方法。

**问题**

如果我尝试使用 运行其中一个分发项目，`container:start`它不会在类路径中检测到所需的文件。此外，它声称这`src/main/webapp`不是现有目录（该文件夹包含在核心项目中，因为它是 xsbt Web 插件所必需的）。

**我怎样才能让这些项目“合并”他们的资源？**我希望在项目定义中使用`aggregate`or可以为我处理这个问题，但显然没有。`dependsOn``Build.scala`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-04T02:14:28.453

这就是我正在做的事情。我在项目的根目录中创建了一个全局“资源”目录，然后是以下变量：

```
 lazy val globalResources = file("resources") 
```

然后在每个项目的设置中：

```
 unmanagedResourceDirectories in Runtime += globalResources 
```

对于使用 xsbt-web-plugin 或其他导入它的库的项目，您必须使用更强的

```
 unmanagedResourceDirectories in Compile += globalResources 
```

请注意，使用此解决方案，您的项目可能会有多个资源目录，如果您两次定义同一个文件，AFAIK`compile:copy-resources`会生您的气。

# cuda - 为什么没有为双打实现 atomicAdd？

> ID：12626096
> 
> 赞同：35
> 
> 时间：2012-09-27T16:37:08.953
> 
> 标签：cuda

为什么`atomicAdd()`双打没有明确地作为 CUDA 4.0 或更高版本的一部分实现？

在[CUDA 编程指南 4.1](http://developer.download.nvidia.com/compute/DevZone/docs/html/C/doc/CUDA_C_Programming_Guide.pdf)的附录 F 第 97 页中，已经实现了 atomicAdd 的以下版本。

```
int atomicAdd(int* address, int val);
unsigned int atomicAdd(unsigned int* address,
                       unsigned int val);
unsigned long long int atomicAdd(unsigned long long int* address,
                                 unsigned long long int val);
float atomicAdd(float* address, float val) 
```

同一页面继续给出了一个用于双打的 atomicAdd 的小实现，如下所示，我刚刚开始在我的项目中使用它。

```
__device__ double atomicAdd(double* address, double val)
{
    unsigned long long int* address_as_ull =
                             (unsigned long long int*)address;
    unsigned long long int old = *address_as_ull, assumed;
    do {
        assumed = old;
old = atomicCAS(address_as_ull, assumed,
                        __double_as_longlong(val +
                               __longlong_as_double(assumed)));
    } while (assumed != old);
    return __longlong_as_double(old);
} 
```

为什么不将上述代码定义为 CUDA 的一部分？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-09-27T23:59:23.287

编辑：从 CUDA 8 开始，双精度`atomicAdd()`在 CUDA 中实现，并在 SM_6X (Pascal) GPU 中提供硬件支持。

~~`atomicAdd`目前，硬件中不支持任何 CUDA 设备`double`。~~正如您所指出的，它可以根据`atomicCAS`64 位整数来实现，但这样做会带来不小的性能成本。

因此，CUDA 软件团队选择记录正确的实现作为开发人员的一个选项，而不是将其作为 CUDA 标准库的一部分。这样，开发人员就不会在不知不觉中选择他们不了解的性能成本。

旁白：我认为这个问题不应该以“不具建设性”的方式结束。我认为这是一个完全有效的问题，+1。

# css - 链接填满整个页面

> ID：12626101
> 
> 赞同：1
> 
> 时间：2012-09-27T16:37:34.737
> 
> 标签：css

我有一个按钮，它是一个链接，在 CSS 中定义了一个背景图像。该链接是不可见的，并且没有文本，因为按钮具有所有图形。我的问题是链接（不是图像，只是不可见的链接）以 100% 的宽度扩展并填满整个屏幕，除了高度。

完整的样式表。不要介意某些类和 ID，它们是用于其他页面的！

```
 body {
background-image: url("background.jpg");
font: 0.9em verdana, sans-serif;
}
#Upload {
    width: 30em;
    margin:auto;
    margin-top:10%;
    padding:0 3em 2em 2em ;
    border:1px solid #bbb;
    color: #333;
    background:white;
    font: 0.9em verdana, sans-serif;
    border-radius:10px;
}
#Upload label{
    float: left;
    width: 7em;
}
#Upload  a:link {
text-decoration:none;
font-size: 15px;
color:grey;
}#Upload  a:hover{
text-decoration:none;
font-size: 15px;
}
#Upload a:visited {
text-decoration:none;
color: black;
font-size: 15px;
}

.image{
background-color: white;
margin:auto;
border: 3px solid #bbb;
border-radius:10px;
}
.container{
width:100%;
}
a {
font-weight: bold;
text-decoration: none;
}
.button_skip{
background-image:url('button_upload.jpg');
background-repeat: no-repeat;
border-radius:10px;
border: 1px solid black;
width:190px;
height: 35px;
text-align: center;
line-height: 35px;
color:black;
margin:auto;
position:relative;
}
.button_home{
background-image:url('button_upload.jpg');
background-repeat: no-repeat;
border-radius:10px;
border: 1px solid black;
width:190px;
height: 35px;
text-align: center;
line-height: 35px;
color:black;
margin:auto;
position:relative;
}
.button_upload{
background-image:url('upload.png');
background-repeat: no-repeat;
width:272px;
height:107px;
border: 3px solid black;
border-radius:20px;
overflow:hidden;
}
.box{
width:272px;
display:BLOCK;
}

HTML (includes some php, it might cause the problem, dunnae)
<!DOCTYPE HTML>
<html>
<head>
<title>derp</title>
    <script src="cookie_image.js" type="text/javascript"></script>
    <script type="text/javascript">
    document.onReady=function(){
    setCookie("cookie_image",
    };
    </script>
    <link rel="stylesheet" type="text/css" href="stylesheet.css">   
</head>
<body>
<?php
function getImagesFromDir($path) { 
    $images = array(); 
    if ( $img_dir = @opendir($path) ) { 
        while ( false !== ($img_file = readdir($img_dir)) ) { 
            // checks for gif, jpg, png 
            if ( preg_match("/(\.gif|\.jpg|\.png)$/", $img_file) ) { 
                $images[] = $img_file; 
            } 
        } 
        closedir($img_dir); 
    } 
    return $images; 
} 

function getRandomFromArray($ar) { 
    // Hvis der ikke er vist billeder før er cookien ikke sat, så vi sætter den og returnerer
    if ( ! array_key_exists('cookie_image', $_COOKIE)) {
        $num = array_rand($ar);
        // Husk lige at sætte cookie, ups
        setcookie("cookie_image", $num, time() + 86400);
        return $ar[$num];
    }
    // Hvis cookie er sat har billeder været vist før så vi får ingen fejl
    mt_srand( (double)microtime() * 1000000 ); // php 4.2+ not needed 
    $num = array_rand($ar); 
    $last_image = explode(",", $_COOKIE["cookie_image"]);
    if (is_array($last_image)==false){
        $last_image = array(""); // HER DET ARRAY DER BLIVER GENERATED SOM LAVER EN ERROR HVIS DER IKKE ER NOGET I
    }
    while(sizeof ($last_image)< sizeof ($ar) and in_array($num, $last_image)){
        $num = array_rand($ar);
    } 
    if (sizeof ($last_image)< sizeof ($ar)) {
        array_push($last_image, $num);
    } else {
        $last_image = array();
    }
    setcookie("cookie_image", implode (",", $last_image), time() + 86400);
    //setcookie("cookie_image", "", time()+86400);
    return $ar[$num]; 
} 

///////////////////////////////////////////////////////////////////// 
// This is the only portion of the code you may need to change. 
// Indicate the location of your images  

$root = ''; 
// use if specifying path from root 
//$root = $_SERVER['DOCUMENT_ROOT']; 

$path = 'uploaded_files/'; 

// End of user modified section  
///////////////////////////////////////////////////////////////////// 

// Obtain list of images from directory  
$imgList = getImagesFromDir($root . $path); 
$img = getRandomFromArray($imgList); 
?>
<div class="container">

        <div class="button_upload_box">
<a href="upload.php" target="_self">
<div class="button_upload">
</div>
</a>

<div>
        <center><br><br>
<img style="max-width:600px; max-height:300px; min-width=100px; min-height:10px;" class="image" src="<?php echo $path . $img ?>" alt="Derp">
<br><br><br><br><br><br>
        </center>
        </div>
        <a href="index.php" target="_self">
        <div class="button_skip">
        Skip this image
        </div>
</a>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T17:09:53.633

很明显，我提交的前两个不是你想要的，但我认为这是你想要做的：

[http://jsfiddle.net/Mutmatt/dBPnf/31/](http://jsfiddle.net/Mutmatt/dBPnf/31/)

顶部文字：

[http://jsfiddle.net/Mutmatt/dBPnf/46/](http://jsfiddle.net/Mutmatt/dBPnf/46/)

# gcc - libxxx.so.N 后面的数字代表什么？

> ID：12626102
> 
> 赞同：0
> 
> 时间：2012-09-27T16:37:36.423
> 
> 标签：gcc, linker, shared-libraries

我试图链接到一个 swiftkey 库并得到这个错误：

```
g++ test.cpp -I include/swiftkeysdk/ -L lib/x86/ -lswiftkeysdk-cpp

/usr/bin/ld: warning: libm.so.2, needed by lib/x86//libswiftkeysdk-cpp.so, not found (try using -rpath or -rpath-link)
/usr/bin/ld: warning: libcpp.so.4, needed by lib/x86//libswiftkeysdk-cpp.so, not found (try using -rpath or -rpath-link)
/usr/bin/ld: warning: libc.so.3, needed by lib/x86//libswiftkeysdk-cpp.so, not found (try using -rpath or -rpath-link)

$ ldconfig -p | grep "libm.so"
libm.so.6 (libc6, OS ABI: Linux 2.6.15) => /lib/i386-linux-gnu/libm.so.6
libm.so (libc6, OS ABI: Linux 2.6.15) => /usr/lib/i386-linux-gnu/libm.so
$ ldconfig -p | grep "libc.so"
libc.so.6 (libc6, OS ABI: Linux 2.6.15) => /lib/i386-linux-gnu/libc.so.6 
```

但我的 g++ 与其他项目配合得很好。有人知道 .so 后面的数字代表什么吗？以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T16:46:35.953

后面`.so`的数字是库的版本号。版本号定义库的 ABI。也就是说，不同版本的源代码可能使用相同的so编号，只要它们的二进制接口是可互换的。

有关更多信息，请参阅[https://unix.stackexchange.com/questions/475/how-do-so-shared-object-numbers-work](https://unix.stackexchange.com/questions/475/how-do-so-shared-object-numbers-work)

libc.so.3 在 Linux 中非常不可用。你从哪里得到 libswiftkeysdk-cpp.so 的？

# jquery - 点击事件要么适用于所有 li 元素，要么不适用于任何 li 元素

> ID：12626105
> 
> 赞同：0
> 
> 时间：2012-09-27T16:37:37.497
> 
> 标签：jquery, html

我对 jQuery 世界完全陌生。我正在尝试为 div 中的不同`li`元素的单击事件设置动画样式`menu`。

请首先概述我的代码，以便我可以向您解释我的问题。

HTML 代码：

```
<div id="container">

<div id="outer_div">
<div id="image_div"></div>
<div id="menu">
<ul id="nav">
    <li id="nav1"><a href="">News & Events</a></li>
    <li id="nav2"><a href="">Facilities</a></li>
    <li id="nav3"><a href="">Research</a></li>
    <li id="nav4"><a href="">Programmes</a></li>
    <li id="nav5"><a href="">Faculty</a></li>
</ul>
</div>
<div id="popup_menu">
     <ul>
     <li><a href="">abc</a></li>
   <li><a href="">abc</a></li>
   <li><a href="">abc</a></li>
   <li><a href="">abc</a></li>
   </ul>
</div>
</div>
</div> 
```

我的 jQuery 代码是：

```
$(window).load(function(){

$("#popup_menu").fadeIn()
.css({left:-300,position:'absolute',opacity:0})
.animate({left:0,opacity:1.0}, 1000, function() {
//callback
});
});

$("nav1").click(function(){
$("#popup_menu").fadeIn()
.css({left:-300,position:'absolute',opacity:0})
.animate({left:0,opacity:1.0}, 1000, function() {
//callback });

$("nav2").click(function(){
$("#popup_menu").fadeIn()
.css({left:-300,position:'absolute',opacity:0})
.animate({left:0,opacity:1.0}, 1000, function() {
//callback});

 $("nav3").click(function(){
$("#popup_menu").fadeIn()
.css({top:-300,position:'absolute',opacity:0})
.animate({top:0,opacity:1.0}, 1000, function() {
//callback});

$("nav4").click(function(){
$("#popup_menu").fadeIn()
.css({right:-300,position:'absolute',opacity:0})
.animate({right:0,opacity:1.0}, 1000, function() {

$("popup_div").css(right:0);
$("#image_div").css({left:0,top:0});  });

$("nav5").click(function(){
$("#popup_menu").fadeIn()
.css({right:-300,position:'absolute',opacity:0})
.animate({right:0,opacity:1.0}, 1000, function() {
//callback });
}); 
```

我在这里面临的问题是，对于所有`li`元素，都会调用 click 事件处理程序`$("nav1").click(function()`。*只有当我注释掉 nav2、nav3、nav4、nav5 的所有其他点击事件时才会调用它。*

其次，如果我删除注释，即上述编写的代码，我的 jquery 代码不会被执行。

谁能告诉我我错在哪里？我希望我的问题很清楚......谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T16:40:30.290

您`nav1`错误地引用了元素，需要一个井号 (#) 来表示它们是一个 ID：

```
$("#nav1").click(function(){... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T16:41:59.103

你没有关闭你的`$("#nav[number]").click(function(){`功能。你需要`}`在最后。

```
$("#nav1").click(function(){
    $("#popup_menu").fadeIn()
    .css({left:-300,position:'absolute',opacity:0})
    .animate({left:0,opacity:1.0}, 1000, function() {
    //callback });
}  <-----

$("#nav2").click(function(){
    $("#popup_menu").fadeIn()
    .css({left:-300,position:'absolute',opacity:0})
    .animate({left:0,opacity:1.0}, 1000, function() {
    //callback});
}  <-----

etc... 
```

你还需要用'#'引用id，例如`$("#nav2").click...`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T22:34:13.297

经过这里人们提到的许多更正后，我在这里和那里搜索了几个小时，终于找到了解决方案。正如我在上面的代码中所写：

```
 $("#nav2").click(function(){
    $("#popup_menu").fadeIn()
    .css({left:-300,position:'absolute',opacity:0})
    .animate({left:0,opacity:1.0}, 1000, function() {
    //callback });
    } 
```

有两个错误；

1-`nav2`未检测到 ID 并且从未执行过执行事件。

`li`2 - 不会在任何元素上调用此单击事件，因为它没有附加任何事件。我需要为各个`li`元素附加一个“实时点击事件”。

所以最后的解决方案是：

```
$("#nav li[id='nav2']").live('click', function(e) {
      e.preventDefault();
    $("#popup_menu").fadeIn()
.css({left:'-300px',position:'absolute',opacity:0})
.animate({left:'0px',opacity:1.0}, 1000, function() {

});
}); 
```

# android - 如何从 Android Activity 暂停 SurfaceView 线程

> ID：12626112
> 
> 赞同：0
> 
> 时间：2012-09-27T16:37:57.173
> 
> 标签：android, surfaceview

我非常详细地遵循了本教程，并设法从 Android SurfaceView 中理解和复制了我需要的功能：

[http://obviam.net/index.php/moving-images-on-the-screen-with-androi/](http://obviam.net/index.php/moving-images-on-the-screen-with-androi/)

我需要在游戏中添加一个“暂停”按钮，该按钮可以从活动中访问。我将如何暂停然后继续活动中的线程？

我尝试添加一个按钮来测试它，但从那时起我无法理解如何从 Activity 控制线程。任何帮助都将非常有用且非常感谢。

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T17:26:00.143

我对你的看法是不要在按下游戏中的虚拟暂停按钮时暂停线程，而只是改变你的更新方法：例如

```
if(paused == true) {
// Don't do anything 

} 
else {
// Play
} 
```

然而，要暂停渲染线程，您可以调用`join()`线程上的方法。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T17:44:05.130

我想出了一个简单的方法来绕过这个问题。

我所做的只是让暂停按钮在 Surfaceview 上调用一个活动，因此它会暂停视图。然后，当我关闭该活动时，线程将从停止的地方继续。

# jquery - jQuery - 检查表格中是否存在重复的配对值

> ID：12626121
> 
> 赞同：0
> 
> 时间：2012-09-27T16:38:27.953
> 
> 标签：jquery, html-table, duplicates

我有这样的表格：

```
<form>
<table id="table1">
<tr>
<td><input type="text" id="val1" name="code[1][data1]" value="abc" /></td>//this need to be check
<td><input type="text" id="val2" name="code[1][data2]" value="def" /></td>//this need to be check
<td><input type="text" name="code[1][data3]" value="xxx" /></td>
<td><input type="text" name="code[1][data4]" value="xxx" /></td>
</tr>

<tr>
<td><input type="text" id="val1" name="code[2][data1]" value="abc" /></td>//this is the duplicated value
<td><input type="text" id="val2" name="code[2][data2]" value="jkl" /></td>//this is the duplicated value
<td><input type="text" name="code[2][data3]" value="xxx" /></td>
<td><input type="text" name="code[2][data4]" value="xxx" /></td>
</tr>

<tr>
<td><input type="text" id="val1" name="code[3][data1]" value="abc" /></td>
<td><input type="text" id="val2" name="code[3][data2]" value="def" /></td>
<td><input type="text" name="code[3][data3]" value="xxx" /></td>
<td><input type="text" name="code[3][data4]" value="xxx" /></td>
</tr>
....
</table>

<p class="submit"><input type="submit" name="submit" id="submit" value="Save Changes"  /></p>
</from> 
```

提交时如何检查表中的重复值？需要测试的元素是每行的前 2 个 td 输入值。

从上面的示例`code[1][data1]&&code[1][data2]`中，第一行中的值不应与 `code[3][data1]&&code[3][data2]`第三行中的值相同。

# c# - 使用 C# 和 advapi32 重置凭据

> ID：12626124
> 
> 赞同：2
> 
> 时间：2012-09-27T16:38:32.537
> 
> 标签：c#

这个主题已经在[这里](https://stackoverflow.com/questions/254980/help-with-credenumerate)和[这里](http://blogs.msdn.com/b/peerchan/archive/2005/11/01/credman.aspx)之前提出过，虽然我认为我按照说明进行操作，但我的一些密码仍然没有被重置，而 lastError 为 0。这是我的代码：

```
namespace ResetCredentials
{
  using System;
  using System.Collections.Generic;
  using System.Diagnostics;
  using System.Runtime.InteropServices;
  using System.Text;

  using NDesk.Options;
  using FILETIME = System.Runtime.InteropServices.ComTypes.FILETIME;

  internal class Program
  {
    public enum CredPersist : uint
    {
      Session = 1,
      LocalMachine = 2,
      Enterprise = 3,
    }

    public enum CredType : uint
    {
      Generic = 1,
      DomainPassword = 2,
      DomainCertificate = 3,
      DomainVisiblePassword = 4,
      GenericCertificate = 5,
      DomainExtended = 6,
      Maximum = 7, // Maximum supported cred type
      MaximumEx = (Maximum + 1000), // Allow new applications to run on old OSes
    }

    [DllImport("advapi32", SetLastError = true, CharSet = CharSet.Unicode)]
    private static extern bool CredEnumerate(
      string filter, int flag, out int count, out IntPtr pCredentials);

    [DllImport("Advapi32.dll", EntryPoint = "CredReadW", CharSet = CharSet.Unicode, SetLastError = true)]
    private static extern bool CredRead(
      string target, uint type, int reservedFlag, out IntPtr credentialPtr);
    [DllImport("Advapi32.dll", EntryPoint = "CredWriteW", CharSet = CharSet.Unicode, SetLastError = true)]
    private static extern bool CredWrite(
      [In] ref Credential userCredential, [In] UInt32 flags);

    private static void DisplayUsage(OptionSet options)
    {
      Console.WriteLine("Usage: ResetCredentials.exe");
      options.WriteOptionDescriptions(Console.Out);
    }

    private static void Main(string[] args)
    {
      string newPass = String.Empty;
      string user = String.Empty;
      OptionSet options = new OptionSet().Add("u=|user=", s 
        => user = s).Add("n=|newPass=", s => newPass = s);

      options.Parse(args);
      if (String.IsNullOrWhiteSpace(user) || String.IsNullOrWhiteSpace(newPass))
      {
        DisplayUsage(options);
        return;
      }

      int count;
      IntPtr pCredentials;
      bool ret = CredEnumerate(null, 0, out count, out pCredentials);
      if (ret)
      {
        var credentials = new IntPtr[count];
        for (int n = 0; n < count; n++)
          credentials[n] = Marshal.ReadIntPtr(
            pCredentials, n * Marshal.SizeOf(typeof(IntPtr)));

        var creds = new List<Credential>(credentials.Length);
        foreach (IntPtr ptr in credentials)
        {
          var credential = (Credential)Marshal.PtrToStructure(ptr, typeof(Credential));
          creds.Add(credential);
          if (credential.userName.Equals(
            user, StringComparison.InvariantCultureIgnoreCase))
          {
            IntPtr ptr1;
            bool b1 = CredRead(credential.targetName, credential.type, 0, out ptr1);
            int lastError = Marshal.GetLastWin32Error();
            if (b1 && lastError == 0)
            {
              string currentPass = String.Empty;
              if (credential.credentialBlobSize > 0)
              {
                currentPass = Marshal.PtrToStringUni(credential.credentialBlob);
                lastError = Marshal.GetLastWin32Error();
              }
              if (lastError == 0 && currentPass != null)
              {
                if (!currentPass.Equals(
                  newPass, StringComparison.InvariantCultureIgnoreCase))
                {
                  credential.credentialBlobSize                       
                    = (UInt32)Encoding.Unicode.GetBytes(newPass).Length;
                  credential.credentialBlob 
                    = Marshal.StringToCoTaskMemUni(newPass);
                  CredWrite(ref credential, 0);
                  lastError = Marshal.GetLastWin32Error();
                  Console.WriteLine(lastError == 0
                    ? "Token: {0} password changed"
                    : "Could not reset password for {0}",
                      credential.targetName);
                }
              }
              else
                Console.WriteLine(
                  "Could not retrieve password for {0}", credential.targetName);
            }
            else
              Trace.WriteLine("Error: " + lastError);
          }
        }
      }
    }

    [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Unicode)]
    private struct Credential
    {
      public readonly UInt32 flags;
      public readonly UInt32 type;
      public readonly string targetName;
      public readonly string comment;
      public readonly FILETIME lastWritten;
      public UInt32 credentialBlobSize;
      public IntPtr credentialBlob;
      public readonly UInt32 persist;
      public readonly UInt32 attributeCount;
      public readonly IntPtr credAttribute;
      public readonly string targetAlias;
      public readonly string userName;
    }
  }
} 
```

我可能做错了什么？

# javascript - 元素跳转 $('#cart_table').css("top", $('#cart_table').css('top'));

> ID：12626126
> 
> 赞同：0
> 
> 时间：2012-09-27T16:38:35.120
> 
> 标签：javascript, jquery

这是html

```
<div id="cart_table" style="width:800px; position:absolute;">
    <h3>My Cart</h3>
    Please check your shipping data and press "Place Order" to complete this order
</div> 
```

和 javascript

```
var cartTableTop = parseInt($('#cart_table').css('top'));
$(window).scroll(function() {
    $('#remove').html(cartTableTop) // just to debug
    $('#cart_table').css("top", (cartTableTop) + "px");
    $('#remove').html($('#remove').html()+' '+$('#cart_table').css('top'))// just to debug
}); 
```

`cartTableTop`== $('#cart_table').css('top') 但 `#cart_table`滚动后会向下跳。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T17:10:22.363

我已经从您的代码中创建了一个 jsfiddle，但没有看到任何跳跃：http: [//jsfiddle.net/qZJdB/1/](http://jsfiddle.net/qZJdB/1/)。所以，问题可能出在代码的其他地方。

另外，我不明白调试位......`#remove`没有被渲染。

# css - IE8 quirks 模式下的 z-index

> ID：12626127
> 
> 赞同：1
> 
> 时间：2012-09-27T16:38:36.667
> 
> 标签：css, internet-explorer

我希望我的孩子 div 落后于父 div。我用过`z-index: -1`。它适用于 IE8 标准模式，但在 Quirks 模式下，子 div 显示在父 div 上方。

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
               "http://www.w3.org/TR/html4/loose.dtd">         
<html>
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Insert title here</title>
    <style type="text/css">
     .first{    
         width: 400px;
         height: 300px;
         background-color: blue;
         position:absolute;
         }

     .second{   
       width: 600px;
       height: 300px;
       z-index: -1;
       background-color: red;
       position:absolute;
      }
     </style>
    </head>
 <body>
     <div class="first">
          I am parent div
        <div class="second">
             I am child div
        </div>
     </div>
 </body>
 </html> 
```

# java - Java中的内存高效稀疏数组

> ID：12626135
> 
> 赞同：10
> 
> 时间：2012-09-27T16:39:02.347
> 
> 标签：java, memory, sparse-array

（有一些关于节省时间的稀疏数组的问题，但我正在寻找内存效率。）

我需要相当于 a `List<T>`or `Map<Integer,T>`which

1.  只需将密钥设置为比以前遇到的任何密钥都大，就可以按需增长。（可以假设键是非负的。）
2.  `ArrayList<T>`在大多数索引不是 的情况下`null`（即实际数据不是很稀疏时）的内存效率差不多。
3.  `null`当索引稀疏时，消耗的空间与非索引的数量成正比。
4.  使用更少的内存`HashMap<Integer,T>`（因为这会自动装箱键并且可能不利用标量键类型）。
5.  可以在摊销的 log(N) 时间内获取或设置元素，其中 N 是条目数：不必是线性时间，二进制搜索是可以接受的。
6.  在非病毒开源纯 Java 库中实现（最好在 Maven Central 中）。

有谁知道这样的实用程序类？

我本来希望 Commons Collections 有一个，但似乎没有。

我发现`org.apache.commons.math.util.OpenIntToFieldHashMap`它看起来几乎正确，除了值类型是 a`FieldElement`似乎是无偿的；我只是想要`T extends Object`。看起来很容易将其源代码编辑为更通用，但如果有可用的二进制依赖项，我宁愿使用它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T16:49:08.270

我会尝试使用[trove](http://trove.starlight-systems.com/)集合，有[TIntObjectMap 可以满足](http://trove4j.sourceforge.net/javadocs/)您的意图。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-22T03:50:34.127

我会从 Android 的 SparseArray 实现中寻找灵感。您可以通过在此处下载 AOSP 的源代码来查看源代码[http://source.android.com/source/downloading.html](http://source.android.com/source/downloading.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T17:08:52.870

我已将我的测试用例保存为[jglick/inthashmap](https://github.com/jglick/inthashmap)。结果：

```
HashMap size: 1017504
TIntObjectMap size: 853216
IntHashMap size: 846984
OpenIntObjectHashMap size: 760472 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-13T19:30:25.090

我会建议你使用 Colt 库中的 OpenIntObjectHashMap。[关联](http://acs.lbl.gov/software/colt/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-19T23:06:33.160

这个问题迟到了，但是[libgdx](https://github.com/libgdx/libgdx/blob/master/gdx/src/com/badlogic/gdx/utils/IntMap.java)中有 IntMap 使用 cuckoo [hashing](https://en.wikipedia.org/wiki/Cuckoo_hashing)。如果有的话，与其他人比较会很有趣。

# javascript - getElementsByTagName 不起作用简单的 JS

> ID：12626137
> 
> 赞同：0
> 
> 时间：2012-09-27T16:39:06.487
> 
> 标签：javascript

另一个问题：http: [//jsfiddle.net/ajinkyax/qGzTY/1/](http://jsfiddle.net/ajinkyax/qGzTY/1/) 上面的链接显示了一个js计算器，但是当你点击时没有发生

我只是惊讶为什么这个简单的功能不起作用！！！。

我什至用标签进行了测试，但它仍然无法正常工作。getElementsByTagName("a")

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>documentElement</title>
    </head>
    <body>
         <p>This is 4rth child (3)</p>
        <p>This is 4rth child (3)</p>

        <p>This is 5th child (4) <span id="some">CHANGE THIS</span></p>

        <script type="text/javascript">
            var mySpan = document.getElementsByTagName('span');

            mySpan.innerHTML = 'This is should change';

        </script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T16:39:47.063

做这个 ：

```
 var mySpan = document.getElementsByTagName('span')[0];
 mySpan.innerHTML = 'This is should change'; 
```

`getElementsByTagName`不返回元素，而是返回具有此标记名称的所有元素的集合。如果您只想要第一个，请添加`[0]`.

正如 user1689607 所指出的，如果你只想改变这个特定的跨度，你最好这样做

```
 var mySpan = document.getElementById('some'); 
```

# facebook - FQL 获取特定时间您和某人之间的消息数

> ID：12626138
> 
> 赞同：1
> 
> 时间：2012-09-27T16:39:13.473
> 
> 标签：facebook, count, numbers, facebook-fql, messages

请参阅我想知道我和我的朋友之间的消息计数，但不是一段时间内的总数，但有时我决定例如在 2010 年 7 月和 2010 年 12 月之间，但无法在此查询中指定时间戳或直到参数

我已经试过了

```
SELECT num_messages,timestamp ,senders, thread_id FROM unified_thread WHERE 
 CONTAINS('STRING') and thread_id= 'THREAD_ID' 
```

我也试过

```
SELECT num_messages,timestamp ,senders, thread_id FROM unified_thread WHERE  
 single_recipient=USER_ID 
```

但在这个时间戳代表最后一次更新线程，所以我不能按时间戳过滤，因为它返回相同或不返回。

我终于明白了

```
SELECT message_id,body,created_time FROM message 
  WHERE thread_id = THREAD_ID (INT EXPECTED - OLD SYSTEM ) 
```

在这里，我得到每条消息和消息发送位置的时间戳，但是有没有办法让 FQL 为我计算它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T19:15:53.760

不，FQL中没有`count`方法。您必须将结果带回脚本并在那里计数。

# data-binding - 淘汰赛js：为每个第n个项目添加类

> ID：12626139
> 
> 赞同：1
> 
> 时间：2012-09-27T16:39:14.843
> 
> 标签：data-binding, indexing, knockout.js

有没有什么简单的方法来做类似jquery ie

```
$('#image-gallery li:nth-child(3)').addClass('third-image-child') 
```

但是在淘汰赛的背景下，我对淘汰赛完全陌生，但似乎无法找到一种简单的方法来做一些看起来应该如此简单的事情？我认为这可能与在可观察数组中找到第三项并添加类有关，但不确定语法。帮助？？！

我的模型如下，它是一个简单的分页模型，加载 9 个项目，然后有下一个和上一个按钮。现在我添加了一个简单的函数来生成 100 个项目，只是为了测试它。

```
members.DisplayGallery = function(jsondata) {
                    var viewModel = {
                        fields: ko.observableArray(jsondata),
                        pageSize: ko.observable(9),
                        pageIndex: ko.observable(0),
                        previousPage: function() {
                            this.pageIndex(this.pageIndex() - 1);
                        },
                        nextPage: function() {
                            this.pageIndex(this.pageIndex() + 1);
                        }
                    };

                    viewModel.maxPageIndex = ko.dependentObservable(function() {
                        return Math.ceil(this.fields().length / this.pageSize()) - 1;
                    }, viewModel);

                    viewModel.pagedImages = ko.dependentObservable(function() {
                        var size = this.pageSize();
                        var start = this.pageIndex() * size;
                        return this.fields.slice(start, start + size);
                    }, viewModel);

                  ko.applyBindings(viewModel, $('#image-gallery')[0]);
                };

                $(function() {
                    var data = [];
                    for (var i = 0; i < 100; i++) {
                        data.push({
                            imageLink: "http://sample-image.jpg",  
                            imagePageLink: "http://",
                            imageTitle: "Title here" + i,
                            userFullName: "Name" + i,
                            imageDate: "Description" + i
                        })
                    }

                    members.DisplayGallery(data);
                  }); 
```

标记：

```
<ul data-bind="foreach: pagedImages" id="image-gallery">
                        <li>
                               <div class="image-thumb" data-bind="style: { backgroundImage: 'url(' + imageLink +')'}">
                                                            <a class="image-thumb-link" data-bind="attr: { href: imagePageLink}" href="gallery-single.html"></a>
                                                        </div>
                                                        <div class="image-text">
                                                            <a data-bind="attr: { href: imagePageLink}" href="gallery-single.html"><span class="image-title" data-bind="text: imageTitle"></span></a><br />
                                        <span data-bind="text: userFullName">Username</span><br />
                                     <span data-bind="text: imageDate">Image Date</span>
         </div>
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-27T16:49:07.243

如果你使用[foreach绑定到你的](http://knockoutjs.com/documentation/foreach-binding.html)[observable 数组](http://knockoutjs.com/documentation/observableArrays.html)，你可以使用context 属性来设置每个第三个元素的类，如下所示：`$index`

```
<li data-bind="css: { 'third-image-child': $index() % 3 == 0 }">
    ...
</li> 
```

# php - 如何解析 HTML DOMDocument 中散布有文本的图像？

> ID：12626142
> 
> 赞同：1
> 
> 时间：2012-09-27T16:39:28.467
> 
> 标签：php, parsing

我正在尝试解析一个用图像代替一些字母和数字的字段。它可以是段落的开头字母，该字母的精美图像，也可以是文本中间有图像替换的字母或数字。例如，短语

```
"Four scores and 7 years ago"

<img src=/img/F.png>our scores and <img src=/img/7.png"> years ago 
```

用图像替换了一些字母和数字。

我能够正确解析要在文本字段中替换图像的字母或数字，但我不太明白我应该如何去做。这是基于 PHP 文档中的一个示例：

```
if ( ! strcmp('Text Field', $label)) {
   $img_tags = $divs->item($i + 1)->getElementsByTagName('img');
   $num_images = $img_tags->length;

   for ($img = 0; $img < $num_images; $img++) {
       if ($img_tags->item($img)->hasAttributes()) {
           $img_tag = $img_tags->item($img)->getAttribute('src');
           if (preg_match('/name=([a-zA-Z0-9])/', $img_tag, $matches)) {
               // XXX So here I have $matches[1] which contains the letter/number I want inserted into the parent node in the exact place of the <img> tag
               $replacement = $page->createTextNode($matches[1]);
               $img_tags->item($img)->parentNode->replaceChild($replacement, $img_tags->item($img));
           }
       }
   }
} 
```

* * *

**扩展示例：**

可以说我打了这样一条线：

```
<div class="label">Title</div> 
```

我知道下一个字段将是一个文本字段

```
<div class="value">
  <img src=/img/F.png>our scores and <img src=/img/7.png"> years ago
</div> 
```

我试图抓住段落并将图像转换为我从图像名称中解析的字母。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T20:35:40.703

可能使用 str_replace 是更好的方法。

```
$source = "<img src=/img/F.pNg>our scores and <img src=/img/7.png\"> years ago";

preg_match_all("/<.*?[\=\/]([^\/]*?)\.(?:png|jpeg).*?>/i", $source, $images);

$keys = array();
$replacements = array();

foreach($images[0] as $index => $image)
{
    $keys[] = $image;
    $replacements[] = $images[1][$index];
}

$result = str_replace($keys, $replacements, $source);

// Returns 'Four scores and 7 years ago'
print($result . PHP_EOL); 
```

# assembly - 为什么 Intel x87 寄存器是 80 位宽的？

> ID：12626147
> 
> 赞同：14
> 
> 时间：2012-09-27T16:39:52.317
> 
> 标签：assembly, x86, intel, cpu-architecture, x87

为什么使用如此“奇怪”的寄存器大小？是否有任何文档说明为什么这些寄存器不宜使用 64 位或 128 位？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-27T16:48:04.063

在[IEEE 754-1985 标准的维基百科页面上，](http://en.wikipedia.org/wiki/IEEE_754-1985)关于 80 位扩展格式有一个很好的解释：

> “该标准还建议使用扩展格式以比最终结果所需的精度更高的精度执行内部计算，以最大限度地减少舍入误差”

双精度浮点数以 64 位表示。您可能需要更多的位来获得更高的中间结果精度，但是当您只希望最终结果中有 64 位时，使用 128 位类型会有点过分。

80 位是大于 64 位的合理偶数位数。

考虑到建立这些标准时的数据总线是 8 位或 16 位，而不是像今天这样的 32 位或 64 位。如果今天编写标准，96 位将是一个更合理的数字，或者即使所有这些位都不会用于计算，数据也可能会以 128 位传输。

# ios - 在 iphone 中显示长应用程序名称

> ID：12626149
> 
> 赞同：4
> 
> 时间：2012-09-27T16:39:58.560
> 
> 标签：ios, iphone, long-integer, titanium-mobile

我是 iPhone 开发的新手。我使用 Titanium Studio 开发了一个应用程序，但我的应用程序名称很长。当我将应用程序部署到设备时，我看到名称没有正确显示，而是用点显示。前任。“我的长..me”而不是“我的长应用程序名称”。

有什么方法可以添加换行符，以便我可以在设备中看到整个名称？任何建议都会有所帮助。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T16:41:31.537

不可能。你见过有两行名字的 iOS 应用吗？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-27T16:46:49.303

图标下的名称不可能（捆绑显示名称）。一些开发人员将一些额外的文本作为图标图像的一部分。

# objective-c - UITextChecker 中的 setIgnoredWords 方法

> ID：12626152
> 
> 赞同：1
> 
> 时间：2012-09-27T16:40:13.007
> 
> 标签：objective-c, ios6, spell-checking

我希望我的应用程序忽略一系列单词，而不是将它们视为“拼写错误”的单词。[我在UITextChecker Class](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITextChecker_Class/Reference/Reference.html)中遇到了 setIgnoredWords 方法，但我不知道如何使用它。

如果有人能帮我解决这个问题，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T17:29:34.320

你应该使用：

```
[UITextChecker learnWord:@"myWordWhichMustNotBeChecked"]; 
```

把你的话放在那里。您始终可以通过以下方式检查您的单词是否被忽略：

```
if ([UITextChecker hasLearnedWord::@"myWordWhichMustNotBeChecked"]) 
```

并通过以下方式忘记它：

```
[UITextChecker unlearnWord:@"myWordWhichMustNotBeChecked"]; 
```

# ios - 如何将用户输入与 csv 文件列数据进行比较和验证？

> ID：12626156
> 
> 赞同：0
> 
> 时间：2012-09-27T16:40:20.713
> 
> 标签：ios, xcode, csv

在过去的几周里，我试图得到答案。我想在应用程序中为用户提供一个文本字段并要求他们输入一个 ID 号，这个数字将与上传的 csv 文件列一起检查。如果它匹配，则显示一个警报，说明它找到了匹配，否则它没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T16:48:05.750

csv 文件基本上是一个普通文件，其中项目用逗号分隔。例如：

```
id,name,email
1,Joe,joe@d.com
2,Pat,pat@d.com 
```

要获取存储在此 csv 文件中的 ID 列表，只需遍历行，并在拆分字符串后获取第一项（使用逗号拆分）

```
id = line.split(",").get(0); // first element ** Note this depends on what language you're using 
```

现在，将此 id 添加到您正在存储的 id 集合中，例如在列表中。

```
 IDs.add(id); 
```

当您接受用户输入时，您需要做的就是检查 id 是否在您的 id 列表中。

```
 if (IDs.contains(userId)) { print "Found"; } 
```

# error-handling - Clarion 中是否存在异常处理？

> ID：12626159
> 
> 赞同：1
> 
> 时间：2012-09-27T16:40:32.693
> 
> 标签：error-handling, clarion

Clarion 8 是否提供任何异常处理功能？我知道[从 Clarion 5 开始，不支持](https://groups.google.com/forum/?fromgroups=#!searchin/comp.lang.clarion/exception%2420handling%2420/comp.lang.clarion/ITD2HfrJ0tY/Fa2qNR0wRxQJ)类似的东西，`try / catch`但它是在大约 10 年前发布的。我似乎找不到任何关于如何从 C6 到 C8 中的异常恢复的信息，除非我使用的是 Clarion#（又名 Clarion.NET），但我不是。如果绝对没有类似的东西`try / catch`，是否有任何技巧或技巧可以用来在抛出异常时不导致程序崩溃，即使它没有得到处理？

如果有帮助，我使用的是 8.0.0.8778 版本。

**编辑1：**

这是一个基本程序的一些示例代码，应该可以说明该功能`PROP:LastChanceHook`，但是，我无法让它工作。当我运行这个程序时，我看到第一条消息“开始”，但是什么也没发生。我试过从返回 0 或 1 ，`Hook`但这也没有什么不同。每次我运行它时，我都必须进入任务管理器并结束程序的进程，因为它没有被杀死。

```
PROGRAM
    INCLUDE('CWEXCPT.INT'), ONCE
    MAP
        Hook(*ICWExceptionInfo), LONG
        Test(LONG,LONG)
    END
    CODE
        MESSAGE('[Sample] Start')
        SYSTEM{PROP:LastChanceHook} = ADDRESS(Hook)
        Test(10, 0) ! Intentionally causes an exception
        MESSAGE('[Sample] After Test')
        RETURN ! Tried removing this, no difference

Hook PROCEDURE(*ICWExceptionInfo info)
    CODE
        MESSAGE('[Sample] Start Hook')
        IF info &= NULL THEN RETURN 0 END
        Message('An exception!')
        RETURN 1 ! 0 = don't kill, anything > 0 = tell RTL to kill the thread

Test PROCEDURE (LONG a, LONG b)
    CODE
        a %= b 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T23:09:17.163

是的，看看帮助中的 prop:LastChanceHook。它可能会为您的需求提供足够的功能。

在其他情况下，此链接上的信息也可能有用： [http ://clarionsharp.com/blog/tracking-down-those-pesky-gpfs/](http://clarionsharp.com/blog/tracking-down-those-pesky-gpfs/)

在 C8 的下一个公共版本（目前是 2012 年 9 月 27 日）中，可以对异常显示上的按钮（如上面的链接所示）进行一些自定义。

# wordpress - Wordpress 显示列表，但我想排除一项

> ID：12626163
> 
> 赞同：0
> 
> 时间：2012-09-27T16:40:40.370
> 
> 标签：wordpress

我想排除下面代码中调用的技能类型之一，这可能吗？

```
<ul>
    <li><a href="#" class="all active"><?php _e('All', 'framework'); ?></a><span>/</span></li>
    <?php 
        wp_list_categories(array(
            'title_li' => '', 
            'taxonomy' => 'skill-type', 
            'walker' => new Portfolio_Walker(),
            'show_option_none' => ''
        ));
    ?>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T19:37:03.640

你检查过[文档](http://codex.wordpress.org/Template_Tags/wp_list_categories)吗？

您可以使用 exclude 参数定义以逗号分隔的术语 ID 列表：

```
<?php 
    wp_list_categories(array(
        'title_li' => '', 
        'taxonomy' => 'skill-type',
        'exclude' => '1,2,3,4', //Whatever IDs of the terms you want to exclude
        'walker' => new Portfolio_Walker(),
        'show_option_none' => ''
    ));
?> 
```

# apache-pig - 猪拆分和加入

> ID：12626168
> 
> 赞同：1
> 
> 时间：2012-09-27T16:40:55.530
> 
> 标签：apache-pig

我需要将字段值从一行传播到另一种给定类型的记录，例如我的原始输入是

```
1,firefox,p  
1,,q
1,,r
1,,s
2,ie,p
2,,s
3,chrome,p
3,,r
3,,s
4,netscape,p 
```

想要的结果

```
1,firefox,p  
1,firefox,q
1,firefox,r
1,firefox,s
2,ie,p
2,ie,s
3,chrome,p
3,chrome,r
3,chrome,s
4,netscape,p 
```

我试过

```
A = LOAD 'file1.txt' using PigStorage(',') AS (id:int,browser:chararray,type:chararray);
SPLIT A INTO B IF (type =='p'), C IF (type!='p' );
joined =  JOIN B BY id FULL, C BY id;
joinedFields = FOREACH joined GENERATE  B::id,  B::type, B::browser, C::id, C::type;
dump joinedFields; 
```

我得到的结果是

```
(,,,1,p  )
(,,,1,q)
(,,,1,r)
(,,,1,s)
(2,p,ie,2,s)
(3,p,chrome,3,r)
(3,p,chrome,3,s)
(4,p,netscape,,) 
```

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T20:42:09.817

PIG 不完全是 SQL，它在构建时考虑了数据流、MapReduce 和组（也存在连接）。您可以使用嵌套在 FOREACH 和 FLATTEN 中的 GROUP BY、FILTER 获得结果。

```
inpt = LOAD 'file1.txt' using PigStorage(',') AS (id:int,browser:chararray,type:chararray);
grp = GROUP inpt BY id;
Result = FOREACH grp {
    P = FILTER inpt BY type == 'p'; -- leave the record that contain p for the id
    PL = LIMIT P 1; -- make sure there is just one
    GENERATE FLATTEN(inpt.(id,type)), FLATTEN(PL.browser); -- convert bags produced by group by back to rows
}; 
```

# jquery - 在 Chrome 上制作动画之前的 jQuery 动画跳跃

> ID：12626170
> 
> 赞同：1
> 
> 时间：2012-09-27T16:41:04.690
> 
> 标签：jquery, css, google-chrome, animation, position

我正在创建一个滑动轮播，方法是创建一个容器 div，其中包含`overflow:hidden`一个我试图通过动画`left`位置移动的图像 div。像这样：

的HTML

```
<div id="placeholder">
    <div id=carousel>

         <img src="wideimagestitched.png">

    </div>
</div> 
```

CSS：

```
#placeholder {
    position: relative;
    width: 500px
    overflow: hidden;
}

 #carousel {
  position: absolute;
  top: 0px;
  left: 0px;
        } 
```

jQuery：

```
$("#rightbutton").click(function(event){

event.preventDefault();
$("#carousel").animate({"left": "-500px"}, 1000)

}); 
```

这在 Firefox 中运行良好且流畅，但在 chrome 中，`carousel`div 会向左跳约 200px，然后再向右跳动。我已经把它放慢了，并且可以看到正在应用的内联样式，是的 - 它在动画之前向后跳了 200px 左右。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T19:48:33.763

您可以尝试使用此插件使用硬件加速：http: [//playground.benbarnett.net/jquery-animate-enhanced/](http://playground.benbarnett.net/jquery-animate-enhanced/)

工作真的很顺利

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T19:34:08.583

我想问题出在 fouc 上，您的 jquery 将在 document.ready 状态之后工作，因此浏览器从 dom 读取的任何内容都将在没有 jquery 的情况下显示。将您关注的代码置于可见性中：隐藏直到 dom 已被读取正确然后在 document.ready unhide，你可以看到下面的例子，我遇到了类似的问题

[焦点示例](http://fundapass.blogspot.in/2012/06/v-behaviorurldefaultvmlo_22.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T17:03:51.687

您的代码运行良好，请参阅此[演示](http://jsfiddle.net/afshinprofe/MzNZX/)

# django - Django 管理员选择字段

> ID：12626171
> 
> 赞同：16
> 
> 时间：2012-09-27T16:41:07.827
> 
> 标签：django, django-admin

我有一个具有 CharField 的模型，并且在管理员中我想向小部件添加选择。这样做的原因是我正在使用代理模型，并且有很多模型共享这个 CharField，但它们每个都有不同的选择。

```
class MyModel(MyBaseModel):
    stuff = models.CharField('Stuff', max_length=255, default=None)

    class Meta:
        proxy = True

class MyModelAdmin(admin.ModelAdmin):
    fields = ('stuff',)
    list_display = ('stuff',)
admin.site.register(MyModel, MyModelAdmin) 
```

对于这个模型，我想`MY_CHOICES`在`MyModelAdmin`.

我是否覆盖小部件？我需要覆盖整个表格吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-27T16:54:42.560

```
from django.contrib import admin
from django import forms

class MyModel(MyBaseModel):
    stuff = models.CharField('Stuff', max_length=255, default=None)

    class Meta:
        proxy = True

class MyModelForm(forms.ModelForm):
    MY_CHOICES = (
        ('A', 'Choice A'),
        ('B', 'Choice B'),
    )

    stuff = forms.ChoiceField(choices=MY_CHOICES)

class MyModelAdmin(admin.ModelAdmin):
    fields = ('stuff',)
    list_display = ('stuff',)
    form = MyModelForm

admin.site.register(MyModel, MyModelAdmin) 
```

请参阅：[https ://docs.djangoproject.com/en/dev/ref/forms/fields/#choicefield](https://docs.djangoproject.com/en/dev/ref/forms/fields/#choicefield)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-27T16:56:46.210

您需要覆盖`ModelAdmin`将要使用的表单：

```
class MyForm(forms.ModelForm):
    stuff = forms.CharField('Stuff', max_length=255, choices=MY_CHOICES, default=None)

    class Meta:
        model = MyModel
        fields = ('stuff', 'other_field', 'another_field')

class MyModelAdmin(admin.ModelAdmin):
    fields = ('stuff',)
    list_display = ('stuff',)
    form = MyForm 
```

如果您需要动态选择，也许您可​​以执行以下操作：

```
class MyForm(forms.ModelForm):
    stuff = forms.CharField('Stuff', max_length=255, choices=MY_CHOICES, default=None)

    def __init__(self, stuff_choices=(), *args, **kwargs):
        # receive a tupple/list for custom choices
        super(MyForm, self).__init__(*args, **kwargs)
        self.fields['stuff'].choices = stuff_choices 
```

并在您`ModelAdmin`的 's中`__init__`定义`MY_CHOICES`将要发生的事情并在那里分配表单实例：

祝你好运！:)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-03-29T14:06:07.420

您可以覆盖`formfield_for_choice_field()`不需要创建新表单的方式。

```
class MyModelAdmin(admin.ModelAdmin):
    def formfield_for_choice_field(self, db_field, request, **kwargs):
        if db_field.name == 'status':
            kwargs['choices'] = (
                ('accepted', 'Accepted'),
                ('denied', 'Denied'),
            )
            if request.user.is_superuser:
                kwargs['choices'] += (('ready', 'Ready for deployment'),)
        return super().formfield_for_choice_field(db_field, request, **kwargs) 
```

见[formfield_for_choice_field](https://docs.djangoproject.com/en/2.0/ref/contrib/admin/#django.contrib.admin.ModelAdmin.formfield_for_choice_field)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-12-29T21:08:05.363

您不需要自定义表单。

这是您需要的最低要求：

```
# models.py
from __future__ import unicode_literals

from django.db import models

class Photo(models.Model):
    CHOICES = (
        ('hero', 'Hero'),
        ('story', 'Our Story'),
    )

    name = models.CharField(max_length=250, null=False, choices=CHOICES)

# admin.py
from django.contrib import admin
from .models import Photo

class PhotoAdmin(admin.ModelAdmin):
    list_display = ('name',)

admin.site.register(Photo, PhotoAdmin) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-21T09:20:36.193

在[杰拉德的回答](https://stackoverflow.com/a/12626444/11440)中，如果您保留：

```
def __init__(self, stuff_choices=(), *args, **kwargs): 
```

那么当您尝试从管理员添加新模型时，您将始终得到“此字段是必需的”。对于所有必填字段。

您应该`stuff_choices=()`从初始化中删除：

```
def __init__(self,*args, **kwargs): 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-12-14T16:43:11.583

您需要考虑如何在数据库级别存储数据。我建议这样做：

1.  运行这个 pip 命令：`pip install django-multiselectfield`
2.  在您的 models.py 文件中：

    ```
    from multiselectfield import MultiSelectField

    MY_CHOICES = (('item_key1', 'Item title 1.1'),
              ('item_key2', 'Item title 1.2'),
              ('item_key3', 'Item title 1.3'),
              ('item_key4', 'Item title 1.4'),
              ('item_key5', 'Item title 1.5'))

    class MyModel(models.Model):
          my_field = MultiSelectField(choices=MY_CHOICES) 
    ```

3.  在您的 settings.py 中：

    ```
     INSTALLED_APPS = (
          'django.contrib.auth',
          'django.contrib.contenttypes',
          'django.contrib.sessions',
          'django.contrib.sites',
          'django.contrib.admin',

          #.....................#

          'multiselectfield',
    ) 
    ```

4.  观看魔法发生！

资源：

*   [https://pypi.python.org/pypi/django-multiselectfield](https://pypi.python.org/pypi/django-multiselectfield)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-07-31T14:08:02.733

下面的解决方案可以立即与 Postgres 的 special 一起使用`ArrayField`：

```
# models.py

class MyModel(models.Model):
    class Meta:
        app_label = 'appname'

    name = models.CharField(max_length=1000, blank=True)

    ROLE_1 = 'r1'
    ROLE_2 = 'r2'
    ROLE_3 = 'r3'

    ROLE_CHOICES = (
        (ROLE_1, 'role 1 name'),
        (ROLE_2, 'role 2 name'),
        (ROLE_3, 'role 3 name'),
    )

    roles = ArrayField(
        models.CharField(choices=ROLE_CHOICES, max_length=2, blank=True),
        default=list
    )

# admin.py

class MyModelForm(ModelForm):
    roles = MultipleChoiceField(choices=MyModel.ROLE_CHOICES, widget=CheckboxSelectMultiple)

@admin.register(MyModel)
class MyModelAdmin(admin.ModelAdmin):
    form = MyModelForm
    list_display = ("pk", "name", "roles") 
```

(Django 2.2)

# ios - facebook认证后出现黑屏，facebook对话框未显示

> ID：12626172
> 
> 赞同：1
> 
> 时间：2012-09-27T16:41:17.570
> 
> 标签：ios, xcode, facebook

我正在通过 facebook 在 ios 应用程序中集成登录，在该应用程序启动期间，我向用户显示警报，当用户单击警报视图上的 OK 按钮时，将向用户显示 FB 登录对话框。问题是当我单击主页按钮并重新启动应用程序以显示警报时，然后单击确定后不会向用户显示 facebook 登录对话框。我使用了 facebook ios sdk 3.0 和 xcode 4.5 gm。*有趣的是，当我从后台杀死应用程序时，一切正常。*以下是应用程序中的代码确实为 facebook 完成启动

```
if (!self.session.isOpen)
{
    NSArray *permissions = [[NSArray alloc] initWithObjects:
                            @"user_likes",
                            @"read_stream",@"publish_stream",@"email",
                            nil];

    self.session = [[FBSession alloc] initWithPermissions:permissions];

    if (self.session.state == FBSessionStateCreatedTokenLoaded)

    {
        // even though we had a cached token, we need to login to make the session usable
        [self.session openWithCompletionHandler:^(FBSession *session,
                                                  FBSessionState status,
                                                  NSError *error) {
    }];
    }
} 
```

这是我在用户单击警报视图上的确定按钮时调用的方法

```
-(IBAction) facebookLogin
{

if (self.session.isOpen)
{
    [self.session closeAndClearTokenInformation];        
} 
else
{
    if (self.session.state != FBSessionStateCreated) {
        // Create a new, logged out session.
        self.session = [[FBSession alloc] init];
    }

    [self.session openWithCompletionHandler:^(FBSession *session,
                                              FBSessionState status,
                                              NSError *error) {
        if (error) {
            NSLog(@"dex is %@",error.description);
        }
    }];

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T16:58:38.507

[在 Facebook开发人员](http://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk/)上关注此文档。

它解释了如何处理登录和注销功能。正如它所说的那样实施，效果很好。您也可以使用最新的 3.1 sdk。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-20T13:58:16.647

这是一个老问题，但无论如何。当我没有更新我的 AppDelegate 时，我也有同样的行为。迅速它应该是这样的：

```
func application(application: UIApplication, openURL url: NSURL, sourceApplication: String?, annotation: AnyObject) -> Bool {
    return FBSDKApplicationDelegate.sharedInstance().application(application, openURL: url, sourceApplication: sourceApplication, annotation: annotation)
}

func applicationWillResignActive(application: UIApplication) {

     FBSDKAppEvents.activateApp()
}

func application(application: UIApplication, didFinishLaunchingWithOptions launchOptions: [NSObject: AnyObject]?) -> Bool {
    // Some code was here

    return FBSDKApplicationDelegate.sharedInstance().application(application, didFinishLaunchingWithOptions: launchOptions)
} 
```

# php - PHP SplObjectStorage 附加并推送到列表顶部

> ID：12626174
> 
> 赞同：3
> 
> 时间：2012-09-27T16:41:21.963
> 
> 标签：php, splobjectstorage

我有一个小情况，我正在使用 SplObjectStorage 对象，在某些时候我需要附加一个项目，但还要将它推到列表的顶部，所以当我遍历这些项目时，我会将它作为第一个对象。

IE

```
$splObj->attach($something)
$splOBj->attach($something2)
$splObj->attach($this_must_be_first);

// When I iterate
foreach($splOBj as $obj) {
    // I need the FIRST item to be the $this_must_be_first
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T17:26:29.237

我不确定这是否存在，`iterators`但这是一个简单的解决`iterator_to_array`方法`array_reverse`

```
$splObj = new SplObjectStorage();

$last = new stdClass();
$last->element = "Last Element";

$splObj->attach(new stdClass());
$splObj->attach(new stdClass());
$splObj->attach($last);

$splArray = iterator_to_array($splObj);
$splArray = array_reverse($splArray);

foreach ($splArray as $obj)
{
    var_dump($obj);
} 
```

输出

```
object(stdClass)[2]
  public 'element' => string 'Last Element' (length=12)
object(stdClass)[4]
object(stdClass)[3] 
```

# php - PHP - 保护 WMA 音频流

> ID：12626177
> 
> 赞同：0
> 
> 时间：2012-09-27T16:41:28.840
> 
> 标签：php, audio, streaming, protection, wma

我目前正在寻找一种方法来保护本地广播电台的音频流，该广播电台为我提供了基于 IP 地址的无线电广播的实时 WMA 流（不是确切的 IP，但格式为：

```
http://199.101.51.121:2013
mms://191.101.51.121:2013 
```

由于他们的许可限制，他们无法公开向用户提供流 URL 以供收听。

然而，这个电台直播了一场本地 OHL 曲棍球队比赛，这打破了电台的许可节目，所以我们希望能够提供一个我们可以启用/禁用的链接，让人们可以收听这个流，不知道 24/7 活动的流的确切 IP 地址/URL。

这是否可以通过 PHP 基本上读取流文件并将其传递给用户，而无需他们知道流音频的实际 URL？我过去使用静态文件完成了此操作，但无法通过我通常使用的正常文件内容和标头传递方法使其工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T17:22:23.623

一种选择是创建一个指向您的隐藏地址的 dyndns.org dns 条目，以便只提供 dyndns，当您不希望侦听器时，只需针对 dyndns.org 运行脚本，将其关闭或指向一个未知的ip。没有任何东西被缓存，也没有造成任何伤害。

我们这样做是为了防止机动车检查站将我们的 dns/ip 地址缓存到我们的服务器。当我们想切换到另一台负载平衡机器时，我们只需运行一个脚本来更新 dyndns 主机，而客户端只需访问相同的域名。自 2007 年开始工作，至今仍在使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T16:54:42.720

您可以随时检查请求的来源。只需使用本机 PHP[`$_SERVER`](http://php.net/manual/en/reserved.variables.server.php)并注意`$_SERVER['HTTP_REFERER']`.

虽然这并不能为您提供您想要的所有控制权，但它绝对是一个起点。

**注意：**正如@PeeHaa 已经说过的 - »一切都可用«。你只需要一个有能力达到它的人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T22:05:47.537

是的，您可以使用 php readfile()。你给用户一个 php 文件的链接，php 文件的输出是流音频。您只需要指定正确的标头来告诉浏览器您正在发送什么并且它应该可以工作。

手册应该给你一些例子： http: [//php.net/manual/en/function.readfile.php](http://php.net/manual/en/function.readfile.php)

# less - 重用 LESS 嵌套样式

> ID：12626178
> 
> 赞同：8
> 
> 时间：2012-09-27T16:41:30.447
> 
> 标签：less

假设我有一个使用 Less 定义的样式：

```
ul.unstyled,
ol.unstyled {
  margin-left: 0;
  list-style: none;
} 
```

稍后，我想重用这个`unstyled`类：

```
.my-list {
  .unstyled;
} 
```

但是，这不起作用，我无法弄清楚使它起作用的魔力。有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T17:11:09.673

您不能重用任意类定义，只能重用 mixins（以点开头的）。在这种情况下，您需要复制它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-27T16:45:32.850

试试这个：

```
.unstyled {
  margin-left: 0;
  list-style: none;
}

.my-list {
  .unstyled;
} 
```

`.unstyled`如果定义为`ul.unstled`and ，您将无法嵌套`ol.unstyled`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-15T12:49:16.500

由于当它是嵌套样式时您不能重用`.unstyled`并且您可能不想编辑 Bootstrap 源代码，所以我建议您将两个类名都分配到您的列表中：

```
<ul class="unstyled my-list" /> 
```

# javascript - javascript中的HMAC验证API

> ID：12626180
> 
> 赞同：3
> 
> 时间：2012-09-27T16:41:42.083
> 
> 标签：javascript, hmac

我已从后端成功实施 HMAC 验证，但希望提供 JSONP 支持。既然我不希望客户端知道密钥，那么利用 HMAC 并从客户端拨打电话的最佳方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T20:26:01.163

如果攻击者知道密钥，那么他将始终能够生成有效的 HMAC。攻击者将能够通过[查看流量](https://addons.mozilla.org/en-US/firefox/addon/tamper-data/)或[修改 JavaScript](https://addons.mozilla.org/en-US/firefox/addon/greasemonkey/)来获取此 HMAC 值。也可以使用像 firebug 这样的 JavaScript 调试器。

简而言之，这种安全功能在任何地方都不存在，因为它完全毫无价值。听起来您正在非常小心地实施[CWE-602](http://cwe.mitre.org/data/definitions/602.html)违规。

信任客户是您可能犯的最严重的错误。现代 Web 应用程序安全性的基础是保护服务器免受客户端攻击。我认为你有很多东西要学。

# c - 数组到数组算术

> ID：12626190
> 
> 赞同：0
> 
> 时间：2012-09-27T16:42:31.693
> 
> 标签：c, arrays

我在 3 个数组中有 24 位数据`a[0]`，`a[1]`需要`a[2]`计算乘以和除以某个常数，结果仍然在 3 个数组中。

例如， `data = 999900h` 存储在`a[0] = 99`, `a[1] = 99`,`a[2] = 00`

```
[(999900h/64)*15000]/157286 << **process???** 
```

结果将`3A97h`存储在`b[0] = 00`, `b[1] =3A`,`b[2] = 97`

我的问题是

1.) 如何在过程中编写快速计算代码，快速指针？如何在过程中使用指针？

2.) 可以不使用数组到整数和整数到数组的转换过程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T16:47:00.900

这是最简单的“解决方案”：

```
 uint32_t data = 0x00999900;

 unsigned char const * a = (unsigned char const *)&data; 
```

现在你有`a[0]`，...，`a[3]`。顺序取决于系统的字节顺序。

* * *

与字节序无关的解决方案以代数方式工作：

```
uint32_t data = 0x3A97;

unsigned char b[sizeof data] = {  data >> 24  & 0xFF,       // b[0]
                                 (data >> 16) & 0xFF,       // b[1]
                                 (data >>  8) & 0xFF,       // b[2]
                                  data        & 0xFF        // b[3]
                               }; 
```

* * *

您还可以从数组中重构一个值。这是依赖字节序的方式：

```
uint32_t data;
unsigned char * p = (unsigned char *)&data;
p[0] = 0x00;
p[0] = 0x99;
p[0] = 0x99;
p[0] = 0x00;

// now "data" is 0x00999900 
```

这是代数方式：

```
uint32_t data = a[0] * 256 * 256 * 256 + a[1] * 256 * 256 + a[2] * 256 + a[3]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T17:47:39.157

在这种情况下，我喜欢使用联合：

```
#inlude<stdint.h>

union array_int {
  char a[4];
  uint32_t num;
} data = {.a = {00, 99, 99, 00}};

printf("%d", data.num); 
```

请考虑字节序。`htonl`如果您输入最重要的字节 - 到最不重要的字节，但在小端系统上，请使用。如果您不想弄乱字节序，那么我建议您使用建议的代数建议之一。

# mysql - 带有日期范围，多个表的Mysql摘要查询

> ID：12626191
> 
> 赞同：0
> 
> 时间：2012-09-27T16:42:34.567
> 
> 标签：mysql, sql

我正在运行一个 sql 查询，该查询在我选择的日期（2012-07-01 - 2012-08-01）之间返回结果。我可以从价值观中看出它们是错误的。

我很困惑，因为它没有告诉我我有语法错误，但返回的值是错误的。

我数据库中的日期以 YYYY-mm-dd 格式存储在日期列中。

```
SELECT `jockeys`.`JockeyInitials` AS `Initials`, `jockeys`.`JockeySurName` AS Lastname`,
       COUNT(`runs`.`JockeysID`) AS 'Rides', 
       COUNT(CASE
                  WHEN `runs`.`Finish` = 1 THEN 1 
                  ELSE NULL 
             END
             ) AS  `Wins`, 
        SUM(`runs`.`StakeWon`) AS 'Winnings'
  FROM runs
 INNER JOIN jockeys ON runs.JockeysID = jockeys.JockeysID
 INNER JOIN races ON runs.RacesID = races.RacesID
 WHERE `races`.`RaceDate` >= STR_TO_DATE('2012,07,01', '%Y,%m,%d')
   AND `races`.`RaceDate` <= STR_TO_DATE('2012,08,01', '%Y,%m,%d')
 GROUP BY `jockeys`.`JockeySurName` 
 ORDER BY `Wins` DESC` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T17:53:26.513

我最好的猜测是，这些爱开玩笑的姓氏并不是唯一的。尝试将 group by 表达式更改为：

```
group by `jockeys`.`JockeyInitials`, `jockeys`.`JockeySurName` 
```

`SELECT`通常，在聚合查询的子句中包含行中未包含的列是不好的做法`GROUP BY`。您可以在 MySQL 中执行此操作（但不能在其他数据库中），因为称为隐藏列的（错误）功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T17:12:52.167

很难从您的问题中猜出问题所在。

您是否想总结 7 月的所有比赛和 8 月 1 日的比赛？这是一个有点奇怪的日期范围。

如果您想更精确，您应该尝试以下类型的日期范围选择。如果您的 races.RaceDate 列是 DATETIME 表达式，则必须使用它。

```
 WHERE `races`.`RaceDate` >= STR_TO_DATE('2012,07,01', '%Y,%m,%d')
   AND `races`.`RaceDate` <  STR_TO_DATE('2012,08,01', '%Y,%m,%d') + INTERVAL 1 DAY 
```

这将在 8 月 1 日的任何时间恢复 7 月的比赛和比赛。

但是，您可能只是在寻找七月的比赛。在这种情况下，您可以尝试：

```
 WHERE `races`.`RaceDate` >= STR_TO_DATE('2012,07,01', '%Y,%m,%d')
   AND `races`.`RaceDate` <  STR_TO_DATE('2012,07,01', '%Y,%m,%d') + INTERVAL 1 MONTH 
```

从 7 月 1 日午夜（含）到 8 月 1 日午夜（不包括在内），这一切都将接踵而至。

另外，您没有`GROUP BY`正确使用。汇总时，结果集中的每一列都必须是汇总（`SUM()`或`COUNT()`其他聚合函数）或在 GROUP BY 子句中提及。一些 DBMS 强制执行此操作。MySQL 只是顺其自然，并给出了奇怪的结果。试试这个表达。

```
GROUP BY `jockeys`.`JockeyInitials`,`jockeys`.`JockeySurName` 
```

# c - 对象/形状/件拟合

> ID：12626194
> 
> 赞同：0
> 
> 时间：2012-09-27T16:42:42.633
> 
> 标签：c

几天来，我一直在考虑最好的解决方案，但似乎对如何做到这一点没有正确的想法。

我有一块（物体），我想把它们放在尽可能小的空间里。我最终要找的是这样的东西

[http://i.stack.imgur.com/Yg09E.gif](http://i.stack.imgur.com/Yg09E.gif)

但是一个更简单的版本，即计算两条线（条纹）的最佳拟合现在已经可以像右边的线（条纹）一样

[http://i.stack.imgur.com/HijMo.jpg](http://i.stack.imgur.com/HijMo.jpg)

我所拥有的是 xy 轴上的 2 个点（顶点）数组，代表两条线（条纹），我想以这样的方式排列它们，使两者的最近点之间有 10 或 20 毫米的空间。

我正在考虑查看数组的前半部分并找到最高点，然后查看后半部分并找到它的最高点，然后比较两者，但这似乎并不是一个合适的解决方案。

而且我真的无法想象使用这种方法编写一个适合第一张图像中形状的程序甚至是可能的。

谁能指导我正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T17:53:20.857

嗯，这真的是可能的。

您所要做的就是构建面积和距离函数。您可能需要为不同类型的形状添加不同的算法。

对于您在第一张图片中提供的那些，很难计算面积。因此，可能必须指定顶点的距离。此外，您需要添加一个条件以确保形状的轨迹不会在任何点重合。

# scala - 带有 SBT 的条件 scalacOptions

> ID：12626197
> 
> 赞同：6
> 
> 时间：2012-09-27T16:43:01.253
> 
> 标签：scala, sbt, scala-2.10

我正在使用 SBT 为 Scala 2.8、2.9 和（希望）2.10 交叉构建的项目。我想在`-feature`仅使用 2.10 编译时添加该选项。

换句话说，当我使用小于 2.10.0 的版本进行编译时，我想将编译器选项设置为：

```
scalacOptions ++= Seq( "-deprecation", "-unchecked" ) 
```

并且在使用大于或等于 2.10.0 的版本进行编译时：

```
scalacOptions ++= Seq( "-deprecation", "-unchecked", "-feature" ) 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-05T00:00:43.427

我发现这是一种快速而简洁的方法：

```
scalaVersion := "2.10.0"

crossScalaVersions := "2.9.2" :: "2.10.0" :: Nil

scalacOptions <<= scalaVersion map { v: String =>
  val default = "-deprecation" :: "-unchecked" :: Nil
  if (v.startsWith("2.9.")) default else default :+ "-feature"            
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-27T19:16:46.303

交叉构建时，scalaVersion 反映了您的项目当前构建的版本。因此，根据 scalaVersion 应该可以解决问题：

```
val scalaVersionRegex = "(\\d+)\\.(\\d+).*".r
...
scalacOptions <++= scalaVersion { sv =>
  sv match {
    case scalaVersionRegex(major, minor) if major.toInt > 2 || (major == "2" && minor.toInt >= 10) =>
      Seq( "-deprecation", "-unchecked", "-feature" )
    case _ => Seq( "-deprecation", "-unchecked" )
} 
```

# animation - 在 UIViewController 上模拟方向变化

> ID：12626201
> 
> 赞同：0
> 
> 时间：2012-09-27T16:43:29.177
> 
> 标签：animation, uiview, uiviewcontroller, rotation

我有一个处理多个子 UIViewControllers 的根 UIViewController。根视图是一个不旋转的自定义标签栏。我希望子控制器随着方向的变化而旋转。

从一些测试中，我了解到根控制器处理其子控制器的所有方向变化。所以我需要实现一个自定义动画来模拟标准设备方向的变化，我可以将它应用到可见视图，并用于转换所有不可见视图。

可见子控制器的视图作为子视图添加到根的“contentView”。“contentView”中一次只有一个子控制器视图。其余的都在一个数组中。

我该怎么做这样的事情？这支持 iOS 5 和 6。我知道我需要执行 CGTransformation 来旋转视图，并调整框架的大小以匹配。主要是，我不确定我需要采取哪些步骤来确保子控制器的正常运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T20:29:53.997

我发现在将 CGAffineTransformations 应用于 UIView 后，您无法再可靠地编辑视图的框架。您需要改用边界。保持边界的原点相同并更改大小，您可以在 Pi/2 旋转后更改视图的大小。适合伪造 UIDevice 旋转更改，或响应根视图中不允许方向更改的旋转更改。

# php - PHP- 保存 Tumblr API 的访问令牌

> ID：12626202
> 
> 赞同：2
> 
> 时间：2012-09-27T16:43:29.170
> 
> 标签：php, api, tumblr, access-token

所以我整晚都在想办法解决这个问题（字面意思）。但我难住了。简单地说，我想做的是保存访问令牌以供将来使用，并允许用户不必每次都“允许”该应用程序。当我使用存储和检索的“done.php”中的访问令牌时，“GET”操作有效，但“POST”无效。

**addblogs.php （这个脚本，在注册后立即运行，获取访问令牌并存储它们......现在它没有加盐，但它会加盐）**

```
include('functions.php');
require_once('tumblroauth/tumblroauth.php');
require_once('config.php');
session_start();
sec_session_start();
$tumblrblog = $_SESSION['tumblrblog'];

$connection = new TumblrOAuth(CONSUMER_KEY, CONSUMER_SECRET, $_SESSION['oauth_token'], $_SESSION['oauth_token_secret']);

$access_token = $connection->getAccessToken($_REQUEST['oauth_verifier']);

unset($_SESSION['oauth_token']);
unset($_SESSION['oauth_token_secret']);

if (200 == $connection->http_code) {
$at = implode(",",$access_token);

$insert_stmt = $mysqli->prepare("INSERT INTO tumblogs (tumblrblog, access_token) VALUES ( ?, ?)");
   $insert_stmt->bind_param('ss', $tumblrblog, $at); 
   $insert_stmt->execute();
print_r ($access_token);

} else {
  header('Location: ./clearsessions.php');
} 
```

**done.php（检索并使用保存的访问令牌）**

```
include('functions.php');
session_start();
sec_session_start();
require_once('tumblroauth/tumblroauth.php');
require_once('config.php');
$tumblrblog = $_SESSION['tumblrblog'];

$stmt = $mysqli->prepare('SELECT access_token FROM `tumblogs` WHERE tumblrblog=? LIMIT 1');
$stmt->bind_param("s", $tumblrblog);
$stmt->execute();
$stmt->bind_result($at);
$stmt->fetch();

$access_token = explode(",", $at);

$connection = new TumblrOAuth(CONSUMER_KEY, CONSUMER_SECRET, $access_token['0'], $access_token['1']);

print_r($access_token['0']);

$hostname = "$tumblrblog.tumblr.com";
$connection = new TumblrOAuth(CONSUMER_KEY, CONSUMER_SECRET, $access_token['0'], $access_token['1']);
$userinfo = $connection->get('http://api.tumblr.com/v2/user/info');
print_r($userinfo);
$pic_path = "dir/$tumblrblog/good/icon.png";
$pic = file_get_contents($pic_path);
$connection->post('api.tumblr.com/v2/blog/$hostname/post', array('type' => 'text', 'body' => 'this is a test of Tumbloadr v2')); 
```

谢谢大家观看！

布兰登

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T07:23:32.090

在 done.php 中，我还将通过打印来验证您是否也在检索正确的访问令牌密码`$access_token[1]`。另外，我会删除其中一个 $connections，无需重复两次。为了更加动态，您可以使用 $hostname 获取 `$hostname = parse_url($blog->url,PHP_URL_HOST);` 这显然不是一个修复程序，但希望它会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T00:59:44.423

为什么不在插入数据库之前序列化 accessToken？我认为这将是在数据库中存储令牌的正确方法。您永远无法知道令牌是否包含“，”字符，那么您的爆炸会破坏整个访问令牌。

当我为 Dropbox 存储令牌时，我必须在使用它时进行序列化和反序列化。

# php - 如何为 php readfile 分配变量值？

> ID：12626203
> 
> 赞同：0
> 
> 时间：2012-09-27T16:43:42.863
> 
> 标签：php, session, textarea, readfile

我不知道如何在 php 中分配这个值

```
<textarea rows="25" cols="40" name="content" style="height: 515px; margin: 0px; width: 411px;margin-top:-15px;">
       <?php $name = $_SESSION['name']; $last = $_SESSION['last']; readfile('script/$name.$lastScript.txt'); ?>
</textarea> 
```

这样做的正确方法是什么？

如果会话名称的值为 John

最后的会议是史密斯

读取文件必须包含 ('script/JohnSmithScript.txt')

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T16:45:53.500

```
readfile("script/".$name.$last."Script.txt"); 
```

或者

```
readfile('script/'.$name.$last.'Script.txt'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T16:46:06.980

尝试这个

```
readfile('script/'.$name.$lastScript.'.txt'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T16:48:29.503

您不能在单个 's 中添加变量。尝试

```
readfile('script/'.$name.$last'.Script.txt'); 
```

# jquery - 是否可以将 $(this) 与非子元素结合使用？

> ID：12626204
> 
> 赞同：1
> 
> 时间：2012-09-27T16:43:46.640
> 
> 标签：jquery, hide, this, show-hide

`<divs>`我有一个同班的名单。每个里面`<li>`有两个`<divs>`。`<div>`当用户将鼠标悬停在另一个上时，我想隐藏一个`<div>`。

我遇到的问题是，当我使用以下代码时，`<div>`当我将鼠标悬停在`<div>`带有“.div_1”类的任何位置上时，每个带有“.div_2”类的代码都会被隐藏。

我想要它，所以`<div>`当用户将鼠标悬停在特定的“.div_1”类上时，只有“.div_2”类被隐藏`<li>`

我无法更改标记或类，并且想知道如何实现这一点。我可以`$(this)`与“.div_2”结合吗？

```
<li>
<div class="div_1"></div>
<div class="div_2"></div>
</li>    
<li>
<div class="div_1"></div>
<div class="div_2"></div>
</li> 
... 

$(document).ready(function(){
    // MEDIA GALLERY HOVER //

        $(".div_1").hover(
          function () { $(".div_2").hide(); },
          function () { $(".div_2").show(); }
        );

}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T16:45:47.870

```
$(document).ready(function(){
    // MEDIA GALLERY HOVER //

        $(".div_1").hover(
          function () { $(this).siblings(".div_2").hide(); },
          function () { $(this).siblings(".div_2").show(); }
        );

}) 
```

* * *

或者让你的代码更短 - [**DEMO**](http://jsfiddle.net/USMbU/)

```
$(document).ready(function(){
    $(".div_1").on("mouseover mouseout", function() {
        $(this).siblings(".div_2").toggle();
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T16:45:47.433

您可以使用方法，它选择元素或方法`next`的下一个兄弟。`siblings`

```
$(".div_1").hover(
    function () { $(this).next().hide(); },
    function () { $(this).next().show(); }
); 
```

*   [下一个（）](http://api.jquery.com/next/)
*   [兄弟姐妹（）](http://api.jquery.com/siblings/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T16:46:13.053

```
$('.div1').on('mouseover',function() { $(this).siblings('.div2').css('display','none'); }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T16:46:47.950

```
 $(".div_1").hover(
      function () { $(this).siblings(".div_2").hide(); },
      function () { $(this).siblings(".div_2").show(); }
    ); 
```

# javascript - 带有 Google Analytics 的 jPlayer 播放列表

> ID：12626205
> 
> 赞同：0
> 
> 时间：2012-09-27T16:43:53.673
> 
> 标签：javascript, jquery, jplayer

我正在使用 jPlayer 播放列表，需要帮助来添加 Google Analytic 事件以显示已播放的歌曲，方法是按下播放按钮、单击播放列表中的标题、下一首或上一首，或者在歌曲末尾前进。我已尝试按 API 参考中所述的 ID 引用播放器，但我的控制台日志未显示。需要明确的是，我已经清理了这段代码，不显示我的真实标题和 URL

```
$(document).ready(function(){

var myPlaylist = new jPlayerPlaylist({
    jPlayer: "#jquery_jplayer_1",
    cssSelectorAncestor: "#jp_container_1"
}, [
    {
        title:"<Title Here>",

                    m4v: "<Link Here>",
        poster:" <Link Here> "
    },
           { 
        title:"<Title Here>",

                    m4v: " <Link Here> ",
        poster:" <Link Here> "
    },
    {
        title:" <Title Here> ",
        m4v: " <Link Here> ",
        poster: " <Link Here> "
    }
], {
    swfPath: "js",
                                 solution:"flash, html",
    supplied: "m4v "
});

$("#jquery_jplayer_1").jPlayer({
    ready: function() {
        console.log('here');
    },
    ended: function() {
        console.log('here');
    }
});
}); 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T06:18:32.797

事件处理程序应与“swfPath”等一起在 jPlayerPlaylist 构造函数的第三个参数中提供。因此，在您的示例中，以下内容应该有效（我已将播放列表参数重构为一个单独的变量以稍微整理代码）：

```
$(document).ready(function() {
  var playlist = [
    {title: "<Title Here>", m4v: "<Link Here>", poster: "<Link Here>"},
    {title: "<Title Here>", m4v: "<Link Here>", poster: "<Link Here>"},
    {title: "<Title Here>", m4v: "<Link Here>", poster: "<Link Here>"}
  ];

  var myPlaylist = new jPlayerPlaylist({
    jPlayer: "#jquery_jplayer_1",
    cssSelectorAncestor: "#jp_container_1"
  }, playlist, {
    swfPath: "js",
    solution:"flash, html",
    supplied: "m4v",
    ready: function() {
      console.log('here');
    },
    ended: function() {
      console.log('here');
    }
  });
}); 
```

# php - 任何语言中单词字符的正则表达式

> ID：12626208
> 
> 赞同：11
> 
> 时间：2012-09-27T16:44:09.180
> 
> 标签：php, regex

测试 PHP 正则表达式引擎，我发现它只认为`[0-9A-Za-z_]`是单词字符。非 ASCII 语言的字母（例如希伯来语）与`[\w]`. 是否有任何 PHP 或 Perl 正则表达式转义序列可以匹配任何语言的字母？我可以为我希望使用的每个字母添加范围，但用户总是会用意想不到的语言给我们惊喜！

请注意，这不是用于安全过滤，而是用于标记文本。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-27T16:46:52.563

尝试`[\pL_]`- 请参阅参考资料

[http://php.net/manual/en/regexp.reference.unicode.php](http://php.net/manual/en/regexp.reference.unicode.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-17T02:50:21.817

试试`\p{L}`。它匹配来自任何语言的任何类型的字母。如果您不想使用 char set `[]`。

# azure - Azure 上托管的 WebApi 未返回 401 上的内容

> ID：12626210
> 
> 赞同：2
> 
> 时间：2012-09-27T16:44:14.083
> 
> 标签：azure, asp.net-web-api

我在我的 AuthController 中有一个操作，它根据用户的状态（好的，尚未批准或不存在）返回状态代码 202/401/403。

```
public HttpResponseMessage GetAuthenticate(string identifier)
{
    try
    {
        var user = membership.Login(identifier);
        return Request.CreateResponse(HttpStatusCode.Accepted, user);
    }
    catch (UserNotApprovedException)
    {
        var user = membership.GetUserByProviderKey(identifier);
        return Request.CreateResponse(HttpStatusCode.Unauthorized, user);
    }
    catch (EntityNotFoundException)
    {
        throw new HttpResponseException(new HttpResponseMessage(HttpStatusCode.Forbidden));
    }
} 
```

在本地运行时，它按预期工作，但在 Azure Webrole 上，401 没有任何内容（内容长度 = 0）。

在第一种情况下（用户批准，202）它确实返回了用户......

# hyperlink - 如何通过 Attachment.Media.Type 查询 FQL 流？

> ID：12626212
> 
> 赞同：1
> 
> 时间：2012-09-27T16:44:15.907
> 
> 标签：hyperlink, stream, facebook-fql

查询流表时，如何在 WHERE 子句中使用 attachment.media.type？作为附件兄弟的类型字段始终为空，我已经读过它已被弃用，这就是为什么我要访问附件内部的字段。

附件字段数组的结构为：

```
 "attachment": {
        "name": "My Title",
        "media": [
          {
            "href": "http://www.stackoverflow.com",
            "alt": "",
            "type": "link",
            "src": "http://somephotourlhere"
          }
        ] 
```

我想做这样的事情（这不起作用）：

```
WHERE attachment.media["type"] = "link" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T19:13:17.897

该`attachment.media`字段是一个数组。据我所知，FQL 无法从数组内部返回值。

如果您想查找可以`AND type = 80`在 FQL 中使用的链接。

但是，发布的照片​​也有一个类型 = 80。要过滤掉这些，添加

```
AND type = 80 AND attachment.fb_object_type != 'photo' 
```

或者

```
AND type = 80 AND strlen(attachment.fb_object_type) < 1 
```

以防止将来的对象也可能返回 type = 80。对于链接，`attachment.fb_object_type`未定义。

# php - MySQL空间表中两点之间的精确距离（以公里为单位）

> ID：12626214
> 
> 赞同：0
> 
> 时间：2012-09-27T16:44:22.097
> 
> 标签：php, mysql, spatial

问候。

我看过一些关于这个主题的帖子和答案，但我认为给出的结果可能并不准确。

假设我在 MySQL 空间表中具有不同点的经度和纬度行。我只想用一个简单的 SELECT 查询来检索它们之间的距离。我努力了：

```
GLENGTH(
        LINESTRINGFROMWKB(
            LINESTRING(
                GEOMFROMTEXT(
                    ASTEXT(
                        POINTFROMWKB(
                            POINT( X(user_location) , Y(user_location))))),
                GEOMFROMTEXT(
                    ASTEXT(
                        POINTFROMWKB(
                            POINT( $latitude, $longitude )))))))*100 
```

我知道它的那种“丑陋”，恐怕结果不是以千米为单位给出的。

我该怎么做？非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T17:26:17.850

您使用的方法根本不会给您准确的结果。由于[GLENGTH](http://dev.mysql.com/doc/refman/5.0/en/geometry-property-functions.html#function_glength)使用简单的笛卡尔距离公式。您也可以[在 GLENGTH 的 MySQL 页面上](http://dev.mysql.com/doc/refman/5.0/en/geometry-property-functions.html#function_glength)的评论中阅读它不能用于球形表面，它适用于笛卡尔平面。

在这个[Stackoverflow 答案](https://stackoverflow.com/questions/11586708/get-results-that-fall-within-marker-radiuses-from-database/11587424#11587424)中，有一个修改后的公式，以及如何使用它，解释清楚，看看它。您需要对其进行修改以适合您的目的。但它肯定会指导您如何进行。

希望能帮助到你...

# iphone - 在导航控制器中进行 segue 而无需推送

> ID：12626218
> 
> 赞同：1
> 
> 时间：2012-09-27T16:44:31.773
> 
> 标签：iphone, objective-c, ios

我正在制作一个应用程序，您应该能够在其中一个部分在三个页面之间来回切换并从每个页面中选择文件。当您选择它们​​时，它们将被添加到数组中。

问题是我知道在这些页面之间链接的唯一方法是使用标签栏，它在导航控制器中不起作用......

你知道什么可能有效吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T17:05:55.633

UIScrollView 呢？

`UIView`在您的 xib 中将您的三个页面作为单独的 's。然后，将它们并排添加到您的滚动视图中`viewDidLoad`。

如果您`paging = YES`在滚动视图上进行设置，那么应该可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T18:40:36.897

我不知道我是否理解你，但你觉得使用 UISplitViewController 怎么样？

使用它的 MasterViewController 作为一个带有按钮的地方，可以在三个页面之间切换，并在 DetailViewController 中对应每个页面的视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T10:46:06.187

它可能不是问题的确切答案，但很可能是其他人找到此线程的解决方案...

经过一段时间的试验，我发现我可以为每个按钮推送更改 UITableView 中的内容，而不是拥有三个单独的 UITableView。

# vb.net - 在计算成本时失去精度

> ID：12626219
> 
> 赞同：0
> 
> 时间：2012-09-27T16:44:38.763
> 
> 标签：vb.net, vba

我有这个程序来计算纸张的成本。首先声明和初始化价格和捆绑包。然后我使用带有除法和模数的 if else 语句将捆绑包分解为收费率。尽管我的纸包数量计算正确，但我的总成本已减少。谁能发现我在这里做错了什么？

```
Module Paper
Sub Main()

    'declare variables
    Dim PaperAmountReq As Double
    Dim PricePer_1_Sheet As Double = 0.1
    Dim PricePer_100_Sheets As Double = 0.055
    Dim PricePer_500_Sheets As Double = 0.04
    Dim PricePer_1000_Sheets As Double = 0.03
    Dim NumberOfSingles As Double = 0
    Dim NumberOf100s As Double = 0
    Dim NumberOf500s As Double = 0
    Dim Numberof1000s As Double = 0

    Dim TotalCost As Double

    Console.Write("Enter number of sheets of paper needed: ")
    PaperAmountReq = Console.Readline

    If PaperAmountReq / 1000 >= 1 Then
        Numberof1000s = PaperAmountReq \ 1000
        PaperAmountReq = PaperAmountReq Mod 1000

    End If

    If PaperAmountReq / 500 >= 1 Then
        NumberOf500s = PaperAmountReq \ 500
        PaperAmountReq = PaperAmountReq Mod 500

    End If

    If PaperAmountReq / 100 >= 1 Then
        Numberof100s = PaperAmountReq \ 100
        PaperAmountReq = PaperAmountReq Mod 100

    End If

    If PaperAmountReq / 1 = PaperAmountReq Then
        NumberOfSingles = PaperAmountReq

    End If

    'TotalCost = (Convert.ToDouble(Numberof1000s) * PricePer_1000_Sheets) + (Convert.ToDouble(NumberOf500s) * PricePer_500_Sheets) + (Convert.ToDouble(Numberof100s) * PricePer_100_Sheets) + (Convert.ToDouble(NumberOfSingles) * PricePer_1_Sheet)
    TotalCost = (Numberof1000s * PricePer_1000_Sheets) + (NumberOf500s * PricePer_500_Sheets) + (Numberof100s * PricePer_100_Sheets) + (NumberOfSingles * PricePer_1_Sheet)

    Console.WriteLine("Number of 1000 packages: " & Numberof1000s)
    Console.WriteLine("Number of 500 packages: " & Numberof500s)
    Console.WriteLine("Number of 100 packages: " & Numberof100s)
    Console.WriteLine("Number of singles packages: " & NumberOfSingles)
    Console.Write("Total Cost: " & TotalCost)

End Sub 
```

端模块

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T16:59:42.353

有了这个：

```
If PaperAmountReq / 1000 >= 1 Then
    Numberof1000s = PaperAmountReq \ 1000
    PaperAmountReq = PaperAmountReq Mod 1000

End If 
```

如果您有 1500，则设置`Numberof1000s`等于​​ 1 - 而不是 1000。因此，当您计算总成本时，您的（大概）成本/工作表的值乘以 1 而不是 1000。

要么在这里改变你的方程式

```
TotalCost = (Numberof1000s * PricePer_1000_Sheets) + (NumberOf500s * PricePer_500_Sheets) + (Numberof100s * PricePer_100_Sheets) + (NumberOfSingles * PricePer_1_Sheet) 
```

成为类似的东西

```
TotalCost = (Numberof1000s * PricePer_1000_Sheets * 1000) + (NumberOf500s * PricePer_500_Sheets * 500) + (Numberof100s * PricePer_100_Sheets * 100) + (NumberOfSingles * PricePer_1_Sheet * 1) 
```

或将`PricePer_XXX_Sheets`值调整为等效值。

```
Dim PricePer_1_Sheet As Double = 0.1
Dim PricePer_100_Sheets As Double = 0.055 * 100
Dim PricePer_500_Sheets As Double = 0.04 * 500
Dim PricePer_1000_Sheets As Double = 0.03 * 1000 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T17:08:49.097

那么你的变量数应该是整数，或者如果不够大，可能是 bigintegers，PaperAmountReq 也应该如此

您的代码似乎在这些段中假设整数除法

```
If PaperAmountReq / 500 >= 1 Then          
  NumberOf500s = PaperAmountReq \ 500          
  PaperAmountReq = PaperAmountReq Mod 500 
End if 
```

实际上，因为您使用的是双精度数，所以它正在执行浮点除法。

我还建议您使用十进制而不是双倍的价格？和总成本变量。

双打非常精确，但通常非常不准确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T17:08:27.957

看起来您需要将 NumberOfXXXs 变量转换为工作表，而不是捆绑包。

最后，您的公式使用每张成本和每捆数量。要么将成本更新为每个捆绑包，要么将捆绑包编号更新为等于该捆绑包中纸张的整数：

```
TotalCost = NumberOf1000s * 1000 * PricePer_1000_Sheets 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T17:14:11.077

```
Dim PricePer_100_Sheets As Double = 0.055 
Dim PricePer_500_Sheets As Double = 0.04 
Dim PricePer_1000_Sheets As Double = 0.03 
```

应该

```
Dim PricePer_100_Sheets As Double = 0.055 * 100
Dim PricePer_500_Sheets As Double = 0.04 * 500
Dim PricePer_1000_Sheets As Double = 0.03 * 1000 
```

# javascript - 为州和首都写剧本

> ID：12626220
> 
> 赞同：0
> 
> 时间：2012-09-27T16:44:40.040
> 
> 标签：javascript, alert, prompt

我正在尝试学习 Javascript，我需要帮助解决我一直在思考的这个问题。

我需要帮助编写一个脚本，提示输入新英格兰州的缩写并提醒该州的首府。例如，如果您的用户输入 NH，您的脚本应该提醒 Concord。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T16:59:38.927

有几种方法可以做到这一点：如果你想专门使用 javascript，你有两种选择：

1.  将关联的值存储在 javascript 对象中

    `var capitals = {AL:"Montgomery",AK:"uhhh..alaska's capital",...};`

    然后您的函数可能如下所示：

    `function GetCapitalFor(abbr){ alert(capitals[abbr]); }`

2.  使用第三方库

    我不知道具体的一个，但我确信存在一个。

如果您还使用服务器，则可以将这些对存储在数据库中，然后在服务器上运行该函数（可能使用 AJAX）。像这样的东西：

```
$.ajax({
    type:"POST",
    data: {abbreviation: abbr}, //where abbr is the user's input (MAKE SURE TO SANITIZE)
    success: function(result)
    { alert(result);}
}); 
```

在服务器端，您将在数据库表中查询缩写。

不过，对于像这样微不足道的事情，我可能只会选择选项 1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T17:01:21.157

只使用最简单的 JavaScript：

```
var capitals = { ME: "Augusta", NH: "Concord", VT: "Montpelier", MA: "Boston", CT: "Hartford", RI: "Providence" };
var abb = prompt('Abbreviation?');
alert(capitals[abb]); 
```

# sql - 使用自定义格式查找最大主键的 SQL 查询

> ID：12626221
> 
> 赞同：3
> 
> 时间：2012-09-27T16:44:44.783
> 
> 标签：sql, database

我有一个数据表，其主键的格式类似于 M00001、M00002、M00003 ……等等。它们都是字符串类型。有没有办法查询数据库以找到最大主键？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T17:17:57.663

```
select max(id)
from t 
```

If the RDBMS does not support `max()` then:

```
select id
from t
order by id desc
limit 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T22:33:51.963

确切的语法将根据您使用的 DBMS 有所不同。在sql server中，一个字母后跟五个数字的键，假设您要保留前导零

这是 T-SQL，所以是 Sql Server。您正在寻找子字符串或等效项。

```
Select Max(SubString(id,2,5)) From t 
```

t-sql 并没有塞满字符串函数，但有相当多的，你通常可以将几个粘合在一起以获得你想要的。

# javascript - Chrome devtools：无需切换到“源”选项卡即可进入调试器

> ID：12626226
> 
> 赞同：24
> 
> 时间：2012-09-27T16:45:09.527
> 
> 标签：javascript, debugging, google-chrome-devtools, web-inspector, javascript-debugger

如果我[`debugger`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/debugger)在打开 Chrome 开发工具的情况下将语句放入我的 JavaScript 源代码中，它将停止执行，因此我可以从控制台以交互方式探索当前上下文。真是太棒了。

但不幸的是，它也会切换到 Sources 选项卡并显示`debugger`语句发生的行。大多数时候，我想键入 JavaScript 命令，所以我必须手动切换回控制台选项卡。

我可以避免选项卡切换并留在控制台选项卡中吗？

还是我用错了？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2021-02-01T12:48:49.713

右键单击源选项卡并选择“移至底部”。 [![在此处输入图像描述](../Images/ab6857a3f6d088a99f9936a1b5c09fd6.png)](https://i.stack.imgur.com/Nhuqd.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2022-02-09T18:38:32.323

看起来 Chrome 在其间的 9 年中增加了对此的偏好：[https ://stackoverflow.com/a/69216922/66673](https://stackoverflow.com/a/69216922/66673)

引用那个答案：

> 我有同样的问题，它让我发疯！我管理它停止切换的方法是进入 DevTools 设置 -> 首选项。
> 
> 在 Sources options 下，在触发断点时取消选中 Focus Sources 面板。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-09-28T15:30:49.753

这是有原因的——每当代码停止时，由于断点或`debugger`语句，您通常希望实际查看*执行*停止的位置。因此，开发者工具切换到 Scripts/Sources 选项卡，这是主流浏览器的常见行为，可能还会显示局部变量、调用堆栈等。

您可以做的最好的事情是保持控制台框架始终打开，这样您就可以开始工作了。只需按 Esc 或单击左下角的第二个图标。这就是我通常做的。

当您希望从您键入的命令中获得大量响应时，请切换到“控制台”选项卡。

# linux - 有没有办法提高linux管道的性能？

> ID：12626227
> 
> 赞同：19
> 
> 时间：2012-09-27T16:45:15.607
> 
> 标签：linux, performance, pipe, named-pipes

[我正在尝试使用 64 位CentOS](http://en.wikipedia.org/wiki/CentOS) 6 将超高速数据从一个应用程序传输到另一个应用程序。我已经完成了以下基准测试`dd`，发现管道阻碍了我，而不是我的程序中的算法。我的目标是达到 1.5 GB/s 左右。

首先，没有管道：

```
dd if=/dev/zero of=/dev/null bs=8M count=1000
1000+0 records in
1000+0 records out
8388608000 bytes (8.4 GB) copied, 0.41925 s, 20.0 GB/s 
```

接下来，两个 dd 进程之间的管道：

```
dd if=/dev/zero bs=8M count=1000 | dd of=/dev/null bs=8M
1000+0 records in
1000+0 records out
8388608000 bytes (8.4 GB) copied, 9.39205 s, 893 MB/s 
```

我可以对内核或其他任何可以提高通过管道运行数据的性能的调整吗？我也尝试过命名管道，并得到了类似的结果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T19:58:49.073

你试过用更小的积木吗？

当我在自己的工作站上尝试时，我注意到降低块大小时的连续改进。在我的测试中，它只在 10% 的范围内，但仍然是一个改进。您正在寻找 100%。

事实证明，进一步测试，非常小的块大小似乎可以解决问题：

我试过了

```
dd if=/dev/zero bs=32k count=256000 | dd of=/dev/null bs=32k
256000+0 records in
256000+0 records out
256000+0 records in
256000+0 records out
8388608000 bytes (8.4 GB) copied8388608000 bytes (8.4 GB) copied, 1.67965 s, 5.0 GB/s
, 1.68052 s, 5.0 GB/s 
```

和你原来的

```
dd if=/dev/zero bs=8M count=1000 | dd of=/dev/null bs=8M
1000+0 records in
1000+0 records out
1000+0 records in
1000+0 records out
8388608000 bytes (8.4 GB) copied8388608000 bytes (8.4 GB) copied, 6.25782 s, 1.3 GB/s
, 6.25203 s, 1.3 GB/s 
```

5.0/1.3 = 3.8 所以这是一个相当大的因素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-11-15T00:17:43.597

似乎 Linux 管道一次只能为读取器产生 4096 个字节，而不管写入器的写入量有多大。

因此，每次 write(2) 系统调用尝试将超过 4096 字节填充到已经填充的管道中只会导致写入器停止，直到读取器可以调用从管道中提取那么多数据并执行任何处理所需的多次读取它有心去做。

这告诉我，在多核或多线程 CPU 上（还有人制造单核、单线程、CPU 吗？），通过让管道中的每个写入器只写入 4096，可以获得更多的并行度，从而缩短经过的时钟时间一次字节，然后再回到它可以做的任何数据处理或生产，以制作下一个 4096 块。

# c# - ExecuteScalar 或 Top 1

> ID：12626229
> 
> 赞同：-2
> 
> 时间：2012-09-27T16:45:20.330
> 
> 标签：c#, sql

哪个代码更优化？

```
SQLCommand.ExecuteScalar() 
```

在 C# 或

```
Top 1 
```

在 SQL 中？

我知道，我可以进行测试，尽管可能有人口袋里有答案。

谢谢！

编辑：假设只显示一列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T16:49:36.213

没有什么比直接的 SQL 代码更好的了，但是您还应该找出哪些 SQL 代码生成 SQLCommand、DataContext 或其他用于与数据库通信的东西。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-27T16:48:02.563

显然 Select Top 1 在性能方面更加优化，因为它将直接在数据库服务器上执行。但是这种比较是无效的，因为两者是不同的东西。

# php - 如何检测搜索引擎上的准确搜索

> ID：12626231
> 
> 赞同：1
> 
> 时间：2012-09-27T16:45:29.693
> 
> 标签：php, mysql

在我下面的脚本中，用户输入一个表单，如果行与用户输入的行相似，则从 MYSQL 表中返回行。我正在建立一个搜索引擎，一切都基于排名。但我希望能够调整下面的代码，以查看例如“iPad”一词出现了多少次行字段，即“标题”、“描述”、“关键字”和“链接”。如果是这样，我希望该行返回比具有更高 id 的行更高的返回值，但在所有合并的字段中只提到一次 iPad。我的代码如下：           

  条款一起查询：         

```
 $query = " SELECT * FROM scan WHERE "; 

$terms = array_map('mysql_real_escape_string', $terms);
$i = 0; 
foreach ($terms as $each) {
      if ($i++ !== 0){
            $query .= " AND "; 
      }
      $query .= "title LIKE '%{$each}%' OR link LIKE '%{$each}%' OR  keywords LIKE '%{$each}%' OR description LIKE '%{$each}%' ";
}   $query = mysql_query($query) or die('MySQL Query Error: ' . mysql_error( $connect ));
echo '<p class="time">Qlick showed your results in ' . number_format($secs,2) . ' seconds.</p>';     

 $numrows = mysql_num_rows($query);
if ($numrows > 0) {

      while ($row = mysql_fetch_assoc($query)) {
            $id = $row['id'];
            $title = $row['title'];
            $description = $row['description'];
            $keywords = $row['keywords'];
            $link = $row['link'];
            $rank = $row['rank']; 
```

                         分词查询

```
 $query = " SELECT * FROM scan WHERE "; 
    $terms = array_map('mysql_real_escape_string', $terms);
    $i = 0; 
    foreach ($terms as $each) {
          if ($i++ !== 0){
                $query .= " OR "; 
          }
          $query .= "title LIKE '%{$each}%' OR link LIKE '%{$each}%' OR  keywords LIKE '%{$each}%' OR description LIKE '%{$each}%' ";
      }
    // Don't append the ORDER BY until after the loop
            $query = mysql_query($query) or die('MySQL Query Error: ' . mysql_error( $connect ));
    $numrows = mysql_num_rows($query);
    if ($numrows > 0) {

          while ($row = mysql_fetch_assoc($query)) {
                $id = $row['id'];
                $title = $row['title'];
                $description = $row['description'];
                $keywords = $row['keywords'];
                $link = $row['link'];
                $rank = $row['rank']; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T19:33:36.290

**吻**保持简单愚蠢

为什么没有字段“等级”。

计算包含该术语的字段数并将其保存在排名字段中

# jquery - 动态更改 jquery 对话框的文本属性

> ID：12626239
> 
> 赞同：0
> 
> 时间：2012-09-27T16:45:47.250
> 
> 标签：jquery, jquery-ui, dialog

这就是我想要做的。我有几个链接：

```
<a href="#" title="Title 1">Link 1</a>
<a href="#" title="Title 2">Link 2</a>
<a href="#" title="Title 3">Link 3</a> 
```

然后我有一个通用`<div>`的来保存内容，以便我可以重用它。就像这样

```
<div id="contents">
    <div id="data"></div>
</div> 
```

我想要做的是当用户点击任何链接时，jQuery 对话框会打开链接的标题（我已经完成并将显示），但对话框的内容将显示另一个文本页面上的 div。所以：

```
<div id="someID">Some special content here</div> 
```

这是我的 jquery 位：

```
var link = $('#careers > ul > li > a');
link.click(function (e) {
$('#contents').dialog({
    title: e.target.title,
        text: need #specialcontent // <-- THIS IS THE PART I DON'T KNOW HOW TO CHANGE
     });
    return false;
}); 
```

明白了吗？我将在页面上有其他“someID” div，我想根据链接的点击来切换。所以它本质上是加载一个新的 div 取决于点击哪个。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T16:59:24.527

这样的事情做你想做的事吗？

```
var link = $('#careers > ul > li > a');
link.click(function (e) {
    if (link.id == "someID")
        var text_value = "someID's text";
    else if (link.id == "someID2")
        var text_value = "someID2's text";
    $('#contents').dialog({
        title: e.target.title,
        text: text_value #specialcontent // <-- THIS IS THE PART I DON'T KNOW HOW TO CHANGE
    });
    return false;
}); 
```

# solr - 如何强制执行完全匹配以获得最高优先级？

> ID：12626240
> 
> 赞同：1
> 
> 时间：2012-09-27T16:45:51.973
> 
> 标签：solr, lucene, solr-query-syntax, solr-schema

我正在索引和搜索 5 个字段，这些字段以各种方式进行标记/过滤。
但是，我希望在搜索时，如果我输入的查询与字段 1 中的值匹配，它将是我返回的最高结果。
我将如何定义：

1.  场
2.  如果 100% 匹配，则以这种方式查询该字段优先

在我的架构中，我有该字段

```
<field name="na_title" type="text_names" indexed="true" stored="false" required="true" /> 
```

text_names 是：`<fieldType name="text_names" class="solr.StrField" />`

我**只有一个**na_title="somthing is going here" 的条目。但是，当我搜索时， `text_names:somthing is going on here`我会得到很多结果。
需要指出的是，对于查询和索引操作，该字段上没有分析器或过滤器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T16:52:29.543

从[手册](http://lucene.apache.org/core/3_6_1/scoring.html#Score%20Boosting)：

> Lucene 允许通过“提升”多个级别来影响搜索结果：
> 
> *   文档级别提升 - 在索引时 - 通过在将文档添加到索引之前调用 document.setBoost()。
> *   文档的字段级别提升 - 在索引时 - 通过在将字段添加到文档之前（以及在将文档添加到索引之前）调用 field.setBoost()。
> *   查询级别提升 - 在搜索期间，通过在查询子句上设置提升，调用 Query.setBoost()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T19:28:50.010

您需要对该字段进行两次索引——一次分析，一次不分析。然后，您可以将未分析字段中的匹配提升到其他字段。

一种快捷方式可能是将所有这些字段作为字符串进行索引，并使用 copyfield 将它们作为文本复制到一个包罗万象的字段中。这将稍微简化查询并减少重复字段的数量。

# ruby-on-rails-3 - rails：有什么方法可以只运行 NEXT 迁移（几个新的迁移），做手动的东西，然后运行其余的迁移？

> ID：12626243
> 
> 赞同：1
> 
> 时间：2012-09-27T16:45:58.263
> 
> 标签：ruby-on-rails-3, migration

我的 Rails 3.0 应用程序有三个新的迁移未决，X 和 Y 和 Z，但是在运行 X 之后和运行 Y 和 Z 之前需要一些手动干预。

有没有办法告诉 rake “运行任何未决的东西，包括 X”（然后做我的手动工作）？

当然，在手动清理之后，我可以运行正常的 rake db:migrate，它会赶上其余的。

（将来，如果我们有一天从头开始克隆和重建应用程序，一次运行它们并不是问题。这只是在这两个迁移之间一次性按摩遗留数据的问题。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T16:55:35.153

```
rake db:migrate:up VERSION=X

# do your stuff

rake db:migrate 
```

资料来源：[迁移指南](http://guides.rubyonrails.org/migrations.html#running-specific-migrations)

# jquery - jQuery UI 滑块和最小/最大范围

> ID：12626244
> 
> 赞同：0
> 
> 时间：2012-09-27T16:45:59.603
> 
> 标签：jquery, jquery-ui, slider, range

我有一个 jQuery UI 滑块，具有以下设置：

```
{
    min: 10,
    max: 400,
    value: 100
} 
```

我的问题是我希望滑块初始状态始终位于滑块的中间，问题是因为最小/最大值滑块总是偏离左侧而不是中心。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T16:47:44.403

将值设置为 205。这将把它放在中间。

# php - 按具有总计的组选择（mySQL）

> ID：12626246
> 
> 赞同：0
> 
> 时间：2012-09-27T16:46:01.970
> 
> 标签：php, mysql

我一直在摆弄这个大约 20 分钟，尽管我可能会在这里得到一些帮助。我有两张表，是多对一的关系。用户（一个）和事件（很多）。简化后的表格如下所示：

```
users
-----------
user_id
group_id

events
-----------
user_id 
```

我正在尝试生成一份报告，该报告将显示每组至少有一个事件的用户数量。所以结果集希望看起来像：

```
group_id   users_with_at_least_one_event
1          689
2          312 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T16:55:26.977

```
SELECT  group_id, count(*) users_with_at_least_one_event
FROM 
(
SELECT  u.user_id, u.group_id, count(*) as event_count
FROM    users u
        JOIN events e
        ON u.user_id = e.user_id
GROUP BY u.user_id, u.group_id
HAVING count(*) > 1
) sub
GROUP BY group_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T16:49:41.613

尝试

```
select users.group_id, count(distinct users.user_id) as users_with_at_least_one_event
from 
users, events 
where users.user_id = events.user_id 
group by users.group_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T16:50:13.213

```
SELECT users.group_id, COUNT(*) FROM users 
WHERE users.user_id IN (SELECT events.user_id FROM events) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T16:52:53.220

```
SELECT group_id, COUNT(users.user_id) AS users_with_at_least_one_event,
FROM users, events
WHERE users.user_id = events.user_id
GROUP BY group_id 
```

也许？

# jquery - 循环遍历jQuery中的图表类型元素

> ID：12626249
> 
> 赞同：0
> 
> 时间：2012-09-27T16:46:10.457
> 
> 标签：jquery

如果它包含图表，我想遍历所有类型为“.dxpc-content img”的元素......然后我想通过使用以下内容检索它的属性“id”来调用图表上的 PerformCallback 方法：

我正在尝试这样：

```
$('.dxpc-content img').each(
    function () {
        if ($(this).attr("id").attr("id")) {
            alert("contains chart");

            if ($(this) && $(this).attr('id').attr('id') && window[$(this).attr('id').attr('id')].PerformCallback) {
                window[$(this).attr('id').attr('id')].PerformCallback("stat" + "," + brokerStats);
            }
        }

    } 
```

如果我检查 Chrome 开发工具中的元素，它看起来像这样：

![在此处输入图像描述](../Images/0d6d0dc35379a03b410d30675a17f2b9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T16:48:41.990

您有带有 ... 的图表，`ids starting with barChart`可以在附加的图像中看到，因此您需要找到元素`having ids containing barChart`，

```
$('.dxpc-content img').each(
    function () {
        if ($(this).attr("id").indexOf('barChart') != -1) {
            alert("contains chart");

            if ($(this) && $(this).attr('id').attr('id') && window[$(this).attr('id').attr('id')].PerformCallback) {
                window[$(this).attr('id').attr('id')].PerformCallback("stat" + "," + brokerStats);
            }
        }

    } 
```

# java - Keytool 给出了错误的 android apk 哈希码

> ID：12626253
> 
> 赞同：1
> 
> 时间：2012-09-27T16:46:17.310
> 
> 标签：java, android, cmd, hashcode, keytool

我正在尝试使用 keytool 获取 apk 哈希码。当我的别名中有空格时，这个工具似乎给了我错误的哈希码。该命令如下所示：

`C:\OpenSSL\Java\jre6\bin>keytool -export -alias "my alias" -keystore C: \key\keystore | C:\OpenSSL\bin\openssl sha1 -binary | C:\OpenSSL\bin\openssl enc -a -e`

我是否正确传递了这个论点？

最简单的解决方案是更改别名，但不幸的是应用程序已经在 google play 中，我无法触摸它的密钥库。

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T04:07:29.183

你怎么知道哈希是错误的？别名与此无关，它只是指向一个证书。导出到文件并检查每个步骤，而不是使用管道来确认。

顺便说一句，这将对哈希的二进制值进行 Base64 编码。你确定这是你需要的吗？

# c# - 如何存储 BitmapImage Localy 或 Roaming？

> ID：12626255
> 
> 赞同：0
> 
> 时间：2012-09-27T16:46:25.500
> 
> 标签：c#, windows-8, windows-runtime, winrt-xaml

我有一个类定义一个人。在课堂上，我将其定义如下：

```
 [XmlIgnore]
    public BitmapImage PhotoSource
        {
        get { return _PhotoSource; }
        set
            {
            _PhotoSource = value;
            NotifyPropertyChanged( "PhotoSource" );
            }
        } 
```

我添加了：

```
 [XmlIgnore] 
```

与使用

```
 [DataMember] 
```

因为序列化不适用于 BitmapImage。

但是，我仍然需要保存 BitmapImage Local 和/或 Roaming。

那怎么能做到呢？

谢谢， EitanB

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T20:37:18.557

从您的 BitmapImage 创建一个文件，然后使用 StorageFile 类将其写入文件系统。

```
 Windows.Storage.StorageFile file = await Windows.Storage.StorageFile.GetFileFromApplicationUriAsync(bmImage.UriSource);
    await file.CopyAsync(Windows.Storage.ApplicationData.Current.LocalFolder); 
```

要将文件加载回 BitmapImage：

```
BitmapImage bmImage;
bmImage = new BitmapImage();

bmImage.UriSource = new Uri(new Uri(
     Windows.Storage.ApplicationData.Current.LocalFolder.Path + "\\" +
     Windows.Storage.ApplicationData.Current.LocalFolder.Name), 
     "favicon.scale-100.ico"); 
```

# c# - 在 C# 中循环遍历 ArrayList 的值

> ID：12626258
> 
> 赞同：13
> 
> 时间：2012-09-27T16:46:35.407
> 
> 标签：c#, arraylist, osc

我试图弄清楚这些消息包含哪些通过 OSC 流式传输的信息。消息被存储到一个 ArrayList。这是代码：

```
public void OSCMessageReceived(OSC.NET.OSCMessage message){ 
        string address = message.Address;
        ArrayList args = message.Values;
} 
```

如何循环遍历 arrayList args 的值以输出其内容？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-27T16:49:49.617

您可以尝试使用此代码

```
foreach(var item in args )
{
  Console.WriteLine(item);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T16:52:05.693

您可以使用一个简单的`for`循环：

```
for (i = 0; i < args.Count; i++)
{
    Console.WriteLine(args[i].ToString());
} 
```

在此处查看[此链接](http://csharp.net-informations.com/collection/csharp-arraylist.htm)以获取有关 C# ArrayList 对象的更多信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T16:51:55.000

```
ArrayList al = new ArrayList(new string[] { "a", "b", "c", "d", "e" });
foreach (var item in al)
{
    Console.WriteLine(item);
} 
```

您也可以使用`for`循环。

```
for (int i = 0; i < al.Count; ++i)
{
    Console.WriteLine(al[i]);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T16:52:33.907

除非您知道 ArrayList 中对象的类型，否则您唯一的选择是调用`ToString()`每个项目的方法。

如果您确实知道对象的类型，则可以将它们转换为适当的类型，然后以更智能的方式打印内容。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-12-01T09:06:24.437

**foreach()**和**for(int i = 0;...)**都滚动浏览 ArrayList 的所有条目。**但是， foreach()**似乎按照它们添加到 ArrayList 的顺序滚动它们。使用**for(int i = 0;...)**我观察到（Visual Studio 2005）这不一定是真的。我曾经历过一种情况，当添加到 ArrayList 的对象是简单的**int**时，情况就是如此。但是，当添加的对象是复杂类类型时，滚动顺序不再与它们添加到 ArrayList 的顺序相对应。

# php - Html/Javascript 输入 onFocus 水印

> ID：12626270
> 
> 赞同：0
> 
> 时间：2012-09-27T16:46:54.933
> 
> 标签：php, javascript, html

我为谷歌自定义搜索制作了一个自定义搜索框。按照品牌术语的顺序，我需要在搜索框中添加水印。我曾尝试在 html 中使用 onFocus 属性，但这对我来说是错误的方法。[我想要与此示例](http://www.google.no/cse/home?cx=partner-pub-0200921667611888:8662829644)相同的样式。

当我尝试使用 onFocus 时，它只“应用”一次。因此，如果我突出显示自定义搜索图像 disseaper 的输入框，但是当我单击另一个元素时，图像会保持 disseapered 并且不会返回。

我也尝试使用下面的脚本，但这只会在我的过敏自定义搜索框中给我一个输入框。

```
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&amp;lang=en"></script> 
```

我怎样才能做出与谷歌自定义搜索相同的效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T19:13:25.657

您应该能够只创建一个 CSS 类，或者您可以在`background-image:`属性中包含一个内联样式并将其分配给`<input>`标签。尝试这样的事情......

```
.InputFieldBkgd
{
    background-image: url(images/imageName.png);
    background-repeat: no-repeat;
} 
```

当你触发你的`onFocus`事件时，你可以删除这个类并分配一个没有背景图像属性的不同类。然后`onBlur`分配原始类以添加图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T16:49:53.107

在页面加载后（即甚至在自定义搜索框加载后）运行脚本并添加占位符。

# php - Zend Translate 在 mo 文件中出错

> ID：12626276
> 
> 赞同：1
> 
> 时间：2012-09-27T16:47:37.320
> 
> 标签：php, zend-framework, translation

我在我正在处理的项目中使用 Zend Translate，从上周左右开始，每当我向 .po 文件添加新字符串时，脚本都会中断，并出现以下错误：

> 警告：输入中的意外字符：'' (ASCII=1) state=0 in C:\www\web\application\languages\pt_PT\application.mo 在第 132 行

但是，如果我将要翻译的字符串更改为其他任何内容，它就会开始工作。

如果我添加另一个字符串进行翻译，该文件将再次开始工作。

我正在使用*Poedit*来管理翻译，而我插入的翻译没有任何`"`或`'`.

*在Poedit*中使用验证工具不会产生任何错误。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-01-12T10:15:27.037

这个问题已经很老了，但这是我解决这个问题的方法。

我有最新版本的 ZF1 1.12.20（已停产）。我测试了所有内容，但对我来说，解决方案是通过删除所有“”特殊引号和 \t 原始翻译（英文）中的所有字符来清理 .po 文件，然后一切正常。

# java - Java，Maven：构建期间的 SLF4J 错误

> ID：12626277
> 
> 赞同：6
> 
> 时间：2012-09-27T16:47:43.530
> 
> 标签：java, maven, log4j, dependencies, slf4j

我正在开发一个 Java 项目并使用 Maven (m2e) 构建它。当我这样做时，`mvn clean install`我首先会收到此错误：

```
SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".
SLF4J: Defaulting to no-operation (NOP) logger implementation
SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details. 
```

首先是日志记录似乎很好（这是非常基本的）。但我不喜欢我的构建中的错误，所以我遵循了 URL。它基本上说这个类可以在几个包之一中找到，所以我添加`slf4j-simple`到我的依赖项中。我不知道要使用哪个版本，所以我得到了最新的（1.7.1）。错误并没有消失。

似乎我的一个依赖项（JXL）需要`log4j`1.2.14 版本，这就是需要`slf4j`. 我认为我无法改变这一点（可以吗？）。我的想法是，也许`slf4j`是错误的版本，但我不知道如何弄清楚`log4j`需要什么版本。

所以首先，我有问题吗？其次，即使我不这样做，有没有办法摆脱警告？

这是输出`mvn dependency:tree`：

```
[INFO] --- maven-dependency-plugin:2.1:tree (default-cli) @ dpt ---
[INFO] com.nike.dpt:dpt:war:1.3-SNAPSHOT
[INFO] +- javax.servlet:jsp-api:jar:2.0:provided
[INFO] +- javax.servlet:servlet-api:jar:2.5:provided
[INFO] +- javax.servlet:jstl:jar:1.2:runtime
[INFO] +- net.sourceforge.jexcelapi:jxl:jar:2.6.12:compile
[INFO] |  \- log4j:log4j:jar:1.2.14:compile
[INFO] +- commons-dbcp:commons-dbcp:jar:1.4:compile
[INFO] |  \- commons-pool:commons-pool:jar:1.5.4:compile
[INFO] +- org.springframework:spring-core:jar:3.1.2.RELEASE:compile
[INFO] |  +- org.springframework:spring-asm:jar:3.1.2.RELEASE:compile
[INFO] |  \- commons-logging:commons-logging:jar:1.1.1:compile
[INFO] +- org.springframework:spring-tx:jar:3.1.2.RELEASE:compile
[INFO] |  +- aopalliance:aopalliance:jar:1.0:compile
[INFO] |  +- org.springframework:spring-aop:jar:3.1.2.RELEASE:compile
[INFO] |  \- org.springframework:spring-beans:jar:3.1.2.RELEASE:compile
[INFO] +- org.springframework:spring-aspects:jar:3.1.2.RELEASE:compile
[INFO] |  \- org.springframework:spring-context-support:jar:3.1.2.RELEASE:compile
[INFO] +- org.springframework:spring-jdbc:jar:3.1.2.RELEASE:compile
[INFO] +- org.springframework:spring-web:jar:3.1.2.RELEASE:compile
[INFO] +- org.springframework:spring-webmvc:jar:3.1.2.RELEASE:compile
[INFO] |  \- org.springframework:spring-expression:jar:3.1.2.RELEASE:compile
[INFO] +- org.springframework:spring-context:jar:3.1.2.RELEASE:compile
[INFO] +- org.springframework.security:spring-security-core:jar:3.1.0.RELEASE:compile
[INFO] |  \- org.springframework.security:spring-security-crypto:jar:3.1.0.RELEASE:compile
[INFO] +- org.springframework.security:spring-security-config:jar:3.1.0.RELEASE:compile
[INFO] +- org.springframework.security:spring-security-web:jar:3.1.0.RELEASE:compile
[INFO] +- com.vaadin:vaadin:jar:6.8.2:compile
[INFO] +- com.google.gwt:gwt-user:jar:2.4.0:provided
[INFO] |  +- javax.validation:validation-api:jar:1.0.0.GA:provided
[INFO] |  \- javax.validation:validation-api:jar:sources:1.0.0.GA:provided
[INFO] +- org.aspectj:aspectjrt:jar:1.7.0:compile
[INFO] +- org.aspectj:aspectjweaver:jar:1.7.0:compile
[INFO] +- junit:junit:jar:4.10:test
[INFO] |  \- org.hamcrest:hamcrest-core:jar:1.1:test
[INFO] +- org.mockito:mockito-all:jar:1.9.0:test
[INFO] +- cglib:cglib-nodep:jar:2.2.2:compile
[INFO] +- com.oracle:ojdbc14:jar:10.2.0.4.0:compile
[INFO] +- org.vaadin.addons:filteringtable:jar:0.5.3:compile
[INFO] +- org.vaadin.addons:popupbutton:jar:1.2.1:compile
[INFO] \- org.slf4j:slf4j-simple:jar:1.7.1:compile
[INFO]    \- org.slf4j:slf4j-api:jar:1.7.1:compile 
```

我正在使用 Maven 插件 (m2e) 在 Eclipse (Juno) IDE 中运行。我用于 Maven 的 CLI 是`mvn clean package taomcat7:run`或`mvn clean install tomcat7:run`. 当我从命令行调用 Maven 时，我*没有*看到 slf4j 错误，所以这可能与`m2e`Eclipse 设置有关。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T08:15:09.107

该错误消息与您的项目无关。这是一个 m2e 问题，不会造成任何伤害。如果您在 Eclipse 之外的命令行上构建，您将看不到它。

这有一个错误，但不幸的是，他们宁愿混淆人们也不愿修复它：

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=387064](https://bugs.eclipse.org/bugs/show_bug.cgi?id=387064)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T17:33:28.213

的输出`mvn dependency:tree`清楚地表明 slf4j-api 和 slf4j-simple 都在您的类路径上。SLF4J 抱怨找不到的事实`org.slf4j.impl.StaticLoggerBinder`意味着在您的类路径中某处还有另一个*slf4j-api.jar*副本，这是正在加载到内存中的副本（而不是 com.nike.dpt 中的slf4j *-* *api.jar副本**:dpt:战争*)。在这种情况下，由于许多应用服务器的类加载器委托模型，服务器的 slf4j-api 副本加载的类无法在您的 web-app中找到*slf4j-simple.jar中打包的类。*这通常发生在 slf4j-api.jar 的副本被放置在**应用服务器**的*lib/*文件夹而不是 Web 应用程序的*WEB-INF/lib/*文件夹。

你的运行时环境是什么？应用服务器？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T17:07:46.613

遵循这条规则：

```
Place one (and only one) of slf4j-nop.jar, slf4j-simple.jar, slf4j-log4j12.jar, slf4j-jdk14.jar or logback-classic.jar 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T18:12:24.583

尝试在您的 pom 中配置这些依赖项：

```
org.slf4j:slf4j-api:jar:1.7.1:compile
org.slf4j:slf4j-log4j12:jar:1.7.1:runtime 
```

slf4j-api 是日志 API，在编译时需要，而 slf4j-log4j12 是实现（使用 log4j），在运行时需要。

# scala - 具有隐式封闭实例的路径依赖工厂，在 Scala 中

> ID：12626281
> 
> 赞同：2
> 
> 时间：2012-09-27T16:47:53.020
> 
> 标签：scala, inner-classes, path-dependent-type, implicit-declaration

假设一个外部类具有两个内部类的内部组合：

```
class Outer(val times: Int) {

  class Inner(val count: Int)
  object Inner {
    def apply(i: Int) = new Inner(i)
  }

  class InnerWrap(val i: Inner)
  object InnerWrap {
    def apply(i: Inner) = new InnerWrap(i)
  }
  def method(i: Inner) = i.count * times
}
object Outer {
  def apply(times: Int) = new Outer(times)
}

class PathDependentExpl {
  val o = new Outer(3)
  val i = o.Inner(2)
  val p = new Outer(5)
  val j = p.Inner(3)
  println(o.method(i))
  println(p.method(j))
} 
```

一切都很好，花花公子。我们甚至有编译器保护，防止通过依赖路径的类型将内部函数从一个`Outer`方法提供给另一个方法。`Outer`

但是语法有点烦人。我希望能够写出类似的东西

```
implicit val p = new Outer(5)
val k = Inner(3) // same as p.Inner(3)
val l = InnerWrap(Inner(3)) 
```

...省略隐式有效的块的外部实例。所以我急于添加带有 Outer 对象作为隐式参数的委托方法。

```
object Outer {
  def apply(times: Int) = new Outer(times)
  def Inner(c: Int)(implicit o: Outer) = o.Inner(c)
  def InnerWrap(i: o.Inner)(implicit o: Outer) = o.InnerWrap(i)
} 
```

最后一个`InnerWrap`定义产生：“非法依赖方法类型：参数出现在同一节或更早的另一个参数的类型中”，这实际上是有道理的。我尝试`def InnerWrap[O <: Outer#Inner](i: O)(implicit o: Outer) = o.InnerWrap(i)`了其他变体无济于事。

问题是，我怎样才能使用更简洁的语法？怎样才能使`InnerWrap`in object的声明`Outer`接受`o.Inner`s 或等价物？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T18:14:24.100

正如我在上面的评论中指出的那样，可以从 导入您需要的对象（或方法）`p`，这可能会为您提供您正在寻找的简洁语法：

```
scala> val p = new Outer(5)
p: Outer = Outer@4fe2fe5d

scala> import p._
import p._

scala> val k = Inner(3)
k: p.Inner = Outer$Inner@b90ffa7

scala> val l = InnerWrap(Inner(3))
l: p.InnerWrap = Outer$InnerWrap@3bd6bff7 
```

# javascript - div中的contentdiveditable绝对div

> ID：12626283
> 
> 赞同：2
> 
> 时间：2012-09-27T16:48:00.990
> 
> 标签：javascript, firefox, contenteditable

我想编辑一个绝对定位的 DIV，它位于可内容编辑的 DIV 中。这适用于 IE、Chrome、Safari 和 Opera，但不幸的是不适用于 Firefox。

这是代码：

```
<DIV contenteditable="true"
style="border:1px solid #F00; width:220px; height:220px;">
<DIV>
<P>DIV 1, editable</P>
</DIV>
<DIV style="position:absolute; left: 20px; top: 50px;">
<P>DIV 2, not editable in FF !?</P>
</DIV>
</DIV> 
```

我已经在[http://jsfiddle.net/Jf54f/4/中进行了不成功的尝试](http://jsfiddle.net/Jf54f/4/)

这是一个错误吗？有人有解决方法吗？提前致谢 ：-）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T16:53:35.230

好吧，你不应该设置 contenteditable="true" 试试 contenteditable。该术语没有任何值，您可以为 chrome 和 IE 添加诸如“纯文本”之类的值，因为它们允许使用 ctrl+b 和所有格式进行格式化。

```
<DIV contenteditable id=""> 
```

**尽管正如我的朋友所说，它适用于所有浏览器。**我也试过了，确实如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T16:59:37.737

在可编辑元素上设置`position:relative`，以便定位的 div 被认为在其中。（*很可能是实现中的错误*）

演示在[http://jsfiddle.net/Jf54f/8/](http://jsfiddle.net/Jf54f/8/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T17:05:15.013

`contenteditable="true"`从主目录中删除`div`并将其添加到两个内部 div 效果很好。

在这里检查：http: [//jsfiddle.net/RASG/Jf54f/10/](http://jsfiddle.net/RASG/Jf54f/10/)

# objective-c - 在 NSTableView 中禁用滚动

> ID：12626288
> 
> 赞同：11
> 
> 时间：2012-09-27T16:48:15.433
> 
> 标签：objective-c, macos, scroll, nstableview, nsscrollview

有没有一种简单的方法来禁用 NSTableView 的滚动。

似乎没有任何属性 `[myTableView enclosingScrollView]`或`[[myTableView enclosingScrollView] contentView]`禁用它。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-18T19:57:19.037

这对我有用：子类 NSScrollView，通过以下方式设置和覆盖：

```
- (id)initWithFrame:(NSRect)frameRect; // in case you generate the scroll view manually
- (void)awakeFromNib; // in case you generate the scroll view via IB
- (void)hideScrollers; // programmatically hide the scrollers, so it works all the time
- (void)scrollWheel:(NSEvent *)theEvent; // disable scrolling

@interface MyScrollView : NSScrollView
@end

#import "MyScrollView.h"

@implementation MyScrollView

- (id)initWithFrame:(NSRect)frameRect
{
    self = [super initWithFrame:frameRect];
    if (self) {
        [self hideScrollers];
    }

    return self;
}

- (void)awakeFromNib
{
    [self hideScrollers];
}

- (void)hideScrollers
{
    // Hide the scrollers. You may want to do this if you're syncing the scrolling
    // this NSScrollView with another one.
    [self setHasHorizontalScroller:NO];
    [self setHasVerticalScroller:NO];
}

- (void)scrollWheel:(NSEvent *)theEvent
{
    // Do nothing: disable scrolling altogether
}

@end 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2018-02-22T19:19:48.057

这是我认为最好的解决方案：

### 斯威夫特 5

```
import Cocoa

@IBDesignable
@objc(BCLDisablableScrollView)
public class DisablableScrollView: NSScrollView {
    @IBInspectable
    @objc(enabled)
    public var isEnabled: Bool = true

    public override func scrollWheel(with event: NSEvent) {
        if isEnabled {
            super.scrollWheel(with: event)
        }
        else {
            nextResponder?.scrollWheel(with: event)
        }
    }
} 
```

* * *

只需将 any 替换`NSScrollView`为`DisablableScrollView`（或者`BCLDisablableScrollView`如果您仍然使用 ObjC），您就完成了。只需`isEnabled`在代码或 IB 中设置，它就会按预期工作。

这样做的主要优点是嵌套滚动视图；在不将事件发送给下一个响应者的情况下禁用子级也会在光标位于禁用的子级上时有效地禁用父级。

以下列出了这种方法的所有优点：

*   ✅ 禁用滚动
    *   ✅ 以编程方式执行，默认行为正常
*   ✅ 不中断滚动父视图
*   ✅ 界面生成器集成
*   ✅ 直接替换`NSScrollView`
*   ✅ Swift 和 Objective-C 兼容

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-10-09T20:09:43.583

感谢@titusmagnus 的回答，但我做了一个修改，以免在“禁用”滚动视图嵌套在另一个滚动视图中时中断滚动：当光标位于内部边界内时，您无法滚动外部滚动视图滚动视图。如果你这样做...

```
- (void)scrollWheel:(NSEvent *)theEvent
{
    [self.nextResponder scrollWheel:theEvent];
    // Do nothing: disable scrolling altogether
} 
```

...然后“禁用”的滚动视图会将滚动事件向上传递到外部滚动视图，并且它的滚动不会卡在其子视图内。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-08-16T06:08:43.537

为我工作：

```
- (void)scrollWheel:(NSEvent *)theEvent
{
    [super scrollWheel:theEvent];

    if ([theEvent deltaY] != 0)
    {
        [[self nextResponder] scrollWheel:theEvent];
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-27T17:18:09.213

没有简单的直接方法（意思是，没有`scrollEnabled`可以设置的 UITableView 之类的属性），但我发现[这个答案](https://stackoverflow.com/questions/2376518/fixed-height-nstableview-avoid-scrolling#comment2354686_2377403)在过去很有帮助。

您可以尝试的另一件事（不确定）是子类化`NSTableView`和覆盖`-scrollWheel`，`-swipeWithEvent`因此它们什么都不做。希望这可以帮助

# php - 我可以将 Ion auth 设置为通过用户名或电子邮件登录吗

> ID：12626292
> 
> 赞同：4
> 
> 时间：2012-09-27T16:48:38.277
> 
> 标签：php, codeigniter, codeigniter-2, ion-auth

我知道我可以在配置中将 ion auth 设置为通过用户名登录，我也知道我可以在配置中将其设置为通过电子邮件登录。

有没有一种简单的方法可以将其设置为自动使用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-17T10:05:01.630

如果通过自动，您的意思是尝试一个然后另一个，看看是否有一个有效的回报：

登录发生在 ion_auth_model 行：899

```
->where($this->identity_column, $this->db->escape_str($identity)) 
```

因此您可以将其更改为“或”并尝试两列。您需要在整个模型中执行此操作，因为要考虑的不仅仅是实际登录，还有一个潜在问题是用户的电子邮件是另一个用户的用户名（但不太可能）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-05-17T19:16:11.250

它可能只需要几行代码：让我们假设这是您的 ion_auth 配置文件：

```
$config['identity'] = 'username'; // A database column which is used to login with 
```

您必须运行两次登录功能。如果第一次尝试（使用用户名）没有成功，您可以更改标识符并重试：

$this->ion_auth_model->identity_column = "email";

无需修改模型或库或自定义查询

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-09-30T20:44:12.273

无需编辑`ion_auth_model`，您可以执行以下操作：

考虑到你已经有了这个配置：

```
 $config['identity'] = 'username'; 
```

你的控制器上有这个：

```
// log the user in
public function login()
{
...
    if ($this->ion_auth->login($this->input->post('identity'), $this->input->post('password'), $remember))
    {
    //if the login is successful 
```

你可以让它检查，然后如果它不成功，设置`email`为身份列并检查它：

```
// log the user in
public function login()
{
...

    // check for username
    $login = $this->ion_auth->login($this->input->post('identity'), $this->input->post('password'), $remember);
    if(! $login) { // username is not successful
        $this->ion_auth_model->identity_column = 'email';
        // check for email
        $login = $this->ion_auth->login($this->input->post('identity'), $this->input->post('password'), $remember);
    }

    if( $login ) {
         // successful
    } else {
         // both failed
    } 
```

**这样做的好处是：**与 ionAuth 的任何新更新都具有更高的兼容性，因为您没有更改核心文件。**这样做的缺点**是它必须双重查询数据库。

* * *

**Auth 控制器代码修改自：** [ionAuth Auth Controller Example](https://github.com/benedmunds/CodeIgniter-Ion-Auth/blob/2/controllers/Auth.php)

**关于ionAuth Repo的讨论：**

*   [问题 510：在用户名/电子邮件作为身份之间切换](https://github.com/benedmunds/CodeIgniter-Ion-Auth/issues/510#issuecomment-26762435)
*   [问题 792：使用用户名或电子邮件登录](https://github.com/benedmunds/CodeIgniter-Ion-Auth/issues/792)
*   [拉取请求 746：为备用身份列添加选项](https://github.com/benedmunds/CodeIgniter-Ion-Auth/pull/746)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-19T10:14:42.477

我最近分叉了 Ion Auth 并进行了必要的增强，以便可以在配置中选择它。叉子位于此处：

[https://github.com/zepernick/CodeIgniter-Ion-Auth](https://github.com/zepernick/CodeIgniter-Ion-Auth)

我提出了一个拉取请求以将其包含在 Ion Auth 代码库中，但目前尚未被接受。关于它是否使代码变得复杂存在一些争论。如果对您有用，请给他们留言，让他们知道您想要此功能。

[https://github.com/benedmunds/CodeIgniter-Ion-Auth/pull/746](https://github.com/benedmunds/CodeIgniter-Ion-Auth/pull/746)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T09:48:29.293

**在 'identity' ion_auth 配置中使用 'email' 然后在ion_auth_model第****866**行的 $query 之后添加此代码

 **```
if($query->num_rows() == 0){
    $query = $this->db->select($this->identity_column . ', username, email, id, password, active, last_login')
          ->where('username', $this->db->escape_str($identity))
          ->limit(1)
          ->get($this->tables['users']);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-24T19:07:51.160

我认为更简单的方法是检查 $identity var 是否是电子邮件。如果不是电子邮件，则将该列设置为“用户名”。像这样的东西：

```
$check_column = valid_email($identity) ? $this->identity_column : 'username';   
$query = $this->db->select('username, email, id, password, active, last_login')
    ->where($check_column, $this->db->escape_str($identity))
    ->limit(1)
    ->get($this->tables['users']); 
```

在这种情况下，您需要加载 email_helper。

为我工作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-07-16T09:05:03.493

> 把它放在你的控制器上

```
if ($this->form_validation->run() !== FALSE) {
    $remember = (bool) $this->input->post('remember');
    $this->ion_auth_model->identity_column = 'username/email';

    if ($this->ion_auth->login($this->input->post('username'), $this->input->post('password'), $remember))
    {
        $this->session->set_flashdata('message', $this->ion_auth->messages());
    }
    redirect('auth/login');
} 
```

> 编辑 ion_auth_model.php。找到函数 login() 并使用下面的代码更新代码。

```
public function login($identity, $password, $remember=FALSE)
    {
        $this->trigger_events('pre_login');

        if (empty($identity) || empty($password))
        {
            $this->set_error('login_unsuccessful');
            return FALSE;
        }

        $this->trigger_events('extra_where');

        //just add this (starting this line)
        if ($this->identity_column == "username/email")
        {
            $fieldname = explode('/', $this->identity_column);
            $query = $this->db->select($fieldname[0] . ', username, email, id, password, active, last_login')
                          ->where($fieldname[0], $identity)
                          ->limit(1)
                          ->get($this->tables['users']);

            $this->identity_column = $fieldname[0];

            if ($query->num_rows() === 0) {
                $query = $this->db->select($fieldname[1] . ', username, email, id, password, active, last_login')
                          ->where($fieldname[1], $identity)
                          ->limit(1)
                          ->get($this->tables['users']);

                $this->identity_column = $fieldname[1];
            }
        }
        else
        {
            $query = $this->db->select($this->identity_column . ', username, email, id, password, active, last_login')
                          ->where($this->identity_column, $identity)
                          ->limit(1)
                          ->get($this->tables['users']);
        }
        //up to this line   

        if($this->is_time_locked_out($identity))
        {
            //Hash something anyway, just to take up time
            $this->hash_password($password);

            $this->trigger_events('post_login_unsuccessful');
            $this->set_error('login_timeout');

            return FALSE;
        }

        if ($query->num_rows() === 1)
        {
            $user = $query->row();

            $password = $this->hash_password_db($user->id, $password);

            if ($password === TRUE)
            {
                if ($user->active == 0)
                {
                    $this->trigger_events('post_login_unsuccessful');
                    $this->set_error('login_unsuccessful_not_active');

                    return FALSE;
                }

                $this->set_session($user);

                $this->update_last_login($user->id);

                $this->clear_login_attempts($identity);

                if ($remember && $this->config->item('remember_users', 'ion_auth'))
                {
                    $this->remember_user($user->id);
                }

                $this->trigger_events(array('post_login', 'post_login_successful'));
                $this->set_message('login_successful');

                return TRUE;
            }
        }

        //Hash something anyway, just to take up time
        $this->hash_password($password);

        $this->increase_login_attempts($identity);

        $this->trigger_events('post_login_unsuccessful');
        $this->set_error('login_unsuccessful');

        return FALSE;
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-10-30T03:29:44.447

您可以在不修改核心代码的情况下执行此操作。如果存在有效的电子邮件，只需即时更改身份列。注意：`ion_auth_model`不是`ion_auth`。

```
public function check_login()
{
    if (!$this->input->is_ajax_request()) {
        exit('No direct script access allowed');
    }
    $this->form_validation->set_rules('username', str_replace(':', '', $this->lang->line('login_identity_label')), 'required');
    $this->form_validation->set_rules('password', str_replace(':', '', $this->lang->line('login_password_label')), 'required');
    if ($this->form_validation->run() == false) {
        $this->form_validation->json_errors();
    }
    $identity = $this->input->post('username');
    if ($this->form_validation->valid_email($identity)) {
        $this->ion_auth_model->identity_column = 'email';
    } else {
        $this->ion_auth_model->identity_column = 'username';
    }
    if ($this->ion_auth->login($identity, $this->input->post('password'), false)) {
        encode_response('success');
    } else {
        encode_response('error', $this->ion_auth->errors());
    }
} 
```**

# c# - 如何接收并发的 udp 套接字响应？

> ID：12626294
> 
> 赞同：2
> 
> 时间：2012-09-27T16:48:41.117
> 
> 标签：c#, sockets

我想在 C# 中创建一个客户端服务器 UDP 套接字。我通过单个请求响应成功发送和接收。

但我有一个问题。当我同时发送例如 5 个请求时。每个请求的响应时间不同。

我如何理解每个响应是针对哪个请求的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T08:26:28.587

```
 var _connection = new UdpClient( port-to-listen-at );

 IPEndPoint sender = new IPEndPoint(IPAddress.Any, 0);
 byte[] data = _connection.Receive(ref sender); 
```

当 Receive() 返回 'sender' 时，它包含 sender-info

# javascript - 使用多个分隔符拆分字符串

> ID：12626295
> 
> 赞同：1
> 
> 时间：2012-09-27T16:48:42.203
> 
> 标签：javascript, regex

我正在尝试拆分一个使用“}，{”作为分隔符的巨大字符串。

如果我使用以下代码，我会将其拆分为自己的字符串吗？

```
var i;
var arr[];
while(str) {
    arr[i] = str.split("/^}\,\s\{\/");
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T16:51:54.560

首先，摆脱`while`循环。字符串是不可变的，所以它不会改变，所以你会有一个无限循环。

然后，您需要摆脱引号以使用正则表达式文字语法并摆脱`^`将正则表达式锚定到字符串开头的 。

```
/},\s\{/ 
```

或者，如果您可以依赖该确切的字符序列，则根本不使用正则表达式。请改用字符串分隔符。

```
"}, {" 
```

此外，这是无效的语法。

```
var arr[]; 
```

因此，您只需进行一次拆分，最终将得到一个字符串数组。

总而言之，你想要这样的东西。

```
var arr = str.split(/*your split expression*/) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T16:58:55.460

```
var s = 'Hello"}, {"World"}, {"From"}, {"Ohio';
var a = s.split('"}, {"');
alert(a); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T16:56:35.443

```
 var arr = str.split(/[\{\},\s]+/) 
```

# php - 用数字字符串中的 ASCII 值替换 char

> ID：12626299
> 
> 赞同：1
> 
> 时间：2012-09-27T16:48:57.380
> 
> 标签：php, regex

嗨，我有以下由字母和数字组成的字符串**“00G990010020100038”**，我想用它们的 ASCII 值替换字母，实际上字符串中只能有一个字母，位置就是它的变化。

我尝试使用 preg_replace 没有成功，也许我做错了什么。

```
preg_replace("/[a-zA-Z]/", ord('$\1'), $mystring) 
```

我的代码用字母替换字符“$”的 ASCII 值，但我希望替换“G”（在这种情况下）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T16:52:08.470

试试这个：

```
preg_replace("/[a-zA-Z]/e", "ord('\\0')", $mystring) 
```

/e 修饰符允许您在替换中执行 PHP。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T16:59:36.930

你可以`preg_replace_callback`改用。[它比`e`修饰符更有效。](http://php.net/manual/en/function.preg-replace.php#73063)

```
preg_replace_callback(
    "/[a-zA-Z]/",
    create_function('$matches','return ord($matches[0]);'),
    $mystring
); 
```

# regex - sed 只替换最后一次匹配 - 需要匹配所有

> ID：12626303
> 
> 赞同：5
> 
> 时间：2012-09-27T16:49:10.680
> 
> 标签：regex, sed

我想用 [] 替换某一行上的所有 {}，但不幸的是，我只能匹配最后一次出现的正则表达式。

我有一个配置文件，其结构如下：

```
entry {
    id      123456789
    desc    This is a description of {foo} and was added by {bar}
    trigger 987654321
} 
```

我有以下 sed，其中能够替换最后一个匹配“bar”但不能替换“foo”：

```
sed s'/\(desc.*\){\(.*\)}/\1\[\2\]/g' < filename 
```

我将此搜索锚定到包含“desc”的行，因为我不希望它替换每个“入口”块的分隔大括号。

对于我的一生，我无法弄清楚如何替换所有的事件。

任何帮助表示赞赏 - 已经学习了一整天并且无法阅读更多教程，因为担心我的角膜可能会破裂。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T16:52:21.287

尝试以下操作：

```
sed '/desc/ s/{\([^}]*\)}/[\1]/g' filename 
```

上述命令中的搜索和替换只会对匹配 regex 的行进行`/desc/`，但我认为这实际上没有必要，因为 sed 一次处理一行文本，所以即使没有这个，你也不会替换大括号在“入口”块上。这意味着您可以将其简化为以下内容：

```
sed 's/{\([^}]*\)}/[\1]/g' filename 
```

而不是使用`.*`捕获组内部`[^}]*`，它将匹配*除*右括号之外的所有内容，这样您就不会从第一个打开到最后一个关闭进行匹配。

此外，您可以只提供文件名作为 sed 的最后一个参数，而不是使用输入重定向。

# c# - c# asp.net 服务器中的 Itextsharp 问题。无法加载文件或程序集

> ID：12626304
> 
> 赞同：1
> 
> 时间：2012-09-27T16:49:10.347
> 
> 标签：c#, asp.net, itextsharp

我正在制作一个在后面运行 c# 代码的网页。我正在使用 itextsharp 库来搜索 PDF 文件。我能够编译和部署代码，因为我确实添加了 .dll 引用并添加了所需的 using 语句来导入 .dll。但在运行时我收到此错误消息：

错误消息：无法加载文件或程序集“itextsharp，版本=5.3.2.0，文化=中性，PublicKeyToken=8354ae6d2174ddca”或其依赖项之一。该系统找不到指定的文件。Stacktrace：在 PDF_Document_Gallery.VisualWebPart1.PDF_Document_Gallery.keyword_and_content_search（字符串结果）的 PDF_Document_Gallery.VisualWebPart1.PDF_Document_Gallery.ReadPdfFile（字符串文件名）

有谁知道这里有什么问题？谢谢

# javascript - 用于本地存储的画布更改文件 api

> ID：12626305
> 
> 赞同：1
> 
> 时间：2012-09-27T16:49:17.263
> 
> 标签：javascript, html5-canvas

我正在使用画布，我有一个从用户桌面上传图像的脚本，我需要更改它以从同一页面加载图像并将它们放在画布上（从桌面上传的文件已经直接进入画布）。

功能：

```
window.onload=function(){
  var s = document.getElementById("fontsize");
  s.value="48";
  document.getElementById('loadpicture').addEventListener('change', aFileIsLoaded, false);
  backgroundimagemode=NONE;
  carpeInit();
  update();
} 
```

和：

```
function aFileIsLoaded(e1)
{
        var filename = e1.target.files[0];
        var fr = new FileReader();
    fr.onload = function(e2)
    {
          backgroundimage = new Image();
          backgroundimage.src=e2.target.result;
    };
        fr.readAsDataURL(filename);
} 
```

谢谢

这是我的第一个问题，我想我之前写错了，对不起

我现在有你建议的这段代码

```
function aFileIsLoaded(e1)
{
        var filename = e1.target.files[0];
        var fr = new FileReader();
    fr.onload = function(e2)
    {
          backgroundimage = new Image();
          backgroundimage.src=e2.target.result;
         var context = document.getElementById('myCanvas').getContext('2d');
         context.canvas.width = backgroundimage.width;
         context.canvas.height = backgroundimage.height;
         context.drawImage(backgroundimage, 0, 0, backgroundimage.width, backgroundimage.height);

    };
        fr.readAsDataURL(filename);
} 
```

之前，图像是从桌面加载的

```
<input type="file" name="backpicture" id="loadpicture"> 
```

我现在如何从图像列表中调用？谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T16:55:47.073

假设您在文档中有一个带有 id 的画布，`myCanvas`您可以将其添加到`fr.onload`您现在拥有的函数中。

```
var context = document.getElementById('myCanvas').getContext('2d');

context.canvas.width = backgroundimage.width;
context.canvas.height = backgroundimage.height;

context.drawImage(backgroundimage, 0, 0, backgroundimage.width, backgroundimage.height); 
```

哇，好快啊，不用删任何东西就这样谢谢你？

```
function aFileIsLoaded(e1)
{
        var filename = e1.target.files[0];
        var fr = new FileReader();
    fr.onload = function(e2)
   {

var context = document.getElementById('myCanvas').getContext('2d');
context.canvas.width = backgroundimage.width;
context.canvas.height = backgroundimage.height;
context.drawImage(backgroundimage, 0, 0, backgroundimage.width, backgroundimage.height);
          backgroundimage = new Image();
          backgroundimage.src=e2.target.result;
    };
        fr.readAsDataURL(filename);
} 
```

# c++ - 我如何在 xcode 上使用 valgrind？

> ID：12626306
> 
> 赞同：4
> 
> 时间：2012-09-27T16:49:20.143
> 
> 标签：c++, xcode, xcode4, valgrind

有人建议我使用 valgrind 来检查工作中的内存泄漏。我目前正在 X 代码上编译 C++。他们使用 vi。我从这里下载并安装了这个包：http: [//valgrind.org/downloads/repository.html](http://valgrind.org/downloads/repository.html)

虽然，现在我不知道如何在 X-code 上使用它。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T23:07:55.610

我们的解决方案是隔离独立目标中的所有 C++ 代码，并为 Mac（而不是 ios）编译它。您可以继续使用 xCode 来编写和运行您的代码。构建目标后，您可以执行任何第三方命令行工具，例如 valgrind 或 google 测试框架（当然是从命令行）。

# php - Yii urlManager 在 url 包含 'www' 时重写和路由

> ID：12626308
> 
> 赞同：0
> 
> 时间：2012-09-27T16:49:34.447
> 
> 标签：php, html, url, yii

我将“www”子域用作一种开始菜单，用户可以从中选择通向网站其他区域*（子域）*的多个链接。*（例如[http://www.example.com](http://www.example.com) >>（单击 Dog 链接）>> 转到[http://dogs.example.com](http://dogs.example.com)）*。简而言之，当 url 包含“www”时，我需要 Yii urlManager 做两件事：

**(1) 重写 Url：**
如果 url 包含“www”，则从 url 中删除任何额外内容，以便仅保留“http://www.example.com”。*（例如，如果用户输入[http://www.example.com/page1](http://www.example.com/page1)我们更正/重写为[http://www.example.com](http://www.example.com)）*

**(2) 路由到动作：**
如果 url 包含“www”，则让路由到特定的控制器/动作以呈现菜单。*（例如[http://www.example.com](http://www.example.com)路由到站点/菜单）*。

如何使用 Yii urlManager 做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T13:51:45.863

尝试重定向所有 www。像这样（.htaccess）向主页发出请求：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
RewriteRule ^(.*)$ http://www.example.com [R=301,L] 
```

# iphone - 在 iOS 6 中绝对不能使用谷歌地图吗？

> ID：12626316
> 
> 赞同：3
> 
> 时间：2012-09-27T16:49:55.213
> 
> 标签：iphone, google-maps, ios5, ios6, ios6-maps

我想知道是否根本不可能在 iOS 6 上使用 Google 地图？

我准备了一个应用程序，现在当我使用 iOS 6 时，它会自动获取 Apple 地图！

由于我不想使用 Apple 地图，所以我想知道是否可以在 iOS 6 上使用 Google 地图！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T16:51:42.877

你仍然可以谷歌地图，但不能在 mapkit 上。谷歌地图有一个非常有用的 API，您可以使用它来生成地图。您将无法使用 MKMapKit，但您可以使用 google 的静态地图 API 来显示地图内容。

[编辑：这是一个带有 google maps tile Link](https://github.com/mladjan/GoogleMapsOverlayiOS)的新开源项目，这是一个替代的、官方的、bing maps 工具包链接的[链接](http://www.bing.com/community/site_blogs/b/maps/archive/2011/05/05/new-bing-maps-ios-sdk.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T16:56:20.410

网站[maps.google.com](http://maps.google.com)工作正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T13:41:28.157

你现在可以。Google 为 iOS 6 提供 iOS SDK。http: [//googlegeodevelopers.blogspot.com/2012/12/a-new-way-to-add-google-maps-to-your.html](http://googlegeodevelopers.blogspot.com/2012/12/a-new-way-to-add-google-maps-to-your.html)

# c# - MVVM 中的 IEVRPresenterRegisterCallback 给出 D3DERR_DRIVERINVALIDCALL

> ID：12626317
> 
> 赞同：0
> 
> 时间：2012-09-27T16:49:58.520
> 
> 标签：c#, wpf

我正在使用 WPF 中的增强型视频渲染器，在创建 IEVRPresenterRegisterCallback 的实例时，有时会收到令人讨厌的 D3DERR_DRIVERINVALIDCALL 错误。

使用 MVVM 设计，当我切换视图时……一个视图中专门有这个演示者……并且在视图之间切换时运行大约 80% 的时间。当一个视图关闭时，一切都被释放了……所以回到同一个视图将重新创建对象。

问题是有时它确实有效......我已经确定了原因，但无法找到解决方案。

```
 int hr;
        object comObject;
        Exception exception = null;

        // A COM object we query form our native library.
        IClassFactory factory = null;

        // Create our 'helper' class.
        var evrPresenter = new EVRPresenter();

        // Call the DLL export to create the class factory.
        if (ProcessBits == 64)
        {
            hr = DllGetClassObject64(EVR_PRESENTER_CLSID, IUNKNOWN_GUID, out comObject);
        }
        else
        {
            exception = new Exception(string.Format("{0} bit processes are unsupported", ProcessBits));
            goto bottom;
        }

        // Check if our call to our DLL failed.
        if (hr != 0 || comObject == null)
        {
            exception = new COMException("Could not create a new class factory.", hr);
            goto bottom;
        }

        // Cast the COM object that was returned to a COM interface type.
        factory = comObject as IClassFactory;

        if (factory == null)
        {
            exception = new Exception("Could not QueryInterface for the IClassFactory interface.");
            goto bottom;
        }

        // Get the GUID of the IMFVideoPresenter.
        Guid guidVideoPresenter = typeof(IMFVideoPresenter).GUID;

        // Creates a new instance of the IMFVideoPresenter.
        hr = factory.CreateInstance(null, ref guidVideoPresenter, out comObject);

        // QueryInterface for the IMFVideoPresenter.
        var presenter = comObject as IMFVideoPresenter;

        // QueryInterface for our callback registration interface.
        var registerCb = comObject as IEVRPresenterRegisterCallback;

        if (registerCb == null)
        {
            exception = new Exception("Could not QueryInterface for IEVRPresenterRegisterCallback.");
            goto bottom;
        }

        // Register the callback to the 'helper' class.
        registerCb.RegisterCallback(evrPresenter);

        // Populate the IMFVideoPresenter.
        evrPresenter.VideoPresenter = presenter;

    bottom:
        if (factory != null)
        {
            Marshal.FinalReleaseComObject(factory);
        }

        if (exception != null)
        {
            throw exception;
        }

        return evrPresenter; 
```

当 facotry.CreateInstance(null, ref guidVideoPresenter, out comObject) 运行时...... comObject 大多数时候返回 IEVRPresenterRegisterCallback，但其他时候，它会吐出 null 并且 HRESULT 是 D3DERR_DRIVERINVALIDCALL ，这恰好是一个非常模糊的错误代码。

发生这种情况时，我的应用程序最终会捕获异常并继续运行而不显示任何视频。

有没有人在这种类型的设计中看到过类似的东西？

干杯。

# android - Android抽象arraylist parcelable

> ID：12626320
> 
> 赞同：2
> 
> 时间：2012-09-27T16:50:09.553
> 
> 标签：android, arraylist, abstract, parcelable

我有一个抽象对象（动物）的数组列表，我正在尝试发送和恢复这个数组。问题是我需要在重建数组时给一个创建者，此时我正在传递一个字符串，我在 Animal creator 中检查并检查我需要创建什么样的动物。

我不认为这是最有效的，那么有没有更好的方法来创建一个可打包的抽象数组？

这是一个描述问题的小演示项目。

[https://github.com/Evertvandenbruel/parcelable-abstract/tree/master/Parcelable-example/src/com/example/parcelable_example/model](https://github.com/Evertvandenbruel/parcelable-abstract/tree/master/Parcelable-example/src/com/example/parcelable_example/model)

还是有更好的方法来获取可打包对象的类型？

# javascript - 过滤后 SlickGrid 行 ID 更改

> ID：12626326
> 
> 赞同：6
> 
> 时间：2012-09-27T16:50:20.427
> 
> 标签：javascript, filter, slickgrid

我有一个带有内联过滤的 slickgrid（使用 DataView）。我为每一行数据分配了唯一的 ID，并将这个 ID（不是行号）传递给一个函数，该函数在 UI 的其他位置更新 div。

如果我不过滤，这可以正常工作。但是，如果我在传递 ID 之前过滤列，它会更改 ID 以反映行#。它甚至会将字符串 ID 更改为行号。

这似乎很奇怪。知道发生了什么吗？？？

```
grid_msc.onClick.subscribe(function(e, args) {
    var cell = grid_msc.getCellFromEvent(e);
    var row = cell.row;             // get row #
    var row_ID = data_msc[row].id;  // get the row ID, not row #
    var msc = data_msc[args.row][grid_msc.getColumns()[args.cell].field];

    alert("Row#:"+row+", RowID:"+row_ID+", Value:"+msc);
    mscToUI(msc, row_ID);
});

// Add the selected item to the UI
    function mscToUI(addC, cellNum) {
        alert(addC+", "+cellNum);
        $('#selectedMsc').append('<a href="javascript:removemsc('+cellNum+')" id="'+cellNum+'" class="rSel"><img src="images/remove.png" align="texttop" border="0" style="padding-right:4px;">'+addC+'<br /></a>');
    }
}) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-30T20:12:21.773

If you're already using DataView then you should be getting the rows/data from *it* (`dataView_msc`), rather than the original data source (`data_msc`).

```
grid_msc.onClick.subscribe(function(e, args) {
  var cell   = grid_msc.getCellFromEvent(e);  // get the cell
  var row    = cell.row;  // get the row's index (this value will change on filter/sort)
  var item   = dataView_msc.getItem(row);  // get the row's item (see: object, data)
  var msc    = item[grid_msc.getColumns()[cell.cell].field];  // get the value of the cell

  alert("Row Index:"+row+", RowID:"+item.id+", Cell Value:"+msc);
  console.log(item);
  mscToUI(msc, item.id);
}); 
```

I'm not quite sure what you're planning on doing inside `mscToUI()` with value of the clicked cell and the value of its row's `id` property. I think it might be smarter to simply pass the row's entire data object (`item`) to the function and preform any other operations using the DataView's lookup methods:

*   `getIdxById(id)` - With the item's id, find the relative row index in the grid`
*   `getItem(i)` - With the row index of the **filtered grid**, return the data/item for said row
*   `getItemById(id)` - With the item's id, return the data/item for said item
*   `getItemByIdx(i)` - With the row index of the **unfiltered grid**, return the data/item for said row

# c++ - 在构造函数 C++ 中初始化指向函数的成员指针

> ID：12626329
> 
> 赞同：1
> 
> 时间：2012-09-27T16:50:24.173
> 
> 标签：c++, initialization, function-pointers

我有这个成员定义在

```
class X
{
   private:

      int (TMyClass::*pt2Member)(float, char, char);
} 
```

我想在构造函数中将此成员初始化为 NULL。有没有可能这样：

```
 X::X()
 {
      TMyClass::*pt2Member = NULL;
 } 
```

?

什么是正确的语法？我的函数是 C++ 非静态的。

那么，我应该如何编写setter呢？

```
// declaration
void set_pointer_to_function(int(*pt2func)(float f, char c, char c));

// definition
void X::set_pointer_to_function(int(*pt2func)(float f, char c, char c))
{
     pt2Member = pt2func;
} 
```

这是对的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T16:52:00.013

您需要分配给指针本身，而不是它指向的内容。通过做你正在做的事情，你正在尝试取消引用指针，这在这种情况下不起作用，因为它是一个方法指针，并且它指向的位置（以及取消引用它的副作用）是未定义的，因为你尚未分配给它。

```
TMyClass::pt2Member = NULL; 
```

因此会起作用。此外，您可以将其与构造函数一起初始化，如下所示：

```
X::X() : pt2Member(NULL)
{
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T16:52:26.657

像这样：

```
class TMyClass;

class X
{
private:
    int (TMyClass::*pt2Member)(float, char, char);
public:
    X() : pt2Member(NULL) { }
}; 
```

# c# - 有什么方法可以加快实体框架中的 CreateIfNotExists？

> ID：12626331
> 
> 赞同：3
> 
> 时间：2012-09-27T16:50:38.553
> 
> 标签：c#, sql-server-2008, entity-framework, entity-framework-4

我在 SQL Server 2008 上使用 EF 4.3 Code First。我运行了几个测试套件，使用 CreateIfNotExists 删除和重新创建数据库。这工作正常，但狗慢。在第一次调用时创建数据库最多可能需要 15 秒，之后通常需要 3-6 秒。我有几个地方叫这个。我已经优化了尽可能少地调用它。我可以做些什么来以编程方式加快数据库创建速度？如果有帮助，我愿意绕过 EF 来执行此操作，但我想将我的数据库构建在代码中，而不是返回到 SQL 脚本。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T09:00:11.980

> 这工作正常，但狗慢。

是的。关键是仅将真实数据库用于不需要经常执行的集成测试，并且整套集成测试通常仅在构建服务器上执行。

> 在第一次调用时创建数据库最多可能需要 15 秒

这是因为[单元测试时EF初始化缓慢](https://stackoverflow.com/questions/12584628/entity-framework-spinup-much-slower-on-x64-vs-x86/12588503#12588503)（可以尝试切换到x86）。时间也被视图生成所消耗。[可以预先生成视图](https://stackoverflow.com/questions/10757019/entity-framework-initialization-is-slow-what-can-i-do-to-bootstrap-it-faster/10770346#10770346)，这通常是为了减少实际系统的启动和初始化，但在加速单元测试的情况下，使用视图预生成不会有太大帮助，因为您只是将时间从测试转移到构建。

> 如果有帮助，我愿意绕过 EF 来做这件事，但我想保持我的数据库在代码中构建，而不是回到 SQL

四处走动只是意味着使用普通的旧 SQL 脚本。此操作所需的额外时间可能会花费在生成该 SQL 上。我认为 SQL 没有被缓存，因为正常的应用程序执行通常不需要它超过一次，但是您可以要求 EF 至少给您该 SQL 的最重要部分，将其缓存在某处并在您每次需要时自行执行它. EF 能够为您提供表和约束的 SQL：

```
var dbSql = ((IObjectContextAdapter) context).ObjectContext.CreateDatabaseScript(); 
```

您只需要拥有自己的小 SQL 即可创建数据库并将它们一起使用。即使像下面的脚本也应该足够了：

```
CREATE DATABASE YourDatabaseName

USE YourDatabaseName 
```

您还必须首先在代码中关闭数据库生成，以使其正常工作并控制该过程：

```
Database.SetInitializer<YourContextType>(null); 
```

执行数据库创建 SQL 时，您需要单独的连接字符串指向`Master`数据库。

# c# - 选择查询错误

> ID：12626334
> 
> 赞同：0
> 
> 时间：2012-09-27T16:50:47.690
> 
> 标签：c#, sql-server-2005

我想通过匹配用户名和密码来创建一个登录帐户。我想将结果保存在名为 result 的局部变量中。当用户登录时，结果应该是 1，但它总是返回 -1。我的代码如下......

```
 protected void LoginBtn_Click(object sender, EventArgs e)
    {
        string Name = nameTextBox.Text;
        string Password = passwordTextBox.Text;
        nameTextBox.Text = "";
        passwordTextBox.Text = "";
        string connectionstring = @"Integrated Security=True;Initial Catalog=HMIS;Data Source=.\SQLEXPRESS";
        SqlConnection connection = new SqlConnection(connectionstring);
        connection.Open();
        string selectquery = "Select ID from  UsersInfo where UserName='" + @Name+ "' and Password='" + @Password + "'";
        SqlCommand cmd = new SqlCommand(selectquery, connection);
        cmd.Parameters.AddWithValue("@UserName", Name);
        cmd.Parameters.AddWithValue("@Password", Password);
         //object result = cmd.ExecuteNonQuery();
        //if (result != null)
        int result = (int)cmd.ExecuteNonQuery();
        if (result > 0) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T16:58:19.997

ExecuteNonQuery 方法返回受 INSERT、UPDATE 或 DELETE 影响的行数。对于所有其他类型的语句，返回值为 -1。

请改用 ExecuteReader 方法。这将返回一个具有 HasRows 属性的 SqlDataReader。ExecuteNonQuery 不应用于 SELECT 语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T16:56:21.437

您的参数名称不正确 @UserName 而在查询字符串中使用了 @Name。

试试这个代码。

```
protected void LoginBtn_Click(object sender, EventArgs e)
{
    string Name = nameTextBox.Text;
    string Password = passwordTextBox.Text;
    nameTextBox.Text = "";
    passwordTextBox.Text = "";
    string connectionstring = @"Integrated Security=True;Initial Catalog=HMIS;Data Source=.\SQLEXPRESS";
    SqlConnection connection = new SqlConnection(connectionstring);
    connection.Open();
    string selectquery = "Select ID from  UsersInfo where UserName='" + @Name+ "' and Password='" + @Password + "'";
    SqlCommand cmd = new SqlCommand(selectquery, connection);
    cmd.Parameters.AddWithValue("@Name", Name);
    cmd.Parameters.AddWithValue("@Password", Password);
     //object result = cmd.ExecuteNonQuery();
    //if (result != null)
    int result = (int)cmd.ExecuteNonQuery();
    if (result > 0) 
```

# python - 代码风格——“扁平化”一个包的命名空间

> ID：12626336
> 
> 赞同：4
> 
> 时间：2012-09-27T16:50:51.830
> 
> 标签：python, coding-style, namespaces, flatten

我的包层次结构：

```
InstrumentController/
    __init__.py
    instruments/
        __init__.py
        _BaseInstrument.py
        Keithley2000.py
        # etc... 
```

仪器文件的内容：

```
# _BaseInstrument.py
class _BaseInstrument(object):
    """Base class for instruments"""
    # etc...

# Keithley2000.py
from InstrumentController.instruments._BaseInstrument import _BaseInstrument
class Keithley2000(_BaseInstrument):
    # etc... 
```

我希望我的用户能够访问这些类，而不必深入研究模块的层次结构。他们应该只需要输入`from InstrumentController.instruments import Keithley2000`，而不是`from InstrumentController.instruments.Keithley2000 import Keithley2000`。

为此，我有一堆这样的行`InstrumentController.instruments.__init__`：

```
from .Keithley2000 import Keithley2000
from .StanfordSR830 import StanfordSR830
# etc... 
```

所以现在这些类位于包命名空间的*顶部*，而不是子模块中。我的问题是：这是个好主意吗？这些类与它们所属的模块具有相同的名称，因此在顶层导入该类会使模块不可用。这让我有点神经质——有没有更好的方法呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T17:01:56.007

你的做法是可以接受的，但我建议你将所有包/模块名称重新转换为小写 1) 这是[PEP 8 中指定](http://www.python.org/dev/peps/pep-0008/#package-and-module-names)的约定，以及 2) 它将消除你的阴影问题。

# python - 从字符串调用函数 (key[:-1]())

> ID：12626339
> 
> 赞同：0
> 
> 时间：2012-09-27T16:51:02.637
> 
> 标签：python

基本上我有一个字典中的 key:items 列表，我正在使用循环来查找与我得到的项目匹配的键，并且每个键都有函数。不过钥匙是有编号的，所以我需要去掉最后一个数字。

这让我需要从主题中的字符串中调用一个函数：

```
key[-1]() 
```

key[-1] 实际上是一个返回类似 scalcs 的字符串，这是我需要调用的函数的名称。

我四处搜索并看到了有关课​​程的内容。我是新手，老实说，我从来没有使用过类，并且有很多代码和很多这些功能。如果可能的话，我宁愿不这样做。

```
d = {key1: item1, key2: item2, akey1: item3, akey2: item4, dkey1: item1, dkey2: item2} 
```

当我的值与附加到字典中键的值匹配时，我想调用 key、akey 或 dkey。

所以我会像这样循环遍历 d：

```
 for key, value in d.items():
        if id == value:
            print key[:-1] 
```

现在我只需要调用那个键[:-1]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T16:53:49.193

```
def hello_world():
    print "hello world"

d = {'hello':hello_world}

d['hello']()

locals()['hello_world']() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T16:56:42.407

您可以尝试存储函数本身，而不是将函数的*名称存储为字典的键：*

```
>>> f = lambda x:x+1
>>> g = lambda x:x-1
>>> D = {f:'0', g:'1'}
>>> (F,) = [k for k,v in D.items() if v=="0"]
>>> F(3)
4 
```

如果您需要将键保存为字符串，则创建一个`(key_as_string, corresponding_function)`包含所有对应关系的第二个字典，并检索与您在上一步中获得的键对应的函数。

* * *

请注意，您需要非常小心，不要有多个具有相同值的键，否则，您将无法获得唯一的功能。最安全的方法是建立一个你所拥有的反向字典：`(some_string_index, a_function)`.

另请注意，该函数只是一个对象：在上面的示例中，我使用了非常简单的东西，例如 a `lambda`，但您可以使用更复杂的东西：

```
def a_function(...):
    ...

your_dictionary = {a_function: your_index}
safer_dictionary = {your_index: a_function} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T17:00:25.477

我不完全确定我理解你的问题。以下是对的吗？

> 你有字典
> 
> ```
> d1 = {key1: item1, key2: item2, ...} 
> ```
> 
> 和
> 
> ```
> d2 = {key1: function1, key2: function2, ...} 
> ```
> 
> 给定一个项目`item2`，你想找到`function2`。

如果是这样，那么您应该以不同的方式存储您拥有的信息，形式为

```
d = {item1: function1, item2: function2, ...} 
```

你想要的功能是 then `d[item2]`。

* * *

`d`要从`d1`and生成`d2`，您可以执行

```
d = {item: d2[key] for key, item in d1.items()} 
```

# jquery - 使用 jQuery + Knockout 两次获得相同的值

> ID：12626341
> 
> 赞同：2
> 
> 时间：2012-09-27T16:51:09.023
> 
> 标签：jquery, knockout.js

我在使用 jQuery 和 KnockoutJS 时遇到问题。我正在尝试阅读带有单选按钮的表格，您可以在其中选择您是男性/女性。

profile().gender 值是'm'，所以'checked'的东西有效。但是在 jQuery 中，我应该对 'm' 和 'f' 都保持警惕，但我会得到两次 'm'。

我有这个 HTML：

```
<input type="radio" class="profile gender" name="gender" data-bind="value: 'm', attr: { checked: profile().gender=='m' }" /> Male
<input type="radio" class="profile gender" name="gender" data-bind="value: 'f', attr: { checked: profile().gender=='f' }" /> Female 
```

然后用这个 jQuery 代码阅读它：

```
$('.profile').each(function() {
    var self = this;
    alert($('.gender').val());
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T16:52:14.250

您必须在警报中声明的语句`$('.gender').val()`将始终为您提供第一个元素，您需要提供元素索引才能通过它们。

```
$('.profile').each(function(i) {
    var self = this;
    alert($('.gender').eq(i).val());
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T19:31:45.760

@Adil 是正确的，但这可以简化，因为您在`this`调用每个元素时已经引用了每个元素：

```
$('.profile.gender').each(function() {
    alert($(this).val());
}); 
```

# c# - String 的方法，比如 MiddleIndexOf - 可以吗？

> ID：12626348
> 
> 赞同：0
> 
> 时间：2012-09-27T16:51:24.773
> 
> 标签：c#, string

我知道如何使用字符串的方法`IndexOf`和`LastIndexOf`. 但是我想知道是否有可能以某种“MiddleIndexOf”的“短途”方式进行，所以介于`IndexOf`和之间`LastIndexOf`。

告诉你我的意思，最好的方法是展示一个例子：

```
string str = @"1\2\3\4\5"; 
```

从 4 开始（所以“4\5”）如何获得部分上部字符串。这意味着我不能使用 IndexOf 或 LastIndexOf，但我需要类似“BeforeLastIndexOf”方法。

或者不仅如此，假设我想要从 3 开始的部分字符串（所以“3\4\5”）。这甚至意味着我不能使用“BeforeLastIndexOf”，而是使用不同的东西。

--

这意味着：LastIndexOf 之前 1，或 LastIndexOf 之前 2（或者可能从前面：IndexOf 之后 2，或 IndexOf 之后 3）。

--

我知道我可以通过反斜杠分隔符拆分字符串，但我想知道是否有任何方法可以使用字符串方法（如解释的那样）。

提前致谢，

再见

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T16:53:44.363

没有`MiddleIndexOf`，但两者都[`IndexOf`](http://msdn.microsoft.com/en-us/library/7cct0x33.aspx)允许[`LastIndexOf`](http://msdn.microsoft.com/en-us/library/bc3z4t9d.aspx)您选择开始搜索的点。

例如：

```
string str = @"1\2\3\4\5";
//    indexes: 012345678
int index = str.IndexOf('\\', 4);
// index = 5, it starts searching from: "3\4\5" 
```

要获取第二个斜杠的索引，您需要执行以下操作：

```
string str = @"1\2\3\4\5";
int index = str.IndexOf('\\', str.IndexOf('\\') + 1); 
```

要获得倒数第二个斜杠，代码如下：

```
string str = @"1\2\3\4\5";
int index = str.LastIndexOf('\\', str.LastIndexOf('\\') - 1); 
```

* * *

要列出字符串中字符的每个索引，这些扩展方法可以提供帮助：

```
public static int[] GetAllIndexes(this string @this, string substr)
{
    var indexes = new List<int>();
    int index = -1;
    while ((index = @this.IndexOf('\\', index + 1)) >= 0) indexes.Add(index);
    return indexes.ToArray();
}
public static int[] GetAllIndexes(this string @this, char substr)
{
    var indexes = new List<int>();
    int index = -1;
    while ((index = @this.IndexOf('\\', index + 1)) >= 0) indexes.Add(index);
    return indexes.ToArray();
} 
```

它可以这样使用：

```
string str = @"1\2\3\4\5";
int[] indexes = str.GetAllIndexes('\\'); 
```

* * *

您描述的`BeforeLastIndexOf`功能可能如下所示：

```
public static int BeforeLastIndexOf(this string @this, string substr, int beforeCount)
{
    int index = @this.LastIndexOf(substr, @this.Length - 1);
    for (int i = 0; i < beforeCount && index >= 0; i++)
        index = @this.LastIndexOf(substr, index - 1);
    return index;
}
public static int BeforeLastIndexOf(this string @this, char substr, int beforeCount)
{
    int index = @this.LastIndexOf(substr, @this.Length - 1);
    for (int i = 0; i < beforeCount && index >= 0; i++)
        index = @this.LastIndexOf(substr, index - 1);
    return index;
} 
```

你会像这样使用它：

```
string str = @"1\2\3\4\5";
//    indexes: 0123456789
int index = str.BeforeLastIndexOf('\\', 2); 
```

它会在最后一个索引之前返回 2 个索引。在这种情况下，它会返回 3。（\5 是最后一个，然后是 \4，然后是 \3，\3 之前的 \ 的索引是 3）。

* * *

你可以做同样的事情`IndexOf`并做一个`AfterIndexOf`：

```
public static int AfterIndexOf(this string @this, string substr, int afterCount)
{
    int index = @this.IndexOf(substr);
    for (int i = 0; i < afterCount && index >= 0; i++)
        index = @this.IndexOf(substr, index + 1);
    return index;
}
public static int AfterIndexOf(this string @this, char substr, int afterCount)
{
    int index = @this.IndexOf(substr);
    for (int i = 0; i < afterCount && index >= 0; i++)
        index = @this.IndexOf(substr, index + 1);
    return index;
} 
```

你可以像这样使用它：

```
string str = @"1\2\3\4\5";
//    indexes: 0123456789
int index = str.AfterIndexOf('\\', 2); 
```

这又返回 5，即 4 之前的 \。

* * *

要真正获得 MiddleIndexOf，或者换句话说，最接近中间的索引，您可以使用此扩展方法：

```
public static int MiddleIndexOf(this string @this, string substr, bool roundUp = false, bool preferUp = true)
{
    // Determine the middle character
    int middlePoint = (roundUp ? @this.Length : @this.Length - 1) / 2;

    // Find the indexes closest to the middle
    int indexBelow = @this.LastIndexOf(substr, middlePoint);
    int indexAbove = @this.IndexOf(substr, middlePoint);
    if (indexBelow < 0) return indexAbove;
    if (indexAbove < 0) return indexBelow;

    int diffBelow = middlePoint - indexBelow;
    int diffAbove = indexAbove - middlePoint;

    return diffAbove == diffBelow ? (preferUp ? indexAbove : indexBelow) : // If it's the same difference
        (diffAbove < diffBelow ? indexAbove : indexBelow); // Otherwise return the closest index
}
public static int MiddleIndexOf(this string @this, char substr, bool roundUp = false, bool preferUp = true)
{
    // Determine the middle character
    int middlePoint = (roundUp ? @this.Length : @this.Length - 1) / 2;

    // Find the indexes closest to the middle
    int indexBelow = @this.LastIndexOf(substr, middlePoint);
    int indexAbove = @this.IndexOf(substr, middlePoint);
    if (indexBelow < 0) return indexAbove;
    if (indexAbove < 0) return indexBelow;

    int diffBelow = middlePoint - indexBelow;
    int diffAbove = indexAbove - middlePoint;

    return diffAbove == diffBelow ? (preferUp ? indexAbove : indexBelow) : // If it's the same difference
        (diffAbove < diffBelow ? indexAbove : indexBelow); // Otherwise return the closest index
} 
```

你可以像这样使用它：

```
string str = @"1\2\3\4\5\";
int index = str.MiddleIndexOf('\\'); 
```

有两个可选参数：

*   `roundUp`: 如果它设置为 true，并且你有偶数个字符，它会向上取整，否则它会向下取整。例如，如果您有 8 个字符：如果 roundUp 为 false，`"12345678"`它将选择作为中间点，否则.`4``5`
*   `preferUp`：当字符串后面的中间点与字符串前面的字符一样多的字符时，这将确定它选择哪个字符。默认情况下，它设置为`true`补偿向下舍入。（如果你有一个 8 个字符`"\1\2\3\4"`的字符串，中间点应该是 3.5，但是因为这是不可能的，所以它会从索引 3 开始搜索。索引 3与上面一样远。但由于这是`'2'`真的`\`，它会选择索引 4 处距离中点 0.5 远的字符，否则它会选择下面的索引，这将`1.5`远离真正的中点。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T16:53:35.467

您可以提供一个起点[`String.IndexOf(string, Int32)`](http://msdn.microsoft.com/en-us/library/7cct0x33.aspx)。如果结果索引超出您的“终点”，则两者之间不存在任何内容。

例如，给定您的字符串：

```
string str = @"1\2\3\4\5"; 
```

如果您想限制`@"4\5"`并找到斜线的索引：

```
int index = str.IndexOf(@"\", 6); // Start at char 6, returns 7 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T16:54:04.230

如果您知道第一个字符的索引，则可以使用在第一个字符`string.IndexOf(value, startIndex)`之后开始搜索下一个实例。

此代码将获取第二个字符的索引：

```
public int static SecondIndexOf(this string str, char value)
{
    var firstIndex = str.IndexOf(char);
    if (firstIndex == -1)
        return firstIndex;

    return str.IndexOf(char, firstIndex + 1);
} 
```

# nlp - 自然语言处理的数学要求是什么？

> ID：12626349
> 
> 赞同：3
> 
> 时间：2012-09-27T16:51:38.603
> 
> 标签：nlp

我试过环顾四周，但在进入 NLP 之前，我似乎无法找到我需要什么数学的答案。我希望在进入 NLP 之前打下坚实的数学基础。

从我收集到的主要是：概率，一些统计数据，离散数学

感谢您的时间。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T17:43:56.783

与大多数领域一样，一旦您深入研究，您就会发现“NLP”这个标题涵盖了相当广泛的子领域。数学要求差异很大，具体取决于您要完成的任务。因此，有关您的目标的更多细节会有所帮助。

也就是说，我可以解决解析和我有一些经验的相关领域，并对其他一些领域提供非常笼统的评论。

你会发现离散数学和自动机理论在任何计算机科学学科中都很有用，所以你不会出错。

一些 NLP 工作比计算机科学更接近语言学或心理学。因此，如果您感兴趣的话，一些语言学理论可能会有所帮助，以及统计假设检验的一些背景（您可能会在社会科学部门找到的那种应用统计，尽管越严格越好）。

对于形态学、标记、解析和相关领域，一些概率论是有帮助的（就像考虑动态规划的经验一样，尽管那不是真正的数学背景）。如果您正在做任何涉及机器学习（这是 NLP 的大部分内容）的事情，它有助于理解一些线性代数。

也就是说，如果您的目标更加实用，您可以通过应用现有工具来完成很多工作，而无需详细了解底层数学（如果您只需要一个分类器，则不需要任何线性代数来训练 SVM） .

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-09-25T12:12:21.180

为了理解，没有数学来模拟语言。“模型”意味着函数将语言表达式映射到数字或实用程序。“领悟”来自超越自然科学的表现和构图。

# c# - 多对多关系 - 检索两端

> ID：12626352
> 
> 赞同：0
> 
> 时间：2012-09-27T16:51:44.567
> 
> 标签：c#, linq, entity-framework, linq-to-entities

我在 Code First Entity Framework 中设置了以下实体：

```
 public class User
 {
    public int UserId { get; set; }
    public virtual ICollection<Task> Tasks { get; set; }
 }

 public class Task 
 {
     public int TaskId { get; set; }
     public virtual ICollection<User> Users { get; set; }
 } 
```

我将如何为给定用户编写一个查询，返回分配给该用户的所有任务，并且这些任务包括分配给该任务的所有用户。

例如：

我被分配了两个任务。这两个任务分配给我和另一个用户。

当我检索我的用户时，我希望 Tasks 集合包含分配给我的两个任务，并且当我查看其中一个任务时，它应该有一个对我的用户和另一个用户的引用。

我不想使用延迟加载。

我试过类似的东西：

```
 db.Users.Include(t => t.Tasks.Include(u => u.Users)).SingleOrDefault(u => u.UserId == 1) 
```

但它没有用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T16:56:14.257

只需将第二个替换`Include`为`Select`：

```
db.Users.Include(t => t.Tasks.Select(u => u.Users))
    .SingleOrDefault(u => u.UserId == 1); 
```

# hibernate - 如何知道鉴别器的值

> ID：12626353
> 
> 赞同：1
> 
> 时间：2012-09-27T16:51:44.203
> 
> 标签：hibernate, discriminator

首先我要感谢这个论坛的管理员和所有参与它的人，这是我发布的第一个问题，所以让我们以这个与hibernate映射为例，

```
@Entity
@Inheritance
@DiscriminatorColumn(name="PROJ_TYPE")
@Table(name="PROJECT")
public abstract class Project {
  @Id
  private long id;
  ...
}
@Entity
@DiscriminatorValue("L")
public class LargeProject extends Project {
  private BigDecimal budget;
}
@Entity
@DiscriminatorValue("S")
public class SmallProject extends Project {
} 
```

所以我有一个带有鉴别器值的表，我创建了一个函数，它使用 Hql 从数据库中返回一个项目，我想知道如何知道这个对象的鉴别器值。提前致谢。

# sas - 同时使用 dsd 和逗号信息

> ID：12626358
> 
> 赞同：0
> 
> 时间：2012-09-27T16:52:06.353
> 
> 标签：sas

我有以下原始数据

```
1,,35,000  
2,100,45,000 
```

并且需要数据集中的以下内容

```
1 .   35000  
2 100 45000 
```

这将需要 dsd 选项和使用逗号。提供信息。

如何执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T18:34:50.587

DSD 与此无关 - DSD 涉及输入，例如 1,,"35,000" 2,100,"45,000"

如果这就是您所拥有的，那么您可以使用 : 运算符将其与逗号信息一起读入。

```
data test;
infile datalines dlm=',' dsd;
input id
num
dollar :comma8.;    
datalines;
1,,"35,000"
2,100,"45,000"
;;;;
run; 
```

如果字段周围没有引号，那么您将需要以某种方式对其进行解析。下面是一种解决方案，只要带逗号的字段是最后一个字段，它就可以工作。

```
data test;
infile datalines dlm=',' dsd;
input @;
if countc(_infile_,',') =3 then do;
 _commapos = findc(_infile_,',',-1*length(_infile_));
 _infile_ = substr(_infile_,1,_commapos-1)||substr(_infile_,_commapos+1);
end;
input id
num
dollar ;
put _all_;
datalines;
1,,35,000
2,100,45,000
;;;;
run; 
```

如果您的潜力所在的领域是一致的领域，但不是第一个领域，您可以修改上述解决方案来纠正它。如果它可能涉及多个领域，那么您需要解决的问题要困难得多。

# python - Virtualenv 外壳错误

> ID：12626370
> 
> 赞同：16
> 
> 时间：2012-09-27T16:52:34.820
> 
> 标签：python, virtualenv, pip

我刚刚在我的 Mac 上安装了 virtualenv（使用 Python 2.7.2），并按照此处的指南进行操作：http: [//virtualenvwrapper.readthedocs.org/en/latest/install.html](http://virtualenvwrapper.readthedocs.org/en/latest/install.html)

但是现在每次启动 shell 时都会出现以下错误：

```
stevedore.extension Could not load 'user_scripts': distribute
stevedore.extension distribute
Traceback (most recent call last):
  File "/Library/Python/2.7/site-packages/stevedore/extension.py", line 62, in __init__
    invoke_kwds,
  File "/Library/Python/2.7/site-packages/stevedore/extension.py", line 74, in _load_one_plugin
    plugin = ep.load()
  File "/Library/Python/2.7/site-packages/setuptools-0.6c11-py2.7.egg/pkg_resources.py", line 1953, in load
    if require: self.require(env, installer)
  File "/Library/Python/2.7/site-packages/setuptools-0.6c11-py2.7.egg/pkg_resources.py", line 1966, in require
    working_set.resolve(self.dist.requires(self.extras),env,installer))
  File "/Library/Python/2.7/site-packages/setuptools-0.6c11-py2.7.egg/pkg_resources.py", line 565, in resolve
    raise DistributionNotFound(req)  # XXX put more info here
DistributionNotFound: distribute
stevedore.extension Could not load 'project': distribute
stevedore.extension distribute
Traceback (most recent call last):
  File "/Library/Python/2.7/site-packages/stevedore/extension.py", line 62, in __init__
    invoke_kwds,
  File "/Library/Python/2.7/site-packages/stevedore/extension.py", line 74, in _load_one_plugin
    plugin = ep.load()
  File "/Library/Python/2.7/site-packages/setuptools-0.6c11-py2.7.egg/pkg_resources.py", line 1953, in load
    if require: self.require(env, installer)
  File "/Library/Python/2.7/site-packages/setuptools-0.6c11-py2.7.egg/pkg_resources.py", line 1966, in require
    working_set.resolve(self.dist.requires(self.extras),env,installer))
  File "/Library/Python/2.7/site-packages/setuptools-0.6c11-py2.7.egg/pkg_resources.py", line 565, in resolve
    raise DistributionNotFound(req)  # XXX put more info here
DistributionNotFound: distribute
stevedore.extension Could not load 'user_scripts': distribute
stevedore.extension distribute
Traceback (most recent call last):
  File "/Library/Python/2.7/site-packages/stevedore/extension.py", line 62, in __init__
    invoke_kwds,
  File "/Library/Python/2.7/site-packages/stevedore/extension.py", line 74, in _load_one_plugin
    plugin = ep.load()
  File "/Library/Python/2.7/site-packages/setuptools-0.6c11-py2.7.egg/pkg_resources.py", line 1953, in load
    if require: self.require(env, installer)
  File "/Library/Python/2.7/site-packages/setuptools-0.6c11-py2.7.egg/pkg_resources.py", line 1966, in require
    working_set.resolve(self.dist.requires(self.extras),env,installer))
  File "/Library/Python/2.7/site-packages/setuptools-0.6c11-py2.7.egg/pkg_resources.py", line 565, in resolve
    raise DistributionNotFound(req)  # XXX put more info here
DistributionNotFound: distribute 
```

我不知道它是否会影响这个问题，但我正在使用 ZSH。

我尝试通过 pip (sudo pip install stevedore) 安装 stevedore，但出现以下错误：

```
sudo sh setuptools-0.6c11-py2.7.egg
Processing setuptools-0.6c11-py2.7.egg
removing '/Library/Python/2.7/site-packages/setuptools-0.6c11-py2.7.egg' (and everything under it)
Copying setuptools-0.6c11-py2.7.egg to /Library/Python/2.7/site-packages
setuptools 0.6c11 is already the active version in easy-install.pth
Installing easy_install script to /usr/local/bin
Installing easy_install-2.7 script to /usr/local/bin

Installed /Library/Python/2.7/site-packages/setuptools-0.6c11-py2.7.egg
Processing dependencies for setuptools==0.6c11
Finished processing dependencies for setuptools==0.6c11
TXSLs-MacBook-Pro% sudo pip install stevedore --upgrade
Requirement already up-to-date: stevedore in /Library/Python/2.7/site-packages
Downloading/unpacking distribute (from stevedore)
  Running setup.py egg_info for package distribute

Installing collected packages: distribute
  Running setup.py install for distribute
    Before install bootstrap.
    Scanning installed packages
    Setuptools installation detected at /Library/Python/2.7/site-packages/setuptools-0.6c11-py2.7.egg
    Egg installation
    Patching...
    Renaming /Library/Python/2.7/site-packages/setuptools-0.6c11-py2.7.egg into /Library/Python/2.7/site-packages/setuptools-0.6c11-py2.7.egg.OLD.1348764450.4
    Patched done.
    Relaunching...
    Traceback (most recent call last):
      File "<string>", line 1, in <module>
    NameError: name 'install' is not defined
    Complete output from command /usr/bin/python -c "import setuptools;__file__='/tmp/pip-build/distribute/setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --record /tmp/pip-FAPgYH-record/install-record.txt --single-version-externally-managed:
    Before install bootstrap.

Scanning installed packages

Setuptools installation detected at /Library/Python/2.7/site-packages/setuptools-0.6c11-py2.7.egg

Egg installation

Patching...

Renaming /Library/Python/2.7/site-packages/setuptools-0.6c11-py2.7.egg into /Library/Python/2.7/site-packages/setuptools-0.6c11-py2.7.egg.OLD.1348764450.4

Patched done.

Relaunching...

Traceback (most recent call last):

  File "<string>", line 1, in <module>

NameError: name 'install' is not defined

----------------------------------------
Command /usr/bin/python -c "import setuptools;__file__='/tmp/pip-build/distribute/setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --record /tmp/pip-FAPgYH-record/install-record.txt --single-version-externally-managed failed with error code 1 in /tmp/pip-build/distribute
Storing complete log in /Users/txsl/Library/Logs/pip.log 
```

我手动安装了 setuptools，因为没有它我无法通过 pip 安装任何东西。

这里出了什么问题，我该如何解决？互联网上似乎没有很多与装卸工人有关的错误案例。我现在感觉有点卡住了！

非常感谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-04T12:31:08.100

我也使用 zsh 并且遇到了类似的问题。我解决了这个问题：

```
sudo pip install virtualenv virtualenvwrapper 
```

`python-pip`我的Ubuntu 12.04 中安装了该软件包。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-09-27T17:16:15.003

根据您收到的错误，您似乎遇到以下错误：[install glitch when using pip + virtualenv](https://bitbucket.org/tarek/distribute/issue/91/install-glitch-when-using-pip-virtualenv)。

使用 -distribute 开关时会产生此问题。修复方法是（无需使用 --distribute 重新运行 virtualenv）：

```
source bin/activate
wget http://python-distribute.org/distribute_setup.py
python distribute_setup.py 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-01-25T17:17:34.763

有相同的错误消息，升级 setuptools 为我解决了这个问题。

```
pip install --upgrade setuptools 
```

我在这个线程中找到了信息：http: [//blog.gmane.org/gmane.comp.python.virtualenv/month=20131001](http://blog.gmane.org/gmane.comp.python.virtualenv/month=20131001)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-01-25T18:05:06.053

升级到 OSX Mavericks 后我遇到了同样的问题。我通过全局安装分发来修复它。

```
sudo pip install distribute 
```

我首先停用了我当前的 virtualenv。

# eclipse - 为什么 Facelet HTML Validator 验证我的 xhtml 文件没有完成

> ID：12626372
> 
> 赞同：17
> 
> 时间：2012-09-27T16:52:38.460
> 
> 标签：eclipse, facelets, validation

我有 1 个文件 xthml，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui"
    template="/WEB-INF/templates/default.xhtml">

<ui:define name="content">
.......
</ui:define>
</ui:composition> 
```

重新启动我的 Eclipse 3.7 后，Eclipse 执行验证，但它总是运行：“Facelet HTML 验证器开始验证：student.xhtml”。如果我在 Windows - Preference 中禁用 Facelet 验证，当我在此 xhtml 文件中执行 Ctrl + Space 时，eclipse 将没有响应。我该怎么做才能解决这个问题？谢谢。

# quartz-scheduler - 集群环境中的 Quartz 调度器

> ID：12626380
> 
> 赞同：38
> 
> 时间：2012-09-27T16:53:30.647
> 
> 标签：quartz-scheduler

我在用

```
SchedulerFactory schedulerFactory = new StdSchedulerFactory();
scheduler = schedulerFactory.getScheduler();
scheduler.start();
Trigger asapTrigger = getAsapTrigger();
JobDetail asapJob = getAsapJobDetails();
scheduler.scheduleJob(asapJob, asapTrigger); 
```

这是有效的，但是当我去集群环境时，2个线程正在为同一个工作运行。

我使用的是注释而不是属性文件。我只想运行一个线程。有人可以帮忙吗。如何配置？

我的代码几乎看起来像： http: [//k2java.blogspot.com/2011/04/quartz.html](http://k2java.blogspot.com/2011/04/quartz.html)

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-09-27T20:14:57.943

您必须配置 Quartz 才能在集群环境中运行。集群目前仅适用于 JDBC 作业存储，并且通过让集群的每个节点共享同一个数据库来工作。

*   如果您有多个使用同一组数据库表的 Quartz 实例，请将org.quartz.jobStore.isClustered**属性**设置为**true 。**该属性用于开启聚类功能。
*   设置**org.quartz.jobStore.clusterCheckinInterval**属性（毫秒），这是该实例与集群的其他实例签入的频率。
*   将**org.quartz.scheduler.instanceId**设置为**AUTO**，以便集群中的每个节点都有一个唯一的 instanceId。

请注意，集群中的每个实例都应使用相同的 quartz.properties 文件副本。此外，如果您在不同的机器上使用集群，请确保它们的时钟是同步的。

有关更多信息，请查看包含集群调度程序示例属性文件的[官方文档。](http://www.quartz-scheduler.org/documentation/quartz-2.3.0/configuration/ConfigJDBCJobStoreClustering.html)

# sql - 显示时差乱序

> ID：12626382
> 
> 赞同：2
> 
> 时间：2012-09-27T16:53:30.580
> 
> 标签：sql, sql-server, tsql

对于每个 WorkflowId 分组，我想计算一个 20 的流程代码在 10 的流程代码之前有多少次 LastModifiedTime。

此查询显示表布局和一些数据：

```
SELECT TOP 10 * 
FROM master.ProcessLogging with (nolock) 
WHERE ProcessCode = 10 OR ProcessCode = 20 
ORDER BY WorkflowId, ProcessCode 
```

![在此处输入图像描述](../Images/1b26e6491b7b2ab3517fb9badef26ebd.png)

我已经尝试了一些东西，但我很难让它发挥作用。每次尝试都导致了不值得在这里发布的死胡同。有没有办法查看 20 出现在 10 之前的所有时间？甚至可能看到它们之间的时差？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T17:03:15.990

经审查，如果一组中超过 10 个，这将中断

一个组中是否会超过 10 个，如果是，您希望如何处理？

```
SELECT p10.WorkflowId, count(p20.WorkflowId)
FROM master.ProcessLogging p10 
left outer join master.ProcessLogging p20
  on  p20.WorkflowId = p10.WorkflowId
  and p20.EventTime < p10.EventTime
  and p20.ProcessCode = 20
where p10.ProcessCode = 10 
group by p10.WorkflowId 
order by p10.WorkflowId 
```

--**来自 Bob Horn 的编辑**--

对上面的查询稍作修改，以显示 10s 和 20s 之间的最大时间差。

```
SELECT p10.WorkflowId, min(p20.WorkflowId), 
       DATEDIFF(ms, min(p10.lastmodifiedtime), min(p20.lastmodifiedtime)) as 'Diff (ms)'
FROM master.ProcessLogging p10 
join master.ProcessLogging p20
  on  p20.WorkflowId = p10.WorkflowId
  and p20.EventTime < p10.EventTime
  and p20.ProcessCode = 20
where p10.ProcessCode = 10 
group by p10.WorkflowId 
order by ABS(DATEDIFF(ms, min(p10.lastmodifiedtime), min(p20.lastmodifiedtime))) DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T17:04:38.083

我想您可以在查询中添加一个[行号](http://msdn.microsoft.com/en-us/library/ms186734.aspx)，然后将其包装在 SELECT WHERE PROCESSCODE=20 AND (SELECT PROCESSCODE FROM [same query] WHERE rownumber=rownumber+1)=10 中。或类似的东西。还没有弄清楚细节。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T17:35:01.177

这应该这样做

```
with cte as (
    SELECT *,
        row_number() over (partition by WorkflowId order by ProcessCode) as [a] ,
        row_number() over (partition by WorkflowId order by LastModifiedTime) as [b]
    FROM master.ProcessLogging with (nolock) 
    WHERE ProcessCode = 10 OR ProcessCode = 20 
)
select * from cte
where [a] - [b] <> 0 
```

作为解释，我为每个 WorkflowId 获得了两个不同的排名。如果进程代码的顺序正确（即升序），则两个排名相同，差值为0。否则，排名不同，差值非零。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T17:41:37.503

如果基于 LastModifiedTime 的每个 WorkflowId 总是应该最后一个 20，那么这很简单。您甚至不必查看 EventTime。不需要 Row_Number：

```
SELECT *
FROM
   master.ProcessLogging L
WHERE
   L.ProcessCode = 20
   AND EXISTS (
      SELECT *
      FROM master.ProcessLogging L2
      WHERE
         L.WorkflowId = L2.WorkflowId
         AND L.LastModifiedTime < L2.LastModifiedTime
         AND L2.ProcessCode = 10
   ) 
```

这将为每个乱序工作流返回一行，因此您可以轻松地将其更改为`SELECT Count(*)`而不是`SELECT *`.

如果 EventTime 也变得很重要，您可以将其添加到 exists 子句中，作为与 LastModifiedTime 的 OR。

我刚刚注意到您想要它们之间的时间差（通过显示每行的详细信息意味着您不能返回单个计数）。这是一个可以在 SQL 2005 及更高版本中执行此操作的查询。如果您使用的不是 SQL Server 2005，请告诉我们，我会为您写一个不同的查询。

```
SELECT
   *,
   MinutesApart = DateDiff(minute, L.LastModifiedTime, L2.LastModifiedTime)
FROM
   master.ProcessLogging L
   CROSS APPLY (
      SELECT TOP 1 *
      FROM master.ProcessLogging L2
      WHERE
         L.WorkflowId = L2.WorkflowId
         AND L.LastModifiedTime < L2.LastModifiedTime
         AND L2.ProcessCode = 10
      ORDER BY L2.LastModifiedTime DESC
   ) L2
WHERE
   L.ProcessCode = 20 
```

请注意，如果您在 20 之后有多个 10 个代码，则只会显示最差的一个。要查看所有这些（并每 20 个代码获取多行），您可以将其更改为简单的自联接：

```
SELECT
   *,
   MinutesApart = DateDiff(minute, L.LastModifiedTime, L2.LastModifiedTime)
FROM
   master.ProcessLogging L
   INNER JOIN master.ProcessLogging L2
      ON L.WorkflowId = L2.WorkflowId
WHERE
   L.ProcessCode = 20
   AND L2.ProcessCode = 10
   AND L.LastModifiedTime < L2.LastModifiedTime 
```

# c# - 存储过程输出参数返回@Value

> ID：12626386
> 
> 赞同：9
> 
> 时间：2012-09-27T16:53:44.247
> 
> 标签：c#, asp.net, sql-server-2008

在过去的一个小时里，我一直在为这件事苦苦挣扎，我确定我遗漏了一些小东西，我在 SQL Server 2008 中有一个存储过程和 C# 代码，我想返回我的存储过程的输出参数。

SQL：

```
Alter Procedure dbo.GetAssessment
    @UserID int,
    @AssessmentName varchar(255),
    @Score varchar(100) output,
    @Completed varchar(10) output,
    @DisplayName nvarchar(128) output,
    @Result varchar(2500) output
as
begin
        select @Score = A.Score, @Completed = A.Completed, @DisplayName = U.Displayname, @Result = A.Result 
        from Assessment A 
            inner join Users U
            on U.UserId = A.UserID
        where U.UserID = @UserId
        and AssessmentName = @AssessmentName

end
GO 
```

C＃

```
String SScore, SName, SResult, SComp;
            lblAsse.Text = Request.QueryString["AID"];

            InsertAssessment(lblAsse.Text, "No", 2, "N/A", "N/A");

            using (SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["SiteSqlServer"].ConnectionString))
            {
                SqlParameter outScore = new SqlParameter("@Score", SqlDbType.VarChar,100){ Direction = ParameterDirection.Output };
                SqlParameter outComp = new SqlParameter("@Completed", SqlDbType.VarChar,10){ Direction = ParameterDirection.Output };
                SqlParameter outName = new SqlParameter("@DisplayName", SqlDbType.NVarChar, 128) { Direction = ParameterDirection.Output };
                SqlParameter outResult = new SqlParameter("@Result", SqlDbType.VarChar,2500){ Direction = ParameterDirection.Output };              

                conn.Open();
                SqlCommand cmd = new SqlCommand();
                cmd.Connection = conn;
                cmd.CommandType = System.Data.CommandType.StoredProcedure;
                cmd.CommandText = "GetAssessment";
                cmd.Parameters.AddWithValue("@AssessmentName", lblAsse.Text);
                cmd.Parameters.AddWithValue("@UserId", 2);
                cmd.Parameters.Add(outScore);
                cmd.Parameters.Add(outComp);
                cmd.Parameters.Add(outName);
                cmd.Parameters.Add(outResult);
                cmd.ExecuteScalar();

                SScore = outScore.ToString();
                SName = outName.ToString();
                SResult = outResult.ToString();
                SComp = outComp.ToString();

                conn.Close();

                lblAsse.Text = SScore;` 
```

输出 ：

```
@Score 
```

我或我的代码可能有什么问题。请帮忙！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-27T16:57:30.667

您只需要从输出参数中读出实际**值：**

```
 SScore = outScore.Value; 
```

`.ToString()`不返回值 - 它返回参数的名称而不是......

有关详细信息，请参阅[MSDN 文档。`SqlParameter`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-11T12:15:58.673

只需要这样做。在获取输出参数之前，您必须关闭数据阅读器

```
 reader.Close(); 
```

然后你得到输出参数

```
 SScore = outScore.Value.Tostring(); 
```

如需更多帮助，请参阅此[http://msdn.microsoft.com/en-us/library/ms971497](http://msdn.microsoft.com/en-us/library/ms971497)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-08T14:53:43.600

**>试试这个它对多输出参数的工作正常：**

```
 using (SqlConnection sqlConnection = new SqlConnection(ConfigurationManager.ConnectionStrings["conStringEndicia"].ConnectionString)){

            using (var sqlCmd = new SqlCommand("endicia.credentialLookup", sqlConnection))
            { 

                sqlCmd.CommandType = System.Data.CommandType.StoredProcedure;
                sqlCmd.Parameters.AddWithValue("@accountNumber", accountNumber);
                SqlParameter outLogin = new SqlParameter("@login", SqlDbType.NVarChar, 100) { Direction = ParameterDirection.Output };
                sqlCmd.Parameters.Add(outLogin);
                SqlParameter outPassword = new SqlParameter("@password", SqlDbType.NVarChar, 100) { Direction = ParameterDirection.Output };
                sqlCmd.Parameters.Add(outPassword);
                sqlConnection.Open();
                sqlCmd.ExecuteNonQuery();
                string login, password;
                login = outLogin.Value.ToString();
                password = outPassword.Value.ToString();                        
            }
        } 
```

# xcode - xcode 仪器不断打开旧项目而不是当前项目

> ID：12626387
> 
> 赞同：2
> 
> 时间：2012-09-27T16:53:45.240
> 
> 标签：xcode, project, instruments

我正在 ios 上运行一个项目的构建，它工作正常。当我去仪器和分析项目时，它会打开一些旧项目。我已经尝试重新启动 xcode 和仪器，但它仍在打开一些旧项目。通常它总是在我刚刚运行的 iphone 上配置最新的当前项目。

我需要重置什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T17:23:29.130

删除iphone上的应用程序解决了这个问题。

# jquery - jquery按钮单击触发器仅适用于第一个按钮

> ID：12626390
> 
> 赞同：0
> 
> 时间：2012-09-27T16:53:59.677
> 
> 标签：jquery

为什么只触发第一个按钮 onclick ？当我单击其他 2 个人时，它们不会触发任何事件，我的控制台中也没有错误：

```
<script>
$(document).ready(function(){

             var name_of_sender ="";
             var text_of_sender ="";

             var $dialog = $('<div></div>')
            .html('This dialog will show every time!')
            .dialog({
                autoOpen: false,
                title: 'Basic Dialog'
            });

            $("#edit_text").click(function() {

                var butName = $(this).attr("name");
                var user_id = butName.split("_")[1];
                alert(user_id);
                name_of_sender = $('#username_'+user_id).html();
                text_of_sender = $('#text_'+user_id).html();

                alert(name_of_sender);
                alert(text_of_sender);

                $dialog.dialog('open');
                // prevent the default action, e.g., following a link
                return false;
            });
});
</script>
<table>
<tbody>
<tr>
    <td id="username_33">test</td>
    <td id="text_33">asdasdasd</td>
    <td>2012-09-27</td>
    <td>217.xx.xx.6</td>
    <td>
    <button id="edit_text" name="id_33">Edit</button>
    </td>
</tr>
<tr>
    <td id="username_34">test</td>
    <td id="text_34">asdasdasd</td>
    <td>2012-09-27</td>
    <td>217.xx.xx.6</td>
    <td>
    <button id="edit_text" name="id_34">Edit</button>
    </td>
</tr>
<tr>
    <td id="username_35">test</td>
    <td id="text_34">asdasdasd</td>
    <td>2012-09-27</td>
    <td>217.xx.xx.6</td>
    <td>
    <button id="edit_text" name="id_35">Edit</button>
    </td>
</tr>
</tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T16:54:55.060

ID 应该是唯一的。使用 ID 选择器 - 它只会选择使用该 ID 找到的第一个元素 - 因此事件处理程序仅绑定到第一个按钮 对于您的代码，您可以将其更改为

```
$("button[name^=id_]").click(function() { 
```

或将您的 id 更改为 class 并使用 class selector

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T16:57:37.617

您应该有元素的唯一 ID，您可以使用带有通配符的名称来绑定单击与所有按钮

```
 $("input[type=button][id^=id_").click(function() {

            var butName = $(this).attr("name");
            var user_id = butName.split("_")[1];
            alert(user_id);
            name_of_sender = $('#username_'+user_id).html();
            text_of_sender = $('#text_'+user_id).html();

            alert(name_of_sender);
            alert(text_of_sender);

            $dialog.dialog('open');
            // prevent the default action, e.g., following a link
            return false;
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T14:27:45.947

好的，上面的例子似乎对某些人有用，但对我没有用。

这样，名为 Edit 的按钮的工作原理是一样的：

```
$('#Edit').live('click', function () {

}); 
```

# c# - C# 中的抽象字段 - 在子类中添加集合

> ID：12626392
> 
> 赞同：1
> 
> 时间：2012-09-27T16:54:04.910
> 
> 标签：c#, get, set, field, abstract

我遇到了字段继承的问题。首先，我将解释我希望它如何工作，然后就如何更改语法来做我想做的事情征求建议。

这是我尝试过的：

```
public abstract class A
{
    public abstract D D1
    {
        get;
    }

    protected D _d2;
    public virtual D D2
    {
        get { return _d2; }
        set { _d2 = value; }
    }
}

public abstract class B : A
{
    protected D _d1;
    public override D D1
    {
        get { return _d1; }
        set
        {
            _d1 = value;
            Update();
        }
    }
}

public abstract class C : A
{
    public override D D1
    {
        get
        {
            return _d2.Find1();
        }
    }

    public override D D2
    {
        get { return base.D2; }
        set
        {
            base.D2 = value;
            Update();
        }
    }
} 
```

问题是 A 无法编译，因为它找不到用 D1 的集合覆盖的方法。这就是我期望它的工作方式：

```
A ab = new B();
print(ab.D1);
ab.D1 = 4; // I would expect a compiler error
((B)ab).D1 = 4; // I would expect a compiler error

A ac = new C();
print(ac.D1);
ac.D1 = 4; // I would expect a compiler error
((C)ac).D1 = 4; // **I would expect this to work** 
```

我可以看到的一种解决方案是添加“set;” 到 A1 的 D1 并在我尝试在 C 中使用它时抛出 NotImplementedException ，但这会阻止问题出现在编译器中。有人知道解决这个问题的方法吗？我真的很想将它们保留为字段，以便我可以使用 WPF 显示它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T17:12:29.077

使用 setter 扩展属性不适用于类继承；但是，它适用于接口实现

```
public interface I
{
    int Prop { get; }
}

public abstract class A : I
{
    public abstract int Prop { get; protected set; }
    public abstract int Prop2 { get; }
}

public class B : A
{
    public override int Prop
    {
        get;
        set; // ERROR: Cannot change accesibility here.
    }

    public override Prop2 { get; set; } // ERROR: Cannot add setter here.
}

public class C : I
{
    public int Prop { get; set; } // OK: Adding a setter works here.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T17:08:23.637

您的错误在于 class `B`。在类中`A`，您定义`D1`为`public abstract D D1 { get; }` 但是，在`B`您尝试覆盖`D1`并添加一个 setter 时，该 setter 不是由抽象类定义的。您需要找到另一种方法来设置`B`. 如果其他类需要能够设置，`D1`那么您可能需要定义`D1`为`public abstract D D1 { get; set; }`

如果`B`只需要能够设置值，直接设置成员值即可。

# wcf - 具有 Sharp 架构的 WCF - 无法使用 ServiceLocator 定位所需的类型依赖项

> ID：12626396
> 
> 赞同：0
> 
> 时间：2012-09-27T16:54:26.057
> 
> 标签：wcf, nhibernate, sharp-architecture

我正在使用一个使用 wcf 和清晰架构的应用程序，我正在尝试创建一个服务来写入数据库。这是我的服务：（Sicaf.Core.Services.Wcf）

```
[ServiceContract]
public interface IFacturaWcfService : ICloseableAndAbortable
{           
    [OperationContract]
    string ConsultarValorMatricula(string xmlData);
} 
```

```
 [ServiceBehavior, AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Required)]
    public class FacturaWcfService : IFacturaWcfService
    {
        private readonly IFacturaBusiness facturaBusiness;

        public FacturaWcfService(IFacturaBusiness facturaBusiness)
        {
            this.facturaBusiness = facturaBusiness;
        }

        public string ConsultarValorMatricula()
        {
            return facturaBusiness.GetFactura();
        }

        public void Abort() { }

        public void Close() { }
    } 
```

在ComponentRegistrar.cs中：（Sicaf.Core.Services.WebServices）

```
private static void AddWcfServicesTo(IWindsorContainer container)
        {
            // Since the TerritoriesService.svc must be associated with a concrete class,
            // we must register the concrete implementation here as the service            
            container.AddComponent("facturaWcfService", typeof(FacturaWcfService));
        } 
```

我创建了一个客户端，但我得到了这个异常：

```
The needed dependency of type FacturaWcfService could not be located with the ServiceLocator. You'll need to register it with the Common Service Locator (CSL) via your IoC's CSL adapter. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T17:07:21.220

我终于发现了我的错误。

前：

```
 private static void AddCustomRepositoriesTo(IWindsorContainer container)
        {
            // Register Data Layer Services
            container.Register(
                AllTypes.Pick()
                .FromAssemblyNamed("Sicaf.Core.Services.Data")
                .WithService.FirstNonGenericCoreInterface("Sicaf.Core.Services.Services.Data"));                   
        } 
```

后：

```
 private static void AddCustomRepositoriesTo(IWindsorContainer container)
        {
            // Register Data Layer Services
            container.Register(
                AllTypes.Pick()
                .FromAssemblyNamed("Sicaf.Core.Services.Data")
                .WithService.FirstNonGenericCoreInterface("Sicaf.Core.Services.Services.Data"));

            container.Register(
                AllTypes.Pick()
                .FromAssemblyNamed("SismatV2.Data")
                .WithService.FirstNonGenericCoreInterface("SismatV2.Services.Data"));
        } 
```

# clojure - Clojure 扁平化和懒惰

> ID：12626401
> 
> 赞同：2
> 
> 时间：2012-09-27T16:54:36.273
> 
> 标签：clojure, lazy-evaluation, flatten

不确定在构建惰性序列时使用 flatten 时观察到的行为是什么。

查看 clojure.core 中的源代码，我可以看到 flatten 函数调用了过滤器，因此应该返回一个惰性序列 - 我认为。然而下面的代码片段给了我一个 stackoverflow 错误。在对 flatten 的调用替换为对 concat 的调用的代码段中，它工作得很好

```
(defn l-f [c]
  (if (nil? c) []
    (lazy-seq  (flatten (cons  [[ :h :j] :a :B] (l-f (rest c))))))) 

    (take 10 (l-f (repeat 2))) is how I invoke it. 
```

这是一个相当人为的例子。我也知道 flatten 和 concat 会给我嵌套级别不同的序列。

我试图弄清楚为什么 flatten 似乎打破了懒惰，尽管我对 clojure.core 中代码的（有限）理解表明并非如此。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T18:21:42.727

惰性只带你到这么远——惰性只是意味着序列在创建时还没有完全实现，但是从另一个构建一个惰性序列有时涉及向前看一些值。在这种情况下， 的实现`flatten`不能很好地与您调用它的递归方式配合使用。

首先，该`flatten`函数调用`tree-seq`对集合内容进行深度优先遍历。反过来，使用提供的序列进行`tree-seq`调用`mapcat`，该序列委托给`apply`，它实现序列中的前几项以确定要调用的函数的数量。实现序列中的前几项会导致对 的递归调用`l-f`，该调用会调用`flatten`剩余的参数，并陷入无限循环。

在这种特殊情况下，不需要`flatten`递归调用，因为第一次调用之后的任何调用都没有效果。因此，您可以通过将惰性序列的生成与其展平分开来修复您的函数：

```
(defn l-f [c]                                                      
  (letfn [(l-f-seq [x] (if-let [s (seq x)]                         
                         (lazy-seq (cons [[:h :j] :a :B] (l-f-seq (rest s))))
                         []))]                                               
    (flatten (l-f-seq c)))) 
```

# javascript - Kml 文件显示高程剖面

> ID：12626407
> 
> 赞同：3
> 
> 时间：2012-09-27T16:55:05.247
> 
> 标签：javascript

我找到了以下示例：

[http://gmaps-samples-v3.googlecode.com/svn/trunk/elevation/elevation-profile.html](http://gmaps-samples-v3.googlecode.com/svn/trunk/elevation/elevation-profile.html)

我有这个 kml 文件：

[https://maps.google.at/maps/ms?authuser=0&vps=2&hl=de&ie=UTF8&msa=0&output=kml&msid=211992892838821122253.0004bd00127898df568d9](https://maps.google.at/maps/ms?authuser=0&vps=2&hl=de&ie=UTF8&msa=0&output=kml&msid=211992892838821122253.0004bd00127898df568d9)

现在我不知道如何将 kml 文件和示例放在一起。该示例包括硬编码的路径数据。

如果有人可以帮助我，那就太好了。非常感谢麦克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:54:35.917

让我看看我是否做对了。您有一个 KML 文件并想为其创建一个高程剖面？如果是这样，你为什么不使用[GPS Visualizer](http://www.gpsvisualizer.com/profile_input)？

# c# - 如何在 C# 事件中执行 javascript

> ID：12626409
> 
> 赞同：1
> 
> 时间：2012-09-27T16:55:06.137
> 
> 标签：c#, asp.net

我在一个事件中，在这个事件中我想让一个 javascript 警报向用户显示一条消息。但我似乎无法让它发挥作用。

```
protected void dgvStaff_Deleting(object sender, Infragistics.Web.UI.GridControls.RowDeletingEventArgs e)
        {
            // Code stub
            object test = e.Row.Items[0].Text;
            //ScriptManager.RegisterStartupScript(this, this.GetType(), "alertbox", "ShowPopup('Select a row to rate');", true);
            ScriptManager.RegisterClientScriptBlock(this, this.GetType(), "alertbox", "ShowPopup('Select a row to rate');", true); 
            if (objGatewayFunctions.CheckStaffAssignment(e.Row.Items[0].Text.ToString(), ConfigurationManager.AppSettings.Get("Connection").ToString()) == true)
            {

            }
        } 
```

知道我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T17:00:32.983

你不能这样做 - C# 和 JavaScript 在不同的计算机上运行，​​你不能在函数中间跳转它们。

通常你会延迟错误/警告直到页面被渲染。为了改善用户体验，还尝试在发回服务器之前进行错误检查（除了服务器端检查）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T17:01:18.287

您必须等待服务器执行完成，然后您才能看到客户端执行的动作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T17:03:39.890

用这个

```
Response.Write("<script type='text/javascript'>alert('Hello World');</script>"); 
```

# java - 如何在弹出窗口中设置文本视图？

> ID：12626410
> 
> 赞同：0
> 
> 时间：2012-09-27T16:55:09.120
> 
> 标签：java, android, eclipse, popup, textview

我正在尝试在弹出窗口中设置 textview，并且进入 textview PopUp 的字符串来自 SOAP Web 服务调用。我在 logCat 中看到了字符串消息，并且弹出了 PopUp，但由于某种原因，我无法设置 textview 来显示我的消息。我错过了什么。

感谢您。

```
 public void wtfPopUp()
    {

            //

            String PopYesNo;
            String PopMsgAll = null;
            //
////////////////////////FIRST CALL FOR YES-NO POP Status BEGIN
       SoapObject Request = new SoapObject(NAMESPACEPopYesNo, METHOD_NAMEPopYesNo);

          SoapSerializationEnvelope soapEnvelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
          soapEnvelope.dotNet = true;
          soapEnvelope.setOutputSoapObject(Request);
          HttpTransportSE ahtt = new HttpTransportSE(URLPopYesNo);

          ////////////////////////  SECOND CALL FOR POP MESSAGE BEGIN

           SoapObject Request2 = new SoapObject(NAMESPACEAllPop, METHOD_NAMEAllPop);
           //   Request.addProperty("c_idid", "1");
              SoapSerializationEnvelope soapEnvelope2 = new SoapSerializationEnvelope(SoapEnvelope.VER11);
              soapEnvelope2.dotNet = true;
              soapEnvelope2.setOutputSoapObject(Request2);
              HttpTransportSE ahtt2 = new HttpTransportSE(URLAllPop);

          ////////////////////////  SECOND CALL FOR MESSAGE END         

             try
             {
               Log.d("myAppWtf", "at getPopUpAllTRY");
             ahtt.call(SOAP_ACTIONPopYesNo, soapEnvelope);
            SoapObject oResponse = (SoapObject)soapEnvelope.bodyIn;
            PopYesNo = oResponse.getPropertyAsString(0).toString();
            Log.d("myAppYesNo", oResponse.getPropertyAsString(0).toString());       

                             if(PopYesNo.equals("PopUp_ON") )
                             {

                                                                try{

                                                                ////////////////////////  SECOND CALL FOR MESSAGE BEGIN

                                                                 ahtt2.call(SOAP_ACTIONAllPop, soapEnvelope2);
                                                                    SoapObject oResponse2 = (SoapObject)soapEnvelope2.bodyIn;
                                                                    PopMsgAll = oResponse2.getPropertyAsString(0).toString();
                                                                 Log.d("myAppMSGGGG", oResponse2.getPropertyAsString(0).toString());    

                                                                 /////////////////////////////  SECOND CALL FOR MESSAGE  END 

                                                                }
                                                                catch(Exception ms){

                                                                                  ms.printStackTrace();

                                                                }

                                                   // POP UP CODE
                                                LayoutInflater li = LayoutInflater.from(context);
                                                View promptsView = li.inflate(R.layout.popup_all, null);

                                                AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(context);

                                                // set prompts.xml to alertdialog builder
                                                alertDialogBuilder.setView(promptsView);

                                                // set dialog message
                                                alertDialogBuilder
                                                    .setCancelable(false)
                                                    .setNegativeButton("Cool",
                                                      new DialogInterface.OnClickListener() {
                                                        public void onClick(DialogInterface dialog,int id) {
                                                        dialog.cancel();
                                                        }
                                                      });

                                                // create alert dialog
                                                AlertDialog alertDialog = alertDialogBuilder.create();

                                                // show it
                                                alertDialog.show();

                                                // TEXT FOR POP UP MSG
                                                 txtViewPop = (TextView)findViewById(R.id.txtMsgAll);
                                                 txtViewPop.setText(PopMsgAll.toString());
                                    //           txtViewPop.setTextColor(Color.rgb(2, 39, 72));

                             }

             }

             catch(Exception ix)
                 {
                     ix.printStackTrace();
                 }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T16:58:35.107

用这个

```
txtViewPop =(TextView) promptsView.findViewById(R.id.txtMsgAll);
                       ^^^^^^^^^^^^ 
```

代替

```
txtViewPop = (TextView)findViewById(R.id.txtMsgAll); 
```

# python - 平均获胜

> ID：12626413
> 
> 赞同：1
> 
> 时间：2012-09-27T16:55:28.103
> 
> 标签：python

我只是在学习 Python（有史以来的第一门语言），并且正在以我觉得有趣的方式实现我发现的东西。我建立了一个伪老虎机赔率计算器。然而，它止于一次大奖的胜利。有没有办法让它一遍又一遍地运行，以给出 n 场比赛的平均尝试次数以获得大奖？

这是我的代码

```
#!/usr/bin/env python
import random

a = 1

while a >0 :
    l1 = random.randrange(36)
    l2 = random.randrange(36)
    l3 = random.randrange(36)

    print l1, l2, l3
    if l1 == l2 == l3 == 7:
        print 'grand prize winner!!!'
        break
    elif l1 == l2 == l3:
        print 'you won! congratulations'
        print 'it took', a, 'attempts to win'
    else:
        a += 1
        print 'sorry...  try again'
        print 'attempt', a 
```

另外，有没有办法告诉我在赢得大奖的过程中有多少正常的胜利

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T16:57:45.963

`break`大奖块中的语句`if`退出外`while`循环。如果您希望它继续运行，请删除`break`. 另外，作为一个风格点，`while True:`或者`while 1:`是一个更清晰的创建无限循环的方法。至于问题的第二部分，您有`a`计数器，但您可能想要捕获更多数据，如下所示：

```
import random

def play(till_jackpot_count):
    game_data_per_jackpot = [{'plays' : 0, 'wins' : 0}]
    wheel_values = xrange(36)
    wheels = [0, 0, 0]
    while till_jackpot_count >= len(game_data_per_jackpot):
        wheels = [random.choice(wheel_values) for wheel in wheels]
        game_data_per_jackpot[-1]['plays'] += 1
        print '%d plays since last jackpot' % game_data_per_jackpot[-1]['plays']
        print '%d wins since last jackpot' % game_data_per_jackpot[-1]['wins']
        print '%d total plays' % sum([data['plays'] for data in game_data_per_jackpot])
        print '%d total wins' % sum([data['wins'] for data in game_data_per_jackpot])
        print '%d total jackpots' % (len(game_data_per_jackpot) - 1)
        print 'this play: {} {} {}'.format(*wheels)
        if len(set(wheels)) == 1:
            if wheels[0] == 7:
                print 'jackpot!'
                game_data_per_jackpot.append({'plays' : 0, 'wins' : 0})
            else:
                print 'win!'
                game_data_per_jackpot[-1]['wins'] += 1
    return game_data_per_jackpot[:-1]

play(10) 
```

我还在顶部偷偷插入了一个控件，该控件`till_jackpot_count`将在该数量的累积奖金之后结束循环。如果您想在函数本身之外进一步分析测试结果，该函数还会返回测试结果，但结果只是被丢弃在这里，因为它没有分配给任何东西。

为了您自己的学习，这段代码使用了列表`[]`（除了您已经熟悉的库和循环。我还把你的换成了一个更简单、可能更高效的预建.`{}``()``'%d' % var``'{} {} {}'.format(*iterable)``[a for a in b]``list[:]``sum``len``random``while``random.randrange()``random.sample()``xrange()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T17:02:57.583

您只需要计算每次获胜的次数，然后在最后打印总数......（见`wins`下文）

```
#!/usr/bin/env python
import random
def play():
  a = 1
  wins = 0
  while a >0 :
    l1 = random.randrange(36)
    l2 = random.randrange(36)
    l3 = random.randrange(36)

    print l1, l2, l3
    if l1 == l2 == l3 == 7:
        #print 'grand prize winner!!!'
        break
    elif l1 == l2 == l3:
        #print 'you won! congratulations'
        #print 'it took', a, 'attempts to win'
        wins += 1
    else:
        a += 1
        print 'sorry...  try again'
        print 'attempt', a
  return a,wins
  #print "You Won %s Times!"%wins

play_again = True
while play_again:
    tries,wins = play()
    print "It Took %d Tries to win the Grand Prize"%tries
    print "You won normally %d Times"%wins
    play_again = raw_input("Play Again(y/n)?")==y 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T17:10:36.163

要运行一些代码`n`时间，您应该编写

```
for _ in range(n):
    # some code 
```

要在某些条件成立时运行它，您应该编写

```
while condition:
    #some code 
```

要无限运行它，你应该写

```
while 1:
     # some code 
```

（因为条件`1`始终为真）。

`break`即使条件不成立，关键字也会让您跳出循环。

* * *

首先设置老虎机代码：

```
GRAND_PRIZE = 0
REGULAR_PRIZE = 1
NO_PRIZE = 2

def slot_machine():
    l1 = random.randrange(36)
    l2 = random.randrange(36)
    l3 = random.randrange(36)

    if l1 == l2 == l3:
        return GRAND_PRIZE if l1 == 7 else REGULAR_PRIZE
    else:
        return NO_PRIZE 
```

接下来，设置代码以运行它，直到您获胜。

```
def run_until_win():
    num_tries = 0
    num_wins = 0

    while 1:
        num_tries += 1
        result = slot_machine()

        if result == GRAND_PRIZE:
            break
        elif result == REGULAR_PRIZE:
            num_wins += 1

    return num_tries, num_wins 
```

最后，运行十次：

```
for _ in range(10):
    print "tries: {0}, wins: {1}".format(*run_until_win()) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T17:13:06.860

您的“while”循环没有任何问题，它应该逃逸。现在，如果你想多次运行它，你可以将它包装在一个`for i in range(number_of_games)`循环中。每次退出`while`循环时，都会将 附加`a`到列表中。

```
nb_attempts = []
for i in range(nb_games):
    while True:
        ...
        if (l1 == l2 == l3 == 7):
            nb_attempts.append(a)
            break
        elif ... 
```

在你的`n`游戏结束时，你有一个尝试次数列表`n`。尝试次数。

# c++ - 成功打开但不好？

> ID：12626414
> 
> 赞同：7
> 
> 时间：2012-09-27T16:55:27.947
> 
> 标签：c++, file, stream

在 C++ 中，是否存在`std::ifstream open()`可以成功但`std::ifstream good()`可以为 false 的情况？

编辑：用 g++ 4.7.1 测试

```
#include <iostream>
#include <fstream>
int main(int argc, char *argv[])
{
    std::ifstream filestream("testfile");
    std::cout<<filestream.good()<<std::endl;
    std::cout<<filestream.eof()<<std::endl;
    std::cout<<filestream.fail()<<std::endl;
    std::cout<<filestream.bad()<<std::endl;
    return 0;
} 
```

将返回 : 1, 0, 0, 0 表示一个空文件，这意味着`good = TRUE`and `eof = fail = bad = FALSE`。正常吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T16:58:27.977

在验证了标准中的实际文本之后，我认为`eofbit`不允许在`open`:之后`badbit`设置，如果实际打开引发异常则可以设置（我认为——标准并没有真正说明在这种情况下应该发生什么） ; 如果打开失败，或者打开后的查找（如果已设置）失败，`failbit`则应设置；`ate`但似乎没有任何情况`eofbit`可以设置。

在这种情况下，调用并不是`std::istream::good()`一个好的解决方案。（知道 OP 试图实现什么会很有趣。无论如何，调用`std::istream::good()`可能不是正确的解决方案。）

如果`std::ifstream::good()`返回`false`，则下一个输入将失败。如果它返回`true`，它什么也不告诉你：下一个输入可能会成功，但也可能会失败。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T16:57:06.207

如果文件为空，则将触发 eofbit，但文件仍将打开，所以是的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T17:12:03.997

`ifstream::open`返回 void，所以要小心你所说的“成功”是什么意思。

该标准对`basic_ifstream::open`（27.9.1.9）说：

> 效果：调用 rdbuf()->open(s, mode | ios_base::in)。如果该函数不返回空指针，则调用 clear()，否则调用 setstate(failbit)（可能会抛出 ios_base::failure）

因此，如果对 filebuf 的 open 调用返回一个指示成功的值，则`ifstream::open`清除所有错误位，因此`good()`必然返回 true。

如果对 filebuf 的 open 调用返回一个指示失败的值，那么`ifstream::open`仍然可以返回而不抛出异常。此行为可能与“成功”混淆，但在这种情况下`good()`返回 false，因为设置了失败位。

我并不完全清楚为什么这会设置故障位而不是故障位，但我不认为我缺乏理解会妨碍报告事实:-)

# php - 为什么使用 Prepard Statements/mysql_real_escape_string 进行 SQL 查询

> ID：12626415
> 
> 赞同：0
> 
> 时间：2012-09-27T16:55:27.323
> 
> 标签：php, mysql

我已经阅读了各种建议`Prepared statements`在 SQL 查询中使用的文章，但是`mysql_ lib does not allow executing 2 queries in one statement`如果我需要在页面执行中只触发一次查询，那么是否值得使用它们，并且在某些情况下，mysql_query 似乎也忽略了无效的帖子数据（比如`'ADMIN' OR 1--`)

```
$username = $_POST['username'];
$password = $_POST['password'];

 mysql_query("SELECT * FROM users WHERE username=$username AND password=$password");

//processing 
```

现在，如果有人将“用户名”传递为

```
'ADMIN' OR 1-- 
```

上面的查询会获取“Admin”行！这是 mysql_query 的一个功能，它忽略`'1' / Special chars`. 在这种情况下，SQL 注入将如何发生，运行 MYSQL 5.5 和 PHP 5.3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T16:58:00.550

也许`'ADMIN' OR 1--`不起作用，但`'ADMIN' OR 'x' = 'y'`肯定会，因为它会导致这个 SQL 查询：

```
SELECT *
  FROM users
 WHERE username = 'ADMIN'                    -- true
    OR 'x' = 'y' AND password = 'whatever'   -- false, but who cares?
; 
```

总的教训：安全编码很难，因为我们不习惯从积极寻求破坏我们代码的敌对代理的角度来思考。SQL 注入是一个已解决的问题，解决方案是参数化查询，因此您应该使用它而不是尝试推出自己尝试的解决方案。

# firefox - src 属性中带有 # 的 iframe 未在 Firefox 中加载

> ID：12626416
> 
> 赞同：0
> 
> 时间：2012-09-27T16:55:28.850
> 
> 标签：firefox, iframe

以下 iframe 将显示在除 Firefox 之外的所有浏览器中。关于为什么的任何见解？

```
<iframe src="http://sitename.com/directory/#pagename/"></iframe> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T17:57:26.310

问题在于 Firefox 进行一些 url 解码或查看 window.location.hash 而不是 window.location.href。url 中的哈希是正确加载 iframe 所需的 url 的存根部分。

将 src 属性更改为[http://sitename.com/directory#pagename/](http://sitename.com/directory#pagename/)解决了这个问题。

# android - 如何从android中以前的活动结果中获取新活动的结果？

> ID：12626422
> 
> 赞同：1
> 
> 时间：2012-09-27T16:55:49.857
> 
> 标签：android, android-intent

我有两个活动说 X 和 y。在 x 中有 edittext n 6 单选按钮，如果用户单击按钮，则根据来自 edittext n 单选按钮的输入从数据库中检索值。这些值应显示在下一个活动 y 中。你可以帮忙提供片段吗..提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T17:08:13.603

您应该将值放入一个包中，并将该包传递给启动下一个活动的意图。示例代码在这个问题的答案中： [Passing a Bundle on startActivity()?](https://stackoverflow.com/questions/768969/passing-a-bundle-on-startactivity)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T17:35:02.043

将您要发送的数据与您调用的 Intent 绑定，以转到下一个活动。

```
Intent i = new Intent(this, YourNextClass.class);
i.putExtra("yourKey", "yourKeyValue");
startActivity(i); 
```

在 YourNextClass 活动中，您可以使用

```
 Bundle extras = getIntent().getExtras();
    if (extras != null) {
    String data = extras.getString("yourKey");
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T17:38:16.210

您可以使用 Bundle 或 Intent 轻松地将数据从一个活动传递到另一个活动。

让我们看一下使用 Bundle 的以下示例：

```
//creating an intent to call the next activity
Intent i = new Intent("com.example.NextActivity");
Bundle b = new Bundle();

//This is where we put the data, you can basically pass any 
//type of data, whether its string, int, array, object
//In this example we put a string
//The param would be a Key and Value, Key would be "Name"
//value would be "John"
b.putString("Name", "John");

//we put the bundle to the Intent
i.putExtra(b);

startActivity(i, 0); 
```

在“NextActivity”中，您可以使用以下代码检索数据：

```
Bundle b = getIntent().getExtra();
//you retrieve the data using the Key, which is "Name" in our case
String data = b.getString("Name"); 
```

仅使用 Intent 传输数据怎么样。让我们看一下示例

```
Intent i = new Intent("com.example.NextActivity");
int highestScore = 405;
i.putExtra("score", highestScore); 
```

在“NextActivity”中，您可以检索数据：

```
int highestScore = getIntent().getIntExtra("score"); 
```

现在你会问我，Intent 和 Bundle 之间有什么区别，它们似乎做的事情完全一样。

答案是肯定的，他们都做同样的事情。但是，如果您想传输大量数据、变量、大型数组，则需要使用 Bundle，因为它们有更多方法可以传输大量数据。（即，如果您只传递一个或两个变量，那么只需使用 Intent。

# linux - 使用 Linux 中的过滤器对 txt 文件中的行进行分组以创建多个 txt 文件

> ID：12626425
> 
> 赞同：0
> 
> 时间：2012-09-27T16:56:03.990
> 
> 标签：linux, filter, grep

我有一个 txt 文件，其中每一行以参与者编号开头，然后是日期和其他变量（仅限数字），格式如下：

```
 S001_2 20090926 14756 93    
 S002_2 20090803 15876 13 
```

我想编写一个脚本来创建较小的 txt 文件，每个文件仅包含 20 个参与者（因此第一个将包含从 S001_2 到 S020_2 的行；第二个从 S021_2 到 S040_2；主题总数约为 200）。但是，主题没有组织，因此我无法使用 sed 设置范围。

根据行开头的数字（SOO1_2）将ppts过滤成块的最佳命令是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T17:07:47.723

不带任何参数的排序应该是合适的，因为您的数字中有前导零，例如`S001_2`. 所以，首先对文件进行排序：

```
sort file.txt > sorted.txt 
```

然后您将能够使用 sed 为 file_sort.txt 设置范围

这看起来像是一个将排序文件拆分为 20 行文件的完整脚本：

```
num=1;
i=1;
lines=`wc -l sorted.txt | cut -d' ' -f 1`;#get number of lines
while [ $i -lt $lines ];do
    sed -n $i,`echo $i+19 | bc`p sorted.txt > file$num;
    num=`echo $num+1 | bc`;
    i=`echo $i+20 | bc`;
done; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T17:20:39.347

使用[split](http://unixhelp.ed.ac.uk/CGI/man-cgi?split)命令拆分没有范围和 sed 的文件（或过滤结果）。根据文档，这应该有效：

猫文件.txt | 拆分 -l 20 - 前缀

这将生成文件 PREFIXaa、PREFIXab、...（请注意，它不会在文件名中添加 .txt 扩展名！）

如果您想先过滤文件，请按照@Sergey 描述的方式：

猫文件.txt | 排序 | 拆分 -l 20 - 前缀

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T17:57:22.697

```
$ split -d -l 20 file.txt -a3 db_ 
```

产生：db_000, db_001, db_002, ..., db_N

# ruby-on-rails-3 - try() 在 Rails 3.0.x 和 Rails 3.2.x 之间是否存在性能差异

> ID：12626426
> 
> 赞同：-2
> 
> 时间：2012-09-27T16:56:08.727
> 
> 标签：ruby-on-rails-3, performance, exception-handling

许多人使用尝试处理不确定的链接。让我们先不管这种链接是否是一个好习惯。

*   [Rails 3.0.x](http://ruby-docs.com/docs/ruby_1.9.3-rails_3.0.12/Rails%203.0.12/classes/Object.html#method-i-try)似乎没有单独处理`try`for`NilClass`
*   Rails 3.2.x 处理[`nil.try`](http://ruby-docs.com/docs/ruby_1.9.3-rails_3.1.4/Rails%203.1.4/classes/NilClass.html#method-i-try)方式不同于[`object.try`](http://ruby-docs.com/docs/ruby_1.9.3-rails_3.1.4/Rails%203.1.4/classes/Object.html#method-i-try)

这种差异是否会导致`nil.try`Rails > 3.0.x 上的情况更快？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T19:36:11.970

`try` [NilClass 上确实存在](https://github.com/rails/rails/blob/6ef9fda1a39f45e2d18aba4881f60a19589a2c77/activesupport/lib/active_support/core_ext/object/try.rb#L54)，但在 ActiveSupport 中，3.0.4 的定位方式不像 3.1.x 那样透明

# python - Python TPCServer rfile.read 块

> ID：12626427
> 
> 赞同：9
> 
> 时间：2012-09-27T16:56:12.523
> 
> 标签：python, httprequest, tcpserver

我正在编写一个简单的`SocketServer.TCPServer`请求处理程序 ( `StreamRequestHandler`)，它将捕获请求以及标头和消息正文。这是为了伪造一个我们可以用于测试的 HTTP 服务器。

我可以毫不费力地抓住请求行或标题。

如果我试图从现有的东西中获取更多`rfile`，代码块。如何在不知道其大小的情况下获取所有请求正文？换句话说，我没有`Content-Size`标题。

这是我现在拥有的一个片段：

```
def _read_request_line(self):
    server.request_line = self.rfile.readline().rstrip('\r\n')

def _read_headers(self):
    headers = []
    for line in self.rfile:
        line = line.rstrip('\r\n')
        if not line:
            break
        parts = line.split(':', 1)
        header = (parts[0].strip(), parts[0].strip())
        headers.append(header)
    server.request_headers = headers

def _read_content(self):
    server.request_content = self.rfile.read()  # blocks 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-11-21T21:09:32.040

基思的评论是正确的。这是它的样子

```
 length = int(self.headers.getheader('content-length'))
     data = self.rfile.read(length) 
```

# oracle - 与 oracle 11G 的连接字符串中的 SDU 设置

> ID：12626430
> 
> 赞同：4
> 
> 时间：2012-09-27T16:56:15.690
> 
> 标签：oracle, oracle11g, tnsnames, tns

我没有参考 sqlnet.ora 文件进行查找，并且几乎提供了以下 TNS URL 用于连接，我需要在以下连接 URL 中挤入 SDU 设置我想知道它会去哪里以及新的网址会是什么样子？

这是我正在使用的：`jdbc:oracle:thin:@192.168.191.231:1521:naladomain`

我现在需要在上面的 TNS 字符串中压缩自定义 sdu 设置。我该怎么做？:-)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T08:27:30.983

您需要使用长 TNS 格式（根据`tnsnames.ora`文件）。像这样：

```
jdbc:oracle:thin:@(DESCRIPTION=(SDU=32767)(ADDRESS=(PROTOCOL=TCP)(HOST=192.168.191.231)(PORT=1521))(CONNECT_DATA=(SERVICE_NAME=naladomain)) 
```

更改值以满足您的需要。

# java - 如何在不更新我的应用程序 Android 的情况下升级我的数据库

> ID：12626431
> 
> 赞同：0
> 
> 时间：2012-09-27T16:56:15.557
> 
> 标签：java, android, database, sqlite

在我的应用程序中，我有一个 dbhelper 类，我的数据库中的所有内容都在其中发生，我知道我必须使用**onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)**但我在理解如何调用它时遇到问题没有更新完整的应用程序，我想要的是在互联网通话中发现我已经更改了我的 web 表中的版本以在我的应用程序中删除表并重建它们，以便它可以获得新信息。这是我的代码：

在我的 bd 助手中：

```
public class CuestionarioHelper extends SQLiteOpenHelper {

private static String DB_PATH = "/data/data/myapp.VerCuestionarioEspanol_copy/databases/";
private static final String DB_NAME="cuestionario.db";
private static final int SCHEMA_VERSION=1;
private SQLiteDatabase myData; 
public CuestionarioHelper(Context context) {
    super(context, DB_NAME, null, SCHEMA_VERSION);
}   
@Override
public void onCreate(SQLiteDatabase db) {
    db.execSQL("CREATE TABLE Version (_id INTEGER PRIMARY KEY AUTOINCREMENT, version TEXT);");
    db.execSQL("CREATE TABLE Cuestionario (_id INTEGER PRIMARY KEY AUTOINCREMENT, pregunta TEXT, respuesta TEXT);");
    }
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    db.execSQL("DROP TABLE IF EXISTS " + "Version");
    db.execSQL("DROP TABLE IF EXISTS " + "Cuestionario");
    onCreate(db);
} 
```

在我的 mainActivity 中：

```
private CuestionarioHelper db = null;

 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

   db = new CuestionarioHelper(this);

// here in a  class DownloadFileAsync extends AsyncTask<String, String, String> 
  I download the version of the table in the web and if is different than the one 
  already in the db then it calls the table complete information to replace the one 
  in the apps db.

//Here I verify what table version I have so I can add to a non existing table, 
  do nothing if both versions are the same or replace the bd table if they are different.

public void verficar(){

verify = db.getTableCount();
if(verify == 0){
    tvVersion.setText("Version nueva "+Version.get(0).version);
    // download the table information and added to the db
}else{
    if(versionEntrada.equals(db.getVersion())){
        tvVersion.setText("Version ya existe "+db.getVersion());
           //version is the same do nothing
    }else{
        int oldVersion = Integer.parseInt(db.getVersion());
        int newVersion = Integer.parseInt(versionEntrada);
        db.onUpgrade(db, oldVersion, newVersion);//here is where I don't know 
                                                    //how to call it, this is not working!
        // download the table information and added to the db
        tvVersion.setText("Version actualizada "+Version.get(0).version);
    }
}
} 
```

在数据库中，版本表是我存储表版本的地方，或者它可能是数据库版本，它只有一列和一行，因为它只是一个与我的网络表版本比较的数字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T17:00:56.633

您应该制作 SCHEMA_VERSION`not final`并将此版本作为参数传递：

更改这些行

```
private static final int SCHEMA_VERSION=1;
public CuestionarioHelper(Context context) {
    super(context, DB_NAME, null, SCHEMA_VERSION);
} 
```

到（注意 SCHEMA_VERSION 已删除）

```
public CuestionarioHelper(Context context, int version) {
    super(context, DB_NAME, null, version);
} 
```

# c - 如何将c中的数据类型byte []转换为delphi？

> ID：12626434
> 
> 赞同：2
> 
> 时间：2012-09-27T16:56:21.423
> 
> 标签：c, delphi, delphi-7, converter

这是我需要转换delphi的代码：

```
LPBYTE readCharBuff = NULL;
BYTE readBuffSize;

readCharBuff = new BYTE[200];
readBuffSize    = 200;

readCharBuff[readBuffSize] = '\0'; 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T21:20:14.837

这是一个字面翻译：

```
var
  readCharBuff: PByte; 
  readBuffSize: Byte; 
```

.

```
readCharBuff := nil; 

GetMem(readCharBuff, 200); 
readBuffSize := 200; 

readCharBuff[readBuffSize] := $0; 
```

# save - 将数组保存到变量名 Octave

> ID：12626440
> 
> 赞同：2
> 
> 时间：2012-09-27T16:56:36.400
> 
> 标签：save, filenames, octave

我有一个循环，每次在数组中都有新数据。我想在每次插入循环后将该数组保存在 .mat 文件中，并且我希望文件的名称随循环值而变化。假设我循环了 5 次，我想要 5 个文件 array_1.mat array_2.mat array_3.mat array_4.mat array_5.mat

为了测试我的想法，我写道：

```
for A=1:10;
filename = sprintf('array_%d.mat', A)
save('-mat', filename, 'A');
endfor 
```

在八度音程中运行此代码后，我确实得到了 5 个名称正确的文件，但它们似乎不是 .mat 文件，我无法将它们再次加载到八度音程中。我尝试了很多其他小的语法更改，但似乎没有任何效果。谁能告诉我我做错了什么和/或给我一个测试示例，该示例使用循环变量更改 a.mat 文件的名称。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T11:27:17.827

这对我有用，所以我猜你的问题出在 load 命令上。你是如何加载文件的？你应该`load array_5.mat`

# c++ - 如何从 OpenCV 编译的库中停止 OpenGL 支持

> ID：12626441
> 
> 赞同：1
> 
> 时间：2012-09-27T16:56:35.603
> 
> 标签：c++, opengl, opencv, macros

我在 opengl 支持下编译了新版本的 opencv。我认为它将帮助我在 opencv 中进行与 opengl 相关的工作。

```
cv::Mat jk = cv::imread("C:\\Users\\ssc1\\Documents\\hair-2.png",0);
cv::imshow("xxxx",jk);

cv::waitKey(); 
```

这是我的小代码，没有 opengl 的东西，但由于 openGL 支持，它最后崩溃了。默认情况下，假设我使用的是 opengl 窗口。

opencv的头文件window_w32.cpp里面

```
#ifdef HAVE_OPENGL
if (window->useGl)
{
    wglMakeCurrent(window->dc, window->hGLRC); 
```

它在此代码上崩溃。

我尝试使用#undef HAVE_OPENGL，但它没有帮助......这是否意味着我应该在没有OpenGL支持的情况下重新编译并在需要时将其与显式opengl库一起使用？

指导我我犯了什么错误。

# c# - 拆分作为对象属性的字符串，从拆分字符串创建新对象。有没有优雅的方法？

> ID：12626445
> 
> 赞同：1
> 
> 时间：2012-09-27T16:56:48.733
> 
> 标签：c#, .net, linq, list, parsing

我的场景：

我有一个对象，我们称它为 object1，如下所示：

```
object1{
string commaSeparatedListOfIds;
DateTime time;
int passes;
...
irrelvant properties
...
} 
```

我想要做的是拆分`commaSeparatedListOfIds`每个 id 值，并将每个值保存在它自己的对象（object2）中，以及相关的其他属性。

```
object2{
int id;
DateTime time;
int passes;
} 
```

这会重复信息，但对于我想编写的任何其他解决方案的方法来说，都会非常混乱。

我试过的是：

```
 List<object2> newObjects = new List<object2>(object1.commaSeparatedListOfIds.Split(',').Select(
                        new object2{
                        id int.Parse,
                        time = object1.time
                        passes = object1.passes
                        }).ToList<object2>()); 
```

但这不会建立。

任何人都可以帮助我尽可能优雅地做我想做的事吗？我意识到两个循环和一些可怕的代码是可能的，但我知道某处有一个漂亮的解决方案！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T16:59:36.057

我相信你想要这样的东西：

```
 List<object2> newObjects = object1.commaSeparatedListOfIds.Split(',')
                                   .Select(str =>
                                        new object2
                                        {  
                                           id = int.Parse(str),
                                           time = object1.time,
                                           passes = object1.passes
                                        })
                                   .ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T17:02:31.340

在查询语法中（我更喜欢它`SelectMany`）：

```
var newObjects = from ob1 in object1
                 from strId in ob1.commaSeparatedListOfIds.Split(',')
                 select new object2(){
                     id = int.Parse(strId),
                     time = ob1.time, 
                     passes = ob1.passes
                 };
List<object2> result = newObjects.ToList(); 
```

（错误地认为`object1`是`IEnumerable<object1>`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T17:04:24.197

```
public class O1
{
    public string Ids { get; set; }
    public DateTime Time { get; set; }
    public int Passes { get; set; }
}

public class O2
{
    public int Id { get; set; }
    public DateTime Time { get; set; }
    public int Passes { get; set; }
}

static void Main(string[] args)
{
    var o1 = new O1();
    o1.Ids = "1,2,3,4,5";
    o1.Time = DateTime.Now;
    o1.Passes = 42;

    var results = o1.Ids.Split(',').Select(r => new O2 { Id = int.Parse(r), Time = o1.Time, Passes = o1.Passes });
    foreach (var item in results)
    {
        Console.WriteLine("{0}: {1} {2}", item.Id, item.Time, item.Passes);
    }
} 
```

类似的东西。但是，请注意不要只做`int.Parse(...)`，因为您的 Id 字符串中可能包含无效数据。

# javascript - 使用jquery插入iframe时如何防止页面跳转滚动

> ID：12626446
> 
> 赞同：0
> 
> 时间：2012-09-27T16:56:49.840
> 
> 标签：javascript, jquery, html, iframe

当我插入带有 jquery 的 iframe 时，它​​会将页面的滚动向下跳转到 iframe 所在的位置。我该如何防止这种情况？为什么会这样？

```
var code = '<iframe id="upload_target" name="upload_target" src="#" style="width:0;height:0;border:0px solid #fff;"></iframe>';
$('#target').html(code); 
```

这也说明了问题：http: [//jsfiddle.net/andys627/VPJvM/](http://jsfiddle.net/andys627/VPJvM/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T17:02:58.223

您可以尝试保存上次滚动位置，添加 iframe 然后滚动回您保存的位置。就是这样

```
var lasttop = $(window).scrollTop();
var code = '<iframe id="upload_target" name="upload_target" src="#" style="width:0;height:0;border:0px solid #fff;"></iframe>';
$('#target').html(code);
$(window).scrollTop(lasttop ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T17:03:45.353

删除您的`src="#"`属性，因为它是一个空哈希，当您的网址中没有哈希标签时浏览器会滚动

# imageview - 在 Textview 上方设置 ImageView

> ID：12626449
> 
> 赞同：0
> 
> 时间：2012-09-27T16:56:59.020
> 
> 标签：imageview, android-imageview, textview, android

我只想做一个非常简单的想法：

我想在他的底部只放一个简单的 TextView 将 ImageView 放在全屏上，而不是 Over 而只是在他的底部..

我尝试了一些组合，但没有任何效果..

这是我当前的基本 XML 代码：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content">
    <ImageView
        android:id="@+id/imgset"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@color/white"
        android:src="@drawable/creditview" />

    <RelativeLayout
    android:id="@+id/layoutimgset"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">

    <TextView android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="This spot is for Ad"
        android:textStyle="bold"
        android:textColor="@color/black"
        android:background="@color/white" />

    </RelativeLayout>
</LinearLayout> 
```

这仅显示 ImageView ..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-02T11:09:43.770

尝试将其用于您的 ImageView：

```
android:layout_weight="1" 
```

在这种情况下，您不需要RelativeLayout。或者将所有内容放到RelativeLayout中并使用

```
android:layout_below="@+id/imgset" 
```

为您的 TextView

# java - 将鼠标侦听器坐标转换为图表坐标

> ID：12626454
> 
> 赞同：5
> 
> 时间：2012-09-27T16:57:25.167
> 
> 标签：java, jfreechart, mouselistener

我想通过鼠标点击在我的应用程序中设置点。我使用 JFreeChart 并在 ChartPanel 鼠标监听器中使用。这看起来像这样：

```
panel.addChartMouseListener(new ThisMouseListener()); 
```

和我的鼠标监听器 ThisMouseListener() （它还没有完成）：

```
class ThisMouseListener implements ChartMouseListener{

    @Override
    public void chartMouseClicked(ChartMouseEvent event) {
        int x = event.getTrigger().getX();
        int y = event.getTrigger().getY();

        System.out.println("X :" + x + " Y : " + y);

        ChartEntity entity = event.getEntity();
        if(entity != null && (entity instanceof XYItemEntity)){
            XYItemEntity item = (XYItemEntity)entity;
        }
        new JOptionPane().showMessageDialog(null, "Hello", "Mouse Clicked event", JOptionPane.OK_OPTION);
    }

    @Override
    public void chartMouseMoved(ChartMouseEvent arg0) {
        // TODO Auto-generated method stub

    }

} 
```

但是这个鼠标监听器返回我的面板坐标，我想从我的图表中获取坐标。可能我必须将侦听器与其他对象一起使用吗？或者我可以用某种方法转换坐标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T17:04:06.257

您将侦听器添加到面板。因此，当您单击鼠标时，您会收到相对于面板的坐标 - 这是事件的来源。您需要将此侦听器添加到图表中。

另一种可能性是获取图表相对于面板的坐标，然后从 x 和 y 中减去它们。

```
Point p = chart.getLocation();     
int px = p.getX();
int py = p.getY();

x = x-px; // x from event
y = y-py; // y from event
// x and y are now coordinates in respect to the chart

if(x<0 || y<0 || x>chart.getWidth() || y>chart.getHeight()) // the click was outside of the chart
else // the click happened within boundaries of the chart and 
```

如果面板是图表组件的容器，您的解决方案可能类似于上述解决方案。请注意，这些坐标将是相对于图表左上角的坐标。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T17:52:55.070

通过以下方式获取图形空间中的 x,y 坐标

```
double x = event.getChart().getXYPlot().getDomainCrosshairValue();
double y = event.getChart().getXYPlot().getRangeCrosshairValue(); 
```

一个主要问题：我发现 JFreeChart*在*调用 ChartMouseEvent 处理程序之前不会更新这些值；每次通过我都会得到以前的值。您可以查看 XYPlot.handleClick(x,y,info) 以获取处理程序中的当前值的详细信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-15T16:41:03.350

您必须获得对 ChartPanel 的引用，重新绘制它，然后才能从绘图中获得正确的 X、Y 坐标。为此，您必须将坐标检索放在 awt 队列上，而不是直接调用它。下面是一个对我有用的例子（仅适用于 X 坐标）

```
@Override
public void chartMouseClicked(ChartMouseEvent cme) {
    final ChartMouseEvent cmeLocal = cme;
    ChartPanel hostChartPanel = (ChartPanel) cme.getTrigger().getComponent();
    if (null != hostChartPanel) {

        //Crosshair values are not valid until after the chart has been updated
        //that is why call repaint() now and post Crosshair value retrieval on the
        //awt thread queue to get them when repaint() is finished
        hostChartPanel.repaint();

        java.awt.EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                JFreeChart chart = cmeLocal.getChart();
                XYPlot plot = chart.getXYPlot();
                double crossHairX = plot.getDomainCrosshairValue();
                JOptionPane.showMessageDialog(null, Double.toString(crossHairX), "X-Value", JOptionPane.OK_OPTION);
            }
        });
    }
} 
```

# sql-server-2008 - SQL Server拆分日期时间以进行日-小时查询？

> ID：12626465
> 
> 赞同：0
> 
> 时间：2012-09-27T16:58:14.340
> 
> 标签：sql-server-2008, group-by, aggregate-functions

SQL 服务器 2008。

```
declare @pardate table ( pardateid int, pardatewhen datetime2(3) )
insert into @pardate values ( 1 , '2011-09-17 12:43' )
insert into @pardate values ( 2 , '2011-09-17 12:44' )
insert into @pardate values ( 3 , '2011-10-11 12:45' )
insert into @pardate values ( 4 , '2011-10-12 12:46' )
insert into @pardate values ( 5 , '2011-10-13 12:47' )
insert into @pardate values ( 6 , '2011-11-20 12:48' )
insert into @pardate values ( 7 , '2011-11-21 12:49' )
insert into @pardate values ( 8 , '2011-11-22 12:50' )
declare @child table ( childid int , pardateid int , childvalue char(6) )
insert into @child values ( 1 , 1 , 'aaaaaa' )
insert into @child values ( 2 , 2 , 'bbbbbb' )
insert into @child values ( 3 , 3 , 'cccccc' )
insert into @child values ( 4 , 4 , 'dddddd' )
insert into @child values ( 5 , 5 , 'cccccc' )
insert into @child values ( 6 , 6 , 'cccccc' )
insert into @child values ( 7 , 7 , 'eeeeee' )
insert into @child values ( 8 , 8 , 'ffffff' )

select pardatewhen , childvalue , COUNT(childvalue)
from @child childtable join @pardate parenttable on childtable.pardateid=parenttable.pardateid
group by pardatewhen , childvalue 
```

我试图每天、每小时计算一次@child.childvalue，所以我的结果中有 8760 行。第一遍有一个循环和一个 CONVERT，它需要大约 5 分钟才能运行实际结果集（这只是一个示例）。我确实创建了一个 CTE 来制作日历临时表（使用[http://www.sqlpointers.com/2006/07/generating-temporary-calendar-tables.html](http://www.sqlpointers.com/2006/07/generating-temporary-calendar-tables.html)），并认为它可以以某种方式加入以添加“空值" 到结果集中。

我需要得到一个看起来像这样的结果集

```
date          hour    count
...
2011-09-17    0       0
....
2011-09-17    12      2
....
2011-10-11    12      1 
```

怎样才能有效地做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T17:28:31.873

像（在您的查询中有 childvalue 但在您的示例结果中没有？）

```
select Cast(pardatewhen as Date) as [date], DatePart(hour,pardatewhen) as [hour] , childvalue , COUNT(childvalue) 
from @child childtable 
join @pardate parenttable on childtable.pardateid=parenttable.pardateid 
group by Cast(pardatewhen as Date), DatePart(hour,pardatewhen), childvalue 
```

注意 SQL 2008 中引入了日期类型

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T18:10:43.557

试试这个。

```
;WITH cal AS
(SELECT CAST('2011-01-01' AS DATETIME) AS cal_date
  UNION ALL
 SELECT DATEADD(hour,1,cal_date)
  FROM cal
  WHERE cal_date < '2011-12-31 23:00'
)  
, par AS
(
    select CAST(pardatewhen AS DATE) AS pardate, DATEPART(hh,pardatewhen) AS parhour , COUNT(childvalue) as num
    from @child childtable 
    join @pardate parenttable on childtable.pardateid=parenttable.pardateid 
    group by CAST(pardatewhen AS DATE), DATEPART(hh,pardatewhen)  
)
SELECT CAST(cal.cal_date  AS DATE) AS [date],DATEPART(hh,cal.cal_date) AS [hour],ISNULL(par.num,0) AS [childvalue_count]
FROM    cal  
LEFT JOIN par
    ON CAST(cal.cal_date  AS DATE) = par.pardate
        AND DATEPART(hh,cal.cal_date) = par.parhour
OPTION (MAXRECURSION 9999) 
```

# visual-studio-2010 - Win桌面应用程序中的Infragistics网格，设计视图不可查看

> ID：12626469
> 
> 赞同：0
> 
> 时间：2012-09-27T16:58:26.463
> 
> 标签：visual-studio-2010, grid, infragistics

我在桌面 Windows 应用程序中遇到了 Infragistics 网格的奇怪情况。它是 Visual Studio 2010。

我在一个表单控件中放置了几个网格。它工作得很好，我能够看到代码隐藏视图和设计器视图进行修改。然后其他几个开发人员使用相同的控件。它仍然运行良好，没有问题。我仍然可以看到和修改后面的代码。但由于某种原因，我无法访问和查看设计视图。它只是给了我错误信息：

**密钥已存在参数名称：密钥**

这是调用堆栈：

在 Infragistics.Shared.KeyedSubObjectsCollectionBase.ValidateKeyDoesNotExist(String key, IKeyedSubObject ignoreObject) 在 Infragistics.Shared.KeyedSubObjectsCollectionBase.ValidateKey(String key, IKeyedSubObject ignoreObject) 在 Infragistics.Shared.KeyedSubObjectsCollectionBase.InternalAdd(IKeyedSubObject obj) 在 Infragistics.Win.UltraWinGrid.ColumnsColle Infragistics.Win.UltraWinGrid.UltraGridBand.InitListManager(BindingManagerBase bindingManager, String dataMember, UltraGridBand[] oldBands) at Infragistics.Win.UltraGridBand.InitColumns(UltraGridBand[] oldBands) 中的 .InternalAdd(UltraGridColumn 列) Infragistics.Win.UltraWinGrid .UltraGridLayout.ListManagerUpdated(BindingManagerBase bindingManager) 在 Infragistics.Win.UltraWinGrid.UltraGridLayout.ListManagerUpdated() 在 Infragistics.Win.UltraWinGrid.UltraGridBase。Set_ListManager(Object newDataSource, String newDataMember) at Infragistics.Win.UltraWinGrid.UltraGridBase.VerifyDataSourceAttached() at Infragistics.Win.UltraWinGrid.UltraGridBase.DesignTimeDataSourceInitialization() at Infragistics.Win.UltraWinGrid.UltraGridBase.OnDesignerHostLoadComplete(Object sender, EventArgs e) at System.EventHandler.Invoke(Object sender, EventArgs e) at System.ComponentModel.Design.DesignerHost.OnLoadComplete(EventArgs e) at System.ComponentModel.Design.DesignerHost.System.ComponentModel.Design.Serialization.IDesignerLoaderHost.EndLoad(String rootClassName,布尔成功，ICollection errorCollection) 在 System.ComponentModel.Design.Serialization.BasicDesignerLoader.OnEndLoad(布尔成功，ICollection 错误) 在 System.ComponentModel.Design.Serialization.CodeDomDesignerLoader.OnEndLoad(布尔成功，ICollection 错误）在 System.ComponentModel.Design.Serialization.BasicDesignerLoader.System.ComponentModel.Design.Serialization.IDesignerLoaderService.DependentLoadComplete（布尔成功，ICollection errorCollection）在 System.ComponentModel.Design.Serialization.BasicDesignerLoader.BeginLoad（IDesignerLoaderHost 主机）在系统.ComponentModel.Design.DesignerHost.BeginLoad（DesignerLoader 加载器）

我真的需要查看和修改控件的设计视图。

如果有人能建议如何解决这个问题，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T22:18:28.790

似乎我能够查明问题所在。它是添加拖放方式的数据源对象之一。我打开了文件 ..Designer.cs 并用它手动注释了所有行。设计视图再次开始工作。

感谢所有考虑提供帮助的人。

# javascript - IE9获取悬停颜色javascript

> ID：12626480
> 
> 赞同：0
> 
> 时间：2012-09-27T16:59:13.383
> 
> 标签：javascript, css, scripting

> **可能重复：**
> [阅读：使用 javascript 的悬停伪类](https://stackoverflow.com/questions/1285033/read-hover-pseudo-class-with-javascript)

有没有办法使用javascript获取元素的悬停颜色？

编辑：请参阅我的反驳所谓的“重复答案”。

# iphone - 即使您的应用与 iOS5 兼容，也可以使用 iOS6 处理 MKDirectionsRequest

> ID：12626482
> 
> 赞同：0
> 
> 时间：2012-09-27T16:59:15.433
> 
> 标签：iphone, maps, ios6, directions

我想让我们的应用程序与 iOS6 的 MKDirectionsRequest（公交路线方法）兼容。苹果表示最好的方法是：

```
- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation
{
    if ([MKDirectionsRequest isDirectionsRequestURL:url]){
        }
} 
```

但是，确保此代码仅在应用程序在 iOS6 中运行而不是在 iOS5 中运行时运行的最佳方法是什么？该应用程序也必须与iOS5兼容，但我`MKDirectionsRequest`是iOS6。

我不能使用编译器指令，例如：

```
#ifdefine iOS5 
```

或任何东西。

这是最好的方法吗？

```
BOOL atLeastIOS6 = [[[UIDevice currentDevice] systemVersion] floatValue] >= 6.0; 
```

进而：

```
- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation
    {

        if (atLeastIOS6)
        {
            if ([MKDirectionsRequest isDirectionsRequestURL:url]){
            }
        }
    } 
```

我只是想确保在检查 openURLs 时不会在 iOS5 上崩溃

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T21:43:04.137

不要依赖iOS版本。使用 NSClassFromString 检查类是否存在：

```
Class directionsRequestClass = NSClassFromString(@"MKDirectionsRequest");

if (directionsRequestClass)
    // it exists, so you can use it
else
    // doesn't exist, do something else 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T20:54:52.273

您可以测试 MKDirectionsRequest 类是否可用：

```
if ([MKDirectionsRequest class]) { 
 ... 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T20:31:24.763

我看到许多不鼓励使用系统版本字符串的帖子。这可能与将 6.0.1 转换为浮点数有关，但不确定。

首选方法似乎是测试出现在特定版本中的选择器。因此，我使用这两种方法分别测试 iOS 5 或 6。

```
+ (BOOL)isOS5Capable {

    return ( [UINavigationBar respondsToSelector:@selector(appearance)] );

}

+ (BOOL)isOS6Capable {

    return ( [UIView respondsToSelector:@selector(requiresConstraintBasedLayout)] );

} 
```

如果您查看 Apple 框架中的标题，您会看到有很多 NS_AVAILABLE 宏指定选择器出现的版本。为了为 iOS 6 创建这个函数，我花了几分钟寻找一个静态方法来简化检查（这样我就不必分配一个类）。通过遵循这种做法，您应该能够确保您的应用程序对于未来的更新是版本安全的。

# gwt - 从垂直面板中移除框架

> ID：12626485
> 
> 赞同：0
> 
> 时间：2012-09-27T16:59:24.870
> 
> 标签：gwt, mvp

我需要一些帮助才能[`Frame`](http://google-web-toolkit.googlecode.com/svn/javadoc/1.6/com/google/gwt/user/client/ui/Frame.html)从 a 中删除 a[`VerticalPanel`](http://google-web-toolkit.googlecode.com/svn/javadoc/1.6/com/google/gwt/user/client/ui/VerticalPanel.html)

*   我有一个 GWT 模块，其中我也使用了 HISTORY。
*   我正在使用 MVP 框架，所以我初始化了我的 mainPanel，它是 GWT 的垂直面板。
*   我在主面板中添加了一个超链接。
*   我现在已经向该面板添加了一个框架。

经过几种方法，我试图清除面板以重用它。

当我调用主面板的 clear 方法时，我看到超链接保持不变，并且 Frame 现在是空的，但两者仍显示在屏幕上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T17:19:59.640

您可以在 VerticalPanel 上调用 clear()，也可以在这些小部件上调用 removeFromParent()。

# seo - 为什么 Google 没有获取我的某些链接？

> ID：12626492
> 
> 赞同：0
> 
> 时间：2012-09-27T16:59:41.747
> 
> 标签：seo

我在不同的服务器和 IP 上有几个网站，它们通过锚文本和所有链接返回（dofollow），但我的网站管理员工具仪表板总是缺少这些链接。

有什么办法可以解决这个问题？

只是典型的 HTML 链接回到我经营的网页设计公司。

斯蒂芬妮·诺特网络

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T21:26:35.760

您列出的网站的最后缓存日期是 2012 年 9 月 12 日。当时您的链接不在页面上：

[http://webcache.googleusercontent.com/search?q=cache:jRts9k1HNjkJ:stephanienault.com/+&cd=1&hl=en&ct=clnk&gl=us](http://webcache.googleusercontent.com/search?q=cache:jRts9k1HNjkJ:stephanienault.com/+&cd=1&hl=en&ct=clnk&gl=us)

# android - Jenkins 上的 Android Maven 项目

> ID：12626494
> 
> 赞同：4
> 
> 时间：2012-09-27T16:59:50.003
> 
> 标签：android, maven, jenkins

我已经尝试在我使用 Maven 的 Android 项目中使用 Jenkins。除了模拟器部分之外，我已经尝试按照本教程进行操作，因为我还没有任何测试。[http://vitorbaptista.com/continuous-integration-for-android-apps-with-jenkins-and-maven3/](http://vitorbaptista.com/continuous-integration-for-android-apps-with-jenkins-and-maven3/)

尝试在 Jenkins 中构建项目时出现以下错误：

> 消息：无法在项目上执行目标 com.jayway.maven.plugins.android.generation2:android-maven-plugin:3.3.0:generate-sources (default-generate-sources) ....：执行 default-generate-目标 com.jayway.maven.plugins.android.generation2:android-maven-plugin:3.3.0:generate-sources 的来源失败：找不到工具“aapt”。请在插件中提供正确的 Android SDK 目录路径作为配置参数...。作为替代方案，您可以将参数添加到命令行：-Dandroid.sdk.path=... 或设置环境变量 ANDROID_HOME。原因：执行目标 com.jayway.maven.plugins.android.generation2:android-maven-plugin:3.3.0:generate-sources 的 default-generate-sources 失败：找不到工具“aapt”。请提供正确的 Android SDK 目录路径作为配置参数... 在插件中。作为替代方案，您可以将参数添加到命令行：-Dandroid.sdk.path=... 或设置环境变量 ANDROID_HOME。

这是我对 Android 和 Maven 的配置：

**詹金斯** ![在此处输入图像描述](../Images/9560ea73547b6d2902415835864e0adb.png) ![在此处输入图像描述](../Images/bdb3274aeff942c8f6038e7f271ae417.png) （那个文件夹是正确的，我检查了一百万次） ![在此处输入图像描述](../Images/d1860e3fa3a81d4cbff189a0b41e8fbe.png)

**项目**

![在此处输入图像描述](../Images/6c9761e117b852a96c03ae629a30804d.png)

在 Jenkins 无权访问的情况下，我什至尝试 chmod 777'ing 到我的 SDK 目录的路径。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T17:51:49.120

不幸的是，它就像安装平台工具一样简单。由于我一直通过 UI 使用 SDK，因此我没有考虑过平台工具的安装。安装平台工具后，一切都已构建。

该命令很简单：

```
[sdkdir]/tools/android update sdk --no-ui --filter platform-tool 
```

# java - 如何在浏览器不打开新标签的情况下通过 JAVA 在浏览器中打开网站

> ID：12626501
> 
> 赞同：0
> 
> 时间：2012-09-27T17:00:21.297
> 
> 标签：java

**介绍**

我正在用java制作代理服务器。每当用户在浏览器中输入未知主机（URL）时，代理服务器`UnknownHostException`通过执行以下代码进行处理：

```
try {
        Process p=Runtime.getRuntime().exec("cmd /c start http://www.mysite.com/unknownhosterror.htm"); 
    }
    catch(IOException io) {
        System.out.println("Error");
    } 
```

这些代码行的作用是显示一个包含“无法显示此页面”的 html 文件。每当用户输入一个不存在的 URL 时。

**问题**

上面的代码会打开一个新选项卡并显示 www.mysite.com/unknownhosterror.htm 的内容。我想要的是重定向到它。

例如，我在 URL 栏中写了 www.nosuchsite.com。假设没有这样的站点，它会自动重定向到 www.mysite.com/unknownhosterror.htm 并显示“无法显示此页面。”。

我怎样才能做到这一点？

*编辑*注意：我不使用`Servlet`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T17:34:43.900

我可能误解了您的意思，但是如果您确实有代理服务器，那么[当](http://www.skillipedia.com/howto.hm?rid=297)代理服务器检测到`UnknownHostException`.

在对浏览器的响应中，您需要在响应的标题中添加类似于以下几行的内容：

```
HTTP/1.1 301 Moved Permanently
Location: http://www.mysite.com/unknownhosterror.htm 
```

如何将其添加到您的标头中很大程度上取决于您如何处理请求。如果您显示一些代理处理程序代码，我可以提供更多信息。

# java - @Test 后回滚事务

> ID：12626502
> 
> 赞同：99
> 
> 时间：2012-09-27T17:00:23.753
> 
> 标签：java, spring, hibernate, junit, spring-test

首先，我在 StackOverflow 上找到了很多关于此的线程，但没有一个真正帮助我，很抱歉问可能重复的问题。

我正在使用 spring-test 运行 JUnit 测试，我的代码如下所示

```
@RunWith(SpringJUnit4ClassRunner.class)  
@ContextConfiguration(locations = {})
public class StudentSystemTest {

    @Autowired
    private StudentSystem studentSystem;

    @Before
    public void initTest() {
    // set up the database, create basic structure for testing
    }

    @Test
    public void test1() {
    }    
    ...  
} 
```

我的问题是我希望我的测试不会影响其他测试。所以我想为每个测试创建类似回滚的东西。我已经为此搜索了很多，但到目前为止我什么也没找到。我为此使用 Hibernate 和 MySql

* * *

## 回答 #1

> 赞同：146
> 
> 时间：2012-09-27T17:08:55.587

只需`@Transactional`在测试顶部添加注释：

```
@RunWith(SpringJUnit4ClassRunner.class)  
@ContextConfiguration(locations = {"testContext.xml"})
@Transactional
public class StudentSystemTest { 
```

默认情况下，Spring 将围绕您的测试方法和`@Before`/`@After`回调启动一个新事务，并在最后回滚。它默认工作，在上下文中有一些事务管理器就足够了。

来自：[*10.3.5.4 事务管理*](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/testing.html#testcontext-tx)（粗体）：

> 在 TestContext 框架中，事务由 TransactionalTestExecutionListener 管理。请注意，即使您没有在测试类上明确声明，它`TransactionalTestExecutionListener`也是**默认配置的。**`@TestExecutionListeners`但是，要启用对事务的支持，您必须在由语义`PlatformTransactionManager`加载的应用程序上下文中提供一个 bean 。`@ContextConfiguration`此外，**您必须`@Transactional`在类或方法级别为您的测试**声明。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2016-03-11T15:14:06.440

*旁白：*试图修改 Tomasz Nurkiewicz 的回答被拒绝：

> 此编辑不会使帖子更易于阅读、更易于查找、更准确或更易于访问。更改要么完全是多余的，要么会严重损害可读性。

* * *

指向有关集成测试的文档相关部分的正确且永久的[链接。](http://docs.spring.io/spring/docs/4.2.5.RELEASE/spring-framework-reference/html/integration-testing.html#testcontext-tx)

> 要启用对事务的支持，您必须在通过语义加载的`PlatformTransactionManager`bean 中配置一个 bean 。`ApplicationContext``@ContextConfiguration`

```
@Configuration
@PropertySource("application.properties")
public class Persistence {
    @Autowired
    Environment env;

    @Bean
    DataSource dataSource() {
        return new DriverManagerDataSource(
                env.getProperty("datasource.url"),
                env.getProperty("datasource.user"),
                env.getProperty("datasource.password")
        );
    }

    @Bean
    PlatformTransactionManager transactionManager() {
        return new DataSourceTransactionManager(dataSource());
    }
} 
```

> 此外，您必须`@Transactional`在测试的类或方法级别声明 Spring 的注解。

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(classes = {Persistence.class, SomeRepository.class})
@Transactional
public class SomeRepositoryTest { ... } 
```

> 注释测试方法`@Transactional`会导致测试在事务中运行，默认情况下，测试完成后会自动回滚。如果测试类用 注释`@Transactional`，则该类层次结构中的每个测试方法都将在事务中运行。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-09-27T17:40:31.560

提到添加的答案`@Transactional`是正确的，但为简单起见，您可以只使用 test class `extends AbstractTransactionalJUnit4SpringContextTests`。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-01-19T06:56:47.807

我知道，我发布答案太晚了，但希望它可以帮助某人。另外，我刚刚解决了我在测试中遇到的这个问题。这是我在测试中得到的：

我的测试班

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "path-to-context" })
@Transactional
public class MyIntegrationTest 
```

上下文 xml

```
<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource">
   <property name="driverClassName" value="${jdbc.driverClassName}" />
   <property name="url" value="${jdbc.url}" />
   <property name="username" value="${jdbc.username}" />
   <property name="password" value="${jdbc.password}" />
</bean> 
```

我仍然有一个问题，数据库没有被自动清理。

当我将以下属性添加到 BasicDataSource 时，问题已解决

```
<property name="defaultAutoCommit" value="false" /> 
```

希望能帮助到你。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-08-18T06:47:33.757

除了添加`@Transactional`on`@Test`方法，还需要添加`@Rollback(false)`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-09-27T17:04:44.717

您需要使用 Spring 上下文和事务管理器运行测试，例如，

```
@RunWith(SpringJUnit4ClassRunner.class)  
@ContextConfiguration(locations = {"/your-applicationContext.xml"})
@TransactionConfiguration(transactionManager="txMgr")
public class StudentSystemTest {

     @Test
     public void testTransactionalService() {
         // test transactional service
     }

     @Test
     @Transactional
     public void testNonTransactionalService() {
         // test non-transactional service
     }
} 
```

有关详细信息，请参阅 Spring 参考章节[`3.5.8\. Transaction Management`](https://docs.spring.io/spring/docs/current/spring-framework-reference/testing.html#testcontext-tx)。

* * *

## 回答 #7

> 赞同：-7
> 
> 时间：2016-01-04T09:47:43.950

您可以禁用回滚：

```
@TransactionConfiguration(defaultRollback = false) 
```

例子：

```
@RunWith(SpringJUnit4ClassRunner.class)
@SpringApplicationConfiguration(classes = Application.class)
@Transactional
@TransactionConfiguration(defaultRollback = false)
public class Test {
    @PersistenceContext
    private EntityManager em;

    @org.junit.Test
    public void menge() {
        PersistentObject object = new PersistentObject();
        em.persist(object);
        em.flush();
    }
} 
```

# multithreading - mod_wsgi 是否在单个 python 解释器中运行？

> ID：12626503
> 
> 赞同：2
> 
> 时间：2012-09-27T17:00:23.650
> 
> 标签：multithreading, mod-wsgi, gil

我有一个 django 应用程序，它严重依赖于线程，无论我添加多少进程或线程到`WSGIDaemonProcess`.

我在那里找不到是/否的答案，我想知道。会不会是 mod_wsgi 对每个请求都使用相同的解释器，所以由于 GIL 限制，我在瓶颈中运行？

如果是这样，您会推荐其他可以帮助我解决此限制的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T06:54:57.220

对于典型的配置，是的，所有请求都将在同一个子解释器中处理。

如果在同一进程的不同子解释器中，您仍然受到 GIL 的影响。

发布您的实际 mod_wsgi 配置以确认您已正确设置。

考虑尝试 New Relic 以找出真正的瓶颈所在。

观看我在 PyCon US 2012 上关于寻找瓶颈的演讲

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-07T17:09:35.967

简短的回答：

不。

长答案：

> 这种充分利用处理器的能力，即使在使用多线程时，也因为 Apache 使用多个进程来处理请求而不仅仅是一个进程而得到进一步增强。因此，即使在特定进程中存在对 GIL 的争用，它也不会阻止其他进程能够运行，因为 GIL 仅在进程本地并且不会跨进程扩展。

引用：[https ://code.google.com/p/modwsgi/wiki/ProcessesAndThreading](https://code.google.com/p/modwsgi/wiki/ProcessesAndThreading)

您没有为任何人提供足够的信息来推荐如何提高性能，但是如果您实际上已经用 Python 编写了一个线程繁重的程序，那是您的第一个错误。与其在 CPython 上运行程序，不如尝试 Jython 或 IronPython。但是它不适用于 mod_wsgi，所以我们真的需要更多细节来理解你想要做什么......

# android - 如何解决冲突？

> ID：12626509
> 
> 赞同：1
> 
> 时间：2012-09-27T17:00:49.983
> 
> 标签：android

> **可能重复：**
> [如何解决平板电脑中的以下冲突？](https://stackoverflow.com/questions/12623009/how-do-i-resolve-the-following-conflict-in-tablets)

我想使用我在手机和平​​板电脑中创建的 android 项目。我正在尝试在两个模拟器中使用它。但是我创建的小部件并没有固定在平板电脑屏幕上。我在我的 XML 中使用绝对布局，我也尝试使用相对布局。而且我在 android 项目中使用了支持屏幕标签，并在 res 文件夹中创建了名为 layout-large 的文件夹。但我没有成功。

除了这些，我还有什么想做的。请帮忙

# asp.net-mvc - Jstree - 通过用户输入将节点添加到树（按钮单击）

> ID：12626518
> 
> 赞同：2
> 
> 时间：2012-09-27T17:01:39.567
> 
> 标签：asp.net-mvc, json, jquery, jstree

我有一个使用 JsTree 的 ASP.NET MVC 4.0 项目。JsTree 被认为是一个返回 JSON 的模型。

现在我的问题是，我有一棵巨大的树，这使得用户体验非常糟糕。我需要的是加载一些项目（比如说 20 个），并有一个按钮，当用户单击该按钮时，会将接下来的 20 条记录添加到树中。

我一直在搜索 Google JsTree 文档和 SO，但我还没有找到适合我的示例。

谁能帮我？

提前致谢。

好的，有些突破。我有点得到这个工作。在我看来，用户输入调用此函数：

函数 getNextRecords() {

```
var new_data = { "attr": { "ID": "999999999999", "NodeText": "999999999999" },
    "data": "999999999999",
    "children": [{
        "attr": { "ID": "ACT99", "NodeText": "969994222" },
        "data": "969994222 - PPP",
        "children": [{
            "attr": { "ID": "TRFps800", "rel": "disabled" },
            "data": "Voz com unlimited 800 fidelização até 01/11/2019",
            "state": "open"
        }],
        "state": "open"
    }], "state": "open"
};

var retDom = $.jstree._reference("#demoTree")._parse_json(new_data, -1, true);
$("#demoTree").jstree("move_node", retDom, -1, "inside", false, false, true); 
```

}

这工作正常，期望解析 json 创建一个“ul”而不是“li”关于如何改变它的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T14:16:06.117

好的，我终于得到了这个工作，这是我的功能的最终版本，我希望这对某人有所帮助。

```
function getNextRecords() {

var new_data = { "attr": { "ID": "999999999999", "NodeText": "999999999999" },
    "data": "999999999999",
    "children": [{
        "attr": { "ID": "ACT99", "NodeText": "969994222" },
        "data": "969994222 - PPP",
        "children": [{
            "attr": { "ID": "TRFps800", "rel": "disabled" },
            "data": "Voz com unlimited 800 fidelização até 01/11/2019",
            "state": "open"
        }], "state": "open"
    }], "state": "open"
};

    var ref = $("li ul:first")
    var retDom = $.jstree._reference("#demoTree")._parse_json(new_data, ref, true);
      $("#demoTree").jstree("move_node", retDom, ref, "first", false, false, true);

} 
```

这在第一个 UL 之后添加了一个新的孩子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T22:57:04.803

```
The second part "load part of the branch and with another load of the same branch
load more" is exactly what i'm trying to do but i have not yet succeeded, is it
possible to have an example? 
```

必须在服务器端处理此类任务。采取这种方式：**jsTree 只显示传递给它的任何内容**。因此，您首先决定要加载什么，并且您可以有一个按钮（重新加载整个树或仅重新加载一个分支）来加载更多或替换已加载的任何内容。不要忘记逻辑（几乎）与 jsTree 无关。

# html - 分组按钮不适合整个宽度

> ID：12626521
> 
> 赞同：2
> 
> 时间：2012-09-27T17:01:59.753
> 
> 标签：html, css, jquery-mobile

```
<div data-role="header" id="commonHead">
    <div data-role="navbar">
        <h3 id="pageHeaderH1" alt="my root way to home" style="text-align:center;">myRWTH</h3> 
        <div data-role="controlgroup"  data-type="horizontal">
            <a href="index.html" data-role="button">Yes</a>
            <a href="index.html" data-role="button">No</a>
            <a href="index.html" data-role="button">Maybe</a>
        </div>
     </div>
</div> 
```

这是我的代码，但按钮不适合内容宽度，但与左侧对齐。我不明白我为什么不工作。有任何想法吗？

**更新：**我不知道为什么，但它不起作用。我的解决方法如下

```
<div data-role="header" id="commonHead" data-theme="b" >
    <div data-role="navbar" data-iconpos="right">
        <h3 id="pageHeaderH1" alt="my root way to home" style="text-align:center;" data-mini="true">myRWTH</h3> 
        <ul>     
         <li><a href="#popupBasic" data-rel="popup" data-type="vertical"  data-icon="gear" data-iconpos="bottom">Anzeigeoptionen</a>    
            <div data-role="popup" id="popupBasic" data-theme="b">
                <a id="ownPosition" data-role="button" data-icon="home" data-inline="true">Eigene Position</a>
                <a id="ownPosition" data-role="button" data-icon="minus" data-inline="true">Mensen</a>
                <a id="ownPosition" data-role="button" data-icon="minus" data-inline="true">HSP</a>
                <a id="ownPosition" data-role="button" data-icon="minus" data-inline="true">Gebäude</a>
                <a id="ownPosition" data-role="button" data-icon="minus" data-inline="true">Haltestellen</a>
                <a id="ownPosition" data-icon="delete" data-icon="home" data-inline="true">Alle ausblenden</a>
            </div> 
        </li>
         </ul>
     </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T17:05:39.163

这样做的方法很多，这里有一个：

```
<div data-role="header" id="commonHead">
    <div data-role="navbar">
        <h3 id="pageHeaderH1" alt="my root way to home" style="text-align:center;">myRWTH</h3> 
        <div data-role="controlgroup"  data-type="horizontal">
            <div style="width: 33%; float: left; text-align: center">
            <a href="index.html" data-role="button">Yes</a>
            </div>
            <div style="width: 33%; float: left; text-align: center">
            <a href="index.html" data-role="button" style="width: 33%">No</a>
            </div>
            <div style="width: 33%; float: left; text-align: center">
            <a href="index.html" data-role="button" style="width: 33%">Maybe</a>
            </div>
        </div>
     </div>
</div> ​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T17:34:19.893

尝试`data-type="horizontal"`单独添加到按钮。[手动的](http://jquerymobile.com/test/docs/buttons/buttons-grouped.html)

```
 <div data-role="header" id="commonHead">
 <div data-role="navbar">
    <h3 id="pageHeaderH1" alt="my root way to home" style="text-align:center;">myRWTH</h3> 
    <div data-role="controlgroup" >
        <a href="index.html" data-role="button" data-type="horizontal">Yes</a>
        <a href="index.html" data-role="button" data-type="horizontal">No</a>
        <a href="index.html" data-role="button" data-type="horizontal">Maybe</a>
    </div>
 </div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T03:31:29.133

您可能需要对其进行调整，这是一个技巧：

*   [http://jsfiddle.net/kewRs/](http://jsfiddle.net/kewRs/)

JS：

```
// override the jQM CSS
var cbnb = $('#customButtonNavbar');
var numberOfButtons = ($('.customButton').length > 0) ? $('.customButton').length:1;
var widthOfButtons = (Math.round(100 / numberOfButtons));

cbnb.children('.ui-controlgroup-controls').attr('style', 'width:100%;');
cbnb.children().children().attr('style', 'width:'+widthOfButtons+'%;'); 
```

HTML：

```
<div data-role="header" id="commonHead">
    <div data-role="navbar">
        <h3 id="pageHeaderH1" alt="my root way to home" style="text-align:center;">myRWTH</h3> 
        <div data-role="controlgroup" data-type="horizontal" id="customButtonNavbar">
            <a href="index.html" data-role="button" class="customButton">Yes</a>
            <a href="index.html" data-role="button" class="customButton">No</a>
            <a href="index.html" data-role="button" class="customButton">Maybe</a>
        </div>
     </div>
</div>​ 
```

# php - 如何在不包含包含的情况下调用其他文件中的函数？

> ID：12626522
> 
> 赞同：0
> 
> 时间：2012-09-27T17:02:05.243
> 
> 标签：php

如果不使用 include_once 或任何包含/要求，我如何引用当前目录中其他 php 文件中声明的函数？就像我们使用 fopen 一样。

包含包含不在函数中的代码的 php 文件的内容可能会很混乱。如果函数使用自动链接到它的定义会更好。

我还检查了[如何包含（）目录中的所有 PHP 文件？](https://stackoverflow.com/questions/599670/how-to-include-all-php-files-from-a-directory)这需要一些代码来完成。

我无法在互联网上的任何地方找到这个问题的答案可能是因为这个问题的搜索词太常见了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T17:07:32.997

最合乎逻辑的方法是使用 OOP 和[自动加载](http://php.net/manual/en/language.oop5.autoload.php)。

这样你只会加载你实际使用的类。

否则，您链接到的问题的公认答案就是要走的路。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T17:05:55.067

您可以使用 glob 遍历目录，然后包含它们：

```
$phpfiles = glob('mydir/*.php');
foreach($phpfiles as $file)
  do_something_with_the_file($file) // why not include_once $file ? 
```

当您在其他文件中引用函数时，您不能使用自动加载器，因为自动加载器在类上运行。自动加载类将是一个更好的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T17:07:31.933

如果您热衷于使用类和 OO vs Procedural，这将包含一个与被调用的类同名的文件，并且不会在目录中包含不需要的类文件。

*从站点/应用程序的根目录调用。*

```
define( "APP_PATH", dirname( __FILE__ ) ."/" );

function my_autoloader($class)
{
    include 'core/classes/' . $class . '.class.php';
}
spl_autoload_register('my_autoloader'); 
```

假设您将所有类保存在类似的目录结构中：

站点/核心/课程

你明白了。

# mysql - 如何在更新查询中从 mysql 数据库中的字段中删除所有空格？

> ID：12626523
> 
> 赞同：0
> 
> 时间：2012-09-27T17:02:05.263
> 
> 标签：mysql

用于在表上运行更新查询以从列中的值中删除所有空格的正确语法是什么？

我有一个用户表，其中包含导入了空格的用户名，我需要删除空格。即“约翰·史密斯先生”。必须是“johnsmithsr”。

大约有 500 多次出现。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T17:05:30.030

你可以尝试这样的事情：

```
UPDATE `table` SET `column` = REPLACE( `column` , ' ' , '' ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T17:05:35.743

```
UPDATE <table>
SET name = REPLACE(name, ' ', '') ; 
```

500 多次发生并没有那么多，所以这应该立即执行

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T17:06:56.063

试试这个

```
 update table_name set column_name = replace(column_name, ' ', ''); 
```

第二个参数将被第三个参数替换。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-07T09:27:37.887

我认为这就是我们正在寻找的

```
SELECT some_columns FROM table_name WHERE REPLACE(col_name, ' ', '') LIKE 'some string'; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-03-01T12:27:17.273

这可能是你的答案：

```
SELECT replace(col_name , ' ','') FROM table_name; 
```

# informatica-powercenter - 在 Informatica 中使用具有同步缓存的并行会话中的动态查找

> ID：12626525
> 
> 赞同：0
> 
> 时间：2012-09-27T17:02:09.050
> 
> 标签：informatica-powercenter, informatica

使用 Informatica 9.1.0

设想

从 Fact 加载中获取生成并插入到 Fact 表中的 Dimension 键。

我必须使用维度键以及其他列加载 Fact 表。此维度记录是从同一映射中创建的。有五个不同的会话使用相同的映射并同时执行以加载 Fact 表。在这种情况下，我使用启用了“同步动态缓存”的动态查找来获取使用某些条件从 5 个会话生成的唯一维度记录。维度 ID 是使用查找的关联表达式中的序列 ID 生成的。当单独运行一个会话时，它工作得非常好。但是当会话并行运行时，它开始显示唯一的密钥违规错误，因为随机会话试图插入已经存在的相同序列。

为了解决这个问题，我必须启用持久查找缓存和缓存文件名前缀。但是我在任何论坛或 INFA 社区中都没有找到此解决方案或此问题。所以不确定这是正确的做法，或者这是某种错误。

如果您有类似的问题或有不同的想法，请告诉我。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:05:21.943

我能想到的另一种可能的解决方案是让数据库生成一个序列，而不是使用 Informatica 的序列器。数据库应该能够避免任何唯一键违规。

# android - Android：如何以编程方式更改 PreferenceScreen 的摘要

> ID：12626526
> 
> 赞同：0
> 
> 时间：2012-09-27T17:02:10.377
> 
> 标签：android, android-layout, android-fragments, android-listfragment

我在以下 .xml 中有一个 PreferenceScreen 子元素（包含 ZonePicker 片段）：

```
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android"
    android:title="@string/DateTimePreferencesTitle">
   <CheckBoxPreference android:key="cb_pref"
       android:title="@string/cb_pref_title"
       android:summaryOn="@string/summaryOn"
       android:summaryOff="@string/summaryOff"
       />
       .
       .
       .
   <PreferenceScreen
       android:fragment="com.trimble.ag.amaethon.preferences.ZonePicker"
       android:key="timezone"
       android:title="@string/date_time_set_timezone"
       android:summary="GMT-8:00"
       />
</PreferenceScreen> 
```

ZonePicker 片段扩展了 ListFragment。我正在尝试找到一种方法来获取上述 PreferenceScreen 元素并从 ZonePicker 片段中更改 android:summary 值。

有任何想法吗？

# html - Gwt - 标签接收所有事件

> ID：12626527
> 
> 赞同：0
> 
> 时间：2012-09-27T17:02:18.270
> 
> 标签：html, gwt

我在光标附近有一个工具提示标签。我有 2 个问题，我不确定如何解决：

1.  当鼠标在标签上方时，光标变为文本光标。我希望光标不改变。

2.  Canvas 元素不接收任何鼠标事件。似乎标签接收事件。

如何修复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T17:45:01.277

光标不应改变标签。你的 CSS 有问题：在你的浏览器中检查哪个样式中有“光标”。

如果您不想弄清楚，只需在标签上设置样式“光标：默认”（您可能需要添加！重要；如果它不起作用。

# sql - oracle无结果，小查询

> ID：12626533
> 
> 赞同：1
> 
> 时间：2012-09-27T17:02:55.227
> 
> 标签：sql, oracle, isnull

我遇到了一些 sql 问题。当我运行以下查询时：

```
Select * from teleapp; 
```

我得到了很多结果。结果包括一列（称为 cashwithappyn），其中包含大量空或空数据单元格。（他们看起来很空，不说空）

栏目信息为：

```
ColumnName      ID          Null? Data Type             Histogram   Num Distinct  Num Nulls    Density
CASHWITHAPPYN   54          Y     VARCHAR2(1 Byte)      Frequency   2             56895         0 
```

当我尝试运行以下查询时：

```
Select * from teleapp where cashwithappyn = null; 
```

或者

```
Select * from teleapp where cashwithappyn = ''; 
```

或者

```
Select * from teleapp where cashwithappyn not like ''; 
```

或者

```
Select * from teleapp where cashwithappyn not in ('Y','N'); 
```

或任何类型的组合，我似乎无法在 cashwithappyn 中获得所有行。

有任何想法吗？请帮忙，这是我被分配做的项目的最后一部分，我只需要弄清楚这一点。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T18:41:39.220

也许该列包含空白。在这种情况下，你可以做

```
WHERE TRIM(CASHWITHAPYYN) IS NULL 
```

`TRIM`删除之前和之后的所有空白，如果没有任何内容，则值变为`NULL`

例如

```
TRIM(' ') IS NULL -- one blank removed = true
TRIM(NULL)  IS NULL -- true 
```

也`NULL`不能相提并论，`= NULL`但必须措辞`IS NULL`。`NULL`不是这样的值，这就是为什么比较永远不会起作用的原因。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-27T17:04:20.267

您需要使用 IS NULL

```
Select * from teleapp where cashwithappyn is null; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-27T17:08:28.193

带有 null 的逻辑测试表达式（=、Not In、Like 等）会导致错误，因此以下所有结果都会导致错误

```
1 = NULL
1 <> NULL
NULL = NULL
NULL <> NULL
NULL NOT IN ('a','b')
NULL Not Like NULL 
```

此外，在 oracle 中，零长度字符串为空，因此`NOT LIKE ''`永远不会返回任何行

您需要使用`is null`,`is not null`或`Coalesce`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T18:28:42.130

我和一个同事做了很多研究，这就是我们想出的可行的方法。任何想法为什么这有效但其他无效？

```
Select * from teleapp where nvl(cashwithappyn,'U') = 'U'; 
```

# ios - iOS6 模拟器 MKMapKit “在框架中找不到 default.styleproto”

> ID：12626536
> 
> 赞同：27
> 
> 时间：2012-09-27T17:03:05.213
> 
> 标签：ios, objective-c, ios6, ios-simulator, mapkit

使用 iOS6 模拟器运行我的应用程序在`viewDidLoad`被调用之前，我会在 XCode 控制台中打印以下内容：

> 在框架中找不到 default.styleproto

有没有其他人遇到过这种情况，如果有，你找到原因了吗？我的猜测是它与 iOS6 Apple 地图有关，但谁知道呢！

编辑

我应该补充一点，我在 iOS 5.1 模拟器中没有收到此警告。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-04T19:36:45.503

我找到了一种方法来始终如一地重现这一点。

首先，罪魁祸首是模拟器缓存文件夹中的一组文件。转到 iPhone 模拟器的应用程序支持文件夹：

`~/Library/Application Support/iPhone Simulator/[6.0 and above]/Library`

然后看看你的内部`Caches/GeoServices/Resources`

你会`.styleproto`在那里看到一些文件。这些文件仅在 MapKit**第一次**在模拟器中使用时创建。它也可能发生在设备上，但我尚未确认。

如果您想对此进行测试，请确保您拥有`.styleproto`文件，然后重新启动您的应用程序，访问地图时您将不会再次看到警告。

删除`GeoServices`缓存文件夹，退出并重新启动模拟器（和您的应用程序），出现警告！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T12:21:10.047

我通过将视图控制器中的 MKMapView 调整为 iPhone 5 的新尺寸来解决，现在我没有收到任何警告消息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T00:07:57.387

嗯...我有同样的问题...我认为问题可能是 6.0 模拟器；如果我将部署目标设置为 5.1 并使用 5.1 模拟器运行应用程序并取消选中自动布局复选框，我没有任何问题，但如果我在运行应用程序时使用 6.0 模拟器，地图没有出现，并在 Xcode 控制台中打印消息“在框架中找不到 default.styleproto”...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-04T10:50:53.440

请激活您的 GPS 设置，否则此错误可能会再次发生。此外，建议为 iPhone 5 设置框架。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-22T06:57:19.583

我刚刚在设备上打开了我的无线，这个警告消失了，我的地图就可以看到了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-19T09:58:04.043

![显示用户位置](../Images/b4e6b7a6705915e97d7c1bb1beb8744a.png) 这是旧的，但是对于像我一样遇到此线程的任何人，也可能是未选中地图视图对象上的“显示用户位置”选项。这是我的问题，而不是上面的缓存，尽管我在控制台中遇到了完全相同的错误。我什至没有尝试上面答案中的缓存修复，我所做的只是检查该选项，瞧。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-10-18T02:41:20.930

如果您的 iOS 模拟器的 GPS 设置为“无”，您将收到此警告。只需将 iOS 模拟器的 GPS 设置更改为“Apple Stores”或其他，它就会消失。

# php - 动态表设计

> ID：12626537
> 
> 赞同：-1
> 
> 时间：2012-09-27T17:03:07.987
> 
> 标签：php, html

我在数据库中有一个表，并在我的 php 文件中获取输出，例如

我的数据库中有一个表“课程”

```
id  semester   channel             course             coursecode       grade
1   Sem1      Channel1      Digital Networks             C70089          A
2   Sem1      Channel1      Network Theory               N00089          A+
3   Sem1      Channel2      Data & Structur              D70089          B
4   Sem1      Channel2      Object Oriented              C70089          A
5   Sem2      Channel1      Micro Processors             M70089          A
6   Sem2      Channel1      Electricals                  EE0089          B+
7   Sem2      Channel2      Elect & Communs              EC7080          C
8   Sem2      Channel2      Elect Labs                   LEO90           B+ 
```

如何通过表格或 div 或 ul 动态显示。谁能建议我做这个设计的简单方法

我认为这是一个愚蠢的问题，因为我尝试了各种方式，我来到了这里

```
 Sem1                                        Sem2
Channell                                       Channell
     Course       Course Code  Grade        Course            Course Code  Grade
Digital Networks    C70089     A           Micro Processors    -------      ---
Network Theory      N00089     A+          Electricals         -------      ---

Channel2                                       Channel2
Course            Course Code  Grade        Course            Course Code  Grade
Data & Structur     D70089     B           Elect & Communs       -----     -----
Object Oriented     C70089     A           Elect Labs            -----     ----- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T17:50:52.883

假设您正在使用`mysqli_*`函数，您的解决方案可能如下所示：

**[CODEPAD](http://codepad.org/ryWHoHMh)** - 为您提供 HTML。
**[JSFIDDLE](http://jsfiddle.net/Eha4j/)** - 为您生成的 HTML 设置样式，显示最终结果。

```
$query = mysql_query('SELECT * FROM course ORDER BY semester, channel');
$semester = $channel = "";
while($row = mysql_fetch_assoc($query))
{
    if ($row["semester"] !== $semester)
    {
        if ($semester !== "")
        {
            echo "    </table>\n";
            echo "</div>\n";
        }

        $semester = $row["semester"];
        $channel = $row["channel"];

        echo "<div class=\"semester\">\n";
        echo "    <h3>{$semester}</h3>\n";
        echo "    <h3>{$channel}</h3>\n";
        echo "    <table>\n";
        echo "        <tr>\n";
        echo "            <th>Course</th>\n";
        echo "            <th>Course Code</th>\n";
        echo "            <th>Grade</th>\n";
        echo "        </tr>\n";
    }

    if ($row["channel"] !== $channel)
    {
        $channel = $row["channel"];

        echo "    </table>\n";
        echo "    <br />\n";
        echo "    <h3>{$channel}</h3>\n";
        echo "    <table>\n";
        echo "        <tr>\n";
        echo "            <th>Course</th>\n";
        echo "            <th>Course Code</th>\n";
        echo "            <th>Grade</th>\n";
        echo "        </tr>\n";
    }

    echo "        <tr>\n";
    echo "            <td>{$row["course"]}</td>\n";
    echo "            <td>{$row["coursecode"]}</td>\n";
    echo "            <td>{$row["grade"]}</td>\n";
    echo "        </tr>\n";
}

if ($semester !== "")
{
    echo "    </table>\n";
    echo "</div>\n";
} 
```

# javascript - 更改 iframe src 重定向到主页

> ID：12626541
> 
> 赞同：0
> 
> 时间：2012-09-27T17:03:32.387
> 
> 标签：javascript, html, css, web-applications

首先这是代码

```
<div id="channelmiddle" class="middle-content alignleft">
    <script type="text/javascript">
    function changechannel(ch)
    {
        var url = "ch"+ch+".html";
        document.getElementById("channelchange").src = "ch"+ch+".html";
    }
    </script>
    <center>
    <button class="button_static" onclick="changechannel(1)">Channel 1</button>
    <button class="button_static" onclick="changechannel(2)">Channel 2</button>
    <button class="button_static" onclick="changechannel(3)">Channel 3</button>
    <button class="button_static" onclick="changechannel(4)">Channel 4</button>
    <button class="button_static" onclick="changechannel(5)">Channel 5</button>
    </center>
    <iframe id="channelchange" src="ch1.html" onLoad="alert('123')" width="500" height="400" scrolling="no"></iframe>

</div> 
```

在此页面上，每当我单击按钮时，它都会重定向到主页。我不知道为什么。有人能帮我吗？您需要有关代码的更多信息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T17:44:08.767

现代浏览器内置了安全检查，以防止 iframe 在您更改 src 属性时显示 Web 内容。Chrome 有一个使用 &output=embed 绕过该功能的功能。[见这篇文章](http://www.rivercitystudio.com/blog/2011/09/google-maps-embedding-x-frame-options-change/)。从我的测试中，您可以更改 src 属性，但内容不会改变。您可以做的最好的事情是在初始页面加载时加载 iframe，而不是更改 src 属性。有几个解决方案。

1.  进行重新设计。在不使用按钮单击的情况下加载需要显示的内容的 iframe。

2.  将用户发送到另一个页面。使用与初始页面加载上的按钮对应的 url 设置 iframe 的 src。

3.  如果您必须这样做，请尝试为每个 url 制作 iframe，根据按钮点击隐藏 iframe。这不是一个理想的解决方案，但它可以实现您的目标。

# sql - 连接查询中的方法之间的区别

> ID：12626542
> 
> 赞同：0
> 
> 时间：2012-09-27T17:03:32.763
> 
> 标签：sql, sql-server

> **可能重复：**
> [显式与隐式 SQL 连接](https://stackoverflow.com/questions/44917/explicit-vs-implicit-sql-joins)

第一的：

```
SELECT a.field, b.field
FROM a, b
WHERE a.id = b.id 
```

第二：

```
SELECT a.field, b.field
FROM a INNER JOIN b
ON a.id = b.id 
```

这两种方法之间是否有任何区别，或者它们的工作方式相同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T17:19:26.083

它们产生相同的结果并执行相同的操作，但我发现第二种方法在大型查询中更加清晰，因此应该始终使用它（尽管我的格式不同）

我的格式是这样的：

```
SELECT
    a.field
   ,b.field
FROM a
INNER JOIN b ON a.id = b.id 
```

# c# - WebBrowser 控件 - 提交表单后等待页面加载

> ID：12626544
> 
> 赞同：3
> 
> 时间：2012-09-27T17:03:41.890
> 
> 标签：c#, winforms, browser, synchronous

我是 c# 及其概念的新手，所以如果这个问题有点愚蠢，我很抱歉。我尝试使用 winforms webbrowser 控件进行一些自动化

```
elements = webBrowser1.Document.GetElementsByTagName("input");
foreach (HtmlElement element in elements)
{
    if (element.GetAttribute("value") == "Anzeigen")
    element.InvokeMember("click");
}

while (webBrowser1.ReadyState != WebBrowserReadyState.Complete) Application.DoEvents();

// do some math on recived html
// ......

// show results
MessageBox.Show(numPlanets.ToString() ); 
```

所以，解释一下：我正在寻找一个值为“Anzeigen”的按钮，模拟点击它，然后等到新页面加载并然后进行我的计算。不幸的是，我的计算是在旧 HTML 内容上完成的，因为它没有等待页面加载。奇怪的是，如果我输入 Thread.Sleep(5000); 在 foreach 循环之后，在模拟点击之前执行此睡眠，并且计算也失败。

我只需要该点击的一些同步行为，而不使用事件。

希望你能帮助我，对不起我的英语不好

编辑：像这样解决它：变量 bool webbbrowserfinished = false 在类内，如果我想要同步行为，我这样做：

```
 webbrowserfinished = false;
   // do navigation here

   while (!webbrowserfinished)
   {
      Application.DoEvents();
      Thread.Sleep(100);
   }
   webbrowserfinished = false; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T18:04:28.893

您可以尝试[WebBrowser.DocumentCompleted 事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.documentcompleted.aspx) 在 WebBrowser 控件完成加载文档时发生。

```
private void Form1_Load(object sender, EventArgs e)
{
   webBrowser1.Navigate("google.com");
   webBrowser1.DocumentCompleted += new WebBrowserDocumentCompletedEventHandler(webBrowser1_DocumentCompleted);
}

void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
{
   MessageBox.Show("Completed Now!");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T17:19:25.160

好吧，这不是最好的解决方案，但是您始终可以在 Web 浏览器导航时启动一个计时器，并将其设置`timer1.Tick`为 3000 之类的值，然后在该`timer1_Tick`方法中您可以在新页面上进行计算，然后`timer1.Stop();`.

使用事件可能有更好的解决方案，但我自己对网络浏览器不太擅长。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-19T09:06:37.940

您可以使用`Thread.sleep(5000)`等待页面加载，因为如果您不这样做，则导航方法会将新文档加载到 Web 浏览器控件中，但不会调用`document_complete_event_handler`

# c - 计算最接近的浮点值

> ID：12626550
> 
> 赞同：0
> 
> 时间：2012-09-27T17:04:01.950
> 
> 标签：c, floating-point

> **可能重复：**
> [如何将浮点数转换为人类可读的分数？](https://stackoverflow.com/questions/95727/how-to-convert-floats-to-human-readable-fractions)

我有一个浮点值`0.595781`，我想使用一个商尽可能接近它，该商只使用整数分子和分母值，这些值都限制在`0 to 1023 (10-bits)`.

执行此操作（至少开始时）的直观方法是使用`595/1000`提供`0.555`相当接近的匹配（错误为`0.040781`）。

但是有一个更好的匹配`597/1002`是`0.595808`（的错误`0.0000273`）。也可能有更好的匹配。我通过以一种不相关的方式使分子和分母值接近其原始值来得到第二商。

然后我想知道是否有一种方法可以给定所有标准来直接获取分子和分母整数值。

如果您想知道设置波特率发生器所需的两个整数值`Infineon XE167G device`。

任何想法，将不胜感激。问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T17:13:41.297

如果你使用`16-bit`整数，你可以只让`numerator = 59578`分母保持一个功率因数`10`，例如`5`。所以答案是`59578/(10^5)`。

使用这种方法，您至少可以保持`4`精确的位置。只是一个想法...

# c# - 将自定义实体映射到存储过程

> ID：12626554
> 
> 赞同：1
> 
> 时间：2012-09-27T17:04:12.497
> 
> 标签：c#, asp.net, .net, database, entity-framework

我正在尝试将自定义实体映射到一组存储过程。实体上的属性对应于插入和更新过程以及函数导入中使用的选择过程的参数。当我在 XML 视图中打开 EDMX 文件时，我的实体对象上的所有属性都出现以下错误：

> *错误 11009：未映射属性“xxx”。*

我在谷歌上搜索了这个错误，一些论坛建议实体只能映射到表；不允许将自定义实体映射到存储过程。

可以将自定义实体映射到存储过程而不映射到数据库中的表吗？如果不是，那么使用实体框架解决这个问题的最佳方法是什么？我最初的想法是创建一个复杂类型，然后对所有 CRUD 方法使用函数导入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T18:04:02.233

您可以在实体框架中有一个返回复杂类型的存储过程，但我认为复杂类型不能具有存储过程映射。如果你想对存储过程做一些事情，你可以创建函数导入并调用你的存储过程。

该工具将创建一个包含调用存储过程所需的所有参数的方法，如果该过程返回一个选择，您可以映射到现有实体或创建一个新的复杂类型。

# xml - xsd 验证，提供有关枚举下包含的 id 的信息

> ID：12626559
> 
> 赞同：1
> 
> 时间：2012-09-27T17:04:34.260
> 
> 标签：xml, xsd, enumeration

我正在使用 xsd 来验证我的 xml。元素 AddressType 之一应仅包含值之一 (1,2,3)。

```
 <AddressType>1</AddressType> 
```

我想提供有关此 ID 的信息。例如，1 对应于 Home，2 对应于 Work，等等。

我想过像这样使用枚举-

```
 <xs:enumeration value="1" id="Home"/> 
```

但如果任何其他枚举具有相同的 id，这将失败。有没有一种方法可以提供价值以及有关 id 的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T17:47:00.717

这取决于您对验证 XML 的应用程序有什么期望，以及`provide information about these ids`. 增强错误消息？在从 XSD 构建数据输入表单时使用它？

一种方法是利用 XML Schema 注释机制。

*   验证器通常允许您访问与 XML 节点关联的特定模式对象，在这种情况下，您可以从注释中提取附加信息。

*   从 XSD 构建数据输入表单的其他工具可能能够显示一个下拉列表，其中文本来自注释，值来自枚举值。这些通常已经带有推荐的标记以及如何将其插入 XSD。

    ```
     <xs:enumeration value="1">
            <xs:annotation>
                <xs:documentation>Home</xs:documentation>
                <xs:appinfo>
                    <something:proprietary>Home</something:proprietary>
                </xs:appinfo>
            </xs:annotation>
        </xs:enumeration> 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T17:47:37.223

我的第一个建议是不要在 XML 中使用 id（XML 是人类可读的；-)）。如果必须，您可以使用 xsd:annotation/xsd:documentation 来提供每个 id 的含义。

# javascript - Javascript 如何评估数字或特定字符串

> ID：12626565
> 
> 赞同：1
> 
> 时间：2012-09-27T17:05:11.530
> 
> 标签：javascript, forms, validation

我需要将表单提交评估为 "TBD" 或数字 > 0 。有没有办法做到这一点，我没有看到..这是我到目前为止所拥有的：

```
<script language="Javascript">
function validateForm(){
//Declare Variables
var aa=document.forms["form"]["irnumber"].value;
if (aa =='TBD'){
return true;
}else if (parseInt(aa) < 1 || aa==null || aa=="") {
    alert("IR Must Be A Number Or \"TBD\" ");
    return false;
}
</script> 
```

很感谢任何形式的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T17:09:35.633

```
if (parseInt(aa) > 0 || aa === "TBD") {
    return true;
} else {
    alert("IR Must Be A Number Or \"TBD\" ");
    return false;
} 
```

或者

```
if (/^((TBD)|(0*[1-9]+[0-9]*))$/i.test(aa)) {
    return true;
} else {
    alert("IR Must Be A Number Or \"TBD\" ");
    return false;
} 
```

# mysql - 在没有架构的情况下导出表数据？

> ID：12626567
> 
> 赞同：3
> 
> 时间：2012-09-27T17:05:25.943
> 
> 标签：mysql, sql

我试过搜索这个，但到目前为止，我只找到“导出没有数据的表模式”的结果，这与我想要做的完全相反。有没有办法从 SQL 表中导出数据而无需脚本重新创建表？

如果有人有更好的解决方案，这就是我要解决的问题：我有两个数据库，每个数据库都在不同的服务器上；我将它们称为原始数据库和分析数据库。原始数据库是“真正的”数据库，它收集发送到其服务器的记录，并使用事务 InnoDB 引擎将它们存储在一个表中。分析数据库位于内部 LAN 上，旨在镜像原始数据库，并将定期更新以匹配原始数据库。之所以这样分开，是因为我们有一个程序会对数据进行一些分析和处理，而我们不想在实时服务器上进行。

因为分析数据库只是一个副本，它不需要是事务性的，我希望它对其表使用 MyISAM 引擎，因为我发现将数据导入和查询要快得多。问题是，当我从实时原始数据库导出表时，表模式也被导出，表引擎设置为 InnoDB，所以当我运行脚本将数据导入分析数据库时，它会删除 MyISAM 表并将其重新创建为 InnoDB 表。我想自动化这个导出/导入数据的过程，但是生成的 sql 脚本文件将表引擎从 MyISAM 更改为 InnoDB 的问题阻止了我，我不知道如何解决它。我知道的唯一方法是编写一个可以直接访问实时原始数据库的程序，进行查询，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T17:08:44.453

像这样？

```
mysqldump --no-create-info ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T17:09:49.077

使用`no-create-info`选项

```
mysqldump --no-create-info db [table] 
```

# ios - 以编程方式创建的 UIViewController 加载界面构建器 view.xib 文件

> ID：12626570
> 
> 赞同：0
> 
> 时间：2012-09-27T17:05:32.200
> 
> 标签：ios, uiviewcontroller, xib

如何从以编程方式创建的 UIViewController 加载界面构建器创建的视图？我正在使用Objective-C。

我能够从一个不使用界面生成器的参考项目开始，所以我没有故事板。我已经成功地以编程方式加载了视图，但希望能够加载一些界面构建器创建的视图。

更多细节：我有 2 个视图控制器 A 和 B。我目前在 A。我单击一个按钮，然后在该按钮处理程序中加载 Viewcontroller B，如下所示：

```
self.viewControllerB = [[ViewControllerB alloc] init];
[self.navigationController pushViewController:viewControllerB animated:YES] 
```

我手动创建了一个带有 .m 和 .h 的 ViewB。如果我使用 initWithFrame 在其中定义了一堆控件并以编程方式对其进行布局，则可以如上所述成功调用它。

我向项目中添加了一个新文件，它是一个 UIView，它在构建器中显示它。将 TableView 拖放到视图上，现在我只想看看这个负载。我将 xib 命名为 ViewB.xib，我将 Class 设置为 ViewB，如下图所示（在答案 1 中）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T17:53:22.993

每当您需要从 .xib 加载视图时，请使用以下命令：

首先在界面生成器中为视图制作一个笔尖，并确保将其自定义类设置为您的视图类，见图：

![在此处输入图像描述](../Images/046b0beb1064585dced7ec646d51ba9f.png)

然后将其加载到您的代码中，如下所示：

```
MyCustomNibView *myView;
NSArray *topLevelItems = [[NSBundle mainBundle] loadNibNamed:@"MyCustomNibView" owner:nil options:nil];

for (id view in topLevelItems) {
    if ([view isKindOfClass:[MyCustomNibView class]]) {
       myView = (MyCustomNibView *)view;
       break;
    }
} 
```

# c# - 十进制输出的格式字符串

> ID：12626572
> 
> 赞同：1
> 
> 时间：2012-09-27T17:05:35.247
> 
> 标签：c#, string, formatting

我今天才开始编写 C#，我正在尝试处理格式字符串。

我想输出这种格式的字符串：

```
{decimal number using a maximum of 10 columns} + 
" " + 
{decimal number taking a maximum of 10 columns} 
```

我试过了

```
String outputFormat = "{0,-10:0.#####} {1,-10:0.#####}";
String output = String.Format(outputFormat, x, y); 
```

但如果`x`是`34059834.340598`，我没有得到我想要的输出。

第一个数字占用 10 多列。

是否有格式字符串将数字强制为 10 列？（如果 nm 大于 10 列，可能显示 E 表示法）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T17:17:33.850

I think you are looking for the [G specifier](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx#GFormatString) for you number formating.

Something like this (untested) *should* work:

```
string tenCols = myDecimal.ToString("G10"); 
```

Or to be more inline with what you had before, I think this should do it:

```
String outputFormat = "{0,-10:G10} {1,-10:G10}";
String output = String.Format(outputFormat, x, y); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T17:07:49.093

```
double x = 34059834.340598
string displayX = x.ToString().Substring(0,10); 
```

我很确定你不能直接使用格式字符串做你想做的事，但是在代码中进行字符串操作就很容易了。

# linq - 为什么我的 LINQ 存储过程每次都返回 -1 而不是正确的数字？

> ID：12626575
> 
> 赞同：1
> 
> 时间：2012-09-27T17:05:46.773
> 
> 标签：linq, stored-procedures, return-value

在数据库中，我有一个程序，它用 RETURN 这个词返回不同的数值。

这个过程我在我的应用程序中与 LINQ 一起使用，但它总是返回 -1 而不是正确的数字。

示例 T-SQL：

```
Create PROCEDURE EmailStatus 
AS
BEGIN
   IF NOT EXISTS (SELECT * FROM msdb.sys.service_queues WHERE name = N'ExternalMailQueue' 
                  AND is_receive_enabled = 1)
      return (100)
   ELSE
      RETURN 101
END 
```

示例 LINQ：

```
TestXMLEntities nw = new TestXMLEntities();
var r = nw.EmailStatus(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-13T16:42:37.633

Use SELECT 101 instead of RETURN 101\. [Description](http://www.devtoolshed.com/using-stored-procedures-entity-framework-scalar-return-values)

# javascript - Javascript转换字符串变量

> ID：12626576
> 
> 赞同：3
> 
> 时间：2012-09-27T17:05:47.397
> 
> 标签：javascript

我懂了：

```
var a = "slices: {0: {color: '#ffffff'}, 1: {color: '#fffff0'}, 2: {color: '#fff000'},3: {color: '#ff0000'}, 4: {color: '#f00000'}}"; 
```

你可以看到它是一个字符串变量

我需要这个

```
draw(data, {slices: {0: {color: '#ffffff'}, 1: {color: '#fffff0'}, 2: {color: '#fff000'},3: {color: '#ff0000'}, 4: {color: '#f00000'}}, is3D: true}); 
```

如您所见，我需要提供变量而不是字符串，我尝试这样做

```
eval( "slices: {0: {color: '#ffffff'}, 1: {color: '#fffff0'}, 2: {color: '#fff000'},3: {color: '#ff0000'}, 4: {color: '#f00000'}}"); 
```

但没有用，我不能这样做

```
draw(data, {a, is3D: true}); 
```

谢谢你的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T17:07:45.380

*首先将您的字符串修复为有效的 JSON*，然后：

~~`JSON.parse('{' + a + '}');`~~

**编辑**：Antti Haapala 提出了一个很好的观点

`JSON.parse(a);`

由*crisamares*提供：

一个有效的 JSON 是这样的：`"{"slices": {"0": {"color": "a"}, "1": {"color": "#fffff0"}, "2": {"color": "#fff000"},"3": {"color": "#ff0000"}, "4": {"color": "#f00000"}}}"`

====

如果您需要支持 <IE8，请使用 Crockford 的 JSON2 (http://www.json.org/js.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T17:08:14.120

因此这样做：

```
var values = eval('({' + a + '})');
draw(data, values); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T17:22:49.883

一个有效的 JSON 如下所示：

```
'{"slices": {"0": {"color": "a"}, "1": {"color": "#fffff0"}, "2": {"color": "#fff000"},"3": {"color": "#ff0000"}, "4": {"color": "#f00000"}}}' 
```

您可以使用[http://jsonformatter.curiousconcept.com/](http://jsonformatter.curiousconcept.com/)来验证您的 JSON，然后使用 JSON.parser 作为 BLSully sugested

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T17:16:45.080

您可以使用`eval`许多答案中所示的方法。您还可以尝试像[https://raw.github.com/douglascrockford/JSON-js/master/json2.js这样的 JSON 解析器](https://raw.github.com/douglascrockford/JSON-js/master/json2.js)

或者你可以使用`setTimeout`

```
function draw(a, b){
    console.log(a, b);
}

var data = "sample data";

var a = "slices: {0: {color: a}, 1: {color: '#fffff0'}, 2: {color: '#fff000'},3: {color: '#ff0000'}, 4: {color: '#f00000'}}";

setTimeout("draw(data, {" + a + "});", 100); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T17:09:31.450

你能不能...

`var a = 'draw(data, {slices: {0: {color: a}, 1: {color: '#fffff0'}, 2: {color: '#fff000'},3: {color: '#ff0000'}, 4: {color: '#f00000'}}, is3D: true})';`

然后 `eval(a);`

为什么那行不通？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-27T17:10:06.300

为什么不创建`a`一个 json 对象，然后将`is3D`属性添加到它？

```
var a = {slices: {0: {color: a}, 1: {color: '#fffff0'}, 2: {color: '#fff000'},3: {color: '#ff0000'}, 4: {color: '#f00000'}}};
if(itNeedsToBe3D) a.is3D = true;     
else a.is3D = false;
draw(data, a); 
```

# actionscript-3 - 在另一个精灵上添加透明精灵

> ID：12626579
> 
> 赞同：1
> 
> 时间：2012-09-27T17:06:02.967
> 
> 标签：actionscript-3, flash

我需要在另一个精灵上放置一个透明精灵。覆盖的精灵将接受一些鼠标事件。当用户将鼠标移到上部精灵上时，将绘制一条曲线。处理完成后，它将在基础精灵上绘制（并在上部擦除）。

我现在的想法是放置精灵，绘制一个大小等于精灵大小的矩形并将 alpha 设置为 0。

问题有点转储：也许建议的解决方案不是最好的。有没有更好的方法来设置宽度和高度（据我所知`Sprite.width = w;`无济于事）？

先感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T17:57:12.973

您不能直接设置尺寸，但可以在该 Sprite 上绘制。所以你可以这样做：

```
graphics.beginFill(0,0); // zero alpha fill
graphics.lineStyle(0,0,0); // invisible lines
graphics.drawRect(0,0,width,height);
graphics.endFill(); 
```

这样，您的 Sprite 可以将其 alpha 保持在 1，以不隐藏任何其子项。然后，无论您决定在该 Sprite 中绘制什么曲线，您都可以通过 graphics.moveTo 和 graphics.lineTo 在子 Shape 对象中绘制。

更新：根据下面的评论，将 alpha 设置为 0 不适用于较新的 Flash 播放器版本，因此 alpha 应设置为非零值，以便事件在重叠精灵上注册。

```
graphics.beginFill(0x808080,0.01); // almost zero alpha fill 
```

# python - Django/db-api 因创建数据库而损坏？

> ID：12626584
> 
> 赞同：1
> 
> 时间：2012-09-27T17:06:18.610
> 
> 标签：python, sql, django, sql-injection, python-db-api

希望使用 Django / db-api 的内置字符串扩展，但它看起来不适用于`create database`命令？

```
from django.db import connections
cursor = connections['dbadmin'].cursor()
cursor.execute('create database %s', ['foo']) 
```

哪个失败了

```
DatabaseError: (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''foo'' at line 1") 
```

虽然直接的，未参数化的`create database foo`工作正常。

对我来说，这看起来像一个错误，对吧？ `drop database`有类似的问题...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T17:22:32.707

您不能将参数用于表或数据库名称等元数据。这是底层 C 库的限制，而不是 DB-API。

# objective-c - MKAnnotation 获取地址

> ID：12626585
> 
> 赞同：0
> 
> 时间：2012-09-27T17:06:27.657
> 
> 标签：objective-c, ios, mapkit, mkannotationview

我注意到新的地图应用程序有一个我需要在我正在制作的应用程序中实现的功能。该功能是当用户将图钉放在某个位置时，地址会显示为注释视图的副标题。有谁知道这是怎么做到的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T05:33:51.073

您应该在自定义注释中实现 subtitle 属性，例如：

```
// Geo.h
#import <Foundation/Foundation.h>

#import <CoreLocation/CoreLocation.h>
#import <MapKit/MapKit.h>

@interface Geo : NSObject <MKAnnotation>

@property (nonatomic, strong) NSString* subtitle;

// Geo.m
#include "Geo.h"

@implementation Geo

- (NSString *)subtitle
{
    return _subtitle; // Here you can reverse geocoding to get address from a CLLocationCoordinate2D object
}; 
```

# jquery - Chrome 中的 Resizable Div 在缩放时会导致内容偏移

> ID：12626588
> 
> 赞同：0
> 
> 时间：2012-09-27T17:06:38.893
> 
> 标签：jquery, html, css, jquery-ui

我正在使用 Jquery UI 可调整大小的插件。当发生调整大小时，我用适当的偏移量更新另一个 div 以保持其位置。当缩放为 100% 时，这一切在 Chrome 中都可以正常工作。如果我放大到 90%，有时第二个 div 中的表格会向下移动到第一个 div 下方。

HTML：

```
<div>
    <div class="left"></div>
    <div class="right">
        <table><tr><td>Blah</td></tr>
            <tr><td>Blah</td></tr>
            <tr><td>Blah</td></tr>
            <tr><td>Blah</td></tr>
        </table>
    </div>
</div> 
```

Javascript：

```
$(".left").resizable({
    resize: function ()
    {
        $(".right").css({marginLeft:$(this).width() + "px"});
    }
});​ 
```

​ CSS：

```
div
{
  display:block
  position:absolute;
}
.left
{
  width:99px; 
  height:500px;
  background-color:gray;   
  display:block;
  float:left;
  position:relative;
}
.right
{
    margin-left:99px;
    background-color: blue;
    display:block;
    position:relative;
}

table
{
    width:100%;
} 
```

我的问题是，如何正确计算 .right div 的左边距？

要重现该问题，请将 chrome 缩放到 90% 并在此小提琴中调整左侧元素的大小：http: [//jsfiddle.net/johnkoer/FyE6f/45/](http://jsfiddle.net/johnkoer/FyE6f/45/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T17:58:53.127

**-------------编辑---------------** 新答案[http://jsfiddle.net/FyE6f/55/](http://jsfiddle.net/FyE6f/55/)

（看起来只是将溢出设置为自动可能与下面的代码一样有效）

```
$(".left").resizable({
    resize: function ()
    {
        $(".right").css({overflow:"hidden"});
        $(".right").css({marginLeft:$(this).width() + "px"});
    },
    stop: function ()
    {
        $(".right").css({overflow:"auto"});
    }
});​ 
```

- - - - 老的 - - - - -

我能够修复它的唯一方法是在边距上添加 1，不幸的是它在 div 之间添加了一个丑陋的白色 1px 空间。 [http://jsfiddle.net/FyE6f/53/](http://jsfiddle.net/FyE6f/53/)

```
$(".right").css({marginLeft:($(this).width() + 1) + "px"}); 
```

# javascript - jQuery .css 显示：无

> ID：12626590
> 
> 赞同：1
> 
> 时间：2012-09-27T17:06:45.460
> 
> 标签：javascript, jquery

我正在尝试执行以下操作：

*   我有 6 个 div。在每个 div 中都有另一个带有 display:none 的 div。

当我单击每个 div 时，我想在 jQuery 中执行所有 6 个 div 更改为 display:none 并且 div 内的 div 单击以显示在屏幕上。

检查这个小提琴[http://jsfiddle.net/Weinz/xaMfk/2/](http://jsfiddle.net/Weinz/xaMfk/2/)

唯一发生的事情就是显示：无

我能做些什么？我也尝试使用显示和隐藏但不起作用

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T17:19:48.613

很高兴你在上面得到了答案。@Zoltan 的方法看起来对你有用。我还会考虑向 div 添加类，因为它会减少 jquery 和 css。

```
<div class="outerDiv" id="box1">Box1</div>
<div id="cont1" class="innerDiv" style="display:none"><p>Some text and img</p></div>
<div class="outerDiv" id="box2">Box2</div>
<div id="cont2" class="innerDiv" style="display:none"><p>Some text and img</p></div>
<div class="outerDiv" id="box3">Box3</div>
<div id="cont3" class="innerDiv" style="display:none"><p>Some text and img</p></div>    
<div class="outerDiv" id="box4">Box4</div>
<div id="cont4" class="innerDiv" style="display:none"><p>Some text and img</p></div>
<div class="outerDiv" id="box5">Box5</div>
<div id="cont5" class="innerDiv" style="display:none"><p>Some text and img</p></div>

$(function() {
    $(".outerDiv").click(function() {
        $(".outerDiv").hide();
        $(".innerDiv").hide();
        $(this).next("div").show();
    });
});​
.outerDiv{border: 1px solid;}​ 
div,div p {display:inline;} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T17:38:19.763

[试试这个演示](http://jsfiddle.net/8g3cf/)

据我了解您的问题，这就是您所需要的。

JS

```
$(function(){
   $("#wrapper").on('click', 'div.maindiv',function(){
       $(this).find('div.innerdiv').show();
       $(this).siblings('div.maindiv').hide();

   });
}); 
```

这将显示您单击的 div 的任何内部 div 内容，并将隐藏同一元素级别的其他 div。**不要忘记尝试演示**并提供反馈。（***链接在答案的开头给出***）

希望这能解决您的问题。如果您有任何问题，请随时提问。谢谢。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T17:33:21.250

```
<div id="box1" class="outer">Box1<div id="cont1" class="inner" style="display:none"><p>Some text and img</p></div></div>
<div id="box2" class="outer">Box2<div id="cont2" class="inner" style="display:none"><p>Some text and img</p></div></div>
<div id="box3" class="outer">Box3<div id="cont3" class="inner" style="display:none"><p>Some text and img</p></div></div> 
```

* * *

```
$(function(){
    $(".outer").click(function(){  
        var id= this.id;
        $("#"+id+" .inner").show(); 
//user toggle instead of show if you need toggle

   });

}); 
```

如果您打算在用户单击父 div 时显示每个隐藏的 div，则此代码将为您提供帮助。**如果隐藏父 div，那么内部内容也将被隐藏。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T17:10:03.650

尝试这样的事情，[jsfiddle](http://jsfiddle.net/xaMfk/3/)：

```
// HTML:
<div id="box1">Box1<div id="cont1" style="display:none"><p>Some text and img</p></div></div>
<div id="box2">Box2<div id="cont2" style="display:none"><p>Some text and img</p></div></div>
<div id="box3">Box3<div id="cont3" style="display:none"><p>Some text and img</p></div></div>
<div id="box4">Box4<div id="cont4" style="display:none"><p>Some text and img</p></div></div>
<div id="box5">Box5<div id="cont5" style="display:none"><p>Some text and img</p></div></div>

// CSS:
div {
    display:inline;
}
#box1 {border: 1px solid;}
#box2 {border: 1px solid;}
#box3 {border: 1px solid;}
#box4 {border: 1px solid;}
#box5 {border: 1px solid;}

// JS:
$(function(){
   $("#box1").click(function(){
       $(this).css("display","");
       //$("#box1").css("display","none");
       $("#box2").css("display","none");
       $("#box3").css("display","none");
       $("#box4").css("display","none");
       $("#box5").css("display","none");
   });
}); 
```

# mobile - 是否可以从 ashx 文件创建移动应用程序

> ID：12626593
> 
> 赞同：0
> 
> 时间：2012-09-27T17:07:02.990
> 
> 标签：mobile, cordova, jquery-mobile, extjs, coronasdk

我们有一个使用 Jquery 用 ASP.NET（.ashx 文件）编写的 mobileweb 应用程序。是否可以使用 Phonegap、Corona 或类似平台将其转换为原生应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T17:25:54.230

你可以，但你可能需要重组你的应用程序。

*   PhoneGap（或其他之一）可以加载作为原生应用程序包装的框架起始页面。
*   在您的框架起始页中，您可以链接到您的`.ashx`文件以下载更多 jQuery-Mobile 页面和数据。

# jquery - Jquery On 和 Live Confusion

> ID：12626594
> 
> 赞同：0
> 
> 时间：2012-09-27T17:07:04.743
> 
> 标签：jquery, jquery-on

看看这些示例代码：

我们有

```
​    <div class="ex"></div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

我们有 jquery 代码；

1-开

```
$('.ex').append("<div class='text'>object-1</div>");

$('.text').on({

    hover: function(e) {
        if (e.type === "mouseenter")
        {      
            $(this).css('color','green');
        }
        else if (e.type === "mouseleave")
        {
            $(this).css('color','black'); 
        }
    },
    click: function()
    {
        $(this).css('color','red');
    }

});

$('.ex').append("<div class='text'>object-2</div>"); 
```

2-带直播

```
$('.ex').append("<div class='text'>object-1</div>");

$('.text').live({

    hover: function(e) {
        if (e.type === "mouseenter")
        {      
            $(this).css('color','green');
        }
        else if (e.type === "mouseleave")
        {
            $(this).css('color','black'); 
        }
    },
    click: function()
    {
        $(this).css('color','red');
    }

});

$('.ex').append("<div class='text'>object-2</div>"); 
```

问题是 jquery 不能使用 .on 处理 object-2。.live 已弃用，应避免使用。但是 .on 不适用于动态内容。如何使用 .on 在动态内容上运行 jquery 代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T17:11:06.223

.on*确实*适用于动态内容，但你必须使用它的不同版本，就像这样......

```
$("static-scope-selector").on("event", "dynamic-content-selector", function{...}); 
```

因此，使用您的标记，您将使用如下内容：

```
$("div.ex").on("hover", ".text", function(e) {...})
        .on("click", ".text", function(e) {...}); 
```

# ruby-on-rails - 测试什么以及如何测试它？

> ID：12626600
> 
> 赞同：0
> 
> 时间：2012-09-27T17:07:23.620
> 
> 标签：ruby-on-rails, cucumber, capybara, rack-test

我想用黄瓜、水豚和 rack_test 编写测试来破坏轨道上的红宝石上的物体。

我认为我应该写一个像这样的场景：

```
When I try to delete X object
Then I should be on the index page for ...
And I should see "Object deleted successfully" 
```

我不想通过单击索引页面或显示/编辑页面上的链接来测试它，因为我认为我应该测试与纯粹删除操作不同的东西。

另外，点击链接表示界面没问题，但是如果有人发送请求删除他不能删除的对象并且界面没有显示链接，会发生什么？

鉴于此，我需要在第一步中发送删除请求，然后检查对该请求的响应。

我在尝试这样做时遇到了麻烦，因为当我实施第一步时，`delete url`当我尝试时，`page.should have_contain(text)`我得到了错误`No response yet. Request a page first. (Rack::Test::Error)`

你怎么看待这件事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T22:23:27.707

查看[how-do-you-post-to-a-url-in-capybara](https://stackoverflow.com/questions/4084212/how-do-you-post-to-a-url-in-capybara)（回答另一个问题），但有几个示例说明如何在水豚测试中使用访问，例如

```
visit "item/:id/delete" 
```

# javascript - 在通用树中查找元素

> ID：12626601
> 
> 赞同：1
> 
> 时间：2012-09-27T17:07:27.333
> 
> 标签：javascript, algorithm, tree, binary-tree

我有一个 json 嵌套对象，类似于[this](https://raw.github.com/mbostock/d3/master/examples/data/flare.json)。

在我的例子中，我有一个`id`int 类型的唯一字段（比如`name`上面说的）。这不是二叉树，而是更刻画父子关系。我想要一种方法来轻松查找植根于 say 的子树（孩子）`id = 121`。以蛮力的方式，我可以比较所有节点，直到找到一个，然后返回子节点。但我想保留一张 {id, node} 的地图。例如`{"121" : root[1][10]..[1]}`. 这可能是对内存的超级浪费（除非使用指向数组的指针）。请注意肯定有更好的方法。

我可以控制从服务器发送的内容，因此可以增加上述数据结构。但需要一种快速的方法来根据客户端的节点 ID 获取子树。

编辑：我正在考虑保留另一个数据结构，{id, []ids} 的映射，其中 ids 是从根目录开始的有序路径。有更好的办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T17:54:41.090

javascript 中的对象是真正的基于指针的对象，这意味着您可以保留对它们的多个引用，而无需使用更多内存。为什么不进行一次遍历将子对象分配给新的基于 id 的父对象？除非您的分层对象非常庞大，否则这应该非常快。

根据最佳实践以及如果您正在构建的应用程序扩展到数百万用户会发生什么，您可能会重新考虑是否真的希望服务器完成更多工作。客户的电脑就坐在那里，随时为您免费提供远程计算能力。为什么将工作负载转移到服务器，导致它每秒处理更少的客户端请求？这可能不是你想去的方向。

[这是一个演示这种索引构建技术的小提琴](http://jsfiddle.net/PSKrz/2/)。您运行一次，并随心所欲地一遍又一遍地使用索引。建立所述索引只需要 4 或 5 毫秒。没有性能问题！

还有一点需要注意：如果您关心带宽，一种简单的帮助方法是减少您的 JSON。不要在对象键名周围加上引号，使用一个字母的键名，不要使用空格和换行符。这会给你带来很大的进步。对您的示例 JSON 执行此更改，它从 11,792 个字符变为 5,770 个字符，仅为原始大小的 49%！

一个小提示是 javascript 中的对象键始终是字符串。我添加到您的示例 JSON 中的数字 id 在用作键名时被强制转换为字符串。这应该不会妨碍使用，但这是您可能需要注意的细微差别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T17:15:13.930

**我不认为id**是按某种方式排序的，但是如果您向每个节点添加有关其子节点（以及子... ）。

这可以很容易地在服务器端实现，在搜索树时，您可以检查您要查找的 id 是否在节点的 id 范围内，然后再进入并搜索所有子节点。

# javascript - phonegap：尝试将 json 存储在数据库中：

> ID：12626602
> 
> 赞同：0
> 
> 时间：2012-09-27T17:07:28.410
> 
> 标签：javascript, android, json, cordova, web-sql

我正在尝试将具有以下 json 字符串的条目存储在数据库中。然而，似乎 json 字符串的格式与 db 不一致，即使我读过文章说这应该很容易：

我试过了：

```
function Activity() {
    this.clicks = 100;
    this.activityTypeCode = 3;
}

    var anActivity=new Activity(); 
    var jsonString=JSON.stringify(anActivity);
    database.transaction(function(tx) {
         tx.executeSQL('INSERT INTO MYTABLE(ID, DATA) VALUES (100,'+jsonString+')');  
    }, errorCB, successCB)

; 
```

我收到一个错误，显示错误无法识别的令牌“{”。当我做 console.log(jsonString) 我得到：

```
{"clicks":100, "activityTypeCode":3} 
```

任何援助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T14:18:16.423

首先是确保你的 json 字符串是正确的。您可以在此处验证您的 json 字符串。

第二个调试是你错过了一个';' 在executeSQL中的插入语句中。值数组也丢失了。

第三个调试将是您的 executeSQL 语句。试试这个：

```
 database.transaction(function(tx) 
    {
      tx.executeSQL('INSERT INTO MYTABLE(ID, DATA) VALUES (?,?);', [100, jsonString],                 
        errorCB, successCB);
     } 
```

您是否已将 ID 声明为 AUTOINCREMENT？您不能将值分配给 AUTOINCREMENT 列。

希望这可以帮助。！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T00:27:47.713

使用参数化查询或引用字符串

```
database.transaction(function(tx) {
     tx.executeSQL('INSERT OR REPLACE INTO MYTABLE (ID, DATA) VALUES (100,?)');  
}, [jsonString], errorCB, successCB) 
```

# ruby-on-rails-3 - Ruby on Rails 3：按虚拟属性对索引视图进行排序还是创建表列？

> ID：12626614
> 
> 赞同：0
> 
> 时间：2012-09-27T17:08:10.243
> 
> 标签：ruby-on-rails-3

我正在构建一个发票应用程序，其中发票有许多项目和付款。

在我的索引视图中，我显示了所有发票的列表，其中包括两个虚拟属性：

```
def total
  items.sum { |item| item.total }
end

def balance
  self.payments.sum(:amount) - self.total
end 
```

我注意到显示索引视图需要大量的 SQL。是否建议再创建两个表列？到目前为止，我选择不这样做，因为我不喜欢有太多冗余数据。

这是我的**控制器**：

```
def index
  result = current_user.invoices.includes(:items, :payments)
  @invoices = paginate(result)
end 
```

**index.html.erb**：

```
<table id="index">
  <thead>
    <tr>
      <th>Number</th>
      <th>Date</th>
      <th>Total</th>
      <th>Balance</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <%= render @invoices %>
  </tbody>
</table>
<%= will_paginate @invoices %> 
```

**_invoice.html.erb**：

```
<tr>
<td>
    <%= link_to invoice.number, invoice_path(invoice) %>
</td>
<td>
    <%= l invoice.date %>
</td>
<td>
    <%= number_to_currency(invoice.total) %>
</td>
<td>
    <%= number_to_currency(invoice.balance) %>
</td>       
<td>
    <%= destroy_link(invoice) %>
</td>
</tr> 
```

对于索引视图上的每张发票，将生成以下四个 SQL 查询：

```
(0.1ms)  SELECT SUM("payments"."amount") AS sum_id FROM "payments" WHERE "payments"."invoice_id" = 19
CACHE (0.0ms)  SELECT "items".* FROM "items" WHERE "items"."invoice_id" = 19
CACHE (0.0ms)  SELECT SUM("payments"."amount") AS sum_id FROM "payments" WHERE "payments"."invoice_id" = 19
CACHE (0.0ms)  SELECT "items".* FROM "items" WHERE "items"."invoice_id" = 19 
```

（这使得每个索引页有 40 个 SQL 查询。）

我必须承认我对 Rails 比较陌生。所以我想知道是否有最佳实践可以遵循？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T20:22:56.733

您可以在这里使用的最简单的改进可能是急切加载。

当您加载`Invoice`对象时，如果您急切地加载关联的项目和付款，您将执行 3 次查询，而不是很多。

因此，如果您有一个执行以下操作的控制器操作：

```
def index
  @invoices = Invoice.all
end 
```

您可以将其更改为：

```
@invoices = Invoice.includes(:payments, :items).all 
```

这种改变应该会加快速度，并且不需要你改变你的`total`or`balance`方法——它们仍然做同样的事情，但是一次获取他们需要的所有对象，而不是一次获取几个。

现在，这仍然（至少可能）将相当多的对象加载到内存中。如果您要在该视图中显示与单个项目和付款相关的各种数据，则可能无需执行任何操作。但是，如果所有视图需要的是总和余额值，您可以让您的数据库为您执行此操作并跳过实例化对象，如下所示：

```
@invoices = Invoice.select("invoices.*, sum(items.total) as item_total, (sum(payments.amount) - sum(items.total)) as remaining_balance").joins(:items, :payments).group('invoices.id') 
```

当您使用这样的自定义选择子句时，额外的列将作为具有列名称的属性移植到返回的对象上，因此您可以执行以下操作：

```
@invoices.first.remaining_balance 
```

我为这些列使用了不同的名称，以便它们不会与您现有的 balance 和 total 方法重叠 - 您可能需要也可能不需要这些，因为这些值仅在调用它们的对象使用自定义选择时存在描述。如果它们在没有它的情况下加载，尝试调用`.remaining_balance`将产生 NoMethodError。

注意事项：我使用的是 PostgreSQL 9.1.3，如果你不是，上面可能需要稍微修改一下。此外，适配器有一种奇怪的倾向，即会将这些值作为字符串返回，因此您可能需要`.to_f`对它们进行调用或类似的操作。

# jquery - Jquery将随机文本放置在圆形div内

> ID：12626615
> 
> 赞同：0
> 
> 时间：2012-09-27T17:08:10.123
> 
> 标签：jquery

我正在尝试在圆形 div 内生成随机文本，但它显示在圆圈外。

寻找一些指针来解决这个问题。

这就是我尝试过的[http://jsfiddle.net/q58HK/12/](http://jsfiddle.net/q58HK/12/)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T21:04:04.447

你可以试试这个小提琴：http: [//jsfiddle.net/aalmeida/2Bk4v/](http://jsfiddle.net/aalmeida/2Bk4v/)

编辑：我制作了另一个版本，速度更快：http: [//jsfiddle.net/aalmeida/2Bk4v/3/](http://jsfiddle.net/aalmeida/2Bk4v/3/)

# actionscript-3 - /=操作在actionscript中是什么意思？

> ID：12626621
> 
> 赞同：1
> 
> 时间：2012-09-27T17:08:24.307
> 
> 标签：actionscript-3

操作符 /= 在动作脚本中是什么意思？我已经看到了一些使用这个的缓动函数：

```
var ts:Number=(t/=d)*t; 
```

但不知道这个 t/=d 是什么意思。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T17:10:08.157

`foo /= bar`是 的简写形式`foo = foo / bar`。

`foo /= bar`操作的返回值为`foo / bar`

这段代码的展开形式是：

```
var ts:Number = t;
ts = ts / d;
ts = ts * ts;
t = t / d; 
```

编写该行的更好方法是：

```
t /= d;
var ts:Number = t * t; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T17:10:19.367

这就是[除法赋值](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/operators.html#division_assignment)运算符。

这和说的一样

```
var ts:Number=(t=t/d)*t; 
```

而且由于括号内的代码首先被评估，我相信等效代码是

```
t = t / d;
var ts:Number = t * t; 
```

它是在一行中分配`ts`和**修改**的值。`t`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T17:10:46.190

它与`+=`, `*=`,`-=`等相同。

它将数字除以指定的数字。这是简写​​代码而不是做

```
number = number / otherNumber; 
```

请注意，您发布的代码将不起作用，因为它设置了 t 变量，而不是返回除法后剩下的内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T17:11:32.563

和其他语言一样：

```
variable /= operand; 
```

是捷径

```
variable = variable / operand; 
```

# ajax - Yii中如何使用CGridView的ajaxUrl参数？

> ID：12626622
> 
> 赞同：6
> 
> 时间：2012-09-27T17:08:26.537
> 
> 标签：ajax, yii

我正在尝试使用 CGridView 的 ajaxUrl 参数，但它没有任何效果。

```
$this->widget('zii.widgets.grid.CGridView', array(
   'id'=>'ge-cg-'.$myLib['id'],
   'filter'=>$geCGModel,
   'dataProvider'=>$dataProvider, 
   'columns'=>$columns,
   'ajaxUrl'=>Yii::app()->createUrl( 'Something/search' ),
)); 
```

这似乎没有覆盖 CGridView 小部件的 ajax url。网格的 ajax 请求仍会发送到呈现它的控制器（与网格自己的控制器不同）。

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-28T10:50:49.157

该`ajaxUrl`属性仅适用于搜索，“每列过滤器”和“高级搜索”。排序链接和分页链接是根据`$dataProvider`您指定的链接生成的。您可以查看 CGridView 和 CDataColumn 的来源，以了解如何分别从 dataProvider 中提取[分页](https://github.com/yiisoft/yii/blob/master/framework/zii/widgets/grid/CGridView.php#L394 "https://github.com/yiisoft/yii/blob/master/framework/zii/widgets/grid/CGridView.php#L394")和[排序。](https://github.com/yiisoft/yii/blob/master/framework/zii/widgets/grid/CDataColumn.php#L110 "https://github.com/yiisoft/yii/blob/master/framework/zii/widgets/grid/CDataColumn.php#L110")

因此，如果您希望这些链接也使用`ajaxUrl`您要指定的相同链接，那么您必须为`route`CPagination 对象和 CSort 对象设置属性`$dataProvider`，有点像这样：

```
$dataProvider=new CActiveDataProvider('Modelname',array(
    'criteria'=>$criteria,
    'pagination'=>array(
        'route'=>'something/search'
    ),
    'sort'=>array(
        'route'=>'something/search'
    )
)); 
```

这与您当前的 CGridView 设置相结合应该可以按预期工作。

# memory - 使用 HLSL 对显卡进行无形压力 - 如何对内存进行压力？

> ID：12626625
> 
> 赞同：1
> 
> 时间：2012-09-27T17:08:32.557
> 
> 标签：memory, gpu, hlsl, directcompute

我一直在开发一个不可见的（阅读：不产生任何视觉输出）压力源来测试我的显卡的功能（并且作为对 DirectCompute 的一般探索，我对它很陌生）。我现在有以下代码，我很自豪：

```
RWStructuredBuffer<uint> BufferOut : register(u0);

[numthreads(1, 1, 1)]
void CSMain( uint3 DTid : SV_DispatchThreadID )
{
    uint total = 0;
    float p = 0;
    while(p++ < 40.0){      
        float s= 4.0;
        float M= pow(2.0,p) - 1.0;
        for(uint i=0; i <= p - 2; i++)
        {
            s=((s*s) - 2) % M;
        }
        if(s < 1.0) total++;
    }
    BufferOut[DTid.x] = total;
} 
```

这对前 40 个 2 的幂运行[Lucas Lehmer 检验。](http://mathworld.wolfram.com/Lucas-LehmerTest.html)[当我在定时循环中调度此代码并使用GPU-Z](http://www.techpowerup.com/gpuz/)查看我的显卡统计信息时，我的 GPU 负载在此期间飙升至 99%。我对此很满意，但我也注意到，满载 GPU 产生的热量实际上非常小（我的温度上升了大约 5 到 10 摄氏度，远不及跑步时的热量跳跃，说，无主之地2）。我的想法是我的大部分热量来自内存访问，因此我需要在整个运行过程中包含一致的内存访问。我的初始代码如下所示：

```
RWStructuredBuffer<uint> BufferOut : register(u0);

groupshared float4 memory_buffer[1024];

[numthreads(1, 1, 1)]
void CSMain( uint3 DTid : SV_DispatchThreadID )
{
    uint total = 0;
    float p = 0;
    while(p++ < 40.0){
            [fastop] // to lower compile times - Code efficiency is strangely not what Im looking for right now.
            for(uint i = 0; i < 1024; ++i)

        float s= 4.0;
        float M= pow(2.0,p) - 1.0;
        for(uint i=0; i <= p - 2; i++)
        {
            s=((s*s) - 2) % M;
        }
        if(s < 1.0) total++;
    }
    BufferOut[DTid.x] = total;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T21:05:48.323

在大纹理中读取大量不连贯的样本。尝试 DXT1 压缩和非压缩值。并使用渲染纹理。和捷运。所有这些都将击败 GPU 内存系统。

# matlab - Matlab中带有条件的散点图

> ID：12626635
> 
> 赞同：1
> 
> 时间：2012-09-27T17:08:55.077
> 
> 标签：matlab, colors, conditional, scatter-plot

我有一个粒子数据集。

第 1 列是粒子的电荷，第 2 列是 x 坐标，第 3 列是 y 坐标。

我已重命名第 1 列 c_particles、第 2 列 x_particles 和第 3 列 y_particles。

我需要绘制 x 与 y 的散点图，但是当电荷为正时，标记必须为红色，而当电荷为负时，标记必须为蓝色。

到目前为止我有

```
if c_particles < 0
scatter(x_particles,y_particles,5,[0 0 1], 'filled')
else
scatter(x_particles,y_particles,5,[1 0 0], 'filled')
end 
```

这正在产生情节，但标记都是红色的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T05:35:09.193

你的第一行没有做你认为的那样：

```
c_particles < 0 
```

`c_particles`将返回一个与;长度相同的布尔向量。`if`只要至少有一个元素为真，就会将此数组视为真。相反，您可以使用此“逻辑数组”来索引要绘制的粒子。我会试试这个：

```
i_negative = (c_particles < 0);       % logical index of negative particles
i_positive = ~i_negative;             % invert to get positive particles
x_negative = x_particles(i_negative); % select x-coords of negative particles
x_positive = x_particles(i_positive); % select x-coords of positive particles
y_negative = y_particles(i_negative);
y_positive = y_particles(i_positive);

scatter(x_negative, y_negative, 5, [0 0 1], 'filled');
hold on; % do the next plot overlaid on the current plot
scatter(x_positive, y_positive, 5, [1 0 0], 'filled'); 
```

# r - 逐行读取R中的文本文件

> ID：12626637
> 
> 赞同：68
> 
> 时间：2012-09-27T17:08:55.117
> 
> 标签：r, text, file-io

我想使用 for 循环和文件的长度逐行读取 R 中的文本文件。问题是它只打印字符（0）。这是代码：

```
fileName="up_down.txt"
con=file(fileName,open="r")
line=readLines(con) 
long=length(line)
for (i in 1:long){
    linn=readLines(con,1)
    print(linn)
}
close(con) 
```

* * *

## 回答 #1

> 赞同：143
> 
> 时间：2016-03-03T01:02:23.223

您应该小心处理`readLines(...)`大文件。读取内存中的所有行可能是有风险的。下面是一个如何读取文件并一次只处理一行的示例：

```
processFile = function(filepath) {
  con = file(filepath, "r")
  while ( TRUE ) {
    line = readLines(con, n = 1)
    if ( length(line) == 0 ) {
      break
    }
    print(line)
  }

  close(con)
} 
```

也要了解在内存中读取一行的风险。没有换行符的大文件也可以填满你的记忆。

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2012-09-27T17:13:31.777

只需`readLines`在您的文件上使用：

```
R> res <- readLines(system.file("DESCRIPTION", package="MASS"))
R> length(res)
[1] 27
R> res
 [1] "Package: MASS"                                                                  
 [2] "Priority: recommended"                                                          
 [3] "Version: 7.3-18"                                                                
 [4] "Date: 2012-05-28"                                                               
 [5] "Revision: $Rev: 3167 $"                                                         
 [6] "Depends: R (>= 2.14.0), grDevices, graphics, stats, utils"                      
 [7] "Suggests: lattice, nlme, nnet, survival"                                        
 [8] "Authors@R: c(person(\"Brian\", \"Ripley\", role = c(\"aut\", \"cre\", \"cph\"),"
 [9] "        email = \"ripley@stats.ox.ac.uk\"), person(\"Kurt\", \"Hornik\", role"  
[10] "        = \"trl\", comment = \"partial port ca 1998\"), person(\"Albrecht\","   
[11] "        \"Gebhardt\", role = \"trl\", comment = \"partial port ca 1998\"),"     
[12] "        person(\"David\", \"Firth\", role = \"ctb\"))"                          
[13] "Description: Functions and datasets to support Venables and Ripley,"            
[14] "        'Modern Applied Statistics with S' (4th edition, 2002)."                
[15] "Title: Support Functions and Datasets for Venables and Ripley's MASS"           
[16] "License: GPL-2 | GPL-3"                                                         
[17] "URL: http://www.stats.ox.ac.uk/pub/MASS4/"                                      
[18] "LazyData: yes"                                                                  
[19] "Packaged: 2012-05-28 08:47:38 UTC; ripley"                                      
[20] "Author: Brian Ripley [aut, cre, cph], Kurt Hornik [trl] (partial port"          
[21] "        ca 1998), Albrecht Gebhardt [trl] (partial port ca 1998), David"        
[22] "        Firth [ctb]"                                                            
[23] "Maintainer: Brian Ripley <ripley@stats.ox.ac.uk>"                               
[24] "Repository: CRAN"                                                               
[25] "Date/Publication: 2012-05-28 08:53:03"                                          
[26] "Built: R 2.15.1; x86_64-pc-mingw32; 2012-06-22 14:16:09 UTC; windows"           
[27] "Archs: i386, x64"                                                               
R> 
```

有一[整本手册](https://cran.r-project.org/doc/manuals/R-data.html)专门用于说明这一点。

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2012-09-27T17:56:03.220

这是带有`for`循环的解决方案。重要的是，它将一次调用`readLines`排除在 for 循环之外，这样就不会一次又一次地不正确地调用它。这里是：

```
fileName <- "up_down.txt"
conn <- file(fileName,open="r")
linn <-readLines(conn)
for (i in 1:length(linn)){
   print(linn[i])
}
close(conn) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-02-09T06:12:46.250

我编写了一个代码来逐行读取文件以满足我的需求，不同的行具有不同的数据类型，请遵循文章：[read-line-by-line-of-a-file-in-r](https://www.r-bloggers.com/read-line-by-line-of-a-file-in-r/)和[determine-number-of-linesrecords](https://www.r-bloggers.com/easy-way-of-determining-number-of-linesrecords-in-a-given-large-file-using-r/)。我认为它应该是大文件的更好解决方案。我的 R 版本（3.3.2）。

```
con = file("pathtotargetfile", "r")
readsizeof<-2    # read size for one step to caculate number of lines in file
nooflines<-0     # number of lines
while((linesread<-length(readLines(con,readsizeof)))>0)    # calculate number of lines. Also a better solution for big file
  nooflines<-nooflines+linesread

con = file("pathtotargetfile", "r")    # open file again to variable con, since the cursor have went to the end of the file after caculating number of lines
typelist = list(0,'c',0,'c',0,0,'c',0)    # a list to specific the lines data type, which means the first line has same type with 0 (e.g. numeric)and second line has same type with 'c' (e.g. character). This meet my demand.
for(i in 1:nooflines) {
  tmp <- scan(file=con, nlines=1, what=typelist[[i]], quiet=TRUE)
  print(is.vector(tmp))
  print(tmp)
}
close(con) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-11-01T22:37:33.017

我建议你检查[`chunked`](https://github.com/edwindj/chunked)和[`disk.frame`](https://github.com/xiaodaigh/disk.frame)。它们都具有逐块读取 CSV 的功能。

特别是，`disk.frame::csv_to_disk.frame`可能是您追求的功能？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-23T17:51:55.413

```
fileName = "up_down.txt"

### code to get the line count of the file
length_connection = pipe(paste("cat ", fileName, " | wc -l", sep = "")) # "cat fileName | wc -l" because that returns just the line count, and NOT the name of the file with it
long = as.numeric(trimws(readLines(con = length_connection, n = 1)))
close(length_connection) # make sure to close the connection
###

for (i in 1:long){

    ### code to extract a single line at row i from the file
    linn_connection_cmd = paste("head -n", format(x = i, scientific = FALSE, big.mark = ""), fileName, "| tail -n 1", sep = " ") # extracts one line from fileName at the desired line number (i)
    linn_connection = pipe(linn_connection_cmd)
    linn = readLines(con = linn_connection, n = 1)
    close(linn_connection) # make sure to close the conection
    ###

    # the line is now loaded into R and anything can be done with it
    print(linn)
}
close(con) 
```

通过使用 R 的`pipe()`命令，并使用 shell 命令来提取我们想要的内容，完整的文件永远不会加载到 R 中，而是逐行读取。

```
paste("head -n", format(x = i, scientific = FALSE, big.mark = ""), fileName, "| tail -n 1", sep = " ") 
```

正是这个命令完成了所有工作；它从所需文件中提取一行。

**编辑**：R 的默认行为是在*小于*100,000`i`时以正常数字返回，但在*大于或等于*100,000 (1e+05)时开始以科学计数法返回。因此，在我们的管道命令中使用，以确保命令始终接收正常形式的数字，这是命令可以理解的全部。如果该命令被赋予任何数字，如 1e+05，它将无法理解，并会导致以下错误：*`i`*`format(x = i, scientific = FALSE, big.mark = "")``pipe()``pipe()`**

 **```
head: 1e+05: invalid number of lines 
```**

# eclipse - Eclipse XWT 在生产中？

> ID：12626639
> 
> 赞同：3
> 
> 时间：2012-09-27T17:08:58.447
> 
> 标签：eclipse, eclipse-plugin, swt, xwt

有没有人在非平凡的（例如，比教程更复杂的东西）环境中使用过[Eclipse XWT ？](http://wiki.eclipse.org/E4/XWT)我不认为 Eclipse4 自己使用它。

它真的比 SWT 有什么优势吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T15:55:37.187

XWT 是一个声明式 UI 框架。它允许您对 UI 进行建模。您无需编写代码来实例化、设计、布局和数据绑定您的 SWT 小部件。而是使用基于 XML 的描述文件来构建 UI。

查看 XWT 常见问题解答中的示例：[http ://wiki.eclipse.org/E4/XWT#Layout](http://wiki.eclipse.org/E4/XWT#Layout)

XWT 类似于 GladeXML、XAML 和 XUL。Eclipse Juno 中带有 XWT 编辑器和 WindowBuilder 的工具支持。

在我看来，缺乏工具支持，编辑器中缺少 XWT 的几个特性。虽然我通常更喜欢声明式 UI 方法，但我不会仅基于 XWT 构建一个重要的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T00:02:41.207

显然，没有人在生产环境中见过 XWT。

# cordova - Pushwoosh 和 PhoneGap

> ID：12626640
> 
> 赞同：1
> 
> 时间：2012-09-27T17:09:03.650
> 
> 标签：cordova, push-notification, pushwoosh

您如何使用 javascript 获取用户推送令牌？我正在使用 Pushwoosh，我可以在调用 registerDevice 后立即从状态变量中获取它，但是是否可以在该函数之外获取它？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T18:32:57.857

我们将令牌写入文件并使用 phonegp 读取它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T10:43:55.893

目前，您只能使用此功能执行此操作。将来会有另一种方式实现。

# c# - 从声卡 windows xp 捕获音频数据

> ID：12626641
> 
> 赞同：2
> 
> 时间：2012-09-27T17:09:18.207
> 
> 标签：c#, .net, audio-streaming, audio-recording, naudio

我的要求是捕获客户端计算机上正在播放的任何（音频）并将其作为实时流发送到服务器。为此，在 Windows 7 上，我正在研究 WASAPI Loopback。但这在 Windows XP 中不受支持。有谁知道如何在 Windows Xp 中完成它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T04:28:01.013

您可以使用 DirectX。

看看这个： [使用托管 DirectX (MDX) 1.1 捕获声音等](http://www.codeproject.com/Articles/31356/C-MP3-Sound-Capturing-Recording-Component)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T11:10:51.530

Windows XP 不提供对环回捕获的内置支持。只有当您的声卡具有可以选择用于录制的“您所听到的”选项时，您才能做到这一点。如果没有，那么您将需要使用专门创建的声卡驱动程序，该驱动程序允许您截取发送给它的音频，并将其传递给您的真实声卡。有一些商业产品可以做到这一点（例如[Virtual Audio Cable](http://software.muzychenko.net/eng/vac.htm)）

# java - 正则表达式查找元值

> ID：12626642
> 
> 赞同：1
> 
> 时间：2012-09-27T17:09:20.017
> 
> 标签：java, regex

我正在尝试从网页中读取并从元获取最后修改日期。例如

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<meta http-equiv="last-modified" content="Mon, 17 Sep 2012 13:57:35 SGT" />
</head> 
```

我正在逐行阅读，在这种情况下如何构建正则表达式？我对正则表达式相当陌生。我努力了

```
line.matches("<meta http-equiv=\"last-modified\" content=\"(\w)*\" /> "); 
```

但不要认为它是正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T17:25:09.583

虽然您[永远不应该使用正则表达式来解析 html](https://stackoverflow.com/questions/6751105/why-its-not-possible-to-use-regex-to-parse-html-xml-a-formal-explanation-in-la)，但如果您坚持，[这里有一个正则表达式](http://regexr.com?329sr)选项

```
Pattern metaPattern = Pattern.compile("meta .*\"last-modified\" content="(.*)");
Matcher metaMatch = metaPattern.matcher(sampleString);
if metaMatch.matches()
{
    System.out.println(metaMatch.group(1));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T17:20:37.683

您不能`\w`仅用于您的组，因为您的目标信息包含*非*单词字符。

尝试类似：

```
String line = "<meta http-equiv=\"last-modified\" content=\"Mon, 17 Sep 2012 13:57:35 SGT\" />";

Pattern p = Pattern.compile("<meta .*last-modified.*content=\"(.*)\".*");
Matcher m = p.matcher(line);
if (m.matches())
    System.out.println(m.group(1)); 
```

输出：

```
Mon, 17 Sep 2012 13:57:35 SGT 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T18:27:42.457

这是一个没有正则表达式的解决方案。

当然，您必须小心使用它并事先进行一些检查。

```
String data = "<head>" +  
              "<meta http-equiv=\"Content-Type\" content=\"text/html; charset=windows-1252\">" +
              "<meta http-equiv=\"last-modified\" content=\"Mon, 17 Sep 2012 13:57:35 SGT\" />" + 
              "</head>";

String key =  "<meta http-equiv=\"last-modified\" content=\"";

int from = data.lastIndexOf(key);
String tag = data.substring(from + key.length());
int to = tag.indexOf("\"");
String date = tag.substring(0, to);
System.out.println(date); 
```

# php - 身份验证系统 - 每次都必须更改的返回信息

> ID：12626644
> 
> 赞同：2
> 
> 时间：2012-09-27T17:09:25.227
> 
> 标签：php, delphi, authentication, password-protection

我有一个包含身份验证系统（登录名和密码）的应用程序（用 Delphi 制作）。

这个系统是用 PHP 编写的，应用程序使用 HTTP **GET**方法从 PHP 获取结果。如果登录名和密码正确，系统返回“OK”，如果不正确，系统返回“NO”。

像这样...

```
procedure Check;
var
 x: string;
begin
 x:=Get('www.mywebsite.com/auth.php?user=xxxxxx&pass=zzzzzz');
 if x='OK' then 
  UnlockFeatures
 else
  MessageBox(0,'You're not VIP','Error',0);
end; 
```

嗯，它工作得很好，但是用嗅探器、数据包编辑器或代理很容易绕过这个系统。

**所以，我想获得一些每次都会改变的信息（在 PHP 中），并且我的应用程序可能会获得相同的信息。**

**我能做些什么？**

我不需要代码。只是提示，建议，请...

谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T07:07:08.630

一般来说，我建议你不要试图比每个人都聪明并发明全新的自行车——你会因为一些愚蠢的错误而失败 99%，使你的方法完全不安全。有很多优先级，例如 DVD 加密或 Win95 安全性。您最好尝试一些行业认可的机制，这些机制多年来都经过了安全性测试，应该已经为 Delphi 和 PHP 提供了现成的实现。很少有

*   TLS（https:// 协议）[http://en.wikipedia.org/wiki/Transport_Layer_Security](http://en.wikipedia.org/wiki/Transport_Layer_Security) - 这不会提供对[MITM](http://en.wikipedia.org/wiki/Man-in-the-middle_attack)攻击的保护，但这听起来正是您所要求的，并且需要最少的更改。
*   如果您的服务器支持，您可以尝试通过[集成的 Windows 身份验证实现](http://en.wikipedia.org/wiki/Integrated_Windows_Authentication)[SSO](http://en.wikipedia.org/wiki/Single_sign-on)
*   您可以尝试设置[OpenID](http://en.wikipedia.org/wiki/Openid)或[OAuth](http://en.wikipedia.org/wiki/OAuth)环境。通常他们的 v.1 会比 v.2 更简单
*   您可以尝试摆脱 HTTP 并使用[XMPP/Jabber](http://en.wikipedia.org/wiki/Extensible_Messaging_and_Presence_Protocol)身份验证 - 他们非常重视安全性，并且存在 PHP 和 Delphi 库。虽然它不应该比仅使用 TLS 更安全，但您可能希望愚蠢的攻击者不会为非 HTTP 协议做好准备（Facebook 之外没有互联网等）。
*   您可以使用类似蓝牙的方法进行一次特殊连接（“握手”）（当客户端和服务器都受到控制时），只是为了交换和存储特殊的“令牌”。这是使用“受控环境”进行第一次连接并使用一些标记来证明“我们以前见过”在使用通用[挑战/响应](http://en.wikipedia.org/wiki/Challenge-response)特征的后续连接中的通用特征。对于每个客户端-用户-服务器组合，这些令牌应该是唯一的！如果您要创建一个服务器全局客户端共享的一组令牌 - 它们只会很容易地从一个客户端复制到另一个客户端，并且没有更多的安全性。
*   *   这些可能是一些不重要的[RNG](http://en.wikipedia.org/wiki/RNG)的系数。构造为服务器并由客户端和服务器保存。然后服务器用 RNG 种子“挑战”，客户端应该用适当的随机值响应，证明他知道系数。
*   *   这些可能是一些[非对称加密](http://en.wikipedia.org/wiki/Asymmetric_crypto)，其中令牌是一些随机“消息”，然后服务器发送客户端加密密钥并期望由它们加密的正确消息，或者令牌是密码并且服务器生成随机文本并期望它是正确的加密数字签名被传回去。您可以在[Torry.net](http://www.torry.net)上找到加密库作为示例。[Lockbox3](http://lockbox.seanbdurkin.id.au)和 Spring4Delphi 是 Delphi 实现某些加密标准的经过测试和关注最多的加密库之一。

考虑您的优先事项并做出选择。您是否能够在稍后一键切换所有身份验证层，完全不关心与未更新客户端的向后兼容性，那么您可能会选择最简单的一个，然后在需要时才对其进行增强。如果您的用户懒于升级，那么您最好从初学者中选择最安全的方法，因为以后您将没有实用的方法来禁用不安全的实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T17:15:34.170

我不熟悉 Delphi（很久以前......），但就 php 和安全性而言：

*   我会使用`post`而不是`get`（`https`如果可能的话）
*   如果您可以使用 Delphi 读取 php 会话，则可以添加一个带有随机数的会话变量并将其添加为隐藏表单字段，将其发送并对照会话变量进行检查。

# jquery - 今日美国新测试版网站上的滑动页面转换

> ID：12626645
> 
> 赞同：0
> 
> 时间：2012-09-27T17:09:27.830
> 
> 标签：jquery, html, css-transitions, transitions

我很好奇是否有人知道他们是如何在新的《今日美国》网站 (http://beta.usatoday.com) 上的各个部分之间进行滑动页面转换的。或者，有谁知道是否有一种简单的方法可以复制它？

到目前为止，我在搜索中看到的唯一东西是 jQuery Mobile 之类的东西，但这似乎有点难以实现这种效果。

任何帮助或输入表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T17:17:16.577

they are using something like serial scroll jquery plugin, you can see an example here: [serial scroll](http://demos.flesler.com/jquery/serialScroll/)

# java - Android的电话问题

> ID：12626646
> 
> 赞同：0
> 
> 时间：2012-09-27T17:09:30.247
> 
> 标签：java, android

我无法使用 Android 拨打电话。问题在于我得到的号码在区号周围有括号，即`(206) 555 1234`。这是我正在使用的代码：

```
final String phone =  listdata.getPhone();
...
            ImageButton phoneButton = (ImageButton) this.findViewById(R.id.phoneButton);
            phoneButton.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v)
                {
                    Uri phoneNum = Uri.parse(phone); 
                    Intent phoneIntent = new Intent(Intent.ACTION_CALL, phoneNum);
                    //phoneIntent.setData(); 

                    DetailActivity.this.startActivity(phoneIntent);

                }
            }); 
```

这是我得到的错误：

```
 09-27 10:01:45.771: E/AndroidRuntime(23422): FATAL EXCEPTION: main
09-27 10:01:45.771: E/AndroidRuntime(23422): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.CALL dat=(206) 623-1922 }
09-27 10:01:45.771: E/AndroidRuntime(23422):    at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1512)
09-27 10:01:45.771: E/AndroidRuntime(23422):    at android.app.Instrumentation.execStartActivity(Instrumentation.java:1384)
09-27 10:01:45.771: E/AndroidRuntime(23422):    at android.app.Activity.startActivityForResult(Activity.java:3248)
09-27 10:01:45.771: E/AndroidRuntime(23422):    at android.app.Activity.startActivity(Activity.java:3359)
09-27 10:01:45.771: E/AndroidRuntime(23422):    at com.uie.top25.seattle.DetailActivity$2.onClick(DetailActivity.java:94)
09-27 10:01:45.771: E/AndroidRuntime(23422):    at android.view.View.performClick(View.java:3526)
09-27 10:01:45.771: E/AndroidRuntime(23422):    at android.view.View$PerformClick.run(View.java:14133)
09-27 10:01:45.771: E/AndroidRuntime(23422):    at android.os.Handler.handleCallback(Handler.java:605)
09-27 10:01:45.771: E/AndroidRuntime(23422):    at android.os.Handler.dispatchMessage(Handler.java:92)
09-27 10:01:45.771: E/AndroidRuntime(23422):    at android.os.Looper.loop(Looper.java:137)
09-27 10:01:45.771: E/AndroidRuntime(23422):    at android.app.ActivityThread.main(ActivityThread.java:4697)
09-27 10:01:45.771: E/AndroidRuntime(23422):    at java.lang.reflect.Method.invokeNative(Native Method)
09-27 10:01:45.771: E/AndroidRuntime(23422):    at java.lang.reflect.Method.invoke(Method.java:511)
09-27 10:01:45.771: E/AndroidRuntime(23422):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
09-27 10:01:45.771: E/AndroidRuntime(23422):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
09-27 10:01:45.771: E/AndroidRuntime(23422):    at dalvik.system.NativeStart.main(Native Method) 
```

除了更改号码来源之外，我能做些什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T18:07:58.577

您必须更改号码来源，因为 ACTION_CALL 意图不理解该号码。所以要么你改变你的号码，要么你可以等到谷歌改变安卓来满足你的需要:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-17T17:49:27.167

我不确定 Android 在过去 8 个月中是否发生了变化以适应这一点，但问题不在于数字的格式。Android 可以很好地处理括号、空格和破折号。问题是 Uri 中缺少前缀“tel:”。

```
Uri phoneNum = "tel:" + Uri.parse(phone); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T18:48:31.813

要小心，否则您将构建一些适用于某些地理区域而不适用于其他地理区域的东西。考虑一下：

1.  0044(0)123456789。英国国际号码。必须删除零和括号，否则号码将无法拨打。

2.  (0)123456789。英国国家号码。必须删除括号，但不能删除零，否则号码将无法拨打。

3.  (0)123 456789。美国国家号码，但用于本地电话。在某些地区，如果呼叫在同一地区，则必须删除区号。所以有些地区会接受 123456789，而其他地区只会接受 456789。

它还在继续。在某些国家，例如意大利，手机号码特别难以处理。

通过查看[E.164](http://en.wikipedia.org/wiki/E.164)规范开始您的研究。

# entity-framework - 按类型设计和插入的实体框架表

> ID：12626650
> 
> 赞同：0
> 
> 时间：2012-09-27T17:09:33.497
> 
> 标签：entity-framework

我有一张按类型设计的桌子

```
class Table1
{
  public int id {get;set;}
  public string data1{get;set;}
  public string data2{get;set;}
}
class Table2
{
  public int table1_id {get;set;}
  public string data3{get;set;}
  public string data4{get;set;}
}
class Table3
{
  public int table1_id {get;set;}
  public string data5{get;set;}
  public string data6{get;set;}
} 
```

在我的种子方法中，我在 Table1 中插入一行。新的 {id=0,...} 然后我做

```
context.Table2Set.AddOrUpdate(new Table2{table1_id = 0,...}); 
```

当我运行我的更新数据库时，我得到：

```
System.Data.Entity.Validation.DbEntityValidationException: Validation failed for one or more entities. See 'EntityValidationErrors' property for more details.
   at System.Data.Entity.Internal.InternalContext.SaveChanges()
   at System.Data.Entity.Internal.LazyInternalContext.SaveChanges()
   at System.Data.Entity.DbContext.SaveChanges()
   at System.Data.Entity.Migrations.DbMigrator.SeedDatabase()
   at System.Data.Entity.Migrations.Infrastructure.MigratorLoggingDecorator.SeedDatabase()
   at System.Data.Entity.Migrations.DbMigrator.Upgrade(IEnumerable`1 pendingMigrations, String targetMigrationId, String lastMigrationId)
   at System.Data.Entity.Migrations.Infrastructure.MigratorLoggingDecorator.Upgrade(IEnumerable`1 pendingMigrations, String targetMigrationId, String lastMigrationId)
   at System.Data.Entity.Migrations.DbMigrator.Update(String targetMigration)
   at System.Data.Entity.Migrations.Infrastructure.MigratorBase.Update(String targetMigration)
   at System.Data.Entity.Migrations.Design.ToolingFacade.UpdateRunner.RunCore()
   at System.Data.Entity.Migrations.Design.ToolingFacade.BaseRunner.Run()
Validation failed for one or more entities. See 'EntityValidationErrors' property for more details. 
```

我做错了什么吗？

**更新**真实数据

```
public class Identity
{
    public Identity()
    {
        this.Roles = new List<Role>();
    }

    public int Id { get; set; }
    public System.DateTime DateAdded { get; set; }
    public string identityprovider { get; set; }
    public string nameidentifier { get; set; }
    public System.DateTime LastLoggedIn { get; set; }

    public virtual ICollection<Role> Roles { get; set; }
}

public class Member : Identity
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string Email { get; set; }
    public Address Address { get; set; }
    public int Id { get; set; }

    public virtual ICollection<News> News { get; set; }

}
    public IdentityMap()
    {
        // Primary Key
        this.HasKey(t => t.Id);
        this.Property(t=>t.Id).HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);
        // Properties
        this.Property(t => t.identityprovider)
            .IsRequired()
            .HasMaxLength(255);

        this.Property(t => t.nameidentifier)
            .IsRequired();

        // Table & Column Mappings

        this.Property(t => t.Id).HasColumnName("Id");

        this.Property(t => t.DateAdded).HasColumnName("DateAdded").
            HasDatabaseGeneratedOption(DatabaseGeneratedOption.Computed);
        this.Property(t => t.identityprovider).HasColumnName("identityprovider");
        this.Property(t => t.nameidentifier).HasColumnName("nameidentifier");
        this.Property(t => t.LastLoggedIn).HasColumnName("LastLoggedIn")
            .HasDatabaseGeneratedOption(DatabaseGeneratedOption.Computed);

        // Relationships
        this.HasMany(t => t.Roles)
            .WithMany(t => t.Identities)
            .Map(m =>
                {
                    m.ToTable("IdentityRoles");
                    m.MapLeftKey("Identities_Id");
                    m.MapRightKey("Roles_Id");
                });
        this.ToTable("Identities");

    }
  public MemberMap()
    {
        // Primary Key
        this.HasKey(t => t.Id);

        // Properties
        this.Property(t => t.FirstName)
            .IsRequired()
            .HasMaxLength(150);

        this.Property(t => t.LastName)
            .IsRequired()
            .HasMaxLength(50);

        this.Property(t => t.Email)
            .IsRequired()
            .HasMaxLength(150);

        this.Property(t => t.Address.Id)
            .IsRequired()
            .HasMaxLength(100)
            .HasColumnName("Address_FirstLine");

        this.Property(t => t.Address.ZipCode)
            .IsRequired()
            .HasMaxLength(20).HasColumnName("Address_Zip");

        this.Property(t => t.Address.Contry)
            .IsRequired()
            .HasMaxLength(100).HasColumnName("Address_Contry");

        this.Property(t => t.Address.City)
            .IsRequired()
            .HasMaxLength(100).HasColumnName("Address_Town");

        this.Property(t => t.Id);

        // Table & Column Mappings
        this.ToTable("Identities_Member");
        this.Property(t => t.FirstName).HasColumnName("FirstName");
        this.Property(t => t.LastName).HasColumnName("LastName");
        this.Property(t => t.Email).HasColumnName("Email");
        this.Property(t => t.Id).HasColumnName("Id");

        // Relationships

    }
        CreateTable(
            "dbo.Identities_Member",
            c => new
                {
                    Id = c.Int(nullable: false),
                    FirstName = c.String(nullable: false, maxLength: 150),
                    LastName = c.String(nullable: false, maxLength: 50),
                    Email = c.String(nullable: false, maxLength: 150),
                    Address_FirstLine = c.String(nullable: false, maxLength: 100),
                    Address_Street = c.String(),
                    Address_Town = c.String(nullable: false, maxLength: 100),
                    Address_Zip = c.String(nullable: false, maxLength: 20),
                    Address_Contry = c.String(nullable: false, maxLength: 100),
                })
            .PrimaryKey(t => t.Id)
            .ForeignKey("dbo.Identities", t => t.Id)
            .Index(t => t.Id);
}
CreateTable(
                "dbo.Identities",
                c => new
                    {
                        Id = c.Int(nullable: false, identity: true),
                        DateAdded = c.DateTime(nullable: false, defaultValueSql: "GETUTCDATE()"),
                        identityprovider = c.String(nullable: false, maxLength: 255),
                        nameidentifier = c.String(nullable: false,maxLength:100),
                        LastLoggedIn = c.DateTime(nullable: false, defaultValueSql: "GETUTCDATE()"),
                    })
                .PrimaryKey(t => t.Id)
                .Index(t=>t.nameidentifier); 
```

# c# - 访问“RetrieveMultiple”中的数据

> ID：12626651
> 
> 赞同：1
> 
> 时间：2012-09-27T17:09:34.227
> 
> 标签：c#, dynamics-crm, fetchxml

我正在获取实体`Contact`，`Account`我希望访问联系人的姓名和主要联系人的姓名。虽然第一个很容易通过

```
EntityCollection result = proxy.RetrieveMultiple(...);
Entity entity = result.Entities[0].Attributes["fullname"]; 
```

另一个似乎在与我打架，抛出异常。据我所见，它取决于`<entity>`在前一种情况下直接在名称下具有名称属性的获取 XML，`<entity><link-entity>`在后一种情况下具有名称属性。

如何访问`fullname`作为链接实体的字段？

* * *

获取联系人的 XML：

```
<fetch version='1.0' output-format='xml-platform' mapping='logical' distinct='true'>
  <entity name='contact'>
    <attribute name='fullname' />
  </entity>
</fetch> 
```

获取客户主要联系人的 XML：

```
<fetch version='1.0' output-format='xml-platform' mapping='logical' distinct='true'>
  <entity name='account'>
    <attribute name='accountid'/>
    <link-entity name='listmember' from='entityid' to='accountid' visible='false' intersect='true'>
      <link-entity name='list' from='listid' to='listid' alias='ab'>
      </link-entity>
    </link-entity>
    <link-entity name='contact' from='contactid' to='primarycontactid' visible='false' link-type='outer' alias='...'>
      <attribute name='fullname'/>
    </link-entity>
  </entity>
</fetch> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T22:28:02.300

这是对原始问题、GCTANM 的回答和评论的回应（我的想法太长了，无法发表评论）。

这里似乎有一些困惑，我想澄清一下。

**GCTAN：**

> RetrieveMultiple 只能将 LinkEntities 用于选择目的，它不能返回查询的主要实体以外的实体的属性。
> 
> ...
> 
> 对于这些联系人记录的任何其他属性，您必须获取每个联系人的 ID 并执行我评论中提到的检索调用之一。

这些语句是不正确的，您也可以返回所有链接实体的属性。[MSDN](http://msdn.microsoft.com/en-us/library/gg328149.aspx)上有一个这样的例子。

**查斯特**

> 顾名思义，Fetch 只会返回一个结果，不是吗？

FetchXml 返回单个结果集，但该结果集可以包含许多记录的详细信息。

> 不知何故，我更喜欢使用 XML 而不是实体

如果您真的（真的）想要这样做，您可以使用 Crm 4 Web 服务，RetrieveMultiple 仍然返回一个 Xml 结果集。

**回答原来的问题。**

因此，您可能难以取回属性的原因是返回的 EntityCollection 具有在 Crm 2011 中引入的稍微特殊的行为。

简而言之，Crm 4 FetchXml 查询将返回您必须在 2011 年解析的 Xml 结果，以帮助您将结果解析为 EntityCollection。这导致某些属性具有非常意外的名称。

因此，以您上面的联系人为例，您必须使用以下方式访问 fullname 属性：`contact1.fullname`，联系人是链接，数字代表链接数，全名是属性。

我不记得确切的格式，我正在努力寻找一个像样的例子。我建议您在查询后设置断点并检查结果，我确信您会找到数据但名称如上。

如果我能找到一个体面的例子（或明天创建一个），我会更新我的帖子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T17:16:22.180

`RetrieveMultiple`只能将 LinkEntities 用于选择目的，它不能返回查询的主要实体以外的实体的属性。

但是，当您在帐户查询中包含该`primarycontactid`属性时，该属性将是一个包含联系人的属性。不过这是巧合，因为该属性是实体的“主名称”属性，而这正是在对象中使用的。`ColumnSet``EntityReference``Name``fullname``fullname``contact``EntityReference`

根据您的要求详细说明：

`RetrieveMultiple`接受一个`QueryBase`对象（最常见的是 a `QueryExpression`），它有一个调用`ColumnSet`属性来定义要返回的属性（这会影响性能，尤其是对于具有许多字段的实体）。

在你的情况下，它可能是这样设置的：

```
QueryExpression qryAccounts = new QueryExpression("account")
{
    ColumnSet = new ColumnSet("accountid", "name", "primarycontactid")
};

qryAccounts.Criteria.AddCondition("primarycontactid", ConditionOperator.NotNull);

qryAccounts.AddLink("list", "accountid", "entityid");

EntityCollection collAccounts = svcOrganization.RetrieveMultiple(qryAccounts); 
```

现在，如果返回的任何记录`collAccounts.Entities`有一个主要联系人（在这种情况下，它们都会有，因为这是我们的条件之一，也就是`select`子句），它的`Attributes`集合将包含一个 keyed 项`primarycontactid`，并且值将是 type `EntityReference`。

这具有属性`Id`, `LogicalName`（这是被引用实体的名称，在本例中为“联系人”）和`Name`，这是实体的主要名称属性的值；for `contact`，即`fullname`（因为`account`它是`name`，依此类推 - 始终是您在相应实体的网格或查找中看到的名称）。

但正如我所说，这是一个巧合，对于这些联系人记录的任何其他属性，您必须获取每个联系人的 ID 并`Retrieve`拨打我评论中提到的电话之一。

据我所知，使用`Fetch`实际的 FetchXML（结果也是 XML）*可以*直接返回链接记录的属性。

# python - 图像库从 JPEG 转换为

> ID：12626654
> 
> 赞同：6
> 
> 时间：2012-09-27T17:09:40.843
> 
> 标签：python, pdf, image-processing, python-imaging-library, resolution

我正在尝试将 200 dpi 的 JPEG 文件转换为 PDF 文件，但是，当我将文件另存为 PDF 时，我认为它会将 dpi 更改为 72，从而使图像更大。最初尝试将 JPEG 图像缩放到更小的尺寸时，我遇到了类似的问题，并且能够通过在保存图像时指定 dpi 来解决该问题。

```
im = Image.open("Image.jpg")

dpi=im.info['dpi']

if im.size == (2592, 1728):
    out = im.resize((1188,792), Image.ANTIALIAS)
elif im.size == (1728,2592):
    out = im.resize((792,1188), Image.ANTIALIAS)

out.save(project, dpi=dpi) 
```

现在，当我尝试将此 JPEG 保存为 PDF 时，指定 dpi 似乎没有任何区别，并且我得到的图像比我的原始图像大，看起来它的 dpi 较低。使用 PIL 从 JPEG 转换为 PDF 时，有没有办法保持一致的分辨率？还是有更好的方法让我去做这件事？

这就是我将文件目录从 JPEG 转换为 PDF 的方法：

```
for infile in listing:

    outfile = destpath + os.path.splitext(infile)[0] + ".pdf"
    current = path + infile

    if infile != outfile:
        im = Image.open(current)
        dpi=im.info['dpi']

        im.save(outfile, "PDF", Quality = 100) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-27T18:23:57.610

在`PIL 1.1.7`源代码的 CHANGES 文件中，可以阅读：

> *   为 PDF 文件添加了分辨率保存选项。
>     
>     
>     
>     Andreas Kostyrka 写道： 我
>     在 Ubuntu 中包含了一个基于 1.1.6 的修补 PdfImagePlugin.py，它支持“分辨率”
>     保存选项。
>     不是很好，但它通过允许不完全是 72dpi的 PDF 使 PDF 保存更有用。

所以你应该能够做到：

```
im.save(outfile, "PDF", resolution=100.0) 
```

（似乎在我的 Ubuntu 机器上工作正常）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-27T18:03:00.660

您可以使用[reportlab](http://www.reportlab.com/ftp/reportlab-2.5.tar.gz)库。

```
import sys

from reportlab.lib.pagesizes import letter
from reportlab.platypus import SimpleDocTemplate, flowables

__jpgname = str()
def drawPageFrame(canvas, doc):
    width, height = letter
    canvas.saveState()
    canvas.drawImage(
    __jpgname, 0, 0, height, width,
    preserveAspectRatio=True, anchor='c')
    canvas.restoreState()

def jpg2pdf(pdfname):
    width, height = letter

    # To make it landscape, pagesize is reversed
    # You can modify the code to add PDF metadata if you want
    doc = SimpleDocTemplate(pdfname, pagesize=(height, width))
    elem = []

    elem.append(flowables.Macro('canvas.saveState()'))
    elem.append(flowables.Macro('canvas.restoreState()'))

    doc.build(elem, onFirstPage=drawPageFrame)

if __name__ == '__main__':
    if len(sys.argv) < 3:
    print("Usage: python jpg2pdf.py <jpgname> <pdfname>")
    exit(1)
    __jpgname = sys.argv[1]
    jpg2pdf(sys.argv[2]) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-12T15:23:57.990

PIL 参数必须小写，这一点很重要。

> im.save（输出文件，“PDF”，质量 = 100）

*质量 = 100* ----不会工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-16T08:05:39.430

这是一个将任何具有.jpg或.JPG扩展名的文件转换为pdf的代码，然后删除已转换的图像。对不起，评论是法语。

```
import os #necessaire pouvoir supprimer l'image une fois converti et parcourir les fichers dans le dossier
from fpdf import FPDF #necessaire pour convertir les jpg en pdf

for file in os.listdir(): # pour chaque fichiers dans le dossier dans lequel se trouve ce fichier python
if file.endswith(".jpg") or file.endswith(".JPG"): #permet de selectionner les fichers avec l'extension .jpg ou .JPG
    img=os.path.join(file) #convertie le nom du fichier en variable
    pdf = FPDF()
    pdf.add_page()
    pdf.set_font('Arial', 'B', 16)
    pdf.image('%s'%img, 3,3,204 ) # les chiffres permettent de positionner l'image sur le pdf : 3mm de la gauche, 3mm du haut, et 204 mm de la gauche pour la fin de l'image
    img2=img[:-4] #supprime les 4 dernières lettres du nom du ficher, à savoir '.jpg' ou '.JPG'
    pdf.output('%s.pdf'%img2,'F') #convertie en pdf
    os.remove('%s'%img) #supprime les fichier jpg ou JPG 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-17T15:44:02.613

您可能需要使用：

```
import PIL
import PIL.Image

filename = 'filename'
im = PIL.Image.open(filename)

newfilename = 'path.pdf'
PIL.Image.Image.save(newfilename,outfile, "PDF", resoultion = 100.0) 
```

我正在使用 Windows，我使用 pip 来安装 PIL。出于某种原因，它切换到 PIL.Image.Image

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-09-17T05:46:12.243

这里有一个完整的例子：

```
import os
import PIL.Image

def img2pdf(fname):
    filename = fname
    name = filename.split('.')[0]
    im = PIL.Image.open(filename)
    if not os.path.exists('im2pdf_output'):
        os.makedirs('im2pdf_output')
    newfilename = ''.join(['im2pdf_output/',name,'.pdf'])
    PIL.Image.Image.save(im, newfilename, "PDF", resolution = 100.0)
    print("processed successfully: {}".format(newfilename))

files = [f for f in os.listdir('./') if f.endswith('.jpg')]
for fname in files:
    img2pdf(fname) 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-10-14T16:36:24.697

save的正确用法是：

```
PIL.Image.Image.save(im, newfilename, "PDF", resolution = 100.0) 
```

例子：

```
path='v:/dev/python/mooc/'
filename = path + '2016_a_milano_001.JPG'
im = PIL.Image.open(filename)
newfilename = path+ 'r.pdf'
PIL.Image.Image.save(im, newfilename, "PDF", resoultion=100.0) 
```

# android - 打开模拟器屏幕

> ID：12626655
> 
> 赞同：0
> 
> 时间：2012-09-27T17:09:41.940
> 
> 标签：android, android-emulator, android-wake-lock

我正在实现自己的闹钟，并且想要注意何时需要发出警报并且我的模拟器的显示已关闭。

我正在尝试使用我的活动的 onCreate() 中的以下代码来处理它，该代码在需要发出警报时弹出：

```
PowerManager pm = (PowerManager)mContext.getSystemService(
                                          Context.POWER_SERVICE);
PowerManager.WakeLock wl = pm.newWakeLock(
                                      PowerManager.SCREEN_DIM_WAKE_LOCK
                                      | PowerManager.ON_AFTER_RELEASE,
                                      TAG);
wl.acquire();
wl.release(); 
```

然后我用模拟器的“开关按钮”关闭显示。音乐正在播放，但我的显示器没有被唤醒。

我也尝试以这种方式做到这一点：

```
getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON); 
```

但结果是一样的。

我该如何处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T19:13:03.947

使用**[ACQUIRE_CAUSES_WAKEUP](http://developer.android.com/reference/android/os/PowerManager.html#ACQUIRE_CAUSES_WAKEUP)**标志打开屏幕。

# jquery - jQuery中没有触发Textchange事件？

> ID：12626656
> 
> 赞同：0
> 
> 时间：2012-09-27T17:09:44.750
> 
> 标签：jquery, asp.net

我有一个文本框名称 txtEmpcode。当它失去焦点时，我想显示一条警报消息。我已经为上述功能编写了 jquery，但它不起作用......

这是我的jQuery

```
$(document).ready(function(){
    var prm = Sys.WebForms.PageRequestManager.getInstance();
    //Raised before processing of an asynchronous postback starts and the postback request is sent to the server.
    prm.add_beginRequest(BeginRequestHandler);
    // Raised after an asynchronous postback is finished and control has been returned to the browser.
    prm.add_endRequest(EndRequestHandler);    
    AutoComp();//Function for autocomplete textbox        

    $("#<%=txtEmpCode.ClientID").change(function(){         
        alert("hai");
    });

}); 
```

这是我的 asp.net 文本框

```
<asp:TextBox ID="txtEmpCode" runat="server" Width="250px" ToolTip="Enter EmployeeCode" 
AutoPostBack="True"  ontextchanged="txtEmpCode_TextChanged"></asp:TextBox> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T17:11:44.600

在您跳过的第一个标志处 %>

```
$("#<%=txtEmpCode.ClientID%>").change(function(){         
        alert("hai");
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T13:00:53.920

当元素失去焦点时，您可以使用 Jquery 中的 .blur() 函数来捕获事件。例子：

```
 $(document).ready(function () {
        $('#idElement').blur(function () {
           alert('i lost the focus \o/');
        });

}); 
```

对不起英语不好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T17:12:35.863

从`ontextchanged="txtEmpCode_TextChanged"`您的`TextBox`. 或者`change`从您的 jQuery 中删除您的事件，并实现`txtEmpCode_TextChanged`. 请注意，`change`文本框的事件并不能处理所有情况。

以下是有关检测文本框中已更改文本的一些有用信息：[如何检测文本框的内容已更改](https://stackoverflow.com/questions/1481152/jquery-how-to-detect-a-textboxs-content-has-changed)

# c++ - 带有 MSVC++ 2012 的 Unicode

> ID：12626664
> 
> 赞同：1
> 
> 时间：2012-09-27T17:10:05.880
> 
> 标签：c++, visual-c++, unicode, c++11, visual-studio-2012

我知道 C++11 现在支持 unicode（std::u16string/u32string 和 u/U 前缀）。但是我究竟如何使用 Visual Studio 将 unicode 输出到终端呢？我很困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T19:18:49.760

如前所述，c++11 不提供 unicode，而仅提供固定宽度 char char16_t、char8_t char32_t 的新字符串文字，带有 u""、U"" ->NB，这已经比以前的 wchar（16 位在 Mac 上的 Win32 和 32 上）

然而，unicode 是计划的，在完全重写之前的提案之后，这应该是对 unicode 的更完整的支持：[http ://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/ n3398.html](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3398.html)

要使用使用字符串文字创建的字符串，只需使用 << 运算符。（例如对于 cout）

请注意，您可以在此处阅读对 c++11 功能的支持：[这还不是很完整，但](http://blogs.msdn.com/b/vcblog/archive/2011/09/12/10209291.aspx) 我尝试了 char16_t 和 char32_t 类型，它们已定义，但我认为这不是最终的支持，而是过渡支持。可能尚不支持字符串文字。

# java - 插件使用 GAE 不支持的类会导致运行时错误或在部署时出现

> ID：12626667
> 
> 赞同：1
> 
> 时间：2012-09-27T17:10:09.850
> 
> 标签：java, google-app-engine

如果我在我的 GAE 应用程序中使用库（jar），并且该库将编译对不在 GAE 的 jre 白名单中的类 x 的依赖，这是否会在本地运行、部署时检测到，或者我将不得不找出它通过运行时异常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T10:23:07.493

如果您的类（在源文件夹中作为 Java 源文件存在）引用不在白名单上的类，您将在编译时以及尝试部署应用程序时收到通知（编译错误）。

然而，罐子没有被分析。您只会收到有关它们运行时的通知。

# android - IllegalArgumentException 使用 Random.nextInt()

> ID：12626668
> 
> 赞同：0
> 
> 时间：2012-09-27T17:10:12.727
> 
> 标签：android, exception

我写了琐事数学应用程序。它正常启动，但在 10-20 个问题后，我收到消息“应用程序已意外停止”。这是代码。我知道它很长，但也许你可以帮忙

```
package com.example.learn2;

public class Learn extends Activity {
private Button option_1;  
private Button option_2;  
private Button option_3;  
private Button option_4;
private Button next;
private Button question;

private LinearLayout layout1;
private int[] arrayOf4Cell;

private TextView textScore;
private LinearLayout.LayoutParams params;
private int score=0;

///////////////////
private String xString;
private String yString;
private String ques;
private String correctAnswerTHE_ANSWERString;

private String a;
private String b;
private String c;
private String d;

/////////////////
private Random r;
private Random theQuestion;
private Random oneTOfour;

//////////////
private int correctAnswer;
private int correctAnswerTHE_ANSWER;

private int x;
private int y;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

     r= new Random();
     theQuestion= new Random();
     oneTOfour= new Random();

    option_1= new Button(this);
    option_2= new Button(this);
    option_3= new Button(this);
    option_4= new Button(this);
    question= new Button(this);
    next= new Button(this);
    next.setText("שאלה הבאה");

    params = new LinearLayout.LayoutParams(
            500, LayoutParams.WRAP_CONTENT);

    textScore= new TextView(this);
    arrayOf4Cell= new int[4];

    layout1 = new LinearLayout(this);

    option_1.setTextSize(10);
    option_2.setTextSize(10);
    option_3.setTextSize(10);
    option_4.setTextSize(10);

    question.setWidth(10);

    next.setTextSize(20);
    next.setGravity(Gravity.RIGHT);

    option_1.setGravity(Gravity.CENTER);
    option_2.setGravity(Gravity.CENTER);
    option_3.setGravity(Gravity.CENTER);
    option_4.setGravity(Gravity.CENTER);

    question.setGravity((Gravity.CENTER));
    question.setTextSize(20);
    question.setBackgroundColor(Color.CYAN);
    String scoreString=Integer.toString(score);
    textScore.setText(scoreString);

    ////////////////listener for each button
    option_1.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            String text=(String) option_1.getText();
            if(text.equals(correctAnswerTHE_ANSWERString)){
                Toast.makeText(Learn.this,"נכון!!", Toast.LENGTH_LONG).show();
                score++;
                String scoreString=Integer.toString(score);
                textScore.setText(scoreString);
                createAllLauout2();
            }
            else{
                Toast.makeText(Learn.this,"טעות. נסה שוב.", Toast.LENGTH_LONG).show();
                score--;
                String scoreString=Integer.toString(score);
                textScore.setText(scoreString);

            }

        }
    });

    option_2.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            String text=(String) option_2.getText();
            if(text.equals(correctAnswerTHE_ANSWERString)){
                Toast.makeText(Learn.this,"נכון!!", Toast.LENGTH_LONG).show();
                score++;
                String scoreString=Integer.toString(score);
                textScore.setText(scoreString);
                createAllLauout2();

            }
            else{
                Toast.makeText(Learn.this,"טעות. נסה שוב.", Toast.LENGTH_LONG).show();
                score--;
                String scoreString=Integer.toString(score);
                textScore.setText(scoreString);
            }

        }
    });

    option_3.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            String text=(String) option_3.getText();
            if(text.equals(correctAnswerTHE_ANSWERString)){
                Toast.makeText(Learn.this,"נכון!!", Toast.LENGTH_LONG).show();
                score++;
                String scoreString=Integer.toString(score);
                textScore.setText(scoreString);
                createAllLauout2();
            }
            else{
                Toast.makeText(Learn.this,"טעות. נסה שוב.", Toast.LENGTH_LONG).show();
                score--;
                String scoreString=Integer.toString(score);
                textScore.setText(scoreString);
            }

        }
    });

    option_4.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            String text=(String) option_4.getText();
            if(text.equals(correctAnswerTHE_ANSWERString)){
                Toast.makeText(Learn.this,"נכון!!", Toast.LENGTH_LONG).show();
                score++;
                String scoreString=Integer.toString(score);
                textScore.setText(scoreString);
                createAllLauout2();
            }
            else{
                Toast.makeText(Learn.this,"טעות. נסה שוב.", Toast.LENGTH_LONG).show();
                score--;
                String scoreString=Integer.toString(score);
                textScore.setText(scoreString);

            }

        }
    });

    layout1.setGravity(Gravity.CENTER_VERTICAL);
    layout1.setOrientation(LinearLayout.VERTICAL);
    layout1.setBackgroundColor(Color.argb(5, 102, 102, 204));
    layout1.addView(textScore);
    layout1.addView(question);
    layout1.addView( option_1);
    layout1.addView(option_2);
    layout1.addView(option_3);
    layout1.addView(option_4);  
    layout1.addView(next); 

    createAllLauout2();

    setContentView(layout1);

    next.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            createAllLauout2();

        }
    });

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_learn, menu);
    return true;
}

public void  createAllLauout2(){

    correctAnswer=oneTOfour.nextInt(4);
     correctAnswerTHE_ANSWER = r.nextInt(10);
    correctAnswerTHE_ANSWERString=Integer.toString(correctAnswerTHE_ANSWER);
     x=theQuestion.nextInt(correctAnswerTHE_ANSWER); // x in x+y
     y=correctAnswerTHE_ANSWER-x; //y in x+y

    xString=Integer.toString(x);
    yString=Integer.toString(y);
    ques=xString + "+" + yString;
    question.setText(ques);

    arrayOf4Cell[0]=correctAnswerTHE_ANSWER+3;
    arrayOf4Cell[1]=correctAnswerTHE_ANSWER*6;
    arrayOf4Cell[2]=correctAnswerTHE_ANSWER*2+4;
    arrayOf4Cell[3]=correctAnswerTHE_ANSWER*5+1;

    arrayOf4Cell[correctAnswer]=correctAnswerTHE_ANSWER; //one of the cell get the right answer

     a=Integer.toString(arrayOf4Cell[0]);
     b=Integer.toString(arrayOf4Cell[1]);
     c=Integer.toString(arrayOf4Cell[2]);
     d=Integer.toString(arrayOf4Cell[3]);

    option_1.setText(a);
    option_2.setText(b);
    option_3.setText(c);
    option_4.setText(d);

    layout1.updateViewLayout(question, params);
    layout1.updateViewLayout(option_1, params);
    layout1.updateViewLayout(option_2, params);
    layout1.updateViewLayout(option_3, params);
    layout1.updateViewLayout(option_4, params);
    layout1.updateViewLayout(textScore, params);

} 
```

}

这是日志猫：

```
09-27 16:59:06.142: D/AndroidRuntime(2314): Shutting down VM
09-27 16:59:06.152: W/dalvikvm(2314): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
09-27 16:59:06.152: E/AndroidRuntime(2314): FATAL EXCEPTION: main
09-27 16:59:06.152: E/AndroidRuntime(2314): java.lang.IllegalArgumentException
09-27 16:59:06.152: E/AndroidRuntime(2314):     at java.util.Random.nextInt(Random.java:225)
09-27 16:59:06.152: E/AndroidRuntime(2314):     at com.example.learn2.Learn.createAllLauout2(Learn.java:246)
09-27 16:59:06.152: E/AndroidRuntime(2314):     at com.example.learn2.Learn$4.onClick(Learn.java:183)
09-27 16:59:06.152: E/AndroidRuntime(2314):     at android.view.View.performClick(View.java:2408)
09-27 16:59:06.152: E/AndroidRuntime(2314):     at android.view.View$PerformClick.run(View.java:8816)
09-27 16:59:06.152: E/AndroidRuntime(2314):     at android.os.Handler.handleCallback(Handler.java:587)
09-27 16:59:06.152: E/AndroidRuntime(2314):     at android.os.Handler.dispatchMessage(Handler.java:92)
09-27 16:59:06.152: E/AndroidRuntime(2314):     at android.os.Looper.loop(Looper.java:123)
09-27 16:59:06.152: E/AndroidRuntime(2314):     at android.app.ActivityThread.main(ActivityThread.java:4627)
09-27 16:59:06.152: E/AndroidRuntime(2314):     at java.lang.reflect.Method.invokeNative(Native Method)
09-27 16:59:06.152: E/AndroidRuntime(2314):     at java.lang.reflect.Method.invoke(Method.java:521)
09-27 16:59:06.152: E/AndroidRuntime(2314):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
09-27 16:59:06.152: E/AndroidRuntime(2314):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
09-27 16:59:06.152: E/AndroidRuntime(2314):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T17:18:56.000

问题在这里：

```
x=theQuestion.nextInt(correctAnswerTHE_ANSWER); 
```

`correctAnswerTHE_ANSWER`什么时候`0`。

你不能打电话`nextInt(0)`。查看[Random#nextInt()`](http://developer.android.com/reference/java/util/Random.html#nextInt%28%29)。

* * *

快速解决方法是检查：

```
if(correctAnswerTHE_ANSWER == 0)
    x = 0;
else
    x=theQuestion.nextInt(correctAnswerTHE_ANSWER); 
```

但我不确定你在做什么，所以希望你能找到更好的解决方案。

# php - 为 SQL 数据检索简化 PHP

> ID：12626670
> 
> 赞同：1
> 
> 时间：2012-09-27T17:10:17.407
> 
> 标签：php, mysql, sql

我是 PHP 和 SQL 查询的新手，但正在努力学习。无论如何，我有以下代码，我相信会有一种更简单的方法（希望我打算在一年中的每一天而不是一个月中做同样的事情）。

我当前的代码是；

```
//Get jan power consumption
$janquery = mysql_query("SELECT SUM(kw*tdsecs) FROM data WHERE year(time) = year(CURDATE()) AND month(time) = 1");
$janresult = mysql_fetch_array($janquery);
$jankwm = $janresult[0] / 60;
$jankwh = round($jankwm / 60,2);

//Get feb power consumption
$febquery = mysql_query("SELECT SUM(kw*tdsecs) FROM data WHERE year(time) = year(CURDATE()) AND month(time) = 2");
$febresult = mysql_fetch_array($febquery);
$febkwm = $febresult[0] / 60;
$febkwh = round($febkwm / 60,2); 
```

以此类推……

```
$values=array(
    "Jan" => $jankwh,
    "Feb" => $febkwh,
    "Mar" => $markwh,
    "Apr" => $aprkwh,
    "May" => $maykwh,
    "Jun" => $junkwh,
    "Jul" => $julkwh,
    "Aug" => $augkwh,
    "Sep" => $sepkwh,
    "Oct" => $octkwh,
    "Nov" => $novkwh,
    "Dec" => $deckwh
); 
```

我想避免有 12 个查询，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T17:12:58.583

```
SELECT 
    month(time) as `month`, 
    SUM(kw*tdsecs) as `sum`
FROM data 
WHERE year(time) = year(CURDATE())
group by month(time)
order by month(time) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T17:12:15.103

```
SELECT month(time), SUM(kw*tdsecs) FROM data 
WHERE year(time) = year(CURDATE()) group by month(time); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T17:13:04.943

```
 mysql_query("SELECT month(time),SUM(kw*tdsecs) FROM data WHERE
  year(time) = year(CURDATE()) AND month(time) in
  (1,2,3,4,5,6,7,8,9,10,11,12) group by month(time)") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T17:14:44.400

一个简单的解决方案（不是最好的）是循环几个月并将结果存储在一个数组中：

```
for($month=1; $month<=12; $month++) {
  $query = mysql_query(
    "SELECT SUM(kw*tdsecs) FROM data 
     WHERE year(time) = year(CURDATE()) AND month(time) = $month");
  $result = mysql_fetch_array($query);
  $kwm[$month] = $result[0] / 60;
  $kwh[$month] = round($kwm[$month] / 60,2);
} 
```

# objective-c - Apple 审批团队的崩溃日志

> ID：12626672
> 
> 赞同：1
> 
> 时间：2012-09-27T17:10:19.127
> 
> 标签：objective-c, ios, xcode, cocoa, crash

Apple 拒绝了我的应用程序，因为它崩溃了，我找不到知道问题出在哪里的方法。他们说崩溃发生在装有 iOS6 的 iPhone 4 上。

我已经使用 Xcode 4.4 和 iOS 5.1 构建了存档。我已经升级到 Xcode 4.5 和 iOS 6。正如您将看到的，Xcode 不会识别堆栈跟踪的每一行上的符号；特别是缺少系统功能名称，可能是由于更新而不是我的计算机上的版本；我不知道。

我无法重现这次崩溃，我没有 iPhone 4，只有 3GS，没有错误。

这是日志：

```
Incident Identifier: 23FCC6BC-FB56-4681-8254-E72A01891A80
CrashReporter Key: 1378004e4baa9919d5598a6dec7f08d687552155
Hardware Model: xxx
Process: Myapp [598]
Path: /var/mobile/Applications/31F1CD56-357C-4969-8DBA-F19E7D2AF638/Myapp.app/Myapp
Identifier: Myapp
Version: ??? (???)
Code Type: ARM (Native)
Parent Process: launchd [1]

Date/Time: 2012-09-26 14:40:48.221 -0700
OS Version: iOS 6.0 (10A403)
Report Version: 104

Exception Type: EXC_CRASH (SIGABRT)
Exception Codes: 0x0000000000000000, 0x0000000000000000
Crashed Thread: 0

Last Exception Backtrace:
0 CoreFoundation 0x3403129e __exceptionPreprocess + 158
1 libobjc.A.dylib 0x3380397a objc_exception_throw + 26
2 CoreFoundation 0x34031158 +[NSException raise:format:arguments:] + 96
3 Foundation 0x38ff62aa 0x38f86000 + 459434
4 UIKit 0x36c55776 0x36b66000 + 980854
5 UIKit 0x36c54fca -[UIViewController presentViewController:withTransition:completion:] + 3390
6 CoreFoundation 0x340349c0 0x33f6f000 + 809408
7 CoreFoundation 0x33f8bfe6 0x33f6f000 + 118758
8 UIKit 0x36d7372e -[_UIDelayedPresentationContext finishDelayedPresentation:] + 182
9 GameKit 0x32c1dd28 __41-[GKRemoteViewController setupRemoteView]_block_invoke_0327 + 20
10 libdispatch.dylib 0x3840a11a _dispatch_call_block_and_release + 6
11 libdispatch.dylib 0x384094b2 _dispatch_client_callout + 18
12 libdispatch.dylib 0x3840adc6 0x38408000 + 11718
13 CoreFoundation 0x34004f36 __CFRunLoopRun + 1286
14 CoreFoundation 0x33f77eb8 CFRunLoopRunSpecific + 352
15 CoreFoundation 0x33f77d44 0x33f6f000 + 36164
16 GraphicsServices 0x34ce02e6 0x34cdb000 + 21222
17 UIKit 0x36bbd2fc UIApplicationMain + 1116
18 Crossibus 0x0003cc96 main (main.m:16)
19 Crossibus 0x0003cc4c start + 36

Thread 0 name: Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0 libsystem_kernel.dylib 0x32d00350 __pthread_kill + 8
1 libsystem_c.dylib 0x380db11e pthread_kill + 54
2 libsystem_c.dylib 0x3811796e abort + 90
3 libc++abi.dylib 0x38c0dd4a abort_message + 70
4 libc++abi.dylib 0x38c0aff4 default_terminate() + 20
5 libobjc.A.dylib 0x33803a74 _objc_terminate() + 144
6 libc++abi.dylib 0x38c0b078 safe_handler_caller(void (*)()) + 76
7 libc++abi.dylib 0x38c0b110 std::terminate() + 16
8 libc++abi.dylib 0x38c0c50e __cxa_throw + 118
9 libobjc.A.dylib 0x338039ba objc_exception_throw + 90
10 CoreFoundation 0x34031158 +[NSException raise:format:arguments:] + 96
11 Foundation 0x38ff62aa -[NSAssertionHandler handleFailureInMethod:object:file:lineNumber:description:] + 86
12 UIKit 0x36c55776 -[UIWindowController transition:fromViewController:toViewController:target:didEndSelector:] + 166
13 UIKit 0x36c54fca -[UIViewController presentViewController:withTransition:completion:] + 3390
14 CoreFoundation 0x340349c0 __invoking___ + 64
15 CoreFoundation 0x33f8bfe6 -[NSInvocation invoke] + 282
16 UIKit 0x36d7372e -[_UIDelayedPresentationContext finishDelayedPresentation:] + 182
17 GameKit 0x32c1dd28 __41-[GKRemoteViewController setupRemoteView]_block_invoke_0327 + 20
18 libdispatch.dylib 0x3840a11c _dispatch_call_block_and_release + 8
19 libdispatch.dylib 0x384094b4 _dispatch_client_callout + 20
20 libdispatch.dylib 0x3840adc6 _dispatch_main_queue_callback_4CF$VARIANT$up + 222
21 CoreFoundation 0x34004f36 __CFRunLoopRun + 1286
22 CoreFoundation 0x33f77eb8 CFRunLoopRunSpecific + 352
23 CoreFoundation 0x33f77d44 CFRunLoopRunInMode + 100
24 GraphicsServices 0x34ce02e6 GSEventRunModal + 70
25 UIKit 0x36bbd2fc UIApplicationMain + 1116
26 Crossibus 0x0003cc96 main (main.m:16)
27 Crossibus 0x0003cc4c start + 36

Thread 1 name: Dispatch queue: com.apple.root.default-priority
Thread 1:
0 libsystem_kernel.dylib 0x32d00d98 __workq_kernreturn + 8
1 libsystem_c.dylib 0x380b25e8 pthread_workqueue_addthreads_np + 44
2 libdispatch.dylib 0x38417eb0 _dispatch_queue_wakeup_global_slow + 72
3 libdispatch.dylib 0x384097da _dispatch_wakeup$VARIANT$up + 106
4 libdispatch.dylib 0x38417a24 _dispatch_queue_push_list_slow2 + 16
5 libxpc.dylib 0x3742a820 _xpc_connection_mach_event + 828
6 libdispatch.dylib 0x38419df4 _dispatch_mach_msg_invoke$VARIANT$up + 120
7 libdispatch.dylib 0x3840995a _dispatch_queue_drain$VARIANT$up + 82
8 libdispatch.dylib 0x3841a06a _dispatch_mach_invoke$VARIANT$up + 150
9 libdispatch.dylib 0x38418212 _dispatch_root_queue_drain + 190
10 libdispatch.dylib 0x384183b4 _dispatch_worker_thread2 + 80
11 libsystem_c.dylib 0x380b2a0e _pthread_wqthread + 358
12 libsystem_c.dylib 0x380b28a0 start_wqthread + 4

Thread 2 name: Dispatch queue: com.apple.libdispatch-manager
Thread 2:
0 libsystem_kernel.dylib 0x32cf0648 kevent64 + 24
1 libdispatch.dylib 0x384194ec _dispatch_mgr_invoke + 792
2 libdispatch.dylib 0x3840bdf4 _dispatch_mgr_thread$VARIANT$up + 32

Thread 3 name: Dispatch queue: com.apple.uikit._UIViewServiceXPCProxy 0x1ededbb0 target:<_UIQueueRedirectingProxy: 0x1ed77750; target: <_UIViewServiceFencingControlProxy: 0x1ed82fc0; target: <_UIViewServiceImplicitAnimationDecodingProxy: 0x1ed678e0; target: <_UIObjectArgumentReplacingProxy: 0x1ed6ef60; target: <_UIStrongToWeakAdapter: 0x1edae420; target: <GKRemoteAuthenticateViewController: 0x1ed6c490>>>>; suspension count: 0>; queue: 0x3bebd580 (com.apple.main-thread)>
Thread 3:
0 libobjc.A.dylib 0x33800f2a objc_release + 10
1 XPCObjects 0x37d9fc66 __destroy_helper_block_133 + 18
2 libsystem_blocks.dylib 0x3427bab0 _Block_release + 220
3 libxpc.dylib 0x374256c4 _xpc_connection_call_reply + 28
4 libdispatch.dylib 0x38409996 _dispatch_queue_drain$VARIANT$up + 142
5 libdispatch.dylib 0x38409890 _dispatch_queue_invoke$VARIANT$up + 32
6 libdispatch.dylib 0x38418212 _dispatch_root_queue_drain + 190
7 libdispatch.dylib 0x384183b4 _dispatch_worker_thread2 + 80
8 libsystem_c.dylib 0x380b2a0e _pthread_wqthread + 358
9 libsystem_c.dylib 0x380b28a0 start_wqthread + 4

Thread 4 name: WebThread
Thread 4:
0 libsystem_kernel.dylib 0x32cefeb4 mach_msg_trap + 20
1 libsystem_kernel.dylib 0x32cf0048 mach_msg + 36
2 CoreFoundation 0x34006040 __CFRunLoopServiceMachPort + 124
3 CoreFoundation 0x34004d9e __CFRunLoopRun + 878
4 CoreFoundation 0x33f77eb8 CFRunLoopRunSpecific + 352
5 CoreFoundation 0x33f77d44 CFRunLoopRunInMode + 100
6 WebCore 0x34d5ba70 RunWebThread(void*) + 440
7 libsystem_c.dylib 0x380bd30e _pthread_start + 306
8 libsystem_c.dylib 0x380bd1d4 thread_start + 4

Thread 5:
0 libsystem_kernel.dylib 0x32d00d98 __workq_kernreturn + 8
1 libsystem_c.dylib 0x380b2cf6 _pthread_workq_return + 14
2 libsystem_c.dylib 0x380b2a12 _pthread_wqthread + 362
3 libsystem_c.dylib 0x380b28a0 start_wqthread + 4

Thread 0 crashed with ARM Thread State (32-bit):
r0: 0x00000000 r1: 0x00000000 r2: 0x00000000 r3: 0x3be7e534
r4: 0x00000006 r5: 0x3be7eb88 r6: 0x1ed61194 r7: 0x2fdc4a14
r8: 0x1ed61170 r9: 0x00000300 r10: 0x1ed65e20 r11: 0x36ffaa2f
ip: 0x00000148 sp: 0x2fdc4a08 lr: 0x380db123 pc: 0x32d00350
cpsr: 0x00070010 
```

您能否提供有关问题所在或如何确定问题所在的任何见解？

编辑：我想我已经发现，这是 Game Center 和 IOS 6 的问题。“authenticateWithCompletionHandler”方法已被弃用并使其崩溃。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T17:51:11.133

1) 你的 3GS 运行良好并且运行 iOS 6，对吗？

2) 如果您出于某种原因不想完全切换到 Xcode4.5，则无需完全切换到 Xcode4.4.1，只需将其与 Xcode4.4.1 并排安装，然后使用它在 Retina iPhone 模拟器中测试和运行您的应用程序.

3）如果您仍然无法崩溃，那么我将大胆猜测这是您的问题：

```
5 UIKit 0x36c54fca -[UIViewController presentViewController:withTransition:completion:] + 3390 
```

呈现的ViewController 是保留在强变量中（如果使用 ARC），还是保留在呈现的 ViewController 中的保留属性中？如果不是这样，但是，没有办法确定它是否能解决问题。

* * *

在这里建立积分的一个很好的理由是能够为答案添加赏金 - 我相信 50 分是最低要求。假设您对 Android 非常了解（鉴于姓氏，不会让您在 iOS 领域成为朋友），现在回答几个问题并获得一些分数。

有了赏金，您也许可以通过构建应用程序的 Ad Hoc 版本来让某人在他们的手机上测试您的应用程序（但 Provisioning H*ll 等待:-()

# asp.net - 检索存储在数据库中的图像并保存到文件

> ID：12626678
> 
> 赞同：0
> 
> 时间：2012-09-27T17:10:41.217
> 
> 标签：asp.net, sql-server, image

我有一个客户要求能够从 Sql Server Db 中检索图像并转身并将其保存到他计算机上的目录中。他希望能够通过 asp.net 网页做到这一点。我能够从图像中检索图像作为字节数组，但不知道如何获取该图像并将其作为文件保存到目录中。有人对如何做到这一点有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T17:13:58.700

你可以试试`Save Method`

```
 MemoryStream memoryStream = new MemoryStream((byte[])YourDataTable.Rows[0]["ImageData"]);
    Picturebox picturebox = new Picturebox();
    picturebox.Image = Image.FromStream(memoryStream);
    picturebox.Image.Save("...YourPath", System.Drawing.Imaging.ImageFormat.Jpeg) 
```

# android - 直到方向改变，活动才开始

> ID：12626679
> 
> 赞同：1
> 
> 时间：2012-09-27T17:10:42.260
> 
> 标签：android, android-intent

我正在研究冰淇淋三明治，在我的应用程序中单击按钮时，我通过使用 startActivity 并传递意图来启动一个新活动，但在我更改设备方向之前，该活动不会启动。在改变方向时，活动会自动开始。

就在开始这项活动之前，我使用了 android 键盘。我为我的应用程序中的所有活动添加了 android:configchanges=orientation|uimode。

无法共享代码。一些输入会有很大帮助。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-27T18:31:35.793

您是否尝试在新活动的 onCreate 方法中使用 logcat？那可能对你有很大帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-27T18:34:46.947

您的活动可能会立即开始，并且在方向改变时会以不同的方式显示。深入挖掘您的日志或添加更多日志记录，以便您可以在第一次启动时查看您的应用程序在哪里遇到问题。

# r - 在ggplot2中定位水平箱线图

> ID：12626687
> 
> 赞同：12
> 
> 时间：2012-09-27T17:11:19.050
> 
> 标签：r, ggplot2, boxplot

我正在尝试在 ggplot2 中制作一个带有水平箱线图的图，您只能通过使用 coord_flip() 来完成。我还尝试将箱线图垂直隔开以将某些集合组合在一起。我已经读过这种事情推荐使用刻面，但这与 coord_flip() 不兼容，正如我们在这里看到的那样：[ggplot2: boxplot with facet_grid and free scale](https://stackoverflow.com/questions/10735539/ggplot2-boxplot-with-facet-grid-and-free-scale)。所以我想知道是否可以使用空白级别来创建空格。这是我到目前为止所做的事情：

```
d <- diamonds
library("ggplot2")
levels(d$cut) <- list(A="Fair", B="Good", "-", C="Very Good", D="Ideal", E="Premium")
p = ggplot(d, aes(x=cut, y=depth))
p + 
    geom_boxplot(color="black", size=0.2) + 
    theme_bw() + 
    scale_x_discrete(breaks = c("A", "B", "-", "C", "D", "E"), drop=FALSE) +
    coord_flip()

ph = 2.75
pw = 4
ggsave("plot.png", height=ph, width=pw) 
```

如您所见，如果我在其中创建一个带有“-”的空白级别并将其包含在 scale_x_discrete() 中，那么我会以某种方式得到一个空白行。问题是我只能添加一个空格。有人对如何在这些水平箱形图之间添加空格有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-01-11T11:20:07.353

这是一种可以让您添加更多空白级别的方法：

```
d <- diamonds
levels(d$cut) <- list(A="Fair", B="Good", " "="space1", C="Very Good", D="Ideal", "  "="space2", E="Premium")
ggplot(d, aes(x=cut, y=depth)) +
  geom_boxplot(color="black", size=0.2) + 
  theme_bw() + 
  scale_x_discrete(breaks = c("A", "B", " ", "C", "D", "  ", "E"), drop=FALSE) +
  coord_flip() 
```

不过，这也会在垫片上留下刻度线：

[![带有刻度线的绘图](../Images/02b51a2562b35ec6fdd07382c5d708a5.png)](https://i.stack.imgur.com/3nA3Q.png)

删除所有刻度很简单，只需添加：

```
+ theme(axis.ticks.y = element_line(linetype=0)) 
```

[![没有刻度线的绘图](../Images/be8c5aa9392e172da144b978c2f2de68.png)](https://i.stack.imgur.com/2l9LB.png)

但是，如果您只想删除垫片的刻度线，至少有一种方法（我相信还有其他方法）是使用自定义函数来完成：

```
f <- function(x) {
  x[!x %in% c("A", "B", "C", "D", "E")] <- NA
  x
}

ggplot(d, aes(x=cut, y=depth)) +
  geom_boxplot(color="black", size=0.2) + 
  theme_bw() + 
  scale_x_discrete(breaks=f, drop=FALSE) +
  coord_flip() 
```

[![带有一些刻度线的绘图](../Images/ee1063501cc7f26aaa74b4367b671ba9.png)](https://i.stack.imgur.com/Gp6Gy.png)

# jquery - Fancybox 错误：上一个和下一个区域在悬停时有黑色背景

> ID：12626689
> 
> 赞同：3
> 
> 时间：2012-09-27T17:11:27.910
> 
> 标签：jquery, fancybox, fancybox-2

我已经在我正在构建的站点上安装了 Fancybox 2 的不受干扰的版本 - 除了将鼠标悬停在上一个、下一个和关闭区域上时，它都可以正常工作，黑色背景出现在图像上。

我对标准 Fancybox 所做的唯一修改是对淡入速度等的控制

你可以在[这里看到页面](http://www.alexandermicklewright.com/pictures/)

如果您单击任何图像，您将在将鼠标悬停在下一个/上一个/关闭按钮上时看到问题。

我在另一个网站上用过这个，没有遇到过这个问题，所以看不出是什么问题。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T17:50:24.090

好吧，这不是花式错误，而是用户生成的行为。

该黑色区域实际上是 fancybox 中的一个链接，用于移动到画廊的下一个/上一个元素并变为黑色，因为您的[style.css](http://www.alexandermicklewright.com/_css/style.css)文件中有此 CSS 规则（第 25 行）：

```
a:link {
    color: #000000;
    text-decoration: none;
} 
```

一般来说，将通用 CSS 规则应用于标记元素并不是一个好主意，因为它们会影响整个站点（就像在这种情况下一样），请使用特异性，例如：

```
#parent_container a:link {
    color: #000000;
    text-decoration: none;
} 
```

或者

```
a.this_class:link {
    color: #000000;
    text-decoration: none;
} 
```

# asp.net - .aspx 文件在 IIS 网站上不起作用

> ID：12626690
> 
> 赞同：0
> 
> 时间：2012-09-27T17:11:29.873
> 
> 标签：asp.net, .net, iis

我有一个包含很多 .aspx 文件的大解决方案，基本上它是我整个服务器的一个大 sln 文件

我想在我的 IIS 服务器中添加一个网站，该网站包含在根站点文件夹内的子目录中，例如：

my-tools.com 物理路径是 D:/MyWeb <-- 运行良好

我添加了一个辅助站点，与名为 mysite 的上层站点无关，如下所示：

mysite.my-tools.com 它的路径 D:/MyWeb/MySite/

如果我尝试访问 mysite.my-tools.com/M_Index.aspx 文件，它会给我一个错误，告诉我找不到它，但是，当我尝试从同一目录查看 .jps 文件时（例如 mysite.my-tools .com/test.jpg) 它只返回 find。

重要的是要告诉所有页面共享相同的解决方案，我在这里做什么以及为什么它不起作用？谁能告诉我？

多谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T18:04:49.433

像您一样将文件夹分开是朝着正确方向迈出的一步。下一步是将 IIS 配置为指向该单独的文件夹。那么您需要在您的 DNS 主机上为您的子域创建一个 DNS 条目。“子域.domain.com”。您将创建一个新站点，因此您可以使用相同的 IP 地址，只要您为每个站点添加正确的主机标头。

# ios - 在通知中使用 pushwoosh 发送数据

> ID：12626693
> 
> 赞同：1
> 
> 时间：2012-09-27T17:11:31.983
> 
> 标签：ios, push-notification, apple-push-notifications, pushwoosh

我使用 pushwoosh SDK 配置我的 ios 应用程序，它非常简单并且工作正常。现在我想发送例如`id`一个产品来显示我何时收到推送或任何其他想法，但用户看不到这些数据。我尝试`page`但不工作。

Q1：我该怎么做？Q2：这是什么`page`？

编辑：我刚刚找到了 Rich pushes ( `page`) 的文档：[link](http://www.pushwoosh.com/programming-push-notification/advanced-form-tutorial/)，我发送了一个带有 title=test 的推送通知，并且一个`page`女巫包含一个 href 到 google ，但在`onPushReceived: withNotification: onStart:`功能上这是接收到的推送的字典的描述：

```
{
aps =     {
    alert = test;
    sound = default;
};
h = 774;
p = x;
} 
```

如我所见，774 是在推送消息中发送的页面的 id，好的，我可以使用它，但我怎样才能获取该页面的内容（网络服务？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T10:40:52.027

您可以通过远程 API 请求发送您的自定义数据。目前您无法通过 Web 表单执行此操作。

至于远程 API，它非常简单。请参阅此指南：

[http://www.pushwoosh.com/programming-push-notification/pushwoosh-push-notification-remote-api/#PushserviceAPI-Method%2Fmessages%2Fcreate](http://www.pushwoosh.com/programming-push-notification/pushwoosh-push-notification-remote-api/#PushserviceAPI-Method%2Fmessages%2Fcreate)

# c - 如何强制部分写入来测试网络服务器

> ID：12626694
> 
> 赞同：5
> 
> 时间：2012-09-27T17:11:38.913
> 
> 标签：c, sockets, tcp

我有一个使用非阻塞套接字编写的事件驱动服务器（请求响应协议 - HTTP 之类的）。我通过编写一个客户端来测试部分读取，该客户端每隔几秒就以离散块的形式发送请求。如何测试部分写入，即我需要写入 100 个字节，然后发送仅写入 10 个字节的调用返回。

我正在编写基于 perl 的客户端。这是通过 SSL 进行的，但就这个问题而言，我可以在 TCP 上进行部分写入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T18:47:48.683

尝试减小输出缓冲区的大小：

```
 err = setsockopt(fd, SOL_SOCKET, SO_SNDBUF, 1) 
```

这应该使发送输出仅是缓冲区的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T17:51:12.010

使用 TCP 流控制 - 让您的客户端非常缓慢地从套接字读取，因此发送方（服务器）套接字发送缓冲区会填满数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T01:22:13.373

非常快速地写入大量数据。

使输出缓冲区非常小（如 Jan 所建议的）

或者

创建自己的发送函数

例如

```
ssize_t mysend(int sockfd, const void *buf, size_t len, int flags)
{
    int shortlen = len - 100 > 0 ? len - 100; len
    return send(sockfd, buf, shortlen, flags);
} 
```

除非发送 < 100 字节，否则它将始终发送 100 字节短。否则，如果可以的话，它会发送你给它的东西。一旦您确认您的部分发送处理工作正常，将调用 mysend 更改回普通发送并从您的 hackary 代码中删除 mysend。

# asp.net - If-Modified-Since IE9 传递的 HTTP 标头包含长度？

> ID：12626699
> 
> 赞同：6
> 
> 时间：2012-09-27T17:12:07.757
> 
> 标签：asp.net, http, caching, internet-explorer-9, last-modified

### 请澄清`If-Modified-Since`IE9 传递的这个奇怪的标头

在我的 ASP.NET 4.0 Web 应用程序中，我有一个通用处理程序 (.ashx)，它为存储在数据库中的图像提供服务。为了提高效率，我正在处理一些与缓存相关的标头并传递缓存信息。

我在尝试解析`If-Modified-Since`标头内容时经常遇到 DateTime 解析错误，通常来自 IE9。原来它正在发送这样的东西：

> 格林威治标准时间 2011 年 11 月 28 日星期一 16:34:52；长度=8799

我通过使用正则表达式去除最后一部分来处理这个问题。但我很好奇：它指的是什么长度，它有什么用？它是请求 URL 的缓存数据的大小吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T20:02:43.427

这似乎是头字段的旧 Netscape 扩展（参见[关于 http-wg 的古老讨论](http://www.hpl.hp.com/personal/ange/archives/archives-95/http-wg-archive/1024.html)）；即使它实际上似乎违反了[HTTP/1.0](http://www.w3.org/Protocols/HTTP/1.0/spec.html#If-Modified-Since)和[HTTP/1.1](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.25)规范（这个想法（在功能上）被 ETag 标头取代）。不知道 IE9 是否/为什么发送它以及在什么特定条件下发送它（我猜只有缓存标头的特定组合会触发它）。

我想最好的解决方案是在分号之后删除任何内容，这通常在 HTTP 中用于分隔标头中的扩展参数（例如[，参见 Accept 标头](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.1)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T20:06:13.967

根据Squid 代理邮件列表上的一篇[旧帖子：](http://www.squid-cache.org/mail-archive/squid-users/200307/0122.html)

> If-Modified-Since 的长度参数是 HTTP/1.0 的 Netscape 扩展，旨在提高 If-Modified-Since 的准确性，以防文档在同一秒内更新两次。
> 
> HTTP/1.1 通过 ETag 标头和 If-None-Match 以更好的方式解决了同样的问题。

我猜 IE 在某个时候调整了这个扩展并将它留在里面。

# php - 只允许在 Codeigniter 中看到路由中指定的 URL

> ID：12626700
> 
> 赞同：3
> 
> 时间：2012-09-27T17:12:12.133
> 
> 标签：php, codeigniter, routes

如果我有一个名为articles 的控制器，它有一个名为view_articles 的方法，用户可以输入[http://example.com/articles/view_articles/some-post](http://example.com/articles/view_articles/some-post)并让它返回一个页面。

我已将路线指定为[http://example.com/article/post-name](http://example.com/article/post-name)。我怎样才能使它只有在路由中指定的 URL 是可见的？有没有办法让文章/view_articles/some-post 显示 404 而不是显示与路由 URL 相同的页面？

我正试图防止出于 SEO 目的的重复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T17:20:40.787

您始终可以通过在`routes.php`文件中正确定义路由来将默认路由设置为 404 页面：

```
$routes['article/(:any)'] = 'articles/view_articles/$1';

$routes['(:any)'] = 'main/e404'; 
```

正如 CodeIgniter 用户指南所述：

> 路由将按照它们定义的顺序运行。较高的路线总是优先于较低的路线。

因此，您基本上可以在文件开头定义所有您想看到的内容，并在最后一行阻止其他所有内容。

至于您的主要（可以是任何其他）控制器的 404 方法 -

```
function e404() {
    show_404();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T17:48:36.620

如果URI 包含第二段，则用作[URI 类](http://codeigniter.com/user_guide/libraries/uri.html)`$this->uri->segment(n)`的一部分，以将流量重定向到您的路由。`view_articles``view_articles`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-25T23:33:43.343

我已经以其他棘手的方式做到了，首先你应该在 sys/core/Controller.php 的 __construct 函数中添加一些代码，你可以通过这段代码检查请求的 url 是否在路由中

```
if(!isset($this->router->routes[uri_string()])){
    show_404(); // Or whatever you want ...
} 
```

# python - 关于提供的绑定数量的 Python sqlite3 错误

> ID：12626706
> 
> 赞同：2
> 
> 时间：2012-09-27T17:12:49.283
> 
> 标签：python, database, sqlite

我敢肯定这已经被问过，并且以前回答过，但是要么我很愚蠢，要么没有一个答案对我有用。也许我只是不明白。但是，这就是问题所在；我得到了这个类：

```
import sqlite3

class User:
   def __init__(self, name, age):
        self.name = name
        self.age = age

   def saveToDatabase(self):
        connection = sqlite3.connect("users.db")
        cur = connection.cursor()

        cur.execute("DROP TABLE IF EXISTS users")
        cur.execute("CREATE TABLE users (name TEXT PRIMARY KEY, age INTEGER)")
        cur.execute("INSERT OR REPLACE INTO users VALUES (?,?)", (self.name, self.age))

        connection.commit()
        connection.close()

    @staticmethod
    def printUserFromDatabase(name):
        connection = sqlite3.connect("users.db")
        cur = connection.cursor()

        cur.execute("SELECT * FROM users WHERE name=?", name)
        print(cur.fetchone())

        connection.close() 
```

它可以工作，创建了数据库，我可以向其中添加用户，但是当我尝试从数据库中打印用户时，会发生这种情况：

```
>>> tom = User("Tom", 24)
>>> tom.saveToDatabase()
>>> User.printUserFromDatabase("Tom")
Traceback (most recent call last):
  File "<pyshell#7>", line 1, in <module>
    User.printUserFromDatabase("Tom")
  File "C:\Users\Markus\Desktop\foo\foo.py", line 25, in printUserFromDatabase
    cur.execute("SELECT * FROM users WHERE name=?", name)
sqlite3.ProgrammingError: Incorrect number of bindings supplied. The current statement uses 1, and there are 3 supplied.
>>> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T17:15:20.650

因为 name 是可迭代的，它试图解压它......把它放在一个只有自己修复的元组中

```
cur.execute("SELECT * FROM users WHERE name=?", (name,)) 
```

# c++ - 为什么派生类调用基类的纯虚函数时g ++不抱怨？

> ID：12626709
> 
> 赞同：5
> 
> 时间：2012-09-27T17:12:57.923
> 
> 标签：c++, linker, g++, ld, pure-virtual

我有`Base`一个纯虚函数的类`f()`。另一个类`Derived`派生自`Base`. 我`f()`从内部呼叫`Derived`。并且使用 g++，我从链接器中得到一个错误。

```
[agnel@dooku tmp]$ g++ pure_virtual_function_call.cpp 
/tmp/ccGQLHi4.o: In function `Derived::f()':
pure_virtual_function_call.cpp:(.text._ZN7Derived1fEv[_ZN7Derived1fEv]+0x14): undefined reference to `VirtualBase::f()'
collect2: error: ld returned 1 exit status 
```

在我看来，错误是由链接器捕获的。为什么编译器没有报告这个错误？为什么把它留给链接器？

这是代码：

```
#include <iostream>

using namespace std;

class VirtualBase {
public:
    virtual void f() = 0;
};

class Derived : public VirtualBase {
public:
    void f(){
        VirtualBase::f();
        cout << "Derived\n" ;
    }
};

int main(){
    Derived d;
    d.f();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-27T17:17:10.177

Because pure virtual functions can have definitions and, if they do, you are allowed to call them non-virtually using the syntax `VirtualBase::f()`.

The compiler has no way to tell whether you intend the function to be defined or not, and so the error can only be detected by the linker.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-27T17:15:31.143

调用纯虚函数不是错误。调用任何没有定义的函数都是错误的。纯虚函数可以有定义。

# c - 共享内存未分配？

> ID：12626715
> 
> 赞同：1
> 
> 时间：2012-09-27T17:13:25.680
> 
> 标签：c, shared-memory

我试图根据一个`shmsz`总是 8 的倍数的变量分配一些共享内存。在大多数情况下，它是 8 或 16。

使用以下代码：

```
// allocate shared memory
if ((shmid = shmget(IPC_PRIVATE, shmsz, IPC_CREAT | 0666)) < 0) {
  printf("Could not allocate shared memory.\n");
  exit(1);
} 
```

这曾经像一个魅力。但是现在，我*总是*收到错误消息并让我的程序退出。

**编辑**：`errno()`显示“总线错误：10”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T15:29:54.060

有时，当该共享内存中存在访问冲突（例如尝试在您具有只读权限的共享内存中写入）时，该进程会收到 SIGSEGV 或[SIGBUS](http://en.wikipedia.org/wiki/SIGBUS)。

在您的情况下，当您使用 0666 创建它时，这种情况只有一种可能的情况：您是否尝试从该共享内存执行代码？

# three.js - three.js 中的 Alpha 通道不一致

> ID：12626716
> 
> 赞同：7
> 
> 时间：2012-09-27T17:13:25.290
> 
> 标签：three.js

我正在使用*平面、拉伸样条线*和*圆柱几何体*构建教育工具。平面有一个纹理贴图，其余的要么是基本材质要么是 Lambert 材质。

*   唯一贴图平面上的纹理贴图，它确实有一个 alpha 通道。
*   纹理贴图已被测试为 .GIF 和 .PNG
*   **所有对象都有“透明：真”**
*   renderer = new THREE.WebGLRenderer( {antialias:true} );

注意：这与以下链接中列出的完全相同的问题。它还没有解决，我的代表还不够高，无法发表评论。

[在 three.js 中，alpha 通道工作不一致](https://stackoverflow.com/questions/10857233/in-three-js-alpha-channel-works-inconsistently)

正如 mmaclaurin 所指出的，这可能是基于绘制顺序和相机位置的变化。我正在使用 THREE.TrackballControls 并将相机移动限制在两个轴上。

添加或删除线框的 BasicMaterial 不会改变问题。

**感谢您花时间阅读本文以及您可以提供的任何帮助！**

平面对象示例：

```
var T4map = new THREE.ImageUtils.loadTexture( 'medium_T4.png' );
    var T4Material = new THREE.MeshBasicMaterial( { opacity: .96, transparent:true, map: T4map } );
    var T4Geometry = new THREE.PlaneGeometry(810, 699, 10, 10);
    var T4 = new THREE.Mesh(T4Geometry, T4Material);
    T4.position.y = -CNspacing;
    T4.doubleSided = true;
    scene.add(T4); 
```

问题最明显的拉伸样条几何示例：

```
var mesh = THREE.SceneUtils.createMultiMaterialObject( geometry, [
new THREE.MeshLambertMaterial( { color: 0xaaff00, opacity: 0.5, transparent: true } ),           
      mesh.position.set( x, y, z );
      mesh.scale.set( s, s, s );
      parent.add( mesh ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T02:28:10.100

尝试玩弄`depthTest`. 通常这会有所帮助：

```
new THREE.MeshBasicMaterial( { side:THREE.BackSide,map:texture,transparency:true, opacity:0.9, depthWrite: false, depthTest: false }); 
```

还有许多与您的主题相关的其他问题，例如：[透明错误](https://stackoverflow.com/questions/11165345/three-js-webgl-serious-bug-of-transparent-planes-hiddening-other-planes-behind/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-01T08:24:32.680

刚要评论，但太长了：

标记为 transparent = true 的对象是根据其质心排序的画家，并从前向后绘制，以使透明度层大部分正确。确保你的 mesh.geometries 在添加它们之前应用了正确的 computeBoundingBox() 和 computeBoundingSphere() ......如果这不能解决你的问题，然后尝试在你的材料上使用 material.alphaTest = 0.5 .. 这适用于大部分是开/关 alpha 的东西……比如蒙版……但是如果你的纹理中有从 0 到 1 的平滑透明度渐变，你可能会看到发生 alpha 测试阈值的边缘。

# android - 奇怪的有点随机强制关闭

> ID：12626719
> 
> 赞同：2
> 
> 时间：2012-09-27T17:13:37.780
> 
> 标签：android, android-emulator

我正在开发这个秒表应用程序，并且在运行我的应用程序时，我一直在关闭这种奇怪的力量。

在模拟器上运行应用程序时，应用程序启动得很好，我可以看到布局和所有内容，通常可以启动秒表，停止并重置它，但是当我尝试再次启动它时，它通常会崩溃，而其他有时，我可以在崩溃之前多次启动、重置和启动秒表，而其他一些时候我会在第一次启动时崩溃

我是android开发的新手，所以任何帮助都将不胜感激。感谢您

这是我的 Java 文件：

```
package com.tutorial.stopwatch;

import android.os.Bundle;
import android.os.Handler;
import android.app.Activity;
import android.view.Menu;
import android.app.Activity;  
import android.content.res.Configuration;
import android.widget.LinearLayout;
import android.widget.TextView;  
import android.graphics.Typeface;  
import android.os.Bundle;  
import android.util.DisplayMetrics;  
import android.util.TypedValue;
import android.view.View;  
import android.widget.Button;  

public class MainActivity extends Activity {

    private TextView tempTextView; //Temporary TextView
    private Button tempBtn; //Temporary Button 
    private Handler mHandler = new Handler();
    private long startTime;
    private long elapsedTime;
    private final int REFRESH_RATE = 100;
    private String hours,minutes,seconds,milliseconds;
    private long secs,mins,hrs,msecs;
    private boolean stopped = false;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        checkScreenDensity();

        /*-------Setting the TextView Fonts-----------*/  

        Typeface fonttimer = Typeface.createFromAsset(getAssets(), "roboto.ttf");
        tempTextView = (TextView) findViewById(R.id.timer);  
        tempTextView.setTypeface(fonttimer);
        tempTextView = (TextView) findViewById(R.id.timerMs);  
        tempTextView.setTypeface(fonttimer);
        tempTextView = (TextView) findViewById(R.id.timerHs);  
        tempTextView.setTypeface(fonttimer);

        Typeface font = Typeface.createFromAsset(getAssets(), "roboto.ttf");
        tempTextView = (TextView) findViewById(R.id.backgroundText);  
        tempTextView.setTypeface(font);  
        Button tempBtn = (Button)findViewById(R.id.startButton);  
        tempBtn.setTypeface(font);  
        tempBtn = (Button)findViewById(R.id.resetButton);  
        tempBtn.setTypeface(font);  
        tempBtn = (Button)findViewById(R.id.stopButton);  
        tempBtn.setTypeface(font);  

    }

    private void checkScreenDensity(){  
        tempTextView = (TextView)findViewById(R.id.backgroundText);  
        switch (getResources().getDisplayMetrics().densityDpi) {  
        case DisplayMetrics.DENSITY_LOW:  
            tempTextView.setVisibility(View.GONE);  
            break;  
        case DisplayMetrics.DENSITY_MEDIUM:  
            tempTextView.setVisibility(View.GONE);  
            break;  
        case DisplayMetrics.DENSITY_HIGH:  
            tempTextView.setVisibility(View.VISIBLE);  
            break;  
        }  
    }  

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    //---------- on click procedures - id from layout.xml -----------

    public void startClick (View view){
        showStopButton();
        if(stopped){
            startTime = System.currentTimeMillis() - elapsedTime;
        }
        else{
            startTime = System.currentTimeMillis();
        }
        mHandler.removeCallbacks(startTimer);
        mHandler.postDelayed(startTimer, 0);
    }

    public void stopClick (View view){
        hideStopButton();
        mHandler.removeCallbacks(startTimer);
        stopped = true;
    }

    public void resetClick (View view){
        stopped = false;
        ((TextView)findViewById(R.id.timer)).setText("00:00");
        ((TextView)findViewById(R.id.timerMs)).setText(":00");
        ((TextView)findViewById(R.id.timerHs)).setText("00:");
    }

    //---------- Button change (start/reset to stop button)
    private void showStopButton(){
        ((Button)findViewById(R.id.startButton)).setVisibility(View.GONE);
        ((Button)findViewById(R.id.resetButton)).setVisibility(View.GONE);
        ((Button)findViewById(R.id.stopButton)).setVisibility(View.VISIBLE);
    }

    private void hideStopButton(){
        ((Button)findViewById(R.id.startButton)).setVisibility(View.VISIBLE);
        ((Button)findViewById(R.id.resetButton)).setVisibility(View.VISIBLE);
        ((Button)findViewById(R.id.stopButton)).setVisibility(View.GONE);
    }

    //-------- time from MiliSeconds to regular time ---------------------------------

    private void updateTimer (float time){
        secs = (long)(time/1000);
        mins = (long)((time/1000)/60);
        hrs = (long)(((time/1000)/60)/60);

        /* Setting the timer text to the elapsed time */
        ((TextView)findViewById(R.id.timerHs)).setText(hours + ":");
        ((TextView)findViewById(R.id.timer)).setText(minutes + ":" + seconds);
        ((TextView)findViewById(R.id.timerMs)).setText(":" + milliseconds);

        /* Convert the seconds to String
         * and format to ensure it has
         * a leading zero when required
         */
        secs = secs % 60;
        seconds=String.valueOf(secs);
        if(secs == 0){
            seconds = "00";
        }
        if(secs <10 && secs > 0){
            seconds = "0"+seconds;
        }

        /* Convert the minutes to String and format the String */

        mins = mins % 60;
        minutes=String.valueOf(mins);
        if(mins == 0){
            minutes = "00";
        }
        if(mins <10 && mins > 0){
            minutes = "0"+minutes;
        }

        /* Convert the hours to String and format the String */

        hours=String.valueOf(hrs);
        if(hrs == 0){
            hours = "00";
        }
        if(hrs <10 && hrs > 0){
            hours = "0"+hours;
        }

        /* milliseconds  */

        milliseconds = String.valueOf((long)time);
        if(milliseconds.length()==3){
            milliseconds = "0"+milliseconds;
        }
        if(milliseconds.length()<=1){
            milliseconds = "00";
        }
        milliseconds = milliseconds.substring(milliseconds.length()-3,   milliseconds.length()-1);

    }

    //------------- Timer Runnnable ---------------------------------------------------

    private Runnable startTimer = new Runnable() {
           public void run() {
               elapsedTime = System.currentTimeMillis() - startTime;
               updateTimer(elapsedTime);
               mHandler.postDelayed(this,REFRESH_RATE);
            }
        };

    //------------------ screen orientation fix ---------------------------------------

        @Override
        public void onConfigurationChanged(Configuration newConfig) {
            super.onConfigurationChanged(newConfig);
            if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {
                TextView timer = (TextView) findViewById(R.id.timer);
                timer.setTextSize(TypedValue.COMPLEX_UNIT_SP, 90);
                TextView timerMs = (TextView) findViewById(R.id.timerMs);
                timerMs.setTextSize(TypedValue.COMPLEX_UNIT_SP, 40);

            }
            else if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT) {
                TextView timer = (TextView) findViewById(R.id.timer);
                timer.setTextSize(TypedValue.COMPLEX_UNIT_SP, 70);
                TextView timerMs = (TextView) findViewById(R.id.timerMs);
                timerMs.setTextSize(TypedValue.COMPLEX_UNIT_SP, 30);

            }
        }

} 
```

我的 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>  
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"  
    android:layout_width="fill_parent"  
    android:layout_height="fill_parent">  
        <FrameLayout  
        android:layout_width="fill_parent"  
        android:layout_height="fill_parent"  
        android:id="@+id/parentFrameLayout">  
            <LinearLayout  
            android:orientation="vertical"  
            android:layout_width="fill_parent"  
            android:layout_height="fill_parent"  
            android:id="@+id/linearLayout">  
                <LinearLayout  
                android:orientation="horizontal"  
                android:gravity="center"  
                android:layout_width="fill_parent"  
                android:layout_height="wrap_content"  
>

                    <TextView
                     android:id="@+id/timerHs"
                     style="@style/timerText"
                     android:layout_width="wrap_content"
                     android:paddingTop="30sp"
                     android:text="@string/timerHs"
                     android:textSize="30sp"
                     android:paddingRight="5sp"
                     android:paddingBottom="60sp" />
                    <TextView  
                     style="@style/timerText"
                     android:text="@string/timer"  
                     android:id="@+id/timer"
                     android:layout_width="wrap_content" >  
                     </TextView>
                     <TextView
                     style="@style/timerText"
                     android:text="@string/timerMs"
                     android:id="@+id/timerMs"
                     android:textSize="30sp"
                     android:paddingTop="30sp"
                     android:layout_width="wrap_content"
                     android:paddingLeft="5sp"
                     android:paddingBottom="60sp">
                     </TextView>                     
                </LinearLayout>  
                <LinearLayout  
                android:orientation="horizontal"  
                android:layout_gravity="center_horizontal"  
                android:gravity="center"  
                android:layout_width="wrap_content"  
                android:layout_height="wrap_content"  
                android:layout_marginTop="20dp"  
                android:background="@drawable/buttonarea">  
                    <Button  
                    style="@style/buttonText"  
                    android:layout_marginLeft="5dp"  
                    android:layout_marginRight="5dp"  
                    android:background="@drawable/stopbuttonstates"  
                    android:textColor="#7A1100"  
                    android:shadowColor="#DF726E"  
                    android:text="@string/stopText"  
                    android:id="@+id/stopButton"  
                    android:visibility="gone"
                    android:onClick="stopClick">  
                    </Button>  
                    <Button  
                    style="@style/buttonText"  
                    android:layout_marginLeft="5dp"  
                    android:background="@drawable/startbuttonstates"  
                    android:textColor="#000000"  
                    android:shadowColor="#FBEBC5"  
                    android:text="@string/startText"  
                    android:id="@+id/startButton"
                    android:onClick="startClick">  
                    </Button>  
                    <Button  
                    style="@style/buttonText"  
                    android:layout_marginRight="5dp"  
                    android:background="@drawable/resetbuttonstates"  
                    android:textColor="#2E2E2E"  
                    android:shadowColor="#959597"  
                    android:text="@string/resetText"  
                    android:id="@+id/resetButton"
                    android:onClick="resetClick">  
                    </Button>  
                </LinearLayout>  
                <LinearLayout  
                android:orientation="horizontal"  
                android:layout_width="wrap_content"  
                android:layout_height="wrap_content"  
                android:layout_gravity="center_horizontal">  
                    <ImageView  
                    android:src="@drawable/hline"  
                    android:layout_height="wrap_content"  
                    android:layout_gravity="center"  
                    android:layout_marginTop="20dp"  
                    android:layout_marginBottom="10dp"  
                    android:layout_width="wrap_content">  
                    </ImageView>  
                </LinearLayout>  
                <ScrollView  
                android:layout_width="fill_parent"  
                android:layout_height="wrap_content"  
                android:layout_gravity="center_horizontal"  
                android:id="@+id/scrollView">  
                    <TextView  
                    style="@style/backgroundText"    
                    android:text="@string/backgroundText"  
                    android:id="@+id/backgroundText">  
                    </TextView>  
                </ScrollView>  
            </LinearLayout>  
        </FrameLayout>  
        <RelativeLayout  
        android:layout_width="wrap_content"  
        android:layout_height="wrap_content"  
        android:layout_alignParentBottom="true" >  
            <LinearLayout  
            android:orientation="vertical"  
            android:layout_width="fill_parent"  
            android:layout_height="wrap_content"  
            android:background="#000000">  
                <TextView  
                android:layout_width="fill_parent"  
                android:layout_height="wrap_content"  
                android:gravity="center"  
                android:text="@string/adsText">  
                </TextView>  
            </LinearLayout>  
        </RelativeLayout>  
    </RelativeLayout> 
```

字符串：

```
<?xml version="1.0" encoding="utf-8"?>  

<resources>  
    <string name="hello">Hello World, StopwatchActivity!</string>  
    <string name="app_name">Stopwatch</string>  
    <string name="timer">00:00</string>
    <string name="timerMs">:00</string>
    <string name="timerHs">00:</string>  
    <string name="startText">start</string>  
    <string name="resetText">reset</string>  
    <string name="stopText">stop</string>  
    <string name="backgroundText">Stopwatch</string>  
    <string name="adsText">Ads Go Here</string>
    <string name="menu_settings">Settings</string>
    <string name="title_activity_main">MainActivity</string> 
```

和日志：（应用程序在此日志中的第一次启动时崩溃）

```
09-27 17:05:54.980: D/dalvikvm(920): GC_CONCURRENT freed 65K, 3% free 8410K/8583K, paused 107ms+8ms, total 211ms
09-27 17:05:54.980: D/dalvikvm(920): WAIT_FOR_CONCURRENT_GC blocked 65ms
09-27 17:05:55.271: D/dalvikvm(920): GC_FOR_ALLOC freed 2K, 3% free 8760K/8967K, paused 44ms, total 45ms
09-27 17:05:55.781: I/Choreographer(920): Skipped 57 frames!  The application may be doing too much work on its main thread.
09-27 17:05:55.822: D/gralloc_goldfish(920): Emulator without GPU emulation detected.
09-27 17:05:56.180: I/Choreographer(920): Skipped 34 frames!  The application may be doing too much work on its main thread.
09-27 17:06:10.250: D/AndroidRuntime(920): Shutting down VM
09-27 17:06:10.250: W/dalvikvm(920): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
09-27 17:06:10.280: E/AndroidRuntime(920): FATAL EXCEPTION: main
09-27 17:06:10.280: E/AndroidRuntime(920): java.lang.StringIndexOutOfBoundsException: length=2; regionStart=-1; regionLength=2
09-27 17:06:10.280: E/AndroidRuntime(920):  at java.lang.String.startEndAndLength(String.java:593)
09-27 17:06:10.280: E/AndroidRuntime(920):  at java.lang.String.substring(String.java:1474)
09-27 17:06:10.280: E/AndroidRuntime(920):  at com.tutorial.stopwatch.MainActivity.updateTimer(MainActivity.java:178)
09-27 17:06:10.280: E/AndroidRuntime(920):  at com.tutorial.stopwatch.MainActivity.access$3(MainActivity.java:125)
09-27 17:06:10.280: E/AndroidRuntime(920):  at com.tutorial.stopwatch.MainActivity$1.run(MainActivity.java:190)
09-27 17:06:10.280: E/AndroidRuntime(920):  at android.os.Handler.handleCallback(Handler.java:615)
09-27 17:06:10.280: E/AndroidRuntime(920):  at android.os.Handler.dispatchMessage(Handler.java:92)
09-27 17:06:10.280: E/AndroidRuntime(920):  at android.os.Looper.loop(Looper.java:137)
09-27 17:06:10.280: E/AndroidRuntime(920):  at android.app.ActivityThread.main(ActivityThread.java:4745)
09-27 17:06:10.280: E/AndroidRuntime(920):  at java.lang.reflect.Method.invokeNative(Native Method)
09-27 17:06:10.280: E/AndroidRuntime(920):  at java.lang.reflect.Method.invoke(Method.java:511)
09-27 17:06:10.280: E/AndroidRuntime(920):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
09-27 17:06:10.280: E/AndroidRuntime(920):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
09-27 17:06:10.280: E/AndroidRuntime(920):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T17:18:20.793

这是抛出的行`StringIndexOutOfBoundsException`：

```
milliseconds = milliseconds.substring(milliseconds.length()-3,   milliseconds.length()-1); 
```

在此之前，如果长度小于 1，则将毫秒设置为“00”。请记住，如果毫秒的长度小于 3（如果它是“00”），那么在下一行你是将从-1开始获取一个子字符串，这将引发该异常。

也许你想要的是这样的：

```
milliseconds = milliseconds.substring(milliseconds.length()-2,   milliseconds.length()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T17:18:21.337

你这里的线是错误的

```
milliseconds = milliseconds.substring(milliseconds.length()-3,   milliseconds.length()-1); 
```

当毫秒设置为“00”时，您将子串从 -1 到 1。

你应该重新考虑你想要做什么，并抓住这个案例。

也许是这样：

```
 milliseconds = String.valueOf((long)time);
    if(milliseconds.length()==3){
        milliseconds = "0"+milliseconds;
    }
    if(milliseconds.length()<=1){
        milliseconds = "00";
    }
    else // Now wont substring when length <= 1 as there is no need.
    { 
        milliseconds = milliseconds.substring(milliseconds.length()-3,   milliseconds.length()-1);
    } 
```

# ios - 用于下拉列表框（android spinner）样式控件的 iOS 部分屏幕对话框

> ID：12626726
> 
> 赞同：2
> 
> 时间：2012-09-27T17:14:09.310
> 
> 标签：ios, cocoa-touch

在 iPhone 的 iOS 中，当配置为类似于下拉列表框时，我想制作一个与 android spinner 控件具有相似外观和行为的控件。特别是当按下带有单选按钮的文本选项的模式列表时，当其中一个被按下时，列表消失并且控件更新为该选项。例子：
![Android 微调器示例](../Images/8caeee39343a1598a881ae39520f2393.png)

到目前为止，我已经看到使用带有自定义 ViewController 的 [self presentViewController...] 的全屏选项，但我想要一个部分屏幕（如上图所示）解决方案。有谁知道如何做到这一点或可以指出正确的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T17:24:03.340

对此的本机解决方案将是一个 UIActionSheet，它在 iPhone 上将从底部出现并且是部分屏幕或在 iPad 上与 android 版本非常相似。

您可以在此处找到文档：[UIActionSheet](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIActionSheet_Class/Reference/Reference.html "UIActionSheet")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T17:53:33.597

如果您不想使用 UIActionSheet 并且希望使其可重用，而不是向当前的 XIB 添加一整套 UIView，则可以使用填充它所需的任何界面创建自定义 UIView，并使用界面构建器来帮助让它看起来不错。

该视图可能有一个消息处理程序，用于发布您需要侦听的响应。

然后只需初始化并将视图加载到您的子视图中并填充它

然后将自定义视图中的消息发布到您注册的处理程序

所以对于你的自定义视图，你会有这样的东西。

```
@implementation SomeCustomView
+(SomeCustomView*)viewFromNibNamed:(NSString *)nibName{
    NSArray *nibContents = [[NSBundle mainBundle] loadNibNamed:nibName owner:self options:NULL];
    NSEnumerator *nibEnumerator = [nibContents objectEnumerator];
    SomeCustomView *customView = nil;
    NSObject* nibItem = nil;
    while ((nibItem = [nibEnumerator nextObject]) != nil) {
        if ([nibItem isKindOfClass:[AADropDown class]]) {
            customView = (SomeCustomView*)nibItem;
            break;
        }
    }
    return customView;
}
-(void)someInitializationWith:(NSArray*)repeatableData andNotificationId:(NSString*)noteId{
//set your stuff up for the view here and save the notification id
}
...
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
[[NSNotificationCenter defaultCenter] postNotificationName:Your_Notification_Id object:somevalue];
}
@end 
```

并包括其他东西，比如在这种情况下，tableview 的东西或任何其他逻辑。

然后在你的视图控制器中你可以这样称呼它

```
__block id observer = [[NSNotificationCenter defaultCenter] addObserverForName:@"customViewAction" object:nil queue:[NSOperationQueue currentQueue] usingBlock:^(NSNotification *note) {
    //deal with notification here
    [[NSNotificationCenter defaultCenter] removeObserver: observer];
}];
SomeCustomView *cv =(SomeCustomView*) [SomeCustomView viewFromNibNamed:@"SomeCustomView"];
[cv someInitializationWith:arrayOptions andNotificationId:@"customViewAction"];
[self.view addSubview:cv]; 
```

在您的界面构建器中，您只需要确保将视图的类设置为您的类类型。

然后，只要用户需要以相同的方式选择其他内容，您就可以轻松地再次重用此代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T19:13:07.017

这是 AtomRiot 建议的解决方案的变体。

在您的视图（xib 或故事板）上创建一个按钮并将此图形分配给它。如果它在编辑器中显得拉伸，请不要担心。该代码将使其成为可实现的图形。
![在此处输入图像描述](../Images/29fc8f6468fb9d81ec3e19a9ed03e57c.png) 2X 版本![在此处输入图像描述](../Images/656f379660a76d74913852af9922add1.png)

然后在您的项目中包含以下文件（复制如下）：
DDLBHelper.h DDLBHelper.m

然后在 ViewController 的 .h 文件中创建指向按钮的链接：

```
@property (weak, nonatomic) IBOutlet UIButton *ddlbB;
- (IBAction)ddlbBClick:(id)sender; 
```

在 ViewController 的 .m 文件中进行以下调用：

```
@synthesize ddlbB, choiceLabel;
DDLBHelper *mDDLBH;
- (void)viewDidLoad {
    [super viewDidLoad];
    NSArray *strings = [[NSArray alloc] initWithObjects:@"Item 1", @"Item 2", @"Item 3", nil];
    mDDLBH = [[DDLBHelper alloc] initWithWithViewController:self button:ddlbB stringArray:strings currentValue:1];
}

- (IBAction)ddlbBClick:(id)sender {
    [mDDLBH popupList];
}
- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration{
    [mDDLBH adjustToRotation];
} 
```

就像安卓一样工作。

以下是文件：
DDLBHelper.h

```
//  DDLBHelper.h
//  Created by MindSpiker on 9/27/12.

#import <Foundation/Foundation.h>
@protocol DDLBHelperDelegate <NSObject>
@required
- (void) itemSelected: (int)value;
@end

@interface DDLBHelper : UIViewController <UITableViewDelegate, UITableViewDataSource>{
    id <DDLBHelperDelegate> delegate;
}

@property (retain) id delegate;

// external interface
- (id) init;
- (id) initWithWithViewController:(UIViewController *)viewController button:(UIButton *)button stringArray:(NSArray *)values currentValue:(int) currentValue;
- (void) popupList;
- (BOOL) isShown;
- (void) adjustToRotation;
- (int) getValue;
- (NSString *)getValueText;

@end 
```

DDLBHelper.m

```
//  DDLBHelper.m
//  Created by MindSpiker on 9/27/12.

#import "DDLBHelper.h"
#import <QuartzCore/QuartzCore.h>

@interface DDLBHelper () {
@private
    UIViewController *mVC;
    UIButton *mButton;
    NSArray *mValues;
    int mValue;

    UITableView *mTV;

    UIView *mBackgroundV;

}

@end

@implementation DDLBHelper

@synthesize delegate;

- (id) init {
    self = [super init];
    mVC = nil;
    mButton = nil;
    mValues = nil;
    mValue = -1;
    return self;
}

- (id) initWithWithViewController:(UIViewController *)viewController button:(UIButton *)button stringArray:(NSArray *)values currentValue:(int) currentValue {
    self = [super init];

    // save pointers
    mVC = viewController;
    mButton = button;
    mValues = values;
    mValue = currentValue;

    [self setupButton];

    return self;
}

- (void) popupList{
    if (mBackgroundV == nil){
        mBackgroundV = [self setupBackgroundView];
        [mVC.view addSubview:mBackgroundV];
    }
    if (mTV == nil){
        mTV = [self setupTableView];
        [mVC.view addSubview:mTV];
    }
    [mTV reloadData];
    [mBackgroundV setHidden:NO];
    [mTV setHidden:NO];
}

- (BOOL) isShown{
    return !mTV.isHidden;
}

- (void) adjustToRotation{
    BOOL isShown = [self isShown];

    // remove the controls
    if (mBackgroundV != nil){
        [mBackgroundV removeFromSuperview];
        mBackgroundV = nil;
    }
    if (mTV != nil){
        [mTV removeFromSuperview];
        mTV = nil;
    }

    if (isShown){
        [self popupList];
    }
}

- (int) getValue{
    return mValue;
}

- (NSString *) getValueText{
    if (mValues != nil && mValue > -1) {
        if (mValues.count > mValue){
            return [mValues objectAtIndex:mValue];
        }
    }
    return nil;
}

- (void) updateButtonTitle{
    NSString *title = [NSString stringWithFormat:@"  %@", [self getValueText]];

    [mButton setTitle:title forState:UIControlStateNormal];
}

- (void) setupButton {
    UIImage *buttonBG = [UIImage imageNamed:@"sis_proceeds_ddlb.png"];
    UIEdgeInsets insets = UIEdgeInsetsMake(8, 8, 8, 45);
    UIImage *sizableImg = [buttonBG resizableImageWithCapInsets:insets];
    [mButton setBackgroundImage:sizableImg forState:UIControlStateNormal];
    [mButton setContentHorizontalAlignment:UIControlContentHorizontalAlignmentLeft];
    [self updateButtonTitle];
}

- (UIView *) setupBackgroundView{
    UIView *v = [[UIView alloc] initWithFrame:mVC.view.bounds];
    [[v layer] setOpaque:NO];
    [[v layer] setOpacity:0.7f];
    [[v layer] setBackgroundColor:[UIColor blackColor].CGColor];
    return v;
}

- (UITableView *) setupTableView {
    CGRect rect = [self makeTableViewRect];
    UITableView *tv = [[UITableView alloc] initWithFrame:rect style:UITableViewStylePlain];
    [tv setDelegate:self];
    [tv setDataSource:self];
    [tv setBackgroundColor:[UIColor whiteColor]];
    [[tv layer] setBorderWidth:2];
    [[tv layer] setBorderColor:[UIColor lightGrayColor].CGColor];
    [[tv layer] setCornerRadius:10];
    [mVC.view addSubview:tv];
    return tv;
}

- (CGRect) makeTableViewRect {
    float l=0.0, t=0.0, w=0.0, h=0.0, maxH=0.0, cellH=0.0, cellsH=0.0;

    // get 
    l = mButton.frame.origin.x;
    w = mButton.frame.size.width;
    t = mVC.view.bounds.origin.y + 50;
    maxH = mVC.view.bounds.size.height - 100;

    // get cell height
    UITableViewCell *c = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:nil];
    cellH = c.bounds.size.height;

    // see if list will overlow maxH(eight)
    cellsH = cellH * mValues.count;
    if (cellsH > maxH) {
        h = maxH;
    } else {
        h = cellsH;
    }

    return CGRectMake(l, t, w, h);
}

#pragma mark - TableView Delegate functions

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{
    return  1;  // this is a one section table
}
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    return mValues.count;   // should be called for only one section
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

    // try to resuse a cell if possible
    static NSString *RESUSE_IDENTIFIER = @"myResuseIdentifier";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:RESUSE_IDENTIFIER];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:RESUSE_IDENTIFIER];
    }

    cell.textLabel.text = [mValues objectAtIndex:indexPath.row];
    if (mValue == indexPath.row){
        cell.accessoryType = UITableViewCellAccessoryCheckmark;

    } else {
        cell.accessoryType = UITableViewCellAccessoryNone;
    }

    return cell;

}
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
    // save value and hide view
    mValue = indexPath.row;
    [self updateButtonTitle];
    [mBackgroundV setHidden:YES];
    [mTV setHidden:YES];
    [delegate itemSelected:mValue];
}
@end 
```

# ios - 使用 XCode 4.5 运行 iOS 5.1 模拟器的问题

> ID：12626728
> 
> 赞同：5
> 
> 时间：2012-09-27T17:14:22.387
> 
> 标签：ios, ipad, ios-simulator, xcode4.5

我最近将我的 XCode 升级到 4.5 版本，现在当我尝试将应用程序开发到 iOS 5.0/5.1 时遇到问题。

我开发了一个简单的 iPad 游戏，用户需要将图像与对应的单词进行匹配。如果相关，所有这些项目都存储在 UIImageView 中。支持的界面方向仅为横向。

当我使用 iPad 6.0 Simulator 运行我的应用程序时，一切正常，没有任何问题。但是当我尝试使用 5.1 运行它时，一切都出错了。图像根本没有出现，我的背景图像出现在侧面并重复出现。状态栏也出现错误：设备方向为横向，但侧边栏出现在右侧。当我使用 6.0 模拟器时，这也不会发生。

在项目详细信息中，我已经将 iOS 部署目标更改为 5.1，在 Storyboard 中也是如此。使用 iOS 5.1 部署目标时，故事板不允许我选择“使用自动布局”选项，所以我取消了此选项。这是由这个选项引起的吗？

我已经尝试在设备中运行我的应用程序，但结果是一样的。自从我安装了 XCode 4.5 我开始遇到这些问题，例如我什至无法在 iOS 5.x 模拟器中正确运行“主从应用程序”模板，因为当我单击“添加”按钮时它崩溃了.

我是否缺少运行使用 SDK 6 创建的 5.x 应用程序的东西？我已经在很多论坛中搜索过，但我还没有找到任何解决此类问题的方法。我很乐意听取任何建议，因为我已经在这个问题上浪费了很多时间，而且我已经没有选择了。

**[编辑]**：我记得一个可能与此问题相关的细节：我在情节提要中的视图是自定义视图。我创建了一个从 UIView 扩展的类，这样我就可以覆盖 drawRect 函数来在我的对象之间画线。然后在情节提要的视图中，我刚刚在自定义类 -> 类中选择了我的类。

我注意到，当我运行 5.1 Simulator 时，状态栏最初出现在顶部，然后在加载窗口时它转到右侧。

如果您想知道任何其他细节，请问我。

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T01:25:29.400

英语不是我的母语，所以请原谅我的语法...

至于您的主详细信息“添加”按钮问题，这对我有用。

据我所知，该应用程序崩溃的原因是：

```
[UITableView dequeueReusableCellWithIdentifier:forIndexPath:]: unrecognized selector sent to instance 
```

快速帮助 说：

```
- (id)dequeueReusableCellWithIdentifier:(NSString *)identifier forIndexPath:(NSIndexPath *)indexPath declaration is only available in iOS (6.0 and later). 
```

所以我尝试更改 MasterViewController.m 中的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell" forIndexPath:indexPath];
    [self configureCell:cell atIndexPath:indexPath];
    return cell;
} 
```

对于 Xcode 在旧版本中使用的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

    }
    [self configureCell:cell atIndexPath:indexPath];
    return cell;
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T17:40:52.683

您是否检查过故事板以确保您已关闭自动布局？自动布局仅适用于 iOS6。在 Interface Builder Document 下的 File Inspector Area 查看视图控制器时可以找到此选项。这是一个复选框

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T01:52:56.230

似乎您不是 XCode 4.5 中唯一遇到 Simulator 5.1 问题的人。 [iPhone Simulator 5.1 和 Xcode 4.5 中的错误使用 UIManagedDocument](https://stackoverflow.com/questions/12557442/bug-in-iphone-simulator-5-1-with-xcode-4-5-using-uimanageddocument) 我的应用程序也坏了。5.0 sim 似乎运行良好。

# c++ - 将 HBITMAP 绘制到分层窗口上。怎么了？

> ID：12626729
> 
> 赞同：3
> 
> 时间：2012-09-27T17:14:24.770
> 
> 标签：c++, windows, winapi, hbitmap, layered-windows

大家好，美好的一天，

我的最终目标是在屏幕上绘制一个包含 alpha 的 PNG 文件——这意味着不是在自己的窗口中，而是在桌面上的某个地方。将 PNG 加载到 HBITMAP 中的部分现在可以工作（以不同的方式进行测试），但我无法**将它包括 alpha 在内。**

据我所知，最好的方法是使用分层窗户。所以我做了很多工作来重做几个例子和小教程。

以下代码编译没有问题并且没有提示任何消息（这意味着永远不会调用 showError("#") 函数）。

**然而屏幕上*没有任何可见的东西：/***

抱歉，这么长...希望有人愿意至少快点看一下..

```
LRESULT CALLBACK WndProc(HWND hWindow, UINT msg, WPARAM wParam, LPARAM lParam);

int main(HINSTANCE hInstance)
{

    WNDCLASSEX WndClass;
    char sClassName[]  = "mainClass";
    WndClass.cbSize     = sizeof(WNDCLASSEX);
    WndClass.style      = NULL;
    WndClass.lpfnWndProc   = WndProc;//WndProc;
    WndClass.cbClsExtra = 0;
    WndClass.cbWndExtra = 0;
    WndClass.hInstance  = hInstance;
    WndClass.hIcon      = NULL;
    WndClass.hCursor    = LoadCursor(NULL, IDC_ARROW);
    WndClass.hbrBackground = (HBRUSH)(COLOR_WINDOW+1);
    WndClass.lpszMenuName  = NULL;
    WndClass.lpszClassName = sClassName;
    WndClass.hIconSm    = LoadIcon(NULL, IDI_APPLICATION);
    if (RegisterClassEx(&WndClass) == 0) showError("-1");

    HWND screen = CreateWindowEx(WS_EX_LAYERED,//WS_EX_LEFT
        "mainClass",
        "UpdateLayeredWind",
        WS_DISABLED | WS_VISIBLE,
        200,200,260,260,
        NULL /*eventuelly, GM window*/,
        NULL,
        hInstance,
        NULL);  

    if (screen == NULL) showError("0");

        HBITMAP img = LoadImageResource("D://ThreadDraw/ThreadDraw-test/ThreadDraw/test.png");
            if (img == NULL) showError("1");

    BLENDFUNCTION blend = {0};

    blend.AlphaFormat = AC_SRC_ALPHA;
    blend.SourceConstantAlpha = 155;

    POINT ptPos = {200,300};
    SIZE sizeWnd = {260,260};
    POINT ptPos2 = {200,300};

    ShowWindow(screen, SW_SHOW);

    while (1)
    {

        PAINTSTRUCT             ps;
        HDC                     hdc;
        BITMAP                  bitmap;
        HDC                     hdcMem;
        HGDIOBJ                 oldBitmap;

        hdc = BeginPaint(screen, &ps);

        hdcMem = CreateCompatibleDC(hdc);
        oldBitmap = SelectObject(hdcMem, img);

        GetObject(img, sizeof(bitmap), &bitmap);

        if (SetLayout(hdc,LAYOUT_RTL) == GDI_ERROR)
            showError("5");

            if (!BitBlt(hdc, 0, 0, 64, 64, hdcMem, 0, 0, SRCCOPY))
                showError("4");

            if (!UpdateLayeredWindow(screen,hdcMem,&ptPos,&sizeWnd,hdc,&ptPos2,RGB(255,255,255),&blend,ULW_ALPHA))//ULW_OPAQUE))
            showError("2");

        EndPaint(screen, &ps);

        SelectObject(hdcMem, oldBitmap);
        DeleteDC(hdcMem);

        Sleep(10);

    }

    return 0;
}

LRESULT CALLBACK WndProc(HWND hwnd, UINT Message, WPARAM wParam, LPARAM lParam) 
{
    switch(Message) 
    {
        case WM_CLOSE:
            DestroyWindow(hwnd);
            break;
        case WM_DESTROY:
            PostQuitMessage(0);
            break;
        default:
            return DefWindowProc(hwnd, Message, wParam, lParam);
    }
    return 0;
} 
```

顺便说一句，如果我在 UpdateLayeredWindow 中使用 ULW_OPAQUE 而不是 ULW_ALPHA，则会出现一个大小合适的黑色窗口，因此认为问题必须是与 PAINTSTRUKT 或 BitBlt 函数相关的最小问题。但是我尝试了很多方法而没有任何改变.

希望有人可以提供帮助。非常感谢您！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T17:58:14.577

这大多是错误的。您的代码应该：

*   使用 . 创建分层窗口`CreateWindowEx`。
*   用 将位图附加到它上面`UpdateLayeredWindow`。
*   用 显示窗口`ShowWindow`。Windows 将负责绘制分层窗口，因此您无需处理`WM_PAINT`或调用`BeginPaint`.
*   输入消息循环。

就是这样。

如果您使用的是 Visual Studio，请创建一个新的 Win32 项目，它将为您创建一个带有消息循环的新项目。

**更新**

这是一个创建透明分层窗口的示例程序。它需要一个函数来将 PNG 作为透明位图加载。而且它没有错误检查。

```
int APIENTRY _tWinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPTSTR lpCmdLine, int nCmdShow)
{
    LPCTSTR szWindowClass = _T("TransparentClass");

    // Register class
    WNDCLASSEX wcex = {0};

    wcex.cbSize = sizeof(WNDCLASSEX);
    wcex.lpfnWndProc    = DefWindowProc;
    wcex.hInstance      = hInstance;
    wcex.lpszClassName  = szWindowClass;

    RegisterClassEx(&wcex);

    HWND hWnd = CreateWindowEx(WS_EX_LAYERED, szWindowClass, 0, WS_OVERLAPPEDWINDOW,
        CW_USEDEFAULT, 0, CW_USEDEFAULT, 0, NULL, NULL, hInstance, NULL);

    int width;
    int height;
    HBITMAP hbmp = LoadPng(L"sample.png", &width, &height);

    HDC hdcScreen = GetDC(0);
    HDC hdc = CreateCompatibleDC(hdcScreen);
    ReleaseDC(0, hdcScreen);
    HBITMAP hbmpold = (HBITMAP)SelectObject(hdc, hbmp);

    POINT dcOffset = {0, 0};
    SIZE size = {width, height};
    BLENDFUNCTION bf;
    bf.BlendOp = AC_SRC_OVER;
    bf.BlendFlags = 0;
    bf.SourceConstantAlpha = 255;
    bf.AlphaFormat = AC_SRC_ALPHA;
    UpdateLayeredWindow(hWnd, 0, 0, &size, hdc, &dcOffset, 0, &bf, ULW_ALPHA);
    SelectObject(hdc, hbmpold);
    DeleteDC(hdc);
    DeleteObject(hbmp);

    ShowWindow(hWnd, SW_SHOW);

    MSG msg;

    // Main message loop:
    while (GetMessage(&msg, NULL, 0, 0))
    {
        TranslateMessage(&msg);
        DispatchMessage(&msg);
    }

    return (int)msg.wParam;
} 
```

**另一个更新**

这是一些将红色、绿色和蓝色值预乘 alpha 的代码。它假定`splash_image`指向 32bpp ARGB 数据的大小`width*height`。

```
LPBYTE bits = (LPBYTE)splash_image;
int size = width * height;
for (int pixel = 0; pixel != size; ++pixel)
{
    bits[0] = bits[0] * bits[3] / 255;
    bits[1] = bits[1] * bits[3] / 255;
    bits[2] = bits[2] * bits[3] / 255;
    bits += 4;
} 
```

# iphone - 如何在应用程序中使用整个图片创建照片库

> ID：12626730
> 
> 赞同：0
> 
> 时间：2012-09-27T17:14:30.877
> 
> 标签：iphone, uiimagepickercontroller, ios6

如何使用应用程序中的 70 张图片在应用程序内创建照片库

```
ImageView.animationImages = [NSArray arrayWithObjects:    
                             [UIImage imageNamed:@"2a.png"],
                             [UIImage imageNamed:@"2b.png"],
                             [UIImage imageNamed:@"2c.png"],
                             nil]; 
```

我是否必须像这样创建 uiimagepicker

```
UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
imagePicker.delegate = self;
imagePicker.allowsEditing = YES;
imagePicker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary; 
[self presentModalViewController:imagePicker animated:YES]; 
```

如果是，那么仍然不清楚它将如何从整个应用程序中收集所有图像并将其显示为幻灯片，或者用户可以一张一张地滑动图像。

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T17:22:11.257

如果您想创建一些照片库应用程序，请查看此开源[示例](https://github.com/mwaterfall/MWPhotoBrowser)。

由 Michael Waterfall 创建，其中包括来自存储在服务器或本地的图像的照片库。

如果您想实现类似的侧面展示，只需延迟以编程方式滑动滚动视图或使用您自己的动画。

# java - “void 是变量 buttonOK 的无效类型” - 单击按钮后尝试关闭对话框

> ID：12626733
> 
> 赞同：0
> 
> 时间：2012-09-27T17:14:44.893
> 
> 标签：java, android, android-button

前段时间我做了一个简单的对话框。一切看起来都很好，但是在尝试关闭它后我遇到了麻烦。错误是 `"void is an invalid type for the variable buttonOK"`。

嗯，我最好给个截图链接：http: [//i.imgur.com/tiAiI.png](http://i.imgur.com/tiAiI.png)

对话框代码：

```
public void aboutApp(View view) {

    // custom dialog
                final Dialog dialog = new Dialog(context);
                dialog.setContentView(R.layout.aboutapp);
                dialog.setTitle("about  ");

                // set the custom dialog components - text, image and button
                TextView text = (TextView) dialog.findViewById(R.id.text);
                text.setText("bla bla bla ");
                ImageView image = (ImageView) dialog.findViewById(R.id.image);
                image.setImageResource(R.drawable.android);

                    @Override
                    public void buttonOK(View view) {
                        dialog.dismiss();
                    }

                dialog.show();
} 
```

我应该怎么做才能使它起作用？

PS我有错误`public void buttonOK(View view)`，例如`view`-`Duplicate local variable view`我应该重命名它`view2`吗？

## 好的，我找到了解决方案。

问题是（正如**Ridcully**`buttonOK()`所注意到的）在另一种方法中定义了方法`aboutApp()`，这是在 java 中无法完成的（uach，现在我知道了：D）。

我只是替换了代码：`@Override public void buttonOK(View view) { dialog.dismiss(); }`

至：

```
Button dialogButton = (Button) dialog.findViewById(R.id.dialogButtonOK);
                // if button is clicked, close the custom dialog
                dialogButton.setOnClickListener(new OnClickListener() {
                    public void onClick(View view2) {
                        dialog.dismiss();
                    }
                }); 
```

现在它可以工作了，谢谢大家的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T17:18:27.827

You have defined a method (`buttonOK()`) within another method (`aboutApp()`). This is not possible in Java. The compiler tries to make sense of this and supposes somhow that `buttonOk` is meant as a variable -- thus the misleading error message.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T17:28:52.603

您错误地使用对话框。这是给你的一个例子。

```
AlertDialog dialog = new AlertDialog.Builder(this).create();
dialog.setButton(DialogInterface.BUTTON_POSITIVE, "Ok", new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int which) {
        //TODO Handle click here

    }
});

dialog.show(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T18:01:42.560

由于您尝试将[`android:onClick`](http://developer.android.com/reference/android/view/View.html#attr_android%3aonClick)属性与 一起使用`"buttonOK"`，因此您**必须**在类中声明`public void buttonOK(View v) {}`为常规方法。（目前你正在尝试将它嵌套在里面`aboutApp()`，也明白你不能在 Java 中嵌套方法。）

```
public class MyActivity extends Activity {
    Dialog dialog;

    public void onCreate(Bundle savedInstanceState) { ... }

    public void aboutApp(View view) {
        // custom dialog
        dialog = new Dialog(context);
        ...
    }

    // Move your method here:
    public void buttonOK(View v) {
        dialog.dismiss();
    }
} 
```

# ruby-on-rails-3 - 将文件名添加到 Rails 记录器信息消息

> ID：12626735
> 
> 赞同：1
> 
> 时间：2012-09-27T17:14:49.893
> 
> 标签：ruby-on-rails-3, logging

如何在 Rails 的日志消息中添加文件名和行号？我当前的格式类似于

```
[INFO : 12-09-27 10:12:30] 
```

我想把它改成

```
[INFO: 12-09-27 10:12:30 application_controller.rb:35] 
```

或类似的东西。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T19:22:11.370

`logger.rb`在您的目录中创建一个初始化程序`config/initializers`并尝试将其放入

```
class Logger::SimpleFormatter
  def call(severity, time, progname, msg)
    "[#{severity} #{time} #{caller(0).first.match(/.*:\d+/)[0]}] #{msg}\n"
  end
end 
```

应该在 Ruby 1.9+ 上工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-07T19:25:57.257

如果有人正在为 Rails 4 寻找类似的解决方案。它将是：

```
class ActiveSupport::Logger::SimpleFormatter
  def call(severity, time, progname, msg)
    "[#{severity} #{time} #{caller(0).first.match(/.*:\d+/)[0]}] #{msg}\n"
  end
end 
```

# c++ - Gearman 在非阻塞调用 C++ 中工作

> ID：12626736
> 
> 赞同：0
> 
> 时间：2012-09-27T17:14:50.173
> 
> 标签：c++, gearman

是否可以将多个工作分配给同一个工人？

我的工作回调是非阻塞的。所以我可以使用同一个工人处理多个工作。根据讨论[https://groups.google.com/forum/?fromgroups=#!topic/gearman/UyUxjY1VZUg](https://groups.google.com/forum/?fromgroups=#!topic/gearman/UyUxjY1VZUg)我应该使用`grab_job`gearman 的 API。但我在 libgearman API 文档中找不到任何相关函数。[http://gearman.info/libgearman/index.html](http://gearman.info/libgearman/index.html)

您能帮我找出如何使用单个工人处理多项工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T06:13:36.663

Gearman 协议不限制工人获得的工作数量。只要发送多个 GRAB_JOB 数据包，只要有工作剩余，gearmand 就会将工作分配给工作人员。但有些客户端库 API 可能不支持此类操作。所以一个简单的方法是在一个进程中创建多个工作对象，然后自己循环它们。

# web-services - 是否可以通过 Web 服务 (SOAP) 通过 SSL 进行身份验证并通过 HTTP 返回浏览器？

> ID：12626739
> 
> 赞同：1
> 
> 时间：2012-09-27T17:15:07.490
> 
> 标签：web-services, rest, authentication, soap, ssl

我被分配了不在整个站点上使用 SSL 的任务。网站上没有什么是保密的，但由于 PCI 合规性，这些权力需要有某种保护。作为一种折衷方案，我提出使用基于 HTTPS (SSL) 的身份验证，并允许站点的其余部分通过 HTTP 运行。

是否可以通过 HTTPS (SSL) 进行身份验证，通过 SOAP 等 Web 服务，然后通过 HTTP 返回浏览器？

我已经看到将 SSO 与 CAS 和无会话的 Active Directory 一起使用的实现，它们允许通过 HTTPS 进行身份验证，并将其他所有内容保留在 HTTP 中。我想完成同样的事情（仅通过 SSL 进行身份验证），但没有 SSO 和 Active Directory。我正在运行 Windows Server 2008 R2、Tomcat 5.5 和 IIS 7.5。

非常感谢您的帮助。

# facebook - 如何在独立页面上列出选项卡？

> ID：12626740
> 
> 赞同：1
> 
> 时间：2012-09-27T17:15:08.980
> 
> 标签：facebook, graph, tabs

我在 Facebook 上创建了一个页面，但没有创建帐户。这意味着使用与 account_id 相同的 page_id 创建默认帐户。

当我尝试对页面上的选项卡执行图形调用时：

```
/<page_id>/tabs?auth_token=<auth token> 
```

我得到一个空的“数据”表示：

```
{
  "data": [

  ]
} 
```

即使安装了应用程序选项卡。

添加 tab_id 没有区别，我得到相同的响应。

我猜该页面与帐户混淆了，但我找不到任何方法来区分帐户和页面之间的区别。

有谁知道是否可以通过另一种方式检索页面信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T19:47:59.630

仔细检查您使用的访问令牌是否是[页面访问令牌](https://developers.facebook.com/docs/authentication/pages/)- 这是无法返回答案的最可能原因

# java - 一旦我想做一个新任务，我的 android 应用程序就会崩溃

> ID：12626744
> 
> 赞同：0
> 
> 时间：2012-09-27T17:15:24.130
> 
> 标签：java, android, crash, nullpointerexception

大家好，我是 android 新手，我想制作一个 app.something 类似于每日计划。问题是这样的，我的应用程序打开了，我有新的任务按钮，当我点击按钮添加新任务时，应用程序崩溃了。我在论坛上搜索了类似的问题，但无法获得帮助。

这是我的猫日志文件：

```
09-27 19:03:46.035: D/dalvikvm(19346): Late-enabling CheckJNI

09-27 19:03:46.440: D/dalvikvm(19346): GC_FOR_ALLOC freed 136K, 4% free 12874K/13319K, paused 31ms

09-27 19:03:46.440: I/dalvikvm-heap(19346): Grow heap (frag case) to 13.127MB for 379472-byte allocation

09-27 19:03:46.465: D/dalvikvm(19346): GC_FOR_ALLOC freed 0K, 4% free 13245K/13703K, paused 20ms

09-27 19:03:46.535: D/AbsListView(19346): Get MotionRecognitionManager

09-27 19:03:49.510: D/CLIPBOARD(19346): Hide Clipboard dialog at Starting input: finished by someone else... !

09-27 19:03:53.625: D/AndroidRuntime(19346): Shutting down VM

09-27 19:03:53.625: W/dalvikvm(19346): threadid=1: thread exiting with uncaught exception (group=0x40c5d1f8)

09-27 19:03:53.635: E/AndroidRuntime(19346): FATAL EXCEPTION: main

09-27 19:03:53.635: E/AndroidRuntime(19346): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.dailyplanner/com.example.dailyplanner.new_task}: java.lang.NullPointerException

09-27 19:03:53.635: E/AndroidRuntime(19346):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1894)

09-27 19:03:53.635: E/AndroidRuntime(19346):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1995)

09-27 19:03:53.635: E/AndroidRuntime(19346):    at android.app.ActivityThread.access$600(ActivityThread.java:128)

09-27 19:03:53.635: E/AndroidRuntime(19346):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1161)

09-27 19:03:53.635: E/AndroidRuntime(19346):    at android.os.Handler.dispatchMessage(Handler.java:99)

09-27 19:03:53.635: E/AndroidRuntime(19346):    at android.os.Looper.loop(Looper.java:137)

09-27 19:03:53.635: E/AndroidRuntime(19346):    at android.app.ActivityThread.main(ActivityThread.java:4514)

09-27 19:03:53.635: E/AndroidRuntime(19346):    at java.lang.reflect.Method.invokeNative(Native Method)

09-27 19:03:53.635: E/AndroidRuntime(19346):    at java.lang.reflect.Method.invoke(Method.java:511)

09-27 19:03:53.635: E/AndroidRuntime(19346):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:993)

09-27 19:03:53.635: E/AndroidRuntime(19346):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:760)

09-27 19:03:53.635: E/AndroidRuntime(19346):    at dalvik.system.NativeStart.main(Native Method)

09-27 19:03:53.635: E/AndroidRuntime(19346): Caused by: java.lang.NullPointerException

09-27 19:03:53.635: E/AndroidRuntime(19346):    at android.app.Activity.findViewById(Activity.java:1851)

09-27 19:03:53.635: E/AndroidRuntime(19346):    at com.example.dailyplanner.new_task.<init>(new_task.java:19)

09-27 19:03:53.635: E/AndroidRuntime(19346):    at java.lang.Class.newInstanceImpl(Native Method)

09-27 19:03:53.635: E/AndroidRuntime(19346):    at java.lang.Class.newInstance(Class.java:1319)

09-27 19:03:53.635: E/AndroidRuntime(19346):    at android.app.Instrumentation.newActivity(Instrumentation.java:1027)

09-27 19:03:53.635: E/AndroidRuntime(19346):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1885)

09-27 19:03:53.635: E/AndroidRuntime(19346):    ... 11 more 
```

这是安卓清单：

```
<manifest package="com.example.dailyplanner"
android:versionName="1.0" xmlns:android="http://schemas.android.com/apk/res/android" android:versionCode="1">

<uses-sdk
    android:minSdkVersion="9"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@android:style/Theme.Light.NoTitleBar" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main"
        android:screenOrientation="portrait" 
        android:configChanges="orientation|keyboardHidden">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name=".new_task"/>
</application> 
```

这是我的 main.java 文件：

```
package com.example.dailyplanner;

import android.os.Bundle;
import android.app.Activity;
import android.app.ListActivity;
import android.content.Intent;
import android.database.sqlite.SQLiteDatabase;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class MainActivity extends ListActivity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    //SQLiteDatabase db = openOrCreateDatabase("MyDB", MODE_PRIVATE, null   );
    //db.execSQL("CREATE TABLE IF NOT EXISTS Data1 (Id INT IDENTITY(1,1) NOT NULL, text VARCHAR, time TIME, date DATE)");

    Button nTaskBtn = (Button) findViewById(R.id.nTask);
    nTaskBtn.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {

            Intent nTaskScreen = new Intent(getApplicationContext() , new_task.class);

            startActivity(nTaskScreen);

        }
    });

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
} 
```

这是 new_task.java 文件：

```
package com.example.dailyplanner;

import android.R.string;
import android.app.Activity;
import android.app.Dialog;
import android.app.TimePickerDialog;
import android.net.UrlQuerySanitizer.ValueSanitizer;
import android.os.Bundle;
import android.renderscript.Sampler.Value;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;
import android.widget.TimePicker;

public class new_task extends Activity {

static final int TIME_DIALOG_ID=0;
final TextView timeText = (TextView) findViewById(R.id.timeTxt);
TextView dateText = (TextView) findViewById(R.id.dateTxt);

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.new_task);

    Button btnSave = (Button) findViewById(R.id.btnSave);
    btnSave.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {

        }
    });

    Button btnSetTime = (Button) findViewById(R.id.btnSetTime);
    btnSetTime.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {

            showDialog(TIME_DIALOG_ID);

        }
        });
}
private TimePickerDialog.OnTimeSetListener mTimeSetListener = new TimePickerDialog.OnTimeSetListener() {

            public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
                timeText.setText(hourOfDay+":"+minute);
                };

};
protected Dialog onCreateDialog(int id){
    switch(id){

    case TIME_DIALOG_ID:
    return new TimePickerDialog(this, mTimeSetListener, 0, 0, true);

    }
    return null;

} 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T17:29:56.630

您只能在设置内容视图后使用 findViewById。在访问变量之前对变量进行空检查也很有用。最后，确保布局文件 R.layout.new_task 包含 ID 为 timeTxt、dateTxt、btnSave 的项目。

我重写了你的一些作品，给你一个例子来说明我的意思：

```
private TextView timeText;
private TextView dateText;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.new_task);

    timeText = (TextView) findViewById(R.id.timeTxt);
    dateText = (TextView) findViewById(R.id.dateTxt);

    Button btnSave = (Button) findViewById(R.id.btnSave);
    if (btnSave != null) {
        btnSave.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
            }
        });
    } else {
        Log.e("MyActivity", "btnSave was null :(");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T17:31:09.370

您必须在`findViewById()`致电`onCreate()` **后**致电`setContentView()`。

# javascript - 这是在 javascript 中插入 JSTL 的正确格式吗？

> ID：12626745
> 
> 赞同：1
> 
> 时间：2012-09-27T17:15:27.967
> 
> 标签：javascript, jsp, jstl

我有类似的 JSP 字符串数组

```
String[] valueArray = new String[valueList.size()];
valueArray = valueList.toArray(valueArray); 
```

我想在使用 JSTL 的 Javascript 中使用它

```
 var array = new Array();
 <c:forEach items="${valueArray}" var="item">
 array.push("${item}");
 </c:forEach> 
```

不知何故，这不起作用。它没有填充任何值。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T05:06:46.573

如果第一组代码`scriptlets`在您的 jsp 文件中，您应该将第二组代码更改为：

```
var array = new Array();
 <% for(int i=0; i<valueArray.length; i++){ %>
 array.push("<%= valueArray[i] %>");
 <% } %> 
```

或者，如果它们是 java 文件的一部分（可能是 servlet 或操作类），您应该添加一行：

```
session.setAttribute("valueArray", valueArray); 
```

这将在您的会话中添加您的 valueArray，准备在您的 jsp 上检索。

# objective-c - 通过HTTP POST发送大文件而不将整个文件加载到ram中的正确方法是什么？

> ID：12626748
> 
> 赞同：13
> 
> 时间：2012-09-27T17:15:44.130
> 
> 标签：objective-c, ios, http, sockets, ios5

我目前正在开发一个应用程序，用于通过简单的 http post 将大型视频文件从 iPhone 上传到 web 服务。截至目前，我构建了一个 NSURLRequest 并在加载请求之前预加载了所有视频文件数据。如果文件很大，这自然会消耗大量内存，在某些情况下甚至是不可能的。

所以基本上我的问题是：是否有正确的方法来流式传输数据或以块的形式加载数据而不对网络服务器进行任何修改？

谢谢。

**编辑澄清：**我正在寻找一种将大型多部分/表单数据**从**iPhone流式传输**到**网络服务器的方法。不是反过来。

**接受答案后编辑：**我刚刚发现苹果有一些漂亮的源代码是为了这个确切的目的而编写的，它显示在帖子中附加了额外的数据，而不仅仅是大文件本身。万一有人需要它：[SimpleURLConnections - PostController.m](http://developer.apple.com/library/ios/#samplecode/SimpleURLConnections/Listings/PostController_m.html#//apple_ref/doc/uid/DTS40009245-PostController_m-DontLinkElementID_12)

**另一个编辑：**在使用来自苹果的那段[源代码时，](http://developer.apple.com/library/ios/#samplecode/SimpleURLConnections/Listings/PostController_m.html#//apple_ref/doc/uid/DTS40009245-PostController_m-DontLinkElementID_12)我遇到了一个非常愚蠢和丑陋的问题，即使是wireshark 也无法帮助我调试。当在引号之间声明边界字符串时（如苹果示例），一些网络服务器不理解边界字符串。我在 Apache Tomcat 上遇到了问题，删除引号效果很好。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-27T17:41:39.967

您可以`NSInputStream`使用`NSMutableURLRequest`. 例如：

```
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:uploadURL];
NSInputStream *stream = [[NSInputStream alloc] initWithFileAtPath:filePath];
[request setHTTPBodyStream:stream];
[request setHTTPMethod:@"POST"];
[NSURLConnection sendAsynchronousRequest:request queue:[NSOperationQueue mainQueue]
                       completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {
    NSLog(@"Finished with status code: %i", [(NSHTTPURLResponse *)response statusCode]);
}]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T17:42:12.213

您可以使用 a`NSInputStream`提供要通过 发布的数据`-[NSMutableURLRequest setHTTPBodyStream:]`。这可能是从文件中读取的输入流。您可能需要`connection:needNewBodyStream:`在 URL 连接委托中实现该方法，以提供一个新的、未打开的流，以防系统需要重新传输数据。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T18:17:08.313

做到这一点的一种方法是将异步 NSInputStream 与文件一起使用。当异步连接要求您提供更多数据时，您从文件中读取数据。你有几种方法可以做到这一点：

*   UNIX/BSD 接口。使用 open（或 fopen）、malloc、读取并从 malloced 数据创建一个 NSData 对象

*   如果您知道，请使用上面的 mmap()

*   使用 Foundation 类 NSFileHandle API 使用 ObjectiveC 或多或少地做同样的事情

You can read up on streams in the 'Stream Programming Guide'. If this doesn't work for you there are lots of open source projects that can upload files, for instance [MKNetworkKit](http://feistygoat.com/blog/2012/05/upload-a-photo-using-objective-c-ios/)

# php - MySQL 数据库中的简单搜索

> ID：12626749
> 
> 赞同：-5
> 
> 时间：2012-09-27T17:15:47.457
> 
> 标签：php, sql, search, mysqldump

我在 mysql 数据库中创建搜索脚本时遇到问题。我尝试了很多脚本，但都失败了。我想做的是这样的：

数据库有一个表，2列（CODE，ID）

在搜索栏中输入最多 20 位的代码格式和代码的脚本显示 ID（最多 5 位）。所有这些都在一个网页中，最好是。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T17:18:03.053

you can do this by like a example is below

```
 $query = " SELECT * FROM scan WHERE   CODE LIKE '%{$each}%' OR ID LIKE '%{$each}%'"; 
```

# javascript - 在给定的时间间隔内创建平滑旋转 (+- x%)

> ID：12626750
> 
> 赞同：1
> 
> 时间：2012-09-27T17:15:53.353
> 
> 标签：javascript, math, animation, 3d, three.js

我的场景中有一个立方体，我想以**特定的起始速度**和**给定的时间间隔**旋转它。
此外，立方体的结束角度应**与开始角度相同**。因此，我想允许时间间隔有± 5% 的偏差。

这是我目前的状态：http: [//jsfiddle.net/5NWab/1/](http://jsfiddle.net/5NWab/1/)。
不要怀疑目前正在*工作*。如果我更改时间间隔，例如通过“3000”：http: [//jsfiddle.net/5NWab/2/](http://jsfiddle.net/5NWab/2/) ，就会出现问题。

我的立方体的基本*move()方法：*

```
Reel.prototype.move = function (delta) {
    if (this.velocity < 0 && this.mesh.rotation.x == 0) {
        return false;
    }

    // Create smooth end rotation
    if (this.velocity < 0 && this.mesh.rotation.x != 0) {
        this.mesh.rotation.x += Math.abs(delta * this.speedUp * 0.5 * this.timeSpan);
        if (Math.abs(this.mesh.rotation.x - 2 * Math.PI) < 0.1) {
            this.mesh.rotation.x = 0;
        }
    }

    else {
        this.mesh.rotation.x += delta * this.velocity;

        this.time -= delta;
        this.velocity = this.speedUp * this.time;
    }
} 
```

问题是我想不出一个解决方案或方法来完成我的主题。`delta`如果我的变量是恒定 的，它就不会那么复杂了。
它应该在*附近，* `60fps = 1000/60`因为我正在使用`requestAnimationFrame()`.

我还发现[了这个问题](https://stackoverflow.com/questions/2708476/rotation-interpolation)，它可以帮助找到解决方案。

我认为代码应该要么

*   在到达实际终点之前减慢速度。 **如果最终角度略大于**所需（开始）角度，
    则应该是这种情况。

***   或应在达到实际终点后加快转速。 如果最终角度比所需（开始）角度**小一点**
    ，则应该是这种情况。** 

 ****但是，当角度与所需角度（即 180° 或 PI）相差一个半圆时是什么情况？

为了澄清我的问题，以下是我的已知和未知数：

**已知：**

*   起始速度
*   时间间隔
*   起始角度（通常为 0）

**我希望立方体**在旋转结束时具有相同的起始角度/位置。因为 FPS 计数不是恒定的，我必须缩短或延长时间间隔才能让立方体进入所需位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T22:12:40.993

这是一种可能的方法，虽然它不像我想要的那么好：http: [//jsfiddle.net/5NWab/8/](http://jsfiddle.net/5NWab/8/)

这个想法是逐渐降低速度，就像你做的那样，根据剩下的时间量，**直到**你到达一个点，立方体必须旋转才能达到它的起始旋转 (0) 变得*大于或等于*在给定当前速度和当前剩余时间的情况下可能进行的旋转量。在那之后，忽略剩余的时间，并根据剩余的旋转量按比例减慢速度。

这对某些人来说效果很好`timeSpans`，但对于其他人来说，结束减速动画需要一点时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T22:27:44.123

如果您希望旋转在特定时间以特定角度结束，那么我建议您不要像当前代码（2012-09-27）那样不断减少旋转，而是在初始化时设置目标时间和旋转动画并计算帧重新计算时的正确旋转。

因此，如果您正在做一个正弦形速度曲线（缓进缓出，中间线性，很好的原生函数来计算它），那么（伪代码不使用您的变量）：

```
//in init
var targetTime = now + animationTime;
// normalize the length of the sine curve
var timeFactor = pi/animationTime;
var startAngle = ...
var endAngle = ...
var angleChange = endAngle - startAngle;

// inside the animation, at some time t
var remainingT = targetTime - t;
if(remainingT <= 0) {
    var angle = endAngle;
} else {
    var angle = startAngle + cos(remainingT * timefactor) * angleChange;
} 
```

[编辑添加 startAngle 到 andle 计算]

因为 cos 函数是奇数（即关于原点对称），当 t 接近 targetTime 时，剩余的 T 接近零，我们在曲线上从 pi 向后移动到 0。sin 形状的曲线向零（和 pi）变平，因此它会在最后（并且在开始时）缓和。在 targetTime 处或之后有一个明确的角度归零，因此帧速率中的任何抖动都不会不要只是将其推入无限循环。****

# git - Git cherry-pick 语法和合并分支

> ID：12626754
> 
> 赞同：80
> 
> 时间：2012-09-27T17:16:12.833
> 
> 标签：git, cherry-pick, git-cherry-pick

所以我之前做过无数次樱桃挑选，现在看来我必须在生活中失败，我正试图从一个分支挑选到另一个分支，这应该很容易，但我却得到一个关于它是合并的错误但是没有给出-m？

```
$ git cherry-pick a8c5ad438f6173dc34f6ec45bddcef2ab23285e0
error: Commit a8c5ad438f6173dc34f6ec45bddcef2ab23285e0 is a merge but no -m option was given.
fatal: cherry-pick failed 
```

看起来不对……应该是：

```
$ git cherry-pick a8c5ad438f6173dc34f6ec45bddcef2ab23285e0 
```

从什么时候开始我必须提供 -m 功能？

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2012-09-27T19:17:58.507

`-m`如果提交是*合并提交*，您必须提供，即具有多个父级的提交。

通常，什么`git cherry-pick REV`可以描述为：

1.  *进行rev*与其父级之间的更改。

2.  将这些更改应用于当前 HEAD 并使用*rev*的提交消息提交结果。

合并提交加入了两条开发线。例如，一行实现小部件，另一行消除杂乱。合并为您提供了带有小部件的代码，没有杂乱。

现在考虑挑选过程的第 1 步：git 无法猜测您是要消除混乱还是要实现小部件。你也不能两者都做，因为关于如何做这两者的信息不包含在单个合并提交中，只有结果合并树的内容是。

该`-m`选项允许您告诉 git 如何继续。例如，如果杂波清除发生在`master`并且合并提交是使用 创建的`git merge WIDGET`，那么`git cherry-pick -m 1 merged-commit`将挑选新的小部件，因为合并树和父 1 之间的差异（最后一个杂波清除提交）将完全是小部件添加。另一方面，将删除杂乱，因为父 2（添加小部件的最后一次提交）和*合并提交*`git cherry-pick -m 2 merge-commit`之间的区别正是*小部件*分支中缺少的杂乱删除。

 *** * *

## 回答 #2

> 赞同：33
> 
> 时间：2016-07-30T01:23:16.710

git 要求您指定父编号 ( `-m`)，因为**您的合并提交有两个父**，而 git 不知道合并的哪一侧应该被视为主线。因此，使用此选项，您可以指定主线和cherry-pick 的父编号（从 1 开始），以便重播相对于指定父级的更改。

要找出您的提交父母，请尝试：

```
git show --pretty=raw <merge_commit> 
```

或者：

```
git cat-file -p <merge_commit> 
```

甚至为了更好的 GUI 可见性，请尝试：

```
gitk <merge_commit> 
```

结果，你应该得到类似的东西：

```
commit fc70b1e9f940a6b511cbf86fe20293b181fb7821
tree 8d2ed6b21f074725db4f90e6aca1ebda6bc5d050 
parent 54d59bedb9228fbbb9d645b977173009647a08a9 = <parent1_commit>
parent 80f1016b327cd8482a3855ade89a41ffab64a792 = <parent2_commit> 
```

然后通过以下方式检查您的每个父母的详细信息：

```
git show <parent1_or_2_commit> 
```

^(添加`--stat`以查看已修改文件的列表。)

或者使用以下命令来比较更改（基于上述父级）：

```
git diff <parent1_or_2_commit>..<commit> 
```

^(添加`--stat`以查看已修改文件的列表。)

或使用组合 diff 通过以下方式比较两个父母：

```
git diff --cc <parent1_commit>
git diff --cc <parent2_commit> 
```

然后为您的樱桃选择指定从 1 开始的父编号，例如

```
git cherry-pick -m 1 <merge_commit> 
```

然后跑去`git status`看看是怎么回事。如果您还不想提交更改，请添加`-n`选项以查看会发生什么。然后当你不开心时，重置为 HEAD ( `git reset HEAD --hard`)。如果您遇到 git 冲突，您可能必须手动解决它们或指定合并策略 ( `-X`)，请参阅：[如何解决 Git 中的合并冲突？](https://stackoverflow.com/q/161813/55075)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-01-20T16:40:32.420

就我个人而言，我通常做的是，因为合并结合了 2 个提交，例如，如果我有合并提交 C，它由 2 个父级组成，例如 master 中的提交 A 和来自另一个分支的提交 B 被合并，如果我需要挑选合并我不会打扰令人困惑的命令来挑选合并提交本身，而是我只会单独挑选每个父母 A 和 B，这在您只想挑选提交 B 的情况下也很有帮助来自 master 的案例提交 A 已经被挑选到分支中，一个是在合并发生之前挑选到的分支。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-27T17:45:28.623

手册页中的语法如下：

```
git cherry-pick [--edit] [-n] [-m parent-number] [-s] [-x] [--ff] <commit>... 
```

父编号是指：

> -m parent-number, --mainline parent-number, 通常你不能选择合并，因为你不知道合并的哪一边应该被认为是主线。此选项指定主线的父编号（从 1 开始），并允许cherry-pick 重播相对于指定父的更改。

所以我会仔细检查以确保您拥有正确的提交哈希。您可能想要一个不是来自合并而是来自它之前的提交。否则，您需要使用此标志并指向合并的正确一侧以消除您的请求的歧义。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2020-11-25T16:32:36.970

parent1 提交更改小部件

parent2 提交更改混乱

合并提交（包含两个更改）小部件混乱

git cherry-pick -m 1 merge-commit 合并和 parent1(master) 的差异合并 - master= 小部件

git cherry-pick -m 2 merge-commit 合并和 parent2(WIDGET) 的差异合并 - WIDGET= 混乱**

# c# - 如何以编程方式删除自定义集合中的一行

> ID：12626757
> 
> 赞同：-1
> 
> 时间：2012-09-27T17:16:14.680
> 
> 标签：c#, linq

我有一组使用 Linq 创建的自定义对象。自定义对象的属性之一是类型。它可以是“D2”或“S1”。如果它恰好是“D2”，那么其中两行可能有 type = “D2”，这两行中的一个的 id 为 9 位数，另一行的 id 为 11 位数。在这两行中，我必须删除 id 为九位数的行。如果集合只有一行“D2”，那么我什么都不做。以下代码显示了我如何检查集合是否有两行“D2”。我需要帮助来删除包含九位 id 的行。

```
if (customerDetails.Count(i => i.Type == "D2") > 1)
{
    //additional code to remove nine digit id goes here                  
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T17:24:27.583

也许这样的事情会为你工作？

```
if (customerDetails.Count(i => i.Type == "D2") > 1) 
{
    //additional code to remove nine digit id goes here                  
    var remainingRowCount = customerDetails.RemoveAll(c => c.Type == "D2" && c.ID.ToString().Length == 9);
} 
```

# java - Java - 转换、泛型、对象和数组

> ID：12626762
> 
> 赞同：2
> 
> 时间：2012-09-27T17:16:42.287
> 
> 标签：java, oop, generics

我想知道是否可以将 a 转换`Object`为其他东西。

我有一个对象，其中包含一系列随机顺序的数字，例如：3、4、2、5、1，并且想知道我是否能够将其转换为 int[] 或从中选择某些元素，如序列中的数字？

编辑：所以我有一些代码是：

```
//This contains all the different combinations of the numbers
ArrayList routePop4 = new ArrayList();
//This picks out the first one, just as a test
Object test = routePop4.get(0); 
```

但我的想法是我想遍历测试的每个元素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T17:29:25.363

[对象](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html)不能“包含一系列数字”。然而，Object 的许多子类，例如所有的[Collections](http://docs.oracle.com/javase/6/docs/technotes/guides/collections/index.html)都可以“包含一系列数字”，并且它们带有[`toArray()`](http://docs.oracle.com/javase/6/docs/api/java/util/Collection.html#toArray%28%29)将集合的内容转换为数组的方法。

如果您有一个集合，但只能作为对象访问它，则需要先转换它，然后才能正确使用它：

```
ArrayList<Integer> list = (ArrayList<Integer>)test;
Integer[] arr = list.toArray(new Integer[]{}); 
```

在日常 Java 中，实际使用转换为 Object 的变量是相当罕见的，如果是，那应该是一个危险信号，表明您可能做错了什么。您可以使用[泛型](http://docs.oracle.com/javase/tutorial/java/generics/)来允许包含其他对象的对象泛型这样做，如下所示：

```
ArrayList<Integer> list = new ArrayList<Integer>();
list.add(1); // Can only add integers, list.add("a string") would fail at compile time
int n = list.get(0); // no need to cast, we know list only contains Integers 
```

正如卢克泰勒的回答所暗示的那样，如果您不使用集合，您可能需要自己滚动。也就是说，如果您可以提供更多信息，您将获得更好的答案，您问题的当前文本在 Java 上下文中没有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T17:19:27.030

看到您的编辑后，我建议利用泛型。

当您声明 an 时，`ArrayList`您可以指出它将包含什么样的对象。

例如，如果您知道您的 ArrayList 将包含字符串，您可以这样做：

`List<String> myList = new ArrayList<String>();`

如果列表中的每个元素都是整数数组，您可以这样做：

`List<Integer[]> listOfIntegerArrays = new ArrayList<Integer[]>();`

然后您可以从列表中获取任何元素并将其分配给一个整数数组，如下所示：

`Integer[] integerArray = listOfIntegerArrays.get(0);`

然后你可以像这样遍历列表中的每个整数：

```
for (Integer loopInteger : integerArray) {
    System.out.println("The value: " + loopInteger);
} 
```

更多关于泛型的阅读：

*   [http://thegreyblog.blogspot.com/2011/03/java-generics-tutorial-part-i-basics.html](http://thegreyblog.blogspot.com/2011/03/java-generics-tutorial-part-i-basics.html)
*   [http://docs.oracle.com/javase/tutorial/java/generics/](http://docs.oracle.com/javase/tutorial/java/generics/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T17:21:06.653

你可以这样做：

```
int[] numbersFromObject = new int[yourObject.getAmountOfNumbers()];

// Initialize array with numbers from array
for(int i = 0; i < yourObject.getAmountOfNumbers(); i++) {
numbersFromObject[i] = yourObject.getNumber(i);

} 
```

我不确定您的对象包含哪些方法，但我相信您将能够适应上面提到的以下内容。

我希望这有帮助。

# c - 进程的退出状态如何取决于它是否是静态构建的？

> ID：12626767
> 
> 赞同：3
> 
> 时间：2012-09-27T17:17:03.077
> 
> 标签：c, gcc, static-linking, dynamic-linking, libc

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T17:20:40.070

这正是重点。

没有“void main()”。总是有一个结果值，如果你不返回一个并且在你的程序中不做任何事情，那么返回值就是程序启动时发生在适当寄存器中的值（或者具体来说，无论何时发生在main 是从启动代码中调用的）。这当然取决于程序在 main 之前正在做什么，例如处理共享库。

编辑：要了解这是如何发生的，请尝试以下操作：

```
int foo(void)
{
    return 55;
}

void main(void)
{
    foo();
} 
```

当然，不能保证，但是这个程序的退出代码很有可能是 55，因为这是某个函数返回的最后一个值。想象一下调用发生在 main 之前。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T18:39:57.863

进一步说明克里斯蒂安在说什么。即使您声明`void main()`您的进程将返回之前的任何值`eax`（因为您在 linux x86 架构上）。

```
void main() {
    asm("movl $55, %eax");
} 
```

所以现在它总是返回 55 b/c 以上代码显式初始化`eax`。

```
$ cc rval.c 
$ ./a.out 
$ echo $?
55 
```

同样，此示例仅适用于当前的主要操作系统，因为我假设调用约定。操作系统没有理由不能有不同的调用约定，并且返回值可能在其他地方（RAM、寄存器等）。

# linq - Dynamic Linq .Net 4 错误“用户 ID”无法在当前范围或上下文中解析

> ID：12626771
> 
> 赞同：0
> 
> 时间：2012-09-27T17:17:19.120
> 
> 标签：linq, entity-framework, .net-4.0, dynamic-linq

我试图在我的代码中使用 Dynamic Linq 库，但它给出了这个错误

> 在当前范围或上下文中无法解析“UserId”。确保所有引用的变量都在范围内，加载了所需的模式，并且正确地引用了命名空间。接近简单标识符，第 6 行，第 1 列

这是我的代码

```
 TestDB db = new TestDB();
        string filter = "UserId == 15";
        //var searchResult =
        GridView1.DataSource = from x in db.SearchSummaries.Where(filter)
                               select x;
        GridView1.DataBind(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T17:58:44.937

对动态 Linq 不太熟悉，但从您的错误消息中：

> 在当前范围或上下文中无法解析“UserId”。确保所有引用的变量都在范围内，加载了所需的模式，并且正确地引用了命名空间。接近简单标识符，第 6 行，第 1 列

请试试这个：

1.) 列 UserId 是整数而不是字符串吗？你需要使用：

```
 string filter = "UserId='15'"; 
```

2.) 尝试将 filter 参数作为第二个参数传入：

```
 GridView1.DataSource = db.SearchSummaries.Where("UserId = @0", 15); 
```

3.) 我不知道您是否能够运行“常规”Linq 查询，但如果可以，请尝试：

```
 GridView1.DataSource = db.SearchSummaries.Where(search => search.UserId == 15);                               
    GridView1.DataBind(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T17:20:06.747

试试这个：

```
TestDB db = new TestDB();
    string filter = "xi => xi.UserId == 15";
    //var searchResult =
    GridView1.DataSource = from x in db.SearchSummaries.Where(filter)
                           select x;
    GridView1.DataBind(); 
```

或这个：

```
TestDB db = new TestDB();
    string filter = "UserId=15";
    //var searchResult =
    GridView1.DataSource = from x in db.SearchSummaries.Where(filter)
                           select x;
    GridView1.DataBind(); 
```

编辑：我意识到这不是动态 linq ......但只要你的数据结构正确，它就应该工作。你能把那个贴出来吗？

# asp.net-mvc - Extjs Grid Paging Toolbar Shows All Data and No Page Number

> ID：12626772
> 
> 赞同：0
> 
> 时间：2012-09-27T17:17:21.930
> 
> 标签：asp.net-mvc, extjs, grid, paging, toolbar

I am using extjs paging toolbar on my grid. I have pagesize 5, but it shows all data(default is I guess 25)... but when I click next page, it still shows the first 25 data. and also have issue with page number where it's blank of 2...when it's suppose to say 1 of 2... [Click here to see what it looks like](http://i48.tinypic.com/ofpu14.jpg)

this is my grid...

```
var myPageSize = 5;
store.load({
    params: {
        start: 0,
        limit: myPageSize
    }
});
this.grid = Ext.create('Ext.grid.Panel', {
    title: 'GridView App',
    store: store,
    loadMask: true,
    columns: [{
        header: 'Q1',
        sortable: true,
        dataIndex: 'Q1',
        flex: 1,
    }, {
        header: 'Q2',
        sortable: true,
        dataIndex: 'Q2',
        flex: 1,
    }, {
        header: 'Q3',
        sortable: true,
        dataIndex: 'Q3',
        flex: 1,
    }, {
        header: 'Q4',
        sortable: true,
        dataIndex: 'Q4',
        flex: 1,
    }, {
        header: 'Improvements',
        flex: 1,
        sortable: true,
        dataIndex: 'Improvements'
    }, {
        header: 'Comments',
        flex: 1,
        sortable: true,
        dataIndex: 'Comments'
    }],

    bbar: Ext.create('Ext.PagingToolbar', {
        style: 'border:1px solid #99BBE8;',
        store: store,
        displayInfo: true,
        preprendButtons: true,
        displayMsg: 'Displaying Surveys {0} - {1} of {2}',
        emptyMsg: "No Surveys to display"
    }),

    stripeRows: true,
    trackover: true,
    renderTo: Ext.getBody()
}); 
```

and this is my store

```
var store = Ext.create('Ext.data.JsonStore', {
    storeId: 'myData',
    scope: this,
    fields: [{
        name: 'Q1',
        type: 'int'
    }, {
        name: 'Q2',
        type: 'int'
    }, {
        name: 'Q3',
        type: 'int'
    }, {
        name: 'Q4',
        type: 'int'
    }, {
        name: 'Q5',
        type: 'int'
    }, {
        name: 'Improvements',
        type: 'string'
    }, {
        name: 'Comments',
        type: 'string'
    }],

    sorters: [{
        property: 'Q1',
        direct: 'ASC'
    }],

    proxy: {
        type: 'ajax',
        url: 'GridView/writeRecord',
        reader: new Ext.data.JsonReader({
            root: 'myTable',
            totalProperty: 'count'

        })
    }    
}); 
```

[And my Json looks like this, please click here](http://i45.tinypic.com/s15b0o.jpg)

**UPDATE** JSON RESULT

```
{
"count": 30,
"myTable": [
{
  "Q1": "1",
  "Q2": "1",
  "Q3": "1",
  "Q4": "1",
  "Improvements": "",
  "Comments": "1"
},
{
  "Q1": "1",
  "Q2": "2",
  "Q3": "3",
  "Q4": "4",
  "Improvements": "Iphone5",
  "Comments": "Iphone14"
},
{
  "Q1": "1",
  "Q2": "1",
  "Q3": "3",
  "Q4": "3",
  "Improvements": "This is Comment1-3",
  "Comments": "This is Comment2-3"
}, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T21:42:02.193

问题在于您从服务器返回的数据。使用该商店配置，您必须返回格式如下的 json（请注意，记录字段与您的不同）

```
{
"success" : true,
"count"   : 2,
"myTable" :[{
    "id"   : 1,
    "cod"  :"100001"
    },{
    "id"   : 2,
    "cod"  :"100001"
    }]
} 
```

Store 的 root 参数是 extjs 期望拥有记录数组的位置，success 参数是您可以处理以显示服务器通信错误的参数，而 totalProperty 是您告诉 extjs 您已获取的总记录数的位置。（基于 extjs 4.x 的答案，但我记得 3.x 是一样的）

# c++ - 如果值为空，则在 C++ 中抛出一个值

> ID：12626773
> 
> 赞同：0
> 
> 时间：2012-09-27T17:17:26.307
> 
> 标签：c++

我正在尝试检查字符指针是否为空。如何检查值是否为空我基本上来自 java

```
char* mypath = getenv("MYPATH");
if(!mypath) //this is not working
   throw "path not found";
if(mypath == NULL) //this is also not working
       throw "path not found"; 
```

我收到一个异常“在抛出'char const *'的实例后调用终止”

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-27T17:21:57.730

问题不在于测试：你的两个`if`都是正确的（就编译器而言——出于可读性的原因，第二个更可取）。问题是你没有在任何地方捕捉到异常。您正在抛出 a `char const[13]`，它被转换为 a作为异常的类型，并且您在调用代码中`char const*`没有任何地方。`catch ( char const* )`

在 C++ 中，通常（但根本不需要）只抛出从`std::exception`;派生的类类型。关于此规则的唯一例外是抛出一个`int`for 程序关闭，然后仅当这是您工作的上下文中记录的约定时。（它只有在`main`捕获`int`并返回值时才能正常工作。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-27T17:21:16.013

您需要使用 try/catch 块来捕获异常并进行处理。

例如：

```
#include <stdio.h>
int main(void)
{
  try {
    throw "test";
  }
  catch (const char *s) {
    printf("exception: %s\n", s);
  }
  return 0;
} 
```

请注意，将 C 字符串作为异常抛出确实是不合适的。请参阅[C++ 异常 - 将 c-string 作为异常抛出是否不好？](https://stackoverflow.com/questions/6248404/c-exceptions-is-throwing-c-string-as-an-exception-bad/6249350#6249350)正如@Jefffrey 评论的那样，讨论了这一点以及替代方案。

# java - JDialog 不显示组件

> ID：12626774
> 
> 赞同：1
> 
> 时间：2012-09-27T17:17:28.670
> 
> 标签：java, swing, jdialog, contentpane

我对扩展 JDialog 的类有一个奇怪的问题：

```
class MyDialog extends JDialog {

    private static final long serialVersionUID = 11564288421L;

    public MyDialog(JFrame owner, MyObject object) {
        super(owner, true);
        setSize(300, 200);
        setLocationRelativeTo(owner);
        String title = "Object ID: " + object.getId(); 
        setTitle(title);
        setVisible(true);

        JLabel lblTitle = new JLabel(title);
        lblTitle.setBounds(0, 0, this.getWidth(), 22);
        lblTitle.setFont(new java.awt.Font("Tahoma", 1, 18));
        lblTitle.setHorizontalAlignment(SwingConstants.CENTER);
        getContentPane().setLayout(null);
        getContentPane().add(lblTitle);
    }
} 
```

当我用 , 调用它时`new MyDialog(existingJFrameInstance, existingMyObjectInstance);`，`MyDialog`它会显示并且标题很好，但它的`ContentPane`.

如果我将课程更改为：

```
class MyDialog extends JFrame {

    private static final long serialVersionUID = 11564288421L;

    public MyDialog(JFrame owner, MyObject object) {
        super();
        setSize(300, 200);
        setLocationRelativeTo(owner);
        String title = "Object ID: " + object.getId(); 
        setTitle(title);
        setVisible(true);

        JLabel lblTitle = new JLabel(title);
        lblTitle.setBounds(0, 0, this.getWidth(), 22);
        lblTitle.setFont(new java.awt.Font("Tahoma", 1, 18));
        lblTitle.setHorizontalAlignment(SwingConstants.CENTER);
        getContentPane().setLayout(null);
        getContentPane().add(lblTitle);
    }
} 
```

一切正常。我无法想象这里发生了什么：\

我需要将 Window 设为 Modal，这就是为什么我必须使用`JDialog`而不是`JFrame`.

我尝试在每种可能的组合中使用`this.pack();`, `this.validate();`, `getContentPane().revalidate();`, `getContentPane().repaint();`etc etc etc 并且我在 EDT 中（`SwingUtilities.isEventDispatchThread()`返回`true`）。

请帮忙 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T17:29:03.110

只需将您的`setVisible(true);`调用移至构造函数的末尾即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T17:25:39.147

删除版本`getContentPane()`中的调用`JDialog`，它应该可以工作

# iphone - Search and show record in google map with distance readius in xcode 4

> ID：12626778
> 
> 赞同：0
> 
> 时间：2012-09-27T17:17:39.660
> 
> 标签：iphone, xcode, map, distance

I want to search and show record in google map with distance readius in xcode 4, please provide me details about how I can implement google map as well as to allow user find locations with in a particular radius.

Thanks

# vb.net - Visual Basic - Handle events for class within a list

> ID：12626780
> 
> 赞同：0
> 
> 时间：2012-09-27T17:17:52.817
> 
> 标签：vb.net, event-handling

```
Public Class EquipmentCollection
{
Public Property EquipmentList As List(Of Equipment)
}

Public Class Equipment
{
 Public Event CalculateFired

 Public Sub Calculate
  RaiseEvent CalculateFired
 End Sub
} 
```

How can I handle the CalculateFired event on the Equipment class within the EquipmentCollection class?

.NET 3.5, VB

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T18:13:26.733

有`BindingList`事件来捕获这些更改，但它需要您的 Equipment 类来实现 INotifyPropertyChanged 接口：

```
Public Class Equipment
  Implements INotifyPropertyChanged

  Public Event PropertyChanged(ByVal sender As Object, _
                               ByVal e As PropertyChangedEventArgs) _
               Implements INotifyPropertyChanged.PropertyChanged

  Private _Calculation As Decimal

  Public Sub Calculate(ByVal newNumber As Decimal)
    Me.Calculation = newNumber
  End Sub

  Property Calculation() As Decimal
    Get
      Return _Calculation
    End Get
    Set(ByVal value As Decimal)
      If value <> _Calculation Then
        _Calculation = value
        RaiseEvent PropertyChanged(Me, _
                                   New PropertyChangedEventArgs("Calculation"))
      End If
    End Set
  End Property
End Class 
```

您的 EquipmentCollection 类将侦听更改的事件：

```
Public Class EquipmentCollection
  Private WithEvents _EquipmentList As New BindingList(Of Equipment)

  Public ReadOnly Property EquipmentList() As BindingList(Of Equipment)
    Get
      Return _EquipmentList
    End Get
  End Property

  Private Sub EquipmentList_ListChanged(ByVal sender As Object, _
                                        ByVal e As ListChangedEventArgs) _
              Handles _EquipmentList.ListChanged
    If e.ListChangedType = ListChangedType.ItemChanged Then
      If e.PropertyDescriptor IsNot Nothing AndAlso _
         e.PropertyDescriptor.Name = "Calculation" Then
        MessageBox.Show("New Calculation = " & _
                        _EquipmentList.Item(e.NewIndex).Calculation.ToString)
      End If
    End If
  End Sub
End Class 
```

简单的实现：

```
Dim ec As New EquipmentCollection
ec.EquipmentList.Add(New Equipment)
ec.EquipmentList.Add(New Equipment)
ec.EquipmentList.Last.Calculate(110.5) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T17:46:30.577

这对我有用。

```
Public Class Form1

    Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load
        Dim ec As New EquipmentCollection
        Dim eq As New Equipment
        Dim el As New List(Of Equipment)

        eq = New Equipment
        el.Add(eq)
        eq = New Equipment
        el.Add(eq)
        eq = New Equipment
        el.Add(eq)
        eq = New Equipment
        el.Add(eq)
        eq = New Equipment
        el.Add(eq)
        eq = New Equipment
        el.Add(eq)
        eq = New Equipment
        el.Add(eq)

        ec.EquipmentList = el

        ec.EquipmentList.Item(2).Calculate()
    End Sub
End Class

Public Class EquipmentCollection
    Private WithEvents _EquipmentList As New List(Of Equipment)

    Public Property EquipmentList As List(Of Equipment)
        Get
            Return _EquipmentList
        End Get
        Set(value As List(Of Equipment))
            Dim counter As Integer

            _EquipmentList = value

            For counter = 0 To _EquipmentList.Count - 1
                AddHandler _EquipmentList.Item(counter).CalculateFired, AddressOf HandleCalculateFired
            Next
        End Set
    End Property

    Private Sub HandleCalculateFired()
        MsgBox("calc was fired")
    End Sub
End Class

Public Class Equipment
    Public Event CalculateFired()

    Public Sub Calculate()
        RaiseEvent CalculateFired()
    End Sub
End Class 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T17:37:25.343

您需要在 EquipmentCollection 中为您要为其处理事件的设备列表中的每个对象添加一个事件处理程序。

请参阅有关事件和事件处理程序的 MSDN 页面。 [http://msdn.microsoft.com/en-us/library/2z7x8ys3%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/2z7x8ys3%28v=vs.80%29.aspx)

# scala - Scala and Sindi: Is there a better way to get new classes with user input?

> ID：12626786
> 
> 赞同：1
> 
> 时间：2012-09-27T17:18:10.617
> 
> 标签：scala, ioc-container

since a few weeks I play with Sindi 0.5 (IoC Container) in my Scala (2.9.1) project. 99% are fine but often I need new instances of a class with user input. In the [Sindi User Guide](http://aloiscochard.github.com/sindi/) all constructor parameters are injected as static values and I didn't found other tutorials of Sindi. So I test the following example code:

```
import sindi._

trait Digits {
  val dig1: Int
  val dig2: Double
}

class MyDigits(override val dig1: Int, override val dig2: Double) extends Digits {
  override def toString = super.toString + "\ndigit 1: " + dig1 + "\ndigit 2: " + dig2
}

//DigitModule ist Sindi specific.
final class DigitModule(override val ctx: Context) extends Module {
  override val bindings = Bindings(
    bind[Digits] to provider(new MyDigits(digit1, digit2))
  )
  private var digit1: Int = _
  private var digit2: Double = _

  def digits(d1: Int, d2: Double) : Digits = {
    digit1 = d1
    digit2 = d2
    inject[Digits]
  }
} 
```

This DigitModule works. The method digits() can be called from another Context (also Sindi specific) with values from a user. But is this the best solution? The method writes the parameter values into the private vars and then the inject[Digits] command creates/inject a new MyDigit class with the values of the private vars. I think this indirection is a poor way and I hope of a solution like inject[Digits](Int, Double) or something like this. A solution without indirection wouldn't go amiss.

Thank you

Olaf

# loops - wordpress super loop style posts in rows N times

> ID：12626787
> 
> 赞同：1
> 
> 时间：2012-09-27T17:18:11.580
> 
> 标签：loops, while-loop, wordpress

I am trying to adapt the Wordpress loop to style posts differently in rows that get infinitely smaller until all posts are displayed

The concept here is to display posts in rows

first row 1 post second row 2 posts third row 3 posts fourth row 4 posts fifth row 5 posts sixth row 6 posts seventh row 7 posts

and onward until all posts have been retrieved

the below code is limited and does not do the above how would you adapt to make the below do the above?

the below code is functional and can be seen here: [http://ccs.btcny.net/redhook/](http://ccs.btcny.net/redhook/)

```
<?php if (have_posts()) : ?>
<?php $count = 0; ?>
<?php while (have_posts()) : the_post(); ?>
<?php $count++; ?>
<?php if ($count == 1) : ?>
<div class="style-1"><?php the_content(); ?></div>
<?php elseif ($count == 2 || $count == 3) : ?>
<div class="style-2"><?php the_content(); ?></div>
<?php elseif ($count == 4 || $count == 5 || $count == 6) : ?>
<div class="style-3"><?php the_content(); ?></div>
<?php elseif ($count == 7 || $count == 8 || $count == 9 || $count == 10) : ?>
<div class="style-4"><?php the_content(); ?></div>
<?php elseif ($count == 11 || $count == 12 || $count == 13 || $count == 14 || $count == 15 ) : ?>
<div class="style-5"><?php the_content(); ?></div>
<?php elseif ($count >= 16 ) : ?>
<div class="style-6"><?php the_content(); ?></div>
<?php endif; ?>
<?php endwhile; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T17:49:55.567

多么优雅的想法！尝试这样的事情：

```
<?php
if (have_posts()):
    $count = 0;
    while (have_posts()):
        $count++;
?>
    <div class="style-<?php echo $count; ?>">
    <?php
        for( $i = 1; $i <= $count; $i++ ):
            if (have_posts()):
                the_post();
                the_content(); 
            endif;
        endfor;
    ?>
    </div>
<?php 
    endwhile;
?> 
```

`while`循环计数帖子和`<div>'s`输出。内部 div 执行`for`body 的次数与当前`$count`值一样多。所以 for`$count = 1`循环执行 1 次，然后 for`$count = 2`循环执行 2 次，依此类推。内部循环 wp 函数`the_post()`迭代帖子索引并`the_content()`输出当前帖子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T17:53:19.133

这是我的解决方案。基本上我通过检查下一个元素是否在当前行内来设置行号。为此，我需要查看下一个索引是否等于下一行的第一个索引。

棘手的部分是找到行中第一项的索引。由于这不是线性的而是几何顺序，因此每行中的项目数将增加。要计算下一行的第一项，我需要将当前行（在本例中只是当前行）中的元素数添加到当前行的第一个索引。当我获得下一行的第一个索引并且下一项将等于该数字时，我需要转到下一行并为该计算索引设置当前行的第一个索引。

```
<?php //The first index of the first row is 1?>
<?php $row = 1;?>
<?php $curFirstIndex = 1;?>

<?php //start counting items ?>
<?php $count = 0;?>
<?php while (have_posts()) : the_post();?>

   <?php //create actual html code ?>
   <div class="style-<?php echo $row;?>"><?php the_content(); ?></div>

   <?php //check if the next item is equal to the first index of the next row ?>
   <?php if ($count+1 >= ($row + $curFirstIndex)) :
       <?php 
         //the next item will be in the new row
         //in $curFirstIndex store the first number of the current row
         $curFirstIndex = $row + $curFirstIndex;

         //go to the next row
         $row++;
       ?>
   <?php endif; ?>
   <?php $count++;?>

<?php endwhile;?> 
```

**[编辑]**

上述解决方案有效，但它有一个小缺陷，即它将逻辑合并到模板中。Wordpress 不遵循严格的层分离，但在我看来，如果可能的话，尝试这样做总是好的。所以我想出了两种方法，可以在模板文件中减少 this 的逻辑并将逻辑移到外面。由于 wordpress 的主题中有 functions.php，我们可以使用这个文件来创建一个处理该逻辑的函数。这是代码

模板视图文件：

```
<?php //Initial values?>
<?php $row = 1;?>
<?php $count = 1;?>
<?php while (have_posts()) : the_post();?>

   <?php //create actual html code ?>
   <div class="style-<?php echo $row;?>"><?php the_content(); ?></div>

   <?php //check if the current item is the last in the row ?>
   <?php if ($count == getRowLastItemIndex($row)) {$row++;} ?>
   <?php $count++;?>

<?php endwhile;?> 
```

在functions.php中：

```
function getRowLastItemIndex($row) {
    $index = 0;
    for($i = 1; $i <= $row; $i++) {
        $index += $i;
    }
    return $index;
} 
```

或者通过以下方式使其更加独立

模板文件

```
<?php //Initial values?>
<?php $row = 1;?>
<?php $count = 1;?>
<?php while (have_posts()) : the_post();?>

   <?php //create actual html code ?>
   <div class="style-<?php echo $row;?>"><?php the_content(); ?></div>

   <?php $row = getRowNumber($row,$count);?>
   <?php $count++;?>

<?php endwhile;?> 
```

并在functions.php中添加另一个函数

```
function getRowNumber($row,$count) {

    if ($count == getRowLastItemIndex($row)) 
        $row++;
    } 
    return $row;
} 
```

# ruby-on-rails - 只允许非唯一组合

> ID：12626794
> 
> 赞同：-1
> 
> 时间：2012-09-27T17:18:47.873
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1

我想在我的接口表中禁止 5 列的非唯一组合。例如以下列：

```
:case_number, :client_name, :matter_name, :country, :engagement_code,
these rows should be allowed:
1,1,1,1,1
1,1,1,1,1
1,1,1,1,1

and these rows should not be allowed:
1,2,1,1,1
2,3,1,1,1
1,1,4,5,1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T18:02:36.963

我想到了：

在模型中添加：

```
validate :non_unique_combination?

def non_unique_combination?                                     
    if EvidenceImportInterface.count > 0 and 
       !(EvidenceImportInterface.exists?(:case_number => self.case_number,
                                        :client_name =>  self.client_name,
                                        :matter_name =>  self.matter_name,
                                        :country =>  self.country,
                                        :engagement_code =>  self.engagement_code))                                                 
        errors.add(:case_number,'Combination not valid')
    end 
end 
```

# ruby-on-rails - Rails ActiveAdmin 注册，包装另一个资源

> ID：12626795
> 
> 赞同：0
> 
> 时间：2012-09-27T17:18:52.620
> 
> 标签：ruby-on-rails, activeadmin

我有 2 个 activeadmin 资源，它们都是模型的子类，使用 STI。例如：

base_model.rb

```
class BaseModel < ActiveRecord::Base

end 
```

男性模型.rb

```
class MaleModel < BaseModel

end 
```

女模特.rb

```
class FemaleModel < BaseModel

end 
```

管理员/male_model.rb

```
ActiveAdmin.register MaleModel do
  menu :parent => "Models", :label => "Male Model"

  # A big long custom form follows...
  form do |f|
    f.inputs
    f.buttons
  end
end 
```

管理员/female_model.rb

```
ActiveAdmin.register FemaleModel do
  menu :parent => "Models", :label => "Female Model"

  # The SAME big long custom form follows...
  form do |f|
    f.inputs
    f.buttons
  end
end 
```

呈现相同表单但创建不同子类（MaleModel 或 FemaleModel）的记录的正确方法是什么？

我现在正在做的是维护 2 个 activeadmin 资源，其中包含几乎完全相同的（庞大的）代码。完全未干燥。请分享您在这种情况下所做的事情。

约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T17:24:56.200

我没有尝试过，但您可以`@object`在控制器中定义一个变量：

```
controller do
    before_filter :set_object, :only => [:new, :edit]
    ....
    def set_object
        @object = MaleModel.find(params[:id]) rescue MaleModel.new
    end
end 
```

然后你可以渲染一个表单并使用变量`@object`而不是`@male_model`or `@female_model`。

```
form :partial => "models/form"

# app/views/models/_form.html.erb
<%= semantic_form_for [:admin, @object] do |f| %>
    <%= f.inputs %>
    <%= f.actions %>
<% end %> 
```

# python - Tkinter 菜单没有选项卡 [仅限 Windows]

> ID：12626797
> 
> 赞同：2
> 
> 时间：2012-09-27T17:18:55.967
> 
> 标签：python, tabs, tkinter, menubar

好吧，我在我的 Python 程序中编写了一个菜单栏，我想在菜单项描述中创建一个选项卡。我的代码：

```
myMenu = Menu(root)
root.config(menu=myMenu)

menu1 = Menu(myMenu)
myMenu.add_cascade(label='Optionen', menu=menu1)
menu1.add_command(label='Informationen' '\t' 'F5', command = info)
menu1.add_command(label='Beenden' '\t' '\t' 'esc', command = ende) 
```

它在 UNIX（Ubuntu 和 Mac OS X）上完美运行，但**Windows**无法运行！ ![没有标签。。](../Images/fb5d3c0340b99d20913343387e6a75cf.png)

希望有人能帮忙！:-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T17:58:02.773

我觉得你运气不好。Tkinter 中的菜单是本机的，因此您受 Microsoft 摆布。

如果您尝试提供表示加速键的字符串，请使用该`accelerator`属性，而不是使用标签中的选项卡来伪造它。

```
menu1.add_command(label='Informationen', command = info, accelerator="F5")
menu1.add_command(label='Beenden', command = ende, accelerator="esc") 
```

# javascript - 从另一个 javascript 函数生成的 html 调用 javascript 函数

> ID：12626798
> 
> 赞同：0
> 
> 时间：2012-09-27T17:19:02.380
> 
> 标签：javascript

我是javascript的新手。正如标题所说，我试图从另一个 javascript 函数生成的 html 调用 javascript 函数。以下是此代码的简单版本：

```
<HTML>
   <HEAD>
   <SCRIPT language="JavaScript">
      function myFunction1()
      {
         var html_text = "<HTML><BODY><FORM><INPUT type=\"button\" onClick=

\"myFunction2()\" value=\"function2\" /></FORM></BODY></HTML>";
         document.write(html_text);
         document.close();
      }

      function myFunction2()
      {
         alert("function2 called!");
      }
   </SCRIPT>
   </HEAD>
   <BODY>
      <FORM><INPUT type="button" onClick="myFunction1()" value="function1" 

/></FORM>
   </BODY>
</HTML> 
```

当我运行 firebug 时，我收到一条错误消息“myFunction2 is not defined”。我想我必须将 myFunction2 放入由 myFunction1 生成的 html 代码中。所以我像这样更改了我的代码：

```
<HTML>
   <HEAD>
   <SCRIPT language="JavaScript">
      function myFunction1()
      {
         var html_text = "<HTML><HEAD><SCRIPT language=\"JavaScript

\">function myFunction2(){alert(\"function2 called!\");}

</SCRIPT></HEAD><BODY><FORM><INPUT type=\"button\" onClick=\"myFunction2()\" 

value=\"function2\" /></FORM></BODY></HTML>";
         document.write(html_text);
         document.close();
      }

      /* function myFunction2()
      {
         alert("function2 called!");
      } */
   </SCRIPT>
   </HEAD>
   <BODY>
      <FORM><INPUT type="button" onClick="myFunction1()" value="function1" 

/></FORM>
   </BODY>
</HTML> 
```

但是，在此更改之后，我得到了一些混乱的结果，并且萤火虫说“var html_text = ...的未终止字符串文字”。有什么建议么？还有，我实际的myFunction2真的很大，如果非要插入到myFunction1生成的html中，有没有好办法放进去？此外，讲师不希望我们使用单独的文件。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T17:27:56.073

这将起作用

```
<HTML>
   <HEAD>
   <SCRIPT language="JavaScript">
      function myFunction1()
      {
         var html_text = "<HTML><BODY><sc"+"ript type=\"text/javascript\">function myFunction2(){alert('im 2')}</sc"+"ript><FORM><INPUT type=\"button\" onClick=\"myFunction2()\" value=\"function2\" /></FORM></BODY></HTML>";
         document.write(html_text);
         document.close();
      }

      function myFunction2()
      {
         alert("function2 called!");
      }
   </SCRIPT>
   </HEAD>
   <BODY>
      <FORM><INPUT type="button" onClick="myFunction1()" value="function1"

/></FORM>
   </BODY>
</HTML> 
```

请注意，您不能包含`"<script>"`在字符串中，您必须将其分解为`"<scr" + "ipt>"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T17:28:13.277

我已将您的第一个版本的代码放入[http://jsfiddle.net/EwR6X/](http://jsfiddle.net/EwR6X/)，并进行了一个小修改 - 删除了几个不需要的换行符`onClick=`- 它工作得很好。

# c++ - 通过对象访问类的静态成员

> ID：12626805
> 
> 赞同：5
> 
> 时间：2012-09-27T17:19:26.997
> 
> 标签：c++, class, static-members

> **可能重复：**
> [访问静态成员变量](https://stackoverflow.com/questions/1325607/accessing-static-member-variables)

我有一个符号`inst`，它是 class 的对象`classy`。我需要通过对象的符号访问这个类的静态成员。我试过`inst::staticmember`了，但我的 g++ 说`error: ‘inst’ is not a class or namespace`。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-27T17:20:53.813

您使用点：

```
inst.staticmember 
```

`::`仅用于名称空间或类，您可能已经从编译器错误中看出。

您可以通过两种方式访问​​静态成员变量：通过`classy::staticmember`where `classy`is a class 或`inst.staticmember`where `inst`is class instance。

# javascript - Backbonejs路由器导航功能不会触发路由器功能

> ID：12626807
> 
> 赞同：1
> 
> 时间：2012-09-27T17:19:27.840
> 
> 标签：javascript, backbone.js, router, backbone-routing

我打电话时没有触发我的路由功能`app.navigate("/search#?q="+q, {trigger: true});`。

路由定义得很好，因为如果我在 navigate() 调用后刷新页面，路由功能就会被正确触发。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T11:14:05.573

```
Backbone.history.start({pushState: true}) 
```

这可能会有所帮助。

# python - djcelery、台球和 django_settings_module 的异常警告

> ID：12626808
> 
> 赞同：3
> 
> 时间：2012-09-27T17:19:29.540
> 
> 标签：python, django, linux, djcelery

当为异步进程运行 manage.py celeryd 时，一切都按预期工作，但每次启动时我都会收到一个奇怪的警告。它不会导致任何错误，但我无法让它消失或理解它的含义。

这里是：

```
/home/user/lib/python2.7/billiard-2.7.3.15-py2.7-linux 
-x86_64.egg/billiard/forking.py:455:           
UserWarning: Will add directory '/home/user/webapps/django/proj' to path! 
This is  necessary to accommodate pre-Django 1.4 layouts using setup_environ.
You can skip this warning by adding a DJANGO_SETTINGS_MODULE=settings 
environment variable.

W_OLD_DJANGO_LAYOUT % os.path.realpath(project_dir) 
```

这是不寻常的，因为 django 设置模块已添加到我的 wsgi 中，它适用于除此之外的所有内容。它是否要我将设置添加到 httpd.conf 之类的？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T04:34:02.707

奇怪的是，我刚刚遇到了同样的问题！查找有问题的文件（`billiard/forking.py`），我发现了这个函数：

```
def _Django_old_layout_hack__save():
    if 'DJANGO_PROJECT_DIR' not in os.environ:
        try:
            settings_name = os.environ['DJANGO_SETTINGS_MODULE']
        except KeyError:
            return  # not using Django.

        try:
            project_name, _ = settings_name.split('.', 1)
        except ValueError:
            return  # not modified by setup_environ

        project = __import__(project_name)
        try:
            project_dir = os.path.normpath(_module_parent_dir(project))
        except AttributeError:
            return  # dynamically generated module (no __file__)
        warnings.warn(UserWarning(
            W_OLD_DJANGO_LAYOUT % os.path.realpath(project_dir)
        ))
        os.environ['DJANGO_PROJECT_DIR'] = project_dir 
```

这个函数显然对`os.environ`. 请注意，在检索 之后`DJANGO_SETTINGS_MODULE`，它会尝试将模块名称拆分为句点。这段代码似乎假设，如果你`DJANGO_SETTINGS_MODULE`是一个顶级模块（默认情况下是这样），那么你的环境没有被修改。

*不幸*的是，如果它不是顶级模块，它似乎假定您使用了`setup_environ`，并且它现在必须将项目目录添加到路径中。

在我的例子中，我只是将简单`settings.py`模块移出到它自己的`settings`包中，将它分成通用文件和开发/生产文件。当然，我必须修改`manage.py`并`wsgi.py`指向正确的设置模块。当然，这开始触发此警告。

我解决它的方法是`DJANGO_PROJECT_DIR`直接在我的`manage.py`. 我不确定是否需要在其他地方添加它（例如在生产环境中），但这就是我到目前为止所遇到的。

这是 中的相关行`manage.py`：

```
if __name__ == "__main__":
    os.environ.setdefault("DJANGO_SETTINGS_MODULE", "settings.current")

    # Add the project directory to the path, to appease billiard
    os.environ.setdefault("DJANGO_PROJECT_DIR",
        os.path.dirname(os.path.realpath(__file__))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T21:29:57.150

我正在使用 django 1.4 和 celery 3.0.11。

谢谢@voithos。我试过你的解决方案。这对我有用。

但我遇到了另一种解决方案，更简单。无需创建新的模块设置。

只需将这段代码添加到您的 manage.py 文件中

```
 # Add the project directory to the path, to appease billiard
      os.environ.setdefault("DJANGO_PROJECT_DIR", os.path.dirname(os.path.realpath(__file__))) 
```

最后我的 manage.py 文件看起来像这样

```
if __name__ == "__main__":
      os.environ.setdefault("DJANGO_SETTINGS_MODULE", "sample.settings")

      from django.core.management import execute_from_command_line

      # Add the project directory to the path, to appease billiard
      os.environ.setdefault("DJANGO_PROJECT_DIR",os.path.dirname(os.path.realpath(__file__)))

      execute_from_command_line(sys.argv) 
```

# opengl - JOGL VBO，glDrawElements 的替代品

> ID：12626810
> 
> 赞同：2
> 
> 时间：2012-09-27T17:19:47.373
> 
> 标签：opengl, vbo, indices

我在渲染期间运行以下代码

```
if (fUseVBO) {
            gl.glBindBuffer(GL.GL_ARRAY_BUFFER, VBOTexCoords[0]);
            // Set The TexCoord Pointer To The TexCoord Buffer
            gl.glTexCoordPointer(2, GL.GL_FLOAT, 0, 0);
            gl.glBindBuffer(GL.GL_ARRAY_BUFFER, VBOVertices[0]);
            // Set The Vertex Pointer To The Vertex Buffer
            gl.glVertexPointer(3, GL.GL_FLOAT, 0, 0);
        } else {
            // Specifies the location and data format of an array of vertex
            // coordinates to use when rendering.
            gl.glVertexPointer(3, GL.GL_FLOAT, 0, mVerticesBuffer);
            // Set The Vertex Pointer To Our TexCoord Data
            gl.glTexCoordPointer(2, GL.GL_FLOAT, 0, mTextureBuffer);
        }

        gl.glDrawElements(GL.GL_TRIANGLES, mNumOfIndices,
                        GL.GL_UNSIGNED_SHORT, mIndicesBuffer); 
```

在这种方法中，甚至很难使用纹理坐标和顶点的 VBO，每次渲染时我都会传递索引缓冲区。（我有一个对象的顶点、纹理坐标和索引）

我尝试用以下代码替换 gl.glDrawElements 方法

```
gl.glDrawArrays(GL.GL_TRIANGLES, 0, vertexCount); 
```

但它没有正确渲染对象。

如何摆脱 glDrawElements ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T12:49:45.533

这段代码

```
gl.glDrawArrays(GL.GL_TRIANGLES, 0, vertexCount); 
```

必须改为

```
gl.glDrawArrays(GL.GL_TRIANGLES, 0, mNumOfIndices); 
```

（由 Dnu_12 提供）

# facebook - 打开图表检查用户权限

> ID：12626813
> 
> 赞同：0
> 
> 时间：2012-09-27T17:19:49.433
> 
> 标签：facebook, facebook-javascript-sdk, facebook-opengraph

我的网站上有一种情况，授权我的应用程序的用户稍后可以选择获取他们的朋友列表，因此我想在执行任何操作之前检查他们当前的权限。我发现我可以使用

```
FB.api('/me/permissions', function(response) {
            console.log(response);
        }); 
```

我想检查用户是否具有 read_friendlists 权限，但我没有找到有关该对象的任何信息，因此我不知道如何针对它编写条件。Facebook 在此页面上有一个返回数据的示例[http://developers.facebook.com/docs/reference/api/](http://developers.facebook.com/docs/reference/api/)

但就像我说的，我还没有找到描述该对象的资源。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T18:14:06.763

如果响应中没有`read_friendlists`条目，则您没有该权限 - 根据您需要的特定密钥（权限）的存在或缺乏来编写您的条件

# java - JMF广播能力？

> ID：12626817
> 
> 赞同：0
> 
> 时间：2012-09-27T17:19:58.573
> 
> 标签：java, applet, jmf, broadcasting

我正在使用 JMF 制作从服务器上的网络摄像头到小程序的实时流。当任何客户端打开小程序时，他将能够从服务器上的网络摄像头观看实时流。

到目前为止，我只能**在本地网络上进行单播流式传输**，我必须在服务器上输入目标 ip @ 传输代码。

我想要一种方法使每个客户端都可以进行传输，从任何**远程**机器访问小程序。

在此先感谢，阿里 Zein

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:18:02.457

毕竟我们所有人都被“易于使用”的flash所主宰，java小程序及其多功能性已被遗忘。但是，如果您说“我是 java 人”，请努力学习 jmf 的书和 SO 的页面。经验丰富的程序员提供了非常有用的答案。

[一个 3\. 派对免费选项是来自http://www.kemottron.com](http://www.kemottron.com)的 MODERATOR-CONFERENCE 它有几个额外的功能，包括从网络摄像头和桌面直播。

干杯，

# twitter - “[App]”想要访问 Twitter 帐户警报未在 iOS 6 中显示

> ID：12626821
> 
> 赞同：11
> 
> 时间：2012-09-27T17:20:08.010
> 
> 标签：twitter, ios6

我正在使用 TWTweetComposeViewController 访问用户的 Twitter 帐户，他/她已在“设置”->“Twitter”中添加了该帐户。当应用程序尝试访问 Twitter 帐户时，它应该会显示一条警报，其中包含类似以下的消息：

```
"[AppName] Would Like Access to Twitter Accounts" 
```

您可以点击“不允许”或“确定”。我想这是操作系统本身显示的警报，因为点击“确定”实际上可以访问 Twitter。

当我在 iOS 5.x 设备上测试时会显示上述警报，但在 iOS 6 设备上测试时并非如此。我希望在我发送以下消息时显示警报，但我尚未在设置中获得我的应用程序对 Twitter 的访问权限：

```
[TWTweetComposeViewController canSendTweet] 
```

如上所述，它不会发生。有谁知道这是否是 iOS 6 中的一个已知错误？我一直无法在 SO 上找到任何帖子，因为我找不到其他不同行为的原因，我认为这是一个错误。

仅供参考，我正在以下两种设备上进行测试：

*   装有 iOS 5.1 的 iPhone 4
*   装有 iOS 6.0 的 iPhone 4

**更新**

我使用[DETweetComposeViewController](https://github.com/doubleencore/DETweetComposeViewController)，它通过以下方式检查 iOS 5：

```
+ (BOOL)de_isIOS5
{
    return (NSClassFromString(@"NSJSONSerialization") != nil);
} 
```

但是由于 NSJSONSerialization 类也出现在 iOS 6 中，所以这不应该是原因。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-01T19:35:15.473

我整天都在 iOS 5.1 和 iOS 6.0 上整理同样的事情。

只要在“设置”中配置了 Twitter 帐户，我的应用程序在 iOS 6.0 中不再要求 Twitter 访问权限只是为了显示一个`TWTweetComposeViewController`. 我已经通过手动关闭我的应用程序的 Twitter 访问来验证这一点`Settings > Privacy > Twitter`。关闭访问后，我被正确地拒绝了使用 TWRequest 创建友谊的能力，但仍然可以弹出`TWTweetComposeViewController`. 在我授予它访问权限之前，我每次都会在 iOS 5.1 中收到提示。

这对我来说很有意义。所做`TWTweetComposeViewController`的只是启动推文，因此如果用户已经配置了设备范围的 Twitter 帐户，则该权限应该足以从任何地方发送推文。必须在每个应用程序的基础上授予访问权限确实是一个不必要的额外步骤。

如果尚未配置 Twitter 帐户，`TWTweetComposeViewController`将提示此消息：

```
No Twitter Accounts
There are no Twitter accounts
configured. You can add or create
a Twitter account in Settings. 
```

带有方便的按钮“设置”和“取消”。

附注：iOS 6 也仅`"[AppName] Would Like Access to Twitter Accounts"`在应用程序第一次请求访问时提示消息。

之后，您必须重置`Settings > General > Reset > Reset Location & Privacy`以获取询问提示。即使您删除并重新安装/重建应用程序，“已经询问过一次”设置仍然存在。您可以在 中手动启用访问`Settings > Privacy`，但重置是让提示重新显示的唯一方法（如果这对您的测试很重要）。

我发现了两件额外的事情。在 的完成块中`[ACAccountStore requestAccessToAccountsWithType:options:completion:]`，如果`granted == NO`：

1.  如果`[error code] == 6`，您的用户没有定义帐户。
2.  如果`error == nil`，您的用户刚刚或以前拒绝访问您的应用程序。如果之前发生过，该请求会被静默忽略，屏幕上不会显示任何警报，也不会点击“不允许”按钮。

# java - 连接到 RPC SOAP 服务的确切 url 是什么

> ID：12626826
> 
> 赞同：0
> 
> 时间：2012-09-27T17:20:37.027
> 
> 标签：java, axis

我通过此 url 获得了 MyService（AXIS 1.4 服务）：

```
curl http://localhost:9999/prefix/services/MyService?wsdl 
```

将它放到浏览器查询行中，我返回了 XML WSDL。

问题是：我应该在代码中使用哪个 URL 来连接到 MyService 以在那里调用特定的方法？

这是我现在的连接代码：

```
InterfacePortType_Stub stub 
                              = (InterfacePortType_Stub) myService.getPort();

stub._setProperty(javax.xml.rpc.Stub.ENDPOINT_ADDRESS_PROPERTY, 
    "http://localhost:9999/prefix/services/MyService");

this.port = stub;

final MyResponse myResponse = port.myMethod(myRequest); 
```

所以，我用`**http://localhost:9999/prefix/services/MyService**`字符串来连接。但它不起作用 - myResponse.status = 失败。

在我生成的文件的顶部，我有一个像这样的标题：

> ```
> // This class was generated by the JAXRPC SI, do not edit.
> // Contents subject to change without notice.
> // JAX-RPC Standard Implementation (1.1.2_01, build R40)
> // Generated source version: 1.1.2 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T17:48:11.457

要调用 Axis 服务，首先需要对其进行正确初始化。您的代码应如下所示：

```
//Your service interface.
InterfacePortTypeService proxy = null;

//Create a locator instance from Axis generated class.
InterfacePortTypeLocator locator = new InterfacePortTypeLocator();

//Get your service from locator.
proxy = locator.getInterfacePortType(new URL("http://localhost:9999/prefix/services/MyService"));

//Call your methods;
proxy.someMethod(); 
```

我不知道您生成的所有类的名称，所以这只是一个如何初始化`Axis`服务的示例。

# wordpress - Wordpress 自定义帖子类型类别

> ID：12626836
> 
> 赞同：5
> 
> 时间：2012-09-27T17:21:26.320
> 
> 标签：wordpress, categories, custom-post-type

我正在为一家旅行社建立一个 wordpress 网站，该旅行社向各个地点提供特别优惠并将其显示在一个页面上。因此，我使用以下代码来过滤我设置的自定义帖子类型，并显示单独的帖子摘录和图像。

这是我所拥有的：

```
<code>
    <?php
/**
 * Template Name: Deals 1 column
 */

get_header(); ?>

<div id="content" class="two_third <?php echo of_get_option('blog_sidebar_pos') ?>">

<div id="sort">
        <h5>SORT BY : </h5>
        <ul>
            <li><a href="<?php echo add_query_arg(array ('paged' => '1',  'orderby' => 'date', 'order' => 'DESC'));?>">Date</a></li>
            <li><a href="<?php echo add_query_arg(array ('paged' => '1',  'orderby' => 'title', 'order' => 'ASC'));?>">Deal (A to Z)</a></li>
            <li><a href="<?php echo add_query_arg(array ('paged' => '1',  'orderby' => 'meta_value', 'order' => 'ASC', 'meta_key' => 'price'));?>">price (A to Z)</a></li>
        </ul>
</div>
<div id="filter">
        <h5>FILTER BY : </h5>
        <ul>
        <?php
        $categories=  get_categories('taxonomy=types&title_li=');
        foreach ($categories as $category){ ?>
        <li><a href="<?php echo add_query_arg(array ('paged' => '1',  'filter' => $category->category_nicename));?>" title="Filter by <?php echo $category->name;?>"><?php echo $category->name;?></a></li>
        <?php }?>
        </ul>
</div>
<div id="reset-filters">
        <a href="<?php echo add_query_arg(array ('paged' => '1',  'filter' => ''));?>">reset filters</a>
</div>

<div id="gallery" class="one_column">

    <ul class="portfolio">
        <?php
        $query = 'post_type=gs_deals&types='.$_GET['filter'].'&orderby='.$_GET['orderby'].'&order='.$_GET['order'].'&meta_key='.$_GET['meta_key'].'&posts_per_page=3&paged='.$paged;
        query_posts($query);
        if (have_posts()) : while (have_posts()) : the_post();
        $custom = get_post_custom(get_the_ID()); 
        ?>
        <?php
        $categories=  get_categories('taxonomy=types&title_li=');
        foreach ($categories as $category){ ?>
        <div id="category"><h3><?php echo $category->name;?></h3>
        <?php }?>
        <li class="clearfix">
            <div class="clearfix">
                <span class="image-border"><a class="image-wrap" href="<?php the_permalink() ?>" title="<?php _e('Permanent Link to', 'theme1512');?> <?php the_title_attribute(); ?>" ><?php the_post_thumbnail( 'portfolio-post-thumbnail-xl' ); ?></a></span>
                <div class="folio-desc">
                <h6 class="project">Deal!</h6>
                <p><a href="<?php the_permalink(); ?>" rel="bookmark" title="<?php echo get_the_title(); ?>"><?php the_title(); ?></a></p>
                <h6 class="client">Price :</h6>
                <h4><?php echo $custom["price"][0];?></h4>
                <p class="short"><?php echo $custom["short_text"][0];?></p>
                <p><a href="<?php the_permalink(); ?>">View Details</a></p>
            </div>
            </div>
        </li>
        </div>
        <?php endwhile; ?>
        <?php endif;?>

    </ul>
    <div class="posts-nav">
        <div class="prev"><?php next_posts_link(__('? Older Projects')) ?></div>
        <div class="next"><?php previous_posts_link(__('Newer Projects ?')) ?></div>
    </div>
</div><!-- #content -->
</div>
<!-- end #main -->
<?php get_sidebar(); ?>
<?php get_footer(); ?>

</code> 
```

这是我的functions.php处理这个：

```
//////REGISTER A CUSTOM POST TYPE
add_action('init', 'gs_deals_register');//Always use a shortname like "gs_" not to see any 404 errors

function gs_deals_register(){
    $args = array(
        'label' => __('Deals List'),
        'singular_label' => __('Deals'),
        'public' => true,
        'show_ui' => true,
        'capability_type' => 'post',
        'hierarchical' => false,
        'rewrite' => array('slug' => 'deals'),//Use a slug like "work" or "project" that shouldnt be same with your page name
        'supports' => array('title', 'editor', 'thumbnail')//Boxes will be showed in the panel
       );

    register_post_type( 'gs_deals' , $args );
}

//////ADD CUSTOM INPUTS (Client & Short_text)
add_action("admin_init", "admin_init");
add_action('save_post', 'save_options');

function admin_init(){
    add_meta_box("gs_dealsInfo-meta", "Deals Options", "meta_options", "gs_deals", "side", "low");
}

function meta_options(){
    global $post;
    $custom = get_post_custom($post->ID);
    $price = $custom["price"][0];
    $short_text = $custom["short_text"][0];
    ?>
    <p><label>Price:</label><br /><input name="price" value="<?php echo $price; ?>" /></p>
    <p><label>Short Text:</label><br /><textarea name="short_text"><?php echo $short_text; ?></textarea></p>
<?php
}

function save_options(){
    if ( defined('DOING_AUTOSAVE') && DOING_AUTOSAVE ) return $post_id;
    global $post;
    update_post_meta($post->ID, "price", $_POST["price"]);
    update_post_meta($post->ID, "short_text", $_POST["short_text"]);
}

//////ADD TAXONOMY FOR FILTERING (Taxonomy name: types)
register_taxonomy("types", array("gs_deals"), array("hierarchical" => true, "label" => "Types", "singular_label" => "Types", "rewrite" => true));

//////ADD HOOKS FOR PANEL VIEW
add_filter("manage_edit-gs_deals_columns", "gs_deals_edit_columns"); 
add_action("manage_posts_custom_column",  "gs_deals_custom_columns");

function gs_deals_edit_columns($columns){
    $columns = array(
        "cb" => "<input type=\"checkbox\" />",
        "title" => "Deal Title",
        "short_text" => "Short Text",
        "price" => "Price",
        "types" => "Types",
    );

    return $columns;
}

function gs_deals_custom_columns($column){
    global $post;
    $custom = get_post_custom();
    switch ($column)
    {
        case "short_text":
            echo $custom["short_text"][0];
            break;
        case "price":
            echo $custom["price"][0];
            break;
        case "types":
            echo get_the_term_list($post->ID, 'types', '', ', ','');
            break;
    } 
} 
```

我想在相应帖子上方显示类别名称，但似乎没有成功。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T17:36:15.480

您是否在functions.php 中为您的自定义帖子类型启用了类别？

```
 register_taxonomy_for_object_type('category', '[name of custom post type]'); 
```

另外，您是否尝试在调用 get_categories() 函数后对类别变量执行 var_dump() ？

# c# - 为 DLL 提供设置

> ID：12626838
> 
> 赞同：1
> 
> 时间：2012-09-27T17:21:34.267
> 
> 标签：c#, sql-server-2008, dll, settings

所有，首先我知道这个非常有用的问题和相关答案 [C# DLL config file](https://stackoverflow.com/questions/594298/c-sharp-dll-config-file)。但是，我需要一些关于在我的具体情况下进行的最佳方式的建议。

我有一个使用嵌入式 SQL 的大型应用程序。为了减轻编写 SQL 的负担，我开发了一个带有内置片段库和其他类似功能的 SQL 编辑器工具，以减轻用户每次想要测试查询时启动 Management Studio 的负担并提供常用命令库. 这个实用程序是一个很好的工具，我可能想嵌入到其他应用程序中，所以我把它做成了一个 DLL。现在我有哪些选项可以存储此应用程序的设置？

1.  在主应用程序中使用 .config 文件创建设置并将属性对象传递给 DLL；它由主应用程序在 DLL 关闭时保存。在这种情况下（可能是我最好的选择）是否有一种模式可以用来处理对我的编辑器设置的更改？

2.  为 DLL 创建一个 .config 并将设置存储在同一位置，而不管调用应用程序。[注意，我在链接的问题中看到了这样做的问题——我只可能从单个应用程序调用 DLL]。

3.  还有什么神奇的方法吗？

谢谢你的时间。

# compilation - Nvidia Cuda 编译 - OpenCl 错误

> ID：12626839
> 
> 赞同：0
> 
> 时间：2012-09-27T17:21:38.460
> 
> 标签：compilation, cuda, nvidia

我正在尝试从从 Nvidia 下载的 Cuda SDK 编译东西。当我输入“sudo make”时，一切都很顺利，直到突然我收到这个错误：

```
/usr/bin/ld: error: cannot open /usr/lib//libOpenCL.so: No such file or directory 
```

之后出现了大约 100 行这样的错误：

```
undefined reference to 'clGetProgramBuildInfo' 
```

最后它说：

```
collect2: ld returned 1 exit status 
```

我正在运行带有 Gt 650M 图形的 Ubuntu 12.04 LTS。我已经安装了驱动程序、bumblebee 和 cuda 工具包 4.1，但在过去的几个小时里，这件事一直让我发疯。谷歌没有提供任何有用的东西。谢谢你的帮助！

PS他们的makefile看起来像这样：

```
 # GPU Computing SDK Version 4.1.15
all:  
    +@$(MAKE) -C ./shared
    +@$(MAKE) -C ./C
    +@$(MAKE) -C ./CUDALibraries
    +@$(MAKE) -C ./OpenCL

clean: 
    +@$(MAKE) -C ./shared clean
    +@$(MAKE) -C ./C clean
    +@$(MAKE) -C ./CUDALibraries clean
    +@$(MAKE) -C ./OpenCL clean

clobber:
    +@$(MAKE) -C ./shared clobber
    +@$(MAKE) -C ./C clobber
    +@$(MAKE) -C ./CUDALibraries clobber
    +@$(MAKE) -C ./OpenCL clobber 
```

# android - 如何使用 achartengine API 替换 Piechart 的图例？

> ID：12626844
> 
> 赞同：3
> 
> 时间：2012-09-27T17:21:58.633
> 
> 标签：android, achartengine

我正在使用 Achartengine Api 绘制饼图。我在饼图底部水平显示图例。但我想将它垂直显示在饼图的右侧。我听说可以使用 setMargins() 方法来完成。如果我可以使用它，请解释如何使用它。

先感谢您。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T18:26:00.133

`setMargins()`顾名思义，API 调用用于设置图表周围的边距。您无法使用它移动图例，实际上您根本无法使用 AChartEngine 移动图例。你可以隐藏它。

# javascript - iScroll 4：允许用户缩小页面内容以及放大

> ID：12626848
> 
> 赞同：2
> 
> 时间：2012-09-27T17:22:22.690
> 
> 标签：javascript, html, iscroll4

我正在尝试实现具有以下外观的移动网站：

1.  一个固定的标题
2.  可滚动、可缩放的内容
3.  首次加载页面时缩小内容

我一直在尝试使用 IScroll 4，结果看起来不错，但是有一个问题我找不到解决方法。我的页面内容是用户生成的 html 表格，通常比屏幕宽。我希望当用户登陆页面时表格的整个宽度都可见。然后，他们可以根据需要放大。

如果您在移动浏览器中查看[IScroll 缩放演示，它会演示该问题。](http://lab.cubiq.org/iscroll/examples/zoom/)页面内容比屏幕宽，不能缩小，只能放大。

更改`initial-scale`视口中的元标记无济于事，因为整个页面（包括标题）都被缩小了：

```
<meta name="viewport" content="width=device-width, initial-scale=0.5, user-scalable=yes, minimum-scale=0.5, maximum-scale=1.0"> 
```

（标题最终将是我不想弄乱的 JQueryMobile 元素）。

并将（v4.2.2，第 119 行）`zoomMin`中的设置从 1 修改为更小的值（例如 0.5）会破坏：`iscroll.js`

```
// Zoom
zoom: false,
zoomMin: 1,
zoomMax: 4, 
```

您可以进一步缩小，但内容会卡住，并且您无法在不重新加载页面的情况下调整其大小。

有谁知道解决这个问题的方法？如有必要，我很乐意尝试其他框架。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T03:54:21.890

要允许缩小，您可以使用您确定的 zoomMin 和 zoomMax，但在实例化 iscroll 时这样做，而不是修改 iscroll.js：

```
 <script type="text/javascript">
    var myScroll;
    function loaded() {
       myScroll = new iScroll('wrapper',
                       { zoom:true, onBeforeScrollStart: null, 
                         zoomMin:0.5, zoomMax: 6 });
    }

    document.addEventListener('touchmove', function (e) { e.preventDefault(); }, false);
    document.addEventListener('DOMContentLoaded', loaded, false);
</script> 
```

我还发现我需要明确设置“滚动”div 的宽度，如下所示：

`$('#scroller').width(your_width)`;

# gwt-platform - 如何通过 GWTP 操作通过网络传输对象数组列表

> ID：12626851
> 
> 赞同：0
> 
> 时间：2012-09-27T17:22:40.920
> 
> 标签：gwt-platform

我正在尝试创建一个操作，其中服务器需要通过 GWTP 操作将对象的数组列表通过线路响应到客户端。

类别类

```
package com.business.share;

import java.io.Serializable;
import javax.persistence.Entity;
import javax.persistence.Id;

public class Category implements Serializable{
    Long id;
    protected String name;
    protected String description;
    protected boolean status;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getDescription() {
        return description;
    }

    public void setDescription(String description) {
        this.description = description;
    }

    public boolean getStatus() {
        return status;
    }

    public void setStatus(boolean status) {
        this.status = status;
    }
} 
```

GetCategories 类

```
package com.business.client.action;

import java.util.ArrayList;
import com.gwtplatform.dispatch.shared.ActionImpl;
import com.business.client.action.GetCategoriesResult;
import com.business.share.Category;

public class GetCategories extends ActionImpl<GetCategoriesResult> {
    private ArrayList<Category> categories;
    @SuppressWarnings("unused")
    public GetCategories() {
        // For serialization only
    }

    public GetCategories(ArrayList<Category> categories) {
        this.categories = categories;
    }

    public ArrayList<Category> getCategories() {
        return categories;
    }
} 
```

GetCategoriesResult 类

```
package com.business.client.action;

import java.util.ArrayList;
import com.gwtplatform.dispatch.shared.Result;
import com.business.share.Category;
public class GetCategoriesResult implements Result {
    private ArrayList<Category> categories;
    @SuppressWarnings("unused")
    private GetCategoriesResult() {
        // For serialization only
    }

    public GetCategoriesResult(ArrayList<Category> categories) {
        this.categories = categories;
    }

    public ArrayList<Category> getCategories() {
    return categories;
    }
} 
```

GetCategoriesActionHandler 类

```
package com.business.server.handler;

import java.util.ArrayList;
import com.gwtplatform.dispatch.server.actionhandler.ActionHandler;
import com.business.client.action.GetCategories;
import com.business.client.action.GetCategoriesResult;
import com.business.share.Category;
import com.google.inject.Inject;
import com.googlecode.objectify.Objectify;
import com.googlecode.objectify.ObjectifyService;
import com.googlecode.objectify.Query;
import com.gwtplatform.dispatch.server.ExecutionContext;
import com.gwtplatform.dispatch.shared.ActionException;

public class GetCategoriesActionHandler implements
    ActionHandler<GetCategories, GetCategoriesResult> {

    @Inject
    public GetCategoriesActionHandler() {
    }

    @Override
    public GetCategoriesResult execute(GetCategories action,
        ExecutionContext context) throws ActionException {

        ArrayList<Category> categories = new ArrayList<Category>();

        // dummy data    
        Category cat1 = new Category();
        cat1.setName("cat1");
        cat1.setDescription("cat1 desc");
        cat1.setStatus(true);   
        Category cat2 = new Category();
        cat1.setName("cat2");
        cat1.setDescription("cat2 desc");
        cat1.setStatus(false);  
        categories.add(cat1);
        categories.add(cat2);   
        return new GetCategoriesResult(categories);
    }

    @Override
    public void undo(GetCategories action, GetCategoriesResult result,
        ExecutionContext context) throws ActionException {
    }

    @Override
    public Class<GetCategories> getActionType() {
        return GetCategories.class;
    }
} 
```

这是 CategoryPresenter 中的一段代码，它将异步发送到服务器。

```
@Override
protected void onReset() {
    super.onReset();
    GetCategories getCategoriesAction = new GetCategories();
    dispatchAsync.execute(getCategoriesAction, getCategoriesCallback);
}

private final AsyncCallback<GetCategoriesResult> getCategoriesCallback = 
    new AsyncCallback<GetCategoriesResult>() {

    @Override
    public void onFailure(Throwable caught) {
    }

    @Override
    public void onSuccess(GetCategoriesResult result) {
        getView().getCategoryListBox().clear();
        ArrayList<Category> categories = result.getCategories();
        for(Category category : categories)  {
            getView().getCategoryListBox().addItem(category.getName());
        }
    }
}; 
```

我不知道这段代码有什么问题，但是 GWT 编译器总是给出这样的错误。

> 编译模块 com.business.Business 验证新编译的单元 在第一次通过时忽略了 3 个编译错误的单元。编译时使用 -strict 或将 -logLevel 设置为 TRACE 或 DEBUG 以查看所有错误。查找入口点类 [错误] 'file:/.blah..blah..blah../businessapp/src/com/business/client/presenter/CategoryPresenter.java' 中的错误 [错误] 第 75 行：没有源代码可用于 com.business.share.Category 类型；你忘了继承一个必需的模块吗？[错误] 'file:/.blah..blah..blah../businessapp/src/com/business/client/action/GetCategoriesResult.java' 中的错误 [错误] 第 11 行：没有可用于类型 com 的源代码.business.share.类别；你忘了继承一个必需的模块吗？[错误] 找不到类型“com.business.client.Business” [错误] 提示：以前的编译器错误可能导致此类型不可用 [错误] 提示：检查模块的继承链；它可能没有继承所需的模块，或者模块可能没有正确添加其源路径条目

在此错误消息之后，这意味着未找到 com.business.share.Category，但该文件已物理存储在该包中。我不明白为什么 GWT 找不到它。我注意到我在任何地方调用 Category 类，它总是会带来这个错误。有人知道发生了什么吗？

[编辑] 问题解决了。在我的 Business.gwt.xml 中，我有

```
 <source path='shared'/> 
```

但是我的共享包是 com.business.share（没有 d）我只是将包名称从共享重命名为共享。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T05:49:42.490

尝试向`Category`该类添加一个空的构造函数。

# java - 动态规划与背包应用

> ID：12626854
> 
> 赞同：8
> 
> 时间：2012-09-27T17:23:04.153
> 
> 标签：java, algorithm, optimization, geometry, dynamic-programming

我正在研究动态编程，并希望解决以下问题，可以在这里找到[http://www.cs.berkeley.edu/~vazirani/algorithms/chap6.pdf](http://www.cs.berkeley.edu/~vazirani/algorithms/chap6.pdf)：

给你一块长方形布，尺寸为 X 乘 Y，其中 X 和 Y 是正整数，以及可以使用该布制作的 n 个产品的列表。对于 [1,n] 中的每个产品 i，您知道需要一个尺寸为 ai×bi 的矩形布，并且该产品的最终售价为 ci。假设 ai、bi 和 ci 都是正整数。您有一台机器可以将任何矩形布片水平或垂直切成两块。设计一种算法，找到切割 X 乘 Y 块布的最佳策略，以便由所得块制成的产品给出最大的销售价格总和。您可以随意制作任意数量的给定产品副本，如果需要，也可以不制作。（来自 Dasgupta、Papadimitriou 和 Vazirani 的算法。）

似乎我们有一种二维背包问题，但我认为可以通过将权重视为矩形的区域来使用传统的背包算法来解决它。这看起来是一种合理的方法吗？

这是我正在学习的课程的编程作业，因此请仅包含概念讨论和/或伪代码来说明想法。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-28T18:39:01.853

所以你从一个`X * Y`矩形开始。假设最佳解决方案涉及进行垂直（或水平）切割，那么您有两个新的矩形，其尺寸`X * Y1`和. 既然你想最大化你的利润，你需要最大化这些新矩形的利润（*最优子结构*）。因此，您的初始递归如下：对于（水平切割）和（垂直切割）的所有可能值。`X * Y2``Y1 + Y2 = Y`*`f(X, Y) = max(f(X, Y1) + f(X, Y2), f(X1, Y) + f(X2, Y))``X1, X2``Y1, Y2`*

 *现在的问题是*我什么时候真正决定做一个产品？*当产品的一个尺寸等于您当前矩形的尺寸之一时，您可以决定制造产品（为什么？因为如果这不成立，并且最佳解决方案包括制造该产品，那么迟早您将需要制造垂直（或水平）切割，这种情况已经在初始递归中处理），因此您进行适当的切割并且您有一个新的矩形`X * Y1`（或`X1 * Y`），这取决于您为获得产品而进行的切割），在这种情况下递归变为`f(X, Y) = cost of product + f(X1, Y)`.

原问题的解是`f(X, Y)`。这个 dp 解决方案的运行时间是`O(X * Y * (X + Y + number of available products))`：您有`X * Y`可能的矩形，对于每个矩形，您尝试所有可能的剪切 ( `X + Y`)，并尝试从该矩形中制作出可用的产品之一。

另外，看看这个类似的问题：从 2010 年 ICPC 世界总决赛*分享巧克力。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T20:08:01.883

我认为您应该关注机器将布切成两块的事实。这两个部分中的每一个都可以容纳什么？考虑以下：

```
+-------------+-------------------+
|             |       Piece B     |
|             |                   |
|  Piece A    +----------+--------+
|             |          |        |
|             |          |        |
|             |          | Piece  |
+-------------+----------+   C    |
|                        |        |
|         Piece D        |        |
+------------------------+--------+ 
```

这四个适合布料，但不能通过三个切割来实现。（可能不同的安排可以让这些特定的作品实现这一点；将其视为概念图，而不是按比例绘制。我今天的 ascii 艺术技能有限。）

专注于“切入点在哪里”应该为您提供动态编程解决方案。祝你好运。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-12T21:01:39.057

请在**Rect()**函数中包含大小矩形`(0, something)`的必要条件。`(something, 0)`

 *** * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-25T07:41:41.767

优化（）{

```
Rectangle memo[width][height]
optimize(0,0,totalwidth, totalheight, memo) 
```

}

优化（x，y，宽度，高度，备忘录）{

```
if memo[width][height] != null
    return memo[width][height]

rect = new Rectangle(width, height, value = 0)
for each pattern {

    //find vertical cut solution
    leftVerticalRect = optimize (x, y + pattern.height, pattern.width, height-pattern.height,memo)
    rightVerticalRect = optimize(x  + pattern.width, y, width-pattern.width, height)
    verticalcut = new Cut(x + pattern.width, y, x + pattern.width, y + height)

    //find horizontal cut solution
    topHorizontalRect = optimize ( --parameters-- )
    bottomHortizonalRect = optimize( --parameters--)
    horizontalcut = new Cut( --parameters--)

    //see which solution is more optimal
    if (leftVerticalRect.val + rightVerticalRect.val > topHorizontalRect.val + bottomHorizontalRect.val)
        subprobsolution = vertical cut solution
    else
        subprobsolution = horizontal cut solution

    //see if the solution found is greater than previous solutions to this subproblem
    if (subprobsolution.value + pattern.value > rect.value) {
        rect.subrect1 = subprobsolutionrect1
        rect.subrect2 = subprobsolutionrect2
        rect.pattern = pattern
        rect.cut = subprobsolutioncut
        rect.value = rect.subrect1.value + rect.subrect2.value + rect.pattern.value
    }
}

memo[width][height] = rect
return rect 
```

}***

# c - 请解释一下这个C代码

> ID：12626856
> 
> 赞同：-3
> 
> 时间：2012-09-27T17:23:26.097
> 
> 标签：c, validation, integer

我为课堂练习做了部分代码并且代码正在运行，但我并不真正理解特定部分中发生了什么。

谁能解释一下这部分：

```
if(scanf("%d%c", &num1, &term1) != 2 || term1 != '\n'){

    printf("ERROR! You should type an integer e.g 5, 80, 100\n");

} else { .... 
```

完整的代码是：

```
#include <stdio.h>

int main(){

int num1,num2;

char term1,term2;

printf("Type your first integer\n");

if(scanf("%d%c", &num1, &term1) != 2 || term1 != '\n'){

    printf("ERROR! You should type an integer e.g 5, 80, 100\n");

} else {

    printf("Type your second integer\n");

    if (scanf("%d%c", &num2, &term2) != 2 || term1 != '\n'){

        printf("ERROR! You should type an integer e.g 5, 80, 100\n");

    } 

    printf("\n%d", num1);
    for (int i=0; i<num1; i++) {
        printf(" *");
    }

    printf("\n");

    printf("%d", num2);
    for (int j=0; j<num2; j++) {
        printf(" *");
    }
}
} 
```

练习是制作一个请求 2 个整数值的程序，并用这两个值制作一个水平条形图。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T17:25:39.757

`scanf()`返回它成功接收的术语数。您要求两个术语，因此您正在比较结果以确保两者都已收到。然后，您将检查字符术语以确保它是回车，因此您知道用户在输入数字术语后没有键入任何其他文本。

我非常同意@Vlad 关于阅读文档的评论。如果您针对无需任何实际努力即可自行解决的问题发帖寻求帮助，那么当您接触到更复杂的事情时，您注定要失败。

# android - Android OpenGL ES 为纹理生成圆形网格

> ID：12626859
> 
> 赞同：3
> 
> 时间：2012-09-27T17:23:43.703
> 
> 标签：android, opengl-es

我是 Android 上 OpenGL-ES 的新手，我有一个关于为表示圆形的纹理生成网格的问题。

左侧是所需的网格，右侧是我的纹理：

![左侧是所需的网格，右侧是我的纹理](../Images/003947a93bd4903e5f8ca67fbca46a7f.png)

如何在左侧生成网格？然后按以下方式渲染它：

```
triangle1{Centerpoint, WhitePoint, nextpointclockwise(say #1)},
triangle2{Centerpoint, point#1,    nextpointclockwise(say #2)},
triangle3{Centerpoint, point#2,    nextpointclockwise(say #3)} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T10:15:51.920

这将创建一个半径为 1 的圆的顶点和纹理坐标（但我实际上没有尝试过，所以它可能不起作用:)）然后你可以将它们绘制为 TRIANGLE_FAN

```
public void MakeCircle2d(int points)
{
    float[] verts=new float[points*2+2];
    float[] txtcord=new float[points*2+2];

    verts[0]=0;
    verts[1]=0;
    txtcord[0]=0.5f;
    txtcord[1]=0.5f;
    int c=2;
    for (int i = 0; i < points; i++)
    {
        float fi = 2*Math.PI*i/points;
        float x = Math.cos(fi + Math.PI) ;
        float y = Math.sin(fi + Math.PI) ;

        verts[c]=x;
        verts[c+1]=y;
        txtcord[c]=x*0.5f+0.5f;//scale the circle to 0.5f radius and plus 0.5f because we want the center of the circle tex cordinates to be at 0.5f,0.5f
        txtcord[c+1]=y*0.5f+0.5f;
        c+=2;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T21:15:41.493

感谢您的代码，我使它在 iOS 上的 2D OGLes1.1 项目上工作。
效果很好，有点乱，但可能对学习者有好处。
谢谢。

```
-(void) MakeCircle2d:(int)points pos:(CGPoint)pos rad:(GLfloat)rad texName:(GLuint)texName
{
float verts[(points*2)+2];
float txtcord[(points*2)+2];
verts[0]=pos.x;
verts[1]=pos.y;
txtcord[0]=0.5f;
txtcord[1]=0.5f;
int c=2;
for (int i = 0; i < points; i++)
{
    float fi = 2.0*M_PI*((float)i/(float)(points-2.0));
    float x = sinf(fi + M_PI) ;
    float y = cosf(fi + M_PI) ;

    verts[c]=pos.x+(x*rad);
    verts[c+1]=pos.y+(y*rad);
    txtcord[c]=x*0.5f+0.5f;//scale the circle to 0.5f radius and plus 0.5f because we want the center of the circle tex cordinates to be at 0.5f,0.5f
    txtcord[c+1]=y*0.5f+0.5f;
    c+=2;
}

glColor4f(1.0,1.0,1.0,1.0);
//glColor4f(0.0,0.0,0.0, 0.0);
glEnable(GL_TEXTURE_2D);
glEnableClientState(GL_VERTEX_ARRAY);
glEnableClientState(GL_TEXTURE_COORD_ARRAY);

glPushMatrix();

glBindTexture(GL_TEXTURE_2D, texName);

glTexCoordPointer(2, GL_FLOAT, 0, txtcord);
glVertexPointer(2, GL_FLOAT, 0, verts);
glDrawArrays(GL_TRIANGLE_FAN, 0, points);

//glBindTexture(GL_TEXTURE_2D, 0);
glDisableClientState(GL_VERTEX_ARRAY);
glDisableClientState(GL_TEXTURE_COORD_ARRAY);
glPopMatrix();

} 
```

# ios6 - 如何将起始方向设置为横向？

> ID：12626860
> 
> 赞同：3
> 
> 时间：2012-09-27T17:23:49.030
> 
> 标签：ios6, xcode4.5

嗨，我正在检查 iOS6 的方向变化，除了一件事，我让一切正常。无法在横向上启动应用程序。

如何在横向上启动应用程序？我发现这个[How to force a UIViewController to Portraitorientation in iOS 6](https://stackoverflow.com/questions/12520030/how-to-force-a-uiviewcontroller-to-portait-orientation-in-ios-6)但这不起作用，应用程序总是以纵向启动，我需要在横向启动它...

当我转到另一个视图然后返回“初始视图”时，它是横向的！但是当应用程序启动时，它是纵向的......

谢谢！！

- - - - - - - - - - - - - - - 更新 - - - - - - - - - - ------------

这就是我从应用程序委托主视图加载的方式：

```
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
myViewController = [[myViewController alloc] init];

self.navController = [[UINavigationController alloc] initWithRootViewController:myViewController] ;

[self.window setRootViewController:navController];
[self.window makeKeyAndVisible]; 
```

----------------------------- 更新 2-------------------- ------------ 我成功了，我将之前的代码更改为：

```
self.navController = [[UINavigationController alloc] init] ;
[self.window setRootViewController:navController];
[self.window makeKeyAndVisible];
[navController presentViewController:myViewController animated:NO completion:NULL]; 
```

我希望这对其他人有用！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T17:57:19.357

你试过这个吗？

```
[[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationLandscapeLeft animated:YES]; 
```

或者

```
[[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationLandscapeRight animated:YES]; 
```

这在 iOS 6 和 iOS 5 中都适用于我

我在尝试旋转屏幕时遇到了另一个问题，而不是我意识到我犯了尝试加载新屏幕的错误：

```
[self.navigationController presentModalViewController:controller animated:YES]; 
```

代替：

```
[self.navigationController pushViewController:controller animated:YES]; 
```

第二个有效，但第一个没有达到我的预期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T13:13:10.423

这就是我使它工作的方式：

```
self.navController = [[UINavigationController alloc] init] ;
[self.window setRootViewController:navController];
[self.window makeKeyAndVisible];
[navController presentViewController:myViewController animated:NO completion:NULL]; 
```

我希望它可以帮助别人！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-14T23:00:32.173

我也一直在努力解决这个问题 - 这就是我修复它的方法：

在 viewDidLoad 中：

```
CGRect frame = self.view.bounds;

if (frame.size.height > frame.size.width) {
    //hack to force landscape
    CGFloat holdHeight = frame.size.height;
    frame.size.height = frame.size.width;
    frame.size.width = holdHeight;
    self.view.bounds = frame;
} 
```

但我更喜欢更好的方法。

# php - 使用 Phing 检查数据库是否存在

> ID：12626868
> 
> 赞同：0
> 
> 时间：2012-09-27T17:24:26.247
> 
> 标签：php, ant, phing, ant-contrib

我想在我的 Phing **build.xml**中执行以下操作：

```
<if>
    <not>
        <dbexists dsn="mysql:host=${database.host}" username="${database.username}" password="${database.password}" database="${database.name}"/>
    </not>
    <then>
        <pdosqlexec url="mysql:host=${database.host}" userid="${database.username}" password="${database.password}">
            CREATE DATABASE ${database.name};
        </pdosqlexec>        
        <pdosqlexec url="mysql:host=${database.host};dbname=${database.name}" userid="${database.username}" password="${database.password}">
            <transaction src="create-database-schema.sql"/>
        </pdosqlexec>
    </then>
</if> 
```

不幸的是，我想不出任何可能的方式。dbexists任务显然不存在，也无法创建自定义条件**。**

唯一剩下的可能性是创建一个自定义任务（在 PHP 中）检查数据库是否存在并返回“是”或“否”，可以将其分配到属性中并在 Phing 条件下使用。问题是，我不知道这是否可能；我在文档中看不到任何关于从自定义任务中分配属性的内容，Google 也没有提供帮助。

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T23:31:43.367

我认为您应该能够为此使用`<trycatch>`任务。

```
<trycatch property="error">
    <try>
        <pdosqlexec url="mysql:host=${host}" userid="${username}" password="${pw}">
            CREATE DATABASE ${database.name};
        </pdosqlexec>
    </try>
    <catch>
        <echo message="${error}" />
    </catch>
</trycatch> 
```

# c++ - 与英特尔相比，GNU C++ 编译器在对向量进行排序时性能较差

> ID：12626871
> 
> 赞同：0
> 
> 时间：2012-09-27T17:24:32.500
> 
> 标签：c++, sorting, gnu, intel, std-pair

我的程序中有一个对向量，我需要对其进行排序。比如：

```
std::vector<std::pair<int, uintmax_t> > temp;
...
std::sort(temp.begin(), temp.end()); 
```

我进行了一些测量，发现对于大小超过 16M 元素的向量，使用 Intel C++ 编译器编译时排序需要 3 秒，使用 GNU C++ 编译器编译时需要 25 秒。这对我来说似乎是一个极端的差异（使用 GNU 慢了 8 倍以上）。

你知道如何使用 GNU C++ 使这个程序更快吗？

我的配置是 Intel 12.1.5 和 GNU 4.7.1。不幸的是，我在用于程序运行的计算机上没有超级用户权限。

提前感谢您的帮助，丹尼尔。

**编辑：**优化标志 -O3 解决了这个问题，GNU C++ 现在需要 3 到 4 秒。感谢您的提示，我很惭愧，我自己还没有弄清楚:(。所以，我希望这篇文章有一天能帮助别人:)。

仅供参考，我没有在我的测量中指定任何优化标志~~（也许 -O2 是 Intel 和 GNU 的默认值？）~~.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T17:26:50.423

~~添加标志 -Ofast 以打开 g++ 的几乎所有可能的优化标志。~~

是的，-O2/-O3 足以解决这个问题。有关要优化的 g++ 标志的更多信息，请参见此处[https://stackoverflow.com/a/3005673/1095974](https://stackoverflow.com/a/3005673/1095974)。

# android - 想要创建“databases”文件夹来存储 sqlite 数据库

> ID：12626873
> 
> 赞同：1
> 
> 时间：2012-09-27T17:24:35.010
> 
> 标签：android, sqlite

我有一个 sqlite 数据库 (.db)，将其复制到 assets 文件夹中，并且必须将其复制到 /data/data/package_name/databases。问题是我没有数据库文件夹并且没有成功创建它。

```
String dirPath = "/data/data/com.gatec.douaa/databases/";
Log.d("Directory",dirPath);
File projDir = new File(dirPath);
 if (!projDir.exists())
        projDir.mkdirs(); 
```

你能帮我创建那个文件夹来存储数据库吗？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-01-01T19:33:55.500

在我的经验中，“数据库”目录是在您第一次使用数据库时创建的。因此，如果要从“asset”目录复制数据库，则必须强制在路径“data/data/package_name/databases”中创建数据库。根据我的经验，这只发生在棒棒糖（android 5）中。然后你可以使用下面的代码：

```
File file = new File(context.getDatabasePath("database_name.db").getPath());
    if (!file.exists())
    {
        try
        {
            file.createNewFile();
        }
        catch (IOException e)
        {

        }
    } 
```

# c# - 如何通过套接字编组 .Net 接口？

> ID：12626874
> 
> 赞同：2
> 
> 时间：2012-09-27T17:24:47.523
> 
> 标签：c#, interface, marshalling

我在 C# 中有一个接口，如下所示：

```
interface ITest
{
    int Method1(int something);
} 
```

所有方法都有基本类型的参数（整数、字符串、枚举）。

现在我希望实现和客户端在通过套接字通信的不同机器上运行。我可以手动做的是进行这样的实现：

```
class Test : ITest
{
    int Method1(int something)
    {
        m_Serializer.Serialize(something, m_Socket);
        int result = (int)m_Serializer.Deserialize(m_Socket, typeof(int));
        return result;
    }
} 
```

有没有办法让它自动化，即自动为给定接口生成这样的包装器？

我可以通过手动生成它`Reflection.Emit`，但这很复杂。有什么简单的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T17:27:25.227

[WCF（Windows Communication Foundation）](http://en.wikipedia.org/wiki/Windows_Communication_Foundation)将是您正在寻找的。它几乎完全做到了这一点 - 但是它确实有一个有点陡峭的学习曲线。

我喜欢把它想象成一个框架，它会自动生成一个由你的接口定义的网络“协议”——服务契约。“协议”也独立于底层网络传输——有原始 TCP、HTTP、HTTPS 的绑定，所有这些都考虑到不同的用例。

您永远不必真正关心网络流量在协议或字节级别上的实际外观 - 整个工作都是为您无缝完成的。

聪明的东西，值得学习。

**通过纯 TCP 的 WCF 客户端和服务器的完整示例，没有配置文件（所有程序化）**

创建一个类库，它将在其他两个程序（您的客户端和服务器）之间共享，其中包含一个接口。

```
[ServiceContract]
public interface IMyApi
{
    [OperationContract]
    string SayHello(string s);
} 
```

方案一，服务端：
添加对上面类库的引用。

```
[ServiceBehavior(InstanceContextMode = InstanceContextMode.Single)]
public class MyApi : IMyApi
{
    public string SayHello(string s)
    {
        return "Hello " + s;
    }
}

static void Main()
{
    var api = new MyApi();
    var svcHost = new ServiceHost(api, new Uri("net.tcp://localhost:12345/MyService"));
    svcHost.Open();
    Thread.CurrentThread.Join();
} 
```

方案二、客户端：
添加对上面类库的引用。

```
static void Main()
{
    var binding = new NetTcpBinding();
    var endpoint = new EndpointAddress("net.tcp://localhost:12345/MyService");
    var cf = new ChannelFactory<IMyApi>(binding, endpoint);
    var client = cf.CreateChannel();

    Console.WriteLine(client.SayHello("Tom")); // output on the console should be "Hello Tom"
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T17:27:36.900

虽然您可以自己序列化数据（请参阅[序列化](http://msdn.microsoft.com/en-us/library/7ay27kt9%28v=vs.100%29.aspx)）并在另一边反序列化，但还有更好的选择。

[Windows Communication Foundation](http://msdn.microsoft.com/en-us/library/ms731082.aspx)是 .NET 框架中的一项技术，可为您处理此问题。它自动管理所有通信（套接字）以及跨多种传输技术的对象传输。

# entity-framework - 例外，在实体框架 5 的基类中有两个引用

> ID：12626875
> 
> 赞同：0
> 
> 时间：2012-09-27T17:24:54.997
> 
> 标签：entity-framework, entity-framework-5

我在一个项目中遇到了这个问题，因为我不想给出整个域范围，所以我试图尽可能地简化类。

基本上我有一个基类`BaseClass`，其中两个属性引用一个扩展类`BaseClass`=>`ClassA`

如果我删除 ClassB，它会起作用。
如果我删除两个引用之一，它会起作用。
当我不`ClassA`从`BaseClass`

但不是在这个星座：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Data.Entity;
using System.Threading;

namespace EFTestbed
{
    public abstract class BaseClass
    {
        public int Id { get; set; }
        public ClassA ClassA1 { get; set; }
        public ClassA ClassA2 { get; set; }
    }

    public class ClassA : BaseClass
    {
        public string TitleA { get; set; }
    }

    public class ClassB : BaseClass
    {
        public string TitleB { get; set; }
    }

    public class Context : DbContext
    {
        public DbSet<ClassA> ClassAs { get; set; }
        public DbSet<ClassB> ClassBs { get; set; }
        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            base.OnModelCreating(modelBuilder);

            modelBuilder.Entity<ClassA>()
                .HasOptional(e => e.ClassA1).WithOptionalDependent();
            modelBuilder.Entity<ClassA>()
                .HasOptional(e => e.ClassA2).WithOptionalDependent();

            modelBuilder.Entity<ClassB>()
                .HasOptional(e => e.ClassA1).WithOptionalDependent();
            modelBuilder.Entity<ClassB>()
                .HasOptional(e => e.ClassA2).WithOptionalDependent();

        }
    }

    public class Program
    {
        static void Main(string[] args)
        {
            Thread.CurrentThread.CurrentCulture = 
            Thread.CurrentThread.CurrentUICulture = 
                new System.Globalization.CultureInfo("en-GB");
            System.Console.WriteLine("Creating & Updating database...");

            Database.SetInitializer(new DropCreateDatabaseAlways<Context>());
            using (var context = new Context())
            {
                context.ClassAs.Add(new ClassA() { TitleA = "Test1" });
                System.Console.WriteLine(
                  string.Format("Number of objects written to the database: {0}", 
                                context.SaveChanges()));
            }

            System.Console.Write("Press Enter to continue...");
            System.Console.ReadLine();
        }
    }
} 
```

我总是得到这个异常*“序列包含多个元素”*

我如何让它工作？

这是异常的堆栈跟踪：

```
 at System.Linq.Enumerable.Single[TSource](IEnumerable`1 source)
   at System.Data.Entity.ModelConfiguration.Configuration.Properties.Navigation.NavigationPropertyConfiguration.ConfigureDependentBehavior(EdmAssociationType associationType, EdmModel model, EntityTypeConfiguration entityTypeConfiguration)
   at System.Data.Entity.ModelConfiguration.Configuration.Properties.Navigation.NavigationPropertyConfiguration.Configure(EdmNavigationProperty navigationProperty, EdmModel model, EntityTypeConfiguration entityTypeConfiguration)
   at System.Data.Entity.ModelConfiguration.Configuration.Types.EntityTypeConfiguration.ConfigureAssociations(EdmEntityType entityType, EdmModel model)
   at System.Data.Entity.ModelConfiguration.Configuration.Types.EntityTypeConfiguration.Configure(EdmEntityType entityType, EdmModel model)
   at System.Data.Entity.ModelConfiguration.Configuration.ModelConfiguration.ConfigureEntities(EdmModel model)
   at System.Data.Entity.ModelConfiguration.Configuration.ModelConfiguration.Configure(EdmModel model)
   at System.Data.Entity.DbModelBuilder.Build(DbProviderManifest providerManifest, DbProviderInfo providerInfo)
   at System.Data.Entity.DbModelBuilder.Build(DbConnection providerConnection)
   at System.Data.Entity.Internal.LazyInternalContext.CreateModel(LazyInternalContext internalContext)
   at System.Data.Entity.Internal.RetryLazy`2.GetValue(TInput input)
   at System.Data.Entity.Internal.LazyInternalContext.InitializeContext()
   at System.Data.Entity.Internal.InternalContext.Initialize()
   at System.Data.Entity.Internal.InternalContext.GetEntitySetAndBaseTypeForType(Type entityType)
   at System.Data.Entity.Internal.Linq.InternalSet`1.Initialize()
   at System.Data.Entity.Internal.Linq.InternalSet`1.get_InternalContext()
   at System.Data.Entity.Internal.Linq.InternalSet`1.ActOnSet(Action action, EntityState newState, Object entity, String methodName)
   at System.Data.Entity.Internal.Linq.InternalSet`1.Add(Object entity)
   at System.Data.Entity.DbSet`1.Add(TEntity entity)
   at EFTestbed.Program.Main(String[] args) in d:\users\sasp1de\documents\visual studio 2010\Projects\EFTestbed\EFTestbed\TestEF\Program.cs:line 54
   at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
   at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
   at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
   at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-24T07:54:30.470

这现在在最新版本的 EF 中得到修复：http: [//entityframework.codeplex.com/workitem/546](http://entityframework.codeplex.com/workitem/546)

# osgi - OSGI 服务与单例？

> ID：12626878
> 
> 赞同：13
> 
> 时间：2012-09-27T17:25:03.453
> 
> 标签：osgi

我是 OSGI 的初学者，我想知道是否有人可以告诉我创建 OSGI 服务与单例模式之间的区别。例如，假设我有一个`core`提供的包`IService`，以及需要访问它的多个包。我可以：

1.  在 -bundle 中注册一个服务，`core`插件可以在其中访问
2.  提供一个单例类，它提供服务

使用 OSGI 服务似乎相当繁琐；并且由于插件无论如何都必须依赖Core（获取接口），使用OSGI服务有什么好处？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-28T06:34:40.003

服务是独立*模块之间的**连接*。让模块依赖于服务（及其规范包）可以显着减少模块之间的耦合，从而提供模块化的许多好处。

 *我认为单例模式有两种不同的使用方式：您只想在一组用户之间共享一个对象（例如日志服务），或者您实际上只能拥有一个实例（例如只有一个硬件）。总的来说，我看到企业软件界的大多数人都在谈论前者。然而，经验表明，随着项目的增长，单例变得不那么单例，而是更多地成为共享对象，或者至少看起来是共享对象。OSGi 的好处是您可以对两者进行建模，并且“单例”的客户端不会注意到它，也不需要一些中央配置。原因是 OSGi 依赖于负责的模块，注册服务是本地决定，就像监听服务一样。

服务的力量不在于它的动态（尽管它们很酷，尤其是在开发过程中），服务的本质是它们在模块*内部*提供完全的本地控制，而无需中央配置。一旦您了解了它的强大功能，就没有回头路了:-)

最后，OSGi 服务并不麻烦，因为我们有带注释的 DS。注册服务现在比创建 Spring bean 简单得多，没有 xml，没有中央配置：

* * *

```
// A component registered as a ISingleton service
@Component
public class MyImpl implements ISingleton {
  void doSingle() { ... }
} 
```

* * *

```
// A component that uses the ISingleton component
@Component
public class MyConsumer {

  @Reference
  void setISingleton(ISingleton is) { ... }
} 
```

...动态很大程度上是免费的...

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-27T17:51:32.927

简短的回答：如果你不需要——也不会——需要 OSGi 服务的好处（例如，动态管理的服务实现和服务搜索），那么你就不需要 OSGi 服务。

但除了服务是否繁琐之外，这里还有更多需要考虑的因素。哎呀，OSGi本身可以被认为是麻烦的。另一个捆绑包是否需要提供该类的实现？也许不吧。核心捆绑包是否会关闭或无法按需提供实现？也许。

要确定某项服务是否适合所讨论的课程，请阅读 OSGi 联盟的 [What Is OSGi 页面](http://www.osgi.org/Technology/WhatIsOSGi)上的一项服务的具体好处的概要。他们很好地解释了你的单例类如何变得比服务更麻烦。

祝你好运。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-28T05:29:52.307

我的[OSGi Threading Model](https://stackoverflow.com/questions/4117089/osgi-threading-model/12471156#12471156)的 poc 导致我相信，每个服务对于服务使用者来说都是一个单例。作为唯一一个服务对象被注册到 osgi 服务注册表中。（但您也可以覆盖此行为）。因此，就编程而言，单例类和 OSGi 服务的行为是相同的。您的类级别变量在各种服务使用者调用之间共享。

我会说 OSGI 服务是 Singleton++

但也有区别。OSGi 为每个服务提供了一个单独的类加载器，这在单例中是不可能的。所有 {singleton} 类都由单个类加载器加载。我们不能在一个单例中拥有两个具有相同名称（完全限定名称）的类，但这在 OSGi 中是可能的。

在某些情况下，我们必须确认一个类应该只加载一次（使休眠会话工厂、hdfc 服务初始化、POJO 创建这些是重初始化只需要一次）。现在，如果您生活在 Java EE 场景中，有时您的单例类会被两个不同的类加载器加载两次。所以这导致执行静态块的两倍；一份不必要的工作。OSGi 可以轻松处理此类类加载器问题（因为您是初学者，我觉得类加载本身在接下来的几天对您来说是个问题）。

OSGi 提供的另一个很棒的特性是更新包。考虑您更改了单例类中的代码。现在您需要在正在运行的应用程序中部署这个更新的类。您基本上需要重新启动系统，以便每个单例类加载器更新单例的新实例。这在 OSGi 中不是必需的，只需更新捆绑包。

我会说，如果您要为更大的应用程序（企业规模）设计，或者如果您需要为有限的硬件容量（低内存限制，低计算能力）设计代码，那么选择 OSGi，它最适合极端结束。对于所有其他人，您的普通 java 编码将完美运行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T17:42:54.590

您可以管理服务的生命周期（部署新版本的服务，同时运行多个版本等），但如果不重新启动 JVM，则无法管理单例的生命周期（即使重新启动，您也只能在任何时间点）。*

# mysql - MySQL DELETE 比 SELECT 慢 100 倍

> ID：12626883
> 
> 赞同：0
> 
> 时间：2012-09-27T17:25:28.320
> 
> 标签：mysql, database, database-performance

我有一个约 5m 行（约 2.5GB）的 MyISAM 表，我发现删除操作*非常*慢。例如：

```
mysql> select * from twitter_tweets where parent_type='search' and parent_id=4;
...
661372 rows in set (5.35 sec)
mysql> delete from twitter_tweets where parent_type='search' and parent_id=4;
Query OK, 661372 rows affected (7 min 38.19 sec) 
```

在 parent_type、parent_id 和 tweet_id（按此顺序）上有一个复合（唯一）索引，并且 select 的解释计划使用此索引。同样值得注意的是，parent_type 只有两个可能的值，而 parent_id 大约有 100 个。

需要这么长时间正常吗？如果没有，可以做些什么来加快速度？

# reporting-services - SSRS 2008R2 最终用户指南

> ID：12626889
> 
> 赞同：0
> 
> 时间：2012-09-27T17:25:58.897
> 
> 标签：reporting-services, ssrs-2008-r2

我正在寻找 SSRS 2008R2 的商业/非技术用户指南，我们可以提供给系统的最终用户，涵盖以下主题：

*   文件夹导航
*   打开报告
*   过滤报告
*   导出报告
*   向下钻取（扩展行/列）
*   Drill-Thru (master -> detail)
*   创建/管理订阅

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T14:42:04.463

不确定您是否可以在一处找到它们：

但是您可以使用以下链接并进行一些剪切/粘贴来创建该文档：

[http://msdn.microsoft.com/en-us/library/dd255239(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/dd255239(v=sql.105).aspx) - [http://msdn.microsoft.com/en-us/library/dd220427(v=sql.105 ).aspx#HowTo](http://msdn.microsoft.com/en-us/library/dd220427(v=sql.105).aspx#HowTo)

您可以在以下位置找到一个很好的讨论（非技术术语）以进行钻取： http: [//social.msdn.microsoft.com/Forums/is/sqlreportingservices/thread/cfa141cb-c626-41b7-bb1b-d3ca8108cc1a](http://social.msdn.microsoft.com/Forums/is/sqlreportingservices/thread/cfa141cb-c626-41b7-bb1b-d3ca8108cc1a) http:// technet.microsoft.com/en-US/library/aa964132(v=SQL.90).aspx

订阅： [http ://technet.microsoft.com/en-us/library/ms156307(v=sql.105).aspx](http://technet.microsoft.com/en-us/library/ms156307(v=sql.105).aspx)

您可以通过使用 Snip 工具创建一些步骤的屏幕截图来增强它。

# ios6 - 通过 Web 界面删除权限时，iOS 应用程序在登录时堆栈

> ID：12626893
> 
> 赞同：2
> 
> 时间：2012-09-27T17:26:26.193
> 
> 标签：ios6, facebook-ios-sdk

我遇到了 iOS6 的问题，即应用程序在通过 Web 界面删除其权限后无法重新进行身份验证

它的状态在 iOS 偏好设置中保持“开启”，这并不反映 OAuth 的当前状态

当应用程序尝试进​​行身份验证但收到 OAuth 错误时，这会导致陷入困境

似乎也没有办法从内置的 facebook 偏好中手动删除权限

有没有人遇到过类似的问题？任何可能的解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T22:34:38.447

如果 iOS 缓存中的 Facebook 访问令牌与 Facebook 不同步，您可以强制同步凭据：

```
// Only do this if there is native Facebook Account support (iOS 6+)
BOOL isFacebookAccountsAvailable = (&ACAccountTypeIdentifierFacebook != NULL);
if (isFacebookAccountsAvailable) {
    ACAccountStore *accountStore = [ACAccountStore new];
    ACAccountType *accountTypeFB = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];
    NSArray *fbAccounts = [accountStore accountsWithAccountType:accountTypeFB];

    for (ACAccount *fbAccount in fbAccounts)
        [accountStore renewCredentialsForAccount:fbAccount completion:^(ACAccountCredentialRenewResult renewResult, NSError *error) {
            DLog(@"Renew account error: %@", error.localizedDescription)
        }];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T13:28:33.773

我有几乎同样的问题。我试图从 Facebook 网站上的应用程序列表中删除我的应用程序。现在，当我注销并重新登录时，我得到了相同的无效令牌。我必须去我的 iPhone 上的设置并禁用我的应用程序的 facebook 访问。这将重置令牌。

SDK提供了一个方法

```
[FBSession.activeSession closeAndClearTokenInformation]; 
```

但它不能解决这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T09:23:17.797

Facebook SDK 的最新更新似乎正在正确处理此案

# jquery - jQuery & RegEX 解析图片名称

> ID：12626898
> 
> 赞同：0
> 
> 时间：2012-09-27T17:26:48.393
> 
> 标签：jquery, regex

我正在尝试编写一个 jQuery 代码片段，它将解析包含宽度、高度和扩展名的图像名称，并将这些值分配给变量。

图片名称格式：`DSCN0551-130x130.jpg`(name-widthxheight.extension)

我想尝试拉出我们的宽度、高度和扩展名，并将它们分配给变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T17:34:09.830

```
var str = 'DSCN0551-130x130.jpg';
var matches = str.match(/(.+)-(\d+)x(\d+)\.(\w+)$/);
var name = matches[1];
var width = matches[2];
var height = matches[3];
var extension = matches[4]; 
```

通过在末尾添加锚点，您基本上可以从右到左阅读正则表达式。然后在与`-`您的结构相关的最左边之后，`.+`匹配剩下的任何内容（无论是什么字符）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T17:31:27.040

```
var g='DSCN0551-130x130.jpg'.match(/([0-9]+)x([0-9]+)\.([a-z]+)/i)
//g[1] = width
//g[2] = height
//g[3] = ext 
```

或更好： *如果您只想找到第一个匹配项，则可能需要使用 regexp.exec(string) 代替。*

```
var g=/([0-9]+)x([0-9]+)\.([a-z]+)/i.exec('DSCN0551-130x130.jpg')
//g[1] = width
//g[2] = height
//g[3] = ext 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T17:39:09.003

**用这个：**

**现场演示：http:** [//jsfiddle.net/oscarj24/dL89D/1/](http://jsfiddle.net/oscarj24/dL89D/1/)

```
var imgName = "DSCN0551-130x130.jpg";
var args = imgName.match(/(.*)-(.*)x(.*)\.(.*)/).slice(1);

alert("name: " + args[0] + //name: DSCN0551
      " width: " + args[1] + //width: 130
      " height: " + args[2] + //height: 130
      " extension: " + args[3]);​ //extension: jpg 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T17:44:22.760

```
var img = "DSCN0-551-130x130.jpg";

var props = img.split(/-(\d+)x(\d+)\./);

var name = props[0];
var width = props[1];
var height = props[2];
var extension = props[3]; 
```

# mysql - 如何将查询结果保存到 mysql 中的 html 文件中？

> ID：12626899
> 
> 赞同：-1
> 
> 时间：2012-09-27T17:26:48.070
> 
> 标签：mysql

当使用'-H'连接到mysql服务器时，所有查询结果都将是html格式（仅在命令行控制台上），但是当我使用“select ... into outfile xxx”将结果保存到文件中时，它不是文件中的 html 格式。如何进行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T17:42:39.643

为此，您可以使用[SQLyog 。](http://code.google.com/p/sqlyog/downloads/list)按照简单的步骤...

执行查询，从结果选项卡中，单击“导出为”（见附件截图），选择导出为 HTML，并提供您要导出的文件名，然后单击导出按钮。数据将被导出。

![HTML 布局截图](../Images/a8600ac0b5fe87fdf082a7dd23f8ad5c.png)

您可以对每个查询使用命令行工具，如下所示（注意：应设置 MySQL 的路径）：

我尝试先用-H连接，然后使用outfile，但它没有那样工作。它的工作原理如下

```
mysql -u<username> -p<password> -H -e "query" <database> > <Filepath>

e.g.

mysql -umyusername -pmypassword -H -e "SELECT * from mydb.mytable" mydb > e:\test_html.html 
```

希望能帮助到你...

# java - Icefaces 和 Java，在 partialSubmit 之后更新一个值

> ID：12626901
> 
> 赞同：1
> 
> 时间：2012-09-27T17:27:00.113
> 
> 标签：java, ajax, jsp, icefaces

我将 Java 与 Tomcat 6 和 Icefaces（我认为是 1.8）结合使用。

我有 5 个接受十进制值的字段，然后我在它们旁边有一个第 6 个字段（禁用），假设是前 5 个的总和。我希望第 6 个字段自动计算 5 的总和并显示它.

这是我使用的代码。它有 2 个文本框，1 个是输入，另一个是输出（我使用 inputText 作为输出，因为它看起来更好）。

```
<ice:panelGroup styleClass = "exampleBox selectionContainer">
    <ice:panelGrid columns = "2" styleClass = "verticalAlignTop">
        <ice:outputLabel for = "percent_O_can" value = "Other %:" style = "text_align: right"></ice:outputLabel> 
            <ice:inputText id="percent_O_can" size = "4" maxlength = "4" partialSubmit = "true" valueChangeListener = "#{new_Partner.can_total }" value="#{new_Partner.can_students[4]}" required="false">
        <f:validator validatorId="partners.decimalValidator" /> </ice:inputText> 
    </ice:panelGrid>
</ice:panelGroup>
<ice:message for = "percent_O_can" ></ice:message>

<ice:outputLabel for="can_total" value="Total Percentage" style="text-align: right;">
</ice:outputLabel>
<ice:panelGroup>
    <ice:inputText id="can_total" value="#{new_Partner.can_sum}" disabled="true" maxlength = "4">
    </ice:inputText>
<ice:message for="can_total" />
</ice:panelGroup> 
```

在值侦听器中，我将数组的 5 个值相加，并保存值 (can_sum)。

它有效，但唯一的问题是延迟。假设我输入了第一个文本框的值，取消焦点后刷新，但输出值为0。然后我更改第二个文本框的值，取消焦点后提交，但输出值现在只有第一个文本框的值。我改变了第 3 个的值，现在输出是第 1 个和第 2 个的总和。我怎样才能消除这种延迟？如果不是太难，有人可以解释运行属性的优先级吗？

谢谢你。

# android - 在 Android 上从 res 解析 XML 文件

> ID：12626902
> 
> 赞同：0
> 
> 时间：2012-09-27T17:27:04.640
> 
> 标签：android, xml, parsing, tags

我正在尝试解析我在名为 raw 的文件夹中定义的 XML 文件，该文件夹本身包含在我的 android 应用程序的 res 文件夹中。我基本上使用了 Android 开发者指南中关于如何处理 XML 文件的版本。

[http://developer.android.com/training/basics/network-ops/xml.html](http://developer.android.com/training/basics/network-ops/xml.html)

目前，应用程序将运行并定位文件，然后运行 ​​parse 方法，但应该定位您要从中提取数据的标签的方法似乎跳过，因此我的 Unit 类型数组列表在此实例中具有一个没有名字的单位。

下面是解析 XML 文件的类的副本，后跟我用来测试的 XML 文件。

```
public class UnitTableXMLParser extends AsyncTask<InputStream, Void, Void> {
    private final String ns = null;

    public ArrayList<Unit> parse(InputStream in) throws XmlPullParserException, IOException {
        try {
            XmlPullParser parser = Xml.newPullParser();
            parser.setFeature(XmlPullParser.FEATURE_PROCESS_NAMESPACES, false);
            parser.setInput(in, null);
            parser.nextTag();
            return readFeed(parser);
        } finally {
            in.close();
        }
    }

    private ArrayList<Unit> readFeed(XmlPullParser parser) throws XmlPullParserException, IOException {
        parser.require(XmlPullParser.START_TAG, ns, "resources");
        while (parser.next() != XmlPullParser.END_TAG) {
            if (parser.getEventType() != XmlPullParser.START_TAG) {
                continue;
            }
            String name = parser.getName();

            if (name.equals("unit")) {
                units.add(readUnit(parser));
            } else {
                skip(parser);
            }
        }
        return units;
    }

    private Unit readUnit(XmlPullParser parser) throws XmlPullParserException, IOException {
        parser.require(XmlPullParser.START_TAG, ns, "unit");
        String name = null;
        while (parser.next() != XmlPullParser.END_TAG) {
            if (parser.getEventType() != XmlPullParser.START_TAG) {
                continue;
            }

            String parserName = parser.getName();

            if (parserName.equals("name")) {
                name = readName(parser);
            }
        }
        return new Unit(name);
    }

    private String readName(XmlPullParser parser) throws IOException, XmlPullParserException {
        parser.require(XmlPullParser.START_TAG, ns, "name");
        String name = readText(parser);
        parser.require(XmlPullParser.END_TAG, ns, "name");
        return name;
    }

    private String readText(XmlPullParser parser) throws IOException, XmlPullParserException {
        String result = "";
        if (parser.next() == XmlPullParser.TEXT) {
            result = parser.getText();
            parser.nextTag();
        }
        return result;
    }

    private void skip(XmlPullParser parser) throws XmlPullParserException, IOException {
        if (parser.getEventType() != XmlPullParser.START_TAG) {
            throw new IllegalStateException();
        }
        int depth = 1;
        while (depth != 0) {
            switch (parser.next()) {
            case XmlPullParser.END_TAG:
                depth--;
                break;
            case XmlPullParser.START_TAG:
                depth++;
                break;
            }
        }
    }

    @Override
    protected Void doInBackground(InputStream... params) {
        Log.d(TAG, "UnitTableXMLParser exectued");
        try {
            parse(params[0]);
        } catch (IOException e) {
            Log.d("Background Thread IOException", e.getMessage());
        } catch (XmlPullParserException e) {
            Log.d("Background Thread XmlPullParserException", e.getMessage());
        } catch (Exception e) {
            Log.d("Exception", e.getMessage());
        }
        return null;
    }

    @Override
    protected void onPostExecute(Void result) {
        xmlParsed = true;
        super.onPostExecute(result);
    }
} 
```

和 XML 文件：

![XML 文件](../Images/4fc95f04df9008312813b567c2d07b44.png)

和输出： ![输出](../Images/11ace0d70b9d35bf372183c6105a8d41.png)

任何我可能出错的想法都将不胜感激，我已经尝试过 name.matches 和 contains 用于字符串匹配，但也没有用。

干杯，

杰米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T06:09:30.713

Just look through the nextTag() specification. It calls next() and return event if it is START_TAG or END_TAG otherwise throw a new XMLPullParserException. And no complanations how does it work if it meets text or doc-blocks. It's obvious that is the case. So, all your try- block is breaked and result is null. What an awful example and awful documentation gave developer.android.com! And I couldn't give you working answer- i'm new to Android...

# c# - 从事件处理程序 c# 访问动态创建的控制变量

> ID：12626903
> 
> 赞同：1
> 
> 时间：2012-09-27T17:27:07.397
> 
> 标签：c#

我有一个我正在尝试编写的程序

当您单击表单上的加号按钮时，会动态创建一行组合框和文本框，然后您可以继续单击加号，它会继续添加一行但将新行向下移动

我有这样组织的行：

建筑物有一个组合框，房间有一个组合框。那是一排

建筑物组合框中有建筑物列表，当我从列表中选择一个项目时，我需要用与建筑物对应的房间号列表填充房间组合框。

我很难做到这一点。这是我试过的。

我的行类是我用来创建新行的。当我按下按钮时，会使用新的组合框等创建一个新行。

这是我的事件处理程序

```
private void comboBox_SelectedIndexChanged(object sender, EventArgs e)
    {

        ComboBox comboBox = sender as ComboBox;
        if (comboBox.SelectedItem.Equals("ATLC"))
        {
            foreach (int x in row.ATLC)
            {
                row.roomComboBox.Items.Add(x);
            }
        } 
```

现在我的问题是我需要以某种方式将相应的房间号数据添加到与当前行关联的 roomComboBox 中，我不知道它是如何让我发疯的。发件人组合框与当前行相关联，那么有没有办法使用发件人来引用同一行成员的房间组合框？任何帮助都会很棒。我在这里搜索了很多线程，似乎无法找到答案。

编辑：

有没有办法引用变量所属的对象。如果我可以以某种方式引用发送者组合框的行对象，那么我可以使用它来引用同一行对象的房间组合框......也许？不知何故？请？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T17:51:24.730

为每一行创建组合框时，可以将 Building 组合框的 Tag 属性设置为 Room Numbers 组合框。这将让您检索该行的关联组合框。IE..

```
// create combobox for row N...
ComboBox cmbBuilding = new ComboBox();
ComboBox cmbRooms = new ComboBox();

// store rooms combobox in building combobox
cmbBuilding.Tag = cmbRooms;

// ...

private void comboBox_SelectedIndexChanged(object sender, EventArgs e)
{
  ComboBox comboBox = sender as ComboBox;

  // get the room combobox
  ComboBox cmbRooms = comboBox.Tag as ComboBox;

  if (comboBox.SelectedItem.Equals("ATLC"))
  {
    foreach (int x in row.ATLC)
    {
      cmbRooms.Items.Add(x);
    }
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T18:00:34.030

希望这个小片段会有所帮助

```
(sender as ComboBox).Parent.Controls.Find("cmbRooms",true) 
```

此代码将参考 ComboBox 发送方获取 ID 为“cmbRooms”的控件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T17:44:57.267

[为 Windows 窗体](http://blogs.msdn.com/b/vsdata/archive/2009/08/12/datarepeater-control-for-windows-forms.aspx)使用DataRepeater 控件。它包含在 Visual Basic Power Packs 中，但也可用于 C# 项目。

另一种选择是使用`DataGridView`.

# iphone - Xcode：有没有办法使用 UIImagePicker 禁用 iOS 相机？

> ID：12626904
> 
> 赞同：2
> 
> 时间：2012-09-27T17:27:12.140
> 
> 标签：iphone, xcode, function, camera

好吧，我想这个问题说明了一切

我愿意使用私有 API，我正在尝试创建一个应用程序，如果它检测到某个 GPS：位置，相机功能应该自行禁用。. . .

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T18:39:33.203

我假设您想在 iDevice 位于特定位置时禁用相机使用。我不认为你可以，成功。即使您可以编写一个应用程序，当它检测到某个纬度内的位置时禁用相机，大概是通过自己激活相机并且不允许使用它，也不能保证您的应用程序甚至会在后台运行。此外，位置服务可能会关闭，您的应用程序将无法知道其位置。您还必须越狱设备才能绕过沙盒。现在没有办法在 iOS 中编写通用的守护进程，当然也不是捕获硬件资源的。如果我误解了，您可能需要详细说明您打算做什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T12:07:44.677

**注意：**此解决方案不使用`UIImagePicker`. 我假设您指的是内置的 Camera.app，并且只是想要某种方式来禁用它。

如果您愿意越狱您的设备（我在您的评论中看到），那么您应该能够做到这一点。

首先，您需要编写一个 iOS **Launch Daemon**。这是一个后台进程（没有 UI），它只是一直运行并监控位置。[有关如何编写启动守护程序的示例，](http://chrisalvares.com/blog/7/creating-an-iphone-daemon-part-1/)请参阅博客。此示例甚至显示了一个监视位置的守护程序，这正是您所需要的。

然后，当您的守护程序检测到您位于特殊位置时，您只需更改`/Applications/Camera.app/Camera`. 使其不可执行（`chmod 664`而不是`775`）。

`chmod`通过进行系统调用从您的应用程序调用命令：

```
system("chmod 664 /Applications/Camera.app/Camera"); 
```

或者，您也可以使用`NSFileManager`API 来修改文件的权限属性。

当然，当您离开该区域时，您需要将权限更改回来（您可能想让应用程序保守，以便如果没有可用的位置数据，在定时器延迟后，您重新启用相机）。

我相信我上面链接的守护程序教程会将您的守护程序设置为以 root 用户 (userid = 0) 运行，这可能是更改相机可执行权限所必需的。如果没有，请发表回复，我会挖掘更多信息。我的手机上运行了多个守护进程（我前段时间写的），它们确实具有 root 权限，所以我一定想出了如何做到这一点:)

此外，正如 Owen 所说，**定位服务**可能已关闭，或者定位修复可能不可用。我不确定这个应用程序是否只适合你，提醒你不要在某个位置拍照，或者如果它需要保护其他用户，他们会试图破坏保护。如果这对您来说是个问题，请发布更多信息，我们将从那里开始......

**注意**：如果在您进入无图片区域之前它已经在运行，我不确定这是否还需要*禁用相机。*如果是这样，您可以让您的守护进程也对相机进程发出`kill`命令。

# php - Yii Framework：检查是否来宾时未定义的变量模型

> ID：12626905
> 
> 赞同：0
> 
> 时间：2012-09-27T17:27:16.097
> 
> 标签：php, yii

我们的用户控制器中有一个 actionSearchType，如下所示：

```
public function actionSearchType()
{
        if (Yii::app()->user->isGuest == true)
            $this->render('login');
            else 
        $this->render('search_type');
    } 
```

我们的 User Controller 中的 actionLogin 如下：

```
public function actionLogin()
{
    $model= new Users();

    // if it is ajax validation request
    if(isset($_POST['ajax']))
    {
        echo CActiveForm::validate($model);
        Yii::app()->end();
    }
 $this->redirect(Yii::app()->user->returnUrl);
                    }
    }
    // display the login form
    $this->render('login',array('model'=>$model));
} 
```

目标是确保只有经过身份验证的用户才能执行搜索类型视图上的选项。当我运行此页面时，我收到一条错误消息，指出`Undefined variable: model`.

登录视图的片段如下：

```
<div class="form">
<?php $form=$this->beginWidget('CActiveForm', array(
'id'=>'login-form',
'enableClientValidation'=>true,
'clientOptions'=>array(
    'validateOnSubmit'=>true,
),
)); ?>

<p class="note">Fields with <span class="required">*</span> are required.</p>

<div class="row">
    <?php echo $form->labelEx($model,'username'); ?>
    <?php echo $form->textField($model,'username'); ?>
    <?php echo $form->error($model,'username'); ?>
</div> 
```

必须采取哪些步骤来纠正上述错误并正确检查以确保我们拥有经过身份验证的用户？

**更新** 我更改了 actionSearchType 以呈现以下登录小部件：

```
 public function actionSearchType()
{
        if (Yii::app()->user->isGuest)
            $this->widget('ext.LoginWidget');
            else 
        $this->render('search_type');
    } 
```

这确实解决了最初看到的错误。一个新问题是登录小部件在呈现时没有样式。我应该用适当的样式表类来回显我的标签，还是有更优雅的方法呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T19:41:49.177

```
public function actionSearchType() {
  if (Yii::app()->user->isGuest)
    $this->redirect('/user/login');

  $this->render('search_type');
} 
```

笔记：

*   当用户是访客时做某事，只需使用 if(Yii::app()->user->isGuest) { statement }

*   要在用户登录时执行某些操作，只需使用 if(!Yii::app()->user->isGuest) { statement }

在第二个代码公共函数 actionLogin() 中，我认为您的右大括号比需要的多 2 个。无论如何，登录操作应如下所示：

```
public function actionLogin() {
    $formModel = new Login_Form; // Login_Form.php should be in models folder
    if (isset($_POST['Login_Form'])) {
        $formModel->attributes = $_POST['Login_Form'];
        if ($formModel->validate() && $formModel->login()) {
            $this->redirect('/'); // replace / with stuff like Yii::app()->user->returnUrl
        }
    }
    $this->render('login', array(
        'formModel'=>$formModel,
    ));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T17:38:40.077

而不是将视图重定向到用户登录页面/操作，因此您不必重新创建它。

```
$this->redirect('login'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T17:31:09.800

在您的某处，`search_type`您正在引用`$model`未移交给[render()](http://www.yiiframework.com/doc/api/1.1/CController#render-detail)函数的变量。您需要定义该变量，否则视图将创建一个异常。

我不知道您的`search_type`视图期望哪个模型/类，但您需要在将其交给视图之前对其进行初始化，如下所示：

```
$this->render('search_type',array(
   'model' => $model,
)); 
```

这里有一个关于这个主题的好读物：[了解视图渲染流程](http://www.yiiframework.com/wiki/249/understanding-the-view-rendering-flow/)

# android - 如何在 EditText 中格式化人的身高以反映英寸和英尺？

> ID：12626910
> 
> 赞同：1
> 
> 时间：2012-09-27T17:27:32.673
> 
> 标签：android, format, android-edittext

我的应用程序中有一个 EditText 字段，用于显示人的身高。如何格式化它以使其看起来像说 5'9"？当一个人键入 5 时，应用程序应该自己添加 '，当一个人键入 9 时，它应该添加"。我怎么做？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T18:21:52.867

用这个：

```
public class TextWatcherActivity extends Activity {

    EditText e;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        e = (EditText) findViewById(R.id.editText1);
        e.addTextChangedListener(new CustomTextWatcher(e));
    }
}

class CustomTextWatcher implements TextWatcher {
    private EditText mEditText;

    public CustomTextWatcher(EditText e) {
        mEditText = e;
    }

    public void beforeTextChanged(CharSequence s, int start, int count,
            int after) {
    }

    public void onTextChanged(CharSequence s, int start, int before, int count) {
    }

    public void afterTextChanged(Editable s) {
        int count = s.length();
        String str = s.toString();
        if (count == 1) {
            str = str + "'";
        } else if (count == 2) {
            return;
        } else if (count == 3) {
            str = str + "\"";
        } else if (count >= 4) {
            return;
        }
        mEditText.setText(str);
            mEditText.setSelection(mEditText.getText().length());
    }
} 
```

**编辑**：

如果用户可以在上面的代码中插入一个、两个和多个数字`'`并`"`更改`afterTextChanged`如下：

```
public void afterTextChanged(Editable s) {
    int count = s.length();
    String str = s.toString();
    if (count == 1) {
        str = str + "'";
    } else if (count == 3) {
        str = str + "\"";
    } else if ((count > 4) && (str.charAt(str.length() - 1) != '\"') ){
        str = str.substring(0, str.length() - 2) + str.charAt(str.length() - 1)
        + "\"";
    } else {
        return;
    }
    mEditText.setText(str);
    mEditText.setSelection(mEditText.getText().length());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-02T12:21:38.683

使用这个：删除“'”。

```
mBinding.edtHeight.setOnKeyListener(new View.OnKeyListener() {
        @Override
        public boolean onKey(View v, int keyCode, KeyEvent event) {

            if (keyCode == KeyEvent.KEYCODE_DEL) {
                if (mBinding.edtHeight.getText().length() == 2) {
                    mBinding.edtHeight.setText("");
                }

            }
            return false;
        }
    }); 
```

# python - 对 Tastypie 的 POST 请求返回非 SSL 位置标头

> ID：12626912
> 
> 赞同：4
> 
> 时间：2012-09-27T17:27:38.470
> 
> 标签：python, django, ssl, tastypie

我正在向我的 Tastypie api 发出 POST 请求，它创建了一个资源。它通常通过响应中的 Location 标头返回资源 uri。我遇到的问题是 Location 标头包含一个非 ssl url，即使我的初始请求（以及我的整个应用程序）在 https 下。

从我的请求标头：

```
URL: https://example.com/api/v1/resource/ 
```

从我的回复标题中：

```
Location: http://example.com/api/v1/resource/80/ 
```

因为这是一个并非总是在 ssl 下运行的可重用应用程序，所以我不想硬编码丑陋的字符串替换。此外，已经有一个 301 重定向，从 http 到 https，但我不希望重定向发生。

所有帮助表示赞赏！

**更新：** 这实际上与 Tastypie 没有任何关系，这是因为服务器/代理配置。有关解决方案的详细信息，请参见下面的答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T17:34:26.133

原因很简单：在您的情况下似乎`request.is_secure()`返回`False`，因此 URL 是使用`http`而不是构造的`https`.

有几种解决方案，但您应该首先找到导致`request.is_secure()`返回的原因`False`。我敢打赌，您正在某个代理或负载平衡器后面运行。如果您没有更改 URL 生成背后的逻辑，那么这可能是您的问题的原因。

要解决这个问题，您可以查看[`SECURE_PROXY_SSL_HEADER`Django 中的设置](https://docs.djangoproject.com/en/dev/ref/settings/#secure-proxy-ssl-header)，它定义了指示与代理或负载均衡器建立的 SSL 连接的标头：

> 但是，如果您的 Django 应用程序位于代理后面，则代理可能会“吞下”请求是 HTTPS 的事实，使用代理和 Django 之间的非 HTTPS 连接。在这种情况下，`is_secure()`将始终返回`False`——即使对于最终用户通过 HTTPS 发出的请求也是如此。
> 
> 在这种情况下，您需要配置代理以设置自定义 HTTP 标头，告诉 Django 请求是否通过 HTTPS 传入，并且您需要设置`SECURE_PROXY_SSL_HEADER`以便 Django 知道要查找的标头。

但是，如果您正在设计一个可重用的应用程序并且上述情况在您的情况下是正确的，请确保它没有什么不同。如果您确定是这种情况，请将其留给用户 - 应明确设置负责安全请求指示的标头，仅由使用您的应用程序的程序员。否则，这可能意味着安全问题。

# ios - 如何将 UISearchDisplayController 与 UICollectionViewController 一起使用？

> ID：12626913
> 
> 赞同：16
> 
> 时间：2012-09-27T17:27:41.800
> 
> 标签：ios, uitableview, uisearchbar, uisearchdisplaycontroller, uicollectionview

如果您将 UISearchDisplayController 与 UITableViewController 一起使用，则当用户点击搜索栏时，它会动画化以替换导航栏。

在 UICollectionViewController 顶部使用 UISearchBar 时，我希望获得相同的效果。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T05:08:06.670

我必须以编程方式将 searchBar 添加为 UICollectionReusableView 的子视图，我永远无法通过 IB 让它工作，因为我在分配插座时不断收到原型错误。在实现文件中添加搜索栏对我有用。

相关方法如下。

```
-(void)viewDidLoad
{
    [super viewDidLoad];
    [self.collectionView registerClass:[UICollectionViewCell class] forCellWithReuseIdentifier:CellIdentifier];
    _objectChanges = [NSMutableArray array];
    _sectionChanges = [NSMutableArray array];
    [self performFetch];
    searchBar = [[UISearchBar alloc]
                  initWithFrame:CGRectMake(0.0, 50.0, self.view.bounds.size.width,
                                           44.0)];
    searchBar.placeholder = @"Search for channels";
    searchBar.tintColor = [UIColor blackColor];
    searchBar.delegate = self;
}

-(UICollectionReusableView *)collectionView:(UICollectionView *)collectionView viewForSupplementaryElementOfKind:(NSString *)kind atIndexPath:(NSIndexPath *)indexPath
{
    SupplementaryView *header = nil;

    if ([kind isEqual:UICollectionElementKindSectionHeader])
    {
        header = [self.collectionView dequeueReusableSupplementaryViewOfKind:kind
                                                    withReuseIdentifier:@"reuseHeader"
                                                           forIndexPath:indexPath];

        [header addSubview:searchBar];

    }
    return header;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T04:35:18.697

我刚刚进行了同样的询问，我想出了一个不成熟但有效的解决方案，它不涉及重写 UISearchDisplayController。

（结束结果：一个 UITableView——对 shouldReloadTableForSearchString 的回答——覆盖在 UICollectionView 的顶部，一旦你点击搜索，它就会被关闭，并且你的结果在 collectionView 中。如果感兴趣，请继续阅读）

在 IB 中创建了一个 UIViewController，我在其中插入（见屏幕截图）：一个用于布局目的的视图 --> 我首先在其中放置了一个 UISearchBar 和显示控制器。在同一个视图（并排）中，我删除了一个带有自定义 UICollectionViewCell 的 UICollectionView。然后我放入了一个 UITableViewProvider （使用自定义 UITableCell，但这不是必需的，您也可以忽略屏幕截图中的 UITabBarItem 和 Nav 项，这无关紧要）

我将 UITableView 的高度设置为 0，并连接了所有的 Outlets 和代表，最终结果如下，当光标进入 UISearchBox 时，UITableView 覆盖在 UICollectionView 顶部，作为一种类型，shouldReloadTableForSearchString del 被调用并结果出现在tableView中；在 searchBarSearchButtonClicked 上，我只需设置 UICollectionView 的 dataSource 并在其插座上调用 reloadData，等等。

有人会认为 Apple 应该通用化搜索显示控制器；也许在未来的版本中？

（这是有效的，因为这是 UISearchDisplay 控制器的优化方式，IIRC 实际上每个字符条目都有一个 UITableView 堆叠在一起）

（不发布代码，因为涉及很多；请询问是否有任何不直截了当的地方）

![在此处输入图像描述](../Images/460e369274dab88b55778a83b04f2cb3.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-30T13:19:30.543

这里只是一个快速代码 - 为我工作！

```
func collectionView(collectionView: UICollectionView, viewForSupplementaryElementOfKind kind: String, atIndexPath indexPath: NSIndexPath) -> UICollectionReusableView {

    let headerView = self.mainPictureCollectionView.dequeueReusableSupplementaryViewOfKind(kind, withReuseIdentifier: "headerView", forIndexPath: indexPath)

    headerView.addSubview(searchBar)
    return headerView
} 
```

# jquery - 在 fancybox 中加载一个外部 .jsp 页面

> ID：12626916
> 
> 赞同：0
> 
> 时间：2012-09-27T17:27:50.110
> 
> 标签：jquery, jsp, fancybox

我正在尝试在 Fancybox 中加载外部页面，但只是得到一个空白 iframe。

如果我尝试`<dsp:include page="/jsp/product/us/common/accoladeDisplay.jsp"/>`使用 .jsp，我试图从页面加载正常。Fancybox 似乎不喜欢我使用`<a href="/jsp/product/us/common/accoladeDisplay.jsp" class="has-award-popup">more info</a></p>`.

这是.js：

```
if($("a.has-award-popup").length > 0){
    $(".has-award-popup").fancybox({
        'width'             : '50%',
        'height'            : '75%',
        'autoScale'         : true,
        'transitionIn'      : 'none',
        'transitionOut'     : 'none',
        'type'              : 'iframe'
    });

} 
```

# python - Python 的 win32api 仅打印到默认打印机

> ID：12626918
> 
> 赞同：6
> 
> 时间：2012-09-27T17:28:02.403
> 
> 标签：python, winapi, pdf, printing, shellexecute

我正在尝试使用`win32api`将 PDF 文档输出到特定打印机。

```
win32api.ShellExecute(0, "print", filename, '/d:"%s"' % printername, ".", 0) 
```

`filename`是文件的完整路径名，`printname`是我通过`win32api.EnumPrinters(6)`.

即使`printername`是不同目标的名称，文件也会发送到 Windows 默认打印机（我的期望是传递特定打印机会将命名文件发送到该打印机，而不是默认打印机）。

关于我做错了什么的任何提示？是否有不同的方法可以将 PDF 文件通用地打印到特定的打印机？除非其他一切，有没有办法从我的程序中临时更改默认打印机？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T14:29:55.617

MikeHunter 的回答是一个不错的起点。

建议的解决方案是调用 Acrobat 或 Acrobat Reader 进行实际打印，而不是通过`win32api`. 就我的目的而言，这就足够了：

```
from subprocess import call

acrobat = "C:\Program Files\Adobe\Acrobat 7.0\Acrobat.exe" ## Acrobat reader would also work, apparently
file = "C:\path\to\my\file.pdf"
printer = "Printer Name Goes Here"

call([acrobat, "/T", file, printer]) 
```

这会启动 Acrobat，并将给定的文件打印到指定的打印机，即使它不是 Windows 默认设置。以这种方式处理的第一个打印作业需要几秒钟（我假设这是正在启动并缓存在内存中的 Acrobat 服务），后续作业会立即打印。我没有对此进行任何类型的负载测试，但我认为调用不那么简单，所以不要相信它的巨大吞吐量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-10-06T11:11:51.700

我使用 SumatraPDF 来实现与用户 Inaimathi 发布的类似解决方案（Python 3）：

```
import time
from subprocess import call

start = time.perf_counter()
sumatra = "C:\\Program Files\\SumatraPDF\\SumatraPDF.exe"
file = "C:\\Users\\spiderman\\Desktop\\report.pdf"

call([sumatra, '-print-to-default', '-silent', file])
end = time.perf_counter()
print("PDF printing took %5.9f seconds" % (end - start)) 
```

您可以传递给 SumatraPDF 的命令行参数列表在[这里](https://www.sumatrapdfreader.org/docs/Command-line-arguments.html "SumatraPDF 命令行参数")。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-30T14:54:07.067

我正在尝试将任何旧文件打印到特定的打印机，所以这些答案对我没有帮助。但是，我确实找到了完美的解决方案。Windows 有一个名为的规范动词`printto`，它不会显示在上下文菜单中。它被用作用户将文档拖放到打印机上以启用以这种方式进行打印的一种方式。我们可以使用该功能；第二个参数是打印机的名称。我永远无法让`/d:`参数与`print`规范动词一起正常工作，但这个解决方案为我解决了这个问题。我把`printername`引号括起来，以防里面有空格。

```
win32api.ShellExecute(0, "printto", filename, f'"{printername}"', ".", 0) 
```

# mongodb - 设置 MongoDB 分片集群的最简单方法

> ID：12626920
> 
> 赞同：0
> 
> 时间：2012-09-27T17:28:10.690
> 
> 标签：mongodb, testing, admin, sharding

使用 MongoDB 设置分片集群的最简单方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T17:28:10.690

在不连接数据库的情况下启动 mongo shell：

```
 mongo --nodb 
```

然后开始一个新的分片测试，指定你想要的 mongos 和分片的数量：

```
 new ShardingTest({ shards: 2, mongos: 1 }) 
```

每个进程的日志输出将通过管道传输到这个单一的 shell（所以会有很多）。这使得该 shell 有点无法使用，但至少它只占用一个窗口，并且使您不必分叉并指定日志路径。

只需打开另一个外壳，您就可以开始了。连接到端口 30999 上的第一个 mongos。

# asp.net - 生成 UI 以测试 Web 服务操作

> ID：12626921
> 
> 赞同：0
> 
> 时间：2012-09-27T17:28:10.787
> 
> 标签：asp.net, wcf, web-services, wsdl

我正在将基本的 .NET 网页创建为 UI，以调用 WCF 服务并显示结果。我觉得很多 Web 开发人员在之前一定遇到过这种情况。

是否有任何现有工具可以将 WSDL 作为输入并在 HTML 或 .NET 网页中生成输入字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T18:04:56.707

还有一个我读过的名为storm的工具，但我没有直接的经验。

[http://storm.codeplex.com/](http://storm.codeplex.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T19:40:13.330

从网页测试服务绝对是一种不好的做法。

根据您的服务，有许多可用的工具，如 WcfTestClient、soapUI、WCFStorm，......但也是一种不好的用法。

从我的角度来看，你永远找不到比你最喜欢的单元测试框架更好的工具。测试客户端和soapUI 都不会创建一个可以在持续集成场景中运行的测试。

# java - 调用类中的函数来设置变量

> ID：12626924
> 
> 赞同：-2
> 
> 时间：2012-09-27T17:28:24.930
> 
> 标签：java

```
 package payroll3;

     /**
     *
     * @author Wiccan
     */
     //employee class
     public class Employee {

//fields
String name;
double rate;
double hours;
double gross;
double fedtax;
double statetax;
double deduction;
double netpay;

// constructor

public Employee(String name, double rate, double hours) {
    this.name = name;
    this.rate = rate;
    this.hours = hours;

}

    //returns net pay
    public double getNetPay() {
        return gross - deduction;
                }

        public String getName () {
        return name;
    }

    public void setName (String name) {
        this.name = name;
    }

    public double getHours() {
        return hours;
    }

    public void setHours(double hours) {
    this.hours = hours;
}

public double getRate() {
    return rate;
}

public void setRate(double rate) {
    this.rate = rate;
}

     public double getGross() {
        return hours*rate;
    }

    public void setGross(double gross) {
        this.gross = gross;
    }

    public double getFedtax() {
        return fedtax*gross;
    }

    public void setFedtax(double fedtax){
        this.fedtax = fedtax;
    }

    public double getStatetax() {
        return statetax*gross;
    }
    public void setStatetax(double statetax) {
        this.statetax = statetax;
    }

    public double getDeduction() {
        return statetax+fedtax;
    }

    public void setDeduction (double deduction) {
        this.deduction = deduction;
                }

    } 
```

我基本上是想让这个类中的变量正常工作。当我用它的程序运行它时，我应该得到一笔净工资。但是，当我运行它时，我会得到 0.00 美元的金额，尽管我应该得到 296.00（大约取决于输入）。有人告诉我，我没有调用该函数来设置值。我该怎么做呢？我尝试了许多不同的方法，并认为我做对了，但我似乎总是得到相同的输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T17:44:16.017

您正在将方法与简单的 setter/getter 混合使用。您有一个属性 netPay，但 getNetPay() 不返回它；相反，它是根据 GrossPay 和扣除额来计算的。该计算的结果返回给调用者，但不保存在对象的状态中。您也有一个 setGross()，但 getGross() 不会返回它。

决定什么是类的属性，以及应该计算什么。在调用 getNetPay 之前，您需要填充用于扣除的属性：

```
employee.setFederalTax(0.13); 
```

（您缺少 stateTax 和 fedTax 来驱动其他一些计算）。然后你可以使用这些计算：

```
public double getNetPay() {
    return getGross() - getDeductions();
} 
```

任何计算出来的东西都不应该有一个集合函数。

# asp.net - 在 asp.net 中使用查询字符串参数选择列

> ID：12626927
> 
> 赞同：2
> 
> 时间：2012-09-27T17:28:32.437
> 
> 标签：asp.net, sql, querystringparameter

我正在尝试使用 asp:QueryStringParameter 来更改我想要获取的女巫 SQL 表列。但是当我尝试时，我只是将查询字符串参数作为新列的每一行。

这是我到目前为止所拥有的。

```
<asp:SqlDataSource ID="getContact" runat="server" 
    ConnectionString="<%$ ConnectionStrings:ConnectionString1 %>" 
    ProviderName="<%$ ConnectionStrings:ConnectionString1.ProviderName %>" 
    SelectCommand="
        SELECT 
            [fName], 
            [lName], 
            @c as contact    
        FROM 
            RidesMaster 
        WHERE 
            [userID] = @ID">
    <SelectParameters>
        <asp:QueryStringParameter Name="c" QueryStringField="c" Type="String" />
        <asp:QueryStringParameter Name="ID" QueryStringField="ID" Type="Int32" />
    </SelectParameters>
</asp:SqlDataSource> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T22:31:12.940

只要您的动态列属于相同类型或可以转换为相同类型，您就可以使用 CASE 语句执行此操作：

```
SELECT 
  [fName], 
  [lName],
  CASE @c
    WHEN 'column1' THEN [column1]
    WHEN 'column2' THEN [column2]
    WHEN 'column3' THEN [column3]
    ELSE 'column4'
    END as contact    
FROM 
  RidesMaster 
WHERE 
  [userID] = @ID 
```

# maven - 生命周期配置未涵盖插件执行：org.datanucleus:maven-datanucleus-plugin:3.0.1:enhance（执行：默认，阶段：编译）

> ID：12626928
> 
> 赞同：2
> 
> 时间：2012-09-27T17:28:34.170
> 
> 标签：maven, execution, datanucleus, eclipse-juno

我正在使用日食朱诺

版本：Juno 发布版本 ID：20120614-1722

POM.xml 显示错误为：生命周期配置未涵盖插件执行：org.datanucleus:maven-datanucleus-plugin:3.0.1:enhance（执行：默认，阶段：编译）

```
<build>
    <plugins>
        <plugin>
            <groupId>org.datanucleus</groupId>
            <artifactId>maven-datanucleus-plugin</artifactId>
            <version>3.0.1</version>
            <configuration>
                <fork>false</fork>
                <log4jConfiguration>${basedir}/log4j.properties</log4jConfiguration>
                <verbose>true</verbose>
                <enhancerName>ASM</enhancerName>
                <!-- <api>JPA</api> -->
                <persistenceUnitName>applicatonPersistenceUnit</persistenceUnitName>
            </configuration>
            <executions>
                <execution>
                    <phase>compile</phase>
                    <goals>
                        <goal>enhance</goal>
                    </goals>
                </execution>
            </executions>
        </plugin> 
```

请指教...谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-15T15:49:07.617

您可以从以下网址获取有关此错误背景的信息：[http ://wiki.eclipse.org/M2E_plugin_execution_not_covered](http://wiki.eclipse.org/M2E_plugin_execution_not_covered)

总之，在某些阶段，eclipse 中的 m2e 执行可能无法按预期工作，maven 需要一个显式命令（即忽略、执行或委托）来决定在该阶段做什么。

最近的 Eclipse 版本（我正在使用 Kepler）在您右键单击错误时提供“快速修复”选项，并将`<pluginManagement>`设置添加到您的 pom 文件中。`<ignore />`如果您更喜欢“执行”或“延迟”，您可以用合适的操作替换该操作。

这里讨论了一个类似的问题：[如何解决 Spring Data Maven Builds 的“生命周期配置未涵盖的插件执行”](https://stackoverflow.com/questions/6352208/how-to-solve-plugin-execution-not-covered-by-lifecycle-configuration-for-sprin)

# c - 指针 C - 声明

> ID：12626929
> 
> 赞同：3
> 
> 时间：2012-09-27T17:28:34.777
> 
> 标签：c

> **可能重复：**
> [在 C 中，声明指针的正确语法是什么？](https://stackoverflow.com/questions/3280729/in-c-what-is-the-correct-syntax-for-declaring-pointers)

我正在与c语言作斗争。指针对我来说是新的，我想我越来越接近理解它们了。

我有一个问题。

有什么区别：

```
int k = 4;
int* pcp = &k; 
```

和

```
int k = 4;
int *pcp = &k; 
```

我似乎找不到指针的这些声明之间有什么区别，它只是语法糖-还是有什么区别？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T17:30:31.637

这些声明没有区别，但以下两个声明有区别：

```
int* p, p2;  // declares a pointer to int and a regular int 
```

和：

```
int *p, *p2; // declares two pointers to int 
```

这可能会被您的示例所隐藏。

所以我更喜欢第二个声明。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-27T17:30:17.750

你可以自己试试。只需输入两者， printf 看看会发生什么：P

如果我没记错的话，那是一样的；）

# c# - 如何获取RepeaterControl中的所有项目

> ID：12626930
> 
> 赞同：1
> 
> 时间：2012-09-27T17:28:36.743
> 
> 标签：c#, asp.net, repeater

我有一个转发器，它获取由分页数据源绑定的数据，它一次在转发器中显示 25 个项目。

中继器中的每一行都有一个复选框...

我想要做的是单击按钮检查转发器中的所有复选框......然后在代码循环中通过转发器中的控件并获取所有已检查的行。

但我遇到的问题是它只获取当前页面上的 25 个复选框（受 PagedDataSource 限制），但我需要获取所有行。

请协助。

这是我使用的循环：

```
int count = 0;
            foreach (Control item in repeater.Controls)
            {
                foreach (Control innerControl in item.Controls)
                {
                    if (innerControl.ID == null)
                    {
                        continue;
                    }
                    if (innerControl.ID == "chk")
                    {
                        count++;
                    }
                }
            } 
```

# c# - 在模型视图中更改属性并在视图中显示

> ID：12626931
> 
> 赞同：0
> 
> 时间：2012-09-27T17:28:39.363
> 
> 标签：c#, wpf, mvvm

我用 mvvm- 模型编程。

我有一个文本框（txtResult），它在我的规则引擎中计算并返回给 mu modelview。这样可行。但更改未显示在我的文本框中。

我的视图的 xaml 代码（在后台什么都没有）：

```
<Window x:Class="RulesEngineExample.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="177" Width="491"
    xmlns:local="clr-namespace:RulesEngineExample" Loaded="Window_Loaded">
<Window.DataContext>
        <local:MainViewModel />
</Window.DataContext>
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="51*" />
        <RowDefinition Height="24*" />
        <RowDefinition Height="28*" />
        <RowDefinition Height="24*" />
        <RowDefinition Height="11*" />
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="10*" />
        <ColumnDefinition Width="119*" />
        <ColumnDefinition Width="5*" />
        <ColumnDefinition Width="41*" />
        <ColumnDefinition Width="6*" />
        <ColumnDefinition Width="119*" >
        <ColumnDefinition Width="30*" />
        <ColumnDefinition Width="121*" />
        <ColumnDefinition Width="18*" />
    </Grid.ColumnDefinitions>
    <TextBox  Name="txtField1" Text="{Binding Field1, UpdateSourceTrigger=PropertyChanged}"   Grid.Row="1"  Grid.Column="1" />
    <TextBox Name="txtField2" Text="{Binding Field2, UpdateSourceTrigger=PropertyChanged}"  Grid.Row="1"  Grid.Column="5" />
    <TextBox   Name="txtResult" Text="{Binding ResultCalc, Mode=TwoWay,   UpdateSourceTrigger=PropertyChanged}"    Grid.Column="7" Grid.Row="1" IsReadOnly="True" />
    <Label Height="23" Content="="  Grid.Row="1"  Grid.Column="6" />
    <ComboBox  Height="23" SelectedItem="{Binding Operator,  Mode=TwoWay}" Name="cbOperator"  Grid.Row="1" Grid.Column="3">
        <ComboBoxItem Content="+" />
        <ComboBoxItem Content="-" />
        <ComboBoxItem Content="*" />
        <ComboBoxItem Content="/" />
    </ComboBox>
    <Button Content="Regeln bearbeiten" Height="23"  Name="btn"  Grid.Column="7" Grid.Row="3" Click="btn_Click" />
</Grid>
</Window> 
```

还有我的视图模型代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using GalaSoft.MvvmLight;
using GalaSoft.MvvmLight.Command;
using GalaSoft.MvvmLight.Messaging;
using System.ComponentModel;
using System.Windows.Media;

namespace RulesEngineExample
{
    public class MainViewModel : ViewModelBase, INotifyPropertyChanged
    {
        public MainViewModel()
        {
            Messenger.Default.Register<double>(this, SetResult);
            Messenger.Default.Register<Brush>(this, SetFailColor);
        }

        private Brush brFailBrush;
        public Brush FailBrush
        {
            get { return brFailBrush; }
            set 
            {
                brFailBrush = value;
                base.RaisePropertyChanged("FailBrush");
            }
        }

        private string strFieldOne;
        public string Field1
        {
            get { return strFieldOne ; }
            set 
            {
                strFieldOne = value;
                OnPropertyChanged("Field1");
            }
        }

        private string strFieldTwo;
        public string Field2
        {
            get { return strFieldTwo; }
            set 
            {
                strFieldTwo = value;
                OnPropertyChanged("Field2");
            }
        }

        private string strResult;
        public string ResultCalc
        {
            get { return strResult; }
            set 
            {
                string strOldResult = strResult ;
                strResult = value;
                base.RaisePropertyChanged("ResultCalc");
                //OnPropertyChangedAtVM("ResultCalc");
            }
        }

        private string strOperator;
        public string Operator
        {
            get { return strOperator;}
            set 
            {
                string[] s = value.Split(':');
                string st = s[s.Length - 1];
                strOperator = st.Trim();
                OnPropertyChanged("Operator");
            }
        }

        public void OnPropertyChanged(string propertyName)
        {
            if (this.PropertyChanged != null)
            {
                this.PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
                PropertyChangedItem item = new PropertyChangedItem()
                {
                    Operator = this.Operator,
                    Field1 = this.Field1,
                    Field2 = this.Field2,
                    Result = this.ResultCalc
                };
                Messenger.Default.Send<PropertyChangedItem>(item);
            }
        }

        public event PropertyChangedEventHandler PropertyChanged;

        private void SetResult(double dResult)
        {
            this.ResultCalc = dResult.ToString();
            base.RaisePropertyChanged("ResultCalc");
        }

        private void SetFailColor(Brush FailBrush)
        {
            this.FailBrush = FailBrush;
        }
    }
} 
```

# html - 在 Flex 4 中显示完整 HTML 页面的方法

> ID：12626932
> 
> 赞同：1
> 
> 时间：2012-09-27T17:28:45.997
> 
> 标签：html, iframe, flex4, adobe

是否有任何方法可以在实际工作的 Flex 4 应用程序中嵌入完整的 HTML 页面或页面？Flex iframe 基本上已经死了，它不起作用（请参阅我的另一个问题），并且`<mx:HTML>`不健壮。我知道这是一个非常复杂的情况，但是在这里解释为什么我需要完成这个需要太长时间。

任何想法或建议将不胜感激。我在网上到处搜索，没有真正有用的结果。

# jquery - 如何切换 Twitter Bootstrap 的表格行背景颜色？

> ID：12626935
> 
> 赞同：5
> 
> 时间：2012-09-27T17:28:51.450
> 
> 标签：jquery, css, twitter-bootstrap

参考我之前[的帖子](https://stackoverflow.com/questions/12624472/how-can-i-remove-a-background-tr-color-from-a-twitter-bootstrap-table)：

我的 HTML

```
<table class="table table-bordered table-condensed table-striped">
    <thead>
        <tr>
            <th>Col 1</th>
            <th>Col 2</th>
            <th>Col 3</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><strong>Data 1</strong></td>
            <td>Data 2</td>
            <td>Data 3</td>
        </tr>
        <tr>
            <td><strong>Data 1</strong></td>
            <td>Data 2</td>
            <td>Data 3</td>
        </tr>
        <tr>
            <td><strong>Data 1</strong></td>
            <td>Data 2</td>
            <td>Data 3</td>
        </tr>
    </tbody>
</table> 
```

jQuery

```
$(document).ready(function(){
    $('table.table-striped tr').on('click', function () {
        $(this).find('td').css('background-color', '#ff0000');

         // toggleClass doesn't seem to work

     });
 }); 
```

我正在尝试通过单击事件将行颜色关闭。知道这是否可以使用用户定义的 css 选择器？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T18:11:03.597

你可以试试这个

**CSS**

```
.bg{background-color:#ff0000 !important;}​ 
```

**JS**

```
$(document).ready(function(){
    $('table.table-striped tbody tr').on('click', function () {
        $(this).closest('table').find('td').removeClass('bg');
        $(this).find('td').addClass('bg');
    });
});​ 
```

[**演示**](http://jsfiddle.net/rgSBE/1/)。

**更新：**用于切换

```
$(document).ready(function(){
    $('table.table-striped tbody tr').on('click', function () {
        $(this).find('td').toggleClass('bg');
    });
});​ 
```

[**演示**](http://jsfiddle.net/rgSBE/2/)。

# iphone - 未调用 UITextViewDelegate 方法（UITableViewCell 中的 UITextView）

> ID：12626938
> 
> 赞同：12
> 
> 时间：2012-09-27T17:29:04.533
> 
> 标签：iphone, ios, uitextview, uitextviewdelegate

我必须做一些根本错误的事情，我的 UITextViewDelegate 的实现方法没有触发。我有一个 UITextView ，它是 UITableCellView 的子视图，并且没有调用代表。

```
- (void)textViewDidBeginEditing:(UITextView *)textView {

    NSLog(@"textViewDidBeginEditing");
    // never called...
}

- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text {

    NSLog(@"shouldChangeTextInRange");  
    // never called... 
} 
```

建议？我不知道这是否重要，但该协议在我的@interface 声明中明确命名。

```
@interface DetailViewController () <UITextViewDelgate, ..., ....> 
```

谢谢！

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-27T18:30:04.473

您应该在 xib 文件中添加 textViewObj.delegate **= self**或为该文本视图属性提供委托连接，然后它应该可以工作并触发 UITextView 的所有委托方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-05-19T16:39:28.907

根据我的经验，对此有几点建议：

1) 检查您使用的是 UITextField 还是 UITextView。

2) 根据您使用的文本字段类型，将以下声明添加到您的接口声明中

```
@interface MyInterface : UIViewController<UITextFieldDelegate>
                      or
@interface MyInterface : UIViewController<UITextViewDelegate> 
```

3）将您的控制器注册为您的文本字段的代表：

```
[myTextField setDelegate:self]; 
```

4）覆盖所需的方法

```
 -(void)textFieldDidBeginEditing:(UITextField *)textField
              or
 - (void)textViewDidBeginEditing:(UITextView *)textView; 
```

就我而言。

# html - Mailto 提交按钮

> ID：12626940
> 
> 赞同：31
> 
> 时间：2012-09-27T17:29:10.207
> 
> 标签：html, asp.net-mvc, mailto

是否可以在提交按钮上实现`mailto:`功能`<input type="submit" />`？我使用 ASP.NET MVC。也许有一些棘手的控制器动作结果来实现这一点。请你帮助我好吗？

PS我知道我可以让锚看起来像一个按钮。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-09-27T17:38:35.303

在 HTML 中，您可以在元素的属性中指定`mailto:`地址。`<form>``[action]`

```
<form action="mailto:youraddr@domain.tld" method="GET">
    <input name="subject" type="text" />
    <textarea name="body"></textarea>
    <input type="submit" value="Send" />
</form> 
```

这将允许用户的电子邮件客户端创建一个预先填充了`<form>`.

这*不会*做的是发送电子邮件。

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2016-05-27T10:32:35.727

这似乎工作正常：

```
<button onclick="location.href='mailto:em@i.l';">send mail</button> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-05-23T11:01:55.633

您需要做的是`onchange`在表单中使用事件侦听器并`href`根据邮件的上下文更改发送按钮的属性：

```
<form id="form" onchange="mail(this)">
  <label>Name</label>
  <div class="row margin-bottom-20">
    <div class="col-md-6 col-md-offset-0">
      <input class="form-control" name="name" type="text">
    </div>
  </div>

  <label>Email <span class="color-red">*</span></label>
  <div class="row margin-bottom-20">
    <div class="col-md-6 col-md-offset-0">
      <input class="form-control" name="email" type="text">
    </div>
  </div>

  <label>Date of visit/departure </label>
  <div class="row margin-bottom-20">
    <div class="col-md-3 col-md-offset-0">
      <input class="form-control w8em" name="adate" type="text">
      <script>
        datePickerController.createDatePicker({
          // Associate the text input to a DD/MM/YYYY date format
          formElements: {
            "adate": "%d/%m/%Y"
          }
        });
      </script>
    </div>
    <div class="col-md-3 col-md-offset-0">
      <input class="form-control" name="ddate" type="date">
    </div>
  </div>

  <label>No. of people travelling with</label>
  <div class="row margin-bottom-20">
    <div class="col-md-3 col-md-offset-0">
      <input class="form-control" placeholder="Adults" min=1 name="adult" type="number">
    </div>
    <div class="col-md-3 col-md-offset-0">
      <input class="form-control" placeholder="Children" min=0 name="childeren" type="number">
    </div>
  </div>

  <label>Cities you want to visit</label><br />
  <div class="checkbox-inline">
    <label><input type="checkbox" name="city" value="Cassablanca">Cassablanca</label>
  </div>
  <div class="checkbox-inline">
    <label><input type="checkbox" name="city" value="Fez">Fez</label>
  </div>
  <div class="checkbox-inline">
    <label><input type="checkbox" name="city" value="Tangier">Tangier</label>
  </div>
  <div class="checkbox-inline">
    <label><input type="checkbox" name="city" value="Marrakech">Marrakech</label>
  </div>
  <div class="checkbox-inline">
    <label><input type="checkbox" name="city" value="Rabat">Rabat</label>
  </div>

  <div class="row margin-bottom-20">
    <div class="col-md-8 col-md-offset-0">
      <textarea rows="4" placeholder="Activities Intersted in" name="activities" class="form-control"></textarea>
    </div>
  </div>

  <div class="row margin-bottom-20">
    <div class="col-md-8 col-md-offset-0">
      <textarea rows="6" class="form-control" name="comment" placeholder="Comment"></textarea>
    </div>
  </div>

  <p><a id="send" class="btn btn-primary">Create Message</a></p>
</form> 
```

JavaScript

```
function mail(form) {
    var name = form.name.value;
    var city = "";
    var adate = form.adate.value;
    var ddate = form.ddate.value;
    var activities = form.activities.value;
    var adult = form.adult.value;
    var child = form.childeren.value;
    var comment = form.comment.value;
    var warning = ""
    for (i = 0; i < form.city.length; i++) {
        if (form.city[i].checked)
            city += " " + form.city[i].value;
    }
    var str = "mailto:abc@x.com?subject=travel to morocco&body=";
    if (name.length > 0) {
        str += "Hi my name is " + name + ", ";
    } else {
        warning += "Name is required"
    }
    if (city.length > 0) {
        str += "I am Intersted in visiting the following citis: " + city + ", ";
    }
    if (activities.length > 0) {
        str += "I am Intersted in following activities: " + activities + ". "
    }
    if (adate.length > 0) {
        str += "I will be ariving on " + adate;
    }
    if (ddate.length > 0) {
        str += " And departing on " + ddate;
    }
    if (adult.length > 0) {
        if (adult == 1 && child == null) {
            str += ". I will be travelling alone"
        } else if (adult > 1) {
            str += ".We will have a group of " + adult + " adults ";
        }
        if (child == null) {
            str += ".";
        } else if (child > 1) {
            str += "along with " + child + " children.";
        } else if (child == 1) {
            str += "along with a child.";
        }
    }

    if (comment.length > 0) {
        str += "%0D%0A" + comment + "."
    }

    if (warning.length > 0) {
        alert(warning)
    } else {
        str += "%0D%0ARegards,%0D%0A" + name;
        document.getElementById('send').href = str;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T17:36:35.710

或者您可以使用 action:mailto 创建一个表单

```
<form action="mailto:rohit@k.com"> 
```

看一下这个。

[http://webdesign.about.com/od/forms/a/aa072699mailto.htm](http://webdesign.about.com/od/forms/a/aa072699mailto.htm)

但这实际上是通过电子邮件提交表单。这是您想要的吗？您也可以只使用

`<button onclick="">`然后用一些javascript来实现这一点。

你可以做一个`<a>`看起来像按钮。有很多方法可以解决这个问题。做一点搜索。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-12-18T07:40:55.300

只需在“按钮”标签中包含“a”标签。

```
<button><a href="mailto:..."></a></button> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-11-28T12:24:45.310

基于 html 的电子邮件创建表单中可能字段的完整列表：

*   主题
*   抄送
*   密件抄送
*   身体

```
<form action="mailto:youraddr@domain.tld" method="GET">
  <input name="subject" type="text" /></br>
  <input name="cc" type="email" /><br />
  <input name="bcc" type="email" /><br />
  <textarea name="body"></textarea><br />
  <input type="submit" value="Send" />
</form> 
```

[https://codepen.io/garfunkel61/pen/oYGNGp](https://codepen.io/garfunkel61/pen/oYGNGp)

# xcode - 如何从应用程序打开地图并放置任意图钉

> ID：12626950
> 
> 赞同：2
> 
> 时间：2012-09-27T17:29:37.487
> 
> 标签：xcode, maps, ios6, url-scheme

我已经阅读了几个关于此的问题，但似乎没有合适的答案。如果我想从我的应用程序中打开由坐标和任意名称定义的任意位置的地图，以用作放置在该位置的图钉中的标题，我该怎么做？在 iOS5 中，我将 openURL 与这样构建的 url 方案一起使用：

`maps:q=Arbitrary+name@45.000,45.000`

这不再起作用（因此所有要更新的应用程序！），而且我似乎没有找到实现相同行为的方法：我提供的名称始终用作搜索参数，如果没有找到别针不会掉。另一方面，任何找到的结果似乎都会覆盖坐标，因此在地球的另一部分放置了几个大头针。我甚至在尝试以下格式：

```
http://maps.apple.com/?sll=45.000,45.000&q=Arbitrary+name 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T12:35:54.667

这可以通过以下方式完成：

```
 CLLocationCoordinate2D coOrdinates = //
  MKPlacemark *location = [[MKPlacemark alloc] initWithCoordinate:coOrdinates addressDictionary:nil];
  MKMapItem *pinItem = [[MKMapItem alloc] initWithPlacemark:endLocation];
  pinItem.name =@"Location";
  NSMutableDictionary *launchOptions = [[NSMutableDictionary alloc] init];
  [pinItem openInMapsWithLaunchOptions:launchOptions];
  [location release];
  [launchOptions release];
  [pinItem release]; 
```

# c# - 如何将按钮添加到 UIDocumentInteractionController 预览

> ID：12626951
> 
> 赞同：5
> 
> 时间：2012-09-27T17:29:40.817
> 
> 标签：c#, xamarin.ios, uidocumentinteraction, uidocument

我`UIDocumentInteractionController`用于文件预览：

```
interactionController = UIDocumentInteractionController.FromUrl(url);    
interactionController.Delegate = new UIDocumentInteractionControllerDelegateClass(this);    
InvokeOnMainThread(delegate{interactionController.PresentPreview(true);}
}); 
```

如何在视图顶部添加自定义按钮以执行某些操作？

# java - 在 Java 中，是否有类似 VB6 的“DoEvents”之类的东西

> ID：12626952
> 
> 赞同：3
> 
> 时间：2012-09-27T17:29:53.327
> 
> 标签：java, vb6

我来自 VB6，我是 Java 新手。在 VB6 中，`DoEvents`放弃处理器并允许它处理其他线程。Java中有类似的东西吗？我该如何使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T17:32:11.387

> 放弃处理器并允许它处理其他线程。

[Thread#yield()](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#yield%28%29)是自动放弃对处理器的控制的 java 对应项。

[来自java.lang.Thread#yield()](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#yield%28%29)的 javadoc ：

> 向调度程序提示当前线程愿意放弃其当前对处理器的使用。调度程序可以随意忽略此提示。Yield 是一种启发式尝试，旨在改善线程之间的相对进展，否则会过度使用 CPU。它的使用应与详细的分析和基准测试相结合，以确保它实际上具有预期的效果。
> 
> 很少使用这种方法。它对于调试或测试目的可能很有用，它可能有助于重现由于竞争条件导致的错误。在设计并发控制结构（例如 java.util.concurrent.locks 包中的结构）时，它也可能很有用。

**注意**：对于基于 Java 的桌面 UI 框架，如[Swing](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/SwingUtilities.html#invokeLater%28java.lang.Runnable%29)、[RIM 的 UI 应用程序](http://www.blackberry.com/developers/docs/4.1api/net/rim/device/api/system/Application.html#invokeLater%28java.lang.Runnable%29)，有一些方法可以使用`invokeLater()`语义类型来修改 UI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T17:47:28.593

我自己从 VB6 迁移到 Java 并且当时正在寻找同样问题的答案，我可以告诉你，我必须改变思考如何做事的方式。对“doEvents”的需求很可能是因为您尝试以与编写 VB6 相同的方式编写 Java 程序，或者尝试将 VB6 项目“逐行”移植到 Java。两者都不是一个好主意。好好看看摇摆教程（如果这是关于 UI 的）和线程教程，不管它是否是 UI。密切关注并尝试了解 Event Dispatch 线程的工作原理。我发现 Java 教程是一个很好的起点，它们现在位于 Oracle：[http](http://docs.oracle.com/javase/tutorial/) ://docs.oracle.com/javase/tutorial/ 查看示例并阅读代码，它们是学习的好地方/实验

您需要开始用 Java 思考，而不是将 VB6 翻译成 Java，我花了一段时间才到达那里，但时间不长，如果您了解它的方法，克服对“doEvents”的需求将使您在这条路上走得很远. 祝你好运，欢迎来到 Stackoverflow，这是寻求帮助的好地方！

# curl - PayPal 发票 API 请求 - 格式化

> ID：12626956
> 
> 赞同：0
> 
> 时间：2012-09-27T17:30:01.840
> 
> 标签：curl, paypal

有人可以向我解释 PayPal 示例中这些字符串值中“+”和“-”的意义吗？PayPal 文档确实没有在 API 文档中解释这一点。

```
&invoice.itemList.item(0).name=Banana+Leaf+--+001 
&invoice.itemList.item(0).description=Banana+Leaf 
```

我看到一些值是 URL 编码的，而另一些值是这些“+”和“-”字符而不是 URL 编码。

为什么？

谢谢

```
############################################################
// CreateAndSendInvoice HTTP headers (-H)
############################################################
curl -s --insecure
-H "X-PAYPAL-SECURITY-USERID: caller_UID"     // UserID from the Caller account
-H "X-PAYPAL-SECURITY-PASSWORD: caller_PSWD"  // Password from the Caller account
-H "X-PAYPAL-SECURITY-SIGNATURE: caller_Sig"  // Signature from the Caller account
-H "X-PAYPAL-REQUEST-DATA-FORMAT: XML" 
-H "X-PAYPAL-RESPONSE-DATA-FORMAT: XML" 
-H "X-PAYPAL-APPLICATION-ID: APP-80W284485P519543T"    // Sandbox AppID
https://svcs.sandbox.paypal.com/Invoice/CreateAndSendInvoice -d
"requestEnvelope.errorLanguage=en_US 
&invoice.merchantEmail=merchant%40domain.com 
&invoice.payerEmail=jbui-us-business2%40paypal.com 
&invoice.currencyCode=USD 
&invoice.itemList.item(0).name=Banana+Leaf+--+001 
&invoice.itemList.item(0).description=Banana+Leaf 
&invoice.itemList.item(0).quantity=1 
&invoice.itemList.item(0).unitPrice=1 
&invoice.itemList.item(0).taxName=Tax1 
&invoice.itemList.item(0).taxRate=10.25 
&invoice.paymentTerms=Net10 
&invoice.logoUrl=https%3A%2F%2Fwww.example.com%2FYour_logo.jpg" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-14T03:01:26.577

首先，`-`符号不需要进行 URL 编码。事实上，如果您查看此页面的 URL，您会看到`https://stackoverflow.com/questions/12626956/paypal-invoicing-api-requests-formatting`其中有很多`-`符号。

其次，一个空间可以由`+`或者`%20`取决于它在 URL 中的位置来表示。引用[这个答案](https://stackoverflow.com/a/2678602/1408717)：

```
+ means a space only in application/x-www-form-encoded content,
such as the query part of a URL:

http://www.example.com/path/foo+bar/path?query+name=query+value

In this URL, the parameter name is 'query name' (with a space) and
the value is 'query value' (with a space), but the folder name in
the path is literally foo+bar, not 'foo bar'. 
```

所以用你的例子，`Banana+Leaf+--+001`翻译`Banana Leaf -- 001`和 `Banana+Leaf`翻译成`Banana Leaf`.

# ruby - 使用 String#scan 捕获组名称和项目

> ID：12626957
> 
> 赞同：0
> 
> 时间：2012-09-27T17:30:06.183
> 
> 标签：ruby, regex

我有一个这样的字符串：

```
group1
  Members: 
  m/a
  m/b
group2
  Members: 
  m/c
  m/d
  m/e
group3
  No Members 
```

我想要一个像这样的扫描结果：

```
[["group1","a","b"],["group2","c","d","e"],["group3"]] 
```

但我可以拥有：

```
[["group1","a"],["group2","c"],["group3", nil]] 
```

使用这个正则表达式：

```
text.scan(/([^\r\n]+)\r?\n[\s\t]*(?:No |)Members[\s:]*\r?\n(?:[\t\s]*m\/(\w+)+\r?\n)*/m) 
```

我可以只用 regexp 做我想做的事吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T17:32:58.920

如果您想存储这样的分层数据，最好使用 YAML 而不是尝试使用正则表达式解析字符串。

组.yml：

```
group1:
  members: 
  - m/a
  - m/b
group2:
  members: 
  - m/c
  - m/d
  - m/e
group3:
  members: [] 
```

解析这些数据：

```
> YAML.load(File.open('./groups.yml'))
 => {"group1"=>{"members"=>["m/a", "m/b"]}, "group2"=>{"members"=>["m/c", "m/d", "m/e"]}, "group3"=>{"members"=>[]}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T20:08:17.263

虽然可以在正则表达式中做到这一点，但它变得笨拙，所以我会这样做：

```
data = <<EOT
group1
  Members: 
  m/a
  m/b
group2
  Members: 
  m/c
  m/d
  m/e
group3
  No Members
EOT

pp data.lines.slice_before(/^group/).to_a
=> [["group1\n", "  Members: \n", "  m/a\n", "  m/b\n"],
    ["group2\n", "  Members: \n", "  m/c\n", "  m/d\n", "  m/e\n"],
    ["group3\n", "  No Members\n"]] 
```

清理其余部分以满足问题的要求使其：

```
data.gsub(%r{\bm/}, '').split(/\n\s*/).reject{ |s| s[/\bMembers\b/] }.slice_before(/^group/).to_a
=> [["group1", "a", "b"], ["group2", "c", "d", "e"], ["group3"]] 
```

解析的要点确实在`slice_before`. 其他一切都在创建数组和清理。

分解它：

*   `gsub(%r{\bm/}, '')`剥离不受欢迎的`m/`。
*   `split(/\n\s*/)`将行尾的字符串拆分为一个数组，同时删除前导空格。
*   `reject{ |s| s[/\bMembers\b/] }`拒绝任何包含“成员”作为单独单词的行。
*   `slice_before(/^group/)`将数组分成以字符串开头的“组”开头的块。
*   `to_a`再次将其全部转换为数组。

# jquery - 为什么 login.jsp 页面被加载到一个 DIV 中？

> ID：12626959
> 
> 赞同：0
> 
> 时间：2012-09-27T17:30:17.333
> 
> 标签：jquery, jsp, login, tabs, weblogic

背景：我的 Java EE 项目在 Weblogic 上运行。有一个页面包含三个选项卡（使用 jQuery）。当用户单击时，每个选项卡都会加载特定的页面/文件。到目前为止一切正常。

但是，当用户会话超时时，登录页面会加载到当前选项卡区域。我的问题是如何不将登录页面加载到选项卡中（但就像一个新页面一样）。

非常感谢您的帮助/评论

# sql - 如何在 SSIS 项目中的单个数据流任务中运行多个任务

> ID：12626961
> 
> 赞同：1
> 
> 时间：2012-09-27T17:30:22.080
> 
> 标签：sql, sql-server, sql-server-2008, ssis

我有一个问题，我在单个控制流中运行了多个数据流任务，如果 5 个源中的 5 个还活着，它工作正常，但任何一个源都死了，它没有执行剩余的 4 个源流，如何运行哪个还活着当我们执行作业时应该运行顺利

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T18:10:11.260

我假设 5 个数据流在控制流上都连接在一起。无论前一个数据流是成功还是失败，都希望执行所有 5 个数据流。

为此，您需要将 Precedence Constraint 从 Success（绿色）的当前值更改为 Completion（蓝色）。要访问 Precedence Constraint Editor，双击连接线，您应该会看到以下内容。

![在此处输入图像描述](../Images/501b1f2f3451b78329a7672f210e182a.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T22:24:21.587

另一种选择是将所有 5 个数据流任务放在一个序列容器中，并让它们并行运行（不将它们相互连接）。它看起来像这样：

![在此处输入图像描述](../Images/48d0f2b6c14cc6eed893dcc6133e8d72.png)

# ruby-on-rails - ruby on rails 中 button_to 中的 div

> ID：12626968
> 
> 赞同：0
> 
> 时间：2012-09-27T17:30:35.723
> 
> 标签：ruby-on-rails, ruby-on-rails-3

当我尝试使用 button_to 链接 smthing - rails 添加到该按钮标签，我的设计被打破了。我该如何解决？例如：

```
<%= f.submit %>
<%= button_to 'Back', resumes_path %> 
```

我知道我可以使用 link_to 之类的东西，但在这种情况下我需要使用 button_to。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T17:35:33.793

请创建任何类名或 div id 并编写按钮 css。

```
<%= link_to 'Back', resumes_path , :class => "button_css" %> 
```

和写作风格，

```
.button_css
{
   // your button style...
} 
```

* * *

**编辑：试试这个**

```
<% content_tag :button :type => :submit do %>Button<% end %> 
```

这将创建一个按钮，然后您可以添加 onclick 事件来重定向页面。

# ruby-on-rails - Sprockets 在 flot-rails gem 中找不到 javascripts

> ID：12626975
> 
> 赞同：0
> 
> 时间：2012-09-27T17:30:50.277
> 
> 标签：ruby-on-rails, asset-pipeline, flot, sprockets

我尝试使用[foot-rails gem](https://github.com/Vasfed/flot-rails) 来安装flot，但没有成功。

我添加`gem "flot-rails"`到我的 gemfile 并执行`bundle install`

然后我添加了

```
//= require jquery.flot
//= require jquery.flot.resize 
```

到我的 /app/assets/javascripts/application.js 文件

我验证 gem 安装正确（gem show flot-rails），发现 javascripts 都在 gem 的供应商目录中，但我的应用程序报告

> 找不到文件“jquery.flot”（在 ...path/app/assets/javascripts/application.js:12 中）

我选择手动将文件安装到我的资产目录中，但我想知道我的链轮出了什么问题。

为什么 Sprockets 不能解析引用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T17:35:52.923

好吧，我不觉得自己很愚蠢。

之后我需要重新启动网络服务器`bundle install`

# html - CSS 100% 高度又麻烦了

> ID：12626976
> 
> 赞同：0
> 
> 时间：2012-09-27T17:31:05.040
> 
> 标签：html, css

好的，所以我有这个菜单要做，它至少需要占页面的 100%（但不是实际的 css 100%，因为我有一些填充和边距，所以它变得太长）并且它必须增长如果屏幕尺寸太小而无法显示所有链接，则更大。

html:

```
<div id="menu">
    <a href="index.html"><button><img src="img/open.png"/><div>Acceuil</div></button></a>
    <a href="carte.html"><button><img src="img/toggled.png"/><div>La carte</div></button></a>
    <a href="traiteur.html"><button><img src="img/toggled.png"/><div>Service traiteur</div></button></a>
    <a href="reservation.html"><button><img src="img/toggled.png"/><div>Réservation</div></button></a>
    <a href="gite.html"><button><img src="img/toggled.png"/><div>Gîte</div></button></a>
</div> 
```

CSS：

```
#menu{
    background-color: #850101;
    box-shadow: inset 0 0 25px rgba(0,0,0,.45);
    padding-top: 114px;
    margin-left: 5%;
    min-height: auto;
    display: block;
    height:auto;
    bottom:0;
    top:0;
    left:0;
    right:0;
    z-index: 1
}
#menu button{
    background-color: #640404;
    box-shadow: inset 0 0 25px rgba(0,0,0,.45);
    border: none;
    width: 100%;
    color: #fff;
    font-size: 30px;
    height: 60px;
    text-align: left;
    padding: 5 0;
    margin-bottom: 7px;
}
#menu button:hover{
    background-color: rgba(94,1,1,0);
}
#menu img{
    margin-right: 30px;
    padding-bottom: 2px;
    margin-left: 5px;
}
#menu button div{
    display: inline;
    position: absolute;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T17:33:16.663

`box-sizing`救援！

```
#menu {box-sizing: border-box; min-height: 100%; padding: whatever;} 
```

前缀版本是：

*   `-moz-box-sizing: border-box;`
*   `-webkit-box-sizing: border-box;`

浏览器支持[非常好](http://caniuse.com/#feat=css3-boxsizing)。也可以很好地与 jQuery 搭配使用。

# c# - 从 c#.net 添加记录以访问数据库时出错

> ID：12626977
> 
> 赞同：-1
> 
> 时间：2012-09-27T17:31:05.777
> 
> 标签：c#, ms-access

代码：

```
 int MaxRows = 0;
    int inc = 0;

    private void Form2_Load(object sender, EventArgs e)
    {
        con = new System.Data.OleDb.OleDbConnection();
        ds1 = new DataSet();

        con.ConnectionString = " Provider=Microsoft.ACE.OLEDB.12.0;Data Source=D:/Documents and Settings/user/My Documents/anchu.accdb";
        string sql = "SELECT * From Table1";
        da = new System.Data.OleDb.OleDbDataAdapter(sql, con);

        con.Open();

        da.Fill(ds1, "Table1");
        //NavigateRecords();

        con.Close();
        //con.Dispose();
    }
    /*private void NavigateRecords()
    {
        DataRow drow = ds1.Tables["Table1"].Rows[0];

        textBox1.Text = drow.ItemArray.GetValue(0).ToString();
        textBox2.Text = drow.ItemArray.GetValue(1).ToString();
        textBox3.Text = drow.ItemArray.GetValue(2).ToString();
        textBox4.Text = drow.ItemArray.GetValue(3).ToString();
    }*/

    private void groupBox1_Enter(object sender, EventArgs e)
    {

    }

    private void button2_Click(object sender, EventArgs e)
    {
        textBox1.Clear();
        textBox2.Clear();
        textBox3.Clear();
        textBox4.Clear();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        System.Data.OleDb.OleDbCommandBuilder cb;
        cb = new System.Data.OleDb.OleDbCommandBuilder(da);

        DataRow drow = ds1.Tables["Table1"].NewRow();
        drow[0] = textBox1.Text;
        drow[1] = textBox2.Text;
        drow[2] = textBox3.Text;
        drow[3] = textBox4.Text;

        ds1.Tables["Table1"].Rows.Add(drow);

        MaxRows = MaxRows + 1;
        inc = MaxRows - 1;
        da.Update(ds1, "Table1");

        MessageBox.Show("Entry Added");
    }
} 
```

}

我收到一条错误消息：

da.Update(ds1, "Table1");

错误说..OleDBException 未处理

并在其下方说.. INSERT INTO 语句中的语法错误。

我也正确连接了我的访问数据库。

我的表格格式如下

**FIELD NAME**
Sno.(主键)
姓名
公司名称
联系电话

**数据类型** 文本 文本 文本 文本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T18:06:02.690

可能是两者之一：

1）围绕更新语句打开和关闭连接

2）设置适配器的updatecommand属性。见[msdn](http://msdn.microsoft.com/en-us/library/system.data.common.dataadapter.update%28v=vs.100%29.aspx)页面

# excel - 来自工作簿对象的命名范围工作表父级

> ID：12626978
> 
> 赞同：0
> 
> 时间：2012-09-27T17:31:07.960
> 
> 标签：excel, excel-2010, vba

我正在尝试获取对子工作簿中的 Worksheet 对象的引用。

有没有更好的方法从子工作簿中获取工作表参考？

我现在拥有的：

`activeworkbook.Names("rngMarketAreaMgr1").RefersToRange.Worksheet.Name`

似乎有点长而且过分地得到这个名字。由于 Range 最终指的是工作表上的已定义表，因此该表（理论上）可以移动到不同的工作表，因此我需要在逻辑上引用 Workbook 级别的 NamedRange，然后提取 Worksheet 对象然后使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T17:51:34.137

你的意思是这样吗？

```
Debug.Print Range("rngMarketAreaMgr1").Parent.Name 
```

# shell - 如何从 shell 脚本执行以下操作（一次运行多个命令并等待它们）？

> ID：12626982
> 
> 赞同：1
> 
> 时间：2012-09-27T17:31:11.657
> 
> 标签：shell

我想编写一个执行一些命令并等待所有命令终止的 shell 脚本。

我想我要做的就是使用

```
 cmd1 &
      cmd2 &
      cmd3 &
      .... 
```

等等

但我不知道如何等待他们终止。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T17:52:23.893

只需使用`wait`不带任何参数的命令：

```
cmd1 &
cmd2 &
cmd3 &
wait 
```

这将使 bash 等待所有未完成的孩子。只要您没有其他需要继续的后台任务，这将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T17:40:50.780

这个问题有你的问题的答案。:)

您只需`wait`调用该`wait`命令即可处理所有正在运行的作业。

[当任何子进程以代码！= 0结束时，如何在bash中等待几个子进程完成并返回退出代码！= 0？](https://stackoverflow.com/questions/356100/how-to-wait-in-bash-for-several-subprocesses-to-finish-and-return-exit-code-0)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T18:13:08.813

这个例子似乎有效。

```
[stou$ ~]$ (sleep 1 ; echo 1) & (sleep 4 ; echo 4) & (sleep 3 ; echo 3)&  wait; echo done
[1] 13651
[2] 13652
[3] 13653
1
[1]   Done                    ( sleep 1; echo 1 )
3
4
[2]-  Done                    ( sleep 4; echo 4 )
[3]+  Done                    ( sleep 3; echo 3 )
done
[stou$ ~]$ 
```

# asp.net - 如何在 ASP.NET 中读取 JSON？

> ID：12626988
> 
> 赞同：1
> 
> 时间：2012-09-27T17:31:50.277
> 
> 标签：asp.net, json, parsing

我需要一个简单的方法来从 Amazon Affiliates URL 读取结果，我有 Amazon 的代码，我得到了一个我无法在 ASP.NET 中读取的 JSON 结果。有没有一种简单的方法来解析 ASP.NET 4.5 中的 JSON 数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T17:40:43.000

您还可以使用 .NET 内置`JavaScriptSerializer`：

```
using System.Web.Script.Serialization;
...
JavaScriptSerializer js = new JavaScriptSerializer();
dynamic obj = js.Deserialize<dynamic>(jsonString); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T17:35:59.097

您可以使用`JObject class`基于`Json.net`

链接：http: [//james.newtonking.com/pages/json-net.aspx](http://james.newtonking.com/pages/json-net.aspx)

对于解析，您可以使用`JObject.Parse Method`

代码

```
 var jsonString = @"{""Name"":""Aghilas"",""Company"":""....."",
                        ""Entered"":""2012-03-16T00:03:33.245-10:00""}";

    dynamic json = JValue.Parse(jsonString);

    // values require casting
    string name = json.Name;
    string company = json.Company;
    DateTime entered = json.Entered; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T18:56:06.683

使用 JSON.NET 包，非常简单。

要安装软件包：

打开控制台。“查看”>“其他窗口”>“包管理器控制台”

然后键入以下内容： **Install-Package Newtonsoft.Json**

您既可以将 Json 对象读取为动态对象，也可以将其读取为强类型对象。如果您想将 Json 类型读取为强类型对象，您可以执行以下操作：

填充数据的类：

```
public class AmazonAffiliate
{

public string Username {get;set;}

public string Email {get;set;}

public Date BirthDate {get;set;}

} 
```

Json字符串转强类型类的方法：

```
 public static T GetJsonContent<T>(string jsonAsString)
    {
        var serializer = new JsonSerializer<T>();
        return serializer.DeserializeFromString(jsonAsString);
    } 
```

你可以像这样使用它：

```
AmazonAffiliate affiliate = GetJsonContent<AmazonAffiliate>(jsonString); 
```

# android - 如何在 ListView 中显示 2 个数据库值？

> ID：12626992
> 
> 赞同：0
> 
> 时间：2012-09-27T17:32:29.293
> 
> 标签：android, database, listview

我有 2 个活动（`Novamensagem & Mensagenssalva`），`Novamensagem.java`我有一个带有联系人值的微调器、一个 EditText 和一个保存按钮。我选择一个联系人并写一个文本并点击保存。文本被保存，当我打开`Mensagenssalva.java`所有我写的文本并保存在 ListView 中。所以我想知道如何让 ListView 显示我在 Spinner 中选择的联系人的姓名，然后显示消息。例如：

```
Person's name
Message i have written. 
```

//编辑//

现在错误是：编译时强制关闭应用程序。现在的代码：

```
 ListView user = (ListView) findViewById(R.id.lvShowContatos);
    //String = simple value ||| String[] = multiple values/columns
    String[] campos = new String[] {"nome", "telefone"};

    list = new ArrayList<String>();
    c = db.query( "contatos", campos, null, null, null, null, null);
    c.moveToFirst();

    if(c.getCount() > 0) {
        while(true) {
           list.add(c.getString(c.getColumnIndex("nome")).toString());
           list.add(c.getString(c.getColumnIndex("telefone")).toString());
           if(!c.moveToNext()) break;
        }
    }

     // the XML defined views which the data will be bound to
     int[] to = new int[] { R.id.nome_entry, R.id.telefone_entry };

     SimpleCursorAdapter myAdap = new SimpleCursorAdapter(this, R.layout.listview, c , campos, to, 0);

     user.setAdapter(myAdap); 
```

LogCat 错误： `java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.mensagem/com.example.mensagem.Contato}: java.lang.IllegalArgumentException: column '_id' does not exist` 所以事情是，它试图从我的数据库中提取“_id”，但我没有“_id”列/行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T19:52:59.043

**从评论发布**

正如我们所讨论的，通过使用 SimpleCursorAdapter，您将可以更好地控制您的应用程序，同时编写更少的代码行。

为了使用任何 CursorAdapter，您的表*必须*有一个`_id INTEGER PRIMARY KEY`您没有的列。虽然我仍然建议更改您的表格以添加此列，但有一个快速修复。如果你不指定主键，所有 SQLite 表默认创建一个整数主键，你可以用`rowid`,`oid`或引用它`_rowid_`。但是Android要求整数主键列被命名`_id`......同时只需使用关键字创建一个别名`AS`：

```
String[] campos = new String[] {"rowid as _id", "nome", "telefone"}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T18:23:54.520

您需要创建 customAdapter 而不是 ArrayAdapter。查看此链接[http://devtut.wordpress.com/2011/06/09/custom-arrayadapter-for-a-listview-android/](http://devtut.wordpress.com/2011/06/09/custom-arrayadapter-for-a-listview-android/)

# joomla - 在 Jevents 中标记过去的事件？

> ID：12626996
> 
> 赞同：0
> 
> 时间：2012-09-27T17:32:49.410
> 
> 标签：joomla

我想为 Jevents 日历中的过去事件添加一些样式。有一个 CSS 类`cal_td_dayshasevents`来标记有事件的日子。有没有办法在 Joomla Jevents 模块中将 CSS 类添加到过去的事件中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T17:50:28.397

是的，如果模块有一个 css 文件，您可以像这样简单地添加类：

```
cal_td_dayshasevents {
    //css goes here
} 
```

如果还没有 css 文件，请在模块文件夹中创建一个，添加 css 代码，然后在**default.php**中，使用以下内容嵌入 css 文件：

```
$document =& JFactory::getDocument();
$document->addStyleSheet(JURI::root() . "modules/mod_jevents/style.css"); 
```

注意：我不确定 JEvents 的模块被称为什么，因此请确保您相应地更改了上面的 int eh 代码。

希望这可以帮助。

# c++ - 错误：非常简单的示例中的预期构造函数、析构函数或类型转换

> ID：12626999
> 
> 赞同：-1
> 
> 时间：2012-09-27T17:33:04.893
> 
> 标签：c++, linux, constructor, compilation

虽然这个C++编译器错误已经报过很多次了，但是我没有找到解决我的问题的办法。我有两个文件，Foo.hh：

```
class Serial
{
 public:
  Serial(int portNumber);
  ~Serial();
 private:
  int portNr;
}; 
```

和 Foo.cc：

```
#include "Foo.hh"
Serial::Serial(inx portNumber)
{
  portNr = portNumber;
}
Serial::~Serial()
{
} 
```

我尝试在Linux上编译使用

```
g++ -I. -c -o Foo.o Foo.cc 
```

返回错误

```
Foo.cc:4:15: error: expected constructor, destructor, or type conversion before ‘(’ token 
```

我看不出有什么特别的原因会导致错误！任何想法表示赞赏...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T17:34:34.703

`int`在构造函数中拼写错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T17:34:41.890

你写`inx`而不是`int`在 Foo.cc 中。