# StackOverflow 问答 15764000-15764999

# javascript - 选择时如何为菜单应用 CSS？

> ID：15764002
> 
> 赞同：6
> 
> 时间：2013-04-02T12:21:17.523
> 
> 标签：javascript, jquery, html, cookies

我的任务是在加载页面时突出显示选定的菜单。为此，我有以下代码：

```
$('.menuHeader').each(function () {
    $(this).attr('id', 'menu' + ($(this).index() + 1));
    $(this).val($(this).index() + 1);

    // Set the dynamic ids for links
    $(this).find('a').attr('id', 'link' + ($(this).index() + 1));
    //alert('New ID  :  ' + $(this).find('a').attr('id'));
});

$('.menuHeader a').click(function () {
    alert("a");
    $('.menuHeader a').removeClass('menuHeaderActive');
    $(this).parent().parent(".menuHeader").addClass('menuHeaderActive');
}); 
```

但是当我选择第二个菜单时，它会刷新并且缺少选择。

HTML：

```
<div class="menuBar">
    <div class="menuHeader ui-corner-top menuHeaderActive">
        <span><a href="#" onclick="Home()">Home</a></span>
    </div>
    <div class="menuHeader ui-corner-top">
        <span><a href="#" onclick="NewTransaction()">New Transaction</a></span>
    </div>
</div> 
```

我怎么解决这个问题？

```
 function Home() {
            window.location.href = "../../home/welcome";
        }
        function NewTransaction() {
            window.location.href = "../../EnergyCatagory/index";
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:51:32.450

我认为您可以修改您的超链接以包含正确的网址。然后在你的 jQuery 中针对超链接 url 测试浏览器的当前 url - 如果匹配，则应用你的`menuHeaderActive`类。

```
$(document).ready(function () {
    var currentUrl = window.location.href;
    var menuLink = $('.menuHeader a[href="' + currentUrl + '"]');
    menuLink.parent().parent(".menuHeader").addClass('menuHeaderActive');
}); 
```

在单击菜单链接之一后重新加载页面时，我显示的脚本应该运行并且`$('.menuHeader a[href="' + currentUrl + '"]');`应该找到与用户导航的 url 匹配的菜单链接（超链接/a-tag）。然后是找到容器 div 并添加您的类的情况。

基本上，当用户单击菜单链接时，您不会添加 css 类；在页面重定向到另一个页面后，您必须设置 css 类。因此，另一个页面必须针对正确的活动菜单链接设置 css 类。有 100 种方法可以做到这一点，但根据您提供的匹配 url 是最简单的。

就我个人而言，我会让每个页面注册一个对应于其中一个菜单链接的页面 id。像这样的东西...

**HTML**

注意添加到每个 menuHeader div的属性*data-associated-page-id*

```
<div class="menuBar">
    <div class="menuHeader ui-corner-top" data-associated-page-id="home-welcome">
        <span><a href="#" onclick="Home()">Home</a></span>
    </div>
    <div class="menuHeader ui-corner-top" data-associated-page-id="energy-catagory-index">
        <span><a href="#" onclick="NewTransaction()">New Transaction</a></span>
    </div>
</div> 
```

**Javascript**

添加到每个页面

欢迎页面的文档准备处理程序又名../../home/welcome

```
$(document).ready(function () {
    SetActiveMenuCssClass('home-welcome');
}); 
```

能源分类索引页面的文档准备处理程序，又名../../EnergyCatagory/index

```
$(document).ready(function () {
    SetActiveMenuCssClass('energy-catagory-index');
}); 
```

全局定义的函数

```
function SetActiveMenuCssClass(pageId) {
    // finds div with menuHeader class that has the attribute data-associated-page-id equal to the page id
    // then sets the active class
    $('.menuHeader[data-associated-page-id="' + pageId + '"]')
        .addClass('menuHeaderActive');
} 
```

如果您使用的是像 PHP 这样的服务器端语言，那么您可以执行以下操作[https://stackoverflow.com/a/11814284/81053](https://stackoverflow.com/a/11814284/81053)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T13:07:30.257

注意：克里斯提供的答案非常有效，但您必须在`href`of中实际拥有链接`<a></a>`，否则它将是`undefined`.

您可以使用链接添加`id`到`a`，然后使用

```
var menuLink = $('#'+currentUrl); 
```

*   克里斯提供的代码

（这样页面不会因为您单击了链接而重定向，而是会运行该功能）

```
<div class="menuBar">
    <div class="menuHeader ui-corner-top menuHeaderActive">
        <span><a href="#" id="http://www.yourwebsite.url//home/welcome" onclick="Home()">Home</a></span>
    </div>
    <div class="menuHeader ui-corner-top">
        <span><a href="#" id="http://www.yourwebsite.url/EnergyCatagory/index" onclick="NewTransaction()">New Transaction</a></span>
    </div>
</div> 
```

和 JS

```
$(document).ready(function () {
    var currentUrl = window.location.href;
    var menuLink = $('#'+currentUrl);
    menuLink.parent().parent(".menuHeader").addClass('menuHeaderActive');
}); 
```

附带说明一下，如果这是一个不同的页面，您只需将其添加`menuHeaderActive`到活动页面`a`并将其从该特定页面上的另一个页面中删除

# php - 如何从php中的文本文件中替换部分文本

> ID：15764008
> 
> 赞同：1
> 
> 时间：2013-04-02T12:21:48.413
> 
> 标签：php, fopen, fclose

我正在尝试从文本文件中删除/编辑文本的某些部分，例如如果我的文本文件中有 10 行，那么我想编辑第 5 行或删除第 3 行而不影响任何其他行。

目前我在做什么 1\. 打开文本文件并读取 php 变量中的数据 2\. 完成对该变量的编辑 3\. 删除文本文件的内容。4.在上面写新内容

但是有没有办法在不删除整个内容或只编辑这些内容的情况下做这件事？

我当前的代码是这样的

```
$file = fopen("users.txt", "a+");
$data = fread($file, filesize("users.txt"));
fclose($file);
$newdata = str_replace($old, $new, $data);
file_put_contents("users.txt", "");
$file = fopen("users.txt", "a+");
fwrite($file, $newdata);
fclose($file); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T12:27:10.367

您可以将其缩短为：

```
$data = file_get_contents("users.txt");
$newdata = str_replace($old, $new, $data);
file_put_contents("users.txt", $newdata); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T13:44:56.053

```
$str = '';
$lines = file("users.txt");
foreach($lines as $line_no=>$line_txt)
{
$line_no += 1; // Start with zero 
//check the line number and concatenate the string 
if($line_no == 5)
{
// Append the $str with your replaceable text
}
else{
$str .= $line_txt."\n";
}
}
// Then overwrite the $str content to same file
// i.e file_put_contents("users.txt", $str); 
```

我已经根据我的理解添加了解决方案，希望它会有所帮助！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T12:29:53.863

如果您的文本文件中只有 10 行，那么除非它们是非常长的行，否则您正在更改更改内容所需的物理 I/O 量（磁盘一次只能读取/写入一个*物理*扇区的数据- 512 字节扇区的时代已经一去不复返了）。

是的，您可以通过仅写入已更改的扇区来修改大文件 - 但这需要您用相同大小的数据替换数据以防止框架错误（在 PHP 中使用 fopen 和 c+ 模式，fgets/fseek/fwrite/ftell , f 关闭）。

真正正确的答案是停止在文本文件中存储多值数据并使用 DBMS（这也解决了并发问题）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T12:25:41.697

您可以在每一行上工作：

```
$lines = file("users.txt");
foreach($lines as &$line){
  //do your stufff 
  // $line is one line
  //
}
$content = implode("", $lines);
//now you can save $content like before 
```

# mongodb - 如何在 MongoDB 中查询 DBPointer 的值？

> ID：15764010
> 
> 赞同：1
> 
> 时间：2013-04-02T12:21:56.670
> 
> 标签：mongodb, database

我在数据库中有这个条目：

```
{ "_id" : ObjectId("5159c668a8f9718f040025da"), "name" : "foo", "subType" : DBPointer("Type", ObjectId("5159928ca8f9718f04000006")) ] } 
```

子类型引用：

```
{ "_id" : ObjectId("5159928ca8f9718f04000006"), "name" : "Cafe" } 
```

我想对数据库进行查询，以查找子类型名称为“Cafe”的所有记录。我试过这个，但不起作用：

```
db.Entry.find({'subType.name': 'Cafe'}) 
```

我相信它不起作用的原因是因为尚未获取参考，我该怎么做？

# android - android 系统是否接收到从我们的应用程序发送的广播？

> ID：15764023
> 
> 赞同：0
> 
> 时间：2013-04-02T12:22:43.810
> 
> 标签：android, android-intent

我是android新手，需要一些帮助。我想知道，当我们使用`sendBroadcast(Intent intent)`方法时，我们可以在应用程序中通过`onReceive(Context context, Intent intent)`方法接收。我想知道的是，不是我们的应用程序，android系统可以接收到这个广播吗？

android操作系统是否有可能收到从我们的应用程序发送的意图广播？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:31:47.197

这取决于广播意味着系统已经使用的一些广播，例如电话，短信等。对于我们的自定义广播，系统可以处理它我们必须自己处理我们可以处理系统广播但系统无法处理它

# vb.net - 在两个数据表 VB.net 之间复制行

> ID：15764027
> 
> 赞同：3
> 
> 时间：2013-04-02T12:22:52.233
> 
> 标签：vb.net, datatable

我有两个数据表，如何将目标行索引复制到同一索引中的另一个数据表，请检查下面的代码。

```
 Dim datatable1 As DataTable = GetEmployeeSummary()
        Dim datatable2 As DataTable = GetEmployees()
        For i As Integer = 0 To datatable1.Rows.Count - 1 'Datatable1.rows.count = datatable2.rows.count
            Select Case i
                Case 1, 5, 6, 19, 24
                    datatable2.Rows(i) = datatable2.Rows(i) 'how i could copy targeted rows index to another datatable in the same index
            End Select
        Next 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T12:28:42.800

[`DataRow.ItemArray`](http://msdn.microsoft.com/en-us/library/system.data.datarow.itemarray.aspx)如果两个表具有相同的列，您可以使用：

```
For i As Int32 = 0 To datatable1.Rows.Count - 1
    Select Case i
        Case 1, 5, 6, 19, 24
            If datatable2.Rows.Count - 1 >= i Then
                datatable2.Rows(i).ItemArray = datatable1(i).ItemArray
            Else
                Dim row = datatable2.Rows.Add()
                row.ItemArray = datatable1(i).ItemArray
            End If
    End Select
Next 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-05-01T09:53:39.510

我建议使用`ImportRow`. 它会将整行复制到您的 DataTable 中。所以你的代码如下所示。

```
 Dim datatable1 As DataTable = GetEmployeeSummary()
    Dim datatable2 As DataTable = GetEmployees()
    For i As Integer = 0 To datatable1.Rows.Count - 1 

        Select Case i
            Case 1, 5, 6, 19, 24
                datatable2.ImportRow(datatable2.Rows(i)) 
        End Select

    Next 
```

# android - 在android中下载大文件的最佳方法是什么？

> ID：15764034
> 
> 赞同：5
> 
> 时间：2013-04-02T12:23:16.750
> 
> 标签：android

我需要在我的应用程序上下载一个大文件（几乎 2gb），我想知道最好的方法是什么，以及一些可以帮助我的库。首先，我查看了[Android 异步 Http 库](http://loopj.com/android-async-http/)，但没有找到显示如何发布进度或开始、暂停下载的示例。然后我不知道我应该使用这个库还是只使用标准的 http commons。另一个问题是，我应该使用[服务](https://stackoverflow.com/questions/3028306/download-a-file-with-android-and-showing-the-progress-in-a-progressdialog/3028660#3028660)来下载我的文件吗？

各位大神能指点一下，怎么做？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-02T12:38:53.807

我看到你得到了一堆答案，但没有一个是从整体的角度真正回答的。

要下载 2k 或 2gb 文件，实际代码是相同的，使用某种类型的连接处理程序和某种类型的输入流和输出流，并且通常用缓冲输入流包装输入流。为此，您可以在网络上找到无数的 java 示例。

考虑到 Android 平台，这里的技巧是因为它是一个冗长的操作，所以您根本不应该在活动生命周期内执行它。

说你有两个选择：

*   正如您建议的那样，您可以创建一个服务，我建议您使用[IntentService](https://developer.android.com/reference/android/app/IntentService.html) 因为它似乎非常适合这种情况。IntentService 自动跨越一个新线程，通过您将 URL 作为字符串传递的意图并让服务使用流下载等。

*   另一种可能效果很好但我从未亲自使用过的方法是使用自 Gingerbread 以来可用的[DownloadManager](http://developer.android.com/reference/android/app/DownloadManager.html)。`getSystemService(Context.DOWNLOAD_SERVICE)`打电话和打电话应该不难`dwManag.enqueue(dwRequest);`

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T12:31:07.317

如果您不针对前姜饼设备，我会`DownloadManager`按照您链接到的答案中的第三个选项的建议使用。它负责下载文件，在通知栏中显示进度，以便用户即使在您的应用程序进入后台后也可以看到正在发生的事情，而您不必太担心用户离开时会发生什么进入另一个应用程序，android 决定终止您的应用程序以释放内存。此外，它还具有“仅通过 wifi 下载文件”之类的功能，至少某些 android 版本具有这些功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-28T16:47:46.233

我建议你使用 adm 下载管理器。即使没有网络，下载也不会失败，速度也最好。

# python - 与进程共享对象（多进程）

> ID：15764035
> 
> 赞同：3
> 
> 时间：2013-04-02T12:23:19.663
> 
> 标签：python, multiprocessing

我刚开始使用多处理，我正在尝试在主进程和进程之间共享对象。代码示例：

```
import multiprocessing

class User(object):

  def __init__(self, name):
    self.name = name
    self.age = 0

  def getNameAndAge(self):
    return self.name + ' ' + str(self.age)

def define_age(user, age):
  user.age = age

bob = User('bob')

print bob.getNameAndAge()

define_age(bob, 25)

print bob.getNameAndAge()

p = multiprocessing.Process(target=define_age, args=(bob, 35))
p.start()
p.join()

print bob.getNameAndAge() 
```

输出：

```
bob 0
bob 25
bob 25 
```

如何分享鲍勃对象以获得正确的年龄？

# c# - 如何使用 _variant_t 参数（类型“long”）调用 COM 函数？

> ID：15764036
> 
> 赞同：1
> 
> 时间：2013-04-02T12:23:19.457
> 
> 标签：c#, com, interop, com-interop

我想将某个函数调用移植到 C#。这两行如下：

```
 m_pBrowserApp->get_Document(&pVoid);
    m_pLayoutAnalyzer->Analyze4(pVoid, _variant_t(5L)); 
```

`m_pBrowserApp`是 ActiveX 浏览器对象并且`pVoid`是它的文档属性。我可以通过调用得到`WebBrowserBase.ActiveXInstance.Document`。但是，我不知道如何`_variant_t(5L)`在 C# 中创建一个。由于调用不是 VT_BYREF，因此它“应该可以正常工作”，方法是这样调用它：

```
 ILayoutAnalyzer2 vips = new LayoutAnalyzer2();
    vips.Initialize(0);
    SHDocVw.WebBrowser_V1 axBrowser = (SHDocVw.WebBrowser_V1)this.webBrowser1.ActiveXInstance;
    var doc = axBrowser.Document as mshtml.HTMLDocument;

    vips.Analyze4(doc, (Object)5L); // fails with HRESULT: 0x80020005 (DISP_E_TYPEMISMATCH) 
```

但事实并非如此。它失败并出现`DISP_E_TYPEMISMATCH`错误。我很确定 Document 属性是有效的。所以问题仍然存在：如何通过互操作正确传递一个长包装的变体？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T13:02:43.423

变体可以追溯到 1990 年代中期，当时 long 被认为是 long 以拥有 32 位。这只是在第一个 32 位操作系统面世之后的几年，例如，在 VB6 中整数仍然是 16 位。通常在 C# 和 .NET 中并非如此，32 位编程环境的设计从不需要处理 16 位向后兼容。所以使用 C# int，而不是 long。

从文字中删除 L。

# python - Python for 循环？

> ID：15764037
> 
> 赞同：1
> 
> 时间：2013-04-02T12:23:20.320
> 
> 标签：python

我无法理解 Python for 循环。例如，这是我在学习时编写的一些代码：

```
board = []
for i in range (0,5):
    board.append(["O"] * 5) 
```

不要担心代码做了什么，我只是不明白“i”变量是什么意思。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T12:29:09.883

它是一个迭代器，你可以把它看成一个存储每次迭代结果的桶；增加混乱的事情是它在您的脚本中根本没有使用，这是另一个“更多地”使用迭代器的脚本。

```
fruits = ['banana', 'apple', 'strawberry', 'coconut', 'cherry']
for yup in fruits:
  print(yup) 
```

如您所见，您可以根据需要命名它，这是使该单词成为迭代器的语法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-02T12:27:17.210

把它想象成替代品。

`range(0,5)`是`[0,1,2,3,4]`。for 循环遍历列表中的每个元素，命名元素`i`。

```
for i in range(0,5):
    # Starts with 0
    print i # prints 0
    # now goes back, goes through next element in list: 1. 
```

打印 0,1,2,3,4。

在您的示例中， i 是占位符。它仅用于循环某事物 x 次（在这种情况下，五次，因为 range(0,5) 的长度为 5）

另外，在 Codecademy 学习 python 玩得开心（我认识这个任务：p）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-02T12:27:02.693

这是一个未使用的变量。Python 语法需要在那个位置有一个变量，但你不需要对它做任何事情，因为你只是想重复一个动作 5 次。

有些人更喜欢这样命名未使用变量的约定`_`：

```
for _ in range(5) 
```

但是这个名字可以干扰`gettext`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T12:35:47.387

for 循环遍历从每次迭代中`[0, 1, 2, 3, 4]`获得的给定对象列表，您需要一个变量来获取迭代值。`range(0,5)`这就是这里的用途`i`。您可以将其替换为任何变量以获取值。

```
for n in range(0, 5):
    print n    #prints 0, then 1,  then 2, then 3,then 4 in each iteration 
```

另一个例子：

```
for n in ('a', 'b', 'c'):
    print n    #prints a, then b,  then c in each iteration 
```

`i`但是在您给出的代码中，未使用该变量。它正在被使用。只是为了遍历对象列表。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-02T13:27:34.013

在 c/java 中，for 循环将是：

```
for(int i=0;i<=10;i++)
{ 
  //for-loop-body
} 
```

在这里，对于每次迭代，我都会增加 +1 值，直到我达到 10，之后它就会退出循环。同样，在 python 中，for 循环看起来像：

```
for i in range(0,10):
  //for-loop-body 
```

这里 i 执行相同的操作， i 只是增加值的变量。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-02T12:26:41.830

简而言之，`i`指的是列表中的当前元素。

您的列表定义为：0、1、2、3、4 和 5。因此`i`将迭代此列表并将自己分配给下一项，`i`为 0，下一次迭代`i`将为 1，下一次迭代`i`将为 2 ，依此类推。

**直接来自 python.org：**

Python 中的 for 语句与您在 C 或 Pascal 中可能使用的语句有些不同。Python 的 for 语句迭代任何序列的项目（列表或一个字符串），按照它们在序列中出现的顺序。例如（没有双关语）

```
words = ['cat', 'window', 'defenestrate']
for w in words:
 print w, len(w) 
```

结果是：

*   猫 3
*   窗口 6
*   开窗 12

[http://docs.python.org/2/tutorial/controlflow.html](http://docs.python.org/2/tutorial/controlflow.html)

# android - 使用 listview 将 MySQL 查询发送到远程数据库

> ID：15764043
> 
> 赞同：-2
> 
> 时间：2013-04-02T12:23:49.723
> 
> 标签：android, mysql, database, listview

我有一项`ListView`运动，当我按下它时，我希望它向`MySQL`我的远程数据库发送一个查询，然后发回有关该运动的其余数据，例如：

```
SELECT * FROM SportsTable WHERE name="????" 
```

所以我想`'????'`用我在列表视图中按下的选项替换

我该怎么做呢？

谢谢，扎克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:28:34.657

我建议您在尝试随机事物之前阅读一些教程。

您可以注册 OnItemClickListener，它将为您提供按下的位置。从那里，您可以使用该位置从您的原始收藏中获取该项目。任何 ListView 教程都会向您展示这一点。

其次，我希望您不要尝试直接连接到某个远程数据库或向某个仅将任何输入作为查询的 Web 服务发送总查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T12:32:26.530

> 所以我想要一种方法来替换'????' 使用我在列表视图中按下的选项
> 
> 我该怎么做呢？

因此，您很可能正在寻找参数化语句（我建议使用它们）。只需您创建这样的语句：

```
select * from Sports where name = ? 
```

**`?`**被称为占位符，它将被 ListView 中的值替换。可能您正在使用`PHP`，因此您将使用`bindParam()`函数来查询绑定参数。看看[PDO](http://docs.php.net/pdo.prepared-statements)

为了能够处理点击`ListView`，您需要使用[OnItemClickListener](http://developer.android.com/reference/android/widget/AdapterView.OnItemClickListener.html)并且在 onItemClick 方法中，您可以从您的收藏中获取点击位置的项目。

# php - 使用 PHP 来自 Base64 的 FTP 图像

> ID：15764044
> 
> 赞同：1
> 
> 时间：2013-04-02T12:23:53.057
> 
> 标签：php, ftp, base64

我有一个图像（在 Base64 中），我需要使用 PHP 将其通过 FTP 传输到远程服务器。我怎样才能做到这一点？

这是我最近的尝试...

```
// Image
$handle = fopen('data://image/jpeg;base64,'.$base64, 'r');

// Setup and login
$creds = array(
    'server' => '*****',
    'user' => '*****',
    'pass' => '*****'
);
$conn = ftp_connect($creds['server']);
$loginResult = ftp_login($conn, $creds['user'], $creds['pass']); 

// Upload 
ftp_fput($conn, '/path/to/file.jpg', $handle, FTP_ASCII);

// Cleanup
ftp_close($conn);
fclose($handle); 
```

谁能看到我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T18:04:35.177

二进制文件应以二进制模式传输...

```
ftp_fput($conn, '/path/to/file.jpg', $handle, FTP_BINARY); 
```

# r - levelplot 不显示内容

> ID：15764046
> 
> 赞同：1
> 
> 时间：2013-04-02T12:23:54.603
> 
> 标签：r, levelplot

我是函数级别图的新手。我有 x,y,z 我想通过以下方式可视化水平图：

```
> require(lattice)

> head(z)
     [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9]
[1,]  4.5  4.7  4.6  4.6  4.6  4.6  4.6  4.6  4.7
[2,]  4.5  4.6  4.6  4.6  4.6  4.6  4.6  4.6  4.7
[3,]  4.5  4.7  4.6  4.6  4.6  4.6  4.7  4.6  4.7
[4,]  4.5  4.6  4.6  4.6  4.6  4.6  4.6  4.6  4.7
[5,]  4.6  4.6  4.6  4.6  4.6  4.6  4.6  4.6  4.7
[6,]  4.5  4.7  4.6  4.6  4.6  4.6  4.6  4.6  4.7

> head(y)
     [,1]
[1,]    1
[2,]    2
[3,]    3
[4,]    5
[5,]    7
[6,]   10

> head(x)
[1] "2013-01-03 04:30:00 GMT" "2013-01-03 04:45:00 GMT" "2013-01-03 05:00:00 GMT"
[4] "2013-01-03 05:15:00 GMT" "2013-01-03 05:30:00 GMT" "2013-01-03 05:45:00 GMT" 
```

z 代表水温和 y 水深

我想通过以下方式绘制数据：

```
> levelplot(z~x*y) 
```

轴和图例被正确绘制，但根本没有绘制内容。谁能帮我？？

最好的问候，菲利普

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T12:56:52.773

虽然我不知道为什么您尝试的方法不起作用，但似乎使用`levelplot.array`而不是`levelplot.formula`正常工作（`aspect="fill"`指定）：

```
x <- as.POSIXct(x) #make sure x are POSIXct and not just characters
levelplot(z, row.values=x, column.values=y, aspect="fill") 
```

![在此处输入图像描述](https://i.stack.imgur.com/fObtZ.png)

# java - 执行 JNLP 文件会引发 AccessControlException

> ID：15764048
> 
> 赞同：0
> 
> 时间：2013-04-02T12:24:00.760
> 
> 标签：java, security, jnlp, securitymanager

我正在尝试执行[这个](http://jfxtras.org/resources/java/Ensemble.jnlp)jnlp 应用程序。但是，我不断收到此安全异常：

```
java.lang.ExceptionInInitializerError
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:399)
    at java.lang.Class.newInstance0(Class.java:370)
    at java.lang.Class.newInstance(Class.java:322)
    at com.sun.javafx.applet.FXApplet2.init(FXApplet2.java:63)
    at com.sun.deploy.uitoolkit.impl.fx.FXApplet2Adapter.init(FXApplet2Adapter.java:207)
    at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.security.AccessControlException: access denied ("java.util.PropertyPermission" "java.net.useSystemProxies" "write")
    at java.security.AccessControlContext.checkPermission(AccessControlContext.java:364)
    at java.security.AccessController.checkPermission(AccessController.java:560)
    at java.lang.SecurityManager.checkPermission(SecurityManager.java:549)
    at java.lang.System.setProperty(System.java:783)
    at ensemble.Ensemble2.<clinit>(Ensemble2.java:77)
    ... 10 more 
```

我尝试更改 Java 控制面板（OSX 10.8.3）中的安全设置，但它们似乎被禁用并且我无法修改它们（我确实可以检查“在浏览器中启用 Java 内容”选项，但它在我点击应用）。如下图所示：

![Java 控制面板中的安全选项卡](https://i.stack.imgur.com/mCM51.png)

是否有另一种机制可以绕过 Java 安全管理器并能够执行 jnlp 应用程序？

**更新：**

重新安装 Java 后，我终于能够更改 Java 控制面板中的安全选项（我没有做任何特别的事情，只是从头开始重新安装）。不幸的是，当我执行[jnlp 应用程序](http://jfxtras.org/resources/java/Ensemble.jnlp)时，它会默默地死掉而没有显示任何错误。这个问题可能与我使用的是 jdk 1.8（因为 jnlp 应用程序需要 javafx）并且它只是一个预览版本（并且 OSX 这些天似乎不太喜欢 Java...），它是我最好的猜测，但我不能完全确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-15T09:28:37.847

可能的原因：

1.  我听说 Mac 上的 Java 7 仍然不稳定。
2.  默认情况下，JNLP 文件在“沙箱”中运行，以防止恶意代码对您的系统造成严重破坏。此沙箱限制对本地文件系统和本地网络的访问。我想系统属性也受到限制，看起来应用程序正在尝试写入它们。要允许不受限制的访问，您需要对 JAR 文件进行签名并使用以下命令配置 JNLP 文件`<security><all-permissions/></security>`

# ios - 如何在 iOS 中从解析器 xml 显示 RSS 日期和作者姓名

> ID：15764049
> 
> 赞同：0
> 
> 时间：2013-04-02T12:24:02.823
> 
> 标签：ios, xml, rss

我有一个 iOS 应用程序，可以从我的 Wordpress 网站读取 RSS 提要。该应用程序显示帖子标题并缓存缩略图。我还想在我的 iOS 应用程序的 RSS 提要表中显示日期和作者姓名。我该怎么做？

以下是应用程序缓存帖子标题的方式：

```
postTitle = [[UILabel alloc]init];
postTitle.numberOfLines = 3;
postTitle.backgroundColor = [UIColor clearColor];
postTitle.textColor = [UIColor blackColor];
postTitle.font = [UIFont fontWithName:@"Helvetica-Bold" size:15];
postTitle.frame = CGRectMake(30, 20, 200, 65 );

cell.layer.borderColor = [[UIColor blackColor]CGColor];
cell.layer.borderWidth = 2.0f;

postTitle.text = [[self.parseResults objectAtIndex:indexPath.row]objectForKey:@"title"];
[cell.contentView addSubview:postTitle];` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:38:50.717

您必须实现自定义子类并`UITableViewCell`包含两个附加属性。`rssDate``authorName`

如果您已经在使用`UITableViewCell`自定义子类，请考虑添加这两个属性（也许，作为 a `UILabel`）

**编辑**

获取`RSSDate`并`AuthorName`查看他们的标签，`XML`并以与解析提要相同的方式进行解析`Title`。没有人可以告诉您，如何在不查看您的 XML 结构的情况下解析这两者。

# javascript - Xcode 中的 GetTransform().R.col2.Copy

> ID：15764054
> 
> 赞同：0
> 
> 时间：2013-04-02T12:24:26.240
> 
> 标签：javascript, xcode, cocoa, box2d

嗨，我正在通过下面的链接在 Xcode 中制作游戏，该链接是用 JS 制作的

[http://www.codekites.com/make-racing-car-box2d-javascript/](http://www.codekites.com/make-racing-car-box2d-javascript/)

现在我被 GetTransform().R.col2.Copy （undate_car 函数中的第 332 行）转换卡住了，它得到了 Car 的方向。

现在，当我在 Xcode 中看到时，它给了我 GetTransform() 但没有“R”。只有 p（b2Vec2 类型）和 q（b2Rot 类型）。

请帮助我，如何从 Body 获取更新的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T11:01:23.973

从一个博客获得帮助。 [http://www.cocos2d-iphone.org/forum/topic/20628](http://www.cocos2d-iphone.org/forum/topic/20628)

要点如下：

*   b2Mat22 更改为 b2Rot
*   b2PolygonShape->SetAsEdge() 被移除；而是使用 b2EdgeShape->Set()
*   b2World(gravity) 而不是 b2World(gravity, doSleep); doSleep 默认为真；可以使用 SetAllowSleeping 进行更改
*   b2LineJoint 和 b2LineJointDef 被移除；不知道你可以用什么代替，请如果有人知道..？
*   b2Transform 有一点改变：代替 .position 使用 .p，和类似的

*   **.R -> .q**，**.R.col1 -> .q.GetXAxis()**和**.R.col2 变成 .q.GetYAxis()**

# wpf - 在 WPF XPath 表达式中过滤

> ID：15764059
> 
> 赞同：3
> 
> 时间：2013-04-02T12:24:52.513
> 
> 标签：wpf, xml, data-binding, xpath, .net-4.5

我有一个`ComboBox`列出如下所示的联系方式。显示`ComboBox`正确的值，因此`ItemSource`绑定正在工作。

我要存档的是在应用程序启动时显示所选的联系方式。我试图将选定的值绑定到`ComboBox.Text`属性，但我不知道如何设置过滤器。

这是我的输入数据：

```
<Contact ShowsInterest="true">
  <Name>Tester</Name>
  <Lastname>Test</Lastname>
  <ContactMethods>
    <ContactMethod Selected="False">Phone</ContactMethod>
    <ContactMethod Selected="False">Email</ContactMethod>
    <ContactMethod Selected="True">Letter</ContactMethod>
    <ContactMethod Selected="False">Mobile</ContactMethod>
  </ContactMethods>
</Contact> 
```

这是我的`ComboBox`：

```
<ComboBox Name="combobox1" 
          ItemsSource="{Binding XPath=Contact/ContactMethods//*}" 
          Width="100" Height="25">
    <ComboBox.Text>
        <Binding XPath="Contact/ContactMethods//*[@Selected='true']"/>
    </ComboBox.Text>
</ComboBox> 
```

XPath 表达式应该执行以下操作： 在 Contact/ContactMethods/ 下显示元素，其中 selected 等于 true。

**编辑：** 即使直接设置文本属性也不起作用。

```
<ComboBox Name="combobox1" 
          ItemsSource="{Binding XPath=Contact/ContactMethods//*}" 
          Width="100" Height="25">
    <ComboBox.Text>
        Phone
    </ComboBox.Text>
</ComboBox> 
```

我想我必须使用该`SelectedValue`属性：

```
<ComboBox Name="combobox1" 
          ItemsSource="{Binding XPath=Contact/ContactMethods//*}" 
          Width="100" Height="25">
    <ComboBox.SelectedValue>
        Phone
    </ComboBox.SelectedValue>
</ComboBox> 
```

**EDIT2：** 这是可行的解决方案，感谢 MikroDel

```
<ComboBox Name="combobox1" 
            ItemsSource="{Binding XPath=Contact/ContactMethods//*}" 
            Width="100" Height="25">
    <ComboBox.SelectedValue>
        <Binding XPath="Contact/ContactMethods/ContactMethod[@Selected='True']"/>
    </ComboBox.SelectedValue>
</ComboBox> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T12:35:06.823

这是正确的：

```
 <Binding XPath="Contact/ContactMethods/ContactMethod[@Selected='True']"/> 
```

# jquery - load() 中的问题；点击

> ID：15764060
> 
> 赞同：0
> 
> 时间：2013-04-02T12:24:52.663
> 
> 标签：jquery, menu

这篇文章与我的另外两篇文章有关。我认为最后一个可以解决我的问题，但它并没有因为它实际上发现了另一个问题（我的错首先没有提到它）。

我的问题是这段代码：

```
// Loading content upon click
$('#aEmpresa').click(function(e) {
    $('#mainContent').load('http://dl.dropbox.com/u/14193826/aEmpresaContent.html #aEmpresaContent');
    return false;
});
$('#aNossaArte').click(function(e) {
    $('#mainContent').load('http://dl.dropbox.com/u/14193826/aNossaArteContent.html #aNossaArteContent');
    return false;
});
$('#contactos').click(function(e) {
    $('#mainContent').load('http://dl.dropbox.com/u/14193826/contactosContent.html #contactosContent');
    return false;
}); 
```

......只是，它有问题。如果您评论整个“// 单击时加载内容”部分，您会看到菜单运行良好。我需要帮助来纠正这个问题。

[小提琴](http://jsfiddle.net/d4jYb/)

佩德罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:31:05.297

正如 Mohammad Adil 所说，这是由于客户端脚本中的跨域策略。

但是，您可以使用 php 执行此操作

```
echo file_get_contents("http://dl.dropbox.com/u/14193826/aEmpresaContent.html"); 
```

使用 PHP，您可以将每个页面放入一个单独的 div 中，然后使用 jQuery 显示或隐藏包含适当内容的 div。

# java - JDBC 驱动程序加载错误

> ID：15764062
> 
> 赞同：-1
> 
> 时间：2013-04-02T12:24:59.930
> 
> 标签：java, oracle, jdbc

下面是我的 JDBC Oracle Connectivity 的简单程序。请查看并告诉我为什么我可能会收到驱动程序未加载的错误。我已经放入`odbc14.jar`图书馆。

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

package databaseconnect;

/**
 *
 * @author compaq
 */
import java.sql.*;

public class Education1 {

    public static void main(String[] args) {

        try{
            Class.forName("oracle:jdbc:driver:OracleDriver");
        }catch( Exception e ) {
      System.out.println("Failed to load Oracle driver.");
        }
try{
            Connection con=DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:xe","system","system");
            Statement stmt=con.createStatement();
            stmt.executeUpdate("insert into Education(name,rollno) VALUES ('alankrit',1000)");
            System.out.println("Data inserted");
            con.close();

    }   catch(Exception e){
    //     System.out.println(e);
    }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:26:35.710

您需要如下传递类名，将 : 替换为 .

```
 Class.forName("oracle.jdbc.driver.OracleDriver"); 
```

具有字符串格式的完整包名称的驱动程序实现类。

这样反射api可以在运行时加载这个类

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T12:34:19.097

代替

```
Class.forName("oracle:jdbc:driver:OracleDriver"); 
```

利用

```
Class.forName("oracle.jdbc.OracleDriver"); 
```

并确保您`odbc14.jar`的类路径中有文件。

# ms-access-2007 - 具有关系值的 Microsoft Access 2007 列表列

> ID：15764064
> 
> 赞同：0
> 
> 时间：2013-04-02T12:25:08.730
> 
> 标签：ms-access-2007, listcontrol

我是新手，我无法理解如何创建具有 2 个表之间关系的列表列。

我有一张名为 Persons 的桌子和另一张名为 Interviews 的桌子。我在 Persons 的 ID 和 Interviews ParentId 之间创建了关系。当我创建一个列表列（或控件）时，会出现所有记录。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T02:07:34.510

在关系数据库中，它将为所有具有关系的记录提供每个实例。创建新查询或表单时，请尝试 Select.Distinct

# matlab - MATLAB，双阈值

> ID：15764069
> 
> 赞同：0
> 
> 时间：2013-04-02T12:25:28.733
> 
> 标签：matlab, signal-processing, telecommunication

谁能帮我创建一个函数来对接收到的信号应用两个阈值。然后将这些阈值与接收功率进行比较。阈值是 w1 和 w2，其中 w2>w1。我希望这个函数给我三个答案之一。0、1 或 X。0 表示低于 w1 的信号功率，1 表示高于 w2 的信号功率，X 表示信号介于 w2 和 w1 之间。

如果有任何帮助，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T12:30:25.453

```
function outSignal = ApplyThreshold(inSignal, w1, w2)
    inSignal(inSignal > w2) = w2;
    inSignal(inSignal < w1) = w1;
    outSignal = inSignal;
end 
```

示例用法：

```
t = 1:0.1:10;
y = sin(t);
plot(t,y);
hold on
plot(t, ApplyThreshold(y, -0.5, 0.5), 'r-'); 
```

![在此处输入图像描述](https://i.stack.imgur.com/5yj8N.png)

# android - LoginWithFacebook 从 android 应用程序

> ID：15764071
> 
> 赞同：3
> 
> 时间：2013-04-02T12:25:37.070
> 
> 标签：android, facebook, hash, facebook-login

我是一名安卓开发者。我开发了我的第一个 helloWorld 应用程序，但在创建 facebook 会话时遇到了一些问题。

我遵循了许多教程......例如：[http ://www.kpbird.com/2013/03/android-login-using-facebook-sdk-30.html](http://www.kpbird.com/2013/03/android-login-using-facebook-sdk-30.html)

我在我的活动中添加了一个 LoginButton 并创建了一个会话处理程序。处理程序被调用，但会话永远不会打开。为什么？

步骤 1\. 点击按钮 {Session state:OPENING, token:{AccessToken token:ACCESS_TOKEN_REMOVED permissions:[]}, appId:15xxxxxxxxxxxxx}

步骤 2\. 用户接受条件... {Session state:CLOSED_LOGIN_FAILED, token:{AccessToken token:ACCESS_TOKEN_REMOVED permissions:[]}, appId:15xxxxxxxxxxxxx}

我生成哈希码并将其插入到我在 Native Android App (Key Hashes) 中注册的应用程序中。

当我生成哈希时，我设置了一个随机密码，可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T13:34:53.747

您是否已在 AndroidManifest.xml 中插入了您的 facebook 应用程序的 app-id？您可以查看本教程获取芽数据（在您的情况下，特别注意第 6 步）：

[https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/)

祝你好运！！

# jquery - 在网页上使用 Jquery 显示 JSON 对象元素

> ID：15764076
> 
> 赞同：0
> 
> 时间：2013-04-02T12:26:03.663
> 
> 标签：jquery, json

我是 Jquery 和 web 应用程序开发的新手，我有一个 JSON 文件定义为下面的对象，我想读取它并在网页上将其元素显示为 HTML 元素对于下面的 JSON 文件，我希望输出如下：

```
 A-1
            AA-0
            AB-0
            AAA-0
            AAB-2
            ABA-0
            ABB-1 
```

稍后我计划在单击事件上显示当前组件下的组件及其状态

我写了下面的代码

```
 <!DOCTYPE html>
            <html>
            <head>

                <script src="jquery-1.9.1.js"></script>
            </head>
            <body>
              <div id="result">

            </div>
            <script>
            var obj = {
                        "component": "A",
                        "status": 0,
                        "children": [
                            {
                                "component": "AA",
                                "status": 0,
                                "children": [
                                    {
                                        "component": "AAA",
                                        "status": 0,
                                        "children": []
                                    },
                                    {
                                        "component": "AAB",
                                        "status": 2,
                                        "children": []
                                    }
                                ]
                            },
                            {
                                "component": "AB",
                                "status": 0,
                                "children": [
                                    {
                                        "component": "ABA",
                                        "status": 0,
                                        "children": []
                                    },
                                    {
                                        "component": "ABB",
                                        "status": 1,
                                        "children": []
                                    }
                                ]

                            }
                        ]
            };
            //Start function
            $(function() {
                var result = $('#result');
                alert("hello");
                procedure(obj);
            });

            //Function to display the list of children of a given object
            function display(dref){

                result.append('<div>' +  dref.component + ' - '+ dref.status +'</div>');    
                $.each(dref.children, function(i, v){
                result.append('<div>' +  v.component + ' - '+ v.status +'</div>');
            });
            };

            //Recursive function to repeatedly check for children of every component
            function procedure(pref){
                display(pref);
                if(pref.children not null)
                {
                    $.each(pref.children, function(i, v){
                    procedure(children)

                    }    
            }   
            };
            </script> 
            </body>
            </html> 
```

有些地方有语法错误，谁能帮我得到所需的输出

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:46:55.540

尝试

```
$(function(){
    var $result = $('#result');
    function process(obj, flag){
        if(!flag){
            $('<li/>').text(obj.component + '-'+obj.status).appendTo($result);
        }

        if(obj.children){
            $.each(obj.children, function(i, v){
                $('<li/>').text(this.component + '-'+this.status).appendTo($result);
            });
            $.each(obj.children, function(i, v){
                process(this, true);
            });
        }
    }

    process(obj);

}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/TuvLw/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T12:51:38.577

您是否正在寻找这个：

```
var result_temp = "";
    function procedure(pref) {
        result_temp = result_temp + pref.component + "-" + pref.status+"<br/>";
        if (pref.children != null) {
            $.each(pref.children, function (i, v) {
                //alert(JSON.stringify(v));
                procedure(v);

            });
        }
    }

    $(document).ready(function () {
        procedure(obj); 
     $("#answer").html(result_temp);
    }); 
```

这里“#answer”是你的结果 div。

# c++ - 在运行时动态创建 C++ 函数参数列表

> ID：15764078
> 
> 赞同：6
> 
> 时间：2013-04-02T12:26:13.870
> 
> 标签：c++, function, function-pointers

我试图在运行时为函数调用生成一个参数列表，但我想不出在 C++ 中实现这一点的方法。

这是我正在写的一个帮助库。我通过网络从客户端获取输入数据，并使用该数据调用用户之前设置的函数指针。该函数接受一个字符串（令牌，类似于 printf）和不同数量的参数。我需要的是一种根据从客户端收到的数据添加更多参数的方法。

我将函数存储在函数指针映射中

```
typedef void (*varying_args_fp)(string,...);
map<string,varying_args_fp> func_map; 
```

一个示例用法是

```
void printall(string tokens, ...)
{
    va_list a_list;
    va_start(a_list, tokens);

    for each(auto x in tokens)
    {
        if (x == 'i')
        {
            cout << "Int: " << va_arg(a_list, int) << ' ';
        }
        else if(x == 'c')
        {
            cout << "Char: " << va_arg(a_list, char) << ' ';
        }
    }

    va_end(a_list);
}

func_map["printall"] = printall;
func_map["printall"]("iic",5,10,'x');
// prints "Int: 5 Int: 10 Char: x" 
```

这在对函数调用及其参数进行硬编码时效果很好，但如果我收到数据“CreateX 10 20”，程序需要能够自己调用参数。例如

```
// func_name = "CreateX", tokens = 'ii', first_arg = 10, second_arg = 20
func_map[func_name](tokens,first_arg,second_arg); 
```

我无法预测用户将如何布置功能并预先编写代码。

如果有人对以另一种方式完成此任务有任何建议，请随时提出建议。我需要用户能够将函数“绑定”到库，并且库在从联网客户端接收数据后稍后调用它，本质上是回调。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T18:23:14.240

这是一个 C++11 解决方案。它不**支持**`printall`像or之类的可变参数函数`printf`，使用这种技术是不可能的，IMO 根本不可能，或者至少非常棘手。无论如何，这样的功能很难在像您这样的环境中安全使用，因为来自任何客户端的任何错误请求都可能使服务器崩溃，并且绝对没有任何追索权。您可能应该转向基于容器的界面以获得更好的安全性和稳定性。

另一方面，此方法统一支持所有（？）其他功能。

```
#include <vector>
#include <iostream>
#include <functional>
#include <stdexcept>
#include <string>
#include <boost/any.hpp>

template <typename Ret, typename... Args>
Ret callfunc (std::function<Ret(Args...)> func, std::vector<boost::any> anyargs);

template <typename Ret>
Ret callfunc (std::function<Ret()> func, std::vector<boost::any> anyargs)
{
    if (anyargs.size() > 0)
        throw std::runtime_error("oops, argument list too long");
    return func();
}

template <typename Ret, typename Arg0, typename... Args>
Ret callfunc (std::function<Ret(Arg0, Args...)> func, std::vector<boost::any> anyargs)
{
    if (anyargs.size() == 0)
        throw std::runtime_error("oops, argument list too short");
    Arg0 arg0 = boost::any_cast<Arg0>(anyargs[0]);
    anyargs.erase(anyargs.begin());
    std::function<Ret(Args... args)> lambda =
        ([=](Args... args) -> Ret {
         return func(arg0, args...);
    });
    return callfunc (lambda, anyargs);
}

template <typename Ret, typename... Args>
std::function<boost::any(std::vector<boost::any>)> adaptfunc (Ret (*func)(Args...)) {
    std::function<Ret(Args...)> stdfunc = func;
    std::function<boost::any(std::vector<boost::any>)> result =
        ([=](std::vector<boost::any> anyargs) -> boost::any {
         return boost::any(callfunc(stdfunc, anyargs));
         });
    return result;
} 
```

基本上你调用`adaptfunc(your_function)`, where`your_function`是任何类型的函数（可变参数除外）。作为回报，您将获得一个`std::function`接受 的向量`boost::any`并返回 的对象`boost::any`。你把这个对象放在你的 中`func_map`，或者对它们做任何你想做的事情。

在实际调用时检查参数的类型及其数量。

`void`开箱即用不支持返回函数，因为`boost::any<void>`不支持。这可以通过将返回类型包装在一个简单的模板中并专门针对`void`. 为了清楚起见，我把它省略了。

这是一个测试驱动程序：

```
int func1 (int a)
{
    std::cout << "func1(" << a << ") = ";
    return 33;
}

int func2 (double a, std::string b)
{
    std::cout << "func2(" << a << ",\"" << b << "\") = ";
    return 7;
}

int func3 (std::string a, double b)
{
    std::cout << "func3(" << a << ",\"" << b << "\") = ";
    return 7;
}

int func4 (int a, int b)
{
    std::cout << "func4(" << a << "," << b << ") = ";
    return a+b;
}

int main ()
{
    std::vector<std::function<boost::any(std::vector<boost::any>)>> fcs = {
        adaptfunc(func1), adaptfunc(func2), adaptfunc(func3), adaptfunc(func4) };

    std::vector<std::vector<boost::any>> args =
    {{777}, {66.6, std::string("yeah right")}, {std::string("whatever"), 0.123}, {3, 2}};

    // correct calls will succeed
    for (int i = 0; i < fcs.size(); ++i)
        std::cout << boost::any_cast<int>(fcs[i](args[i])) << std::endl;

    // incorrect calls will throw
    for (int i = 0; i < fcs.size(); ++i)
        try {
            std::cout << boost::any_cast<int>(fcs[i](args[fcs.size()-1-i])) << std::endl;
        } catch (std::exception& e) {
            std::cout << "Could not call, got exception: " << e.what() << std::endl;
        }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T14:09:37.763

正如@TonyTheLion 已经提到的，您可以在运行时使用`boost::variant`或`boost::any`在类型之间进行选择：

```
typedef std::function<void(const std::string&, const std::vector<boost::variant<char, int>>&)> varying_args_fn;
std::map<std::string, varying_args_fn> func_map; 
```

例如，您可以使用静态访问者来区分类型。这是一个完整的示例，请注意该`tokens`参数实际上不再需要，因为`boost::variant`在运行时知道其中存储了什么类型：

```
#include <map>
#include <vector>
#include <string>
#include <functional>
#include <iostream>

#include <boost/variant.hpp>
#include <boost/any.hpp>

typedef std::function<void(const std::string&, const std::vector<boost::variant<char, int>>&)> varying_args_fn;

void printall(const std::string& tokens, const std::vector<boost::variant<char, int>>& args) {
  for (const auto& x : args) {
    struct : boost::static_visitor<> {
      void operator()(int i) {
        std::cout << "Int: " << i << ' ';
      }
      void operator()(char c) {
        std::cout << "Char: " << c << ' ';
      }
    } visitor;
    boost::apply_visitor(visitor, x);
  }
}

int main() {
  std::map<std::string, varying_args_fn> func_map;
  func_map["printall"] = printall;
  func_map["printall"]("iic", {5, 10, 'x'});
} 
```

# php - ADT Eclipse 未安装软件

> ID：15764079
> 
> 赞同：-1
> 
> 时间：2013-04-02T12:26:23.273
> 
> 标签：php, eclipse, web, adt

我下载了[ADT Bundle](http://developer.android.com/sdk/index.html#download)，它本质上是一个带有 ADT 的 Eclipse 版本，并且已经预先安装了更多。

我这样做是因为我有一台新的开发机器，我的大部分开发都是 Android 应用程序和 Android 平台。

我也有几个网站要维护，所以我尝试安装 PHP 开发工具和 Web 开发工具。虽然软件安装程序似乎检测到它们已安装，但菜单系统却没有。

已安装版本：

![ADT 版本](https://i.stack.imgur.com/dpObq.png) ![已安装的软件](https://i.stack.imgur.com/YySSt.png)

![尝试打开 PHP 或 Web 编辑器](https://i.stack.imgur.com/xu3sn.png)

如您所见，eclipse似乎识别出安装了PHP和Web编辑器，但是当我打开编辑器时，它们不在列表中..

有人知道为什么会这样吗？（是的，我已经尝试重新启动 eclipse，正如安装指定的那样！）

这是 ADT 的 Linux (Ubuntu 12.04) 64 位版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:28:10.723

**解决方案**

*注意：需要有在 Eclipse 中安装软件的经验。*

1.  再次下载[SDK Bundle](http://developer.android.com/sdk/index.html#download)（仅当您已将其删除！）
2.  提取到另一个位置（EG `~/Development/adt-bundle-linux-x86_64NEW`）
3.  打开终端并将当前 SDK 复制到新的 adt-bundle (EG `cp ~/Development/adt-bundle-linux-x86_64OLD/SDK ~/Development/adt-bundle-linux-x86_64NEW/.`)
4.  启动新下载的版本。（例如`. ~/Development/adt-bundle-linux-x86_64NEW/eclipse/eclipse`）
5.  检查并安装任何更新。（“帮助 > 检查更新”）
6.  仅安装`PHP Development Tools`（首先）。( `Help > Install New Software...`)
7.  安装`Web Page Webpage Editor`. ( `Help > Install new software...`)
8.  可选 - 删除旧包 (EG `rm -r ~/Development/adt-bundle-linux-x86_64OLD`)

这以某种方式解决了曾经存在的问题。我怀疑我设法下载了一些依赖于未安装更新的软件包。我确实在某处读到（丢失了链接），这以前是在 Eclipse 中安装某些软件的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T21:00:53.360

虽然理论上您可以根据需要在 Eclipse 中安装尽可能多的插件，但实际上您应该**为不同的应用程序“集群”进行不同的安装**。因此，Java/Android 混合安装很好，HTML/XML/PHP 混合安装很好，从长远来看，将所有这些（以及更多）结合起来会导致麻烦。

这是因为随着插件数量的增加，插件具有冲突依赖关系的可能性增加。如果开发人员指定了一些更宽松的依赖版本，它们通常*可以*在一个安装中完美地生活在一起。但是插件开发人员通常会为依赖项指定一个非常短的版本范围（他们自己使用的那些），这使得使用不同版本的其他人更难。

# jquery - jquery：使用（“父>子”）与变量

> ID：15764082
> 
> 赞同：17
> 
> 时间：2013-04-02T12:26:37.413
> 
> 标签：jquery

例如，我有一个`<div class="first">`包含其他`<div>`的并选择了第一个并将他推入变量

```
variable = $('div.first') 
```

现在我想要这样的东西

```
$(variable + " > div") 
```

我知道，这似乎很愚蠢，但是如果我有一个包含表行的数组并且我需要访问特定行中的列怎么办：

```
var tableRows = $('table > tbody > tr');
var tableBodyCols = $(tableRows[i]+'> td'); // Doesn't work :( 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-02T12:27:33.220

采用[`.children()`](http://api.jquery.com/children/)

```
var tableBodyCols = tableRows.children('td'); 
```

或上下文选择器：

```
var tableBodyCols = $('> td', tableRows); 
```

两者都是等价的，但前者更容易阅读恕我直言。

这是一个展示两者的[**小提琴。**](http://jsfiddle.net/punkw/)

* * *

并遍历[`each`](http://api.jquery.com/each/)表行的所有子集：

```
tableRows.each(function() {
    var tableBodyCols = $(this).children('td');
    //...
}); 
```

但是，如果您真的更喜欢`for`循环或者您需要获取特定行的列，那么[`eq`](http://api.jquery.com/eq/)就是您的朋友。

```
for (var i = 0; i < tableRows.length; i++) {
    var tableBodyCols = tableRows.eq(i).children('td');
    //...
} 
```

这是更新的[**小提琴**](http://jsfiddle.net/punkw/1/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T12:29:41.780

你不能这样做`$(variable + " > div")`，因为`variable`不是字符串而是 jquery 元素。

但你可以尝试：

```
variable.children("div"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T12:28:37.920

要获取索引行的单元格`i`，您可以使用

```
 var tableBodyCols = $('td', tableRows[i]); 
```

如果您真的可能有多个级别`td`，请使用

```
 var tableBodyCols = tableRows.eq(i).children('td'); 
```

或使用本机 dom 对象：

```
 var tableBodyCols = tableRows[i].cells; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T12:29:18.867

如果您想要*所有* `<td>`单元格，请使用：

```
var tableBodyCols = tableRows.children('td'); 
```

如果您只想要*特定*行的那些`i`：

```
var tableBodyCols = tableRows.eq(i).children('td'); 
```

第一行`i`从零开始。

# sql - 使用第三个表的条件 SQL 连接

> ID：15764086
> 
> 赞同：-1
> 
> 时间：2013-04-02T12:26:49.217
> 
> 标签：sql, sql-server, tsql

我一直在为 MSSQL 中的客户开发的资产数据库存在问题。它需要捕获`Required Actions`，例如`Lifting Equipment`在特定位置需要在购买后 6 个月进行检查。可以通过不同的`Due Dates`方式计算这些所需的操作，但为了简化，这里将根据它们计算`Purchase Date`。

因此，为此我有一个名为的表`tblActionsRequired`，其中包含以下相关字段：

*   `ActionID` - 对于所需的操作
*   `EquipmentCategoryID`or `EquipmentTypeID`or `EquipmentID`- 所以这些字段中的任何一个都是必需的。有了这个，他们指定一个设备类别或设备类型或特定设备需要一个操作。例如，2kg 粉末消火栓是一种设备类型，它属于消防安全设备类别，并且可能有一个特定的 2kg 粉末消火栓，其资产编号为 PFH2KG001。
*   `BasedAtID`- 公司的分支机构或站点

理想情况下，我想做的是尽可能多地保留在一个查询中，而不是为每个组合创建单独的查询或视图，然后使用 UNION 将它们添加在一起。我还有其他几个类似的字段，可以通过这些字段对这些必需的操作进行分段，因此在这里使用联合似乎很简单，但我计算出我需要满足 48 种不同的组合，并可能为每个组合创建一个视图，然后将它们联合起来一起！

所以接下来我有`tblEquipment`包含以下相关键：

*   `EquipmentID`- 主键
*   `EquipmentTypeID`= 外键，该资产属于哪个设备类型
*   `BasedAtID`- 外键，资产位于哪个站点

然后`Equipment Types`属于`Equipment Categories`和类别然后允许构建具有父子关系的树结构，但是我认为我在创建一个`vwCategoryTree`使用以下字段调用的视图时已经充分注意了这些：

*   `ParentCategoryID`
*   `EquipmentTypeID`

这个视图已经过测试并且可以很好地检查出来，它穿过树结构并允许您`EquipmentTypeID`在`EquipmentCategoryID`.

我需要帮助的是如何根据 EquipmentCategoryID、EquipmentTypeID 或 EquipmentID 中的哪个字段具有值来在 tblActionsRequired 和 tblEquipment 之间进行某种条件连接。如果只能指定 EquipmentID 或 EquipmentTypeID，那么我认为这会起作用：

```
ON (tblActionsRequired.EquipmentID IS NOT NULL AND tblEquipment.EquipmentID = tblActionsRequired.EquipmentID) OR (tblActionsRequired.EquipmentTypeID IS NOT NULL AND tblActionsRequired.EquipmentTypeID = tblEquipment.EquipmentTypeID) 
```

但是如何将第三个表带入此连接以适应 EquipmentCategoryID 或至少避免使用 UNION？

对不起，如果有什么不明白的，请尽管问！非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T11:59:59.377

一种可能的方法：

```
select ...
from tblEquipment e
left join vwCategoryTree c on e.EquipmentTypeID = c.EquipmentTypeID
join tblActionsRequired r 
  on (e.EquipmentID = r.EquipmentID or 
      e.EquipmentTypeID = r.EquipmentTypeID or 
      c.ParentCategoryID = r.EquipmentCategoryID) 
```

# internet-explorer - IE8输入类型密码浏览器显示密码而不是显示*

> ID：15764087
> 
> 赞同：2
> 
> 时间：2013-04-02T12:26:51.877
> 
> 标签：internet-explorer, twitter-bootstrap

这要死我了……

这是html代码：

```
<div id="div_id_password1" class="control-group">
    <label for="id_password1" class="control-label requiredField">password<span class="asteriskField">*</span></label>
    <div class="controls">
        <input autocomplete="off" id="id_password1" type="password" class="input-xlarge textinput textInput" name="password1" /> 
    </div>
</div> 
```

我正在使用 twitter-bootstrap。

# sql - 在多个查询中使用结果集

> ID：15764091
> 
> 赞同：3
> 
> 时间：2013-04-02T12:27:02.513
> 
> 标签：sql, sql-server

我想创建一个相当大的基础的小备份（这样开发人员可以下载 ~1-2gb 而不是 15gb）。

为了做到这一点，我复制了基础并运行了一些截断某些表（日志等）的脚本，并且我想删除除某些用户（总是相同的用户）之外的数据。

现在我有这个：

```
-- delete order details not in test accounts
DELETE FROM order_details WHERE Album_ID NOT IN (
    SELECT Album_ID FROM albums WHERE User_ID IN (
        SELECT User_ID FROM users
            WHERE Email_ID LIKE '%@xxx.com'
            OR Email_ID LIKE '%@yyy.com'
            OR Email_ID LIKE '%@zzz.com'
    )
)
DELETE FROM orders WHERE User_ID NOT IN (
    SELECT User_ID FROM users
        WHERE Email_ID LIKE '%@xxx.com'
        OR Email_ID LIKE '%@yyy.com'
        OR Email_ID LIKE '%@zzz.com'
)

-- delete albums not in test accounts
DELETE FROM albums WHERE User_ID NOT IN (
    SELECT User_ID FROM users
        WHERE Email_ID LIKE '%@xxx.com'
        OR Email_ID LIKE '%@yyy.com'
        OR Email_ID LIKE '%@zzz.com'
)
-- snip a few more of the same 
```

如您所见，我总是`SELECT User_ID FROM users WHERE Email_ID LIKE '%@xxx.com' OR Email_ID LIKE '%@yyy.com' OR...`在很多地方使用相同的子查询。

你将如何做到这一点，这样你就不必重复自己？

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T12:32:31.947

尝试将值插入临时变量并在所有 where 条件下使用相同的值。

```
DECLARE @table as TABLE(User_ID  Nvarchar(50))

INSERT INTO @table (User_ID)
SELECT User_ID FROM users
        WHERE Email_ID LIKE '%@xxx.com'
        OR Email_ID LIKE '%@yyy.com'
        OR Email_ID LIKE '%@zzz.com' 
```

* * *

```
DELETE FROM order_details WHERE Album_ID NOT IN (
    SELECT Album_ID FROM albums WHERE User_ID IN (
        SELECT User_ID FROM @table)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T12:36:36.407

使用临时表

```
IF OBJECT_ID('tempdb.dbo.#tmpUserID') IS NOT NULL DROP TABLE dbo.#tmpUserID
SELECT User_ID 
INTO dbo.#tmpUserID
FROM users
WHERE Email_ID LIKE '%@xxx.com'
  OR Email_ID LIKE '%@yyy.com'
  OR Email_ID LIKE '%@zzz.com'

-- delete order details not in test accounts
DELETE FROM order_details 
WHERE Album_ID NOT IN (
                       SELECT Album_ID 
                       FROM albums 
                       WHERE User_ID IN (
                                         SELECT User_ID FROM #tmpUserID
                                         )
                       )      
DELETE FROM orders 
WHERE User_ID NOT IN (
                      SELECT User_ID FROM #tmpUserID
                      )

-- delete albums not in test accounts
DELETE FROM albums 
WHERE User_ID NOT IN (
                      SELECT User_ID FROM #tmpUserID
                      ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T12:31:12.250

将结果存储在临时表中

```
 -- create temporary table to keep track of users
   CREATE TABLE #users
   (
      user_id BIGINT
   ) 
```

加载临时表

```
INSERT INTO #users (user_id)
SELECT User_ID FROM users
        WHERE Email_ID LIKE '%@xxx.com'
        OR Email_ID LIKE '%@yyy.com'
        OR Email_ID LIKE '%@zzz.com' 
```

然后，您可以在其他查​​询中使用临时表。

```
-- delete order details not in test accounts
DELETE FROM order_details WHERE Album_ID NOT IN (
    SELECT Album_ID FROM albums WHERE User_ID IN (
        SELECT User_ID FROM #users
    )
)
DELETE FROM orders WHERE User_ID NOT IN (
    SELECT User_ID FROM #users
)

-- delete albums not in test accounts
DELETE FROM albums WHERE User_ID NOT IN (
    SELECT User_ID FROM #users
) 
```

这种技术允许您遵循[DRY 原则](http://en.wikipedia.org/wiki/DRY_principle)，因为您只需在一个地方定义查询。如果您需要更改业务逻辑，您只需更改一个查询，而不是原始代码中的 3 个查询。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T12:31:13.643

这个问题问得好。不幸的是，SQL 不提供编写 SQL 查询的良好功能。

我能想到的最好的是视图或表值函数。您可以在脚本的开头创建它并在结尾删除它。

这有点丑陋，在这种情况下它似乎仍然比动态构建 SQL 字符串更好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T12:32:06.183

创建表变量或临时表并存储 Select 查询数据

```
 Declare @User table
 (User_Id int)

 Insert into @User
  SELECT User_ID FROM users
        WHERE Email_ID LIKE '%@xxx.com'
        OR Email_ID LIKE '%@yyy.com'
        OR Email_ID LIKE '%@zzz.com' 

DELETE FROM order_details WHERE Album_ID NOT IN (
SELECT Album_ID FROM albums WHERE User_ID IN (
   Select User_Id from @User)
) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-02T12:41:47.980

如果您在表上设置了外键，则可以将它们设置为级联删除。如果操作正确，您只需从 users 表中删除，该表将级联到您的所有其他表。

有大量关于级联删除的文档，所以我不会在这里重复，但它当然值得一看。

# elasticsearch - 弹性搜索 TTL 不起作用

> ID：15764093
> 
> 赞同：0
> 
> 时间：2013-04-02T12:27:03.713
> 
> 标签：elasticsearch, ttl

我对日志使用弹性搜索，我不想使用每日索引通过 cron 作业但使用 TTL 删除它们。我已经激活并设置了 TTL 值：30s。发送此操作时，我得到了成功的答案，并且在执行映射请求时可以看到 TTL 值（以毫秒为单位）。一切似乎都很好，但文件没有被删除......

_映射：

```
{
    "logs" : {
        "webservers" : {
            "_ttl" : {
                "default" : 30000
            },
            "properties" : {
                @timestamp" : {         
                    "type" : "date",
                    "format" : "dateOptionalTime" 
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:25:58.617

我猜你只需要为你的类型启用 _ttl ，默认情况下是禁用的。看看[这里](http://www.elasticsearch.org/guide/reference/mapping/ttl-field/)。

```
{
    "webservers" : {
        "_ttl" : { "enabled" : true, "default" : "30s" }
    }
} 
```

# matlab - 如何拆分矩阵中的元素

> ID：15764096
> 
> 赞同：1
> 
> 时间：2013-04-02T12:27:09.413
> 
> 标签：matlab

我有一个矩阵 A

```
 1     1     0     0
 0     1     0     0
 1     0     0     1
 0     0     1     0
 0     0     0     0
 0     1     1     1
 1     1     0     0
 1     0     0     0
 0     0     0     1 
```

如果 d=[1 2 3]，

```
for i=2:length(d)
  d(i) = d(i) + d(i-1); %d=[1 3 6]
end 
```

然后使用，

```
d = [0, ceil((d./d(end))*length(x))]; %d=[2 5 9]
disp('The resultant split up is:')
for i=2:length(d)
  disp(x((d(i-1)+1):d(i)));
end 
```

输出必须是，拆分是：第一次拆分->

```
 1     1     0     0    %first 2 rows in matrix A
          0     1     0     0 
```

第二次拆分->

```
 1     0     0     1    %next 3 rows
          0     0     1     0
          0     0     0     0 
```

第三次拆分->

```
 0     1     1     1    %next 4 rows
          1     1     0     0
          1     0     0     0
          0     0     0     1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:20:29.347

如果我正确理解了您的问题，那么[`mat2cell`](http://www.mathworks.com/help/matlab/ref/mat2cell.html)您需要的是：这是一个简短的示例：

```
%// Bits and hops array
bits = '10001100';
hops = [3 2 3];

A = mat2cell(bits(:)', 1, hops) 
```

结果是一个字符串元胞数组：

```
A = 
    '100'    '01'    '100' 
```

这种方法也适用于数字数组（*例如* `bits = [1 0 0 0 1 1 0 0]`）。

# bash - 最年轻文件的尾部

> ID：15764102
> 
> 赞同：0
> 
> 时间：2013-04-02T12:27:34.980
> 
> 标签：bash, tail

如何`tail -n 1 -q`在比此目录中旧的文件上运行`Apr 1`？

```
-rw-r--r-- 1 mzhsteno kemi 1,6M Mar 31 15:09 1-3-uco-opt-Q7W-Q127W-pm6-1.0-15-008.out
-rw-r--r-- 1 mzhsteno kemi 1,4M Mar 31 15:10 1-3-uco-opt-Q7W-Q127W-pm6-1.0-15-010.out
-rw-r--r-- 1 mzhsteno kemi 1,4M Mar 31 15:10 1-3-uco-opt-Q7W-Q127W-pm6-1.0-15-011.out
-rw-r--r-- 1 mzhsteno kemi 1,6M Apr  1 09:50 1-3-uco-opt-Q127W-pm6-1.0-15-002.out
-rw-r--r-- 1 mzhsteno kemi 1,6M Apr  2 03:12 1-3-uco-opt-Q7W-Q127W-pm6-1.0-15-009.out
-rw-r--r-- 1 mzhsteno kemi 465K Apr  2 14:23 1-3-uco-opt-Q127W-pm6-1.0-15-000.out
-rw-r--r-- 1 mzhsteno kemi 470K Apr  2 14:24 1-3-uco-opt-Q127W-pm6-1.0-15-003.out
-rw-r--r-- 1 mzhsteno kemi 468K Apr  2 14:24 1-3-uco-opt-Q127W-pm6-1.0-15-006.out
-rw-r--r-- 1 mzhsteno kemi 465K Apr  2 14:24 1-3-uco-opt-Q7W-Q127W-pm6-1.0-15-005.out
-rw-r--r-- 1 mzhsteno kemi 466K Apr  2 14:24 1-3-uco-opt-Q127W-pm6-1.0-15-005.out
-rw-r--r-- 1 mzhsteno kemi 468K Apr  2 14:24 1-3-uco-opt-Q7W-Q127W-pm6-1.0-15-001.out 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:30:37.157

您可以使用`find`然后 exec a `tail`：

```
find /your/dir -mtime +2 -exec tail -n 1 -q {} \; 
```

或者

```
find /your/dir ! -newermt "20130331 2359:00" -exec tail -n 1 -q {} \; 
```

# ios - Xcode中的线程调试

> ID：15764108
> 
> 赞同：3
> 
> 时间：2013-04-02T12:28:06.080
> 
> 标签：ios, xcode, debugging

我是 xcode 和 iphone iOS 开发的初学者，在调试 xcode 时它显示 Thread1、Thread2、Thread3、Thread4 这些线程是什么意思？以及它在调试中的用途可以解释一下吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T12:39:52.173

为了调试您自己的应用程序，您实际上只需要担心 Thread1，或者至少在您开始编写并发代码之前（请参阅[并发编程指南](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/Introduction/Introduction.html)）。

线程基本上是代码执行的特定路径。Thread1 是“主线程”，您的应用程序在其中执行基本操作、所有用户界面代码等。当您开始进行更复杂的编程时，您可能会使用并发，将耗时的操作发送到后台线程/队列，以免对主线程上发生的用户体验产生不利影响。

但是，您问题中的线程 2、3、4 等是系统生成的线程，而不是您通常需要关注的线程。只担心主线程，以及当您开始编写并发代码时，您明确添加操作的那些线程。

# java - 使用 GQL 删除谷歌应用引擎中一周前的数据库

> ID：15764111
> 
> 赞同：0
> 
> 时间：2013-04-02T12:28:12.023
> 
> 标签：java, google-app-engine, gql

想知道 GQL 是否可以让我使用 gql 删除一周或更早的数据，一直在寻找解决此问题的方法，但这似乎很麻烦。

我在谷歌应用引擎中有一个数据库，表名 Tracker，由 id 和 int 组成，表的索引，current，一个 int，事件的 DateTime 和位置，一个字符串。

我现在需要做的是，删除一周及以上的数据，与我在数据库中的最新日期进行比较。如果可能的话，有点像 sql 的 dateadd 函数。

但似乎 GQL 在这方面有局限性，有没有人有任何解决方案？:)

**非常感谢您的帮助:)**

# jquery - {^{if}} 可能的 jsviews 错误

> ID：15764115
> 
> 赞同：0
> 
> 时间：2013-04-02T12:28:15.853
> 
> 标签：jquery, jsrender, jsviews

在下面的示例中，如果我添加了几个客人，然后删除了**第一个**客人，整个客人表就会消失并且永远不会重新出现，即使 Guest[] 不为空。这里的 {^{if}} 或我的代码有问题吗？（我正在使用提交 34）

```
<div id="frm-reg"></div>

<script id='jsr-registration' type='text/x-jsrender'>

    <p><button id="btn-addGuest">Add Guest</button></p>

    {^{if Guests.length}}
        <table>
            <tr>
                <th>First Name</th> 
                <th>Last Name</th>
                <th>Age</th>
                <th></th>
            </tr>
            {^{for Guests}}
                <tr>
                    <td><input data-link="FirstName" type="text" /></td>
                    <td><input data-link="LastName" type="text" /></td>
                    <td><input data-link="Age" type="text" /></td>
                    <td><button class="btn-remove">Remove</button></td>
                </tr>
            {{/for}}
        </table>
    {{/if}}
</script>

<script>
    var model={"CampID":3,"FirstName":"a","LastName":"b","Guests":[]};

    $.templates({regTmpl: "#jsr-registration"});
    $.link.regTmpl("#frm-reg", model)
        .on("click", ".btn-remove", function() 
        {
            $.observable(model.Guests).remove( $.view(this).index, 1 );
            return false;
        });

    $("#btn-addGuest").click(function()
    {
        $.observable(model.Guests).insert(model.Guests.length, {FirstName:"", LastName:"", Age:""});
        return false;
    });
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T23:20:26.927

`<tbody>`这是标记中没有标签的结果。

当您`<table>`在 JsRender 模板中使用标签时，与 JsViews 数据绑定一起使用时，您需要记住始终包含`<tbody>`标签。浏览器无论如何都会插入一个，然后 JsViews 解析将得到不正确的元素深度信息。

为此，我将在 JsViews 解析器中添加一条警告错误消息。

# c# - C# windows 服务问题

> ID：15764117
> 
> 赞同：1
> 
> 时间：2013-04-02T12:28:18.750
> 
> 标签：c#, service

我编写了一个 C# 应用程序，它每 5 分钟截取一次屏幕截图并将其保存到服务器。它是计时器、2 个线程、几个方法（ping srv、检查文件夹、截屏等）。

作为进程（exe）它运行良好，但我需要将它安装为服务。我正在通过 installutil （框架服务安装程序）安装它。

我的问题是，当它作为服务安装时，它不会截图。停止服务时拉出一些。不是正确的分辨率和黑色。

我假设执行代码放错了位置（见 main）。我不知道把它放在哪里，因为我不能有多个主要方法。请帮忙。

主要应用代码：

```
I've deleted some not important code. 

    using System;
    using System.Threading;
    using System.Collections.Generic;
    using System.Linq;
    using System.ServiceProcess;
    using System.Text;
    using System.Drawing;
    using System.Drawing.Imaging;
    using System.Windows.Forms;
    //using System.Timers;
    using System.IO;
    using System.Net;
    using System.Net.Sockets;
    using System.Net.NetworkInformation;
    using System.ComponentModel;
    using System.Configuration.Install;

    namespace LogWriterService
    {
        static class Program
        {
            public static int TimeO = 5;  // zpoždění časovače v minutách
            private static bool Online;
            private static bool active = false;

            public static String GetIP()
            {
                // ...  
                // returns IP like xxx.xxx.xxx.xxx
                // ...   
            }

            // Test dostupnosti serveru
            public static bool PingTest()
            {
                // ... 
                // return true if server is reachable
                // ... 
            }

            /*
             * Z Windows.Forms _ screenů získá obrazová data, která uloží na
             * server jako ../[IP]/[současný_systémový_čas].jpg
             */
            public static void  ScreenShot()        //Bitmap
            {
                Int64 CurrTime = Int64.Parse(DateTime.Now.ToString("yyyyMMddhhmmss")); //yyyyMMddhhmmss

                Rectangle bounds = Rectangle.Empty;

                foreach (Screen s in Screen.AllScreens)
                    bounds = Rectangle.Union(bounds, s.Bounds);

                Bitmap screenShotBMP = new Bitmap(bounds.Width, bounds.Height, PixelFormat.Format32bppArgb);   // PixelFormat.Format32bppArgb

                Graphics screenShotGraphics = Graphics.FromImage(screenShotBMP);

                screenShotGraphics.CopyFromScreen(bounds.X, bounds.Y,
                    0, 0, bounds.Size, CopyPixelOperation.SourceCopy);

                string path = null;  //"D:/TEMP/" + CurrTime + ".jpg";  // GetIP()

                // Ukládání obrázků do dočasné složky a přesun, pokud se připojí
                if (PingTest() == true)
                {
                    path = "//10.0.0.10/Upload/screen/test/" + GetIP() + "/" + CurrTime + ".jpg";
                    string path2 = "//10.0.0.10/Upload/screen/test/" + GetIP() + "/";
                    Online = true;
                    if (Directory.Exists(path2))
                    {
                        MoveCached();
                    }
                    else
                    {
                        Console.WriteLine("Online slozka neni dostupna.");
                    }
                } else {
                    Console.WriteLine("Caching .. ");
                    path = "C:/TEMP/" + CurrTime + ".jpg";  // "C:/TEMP/" + GetIP() + "/" + CurrTime + ".jpg"

                    string LPath = @"c:\TEMP";
                    if (!Directory.Exists(LPath))
                    {
                        DirectoryInfo di = Directory.CreateDirectory(LPath);
                        di.Attributes = FileAttributes.Directory | FileAttributes.Hidden;

                        Console.WriteLine("Lokalni slozka neexistuje. Vytvarim ..");
                    }
                    Online = false;
                }

                screenShotBMP.Save(path, ImageFormat.Jpeg); // C:\\test\\test.jpg        
                screenShotGraphics.Dispose();
                screenShotBMP.Dispose();

                return; //screenShotBMP;
            }

            /*
             * Přesune cache soubory (za dobu offline) na server
             */
            public static void MoveCached()
            {
                // ... 
                // after conect, move localy saved screenshots to server
                // ... 
            }

            /// <summary>
            /// The main entry point for the application.
            /// </summary>
            static void Main()
            {
                ServiceBase[] ServicesToRun;
                ServicesToRun = new ServiceBase[] 
                { 
                    new Service1() 
                };
                ServiceBase.Run(ServicesToRun);

                // Vytvoří událost signalizující hranici odpočtu ve  
                // zpětném volání časovače
                AutoResetEvent autoEvent = new AutoResetEvent(false);

                // Počet průchodů timeru
                StatusChecker statusChecker = new StatusChecker(Timeout.Infinite); //  1440

                // Vytvoří odvozeného delegáta, který vyvolá metody pro časovač
                TimerCallback tcb = statusChecker.CheckStatus;

                // Create a timer that signals the delegate to invoke 
                // CheckStatus after one second, and every 1/4 second 
                // thereafter.
                System.Threading.Timer stateTimer = new System.Threading.Timer(tcb, autoEvent, 1000, TimeO * 1000); // TimeO * 1000 * 60 * 12 * 5, 250

                // When autoEvent signals, change the period to every
                // 1/2 second.
                autoEvent.WaitOne(15000, false);
                stateTimer.Change(0, TimeO * 1000 * 60);        // TimeO * 1000 * 60
                Console.WriteLine("menim poprve..");

                // When autoEvent signals the second time, dispose of 
                // the timer.
                autoEvent.WaitOne(Timeout.Infinite, false);
                stateTimer.Change(0, TimeO * 1000 * 60);        // TimeO * 1000 * 60
                Console.WriteLine("menim podruhe..");
                //stateTimer.Dispose();

                // Garbage collector
                GC.Collect();
                GC.WaitForPendingFinalizers();

            }
        }
        }

        class StatusChecker
        {
        private int invokeCount;
        private int maxCount;
        Int64 CurrTime = Int64.Parse(DateTime.Now.ToString("hh"));  //  screeny od 6:00 do 16:00

        public StatusChecker(int count)
        {
            invokeCount = 0;
            maxCount = count;
        }

        // Tato metoda je volána delegátem časovače
        public void CheckStatus(Object stateInfo)
        {
            AutoResetEvent autoEvent = (AutoResetEvent)stateInfo;

            //if ((CurrTime > 6) & (CurrTime < 16))  // 16
            //{
                LogWriterService.Program.ScreenShot();
                Console.WriteLine("ScreenShot ..");
            //}
            Console.WriteLine("{0} Kontroluji stav {1,2}.",
                DateTime.Now.ToString("h:mm:ss.fff"),
                (++invokeCount).ToString());

            if (invokeCount == maxCount)
            {
                // Resetuje čítač a signál Main.
                invokeCount = 0;
                autoEvent.Set();
            }

            // Garbage collector
            GC.Collect();
            Console.WriteLine("Paměť uvolněna .. \n");
        }
    } 
```

服务代码：

```
 using System;
    using System.Collections.Generic;
    using System.ComponentModel;
    using System.Data;
    using System.Diagnostics;
    using System.Linq;
    using System.ServiceProcess;
    using System.Text;

    namespace LogWriterService
    {
        public partial class Service1 : ServiceBase
        {
            public Service1()
            {
                InitializeComponent();
            }

            protected override void OnStart(string[] args)
            {
                EventLog.WriteEntry("Sluzba screenshot se spustila.");
            }

            protected override void OnStop()
            {
                EventLog.WriteEntry("Sluzba screenshot se zastavila.");
            }

        }
    } 
```

我觉得问题可能出在这里：

```
 public static void CreateProcessAsUser()
    {
        IntPtr hToken = WindowsIdentity.GetCurrent().Token;
        IntPtr hDupedToken = IntPtr.Zero;

        ProcessUtility.PROCESS_INFORMATION pi = new ProcessUtility.PROCESS_INFORMATION();

        try
        {
            ProcessUtility.SECURITY_ATTRIBUTES sa = new ProcessUtility.SECURITY_ATTRIBUTES(); 
            sa.Length = Marshal.SizeOf(sa);

            bool result = ProcessUtility.DuplicateTokenEx(
                  hToken,
                  ProcessUtility.GENERIC_ALL_ACCESS,
                  ref sa,
                  (int)ProcessUtility.SECURITY_IMPERSONATION_LEVEL.SecurityIdentification,
                  (int)ProcessUtility.TOKEN_TYPE.TokenPrimary,
                  ref hDupedToken
               );

            if (!result)
            {
                throw new ApplicationException("DuplicateTokenEx failed");
            }

            ProcessUtility.STARTUPINFO si = new ProcessUtility.STARTUPINFO();
            si.cb = Marshal.SizeOf(si);
            si.lpDesktop = String.Empty;

            string folder = "D:\\test"; //Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData);
            string path = folder + "\\LogWriter\\LogWriter.exe";  // "C:/TEMP/" + GetIP() + "/" + CurrTime + ".jpg"

             result = ProcessUtility.CreateProcessAsUser(
                                 hDupedToken,
                                 @path,        //   C:\Users\ToXiC\AppData\Roaming\LogWriter\LogWriter.exe
                                 String.Empty,
                                 ref sa, ref sa,
                                 false, 0, IntPtr.Zero,
                                 @"D:\\test", ref si, ref pi
                           );

            if (!result)
            {
                int error = Marshal.GetLastWin32Error();
                string message = String.Format("CreateProcessAsUser Error: {0}", error);
                throw new ApplicationException(message);
            }
        }
        finally
        {
            if (pi.hProcess != IntPtr.Zero)
                ProcessUtility.CloseHandle(pi.hProcess);
            if (pi.hThread != IntPtr.Zero)
                ProcessUtility.CloseHandle(pi.hThread);
            if (hDupedToken != IntPtr.Zero)
                ProcessUtility.CloseHandle(hDupedToken);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T12:44:31.533

我认为截图都是黑色的。发生这种情况是因为 Windows 服务在[Session 0 Isolation中运行](http://msdn.microsoft.com/en-us/library/bb756986.aspx)

一种解决方案是每 5 分钟后从服务中启动一个控制台应用程序（隐藏 UI）。控制台应用程序可以截取屏幕截图并退出。

从 Windows 服务启动控制台应用程序的一些代码：

```
 string applicationPath = ...;
   private ProcessStartInfo psi = new System.Diagnostics.ProcessStartInfo(applicationPath);
   //set working directiory
   Directory.SetCurrentDirectory(Path.GetDirectoryName(applicationPath));
   psi.WorkingDirectory = Path.GetDirectoryName(applicationPath);
   //psi.CreateNoWindow = false;
   psi.WindowStyle = System.Diagnostics.ProcessWindowStyle.Hidden;
   //psi.UseShellExecute = false;
   prcs = System.Diagnostics.Process.Start(psi); 
```

**编辑**：控制台应用程序将在会话 0 中启动。解决方法是使用 WIN API [CreateProcessAsUser](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682429%28v=vs.85%29.aspx) pinvoke 调用并在用户会话中启动控制台应用程序。

有关如何实现此目的的代码示例的一些链接：http:
[//odetocode.com/blogs/scott/archive/2004/10/28/createprocessasuser.aspx](http://odetocode.com/blogs/scott/archive/2004/10/28/createprocessasuser.aspx)

[http://blogs.msdn.com/b/alejacma/archive/2007/12/20/how-to-call-createprocesswithlogonw-createprocessasuser-in-net.aspx](http://blogs.msdn.com/b/alejacma/archive/2007/12/20/how-to-call-createprocesswithlogonw-createprocessasuser-in-net.aspx)

[http://social.msdn.microsoft.com/Forums/en-US/windowssecurity/thread/31bfa13d-982b-4b1a-bff3-2761ade5214f/](http://social.msdn.microsoft.com/Forums/en-US/windowssecurity/thread/31bfa13d-982b-4b1a-bff3-2761ade5214f/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-14T09:06:19.230

问题出在令牌上。我在这里找到了可行的解决方案 [how-can-windows-service-execute-gui](http://abramovi.blogspot.co.il/2012/12/how-can-windows-service-execute-gui.html)

感谢大家帮助我摆脱困境。我现在更了解 Windows 服务的工作原理。

# cocos2d-iphone - 如何让敌人精灵在 cocos2d 中随机生成

> ID：15764119
> 
> 赞同：-1
> 
> 时间：2013-04-02T12:28:21.537
> 
> 标签：cocos2d-iphone, xcode4.5, box2d-iphone, ccsprite

我一直在网上寻找如何在 rondom 随机生成 Enemy Sprites 的方法，我正在制作一款涉及精灵跳跃的游戏，它必须躲避这些“敌人”精灵或阻挡其路径的物体。

如果有人对如何做到这一点有任何想法，你能帮帮我吗？提前致谢！

*   阿尔菲

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:36:19.980

你使用objective-c的随机数函数来创建一个随机位置......

```
sprite.position = ccp( arc4random_uniform( 800 ), arc4random_uniform( 600 ) ); 
```

# android - 在android中设置单选AlertDialog默认项

> ID：15764123
> 
> 赞同：5
> 
> 时间：2013-04-02T12:28:28.410
> 
> 标签：android, android-alertdialog

我正在使用以下代码创建一个 AlertDialog

```
 CharSequence[] array = {"Font1", "Font2", "Font3", "Font4"};
    callback = (DialogClickListener) fragment;

    builder = new AlertDialog.Builder(context); 
    builder.setTitle("Font Settings")
            .setSingleChoiceItems(array, 0, new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface arg0, int arg1) {
                    // TODO Auto-generated method stub
                    selected = array[arg1].toString();
                }
            })
           .setNegativeButton(android.R.string.cancel, new DialogInterface.OnClickListener() {
              public void onClick(DialogInterface dialog, int id) {
              }
          })
          .setPositiveButton(android.R.string.ok, new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int which) {
                callback.onYesClick(selected);
            }
        }); 
```

如何设置默认选择的元素？请帮忙 ：）

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-02T12:40:47.070

只需更改`setSingleChoiceItems`方法的第二个参数，如下所示..将其更改为 0,1,2,3

```
.setSingleChoiceItems(array, 2,
                        new DialogInterface.OnClickListener() {

                            @Override
                            public void onClick(DialogInterface arg0, int arg1) {
                                // TODO Auto-generated method stub
                                selected = array[arg1].toString();
                            }
                        }) 
```

根据上面的代码，您的第二个项目默认被选中。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-02T12:35:37.200

你打电话时

```
builder.setTitle("Font Settings")
            .setSingleChoiceItems(array, 0, new DialogInterface.OnClickListener(){... 
```

第二个参数应指定默认检查的项目，如[Android 文档](http://developer.android.com/reference/android/app/AlertDialog.Builder.html#setSingleChoiceItems%28java.lang.CharSequence%5B%5D,%20int,%20android.content.DialogInterface.OnClickListener%29)所指定

# actionscript-3 - 加载新模块时如何删除 Flex IFrame？

> ID：15764126
> 
> 赞同：-1
> 
> 时间：2013-04-02T12:28:32.953
> 
> 标签：actionscript-3, apache-flex, flex4, flex4.5

我有一个应用程序（容器），当单击应用程序中的菜单项时，使用模块加载器加载模块。在其中一个模块中，我有一个 iframe，当用户单击该模块中的树项时，它会动态创建和添加。

问题是，当单击菜单加载另一个模块时，iframe 本身并没有从父应用程序中删除，而是（错误地）显示在新模块上。

我的问题是**如何在加载新模块之前从当前加载的模块中删除该 iframe**？

PS：Flex 4 SDK

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:32:45.973

例如，考虑这是我创建的 IFrame 实例，它位于边框容器内。

```
<s:BorderContainer id="mybordercontainer" right="0"  top="0"  left="5" bottom="0" width="100%" height="100%">
    <flexiframe:IFrame id="googleIFrame"
                               label="Google"
                               source="http://www.google.com"
                               width="80%"
                               height="80%"/>
</s:BorderContainer> 
```

由于某种原因，以下代码不起作用。

```
(mybordercontainer.getElementAt(0) as IFrame).removeIFrame(); 
```

相反，我使用运行良好的 IFrame 实例直接调用了 removeIFrame() 方法。

```
googleIFrame.removeIFrame(); 
```

# asp.net-mvc-4 - 如何使用单个视图实现多个表单？

> ID：15764128
> 
> 赞同：0
> 
> 时间：2013-04-02T12:28:35.077
> 
> 标签：asp.net-mvc-4, razor-2

我有一个场景，我需要使用一个视图来实现两个表单......将有一个主页，每个主页都有一个用于登录和注册的表单（类似于 Facebook 主页）。我为我的主页 (Index.cshtml) 创建了一个视图，其中包含`razor`我的两个表单的代码。

[ `@using (Html.BeginForm("LogIn", "Home", FormMethod.Post))`]

[ `@using (Html.BeginForm("SignUp", "Home", FormMethod.Post))`]

但是，在单击登录表单的“登录”按钮或单击注册表单的“注册”按钮时，运行时会抛出一个错误，基本上说我仍然需要为登录和注册操作创建视图，即使我已经在我的 index.cshtml 中实现了 HTML 表单

[注意：我没有使用 ASP.NET 成员资格提供程序。而本题一般为两种形式，可以是任意两种形式。]

所以我的问题是：我真的需要再创建两个名为 LogIn.cshtml 和 SignUp.cshtml 的视图吗？这不会导致代码重复吗？我对 MVC 4 很陌生，我希望你明白我在这里想要做什么，所以我只想知道是否有其他方法可以实现这一点？（jQuery，AJAX 什么的）

```
public class HomeController : Controller
{
    [HttpGet]
    public ActionResult Index()
    {
        return View();
    }

    [HttpGet]
    public ActionResult LogIn()
    {       
        return View();
    }

    [HttpPost]
    public ActionResult LogIn(Account acc)
    {                  
        // some code
        return View();
    } 

    [HttpGet]
    public ActionResult SignUp()
    {       
        return View();
    }

    [HttpPost]
    public ActionResult SignUp(Account acc)
    {                  
        // some code
        return View();
    }       

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:33:48.427

您可以指定要返回的视图：

```
[HttpGet]
public ActionResult SignUp()
{       
    return View("LogIn");
} 
```

# image - 在 Wordpress 中为图像添加标签

> ID：15764129
> 
> 赞同：1
> 
> 时间：2013-04-02T12:28:37.357
> 
> 标签：image, wordpress, tags

如何像在 Wordpress 中为帖子添加标签一样添加对图像添加标签的支持？

我知道我可以通过安装诸如 Shiba 媒体库插件之类的插件来做到这一点，但这比我需要的要多得多。我只需要能够添加标签，没有更多。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-02-21T17:27:49.940

请参阅本教程[http://code.tutsplus.com/articles/applying-categories-tags-and-custom-taxonomies-to-media-attachments--wp-32319](http://code.tutsplus.com/articles/applying-categories-tags-and-custom-taxonomies-to-media-attachments--wp-32319)很好地解释了这一切。

要使用与您的帖子相同的标签，您只需将这些行添加到您的 functions.php 文件中：

```
 function wptp_add_tags_to_attachments() {
        register_taxonomy_for_object_type( 'post_tag', 'attachment' );
    }
    add_action( 'init' , 'wptp_add_tags_to_attachments' ); 
```

添加这些后，标签框将开始显示在您的媒体库项目上。

本文还描述了如何创建自定义分类（一组单独的标签/类别），但这可能不是您所追求的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:09:22.157

我找到了一个简单的解决方案。

1.  下载 Shiba Media Library 插件： [http ://shibashake.com/wordpress-theme/media-library-plus-plugin](http://shibashake.com/wordpress-theme/media-library-plus-plugin)

2.  安装它。

3.  在以下位置下载管理菜单编辑器插件： [http ://wordpress.org/extend/plugins/admin-menu-editor/](http://wordpress.org/extend/plugins/admin-menu-editor/)

4.  安装它。

5.  使用 Admin Menu Editor，隐藏图库菜单项（由 Shiba 插件添加）。

现在我可以通过普通的媒体库来标记图像了 :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T12:32:11.057

您可以使用此插件添加媒体标签：

[http://wordpress.org/extend/plugins/wordpress-media-tags/](http://wordpress.org/extend/plugins/wordpress-media-tags/)

或者你可以挖掘这个解决方案：

[https://wordpress.stackexchange.com/questions/29858/adding-category-tag-taxonomy-support-to-images-media](https://wordpress.stackexchange.com/questions/29858/adding-category-tag-taxonomy-support-to-images-media)

# sql - SQL 在创建数据库时授予其他用户 db_owner

> ID：15764132
> 
> 赞同：2
> 
> 时间：2013-04-02T12:28:47.617
> 
> 标签：sql, sql-server, triggers

我想设置一个 MS SQL 触发器（或其他机制），它会自动授予某些组 db_owner 权限。

我**不**希望我们的用户在 SQL Server 上拥有**db_admin**，而是我想只授予他们**db_creator**但每当有人创建数据库时，其他用户也应该有权访问该数据库。

我试过创建一个 SQL 触发器：

```
USE master
GO
CREATE TRIGGER trg_DDL_CreateDatabase
ON ALL SERVER
FOR CREATE_DATABASE
AS

DECLARE @databaseName varchar(max)
SET @databaseName = (SELECT EVENTDATA().value('(/EVENT_INSTANCE/DatabaseName)[1]', 'VARCHAR(255)'))

EXEC ('USE [' + @databaseName + ']' )

IF IS_MEMBER ('DOMAIN\GROUP') = 1
EXEC sp_addrolemember N'db_owner', N'DOMAIN\SOMEGROUP'
ELSE
EXEC sp_addrolemember N'db_owner', N'DOMAIN\SOMEOTHERGROUP'

GO 
```

由于我无法`USE`在触发器中使用语句，因此我尝试使用该`EXEC ('USE [' + @databaseName + ']' )`方法 - 但是它也不起作用。

请问有什么建议吗？

**编辑：**如果我可以根据组成员身份授予不同的权限，那就太棒了。例如，用户是组 A 的成员，则将 A 添加到 db_owner，如果 B，则添加 B、C 和 E 等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T12:33:02.207

每个数据库都被创建为`[model]`. 您申请的任何用户、组和授权`[model]`都将自动复制到任何新创建的数据库中。请注意，这并不涉及附加的数据库。

如果要通过 DDL 触发器执行此操作，则需要对*整个*批处理使用动态 sql：

```
CREATE TRIGGER trg_DDL_CreateDatabase
ON ALL SERVER
FOR CREATE_DATABASE
AS
DECLARE @databaseName sysname;
SET @databaseName = (SELECT EVENTDATA().value('(/EVENT_INSTANCE/DatabaseName)[1]', 'sysname'));
declare @sql nvarchar(max);
set @sql = N'USE ' + quotename(@databaseName) + N';
IF IS_MEMBER (''DOMAIN\GROUP'') = 1
EXEC sp_addrolemember N''db_owner'', N''DOMAIN\SOMEGROUP''
ELSE
EXEC sp_addrolemember N''db_owner'', N''DOMAIN\SOMEOTHERGROUP'';';
exec sp_executesql @sql; 
```

作为[`QUOTENAME()`](http://msdn.microsoft.com/en-us/library/ms176114.aspx)用于正确转义名称的良好做法。用于`sysname`数据库名称类型，用于提取（xml 方法）和存储（变量类型）。因为你的代码很容易被a`db_creator`通过SQL注入将自己提升为系统管理员（创建一个适当的数据库名称并pwn你）。

# ios - 在 UIActionSheet 中显示 2 列

> ID：15764137
> 
> 赞同：0
> 
> 时间：2013-04-02T12:29:04.593
> 
> 标签：ios, objective-c, cocoa-touch, uiactionsheet

这样的事情可能吗？如何？

用一些简单的 Photoshop 制作的图像。

![一些简单的Photoshop](https://i.stack.imgur.com/DgB3p.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:02:32.450

使用所需的视图布局创建您自己的视图控制器，并在呈现时为视图设置动画。这比冒险更改默认 UIActionSheet 的外观和感觉要容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T12:37:35.433

默认情况下是不可能的`UIActionSheet`，但是你可以尝试像
[TweetBot 这样的自定义控件，比如 UIAlertView 和 UIActionSheet 替换 iOS](http://www.cocoacontrols.com/controls/tweetbot-like-uialertview-and-uiactionsheet-replacement)

# selenium-ide - Selenium IDE：自动化任务

> ID：15764140
> 
> 赞同：0
> 
> 时间：2013-04-02T12:29:15.697
> 
> 标签：selenium-ide

我想自动执行按日期检查链接的任务，下载文件并验证 Excel 工作表内容。步骤： 1\. 打开网址。它将显示文件（xxxx_130112_130208_xxx.xlsx）的链接。2\. 点击并下载匹配的日期链接。它将下载excel表。3\. 搜索内容并显示报告。

如果对此有任何想法，请告诉我。我们可以自动化这个场景吗？

-斯里兰卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:26:22.213

你不能在浏览器之外做任何事情。唯一允许的是使用 ClickOkOnNextConfirmation 在对话框中单击“确定”。但它不适用于保存文件。这就是 Selenium IDE 的工作原理。

# java - 从 Java 1.4 升级到 JAVA 6 SE

> ID：15764143
> 
> 赞同：3
> 
> 时间：2013-04-02T12:29:22.600
> 
> 标签：java, upgrade

我目前正在从 JAVA 1.4 升级到 JAVA 6 SE。一些方法和类要么已被弃用，要么由于效率低下而出现大量警告。我想知道是否可以在不更改代码的情况下进行升级，并在更改后远程调试以修复错误。如果有更简单或更有效的方法，请分享。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T12:37:48.190

> 我想知道是否可以在不更改代码的情况下进行升级，并在更改后远程调试以修复错误。

我们不能给你一个明确的“是”或“否”。

首先，应该注意的是，大多数弃用和警告一开始都可以忽略。（有些人告诉你应该尽快修复的事情，但是在 Java 1.4 之前很久就弃用了最糟糕/危险的 API 的最令人震惊的例子）

所以我们不能给你一个明确的答案的一个原因是我们不知道你看到了什么警告（呃！）。

另一个原因是我们不知道您的测试套件有多好/广泛。如果你有一个好的测试套件，那么任何问题都会被解决。如果没有，或者如果您依赖手动测试，那么您发现升级导致的任何问题的机会将大大降低。

* * *

需要注意的另一件事是，每个主要 Java 版本的文档都包含有关新版本与前一个版本之间不兼容性的部分。至少浏览这些文档以查看突出显示的任何问题是否可能影响您的应用程序是一个好主意。

* * *

最后，大多数人发现升级不会导致大量问题。当然也有例外。而且，如果您习惯于依赖于实现特定的行为而不是 javadocs 所说的，那可能会导致痛苦。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T12:32:18.213

通常的做法是：

*   通过新的编译器运行您的代码
*   修复任何编译错误（在极少数情况下可能会发生，例如当您使用单词`enum`作为标识符时，这是 Java 1.5 和更高版本的关键字）
*   执行完整的 QA 周期以验证您的应用程序是否仍然正常工作

除此之外，您应该考虑升级到 Java 7 - Java 6 也已经处于其[生命周期结束阶段](http://www.oracle.com/technetwork/java/eol-135779.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T12:33:48.563

基本上，您可以在 Java 6 虚拟机上运行您的 Java 1.4 代码*而无需修改*。可能已经引入了新的 API，有效地弃用了旧的 API。通常，不推荐使用的 API 的 Javadoc 应该给你一个指针，你应该改用什么。

# iphone - UIPageControl setCurrentPage - UICollectionView iOS6

> ID：15764144
> 
> 赞同：4
> 
> 时间：2013-04-02T12:29:22.703
> 
> 标签：iphone, xcode, ios6, scrollview, pagecontrol

我是 XCode 的新手，所以我需要你的帮助。我使用 UIPageControl 来显示我的集合视图的哪个单元格现在可见。

问题是获取可见单元格：

我认为在这种方法中

```
-(void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView 
```

我应该更新当前页面。但是如何获取当前页面？

谢谢你的帮助！:-)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-02T14:33:58.840

页面可以定义为偏移量和大小之间的比率。

```
- (NSInteger)horizontalPageNumber:(UIScrollView *)scrollView {
    CGPoint contentOffset = scrollView.contentOffset;
    CGSize viewSize = scrollView.bounds.size;

    NSInteger horizontalPage = MAX(0.0, contentOffset.x / viewSize.width);

    // Here's how vertical would work...
    //NSInteger verticalPage = MAX(0.0, contentOffset.y / viewSize.height);

    return horizontalPage;
} 
```

有几种方法可以触发它。您可以在每个scrollViewDidScroll 上完成这项工作，但这有点过分。更好的方法是在拖动完成且不再减速时运行它，或者在减速结束时运行它，如下所示：

```
-(void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView {
    self.page.currentPage = [self horizontalPageNumber:scrollView];
}

- (void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate {
    if (!decelerate) self.page.currentPage = [self horizontalPageNumber:scrollView];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T12:33:56.630

如果您使用寻呼机，那么代码应该可以帮助您：

```
- (IBAction)pagerValueChanged 
{
    NSData* imgData = [images objectAtIndex:pager.currentPage];
    UIImage* img = [[UIImage alloc]initWithData:imgData];
    imageView.image = img;

    //NSLog(@"img width: %f, img height: %f", img.size.width, img.size.height);

    [img release];
} 
```

# android - 将位置信息提供给服务的最佳方式

> ID：15764147
> 
> 赞同：0
> 
> 时间：2013-04-02T12:29:42.903
> 
> 标签：android, gps, android-location

我已经搜索了很多，但我并不是完全一无所知。我已经实施了一个临时解决方案，但想知道是否有更好的方法。

我有一个应用程序每 60 秒将一个人的位置发送到服务器。在我的仪表板上（应用程序启动后将转到**onPause**的主屏幕），我使用以下代码注册了一个**LocationManager ：**

```
service = (LocationManager) getSystemService(LOCATION_SERVICE);
        boolean enabled = service
                .isProviderEnabled(LocationManager.GPS_PROVIDER);

        if (!enabled)
        {
            Intent intent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);
            startActivity(intent);
        }
        else
        {
            Criteria criteria = new Criteria();
            provider = service.getBestProvider(criteria, false);
            service.requestLocationUpdates(provider, 10000, 50, this);

            Location location = service.getLastKnownLocation(provider);

            // Initialize the location fields
            if (location != null)
            {
                onLocationChanged(location);
            }
            else
            {
                Log.d("Location: ", "No update received");
            }
        } 
```

然而，正如我所提到的，这个活动将被用户最小化（通过按下主页按钮）。AlarmManager 每 60 秒调用一次服务。该服务从仪表板活动（纬度、经度）访问静态变量并将其发送到服务器。

我的问题：

**如果活动继续暂停，requestLocationUpdates 函数会停止吗？还是会继续工作？**

如果它继续工作，它将不断更新两个 lat 和 lon 静态 String 对象，并且服务将不断获取更新的值。如果它们停止，服务将一次又一次地获取相同的旧值。

另外，有没有更好的方法来解决这个问题？混合使用 GPS 提供商和网络提供商？（我需要相当准确的值）。

**编辑**

这是我的闹钟。此代码在**登录**活动中

```
Intent i = new Intent(con, LocationPoller.class);
                i.putExtra(LocationPoller.EXTRA_INTENT, new Intent(con,
                        Login.class));
                i.putExtra(LocationPoller.EXTRA_PROVIDER,
                        LocationManager.GPS_PROVIDER);

                gps = (AlarmManager) getSystemService(Context.ALARM_SERVICE);

                PendingIntent pi = PendingIntent.getBroadcast(con, 0, i, 0);
                gps.setRepeating(AlarmManager.RTC_WAKEUP, c.getTimeInMillis(),
                        10 * 1000, pi);
                Log.d("Service: ",
                        "GPS Service started and scheduled with AlarmManager"); 
```

这是我的接收器（也在登录活动中）

```
private class ReceiveMessages extends BroadcastReceiver
    {
        @Override
        public void onReceive(Context context, Intent intent)
        {
            Location loc = (Location) intent.getExtras().get(
                    LocationPoller.EXTRA_LOCATION);

            String msg;

            if (loc == null)
            {
                msg = intent.getStringExtra(LocationPoller.EXTRA_ERROR);
            }
            else
            {
                msg = loc.toString();
            }

            if (msg == null)
            {
                msg = "Invalid broadcast received!";
            }

            Log.d("GPS Broadcast: ", msg);
        }
    } 
```

什么都没有发生：s 在 logcat 上没有得到任何东西，这意味着没有收到广播。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:44:49.157

当活动暂停时，所有注册的侦听器都将停止。更好的实现方法是，警报管理器每 60 秒发送一次广播，该广播接收器启动一个服务，该服务将在 Wakeful 线程上请求一个位置，一旦检索到位置信息，就更新服务器上的位置。

有一个带有示例的开源库（由 CommonsWare 提供），请参阅下面的链接。它在 Apache 2.0 许可下

[位置轮询库](https://github.com/commonsguy/cwac-locpoll)

请使用上述库找到我的示例项目。我在上面的库中修改了一些东西并创建了我自己的版本。

[位置轮询演示应用程序](http://dl.dropbox.com/u/69417269/LocationPoolerDemo.zip)

# xml - DTD 属性可以是固定的并且是必需的吗？

> ID：15764148
> 
> 赞同：1
> 
> 时间：2013-04-02T12:29:45.040
> 
> 标签：xml, dtd

DTD 属性可以是固定的并且是必需的吗？

```
<!ATTLIST myTag myAttribute CDATA #FIXED #REQUIRED "some text"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T17:08:09.097

Daniel Haley 是正确的，至少在 DTD 的语法方面是正确的。

如果您希望所有出现的属性都具有给定值，*并且*您希望该值物理存在于 XML 文档中（默认值机制不存在），*并且*如果该值是合法的 NMTOKEN，则您可以通过不同的途径实现您想要的行为：

```
<!ATTLIST myTag 
   myAttribute (some-text) #REQUIRED > 
```

这里的属性类型信息`(some-text)`指定唯一有效的值`myAttribute`is `some-text`，并且`#REQUIRED`关键字强加了`myAttribute`必须物理存在于输入中的约束。

如果您想要的值不是合法的 NMTOKEN——例如，如果它是绝对 URI，或者其中包含空格或非名称字符的短语——那么这种技术将不起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T15:05:47.483

不，属性声明不能同时具有`#FIXED`和`#REQUIRED`。

如果属性是`#FIXED`，则该值始终是声明中指定的值，即使该属性实际上不在 XML 中。

例如，在以下 XML 中，该属性的值`test`是`bar`即使该属性实际上并未在 XML 本身中指定：

```
<!DOCTYPE foo [
<!ELEMENT foo EMPTY>
<!ATTLIST foo
          test CDATA #FIXED 'bar'>
]>
<foo/> 
```

这是通过 XSLT 转换的证明：

**XSLT 2.0**（它也是有效的 1.0）

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="/foo">
        <results>
            <xsl:value-of select="@test"/>          
        </results>
    </xsl:template>

</xsl:stylesheet> 
```

**输出**

```
<results>bar</results> 
```

# c - 如何搜索当前目录中的文件和当前目录下的目录中的文件？

> ID：15764149
> 
> 赞同：1
> 
> 时间：2013-04-02T12:29:48.033
> 
> 标签：c, linux, unix, systems-programming

该函数搜索当前目录中的文件。如果它跨越一个目录，它会进入并再次搜索除当前'.'之外的文件。和以前的“..”目录。但它不能按我的意愿工作。它没有进入下一个目录。

```
int foo(char *currDir) 
{
  struct dirent *direntp;
  DIR *dirp;
  char currentDir[250];

  if ((dirp = opendir(currDir)) == NULL) 
  {
      perror ("Failed to open directory");
      return 1;
  }

  //By Sabri Mev at GYTE

  while ((direntp = readdir(dirp)) != NULL)
  {
    printf("%s\n", direntp->d_name);
    if(direntp->d_type == DT_DIR)
    {
        if(strcmp(direntp->d_name,".") !=0  && strcmp(direntp->d_name,"..") != 0)
            foo(direntp->d_name); //Recursive!   
    }
  }
  getcwd(currentDir,250);
  printf("curr Dir : %s\n",currentDir );

  while ((closedir(dirp) == -1) && (errno == EINTR)) ;

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T12:47:31.793

因为你的路径是错误的。

试试这个

```
if(direntp->d_type == DT_DIR)
{   
    if(strcmp(direntp->d_name,".") !=0  && strcmp(direntp->d_name,"..") != 0) 
    {
        sprintf(currentDir, "%s/%s", currDir, direntp->d_name);
        foo(currentDir); //Recursive!   
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T12:56:30.673

当您在循环内对 foo() 进行递归调用时，请注意 direntp->d_name 包含的不是完整路径，而只是子目录名称。您必须将其与 currDir 连接并使用结果调用 foo()。

例如，如果你从 foo("/home") 开始并且第一个子目录是 "root"，那么当它应该是 foo("/home/root") 时，你会递归调用 foo("root")。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T12:55:50.047

在`direntp->d_name`您仅访问本地目录名称时，它不会返回整个路径

功能也`getcwd`被弃用。请改用符合 ISO C++ 的标准[`_getcwd`](http://msdn.microsoft.com/en-us/library/sf98bd4y%28v=vs.80%29.aspx)（如果您不使用 C++ 编写）。

# c# - 日期在数据库中存储不正确

> ID：15764152
> 
> 赞同：0
> 
> 时间：2013-04-02T12:29:54.073
> 
> 标签：c#, asp.net, ms-access

如果日期早于 12 日，则以格式在文本框中输入日期时，`DD/MM/YYYY`它将存储为`MM/DD/YYYY`. 我需要将其存储为类型。

```
protected void InsertButton_Click(object sender, EventArgs e)
{

    Int32 claim = (Int32)Session["Claim"];
    string claim1 = Convert.ToString(claim);
    Label4.Text = "Claim Number : " + (String)claim1;
    Label4.Visible = true;

    // declare variables to hold info enterend by user
    string expenseType;
    string purpose;
    decimal amount;
    DateTime date;
    Boolean receipts;

    //assign info entered to variables entered above
    expenseType = DropDownList1\. Text;
    purpose = PurposeofExpenseTextBox.Text;
    amount = Convert.ToDecimal(AmountSpentTextBox.Text);
    date = Convert.ToDateTime(DatePurchasedTextBox.Text);
    receipts = CheckBox1.Checked;
    DateTime today = DateTime.Today;

    // create connection string "conn"
    string mapPath = Server.MapPath(".");
    string ConnectionString = @"Provider=Microsoft.ACE.OLEDB.12.0;" +
       @"Data source= "*****";
    OleDbConnection conn = new OleDbConnection(ConnectionString);

    try
    {
        //create query to insert values into Expenses table   
        OleDbCommand cmd = new OleDbCommand("INSERT INTO Expenses (ExpenseType, PurposeofExpense, AmountSpent, DatePurchased, strEmpName, Receipts, EmployeeID, ExpNumber) VALUES (?, ?, ?, ?, ?, ?, ?, ?)", conn);
        cmd.Parameters.Add("@ExpenseType", OleDbType.VarChar).Value = DropDownList1.Text;
        cmd.Parameters.Add("@PurposeofExpense", OleDbType.VarChar).Value = PurposeofExpenseTextBox.Text;
        cmd.Parameters.Add("@AmountSpent", OleDbType.VarChar).Value = AmountSpentTextBox.Text;
        cmd.Parameters.Add("@DatePurchased", OleDbType.VarChar).Value = DatePurchasedTextBox.Text;
        cmd.Parameters.Add("@strEmpName", OleDbType.VarChar).Value = (String)Session["New"];
        cmd.Parameters.Add("@Receipts", OleDbType.Boolean).Value = CheckBox1.Checked;
        cmd.Parameters.Add("@EmployeeID", OleDbType.VarChar).Value = (String)Session["Number"];
        cmd.Parameters.Add("@ExpNumber", OleDbType.VarChar).Value = (Int32)Session["Claim"];

        //open connection "conn"
        conn.Open();
        //execute insert query
        cmd.ExecuteNonQuery(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T12:35:01.370

来自[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms714540%28v=vs.85%29.aspx)：

> 日期值必须根据 ODBC 规范日期格式分隔或由日期时间分隔符 ("#") 分隔。否则，Microsoft Access 会将值视为算术表达式，并且不会引发警告或错误。例如，日期“1996 年 3 月 5 日”必须表示为 {d '1996-03-05'} 或 #03/05/1996#；否则，如果仅提交 03/05/1993，Microsoft Access 会将其计算为 3 除以 5 除以 1996。此值向上舍入为整数 0，并且由于零日映射到 1899-12-31，因此这是使用的日期。管道字符 (|) 不能用于日期值，即使用反引号括起来。

您需要在保存前检查日期格式。使用一些面具。

# .net - .net powerpoint 应用程序无法保存

> ID：15764153
> 
> 赞同：0
> 
> 时间：2013-04-02T12:29:57.057
> 
> 标签：.net, office-interop, uac

我不确定如何制定我的标题，如果不够清楚，我很抱歉:)

我的申请（报价）的目的很简单：

*   您将所有客户坐标写入文本框中
*   邮件地址将自动从中检索
*   所有坐标将粘贴在所有选定的 powerpoint 模板中（在后台）
*   这些将以 pdf 格式保存（使用**ApplicationPresentation.SaveAs(...SaveAsPdf)**）
*   之后他们将通过 .net 邮件系统发送到哪里。

现在由于 Windows 更新，保存似乎不再起作用。我收到一个未知的 com 错误（**错误 -2147467259**）。经过一些研究，我遇到了一个有***UAC 问题***的人。

所以我做了一些试验，当我将我的 powerpoints 保存到 C:/ 时，它确实有效......当我试图将它们放在另一个驱动器上时，它会阻塞并给我一个错误。

我需要对驱动器进行一些配置以使其正常工作吗？我的应用程序在 Windows 更新之前工作。所以有一个覆盖somehwere :(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:48:00.083

感谢 Fabio 的评论，我设法找到了解决问题的方法，所以他的评论肯定很有用。看起来我的问题是一个重命名的文件夹（只是一个大写字母），我没有检查。

# adapter - JSON.parse() 在 Worklight 混合适配器中不起作用

> ID：15764155
> 
> 赞同：0
> 
> 时间：2013-04-02T12:29:58.167
> 
> 标签：adapter, ibm-mobilefirst

我正在尝试使用适配器进行推送通知。我遵循此 [IBM Worklight Developer 站点](http://public.dhe.ibm.com/software/mobile-solutions/worklight/docs/v506/09_04_Push_notifications.pdf)中为推送通知定义的所有步骤，并制作了一个项目及其工作。现在我想进一步向特定设备发送通知。对于此工作灯，请提供一个方法 getDeviceSubscriptions()，该方法返回 JSON 数组，其中包含每个订阅设备的对象数。

```
deviceSubscriptions = userSubscription.getDeviceSubscriptions() ; 
```

JSON包括：

[{

“平台”：“谷歌”，

"eventSourceId":"PushAdapter.PushEventSource",

"别名":"myPush",

“令牌”：“”，

“用户代理”：” ”，

“设备”：” ”，

“应用程序ID”：“”，

“选项”：{}

}]

现在我想使用 JSON 中的数据来获取设备和令牌。现在为此我使用 JSON.stringify(deviceSubscriptions) 这个方法将 deviceSubscriptions 转换为字符串。但是我希望我可以直接访问 JSON 数组中的令牌和设备，为此我使用了 JSON.parse(deviceSubscriptions) 但这给出了错误：

> “Ecma 错误：TypeError：找不到对象的默认值。（C%3A%5Cworkspace%5CFINAL%5Cadapters%5CPush/Push-impl.js#43）”

第 43 行是：

JSON.parse（设备订阅）

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T13:56:39.153

Worklight 适配器的 JavaScript 代码使用[Mozilla Rhino](https://developer.mozilla.org/en-US/docs/Rhino)在 Worklight Server 上运行。Rhino 是完全用 Java 编写的 JavaScript 的开源实现。您可能无法访问客户端上运行的 JavaScript 引擎可以访问的所有内容。

似乎 JSON 或 JSON.parse 都未定义。尝试将以下库添加到您的 Worklight Adapter`[name]-impl.js`文件中：

[json2.js](https://raw.github.com/douglascrockford/JSON-js/master/json2.js)：*此文件在全局对象中创建一个 JSON 属性，如果还没有，则将其值设置为包含 stringify 方法和 parse 方法的对象。parse 方法使用 eval 方法进行解析，用几个正则表达式保护它，以防止意外的代码执行危险。在当前的浏览器上，这个文件什么都不做，更喜欢内置的 JSON 对象。*

[来源](https://github.com/douglascrockford/JSON-js)。

# filtering - 试图过滤来自加速度计和陀螺仪的（大量）噪声

> ID：15764159
> 
> 赞同：5
> 
> 时间：2013-04-02T12:30:13.230
> 
> 标签：filtering, robotics, noise, kalman-filter, sensor-fusion

**我的项目：**

我正在开发一款带有 3 轴加速度计和陀螺仪的老虎机，试图估计汽车的姿态（x、y、z、偏航、俯仰），但我的振动噪音有一个大问题（当汽车运行时，例如，齿轮会引起振动，而轨道也会变得更糟），因为加速度计的噪声值介于 ±4[g]（其中 g = 9.81 [m/s^2]）之间。

我知道（因为我观察到了），噪声与我所有的传感器相关

在我的第一次尝试中，我尝试使用卡尔曼滤波器来解决它，但它不起作用，因为我的状态向量的值有一个非常大的噪音。

EDIT2：在我的第二次尝试中，我在卡尔曼滤波器之前尝试了一个低通滤波器，但它只会减慢我的系统速度并且没有过滤噪声的低分量。此时我意识到这种噪声可能由低频和高频分量组成。

我正在学习自适应滤波器（LMS 和 RLS），但我意识到我没有噪声信号，如果我使用一个加速度计信号来过滤其他轴的加速度计，我不会得到绝对值，所以它不起作用.

编辑：我在尝试查找自适应滤波器的示例代码时遇到问题。如果有人知道类似的事情，我将非常感激。

**这是我的问题：**

有谁知道过滤器或知道如何修复它并正确过滤我的信号？

非常感谢你，

XNor

PD：我为我可能犯的任何错误道歉，英语不是我的母语

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T03:33:45.473

我要做的第一件事是对传感器信号运行 DFT，看看加速度计信号中是否真的存在高频和低频分量。

使用 DFT，您应该能够确定低通/带通滤波器的最佳截止频率。

如果您在 Z 轴上有一个恒定分量，则您可能没有过滤掉重力。请注意，如果存在明显的俯仰或滚动，则该常数也可以在您的 X 和 Y 轴上看到

通常，使用加速度计进行姿势估计并不是一个好主意，因为您需要将加速度信号集成两次才能获得姿势。如果信号嘈杂，如果噪声不是 100% 均匀分布在 + 和 - 之间，几秒钟后你就会遇到麻烦。

如果我们假设您的齿轮没有噪音，那么即使是加速度计的转换精度也可能在几分钟后开始扰乱您的姿势。

我肯定会使用第二个传感器，例如与您的数学模型相结合的指南针/编码器，并将您的所有传感器数据组合在卡尔曼滤波器（传感器融合）中。

您还可以通过假设它与您的电机转速相关来推导出噪声的黑盒模型。(Box-jenkins/Arma/Arima)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-05T19:59:14.713

我在低频和高频噪声方面遇到了类似的问题，我设法通过使用通用麦克风防震架将其很好地消除，而不会消除良好的信号。它对陀螺仪也做得很好，特别是如果你找到一个适合它的（或者你可以把它放在一个小盒子里然后安装它）它基本上使用弹性线来消除冲击和振动。![通用防震架](https://i.stack.imgur.com/zvBwP.jpg)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T14:11:30.863

您是否尝试过对数据进行简单的低通滤波器？我猜振动频率远高于正常汽车加速度数据中的频率。至少在正常驾驶中。崩溃可能是另一个故事......

# android - 为什么该方法在没有选择项目的情况下运行？

> ID：15764166
> 
> 赞同：0
> 
> 时间：2013-04-02T12:30:22.827
> 
> 标签：android, android-spinner

当片段打开时，即`onCreateView`调用该方法时，`spinner.setOnItemSelectedListener(new CustomOnItemSelectedListener())`即使尚未选择任何项目，也会调用该方法。

为什么会这样以及如何更改代码以使其仅在选择项目时才调用该方法？

这是代码：

```
package com.petroc.nationaldiploma;

import java.util.ArrayList;
import java.util.List;

import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.Spinner;

import com.actionbarsherlock.app.SherlockFragment;

public class AddGradesFragment extends SherlockFragment {

private GradesDataSource datasource;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    Spinner spinner;
    View view = inflater.inflate(R.layout.fragment_add_grades, container,
            false);

    spinner = (Spinner) view.findViewById(R.id.spinner);
    List<String> list = new ArrayList<String>();
    list.add("Pass");
    list.add("Merit");
    list.add("Distinction");
    ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(
            getActivity(), android.R.layout.simple_spinner_item, list);
    dataAdapter
            .setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner.setAdapter(dataAdapter);

    spinner = (Spinner) view.findViewById(R.id.spinner);
    spinner.setOnItemSelectedListener(new CustomOnItemSelectedListener());

    // EditText editText = (EditText)
    // view.findViewById(R.id.editModuleText1);

    return view;
}
} 
```

感谢任何帮助谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:35:03.137

当您使用列表对象和适配器将数据设置到微调器时，它在设置时间选择默认值为 0，这就是您被选中的原因

# asp.net - 创建文件夹结构

> ID：15764169
> 
> 赞同：0
> 
> 时间：2013-04-02T12:30:30.720
> 
> 标签：asp.net

我需要在应用程序中动态开发以下文件夹结构。我已经使用 jQuery 开发了它。有没有其他方法可以在 asp.net 中开发这种结构。

实际上，我正在创建一个 ul li 结构，并且我正在将文件夹图标添加到 ul itenm 并将文件图标添加到来自代码后面的 li 项。一旦创建了 ul 结构，我将使用 jquery 插件将此 ul 结构显示为文件夹和文件在浏览器中..我只想显示结构..

![在此处输入图像描述](https://i.stack.imgur.com/XMQvj.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:08:05.087

您可以在 asp.net 中使用 Treeview - treeview 支持将图像绑定到节点。

```
<asp:TreeView id="SampleTreeView" 
  runat="server">
    <RootNodeStyle ImageUrl="~/Images/root.gif" />
    <ParentNodeStyle ImageUrl="~/Images/parent.gif" />
    <LeafNodeStyle ImageUrl="~/Images/leaf.gif" />
  <Nodes>
    <asp:TreeNode Value="Home" 
      Text="Home"
      Target="Content" 
      Expanded="True">
      <asp:TreeNode Value="Page 1" 
        Text="Page1"
        Target="Content">
        <asp:TreeNode Value="Section 1" 
          Text="Section 1"
          Target="Content"/>
      </asp:TreeNode>              
      <asp:TreeNode Value="Page 2" 
        Text="Page 2"
        Target="Content"
          ImageUrl="~/Images/star.gif">
      </asp:TreeNode> 
    </asp:TreeNode>
  </Nodes>
</asp:TreeView> 
```

如果您想动态构建树视图 - 此资源也可能会有所帮助。 [http://www.java2s.com/Code/ASP/Asp-Control/AddingnodesprogrammaticallytotheTreeViewcontrolC.htm](http://www.java2s.com/Code/ASP/Asp-Control/AddingnodesprogrammaticallytotheTreeViewcontrolC.htm)

# java - Jsoup和arraylist android

> ID：15764171
> 
> 赞同：0
> 
> 时间：2013-04-02T12:30:35.890
> 
> 标签：java, android, xml, jsoup

我使用 jsoup 成功地从 xml 内容中提取标签作为一个元素。

```
class Post {

private String a;
private String b;

public void setA (String a){
       this.a = a;

}

public void setB(String b){
       this.b =b;

}

public String getA(){

return a;
}

public String getB(){

return b;
}

} 
```

通过使用数组列表

```
public ArrayList<Post> PostList = new ArrayList<Post>(); 
```

如何使用 jsoup 将 ab 的值存储在不同的索引下。我提取单个标签

```
Document doc = Jsoup.parse(soap_xml_content);

Element element1 = doc.select("a");
Element element2 = doc.select("b");

String value_a = element1.text();
String value_b = element2.text(); 
```

* * *

**xml:**

```
<soap:Envelope xmlns:soap="schemas.xmlsoap.org/soap/envelope/"> 
    <soap:Body> 
        <wsListeCompt> 
            <comptes> 
                <a>pen drive</a> 
                <b>jsoup</b> 
            </comptes> 
            <comptes> 
                <a>pen drive</a> 
                <b>jsoup</b> 
            </comptes> 
            <comptes> 
                <a>pen drive</a> 
                <b>jsoup</b> 
            </comptes> 
        </wsListeCompt> 
    </soap:Body> 
</soap:Envelope> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:30:49.330

此代码不会编译，因为`select()`将返回一个`Elements`对象，而不是`Element`.

```
Elements aElements = doc.select("a"); // Select all a-elements
Elements bElements = doc.select("b"); // Select all b-elements 
```

现在您遍历找到的所有元素并根据需要存储它们：

```
for( Element element : aElements )
{
    postList.add(element.text());
} 
```

*（对 b 元素做同样的事情）*

* * *

**例子：**

```
 Elements aElements = doc.select("a");
    Elements bElements = doc.select("b");

    // This 'if-else' block is optional
    if( aElements.size() != bElements.size() )
    {
        // Error handling - if required
    }
    else
    {
        // Iterate over all elements
        for( int i = 0; i < aElements.size(); i++ )
        {
            Post p = new Post();    // Create a Post

            p.setA(aElements.get(i).text());    // Set A Value
            p.setB(bElements.get(i).text());    // Set B Value

            PostList.add(p);    // Add the Post to List
        }
    } 
```

# java - 使用 mat.get() 的像素的 OpenCV 颜色值有时返回 null

> ID：15764176
> 
> 赞同：8
> 
> 时间：2013-04-02T12:30:41.040
> 
> 标签：java, android, opencv

我尝试在 Android 和 OpenCV 2.4.4 上使用 mat.get(inx, int y) 获取像素的 RGB 值。

```
Mat img = Utils.loadResource(getBaseContext(), R.drawable.ex3);
double[] tmp = img.get(100, 100);
if(printLog) Log.v(tag, "Color: "+ tmp[0] +","+ tmp[1] +","+ tmp[2] +""); 
```

Normaly 我得到了 tmp-Array 返回。但是在某些像素上，我返回了“null”。（这些点在图片的范围内！）

那么为什么我在一些坐标上得到一个数组而在其他一些坐标上是“null”以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-12T14:04:10.410

在 OpenCV 中，通过使用 Mat.get(row, col) 获取像素信息，X 和 Y 的含义发生了变化：使用 Y 表示行，X 表示列。

```
Mat.get(Y, X); 
```

所以在我的情况下，我超出了范围，但 openCV 没有返回异常。它返回“空”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T14:17:24.033

我首先检查您使用了多少个频道`Mat`，`Mat::channels()`然后通过以下方式访问它们：

> 双[] tmp = img.at(100,100);

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-11-22T01:35:56.767

要单独访问每个像素，如果您使用的是[https://github.com/bytedeco/javacv ，您可以这样做](https://github.com/bytedeco/javacv)

```
 IplImage image = cvLoadImage("path/to/image/get.jpg");

      public void colorProcess(IplImage image){
        CvMat result = CvMat.create(image.width(),image.height(), CV_32F);
        CvMat ff =image.asCvMat(); 

        for(int a=0;a<result.cols();a++){
             for(int b=0;b<result.rows();b++){

                CvScalar rgb = cvGet2D(ff, a, b);
                System.out.println("blue "+rgb.getVal(0)+"green "+rgb.getVal(1)+"red    "+rgb.getVal(2));

              }
        }

      } 
```

# javascript - JavaScript：为什么是 NaN ！== NaN？

> ID：15764192
> 
> 赞同：2
> 
> 时间：2013-04-02T12:31:14.067
> 
> 标签：javascript, nan

原因是什么？我相信这是 JavaScript 中唯一不等于自身的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:33:56.150

NaN 不等于 NaN

使用 IsNaN 函数检查它

[看这里](https://stackoverflow.com/questions/6976721/is-nan-equals-to-nan)

# php - 如何路由codeigniter路由以访问Facebook（www.facebook.com/username）中的用户

> ID：15764194
> 
> 赞同：0
> 
> 时间：2013-04-02T12:31:25.703
> 
> 标签：php, codeigniter, codeigniter-routing

我正在使用 codeigniter 框架，默认情况下我加载我的站点控制器

```
$route['default_controller'] = "site"; 
```

但是现在我想设置 routes.php 配置，这样我仍然可以像以前一样访问我的控制器，但是如果控制器不存在，那么我想运行用户控制器并检查它是否是昵称，以便我可以显示该用户配置文件。

就像在 Facebook 上一样，您可以在其中拥有`www.facebook.com/username`它并将您带到您的用户个人资料。但我希望我的其他控制器仍然可以访问`www.mysite.com/site`，`www.mysite.com/site/function`等等

我曾尝试使用 :any 通配符，但无法正常工作。我已经看到有些人用正则表达式解决了这个问题，但我不擅长正则表达式，也不知道如何把它放在一起，所以它对我有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T12:45:04.453

试试我的方法：

首先，`$route`为您拥有的每个控制器设置，例如：

```
$route['controller_1'] = 'controller_1';
$route['controller_1/(:any)'] = 'controller_1/$1'; //this let you access your method
$route['controller_2'] = 'controller_2';
$route['controller_2/(:any)'] = 'controller_2/$1'; //this let you access your method 
```

接下来，使用`:any`

```
$route['(:any)'] = 'user_controller/$1'; 
```

祝你好运 ！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-21T21:15:55.460

试试这个方法。如果你有很多控制器，它会减少很多重复的行，但我不知道它是否违反任何 CI 规则。

```
//this code block should be placed after any kind of reserved routes config
$url_parts = explode('/',strtolower( $_SERVER['REQUEST_URI']) );
$reserved_routes = array("controller_1", "controller_2", "controller_3" );
if (!in_array($url_parts[1], $reserved_routes)) {    
    $route['([a-zA-Z0-9_-]+)'] = "controller_1/profile/$1";
} 
```

# breeze - Breeze - 定义添加实体的键

> ID：15764199
> 
> 赞同：1
> 
> 时间：2013-04-02T12:31:41.000
> 
> 标签：breeze

我想向我的经理添加一个实体。经理保存在我的 MasterViewmodel 中，我正在处理淘汰赛。

```
Error: Cannot attach an object to an EntityManager without first setting its key or setting its entityType 'AutoGeneratedKeyType' property to something other than 'None' 
```

我的代码：

```
var item = {           
        GuidUser: masterViewModel.UserID,
        GuidProject: ProjectID,
        Start: startTime,
        End: stopTime,
        Description: workDone,
        IdCustomer: null,
        timestampId: null,
        Charged: false,
        ToCharge: toCharge,
        };
var item2 = masterViewModel.breezeProjectManager().createEntity('Timestamp', item);
masterViewModel.breezeProjectManager().addEntity(item2); 
```

但是如何设置密钥？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-09T13:07:12.043

尝试以下操作：

```
var item2 = masterViewModel.breezeProjectManager()
           .createEntity('item', { timestampId: breeze.core.getUuid() }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T17:55:48.163

当第一次定义任何 EntityType 时，它​​应该至少有一个 DataProperty，它的“isPartOfKey”属性设置为 true。任何 EntityType 的元数据要么作为从服务器返回的元数据的结果而具体化，要么在客户端上创建。无论哪种情况，都必须先创建“EntityType”元数据，然后才能创建该类型的任何实体。

我的猜测是，当您第一次尝试创建实体时，您还没有获取元数据或创建元数据。在您的情况下，您可以在尝试创建实体之前进行 fetchMetadata 调用。IE

```
breezeProjectManager().metadataStore.fetchMetadata().then(function() {
   .. perform your creation and add logic here.
} 
```

另一种可能性是，使用'isPartOfKey' = true 定义的任何一个（或多个字段）在调用'addEntity'之前都没有设置为非空值。

# android - 检查是否设置了设置

> ID：15764202
> 
> 赞同：0
> 
> 时间：2013-04-02T12:31:59.747
> 
> 标签：android

我需要我的应用程序正确的时间。所以，我想检查它是否没有设置自动时间，强制用户设置它。有什么办法可以检查吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:33:58.973

AFAIK，没有办法强迫用户在他们的设备上使用网络时间。即使您做到了这一点，网络时间本身也可能不正确。

更好的解决方案是从您的服务器获取时间并根据用户的时区进行调整。

# java - GWT 编译器错误：元素 'extend-property' 包含意外的属性 'fallback-value'

> ID：15764203
> 
> 赞同：0
> 
> 时间：2013-04-02T12:32:01.170
> 
> 标签：java, gwt, maven

当我尝试在服务器上运行我的应用程序时，出现以下错误：

```
Error:GWT Compiler: Element 'extend-property' beginning on line 27 contains unexpected attribute 'fallback-value'
Error:GWT Compiler: Failure while parsing XML
Error:GWT Compiler: at com.google.gwt.dev.util.xml.DefaultSchema.onUnexpectedAttribute(DefaultSchema.java:68)
Error:GWT Compiler: at com.google.gwt.dev.util.xml.Schema.onUnexpectedAttribute(Schema.java:80)
Error:GWT Compiler: at com.google.gwt.dev.util.xml.ReflectiveParser$Impl.startElement(ReflectiveParser.java:224)
Error:GWT Compiler: at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.startElement(AbstractSAXParser.java:506)
Error:GWT Compiler: at com.sun.org.apache.xerces.internal.parsers.AbstractXMLDocumentParser.emptyElement(AbstractXMLDocumentParser.java:182)
Error:GWT Compiler: at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanStartElement(XMLDocumentFragmentScannerImpl.java:1303)
Error:GWT Compiler: at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2717)
Error:GWT Compiler: at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:607)
Error:GWT Compiler: at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:489)
Error:GWT Compiler: at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:835)
Error:GWT Compiler: at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:764)
Error:GWT Compiler: at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:123)
Error:GWT Compiler: at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1210)
Error:GWT Compiler: at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:568)
Error:GWT Compiler: at com.google.gwt.dev.util.xml.ReflectiveParser$Impl.parse(ReflectiveParser.java:327)
Error:GWT Compiler: at com.google.gwt.dev.util.xml.ReflectiveParser$Impl.access$100(ReflectiveParser.java:48)
Error:GWT Compiler: at com.google.gwt.dev.util.xml.ReflectiveParser.parse(ReflectiveParser.java:398)
Error:GWT Compiler: at com.google.gwt.dev.cfg.ModuleDefLoader.nestedLoad(ModuleDefLoader.java:257)
Error:GWT Compiler: at com.google.gwt.dev.cfg.ModuleDefSchema$BodySchema.__inherits_begin(ModuleDefSchema.java:354)
Error:GWT Compiler: at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
Error:GWT Compiler: at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
Error:GWT Compiler: at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
Error:GWT Compiler: at java.lang.reflect.Method.invoke(Method.java:601)
Error:GWT Compiler: at com.google.gwt.dev.util.xml.HandlerMethod.invokeBegin(HandlerMethod.java:223)
Error:GWT Compiler: at com.google.gwt.dev.util.xml.ReflectiveParser$Impl.startElement(ReflectiveParser.java:270)
Error:GWT Compiler: at com.sun.org.apache.xerces.internal.impl.dtd.XMLDTDValidator.emptyElement(XMLDTDValidator.java:766)
Error:GWT Compiler: at com.google.gwt.dev.cfg.ModuleDefLoader$1.load(ModuleDefLoader.java:169)
Error:GWT Compiler: at com.google.gwt.dev.cfg.ModuleDefLoader.doLoadModule(ModuleDefLoader.java:283)
Error:GWT Compiler: at com.google.gwt.dev.cfg.ModuleDefLoader.loadFromClassPath(ModuleDefLoader.java:141)
Error:GWT Compiler: at com.google.gwt.dev.Compiler.run(Compiler.java:184)
Error:GWT Compiler: at com.google.gwt.dev.Compiler$1.run(Compiler.java:152)
Error:GWT Compiler: at com.google.gwt.dev.CompileTaskRunner.doRun(CompileTaskRunner.java:87)
Error:GWT Compiler: at com.google.gwt.dev.CompileTaskRunner.runWithAppropriateLogger(CompileTaskRunner.java:81)
Error:GWT Compiler: at com.google.gwt.dev.Compiler.main(Compiler.java:159)
Error:GWT Compiler: Unexpected error while processing XML
Error:GWT Compiler: at com.google.gwt.dev.util.xml.ReflectiveParser$Impl.parse(ReflectiveParser.java:351)
Error:GWT Compiler: Unexpected exception while processing element 'inherits'
Error:GWT Compiler: at com.google.gwt.dev.util.xml.DefaultSchema.onHandlerException(DefaultSchema.java:56)
Error:GWT Compiler: at com.google.gwt.dev.util.xml.Schema.onHandlerException(Schema.java:66)
Error:GWT Compiler: at com.google.gwt.dev.util.xml.HandlerMethod.invokeBegin(HandlerMethod.java:233) 
```

我猜这些都是maven引起的，所以这里是pom.xml：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>com.messagedna.dlp</groupId>
  <artifactId>DLPServer</artifactId>
  <version>1.0-SNAPSHOT</version>
  <packaging>jar</packaging>

  <name>DLPServer</name>
  <url>http://maven.apache.org</url>

  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>

  <dependencies>
      <dependency>
          <groupId>com.google.gwt</groupId>
          <artifactId>gwt-servlet</artifactId>
          <version>2.0.3</version>
      </dependency>
      <dependency>
          <groupId>com.google.gwt</groupId>
          <artifactId>gwt-user</artifactId>
          <version>2.0.3</version>
      </dependency>
      <dependency>
          <groupId>com.extjs</groupId>
          <artifactId>gxt</artifactId>
          <version>2.2.0</version>
      </dependency>
      <dependency>
          <groupId>commons-configuration</groupId>
          <artifactId>commons-configuration</artifactId>
          <version>1.9</version>
      </dependency>
      <dependency>
          <groupId>javax.mail</groupId>
          <artifactId>mail</artifactId>
          <version>1.4.5</version>
      </dependency>
      <dependency>
          <groupId>org.apache.james</groupId>
          <artifactId>apache-mime4j</artifactId>
          <version>0.6.1</version>
      </dependency>
      <dependency>
          <groupId>org.apache.tika</groupId>
          <artifactId>tika-parsers</artifactId>
          <version>1.2</version>
      </dependency>
      <dependency>
          <groupId>net.freeutils.jtnef</groupId>
          <artifactId>tnef</artifactId>
          <version>1.5.0</version>
      </dependency>
      <dependency>
          <groupId>com.messagedna-archive.mimeparser</groupId>
          <artifactId>MimeParser</artifactId>
          <version>1.0</version>
      </dependency>

      <dependency>
          <groupId>com.rabbitmq</groupId>
          <artifactId>amqp-client</artifactId>
          <version>3.0.4</version>
      </dependency>
      <dependency>
          <groupId>commons-lang</groupId>
          <artifactId>commons-lang</artifactId>
          <version>2.3</version>
      </dependency>

      <dependency>
          <groupId>junit</groupId>
          <artifactId>junit</artifactId>
          <version>4.10</version>
          <scope>test</scope>
      </dependency>
  </dependencies>
  <build>
        <outputDirectory>war/WEB-INF/classes</outputDirectory>
        <plugins>
          <plugin>
              <groupId>org.codehaus.mojo</groupId>
              <artifactId>gwt-maven-plugin</artifactId>
              <version>1.2</version>
              <executions>
                  <execution>
                      <goals>
                          <goal>compile</goal>
                          <goal>generateAsync</goal>
                          <goal>test</goal>
                      </goals>
                  </execution>
              </executions>
              <configuration>
                  <runTarget>Main.html</runTarget>
                  <style>OBFUSCATED</style>
                  <extraJvmArgs>-Xmx1024m -Xss1024k</extraJvmArgs>
                  <webappDirectory>war</webappDirectory>
              </configuration>
          </plugin>

          <plugin>
              <groupId>org.apache.maven.plugins</groupId>
              <artifactId>maven-war-plugin</artifactId>
              <version>2.1.1</version>
              <configuration>
                  <webappDirectory>war</webappDirectory>
                  <warSourceExcludes>.gwt-tmp/**</warSourceExcludes>
              </configuration>
          </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>3.0</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
        </plugins>
  </build>
</project> 
```

每当我尝试在谷歌中搜索时，我都没有找到解决方案，有些问题部分是这样的，但他们没有任何解决方案。

所以，请看看这个，如果你能提出任何解决这个问题的方法，我将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T12:36:28.463

来自 GWT 编译器的错误，它可能与 maven 无关，而是与 GWT XML 配置文件有关，例如 UIBinder 文件。

该消息告诉您，您在不希望出现的地方使用了名为“extend-property”的属性。所以在你的项目中寻找这个属性。如果它实际上在 UIBinder XML 文件中，请记住 XML 元素的属性名称必须与相应 java 类的属性名称相同（因此可能没有连字符）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T10:32:34.377

问题是它是来自 gwt-sdk 的 gwt-user 和另一个由依赖项添加的 gwt-user

# ios - iOS + gtm-oauth2 库：获取 401 无效请求

> ID：15764205
> 
> 赞同：2
> 
> 时间：2013-04-02T12:32:04.130
> 
> 标签：ios, objective-c, ruby-on-rails, oauth

我有一个 Ruby on Rails 应用程序，它是 OAuth 2.0 提供者，这要归功于 Doorkeeper gem 并且有一个 API。我正在构建一个将与 API 交互的 iPhone 客户端；它使用 gtm-oauth2 库进行身份验证过程。

我完成了 OAuth 身份验证部分，因此用户可以将帐户添加到 iPhone 应用程序。现在我需要从 iPhone（或 iPhone 模拟器）钥匙串中检索授权，以与我的主应用程序的私有 API 进行交互。这是我拥有的代码：

```
GTMOAuth2Authentication *auth = [_db catapultAuthenticaiton];
[GTMOAuth2ViewControllerTouch authorizeFromKeychainForName:kCatapultKeychainItemName
                                            authentication:auth];

NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"https://api.lvh.me:3000/api/clients/%@", accountName]];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
GTMHTTPFetcher *fetcher = [GTMHTTPFetcher fetcherWithRequest:request];
[fetcher setAuthorizer:auth];
[fetcher beginFetchWithCompletionHandler:^(NSData *data, NSError *error) {
    if (error != nil) {
#if DEBUG
        NSLog(@"Error fetching client: %@", error);
#endif
    }
}]; 
```

在 fetcher 完成处理程序中，当我尝试从钥匙串检索现有授权并对服务器执行 API 调用时，我收到 401 invalid_request 错误：

```
2013-04-02 11:08:55.546 Catapult for iOS[31776:c07] Error Error Domain=com.google.HTTPStatus Code=401 "The operation couldn’t be completed. (com.google.HTTPStatus error 401.)" UserInfo=0x7248010 {data=<7b226572 726f7222 3a22696e 76616c69 645f7265 71756573 74222c22 6572726f 725f6465 73637269 7074696f 6e223a22 54686520 72657175 65737420 6973206d 69737369 6e672061 20726571 75697265 64207061 72616d65 7465722c 20696e63 6c756465 7320616e 20756e73 7570706f 72746564 20706172 616d6574 65722076 616c7565 2c206f72 20697320 6f746865 72776973 65206d61 6c666f72 6d65642e 227d>}
Error data:
{
    error = "invalid_request";
    "error_description" = "The request is missing a required parameter, includes an unsupported parameter value, or is otherwise malformed.";
}
2013-04-02 11:08:55.546 Catapult for iOS[31776:c07] Error fetching client: Error Domain=com.google.HTTPStatus Code=401 "The operation couldn’t be completed. (com.google.HTTPStatus error 401.)" UserInfo=0x725bf00 {data=<7b226572 726f7222 3a22696e 76616c69 645f7265 71756573 74222c22 6572726f 725f6465 73637269 7074696f 6e223a22 54686520 72657175 65737420 6973206d 69737369 6e672061 20726571 75697265 64207061 72616d65 7465722c 20696e63 6c756465 7320616e 20756e73 7570706f 72746564 20706172 616d6574 65722076 616c7565 2c206f72 20697320 6f746865 72776973 65206d61 6c666f72 6d65642e 227d>, json={
    error = "invalid_request";
    "error_description" = "The request is missing a required parameter, includes an unsupported parameter value, or is otherwise malformed.";
}} 
```

我使用 GTMHTTPFetcherLogging 来记录发出的 HTTP 请求，这是记录的内容：

```
refresh token for oauth.lvh.me

2013-04-02 10:08:55 +0000
Request: POST https://oauth.lvh.me:3000/oauth/token
Request headers:
  Content-Type: application/x-www-form-urlencoded
  User-Agent: gtm-oauth2 com.catapult.Catapult-for-iOS/1.0

Request body: (257 bytes)
client_id=b29a572c2caa218b8591011e1cc67f0f3536ffe4c449ab7b806dd4d363681401&client_secret=_snip_&grant_type=refresh_token&refresh_token=_snip_

Response: status 401
Response headers:
  Cache-Control: no-store
  Connection: close
  Content-Type: application/json; charset=utf-8
  Pragma: no-cache
  Server: thin 1.5.1 codename Straight Razor
  Strict-Transport-Security: max-age=31536000
  X-Request-Id: 65b11f0a4fc06fa5562332252fd6cdcd
  X-Runtime: 0.212716
  X-UA-Compatible: IE=Edge

Response body: (162 bytes)
{
  "error_description" : "The request is missing a required parameter, includes an unsupported parameter value, or is otherwise malformed.",
  "error" : "invalid_request"
}
----------------------------------------------------------- 
```

这是服务器的日志：

```
Started POST "/oauth/token" for 127.0.0.1 at 2013-04-02 11:08:55 +0100
  Doorkeeper::AccessToken Load (0.2ms)  SELECT "oauth_access_tokens".* FROM "oauth_access_tokens" WHERE "oauth_access_tokens"."refresh_token" = 'ddb0a1bd3256e351ff7081300dc7ac73035e897ea93d36053b7fb87843015a51' LIMIT 1
  Doorkeeper::Application Load (0.1ms)  SELECT "oauth_applications".* FROM "oauth_applications" WHERE "oauth_applications"."uid" = 'b29a572c2caa218b8591011e1cc67f0f3536ffe4c449ab7b806dd4d363681401' AND "oauth_applications"."secret" = 'b0de316c20112708d04284f6867f5bb51c1d20c72415642b38f09a8faca966cd' LIMIT 1 
```

当请求有效时，服务器的日志如下所示：

```
Started POST "/oauth/token" for 127.0.0.1 at 2013-04-02 11:19:19 +0100
  Doorkeeper::AccessGrant Load (0.2ms)  SELECT "oauth_access_grants".* FROM "oauth_access_grants" WHERE "oauth_access_grants"."token" = '4391e187a0df16c56d1e6b16bf51340af8d677dbf625c495f50a249678e0502e' LIMIT 1
  Doorkeeper::Application Load (0.1ms)  SELECT "oauth_applications".* FROM "oauth_applications" WHERE "oauth_applications"."uid" = 'b29a572c2caa218b8591011e1cc67f0f3536ffe4c449ab7b806dd4d363681401' AND "oauth_applications"."secret" = 'b0de316c20112708d04284f6867f5bb51c1d20c72415642b38f09a8faca966cd' LIMIT 1
  SQL (1.0ms)  UPDATE "oauth_access_grants" SET "revoked_at" = '2013-04-02 10:19:19' WHERE "oauth_access_grants"."id" = 7
  Doorkeeper::AccessToken Load (0.2ms)  SELECT "oauth_access_tokens".* FROM "oauth_access_tokens" WHERE "oauth_access_tokens"."application_id" = 1 AND "oauth_access_tokens"."resource_owner_id" = 266 AND "oauth_access_tokens"."revoked_at" IS NULL ORDER BY created_at desc LIMIT 1 
```

所以这里显然有问题......我不知道问题是来自服务器还是iOS客户端，但我的直觉告诉我它来自客户端。

请问有什么线索吗？

# c# - 如何为在 asp.net mvc web api 中返回动态的 OData 服务启用排序

> ID：15764215
> 
> 赞同：4
> 
> 时间：2013-04-02T12:32:37.393
> 
> 标签：c#, dynamic, asp.net-mvc-4, asp.net-web-api, odata

这是我的控制器的代码：

```
public class RegularGrigController : ApiController
    {
        // GET api/regulargrig
        public IEnumerable<string> Get()
        {
            return EntityHelper.GetEntities().Select(t => t.ModelName());
        }

        public PageResult<dynamic> Get(string entityName, ODataQueryOptions options)
        {
            var query = EntityHelper.GetQueryable(entityName).Select("new (Id, SysName)"); // Dynamic queryable

            IQueryable results = options.ApplyTo(query); // Exception here

            return new PageResult<dynamic>(results as IEnumerable<dynamic>, Request.GetNextPageLink(), Request.GetInlineCount());
        }
    } 
```

当我尝试拨打这个电话时`/api/RegularGrig?entityName=SecurityPrincipal&$orderby=Id`

我收到此异常

```
Type 'System.Object' does not have a property 'Id' 
```

那么，有没有办法对动态数据进行排序/过滤？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T12:51:17.130

这段代码现在对我有用：

```
public PageResult<dynamic> Get(string entityName)
{
    var query = EntityHelper.GetQueryable(entityName).Select("new (Id, SysName)");
    var modelBuilder = new ODataConventionModelBuilder();
    modelBuilder.AddEntity(query.ElementType);
    var model = modelBuilder.GetEdmModel();
    var options = new ODataQueryOptions(new ODataQueryContext(model, query.ElementType), this.Request);
    IQueryable results = options.ApplyTo(query);

    return new PageResult<dynamic>(results as IEnumerable<dynamic>, Request.GetNextPageLink(), Request.GetInlineCount());
} 
```

# php - php上传奇怪行为

> ID：15764216
> 
> 赞同：1
> 
> 时间：2013-04-02T12:32:38.127
> 
> 标签：php, upload

我正在测试我制作的一个小应用程序，当上传多个超过一定大小的文件时，我看到了一个奇怪的行为。

我已经阅读[了这里提到的错误](https://bugs.php.net/bug.php?id=13029)，但很久以前。奇怪的是，我遇到了与那个人在错误中提到的相同的行为。

1.  当我上传时，比如说 10 个小文件（每个 50-300kb）没有任何问题并且应用程序可以正常工作。
2.  当我上传两个 1.5mb 的文件时，应用程序输出一条错误消息，因为应用程序允许的最大大小为 512kb（php.ini 中为 2mb）。
3.  当我上传多个超过 7 或 8 mb 的文件时（我没有尝试找到确切的大小），php 崩溃而没有给出错误。由于我在开发服务器中，因此错误已打开，通常会显示致命错误。
4.  当我上传 1 个文件（比如 25mbs）时，我仍然有同样的错误。

好吧，我说它崩溃是因为当我尝试`var_dump($_FILES)`甚至`var_dump($_POST)`数组返回 null 时，尽管它应该至少具有提交名称或其他名称。

我检查了 tmp 文件夹，文件也没有存储在那里。然而，另一个奇怪的行为是，当我上传超过这个神秘限制的文件时，浏览器似乎正在上传（我看到页面需要一段时间才能加载），但是，如前所述，php 表现得好像它什么都不知道。

这种奇怪行为的原因是什么？

PS：我正在 Windows 7 64 位上的本地主机（wampserver）上工作。

**编辑**

找到了解决方案：

将 post_max_size 从 8mb 更改为其他内容解决了我的问题。

以下是[手册](http://www.php.net/manual/en/ini.core.php#ini.post-max-size)中的引文，供需要的人使用：

> 设置允许的帖子数据的最大大小。此设置也会影响文件上传。要上传大文件，该值必须大于upload_max_filesize。如果您的配置脚本启用了内存限制，那么 memory_limit 也会影响文件上传。一般来说，memory_limit 应该大于 post_max_size。使用整数时，该值以字节为单位。也可以使用本常见问题解答中描述的速记符号。如果 post 数据的大小大于 post_max_size，则 $_POST 和 $_FILES 超全局变量为空。这可以通过多种方式进行跟踪，例如通过将$_GET 变量传递给处理数据的脚本，即，然后检查是否设置了$_GET['processed']。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:35:51.193

那是错误的，因为您的上传限制非常少 - `upload_max_filesize or post_max_size` . 在 php.ini 中，只需将两者的值都增加到 200MB，您将不会收到此错误

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T12:36:34.347

在服务器中，发送帖子是有限制的。你应该是512kb。你可以检查 phpinfo();

我认为它是 php.ini upload_max_filesize 中的参数。更改为更大的尺寸。

# sql-server-2005 - 替换大括号之间的文本并删除字符串中的 <>

> ID：15764227
> 
> 赞同：0
> 
> 时间：2013-04-02T12:33:35.087
> 
> 标签：sql-server-2005

如何在 SQL 查询中使用 replace 语句来替换/删除大括号内的所有文本和大括号本身。我的数据库中有很多类似的带有大括号的文本，我可以使用正则表达式或类似的东西吗？

例如`@DN = value1!!{value2}<value3>` --->`VALUE1!!VALUE3` 字符数是非常动态的，所以不能用数字进行 charindex。
从之前的讨论中，我使用了这个

```
STUFF(DN, PATINDEX('%{ }%', DN), LEN(DN), '') 
```

这只是赋予`NULL`价值。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:54:18.670

试试这个：

```
Declare @DN varchar(100)

Set @DN = 'value1!!{value2}<value3>'

Select Left(@DN, CHARINDEX('{',@DN) -1) + REPLACE(REPLACE(SUBSTRING(@DN, CHARINDEX('}', @DN)+1, (LEN(@DN) - CHARINDEX('}', @DN))), '<',''),'>','') 
```

它很乱，但会给你。

`value1!!<value3>`

# java - 比较两个数字字符串值

> ID：15764228
> 
> 赞同：11
> 
> 时间：2013-04-02T12:33:36.960
> 
> 标签：java

我有一个简单的疑问。如果有人帮助我，那就太好了。

我有两个字符串：

```
String string1 = "4"; // and 
String string2 = "04"; 
```

两个值都相等但是如何在java中比较它们？我们有`equals`和`equalsIgnoreCase`用于比较字符串的 alpha 值，类似地如何比较数值。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-02T12:36:08.900

```
Integer.parseInt("4") == Integer.parseInt("04") 
```

这就对了。[`Integer.parseInt(String)`](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#parseInt%28java.lang.String%29)您可以使用返回`int`类型的方法将数字字符串转换为整数。然后比较是一样的`4 == 4`。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-12-12T10:55:47.023

不要忘记`BigInteger`for 很长的值。

```
return new BigInteger(s1).compareTo(new BigInteger(s2)); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-04-02T12:35:20.197

```
Integer.valueOf(string1).equals(Integer.valueOf(string2)); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-02T12:36:31.097

使用 Integer 类将字符串转换为整数。

[http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#parseInt%28java.lang.String%29](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#parseInt%28java.lang.String%29)

```
Integer.parseInt(string1) == Integer.parseInt(string2) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-06-28T12:06:53.990

完全跳过将其解析为 int 以处理任意大的数字，仅比较字符串。作为奖励，它也适用于十进制数（除非有尾随零，你可能可以用锚定字符串结尾来做类似的事情）。

如果您确定没有空格字符，则可以省略修剪

```
 String string1 = "4"; // and
    String string2 = "04";

    String noLeadingZeroes1 = string1.trim().replaceFirst("^0+(?!$)", "");
    String noLeadingZeroes2 = string2.trim().replaceFirst("^0+(?!$)", "");

    System.out.println(noLeadingZeroes1.equals(noLeadingZeroes2)); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-04T15:31:59.383

比较是在字符的基础上进行的。所以 '2' > '12' 是真的，因为比较将发生为 '2' > '1' 并且按字母顺序 '2' 总是大于 '1' 作为 unicode。所以它会成真。

# ruby - 在不同的对象方法中使用不同对象的属性

> ID：15764230
> 
> 赞同：1
> 
> 时间：2013-04-02T12:33:39.677
> 
> 标签：ruby

我需要的基本上是在方法中使用一个文件中的变量。让我解释

假设我们有

```
class Game
attr_accessor :number, :object

end 
```

其中 number 只是一些数字，而 object 是我定义的其他一些类的对象，我们将其命名为 Player 类。现在我们创建另一个文件，它需要 Game 类，它是这样的：

```
require './Game.rb'
require './Player.rb'

myGame = Game.new
myGame.number = 1
myGame.object = Player.new 
```

现在是重要时刻。在 Player 类中定义的方法中，我想使用 myGame.number 属性。比如像这样

```
class Player
attr_accessor :some_var

    def method
        @some_var = myGame.number
    end
end 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:58:48.143

您的玩家应该对正在玩的游戏有参考。例如

```
class Game
    attr_accessor :number
    attr_reader :my_player

    def my_player=(player)
        player.my_game = self
        @my_player = player
    end
end

class Player
    attr_accessor :some_var, :my_game

  def method
     @some_var = @my_game.number if @my_game
  end
end

myGame = Game.new
myGame.number = 1
myGame.my_player = Player.new()

myGame.my_player.method

puts myGame.my_player.some_var 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:00:57.537

除了 toch 的回答，您可以在设置玩家访问器时保留对游戏对象的引用。除了使用自动访问器，您可以使用[get_set_ 访问器语法](http://www.rubyist.net/~slagell/ruby/accessors.html)在访问器中包含自定义代码，这将在右值上设置引用。

# python - 什么是 pyximport，我应该如何使用它？

> ID：15764232
> 
> 赞同：26
> 
> 时间：2013-04-02T12:33:46.013
> 
> 标签：python, python-2.7, pydev, cython

我正在使用 cython 为数学模型生成更快的代码。我很难编译代码，但不知何故我设法使用 .bat 这样做：

```
setlocal EnableDelayedExpansion

CALL "C:\Program Files\Microsoft SDKs\Windows\v7.0\Bin\SetEnv.cmd" /x64 /release
set DISTUTILS_USE_SDK=1

C:\Python27\python.exe C:\gcsilve\trunk\myproject\myproject\cythonsetup.py build_ext --inplace

PAUSE 
```

它运行正常...

我的问题是关于 pyximport。我有其他人使用 pyximport.install() 编写的旧代码。我无法弄清楚它的作用以及为什么要使用它，因为我已经在自己编译代码了。那么，有人可以用一种非常简单（对于傻瓜）的方式向我解释 pyximport 的作用吗？

附加信息：我有一个项目1，使用 cython。我有一个 project2，它引用了 project1。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-02T12:43:12.643

pyximport 是 Cython 的一部分，它在某种程度上被用来代替`import`。

如果您的模块不需要任何额外的 C 库或特殊的构建设置，那么您可以使用 pyximport 模块在导入时直接加载 .pyx 文件，而无需编写 setup.py 文件。它可以这样使用：

```
>>> import pyximport; pyximport.install()
>>> import helloworld
Hello World 
```

直接来自[Cython 文档](http://docs.cython.org/src/reference/compilation.html#compiling-with-pyximport)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-07-05T13:13:54.260

您可以使用`pyximport`自动重新编译和重新加载您的`.pyx`模块。

删除`setup.py`已生成的内容，否则您可能会加载该扩展模块。 `pyximport`不使用`setup.py`。

让我们假设 a`hello.pyx`带有一个函数`mean2`。

启动 IPython。

```
In [1]: import pyximport
In [2]: pyximport.install(reload_support=True)
In [3]: from importlib import reload
In [4]: import hello
In [5]: hello.mean2(2,3) 
```

结果：

```
Out [5]: 2.5 
```

离开该窗口并转到您的编辑器进行更改`hello.pyx`。

然后回到 IPython 并输入

```
In [6]: reload(hello);import hello;hello.mean2(2,3) 
```

您将看到一些关于重新编译的文本。然后是新结果：

```
Out[6]: 'Mean of 2 and 3 is 2.5' 
```

# blackberry - BlackBerry 设备中的 EditField 问题

> ID：15764236
> 
> 赞同：0
> 
> 时间：2013-04-02T12:33:51.787
> 
> 标签：blackberry, blackberry-simulator, blackberry-editfield

我`EditField`在我的应用程序中使用。使用**虚拟键盘**`EditField`时可编辑，但需要长按才能使用**查询**键盘进行编辑。我尝试了所有可能的方法，但没有找到导致问题的原因。

 ****我正在**Torch 9800**中对其进行测试。有什么线索吗，欢迎欢迎。

```
//FOR NICKNAME SEARCH
        nicknameSearchHFM = new HorizontalFieldManager(HorizontalFieldManager.USE_ALL_WIDTH){
            protected void sublayout(int width, int height) {
                setPositionChild(getField(0),0,10);
                layoutChild(getField(0),150,height+5);

                setPositionChild(
                        getField(1), Display.getWidth()/2+35, 
                        0);
                layoutChild(
                        getField(1), 
                        width+16, 
                        height);    

                setExtent(width, 50);
            }      
        };

        _nickname = new EditField("" ,_initialName){
            protected void onFocus(int direction) {
                super.onFocus(direction);   
                this.setText("");
                invalidate();
            }

        };
        //_nickname.setMargin(10,50,5,5);
        _nickname.setBorder(roundedBorder);

        _findByNickName = new ButtonField("  Search " ,ButtonField.CONSUME_CLICK);
        _findByNickName.setMargin(7,5,5,5);
        _findByNickName.setChangeListener(this);
        nicknameSearchHFM.setMargin(20,0,0,10);
        nicknameSearchHFM.add(_nickname);
        nicknameSearchHFM.add(_findByNickName); 
```****

# github - 是否可以在要点的降价文件中建立与图像的相对链接？

> ID：15764242
> 
> 赞同：127
> 
> 时间：2013-04-02T12:34:00.333
> 
> 标签：github, markdown, gist

我有一个包含降价文件和图像的要点。

有没有办法建立到这个图像的相对链接？类似的东西`![My image](image.png)`而不是`![My image](https://gist.github.com/user/605560c2961cb3025038/raw/b75d2...6e8/img.png)`

这是[一个例子](https://gist.github.com/alienlebarge/605560c2961cb3025038)

* * *

## 回答 #1

> 赞同：211
> 
> 时间：2016-03-30T15:32:06.243

到目前为止，在存储库和 wiki 中，相对图像链接都对我有用。我正在使用这样的语法：

```
![Kiku](images/Kiku.jpg) 
```

这是一个例子：

[https://github.com/mark-anders/relative-image-url](https://github.com/mark-anders/relative-image-url)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-03-26T11:23:03.057

根据[http://blog.rodneyrehm.de/archives/35-Including-Data-From-Github.html](http://blog.rodneyrehm.de/archives/35-Including-Data-From-Github.html)，使用 [https://gist.github.com/user/605560c2961cb3025038/raw/b75d2 的问题... 6e8/img.png](https://gist.github.com/user/605560c2961cb3025038/raw/b75d2...6e8/img.png)

是`b75d2...6e8`每个文件的部分不同（快速实验确认它是 git blob id）。但是，您可以删除该部分，从而生成指向最新版本的 URL：

```
https://gist.github.com/user/605560c2961cb3025038/raw/img.png 
```

或举一个工作示例：

```
https://gist.githubusercontent.com/cben/46d9536baacb7c5d196c/raw/dodgetocat_v2.png 
```

### 相对路径？

这也可以作为相对路径`raw/dodgetocat_v2.png`！
但是（截至 2017 年底）github 可以从 2 个 URL 呈现相同的要点：

*   从[https://gist.github.com/cben/46d9536baacb7c5d196c/](https://gist.github.com/cben/46d9536baacb7c5d196c/)（带有斜杠）查看时，附加了相对路径，解析为[https://gist.github.com/cben/46d9536baacb7c5d196c/raw/dodgetocat_v2.png](https://gist.github.com/cben/46d9536baacb7c5d196c/raw/dodgetocat_v2.png) - 工作:-)

*   从[https://gist.github.com/cben/46d9536baacb7c5d196c](https://gist.github.com/cben/46d9536baacb7c5d196c)（无斜杠）查看时，相对路径会替换 URL 的最后一部分，解析为[https://gist.github.com/cben/raw/dodgetocat_v2 .png](https://gist.github.com/cben/raw/dodgetocat_v2.png) - 坏了:-(

[更新于 2017 年 12 月。以前的原始文件问题不再发生，`Content-Type: application/octet-stream`并且重写`src`图像的属性`camo.githubusercontent.com`不再发生，至少对于来自相同要点的图像不会发生。]

**唉，我们不能只使用第一个 URL 并相信它始终有效。**

*   目前，表单既不返回重定向，也不提供 rel=canonical 链接。我不会打赌 Github 永远不会改变这一点！
*   所有内部 gist 链接（例如，来自用户页面[https://gist.github.com/cben/](https://gist.github.com/cben/)）省略尾部斜杠 :-(
*   Google 搜索结果中的要点省略了斜杠 :-(

*（您可以使用仅在没有*斜杠的情况下`46d9536baacb7c5d196c/raw/dodgetocat_v2.png`才能工作的相对路径，但这也是有问题的想法，而且不太值得 - 并不比完整 URL 更灵活。）

 *### 使用代理？

两者都可以通过修复 Content-Type 的代理来解决，例如 Rawgit 或 Bl.ocks.org（不是 Github，不要滥用它们）。不幸的是，Rawgit 不呈现 Markdown，仅按原样提供文件，而 Bl.ocks.org 确实呈现 Markdown，但 URL 结构使得相对链接不起作用。这意味着您可以在 Markdown 中引用完整的外部 URL，或者在 HTML 中引用相对的 :-(

请参阅[https://gist.github.com/cben/46d9536baacb7c5d196c/](https://gist.github.com/cben/46d9536baacb7c5d196c/)分叉您的要点，并通过以下方式查看其 index.html：

*   [http://rawgit.com/cben/46d9536baacb7c5d196c/raw/index.html](http://rawgit.com/cben/46d9536baacb7c5d196c/raw/index.html)
*   [http://rawgit.com/cben/46d9536baacb7c5d196c/raw/](http://rawgit.com/cben/46d9536baacb7c5d196c/raw/)
*   [http://bl.ocks.org/cben/raw/46d9536baacb7c5d196c](http://bl.ocks.org/cben/raw/46d9536baacb7c5d196c)
*   [http://bl.ocks.org/cben/46d9536baacb7c5d196c](http://bl.ocks.org/cben/46d9536baacb7c5d196c)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T19:02:40.700

是的，相对链接对我有用。我正在使用 pancake.io 来托管我的页面。 [http://pancake.io/2c8aa8/topics/cpp/cpp.md](http://pancake.io/2c8aa8/topics/cpp/cpp.md)

该页面上的图像位于`cpp`文件夹中。

用于第一张图片的降价代码是

```
![C++ Var Types](basic_cpp_var_types.png) 
```

第二张图片使用的markdown代码（实际上是html）是

```
<div style='float: center'>
  <img style='width: 600px' src="prefixpostfixincrement.png"></img>
</div> 
```

*注意：我错过了要点部分。如果 gist 不支持 markdown 相对图像路径语法，请尝试 html 方式。*

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-09T15:15:54.570

刚刚测试...我无法在 github wiki 上使用相对 url。

我必须将图像添加到 wiki repo，然后浏览 repo 并让 github 显示给我（这样我就可以获取 url）。然后在降价中使用完整的 url。但幸运的是，网址很容易预测：`https://github.com/*username*/*reponame*/wiki/*imagename.png*`

我将此问题提交给 github 支持。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-08-20T16:13:09.053

不，markdown 中图像的相对 URL 不起作用，因此您必须坚持使用长的静态 URL：

[https://gist.github.com/mattborn/c346c8689a5eaf86e823](https://gist.github.com/mattborn/c346c8689a5eaf86e823)

但是，某些文件的相对 URL 有效：

[http://bl.ocks.org/mattborn/c346c8689a5eaf86e823](http://bl.ocks.org/mattborn/c346c8689a5eaf86e823)*

# oracle - 如果确实需要，可以在表上创建多个索引吗

> ID：15764243
> 
> 赞同：4
> 
> 时间：2013-04-02T12:34:01.027
> 
> 标签：oracle, indexing

我有一个有 7 列的表。

它将包含大量数据——每月将添加超过 170 万条记录。

在这 7 列中，有 5 列是我将在我的查询的 WHERE 子句中以不同组合对该表使用的列。

可以为这些可能的组合创建不同的索引吗？

我问这个问题是因为如果我这样做，这张表上会有超过 10 个索引，我不确定这是否是个好主意。

另一方面，我害怕在没有索引的情况下查询包含大量数据的表。

这是表格：

```
CREATE TABLE AG_PAYMENTS_TO_BE  
(
  PAYMENTID NUMBER(15, 0) NOT NULL  
, DEPARTID NUMBER(3,0)  
, PENSIONERID NUMBER(11, 0) NOT NULL  
, AMOUNT NUMBER(6, 2)  
, PERIOD CHAR(6 CHAR)  
, PAYMENTTYPE NUMBER(1,0)  
, ST NUMBER(1, 0) DEFAULT 0   
, CONSTRAINT AG_PAYMENTS_TO_BE_PK PRIMARY KEY  
  (  
    PAYMENTID  
  )  
  ENABLE  
); 
```

可能的查询：

1.  从 AG_PAYMENTS_TO_BE 中选择金额，其中 ST=0 且 DEPARTID=112 且 PERIOD='201207'；
2.  从 AG_PAYMENTS_TO_BE 中选择金额，其中 ST=0 且 PENSIONERID=123456 且 PERIOD='201207'；
3.  从 AG_PAYMENTS_TO_BE 中选择金额，其中 ST=0 且 PENSIONERID=123456 且 PERIOD='201207' 且 PAYMENTTYPE=1；
4.  从 AG_PAYMENTS_TO_BE 中选择金额，其中 ST=0 且 DEPARTID=112 且 ST=0；
5.  从 AG_PAYMENTS_TO_BE 中选择金额，其中 ST=0 且 PENSIONERID=123456；

等等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T14:29:37.603

暂时忽略索引跳过扫描*，以便查询使用索引：

*   前导索引列必须在查询中列出
*   他们必须使用精确连接进行比较（即使用`=`、非`<`或）`>``like`

例如，具有复合索引的表`(a, b)`可以在以下查询中使用该索引：

*   `a = :b1 and b >= :b2`
*   `a = :b1`

但不是：

*   `b = :b2`

因为列`b`在索引中列在第二位。* 在某些情况下，可以通过[索引跳过扫描](http://www.oracle-base.com/articles/9i/index-skip-scanning.php)在这种情况下使用索引。这是跳过索引中的前导列的地方。但是，第一列需要相对较少的不同值，这并不经常发生（根据我的经验）。

请注意，仅使用其中一些前导列的查询可以使用“更大”的索引。所以在上面的例子中，在 just 上的索引`a`是多余的，因为显示的查询可以使用在 上的索引`a, b`。但是，关于 just 的索引`b`可能很有用。

添加的索引越多，插入/更新/删除的速度就越慢，因为索引必须与表同时维护。因此，您的目标应该是减少索引的数量，除非添加一个新的索引有显着的查询优势。这是您必须在您的环境中衡量的东西，以确定确切的成本/收益。

请注意，具有相似列的多个索引可能会导致[选择错误的索引](http://jonathanlewis.wordpress.com/2013/03/31/index-selectivity/)。因此，当您有许多类似的索引时，选择可能会有不利之处。解析时间也有一点开销，因为 Oracle 在选择执行计划时需要考虑更多选项。

查看您的查询，我相信您只需要以下索引：

*   `st, departid, period`
*   `st, pensionerid, period`

您可能还希望`amount`在这些末尾添加，以便可以从索引中完全回答您的查询，从而为您节省表查找。如果这些列是其他表的外键，您可能还需要更多索引，[以防止锁定问题](http://asktom.oracle.com/pls/asktom/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:292016138754)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T14:00:57.860

这个决定很大程度上取决于每列中不同值的预期数量，因此每个可能的索引的选择性。

我在做决定时会考虑的事情：

1.  显然，PAYMENTTYPE 和 ST 字段每个最多可保存~~10~~ 19 个不同的值，如果我们牢记您的预期数据量（约 4 亿行），这是非常不具选择性的，因此它们不会对您有太大帮助。

2.  然而，他们可能会成为很好的候选人[`list partitioning`](http://docs.oracle.com/cd/B28359_01/server.111/b32024/partition.htm#i460951)。

3.  我还会考虑将 PERIOD CHAR(6 CHAR) 切换到 DATE 并在 period+st/paymenttype 上创建一个复合范围列表分区。

4.  DEPARTID - 如果您有数百个部门，那么它可能是索引候选者，但如果只有几十个 - 那么完整扫描可能会执行得更快。

5.  PENSIONERID 似乎是一个高选择性字段，因此我会考虑在其上创建一个单独的索引，并将其包含在 PERIOD+PENSIONERID 的复合索引中（按该字段顺序）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T12:48:38.707

我认为您应该创建一些组合索引（例如（'ST' and 'PERIOD'）和（'ST' and 'PENSIONERID'）。这将加快您的大多数示例查询......

# python - Django ORM 查询 GROUP BY 由 MAX 组合的多个列

> ID：15764245
> 
> 赞同：12
> 
> 时间：2013-04-02T12:34:02.500
> 
> 标签：python, mysql, orm, django-models

我正在将 Django 与 MySQL 一起使用。我有一个类似于以下的模型：

```
class MM(models.Model):
    a = models.IntegerField()
    b = models.IntegerField()
    c = models.DateTimeField(auto_now_add=True) 
```

我有多个`a`等于 的行`b`，我想执行以下 SQL 查询：

```
SELECT a, b, MAX(c) AS max FROM MM GROUP BY b, a; 
```

Django ORM 如何做到这一点？我已经尝试过使用注释的不同方法，但到目前为止还算幸运。

非常感谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-05-14T16:07:03.963

我认为您可以执行以下操作：

```
MM.objects.all().values('b', 'a').annotate(max=Max('c')) 
```

请注意，您需要导入一些东西才能使用 Max：`from django.db.models import Max`

`values('b', 'a')`将给出`GROUP BY b, a`并`annotate(...)`计算查询中的 MAX。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-16T11:36:35.253

你也可以试试这个

```
from django.db.models import Max

mm_list=MM.objects.all().values('b','a').annotate(max=Max('c'))
for mm in mm_list:
    a=mm['a']
    b=mm['b']
    max=mm['max'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-15T22:12:05.883

按两个字段对字段组求和。

```
from django.db.models import Sum 
```

SQL

```
select caja_tipo_id, tipo_movimiento, sum(monto) from config_caja group by caja_tipo_id, tipo_movimiento 
```

姜戈

```
objs = Caja.objects.values('caja_tipo__nombre','tipo_movimiento').order_by().annotate(total=Sum('monto')) 
```

# c++ - 在 Arduino 上使用 atoi 和 itoa 从 int 转换为字节数组，然后返回 int 进行传输

> ID：15764247
> 
> 赞同：0
> 
> 时间：2013-04-02T12:34:04.413
> 
> 标签：c++, c, arduino, itoa

我正在转换一个带符号的 int 以通过 Arduino Wire 作为多个字节发送，所以我执行了以下操作：

下面的代码是我实现的调试，你可以复制到 Arduino IDE 中查看打印输出。

我无法理解的是 itoa 如何创建一个大于声明大小的数组，而**sizeof()**无法检测到该数组。我声明的数组大小为**2**，但 itoa 使用大小为**6**的数组来存储其结果！

```
Serial.println("|----START DEBUG------|");
int Sensor1Data=-32760;
Serial.print("Sensor1Data: ");Serial.println(Sensor1Data);
byte Sensor1CharMsg[2];

Serial.println("|----STAGE 2------|");
Serial.print("Array Size b4 itoa: ");Serial.println(sizeof(Sensor1CharMsg));
itoa(Sensor1Data,(char*)Sensor1CharMsg,10);
Serial.print("Array Values up to 10 elements: ");Serial.write(Sensor1CharMsg,10); Serial.println("");
Serial.print("Array Size a4tr itoa: ");Serial.println(sizeof(Sensor1CharMsg));

Serial.println("||||||| ARRAY OUTPUT|||||||");
Serial.print("Sensor1CharMsg[0]): ");  Serial.println(Sensor1CharMsg[0]);
Serial.print("Sensor1CharMsg[1]): ");  Serial.println(Sensor1CharMsg[1]);
Serial.print("Sensor1CharMsg[2]): ");  Serial.println(Sensor1CharMsg[2]);
Serial.print("Sensor1CharMsg[3]): ");  Serial.println(Sensor1CharMsg[3]);
Serial.print("Sensor1CharMsg[4]): ");  Serial.println(Sensor1CharMsg[4]);
Serial.print("Sensor1CharMsg[5]): ");  Serial.println(Sensor1CharMsg[5]);
Serial.println("|||||||END ARRAY OUTPUT|||||||"); 
```

传输后：

```
int Sensor2Data = atoi((char*)Sensor1CharMsg);
Serial.print("Sensor2Data: ");Serial.println(Sensor2Data); 
```

结果

```
|----START DEBUG------|
Sensor1Data: -32760
|----STAGE 2------|
Array Size b4 itoa: 2
-32760
Array Size a4tr itoa: 2
||||||| ARRAY OUTPUT|||||||
Sensor1CharMsg[0]): 45
Sensor1CharMsg[1]): 51
Sensor1CharMsg[2]): 50
Sensor1CharMsg[3]): 55
Sensor1CharMsg[4]): 54
Sensor1CharMsg[5]): 48
|||||||END ARRAY OUTPUT||||||| 
```

传输后

```
Sensor2Data: -32760 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T12:37:36.033

您正在覆盖内存，调用未定义的行为。

此外，`itoa()`不完全创建一个“字节数组”，它创建一个字符串。该名称的意思是“整数到 ASCII”。[文档](http://www.nongnu.org/avr-libc/user-manual/group__avr__stdlib.html#ga4f6b3dd51c1f8519d5b8fce1dbf7a665)说：

> 调用者负责提供足够的存储 [...]

最后，字符串的长度是由 计算的`strlen()`，而不是由计算的`sizeof`。

# objective-c - 我该如何解决这种错误

> ID：15764248
> 
> 赞同：-2
> 
> 时间：2013-04-02T12:34:04.537
> 
> 标签：objective-c, xcode

```
-(void)GrabbingProcess:(void (^)())block;
{
    AssertNonMainThread;
    [[NSOperationQueue mainQueue] addOperationWithBlock:^{
        if (self.OtherGrabbingIndicator == 0)
        {
            self.isStillLoading = true;
        }
        self.OtherGrabbingIndicator ++;
        AssertMainThread
    }];

    block();

    [[NSOperationQueue mainQueue] addOperationWithBlock:^{
        [self updateStatusAtList];
        self.OtherGrabbingIndicator --;
        if (self.OtherGrabbingIndicator ==0)
        {
            self.isStillLoading = false;
        }
        AssertMainThread
    }];
} 
```

基本上，代码设置为 self.OtherGrabbingIndicator++ 将始终与 self.OtherGrabbingIndicator 平衡--

我想不出它会失败的任何原因。它不会失败。

现在，偶尔会失败。self.OtherGrabbingIndicator 将悬停在 2 或 1 并且所有线程都已停止。不知何故，一些++没有被--平衡。但怎么可能呢？

我不知道怎么做。

我检查了一下，没有办法 self.OtherGrabbingIndicator 在其他任何地方更改。

我打算做的一件事是在某个数组中添加一个块的值并适当地删除这些块。问题是如果我知道块，我怎么知道块代表什么代码？

以前可以正常工作，现在不行了。这让我抓狂。

我能想到的唯一方法是 block() 以某种方式无法完成，但哪个块无法完成，这怎么会发生？

如果我按暂停，所有线程都是空的。

更新：将 @synchronized() 添加到 ++ 和 -- 解决了问题。但是，这没有任何意义。

如果没有@synchronized，它仍然可以工作，因为 mainQueue 只有 1 个最大线程并且一次执行一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:09:26.580

不幸的是，我没有给你最终的答案。但是，我最近在 NSOperations 上确实遇到了类似的事情，我将与您分享。

关于您的代码的几个问题：

addOperationWithBlock 中的第一个块是否需要在执行“block()”调用之前完成？

第二个块是否需要在执行之前完成其他两个操作？

在我的例子中，操作以正确的顺序添加，但基于操作队列的线程调度（低于需要操作结果的其他线程），它们执行得太晚并导致代码失败。

我不知道你的抓取过程有多关键，但在我的情况下，在我的应用程序的时间关键部分使用 NSOperation 从来没有 100% 的时间工作。因此，我重新设计为使用我们可以控制优先级的 NSThread，从那时起一切正常。

经过这次体验，我得出的结论是 NSOperation 是一个很棒的工具，因为它使用简单，但在时间紧迫的情况下没有多大帮助，因为它并不是真正适用于该用例。

希望这会有所帮助，祝你好运。

# c# - C# 中 TransactionScope 的奇怪行为

> ID：15764254
> 
> 赞同：4
> 
> 时间：2013-04-02T12:34:14.337
> 
> 标签：c#, .net, transactionscope

我的应用程序已启用 `transaction`范围。以下代码已用于激活 Scope，已激活一小时。然而，它已经在10分钟内结束。

```
using (TransactionScope scope = new TransactionScope(TransactionScopeOption.Required,TimeSpan.FromHours(1)))
{
   // my code goes here.
} 
```

什么是奇怪的行为？为什么它的寿命不超过一小时？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T12:41:23.930

您必须在您的`app.config`（或`web.config`）中扩展默认事务超时：

```
<configuration>
 <system.transactions>
  <defaultSettings timeout="00:03:00" />
 </system.transactions>
</configuration> 
```

您还必须在机器级别更改配置，即您也必须编辑`machine.config`文件。默认最大事务超时为[10 分钟](http://msdn.microsoft.com/en-us/library/system.transactions.configuration.machinesettingssection.maxtimeout.aspx)机器级别

例如，我在 machine.config 文件的末尾添加了以下 XML：

```
 <system.transactions>
    <machineSettings maxTimeout="100.23:59:59" />
  </system.transactions> 
```

该`machine.config`文件位于`C:\Windows\Microsoft.NET\Framework\[framework version]\Config`目录中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T12:38:01.900

TransactionScope 的默认最大超时为 10 分钟。如果您以较大的超时时间创建它，无论如何它都会默默地将其减少到 10 分钟。这是一个非常令人惊讶的行为，但代码正是这样做的：

```
public TransactionScope(TransactionScopeOption scopeOption, TimeSpan scopeTimeout)
{
     ...
     timeout = TransactionManager.ValidateTimeout(scopeTimeout);
     ...
} 
```

ValidateTimeout 将其减少到`TransactionManager.MaximumTimeout`

```
internal static TimeSpan ValidateTimeout(TimeSpan transactionTimeout)
{
    ...
    if (TransactionManager.MaximumTimeout != TimeSpan.Zero && (transactionTimeout > TransactionManager.MaximumTimeout || transactionTimeout == TimeSpan.Zero))
    {
        return TransactionManager.MaximumTimeout;
    }
    return transactionTimeout;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T12:41:43.050

你在事务内部的代码中做什么？通常，其他超时也会发挥作用，例如 SQL 连接或命令超时，它们可能比事务超时更短。

# html - html: 图像未在 iPad Mini 中加载

> ID：15764257
> 
> 赞同：1
> 
> 时间：2013-04-02T12:34:49.260
> 
> 标签：html, image, ipad-mini

我在我的 html 页面上添加了一些图像，但它们没有出现在 iPad Mini 上。我已经在运行 iOS6 的 iPad、带有 android v4.0.4 的 Galaxy Tab 2 和几个桌面上测试了该页面，所有图像都按原样显示。

我目前使用的图像标签是：

```
<img id="abc" src="img.png" alt=""/> 
```

我被这个问题难住了。目前还没有找到解决办法...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-25T05:56:49.650

我有同样的问题。我发现 ipad mini 和 ipad 之间的图像文件参考大小写敏感度不同。确保文件引用的大小写正确。

# python - 使用 configparser 从 utf-8 .ini 文件读取配置时出现 KeyError

> ID：15764258
> 
> 赞同：0
> 
> 时间：2013-04-02T12:34:52.110
> 
> 标签：python, utf-8, ini, configparser

我正在尝试使用 PyCharm 和 Python 3.3 编写一个 python 程序。我想要做的是我的程序会将文件从一个目录复制到一个文件夹或多个文件夹（取决于配置文件）。

由于我试图复制到文件的一些目录是希伯来语，所以 ini 文件是 utf-8。

但是，当我从该文件中读取配置时，这就是我得到的：

```
C:\Python33\python.exe C:/Users/Username/PycharmProjects/RecorderMover/RecorderMover.py
Traceback (most recent call last):
  File "C:/Users/Username/PycharmProjects/RecorderMover/RecorderMover.py", line 77, in <module>
    sourcePath, destPaths, filesToExclude = readConfig()
  File "C:/Users/Username/PycharmProjects/RecorderMover/RecorderMover.py", line 62, in readConfig
    config = config['RecorderMoverConfiguration']
  File "C:\Python33\lib\configparser.py", line 942, in __getitem__
    raise KeyError(key)
KeyError: 'RecorderMoverConfiguration' 
```

RecorderMover.py：

```
def readConfig():
    config = configparser.ConfigParser()

    with codecs.open('RecorderMover.config.ini', 'r', encoding='utf-8') as f:
        config.read(f)

    config = config['RecorderMoverConfiguration']

    sourcePath = config['SourcePath']
    destPaths = config['DestinationPaths']
    filesToExclude = config['FilesToExclude'] 
```

RecorderMover.config.ini：

```
[RecorderMoverConfiguration]
SourcePath=I:\VOICE\A
DestinationPaths=D:\RoseBackup,E:\רוזה
FilesToExclude=20.08.12.mp3 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T12:41:00.147

您需要在您的实例上使用该`.read_file()`方法：`config`

```
with open('RecorderMover.config.ini', 'r', encoding='utf-8') as f:
    config.read_file(f) 
```

该`.read()`方法将`f`其视为文件名序列，并且由于任何行都不能被解释为文件名，因此配置最终为空。

`.read()`或者，在不自己打开文件的情况下传入文件名和编码：

```
config = configparser.ConfigParser()
config.read('RecorderMover.config.ini', encoding='utf-8') 
```

如果您的输入文件包含 UTF-8 BOM（`\ufeff`，来自 UTF-8 标准的 Microsoft 版本）或者使用不添加该字符的工具（例如，*不是*记事本）创建文件，请使用`utf_8_sig`编解码器打开它：

```
config = configparser.ConfigParser()
config.read('RecorderMover.config.ini', encoding='utf-8-sig') 
```

# javascript - 将requirejs模块连接到单个文件中

> ID：15764260
> 
> 赞同：10
> 
> 时间：2013-04-02T12:34:55.137
> 
> 标签：javascript, requirejs

我正在尝试将所有需要的模块和一些文本模板连接到一个连接和丑化的 main.min.js 中，这样我就可以将该文件包含在我的 HTML 中。

我想出了连接和丑化部分。但是，那时我无法在浏览器中实际运行任何代码。

我[在 github 上创建了一个准系统项目](https://github.com/forste/requirejs-barebone)，以重现该问题。

文件结构：

*   main.js
*   索引.html
*   日志.js
*   建造-生产
*   lib/require.js
*   node_modules/require/bin/r.js

我使用构建文件 build-production 连接 main.js、log.js 和 require.js：

```
./node_modules/requirejs/bin/r.js -o build-production.js 
```

main.js

```
require.config({
    paths: {
        requireLib : 'lib/require/require'
    },
    waitSeconds: 1000
});

console.log('loading main.js');

define(function(require) {
    var log = require('log');
    console.log('loaded')

    log.fine('main loaded');
}); 
```

构建生产.js：

```
({
    mainConfigFile : 'main.js',
    include : [ 'requireLib' ],
    name : 'main.js',
    out : 'main.min.js' }) 
```

索引.html：

```
<script src="main.min.js" type="text/javascript"></script> 
```

所以浏览器中的 index.html 应该打印出来

> 加载 main.js
> 加载加载的 main

但它只打印出第一行

> 加载 main.js

有谁知道，为什么会这样？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T15:32:20.337

我刚刚仔细查看了您的代码。

我不确定您为什么要使用以下方法加载缩小文件：

```
<script src="main.min.js" type="text/javascript"></script> 
```

它仍然是一个[AMD](https://github.com/amdjs/amdjs-api/wiki/AMD)模块，因此需要使用 AMD 加载程序加载（否则`define`无法处理）。

这有效：

```
<script type="text/javascript" src="lib/require/require.js"></script>
<script type="text/javascript">
    require(['main.min'], function () {
        require(['main'], function () {});
    });
</script> 
```

**编辑：**虽然外部 require 加载到缩小文件（包含所有模块）中，但您还需要第二个嵌套的 require 来加载仍称为*main*的实际模块。

有一个名为*main*的模块，然后是一个名为*main.min*的所有模块的缩小版本，这是非常具有误导性的。例如，我可能希望*main*与*main.min 完全相同*，但没有应用任何优化。您可以考虑重命名为：

*   入口点：*myApp*
*   编译（`optimize: 'none'`）：*主要*
*   编译（`optimize: 'uglify2'`）：*main.min*

**编辑 2：**在您的构建文件中：

`name: 'main.js'`→`name: 'main'`

这将使 requirejs 将该模块命名为*main*：

`define('main.js', ...);`→`define('main', ...);`

现在：在编译文件的本地范围内`require(['main'])`查找（并加载）名为*main的模块。*

之前：`require(['main'])`没有找到名为*main*的模块（它被命名为*main.js*），因此将其视为文件名并加载`./main.js`.

**编辑 3：**替代**编辑 2**，在您的构建文件中，您可以保留：

`name: 'main.js'`

并向构建配置或运行时配置添加路径别名：

`paths: { 'main' : 'main.js' }`

（这种随意的想法没有任何保证。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-10T08:08:54.483

聚会迟到了，但我认为这对可能正在寻找类似解决方案的其他人有用。我决定在此处发布以用于文档目的。

还有[browserify](http://browserify.org/)可以完全满足您的需求。它的使用类似于**require**（在 npm 上），但您可以在浏览器端使用它。我发现它很有用。

# clojure - 在 Clojure 和 ClojureScript 中 get 的不同行为

> ID：15764262
> 
> 赞同：2
> 
> 时间：2013-04-02T12:35:03.090
> 
> 标签：clojure, clojurescript

这是区别：

```
clj> (get 42 :anything) ; => nil
cljs> (get 42 :anything) ; =>  Error: No protocol method ILookup.-lookup defined for type number: 42 
```

我不知道这是 ClojureScript 中的错误还是未记录的差异，或者我只是遗漏了一些东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T15:09:48.753

我是 ClojureScript 开发人员之一。`get`应该接受任何东西，ClojureScript 的当前行为是一个错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-02T13:13:56.187

您在`get`这里误用了-您的意思是也提供地图参数吗？

例如，

```
cljs> (get {} 42 :anything)
;=> :anything 
```

在 Clojure / ClojureScript 中，`get`假设第一个参数有一个映射：

```
clj> (doc get)
-------------------------
clojure.core/get
([map key] [map key not-found])
  Returns the value mapped to key, not-found or nil if key not present.
nil 
```

由于底层实现如此不同，我希望看到未记录的函数使用（在这种情况下，提供数字而不是映射）导致不同的行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T15:38:41.537

中的功能[`get`](https://github.com/clojure/clojure/blob/master/src/clj/clojure/core.clj#L1404)与中的`clojure.core`功能不同[`get`](https://github.com/clojure/clojurescript/blob/master/src/cljs/cljs/core.cljs#L887)`cljs.core`

clojure 函数在 map 上工作（如果你不传递 map，它会返回第三个参数，如果你不传递第三个参数，则返回 nil），clojurescript 函数适用于任何具有 ILookup 协议实现的类型

# php - 将数据从动态创建的 span 标签发送到 php

> ID：15764268
> 
> 赞同：1
> 
> 时间：2013-04-02T12:35:20.603
> 
> 标签：php, javascript

下面是我的 javascript 文件的一部分

```
$("#imgBox").append('<div id="inner_div_electric" style="position: relative; top: '+innerDivElectricTop+'px; left: '+innerDivElectricLeft+'px;width:'+innerDivElectricWidth+'px;height:'+innerDivElectricHeight+'px;"></div>');
    for(var i=1; i<=sidewalls; i++)
    {
            for(var j=1; j<=backwalls; j++)
            {
                var newDiv = "<span id='droppable"+i+""+j+"' onclick='changeText(this.id);' class='droppable_class' style='width:"+(cellWidth-2)+"px; height:"+(cellHeight-2)+"px;border:1px dotted red;display:inline-block;margin:0px;padding:0px;float:left;'></span>";
                $("#inner_div_electric").append(newDiv);
            }
    } 
```

这里 imgBox 是一个 div，并且在该 div 中动态创建跨度以在该 div 中生成方形框。

```
$('.droppable_class').html('');
if($('#'+id).html(''))
{
    $('#'+id).html('<font face="calibri" color="red"><b>OUTLET</b></font>');
} 
```

这是在我单击的跨度中生成文本“OUTLET”的代码。我需要将这个 javascript 文件中的 div 原样发送到 php，以生成该特定图表的 pdf，该图表包含方形框，并且一个特定跨度包含文本“OUTLET”。

任何想法如何实现它？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:54:49.407

这个很简单，只是动态输入，然后添加到表单中；然后，您可以使用 $('#formid').submit(); 在表单上手动调用提交

此外，如果需要，您可以使用 Javascript 覆盖 .submit() 。想一想：

```
<span>
<form id="sform">
<input name="someDynamicallyCreatedInput" /> <!-- use this instead of a div (or just copy your div to here)-->
</form>
<script>
$('#sform').submit(function(e){//function to be called before form is sent
//if you want to manually send it, wihtout using default form behavior... just put this:
//e.preventDefault();
//then do some ajax here, or heck, just let the form send the data if you are changing pages.
//however, if you want to download a pdf, you may want to just send a get request using href...
});
</script>
</span> 
```

导出为 pdf 只需使用 php header() 函数设置 Content-Type。

来源： [http ://api.jquery.com/submit/](http://api.jquery.com/submit/) [http://php.net/manual/en/function.header.php](http://php.net/manual/en/function.header.php) //这里有一个很好的 pdf 示例。

# performance - 如何监控 95% 的 Web 性能？

> ID：15764269
> 
> 赞同：9
> 
> 时间：2013-04-02T12:35:23.230
> 
> 标签：performance, web-applications, monitoring, percentile

我想监视 Web 应用程序的一些性能百分比（第 95、第 99 等）。这是一篇关于百分位指标的博文[http://blog.catchpoint.com/2010/09/02/web_performance_metrics_best/](http://blog.catchpoint.com/2010/09/02/web_performance_metrics_best/)

解析您自己的访问日志并以分钟粒度（或其他时间窗口）计算百分位数相对容易，但是有没有可以自动执行此操作的工具？

# delphi - 为什么这个copy data from a point错了？

> ID：15764275
> 
> 赞同：4
> 
> 时间：2013-04-02T12:35:32.287
> 
> 标签：delphi, pointers

这是我的示例代码：

```
type
  PData = ^TData;
  TData = record
    str : string;
    strlist : TStringList;
  end;

var
  P1 : PData;
  P2 : PData;
  P3 : PData;
  P4 : PData;
begin
  New(P1);
  New(P2);
  P1.str := 'string';
  // copy
  P2^ := P1^;
  P2.str := P2.str + '_copy';
  Memo1.Lines.Add('This is P1:' + P1.str); //This is P1:string
  Memo1.Lines.Add('This is P2:' + P2.str); //This is P2:string_copy

  // so change P2'Data didn't change P1's Data
  // but this :
  New(P3);
  New(P4);
  P3.str := 'string';
  P3.strlist := TStringList.Create;
  P3.strlist.Add('one line');
  // copy
  P4^ := P3^;
  // just add P4's data
  P4.strlist.Add('two line');
  Memo1.Lines.Add('P3''s Data:' + IntToStr(P3.strlist.Count));
  Memo1.Lines.Add(P3.strlist.Text);
  Memo1.Lines.Add('P4''s Data:' + IntToStr(P4.strlist.Count));
  Memo1.Lines.Add(P4.strlist.Text);
  {
   P3's Data:2
   one line
   two line

   P4's Data:2
   one line
   two line
  }
end; 
```

为什么当用 a 复制点数据时`class`，它会改变原始数据，但是当`string`使用数据时`P1^ := P2^`复制点数据不会改变原始数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T12:49:11.147

String 有点像 Delphi 管理的特殊实体。特别是，Delphi 使用一种`Copy-On-Write`策略，即当你这样做时`P2^ := P1^;`，`P1.str`它们`P2.str`都指向同一个字符串对象。Delphi 通过内部引用计数跟踪存在多少对字符串对象的引用。

一旦您执行类似的写入操作`P2.str := P2.str + '_copy'`，Delphi 就会识别出该字符串已多次使用，并为 P2.str 创建一个自己的副本。这一切都发生在后台，通常你不会注意到这一点。

另一方面，P3.strlist 和 P4.strlist 是普通指针，总是指向同一个对象。这里没有任何自动复制。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T12:47:11.433

字符串是按需复制的。这意味着当您更改复制的字符串时，它将创建已更改字符串的新实例。为简单起见，您可以假设字符串副本是字符串数据的副本。

当您分配一个类实例时，只会复制指向该实例的指针，而不是实例本身。复制后仍然只有一个类实例。您可以从您的代码中看到这一点，因为您的代码中只有一个 TStringList.Create。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T12:43:53.277

似乎delphi制作了对象的[浅拷贝](http://en.wikipedia.org/wiki/Object_copy)。浅拷贝意味着所有本机数据类型都被复制，但对象仅通过引用复制。

因此，在复制分配之后，两个对象都持有对同一`strlist`对象的引用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T12:46:28.607

您将所有值从 复制`P3`到`P4`。

**但** `strlst`它只是对 Object 的引用，`TStringList`并且此**引用**也被复制，因此`P4.strlst`指向与`P3.strlst`

# amazon-s3 - 使用 s3reader 调整图像大小不起作用

> ID：15764277
> 
> 赞同：0
> 
> 时间：2013-04-02T12:35:37.297
> 
> 标签：amazon-s3, image-resizing, imageresizer

我正在使用图像调整器来调整亚马逊图像的大小。

我没有收到任何错误，但我也无法调整图像大小。

我试图直接打开图像网址，它也没有显示任何错误。

我也在 Visual Studio Web 服务器上使用它，所以 IIS 不是问题。

我正在使用 MVC 并已正确安装 MvcRoutingShim 插件。

我正在尝试将图像的大小从 height = 600 调整为 height = 100 但它不起作用。

我的 Disgnostics 输出如下

```
 Image resizer diagnostic sheet      4/2/2013 11:52:23 AM

    2 Issues detected:

    (Warning):  To potentially see additional errors here, perform an image resize request.

    (Warning):  NoCache is only for development usage, and cannot scale to production use.
    Add DiskCache or CloudFront for production use

    You are using paid bundles: Cloud Bundle

    Registered plugins:

    ImageResizer.Plugins.Basic.DefaultEncoder
    ImageResizer.Plugins.Basic.NoCache
    ImageResizer.Plugins.Basic.ClientCache
    ImageResizer.Plugins.Basic.Diagnostic
    ImageResizer.Plugins.Basic.SizeLimiting
    ImageResizer.Plugins.MvcRoutingShim.MvcRoutingShimPlugin
    ImageResizer.Plugins.S3Reader.S3Reader

    Configuration:

    <resizer>
      <pipeline fakeExtensions=".ashx" />
      <plugins>
        <add name="MvcRoutingShim" />
        <add name="S3Reader" buckets="refp" />
      </plugins>
    </resizer>

    Accepted querystring keys:

    quality, format, thumbnail, maxwidth, maxheight, width, height, w, h, scale, stretch, crop, cropxunits, cropyunits, page, bgcolor, rotate, flip, sourceFlip, sFlip, sRotate, borderWidth, borderColor, paddingWidth, paddingColor, ignoreicc, frame, useresizingpipeline, cache, process, margin, anchor, dpi, mode, zoom,

    Accepted file extensions:

    bmp, gif, exif, png, tif, tiff, tff, jpg, jpeg, jpe, jif, jfif, jfi,

    Environment information:

    Running Microsoft-IIS/7.5 on Microsoft Windows NT 6.1.7601 Service Pack 1 and CLR 4.0.30319.296
    Trust level: Unrestricted
    OS bitness: AMD64
    Executing assembly: c:\windows\system32\inetsrv\w3wp.exe
    IntegratedPipeline: True

    Loaded assemblies:

    mscorlib                                 Assembly: 4.0.0.0         File: 4.0.30319.296   Info: 4.0.30319.296
    System.Web                               Assembly: 4.0.0.0         File: 4.0.30319.272   Info: 4.0.30319.272
    System                                   Assembly: 4.0.0.0         File: 4.0.30319.1001  Info: 4.0.30319.1001
    System.Core                              Assembly: 4.0.0.0         File: 4.0.30319.233   Info: 4.0.30319.233
    System.Xml                               Assembly: 4.0.0.0         File: 4.0.30319.233   Info: 4.0.30319.233
    System.Data.SqlXml                       Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
    System.Configuration                     Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
    Microsoft.Build.Utilities.v4.0           Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
    System.Runtime.Caching                   Assembly: 4.0.0.0         File: 4.0.30319.237   Info: 4.0.30319.237
    System.Web.RegularExpressions            Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
    System.Data                              Assembly: 4.0.0.0         File: 4.0.30319.237   Info: 4.0.30319.237
    System.Numerics                          Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
    System.Transactions                      Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
    System.EnterpriseServices                Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
    Microsoft.Build.Framework                Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
    Microsoft.JScript                        Assembly: 10.0.0.0        File: 10.0.30319.296  Info: 10.0.30319.296
    System.Web.Mvc                           Assembly: 3.0.0.0         File: 3.0.20105.0
    System.Web.WebPages.Deployment           Assembly: 1.0.0.0         File: 1.0.20105.407
    System.Web.WebPages                      Assembly: 1.0.0.0         File: 1.0.20105.407
    Microsoft.Web.Infrastructure             Assembly: 1.0.0.0         File: 1.0.20105.407
    System.Web.WebPages.Razor                Assembly: 1.0.0.0         File: 1.0.20105.407
    System.Web.Razor                         Assembly: 1.0.0.0         File: 1.0.20105.407
    System.ComponentModel.DataAnnotations    Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
    System.Data.Linq                         Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
    System.Web.Extensions                    Assembly: 4.0.0.0         File: 4.0.30319.272   Info: 4.0.30319.272
    App_Code.2uqj4rtu                        Assembly: 0.0.0.0
    App_global.asax.eogwkngg                 Assembly: 0.0.0.0
    FluentValidation.Mvc                     Assembly: 3.2.0.0         File: 3.2.0.0
    EntityFramework                          Assembly: 4.1.0.0         File: 4.1.10331.0     Info: 4.1.10331.0
    System.Data.Entity                       Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
    System.Xml.Linq                          Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
    System.Runtime.Serialization             Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
    Anonymously Hosted DynamicMethods Assembly Assembly: 0.0.0.0
    System.Data.OracleClient                 Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
    FluentValidation                         Assembly: 3.2.0.0         File: 3.2.0.0
    Cassette                                 Assembly: 2.0.0.17974     File: 2.0.0.0         Info: 2.0.0
    EntityFrameworkDynamicProxies-EntityFramework Assembly: 1.0.0.0
    System.ServiceModel.Activation           Assembly: 4.0.0.0         File: 4.0.30319.233   Info: 4.0.30319.233
    System.Runtime.DurableInstancing         Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
    System.ServiceModel                      Assembly: 4.0.0.0         File: 4.0.30319.1001  Info: 4.0.30319.1001
    SMDiagnostics                            Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
    System.Xaml.Hosting                      Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
    Elmah                                    Assembly: 1.2.13605.0     File: 1.2.13605.2128
    Cassette.Aspnet                          Assembly: 2.0.0.17975     File: 2.0.0.0         Info: 2.0.0
    Microsoft.CSharp                         Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
    System.Web.Services                      Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
    System.Drawing                           Assembly: 4.0.0.0         File: 4.0.30319.1001  Info: 4.0.30319.1001
    System.IdentityModel                     Assembly: 4.0.0.0         File: 4.0.30319.1001  Info: 4.0.30319.1001
    System.ServiceModel.Web                  Assembly: 4.0.0.0         File: 4.0.30319.233   Info: 4.0.30319.233
    System.Activities                        Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
    System.ServiceModel.Activities           Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
    System.WorkflowServices                  Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
    System.Data.DataSetExtensions            Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
    System.Web.DynamicData                   Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
    System.Web.ApplicationServices           Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
    AjaxMin                                  Assembly: 4.60.4609.17023
    AWSSDK                                   Assembly: 1.5.16.1        File: 1.5.16.1
    Cassette.Views                           Assembly: 2.0.0.17975     File: 2.0.0.0         Info: 2.0.0
    ImageResizer                             Assembly: 3.3.3.123       File: 3.3.3.123       Info: 3-3-3  Commit: c368317
    ImageResizer.Mvc                         Assembly: 3.3.3.123       File: 3.3.3.123       Info: 3-3-3  Commit: c368317
    ImageResizer.Plugins.S3Reader            Assembly: 3.3.3.123       File: 3.3.3.123       Info: 3-3-3  Commit: c368317
    librets-dotnet                           Assembly: 0.0.0.0
    LinqKit                                  Assembly: 1.0.0.0         File: 1.0.0.0
    Newtonsoft.Json                          Assembly: 4.5.0.0         File: 4.5.3.14814
    System.Web.Abstractions                  Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
    System.Web.Helpers                       Assembly: 1.0.0.0         File: 1.0.20105.407
    System.Web.Routing                       Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
    System.Web.Mobile                        Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1 
```

我试图调整图像大小的网址是[https://s3.amazonaws.com/refp/property/802/802_1.jpeg?height=100](https://s3.amazonaws.com/refp/property/802/802_1.jpeg?height=100)。

请帮忙。

来源：http: [//imageresizing.net/plugins/s3reader](http://imageresizing.net/plugins/s3reader)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T12:53:57.497

### 只需更改网址

```
https://s3.amazonaws.com/refp(bucketname)/property(foldername)/802(foldername)/802_1.jpeg?height=100 
```

到

```
http://youraspnetserver/s3/refp(bucketname)/property(foldername)/802(foldername)/802_1.jpeg?height=100 
```

URL 总是需要指向您的 .NET 服务器，而不是 S3 blob，因为 Amazon 的 S3 服务器只是静态文件服务器，不能做任何动态的事情。

# image - img内的div位置

> ID：15764284
> 
> 赞同：1
> 
> 时间：2013-04-02T12:35:51.140
> 
> 标签：image, html, coordinates, drag, resizable

这正是我想要做的。

我有一张里面有方形元素的图像。当我单击这些元素的左上角和右下角时，它们被带有边框的 div 包围。然后，我具有拖动和调整这些 div 大小的功能（一旦通过两次单击创建它们）。我希望能够在文本框中记录这些 div 调整大小的坐标。例如，如果图像的高度=700，宽度=500。然后，如果我在其中创建一个方形 div，坐标为左上角（x=190，y=150）和右下角（x=290，y=250）。然后，如果我在图像周围拖动这个 div，我希望这些坐标相应地改变。如果我调整它的大小，也会发生同样的事情。

提前非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:35:56.090

```
var TopLeftX = $('.kiro'+CountClicks/2).offset().left - $('img').offset().left;
var TopLeftY = $('.kiro'+CountClicks/2).offset().top - $('img').offset().top;
var BottomRightX = TopLeftX + $('.kiro'+CountClicks/2).width();
var BottomRightY = TopLeftY + $('.kiro'+CountClicks/2).height(); 
```

# web-services - Wicket Session 和 Jersey REST 网络服务

> ID：15764286
> 
> 赞同：2
> 
> 时间：2013-04-02T12:35:55.207
> 
> 标签：web-services, session, jersey, wicket

目前我正在为 PACS 查看器（医学图像）开发 REST Web 服务。该 Web 服务需要具有加密/混淆参数，以确保用户无法通过参数模糊来从其他患者那里获取数据。

在 Wicket 面板中，我正在设置 Session 属性：

```
wicketSession.setAttribute("study", studyInstanceUID); 
```

我想在 Jersey webservice 中访问这个属性，但会话不包含我的 jersey webservice 中的任何属性。似乎没有注入或检索它？取而代之的是它创造了一个新的？具有从客户端发送的当前 SessionID 的会话。

我为球衣网络服务创建了一个过滤器和映射器：

```
<filter-mapping>
    <filter-name>WicketSessionFilter</filter-name>
    <url-pattern>/pacsviewer/*</url-pattern>
</filter-mapping> 
```

但这似乎没有任何区别？我认为我在网络服务的注入或状态方面做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T15:17:02.790

如果您编写自己的过滤器，则可以在底层 HttpSession 中读取与您的 Wicket Session 对应的对象位于“wicket:${filterName}:session”属性下，当您将以下内容放入 web.xml

```
<filter>
    <filter-name>SessionFilter</filter-name>
    <filter-class>org.apache.wicket.protocol.http.servlet.WicketSessionFilter</filter-class>
    <init-param>
        <param-name>filterName</param-name>
        <!-- expose the session of the input example app -->
        <param-value>wicket.Main</param-value>
    </init-param>
</filter>
<filter-mapping>
    <filter-name>SessionFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

然后，您可以在自己的过滤器中使用以下 Java 代码获取 Wicket Session 对象（添加空检查和其他样板代码）：

```
 HttpSession session = httpRequest.getSession(false);
 WebSession wicketSession = session.getAttribute("wicket:wicket.Main:session");
 //do whatever you want with this
 //I think a wicketSession.getAttribute("study") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T18:27:58.467

您的会话对象是否绑定到 HttpSession？Wicket 将尝试延迟实际跟踪会话，直到遇到有状态页面（例如具有 AJAX 功能的页面）。您可以使用以下方式绑定会话：

```
getSession().bind(); 
```

这将确保 Wicket 的会话被绑定并持久保存在容器的 HttpSession 中，并且容器将跟踪该会话。

# android - 在对话框中创建使用 NFC 的首选项

> ID：15764291
> 
> 赞同：0
> 
> 时间：2013-04-02T12:36:17.173
> 
> 标签：android, nfc, android-preferences

我有一个`EditTextPreference`允许用户输入一些结构化文本的子类，并在关闭对话框之前对其进行验证。我想让用户在首选项对话框打开时通过扫描 NFC 标签来输入此文本。扫描标签将填充`EditText`接收到的文本。在首选项的对话框未打开时扫描标签不会产生任何效果（即它会让任何其他注册的应用程序处理`ACTION_NDEF_DISCOVERED` `Intent`）。

我已经在相关领域有非常相似的工作`Activity`，所以我不需要 NFC 部分本身的任何帮助。问题是通过`Preference`NFC API 以下列`Activity`方式将所有内容连接到主机时：-

1.  `enableForegroundDispatch()`接受一个`Activity`论点
2.  结果通过`Activity.onNewIntent()`

我对如何进行有两个想法，但有不同的缺点：-

1.  要求`Activity`包含 my`Preference`为我完成所有设置。它需要在首次创建时告诉`Preference`'`Activity`的身份，以允许稍后`Preference`在正确的时间调用。它还需要将呼叫转发到. 这似乎很脆弱——尤其是考虑到通常会在 a 内，并且不需要知道任何关于个人偏好的信息——但如果能够找出托管它的内容会更合理。`enableForegroundDispatch``disableForegroundDispatch``onNewIntent()``Preference``Preference``PreferenceFragment``Activity``Preference``Activity`
2.  停止成为一个`DialogPreference`并用私人`Activity`主题（如对话）替换对话。创建布局没有问题，这会将所有与 NFC 相关的代码保留在特殊的`Activity`. 但接下来的问题是如何`startActivityForResult`从`Preference`. `Intent`在中设置 an`Preference`是不够的，因为它使用`startActivity`并且没有机制来获取结果。即使我设法做到了`startActivityForResult`，我也遇到了与上面相同的问题，那就是它会被传递到`Activity`主机上`Preference`，这使得机制再次变得脆弱。如果我可以使用其他渠道从 中获取文本，则`Activity`此选项会更合适。

你能帮助克服这些问题吗？获得任一替代工作就足够了，但我更喜欢选项 2，因为它可以帮助我解决另一个类似的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T20:15:34.263

使用 1) 并创建两个接口：

1.  用于接收意图（或更好的 NFC 数据，如 NDEF 记录等）
2.  B 用于设置或删除 A 的实例

让活动实现 B 并将 A 存储在字段中。在 NFC 事件中，如果设置了 A 字段，则调用接口。

让 UI 类实现 A 并将 B 存储在构造函数的字段中。

并根据 A 字段是对象还是空来切换 nfc 前台模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T22:14:27.713

除非我忽略了一些明显的东西，否则实现想法 #2 似乎不难。

您可能想查看框架中[RingtonePreference](https://android.googlesource.com/platform/frameworks/base/+/master/core/java/android/preference/RingtonePreference.java)`startActivityForResult()`的源代码，该框架从其方法调用`onClick()`并处理它作为结果接收的意图，这与您的想法非常相似。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-16T11:35:16.753

我最终能够通过一些技巧的使用来解决这个问题。我从选项 2 开始：

*   我把我的对话变成了一个新的`Activity`，带有对话主题的。新活动具有所有 NFC 代码：它将自身传递给`enableForegroundDispatch`，并且具有在`onNewIntent`扫描标签时更新其文本的方法。
*   对话活动不是使用`setResult`将其结果返回给调用者，而是使用`Intent`一些识别信息、是否按下 OK 或取消对话的指示以及新文本来构造一个。它从 发送意图`onPause`，受 保护`if (isFinishing())`，以确保即使它因外部触摸或**后退**键而关闭，也能发送意图。
*   我`EditTextPreference`用一个新的子类替换了我的子类`Preference`。新类看起来非常相似，`EditTextPreference`但不需要太多的灵活性。
*   我的 new`Preference`包含一个匿名`BroadcastReceiver`子类，它从它接收的结构化文本中获取`Intent`并设置首选项的值，更新 GUI 并触发`onPreferenceChange`侦听器。
*   我的`onClick()`偏好调用方法`getContext().registerReceiver`，传递匿名`BroadcastReceiver`和意图过滤器，该过滤器与对话活动设置的识别信息相匹配。然后它调用`getContext().startActivity`( **not** `startActivityForResult` ) 来启动对话活动。

还有一个额外的复杂性：如果在对话框打开时发生配置更改（例如重新定向），则首选项将与其托管活动一起销毁并重新创建。因为我使用了activity的上下文，而不是应用上下文来注册receiver，旧的receiver会被注销，新的preference需要注册receiver。（使用应用程序上下文会泄露旧的活动及其所有首选项，并且可能会在旧首选项更新时导致崩溃。）所以首选项还有一些事情要做：

*   `onClick`还设置一个标志，以便它知道接收器已注册。接收器清除标志。
*   首选项`SavedState`获取“接收者已注册”标志的副本。
*   首选项`onRestoreInstanceState`检查此标志，如果设置，则`getContext().registerBroadcastReceiver`使用与以前相同的接收器和意图过滤器进行调用。

结果是，从 a`Preference`中，我可以拥有与 a 相同的功能`startActivityForResult`，但实现这一点的所有代码都保留在它所调用的内部`Preference`和内部`Activity`：包含`PreferenceActivity`或`PreferenceFragment`不需要任何代码。由于我在几个屏幕上都有相同类型的偏好，这是一个巨大的代码重用胜利，当然还有更好的封装。

相同的技术可用于其他想要使用在 中难以实现的功能的偏好`AlertDialog`，例如 GL、视频、声音或嵌入地图片段。

# php - AsyncTask 致命异常。org.json.JSONException

> ID：15764293
> 
> 赞同：0
> 
> 时间：2013-04-02T12:36:25.657
> 
> 标签：php, android, authentication, android-asynctask

我正在编写一个 android 登录应用程序，它检查用户是否有效，如果他是有效用户，则启动一个新的 Activity。我是 Android 编程和 PHP 编码的初学者。但是，当我单击登录按钮时，应用程序崩溃了。我正在使用 PHP 代码。

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    login=(Button)findViewById(R.id.id_buttonLogin);
    register=(Button)findViewById(R.id.id_buttonSignup);

    phone=(EditText)findViewById(R.id.id_phone);
    password=(EditText)findViewById(R.id.id_password);

    //sPhone=phone.getText().toString();
    //sPassword=password.getText().toString();

    login.setOnClickListener(this);

    register.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            Intent registerOption=new Intent("easy.assign.droid.REGISTRATIONOPTIONACTIVITY");
            startActivity(registerOption);
        }
    });

}

public void onClick(View v) 
{
    new MyAsyncTask().execute();
}

private static String convertStreamToString(InputStream is) {
    /*
     * To convert the InputStream to String we use the BufferedReader.readLine()
     * method. We iterate until the BufferedReader return null which means
     * there's no more data to read. Each line will appended to a StringBuilder
     * and returned as String.
     */
    String result = null;
    try
    {
        BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
        StringBuilder sb = new StringBuilder();
        sb.append(reader.readLine() + "\n");

        String line="0";
        while ((line = reader.readLine()) != null) 
        {
                  sb.append(line + "\n");
        }
        is.close();
        result=sb.toString();
    }
    catch(Exception e)
    {
        Log.e("log_tag", "Error converting result "+e.toString());
    }
    return result;  
}//END convertStreamToString()

private class MyAsyncTask extends AsyncTask<Void, Void, Void>
{
        ProgressDialog pDialog;
        @Override
        protected void onPostExecute(Void result) 
        {
            pDialog.dismiss();
            Intent nextpage=new Intent("easy.assign.droid.HOMESTUDENT");
            startActivity(nextpage);
        }

        @Override
        protected void onPreExecute() 
        {
            super.onPreExecute();
            pDialog = new ProgressDialog(LoginActivity.this);
            pDialog.setMessage("Loading data. Please wait...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(false);
            pDialog.show();
        }

        @Override
        protected Void doInBackground(Void... params) 
        {

            //Create new default HTTPClient
            httpclient = new DefaultHttpClient();

            //Create new HTTP POST with URL to php file as parameter
            httppost = new HttpPost("http://10.0.2.2/project/check.php"); 

            sPhone=phone.getText().toString();
            sPassword=password.getText().toString();
            //Next block of code needs to be surrounded by try/catch block for it to work
            try 
            {
                //Create new Array List
                nameValuePairs = new ArrayList<NameValuePair>(2);

                //place them in an array list
                nameValuePairs.add(new BasicNameValuePair("sPhone", sPhone));
                nameValuePairs.add(new BasicNameValuePair("sPassword", sPassword));

                //Add array list to http post
                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

                //assign executed form container to response
                response = httpclient.execute(httppost); //response from the PHP file

                //check status code, need to check status code 200
                if(response.getStatusLine().getStatusCode() == 200)
                {
                    //assign response entity to http entity
                    entity = response.getEntity();

                    //check if entity is not null
                    if(entity != null)
                    {
                        //Create new input stream with received data assigned
                        InputStream instream = entity.getContent();

                        //Create new JSON Object. assign converted data as parameter.
                        jArray = new JSONArray(convertStreamToString(instream));
                        JSONObject json_data = null;
                        String retUser = null, retPass = null;
                        for(int i=0;i<jArray.length();i++)
                        {
                            json_data = jArray.getJSONObject(i);
                            retUser = json_data.get("sphone").toString();
                            retPass = json_data.get("spassword").toString();
                        }

                        //assign json responses to local strings
                        //String retUser = jsonResponse.getString("sphone");//mySQL table field
                        //String retPass = jsonResponse.getString("spassword");

                        //Validate login
                        if(sPhone.equals(retUser)&& sPassword.equals(retPass))
                        { //Check whether 'retUser' and 'retPass' matches username/password 
                            //Display a Toast saying login was a success
                            SharedPreferences sp = getSharedPreferences("login details", 0);
                            SharedPreferences.Editor spedit = sp.edit();

                            spedit.putString("sPhone", sPhone);
                            spedit.putString("sPassword", sPassword);

                            spedit.commit();
                            //Toast.makeText(getBaseContext(), "Successful", Toast.LENGTH_SHORT).show();
                        } 
                        else 
                        {
                            //Display a Toast saying it failed.
                            Toast.makeText(getBaseContext(), "Invalid Login Details", Toast.LENGTH_SHORT).show();
                        }

                    }
                }
            } 
            catch(Exception e)
            {
                e.printStackTrace();
                //Display toast when there is a connection error
                //Change message to something more friendly
               //Toast.makeText(getBaseContext(), e.toString(), Toast.LENGTH_SHORT).show();
               Toast.makeText(getBaseContext(), "Connection Error", Toast.LENGTH_SHORT).show();
            }

            return null;
        }
}
} 
```

这是PHP代码：

```
<?php

$connect = mysqli_connect("localhost","root","","easyassigndroid");

if(mysqli_connect_errno($connect))
{
    echo "Failed to connect to MySQL: " . mysqli_connect_error();
}
else
{
    echo "success";
}

$username = isset($_POST['sPhone']) ? $_POST['sPhone'] : '';
$password = isset($_POST['sPassword']) ? $_POST['sPassword'] : '';

$query = mysqli_query($connect, "select * from users where sphone='$username' and spassword='$password' ");

$num = mysqli_num_rows($query);

if($num==1)
{
    while($list = mysqli_fetch_assoc($query))
    {
        $output = $list;
        print(json_encode($output));
    }

    mysqli_close();
}

?> 
```

我得到“org.json.JSONException：java.lang.String 类型的值成功无法转换为 JSONObject”和“致命异常”。此外，我在 logcat 中得到以下异常：

```
03-31 11:24:43.337: W/System.err(532): org.json.JSONException: Value success of type java.lang.String cannot be converted to JSONObject
03-31 11:24:43.337: W/System.err(532):  at org.json.JSON.typeMismatch(JSON.java:111)
03-31 11:24:43.367: W/System.err(532):  at org.json.JSONObject.<init>(JSONObject.java:158)
03-31 11:24:43.377: W/System.err(532):  at org.json.JSONObject.<init>(JSONObject.java:171)
03-31 11:24:43.377: W/System.err(532):  at easy.assign.droid.LoginActivity$MyAsyncTask.doInBackground(LoginActivity.java:160)
03-31 11:24:43.377: W/System.err(532):  at   easy.assign.droid.LoginActivity$MyAsyncTask.doInBackground(LoginActivity.java:1)
03-31 11:24:43.407: W/System.err(532):  at android.os.AsyncTask$2.call(AsyncTask.java:264)
03-31 11:24:43.407: W/System.err(532):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
03-31 11:24:43.417: W/System.err(532):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
03-31 11:24:43.417: W/System.err(532):  at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
03-31 11:24:43.447: W/System.err(532):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
03-31 11:24:43.447: W/System.err(532):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
03-31 11:24:43.457: W/System.err(532):  at java.lang.Thread.run(Thread.java:856)
03-31 11:24:43.507: W/dalvikvm(532): threadid=11: thread exiting with uncaught exception (group=0x409c01f8)
03-31 11:24:43.617: E/AndroidRuntime(532): FATAL EXCEPTION: AsyncTask #1
03-31 11:24:43.617: E/AndroidRuntime(532): java.lang.RuntimeException: An error occured while executing doInBackground()
03-31 11:24:43.617: E/AndroidRuntime(532):  at android.os.AsyncTask$3.done(AsyncTask.java:278)
03-31 11:24:43.617: E/AndroidRuntime(532):  at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
03-31 11:24:43.617: E/AndroidRuntime(532):  at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
03-31 11:24:43.617: E/AndroidRuntime(532):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
03-31 11:24:43.617: E/AndroidRuntime(532):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
03-31 11:24:43.617: E/AndroidRuntime(532):  at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
03-31 11:24:43.617: E/AndroidRuntime(532):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
03-31 11:24:43.617: E/AndroidRuntime(532):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
03-31 11:24:43.617: E/AndroidRuntime(532):  at java.lang.Thread.run(Thread.java:856)
03-31 11:24:43.617: E/AndroidRuntime(532): Caused by: java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
03-31 11:24:43.617: E/AndroidRuntime(532):  at android.os.Handler.<init>(Handler.java:121)
03-31 11:24:43.617: E/AndroidRuntime(532):  at android.widget.Toast$TN.<init>(Toast.java:317)
03-31 11:24:43.617: E/AndroidRuntime(532):  at android.widget.Toast.<init>(Toast.java:91)
03-31 11:24:43.617: E/AndroidRuntime(532):  at android.widget.Toast.makeText(Toast.java:233)
03-31 11:24:43.617: E/AndroidRuntime(532):  at easy.assign.droid.LoginActivity$MyAsyncTask.doInBackground(LoginActivity.java:194)
03-31 11:24:43.617: E/AndroidRuntime(532):  at easy.assign.droid.LoginActivity$MyAsyncTask.doInBackground(LoginActivity.java:1)
03-31 11:24:43.617: E/AndroidRuntime(532):  at android.os.AsyncTask$2.call(AsyncTask.java:264)
03-31 11:24:43.617: E/AndroidRuntime(532):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
03-31 11:24:43.617: E/AndroidRuntime(532):  ... 5 more
03-31 11:24:44.507: I/dalvikvm(532): threadid=3: reacting to signal 3
03-31 11:24:44.527: I/dalvikvm(532): Wrote stack traces to '/data/anr/traces.txt'
03-31 11:24:44.797: E/WindowManager(532): Activity easy.assign.droid.LoginActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@411ddc48 that was originally added here
03-31 11:24:44.797: E/WindowManager(532): android.view.WindowLeaked: Activity easy.assign.droid.LoginActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@411ddc48 that was originally added here
03-31 11:24:44.797: E/WindowManager(532):   at android.view.ViewRootImpl.<init>(ViewRootImpl.java:344)
03-31 11:24:44.797: E/WindowManager(532):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:267)
03-31 11:24:44.797: E/WindowManager(532):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:215)
03-31 11:24:44.797: E/WindowManager(532):   at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:140)
03-31 11:24:44.797: E/WindowManager(532):   at android.view.Window$LocalWindowManager.addView(Window.java:537)
03-31 11:24:44.797: E/WindowManager(532):   at android.app.Dialog.show(Dialog.java:278)
03-31 11:24:44.797: E/WindowManager(532):   at android.app.ProgressDialog.show(ProgressDialog.java:116)
03-31 11:24:44.797: E/WindowManager(532):   at android.app.ProgressDialog.show(ProgressDialog.java:99)
03-31 11:24:44.797: E/WindowManager(532):   at android.app.ProgressDialog.show(ProgressDialog.java:94)
03-31 11:24:44.797: E/WindowManager(532):   at easy.assign.droid.LoginActivity$MyAsyncTask.onPreExecute(LoginActivity.java:117)
03-31 11:24:44.797: E/WindowManager(532):   at android.os.AsyncTask.executeOnExecutor(AsyncTask.java:561)
03-31 11:24:44.797: E/WindowManager(532):   at android.os.AsyncTask.execute(AsyncTask.java:511)
03-31 11:24:44.797: E/WindowManager(532):   at easy.assign.droid.LoginActivity.onClick(LoginActivity.java:75)
03-31 11:24:44.797: E/WindowManager(532):   at android.view.View.performClick(View.java:3511)
03-31 11:24:44.797: E/WindowManager(532):   at android.view.View$PerformClick.run(View.java:14105)
03-31 11:24:44.797: E/WindowManager(532):   at android.os.Handler.handleCallback(Handler.java:605)
03-31 11:24:44.797: E/WindowManager(532):   at android.os.Handler.dispatchMessage(Handler.java:92)
03-31 11:24:44.797: E/WindowManager(532):   at android.os.Looper.loop(Looper.java:137)
03-31 11:24:44.797: E/WindowManager(532):   at android.app.ActivityThread.main(ActivityThread.java:4424)
03-31 11:24:44.797: E/WindowManager(532):   at java.lang.reflect.Method.invokeNative(Native Method)
03-31 11:24:44.797: E/WindowManager(532):   at java.lang.reflect.Method.invoke(Method.java:511)
03-31 11:24:44.797: E/WindowManager(532):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
03-31 11:24:44.797: E/WindowManager(532):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
03-31 11:24:44.797: E/WindowManager(532):   at dalvik.system.NativeStart.main(Native Method)
03-31 11:24:47.237: I/Process(532): Sending signal. PID: 532 SIG: 9 
```

谁能告诉我问题出在哪里？在 PHP 代码、Android 代码还是两者兼而有之？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:45:36.210

您试图在其中显示`Toast`消息，请在`doInBackground()`其中运行此代码`runOnUiThread()`

在 doInBackground() 方法中更改此代码

```
Toast.makeText(getBaseContext(), "Invalid Login Details", Toast.LENGTH_SHORT).show(); 
```

和这个

```
sPhone=phone.getText().toString();
sPassword=password.getText().toString(); 
```

像这样

```
runOnUiThread(new Runnable() {
   public void run() {
      sPhone=phone.getText().toString();
      sPassword=password.getText().toString();
   }
});

runOnUiThread(new Runnable() {
    public void run() {
       Toast.makeText(getBaseContext(), "Invalid Login Details", Toast.LENGTH_SHORT).show();
   }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:09:37.767

这可能会帮助您

```
doInBackground

    sPhone=phone.getText().toString();
    sPassword=password.getText().toString(); 
```

您试图从 Edittext 获取 String 意味着无法在此处绑定 Control 以及

```
Toast like

runOnUiThread(new Runnable() {
    public void run() {
       Toast.makeText(getBaseContext(), "Invalid Login Details", Toast.LENGTH_SHORT).show();
   }
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-02T12:37:58.747

```
new MyAsyncTask().execute();

private class MyAsyncTask extends AsyncTask<Void, Void, Void> 
```

你必须写

```
new MyAsyncTask().execute(null,null,null); 
```

# php - 来自外部页面（相同域）的 Magento 会话

> ID：15764296
> 
> 赞同：2
> 
> 时间：2013-04-02T12:36:28.740
> 
> 标签：php, magento, session, magento-1.7

我需要检查用户是否已注册并获取您的信息，但所有信息都在同一域内但在 Magento 结构之外的文件中：/mymagento/islogged.php

```
require_once ('app/Mage.php');
Mage::app(); 

define('ROOT', Mage::getBaseUrl(Mage_Core_Model_Store::URL_TYPE_WEB));

$sessionCustomer = Mage::getSingleton("customer/session");
if($sessionCustomer->isLoggedIn()) {
    $customer = $sessionCustomer->getCustomer();
    $telefono = $customer->getTelefonoMovil();
} else {
    header('Location: '.ROOT.'customer/account/login/');
} 
```

但它不起作用，找不到会话。我审查了以下主题：

*   [Magento 会话在外部页面（相同域）中不起作用](https://stackoverflow.com/questions/8567806/magento-session-not-working-in-external-page-same-domain)
*   [Magento 客户/会话不工作](https://stackoverflow.com/questions/9891761/magento-customer-session-not-working)
*   [如何在 Magento 之外创建 Magento 会话？](https://stackoverflow.com/questions/9048180/how-do-i-create-a-magento-session-outside-of-magento)
*   [如何从 Magento 外部访问 Magento 用户的会话？](https://stackoverflow.com/questions/1098871/how-to-access-magento-users-session-from-outside-magento)
*   [在外部页面上检查 Magento 登录](https://stackoverflow.com/questions/2724334/checking-for-magento-login-on-external-page)
*   [在另一个页面中获取 magento 会话变量](https://stackoverflow.com/questions/12578318/get-magento-session-variable-in-another-page)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T12:36:28.740

最后我做了如下：

```
require_once ('app/Mage.php');
Mage::app(); 

// Define the path to the root of Magento installation.
define('ROOT', Mage::getBaseUrl(Mage_Core_Model_Store::URL_TYPE_WEB));

// Obtain the general session and search for an item called 'customer_id'
$coreSession = Mage::getSingleton('core/session', array('name' => 'frontend'));
if(isset($coreSession['visitor_data']['customer_id'])){
    $customerId = $coreSession['visitor_data']['customer_id'];
} else {
    header('Location: '.ROOT.'customer/account/login/');
}

// Load the user session.
Mage::getSingleton('customer/session')->loginById($customerId);
$customerSession = Mage::getSingleton("customer/session");

// We verified that created successfully (not required)
if(!$customerSession->isLoggedIn()) {
    header('Location: '.ROOT.'customer/account/login/');
}

// Load customer
$customer = $customerSession->getCustomer();

// We get cell phone
$telefono = $customer->getTelefonoMovil(); 
```

# java - Ant 构建文件的问题

> ID：15764298
> 
> 赞同：0
> 
> 时间：2013-04-02T12:36:28.813
> 
> 标签：java, ant, jar

我有一个名为 test1.java 的 java 文件，带有一个简单的 hello world 消息。

我有一个用于创建 jar 文件的 ANT 构建脚本，如下所示：

```
<?xml version="1.0" ?>
<project name="test1" default="main">

<target name="main" depends="compile, compress">
<echo>
    Building the .jar file
</echo>
</target>

<target name="compile">
    <javac srcdir="." includeantruntime="false"/>
</target>

<target name="compress">
    <jar jarfile="proj.jar" basedir="." includes="*.class">
            <manifest>
                <attribute name="Main-Class" value="test1"/>
            </manifest>
        </jar>

</target>

</project> 
```

该文件已成功编译并创建了一个 Ajar 文件。

但是当我尝试执行 jar`java -jar proj.jar`时出现以下错误： **Invalid or corrupt jarfile proj.jar**

我该如何解决这个问题。

清单文件的内容如下：

```
Manifest-Version: 1.0
Ant-Version: Apache Ant 1.9.0
Created-By: pap64dev-20071008 (SR6) (IBM Corporation)
Main-Class: test1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:52:25.477

通过降级到 Ant 1.8.4 解决了这个问题。Ant 1.9 似乎不适用于 Java 5

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T12:47:32.357

我建议让“压缩”任务依赖于“编译”任务，因为如果首先执行“压缩”，将没有要打包的类文件。

你也确定你的主类的名字真的是“test1”（按照惯例，类名应该以大写字母开头）。

# visual-c++ - 如何在 mfc 中找到确定和帮助按钮的事件处理程序？

> ID：15764299
> 
> 赞同：0
> 
> 时间：2013-04-02T12:36:29.183
> 
> 标签：visual-c++

我是 MFC 的新手。在我正在处理的项目中，对话框是在资源文件（.rc）中创建的。其中有确定按钮（id `ID_OK`）和帮助按钮（id `ID_Help`）。我无法找到这两个按钮的事件处理程序。还有其他按钮可以轻松找到映射的事件处理程序。如果有人教我如何找到那些事件处理程序，那将非常有帮助。

以及如何通过在 Visual Studio 中进行调试来找到单击特定按钮时调用的函数？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T17:58:18.940

1.  按钮没有像其他框架（如 C#、WinForms 等）中那样的直接事件处理程序。您必须在 MFC 中使用消息映射。
2.  `ID_OK`映射到虚函数`CDialog::OnOK`，你可以只写你的虚函数实现。框架会为你调用它。您还可以使用`WM_COMMAND`消息条目来处理此消息。
3.  没有标准的资源 ID，因为`ID_Help`它始终是大写字母，并且必须始终大写！不过，没有人会阻止您使用小写字母——它是为了保持一致性和更好的可读性。
4.  与其摆弄资源文件（.RC 和 resource.h），不如将其映射到您的对话框类之类的东西上。我建议你去学习，没有资源文件。从画框开始（圆圈、实心三角形等）。了解并了解为什么某些消息存在虚函数，而其他（大多数）消息存在消息映射。

我的两分钱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:12:46.970

双击在 Visual Studio 的资源视图中打开的按钮（显示在 rc 中），您将被 Studio 自动放置在代码中事件处理程序所在的位置。

如果这不起作用，那么可能会在资源视图中删除带有 ID 的按钮，然后`ID_OK`使用`ID_Help`不同的 ID 再次将其添加到资源中，然后尝试通过在资源视图中双击这些按钮来生成事件处理程序。这是因为有时 ID 的值与其他 ID 值冲突，因此 Studio 在这种情况下无法为您生成事件处理程序。

# objective-c - 从 UIScrollView 发送操作

> ID：15764305
> 
> 赞同：0
> 
> 时间：2013-04-02T12:36:47.177
> 
> 标签：objective-c, cocoa-touch, cocoa, uiscrollview

我有一个`UIScrollView`带有 10 个按钮的按钮，每个按钮都有自己的方法。我的目标是在用户滚动并`UIButton`“进入”特定区域时激活每个按钮。有什么好方法可以做到这一点？（我不希望`UIButton`被推动。只需将鼠标悬停在它上面就可以激活它）

例子：

* * *

按钮 1

按钮 2

**呜呜呜**

按钮 3 **<--激活**

**呜呜呜**

按钮 4

* * *

现在按钮 3 已激活。如果用户向下滚动一个位按钮 2 将被激活。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:38:34.777

我假设激活是指按钮的**uicontrolstate是否****启用**。我能想到的最直接的方法是执行类似于 BloonsTowerDefence 的操作并查看**uiscrollviews** **contentoffset**并在各种范围内检查**contentoffset**并禁用所有其余按钮并启用您想要的按钮在该范围内启用。

# android - 如何在android中禁用长按WebView

> ID：15764311
> 
> 赞同：3
> 
> 时间：2013-04-02T12:37:19.167
> 
> 标签：android, webview, android-webview

我想禁用对 webView 的长按，所以我无法选择其中的文本，我使用三种方法来做到这一点，但没有任何效果：

```
1) android:longClickable="false"

2) webView.setLongClickable(false);

3) webView.setOnLongClickListener(new OnLongClickListener() {
            @Override
            public boolean onLongClick(View v) {
                return true;
            }
        }); 
```

所以请提供任何帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-01-08T21:23:54.357

要禁用长点击，您需要先启用长点击，`setLongClickable(true);`然后再启用`setOnLongClickListener`，并且什么都不返回：

```
webview.setLongClickable(true);
webview.setOnLongClickListener(new OnLongClickListener() {
    @Override
    public boolean onLongClick(View v) {
        return true;
        }
    }); 
```

如果您只需要禁用文本选择，最好将以下 CSS 添加到您的网页，它将禁用文本选择：

```
body {
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
} 
```

[在此处](https://developer.mozilla.org/en-US/docs/Web/CSS/user-select)查看 Mozilla 文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-05T15:25:27.860

这对我有用，如[https://stackoverflow.com/a/12793740/5035343所示](https://stackoverflow.com/a/12793740/5035343)

```
mWebView.setOnLongClickListener(new OnLongClickListener() {
@Override
public boolean onLongClick(View v) {
    return true;
}
});
mWebView.setLongClickable(false); 
```

而要消除长按造成的震动，可以试试这个。

```
mWebView.setHapticFeedbackEnabled(false); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T13:23:14.050

Try this:

```
webView.setOnLongClickListener(null); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T12:42:22.323

尝试这个：

```
 public void SelectText(View v) {
        try {
            KeyEvent shiftPressEvent = new KeyEvent(0, 0, KeyEvent.ACTION_DOWN,
                    KeyEvent.KEYCODE_ESCAPE, 0, 0);
            shiftPressEvent.dispatch(v);
        } catch (Exception e) {
            throw new AssertionError(e);
        }
    } 
```

或者 ：

```
public boolean onTouchEvent(MotionEvent "ACTION_DOWN") {
    try {
        KeyEvent shiftPressEvent = new KeyEvent(0, 0, KeyEvent.ACTION_DOWN,
                KeyEvent.KEYCODE_SHIFT_LEFT,0,0);
        shiftPressEvent.dispatch(webview);
    } catch (Exception e) {
        throw new AssertionError(e);
    }
    return false;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-21T21:22:16.860

**这个方法对我很有用，检查它可能对你们有帮助。**

1）就用这个`webView.setLongClickable(false);`

2）在带有css的html中使用：

```
body {
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
} 
```

3）在html中用这个替换body标签`<body oncontextmenu="return false;">`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-18T13:53:37.767

将此用于科特林

```
binding.webViewId.setOnLongClickListener(OnLongClickListener { true }) 
```

或者

```
webViewId.setOnLongClickListener(OnLongClickListener { true }) 
```

# javascript - 如何在密钥释放时更改图像

> ID：15764312
> 
> 赞同：1
> 
> 时间：2013-04-02T12:37:22.070
> 
> 标签：javascript, html, canvas, keyevent, keyrelease

我正在使用 HTML5 画布和 javascript 开发一个小游戏。现在我想做的是让图像从左向右移动，当按下一个键时，它会改变图像以使其看起来更像是在移动。

现在我开始工作了，但我有点卡住了。代码是，当您按下左键时，他将 player.image 更改为 player.imgLeft 并在释放时将其更改回正常图像。

压制有效，但释放无效..我做错了什么？

简而言之，这是代码

```
 // Things to do when keys are down
 function onKeyDown(event)
 {
if (event.keyCode >= 37 && event.keyCode<=39)
    event.preventDefault(); // prevent arrow keys from scrolling the page

switch (event.keyCode) {
 case 37: player.vx = -1; player.image = player.imgLeft; break; // left key
 case 38: player.vy = -1; break; // up key
 case 39: player.vx = 1; player.image = player.imgRight; break; // right key
 }  
 }

 // Things to do when keys are up
 function onKeyUp(event)
 {
switch (event.keyCode) {
    case 37: case 39: player.vx = 0; player.imgLeft = player.image; break; // left or right key released
    case 38: player.vy = 0; break; // up or down key released
  }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T06:30:53.053

如果您在 player.original 中有原始图像，请像这样修改。您应该像这样使用 Onkeyup 事件...

```
function onKeyUp(event)
 {
switch (event.keyCode) {
    case 37: case 39: player.vx = 0; player.image = player.original; break; // left or right key released
    case 38: player.vy = 0; break; // up or down key released
  }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T12:40:19.163

当你按下键时，你做

```
player.image = player.imgLeft 
```

当你释放时，你做

```
player.imgLeft = player.image; 
```

它什么都不做，因为两个变量都具有相同的值。您需要第三个变量来存储原始`player.image`值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T12:52:59.257

记住：

如果你使用 onkeydown="return onKeyDown(event)" 你需要 onkeyup="return onKeyUp(event)"。

# payment-gateway - 未验证帐户时使用 Dwolla 付款按钮

> ID：15764313
> 
> 赞同：1
> 
> 时间：2013-04-02T12:37:24.493
> 
> 标签：payment-gateway, payment, dwolla

从 Dwolla 的支付按钮 API 文档中，我不清楚`RESPONSE`用户在他们的帐户尚未验证时使用支付按钮会得到什么。

在用户等待银行与 Dwolla 同步的 3-5 天炼狱期间会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T15:08:31.267

当用户的 Dwolla 帐户正在等待身份验证（SSN 检查、照片 ID 检查等）时，他们将在登录异地网关后看到此错误消息（付款按钮将用户重定向到我们[的异地网关](https://developers.dwolla.com/dev/pages/gateway)以完成付款）

> 哎呀！
> 
> 您的帐户需要更多信息才能完成此订单。请登录 Dwolla.com 来解决这个问题。

付款将不会完成，用户将留在该错误页面。

但是，如果用户验证了他/她的身份但没有资金来源（已验证的银行账户）并且 Dwolla 余额为空，则在结帐时，用户将被重定向到您指定的重定向 URL（在“href”属性中）以下查询字符串数据：

```
?error=failure
&error_description=Insufficient+funds+exist+to+complete+the+transaction. 
```

# uilabel - 如何频繁更新UILabel？

> ID：15764314
> 
> 赞同：1
> 
> 时间：2013-04-02T12:37:32.003
> 
> 标签：uilabel

我想经常更新标签的文本，但它似乎不起作用。

```
for (int i = 0; i <100; i++)
{
 mylabel.text =[NSString stringWithFormat:@"%d", i];
} 
```

有没有人建议我一个想法？我想。也许，我们应该在多个线程中更新文本标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:19:25.950

手表是最好的例子，希望它对你有帮助......

```
int second,minute;    //set second = 0 and minute = 0
[NSTimer scheduledTimerWithTimeInterval:1.0f target:self selector:@selector(updateCounter:) userInfo:nil repeats:YES];

- (void)updateCounter:(NSTimer *)theTimer {
    second++;

    if(second < 60)
        {
        if (second < 10) 
            {
            timerLbl.text = [NSString stringWithFormat:@"00:0%d", second];
            }
        else
            {
            timerLbl.text = [NSString stringWithFormat:@"00:%d",second];
            }
        }
    else
        {
        minute = second / 60;
        int sec = second % 60;

        if (minute < 10 && sec < 10) 
            {
            timerLbl.text = [NSString stringWithFormat:@"0%d:0%d", minute, sec];
            }
        if(minute < 10 && sec >= 10)
            {
            timerLbl.text = [NSString stringWithFormat:@"0%d:%d", minute, sec];
            }
        if (minute >= 10 && sec < 10) 
            {
            timerLbl.text = [NSString stringWithFormat:@"%d:0%d", minute, sec];
            }
        if(minute >= 10 && sec >= 10)
            {
            timerLbl.text = [NSString stringWithFormat:@"%d:%d", minute, sec];
            }
        }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T09:34:37.840

```
Add below code in viewDidLoad
self.timer = [NSTimer scheduledTimerWithTimeInterval:0.5f
                                     target:self
                                   selector:@selector(showTime)
                                   userInfo:NULL
                                    repeats:YES];

- (void)showTime
{
    NSDate *now=[NSDate date];
    NSDateFormatter *dateFormatter=[NSDateFormatter new];
    [dateFormatter setDateFormat:@"HH:mm:ss"];
    timeLabel.text=[dateFormatter stringFromDate:now];
} 
```

希望这个答案能帮到你......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-27T09:50:08.730

使用 NSTimer 作为定期间隔并调用打印标签的方法让假设

```
[NSTimer scheduledTimerWithTimeInterval:2.0
target:self
selector:@selector(targetMethod:)
userInfo:nil
repeats:Yes]; 
```

在目标方法中在文本上打印标签

```
-(void)targetMethod:(NSTimer *)timer{
NSDate* date = [NSDate date];
NSDateFormatter* formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@" HH:MM:SS"];
NSString* str = [formatter stringFromDate:date];
label.text = str;
} 
```

试试这个它肯定会工作

# objective-c - 如何从 nsmutablearray 中最多删除一个对象？

> ID：15764324
> 
> 赞同：0
> 
> 时间：2013-04-02T12:38:01.607
> 
> 标签：objective-c, nsmutablearray

我想将一堆对象插入 NSMutableArray。然后我会在合适的时候将它们一一移除。必须删除每个插入的对象。

但是，如果我有同一个对象的多个副本，我只想删除其中一个。

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T12:47:18.190

```
NSMutableArray *arr = [@[@1, @1, @5, @6, @5] mutableCopy]; // a copy of your array
NSMutableSet *removedObjects = [NSMutableSet setWithArray:arr];
for (id obj in removedObjects) {
    [arr removeObjectAtIndex:[arr indexOfObject:obj]]; // removes the first identical object
} 
```

另请注意，如果您的数组中填充了自定义对象，则需要实现`hash`，`isEqual:`以便比较可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T12:41:05.493

您正在寻找这些功能中的任何一个吗？

```
[array removeObjectAtIndex:(NSUInteger)];
[array removeLastObject];
[array removeObject:(id)]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T12:42:02.347

```
[myMutableArray removeObjectAtIndex: 0]; 
```

或者

```
[myMutableArray removeLastObject]; 
```

分别删除第一个和最后一个对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T12:42:26.833

我认为`[NSMutableArray removeObject:]`删除所有事件不是一个好的设计，但我们可以通过首先使用获取索引`indexOfObject:`然后使用删除对象来避免它`removeObjectAtIndex:`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T12:54:00.230

我更喜欢使用对象索引；它将返回第一次出现在数组中的对象的索引

```
 NSMutableArray * first = [@[@"2",@"3",@"4",@"5"] mutableCopy];//your first array

    NSMutableArray * willBeAppend =  [@[@"2",@"3",@"4",@"5"] mutableCopy];//new objects to append

    [first addObjectsFromArray:willBeAppend];//append new objects

    id objectToBeRemoved = @"3";// object will be removed

    NSInteger objIx = [first indexOfObject:objectToBeRemoved];// index of object

    if (objIx != NSNotFound) {

        [first removeObjectAtIndex:objIx]; //remove object

        NSLog(@"%@",first);

    } 
```

# facebook - 无法使用图形 API 访问朋友的信息

> ID：15764326
> 
> 赞同：4
> 
> 时间：2013-04-02T12:38:02.607
> 
> 标签：facebook, facebook-graph-api

例如，我想使用图形 API 检索朋友的生日。

所以我选择了一个朋友，他的生日我的个人资料可以看到，转到 Graph API Explorer，生成一个具有`friends_birthday`权限的访问令牌，然后输入`[friend_name]/?fields=birthday`......它没有返回任何内容。侧面的`birthday`字段显示为灰色，鼠标悬停在上面的文字显示

> “字段为空或访问令牌不允许”。

最糟糕的是，它对某些朋友有效，但对其他人无效。这是否与他们在个人资料中为此信息设置的可见性级别有关？我假设该应用程序可以看到我的个人资料可以看到的所有内容（如果我授予它完全权限），但可能情况并非如此。还是我的要求有问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T14:11:04.440

我遇到了同样的问题，答案是您的朋友可以更改它授予应用程序的权限。因此，对于 Graph API Explorer 应用程序，您的朋友需要授予该应用程序的 user_birthday 权限，以便您通过该应用程序查看他们的生日（并且您还必须授予该应用程序的 friends_birthday 权限）。

有关帮助我弄清楚这一点的评论，请参见[此处。](https://stackoverflow.com/questions/15927178/is-there-a-delay-in-when-someone-changes-their-sharing-settings-in-facebook-and?noredirect=1#comment22720186_15927178)

# css - 在 HTML 列表中向右浮动图像会导致对齐问题

> ID：15764328
> 
> 赞同：2
> 
> 时间：2013-04-02T12:38:07.917
> 
> 标签：css, css-float

为简单起见，我使用了内联样式，这样您就可以看到发生了什么。我为列表元素使用了红色边框，为图像使用了黑色边框？为什么图像没有正确对齐？这一直让我发疯。

看截图：

![在此处输入图像描述](https://i.stack.imgur.com/v1Zvw.png)

见代码：

```
<ul>
<li style="border: 1px solid red">Result <span style="display: block; float: right; border: 1px solid #000"><img src="../../resources/images/delete.png" /></span></li>
<li style="border: 1px solid red">Result <span style="display: block; float: right; border: 1px solid #000"><img src="../../resources/images/delete.png" /></span></li>
<li style="border: 1px solid red">Result <span style="display: block; float: right; border: 1px solid #000"><img src="../../resources/images/delete.png" /></span></li>
</ul> 
```

**JS小提琴**

[http://jsfiddle.net/jMzub/](http://jsfiddle.net/jMzub/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T12:40:09.367

你需要清除浮动

```
<ul>
<li style="border: 1px solid red">Result 
<span style="display: block; float: right; border: 1px solid #000">
   <img src="../../resources/images/delete.png" />
</span>
<div style="clear: both;"></div>
</li>
<!--Same for other li-->
</ul> 
```

但这是一种肮脏的方式，我会使用`background-image`and `background-position`for `<li>`element 代替（除非并且直到您将图像用作链接或用于某些点击目的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T12:40:35.740

您需要将高度包括在内

```
li{height: 30px;} 
```

# jquery - 链接 jQuery 元素以在悬停时显示

> ID：15764330
> 
> 赞同：2
> 
> 时间：2013-04-02T12:38:23.513
> 
> 标签：jquery, list, menu, jquery-hover

有没有一种简单的方法来链接 jquery 元素，用于悬停。[我在http://jsbin.com/useviz/3/edit](http://jsbin.com/useviz/3/edit)有 jsbin我基本上有它，因此当您将鼠标悬停在元素上方时它不会关闭当`ul`您将鼠标移到元素上方或上方时会出现问题到下一个元素。原来的ul不隐藏。这可能听起来令人困惑，但是如果您查看上面的示例，您会发现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T13:06:24.690

您不需要检查要隐藏的元素是否存在，您可以根据需要隐藏它。我已经添加`$(".sub_menu").hide(700);`到每个鼠标悬停功能，它的工作原理！见[http://jsbin.com/useviz/6/](http://jsbin.com/useviz/6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T13:00:14.023

像这样的东西，

现场演示[**在这里**](http://jsbin.com/useviz/4/edit)

```
$(document).ready(function () {

    $("#servicebutton").mouseenter(function () {
        $('.sub_menu').hide();
        $('.sub_menu1').show(700);
    });

    $('.sub-menu1').mouseleave(function () {
         $('.sub_menu1').hide(700);
    });

    $("#packagebutton").mouseenter(function () {
         $('.sub_menu').hide();
         $('.sub_menu2').show(700);
    }); 

    $('.sub-menu2').mouseleave(function () {
         $('.sub_menu2').hide(700);
    });

    $("#productbutton").mouseenter(function () {
       $('.sub_menu').hide();
       $('.sub_menu3').show(700);
    });

    $('.sub-menu2').mouseleave(function () {
       $('.sub_menu3').hide(700);
    });

  /* catch-all for submenus */
  $('.sub_menu').mouseleave(function(){
      $(this).hide(700);
  });
}); 
```

# javascript - 谷歌缓存问题

> ID：15764332
> 
> 赞同：0
> 
> 时间：2013-04-02T12:38:32.203
> 
> 标签：javascript, caching, googlebot

我有一个情况。我为不支持特定浏览器的每个用户引入了使用 javascript 的网站重定向。我确信谷歌缓存将始终将主页作为缓存页面。但是，当我查看 Google 缓存页面时，我看到了一个重定向页面。据我所知，Googlebot 会忽略页面上的 javascript，因此我在关闭 javascript 并使用 Googlebot 用户代理的情况下对其进行了测试，并显示了主页。

这是javascript重定向的代码：

```
var 
                ua = navigator.userAgent.toLowerCase(),
                uaVersion = 0,
                isIE = !isOpera && (ua.indexOf("msie") >= 0),
                isFirefox = !!isGecko && (ua.indexOf("firefox/") >= 0),
                isChrome = !!isWebKit && (ua.indexOf("chrome/") >= 0),
                isSafari = (ua.indexOf("safari") >= 0),
                isValid = false,
                userLang = (navigator.userLanguage || navigator.language).split("-")[0].toLowerCase();

            if (isIE)
                uaVersion = parseFloat(ua.match(/msie (\d+\.\d+)/)[1]);

            if (isFirefox)
                uaVersion = parseFloat(ua.match(/ firefox\/(\d+\.\d+)/)[1]);

            if (isSafari)
                uaVersion = parseFloat(ua.match(/ safari\/(\d+(\.\d+)?)/)[1]);

            if (isChrome)
                uaVersion = parseFloat(ua.match(/ chrome\/(\d+(\.\d+)?)/)[1]);

         if (!isIE && !isFirefox && !isSafari && !isChrome)
             isValid = true;
         else 
                isValid = (isIE && (uaVersion >= 8)) || (isFirefox && (uaVersion >= 16)) || (isSafari && (uaVersion >= 5)) || (isChrome && (uaVersion >= 11));

            if (!isValid)
                window.location = ["/friendly/browser_", ".html"].join(userLang); 
```

非常感谢您的帮助。

# java - 如何在 hazelcast 中为 List 编写 LoadStore

> ID：15764333
> 
> 赞同：0
> 
> 时间：2013-04-02T12:38:32.263
> 
> 标签：java, hazelcast

文档中的所有示例均针对 map、queue 和 set 提供。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T08:47:14.983

我认为您在 Hazelcast 中没有这种可能性。我在 Hazelcast 中见过（并使用过）的唯一持久性是用于分布式地图的 MapStore/MapLoader。

请参阅此处的 javadoc：[http](http://www.hazelcast.com/docs/2.5/javadoc) ://www.hazelcast.com/docs/2.5/javadoc 。尤其是 MapStore：[http](http://www.hazelcast.com/docs/2.5/javadoc/com/hazelcast/core/MapStore.html) ://www.hazelcast.com/docs/2.5/javadoc/com/hazelcast/core/MapStore.html 。

# magento - 仅在为英国上传“价格与目的地”的表费率时出现“无效表费率文件格式”

> ID：15764334
> 
> 赞同：2
> 
> 时间：2013-04-02T12:38:44.607
> 
> 标签：magento

我正在尝试为我负责的 Magento 网站设置运费。我的任务是按照以下方式设置运费：

```
Basket Cost       |  Delivery Cost
-----------------------------------
£0.00 to £9.99    |  £1
£10.01 to £29.99  |  £2
£30.00 and above  |  £3 
```

我已经按照本[教程](http://www.magentocommerce.com/knowledge-base/entry/how-do-i-set-up-table-rate-shipping "教程")进行操作，并且已经开始上传 CSV 文件。我附上了 CSV 文件的屏幕截图。![在此处输入图像描述](https://i.stack.imgur.com/o1zro.png)

每次我上传这个文件并保存它时，我都会收到以下错误：

> “无效的表格费率文件格式”

我的 CSV 文件基于本教程，并尝试了输入“United Kingdom”、“GBR”和“GB”等所有方法，但仍然无法正常工作。我还将其设置为“价格与目的地”，并且仅适用于英国。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T09:48:11.363

问题是 Magento 不喜欢在电子表格中编辑过的 CSV 文件。我曾尝试过 LibreOffice 和 Excel，两者都导致了这个问题。

但是，当我在文本编辑器中编辑文件并上传时，它立即生效。我确实尝试过使用 Excel 中的保存设置来实现文本编辑器正在执行的操作，但它似乎不起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T19:14:07.140

该错误表明它与表值无关，而是与文件格式有关。

您的文件是逗号分隔还是制表符分隔。

只需在 edit plus 或一些简单的编辑器中打开您的文件。

[http://www.magentocommerce.com/knowledge-base/entry/how-do-i-set-up-table-rate-shipping](http://www.magentocommerce.com/knowledge-base/entry/how-do-i-set-up-table-rate-shipping)链接有一些解释。在这里，您将找到一个导出按钮，使用此按钮导出文件，然后填充此文件并上传。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T13:27:05.337

没有正好 10 英镑的运费。我也认为 0.00 英镑不是价格。第 2 行 d 列可能应该是 0.1 你知道吗？0 不是价格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-21T03:26:41.417

我遇到了这个问题，它让我发疯。我最终将文件保存为 Unicode(utf-8)，然后它运行良好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-14T21:49:12.660

只需使用开放式办公室导出，但在保存选择时

1- [![在此处输入图像描述](https://i.stack.imgur.com/1IpsY.png)](https://i.stack.imgur.com/1IpsY.png)

2-

[![在此处输入图像描述](https://i.stack.imgur.com/571Pe.png)](https://i.stack.imgur.com/571Pe.png)

3-这里用这个替换这个“

[![在此处输入图像描述](https://i.stack.imgur.com/SxXtG.png)](https://i.stack.imgur.com/SxXtG.png)

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2016-11-28T19:59:21.490

轻松检查此[https://www.elgentos.nl/tablerates/](https://www.elgentos.nl/tablerates/) creator - 易于使用且完美运行

# linux - 为 AIX 编写设备驱动程序...建议

> ID：15764335
> 
> 赞同：0
> 
> 时间：2013-04-02T12:38:45.557
> 
> 标签：linux, unix, freebsd, aix

我想学习如何为 IBM AIX OS 编写设备驱动程序。我想知道有没有办法做到这一点？

我可以下载 AIX 吗？任何书籍或文档都可以在同一个地方找到吗？

如果没有，那么如果我学习如何在 FreeBSD/Linux 上编写驱动程序，这些知识会有帮助吗？

请建议我..

提前非常感谢。

*   马克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:22:52.590

为其他平台（如 BSD 或 Linux）编写驱动程序会有所帮助，但也会带来伤害。

AIX 有一个可抢占的、可分页的内核，这使得编写它真的很奇怪。系统调用中的线程可以被抢占。这对于内核来说是不寻常的。内核中的数据结构可以被分页。这也是不寻常的。锁定机制也很不寻常。

如您所知，查找有关 AIX 的信息相当困难。pubs 实际上确实记录了大部分内容，但发现它相当具有挑战性，因为 IBM 和 AIX 倾向于使用自己的术语。

几年前出版的一本相当不错的书。您可能会在 ebay 或有关为 AIX 编写设备驱动程序的东西上找到它。

IBM 还有一些合作伙伴计划，谷歌“合作伙伴世界”，试图提供帮助。

您会发现的另一件事（尤其是合作伙伴计划）是 AIX 就像 IBM 的红发继子。合作伙伴世界的人们想谈论 Tivoli、Lotus、DB2、Rational 等，而很少有人知道很多/任何关于 AIX 的知识。但他们确实可以使用设备等。

这将是一条艰难的攀登之路。我一直在想，你为什么决定这样做。AIX 驱动程序编写器的市场是零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-14T16:39:02.483

## 匿名无私帮助（以访客身份发布！）

在 AIX 4.1 上找到了这本相当过时的书，

[http://bio.gsi.de/DOCS/AIX/SC23-2593-00.pdf](http://bio.gsi.de/DOCS/AIX/SC23-2593-00.pdf)

# winapi - 如何在 Windows API 中获取特定月份的所有天数？

> ID：15764339
> 
> 赞同：0
> 
> 时间：2013-04-02T12:38:56.677
> 
> 标签：winapi

如何在 Windows API 中获取特定月份的所有天数？

我的要求不是当天，而是整个月的天数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:51:52.093

我想您想知道给定年份中给定月份有多少天。我不知道这个 Win32 的 API。

实际上这个实现很简单，一月有 31 天，三月有 31 天，四月有 30 天等等。二月可以有 28 天或 29 天，这取决于我们是否在闰年。

您可以使用以下公式确定 y 是否是闰年，其中 y 是年份：

(y % 4 == 0) ? ( (y % 100 == 0) ? ( (y % 400 == 0)? 1 : 0) : 1) : 0;

这应该足以让您编写一个函数来返回给定年份中给定月份的天数。

也看看[Win32的时间函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms725479%28v=vs.85%29.aspx)。

# php - 从现有数组创建多个数组

> ID：15764343
> 
> 赞同：-4
> 
> 时间：2013-04-02T12:39:09.593
> 
> 标签：php, arrays

我被困在一个有 3 个数组的地方，如下所示：

```
$c = array("red","green","blue");
$s = array("12","13","14");
$l = array("3","4","5"); 
```

基于这个数组，我需要这样的数组：

```
$one = array("red", "12", "3");
$two = array("red", "12", "4");
$three = array("red", "12", "5");
$three = array("red", "13", "3");
........... 
```

同样，我需要创建包含上述 3 个数组的所有组合的数组。

我试图通过循环创建，但谁能告诉我一个更好的解决方案或现有的 php 函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:47:33.433

有一个帮助类：

[https://github.com/noptic/co3/blob/master/src/daliaIT/co3/util/generator/ArrayGenerator.php](https://github.com/noptic/co3/blob/master/src/daliaIT/co3/util/generator/ArrayGenerator.php)

该包不再被维护，但您可以删除“IInject”接口和“inject”方法并将其用作独立类。

可以使用 foreach 迭代该类，而无需在内存中创建所有组合。

如果您需要一个“真实”数组，请调用“toArray”方法

# android - 在android服务中启动蓝牙

> ID：15764349
> 
> 赞同：0
> 
> 时间：2013-04-02T12:39:38.513
> 
> 标签：android, bluetooth, broadcastreceiver, android-service

我正在开发一个应用程序，它应该在 android 服务中启动蓝牙扫描（无需请求用户启用蓝牙，因为该应用程序根本没有任何活动）并且我的应用程序没有 UI，或者更准确地说我的设备没有 LCD/LED 显示屏。经过详尽的搜索和引用 google 和 stackoverflow 中的链接后，我可以部分找到解决方案并编写以下代码。

这里我从广播接收器启动了一个服务，在服务中我启动了蓝牙，但是蓝牙好像没有开启，我试过直接使用代码开启蓝牙

```
BluetoothAdapter.getDefaultAdapter().enable() 
```

也试过

```
Intent btIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
btIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
serviceContext.startActivity(btIntent); 
```

但在任何一种情况下，蓝牙都不会打开。

这是清单文件：

```
android:versionCode="1"
android:versionName="1.0" android:permission="android.permission.RECEIVE_BOOT_COMPLETED" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />
<uses-permission android:name="android.permission.BLUETOOTH"/>
<uses-permission android:name="android.permission.BLUETOOTH_ADMIN"/>
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"/>

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >

    <receiver android:name=".StartReceiver">
        <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED"/>
        </intent-filter>
    </receiver>

    <service android:name=".StartService"></service>
</application> 
```

这是广播接收器类：

```
public class StartReceiver extends BroadcastReceiver{

@Override
public void onReceive(Context context, Intent intent) {
    Intent receiverIntent = new Intent(context, StartService.class);
    context.startService(receiverIntent);
    Log.i("Autostart", "started");
}
} 
```

和服务类：

```
public class StartService extends Service{

private static final String TAG = "BluetoothService";
BluetoothAdapter btAdapter;
BluetoothDevice device;

Context serviceContext;

@Override
public IBinder onBind(Intent arg0) {
    return null;
}

@Override
public void onStart(Intent intent, int startid){
    Toast.makeText(this, "Bluetooth Service Started", Toast.LENGTH_LONG).show();
    Log.d(TAG, "OnStart");

    BluetoothAdapter.getDefaultAdapter().enable();
    //Intent btIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
    //btIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    //serviceContext.startActivity(btIntent);

    registerReceiver(bcReceiver, new IntentFilter(BluetoothDevice.ACTION_FOUND));

        btAdapter.startDiscovery();

 }

@Override
public void onDestroy(){
    BluetoothAdapter.getDefaultAdapter().disable();
    unregisterReceiver(bcReceiver);
    btAdapter.cancelDiscovery();
}

private final BroadcastReceiver bcReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {

        String action = intent.getAction();
        if(BluetoothDevice.ACTION_FOUND.equals(action)){

            //Do Something
        }
    }
};
} 
```

此外，服务类中使用的 Toast 消息也不会显示。

我的代码中没有启用和扫描蓝牙可能有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:55:34.920

您在错误的方法中添加了代码，这就是为什么它不调用只是使用`onStartCommand`方法。为此，请检查[服务生命周期](http://developer.android.com/guide/components/services.html)

```
@Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        // TODO Auto-generated method stub
        Toast.makeText(getApplicationContext(), "Bluetooth Service Started", Toast.LENGTH_LONG).show();

        Log.e("in onStartCommand", "onStartCommand");
        BluetoothAdapter.getDefaultAdapter().enable();
       //Intent btIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
       //btIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
       //serviceContext.startActivity(btIntent);

       registerReceiver(bcReceiver, new IntentFilter(BluetoothDevice.ACTION_FOUND));

       btAdapter.startDiscovery();

       return super.onStartCommand(intent, flags, startId);
    } 
```

# javascript - Javascript 的数组和对象返回字符串

> ID：15764350
> 
> 赞同：0
> 
> 时间：2013-04-02T12:39:41.007
> 
> 标签：javascript

我正在阅读这些[幻灯片](https://speakerdeck.com/dherman/es6-deep-dive?slide=64)，发现以下 javascript 行：

```
 ({} + [])[!![] + !![] + !![]] + (![] + [])[!![] + !![] + !![]] 
```

如果您在控制台执行此行，**它将返回“js”。** 更改代码会使该行返回不同的字母。我几乎可以返回我的名字（缺少“n”）：

```
({} + [])[!![] + !![] + !![]] + (![] + {})[!![] + !![] + !![] + !![]] + (![] + {})[![] + !![] ] 
```

**为什么会发生这种情况？这是如何工作的？**幻灯片没有提供太多关于它的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T12:52:46.587

*   `{} + []`：当`+`有除数字以外的操作数时，它调用`toString`两个操作数并连接它们的值。`{}.toString()`返回`[object Object]`并`[].toString()`返回数组的内容，它只是一个空字符串，因为数组不包含任何内容：

    ```
     ("[object Object]" + "")[!![] + !![] + !![]] + (![] + [])[!![] + !![] + !![]]

     ==>

     "[object Object]"[!![] + !![] + !![]] + (![] + [])[!![] + !![] + !![]] 
    ```

*   当`[]`转换为布尔值时，它返回 true。`!!`如果其操作数不与`undefined`、`null`、`0`或空字符串比较，则逻辑返回 true `""`。因此`!![]`返回真。

    当对布尔值进行算术运算时，会执行整数提升。值`true`和`false`分别转换为`1`和`0`：

    ```
    "[object Object]"[true + true + true] + (![] + [])[true + true + true]

    ==>

    "[object Object]"[1 + 1 + 1] + (![] + [])[1 + 1 + 1]

    ==>

    "[object Object]"[3] + (![] + [])[3] 
    ```

*   下标运算符`[n]`获取`(n + 1)-th`类数组结构的成员（因为数组是 0 索引的）。第一个`[3]`获取字符串的第 4 个字符，其为`"j"`：

    ```
    "j" + (![] + [])[3] 
    ```

*   `![]`返回 false （因为`[]`是真实的）并`[]`返回一个空字符串：

    ```
    "j" + (false + "")[3]

    ==>

    "j" + "false"[3] 
    ```

*   中的第 4 个字符`"false"`是“s”（数组索引为 0）。所以这解决了：

    ```
    "j" + "s"

    ==> "js" 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T12:49:48.300

如果你仔细观察，有两件事情发生，一件是添加一个空对象和一个数组，另一件是索引器。

在 JS 中，`{} + []`返回 0

`({} + [])`返回“[对象对象]”

`[] + {}`返回“[对象对象]”

`![] + {}`返回“假[对象对象]”

`(![] + [])`返回“假”

此外，由于一切都是类型可转换的，所以`true+true`= 2（true 等价于 1）。 `!![]`将返回`true`（布尔值），因此`!![] + !![] + ![]`与`true + true + true`等于 3 的操作相同。

因此，为此，您正在评估以字符串形式出现的内容，然后对这些字符串进行索引以获取各个字符。您可以从“假”和“对象”这两个词中进行选择。

# c++ - 如何在 C++ 中获取 linux 命令输出字符串和输出状态

> ID：15764351
> 
> 赞同：6
> 
> 时间：2013-04-02T12:39:43.150
> 
> 标签：c++, linux, command

我想在 C++ 程序中获取 Linux 命令的输出字符串以及命令输出状态。我正在我的应用程序中执行 Linux 命令。

例如： 命令：

> rmdir abcd

命令输出字符串：

> rmdir: 删除 `abcd' 失败: 没有这样的文件或目录

命令状态：

> 1（表示命令失败）

我尝试使用`system()`给出输出状态的 Linux 函数和`popen()`给出命令输出字符串的函数，但是这两个函数都没有给出 Linux 命令的输出字符串和输出状态。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T12:41:45.167

输出字符串在标准输出或标准错误描述符中（分别为 1 或 2）。

您必须将这些流（查看`dup`并`dup2`运行）重定向到可以阅读它们的地方（例如 - POSIX `pipe`）。

在 C 中我会做这样的事情：

```
int pd[2];
int retValue;
char buffer[MAXBUF] = {0};
pipe(pd);
dup2(pd[1],1);
retValue = system("your command");
read(pd[0], buffer, MAXBUF); 
```

现在，您在缓冲区中有（部分）输出，在 retValue 中有返回码。

或者，您可以使用`exec`(ie ) 中的函数并使用or`execve`获取返回值。`wait``waitpid`

更新：这将只重定向标准输出。要重定向标准错误，请使用`dup2(pd[1],1)`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T13:17:19.373

最简单的解决方案是使用`system`, 并将标准输出和标准错误重定向到临时文件，您可以稍后将其删除。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T12:47:32.607

不幸的是，在 Linux 上的 C 语言中没有简单的方法可以做到这一点。[这是](https://stackoverflow.com/a/12839498/1149736)一个如何正确读取/写入子进程的 stdout/stderr/stdin 的示例。

当您想要接收退出代码时，您必须使用[`waitpid`](http://support.sas.com/documentation/onlinedoc/sasc/doc/lr2/waitpid.htm)（完整示例在提供的页面底部提供）：

```
endID = waitpid(childID, &status, WNOHANG|WUNTRACED); 
```

现在你只需要将这两者结合在一起:)

还有一本很棒的免费书籍，名为***A** dvanced **L** inux **P** rogramming* (ALP)，其中包含有关此类问题的详细信息，请[点击此处](http://advancedlinuxprogramming.com/alp-folder/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-27T10:41:50.043

基于上面 Piotr Zierhoffer 的回答，这里有一个函数可以做到这一点，并且还可以恢复 stdout 和 stderr 的原始状态。

```
// Execute command <cmd>, put its output (stdout and stderr) in <output>,
// and return its status
int exec_command(string& cmd, string& output) {
    // Save original stdout and stderr to enable restoring
    int org_stdout = dup(1);
    int org_stderr = dup(2);

    int pd[2];
    pipe(pd);

    // Make the read-end of the pipe non blocking, so if the command being
    // executed has no output the read() call won't get stuck
    int flags = fcntl(pd[0], F_GETFL);
    flags |= O_NONBLOCK;

    if(fcntl(pd[0], F_SETFL, flags) == -1) {
        throw string("fcntl() failed");
    }

    // Redirect stdout and stderr to the write-end of the pipe
    dup2(pd[1], 1);
    dup2(pd[1], 2);
    int status = system(cmd.c_str());
    int buf_size = 1000;
    char buf[buf_size];

    // Read from read-end of the pipe
    long num_bytes = read(pd[0], buf, buf_size);

    if(num_bytes > 0) {
        output.clear();
        output.append(buf, num_bytes);
    }

    // Restore stdout and stderr and release the org* descriptors
    dup2(org_stdout, 1);
    dup2(org_stderr, 2);
    close(org_stdout);
    close(org_stderr);

    return status;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-26T09:16:49.927

您可以使用`popen`系统调用，它将输出重定向到文件，并且您可以从文件将输出重定向到字符串。像 ：

```
 char buffer[MAXBUF] = {0};
    FILE *fd = popen("openssl version -v", "r");
    if (NULL == fd)
    {
        printf("Error in popen");
        return;
    }
    fread(buffer, MAXBUF, 1, fd);
    printf("%s",buffer);

    pclose(fd); 
```

欲了解更多信息，请阅读`man`页面`popen`。

# android - 在 Robolectric 中多次运行测试

> ID：15764356
> 
> 赞同：1
> 
> 时间：2013-04-02T12:39:56.220
> 
> 标签：android, testing, junit, robolectric, test-runner

我想多次运行测试。例如，假设我有一个这样的测试类：-

```
RunWith(RobolectricTestRunner.class)
public class Common {
     int n = 0;
     @Test
     public void shouldRun() {
          System.out.println(n++);
     ...
     }
} 
```

现在，我怎样才能继续重复测试直到满足条件，比如假设如果 n = 10 然后停止。

[我尝试了本博客](http://codehowtos.blogspot.in/2011/04/run-junit-test-repeatedly.html)中描述的一种方法，并创建了一个扩展 RobolectricTestRunner 的自定义测试运行器，并编写了这样的测试类：-

```
@RunWith(ExtendedRobolectricTestRunner.class)
public abstract class Common  {    

    @Retention(RetentionPolicy.RUNTIME)  
    @Target({ElementType.METHOD})  
    public @interface Repeat {  
          int value();  
    }  

    int n = 0;

    @Test
    @Repeat(10)     
    public void shouldRunCase1Port() {      
        System.out.println(n++);
} 
```

但没有成功。有人可以建议吗？

# jquery - jQuery on edit 将第一个 div 动态切换到 li 内的辅助 div

> ID：15764357
> 
> 赞同：-1
> 
> 时间：2013-04-02T12:39:56.847
> 
> 标签：jquery, css, html, dynamic

我遇到了一些问题，我正在研究“就地编辑”实现，并希望动态检索一个 li 内的两个 div 的 ID，第一个 div 默认是可见的，第二个设置为 display: none; 当我单击钢笔“图标”（跨度）时，我想切换即设置第一个 div：显示：无；第二个显示：block；到目前为止，这是我的 jQuery：

```
$('.edit-tools').each(function () {
             var pen = this;
             $(pen).click(function () {
                 var div_id_first = $(this).closest(".school").attr('id');
                 var div_id_second = $(".school-edit").attr('id');

                 console.log(div_id_first);
                 console.log(div_id_second);

                 $('#' + div_id_first).css("display", "none");
                 $('#' + div_id_second).css("display", "block");

                 $('.edit-tools').attr("disabled", true); 
             });
         }); 
```

**编辑：问题出在第二个 ID 上，这是因为另一个 div 在外面，而笔（跨度）在第一个 div 之内，这就是为什么最接近（）；方法有效。**

主要问题是如何获得第二个的 id，

```
 <li>
    <div id="09990-view"></div>
    <div id="09990-edit" style="display: none;"></div>
 <li> 
```

这是jsfiddle：http: [//jsfiddle.net/tF6nD/3/](http://jsfiddle.net/tF6nD/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:50:53.550

工作示例：http: [//jsfiddle.net/tF6nD/5/](http://jsfiddle.net/tF6nD/5/)

您需要根据`li`元素获取孩子。

```
 $('.edit-tools').click(function () {
             var div_id_first = $(this).closest("li").find(".school").attr('id');
             var div_id_second = $(this).closest("li").find(".school-edit").attr('id');

             console.log(div_id_first);
             console.log(div_id_second);

             $('#' + div_id_first).css("display", "none");
             $('#' + div_id_second).css("display", "block");

             $('.edit-tools').attr("disabled", true); 
         }); 
```

# mysql - mysql_fetch_fields 返回与预期不同的长度

> ID：15764359
> 
> 赞同：0
> 
> 时间：2013-04-02T12:40:07.963
> 
> 标签：mysql, c

我需要根据选择的结果类型在其他数据库中创建表。查询结果可以映射到表中的实际列，也可以不映射到 fe `Select 1, c from char_length_test`。

如何在使用 mysql C api 的 select 语句后获取实际列大小？

我创建了这样的表：

```
CREATE TABLE char_length_test (c char(22)) 
```

并`mysql_real_query`用于执行此查询

```
SELECT c from char_length_test 
```

之后，我执行`mysql_fetch_fields`以获取`c`字段长度并期望它为 22，就像在 create table 语句中一样。不幸的是，长度包含 66 的值（比我预期的多 3 倍）。尝试了不同的尺寸，但结果是一样的，长度总是大 3 倍。

还使用 gdb 查看是否有任何其他包含预期值的数据字段：

```
{
name             = "c",
org_name         = "c",
table            = "char_length_test",
org_table        = "char_length_test",
db               = "database",
catalog          = "def",
def              = 0x0,
length           = 66,
max_length       = 0,
name_length      = 1,
org_name_length  = 1,
table_length     = 16,
org_table_length = 16,
db_length        = 6,
catalog_length   = 3,
def_length       = 0,
flags            = 0,
decimals         = 0,
charsetnr        = 33,
type             = MYSQL_TYPE_STRING,
extension        = 0x0
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:36:36.000

mysql_fetch_fields() 和 mysql_field_len() 将返回存储 VARCHAR 值所需的字节数，而不是字符数。对于 UTF-8 列，这将返回实际列大小的 3 倍，即使文档另有说明。这是为了让您的 C 代码知道要分配多少内存。如果您将 MySQL 连接（而不是表结构！）设置为不同的字符集，您将得到不同的结果。

编辑：

[您可以通过调用mysql_set_character_set()](http://dev.mysql.com/doc/refman/5.0/en/mysql-set-character-set.html)来更改 MySQL 连接的字符集。如果您使用 8 位字符集，您应该获得与数据库列的宽度匹配的字节数，例如：

```
mysql_set_character_set(&mysql,'latin1'); 
```

# r - 在 R 中向 data.frame 添加列

> ID：15764361
> 
> 赞同：1
> 
> 时间：2013-04-02T12:40:09.660
> 
> 标签：r

有 2 个向量，如下所示：

```
vec1<-c("x", "y")
vec2<-c(rep(0, 5)) 
```

我想创建一个 data.frame 对象，其中 vec1 成为 data.frame DF 的第一列，而 vec2 也成为具有列名的行。视觉上讲，可能是这样的。

```
 vec1  1   2   3   4   5
 x     0   0   0   0   0
 y     0   0   0   0   0 
```

我尝试了以下代码，但它将两个向量都添加为列：

```
 DF<-data.frame(vec1, vec2) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T12:45:45.000

您可以生成整个矩阵，然后将`data.frame`其绑定到您的第一个向量，而不是为您的行生成向量。像这样的东西：

```
mat <- matrix(0, nrow=2, ncol=5)
vec <- c("x","y")
data.frame(vec, mat) 
```

这使 ：

```
 vec X1 X2 X3 X4 X5
1   x  0  0  0  0  0
2   y  0  0  0  0  0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T12:47:56.627

您可以`rbind()`在`data.frame()`函数内部使用将`vec2`值放入新数据框的两行中。

```
vec1<-c("x", "y")
vec2<-c(rep(0, 5))
data.frame(vec1,rbind(vec2,vec2))

  vec1 X1 X2 X3 X4 X5
1    x  0  0  0  0  0
2    y  0  0  0  0  0 
```

# appcelerator-mobile - Webview 滑动问题 - Appcelerator Titanium

> ID：15764365
> 
> 赞同：0
> 
> 时间：2013-04-02T12:40:24.070
> 
> 标签：appcelerator-mobile

现在我正在使用一个 webview 来显示我的 aplicationDatadirectory 中的数据，这里一切正常，当用户分别单击下一步时，我会得到内容。现在我正在做的是在 webview 的加载中，我在 webview 的 html 中注册“touchevent”和“touchmove”，如下所示：-

```
$.webview.evalJS('document.getElementsByTagName("body")[0].addEventListener("touchstart", function mytouch(){Ti.App.fireEvent("touch", {X:event.touches[0].pageX,Y:event.touches[0].pageY,length:event.touches.length});}, false);'); 
$.webview.evalJS('document.getElementsByTagName("body")[0].addEventListener("touchmove", function mymove(){Ti.App.fireEvent("move", {X:event.touches[0].pageX,Y:event.touches[0].pageY,length:event.touches.length});}, false);'); 
```

在此基础上，我发现了滑动事件。我在 webview 中得到了正确的 html（我可以看到图像）。但我无法获得 touchstart 和 move 呼叫。我不知道这里有什么问题。我在这里使用 url 在 webview 中设置数据。

现在，当我使用 html 在 webview 中设置数据时（我在一个 var 中使用了我的 html 文件的数据（如下所示））现在我无法看到图像，它只显示一个黑色边框（空）但这里我的 touchstart 和 touchmove 事件是开火我的滑动也按预期工作。我正在 iPhone 中检查此功能。

任何人都可以找到问题所在吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:28:26.207

我认为这取决于您申请的时间

```
$.webview.evalJS('document.getElementsByTagName("body")[0].addEventListener("touchstart", function mytouch(){Ti.App.fireEvent("touch", {X:event.touches[0].pageX,Y:event.touches[0].pageY,length:event.touches.length});}, false);'); 
$.webview.evalJS('document.getElementsByTagName("body")[0].addEventListener("touchmove", function mymove(){Ti.App.fireEvent("move", {X:event.touches[0].pageX,Y:event.touches[0].pageY,length:event.touches.length});}, false);'); 
```

如果您使用`html`属性数据立即加载，您可以在设置`html`内容后使用代码。如果您使用`url`（即使它位于本地，这对 android 来说可能很困难），那么您需要等待很短的时间，直到页面加载完毕。还有一个事件监听器（web view-event `load`），但我不能说这是否适用于本地资源，但我不这么认为。

在这种情况下，您应该将您的 javascript 片段应用到您的 html 资源中（如果它们在本地），而不是使用`evalJS`.

`html`请注意，当您通过属性提供内容时，android 上存在一个问题，即您无法在 web 视图中使用本地图像（资源文件夹） 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T05:47:52.650

我让它在 iOS 中滑动工作（在 android 中它正在工作）。我没想到这件事是一个原因，但我不知道它背后的逻辑。我正在从应用程序数据目录访问 .xhtml 文件，它在 android 中没有任何问题，但在 iOS 中却没有。

我只是将（在我的代码中重命名）.xhtml 文件更改为 .html，现在它正在工作。:) 希望这可以帮助正在寻找相同的人。（或只是为了他的兴趣）

谢谢。

# python - 带有 css 类的 PyQt 样式失败

> ID：15764373
> 
> 赞同：1
> 
> 时间：2013-04-02T12:40:48.990
> 
> 标签：python, css, qt, pyqt, stylesheet

我正在开发一个必须显示一些工具按钮的 GUI。我正在使用外部 CSS 文件来设置它们的样式。为了方便起见，我定义了一个 CSS 类（使用 setProperty），并在 CSS 文件中使用它来根据它们的类更改按钮的外观。

我的 Python 代码如下所示：

```
...
bt = QtGui.QToolButton(parent.qtObject)
bt . setToolButtonStyle ( QtCore.Qt.ToolButtonTextUnderIcon )
bt.setProperty('class','StaticButton')
bt.setStyleSheet(css_content)
... 
```

我的 CSS 就像：

```
QToolButton.StaticButton
{
    border: 2px solid #4f4f51;
    border-radius: 5px;
    font-size: 10px;
    background-color: qlineargradient(x1: 0, y1: 0, x2: 0, y2: 1,stop: 0 #e4e4c8, stop: 1 #b9b9a9);
} 
```

问题是只有按钮的背景受到影响。我尝试了许多替代方案，例如`QToolButton[class=StaticButton]`在 CSS 文件中或`.StaticButton`仅在 CSS 文件中。两种选择都导致了保存行为。如果我直接在按钮上应用 CSS：

```
bt.setStyleSheet("border: 2px solid #4f4f51;border-radius: 5px;font-size: 10px;background-color: qlineargradient(x1: 0, y1: 0, x2: 0, y2: 1,stop: 0 #e4e4c8, stop: 1 #b9b9a9);") 
```

一切都很完美，但我不想在我的 python 代码中使用 CSS。

有人可以告诉我我的代码有什么问题吗？我不明白为什么使用背景属性而不使用其他属性。

注意：我检查了导入的 CSS，文件完全有效。我做了几次测试，每次只有背景属性有效......发生了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T12:47:42.137

根据参考表设置属性肯定会起作用，但是有一个烦人的事情。ps：我遇到这个问题一个月左右就认输了。

我的解决方案即将解决。有点hacky

```
bt = QToolButton(.)
bt.setObjectName("btStaticxxx") # xxx to any string 
```

css;

```
QToolButton#btStatic*   //collapses all ToolButton instances that objectname startswith btStatic
{
.
.
} 
```

# c - 比较字符串的字符

> ID：15764377
> 
> 赞同：-6
> 
> 时间：2013-04-02T12:41:04.413
> 
> 标签：c, string

如何使用`if`, `string[i]`(`i`是一系列帽子字符串的数字) 比较字符串的每个字符。该程序的想法是为a = 1，b = 2之类的字母赋值，如果我在控制台中写一个单词（“a，b，a，b”），我会得到1 + 2 +的总和1+2。我想比较字符串的每个字符，直到字符串的结尾。像这样的东西：

```
#include <stdio.h >

int main ()
{
    char string1[20];

    char a='a', b='b', g='g', X='X', i='i', H='H', V='V', d='d', e='e', v='v', z='z', E='E', T='T', I='I', k='k', l='l', m='m', n='n', o='o', p='p', j='j', r='r', s='s', t='t', u='u', f='f', q='q', R='R', y='y', S='S', w='w', C='C', W='W', x='x', h='h', c='c', J='J', Z='Z';

    int rigi;
    int sum;

    printf (" my word is:\n");
    scanf( "%19s ", string1);

     sum=0;
       for (rigi = 0; string1[rigi] !='\0'; rigi++)
    {

    if (string1[rigi]==a ) {sum= sum +1;} else
    if (string1[rigi]==b ) {sum= sum +2;} else
    if (string1[rigi]==g ) {sum= sum +3;} else
    if (string1[rigi]==d ) {sum= sum +4;} else
    if (string1[rigi]==e ) {sum= sum +5;} else
    if (string1[rigi]==v ) {sum= sum +6;} else
    if (string1[rigi]==z ) {sum= sum +7;} else
    if (string1[rigi]==E ) {sum= sum +8;} else
    if (string1[rigi]==T ) {sum= sum +9;} else
    if (string1[rigi]==i ) {sum= sum +10;} else 
    if (string1[rigi]==k ) {sum= sum +20;} else
    if (string1[rigi]==l ) {sum= sum +30;} else
    if (string1[rigi]==m ) {sum= sum +40;} else
    if (string1[rigi]==n ) {sum= sum +50;} else
    if (string1[rigi]==I ) {sum= sum +60;} else
    if (string1[rigi]==o ) {sum= sum +70;} else
    if (string1[rigi]==p ) {sum= sum +80;} else
    if (string1[rigi]==J ) {sum= sum +90;} else
    if (string1[rigi]==r ) {sum= sum +100;} else
    if (string1[rigi]==s ) {sum= sum +200;} else
    if (string1[rigi]==t ) {sum= sum +300;} else
    if (string1[rigi]==V ) {sum= sum +400;} else
    if (string1[rigi]==u ) {sum= sum +0;} else
    if (string1[rigi]==f ) {sum= sum +500;} else
    if (string1[rigi]==q ) {sum= sum +600;} else
    if (string1[rigi]==R ) {sum= sum +700;} else 
    if (string1[rigi]==y ) {sum= sum +800;} else
    if (string1[rigi]==S ) {sum= sum +900;} else
    if (string1[rigi]==C ) {sum= sum +1000;} else
    if (string1[rigi]==c ) {sum= sum +2000;} else
    if (string1[rigi]==Z ) {sum= sum +3000;} else
    if (string1[rigi]==w ) {sum= sum +4000;} else
    if (string1[rigi]==W ) {sum= sum +5000;} else
    if (string1[rigi]==x ) {sum= sum +6000;} else
    if (string1[rigi]==X ) {sum= sum +7000;} else
    if (string1[rigi]==j ) {sum= sum +8000;} else
    if (string1[rigi]==h ) {sum= sum +9000;} else
    if (string1[rigi]==H ) {sum= sum +1000;} else
    {sum=0;}

       }

    printf ("%d\n" , sum);
    return 0;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:05:59.997

您需要初始化变量`a`和`b`. 我是这样想的

```
char a='a', b='b'; 
```

检查此代码。我认为这就是你需要的

```
int main ()
{
    char string[20];
    char a='a', b='b';
    int i = 0;
    int sum = 0;
    printf (" my word is:\n");
    scanf ( "%s", string);

    for (i = 0; string[i] !='\0'; i++)
    {
        if (string[i]==a ) 
        {            
             sum= sum + 1;
        } 
        else if (string[i]==b ) 
        {
             sum= sum + 2;
        }
    }
    printf ("%d\n" , sum);
    return 0;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:17:13.193

为什么不试试这个。`toascii()`包含在头文件中的函数`ctype.h`基本上将字符转换为其 ASCII 值，但由于 a 的 ascii 是 97，我们可以减去 96 并得到 a 为 1，b 为 2，依此类推。如果你愿意，你可以检查字符是大写还是小写并使其高级。但是现在我只包含了一个简单的小写字母。希望你得到你的答案。

```
 #include<stdio.h>
    #include<ctype.h>
    #include<string.h>
    main()
    {
     int i,value = 0;
     char string[10];
     printf("Enter a word");
     scanf("%s",string);
         for(i=0;i<strlen(string);i++)
     {
    value = value + (toascii(string[i]) - 96);
     }

      printf("the sum is = %d",value);
     } 
```

这是你想要做的吗？如果它是您想要的，您可以单击刻度线。

# mysql - mysql集群恢复后数据丢失

> ID：15764380
> 
> 赞同：0
> 
> 时间：2013-04-02T12:41:08.010
> 
> 标签：mysql, restore

全部，

我使用mysqldump来备份mysql集群数据，每天有1000万行数据。最近我们的集群在一次更新后崩溃了，然后我们恢复mysqldump生成的.sql文件。还原数据库时，我们遇到关键重复错误/问题，然后我使用“-f”强制还原过程。最后，恢复过程完成，所有表都恢复了。有些表较小，我们认为这是因为重复的行被忽略了。

但是最近，我们发现一些数据丢失了，似乎一些重复的数据没有正确恢复。

我可以知道在恢复过程中是否有避免这种情况的好方法，或者如何检查我们在 mysqldump 之前是否有重复？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:32:02.070

几个建议 - 查看不使用 force 选项时生成的错误，看看您是否可以找出解决根本原因的方法。使用 force 选项允许在错误发生后继续恢复，但失败的行仍然会丢失。

您是否有理由使用 mysqldump 而不是 ndb_mgm 中的备份命令 - 这是一个在线操作？如果使用本机集群（在线！）备份，则使用 ndb_restore 命令恢复数据。

# javascript - jQuery - 如何编写一个 if 提示检查 childNode.length、nextSibling 和 childNode.nodeType

> ID：15764386
> 
> 赞同：0
> 
> 时间：2013-04-02T12:41:17.010
> 
> 标签：javascript, jquery, if-statement

我需要一些很好的例子来说明如何编写一个 if 语句来检查我所有`div's`的指定数量的 childNodes.lenght 和 childNode.nodeType。

除了 100% 确定我得到了`<div>`正确的节点，它的正确节点还检查下一个兄弟姐妹。

我对 jQuery/javascript 还很陌生，所以我可能会在语法上遇到困难，但这是我目前得到的：

`var specifiedChildNodesLength = ...`

`var specifiedChildNodesType = ...`

`if( $('div').childNodes.length == specifiedChildNodesLength && $('div').childNodes.nodeType == specifiedChildNodesType) { do something }`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:53:00.067

试试这个：

```
if (($('div').children().length == specifiedChildNodesLength) && ($('div').children().get(0).nodeType == specifiedChildNodesType)) {} 
```

# c++ - 使用opengl和抗锯齿投影图像

> ID：15764389
> 
> 赞同：5
> 
> 时间：2013-04-02T12:41:20.763
> 
> 标签：c++, opengl, antialiasing

在我的工作中，我将捕获的帧的一部分与图像重叠。我用 openCV 打开我的网络摄像头，然后将捕获的帧转换为纹理并将其显示在 GLUT 窗口中。此外，我将此纹理的一部分与此图像重叠：

![在此处输入图像描述](https://i.stack.imgur.com/KMVr1.jpg)

我实时执行此操作，结果是：

![在此处输入图像描述](https://i.stack.imgur.com/1H2o8.jpg)

如您所见，投影图像的边缘不准确。我认为这是一个锯齿问题，但我不知道如何使用 opengl 进行抗锯齿处理。我试图在网上寻找，但我没有找到解决我问题的好方法。

在我的“计算”函数中，我使用以下代码将垫子图像转换为纹理：

```
GLvoid calculate(){
...
...
cvtColor(image, image, CV_BGR2RGB);
    glHint(GL_PERSPECTIVE_CORRECTION_HINT,GL_NICEST);
    glPixelStorei(GL_UNPACK_ALIGNMENT, 1);
    glBindTexture(GL_TEXTURE_2D, textures[1]);
    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER,GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_LINEAR);
    //glTexImage2D(GL_TEXTURE_2D, 0, 4,image.cols, image.rows, 0, GL_RGB,GL_UNSIGNED_BYTE, image.data);
    gluBuild2DMipmaps(GL_TEXTURE_2D, GL_RGB, image.cols, image.rows, GL_RGB, GL_UNSIGNED_BYTE, image.data);
} 
```

我使用以下代码显示结果：

```
GLvoid Show(void) {
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glEnable(GL_TEXTURE_2D);

    // Matrice di proiezione
    glMatrixMode (GL_PROJECTION);
    glLoadIdentity();
    gluOrtho2D(0, WIDTH, HEIGHT, 0); 

    // Matrice model view
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity(); 
...
...
glBindTexture(GL_TEXTURE_2D, textures[1]);
        glBegin(GL_QUADS);
        glTexCoord2f(0.0f, 0.0f); glVertex2f((GLfloat)((coord[3].x)),(GLfloat)(coord[3].y));
        glTexCoord2f(1.0f, 0.0f); glVertex2f((GLfloat)((coord[0].x)),(GLfloat)(coord[0].y));
        glTexCoord2f(1.0f, 1.0f); glVertex2f((GLfloat)((coord[1].x)),(GLfloat)(coord[1].y));
        glTexCoord2f(0.0f, 1.0f); glVertex2f((GLfloat)((coord[2].x)),(GLfloat)(coord[2].y)); 

        glEnd();    
    }
    glFlush();
    glutSwapBuffers();

} 
```

在初始化函数中，我这样写：

```
GLvoid Init() {  

    glGenTextures(2, textures);
    glClearColor (0.0, 0.0, 0.0, 0.0);

    glEnable (GL_POLYGON_SMOOTH);
    glHint (GL_POLYGON_SMOOTH_HINT, GL_DONT_CARE);
    glDisable(GL_DEPTH_TEST);

} 
```

但它不起作用......

我使用 OPenGL 4.0 和 Glut 3.7 在 Win7 x64 上工作。我的显卡是 NVidia GeForce gt 630。我还从 Nvidia 控制面板启用了抗锯齿功能，但没有任何改变。有谁知道如何帮助我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T19:58:58.870

我解决了我的问题！正如@Michael IV 建议我的那样，我使用了GLFW insted of GLUT！

为了使用 GLFW 进行抗锯齿，我使用了这行代码：

`glfwOpenWindowHint(GLFW_FSAA_SAMPLES,4);`

现在的结果非常好，如下图所示。

![在此处输入图像描述](https://i.stack.imgur.com/olFEm.jpg)

谢谢你的帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T13:59:58.917

首先，我想知道您为什么要使用 OpenGL 4.0 来处理固定（已弃用）管道...但是让我们来解决问题。您需要的是[MSAA](http://en.wikipedia.org/wiki/Multisample_anti-aliasing)。我不确定，通过控制面板启用它总是可以解决问题的。通常它是在代码内部完成的。不幸的是，您选择使用 GLUT，它没有设置硬件 MSAA 级别的选项。如果您希望能够这样做，请切换到[GLFW](http://www.glfw.org/)。另一个选项是手动执行，但这意味着您使用自定义 FBO。在这样的在场景中，您可以使用 MSAA 纹理附件设置纹理的 MSAA 级别创建 FBO（如果您愿意，也可以在片段着色器中应用自定义多重采样算法）。 [这](https://stackoverflow.com/questions/9316718/how-to-render-framebuffer-objects-on-multi-sampled-textures)是有关此主题的线程。

GLFW 允许您在窗口设置中指定 MSAA 级别。请参阅相关 API。

MSAA 确实会降低性能，但多少取决于您的硬件和可能的 OpenGL 驱动程序。

# python - Python：多次调用内置函数的有效方法？

> ID：15764390
> 
> 赞同：1
> 
> 时间：2013-04-02T12:41:20.907
> 
> 标签：python, performance, function

我有一个看起来像这样的代码：

```
def somefunction(somelist):
    for item in somelist:
        if len(item) > 10:
            do something
        elif len(item) > 6:
            do something
        elif len(item) > 3:
            do something
        else:
            do something 
```

由于我多次调用 len(item) ，这样做是否效率低下？最好按如下方式编写代码，还是它们的性能完全相同？

```
def somefunction(somelist):
    for item in somelist:
        x = len(item)
        if x > 10:
            do something
        elif x > 6:
            do something
        elif x > 3:
            do something
        else:
            do something 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T12:48:54.267

len() 是[O(1)](http://books.google.co.th/books?id=JnR9hQA3SncC&pg=PA478&dq=Python%2blen%2bbig%2bO&ei=JUbRSYPqGofqkwTy9_ihAQ&redir_esc=y#v=onepage&q=Python%2blen%2bbig%2bO&f=false)操作。这意味着调用[len()](http://docs.python.org/2/library/functions.html#len)的成本非常便宜。所以，别再担心了，更好地改进代码的其他部分。

不过，我个人认为第二种方式更好。因为如果我将您的变量名称从 更改`x`为`length`，它将增加您的代码的可读性。

```
def somefunction(somelist):
    for item in somelist:
        length = len(item)
        if length > 10:
            do something
        elif length > 6:
            do something
        elif length > 3:
            do something
        else:
            do something 
```

**注意：** `len( )`是 O(1)，包含字符串、集合和字典。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T12:54:17.947

第二种方法肯定更好，因为调用的次数`len()`减少了：

```
In [16]: import dis

In [18]: lis=["a"*10000,"b"*10000,"c"*10000]*1000

In [19]: def first():
    for item in lis:
        if len(item)<100:
            pass
        elif 100<len(item)<200:
            pass
        elif 300<len(item)<400:
            pass
   ....:         

In [20]: def second():
    for item in lis:
        x=len(item)
        if x<100:
                pass
        elif 100<x<200:
                pass
        elif 300<x<400:
                pass
   ....: 
```

您始终可以使用`timeit`模块对代码进行计时：

```
In [21]: %timeit first()
100 loops, best of 3: 2.03 ms per loop

In [22]: %timeit second()
1000 loops, best of 3: 1.66 ms per loop 
```

用于`dis.dis()`查看将 Python 字节码反汇编成助记符

```
In [24]: dis.dis(first)
  2           0 SETUP_LOOP             109 (to 112)
              3 LOAD_GLOBAL              0 (lis)
              6 GET_ITER            
        >>    7 FOR_ITER               101 (to 111)
             10 STORE_FAST               0 (item)

  3          13 LOAD_GLOBAL              1 (len)
             16 LOAD_FAST                0 (item)
             19 CALL_FUNCTION            1
             22 LOAD_CONST               1 (100)
             25 COMPARE_OP               0 (<)
             28 POP_JUMP_IF_FALSE       34

  4          31 JUMP_ABSOLUTE            7

  5     >>   34 LOAD_CONST               1 (100)
             37 LOAD_GLOBAL              1 (len)
             40 LOAD_FAST                0 (item)
             43 CALL_FUNCTION            1
             46 DUP_TOP             
             47 ROT_THREE           
             48 COMPARE_OP               0 (<)
             51 JUMP_IF_FALSE_OR_POP    63
             54 LOAD_CONST               2 (200)
             57 COMPARE_OP               0 (<)
             60 JUMP_FORWARD             2 (to 65)
        >>   63 ROT_TWO             
             64 POP_TOP             
        >>   65 POP_JUMP_IF_FALSE       71

  6          68 JUMP_ABSOLUTE            7

  7     >>   71 LOAD_CONST               3 (300)
             74 LOAD_GLOBAL              1 (len)
             77 LOAD_FAST                0 (item)
             80 CALL_FUNCTION            1
             83 DUP_TOP             
             84 ROT_THREE           
             85 COMPARE_OP               0 (<)
             88 JUMP_IF_FALSE_OR_POP   100
             91 LOAD_CONST               4 (400)
             94 COMPARE_OP               0 (<)
             97 JUMP_FORWARD             2 (to 102)
        >>  100 ROT_TWO             
            101 POP_TOP             
        >>  102 POP_JUMP_IF_FALSE        7

  8         105 JUMP_ABSOLUTE            7
            108 JUMP_ABSOLUTE            7
        >>  111 POP_BLOCK           
        >>  112 LOAD_CONST               0 (None)
            115 RETURN_VALUE        

In [25]: dis.dis(second)
  2           0 SETUP_LOOP             103 (to 106)
              3 LOAD_GLOBAL              0 (lis)
              6 GET_ITER            
        >>    7 FOR_ITER                95 (to 105)
             10 STORE_FAST               0 (item)

  3          13 LOAD_GLOBAL              1 (len)
             16 LOAD_FAST                0 (item)
             19 CALL_FUNCTION            1
             22 STORE_FAST               1 (x)

  4          25 LOAD_FAST                1 (x)
             28 LOAD_CONST               1 (100)
             31 COMPARE_OP               0 (<)
             34 POP_JUMP_IF_FALSE       40

  5          37 JUMP_ABSOLUTE            7

  6     >>   40 LOAD_CONST               1 (100)
             43 LOAD_FAST                1 (x)
             46 DUP_TOP             
             47 ROT_THREE           
             48 COMPARE_OP               0 (<)
             51 JUMP_IF_FALSE_OR_POP    63
             54 LOAD_CONST               2 (200)
             57 COMPARE_OP               0 (<)
             60 JUMP_FORWARD             2 (to 65)
        >>   63 ROT_TWO             
             64 POP_TOP             
        >>   65 POP_JUMP_IF_FALSE       71

  7          68 JUMP_ABSOLUTE            7

  8     >>   71 LOAD_CONST               3 (300)
             74 LOAD_FAST                1 (x)
             77 DUP_TOP             
             78 ROT_THREE           
             79 COMPARE_OP               0 (<)
             82 JUMP_IF_FALSE_OR_POP    94
             85 LOAD_CONST               4 (400)
             88 COMPARE_OP               0 (<)
             91 JUMP_FORWARD             2 (to 96)
        >>   94 ROT_TWO             
             95 POP_TOP             
        >>   96 POP_JUMP_IF_FALSE        7

  9          99 JUMP_ABSOLUTE            7
            102 JUMP_ABSOLUTE            7
        >>  105 POP_BLOCK           
        >>  106 LOAD_CONST               0 (None)
            109 RETURN_VALUE 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T12:44:37.010

Python 不像大多数其他语言那样自动优化事物（除非你使用 PyPy），所以第二个版本可能更快。但除非`item`有一个`len`需要一段时间的自定义实现，否则它可能也不会加快速度。在分析表明存在问题后，这种微优化应该保留给紧密的内部循环。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T12:48:25.313

您可以通过以下方式检查此类事情`dis.dis`：

```
import dis

def somefunction1(item):
    if len(item) > 10:
        print 1
    elif len(item) > 10:
        print 2

def somefunction2(item):
    x = len(item)
    if x > 10:
        print 1
    elif x > 10:
        print 2

print "#1"
dis.dis(somefunction1)

print "#2"
dis.dis(somefunction2) 
```

解释输出：

```
#1
  4           0 LOAD_GLOBAL              0 (len)
              3 LOAD_FAST                0 (item)
              6 CALL_FUNCTION            1
              9 LOAD_CONST               1 (10)
             12 COMPARE_OP               4 (>)
             15 POP_JUMP_IF_FALSE       26
[...]
  6     >>   26 LOAD_GLOBAL              0 (len)
             29 LOAD_FAST                0 (item)
             32 CALL_FUNCTION            1
             35 LOAD_CONST               1 (10)
             38 COMPARE_OP               4 (>)
             41 POP_JUMP_IF_FALSE       52
[...]
#2
 10           0 LOAD_GLOBAL              0 (len)
              3 LOAD_FAST                0 (item)
              6 CALL_FUNCTION            1
              9 STORE_FAST               1 (x)

 11          12 LOAD_FAST                1 (x)
             15 LOAD_CONST               1 (10)
             18 COMPARE_OP               4 (>)
             21 POP_JUMP_IF_FALSE       32
[...]
 13     >>   32 LOAD_FAST                1 (x)
             35 LOAD_CONST               1 (10)
             38 COMPARE_OP               4 (>)
             41 POP_JUMP_IF_FALSE       52 
```

您可以看到，在第一个示例中，`len(item)`它被调用了两次（看到这两个`CALL_FUNCTION`语句吗？），而在第二个实现中它只被调用了一次。

这意味着您的问题的其余部分归结为如何`len()`实现 - 例如列表是 O(1) （即便宜），但特别是对于您可能自己构建的列表，它不需要。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-02T12:56:39.813

Python 不会使两者等价。原因是两者对于任意函数是不等价的。让我们考虑这个函数`x()`：

```
y = 1

def x():
    return 1 
```

而这两个测试：

```
>>> print(x() + y)
2
>>> print(x() + y)
2 
```

和：

```
>>> hw = x()
>>> print(hw + y)
2
>>> print(hw + y)
2 
```

这些是完全一样的，但是，如果我们的函数有副作用怎么办？

```
y = 1

def x():
    global y
    y += 1
    return 1 
```

第一种情况：

```
>>> print(x() + y)
3
>>> print(x() + y)
4 
```

第二种情况：

```
>>> hw = x()
>>> print(hw + y)
3
>>> print(hw + y)
3 
```

你可以看到这个优化只有在函数没有副作用的情况下才有效，否则它会改变程序。由于 Python 无法判断函数是否具有副作用，因此无法进行此优化。

因此，将值存储在本地并重复使用它是有意义的，而不是一次又一次地调用该函数，尽管现实情况是它不太重要，因为差异很小。也就是说，它也更具可读性，意味着您不必重复很多次，因此以这种方式编写代码通常是一个好主意。

# selenium - 通过 Jenkins/Hudson 运行本地 Selenium 测试

> ID：15764401
> 
> 赞同：2
> 
> 时间：2013-04-02T12:42:03.620
> 
> 标签：selenium, jenkins, continuous-integration, hudson, automated-tests

我想通过 Jenkins/Hudson 运行用 Java 编写的本地 Selenium 测试脚本。是否可以从我的本地 Windows 机器运行脚本？到目前为止，我已经用 Java 编写了一些简单的 Selenium 测试，如果我通过 Eclipse IDE 执行它们，它们可以完美运行。我将感谢深入的解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T21:52:01.883

1.  Java 中的 Selenium 测试：假设它们被布置为单元测试（junit 或 testng），第二个假设是项目由 ant 或 maven 管理，因此存在一些测试（或者更确切地说是集成测试）目标或阶段并在从 IDE 调用时平稳运行。

2.  当此类测试启动时，它们会访问正在运行的 selenium 服务器（远程控制），然后启动浏览器并运行它的魔法。以下是选项： selenium 服务器可能在后台运行（并且始终可用），或者它可能在测试之前启动并在之后关闭。后者是 maven 的常见情况： pre-integration-test 阶段配置为启动 selenium rc，（然后 integration-test 阶段对其运行测试）， post-integration-test 关闭 selenium rc。

因此，到目前为止，我们可能想了解您的 IDE 在成功启动测试时调用的目标（ant）或阶段（目标）（以及它设置的变量或启用的配置文件）。

如果您从 cmd 调用相同的命令（如 'mvn clean integration-test'）并且它成功运行（与 IDE 相同），那么只需指示 jenkins 运行相同的目标/目标（我假设 jenkins 正在同一台机器上运行，在同一个用户会话中）。

如果 cmd 不能解决问题（并且您已经很好地了解了 IDE 在启动测试时为您做了什么），那么我会要求提供更多详细信息。

因此，参与的参与者是： 0\. 运行您的 junit 测试的 ant/maven 1\. 应该在 bg 中运行或首先由 ant/maven 启动的 selenium rc 2\. 浏览器（浏览器可执行文件的路径） 3\. jenkins（假设在相同的环境中运行）。

如果任何假设是错误的，请提供更多设置细节。

# iphone - 文本太大时，UILabel 上不显示文本。

> ID：15764402
> 
> 赞同：8
> 
> 时间：2013-04-02T12:42:05.717
> 
> 标签：iphone, ios, objective-c, uilabel

我有一个文本（一本书的故事）。我正在使用 UILabel 来展示它。但它并没有让我看到。我正在使用以下代码：

```
 CGSize labelsize;
    UILabel *commentsTextLabel = [[UILabel alloc] init];;
    [commentsTextLabel setNumberOfLines:0];
    commentsTextLabel.textColor = [UIColor blackColor];
    [commentsTextLabel setBackgroundColor:[UIColor clearColor]];
    [commentsTextLabel setFont:[UIFont fontWithName:@"ACaslonPro-Regular"size:17]];
    labelsize=[story sizeWithFont:commentsTextLabel.font constrainedToSize:CGSizeMake(280, 15000) lineBreakMode:NSLineBreakByWordWrapping];
    commentsTextLabel.frame=CGRectMake(20, 200, 280, labelsize.height);
   commentsTextLabel.text = story;// more than 1000 lines

   [self.view addSubview:commentsTextLabel]; 
```

当我调试我的代码时，我发现 labelize.height 出现在我的案例 13145 中。仍然没有显示。如果我将 15000 减少到 11000 ，那么文本最终会显示在视图中。

标签大小=[故事 sizeWithFont:commentsTextLabel.font constrainedToSize:CGSizeMake(280, 15000) lineBreakMode:NSLineBreakByWordWrapping];

请帮帮我。谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-07-19T11:25:32.033

`UILabel`将一次将其所有文本呈现到后备缓冲区中。iOS 设备只有有限的图形内存来完成这项工作，因此一旦图形数据超过一定大小，它就会失败。

对于大量文本，您应该使用 Core Text 或类似的东西`UITextView`，它可以更有效地按需呈现其文本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-19T00:33:39.030

我最近也遇到了同样的事情，UILabel的大小分配正确，只是UILabel本身不能容纳太多字符，最大字符限制取决于字体和字体大小。

对于我使用的字体，限制是大约 13k 个字符。我的解决方法是事先截断字符串，但这并不理想。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-21T15:53:33.577

您需要在标签上添加测试包装，否则它会从边缘流出。

```
self.label.lineBreakMode = NSLineBreakByWordWrapping; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T13:23:03.313

```
 CGSize labelsize;
    UILabel *commentsTextLabel = [[UILabel alloc] init];;
    [commentsTextLabel setNumberOfLines:0];
    commentsTextLabel.textColor = [UIColor blackColor];
    commentsTextLabel.text = @"The sediment-free enrichment (3) was cultivated anaerobically either in a mineral medium as described previously (19) with yeastextract (0.5%) as a carbon source or in autoclaved (1218C for 40 min) spentenrichment culture medium adjusted to pH 8.3 with sterile anaerobic 2 N NaOH.The spent culture medium was obtained by centrifugation (with anaerobic centrifuge tubes) of the enrichment culture grown in 0.5% yeast extract medium.The pH was kept within 8.0 to 8.5 by adjustment with anaerobic sterile 2 NNaOH. D. dehalogenans JW/IU-DC1 was grown in the base medium describedpreviously (19) supplemented as indicated in the text at 378C and pH 7.5.";
    [commentsTextLabel setBackgroundColor:[UIColor clearColor]];
    [commentsTextLabel setFont:[UIFont fontWithName:@"ACaslonPro-Regular"size:17]];
    labelsize=[commentsTextLabel.text sizeWithFont:commentsTextLabel.font constrainedToSize:CGSizeMake(280, 15000) lineBreakMode:UILineBreakModeWordWrap];
    commentsTextLabel.frame=CGRectMake(20, 200, 280, labelsize.height);
        [self.view addSubview:commentsTextLabel]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-19T06:46:34.767

如果你想显示超过 1000 行的文本，那么最好使用 UITextView 而不是 Uilabel。您可以将以下代码用于 UITextView

```
UITextView *commentsTextLabel = [[UITextView alloc] init];
    commentsTextLabel.frame=CGRectMake(20, 20, 280,100);
    commentsTextLabel.text = story;
    commentsTextLabel.editable=NO;
    commentsTextLabel.scrollEnabled=YES;
    //commentsTextLabel.numberOfLines=1;
    commentsTextLabel.textColor = [UIColor blackColor];
    //[commentsTextLabel setBackgroundColor:[UIColor clearColor]];
    //[commentsTextLabel setFont:[UIFont systemFontOfSize:17]];
    commentsTextLabel.font=[UIFont systemFontOfSize:17];
    commentsTextLabel.backgroundColor=[UIColor clearColor];
    [self.view addSubview:commentsTextLabel]; 
```

希望这会帮助你。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-07-19T10:18:13.380

您可以在 UILabel 中放置多行文本来解决您的问题。

```
textLabel.lineBreakMode = NSLineBreakByWordWrapping;
textLabel.numberOfLines = 0;
textLabel.adjustsFontSizeToFitWidth = YES; 
```

礼貌：- [https://stackoverflow.com/a/990244/1865424](https://stackoverflow.com/a/990244/1865424)

它可能会帮助你。

# php - 仅选择数组中而不是表中的那些数字

> ID：15764403
> 
> 赞同：5
> 
> 时间：2013-04-02T12:42:05.807
> 
> 标签：php, mysql, select, notin

我在 MySql 中有一个表，我在其中保存了一些数据让我们假设 a`name`和 a `stand`。我知道展位会从 1 到 100，我想选择那些没有被占用的展位。例如，假设只有 5 个展台和这张桌子：

```
|  name  |  stand  |
--------------------
|  test  |    1    |
|  anot  |    3    |
|  blah  |    4    |
|  uuuh  |    5    | 
```

在这种情况下，唯一的自由立场将是`2`.

有没有声明可以做到这一点？...我正在考虑该子句`NOT IN`，但我无法弄清楚代码...也许我可以在 MySql 中定义 am Array？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T13:07:50.167

如果您知道值是从 1 到 100，那么您可以这样做：

```
select n.num
from (select d1.d*10 + d2.d as n
      from (select 0 as d union all select 1 union all select 2 union all select 3 union all select 4 union all
            select 5 union all select 6 union all select 7 union all select 8 union all select 9
           ) d1 cross join
           (select 0 as d union all select 1 union all select 2 union all select 3 union all select 4 union all
            select 5 union all select 6 union all select 7 union all select 8 union all select 9
           ) d2
      ) nums left outer join
      stands s
      on s.stand = nums.n cross join
      (select min(stand) as minstand and max(stand) as maxstand from stands) const
where s.stand is null and nums.n between minstand and maxstand; 
```

这未经测试，因此可能存在语法错误。

也就是说，创建一个包含所有可能值（1 到 100）的表。把这个加入你的桌子。这为您提供了所有未使用的数字。但是，您希望将其限制为最小值和最大值，因此请计算这些值并将它们用于过滤。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T13:11:10.720

您可以使用整数表来获取一系列数字。

说：-

```
SELECT a.i + b.i * 10 + c.i * 100 FROM integers a, integers b, integers c 
```

使用一个名为 integers 的表，其中有一列名为 i，有 10 行，值为 0 到 9，这将为您提供 0 到 999 之间的所有数字（您可以轻松地多次加入该表以获得更大的数字）。

您可以将其加入到您的表格中以查找未使用的号码：-

```
SELECT *
FROM (SELECT a.i + b.i * 10 + c.i * 100 AS anInt FROM integers a, integers b, integers c) Sub1
LEFT OUTER JOIN someTable
ON Sub1.anInt = someTable.stand
WHERE someTable.stand IS NULL 
```

这将起作用，但也会为您提供范围内的所有数字。对于这些，您需要加入最小值和最大值

```
SELECT Sub1.anInt
FROM (SELECT a.i + b.i * 10 + c.i * 100 AS anInt FROM integers a, integers b, integers c) Sub1
INNER JOIN (SELECT MIN(stand) AS MinStand, MAX(stand) AS MaxStand FROM someTable) Sub2
ON Sub1.anInt >= Sub2.MinStand AND Sub1.anInt <= Sub2.MaxStand
LEFT OUTER JOIN someTable
ON Sub1.anInt = someTable.stand
WHERE someTable.stand IS NULL 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T13:33:58.577

在我看来，一个更简单的解决方案是创建一个包含 1 到 100 之间所有数字的表。然后从该表执行左连接到 stand 表并显示任何不匹配的值。

您可以创建一个名为“integer_values”的表，其中包含一个名为“value”的字段。然后用从 1 到 100 的所有数字填充它。然后您可以使用以下查询：

```
SELECT  i.value

FROM    integer_values AS i

        LEFT JOIN stands AS s
        ON i.value = s.stand

WHERE   s.stand IS NULL 
```

# android - Dropbox 喜欢登录？

> ID：15764405
> 
> 赞同：8
> 
> 时间：2013-04-02T12:42:09.723
> 
> 标签：android, android-layout, responsive-design

所以，我想为我的应用程序创建一个响应式**登录屏幕，当 android****软键盘**可见时，它会根据我的选择自行调整。

***我的研究：***

**注意：**我`android:windowSoftInputMode="adjustResize"`已经知道了，所以请不要只建议这个。

我已经浏览了许多著名的 android 应用程序，如**facebook等。只是为了确认天气，当****软键盘**可见时，选择调整屏幕是一个限制。

然后我在**三星 Galaxy Tab 2上使用了****Dropbox** android 应用程序，这是一个屏幕。现在，当我尝试输入电子邮件时，屏幕会以一种非常流畅且响应迅速的方式自行调整。同样，当我尝试输入密码时，同样的事情又发生了。*但是当软键盘出现时*，我找不到任何其他可以确认这种响应性的开源项目。**`xlarge`**

 ***以下是解释我想以类似方式实现的目标的屏幕：

请原谅我的大尺寸图像，因为我想明确我的观点。:)

*   没有键盘的登录屏幕

![没有键盘的登录屏幕](https://i.stack.imgur.com/6tXt4.png)

*   按下电子邮件编辑文本时的登录屏幕

![按下电子邮件编辑文本时的登录屏幕](https://i.stack.imgur.com/tDsPG.png)

*   按下密码编辑文本时的登录屏幕

![按下密码编辑文本时的登录屏幕](https://i.stack.imgur.com/AjJqw.png)

请注意屏幕的响应能力。如果您安装了该应用程序。下面的密码和电子邮件屏幕之间也存在大小差异。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T12:58:25.403

您想要达到的效果可以通过设置`android:scaleType="fitXY"`ImageView 背景来完成。

编辑-您可能还想在清单中设置

```
<activity name=".YourActivity"
    android:windowSoftInputMode="stateVisible|adjustResize">
</activity> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T12:34:00.263

```
android:windowSoftInputMode="stateHidden|adjustResize" 
```

这是登录屏幕的完整设计：

[http://www.androidhive.info/2011/10/android-login-and-registration-screen-design/](http://www.androidhive.info/2011/10/android-login-and-registration-screen-design/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T18:53:45.050

在顶部的右侧，我可以考虑使用带有权重的 LinearLayout，以便小部件适当地拉伸。用于`WRAP_CONTENT`所有文本小部件的高度，并通过设置`width = 0dp`和用 ImageButton 填充剩余宽度`layout_weight = 1`。***

# visual-studio-2010 - Visual Studio 2012 PowerShell 项目

> ID：15764407
> 
> 赞同：14
> 
> 时间：2013-04-02T12:42:11.240
> 
> 标签：visual-studio-2010, visual-studio, powershell, azure, visual-studio-2012

我们正在使用 PowerShell 在 Windows Azure 平台上预配/配置/修补虚拟机。是否有任何项目模板可用于在 Visual Studio 2012 中管理 PowerShell 项目，我可以通过这些模板管理这些脚本？

我希望能够创建

*   VS 2012 中的 PowerShell 项目并向其添加脚本文件
*   具有基本的语法着色和突出显示（有智能感知很好）。
*   使用源代码管理管理脚本

我找到了这个 Visual Studio 扩展[PowerGUI VSX](http://powerguivsx.codeplex.com/)，但它仅适用于 VS 2010。

**更新 [09/25/2013]**：找到[Visual Studio 的 PowerShell 工具](http://visualstudiogallery.msdn.microsoft.com/c9eb3ba8-0c59-4944-9a62-6eee37294597)。它提供了上面提到的在 VS 2012 中使用 PowerShell 项目的所有功能

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T13:10:23.103

PowerShell 没有得到太多 Visual Studio 的喜爱。[PowerShell ISE](http://technet.microsoft.com/en-us/library/dd315244.aspx)、[PowerGUI](http://powergui.org/index.jspa)或[PowerShell Plus](https://www.idera.com/Free-Tools/PowerShell-Plus/)怎么样？

在这三个中，最后一个是唯一具有任何源代码控制集成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-25T00:09:58.833

Microsoft 库中有另一个组件用于 Visual Studio 2012 中的 PowerShell 集成；[适用于 Visual Studio 2012 的 PowerShell 工具](https://visualstudiogallery.msdn.microsoft.com/e3f9d3bf-e630-4b3e-968a-f86ac67b836c)。

# php - Composer / SVN 存储库同步

> ID：15764415
> 
> 赞同：2
> 
> 时间：2013-04-02T12:42:52.847
> 
> 标签：php, svn, composer-php, packagist

我在配置满足或作曲家时遇到问题。到目前为止，我已经设法做到了：

1：我创建了一个名为“common”的 SVN 存储库。有几个标签（1.0、1.1） - 每个标签都有自己的 composer.json 文件，例如：

```
{
    "name": "acme/common",
    "version": "1.0"
} 
```

SVN 网址：[http ://svn.local.acme.com/svn/common](http://svn.local.acme.com/svn/common)

2：我从 satis.json 创建了作曲家存储库：

```
{
    "name": "Acme",
    "homepage": "http://dev.local.acme.com/satis/web",
    "repositories": [
        { "type": "vcs", "url": "http://svn.local.acme.com/svn/common" }
    ],
    "require-all": true
} 
```

它确实将所有标签拉入 web/packages.json：

```
{
    "packages": {
        "acme/common": {
            "1.0": {
                "name": "acme/common",
                "version": "1.0",
                "version_normalized": "1.0.0.0",
                "source": {
                    "type": "svn",
                    "url": "http://svn.local.acme.com/svn/common",
                    "reference": "/tags/1.0/@2"
                },
                "type": "library"
            },
            "1.1": {
                "name": "acme/common",
                "version": "1.1",
                "version_normalized": "1.1.0.0",
                "source": {
                    "type": "svn",
                    "url": "http://svn.local.acme.com/svn/common",
                    "reference": "/tags/1.1/@5"
                },
                "type": "library"
            }
        }
    }
} 
```

满足网址：[http ://dev.local.acme.com/satis/web](http://dev.local.acme.com/satis/web)

3：在我的项目中，我想在我的 composer.json 中要求“acme/common”（比如说 1.0）：

```
{
    "require": {
        "acme/common": "1.0"
    },

    "repositories": [
        {
            "type": "composer",
            "url": "http://dev.local.acme.com/satis/web"
        }
    ]
} 
```

它成功提取了 1.0 标签，但是如果我将要求更改为“1.1”并运行，`composer.phar update`我会收到错误消息：

```
[RuntimeException]                                                                                                                                                                        
  Package could not be downloaded, svn: E195012: Path '.' does not share common version control ancestry with the requested switch location.  Use --ignore-ancestry to disable this check.  
  svn: E195012: 'http://svn.local.acme.com/svn/common/tags/1.3' shares no common ancestry with '/home/user/acid.dev.local.acme.com/composer/vendor/acme/common' 
```

我认为这里的问题是最初（作曲家安装）签出标签而不是导入导入。这个错误表明供应商目录是 SVN 版本的（它有 .svn 文件夹） - 我认为它不应该是。

# java - 如何使用 Apache POI 检查 Excel 单元格是否为空？

> ID：15764417
> 
> 赞同：45
> 
> 时间：2013-04-02T12:42:54.113
> 
> 标签：java, apache-poi

我正在使用 Poi.jar 从 Excel 表中获取输入，并且想知道如何检查单元格是否为空。

现在我正在使用下面的代码。

```
cell = myRow.getCell(3);
if (cell != null) {
    cell.setCellType(Cell.CELL_TYPE_STRING);

    //System.out.print(cell.getStringCellValue() + "\t\t");
    if (cell.getStringCellValue() != "")
        depend[p] = Integer.parseInt(cell.getStringCellValue());

    }
} 
```

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-04-03T05:21:16.583

如果您使用的是 Apache POI 4.x，您可以这样做：

```
 Cell c = row.getCell(3);
 if (c == null || c.getCellType() == CellType.Blank) {
    // This cell is empty
 } 
```

`CellType`对于在迁移到枚举之前的旧 Apache POI 3.x 版本，它是：

```
 Cell c = row.getCell(3);
 if (c == null || c.getCellType() == Cell.CELL_TYPE_BLANK) {
    // This cell is empty
 } 
```

不要忘记检查是否`Row`为空 - 如果该行从未使用过且未使用任何单元格或设置样式，则该行本身可能为空！

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2015-11-16T09:38:26.677

Gagravarr的回答相当不错！

* * *

# 检查excel单元格是否为空

但是，如果您假设一个**单元格包含空字符串**( `""`) 时也是空的，则需要一些额外的代码。如果单元格被编辑然后未正确清除，则可能会发生这种情况（有关如何正确清除单元格，请参见下文）。

我给自己写了一个助手来检查一个`XSSFCell`是否为空（包括一个空字符串）。

```
 /**
 * Checks if the value of a given {@link XSSFCell} is empty.
 * 
 * @param cell
 *            The {@link XSSFCell}.
 * @return {@code true} if the {@link XSSFCell} is empty. {@code false}
 *         otherwise.
 */
public static boolean isCellEmpty(final XSSFCell cell) {
    if (cell == null) { // use row.getCell(x, Row.CREATE_NULL_AS_BLANK) to avoid null cells
        return true;
    }

    if (cell.getCellType() == Cell.CELL_TYPE_BLANK) {
        return true;
    }

    if (cell.getCellType() == Cell.CELL_TYPE_STRING && cell.getStringCellValue().trim().isEmpty()) {
        return true;
    }

    return false;
} 
```

**注意更新的 POI 版本**

他们首先更改`getCellType()`为`getCellTypeEnum()`版本`3.15 Beta 3`，然后移回`getCellType()`版本`4.0`。

*   版本`>= 3.15 Beta 3`：

    *   使用`CellType.BLANK`and`CellType.STRING`代替`Cell.CELL_TYPE_BLANK`and`Cell.CELL_TYPE_STRING`
*   版本`>= 3.15 Beta 3`&& 版本`< 4.0`

    *   使用`Cell.getCellTypeEnum()`代替`Cell.getCellType()`

但最好[仔细检查一下自己](https://poi.apache.org/apidocs/)，因为他们计划在未来的版本中将其改回。

* * *

## 例子

这个 JUnit 测试显示了需要额外的空检查的情况。

场景：单元格的内容在 Java 程序中发生更改。稍后，在同一个 Java 程序中，检查单元格是否为空。`isCellEmpty(XSSFCell cell)`如果函数不检查空字符串，测试将失败。

```
@Test
public void testIsCellEmpty_CellHasEmptyString_ReturnTrue() {
    // Arrange
    XSSFCell cell = new XSSFWorkbook().createSheet().createRow(0).createCell(0);

    boolean expectedValue = true;
    boolean actualValue;

    // Act
    cell.setCellValue("foo");
    cell.setCellValue("bar");
    cell.setCellValue(" ");
    actualValue = isCellEmpty(cell);

    // Assert
    Assert.assertEquals(expectedValue, actualValue);
} 
```

* * *

## 另外：正确清除一个单元格

以防万一有人想知道如何正确清除单元格的内容。有两种存档方法（我推荐*方式 1*）。

```
// way 1
public static void clearCell(final XSSFCell cell) {
    cell.setCellType(Cell.CELL_TYPE_BLANK);
}

// way 2
public static void clearCell(final XSSFCell cell) {
    String nullString = null;
    cell.setCellValue(nullString); 
} 
```

为什么选择方式 1？**显式优于隐式**（感谢 Python）

方式 1：将单元类型**显式**设置回`blank`.
方式 2：由于将单元格值设置为字符串时的副作用，将单元格类型**隐式**设置回。`blank``null`

* * *

### 有用的资源

*   [官方文档](https://poi.apache.org/apidocs/)
    *   [细胞类型](https://poi.apache.org/apidocs/org/apache/poi/ss/usermodel/CellType.html)
    *   [XSSFCell.setCellValue（字符串）](https://poi.apache.org/apidocs/org/apache/poi/xssf/usermodel/XSSFCell.html#setCellValue-java.lang.String-)
    *   [Cell.setCellType(CellType)](https://poi.apache.org/apidocs/org/apache/poi/ss/usermodel/Cell.html#setCellType-org.apache.poi.ss.usermodel.CellType-)

问候温克勒尔

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-04-24T17:04:56.857

从 Apache POI 3.17 开始，您必须使用枚举检查单元格是否为空：

```
import org.apache.poi.ss.usermodel.CellType;

if(cell == null || cell.getCellTypeEnum() == CellType.BLANK) { ... } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-02-19T09:35:21.073

```
Cell cell = row.getCell(x, Row.MissingCellPolicy.CREATE_NULL_AS_BLANK); 
```

这个技巧对我帮助很大，看看它是否对你有用

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-11-30T13:10:56.780

这是我从 POI 3.1.7 到 POI 4 看到的最安全、最简洁的方式：

```
boolean isBlankCell = CellType.BLANK == cell.getCellTypeEnum();
boolean isEmptyStringCell = CellType.STRING == cell.getCellTypeEnum() && cell.getStringCellValue().trim().isEmpty(); 

if (isBlankCell || isEmptyStringCell) {
    ... 
```

从 POI 4`getCellTypeEnum()`开始，如果支持，将不推荐使用，`getCellType()`但返回类型应保持不变。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-05-02T19:06:06.753

首先要避免 NullPointerException 你必须添加这个

```
Row.MissingCellPolicy.CREATE_NULL_AS_BLANK 
```

这将创建一个空白单元格而不是给你 NPE 然后你可以检查以确保没有出错，就像@Gagravarr 所说的那样。

```
Cell cell = row.getCell(j, Row.MissingCellPolicy.CREATE_NULL_AS_BLANK);
    if (cell == null || cell.getCellTypeEnum() == CellType.BLANK) 
        // do what you want 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-05-18T11:23:51.357

**Row.MissingCellPolicy.CREATE_NULL_AS_BLANK**在我的情况下是有效的。

```
total_colume = myRow.getLastCellNum();
int current_colume = 0;
HSSFCell ReadInCellValue;

while (current_colume <= total_colume) {
   ReadInCellValue = myRow.getCell(current_colume, Row.MissingCellPolicy.CREATE_NULL_AS_BLANK);//if cell is empty, return black
   if (ReadInCellValue.toString=="") Log.d("empty cell", "colume=" + String.valuOf(current_colume));
   current_colume++;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-02-21T13:10:27.090

**您也可以使用开关盒，例如**

```
 String columndata2 = "";
                    if (cell.getColumnIndex() == 1) {// To match column index

                        switch (cell.getCellType()) {
                            case Cell.CELL_TYPE_BLANK:
                                columndata2 = "";
                                break;
                            case Cell.CELL_TYPE_NUMERIC:
                                columndata2 = "" + cell.getNumericCellValue();
                                break;
                            case Cell.CELL_TYPE_STRING:
                                columndata2 = cell.getStringCellValue();
                                break;
                        }

                    }
                    System.out.println("Cell Value "+ columndata2); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-09-04T00:31:44.770

`Cell.getCellType()`在最新的 POI API 中已弃用。如果您使用的是 POI API 版本 3.17，请使用以下代码：

```
if (Cell.getCellTypeEnum() == CellType.BLANK) {
    //do your stuff here
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-09-22T04:22:33.347

还有另一种选择。

```
row=(Row) sheet.getRow(i);
        if (row == null || isEmptyRow(row)) {
            return;
        }
Iterator<Cell> cells = row.cellIterator();
    while (cells.hasNext())
     {} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-12-15T18:45:30.187

```
.getCellType() != Cell.CELL_TYPE_BLANK 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-07-07T11:07:13.893

试试下面的代码：

```
String empty = "-";
if (row.getCell(3) == null || row.getCell(3).getCellType() == Cell.CELL_TYPE_BLANK) {
    upld.setValue(empty);
} else {
    upld.setValue(row.getCell(3).getStringCellValue());
} 
```

# c# - 实体框架，选择多对多

> ID：15764421
> 
> 赞同：0
> 
> 时间：2013-04-02T12:42:59.800
> 
> 标签：c#, entity-framework, select, many-to-many

我首先使用实体​​框架代码。

我有以下表格：

```
Companies : PK ID int, Name, ...
Customers : PK ID int, Name, ...
CustomersCompanies : CustomerID, CompanyID 
```

我可以毫无问题地创建客户和公司。但我不知道如何获得客户拥有的所有公司。

我试过了：

```
_customer = ...
var companies = from c in _db.Companies
                        where c.Customers.Contains(_customer)
                        select c; 
```

但是公司不包含任何东西......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:45:37.920

使用正确创建的实体，您应该能够调用：

```
var companies = _customer.Companies; 
```

你必须`ICollection<Company>`在你的`Customer`班级里，`ICollection<Customer>`在`Company`班级里。

查看本教程：[使用 Code First 创建多对多映射](http://www.codeproject.com/Articles/234606/Creating-a-Many-To-Many-Mapping-Using-Code-First)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T12:54:18.687

如果您首先使用代码，您可以将公司的虚拟集合添加到您的客户类，并将客户的虚拟集合添加到您的公司类：

```
public class Customer 
{ 
    public int Id { get; set; }

    public virtual ICollection<Company> Companies { get; set; }
}

public class Company
{
    public int Id { get; set; }

    public virtual ICollection<Customer> Customers { get; set; }
} 
```

然后获取客户并包括他们的公司，您可以这样做：

```
var customers = _db.Customers.Include(x => x.Companies); 
```

我不确定您的 _db 类是什么样的，所以我不知道您是否只是将实体集合作为属性。通常我使用具有 GetDbSet 方法的实体框架 DbContext。所以我会做类似的事情：

```
var customers = _dbContext.GetDbSet<Customer>().Include(x => x.Companies); 
```

希望有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T14:22:43.333

尝试按客户 ID 进行比较，例如：

```
_customer = ...
var companies = from c in _db.Companies
                    where c.Customers.Where(x => x.CustomerID == c.CompanyID)
                    select c; 
```

或更短：

```
var comapnies = _db.Companies.Select(x => x.CustomerID == c.CompanyID); 
```

# ios - Objective-C：委托系统在 Xcode 中无法正常工作

> ID：15764422
> 
> 赞同：0
> 
> 时间：2013-04-02T12:43:01.507
> 
> 标签：ios, objective-c, delegates, uibutton, nsuserdefaults

Bellow 我有一个委托系统，它隐藏一个按钮，然后将按钮保存在隐藏或不隐藏的任何位置`NSUserDefault`。但是由于某种原因它不起作用，有人可以帮忙吗？

**在这里，我有 levelComplete 代码... .h**

```
#import <UIKit/UIKit.h>
#import "levelComplete.h"
#import "LevelSelector.h"

@interface levelComplete : UIViewController{
  }
 @property (nonatomic, strong) id<CustomDelegate> delegatePpty;

 @end 
```

**.m**

```
@implementation levelComplete
@synthesize delegatePpty;

-(void)someAction
 {
[self.delegatePpty hideUnhidebutton:YES];//Call the delegate method to execute
 }

 - (void)viewDidLoad
   {
     [super viewDidLoad];
     // Do any additional setup after loading the view from its nib.
     [self someAction]; // Here I call my action
   }
@end 
```

**在这里，我有 levelSelector 代码...**

**。H**

```
 @protocol CustomDelegate <NSObject>
  -(void)hideUnhidebutton:(BOOL)value;
  @end

#import <UIKit/UIKit.h>
#import "levelComplete.h"
#import "LevelSelector.h"

@interface LevelSelector : UIViewController <CustomDelegate>{        

}

@property (nonatomic, strong) UIButton *level1;

@end 
```

**.m**

```
@implementation LevelSelector
@synthesize level1;

-(void)hideUnhidebutton:(BOOL)value
 {
  [self.level1 setHidden:value];
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults setObject:[NSNumber numberWithBool:value] forKey:@"YourVariableKey"];
  }

 - (void)viewDidLoad
   {
    [super viewDidLoad];
     // Do any additional setup after loading the view from its nib

     NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
     BOOL restoredBoolValue = [[defaults objectForKey:@"YourVariableKey"] boolValue];
    }
@end 
```

提前致谢 ！！！

**编辑**

```
Thanks for all of your help I have now got the code to correctly function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T13:39:34.677

我认为你在代表团中遗漏了一些东西，一旦看到这个

委托类.h

```
#import <UIKit/UIKit.h>

@protocol CustomDelegate <NSObject>
-(void)hideUnhidebutton:(BOOL)value;
@end

@interface delegateclass : UIViewController <CustomDelegate>{        
id<CustomDelegate> delegate;
}
@property(retain) id delegate;

-(void)someMethod;
@end 
```

委托类.m

```
 #import "delegateclass.h"

 @implementation delegateclass
 @synthesize delegate;

 -(void)someMethod {

   NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
   BOOL restoredBoolValue = [[defaults objectForKey:@"YourVariableKey"] boolValue];
   [[self delegate] hideUnhidebutton:restoredBoolValue];

   }
 @end 
```

测试视图控制器.h

```
 #import <UIKit/UIKit.h>
 #import "delegateclass.h"

 @interface TestViewController : UIViewController{
  delegateclass *delegateclassObj;
 }
  @property (nonatomic, strong) id<CustomDelegate> delegatePpty;
  @property (nonatomic, strong) UIButton *level1;
  @end 
```

测试视图控制器.m

```
 #import "TestViewController.h"
   @implementation TestViewController
   @synthesize delegatePpty,level1;

  - (void)viewDidLoad
   {
    [super viewDidLoad];

    delegateclassObj = [[delegateclass alloc]init];
    [delegateclassObj setDelegate:self];
    [delegateclassObj someMethod];
   }
  //Implementaion for Delegatemethod......

   -(void)hideUnhidebutton:(BOOL)value
   {
   [self.level1 setHidden:value];
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
   [defaults setObject:[NSNumber numberWithBool:value] forKey:@"YourVariableKey"];
   }
   @end 
```

对不起，我不知道你的主题是什么，但这里的 delegte 方法 (hideUnhidebutton:) 必须调用。

希望对你有帮助。。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T13:34:59.697

检查事项

创建 levelComplete 实例时

```
[levelCompleteInstance setDelegatePpty:self]; 
```

同步 NSUserDefaults

```
- (BOOL)synchronize 
```

# routing - 使用 neo4j 路由地理数据

> ID：15764425
> 
> 赞同：1
> 
> 时间：2013-04-02T12:43:03.093
> 
> 标签：routing, neo4j

我在 PostGIS 中有一个道路网络，我已经对其进行了多次处理。现在，每条道路都有自定义成本，不仅基于其长度。这些只是折线，我目前没有带有 netwotk 节点的层。我想使用**neo4j**计算该网络上的最短路径。我想有两种方法：

*   使用 neo4j-spatial，我可以导入从我的 PostGIS 数据库中获取的 shapefile。但是，我无法控制导入过程。我刚刚尝试过，例如我找不到节点，因为我不知道它们的 ID（由 shapefile 导入器创建的节点）

*   在不使用 neo4j-spatial 的情况下，我可以编写一个自定义转换器来创建网络节点及其关系，并将其导入 neo4j。但是，我认为这种方式会使我失去在 neo4j 中运行地理查询的能力（例如，用户选择从 XY 点开始，找到最近的网络节点）

你有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:32:47.003

使用 Neo4j-Spatial，您可以创建一个 EditableLayer 并向其添加线条，从而使用可用的空间操作，参见例如[https://github.com/neo4j/spatial/blob/master/src/test/java/org/neo4j /gis/spatial/LayersTest.java#L121](https://github.com/neo4j/spatial/blob/master/src/test/java/org/neo4j/gis/spatial/LayersTest.java#L121)是一个带有多边形的示例，并对其进行搜索。

# codeigniter - 搜索时如何强制该记录不显示两次。代码点火器

> ID：15764426
> 
> 赞同：0
> 
> 时间：2013-04-02T12:43:05.733
> 
> 标签：codeigniter, search, limit, multiple-records

我有一个带有连接表的搜索功能。

我有一个表工厂。在这张表中，我搜索工厂。我还有一个名为标签的表。在这张表中，我有特定工厂的标签。带有工厂 ID。

但是当我搜索一家工厂时，它不止一次向我展示了工厂。当我删除标签时，它不会显示不止一次。

**我如何强制/限制只显示同一工厂的 1 个？**

当您单击[http://kees.een-site-bouwen.nl/home/search上的搜索时，您会明白我的意思](http://kees.een-site-bouwen.nl/home/search)

我的搜索方法/模型：

```
function get_search($match)
{
    $this->db->like('Bedrijfsnaam', $match);
    $this->db->or_like('Postcode', $match);
    $this->db->or_like('Plaats', $match);
    $this->db->or_like('Telefoonnummer', $match);
    $this->db->or_like('Email', $match);
    $this->db->or_like('Website', $match);
    $this->db->or_like('Profiel', $match);
    $this->db->or_like('Adres', $match);
    $this->db->or_like('tags.Tag', $match);
    $this->db->join('tags', 'bedrijven.idbedrijven = tags.idbedrijven');
    $query = $this->db->get('bedrijven');

    return $query->result();
} 
```

我的搜索方法/控制器：

```
 function searchresults()
    {
        $match = $this->input->post('search');
        $data['query'] = $this->bedrijven_model->get_search($match);
        $this->load->view('views/header');
        $this->load->view('views/searchresults', $data);
        $this->load->view('views/footer');
        $data['query'] = $this->bedrijven_model->bedrijven_tags();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:45:39.833

尝试按赞分组

```
$this->db->join('tags', 'bedrijven.idbedrijven = tags.idbedrijven');
$this->db->group_by('bedrijven.idbedrijven');
$query = $this->db->get('bedrijven'); 
```

那么您可以获得唯一值

# php - 防止 MySQL 双重插入

> ID：15764428
> 
> 赞同：4
> 
> 时间：2013-04-02T12:43:08.923
> 
> 标签：php, mysql, sql, schema

我有一张或多或少看起来像的桌子

```
Name | Lastname | ID | Date 
```

有没有办法阻止数据库运行插入函数，如果一个人`Name`已经存在`Lastname`并且`ID`没有运行额外的查询来搜索他？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-02T12:44:17.290

`UNIQUE`在列上添加约束，

```
ALTER TABLE TableName ADD CONSTRAINT tb_uq UNIQUE (ID, LastName) 
```

一旦它被实现，如果你尝试插入一个 ID 和 LastName 已经存在的值，它会抛出一个异常。例子

```
INSERT INTO tableName (ID, LASTNAME) VALUES (1, 'hello') // ok
INSERT INTO tableName (ID, LASTNAME) VALUES (2, 'hello') // ok
INSERT INTO tableName (ID, LASTNAME) VALUES (1, 'hello') // failed 
```

# wordpress - woocommerce 显示类别/子类别/产品

> ID：15764430
> 
> 赞同：4
> 
> 时间：2013-04-02T12:43:14.147
> 
> 标签：wordpress, woocommerce, woothemes

有什么方法可以在 woocommerce 中显示主要类别及其子类别及其产品？php还是简码？我尝试了一些条件格式，但没有。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-18T20:29:10.927

您有两个默认短代码可用于显示产品类别（定义了特定的父类别以显示子类别）和包含在特定类别中的产品。

要显示顶级类别，请使用简码：

```
[product_categories parent="0"] 
```

如果要显示子类别，请在父属性中包含类别 ID。

要在类别中显示产品：

```
[product_category category="category-slug-here"] 
```

此简码的完整参考：[产品类别简码](http://docs.woothemes.com/document/woocommerce-shortcodes/#section-9)和[类别简码中的产品](http://docs.woothemes.com/document/woocommerce-shortcodes/#section-8)

# java - Android 库类的静态变量的生命周期是多少？

> ID：15764431
> 
> 赞同：2
> 
> 时间：2013-04-02T12:43:14.180
> 
> 标签：java, android, static

我注意到[SO帖子的答案](https://stackoverflow.com/questions/2475978/using-static-variables-in-android)对于某些设备是正确的（即Android库的静态变量从一个应用程序的一个活动到另一个应用程序），但不适用于其他设备。

这是一个代码片段来说明这一点

```
public class LibraryFoo{
    static List<String> listFoo= new ArrayList<String>();

    //The following method is called from many activities 
    public static methodFoo(){
        //do something to listFoo
    }
} 
```

对于某些 Android 设备，静态变量 listFoo 从一个活动持续到另一个活动，但为其他 Android 设备的每个活动重新创建。

我的观察有意义吗？任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:59:37.283

我猜你一直在混淆，库变量将保持不变，直到应用程序死亡。

库方法变量的生命周期直到方法的执行（库只是一个封装的概念（将数据隐藏在接口后面））。

# c# - System.IO.File 与 System.IO.FileStream 的性能

> ID：15764433
> 
> 赞同：-3
> 
> 时间：2013-04-02T12:43:21.687
> 
> 标签：c#, file, filestream

我尝试使用`File`类和`FileStream`类从大文件中读取数据或将大量数据写入文件。

假设我在 Visual Studio 2010 中使用 C#。哪个类为我提供了更好的性能，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T12:48:19.407

找出答案的最佳方法是使用两者构建一些示例应用程序，并根据您的输入数据对其进行测试。这样，您将有科学证据作为您的决定的依据。阅读Soner Gönül 在评论中建议的 Eric Lippert 的博客[文章。](http://ericlippert.com/2012/12/17/performance-rant/)

> 如果您有两匹马，并且您想知道这两匹马中哪一个跑得更快，那么就让您的马匹比赛。不要对马匹进行简短的描述，将它们发布到互联网上，让随机的陌生人猜猜哪个更快！即使你得到了一个准确的答案，你又怎么能相信它的准确性呢？通过自己运行并用秒表测量它们，您可以轻松准确地发现两个程序中的哪个更快。- 埃里克·利珀特

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T12:49:21.597

A`FileStream`是做（正常）文件 IO 的唯一方法。类中的任何方法都`File`使用 a`FileStream`来访问文件。

因此，使用`FileStream`将使您最接近文件系统，但`File`类中的方法不会增加太多开销，因此只有在您对要使用的实际文件有一些特殊了解时，您才能超越它们让您以某种方式优化文件访问。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T12:50:41.963

如果您使用的是 LARGE 文件，则 FileStream 是唯一的方法 - 使用 File 会将整个文件读入内存。使用 FileStream 将允许您读取/写入文件的某些部分。话虽如此，请先尝试 File（它更容易使用），看看它是否执行正常。

# c# - 从 Windows 启动开始监控多个文件

> ID：15764439
> 
> 赞同：1
> 
> 时间：2013-04-02T12:43:54.990
> 
> 标签：c#, windows, file, notifications

我正在尝试制作一个用于“标记”的程序（在我的情况下，它们实际上不是标记）Windows 文件、放置描述等。语言：C#。我需要一些指导方针来监控所有这些“标记”文件，以便在它们被重命名、移动、删除时获得通知。我想从 Windows 启动到用户关闭 PC 的那一刻监控它们。我已经检查了这个 FileSystemWatcher 类，但仍然：

*   为我想要关注的每个文件创建一个单独的此类实例是一个好主意吗？
*   它实际上是我应该为这个功能制作的 Windows 服务吗？

我很乐意就我的最佳方法获得任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:21:30.150

您应该使用`FileSystemWatcher`来监视目录（可能还有子目录）。它将被通知监视目录中所有文件的更改。然后，您可以过滤您想要观看的单个文件。

我会`FileSystemWatcher`为您要观看的每个顶级目录建议一个。因此，如果您正在观看：

```
/dir1
/dir1/subdir
/dir1/subdir/sub-subdir
/dir2 
```

然后你会有两个`FileSystemWatcher`组件：一个 for `dir1`，一个 for`dir2`

Windows 服务是此工具的不错选择。另一个不错的选择是在启动时作为计划任务运行的控制台应用程序。计划任务的好处是可以让您更轻松地启动和停止它。这可能是您想要进行初始开发的方式。将控制台应用程序转换为服务非常容易。

# java - 如何决定添加到 JPanel 的组件的顺序

> ID：15764440
> 
> 赞同：0
> 
> 时间：2013-04-02T12:43:56.630
> 
> 标签：java, swing, jpanel, jtextpane

我有一个名为 MainPanel 的空布局 JPanel。Onclick 按钮我在 mainPanel 上添加 JTextpane。在第一次单击时，我正在创建一个背景颜色为白色的文本窗格。在第二次单击时，我正在创建另一个蓝色的文本窗格。我想要的是将蓝色文本窗格放在白色文本窗格上，但蓝色文本窗格位于白色文本窗格后面。我怎样才能把它放在白色窗格上？

这里的代码非常简单。Onclick 我正在创建一个新的 JTextpane，为其设置尺寸并将其放置在 mainPanel 上。

放置一个更好地描述问题的示例屏幕截图。在这里，蓝色文本窗格已落后于白色文本窗格。我想要它高于白色的texpane。我怎么做？ ![在此处输入图像描述](https://i.stack.imgur.com/sMFJy.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T12:58:38.953

*如果您想坚持使用当前的 Components*，（我认为您应该使用 kellax 的解决方案，但我不知道是否有其他要求迫使您使用当前的方法）您可以查看 Container.setComponentZOrder(Component comp, int index) 直接决定组件的显示顺序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T12:48:25.920

您将不得不将您的替换`JPanel "MainPanel"`为`LayeredPanel`.

然后你可以说：

```
JLayeredPane mainPanel = new JLayeredPane();

JTextPane whitePane = new JTextPane("White text pane on top");
JTextPane bluePane  = new JTextPane("Blue text pane behind");

mainPanel.add(whitePane, 2, 0);
mainPanel.add(bluePane, 1, 0); 
```

编辑：您可以在此处阅读有关 LayeredPane 的更多信息：[LayeredPane](http://docs.oracle.com/javase/tutorial/uiswing/components/layeredpane.html)

# android - 无法复制 XML 中的标志

> ID：15764444
> 
> 赞同：0
> 
> 时间：2013-04-02T12:44:19.763
> 
> 标签：android, xml

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:05:26.340

对于那些符号，您可以使用它们在 XML 上的编码。例如，[工会](http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references)将是`&#8746;`

# asp.net - 某些子域但不是其他子域的表单身份验证

> ID：15764452
> 
> 赞同：0
> 
> 时间：2013-04-02T12:44:47.797
> 
> 标签：asp.net, .net, asp.net-mvc, forms-authentication

如果用户在**sitedomain.com**上进行了身份验证，是否有可能他将在**www.sitedomain.com**上进行身份验证，但在**sub.sitedomain.com**上 使用表单身份验证不进行身份验证？

# c# - IIS 7.5 中部署的 MVC4 中 CSS 的背景图像“加载 url 失败”

> ID：15764454
> 
> 赞同：4
> 
> 时间：2013-04-02T12:44:52.993
> 
> 标签：c#, css, asp.net-mvc-3, background-image

在我的 MVC 应用程序中，我引用了一个 CSS 文件来呈现页面的背景图像。我尝试了所有类型的可能性，例如

```
background: url(../Images/login-box-backg.png) no-repeat left top;
background: url(../../Images/login-box-backg.png) no-repeat left top;
background: url(~/Images/login-box-backg.png) no-repeat left top;
background: url(./Images/login-box-backg.png) no-repeat left top; works only in Firefox
background: url(/Images/login-box-backg.png) no-repeat left top;

background-image: url(/Images/login-box-backg.png) no-repeat left top;
background-image: url(../Images/login-box-backg.png) no-repeat left top;
background-image: url(../../Images/login-box-backg.png) no-repeat left top;
background-image: url(~/Images/login-box-backg.png) no-repeat left top;
background-image: url(./Images/login-box-backg.png) no-repeat left top; 
```

但它显示无法在 Firefox 和 IE9 中加载给定的 url 和网络错误 404。
**CSS 文件*** *login-box.css* *

```
#login-box {
    width:333px;
    height: 352px;
    padding: 58px 76px 0 76px;
    color: #ebebeb;
    font: 12px Arial, Helvetica, sans-serif;
    background: url(../Images/login-box-backg.png) no-repeat left top;
}
.reg_body
        {
            background-image: url(../Images/plain-blue-background-images-7117.jpg);
        } 
```

我的视图中的样式参考为

```
<link href="@Url.Content("~/CSS/login-box.css")" rel="stylesheet" type="text/css" /> 
```

将背景图像从 CSS 文件渲染到 MVC 视图的正确格式是什么。
我想知道为什么它在 IIS 中托管时不接受任何格式。
有什么建议么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T07:02:57.167

不要提供这种类型的网址

```
background-image: url(../Images/plain-blue-background-images-7117.jpg); 
```

用这个

```
background-image: url(/Images/plain-blue-background-images-7117.jpg); 
```

如果它不起作用...然后尝试删除斜杠 /Images/ 到 Images/

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T07:19:02.807

将您`Images`的文件夹移动到该`Content`文件夹​​，并在您的 CSS 中使用它：

```
background-image: url(Images/login-box-backg.png) no-repeat left top; 
```

您的文件夹结构应如下所示：

*   内容
    -- 图片
    ---- login-box-backg.png
    -- Site.css

# c# - 实体框架不支持从动态查询或临时表构建结果集的存储过程

> ID：15764456
> 
> 赞同：0
> 
> 时间：2013-04-02T12:45:06.517
> 
> 标签：c#, entity-framework, stored-procedures

我编写了以下存储过程，效果很好。我想用它做的是将它用作实体数据模型。但是，在实体数据模型中使用它会映射到整数的返回类型和零值。

如何让 SP 使用 DataContext 返回实际数据而不是整数？

```
IF EXISTS (SELECT * FROM SYS.OBJECTS WHERE TYPE = 'P' AND NAME = 'myProc') DROP PROCEDURE myProc;
GO
CREATE PROCEDURE [dbo].myProc
@START DateTime, @STOP DateTime
AS
BEGIN TRY

    CREATE TABLE #Temp (download_Pk int);
    INSERT INTO #Temp 
    SELECT      download_pk FROM t1
    UNION       ALL
    SELECT      download_pk FROM t2;    

    WITH 
    x as 
    (
        SELECT      ID as Caps_Pk,
                    rootID as [Caps_RootId],
                    Case400Series as [Case],
                    SUBSTRING(c1, CHARINDEX('_', c1,1)+1, LEN(c1)) as [Customer],
                    run as Run,                     
                    SUBSTRING(c2, 1, CHARINDEX('_', c2, 1) -1) as [Sample], 
                    SUBSTRING(c2, CHARINDEX('_', c2,1)+1, len(c2)) as [Amplification],
                    projectTitle,
                    DateAdded as [UploadTime],                  
                    UserId as [User]
        FROM        t3 
        WHERE       DateAdded >= @START AND DateAdded <= @STOP AND
                    [User] in (SELECT name FROM ViewUsers WHERE Site = 'abc' AND Role = 'def')
    )   

    SELECT      *
    FROM        x
    WHERE       Caps_Pk NOT IN (Select download_Pk from #Temp)

    DROP TABLE #Temp;

END TRY

BEGIN CATCH
    DROP TABLE #Temp;       

END CATCH 
```

去

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:13:59.733

你看过这个[Code First Stored Procudure 吗](http://www.codeproject.com/Articles/179481/Code-First-Stored-Procedures)，这对我很有用，它还有一个你可以安装的[NuGet Pckage](http://nuget.org/packages/CodeFirstStoredProcs/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T07:42:14.810

在这里找到答案：[EF4 - 选定的存储过程不返回任何列](https://stackoverflow.com/questions/7128747/ef4-the-selected-stored-procedure-returns-no-columns)

“EF 不支持导入从：动态查询临时表中构建结果集的存储过程，原因是要导入过程 EF 必须执行它。”

# android - 后台的 Android 活动

> ID：15764461
> 
> 赞同：1
> 
> 时间：2013-04-02T12:45:29.030
> 
> 标签：android, background, onpause

我有一个关于android的问题。如果我的活动类与外部库交互。当应用程序进入后台或返回前台时，我正在处理的这个库必须执行一些进程。

有什么方法可以知道应用程序何时进入后台。

**注意：我不想在活动中做任何事情。我不想在调用 onPause 时向库发送回调。**

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T12:58:22.153

如果我理解您的问题，您可以使用[Application.registerActivityLifecycleCallbacks](http://developer.android.com/reference/android/app/Application.html#registerActivityLifecycleCallbacks%28android.app.Application.ActivityLifecycleCallbacks%29)并实现您自己的[Application.ActivityLifecycleCallbacks](http://developer.android.com/reference/android/app/Application.ActivityLifecycleCallbacks.html)。

就像是：

```
class myActivityLifecycleHandler implements ActivityLifecycleCallbacks{
  // Methods implementation here 
}

yourActivity.getApplication().registerActivityLifecycleCallbacks(new myActivityLifecycleHandler()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T14:20:16.500

当应用程序进入后台时，您可以写入一些文件。

然后你的图书馆可能会花时间检查这个文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T05:02:21.700

`Application.registerActivityLifecycleCallbacks` 确实是您要使用的正确 api。不幸的是它确实是 API14+，所以你有以下选择：

使用[这个库](https://github.com/BoD/android-activitylifecyclecallbacks-compat)来实现活动生命周期回调。您将不得不在您正在处理的应用程序中扩展您的活动，但无论如何您都必须做一些事情，因为您需要少于 API14 的支持。

实现此库后，您可以在回调中创建`int`计数。这个计数可以每次递增和递减，`onStart()`并`onStop()`为每个活动回调。计数将在应用程序打开时从 0 -> 1 开始，在应用程序关闭/背景时从 1 -> 0 开始。当满足这些条件时，您可以调用您的库。

请记住，当您在后台运行应用程序时，操作系统可以随时将其终止。如果您有任何数量的网络或任何时间，请启动服务以尽快处理所有这些。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-02T12:48:28.573

覆盖activity的onPause方法，当activity要背景时调用onPause

# javascript - 无法在 chrome 新标签页上执行 javascript

> ID：15764463
> 
> 赞同：-1
> 
> 时间：2013-04-02T12:45:35.763
> 
> 标签：javascript, google-chrome

伙计们，我在 chrome 新标签（哪个 url 为空）上执行 javascript 时遇到问题。例如，我打开一个新选项卡，然后`javascript:alert("Hello everyone!");`在地址栏中键入并按 Enter，但没有任何反应。

但是，如果我访问任何网站，例如 google.com 等，我会`javascript:alert("Hello everyone!");`在地址栏中重新输入代码并按 Enter。将出现警报。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:48:36.023

没有办法“解决”这个问题，因为这是通过设计来防止各种形式的以用户为中心的攻击，其中`chrome://`作用域 url 具有可能被滥用的额外权限（在 url 栏中键入 javascript 并按回车键与执行`eval`在当前可见文档（页面）的范围内）。

但是，如果您只需要它自己，您可以打开开发者控制台（右键单击任意位置-> 检查元素-> 控制台）并随意尝试那里的任何 javascript。

# php - 使用 Javascript 将图像大小变量传递给 PHP 页面

> ID：15764465
> 
> 赞同：1
> 
> 时间：2013-04-02T12:45:37.123
> 
> 标签：php, javascript

## 我正在尝试使用 javscript 将画布绘图发送到服务器。

具有以下功能：

```
function uploadPic() {              
    var imgData = document.getElementById("myCanvas").toDataURL();
    window.location = "myPHPfile.php?imageData=" + imgData;
} 
```

**由于imgData**变量很大，将其传递给 php 页面的最佳方法是什么。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:47:23.617

用户发布请求以传递大数据。您可以使用 jQuery post 方法

```
$.post('myPHPfile.php', { imageData: imgData }, function(data) {
    // completed
}); 
```

或创建并发布表单：

```
function uploadPic() {              
    var imgData =  document.getElementById("myCanvas").toDataURL();

    var form = document.createElement('form');
    form.method = "POST";
    form.action = "myPHPfile.php";
    var hidden = document.createElement('input');
    hidden.type = 'hidden';
    hidden.name = 'imageData';
    hidden.value = imgData;
    form.appendChild(hidden);
    document.body.appendChild(form);
    form.submit();
} 
```

# android - 将数据保存在 strings.xml 中是个好主意吗？

> ID：15764471
> 
> 赞同：0
> 
> 时间：2013-04-02T12:45:50.743
> 
> 标签：android

Facebook 在他们的[用户指南](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/)`key`中建议保留一个`values/strings.xml`文件。以前从未见过这样的方法，这对我来说听起来很奇怪。它是每个人都使用的东西吗？我一直认为将这样的数据保存在配置文件中会更好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T12:51:28.747

将这样的数据保存在`strings.xml`. 确保将其保留在默认值中`/res/values/strings.xml`，而不是在任何其他`values`附加了限定符的文件夹中。如果您这样做，它可能并非在所有设备上都可用。

将这种数据保存在配置文件中也是完全可以接受的（我个人使用的，更多是因为我发现使用静态变量编辑 Java 文件比在 Eclipse 中编辑 XML 文件更容易）。

将数据保存在其中`strings.xml`意味着在访问它时有一个额外的步骤，因为您需要使用`Context`. 将它作为静态字段放在 Java 类中将使其更易于访问。

这两种方法都可以正常工作，并且被普遍使用。选择一个真的取决于您的个人喜好。

# asp.net - 从 web 文件夹下载后显示 aspx 页面的 Excel 文件

> ID：15764473
> 
> 赞同：2
> 
> 时间：2013-04-02T12:46:00.217
> 
> 标签：asp.net, vb.net

我正在使用以下代码从我的 asp.net/vb.net 网站下载一个 excel 文件：

```
Dim msFilePath As String
Dim msFileName As String
msFilePath = Server.MapPath("~/Template.xls")
msFileName = msFilePath
Dim mAttachFileName As String = "Template.xls"
Response.Clear()
Response.ContentType = "application/vnd.ms-excel"
Response.AddHeader("Content-Disposition", "attachment; filename=""" & mAttachFileName & """")
Response.Flush() 
```

excel 文件是一个模板，带有列标题，这就是它所包含的全部内容。当我单击网站上的下载按钮时，它会提示我以正确的名称“Template.xls”保存/打开文件。一旦我打开它，它就会在 excel 文件中显示 aspx 页面，而不是应该在文件中的数据，并给我一个错误，说它缺少 css 文件。我已经调试过了，路径指向文件的正确位置，所以我不确定是什么导致了问题。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:08:25.043

我遇到了完全相同的问题，我想告诉你为什么你的不起作用，但我没那么聪明。相反，我只会告诉你我使用的哪些代码现在对我有用：

代替

```
Response.AddHeader("Content-Disposition", "attachment; filename=""" & mAttachFileName & """")
Response.Flush() 
```

和

```
Response.AppendHeader("Content-Disposition", "attachment; filename=""" & mAttachFileName & """")
Response.TransmitFile(FilePath)
Response.End() 
```

我知道 response.End() 已被弃用，但没有它我总是会得到所有的 html 垃圾......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-25T12:32:56.910

我突然开始在我的机器上遇到问题。我在其他机器（网络应用程序）中尝试了该应用程序并且它有效。那时我不得不排除编码问题。我尝试了一百万件事，但没有任何效果。我重新启动了机器，瞧……它工作了。相信我，重新启动始终是我的最后选择。

# javascript - 使用自定义主干集合构建fuelux datagrid数据源

> ID：15764474
> 
> 赞同：3
> 
> 时间：2013-04-02T12:46:00.887
> 
> 标签：javascript, jquery, backbone.js, datagrid, fuelux

我正在尝试构建启用排序、搜索和分页的数据网格。因此，我使用的是fuelux-datagrid。

我的主干视图如下所示：

```
var app = app || {};
$(function ($) {
'use strict';   

// The Players view
// ---------------
app.PlayersView = Backbone.View.extend({
    template: _.template( $("#player-template").html() ),
        initialize: function () {
        if(this.collection){
            this.collection.fetch();
        }
        this.listenTo(this.collection, 'all', this.render);
    },
    render: function () {           
        this.$el.html( this.template );
        var dataSource = new StaticDataSource({
            columns: [
                {
                    property: 'playername',
                    label: 'Name',
                    sortable: true
                },
                {
                    property: 'age',
                    label: 'A',
                    sortable: true
                }
            ],
            data: this.collection.toJSON(),
            delay: 250
        });

        $('#MyGrid').datagrid({
            dataSource: dataSource,
            stretchHeight: true
        });
    }
});  
}); 
```

播放器模板只包含在[fuelux datagrid](http://exacttarget.github.com/fuelux/#datagrid)中给出的模板。我的路由代码在某处将 app.playerview 实例化为集合

```
 new app.PlayersView({
            collection : new app.PlayersCollection
        })); 
```

我的球员收藏包含球员模型列表如下

```
 [{
  "id":1,
  "playername":"rahu",
  "age":13

 },
{
  "id":2,
  "playername":"sahul",
  "age":18

},
{
  "id":3,
  "playername":"ahul",
  "age":19

 }] 
```

我的数据源类/函数用列和数据方法构造数据源，如[数据源构造函数中给出](https://github.com/ExactTarget/fuelux/blob/master/sample/datasource.js)

但是，我收到错误“未定义的数据源”。有谁能够帮我？我只是想破解代码，而不是在给定的示例中从本地 data.js 构建数据源，我想构建数据源以便它从 playercollection 获取数据。

此外，如何添加一个额外的列，以便我们可以将编辑标签放入其中，并且它应该能够在单击该编辑时编辑特定的行模型。

我一直在坚持这些。找出答案会有很大帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:20:10.903

我被困在数据源周围。我按如下方式修改了数据源，然后它工作了。

```
var StaticDataSource = function (options) {
    this._formatter = options.formatter;
    this._columns = options.columns;
    this._delay = options.delay || 0;
    this._data = options.data;
};

StaticDataSource.prototype = {

    columns: function () {
        return this._columns;
    },

    data: function (options, callback) {
        var self = this;

        setTimeout(function () {
            var data = $.extend(true, [], self._data);

            // SEARCHING
            if (options.search) {
                data = _.filter(data, function (item) {
                    var match = false;

                    _.each(item, function (prop) {
                        if (_.isString(prop) || _.isFinite(prop)) {
                            if (prop.toString().toLowerCase().indexOf(options.search.toLowerCase()) !== -1) match = true;
                        }
                    });

                    return match;
                });
            }

            // FILTERING
            if (options.filter) {
                data = _.filter(data, function (item) {
                    switch(options.filter.value) {
                        case 'lt5m':
                            if(item.population < 5000000) return true;
                            break;
                        case 'gte5m':
                            if(item.population >= 5000000) return true;
                            break;
                        default:
                            return true;
                            break;
                    }
                });
            }

            var count = data.length;

            // SORTING
            if (options.sortProperty) {
                data = _.sortBy(data, options.sortProperty);
                if (options.sortDirection === 'desc') data.reverse();
            }

            // PAGING
            var startIndex = options.pageIndex * options.pageSize;
            var endIndex = startIndex + options.pageSize;
            var end = (endIndex > count) ? count : endIndex;
            var pages = Math.ceil(count / options.pageSize);
            var page = options.pageIndex + 1;
            var start = startIndex + 1;

            data = data.slice(startIndex, endIndex);

            if (self._formatter) self._formatter(data);

            callback({ data: data, start: start, end: end, count: count, pages: pages, page: page });

        }, this._delay)
    }
}; 
```

事实上，我刚刚删除了以下代码及其相关的大括号。

```
(function (root, factory) {
if (typeof define === 'function' && define.amd) {
    define(['underscore'], factory);
} else {
    root.StaticDataSource = factory();
}
}(this, function () { 
```

我不知道上面的代码到底在做什么以及他们有什么依赖。

# backbone.js - 如何防止骨干路由器在页面加载时调用事件

> ID：15764476
> 
> 赞同：1
> 
> 时间：2013-04-02T12:46:11.087
> 
> 标签：backbone.js, backbone-routing

我现在有点困惑。我的路由函数在第一次加载时执行，这在我的情况下并不好，因为我正在使用这些函数渲染内容并且在第一次加载时我得到了重复的内容......好的，我可以添加控制变量防止在第一次初始化时渲染，但我想用纯主干来做......这是我的代码：

```
var Router = Backbone.Router.extend({
    routes: {
       "": "home",
       "home": "home",
       "about": "about",
    },
    home: function(){
        getContent("home")
    },
    about: function(){
        getContent("about")
    },
    initialize: function(){
        Backbone.history = Backbone.history || new Backbone.History({silent:true});
    root = "kitchenV3/"+lang;
    var enablePushState = true;
    var pushState = !! (enablePushState && window.history && window.history.pushState);
    Backbone.history.start({
        silent: true,
        pushState: pushState,
        root: root
    });
    }

}); 
```

另一方面，如果我删除 ,,home" 和 ,,about" 方法并以这种方式编写它们，它们不会在第一次加载时执行。但这两者之间的实际区别是什么？是否可以像第一个示例那样编写代码，但要防止在第一次加载时执行？

```
router.on('route:home', function(id) {
      getContent("home")
}); 
```

谢谢大家的回答...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T12:50:03.730

来自[Backbone 的文档](http://backbonejs.org/#History-start)：
“*如果服务器已经渲染了整个页面，并且您不希望在启动历史记录时触发初始路由，请传递静默：真。* ”

至于您的两个示例之间的区别：当您在第二种情况下启动 Backbone 的历史记录时，没有绑定任何路由，因此显然没有执行任何代码。

**编辑：**
[成功测试。](http://jsfiddle.net/Gdrmp/)
你会有一个警报。然后替换`Backbone.history.start()`为`Backbone.history.start({silent: true})`，什么都不会发生。

此外，深入研究 Backbone.history#start：

```
if (!this.options.silent) return this.loadUrl(); 
```

所以...我不知道，但如果它对你不起作用，我猜我们需要更多信息。

**编辑2：**
我已经改变了我在评论中告诉你的内容，[这就是结果](http://jsfiddle.net/2juxL/)。再一次，只需删除`silent: true`即可查看差异。

# scala - 从 LinkedList 中删除当前元素

> ID：15764477
> 
> 赞同：0
> 
> 时间：2013-04-02T12:46:16.163
> 
> 标签：scala, linked-list, iteration

在 Scala 中：似乎没有`remove()`方法`LinkedList`，由于某种原因我无法理解。虽然有一个`DoubleLinkedList`，但我不需要双链表。

另外，我怎样才能将`current`元素设置为第一个？我怎么知道它什么时候结束（是`null`吗？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T13:05:16.547

中没有`current`元素`LinkedList`。

中只有 2 个字段`LinkedList`：`elem`(or `head`) for element 和`next`(or `tail`) for `LinkedList`。

您可以使用 测试是否`LinkedList`为空`isEmpty`。每个都`LinkedList`包含一个空`LinkedList`的，因为它是最深的尾巴。有关 ASCII 插图，请参阅[文档](http://www.scala-lang.org/api/current/index.html#scala.collection.mutable.LinkedList)。

您可以像这样删除第 N 个元素（如果有）：

```
var current = myLinkedList.drop(n-2)
current.next = current.next.next 
```

例子：

```
scala> val myList = LinkedList(1,2,3,4,5)
myList: scala.collection.mutable.LinkedList[Int] = LinkedList(1, 2, 3, 4, 5)

scala> val current = myList.drop(1)
current: scala.collection.mutable.LinkedList[Int] = LinkedList(2, 3, 4, 5)

scala> current.next = current.next.next
current.next: scala.collection.mutable.LinkedList[Int] = LinkedList(4, 5)

scala> myList
res0: scala.collection.mutable.LinkedList[Int] = LinkedList(1, 2, 4, 5) 
```

你不能以这种方式删除第一个元素，但你可以忘记它：

```
scala> var myList = LinkedList(1,2,3,4,5)
myList: scala.collection.mutable.LinkedList[Int] = LinkedList(1, 2, 3, 4, 5)

scala> myList = myList.next
myList: scala.collection.mutable.LinkedList[Int] = LinkedList(2, 3, 4, 5) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:07:31.243

首先，是否有特殊原因需要 LinkedList 而不是 Scala 中的标准 List？

正如 scaladoc 中所警告的那样，您可以很容易地以 LinkedList 结束 NPE，而 List 不会有这个问题，除非您实际引入 null 值。

List tail 方法通常是您所需要的。请首先考虑这种方法，并且仅在绝对必要时才求助于专门的课程。

# unicode - 将 Unicode 代码点转换为 UTF-8 序列

> ID：15764478
> 
> 赞同：2
> 
> 时间：2013-04-02T12:46:17.033
> 
> 标签：unicode, utf-8

我不确定我的命名是否正确，所以请纠正我:)

我收到了一个代表巴利语词典的文本文件：由换行符`\n`(0x0a) 字符分隔的单词列表。据说，一些特殊字母是使用 UTF-8 编码的，但我对此表示怀疑。

将此文本文件加载到我的任何编辑器（vim、Notepad、TextEdit、..）中都会显示非常混乱的文本，例如

```
mhiti 
```

仔细查看实际字节，然后显示以下内容（使用`hexdump -C`）

```
0a 0a 1e 6d 68 69 74 69 0a 0a  ...mhiti.. 
```

在我看来，这是 Unicode 代码点`U+1E6D`（“ṭ”或拉丁小写字母 T，下面带有点）。该特定字母具有 UTF-8 编码`e1 b9 ad`。

我的问题：是否有工具可以帮助我将此特定文件转换为实际的 UTF-8 编码？我试过`iconv`但没有成功；我简要地查看了一个 Python 脚本，但认为有一种更简单的方法可以完成这项工作。似乎[这](https://stackoverflow.com/questions/4607413/c-library-to-convert-unicode-code-points-to-utf8)是解决此问题的有用链接，但是没有可以完成此操作的工具吗？我错过了什么吗？

**编辑：**只是为了让事情更有趣一点，似乎也散布着实际的 UTF-8 编码字符。例如，单词“ [ākiñcaññāyatana](http://www.palidictionary.appspot.com/browse/%C4%81/%C4%81ki%C3%B1ca%C3%B1%C3%B1%C4%81yatana) ”具有以下字节序列

```
01 01 6b 69 c3 b1 63 61 c3 b1 c3 b1 01 01 79 61 74 61 6e 61
ā     k  i  ñ     c  a  ñ     ñ     ā     y  a  t  a  n  a 
```

其中“ā”由其 Unicode 代码点 U-0101 编码，“ñ”由 UTF-8 序列 \xc3b1 编码，该序列具有 Unicode 代码点 U-00F1。

**编辑：**这是一个我无法弄清楚它应该是什么的：

```
01 1e 37 01 01 76 61 6b 61
?        ā     v  a  k  a 
```

我只能猜测，但这也没有意义。Unicode 代码点 U+011e 是“Ğ”（UTF-8 \xc49e），但这不是巴利语字符 AFAIK；然后是一个“7”，这在一个词中没有意义。那么 Unicode 代码点 U+1E37 是一个“ḷ”（UTF-8 \xe1b8b7），它是一个有效的巴利语字符。但这会留下第一个字节 \x01 本身。如果我不得不猜测，我会认为这是名称“Jīvaka”，但这与字节不匹配。 **稍后：**根据作者的说法，这是“Āḷāvaka”——因此假设从上面的字符编码启发式算法，又缺少一个 \x00。重新添加

```
01 00 1e 37 01 01 76 61 6b 61
Ā     ḷ     ā     v  a  k  a 
```

是否存在从 UTF-16 编码的 Unicode 文件中删除 \x00 字节的“压缩”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T13:04:15.993

在这种情况下，我假设“ [ṭhiti](http://www.palidictionary.appspot.com/browse/%E1%B9%AD/%E1%B9%ADhiti) ”作为该文件的内容是有意义的。

根据您的描述，该文件似乎将字符 < U+0080 编码为单个字节，将字符 > U+0100 编码为两字节大端序。一般来说，这是不可解码的。两个换行符 (U+000A, U+000A) 将具有与 GURMUKHI LETTER UU (U+0A0A) 相同的编码。

没有调用`iconv`它会为你解码它；您要么需要根据字符范围或文件中的顺序采用您所知道的启发式方法来编写自定义解码器（或要求使用标准编码的另一个副本）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T12:08:30.630

我认为最终这是我自己的错，不知何故。浏览[此文件](https://files.myopera.com/Pesala/Backups/Pali.tlx)显示原始 UTF-16 编码文件的版本非常混乱和损坏；浏览器中的“另存为”菜单然后保存了为该线程创建初始问题的损坏文件。

似乎网络浏览器试图显示该 UTF-16 编码文件，删除诸如 \x00 之类的不可打印字符并将其他一些字符转换为 UTF-8，从而完全破坏了原始文件。

使用`wget`来获取文件解决了这个问题，我可以很好地将它转换为 UTF-8 并进一步使用它。

# java - 循环内的侦听器不允许更改外部布尔标志

> ID：15764479
> 
> 赞同：1
> 
> 时间：2013-04-02T12:46:28.100
> 
> 标签：java, swing, listener, actionlistener, keylistener

在我之前的帖子之后，我写[了](https://stackoverflow.com/questions/15762311/add-a-keylistener-inside-a-loop-is-it-possible)一个监听器：

```
@Override
public void keyTyped(KeyEvent keyEvent) 
{
    PolygonFiller polyFiller = new PolygonFiller();
    char key = keyEvent.getKeyChar();

    final boolean runForever = true;

    switch(key)
    {
        /**
         *  Fill the polygons 
         */
        case FILL_POLYGON:      
        {
            if (greenLightForFilling == true)
            {

                while (runForever)
                {
                    fillPolygon(polyFiller);
                    KeyListener listener = new KeyListener()
                    {
                        public void keyPressed(KeyEvent keyEvent) 
                        {
                            char keyOther = keyEvent.getKeyChar();
                            if (keyOther == 'F' || keyOther == 'f')
                                // can't use break;
                                runForever = false;
                        }

                        @Override
                        public void keyReleased(KeyEvent arg0) {}

                        @Override
                        public void keyTyped(KeyEvent arg0) {}
                    };
                }
            }
            break;

        }  // end FILL_POLYGON

        case FILL_POLYGON_LOWERCASE:
        {
            if (greenLightForFilling == true)
            {
                fillPolygon(polyFiller);
            }
            break;              

        }

        /**
         *  save all polygons in a .scn file
         */
        case SAVE_POLYGONS :         
        {
            if (greenLightForFilling == true)
            {
                saveWorkspace();
            } 
            break;  
        }   // end SAVE_POLYGONS

        case SAVE_POLYGONS_LOWERCASE:
        {
            if (greenLightForFilling == true)
            {
                saveWorkspace();
            } 
            break;  
        }

        /**
         *  Delete everything & load all polygons from .scn file
         */
        case LOAD_POLYGONS:      
        {
            loadWorkspace();
            break;
        }   

        case LOAD_POLYGONS_LOWERCASE:
        {
            loadWorkspace();
            break;
        }

        default: break;  
    } // end switch

} 
```

**目标**：

1.  从循环中中断，当我得到一秒钟`f`或`F`（我已经得到一个`f`/`F`当我进入循环时）。

2.  我需要将第二个听众附加到某事上吗？

但我不能将其更改`runForever`为 false ，因为它是写在外面的。

即使我将其更改为`final`，我也无法将其值更改`false`为 。

有什么办法吗？

**注意**：我已经有一个用于输入开关盒的按键监听器！

**编辑：**

```
// Hot-keys hit by the user - used for keyboard listening
private static final char FILL_POLYGON = 'F';
private static final char SAVE_POLYGONS = 'S';
private static final char LOAD_POLYGONS = 'L';
private static final char FILL_POLYGON_LOWERCASE = 'f';
private static final char SAVE_POLYGONS_LOWERCASE = 's';
private static final char LOAD_POLYGONS_LOWERCASE = 'l';

    @Override
    public void keyTyped(KeyEvent keyEvent) 
    {
        PolygonFiller polyFiller = new PolygonFiller();
        char key = keyEvent.getKeyChar();

        final Settable runForever = new Settable();

        switch(key)
        {
            /**
             *  Fill the polygons 
             */
            case FILL_POLYGON:      
            {
                if (greenLightForFilling == true)
                {

                        KeyListener listener = new KeyListener()
                        {
                            public void keyPressed(KeyEvent keyEvent) 
                            {
                                char keyOther = keyEvent.getKeyChar();
                                if (keyOther == 'F' || keyOther == 'f')
                                    runForever.set(false);
                            }

                            @Override
                            public void keyReleased(KeyEvent arg0) {}

                            @Override
                            public void keyTyped(KeyEvent arg0) {}
                        };

                        this.addKeyListener(listener);

                        while (runForever.get())
                        {
                            fillPolygon(polyFiller);
                        }
                }
                break;

            }  // end FILL_POLYGON

...
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T12:49:58.227

最终变量不能更改，但如果它们表示可变对象，则可以更改该对象的内容。

例如，如果你创建一个`Settable`类，并使用它的实例而不是`boolean`，你可以这样做：

```
class Settable {
    private boolean flag;
    public boolean get() {return flag;}
    public boolean set(boolean val) { flag = val; }
} 
```

现在，在你的代码中使用一个`final`实例；`Settable`使用`set(...)`而不是分配，而`get()`不是直接访问：

```
final Settable runForever = new Settable();
runForever.set(true);
...
while (runForever.get()) {
    ...
    if (keyOther == 'F' || keyOther == 'f') runForever.set(false);
    ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T14:08:36.580

*   请您阅读@kleopatra 在您之前的帖子中的评论吗？忽略它不是一个好主意

*   不是永远，不是错误的方向，使用 KeyBindings 和 Swing Action 而不是 KeyListener

*   @dasblinkenlight 接受的答案在 Swing、Swing 和 Java2D 中没有解决任何问题，使用 KeyBindings 和 Swing Action，

例如

```
import java.awt.Dimension;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.AbstractAction;
import javax.swing.Action;
import javax.swing.JButton;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.KeyStroke;
import javax.swing.SwingUtilities;

public class FullScreen {

    private static final long serialVersionUID = 1L;
    private JButton button = new JButton("Close Meeee");
    private JPanel myPanel = new JPanel();
    private JFrame frame = new JFrame();

    public FullScreen() {
        button.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                System.exit(0);
            }
        });
        myPanel = new JPanel() {
            @Override
            public Dimension getPreferredSize() {
                return new Dimension(400, 300);
            }
        };
        myPanel.setFocusable(true);
        myPanel.add(button);
        frame.add(myPanel);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        //frame.setUndecorated(true);
        frame.getRootPane().getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(
                KeyStroke.getKeyStroke("ENTER"), "clickENTER");
        frame.getRootPane().getActionMap().put("clickENTER", updateBol());
        frame.pack();
        frame.setVisible(true);
        updateCol().setEnabled(false);
        updateDol().setEnabled(false);
    }

    private Action updateBol() {
        return new AbstractAction("updateBol") {
            private static final long serialVersionUID = 1L;

            @Override
            public void actionPerformed(ActionEvent e) {
                System.out.println("updateCol is " + updateBol().isEnabled());
                System.out.println("updateBol is " + updateCol().isEnabled());
                System.out.println("updateDol is " + updateDol().isEnabled());
                updateCol().actionPerformed(e);
                updateDol().actionPerformed(e);
            }
        };
    }

    private Action updateCol() {
        return new AbstractAction("updateCol") {
            private static final long serialVersionUID = 1L;
            private Boolean _enabled = false;

            @Override
            public void actionPerformed(ActionEvent e) {
                System.out.println("updateCol is " + updateCol().isEnabled());
                if (updateCol().isEnabled()) {
                } else {
                }
            }

            public void setEnabled(Boolean bol) {
                _enabled = bol;
            }

            @Override
            public boolean isEnabled() {
                return _enabled;
            }
        };
    }

    private Action updateDol() {
        return new AbstractAction("updateDol") {
            private static final long serialVersionUID = 1L;
            private Boolean _enabled = false;

            @Override
            public void actionPerformed(ActionEvent e) {
                System.out.println("updateDol is " + updateDol().isEnabled());
                if (updateCol().isEnabled()) {
                } else {
                }
            }

            public void setEnabled(Boolean bol) {
                _enabled = bol;
            }

            @Override
            public boolean isEnabled() {
                return _enabled;
            }
        };
    }

    public static void main(String[] args) {
        Runnable doRun = new Runnable() {
            @Override
            public void run() {
                FullScreen fullScreen = new FullScreen();
            }
        };
        SwingUtilities.invokeLater(doRun);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T12:51:25.433

您可以制作大小为 1 的最终布尔数组来存储您的标志。即使数组是最终的，它的元素也不是，所以你可以从匿名类中修改数组的元素。

# java - 使用 spring 3 和 hibernate 4 自动装配休眠会话

> ID：15764482
> 
> 赞同：2
> 
> 时间：2013-04-02T12:46:39.973
> 
> 标签：java, spring, hibernate

我想做：`@Autowire Session session`。对于hibernate 3，[这里](https://stackoverflow.com/questions/1500775/proper-way-to-autowire-a-hibernate-session-in-a-spring-transaction-junit-test)描述了这个过程。它使用 ...hibernate3.SessionFactoryUtils.getSession。但是在 spring 3.2 中 ...hibernate4.SessionFactoryUtils 中没有这样的方法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T13:33:42.223

Spring3.x发生了很大的变化，前几天我也遇到了同样的问题，通过官方文档得知Spring不再提供HibernateTemplate和HibernateDaoSupport，建议使用Hibernate纯API，关于你的这里的困惑是我的解决方案：

首先，在 applicationContext.xml 中定义一个 sessionFactory bean，

```
<!--  sessionFactory -->
    <bean id="sessionFactory"
          class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="packagesToScan">
            <list>
                <value>com.bbs.*.entity</value>
            </list>
        </property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">
                    ${hibernate.dialect}
                </prop>
                <prop key="hibernate.show_sql">${hibernate.show_sql}</prop>
                <prop key="hibernate.format_sql">${hibernate.format_sql}</prop>
                <prop key="hibernate.connection.autocommit">${hibernate.connection.autocommit}</prop>
                <prop key="hibernate.connection.url">jdbc:mysql://localhost/bbs</prop>
                <prop key="hibernate.connection.driver_class">com.mysql.jdbc.Driver</prop>
                <prop key="hibernate.connection.username">root</prop>
                <prop key="hibernate.connection.password">123456</prop>
            </props>
        </property>
        <property name="dataSource">
            <ref bean="dataSource" />
        </property>
    </bean> 
```

然后，在你的 DAO

```
@Autowired
@Qualifier("sessionFactory")
private SessionFactory sessionFactory;

public Session getSession() {
    return sessionFactory.getCurrentSession();
} 
```

这样，您将获得休眠会话，然后做您想做的事，尽情享受吧:)

# asp.net-mvc - signalR 通过集线器发送部分视图结果字符串

> ID：15764483
> 
> 赞同：2
> 
> 时间：2013-04-02T12:46:44.223
> 
> 标签：asp.net-mvc, asp.net-mvc-4, signalr, signalr-hub

我需要能够通过 signalR 在我的 MVC 应用程序中将部分视图作为**字符串返回。**我正在使用集线器。

我正在使用以下方法返回部分视图字符串（从[这里](https://stackoverflow.com/questions/11642815/render-mvc-partialview-into-signalr-response)）：

```
 public static string RenderPartialView(string controllerName, string partialView, object model)
    {
        var context = httpContextBase as HttpContextBase;

        var routes = new RouteData();
        routes.Values.Add("controller", controllerName);

        var requestContext = new RequestContext(context, routes);

        string requiredString = requestContext.RouteData.GetRequiredString("controller");
        var controllerFactory = ControllerBuilder.Current.GetControllerFactory();
        var controller = controllerFactory.CreateController(requestContext, requiredString) as ControllerBase;

        controller.ControllerContext = new ControllerContext(context, routes, controller);

        var ViewData = new ViewDataDictionary();

        var TempData = new TempDataDictionary();

        ViewData.Model = model;

        using (var sw = new StringWriter())
        {
            var viewResult = ViewEngines.Engines.FindPartialView(controller.ControllerContext, partialView);
            var viewContext = new ViewContext(controller.ControllerContext, viewResult.View, ViewData, TempData, sw);

            viewResult.View.Render(viewContext, sw);
            return sw.GetStringBuilder().ToString();
        }
    } 
```

因此，为了使此方法起作用，我需要`HttpContext.Current`在我的 OnConnected 中（我注意到它始终存在）我将其设置为：

```
 public class TaskActionStatus : Hub
    {
        private static HttpContextBase httpContextBase;
...

        public override Task OnConnected()
        {
            httpContextBase = new HttpContextWrapper(HttpContext.Current) as HttpContextBase;
... 
```

然后我在我的 RenderPartialView 方法中使用它：

```
var context = httpContextBase as HttpContextBase; 
```

这样我总是可以访问当前的 HttpContext。但是，我注意到有时我的 HttpContext 静态副本为空。这是为什么？。

*   这里最好的方法是什么？
*   有没有办法在没有 HttpContext 的情况下呈现局部视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-15T08:20:27.267

我使用假 http 上下文来生成视图：

```
 public static string GetRazorViewAsString(object model, string filePath)
    {
        HttpContext httpContext = MockHelper.FakeHttpContext();

        var st = new StringWriter();
        var context = new HttpContextWrapper(httpContext);

        var routeData = new RouteData();
        var controllerContext = new ControllerContext(new RequestContext(context, routeData), new FakeController());
        var razor = new RazorView(controllerContext, filePath, null, false, null);
        razor.Render(
            new ViewContext(controllerContext, razor, new ViewDataDictionary(model), new TempDataDictionary(), st), 
            st);
        return st.ToString();
    }

    #endregion
}

public class FakeController : Controller
{
}

public class MockHelper
{
    #region Public Methods and Operators

    public static HttpContext FakeHttpContext()
    {
        var httpRequest = new HttpRequest(string.Empty, "http://novomatic/", string.Empty);
        var stringWriter = new StringWriter();
        var httpResponce = new HttpResponse(stringWriter);
        var httpContext = new HttpContext(httpRequest, httpResponce);

        var sessionContainer = new HttpSessionStateContainer(
            "id", 
            new SessionStateItemCollection(), 
            new HttpStaticObjectsCollection(), 
            10, 
            true, 
            HttpCookieMode.AutoDetect, 
            SessionStateMode.InProc, 
            false);

        httpContext.Items["AspSession"] =
            typeof(HttpSessionState).GetConstructor(
                BindingFlags.NonPublic | BindingFlags.Instance, 
                null, 
                CallingConventions.Standard, 
                new[] { typeof(HttpSessionStateContainer) }, 
                null).Invoke(new object[] { sessionContainer });

        return httpContext;
    }

    #endregion
} 
```

# opengl - OpenGL 从一种颜色调整到另一种颜色

> ID：15764484
> 
> 赞同：0
> 
> 时间：2013-04-02T12:46:47.413
> 
> 标签：opengl

我做了一个小粒子系统。我现在想做的是让粒子在其生命周期内从一种颜色褪色到另一种颜色。例如从黑色到白色或从黄色到红色。

我使用[`glColor()`函数](http://www.opengl.org/sdk/docs/man2/xhtml/glColor.xml)来设置粒子的颜色。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:54:10.773

你必须自己混合颜色：

计算 0 和 1 之间的混合因子并混合颜色

```
float blend = lifeTime / maxLifeTime;
float red = (destRed * blend) + (srcRed * (1.0 - blend));
float green = (destGreen * blend) + (srcGreen * (1.0 - blend));
float blue = (destBlue * blend) + (srcBlue * (1.0 - blend)); 
```

问候罗恩

# vb.net - 根据访问中是否存在行来更新或插入数据

> ID：15764486
> 
> 赞同：0
> 
> 时间：2013-04-02T12:46:52.727
> 
> 标签：vb.net, ms-access-2007

我正在尝试找到一种有效的方法来执行 UPDATE 如果表中已存在行，或者如果行不存在则执行 INSERT。我使用 Microsoft 访问

这是我使用的方法。打开一个事务，选择查找该行是否存在，如果不存在则插入或更新如果存在，提交事务。有什么简单的方法可以实现这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:36:17.903

正如@HansUp 在他的评论中指出的那样，这里有一个很好的讨论[，](https://stackoverflow.com/questions/6199417/upserting-in-ms-access)但总结一下：

推荐的方法是首先执行 SELECT（或类似的操作）以查看该行是否存在，然后根据需要发出 INSERT 或 UPDATE。

# php - 我想统计 ms word 文件中的单词

> ID：15764490
> 
> 赞同：0
> 
> 时间：2013-04-02T12:46:58.363
> 
> 标签：php, html

我正在使用 php 的 COM 类来计算 ms 字文件中的字数。它在我的本地运行良好。但是当我在服务器上运行它时，它会给出错误。

致命错误：在第 33 行的 /home/classics/public_html/filecount/index.php 中找不到类“COM”

虽然我也不包括本地的 COM 类，而且我没有这种类型的类，但我只是像这样使用它：

```
<?php
    if(isset($_POST['submit'])){
        $file = $_FILES['docfile']['name'];
        $file = str_replace(" ","_",$file);
        $ranname = mt_rand(100,10000);

        //$file = file_get_contents($file);
        $ext = pathinfo($file, PATHINFO_EXTENSION);
        $target ="uploads/";
        if(!is_dir($target))
        { 
        mkdir($target, 0755);
        }

        move_uploaded_file($_FILES['docfile']['tmp_name'],$target.$ranname.".docx");
        if($ext == "doc" || $ext == "docx"){
$word = new COM("word.application") or die("Unable to instantiate Word"); 

$word->Visible = 1; 

$word->Documents->Open("/filecount/".$target.$ranname.".docx");
$temp = $word->Dialogs->Item(228); // returns wdDialogToolsWordCount dialog object
$temp->Execute();   //updates the word count
$numwords = $temp->Words(); //gets the words out of it

echo 'Word count = '.$numwords;

$word->Quit();
//unlink("uploads/".$file);
        }

    }

?> 
```

它给了我对本地的计数。但在服务器上它给出了错误。请帮帮我我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:49:38.357

您确定在您的服务器上此组件（“word.application”）存在并包含在您的 php 文档中吗？

# c# - 如何在编辑器表单中显示自定义实体

> ID：15764491
> 
> 赞同：1
> 
> 时间：2013-04-02T12:47:08.550
> 
> 标签：c#, asp.net-mvc, razor

我有一个使用 Razor 的 ASP.NET MVC3 项目。我有下一个实体：

提供：

```
public class Offer
{
    public Int32 Id { get; set; }

    public String Name { get; set; }

    public DateTime Added { get; set; }

    public String Description { get; set; }

    public Decimal Price { get; set; }

    public String Address { get; set; }

    public virtual OfferCategory OfferCategory { get; set; }
    ...
} 
```

报价类别：

```
public class OfferCategory
{
    public Int32 Id { get; set; }

    public String Name { get; set; }

    public String Description { get; set; }

    public virtual List<Offer> Offers { get; set; }

    ...
} 
```

我正在尝试使用 DropDownListFor(OfferCategory) 制作用于添加新优惠的表格。在这个 dropDownList 中将出现 db 中所有现有的 offerCategories。我在这里能走多远：

控制器中的 AddOffer 操作：

```
var categories = _context.OfferCategory.ToList();
List<SelectListItem> OfferCategories = new List<SelectListItem>();
foreach (var offerCategory in categories)
{
    OfferCategories.Add(new SelectListItem() { Selected = false, Text =  offerCategory.Name, Value = offerCategory.Id.ToString()});
}
ViewBag.OfferCategories = OfferCategories; 
```

这是视图：

```
 //... A lot of things
<div class="editor-label">
    @Html.LabelFor(model => model.OfferCategory)
</div>
<div class="editor-field">
    @Html.DropDownListFor(model=>model.OfferCategory,  (IEnumerable<SelectListItem>)ViewBag.OfferCategories)
</div>
//... A lot of things 
```

当表单中出现所有 OfferCategories 时，但是当我单击提交按钮时，我的 POST AddOffer(Offer offer) 处理程序没有获得表单中选择的 OfferCategory。我怎样才能使它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:07:48.770

你有这个：

```
<div class="editor-label">
    @Html.LabelFor(model => model.OfferCategory)
</div>
<div class="editor-field">
    @Html.DropDownListFor(model=>model.OfferCategory,  (IEnumerable<SelectListItem>)ViewBag.OfferCategories)
</div> 
```

您需要更改为

```
<div class="editor-label">
    @Html.LabelFor(model => model.OfferCategory)
</div>
<div class="editor-field">
    @Html.DropDownListFor(model=>model.OfferCategory.Id,  (IEnumerable<SelectListItem>)ViewBag.OfferCategories)
</div> 
```

注意 model=>model.OfferCategory.Id 而不是 model=>model.OfferCategory

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-02T12:57:57.437

您的问题是您在下拉列表“model=>model.OfferCategory”中指定，它会生成接近 'select name="model.OfferCategory"' 的 html。当表单发布到您的操作“AddOffer(Offer offer)”时，asp.net mvc 模型绑定器尝试创建 OfferCategory 对象，但它不能这样做，因为它只知道一个类别 ID。您需要做的是将视图中创建下拉列表的方式更改为：@Html.DropDownListFor(model=>model.OfferCategory.Id,(IEnumerable)ViewBag.OfferCategories)。完成此操作后，您将获得创建并填充了 Id 属性的 OfferCategory 对象。我希望这会对你有所帮助。

# html - 第二次单击href不起作用

> ID：15764492
> 
> 赞同：-1
> 
> 时间：2013-04-02T12:47:09.693
> 
> 标签：html, href

我写了2个例子。在第一个示例中，我可以点击很多时间。但是在第二个示例中，第二次单击不起作用。我的意思是只能点击 1 次。

```
<a href="index.php">Click me</a>
<a href="index.php?location=#menu">Click me</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:54:38.670

这是浏览器的行为。当浏览器在其当前所在页面的 URL 末尾看到标签片段时，它会尝试转到文档中的该位置，而不是再次重新加载页面。它应该跳转到任何具有 ID“菜单”的元素，或者如果找不到该元素，则什么也不做。

如果该`#menu`部分是查询字符串中位置变量的*值，则需要转义主题标签，以免将其视为片段。*否则，您的位置变量将被设置为空，并且整个`#menu`被视为片段。

```
<a href="index.php?location=%23menu">Click me</a> 
```

但是，在这种情况下，我建议`#`从您的值中排除主题标签 ( ) 以避免混淆。

# jquery - 使用 jQuery 循环单击按钮上的下一个/上一个幻灯片

> ID：15764495
> 
> 赞同：1
> 
> 时间：2013-04-02T12:47:17.053
> 
> 标签：jquery, html, jquery-cycle

我不是 jQuery 的天才，想知道是否有人可以给我一个关于我正在使用的代码有什么问题的指针。滑块有效，但我需要通过按左右键转到下一张和上一张幻灯片。

这很可能是我忽略的一个明显错误。目前，当我按下一个键时没有任何反应。

**jQuery**

```
 <script>
        $(function() {
            $('.slideshow').cycle({
                fx:'scrollHorz',
                easing:'easeInOutCirc',
                speed:700,
                timeout:5000,
                pager:'.slideshow_wrapper .slideshow-paging'
            });
            $('.slideshow_wrapper').mouseenter(function(){
                $('.slideshow').cycle('pause');
            }).mouseleave(function(){
                $('.slideshow').cycle('resume');
            }).keyup(function(e) {
            if(e.keycode == 37)
                $('.slideshow').cycle('prev');
            if(e.keycode == 39)
                $('.slideshow').cycle('next');
            })
        });
    </script> 
```

**HTML**

```
<section id="gallery" class="slideshow_wrapper">
<div class="slideshow-paging"></div>
<div class="slideshow">
    <article class="slideshow_item">
        <div class='image'>
            <a href='#'>
                <img src='[URL HERE]' />
            </a>
        </div>
    </article>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:10:12.700

您已将 keyup 事件处理程序附加到幻灯片包装器，因此需要有焦点才能触发处理程序。而是将其附加到文档中。另外，使用`which`代替键码...

```
$(function() {
    $('.slideshow').cycle({
        fx:'scrollHorz',
        easing:'easeInOutCirc',
        speed:700,
        timeout:5000,
        pager:'.slideshow_wrapper .slideshow-paging'
    });
    $('.slideshow_wrapper').mouseenter(function(){
        $('.slideshow').cycle('pause');
    }).mouseleave(function(){
        $('.slideshow').cycle('resume');
    })
    $(document).keyup(function(e) {
        if(e.which == 37)
            $('.slideshow').cycle('prev');
        if(e.which == 39)
            $('.slideshow').cycle('next');
    });
}); 
```

此外，根据您使用的 jQuery 版本，您可能会更好`on`地分配事件处理程序......

```
$(function() {
    $('.slideshow').cycle({
        fx:'scrollHorz',
        easing:'easeInOutCirc',
        speed:700,
        timeout:5000,
        pager:'.slideshow_wrapper .slideshow-paging'
    });
    $('.slideshow_wrapper').on("mouseenter", function(){
        $('.slideshow').cycle('pause');
    }).on("mouseleave", function(){
        $('.slideshow').cycle('resume');
    })
    $(document).on("keyup", function(e) {
        if(e.which == 37)
            $('.slideshow').cycle('prev');
        if(e.which == 39)
            $('.slideshow').cycle('next');
    });
}); 
```

# mac-app-store - 如何防止 TideSDK 应用程序在使用权利文件签名后崩溃？

> ID：15764502
> 
> 赞同：4
> 
> 时间：2013-04-02T12:47:30.333
> 
> 标签：mac-app-store, tidesdk

为了将我非常非常基本的 Mac App 提交到 App Store（非常基本，因为它只包含一个 HTML 和 Javascript 文件 - 非常简单的文字游戏，不需要系统的任何权限），Apple 要求您沙箱应用程序。

该应用程序完全可以正常工作，直到我使用最基本的 Entitlements.plist 文件对其进行代码设计，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN"     "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
<!-- Activates the sandbox, required. -->
<key>com.apple.security.app-sandbox</key>
<true/>
</dict>
</plist> 
```

但是，在使用此代码进行代码设计后，应用程序在启动时会崩溃。值得一提的是，该应用程序是使用 submit-to-appstore 标志构建的。

# javascript - 跨域 iframe 高度操作

> ID：15764509
> 
> 赞同：2
> 
> 时间：2013-04-02T12:47:35.567
> 
> 标签：javascript, cross-domain

**我的问题**：

我有一个链接到各种外部网站的 iframe。

我根本无法访问外部网站！

我想要实现的是将我的 iframe 与实际网站的 100% 高度/宽度嵌套到一个固定大小的 div 中，这样我就可以在这个 div 上应用自定义滚动条。

到目前为止，我有以下标记：

```
<div class="Content" style="margin: 0; padding: 0; height: 500px; width: 500px; overflow: auto;">
   <iframe id="mainframe" name="mainframe" src="http://www.fisk.dk" style="height: 100%; width: 100%;">
   </iframe>
</div> 
```

正如预期的那样，100% 的 Iframe 高度和宽度将转换为 500 像素的父 div 高度和宽度。

在过去的 3 个小时里，我在谷歌上搜索，试图弄清楚如何通过使用纯 css 或 css 和 javascript 来实现这一目标，但没有任何结果。

无效的结果：

*   Porthole - 需要访问外部网站。
*   EasyXDM - 需要访问外部网站。
*   访问 document.getElementById('the_iframe').contentWindow 也不起作用 - 出现访问被拒绝错误。

任何提示表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:53:44.310

[在使用 EasyXDM 和PostMessage](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage)之前，我已经完全按照您的描述进行了操作。如您所述，需要访问外部网站。您需要一些在外部站点的域上运行的 JavaScript 代码。

浏览器不允许您站点上的 JavaScript 或 CSS 代码访问其他站点的 DOM，因此无法知道其他站点页面的高度。

# c# - 当我们在构建定义中打开流程选项卡时，通常会在哪里下载自定义构建活动？

> ID：15764512
> 
> 赞同：0
> 
> 时间：2013-04-02T12:47:45.937
> 
> 标签：c#, android-activity, build, tfs

我有以下问题。有一个自定义构建过程正在使用自定义构建活动。前段时间我一直在打开这个版本，一切都很好。但是，一段时间后，自定义构建活动和构建过程发生了变化，出现了新的参数和其他一些变化。此活动已在构建控制器设置中设置的服务器源代码控制路径上更新。但是，似乎这个活动不想下载到我的桌​​面上，因为当我打开构建定义时，我收到错误，我的新自定义类型无法解析。

我尝试自己构建此活动并将其放置到包含 devenv.exe 的文件夹中，并且这个“已解决”的问题 - 我的构建过程已打开。但这不正常。

我应该怎么做才能正常打开我的构建定义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:07:34.017

在构建定义上打开进程选项卡时，为控制器定义的自定义程序集文件夹的内容被下载到临时文件夹并由工作室加载一次（我不确定 dll 的适当版本增量是否会解决这个问题 - 尚未尝试）。您要么在某处有覆盖此的 dll（GAC、VS 私有程序集），要么您的工作室已经运行了很长时间。

删除你放在 devenv 中的那个，重新启动工作室，检查 GAC 和私有程序集，你可以使用 Studio 并将调试器附加到其他实例并查看加载的模块，这可以帮助你查明项目的来源。

从 Visual Studio 命令行中删除程序集运行： gacutil /u "YourAssembly"

对于工作室程序集，我相信这是文件夹：Microsoft Visual Studio 10.0\Common7\IDE\PrivateAssemblies

# java - Hashmap NoSuchElementException 错误

> ID：15764514
> 
> 赞同：0
> 
> 时间：2013-04-02T12:47:53.570
> 
> 标签：java, foreach, hashmap, hashset

当我执行 printAll 时，我一直在努力解决 java.util.NoSuchElementException 错误。

```
public class myDatabase {

    Map<String, HashSet<Integer>> mapOfSets = new HashMap<String, HashSet<Integer>>();

    void printAll() {

        if (mapOfSets.isEmpty() == false)
        {
                for (String key : mapOfSets.keySet()) 
                {
                    System.out.println(key);

                    //print the set
                    for (HashSet<Integer> id : mapOfSets.values() ) 
                        System.out.println(id);
                }
        }

} 
```

//剩下的空代码...

**评论更新：例外是**

```
java.util.NoSuchElementException 
at java.util.HashMap$HashIterator.nextEntry(HashMap.java:809) 
at java.util.HashMap$KeyIterator.next(HashMap.java:841) 
at StudentDatabase.report(myDatabase.java:29) 
at DatabaseRun1.main(DatabaseRun1.java:52) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:01:53.243

如果我了解您要做什么，最好使用`entrySet`

```
for(Map.Entry<String, HashSet<Integer>> entry : mapOfSets.entrySet()) {
    String key = entry.getKey();
    HashSet<Integer> value = entry.getValue();

    // Print it
} 
```

我看不出这段代码如何产生`NoSuchElementException`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T12:58:02.650

你应该改变：

```
 for (HashSet<Integer> id : mapOfSets.values() ) 
                    System.out.println(id); 
```

至

```
 for (Integer i : mapOfSets.get(key)) {
        System.out.println(i);
      } 
```

或（正如@JonSkeet 指出的那样）

```
 System.out.println(mapOfSets.get(key)); 
```

本质上，您正在尝试在关键位置打印地图而不是地图内的集合。

# javascript - JavaScript - 使用 xml 数据生成 Kendo Ui 网格

> ID：15764516
> 
> 赞同：0
> 
> 时间：2013-04-02T12:47:55.287
> 
> 标签：javascript, xml, xslt, kendo-grid

我一直在使用 XSLT 来显示我的 xml 页面。我利用以下内容从 xml 文件中获取数据：

> < xsl:value-of select="ClinicalDocument/component/structuredBody/component[3]/section/text/table/tbody"/ >

在此之后，我有以下 javascript 来清理数据并进行转换：

> ```
> -----------Get Content for Grids----------
> 
>   //Split Content into array
>   var purposeArray = document.getElementById('purposeOfVisit').innerHTML.split("\n");
>   var activeProblemArray = document.getElementById('activeProblems').innerHTML.split("\n");
> 
>   //------------  Remove All Unwanted Values-----------\\*/
>   var newDataString ="";
>   for( var k = 0; k < purposeArray.length; k++ )
>   {
>       newDataString += purposeArray[k] + "__";
>   }
>   newDataString = newDataString.replace(/  /g,"");
>   newDataString = newDataString.replace(/__________/g,"__-__");
>   var newDataArray = newDataString.split("__");
> 
>   //------------- Save Values in final Array -------------\\*/
>   var semiFinalArray = new Array();
>   for( var x=0; x < newDataArray.length; x++)
>   {
>       if(newDataArray[x].length != 0)
>       {
>           semiFinalArray.push(newDataArray[x]);
>       }
>   }
>   var finalArray = new Array();
>   var counter = 0;
>   //------------  Find Number of Columns in row   ------------\\*/
>   var numberOfRows = document.getElementById('numberOfRows').innerHTML;
>   var numberOfColumns = document.getElementById('numberOfColumns').innerHTML;
>   var columnsPerRow = parseInt(numberOfColumns) / parseInt(numberOfRows);
> 
>   //------------------------------Testing ------------------------------//
>   var dataNamePre = "dataValue";
> 
>   var temporaryArray = new Array();
>   var dataName;
> 
>       //-----------   Generate Grid Values    -----------//
>   for( var b=0 ; b < semiFinalArray.length ; b = b + columnsPerRow)
>   {
>       var problemComment = "";
>       counter = 0;
>       var obj;
> 
>       for( var a=0 ; a < columnsPerRow ; a++)
>       {
>           dataName = dataNamePre + counter.toString() + "";
>   //-------Generate Grid Titles------//
>           temporaryArray.push("Title " + (counter+1));
> 
>           var key = "key"+a;
> 
>           obj = { values : semiFinalArray[b+a] };
> 
>           var problemComment = "";
>           finalArray.push(obj); 
> 
>           counter++;
>       }
>   }
>   //---------------------Generate GridArray---------------------------//
> 
>   var gridArray = [];
>   var gridArrayHead = new Array();
>   counter = 0;
>   var objectValue = new Array();
> 
>   for( var x = 0; x < finalArray.length; x++ )
>   {
>       objectValue = { head:temporaryArray[x], values: finalArray[x].values }
>       gridArray.push(objectValue);
>   }
> 
>   var provFacilities = [];
> 
>   for( var x = 0; x < finalArray.length; x++ )
>   {
>       provFacilities[x] = 
>       {
>           head:temporaryArray[x], values: finalArray[x].values
>       }
>   }
> 
>   //alert(gridArray);
>   $("#grid").kendoGrid(
>   {
>       columns: 
>       [{
>           title:gridArray.head,  
>           template:'#= values #'
>       }],
>       dataSource: {
>           data:finalArray,
>           pageSize:10
>       },
>       scrollable:false,
>       pageable:true
>   }); 
> ```

这可能是一种迂回的方法，但我对这种编码方法仍然很陌生。目前，所有数据都显示在一列中，我的临时数组中的最后一个值作为列的标题。

在我尝试为 Kendo Grid 设置 DataSource 之前，一切正常。在网格中的 columns 属性中工作时，我进行了以下更改：

> *标题：gridArray[0].head*

完成后，标题将更改为数组中的第一个值。

**我想知道的是如何根据标题在剑道网格中生成列？有没有办法遍历所有值并从那里创建对象，看到发送到网格的日期是数组中的对象？**

我基本上想要的是完成这项工作，而不需要重复：

> var myGrid = $("#grid").kendoGrid( { 列：[ { 标题：temporaryArray[0]，
> 字段：finalArray[0].values }，{ 标题：temporaryArray[1]，
> 字段：finalArray[1]。值}，{标题：temporaryArray[2]，
> 字段：finalArray[2].values}，{标题：temporaryArray[3]，
> 字段：finalArray[3].values}，{标题：temporaryArray[4]，
> 字段：finalArray [4].values } ] )};

任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:38:44.793

此问题已使用以下编码修复：

```
var arrayData = [];

for( var x = 0; x < semiFinalArray.length; x=x+5 )
{
    var tempArr = new Array();

    for( var y = 0; y < 5; y++ )
    {
        var num = x + y;
        tempArr.push(semiFinalArray[num]);
    }
    arrayData.push(tempArr);
}

var dataTitles = [];
for( var x = 0; x < titleArray.length; x++ )
{
    var head = "";
    head = titleArray[x];
    head = head.replace(/ /g,"");
    dataTitles.push(head);
}

var counter = 0;
var columnDefs = [];
for (var i = 0; i < columnsPerRow.length; i++) 
{
    if (counter == (columnsPerRow - 1)) 
    {
        counter = 0;
    }
    columnDefs.push({ field: dataTitles[counter], template: arrayData[i].values });
    counter++;
}
// Create final version of grid array
var gridArray = [];
for (var i = 0; i < arrayData.length; i++) 
{
    var data = {};
    for (var j = 0; j < dataTitles.length; j++) 
    {
        data[dataTitles[j]] = arrayData[i][j];
    }
    gridArray.push(data);
}
// Now, create the grid using columnDefs as argument
$("#grid").kendoGrid(
{
    dataSource: 
    {
        data: gridArray,
        pageSize: 10
    },
    columns: columnDefs,
    scrollable: false,
    pageable: true
}).data("kendoGrid"); 
```

这样，数据就会显示在 DataGrid 中。

# iphone - 错误：HTTP 状态代码：400 我在朋友脸书墙上发布数据时收到此信息？

> ID：15764518
> 
> 赞同：0
> 
> 时间：2013-04-02T12:48:03.557
> 
> 标签：iphone, objective-c, facebook, xcode4

我在我的应用程序中选择我的脸书朋友我想在我的朋友墙上发布一些文本数据，因为我按下完成按钮时按下完成按钮我得到这个，`error.Error: HTTP status code: 400` 嘿嘿是我的代码

```
- (void)facebookViewControllerDoneWasPressed:(id)sender {
    NSMutableString *text = [[NSMutableString alloc] init];

    // we pick up the users from the selection, and create a string that we use to update the text view
    // at the bottom of the display; note that self.selection is a property inherited from our base class
    for (id<FBGraphUser> user in self.friendPickerController.selection) {

        NSString *userID = user.id;
        NSLog(@"trying to post image of %@ wall",userID);
        NSMutableDictionary  *postVariablesDictionary = [[NSMutableDictionary alloc] init];
        //[postVariablesDictionary setObject:UIImagePNGRepresentation(image) forKey:@"picture"];
        [postVariablesDictionary setObject:@"my image" forKey:@"message"];

        [FBRequestConnection startWithGraphPath:[NSString stringWithFormat:@"%@/photos",userID] parameters:postVariablesDictionary HTTPMethod:@"POST" completionHandler:^(FBRequestConnection *connection, id result, NSError *error)
         {
             if (error)
             {
                 //showing an alert for failure
                 UIAlertView *alertView = [[UIAlertView alloc]  initWithTitle:@"Facebook" message:error.localizedDescription                                                                                                delegate:nil   cancelButtonTitle:@"OK"              otherButtonTitles:nil];
                 [alertView show];
             }
             else
             {
                 //showing an alert for success
                 UIAlertView *alertView = [[UIAlertView alloc]  initWithTitle:@"Facebook" message:@"Shared the photo successfully"                                                                                                delegate:nil   cancelButtonTitle:@"OK"              otherButtonTitles:nil];
                 [alertView show];
             }
         }];

    }
     NSLog(@"%@",text);
    [self fillTextBoxAndDismiss];
   } 
```

# php - 已弃用 IP 的调用时传递引用

> ID：15764519
> 
> 赞同：0
> 
> 时间：2013-04-02T12:48:04.800
> 
> 标签：php

我收到了这个错误：Call-time pass-by-reference has been deprecated; 如果您想通过引用传递它，请修改 ip_valid() 的声明。

在这些代码行的某个地方。问题是我在 PHP 方面的能力并不强，无法弄清楚我需要修改什么来修复它。

任何建议都将不胜感激。

```
function getIP () 
{
    $check = array(
            'HTTP_X_FORWARDED_FOR', 'HTTP_X_FORWARDED', 'HTTP_FORWARDED_FOR',
            'HTTP_FORWARDED', 'HTTP_VIA', 'HTTP_X_COMING_FROM', 'HTTP_COMING_FROM',
            'HTTP_CLIENT_IP'
            );

    foreach ( $check as $c ) {
        if ( ip_valid ( &$_SERVER [ $c ] ) ) {
            return ip_first ( $_SERVER [ $c ] );
        }
    }

    return $_SERVER['REMOTE_ADDR']; 
```

}

提前感谢

韦恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:49:47.087

尝试不使用＆符号：

```
ip_valid ( $_SERVER [ $c ] ) 
```

与您强制[by-reference](http://php.net/manual/en/language.references.pass.php)一样。

`ip_first`虽然，很明显，您在传递同一件事时不会为调用执行此操作，所以我想知道是什么让您认为它首先是正确的，以及为什么您在第二个实例中做了不同的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T12:49:55.020

只需`&`从`ip_valid ( &$_SERVER [ $c ] )`.

# svn - SVN 设置和重新集成功能

> ID：15764520
> 
> 赞同：1
> 
> 时间：2013-04-02T12:48:15.957
> 
> 标签：svn

我们的客户希望拥有我们正在开发的源代码。作为其中的一部分，他们选择了 SVN。他们希望我们最终开发代码。

他们提出了以下结构。字母代表分支。一旦 DEV 分支完成了代码积累，他们希望一个名为 QA 的新分支拥有该代码，以便 QA 团队可以开始对其进行测试。如果他们发现任何错误，DEV 团队会更新 DEV 分支中的代码，QA 会再次将他们的代码与 DEV 同步。

最后将代码发布到生产环境中，如果有任何错误，DEV-QA-Prod 循环将再次遵循。

```
A->B [DEV]----------
|\ |               |
|  C [ QA ]        |
|                  | 
|_______D[ PRODUCTION ] 
```

我们对 SVN 比较陌生。所以，我们在这方面有几个问题。

1.一旦 QA 顺利进行，B 和 C 或多或少都有相同的代码库。鉴于此，应该将哪个分支集成回 A？是 B 还是 C 或者根本不重要，因为它们都有相同的东西。

2.如果确实是C，我们可以直接将另一个分支[B]的分支[C]重新整合到父[A]中吗？

谢谢，帕万。`enter code here`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:42:46.597

如果 QA 只是针对它记录错误，从不实际接触代码并将修复提交到分支，我不会创建`QA`分支。`DEV`为什么不授予 QA 对分支的只读访问权限？这样，您就会知道您只需要将`DEV`分支合并回`trunk`.

如果 QA*确实*需要他们自己的分支 off `DEV`，因为他们将提交修复，那么合并路径应该是：`QA`-> `DEV`-> `trunk`。

我不确定您为什么要在QA 后创建一个`PROD`分支。`trunk`为什么不简单地[标记`trunk`](http://svnbook.red-bean.com/en/1.7/svn.branchmerge.tags.html)版本号或描述版本的名称？然后，假设在原始`DEV`分支上继续开发，并且如果在生产中发现错误，您可以在下一个版本中滚动修复`DEV`（合并回QA 后），或者在标记处`trunk`创建一个单独的`DEV`分支`trunk`修订并在那里应用修复。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T14:58:33.300

用作`trunk`开发结帐。中的代码`trunk`应该是主副本，其中执行错误修复和“安全”开发。

一旦您希望 QA 完成他们的工作，请创建一个新标签，并为其提供版本/内部版本号。

当 QA 发现一个 bug 时，trunk 上的代码就被修复了。运行 QA 测试时，无需在主干上进行进一步开发。修复错误后，将创建一个新标签，并且必须再次运行 QA 测试。

如果您想在 QA 测试/错误修复周期运行时开发新功能，您应该创建一个新分支，经常从主干合并它，以集成所有错误修复：新功能的发布将包含在合并中从分支到主干并创建新标签。等等。

QA 可以使用 svn`switch`命令从一个标签跳转到另一个标签：我想他们不写代码；标签在创建后不得修改。

# icarousel - iCarousel 类型线性，打破 UI

> ID：15764529
> 
> 赞同：0
> 
> 时间：2013-04-02T12:48:31.977
> 
> 标签：icarousel

当我使用 iCarousel 类型线性时，并且 wrap 是真的。我得到如下用户界面：![在此处输入图像描述](https://i.stack.imgur.com/5HiWB.png)

我面临的问题是顶部的数字 998 UI 已损坏，但我想要可见的 998 数字而不增加 iCarousel 高度。那么，我该如何实现呢？如果我想要一个可见的 998 号码，我不关心 UI 的另一件事可能会因数字 2 而中断。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:17:41.303

您的轮播项目被切断的原因有两个：

1）您的轮播视图不在窗口中垂直居中。如果你居中，0 将是死点，998 和 2 都将被切断，但同样

2）您需要设置项目视图大小以完全适合您的视图。您当前使用的是示例项目附带的默认图像，大小为 200x200 像素。大概你最终会用你自己的观点来代替这些。当你这样做时，确保这些视图的大小是你窗口高度的精确划分，例如，如果你的窗口是 1024 像素高，并且你想显示 5 个视图，那么它们需要是 1024/5 像素高（204.8 像素）。显然这不是一个很好的数字，但是您可以将它们缩小一点，以便它们是一个很好的整数，然后使用轮播委托方法在它们之间添加一些间距。

# jquery - jQuery输入字段值切换

> ID：15764534
> 
> 赞同：0
> 
> 时间：2013-04-02T12:48:42.250
> 
> 标签：jquery, toggle

嗨，我有这个输入字段

```
<form action="" method="post">
    <input type="text" value="Type Your Email" name="field" class="field"/>
    <input type="submit" value="Submit" class="submit" />
</form> 
```

当我单击该字段时，我试图显示/隐藏该值。问题是我忘记了如何达到我尝试过的价值

```
$('.field').click(function(){

  $('.field value').toggle();

}); 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T12:51:46.390

您不能*显示或隐藏*字段值，但可以*设置*它。

你可能正在寻找这样的东西：

```
$('.field').focus(function(){
   if($(this).val() == 'Type Your Email') {
      $(this).val('');
   }
}).blur(function() {
   if($(this).val() == '') {
      $(this).val('Type Your Email');
   }
}); 
```

上面，该值是设置在`focus`而`blur`不是在单击该字段时设置的，因此当您通过制表符或其他方式访问该字段时，代码仍然有效。

但是，我更愿意提请您注意 html5 属性[`placeholder`](http://www.cssnewbie.com/cross-browser-support-for-html5-placeholder-text-in-forms/#.UVrVZxzIa-9)，它确实可以做到这一点，但没有一些不良副作用（例如`value`，您的字段永远不会是占位符文本）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T12:57:24.903

您可以使用“占位符”

您将在占位符属性中给出的内容将显示在文本字段中如果您将注意力集中在将隐藏的文本字段中。如果您将注意力集中在将显示占位符值的 out 类型

例子：

```
<form action="post">
  <input type="text" name="fname" placeholder="First name"><br>
  <input type="text" name="lname" placeholder="Last name"><br>
  <input type="submit" value="Submit">
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T12:58:21.750

你可以使用纯JS

```
<input type="text" value="Type Your Email" onfocus="this.value=''" onblur="this.value='Type..'"     name="field" class="field"/> 
```

或者

```
$(".field").focus(function (){ $(this).val='';});
$(".field").blur(function (){ $(this).val='Type something';}); 
```

在进行更改之前检查输入是否有价值是一个好习惯，而不是清除用户在字段中输入的内容。

您可以在 [http://api.jquery.com/focus/](http://api.jquery.com/focus/) 和 [http://api.jquery.com/blur/上找到更多信息](http://api.jquery.com/blur/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T12:54:57.797

我想你要的是这个

```
$('.field').on("focus", function () {
    var txt = $(this);
    if (txt.val() == "Type Your Email")
        txt.val("");
});

$('.field').on("blur", function () {
    var txt = $(this);
    if (txt.val() == "")
      txt.val("Type Your Email");
}); 
```

或者你可以使用`Placeholder`属性（但它不适用于 IE）

```
<input type="text" value="Type Your Email" 
       name="field" class="field" 
       placeholder="Type Your Email"/> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-27T12:11:55.480

试试这个[http://jsfiddle.net/zander_pope/udu5cchh/](http://jsfiddle.net/zander_pope/udu5cchh/)

```
$(function () {
    $('.button').on('click', function (e) {
        if (!$('.dd').val()) {
            $('.dd').val("relevance");
        } else {
            $('.dd').val("");
        }
    });
});
$(function () {
    $('.button').on('click', function (e) {
        $('.search').click();
    });
}); 
```

希望能帮助到你！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-02T12:53:28.467

[演示](http://jsfiddle.net/mohammadAdil/QUpWw/1/)

新的[占位符属性](http://www.w3schools.com/tags/att_input_placeholder.asp#gsc.tab=0)将是您问题的最佳解决方案，但请注意

> Internet Explorer 10、Firefox、Opera、Chrome 和 Safari 支持 placeholder 属性。注意：Internet Explorer 9 及更早版本不支持标记的占位符属性。

```
$('.field').on('focus',function(){

 if($(this).val() == 'Type Your Email') {
      $(this).val('');
   }

});

$('.field').on('blur',function(){
    if($(this).val() == ""){
     $(this).val("Type Your Email");
     }
}); 
```

# java - imagemagick convert 命令生成大量图像，而不仅仅是一张

> ID：15764536
> 
> 赞同：0
> 
> 时间：2013-04-02T12:48:54.237
> 
> 标签：java, imagemagick, image-resizing

我正在从 Java 应用程序调用以下命令：

```
/usr/bin/convert "companies.png" -strip -quality 67 -density 92 -resize "300x>" -crop "300x300>" -format png result.png 
```

但是，我没有返回一张图像，在调整大小后裁剪为 300x300，而是获得了相同图像的六个切片，每个切片高 300 像素，这并不是我所期望的。

关于如何更改此命令以仅获取**一张**图像的任何想法？这是一个后端服务，因此拥有生成未知数量图像的东西并不是很理想。

原始图像可[在此处获得](http://i.stack.imgur.com/ZOSJu.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T13:04:19.973

它应该与这个一起工作：

```
/usr/bin/convert "companies.png" -strip -quality 67 -density 92 -resize "300x>" -crop "300x300>+0+0" -format png result.png 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T13:04:39.673

我看到同样的事情。但是，ff我先转换为jpg

```
convert companies.png companies.jpg 
```

然后在新的 jpg 上运行您的命令，只输出一个文件（jpg 或 png 输出与 jpg 输入的行为相同）。奇怪的是，输入格式似乎很重要。

```
/usr/bin/convert "companies.jpg" -strip -quality 67 \
  -density 92 -resize "300x>" -crop "300x300>" \
  -format png result.png  #-> one file result.png 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T13:28:11.243

您只需要将选项添加`-delete 1--1`到参数列表中。这样，您将删除从`1`（序列的第一个图像）到`-1`（序列的最后一个图像）的索引范围。结果将是一个`result.png`文件。

命令行将是这样的：

```
convert original.png -strip -quality 67 -density 92 -resize '300x>' -crop '300x300>' -format png -delete 1--1 result.png 
```

# c# - 已超出最大字符串内容长度配额 (8192)。增加 XmlDictionaryReaderQuotas 上的 MaxStringContentLength 属性

> ID：15764537
> 
> 赞同：0
> 
> 时间：2013-04-02T12:49:00.117
> 
> 标签：c#, wcf, web-config

将实体对象传递给 WebService 时出现以下错误

读取 XML 数据时已超出最大字符串内容长度配额 (8192)。可以通过更改创建 XML 阅读器时使用的 XmlDictionaryReaderQuotas 对象的 MaxStringContentLength 属性来增加此配额

我试图通过在Webservice的webconfig中给出以下代码来解决这个问题，但错误仍然存​​在。任何人都可以帮助！！！！

```
 <bindings>
      <wsHttpBinding>
        <binding name="MyService" maxReceivedMessageSize="2147483647">
          <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647"
                    maxArrayLength="2147483647" maxBytesPerRead="2147483647"
                   maxNameTableCharCount="2147483647" />
          <security mode="TransportWithMessageCredential">
            <transport clientCredentialType="None" />
            <message clientCredentialType="UserName" />
          </security>
        </binding>
      </wsHttpBinding>
    </bindings> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T12:51:46.733

您必须在服务器和客户端上设置最大字符串内容长度配额。所以检查你的客户端配置。如果这不起作用，请检查您是否使用了正确的绑定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T12:52:04.563

您的服务器端 Web 配置允许使用大字符串，但您还需要修改客户端 ServiceReferences.ClientConfig 文件以反映这一点。

```
<configuration>
  <system.serviceModel>
    <bindings>
        <wsHttpBinding>
            <binding name="Binding_MyService">
                <binaryMessageEncoding />
                <httpTransport maxReceivedMessageSize="2147483647" maxBufferSize="2147483647" />
            </binding>
        </wsHttpBinding>
    </bindings>
    <client>
        <endpoint address="yourserviceurlhere"
            binding="wsHttpBinding" bindingConfiguration="Binding_MyService"
            contract="yourcontracthere" name="MyService" />
    </client>
</system.serviceModel> 
```

# c - getgrnam() 没有明显原因导致错误？

> ID：15764546
> 
> 赞同：0
> 
> 时间：2013-04-02T12:49:39.237
> 
> 标签：c, linux

我收到一个没有意义的错误。我有以下代码 -

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/types.h>
#include <grp.h>

gid_t groupIdFromName(const char *name)
{
    struct group *grp;
    gid_t g;
    char *endptr;

    if (name == NULL || *name == '\0')
        return -1;

    g = strtol(name, &endptr, 10);
    if (*endptr == '\0')
        return g;

    grp = getgrnam(name);
    if (grp == NULL)
        return -1;

    return grp->gr_gid;
}

int main(int argc, char** argv) {
  return (EXIT_SUCCESS);
} 
```

我在 Linux Mint 中使用 NetBeans，当我尝试并且我的程序构建没有问题时，当我尝试运行它时，我收到以下错误 -

```
Signal received: SIGSEGV (?) with sigcode ? (?)
From process: ? 
```

如果我注释掉这一行，`grp = getgrnam(name);`这个错误就会消失。但我不明白为什么这条线会导致它失败，特别是因为我的主要方法是空白的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:13:41.843

我发现很多人在 NetBeans 和 Code::Blocks 中遇到这个错误已经有一段时间了。我在 Eclipse 中尝试了代码，它工作正常。所以不要在 Linux 上使用 NetBeans 进行 C 开发是我的建议。

# amazon-web-services - 为什么部署在 Amazon Elastic Beanstalk 上的应用程序无法访问？

> ID：15764547
> 
> 赞同：0
> 
> 时间：2013-04-02T12:49:43.217
> 
> 标签：amazon-web-services, amazon-ec2, amazon-elastic-beanstalk

我已经在[Amazon Elastic Beanstalk](http://aws.amazon.com/elasticbeanstalk/)上部署了基于 Spring MVC 和 MySQL 的应用程序。MySQL 的 RDS 实例运行良好。我使用 Tomcat 6（指的是 RDS 实例）在 Beanstalk 上部署了我的应用程序战争，并且 EC2 实例根据 AWS 管理控制台提示成功运行，但是在访问应用程序 URL 时，我面临以下问题

```
Error 324 (net::ERR_EMPTY_RESPONSE): The server closed the connection without sending any data. 
```

注意：使用 AWS 的免费服务。我已将 RDS 的实例类型定义为小型，将 Web 应用程序的实例类型定义为中型，并且确实有具有 36mb 数据的 S3 实例。

任何人都可以建议我有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:00:38.620

我通过为数据库实例创建 EC2 安全组解决了这个问题。

# git - 当我尝试执行拉取请求时出现测试错误

> ID：15764548
> 
> 赞同：0
> 
> 时间：2013-04-02T12:49:47.023
> 
> 标签：git, github, rake, travis-ci

我试图对回购提出拉取请求。我编辑的文档是 html 格式。但我收到消息“Travis 构建失败”，我检查了 Travis CI 报告，这是报告错误：

```
$ rake
rake aborted!
No Rakefile found (looking for: rakefile, Rakefile, rakefile.rb, Rakefile.rb)
(See full trace by running task with --trace)
The command "rake" exited with 1.
Done. Your build exited with 1. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-16T13:29:22.263

通常这意味着您的 .travis.yml 文件无法解析，我们将项目默认为 Ruby。我们现在为此更改了一些行为，因此构建错误带有更合理的错误消息（“无法解析您的 .travis.yml 文件”或类似的内容）。

很抱歉造成混乱。

# iphone - 如何更新 PLIST 中的字符串

> ID：15764561
> 
> 赞同：0
> 
> 时间：2013-04-02T12:50:28.413
> 
> 标签：iphone, ios4

我有 40 个项目的数组，其中 dict.Dict 包含 2 个字符串项目，当用户单击 uibutton 时，我想将字符串项目写入 0 到 1

```
<array>
    <dict>
        <key>quote</key>
        <string>Some Quotes</string>
        <key>favorite</key>
        <string>0</string>
    </dict>

</array> 
```

我正在应用以下代码，但它对我不起作用...

```
-(void) addFavorite
{
    NSLog(@"Hello");

    [someButton setImage:[UIImage imageNamed:@"add_favoritegold.png"] forState:UIControlStateHighlighted];
    NSURL *documents = [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
    NSURL *plistUrl = [documents URLByAppendingPathComponent:@"quotes.plist"];
    NSArray *plistContents = [NSArray arrayWithContentsOfURL:plistUrl];
    NSMutableDictionary *editFavorite = [plistContents objectAtIndex:1];
} 
```

它不会将最喜欢的 0 更改为 1，并且我的 plist 在支持文件中，我是否必须在属性列表中进行任何更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:00:46.797

```
-(void)btnClicked
{
    [arr_Data addObject:str1];
    [arr_Data addObject:str2];

    // get paths from root direcory
    NSArray *paths = NSSearchPathForDirectoriesInDomains (NSDocumentDirectory, NSUserDomainMask, YES);

   // get documents path
   NSString *documentsDirectory = [paths objectAtIndex:0];

   // get the path to our Data/plist file
   NSString *path = [documentsDirectory stringByAppendingPathComponent:@"Data.plist"];

   // This writes the array to a plist file. If this file does not already exist, it creates a new one.
   [arr_Data writeToFile:path atomically: TRUE];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T08:54:14.277

请参阅下面的代码以了解您的概念

```
 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); 
      NSString  *plistdocumentsDirectory = [paths objectAtIndex:0]; 
    NsString * plistFilePath = [plistdocumentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"filename.plist"]];
  NSMutableArray  *savedStock = [[NSMutableArray alloc] initWithContentsOfFile:plistFilePath];
     [[savedStock objectAtIndex:indexForWheretoStoreData] setObject:@"your value" forKey:@"your key"];
  [savedStock writeToFile:filePath  atomically:YES]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T13:00:54.997

**这是一个简单的 4 步过程：**

**1)**选择词典（您要更新“收藏夹”标签）。

```
NSArray *paths = NSSearchPathForDirectoriesInDomains (NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *yourPath = [documentsDirectory stringByAppendingPathComponent:@"yourPlist.plist"]; 
```

**2)**设置新值。

```
[yourDict setValue:@"1" forKey:@"favorite"]; 
```

**3）**将其插入阵列。

```
NSMutableArray *yourArray = [[NSMutableArray alloc] init];
[yourArray addObject:yourDict]; 
```

**4）**将该数组写入**yourPath**。

```
[yourArray writeToURL:yourPath atomically:YES]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T07:07:04.203

用于`[yourArray writeToURL:yourPath atomically:YES];`存储数据

# c++ - 在循环中保存指向向量中对象的指针

> ID：15764562
> 
> 赞同：0
> 
> 时间：2013-04-02T12:50:29.777
> 
> 标签：c++, pointers, vector

是否可以在循环内的向量中保存指向对象的指针？

例如：

```
rpc::session* session=NULL;

//Find Sessions with same UserID, Remove if > 1
for(std::vector<rpc::session>::iterator it = session_manager::sessions.begin(); it != session_manager::sessions.end();) {
  if(it->userid == userid){
    if(session == NULL) {
      *session = *it;
      ++it;
    } else {
      it = session_manager::sessions.erase(it);
    }
  } else {
    ++it;
  }
} 
```

代码被编译，但一旦到达 *session = *it，它就会因访问冲突而崩溃..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T12:52:24.807

因为您没有将您的地址分配`session`给您的`session`变量，并且看到您的向量存储的是会话对象而不是指针，所以您需要将变量的地址分配给您的指针。

```
session = &(*it); 
```

这将分配的地址分配`*it`给`session`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T12:52:59.800

那是因为你试图取消引用一个`NULL`指针。如果要保存指向该对象的指针，则需要分配指针`session`本身 - `session = &(*it)`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T13:07:24.617

这是因为您尝试将会话对象的内容复制到 nullptr。您要么必须分配内存并复制到该内存中，要么将指针复制到另一个位置。

请注意，在您的情况下，获取向量中元素的地址并不是一个好的解决方案，因为 vector::erase() 将移动向量中的元素，从而使先前存储的地址无效。

在您的情况下，它可能仍然有效，因为您将仅存储在向量中找到的最后一个会话。如果您想使用正确的用户 ID 存储所有会话，您需要执行类似的操作

```
std::vector<rpc::session> result;
std::copy_if(session_manager::sessions.begin(), 
             session_manager::sessions.end(), 
             result.begin(), 
             [&](rpc::session s) -> bool 
             {
                 return s.userid == userid;
             }
             ); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T12:54:59.470

您可以获取指向向量中元素的指针，但您所做`*session = *it;`的不是获取指向该元素的指针，而是获取其值并尝试将其复制到另一个`rpc::session`从未分配的对象。如果你想要指向`rpc::session`向量中对象的指针，你应该这样做

```
session = &(*it); 
```

# c# - 如何将数据表绑定到pdfsharp？

> ID：15764563
> 
> 赞同：2
> 
> 时间：2013-04-02T12:50:37.590
> 
> 标签：c#, winforms, datagridview, datatable, pdfsharp

我有一个这样的**数据表**：

```
// create dataset
DataSet ds = new DataSet("myDataset");

// create datatable
DataTable dt = new DataTable("myDatatable");

// add columns
dt.Columns.Add("column1", typeof(string));
dt.Columns.Add("column2", typeof(string));
dt.Columns.Add("column3", typeof(string));
dt.Columns.Add("column4", typeof(string));

// insert data rows
dt.Rows.Add("row1-col1","row1-col2", "row1-col3", "row1-col4");
dt.Rows.Add("row2-col1","row2-col2", "row2-col3", "row2-col4");

// add datatable to dataset 
ds.Tables.Add(dt);

// bind dataset & datatable to datagridview
dataGridView1.DataSource = ds;
dataGridView1.DataMember = "myDatatable"; 
```

我想使用**pdfsharp创建****pdf 报告**。如何将**数据表**绑定到**pdfsharp**？

 ******* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T13:05:35.170

您不能将 DataTables 绑定到 PDFsharp。

您可以使用 MigraDoc Foundation（PDFsharp 附带）创建一个新文档，向该文档添加一个表格（包含您需要的列），然后将数据添加到该表格中。

带有表格的 MigraDoc 示例：
[http ://www.pdfsharp.net/wiki/Invoice-sample.ashx](http://www.pdfsharp.net/wiki/Invoice-sample.ashx)******

# mysql - SQL 有查询大小限制？

> ID：15764566
> 
> 赞同：-1
> 
> 时间：2013-04-02T12:50:50.040
> 
> 标签：mysql, sql

我试图在我的 sql 数据库上进行选择，当每个元素在代码上检查时，查询在 WHERE 子句中接收到一个`OR name LIKE expression`并且它可以工作，但是当我尝试选择超过 23 个元素时它不起作用，任何人都知道 sql 是否有限制查询的大小或其他？

查询如下所示： `SELECT * FROM mytable WHERE name LIKE x% OR name LIKE y% OR name LIKE ...`（23x）

我无法将其更改为`WHERE name IN (x,y,z)`:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:01:43.630

这是对数据库限制问题的一般回答。是的，他们有限制。它们因 RDBMS 而异，但这些是我多年来偶然发现的。

1.  列表只能有 x 个元素。它适用于这种语法。

    myfield 在哪里（1、2、3 等）

使用 oracle 10，限制为 1000。使用 sql server，限制在 2500 左右。

1.  查询本身只能有这么多字符。这是您最初的问题，虽然这似乎不是您的具体问题，但我已经看到它发生在 sql server 上。

2.  查询将只接受 x 参数。我已经用 ColdFusion/SQL Server 超过了这个，但我不记得限制是什么了。

# c# - 未调用角度控制器

> ID：15764570
> 
> 赞同：5
> 
> 时间：2013-04-02T12:51:07.043
> 
> 标签：c#, javascript, html, asp.net-mvc, angularjs

我是 Angular.js 的新手，并试图让路由正常工作，但在我的应用程序中，第二条波纹管路由没有调用，`listController`所以我没有取回数据。

我经历了许多工作示例，但似乎无法弄清楚为什么这在我的应用程序中不起作用？我取回了模板，`/Categories/SixGrid`但如前所述，控制器似乎没有被调用。**有什么明显的我没有做错吗？或者任何人都可以分享他们为什么这可能不起作用的知识吗？**

**更新代码：**

```
angular.module('App', ['App.Controller']).
    config(['$routeProvider', function ($routeProvider) {
        $routeProvider.when('/', { templateUrl: '/Home/Splash' });
        $routeProvider.when('/Categories/List/:slug', { templateUrl: '/Categories/SixGrid', controller:'listController' });
    }]);

angular.module('App.Controller', [])
    .controller("listController", function ($scope, $http) {
        $http.get('../../api/cat/' + $routeParams.slug).success(function (data) {
                    $scope.products = data;
                });
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T13:00:32.487

尝试将控制器名称用引号括起来：

```
$routeProvider.when('/Categories/List/:slug', {
    templateUrl: '/Categories/SixGrid',
    controller: 'listController'
}); 
```

同样好的做法是通过这种方式定义控制器（因为全局范围保持干净）：

```
angular.module('App').controller("listController", function () {
    //controllerCode
}); 
```

# c# - 在 Properties.Settings.Default 与注册表中存储设置

> ID：15764571
> 
> 赞同：6
> 
> 时间：2013-04-02T12:51:11.857
> 
> 标签：c#, .net, configuration, registry, settings

将应用程序的用户设置存储在

`Properties.Settings.Default`

与将其存储在注册表中说

`HKEY_CURRENT_USER\Software\{Application Name}`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T13:56:13.390

**属性.设置.默认**

在执行之间存储应用程序状态的常用技术是将其写入磁盘。有多种方法可以做到这一点，微软通过在 System.Configuration 命名空间中引入类来帮助用户管理保存应用程序状态（设置），从而加入了游戏。

`Properties.Settings.Default`是派生自 [ApplicationSettingBase](http://msdn.microsoft.com/en-us/library/system.configuration.applicationsettingsbase.aspx)的类的静态实例，它管理设置到磁盘的读取和写入。用该属性标记的`[UserScopedSetting]`属性保存到 C:\Users\user\AppData\Local\ComapnyName\Hashed_AppName\version 中的 XML 文件，用户可以读取和写入该文件。用该属性标记的`[ApplicationScopedSetting]`属性保存到 app.config 文件中，并且只能读取。

基本设置文件如下所示：

```
class FormSettings : ApplicationSettingsBase
{
    public WindowSettings() {}
    public WindowSettings(string settingsKey) : base(settingsKey) {}

    [UserScopedSettingAttribute()]
    [DefaultSettingValueAttribute("MyDefaultName")]
    public String Name
    {
        get { return (string)(this["Name"]); }
        set { this["Name"] = value; }
    }
} 
```

您可以`Properties.Settings.Default`在 UI 中的 Project Properties->Settings 下或以编程方式通过`Properties.Settings.Default`.

**登记处**

Registry 是一个分层数据库，用于存储配置设置和选项，并将它们存储为键值对。有关更多信息，请参阅[维基百科](http://en.wikipedia.org/wiki/Windows_Registry)。

可以通过静态[Microsoft.Win32.Registry](http://msdn.microsoft.com/en-us/library/microsoft.win32.registry.aspx)类访问注册表，该类将允许您读取和写入值。例如：

```
public class RegistryExample 
{
    public static void Main()
    {
        const string rootUser = "HKEY_CURRENT_USER";
        const string subkey = "RegistryExample";
        const string keyName = String.Format("{0}\\{1}, userRoot, subkey);

        Registry.SetValue(keyName, "MyRegistryValue", 1234);
    }
} 
```

有关示例，请参阅 MSDN 文档页面。正如其他人提到的那样，使用注册表有利有弊，但我认为值得再次说明的是，注册表是一个“安全”位置，您的用户将需要获得权限才能从其中读取写入，而设置文件不需要那些权限。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T13:11:05.400

不同之处在于注册表就是注册表。而 Properties.Settings.Default 保存到 AppData 目录中的配置文件。

我个人根本不喜欢与注册表合作。这只是我从 Windows 98 时代遗留下来的恐惧症。无论如何，使用注册表并不是一个很好的体验。关键名称很丑陋，并且有很多引起混乱的可能性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T13:12:56.167

来自[codehill.com](http://codehill.com/2009/01/saving-user-and-application-settings-in-winforms/)：

> 在 .NET Framework 应用程序设置保存在 INI 文件和 Windows 注册表中之前。但是 .NET Framework 引入了一种使用 XML 文件的更简单的方法。该文件具有程序集的名称和 .exe.config 扩展名，并位于应用程序的文件夹中。这种方式更简洁，因为当卸载或删除应用程序时，最终用户不必担心 Windows 目录中遗留的注册表项或 INI 文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T12:58:55.573

保存诸如 Properties.Settings.Default 之类的设置是唯一正确的方法。

注册表是不行的。您不确定使用您的应用程序的用户是否有足够的权限写入注册表。

# .net - EF LINQ 包括多个和嵌套的实体

> ID：15764572
> 
> 赞同：178
> 
> 时间：2013-04-02T12:51:14.573
> 
> 标签：.net, asp.net-mvc-3, linq, entity-framework, entity-framework-5

好的，我有具有以下层次结构的三级实体：课程->模块->章节

这是原始的 EF LINQ 语句：

```
Course course = db.Courses
                .Include(i => i.Modules.Select(s => s.Chapters))
                .Single(x => x.Id == id); 
```

现在，我想包含另一个与课程相关联的名为 Lab 的实体。

如何包含 Lab 实体？

我尝试了以下但没有奏效：

```
Course course = db.Courses
                .Include(i => i.Modules.Select(s => s.Chapters) && i.Lab)
                .Single(x => x.Id == id); 
```

关于包括第二个实体的任何想法？

任何建议或信息将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：258
> 
> 时间：2013-04-02T12:55:26.453

您是否尝试过添加另一个`Include`：

```
Course course = db.Courses
                .Include(i => i.Modules.Select(s => s.Chapters))
                .Include(i => i.Lab)
                .Single(x => x.Id == id); 
```

您的解决方案失败，因为`Include`不采用布尔运算符

```
Include(i => i.Modules.Select(s => s.Chapters) &&          i.Lab)
                           ^^^                  ^             ^ 
                          list           bool operator    other list 
```

**更新** 要了解更多信息，请下载[LinqPad](http://www.linqpad.net/)并查看示例。我认为这是熟悉 Linq 和 Lambda 的最快方法。

`Select`首先 -和之间的区别在于`Include`，使用 Select 您可以决定***要***返回的内容（也称为投影）。Include 是一个***Eager Loading***函数，它告诉 Entity Framework 您希望它包含来自其他表的数据。

Include 语法也可以是字符串。像这样：

```
 db.Courses
            .Include("Module.Chapter")
            .Include("Lab")
            .Single(x => x.Id == id); 
```

但[LinqPad](http://www.linqpad.net/)中的示例更好地解释了这一点。

* * *

## 回答 #2

> 赞同：73
> 
> 时间：2017-11-29T15:04:23.567

在 Entity Framework Core ( `EF.core`) 中，您可以使用`.ThenInclude`包含下一个级别。

```
var blogs = context.Blogs
    .Include(blog => blog.Posts)
        .ThenInclude(post => post.Author)
    .ToList(); 
```

更多信息：[https ://docs.microsoft.com/en-us/ef/core/querying/related-data](https://docs.microsoft.com/en-us/ef/core/querying/related-data)

*注意：* 假设您需要多个`ThenInclude()`on `blog.Posts`，只需重复`Include(blog => blog.Posts)`并执行另一个`ThenInclude(post => post.Other)`。

```
var blogs = context.Blogs
    .Include(blog => blog.Posts)
        .ThenInclude(post => post.Author)
    .Include(blog => blog.Posts)
        .ThenInclude(post => post.Other)
 .ToList(); 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2013-04-02T12:55:59.893

`Include`是fluent interface的一部分，所以你可以写多个`Include`语句，一个接一个

```
 db.Courses.Include(i => i.Modules.Select(s => s.Chapters))
           .Include(i => i.Lab)
           .Single(x => x.Id == id); 
```

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2015-05-05T11:13:50.733

你也可以试试

```
db.Courses.Include("Modules.Chapters").Single(c => c.Id == id); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-08-08T07:43:01.677

可以编写这样的扩展方法：

```
 /// <summary>
    /// Includes an array of navigation properties for the specified query 
    /// </summary>
    /// <typeparam name="T">The type of the entity</typeparam>
    /// <param name="query">The query to include navigation properties for that</param>
    /// <param name="navProperties">The array of navigation properties to include</param>
    /// <returns></returns>
    public static IQueryable<T> Include<T>(this IQueryable<T> query, params string[] navProperties)
        where T : class
    {
        foreach (var navProperty in navProperties)
            query = query.Include(navProperty);

        return query;
    } 
```

即使在通用实现中也可以这样使用它：

```
string[] includedNavigationProperties = new string[] { "NavProp1.SubNavProp", "NavProp2" };

var query = context.Set<T>()
.Include(includedNavigationProperties); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-10-03T06:31:49.550

这是我的项目

```
 var saleHeadBranch = await _context.SaleHeadBranch
 .Include(d => d.SaleDetailBranch)
 .ThenInclude(d => d.Item)
 .Where(d => d.BranchId == loginTkn.branchId)
 .FirstOrDefaultAsync(d => d.Id == id); 
```

# javascript - jquery ajax 简单表单必须显示表单以及其他内容

> ID：15764573
> 
> 赞同：0
> 
> 时间：2013-04-02T12:51:15.903
> 
> 标签：javascript, jquery, ajax

所以我开始使用带有ajax的jquery ..一切都很好..表单已提交..但在响应后表单消失了，只有输出在屏幕上..我试过了

```
success: function(html)
     {
    $(".result").html(html);
      } 
```

我使用了显示选项，但我的表格没有回来..

```
$('#myform').show() 
```

我必须做什么，以显示当前的 div 和额外的 div（在 ajax 成功之后）.. 希望对此很清楚.. 任何帮助表示赞赏......非常感谢 SO 的所有成员帮助像我这样的可怜的新手..提前谢谢..我的代码我的脚本

```
$(document).ready(function(){
  $("#form1").validate({
         debug: false,
   rules: {

    passwordid:"required",
    username:"required",
    password_again :"required",
    password_again:{
      equalTo: "#passwordid"
    },
     email: {
     required: true,
     email: true
    }
   },
   messages: {

    email: "Please enter your valid email address.",
    username: "Please enter your username",
    passwordid:"Enter Password",
    password_again:"Please enter the same value",
   },
   submitHandler: function(form) {

    $.ajax
({
type: "POST",
url: "new.php",
data: $('#form1').serialize(),
cache: false,
success: function(html)
{
$(".result").html(html);

 }
            });
        }
    });
}); 
```

**我的长表格：**

```
//my result class
<div class="result"><div>
<div id="wrapper">

<form name="form1" id="form1" action="" method="post">
<b> Create New Account </b><br><br><br>

<label for="username" id="username_label">Username</label><br>
<input id="username" type="text" name="username"/><br>

<label for="passwordid" id="password_label">Password</label><br>
<br>    <input   type="password" name="passwordid" id="passwordid" size="35">
<br><br>
<label for="password_again" id="password_again_label">Re-Type Password</label><br>
<br><input   type="password" name="password_again" id="password_again" size="35">
<br>
<b>Personal Details</b><br><br>

<label class="r" for="firstname" id="firstname_label">First Name<br>
<input   type="text" name="firstname" id="firstname" size="35"></label><br><br>

<label class="r" for="lastname" id="lastname_label">Last Name<br>
<input   type="text" name="lastname" id="lastname" size="35"></label><br><br>

Gender<br><br>
<select class="cc" name="sex" id="sex">
<option value="" selected="selected">--Select Gender--</option>
<option value="m">Male</option>
<option value="f">Female</option>
</select>

<br><br>
Date of birth<br>

<label class="dob" for="dateid" id="date_label">Date
<?php $number = range(1,31);
$tempholder = range(1,31);
$nr=31;
echo '<select class="doba" name="dateid" id="dateid">';
echo '<option value="" selected="selected">--Select Date--</option>';
for ($i=0; $i<$nr; $i++)
{

        echo "<option>".$tempholder[$i]."</option>";
        }
    echo '</select>';

?>
</label>

<label class="dob" for="month" id="month_label">Month
<?php $number = range(1,12);
$tempholder = range(1,12);
$nr=12;
echo '<select class="doba" name="month" id="month">';
echo '<option value="" selected="selected">--Select Month--</option>';
for ($i=0; $i<$nr; $i++)
{

        echo "<option>".$tempholder[$i]."</option>";
        }
    echo '</select>';

?>
</label>

<label class="dob" for="year" id="year_label">Year
<?php 
$tempholder =  range(1960,2000);
$nr=40;
echo '  <select  class="doba" name="year" id="year">';
echo '<option value="" selected="selected">--Select Year--</option>';
for ($i=0; $i<$nr; $i++)
{
        echo "<option>".$tempholder[$i]."</option>";
        }
    echo '</select>';

?>
</label>
<br><br><br><br>
<b>Contact Details</b> <br><br>
<label for="add1" id="add1_label">Address1</label><br>
<input id="add1" type="text" name="add1"/><br>

<label for="add2" id="add2_label">Address2</label><br>
<input id="add2" type="text" name="add2"/><br>

<label for="add3" id="add3_label">Address3</label><br>
<input id="add3" type="text" name="add3"/><br>

<label for="mobile" id="mobile_label">Mobile</label><br>
<input id="mobile" type="text" name="mobile"/><br>

<label for="tele" id="tele_label">Telephone</label><br>
<input id="tele" type="text" name="tele"/><br>

<label for="email" id="email_label">E-mail</label><br>
<input id="email" type="text" name="email"/><br>

<br>

<b>Card Details</b><br><br>
<label for="cardno" id="cardno_label">Card No</label><br>
<input id="cardno" type="text" name="cardno"/><br>

<label for="cvcno" id="cvcno_label">CVC No</label><br>
<input id="cvcno" type="text" name="cvcno"/><br>

<br>
<select  name="cardtype" id="cardtype">
<option value="" selected="selected">--Card Type--</option>
<option value="visa">Visa</option>
<option value="master">Master</option>
<option value="american">American Express</option>
</select><br><br>

Expiry Date<br><br>

<label class="dob" for="dateid1" id="date_label">Date
<?php $number = range(1,31);
$tempholder = range(1,31);
$nr=31;
echo '<select class="doba" name="dateid1" id="dateid1">';
echo '<option value="" selected="selected">--Select Date--</option>';
for ($i=0; $i<$nr; $i++)
{

        echo "<option>".$tempholder[$i]."</option>";
        }
    echo '</select>';

?>

</label>

<label class="dob" for="month1" id="month_label">Month
<?php $number = range(1,12);
$tempholder = range(1,12);
$nr=12;
echo '<select class="doba" name="month1" id="month1">';
echo '<option value="" selected="selected">--Select Month--</option>';
for ($i=0; $i<$nr; $i++)
{

        echo "<option>".$tempholder[$i]."</option>";
        }
    echo '</select>';

?>
</label>

<label class="dob" for="year1" id="year_label">Year
<?php 
$tempholder =  range(2013,2053);
$nr=40;
echo '  <select  class="doba" name="year1" id="year1">';
echo '<option value="" selected="selected">--Select Year--</option>';
for ($i=0; $i<$nr; $i++)
{
        echo "<option>".$tempholder[$i]."</option>";
        }
    echo '</select>';

?>
</label>
<br><br>
<input type="submit" class="ss" value="SUBMIT" class="left" >

</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:32:53.877

只是和想法，但你可以尝试

```
 $(".result").append(html); 
```

反而。.html 可能会以某种方式清除您的 html。

# javascript - 谷歌分析如何知道屏幕分辨率？

> ID：15764577
> 
> 赞同：0
> 
> 时间：2013-04-02T12:51:25.077
> 
> 标签：javascript, google-analytics

他们如何获得用户的操作系统设置？
显然他们不检查窗口大小，这不是结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T12:53:00.303

他们使用该[`window.screen`](https://developer.mozilla.org/en-US/docs/DOM/window.screen)对象来找出屏幕的尺寸。

# php - (PHP) 简单的 HTML DOM 解析器：HTML 符号

> ID：15764579
> 
> 赞同：0
> 
> 时间：2013-04-02T12:51:25.687
> 
> 标签：php, json, html-parsing, special-characters, simple-html-dom

我正在尝试从[该网站](http://www.foody.vn/ha-noi/sumo-bbq-hoang-quoc-viet)获取用户名，这就是我所做的：

```
$div = $html->find('div[class=micro-home-recent-review review-item]');
for ($i=0; $i<count($div); $i++){  
     $username = $div[$i]->find('div[class=tooltip-fullname]', 0)->find('b', 0)->plaintext;
     // I've tried using iconv but apparently it doesn't work
     $username = iconv(mb_detect_encoding($username), "UTF-8", $username); 
     $query = "INSERT INTO users ('name') VALUES ($username)";
     $pdo->query($query);
} 
```

那么我数据库中新插入的记录是：

![数据库记录](https://i.stack.imgur.com/kpIj3.png)

可以看到，大部分名称都是用 HTML 符号记录的，在浏览器上可以正常显示，但是显示为 JSON 时就乱了。当我尝试获取评论时也会发生同样的问题，下面是评论的示例 JSON：

![在此处输入图像描述](https://i.stack.imgur.com/B6Pux.png)

我需要 JSON 在我的 Android 应用程序中显示数据，因此需要解决此问题，否则数据将无法正确显示。对此有什么可能的解决方案？我真的需要你的帮助和建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:55:40.913

尝试使用[html_entity_decode()](http://php.net/manual/en/function.html-entity-decode.php)函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T13:02:37.100

使用`htmlentities_decode()`它将解决您的问题。

# javascript - Jquery函数自行关闭div

> ID：15764585
> 
> 赞同：13
> 
> 时间：2013-04-02T12:51:43.730
> 
> 标签：javascript, jquery, asp.net

我有以下功能：

```
function displayResults(Items) {
                $("#result").text("");
                $("#result").append('<div class="car-offers">');
                $("#result").append('<div class="purple"></div>');
                $("#result").append('<img src="images/caroffer.jpg" alt="" title="" width="213" height="117" />');
                $("#result").append('<h3>titleeee</h3>'); // ' + Items[i].Title + '
                $("#result").append('<span>Year: 2003</span>');
                $("#result").append('<span>Milage: 172,000 Km</span>');
                $("#result").append('<span class="price">53,000 QR</span>');
                $("#result").append('<a href="">Link</a>');
                $("#result").append('</div>');

                $("#result").append('<div class="car-offers">');
                $("#result").append('<div class="purple"></div>');
                $("#result").append('<img src="images/caroffer.jpg" alt="" title="" width="213" height="117" />');
                $("#result").append('<h3>titlee22</h3>'); // ' + Items[i].Title + '
                $("#result").append('<span>Year: 2003</span>');
                $("#result").append('<span>Milage: 172,000 Km</span>');
                $("#result").append('<span class="price">53,000 QR</span>');
                $("#result").append('<a href="">Link</a>');
                $("#result").append('</div>');
        } 
```

我的问题是，在运行时 html 显示如下：`<div class="car-offers"></div>`所以所有页面都被搞砸了

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-02T12:52:47.910

您不能将不完整的 HTML 片段附加到[`.append()`](http://api.jquery.com/append/). 与 不同`document.write`的是，jQuery 的`.append()`方法在将传递的字符串附加到 DOM 之前将其解析为元素。

所以当你这样做时：

```
$("#result").append('<div class="car-offers">'); 
```

jQuery 将给定的字符串解析为一个`div`元素并将`car-offers`值分配给它的`className`属性，然后将新创建的元素附加到该`#result`元素。

在单个操作中附加整个 HTML 字符串将解决这个问题，因此 jQuery 知道如何正确解析给定的字符串。

* * *

就个人而言，我不建议在 JS 文件中放入那么多 HTML。您可以考虑将其放在`div`with中，`display:none`然后简单地调用`.show()`它。或者最初在页面中，[`.detach()`](http://api.jquery.com/detach/)它存储在一个变量中，并[`.append()`](http://api.jquery.com/append/)在必要时返回。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-02T12:55:06.233

您可以使用带有[连接](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/join)的数组来解决这个问题

```
function displayResults(Items) {
    $("#result").text("");
    var array = [];
    array.push('<div class="car-offers">');
    array.push('<div class="purple"></div>');
    array
            .push('<img src="images/caroffer.jpg" alt="" title="" width="213" height="117" />');
    array.push('<h3>titleeee</h3>'); // ' + Items[i].Title + '
    array.push('<span>Year: 2003</span>');
    array.push('<span>Milage: 172,000 Km</span>');
    array.push('<span class="price">53,000 QR</span>');
    array.push('<a href="">Link</a>');
    array.push('</div>');

    array.push('<div class="car-offers">');
    array.push('<div class="purple"></div>');
    array
            .push('<img src="images/caroffer.jpg" alt="" title="" width="213" height="117" />');
    array.push('<h3>titlee22</h3>'); // ' + Items[i].Title + '
    array.push('<span>Year: 2003</span>');
    array.push('<span>Milage: 172,000 Km</span>');
    array.push('<span class="price">53,000 QR</span>');
    array.push('<a href="">Link</a>');
    array.push('</div>');
    $("#result").text(array.join(''));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-01T10:11:43.337

这也是我刚刚遇到的问题。一个选项是首先在循环中创建 div 容器，然后根据需要填充它们：

```
for(var i = 0; i < 12; i++){

    $(el).append('<li class="scene-block"></li>'); // create container li tags

    //fill empty li tags with content
    for(var j = 0; j < 2; j++){
        $(el).find('li').last().append('<div class="select-a-scene-bg"></div>');
    }

} 
```

# c# - 回发时如何从 ViewState 执行文本框值？

> ID：15764586
> 
> 赞同：0
> 
> 时间：2013-04-02T12:51:44.513
> 
> 标签：c#, asp.net, .net, viewstate

> 我想知道如何从 ViewState 中找出 Textbox 的值。

当用户输入任何值时`Textbox` ，`click submit button`由于`postback` `Textbox`值消失，

但是如果我`ViewState`在这种情况下使用，那么有什么方法可以查看或显示该值`Viewstate`吗？

```
<html>
<body>
    <form id="form1" runat="server">
        <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
        <asp:Button ID="Button1" runat="server" Text="Button" onclick="Button1_Click" /
    </form>
</body>
</html>

protected void Button1_Click(object sender, EventArgs e)
{
    TextBox1.Text += "X";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:45:27.047

在您的页面加载中使用它。

```
protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            if (ViewState["Values"] == null)
            {
                ViewState["Values"] = new string();
            }
        }

        TextBox1.Text = ViewState["Values"].ToString();
    } 
```

之后使用这个。

```
protected void Button1_Click(object sender, EventArgs e)
    {
        ViewState["Values"] += TextBox1.Text;
    } 
```

在第一个 Page_Load 方法中，如果 ViewState 不是回发且为 null，您将创建一个 ViewState。之后将文本框写入您的视图状态，在 Button1_Click 中，您会将新的文本框 1 添加到您的视图状态。

# django - Django：在视图中获取 ImageField url

> ID：15764587
> 
> 赞同：29
> 
> 时间：2013-04-02T12:51:44.763
> 
> 标签：django, view, absolute-path, imagefield

我正在尝试在 Django 视图中获取 ImageField 绝对路径，以便我可以打开图像，在其上写一些东西，然后将其提供给用户。

我在获取保存在媒体文件夹中的图像的绝对路径时遇到问题。

```
item = get_object_or_404(Item, pk=pk)
absolute_url = settings.MEDIA_ROOT + str(item.image.path) 
```

我收到错误，item.image 没有路径（`The 'banner' attribute has no file associated with it.`）。item.image 是 ImageField ，我想知道如何获取保存在图像字段中的图像的绝对路径（在 Django 视图中）。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-04-02T12:58:42.577

正确配置后，使用`.url`: `item.image.url`。[在此处](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.fields.files.FieldFile.url)查看文档。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-02T15:30:16.437

也许这样？

```
@property
def get_absolute_image_url(self):
    return "{0}{1}".format(settings.MEDIA_URL, self.image.url) 
```

请参阅[如何从 Django QuerySet 中获取绝对图像 URL 列表？](https://stackoverflow.com/questions/9388172/how-can-i-get-a-list-of-absolute-image-urls-from-a-django-queryset)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T16:39:25.953

我刚刚弄清楚问题出在哪里......绝对图像路径保存在文件变量中。

示例（在视图中）：

```
item = Item.objects.get(pk=1)
print item.file # prints out full path of image (saved in media folder) 
```

# c++ - 如何转换 Eigen::Quaternion 到 Matrix4f？

> ID：15764593
> 
> 赞同：4
> 
> 时间：2013-04-02T12:51:52.190
> 
> 标签：c++, matrix, quaternions

正如标题所说，我在将 a 转换为 a`Quaternion`时遇到问题`Matrix4f`。`Eigen`有`Quaternion.toRotationMatrix()`给我的方法`Matrix3f`。现在我需要一个`Matrix4f`（因为我们的程序设计为只接受`Matrix4f`），有没有简单的方法来实现这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T13:33:43.537

**M3 至 M4**

Rob 和 Najzero 给出了答案。在大多数情况下，如下构造矩阵就足够了：

立方米：

```
|a00|a01|a02|
|a10|a11|a12|
|a20|a21|a22| 
```

到 m4：

```
|a00|a01|a02| 0 | 
|a10|a11|a12| 0 | 
|a20|a21|a22| 0 |
| 0 | 0 | 0 | 1 | 
```

4x4 矩阵不仅允许旋转矢量，还允许移动（平移）和缩放（在所有 3 个方向上）任何矢量。所以基本上你得到了一个完整的变换矩阵——这就是为什么它经常用在计算机图形学中，描述一个对象的变换。根据行列顺序，我们可以将矩阵标识为：

```
|rot|rot|rot| sx | 
|rot|rot|rot| sy | 
|rot|rot|rot| sz |
| x | y | z | 1 | 
```

以 sx,sy,sz 作为比例系数，x,y,z 作为平移系数。

PS：当然，如果你想用 m4 旋转一个向量，你将不得不使用一个 4 维向量，例如 w=1 的 (x,y,z,w) （在大多数情况下）。

**直接方法**

[将四元数旋转转换为旋转矩阵？](https://stackoverflow.com/questions/1556260/convert-quaternion-rotation-to-rotation-matrix)

我个人的建议是： [http](http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToMatrix/) ://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToMatrix/ 在那里你还会发现其他的转换，backtrafos 等等。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-06-07T09:13:40.540

@Zacharias 的答案包含必要的理论。我只是重申我之前用实际的 Eigen C++ 代码所做的评论。

```
Eigen::Matrix3f mat3 = Eigen::Quaternionf(W, X, Y, Z).toRotationMatrix();
Eigen::Matrix4f mat4 = Eigen::Matrix4f::Identity();
mat4.block(0,0,3,3) = mat3; 
```

`Eigen::Matrix4f::Identity()`负责初始化第 4 行和最后一行和列的 1 和 0。`mat4.block(0,0,3,3) = mat3`然后覆盖从旋转矩阵获得的值。

# jsf-2 - 动态添加的组件正在垂直增长

> ID：15764594
> 
> 赞同：0
> 
> 时间：2013-04-02T12:52:00.470
> 
> 标签：jsf-2, primefaces

我正在按照[此处](https://stackoverflow.com/a/3409511/1175065)建议的选项在我的 PrimeFaces v3.5 应用程序中动态添加输入文本框。我面临的唯一问题是新添加的输入文本正在垂直增长。附上截图。![在此处输入图像描述](https://i.stack.imgur.com/XDL99.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T12:56:15.270

`<h:dataTable>`生成一个 HTML元素，`<table>`其中每次迭代都会生成一个`<tr>`自然表示新行的元素。

如果您根本不想生成表格，那么您不应该使用 a `<h:dataTable>`，而是使用`<ui:repeat>`.

```
<h:form>
    <ui:repeat value="#{bean.items}" var="item">
        <h:inputText value="#{item.value}" />
    </ui:repeat>
    <h:commandButton value="add" action="#{bean.add}" />
    <h:commandButton value="submit" action="#{bean.submit}" />
</h:form> 
```

这不会生成任何标记，[默认情况下](http://www.htmlhelp.com/reference/html40/inline.html)`<input>`HTML元素将在一行中结束。

# html - 是什么使文本元素垂直居中？

> ID：15764600
> 
> 赞同：41
> 
> 时间：2013-04-02T12:52:09.033
> 
> 标签：html, css, webkit, centering

似乎`<button>`元素周围有一些我不明白的魔力。

考虑这个标记：

```
<button class="button">Some Text</button>
<div class="button">Some Text</div> 
```

这个CSS：

```
.button{
    background: darkgrey;
    height: 40px;
    border: 2px solid grey;
    width: 100%;
    box-sizing: border-box;
    font-size: 14px;
    font-family: helvetica;
    text-align: center;
    margin-bottom: 20px;

    /*I'm aware I could use this to center it*/
    /*line-height: 40px;*/
} 
```

是什么让按钮元素中的文本垂直居中？Webkit 似乎为元素预定义了`-webkit-box-align`a 的值。如果我将其设置为文本不再与中心对齐。但这似乎并不是全部的魔力，因为另一方面，我没有运气使用该属性将文本集中在 div 上。`center``<button>``initial``-webkit-box-align`

这是一个小提琴：http: [//jsfiddle.net/cburgdorf/G5Dgz/](http://jsfiddle.net/cburgdorf/G5Dgz/)

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2016-01-05T13:08:09.930

我知道这已经有几年的历史了，但是在为项目编写重置样式表时，我会在对问题进行一些调查后添加我的想法。

*注意** 这是基于浏览 Firefox 源代码，因为它是最容易获得和通读的。但是，基于其他浏览器中的类似行为，实现可能是相似的。*

首先，这里的主要问题是元素 - 至少在 Firefox 中 - 是用标签和它的子`<button>`元素之间的内部元素构建的。`<button>`在 Firefox 中，它被称为`moz-button-content`并且不是 CSS 可以达到的东西，并且已设置为显示块而不继承按钮的高度，您可以在[useragent 样式表](https://dxr.mozilla.org/mozilla-central/source/layout/style/res/forms.css#649-681)中看到此样式声明：

***来自“source/layout/style/res/forms.css”***

```
*|*::-moz-button-content {
    display: block;
    /* Please keep the Multicol/Flex/Grid/Align sections below in sync with
       ::-moz-scrolled-content in ua.css and ::-moz-fieldset-content above. */
    /* Multicol container */
    -moz-column-count: inherit;
    -moz-column-width: inherit;
    -moz-column-gap: inherit;
    -moz-column-rule: inherit;
    -moz-column-fill: inherit;
    /* Flex container */
    flex-direction: inherit;
    flex-wrap: inherit;
    /* -webkit-box container (aliased from -webkit versions to -moz versions) */
    -moz-box-orient: inherit;
    -moz-box-direction: inherit;
    -moz-box-pack: inherit;
    -moz-box-align: inherit;
    /* Grid container */
    grid-auto-columns: inherit;
    grid-auto-rows: inherit;
    grid-auto-flow: inherit;
    grid-column-gap: inherit;
    grid-row-gap: inherit;
    grid-template-areas: inherit;
    grid-template-columns: inherit;
    grid-template-rows: inherit;
    /* CSS Align */
    align-content: inherit;
    align-items: inherit;
    justify-content: inherit;
    justify-items: inherit;
} 
```

因为你不能影响这个元素的任何样式，你不得不在`<button>`标签上添加你的样式。这导致了第二个问题 -**浏览器被[硬编码以垂直定位](https://dxr.mozilla.org/mozilla-central/source/layout/forms/nsHTMLButtonControlFrame.cpp#280-296)按钮的内容**。

***从“源/布局/表单/nsHTMLButtonControlFrame.cpp”***

```
// Center child in the block-direction in the button
// (technically, inside of the button's focus-padding area)
nscoord extraSpace =
    buttonContentBox.BSize(wm) - contentsDesiredSize.BSize(wm);

childPos.B(wm) = std::max(0, extraSpace / 2);

// Adjust childPos.B() to be in terms of the button's frame-rect:
childPos.B(wm) += clbp.BStart(wm);

nsSize containerSize = (buttonContentBox + clbp.Size(wm)).GetPhysicalSize(wm);

// Place the child
FinishReflowChild(aFirstKid, aPresContext, contentsDesiredSize,
                  &contentsReflowInput, wm, childPos, containerSize,
                  ReflowChildFlags::Default); 
```

鉴于这两个问题，您可以开始了解按钮如何强制内容居中，请考虑：

```
 <button> tag

+------------------------+ ^
| button extra space     | |
|                        | |
+------------------------+ |
|| ::moz-button-content || | button height
||   display: block;    || |
+------------------------+ |
|                        | |
| button extra space     | |
+------------------------+ v 
```

如果你给`button`一个高度 - 就像`48px`你的小提琴一样，文本将居中，因为`moz-button-content`元素是显示块，并且只有内容的高度（默认情况下很可能是内容的行高），然后放下一个到另一个元素，你会得到这种行为：

```
* {
  box-sizing: border-box;
  margin: 0;
  border: 0;
  padding: 0;
  font-family: san-serif;
  background: none;
  font-size: 1em;
  line-height:1;
  vertical-align: baseline;
 }

button, a {
  height: 3em;
}

button {
  background: red;
}

a {
  display:inline-block;
  background: green;
 }
```

```
<button>Button content</button>
<a>Link Content</a>
```

[这个 bug](https://bugzilla.mozilla.org/show_bug.cgi?id=913759)和Firefox 问题跟踪器中的这个 bug 与我发现的任何实际记录的 bug 差不多[。](https://bugzilla.mozilla.org/show_bug.cgi?id=984869)但是线程给人的印象是，尽管这没有出现在任何实际规范中，但浏览器只是以这种方式实现了它“因为其他浏览器正在这样做”

* * *

如果您确实想更改默认行为，则可以解决此问题，但它并不能完全解决问题和 YMMV，具体取决于您的实现。

如果您插入一个包装器`<span>`作为`display: block`按钮的唯一子级并将所有内容放入其中，您可以使用它来跳过`moz-button-content`元素。

您需要使该`<span>`元素具有`height: inherit`正确填充按钮的高度，然后将您的正常按钮样式添加到其中`<span>`，您将获得您想要的基本行为。

```
 * {
      box-sizing: border-box;
      margin: 0;
      border: 0;
      padding: 0;
      font-family: san-serif;
      background: none;
      font-size: 1em;
      line-height:1;
      vertical-align: baseline;
     }

    button, a {
      height: 3em;
    }

    button {
      background: red;
    }
    button::-moz-focus-inner {
      border: 0;
      padding: 0;
      outline: 0;
    }

    button > span {
      display: block;
      height: inherit;
    }

    a {
      display:inline-block;
      background: green;
    }

    button.styled > span , a.styled{
      padding: 10px;
      background: yellow;
    }
```

```
 <button><span>Button content</span></button>
    <a><span>Link Content<span></a><br/>
    <button class="styled"><span>Button content</span></button>
    <a class="styled"><span>Link Content<span></a>
```

还值得一提的是[外观](http://www.w3.org/TR/css-ui-4/#propdef-appearance)CSS4 规则（**尚不可用**）：

虽然这不是一个可行的选择（截至 1 月 5 日）。有一项提议重新定义`appearance`CSS4 草案中的规则，这实际上可能会做正确的事情，即删除浏览器所做的所有假设。我只是为了完整性而提到它，因为它将来可能会变得有用。

**更新 - 30/08/2016** 您实际上应该使用 a`<span>`而不是 a `<div>`，因为`div`'s 不是`<button>`元素的有效子级。我已经更新了答案以反映这一点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-02T13:04:11.000

你可以使用填充。

例如

```
padding: 20px 10px; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T06:54:04.213

我认为这种行为的唯一原因是 Google Chrome 或一般浏览器会从您的操作系统中获取默认样式。

例如，如果您比较 Windows 7 和 Windows 8 中运行的 Google Chrome 上的按钮或滚动条：

*   在 Windows 7 中，按钮的中心将有一条水平渐变线

*   在 Windows 8 中，滚动条能够在单击时淡入和淡出

这只是我的看法，但希望它能给你一些想法:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T13:12:16.953

您可以`display:table-cell; vertical-align: middle;`用作替代方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-02T13:34:14.307

在 Mozilla Firefox 上，我得到了[-moz-appearance](https://developer.mozilla.org/en-US/docs/CSS/-moz-appearance)属性：

```
-moz-appareance: button; 
```

在 HTML5 草案中，有一个[渲染部分](http://www.w3.org/html/wg/drafts/html/master/rendering.html#the-button-element-0)，但没有详细说明放置：S

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-12T10:57:55.723

默认情况下，按钮元素垂直居中子元素。它不是以传统的 CSS 方式完成的，因此重写并非易事。

我发现的最佳解决方案是将按钮设置为 flex 列。

```
button {
  height: 100px; 
  display: flex; 
  flex-direction: column; 
}

span {
  height: 20px; 
  width: 100px; 
  background-color: blue; 
  display: block; 
}
```

```
<button>
  <span></span>
</button>
```

一些答案建议添加一个内部包装器，并将其高度设置为继承。这可能不适用于动态计算高度的元素。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2020-04-09T10:57:31.813

如果您需要摆脱这种行为，您可以添加`span`为`button`. 比试图欺骗所有浏览器更好。

# html - 单击按钮时如何启用java脚本（html）

> ID：15764607
> 
> 赞同：0
> 
> 时间：2013-04-02T12:52:20.673
> 
> 标签：html

我想在按下按钮时启用 java 脚本。例如，java 脚本是 -

```
<div id="miniclip-game-embed" data-game-name="upipe-skateboard" data-theme="1" data-width="600" data-height="457"></div>
<script src="http://www.miniclip.com/js/game-embed.js"></script> 
```

当我点击按钮 U 管道时，这个 java 脚本应该被启用按钮和启用代码应该在 html 中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:25:52.690

这是你可以尝试的东西。

首先，您可能需要某种可重用的脚本注入器。下面是一个将 URL 作为参数并加载位于该 URL 的脚本的示例。

```
function injectScript(src) {
    var scriptElement = document.createElement('script');

    scriptElement.type = 'text/javascript';
    scriptElement.language = 'javascript';
    scriptElement.src = src;

    document.getElementsByTagName('head')[0].appendChild(scriptElement);
} 
```

接下来，您可能不仅需要启用游戏，还需要启用`<div>`要显示游戏的容器。所以这里有一个小帮手，你可以根据自己的喜好定制：

```
function enableTheGame(containerId, scriptSource) {
    var container = document.getElementById(containerId);
    if (container) {
        container.className = 'enabled'; // can be anything, e.g. style.display='block'
        injectScript(scriptSource); // here's our injector
    }
} 
```

现在，假设您的按钮有一个 id，让我们为其附加一个启用游戏的事件侦听器。请注意，等待页面完成加载很重要。

```
window.addEventListener('load', function () {
    var button = document.getElementById('SomeButton');
    if (button) {
        button.addEventListener('click', function () {
            enableTheGame('miniclip-game-embed', 'http://www.miniclip.com/js/game-embed.js');
        });
    }
}); 
```

上面的例子可以改进。例如，最后一个函数可以查看按钮的`data-...`属性并决定加载哪个脚本以及加载到哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:11:36.090

此元素在 div 中写入 iframe。

您可以创建一个出色的 div，如果您下载并修改 game-embed.js（iframe 元素），该事件将始终触发。

```
<div style="position: relative;">
  <div style="position: absolute; z-index: 1000; width: 600px; height: 457px;" onclick="this.style.display='none'; /* put your action */"></div>
  <div style="position: absolute; z-index: 900;" id="miniclip-game-embed" data-game-name="upipe-skateboard" data-theme="1" data-width="600" data-height="457"> </div>
  <script src="http://www.miniclip.com/js/game-embed.js"> </script>
</div> 
```

尝试这个！

# c++ - C++ 提高睡眠准确度

> ID：15764612
> 
> 赞同：3
> 
> 时间：2013-04-02T12:52:43.673
> 
> 标签：c++, sleep, boost-thread

我遇到了奇怪的`boost::sleep()`功能问题。我有这个基本代码：

```
#include <sys/time.h>
#include <boost/chrono.hpp>
#include <boost/thread.hpp>

void thread_func()
{
    timeval start, end;
    gettimeofday( &start, NULL );
    boost::this_thread::sleep( boost::posix_time::milliseconds(1) ); // usleep(1000) here works just fine.
    gettimeofday( &end, NULL );

    int secs = end.tv_sec - start.tv_sec;
    int usec = end.tv_usec - start.tv_usec;
    std::cout << "Elapsed time: " << secs << " s and " << usec << " us" << std::endl;
}

int main()
{
    thread_func();

    boost::thread thread = boost::thread( thread_func );
    thread.join();

    return 0;
} 
```

问题是`boost::sleep()`函数在创建的线程和主线程中的行为不同。这个程序的输出是

```
Elapsed time: 0 s and 1066 us
Elapsed time: 0 s and 101083 us 
```

即`boost::sleep()`函数在创建的线程中休眠 100 毫秒，而在主线程中工作正常（它休眠 1 毫秒）。如果我在创建的线程中，我无法获得低于 100 毫秒的精度（例如使用`boost::posix_time::microseconds`）。但是，如果我使用`usleep(1000)`，它工作得很好。

我在 Intel i7 CPU 上使用 Fedora 18（64 位）3.8.4 和 Boost 1.50.0-5.fc18。我也在不同的PC上用Win 7 & Boost 1.48.0测试了代码，没有出现问题，所以我猜应该是系统配置有关，但我不知道是怎么回事。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T13:27:18.040

`boost::this_thread::sleep`已弃用（[请参阅文档](http://www.boost.org/doc/libs/1_53_0/doc/html/thread/thread_management.html#thread.thread_management.this_thread.sleep)）。

`usleep`也已弃用（在 POSIX.1-2001 中已过时并从 POSIX.1-2008 中删除）。

FWIW，在我本地安装的较旧的（1.44）boost头文件中，`boost::this_thread_sleep`实际调用的相对延迟版本`gettimeofday`计算*绝对*截止日期，然后转发到绝对版本（这是离线编译的，所以我不随身携带）。请注意，这在 POSIX.1-2008`gettimeofday`中*也*被标记为已过时。

所有这些的建议替代品是：

*   `boost::this_thread::sleep_for`而不是`...::sleep`相对延迟
*   `boost::this_thread::sleep_until`而不是`...::sleep`绝对时间
*   `nanosleep`代替`usleep`
*   `clock_gettime`代替`gettimeofday`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:16:42.737

请注意，调用 boost::this_thread::sleep() 和相关方法不仅会使线程进入睡眠状态，还会要求调度程序将 CPU 分配给准备好执行的另一个线程。因此，您实际上是在测量睡眠时间的最大值或线程再次获得 CPU 的时间。

# php - 在 ajax 提交上更新购物车表单视图

> ID：15764622
> 
> 赞同：1
> 
> 时间：2013-04-02T12:53:02.363
> 
> 标签：php, drupal, drupal-7, drupal-commerce, drupal-ajax

我已更改`views_form_commerce_cart_form_default`表单以允许在数量更改时提交 ajax。

我的ajax属性如下：

```
$ajax_field_settings = array(
  'event' => 'blur',
  'callback' => '_ajax_cart_update_cart',
  'method' => 'replace',
  'wrapper' => 'ajax-cart-form-wrapper',
  'progress' => array('type' => 'none'),
);

foreach (element_children($form['edit_quantity']) as $key) {
  $form['edit_quantity'][$key]['#ajax'] = $ajax_field_settings;
} 
```

ajax 回调是：

```
function _ajax_cart_update_cart($form, $form_state) {
    // submits form
    views_form_views_form_submit($form, $form_state);
    commerce_cart_line_item_views_form_submit($form, $form_state);

    // return updated cart view
    return commerce_cart_view();
} 
```

前两个回调是常用的购物车表单回调，用于保存表单和订单项。函数返回购物车视图（来自菜单项“购物车”的原始回调。除了一件小事外，一切都很完美。总行没有改变。订单总和应该改变，但每行的总金额保持不变.

有人可以帮我吗？

谢谢！

# javascript - 我可以在用户单击链接后操作 DOM 吗？

> ID：15764624
> 
> 赞同：3
> 
> 时间：2013-04-02T12:53:11.677
> 
> 标签：javascript, html, dom

一旦点击链接或提交表单，我试图了解浏览器的行为 - 任何由用户触发的操作，并以他们登陆新的 URL 结束。我被要求在按钮和链接上安装一些跟踪代码，这依赖于`src`在点击时更新不可见的 iframe 属性。

所以 - 我的具体问题是：

*   一旦用户点击了一个链接，我可以依赖 DOM 是可操作的吗？也就是说，我可以更新节点上的属性吗？是否可以保证在新页面加载之前这会成功？

*   这些操作触发的任何请求（例如，我给 iframe 一个新`src`属性）是否可靠？显然，新页面在请求完成时已经加载——但有可能（但可能无法跟踪）请求已成功发出。

我的直觉是这些都不可靠——我自己绝对不会编写这样的系统。我真的在寻找参考资料或规范，所以我可以用更好的方式来做这件事。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T12:56:40.197

完成所有操作后，您可以继续页面加载。像这样：

```
document.body.addEventListener('click', function(e){
    if(e.target.tagName.toLowerCase() === 'a'){
        e.preventDefault();
        var href = e.target.getAttribute('href');
        // do your job here
        window.location.href = href; // navigate
    }
}); 
```

[小提琴](http://jsfiddle.net/XRVsj/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T13:02:27.390

简而言之，不。

一旦 URL 改变（并且导航完全离开页面），当前的 DOM 就和完成一样好。在极少数情况下可能会发生更改，同时等待点击操作生效并加载新页面，但这是非常不可靠的。

在 Web 应用程序中处理跟踪的常规方法是在跟踪服务器端进行，因为这显然代表了用户被导航到的位置。

对于纯粹的客户端跟踪实现，您需要提供一个钩子，它可以捕获点击操作，进行任何跟踪，然后在跟踪过程完成后执行所需的操作。做到这一点的一种方法是一个文档范围的点击事件，它拦截所有点击，跟踪任何信息，然后根据需要委托操作。另一种方法是为导航链接定义自己的点击事件，不幸的是我个人只能为此提供一个 jQuery 代码片段，而不是标准的 JavaScript。

'karaxuna' 提供的解决方案很好地演示了纯 JavaScript 中的文档范围机制。

* * *

**更新**

有关有助于突出显示后导航处理不可靠的原因的文档，请参阅以下链接：

[Web 应用程序的 W3 导航计时](http://www.w3.org/TR/navigation-timing/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T12:57:42.427

您必须在允许完成之前“拦截”该事件。使用 jquery 最容易做到这一点。您可以执行以下操作：

```
$(document).on(
   "click",
   '.button',
   function(e){
       //do fancy stuff like update the iframe here
   }); 
```

# android - NDK JNI findclass 如何解析到特定实例

> ID：15764625
> 
> 赞同：0
> 
> 时间：2013-04-02T12:53:13.380
> 
> 标签：android, android-ndk, java-native-interface

我的应用程序有一个由两个不同活动使用的图像视图，该图像视图正在进行 JNI 调用以从 C++ 检索数据。它似乎工作正常，这让我感到惊讶，因为我不知道有两个 imageview 实例。我的问题是，当您执行 findclass 和 findmethodID 时，JNI 如何知道您尝试回调哪个实例？

JNI 调用都应该通过活动吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T15:49:25.150

`FindClass`不解析实例。它找到描述类本身的对象。实例解析稍后执行，当您调用时`CallXXXMethod`- 它的第一个参数（C 中的第二个）是一个实例对象。

对于静态方法，不需要实例引用。这就是为什么在 JNI 中有一组不同的函数`CallStaticXXXMethod`。

# visual-studio-2010 - 如果另一个测试用例尚未在 Microsoft 测试管理器中运行，则禁用测试用例

> ID：15764641
> 
> 赞同：0
> 
> 时间：2013-04-02T12:54:00.867
> 
> 标签：visual-studio-2010, visual-studio, testing, microsoft-test-manager

我有一个关于 Microsoft 测试管理器的问题：

假设我有两个测试用例，测试 A 和测试 B。如果测试 A 尚未运行，是否可以禁用测试 B 运行？

编辑：我说的是手动测试用例！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T18:53:57.033

不，没有办法按照你的要求去做。

# java - 将 zip 文件夹中的文件按路径放入字符串数组中

> ID：15764642
> 
> 赞同：0
> 
> 时间：2013-04-02T12:54:03.510
> 
> 标签：java, arrays, zip, extract, jfilechooser

首先，用户使用仅限于 .zip 扩展名的 JFileChooser 浏览包含其 Java 项目的 zip 文件。

然后我希望将所有文件路径作为字符串存储在数组中。

浏览...按钮：

```
btnBrowse.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent e) {
        int returnVal = fileChooser.showOpenDialog(null);
        if (returnVal == JFileChooser.APPROVE_OPTION) {
            File zip = fileChooser.getSelectedFile();
            // This is where the I need help.
        }
    }
}); 
```

所以我的数组将是这样的：

[path\to\java\file, path\to\java\file, path\to\java\file, path\to\java\file]

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:13:27.130

使用此方法获取选定文件的列表。

```
File[] zipFiles = fileChooser.getSelectedFiles(); 
```

进而

```
for (File file : zipFiles )
  {
      System.out.println(file .getAbsoluteFile()); // will print path
      // Add to array here
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T12:57:08.253

您可能想检查[`java.util.zip`](http://docs.oracle.com/javase/7/docs/api/java/util/zip/package-summary.html)包裹。它提供了用于读写标准`ZIP`和`GZIP`文件格式的类。

# vba - 从 excel 文件中复制标题（Excel VBA 代码）

> ID：15764645
> 
> 赞同：0
> 
> 时间：2013-04-02T12:54:08.853
> 
> 标签：vba, excel, excel-2007

早上好！

我正在处理一个 excel 文件，我想在其中复制一张表的标题并将其粘贴到另一张表的标题之后。一个例子是：

工作表 1 的数据标题如下： ![在此处输入图像描述](https://i.stack.imgur.com/4kjGq.png)

表 2 的数据标题为： ![在此处输入图像描述](https://i.stack.imgur.com/xnYUI.png)

问题是两个标题的数量每个月都不会保持不变。因此，我希望您的代码（VBA）将从 A1 开始的标题复制到 sheet2 的最后使用的单元格，并将其粘贴到 sheet1 的最后使用的单元格之后。这是我尽我所知编写的关于 VBA 的代码：

```
Sub LastColumnInOneRow()
'Find the last used column in a Row: row 1 in this example
    Dim LastCol As Integer
    Dim LastCell As String
    Dim last As Long
    Dim rng As Range
    With Sheets("Data")
    LastCol = .Cells(1, .Columns.Count).End(xlToLeft).Column
Set rng = Sheets("Data").Cells
LastCell = last(3, rng)
Range("A1" & LastCell).Select
 Selection.Copy
End With
End Sub 
```

我知道这段代码有问题，因为它没有运行。任何人都可以帮助解决这个问题。

万分感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T13:21:52.337

试试下面的：

```
Sub LastColumnInOneRow()

Dim rngSource As Range
Dim rngDestination As Range

sheets("Sheet2").select
Set rngSource = Range(Cells(1, 1), Cells(1, Range("A1").End(xlToRight).Column))
rngsource.copy

sheets("Sheet1").select
Set rngDestination = Range("A1").End(xlToRight).Offset(0, 1)

' rngSource.Copy Destination:=rngDestination
'    rngDestination.pastespecial xlpasteall
rngDestination.select
activesheet.paste
End Sub 
```

那应该让你开始

菲利普

# c# - .NET ODBC + SQL Server：如何从存储过程中调用应用程序时引发错误？

> ID：15764655
> 
> 赞同：0
> 
> 时间：2013-04-02T12:54:18.807
> 
> 标签：c#, sql-server, stored-procedures, odbc

我正在使用 System.Data.Odbc 库从 C# .NET 应用程序调用 SQL Server 存储过程。我希望能够向调用应用程序抛出错误，就像过去使用 raiserror 或 throw 的其他驱动程序一样：

`raiserror('message',18,0)`

但这些错误显然不会导致 SP 放弃执行并将错误向上传递。

任何人都可以对此有所了解吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T13:08:50.150

我发现这是 ODBC 的一个已知问题 - 要捕获错误并抛出 OdbcExceptions，您必须将 NOCOUNT 设置为 ON。

# javascript - 包括 unobtrusive-ajax 使所有脚本停止工作

> ID：15764656
> 
> 赞同：0
> 
> 时间：2013-04-02T12:54:19.110
> 
> 标签：javascript, jquery, asp.net-mvc, bundling-and-minification

我在通过 Bundling in 捆绑 JavaScript 文件时遇到问题`.NET MVC4`

我正在添加以下脚本以捆绑在我的代码中

```
bundles.Add(new ScriptBundle("~/bundle").Include("~/Scripts/jquery-1.9.1.min.js","~/Scripts/kui/kendo.all.min.js", "~/Scripts/kui/kendo.grid.min.js", "~/Scripts/jquery.validate.min.js")); 
```

直到这里一切正常，但是当我添加`jquery.unobtrusive-ajax.min.js`到列表中时：

```
bundles.Add(new ScriptBundle("~/bundle ").Include("~/Scripts/jquery-1.9.1.min.js","~/Scripts/jquery.unobtrusive-ajax.min.js","~/Scripts/kui/kendo.all.min.js", "~/Scripts/kui/kendo.grid.min.js", "~/Scripts/jquery.validate.min.js")); 
```

所有脚本都停止工作（验证、Kendo UI 等），我通过 Visual Studio JS 调试器得到了这个异常： `Microsoft JScript runtime error: Object doesn't support this property or method`

在生成的捆绑脚本文件中突出显示以下代码：

```
n("a[data-ajax=true]").live("click",function(n){n.preventDefault(),r(this,{url:this.href,type:"GET",data:[]})}),n("form[data-ajax=true] input[type=image]").live( …. 
```

并且继续前进（JavaScript/Jquery 相关）不再起作用。

JS文件中可能存在var或函数名冲突？但是很难在一个长的缩小和捆绑的脚本文件中追踪。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:56:56.930

这是因为该`live`功能已在 jQuery v1.9 中删除。

您可以尝试更改`.live`为`.on`.

或者，尝试更新 jQuery Unobtrusive Ajax NuGet 包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T13:26:42.543

试试这样：

代替

```
$("a[data-ajax=true]").live("click",function(n){}); 
```

和

```
$("a[data-ajax=true]").on("click",function(n){}); 
```

希望能帮助到你

# ejb - EJB InjectionProviderException 未能注入 EJB

> ID：15764658
> 
> 赞同：0
> 
> 时间：2013-04-02T12:54:19.983
> 
> 标签：ejb, code-injection

当我尝试在控制器中注入 EJB 时出现错误。

```
Caused by: com.sun.faces.spi.InjectionProviderException: com.sun.enterprise.container.common.spi.util.InjectionException: Exception attempting to inject Remote ejb-ref name=controllers.ScheduleController/calendrierDao,Remote 3.x interface =dao.CalendrierDao,ejb-link=null,lookup=,mappedName=,jndi-name=dao.CalendrierDao,refType=Session into class controllers. 
```

不知道是豆子本身还是..

```
 @EJB
private ActionDao actionDao;

@EJB
private CalendrierDao calendrierDao; 
```

第一个注入正确，我可以使用它。但是第二个给了我上述错误。

失败的ejb代码：

```
import java.io.Serializable;
import java.util.List;

import javax.annotation.PostConstruct;
import javax.ejb.LocalBean;

import javax.faces.application.FacesMessage;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;
import javax.faces.context.FacesContext;
import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.NamedQueries;
import javax.persistence.NoResultException;
import javax.persistence.PersistenceContext;
import javax.persistence.PersistenceUnit;
import javax.persistence.Query;
import javax.persistence.TypedQuery;
import javax.servlet.http.HttpSession;

import entities.Action;
import entities.TCalendrier;
import entities.Titre;

@SessionScoped
@ManagedBean
public class CalendrierDao implements ICalendrierDao, Serializable {
/**
 * 
 */
private static final long serialVersionUID = -270548339881483437L;
// private static final String SELECT_ALL_CALENDAR =
// "SELECT cal FROM t_calendriers cal where c.utilCreation =: utilCreation";
private static final String SELECT_TITLE_NAME = "SELECT t.titreEnClair FROM t_titres t  

private FacesMessage message;
private List<TCalendrier> allCalendar;

@PersistenceUnit
private EntityManagerFactory emf;

@PersistenceContext(unitName = "GA2010-ejbPU-dev")
private EntityManager em;

public CalendrierDao() {
    super();
}
@PostConstruct
public void init() {

    HttpSession sess = (HttpSession) FacesContext.getCurrentInstance()
            .getExternalContext().getSession(true);
    String codeUser = (String) sess.getAttribute("codeUser");

    try {

        TypedQuery<TCalendrier> requete = em.createNamedQuery(
                "typeCalendrier.findAll", TCalendrier.class);

        // TypedQuery<TCalendrier> requete =
        // em.createQuery(SELECT_ALL_CALENDAR, TCalendrier.class);
        requete.setParameter("utilCreation", codeUser);
        allCalendar = requete.getResultList();

    } catch (Exception e) {

        this.message = new FacesMessage(e.getMessage());
        FacesContext.getCurrentInstance().addMessage(null, message);
    }

}

public List<TCalendrier> getAllCalendar() {

    return allCalendar;
}

public String getTitleName(Integer refTitre_p) {
    String titre = null;

    try {

        Query requete = em.createQuery(SELECT_TITLE_NAME);

        requete.setParameter("refTitre", refTitre_p);
        titre = (String) requete.getSingleResult();

    } catch (NoResultException nre) {
        nre.printStackTrace();
    }

    return titre;

} 
```

}

# c - 将窗口大小调整为 X 个字符（不是像素）

> ID：15764666
> 
> 赞同：2
> 
> 时间：2013-04-02T12:54:41.713
> 
> 标签：c, gtk

[`gtk_window_set_default_size()`](https://developer.gnome.org/gtk3/3.4/GtkWindow.html#gtk-window-set-default-size)根据像素调整窗口大小。如果我想根据 x 个字符调整它的大小，并且可能考虑到字体大小，我该怎么做？

从我在互联网上收集的搜索结果来看，[`gtk_window_set_geometry_hints()`](https://developer.gnome.org/gtk3/3.4/GtkWindow.html#gtk-window-set-geometry-hints)似乎也是基于像素的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T13:11:31.597

您始终可以通过从字体中获取[近似字符宽度来将字符转换为像素。](https://developer.gnome.org/pango/unstable/pango-Fonts.html#pango-font-metrics-get-approximate-char-width)

从相关的小部件（例如文本视图或包含您真正关心的字符的任何东西）开始，调用`gtk_widget_get_pango_context`，然后`pango_context_load_font`获取字体，`pango_font_get_metrics`获取字体指标，最后`pango_font_metrics_get_approximate_char_width`除以`PANGO_SCALE`获取字符宽度。在 PyGTK 中演示：

```
import gtk, pango

char_count = 80     # how many characters you have

w = gtk.Window()    # here you'd use another widget
ctx = w.get_pango_context()
metrics = ctx.load_font(ctx.get_font_description()).get_metrics()
char_width_pango = metrics.get_approximate_char_width()
pixel_count = char_count * char_width_pango / pango.SCALE
print pixel_count 
```

# c# - 如何在浏览器中打开pdf

> ID：15764670
> 
> 赞同：0
> 
> 时间：2013-04-02T12:54:54.887
> 
> 标签：c#, asp.net, c#-4.0

我有一个gridview，其中有点击链接按钮上的链接按钮我可以下载文件，如pdf、jpeg、doc，但我想在点击链接按钮时显示浏览器本身

```
string pdfPath = Server.MapPath("~/SomePDFFile.pdf");
WebClient client = new WebClient();
Byte[] buffer = client.DownloadData(pdfPath);
Response.ContentType = "application/pdf";
Response.AddHeader("content-length", buffer.Length.ToString());
Response.BinaryWrite(buffer); 
```

但我想在浏览器的链接按钮内打开像 jpeg、pdf、doc gridview 这样的文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:00:10.670

这取决于文件类型以及当前系统如何配置以处理该类型。

例如，默认情况下，大多数图像*只会*在浏览器中打开；然而，对我来说，我已经将 Chrome 配置为 PDF 文件的默认注册应用程序，但这现在几乎不是标准的东西，许多普通用户在安装其他东西时只会被告知要下载的东西，比如 Foxit reader - 在这种情况下，如果浏览器未注册以处理文件类型，则不会发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T15:25:31.870

在浏览器中显示 PDF 的第一种方法

```
protected void btnOpen_Click(object sender, EventArgs e)
{
Response.Redirect("SiteAnalytics.pdf");
} 
```

通过设置响应对象的内容类型并在标题中添加 pdf 的二进制形式来在浏览器中显示 PDF 的第二种方法

```
protected void btnpdf_Click(object sender, EventArgs e)
{
string path = Server.MapPath("SiteAnalytics.pdf");
WebClient client = new WebClient();
Byte[] buffer = client.DownloadData(path);

if (buffer != null)
{
Response.ContentType = "application/pdf";
Response.AddHeader("content-length", buffer.Length.ToString());
Response.BinaryWrite(buffer);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T13:59:17.337

您应该指定`Content-Disposition: inline`标题。如果浏览器会支持你在`Content-Type`header 中指定的类型的显示，它将显示在浏览器中。

相反`Content-Disposition: attachment`，它将强制浏览器为您的内容提供另存为按钮（即使它是 HTML）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T10:07:01.867

您可以在同一页面或另一个页面上的 iframe 中显示 pdf、jpg 等。例如：

```
<iframe id="iframe" runat="server" src="NameOfYourFolder/pdf.pdf"></iframe> 
```

在这里，我已经硬编码了将在 iframe 中显示的 pdf 文件的路径。您需要创建一种机制来获取与 GridView 中该链接按钮关联的文件的路径，并通过嵌入的代码块将该路径传递给 iframe 的 src。

# c# - 使用 SP2010 的远程服务器

> ID：15764674
> 
> 赞同：-1
> 
> 时间：2013-04-02T12:55:06.280
> 
> 标签：c#, .net, sharepoint

我在远程机器上有一个 sharepoint 2010 服务器，我想在我的本地系统上的 Visual Studio 2010 上开发一个 sharepoint Intranet 门户。

问题是，当我尝试在本地系统上创建新的 sharepoint 项目时，出现此错误：“sharepoint server not installed on this computer”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T17:40:38.833

如果您想开发普通的 SharePoint 项目，这是不可能的。SharePoint 的要求之一是它安装在开发机器上。

在为 SharePoint 开发内容之前，您应该先进行一些培训。从位于 Msdn [http://msdn.microsoft.com/en-us/sharepoint/ee513147.aspx的 SharePoint 开发中心开始](http://msdn.microsoft.com/en-us/sharepoint/ee513147.aspx)

但是，您可以通过 CSOM 或 OOTB WebServices 创建集成，而无需安装 SharePoint。但这需要广泛的 SharePoint 知识。

另外，发帖前先搜索一下。这是一个明显重复的帖子

# c# - 如何保存用户输入表单，以便以后能够打开和编辑它？C＃

> ID：15764676
> 
> 赞同：1
> 
> 时间：2013-04-02T12:55:12.923
> 
> 标签：c#, database, visual-studio-2010, forms, save

我目前正忙于一个用户界面应用程序，我真的需要一些帮助。

![我的应用程序的主窗口](https://i.stack.imgur.com/pHiHy.jpg)

单击“新订单”后，会出现一个用户**输入**窗口，允许用户输入客户的详细信息并选择客户希望订购的产品

![用户输入表单](https://i.stack.imgur.com/211hk.jpg)

选择某些产品会出现网格，允许用户根据客户需要指定每个面板、门或柱的尺寸。

![填妥的输入表格](https://i.stack.imgur.com/AyIvv.jpg)

最后，一旦用户单击“保存”，就会出现两个**输出**表单。一个用于栅栏制造，另一个用于钢铁车间。输出表格包含根据客户规格生产面板等的确切机器制造规格。（这个后面会和实机集成）

![在此处输入图像描述](https://i.stack.imgur.com/AwDNG.jpg)

现在...我真的希望能够保存**输入**表单，以便用户稍后可以重新打开订单并进行更改或将产品添加到现有订单中。

理想的做法是在主窗口中有一个选项来打开一个表单，该表单显示保存在客户代码下的所有订单、工作编号，也许还有 dateStamp。一旦用户选择了任何一个订单，**INPUT**窗口应该打开该特定订单的输入，允许用户添加产品并保存在新的日期戳下。

使用 iTextSharp将**输出**表单保存为 PDF，并打印出来。然而，这些文件保持不变。

每个 Datagrids 都暂时与 DataTables 绑定，但客户详细信息只是存储在变量中的文本框。（（输入值经过一系列计算，用于在 excel 表中执行 LOOKUP，以返回制造所需的信息和零件索引））

我也尝试创建一个数据库，但我无法让它工作。大多数客户和订单数据库都依赖于相关的列，例如产品代码、客户代码等。但是，我基本上只有信息表。很难将多个数据网格绑定到特定客户。当所有数据网格几乎都具有相同的列时，它就更难了。高度、宽度、数量等...

如果有人因为我的愚蠢而有任何建议或激烈的反应……我真的很感激。这是我的第一个 C# 应用程序......老实说，我的第一个实际用户应用程序。我需要开始使用 VHDL

提前致谢

赫尔曼·维奎尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:39:31.937

从应用程序本身退后一步，考虑您正在创建的实际对象是什么。似乎您会从创建诸如客户、订单等类中获得很多好处……您不一定需要数据库，文本文件也可以正常工作。通读以下[CodeProject 文章](http://www.codeproject.com/Articles/22769/Introduction-to-Object-Oriented-Programming-Concep)，了解面向对象设计概念的基本概述，然后考虑重构应用程序以使用类如何帮助您持久化数据。

提示：[序列化](http://msdn.microsoft.com/en-us/library/Vstudio/ms233843.aspx)将使持久化和检索您的类变得更加容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T13:09:34.247

只是想如果其他人有类似的问题，我会回答这个问题。

在保存数据方面，数据库是最好的选择。当您有多个用户时。写入文本文件将导致权限问题。我遇到的问题是没有任何列可以用作外键。如果您想将不同的表与一个客户或订单相关联，这当然是一个问题。

我解决此问题的方法是将每个列数组合并为一个字符串

> 此代码读取 Double-Swing Gate DatagridView 并将其合并为单个字符串...读取方法是我自己的。很简单

```
if (ds_checkBox.Checked)
            {
                int numberOfRows_ds = RowCount_gateDouble();

                ds_Qty = ReadGateDoubleQty(numberOfRows_ds);
                ds_Height = ReadGateDoubleHeight(numberOfRows_ds);
                ds_Width = ReadGateDoubleWidth(numberOfRows_ds);
                ds_total = CalculateTotal_Gates(ds_Qty, numberOfRows_ds);

                string dsgtemp1 = ConvertStringArrayToStringJoin(ds_Qty);
                string dsgtemp2 = ConvertStringArrayToStringJoin(ds_Height);
                string dsgtemp3 = ConvertStringArrayToStringJoin(ds_Width);

                gateDS_data = string.Format("{0}\r\n{1}\r\n{2}", dsgtemp1, dsgtemp2, dsgtemp3);

                visible_ds = 1;
        } 
```

这允许您将数据网格存储到数据表中的一个单元格中。因此，对于每个订单，您基本上都有一个 dataRow。一行包含客户的基本详细信息和订单信息。我的现在有点复杂，因为客户的订单分为三个阶段，报价 -> 订单 -> 发票。但是，关键是，所有输入都在一个方便的地方。

然后，无论出于何种原因，您都可以轻松地在每个相应的数据网格或文本框上显示订单信息

```
 ds_checkBox.Checked = true;

                    string theGate_ds = stringArray1[13].ToString();
                    string[] lines_gate_ds = theGate_ds.Split(new string[] { "\r\n", "\n" }, StringSplitOptions.None);
                    string[] gate_ds_qty = lines_gate_ds[0].Split('.');
                    string[] gate_ds_height = lines_gate_ds[1].Split('.');
                    string[] gate_ds_width = lines_gate_ds[2].Split('.');

                    for (int i = 0; i < gate_ds_qty.Length; i++)
                    {
                        // Create a new row.
                        InputDataSet.Gate_ds_InputRow newOutputRow;

                        newOutputRow = inputDataSet1.Gate_ds_Input.NewGate_ds_InputRow();

                        newOutputRow.gate_ds_qty = string.Format("{0}", gate_ds_qty[i]);
                        newOutputRow.gate_ds_height = string.Format("{0}", gate_ds_height[i]);
                        newOutputRow.gate_ds_width = string.Format("{0}", gate_ds_width[i]);

                        // Add the row to the Region table 
                        this.inputDataSet1.Gate_ds_Input.Rows.Add(newOutputRow);
                        // Save the new row to the database 
                    } 
```

我用过 MySql，值得学习如何使用任何类型的数据库

# ruby-on-rails-3 - 需要将父对象作为参数传入的 ActiveRecord 构建或创建方法

> ID：15764682
> 
> 赞同：0
> 
> 时间：2013-04-02T12:55:33.377
> 
> 标签：ruby-on-rails-3, activerecord, rails-activerecord

我的理解是模型中子对象的构建/创建方法会自动创建关系。

但是，当我`validates`在父对象和子对象上都使用 a 时，我无法保存父对象，除非我在子构建/创建方法中显式传入父对象

**家长班**

```
class Order < ActiveRecord::Base
  attr_accessible :tax, :total
  has_many :order_lines

  validates :user, presence: true
  validates :order_lines , presence: true
end 
```

**儿童班**

```
class OrderLine < ActiveRecord::Base
  attr_accessible :order, :product, :qty
  belongs_to :order
  belongs_to :product
  ...
  ...
  validates :order, presence: true
end 
```

**问题**

因此，如果我尝试：

```
order.order_lines.build(product: product)
order.save => #error for order_lines, order can't be blank

#or
order.order_lines.create(product: product) => # throws same error 
```

但我可以成功地做到以下几点：

```
order.order_lines.build(product: product, order: order)
order.save => #true

#or
order.order_lines.create(product: product, order: order) => #true 
```

这给我带来了 FactoryGirl 和创建测试的更多问题。

我是否错误和误解了您必须明确传递父对象？

导轨与：3.2.11

[AR API 文档](http://api.rubyonrails.org/classes/ActiveRecord/AutosaveAssociation.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T20:28:50.943

rails 中的关联应该让你的生活更轻松，而不是相反。

这样的事情呢？

```
Order has_many Lines has_one Product 
```

这种架构对我来说更有意义。现在你可以做这样的事情：

```
order.lines.product.build(attributes) 
```

# c# - 基本场景的高效类表类型，无需排序/持久化/搜索

> ID：15764687
> 
> 赞同：1
> 
> 时间：2013-04-02T12:55:44.643
> 
> 标签：c#, .net, .net-4.0, datatable

我正在寻找一种模仿混合类型数据（行/列）表的高效内存类型。高效是指以下场景的快速操作。记忆是次要问题。

主要场景是：

*   添加数据行
*   阅读整列
*   遍历行

超出范围：

*   排序/排序
*   搜索
*   持久化到数据库
*   单元格的随机访问（即 table(row=3,col=4) ）

我假设我可以比 ADO 类型（DataTable 等）做得更好，因为它们解决了更广泛的场景？我可能是错的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:19:04.817

DataTable 功能多，体积大。像 AcceptChanges。

为了处理混合数据类型，创建了一个抽象类

```
public abstract class Field : INotifyPropertyChanged 
```

这包括

```
public abstract String DispValue { get; } 
```

然后对于各种数据类型

```
class FieldBooleanSV : Field

class FieldStringSV : Field

class FieldInt32SV : Field

public class FieldInt16SV : DocField
{
    Int16 fieldValue;
    Int16 FieldValue { get { return fieldValue; }
        set
        {
                if (value != fieldValue)
                {
                    fieldValue = value;
                    NotifyPropertyChanged("DispValue");
                    NotifyPropertyChanged("FieldValue");
                }
            }
        }
    }
    public override String DispValue 
    { 
        get 
        {  return fieldValue.ToString()); }
    }
} 
```

SV是单值，有一个MV

所以 FieldRow 是一个具有属性的类

```
List<Field> Fields .... 
```

总集合是（行和列）是

```
ObservableCollection<FieldRow> 
```

它很脆弱，因为您需要确保每个 FieldRow 具有相同的字段集合。

这是很多工作，但我需要控制 Field。
如果您要走这条路，那么在 DataGrid 上使用 GridView（出于相同的原因 - 电源但开销）。

问题与

```
List<IEnumerable<T>> 
```

是不是 T 是一个变量，但它是奇异的。所有列都是相同的 T。

# ruby-on-rails-3 - 如何使用 Dragonfly 的 before_serve 块为 pdf 文件添加水印

> ID：15764694
> 
> 赞同：0
> 
> 时间：2013-04-02T12:56:00.240
> 
> 标签：ruby-on-rails-3, dragonfly-gem

我正在尝试在使用蜻蜓 gem 下载文件时提供带有用户电子邮件地址和时间戳水印的 PDF 文件，并且在使用 before_serve 块时遇到了一些麻烦。我无法解决的是如何使用蜻蜓传递给块的作业对象以及如何应用自定义处理器。直接在作业对象上调用进程似乎不会运行处理器

```
app.configure do |config|
  config.server.before_serve do |job, env|
    user = # user record grabbed from database
    job.process(:watermark, user: user)
  end
end 
```

但是，如果我在 rails 模型返回的蜻蜓对象上调用进程，则 pdf 会正确处理，但我不确定如何实际指示蜻蜓发送到浏览器的内容

```
app.configure do |config|
  config.server.before_serve do |job, env|
    user = # user record grabbed from database
    report = # report grabbed from database
    report.pdf.process(:watermark, user: user)
  end
end 
```

因此，在这两种情况下，相同的文件都会返回给浏览器，即原始的无水印版本。也许我想让蜻蜓做一些它在 before_serve 块中不应该做的事情？我的替代实现是阻止对直接文件下载的访问，并在 Rails 控制器中执行所有这些操作。如果可能，我想使用蜻蜓的 before_serve 块，因为我已经在块中添加了所有身份验证，以确保允许用户下载文件。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:37:01.003

经过进一步调查，最好的解决方案似乎是阻止 before_serve 块中的所有直接文件访问，并使用标准的 rails 控制器为文件添加水印并将其呈现以供下载。

# flat-file - 如何从未连接的查找中返回多个值？

> ID：15764696
> 
> 赞同：3
> 
> 时间：2013-04-02T12:56:04.880
> 
> 标签：flat-file, informatica-powercenter, informatica

在我的映射中，我使用平面文件作为源和目标。我必须使用未连接的查找。当我们使用平面文件作为源和目标时，有人可以告诉我如何从未连接的查找中返回多个值。

我知道当我们使用关系表时如何返回多个值。在这种情况下，我们只是连接值并作为单个值返回。我们再次拆分这些值。

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-29T10:56:02.910

**如果在关系表上未连接查找**

1.  在查找覆盖中，我们可以连接两个或多个端口并将该端口返回到表达式转换。
    2.  在表达式转换中提取这些值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-16T08:28:55.727

我认为您将源文件中的第一个定界符替换为其他定界符（例如＆）。使用“&”作为分隔符，您可以创建查找并使用它来检索连接的返回字段，该字段将为您提供匹配的多个返回值。

# c++ - 创建虚拟分区

> ID：15764697
> 
> 赞同：4
> 
> 时间：2013-04-02T12:56:07.240
> 
> 标签：c++, windows

我正在尝试使用 C++ 在 USB 驱动器上创建一个隐藏的虚拟分区。

我可以在 Windows 中使用虚拟磁盘 API 来执行此操作吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-18T22:20:28.780

是的，虚拟磁盘 API 支持无需为其分配驱动器号即可创建和装载卷的功能。这是通过传递[`ATTACH_VIRTUAL_DISK_FLAG_NO_DRIVE_LETTER`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd323693%28v=vs.85%29.aspx)给[`AttachVirtualDisk`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd323692%28v=vs.85%29.aspx)

```
// This call requires elevated privileges to succeed.
::AttachVirtualDisk(
    handle, // Handle returned by CreateVirtualDisk or OpenVirtualDisk
    NULL,
    ATTACH_VIRTUAL_DISK_FLAG_NO_DRIVE_LETTER,
    0, // no provider-specific flags
    0, // no parameters
    NULL); 
```

困难的部分是在没有驱动器号的情况下访问该卷。虚拟磁盘 API 不提供获取虚拟驱动器上卷列表的直接方法。这很重要，因为您必须通过 UNC 路径访问卷，因为驱动器号不可用。要获取 UNC 路径，您需要枚举所有已安装的卷以查找位于虚拟硬盘驱动器上的卷。这是通过打开每个已安装的卷并[`DeviceIoControl`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb968800%28v=vs.85%29.aspx)用于检索与文件句柄关联的设备信息来完成的。

包含的示例执行以下步骤以在我们的虚拟驱动器上创建、安装和访问*隐藏卷。*

1.  [`CreateVirtualDisk`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd323659%28v=vs.85%29.aspx)使用或[`OpenVirtalDisk`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd323680%28v=vs.85%29.aspx)分别创建或打开虚拟磁盘文件。
2.  使用 附加虚拟磁盘[`AttachVirtualDisk`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd323692%28v=vs.85%29.aspx)。*您必须具有提升的权限才能成功执行此步骤*。
3.  初始化设备。
4.  在设备上创建一个卷。
5.  枚举挂载的卷以查找虚拟磁盘上的卷。

[*步骤 3 和 4 需要从磁盘管理控制面板手动完成。这当然可以通过编程方式完成，但会在示例中添加更多代码。*]

```
#include <iostream>
#include <fstream>
#include <string>
#include <virtdisk.h>

#pragma comment(lib, "virtdisk.lib")

// Fix unresolved link error
static const GUID VIRTUAL_STORAGE_TYPE_VENDOR_MICROSOFT = { 0xEC984AEC, 0xA0F9, 0x47e9, 0x90, 0x1F, 0x71, 0x41, 0x5A, 0x66, 0x34, 0x5B };

#define ARRAY_SIZE(a)                               \
  ((sizeof(a) / sizeof(*(a))) /                     \
  static_cast<size_t>(!(sizeof(a) % sizeof(*(a)))))

DWORD CreateDisk(PCWSTR virtualDiskFilePath, HANDLE *handle)
{
    VIRTUAL_STORAGE_TYPE storageType =
    {
        VIRTUAL_STORAGE_TYPE_DEVICE_VHD,
        VIRTUAL_STORAGE_TYPE_VENDOR_MICROSOFT
    };

    CREATE_VIRTUAL_DISK_PARAMETERS parameters = {};
    parameters.Version = CREATE_VIRTUAL_DISK_VERSION_1;
    parameters.Version1.MaximumSize = 1024 * 1024 * 1024;
    parameters.Version1.BlockSizeInBytes = CREATE_VIRTUAL_DISK_PARAMETERS_DEFAULT_BLOCK_SIZE;
    parameters.Version1.SectorSizeInBytes = CREATE_VIRTUAL_DISK_PARAMETERS_DEFAULT_SECTOR_SIZE;
    parameters.Version1.SourcePath = NULL;

    int result = ::CreateVirtualDisk(
        &storageType,
        virtualDiskFilePath,
        VIRTUAL_DISK_ACCESS_ALL,
        NULL,
        CREATE_VIRTUAL_DISK_FLAG_NONE,
        0,
        &parameters,
        NULL,
        handle);

    return result;
}

DWORD OpenDisk(PCWSTR virtualDiskFilePath, HANDLE *handle)
{
    VIRTUAL_STORAGE_TYPE storageType =
    {
        VIRTUAL_STORAGE_TYPE_DEVICE_VHD,
        VIRTUAL_STORAGE_TYPE_VENDOR_MICROSOFT
    };

    OPEN_VIRTUAL_DISK_PARAMETERS parameters =
    {
        OPEN_VIRTUAL_DISK_VERSION_1
    };

    parameters.Version1.RWDepth = 1024;

    return ::OpenVirtualDisk(
        &storageType,
        virtualDiskFilePath,
        VIRTUAL_DISK_ACCESS_ALL,
        OPEN_VIRTUAL_DISK_FLAG_NONE,
        &parameters,
        handle);
}

int main(int argc, char *argv[])
{
    LPTSTR  virtualDiskFilePath = _T("c:\\source\\drive.vhd");
    HANDLE  handle;
    DWORD   result;
    ULONG   bytesUsed;
    bool    vhdCreated = false;

    //  Create or open a virtual disk file
    result = CreateDisk(virtualDiskFilePath, &handle);
    if(result == ERROR_FILE_EXISTS)
    {
        result = OpenDisk(virtualDiskFilePath, &handle);
        if(result != ERROR_SUCCESS)
        {
            std::wcout << "Unable to open virtual disk" << std::endl;
            return 1;
        }
    }
    else if(result != ERROR_SUCCESS)
    {
        std::wcout << "Unable to create virtual disk" << std::endl;
        return 1;
    }
    else
    {
        vhdCreated = true;
    }

    //  Now that the virtual disk is open we need to mount it.
    //
    //  FROM MSDN:
    //  To attach and detach a virtual disk, you must also have the
    //  SE_MANAGE_VOLUME_NAME privilege present in your token. This privilege
    //  is stripped from an administrator's token when User Account Control is
    //  in use, so you may need to elevate your application to gain access to
    //  the unrestricted token that includes this privilege. 
    result = ::AttachVirtualDisk(
        handle,
        NULL,
        ATTACH_VIRTUAL_DISK_FLAG_NO_DRIVE_LETTER,
        0, // no provider-specific flags
        0, // no parameters
        NULL);
    if(result != ERROR_SUCCESS)
    {
        std::wcout << "Unable to attach virtual disk" << std::endl;
        return 1;
    }

    if(result == ERROR_SUCCESS && vhdCreated == true)
    {
        std::wcout
            << "Virtual disk image created. Go into the Computer Management admin panel" << std::endl
            << "and add a volume and format it.\n" << std::endl;
        system("pause");
    }

    // Now we need to grab the device name \\.\PhysicalDrive#
    TCHAR   physicalDriveName[MAX_PATH];
    DWORD   physicalDriveNameSize = ARRAY_SIZE(physicalDriveName);

    result = ::GetVirtualDiskPhysicalPath(handle, &physicalDriveNameSize, physicalDriveName);
    if(result != ERROR_SUCCESS)
    {
        std::wcout << "Unable to retrieve virtual disk path" << std::endl;
        return 1;
    }
    const std::wstring deviceName = physicalDriveName;

    //  HACK!!! Wait for windows to complete the mount.
    Sleep(2500);

    // In order to get the UNC path of the volumes located on the virtual disk we
    // need to enumerate all mounted volumes and check which device they are located
    // on.
    std::wstring volumeName;

    TCHAR volumeNameBuffer[MAX_PATH];
    HANDLE hVol = ::FindFirstVolume(volumeNameBuffer, ARRAY_SIZE(volumeNameBuffer));
    if(hVol == INVALID_HANDLE_VALUE)
    {
        std::wcout << "Unable to find first volume" << std::endl;
        return 1;
    }
    do
    {
        //  Get rid of trailing backslash so we can open the volume
        size_t len = wcslen(volumeNameBuffer);
        if (volumeNameBuffer[len-1] == '\\')
        {
            volumeNameBuffer[len-1] = 0;
        }

        HANDLE volumeHandle = ::CreateFile( 
            volumeNameBuffer, 
            GENERIC_READ,  
            FILE_SHARE_READ | FILE_SHARE_WRITE,  
            NULL, 
            OPEN_EXISTING, 
            FILE_ATTRIBUTE_NORMAL | FILE_FLAG_BACKUP_SEMANTICS, 
            NULL); 
        if(volumeHandle == INVALID_HANDLE_VALUE)
        {
            std::wcout << "Unable to open volume " << volumeNameBuffer << std::endl;
        }
        else
        {
            // We can grab the id of the device and use it to create a
            // proper device name.
            STORAGE_DEVICE_NUMBER deviceInfo = {0};
            if (::DeviceIoControl(
                    volumeHandle,
                    IOCTL_STORAGE_GET_DEVICE_NUMBER,
                    NULL,
                    0,
                    &deviceInfo,
                    sizeof(deviceInfo),
                    &bytesUsed,
                    NULL))
            {
                std::wstring tmpName(
                    std::wstring(L"\\\\.\\PhysicalDrive")
                    + std::to_wstring((long long)deviceInfo.DeviceNumber));
                if(_wcsicmp(tmpName.c_str(), deviceName.c_str()) == 0)
                {
                    volumeName = std::wstring(volumeNameBuffer) + L"\\\\";
                    CloseHandle(volumeHandle);
                    break;
                }
            }

            CloseHandle(volumeHandle);
        }
    }
    while(::FindNextVolume(hVol, volumeNameBuffer, ARRAY_SIZE(volumeNameBuffer)) != FALSE);

    ::FindVolumeClose(hVol);

    if(volumeName.size() == 0)
    {
        std::wcout << "Unable to locate a volume on this device" << std::endl;
        return 1;
    }

    std::wcout << "Device: " << physicalDriveName << std::endl;
    std::wcout << "Volume: " << volumeName << std::endl;

    std::wcout << "\n\nSuccess! Now create the file!" << std::endl;

    // Now let's create a file for fits and giggles
    std::ofstream   output;

    output.open(volumeName + L"hello.txt");
    if(output.fail())
    {
        std::wcout << "Unable to open output file." << std::endl;
        return 1;
    }
    output.close();

    // Volume will be unmounted when the application closes
    system("pause");

    return 0;
} 
```

# d3.js - 从简单的 JSON 字符串加载 D3.js 数据

> ID：15764698
> 
> 赞同：41
> 
> 时间：2013-04-02T12:56:08.360
> 
> 标签：d3.js

图库中的大多数示例都从 TSV 文件加载数据。

如何转换以下内容以使用本地 json 变量而不是 TSV 数据？

```
d3.tsv("data.tsv", function(error, data) {

    var myEntitiesJson = getEntitiesJson(); // <------ use this instead of "data"
    data.forEach(function(d) {
        d.frequency = +d.frequency;
    });

    x.domain(data.map(function(d) { return d.letter; }));
    y.domain([0, d3.max(data, function(d) { return d.frequency; })]);

    ...

    svg.selectAll(".bar")
        .data(data)     // <----- bind to myEntities instead
} 
```

据我所知，我只需要对我的entitiesJson 做一些事情，以便对其进行**数据化**，以便图表可以绑定到它。

**更新**

我正在取得一些进展。我从 JSON 中插入了我的实体，并且图表开始呈现新的形状。

目前以下代码中断：

```
svg.selectAll(".bar")
    .data(myEntities)  // <-- this is an array of objects
    .enter().append("rect") 
```

这导致：

> 错误：属性 y="NaN" 的值无效
> 
> 错误：属性 height="NaN" 的值无效

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-02T13:35:54.340

对于远程 data.json 替换：

```
d3.tsv("data.tsv", function(error, data) {...} 
```

和 ：

```
d3.json("data.json", function(error, data) {
    console.log(data); // this is your data
}); 
```

对于本地数据：

```
var myData = { {date:'2013-05-01', frequency:99},
               {date:'2013-05-02', frequency:24} };

function draw(data) {
    console.log(data); // this is your data
}

draw(myData); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-02-27T21:41:52.613

没有一种简单的方法可以对任何给定的 json 进行数据化，因为并非所有 json 对象都是相同的*shape*。

我所说的形状是指数据的组织方式。例如，两者`'{"foo" : 1, "bar" : 2}'`和`'{"names" : ["foo", "bar"], "values" : [1, 2]}'`都可以用来存储相同的数据，但是一个将所有内容存储在一个对象中，其中对象键对应于数据点的名称，另一个使用单独的数组来存储名称和值，对应的条目具有公共数组索引。

但是，您可以通过一个通用*过程将 json 转换为数据。*首先，您需要解析 json。这可以通过 javascript-standard`JSON`对象来完成。如果您的json`JSON.parse(myJson)`对象已经上传到客户端，请使用它来获取数据。`d3.json(my/json/directory, fn(){})`可以加载和解析您的 json，因此如果您从服务器上的其他位置加载它，这可能是将 json 放入对象的更好方法。

一旦将 json 打包到 javascript 对象中，您仍然需要对其进行数据处理，这将取决于您的数据。它所期望的 d3 是某种形式的数组：`[dataPoint1, dataPoint2, ...]`。对于我上面给出的两个示例，您想要的数组看起来像这样：

```
[{'name' : 'foo', 'value' : 1}, {'name' : 'bar', 'value' : 2}] 
```

对于每个数据点，我的数组中有一个元素，具有两个属性：`value`和`name`. （在您的示例中，您需要属性`letter`和`frequency`）

对于我的每个示例，我将使用不同的函数来创建数组。与这条线的共同点：

```
var rawData = JSON.parse(myJson); 
```

我的第一个 json 可以用这个函数打包：

```
var key;
var data = [];

for(key in rawData){
    if(rawData.hasOwnProperty(key)){
        data.push({'name' : key, 'value' : rawData[key]});
    }
} 
```

对于第二个示例，我想遍历我的对象的每个属性`names`， 和`values`。我的代码可能如下所示：

```
var i;
var data = [];

for(i = 0; i < rawData.names.length; i++){
    data.push({'name' : rawData.names[i], 'value' : rawData.values[i]});
} 
```

这两个都将产生我的原始 JSON 的数据版本，然后我可以在 d3 中使用它。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-02T13:03:23.760

对于`D3js` `v2`或`v3`（不确定是哪一个）。

### 声明你的数据集

```
var dataset = { 
    "first-name": "Stack",
    "last-name": "Overflow",
}; // JSON object
var dataset = [ 5, 10, 15, 20, 25 ]; // or array 
```

如[doc 所述](https://github.com/mbostock/d3/wiki/Selections#wiki-data)，您可以使用：

> 数字或对象数组，或返回值数组的函数

### 绑定它

```
d3.select("body").selectAll("p")
    .data(dataset)
    .enter()
    .append("p")
    .text("New paragraph!"); 
```

[Scott Murray 的 D3 教程#Binding data](http://alignedleft.com/tutorials/d3/binding-data/)中的更多解释。

data() 函数适用于选择，更多信息可以在官方文档中找到：[selection.data([values[, key]])](https://github.com/mbostock/d3/wiki/Selections#wiki-data)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-16T15:09:14.960

您可以将 json 更改为将数据分配给全局值的 javascript 文件。以[https://bl.ocks.org/d3noob/5028304](https://bl.ocks.org/d3noob/5028304)为例：

从：

```
<script>
.....
// load the data
d3.json("sankeygreenhouse.json", function(error, graph) {

    var nodeMap = {};
    graph.nodes.forEach(function(x) { nodeMap[x.name] = x; }); 
```

至：

```
<script src="graphData.js"></script>
<script>
.....
    var nodeMap = {};
    graph.nodes.forEach(function(x) { nodeMap[x.name] = x; }); 
```

请注意，我们已经消除了对回调的需求。

json 文件是“sankeygreenhouse.json”：

```
{
"links": [
  {"source":"Agricultural Energy Use","target":"Carbon Dioxide","value":"1.4"}, 
```

现在，在“graphData.js”中：

```
var graph = {
   "links": [
      {"source":"Agricultural Energy Use","target":"Carbon Dioxide","value":"1.4"}, 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-27T17:41:16.157

只需将数据更改为对象数组，如下所示：

```
let data = [{"apples":53245,"oranges":200},{"apples":28479,"oranges":200},{"apples":19697,"oranges":200},{"apples":24037,"oranges":200},{"apples":40245,"oranges":200}] 
```

并注释掉`d3.tsv("data.tsv", function(error, data) {...`

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2015-03-21T12:08:20.127

为什么不简单地将您的 json 转换为 tsv，如 Rob[所述](https://stackoverflow.com/questions/26707137/convert-an-array-of-json-objects-to-tsv-python)？

d3 需要数据，或者换句话说，需要特定格式的数据：tsv。解决问题的最简单方法是将数据从 json 格式化为 tsv，这可以使用 Rob 的注释轻松完成。

# asp.net-mvc - MVC 4 移动显示模式在部署后不起作用？

> ID：15764699
> 
> 赞同：3
> 
> 时间：2013-04-02T12:56:12.580
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我正在使用 MVC4 移动显示模式。

它在本地完美运行 - 如果我使用用户代理切换器，它会按预期切换到移动设备。

一旦我将它部署到我的实时 IIS 服务器，它就不会进入手机上的移动视图或切换用户代理。

服务器上有 .Net 4.5，并且该站点正在使用 .Net 4 为其应用程序池集成。[（所以这个ASP.NET MVC4 移动站点](https://stackoverflow.com/questions/11170117/asp-net-mvc4-mobile-site-displays-correctly-on-local-host-not-deployment-server)似乎不是在本地主机而不是部署服务器上正确显示）

还有其他想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:45:02.247

如果其他人遇到此问题，请确保您检查视图是否已部署到实时服务器。它没有被标记为我的内容，所以没有被部署。我猜是因为我把它复制到了项目中。

无论如何，我的错误很简单。

# haskell - 难以理解 GHC 关于歧义的投诉

> ID：15764700
> 
> 赞同：2
> 
> 时间：2013-04-02T12:56:13.690
> 
> 标签：haskell, ghc

我正在尝试创建一个简单的 Haskell 进化算法，并且我正在尝试使其尽可能通用。这最初是我用 Python 解决的一个任务，当我有更多时间并在 Haskell 中解决时，我想回到它。该任务需要代码非常灵活，我试图在我的初步 Haskell 实现中重新创建它。

在下面的代码中，您可以看到 GHC 给我的错误：

```
Ambiguous type variable 'a0' in the constraint:
  (Genome a0) arising from a use of 'crossover'
Probable fix: add a type signature that fixes these type variable(s)
In the expression: crossover cross (genome dad) (genome mom)
In the first argument of 'mapM', namely
  '(\ (dad, mom) -> crossover cross (genome dad) (genome mom))'
In a stmt of a 'do' block:
  children <- mapM
                (\ (dad, mom) -> crossover cross (genome dad) (genome mom)) parents 
```

我有以下类声明：

```
class (Eq a, Show a) => Genome a where
      crossover       :: (Fractional b) => b -> a -> a -> IO (a, a)
      mutate          :: (Fractional b) => b -> a -> IO a
      develop         :: (Phenotype b)  => a -> b

class (Eq a, Show a) => Phenotype a where
      --In case of Coevolution where each phenotype needs to be compared to every other in the population
     fitness         :: [a] -> a -> Int 
     genome          :: (Genome b) => a -> b 
```

给我问题的代码是：

```
breed :: (Phenotype b) => [(b, b)] -> Double -> Double -> IO [b]
breed parents cross mute = do
      children <- mapM (\ (dad, mom) -> crossover cross (genome dad) (genome mom)) parents
      let ch1 = map fst children ++ map snd children
      mutated <- mapM (mutate mute) ch1
      return $ map develop mutated 
```

我不完全确定我理解错误，我认为因为两者`mom`都`dad`属于类`Phenotype`，这意味着它们必须支持一种`genome`方法，这应该不是问题。我可以看到的一个问题是 GHC 无法确保新创建的基因组会产生与它接收到的相同的表型，但我不确定如何解决这个问题。我忽略的类声明也可能存在一些问题，所以我可能会帮助让比我更好的人来查看它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T13:20:02.813

`children :: Genome a => [(a,a)]`. `ch1 :: Genome a => [a]`. 等“什么数据类型是`a`？” - 哈斯克尔问。“我需要检查它是否属于`Genome`类型类”。

代码中没有任何东西决定了具体的数据类型`a`，你只能用方法来操作。

您还需要`a`输入返回类型，并添加`Genome a`到约束中，以便它将由以下调用站点确定`breed`：

`breed :: (Phenotype b, Genome a) => [(b, b)] -> Double -> Double -> (Something a,IO [b])`

# android - Vibrator.vibrate(long) 导致 LG-E730 频繁重启应用程序

> ID：15764702
> 
> 赞同：0
> 
> 时间：2013-04-02T12:56:20.507
> 
> 标签：android, vibration

如果我在 LG-E370 上使用 Vibrator.vibrate(long)，这会导致应用程序频繁重启。振动器权限已添加到清单中，并且在应用程序重新启动之前振动器最多振动 5 次。

我怎样才能可靠地振动？

我将堆栈跟踪的输出添加到我的 onPause() 中，这就是我得到的：

```
04-02 14:39:36.384:  dalvik.system.VMStack.getThreadStackTrace(Native Method)
04-02 14:39:36.384:  java.lang.Thread.getStackTrace(Thread.java:737)
04-02 14:39:36.384:  com.evotegra.aCoDriver.ACoDriverActivity.onPause(ACoDriverActivity.java:94)
04-02 14:39:36.384:  android.app.Activity.performPause(Activity.java:3851)
04-02 14:39:36.384:  android.app.Instrumentation.callActivityOnPause(Instrumentation.java:1191)
04-02 14:39:36.424:  android.app.ActivityThread.performNewIntents(ActivityThread.java:1747)
04-02 14:39:36.424:  android.app.ActivityThread.handleNewIntent(ActivityThread.java:1757)
04-02 14:39:36.424:  android.app.ActivityThread.access$2300(ActivityThread.java:117)
04-02 14:39:36.424:  android.app.ActivityThread$H.handleMessage(ActivityThread.java:989)
04-02 14:39:36.424:  android.os.Handler.dispatchMessage(Handler.java:99)
04-02 14:39:36.434:  android.os.Looper.loop(Looper.java:130)
04-02 14:39:36.434:  android.app.ActivityThread.main(ActivityThread.java:3740)
04-02 14:39:36.434:  java.lang.reflect.Method.invokeNative(Native Method)
04-02 14:39:36.434:  java.lang.reflect.Method.invoke(Method.java:507)
04-02 14:39:36.444:  com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:880)
04-02 14:39:36.444:  com.android.internal.os.ZygoteInit.main(ZygoteInit.java:638)
04-02 14:39:36.444:  dalvik.system.NativeStart.main(Native Method)

04-02 14:39:44.351:  dalvik.system.VMStack.getThreadStackTrace(Native Method)
04-02 14:39:44.371:  java.lang.Thread.getStackTrace(Thread.java:737)
04-02 14:39:44.371:  com.evotegra.aCoDriver.ACoDriverActivity.onPause(ACoDriverActivity.java:94)
04-02 14:39:44.371:  android.app.Activity.performPause(Activity.java:3851)
04-02 14:39:44.381:  android.app.Instrumentation.callActivityOnPause(Instrumentation.java:1191)
04-02 14:39:44.381:  android.app.ActivityThread.performPauseActivity(ActivityThread.java:2356)
04-02 14:39:44.381:  android.app.ActivityThread.performPauseActivity(ActivityThread.java:2326)
04-02 14:39:44.381:  android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:2818)
04-02 14:39:44.401:  android.app.ActivityThread.access$1600(ActivityThread.java:117)
04-02 14:39:44.401:  android.app.ActivityThread$H.handleMessage(ActivityThread.java:946)
04-02 14:39:44.411:  android.os.Handler.dispatchMessage(Handler.java:99)
04-02 14:39:44.411:  android.os.Looper.loop(Looper.java:130)
04-02 14:39:44.411:  android.app.ActivityThread.main(ActivityThread.java:3740)
04-02 14:39:44.462:  java.lang.reflect.Method.invokeNative(Native Method)
04-02 14:39:44.462:  java.lang.reflect.Method.invoke(Method.java:507)
04-02 14:39:44.462:  com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:880)
04-02 14:39:44.482:  com.android.internal.os.ZygoteInit.main(ZygoteInit.java:638)
04-02 14:39:44.492:  dalvik.system.NativeStart.main(Native Method)
04-02 14:39:44.772: W/ServerManager(8731): <!>com.evotegra.aCoDriver.data.ServerManager$ConnectionManager 559<!> Connection thread was interrupted. Message: null
04-02 14:39:44.862:  dalvik.system.VMStack.getThreadStackTrace(Native Method)
04-02 14:39:44.862:  java.lang.Thread.getStackTrace(Thread.java:737)
04-02 14:39:44.862:  com.evotegra.aCoDriver.ACoDriverActivity.onPause(ACoDriverActivity.java:94)
04-02 14:39:44.862:  android.app.Activity.performPause(Activity.java:3851)
04-02 14:39:44.862:  android.app.Instrumentation.callActivityOnPause(Instrumentation.java:1191)
04-02 14:39:44.862:  android.app.ActivityThread.performPauseActivity(ActivityThread.java:2356)
04-02 14:39:44.862:  android.app.ActivityThread.performPauseActivity(ActivityThread.java:2326)
04-02 14:39:44.862:  android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:2818)
04-02 14:39:44.872:  android.app.ActivityThread.access$1600(ActivityThread.java:117)
04-02 14:39:44.872:  android.app.ActivityThread$H.handleMessage(ActivityThread.java:946)
04-02 14:39:44.872:  android.os.Handler.dispatchMessage(Handler.java:99)
04-02 14:39:44.872:  android.os.Looper.loop(Looper.java:130)
04-02 14:39:44.872:  android.app.ActivityThread.main(ActivityThread.java:3740)
04-02 14:39:44.872:  java.lang.reflect.Method.invokeNative(Native Method)
04-02 14:39:44.872:  java.lang.reflect.Method.invoke(Method.java:507)
04-02 14:39:44.872:  com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:880)
04-02 14:39:44.872:  com.android.internal.os.ZygoteInit.main(ZygoteInit.java:638)
04-02 14:39:44.872:  dalvik.system.NativeStart.main(Native Method)
04-02 14:39:48.315:  dalvik.system.VMStack.getThreadStackTrace(Native Method)
04-02 14:39:48.315:  java.lang.Thread.getStackTrace(Thread.java:737)
04-02 14:39:48.315:  com.evotegra.aCoDriver.ACoDriverActivity.onPause(ACoDriverActivity.java:94)
04-02 14:39:48.315:  android.app.Activity.performPause(Activity.java:3851)
04-02 14:39:48.315:  android.app.Instrumentation.callActivityOnPause(Instrumentation.java:1191)
04-02 14:39:48.325:  android.app.ActivityThread.performPauseActivity(ActivityThread.java:2356)
04-02 14:39:48.335:  android.app.ActivityThread.performPauseActivity(ActivityThread.java:2326)
04-02 14:39:48.345:  android.app.ActivityThread.handlePauseActivity(ActivityThread.java:2306)
04-02 14:39:48.345:  android.app.ActivityThread.access$1700(ActivityThread.java:117)
04-02 14:39:48.345:  android.app.ActivityThread$H.handleMessage(ActivityThread.java:953)
04-02 14:39:48.355:  android.os.Handler.dispatchMessage(Handler.java:99)
04-02 14:39:48.355:  android.os.Looper.loop(Looper.java:130)
04-02 14:39:48.355:  android.app.ActivityThread.main(ActivityThread.java:3740)
04-02 14:39:48.355:  java.lang.reflect.Method.invokeNative(Native Method)
04-02 14:39:48.375:  java.lang.reflect.Method.invoke(Method.java:507)
04-02 14:39:48.375:  com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:880)
04-02 14:39:48.375:  com.android.internal.os.ZygoteInit.main(ZygoteInit.java:638)
04-02 14:39:48.385:  dalvik.system.NativeStart.main(Native Method) 
```

# qt - 信号槽在使用 QThread 时不起作用

> ID：15764703
> 
> 赞同：1
> 
> 时间：2013-04-02T12:56:25.177
> 
> 标签：qt, signals-slots, qthread

我正在使用 QT 框架。我一直在使用 SIGNAL-SLOT 一段时间。我喜欢。:-) 但是当我使用 QThread 时我无法让它工作。我总是使用“moveToThread(QThread ...)”函数创建新线程。有什么建议吗？:-)

错误信息是：

Object::connect: No such slot connection::acceptNewConnection(QString,int) in ..\MultiMITU600\mainwindow.cpp:14 Object::connect: (sender name: 'MainWindow')

我读过类似的问题，但这些问题没有连接到 QThread。

谢谢，大卫

已编辑：您要求提供源代码这是一个：

这是代码：

包含信号和新线程的主类：

主窗口标题：

```
class MainWindow : public QMainWindow
{

    …
    QThread cThread;              
    MyClass Connect;
    ...
    signals:

            void NewConnection(QString port,int current);
     …
}; 
```

上述类的构造函数：.cpp

```
{
    …
        Connect.moveToThread(&cThread1);
           cThread.start(); // start new thread
   ….
connect(this,SIGNAL(NewConnection(QString,int)),
            &Connect,SLOT(acceptNewConnection(QString,int))); //start measuring
…
} 
```

包含新线程和 SLOT Header 的类：

```
class MyClass: public QObject
{
           Q_OBJECT
….
   public slots:
            void acceptNewConnection(QString port, int current);
} 
```

以及上述类的 .cpp 文件：

```
void MyClass::acceptNewConnection(QString port, int current){
    qDebug() << "This part is not be reached";

 } 
```

最后，我在建立连接的类中使用了 emit：

```
void MainWindow::on_pushButton_3_clicked()
{
    …
emit NewConnection(port, 1); 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T13:32:16.350

```
class MyClass : public QObject
{
    Q_OBJECT
public:
    explicit MyClass(QObject *parent = 0);

public slots:
    void acceptConnection(QString port, int current) {
        qDebug() << "received data for port " << port;
    }    
};

class MainWindow : public QMainWindow
{
    Q_OBJECT

public:
    MainWindow(QWidget *parent = 0) : QMainWindow(parent) {
        myClass.moveToThread(&thread);
        thread.start();
        connect(this, SIGNAL(newConnection(QString,int)), &myClass, SLOT(acceptConnection(QString,int)));
        emit newConnection("test", 1234);
    }

signals:
    void newConnection(QString, int);

private:
    QThread thread;
    MyClass myClass;
}; 
```

输出： `received data for port "test"`

您的`void MainWindow::on_pushButton_3_clicked()`插槽是否连接到信号？

此外，为了代码的清晰和可读性，请保持既定的命名约定，并为对象实例和成员对象和方法使用小写字母。

# asp.net - 在 ReadAsAsync 方法中读取动态类型

> ID：15764704
> 
> 赞同：4
> 
> 时间：2013-04-02T12:56:29.427
> 
> 标签：asp.net, asp.net-mvc-4

我在我的 MVC 4 应用程序中使用 ASP.Net Web API 来执行各种操作。问题是我的 API 方法返回动态类型，而在 View 端我正在使用该方法`ReadAsAsync().Result`。现在我怎样才能在视图端获得我的 API 结果。

我的 API 代码如下：

```
public dynamic GetSum(int a,int b)
{ return a + b; } 
```

视图端代码如下：

```
HttpResponseMessage response = client.GetAsync(String.Format("/webApi/Common/GetSum?a=`{1}&b={2}", 1,1);`
if (response.IsSuccessStatusCode)
{
    dynamic temp = response.Content.ReadAsAsync<dynamic>().Result;
    return view(temp);
}

return view(); 
```

请帮助我，我陷入了这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-07-21T15:08:08.903

你可以`ExpandoObject`用来获取`dynamic`数据

```
dynamic temp = response.Content.ReadAsAsync<ExpandoObject>().Result; 
```

# azure - 从 Visual Studio 10 发布新的 Azure Web 角色时遇到问题

> ID：15764709
> 
> 赞同：1
> 
> 时间：2013-04-02T12:56:41.800
> 
> 标签：azure, azure-web-roles

我正在尝试通过 Visual Studio 10 中的“发布”设置创建 Web 角色的新实例。但是它似乎在发布过程中卡住了：

```
13:30:32 - Warning: There are package validation warnings.
13:30:32 - Preparing deployment for PHPService - 02/04/2013 13:30:11 with Subscription ID 'xxxxxxxxxx' using Service Management URL 'https://management.core.windows.net/'...
13:30:32 - Connecting...
13:30:38 - Uploading Certificates...
13:30:57 - Verifying storage account 'xxxxxxxxx'...
13:31:00 - Uploading Package...
13:31:57 - Updating...
13:33:07 - Instance 0 of role PHPWebRole is creating the virtual machine
13:33:08 - Created Deployment ID: xxxxxxxxxxxxx.
13:33:08 - Starting...
13:33:27 - Initializing...
13:33:27 - Instance 0 of role PHPWebRole is in an unknown state
13:34:01 - Instance 0 of role PHPWebRole is starting the virtual machine
13:34:39 - Instance 0 of role PHPWebRole is in an unknown state
13:35:14 - Instance 0 of role PHPWebRole is busy 
```

它卡在忙碌中，因此我无法使用我的网络角色。

为什么会发生这种情况，我该如何解决？

谢谢。

# objective-c - 共享实现意味着什么？

> ID：15764710
> 
> 赞同：1
> 
> 时间：2013-04-02T12:56:42.553
> 
> 标签：objective-c, cocoa, implementation, shared

正如标题所述，我希望了解共享实现意味着什么。更具体地说，我想知道它是**如何**工作的。我明白这些词的意思，但我不清楚它是如何工作的。

前任。“快速枚举实现在 Objective-C 运行时和 Foundation 框架之间共享。”

这是来自 Apple 的 Cocoa Fundamentals 文档。我正在阅读并遇到这条线，并试图了解这个过程。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T13:03:59.133

这基本上涵盖了一种有点矛盾的编程模式（在我看来，这是错误的）：Objective-C 语言、`libobjc`运行时库和 Foundation 框架没有严格分开。例如，一些基本的消息名称，如`retain`、`release`等，被硬编码到 Objective-C 运行时库中（例如，为了 ARC 将它们识别为特殊的内存管理相关消息），这就是快速枚举也是如此。

选择`countByEnumeratingWithState:objects:count:`器被编译器识别，并在`for (object in collection)`遇到语法时发出。然后是集合对象，该类根据运行时库和 ABI 对它的期望如何实现协议的这个硬连线消息，`NSFastEnumeration`更新它的返回值等。`count``objects`

由于历史原因，这三件事（语言/编译器、运行时库和 Foundation 框架）之间存在如此紧密的耦合，以至于这种硬编码方法是可用且现实的，但它也*严重违反*了语言分离和图书馆。我什至敢说这是一个**非常肮脏的hack。**

# facebook - 使用 Facebook 广告 API 时选择正确的身份验证方法

> ID：15764712
> 
> 赞同：0
> 
> 时间：2013-04-02T12:56:45.087
> 
> 标签：facebook, api, ads, facebook-login

我对 Facebook Ads API 非常陌生，因此非常感谢我可以在我的案例中使用的有关最佳实践的一些帮助或建议。

**情况：** 我们有多个客户在社交网站和搜索引擎（如 Facebook、LinkedId、Google Adwords、Bing 等）上运行广告活动。他们希望将所有活动的信息放在一个数据库中，并使用该数据库运行各种报告为了更好地管理他们的活动（将资金从一个活动转移到另一个活动并获得更好的结果）。所以基本上我们需要每天（或者我应该说每晚）同步。此外，我们需要在 Facebook 中标记添加，这些添加是通过我们的工具运行的活动的一部分（登录后也不会出现问题）。这是自动完成的。

这在许多平台上都不是问题——我们使用 Google 和 Microsoft API 连接到平台，每天读取所需数据或自动对 URL 进行一些更改。

**这个问题** 让我有点惊讶地发现，在 Facebook Ads API 中，唯一的身份验证方法是通过很快过期的令牌（长期令牌持续 60 天）。我想知道是否可以使用用户名和密码通过 API 进行身份验证或获取未过期的票证。原因 - 我们的大部分流程将在夜间运行，因此不可能与用户进行任何互动以获得新票。每 60 天请求一次许可似乎也不是一个选项，并且不再支持完全适合我们的 offline_access 权限，正如我从文档中正确理解的那样。

那么什么是身份验证选项？是否只有每 60 天要求用户重新确认我们的访问权限的可能性？是否有可能获得一次访问权限并使用它，直到用户撤销它，或者这是不可能的？

提前感谢您的回答和建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T12:25:55.450

Facebook 对广告 api 访问令牌做了例外处理。仍然可以获得永无止境的访问令牌。里德更多在这里[https://developers.facebook.com/roadmap/offline-access-removal](https://developers.facebook.com/roadmap/offline-access-removal)。[此外，您可以在https://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug)中查看访问令牌类型、到期日期和其他参数。我们的访问令牌显示为 Expires: Never。

# c++ - 运行进程命令行

> ID：15764716
> 
> 赞同：0
> 
> 时间：2013-04-02T12:57:06.067
> 
> 标签：c++, winapi, visual-c++

我正在尝试使用以下代码获取 Windows 中正在运行的进程的命令行：但我只得到这样的命令行`IDman.exe`：

*   `C:\Program Files (x86)\Internet Download Manager\IDMan.exe" /onboot`

但我知道还有许多其他带有命令行的进程。

告诉我我的代码有什么问题。

```
PVOID GetPebAddress(HANDLE ProcessHandle )
{
    _NtQueryInformationProcess NtQueryInformationProcess =
             (_NtQueryInformationProcess)GetProcAddress(
             GetModuleHandleA("ntdll.dll"), "NtQueryInformationProcess");
    PROCESS_BASIC_INFORMATION pbi;

    NtQueryInformationProcess(ProcessHandle, 0, &pbi, sizeof(pbi), NULL);

   return pbi.PebBaseAddress;
}

void get_process_cmd_line(DWORD pID)
     {

       HANDLE hProcess = OpenProcess(PROCESS_QUERY_INFORMATION |
                                     PROCESS_VM_READ |
                                     PROCESS_TERMINATE,
                                     FALSE, pID);
       PPEB ppeb = (PPEB) GetPebAddress(hProcess);
       PPEB ppebCopy = (PPEB)malloc(sizeof(PEB));
       BOOL result = ReadProcessMemory(hProcess,
                                       ppeb,
                                       ppebCopy,
                                       sizeof(PEB),
                                       NULL);
       if(!result){std::cout<<"Er. adress";return;}
       PRTL_USER_PROCESS_PARAMETERS pRtlProcParam = ppebCopy->ProcessParameters;
       PRTL_USER_PROCESS_PARAMETERS pRtlProcParamCopy =
          (PRTL_USER_PROCESS_PARAMETERS)malloc(sizeof(RTL_USER_PROCESS_PARAMETERS));
       result = ReadProcessMemory(hProcess,
                                  pRtlProcParam,
                                  pRtlProcParamCopy,
                                  sizeof(RTL_USER_PROCESS_PARAMETERS),
                                  NULL);
       if(!result){std::cout<<"Er. ";return;}
       PWSTR wBuffer = pRtlProcParamCopy->CommandLine.Buffer;
       USHORT len = pRtlProcParamCopy->CommandLine.Length;
       PWSTR wBufferCopy = (PWSTR)malloc(len);
       result = ReadProcessMemory(hProcess,
                                  wBuffer,
                                  wBufferCopy, 
                                  len,NULL);
       if(!result){std::cout<<"Er. cmdLine";return;}
       std::wcout<<wBufferCopy;
       return;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T17:51:33.317

目前尚不清楚您想要实现什么，以及为什么要这样。为什么不能使用[GetCommandLine](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683156%28v=vs.85%29.aspx)代替？

无论动机和方法如何，我建议您彻底检查每个函数调用是否失败（从 开始`OpenProcess`）。阅读有关特定函数在失败或成功时返回什么的文档。始终用于`GetLastError`确定确切原因（或 MSDN 中提到的任何其他相关功能）。

您是否正在运行或愿意将您的程序作为服务运行？如果没有，为什么不能一步一步调试呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:33:51.937

您当前的进程可能没有足够的权限来读取其他进程的内存。尝试以管理员身份运行该进程。

代码本身看起来基本没问题。

# delphi - Delphi 中的“本地”指令

> ID：15764719
> 
> 赞同：20
> 
> 时间：2013-04-02T12:57:09.997
> 
> 标签：delphi

我正坐在那里调试一些代码，我在 SysUtils.pas 中偶然发现了这一行：

```
procedure ConvertError(ResString: PResStringRec); local; 
```

local 关键字究竟做了什么？似乎 ConvertError 函数未在文件的接口部分声明，这只是说明该函数确实是本地的，还是除此之外使用该指令还有实际好处？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-02T13:18:21.923

它可以追溯到 Linux 编译器 Kylix。这是我在 Delphi 6 语言指南第 9-4 页中看到的内容：

> 将例程标记为不可导出的指令**local**是特定于平台的，在 Windows 编程中无效。
> 
> 在 Linux 上，**local**指令为编译到库中但不导出的例程提供了轻微的性能优化。该指令可以为独立的过程和函数指定，但不能为方法指定。**用local**声明的例程——例如。
> 
> ```
> function Contraband(I: Integer): Integer; local; 
> ```
> 
> — 不刷新 EBX 寄存器，因此
> 
> *   无法从库中导出。
> *   不能在单元的**接口**部分中声明。
> *   不能将其地址占用或分配给过程类型变量。
> *   如果它是纯汇编程序例程，则不能从另一个单元调用，除非*调用者*设置了 EBX。

# encryption - 使用 KeyczarTool 创建新的密钥集

> ID：15764720
> 
> 赞同：2
> 
> 时间：2013-04-02T12:57:15.637
> 
> 标签：encryption, filenotfoundexception, keyczar

按照[wiki](https://code.google.com/p/keyczar/wiki/KeyczarTool)中记录的文档，我正在尝试使用[KeyczarTool](https://code.google.com/p/keyczar/)生成新的密钥集。还有其他人遇到这个 FileNotFoundException 吗？KeyczarTool.jar 具有 rwx 权限并尝试通过 sudo 运行。

来自文档

```
Command Usage:
create --location=/path/to/keys --purpose=(crypt|sign) [--name="A name"] [--asymmetric=(dsa|rsa|ec)]
    Creates a new, empty key set in the given location.
    This key set must have a purpose of either "crypt" or "sign"
    and may optionally be given a name. The optional version 
    flag will generate a public key set of the given algorithm.
    The "dsa" and "ec" asymmetric values are valid only for sets
    with "sign" purpose. 
```

命令：

```
$ java -jar KeyczarTool-0.71f-060112.jar create --location=/keys  --purpose=crypt -name="first key" --asymmetric=rsa 
```

输出：

```
org.keyczar.exceptions.KeyczarException: Unable to write to: /keys/meta 
    at org.keyczar.KeyczarTool.create(KeyczarTool.java:366)
    at org.keyczar.KeyczarTool.main(KeyczarTool.java:123)
Caused by: java.io.FileNotFoundException: /keys/meta (No such file or directory)
    at java.io.FileOutputStream.open(Native Method)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:194)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:145)
    at org.keyczar.KeyczarTool.create(KeyczarTool.java:362)
    ... 1 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:18:08.793

在当前版本的 java keyczar 中，需要在运行程序之前首先创建目录“keys”。

这是一个已知问题[KeyczarTool 应该自动创建目录](https://code.google.com/p/keyczar/issues/detail?id=115)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T14:32:42.047

正如@jbtule 好心指出的那样，您必须首先创建密钥目录。但也包括 . 在斜线之前。

正确的工作命令是： $ java -jar KeyczarTool-0.71f-060112.jar create --location= **./keys** -- purpose=crypt -name="first key" --asymmetric=rsa

# php - 使用 Symfony2 调度异步 http 请求

> ID：15764721
> 
> 赞同：1
> 
> 时间：2013-04-02T12:57:17.213
> 
> 标签：php, design-patterns, symfony, curl, request

我正在创建一些看起来像 RSS 阅读器的东西。人们设置订阅（来自其他网站），我从他们那里获取内容。

我正在使用 symfony2，目前面临一个问题：如何使用 symfony2 将 http 请求异步发送到多个 url？我知道它可以使用 cURL 来完成，但我想认为已经有一个捆绑包。我检查了 krisswallsmith/buzz 和 sensio/buzz，但它们的文档记录很差，显然已经过时（sensio/buzz 仍然使用要安装的供应商脚本）并且可能不允许我异步发送请求 - 我不知道，正如我所说，它们的记录很差。

有捆绑吗？如果有，是哪一个？如果不是，我应该使用什么技术来实现我的目标？我应该创建一个单独的包来处理请求吗？我应该进入我的控制器并在我的动作中写一些丑陋的 cURL 东西吗？我应该创建一个服务来处理调度吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-10-22T10:02:45.640

我认为 Guzzel 是最著名的 PHP 库，它允许您发送同步和异步请求： [https ://docs.guzzlephp.org/en/stable/](https://docs.guzzlephp.org/en/stable/)

异步调用的示例代码：

```
$request = new \GuzzleHttp\Psr7\Request('GET', 'YOUR_URL');
$promise = $client->sendAsync($request)->then(function ($response) {
    echo 'I completed! ' . $response->getBody();
}); 
```

# highcharts - 打印按钮正在复制内容

> ID：15764722
> 
> 赞同：0
> 
> 时间：2013-04-02T12:57:18.820
> 
> 标签：highcharts

我正在创建带有导出功能的底部附加图例的图表。现在我得到了一个奇怪的效果：当打开打印上下文菜单并选择一个下载选项 (PNG/JPG/PDF/SVG) 时，图表底部的菜单会被复制。

```
var chart = new Highcharts.Chart({
chart: {
    renderTo: 'container'
},
xAxis: {
    categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
},

navigation: {
    buttonOptions: {
        y: 50
    }
},

series: [
      { data: [45.9, 50.2, 45.5, 198.4, 50.2] },
      { data: [68.5, 176.0, 50.1, 123.2, 25.9] },
      { data: [176.4, 50.2, 186.9, 56.6, 58.3] }
    ]
},

function(chart){
    $(chart.series).each(function(i, serie){
        $('<li style="color: ' + serie.color + '">' + serie.name + '</li>').click(function(){
            serie.visible ? serie.hide() : serie.show();
        }).appendTo('#legend')
    })
}); 
```

有什么想法可以避免这种情况吗？

你可以在这里试试：http: [//jsfiddle.net/pepesale/NTjsJ/4/](http://jsfiddle.net/pepesale/NTjsJ/4/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:06:07.450

看起来很奇怪。但是，您可以在附加之前检查 UL 是否为空。

```
function(chart){
    //Check the list is Empty before appending...
    if($('#legend').is(":empty")) { 
      $(chart.series).each(function(i, serie){
        $('<li style="color: '+serie.color+'">'+serie.name+' ('+ serie.symbol + ')</li>').click(function(){
            serie.visible ? serie.hide() : serie.show();
        }).appendTo('#legend');
      });
    }
}); 
```

# javascript - 更改选择选项时执行脚本

> ID：15764723
> 
> 赞同：0
> 
> 时间：2013-04-02T12:57:20.337
> 
> 标签：javascript, html, onchange

我有一个包含动态创建的 dorpdown 列表的 html 表单。下拉列表包含存储在我的 MySQL 数据库中的新闻通讯的名称。我想要下拉列表做的是：当我选择一个时事通讯时，另一个 php 脚本将激活，它将从我的数据库中的时事通讯中获取数据并将其写入 .txt 文件。我目前拥有的代码是：

下拉列表：

```
<?php
    echo "<select id=\"NieuwsbriefSelect\" name=\"show\">"; 
    echo "<option size =30 selected>Select</option>";
    if(mysql_num_rows($sql_result)) 
    { 
    while($row = mysql_fetch_assoc($sql_result)) 
    { 
    echo "<option value=\"$row[Titel]\">$row[Titel]</option>"; 
    } 

    } 
    else {
    echo "<option>No Names Present</option>";  
    } 
?> 
```

和写脚本：

```
<?php
$title = $_REQUEST["show"];
mysql_connect('localhost','root','root'); 
mysql_select_db('NAW') or die (mysql_error()); 
$strSQL = "SELECT Content from NAW.Mail where Titel = '$title' ";

$sql_result = mysql_query($strSQL); 

$row = mysql_fetch_assoc($sql_result);  

$file = 'nieuwsbrief.txt';

$current = $row["Content"];

file_put_contents($file, $current);
?> 
```

我不希望页面重定向到写入脚本，而只是执行它（我希望你得到这个^^）。这可以使用 HTML onChange 事件还是我必须使用 javascript？任何帮助都会很棒，如果您对我的代码有任何疑问，请在评论中提问！

***笔记！***
我知道我不应该使用 Mysql_* 并且我很容易受到 sql 注入的影响，但这不是重点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:00:50.067

您需要在 SELECT 选项上定义一个 onchange 事件，并且在这个 onchange 事件中，您可以重定向到带有所选项目的另一个页面，或者对另一个 PHP 脚本进行 AJAX 调用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:00:59.723

不幸的是，如果没有 JavaScript，您的要求是不可能的。**PHP**是一种服务器端语言，因此如果没有来自客户端浏览器的调用，就无法运行。您最好将**ajax**与 JavaScript onchange 事件结合使用。当更改事件发生时，向服务器发出 ajax 调用以使用所选选项运行脚本。这是在没有页面重新加载或重定向的情况下完成您所要求的唯一方法。

# c# - WP7 - 自动消失的 MessageBox

> ID：15764725
> 
> 赞同：0
> 
> 时间：2013-04-02T12:57:26.387
> 
> 标签：c#, silverlight, windows-phone-7, xaml

我需要通知用户删除项目我想显示这样的消息：“项目已删除”。此消息显示并在 3 秒后自动消失。但我可以用 MessageBox 解决它，因为它有按钮，我不想在该消息框中显示任何按钮。接下来我需要解决几秒钟后如何自动隐藏该消息。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:07:25.467

创建您自己的表单，该表单看起来像一个带有计时器的消息框，将表单显示为您希望它显示的秒数，然后关闭它。

# spring - Spring @Scheduled 一年只需要运行 4 次？

> ID：15764726
> 
> 赞同：1
> 
> 时间：2013-04-02T12:57:27.963
> 
> 标签：spring, spring-mvc

我正在使用 @Scheduled 注释实现 Spring 调度任务。这是情况。我每年只需要在特定日期运行 4 次任务，例如..

2 月 15 日，5 月 15 日，8 月 15 日，11 月 15 日。我该怎么做。

可以请一些人指出我的某个方向吗？提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T13:06:17.370

`@Scheduled(cron="0 0 15 2,5,8,11 *") public void runQuarterly() {...}`

将在指定日期的午夜运行

# ios - MPMoviePlayerController 自定义音量滑块问题

> ID：15764730
> 
> 赞同：0
> 
> 时间：2013-04-02T12:57:40.870
> 
> 标签：ios, mpmovieplayercontroller, avfoundation, avaudioplayer

我在视图中添加了**MPMoviePlayerController**。然后我添加了包含播放/暂停按钮、进度滑块、音量滑块、最大化按钮**的自定义视图。**

一切正常。

现在我想**根据设备音量更改音量滑块值。**

当设备音量发生变化时，我使用以下代码获取回调：

```
AVAudioSession *audioSession = [AVAudioSession sharedInstance];
[audioSession setCategory:AVAudioSessionCategoryPlayback error:nil]; 
```

我收到了两个回调： **UpBlock**（增加设备音量时）， **DownBlock**（减少设备音量时）

它**适用于 AVAudioPlayer**。但是当我**对 MPMoviePlayerController 使用相同时，当我更改设备音量时它会给我任何响应（如下情况）。**

1）当我**增加设备音量**时，有时**调用UpBlock**，有时**调用DownBlock**（当我降低设备音量时发生同样的情况）。2）当我**第一次增加音量时，UpBlock 被调用**，然后**突然（自动）DownBlock 也被调用。**

有谁能够帮助我？

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:45:33.003

搜索后我找到了我自己的问题的答案.. MPMoviePlayerController 有自己的（基本）音频会话，我们无法更改它.. 它会像我的苹果原生播放器 ieMPMoviePlayerController 一样工作

# cocos2d-iphone - cocos2d 2.1 和 HKTMXLayer 不透明度问题

> ID：15764740
> 
> 赞同：0
> 
> 时间：2013-04-02T12:58:03.373
> 
> 标签：cocos2d-iphone

我正在使用 coco2d 2.1 构建游戏，目前我开始使用 HKTMXTiledMap 扩展。

总的来说，这个扩展很棒，任何使用平铺地图（尤其是大地图）制作游戏的人都应该检查一下。但我需要能够在我的关卡过程中更改图层的不透明度。

我尝试过更改着色器和绘图方法，但一定有一些我遗漏的东西。

我将 HKTMXLayer.m 的第 97 行更改为: `self.shaderProgram = [[CCShaderCache sharedShaderCache] programForKey:kCCShader_PositionTextureColor];`，但随后图层显示为全黑。

有人对我有任何提示吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T17:11:28.337

不确定您的整体上下文，但同一类的绘制方法（第 465 行）仅设置“位置”属性：考虑到该类派生自“CCNode”，这是正常的。

您正在设置的着色器（通常用于精灵）需要一个顶点属性以及一个颜色属性。有关示例，请参见 CCSprite (draw) 中的代码。也许还有另一种方法可以满足您的需求（“为什么”要将 Node 派生类的着色器更改为通常用于 CCSprite/纹理的着色器）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T13:17:41.787

修复发布[在这里](http://www.cocos2d-iphone.org/forum/topic/17945/page/10?replies=273#post-461139)。

除了将着色器更改为 之外`kCCShader_PositionTextureColor`，还需要在绘制图层时传递颜色属性。

`glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);`

 ````
glVertexAttrib4f(kCCVertexAttrib_Color, color_.r/255., color_.g/255., color_.b/255., opacity_/255.); 
```` 

`glVertexAttribPointer(kCCVertexAttrib_TexCoords, 2, GL_FLOAT, GL_FALSE, 0, NULL);`

# neo4jclient - 如何在.net Neo4jClient 中的密码查询的返回子句中执行过滤器

> ID：15764743
> 
> 赞同：0
> 
> 时间：2013-04-02T12:58:21.500
> 
> 标签：neo4jclient

我无法弄清楚如何使用 neo4j 客户端中的 cypher linq Return 函数在 return 子句中放置过滤器。

我正在尝试进行这样的查询：

```
START Parents = node:app_fulltext('name:"City"'),
 MATCH Parents-[?:ChildOf]-Apps 
 WITH collect(Apps.Title) as myapps, collect(Parents.Name) as myparents
 RETURN myapps, filter(x in parents : not x in myapps) as myfilteredparents 
```

我试过从这样的 with 子句开始

```
.With("collect(Apps.Title) as myapps, collect(Parents.Name) as myparents")
.Return("myapps, filter(x in parents : not x in myapps) as myfilteredparents") 
```

但我无法将字符串传递给 Return 方法，如果我尝试将某种过滤器传递给 LINQ lambda，则会出现`The return expression that you have provided uses methods other than those defined by ICypherResultItem.`错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:19:16.533

现在，具有多个身份的复杂返回表达式在 Neo4jClient 中有点棘手。我对如何很好地支持他们持开放态度。语法是困难的部分。

这是在正确的轨道上：

```
.With("myapps, filter(x in parents : not x in myapps) as myfilteredparents")
.Return("myapps, filter(x in parents : not x in myapps) as myfilteredparents") 
```

但是，您要应用过滤器两次：一次在 中`WITH`，然后在`RETURN`.

使用该`WITH`子句将其展平为简单的身份（`myapps`，`myfilteredparents`），然后`RETURN`是那些。

这段代码未经测试，直接输入到答案窗口中，但是你想要的那种：

```
.With("myapps, filter(x in parents : not x in myapps) as myfilteredparents")
.Return((myapps, myfilteredparents) => new
{
    Apps = myapps.As<IEnumerable<string>>(),
    Parents = myfilteredparents.As<IEnumerable<Node<City>>>()
}) 
```

该`With`调用将数据塑造成一个简单的结果集。该`Return`调用描述了将其反序列化为的结构。

# xml - 应为开始标记，在 sitemap.xml 中未找到“<”- 不知道出了什么问题

> ID：15764748
> 
> 赞同：2
> 
> 时间：2013-04-02T12:58:35.577
> 
> 标签：xml, validation, sitemap, xml-validation

这是我网站的 sitemap.xml 的样子：

```
<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">

  <url>
    <loc>http://example.com/</loc>
    <lastmod>2013-04-02T12:45:31+00:00</lastmod>
    <changefreq>daily</changefreq>
    <priority>1</priority>
  </url>

  <url>
    <loc>http://example.com/2013/wordpress-customize-login-page/</loc>
    <lastmod>2013-03-01T12:06:00+00:00</lastmod>
    <changefreq>weekly</changefreq>
    <priority>0.8</priority>
  </url>

</urlset> 
```

这[是原始站点地图](http://aahank.com/sitemap.xml)。首先，我确定了[有效的 XML 标记](http://validator.w3.org/)，然后在[xmlcheck](http://www.xmlcheck.com/index.php)和[sitemapxml](http://sitemapxml.net/sitemap-validator.php)上检查了我的站点地图。

两个站点地图验证器给出了这个错误：

```
Fatal Error 4: Start tag expected, '<' not found in http://example.com/sitemap.xml on line 1 column 1 
```

在我看来，什么都没有。不知道我做错了什么。（谷歌搜索也没有帮助。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T13:53:18.527

问题必须与**服务器的某些设置有关**- 端口阻止/代理设置/安全设置。我将您未更改的站点地图文件复制到了我的[服务器](http://niphargus.info/martint/robi/sitemap.xml)，两个验证器都读取并验证了它。这就是我能告诉你的全部。但您可以肯定，问题不在于您的 XML 代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T18:07:28.530

**更新：**如评论中所述，有问题的站点地图验证器在解析压缩站点地图时遇到问题（在 OP 的情况下，Amazon S3 仅提供压缩文本响应）。

* * *

我现在在认为这是服务器问题的阵营中，但我有一些数据可以支持（所以我没有编辑其他答案）。这就是我所做的（我关于“更有效”的原始观点仍在下方）：我复制了您的文件（在浏览器中查看源代码）并创建了一个 sitemap.xml 并将其上传到我的 S3 存储桶（并确认所有这个问题中提到的验证器认为它是有效的）。然后我用来`WGET`获取您的站点地图和我复制的站点地图，这就是我发现的（用我的存储桶名称隐藏，`[myexamples3bucket.example]`但您可以看到它是一个 AWS IP 地址）：

```
:~# wget http://[myexamples3bucket.example]/original.xml
--2013-04-02 13:26:42--  http://static.gnld.com/original.xml
Resolving [myexamples3bucket.example]... 207.171.189.80
Connecting to [myexamples3bucket.example]|207.171.189.80|:80... connected.
HTTP request sent, awaiting response... 200 OK
Length: 4578 (4.5K) [text/xml]
Saving to: `original.xml'

100%[======================================>] 4,578       --.-K/s   in 0.002s

2013-04-02 13:26:42 (1.97 MB/s) - `original.xml' saved [4578/4578] 
```

然后我尝试获取您的站点地图：

```
:~# wget http://aahank.com/sitemap.xml
--2013-04-02 13:26:55--  http://aahank.com/sitemap.xml
Resolving aahank.com... 178.236.4.60
Connecting to aahank.com|178.236.4.60|:80... connected.
HTTP request sent, awaiting response... 200 OK
Length: 766 [application/xml]
Saving to: `sitemap.xml'

100%[======================================>] 766         --.-K/s   in 0s

2013-04-02 13:26:55 (144 MB/s) - `sitemap.xml' saved [766/766] 
```

这两个文件的内容非常不同。虽然“复制的”站点地图看起来完全符合您的预期，但您的原始站点地图如下所示：

```
^_ï¿½^H^@^@^@^@^@^@^CÍMï¿½Ú0^Pï¿½ï¿½ï¿½ï¿½^_^P×jï¿½ï¿½^O>,ï¿½ï¿½ï¿½ï¿½=ï¿½Jï¿½ï¿ï¿½^Rqï¿½ï¿½1ï¿½^XYï¿½Lnwï¿½ï¿½ï¿½^Rï¿½^Vï¿½l
                           ï¿½jO$+Uï¿½ï¿½ï¿½:zï¿½sï¿½iï¿½2Vï¿½Ëï¿½ï¿½ï¿½uï¿½]ï¿½ï¿½Þ8_;ï¿½ï¿½ï¿½ï¿½EcÑ9È[ï¿½Mï¿½ï¿½ï¿½ï¿½^BwJjhwï¿½ï¿½-ï¿½4^Z^\ZJï¿½ï¿½0I^Oï¿½0^Qï¿½!ï¿½ï¿½ï¿½9ï¿½ï¿½^^^]ï¿½1;^Nï¿½^]ï¿½ï¿½ï¿½ï¿½Çª^ZÌª^_ï¿½ï¿½ËªÚªB$AÉª^Mï¿½^DmHcT-
ï¿½Ns,ÂªAÚª^Zï¿½aï¿½Tï¿½XÄV5ï¿½ï¿½^[^^ï¿½ï¿½ï¿½ï¿½Aï¿½F9^KTpÆÖeï¿½AÔï¿½ï¿½ï¿½2È^_ï¿½$ 
```

这表明 AmazonS3 是罪魁祸首。我提供这个，以防其他人知道如何解决这个问题。祝你好运！

* * *

至于更有效，使用有效站点地图[的官方定义](http://www.sitemaps.org/protocol.html#validating)，我对您的站点地图进行了以下（小）更改，将其上传到我的 S3 存储桶并针对您链接到的两个站点进行了测试，并且它现在通过了：

```
<?xml version='1.0' encoding='UTF-8'?>
<urlset xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.sitemaps.org/schemas/sitemap/0.9 http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd"
        xmlns="http://www.sitemaps.org/schemas/sitemap/0.9"> 
```

其他一切都没有改变。这两个站点上的错误消息非常无用，但我添加的重要一点是`xmlns:xsi`应该`xsi:schemaLocation`通知验证器预期的格式。我认为这些是由爬虫假定的，但在两个链接服务的情况下，缺乏这些属性在技术上会使文档无效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-09T09:29:32.850

对我来说，问题是 UTF-16，切换到 UTF-8 并且它起作用了。

# java - 保存设置的实现

> ID：15764755
> 
> 赞同：4
> 
> 时间：2013-04-02T12:58:47.023
> 
> 标签：java, android, serialization, save

我正在android上写一种游戏。我想知道如何保存设置以免更新出现问题。例如我用序列化保存设置，我有类`GameChar`

```
public class GameChar implements Serializable{

  int health;
  int damage;

  Sword sword;
} 
```

但后来我决定为我的游戏角色添加价值盔甲，我改变了职业：

```
public class GameChar implements Serializable{

  int health;
  int damage;

  int armor;

  Sword sword;
} 
```

现在随着更新，我失去了所有进展，因为新课程`GameChar`与`GameChar`. 我有一个想法，其中键是我保存的值的名称，`Map<String, Object>`值是`Object`我想要的任何值（`Integer`，，或一些我的用户类`Float``Calendar``Sword`）。我将把它保存`Map`到文件中`Serialization`。

但是如果我改变我的一些用户类`Sword`，它将与我的用户类不同，`Map`并且我将再次失去更新进度。

也许有一些我想念的模式或技术使它更优雅。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T13:07:43.057

您是否注意到，在实施时`Serializable`，您被要求声明一个`static long`被调用的`serialVersionUID`？

此变量的目的是在反序列化时检测 Class 的旧版本。尝试`1`使用版本类从保存的数据中反序列化版本对象`2`将导致异常。

（你可以自己实现这个行为，如果你不使用 Java 的序列化工具，它只是一个数字和一个`if`）

一旦您检测到您保存的对象已过时，并且与当前的类定义不匹配，您就可以手动修复该问题。例如，如果您知道`int a;`在 version 中声明了一个新成员`2`，并且您选择了一个使用 version 序列化的对象`1`，您可以分配一个有意义的值，尽管在保存的信息中丢失了。

不幸的是，跟踪版本是您的工作。解决此问题的最简单方法是确保始终可以从旧版本实例化新版本而无需调整——例如，具有`null`有意义的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:39:46.280

“诀窍”是覆盖 readObject 方法并捕获在您读取 GameChar 的序列化先前版本时发生的 EOFException。在异常处理程序中，您可以为 Armor 然后分配一个默认值。由于这需要声明变量瞬态，您还需要覆盖 writeObject 方法。此示例不包含 Sword，如果 Sword 有不同版本（相同过程），它本身应该覆盖 readObject 和 writeObject 方法。如果版本超过 2 个，则应使用变量“版本”并根据该变量的值读取对象。

```
public class GameChar implements Serializable {

private static final long serialVersionUID = 12345L; // use serialver to determine UID
transient private int health;
transient private int damage;
transient private int armor;

private synchronized void writeObject(java.io.ObjectOutputStream s)
        throws IOException {
    s.writeInt(health);
    s.writeInt(damage);
    s.writeInt(armor);

}

private synchronized void readObject(java.io.ObjectInputStream s)
        throws IOException, ClassNotFoundException {
    health = s.readInt();
    damage = s.readInt();
    try {
        armor = s.readInt();
    } catch (EOFException eofex) {
        armor = 999; // default value
    }
}
} 
```

如果您使用这样的“版本”变量，readObject 方法可能如下所示：

```
private synchronized void readObject(java.io.ObjectInputStream s)
        throws IOException {
    version = s.readInt();
    health = s.readInt();
    damage = s.readInt();
    switch(version) {
        case 1: armor = 999; // default;
            break;
        case 2: armor = s.readInt();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T13:05:23.223

我认为你应该看看 SharedPreferences （这是一种地图） [http://developer.android.com/guide/topics/data/data-storage.html#pref](http://developer.android.com/guide/topics/data/data-storage.html#pref)

从您的示例类中，我将使用它并且根本不序列化该类，只需将每个单独的项目手动保存到 SharedPreferences 中，并且永远不会有任何序列化问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T13:07:33.837

本质上，您将在反序列化对象时检查对象的版本并将其替换为更新的版本。[检查此链接](http://www.ibm.com/developerworks/java/library/j-5things1/)

# jquery-mobile - 清除移动设备的 HTML5 Canvas 性能

> ID：15764759
> 
> 赞同：0
> 
> 时间：2013-04-02T12:59:07.893
> 
> 标签：jquery-mobile, mobile, html5-canvas, kineticjs

我在使用 HTML5 画布时遇到了一些大问题，因为我的应用程序在多个图层上绘制了很多形状（使用 KineticJS），然后我需要清除画布/所有图层以重绘大量不同的形状。

这在桌面上的浏览器中很好，但是由于画布负载，我假设在几次清除/重绘画布的迭代后，移动浏览器会崩溃。目前我正在从舞台上删除每一层并创建新的来清除/重绘，但也许清除每一层的每个形状会带来更好的性能？

有人可以指出我清除/重绘的最佳方式的正确方向，以便在移动设备上表现合理吗？

谢谢，贝基

# web-analytics - SiteCatalyst：新访客与重复访客插件查询

> ID：15764764
> 
> 赞同：0
> 
> 时间：2013-04-02T12:59:23.343
> 
> 标签：web-analytics, web-analytics-tools, adobe-analytics

我不是通过 cookie 来跟踪访问者，而是通过在所有浏览量上使用唯一访问者 ID 显式填充 s.visitorID 变量来跟踪访问者。

现在，我想获得新访客与重复访客报告。我知道使用 cookie 工作的 getNewRepeat 插件。

是否有用于 s.visitorID 跟踪的新访客和重复访客报告的插件？如果没有，我如何在非基于 cookie 的设置中获取新访客与重复访客报告？

请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:18:20.107

getNewRepeat 插件创建一个新的 cookie 只是为了跟踪该信息。它将与 cookie 或自定义访问者 ID 一起使用，因为它是完全独立的（另一个 cookie）。如果您的意思是您根本无法或不愿意使用 cookie，您将需要一种不同的机制来跟踪是否刚刚设置了访问者 ID（新访问者）或已经设置（返回访问者） - 模拟方式插件通常可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T22:59:58.023

当用户首次登录时，将 eVar 设置为“新建”。在后续登录时，将相同的 eVar 设置为“重复”。

# c# - 来自 Chrome 的流量始终在分析中显示为引荐

> ID：15764768
> 
> 赞同：0
> 
> 时间：2013-04-02T12:59:47.660
> 
> 标签：c#, asp.net, google-analytics

最近，我们的 ASP.NET 网站之一使用了一些旧的跟踪代码，即 UrchinTracker() 已开始将来自 Chrome 的所有点击显示为引荐而非直接流量。我做了一些少量的研究，找不到与我们完全相同的示例，并且更改站点不是一种选择，因此纠正错误就足够了。当客户从任何其他浏览器访问时，它不会发生。

# azure - 如何在 Windows 2008 Azure VM 上的 IIS 中创建子域？

> ID：15764769
> 
> 赞同：0
> 
> 时间：2013-04-02T12:59:48.380
> 
> 标签：azure, windows-server-2008-r2, azure-virtual-machine

我的行动

1.  在 IIS 中添加网站...并设置端口 81

2.  尝试浏览`http://localhost:81/`- 很好。

3.  将端点添加到 81 端口

4.  尝试浏览`http://myserver.cloudapp.net:81/`- 不好（net::ERR_CONNECTION_TIMED_OUT）。

为什么？

UPD：myserver.cloudapp.net:80 - 默认网站可见

myserver.cloudapp.net:81 - 我的第二个网站不可见

第二个站点绑定是

类型：http；端口：81；IP地址： *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:58:51.783

您是否[将 IIS 网站绑定到所有地址](http://blogs.technet.com/b/chrad/archive/2010/01/24/understanding-iis-bindings-websites-virtual-directories-and-lastly-application-pools.aspx)，而不仅仅是 localhost，还绑定到默认 (*)[主机标头](http://technet.microsoft.com/en-us/library/cc753195%28v=ws.10%29.aspx)？最终，您可能希望将`myserver.cloudapp.net`主机标头添加到站点绑定中。

**更新**

当然，您必须在本地 VM 防火墙设置上允许传入端口 81。

# iphone - 在 Xcode 中为 iphone 4 和 iphone 5 构建相同的应用程序

> ID：15764772
> 
> 赞同：-1
> 
> 时间：2013-04-02T12:59:57.690
> 
> 标签：iphone, ios, xcode, storyboard, iphone-4

我一直在为 iphone 4 和 iphone 5 构建应用程序进行大量研究。我已经发布了我发布的另一个问题的链接。 [https://stackoverflow.com/questions/15666780/deploying-my-app-for-both-the-iphone-4-and-iphone-5](https://stackoverflow.com/questions/15666780/deploying-my-app-for-both-the-iphone-4-and-iphone-5)

这是一个后续问题。我一直在考虑创建两个相同的应用程序。唯一的区别是为 iphone 4 设置一个，为 iphone 5 设置另一个。这是个好主意，苹果会接受这两个应用程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:12:23.857

这不是一个好主意。首先，Apple 不会允许这两个不同的应用程序，即使他们允许，也没有什么能阻止 iPhone 4 用户下载您的 iPhone 5 版本，反之亦然。处理大小差异的最佳方法是通过 nib /storyboard 或在单个应用程序中以编程方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:26:17.167

你必须阅读苹果给出的通知

以下是注意事项：

> 从 5 月 1 日开始，App Store 将不再接受访问 UDID 的新应用或应用更新。请更新您的应用程序和服务器以将用户与 iOS 6 中引入的供应商或广告标识符相关联
> 
> 从 5 月 1 日开始，必须为配备 Retina 显示屏的 iOS 设备构建提交到 App Store 的新应用程序和应用程序更新，并且 iPhone 应用程序还必须支持 iPhone 5 上的 4 英寸显示屏

因此，即使您为 iPhone4 和 5 上传相同的应用程序并获得成功，您也将被迫收回所有此类应用程序，否则苹果将在 5 月 1 日拒绝所有这些应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T13:13:34.650

从 5 月 1 日起，Apple 将拒绝所有不支持 4" 的应用程序，因此这将不起作用。

# image - 如何在图像中获取 div X 和 Y（左上角和右下角）

> ID：15764779
> 
> 赞同：0
> 
> 时间：2013-04-02T13:00:22.770
> 
> 标签：image, html, resize, position

这正是我想要做的。

我有一张里面有方形元素的图像。当我单击这些元素的左上角和右下角时，它们被带有边框的 div 包围。然后，我具有拖动和调整这些 div 大小的功能（一旦通过两次单击创建它们）。我希望能够在文本框中记录这些 div 调整大小的坐标。例如，如果图像的高度=700，宽度=500。然后，如果我在其中创建一个方形 div，坐标为左上角（x=190，y=150）和右下角（x=290，y=250）。然后，如果我在图像周围拖动这个 div，我希望这些坐标相应地改变。如果我调整它的大小，也会发生同样的事情。

在这里，我在网站中添加了代码。笑声.free.bg/imagemapping/Img1.html 您需要做的是单击其中一个零食包的左上角和右下角。然后你会在右边看到一个带有这个绿色边框 div 坐标的框。我希望在拖动或调整此 div 大小时更改这些坐标。您可以在页面的源代码中看到代码。

提前非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:26:41.220

可以通过 jQuery 将函数绑定到 resize 事件。例如，你的 kiroid 有一类 ui-resizable。你可以使用类似的东西：

```
$('.ui-resizable').resize(function() {
    // refresh your coords here from $('kiroid').css maby?
}) 
```

# javascript - 我应该在哪里展平 Backbone 中收集的项目数组？

> ID：15764780
> 
> 赞同：0
> 
> 时间：2013-04-02T13:00:24.397
> 
> 标签：javascript, json, backbone.js, collections, fetch

我`stories.json`有：

```
[
    {
      id: '1',
      project_id: '2',
      current_state: 'finished',
      description: 'Description 1'
    },
    {
      id: '2',
      project_id: '2',
      current_state: 'finished',
      description: 'Description 2'
    },
] 
```

这是我的 Backbone 应用程序示例：

```
(function($){
    var Item = Backbone.Model.extend({
    defaults: {
      id: '1',
      project_id: '2',
      current_state: 'finished',
      description: 'Description'
    }
  });  

  var List = Backbone.Collection.extend({
    url: 'stories.json',
    model: Item
  });

  var ListView = Backbone.View.extend({
    el: $('body'),
    events: {},

    initialize: function(){
      _.bindAll(this, 'render', 'appendItem'); // remember: every function that uses 'this' as the current object should be in here

      this.collection = new List();
      this.collection.fetch();

      this.render();      
    },

    render: function(){
        var self = this;      
      $(this.el).append("<ul></ul>");
      console.log(this.collection)

      _(this.collection.models).each(function(item){ // in case collection is not empty
        self.appendItem(item);
      }, this);
    },

    appendItem: function(item){
      $('ul', this.el).append("<li>"+ "ID: " +item.get('id')+"  "+item.get('description')+"</li>");
    }
  });

  var listView = new ListView();
})(jQuery); 
```

我应该在哪里以及如何展平 Backbone 中的 stories.json 数组以获取 List 集合？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:00:49.170

```
var ListView = Backbone.View.extend({
    ...
    initialize: function() {
        this.collection.on('reset', this.render, this);
    }
    ...
});

var // create collection
    list = new List(),
    // create view
    listView = new ListView({
        el: $('body'),
        collection: list
    });

list.fetch(); 
```

# visual-c++ - 如何使用 opencv 和 vs2012 摆脱 LNK2019 未解决的外部符号错误

> ID：15764782
> 
> 赞同：1
> 
> 时间：2013-04-02T13:00:29.613
> 
> 标签：visual-c++, opencv, visual-studio-2012, lnk2019

我是一名 Visual Basic 程序员，试图使用我发现的一些使用 OpenCV 的源代码来启动和运行 Visual C++。我对 C++ 完全没有经验。我遇到了未解决的外部符号错误，我花了几个小时阅读我可以在这里找到的每一篇关于它的文章，每个答案都是......“不要将 x86 与 x64 库链接，反之亦然”或“添加 x对首选项->链接器的引用”或“将您的 lib/dll 文件添加到项目文件夹，然后将它们添加到您的解决方案”或“显然您没有将库添加到您的链接器”。

我已经完成了以下所有操作，但它没有工作......

1）我在项目->首选项->链接器->常规中的“附加库目录”中添加了“c:\opencv\build\x64\vc11\staticlib;%(AdditionalLibraryDirectories)”。一点帮助都没有。

2）我用 x86 目录尝试了上述方法，但没有帮助。因此，它是 x64 / x86 问题的理论似乎不是答案。

3) I added "opencv_calib3d244d.lib;opencv_contrib244d.lib;opencv_core244d.lib;opencv_features2d244d.lib;opencv_flann244d.lib;opencv_gpu244d.lib;opencv_haartraining_engined.lib;opencv_highgui244d.lib;opencv_imgproc244d.lib;opencv_legacy244d.lib;opencv_ml244d.lib;opencv_nonfree244d .lib;opencv_objdetect244d.lib;opencv_photo244d.lib;opencv_stitching244d.lib;opencv_ts244d.lib;opencv_video244d.lib;opencv_videostab244d.lib;%(AdditionalDependencies)”到我的项目->首选项->链接器->输入，用于调试（活动） . 没有帮助。

4）我用“lib”目录而不是“staticlib”目录尝试了上述方法。一点帮助都没有。

5) 我尝试将所有调试版本的 *.lib 文件从 lib 目录复制到我的项目文件夹中，然后 Project->Add->Existing Item 将它们添加到我的项目中。没有帮助。

6）我在我的项目->首选项->C/C++->常规->附加包含目录中添加了“c:\opencv\build\include;%(AdditionalIncludeDirectories)”。没有帮助。

它似乎不是这些东西中的任何一个。有谁知道这个错误的解决方案不涉及我已经尝试过的任何这些事情？

以下是我遇到的一些错误：

错误 16 错误 LNK2019：未解析的外部符号 _cvCreateImage 在函数“struct _IplImage * __cdecl loadFloatImage(char const *)”中引用 (?loadFloatImage@@YAPAU_IplImage@@PBD@Z) C:\dev\CPP_console\CPP_console\FeaturesMain.obj CPP_console 错误17 错误 LNK2001：无法解析的外部符号 _cvCreateImage C:\dev\CPP_console\CPP_console\TextDetection.obj CPP_console 错误 18 错误 LNK2019：无法解析的外部符号 _cvReleaseImage 在函数“struct _IplImage * __cdecl loadFloatImage(char const *)”(?loadFloatImage@@ YAPAU_IplImage@@PBD@Z) C:\dev\CPP_console\CPP_console\FeaturesMain.obj CPP_console

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T15:03:41.077

我找到了解决方案。VS2012 出现故障。我*以为*我的项目设置为 x64，因为当我单击构建 -> 配置管理器 -> 平台时，除了“Win32”和“编辑”之外没有其他平台选项。当我点击“编辑”时，它说平台是 x64，但它已经从“Win32”复制了设置。这似乎是VS2012中的一个小故障。事实上，我并没有编辑当前平台，即使我点击了“编辑”按钮。相反，它正在创建一个新平台。但是因为我点击了编辑按钮，所以我认为它告诉我我的平台是 x64，因为这是它选择的。但是不，它正在创建一个新平台……而且它真的不应该说该项目可以是 x64，但从 Win32 复制设置！无论如何，VS2012 中似乎存在多个故障。所以要解决我的问题，我必须单击“编辑”链接，并告诉它从“”而不是从 Win32 复制设置（空白是唯一的其他选项）。这创建了一个名为 x64 的新平台选项，并将其更改为显示我的平台现在是 x64。此外，这样做会神奇地使平台下拉菜单中的“编辑”按钮旁边出现一个名为“新建”的按钮，并且“编辑”按钮不再像新按钮一样（它不再提供“复制”选项设置来自*_* _”。但是“新建”按钮仍然允许您创建 x64 平台，但从 Win32 复制设置，这很愚蠢。但至少现在当我单击编辑时，它实际上更像是一个编辑按钮。VS2012在这个菜单区域有错误。无论如何，当我将它完全更改为 x64 时，我所有的链接错误都消失了，因为我使用的是 x64 版本的 OpenCV。如果其他人使用的是 x64 版本的 OpenCV：确保你的“平台" 说 x64，而不是 Win32，否则它会给你的 LNK 错误。

# javascript - 在 webgl 中调试 GLSL 代码

> ID：15764785
> 
> 赞同：20
> 
> 时间：2013-04-02T13:00:43.693
> 
> 标签：javascript, three.js, glsl, webgl

是否可以在与 webgl 一起使用时调试 GLSL 代码或从 glsl 代码中打印变量值？three.js 或 scene.js 是否包含任何此类功能？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-03T17:32:52.883

并不真地，

我通常调试 GLSL 的方式是输出颜色。因此，例如，给定 2 个着色器，例如

```
// vertex shader
uniform mat4 worldViewProjection;
uniform vec3 lightWorldPos;
uniform mat4 world;
uniform mat4 viewInverse;
uniform mat4 worldInverseTranspose;
attribute vec4 position;
attribute vec3 normal;
attribute vec2 texCoord;
varying vec4 v_position;
varying vec2 v_texCoord;
varying vec3 v_normal;
varying vec3 v_surfaceToLight;
varying vec3 v_surfaceToView;
void main() {
  v_texCoord = texCoord;
  v_position = (worldViewProjection * position);
  v_normal = (worldInverseTranspose * vec4(normal, 0)).xyz;
  v_surfaceToLight = lightWorldPos - (world * position).xyz;
  v_surfaceToView = (viewInverse[3] - (world * position)).xyz;
  gl_Position = v_position;
}

// fragment-shader    
precision highp float;

uniform vec4 colorMult;
varying vec4 v_position;
varying vec2 v_texCoord;
varying vec3 v_normal;
varying vec3 v_surfaceToLight;
varying vec3 v_surfaceToView;

uniform sampler2D diffuseSampler;
uniform vec4 specular;
uniform sampler2D bumpSampler;
uniform float shininess;
uniform float specularFactor;

vec4 lit(float l ,float h, float m) {
  return vec4(1.0,
              max(l, 0.0),
              (l > 0.0) ? pow(max(0.0, h), m) : 0.0,
              1.0);
}
void main() {
  vec4 diffuse = texture2D(diffuseSampler, v_texCoord) * colorMult;
  vec3 normal = normalize(v_normal);
  vec3 surfaceToLight = normalize(v_surfaceToLight);
  vec3 surfaceToView = normalize(v_surfaceToView);
  vec3 halfVector = normalize(surfaceToLight + surfaceToView);
  vec4 litR = lit(dot(normal, surfaceToLight),
                    dot(normal, halfVector), shininess);
  gl_FragColor = vec4((
  vec4(1,1,1,1) * (diffuse * litR.y
                        + specular * litR.z * specularFactor)).rgb,
      diffuse.a);
} 
```

如果我没有在屏幕上看到任何东西，我会首先通过在末尾添加一行来更改片段着色器

```
gl_FragColor = vec4(1,0,0,1);  // draw red 
```

如果我开始看到我的几何图形，那么我就会知道问题可能出在片段着色器中。我可以通过这样做来检查我的法线

```
gl_FragColor = vec4(v_normal * 0.5 + 0.5, 1); 
```

如果法线看起来没问题，我可能会检查紫外线坐标

```
gl_FragColor = vec4(v_texCoord, 0, 1); 
```

ETC...

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-02T13:45:48.323

为此，您可以尝试使用[WebGL-Inspector 。](http://benvanik.github.com/WebGL-Inspector/)

# loops - 如何对循环中的值求和

> ID：15764791
> 
> 赞同：0
> 
> 时间：2013-04-02T13:00:53.547
> 
> 标签：loops, vbscript

如何在这个现有的 vbs 循环中求和值？我想创建一个函数，对 len(sLine) 值求和（相加）并输出一行 oOutStream.WriteLine mySum

我不知道 1) 如何编写函数和 2) 是否将其嵌套在现有循环中或创建新循环。

```
Function MyOp()
Dim nLine, sLine, nCount

nCount = 1
Do Until oInStream.AtEndOfStream
nLine = oInStream.Line
sLine = oInStream.ReadLine

nCount = nCount +1
oOutStream.WriteLine "<p id='" & Pad(nLine, 2, 0) & "'>" & sLine & "</p>"

Loop
MyOp = nCount

End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:36:26.603

如果我做对了那...

```
Function MyOp()
    Dim nLine, sLine, nCount, nLen

    nCount = 1
    Do Until oInStream.AtEndOfStream
        nLine = oInStream.Line
        sLine = oInStream.ReadLine
        nLen  = nLen + Len(sLine)

        nCount = nCount +1
        oOutStream.WriteLine "<p id='" & Pad(nLine, 2, 0) & "'>" & sLine & "</p>"
    Loop
    oOutStream.WriteLine nLen
    MyOp = nCount
End Function 
```

但是您可以使用`File.Size`属性获得相同的结果，而无需计数。

```
Set fso = CreateObject("Scripting.FileSystemObject")
fLen    = fso.GetFile("file.ext").Size 
```

**PS**自我更正：`ReadLine`删除尾随换行符（Chr（13）和Chr（10）），因此您获得的总和`Len(string)`将小于`Size`财产。

至于功能，我用文本文件对其进行了测试，不知道如何在`TextStream`没有保存文件的情况下从 EditPlus 中获取对象。如果不是秘密，你是怎么做到的？

# ember.js - 跨视图访问属性

> ID：15764794
> 
> 赞同：1
> 
> 时间：2013-04-02T13:00:56.167
> 
> 标签：ember.js, handlebars.js

从视图中的控制器访问和更改属性的有效方法是什么？我在视图中有多个视图。我必须更改`parentView`不引用的属性`this.get('parentView.property')`，因为我经常重用视图并且层次结构发生了很大变化。

如何在 ember.js 中有效地跨视图维护变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:49:54.570

如果视图的属性没有绑定为模型，我遵循的一种方法是在视图之间使用公共控制器并观察控制器的属性。

例如。

```
 App.TestController = Ember.Controller.extend({
        commonProperty: "Val1"
    });

    App.View1 = Ember.View.extend({
        ObserverCommonProperty : function() {
             //runs code 
        }.observes('controller.commonProperty')
    });
    App.View2 = Ember.View.extend({
        didInsertElement: function() {
            this.get('controller').set('commonProperty',"Val2");
        }
    }); 
```

这样你就不会担心其他视图对象的存在，也不会破坏任何 MVC 规则

# android - Android - aChartEngine getCurrentSeriesAndPoint() 不适用于断开连接的图形

> ID：15764800
> 
> 赞同：2
> 
> 时间：2013-04-02T13:01:03.393
> 
> 标签：android, graph, achartengine

我正在使用 aChartEngine 和风速将风向绘制为 TimeChartView 中的 xyseries（风速是使用左 y 轴的时间序列，winddir 是使用右 y 轴的 XYSeries）。

我面临的问题是，当 windirection 向北经过时，我的值在 0 到 360 之间移动，在我的图表中创建了一条难看的垂直线。我希望如果值增加到 360 以上，图形刚刚被剪裁并恢复为 0。通过过滤值并在我的 XYSeries 中插入 MathHelper.NULL_VALUE（参见代码），我设法得到了我想要的图形

```
 double windDirTemp=0; 
```

...

```
 if (Math.abs(windDirValues[k] - windDirTemp)>300 ){
                windDirTemp = windDirValues[k];     
                windDirSeries.add(convertedDateinDouble[k], MathHelper.NULL_VALUE );                
            }
            else{
                windDirSeries.add(convertedDateinDouble[k], windDirValues[k]);
            } 
```

现在的问题是我的 OnClickListener 不再工作了。该应用程序崩溃

```
SeriesSelection seriesSelection = mChart.getCurrentSeriesAndPoint(); 
```

我假设将空值插入我的系列会使 getCurrentSeriesAndPoint 无法获取 SeriesIndex 并且可能与不再连接的图形有关。

我将不胜感激任何帮助解决这个问题。我可以以不同的方式过滤值吗？我可以尝试 getCurrentSeriesAndPoint() 的替代方法吗？

谢谢，克里斯蒂安

编辑：

我正在使用 achartengine-1.1.0-rc2

我的 OneClickListener：

```
/**
         * Setting a click event listener for the graph
         */
        mChart.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                Format formatter = new SimpleDateFormat("HH:mm");

                SeriesSelection seriesSelection = mChart.getCurrentSeriesAndPoint();                

                if (seriesSelection != null) {
                    int seriesIndex = seriesSelection.getSeriesIndex();
                    String selectedSeries = "Vindhastighet";
                    String unit = " m/s";

                    if (seriesIndex == 0)
                        selectedSeries = "Vindhastigheten";
                    else if (seriesIndex == 1)
                        selectedSeries = "Vindkast";
                    else {
                        selectedSeries = "Vindretningen";
                        unit = "\u00B0";
                    }

                    // Getting the clicked Date ( x value )
                    long clickedDateSeconds = (long) seriesSelection
                            .getXValue();
                    Date clickedDate = new Date(clickedDateSeconds);
                    String strDate = formatter.format(clickedDate);

                    // Getting the y value
                    int amount = (int) seriesSelection.getValue();

                    // Displaying Toast Message
                    Toast.makeText(
                            getBaseContext(),
                            selectedSeries + " kl " + strDate + " var "
                                    + amount + unit, Toast.LENGTH_LONG)
                            .show();
                }                   
            }
        }); 
```

我的日志猫：

> 04-02 16:05:18.575：E/AndroidRuntime(29182)：致命异常：主要 04-02 16:05:18.575：E/AndroidRuntime(29182)：java.lang.NullPointerException 04-02 16:05:18.575： E/AndroidRuntime(29182): 在 org.achartengine.chart.XYChart.getSeriesAndPointForScreenCoordinate(XYChart.java:845) 04-02 16:05:18.575: E/AndroidRuntime(29182): 在 org.achartengine.GraphicalView.getCurrentSeriesAndPoint(GraphicalView .java:137) 04-02 16:05:18.575: E/AndroidRuntime(29182): at com.example.hellogooglemaps.WindChartActivity$1.onClick(WindChartActivity.java:116) 04-02 16:05:18.575: E/ AndroidRuntime(29182): 在 android.view.View.performClick(View.java:4211) 04-02 16:05:18.575: E/AndroidRuntime(29182): 在 android.view.View$PerformClick.run(View.java :17267) 04-02 16:05:18.575: E/AndroidRuntime(29182): 在 android.os.Handler.handleCallback(Handler.java:615) 04-02 16:05:18.575: E/AndroidRuntime(29182): 在 android.os.Handler.dispatchMessage(Handler.java:92) 04-02 16:05:18.575: E/AndroidRuntime(29182) : 在 android.os.Looper.loop(Looper.java:137) 04-02 16:05:18.575: E/AndroidRuntime(29182): 在 android.app.ActivityThread.main(ActivityThread.java:4898) 04-02 16:05:18.575: E/AndroidRuntime(29182): 在 java.lang.reflect.Method.invokeNative(Native Method) 04-02 16:05:18.575: E/AndroidRuntime(29182): 在 java.lang.reflect。 Method.invoke(Method.java:511) 04-02 16:05:18.575: E/AndroidRuntime(29182): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006) 04-02 16:05:18.575: E/AndroidRuntime(29182): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773) 04-02 16:05:18.575: E/AndroidRuntime(29182): 在 dalvik .system.NativeStart。主要（本机方法）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T17:45:21.320

这是 AChartEngine 中的一个错误，现在已修复。[您可以在此处](https://repository-achartengine.forge.cloudbees.com/snapshot/org/achartengine/achartengine/1.1.0/)下载包含此修复程序的版本。

# spring - 弹簧可调用不起作用

> ID：15764801
> 
> 赞同：0
> 
> 时间：2013-04-02T13:01:06.213
> 
> 标签：spring, spring-mvc

我正在尝试使用 spring 实现长轮询，这是示例代码

这是我的异步方法的代码：

```
@RequestMapping(value= "failed.html" ,method = RequestMethod.POST)
protected  Callable<String> callable(@ModelAttribute("user") Message user1, BindingResult bindingResult){
    return new Callable<String>() {
        @Override
        public String call() throws Exception {
            System.out.println("call--------->");
            Thread.sleep(2000);
            return "success";
        }
    };
    } 
```

这是 callablecontroller-servlet.xml：

```
<beans 
   xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  xmlns:p="http://www.springframework.org/schema/p"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:mvc="http://www.springframework.org/schema/mvc"
xsi:schemaLocation="
http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context-3.2.xsd
http://www.springframework.org/schema/mvc
http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd">

<bean id= "viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix"><value></value></property>
    <property name="suffix" value=".jsp"></property>
</bean>     

<bean id="callable" class="spring.controller.CallableController">
</bean> 
```

然而，“call------------”永远不会在控制台中打印出来，它会显示 failed.jsp 而不是 success.jsp。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T19:04:30.427

我的第一个怀疑是关于可调用方法的参数。尝试按如下方式将 ExceptionHandler 添加到您的控制器类中，以了解发生了什么问题：

```
@ExceptionHandler
@ResponseBody
public String handleException(IllegalStateException ex) {
  System.out.println("Exception --------->");
  return "Handled exception: " + ex.getMessage();
} 
```

# ios - UITableView - 始终选择中间的行

> ID：15764802
> 
> 赞同：2
> 
> 时间：2013-04-02T13:01:13.207
> 
> 标签：ios, objective-c, cocoa-touch, uitableview

我有`UITableView`超过 50 行，但一次只显示 5 行。如何强制始终选择中间行？例如显示 2、3、4、5、6，将选择 4。用户滚动 -> 14,15,16,17,18 ，将选择 16 等'。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T16:57:24.803

这种方法对我来说效果很好。我有一个表格视图，一次显示 5 行，但是当我记录 visibleRows 时，我总是得到 7 的计数，所以我得到了这 7 行的索引路径，并选择了中间的路径（索引 3）：

```
-(void)scrollViewDidScroll:(UIScrollView *)scrollView {
    NSArray *vis = self.tableView.indexPathsForVisibleRows;
    if (vis.count %2 == 1) {
        [self.tableView selectRowAtIndexPath:vis[3] animated:NO scrollPosition:UITableViewScrollPositionNone];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:03:06.410

使用作为协议`tableView:willDisplayCell:forRowAtIndexPath:`一部分的方法。`UITableViewDelegate`

在这里您可以检查 indexPath.row 的值，如果它在您指定的范围内，请使用 cell.selected。

更多信息：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html)

尽管我建议您维护是否应在数据源中选择单元格，而不是挂钩到单元格的位置，但这样您可以检查数据源是否应选择单元格，而不是强迫自己使用特定的索引单元格对于特定的事物。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T13:41:06.753

我认为目的是 UIPickerView 自定义，

看看[这里](http://www.cocoacontrols.com/search?utf8=%E2%9C%93&q=picker)，这个[问题](https://stackoverflow.com/questions/11426219/custom-uipickerview-with-custom-background-color)会帮助你

# excel - 如何快速确定字符串的一部分是否与另一个字符串匹配？

> ID：15764805
> 
> 赞同：2
> 
> 时间：2013-04-02T13:01:44.810
> 
> 标签：excel, excel-2010, vba

我的地址列表有时在需要删除的街道后缀末尾有垃圾。例如 Yada Yada St. apt#12 需要成为 Yada Yada St. 现在，我从[这里](https://www.usps.com/send/official-abbreviations.htm#T)找到了街道后缀及其变体的列表。我需要在 excel 中完成这一切，所以我将 3 列后缀列表（第 1-3 列分别是主要街道后缀、常用街道后缀或缩写以及邮政服务标准后缀缩写）放入标有 SuffixList 的工作表中，然后我把将地址列表放入表格 1 中，这是代码所在的位置。

我创建了一个代码来检查每个地址与每个后缀变体（SuffixList 上的第 2 列），在我检查的后缀前后使用空格，以确保我没有捕捉到任何街道名称，只是街道后缀。我也有。并且，代码中正在检查的变体如下所示。我现在使用的代码可以工作，只是时间太长了，我正在寻找一种更快的方法。

此外，每当我找到匹配项时，我都会将使用的街道后缀替换为正式正确的后缀（后缀列表上的第 3 列）。

当前代码：

```
Sub JunkRemover()
    'Link to an official abbreviations list
    'https://www.usps.com/send/official-abbreviations.htm

    Dim Orig As String
    Dim NewAddr As String
    Dim x As Integer 'Row Reference
    Dim i As Long 'Address List Iterator
    Dim y As Integer 'SuffixList Iterator
    Dim ChangeCount As Integer
    'WARNING!!!!!!!!!!!!
    'This code assumes address field is in column A and that the address column has no blanks.
    'If that is not the case, replace 1 for the appropriate number for x
    'a=1, b=2, c=3, d=4 etc.
    x = 1

    ChangeCount = 0
    i = 2
    While Cells(i, x) <> ""
        Orig = UCase(Cells(i, x))
        y = 2
        While Sheets("SuffixList").Cells(y, 2) <> ""

            If InStr(1, Orig, " " & UCase(Sheets("SuffixList").Cells(y, 2) & " ")) > 1 Then
               NewAddr = Left(Orig, InStr(1, Orig, " " & UCase(Sheets("SuffixList").Cells(y, 3) & " ")) + Len(Sheets("SuffixList").Cells(y, 3)))
               Cells(i, x) = NewAddr
               ChangeCount = ChangeCount + 1
            ElseIf InStr(1, Orig, " " & UCase(Sheets("SuffixList").Cells(y, 2) & ". ")) > 1 Then
               NewAddr = Left(Orig, InStr(1, Orig, " " & UCase(Sheets("SuffixList").Cells(y, 3) & ". ")) + Len(Sheets("SuffixList").Cells(y, 3)))
               Cells(i, x) = NewAddr
               ChangeCount = ChangeCount + 1
            ElseIf InStr(1, Orig, " " & UCase(Sheets("SuffixList").Cells(y, 2) & ", ")) > 1 Then
               NewAddr = Left(Orig, InStr(1, Orig, " " & UCase(Sheets("SuffixList").Cells(y, 3) & ", ")) + Len(Sheets("SuffixList").Cells(y, 3)))
               Cells(i, x) = NewAddr
               ChangeCount = ChangeCount + 1
            End If
        y = y + 1
        Wend

    i = i + 1
    Wend

    MsgBox ChangeCount & " Rows Changed", vbOKOnly

End Sub 
```

进一步的例子：

```
OrigAddress                   NewAddress  
4000 NO MAIN ST 1             4000 NO MAIN ST    
135 ALDEN ST APT3             135 ALDEN ST   
1820 HIGHLAND AVE             1820 HIGHLAND AVE   
4901 NO MAIN ST. REAR         4901 NO MAIN ST   
1820 HIGHLAND AVE, 1          1820 HIGHLAND AVE 
```

最终代码用户波特的回答：

```
Sub JunkRemover2()
    'Link to an official abbreviations list
    'https://www.usps.com/send/official-abbreviations.htm

    Dim Orig As String
    Dim NewAddr As String
    Dim x As Integer 'Row Reference
    Dim i As Long 'Address List Iterator
    Dim y As Integer 'SuffixList Iterator
    Dim ChangeCount As Integer
    Dim PauseTime, Start, Finish, TotalTime As Double
    Dim slRows As Double
    Dim slCols As Integer
    Dim slRowsAddr As Double
    Dim slColsAddr As Integer

    'WARNING!!!!!!!!!!!!
    'This code assumes address field is in column A and that the address column has no blanks.
    'If that is not the case, replace 1 for the appropriate number for x
    'a=1, b=2, c=3, d=4 etc.
    x = 1

    ChangeCount = 0

    With Sheets("SuffixList")
      'i am using Column 1 to find out how many rows there are(change it if you want)
       slRows = Sheets("SuffixList").Cells(Rows.Count, 1).End(xlUp).Row
       slCols = Sheets("SuffixList").Cells(1, Columns.Count).End(xlToLeft).Column
       suffixData = Sheets("SuffixList").Range(Sheets("SuffixList").Cells(2, 2), Sheets("SuffixList").Cells(slRows, slCols))
    End With

    i = 2
    While Cells(i, x) <> ""
        Orig = UCase(Cells(i, x))

        For y = 1 To slRows - 1

            If InStr(1, Orig, " " & UCase(suffixData(y, 1) & " ")) > 1 Then
               NewAddr = Left(Orig, InStr(1, Orig, " " & UCase(suffixData(y, 2) & " ")) + Len(suffixData(y, 2)))
               Cells(i, x) = NewAddr
               ChangeCount = ChangeCount + 1
               Exit For
            ElseIf InStr(1, Orig, " " & UCase(suffixData(y, 1) & ". ")) > 1 Then
               NewAddr = Left(Orig, InStr(1, Orig, " " & UCase(suffixData(y, 2) & ". ")) + Len(suffixData(y, 2)))
               Cells(i, x) = NewAddr
               ChangeCount = ChangeCount + 1
               Exit For
            ElseIf InStr(1, Orig, " " & UCase(suffixData(y, 1) & ", ")) > 1 Then
               NewAddr = Left(Orig, InStr(1, Orig, " " & UCase(suffixData(y, 2) & ", ")) + Len(suffixData(y, 2)))
               Cells(i, x) = NewAddr
               ChangeCount = ChangeCount + 1
               Exit For
            End If
        Next

    i = i + 1
    Wend

    MsgBox ChangeCount & " Rows Changed", vbOKOnly

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T15:26:55.377

你是对的; 它很慢，因为每次比较内容时都会访问 Excel 应用程序，这比访问变量要慢得多。

我建议您将想要的相关字段复制到数组中，如下所示：

```
 dim suffixData as variant

    'Now you need to save all that sheets' content into an array
    '1stly you need the sheet's dimentions

      dim slRows as double
      dim slCols as integer
      'I am using Column 1 to find out how many rows there are(change it if you want)

   with Sheets("SuffixList")
       slRows = .Cells(rows.count, 1).end(xlUp).row
       slCols = .Cells(1, columns.count).end(xlToLeft).column
       suffixData = .Range(.cells(1,1), .cells(slRows, slCols))
    end with 
```

从这里开始，您应该使用`suffixData(row, column)`来访问该工作表，就好像它是实际工作表一样。在它的一千多次迭代中，您将看到明显的改进。

您可以对其他工作表执行相同的技巧并计算所有内容，而无需在执行昂贵的循环时查看 Excel。

反过来也是可取的。您不想在每次获得值时都写入单元格。最好将其写入二维数组，就好像它是电子表格一样，然后将整个数组复制到工作表中。

# javascript - 如何根据 Div 更改 html 页面上的标题标签？

> ID：15764806
> 
> 赞同：-1
> 
> 时间：2013-04-02T13:01:49.207
> 
> 标签：javascript, html, css, title

我在[这里](http://www.screen-size.net/)有这个网站，它的作用是告诉你屏幕的大小和窗口的大小。

当您调整窗口大小时，数字会发生变化，然后显示在页面上。

我想要发生的是当你这样做时，标题也会显示数字。

与此[类似](http://preev.com/)。当您更改数字时，标题也会更改。

我不知道该怎么做？

任何帮助将非常感激 ：）

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T13:16:43.880

这是更改标题的代码，取自您提供的网站:)

```
function invChange() {
    changeField = invField;
    var num = rate ? parseFloat(invField.inner.value) : null;
    var prod = num ? round(rate * num, 4) : '';
    with(numField) {
        val(prod);
        gauge();
        if (prod) {
            pulse();
            doc.title = prod + ' ' + cur + ' · Preev'
        }
    }
} 
```

* * *

```
function numChange() {
    changeField = numField;
    var num = rate ? parseFloat(numField.inner.value) : null;
    var prod = num ? round(num / rate, 4) : '';
    with(invField) {
        val(prod);
        gauge();
        if (rate) {
            pulse();
            doc.title = prod + ' BTC · Preev'
        }
    }
} 
```

**这`doc`是保存的变量`document`**（*var doc = document*）。

如果您想查看完整的 javascript 文件，请查看此[**小提琴**](http://jsfiddle.net/kXEzY/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T13:03:16.863

您只需要查看源代码即可了解它是如何完成的：

```
document.title = 'whatever' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T13:14:30.783

您需要使用[DOM](http://www.w3.org/DOM/)更新此值。

在 JavaScript 中，您可以通过执行以下操作来获取 this 的值

```
document.title="some text"; 
```

在 JQuery 中

```
$('title').text('some text'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T13:10:50.150

```
document.title = 'whatever';
document.getElementsByTagName('title')[0].text = 'whatever';
document.getElementsByTagName('title')[0].innerHTML = 'whatever';
$('title').text('whatever'); //jQuery 
```

# vbscript - 使用 VB 脚本的对话框

> ID：15764809
> 
> 赞同：0
> 
> 时间：2013-04-02T13:01:56.203
> 
> 标签：vbscript

您好，我对 VB Script 有一些了解，但我需要一些帮助，以便帮助我进一步学习 VB Script。

我想制作包含以下内容的对话框：

1.  两个单选按钮
2.  一个文本字段来输入一些值
3.  确定和取消按钮

所以，你能帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T17:56:15.727

VBScript 不支持自定义对话框。您可以使用[Internet Explorer COM 对象](http://www.robvanderwoude.com/vbstech_ui_password.php#InternetExplorer)来模拟一个对话框，或者创建一个[HTA](http://msdn.microsoft.com/en-us/library/ms536496%28v=vs.85%29.aspx)。无论哪种方式，您都在使用表单构建网页。

# r - 更改默认 plot.gam 图表的 Y 轴

> ID：15764810
> 
> 赞同：4
> 
> 时间：2013-04-02T13:02:00.263
> 
> 标签：r, mgcv

我使用 mgcv 包在 R 中运行了 GAM，格式如下：

```
shark.gamFINAL <- gam(ln.raw.CPUE...0.1 ~ Year + Month + 
                      s(Mean.Temp, bs = "cr") + s(Mean.Chl.a, bs = "cr") + 
                      s(Mean.Front.density, bs = "cr"), data=r, family=gaussian) 
```

运行此模型并计算每个变量解释的偏差百分比后，我想绘制每个变量对响应的影响

但是，当我在 R 中使用 plot.gam 函数时，我的图表带有 y 轴，即`"s(predictor variable, edf)"`

我不确定y轴的这个比例代表什么？

有没有一种方法可以将 y 轴范围更改为代表响应的范围，正如本文所做的那样：Walsh 和 Kleiber (2001)，“蓝鲨 (Prionace glauca) 捕获的广义加性模型和回归树分析图 3 中夏威夷商业延绳钓渔业的费率。

我会发布一些我正在描述的情节的例子，但由于这是我的第一篇文章，我没有至少 10 名声望，所以它不会让我这样做！

我已经搜索了许多网站和论坛，试图找到一个答案，但无济于事，因此非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T13:51:11.040

轴是居中平滑所取的值。它是对该平滑函数的拟合值的贡献（在协变量的值处）。

更改 y 轴标签很容易 - 提供您想要的`ylab`参数。这当然意味着，如果您想为每个图单独绘制 y 轴标签，则必须分别绘制每个平滑图。在这种情况下，还可以使用`select`参数来绘制特定的平滑函数，例如：

```
layout(matrix(1:4, ncol = 2, byrow = TRUE)
plot(shark.gamFINAL, select = 1, ylab = "foo")
plot(shark.gamFINAL, select = 2, ylab = "bar")
plot(shark.gamFINAL, select = 3, ylab = "foobar")
layout(1) 
```

我知道更改 y 轴比例的唯一方法是手动构建绘图。这些图没有模型常数项以及其他参数项的贡献。如果您的模型只有一个截距和一个平滑，您可以在该协变量的范围内生成新数据，然后`predict`从模型中生成这些新数据值，但用于`type = "terms"`获得平滑的贡献。然后绘制从返回的`predict`值加上返回的`"constant"` *属性*`predict`值。

在您的情况下，您需要在预测时控制其他变量。一种方法是将所有其他协变量设置为其平均值或典型值，但允许感兴趣的协变量在其范围内变化，如前所述。然后，您将返回的矩阵的每一行中的值相加`predict(shark.gamFINAL, newdata = NEW, type = "terms")`（`NEW`要预测的新数据框在哪里，改变一个协变量，但将其余的保持在某个典型值），再次添加常数。您必须依次为每个协变量重做此操作（即每个图一次），因为您需要将其他协变量保持在典型值。

所有这一切都是在轴上移动比例 - 模型中的平滑不与模型中的其他平滑或项交互，因此可能更容易将 y 轴视为对每个平滑响应的影响?

# c - 逐位设置单个位

> ID：15764813
> 
> 赞同：0
> 
> 时间：2013-04-02T13:02:20.740
> 
> 标签：c, bit-manipulation

例如：

```
We have a byte A: XXXX XXXX
We have a byte B: 0000 0110 
```

现在，例如，我们希望字节 B 中特定位置的 4 位，我们希望将字节 A 放入特定位置，这样我们就有了结果：

```
We have a byte A: 0110 XXXX 
```

我仍在搜索魔术功能但没有成功。

找到了类似的东西并对其进行了改造，但仍然没有结果：

```
unsigned int i, j; // positions of bit sequences to swap
unsigned int n;    // number of consecutive bits in each sequence
unsigned int b;    // bits to swap reside in b
unsigned int r;    // bit-swapped result goes here

unsigned int x = ((b >> i) ^ (b >> j)) & ((1U << n) - 1); // XOR temporary
r = b ^ ((x << i) | (x << j));
As an example of swapping ranges of bits suppose we have have b = 00101111 (expressed in binary) and we want to swap the n = 3 consecutive bits starting at i = 1 (the second bit from the right) with the 3 consecutive bits starting at j = 5; the result would be r = 11100011 (binary).
This method of swapping is similar to the general purpose XOR swap trick, but intended for operating on individual bits.  The variable x stores the result of XORing the pairs of bit values we want to swap, and then the bits are set to the result of themselves XORed with x.  Of course, the result is undefined if the sequences overlap. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:12:53.843

找到了解决方案：

```
x = ((b>>i)^(r>>j)) & ((1U << n) -1)
r = r^(x << j) 
```

其中 r 是第 2 个字节，i,j 是按顺序排列的索引 (from,to)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:11:58.130

很难准确理解您的要求，如果我错了，请纠正我：

您想获取一个字节 (B) 的最后 4 位并将它们添加到第一个字节 A 的位吗？您使用“放入”一词，但不清楚您的确切含义（如果不添加，您的意思是替换吗？）。

因此，假设添加是您想要的，您可以执行以下操作：

```
A = A | (B <<4) 
```

这将向左移动 4 位（从而以 01100000 结束），然后将其“添加”到 A（使用或）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T13:12:08.163

> 字节A：YYYY XXXX
> 
> 字节 B：0000 0110

你想要0110 XXXX

所以 AND A 与 00001111 然后复制 B 的最后 4 位（先移位然后 OR）

```
a &= 0x0F; //now a is XXXX
a |= (b << 4); //shift B to 01100000 then OR to get your result 
```

如果你想要 0110 YYYY 只需将 a 向右移动 4 而不是 AND

```
a >>= 4 
```

# mongodb - 如何使用 bcrypt pwds 批量更新 mongohq 数据库

> ID：15764816
> 
> 赞同：0
> 
> 时间：2013-04-02T13:02:28.847
> 
> 标签：mongodb, mongohq

我想对 mongohq 数据库中的所有用户密码进行加密。有没有一种方法可以在数据库端执行此更新以进行大规模更新，而不是从某个应用程序连接到数据库并逐个运行更新？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:05:44.433

您必须单独更新每个用户/用户 - 这是保证一致性的唯一方法。

# django - 在 TestCase 中进行查询时出现 IndexError

> ID：15764817
> 
> 赞同：0
> 
> 时间：2013-04-02T13:02:29.110
> 
> 标签：django, testing

我有一个非常简单的测试如下：

```
import models
from django.test import TestCase

MyViewTest(TestCase):
    def setUp(self):
        self.trip = models.Trip.objects.order_by('?')[0]

   def test_something(self):
       # Blah Blah 
```

每当我运行测试时，它都会抛出下面提到的错误：

```
Traceback (most recent call last):
  File "/home/amyth/Projects/test/trips/tests.py", line 8, in setUp
    self.trip = models.Trip.objects.order_by('?')[0]
  File "/usr/local/lib/python2.7/dist-packages/django/db/models/query.py", line 207, in __getitem__
    return list(qs)[0]
IndexError: list index out of range 
```

我也尝试将查询更改为`models.Trip.objects.all()[0]`，它仍然会引发相同的错误。奇怪的是，如果我在它工作的 shell 中使用上述任何查询。那么为什么它在测试中不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T13:07:02.110

请参阅django 中的测试[文档](https://docs.djangoproject.com/en/dev/topics/testing/overview/#the-test-database)。创建了一个新的“测试”数据库，并且不使用您的“生产”数据库。除非您在 TestCase 方法中创建 Trip 条目`setUp`，否则它是空的。此外，在每个 TestCase 运行后，数据库都会被截断，因此如果您需要在多个 TestCase 中使用 Trips，则需要在每个 TestCase 中为其创建数据库条目`setUp`。

# apache - 无法关闭 RewriteRule

> ID：15764818
> 
> 赞同：4
> 
> 时间：2013-04-02T13:02:29.487
> 
> 标签：apache, mod-rewrite, url-rewriting, rewrite, lamp

我的**.htaccess**是：

```
RewriteEngine Off
RewriteRule ^poezje$ poezje-main.php
RewriteRule ^404$ 404.php
RewriteRule ^inna$ inna3.php 
```

尽管如此`RewriteEngine Off`，第一条和第二条规则仍然有效。但正如预期的那样，第三条规则是关闭的。

我昨天创建的前两条规则和今天添加的第三条规则。

我正在使用虚拟主机、mod_userdir 和 mod_rewrite 开发 Debian 6.0 Squeeze、Apache 2.2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:05:11.540

用 # 注释掉规则

```
RewriteEngine Off
#RewriteRule ^poezje$ poezje-main.php
#RewriteRule ^404$ 404.php
#RewriteRule ^inna$ inna3.php 
```

# php - 解析错误：语法错误，意外的 '$query' (T_VARIABLE)

> ID：15764821
> 
> 赞同：1
> 
> 时间：2013-04-02T13:02:39.117
> 
> 标签：php, mysql

晚上所有，

我遇到了这个脚本的问题，我希望你们中的一位优秀的程序员可以让我知道错误在哪里。

```
<?php

mysql_connect("127.0.0.1", "root", "") or die (mysql_error());
echo "Connected to MYSQL ";
mysql_select_db("tutorial") or die (mysql_error());
echo "Connected to Data Base"
$query = "SELECT * FROM forr1";
$result = mysql_query ($query) or die (mysql_error());
while ($row = mysql_fetch_array($result)) {
        echo $row['input1'];

?> 
```

**输出**

```
Parse error: syntax error, unexpected '$query' (T_VARIABLE) in C:\Program Files (x86)\EasyPHP-12.1\www\Output.php on line 7 
```

我一定遗漏了一些重要的东西，因为无论我如何尝试和返工，我都会遇到同样的错误。

谢谢你的时间

本

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-02T13:03:14.023

前一行缺少分号：

```
echo "Connected to Data Base" 
```

终止语句：

```
echo "Connected to Data Base"; 
```

# symfony - 树枝和引号字符

> ID：15764827
> 
> 赞同：5
> 
> 时间：2013-04-02T13:03:02.477
> 
> 标签：symfony, twig

在树枝模板中，我想插入这样的 javascript 文本：

```
<script type="text/javascript">
    {{ "var applicationBundleName = '" ~ application_bundle_name ~ "';" | raw}}
</script> 
```

呈现 html 时，我有这个：

```
<script type="text/javascript">
    var applicationBundleName = &#039;MyBundle_name&#039;;
</script> 
```

渲染引号时被它们的html实体替换=> javascript错误

我怎么能说不要用他们的代码替换特殊字符？或者也许有更好的方法来做到这一点..

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T13:14:41.393

您只需引用 twig 变量：

```
<script type="text/javascript">
    var applicationBundleName = "{{ application_bundle_name|raw }}";
</script> 
```

我不确定，但我认为如果变量是字符串，则不需要使用 de`raw`过滤器

# c# - C#将excel文本格式的数据添加到剪贴板

> ID：15764828
> 
> 赞同：4
> 
> 时间：2013-04-02T13:03:05.090
> 
> 标签：c#, excel, format, cell, clipboard

在 C# 中，我需要将数据网格行复制到 Excel。因为一行中的某些值是双精度值，所以 " `-Infinity`" 值是可能的。

我试图将行复制为`DataFormats.UnicodeText`or`DataFormats.Text`但这给了我输出“ `#NAME?`”，我应该看到“ ”（因为由于标准单元格格式，excel会在“”中的减号之前`-Infinity`自动插入一个“ ”）。`=``-Infinity`

当我`Text`在粘贴之前将单元格格式化为“”时，excel不会在“ `=`”之前自动插入“ `-Infinity`”。顺便说一句，我不需要对 excel 中的双精度值进行任何计算，所以文本格式对我来说就可以了。

所以我的问题是如何将数据复制到剪贴板并将其粘贴到excel中，同时将单元格格式设置为“文本”。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T14:24:30.197

从原始剪贴板查看器开始，您可以看到复制

![Excel 截图](https://i.stack.imgur.com/2wn8T.jpg)

到剪贴板会导致 Excel 向剪贴板抛出大量不同的格式。

![在此处输入图像描述](https://i.stack.imgur.com/QOh1p.jpg)

其中大多数没有帮助，但其中一些是 excel 内部的，这意味着它将（几乎）保证数据与复制的数据相同。如果我是你，我可能会瞄准**XML SpreadSheet**，或者如果你觉得**Biff12**也是 xml（但已压缩）很勇敢。与普通文本相比，这将使您对粘贴有更多的控制。

例如，上面的剪辑导致

```
<?xml version="1.0"?>
<?mso-application progid="Excel.Sheet"?>
<Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet"
 xmlns:o="urn:schemas-microsoft-com:office:office"
 xmlns:x="urn:schemas-microsoft-com:office:excel"
 xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet"
 xmlns:html="http://www.w3.org/TR/REC-html40">
 <Styles>
  <Style ss:ID="Default" ss:Name="Normal">
   <Alignment ss:Vertical="Bottom"/>
   <Borders/>
   <Font ss:FontName="Calibri" x:Family="Swiss" ss:Size="11" ss:Color="#000000"/>
   <Interior/>
   <NumberFormat/>
   <Protection/>
  </Style>
  <Style ss:ID="s63">
   <NumberFormat ss:Format="@"/>
  </Style>
 </Styles>
 <Worksheet ss:Name="Sheet1">
  <Table ss:ExpandedColumnCount="2" ss:ExpandedRowCount="2"
   ss:DefaultRowHeight="15">
   <Row>
    <Cell><Data ss:Type="Number">1</Data></Cell>
    <Cell><Data ss:Type="Number">2</Data></Cell>
   </Row>
   <Row>
    <Cell><Data ss:Type="String">Test</Data></Cell>
    <Cell ss:StyleID="s63"><Data ss:Type="String" x:Ticked="1">-Infinity</Data></Cell>
   </Row>
  </Table>
 </Worksheet>
</Workbook> 
```

所以看起来更深一点......当我尝试使用`Clipboard.SetData`将xml写入剪贴板 时，.Net Clipboard 类似乎做了一些奇怪而不是那么美妙的事情![剪贴板数据](https://i.stack.imgur.com/XDFVQ.jpg)

剪贴板从一堆谷壳开始。这当然会导致 Excel 拒绝剪贴板内容。

为了解决这个问题，我使用 Windows API (user32) 调用来处理剪贴板

```
 [DllImport("user32.dll", SetLastError = true)]
    static extern uint RegisterClipboardFormat(string lpszFormat);
    [DllImport("user32.dll")]
    static extern IntPtr SetClipboardData(uint uFormat, IntPtr hMem);
    [DllImport("user32.dll", SetLastError = true)]
    static extern bool CloseClipboard();
    [DllImport("user32.dll", SetLastError = true)]
    static extern bool OpenClipboard(IntPtr hWndNewOwner);

    private static void XMLSpreadSheetToClipboard(String S)
    {
        var HGlob = Marshal.StringToHGlobalAnsi(S);
        uint Format = RegisterClipboardFormat("XML SpreadSheet");
        OpenClipboard(IntPtr.Zero);
        SetClipboardData(Format, HGlob);
        CloseClipboard();
        Marshal.FreeHGlobal(HGlob);
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-21T04:32:13.013

谢谢（你的）信息。经过一番搜索，我发现您可以使用 .Net 剪贴板类，但不能将字符串传递给 SetData()。这对我有用：

```
System::Text::UTF8Encoding^ enc = gcnew System::Text::UTF8Encoding();
System::Windows::Forms::Clipboard::SetData("XML Spreadsheet", gcnew MemoryStream(enc->GetBytes(data))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-27T13:58:56.813

win32 api 解决方案对我不起作用。我有随机崩溃。以下代码可以正常工作，也可以使用 unicode 字符。

```
var xml = File.ReadAllText(@"..\..\SampleData\Clipboard-Example3.xml");

var stream = new MemoryStream(Encoding.UTF8.GetBytes(xml));
var dataObject = new DataObject();
dataObject.SetData("XML SpreadSheet", stream);

Clipboard.Clear();
Clipboard.SetDataObject(dataObject); 
```

# twitter-bootstrap - 引导程序中的嵌套跨度

> ID：15764830
> 
> 赞同：0
> 
> 时间：2013-04-02T13:03:09.907
> 
> 标签：twitter-bootstrap

我需要在引导程序中使用**跨度**在另一个**跨度**内的 HTML来进行垂直对齐。到目前为止，我只使用 span 来制作水平布局，例如将“span4”三次用于创建 3 列布局..

但是，以下几行创建了一个垂直布局.. 可以关于如何在引导程序中使用 span 嵌套的一些要点..

```
 <div class="row">
        <div class="span4">
            <div class="row">

                <h4 class="span3 well">Related</h4>

                <div class="span3  well">
                    <ul class="nav">
                        <li><a href="#">Related-1</a>

                        </li>
                        <li><a href="#">Related-2</a>

                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T13:12:45.093

您在一个仅跨越 4 个的元素内跨越 6 个网格列，这必然会导致换行。如果您不想要垂直堆栈，则始终需要使子行的总列数与父行相同或更少。

我建议仔细查看网格文档：http: [//twitter.github.com/bootstrap/scaffolding.html#gridSystem](http://twitter.github.com/bootstrap/scaffolding.html#gridSystem)

# gcc - 间接函数调用使用奇数地址

> ID：15764833
> 
> 赞同：3
> 
> 时间：2013-04-02T13:03:19.477
> 
> 标签：gcc, arm, cortex-m3

当 ARM Cortex-M3 的 GCC 4.7.3 (20121207) 获取函数的地址时，它不会获得函数的确切地址。我可以在该指针中看到一个错位。

```
// assume at address 0x00001204;
int foo() {
  return 42;
}

void bar() {
  int(*p)() = &foo;  // p = 0x1205;
  p();               // executed successfully
  foo();             // assembly: "bl 0x00001204;"
} 
```

虽然指针指向一个奇数地址，但执行成功。在这一点上，我预计会有一个例外。为什么它需要那个奇怪的地址，为什么它不疼。

**编辑**

*   [SO文章](https://stackoverflow.com/questions/14120711/linux-kernel-why-a-functions-address-in-system-map-is-one-byte-before-its-add)描述了拇指模式和ARM模式之间的区别。尽管 CPU 处于相同模式，但为什么直接调用函数时该偏移量不可见？
*   应该保留奇数地址还是重置位 0 会导致困难？（直到现在我才看到）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T14:28:10.733

我从我的一个例子中拼凑出一些东西来快速演示发生了什么。

`vectors.s`：

```
/* vectors.s */
.cpu cortex-m3
.thumb

.word   0x20002000  /* stack top address */
.word   _start      /* 1 Reset */
.word   hang        /* 2 NMI */
.word   hello       /* 3 HardFault */
.word   hang        /* 4 MemManage */
.word   hang        /* 5 BusFault */
.word   hang        /* 6 UsageFault */
.word   hang        /* 7 RESERVED */
.word   hang        /* 8 RESERVED */
.word   hang        /* 9 RESERVED*/
.word   hang        /* 10 RESERVED */
.word   hang        /* 11 SVCall */
.word   hang        /* 12 Debug Monitor */
.word   hang        /* 13 RESERVED */
.word   hang        /* 14 PendSV */
.word   hang        /* 15 SysTick */
.word   hang        /* 16 External Interrupt(0) */
.word   hang        /* 17 External Interrupt(1) */
.word   hang        /* 18 External Interrupt(2) */
.word   hang        /* 19 ...   */

.thumb_func
.global _start
_start:
    /*ldr r0,stacktop */
    /*mov sp,r0*/
    bl notmain
    ldr r0,=notmain
    mov lr,pc
    bx r0
    b hang

.thumb_func
hang:   b .

hello: b .

.thumb_func
.globl PUT32
PUT32:
    str r1,[r0]
    bx lr

.end 
```

`blinker01.c`：

```
extern void PUT32 ( unsigned int, unsigned int );

int notmain ( void )
{
    PUT32(0x12345678,0xAABBCCDD);
    return(0);
} 
```

生成文件：

```
#ARMGNU = arm-none-eabi
ARMGNU = arm-none-linux-gnueabi

AOPS = --warn --fatal-warnings 
COPS = -Wall -Werror -O2 -nostdlib -nostartfiles -ffreestanding 

all : blinker01.gcc.thumb.bin 

vectors.o : vectors.s
    $(ARMGNU)-as vectors.s -o vectors.o

blinker01.gcc.thumb.o : blinker01.c
    $(ARMGNU)-gcc $(COPS) -mthumb -c blinker01.c -o blinker01.gcc.thumb.o

blinker01.gcc.thumb2.o : blinker01.c
    $(ARMGNU)-gcc $(COPS) -mthumb -mcpu=cortex-m3 -march=armv7-m -c blinker01.c -o blinker01.gcc.thumb2.o

blinker01.gcc.thumb.bin : memmap vectors.o blinker01.gcc.thumb.o
    $(ARMGNU)-ld -o blinker01.gcc.thumb.elf -T memmap vectors.o blinker01.gcc.thumb.o
    $(ARMGNU)-objdump -D blinker01.gcc.thumb.elf > blinker01.gcc.thumb.list
    $(ARMGNU)-objcopy blinker01.gcc.thumb.elf blinker01.gcc.thumb.bin -O binary 
```

拆卸：

```
Disassembly of section .text:

08000000 <_start-0x50>:
 8000000:   20002000    andcs   r2, r0, r0
 8000004:   08000051    stmdaeq r0, {r0, r4, r6}
 8000008:   0800005d    stmdaeq r0, {r0, r2, r3, r4, r6}
 800000c:   0800005e    stmdaeq r0, {r1, r2, r3, r4, r6}
 8000010:   0800005d    stmdaeq r0, {r0, r2, r3, r4, r6}
 8000014:   0800005d    stmdaeq r0, {r0, r2, r3, r4, r6}
 8000018:   0800005d    stmdaeq r0, {r0, r2, r3, r4, r6}
 800001c:   0800005d    stmdaeq r0, {r0, r2, r3, r4, r6}
 8000020:   0800005d    stmdaeq r0, {r0, r2, r3, r4, r6}
 8000024:   0800005d    stmdaeq r0, {r0, r2, r3, r4, r6}
 8000028:   0800005d    stmdaeq r0, {r0, r2, r3, r4, r6}
 800002c:   0800005d    stmdaeq r0, {r0, r2, r3, r4, r6}
 8000030:   0800005d    stmdaeq r0, {r0, r2, r3, r4, r6}
 8000034:   0800005d    stmdaeq r0, {r0, r2, r3, r4, r6}
 8000038:   0800005d    stmdaeq r0, {r0, r2, r3, r4, r6}
 800003c:   0800005d    stmdaeq r0, {r0, r2, r3, r4, r6}
 8000040:   0800005d    stmdaeq r0, {r0, r2, r3, r4, r6}
 8000044:   0800005d    stmdaeq r0, {r0, r2, r3, r4, r6}
 8000048:   0800005d    stmdaeq r0, {r0, r2, r3, r4, r6}
 800004c:   0800005d    stmdaeq r0, {r0, r2, r3, r4, r6}

08000050 <_start>:
 8000050:   f000 f80a   bl  8000068 <notmain>
 8000054:   4803        ldr r0, [pc, #12]   ; (8000064 <PUT32+0x4>)
 8000056:   46fe        mov lr, pc
 8000058:   4700        bx  r0
 800005a:   e7ff        b.n 800005c <hang>

0800005c <hang>:
 800005c:   e7fe        b.n 800005c <hang>

0800005e <hello>:
 800005e:   e7fe        b.n 800005e <hello>

08000060 <PUT32>:
 8000060:   6001        str r1, [r0, #0]
 8000062:   4770        bx  lr
 8000064:   08000069    stmdaeq r0, {r0, r3, r5, r6}

08000068 <notmain>:
 8000068:   b508        push    {r3, lr}
 800006a:   4803        ldr r0, [pc, #12]   ; (8000078 <notmain+0x10>)
 800006c:   4903        ldr r1, [pc, #12]   ; (800007c <notmain+0x14>)
 800006e:   f7ff fff7   bl  8000060 <PUT32>
 8000072:   2000        movs    r0, #0
 8000074:   bd08        pop {r3, pc}
 8000076:   46c0        nop         ; (mov r8, r8)
 8000078:   12345678    eorsne  r5, r4, #120, 12    ; 0x7800000
 800007c:   aabbccdd    bge 6ef33f8 <_start-0x110cc58> 
```

首先注意`hang`vs `hello`，这是一个 gnuism，您需要在汇编中将标签声明为 thumb 函数，以便它实际适用于这种事情。 `hang`正确声明并且向量表正确使用奇数地址，`hello`未正确声明并且将偶数地址放入其中。C 编译的代码会自动正确执行此操作。

这是您所问的一个主要示例，`bl`C 函数`notmain`不会，不能，使用奇数地址。但是要使用`bx`您询问函数的地址，`main`并且该地址作为 0x8000069 提供给代码以用于地址 0x8000068 处的函数，如果您在`bx`ARMvsometingT 上执行到 0x800068，它将切换到 arm 模式并最终崩溃如果它命中cortex-m 上的拇指模式（希望崩溃而不是绊倒）`bx`到一个偶数地址应该立即出错。

```
08000050 <_start>:
 8000050:   f000 f80a   bl  8000068 <notmain>
 8000054:   4803        ldr r0, [pc, #12]   ; (8000064 <PUT32+0x4>)
 8000056:   46fe        mov lr, pc
 8000058:   4700        bx  r0
 800005a:   e7ff        b.n 800005c <hang>
 8000064:   08000069    stmdaeq r0, {r0, r3, r5, r6} 
```

为什么不能`bl`奇葩？看看上面`bl`从 0x8000050 到 0x8000068的编码，`pc`前面是两个所以 4 字节所以取 0x8000068 - 0x8000054 = 0x14 除以 2 得到 0x00A。`pc`这是指令中编码的内容（指令后半部分中的 0A）的偏移量。除以二是基于拇指指令始终是 2 个字节（当时很好）的知识，因此如果他们将偏移量放在 2 字节指令而不是字节中，它们可以达到两倍的距离。因此`lsbit`两者之间的增量丢失了，因此由硬件控制。

您的代码所做的是在一个地方您要求提供奇数地址的拇指函数的地址，另一种情况是查看始终为偶数的分支链接的反汇编。

# matlab - matlab中的stepinfo命令

> ID：15764834
> 
> 赞同：0
> 
> 时间：2013-04-02T13:03:21.103
> 
> 标签：matlab

我正在比较在 ode45 的 simulink 中实现的两个控制器 PID 和在 ode14x 中实现的模糊 PID。stepinfo 命令获取的参数有：

```
For PID:
 RiseTime: 163.4001
 SettlingTime: 875.1394
 SettlingMin: 327.8981
 SettlingMax: 414.6694
 Overshoot: 13.7639
 Undershoot: 1.7550
 Peak: 414.6694
 PeakTime: 384

For Fuzzy PID:
RiseTime: 0.8010
SettlingTime: 1.9812
SettlingMin: 364.0289
SettlingMax: 364.5573
Overshoot: 0.0157
Undershoot: 1.7550
Peak: 364.5573
PeakTime: 3 
```

首先，上面提到的参数单位是什么。其次，两个控制器的参数之间存在巨大差异的原因可能是什么。任何指导..

# objective-c - 访问全局变量的问题？

> ID：15764838
> 
> 赞同：0
> 
> 时间：2013-04-02T13:03:32.820
> 
> 标签：objective-c, linker-errors

在我的 DataCell.h 中，我在接口之前声明了全局变量：

```
extern NSInteger MYGlobalVariable; 
```

在我的 DataCell.m

我设置变量的值：

```
NSInteger MYGlobalVariable = 35; 
```

在我的另一个班级 MyTableViewController.m

我导入了 DataCell.h，然后尝试将 int 的值设置为标签。

```
_testLabel.text = [NSString stringWithFormat:@"%i" , MYGlobalVariable]; 
```

但是，当我尝试构建应用程序时，出现错误：

*   架构 i386 的未定义符号：“_MYGlobalVariable”，引用自：MyTableViewController
*   错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T13:23:56.760

根据你上面所说的，你做的一切都是正确的。这一点，我怀疑上面的细节之一与您的代码不匹配。

声明是否`extern`与变量声明匹配？（例如，您没有不小心拼写不同等）

.m 中的变量声明是否意外地以`static`关键字为前缀？

您的`NSInteger MyGlobalVariable = 35`线路实际上是否在方法内？如果是这样，那将只是声明该方法的本地变量。确保它不在任何花括号内；它应该浮动在文件的最外层。`@implementation`如果有帮助，您可以将它放在块之前。

如果这些都不能解决问题，那么您可能需要向我们展示您的实际代码，以便我们更好地了解问题所在。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-02T13:09:12.783

您不需要在 DataCell.h 文件中编写 extern 关键字。

只需像在接口之前一样声明它`NSInteger MYGlobalVariable;`，然后在 TableViewController.m 文件中声明一个变量`extern NSInteger MYGlobalVariable;`。

这会奏效！

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-02T13:09:57.493

您需要通过执行以下操作将变量传递给类。

MyTableViewController.h

```
#import DataCell.h //At top...

@property (strong, nonatomic) DataCell *datacell; 
```

MyTableViewController.m

```
@synthesize datacell;

_testLabel.text = [NSString stringWithFormat:@"%i" , dataCell.MYGlobalVariable]; 
```

# sql - 当所有参数（在where子句之后）来自一行时，缩短/减少条件/参数

> ID：15764841
> 
> 赞同：2
> 
> 时间：2013-04-02T13:03:43.413
> 
> 标签：sql, sql-server

下面的代码运行良好，但我觉得它太长了，我想在删除它之前将字段“MealNo”中的值“1”删除到具有字段 MealNo=2 的行中

下面的代码完成了这项工作，但我看到它很长，有什么办法可以缩短它吗？特别是在“哪里”之后

```
 if ((SELECT MealNo FROM [Temp_Food_TBL] WHERE [AutoNo] = @AutoNo) = 1)
    BEGIN 
        Update [Temp_Food_TBL]
        SET
         MealNo = 1
         Where
         MealNo = 2
         AND
         PersonID = (SELECT PersonID FROM [Temp_Food_TBL] WHERE [AutoNo] = @AutoNo)
         AND
         MealTime = (SELECT MealTime FROM [Temp_Food_TBL] WHERE [AutoNo] = @AutoNo)
         AND
         MealDate = (SELECT MealDate FROM [Temp_Food_TBL] WHERE [AutoNo] = @AutoNo)  
    END

 DELETE FROM [Temp_Food_TBL]
   WHERE 
 [AutoNo] = @AutoNo 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T13:12:53.597

您可以尝试自联接而不是使用`WHERE`语句。

```
if ((SELECT MealNo FROM [Temp_Food_TBL] WHERE [AutoNo] = @AutoNo) = 1)
    BEGIN 
        UPDATE t1
        SET t1.MealNo = 1
        FROM [Temp_Food_TBL] AS t1
        INNER JOIN [Temp_Food_TBL] AS t2
          ON t1.PersonID = t2.PersonID
            AND t1.MealTime = t2.MealTime
            AND t1.MealDate = t2.MealDate
            AND t1.MealNo = 2 
        WHERE t2.AutoNo = @AutoNo 
    END 

   DELETE FROM [Temp_Food_TBL]
   WHERE [AutoNo] = @AutoNo 
```

这并没有真正缩短。但是有几个标准可以找到匹配的行，我不确定你能不能把它缩短那么多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T13:16:40.647

```
;WITH DATA AS
(
      SELECT
            Temp_Food_TBL.*
      FROM
            Temp_Food_TBL
            INNER JOIN Temp_Food_TBL AS Match
                  ON Temp_Food_TBL.PersonID = Match.PersonID
                  AND Temp_Food_TBL.MealTime = Match.MealTime
                  AND Temp_Food_TBL.MealDate = Match.MealDate
                  AND Match.AutoNo = @AutoNo
                  AND Match.MealNo = 1
)
UPDATE DATA SET MealNo = 2

DELETE FROM Temp_Food_TBL WHERE AutoNo = @AutoNo 
```

# javascript - jQuery getJSON 将结果保存到变量中

> ID：15764844
> 
> 赞同：84
> 
> 时间：2013-04-02T13:03:48.510
> 
> 标签：javascript, jquery, json

我使用 getJSON 从我的网站请求 JSON。它工作得很好，但我需要将输出保存到另一个变量中，如下所示：

```
var myjson= $.getJSON("http://127.0.0.1:8080/horizon-update", function(json) {

                 }); 
```

我需要将结果保存到`myjson`，但似乎这种语法不正确。有任何想法吗？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-04-02T13:07:01.140

调用时您无法获得价值`getJSON`，只有在响应之后。

```
var myjson;
$.getJSON("http://127.0.0.1:8080/horizon-update", function(json){
    myjson = json;
}); 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-04-02T13:07:13.127

$.getJSon 需要一个回调函数，要么将其传递给回调函数，要么在回调函数中将其分配给全局变量。

```
var globalJsonVar;

    $.getJSON("http://127.0.0.1:8080/horizon-update", function(json){
               //do some thing with json  or assign global variable to incoming json. 
                globalJsonVar=json;
          }); 
```

IMO 最好是调用回调函数。这对眼睛，可读性方面更好。

```
$.getJSON("http://127.0.0.1:8080/horizon-update", callbackFuncWithData);

function callbackFuncWithData(data)
{
 // do some thing with data 
} 
```

# python - 为什么这个 if 条件“if num is int:”不起作用？

> ID：15764845
> 
> 赞同：-1
> 
> 时间：2013-04-02T13:03:56.663
> 
> 标签：python, if-statement, conditional-statements

我知道如果您是代码专家，这似乎很愚蠢。但如果你回答它，你就像是码字神界的码字菩萨。估计是个笑话。

所以，我写了这段代码：

```
def media():    
n = 0
soma = 0
while True:
    print("Type a number")
    num = input()
    print type(num)
    if num is int:
        soma = soma + num
        n = n + 1
        print "soma =", soma, " num = ", num, " n = ", n
        media = soma/n
        print media
    else:
        break
media() 
```

当我运行代码时，我得到如下信息：

![在此处输入图像描述](https://i.stack.imgur.com/W3NcC.png)

我的问题是：为什么不满足条件`if num is int:`？

我的目标是使条件“如果用户键入 ENTER，则中断”。

提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-02T13:04:54.607

```
if isinstance(num, int) 
```

将是正确的方法。

```
if num is int 
```

正在检查`num`和的标识是否`int`相同，除了`int`是一个类型并且`num`是该类型的一个实例，因此它们不是同一个对象。

# java - 如何从应用程序的任何部分访问 HashMap 或 ArrayList？

> ID：15764847
> 
> 赞同：1
> 
> 时间：2013-04-02T13:03:59.193
> 
> 标签：java, session, jakarta-ee, hashmap

每次我从数据库加载某些值时，HashMap 都会从数据库中加载某些键和值，我如何使这个 HashMap 可用于所有其他类，而不必在每次调用时将值重复加载到 HashMap 中：

这是包含加载 HashMap 的方法的类：

```
public class Codes {
    List<CODES> List = null;
         private CodesDAO codesDAO = new CodesDAO(); //DAO Class

    public HashMap <MultiKey,String> fetchCodes(){

        MultiKey multiKey;
        HashMap <MultiKey,String> map = new HashMap<MultiKey,String>();
        List =  codesDAO.fetchGuiCodes();//fetches codes from DB

        for(CODES gui:List){
             multiKey = new MultiKey(gui.getCode(), gui.getKEY());
             map.put(multiKey,gui.getDESC());
        }
        return map;         
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T13:09:26.793

您可以将地图保存在静态字段中，并在`static`块中对其进行初始化。这种方式只执行一次：

```
public class Codes {
    private static Map<MultiKey, String> codes;
    static {
        CodesDAO codesDAO = new CodesDAO(); // DAO Class
        HashMap<MultiKey, String> map = new HashMap<MultiKey, String>();
        List<CODES> list = codesDAO.fetchGuiCodes();// fetches codes from DB
        for (CODES gui : list) {
            MultiKey multiKey = new MultiKey(gui.getCode(), gui.getKEY());
            map.put(multiKey, gui.getDESC());
        }
        codes = Collections.unmodifiableMap(map);
    }

    public static Map<MultiKey, String> fetchCodes() {
        return codes;
    }
} 
```

然后您可以使用以下方法检索代码：

```
Codes.fetchCodes(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T13:11:27.067

如果静态字段不是一个选项，您可以延迟初始化如下：

```
private HashMap<MultiKey, String> map = null;

public HashMap<MultiKey, String> fetchCodes() {

  if (map == null) {
    map = new HashMap<MultiKey, String>();
    list = codesDAO.fetchGuiCodes();// fetches codes from DB

    for (CODES gui : list) {
      MultiKey multiKey = new MultiKey(gui.getCode(), gui.getKEY());
      map.put(multiKey, gui.getDESC());
    }
  }
  return map;
} 
```

注意：这不是线程安全的，但可能需要一些额外的同步。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T13:06:22.223

可能只加载一次数据吗？使用番石榴的记忆（我会）：

```
 Suppliers.memoize(//Implementation of Supplier<T>) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T14:28:53.533

我不确定 OP 是如何设计他的 Java EE 应用程序的，以及是否使用了任何 3rd 方框架，但是在使用 EJB、CDI、JPA、事务等等的正确设计的标准 Java EE 应用程序中，数据库通常不是在静态上下文中可用。在这种情况下，建议静态初始化它的答案会严重误导和破坏。

规范的方法是[只创建一个](http://butunclebob.com/ArticleS.UncleBob.SingletonVsJustCreateOne)保存预初始化数据的实例，并在应用程序的整个生命周期中重复使用它。对于当前的 Java EE 标准，这可以通过在应用程序启动期间创建和初始化一次 bean 并将其存储在应用程序范围中来实现。例如，应用程序范围的 CDI bean：

```
@Named
@ApplicationScoped
public class Data {

    private List<Code> codes;

    @EJB
    private DataService service;

    @PostConstruct
    public void init() {
        codes = Collections.unmodifiableList(service.getAllCodes());
    }

    public List<Code> getCodes() {
        return codes;
    }

} 
```

然后`#{data.codes}`，应用程序中的其他任何地方都可以使用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T13:14:16.710

如果您使用 Spring，您可以简单地声明一个 bean（单例）并实现 InitializingBean 接口。

您将被迫实现一个名为 afterPropertiesSet() 的方法并在那里加载您的地图。

如果你不使用 Spring，你可以像你一样在开始时初始化你的地图，然后把它放在 servletConext 中。此范围适用于所有会话。

这对于只读数据来说都是好事。如果您需要更新它，请小心，因为这不是线程安全的。你必须使它成为线程安全的。

希望有帮助

问候

# ruby - 使用 Koala 时出现错误“读取会阻止 OpenSSL::SSL::SSLError”

> ID：15764849
> 
> 赞同：2
> 
> 时间：2013-04-02T13:04:02.510
> 
> 标签：ruby, error-handling, koala-gem

```
"read would block OpenSSL::SSL::SSLError" 
```

我正在尝试使用代码禁用验证 ssl

```
Koala.http_service.http_options = {
  # Faraday options
  :ssl => {
    # see below for info on ca_path and ca_file
    #:ca_file => file,
    #:ca_path => path,
    # SSL verify defaults to true unless you explicitly set it to false
    :verify => false
  }
} 
```

但没有成功，同样的错误。

如何解决？为什么上面的代码被忽略了？

# internet-explorer - Internet Explorer 为授权设置跨域 cookie

> ID：15764850
> 
> 赞同：8
> 
> 时间：2013-04-02T13:04:06.773
> 
> 标签：internet-explorer, cookies, cross-domain

我在下一个域上有两个应用程序：*www.bar.com*和*www.foo.bar.com*。第二个应用程序通过第一个应用程序进行授权（使用跨域请求）在此之后我将 cookie 设置为浏览器，并且在 Internet Explorer 中它不起作用：

```
$.cookie("SESSION_KEY", loginResult.sessionKey, {
        expires: 365,
        path: "/",
        domain: ".bar.com"
}); 
```

该代码适用于除 Internet Explorer v.9 之外的所有浏览器 未设置 cookie。我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T13:26:42.137

这是由于 IE 设置造成的。从`Tools`菜单中选择`Internet Options`。导航到`Security`选项卡。选择 Internet Web 内容区域并单击`Custom Level`以打开安全设置。

找到`Miscellaneous`设置。尝试启用`Access data sources across domains`. 您可能需要重新启动 IE 才能使设置生效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-06T08:20:49.927

IE，作为市场上唯一的一种网络浏览器，实现了部分 P3P 标准（这是关于 CORS 中的接受 cookie）

因此，您可以使用服务器响应设置 cookie - 为此，您必须在服务器响应中设置此标头（设置 cookie）（我从我的 PHP symfony 项目中复制粘贴以下行）：

```
$response->headers->set('P3P', 'CP="random_text"'); 
```

您还必须记住在您的 CORS 请求中添加标志“withCredentials=true”（在其他情况下，任何 cookie 都将从请求/响应中发送/保存）。

# html - 如何在 Chrome 中删除选择框的背景（在 iOS 上）

> ID：15764856
> 
> 赞同：0
> 
> 时间：2013-04-02T13:04:20.740
> 
> 标签：html, css

这是在 Chrome for iOS 上显示选择框的方式：

![在此处输入图像描述](https://i.stack.imgur.com/YY0x1.png)

背景不是`#ffffff`，但有一种不透明度/阴影。我怎样才能删除它？尝试了背景颜色/图像等，但没有任何效果。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:06:59.050

在你的 CSS 中试试这个

`select{ background:none;}`

# sql - 语法检查约束即检查 col1 = col2 * col3 的值

> ID：15764863
> 
> 赞同：0
> 
> 时间：2013-04-02T13:04:51.137
> 
> 标签：sql, oracle, constraints

关于我一直做错的语法可能是非常简单的事情，但在过去的 2 个小时里，当我在表和列级别定义此约束作为 CREATE TABLE 的一部分时，我一直在尝试多个语句，并使用 ALTER TABLE 分别尝试相同但是没有任何成功：

```
Create table tb1 (
tb1_quantity number,
tb1_price number,
tb1_total number constraint tb1_total_CK
CHECK(tb1_total = SUM(tb1_quantity * tb1_price))
); 
```

我一直在尝试的另一种方法是：

```
Create table tb1 (
tb1_quantity number,
tb1_price number,
tb1_total number constraint tb1_total_CK
CHECK(SUM(tb1_quantity * tb1_price))
)
; 
```

似乎与我声明功能的方式有关，因为我不断收到通常的 ORA-00934 此处不允许使用组功能的消息。我已经阅读了使用触发器和视图的多种替代方法，但我渴望使用约束使其工作，我是按照正确的方式使用这种语法还是只是措辞不正确？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T13:10:08.320

您需要将其定义为不合时宜的约束..即：

```
Create table tb1 (
tb1_quantity number,
tb1_price number,
tb1_total number,
 constraint tb1_total_CK CHECK(tb1_total = tb1_quantity * tb1_price)
); 
```

例如：

```
SQL> Create table tb1 (
  2  tb1_quantity number,
  3  tb1_price number,
  4  tb1_total number,
  5   constraint tb1_total_CK CHECK(tb1_total = tb1_quantity * tb1_price)
  6  );

Table created.

SQL> insert into tb1 values (1, 1, 1);

1 row created.

SQL> insert into tb1 values (1, 1, 2);
insert into tb1 values (1, 1, 2)
*
ERROR at line 1:
ORA-02290: check constraint (DTD_TRADE.TB1_TOTAL_CK) violated 
```

# ios - iPhone 上的无限后台执行

> ID：15764865
> 
> 赞同：1
> 
> 时间：2013-04-02T13:04:55.507
> 
> 标签：ios, background, voip

我正在开发应该以特定间隔（30-3600 秒）做一些后台工作的 iOS 应用程序，所以理想情况下我需要为我的应用程序无限后台执行。我正在使用[此](https://stackoverflow.com/questions/4656214/iphone-backgrounding-to-poll-for-events/4808049#4808049)答案中的“更新 1”解决方案，但存在一个问题。

1.  我用来在委托方法`setKeepAliveTimeout:600 handler:`中注册保持活动的处理程序，并且；`application: didFinishLaunchingWithOptions:`
2.  打电话`beginBackgroundTaskWithExpirationHandler:`；
3.  将应用程序移至后台。一切都很好。计时器正在触发，正在进行中，`backgroundTimeRemaining`说我有大约 600 秒；
4.  应用程序暂停 600 秒后；
5.  几秒钟后，keep-alive 处理程序再次调用并请求后台执行。但这一次`backgroundTimeRemaining`说我只有大约 50 秒；
6.  50 秒后，应用程序再次暂停；
7.  ~550 秒暂停；
8.  转到 5。

我正在使用最新版本 OS (6.1.3) 的 iPhone 3GS 上测试我的应用程序。所以问题是为什么我在第二次调用后只有大约 50 秒`beginBackgroundTaskWithExpirationHandler:`？有没有其他方法可以在 iOS 的后台以短时间间隔（例如 30 秒）进行一些工作？

PS：我正在开发的应用程序是供公司内部使用的，所以我不在乎被苹果拒绝。

# python - 模块中的公共变量

> ID：15764872
> 
> 赞同：0
> 
> 时间：2013-04-02T13:05:16.887
> 
> 标签：python

我有三个 python 文件，我们称它们`master.py`为. 现在并没有任何功能，但需要使用相同的输入（比如变量）来做两件不同的事情。`slave1.py``slave2.py``slave1.py``slave2.py``inp`

我想做的是从主程序调用两个从程序，并在主程序中指定一个输入变量`inp`，所以我不必做两次。另外，我可以在一个主程序等中更改两个从站的输出。

我想保留两者的代码`slave1.py`并将`slave2.py`它们分开，因此如果需要我可以单独调试它们，但是当我尝试这样做时

```
#! /usr/bin/python
# This is master.py
import slave1
import slave2

inp = #some input 
```

两者都`slave1`运行`slave2`，*然后*我才能更改输入。据我了解，python 导入模块的方式是先执行它们。但是有什么方法可以延迟执行它们以便我可以指定公共输入吗？或者任何其他方式从一个地方指定两个文件的输入？

**编辑：** `slave1`并`slave2`在给定特定初始条件的情况下执行两个不同的模拟。由于两者的输出相同，我想以类似的方式显示它们，并控制将模拟数据写入哪些文件。所以我认为将它们都导入主文件是最简单的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:07:07.120

您可以随时进行导入：

```
inp = #some input

import slave1
import slave2 
```

请注意，这通常被认为是糟糕的设计——最好让模块包含一个函数，而不是在导入模块时让它发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T13:08:26.380

将您的从模块中的代码编写为函数，导入函数，然后`master`使用您需要的任何输入调用函数。如果您需要更多有状态的信息，请考虑构造一个对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T13:51:20.983

看起来您的程序架构并不是真正的最佳。我认为您有两个文件在使用`python slave1.py`. 这对于编写脚本来说很好，但是当您导入它们时，您会遇到麻烦，就像您所经历的那样。

最好的方法是将您的代码包装在一个函数中的从属文件中（如@sr2222 所建议的那样），并从以下位置显式调用它们`master.py`：

slave1.py/slave2.py

```
def run(inp):
    #your code 
```

大师.py

```
import slave1, slave2

inp = "foo"
slave1.run(inp)
slave2.run(inp) 
```

如果您仍然希望能够独立运行从站，您可以在最后添加类似这样的内容：

```
if __name__ == "__main__":
    inp = "foo"
    run(inp) 
```

# xcode - 如果 if 块测试为真，那么我希望它跳过 else 块但它没有:(我该如何解决它？我也只是在学习如何编程

> ID：15764876
> 
> 赞同：-2
> 
> 时间：2013-04-02T13:05:27.917
> 
> 标签：xcode

```
#include <stdio.h>
#include <stdlib.h>
int main(int argc, const char * argv[])
{

    int num1, num2, num3;

    printf("Please enter three numbers from the following combinations.\n 1 4 3, 3 3 9,3 3 4, 7 6 3");

    scanf("%d %d %d", &num1, &num2, &num3);
    {
    if ((num1 == 1) && (num2 == 4) && (num3 ==3))
        printf("I love you too :)\n");

    if ((num1 == 3) && (num2 == 3) && (num3 ==9))
        printf("YOU ARE BEAUTIFUL !\n");

    if ((num1 == 3) && (num2 == 3) && (num3 == 4))
        printf("You are best!\n");

    if ((num1 == 7) && (num2 == 6) && (num3 == 3))
        printf("Anubhav misses you !\n"); 
```

// 现在我希望它去 else 如果上面是假的，但它也这样做，即使它是真的
else printf("You enter %d %d %d\n", num1 ,num2, num3); printf("这个业余程序员没有收录:(\n");

```
 }

printf("I still remember about the calculator :D\n");

return 0; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:10:46.517

如果我正确地阅读了您的问题...您的每个“if”语句（在第一个之后）都需要是 else-if。而且由于结尾的“else”子句中有多行，因此您需要将这两行括在大括号中。像这样：

```
if ....
else if ((num1 == 3) && (num2 == 3) && (num3 == 4))
    printf("You are best!\n");
else if ((num1 == 7) && (num2 == 6) && (num3 == 3))
    printf("Anubhav misses you !\n");
else {
    printf("You entered %d %d %d\n", num1 ,num2, num3); 
    printf("This has not been included by this amateur programmer :(\n");
} 
```

# wpf - WPF椭圆路径

> ID：15764877
> 
> 赞同：1
> 
> 时间：2013-04-02T13:05:34.647
> 
> 标签：wpf, path, ellipse

我正在尝试在 wpf 中移动图像。图像应遵循椭圆作为路径。动画完成后，应立即重新开始。（例如一个行星旋转）

如果我是对的，我应该使用 DoubleAnimation。

问题是我应该向 DoubleAnimation 标签写什么。

这是我到目前为止编写的代码：

```
 <Image Source="t:\\moon.jpg" Width="50" Height="50">
        <Image.Triggers>
            <EventTrigger>
                <BeginStoryboard>
                    <Storyboard>
                        <DoubleAnimation>

                        </DoubleAnimation>
                    </Storyboard>
                </BeginStoryboard>
            </EventTrigger>
        </Image.Triggers>
    </Image> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:09:15.580

我认为你应该使用[PathAnimation](http://msdn.microsoft.com/en-us/library/aa970561.aspx)而不是 DoubleAnimation。

来自 MSDN 的示例：

```
<EventTrigger RoutedEvent="Button.Loaded">
      <BeginStoryboard>
        <Storyboard>
          <MatrixAnimationUsingPath
          Storyboard.TargetName="ButtonMatrixTransform"
          Storyboard.TargetProperty="Matrix"
          DoesRotateWithTangent="True"
          Duration="0:0:5" 
          RepeatBehavior="Forever" >
            <MatrixAnimationUsingPath.PathGeometry>
              <PathGeometry 
                Figures="F1 M 147.5,0.5C 228.686,0.5 294.5,24.4528 294.5,54C 294.5,83.5472 228.686,107.5 147.5,107.5C 66.3141,107.5 0.5,83.5472 0.5,54C 0.5,24.4528 66.3142,0.5 147.5,0.5 Z" 
                PresentationOptions:Freeze="True" />
            </MatrixAnimationUsingPath.PathGeometry>
          </MatrixAnimationUsingPath>
        </Storyboard>
      </BeginStoryboard>
    </EventTrigger> 
```

> [您可以在此处](http://msdn.microsoft.com/en-us/library/ms752293.aspx)了解*路径标记语法*

# php - PHP 定义变量和 jQuery $.get

> ID：15764883
> 
> 赞同：0
> 
> 时间：2013-04-02T13:06:02.340
> 
> 标签：php, jquery, defined

我在 PHP 中定义了一个变量

```
define("SOMETHING","Something text"); 
```

然后我有一个 PHP 文件（defined.php）：

```
echo SOMETHING; 
```

我的 jQuery $.get 请求是：

```
$.ajax({ 
    type: "GET",   
     url: "/include/defined.php",   
     async: false,
     success : function(text)
     {
         response = text;
     }
}); 
```

我想得到可变响应“某事文本”而不​​是某事！有没有办法这样做？

非常感谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:10:32.383

您有一个范围错误：在 echo 调用时未定义 SOMETHING。

也许您忘记在您的defined.php 中包含该文件？

# java - getImage() 性能

> ID：15764889
> 
> 赞同：1
> 
> 时间：2013-04-02T13:06:18.623
> 
> 标签：java, http

我有一个需要更好性能的旧 Java 小程序（不是我写的）。

我使用分配：

```
getToolkit().getImage(imageURL) 
```

我的问题是：

1.  它接缝图像将一张一张地加载而不是平行的

2.  该请求具有所有 http keep-alive 标志，但对于每个图像，它都会打开一个新的 tcp 连接。并且永远不要关闭连接。

是否有一种解决方案可以与使用 http keep-alive 功能并行处理图像？

一个简短的例子，应用程序如何工作：

```
public class test 
{
    Map<String, URL> urlList = new HashMap<String, URL>();
    urlList.put("test", "/test.jpg"); 
    urlList.put("grrr", "/grrr.jpg");    
    urlList.put("htutz", "/htutz.jpg"); 
    urlList.put("fsdfgf", "/fsdfgf.jpg"); 
    urlList.put("fdgsfd", "/fdgsfd.jpg"); 
    urlList.put("fdgtzt", "/fdgtzt.jpg"); 
    urlList.put("reterg", "/reterg.jpg"); 
    urlList.put("ssdfsfdgsfd", "/ssdfsfdgsfd.jpg"); 

    for (URL imageUrl: urlList) {
    {
        new ImageExample(imageUrl);
    }
}

public class ImageExample extends JApplet {
    Image image;

    public void ImageExample(URL imageUrl) {
        image = getToolkit().getImage(imageUrl);
    }

    public void paint(Graphics g) {
        g.drawImage(image, 20, 20, this);
    }

    @Override
    public void draw( Graphics g )
    {
       paint(g);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:07:35.747

创建一个新线程来加载每个图像并在加载图像时终止它。

像这样，您将同时加载所有图像，而不是逐个图像加载。（而且你也不会阻塞 ui 线程）

（因为您不会使用缓存）

# c - 十六进制语法符号

> ID：15764896
> 
> 赞同：-3
> 
> 时间：2013-04-02T13:06:26.603
> 
> 标签：c, hex

当我将字节键入为十六进制时：

> 0x10

是否与以下内容相同：

> ~0x10

有什么不同？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T13:07:23.380

`~0x10`给你一个按位不的`0x10`ie`0xEF`

`0x10`因为二进制是`00010000`. 这一点不给你`11101111`-`0xEF`十六进制

如果您分配`0x10`给大于一个字节的类型，则反转其位会将其最低有效字节设置为`0xEF`，将其他字节设置为`0xFF`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:34:30.367

`~`是一[元按位补码](http://en.wikipedia.org/wiki/Bitwise_operations_in_C#Unary_Operator_.28.7E.29.2FOne.27s_Complement)运算符。您可以在 C 规范的 6.5.3.3 中阅读有关它的所有内容，但简而言之，它是一元的，因为它适用于一个操作数；它会翻转位。此外，它对操作数执行整数提升。

因此，在您的情况下，操作数的值为 10 [16]，即 00010000 [2]。因为它只有 8 位，所以你可能在一个`char`类型中有这个。使用`~`运算符（结合整数提升）将导致 1111111111101111 [2]（位被翻转）。

# javascript - 如何将事件处理程序添加到 bing 地图 EntityCollection？

> ID：15764897
> 
> 赞同：1
> 
> 时间：2013-04-02T13:06:27.517
> 
> 标签：javascript, bing-maps

我使用 BING Maps API 在地图上创建条形图。char 包含一些多边形，但我无法将事件处理程序添加到集合中，并且我添加到多边形的所有事件都会立即触发。

```
var map = new Microsoft.Maps.Map(document.getElementById("mapDiv"), {credentials:"CREDENTIALS",
                            mapTypeId: Microsoft.Maps.MapTypeId.road,
                            zoom: 13,
                            center: new Microsoft.Maps.Location(51.363247,12.467959)});

var center = map.getCenter();
var chart = drawBarChart(map.getCenter(),10,20,30, 0.005);               
map.entities.push(chart); 
```

...

```
function drawBarChart(location, value1, value2, value3, zoom) {

    var chart = new Microsoft.Maps.EntityCollection();

    var sum = value1 + value2 + value3;
    var height1 = value1 / sum * zoom;

    var maxHeight = Math.max(height1, height2, height3) + 0.1 * zoom;

    var rectPoints = new Array(5)
    rectPoints[0] = new Microsoft.Maps.Location(location.latitude - 0.1 * zoom, location.longitude - 0.1 * zoom);
    rectPoints[1] = new Microsoft.Maps.Location(location.latitude - 0.1 * zoom, location.longitude + 0.7 * zoom);
    rectPoints[2] = new Microsoft.Maps.Location(location.latitude + maxHeight, location.longitude + 0.7 * zoom);
    rectPoints[3] = new Microsoft.Maps.Location(location.latitude + maxHeight, location.longitude - 0.1 * zoom);
    rectPoints[4] = new Microsoft.Maps.Location(location.latitude - 0.1 * zoom, location.longitude - 0.1 * zoom);
            var black = new Microsoft.Maps.Color(200, 50, 50, 50);
    var white = new Microsoft.Maps.Color(200, 255, 255, 255);
    var transparent = new Microsoft.Maps.Color(0, 255, 255, 255);

    var border = new Microsoft.Maps.Polygon(rectPoints, {
        strokeColor: transparent,
        fillColor: white
    });
     chart.push(border);
     Microsoft.Maps.Events.addHandler(chart , 'mouseover', displayEventInfo);   
     return chart; 
```

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:55:35.873

您的问题是您尝试在 EntityCollection 上添加“鼠标悬停”事件，但参考[msdn](http://msdn.microsoft.com/en-us/library/gg427616.aspx) EntityCollection 类不支持此类事件。

我想你可能想为每个多边形添加事件，所以编辑你的代码是这样的：

```
Microsoft.Maps.Events.addHandler(border, 'mouseover', displayEventInfo); 
```

一切都会如你所愿。

希望它有所帮助。

# dynamics-crm - CRM 4.0：自引用关系在保存时抛出错误

> ID：15764899
> 
> 赞同：1
> 
> 时间：2013-04-02T13:06:43.193
> 
> 标签：dynamics-crm, dynamics-crm-4

假设我们有两个联系实体（父亲和儿子）。我创建了一个与联系人（自我参照）的 1:N 关系并插入查找字段。当我将新字段设置为任何其他联系人并尝试保存时，我收到以下错误消息：

> 错误号：0x80040386
> 错误消息：此实体层次结构中存在循环。
> 错误详细信息：此实体层次结构中存在循环。
> 源文件：不可用
> 行号：不可用
> 
> 堆栈跟踪信息：[CrmException：此实体层次结构中存在循环。]à Microsoft.Crm.BusinessEntities.ValidateExtension.CheckLoop（Guid parentId，Guid childId，String baseTableName，String referencedAttributePhysicalName，String referencingAttributePhysicalName，ExecutionContext context）

我该如何解决这个问题？还有其他方法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:19:59.357

您不能循环引用，请检查您的层次结构中是否有任何节点引用同一层次结构中的另一个节点，无论是在不同的级别。在自引用中，您不能引用该层次结构中的节点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T16:46:29.200

正如佩德罗所说，您的错误是由循环引用引起的；例如，假设您有 Jane 链接到 Lucy，然后您尝试将 Lucy 链接到 Jane，这将导致此错误。您也可以在链接到联系人时获得此信息，因为他们与其他实体类型（如帐户）有关联。

看看使用关系，它们为这些类型的关系提供了更多的灵活性，并且可能正是您所需要的。

# mysql - Mysql Group By、Order By、Count、Min()组合

> ID：15764901
> 
> 赞同：0
> 
> 时间：2013-04-02T13:06:50.487
> 
> 标签：mysql, group-by, having-clause

我有一张有很多地址记录的表。新数据已添加到表中，我想查找与现有名称、邮政编码、街道匹配的所有新记录，这些新记录已分配给相同的 client_id (1) 以及某些其他条件（结果代码）。我正在努力的部分是获取与现有记录匹配的新记录的 id。

现有记录的 date_exported int(8) 是过去某个日期，添加的新记录的 date_exported 为 0。

使用下面的 SQL 并在 date_exported 字段周围使用 MIN 它显示 0 date_exported 记录，但由于分组和拥有，ID 没有与 SQL 的其余部分排序。如果没有 MIN，它会显示正确的 id 和数据，但它适用于 date_exported !=0 的旧记录 - 我想找到添加的 date_exported = 0 的新记录

```
SELECT id, name, postcode, street, result_code, MIN(date_exported), COUNT(*) AS cnt 
  FROM fulf.third_party 
 where client_id = '1' 
   and (result_code >= '0' 
   and result_code < '1000' and result_code != '400')  
 GROUP BY name, postcode, street having cnt > 1 order by id asc 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:12:03.843

像这样的东西应该工作：

```
select t.*
from (
    SELECT name, postcode, street, MIN(date_exported) as MinDate, COUNT(*) AS cnt 
    FROM fulf.third_party 
    where client_id = '1' 
        and (result_code >= '0' 
        and result_code < '1000' and result_code != '400')  
    GROUP BY name, postcode, street 
    having cnt > 1 
 ) tm
inner join fulf.third_party t on tm.name = t.name
    and tm.postcode = t.postcode 
    and tm.street = t.street
    and tm.MinDate = t.date_exported 
```

# java - 如何在 JSON 对象中检索 JSON 数据？

> ID：15764913
> 
> 赞同：1
> 
> 时间：2013-04-02T13:07:21.800
> 
> 标签：java, json

我有一个如下所示的 JSON 对象：

```
"TripList":{
  "noNamespaceSchemaLocation":"http://api.vasttrafik.se/v1/hafasRestTrip.xsd",
  "servertime":"11:27",
  "serverdate":"2013-04-02",
  "Trip":[{
    "Leg":{
      "name":"Spårvagn 3",
      "type":"TRAM",
      "id":"9015014500300079",
      "direction":"Kålltorp",
      "fgColor":"#004b85",
      "bgColor":"#ffffff",
      "stroke":"Solid",
      "accessibility":"wheelChair",
      "Origin":{
        "name":"Brunnsparken, Göteborg",
        "type":"ST",
        "id":"9022014001760004",
        "routeIdx":"19",
        "time":"11:27",
        "date":"2013-04-02",
        "track":"D ",
        "rtTime":"11:31",
        "rtDate":"2013-04-02",
        "$":"\n"
        } 
```

获取 Leg 对象内的名称工作正常。但是，如果我想在 Origin 对象中获取时间，我该怎么做呢？

到目前为止，我的代码是这样的：

```
 JSONParser parser = new JSONParser();
    Object obj = parser.parse(Planner.getPlanner().getJsonDataForTrip(Planner.getPlanner().getStartLocationID(), Planner.getPlanner().getDestinationID()));
    JSONObject topObject = (JSONObject) obj;
    JSONObject locationList = (JSONObject) topObject.get("TripList");
    JSONArray array = (JSONArray) locationList.get("Trip");
    Iterator<JSONObject> iterator = array.iterator();

    while (iterator.hasNext()) {

        JSONObject jsonObj = iterator.next();
        jsonObj = (JSONObject) jsonObj.get("Leg");
        String line = (String) jsonObj.get("name");
        Planner.getPlanner().setLines(line);
        System.out.println(jsonObj.get("Origin"));
        Long time = (Long) jsonObj.get("time");
        String track =(String) jsonObj.get("track");

        System.out.println(line);
        System.out.println(time);
        System.out.println(track);

    } 
```

}

```
And in the console it say like this : 
```

> {"routeIdx":"19","id":"9022014001760004","rtDate":"20130402","time":"15:02","$":"\n","name:"Brunnsparken,哥德堡","track":"D","rtTime":"15:06","date":"2013-04-02","type":"ST"}
> 
> 斯帕瓦恩 3
> 
> 无效的
> 
> 无效的

所以基本上我已经得到了 Spårvang 3 这个名字。但我想抓紧时间。

所以我试图通过使用来摆脱的时间`jsonObj.get("time");`是`null`有价值的。

有什么问题，我怎样才能从对象“Origin”中获取时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T13:13:47.493

由于“时间”是“起源”对象的一部分，您需要先提取“起源”对象：

```
JSONOject origin = (JSONObject) jsonObj.get("Origin"); 
```

接着：

```
String time = origin.getString("time"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T13:12:17.377

您正在获取“腿”对象的“时间”和“轨道”属性，而不是“原点”对象。它应该是：

```
 JSONParser parser = new JSONParser();
    Object obj = parser.parse(Planner.getPlanner().getJsonDataForTrip(Planner.getPlanner().getStartLocationID(), Planner.getPlanner().getDestinationID()));
    JSONObject topObject = (JSONObject) obj;
    JSONObject locationList = (JSONObject) topObject.get("TripList");
    JSONArray array = (JSONArray) locationList.get("Trip");
    Iterator<JSONObject> iterator = array.iterator();

    while (iterator.hasNext()) {

        JSONObject jsonObj = iterator.next();
        jsonObj = (JSONObject) jsonObj.get("Leg");
        String line = (String) jsonObj.get("name");
        Planner.getPlanner().setLines(line);
        System.out.println(jsonObj.get("Origin"));

        // Added this line
        jsonObj = (JSONObject) jsonObj.get("Origin");

        String time = (String) jsonObj.get("time");
        String track =(String) jsonObj.get("track");

        System.out.println(line);
        System.out.println(time);
        System.out.println(track);

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T13:20:29.317

执行以下代码

```
JSONOject origin = (JSONObject) jsonObj.get("Origin");
String time = (String) origin.getString("time"); 
```

他们使用 SimpleDateFormat 解析时间字符串并获取日期对象

# c++ - 访问派生类的各个类，派生类派生自两个相同的基类

> ID：15764915
> 
> 赞同：0
> 
> 时间：2013-04-02T13:07:23.573
> 
> 标签：c++, multiple-inheritance, diamond-problem

我有一个*名为*`Number`. 类`One`和`Two`派生自`Number`. 现在我定义了另一个类`Three`，我需要从*多重继承*中访问各个基类：

```
 class Number{
  protected:
     int val;
  public:
    Number(){
        val=0;
    }
    void Add(Number n){//Receives another Number class instance and add the value
        val+=n.val;
    }
};

//class One derived from Number
class One:public Number{
  public:
     One(){
          cal=1;
     }
};

//class two derived from Number
class Two:public Number{
  public:
     Two(){
          val=2;
     }
};

class Three:public One,public Two{
  public:
     Three(){
          Two::Add(One);//--How can i pass instance of class One Here
     }
}; 
```

**我尝试了 One::Number 和 Two::Number，但没有用。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:18:51.440

有一些问题，首先`val`是私有的，因此需要解决`protected`。接下来你有[一颗死亡钻石，](https://stackoverflow.com/questions/137282/how-can-avoid-the-diamond-of-death-in-c-if-i-use-multiple-inheritance)所以你需要`virtual public`for`One`和`Two`。您还尝试`Add`使用 a进行调用，`type`但您需要`instance`每个类的 a：

```
class Number{
protected:
     int val;
public:
    Number(){
        val=0;
    }
    void Add(Number& n){//Receives another Number class instance and add the value
        val+=n.val;
    }
};

//class One derived from Number
class One:virtual public Number{
public:
     One(){
          val=1;
    }
};

//class two derived from Number
class Two:virtual public Number{
public:
     Two(){
          val=2;
     }
};

class Three: public  One,  public  Two{
public:
     Three()
     {
           Two t1 ;
           Add(t1 );//--How can i pass instance of class Two Here
     }
}; 
```

可以说使用`protected`数据是不好的，但这取决于[您的情况](http://www.parashift.com/c++-faq-lite/protected-data-not-evil.html)，但要完整，保留数据成员并使用 a`val`也是一种选择，看起来像这样：`private``protected constructor`

```
class Number{
private:
     int val;
protected:
   Number( int n ) : val(n) {} 
public:
    Number(){
        val=0;
    }
    void Add(Number& n){//Receives another Number class instance and add the value
        val+=n.val;
    }
};

class One: virtual public Number{
public:
     One() : Number( 1 ) {

     }
};

class Two: virtual public Number{
public:
     Two() : Number(2) {
     }
}; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-02T13:12:08.387

您需要创建相应类型的对象。

```
class Three : public One, public Two
{
public:
     Three()
     {
          Add(One());
          Add(Two());
     }
}; 
```

但我不明白你为什么在这里需要 MI。从 Number 继承就足够了。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-02T13:22:23.293

这应该有效：

```
Two::Add(*(One*)this); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-02T13:23:18.817

问题不仅仅是语法。但是你到底想做什么？

你可以。但是声明的实例在哪里`One`？你必须先声明它。记住`Two::Add(One);`不是声明，而是调用语句。

你在做什么相当于让我们说

```
process_number(One); 
```

其中进程号是一个函数。

# objective-c - 将xml元素数组转换为浮点数组？

> ID：15764918
> 
> 赞同：1
> 
> 时间：2013-04-02T13:07:27.070
> 
> 标签：objective-c, xml, xcode, arrays, parsing

我有以下问题：我正在解析一个 XML 文件，其中包含一些**“chas”**元素。我将它们保存在一个数组中 - arrayBegin。如何将数组的每个对象转换为 float ？我是新手，所以我真的很抱歉这个愚蠢的问题。提前致谢！这是我的代码：

```
 NSString *dayToString = [NSString stringWithFormat:@"http://pik.bg/TV/bnt1/02.04.2013.xml"];
    NSURL *url = [NSURL URLWithString:dayToString];
    NSData *webData = [NSData dataWithContentsOfURL:url];

    // every <chas> element from the xml file
    NSString *xPathQueryBegin = @"//elem/chas";
    TFHpple *parserBegin = [TFHpple hppleWithXMLData:webData];
    NSArray *arrayBegin = [parserBegin searchWithXPathQuery:xPathQueryBegin];
    NSLog (@"%d", [arrayBegin count]); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T13:10:48.023

这样：

```
NSMutableArray *floatArray=[NSMutableArray new];
for(NSString *string in arrayBegin){
    floatArray[floatArray.count]=@([string floatValue]);
} 
```

# c# - C#：从填充了 Linq 的 Combobox 中获取对象

> ID：15764919
> 
> 赞同：1
> 
> 时间：2013-04-02T13:07:27.533
> 
> 标签：c#, wpf, linq, combobox

我用这个查询在 WPF 中填充了一个 ComboBox：

```
CBKunder.ItemsSource =
    from a in Master.getDC().Kundes
    select a.Kundenavn; 
```

在`selectionChanged`方法中我想获取被选中的对象。我想做这样的事情：

`kunde = (Kunde)CBKunder.SelectedItem;`

但是我收到一个错误，说我不能将 a`String`转换为 a `Kunde`，这是我认为已经在 ComboBox 中的对象。

我在这里缺少什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T13:10:17.597

您的选择似乎正在投射 a. **昆德纳文**进入名单。Kundenavn 真的有可能是一根弦吗？这意味着您的 itemsource 是字符串列表，而不是“Kunde”

给

```
CBKunder.ItemsSource = Master.getDC().Kundes; 
```

去吧。

# php - 希望帮助在 PDO 中编写此查询

> ID：15764924
> 
> 赞同：0
> 
> 时间：2013-04-02T13:07:42.253
> 
> 标签：php, pdo

我对 PHP 真的很陌生，但我一直在尽我所能学习，但我也知道我还有很多东西要学，所以放轻松。

我目前正在编写分类广告脚本，虽然代码已经过时了，但在我开始清理它之前情况要糟糕得多，现在我只是想让分类广告再次稳定，然后我打算回去更新使用更现代的语言 (PDO)，但现在我不知道从哪里开始（并且不想像我在学习 HTML、CSS、PHP 和 JS 时那样阅读几个月却一无所获）

下面的代码最初显示了它从 (tt_%s) 获取数据的表中的 Title 列，但我已经修改了将数据插入 DB 的表单，所以现在不再有“Title”列并且在现在有一张桌子的年份和型号，另一张桌子的制造商，但这是我感到困惑并寻求帮助的地方。

目前这就是我正在看的；（下面的代码我会解释更多）

```
<?php
echo  "<div class='mostPopular'>";
echo  "Popular<br>Listings";

$node = new sqlNode();
$node->table = "types";
$node->select = "ID";
$node->orderby = "ORDER BY rand()";

    if(($typeRS = $mysql->select($node)) === false )
        die('Unable to Retrieve Ad Type');

    $sql = array();
    $typeID = 0;
        while( $adType = mysql_fetch_assoc($typeRS) ){
            $typeID = sprintf("`tt_%s`", abs(intval($adType['ID'])));       
            $sql[] = sprintf("SELECT %s.Year, %s.Hits, %s.CategoryID, %s.ID, CONCAT('','%s') AS TypeID FROM %s WHERE (`ExpireDate` > NOW()) ",
                                $typeID,
                                $typeID,
                                $typeID,
                                $typeID,
                                intval($adType['ID']),
                                $typeID);

        }

    $sqlStr = @implode("union ",$sql);
    $sqlStr .= " ORDER BY Hits DESC LIMIT 5";

    if(($adRS = $mysql->exSql($sqlStr)) === false)
        die('Unable to Retrieve Most Popular Ads');

    while( $ad = mysql_fetch_assoc($adRS) ){
        echo "<p>";
        echo "<a href='detail.php?fatherID=".$ad['CategoryID']."&amp;TypeID=".$ad['TypeID']."&amp;ListingID=".$ad['ID']."'>";
        echo $ad['Title'];
        echo "</a>";
        echo "</p>";
    }
    echo "</div>";
?> 
```

对于初学者，我不知道 CONCAT('','%s') 是什么，也不知道 $sqlStr = @implode("union ",$sql); 是所有关于。

除了这些问题，考虑到这段代码已经过时并且我应该切换到 PDO，我希望有人可以准确地告诉我如何使用 PDO 执行这些查询，然后我可以通过示例学习并将相同的过程应用于其他查询整个网站。

如果有人不介意与我交谈到我可以使用 PDO 执行相同结果的程度，我将不胜感激，并在我热切等待您的回复时提前感谢大家。

顺便说一句，在研究了过去几个月我能找到的所有 PHP 和 MySql 教程后，我问了这个问题

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:38:46.063

尽管“请将此代码重写为 PDO”过于本地化，但您遇到的真正问题需要不同的解决方案。

首先，**您需要修复您的数据库架构。**它是可怕的。

*过早的优化*，是**万恶之**源，使您堕落了正确的道路。如果您无论如何都要合并它们，那么将数据分成小块是没有意义的。

您必须为广告准备**一张**桌子。
它将使所有这些代码过时，只留下一个可以在一个常规 PDO 调用中运行的常规查询。

接下来，这段代码是由一些 sprintf() 狂人编写的，他们不知从何而来使其过于复杂。事实上，这里真的不需要一个 sprintf()。

```
$sql = array();
while( $row = mysql_fetch_assoc($typeRS) ){
    $typeID = abs($row['ID']);
    $sql[]  = "SELECT Year, Hits, CategoryID, ID, '$typeID' AS TypeID 
                 FROM tt_$typeID WHERE ExpireDate > NOW()";
}
$sqlStr = implode("union ",$sql)." ORDER BY Hits DESC LIMIT 5" 
```

足够的。

但同样，不需要这个联合查询。一切都必须通过像这样的**单个**普通查询来执行

```
SELECT Year, Hits, CategoryID, ID, TypeID FROM ads ORDER BY Hits DESC LIMIT 5 
```

毫无疑问，您将能够使用您拥有的任何 PDO 示例来运行它

# uilabel - 覆盖方法drawTextInRect如何改变行距

> ID：15764930
> 
> 赞同：0
> 
> 时间：2013-04-02T13:07:54.867
> 
> 标签：uilabel, overriding, line, space

我应该如何覆盖以更改 UILabel 中的行间距？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T18:11:25.150

下一个线程讨论了管理 UILabel 行间距的替代方法。-

[UILabel中如何控制行距](https://stackoverflow.com/questions/5494498/how-to-control-the-line-spacing-in-uilabel)

# ios - UITableView 内部的 GLTapLabel

> ID：15764931
> 
> 赞同：0
> 
> 时间：2013-04-02T13:07:55.713
> 
> 标签：ios, objective-c, uitableview, storyboard

我`GLTapLabel`用来在我的`UITableView`. 它将有一些链接，我可以单击 as `GLTapLabels`，但是当我单击这些链接时，`tableView:didSelectRowAtIndexPath:`会触发。那么如何检测这些链接中的点击操作呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:32:48.057

实施[`tableView:willSelectRowAtIndexPath:`](http://developer.apple.com/library/ios/documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITableViewDelegate/tableView:willSelectRowAtIndexPath:)并返回`nil`您不想被选中的任何行。

> **返回值** 确认或更改选定行的索引路径对象。如果要选择另一个单元格，则返回 indexPath 以外的 NSIndexPath 对象。如果您不想选择该行，则返回 nil。

例如，仅防止在第一部分中选择：

```
- (NSIndexPath *)tableView:(UITableView *)tableView willSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    if (indexPath.section == 0) {
         return nil;
    }

    return indexPath;
} 
```

* * *

您还可以尝试设置或覆盖它`exclusiveTouch`，如[为什么 UIView ExclusiveTouch 属性不阻塞？](https://stackoverflow.com/questions/3946147/why-is-uiview-exclusivetouch-property-not-blocking).`GLTapLabel``hitTest:withEvent:`

# iphone - 同时在不同视图上的多个 CAAnimations

> ID：15764932
> 
> 赞同：3
> 
> 时间：2013-04-02T13:08:00.550
> 
> 标签：iphone, ios, objective-c, caanimation

我正在尝试同时执行几个动画。一个是从一个 uimageview 过渡到另一个，另一个是为标签的 translation.x 设置动画。标签位于 uiimageview 的顶部。

但是我得到的是翻译工作正常并且立即发生转换，或者基于隐藏属性的转换也适用于我的标签，它应该只被移动（它也从隐藏变为可见）。我不能使用 caanimationgroup，因为它们适用于不同的视图。

//CAKeyFrameAnimation 用于滑动标签

```
...

CAKeyframeAnimation *anim = [CAKeyframeAnimation animationWithKeyPath:@"transform.translation.x"];

NSArray *xValues = @[[NSNumber numberWithFloat:myLabel.bounds.origin.x],
                [NSNumber numberWithFloat:myLabel.bounds.origin.x + screenHalf],
                [NSNumber numberWithFloat:myLabel.bounds.origin.x + screenHalf * 4]];
[anim setValues:xValues];

NSMutableArray *timeFrames = [NSMutableArray array];

CGFloat timeStep = 1.0 / ([xValues count] - 1);

for (NSInteger i = 0; i < [xValues count]; i++)
{
    [timeFrames addObject:[NSNumber numberWithFloat:timeStep * i]];
}

[anim setKeyTimes:timeFrames];

[anim setDuration:duration];
[anim setFillMode:kCAFillModeForwards];
[anim setRemovedOnCompletion:FALSE];

[myLabel.layer addAnimation:anim forKey:nil];
... 
```

//从uiimageview过渡到另一个

```
...
CATransition *transition = [CATransition animation];
[transition setDuration:duration];
[transition setType:kCATransitionFade];

//These two are uiimageviews i'm switching from and to
initial.hidden = TRUE;
next.hidden = FALSE;

//Initial and next are subviews of container which itself is a subview of viewcontroller's main view
[container.layer addAnimation:transition forKey:@""]; 
```

如果我调用像上面这样的动画，则会立即发生转换，并且标签会正确地在屏幕上滑动。如果我将最后一行更改为：

```
[self.view.layer addAnimation:transition forKey:@""]; 
```

然后隐藏动画也适用于 myLabel。像上面这样组合动画的修复方法是什么，更详细地说是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:52:55.417

我会将整个代码包装在 CATransaction 中，以将不同的 CAAnimations 分组到一个组中。

将其与 CAKeyFrameAnimation 一起使用的伪代码如下所示：

```
[CATransaction begin];
// set completion block if you want
[CATransaction setCompletionBlock:^{ NSLog(@"I'm done"); }];

// start a keyframe animation
CAKeyframeAnimation *key1 = .....

// start another keyframe animation block
CAKeyframeAnimation *key2 = ......

// Maybe do a basic animation
CABasicAnimation *anim1 = .....

// close out all the animations and have them start
[CATransaction commit]; 
```

# mysql - 按具有 max(date_field) 的 id 分组

> ID：15764935
> 
> 赞同：2
> 
> 时间：2013-04-02T13:08:20.243
> 
> 标签：mysql, sql, select, join

要构建报告，我必须选择一些关于我所有客户的最后交易状态的信息。到目前为止，这是我得到的：

```
SELECT c.firstname, c.lastname, d.product_name, o.payment, s.name, h.date_add
FROM ps_orders o
INNER JOIN ps_order_detail d ON d.id_order = o.id_order
INNER JOIN ps_customer c ON c.id_customer = o.id_customer
INNER JOIN ps_order_history h ON o.id_order = h.id_order
INNER JOIN ps_order_state_lang s ON s.id_order_state = h.id_order_state
WHERE s.id_lang =6
GROUP BY c.id_customer
HAVING MAX(h.date_add) 
```

对于每个客户，此查询在我需要最后一个日期时选择第一个日期（字段**h.date_add ）。**似乎 MySQL 忽略了**HAVING**。

我试图进行子选择，但它也不起作用。

感谢任何答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T13:10:43.220

在这里，您需要有一个子查询，它`date_add`为每个`id_order`on table获取最新信息`ps_order_history`。然后，子查询的结果将连接回原始表`ps_order_history`，前提是它可以在两列上计算：`date_add`和`id_order`。

```
SELECT  c.firstname, 
        c.lastname, 
        d.product_name, 
        o.payment, 
        s.name, 
        h.date_add
FROM    ps_orders o
        INNER JOIN ps_order_detail d ON d.id_order = o.id_order
        INNER JOIN ps_customer c ON c.id_customer = o.id_customer
        INNER JOIN ps_order_history h ON o.id_order = h.id_order
        INNER JOIN  
        (
            SELECT  id_order, MAX(date_add) max_date
            FROM    ps_order_history
            GROUP   BY id_order
        ) x ON  h.id_order = x.id_order AND
                h.date_add = x.max_date
        INNER JOIN ps_order_state_lang s ON s.id_order_state = h.id_order_state
WHERE   s.id_lang =6
GROUP   BY c.id_customer 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T13:11:09.647

要获得最后日期，您需要加入：

```
SELECT c.firstname, c.lastname, d.product_name, o.payment, s.name, h.date_add
FROM ps_orders o
INNER JOIN ps_order_detail d ON d.id_order = o.id_order
INNER JOIN ps_customer c ON c.id_customer = o.id_customer
INNER JOIN ps_order_history h ON o.id_order = h.id_order
INNER JOIN ps_order_state_lang s ON s.id_order_state = h.id_order_state
inner join (select o.id_customer, max(oh.date_add) as maxdate from ps_order_history h join ps_order o on h.id_order = o.id_order group by o.id_customer) omax on omax.id_customer = o.id_customer and o.date_add = omax.maxdate
WHERE s.id_lang =6
GROUP BY c.id_customer 
```

您的 having 子句计算最大日期，然后在它不等于 0 时成功（大多数情况下）。

# java - Java垃圾收集器是否会回收包含对其他对象的引用的非引用对象

> ID：15764939
> 
> 赞同：1
> 
> 时间：2013-04-02T13:08:36.203
> 
> 标签：java, list, garbage-collection

当我学习**LinkedList**数据结构时，就会出现这个问题。假设每个**链接**（或节点）都由一个包含两个字段的对象表示，*数据*和*下一个*指向下一个链接。如果我想删除一个特定的节点，显然我会更新上一个链接的*下一个*字段。但是我应该将已删除链接的*下一个*字段设置为空，以确保它会被垃圾收集器回收吗？

如果我的描述不清楚，我会尝试概括（或简化）我的问题。假设类**A的对象****a1**具有一个字段，该字段引用同一类的另一个对象**a2**。如果没有对对象**a1**的引用，它是否符合垃圾收集器的条件？**或者我们必须将a1**中的引用字段显式设置为***null***？（不要关心对象**a2 ，除了****a1**中的引用字段之外，还有其他对它的引用）。

 ******** * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T13:10:43.373

垃圾收集器理想地收集程序流无法访问的所有对象。即使此对象引用了 JVM 中的所有内容。
如果程序的所有运行线程不包含对它的任何*直接*或*间接*引用，则对象将变得不可访问。
直接引用如下所示：

```
void main(String... args){
  Object a = new Object(); // <- from here main thread of program 
                           //    has reference to object `a`
  ...
} 
```

间接引用如下所示：

```
void main(String... args){
   List b = new ArrayList();
   b.add(new Object()); // <- here you can't access object by typing `a`
   // as in previous example, but you can get access with `b.get(0);`
   // so that object can be accessed indirectly -> it is reachable.
} 
```

它还可以正确处理大对象对象的情况，这些对象相互引用，但程序流不再可以访问这些对象。

```
MyClass a = new MyClass();
MyClass b = new MyClass();
a.field = b;
b.field = a;
// at this point a and b are reachable so they cannot be collected
b = null;
// at this point b's object is reachable indirectly through `a.field`
// so neither a nor b can be collected
a = null;
// at this point you cannot reach neither a nor b
// so a and b can be garbage collected, 
// despite the fact that a is referenced by b and vice versa 
```

UPD：添加示例，更改了一些单词以使答案更清晰。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T13:33:49.800

您的对象 a1 可以被收集，即使它的字段仍然引用其他对象。您不需要将其字段设置为空。

垃圾收集器收集不可*到达*的对象。一个对象可以保存对其他对象的引用，并且仍然可以被收集。一个对象可能有对它的引用，来自其他不可访问的对象，并且仍然被收集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T13:13:22.590

所有孤立对象都自动符合垃圾回收条件。而且您不需要显式设置对 null 的引用（但这是一个很好的编码习惯）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T13:17:23.247

当垃圾收集器运行时，它会看到现在`a1`需要进行垃圾收集，因为不再有对它的引用。

它还将删除`a1`指向对象的引用字段`a2`

但仍然是`a2`（正如您所提到的`a2` *，除了 a1 中的引用字段之外还有其他对它的引用*），因此它不符合垃圾收集的条件，因此它仍然存在。*******

# regex - regEx 搜索/替换变量名，不带“_”

> ID：15764940
> 
> 赞同：0
> 
> 时间：2013-04-02T13:08:36.903
> 
> 标签：regex

在项目中，我想重命名一些私有变量名以包含前缀`"_"`. 例如：交换`"val"`到`"_val"`

但是带有“_val”的名称已经存在。因此我`[^_]val`在我的搜索模式中使用了。例如，这找到`"if (val =="`但取代了`"("`给我`"if val =="`

我如何需要将模式更改为：查找所有出现的“val”，`"_"`但不替换第一个字符。

（希望我正确地解释了这个问题——如果没有，对不起）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:10:58.567

```
/(?<!_)val/ 
```

如果您可以访问[后视](http://www.regular-expressions.info/lookaround.html)。

**编辑：**
那就去吧：

```
/([^_])val/ 
```

当您之前捕获该字符并确保它不是下划线时，您可以替换为以下内容：

```
$1_val 
```

# sql - 从类似 XML 的值列中提取值

> ID：15764944
> 
> 赞同：0
> 
> 时间：2013-04-02T13:08:48.047
> 
> 标签：sql, sql-server, sql-server-2008

我正在分享一些两个表结构，如下所示。

表名：ATTRB

```
CMPG_ID     ATTR_NAME     ATTR_DESC    REQUIRED    TYPE          ATTR_SEQ
12765   Attribute1 attribute1   1            String     2
12765   OFFERTA   Offer       1     Indentification 1 
```

表名：LEAD

```
CMPG_ID  DYNAMIC_COLUMN
12765             <OFFERTA MaskType="Indentification">20110508</OFFERTA><Attribute1
                MaskType="String">7894568978</Attribute1> 
```

我创建了如下程序：

```
ALTER PROCEDURE [dbo].[up_Attrs_Get](   
    @CampaignID varchar(10))  
AS  

BEGIN  
SELECT ATTRB.CMPG_ID AS CampaignID,  
  ATTRB.ATTR_NAME AS AttributeName ,  
 ATTRB.ATTR_DESC AS AttributeDesc,  
 ATTRB.REQUIRED AS Required,  
        CASE WHEN ATTRB.REQUIRED = 0 Then 'No'  
        ELSE 'Yes'   
        END as RequiredState,  
 CASE
 WHEN ATTRB.TYPE <> '' THEN 
 ATTRB.TYPE
 ELSE 'String'
 END
 AS AttributeType,  
 ATTRB.ATTR_SEQ AS AttributeSeq  
FROM ATTRB 
WHERE ATTRB.CMPG_ID = @CampaignID ORDER BY ATTR_SEQ
END 
```

现在我需要提取如下结果。

```
CMPG_ID ATTR_NAME      ATTR_DESC   REQUIRED   TYPE             ATTR_SEQ  Value
12765   Attribute1     attribute12  1   String          2      20110508
12765   OFFERTA        Offer        1   Indentification 1      7894568978 
```

Value 列应该是从 LEAD.Dynamic 列中提取的值。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:05:07.837

如果您知道可以在 XML 中的所有元素名称（即元素名称列表是有限枚举），您可以将它们用作 PIVOT 的来源（请参阅 SQL Pivot 运算符）：

```
select DYNAMIC_COLUMN.value('./OFFERTA[1]','varchar(max)') AS OFFERTA
    , DYNAMIC_COLUMN.value('./Attribute1[1]','varchar(max)') AS Attribute1
from    LEAD
WHERE   CMPG_ID = 12765 
```

否则，您可以将这些值联合起来以避免使用 PIVOT 运算符：

```
select 'OFFERTA' AS ATTR_NAME, DYNAMIC_COLUMN.value('./OFFERTA[1]','varchar(max)') AS VALUE
from    LEAD
WHERE   CMPG_ID = 12765
UNION ALL
select 'Attribute1' AS ATTR_NAME, DYNAMIC_COLUMN.value('./Attribute1[1]','varchar(max)') AS VALUE
from    LEAD
WHERE   CMPG_ID = 12765 
```

另一方面，如果您不知道所有可能的元素名称（即可以随时从外部来源引入新的元素名称），那么它会复杂得多，因为您需要使用一种“反射“在 XML 上。请参阅以下链接：

[http://www.jasonfollas.com/wiki/(X(1)S(te4lutlbagfz1qblpl3clbhm))/Default.aspx?Page=SQLXML_Tricks_ElementNames&AspxAutoDetectCookieSupport=1](http://www.jasonfollas.com/wiki/(X(1)S(te4lutlbagfz1qblpl3clbhm))/Default.aspx?Page=SQLXML_Tricks_ElementNames&AspxAutoDetectCookieSupport=1)

[http://sqlblog.com/blogs/peter_debetta/archive/2010/02/09/shredding-xml-into-hierarchyid-a-new-look.aspx](http://sqlblog.com/blogs/peter_debetta/archive/2010/02/09/shredding-xml-into-hierarchyid-a-new-look.aspx)

# windows-runtime - 缺少 System.WindowsRuntimeExtensions？

> ID：15764945
> 
> 赞同：0
> 
> 时间：2013-04-02T13:08:50.153
> 
> 标签：windows-runtime, windows-store-apps, async-await

我正在尝试通过 Windows RT 组件向我的消费 JS 公开一个异步方法。

在没有过多的初始细节的情况下，我读过的一些文章指向了一个`AsAsyncOperation()`应该可用的扩展方法`Task<T>`（示例文章：http: [//marcominerva.wordpress.com/2013/03/21/how-to -expose-async-methods-in-a-windows-runtime-component/](http://marcominerva.wordpress.com/2013/03/21/how-to-expose-async-methods-in-a-windows-runtime-component/) )

这是它的 MSDN 链接，所以我知道它应该存在！：

[http://msdn.microsoft.com/en-gb/library/system.windowsruntimesystemextensions.aspx](http://msdn.microsoft.com/en-gb/library/system.windowsruntimesystemextensions.aspx)

目前让我感到困惑的是，我似乎根本没有'AsAyncOperation'功能。我需要做些什么来确保这些扩展方法可用吗？

# java - 错误：“->”的基本操作数具有非指针类型“JNIEnv”

> ID：15764948
> 
> 赞同：30
> 
> 时间：2013-04-02T13:08:54.557
> 
> 标签：java, java-native-interface

```
#include <stdio.h>
#include <jni.h>

 JNIEnv* create_vm() {
    JavaVM* jvm;
    JNIEnv* env;
    JavaVMInitArgs args;
    JavaVMOption options[1];

    /* There is a new JNI_VERSION_1_4, but it doesn't add anything for the purposes of our example. */
    args.version = JNI_VERSION_1_2;
    args.nOptions = 1;
    options[0].optionString = "-Djava.class.path=/home/test/workspace/pankajs/"
            "jikes/JikesRVMia32-linuxproduction/target/tests/stress/prototype/basic/classes";
    args.options = options;
    args.ignoreUnrecognized = JNI_FALSE;

    JNI_CreateJavaVM(&jvm, (void **)&env, &args);
    return env;
}

void invoke_class(JNIEnv* env) {
    jclass helloWorldClass;
    jmethodID mainMethod;
    jobjectArray applicationArgs;
    jstring applicationArg0;

    helloWorldClass = (*env)->FindClass(env, "/test/org/jikesrvm/basic/core/bytecode/TestSwitch");

    mainMethod = (*env)->GetStaticMethodID(env, helloWorldClass, "main", "([Ljava/lang/String;)V");

    applicationArgs = (*env)->NewObjectArray(env, 1, (*env)->FindClass(env, "java/lang/String"), NULL);
    applicationArg0 = (*env)->NewStringUTF(env, "From-C-program");
    (*env)->SetObjectArrayElement(env, applicationArgs, 0, applicationArg0);

    (*env)->CallStaticVoidMethod(env, helloWorldClass, mainMethod, applicationArgs);
}

int main(int argc, char **argv) {
    JNIEnv* env = create_vm();
    invoke_class( env );
}

I am trying to learn how JVM is actually invoked from bootstrap C files. 
```

我在互联网上找到了这个例子，我在运行它时遇到了一些问题。

据我所知，我正确指定了构建命令，

```
 g++ -g -I /usr/lib/jvm/java-6-sun-1.6.0.26/include -I /usr/lib/jvm/java-6-sun-1.6.0.26/include/linux CallJVM.c 
```

我的意图是使用 jikesrvm 实际运行它，但为了进行试验，我选择使用 JVM。我得到的错误是：

```
CallJVM.c: In function ‘JNIEnv* create_vm()’:
CallJVM.c:14:4: warning: deprecated conversion from string constant to ‘char*’
CallJVM.c: In function ‘void invoke_class(JNIEnv*)’:
CallJVM.c:28:26: error: base operand of ‘->’ has non-pointer type ‘JNIEnv’
CallJVM.c:30:21: error: base operand of ‘->’ has non-pointer type ‘JNIEnv’
CallJVM.c:32:26: error: base operand of ‘->’ has non-pointer type ‘JNIEnv’
CallJVM.c:32:57: error: base operand of ‘->’ has non-pointer type ‘JNIEnv’
CallJVM.c:33:26: error: base operand of ‘->’ has non-pointer type ‘JNIEnv’
CallJVM.c:34:8: error: base operand of ‘->’ has non-pointer type ‘JNIEnv’
CallJVM.c:36:8: error: base operand of ‘->’ has non-pointer type ‘JNIEnv’ 
```

我注意到在 C 和 C++ 中实现的不同方式，但我认为我写得对。

编辑：在用 gcc 编译时，我得到了

```
undefined reference to `JNI_CreateJavaVM' 
```

这就是 eclipse 中提示的内容，但我认为我的配置不合适。当我使用`ctrl+click`它时，它也会让我参考 jni.h，但为什么它仍然缺少参考？我特别提到了我在包含路径上的文件夹。

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2013-04-02T13:14:37.307

> 我注意到在 C 和 C++ 中实现的不同方式，但我认为我写得对。

您正在使用该`C`变体，但正在使用 编译`g++`，这会调用`C++`编译器（即使您的源文件具有`.c`扩展名）。

要么更改变`C`体，例如

```
(*env)->FindClass(env, ...) 
```

对于`C++`变体，例如

```
env->FindClass(...) 
```

或切换您的编译器以`gcc`将源代码编译为`C`代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:47:01.633

我正在解决在其他 SO 帖子中找到的工作。我直接使用了这个 - `gcc -g -I /usr/lib/jvm/java-6-sun-1.6.0.26/include -I /usr/lib/jvm/java-6-sun-1.6.0.26/include/linux -L /usr/lib/jvm/java-6-sun-1.6.0.26/jre/lib/i386/server -ljvm CallJVM.c` 并创建了 a.out。然后我需要将它与服务器文件夹中的 libjvm.so 链接，如帖子中所述。

一个非常漂亮的解释已经放在[这里](https://stackoverflow.com/questions/9952889/usr-bin-ld-cannot-find-ljvmduring-compiling-jni-project)

# authentication - worklight http 适配器和 NTLM 身份验证

> ID：15764950
> 
> 赞同：0
> 
> 时间：2013-04-02T13:08:56.283
> 
> 标签：authentication, adapter, ntlm, ibm-mobilefirst

我正在尝试在 Worklight HTTP 适配器中实现 NTLM 身份验证，以便连接到 M$ 后端服务器，例如 Sharepoint Web 服务。我已经用 <ntlm> 设置了我的 adapter.xml 文件。

adapter.xml 结构的第一个版本是：

```
<authentication>
  <ntlm />
  <serverIdentity>
    <username>user</username>
    <password>password</password>
  </serverIdentity>
</authentication> 
```

我的测试是使用 Worklight Studio 在本地完成的，我遇到以下问题：

1) 调用 WL 过程时出错：

```
Procedure invocation failed:Could not resolve placeholder 'local.hostname' 
```

我必须把这个'local.hostname'设置放在哪里？

2）我试图指定文档（IBM infocenter）中给出的ntlm标签的主机名属性，WL Studio说xml格式不正确。

```
<authentication>
  <ntlm hostname="myComputer.intranet.com"/>
  <serverIdentity>
    <username>user</username>
    <password>password</password>
  </serverIdentity>
</authentication> 
```

其中“myComputer.intranet.com”是我公司网络中的计算机名称。

```
Attribute 'hostname' is not allowed to appear in element 'ntlm' 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-10-15T10:01:12.577

来自 IBM 服务请求的响应：用于向启用 NTLM 的后端系统进行身份验证的用户名必须用 windows 域名填充，后跟一个 \ 和用户名。

```
<serverIdentity>
  <username>domain\user</username>
  <password>password</password>
</serverIdentity> 
```

这适用于硬编码的 serverIdentity 功能。

由于我公司的安全治理，不能有“通用”服务器身份。所以我必须将最终用户的凭据转发到后端系统进行身份验证。

如何使用 Worklight 身份验证机制（例如基于适配器）执行此操作，我在哪里可以为我的用户名设置域？我可以根据适配器混合几种安全领域吗？

# asp.net - 如何制作“重设密码”？

> ID：15764954
> 
> 赞同：1
> 
> 时间：2013-04-02T13:09:02.087
> 
> 标签：asp.net

如何使此代码发送新生成的密码或用户发送旧密码？

我想出了如何让代码发送电子邮件！发送者不是问题，但接收者才是问题。Where`EmailAdresNaar`必须替换为某人放入文本框或其他内容的电子邮件。

```
public void SendEmail()
    {

        string emailAdresVan = "invoerenSVP";
        string password = "invoerenSVP";

        MailMessage msg = new MailMessage();

        msg.From = new MailAddress(emailAdresVan);
        msg.To.Add(new MailAddress(EmailAdresNaar));
        msg.Subject = Onderwerp;
        msg.Body = Bericht;
        msg.IsBodyHtml = true;

        SmtpClient smtpClient = new SmtpClient("smtp.gmail.com", 587);

        NetworkCredential loginInfo = new NetworkCredential(emailAdresVan, password);

        smtpClient.EnableSsl = true;
        smtpClient.UseDefaultCredentials = true;
        smtpClient.Credentials = loginInfo;

        smtpClient.Send(msg); 

       }
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:21:11.543

像这样放置您需要的数据：

```
msg.From = new MailAddress("support@yoursite.com");
msg.To.Add(new MailAddress(UserEmailTextBox.Text));
msg.Subject = "New Password";
msg.Body = GenerateNewPassword(); 
```

和方法的示例`GenerateNewPassword()`，但是您应该使返回随机生成的新密码更加复杂（您需要谷歌搜索不同的实现变体）：

```
public string GenerateNewPassword()
{
    string new_pass = "";
    // generate new password
    return new_pass;
} 
```

理想情况下，您应该制作另一个类似 的页面`PasswordsReset.aspx`，并使用某种类型的 向用户发送指向该页面的链接`GUID`，用户可以在其中自己创建新密码。

# python - Python将指针传递给Delphi函数

> ID：15764955
> 
> 赞同：0
> 
> 时间：2013-04-02T13:09:11.313
> 
> 标签：python, delphi, dll, ctypes

我有在 Delphi 中构建的 dll，我尝试从中调用函数。函数声明如下所示：

```
function GetUid(UID:Pointer):Integer; stdcall; 
```

这相当于这个 C 函数签名：

```
 int GetUID(void *pointer); 
```

使用 ctypes 处理的库：

```
from ctypes import *

lib = cdll.LoadLibrary("mylib.dll") 
```

但我卡在这里：

```
res = lib.GetUid(?) 
```

我需要在这个函数中传递什么？指针是 void *，但是如何在 python 中正确地做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T22:15:13.693

Python 是一种高级语言。您通常不会从 C 或 Pascal 本机库中导入 DLL 并调用它并将 Python 中的变量传递给采用`void *`原始类型指针的 C 或 Pascal 函数，然后以这种方式操作原始内存。

简而言之，如果你知道你在做什么，你会比尝试做你在这里做的事情更清楚。

假设您的实现是这样的：

```
function GetUid(UID:Pointer):Integer; stdcall;
var
  P2:^Integer;
begin
  P2 := UID;
  P2^ := 0;
end; 
```

然后，您要做的是将地址传递给 32 位整数。当然，我上面的例子是荒谬的，因为上面有意义的是将参数声明为“int *pointer”（用 C 术语）而不是“void *pointer”。

不管你在做什么，接下来可能发生的事情是你会破坏你的 python 解释器的堆，并导致很多有趣的崩溃和错误。

一个更明智的方法是阅读有关编写可以操作本机 Python 类型 (PyObject) 的 C 扩展的 Python 文档，并且如果您愿意，可以使用 pascal 做同样的事情。

p4d 似乎是在 delphi 中编写扩展 DLL 的一种可行方法：

```
 https://code.google.com/p/python4delphi/source/list 
```

# c++ - OpenCv：如何将 Mat::Rect 保存到文件中？

> ID：15764956
> 
> 赞同：3
> 
> 时间：2013-04-02T13:09:12.627
> 
> 标签：c++, opencv, tracking

我将相机图像捕获到图像中。我从图像中选择对象并跟踪对象。但我想将选择保存到文件中，因为我不想每次都选择对象。这是我的选择部分；

```
Mat image;
Rect selection;

selection.x = MIN(x, origin.x);
selection.y = MIN(y, origin.y);
selection.width = abs(x - origin.x);
selection.height = abs(y - origin.y);
selection &= Rect(0, 0, image.cols, image.rows); 
```

如何保存选择或如何首次选择对象？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-24T08:34:03.583

您不能`Rect`直接使用存储 a `FileStorage`，但可以存储`x`、`y`和`width`的整数值`height`。

写入文件：

```
Rect rect;
// ... init your Rect

FileStorage fs("rect.yml", FileStorage::WRITE);
if( fs.isOpened() ){
    fs << "x" << rect.x << "y" << rect.y;
    fs << "width" << rect.width << "height" << rect.height;
    fs.release();
}
else cout << "Error: can not save the rect\n"; 
```

从文件中读取

```
Rect rect;

FileStorage fs("rect.yml", FileStorage::READ);
if( fs.isOpened() ){
    fs["x"] >> rect.x;
    fs["y"] >> rect.y;
    fs["width"] >> rect.width;
    fs["height"] >> rect.height;
}
else cout << "Error: can not load the rect\n"; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-03T08:59:34.110

尝试[使用 OpenCV 文件存储](http://docs.opencv.org/modules/core/doc/xml_yaml_persistence.html?highlight=file%20storage#FileStorage)来保存它自己的矩形。或者，如果您想保存图片的选定部分，则使用[cv::Mat roi 构造函数](http://docs.opencv.org/modules/core/doc/basic_structures.html#mat-mat)，然后使用[cv::imwrite](http://docs.opencv.org/modules/highgui/doc/reading_and_writing_images_and_video.html#imwrite)保存。

# c++ - 容器和派生类

> ID：15764960
> 
> 赞同：1
> 
> 时间：2013-04-02T13:09:21.180
> 
> 标签：c++, class, containers, derived

我正在制作一个非常简单的游戏，其中对象（元素 A 或 B）在屏幕周围飞行、碰撞等。

A 和 B 之间的唯一区别是对象的颜色（A = 黑色 B = 白色）。

是否可以有一个元素容器容器（或 20 个元素）来容纳 10 个 A 和 10 个 B。我环顾四周，如果我有 A 型或 B 型的 Vector 但不是混合物，我可以做到。

任何帮助将非常感激！谢谢 - 迟来的复活节快乐

凯杰

编辑：A和B都具有许多不同的特征，例如它们可以移动的不同速度以及不同的能力。E,g A 可以发射激光，但 B 不能。这就是为什么我使用不同的类。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T13:11:19.443

C++ 容器是同质的，这意味着您不能在其中存储不同类型的对象。但是，您可以存储指向基本类型的指针并使用两个派生类`A`和`B`类。

但是，在您的情况下，如果唯一的区别是颜色，我认为没有理由拥有不同的课程。只需在类上有一个颜色属性。

如果您需要不同的类，您可以使用如下所示的基类：

```
class Base
{
public:
// base properties both classes share
// virtual methods etc.
};

class A : public Base
{
public:
 // class A specific methods/properties
};

class B : public Base
{
public:
 // class B specific methods/properties
}; 
```

现在您可以拥有一个 Base 对象指针向量，它们可以是 type`A`或`B`.

```
std::vector<Base*> objects;

A *a = new A();
B *b = new B();
objects.push_back(a);
objects.push_back(b); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:15:53.750

如果你真的需要在容器中存储不同的对象，那么也许：

```
`boost::any` 
```

是正确的答案吗？

# maven - 如何让 GroovyDoc 正确记录具有泛型类型参数的返回类型？

> ID：15764963
> 
> 赞同：2
> 
> 时间：2013-04-02T13:09:24.847
> 
> 标签：maven, ant, groovy, groovydoc

我有一个 ant 任务，它生成在我的 Maven pom 文件中定义的 GroovyDoc。除了返回如下内容的方法的方法文档之外，一切看起来都很棒：

```
 List<WebElement> are documented with List as the return type. The generic type  parameter is totally missing:

    List    getAccountsMenuOptions()

    Gets the list of links that are currently displayed in the account selector menu

    I expected something like this:

    List<WebElement>    getAccountsMenuOptions()

    Gets the list of links that are currently displayed in the account selector menu 
```

这就是我定义任务的方式：

```
 <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-antrun-plugin</artifactId>
        <version>1.7</version>
        <executions>
           <execution>
              <id>groovydoc</id>
              <phase>package</phase>
              <goals>
                 <goal>run</goal>
              </goals>
              <configuration>
                 <target>
                    <taskdef name="groovydoc"
                     classname="org.codehaus.groovy.ant.Groovydoc" 
                     classpathref="maven.compile.classpath"/>

                    <groovydoc destdir="target/groovydoc"
                     sourcepath="src/main/groovy" use="true"
                     windowtitle="Epiphany"
                     doctitle="Epiphany">

                       <link packages="java.,org.xml.,javax.,org.xml."
                        href="http://download.oracle.com/javase/7/docs/api" />
                       <link packages="org.junit.,junit.framework."
                        href="http://kentbeck.github.com/junit/javadoc/latest" />
                       <link packages="groovy.,org.codehaus.groovy."
                        href="http://groovy.codehaus.org/api/" />
                       <link packages="org.testng."
                        href="http://groovy.codehaus.org/api/" />
                     <link packages="org.openqa.selenium."
                     href="http://selenium.googlecode.com/svn/trunk/docs/api/java/" /> 
                   </groovydoc>
                 </target>
              </configuration>
           </execution>
        </executions>
     </plugin> 
```

# jquery - Jquery 选择器不适用于将 dom 元素分配给变量

> ID：15764964
> 
> 赞同：12
> 
> 时间：2013-04-02T13:09:26.227
> 
> 标签：jquery

我有一个程序将变量分配为：

```
var theList = document.getElementById('theList'); 
```

它使用 jquery，但如果我这样写：

```
var theList = $('#theList'); 
```

使用该变量的函数不起作用。

jquery 选择器和使用 getElementById 有什么区别？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-02T13:11:07.963

`document.getElementById` 返回一个本机 DOM Element 对象，可以直接访问该节点的属性。

jQuery 函数改为返回“jQuery 集合”，即一个 jQuery 对象，它具有一组关联的函数/插件等，其作用类似于 DOM 节点数组。

用于区分前者和后者的常用约定是在包含后者的变量前面加上`$`：

要从 jQuery 集合中提取单个元素作为 DOM 节点，请使用`.get(n)`或`[n]`.

```
var $theList = $('#theList');   // jQuery collection
var theList = $theList[0];      // DOM node
var theList = $theList.get(0);  // also a DOM node 
```

属性和属性访问取决于您是否拥有 jQuery 集合：

```
var id = $theList.attr('id');   // jQuery function
var id = theList.id;            // native property 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T13:10:50.197

第一个`theList`是 DOM 元素；第二个`theList`（最好写成`$theList`）是一个[jQuery 对象](http://api.jquery.com/jquery/)。您的功能显然期待前者而不是后者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T13:33:18.177

`getElementById`函数返回具有给定 id 的第一个元素，其中 jquery 选择器返回称为“包装集”的对象。您可以使用`each`函数来遍历它并调用您的函数。

请参阅这篇文章： http: [//www.devx.com/codemag/Article/40923](http://www.devx.com/codemag/Article/40923)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T13:11:29.967

那是因为 $('#theList') 返回一个 JQuery 对象，而不是一个 DOM 对象。JQuery 对象没有与 Javascript 元素/节点相同的方法和属性。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-02T13:12:19.733

标准的 getElementByID 函数返回一个对 DOM 元素的 JavaScript 引用，而 jQuery 函数返回一个 jQuery 对象（它包含对 DOM 元素的零个或多个 JavaScript 引用的类数组结构）。

为了使它们兼容，您可以使用：

```
var theList = $('#theList').get(0); 
```

注意：编辑以帮助维护世界和平并纠正评论者很快指出的我仓促输入的术语。

# machine-learning - 使用 Jahmm 对观察结果进行分类

> ID：15764970
> 
> 赞同：1
> 
> 时间：2013-04-02T13:09:37.090
> 
> 标签：machine-learning, gesture-recognition, hidden-markov-models

我目前正在开发手势识别应用程序，并且正在使用 HMM（通过 Jahmm）。目前我有两个手势（向上和向下），所以我构建了 2 个 HMM，并带有一些训练数据。

我使用 BaumWelchLearner 对它们进行了训练，并创建了一个从我的系统获得的“样本”观察序列，我必须对其进行分类。

我认为我设法从我找到的少量支持中完成了上述步骤。但目前我被困在最后阶段，我正在尝试计算最有可能适合我当前序列的 HMM，但我没有有用的输出（或者我可能无法理解它们）。这是我的示例代码，然后是输出。

```
 //gesture classes
    HmmUp up = new HmmUp();
    HmmDown down = new HmmDown();
    final Hmm<ObservationDiscrete<DirectionVector>> upLearnt;
    final Hmm<ObservationDiscrete<DirectionVector>> downLearnt;

    //train - should read TRAINED HMM OBJECTS in application
    BaumWelchLearner bwl = new BaumWelchLearner();
    bwl.setNbIterations(100);

    upLearnt = bwl.learn(up, up.getTrainingMaterial());
    downLearnt = bwl.learn(down, down.getTrainingMaterial());

    ArrayList<Hmm<ObservationDiscrete<DirectionVector>>> trainedHmms = new ArrayList<Hmm<ObservationDiscrete<DirectionVector>>>(){{
        add(upLearnt);
        add(downLearnt);
    }};

    ArrayList<ObservationDiscrete<DirectionVector>> currentSequence = new ArrayList<ObservationDiscrete<DirectionVector>>(){{
        add(new ObservationDiscrete<DirectionVector>(DirectionVector.NoMovement));
        add(new ObservationDiscrete<DirectionVector>(DirectionVector.Down));
        add(new ObservationDiscrete<DirectionVector>(DirectionVector.Up));
        add(new ObservationDiscrete<DirectionVector>(DirectionVector.Up));
        add(new ObservationDiscrete<DirectionVector>(DirectionVector.Up));
        add(new ObservationDiscrete<DirectionVector>(DirectionVector.Up));
        add(new ObservationDiscrete<DirectionVector>(DirectionVector.Up));
        add(new ObservationDiscrete<DirectionVector>(DirectionVector.UpLeft));
        add(new ObservationDiscrete<DirectionVector>(DirectionVector.Null));
        add(new ObservationDiscrete<DirectionVector>(DirectionVector.Null));
    }};

    //get the observation from the device (continuously feeding - 10 states always with nulls at the end?)
    for (Hmm<ObservationDiscrete<DirectionVector>> hmm : trainedHmms) {

        ViterbiCalculator vc = new ViterbiCalculator(currentSequence, hmm);
        for (int i = 0; i < vc.stateSequence().length; i++)
        {
            System.out.println(vc.stateSequence()[i]);
        }
        System.out.println(vc.lnProbability()); //e to the ln(x) = x

    } 
```

这是我正在使用的当前输出，似乎是“空”状态序列和负概率？！！！

0 0 0 0 0 0 0 0 0 0 -1.7976931348623157E308

0 0 0 0 0 0 0 0 0 0 -56.294579216353064

# javascript - 高度，outHeight等的jquery pass选项

> ID：15764972
> 
> 赞同：0
> 
> 时间：2013-04-02T13:09:38.337
> 
> 标签：javascript, jquery

我怎样才能修改这个插件，以便我可以传递我想使用的高度计算类型。例如`height()`或`outerHeight()`或`innerHeight()`

```
/*! 
* equalHeightColumns.js 1.0
*
* Copyright 2013, Paul Sprangers http://paulsprangers.com
* Released under the WTFPL license 
* http://www.wtfpl.net
*
* Date: Thu Feb 21 20:11:00 2013 +0100
*/
$.fn.equalHeightColumns = function(options) {
    defaults = { 
        minWidth: -1,               // Won't resize unless window is wider than this value
        maxWidth: 99999,            // Won't resize unless window is narrower than this value
        setHeightOn: 'min-height',   // The CSS attribute on which the equal height is set. Usually height or min-height
        heightMethod: 'outerHeight'
    };
    var $this   = $(this); // store the object
    options     = $.extend({}, defaults, options); // merge options

    // Recalculate the distance to the top of the element to keep it centered
    var resizeHeight = function(){

        // Get window width
        var windowWidth = $(window).width();

        // Check to see if the current browser width falls within the set minWidth and maxWidth
        if(options.minWidth < windowWidth  &&  options.maxWidth > windowWidth){
            var height = 0;
            var highest = 0;

            // Reset heights
            $this.css( options.setHeightOn, 0 );

            // Figure out the highest element
            $this.each( function(){
               // height = $(this).height(); BEFORE
                height = $(this).eval(options.heightMethod);
                if( height > highest ){
                    highest = height;
                }
            } );

            // Set that height on the element
            $this.css( options.setHeightOn, highest );
        } else {
            // Add check so this doesn't have to happen everytime 
            $this.css( options.setHeightOn, 0 );
        }
    };

    // Call once to set initially
    resizeHeight();

    // Call on resize. Opera debounces their resize by default. 
    $(window).resize(resizeHeight);
}; 
```

请参阅我添加的部分`$(this).eval(options.heightMethod);`我无法正确获取语法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:16:30.650

如果你错过了评论，

`$(this)[options.heightMethod]();`应该可以解决问题，但请确保验证 heightMethod 的值是否存在偶尔的错误输入，例如 Outer_Height 等。

只需检查您正在调用的函数是否`outerHeight`存在，即可快速完成验证。

```
if(typeof $(this)[options.heightMethod] != "undefined")
  $(this)[options.heightMethod]();
else
  // some warning / error. 
```

# dojo - digit / ToolTipDialog : 修改固定坐标 ToolTipDialog 的方向

> ID：15764976
> 
> 赞同：1
> 
> 时间：2013-04-02T13:09:49.230
> 
> 标签：dojo

有两种方法可以打开 ToolTipDialog。一种是通过给出 'around' 属性，它是一个 DOM 节点，另一种是通过给出 x 和 y 坐标。如果我们给出 'around' 属性，我们也可以给出 'orient' 属性来定义 ToolTipDialog 相对于 DOM 节点的定位。

但是，我必须打开与某个 gfx 形状相邻的 ToolTipDialog。由于此形状不是 Dom 节点，因此我必须使用 x、y 坐标来定位 ToolTipDialog。但在这种情况下，我总是得到一个默认方向（指针/缺口）总是向上。

有没有一种方法可以通过给出 x, y 坐标来改变方向，这样我可以确保 ToolTipDialog 现在以左侧或底部的凹口打开？我也可以修改这个缺口的创建点吗？ToolTipDialog 有可能打开了一些向上的字，我可能需要在其一侧的中心设置凹槽。

最后，我是否正确使用 ToolTipDialog 来达到我的目的，还是应该使用一些替代方法？

# youtube-api - 使用 .net 库通过 youtube api 在 youtube 上上传较大尺寸的视频会出现错误请求被中止：请求被取消

> ID：15764979
> 
> 赞同：1
> 
> 时间：2013-04-02T13:09:52.857
> 
> 标签：youtube-api

在 youtube 上上传超过 4 mb 大小的视频时会出现以下错误。

```
The request was aborted: The request was canceled.| at
System.Net.ConnectStream.CloseInternal(Boolean internalCall, Boolean
aborting) at
System.Net.ConnectStream.System.Net.ICloseEx.CloseEx(CloseExState
closeState) at System.Net.ConnectStream.Dispose(Boolean disposing) at
System.IO.Stream.Close() at
Google.GData.Client.GDataGAuthRequest.CopyRequestData() at
Google.GData.Client.GDataGAuthRequest.Execute(Int32 retryCounter) at
Google.GData.Client.GDataGAuthRequest.Execute() at
Google.GData.Client.MediaService.EntrySend(Uri feedUri, AtomBase
baseEntry, GDataRequestType type, AsyncSendData data) at
Google.GData.Client.Service.Insert(Uri feedUri, AtomEntry newEntry,
AsyncSendData data) at Google.GData.Client.Service.Insert[TEntry](Uri
feedUri, TEntry entry) at
Google.GData.YouTube.YouTubeService.Upload(String userName,
YouTubeEntry entry) at Google.YouTube.YouTubeRequest.Upload(String
userName, Video v) at Google.YouTube.YouTubeRequest.Upload(Video v) at
upload.Button1_Click(Object sender, EventArgs e) 
```

已经尝试了一些解决方案，例如

```
request.Settings.Timeout = 60 * 60 * 1000;

<httpRuntime executionTimeout="6000" maxRequestLength="100000" /> 
```

但同样的问题发生。请帮助我 代码如下：-

```
YouTubeRequest request = new YouTubeRequest(settings);
        //request.Settings.Maximum = 9999999;
        request.Settings.Timeout = 60 * 60 * 1000;          
        Video newVideo = new Video();

        newVideo.Title = TextBox1.Text;
        newVideo.Tags.Add(new MediaCategory("People", YouTubeNameTable.CategorySchema));
        newVideo.Keywords = "cars, funny";
        newVideo.Description = TextBox2.Text;
        newVideo.YouTubeEntry.Private = false;
        newVideo.YouTubeEntry.AccessControls.Add(new YtAccessControl("list", "denied"));
        newVideo.Tags.Add(new MediaCategory("mydevtag, anotherdevtag", YouTubeNameTable.DeveloperTagSchema));

        newVideo.YouTubeEntry.MediaSource = new MediaFileSource(f.ToString(), "video/x-flv");

        Video createdVideo = request.Upload(newVideo); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T06:27:44.300

只需在您的代码中添加这 3 行并尝试，

```
 YouTubeService service = new YouTubeService("Test", DEVELOPERKEY);
        ((GDataRequestFactory)request.Service.RequestFactory).Timeout = 9999999; 
        ((GDataRequestFactory)service.RequestFactory).KeepAlive = false; 
```

如果您的问题已解决，请将其标记为答案。

# android - “单共享运行时”始终部署到 android 设备

> ID：15764984
> 
> 赞同：1
> 
> 时间：2013-04-02T13:10:10.397
> 
> 标签：android, mono, xamarin.android, apk, xamarin

我正在尝试使用 xamarin.android 和 Visual Studio 2012 创建一个 APK，但是“包 ... apk 文件”的选项被禁用 - 我相信这是这里描述的错误：( [https://bugzilla. xamarin.com/show_bug.cgi?id=10530](https://bugzilla.xamarin.com/show_bug.cgi?id=10530)）。

但是，在部署到设备时仍然会创建一个 apk，问题是我只想要一个包含所有内容的 APK（所以我可以通过 Web 服务器部署它），但是当以这种方式构建时，即使在发布时使用“使用共享运行时” '未勾选，'单共享运行时'仍然安装在设备上。我在这里创建了一个问题：（[https://bugzilla.xamarin.com/show_bug.cgi?id=11419](https://bugzilla.xamarin.com/show_bug.cgi?id=11419)）但还没有回复..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T17:24:09.583

听起来您只想发布一个 APK，对吗？在这种情况下，可以从命令行构建 APK。如果您使用的是 Windows，则可以使用以下 Powershell 脚本作为模板自动执行此操作：

```
# First clean the Release target.
msbuild.exe HelloWorld.csproj /p:Configuration=Release /t:Clean

# Now build the project, using the Release target.
msbuild.exe HelloWorld.csproj /p:Configuration=Release /t:PackageForAndroid

# At this point there is only the unsigned APK - sign it.
# The script will pause here as jarsigner prompts for the password.
# It is possible to provide they keystore password for jarsigner.exe by adding an extra command line parameter -storepass, for example
#    -storepass <MY_SECRET_PASSWORD>
# If this script is to be checked in to source code control then it is not recommended to include the password as part of this script.
& 'C:\Program Files\Java\jdk1.6.0_24\bin\jarsigner.exe' -verbose -sigalg MD5withRSA -digestalg SHA1  -keystore ./xample.keystore -signedjar ./bin/Release/mono.samples.helloworld-signed.apk ./bin/Release/mono.samples.helloworld.apk publishingdoc

# Now zipalign it.  The -v parameter tells zipalign to verify the APK afterwards.
& 'C:\Program Files\Android\android-sdk\tools\zipalign.exe' -f -v 4 ./bin/Release/mono.samples.helloworld-signed.apk ./helloworld.apk 
```

在 Mac 上也可以从命令行构建。我通常会使用 Rake 构建文件自动执行此操作（您需要从[Albacore](http://albacorebuild.net/)为 .NET Rake 任务安装 gem ）。以下是您可以用作模板的 rakefile：

```
require 'albacore'

@file_version = "2.0.0.0"
@keystore     = "../keystores/opgenorth-release-key.keystore"
@alias_name   = "mytrips"
@input_apk    = "EmploymentStandardsJudgments.Android/bin/Release/net.opgenorth.esj.apk"
@signed_apk   = "EmploymentStandardsJudgments.Android/bin/Release/net.opgenorth.esj-signed.apk"
@final_apk    = "deploy/AlbertaEmploymentJudgments.apk"

task :default => [:clean, :versioning, :build, :sign] 

desc "Remove the bin and obj directories."
task :clean do
  rm_rf "EmploymentStandardsJudgments.Android/bin"
    rm_rf "EmploymentStandardsJudgments.Android/obj"
end

desc "Update the build number before compiling."
assemblyinfo :versioning do |asm|
    asm.input_file  = "EmploymentStandardsJudgments.Android/Properties/AssemblyInfo.cs"
    asm.output_file = "EmploymentStandardsJudgments.Android/Properties/AssemblyInfo.cs"
    asm.version = @file_version
    asm.file_version = @_file_version
end

desc "Compiles the project."
xbuild :build do |msb|
    msb.solution = "EmploymentStandardsJudgments.Android/EmploymentStandardsJudgments.Android.csproj"
    msb.properties = { :configuration => :release }
    msb.targets [ :Clean, :Build, :SignAndroidPackage ]
end

desc "Signs and zip aligns the APK."
task :sign do 
    sh "jarsigner",  "-verbose", "-sigalg", "MD5withRSA", "-digestalg", "SHA1", "-keystore",  @keystore, "-signedjar", @signed_apk, @input_apk, @alias_name
    sh "zipalign", "-f", "-v", "4", @signed_apk, @final_apk
end

desc "Install the APK on a device."
task :install do
    %x[adb shell pm uninstall -k net.opgenorth.esj.android]
    %x[adb install deploy/AlbertaEmploymentJudgments.apk]
end 
```

希望这可以帮助。