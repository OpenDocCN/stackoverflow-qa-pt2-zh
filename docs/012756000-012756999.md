# StackOverflow 问答 12756000-12756999

# android - 在我的 Android 应用程序中使用 MediaPlayer 时出错（不能在以不同方法定义的内部类中引用非最终变量 mp）

> ID：12756001
> 
> 赞同：0
> 
> 时间：2012-10-06T01:51:47.503
> 
> 标签：android, eclipse, media-player, inner-classes

我想在我的应用程序中添加一个播放按钮（我正在使用 MediaPlayer），但是当我声明我的 MediaPlayer 时，我可能做错了什么。

```
package com.example.tones;

import android.app.Activity;
import android.content.Intent;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ImageButton;
import android.widget.ImageView;
import android.widget.TextView;

public class TonosSet extends Activity
{
    /**
     * @see android.app.Activity#onCreate(Bundle)
     */
    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.tonos_set);

        Intent i = getIntent();
        int position = i.getExtras().getInt("id");

        MediaPlayer mp;

        ImageView imageView = (ImageView) findViewById(R.id.full_image_view2);
        TextView textView1 = (TextView)findViewById(R.id.namesong);
        TextView textView2 = (TextView)findViewById(R.id.artist);
        ImageButton play = (ImageButton) findViewById(R.id.ButtonPlay);
        ImageButton stop = (ImageButton) findViewById(R.id.ButtonStop);
        ImageButton setringtone = (ImageButton) findViewById(R.id.ButtonRingtone);

        switch (position)
        {
            case 0:        
                imageView.setImageResource(R.drawable.picture);
                textView1.setText("soundd");
                textView2.setText("aut");
                break;

            case 1:        
                imageView.setImageResource(R.drawable.picture);
                textView1.setText("sound");
                textView2.setText("aut");
                 break;
        }

        play.setOnClickListener(new OnClickListener()
        {
            @Override
            public void onClick(View v)
            {
                mp = MediaPlayer.create(TonosSet.this, R.raw.sound1); //Error 
                mp.start();  //Error again
            }
        });
    }
} 
```

我的错误是：

```
Cannot refer to a non-final variable mp inside an inner class defined in a different method 
```

如果我更改`MediaPlayer mp;`为`final MediaPlayer mp;`，则 eclipse 会显示此错误：

```
The final local variable cannot be assigned, since it is defined in an enclosing type. 
```

我不知道我的应用程序出了什么问题。我已经学习了很多教程，但没有人和我一样的错误，即使我认为我在做同样的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T02:12:13.540

I've fixed my problem:

```
public class TonosSet extends Activity{

private MediaPlayer mp; 
```

=D Thanks and sorry for this noob question.

# .net - 在 tfsbuild CI 的 versioninfo 中增加版本号

> ID：12756002
> 
> 赞同：2
> 
> 时间：2012-10-06T01:51:56.583
> 
> 标签：.net, msbuild, continuous-integration, tfsbuild

[我有一个 C# Web 解决方案，并且正在TFSBuild](http://msdn.microsoft.com/en-us/library/bb558974%28v=vs.100%29.aspx) 2010中设置它。由于我是新手，我需要有关如何完成某些任务的帮助。

我的问题是版本号。目前我使用一个 VersionInfo 文件来保存版本号。当我运行我的构建时，我想使用这个版本号，增加它并将其用作构建的主要版本号。这可能吗？如果可以，怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T01:57:55.173

完成此任务的最简单方法是使用[Community TFS Build extensions pack](http://tfsbuildextensions.codeplex.com/)，并使用 AssemblyInfo 任务。但是，如果您需要一些不同的东西或需要更多地自定义它。您将需要创建一个自定义活动。*[博客文章Customize Team Build 2010 – Part 1: Introduction](http://www.ewaldhofman.nl/post/2010/04/20/Customize-Team-Build-2010-e28093-Part-1-Introduction.aspx)*中有一些很好的文档。

我使用内部版本号格式，`BuildDefinitionName_Major.Minor.(YY)(DayOfYear).(rr)`然后删除下划线后的所有内容，并使用剩下的数字解析为程序集版本和程序集文件版本。

想到微软还没有采用更好的机制，这真是令人惊讶和愚蠢。因为如何处理这个问题是团队构建中最常被问到的问题之一，地球上谁会在没有自动化机制来处理版本控制的情况下运行构建？

# javascript - 使网页加载到页面的一部分

> ID：12756005
> 
> 赞同：0
> 
> 时间：2012-10-06T01:52:44.833
> 
> 标签：javascript, html

所以我做了一些谷歌搜索，但没有帮助。我想要的是页面的可见部分加载到实际页面的一部分，这样当用户访问该站点时，他们可以立即向上滚动*以*显示更多页面。

我希望这很清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T02:10:04.620

我会使用一个命名的锚点，比如`<a name="startingPoint"></a>`在你希望用户开始的页面上，然后在页面加载后立即跳转到它：

```
window.onload = function() {
    window.location.hash = "startingPoint";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T02:03:37.997

尝试使用该`scrollBy`功能：

```
function pageScroll() {
    window.scrollBy(0, 200);
}
window.onload = pageScroll; 
```

来源： [http ://www.w3schools.com/jsref/met_win_scrollby.asp](http://www.w3schools.com/jsref/met_win_scrollby.asp)

# python - 从字符串中删除不安全字符但保留 unicode 字符的最快方法？

> ID：12756007
> 
> 赞同：0
> 
> 时间：2012-10-06T01:53:07.130
> 
> 标签：python, string, security, unicode

我最近在 HackerNews 上进行了一项测试，邀请人们来破坏我的网络应用程序 ( [www.tagxt.com](http://www.tagxt.com) )。

有些人成功地破坏了我试图修复的几件事。

我在这里追求的是：

如何阻止人们创建用户名`../../`，`../logout`但仍然让他们使用 unicode 字符`☃☃☃☃☃☃`？此外，`_`下划线是可以的。

最大用户名长度为 15 个字符，因此性能不是一个重要因素，但我想找到删除危险字符的最快方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T17:38:23.897

像这样的东西怎么样：

```
list = ["A", "B", "C"...]
for i in list:    
    string1 = "../../"
    if i in string1:
        print("Error") 
```

我不确定...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T18:28:42.720

验证字符的最快方法是创建所有允许字符的白名单：

```
allowed = [ 'A','B','C'...] 
```

如果这看起来很乏味，请使用诸如 OWASP ESAPI 之类的库

# apache - apache vhost _default_ 与 localhost 问题

> ID：12756009
> 
> 赞同：1
> 
> 时间：2012-10-06T01:53:27.300
> 
> 标签：apache, vhosts

不知道如何更好地描述标题。问题是：

我在工作中广泛使用虚拟主机，但有时我只是将一些文件放入 localhost/mysite

当我使用虚拟主机（即 mysite.local）时，我可以将我的第一个虚拟主机设置为“开箱即用”的方式，然后放入 mysite.local 虚拟主机块：

```
<VirtualHost _default_:80>
   DocumentRoot C:/UniServer/www
   ServerName localhost
   ErrorLog "logs/error.log"
   CustomLog "logs/access.log" common
</VirtualHost>

<VirtualHost 127.0.0.1>
ServerAdmin webmaster@localhost
ServerName mysite.local
DocumentRoot "C:/UniServer/www/mysite/public_html/"
SetEnv ENVIRONMENT localhost
</VirtualHost> 
```

但如果我想使用 localhost/mysite，我必须将其更改为：

```
<VirtualHost localhost:80>
    DocumentRoot C:/UniServer/www
    ServerName localhost
    ErrorLog "logs/error.log"
    CustomLog "logs/access.log" common
</VirtualHost> 
```

显然，这很痛苦，因为它包括 apache 重启。

我的 httpd.conf 设置为：

服务器名称本地主机

.htaccess 似乎并不是影响它的原因。如果有人能在这方面给我指导，我将不胜感激！

编辑：应该提到，当我想使用 mysite.local 时，我不能使用：

```
<VirtualHost localhost:80> 
```

我必须使用：

```
<VirtualHost _default_:80> 
```

所以它在两个方向上都被“打破”了

谢谢，

杰夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T04:25:14.270

好吧，我脸上的鸡蛋 - 有点像

```
<VirtualHost localhost>  for localhost/mysite 
```

和

```
<VirtualHost 127.0.0.1> for mysite.local 
```

工作，有或没有端口，只要它们匹配（两者：80 或两者都没有）

但

```
<VirtualHost _default_>  for localhost/mysite 
```

根本行不通，没办法，没办法 - 它只对 mysite.local 有好处

这是主机文件：127.0.0.1 localhost 127.0.0.1 mysite.local

如果有人能解释为什么“*默认*”的行为方式会很感兴趣

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-06T02:12:56.593

Looks like you're doing this on windows. Take out the SetEnv at the bottom of your mysite.local VHost and you'll need to check 2 things:

Make sure that your hosts file or local DNS has an entry for mysite.local pointing to 127.0.0.1\. The hosts file on windows is in c:\windows\system32\drivers\etc\hosts

If that doesn't make it work, make sure you're set to named virtual hosts, something like:

```
NameVirtualHost *:80 
```

or

```
NameVirtualHost 127.0.0.1:80 
```

# java - 如何让java中的线程读取两个单独线程的值

> ID：12756011
> 
> 赞同：0
> 
> 时间：2012-10-06T01:54:01.797
> 
> 标签：java, multithreading

行。我需要创建三个线程：一个获取奇数，一个获取偶数，一个将奇数和偶数相加。输出将是这样的（1,2,3,3,4,7...）。我是线程新手，仍然对它们的工作方式感到不安，但这是我到目前为止所拥有的：

```
class even extends Thread 
{
    public void even()
    {
        Thread ThreadEven = new Thread(this); 
        start(); 
    } 
    public void run() 
    {
        try
        {
            for(int i = 0; i < 10; i += 2) 
            {
                System.out.println(i);
            }
            Thread.sleep(1000);
        }
        catch(Exception e) 
        {
            System.out.println("Error: Thread Interrupted");
        } 
    } 
}

class odd extends Thread 
{ 
    public void odd() 
    {
        Thread ThreadOdd = new Thread(this); 
        start(); 
    } 
    public void run() 
    {
        try
        {
            for(int i = 1;i < 10; i += 2) 
            System.out.println(i);
            Thread.sleep(1000);
        }
        catch(Exception e) 
        {
            System.out.println("Error: Thread Interrupted");
        } 
    } 
}
class ThreadEvenOdd
{
    public static void main(String args []) 
    {
        even e = new even();
        odd o = new odd();

    } 
} 
```

这会打印出 0,2,4...然后是 1,3,5。如何交错？并交错我想要的东西，我也应该同步线程吗？我不明白的是如何将奇数和偶数线程的值放入三分之一以添加总和。如果我没有得到正确的代码格式，请事先道歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T03:42:53.360

如前所述，这是一个高级问题，是的，在尝试此操作之前，您应该阅读大量教程。即使对于这个简短的程序，如果我没有花费大量时间研究[Java 并发实践](https://rads.stackoverflow.com/amzn/click/com/0321349601)，我也永远无法编写它。（提示 - 买这本书。它都在里面。）

偶数类和奇数类是生产者。类总和是消费者。生产者和消费者共享一个阻塞队列来传递数据。生产者使用负数作为毒丸表示他们已经完成并且不会有更多数据出现。当消费者检测到毒丸时，它会减少倒计时锁存器。主线程将此作为工作完成的信号。

```
import java.util.concurrent.ArrayBlockingQueue;
import java.util.concurrent.BlockingQueue;
import java.util.concurrent.CountDownLatch;

public class OddEven
{
   public static void main(String [] args) throws InterruptedException
   {
      BlockingQueue<Integer> evens = new ArrayBlockingQueue<Integer>(1);
      BlockingQueue<Integer> odds = new ArrayBlockingQueue<Integer>(1);
      even e = new even(evens);
      odd o = new odd(odds);
      sum s = new sum(evens, odds);

      e.start();
      o.start();
      s.start();
      s.waitUntilDone();
   }
}

class sum extends Thread
{
    private final BlockingQueue<Integer> in1;
    private final BlockingQueue<Integer> in2;

    private final CountDownLatch done = new CountDownLatch(1);
    public sum(BlockingQueue<Integer> in1, BlockingQueue<Integer> in2)
    {
        this.in1 = in1;
        this.in2 = in2;
    }

    public void waitUntilDone() throws InterruptedException
    {
       done.await();
    }
    public void run()
    {
        try
        {
           while (true)
           {
              int a = in1.take();
              int b = in2.take();
              if (a == -1 && b == -1)
                 break;

              int c = a + b;
              System.out.println(a);
              System.out.println(b);
              System.out.println(c);
           }
           done.countDown();
        }
        catch(Exception e)
        {
            System.out.println("Error: Thread Interrupted");
        }
    }
}

class even extends Thread
{
    private final BlockingQueue<Integer> out;

    public even(BlockingQueue<Integer> out)
    {
       this.out = out;
    }
    public void run()
    {
        try
        {
            for(int i = 0; i < 10; i += 2)
               out.put(i);

            out.put(-1);
        }
        catch(Exception e)
        {
            System.out.println("Error: Thread Interrupted");
        }
    }
}

class odd extends Thread
{
   private final BlockingQueue<Integer> out;

   public odd(BlockingQueue<Integer> out)
   {
      this.out = out;
   }
    public void run()
    {
        try
        {
            for(int i = 1;i < 10; i += 2)
               out.put(i);

           out.put(-1);
        }
        catch(Exception e)
        {
            System.out.println("Error: Thread Interrupted");
        }
    }
} 
```

典型的输出是：

```
0
1
1
2
3
5
4
5
9
6
7
13
8
9
17
Sums are complete 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T03:52:59.697

您需要一种将数字从生产者线程（偶数和奇数）“传递”到“消费者”线程的方法。

“最简单”但不是最好的方法是一个可变数组，只有一个条目——你必须同步/锁定某些东西（数组？）以避免并发线程破坏它。

也许更简单更好的方法可能是使用“双端队列”，例如 ArrayDeque。这使得值可以放在一端，而从另一端移除。同样，对它的访问需要同步。

创建所有线程外部的队列，然后将它们传入/或使其可见。

```
class Example {
    protected Deque<Integer> queueEven = new ArrayDeque<Integer>();
    protected Deque<Integer> queueOdd = new ArrayDeque<Integer>();
    // you can synchronize on some mutable flag to finish, too.

    class Even extends Thread {
        public void run() {
            for (int i = 0; i < 10; i += 2) {
                synchronized (queueEven) {
                    queueEven.add( i);
                }
            }
        } 
    } 

    class Odd extends Thread {
        public void run() {
            for (int i = 1; i < 10; i += 2) {
                synchronized (queueOdd) {
                    queueOdd.add( i);
                }
            }
        } 
    } 

    class AddEvenOdd extends Thread {
        public void run() {
             while (true) {
                 int even;
                 synchronized (queueEven) {
                     even = queueEven.removeFirst();
                 }
                 int odd;
                 synchronized (queueOdd) {
                     odd = queueOdd.removeFirst();
                 }
                 int result = even + odd;
                 System.out.println("result="+result);
             }
        }
    }
} 
```

# database - 将 jQuery 自动完成功能与 Google 站点搜索集成

> ID：12756014
> 
> 赞同：0
> 
> 时间：2012-10-06T01:55:53.817
> 
> 标签：database, jquery-ui, search, autocomplete, web

我的情况有点奇怪。我必须在面向公众的网站上实现搜索 - 但是，该搜索必须能够搜索两个网页并具有来自数据库表中的术语列表的自动完成/建议功能。

所以，我想知道几件事：1）我应该看看谷歌搜索和jQuery自动完成吗？2）还有什么我应该看的吗？3）如果这是正确的前进道路，是否有足够的实施指示？

我的问题的症结在于，我需要用于自动完成/建议功能的术语位于数据库中，而不是网页上。所以，我认为谷歌适合搜索网页，我可以用数据库中的这些术语来填补空白。我会说大约有 20-40,000 个术语需要自动完成。但这实际上只是一个非常粗略的猜测——它可能会更少。

我对想法持开放态度，并没有真正接受任何特定的解决方案。但是，我承认喜欢将搜索转移到 Google 的想法。我听说他们有一个很好的算法；）

非常感谢任何想法、想法或线索！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T03:33:41.280

好的，回答我自己的问题：Apache Solr 似乎是要走的路。功能强大、可配置、免费且快速。它为 Netflix 等网站提供支持。4.0 测试版目前已经发布，看起来很稳定。

# java - 右键单击 JUnit 不会显示。人们说java eclipse中内置了一个Junit，在junit 3.0库中有一个

> ID：12756017
> 
> 赞同：2
> 
> 时间：2012-10-06T01:56:03.433
> 
> 标签：java, eclipse, junit

右键单击->新建->“不显示JUNIT”

![在此处输入图像描述](../Images/52187e18ca2292156da05b860d2d3004.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T02:14:30.643

单击“新建-> 其他...”，然后选择类别 Java->JUnit，然后选择 JUnit 测试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T05:45:31.363

所谓的“新菜单快捷方式”列表取决于活动透视图。因此，请先切换到 Java 透视图以获取该快捷菜单，或者仅使用*File->New->Other*，您将始终获得可用向导的完整选择。

# ant - 使用 Ant 提取嵌套的 zip 档案

> ID：12756028
> 
> 赞同：3
> 
> 时间：2012-10-06T01:58:19.090
> 
> 标签：ant, unzip

我需要处理一个 zip 存档，它本身包含所有遵循相同结构的 zip 存档：

```
main.zip/
  foo-1.txt
  foo-1.zip/
    ... 
    tests/
    ...
  bar-1.txt
  bar-1.zip/
    ... 
    tests/
    ...
  bar-2.txt
  bar-2.zip/
    ... 
    tests/
    ...
  foobar-1.txt
  foobar-1.zip/
    ... 
    tests/
    ... 
```

我想将`txt`文件和`tests`目录提取到这样的结构中：

```
 foo/
   1/
     submission.txt
     tests/
 bar/
   1/
     submission.txt
     tests/
   2/
     submission.txt
     tests/
 foobar/
   1/
     submission.txt
     tests/ 
```

我设法将目录结构和文本文件放到正确的位置：

```
<target name="extract submissions">
  <copy todir="${basedir}">
    <zipfileset refid="submissions.zip"/>
<mapper type="regexp" from="(.*)-(.*)\.txt" to="\1/\2/\submission.txt"/>
  </copy>
</target> 
```

但是现在我被困住了如何访问内部拉链内的测试目录。我尝试了一个中间步骤，将内部拉链复制到测试目录应该结束的地方。但是如何在不知道其确切路径的情况下访问 zip 存档的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T20:43:59.277

终于找到了纯Ant解决方案：

```
<target name="extract submissions">
  <copy todir="${basedir}">
    <zipfileset refid="submissions.zip"/>
    <mapper type="regexp" from="(.*)-(.*)\.txt" to="\1/\2/\submission.txt"/>
  </copy>

  <subant genericantfile="${basedir}/build.xml" target="extract submission">
    <dirset dir="${basedir}" includes="*/*"/>
  </subant>
 </target>

<target name="extract submission">
  <copy todir="tests">
    <zipfileset refid="submission.zip"/>
    <mapper type="regexp" from="tests/(.*)" to="\1"/>
  </copy>
</target> 
```

第一个目标提取外部 zip 文件并在每个提取的目录上调用第二个目标。这是通过 subant 实现的。然后第二个目标解压缩一个内部 zip 文件。由于它应用于任何子目录，因此会提取所有内部拉链。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T08:42:04.990

看起来这是标准 ant 任务不够用的地方。因此，您可以使用自定义任务或脚本解决方法。Javascript 最适合，因为它不需要额外的依赖项，jdk6 就足够了。而且通常只需要java编程知识。加上ant api，必须用[ant手册](http://ant.apache.org/manualdownload.cgi)下载。

以下示例查找当前目录中的所有 zip，并将每个 zip 解压缩到`tests`在 zip 文件目录中创建的目录中。

```
 <target name="un2">
    <fileset dir="." includes="**/*.zip" id="zipset" />
    <script language="javascript">
      it = project.getReference("zipset").iterator();
      while (it.hasNext()) {
        zipFile = new java.io.File(it.next());
        java.lang.System.out.println(zipFile.getParent());
        unzipTask = project.createTask("unzip");
        unzipTask.setSrc(zipFile);
        dest = new java.io.File(zipFile.getParent(), "tests")
        unzipTask.setDest(dest);
        unzipTask.execute();
      }
    </script>
  </target> 
```

# python - 嵌套语句 Python 编码

> ID：12756029
> 
> 赞同：0
> 
> 时间：2012-10-06T01:58:21.810
> 
> 标签：python, nested-loops

我需要帮助，我的编码有问题，似乎无法弄清楚是什么..我确定这是一个简单的错误，只是我目前似乎无法找到它

```
 string = raw_input("Enter String->")
    length = len(string)
    index = 0
    while index < length:
       if string(index) == 'a':
            print "Character found is a"
       index = length
       elif string(index) != 'a':
            print "Character", index"is not an a, sorry" 
```

错误当然是“无效的语法”

这是迄今为止的新代码

```
 string = raw_input("Enter String->")
   length = len(string)
   index = 0
   while index < length:
       if string[index] == 'a':
           print "Character found is a"
           index = length
       elif string[index] != 'a':
           print "Character", index,"is not an a, sorry" 
```

从这里开始，当我运行代码时，它会无限运行“字符 0 不是 a”

第三次编辑

```
 string = raw_input("Enter String->")
    length = len(string)
    index = 0
    while index < length:
        if string[index] == 'a':
            index += 1
            print "Character found is a"
            break
        elif string[index] != 'a':
            print "Character", index, "is not an a, sorry" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T02:01:14.203

`index = length`将直接跳到字符串的末尾。`index += 1`如果要检查每个字符，则需要使用

通常你会像这样编写循环

```
string = raw_input("Enter String->")
for idx, c in enumerate(string):
   if c == 'a':
        print "Character found is a"
   else:
        print "Character", idx, "is not an a, sorry" 
```

哪个更容易阅读，并且更难犯这样的错误

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T02:01:13.883

索引访问是用 完成的`[i]`，而不是用`(i)`表示函数调用的。

所以你应该这样做：

```
if string[index] == 'a': 
```

还要记下有关您的代码的其他问题的其余答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T02:06:02.463

你有几个问题：

*   使用方括号访问可迭代的元素: `a[1]`,
*   上一层`index = length`楼。`if`它在 an和 an之间打破了你的循环`elif`。
*   `print`缺少一个逗号。

一个更好的方法是这样的：

```
string = raw_input("Enter String->")

for index, character in enumerate(string):
   if character == 'a':
        print "Character found is a"
        break
   else:
        print "Character", index, "is not an a, sorry" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T03:49:14.847

首先，非常快速的建议 - 使用名称如“字符串”的变量会导致头痛。

因此，您编写的代码告诉我您需要查看第一个 'a' 之前的每个字符*位置，而不是其实际**值*，您需要知道 'a' 是否在字符串中，并且您不知道关心第一个'a'之后的任何字符。这些目标对我来说似乎不太可能，所以我怀疑你的真正问题与你所问的略有不同。

我真的在这里看到了两个根本问题：

**1.如何找到给定字符串中第一个'a'的索引？**如果这是您最关心的问题，那么您需要做的就是

```
response = raw_input('Prompt: ')
index_a = response.find('a') 
```

`foo.find(bar)`会给你 bar 的索引，或者`-1`如果它根本不在 foo 中。但是，如果您甚至不关心 bar 在哪里，而只需要验证它是否存在，请`bar in foo`改用。

**2\. 如何检查字符串中的每个字符？**在许多情况下，Python 不会让您构建迭代——它为您提供`for`结构，为您完成繁重的工作。如果您确实需要，此示例将让您跟踪预先匹配的字符位置，但请注意，`counter`这与流控制完全无关：

```
response = raw_input('Prompt: ')
counter = 0
for r in response:
    if r is 'a':
        print('We found it.')
        break
    else:
        print('Not ' + str(counter))
        counter += 1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-06T02:01:00.057

```
print "Character", index"is not an a, sorry" 
```

应该读

```
print "Character " + str(index) + " is not an a, sorry" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-06T02:23:03.650

您需要`index`在每次循环后递增 at ，否则 while 循环将永远在同一索引上运行：

```
string = raw_input("Enter String->")
length = len(string)
index = 0
while index < length:
    if string[index] == 'a':
       print "Character found is a"
       break
    else:
       print "Character" + str(index) + " is not an a, sorry"
       index += 1 
```

不过，您应该研究@gnibbler 的建议并使用它而不是`while`循环来实现此特定目的。

# php - 预防注射的方法不止一种

> ID：12756031
> 
> 赞同：-3
> 
> 时间：2012-10-06T01:58:33.120
> 
> 标签：php, mysql

> **可能重复：**
> [在 PHP 中防止 SQL 注入的最佳方法？](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

我已经看到 mysql_real_escape_string 和斜杠被用于防止 MySQL 注入。还是我需要更多并将其全部放入函数中，然后使用该函数来防止注入？

```
$query = ("SELECT * FROM `users` WHERE `fname` REGEXP '%s' AND `lname` REGEXP '%s' LIMIT  
%d", 
mysql_real_escape_string($fname), 
mysql_real_escape_string($lname),
(int)$RowsLimit); 
```

或者做这样的事情会更好吗？mysql_real_escape_string(stripslahses($fname)),

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T04:32:36.387

避免使用 mysql_ 函数，因为它们已被弃用。查看 mysqli_ 或 PDO。两者都是*准备好的语句*，并且在有效使用时更快，更安全。

此外，准备好的语句不需要转义。**这在之前的答案中进行了解释：**

[为什么使用 mysql 准备好的语句比使用常见的转义函数更安全？](https://stackoverflow.com/questions/732561/why-is-using-a-mysql-prepared-statement-more-secure-than-using-the-common-escape)

[PHP.net 关于准备 mysqli_ 语句](http://www.php.net/manual/en/mysqli.prepare.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T03:11:09.327

您应该使用准备好的查询解决方案而不是字符串格式。

[pdo 中是否需要参数化查询？](https://stackoverflow.com/questions/11881156/are-parameterized-queries-in-pdo-necessary-for-request-variables)

[使用 pdo 准备的查询](https://stackoverflow.com/questions/1299182/prepared-parameterized-query-with-pdo)

[防止php中的sql注入](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

# c# - Nunit - 测试exe

> ID：12756035
> 
> 赞同：4
> 
> 时间：2012-10-06T01:59:09.463
> 
> 标签：c#, visual-studio-2010, nunit

我在 Visual Studio 中有一个包含 2 个项目的解决方案。用于 NUnit 测试的普通项目和“测试”项目。我在测试项目中有对正常项目的参考。我尝试添加测试并使用 NUnit GUI 运行它们，但我收到一条错误消息，说它找不到“正常”项目的“dll”（我猜想得到方法？）。问题是，“正常”项目不是一个类库，它是一个可执行文件，所以测试项目的 bin/Debug 有 normalproject.exe 而不是 normalproject.dll。

如何让 NUnit 使用此设置？我什至会感谢具有这种设置的教程的链接，到目前为止，谷歌搜索还没有出现任何内容。

我得到的实际错误代码是：

Achievement.Tests.Achievement.BruiserTest.CheckNameAndDescription：System.BadImageFormatException：无法加载文件或程序集“成就，版本=1.0.0.0，文化=中性，PublicKeyToken=null”或其依赖项之一。试图加载格式不正确的程序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-02T14:34:12.047

我有同样的问题！

**解决方案：** NUnit 使用 x86 和 x64 二进制文件安装。在开始菜单中它只显示默认的 x64 程序。由于我使用了一些本机库，我的项目针对 x86，所以我必须手动启动`nunit-x86.exe`它`C:\Program Files (x86)\NUnit 2.6.3\bin`并且它工作！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T03:08:25.597

检查是您要测试的类的可访问性。它们必须标记为公开，否则您的测试项目将无法看到它们以加载它们。

使您的类公开的另一种方法是在您的 EXE 中使用 InternalsVisibleTo 属性并授予对您的测试项目 DLL 的访问权限。您只需将它们标记为内部，而不是公开的。

在 EXE 的 AssemblyInfo.cs 中：

```
[assembly: InternalsVisibleTo( "Project.Tests" )] 
```

为您的测试引用 EXE 而不是 DLL 没有问题（从技术上讲，无论如何；应用程序架构是另一回事）

# javascript - AJAX - 用户更改页面后接收响应

> ID：12756036
> 
> 赞同：7
> 
> 时间：2012-10-06T01:59:12.757
> 
> 标签：javascript, jquery, ajax

**我所知道的：**
当我对我的服务器进行 ajax 调用时，会创建一个处理程序，发送请求，我的 php 脚本接收请求并处理它，并且 - 如果我告诉它 - 发送回一个响应，我的javascript 根据我的需要进行解析。我也知道即使用户关闭浏览器或更改页面，php 也会继续处理请求（这一切都在服务器端完成，那为什么不呢？^.^）。

**我需要知道的：**
当用户更改我网站内的页面时，ajax 处理程序是否被终止？例如：用户在 mysite.com/foo.php。他们单击向我的服务器发送 ajax 请求的链接。该请求的响应将显示在 foo.php 上的 div#resp 中。然后，他们在收到响应之前导航到 mysite.com/bar.php。

如果我加载相同的javascript函数并在bar.php上具有所需的div#resp元素，调用ajax的javascript函数是否仍能接收来自服务器的响应并将其传递给bar.php上的div#resp，从而显示响应？还是原来的 ajax 句柄不再可用？如果它*不再*在标准 javascript 中可用，是否有一些 jQuery 植入可以让我检索响应并将其显示在 bar.php 上？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-06T02:03:05.693

根据您的描述，不 - 一旦您导航到另一个页面并导致页面重新加载，您的所有 javascript 处理程序都会重新实例化，并且原始处理程序会被销毁。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-06T02:01:59.453

答案是不。当您更改页面时，javascript 进程将被终止并重新启动。页面重新加载之间没有任何内容。

虽然，如果您的页面也在 ajax 中发生变化，那么该进程不会被终止，并且您可以收到响应。`PushState`（顺便说一句，对于使用最新浏览器的最终用户来说，这几乎可以无缝连接）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-23T05:28:04.633

不，您不能保证在用户导航到下一页之前返回您的 XHR (AJAX) 响应。

如果您希望能够在服务器端检测用户何时离开您的页面，则必须使用 WebSocket 或类似技术。WebSocket 连接是到外部主机的长时间运行的连接，当它被切断时，您可以轻松地检测到服务器端。[https://github.com/sockjs](https://github.com/sockjs)是一个 WebSocket 客户端 + 服务器的例子。

如果您只是想在用户离开页面之前向他/她显示一些内容，则需要查看 window.onbeforeunload - onbeforeunload 在用户离开页面之前触发，但不允许您执行任何异步 AJAX 请求。有关更多信息，请参阅[https://developer.mozilla.org/en-US/docs/Web/API/window.onbeforeunload](https://developer.mozilla.org/en-US/docs/Web/API/window.onbeforeunload)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-24T02:06:20.423

如果您想这样做，请构建一个“单页 Web 应用程序”。简单明了，不要定位到新的 url。

而是使用pushstate/popstate在浏览器中更改地址，然后使用javascript/动态html重绘页面。

然后，您可以处理所有 ajax 响应。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-09-24T02:12:39.690

另一种选择是有一个 onload 事件，它会触发一个 ajax 请求到服务器并询问是否需要做某事。服务器需要跟踪“事物”并让浏览器知道发生了什么。

本质上，浏览器将在每个页面的开头轮询服务器。

我不认为代码示例是必要或适用的，因为它会因每个应用程序而异。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-24T09:02:58.337

**只要您离开页面，如果通过简单的 HTTP POST 使用该页面，所有 AJAX 调用都将不可用**

HTTP 请求的生命周期通常如下所示：

用户访问网站的 URL。这将创建一个请求，该请求通过 Internet（DNS、路由器和交换机的网络）通过 HTTP（超文本传输​​协议）路由到 Web 服务器。Web 服务器接收 HTTP 请求并用所请求的网页（或内容）响应用户。每次您单击链接并访问网页时，您都会在后台发出请求，然后接收来自 Web 服务器的响应。请注意，HTTP 请求可以通过许多渠道发出，而不仅仅是 Web 浏览器。例如，可以使用 TELNET 或用 JAVA 或 C# 等编写的客户端发出 HTTP 请求。

所以你必须为此使用套接字，以便可以调整 http 的生命周期。

[http://devhub.fm/http-requestresponse-basics/](http://devhub.fm/http-requestresponse-basics/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-09-23T00:16:01.467

虽然最初接受的响应是正确的 - 一旦导航到不同的页面，您将无法收到对 ajax 请求的响应 - 有一种解决方法：如果您将网站设为单页应用程序，您将能够获得响应。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-09-23T15:50:30.663

我在我的一个项目中遇到了同样的情况。要在页面之间有一些短暂的东西，你必须让你从一页到另一页识别出一些东西。最简单的使用方法是 PHP 会话（我看到你使用 PHP）。很简单，您可以在每个页面上加载一个异步请求（Ajax），如果有活动启动，它将检查服务器（使用 PHPSESSID）。您可以选择检查每个页面加载（在 docready 上）或间隔检查。

当然，如果用户关闭浏览器选项卡，您将失去一切。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-09-18T17:33:22.823

您可以在收到这些值时将它们保存到 localStorage，或者您可以将所有 ajax 数据响应保存在会话、memcache 或 redis 中。这意味着如果服务器收到一个请求，那么它首先将响应保存在某处，然后再返回。从列表中删除消息/响应将取决于您的情况。有些系统允许您关闭通知，其他系统会在用户第一次看到它们后消失。消失的那个是易变的。用户可能会或可能不会真正看到它。

这听起来像是来自各种图书馆的“闪光信息”。您可能想查看这些系统的实现。

# jquery - ajax 成功引发谷歌分析目标

> ID：12756039
> 
> 赞同：0
> 
> 时间：2012-10-06T02:00:23.930
> 
> 标签：jquery

所以我的代码非常基本，看起来像这样......

```
 jQuery(document).ajaxSuccess(function(e, xhr, opt){
        var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'xxxx']);

        _gaq.push(['_trackPageview', '/goal1']);
    }); 
```

我的页脚中有这个

```
 var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'xxxx']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl'  : 'http://www')  + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })(); 
```

然而它不起作用，任何关于我如何让它工作的建议都值得赞赏，我也做了一个提醒，以确保 ajax 成功并且它有效，所以我 100% 肯定它应该有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T02:06:15.350

你必须这样写

```
var _gaq = window._gaq || []; 
```

否则，由于 Javascript 中的变量提升，此时 _gaq 未定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T02:06:10.137

消除这 2 行：

```
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'xxxx']); 
```

他们正在清除分析对象。您应该只在成功处理程序中进行推送。

# xna - XNA：为什么循环不起作用？

> ID：12756040
> 
> 赞同：0
> 
> 时间：2012-10-06T02:00:37.013
> 
> 标签：xna, character

如果我尝试做一个循环，它将无法在 XNA 中工作。我想用它来选择角色（格斗游戏），如果您按下一个键（选择一个角色），它将添加到当前计数，然后如果该计数等于某个数字，则会显示一条消息显示两个字符都被选中。那是为了防止玩家选择/加载超过一定数量的角色进入战斗竞技场。就我而言，我只希望加载 2 个字符而不再加载。

我的代码是这样的：

```
int count = 1;

if (int i = 0; i < count; i++)
   count = count + i;

if (Keyboard.GetState().IsKeyDown(Keys.A))   // This will select Character A
   count += 1;
if (Keyboard.GetState().IsKeyDown(Keys.D))   // This will select Character B
   count += 1;

if (count == 2)   // This checks to see if the total count has reached 2
   // Message is displayed here 
```

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T02:12:41.633

You have a syntax error here (and it seems this for-loop-like construct isn't even necessary. What is it's purpose? `if (int i = 0; i < count; i++)`

You're code is a logical mess so I won't try to build on it in my answer. I don't think I understand everything but here's an attempt.

You need state which is simply variables that indicate whether something has been loaded or no. You can simply use two boolean variables as follows:

```
//at the Game class level:
bool char1Selected = false;
bool char2Selected = false;

//inside Update(GameTime)
if (Keyboard.GetState().IsKeyDown(Keys.A))
{
   char1Selected = true;
}

if (Keyboard.GetState().IsKeyDown(Keys.D))
{
   char2Selected = true;
}

if(char2Selected && char1Selected)
{
    //then both are selected. do something here according to your game's logic.
} 
```

# c - 自定义 shell 中的 I/O 重定向和管道

> ID：12756043
> 
> 赞同：0
> 
> 时间：2012-10-06T02:01:10.697
> 
> 标签：c

我必须用 C 编写自己的 shell，并且已经实现了 90% 的需求（fg、bg、jobs 等）。但是，我还有两个需要坚持的要求。我的 shell 必须支持 I/O 重定向和管道。例如：

```
myprog < input.txt | myprog2 > output.txt 
```

任何人都可以提供任何关于编码支持的提示/想法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T02:28:04.510

我还想/需要用 C 语言编写自己的 shell。操作系统课程的一部分。这可能有点作弊，但也许您可以通过查看[BASH shell 源代码获得一些提示](http://ftp.gnu.org/gnu/bash/bash-4.2.tar.gz)

有一个名为 redir.c 的文件也许你可以从中得到一些想法，并实现一个简单版本的管道和重定向。对于上面的示例，您还需要满足优先顺序等...

一切顺利！！！:)

# jquery - 长 ajax 查询进度条的更新模式

> ID：12756047
> 
> 赞同：4
> 
> 时间：2012-10-06T02:01:47.883
> 
> 标签：jquery, ajax, node.js, progress-bar

**这是我所拥有的：**

1.  一个执行长时间（2-10 秒）计算（db + 外部 API 调用）的 Node.js 函数。我`async.auto()`用来组织调用的依赖项
2.  HTML 视图页面上一个漂亮的视觉进度条
3.  调用查询的 getJSON 函数（参见下面的代码）

现在，我只是在更新计时器上的进度条。但我希望它更准确。我已经将服务器端功能分解为 5 个里程碑（即在每个外部调用成功完成之后），我想将该进度信息发送给客户端。但是，一旦您`res.send(progress)`完成了回复，就无法再发送任何内容了。

我显然需要一个不同的模式，我有一些想法：

1.  2个ajax调用，一个轮询进度，第二个得到结果
2.  一个调用被调用 5 次，直到服务器端函数消失
3.  完全不同的东西（可能是长轮询，websockets，？）

**问题：**

我想知道推荐的模式是什么，以及如何在服务器端和客户端实现它。非常感谢示例代码或示例链接！

而且，一如既往，感谢您的宝贵时间！

这里包括的是我到目前为止的代码（有明显的功能遗漏）。回答这个问题并不是绝对必要的，但我在这里提供它是为了提供一些背景信息。

**客户**

```
var searchFunction = function() {
        var user = $("#searchTerm").val();
        $.getJSON("/search/" + user, function(data) {
            console.log(data);
            ko.applyBindings(new MyViewModel(data));
        });
        $("#content").hide();
        progressBar(5);
        $("#progress_bar").show();
        setTimeout(function() {
            progressBar(25);
        }, 1000);
        setTimeout(function() {
            progressBar(50);
        }, 2000);
        setTimeout(function() {
            progressBar(75);
        }, 3000);
        setTimeout(function() {
            $("#progress_bar").hide();
            $("#content").show();   
        }, 4000);
    }; 
```

**服务器**

```
var searchFunction = function(req, res) {   
    async.auto({
        f1: function(callback) {
            //things happen
            callback(err, res);
        },
        f2: function(callback) {
            //things happen
            callback(err, res);
        },
        f3: ['f2', function(callback, result) {
            //many things happen
            callback(err, res);
        }, 
        function(err) {
            //decisions are made
            callback(null, watchers);
        }]  
    }, function(err, result) {  
            //more exciting stuff happens       
            res.send(finalResults);
        }
    );
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T03:13:57.420

我的第一个想法是使用 socket.io 或类似的东西，服务器在每个里程碑发出一个事件。searchFunction() 的客户端版本将简单地进行 AJAX 调用然后返回，而套接字处理程序负责更新进度条。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T05:36:54.843

您可以使用事件流将完成百分比值推送回客户端。但它只适用于现代浏览器。IE9+ 我相信。这是一个示例事件流：[https ://github.com/chovy/nodejs-stream](https://github.com/chovy/nodejs-stream)

html

```
<div id="progress"><span class="bar"></span></div> 
```

css

```
#progress { width: 200px; background: #eee; border: 1px solid #ccc; height: 20px; }
#progress .bar { display: inline-block; background: #ddd; width: 0; } 
```

客户端 (jQuery) - 监听 /progress 事件流

```
var source = new EventSource('progress');
source.addEventListener('progress', function(e) {
  var percentage = JSON.parse(e.data),
  //update progress bar in client
  $("#progress .bar").css({ width: percentage });
}, false); 
```

服务器端 - 推送具有新进度百分比的事件

```
res.writeHead(200, {'Content-Type': 'text/event-stream'});
res.write("event: progress\n");
//push the percentage to the client (ie: "10%")
res.write("data: "+"10%".toString()+"\n\n"); 
```

你可以在 UI 中定义你的进度条——我会使用一个固定宽度的 div 和一个具有 css 规则 w/基于百分比的宽度的孩子。那得到更新。

# c# - 为什么以及何时使用多态性？

> ID：12756048
> 
> 赞同：7
> 
> 时间：2012-10-06T02:01:47.657
> 
> 标签：c#, oop, polymorphism

我是 OOP 的新手，多态性给我带来了困难：

```
class Animal
{
    public virtual void eat()
    {
        Console.Write("Animal eating");
    }
}
class Dog : Animal
{
    public override void eat()
    {
        Console.Write("Dog eating");
    }
}
class Program
{
    public void Main()
    {
        Animal dog = new Dog();
        Animal generic = new Animal();
        dog.eat();
        generic.eat();
    }
} 
```

所以打印

```
Dog eating
Animal eating 
```

但是为什么不直接使用 Dog 类型而不是动物类型，比如 Dog dog = new Dog()？我认为当您知道该物体是动物但不知道它是哪种动物时，这很方便。请给我解释一下。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-06T02:05:12.340

您可以通过其超类引用子类。

```
Animal dog = new Dog();
Animal cat = new Cat();
Animal frog = new Frog();

List<Animal> animals = new List<Animal>();

animals.add(dog);
animals.add(cat);
animals.add(frog);

foreach(Animal animal in animals)
{   
    Console.WriteLine(animal.eat());
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-06T02:26:36.847

当你想要一个不关心具体实现而只关心总体类型的通用方法时，多态真的派上用场了。使用您的动物示例：

```
public static void Main()
{
    var animals = new List<Animal>();
    animals.Add(new Dog());
    animals.Add(new Cat());

    foreach (var animal in animals)
        Feed(animal);
}

public static void Feed(Animal animal)
{
    animal.Eat();
} 
```

请注意，该方法并不关心它得到什么样的动物，它只是试图喂它。也许`Dog`实现`Eat()`了它吞噬了所有的东西。也许`Cat()`实现它，让它咬一口然后走开。也许`Fish()`实现它以至于它吃得太多而死。方法本身并不关心`Animal`它得到什么，您可以轻松添加更多`Animal`类型，而无需更改接受它们的方法。

（与此相关的是[策略模式](http://en.wikipedia.org/wiki/Strategy_pattern)。）

相反，有时您希望方法返回通用类型，而不管实现了什么。我使用的一个常见示例是：

```
public interface AnimalRepository
{
    IEnumerable<Animal> GetAnimals();
} 
```

实际上，这以两种方式使用多态性。首先，它返回的 s 的枚举`Animal`可以是任何类型。在这种情况下，任何调用代码都不会关心哪个是哪个，它将以更一般的方式使用它们（例如在前面的示例中）。此外，任何实现的东西`IEnumerable`都可以返回。

因此，例如，我有一个使用 LINQ to SQL 的接口实现：

```
public class AnimalRepositoryImplementation : AnimalRepository
{
    public IEnumerable<Animal> GetAnimals()
    {
        return new DBContext().Animals;
    }
} 
```

这将返回一个`IQueryable`. 然而，无论调用该方法，都不关心它是一个`IQueryable`. 它只会使用`IEnumerable`.

或者，我有另一个模拟测试的实现：

```
public class AnimalRepositoryImplementation : AnimalRepository
{
    private IList<Animal> animals = new List<Animal>();

    public IEnumerable<Animal> GetAnimals()
    {
        return animals;
    }
} 
```

这将返回一个`IList`，它再次被变形为更通用`IEnumerable`的，因为这就是所有调用代码将要使用的。

这些也称为[协变和逆变](http://en.wikipedia.org/wiki/Covariance_and_contravariance_%28computer_science%29)。在返回`IEnumerable`上面的情况下，类型从更具体的 ( `IQueryable`and `IList`) 移动到更通用的 ( `IEnumerable`)。他们无需转换就能做到这一点，因为更具体的类型也是类型层次结构中更通用类型的实例。

与此相关的还有[Liskov Substitution Principle](http://en.wikipedia.org/wiki/Liskov_substitution_principle)，它指出类型的任何子类型都可以用作该父类型，而无需更改程序。也就是说，如果 a`Dog`是 a 的子类型，`Animal`那么您应该始终能够将 a`Dog`作为a 使用，`Animal`而不必*知道*它是 a`Dog`或对其进行任何特殊考虑。

[您还可以从Dependency Inversion Principle](http://en.wikipedia.org/wiki/Dependency_inversion_principle)中受益，上面的存储库实现可以作为示例。正在运行的应用程序不关心哪个类型 ( `AnimalRepositoryImplementation`) 实现了接口。它关心的唯一类型是接口本身。实现类型可能具有额外的公共或至少内部方法，实现程序集使用这些方法来确定特定依赖项是如何实现的，但这对使用代码没有影响。每个实现都可以随意换出，调用代码只需要提供更通用接口的任何实例。

* * *

*旁注：*我个人发现继承经常被过度使用，特别是简单的继承，`Animal`例如在`Animal`本身不应该是可实例化类的示例中。如果应用程序的逻辑需要通用形式，它可能是接口或抽象类。但不要仅仅为了做它而做它。

一般来说，正如[《四人组》一书](http://en.wikipedia.org/wiki/Design_Patterns)所推荐的，更喜欢[组合而不是继承](http://en.wikipedia.org/wiki/Composition_over_inheritance)。（如果您没有副本，请获取一份。）不要过度使用继承，但要在适当的地方使用它。如果将通用功能分组为组件并且每个组件都由这些组件构建，那么应用程序可能会更有意义吗？当然，更常用的例子可以从中吸取教训。`Animal``Animal``Car`

保持你的类型在逻辑上定义。你应该能够写作`new Animal()`吗？`Animal`拥有一个不再具体的通用实例是否有意义？当然不是。但是拥有应该能够在任何`Animal`（馈送、复制、死亡等）上运行的通用功能可能是有意义的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-06T02:21:07.253

如果您所看到的只是层次结构，那么多态性的“动物”示例是相当有缺陷的，因为它似乎暗示每个“种类”关系都应该以多态方式建模。这反过来又导致了很多非常复杂的代码。即使没有令人信服的理由让它们存在，基类也比比皆是。

当您引入使用层次结构的对象时，该示例更有意义。例如：

```
public abstract class Pet
{
    public abstract void Walk();
}

public sealed class Dog : Pet
{
    public override void Walk()
    {
        //Do dog things on the walk
    }
}

public sealed class Iguana : Pet
{
    public override void Walk()
    {
        //Do iguana things on the walk
    }
}

public sealed class PetWalker
{
    public void Walk(Pet pet)
    {
        //Do things you'd use to get ready for walking any pet...
        pet.Walk(); //Walk the pet
        //Recover from the ordeal...
    }
} 
```

请注意，您的 PetWalker 封装了一些与行走任何类型的 Pet 相关的共享功能。我们所做的只是隔离了虚拟方法背后的 Pet 特定行为。狗可能会在消火栓上撒尿，而鬣蜥可能会对路人发出嘶嘶声，但走路的行为已经与他们走路时的行为脱钩了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-06T02:06:51.367

因为您应该在基类中保留通用行为，并覆盖特定子类的不同行为。因此，您可以减少代码重复。

在您的示例中，您仍然可以像 Dog dog = new Dog() 一样实例化您的对象。这与多态性关系不大。虽然当你试图传递给任何期望任何动物的方法时，最好使用基类，无论是人类、狗等。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-06T02:20:52.737

它还允许您将超类传递给方法而不是子类，例如：

```
class GroomService
{
    public void Groom(Animal animal)
    {
        animal.Groom();
    }
}

public void Main()
    {
        GroomService groomService = new GroomService();
        groomService.Groom(dog);
        groomService.Groom(generic);
    } 
```

最终结果是您最终得到的代码更少，可维护性更容易。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-06T02:29:31.310

我将提供一个实际使用多态性的真实案例。这是[MikeB 所描述](https://stackoverflow.com/a/12756062/402022)的一个特例。

我想讲述这个故事，因为搜索多态的真实生活示例会呈现许多与真实生活的同构（如狗 -> 动物或汽车 -> 车辆），并且在“我确实编写了这段代码”中不够真实。

现在，在故事之前，我想提一下，在大多数情况下，我使用多态性来允许第三方开发人员扩展代码。假设我创建了一个接口供其他人实现。

* * *

故事

大约六年前，我创建了一个在地图上查找路线的应用程序。这是一个桌面应用程序，它必须保持所有道路的连接，并且能够通过街道和号码定位方向，并找到从一个位置到另一个位置的路线。我想指出，我从未添加过真实的地图，我使用的只是假设性的，并且是为演示目的而设计的。

所以我有一个图表，其中节点所在的位置是地图的位置。每个节点都有坐标将其定位在地图上，但有些节点专门用于穿越街道、建筑物和其他一些节点。

为此，我为图形的节点使用了一个接口，该接口允许存储和检索节点的坐标和连接。我有这个接口的各种实现。

一种建筑物和特殊位置的实现，应该可以通过它们的名称找到它们。有些用于指定道路交叉口（因此在搜索特定方向时标记起始位置以计算门牌号码*）。还有一些只是为了展示，允许描述道路的形状（因为道路并不总是直线）。

*：是的，我确实编写了代码来计算它们，而不是存储每个房子的数量。我天真地认为存储每个房子的号码是天真的。（或者可能是今天我天真地认为......没关系）。

至于绘图，重要的是节点在哪里以及是否必须突出显示它（啊，是的，当用户将指针悬停在它们上方时我确实突出显示了它们），但用于搜索其他相关的数据。

* * *

最后一点：根据我的经验，创建复杂的继承树根本无助于维护。特别是如果派生类没有添加任何对基类的尊重，或者派生类不重用基类的代码。这是常见示例的一个大问题，因为在您的 Animal & Dog 示例中很明显，通过使 Dog 从 Animal 继承，您将一无所获。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-06T02:07:06.603

当您有多个类继承相同的父类或实现相同的接口时，这会派上用场。例如：

```
class Cat : Animal {
    public override void eat()
    {
        Console.Write("Cat eating");
    }
}

class Program {

    public void Main() {
        Animal cat = new Cat();
        Animal dog = new Dog();

        cat.eat();
        dog.eat();
    }
} 
```

这将输出：

```
"Cat eating"
"Dog eating" 
```

# javascript - 使用正则表达式在 javascript 中的函数之间解析数据

> ID：12756054
> 
> 赞同：1
> 
> 时间：2012-10-06T02:03:23.487
> 
> 标签：javascript, regex, parentheses

我有一个如下字符串

> 旋转（32）平移（0，-284.35468），平移（8545,84）矩阵（d，f，g，s，g）平移（-58,88）

每个函数可以用逗号或空格分隔。

我想使用javascript正则表达式查找“​​翻译”括号内的所有信息。所以在上面的例子中，期望的结果是：

```
["0,-284.35468","8545,84","-58,88"] 
```

更具体地说，我想解析 SVG 规范中“g”标签的“transform”属性中找到的信息。可以在这里找到[http://www.w3.org/TR/2011/REC-SVG11-20110816/coords.html#TransformAttribute](http://www.w3.org/TR/2011/REC-SVG11-20110816/coords.html#TransformAttribute)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T02:19:45.817

你可以尝试一些这样的事情：

```
var s = "rotate(32) translate(0,-284.35468),translate(8545,84) matrix(d,f,g,s,g) translate(-58,88)";

var re = /translate\(([^,]+,[^)]+)\)/g,
    results = [],
    c;

while (c = re.exec(s))
    results.push(c[1]);

// results is now ["0,-284.35468", "8545,84", "-58,88"] 
```

在具有“g”标志的正则表达式上重复使用该[`.exec()`方法将找到连续的匹配项。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/exec)

在这种情况下，我们将获取返回的数组中的第二个元素，`.exec()`因为这将是与捕获括号中的正则表达式部分匹配的字符串部分。

# magento - 通过 IP 限制对 Nginx 中 Magento 管理区域的访问

> ID：12756056
> 
> 赞同：3
> 
> 时间：2012-10-06T02:04:39.880
> 
> 标签：magento

我正在尝试限制对 nginx 中 magento 管理区域的访问。我们曾经在 apache 中执行以下操作，但不知道如何在 Nginx 中执行此操作：

```
RewriteCond %{REMOTE_ADDR} !^116\.71\.8\.191    
RewriteCond %{REQUEST_URI} admin [NC]
RewriteRule ^(.*)$ / [F,L] 
```

问候，

史蒂夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T10:47:17.697

```
location /admin {
  allow   116.71.8.191;
  # drop rest of the world
  deny    all;
} 
```

并且不要忘记重新加载规则

```
/usr/local/nginx/sbin/nginx -s reload 
```

更多信息可以在这里找到：[http ://www.cyberciti.biz/faq/linux-unix-nginx-access-control-howto/](http://www.cyberciti.biz/faq/linux-unix-nginx-access-control-howto/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-27T10:46:54.250

对于带有 Varnish 方案的 Magento 2

```
location ~* ^/(index\.php/admin|admin) {

allow 1.2.3.4;

try_files $uri $uri/ /index.php?$args;
location ~* \.php$ { try_files /dummy @proxy; }
deny all;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-05-28T11:00:44.397

只需添加

```
Location / {

if ($remote_addr !~ "^116.71.8.191"){
    set $rule_0 1$rule_0;
}
if ($uri ~* "admin"){
    set $rule_0 2$rule_0;
}
if ($rule_0 = "21"){
    return 403;
    break;
} 
```

# google-chrome-extension - 如何检测已安装的 chrome 扩展

> ID：12756057
> 
> 赞同：0
> 
> 时间：2012-10-06T02:04:41.293
> 
> 标签：google-chrome-extension

我想检测是否安装了 chrome 扩展程序。

例如下面的代码来检测 Measureit。它添加了一个 id 为 shadowMeasureIt 的 div。

```
<head>
    <meta charset="utf-8">
<link rel="chrome-webstore-item"
    href="https://chrome.google.com/webstore/detail/aonjhmdcgbgikgjapjckfkefpphjpgma">

    <body>
<button onclick="chrome.webstore.install()" id="install-button">Add to Chrome</button>    
</body>
<script>

        if (document.getElementById('shadowMeasureIt')) {
  //document.getElementById('install-button').style.display = 'none';
  alert ("yes");
}
</script> 
```

它不起作用，但是当我在控制台中运行脚本时，它会提示“是”。

我怎样才能让它工作。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T12:51:34.700

您应该尝试使用这种方法：

`chrome.management.get(string id [, function callback])`

示例（**未经测试**）：

`var myExtension = chrome.management.get( "my_extention_id" );
if (myExtension.enabled)
{
// installed
}
else { ... }`
来源：http: [//developer.chrome.com/extensions/management.html#method-get](http://developer.chrome.com/extensions/management.html#method-get)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-07T08:53:26.403

```
chrome.management.get("extension_id",function (extensionInfo) {
    console.log(extensionInfo);
}); 
```

清单中必须有 "permissions": [ "management" ]。

> extension_id 将是您想要查找的扩展名。

# android - Mountain Lion 上的 Android 模拟器问题

> ID：12756063
> 
> 赞同：0
> 
> 时间：2012-10-06T02:05:13.880
> 
> 标签：android, android-emulator

我在使用 Mountain Lion 和 Android Emulator 时遇到了很多问题。它不仅以奇怪的形式出现，我确信这是由于缩放问题而发生的。它突然崩溃。事实上，模拟器在上个月左右没有为我运行。我知道有些人建议在本机屏幕分辨率上运行 mac。但是 mac 在如此小的外形尺寸上变得毫无用处。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T02:08:31.040

Actually my bad, there is this tool, goes by the name RDM which allows you to change OSX resolution to non-scaled factors (this is important) because if you use HiDPI it will crash. Using this my emulator comes up. I still dont know how stable it is.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T02:20:11.403

此问题已在 r21 工具的 BETA 版本中得到修复：[http ://tools.android.com/preview-channel](http://tools.android.com/preview-channel)

请记住，这是测试版，因此这些工具可能存在其他问题。

# jquery - 如果用户在文本区域中粘贴某些内容，则阻止 keyUp 事件

> ID：12756066
> 
> 赞同：1
> 
> 时间：2012-10-06T02:05:45.030
> 
> 标签：jquery, event-handling, stoppropagation

如果用户在 textarea#q 中键入一些内容，则调用**do_domething()**函数。如果用户粘贴文本而不是键入文本，则应避免使用 do_something() 函数。有任何想法吗？这是我当前的代码：

```
$('#q').keyup(function(e){
    do_something();
}).bind('paste',function(event) {
    //user pasted text, there is not need to do_something();
    //tried both of these approaches, none worked out.
    event.stopPropagation();
    event.stopImmediatePropagation();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T02:09:48.780

*你无法阻止`keyUp`事件！从字面上看，它不允许用户从键盘上抬起手！:P*

在 jQuery 中，有一个名为`cut copy paste`. 这适用于 IE、FF、Chrome。

```
$(document).ready(function(){
    $('#q').bind("cut copy paste", function(e) {
        e.preventDefault();
    });
    $('#q').keyup(function(e){
        do_something();
    });
}); 
```

`keyup`此外，请单独使用该函数的事件处理程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T02:24:34.133

如果用户右键单击并使用上下文菜单粘贴到文本区域，那么你很好。这留下了用户使用“Ctrl + P”粘贴到文本区域的问题。您可以尝试捕获键码并在按下组合键时跳过该功能。试试这个：

```
On keydown:

var isCtrl = false;

$('#q').keydown(function (event) {
    if(e.keycode == 17)
        isCtrl = true;
    if(isCtrl == false)
        do_something();
});

$('#q').keyup(function (e) {
    isCtrl = false;
}); 
```

所以想法是捕获“Ctrl”键。如果他们按下它，您就不想触发该功能。为了粘贴“Ctrl + P”，必须按下“Ctrl”键，因此“isCtrl”为真，防止触发 do_something(); 功能。唯一的例外是在输入“p”时不必按住“Ctrl”的窗口中使用粘滞键。

当然，这一切都假设如果您在 keydown 事件而不是在 keyup 中触发函数是可以的。根据您的功能，这可能不合适。

希望这有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T02:11:44.113

在 keyup 之前将绑定附加到粘贴应该这样做。

```
$('#q').bind('paste',function(event) {
    //user pasted text, there is not need to do_something();
    //tried both of these approaches, none worked out.
    event.stopPropagation();
    event.stopImmediatePropagation();
});

$('#q').keyup(function(e){
    do_something();
}) 
```

# prolog - 列表的序言平均

> ID：12756072
> 
> 赞同：1
> 
> 时间：2012-10-06T02:06:52.480
> 
> 标签：prolog

我有能够计算列表平均值的代码，但唯一的问题是它在为空列表时会出错。当列表为空时，我想返回 false。任何提示？

```
avg( List, Avg ):- 
    sum( List, Sum ),
    length( List, Length), 
    Avg is Sum / Length. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T09:10:45.677

当然，通常不允许除以零。如果（按照惯例）0 个元素的平均值可以为 0，则可能的修正是

```
avg( List, Avg ):- 
    sum( List, Sum ),
    length( List, Length), 
    (  Length > 0
    -> Avg is Sum / Length
    ;  Avg is 0
    ). 
```

**编辑**我在 SWI-Prolog 中测试，将 sum/2 替换为 sumlist/2

```
avg( List, Avg ):-
    sumlist( List, Sum ),
    length( List, Length),
    (  Length > 0
    -> Avg is Sum / Length
    ;  Avg is 0
    ). 
```

测试：

```
?- avg([1,2,3],X).
X = 2.

?- avg([],X).
X = 0. 
```

**编辑**对不起，我忽略了`false`空输入列表所需的内容。然后测试是否`Length > 0`肯定是合适的。谓词将失败。

使用库（聚合）的替代方法：

```
?- L=[1,2,3,4,5], aggregate((count,sum(N)),member(N,L),(Count,SumN)), Ave is SumN/Count.
L = [1, 2, 3, 4, 5],
Count = 5,
SumN = 15,
Ave = 3. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T09:27:19.853

只需添加一个列表不为空的条件，例如：

```
average( List, Average ):- 
    sum( List, Sum ),
    length( List, Length ),
    Length > 0, 
    Average is Sum / Length. 
```

这将导致谓词失败，这是适当的，因为平均值未定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-22T03:52:46.513

使用累加器，意思是一个计数器来实现算术平均值可能有助于理解 Prolog 的工作原理。

```
mean([],0). % an empty list would have mean 0

mean(Xs,Mean):- % define the predicate with a list, and the mean output
  % pass the original list, mean output, and adds two counters
  % the counters should start at 0 for accumulation
  mean1(Xs,0,0,Mean). 

% base case, after recursion, the list would be empty
% the counter would accumulate the number of elements and
% the sum of the elements
mean1([],Count,Sum,Mean):- 
  Mean is Sum / Count.

% basic recursion to track the EleCount, plus 1 each time
% the Sum would add the X in the Xs each time, until Xs is empty
mean1([X|Xs],EleCount,Sum,Mean):-
  NewCount is EleCount + 1,
  NewSum is Sum + X,
  mean1(Xs,NewCount,NewSum,Mean). 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-01T07:06:24.713

平均（列表，平均/ 1）： -

```
sumlist( List, Sum ),

length( List, Length),

(  Length > 0
-> Avg is Sum / Length
;  Avg is 0
). 
```

您应该将平均值除以 1。例如 avg(List, Avg/1)。我只是在上面的评论中复制了它并添加了 avg/2。

# python - 正则表达式 - 删除除字母数字和重音符号外的所有特殊字符

> ID：12756075
> 
> 赞同：1
> 
> 时间：2012-10-06T02:07:27.187
> 
> 标签：python, regex

如何删除除字母数字和重音符号之外的所有特殊字符？

我试过类似的东西：

```
text = 'abcdeáéí.@# '
re.sub(r'[^a-zA-Z0-9áéíóúÁÉÍÓÚâêîôÂÊÎÔãõÃÕçÇ: ]', ' ', text) 
```

但我没有成功。以下表达式仅允许字母数字但不允许重音符号有效：

```
tmp = re.sub(r'[^a-zA-Z0-9: ]', '', x) 
```

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T02:19:10.570

使您的文本成为 unicode 字符串`text = u'abcdeáéí.@# '`，并确保您的模式也能够接受 unicode 字符`re.sub(u'[^a-zA-Z0-9áéíóúÁÉÍÓÚâêîôÂÊÎÔãõÃÕçÇ: ]', ' ', text)`

通过这种组合，我得到`u'abcde\xe1\xe9\xed '`了结果（其中`\xe1`等是重音字符的转义码`text`

`r`如果您不转义任何字符，则不需要在模式前面。它在那里，所以你可以写一些东西，`r'\d\w'`而不是`'\\d\\w'`

# asp.net - 如何清除 ASP.NET 自动完成扩展器客户端缓存

> ID：12756081
> 
> 赞同：0
> 
> 时间：2012-10-06T02:09:03.233
> 
> 标签：asp.net, caching, autocomplete, autocompleteextender

我的 ASP.NET 页面上有一个自动完成扩展器，并将“EnableCaching”属性设置为“true”。

根据某些情况，我想清除自动完成扩展器的缓存（我不是指我在自动完成 Web 服务中使用的数据缓存 - 我指的是自动完成扩展器使用的客户端缓存。）

一个明显的解决方案是将“EnableCaching”设置为 false，但这会导致我的数据库遭受太多查询。

这可以通过javascript或任何其他方式完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T05:46:57.653

试试这个：`$find("<%= Extender.ClientID %>")._cache = [];`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T14:19:40.733

嗨，尤里，感谢您的回复！我还没有测试你的解决方案，因为在玩了一会儿我的代码之后我设法偶然发现了这个解决方案。

下面的 JavaScript 行似乎对我有用：

```
$find('AutoCompleteEx')._cache=null; 
```

对于那些需要额外解释的人，“AutoCompleteEx”是分配给您的自动完成扩展器的“BehaviourID”属性的值。

我希望这可以帮助那里的人！

# jquery - Disable jquery slider

> ID：12756086
> 
> 赞同：1
> 
> 时间：2012-10-06T02:10:24.087
> 
> 标签：jquery, jquery-ui, jquery-ui-slider

I am initialing my jquery slider with the following code:

```
$('.slider').slider({
       range: true,
       values: [0, 5],
       min: 0,
       max: 80,
       disabled: true
  }); 
```

I then checked the value

```
var test = $('.slider').slider("option", "disabled");
//returns true 
```

I can still use the slider (change the value). I have multiple sliders on the page with the same class name. Not sure if that would cause an issue. I want to disable them all so they are just showing the value they are assigned.

# objective-c - performSegueWithIdentifier 不实例化 UIViewController

> ID：12756087
> 
> 赞同：1
> 
> 时间：2012-10-06T02:10:25.423
> 
> 标签：objective-c, ios, uinavigationcontroller

我有一个 UINavigationController 类（并链接到情节提要“mainNavCont”），其中包含：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    NSLog(@"init"); 
}

- (void)viewDidAppear:(BOOL)animated
{
    NSLog(@"View Appeared");
    UINavigationController *selfNavController = [self navigationController];
    [selfNavController performSegueWithIdentifier:@"rootToPortSeg" sender:self];
} 
```

故事板中有一个标识符为“rootToPortSeg”的segue，类型为“push”，它链接到一个名为“portViewCont”的UIViewController。在该类中有以下内容：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    NSLog(@"I am the port");
} 
```

一切都编译得很好，我在 Xcode 中没有错误。但是 portViewCont UIViewController 从不加载或显示或任何东西。我还是 iOS 的新手，对于我的生活，我无法弄清楚我做错了什么。我在控制台中得到“init”和“View Appeared”，但没有得到“I am the port”，谢谢！

![在此处输入图像描述](../Images/d4b99fe6464caef5afcb017958d055f7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T03:51:32.880

我喜欢 rdelmar 进行分析的地方，但是正如您所看到的，您似乎无法从导航控制器本身执行 push segue（这是有道理的）。但是，看起来你可以`instantiateViewControllerWithIdentifier`，那么你可以`pushViewController`从导航控制器中得到它。因此，如果子类`UINavigationController`有`viewDidLoad`类似的：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    // this is the storyboard identifier for the portrait view controller

    UIViewController *controller = [self.storyboard instantiateViewControllerWithIdentifier:@"portrait"];

    // now you can push to it

    [self pushViewController:controller animated:NO];
} 
```

然后，纵向视图被加载，你会看到它`@"I am the port"`，你会看到你在 Interface Builder 中为那个视图添加的控件，等等。

* * *

**更新：**

我不得不承认，虽然上述技术有效，但我想知道这是否是最好的方法。具体来说，查看您的故事板，我推断您的目标是拥有一个用于纵向的视图控制器和另一个用于横向的视图控制器。如果这就是您想要做的，您可以使用 Apple 在其*视图控制器编程指南*的[创建备用景观界面](http://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/RespondingtoDeviceOrientationChanges/RespondingtoDeviceOrientationChanges.html#//apple_ref/doc/uid/TP40007457-CH7-SW14)部分中列出的技术。

也许您可以描述为什么要使用导航控制器来执行此操作，而实际上它并没有真正设计用于处理该问题。它实际上更适合处理视图控制器的推送和弹出，而不是在不同的视图控制器之间进行选择。我认为你可以让它工作，但我想知道*View Controller Programming Guide*中描述的技术是否更合适。但也许你有一些功能需求在你的故事板中并没有立即显现出来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T00:01:57.380

在对这个问题进行了更多思考之后，我认为最好的方法是使用自定义容器控制器，其中包含 PortraitController 和 LandscapeController 作为其子级。

在下面的代码中，我在容器控制器的 init 方法中实例化了 2 个子控制器，并具有指向它们的强大属性，因此在来回切换时，您将访问相同的实例。我在启动时检查设备方向的方法中设置了初始视图控制器，然后在回调 UIDeviceOrientationDidChangeNotification 时切换控制器。最后，实际的动画切换是使用 transitionFromViewController:toViewController:duration:options:animations:completion: 方法完成的。

```
#import "ContainerController.h"
#import "LandscapeController.h"
#import "PortraitController.h"

@implementation ContainerController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
    if (self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil]) {
        self.portCont = [[PortraitController alloc]initWithNibName:@"PortraitController" bundle:nil];
        self.landCont = [[LandscapeController alloc] initWithNibName:@"LandscapeController" bundle:nil];
        [self performSelectorOnMainThread:@selector(checkLaunchOrientation) withObject:nil waitUntilDone:NO];
    }
    return self;
}

-(void)checkLaunchOrientation {
    if ([[UIDevice currentDevice] orientation] !=0) {

        if (UIDevice.currentDevice.orientation == UIDeviceOrientationPortrait | UIDevice.currentDevice.orientation == UIDeviceOrientationPortraitUpsideDown){
            if ([self.currentController class] != [self.portCont class] ) {
                self.currentController = self.portCont;
                [self addChildViewController:self.portCont];
                [self.view addSubview:self.portCont.view];
            }
        }else if (UIDevice.currentDevice.orientation == UIDeviceOrientationLandscapeLeft | UIDevice.currentDevice.orientation == UIDeviceOrientationLandscapeRight){
            if ([self.currentController class] != [self.landCont class] ) {
                self.currentController = self.landCont;
                [self addChildViewController:self.landCont];
                [self.view addSubview:self.landCont.view];
            }
        }
        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(orientationChanged:) name:UIDeviceOrientationDidChangeNotification object:nil];
    }else{
        [self checkLaunchOrientation];
    }
}

-(void)orientationChanged:(NSNotification *) aNote {
    if (UIDevice.currentDevice.orientation == UIDeviceOrientationPortrait | UIDevice.currentDevice.orientation == UIDeviceOrientationPortraitUpsideDown){
        if ([self.currentController class] != [self.portCont class] ) {
            [self addChildViewController:self.portCont];
            [self moveToNewController:self.portCont];
        }
    }else if (UIDevice.currentDevice.orientation == UIDeviceOrientationLandscapeLeft | UIDevice.currentDevice.orientation == UIDeviceOrientationLandscapeRight){
        if ([self.currentController class] != [self.landCont class] ) {
            [self addChildViewController:self.landCont];
            [self moveToNewController:self.landCont];
        }
    }
}

-(void)moveToNewController:(id) newController {
    [self.currentController willMoveToParentViewController:nil];
    [self transitionFromViewController:self.currentController toViewController:newController duration:.6 options:UIViewAnimationOptionTransitionFlipFromLeft animations:^{}
        completion:^(BOOL finished) {
        [self.currentController removeFromParentViewController];
        [newController didMoveToParentViewController:self];
        self.currentController = newController;
    }];
}

-(BOOL)shouldAutorotate {
    return YES;
}

- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskAll;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T03:22:13.330

如果我正确理解您的设置，则您发布的代码位于您的 MainNavCont 控制器中。如果是这样，我不明白你在用这条线做什么：

```
UINavigationController *selfNavController = [self navigationController]; 
```

您的代码所在的类*是*导航控制器，您应该只在 performSegue: 方法中使用 self：

```
[self performSegueWithIdentifier:@"rootToPortSeg" sender:self]; 
```

# iphone - 如何在 iPhone 中设置两个功能之间的时间延迟？

> ID：12756088
> 
> 赞同：0
> 
> 时间：2012-10-06T02:10:29.397
> 
> 标签：iphone

我构建了调用服务器的应用程序。

从服务器获得回复需要 20 秒 - 30 秒，因为我们使用的系统取决于外部服务（连接到我们的合作伙伴系统）。

在我可以做下一个之前，我必须等待得到结果。

有没有办法设置等待回复的延迟时间？？？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T02:23:35.983

这是你想要的？

## 执行选择器

```
[self performSelector:@selector(doNext) withObject:nil afterDelay:30.0]; 
```

## NS定时器

```
[NSTimer scheduledTimerWithTimeInterval:30.0 target:self selector:@selector(doNext) userInfo:nil repeats:NO]; 
```

## 派遣

```
dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, 30.0 * NSEC_PER_SEC);
dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
    [self doNext];
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T02:34:25.463

在这种情况下，我使用块。这样您就可以发送您的请求，并且只有在收到回复时才继续处理代码。

# web-hosting - Ways to host a small site on Windows Server 2008?

> ID：12756089
> 
> 赞同：0
> 
> 时间：2012-10-06T02:10:33.650
> 
> 标签：web-hosting

I've written a small site that employees will be using for time entry and things of that nature and I need a way to host it on my server which is running Windows Server 2008 Standard. I'm using mostly PHP and Javascript on the site but nothing very intensive.

I've heard of using XAMPP as a way to host, but I'd like to hear some more options before I settle on something. Any suggestions?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T02:16:04.020

You can install PHP for IIS7, which is perhaps better integrated with the rest of the Server 2008 ecosystem, and pretty straightforward to administer.

# jquery - 用动画改变悬停时div背景图像的宽度

> ID：12756102
> 
> 赞同：0
> 
> 时间：2012-10-06T02:13:00.747
> 
> 标签：jquery, image, background, hover

我想在悬停时更改 div 的背景图像的宽度。我的代码是：

HTML：

`<div class="block2 todrop" target="regbuyer.php"></div>`

CSS：

```
.col1 .block2                   { float: right; margin: 104px 0 0 0; width: 208px; height: 104px; background: url(../images/block2-1.jpg) no-repeat center center; background-size: 100% 100%; }
.todrop                         { cursor: pointer;  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T02:16:05.643

**我只是重新阅读了这个问题并意识到我是一个傻瓜**

您不能主动更改背景大小，但是，您可以使用具有不同背景大小的类，并在悬停时在两者之间交替。

```
$('.block2').hover(function(){
   $(this).removeClass('newSize').addClass('oldSize');
}, function(){
   $(this).removeClass('oldSize').addClass('newSize');
});​ 
```

的CSS。

```
.newSize{
    background-size:25% 25%;
}
.oldSize{
    background-size:100% 100%;
} 
```

只需在创建元素时从元素上的其中一个开始，您就可以开始了。

[小提琴](http://jsfiddle.net/PeFk8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T02:17:06.183

就像是

```
$('.block2').live('mouseover', function() {
    $(this).animate({width: '300px'});
});

$('.block2').live('mouseout', function() {
    $(this).animate({width: '208px'});
}); 
```

# java - 插值搜索数组越界

> ID：12756103
> 
> 赞同：0
> 
> 时间：2012-10-06T02:13:22.680
> 
> 标签：java, search

我正在制作一个使用下面我从维基百科获得的插值搜索的 java 程序。在我的主程序中，我创建了一个包含 100,000 个点的 int 数组。然后我用随机数填充所有这些点并对其进行排序。然后我生成一个随机搜索键并调用该函数。我还每次使用不同的搜索键循环函数调用 100 次。当我这样做时，如果（sortedArray [mid] < toFind），我在这个语句上得到一个数组越界错误。该程序适用于具有 10 个点、100 个点、1000 个点的数组，但是当我达到 100,000 个时，我得到了错误。你知道我能做些什么来解决这个问题吗？

```
 public int interpolationSearch(int[] sortedArray, int toFind){
  // Returns index of toFind in sortedArray, or -1 if not found
  int low = 0;
  int high = sortedArray.length - 1;
  int mid;

  while (sortedArray[low] <= toFind && sortedArray[high] >= toFind) {
   mid = low +
         ((toFind - sortedArray[low]) * (high - low)) /
         (sortedArray[high] - sortedArray[low]);  

   if (sortedArray[mid] < toFind)
    low = mid + 1;
   else if (sortedArray[mid] > toFind)
    // Repetition of the comparison code is forced by syntax limitations.
    high = mid - 1;
   else
    return mid;
  }

  if (sortedArray[low] == toFind)
   return low;
  else
   return -1; // Not found
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T02:26:09.507

您应该在像 Eclipse 这样的 IDE 中开发这样的代码（还有其他的）。在 Eclipse 中，您可以调试此程序并指示调试器在抛出特定异常（如 ArrayOutOfBoundsException）时停止。然后，您可以查看导致错误的代码行，并且可以查看每个变量的值。有了这些信息，识别和解决问题就会容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T02:30:29.920

您正在溢出可以存储在 int 中的最大值，即 2,147,483,647。

在计算方程式中的分子时，您正在执行 ((39258-0)*(99999-0))，即 3,925,760,742。

如果您将其更改为此，您将不会遇到此问题：

```
long numerator = (long)(toFind - sortedArray[low]) * (long)(high - low);
mid = low + numerator / (sortedArray[high] - sortedArray[low]); 
```

我认为您还需要将 while 循环更改为：

```
while (sortedArray[low] < toFind && sortedArray[high] >= toFind) { 
```

否则你会遇到 sortedArray[low] == sortedArray[high] == toFind

然后你的方程减少到

```
mid = low + (0 * (high - low)) / 0 = 0/0 
```

Java 允许除以零。我不确定会发生什么，在这种情况下可能是 mid = infinity 或 NaN。

# facebook - Button Like increment number, but dont post on facebook and the facebook do not recognize meta tags

> ID：12756104
> 
> 赞同：0
> 
> 时间：2012-10-06T02:13:25.800
> 
> 标签：facebook, button, increment

I'm trying to implement a 'like button' on my web site, and the preview function when you post the website link on facebook and it appear the title, description, image, etc.. etc.. I followed every step on facebook developers site, but it still doesn't work! Can someone help me please? Here's my code:

```
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="Content-Language" content="pt-BR">    

    <meta property="og:title" content="Hostel Rosa dos Ventos"/>
    <meta property="og:type" content="hotel"/>
    <meta property="og:url" content="http://www.hostelrosadosventos.com.br"/>
    <meta property="og:image" content="http://www.hostelrosadosventos.com.br/Content/images/thumb_facebook.jpg"/>
    <meta property="og:site_name" content="RV Hostel"/>
    <meta property="fb:admins" content="100001714162833,1043531878"/>
    <meta property="og:description" content="Hostel localizado em Morro de São Paulo - BA"/>

    <title>Hostel Rosa dos Ventos</title>

    [...]
</head>

<div id="fb-root"></div>
<script>
    // Load the SDK Asynchronously
    (function (d) {
        var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
        if (d.getElementById(id)) { return; }
        js = d.createElement('script'); js.id = id; js.async = true;
        js.src = "//connect.facebook.net/pt_BR/all.js#xfbml=1";
        ref.parentNode.insertBefore(js, ref);
    } (document));
</script> 
```

and where i want the button:

```
<fb:like href="http://www.hostelrosadosventos.com.br" width="450" height="80" show_faces="false"/> 
```

whats wrong ?

When i try to debug it on

[http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.hostelrosadosventos.com](http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.hostelrosadosventos.com)

It says that my meta tags are not there... i'm actually freaking out

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T03:42:27.183

可能是因为这些元标记没有正确关闭

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Language" content="pt-BR"> 
```

我知道这无关紧要，但你不知道 FBs 解析器有多复杂。所以请尝试

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta http-equiv="Content-Language" content="pt-BR"/> 
```

# java - Java：大数组设计

> ID：12756108
> 
> 赞同：3
> 
> 时间：2012-10-06T02:15:01.157
> 
> 标签：java, multidimensional-array

当我阅读此链接[Java 批评](http://en.wikipedia.org/wiki/Criticism_of_Java)时。在大阵列部分。有两点我不明白：

> Java 还缺乏真正的多维数组（通过单个间接访问连续分配的单个内存块），这限制了科学和技术计算的性能

在 C 中，我知道多维数组只是元素的连续内存。所以，如上所述，Java 中的每一行都是一个对象，而多行就像多对象一样，它们在内存中并不连续，对吧？

> Java 因不支持超过 231 - 1（约 21 亿）个元素的数组而受到批评...数组必须由 int 值索引...尝试访问具有长索引值的数组组件会导致编译时间错误

这是否意味着，如果我们可以通过长整数访问数组组件，则数组大小可以更大？在这种情况下，数组的这个仍然限制大小是 long 的大小，对吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T02:41:44.003

> ... Java 中的每一行都是一个对象，多行就像多对象一样，它们在内存中不连续，对吧？

那是对的。Java 多维数组是一个数组数组，每个数组表示为一个单独的对象。

> 这是否意味着，如果我们可以通过长整数访问数组组件，则数组大小可以更大？

不可以。Java 数组的最大大小为 2^31 - 1 个元素。

JLS 在[JLS 10.4](http://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html#jls-10.4-100)上这样说：

> *“数组必须由 int 值索引；short、byte 或 char 值也可以用作索引值，因为它们受到一元数字提升 (§5.6.1) 并成为 int 值。*
> 
> *尝试访问具有长索引值的数组组件会导致编译时错误。”*

* * *

简而言之，您链接到的页面*正确*地指出 Java 不适合需要使用非常大数组的应用程序。（可以绕过这些限制，但是如果不将底层数组表示形式包装为对象，您就无法干净地做到这一点。这会影响性能，并且意味着您不能使用`[...]`语法进行索引。）

# java - ArrayList 重写自身

> ID：12756109
> 
> 赞同：3
> 
> 时间：2012-10-06T02:15:27.437
> 
> 标签：java, arraylist

您好，我在这里有一些简化的代码，显示了我遇到的问题。基本上，我似乎无法添加到 ArrayList 的末尾，而是自己重写。请帮忙

**主要的**

```
public class Main {

public static void main(String[] args) {
    HolderOfList h = new HolderOfList();
    h.addToHolder(new Num(2, "Bob"));
    h.addToHolder(new Num(3, "Cat"));
    h.addToHolder(new Num(4, "Dog"));
    h.printAll();
}
} 
```

**持有 ArrayList 的类**

```
import java.util.ArrayList;
import java.util.List;

public class HolderOfList {
List<Num> num;

public HolderOfList() {
    num = new ArrayList<Num>();
}

void addToHolder(Num n) {
    num.add(n);
}

void printAll() {
    for (int i = 0; i < num.size(); i++) {
        System.out.println(num.get(i).getI() + num.get(i).getStr());
    }
}
} 
```

**ArrayList 中保存的元素**

```
public class Num {

private static String str;
private static int i;

public Num(int i, String str) {
    this.str = str;
    this.i = i;
}

String getStr() {
    return str;
}

int getI() {
    return i;
}

} 
```

所需的输出是 2Bob 3Cat 4Dog

但我得到的只是

4狗 4狗 4狗

我有一个更大规模的项目，有这个问题有什么想法吗？

先感谢您

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T02:18:20.523

去掉 Num 变量的`static`修饰符，以便所有 Num 实例有效地共享相同的单个变量（实际上并不是因为它们实际上是类的变量，但行为是相同的）。改为使它们成为*实例*（非静态）变量。

换句话说，改变这个：

```
public class Num {
  private static String str;
  private static int i; 
```

对此：

```
public class Num {
  private String str;
  private int i; 
```

经验教训：`static`谨慎使用修饰符，并且仅在有意义的情况下使用。这里没有意义。

# windows-8 - How to get another app's tile image in Windows 8 using WinJS?

> ID：12756110
> 
> 赞同：-1
> 
> 时间：2012-10-06T02:15:34.157
> 
> 标签：windows-8, winjs

I am trying to get the Tile/Icon image of another app, so I can use it in my application.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T02:20:07.170

据我所知，这样做的唯一方法是联系应用程序的作者，请求他们的许可，然后让他们向您发送平铺图像。WinJS 中没有用于与其他应用程序的磁贴交互的 API。

# c# - How to fix web api controller unit testing exception - accept header invalid

> ID：12756114
> 
> 赞同：0
> 
> 时间：2012-10-06T02:16:15.640
> 
> 标签：c#, asp.net, rest

I'm using the Request.CreateResponse method in asp.net web api (.net 4.5) to attempt to return a response after a PUT op.

```
documentSession.SaveChanges();

// Http PUT response must return URI to created / updated resource  
// Line below throws exception                              
var response = Request.CreateResponse<T>(HttpStatusCode.Created, resource);
response.Headers.Location = new Uri(Request.RequestUri, pathToResource);
return response; 
```

My unit tests currently use this method to setup the request context:

```
public static void SetupControllerContext(BaseApiController controller, HttpMethod method)
{                   
       controller.Request = new HttpRequestMessage(method, "http://localhost");
       //controller.Request.Headers.Add("Accept", "application/json");            
       var configuration = new System.Web.Http.HttpConfiguration(new System.Web.Http.HttpRouteCollection());            
       controller.Request.Properties["MS_HttpConfiguration"] = configuration;
} 
```

The exception (thrown on the Request.CreateResponse method above) is: **The format of value 'application/json; charset=utf-8' is invalid.**

Stacktrace:

```
 at System.Net.Http.Headers.MediaTypeHeaderValue.CheckMediaTypeFormat(String mediaType, String parameterName)
   at System.Net.Http.Headers.MediaTypeHeaderValue..ctor(String mediaType)
   at System.Net.Http.ObjectContent.BuildHeaderValue(String mediaType)
   at System.Net.Http.ObjectContent`1..ctor(T value, MediaTypeFormatter formatter, String mediaType)
   at System.Net.Http.HttpRequestMessageExtensions.CreateResponse[T](HttpRequestMessage request, HttpStatusCode statusCode, T value, HttpConfiguration configuration)
   at System.Net.Http.HttpRequestMessageExtensions.CreateResponse[T](HttpRequestMessage request, HttpStatusCode statusCode, T value)
   at SoftModel.UI.Html.Controllers.BaseApiController.SaveChanges[T](T resource, String pathToResource) in c:\Users\Us\Documents\Visual Studio 2010\Projects\SoftModel\SoftModel.UI.Html\Controllers\BaseApiController.cs:line 113
   at SoftModel.UI.Html.Controllers.InstanceController.Put(Record record) in c:\Users\Us\Documents\Visual Studio 2010\Projects\SoftModel\SoftModel.UI.Html\Controllers\InstanceController.cs:line 62
   at SoftModel.Tests.InstanceApiControllerTests.Put_Valid_Record_Returns_Record_URI() in c:\Users\Us\Documents\Visual Studio 2010\Projects\SoftModel\SoftModel.Tests\InstanceControllerTests.cs:line 69 
```

I've checked the source of the MediaTypeHeaderValue and cannot work out what is wrong?

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-06T03:35:03.220

听起来很像这样 [http://stackoverflow.com/questions/11988027/exceptions-with-webapi-request-formatting](http://stackoverflow.com/questions/11988027/exceptions-with-webapi-request-formatting)

编辑：更新链接到更好的页面

# lazarus - How to load an image from a TImageList into TTrayIcon?

> ID：12756116
> 
> 赞同：2
> 
> 时间：2012-10-06T02:16:51.420
> 
> 标签：lazarus

Is it possible to load an image from a TImageList into a TTrayIcon at runtime? How? Is this a good idea? Or is there a more preferred method for changing the tray icon's image at runtime?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-03-23T14:42:26.817

这是一个班轮：

```
ImageList1.GetIcon(0, TrayIcon1.Icon); 
```

它将索引图像列表图标复制到托盘图标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T12:31:43.970

使用由半透明 png 图像组成的图像列表在带有 Lazarus 0.9.30.4 的 Windows 上进行了测试，可以使用临时位图：

```
var
  Bmp: TBitmap;
begin
  Bmp := TBitmap.Create;
  try
    ImageList1.GetBitmap(0, Bmp);
    TrayIcon1.Icon.Assign(Bmp);
    TrayIcon1.Show;
  finally
    Bmp.Free;
  end; 
```

我认为在运行时从图像列表图像分配图标没有任何问题。另请参阅组件[wiki 页面上](http://wiki.freepascal.org/TrayIcon)的示例，了解在运行时分配图标的其他可能实现。

# php - Php get multiple files passed to getopt(), *.jpg

> ID：12756120
> 
> 赞同：0
> 
> 时间：2012-10-06T02:17:25.397
> 
> 标签：php, command-line, getopt

I am using getopt() to get php command line arguments. I want to collect a list of files or directories using the *.

Example

in

```
/my/dir/file1.jpg
/my/dir/file2.jpg
/my/dir/file3.jpg 
```

I would like:

```
$ ./myscript.php -s *.jpg 
```

for optarg[s], I would like to get an return an array containing:

```
array(file1.jpg, file2.jpg, file3.jpg) 
```

I've searched for a solution but all I can manage to get back is the first match.

# php - 如何在 td 中使用 onclick 事件添加表格行

> ID：12756122
> 
> 赞同：0
> 
> 时间：2012-10-06T02:17:28.710
> 
> 标签：php, javascript, onclick, tablerow

好的，所以我让它在单击时在用户名下下拉另一个，显示该用户的姓名、电子邮件等，但它会在每个用户名下下拉每个用户的用户信息，而不是在我点击的那个下方上。

有没有办法告诉它只显示下一个元素，而不是所有隐藏的元素？

我试过抓住点击的索引（带有用户名的那个，但我似乎无法使用任何类型的 index+1 类型逻辑来获得一个函数。

这是我现在拥有的代码：

```
<?php
  for ($output_user = 0; $output_user <= $num_pending - 1; $output_user++)
  {
    echo "\n\t<tr class=\"pending_users\">\n\t\t<td class=\"admin\">".$pending_user[$output_user][0]."</td>";
    echo "\n\t\t<td class=\"m_1\"><input type=\"checkbox\" value=\"approve\"/></td>";
    echo "\n\t\t<td class=\"m_l\"><input type=\"checkbox\" value=\"deny\"/></td>";
    echo "\n\t</tr>";
    echo "\n\t<tr class=\"showhide\">\n\t\t<td class=\"admin\" colspan=\"3\">Name:".$pending_user[$output_user][1]." ".$pending_user[$output_user][2]."\nEmail: ".$pending_user[$output_user][3]."\nEnrol Date: ".$pending_user[$output_user][4]."</td>\n\t</tr>";
    echo "\n\t</tr>";
  }
?>
<script>
 $(document).ready(function() {
  //Hides specific user details when the page loads
  $("div.show_user_info tr.showhide:visible").hide();

  //Makes every other row another bgcolor - effects pending user table only
  $("tr.pending_users:odd").css("background-color", "#ffff00");
 });

 $("td.admin").click(function () {
  var nextIndex = $("tr").index(this) + 1;
  $("div.show_user_info tr.showhide:hidden").slideDown("slow");
 });

 $("tr.showhide").click(function () {

  $(this).slideUp("slow");          
 });
</script> 
```

* * *

我正在处理的页面是一个管理页面，用户可以在其中批准或拒绝注册请求。我正在使用 php 为正在等待注册的数据库中的每个用户动态创建一个表行。

话虽如此，当用户单击用户名所在的位置时，我想插入一个 + 来显示用户信息（姓名、请求日期等），并且当用户单击另一个与另一个用户名，并让它显示该用户的另一行等。

我用来创建表行的 php 是这样的：

```
<?php
    for ($output_user = 0; $output_user <= $num_pending - 1; $output_user++)
    {
        echo "\n\t<tr>\n\t\t<td class=\"admin\">".$pending_user[$output_user][0]."</td>";
        echo "\n\t\t<td class=\"m_1\"><input type=\"checkbox\" value=\"approve\"/></td>";
        echo "\n\t\t<td class=\"m_l\"><input type=\"checkbox\" value=\"deny\"/></td>";
        echo "\n\t</tr>";
    }
?> 
```

我可以创建一个使用 php 执行此操作的 onclick 事件，还是需要使用 javascript？我一直在互联网上寻找类似的例子，但我找不到任何有用的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T02:46:47.670

为了方便和跨浏览器兼容性，我为此使用了 jQuery，但如果没有它，你当然可以做到这一点（或者甚至根本没有 javascript，如果你的用户不介意每次都重新加载页面）。

我假设了一个结构，其中您将拥有一个`details`包含您希望默认隐藏的额外信息的类的元素。查看[我的 jsFiddle](http://jsfiddle.net/mgLLJ/)以了解它在实践中是如何工作的。

```
$(".details").each(function() {
  var $link = $("<a href='javascript:void(0)'>+</a>");
  var $details = $(this);
  $details.hide().before($link);

  $link.on("click", function() {
    $details.toggle();
    $(".details").not($details).hide();
  });
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T02:32:51.463

强烈建议您使用 jQuery 来实现这一点。`<div id="user_info"></div>`在您要显示信息的位置添加一个。

```
$("#YOUR USER DIV").click(function() {
    $("div#user_info").html("SOME USER INFORMATION WITH HTML");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T02:26:46.803

您当然可以通过将可点击的“+”设置为一个链接来调用您的 php 脚本，并使用描述您单击的内容的查询字符串，并让 php 返回页面，其中包含查询字符串中命名的用户的额外详细信息......但是使用 javascript 可能会带来更好的用户体验。

# android - 将音频剪辑插入 Android 应用程序

> ID：12756123
> 
> 赞同：0
> 
> 时间：2012-10-06T02:18:09.240
> 
> 标签：android

我计划为教堂制作一个应用程序，它是一个相对简单的应用程序，它只是在主 xml 中有一个菜单，其中将包含一个 about 部分联系人和一个剪辑部分。现在，当用户单击剪辑时，它们将被重定向到一个 xml 文件，其中列出了前几周服务的所有音频剪辑，然后用户可以单击以收听。我只是计划创建一个原始文件夹并将所有剪辑放在该文件夹中，然后通过带有原始文件的 mediaplayer 类访问音频文件。方法，但这真的是最好的方法吗？我在这里有几个问题。如果我这样做，我是否必须一直修改代码，因为我必须插入最新的剪辑？如果是这样，有什么更好的方法，所以我不这样做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T03:19:35.047

将所有剪辑放在`assets`文件夹中。在您的应用程序中使用类似：

```
AssetManager assets = getAssets();
String[] list = assets.list(""); 
```

这将返回资产文件夹中所有文件的列表。在这里，您需要在列表视图中使用该数组或处理它以您认为合适的任何方式创建视图。

最简单的方法是使用 listView 并通过使用适配器中的数组将文件标题逐字放入列表中。

```
ListView listView = (ListView) findViewById(R.id.listView);
ArrayAdapter<CharSequence> adapter = new ArrayAdapter<CharSequence>(
             this,
             android.R.layout.simple_spinner_item,
             new ArrayList<CharSequence>(Arrays.asList(list)));
adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
listView.setAdapter(adapter); 
```

何时使用其中一个文件（可能在 a 中`ListView.OnItemSelectedListener()`）：

```
assets.open(fileName); 
```

fileName 是一个字符串，其中包含您选择的文件的名称。

在需要更新时，此方法不会涉及更改代码。

如果您的应用程序将超过 50mb，您将需要使用扩展文件。由于扩展文件的下载和验证，这种方法有点复杂，但使用方法类似。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T02:33:38.667

当您列出用户可以看到的声音片段时，为什么不通过列出某个文件夹中的所有音乐片段来使其获得此列表？每当您想添加声音剪辑时，您只需将其添加到该文件夹​​即可。没有对特定声音剪辑的任何静态引用。

此外，您可能想开始接受答案，或者人们将停止回答您。我不是说选择我的作为答案（除非它是你要找的），但你可能想花点时间来解决你过去的问题。其中一些有一些评价很高的答案。

# javascript - “不是无穷无尽的”背景滚动鼠标位置

> ID：12756125
> 
> 赞同：0
> 
> 时间：2012-10-06T02:18:31.217
> 
> 标签：javascript, background, mouse

我不太了解 JS，我想将此[代码](https://stackoverflow.com/a/6137535/1433139)添加到我的网站，但我不希望它无止境。我希望它在 x 轴的某些限制或边界（最小值和最大值）处停止。我怎样才能以最简单的方式做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T03:14:58.773

没关系，使用 jquery 很容易做到这一点。假设您的滚动限制为 800（如您所述），然后将以下代码放入您的 js

```
$(window).scroll(function(){
  if($(window).scrollTop() > 800 ){
    return false;
  }
}) 
```

顶部为 800 像素后，您的窗口将不会滚动。

谢谢

# wso2 - WSO2 ESB：如何让迭代调解器在发送下一个请求之前等待响应

> ID：12756126
> 
> 赞同：2
> 
> 时间：2012-10-06T02:18:31.063
> 
> 标签：wso2, wso2esb, esb

让 Iterate 调解器工作并将其调出到另一个外部端点几乎没有问题。但是，在我看来（通过记录），无论我将 Sequencing 设置为 True 还是 False，ESB 都会相当快地发送所有请求。这种快速发送请求似乎导致我的端点指向的外部 Web 服务出现问题。如果我在 xml 中有 1 个项目供 Iterate 工作，那么一切都很好。但是如果我迭代 2 次或更多，我会遇到各种错误。

这就是为什么我想知道无论如何我可以让 Iterate 调解器调用这个外部端点，等待响应，然后用下一个请求调用外部端点。如何使用 WSO2 ESB 实现这一目标？

*如果我必须用代码来做这件事，我会把请求放在一个数组中，并用数组的大小设置一个计数器。然后我将从数组中获取第一项并调用 Web 服务。当响应回来时，我会先把它放在结果数组中。将计数器加 1。然后我检查请求数组中是否有更多项目，如果有，则进行下一次调用。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T13:24:45.457

我认为您可以使用 Flag 变量（属性调解器）：

我会在 Insquence 中添加一个名为 STATUS 的属性调解器，设置为“request_iterate”，稍后在 OutSequence 中，您可以创建一个 Switch 调解器，其中第一个案例匹配“request_iterate”和一个调用端点的发送调解器，在它设置属性之后（ 'STATUS'）到“response_iterate”。案例 2 将匹配“response_iterate”并在响应后执行您必须执行的任何操作。

如果您遇到时间问题，您可以使用消息存储和消息处理器来实现限制场景。

注意：消息模式通常用于异步操作

希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-31T03:21:34.760

我认为您可以使用“呼叫”调解器或使用“呼叫”调解器将阻止模式设置为真。有关更多信息，请参阅以下链接： [https ://docs.wso2.com/display/ESB490/Call+Mediator](https://docs.wso2.com/display/ESB490/Call+Mediator)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-17T03:13:55.363

尝试在呼叫中介中使用属性**blocking="true"**，如下所示，

```
<call blocking="true">
 <endpoint key="yourEndpointName"/>
</call> 
```

这应该可以解决问题。

谢谢，希望对你有帮助

# c# - 如何计算 XML Doc 中的项目数

> ID：12756129
> 
> 赞同：2
> 
> 时间：2012-10-06T02:19:11.760
> 
> 标签：c#, asp.net, xml

我是新来的——我猜你们是最棒的——所以就这样吧。

这是我的问题。我敢于创建一个完全基于 XML 的完整博客站点——没有数据库。到目前为止，我做得很好。我只有一个问题阻碍了我一起完成这个项目。

我有一个像这样的“博客评论”xml 文档：

```
<comments>
    <blogId id="123">
        <commentID>46</commentID>
        <userName>user1</userName>
        <userComment>This is a test comment</userComment>
    </blogId>
</comments>
<comments>
    <blogId id="123">
        <commentID>47</commentID>
        <userName>user2</userName>
        <userComment>this is a test comment by some user</userComment>
    </blogId>
</comments>
<comments>
    <blogId id="1244">
        <commentID>129</commentID>
        <userName>user3</userName>
        <userComment>This is someone else's comment</userComment>
    </blogId>
</comments> 
```

我希望能够计算附加到第一个 blogId 节点（？）的评论数量。

到目前为止，我已经打开了文档并且能够阅读，但我不知道如何计算.... 想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T02:26:32.383

```
var count = XDocument
     .Load("c://blog.xml")
     .XPathSelectElements("//comments/blogId[@id='123']")
     .Count(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T02:35:03.893

```
XDocument doc = //your xml document

//to get the count of comments with the first id:
var blogs = doc.Descendants("blogId");
var firstId = blogs.First().Attribute("id").Value;
int count = blogs.Count(x => x.Attribute("id").Value == firstId);

//this seems more useful to me:
var commentsByBlogId = doc.Descendants("blogId").GroupBy(x => x.Attribute("id").Value); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T02:24:07.927

如果您使用的是 LINQ，您可以执行一个简单的查询`doc.Descendants("Comment").Count(x => x.Attributes["id"] == "123")`。

我在没有 Visual Studio 的情况下编写此代码，该属性的处理方式可能略有不同，如果您想更频繁地使用此代码，您应该考虑添加基本错误处理（即“id”属性不存在）。

# java - SAX XMLParser 不工作

> ID：12756134
> 
> 赞同：0
> 
> 时间：2012-10-06T02:19:47.147
> 
> 标签：java, android, xml, parsing, sax

我已经关注了多个关于如何为 Android 平台设置 SAX XML 解析器的在线教程，但它们似乎都不起作用！有什么问题？这是我的代码：

进口：

```
import java.net.URL;
import java.util.ArrayList;
import java.util.List;

import javax.xml.parsers.SAXParser;
import javax.xml.parsers.SAXParserFactory;

import org.xml.sax.Attributes;
import org.xml.sax.InputSource;
import org.xml.sax.SAXException;
import org.xml.sax.helpers.DefaultHandler;

import android.app.Activity;
import android.util.Log; 
```

这段代码在我知道被调用的方法中，但为什么 logcat 不显示“TESTING”？

```
 try {
                URL XMLURL = new URL("https://gdata.youtube.com/feeds/api/videos?q=Crystallize+Lindsey+Stirling+Offical+Music+Video&orderby=relevance");
                SAXParserFactory SPF = SAXParserFactory.newInstance();
                SAXParser SP = SPF.newSAXParser();

                DefaultHandler mainHandler = new DefaultHandler(){

                    @Override
                    public void startElement(String uri, String localName,
                            String qName, Attributes attributes)
                            throws SAXException {

                        if(localName.equals("Link")){

                            String possibleURL = attributes.getValue("href");
                            Log.i("TEST","TESTING");
                        }

                    }
                };

                SP.parse(new InputSource(XMLURL.openStream()),mainHandler);
            } catch (Exception e) {
                e.printStackTrace();

            } 
```

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T13:52:15.957

这是一个命名空间问题。

```
SAXParserFactory SPF = SAXParserFactory.newInstance();
SAXParser SP = SPF.newSAXParser(); 
```

正在为您提供一个无法正确处理名称空间的解析器。

如果您更改 startElement 以检查`qName`值“链接”，您的代码将工作，但这是一种创可贴修复。

*本文档中有*命名空间，尽管此元素位于为文档指定的默认命名空间[http://www.w3.org/2005/Atom中。](http://www.w3.org/2005/Atom)

你应该告诉解析器工厂给你一个命名空间感知解析器：

```
SAXParserFactory SPF = SAXParserFactory.newInstance();
SPF.setNamespaceAware(true);
SAXParser SP = SPF.newSAXParser(); 
```

然后您将在不更改`startElement`方法的情况下获得预期的结果，除非您必须寻找正确的值，即检查“链接”而不是“链接”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T05:29:09.813

检查你的 logcat 是否有一大块黄色文本。它可能会通知您导致 SAX 解析器崩溃的任何错误。

# pdf - 如何在没有 X11 的情况下从八度音阶绘制为 pdf

> ID：12756135
> 
> 赞同：3
> 
> 时间：2012-10-06T02:19:51.840
> 
> 标签：pdf, plot, png, x11, octave

我想在 ubuntu 系统上从 octave 创建 pdf 或 png 图，我只有一个命令行，没有 X11，没有 Windows。我想做这样的事情：

```
plot(x, y);
print -dpng myplot.png 
```

但是情节给了我这个警告：

```
warning: X11 DISPLAY environment variable not set 
```

这两个命令都只是在控制台上给我一个字符图形再现。我需要将 GNUTERM 设置为什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-13T20:32:21.750

这是一个非常古老的问题，但对我来说这是最好的结果。与当今的云服务相关，以下是解决问题的方法：

```
figure ("visible", "off")
plot (1:10)
print output.png 
```

如果您不想只处理文件，可以转发 X11 以进行远程查看。[远程运行 Octave 并通过 x11](https://stackoverflow.com/questions/12337234/run-octave-remotely-and-display-locally-via-x11)在本地显示假设 X11 库已安装并准备就绪......所以只需将 -X 添加到 ssh：

```
ssh -X remoteserver 
```

首先要获得 X11，这些文章：

*   [从亚马逊 ec2 ami 转发 X11](https://superuser.com/questions/249045/x11-forwarding-from-amazon-ec2-ami)
*   [AWS 开发者论坛：X11 转发...DISPLAY 未设置...](https://forums.aws.amazon.com/thread.jspa?threadID=162871)

建议：

*   编辑 /etc/ssh/sshd_config 并设置
    *   X11转发是
    *   CentOS 可能需要这些：
        *   ForwardX11 是
        *   ForwardX11可信的是
*   $ sudo yum groupinstall "X 窗口系统"
    *   或安装您想要的单个软件包
*   $ 出口显示=本地主机：10.0
    *   仅当未安装 xauth 时才缺少此变量
*   $ sudo yum 安装 xauth
    *   默认不安装

并且以防万一您确实遇到了 GNUTERM 错误： [Octave Plotting Error](https://stackoverflow.com/questions/16166595/octave-plotting-error)建议使用 X11 支持编译 gnuplot 并在绘制任何内容之前设置环境：

```
$ (whatever installs) gnuplot --with-x11

Then in Octave:
#setenv("GNUTERM", "qt")
setenv("GNUTERM","X11")
plot(x,y) 
```

# xml-rpc - xmlrpc 将数组参数发送到 Bugzilla 接口 - “严格 refs”

> ID：12756141
> 
> 赞同：1
> 
> 时间：2012-10-06T02:20:43.347
> 
> 标签：xml-rpc, bugzilla

我正在使用 XmlRpc 查询我的 Bugzilla 服务器，但是当我执行时：

```
Map params = new HashMap<String, Object>();
params.put("ids", "250");
result = (Map) client.execute("Bug.get", new Object[] { params }); 
```

我得到：线程“main”中的异常 org.apache.xmlrpc.XmlRpcException：在 Bugzilla/WebService/Bug.pm 第 76 行使用“strict refs”时，不能使用字符串（“250”）作为 ARRAY 引用。

我也试过 [250] 和 {250}。
有人能告诉我如何正确地向这个方法发送参数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T02:29:47.067

```
Vector array = new Vector();
array.addElement(250);
params.put("ids", array ); 
```

# c++ - 从堆栈中弹出对象

> ID：12756144
> 
> 赞同：0
> 
> 时间：2012-10-06T02:21:35.990
> 
> 标签：c++, loops, optimization, coding-style

假设我想从堆栈中弹出对象并检查它们的状态，无论它是否`FUP`（面朝上）。

我想继续这样做，直到达到堆栈为空或实例状态未朝上的程度；在这种情况下，我需要将此实例推回并停止循环。

这是一种方法：

```
bool isfup = true;

while(pop(stack, &ins) && isfup = ins->state == FUP)
{
    // continue removing elements from stack
}

if(isfup == false)
    push(stack, ins); 
```

我是这样做的：

```
while(pop(stack, &ins) && (ins->state == FUP || (push(stack, ins) && false)));
// while( A && ( B || ( C && false ) ) ); 
```

我的问题是，我应该停止编写这种风格的代码并保持清晰吗？还是我应该保留它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T02:23:06.260

使用长而清晰的方式将其放入一个函数中，然后在需要调用该函数时在一行中快速调用该函数。毕竟，这就是过程编程中函数的用途之一！:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T02:31:54.803

如果堆栈最初为空或变为空，您的元代码将崩溃。同样作为风格问题，检查顶部元素，然后弹出或继续

```
while(!stackEmpry(stack) && (top(stack)->state==FUP)) { pop(stack); } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T03:04:55.813

任何非一次性程序都会被您或其他人阅读多于写入数倍。这种编码风格需要更长的时间来编写，甚至更长的时间来阅读，运行速度不会更快且容易出错。你想达到什么目的？

在过去人们在纸上打印代码的美好时光里，你可能有一个借口，但在这个时代，视网膜显示器无处不在......

# ruby-on-rails - Carrierwave - 从远程图像 url 上传，没有文件扩展名

> ID：12756151
> 
> 赞同：3
> 
> 时间：2012-10-06T02:23:21.060
> 
> 标签：ruby-on-rails, carrierwave

尝试通过 Rails 和 Carrierwave 使用 remote_image_url 上传图像时，如果 url 没有文件扩展名，则会返回错误响应。

“使用 rmagick 操作失败，可能不是图像？原始错误：此图像格式没有编码委托”

例如，“http://1.gravatar.com/blavatar/999116b97a3284a6b130eda28e875f47?s=300”失败。其中“http://1.gravatar.com/blavatar/999116b97a3284a6b130eda28e875f47.png”有效。

有没有简单的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T16:00:58.667

您的上传器中有白名单吗？在 $classname_uploader.rb 中，whis 是

```
def extension_white_list
 %w($some_file_extenstions)
end 
```

这可能会导致您描述的问题。

# html - 有没有办法阻止网站背景图片成倍增加

> ID：12756152
> 
> 赞同：0
> 
> 时间：2012-10-06T02:23:29.467
> 
> 标签：html, css

在我的网站上，我有一个背景图像，当我按下 CTRL 时，图像最终会重复几次。我遇到过其他有关此问题的信息的站点，他们的解决方案只会拉伸图像。

我的网站上有一个评论部分，所以我的网站的长度可能很大，所以这种方法不实用。我只是希望图像在放大和缩小时保持不变，因为任何其他解决方案都会极大地影响我网站的外观。

如果需要将网站视为我试图解释的内容的可视化表示，可以提供链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T02:32:48.140

将图像的样式设置为`background-repeat: no-repeat;`

有关更多信息，请参阅[此链接](http://www.w3schools.com/cssref/pr_background-repeat.asp)。

# list - 如何使用 Scheme 将列表的第一个元素移动到列表的末尾？

> ID：12756155
> 
> 赞同：0
> 
> 时间：2012-10-06T02:23:49.597
> 
> 标签：list, recursion, scheme, append

我一直在研究这个，我可以在列表的末尾添加“一些东西”，但我遇到的问题是将列表的第一个元素添加到同一个列表的末尾。

例如：

{1, 2, 3, 4} 变为 {1, 2, 3, 4, 1}。

这是我遇到问题的代码：

```
(define (copy-first-to-end lst)
  (cond [(empty? lst)   
         (cons (first lst) empty)]       
        [else  (cons (first lst)    
               (copy-first-to-end (rest lst)))])) 
```

这段代码的问题是，对于空的？条件，答案调用 (first lst) 但因为它是递归的，所以这个列表的第一个元素是空的。由于方案是动态类型的，我不能将第一个元素存储在任何地方（至少我认为我不能）。

我怎样才能让它工作，只使用基本的列表功能？（例如，缺点，缺点？，空？第一个，最后一个，休息）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T06:58:17.523

你可以使用闭包来存储你想要的任何东西。

这是我写的解决方案，删除了一些细节，给你一些思考的空间。:-)

```
(define (copy-first-to-end lst)
  (define top ???)
  (define (inner lst)
    (if (null? lst) ???
        (cons ??? (inner ???))))
  (inner ???)) 
```

在这种情况下，`inner`是一个闭包，除其他外，它可以访问`top`变量（您将使用它来存储您感兴趣的值）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T09:52:20.910

因此，您实际上是在尝试编写自己的**append**函数实现，在特殊情况下，您将附加一个包含列表中第一个 s 表达式的列表。您的问题是您不能将平面列表转换为平面列表并因此获得单个平面列表。使用 cons 执行此操作的唯一方法是将第一个列表分解为其组成的 s 表达式，然后将它们*以相反的顺序 cons 到第二个列表中*。递归应该使这成为一项简单的任务。

```
(define (append-first-to-end lst)
  (define (append-to-end a lst)
    (if (null? (cdr lst)) ???
      (cons ??? (append-to-end a ???))))
  (append-to-end (car lst) lst)) 
```

在我的示例、克里斯的示例和我的开头段落之间，您应该能够填写空白。

我确实希望一旦你从 lst 获得最终的 s 表达式所需的操作是显而易见的......

# python - 使用 Python，从字符串中删除除 az、AZ、0-9、_ 和 - 之外的所有字符的最有效方法是什么？

> ID：12756156
> 
> 赞同：-5
> 
> 时间：2012-10-06T02:23:58.547
> 
> 标签：python, regex, string, formatting

注意：最大字符串 ling 将为 15 个字符。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T02:28:13.320

为了比较原始速度，这里是[@wim 答案](https://stackoverflow.com/a/12756204/464744)的比较，它的一些优化和一个正则表达式解决方案：

```
import re, string, timeit

clean = re.compile(r'[^a-zA-Z0-9_-]')
keep = string.ascii_letters + string.digits + '_-'
keep_set = set(string.ascii_letters + string.digits + '_-')
test = '$pam and_Eggs##-!'
cur_encoding_bytes = 256 # 8 for UTF-8, in Python 3 this would be different for Unicode
all_else = ''.join(chr(i) for i in range(cur_encoding_bytes) if chr(i) not in keep_set) # taken from https://stackoverflow.com/a/3588485/1219006

def clean1(s):
    return ''.join(x for x in s if x in keep)

def clean1_filter(s):
    return filter(keep.__contains__, s)

def clean1_filter_set(s):
    return filter(keep_set.__contains__, s)

def clean2(s):
    return clean.sub('', s)

def clean3(s):
    return s.translate(None, all_else)

print timeit.timeit('clean1(test)', 'from __main__ import clean1, test')
print timeit.timeit('clean1_filter(test)', 'from __main__ import clean1_filter, test')
print timeit.timeit('clean1_filter_set(test)', 'from __main__ import clean1_filter_set, test')
print timeit.timeit('clean2(test)', 'from __main__ import clean2, test')
print timeit.timeit('clean3(test)', 'from __main__ import clean3, test') 
```

这个脚本的输出是：

```
2.96962522809
1.56208783165
1.10597814849
1.59298783663
0.53834820236 
```

`str.translate`是最快的，是一种专门的字符串方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T02:33:41.843

```
>>> def clean(s):
...   from string import ascii_letters, digits
...   keep = ascii_letters + digits + '_-'
...   return ''.join(x for x in s if x in keep)
... 
>>> clean('$pam and_Eggs##-!')
'pamand_Eggs-' 
```

# javascript - 正则表达式和 ISO8601 格式的 DateTime

> ID：12756159
> 
> 赞同：54
> 
> 时间：2012-10-06T02:25:00.357
> 
> 标签：javascript, regex, datetime, iso8601

我有一个日期时间字符串 ISO8601 格式

```
2012-10-06T04:13:00+00:00 
```

以及与此字符串不匹配的以下正则表达式

```
#(\d{4})-(\d{2})-(\d{2})T(\d{2})\:(\d{2})\:(\d{2})\+(\d{2})\:(\d{2})# 
```

我无法弄清楚为什么它不匹配。

我转义了元字符，对我来说似乎没问题。

[http://jsfiddle.net/5n5vk/2/](http://jsfiddle.net/5n5vk/2/)

**编辑 ：**

正确的方法：http: [//jsfiddle.net/5n5vk/3/](http://jsfiddle.net/5n5vk/3/)

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2013-01-14T16:12:37.840

### 不完整的正则表达式

它不完整，因为它**匹配无效日期**，例如`2013-99-99T04:13:00+00:00`.

### 更好的解决方案

下面的正则表达式不会匹配这种无效日期（参见[ISO 8601 Date Validation That Don't Suck](http://www.pelagodesign.com/blog/2009/05/20/iso-8601-date-validation-that-doesnt-suck/)）。您可以使用以下代码进行测试：

```
re = /^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24\:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/
var testDates = {
    'date' : "2012-10-06T04:13:00+00:00",
    'validDate' : "0785-10-10T04:13:00+00:00",
    'invalidDate' : "2013-99-99T04:13:00+00:00",
    '1234Date': '1234'
}
for (var d in testDates) {
    if (re.test(testDates[d])) { console.info('[valid]: '+testDates[d]); }
    else { console.error('[invalid]: '+testDates[d]); }
} 
```

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2016-06-01T08:54:11.347

我发现 RegExp 也试图验证日期对我来说有点矫枉过正。我只是想知道一个字符串是否包含 ISO 8601 日期字符串。[将日期转换为Date](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date)对象后，我将检查日期是否实际有效。

这是 RegExp 的 2 个版本。这首先检查字符串是否是有效的 ISO 8601 日期字符串。完整日期字符串的其他测试，包括小时/分钟/秒（API 中常用）

```
/**
 * RegExp to test a string for a ISO 8601 Date spec
 *  YYYY
 *  YYYY-MM
 *  YYYY-MM-DD
 *  YYYY-MM-DDThh:mmTZD
 *  YYYY-MM-DDThh:mm:ssTZD
 *  YYYY-MM-DDThh:mm:ss.sTZD
 * @see: https://www.w3.org/TR/NOTE-datetime
 * @type {RegExp}
 */
var ISO_8601 = /^\d{4}(-\d\d(-\d\d(T\d\d:\d\d(:\d\d)?(\.\d+)?(([+-]\d\d:\d\d)|Z)?)?)?)?$/i

/**
 * RegExp to test a string for a full ISO 8601 Date
 * Does not do any sort of date validation, only checks if the string is according to the ISO 8601 spec.
 *  YYYY-MM-DDThh:mm:ss
 *  YYYY-MM-DDThh:mm:ssTZD
 *  YYYY-MM-DDThh:mm:ss.sTZD
 * @see: https://www.w3.org/TR/NOTE-datetime
 * @type {RegExp}
 */
var ISO_8601_FULL = /^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(\.\d+)?(([+-]\d\d:\d\d)|Z)?$/i

// Usage:

ISO_8601_FULL.test( "2016-05-24T15:54:14.876Z" )  // true
ISO_8601_FULL.test( "2002-12-31T23:00:00+01:00" ) // true
ISO_8601_FULL.test( "2016-02-01" )                // false
ISO_8601_FULL.test( "2016" )                      // false

ISO_8601.test( "2016-02-01" )                     // true
ISO_8601.test( "2016" )                           // true
ISO_8601.test( "2002-12-31T23:00:00+01:00" )      // true 
```

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2012-10-06T02:52:33.173

在 js 中指定正则表达式时不要引用正则表达式。正斜杠就足够了。

```
alert($('#datepicker').val());

if($('#datepicker').val().match(
    /(\d{4})-(\d{2})-(\d{2})T(\d{2})\:(\d{2})\:(\d{2})[+-](\d{2})\:(\d{2})/
)) {
    alert('ok');
} else {
    alert('not ok');
}​ 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2017-06-16T16:22:09.453

# JavaScript date.toISOString() 正则表达式

这只是试图解决`2017-06-17T00:00:00.000Z`您期望 Javascript 实现的基本模式。

```
const isoPattern = /^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z$/; 
```

JSON 最烦人的事情之一是不能简单地传递一个日期并期望它正确转换。由于大多数人使用 JavaScript，这可能是实用的。

如果您必须传递给 mongo 并需要转换，这是一个演示片段。

```
if (isoPattern.test(json.startDate))
  json.startDate = new Date(json.startDate); 
```

我认为这是一种更好的方法，因为您可以确保日期会解析，然后您可以检查所需的范围，所有这些都非常简单且易于维护，因为正则表达式很棒，但在一定程度上。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-03-25T10:47:57.850

如果这是测试的目的，那么仅测试是否可以创建字符串的 Date 对象怎么样？

```
new Date("2016-05-24T15:54:14.876Z").toString() === 'Invalid Date' // false
new Date("Invalid date").toString() === 'Invalid Date' // true 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-16T09:39:17.853

为了添加所有这些好的答案，我发现这个只适用于 ISO 日期（没有时间）

```
(?:19|20)[0-9]{2}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-9])|(?:(?!02)(?:0[1-9]|1[0-2])-(?:30))|(?:(?:0[13578]|1[02])-31)) 
```

(v=通过 x=不通过)

```
2016-12-30 v
2016-13-31 x
2016-01-32 x
2016-02-29 v
2016-02-30 x
2017-02-29 v -> that's a false positive
1889-01-01 x -> you can add accepted centuries in the list: (?:18|19|20)
2099-01-01 v 
```

# java - jcreator - 制作配对游戏

> ID：12756160
> 
> 赞同：2
> 
> 时间：2012-10-06T02:25:11.317
> 
> 标签：java, jcreator

我正在使用按钮和 if-else 语句在 JCreator 中进行匹配/记忆游戏

![http://i.imgur.com/TRsaO.jpg](../Images/f1d9e8cb38b5f0a878de48fe4ced808d.png)

单击按钮时，会弹出单击的图像，然后如果单击下一个，但不是同一个图像，则两者都会关闭。如果您获得正确的匹配图像，它们都会禁用。我的问题是匹配它的逻辑。

我将做什么或使用什么来让我的程序知道两个按钮匹配？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T02:38:00.493

您需要添加一个[ActionListener](http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html)。使用该链接了解如何检测按钮是否被按下以及按下时要做什么。要显示图像，请使用带有按钮的图标。单击时，数字会变为一个值。如果您单击另一个并且数字是相同的值，则它们将被禁用。如果它们不同，则更改图标并且数字恢复为零。要禁用，请使用 button.setEnable(false);

使用[此](http://docs.oracle.com/javase/tutorial/uiswing/components/button.html)链接获取有关按钮图标/一般按钮帮助的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-28T16:14:25.930

您可以做的另一件事，虽然这需要更多时间，但是给每个按钮一个数值并使用 RandNum 来决定它们。如果将其设置为常量变量，则可以使用它来匹配它们

# sql-server - 如何按显示成员而不是按值成员对datagridview进行排序

> ID：12756161
> 
> 赞同：0
> 
> 时间：2012-10-06T02:25:19.147
> 
> 标签：sql-server, vb.net, datagridview, datatable

这是表1的内容

> 代码，描述
> 1，菠萝
> 2，香蕉
> 3，草莓
> 4，木瓜
> 5，苹果

它绑定到我的datagridview。我想按它的显示成员而不是按值成员对其进行排序，所以它会像这样排序

> 代码，描述
> 5，苹果
> 2，香蕉
> 4，木瓜
> 1，菠萝
> 3，草莓

注意：描述仅显示给我的数据网格视图，而不是代码字段。

编辑：

这是我的代码：

```
dim dgvColCmb as New System.Windows.Forms.DataGridViewComboBoxColumn
with dgvColCmb
   tmpDSet.Tables(0).DefaultView.Sort = tmpDSet.Tables(0).Columns(1).ColumnName & " DESC "
   Dim tmpDTable As DataTable = tmpDSet.Tables(0).DefaultView.ToTable
   .DataSource = tmpDTable
   .ValueMember = tmpDTable.Columns(0).ColumnName
   .DisplayMember = tmpDTable.Columns(1).ColumnName
   .ReadOnly = True
end with
dtg.columns.add(dgvColCmb)
dtg.DataSource = sDSet.Tables(0) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T02:31:09.703

您可以对绑定到datagridview的DataTable进行排序：

```
table.DefaultView.Sort = "Description desc";
DataTable sortedData = table.DefaultView.ToTable(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T04:16:53.513

尝试将 包装在`DataTable`中[`DataView`](http://msdn.microsoft.com/en-us/library/system.data.dataview.aspx)，然后将 DataView 的 Sort 属性设置为正确的列。您将使用 DataView 作为 DataSource，而不是 DataTable。像这样：

```
Dim l_view As New DataView(sDSet.Tables(0))
l_view.Sort = "Description" ' ...or... "Description DESC"
dtg.DataSource = l_view 
```

# lisp - 无法理解 LISP 中的一段代码

> ID：12756168
> 
> 赞同：0
> 
> 时间：2012-10-06T02:26:54.710
> 
> 标签：lisp, scheme, racket

我需要一些帮助来理解这段代码的作用。我不确定`fcombine`变量的作用是什么？有人可以给我介绍一下代码在做什么吗？

```
(define (reduce fcombine L)
  (cond
    ((null? (cdr L)) (car L))
    (#t (fcombine (car L) (reduce fcombine (cdr L)))))) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T07:53:07.583

您可以查看 CLHS[减少功能](http://lispworks.com/documentation/HyperSpec/Body/f_reduce.htm)规范。

您展示的函数是完整规范的部分实现，只有*函数*和*序列*参数。

# regex - Sublime Text：正则表达式删除不以开头的行

> ID：12756172
> 
> 赞同：33
> 
> 时间：2012-10-06T02:28:09.153
> 
> 标签：regex, sublimetext2

我正在使用 Sublime Text 在 Windows 上编辑批处理文件。我想删除所有*不*`ECHO`以or开头的行`REM`。我认为这必须通过正则表达式来实现，但我无法弄清楚。有人吗？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-10-06T02:31:00.620

据我了解，Sublime Text 使用 Python 的正则表达式引擎。

此代码匹配所有不以`ECHO`and开头的行`REM`：

```
^(?!(?:ECHO|REM)).*\s* 
```

# jqplot - 如何翻转我的 jqPlot 图表

> ID：12756176
> 
> 赞同：4
> 
> 时间：2012-10-06T02:28:15.510
> 
> 标签：jqplot

我正在用 jqPlot 绘制图表，在我的模板中，我设计了图表，使其向下增长，翻转条形，使它们从顶部开始向下，取决于数据库的一些输入。我正在考虑乘以-1，但它似乎不起作用。

有什么建议么？这是我的代码。

> $(document).ready(function(){ $.jqplot.config.enablePlugins = true; var c0 = ""; var c1 = ""; var c2 = ""; var c3 = ""; var c4 = "" ; var c5 = ""; var c6 = ""; var c7 = ""; var c8 = ""; var c9 = "";
> 
> ```
>  var a0 = "<?php echo $numArticles[0]?>";
>                 var a1 = "<?php echo $numArticles[1]?>";
>                 var a2 = "<?php echo $numArticles[2]?>";
>                 var a3 = "<?php echo $numArticles[3]?>";
>                 var a4 = "<?php echo $numArticles[4]?>";
>                 var a5 = "<?php echo $numArticles[5]?>";
>                 var a6 = "<?php echo $numArticles[6]?>";
>                 var a7 = "<?php echo $numArticles[7]?>";
>                 var a8 = "<?php echo $numArticles[8]?>";
>                 var a9 = "<?php echo $numArticles[9]?>";
> 
>                 var s1 = [a0, a1, a2, a3, a4, a5,a6,a7,a8,a9];
>                 var ticks = [c0, c1,c2,c3,c4,c5,c6,c7,c8,c9];
>                 plot1 = $.jqplot('chart1', [s1], {
>                     // Only animate if we're not using excanvas (not in IE 7 or IE 8)..
>                     animate: !$.jqplot.use_excanvas,
>                     seriesDefaults:{
>                         shadow: false,
>                         renderer:$.jqplot.BarRenderer,
>                         pointLabels: { show: true }
>                     },
>                     axes: {
>                         xaxis: {
>                             renderer: $.jqplot.CategoryAxisRenderer,
>                             ticks: ticks,
>                             showTickMarks:false
>                         },
>                         yaxis: {
>                             renderer: $.jqplot.CategoryAxisRenderer,
>                             ticks: ticks,
>                             showTicks: false        // same options as axesDefaults
>                         }
>                     },
> 
>                 grid: {
>                 drawGridLines: false,       // wether to draw lines across the grid or not.
>                 gridLineColor: '#0d1c26',   // *Color of the grid lines.
>                 background: 'transparent',  // CSS color spec for background color of grid.
>                 borderColor: '#122934',     // CSS color spec for border around grid.
>                 borderWidth: 0,             // pixel width of border around grid.
>                 shadow: false               // draw a shadow for grid.
>                                             // CanvasGridRenderer takes no additional options.
>             },
>                     seriesColors: [ "#0a3b4c"],     
>                     highlighter: { show: false }
>                 });
> 
>                 $('#chart1').bind('jqplotDataClick', 
>                     function (ev, seriesIndex, pointIndex, data) {
>                         $('#info1').html('series: '+seriesIndex+', point: '+pointIndex+', data: '+data);
>                     }
>                 );
>             });
>             </script> 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T23:23:38.850

**编辑：**
此答案仅与 相关**`PieRenderer`**，与**`BarRenderer`**所讨论的无关。

* * *

不确定翻转，但也许将“startAngle”设置为 180 可以解决问题？

```
 plot1 = jQuery.jqplot ('chart1', [data],
            {
                seriesDefaults: {
                    renderer: jQuery.jqplot.PieRenderer,
                    rendererOptions: {
                        startAngle : 180
                    }
                },
                ... other stuff ...
            } 
```

作为参考，其他渲染器选项：[http ://www.jqplot.com/docs/files/plugins/jqplot-pieRenderer-js.html](http://www.jqplot.com/docs/files/plugins/jqplot-pieRenderer-js.html)

# javascript - 有一个单页垂直分区网站，同时有一些部分（div）有水平部分（div）滑块

> ID：12756178
> 
> 赞同：-1
> 
> 时间：2012-10-06T02:28:29.813
> 
> 标签：javascript, html, css, sliders

[请以本网站为例](http://www.smokeybones.com/) 登陆页面，有四个滑块，每个滑块分别是独立的 div，但同时整个网页有独立的垂直部分。我知道如何做垂直位、标准 CSS 和 HTML。但是，如何在一个部分的水平 div 之间滑动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T04:17:08.170

使用 100% 宽度和溢出的 div：隐藏和位置：相对（我们称之为“部分”）

在那个 div 里面放另一个 div 宽度为 400% 和 position: absolute （我们称它为“包装器”）

然后将 4 张幻灯片放在该 div 内，宽度为 25% 并浮动：左

然后您可以通过更改“包装器”的左侧值来滚动幻灯片以将其移动到“部分”内

如果你设置左：0% 你在第一张幻灯片，-25% 你在第二张，-50% 你在第三张，-75% 你在第四张

你甚至可以为 $('#wrapper').animate({left: '-25%'},'normal') 设置动画

# jquery - jQuery 类冲突

> ID：12756183
> 
> 赞同：0
> 
> 时间：2012-10-06T02:29:46.600
> 
> 标签：jquery

我有一个 jquery 脚本，当您单击它时会展开它下面的行，我还有一个表排序器 jquery 对表进行排序

问题是两者都使用类`<tr>`来工作，所以存在冲突，我对 jquery 知之甚少，但展开/折叠行非常简单，所以我希望我可以对此查询进行一些小改动以避免与排序器jQuery

```
<script type="text/javascript">  
        $(function(){
    $("#table tr:odd").addClass("odd");
        $("#table tr:not(.odd)").hide();
        $("#table tr:first-child").show();
        $("#table tr.odd").click(function(){
        $(this).next("tr").toggle();

        });
        //$("#table").jExpand();
    });
</script> 
```

我可能低估了修复的容易程度，但如果它很容易，那就太好了。桌子设计只是一个标准

```
<table>
<thead>
    <tr>
        <th></th>
    </tr>
     <tr>
        <th></th>
    </tr>
 </thead>
 <tbody>
     <tr>
        <td></td>
     </tr>
     <tr>
        <td></td>
 </tr>
 </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T02:38:40.553

您可以通过以下方式避免在代码中添加类：

```
<script type="text/javascript">  
        $(function(){
           $("#table tr").not(':odd').hide();
           $("#table tr:first-child").show();
           $("#table tr").filter(':odd').click(function(){
              $(this).next("tr").toggle();

           });
        //$("#table").jExpand();
    });
</script> 
```

**更新：感谢****Ohgodwhy**
，在 jquery 选择器中 使用 of`.filter()`而不是伪选择器 。

# ios - Xcode 警告：... 是 GNU 扩展

> ID：12756188
> 
> 赞同：4
> 
> 时间：2012-10-06T02:30:32.607
> 
> 标签：ios, llvm, clang, gnu

我将 C++ 库用于 iOS 应用程序。配置 Apple LLVM 3.1 编译器（默认）后，我收到了很多有关此 C++ 代码的警告，其中大多数是这样说的：

```
... is a GNU extension 
```

clang 的用户手册介绍说： *Clang 驱动程序和语言特性被有意设计为尽可能合理地与 GNU GCC 编译器兼容，从而简化从 GCC 到 Clang 的迁移。在大多数情况下，代码“正常工作”。*

那么，只是寻找一个开关来禁用这个警告（顺便说一句。如何？）或者我应该更好地让这个库摆脱所有 GNU 扩展？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-06T03:35:42.587

您可以使用编译器标志来抑制警告。Clang 告诉您每个警告使用哪个编译器标志。构建后，选择 View > Navigator > Show Log Navigator。然后从日志导航器中选择最新的构建日志。找到带有警告的文件，然后单击其状态行右端的披露按钮。Xcode 将显示该文件的编译器命令行和输出。每个警告都应包含启用警告的编译器标志。例子：

![在此处输入图像描述](../Images/9dc594eedab448344602939a5be59474.png)

在我的示例中，警告标志是`-Wpointer-arith`. 因此可以通过禁用**警告**`-Wno-pointer-arith`。所以我可以将该标志添加到“其他警告标志”构建设置中：

![在此处输入图像描述](../Images/6c87a1a189aa82ca67788204da42c575.png)

# javascript - Javascript 下载元素的内容

> ID：12756191
> 
> 赞同：0
> 
> 时间：2012-10-06T02:31:11.263
> 
> 标签：javascript, html, download

> **可能重复：**
> [仅使用 Javascript 将 textarea 内容下载为文件（无服务器端）](https://stackoverflow.com/questions/609530/download-textarea-contents-as-a-file-using-only-javascript-no-server-side)

基本上我有一个 javascript 中的实时 html 编辑器，我想添加用户单击按钮或链接并下载其 html 文档的能力。我的想法只是下载包含 textarea 元素内容的文件，但我似乎不知道如何。如果需要任何服务器端的东西，我确实有 php，它不必是严格的 javascript，但我想要一个选项来执行此操作。谢谢！请发表评论，因为有时我的问题可能会令人困惑：|

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T02:41:49.927

好吧，还有另一种简单的方法可以在客户端本身执行此操作，我相信这将最适合您，因为 html 编辑是在客户端完成的，您不需要任何服务器数据。

[http://pixelgraphics.us/downloadify/test.html](http://pixelgraphics.us/downloadify/test.html)

上面的组件让我们从客户端下载内容，所见即所得编辑器是一个具有 Contenteditable true 属性的 DIV 允许编辑，因此您可以获取 html 内容并将其传递给该组件以供客户端下载

# python - Python/C++、PyQt4/Qt4：如何在 QTextTable 的单元格中插入多行文本

> ID：12756197
> 
> 赞同：2
> 
> 时间：2012-10-06T02:32:30.230
> 
> 标签：python, qt4, pyqt4, qtextdocument, qtextcursor

我正在尝试使用 PyQt4 创建一个 odt 文档。该文档涉及在单元格中插入多行文本。我的示例代码：

```
from PyQt4 import QtGui

doc = QtGui.QTextDocument()
cur = QtGui.QTextCursor(doc)
table = cur.insertTable(1, 2)
# The cursor is moved to the first cell of the table
cur.insertText("""line 1
line 2""")

writer = QtGui.QTextDocumentWriter()
writer.setFormat(writer.supportedDocumentFormats()[1]) # ODF Format
writer.setFileName('example.odt')
writer.write(doc) 
```

我希望“第 1 行”和“第 2 行”位于同一个单元格中，但由于换行，它们位于不同的单元格中。这也与上面的代码具有相同的效果：

```
cur.insertText('line 1\n')
cur.insertText('line 2\n') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-01-08T20:23:45.357

也许为时已晚。

如果您使用 chr(10) 插入换行符。有两种方法可以做到这一点。

```
cur.insertText(‘line1’)
cur.insertText(chr(10))
cur.insertText(‘line2’+chr(10))
cur.insertText(‘line3’) 
```

# html - 从 html 表值创建进度条

> ID：12756201
> 
> 赞同：1
> 
> 时间：2012-10-06T02:33:16.327
> 
> 标签：html, css, html-table, progress

我需要这方面的帮助。我正在尝试根据另一个 TD 元素的值创建一个简单的进度条。下面是我的代码。我希望 width 属性值`<hr>`等于在第一个`<TD>`元素上设置的值。

```
<table>
  <tr>
    <TD id="item">70%</td>
    <td width=200 style="border: 2px solid silver;padding:none">
      <hr style="color:#c00;background-color:#c00;height:15px; border:none;
                 margin:0;" align="left" width=50%;        />
    </td>
  </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T02:40:06.620

你可以做这样的事情

```
widthValue = document.getElementById("item").innerText;
document.getElementsByTagName("hr")[0].style.width = widthValue; 
```

它将获取 的文本内容`<td>`，并将其设置为`<hr>`元素的宽度。您最好提供`<hr>`一个 id，因此您可以通过 id 设置它，而不是依赖于通过标签名称找到它。

# performance - git rev-list 有什么替代品，因为这有时很慢？

> ID：12756202
> 
> 赞同：1
> 
> 时间：2012-10-06T02:33:20.217
> 
> 标签：performance, git, version-control

我有一个生产工具，它每分钟在一个大型 repo 上调用 git rev-list 10-30 次。我看到 git 响应时间变化很大，从大约 1 秒到多达 50 秒（在超时机制放弃 git 请求之前）。

```
git rev-list --pretty=raw 2ef9fa0d0fa4c34d57103a0545b3cc96c2552e6f..f5daa48ebcd3cc95a0df683f8c3a3ad64def4a6e 
```

目标是查看这两个提交是否是祖先/后代，如果是，则两者中的哪一个是祖先。我打了一次这个电话，如果我得到输出我有我的答案，如果没有输出，我交换提交位置并再次运行。如果这次没有输出，那么他们就不是彼此的祖先/后代。

是否有另一种更有效的方法来查找此信息？如果涉及到它，即使是在 git 之外的某些结构中对提交树进行建模的建议也会受到赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T03:18:11.860

看`git merge-base first-sha1 second-sha1`。如果结果是第三个 sha1，则它们不是后代。否则，结果是老祖先。

但是，如果您可以在更高级别上描述一些工作流程，那么可能有一种更简单的方法，您可能不必依赖它。我写了这篇关于每个功能分支的文章：http: [//dymitruk.com/blog/2012/02/05/branch-per-feature/](http://dymitruk.com/blog/2012/02/05/branch-per-feature/)它可能会给你一些想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-25T19:04:43.890

[git merge-base](https://git-scm.com/docs/git-merge-base)（甚至[`git rev-list`](https://git-scm.com/docs/git-rev-list)）会更快：

*   [提交图](https://stackoverflow.com/a/49826884/6309)（[这里提到](https://stackoverflow.com/a/52246272/6309)）
*   Git 2.20（2018 年第四季度）

那是因为两者都基于“提交可达”的概念。

当涉及指向未提交对象的引用（例如标签）时，最近的更新破坏了可达性算法，该问题已得到修复。

请参阅Derrick Stolee ( ) 的[提交 4067a64](https://github.com/git/git/commit/4067a64672f9db8ca38d5a2682a7cdba7938c18b)、[提交 b67f6b2](https://github.com/git/git/commit/b67f6b26e354813d8cd792dcb3eb1a1b60b98a08)（2018 年 9 月 21 日）、[提交 6621c83](https://github.com/git/git/commit/6621c838743812aaba96e55cfec8524ea1144c2d)（2018 年 8 月 28 日）和[提交 6cc01743](https://github.com/git/git/commit/6cc017431c1c48f80d1c6512fdcc9866cf4b7f55) [（`derrickstolee`](https://github.com/derrickstolee) 2018 年 7 月 20 日[）](https://github.com/derrickstolee)。
^(（由[Junio C Hamano 合并 -- `gitster`--](https://github.com/gitster)在[提交 0f7ac90](https://github.com/git/git/commit/0f7ac90dbe7ecf511883b7aae84acbb698418f60)中，2018 年 9 月 24 日）)

> ## `commit-reach`： 采用`can_all_from_reach`

> `is_descendant_of`以前用于**`in_merge_bases()`**检查提交是否可以到达提供列表中的任何提交的方法。这有两个性能问题：
> 
> 1.  在最坏的情况下，性能是二次的。
>     
>     
> 2.  单个`in_merge_bases()`调用需要超越目标提交才能找到可能是合并基础的完整边界提交集。
>     
>     
> 
> 该`can_all_from_reach`方法避免了这种二次行为，并且可以使用代数将搜索限制在目标提交之外。它需要对原型进行小的调整才能停止`commit-date`用作截止值，因为这种优化在这里不再合适。
> 
> 由于`in_merge_bases()`使用`paint_down_to_common()`，`is_descendant_of()`自然会找到截止点以避免遍历整个提交图。由于我们希望始终返回正确的结果，因此我们不能`min_commit_date`使用`can_all_from_reach`. 然后，我们依靠代数来提供截止值。
> 
> 由于不是所有的 repos 都会有一个提交图文件，我们也不会总是为一个提交图文件计算代数，所以创建一个新方法 ，`generation_numbers_enabled()`它检查提交图文件并查看文件中的第一个提交具有非零代数。如果我们没有代号，请使用旧的逻辑`is_descendant_of()`。
> 
> `test-tool reach is_descendant_of`使用以下输入的“”命令在 Linux 存储库的副本上测量性能：
> 
> ```
> A:v4.9 
> ```
> 
> X:v4.10 X:v4.11 X:v4.12 X:v4.13 X:v4.14 X:v4.15 X:v4.16 X:v4.17 X.v3.0
> 
> 请注意，此输入是为演示先前方法的二次性质而量身定制的，因为它将在检查 v4.1 之前计算 v4.9 与所有更高版本的合并基础。
> 
> ```
> Before: 0.26 s
> After: 0.21 s 
> ```
> 
> 由于我们之前在该方法中使用了 is_descendant_of 方法`ref_newer`，因此我们还使用`test-tool reach ref_newer`带有此输入的 ' ' 测量了那里的性能：
> 
> ```
> A:v4.9
> B:v3.19
> 
> Before: 0.10 s
> After: 0.08 s 
> ```
> 
> 通过使用父 v3.19 添加新提交，我们测试了 ref_newer 的不可访问情况：
> 
> ```
> Before: 0.09 s
> After: 0.08 s 
> ```

* * *

在 Git 2.20（2018 年第四季度）之前，（实验性）提交图文件的生成迄今为止相当安静，尽管在一个有意义的大型存储库中需要相当长的时间。
**用户现在将看到进度输出。**

请参阅Ævar Arnfjörð Bjarmason ( ) 的[提交 6b89a34](https://github.com/git/git/commit/6b89a34c89fc763292f06012318b852b74825619)（2018 年 9 月 19 日）和[提交 1f7f557](https://github.com/git/git/commit/1f7f557fd3eca251b1b14fa8240e1a12597c8730)、[提交 7b0f229](https://github.com/git/git/commit/7b0f2292224cec841de78acc911e4c378ea79faa) [（`avar`](https://github.com/avar) 2018 年 9 月 17 日[）](https://github.com/avar)。
帮助者：Martin Ågren martin.agren@gmail.com。
^(（由[Junio C Hamano 合并`gitster`——](https://github.com/gitster)在[提交 36d767d](https://github.com/git/git/commit/36d767d02e12c1ff991511b7bd8c1d023340f2ca)中，2018 年 10 月 16 日）)

* * *

使用 Git 2.21（2019 年第一季度），进展将更加准确：

请参阅[Ævar Arnfjörð Bjarmason ( ) 的](https://github.com/avar)[提交 01ca387](https://github.com/git/git/commit/01ca387774b6e0f9949f3c1cf6a1ffa3a2409865)（2018 年 11 月 19 日[）](https://github.com/avar)。 帮助者：[Derrick Stolee (](https://github.com/derrickstolee) [)](https://github.com/derrickstolee)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([d4c9027 提交中](https://github.com/git/git/commit/d4c90270215ba5600ca9cab69185da2027bbf892))^(，2019 年 1 月 14 日）)[`avar`](https://github.com/avar)
[`derrickstolee`](https://github.com/derrickstolee)
^([`gitster`](https://github.com/gitster))

> ## `commit-graph`: 拆分`close_reachable()`进度输出

> 修改[7b0f229](https://github.com/git/git/commit/7b0f2292224cec841de78acc911e4c378ea79faa) (" `commit-graph write`: add progress output", 2018-09-17) 中添加的进度输出，使其报告的总数不再高于提交总数。有关指出这一点的错误报告，
> 请参阅[此线程。](https://public-inbox.org/git/20181010203738.GE23446@szeder.dev/)
> 
> 当我添加这个时，我并不打算提供准确的计数，[而只是有一些进度输出来向用户显示命令没有挂起](https://public-inbox.org/git/87pnwhea8y.fsf@evledraar.gmail.com/)。但由于我们显示的是数字，所以让它们准确无误。[进度描述由 Derrick Stolee 提出](https://public-inbox.org/git/f7a0cbee-863c-61d3-4959-5cec8b43c705@gmail.com/)。
> 
> [如原始线程中所述](https://public-inbox.org/git/87pnwhea8y.fsf@evledraar.gmail.com/)，即使在相当大的存储库（例如 `linux.git`.
> 在我拥有超过 700 万次提交的测试存储库中，所有这些都显示出来。其中两个不会出现很长时间，但正如 [在未来证明中](https://public-inbox.org/git/87murle8da.fsf@evledraar.gmail.com/)所指出的那样

* * *

并且（仍然是 Git 2.21，2019 年第一季度），在写出提交图文件时显示进度表的代码路径得到了改进。

请参阅[Ævar](https://github.com/git/git/commit/49bbc57a5728880bcf2c4a02289508f7d923e32a) [Arnfjörð Bjarmason (](https://github.com/avar) ) 的提交 49bbc57 、提交[890226c](https://github.com/git/git/commit/890226ccb57d6f9657c29aadfe1c106b939afbc8)、[提交 e59c615](https://github.com/git/git/commit/e59c615e3c91c481587f9a13d05886082f518cec)、[提交 7c7b8a7](https://github.com/git/git/commit/7c7b8a7fc7c87011d5b3e384122ce8b23ef280e8)、[提交 d9b1b30](https://github.com/git/git/commit/d9b1b309cfc0ebbe5ac689e1131f8c85b025c8c7)、[提交 2894473](https://github.com/git/git/commit/289447397c311d7f8b3c7ed2e54e11b6e57a1d89)、[提交 53035c4](https://github.com/git/git/commit/53035c4f0b06c7e556ab35acb2ce3aff1ba3ff5d)（2019 年 1 月 19 日[）](https://github.com/avar)。 请参阅[SZEDER Gábor ( ) 的 commit](https://github.com/szeder) [857ba92](https://github.com/git/git/commit/857ba928a4125251f2b4a728ff8021d2adcdbd91) （ 2019 年 1 月 23 日）和[commit 5af7417](https://github.com/git/git/commit/5af7417bd869d935715a56b2ccdee04d3a79a328)（2019 年 1 月 19 日[）](https://github.com/szeder)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 e5eac57](https://github.com/git/git/commit/e5eac5735609722a07401a279a1508ace22fc9bc))^(中，2019 年 2 月 5 日）)[`avar`](https://github.com/avar)
[`szeder`](https://github.com/szeder)
^([`gitster`](https://github.com/gitster))

> ## `commit-graph`写：添加中间进度

> `Annotating[...]`将进度输出添加到“ ”和“ ”之间的代码部分`Computing[...]generation numbers`。
> 在足够大的存储库上，这可能需要 5-10 秒。
> 
> 在我拥有的测试存储库中，大约 700 万次提交和大约 5000 万个对象，我们现在将发出：
> 
> ```
> $ ~/g/git/git --exec-path=$HOME/g/git commit-graph write
> Finding commits for commit graph among packed objects: 100% (124763727/124763727), done.
> Loading known commits in commit graph: 100% (18989461/18989461), done.
> Expanding reachable commits in commit graph: 100% (18989507/18989461), done.
> Clearing commit marks in commit graph: 100% (18989507/18989507), done.
> Counting distinct commits in commit graph: 100% (18989507/18989507), done.
> Finding extra edges in commit graph: 100% (18989507/18989507), done.
> Computing commit graph generation numbers: 100% (7250302/7250302), done.
> Writing out commit graph in 4 passes: 100% (29001208/29001208), done. 
> ```
> 
> 而在中型存储库（`linux.git`例如

> ```
> $ ~/g/git/git --exec-path=$HOME/g/git commit-graph write
> Finding commits for commit graph among packed objects: 100% (6529159/6529159), done.
> Expanding reachable commits in commit graph: 815990, done.
> Computing commit graph generation numbers: 100% (815983/815983), done.
> Writing out commit graph in 4 passes: 100% (3263932/3263932), done. 
> ```

* * *

Git 2.24（2019 年第四季度）添加了一些修复程序以使其更快。

请参阅[Jeff King ( ) 的](https://github.com/peff)[提交 dd2e50a](https://github.com/git/git/commit/dd2e50a84ea431a6cec69f37251f29bf3cfcbb68)（2019 年 9 月 7 日[）](https://github.com/peff)。 请参阅[SZEDER Gábor ( ) 的](https://github.com/szeder)[提交 67fa6aa](https://github.com/git/git/commit/67fa6aac5af508b307c0d6968a28d50d14e7c026)（2019 年 9 月 7 日[）](https://github.com/szeder)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 cda8faa](https://github.com/git/git/commit/cda8faa37e997f5db3458c1454ffe70f5c460d2a))^(中，2019 年 10 月 7 日）)[`peff`](https://github.com/peff)
[`szeder`](https://github.com/szeder)
^([`gitster`](https://github.com/gitster))

> ## `commit-graph`： 关掉`save_commit_buffer`

> 提交图工具可能会读取大量提交，但它只关心解析它们的元数据（父母、树等），而不会向用户显示消息。
> 所以它不应该需要`save_commit_buffer`，这是为了保存已解析提交的对象数据，以便我们稍后显示它们。事实上，这样做是非常有害的。
> 根据地块，在此补丁之前/之后（删除其间的提交图文件）中“ `git commit-graph write --reachable`”的最大堆`linux.git`从`~1.1GB`到`~270MB`.
> 
> 这并不奇怪，因为差异是关于存储库中所有提交的未压缩大小的总和，这相当于泄漏它们。
> 
> 如果您承受内存压力，这显然会有所帮助，但即使没有它，事情也会变得更快。
> **我对该命令（没有地块）的之前/之后时间从`12.521s`到`11.874s`，加速了`~5%`**.

和：

> ## `commit-graph`：在扩展可达提交时不显示进度百分比
> 
> 提交[49bbc57](https://github.com/git/git/commit/49bbc57a5728880bcf2c4a02289508f7d923e32a)（提交图写入：为所有进度发出百分比，2019-01-19，Git v2.21.0-rc0）在“扩展提交图中的可访问提交”阶段添加进度百分比时有点过于急切了，因为在大多数情况下，该阶段必须迭代的提交数量是事先不知道的并且会显着增长，因此，我们最终会得到无意义的数字：
> 
> ```
> $ git commit-graph write --reachable
> Expanding reachable commits in commit graph: 138606% (824706/595), done.
> [...]
> 
> $ git rev-parse v5.0 | git commit-graph write --stdin-commits
> Expanding reachable commits in commit graph: 81264400% (812644/1), done.
> [...] 
> ```
> 
> 更糟糕的是，由于百分比增长得如此之快，进度代码输出的频率比它应该的要高得多（因为它每秒或每 1% 滴答一次），从而减慢了整个过程。
> 我在“ `git commit-graph write --reachable`”上的时间`linux.git`从这个补丁开始，`13.463s`节省了。`12.521s``~7%`
> 
> 因此，不要在“Expanding reachable commits in commit graph”阶段显示进度百分比。

* * *

Git 2.24（2019 年第四季度）增加了另一项优化。

请参阅[Garima Singh ( ) 的](https://github.com/singhgarima)[提交 7371612](https://github.com/git/git/commit/7371612255492f062ee905e6d88c6234c6d4752a)（2019 年 8 月 26 日[）](https://github.com/singhgarima)。^(（由)^([Junio C Hamano 合并](https://github.com/gitster))^([——](https://github.com/gitster))^在^([提交 caf150c](https://github.com/git/git/commit/caf150ce7d60e4070292226ec208478b801b8d4b))^(中，2019 年 10 月 7 日）)[`singhgarima`](https://github.com/singhgarima)
^([`gitster`](https://github.com/gitster))

> `commit-graph`: 添加`--[no-]progress`写入和验证

> 添加`--[no-]progress`到`git commit-graph write`和`verify`。
> 进度功能是在[7b0f229](https://github.com/git/git/commit/7b0f2292224cec841de78acc911e4c378ea79faa) （“ `commit-graph write`：添加进度输出”，2018-09-17，Git v2.20.0-rc0）中引入的，但忽略了选择退出的能力。

* * *

在 Git 2.28（2020 年第三季度）中，“ `git merge-base --is-ancestor`”被教导利用提交图。

请参阅[Derrick Stolee ( ) 的](https://github.com/derrickstolee)[commit 80b8ada](https://github.com/git/git/commit/80b8ada54756e972b01d20b98a388fbbc3a2fe58)和[commit d91d6fb](https://github.com/git/git/commit/d91d6fbf26663ab64c453411c2de6cf4ea754246)（2020 年 6 月 17 日[）](https://github.com/derrickstolee)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([dc4b3cf 提交中](https://github.com/git/git/commit/dc4b3cfb92c82d5516955d8db642ec4e6bc4671b))^(，2020 年 6 月 25 日）)[`derrickstolee`](https://github.com/derrickstolee)
^([`gitster`](https://github.com/gitster))

> ## [`commit-reach`](https://github.com/git/git/commit/80b8ada54756e972b01d20b98a388fbbc3a2fe58): 使用快速逻辑`repo_in_merge_base`
> 
> ^(报告人：Ævar Arnfjörð Bjarmason)
> ^(报告人：SZEDER Gábor)
> ^(签字人：Derrick Stolee)

> 该`repo_is_descendant_of()`方法知道提交图文件的存在。它`generation_numbers_enabled()`在决定使用之前`can_all_from_reach()`或`repo_in_merge_bases()`根据情况进行检查。这里的原因是`can_all_from_reach()`使用深度优先搜索，该搜索受目标提交的最小代数限制，并且当代数不存在时，该算法可能会非常慢。替代用途`paint_down_to_common()`将遍历整个合并基础边界，这通常较慢。
> 
> 当存在提交图文件时，此方法由“ `git tag --contains`”和“ ”等命令使用，以获得非常快的结果。 不幸的是，它*没有*用在像“ ”这样的命令中，它正在执行一个更简单的请求。`git branch --contains`
> *`git merge-base --is-ancestor`*
> 
>  *这个问题[最近提出](https://lore.kernel.org/git/20200607195347.GA8232@szeder.dev/)了关于如何存储代号的更改，但也早在存在之前就已[报告过](https://lore.kernel.org/git/87608bawoa.fsf@evledraar.gmail.com/)[`commit-reach.c`](https://github.com/git/git/blob/80b8ada54756e972b01d20b98a388fbbc3a2fe58/commit-reach.c)，以简化这些可达性查询。
> 
> 根本原因是[`builtin/merge-base.c`](https://github.com/git/git/blob/80b8ada54756e972b01d20b98a388fbbc3a2fe58/builtin/merge-base.c)有一个方法`handle_is_ancestor()`调用`in_merge_bases()`，旧版本的`repo_in_merge_bases()`. 如果我们让每个调用者尽可能使用其中的逻辑，
> 那就更好了。`in_merge_bases()``can_all_from_reach()`
> 
> 这就是事情变得有点棘手的地方：在启用非代号的情况下`repo_is_descendant_of()`调用！`repo_in_merge_bases()`如果我们简单地更新`repo_in_merge_bases()`为 call`repo_is_descendant_of()`而不是`repo_in_merge_bases_many()`，那么我们将得到一个递归调用循环。值得庆幸的是，测试套件在默认模式下（即`GIT_TEST_COMMIT_GRAPH=0`）捕获了这一点。
> 
> 那么，诀窍是直接将非代号的大小写为`repo_is_descendant_of()`call `repo_in_merge_bases_many()`，跳过`non-_many`版本。这使我们能够在可能的情况下利用这种更快的代码路径。
> 
> 衡量性能影响的最简单方法是在 Linux 内核存储库上测试以下命令：
> 
> ```
> git merge-base --is-ancestor <A> <B>
> 
> | A    | B    | Time Before | Time After |
> |------|------|-------------|------------|
> | v3.0 | v5.7 | 0.459s      | 0.028s     |
> | v4.0 | v5.7 | 0.267s      | 0.021s     |
> | v5.0 | v5.7 | 0.074s      | 0.013s     | 
> ```
> 
> 请注意，这些示例中的每一个都返回成功。旧代码在交换`<A>`和时执行相同的操作。 但是，如果代号显示的代号大于，将立即返回。 因此，在每种情况下，交换案例的时间普遍为 0.004 秒。`<B>`
> `can_all_from_reach()``<A>``<B>`*

 ** * *

使用 Git 2.28（2020 年第三季度），`is_descendant_of()`不再使用：

请参阅[Carlo Marcelo Arenas Belón ( ) 的](https://github.com/carenas)[提交 c1ea625](https://github.com/git/git/commit/c1ea625f72110fda87fd225d7dff002befb82d9f)（2020 年 6 月 23 日[）](https://github.com/carenas)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 0258ed1](https://github.com/git/git/commit/0258ed1e08e7973f1d6829db8d33109851067a91))^(中，2020 年 7 月 6 日）)[`carenas`](https://github.com/carenas)
^([`gitster`](https://github.com/gitster))

> ## [`commit-reach`](https://github.com/git/git/commit/c1ea625f72110fda87fd225d7dff002befb82d9f): 避免`is_descendant_of()`垫片
> 
> ^(帮助者：Derrick Stolee)
> ^(签名者：Carlo Marcelo Arenas Belón)
> ^(审核者：Derrick Stolee)

> [d91d6fbf26](https://github.com/git/git/commit/d91d6fbf26663ab64c453411c2de6cf4ea754246) (" `commit-reach`: create `repo_is_descendant_of()`", 2020-06-17, Git v2.28.0-rc0 --[批次 #5](https://github.com/git/git/commit/f402ea68166bd77f09b176c96005ac7f8886e14b)中列出的[合并](https://github.com/git/git/commit/dc4b3cfb92c82d5516955d8db642ec4e6bc4671b)) 添加了一个存储库感知版本和一个几乎不使用的向后兼容性填充程序。`is_descendant_of()`
> 
> 更新所有调用者以直接使用新`repo_is_descendant_of()`函数；使代码库更简单，并将更多`the_repository`引用推向更高的堆栈。

* * *

此外，在 Git 2.31（2021 年第一季度）之前，实现“ [`git merge-base --independent`](https://github.com/git/git/blob/48923e83568caa631968b39fd99a75389be0a982/Documentation/git-merge-base.txt#L48)” ^(（[man](https://git-scm.com/docs/git-merge#Documentation/git-merge.txt-base#Documentation/git-merge-base.txt---independent)）)的代码做得很差，并且从该功能的一开始就保留了下来。

请参阅[Derrick Stolee ( ) 的](https://github.com/derrickstolee)[提交 41f3c99](https://github.com/git/git/commit/41f3c9949fc384f6a122e7d23bc36b7d9bb96ce2)、[提交 3677773](https://github.com/git/git/commit/36777733713afeee31e7cf2dbb6d6a3dac186a51)、[提交 c8d693e](https://github.com/git/git/commit/c8d693e1e6d3bd883224559cf4c1b07d9d58e0cf)、[提交 fbc21e3](https://github.com/git/git/commit/fbc21e3fbba982c50a3c2a273038770a249ed510)（2021 年 2 月 19 日）和[提交 0fac156](https://github.com/git/git/commit/0fac15652322e607ef3cb9f59e46ca2b168e933a)（2021 年 2 月 1 日[）](https://github.com/derrickstolee)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 48923e8](https://github.com/git/git/commit/48923e83568caa631968b39fd99a75389be0a982))^(中，2021 年 2 月 25 日）)[`derrickstolee`](https://github.com/derrickstolee)
^([`gitster`](https://github.com/gitster))

> ## [`commit-reach`](https://github.com/git/git/commit/36777733713afeee31e7cf2dbb6d6a3dac186a51): 使用启发式`remove_redundant()`
> 
> ^(签字人：Derrick Stolee)

> 可达性算法[`commit-reach.c`](https://github.com/git/git/blob/36777733713afeee31e7cf2dbb6d6a3dac186a51/commit-reach.c)经常受益于使用第一父历史作为满足可达性查询的启发式方法。
> 最明显的例子是在[4fbcca4](https://github.com/git/git/commit/4fbcca4effc1c6f8431120f88f5a4bd1c8e38ca3)中实现的（“ `commit-reach`：make `can_all_from_reach`...
> linear”，2018-07-20，Git v2.20.0-rc0 --[批次 #1](https://github.com/git/git/commit/2d3b1c576c85b7f5db1f418907af00ab88e0c303)中列出的[合并](https://github.com/git/git/commit/1b7a91da71d42759dfb83fa3a17be54ad01f0132)）。
> 
> 更新步入`remove_redundant()`以使用相同的启发式。
> 在这里，我们从输入提交的父节点开始。
> 对这些父母进行排序，然后从最高一代走向更低的一代。
> 每次，在继续扩展游走之前，使用启发式搜索第一个父历史。
> 
> 我们探索提交的顺序很重要，因此更新`compare_commits_by_gen`以打破世代编号与提交日期的联系。
> 当提交位于计算了更正提交日期的提交图文件中时，这无效，但当提交位于具有“无限”代数的提交图“上方”区域时，它将有所帮助。
> 请注意，我们不能转移到使用`compare_commits_by_gen_then_commit_date`，因为方法原型不同。
> 我们使用`compare_commits_by_gen`for`QSORT()`而不是作为优先级函数。
> 
> 重要的一点是确保当我们发现有一个非冗余提交时，我们可以将遍历短路。
> 在寻找合并基础或将多个标签与 ' [`git merge-base --independent`](https://github.com/git/git/blob/36777733713afeee31e7cf2dbb6d6a3dac186a51/Documentation/git-merge-base.txt#L48)' ^(( [man](https://git-scm.com/docs/git-merge#Documentation/git-merge.txt-base#Documentation/git-merge-base.txt---independent) ))进行比较时，这种情况经常发生。
> 使用新的计数“ `count_still_independent`”，如果达到 1，我们可以停止行走。
> 
> 为了正确更新“ `count_still_independent`”，我们在输入提交上添加了 RESULT 标志的使用。
> 然后我们可以检测何时达到这些提交之一并减少计数。
> 那时我们需要删除 RESULT 标志，因为我们可能会在弹出堆栈时重新访问该提交。
> 
> 我们使用 STALE 标志来标记已添加到新`walk_start`列表中的父母，但我们需要在开始行走之前清除该标志，这样这些标志就不会停止我们的深度优先搜索行走。
> 
> 在我的 Linux 内核存储库副本中，“ `git merge-base --independent`”的性能`<all-tags>`从 1.1 秒变为 0.11 秒。

* * *

在 Git 2.31（2021 年第一季度）中，处理多包索引和提交图文件共享的“分块文件格式”的通用代码已被分解，以帮助两种文件类型的代码路径变得更加健壮。

请参阅[Taylor Blau ( ) 的](https://github.com/ttaylorr)[提交 c4ff24b](https://github.com/git/git/commit/c4ff24bbb354377a6a7937744fbbef2898243fc7)（2021 年 2 月 24 日[）](https://github.com/ttaylorr)。 请参阅[提交A43A2E6](https://github.com/git/git/commit/a43a2e6c2af63e5b93444c8ed8ac252927c2f0f3)，[提交329FAC3](https://github.com/git/git/commit/5387fefadc121cb142e513557997415f2e75188a)，[提交6ab3b8b](https://github.com/git/git/commit/329fac3a366244ceac599ab63cd338bcc6a1dcb4)，[提交2692c2f](https://github.com/git/git/commit/6ab3b8b8b8dc94c8e4caefb1d368cc704e70d38b)，提交5f087f，commit 63a8f0e，[commit](https://github.com/git/git/commit/2692c2f6fd1cc9f74e433cb05d5756575682b9ab) c144241 [，](https://github.com/git/git/commit/5f0879f54b1f5cda348528a49af57a9c3fd620f9)[提交0ccd713](https://github.com/git/git/commit/0ccd713cb6c4dafd36bdf85384becbb9b38504ba)，[提交](https://github.com/git/git/commit/63a8f0e9b9d9ce636738094391619c35856f7665)[980f525](https://github.com/git/git/commit/c1442410d869cd5fb2c0dd79aa1a7c152b99b0f9)，commit [7a3a](https://github.com/git/git/commit/980f525c3cee7e272136eeb6e988a66f5f8a0bd8)，[提交](https://github.com/git/git/commit/7a3ada1192bd251e530a668f63a65b4befa076d0)31bda9a [，](https://github.com/git/git/commit/31bda9a237b363574bd8a5bd98f86bdeb6ced1e6)提交[b4d9414](https://github.com/git/git/commit/b4d941420bce15cd48bccabc1faa90477bda2fae)，[提交577dc49](https://github.com/git/git/commit/577dc49696afee67fb507e0bd72be4c8677b83c2)，[提交570df42](https://github.com/git/git/commit/47410aa8370fdfc67d379fc808ac2316aef1d2c5)，[提交570df42](https://github.com/git/git/commit/570df42610a971b80046846d7f262007bec23dd6)（18 2021 年 2 月），以及[`ttaylorr`](https://github.com/ttaylorr)
[由Derrick Stolee ( )`derrickstolee`](https://github.com/derrickstolee)[提交 eb90719](https://github.com/git/git/commit/eb9071912f5ca370d7e30e88434ffa10c182ed81)（2021 年 2 月 5 日[）](https://github.com/derrickstolee)。
^(（由[Junio C Hamano 合并 -- `gitster`--](https://github.com/gitster)在[提交 660dd97](https://github.com/git/git/commit/660dd97a62da66ffe95df20a9e27a01e39ae473f)中，2021 年 3 月 1 日）)

> ## [`commit-graph.c`](https://github.com/git/git/commit/c4ff24bbb354377a6a7937744fbbef2898243fc7): 写入时显示正确的块数
> 
> ^(报道人：SZEDER Gábor 署名)
> ^(者：Taylor Blau)
> ^(署名者：Derrick Stolee)

> 编写提交图时，会显示一个进度表，指示要写入的数据条数（每个块中的每个提交一个）。
> 
> 在[47410aa](https://github.com/git/git/commit/47410aa8370fdfc67d379fc808ac2316aef1d2c5) (" `commit-graph`: use chunk-format write API", 2021-02-18, Git v2.32.0 -- [merge](https://github.com/git/git/commit/660dd97a62da66ffe95df20a9e27a01e39ae473f) ) 中，新的 chunk-format API 会跟踪块的数量。但是，当用于跟踪相同的情况
> 时，会留下一个杂散的局部变量。`write_commit_graph_file()`
> 
> [由于在47410aa](https://github.com/git/git/commit/47410aa8370fdfc67d379fc808ac2316aef1d2c5)之后不再更新，因此进度表出现损坏：
> 
> ```
> $ git commit-graph write --reachable
> Expanding reachable commits in commit graph: 837569, done.
> Writing out commit graph in 3 passes: 166% (4187845/2512707), done. 
> ```
> 
> 删除局部变量并依赖块格式 API 来告诉我们正确的块数。*

# c - 为什么在 argv[0] 的输出中出错？

> ID：12756206
> 
> 赞同：0
> 
> 时间：2012-10-06T02:33:46.300
> 
> 标签：c, visual-c++

我正在使用 Visual C++ 2010，代码是：

```
#include "stdafx.h"
#include <stdio.h> 

int _tmain(int argc, _TCHAR* argv[]) { 
    printf("step 0: %s\n", argv[0]);
    int d;
    scanf("%d",&d);
    return 0;
} 
```

当我选择_UNICODE时，输出为“D”，当我选择_MBCS时，它运行良好，输出为“D:\VCTest\c1006.exe”

为什么 _UNICODE 有问题？如何对 _UNICODE 和 _MBCS 使用相同的代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T02:39:02.203

编译 Unicode 项目时，`_TCHAR`is `wchar_t`， not `char`.

`%s`格式说明符期望其对应的参数是a `char const*`; 您正在传递 a `wchar_t*`，因此结果出乎意料。

您可以使用`_tprintf`, 它将根据项目是构建为 ANSI 还是 Unicode来选择正确的`printf`函数（`printf`或）。`wprintf`如果你想使用`printf`，你可以`%ls`对宽字符串使用格式说明符，但是你必须使用不同的格式字符串，具体取决于项目是构建为 ANSI 还是 Unicode。

或者，只使用 Unicode，根本不使用`_TCHAR`和朋友。

# vhdl - VHDL 状态机没有循环

> ID：12756221
> 
> 赞同：0
> 
> 时间：2012-10-06T02:37:36.793
> 
> 标签：vhdl, fsm

SO用户，

我正在对我的 ADC 进行编程（ADC0804 安装在连接到 Spartan-3 FPGA 板的面包板上）。现在，我正在使用这个 ADC 为我的湿度传感器提供数字输出。ADC 输出一个 8 位值，我显示在 FPGA 板上的 LED 上。

现在，我正在以这样一种方式编写状态机，即使我改变湿度水平，ADC 也将始终继续保持输出值。但就我目前的实现而言，即使我循环回到第一个状态，我也没有得到连续的值流。我一次只能得到一个 8 位的值（IE；我必须不断按下重置按钮来更新 LED 上显示的值）。以下是我的代码。

```
FSM_NEXT_STATE_INIT :   PROCESS (CLK, RST)
                        BEGIN
                        IF (RST = '1') THEN
                           CURR_STATE <= STARTUP;
                        ELSIF (CLK'EVENT AND CLK = '1') THEN
                            CURR_STATE <= NEXT_STATE;
                        END IF;
                       END PROCESS;

START_FSM   :   PROCESS (CURR_STATE, INTR)
                BEGIN

                CASE CURR_STATE IS

                        WHEN STARTUP =>
                            NEXT_STATE <= CONVERT;
                            WR <= '0';
                            READ_DATA <= '0';

                        WHEN CONVERT =>
                            IF (INTR = '0') THEN
                                NEXT_STATE <= READ1;
                            ELSE
                                NEXT_STATE <= CONVERT;
                            END IF;
                            WR <= '1';
                            READ_DATA <= '0';

                        WHEN READ1 =>
                            NEXT_STATE <= READ2;
                            WR <= '1';
                            READ_DATA <= '1';

                        WHEN READ2 =>
                            NEXT_STATE <= STARTUP;
                            WR <= '1';
                            READ_DATA <= '0';

                        WHEN OTHERS =>
                            NEXT_STATE <= STARTUP;
                END CASE;
                END PROCESS;

                PROCESS (CLK, RST)
                BEGIN
                    IF (RST = '1') THEN
                        Y <= (OTHERS => '0');
                    ELSIF (CLK'EVENT AND CLK = '1') THEN
                        IF (READ_DATA = '1') THEN
                            Y <= D7&D6&D5&D4&D3&D2&D1&D0; --Concatenate the 8-bit ADC output
                        END IF;
                    END IF;
                END PROCESS; 
```

您会注意到，在状态“READ2”中，我循环回到开头（这样我可以在状态转换时不断读取值），但不知何故，我认为这不起作用。任何人都可以就如何解决这个问题提供一些帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T23:57:27.243

查看 ADC0804 的数据表后，我发现以下可能是/可能的原因：

**注意：读选通必须在中断断言后 8 个时钟周期 (8/fCLK) 发生，以保证 INTR 复位。**

在 CONVERT 和 READ1 之间插入 WAIT 状态可能会解决问题。

# c++ - 访问班级中的私人成员的问题

> ID：12756222
> 
> 赞同：0
> 
> 时间：2012-10-06T02:37:36.753
> 
> 标签：c++, visual-studio-2010, inheritance

因此，在我的派生类 OrderedList 的头文件中，我通过告诉编译器使用基类方法来继承我之前创建的 List 类的一些功能`using List<DataType>::examplefunction;`。所有未被覆盖且以上述方式声明的函数都是 OrderedList 的私有成员。

因此，当我运行我的程序时，我在 Microsoft Visual Studio 中获得以下错误：

> 错误 C2248：“OrderedList::examplefunction”：无法访问在类“OrderedList”中声明的私有成员

examplefunction 在基类 List 中是公共的。

这是我正在使用的具体示例：

在 OrderedList.h 中，

```
private: 
using List<DataType>::remove; 
```

在 List.h 中，

```
public:
void remove () throw ( logic_error ); 
```

而在 List.cpp 中 remove 的位置，

```
void List<DataType>::remove () throw ( logic_error ) 
{ // Do some operations// 
} 
```

我的 OrderedList 头文件中的声明也是这样的：

```
#include "List.cpp"

template < typename DataType, typename KeyType >
class OrderedList : public List<DataType> 
```

如果有人能告诉我是什么导致了这个问题，那将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T02:45:07.500

如果 exampleFunction 在您的 List 类中是私有的，您的 OrderedList 类将无法访问它。改为保护它。请参阅[私有成员和受保护成员：C++](https://stackoverflow.com/questions/224966/private-and-protected-members-c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T21:18:36.040

在 OrderedList 头文件中将继承的方法移至 public 并将数据成员移至受保护的工作。

**更新**

所以这是大约一年前的事了。然而，现在看来，它是那么的明目张胆。`base class`给出的指令将( `List`) 中的继承方法声明为`private`，但`main`其中由教科书的作者提供（用于测试目的），其中一些继承的方法被调用。虽然`private`无法`OrderedList`被正在创建的实例调用`main`。

我们的教练后来更正了这些说明，但有时作为学生，您可以密切关注。

# sql - T-SQL：跨多列计数和分组

> ID：12756223
> 
> 赞同：1
> 
> 时间：2012-10-06T02:37:38.383
> 
> 标签：sql, tsql, sql-server-2005

我有下表：

```
姓名 | Col1 | Col2 | Col3
约翰ABC
约翰·艾达
比尔 AAD
美国联邦航空局法案
史蒂夫·法布
史蒂夫CCA

```

我想知道约翰、比尔和史蒂夫总共有多少...

例如约翰：3，比尔：4，史蒂夫：2

我怎么能用 T-SQL 做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T02:53:37.703

您可以使用以下[`UNPIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)功能：

```
select name, count(val) TotalAs
from yourtable
unpivot
(
  val
  for col in (col1, col2, col3)
) u
where val = 'A'
group by name 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/9ac5c/5)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T02:47:18.963

试试这个[SQL Fiddle For 下面](http://sqlfiddle.com/#!3/377c4/2)：

```
declare @table table (name varchar(10), c1 char(1), c2 char(1), c3 char(1))
insert into @table
SELECT 'John','A','B','C' UNION
SELECT 'John','A','D','A' UNION
SELECT 'Bill','A','A','D' UNION
SELECT 'Bill','F','A','A' UNION
SELECT 'Steve','F','A','B' UNION
SELECT 'Steve','C','C','A' 

; WITH CTE AS 
(
   SELECT name, 
       (SELECT Count(CASE WHEN val = 'A' Then 1 ELse Null end) 
        FROM (VALUES (c1),(c2),(c3)) AS value(val)) As ACOL
   from @table
)

SELECT Name, SUM(ACOL) ACount FROM CTE GROUP BY NAME 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T03:46:54.927

这对于 SQL Server 2012 怎么样？它可能会更快。

```
select name,sum(datalength(concat(col1,col2,col3))-
                datalength(replace(concat(col1,col2,col3),'A','')))
from yourtable
group by name; 
```

# c - 通过 UART 为简单的 Z80 系统设计引导加载程序，加载程序的位置

> ID：12756228
> 
> 赞同：3
> 
> 时间：2012-10-06T02:38:50.527
> 
> 标签：c, assembly, embedded, bootloader, z80

我已经开始为我的 z80 系统编写引导加载程序。到目前为止，程序可以通过串行接受十六进制并将其加载到内存中的某个位置。

我遇到的问题是引导加载程序位于内存的开头并使用中断，如何在不覆盖引导加载程序的情况下加载新程序？

（加载的程序也可能想要使用中断）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T02:42:09.350

最好和最广泛使用的方法是将您的应用程序拆分为永远不会更新的稳定引导加载程序，以及您可以不时替换的应用程序。

AFAIK，在 Z80 中只有中断向量，不支持在 CPU 本身中替换它们。你需要在你的硬件中有一些东西来替换你的内存块。

否则，您需要具有引导加载程序在下载期间不使用应用程序部分中的任何内容的功能，并阻止任何可以调用应用程序中任何内容的中断。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T06:29:00.190

Wrt位置，您可以将引导加载程序放在地址空间的顶部，并在地址空间的开头加载程序。

您还可以在协议中包含程序的位置和大小，以便引导加载程序能够检查这对值是否与引导加载程序的位置和大小兼容（IOW，如果加载，程序是否会覆盖引导加载程序） .

另一种选择是在程序中包含重定位信息，并在引导加载程序中包含一个简单的重定位器。这样，如果有足够的可用内存，您就可以在任何位置加载程序。这就是许多操作系统在加载程序时所做的事情。

至于中断，我认为没有问题。谁或什么不允许程序使用中断？或者您是否希望引导加载程序说常驻并继续在后台执行某些操作或能够从程序返回到它？如果您不需要任何这些，只需让程序使用中断（您可能甚至不需要做任何事情来允许它）。

如果，OTOH，您确实希望引导加载程序保持功能，您可以通过维护一个额外的中断向量表来引入一个额外的间接层。主要 ISR 将从该中断向量表中提取次要 ISR 并跳转到那里。然后，您的引导加载程序和程序需要执行此操作才能添加新 ISR 或覆盖现有 ISR：

1.  禁用中断
2.  从附加中断向量表中获取旧的 ISR 地址
3.  将新的 ISR 地址放入表中
4.  启用中断

删除 ISR 很明显，与上述类似。

然后，新的 ISR 可以：

1.  在工作之前调用旧的 ISR（地址保存在上面的步骤 2 中）
2.  在完成工作后调用旧的 ISR
3.  只做它的工作而不调用旧的 ISR

您需要要求程序和引导加载程序使用此表并在不再需要在其中包含自己的 ISR 时恢复它。

如果您通过在新 ISR 之前/之后执行旧 ISR 来链接 ISR，我不知道您可能需要解决哪些问题。但在某些系统中，这是一种可能的设计。许多 x86 PC 程序和驱动程序都是在 MSDOS 中完成的。

# email - 带有PDF附件标题的php邮件导致进入邮件

> ID：12756229
> 
> 赞同：1
> 
> 时间：2012-10-06T02:38:59.670
> 
> 标签：email, pdf, header, php

我有一个生成 PDF 的网络表单，该 PDF 在提交时通过电子邮件发送给我，但电子邮件不断被过滤到垃圾邮件文件夹中。我怀疑电子邮件标题中有问题，但不确定可能是什么。

任何帮助表示赞赏。

以下是一个片段...

```
// send by email
    $fileatt = '../pdfs/'.$filename;
    $fileatt_type = mime_content_type_manual($fileatt); // File Type  "application/pdf"
    $fileatt_name = $filename; // Filename that will be used for the file as the attachment 

    $email_from = "auth@mysite.com"; // Who the email is from 
    $email_subject = "Auth Report"; // The Subject of the email 

    //$email_to = "info@mysite.com";
    $email_to = "info@mysite.com";

    $headers = "From: ".$email_from; 

    $file = fopen($fileatt,'rb'); 
    $data = fread($file,filesize($fileatt)); 
    fclose($file); 

    $semi_rand = md5(time()); 
    $mime_boundary = "==Multipart_Boundary_x{$semi_rand}x"; 

    $headers .= "\nMIME-Version: 1.0\n" . 
    "Content-Type: multipart/mixed;\n" . 
    " boundary=\"{$mime_boundary}\""; 

    $email_message .= "This is a multi-part message in MIME format.\n\n" . 
    "--{$mime_boundary}\n" . 
    "Content-Type:text/html; charset=\"iso-8859-1\"\n" . 
    "Content-Transfer-Encoding: 7bit\n\n" . 
    $email_message .= "\n\n"; 

    $data = chunk_split(base64_encode($data)); 

    $email_message .= "--{$mime_boundary}\n" . 
    "Content-Type: {$fileatt_type};\n" . 
    " name=\"{$fileatt_name}\"\n" . 
    "Content-Transfer-Encoding: base64\n\n" . 
    $data .= "\n\n" . 
    "--{$mime_boundary}--\n"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T02:50:40.860

如果您将电子邮件的发件人（即您的案例的**auth@mysite.com**）作为新联系人添加到您的电子邮件客户端的**地址簿**中，则该电子邮件可能不会被标记为垃圾邮件，因为它来自成员您的联系地址簿。

# c++ - 安全地直接访问班级成员

> ID：12756234
> 
> 赞同：0
> 
> 时间：2012-10-06T02:39:28.827
> 
> 标签：c++, templates, constants, getter

我想知道以下语法是否可以“接受”，或者良好实践是否认为这是来自地狱。目标是增加一定程度的保护，以迫使开发人员清楚地意识到自己在做什么。这是语法：

```
class MyClass
{
    public:
        template<bool RemoveProtection = false> 
        inline std::ofstream& writeStream()
        {
            static_assert(RemoveProtection, "You're doing it wrong");
            return _writeStream;
        }

        inline const std::ofstream& writeStream() const
        {
            return _writeStream;
        }

    protected:
        std::ofstream _writeStream;
}; 
```

用途是：

```
x.writeStream().good(); // <- OK
x.writeStream().put('c'); // <- NOT OK
x.writeStream<true>().put('c'); // <- OK 
```

我发现这是告诉开发人员的一种方便方式：“当心，您使用的是低级功能，您必须小心您正在做的事情”。以某种“保护”提供对班级成员的直接访问是一种“可接受的”方式吗？还有其他编码方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T03:23:04.717

看看[meagar 的评论](https://stackoverflow.com/questions/12756234/secure-direct-access-to-class-members#comment17235786_12756234)：

> 你让你的代码变得丑陋，更难维护和不方便......究竟是什么？定义你的界面。那是你的类的接口。不要让开发人员通过使用一些荒谬的模板标志黑客来绕过它。如果你正在编写代码，你总是必须知道你在做什么。必须明确输入`<true>`以表明您特别知道自己在做什么，这只是……非常非常错误的想法。开发人员有文档。他们不需要训练轮和人为的限制，他们需要清晰简洁的代码来让他们完成工作。– 米加 2012-10-06 02:41:53Z

当另一个用户使用它时，你提供给其他人的类永远不会进入不可预测的状态。在这种情况下，不可预测的状态是您在编写课程时从未考虑过的状态。因此，您不应该 **允许访问** 您的类的低级方法**或记录可能的缺陷**。

假设您正在编写一个记录器：

```
struct MyLogger{
    MyLogger(std::string filename) : stream(filename.c_str()){}      
    template <typename T>
    MyLogger& operator<<(const T& v){ stream << v << " "; return *this;}

private:
    std::ofstream stream;
}; 
```

忽略没有复制构造函数并且缺少赋值操作数。也忽略它是一个粗略的记录器，它甚至不提供时间戳。但是，如您所见，记录器的状态完全取决于记录器的方法，例如，如果文件已成功打开，则在记录器被销毁之前它不会关闭。

现在说我们使用您的方法：

```
struct MyLogger{
    MyLogger(std::string filename) : stream(filename.c_str()){}
    template <typename T>
    MyLogger& operator<<(const T& v){ stream << v << " "; return *this;}

    template<bool RemoveProtection = false> 
    inline std::ofstream& writeStream()
    {
        static_assert(RemoveProtection, "You're doing it wrong");
        return stream;
    }

    inline const std::ofstream& writeStream() const
    {
        return stream;
    }

private:
    std::ofstream stream;
}; 
```

现在有人使用以下代码

```
logger.writeStream<true>.close(); 
```

砰。你的记录器坏了。当然是用户的错，因为他们使用`<true>`了，不是吗？但用户通常会复制示例代码，尤其是当他第一次使用库时。用户看到你的例子

```
logger.writeStream().good(); // <- OK
logger.writeStream().put('c'); // <- NOT OK
logger.writeStream<true>().put('c'); // <- OK 
```

并首先完全忽略文档。然后他将使用第一个和最后一个版本。后来他发现最后一个版本*每次都*有效！这是多么神奇的事情`<true>`。然后他开始指责你发生了邪恶的事情，所以你已经通过包含警告的文档保护自己免受公然火焰的伤害：

```
 /**
    * \brief Returns a reference to the internal write stream
    *
    * \note You have to use the template parameter `<true>` in order to use it
    *
    * \warning Please note that this will return a reference to the internal 
    *          write stream. As such you shouldn't create any state in which 
    *          the logger cannot work, such as closing the stream.        
    */
    template<bool RemoveProtection = false> 
    inline std::ofstream& writeStream()
    {
        static_assert(RemoveProtection, "You're doing it wrong");
        return stream;
    } 
```

那么，我们得到了什么？我们仍然不得不把这个警告放在某个地方。如果我们公开它会简单得多`stream`：

```
struct MyLogger{
    MyLogger(std::string filename) : stream(filename.c_str()){}
    template <typename T>
    MyLogger& operator<<(const T& v){ stream << v << " "; return *this;}

    /**
    * The internal write stream. Please look out that you don't create
    * any state in which the logger cannot work, such as closing the stream.
    */
    std::ofstream stream;
}; 
```

或坚持

```
/** >put warning here< */
inline std::ofstream & writeStream()
{
    return stream;
} 
```

哎呀。因此，要么不允许访问您的低级方法（`std::ofstream`如果应该允许使用它们，则为特定方法构建一个包装器）或记录如果您对对象的内部进行大量更改时可能发生的缺陷，但不要走中间路线，用`static_assert`.

# python - Python 在以正确格式写入/读取和测试时遇到问题

> ID：12756236
> 
> 赞同：0
> 
> 时间：2012-10-06T02:40:09.227
> 
> 标签：python

我正在尝试制作一个可以执行以下操作的程序：

*   检查 auth_file 是否存在
    *   如果是 -> 读取文件并尝试使用该文件中的数据登录 - 如果数据错误 -> 请求新数据
    *   如果没有 -> 请求一些数据，然后创建文件并用请求的数据填充它

至今：

```
import json
import getpass
import os
import requests
filename = ".auth_data"
auth_file = os.path.realpath(filename)
url = 'http://example.com/api'
headers = {'content-type': 'application/json'}

def load_auth_file():
    try:
        f = open(auth_file, "r")
        auth_data = f.read()
        r = requests.get(url, auth=auth_data, headers=headers)
        if r.reason == 'OK':
            return auth_data
        else:
            print "Incorrect login..."
            req_auth()
    except IOError:
        f = file(auth_file, "w")
        f.write(req_auth())
        f.close()

def req_auth():
    user = str(raw_input('Username: '))
    password = getpass.getpass('Password: ')
    auth_data = (user, password)
    r = requests.get(url, auth=auth_data, headers=headers)
    if r.reason == 'OK':
        return user, password
    elif r.reason == "FORBIDDEN":
        print "Incorrect login information..."
        req_auth()
    return False 
```

我有以下问题（理解和应用正确的方法）：

*   我找不到将返回的数据从 req_auth() 存储到 auth_file 的正确方法，该格式可以在 load_auth 文件中读取和使用

PS：当然，我是 Python 的初学者，我确定我在这里错过了一些关键元素 :(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T03:16:15.967

读写数据，可以使用json：

```
>>> with open('login.json','w') as f:
        f.write(json.dumps({'user': 'abc', 'pass': '123'}))

>>> with open('login.json','r') as f:
        data=json.loads(f.read())
>>> print data
{u'user': u'abc', u'pass': u'123'} 
```

* * *

我建议的一些改进：

1.  有一个测试登录的功能（参数：用户，密码）并返回真/假
2.  将数据保存在 req_data 中，因为 req_data 仅在数据不正确/缺失时才会被调用
3.  向 req_data添加一个可选参数`tries=0`，并针对它进行最大尝试次数测试

(1):

```
def check_login(user,pwd):
    r = requests.get(url, auth=(user, pwd), headers=headers)
    return r.reason == 'OK': 
```

对于 (2)，您可以使用 json（如上所述）、[csv](http://docs.python.org/library/csv.html)等。这两者都非常简单，尽管 json 可能更有意义，因为您已经在使用它。

对于（3）：

```
def req_auth(tries = 0) #accept an optional argument for no. of tries
    #your existing code here
    if check_login(user, password):
        #Save data here
    else:
        if tries<3: #an exit condition and an error message:
            req_auth(tries+1) #increment no. of tries on every failed attempt
        else:
            print "You have exceeded the number of failed attempts. Exiting..." 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T03:03:17.233

有几件事我会以不同的方式处理，但你已经有了一个好的开始。

我最初不会尝试打开文件，而是检查它是否存在：

```
if not os.path.isfile(auth_file): 
```

接下来，当您编写输出时，您应该使用上下文管理器：

```
with open(auth_file, 'w') as fh:
    fh.write(data) 
```

最后，作为一个开放的存储（不是非常安全），将您保存的信息以`json`格式保存可能会很好：

```
userdata = dict()
userdata['username'] = raw_input('Username: ')
userdata['password'] = getpass.getpass('Password: ')
# saving
with open(auth_file, 'w') as fho:
    fho.write(josn.dumps(userdata))
# loading
with open(auth_file) as fhi:
    userdata = json.loads(fhi.read()) 
```

# android - 从 android 应用程序访问在线数据库的最佳方式？

> ID：12756243
> 
> 赞同：0
> 
> 时间：2012-10-06T02:42:25.533
> 
> 标签：android, database-connection

构建一个允许所有人共享图片的安卓社交应用。将在线数据库中的图片显示到我的社交应用程序的最佳做法是什么？这些在线数据库图片是否也可以使用imageview进行水平滚动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T16:07:21.590

您可以将图像以 Base64 字节数组的形式存储在您的在线数据库中，然后可能会创建一个 Web 服务，该服务将从数据库中请求该图像。

您可以轻松地相互转换 Base64 和位图格式，因此转换应该不是问题。

当您要上传任何图像时，将其转换为字节数组并通过 Web 服务将其存储在数据库中。当您想下载任何图像时，获取字节数组并转换为位图并显示在您的应用程序中。

随意问我是否不清楚。

**编辑：创建并连接到 Web 服务**

使用 SQL Server 管理桌面上的数据并在 Visual Studio 上的 .Net 中创建 Web 服务。

然后连接到应用程序中的 Web 服务并从数据库中设置/获取数据。

有关[如何在 .NET 中制作 Web 服务的](http://srikanthtechnologies.com/blog/dotnet/wsdaljava.aspx)链接（不包括 Android 中的实现）。

有关如何将您的服务与 Android 连接的链接：

[http://seesharpgears.blogspot.in/2010/11/basic-ksoap-android-tutorial.html](http://seesharpgears.blogspot.in/2010/11/basic-ksoap-android-tutorial.html)

[http://www.codeproject.com/Articles/304302/Calling-Asp-Net-Webservice-ASMX-From-an-Android-Ap](http://www.codeproject.com/Articles/304302/Calling-Asp-Net-Webservice-ASMX-From-an-Android-Ap)

[http://adrianandroid.blogspot.in/2012/05/access-c-net-web-service-in.html](http://adrianandroid.blogspot.in/2012/05/access-c-net-web-service-in.html)

# microsoft-metro - 调试器找不到目标应用程序的注册

> ID：12756246
> 
> 赞同：2
> 
> 时间：2012-10-06T02:44:36.300
> 
> 标签：microsoft-metro

我正在通过以访客帐户登录来测试我的 Windows 8 应用程序。我想看看它是如何在有限权限下安装的。

看来我无法调试任何应用程序。以下是步骤：

1.  以 Windows 8 访客帐户登录

2.  打开 Visual Studio。

3.  使用网格模板创建新的 Windows 应用商店应用

4.  点击播放按钮部署到模拟器或本地机器。

部署后，我收到此错误：

无法调试 Windows 应用商店应用 App1/App1/bin/Debug/App1.exe

调试器无法找到目标应用程序的注册。如果问题仍然存在，请尝试卸载并重新安装应用程序。

如果没有管理员身份，我是否无法部署应用程序？如果没有，有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T11:49:19.033

尝试以访客身份调试安装应用程序是没有意义的。访客帐户不允许安装应用程序。 [这里有一个关于帐户的简短论坛帖子。](http://www.eightforums.com/tutorials/5518-user-account-type-change-windows-8-a.html)

如果您想查看应用程序在安装后如何为来宾执行，您可以从桌面磁贴运行该应用程序，但我不知道如何在其上运行调试器，或者即使可以。

# php - 具有动态分配名称的文本区域会抛出我的代码

> ID：12756251
> 
> 赞同：0
> 
> 时间：2012-10-06T02:45:35.917
> 
> 标签：php, mysql

我有许多文本区域，每个区域都有一个唯一的分配名称（例如，name="adcode$ID"）。当我尝试将这些名称传递给下面的代码时，由于动态部分，它不起作用。

```
if (isset($_POST['editadapp'])) {  // Edit AD
$newadcode = mysql_real_escape_string($_POST['.adcode$ID.']);
$doedit = "UPDATE ads SET adcode = '".$newadcode."') WHERE ads_ID=$ID" or die(mysql_error());
$updatead = mysql_query($doedit) or die(mysql_error());
    header("Location: " . $_SERVER['PHP_SELF']); 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T02:49:27.870

您似乎正在尝试字符串连接。以下是如何正确执行此操作：

```
$newadcode = mysql_real_escape_string($_POST['adcode' . $ID]); 
```

以下行应该简单地创建一个包含您的 SQL 查询的字符串；你直到下一行才执行它，没有函数调用，所以它`or die`不合适。您还将串联与插值（双引号字符串中的变量名称）混合使用，这很好，但可能无法帮助您理解语法问题，所以让我们保持一致：

```
$doedit = "UPDATE ads SET adcode = '" . $newadcode . "' WHERE ads_ID = " . $ID; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T03:07:30.110

这有太多的错误，令人恐惧。

首先，

```
$doedit = "UPDATE ads SET adcode = '".$newadcode."') WHERE ads_ID=$ID" or die(mysql_error()); 
```

该代码片段在许多层面上都是错误的。

1.  sql语法错误
2.  sql 使用来自用户输入的字符串进行格式化（请参阅[此处的查询参数化](https://stackoverflow.com/questions/12663287/sql-insert-and-submit/12664894#12664894)
3.  或 die() 不应该在这里使用，你正在创建一个字符串

理想情况下，您应该有如下代码：

```
$dbh =  new PDO('connectionstring to connect to your database');
$sql = 'update ads set adcode = ? where ads_id = ?';
$sth = $dbh->prepare($sql);
$sth->execute(array($_POST['adcode' . $ID], $ID)); 
```

其他主题：

[pdo 中是否需要参数化查询？](https://stackoverflow.com/questions/11881156/are-parameterized-queries-in-pdo-necessary-for-request-variables)

[使用 pdo 准备的查询](https://stackoverflow.com/questions/1299182/prepared-parameterized-query-with-pdo)

[防止php中的sql注入](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T03:23:43.310

您应该`adcode[<?php echo $ID;?>]`在文本区域所在的页面和隐藏字段中使用数组`name=adID[$ID]`。在执行查询的页面 `$adID = $_POST['adID']; $newadcode = mysql_real_escape_string($_POST['adcode']); $N = count($adID); for($i=0;$N<$i;$i++){ $doedit = mysql_query("UPDATE ads SET adcode = '$newadcode[$i]' WHERE ads_ID=$adID[$i];") or die(mysql_error());`

# css - CSS修改输入框

> ID：12756258
> 
> 赞同：0
> 
> 时间：2012-10-06T02:47:04.027
> 
> 标签：css

我已经为几个输入字段创建了我想要的结果的图像。 [![](../Images/407a78c5bfb5e9b640a0fa3bf28a394b.png)](https://i.stack.imgur.com/cCmgq.jpg)

我试图得到的结果是这样的：

```
input {
  padding-left: 2px;
  padding-top: 2px;
  height: 1.8em;
  font-size: 1em;
} 
```

我在创建这个时遇到的问题是任何时候我调整文本大小，使其比输入字段相对小，输入字段的高度也会相应变化，它似乎没有注意高度属性，只有字体大小。

我希望文本最终达到输入字段高度的 60% 左右，并且如上所述，非常接近左下角。

有人可以为此指出正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T02:59:21.117

`em`是基于字体的大小（[点大小](http://en.wikipedia.org/wiki/Em_%28typography%29)），所以如果你改变字体大小，高度（如你所指定的）将会改变。如果您希望它独立于字体大小，请使用像素高度。

# opencl - OpenCL 数据传输和 DMA

> ID：12756259
> 
> 赞同：4
> 
> 时间：2012-10-06T02:47:05.507
> 
> 标签：opencl, gpu, amd-processor

在 AMD APP 编程指南中写道（第 4-15 页）：

对于 <=32 kB 的传输：对于从主机到设备的传输，数据由 CPU 复制到运行时固定的主机内存缓冲区，然后 DMA 引擎将数据传输到设备内存。从设备到主机的传输则相反。

上面的DMA，是CPU DMA引擎还是GPU DMA引擎？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T22:33:12.497

我相信它是 GPU DMA 引擎，因为在某些卡（例如，NVIDIA）上，您可以同时进行读写（所以这是 GPU 功能而不是 CPU 功能）。

# django - 将模型字段与 ModelForm 中的非模型字段映射

> ID：12756262
> 
> 赞同：1
> 
> 时间：2012-10-06T02:47:32.457
> 
> 标签：django

我几乎一整天都在阅读有关`forms`和的文档`ModelForms`。我设法使用了基本的东西，但现在我真的遇到了麻烦，因为我在文档中没有找到任何关于映射模型字段与非模型字段的提示。那就是我的意思：

我有这个模型：

```
class Process(models.Model):
    key         = models.CharField(max_length=32, default="")
    name        = models.CharField(max_length=30)
    path        = models.CharField(max_length=215)
    author      = models.CharField(max_length=100)
    canparse    = models.NullBooleanField(default=False)
    last_exec   = models.DateTimeField(null = True)
    last_stop   = models.DateTimeField(null = True)
    last_change = models.DateTimeField(null = True, auto_now=True) 
```

用户要修改的唯一字段是`name`和`author`。`path`是我的Process的配置文件的绝对真实路径。目录是固定的，用户不会关心目录是`/home/measure/conf`或`/var/whatever`)，他们只关心文件名。这就是为什么我想`filename`在我的`ModelForm`.

我的表格如下所示：

```
class ProcessForm(MonitorForm):
    filename = forms.CharField(max_length=250)
    class Meta:
        model  = Process
        fields = ('name', 'filename', 'author') 
```

现在，我想要的是`filename`包含存储在其中的文件名`Process.path`而不是整个路径，这就是我的意思：

```
>>> from monitor.forms import ProcessForm
>>> from remusdb.models import Process
>>> 
>>> p = Process(name="test1", path="/tmp/config/a.cnf", author="pablo")
>>> f = ProcessForm(instance=p)
>>> print f["filename"].value()
---> here I want to get "a.cnf" 
```

问题是我不知道如何在我打电话后写入`a.cnf`该字段。我想过在函数中这样做，但我不确定这是否是一个好地方。我认为此时为时已晚，因为这些字段或多或少是只读的，一旦初始化，您就无法更改它们的值。那么我该怎么做呢？我应该创建一个自定义字段并覆盖吗？`filename``ProcessForm(instance=p)``clean``__init__`

我从阅读[表单字段默认清理](https://docs.djangoproject.com/en/1.4/ref/forms/validation/#form-field-default-cleaning)中得到了这个想法，并想先测试一下。我不想先覆盖**init**，我想首先使用`to_python`文档中的方法。所以我创建了这个类`RemusFilenameField`：

```
class RemusFilenameField(forms.CharField):
    def to_python(self, value):
        print "to_python's value is %s" % value
        return value.upper()

    def clean(self, value):
        print "clean's value is %s" % value
        return value.upper() 
```

并将`filename`线路更改`ProcessForm`为

```
filename = RemusFilenameField(max_length=250) 
```

我添加了打印以查看调用此方法的位置/时间。但是根本不调用这些方法。我怀疑是因为形式没有界限。所以我这样做了：

```
>>> p = {"name": "test1", "filename": "a.cnf", "author": "pablo"}
>>> f = ProcessForm(p)
>>> f.is_valid()
clean's value is a.cnf
True
>>> print f["filename"].value()
a.cnf 
```

该`to_python`方法也没有被调用，我希望看到`A.CNF`因为`clean`返回不同的东西。

我不知道如何解决这个问题，甚至这是否是一个好主意。我的下一个问题是何时`f.save()`执行正确`path`的必须`filename`从`instance`. 我会在`clean`方法中这样做还是有更好的选择？

**编辑**：我想我有一个创建表单的解决方案（我必须阅读整个源代码以识别`python2.6/site-packages/django/forms/models.py`用法`model_to_dict`：

```
from django.forms.models import model_to_dict
import os

class ProcessForm(MonitorForm):
   filename = RemusFilenameField(max_length=250)
   def __init__(self, *args, **kwargs):
       super(ProcessForm, self).__init__(*args, **kwargs)
       try:
           proc = kwargs["instance"]
           filename = os.path.basename(proc.path)
           self.initial.update({'filename': unicode(filename)})
       except:
           pass
   class Meta:
       model  = Process
       fields = ('name', 'filename', 'author') 
```

它知道有效:) 现在我必须弄清楚如何修复该`save()`方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T07:03:39.327

save() 方法是在表单中放置任何其他保存逻辑的合适位置。

```
def save(self, commit=True):
    proc = super(ProcessForm, self).save(commit=False)
    filename = cleaned_data['filename']
    # additional logic to alter filename
    proc.path = filename
    if commit:
        proc.save()
    return proc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T13:12:02.427

就表单中字段的调用`to_python()`方法而言，您的代码是正确的，但您必须从[clean_data 字典](https://docs.djangoproject.com/en/dev/topics/forms/#processing-the-data-from-a-form)中获取值：

```
>>> p = {"name": "test1", "filename": "a.cnf", "author": "pablo"}
>>> f = ProcessForm(p)
>>> f.is_valid()
clean's value is a.cnf
True
>>> f.cleaned_data['filename']
'A.CNF' 
```

如果您需要一些关于模型保存的逻辑，您可以`save()`在模型中覆盖。它也在[django docs](https://docs.djangoproject.com/en/dev/topics/db/models/#overriding-predefined-model-methods)中进行了描述。

您还应该考虑`save()` [在您的 ModelForm 中覆盖方法，](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#the-save-method)如drawman所说 - 它不会影响您的代码`save()`从代码中的其他位置调用模型实例上的方法。

# c# - 使用 oledb 使用 C# 的 oracle 连接字符串

> ID：12756264
> 
> 赞同：3
> 
> 时间：2012-10-06T02:48:11.140
> 
> 标签：c#, oracle, database-connection, oledb

我正在用 C# 开发一个连接到 Oracle 10g 的应用程序。

当我使用 ODP 时。网和这个

Connection String **"Data Source=Angelo-HP/XE;User ID=MAPFRE;Password=123456"** 我可以连接数据库并执行任何操作，

但是当我使用 OleDbConnection (System.Data.OleDb) 时

连接字符串：**“Provider=OraOLEDB.Oracle;OLEDB.NET=true;PLSQLRSet=true;User ID=mapfre;password=123456;Data Source=XE”** 我收到此错误：

**ORA-12154: TNS: 无法解析指定的连接标识符**

当我尝试使用 OleDbConnection 中的 Open() 方法时。

我认为不是 oracle 配置，因为我可以从 ODP 和 sqldeveloper 客户端连接。

任何想法？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T03:19:03.283

尝试以下链接中的连接字符串：

[Oracle 连接字符串示例](http://connectionstrings.com/oracle#microsoft-ole-db-provider-for-oracle-msdaora)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-14T16:43:34.340

如果您的计算机上有多个版本的 oracle，则可能会出现此问题。

试试这些步骤

1.  转到 oracle 的网络文件夹并打开 tnsnames.ora
2.  搜索您的数据库名称（在这种情况下为 XE）
3.  这将有您的数据源信息（EX : (DESCRIPTION =(ADDRESS_LIST =(ADDRESS = (PROTOCOL = TCP)(Host = xx.xx.xx.xx)(Port = xxxx)))(CONNECT_DATA =(SERVICE_NAME = XP) )))
4.  在连接字符串的数据源字段中使用它。（例如：数据源=（DESCRIPTION =（ADDRESS_LIST =（地址=（协议= TCP）（主机= xx.xx.xx.xx）（端口= xxxx）））（CONNECT_DATA =（SERVICE_NAME = XP）））；“ )

另外，请确保您的解决方案是在 anyCPU 模式下构建的，并确保在 App Pool 中启用 32 位为 true

# c# - 关于 .Net 继承的问题

> ID：12756268
> 
> 赞同：1
> 
> 时间：2012-10-06T02:49:04.927
> 
> 标签：c#, .net

```
public class Father
{
  // static string TYPE = "FATHER";
    public Father()
    {
        //Console.WriteLine("ctor");
    }
    public virtual void Print()
    {
        Console.WriteLine("I'm father");
    }
}

public class Son:Father
{
    public override void Print()
    {
        base.Print();
        Console.WriteLine("I'm son");
    }
} 
```

我们知道，如果我们调用 Son.Print()，它会打印出“我是父亲”和“我是儿子”。而 Father.Print() 是一个实例方法，我们需要先创建一个实例.所以这就是问题，**谁创建它**？显然，不是我......或者Son在方法表中拥有**两个**Print方法。其中一个可以由Father访问，anthor可以自己访问？哪一个是对的？或者都不对？请告诉我！谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T02:54:22.287

> 谁创造了它？显然不是我

是什么让你如此确定？你当然可以：

```
Son s = new Son(); 
```

> 或者在方法表中`Son`拥有两个`Print`方法。

不，它只有一个`Print`方法，但它还有别的东西：它知道它的基类 ，`Father`它有自己的`Print`方法。这就是为什么`Son`可以访问两个`Print`s - 它自己的和他`Father`的。

# xml - XSD 为 WDSL 定义模式 - 如何解释

> ID：12756271
> 
> 赞同：0
> 
> 时间：2012-10-06T02:49:16.713
> 
> 标签：xml, wsdl, xsd

我正在查看一个应该定义 WSDL Web 服务的 XSD 文档。查看 [ftp://ftp.ihe.net/TF_Implementation_Material/ITI/schema/IHE/RFD.xsd](ftp://ftp.ihe.net/TF_Implementation_Material/ITI/schema/IHE/RFD.xsd)我不知道如何将此 XSD 转换为有意义的 Web 服务合同。是否存在一些可以自动解析 XSD 并创建 Web 服务存根的工具？我如何将 XSD 解释为 WSDL 合同？——下面的片段...

```
<xs:complexType name="workflowDataType">
<xs:sequence>
<xs:element name="formID" type="xs:string">
<xs:annotation>
<xs:documentation>The identifier of the form to be retrieved.</xs:documentation>
</xs:annotation>
</xs:element>
<xs:element name="encodedResponse" type="xs:boolean" default="true">
<xs:annotation>
<xs:documentation>
true - return either Structured or Unstructured inline form content false - return a URL to the form
</xs:documentation>
</xs:annotation>
</xs:element>
<xs:element name="archiveURL" type="xs:anyURI" minOccurs="0">
<xs:annotation>
<xs:documentation>
The URL that the Form Filler provides to the Form Manager so that the returned form can have the archive location prefilled.
</xs:documentation>
</xs:annotation>
</xs:element>
<xs:element name="context" type="anyXMLContentType" nillable="true">
<xs:annotation>
<xs:documentation>tbd an IHE Content Profile</xs:documentation>
</xs:annotation>
</xs:element>
<xs:element name="instanceID" type="xs:string" nillable="true">
<xs:annotation>
<xs:documentation>
An optional form instanceID returned by the Form Manager
</xs:documentation>
</xs:annotation>
</xs:element>
</xs:sequence>
</xs:complexType> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T15:28:23.130

由于 XSD 本身并没有定义 Web 服务 - 它只是定义将通过 Web 服务传输/接收的数据（实际上是数据的 XML 表示）。

缺少的是实际 Web 服务调用的定义——因为存在不同于 XSD 的 WSDL 文件。

# java - 用于处理根函数的 Android 二进制文件

> ID：12756273
> 
> 赞同：1
> 
> 时间：2012-10-06T02:49:45.973
> 
> 标签：java, android, c++, binary, root

android 市场上的几个应用程序正在使用某种二进制文件和 root 来调用 android 系统方法，这些方法通常只需要授予系统应用程序 (/system/app) 的权限。

我想知道是否可以使用 JNI 调用带有 C++ 二进制文件的 java 方法。有谁知道这些应用程序是如何做到的？一个示例是启动器 Apex 启动器，它使用 root 允许用户使用 ICS 上的新小部件屏幕添加小部件。

任何想法/帮助将不胜感激

# date - Dojo 1.5.x、DateTextBox 和区域设置

> ID：12756275
> 
> 赞同：0
> 
> 时间：2012-10-06T02:50:44.297
> 
> 标签：date, internationalization, dojo, locale

我正在努力为 Dojo 1.5.1 制作 dijit.form.DateTextBox，使其仅使用一种日期格式进行验证和格式化，而不管用户浏览器的区域设置如何。使用这样的东西：

```
var d = new dijit.form.DateTextBox({name:n,displayedValue:v,format:{ formatLength:'short',     selector:'date',datePattern:'MM/dd/yyyy',locale:'en' }},formElement); 
```

...并且浏览器设置为加拿大法语（“fr-ca”），它会验证像“2012 年 10 月 5 日”这样的日期不正确。为什么它忽略了明确的 datePattern？

遗憾的是，我不得不使用 Dojo 1.5.1，因为这是 IBM Lotus Domino 8.5.3 附带的。

非常感谢任何帮助或建议！

干杯，

亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T21:26:12.503

我试了一下，我认为您将“格式”与“约束”混为一谈。请看小提琴： http: [//jsfiddle.net/DPhxq/](http://jsfiddle.net/DPhxq/) 似乎在 FR-CA 中也可以验证

# java - 扫描仪循环头痛

> ID：12756278
> 
> 赞同：0
> 
> 时间：2012-10-06T02:52:27.937
> 
> 标签：java, loops, input, io

我有一个家庭作业，需要用户输入并将其存储在各种数据结构（链表数组、堆栈等）中。但是，我一直在以非常相似的方式写我以前的家庭作业的主要课程和这一个。我有一个非常小的主要方法。所有主要方法都是实例化一个我不想被破坏的新对象，然后永远循环通过程序，直到用户选择其他方法。然后我有一个`menu()`打印选择列表并读取用户选择的方法。然后从那里，我将该选择传递给另一个方法，该方法解释选择并相应地执行。

我在过去的作业中一直遇到的问题，现在我从来没有真正得到一个好的答案。问题似乎在于我的`menu()`方法，更具体地说，在于`Scanner`对象。`nextLine()`在我在扫描仪对象上调用该方法后，似乎总是在流中留下一些垃圾。因此，下次`menu()`调用该方法时，它会读入该垃圾并循环使用该垃圾的程序的其余部分，直到`menu()`第三次调用该方法。过去，我会通过`next()`在收到输入后立即调用该方法并忽略它来解决此问题。但是，我现在似乎也遇到了问题。

特别是在这个程序中，我有一个请求用户输入城市名称的方法。现在，城市名称可以是多个单词（棕榈城、西棕榈滩、卫星海滩、纽约等）。现在，当扫描器读取其中一个多字城市时，它会执行与以前相同的操作，在下一次`menu()`调用该方法时读取一些垃圾，并使用它遍历整个程序，直到`menu()`再次调用。在这种情况下，它会打印一个字符串“Invalid Selection”，然后再次打印菜单。我一生都无法弄清楚发生了什么。任何帮助，将不胜感激。

```
import java.util.Scanner;

public class CSAir
{
    public static Scanner input = new Scanner(System.in);

    public static void main(String[] args)
    {
        CityList flightLog = new CityList();
        boolean loop = true;

        while(loop)
        {
            loop = actions(menu(),flightLog);
        }

    }

    private static String menu()
    {
        System.out.print("Please Make a Selection\n" +
            "I) Insert a city\n" +
            "A)Add a flight path (One Way)\n" +
            "R) Request a flight\n" +
            "L) Load from a text file\n" +
            "Q) Quit\n" +
            "\nSelection: ");

        String in = input.next();
        //input.next();
        System.out.println();
        return in;
    }

    private static boolean actions(String selection, CityList flightLog)
    {
        if(selection.equalsIgnoreCase("I"))
        {
            insert(flightLog);
            return true;
        }

        else if(selection.equalsIgnoreCase("A"))
        {
            add(flightLog);
            return true;
        }

        else if(selection.equalsIgnoreCase("R"))
        {
            request(flightLog);
            return true;
        }

        else if(selection.equalsIgnoreCase("L"))
        {
            return true;
        }

        else if(selection.equalsIgnoreCase("Q")) return false;

        else 
        {
            System.out.println("Invalid Selection!\n");
            return true;
        }
    }

    private static void request(CityList flightLog)
    {
        System.out.print("Origin: ");
        String origin = input.nextLine();
        System.out.print("\nDestination: ");
        try
        {
            flightLog.isPath(origin, input.next());
        }
        catch (AllDestinationsVisitedException e)
        {
            e.getMessage();
        }
    }

    private static void add(CityList flightLog)
    {
        System.out.print("Origin: ");
        String origin = input.nextLine();
        System.out.print("\nDestination: ");
        flightLog.addPath(origin, input.next());
    }

    private static void insert(CityList flightLog)
    {
        System.out.print("Enter a City: ");

        try
        {
            flightLog.addCity(input.next());
        }
        catch(Exception e)
        {
            System.out.println(e.getMessage());
        }
        System.out.println();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T03:58:25.823

扫描仪的默认分隔符是`white space`. 因此，当您输入时，`New York`因为它`white space`现在具有扫描仪，如果您调用`next()`.

更好的选择是使用[nextLine()](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#nextLine%28%29)方法来读取这些值。

# javascript - 点击“刷新”时如何完全重新加载我的 Sencha Touch 应用程序？

> ID：12756281
> 
> 赞同：1
> 
> 时间：2012-10-06T02:52:56.453
> 
> 标签：javascript, extjs, sencha-touch, sencha-touch-2

我的列表视图布局类似于 Pinterest，具有绝对定位的块。不幸的是，这似乎需要在刷新时完全重新初始化。如果仅重新加载商店（如下所示），则新块的位置不正确。

用户单击刷新时如何重新加载应用程序？

这是我的观点：

```
Ext.require(['Ext.data.Store', 'MyApp.model.StreamModel'], function() {
    Ext.define('MyApp.view.HomeView', {
        extend: 'Ext.navigation.View',
        xtype:  'homepanel',

        requires: [
            'Ext.dataview.List',
        ],

        config: {
            title:            'Home',
            iconCls:          'home',
            styleHtmlContent: true,
            navigationBar: {
                items: [
                    {
                        xtype:    'button',
                        iconMask: true,
                        iconCls:  'refresh',
                        align:    'left',
                        action:   'refreshButton'
                    }
                ]
            },
            items: {
                title: 'My',
                xtype: 'list',
                itemTpl: [
                    '<div class="post">',
                        ...
                    '</div>'

                ].join(''),

                store: new Ext.data.Store({
                    model: 'MyApp.model.StreamModel',
                    autoLoad: true,
                    storeId: 'stream'
                }),
            }
        }
    });
}); 
```

模型：

```
Ext.define('MyApp.model.StreamModel', {
    extend: 'Ext.data.Model',
    config: {
        fields: [
            'post_id',
            'comments'
        ],
        proxy: {
            type: 'jsonp',
            url:  'http://My.com/app',
            reader: {
                type: 'json',
            }
        }
    }
}); 
```

和我的控制器：

```
Ext.define('MyApp.controller.RefreshController', {
    extend: 'Ext.app.Controller',
    requires: [
        'Ext.navigation.View'
    ],
    config: {
        control: {
            'button[action=refreshButton]': {
                tap: 'refresh'
            }
        }
    },
    refresh: function() {
        // Ext.StoreMgr.get('stream').load();

        // here I'd like to reload the app instead
        // not just the store
    }
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-06T03:34:54.203

```
refresh: function() {
    // Ext.StoreMgr.get('stream').load();

    // here I'd like to reload the app instead
    // not just the store
    window.location.reload();

} 
```

# ruby-on-rails - 用户控制器中的 NoMethodError#create

> ID：12756285
> 
> 赞同：0
> 
> 时间：2012-10-06T02:54:26.057
> 
> 标签：ruby-on-rails, methods, nomethoderror

在 Michael Hart 的 Ruby on Rails 教程中注册新用户时，我遇到了一个错误。我是 Rails 的新手，但我一直在寻找几个小时，似乎找不到任何东西来解决这个问题。我最初的想法是它特定于以下行：

```
redirect_to @user 
```

这是我的**users_controller.rb文件**

```
#!/bin/env ruby
# encoding: utf-8

class UsersController < ApplicationController

def show
    @user = User.find(params[:id])
end

def new
  @user = User.new
end

def create
    @user = User.new(params[:user])
    if @user.save
        flash[:success] = "Welcome to the Sample App!"
    ￼￼￼￼￼￼￼￼￼￼￼￼￼￼    redirect_to @user
    else
        render 'new'
    end
end
end 
```

这是我收到的错误消息：

> 用户控制器中的 NoMethodError#create
> 
> 用于#Rails.root 的未定义方法`￼￼￼￼￼￼￼￼￼￼￼￼￼: /Users/mikedeverna/Documents/rails_projects/sample_app
> 
> 应用程序跟踪 | 框架跟踪 | 完整跟踪 app/controllers/users_controller.rb:18:in `create'

这是我`routes.rb`文件中的代码：

```
SampleApp::Application.routes.draw do
resources :users
resources :sessions, only: [:new, :create, :destroy] 
root to: 'static_pages#home'
match '/signup',  to: 'users#new'
match '/signin', to: 'sessions#new'
match '/signout', to: 'sessions#destroy', via: :delete
match '/help',    to: 'static_pages#help'
match '/about',   to: 'static_pages#about'
match '/contact', to: 'static_pages#contact' 
```

我无法找到正确的路径。干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T03:34:27.563

似乎有些奇怪的东西被粘贴到您的代码中。你是正确的哪一行导致了问题，但它不是重定向语句。就是它前面的这个奇怪的字符串：

```
￼￼￼￼￼￼￼￼￼￼￼￼￼￼ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T07:55:22.827

检查您的***app/models/user.rb***。

这听起来可能出乎意料，但如果您的模型中有错误（例如对象方法的验证），那么创建具有适当属性的对象将失败，并在运行代码时导致无方法错误：
`if @foo.save`

***旁注**- 这个话题可能应该很快关闭，因为它与 Rails 3.2 相关，并且可能与 Rails 4 不太相关。我对 Rails 4 太陌生，无法对此有充分的意见。*

# linqpad - LinqPad“ORA-00933：SQL 命令未正确结束”错误

> ID：12756286
> 
> 赞同：0
> 
> 时间：2012-10-06T02:55:04.843
> 
> 标签：linqpad

我收到错误消息：`ORA-00933: SQL command not properly ended`在 LinqPad V4.42.14(AnyCPU) 上运行以下 linq 查询时，数据库是 Oracle 11g。

如果我更换

```
where coof.CoofCode == tod.PatTrnsplntFail.CoofCode && coof.OrgCode == prod.OrgCode 
```

到

```
where coof.CoofCode == tod.PatTrnsplntFail.CoofCode 
```

它有效，但我无法消除该因素。

任何可以帮助我的机构将不胜感激。

```
void Main()
{
    var q = (from pat in Pats
            from patr in pat.PatRegisters
            from prod in patr.PatRegisterOrgDets
            from tod in prod.TransplantOrgDets
            select new {
                PatId = pat.PatID,
                FullName = pat.FirstName + ", " + pat.LastName,
                RegisterDate = patr.RegDate.ToString("yyyy-MMM-dd"),
                TransplantDate = tod.Transplant.TransplantDate.ToString("yyyy-MMM-dd"),
                OrganSpec = tod.OrgSpec.Descrip,
                IsTransplantedFailed = tod.PatTrnsplntFail.TodID == 0 ? false: true,
                TransplantedFailReason = from coof in CausesOfOrgFail
                                         where coof.CoofCode == tod.PatTrnsplntFail.CoofCode && coof.OrgCode == prod.OrgCode
                                         select coof.Descrip
            }).Distinct().OrderBy(o => o.PatId);

    q.Dump(true);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T16:16:58.353

我找到了一种避免该问题的解决方法，但实际上我认为这不是一个好方法，我认为 LinqPad Oracle 驱动程序存在导致该问题的内部错误。乔瑟夫，如果你能读到这个，请给你的建议。因此，请改用以下 linq 查询：

```
void Main()
{
    var q1 = (from pat in Pats
            from patr in pat.PatRegisters
            from prod in patr.PatRegisterOrgDets
            from tod in prod.TransplantOrgDets
            where tod.PatTrnsplntFail.TodID == null
            select new {
                PatId = pat.PatID,
                FullName = pat.FirstName + ", " + pat.LastName,
                RegisterDate = patr.RegDate.ToString("yyyy-MMM-dd"),
                TransplantDate = tod.Transplant.TransplantDate.ToString("yyyy-MMM-dd"),
                OrganSpec = tod.OrgSpec.Descrip,
                IsTransplantedFailed = false,
                CausesOfOrgFailReason = ""
            }).Distinct().OrderBy(o => o.PatId);

    var q2 = (from pat in Pats
            from patr in pat.PatRegisters
            from prod in patr.PatRegisterOrgDets
            from tod in prod.TransplantOrgDets
            from coof in CausesOfOrgFail where coof.CoofCode == tod.PatTrnsplntFail.CoofCode && coof.OrgCode == prod.OrgCode
            where tod.PatTrnsplntFail.TodID != null
            select new {
                PatId = pat.PatID,
                FullName = pat.FirstName + ", " + pat.LastName,
                RegisterDate = patr.RegDate.ToString("yyyy-MMM-dd"),
                TransplantDate = tod.Transplant.TransplantDate.ToString("yyyy-MMM-dd"),
                OrganSpec = tod.OrgSpec.Descrip,
                IsTransplantedFailed = true,
                CausesOfOrgFailReason = coof.Descrip
            }).Distinct().OrderBy(o => o.PatId);

    q1.ToList().Union(q2.ToList()).OrderBy(o => o.PatId).Dump(true);
} 
```

# ios - 来自 CGImageRef 的 UIImage

> ID：12756295
> 
> 赞同：5
> 
> 时间：2012-10-06T02:57:35.303
> 
> 标签：ios, ios5, uiimage

我正在为一个更复杂的项目尝试一个简单的测试，但我很困惑为什么下面的代码会崩溃并给出 EXC_BAD_ACCESS 错误？

这是从 UIView 调用的。

```
 - (void)testing {
      NSString *imagePath = [[NSBundle mainBundle] pathForResource:@"ball.png" ofType:nil];
      CGImageRef imageRef = [[[UIImage alloc]initWithContentsOfFile:imagePath]CGImage];
 //   CGImageRetain(imageRef);

      UIImage *newImage = [[UIImage alloc]initWithCGImage:imageRef];
      UIImageView *iv = [[UIImageView alloc]initWithImage:newImage];
      [self addSubview:iv];
 } 
```

我的猜测是 CGImageRef 没有被保留，而是添加 CGImageRetain(imageRef); 没什么区别。

我还应该注意到这个项目已经打开了 ARC。

**编辑**

 ***我做了更多测试，发现这与 ARC 直接相关，因为我创建了 2 个基本项目，仅包括上面的代码。第一个关闭 ARC 并且效果很好。下一个打开 ARC 并且 BAM 崩溃并出现相同的错误。有趣的是，我只有在崩溃前第一次运行项目时才收到实际的日志错误。

```
 Error: ImageIO: ImageProviderCopyImageBlockSetCallback 'ImageProviderCopyImageBlockSetCallback' header is not a CFDictionary... 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-06T03:11:12.490

这条线是问题所在：

```
CGImageRef imageRef = [[[UIImage alloc]initWithContentsOfFile:imagePath]CGImage]; 
```

created`UIImage`将在此完整表达式之后立即释放（例如，在此行之后）。因此，即使尝试在`CGImageRetain()`之后添加一个也行不通。

根本问题是`CGImageRef`返回的 from`CGImage`几乎可以肯定是 the 的一个 ivar，`UIImage`并且在解除分配时将被释放`UIImage`。

解决此问题的通用方法是延长`UIImage`. 您可以通过将`UIImage`放入局部变量并在最后一次引用之后引用它`CGImage`（例如，使用`(void)uiimageVar`）来完成此操作。或者，您可以将 保留`CGImageRef`在同一行，如

```
CGImageRef imageRef = CGImageRetain([[[UIImage alloc] initWithContentsOfFile:imagePath] CGImage]); 
```

但是如果你这样做了，别忘了`imageRef`在你完成后释放。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-06T03:10:37.767

你写了这个：

```
CGImageRef imageRef = [[[UIImage alloc]initWithContentsOfFile:imagePath]CGImage]; 
```

该行创建一个`UIImage`，获取其`CGImage`属性，然后释放该`UIImage`对象。由于您没有保留该`CGImage`行上的 ，因此唯一的所有者`CGImage`是`UIImage`. 因此，当`UIImage`释放并立即释放时，它也释放了`CGImage`。

您需要在发布`CGImage`之前保留`UIImage`。试试这个：

```
CGImageRef imageRef = CGImageRetain([[UIImage alloc]initWithContentsOfFile:imagePath].CGImage); 
```

然后在函数结束时：

```
CGImageRelease(imageRef); 
```***

# html - 合并表css

> ID：12756296
> 
> 赞同：1
> 
> 时间：2012-10-06T02:57:45.470
> 
> 标签：html, css

我有这样的 HTML 表格：

```
-------------------------------------------------
|Column 1                   |Column 2           |
-------------------------------------------------
|this is the text in column |this is the column |
|one which wraps            |two test           |
------------------------------------------------- 
```

但我不希望第二行只是这样的一列：

```
-------------------------------------------------
|Column 1                   |Column 2           |
-------------------------------------------------
|this is the text in column |this is the column |
|one which wraps two test                       |
------------------------------------------------- 
```

当我在一列上使用行跨度时，上面的列不断扩展。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T03:13:32.613

第一个给 colspan="2" ，之后不给 s。

像下面这样的东西

```
<table>
    <tr>
        <td>
            this is the text in column
        </td>
        <td>
            this is the column
        </td>
    </tr>
    <tr>
        <td colspan="2">
            one which wraps two test
        </td>
    </tr>
</table> 
```

# javascript - 我不断得到错误的输出

> ID：12756297
> 
> 赞同：0
> 
> 时间：2012-10-06T02:58:06.000
> 
> 标签：javascript, html, google-chrome, browser, user-agent

我已经创建了一个 userAgent 嗅探 javascript 应用程序（**仅**用于实验/学习目的），我几乎完成了。但是，对于 $browser.version，我得到了整个 userAgent 字符串。我已经 google'd 和 google'd 并找不到答案。这是我的代码：

```
// contemplate new $browser module
var $browser, versionOffset, ua = navigator.userAgent;

if(ua.toLowerCase().indexOf('opera') > -1) {
    $browser = {
        name: "Opera",
        engine: "Presto",
        prefix: "-o-",
        publisher: "Opera Software ASA",
        version: ua.substring(versionOffset + 6)
    }
}

else if(ua.toLowerCase().indexOf('msie') > -1) {
        $browser = {
        name: "Internet Explorer",
        engine: "Trident",
        prefix: "-ms-",
        publisher: "Microsoft",
        version: ua.substring(versionOffset + 5)
    }
}

else if(ua.toLowerCase().indexOf('chrome') > -1) {
    $browser = {
        name: "Chrome",
        engine: "WebKit",
        prefix: "-webkit-",
        publisher: "Google Inc.",
        version: ua.substring(versionOffset + 7)
    }
}

else if(ua.toLowerCase().indexOf('safari') > -1) {
    $browser = {
        name: "Safari",
        engine: "WebKit",
        prefix: "-webkit-",
        publisher: "Apple Computer Inc.",
        version: ua.substring(versionOffset + 8)
    }
}

else if(ua.toLowerCase().indexOf('firefox') > -1) {
    $browser = {
        name: "Firefox",
        engine: "Gecko",
        prefix: "-moz-",
        publisher: "Mozilla",
        version: ua.substring(versionOffset + 8)
    }
} 
```

所以在我的 HTML 中，我正在做：

```
<script>
    alert($browser.name + " " + $browser.version);
</script> 
```

但我在 chrome 中的输出是：

**[JavaScript 警报]：**

**Chrome ($browser.name)
Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.91 Safari/537.4 ($browser.version)**

但我想要，显然是“Chrome 22”或“Chrome 22.0.1229.91”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T03:12:21.633

这修复了它 - 返回 2 位版本号。

如前所述，您需要设置 versionOffset。

```
else if(ua.toLowerCase().indexOf('chrome') > -1) 
{
    versionOffset = ua.toLowerCase().indexOf('chrome');

    $browser = {
        name: "Chrome",
        engine: "WebKit",
        prefix: "-webkit-",
        publisher: "Google Inc.",
        version: ua.substr(versionOffset+7, 2)
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T03:21:34.483

你的代码对我来说没有多大意义。您必须*使用*诸如 versionOFFset 之类的东西。另外，请注意执行以下操作：`ua.substring(versionOffset + 8)`将返回从 versionOffset+8 开始的整个字符串。因此，由于您实际上从未设置过 versionOffset，因此它是未定义的，因此这样做： versionOffset+8 返回 NaN，JS 会帮助忽略它并决定仅用零替换 NaN（基本上），因此您最终会得到整个 ua 字符串回来。这是一个可能更接近您正在寻找的小提琴：

[http://jsfiddle.net/WFEZW/](http://jsfiddle.net/WFEZW/)

```
else if((versionOffset = ua.toLowerCase().indexOf('chrome')) > -1) {
    $browser = {
        name: "Chrome",
        engine: "WebKit",
        prefix: "-webkit-",
        publisher: "Google Inc.",
        version: ua.substring(versionOffset + 7).substring(0, ua.indexOf(" "))
    }
} 
```

看看我是如何在 if 语句中设置 versionOffset 的，然后我在版本之后寻找第一个“”。这并不意味着在现实世界中使用，但就像你说的，你只是想学习。

# c++ - clang++ 是否支持 __restrict？

> ID：12756299
> 
> 赞同：0
> 
> 时间：2012-10-06T02:58:19.180
> 
> 标签：c++, gcc, clang, restrict-qualifier

以下代码使用 g++ 4.7.1 编译，但不是 clang 3.1

```
struct A
{
  int foo();
};

int A::foo() __restrict
{
  return 0;
}

int main(int argc, char * argv[])
{
  A a;
  return a.foo();
} 
```

铿锵支持`__restrict`吗？还是使用特定的语法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T03:02:38.370

我手头没有 clang 3.1，但是在 clang 4.1 下，我收到了这个错误：

```
t.cpp:6:8: error: out-of-line definition of 'foo' does not match any declaration
      in 'A'
int A::foo() __restrict
       ^~~
t.cpp:3:7: note: member declaration nearly matches
  int foo();
      ^
1 error generated. 
```

如果我将声明更改为以下内容，clang 4.1 将成功编译它`A::foo`：

```
 int foo() __restrict; 
```

# ruby-on-rails-3 - Rails 活动记录模型作为 mixin

> ID：12756301
> 
> 赞同：0
> 
> 时间：2012-10-06T02:58:29.877
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

任何人都知道如何使用`include`mixin 与类继承*( `class Car < ActiveRecord::Base`)*来定义活动记录模型。

我在任何地方都找不到语法，但我知道它是在 Rails 3.1/3.2 中引入的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T11:26:32.857

你指的是这样的事情吗？

```
class Car
  include ActiveModel::Model
end 
```

虽然这不会给你持久性。你到底想做什么？

# c# - 在 C# 中从 DNS 解析 IP 地址

> ID：12756302
> 
> 赞同：15
> 
> 时间：2012-10-06T02:58:37.470
> 
> 标签：c#, ip-address

我正在尝试与 IP 地址建立 TCP 套接字连接。我可以通过直接解析这样的 IP 地址来做到这一点：

```
IPAddress ipAddress = IPAddress.Parse("192.168.1.123");
IPEndPoint remoteEP = new IPEndPoint(ipAddress, 80);
// Create a TCP/IP  socket.
Socket sender = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);  // This works! 
```

但是，我无法弄清楚如何从 DNS 字符串中判断该 IP 地址。我已经尝试了以下每种组合：

```
IPAddress ipAddress = Dns.Resolve("www.mydns.org");   // No dice
IPAddress ipAddress = Dns.GetHostEntry("www.mydns.org");  // Nada
IPAddress ipAddress = IPAddress.Parse(Dns.Resolve("www.mydns.org"));   // So many errors...
IPAddress ipAddress = IPAddress.Parse(Dns.Resolve("www.mydns.org").toString());  // WTh is this attempt anyway? 
```

你们中的任何一个好心人都可以帮我从 DNS 中挤出一个 IPAddress 吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-06T03:02:57.640

```
foreach (IPAddress ip in Dns.GetHostAddresses("www.mydns.org"))
{
    Console.WriteLine(ip.ToString());
} 
```

或者只是`IPAddress address = Dns.GetHostAddresses("www.mydns.org")[0];`如果你只想要第一个。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-05-28T21:05:04.243

为此，我有一个非常简洁的扩展方法！

我考虑到 IPV6 可能会作为 DNS 类返回的地址列表中的第一个地址返回，并允许您对结果“偏爱”IPV6 或 IPV4。这是完整记录的类（为简洁起见，仅使用此案例的相关方法）：

```
using System;
using System.Linq;
using System.Net;
using System.Net.Sockets;

/// <summary>
/// Basic helper methods around networking objects (IPAddress, IpEndPoint, Socket, etc.)
/// </summary>
public static class NetworkingExtensions
{
    /// <summary>
    /// Converts a string representing a host name or address to its <see cref="IPAddress"/> representation, 
    /// optionally opting to return a IpV6 address (defaults to IpV4)
    /// </summary>
    /// <param name="hostNameOrAddress">Host name or address to convert into an <see cref="IPAddress"/></param>
    /// <param name="favorIpV6">When <code>true</code> will return an IpV6 address whenever available, otherwise 
    /// returns an IpV4 address instead.</param>
    /// <returns>The <see cref="IPAddress"/> represented by <paramref name="hostNameOrAddress"/> in either IpV4 or
    /// IpV6 (when available) format depending on <paramref name="favorIpV6"/></returns>
    public static IPAddress ToIPAddress(this string hostNameOrAddress, bool favorIpV6=false)
    {
        var favoredFamily = favorIpV6 ? AddressFamily.InterNetworkV6 : AddressFamily.InterNetwork;
        var addrs = Dns.GetHostAddresses(hostNameOrAddress);
        return addrs.FirstOrDefault(addr => addr.AddressFamily == favoredFamily)
               ??
               addrs.FirstOrDefault();
    }
} 
```

不要忘记将此类放在命名空间中！:-)

现在您可以简单地执行此操作：

```
var server = "http://simpax.com.br".ToIPAddress();
var blog = "http://simpax.codax.com.br".ToIPAddress();
var google = "google.com.br".ToIPAddress();
var ipv6Google = "google.com.br".ToIPAddress(true); // if available will be an IPV6 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-06T03:09:53.600

```
IPHostEntry entry = Dns.GetHostEntry(hostNameOrAddress: "www.google.com");
foreach (IPAddress addr in entry.AddressList)
{
    // connect, on sucess call 'break'
} 
```

通过调用 GetHostEntry 简单地枚举地址，成功打破循环

# java - MouseListener 和 KeyPressed

> ID：12756303
> 
> 赞同：1
> 
> 时间：2012-10-06T02:59:04.373
> 
> 标签：java, swing, jframe, keylistener, mouselistener

我已经构建了一个简单的动画程序，它根据按下的箭头键（类似于蛇）将一个盒子移动到一个方向，在`JFrame`使用`KeyListener`和`ActionListener`. 但我注意到，如果我启动应用程序并移动鼠标，应用程序将不会继续检查按下了哪个箭头键以及移动到哪个方向。

有人可以向我解释一下吗，是因为我需要禁用一些涉及鼠标事件的东西吗？

继承人的代码：

```
public class gui extends JPanel implements ActionListener, KeyListener{
    Timer tm = new Timer(5, this);
    int x = 300, y = 178, velx = 0, vely = 0;

    public gui() {
        tm.start();
        addKeyListener(this);
        setFocusable(true);
    }

    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        g.setColor(Color.red);
        g.fillRect(x, y, 50, 30);

    }

    @Override
    public void keyPressed(KeyEvent e) {
        keys(e);
    }

    public void keys(KeyEvent e) {
        int c = e.getKeyCode();
        if (c == KeyEvent.VK_LEFT)

        {
            velx = -1;
            vely = 0;
        }
        if (c == KeyEvent.VK_UP)

        {
            velx = 0;
            vely = -1;
        }
        if (c == KeyEvent.VK_RIGHT)

        {
            velx = 1;
            vely = 0;
        }
        if (c == KeyEvent.VK_DOWN)

        {
            velx = 0;
            vely = 1;

        }
    }

    public void borders(ActionEvent e) {
        if (x < 0) {
            velx = 0;
            x = 0;
            JOptionPane
                    .showMessageDialog(null, "you hit the borders you lost!");
            System.exit(0);
        }
        if (x > 530) {
            velx = 0;
            x = 530;
            JOptionPane
                    .showMessageDialog(null, "you hit the borders you lost!");
            System.exit(0);
        }
        if (y < 0) {
            velx = 0;
            y = 0;
            JOptionPane
                    .showMessageDialog(null, "you hit the borders you lost!");
            System.exit(0);
        }
        if (y > 330) {
            velx = 0;
            y = 330;
            JOptionPane
                    .showMessageDialog(null, "you hit the borders you lost!");
            System.exit(0);

        }

    }

    @Override
    public void keyReleased(KeyEvent e) {
        // TODO Auto-generated method stub

    }

    public void keyTyped(KeyEvent e) {
        // TODO Auto-generated method stub

    }

    public void actionPerformed(ActionEvent e) {
        x += velx;
        y += vely;
        repaint();
        borders(e);

    } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T15:59:38.247

我不知道你的问题是什么。我用了你的代码，没有问题。

这是我使用的：

```
 public gui() 
        {
            addKeyListener(this);
            setFocusable(true);
        }

        public void keyPressed(KeyEvent e)
        {
            int c = e.getKeyCode();
            if (c == KeyEvent.VK_LEFT)
            {
                velx = -1;
                vely = 0;
            }
            if (c == KeyEvent.VK_UP)
            {
                velx = 0;
                vely = -1;
            }
            if (c == KeyEvent.VK_RIGHT)
            {
                velx = 1;
                vely = 0;
            }
            if (c == KeyEvent.VK_DOWN)
            {
                velx = 0;
                vely = 1;
            }
        }

        public void actionPerformed(ActionEvent e)
        {
            x += velx;
            y += vely;
            repaint();
            borders(e);
        }

        public static void main(String[] args)
        {
            JFrame frame = new JFrame("gui");
            frame.add(new gui());
            frame.setVisible(true);
            frame.setSize(600, 400);
        }
    } 
```

我在启动程序之前单击并移动了鼠标，然后使用了键；它工作正常。我会切换到 KeyBindings。

# ruby-on-rails - 我们怎样才能做真正的rails 3多态has_many：通过？

> ID：12756306
> 
> 赞同：1
> 
> 时间：2012-10-06T02:59:49.823
> 
> 标签：ruby-on-rails, ruby-on-rails-3, has-many-through, polymorphic-associations

我想要以下内容：

```
class Foo < AR
  has_many :taggings
  has_many :tags, :through => :taggings
end

class Bar < AR
  has_many :taggings
  has_many :tags, :through => :taggings
end

class Tagging < AR
  belongs_to :tag
  belongs_to :taggable, :polymorphic => true
  belongs_to :user # etc
end

class Tag < AR
  has_many :taggings
  has_many :taggables, :through => :taggings
end

Tag.first.taggables # => [Bar:43, Foo:52, Foo:59, Bar:59, Foo:123, ...] 
```

特别是，我*不想*指定`Tag.foo_taggables`,`Tag.bar_taggables`等 - 这是相关问题中提到的 :source/:source_type 方法，它很糟糕。

我希望它能够与一组不同的对象正常工作。是的，我意识到它们不会都具有相同的属性。那应该没问题（我应该能够只依赖所有可标记的接口共享的任何接口，而不关心我正在处理哪种接口）*。*

特别是，例如 tag.taggable_ids 可能必须是一个 id/type 元组数组，而不仅仅是一个 int ids 数组。

我在这里使用标签作为示例——我的实际问题有不同的场景，但多态 has_many :through 的基本问题相同。

在 Rails 2 中，有一个插件 has_many_polymorphs 可以实现这一点，但它已经失效了。[Kronn 的叉子](https://github.com/kronn/has_many_polymorphs/tree)似乎不起作用。在 Rails 3 中是否有一种有效的方法来获得它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T03:23:39.617

如果您不需要，使用或任何类似的东西`#build`急切加载它，那么您可以使用简单的方法而不是关联：`.include`

```
class Tag < AR
  has_many :taggings

  def taggables
    taggings.includes(:taggables).flat_map(&:taggables).uniq
  end
end 
```

# java - 如何访问 JPA Select 语句中的类字段？

> ID：12756308
> 
> 赞同：1
> 
> 时间：2012-10-06T03:00:42.517
> 
> 标签：java, jpa

我正在尝试按照[使用 Google App Engine 的地理空间查询中的描述构建 JPA 查询](https://developers.google.com/maps/articles/geospatial)

```
 Query query = em.createQuery("SELECT id, ( 6371 * acos( cos( radians(:lat_t/1E6)) ) * cos( radians( x.m_Latitude/1E6) ) ) * cos( radians( x.m_Longitude/1E6) ) - radians(:lng_t/1E6)) )  + sin( radians(:lat_t/1E6)) ) * sin( radians( x.m_Latitude/1E6) ) ) ) ) AS distance " +
            "FROM ProfileEntity x" +
            "HAVING distance < 10", ProfileEntity.class); 
```

但我得到：

```
Cannot find type of (part of) x.m_Latitude since symbol has no type; implicit variable?
org.datanucleus.exceptions.NucleusUserException: Cannot find type of (part of) x.m_Latitude since symbol has no type; implicit variable? 
```

我想我没有正确访问作为 ProfileEntity 中的字段的 m_Latitude。

我该怎么做？

我也不确定什么是“id”perpeas，有什么想法吗？

# php - mySQL 错误：您的 SQL 语法有错误 (ENGINE=MyISAM)

> ID：12756309
> 
> 赞同：1
> 
> 时间：2012-10-06T03:00:49.680
> 
> 标签：php, mysql

第一次遇到这样的错误，我意识到问题类似于这个问题>[错误＃1064 in mysql](https://stackoverflow.com/questions/9680349/error-1064-in-mysql)所以我将`TYPE=MyISAM`我的代码更改为`ENGINE=MyISAM`.

但是即使在更改之后，我也遇到了类似的错误。它说，

`mySQL error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(14), PRIMARY KEY (id) ) ENGINE=M' at line 7`.

我认为更改为`ENGINE=MyISAM`可以修复错误，但事实并非如此。我应该怎么办？

这是我的代码：

```
 $queries[] = "CREATE TABLE IF NOT EXISTS {$prefix}conversationlog (
                    id int(11) NOT NULL auto_increment,
                    input text default '',
                    response text default '',
                    thatresponse text default '',
                    uid varchar(255) default NULL,
                    enteredtime timestamp(14),
                    PRIMARY KEY  (id)
                ) ENGINE=MyISAM"; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-06T03:05:02.493

错误在`(14)`，而不是`ENGINE=MyISAM`。`TIMESTAMP`类型没有大小；它总是时间戳大小的。

# facebook - 我可以避免“邀请您的 Facebook 好友”弹出窗口在我的网站上被阻止吗？

> ID：12756313
> 
> 赞同：1
> 
> 时间：2012-10-06T03:01:34.400
> 
> 标签：facebook, invite

我可以选择在我的网站上邀请 Facebook 朋友，我使用下面给出的代码。但问题是它会在弹出窗口中打开，而 chrome 和 firefox 确实会阻止弹出窗口。我怎样才能让它出现在新的标签或窗口中？或者有什么办法让我的弹出窗口不会被阻止？

```
<html>
   <head>
   <title>my website</title>
   </head>
   <body>
   <div id="fb-root"></div>
   <script src="http://connect.facebook.net/en_US/all.js">
   </script>
   <script>
     FB.init({ 
       appId:'xxxxxxxxxxxxxxx', cookie:true, 
       status:true, xfbml:true 
     });

     FB.ui({ method: 'apprequests', 
       message: 'Take a look at this new website.'});
   </script>
   </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T03:24:22.223

你基本上有两个选择；

1.  在 mouseclick 事件上打开弹出窗口（因为这些不会被浏览器阻止），或者

2.  不要使用真正的弹出窗口，而是使用一些很酷的 DHTML 小部件，例如[http://thickbox.net/](http://thickbox.net/)

# cocos2d-iphone - iad失败ios6

> ID：12756319
> 
> 赞同：0
> 
> 时间：2012-10-06T03:02:38.700
> 
> 标签：cocos2d-iphone, ios6, admob, iad

我在cocos2d中做了我的应用，加了广告iad和admob，但是升级到ios6，当我点击广告，然后返回应用和修改视图是垂直的，完全扭曲了游戏，放错了图片。这是怎么回事？他们对 ios6 做了什么来停止工作这么多？'最后你能解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T16:01:28.430

我在 iOS6 中也遇到了同样的问题，cocos2D 游戏与 admob。最后，我们通过使用来自 admob 站点的新 admob sdk 解决了这个问题。

这是新的 iOS6 [admob sdk](https://developers.google.com/mobile-ads-sdk/download#downloadios)。

# sql-server-2005 - SQL Server 2005 货币格式

> ID：12756320
> 
> 赞同：0
> 
> 时间：2012-10-06T03:02:42.643
> 
> 标签：sql-server-2005

我一直在使用 SQL Server 2005，我需要将一些列以`Money`格式存储在数据库中。

但是 SQL Server 像这样存储它们 --> `0000.0000`，但我只想要小数点后 2 位数字 ---> `0000.00`

我必须在程序中控制它还是有办法在 SQL Server 2005 中更改这种格式？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T03:27:42.147

我通常会在前端做这些格式化的东西。但是，如果您仍然必须在 DB 层本身内执行此操作，请使用 ROUND 函数。

```
SELECT CAST(ROUND(1234.1234, 2) AS MONEY) 
```

还建议您查看Aaron Bertrand 撰写的**Money & Decimal 帖子之间的性能存储比较：** [https ://sqlblog.org/2008/04/27/performance-storage-comparisons-money-vs-decimal](https://sqlblog.org/2008/04/27/performance-storage-comparisons-money-vs-decimal)

**Money Vs Decimal Vs Float 决策流程图（摘自 SQLCAT.com）：**

![金钱 vs. 十进制 vs. 浮点数决策流程图摘自 SQLCat.com](../Images/c0824f2ec09ba64e3eb834929c31765c.png) **资料来源：** [http ://sqlcat.com/sqlcat/b/technicalnotes/archive/2008/09/25/the-many-benefits-of-money-data-type.aspx](http://sqlcat.com/sqlcat/b/technicalnotes/archive/2008/09/25/the-many-benefits-of-money-data-type.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T03:20:47.923

使用`Round()`功能。返回一个数值，四舍五入到指定的长度或精度。更多[在这里。](http://msdn.microsoft.com/en-us/library/ms175003.aspx)

```
Round(value,2,1) 
```

第二个参数指定精度为小数点后两位。

值为 1 的第三个参数指定截断而不是舍入。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-07T09:27:41.990

**试试这个它适用于 SQL Server 2008 及更低版本（2012 已经有一个可以使用的 FORMAT() 函数）**

这仅适用于数据类型 Money 和 SmallMoney

```
declare @v money -- or smallmoney
set @v = 1000.0123
select convert(varchar(25), @v, 0)
select convert(varchar(25), @v, 1)
select convert(varchar(25), @v, 2)
select convert(varchar(25), @v, 126)

select '$' + convert(varchar(25), @v, 0)
select '$' + convert(varchar(25), @v, 1)
select '$' + convert(varchar(25), @v, 2)
select '$' + convert(varchar(25), @v, 126) 
```

希望这有帮助！

# excel - 我似乎无法解决 Excel 中的 IF() 误报

> ID：12756323
> 
> 赞同：-2
> 
> 时间：2012-10-06T03:04:04.550
> 
> 标签：excel, excel-formula

附上一张保龄球表，我一直在努力计算我的平均水平，以及我可能获得的任何“免费游戏奖励”，以及补丁等......

[https://dl.dropbox.com/u/3327208/excel/Bowling.xlsx](https://dl.dropbox.com/u/3327208/excel/Bowling.xlsx)

我在 S 列中得到误报。

![在此处输入图像描述](../Images/d1fe8cd62abdc55bc94a0654f0ccb940.png)

直到 S12，公式似乎都有效，在有空白的地方，它显示我超过 500。

公式为：

`=IF($E12>499,"X","")`

一些简单而甜蜜的东西，我想。

现在 $E12 里面有这个公式，我不明白为什么它会影响它：

`=IF(D12<>0,SUM($B12:$D12),"")`

我尝试使用 ISBLANK，但它似乎在我的脸上炸开了，没有显示任何东西。如果有人可以帮助我，将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T03:16:34.267

试试这个（在`E9`）：

```
=IF(ISNUMBER(E9),IF($E9>499,"X",""),"") 
```

这可能是类型比较问题，因此仅比较单元格实际上是数字的情况。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T03:28:41.907

一个更简单的选择

```
=IF(N($E12)>499,"X","") 
```

# c# - 在 Metro 应用程序中显示动画 GIF

> ID：12756324
> 
> 赞同：3
> 
> 时间：2012-10-06T03:04:24.363
> 
> 标签：c#, windows-8, microsoft-metro

在 Windows 8 的 Windows Store (Metro) 应用程序中是否有显示动画 gif 的控件？我将 C# 和 XAML 与数据绑定一起使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T03:29:32.267

Image 控件不支持动画 GIF。您将需要提取帧并在您自己的计时器上为它们设置动画。

您应该查看此链接，这可能会对您的问题有所帮助：

[http://advertboy.wordpress.com/2012/05/08/animated-gifs-in-xamlc/](http://advertboy.wordpress.com/2012/05/08/animated-gifs-in-xamlc/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-15T07:18:43.923

您不能在网格中显示动画 gif。**但是，您可以在webview**控制器中显示动画礼物。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T15:14:21.970

请注意：您可以使用 BitmapDecoder 类来读取 GIF 帧，创建故事板并为其设置动画。

我的博客上有一个 Windows 8 用户控件的示例：[http ://www.henrikbrinch.dk/Blog/2013/02/21/Windows-8---GIF-animations--the-RIGHT-way](http://www.henrikbrinch.dk/Blog/2013/02/21/Windows-8---GIF-animations--the-RIGHT-way)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-21T02:12:54.417

我设法在我的 Windows 8 Metro 应用程序中显示 gif，只需将 gif 转换为 jpeg，然后运行无限循环。

代码如下：

公共异步无效更新图像（）{

```
 await Task.Delay(300);

        var frame = this.Frame.CurrentSourcePageType.Name;

        if (frame != ("CURRENTFRAME")) return;
        if (count <= 4)
        {
            var img = (BitmapImage) Resources["bitmap" + count];
            imgTap.Source = img;
            UpdateLayout();
            count++;
            UpdateImage();
        }
        else
        {
            count = 1;
            UpdateImage();
        }
    } 
```

所以基本上我将转换后的 jpeg 保存在我的 page.resources 中，然后将它们命名为 bitmap1,bitmap2 .. etc 。我正在检查当前帧是否是必须显示 gif 的帧，否则 gif 代码会一直在后台运行，这会浪费内存和 CPU。只需在任何 Loaded 方法上调用此方法，它应该可以正常运行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-06T08:29:35.987

这可能有点矫枉过正，但您可以尝试使用 WebView 来显示 GIF。然而，WebView 控件引入了它自己的一组令人头疼的问题，因此除非您愿意处理所说的头疼问题，否则我建议您避免使用它，除非您绝对必须使用它。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-06T07:37:44.993

如果我是对的，那么 Silverlight 不支持 GIF 并且 Metro Apps 基于 Silverlight 平台。因此，本机不包含对 GIF 图像的支持。但是，您可以使用 3rd 方控件，例如[http://www.componentone.com/SuperProducts/ImageSilverlight/](http://www.componentone.com/SuperProducts/ImageSilverlight/)。

# qr-code - 二维码分析 API

> ID：12756328
> 
> 赞同：1
> 
> 时间：2012-10-06T03:05:01.603
> 
> 标签：qr-code, web-analytics

以下是否有好的 API 或其他可能的解决方案？

我正在尝试使用 QR 码跟踪俱乐部会员资格和离散的“签到”事件/活动。首先，我生成一个带有嵌入 URL 的二维码，指向包含会员信息的网页（带有缩短链接的随机/模糊 URL），并将该二维码打印在标签上并将其附加到会员卡上。然后我用 Red Laser 或其他阅读器扫描 QR 码以访问缩短的 URL 和“隐藏”的会员信息。

我的问题是我有 100 多个（最终数千个）二维码要跟踪，所以我正在寻找一个简单的工具或 API 来管理所有这些晦涩的链接，并查看 Red Laser（或浏览器）访问它们的频率，如果有人设法发现任何这些模糊链接）。

我尝试了 Google Analytics，但无法获得我想要的“微调”控制级别。我真正想要的是能够将此信息（例如，会员联系信息、模糊链接、点击次数等）映射到类似 chartbeat.com 的格式。

感谢任何建议。

# silverlight - 您可以从 ChildWindow 以编程方式在 ControlTemplate 中设置属性吗？

> ID：12756332
> 
> 赞同：0
> 
> 时间：2012-10-06T03:05:44.943
> 
> 标签：silverlight, binding

我正在开发一个 Silverlight 应用程序，该应用程序具有为应用程序中不同类型的子窗口定义样式的资源文件。`<Style>`包含`<ControlTemplate>`具有各种内容的标记。有没有办法设置`<ControlTemplate>`子窗口类中定义的控件的属性之一？

例如，想象在资源文件中我有如下标记：

```
<Style x:Key="MyChildWindowStyle" TargetType="sdk:ChildWindow">
  <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="sdk:ChildWindow">
           <Grid x:Name="Root">
              ...
              <Image Source="/Assets/image.png" />
              ...
           </Grid>
        </ContentTemplate>
   </Setter>
</Style> 
```

现在假设我有许多配置为使用这种样式的子窗口。我想做的是从那些子窗口中的代码能够以编程方式更改图像的`Source`.

这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T16:41:25.247

在您的资源中，您可以这样做：

```
<BitmapImage x:Key="MyImage" Source="/Assets/image.png"/>

<Style x:Key="MyChildWindowStyle" TargetType="sdk:ChildWindow">
    ...
    <Image Source="{DynamicResource MyImage}" />
    ...
</Style> 
```

然后在您的子窗口的代码隐藏中，您可以执行以下操作：

```
Resources["MyImage"] = new BitmapImage(new Uri("/Assets/other-image.png")); 
```

但是，如果您的子窗口类在另一个程序集中，您应该编写 uri 有点不同：

```
Resources["MyImage"] = new BitmapImage(new Uri("pack://application:,,,/MyOtherAssemblyShortName;component/Assets/other-image.png")); 
```

您可以查看[msdn 页面](http://msdn.microsoft.com/en-us/library/aa970069.aspx)以获取包 uri 格式。

但我建议您使用 MVVM 模式，以便在绑定、样式等方面充分利用 WPF。当您拥有视图模型而不是代码隐藏时，这些事情会变得更简单。您可能想查看相关的[msdn 页面](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)、[代码项目示例](http://www.codeproject.com/Articles/278901/MVVM-Pattern-Made-Simple)、[工具包](http://mvvmlight.codeplex.com/)或为 MVVM 设计[的验证机制。](http://mvvmvalidation.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T23:40:41.323

@zahir 的回答为我指明了正确的方向，但要让它在 Silverlight 中工作，我必须执行以下操作：

首先，我将`<BitmapImage>`标记添加到我的资源文件中，使用`UriSource`属性指定默认值。

```
<BitmapImage x:Key="MyImage" UriSource="../Assets/DefaultImage.png" /> 
```

接下来，我`<ControlTemplate>`像这样引用它：

```
<Image ... Source="{StaticResource MyImage}"/> 
```

然后，在我的代码隐藏类中，我能够`UriSource`像这样修改属性：

```
BitmapImage img = (Application.Current.Resources["MyImage"] as BitmapImage);
if (img != null)
    img.UriSource = "../Assets/NewImage.png"; 
```

当然，准确的值`UriSource`取决于您处理图像资产的方式、它们的位置等。

# c - 快速素数分解算法

> ID：12756335
> 
> 赞同：8
> 
> 时间：2012-10-06T03:06:07.683
> 
> 标签：c, algorithm, prime-factoring

我正在用 C 编写一个代码，它返回一个正整数可以表示为两个正整数的完全平方和的次数。

```
R(n) is the number of couples (x,y) such that x² + y² = n where x, y, n are all 
non negative integers. 
```

要计算 R(n)，我需要首先找到 n 的素数分解。

问题是我已经尝试了很多可以在 C 上使用的素数分解算法，但我需要我的代码尽可能快，所以如果有人能给我他/她认为的内容，我将不胜感激计算一个数的素数分解的最快算法`2147483742.`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-06T12:19:14.917

多么奇怪的限制；2147483742 = 2^31 + 94。

正如其他人所指出的那样，对于一个数字来说，这个小试除以素数很可能足够快。如果不是，您可以尝试 Pollard 的 rho 方法：

```
/* WARNING! UNTESTED CODE! */
long rho(n, c) {
    long t = 2;
    long h = 2;
    long d = 1;

    while (d == 1) {
        t = (t*t + c) % n;
        h = (h*h + c) % n;
        h = (h*h + c) % n;
        d = gcd(t-h, n); }

    if (d == n)
        return rho(n, c+1);
    return d;
} 
```

调用 as ，此函数返回*n*`rho(n,1)`的（可能是复合的）因子；如果要查找*n*的所有因子，请将其放入循环中并重复调用它。您还需要一个素数检查器；对于您的极限，基于 2、7 和 61 的 Rabin-Miller 测试被证明是准确且相当快的。[您可以在我的博客](http://programmingpraxis.com/essays)上阅读有关使用素数编程的更多信息。

 **但无论如何，鉴于如此小的限制，我认为你最好使用素数的试除法。其他任何东西都可能渐近更快，但实际上更慢。

**编辑：**这个答案最近收到了几个赞成票，所以我添加了一个简单的程序，用 2、3、5 轮进行[轮子分解。](https://en.wikipedia.org/wiki/Wheel_factorization)称为`wheel(n)`，该程序按升序打印*n*的因子。

```
long wheel(long n) {
    long ws[] = {1,2,2,4,2,4,2,4,6,2,6};
    long f = 2; int w = 0;

    while (f * f <= n) {
        if (n % f == 0) {
            printf("%ld\n", f);
            n /= f;
        } else {
            f += ws[w];
            w = (w == 10) ? 3 : (w+1);
        }
    }
    printf("%ld\n", n);

    return 0;
} 
```

[我在我的博客上](https://programmingpraxis.com/2009/05/08/wheel-factorization/)讨论了车轮分解；说明比较长，这里不再赘述。对于适合 a 的整数，`long`您不太可能显着改善`wheel`上面给出的函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-15T05:14:30.923

有一种快速减少候选人数量的方法。这个例程尝试 2，然后是 3，然后是所有不能被 3 整除的奇数。

```
long mediumFactor(n)
{
    if ((n % 2) == 0) return 2;
    if ((n % 3) == 0) return 3;
    try = 5;
    inc = 2;
    lim = sqrt(n);
    while (try <= lim)
    {
       if ((n % try) == 0) return try;
       try += inc;
       inc = 6 - inc;  // flip from 2 -> 4 -> 2
    }
    return 1;  // n is prime
} 
```

inc 在 2 和 4 之间的交替被仔细对齐，以便它跳过所有偶数和可被 3 整除的数字。对于这种情况：5 (+2) 7 (+4) 11 (+2) 13 (+4) 17

试验在 sqrt(n) 处停止，因为至少有一个因子必须等于或低于平方根。（如果两个因子都 > sqrt(n)，那么因子的乘积将大于 n。）

尝试次数为 sqrt(m)/3，其中 m 是您的系列中可能的最高数字。对于 2147483647 的限制，在最坏情况下（对于 2147483647 附近的素数）产生最多 15,448 个除法，包括 2 和 3 测试。

如果这个数字是复合的，那么分区的总数通常会少得多，而且很少会更多；甚至考虑到重复调用例程以获取所有因素。**

# c# - 将 XML 导入到对象列表

> ID：12756337
> 
> 赞同：1
> 
> 时间：2012-10-06T03:06:42.710
> 
> 标签：c#, xml, list, object

我目前在尝试将我的 XML 元素导入书籍类型列表时遇到问题。我在这段代码中收到“未设置对象实例的对象引用”错误：

```
mybook.Title = p.Element("title").Value; 
```

我是否不正确地引用了 XML 元素，还是其他一些简单的问题？我已经通过无尽的解决方案和主题连续搜索了几个小时，但无法克服最后一个障碍。

为简单起见，以下是一个文件中的代码：

```
class Program
{
    static void Main(string[] args)
    {
        string appPath = Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location);
        FileInfo fi = new FileInfo(Path.Combine(appPath, "Books.xml"));

        Console.WriteLine(GetBooks());
    }

    public class Books
    {
        public string ID { get; set; }
        public string Name { get; set; }
        public string Title { get; set; }
        public decimal Price { get; set; }
        public DateTime PublishDate { get; set; }
        public string Description { get; set; }
    }

    public static List<Books> GetBooks()
    {
        XDocument doc = LinqToXml.XmlHelper.GetPlantDocument();
        var xmlBooks = doc.Descendants("catalog");
        List<Books> someBooks = new List<Books>();

        foreach (var p in xmlBooks)
        {
            Books mybook = new Books();
            mybook.Title = p.Element("title").Value;
            someBooks.Add(mybook);
        }
        return someBooks;
    }
} 
```

这是 XML 文件的内容：

[http://pastebin.com/ZVmWqRT1](http://pastebin.com/ZVmWqRT1)

请注意，这确实是一个家庭作业项目。我不一定要寻找直接答案，因为我是一两个巨大的提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T03:19:40.133

```
XElement doc=XElement.Load("c:\\hello.xml");

List<Books> lstBooks=doc.Elements("book").Select(x=>
new Books
{
        ID=x.Attribute("id").Value,
        Name=x.Element("author").Value,
        Title =x.Element("title").Value,
        Price =decimal.Parse(x.Element("price").Value),
        PublishDate =Convert.ToDateTime(x.Element("publish_date").Value),
        Description=x.Element("description").Value
}
).ToList(); 

//lstBooks now contain all the books
foreach(Books b in lstBooks)
{
         b.ID;
         b.Name;...........
} 
```

# java - 我的java没有错误，但没有运行

> ID：12756351
> 
> 赞同：0
> 
> 时间：2012-10-06T03:11:05.970
> 
> 标签：java, jdbc

我是这种 java 语言的新手，所以我仍然很难弄清楚，虽然我没有错误，但仍然没有运行。帮我弄清楚这件事。我发布了与此相同的程序，尽管问题早在我已经弄清楚了。

```
public Connection dbConnection() throws Exception
{
    Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
    String filename =
        "C:/Documents and Settings/gebs/Desktop/Database1.mdb";// fileplace
    String database =
        "jdbc:odbc:Driver={Microsoft Access Driver (*.mdb)};DBQ=";// connection driver
    database += filename.trim() + ";DriverID=22;READONLY=true}";
    return DriverManager.getConnection(database, "", "");

    try
    {
        Connection con = dbConnection();

        String lname = this.jTextField1.getText();
        String fname = this.jTextField2.getText();
        String mname = this.jTextField3.getText();
        String address = this.jTextField4.getText();
        String birthday =
            (String) this.jComboBox1.getSelectedItem()
                + this.jTextField5.getText() + this.jTextField6.getText();
        String gender = (String) this.jComboBox2.getSelectedItem();
        String age = this.jTextField7.getText();
        String contactno = this.jTextField8.getText();
        String contactperson = this.jTextField9.getText();
        String department = this.jTextField11.getText();
        String position = this.jTextField12.getText();

        // to insert to database
        String query =
            "INSERT INTO Personal_Category "
                + "(Last_Name,First_Name,Middle_Initial,Address, "
                + "Birthday,Gender,Age,Contact_No,Contact_Person,"
                + "Department,Position) "
                + "VALUES (?,?,?,?,?,?,?,?,?,?,?,)";

        PreparedStatement pre;
        pre = con.prepareStatement(query);
        pre.setString(1, lname);
        pre.setString(2, fname);
        pre.setString(3, mname);
        pre.setString(4, address);
        pre.setString(5, birthday);
        pre.setString(6, gender);
        pre.setString(7, age);
        pre.setString(8, contactno);
        pre.setString(9, contactperson);
        pre.setString(10, department);
        pre.setString(11, position);
        pre.execute();// execute
        con.close();
    }
    catch (Exception e)
    {
        System.out.println(e);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T03:16:52.927

问题是你的`return`陈述：

```
return DriverManager.getConnection(database, "", ""); 
```

由于该方法在此时终止（即返回），因此无法到达此行之后的任何内容。所以编译器抱怨。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T03:23:37.590

假设这是您的整个代码，我在您的代码中看不到任何主要方法语句。您需要在某处的某个主要方法中创建此类的对象。

# mysql - Mysql 值不起作用

> ID：12756358
> 
> 赞同：-2
> 
> 时间：2012-10-06T03:11:59.773
> 
> 标签：mysql, database

我有一个等级来确定用户级别（例如等级 1 = 注册，等级 3 = 管理员），并且在下面的脚本中一切正常。

```
<?php
session_start();
require('../../config.php');
$qry=("SELECT `rank`, `uname` FROM users");
$result=mysql_query($qry);
$row = mysql_fetch_assoc($result);
$rank = $row['rank'];
$user = $_SESSION['user'];
$logged = $_SESSION['loggedin'];
  if ($logged == true) {
   if ($rank >= 3) {
    echo "Succesful, $user.<br />
      <form method='POST' action='delete.php'>
      <select><option>Please select</option>";
      while ($row = mysql_fetch_assoc($result)) {
            $users = $row['uname'];
            $lol = ucwords($users);
           }
       echo "<option>$lol</option>";
       echo "</select>
    </form>";
   } else {
  echo "Your not an admin.";
  }
 } else {
echo "Please login.";
}

?> 
```

但是，一旦我向数据库中添加了一个新用户（数据库中有 2 行），它就会显示“您不是管理员”。

请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T03:16:22.767

不应该添加 where 条件来指定哪个用户？喜欢使用用户名？

```
$qry=("SELECT `rank`, `uname` FROM users WHERE uid = $uid"); 
```

# java - 如何制作Java Set？

> ID：12756360
> 
> 赞同：-7
> 
> 时间：2012-10-06T03:12:06.130
> 
> 标签：java, collections, set

谁能帮我？例子

*   一个{1,2,3}
*   乙{1,4,5}

代码片段：

```
a.intersect(b).print()
// Result 1 . twin between two object

a.merge(b).print()
// Result 1,2,3,4,5 
```

如果我在下面写代码是否有效？如果没有，我必须修复哪个部分？

```
public static void main(String[] args) {
    // TODO code application logic here
   Set<Integer> a = new TreeSet<Integer>();
   a.add(1);
   a.add(2);
   a.add(6);
   a.remove(2);
   a.add(1); //gak berpengaruh karena sudah ada yang 1 sebelumnya
   //mengapa begituu ? karena et adalah collection yang tidak dapat memiliki elemen kembar.
   System.out.println("A = " + a);

   Set<Integer> b = new TreeSet<Integer>();
   b.add(2);
   b.add(6);
   b.add(1);
   System.out.println("B = " + b); //hasilnya 1,2,6.
   //loh?? kok bisa ? krn sy pake TreeSet, jadi udah terurut.

   b.retainAll(a); //ini rumus intersect XD
   for (Integer i: b)
   {
       System.out.print(i);
   }
} 
```

}

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-10-06T03:37:58.450

像这样：

```
import java.util.*;
Set<Integer> a = new HashSet<Integer>();
a.add( 1);
a.add( 2);
a.add( 3); 
```

或从 Array/ 或多个文字添加；包装到一个列表，首先。

```
Integer[] array = new Integer[]{ 1, 4, 5};
Set<Integer> b = new HashSet<Integer>();
b.addAll( Arrays.asList( b));         // from an array variable
b.addAll( Arrays.asList( 8, 9, 10));  // from literals 
```

要获得交叉点：

```
// copies all from A;  then removes those not in B.
Set<Integer> r = new HashSet( a);
r.retainAll( b);
// and print;   r.toString() implied.
System.out.println("A intersect B="+r); 
```

希望这个答案有帮助。为它投票！

# itextsharp - itextsharp 进程无法访问文件

> ID：12756362
> 
> 赞同：1
> 
> 时间：2012-10-06T03:12:29.667
> 
> 标签：itextsharp

我需要一些认真的帮助。我遇到了麻烦，如果能得到任何帮助，我将不胜感激。我在网上搜索了几个小时，结果空手而归。我做了一个在目录中进行递归并将所有图像转换为 PDF 的项目。我正在使用 itextsharp 和 pdfsharp （如果没有彼此，它们似乎无法正常工作）。无论如何，该项目运行完美，直到 Visual Studio 抱怨我上次从 VS 修复问题时了解到的程序集，它会破坏它们。所以，我忽略了它。在使用 [在此处插入五颜六色的文字] Beta 测试的电话时，他把我搞糊涂了，我最终点击了 VS 正在抛出的警告。当我点击它时，我开始收到以下错误： 1）转换 pdf 文件时，它只转换目录中任何文件的前 15 个字节。2) 当 PDF 已经存在时，它会在标题中出现异常并出错。这是我正在使用的代码，它运行良好：

WebException 未处理（**这不是 WEB APP**）进程无法访问文件“filepath\andname.pdf”，因为它正被另一个进程使用。

在此之前，当我在应用程序的 app.config 部分加载原始代码时，我会收到此错误：

FileLoadException 未处理 无法加载文件或程序集“itextsharp，版本=5.3.2.0，文化=中性，PublicKeyToken=8354ae6d2174ddca”或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）

在我勒死这家伙并在黑市上卖掉他的肝脏之前，谁能帮帮我？这真是令人沮丧。我将不胜感激。

./x86

**按照标题中在访问时轰炸的 app.config 文件的顺序，并且只向应用程序添加 15 个字节：**

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <configSections>
    <sectionGroup name="userSettings" type="System.Configuration.UserSettingsGroup, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" >
      <section name="TAMI.My.MySettings" type="System.Configuration.ClientSettingsSection, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" allowExeDefinition="MachineToLocalUser" requirePermission="false" />
    </sectionGroup>
  </configSections>
  <system.diagnostics>
  </system.diagnostics>
  <userSettings>
    <TAMI.My.MySettings>
      <setting name="scanner" serializeAs="String">
        <value />
      </setting>
      <setting name="authenticated_user" serializeAs="String">
        <value />
      </setting>
    </TAMI.My.MySettings>
  </userSettings>
</configuration> 
```

**错误版本的程序集**

```
<?xml version="1.0"?>
<configuration>
  <configSections>
    <sectionGroup name="userSettings" type="System.Configuration.UserSettingsGroup, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <section name="TAMI.My.MySettings" type="System.Configuration.ClientSettingsSection, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" allowExeDefinition="MachineToLocalUser" requirePermission="false"/>
    </sectionGroup>
  </configSections>
  <system.diagnostics>
    <sources>
      <!-- This section defines the logging configuration for My.Application.Log -->
      <source name="DefaultSource" switchName="DefaultSwitch">
        <listeners>
          <add name="FileLog"/>
          <!-- Uncomment the below section to write to the Application Event Log -->
          <!--<add name="EventLog"/>-->
        </listeners>
      </source>
    </sources>
    <switches>
      <add name="DefaultSwitch" value="Information"/>
    </switches>
    <sharedListeners>
      <add name="FileLog" type="Microsoft.VisualBasic.Logging.FileLogTraceListener, Microsoft.VisualBasic, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a, processorArchitecture=MSIL" initializeData="FileLogWriter"/>
      <!-- Uncomment the below section and replace APPLICATION_NAME with the name of your application to write to the Application Event Log -->
      <!--<add name="EventLog" type="System.Diagnostics.EventLogTraceListener" initializeData="APPLICATION_NAME"/> -->
    </sharedListeners>
  </system.diagnostics>
  <userSettings>
    <TAMI.My.MySettings>
      <setting name="scanner" serializeAs="String">
        <value/>
      </setting>
      <setting name="authenticated_user" serializeAs="String">
        <value/>
      </setting>
    </TAMI.My.MySettings>
  </userSettings>
    <runtime>
        <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
            <dependentAssembly>
                <assemblyIdentity name="itextsharp" publicKeyToken="8354AE6D2174DDCA" culture="neutral"/>
                <bindingRedirect oldVersion="0.0.0.0-5.3.2.0" newVersion="5.3.2.0"/>
            </dependentAssembly>
        </assemblyBinding>
    </runtime>
</configuration> 
```

**我一直在使用的代码**

```
 For b As Integer = 0 To lboxconv.Items.Count - 1
            Application.DoEvents()
            Dim extension = Microsoft.VisualBasic.Right(b, 3)
            Dim doc As New Document()
            Dim File_Type As String
            File_Type = Replace(lboxconv.Items(b), ".png", ".pdf", vbTextCompare)
            Dim writer As PdfWriter = PdfWriter.GetInstance(doc, New FileStream(File_Type, FileMode.Create))
            doc.Open()
            Dim imgpath As String = lboxconv.Items(b)
            Dim png As iTextSharp.text.Image = iTextSharp.text.Image.GetInstance(imgpath)
            png.ScaleToFit("500", "500")
            png.Alignment = Element.ALIGN_CENTER
            doc.Add(png)
            doc.Close()
        Next 
```

有人请帮忙！我很绝望，没有时间和答案。

# php - 可以为Doctrine ODM设置默认的ID策略吗？

> ID：12756363
> 
> 赞同：1
> 
> 时间：2012-10-06T03:12:42.673
> 
> 标签：php, mongodb, doctrine, odm

当使用 Doctrine ODM 为文档的 id 字段设置注释时，您可以指定与默认 MongoId 方法不同的密钥生成策略，如下所示：

```
/** @ODM\Document(collection="documents") */
class Document
{
    /**
    * @ODM\Id(strategy="UUID")
    */
    protected $id;
} 
```

这要求您为您设置的每个新文档映射指定此策略。是否可以更改整个应用程序的默认策略？也许通过连接级别的配置选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-12T11:50:04.197

遗产还不够吗？

```
use Doctrine\ODM\MongoDB\Mapping\Annotations as ODM;

/** @ODM\Document */
abstract class AbstractDocument
{
   /**
   * @ODM\Id(strategy="UUID")
   */
   protected $id;

   public function getId()
   {
      return $this->id;
   }
}

/** @ODM\Document(collection="MyDocument") */
class MyDocument extends AbstractDocument {}

/** @ODM\Document(collection="AnotherDocument") */
class AnotherDocument extends AbstractDocument {} 
```

那么你也能：

```
$myDocument = new MyDocument();
$odm->persist($myDocument);
$odm>flush();
$myDocument->getId(); 
```

# database - 在数据库代码点火器中增加值

> ID：12756364
> 
> 赞同：0
> 
> 时间：2012-10-06T03:13:26.903
> 
> 标签：database, codeigniter, radio-button

当用户在投票时选择它时，我试图增加数据库中一个选项的值。我没有收到任何错误，但数据库没有更新。我究竟做错了什么？

在我的控制器中：

```
public function vote($option_id)
{
    $this->load->helper('form');
    $this->load->library('form_validation');

    $this->form_validation->set_rules('options', 'required');

    if ($this->form_validation->run() === FALSE)
    {

        $this->load->helper('html');
        $data['content'] = $this->load->view('user/vote','', TRUE);
        $this->load->view('templates/master', $data);
    }
    else{

        $checkedoption = intval($_POST['options']);
        $optionid = $this->polls_model->get_option($option_id);
        $this->polls_model->set_votes($checkedoption, $option_id);
        $this->load->helper('html');
        $data['content'] = $this->load->view('user/success','', TRUE);
        $this->load->view('templates/master', $data);

    }

} 
```

在我的模型中，我有这样的功能：

```
//this gets the id of the option to vote on
    function get_option($option_id)
    {
        $query = $this->db->get_where('pollOption', array('option_id'=>$option_id));
        return $query->row_array();       
    }

// THis updates the vount_count column in the database:
        public function set_votes($checkedoption, $option_id)
        {

            $this->db->where('option_id', $checkedoption);
            $this->db->set('vote_count', 'vote_count+1', FALSE);
            $this->db->update('pollOption');

        } 
```

在我看来，我有这个：

```
$poll_id = $polls_item['id'];

$query = $this->db->get_where('pollOption', array('poll_id' => $poll_id));
$queryResult = $query->result_array();?>

<html>
    <head>

<script type="text/javascript" src="<?php echo base_url();?>js/jquery.js"></script>      
</head>

<body>
<?php echo form_open('user/vote/' .$poll_id); 

foreach ($queryResult as $row):?>

<input type="radio" name="options" value = "<?php echo $row['option_item'];?>" > <?php echo $row['option_item'];?> <br>

<?php endforeach;?>

<input type="submit" name="submit_vote" value="Vote">

<?php echo form_close(); ?> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T03:24:05.383

您是否尝试过手动运行查询？

那么，您是否尝试`echo $this->db->last_query();`过比较手动查询和 CodeIgniter 正在做什么？

或者，您可以选择值，将其分配给变量，使用 PHP 递增它，然后执行`$this->db->set('vote_count', $incremented_value);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T05:40:49.530

尝试改变

```
 $this->db->set('vote_count', 'vote_count+1', FALSE); 
```

至

```
 $this->db->set('vote_count = vote_count + 1'); 
```

# wcf - 通过 Silverlight 在 IIS 上重新启动 WCF 服务

> ID：12756366
> 
> 赞同：0
> 
> 时间：2012-10-06T03:13:51.303
> 
> 标签：wcf, silverlight

是否有可以从客户端调用的内置方法来重新启动 WCF 服务？我有一个静态构造函数，它在我测试我的应用程序时也会对我有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T03:33:55.447

不，这将是一个严重的安全漏洞，如果有人可以以某种方式从非管理员帐户重新启动您的服务（SL 客户端只是通过 HTTP 或 SL4 中的未经身份验证的 TCP 套接字将请求发送到服务）。

您应该能够通过回收应用程序的应用程序池来重新启动服务。触摸 web.config 应该可以解决问题（在记事本中打开文件，保存它，即使没有任何修改）。

# php - 使用参数在后台运行 PHP 代码

> ID：12756372
> 
> 赞同：2
> 
> 时间：2012-10-06T03:15:10.540
> 
> 标签：php

我有这个用户表单。用户将提交数据。然后使用该数据，我想将该数据发送到将在后台运行的 PHP 脚本。原因是脚本有很多睡眠等，我不想让用户等待。

所以我的问题的基础是：如何在后台运行 PHP 脚本，以及如何将参数（如 GET）传递给它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T03:18:28.410

像这样的东西会起作用

[http://gearman.org/index.php?id=manual:job_server](http://gearman.org/index.php?id=manual%3ajob_server)

但是，为什么你的剧本中有这么多睡眠？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T03:25:26.660

试试用AJAX，是异步的javascript和xml，有一个简单的例子：[http ://www.w3schools.com/php/php_ajax_intro.asp](http://www.w3schools.com/php/php_ajax_intro.asp)

在 AJAX 中，页面不会刷新，结果由 JSON 或 XML 发送。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T03:51:54.407

您可以使用`exec`来运行您的后台脚本。使用类似的东西

```
exec('php -f bg_script.php -- '.escapeshellarg($param1).' '.escapeshellarg($param2).' > /dev/null & '); 
```

在您的脚本 bg.php 中，您可以从数组中获取传递的参数`$argv`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-06T05:37:52.300

超时怎么办`file_get_contents()`。

```
if (isset($_GET['async'])) {

    for( $i = 0 ; $i <= 5 ; $i++ )
    {
        append_log(date('l jS \of F Y h:i:s A') . ': background process. parameter ' . $i . ': ' . $_GET[$i] . '<br />');
        sleep(1);
    }

    exit;
}

header( 'Content-type: text/html; charset=utf-8' );
$parameters = array('async' => true, 1 => 'one', 2 => 'two', 3 => 'three', 4 => 'four', 5 => 'five');
pseudo_async($parameters);  // this runs this php script in the backbround

echo 'Begin ...<br />';
for( $i = 0 ; $i <= 5 ; $i++ )
{
    output_buffer('appended to the log <br />');
    append_log(date('l jS \of F Y h:i:s A') . ': main process.<br />');
    sleep(1);
}
echo 'End ...<br />';

function pseudo_async($query) {

    $timeout = array('http' => array('timeout' => 0.01));
    $context = stream_context_create($timeout);

    @file_get_contents(selfurl() . '?' . http_build_query($query), false, $context);
}

function append_log($msg) {
    $file = __DIR__ . '/log.html';
    file_put_contents($file, $msg, FILE_APPEND);
}

function selfurl() {
    $pageURL = (@$_SERVER["HTTPS"] == "on") ? "https://" : "http://";
    if ($_SERVER["SERVER_PORT"] != "80")
        $pageURL .= $_SERVER["SERVER_NAME"].":".$_SERVER["SERVER_PORT"].$_SERVER["REQUEST_URI"];
    else 
        $pageURL .= $_SERVER["SERVER_NAME"].$_SERVER["REQUEST_URI"];
    return $pageURL;
}

function output_buffer($str) {
    echo $str;
    flush();
    ob_flush(); 
} 
```

# node.js - NodeJS：提供动态文件

> ID：12756381
> 
> 赞同：3
> 
> 时间：2012-10-06T03:17:19.067
> 
> 标签：node.js, express

我已经习惯了 PHP，其中代码放在一个文件中，每次加载时都会执行。

使用 NodeJS，我需要使用 HTML 文件，但需要在文件中完成计算。一个解决方案是将整个文件的 HTML 内容放入运行 HTTP 服务器的文件中，但我希望将它们放在文件中。

我正在使用 NodeJS 和 Express。这是怎么做到的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T08:05:12.353

如果你使用 express 并且想要渲染 HTML 文件，你应该使用`ejs`你的模板引擎。以下是您从头开始的方法：

开始一个新项目`express -e`

告诉`express`用于`ejs`渲染 HTML 文件：

```
app.configure(function(){
  // ... 
  app.set('views', __dirname + '/views');
  // app.set('view engine', 'ejs');
  app.engine('html', require('ejs').renderFile);
  // ...
}); 
```

创建路线：

```
app.get("/", function(req, res) {
  res.render("your.html", {
    title: "This is plain HTML rendered with ejs"
  })
}) 
```

最后是文件夹`your.html`中的`views`文件

```
<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
  </head>
  <body>
    <h1><%= title %></h1>
    <p>Welcome to <%= title %></p>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T04:59:39.887

听起来您想使用模板，这是一个示例：

[https://github.com/chovy/express-template-demo](https://github.com/chovy/express-template-demo)

# javascript - Piecemaker flash 元素无法使用与演示几乎相同的配置

> ID：12756382
> 
> 赞同：0
> 
> 时间：2012-10-06T03:17:24.727
> 
> 标签：javascript, html, flash

我的网站上有一个工作版本的 Piecemaker flash 滑块。修改主题后，滑块停止工作。试图找出问题，我已经设置了一个几乎[与演示一样的](http://www.modularweb.net/showcase/piecemaker2/)环境，但没有成功。

我检查了所有链接是否正常工作，但我无法让幻灯片再次工作。

这是链接：[http ://www.aquaeliteevents.com/wordpress/?page_id=1430](http://www.aquaeliteevents.com/wordpress/?page_id=1430)

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T14:22:53.417

原来 XML 引用了来自不同子域的资源，一旦我将 wordpress 配置为出现在同一个子域上，裁缝师就会再次工作。

# php - XPath 不正确的查询路径

> ID：12756385
> 
> 赞同：1
> 
> 时间：2012-10-06T03:18:26.900
> 
> 标签：php, xml, xpath

> **可能重复：**
> [如果元素具有 xmlns 属性，则 Xpath 失败](https://stackoverflow.com/questions/5285570/xpath-fails-if-an-element-has-a-a-xmlns-attribute)

我一直在尝试从以下 xml 中提取字符串，但没有成功 [http://chris.photobooks.com/xml/default.htm?state=8T](http://chris.photobooks.com/xml/default.htm?state=8T)

我正在尝试获取一本书的 ASIN 号，我已经尝试过

```
$xpath->query('//MarketplaceASIN/ASIN')->item(0)->nodeValue; 
```

和

```
$xpath->query('/GetMatchingProductResponse/GetMatchingProductResult[1]/Product/Identifiers/MarketplaceASIN/ASIN')->item(0)->nodeValue; 
```

但似乎都不起作用，我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T03:41:16.707

该文档中的元素绑定到命名空间`http://mws.amazonservices.com/schema/Products/2011-10-01`。

您可能错过了它，因为它不使用命名空间前缀并且`xmlns="http://mws.amazonservices.com/schema/Products/2011-10-01"`看起来像一个属性，但命名空间属性很特殊。

所有后代元素都继承该命名空间。您需要使用命名空间前缀注册命名空间并调整 XPath：

```
$rootNamespace = $xml->lookupNamespaceUri($xml->namespaceURI); 
$xpath->registerNamespace('a', $rootNamespace); 
$elementList = $xpath->query('//a:MarketplaceASIN/a:ASIN'); 
```

* * *

或者，您可以使用更通用的 XPath 来匹配元素并使用谓词过滤器来匹配`local-name()`and `namespace-uri()`：

```
//*[local-name()='MarketplaceASIN' and namespace-uri()='http://mws.amazonservices.com/schema/Products/2011-10-01']/*[local-name()='ASIN' and namespace-uri()='http://mws.amazonservices.com/schema/Products/2011-10-01'] 
```

# java - JComboBox 到字符串

> ID：12756388
> 
> 赞同：1
> 
> 时间：2012-10-06T03:18:36.887
> 
> 标签：java, swing, combobox, jcombobox

我有一个名称字符串数组，然后将其添加到可编辑的 JComboBox 中。

用户可以从选项中选择他/她的名字，或者如果不在选项中，则只输入他/她的名字。

如何将用户输入放入新的字符串变量中？

```
 String [] chooseName = { Mark, John, Allison, Jessica };
   JComboBox combo = new JComboBox (chooseName);
   combo.setEditable(true);

   String chosenName =  /*  how do i place what the user inputed here? */ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T03:34:35.767

我会在组合框中添加一个动作监听器。通过在同一块中执行此操作，它只会获取默认值（我相信）。通过这种方式，我们确保我们在选择后获取值。

```
String [] chooseName = { Mark, John, Allison, Jessica };
final JComboBox combo = new JComboBox (chooseName);
combo.setEditable(true);
combo.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent e) {
        String chosenName =  (String) combo.getSelectedItem();
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T03:21:58.957

您可以使用：

`combo.getSelectedItem()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T03:41:51.390

这将帮助你..

```
combo.getSelectedItem(); 
```

有关更多参考，请点击此链接，它将对您有所帮助..

[http://www.roseindia.net/java/example/java/swing/ComboBox.shtml](http://www.roseindia.net/java/example/java/swing/ComboBox.shtml)

# android - Longpress 上的 Android 地图标记绘制在实际长按的区域下方（在 API 15 上）

> ID：12756392
> 
> 赞同：5
> 
> 时间：2012-10-06T03:19:38.930
> 
> 标签：android, android-mapview

我已经为此绞尽脑汁好几天了，并用谷歌搜索过，但似乎找不到其他人报告这样的问题（可能错过了）。

我有一个自定义的 Mapview 类，它监听 longpress 等，并使用它在我的地图上绘制标记。它在 API-8 上绘制得很好。但在 API-15 上，标记在用户手指进行长按的位置下方偏移约 2 厘米。对于实际设备（三星 s2）和 eclipse 模拟器都可以观察到这一点。在所有缩放级别上也观察到长按的手指区域与绘制的标记区域（偏移约 2 厘米）。

这是我自定义的 Mapview 类（从某个地方拉出来）：

```
public class MyCustomMapView extends MapView {
public interface OnLongpressListener {
    public void onLongpress(MapView view, GeoPoint longpressLocation);
}

static final int LONGPRESS_THRESHOLD = 500;
private GeoPoint lastMapCenter;

private Timer longpressTimer = new Timer();
private MyCustomMapView.OnLongpressListener longpressListener;

public MyCustomMapView(Context context, String apiKey) {
    super(context, apiKey);
}

public MyCustomMapView(Context context, AttributeSet attrs) {
    super(context, attrs);
}

public MyCustomMapView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
}

public void setOnLongpressListener(MyCustomMapView.OnLongpressListener listener) {
    longpressListener = listener;
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    handleLongpress(event);

    return super.onTouchEvent(event);
}

private void handleLongpress(final MotionEvent event) {

    if (event.getAction() == MotionEvent.ACTION_DOWN) {
        // Finger has touched screen.
        longpressTimer = new Timer();
        longpressTimer.schedule(new TimerTask() {
            @Override
            public void run() {

                GeoPoint longpressLocation = getProjection().fromPixels((int)event.getX(), (int)event.getY());

                /*
                 * Fire the listener. We pass the map location
                 * of the longpress as well, in case it is needed
                 * by the caller.
                 */
                longpressListener.onLongpress(MyCustomMapView.this, longpressLocation);
            }

        }, LONGPRESS_THRESHOLD);

        lastMapCenter = getMapCenter();
    }

    if (event.getAction() == MotionEvent.ACTION_MOVE) {

        if (!getMapCenter().equals(lastMapCenter)) {
            // User is panning the map, this is no longpress
            longpressTimer.cancel();
        }

        lastMapCenter = getMapCenter();
    }

    if (event.getAction() == MotionEvent.ACTION_UP) {
        // User has removed finger from map.
        longpressTimer.cancel();
    }

        if (event.getPointerCount() > 1) {
                    // This is a multitouch event, probably zooming.
            longpressTimer.cancel();
        }
} 
```

这就是我如何称呼上面的类：

```
custom_marker = getResources().getDrawable(R.drawable.marker3);
custom_marker.setBounds(-custom_marker.getIntrinsicWidth(), -custom_marker.getIntrinsicHeight(), 0, 0);
customSitesOverlay = new CustomSitesOverlay(custom_marker);
mapView.getOverlays().add(customSitesOverlay);
customSitesOverlay.addOverlay(new OverlayItem(longpressLocation, "User Marker", id)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T15:54:04.040

它看起来像一个 setBounds 问题。您将标记边界设置为可绘制的右下角中心。这是故意的行为吗？

您可以将标记设置为底部中心（这是最常见的类型或标记）的中心，将边界设置为：

```
custom_marker.setBounds(-custom_marker.getIntrinsicWidth()/2, -custom_marker.getIntrinsicHeight(), custom_marker.getIntrinsicWidth()/2, 0); 
```

祝你好运。

# android - 列表视图中 onitemclick 的 URL 值未加载

> ID：12756394
> 
> 赞同：1
> 
> 时间：2012-10-06T03:19:44.367
> 
> 标签：android, listview, webview, xml-parsing

好的，我这几天一直在研究这个问题，并将我的问题缩小到我不认为它实际上是从 xml 文件中获取节点项来加载 URL 的事实。我正在使用 DOM 解析器来解析 xml 文件并加载到列表视图中。我正在尝试将每个项目的 URL 加载到自定义 webview 活动中，如果我硬编码一个 url 代替字符串 url，它可以完美地工作，如果我将字符串 url 放在那里它不会加载 URL 值。这是我正在使用的代码和类。谢谢您的帮助。

xml 解析器活动

```
 public class XMLParser {

// constructor
public XMLParser() {

}

/**
 * Getting XML from URL making HTTP request
 * @param url string
 * */
public String getXmlFromUrl(String url) {
    String xml = null;

    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        xml = EntityUtils.toString(httpEntity);

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    // return XML
    return xml;
}

/**
 * Getting XML DOM element
 * @param XML string
 * */
public Document getDomElement(String xml){
    Document doc = null;
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    try {

        DocumentBuilder db = dbf.newDocumentBuilder();

        InputSource is = new InputSource();
            is.setCharacterStream(new StringReader(xml));
            doc = db.parse(is); 

        } catch (ParserConfigurationException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (SAXException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (IOException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        }

        return doc;
}

/** Getting node value
  * @param elem element
  */
 public final String getElementValue( Node elem ) {
     Node child;
     if( elem != null){
         if (elem.hasChildNodes()){
             for( child = elem.getFirstChild(); child != null; child = child.getNextSibling() ){
                 if( child.getNodeType() == Node.TEXT_NODE  ){
                     return child.getNodeValue();
                 }
             }
         }
     }
     return "";
 }

 /**
  * Getting node value
  * @param Element node
  * @param key string
  * */
 public String getValue(Element item, String str) {     
        NodeList n = item.getElementsByTagName(str);        
        return this.getElementValue(n.item(0));
    }
 } 
```

列表视图适配器类

```
 public class LazyAdapter extends BaseAdapter {

private Activity activity;
private ArrayList<HashMap<String, String>> data;
private static LayoutInflater inflater=null;
public ImageLoader imageLoader; 

public LazyAdapter(Activity a, ArrayList<HashMap<String, String>> d) {
    activity = a;
    data=d;
    inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    imageLoader=new ImageLoader(activity.getApplicationContext());

}

public int getCount() {
    return data.size();
}

public Object getItem(int position) {
    return position;
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {
    View vi=convertView;
    if(convertView==null)
        vi = inflater.inflate(R.layout.list_row, null);

    TextView title = (TextView)vi.findViewById(R.id.title); // title
    TextView artist = (TextView)vi.findViewById(R.id.artist); // artist name
    ImageView thumb_image=(ImageView)vi.findViewById(R.id.list_image); // thumb image

    HashMap<String, String> song = new HashMap<String, String>();
    song = data.get(position);

    // Setting all values in listview
    title.setText(song.get(CustomizedListView.KEY_TITLE));
    artist.setText(song.get(CustomizedListView.KEY_PUB_DATE));
    imageLoader.DisplayImage(song.get(CustomizedListView.KEY_LINK), thumb_image);
    return vi;
}
 } 
```

主要活动

```
 public class CustomizedListView extends Activity {
// All static variables
static final String URL = "http://treymorgan.net/feed";
// XML node keys
static final String KEY_ITEM = "item"; // parent node 
static final String KEY_ID = "id";
static final String KEY_TITLE = "title";
static final String KEY_PUB_DATE = "pubDate";
static final String KEY_LINK = "link";

ListView list;
LazyAdapter adapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

    XMLParser parser = new XMLParser();
    String xml = parser.getXmlFromUrl(URL); // getting XML from URL
    Document doc = parser.getDomElement(xml); // getting DOM element

    NodeList nl = doc.getElementsByTagName(KEY_ITEM);
    // looping through all song nodes <song>
    for (int i = 0; i < nl.getLength(); i++) {
        // creating new HashMap
        HashMap<String, String> map = new HashMap<String, String>();
        Element e = (Element) nl.item(i);
        // adding each child node to HashMap key => value
        map.put(KEY_ID, parser.getValue(e, KEY_ITEM));
        map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
        map.put(KEY_PUB_DATE, parser.getValue(e, KEY_PUB_DATE));
        map.put(KEY_LINK, parser.getValue(e, KEY_LINK));

        // adding HashList to ArrayList
        songsList.add(map);
    }

    list=(ListView)findViewById(R.id.list);

    // Getting adapter by passing xml data ArrayList
    adapter=new LazyAdapter(this, songsList);        
    list.setAdapter(adapter);

    // Click event for single list row
    list.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {

            Intent intent = new Intent(CustomizedListView.this, WebviewActivity.class);  
            Bundle b = new Bundle();
            intent.putExtra( "b", "KEY_LINK");
            startActivity(intent); 

             }

    });
}   
 } 
```

Webview Activity public class WebviewActivity extends Activity{ private WebView webview;

```
 @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.webview);

    Bundle b = getIntent().getExtras(); 
    String KEY_LINK = b.getString("b");

    webview = (WebView) findViewById(R.id.webView1);
    webview.setWebViewClient(new MyWebViewClient(this));
    webview.getSettings().setAppCacheEnabled(false);
    webview.getSettings().setBuiltInZoomControls(true);
    webview.setInitialScale(1);
    webview.loadUrl(KEY_LINK);

  }

       } 
```

这是我正在解析的 XML 的示例项

```
 <item>
    <title>We’re Building a Feeding Center and Church in Honduras!</title>
    <link>http://treymorgan.net/were-building-a-feeding-center-and-church-in-honduras/</link>
    <comments>http://treymorgan.net/were-building-a-feeding-center-and-church-in-honduras/#comments</comments>
    <pubDate>Fri, 14 Sep 2012 15:47:15 +0000</pubDate>
    <dc:creator>Trey Morgan</dc:creator>
            <category><![CDATA[Honduras]]></category>

    <guid isPermaLink="false">http://treymorgan.net/?p=4640</guid>
    <description><![CDATA[Do you remember this post from two weeks ago about feeding kids in Buen Samaritano?  Marc Tindall needed $6000 to get the feeding center started (which will be used as a church too) &#8230; and this past Monday morning we presented him with the money. WOO HOO!  Thanks to all those who gave.]]></description>
 <wfw:commentRss>http://treymorgan.net/were-building-a-feeding-center-and-church-in-honduras/feed/</wfw:commentRss>
    <slash:comments>1</slash:comments>
<enclosure url="http://treymorgan.net/wp-content/uploads/2012/09/photo-101-224x300.jpg" length="2854" type="image/jpeg" />  
 </item> 
```

感谢您对此提供的任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T03:29:37.447

传递给 webView 的 KEY_LINK url 的格式可能不正确。

尝试首先使用它正确编码：

```
String urlStr = KEY_LINK;
URL url = new URL(urlStr);
URI uri = new URI(url.getProtocol(), url.getUserInfo(), url.getHost(), url.getPort(), url.getPath(), url.getQuery(), url.getRef());
url = uri.toURL();

webview.loadUrl(url); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T04:00:23.487

试试看：

对于从一个活动到另一个活动的传递字符串

**第一项活动：**

```
Intent indisplay = new Intent(FirstClass.this,SecondClass.class);
indisplay.putExtra("link",your link here);
startActivity(indisplay); 
```

**第二个活动：**

```
 Intent indispaly = getIntent();
 String url = indispaly.getStringExtra("link");
    // your link from previous activity is stored into the url 
```

# java - 如何随机调用一个方法在java中运行？

> ID：12756396
> 
> 赞同：1
> 
> 时间：2012-10-06T03:20:03.840
> 
> 标签：java, methods, random

我正在编写一个将生成几何逻辑字问题的程序，但我遇到了麻烦。我的目标是让程序随机创建一个预先设计的单词问题。到目前为止，该程序从用户那里获取输入，然后在 Story 方法中使用该信息，有点像 Mad Libs 游戏。无论如何，我想在每次用户启动程序时随机选择一个 Story 方法来运行。到目前为止，这就是我所拥有的：

```
import cs1.Keyboard;
 public class LogicProof {
//Main method
public void main () {
    System.out.println ("Enter 1\. to start.");
    System.out.println ("Enter 2\. to exit.");
    int choice = Keyboard.readInt();
    if (choice == 1) {          //Take info in and send to createStory

        //Randomly run methods

    }
    if (choice == 2) {
        System.out.println ("\nGoodbye.");
    }
//Create the first story using inputs from main
private void createStory(String adj,String adj2,String adj3,String action) {               

      //Use values from main() to create a problem
} 
```

还有另外两个 createStory 方法。另外，我要展示每个问题的证明，每个方法都有自己的证明，那么我是否可以展示相同方法的证明，基本上只是将证明方法和故事方法链接在一起？

我对Java相当陌生，感谢您的帮助。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T03:24:04.993

要仅回答您的标题，您可以使用带有反射的随机生成，但这绝不是您应该解决当前问题的方法。

不要尝试随机调用方法。查看[java.util.Random](http://docs.oracle.com/javase/7/docs/api/java/util/Random.html)`nextInt()`并使用它根据它返回的值执行独特的操作。

~~这似乎是家庭作业，这就是为什么我没有在这里给你一个完整的解决方案。~~

```
public class MadLibs {

    public static final String[] STARTERS = { /* ... */ };
    public static final String[] ENDINGS  = { /* ... */ };

    public static String generate(String ... adjectives) {
        final Random random = new Random();
        final StringBuilder string = new StringBuilder(STARTERS[random.nextInt(STARTERS.length-1)]);

        for (String adjective : adjectives) {
            string.append(adjective);
            string.append(TRANSITIONS[random.nextInt(TRANSITIONS.length - 1)]);
        }

        return string.toString();
    }   

} 
```

这是一个非常简单和粗略的实现，可以帮助您入门。

或者，如果您只有一些具体的变化：

```
public class MadLibs {

    public static String generate(String ... adjectives) {
        int result = new Random().nextInt(MAX);
        String madLib = null;

        switch (result) {

            case 0:
              // ...
              break;

            case 1:
              // ...
              break;

            default:
              // ...
              break;            

        } 

        return madLib;      
    }    

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T03:36:30.523

如上所述，对自己使用随机数生成 1,2,3,4 等...然后将该数字作为参数传递给您的方法，然后使用“if, if else”语句来选择要执行的正确操作。同样，如上所述，如果这确实是一个家庭作业问题，我不会给出任何代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T03:31:04.200

您可以生成一个`Word`或`Phrase`对象，将它们填充到一个[`List`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html).

从那里我们可以从列表中提取一个单词或[`Random`](http://docs.oracle.com/javase/7/docs/api/java/util/Random.html)短语[`Math.random`](http://docs.oracle.com/javase/7/docs/api/java/lang/Math.html#random%28%29)

# bash - 在 Bash 中，变量和函数可以同名吗？

> ID：12756398
> 
> 赞同：4
> 
> 时间：2012-10-06T03:20:27.397
> 
> 标签：bash, variable-names

我的 ~/.bashrc 中有以下代码：

```
date=$(which date)
date() {
  if [[ $1 == -R || $1 == --rfc-822 ]]; then
    # Output RFC-822 compliant date string.
    # e.g. Wed, 16 Dec 2009 15:18:11 +0100
    $date | sed "s/[^ ][^ ]*$/$($date +%z)/"
  else
    $date "$@"
  fi
} 
```

据我所知，这很好用。是否有理由避免使用同名的变量和函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T03:27:27.723

除了混乱之外，一切都很好。此外，它们也不相同：

```
$ date=/bin/ls
$ type date 
date is hashed (/bin/date)
$ type $date 
/bin/ls is /bin/ls
$ moo=foo
$ type $moo 
-bash: type: foo: not found
$ function date() { true; }
$ type date 
date is a function
date () 
{ 
true*emphasized text*
}

$ which true 
/bin/true
$ type true
true is a shell builtin 
```

每当您键入命令时，bash 都会在三个不同的位置查找该命令。优先级如下：

1.  shell 内建函数（帮助）
2.  *   shell 别名（帮助别名）

    *   shell 函数（帮助函数）

3.  来自 $PATH 的散列二进制文件（首先扫描的“最左边”文件夹）

变量以美元符号为前缀，这使得它们与上述所有变量都不同。与您的示例进行比较： $date 和 date 不是一回事。因此，变量和函数实际上不可能具有相同的名称，因为它们具有不同的“命名空间”。

您可能会觉得这有点令人困惑，但许多脚本在文件顶部定义了“方法变量”。例如

```
SED=/bin/sed
AWK=/usr/bin/awk
GREP/usr/local/gnu/bin/grep 
```

常见的做法是以大写字母输入变量名。这对两个目的很有用（除了减少混淆之外）：

1.  没有 $PATH
2.  检查所有“依赖项”是否可运行

你不能真的像这样检查：

```
if [ "`which binary`" ]; then echo it\'s ok to continue.. ;fi 
```

因为如果尚未对二进制文件进行哈希处理（在路径文件夹中找到），这会给您一个错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T03:30:32.757

由于在 Bash 中您总是必须使用`$`取消引用变量，因此您可以随意使用任何您喜欢的名称。

不过，请注意覆盖全局。

**也可以看看：**

[http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_03_02.html](http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_03_02.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-06T13:24:19.723

使用变量的替代方法：使用 bash 的`command`关键字（参见[手册](http://www.gnu.org/software/bash/manual/bashref.html#index-command)或`help command`从提示符运行）：

```
date() {
    case $1 in
        -R|--rfc-2822) command date ... ;;
        *) command date "$@" ;;
    esac
} 
```

# sql - 检查 Postgres 表中是否存在记录

> ID：12756413
> 
> 赞同：1
> 
> 时间：2012-10-06T03:24:02.620
> 
> 标签：sql, performance, postgresql, csv, postgresql-copy

我必须每 20 秒读取一次 CSV。每个 CSV 包含最小值。500到最大。60000 行。我必须在 Postgres 表中插入数据，但在此之前我需要检查项目是否已经插入，因为很可能会出现重复项目。检查唯一性的字段也被索引。

因此，我分块读取文件并使用 IN 子句获取数据库中已有的项目。

有更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T03:41:52.890

这应该表现良好：

```
CREATE TEMP TABLE tmp AS SELECT * FROM tbl LIMIT 0 -- copy layout, but no data

COPY tmp FROM '/absolute/path/to/file' FORMAT csv;

INSERT INTO tbl
SELECT tmp.*
FROM   tmp
LEFT   JOIN tbl USING (tbl_id)
WHERE  tbl.tbl_id IS NULL;

DROP TABLE tmp; -- else dropped at end of session automatically 
```

[与这个答案](https://stackoverflow.com/a/8910810/939860)密切相关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T08:32:56.737

首先，为了完整起见，我更改了 Erwin 的代码以使用`except`

```
CREATE TEMP TABLE tmp AS SELECT * FROM tbl LIMIT 0 -- copy layout, but no data
COPY tmp FROM '/absolute/path/to/file' FORMAT csv;

INSERT INTO tbl
SELECT tmp.*
FROM   tmp
except
select *
from tbl

DROP TABLE tmp; 
```

然后我决定自己测试一下。我在 9.1 中对其进行了测试，几乎没有改动`postgresql.conf`。目标表包含 1000 万行，源表包含 30000 行。目标表中已存在 15,000 个。

```
create table tbl (id integer primary key)
;
insert into tbl
select generate_series(1, 10000000)
;
create temp table tmp as select * from tbl limit 0
;
insert into tmp
select generate_series(9985000, 10015000)
; 
```

我只要求解释选择部分。`except`版本：

```
explain
select *
from tmp
except
select *
from tbl
;
                                       QUERY PLAN                                       
----------------------------------------------------------------------------------------
 HashSetOp Except  (cost=0.00..270098.68 rows=200 width=4)
   ->  Append  (cost=0.00..245018.94 rows=10031897 width=4)
         ->  Subquery Scan on "*SELECT* 1"  (cost=0.00..771.40 rows=31920 width=4)
               ->  Seq Scan on tmp  (cost=0.00..452.20 rows=31920 width=4)
         ->  Subquery Scan on "*SELECT* 2"  (cost=0.00..244247.54 rows=9999977 width=4)
               ->  Seq Scan on tbl  (cost=0.00..144247.77 rows=9999977 width=4)
(6 rows) 
```

`outer join`版本：

```
explain
select *
from 
    tmp
    left join
    tbl using (id)
where tbl.id is null
;
                                QUERY PLAN                                
--------------------------------------------------------------------------
 Nested Loop Anti Join  (cost=0.00..208142.58 rows=15960 width=4)
   ->  Seq Scan on tmp  (cost=0.00..452.20 rows=31920 width=4)
   ->  Index Scan using tbl_pkey on tbl  (cost=0.00..7.80 rows=1 width=4)
         Index Cond: (tmp.id = id)
(4 rows) 
```

# android - Eclipse 在编辑 Android XML 文件时缺少图形布局和源选项卡

> ID：12756416
> 
> 赞同：5
> 
> 时间：2012-10-06T03:24:10.063
> 
> 标签：android, xml, eclipse, graphical-layout-editor

当我使用 Android Common XML Editor 在 Eclipse 中编辑 XML 文件时，我只能使用图形布局编辑器。我在网上的图片中看到图形和源代码的底部应该有标签，但我没有。我该如何解决这个问题？使用 Eclipse 4.2.1。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-06T05:42:12.503

这[可能是 Unity](https://stackoverflow.com/questions/12394089/eclipse-android-common-xml-editor-cannot-switch-between-modes)无法正确显示编辑器的问题。我敢打赌，您仍然可以使用键盘在选项卡之间切换。按`Shift``Alt``F7`导航到上一页并`Alt``F7`导航到多页编辑器的下一页。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T05:40:38.980

到目前为止，我遇到了同样的问题。

解决方案：

==> 在您的布局编辑器中有一个 android 版本配置下拉框，从那里选择正确的 android 版本。（例如“Android 2.3.3”）

试试这个，让我知道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-06T07:28:34.783

我发现在为 Eclipse 安装自定义主题后会出现此问题。就我而言，它是“黑暗朱诺”主题。带回原来的主题，一切都会好起来的:-)

- - - 编辑 - - -

您可以使用 MoonRise 深色主题 ( [https://github.com/guari/eclipse-ui-theme](https://github.com/guari/eclipse-ui-theme) )。底栏工作完美，设计看起来不错。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-06T03:37:20.513

请尝试在您想从 res 文件夹下的项目资源管理器中打开的 xml 文件上使用 OpenWith -> Layout Editor

# tcp - 如何将一台服务器变成多台服务器？（虚拟化/VMWare）

> ID：12756419
> 
> 赞同：0
> 
> 时间：2012-10-06T03:25:07.787
> 
> 标签：tcp, vmware, virtualization

我希望对这个问题进行高层次的讨论，我知道这个问题正在迅速接近我的应用程序。

我有一个绑定到特定端口并管理来自我的客户端的 TCP 套接字的服务器。我知道使用 VMWare 虚拟化服务器并同时运行多个服务器是常见的做法。

**如何更改单个服务器设计以支持多个服务器？**

多个服务器不能绑定到同一个端口。如果我不得不猜测，我会说代理服务器绑定到端口，然后将连接发送到其他服务器以进行处理，就好像它仍然是单个服务器应用程序一样。

我想知道有哪些选择以及解决此问题的常见做法是什么？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T03:33:49.130

就在 VM 中运行的操作系统而言，每台 VMWare 机器本质上都是一台独立的 PC。就像在真实的 PC 上一样，服务器可以绑定到不同 IP 上的同一端口，并且每个运行的 VM 可以在虚拟化网络上拥有自己的 IP。VMWare 有一个内置的 DHCP 路由器，用于管理其正在运行的 VM 的 IP 和网络流量。每个VM都可以在Host机器的实际网络上拥有自己真正独立的IP，或者它们可以通过VMWare的内置路由器共享Host的IP。每个 VM 中的操作系统不知道其中的区别。继续并将您的服务器绑定到每个正在运行的 VM 上的相同端口，它会正常工作。VMWare 将根据需要处理数据包路由。

# jquery - TypeScript 中是否有“this”的别名？

> ID：12756423
> 
> 赞同：76
> 
> 时间：2012-10-06T03:26:15.477
> 
> 标签：jquery, typescript

我试图在 TypeScript 中编写一个类，该类定义了一个方法，该方法用作对 jQuery 事件的事件处理程序回调。

```
class Editor {
    textarea: JQuery;

    constructor(public id: string) {
        this.textarea = $(id);
        this.textarea.focusin(onFocusIn);
    }

    onFocusIn(e: JQueryEventObject) {
        var height = this.textarea.css('height'); // <-- This is not good.
    }
} 
```

在 onFocusIn 事件处理程序中，TypeScript 将“this”视为类的“this”。但是，jQuery 会覆盖 this 引用并将其设置为与事件关联的 DOM 对象。

一种替代方法是在构造函数中定义一个 lambda 作为事件处理程序，在这种情况下，TypeScript 会创建一种带有隐藏 _this 别名的闭包。

```
class Editor {
    textarea: JQuery;

    constructor(public id: string) {
        this.textarea = $(id);
        this.textarea.focusin((e) => {
            var height = this.textarea.css('height'); // <-- This is good.
        });
    }
} 
```

我的问题是，是否有另一种方法可以使用 TypeScript 在基于方法的事件处理程序中访问 this 引用，以克服这种 jQuery 行为？

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2012-10-06T14:25:27.987

使用箭头函数语法时，范围`this`被保留`() => { ... }`- 这是一个来自[TypeScript For JavaScript Programmers](http://www.amazon.co.uk/TypeScript-For-JavaScript-Programmers-ebook/dp/B009KWNA7O/)的示例。

```
var ScopeExample = { 
  text: "Text from outer function", 
  run: function() { 
    setTimeout( () => { 
      alert(this.text); 
    }, 1000); 
  } 
}; 
```

请注意，这`this.text`是`Text from outer function`因为箭头函数语法保留了“词法范围”。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-10-06T05:28:51.400

因此，如前所述，没有 TypeScript 机制可以确保方法始终绑定到其`this`指针（这不仅仅是 jQuery 问题。）这并不意味着没有一种相当直接的方法来解决这个问题。您需要为您的方法生成一个代理，`this`在调用回调之前恢复指针。然后，您需要使用该代理包装您的回调，然后再将其传递给事件。jQuery 对此有一个内置机制，称为`jQuery.proxy()`. 这是使用该方法的上述代码示例（注意添加的`$.proxy()`调用。）

```
class Editor { 
    textarea: JQuery; 

    constructor(public id: string) { 
        this.textarea = $(id); 
        this.textarea.focusin($.proxy(onFocusIn, this)); 
    } 

    onFocusIn(e: JQueryEventObject) { 
        var height = this.textarea.css('height'); // <-- This is not good. 
    } 
} 
```

这是一个合理的解决方案，但我个人发现开发人员经常忘记包含代理调用，所以我想出了一个基于 TypeScript 的替代解决方案来解决这个问题。使用`HasCallbacks`下面的类，您需要做的就是从中派生您的类`HasCallbacks`，然后任何以前缀为前缀的方法`'cb_'`都将永久绑定其`this`指针。您根本无法使用不同的`this`指针调用该方法，这在大多数情况下更可取。任何一种机制都有效，因此它只是您发现更容易使用的任何一种。

```
class HasCallbacks {
    constructor() {
        var _this = this, _constructor = (<any>this).constructor;
        if (!_constructor.__cb__) {
            _constructor.__cb__ = {};
            for (var m in this) {
                var fn = this[m];
                if (typeof fn === 'function' && m.indexOf('cb_') == 0) {
                    _constructor.__cb__[m] = fn;                    
                }
            }
        }
        for (var m in _constructor.__cb__) {
            (function (m, fn) {
                _this[m] = function () {
                    return fn.apply(_this, Array.prototype.slice.call(arguments));                      
                };
            })(m, _constructor.__cb__[m]);
        }
    }
}

class Foo extends HasCallbacks  {
    private label = 'test';

    constructor() {
        super();

    }

    public cb_Bar() {
        alert(this.label);
    }
}

var x = new Foo();
x.cb_Bar.call({}); 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2013-12-23T04:27:01.790

正如其他一些答案所涵盖的，使用箭头语法定义函数会导致引用`this`始终引用封闭类。

因此，为了回答您的问题，这里有两个简单的解决方法。

### 使用箭头语法引用方法

```
constructor(public id: string) {
    this.textarea = $(id);
    this.textarea.focusin(e => this.onFocusIn(e));
} 
```

### 使用箭头语法定义方法

```
onFocusIn = (e: JQueryEventObject) => {
    var height = this.textarea.css('height');
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-05-20T14:47:32.533

您可以在构造函数中将成员函数绑定到其实例。

```
class Editor {
    textarea: JQuery;

    constructor(public id: string) {
        this.textarea = $(id);
        this.textarea.focusin(onFocusIn);
        this.onFocusIn = this.onFocusIn.bind(this); // <-- Bind to 'this' forever
    }

    onFocusIn(e: JQueryEventObject) {
        var height = this.textarea.css('height');   // <-- This is now fine
    }
} 
```

或者，只需在添加处理程序时绑定它。

```
 this.textarea.focusin(onFocusIn.bind(this)); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-05-24T01:47:56.510

试试这个

```
class Editor 
{

    textarea: JQuery;
    constructor(public id: string) {
        this.textarea = $(id);
        this.textarea.focusin((e)=> { this.onFocusIn(e); });
    }

    onFocusIn(e: JQueryEventObject) {
        var height = this.textarea.css('height'); // <-- This will work
    }

} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-03-21T19:33:55.557

Steven Ickman 的解决方案很方便，但不完整。Danny Becket 和 Sam 的答案更短且更手动，并且在具有同时需要动态和词法范围“this”的回调的相同一般情况下失败。如果我在下面的解释是 TL;DR，请跳到我的代码...

我需要为动态范围保留“this”以与库回调一起使用，*并且*我需要一个“this”与类实例的词法范围。我认为将实例传递给回调生成器是最优雅的，有效地让参数关闭类实例。如果您错过了这样做，编译器会告诉您。我使用调用词法范围参数“outerThis”的约定，但“self”或其他名称可能更好。

“this”关键字的使用是从 OO 世界中偷来的，当 TypeScript 采用它时（我推测来自 ECMAScript 6 规范），每当一个方法被不同的实体调用时，他们将词法范围的概念和动态范围的概念混为一谈. 我对此有点恼火；我更喜欢 TypeScript 中的“self”关键字，这样我就可以将词法范围的对象实例从它上面移开。或者，可以将 JS 重新定义为在需要时需要显式的第一位置“调用者”参数（从而一举破坏所有网页）。

这是我的解决方案（从大班中摘录）。特别看一下方法的调用方式，尤其是“dragmoveLambda”的主体：

```
export class OntologyMappingOverview {

initGraph(){
...
// Using D3, have to provide a container of mouse-drag behavior functions
// to a force layout graph
this.nodeDragBehavior = d3.behavior.drag()
        .on("dragstart", this.dragstartLambda(this))
        .on("drag", this.dragmoveLambda(this))
        .on("dragend", this.dragendLambda(this));

...
}

dragmoveLambda(outerThis: OntologyMappingOverview): {(d: any, i: number): void} {
    console.log("redefine this for dragmove");

    return function(d, i){
        console.log("dragmove");
        d.px += d3.event.dx;
        d.py += d3.event.dy;
        d.x += d3.event.dx;
        d.y += d3.event.dy; 

        // Referring to "this" in dynamic scoping context
        d3.select(this).attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; });

        outerThis.vis.selectAll("line")
            .filter(function(e, i){ return e.source == d || e.target == d; })
            .attr("x1", function(e) { return e.source.x; })
            .attr("y1", function(e) { return e.source.y; })
            .attr("x2", function(e) { return e.target.x; })
            .attr("y2", function(e) { return e.target.y; });

    }
}

dragging: boolean  =false;
// *Call* these callback Lambda methods rather than passing directly to the callback caller.
 dragstartLambda(outerThis: OntologyMappingOverview): {(d: any, i: number): void} {
        console.log("redefine this for dragstart");

        return function(d, i) {
            console.log("dragstart");
            outerThis.dragging = true;

            outerThis.forceLayout.stop();
        }
    }

dragendLambda(outerThis: OntologyMappingOverview): {(d: any, i: number): void}  {
        console.log("redefine this for dragend");

        return function(d, i) {
            console.log("dragend");
            outerThis.dragging = false;
            d.fixed = true;
        }
    }

} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-10-06T03:35:17.010

TypeScript 没有提供任何额外的方式（除了常规的 JavaScript 手段）来返回到“真实”`this`引用，而不是`this`在胖箭头 lambda 语法中提供的重新映射便利（从向后兼容的角度来看这是允许的，因为没有现有的 JS 代码可以使用`=>`表达式）。

您可以向 CodePlex 站点发布建议，但从语言设计的角度来看，这里可能不会发生太多事情，因为编译器*可以*提供的任何理智的关键字都可能已经被现存的 JavaScript 代码使用。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-06-16T08:17:29.820

我也遇到过类似的问题。我认为您可以`.each()`在许多情况下使用`this`为以后的事件保留不同的值。

JavaScript 方式：

```
$(':input').on('focus', function() {
  $(this).css('background-color', 'green');
}).on('blur', function() {
  $(this).css('background-color', 'transparent');
}); 
```

TypeScript 方式：

```
$(':input').each((i, input) => {
  var $input = $(input);
  $input.on('focus', () => {
    $input.css('background-color', 'green');
  }).on('blur', () => {
    $input.css('background-color', 'transparent');
  });
}); 
```

我希望这可以帮助别人。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-09-20T12:13:18.113

您可以使用 js eval 函数：`var realThis = eval('this');`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-10-06T03:30:40.597

您可以将您的引用存储`this`在另一个变量中......`self`也许，并以这种方式访问​​引用。我不使用打字稿，但这是一种过去使用香草 javascript 对我来说很成功的方法。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-12-06T01:49:47.120

查看这篇博文[http://lumpofcode.blogspot.com/2012/10/typescript-dart-google-web-toolkit-and.html](http://lumpofcode.blogspot.com/2012/10/typescript-dart-google-web-toolkit-and.html)，它详细讨论了在 TypeScript 类内和跨 TypeScript 类组织调用的技术。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-05-11T18:30:42.367

有比上述所有答案更简单的解决方案。基本上，我们通过使用关键字函数而不是使用 '=>' 构造来回退 JavaScript，这会将 'this' 转换为类 'this'

```
class Editor {
    textarea: JQuery;

    constructor(public id: string) {
        var self = this;                      // <-- This is save the reference
        this.textarea = $(id);
        this.textarea.focusin(function() {   // <-- using  javascript function semantics here
             self.onFocusIn(this);          //  <-- 'this' is as same as in javascript
        });
    }

    onFocusIn(jqueryObject : JQuery) {
        var height = jqueryObject.css('height'); 
    }
} 
```

# java - 内部文件服务器设计模式？

> ID：12756430
> 
> 赞同：0
> 
> 时间：2012-10-06T03:27:54.093
> 
> 标签：java, node.js, ftp, sftp, fileserver

我的公司处理来自我们客户的数据。我们的客户通过将数据推送到我们维护的 sftp 服务器来提交数据。我们的代码（主要是 Java、Scala 和 Node.js 以及一些 Python/shell）然后以只读模式访问这些服务器，并在下载这些文件后进行大量数据处理。

我们对这个系统感到沮丧，因为不仅 Java 库不适合做 sftp，而且即使是节点之一也不能在一些开发人员使用的 Windows 中工作，所以我们有一些 hacky shell 脚本来同步来自 sftp 的文件。

有哪些好的架构模式可以解决这个问题？我们想要一个安全的内部文件服务器，它可以通过良好的操作系统无关库轻松访问，并且具有通过文件查看器浏览的良好工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T22:09:01.223

扩展 Brad 的问题，“为什么要让你使用内部接口 SFTP”？...

我会针对您的 SFTP 服务器运行[rsync](http://en.wikipedia.org/wiki/Rsync)，以在您的首选环境中保留客户端文件的工作副本。从那里开始使用使您的船员最舒适的任何工具。

# php - 在 PHP 中嵌套 if else 语句以验证 URL

> ID：12756432
> 
> 赞同：0
> 
> 时间：2012-10-06T03:28:06.720
> 
> 标签：php

我目前正在编写一个函数，以便通过将 URL 分解为不同的部分并将这些部分与我定义的字符串匹配来验证 URL。这是我目前使用的功能：

```
function validTnet($tnet_url) {
    $tnet_2 = "defined2";
    $tnet_3 = "defined3";
    $tnet_5 = "defined5";
    $tnet_7 = "";

    if($exp_url[2] == $tnet_2) {
        #show true, proceed to next validation

        if($exp_url[3] == $tnet_3) {
        #true, and next

                if($exp_url[5] == $tnet_5) {
                #true, and last

                        if($exp_url[7] == $tnet_7) {
                        #true, valid
                        }
                }
            }
    } else {
        echo "failed on tnet_2";
    }
} 
```

出于某种原因，我无法想出如何打破嵌套的 if 语句的编码方式（或搜索适当的术语）。

我想检查 URL 的每个部分，从 开始`$tnet_2`，如果它未能通过其中一项检查（`$tnet_2`、或） `$tnet_3`，则输出它失败，并跳出 if 语句。有没有一种简单的方法可以使用我已经拥有的一些代码来实现这一点？`$tnet_5``$tnet_7`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T03:34:45.763

```
$is_valid = true;

foreach (array(2, 3, 5, 7) as $i) {
    if ($exp_url[$i] !== ${'tnet_'.$i}) {
        $is_valid = false;
        break;   
    }
} 
```

`$tnet[$i]`如果您在数组中定义这些值，您可以这样做：

```
$tnet = array(
  2 => "defined2",
  3 => "defined3",
  5 => "defined5",
  7 => ""
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T04:33:05.043

结合所有`if`条件

```
if(
   $exp_url[2] == $tnet_2 && 
   $exp_url[3] == $tnet_3 && 
   $exp_url[5] == $tnet_5 && 
   $exp_url[7] == $tnet_7
) {
  //true, valid
} else {
  echo "failed on tnet_2";
} 
```

# ssl - 完整的 SSL 安全性

> ID：12756433
> 
> 赞同：-2
> 
> 时间：2012-10-06T03:28:09.867
> 
> 标签：ssl, ssl-certificate

我在我的网站[http://core-electronics.com.au/eCommerce上安装了 SSL 证书](http://core-electronics.com.au/eCommerce)

当我在 Chrome 中访问它时，它说网站上有不安全的项目。我忽略了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T03:31:20.423

您不能有指向非 SSL URL 的内容链接。一切都必须指向 HTTPS URL。图像、样式表、脚本，应有尽有。

如果您有任何嵌入式插件，例如 Twitter 推文按钮，则应使用无协议 URL。

打开 Firefox 内容对话框或 Chrome 开发人员工具并查看所有链接。您应该能够很容易地发现不安全的内容。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-06T03:35:31.303

打开 Chrome 开发者工具并选择网络选项卡。刷新您的页面，然后单击列表中的第一个资源。右侧窗格将转换为选项卡式视图，所选选项卡为“标题”，显示的第一个信息为请求 URL。

现在，循环浏览这些，直到找到从 http 连接而不是 https 加载的资源。您可以使用向下键选择下一个资源。

我在几分钟内找到了其中的 7 个。你应该试试看。

# java - 使用双缓冲有点毁了我的小程序。它具有 java 使用或覆盖已弃用的 API

> ID：12756434
> 
> 赞同：0
> 
> 时间：2012-10-06T03:28:20.443
> 
> 标签：java, applet, awt, custom-component, event-dispatch-thread

这是我的代码实际上它只是一个移动的太空入侵者游戏。我在互联网上搜索我尝试过双缓冲的动画，它消除了闪烁，但它破坏了整个输出。它还具有 java 使用或覆盖已弃用的 API。注意：使用 -Xlint:deprecation 重新编译以获取详细信息。这太难了……

```
import javax.sound.sampled.*;
import java.applet.*;
import java.awt.*;

public class SpaceInvaders extends Applet implements Runnable{

AudioClip soundFile1; 
int Xposition=500,Xposition1=-500,Yposition=15;
Thread runner;

public void start()
{
if (runner == null);
{
runner = new Thread(this);
runner.start();
}
}

public void stop()
{
if (runner != null);
{
runner.stop();
runner = null;

}
}

public void run()
{
while(true)
{
setBackground(Color.black);
repaint();
try {Thread.sleep(20);}
catch(InterruptedException e) { }
}
}

public void init() 
{ 
soundFile1 = getAudioClip(getDocumentBase(),"si.au"); 
//soundFile1.play(); 
soundFile1.loop();
}   
public void paint( Graphics g ) {   
  g.setColor( Color.orange );
  g.fillRect(Xposition+50,10,10,10);
  g.fillRect(Xposition+60,10,10,10);
  g.fillRect(Xposition+40,20,10,10);
  g.fillRect(Xposition+50,20,10,10);
  g.fillRect(Xposition+60,20,10,10);
  g.fillRect(Xposition+70,20,10,10);
  g.fillRect(Xposition+30,30,10,10);
  g.fillRect(Xposition+40,30,10,10);
  g.fillRect(Xposition+50,30,10,10);
  g.fillRect(Xposition+60,30,10,10);
  g.fillRect(Xposition+70,30,10,10);
  g.fillRect(Xposition+80,30,10,10);
  g.fillRect(Xposition+20,40,10,10);
  g.fillRect(Xposition+30,40,10,10);
  g.fillRect(Xposition+50,40,10,10);
  g.fillRect(Xposition+60,40,10,10);
  g.fillRect(Xposition+80,40,10,10);
  g.fillRect(Xposition+90,40,10,10);
  g.fillRect(Xposition+20,50,10,10);
  g.fillRect(Xposition+30,50,10,10);
  g.fillRect(Xposition+40,50,10,10);
  g.fillRect(Xposition+50,50,10,10);
  g.fillRect(Xposition+60,50,10,10);
  g.fillRect(Xposition+70,50,10,10);
  g.fillRect(Xposition+80,50,10,10);
  g.fillRect(Xposition+90,50,10,10);
  g.fillRect(Xposition+40,60,10,10);
  g.fillRect(Xposition+70,60,10,10);
  g.fillRect(Xposition+30,70,10,10);
  g.fillRect(Xposition+50,70,10,10);
  g.fillRect(Xposition+60,70,10,10);
  g.fillRect(Xposition+80,70,10,10);
  g.fillRect(Xposition+20,80,10,10);
  g.fillRect(Xposition+40,80,10,10);
  g.fillRect(Xposition+70,80,10,10);
  g.fillRect(Xposition+90,80,10,10);

  g.setColor(Color.red);
  g.fillRect(Xposition+140,10,10,10);
  g.fillRect(Xposition+200,10,10,10);
  g.fillRect(Xposition+120,20,10,10);
  g.fillRect(Xposition+150,20,10,10);
  g.fillRect(Xposition+190,20,10,10);
  g.fillRect(Xposition+220,20,10,10);
  g.fillRect(Xposition+120,30,10,10);
  g.fillRect(Xposition+140,30,10,10);
  g.fillRect(Xposition+150,30,10,10);
  g.fillRect(Xposition+160,30,10,10);
  g.fillRect(Xposition+170,30,10,10);
  g.fillRect(Xposition+180,30,10,10);
  g.fillRect(Xposition+190,30,10,10);
  g.fillRect(Xposition+200,30,10,10);
  g.fillRect(Xposition+220,30,10,10);
  g.fillRect(Xposition+120,40,10,10);
  g.fillRect(Xposition+130,40,10,10);
  g.fillRect(Xposition+140,40,10,10);
  g.fillRect(Xposition+160,40,10,10);
  g.fillRect(Xposition+170,40,10,10);
  g.fillRect(Xposition+180,40,10,10);
  g.fillRect(Xposition+200,40,10,10);
  g.fillRect(Xposition+210,40,10,10);
  g.fillRect(Xposition+220,40,10,10);
  g.fillRect(Xposition+120,50,10,10);
  g.fillRect(Xposition+130,50,10,10);
  g.fillRect(Xposition+140,50,10,10);
  g.fillRect(Xposition+150,50,10,10);
  g.fillRect(Xposition+160,50,10,10);
  g.fillRect(Xposition+170,50,10,10);
  g.fillRect(Xposition+180,50,10,10);
  g.fillRect(Xposition+190,50,10,10);
  g.fillRect(Xposition+200,50,10,10);
  g.fillRect(Xposition+210,50,10,10);
  g.fillRect(Xposition+220,50,10,10);
  g.fillRect(Xposition+130,60,10,10);
  g.fillRect(Xposition+140,60,10,10);
  g.fillRect(Xposition+150,60,10,10);
  g.fillRect(Xposition+160,60,10,10);
  g.fillRect(Xposition+170,60,10,10);
  g.fillRect(Xposition+180,60,10,10);
  g.fillRect(Xposition+190,60,10,10);
  g.fillRect(Xposition+200,60,10,10);
  g.fillRect(Xposition+210,60,10,10);
  g.fillRect(Xposition+140,70,10,10);
  g.fillRect(Xposition+200,70,10,10);
  g.fillRect(Xposition+130,80,10,10);
  g.fillRect(Xposition+210,80,10,10);

  g.setColor(Color.blue);
  g.fillRect(Xposition+280,10,10,10);
  g.fillRect(Xposition+290,10,10,10);
  g.fillRect(Xposition+270,20,10,10);
  g.fillRect(Xposition+280,20,10,10);           
  g.fillRect(Xposition+290,20,10,10);
  g.fillRect(Xposition+300,20,10,10);
  g.fillRect(Xposition+260,30,10,10);
  g.fillRect(Xposition+270,30,10,10);
  g.fillRect(Xposition+280,30,10,10);
  g.fillRect(Xposition+290,30,10,10);
  g.fillRect(Xposition+300,30,10,10);
  g.fillRect(Xposition+310,30,10,10);
  g.fillRect(Xposition+250,40,10,10);
  g.fillRect(Xposition+260,40,10,10);
  g.fillRect(Xposition+280,40,10,10);
  g.fillRect(Xposition+290,40,10,10);
  g.fillRect(Xposition+310,40,10,10);
  g.fillRect(Xposition+320,40,10,10);
  g.fillRect(Xposition+250,50,10,10);
  g.fillRect(Xposition+260,50,10,10);
  g.fillRect(Xposition+270,50,10,10);
  g.fillRect(Xposition+280,50,10,10);
  g.fillRect(Xposition+290,50,10,10);
  g.fillRect(Xposition+300,50,10,10);
  g.fillRect(Xposition+310,50,10,10);
  g.fillRect(Xposition+320,50,10,10);               //20=250 30=260 40=270 50=280 60=290 70=300 80=310 90=320
  g.fillRect(Xposition+260,60,10,10);
  g.fillRect(Xposition+280,60,10,10);
  g.fillRect(Xposition+290,60,10,10);
  g.fillRect(Xposition+310,60,10,10);
  g.fillRect(Xposition+250,70,10,10);
  g.fillRect(Xposition+320,70,10,10);
  g.fillRect(Xposition+260,80,10,10);
  g.fillRect(Xposition+310,80,10,10);

  g.setColor(Color.yellow);
  g.fillRect(Xposition+370,10,10,10);           
  g.fillRect(Xposition+430,10,10,10);
  g.fillRect(Xposition+380,20,10,10);
  g.fillRect(Xposition+420,20,10,10);
  g.fillRect(Xposition+370,30,10,10);
  g.fillRect(Xposition+380,30,10,10);
  g.fillRect(Xposition+390,30,10,10);
  g.fillRect(Xposition+400,30,10,10);
  g.fillRect(Xposition+410,30,10,10);
  g.fillRect(Xposition+420,30,10,10);
  g.fillRect(Xposition+430,30,10,10);
  g.fillRect(Xposition+360,40,10,10);
  g.fillRect(Xposition+370,40,10,10);
  g.fillRect(Xposition+390,40,10,10);
  g.fillRect(Xposition+400,40,10,10);
  g.fillRect(Xposition+410,40,10,10);
  g.fillRect(Xposition+430,40,10,10);
  g.fillRect(Xposition+440,40,10,10);
  g.fillRect(Xposition+350,50,10,10);
  g.fillRect(Xposition+360,50,10,10);
  g.fillRect(Xposition+370,50,10,10);
  g.fillRect(Xposition+380,50,10,10);
  g.fillRect(Xposition+390,50,10,10);
  g.fillRect(Xposition+400,50,10,10);
  g.fillRect(Xposition+410,50,10,10);
  g.fillRect(Xposition+420,50,10,10);
  g.fillRect(Xposition+430,50,10,10);
  g.fillRect(Xposition+440,50,10,10);
  g.fillRect(Xposition+450,50,10,10);       //120=350 130=360 140=370 150=380 160=390 170=400 180=410 190=420 200=430 210=440 220=450
  g.fillRect(Xposition+350,60,10,10);
  g.fillRect(Xposition+370,60,10,10);
  g.fillRect(Xposition+380,60,10,10);
  g.fillRect(Xposition+390,60,10,10);
  g.fillRect(Xposition+400,60,10,10);
  g.fillRect(Xposition+410,60,10,10);
  g.fillRect(Xposition+420,60,10,10);
  g.fillRect(Xposition+430,60,10,10);
  g.fillRect(Xposition+450,60,10,10);
  g.fillRect(Xposition+350,70,10,10);
  g.fillRect(Xposition+370,70,10,10);
  g.fillRect(Xposition+430,70,10,10);
  g.fillRect(Xposition+450,70,10,10);
  g.fillRect(Xposition+380,80,10,10);
  g.fillRect(Xposition+390,80,10,10);
  g.fillRect(Xposition+410,80,10,10);
  g.fillRect(Xposition+420,80,10,10);

   Xposition--;
     if (Xposition < -500)
  {
Xposition = 500;
}

 g.setColor(Color.green);
 g.fillRect(Xposition1+230,130,10,10);
 g.fillRect(Xposition1+240,130,10,10);
 g.fillRect(Xposition1+250,130,10,10);
 g.fillRect(Xposition1+260,130,10,10);
 g.fillRect(Xposition1+270,130,10,10);
 g.fillRect(Xposition1+280,130,10,10);  
 g.fillRect(Xposition1+210,140,10,10);
 g.fillRect(Xposition1+220,140,10,10);
 g.fillRect(Xposition1+230,140,10,10);
 g.fillRect(Xposition1+240,140,10,10);
   g.fillRect(Xposition1+250,140,10,10);
  g.fillRect(Xposition1+260,140,10,10);
  g.fillRect(Xposition1+270,140,10,10);
  g.fillRect(Xposition1+280,140,10,10);
  g.fillRect(Xposition1+290,140,10,10);
  g.fillRect(Xposition1+300,140,10,10);
  g.fillRect(Xposition1+200,150,10,10);
 g.fillRect(Xposition1+210,150,10,10);
  g.fillRect(Xposition1+220,150,10,10);
 g.fillRect(Xposition1+230,150,10,10);
  g.fillRect(Xposition1+240,150,10,10);
   g.fillRect(Xposition1+250,150,10,10);
g.fillRect(Xposition1+260,150,10,10);
g.fillRect(Xposition1+270,150,10,10);
g.fillRect(Xposition1+280,150,10,10);
g.fillRect(Xposition1+290,150,10,10);
g.fillRect(Xposition1+300,150,10,10);
g.fillRect(Xposition1+310,150,10,10);
g.fillRect(Xposition1+190,160,10,10);
g.fillRect(Xposition1+200,160,10,10);
g.fillRect(Xposition1+220,160,10,10);
g.fillRect(Xposition1+230,160,10,10);
g.fillRect(Xposition1+250,160,10,10);
g.fillRect(Xposition1+260,160,10,10);
g.fillRect(Xposition1+280,160,10,10);
g.fillRect(Xposition1+290,160,10,10);
g.fillRect(Xposition1+310,160,10,10);
g.fillRect(Xposition1+320,160,10,10);
g.fillRect(Xposition1+180,170,10,10);
g.fillRect(Xposition1+190,170,10,10);
g.fillRect(Xposition1+200,170,10,10);
g.fillRect(Xposition1+210,170,10,10);
g.fillRect(Xposition1+220,170,10,10);
g.fillRect(Xposition1+230,170,10,10);
g.fillRect(Xposition1+240,170,10,10);
g.fillRect(Xposition1+250,170,10,10);
g.fillRect(Xposition1+260,170,10,10);
g.fillRect(Xposition1+270,170,10,10);
g.fillRect(Xposition1+280,170,10,10);
g.fillRect(Xposition1+290,170,10,10);
g.fillRect(Xposition1+300,170,10,10);
g.fillRect(Xposition1+310,170,10,10);
g.fillRect(Xposition1+320,170,10,10);
g.fillRect(Xposition1+330,170,10,10);
g.fillRect(Xposition1+200,180,10,10);
g.fillRect(Xposition1+210,180,10,10);
g.fillRect(Xposition1+220,180,10,10);
g.fillRect(Xposition1+250,180,10,10);
g.fillRect(Xposition1+260,180,10,10);
g.fillRect(Xposition1+290,180,10,10);
g.fillRect(Xposition1+300,180,10,10);
g.fillRect(Xposition1+310,180,10,10);
g.fillRect(Xposition1+210,190,10,10);
g.fillRect(Xposition1+300,190,10,10);

Xposition1++;
if (Xposition1 > 500)
{
    Xposition1 = -500;
}

Yposition--;
if (Yposition > 500)
{
    Yposition = -500;
}

g.setColor(Color.magenta);
g.fillRect(260,Yposition+240,10,10);
g.fillRect(260,Yposition+250,10,10);

g.setColor(Color.white);

g.fillRect(260,310,10,10);
g.fillRect(250,320,10,10);
g.fillRect(260,320,10,10);
g.fillRect(270,320,10,10);
g.fillRect(250,330,10,10);
g.fillRect(260,330,10,10);
g.fillRect(270,330,10,10);
g.fillRect(200,340,10,10);
g.fillRect(210,340,10,10);
g.fillRect(220,340,10,10);
g.fillRect(230,340,10,10);
g.fillRect(240,340,10,10);
g.fillRect(250,340,10,10);
g.fillRect(260,340,10,10);
g.fillRect(270,340,10,10);
g.fillRect(280,340,10,10);
g.fillRect(290,340,10,10);
g.fillRect(300,340,10,10);
g.fillRect(310,340,10,10);
g.fillRect(320,340,10,10);
g.fillRect(190,350,10,10);
g.fillRect(200,350,10,10);
g.fillRect(210,350,10,10);
g.fillRect(220,350,10,10);
g.fillRect(230,350,10,10);
g.fillRect(240,350,10,10);
g.fillRect(250,350,10,10);
g.fillRect(260,350,10,10);
g.fillRect(270,350,10,10);
g.fillRect(280,350,10,10);
g.fillRect(290,350,10,10);
g.fillRect(300,350,10,10);
g.fillRect(310,350,10,10);
g.fillRect(320,350,10,10);
g.fillRect(330,350,10,10);
g.fillRect(190,360,10,10);
g.fillRect(200,360,10,10);
g.fillRect(210,360,10,10);
 g.fillRect(220,360,10,10);
g.fillRect(230,360,10,10);
g.fillRect(240,360,10,10);
g.fillRect(250,360,10,10);
g.fillRect(260,360,10,10);
g.fillRect(270,360,10,10);
g.fillRect(280,360,10,10);
g.fillRect(290,360,10,10);
g.fillRect(300,360,10,10);
g.fillRect(310,360,10,10);
g.fillRect(320,360,10,10);
g.fillRect(330,360,10,10);
g.fillRect(190,370,10,10);
g.fillRect(200,370,10,10);
g.fillRect(210,370,10,10);
g.fillRect(220,370,10,10);
g.fillRect(230,370,10,10);
g.fillRect(240,370,10,10);
g.fillRect(250,370,10,10);
g.fillRect(260,370,10,10);
g.fillRect(270,370,10,10);
g.fillRect(280,370,10,10);
g.fillRect(290,370,10,10);
g.fillRect(300,370,10,10);
g.fillRect(310,370,10,10);
g.fillRect(320,370,10,10);
g.fillRect(330,370,10,10);
g.fillRect(190,380,10,10);
g.fillRect(200,380,10,10);
g.fillRect(210,380,10,10);
g.fillRect(220,380,10,10);
g.fillRect(230,380,10,10);
g.fillRect(240,380,10,10);
g.fillRect(250,380,10,10);
g.fillRect(260,380,10,10);
g.fillRect(270,380,10,10);
g.fillRect(280,380,10,10);
g.fillRect(290,380,10,10);
g.fillRect(300,380,10,10);
g.fillRect(310,380,10,10);
g.fillRect(320,380,10,10);
g.fillRect(330,380,10,10);

}
public static void main(String[] args)
{

 }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T03:42:19.443

首先，不要这样做。

```
public void run() {
    while (true) {
        setBackground(Color.black);
        repaint();
        try {
            Thread.sleep(20);
        } catch (InterruptedException e) {
        }
    }
} 
```

虽然我认为这是从上下文内部运行的，但您正在从[Event Dispatching Thread](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)`Runnable`外部影响 UI ，这绝不是一个好主意。

您最好使用[`javax.swing.Timer`](http://docs.oracle.com/javase/7/docs/api/javax/swing/Timer.html)，请参阅[如何使用 Swing 计时器](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)了解更多信息。

其次。您的示例代码没有任何双重缓冲。

双缓冲将使您使用屏幕外缓冲（例如 a [`BufferedImage`](http://docs.oracle.com/javase/7/docs/api/java/awt/image/BufferedImage.html)）将屏幕内容绘制到屏幕上，然后再将其渲染到屏幕上。

第三，如果您不想实现自己的双缓冲解决方案，我会使用 a `JPanel`or`JComponent`并将它们添加到`JAppelt`. `JComponent`（它是孩子们）默认支持双缓冲（你不应该直接绘制到顶级容器，你不想负责的引擎盖下有很多讨厌的东西）。

第四，我会花一些时间认真阅读[Graphics 2D](http://docs.oracle.com/javase/tutorial/2d/index.html)教程。

**更新**

这是我对基本想法的看法。注意，我没有添加播放器，你可以弄清楚。

```
public class SpaceFrame {

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }
                new SpaceFrame();
            }
        });
    }

    public SpaceFrame() {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLayout(new BorderLayout());
        frame.add(new SpacePane());
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }

    protected class SpacePane extends JPanel implements Screen {

        private BufferedImage buffer;

        public SpacePane() {
        }

        @Override
        public void addNotify() {
            super.addNotify();
            // We need to make that the screen pane is actually on the screen...
            EventQueue.invokeLater(new Runnable() {
                @Override
                public void run() {
                    Thread thread = new Thread(new UpdaterThread(SpacePane.this));
                    thread.setDaemon(true);
                    thread.start();

                }
            });
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(600, 400);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            if (buffer != null) {
                Graphics2D g2d = (Graphics2D) g;
                g2d.drawImage(buffer, 0, 0, this);
            }
        }

        @Override
        public void renderBuffer(final BufferedImage image) {
            SwingUtilities.invokeLater(new Runnable() {
                @Override
                public void run() {
                    buffer = image;
                    repaint();
                }
            });
        }
    }

    protected interface Screen {
        public Dimension getSize();
        public void renderBuffer(final BufferedImage image);
    }

    protected class UpdaterThread implements Runnable {

        private int cycle = 0;
        private BufferedImage[] buffers = new BufferedImage[2];
        private Screen screen;
        // A row of aliens...
        private RowOfAliens rowOfAliens;
        // Adjusts the speed at which the aliens move
        private int speed = 10;

        public UpdaterThread(Screen screen) {
            this.screen = screen;
        }

        public Screen getScreen() {
            return screen;
        }

        @Override
        public void run() {
            // We're only using 1 row...
            rowOfAliens = new RowOfAliens();
            rowOfAliens.setLocation(new Point(0, 0));
            rowOfAliens.setDirection(10);

            while (true) {

                try {
                    Thread.sleep(16); // 60 fps
                } catch (InterruptedException ex) {
                }

                cycle++;

                // Update the offscreen buffer...
                BufferedImage buffer = getBuffer();
                if (buffer != null) {

                    // Move the alients...
                    updateAliens();

                    // Paint the various layers
                    int width = buffer.getWidth();
                    int height = buffer.getHeight();
                    Graphics2D g2d = buffer.createGraphics();
                    // You could paint a space scape here
                    paintBackground(g2d, width, height);
                    // The aliens and other game arifcates
                    paintMidground(g2d, width, height);
                    // Special effects
                    paintForeground(g2d, width, height);
                    g2d.dispose();

                    // Send the buffer to the screen
                    paintBuffer(buffer);

                }

            }

        }

        protected void updateAliens() {
            Screen screen = getScreen();
            if (screen != null) {

                // Controls the speed at which the aliens move
                if (cycle % speed == 0) {
                    // Get the aliens current location and direction...
                    Point p = rowOfAliens.getLocation();
                    p.x += rowOfAliens.getDirection();

                    int screenWidth = screen.getSize().width;
                    int screenHeight = screen.getSize().height;
                    // Boundray check...
                    if (p.x + rowOfAliens.getBounds().width > screenWidth) {
                        p.x = screenWidth - rowOfAliens.getBounds().width;
                        // Reverse direction
                        rowOfAliens.setDirection(-10);
                        p.y += 10;
                    } else if (p.x < 0) {
                        p.x = 0;
                        p.y += 10;
                        // Reverse direction
                        rowOfAliens.setDirection(10);
                    }
                    // Set the location of the row...
                    rowOfAliens.setLocation(p);

                }

            }

        }

        protected void paintBackground(Graphics2D g2d, int width, int height) {
            g2d.setColor(Color.BLACK);
            g2d.fillRect(0, 0, width, height);
        }

        protected void paintMidground(Graphics2D g2d, int width, int height) {
            Point p = rowOfAliens.getLocation();
            g2d.translate(p.x, p.y);
            rowOfAliens.paint(g2d);
            g2d.translate(-p.x, -p.y);
        }

        protected void paintForeground(Graphics2D g2d, int width, int height) {
        }

        protected BufferedImage getBuffer() {
            BufferedImage buffer = null;

            Screen screen = getScreen();
            if (screen != null) {
                // Determine which buffer to use
                int index = 0;
                if (cycle % 2 != 0) {
                    index = 1;
                }

                buffer = buffers[index];
                if (buffer == null || buffer.getWidth() != screen.getSize().width || buffer.getHeight() != screen.getSize().height) {
                    // Create a compataible graphics object, so it will render faster on the screen...
                    GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
                    GraphicsDevice gs = ge.getDefaultScreenDevice();
                    GraphicsConfiguration gc = gs.getDefaultConfiguration();

                    buffer = gc.createCompatibleImage(screen.getSize().width, screen.getSize().height, Transparency.OPAQUE);
                    buffers[index] = buffer;
                }

            }

            return buffer;

        }

        protected void paintBuffer(BufferedImage buffer) {
            // Send the buffer to the screen...
            Screen screen = getScreen();
            if (screen != null) {
                screen.renderBuffer(buffer);
            }
        }
    }

    protected class RowOfAliens {

        private List<Alien> lstAliens;
        private Point location;
        private int direction;
        private Rectangle bounds;

        public RowOfAliens() {
            lstAliens = new ArrayList<Alien>(25);
            lstAliens.add(new AlienType1());
            lstAliens.add(new AlienType2());
            lstAliens.add(new AlienType3());
            lstAliens.add(new AlienType4());

            setLocation(new Point(0, 0));
            // Calculate the size of the row...
            bounds = new Rectangle(Integer.MAX_VALUE, Integer.MAX_VALUE, 0, 0);

            int index = 0;
            for (Alien alien : lstAliens) {

                Rectangle aBounds = alien.getBounds();
                aBounds.setLocation(alien.getLocation());
                System.out.println(index + ": " + aBounds);

                bounds.x = Math.min(bounds.x, aBounds.x);
                bounds.y = Math.min(bounds.y, aBounds.y);

                bounds.width = Math.max(bounds.width, aBounds.x + aBounds.width);
                bounds.height = Math.max(bounds.height, aBounds.y + aBounds.height);

            }

            System.out.println(bounds);

        }

        protected void paint(Graphics2D g2d) {
            // Paint the aliens
            Point pos = getLocation();

            for (Alien alien : lstAliens) {
                g2d.setColor(alien.getColor());
                Point p = alien.getLocation();
                // We need to take into account the current location of the row
                // in relation to the alien...
                int xPos = p.x - pos.x;
                g2d.translate(xPos, 0);
                g2d.fill(alien);
                g2d.translate(-xPos, 0);
            }

        }

        protected void layoutRow() {
            // Layout the aliens within there row based on the currrent location...
            // Techniqually, we could offset the aliens at 0x0 and simply adjust the
            // the x position by the width of each alien and it's gap
            // This would eliminate the need to adjust the position in the
            // paint method, but hay...
            Point p = new Point(getLocation());
            for (Alien alien : lstAliens) {
                alien.setLocation(p);
                p = new Point(p.x, p.y);
                p.x += alien.getBounds().width + 10;
            }

        }

        public Rectangle getBounds() {
            return bounds;
        }

        public void setLocation(Point point) {
            if (location == null || point == null || (!location.equals(point))) {
                location = point;
                layoutRow();
            }
        }

        public Point getLocation() {
            return new Point(location);
        }

        public void setDirection(int value) {
            direction = value;
        }

        public int getDirection() {
            return direction;
        }
    }

    protected abstract class Alien extends Path2D.Float {

        private Point location;
        private Color color;

        public Color getColor() {
            return color;
        }

        public void setColor(Color color) {
            this.color = color;
        }

        public void setLocation(Point location) {
            this.location = location;
        }

        public Point getLocation() {
            return location;
        }

        public void addRectangle(int x, int y, int width, int height) {
            moveTo(x, y);
            lineTo(x + width, y);
            lineTo(x + width, y + height);
            lineTo(x, y + height);
            lineTo(x, y);
        }
    }

    protected class AlienType1 extends Alien {

        public AlienType1() {
            setColor(Color.ORANGE);
            addRectangle(30, 0, 10, 10);
            addRectangle(40, 0, 10, 10);
            addRectangle(20, 10, 10, 10);
            addRectangle(30, 10, 10, 10);
            addRectangle(40, 10, 10, 10);
            addRectangle(50, 10, 10, 10);
            addRectangle(10, 20, 10, 10);
            addRectangle(20, 20, 10, 10);
            addRectangle(30, 20, 10, 10);
            addRectangle(40, 20, 10, 10);
            addRectangle(50, 20, 10, 10);
            addRectangle(60, 20, 10, 10);
            addRectangle(0, 30, 10, 10);
            addRectangle(10, 30, 10, 10);
            addRectangle(30, 30, 10, 10);
            addRectangle(40, 30, 10, 10);
            addRectangle(60, 30, 10, 10);
            addRectangle(70, 30, 10, 10);
            addRectangle(0, 40, 10, 10);
            addRectangle(10, 40, 10, 10);
            addRectangle(20, 40, 10, 10);
            addRectangle(30, 40, 10, 10);
            addRectangle(40, 40, 10, 10);
            addRectangle(50, 40, 10, 10);
            addRectangle(60, 40, 10, 10);
            addRectangle(70, 40, 10, 10);
            addRectangle(20, 50, 10, 10);
            addRectangle(50, 50, 10, 10);
            addRectangle(10, 60, 10, 10);
            addRectangle(30, 60, 10, 10);
            addRectangle(40, 60, 10, 10);
            addRectangle(60, 60, 10, 10);
            addRectangle(0, 70, 10, 10);
            addRectangle(20, 70, 10, 10);
            addRectangle(50, 70, 10, 10);
            addRectangle(70, 70, 10, 10);
            closePath();
        }
    }

    protected class AlienType2 extends Alien {

        public AlienType2() {
            setColor(Color.RED);
            addRectangle(20, 0, 10, 10);
            addRectangle(80, 0, 10, 10);
            addRectangle(0, 10, 10, 10);
            addRectangle(30, 10, 10, 10);
            addRectangle(70, 10, 10, 10);
            addRectangle(100, 10, 10, 10);
            addRectangle(0, 20, 10, 10);
            addRectangle(20, 20, 10, 10);
            addRectangle(30, 20, 10, 10);
            addRectangle(40, 20, 10, 10);
            addRectangle(50, 20, 10, 10);
            addRectangle(60, 20, 10, 10);
            addRectangle(70, 20, 10, 10);
            addRectangle(80, 20, 10, 10);
            addRectangle(100, 20, 10, 10);
            addRectangle(0, 30, 10, 10);
            addRectangle(10, 30, 10, 10);
            addRectangle(20, 30, 10, 10);
            addRectangle(40, 30, 10, 10);
            addRectangle(50, 30, 10, 10);
            addRectangle(60, 30, 10, 10);
            addRectangle(80, 30, 10, 10);
            addRectangle(90, 30, 10, 10);
            addRectangle(100, 30, 10, 10);
            addRectangle(0, 40, 10, 10);
            addRectangle(10, 40, 10, 10);
            addRectangle(20, 40, 10, 10);
            addRectangle(30, 40, 10, 10);
            addRectangle(40, 40, 10, 10);
            addRectangle(50, 40, 10, 10);
            addRectangle(60, 40, 10, 10);
            addRectangle(70, 40, 10, 10);
            addRectangle(80, 40, 10, 10);
            addRectangle(90, 40, 10, 10);
            addRectangle(100, 40, 10, 10);
            addRectangle(10, 50, 10, 10);
            addRectangle(20, 50, 10, 10);
            addRectangle(30, 50, 10, 10);
            addRectangle(40, 50, 10, 10);
            addRectangle(50, 50, 10, 10);
            addRectangle(60, 50, 10, 10);
            addRectangle(70, 50, 10, 10);
            addRectangle(80, 50, 10, 10);
            addRectangle(90, 50, 10, 10);
            addRectangle(20, 60, 10, 10);
            addRectangle(80, 60, 10, 10);
            addRectangle(10, 70, 10, 10);
            addRectangle(90, 70, 10, 10);
            closePath();
        }
    }

    protected class AlienType3 extends Alien {

        public AlienType3() {
            setColor(Color.YELLOW);
            addRectangle(20, 0, 10, 10);
            addRectangle(20, 0, 10, 10);
            addRectangle(80, 0, 10, 10);
            addRectangle(30, 10, 10, 10);
            addRectangle(70, 10, 10, 10);
            addRectangle(20, 20, 10, 10);
            addRectangle(30, 20, 10, 10);
            addRectangle(40, 20, 10, 10);
            addRectangle(50, 20, 10, 10);
            addRectangle(60, 20, 10, 10);
            addRectangle(70, 20, 10, 10);
            addRectangle(80, 20, 10, 10);
            addRectangle(10, 30, 10, 10);
            addRectangle(20, 30, 10, 10);
            addRectangle(40, 30, 10, 10);
            addRectangle(50, 30, 10, 10);
            addRectangle(60, 30, 10, 10);
            addRectangle(80, 30, 10, 10);
            addRectangle(90, 30, 10, 10);
            addRectangle(0, 40, 10, 10);
            addRectangle(10, 40, 10, 10);
            addRectangle(20, 40, 10, 10);
            addRectangle(30, 40, 10, 10);
            addRectangle(40, 40, 10, 10);
            addRectangle(50, 40, 10, 10);
            addRectangle(60, 40, 10, 10);
            addRectangle(70, 40, 10, 10);
            addRectangle(80, 40, 10, 10);
            addRectangle(90, 40, 10, 10);
            addRectangle(100, 40, 10, 10);
            addRectangle(0, 50, 10, 10);
            addRectangle(20, 50, 10, 10);
            addRectangle(30, 50, 10, 10);
            addRectangle(40, 50, 10, 10);
            addRectangle(50, 50, 10, 10);
            addRectangle(60, 50, 10, 10);
            addRectangle(70, 50, 10, 10);
            addRectangle(80, 50, 10, 10);
            addRectangle(100, 50, 10, 10);
            addRectangle(0, 60, 10, 10);
            addRectangle(20, 60, 10, 10);
            addRectangle(80, 60, 10, 10);
            addRectangle(100, 60, 10, 10);
            addRectangle(30, 70, 10, 10);
            addRectangle(40, 70, 10, 10);
            addRectangle(60, 70, 10, 10);
            addRectangle(70, 70, 10, 10);
            closePath();
        }
    }

    protected class AlienType4 extends Alien {

        public AlienType4() {
            setColor(Color.GREEN);
            addRectangle(50, 0, 10, 10);
            addRectangle(60, 0, 10, 10);
            addRectangle(70, 0, 10, 10);
            addRectangle(80, 0, 10, 10);
            addRectangle(90, 0, 10, 10);
            addRectangle(100, 0, 10, 10);
            addRectangle(30, 10, 10, 10);
            addRectangle(40, 10, 10, 10);
            addRectangle(50, 10, 10, 10);
            addRectangle(60, 10, 10, 10);
            addRectangle(70, 10, 10, 10);
            addRectangle(80, 10, 10, 10);
            addRectangle(90, 10, 10, 10);
            addRectangle(100, 10, 10, 10);
            addRectangle(110, 10, 10, 10);
            addRectangle(120, 10, 10, 10);
            addRectangle(20, 20, 10, 10);
            addRectangle(30, 20, 10, 10);
            addRectangle(40, 20, 10, 10);
            addRectangle(50, 20, 10, 10);
            addRectangle(60, 20, 10, 10);
            addRectangle(70, 20, 10, 10);
            addRectangle(80, 20, 10, 10);
            addRectangle(90, 20, 10, 10);
            addRectangle(100, 20, 10, 10);
            addRectangle(110, 20, 10, 10);
            addRectangle(120, 20, 10, 10);
            addRectangle(130, 20, 10, 10);
            addRectangle(10, 30, 10, 10);
            addRectangle(20, 30, 10, 10);
            addRectangle(40, 30, 10, 10);
            addRectangle(50, 30, 10, 10);
            addRectangle(70, 30, 10, 10);
            addRectangle(80, 30, 10, 10);
            addRectangle(100, 30, 10, 10);
            addRectangle(110, 30, 10, 10);
            addRectangle(130, 30, 10, 10);
            addRectangle(140, 30, 10, 10);
            addRectangle(0, 40, 10, 10);
            addRectangle(10, 40, 10, 10);
            addRectangle(20, 40, 10, 10);
            addRectangle(30, 40, 10, 10);
            addRectangle(40, 40, 10, 10);
            addRectangle(50, 40, 10, 10);
            addRectangle(60, 40, 10, 10);
            addRectangle(70, 40, 10, 10);
            addRectangle(80, 40, 10, 10);
            addRectangle(90, 40, 10, 10);
            addRectangle(100, 40, 10, 10);
            addRectangle(110, 40, 10, 10);
            addRectangle(120, 40, 10, 10);
            addRectangle(130, 40, 10, 10);
            addRectangle(140, 40, 10, 10);
            addRectangle(150, 40, 10, 10);
            addRectangle(20, 50, 10, 10);
            addRectangle(30, 50, 10, 10);
            addRectangle(40, 50, 10, 10);
            addRectangle(70, 50, 10, 10);
            addRectangle(80, 50, 10, 10);
            addRectangle(110, 50, 10, 10);
            addRectangle(120, 50, 10, 10);
            addRectangle(130, 50, 10, 10);
            addRectangle(30, 60, 10, 10);
            addRectangle(120, 60, 10, 10);
            closePath();
        }
    }
} 
```

# python - 填写并提交html表单

> ID：12756443
> 
> 赞同：14
> 
> 时间：2012-10-06T03:29:49.847
> 
> 标签：python, python-2.7

我正在尝试/想要编写一个 Python 脚本（2.7），该脚本会转到网站上的表单（名称为`"form1"`），并用单词填写所述表单中的第一个输入字段，用单词填写`hello`第二个输入字段`Ronald`，第三个字段`ronaldG54@gmail.com`

任何人都可以帮我编码或给我有关如何执行此操作的任何提示或指示吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-06T05:48:09.800

除了 David 提到的 Mechanize 和 Selenium 之外，还可以使用[`Requests`](http://docs.python-requests.org)and来实现[`BeautifulSoup`](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)。

更清楚地说，用于`Requests`向服务器发送请求并从服务器检索响应，并用于`BeautifulSoup`解析响应 html 以了解要向服务器发送哪些参数。

这是我编写的一个示例脚本，它使用`Requests`和`BeautifulSoup`提交用户名和密码以登录维基百科：

```
import requests
from bs4 import BeautifulSoup as bs

def get_login_token(raw_resp):
    soup = bs(raw_resp.text, 'lxml')
    token = [n['value'] for n in soup.find_all('input')
             if n['name'] == 'wpLoginToken']
    return token[0]

payload = {
    'wpName': 'my_username',
    'wpPassword': 'my_password',
    'wpLoginAttempt': 'Log in',
    #'wpLoginToken': '',
    }

with requests.session() as s:
    resp = s.get('http://en.wikipedia.org/w/index.php?title=Special:UserLogin')
    payload['wpLoginToken'] = get_login_token(resp)

    response_post = s.post('http://en.wikipedia.org/w/index.php?title=Special:UserLogin&action=submitlogin&type=login',
                           data=payload)
    response = s.get('http://en.wikipedia.org/wiki/Special:Watchlist') 
```

* * *

更新：

对于您的具体情况，这里是工作代码：

```
import requests
from bs4 import BeautifulSoup as bs

def get_session_id(raw_resp):
    soup = bs(raw_resp.text, 'lxml')
    token = soup.find_all('input', {'name':'survey_session_id'})[0]['value']
    return token

payload = {
    'f213054909': 'o213118718',  # 21st checkbox
    'f213054910': 'Ronald',  # first input-field
    'f213054911': 'ronaldG54@gmail.com',
    }

url = r'https://app.e2ma.net/app2/survey/39047/213008231/f2e46b57c8/?v=a'

with requests.session() as s:
    resp = s.get(url)
    payload['survey_session_id'] = get_session_id(resp)
    response_post = s.post(url, data=payload)
    print response_post.text 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-06T04:36:15.227

看看[机械化](http://wwwsearch.sourceforge.net/mechanize/)和[硒](http://seleniumhq.org/)。两者都是出色的软件，可让您自动填写和提交表单以及其他浏览器任务。

# jquery - 在焦点 jquery 上将占位符输入类型文本更改为密码

> ID：12756454
> 
> 赞同：2
> 
> 时间：2012-10-06T03:31:39.900
> 
> 标签：jquery, html, input, passwords, placeholder

好的，我有一个输入标签。我使用了 jquery 输入提示，因此它显示了 title="password"。但是，如果它的类型是密码，它就不会显示标题，它只会看起来*****。因此，我需要将输入输入为“文本”类型，然后将其更改为输入：焦点上的“密码”，并在失去焦点时返回文本。我如何用jquery做到这一点？

```
<input name="pwd" type="text" class="pwd" value="" title="Password"/>
// look like below on focus and back to text on focus out
<input name="pwd" type="password" class="pwd" value="" title="Password"/> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-06T03:37:26.110

您可以使用新的 html5 属性`placeholder`，如下所示：

```
<input type="password" name="pass" placeholder="Enter your password" />​ 
```

您可以[**在此处**](http://caniuse.com/#search=placeholder)查看浏览器对此属性的支持。如您所见，IE 7、8 和 9 缺少它，但如果您想支持它们，请查看此[答案](https://stackoverflow.com/a/7225820/352672)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T03:55:21.400

`.prop`只需通过jQuery中的方法更改输入类型：

```
$(document).ready(function() {
    $('#passwordInput').focus(function() {
        $(this).prop('type', 'password').val('');
    });
}); 
```

这是一个小提琴：http: [//jsfiddle.net/7hVjV/](http://jsfiddle.net/7hVjV/)

# c - 无法作为进程执行命令

> ID：12756456
> 
> 赞同：0
> 
> 时间：2012-10-06T03:32:02.877
> 
> 标签：c, windows

> **可能重复：**
> [尝试在 c 中为 win32 api 创建一个简单的 shell](https://stackoverflow.com/questions/9273721/trying-to-create-a-simple-shell-in-c-for-win32-api)

我正在 Windows 中为低级编码分配做一些 C 编程，但我正试图让这个创建过程正常工作。我试图尝试将命令作为进程执行，任何可以放入 dos 提示符的命令。我主要是尝试在单独的进程中执行“dir”。谁能明白为什么这行不通？

```
if (!CreateProcess(NULL, "dir",
        NULL,
        NULL,
        TRUE,
        0,
        NULL,
        NULL,
        &si,
        &pi))
    {
        fprintf(stderr, "Create Process directly has Failed\n");
        return -1;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T03:56:41.613

由于 dir 是内置的 cmd.exe ，因此您需要运行 cmd ，即设置`lpApplicationName`为`cmd.exe`和 `lpCommandLine`dir

# java - 在用户定义的 Java 双链表中添加和删除元素

> ID：12756458
> 
> 赞同：0
> 
> 时间：2012-10-06T03:32:18.510
> 
> 标签：java, linked-list

我正在为下周的考试而学习，我希望有人能帮助我在双向链表中添加和删除元素。这个逻辑对我来说很有意义，不幸的是我还不太擅长编码（只是我的第二门计算机科学课程）。我浏览了整个网络和我的文本，但我似乎找不到与我的问题足够接近的例子。下面我将发布我的教授要求我完成的工作，以及我当前的代码。预先感谢您的任何帮助。

**更新**

我也遇到了添加问题，但是有人能够帮助我，但是我的删除方法仍然存在问题。我觉得奇怪的是，我的教授有一个返回类型不是 void 的 remove 方法。有人可以解释一下吗？无论如何，我的更新代码如下。

**来自教授：**

按照课堂讲座的指示填写 CS401DblLinkedListImpl.java 中缺少的代码。

要测试您的代码，请创建一个双向链表并在其中输入以下 String 类型的元素：

比尔、罗汉、詹姆斯、克里希纳、哈维尔、丽莎

(a) 从头开始​​打印链表。

(b) 从末尾开始打印链表。

(c) 删除 Bill 并从头开始打印链表。

(d) 删除 Lisa 并从 end 开始打印链表。

(e) 移除 Krishna 并从头开始打印链表。

下面这组代码是我的用户定义类，我将测试的方法是 boolean add(E e)、E remove(int n)、void print_from_beginning() 和 void print_from_end()：

```
package week6;

import java.util.Iterator;

public class CS401DblLinkedListImpl<E> //implements CS401CollectionInterface<E> 
{
   private LinkEntry<E> head = null;
   private LinkEntry<E> tail = null;
   private int size = 0;

   public CS401DblLinkedListImpl()
   {
      head = tail = null;
   }

   public boolean is_empty()
   {
      if (head == null) 
          return true;

      return false;
   }

   public int size()
   {
       int count = 0;
       for (LinkEntry<E> current = head; current != null; current = current.next)
           count++;
       return count;
   }

   /*
    * Add e to the end of the doubly linked list.
    * Returns true - if e was successfully added, false otherwise.
    */
   public boolean add(E e)
   {   
      LinkEntry<E> new_element = new LinkEntry<E>();
      new_element.element = e;

          if (head == null)
          {
          new_element.next = head;
          head = new_element;
          tail = head;
      }
      else
      {
          tail.next = new_element;
          new_element.previous = tail;
          tail = new_element;
      }
      return true;
   }

   /*
    * Remove the nth element in the list.  The first element is element 1.
    * Return the removed element to the caller.
    */
   public E remove(int n)
   {
      LinkEntry<E> current = new LinkEntry<E>();
      int i = 0;

      while (n == i++)
      {
          current.previous.next = current.next;
          if (current.next == null)
          {
              current.next.previous = current.previous;
          }
      }
      return (E) current;
   }

  /*
   * Print the doubly linked list starting at the beginning.
   */
   public void print_from_beginning()
   {
      LinkEntry<E> current = new LinkEntry<E>();
      for (current = head; current != null; current = current.next)
      {
          System.out.print(current.element + " ");
      }
   }

   /*
    * Print the doubly linked list starting the end.
    */
   public void print_from_end()
   {
      LinkEntry<E> current = new LinkEntry<E>();
      for (current = tail; current != null; current = current.previous)
      {
          System.out.print(current.element + " ");
      }
   }

   /* ------------------------------------------------------------------- */
   /* Inner classes                                                      */
   protected class LinkEntry<E>
   {
      protected E element;
      protected LinkEntry<E> next;
      protected LinkEntry<E> previous;

      protected LinkEntry() { element = null; next = previous = null; }
   }
   /* ------------------------------------------------------------------- */
   protected class CS401DblLinkedListImplIterate<E> implements Iterator<E>
   {

       protected LinkEntry<E> next;

       protected CS401DblLinkedListImplIterate()
       {
           next = (LinkEntry<E>) head;
       }

       @Override
       public boolean hasNext() {
           // TODO Auto-generated method stub
           return false;
       }

       @Override
       public E next() {
       // TODO Auto-generated method stub
       return null;
       }

       @Override
       public void remove() {
       // TODO Auto-generated method stub
       }
      }
} /* CS401LinkedListImpl<E> */ 
```

下面是我测试方法的主要课程：

```
package week6;

import java.util.*;

public class App {

    public static <E> void main(String[] args) {

    /*
     * Part 1 of lab 6: Testing CS401DblLinkedListImpl
     */
    System.out.println("Testing Lab 6: Part 1...");
    CS401DblLinkedListImpl<String> list = new CS401DblLinkedListImpl<String>();

    list.add("Bill");
    list.add("Rohan");
    list.add("James");
    list.add("Krishna");
    list.add("Javier");
    list.add("Lisa");

    System.out.println("List size after all names are added: " + list.size());

    //a. Print the linked list starting at the beginning.
    System.out.println("\nPrint the linked list starting at the beginning:");
    list.print_from_beginning();

    //b. Print the linked list starting at the end.
    System.out.println("\nPrint the linked list starting at the end:");
    list.print_from_end();

    //c. Remove Bill and print the linked list starting from beginning.
    System.out.println("\nRemove Bill and print the linked list starting from beginning:");
    list.remove(0);
    list.print_from_beginning();

    //d. Remove Lisa and print the linked list starting from end.
    System.out.println("\nRemove Lisa and print the linked list starting from end:");
    list.remove(4);
    list.print_from_end();

    //e. Remove Krishna and print the linked list starting from the beginning.
    System.out.println("\nRemove Krishna and print the linked list starting from the beginning:");
    list.remove(2);
    list.print_from_beginning();

    System.out.println("\nList size: " + list.size());
    }
} 
```

最后，下面是我运行程序时得到的结果：

```
Testing Lab 6: Part 1...
List size after all names are added: 6

Print the linked list starting at the beginning:
Bill Rohan James Krishna Javier Lisa 
Print the linked list starting at the end:
Lisa Javier Krishna James Rohan Bill 
Remove Bill and print the linked list starting from beginning:
Exception in thread "main" java.lang.NullPointerException
    at week6.CS401DblLinkedListImpl.remove(CS401DblLinkedListImpl.java:67)
    at week6.App.main(App.java:34) 
```

仅供参考，CS40​​1DblLinkedListImpl.java:67 指的是我的删除方法中的以下代码行：

```
 current.previous.next = current.next; 
```

对此的任何帮助将不胜感激。我觉得我有点接近答案，只需要澄清一下。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T04:01:27.703

您当前的代码将无法处理删除索引 0。

```
LinkEntry<E> current = head;
if (n == 0) {
    // something like this maybe...
    head = head.next;
    if (head != null) { head.previous = null; }
    return current;
} 
```

您从 i = 0 开始，但执行 i++，因此您处于领先地位，但索引为 1。

你的删除逻辑对我来说也很奇怪。

```
 current.previous.next == current (is true)
 current.next.previous == current (is true) 
```

所以它应该是这样的：

```
if (n == i++) {
    // We're at the spot so let's remove it.
    current.previous.next = current.next;
    if (current.next != null) { current.next.previous = current.previous; }
    return current;
} 
```

另外我相信你添加的逻辑也是错误的，应该是这样的。

```
LinkEntry<E> new_element = new LinkEntry<E>();
new_element.element = e;
if (head == null) {
    head = new_element;
    tail = head;
} else {
    tail.next = new_element;
    new_element.previous = tail;
    tail = new_element;
}

size++;  // You don't use size it looks like...  and your size starts at 1 which is 
         // wrong, it should start at 0 since it's empty, also remove would have to
         // update size.
return true; 
```

# android - 如何在 Android 应用程序中使用自定义字体？

> ID：12756464
> 
> 赞同：-1
> 
> 时间：2012-10-06T03:33:23.837
> 
> 标签：android, user-interface, fonts

我想在 android 应用程序中使用新的自定义字体。解释时请准确具体，我是新手。也就是说，我想让我的 android 应用程序使用这些新的 android 自定义字体[http://developer.android.com/design/style/typography.html](http://developer.android.com/design/style/typography.html)。谢谢你。请帮忙。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-06T03:36:54.827

我们可以通过这种方式使用自定义字体，

```
TextView txt = (TextView) findViewById(R.id.custom_font);  
Typeface font = Typeface.createFromAsset(getAssets(), "Chantelli_Antiqua.ttf");  
txt.setTypeface(font); 
```

有关完整知识，请参阅本[教程](http://mobile.tutsplus.com/tutorials/android/customize-android-fonts/)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-06T03:38:56.343

您只需将字体 .ttf 文件放在资产文件夹中，并将其分配给文本字段或您想在主要活动中应用的任何内容，如下所示：

```
TextView txt = (TextView) findViewById(R.id.custom_font);  
Typeface font = Typeface.createFromAsset(getAssets(), "Chantelli_Antiqua.ttf");  
txt.setTypeface(font); 
```

这是一个很棒的教程，它将教你所有你需要知道的：http: [//mobile.tutsplus.com/tutorials/android/customize-android-fonts/](http://mobile.tutsplus.com/tutorials/android/customize-android-fonts/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T03:43:24.937

[在此处](http://codinglookseasy.blogspot.in/2012/08/localization-using-ttf-files.html)和[此处](http://codinglookseasy.blogspot.in/2012/07/localization.html)尝试此链接

.ttf 文件用于在我们的 android 应用程序中获取不同的格式。它是处理 .ttf 文件的一种简单方法。您唯一需要得到的是通过谷歌搜索获取所有可用的 .ttf 文件

# ruby-on-rails - CanCan load_and_authorize_resource 触发 Forbidden Attributes

> ID：12756469
> 
> 赞同：17
> 
> 时间：2012-10-06T03:34:05.530
> 
> 标签：ruby-on-rails, ruby, rspec2, cancan, strong-parameters

我有一个使用强参数的标准 RESTful 控制器。

```
class UsersController < ApplicationController
  respond_to :html, :js

  def index
    @users = User.all
  end

  def show
    @user = User.find(params[:id])
  end

  def new
    @user = User.new
  end

  def edit
    @user = User.find(params[:id])
  end

  def create
    @user = User.new(safe_params)

    if @user.save
      redirect_to @user, notice: t('users.controller.create.success')
    else
      render :new
    end
  end

  def update
    @user = User.find(params[:id])

    if @user.update_attributes(safe_params)
      redirect_to @user, notice: t('users.controller.update.success')
    else
      render :edit
    end
  end

  def destroy
    @user = User.find(params[:id])

    if current_user != @user
      @user.destroy
    else
      flash[:error] = t('users.controller.destroy.prevent_self_destroy')
    end
    redirect_to users_url
  end

  private

  def safe_params
    safe_attributes =
      [
        :first_name,
        :last_name,
        :email,
        :password,
        :password_confirmation,
      ]
    if current_user.is?(:admin)
      safe_attributes += [:role_ids]
    end
    params.require(:user).permit(*safe_attributes)
  end
end 
```

在我的`config/initializers`我有文件`strong_parameters.rb`

```
ActiveRecord::Base.send(:include,  ActiveModel::ForbiddenAttributesProtection) 
```

当我向 CanCan's 添加一个简单的调用时，`load_and_authorize_resource`我得到

```
1) UsersController POST create with invalid params re-renders the 'new' template
 Failure/Error: post :create, user: @attr
 ActiveModel::ForbiddenAttributes:
   ActiveModel::ForbiddenAttributes
 # ./spec/controllers/users_controller_spec.rb:128:in `block (4 levels) in <top (required)>' 
```

在`@attr`测试中定义为

```
 before(:each) do
    @attr =
      {
        first_name: "John",
        last_name: "Doe",
        email: "user@example.com",
        password: "foobar",
        password_confirmation: "foobar"
      }
  end 
```

在测试中，我已正确设置所有内容以登录用户并为他们提供成为管理员所需的角色，所以我知道不是这样。我不知道为什么这会导致 ForbiddenAttributes 触发。我敢肯定这是我忽略的一些简单的事情。有没有其他人遇到过这个问题并找到了解决方案？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-06T03:39:08.480

我相信这是因为如果您不使用 before_filter 预加载 CanCan 将使用自己的 getter 方法来请求资源。因此，您可以将其添加到控制器中，它应该可以工作：

```
class UsersController < ApplicationController
  before_filter :new_user, :only => [:new, :create]

  load_and_authorize_resource

  def new_user
    @user = User.new(safe_params)
  end
end 
```

（然后对编辑/更新操作执行相同的操作。）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-09T06:30:31.163

```
before_filter do
  params[:user] = safe_params
end
load_and_authorize_resource 
```

# php - 如何复制数据库记录并跟踪其新 ID

> ID：12756471
> 
> 赞同：1
> 
> 时间：2012-10-06T03:34:26.450
> 
> 标签：php, mysql, sql, database

我有三张表：年份、员工、职位。假设我已经在这些表中拥有这些数据。

```
years:
----------------
| id | name    |
----------------
|  1 | 2011    |
----------------

positions:
------------------------------
| id | name        | year_id |
------------------------------
|  1 | Director    |  1      |
|  2 | Manager     |  1      |
------------------------------

employees:
---------------------------------------------------------
| id | name                     | position_id | year_id |
---------------------------------------------------------
|  1 | Employee A (Director)    |  1          |  1      |
|  2 | Employee B (Manager)     |  2          |  1      |
--------------------------------------------------------- 
```

**=========================================**

年表是一个中心点。如果我插入新的一年记录，**我还必须复制与上一年相关的所有职位和员工**。

所以如果我将 2012 年插入到 years 表中，数据应该是这样的：

```
years:
----------------
| id | name    |
----------------
|  1 | 2011    |
|  2 | 2012    |
----------------

positions:
------------------------------
| id | name        | year_id |
------------------------------
|  1 | Director    |  1      |
|  2 | Manager     |  1      |
|  3 | Director    |  2      |
|  4 | Manager     |  2      |
------------------------------

employees:
---------------------------------------------------------
| id | name                     | position_id | year_id |
---------------------------------------------------------
|  1 | Employee A (Director)    |  1          |  1      |
|  2 | Employee B (Manager)     |  2          |  1      |
|  3 | Employee A (Director)    |  3   (?)    |  2      |
|  4 | Employee B (Manager)     |  4   (?)    |  2      |
--------------------------------------------------------- 
```

**注意**`employees`表格第三行和第四行的问号。

我使用这些查询来插入新的一年并复制所有相关的职位和员工：

```
// Insert new year record
INSERT INTO years (name) VALUES (2012);

// Get last inserted year ID
$inserted_year_id = .......... // skipped

// Copy positions
INSERT INTO positions (name, year_id) SELECT name, $inserted_year_id AS last_year_id FROM positions WHERE year_id = 1;

// Copy employees
INSERT INTO employees (name, position_id, year_id) SELECT name, position_id, $inserted_year_id AS last_year_id FROM employees WHERE year_id = 1; 
```

问题在于复制员工查询。我找不到获取或跟踪新职位 ID 的方法。

有没有简单的方法来做到这一点？

非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T04:34:51.563

您的数据模型存在严重缺陷，可能需要彻底检修，但如果您坚持按照您的描述复制数据，这应该可以解决问题：

```
// Copy employees
INSERT INTO employees (name, position_id, year_id)
SELECT name, new_positions.id, $inserted_year_id AS last_year_id
FROM employees
JOIN positions AS old_positions ON old_positions.id = employees.position_id
                                AND old_positions.year_id = employees.year_id
JOIN positions AS new_positions ON new_positions.name = old_positions.name
                                AND new_positions.year_id = $inserted_year_id
WHERE employees.year_id = 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T06:11:43.083

我认为您应该阅读有关[数据库规范化](http://en.wikipedia.org/wiki/Database_normalization#Normal_forms)的信息。复制数据会导致维护问题和错误报告。

如果您使用如下所示的不同设计，则在员工更改职位、终止或终止职位之前，将没有任何内容可插入。还有很多其他方法可以解决这个问题，但您应该尽量减少冗余（即每个员工只有一个副本），然后单独跟踪随时间变化的数据。在你尝试实现这样的东西之前，还要阅读[外键。](http://en.wikipedia.org/wiki/Foreign_key)

```
positions:
-- If you are keeping track of the years that each position is active, 
-- using dates provides simplicity.  Note: this design assumes that positions 
-- are never reactivated after being deactivated.
------------------------------------------------
| id | name        | DateActive | DateInactive |
------------------------------------------------
|  1 | Director    | 01/01/2011 |              |
|  2 | Manager     | 01/01/2011 |              |
------------------------------------------------

employees:
---------------------------------------------------------------
| id | name                     | DateHired  | DateTerminated |
---------------------------------------------------------------
|  1 | Employee A               | 01/01/2011 |                |
|  2 | Employee B               | 01/01/2011 |                |
|  3 | Employee C               | 01/01/2011 | 10/01/2012     |
---------------------------------------------------------------

EmployeePositionRelationships 
--If you are keeping track of time that each employee held a position
-- Employee A has been a Director since 1/1/2011
-- Employee B was a Manager from 1/1/2011 to 10/6/2012\. Then they became a Director
-- Employee B was a Manager from 1/1/2011 to 10/1/2012\. Then they were terminated
--------------------------------------------------------
EmployeeId | PositionId | DateStarted | DateEnded      |
--------------------------------------------------------
1          |  1          | 01/01/2011 |                |
2          |  2          | 01/01/2011 | 10/6/2012      |
3          |  2          | 01/01/2011 | 10/1/2012      |
2          |  1          | 10/6/2012  |                |
-------------------------------------------------------- 
```

# c++ - gwen + opengl 什么都看不到

> ID：12756474
> 
> 赞同：0
> 
> 时间：2012-10-06T03:34:36.300
> 
> 标签：c++, user-interface, opengl

我正在尝试使用 GWEN 在我的 opengl 场景之上绘制一些 GUI 元素。它似乎设置正确，但实际上没有绘制 gwen 的任何内容（至少可见）。我正在使用一个自定义渲染器，它本质上是 GWEN 的股票 opengl 渲染器，但具有不同的加载纹理的功能。并且 OpenGL::Begin() 和 OpenGL::End() 替换为这些：

```
 void coRenderer::Begin()
    {
        glUseProgram(0);
        glDisable(GL_DEPTH_TEST);

        glDepthMask(0);

        glEnable(GL_BLEND);

        glMatrixMode(GL_PROJECTION);                // Select The Projection Matrix
        glPushMatrix();                             // Store The Projection Matrix
        glLoadIdentity();

        glOrtho(0, screen->w, screen->h, 0, -1, 1 );

        glMatrixMode(GL_MODELVIEW);

        glActiveTexture(GL_TEXTURE0);
    }

    void coRenderer::End()
    {
        Flush();

        glMatrixMode(GL_PROJECTION);                // Select The Projection Matrix
        glPopMatrix();                              // Restore The Old Projection Matrix

        glDisable(GL_BLEND);

        glEnable(GL_DEPTH_TEST);
        glDepthMask(1);

        glEnable(GL_TEXTURE_2D);
    } 
```

gwen 的 opengl 渲染器的代码在这里：

[http://gwen.googlecode.com/svn/trunk/trunk/gwen/Renderers/OpenGL/OpenGL.cpp](http://gwen.googlecode.com/svn/trunk/trunk/gwen/Renderers/OpenGL/OpenGL.cpp)

顺便说一句，我使用的是 OpenGL 2.1 而不是 3.0+

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T09:40:51.030

啊，格温。那个令人沮丧的 GUI 库。

当我开始使用它并将其集成到我们在学校编写的引擎中时，我遇到了和你一样的问题，但是使用的是普通的 OpenGL 渲染器。原来它定位错误，调用 glLoadIdentity() 来重置单位矩阵似乎可以解决它。

您遇到的问题很可能最终与我的问题相同，或者您的自定义 OpenGL 渲染器可能存在问题。我不确定您是否对 GWEN 了解多少，或者它是如何工作的，但它运行在单一纹理上，为 GUI 蒙皮。你是在加载吗？也许你的纹理加载器没有正确加载它。

尝试使用您的调试器并单步执行您的程序。感兴趣的领域是您尝试加载 GUI 皮肤的位置、分配 GWEN 可以使用的屏幕空间以及实际尝试渲染 GUI 的位置。

# javascript - 仅在“body”元素上禁用拖动？

> ID：12756476
> 
> 赞同：0
> 
> 时间：2012-10-06T03:34:40.460
> 
> 标签：javascript, jquery, ios

在 iOS 上，我只想禁用`<body>`元素上的滚动，而不是元素内的`<body>`元素。以下代码将禁止拖动`<body>`元素，但也禁止拖动子 div：

```
$("body").bind("touchstart", function(e) {
    e.preventDefault();
}); 
```

无论如何，这是否只会影响父 div，而不是父 ( `<body>`) 中的子 div？我想也许`$("#yourdiv").parent()`会奏效，但没有运气。

**编辑**：这个链接，虽然它解决了同样的问题，但没有解决我的问题：[防止应用程序拖动但允许在 ios 中滚动内部 div 元素](https://stackoverflow.com/questions/8292326/prevent-app-dragging-but-permit-scroll-of-inner-div-elements-in-ios)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T03:38:33.360

```
$("body").bind("touchstart", function(e) {
    if(e.target.nodeName === "BODY"){
       e.preventDefault();
    }
}); 
```

您可以检查`target`事件的发生 - 不是 100% 确定这在 iOS 上是如何进行的，但我认为应该没问题。

另一种可能性是首先阻止事件传播。

```
$("*:not(body)").bind('touchstart', function(e){
  e.stopPropagation();
}); 
```

但这只是一个想法，我也不完全确定它会起作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T03:41:58.253

您也可以`this`与`e.target`.

```
$("body").bind("touchstart", function(e) {
    if (this === e.target) {
        e.preventDefault();
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-05T09:36:11.943

我不确定它在 iOS 上会有多大不同（还没有在那里测试过），但这是我在 Android 上解决问题的方法。

[JSBIN 演示](http://bit.ly/1pHtqBx "JSBIN")

解决方案涉及几件事：

1.  禁用默认 Body`touchmove`事件
2.  防止事件在您要处理`touchmove`的目标上冒泡到正文`touchmove`
3.  强制过度滚动允许的目标以冒泡并被否定

# mongodb - MongoDB mapreduce 缺少的数据，返回 'null'

> ID：12756487
> 
> 赞同：5
> 
> 时间：2012-10-06T03:36:27.730
> 
> 标签：mongodb, mapreduce

所以这很奇怪。我正在尝试使用 mapreduce 在唯一端口下对日期时间/指标进行分组：

文档布局：

```
{
        "_id" : ObjectId("5069d68700a2934015000000"),
        "port_name" : "CL1-A",
        "metric" : "340.0",
        "port_number" : "0",
        "datetime" : ISODate("2012-09-30T13:44:00Z"),
        "array_serial" : "12345"
} 
```

和 mapreduce 函数：

```
var query = {
        'array_serial' : array,
        'port_name' : { $in : ports },
        'datetime' : { $gte : from, $lte : to}

    }

    var map = function() {
        emit( { portname : this.port_name } , { datetime : this.datetime,
                                metric : this.metric });
    }

    var reduce = function(key, values) {
        var res = { dates : [], metrics : [], count : 0}

        values.forEach(function(value){
            res.dates.push(value.datetime);
            res.metrics.push(value.metric);
            res.count++;
        })

        return res;
    }

    var command = {
        mapreduce : collection,
        map : map.toString(),
        reduce : reduce.toString(),
        query : query,
        out : { inline : 1 }

    }

    mongoose.connection.db.executeDbCommand(command, function(err, dbres){
        if(err) throw err;
        console.log(dbres.documents);
        res.json(dbres.documents[0].results);
    }) 
```

如果请求少量记录，比如 5 或 10，甚至 60，我会得到我期望的所有数据。较大的查询返回截断的值....

* * *

我只是做了一些更多的测试，似乎它将记录输出限制为 100？这是每分钟的数据，当我在 24 小时内运行查询时，我预计会返回 1440 条记录……我只是运行它收到了 80 条记录。：\

这是预期的吗？我没有在任何我能告诉的地方指定限制......

* * *

更多数据：

查询 2012-10-01T23:00 - 2012-10-02T00:39（100 分钟）的记录返回正确：

```
[
  {
    "_id": {
      "portname": "CL1-A"
    },
    "value": {
      "dates": [
        "2012-10-01T23:00:00.000Z",
        "2012-10-01T23:01:00.000Z",
        "2012-10-01T23:02:00.000Z",
         ...cut...
        "2012-10-02T00:37:00.000Z",
        "2012-10-02T00:38:00.000Z",
        "2012-10-02T00:39:00.000Z"
      ],
      "metrics": [
        "1596.0",
        "1562.0",
        "1445.0",
        ...cut...
        "774.0",
        "493.0",
        "342.0"
      ],
      "count": 100
    }
  }
] 
```

...在查询 2012-10-01T23:00 - 2012-10-02T00:39（101 分钟）中再增加一分钟：

```
[
  {
    "_id": {
      "portname": "CL1-A"
    },
    "value": {
      "dates": [
        null,
        "2012-10-02T00:40:00.000Z"
      ],
      "metrics": [
        null,
        "487.0"
      ],
      "count": 2
    }
  }
] 
```

该`dbres.documents`对象显示正确的预期发出记录：

```
[ { results: [ [Object] ],
    timeMillis: 8,
    counts: { input: 101, emit: 101, reduce: 2, output: 1 },
    ok: 1 } ] 
```

...那么数据在某处丢失了吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-06T05:52:46.533

MapReduce 的第一条规则：

**您将从 Reduce 返回与您在 Map 中使用密钥发出的完全相同的格式。**

MapReduce 的第二条规则：

**您应根据需要减少传递的值数组以减少多次。Reduce 函数可能会被调用多次。**

您在实施 reduce 时违反了这两条规则。

您的 Map 函数正在发出键值对。

key：端口名称（您应该简单地将名称作为键发出，而不是文档）
value：代表您需要累积的三件事（日期、度量、计数）的文档

试试这个：

```
map = function() {  // if you want to reduce to an array you have to emit arrays
    emit ( this.port_name, { dates : [this.datetime], metrics : [this.metric], count: 1 });
}

reduce = function(key, values) {        // for each key you get an array of values
   var res = { dates: [], metrics: [], count: 0 };  // you must reduce them to one

   values.forEach(function(value) {
            res.dates = value.dates.concat(res.dates);
            res.metrics = value.metrics.concat(res.metrics);
            res.count += value.count;   // VERY IMPORTANT reduce result may be re-reduced
        }) 

        return res;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T04:12:27.397

尝试在临时集合中而不是在内存中输出 map reduce 数据。可能就是这个原因。来自[Mongo 文档](http://www.mongodb.org/display/DOCS/MapReduce#MapReduce-Outputoptions)：

> { inline : 1} - 使用此选项，不会创建集合，整个 map-reduce 操作将在 RAM 中进行。此外，map-reduce 的结果将在结果对象中返回。请注意，仅当结果集符合单个文档的 16MB 限制时，此选项才可用。在 v2.0 中，这是您在辅助副本集上唯一可用的选项。

此外，这可能不是原因，但 MongoDB 在 32 位机器上存在数据大小限制（2GB）。

# azure - azure webrole 远程处理无法在家工作

> ID：12756489
> 
> 赞同：-1
> 
> 时间：2012-10-06T03:36:31.507
> 
> 标签：azure

![在此处输入图像描述](../Images/009f98bd1dee79a644064bb8d6a9cbb9.png)Azure webrole -- 我无法从我家远程访问我的 azure webrole。我可以从我的办公室远程访问同一个 webrole。但是错误消息中提到的原因不正确。这就是我能够远程访问的原因当我在办公室时，同样的网络。

我可以从我家远程访问其他非 Windows 天蓝色机器。但我只有使用我的天蓝色 Webrole 才能收到此错误消息。我的机器是Windows8操作系统。

这个问题的任何解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T13:45:44.077

> 我无法从家里远程访问我的蔚蓝网络

可能是某些代理阻止您这样做吗？您是否已经尝试过其他网络？

也看看这个[http://support.microsoft.com/kb/2477176](http://support.microsoft.com/kb/2477176)。很可能是您已经超过了同时连接的数量。

# java - 用于 JAVA 的 Aiff ID3 标签信息库

> ID：12756506
> 
> 赞同：0
> 
> 时间：2012-10-06T03:39:26.500
> 
> 标签：java, tags, aiff

除了 Java，有没有像[TagLib这样的库？](http://taglib.github.com/)

我只想从 aiff 文件中提取 ID3 标签信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-14T19:22:01.807

开源库[jaudiotagger](http://www.jthink.net/jaudiotagger/)最近添加了对使用 id3 标签标记 aiff 的支持

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-19T11:06:24.957

[http://javamusictag.sourceforge.net/](http://javamusictag.sourceforge.net/)是为 MP3 文件编写的，但它也可能适用于 aiff 文件（我没有尝试过）。它带有源文件。

# jquery - jQuery – 通过单击一个 div 自动填充两个输入字段

> ID：12756507
> 
> 赞同：0
> 
> 时间：2012-10-06T03:39:29.803
> 
> 标签：jquery, input

我有一个`<div class="foo">Foo</div>`，我有两个输入字段：

1.  `<input type="submit" class="text_field" name="input_one" value="">` 和
2.  `<input type="submit" class="text_field" name="input_two" value="">`

我希望能够单击`<div>Foo</div>`并使用 value 填充字段 #1 并使用 value 填充字段`Foo`#2 `Bar`。（推断这个想法以合并许多不同的 div，因此，许多不同的值组合。）我怎样才能最好地使用 jQuery 做到这一点？

到目前为止，我可以毫不费力地做类似的事情：

```
jQuery(function () {
$('div.foo').click(function (e) {

    var foo = $(this).text();

    $("input.text_field").val(foo);
});
});​ 
```

这适用于单击 div 并使用标签之间的文本值填充一个文本字段，即“Foo”。这是一个好的开始……但由于我是新手，我想知道如何最好地用两个不同的值“Foo”和“Bar”填充两个不同的文本字段。有没有办法`name="Bar"`在 div 上设置 a 或其他东西，然后访问该名称值以插入第二个文本字段`input_two`？感谢您的想法，评论，考虑，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T03:50:44.580

这是一个奇怪的问题，你能解释一下你需要做什么吗？我的意思是，您发布了您想做的事情，但是您为什么要这样做？不清楚 Bar 和 Foo 是什么，是每次提交的预定义值吗？值是否取决于 div（假设您有多个 div，并且您需要根据单击的 div 填充输入）

您可以将任何属性放在您需要的任何标签上，并使用 $([selector]).attr('attr_name') 来获取值，html5 定义了一些“数据-”属性来存储类似[http:// html5doctor.com/html5-custom-data-attributes/](http://html5doctor.com/html5-custom-data-attributes/)

编辑：你可以有类似的东西

```
<div class='clickeable' data-input1='foo' data-input2='bar'></div>
<div class='clickeable' data-input1='baz' data-input2='xxx'></div> 
```

和js

```
$('.clickeable').click(function(){
  obj = $(this);
  $('input[name=input_1]').val(obj.attr('data-input1'));
  $('input[name=input_2]').val(obj.attr('data-input2'));
}) 
```

然后 js 是通用的，您可以添加任意数量的 div 任何值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T03:44:46.683

使用 ID 选择器： [http ://api.jquery.com/id-selector/](http://api.jquery.com/id-selector/)

```
<div class="foo">

    <input type="submit" id="one" class="text_field" name="input_one" value=""> 
    <input type="submit" id="two" class="text_field" name="input_two" value="">
</div> 

jQuery(function () {
$('div.foo').click(function (e) {    
    var foo = $(this).text();    
    $("#one").val(foo);
    $("#two").val("Bar");
});
});​ 
```

# python - 如何使用 QPixmap 在 PyQt4 中加载 jpeg 格式的图片？

> ID：12756510
> 
> 赞同：0
> 
> 时间：2012-10-06T03:40:49.550
> 
> 标签：python, pyqt4

我使用`print QtGui.QImageReader.supportedImageFormats()`但在输出中，没有 jpeg。
我搜索了问题，发现我需要`*.dylib`in `plugins/imageformats`。

所以我把它移到了`py2.7/site-packages/PyQt4`，但我仍然无法加载 jpeg。

我使用 python 脚本，而不是 py2exe，只是`python test_pyqt.py`.

我现在该怎么办？

Mac os x Mountain Lion 10.8.2、Python 2.7、PyQt4

# ios - iOS使用加速度计在圆圈内移动对象

> ID：12756511
> 
> 赞同：4
> 
> 时间：2012-10-06T03:41:00.147
> 
> 标签：ios, xcode

我正在尝试使用加速度计在一个圆圈内移动图像。我遇到的问题是，当图像碰到圆的边缘时，它只会移动圆的另一侧。我的代码如下：

```
- (void)accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration *)acceleration {
//NSLog(@"x : %g", acceleration.x);
//NSLog(@"y : %g", acceleration.y);
//NSLog(@"z : %g", acceleration.z);

delta.x = acceleration.x * 10;
delta.y = acceleration.y * 10;

joypadCap.center = CGPointMake(joypadCap.center.x + delta.x, joypadCap.center.y - delta.y);

distance = sqrtf(((joypadCap.center.x - 160) * (joypadCap.center.x - 160)) +
                 ((joypadCap.center.y -206) * (joypadCap.center.y - 206)));
//NSLog(@"Distance : %f", distance);

touchAngle = atan2(joypadCap.center.y, joypadCap.center.x);
NSLog(@"Angle : %f", touchAngle);

if (distance > 50) {
    joypadCap.center = CGPointMake(160 - cosf(touchAngle) * 50, 206 - sinf(touchAngle) * 50);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-03T09:26:28.803

尝试使用 CMDeviceMotion 实现圆形水平仪时，我遇到了同样的问题。我发现传递给的坐标有问题`atan2(y,x)`。这个函数需要笛卡尔坐标，(0,0) 在视图的中心。但是，屏幕坐标在左上角有 (0,0)。我创建了在两个坐标系之间转换点的方法，现在它运行良好。

我在 github 上放了一个示例项目[，](https://github.com/stephsharp/SpiritLevelCircle)但这是最重要的部分：

```
float distance = sqrtf(((point.x - halfOfWidth) * (point.x - halfOfWidth)) +
                       ((point.y - halfOfWidth) * (point.y - halfOfWidth)));

if (distance > maxDistance)
{
    // Convert point from screen coordinate system to cartesian coordinate system,
    // with (0,0) located in the centre of the view
    CGPoint pointInCartesianCoordSystem = [self convertScreenPointToCartesianCoordSystem:point
                                                                                 inFrame:self.view.frame];

    // Calculate angle of point in radians from centre of the view
    CGFloat angle = atan2(pointInCartesianCoordSystem.y, pointInCartesianCoordSystem.x);

    // Get new point on the edge of the circle
    point = CGPointMake(cos(angle) * maxDistance, sinf(angle) * maxDistance);

    // Convert back to screen coordinate system
    point = [self convertCartesianPointToScreenCoordSystem:point inFrame:self.view.frame];
} 
```

和：

```
- (CGPoint)convertScreenPointToCartesianCoordSystem:(CGPoint)point
                                            inFrame:(CGRect)frame
{
    float x = point.x - (frame.size.width / 2.0f);
    float y = (point.y - (frame.size.height / 2.0f)) * -1.0f;

    return CGPointMake(x, y);
}

- (CGPoint)convertCartesianPointToScreenCoordSystem:(CGPoint)point
                                            inFrame:(CGRect)frame
{
    float x = point.x + (frame.size.width / 2.0f);
    float y = (point.y * -1.0f) + (frame.size.height / 2.0f);

    return CGPointMake(x, y);
} 
```

# php - Mysql 数组不工作

> ID：12756514
> 
> 赞同：-2
> 
> 时间：2012-10-06T03:41:28.947
> 
> 标签：php, mysql, database

我正在尝试将数据库中的所有用户行作为表单中的选择回显。

它只显示一个空白区域。没有其他的。

这是我的代码。

```
<?php
session_start();
require('../../config.php');
$user = $_SESSION['user'];
$qry=("SELECT `rank`,  `uname` FROM users WHERE `uname` = '$user'");
$result=mysql_query($qry);
$row = mysql_fetch_assoc($result);
$rank = $row['rank'];
$logged = $_SESSION['loggedin'];
  if ($logged == true) {
   if ($rank >= 3) {
    echo "Succesful, $user.<br />
      <form method='POST' action='delete.php'>
      <select><option>Please select</option>";
      while ($row = mysql_fetch_assoc($result)) {
            $users = $row['uname'];
            $lol = ucwords($users);
           }
       echo "<option>$lol</option>";
       echo "</select>
    </form>";
   } else {
  echo "Your not an admin. $user";
  }
 } else {
echo "Please login.";
}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T04:01:58.307

首先，请停止使用`mysql_`函数，因为它们已被[弃用](http://www.deprecatedphp.com/mysql)。查看`mysqli_`或`PDO`。请注意，您的脚本容易受到 SQL 注入的攻击。

您的脚本不起作用的原因是因为您似乎调用`mysql_fetch_assoc`了两次。第二次调用它时，如果您的查询只返回一行，则不会有任何输出。

```
$qry=("SELECT `rank`,  `uname` FROM users WHERE `uname` = '$user'");
$result=mysql_query($qry);
$row = mysql_fetch_assoc($result);
$rank = $row['rank']; 
```

您将需要重新提交查询（如下所示）并单独调用该结果以填充下拉列表，或将结果存储在数组中。

```
$qry=("SELECT `uname` FROM users");
$result=mysql_query($qry);
while ($row = mysql_fetch_assoc($result)) {
      echo '<option>' . ucwords($row['uname']) . '</option>';
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T04:34:33.763

您确定您的数据库有超过 1 行吗？您正在调用 fetch 1 次，因此第二次它将尝试获取第二行。

也尝试将查询直接运行到 mysql 中，看看是否得到了你期望的行，可能是它没有返回你期望的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T04:07:16.290

看起来您的 while 循环设置不当，我认为您需要更改

```
while ($row = mysql_fetch_assoc($result)) {
  $users = $row['uname'];
  $lol = ucwords($users);
}
echo "<option>$lol</option>"; 
```

对此

```
while ($row = mysql_fetch_assoc($result)) {
  $users = $row['uname'];
  $lol = ucwords($users);
  echo "<option>$lol</option>";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T04:10:08.713

更新：我重读了您的问题，您似乎想显示表中的所有 uname。最初的查询是检查用户是否是管理员。

这是它的样子。但这只是[njk](https://stackoverflow.com/users/679449/njk) [答案的重复。](https://stackoverflow.com/questions/12756514/mysql-array-not-working)

```
<?php
session_start();
require('../../config.php');
$user = $_SESSION['user'];
$qry=("SELECT `rank`,  `uname` FROM users WHERE `uname` = '$user'");
$result=mysql_query($qry);
$row = mysql_fetch_assoc($result);
$rank = $row['rank'];
$logged = $_SESSION['loggedin'];
  if ($logged == true) {
   if ($rank >= 3) {
    echo "Succesful, $user.<br />
      <form method='POST' action='delete.php'>
      <select><option>Please select</option>";

      // added these 2 lines
      $qry=("SELECT `rank`,  `uname` FROM users");
      $result=mysql_query($qry);

      while ($row = mysql_fetch_assoc($result)) {
            $users = $row['uname'];
            $lol = ucwords($users);
            echo "<option>$lol</option>";
           }

       echo "</select>
    </form>";
   } else {
  echo "Your not an admin. $user";
  }
 } else {
echo "Please login.";
}

?> 
```

# flash - IE9 中基于 SSL 的 Flash 套接字似乎有数据限制

> ID：12756522
> 
> 赞同：2
> 
> 时间：2012-10-06T03:42:09.613
> 
> 标签：flash, internet-explorer, ssl, websocket, socket.io

我正在使用 socket.io 在 Internet Explorer 9 中通过 SSL 启动跨域闪存套接字连接。当我启动连接时，一切似乎都正常，直到我发送客户端的整个 HTML 网页。如果我从不发送此 HTML，则连接仍然存在，并且该连接适用于发送较少量的数据。当我发送整个 HTML 页面时，socket.io 日志显示它正在缩短发送的 HTML，然后是`info - transport end (undefined)`. 我将此错误追溯到

```
if (i === 0){
  if (chr != '\u0000')
    this.error('Bad framing. Expected null byte as first frame');
  else
    continue;
} 
```

在`default.js`服务器端的 socket.io 文件中。客户端似乎出于某种原因分解了这些数据，这导致了格式错误的数据包。它不可能是 TCP 错误，因为发送此数量的数据可以使用常规 websockets 和 JSONP。

我完全不知道如何调试它。似乎它可能是一些极端情况 Flash + SSL 错误。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T15:26:56.737

[TL;DR：尝试使用https://github.com/NextThought/web-socket-js](https://github.com/NextThought/web-socket-js)中的文件更新本地 socket.io 客户端中的 SWF 文件和 web_socket.js

长答案：

socket.io 的分布式客户端版本（至少 0.9.10 版本）似乎存在一个错误：它分发的 Flash SWF 支持文件的版本（最初来自与上述 repo 相同的 github repo）由于 SSL 实现中的错误，无法通过 SSL 发送大小大于 16K - 8 个字节的 WebSocket 帧（16K 是 SSL 帧大小，8 个字节是 WebSocket 标头大小）。这是在 SSL 代码的原始版本（位于[http://code.google.com/p/as3crypto/issues/detail?id=14](http://code.google.com/p/as3crypto/issues/detail?id=14)）中发现的一个问题，尽管该修复尚未在此处或其中任何一个中合并在撰写本文时的 github 存储库。

最初的 github 存储库现在已经开始实施最终的 WebSocket 规范，而与 socket.io 一起分发的版本使用的是更旧的草案规范（这使得诊断这个问题变得更加困难，因为旧的规范不包含尽可能多的框架信息） .

开头引用的 github 存储库包含更新的 SWF 文件，其中包含最新的 github 更改和 SSL 错误修复。它很容易集成到本地 socket.io 客户端构建中，对我们来说，它解决了问题（在 IE9 中使用 Flash Player 11 进行测试）。只有当您连接的 WebSocket 服务器支持最终的 WebSocket 规范时，它才会起作用。在与 socket.io 一起分发的 fork 的 JavaScript 部分中有一些 socket.io 特定的补丁，以使其在 node.js 中运行（我认为）；这个 repo 不包括那些补丁，所以它可能只能在 web 浏览器中工作。

# c# - 使用 C# 模拟游戏手柄输入

> ID：12756523
> 
> 赞同：4
> 
> 时间：2012-10-06T03:42:13.640
> 
> 标签：c#, controller, joystick, emulation

我将简化情况以消除混乱。

我想制作一个程序中只有一个按钮的程序。单击按钮后，程序将模拟通用游戏手柄按钮。我敢肯定，当程序启动时，它必须以某种方式模拟游戏手柄。正在模拟的游戏手柄应该在控制面板中可见。（`joy.cpl`更具体）

我必须在不制作驱动程序或依赖 3rd 方库/API 的情况下执行此操作-我知道可以这样做，因为我已经看到一些程序实际上已经这样做了，但是我的程序将具有与那些完全不同的用途. 我找不到任何关于从哪里开始的好信息，所以把我推向正确的方向会很好，或者向我展示一些代码`C#`也会很酷！

**多谢你们！**

# three.js - 多个 ColladaLoader 加载失败。它是线程安全的吗？

> ID：12756527
> 
> 赞同：0
> 
> 时间：2012-10-06T03:43:02.753
> 
> 标签：three.js

我正在尝试同时加载多件。要么只有一件正确出现，要么两件都出现，一件正确一件不正确。这是我的代码：

```
var loader = THREE.ColladaLoader();

loader.load('model.dae', function colladaReady(result) {
    var piece = result.scene.children[0];
    piece.position.set(-100, 0, 0);
    scene.add(piece);

    renderer.render(scene, camera);
});

loader.load('model2.dae', function colladaReady2(result2) {
    var piece2 = result2.scene.children[0];
    piece2.position.set(100, 0, 0);
    scene.add(piece2);

    renderer.render(scene, camera);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T03:43:02.753

原因是因为 ColladaLoader 不是线程安全的，所以不能对同一个对象进行多次 load() 调用。像这样简单地创建一个 ColladaLoader 的新实例，一切都应该工作

```
var loader = THREE.ColladaLoader();

loader.load('model.dae', function colladaReady(result) {
    var piece = result.scene.children[0];
    piece.position.set(-100, 0, 0);
    scene.add(piece);

    renderer.render(scene, camera);
});

/*** Line added here! ***/
var loader2 = THREE.ColladaLoader();

loader.load('model2.dae', function colladaReady2(result2) {
    var piece2 = result2.scene.children[0];
    piece2.position.set(100, 0, 0);
    scene.add(piece2);

    renderer.render(scene, camera);
}); 
```

# emacs - 在 Mx compile 中使用当前缓冲区的文件名

> ID：12756531
> 
> 赞同：20
> 
> 时间：2012-10-06T03:43:40.413
> 
> 标签：emacs

我希望 emacs 使用当前缓冲区的文件名作为传递给`M-x compile`. 例如，如果我正在编辑 ~/foo.rb，我想`M-x compile`执行`ruby ~/foo.rb`

我尝试设置`compilation-command`为`(list "ruby" buffer-file-name)`，但显然你不能在这里传递 s 表达式。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-06T08:15:03.523

## 1.阅读函数的文档

`C-h``f``compile``RET`

```
compile is an interactive autoloaded compiled Lisp function in
`compile.el'.
[snip]
Interactively, prompts for the command if `compilation-read-command' is
non-nil; otherwise uses `compile-command'.  With prefix arg, always prompts.
Additionally, with universal prefix arg, compilation buffer will be in
comint mode, i.e. interactive. 
```

现在我们已经找到了我们想要的东西，让我们……</p>

## 2.……阅读变量的文档……</h2>

`C-h``v``compile-command``RET`

```
compile-command is a variable defined in `compile.el'.
Its value is "make -k "
[snip]
Sometimes it is useful for files to supply local values for this variable.
You might also use mode hooks to specify it in certain modes, like this:

    (add-hook 'c-mode-hook
       (lambda ()
     (unless (or (file-exists-p "makefile")
             (file-exists-p "Makefile"))
       (set (make-local-variable 'compile-command)
        (concat "make -k "
            (file-name-sans-extension buffer-file-name)))))) 
```

## 3\. …最后根据您的需要调整示例

```
(add-hook 'ruby-mode-hook
          (lambda ()
            (set (make-local-variable 'compile-command)
                 (concat "ruby " buffer-file-name)))) 
```

当然，`rake`如果有 `Rakefile`.

# encryption - 如何保护 URL 中的 user_id（自动递增）

> ID：12756537
> 
> 赞同：0
> 
> 时间：2012-10-06T03:44:45.753
> 
> 标签：encryption

只是想在我的网站上做一些安全措施，并试图找出保护 ID 的最佳途径。示例：localhost/page.php?user_id=1 到：localhost/share/df9sdf87423498asf9

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T03:53:46.050

您可以考虑使用[UUID](http://en.wikipedia.org/wiki/Universally_unique_identifier)而不是自动递增用户 ID。

编辑：

需要明确的是，这绝不是“加密”。它只是`1,2,3,4...`用作用户表的主键的另一种方法。请记住，使用 UUID 而不是增量数字将导致更高的 I/O，因为插入是在索引树中的随机位置进行的，而不是像增量 ID 那样按顺序进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T03:53:57.323

那不是安全，那是默默无闻的安全。

适当的安全性要求在您的服务器端 page.php 中验证当前经过身份验证的用户是否有权访问给定的 ID。

如果您不使用身份验证并且页面只打算查看一次，请检查[此问题](https://stackoverflow.com/questions/3347521/random-id-number-generator-in-php)的答案以获取随机数生成器。

# vb.net - 在对象初始化程序中初始化的字段或属性的名称必须以“.”开头

> ID：12756538
> 
> 赞同：0
> 
> 时间：2012-10-06T03:44:53.517
> 
> 标签：vb.net, c#-to-vb.net

我正在尝试将这几行 C# 转换为 Vb 几个小时，但我无法使其工作。

```
Friend Shared Function GetErrorCorrectPolynomial(ByVal errorCorrectLength As Integer) As tPolynomial
    Dim a As tPolynomial

    a =  New tPolynomial(New DataCache() With {1}, 0)

    For i As Integer = 0 To errorCorrectLength - 1
        a = a.Multiply(New tPolynomial(New DataCache() With { 1, tMath.GExp(i) }, 0))
    Next i

    Return a
End Function 
```

我收到此错误 在对象初始化程序中初始化的字段或属性的名称必须以“。”开头

在这部分{1}

原始代码

```
internal static tPolynomial GetErrorCorrectPolynomial(int errorCorrectLength)
{
    tPolynomial a = new tPolynomial(new DataCache() { 1 }, 0);

    for (int i = 0; i < errorCorrectLength; i++)
    {
        a = a.Multiply(new tPolynomial(new DataCache() { 1, tMath.GExp(i) }, 0));
    }

    return a;
} 
```

编辑添加 Datacache 类

```
Friend Class DataCache
    Inherits List(Of Integer)

    Public Sub New(ByVal capacity As Integer)
        MyBase.New()
        For i As Integer = 0 To capacity - 1
            MyBase.Add(0)
        Next i
    End Sub

    Public Sub New()
        MyBase.New()
    End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T03:21:39.827

看起来您正在尝试使用[集合初始值设定项](http://msdn.microsoft.com/en-us/library/dd293617.aspx)。使用`From`关键字，如下所示：

```
New DataCache() From { 1, tMath.GExp(i) } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T03:55:11.020

我不认识您使用的 C#，但 VB`With`关键字用于设置初始化对象的属性。

```
New Foo() With { .Bar = 1 } 
```

其中 Foo 是类，Bar 是属性。

请参阅：http: [//msdn.microsoft.com/en-us/library/bb385125.aspx](http://msdn.microsoft.com/en-us/library/bb385125.aspx)

这与 C# 初始化对象属性的方式相同，只是 C# 省去了“ `.`”

```
new Foo() { Bar = 1 } 
```

请参阅：http: [//msdn.microsoft.com/en-us/library/bb384062.aspx](http://msdn.microsoft.com/en-us/library/bb384062.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T07:58:19.280

看起来 DataCache 和 Int32 (int/Integer) 之间存在隐式转换，在这种情况下，您应该删除 With 关键字：

```
a = New tPolynomial(New DataCache() {1}, 0) 
```

# iphone - UITextView 从右到左 Unicode \u202B 不起作用

> ID：12756539
> 
> 赞同：1
> 
> 时间：2012-10-06T03:45:14.147
> 
> 标签：iphone, objective-c, xcode, unicode, uitextview

我本质上是在制作一个提词器应用程序，我需要一个 UITextView 来从右到左显示每一行。

```
NSString *textString = @"Hello There\nMy name is Mark";
textView.text = [@"\u202B" stringByAppendingString: textString]; 
```

这是行不通的。我需要这个来阅读

“erehT olleH” “kram si eman yM”

我知道我还需要颠倒的字体等。我需要先修复这部分。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T04:50:10.970

该符号`\u202b`表示Unicode字符U+202B是RIGHT-TO-LEFT EMBEDDING，不影响方向性强的字符的书写方向，如拉丁字母。

字符 U+202E RIGHT-TO-LEFT OVERRIDE ( `\u202e`) 强制从右到左书写方向，覆盖字符的固有方向性。要结束其效果，请使用 U+202C POP DIRECTIONAL FORMATTING 字符：

```
'\u202eHello There\nMy name is Mark \u202c' 
```

这与字体关系不大。渲染引擎应该使用镜像符号来处理像“(”这样的字符，例如，以便“(foo)”在从右到左的书写中被渲染为“(oof)”而不是“)oof(”。但通常，不涉及镜像；字母保持不变，它们只是从右到左运行。

如果您真的想对文本进行镜像，则需要完全不同的东西（转换）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T04:06:32.327

这是反转字符串的逻辑...我希望这可以帮助您...只需将此字符串附加到您的`textView.text`

```
 NSString *sampleString = @"Hello this is sample \n Hello there";
    NSMutableString *reverseString = [NSMutableString string];
    NSInteger index = [sampleString length];
    while (index > 0) 
    {
        index--;
        NSRange subStrRange = NSMakeRange(index, 1);
        [reverseString appendString:[sampleString substringWithRange:subStrRange]];
    }
    NSLog(@"%@", reverseString); 
```

# css - 如何使 CSS 为网站上的背景图像工作

> ID：12756542
> 
> 赞同：1
> 
> 时间：2012-10-06T03:46:40.240
> 
> 标签：css

我正在尝试使背景图像像[http://www.rottentomatoes.com/](http://www.rottentomatoes.com/)一样工作， 我查看了他们使用的 css，它是这样的：

```
background:url(../Content/themes/base/images/background.jpg) no-repeat fixed 50% 0px rgb(0, 0, 0); 
```

我用分辨率为 1280*1024 的背景图像进行了尝试，但它的工作方式完全不同。它不覆盖整个背景，在页面的左侧和右侧留下空间。对于所有主要浏览器（即 firefox 和 chrome）也有不同的工作方式。有没有办法为所有浏览器制作像 rottoentomatoes 一样的背景图像，它们的背景图像保持静态意味着如果在背景图像的左侧写了一些小文本，那么它在所有浏览器中都会相似？

![截屏](../Images/fab858a6d87c3771ca2a0afe7e63c0fe.png) 这是黑色背景图像没有覆盖整个屏幕的截图。我还尝试了以下css：

```
background: url(../Content/themes/base/images/background.jpg) no-repeat center center fixed; 
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover; 
```

这覆盖了整个屏幕，但在所有浏览器上并不一致，并破坏了图像的质量。一点也不像烂番茄。

![烂](../Images/25dce7d2da3bb849ea929bc93546592a.png)

添加了 rottentomatoes 图像来解释我所说的背景图像中的静态文本的含义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T04:01:06.863

这是一个很好的起点，参考下面的 URL。当您向下滚动时访问网页时，它们会经历对齐背景的所有方面。

```
<!DOCTYPE html>
<html>
    <head>
        <style type="text/css">
            body
            {
                margin-left:200px;
                :#5d9ab2 url('img_tree.png') no-repeat top left;
            }

            .container
            {
                text-align:center;
            }

            .center_div
            {
                border:1px solid gray;
                margin-left:auto;
                margin-right:auto;
                width:90%;
                background-color:#d0f0f6;
                text-align:left;
                padding:8px;
            }
        </style>
    </head>

    <body>
        <h1> </h1>
    </body>
</html> 
```

请参阅链接检查：- [W3Schools 中的 Css 背景](http://w3schools.com/css/css_background.asp)

# extjs - 更改 Ext.data.Model 中的数据

> ID：12756546
> 
> 赞同：0
> 
> 时间：2012-10-06T03:47:08.310
> 
> 标签：extjs, extjs4, extjs4.1

以下是我拥有的两个模型：

```
Ext.define('Company', {        extend: 'Ext.data.Model',
    fields: [
        {name: 'company'},
        {name: 'price', type: 'float'},
        {name: 'change', type: 'float'},
        {name: 'pctChange', type: 'float'},
        {name: 'lastChange', type: 'date', dateFormat: 'n/j h:ia'},
        {name: 'industry'},
        {name: 'desc'}
     ]
});

Ext.define('CompanyDemo', {        extend: 'Ext.data.Model',
    fields: [
        {name: 'company'},
        {name: 'price', type: 'float'},
        {name: 'change', type: 'float'},
        {name: 'pctChange', type: 'float'},
        {name: 'lastChange', type: 'date', dateFormat: 'n/j h:ia'},
        {name: 'total'}
     ]
}); 
```

这两个模型与两个不同的网格相关联。我将从一个网格中选择一些行（与 Company 模型相关联），并且只有选定的行会在单击按钮时显示在第二个网格中（与 CompanyDemo 模型相关联，最初这个模型是空的并且没有任何数据）

这是带有公司模型的网格：

```
var grid2 = Ext.create('Ext.grid.Panel', {      id: 'grid2',
    store: getLocalStore(),
    selModel: sm,
    columns: [
        {text: "Company", width: 200, dataIndex: 'company'},
        {text: "Price", renderer: Ext.util.Format.usMoney, dataIndex: 'price'},
        {text: "Change", dataIndex: 'change'},
        {text: "% Change", dataIndex: 'pctChange'},
        {text: "Last Updated", width: 135, renderer: Ext.util.Format.dateRenderer('m/d/Y'), dataIndex: 'lastChange'},
        {text: "Industry", dataIndex: 'industry'},
        {text: "Description", dataIndex: 'desc'}
    ],
    columnLines: true,
    width: 600,
    height: 300,
    frame: true,
    title: 'Framed with Checkbox Selection and Horizontal Scrolling',
    iconCls: 'icon-grid',
    renderTo: 'grid'
}); 
```

我能够从此网格中获取选定的数据。得到这个数据后，我需要替换掉 Industry 和 Desc 数据，用 Total 替换（根据上面给出的模型结构）。这就是我使用公司模型获取网格的选定行的方式：

**编辑：**

尝试使用这段代码：

```
Ext.widget('button', {
text: 'Click Me',   
renderTo: 'btn',
listeners: {
    click: function(this1, evnt, eOpts ){  
      var records = sm.getSelection();
      var data = [];
      Ext.each(records, function (record) {
        var modelData = record.getData(true);
        //A dummy value as of now
        modelData.total = '10';
        data.push(modelData);
      });
      // grid1.getStore().loadData(records, true);         
      grid1.getStore().loadData(data, true);
    }
}
}); 
```

但是在这一行中抛出了一个异常：

```
grid1.getStore().loadData(data, true); 
```

我不确定如何替换第一个模型中的两个字段并在其中添加新数据，然后再将其显示在第二个网格中。

请让我知道这件事。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T12:06:32.007

您的问题是您为新网格提供了错误的数据。它将期待一组 CompanyDemo 模型对象。

```
click: function(this1, evnt, eOpts ){  
    var records = sm.getSelection(),
        demoModels = [];

    // Iterate over the selected Company records
    Ext.each(records, function (record) {
        // Copy the data from the original Company model into the demo model
        var demoModel = new CompanyDemo(record.getData());
        demoModel.set('total', 10);

        demoModels.push(demoModel);
    });

    grid1.getStore().loadData(demoModels, true);
} 
```

# python - 为什么这个特定的猴子补丁覆盖在我的 Python shell (CJSH) 中不起作用

> ID：12756549
> 
> 赞同：0
> 
> 时间：2012-10-06T03:47:37.290
> 
> 标签：python, shell, emacs, python-3.x, monkeypatching

我在[http://JonathansCorner.com/cjsh](http://JonathansCorner.com/cjsh)有一个实验性的 shell ，除其他外，它旨在减少查找隐藏在层次结构中的文件的时间，并 [不完美地] 允许无限的 Python 定制，就像 EMACS 允许无限的 Lisp 定制一样。

我首先对其进行了重构，以删除会限制用户设置比 exec() 寿命更长的变量的能力的函数，然后以旨在为猴子修补提供挂钩的方式在其他函数中重构。

我已经成功地定义和调用了新函数，并且我已经成功地对其他区域进行了猴子修补，除了猴子修补外壳的最明显方法之一，覆盖提示用户输入的函数，以便用户可以拥有一个自定义提示。这个函数是 use_main_prompt()，我从来没有重写它来做任何事情，除了它的可定制行为。

如果您想使用 CJSH shell，最终用户语法是缩进的行是 Python 行，而未缩进的行是 shell 行。

我在[http://JonathansCorner.com/cjsh/download.cgi](http://JonathansCorner.com/cjsh/download.cgi)中做的任何事情会阻止重新绑定该调用吗？我有什么办法可以说“请从头开始看？”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T04:47:18.150

猴子修补函数会导致原始上下文中的范围发生变化。要对此进行测试，请尝试创建两个不同的文件并对其进行修补：

`something.py`：

```
def patchable_function():
    return "I have not been patched yet"

def another_function():
    return patchable_function() 
```

`else.py`

```
import something
from something import another_function

print another_function() # "I have not been patched yet"
something.patchable_function = lambda : "I AM PATCHED!"
print another_function() # "I AM PATCHED!" 
```

# codeigniter - CodeIgniter 和查询字符串问题

> ID：12756550
> 
> 赞同：0
> 
> 时间：2012-10-06T03:47:51.870
> 
> 标签：codeigniter, search, routes

我不擅长 php，而 codeigniter 给了我最大的帮助。我的网站是一个搜索引擎，在我进行搜索后，我的网站的网址是这样的：**mysite.com/** ?search=eminem&type=mp3 ，我不喜欢它。我想这样做，所以当我输入 search eminem 给我这个网址时：**mysite.com/eminem/mp3** 这是来自 CI 的代码

```
<?php

class Pages extends CI_Controller {

    public function view($page = 'home')
    {
        if ( ! file_exists('application/views/pages/'.$page.'.php'))
    {
        // Whoops, we don't have a page for that!
        show_404();
    }

    $data['title'] = ucfirst($page); // Capitalize the first letter
    $this->load->view('templates/header', $data);
    $this->load->view('pages/'.$page, $data);
    $this->load->view('templates/footer', $data);
    }
} 
```

我必须在此处添加哪些其他代码才能将 qwery 字符串转换为路径？

这是routes.php

```
$route['default_controller'] = 'pages/view';
$route['(:any)'] = 'pages/view/$1';

$route['404_override'] = ''; 
```

这是我来自 home.php 的搜索表单

```
<form id="searchwrapper" name="searchform">                                          <input type="text" class="searchbox" id="txtSearch" name="search" />                                        <input type="image" src="../images/empty.png" class="searchbox_submit"/>                                   

<p id="circ">
   <input  type="radio" id="mp3" name="type" checked value="mp3"/>
   <label class="circ-btn normal" for="mp3">Mp3</label></p>
<p id="circ">                   
   <input type="radio" id="album" name="type" <?php echo $radio2;?> value="album"/>
   <label class="circ-btn normal" for="album">Album</label></p>
</form> 
```

这是.htaccess

```
<IfModule mod_rewrite.c>
        RewriteEngine On
        RewriteBase /ci/
        #Checks to see if the user is attempting to access a valid file,
        #such as an image or css document, if this isn't true it sends the
        #request to index.php
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteCond %{REQUEST_FILENAME} !-d
        RewriteRule ^(.*)$ index.php?/$1 [L]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T04:45:53.107

假设 mod_rewrite 已经在工作，那么你可以在你的 routes.php 中设置它

```
$route['default_controller'] = 'pages/view';
$route['(:any)'] = 'pages/view/$1';
$route['(:any)/(:any)'] = "pages/search/$1/$2"; 
```

我正在区分`pages/search`，`pages/view`所以它不会那么混乱。顺便说一句，这必须是您的 routes.php 文件中的最后一条路由，因此它的优先级较低，并且不会与以下示例中的特定路由冲突。因为如果它在您的路由文件之上，那么访问`users/list`将被视为`search=users&type=list`.

```
$route['users/list'] = "users/list";
$route['pages/list'] = "pages/list"; 
```

然后在您的页面控制器中。

```
public function search($search = '', $type = '')
{
   // $search now contains $1 and $type contains $2
   // instead of $_GET['search'] and $_GET['type']
} 
```

希望有帮助。

# ruby-on-rails - 有没有办法让resque作业将生成的pdf直接推送到浏览器？

> ID：12756553
> 
> 赞同：2
> 
> 时间：2012-10-06T03:48:21.553
> 
> 标签：ruby-on-rails, ruby, pdf, prawn, faye

我需要一个动态、异步生成 PDF 并直接推送到浏览器的系统，没有可用的磁盘存储。使用虾似乎很容易，它获取数据并将其发送到浏览器而不先将其存储在某个地方，我在网上找不到任何东西。我想到了 Faye，但是 Faye 可以处理将 PDF 推送到浏览器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T03:56:52.053

我之前在 .net 中做过这个，我将 iframe 的 src 属性设置为返回流的服务。该服务还将 http 标头翻转为 content-inline，以便浏览器不会尝试下载它，而是会尝试将其呈现为内联。如果您尝试这样做，如果浏览器没有 pdf 插件，它将无法工作（必须是现代插件，但您总是有那个人使用 IE6）我不知道一点红宝石，但认为您应该能够做一些类似的事情，或者至少在一个页面上做一个 iframe，该页面以其他东西编写的服务为目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T04:02:00.220

你可以使用“PDFkit”。示例代码是

```
def some_action
  ...
  respond_to do |format|
    format.html
    format.pdf do
      generate_pdf(file.html.haml, :css => [array of css file names that need to be added])
    end
  end
end 
```

在应用程序控制器中 -

```
def generate_pdf(template, options={})
  html = render_to_string(template, :layout => false)
  kit = PDFKit.new(html, :orientation => 'Landscape')
  kit.stylesheets << "#{Rails.root}/app/assets/stylesheets/default_css1.css"
  kit.stylesheets << "#{Rails.root}/app/assets/stylesheets/default_css2.css"

  # Add CSS
  if options[:css]
    options[:css].each do |css|
      kit.stylesheets << "#{Rails.root}/app/assets/stylesheets/#{css}.css"
    end
  end

  send_data(kit.to_pdf, :filename => 'latest.pdf', :type => 'application/pdf', :disposition => 'inline')
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T05:54:39.453

这些PDF有多大？您的数据库有 BLOB 列（如果您没有存储空间，则说明您没有使用 SQLite ...），您可以将生成的 PDF 存储在其中。

或者，您可以将生成的 PDF 存储在 Redis DB 中。或将其保存在 S3 中。

另一方面，浏览器将不时地轮询（使用 ajax）以了解 PDF 是否完整，一旦准备好，它就会下载并显示给用户。

# c# - 如何将值添加到列表 从文本文件？

> ID：12756554
> 
> 赞同：0
> 
> 时间：2012-10-06T03:48:30.853
> 
> 标签：c#, file-io

我有一个文本文件，这是他的一小部分格式：

```
DANNY VIDEO HISTOGRAM DATA
FORMAT VERSION:1.00
SOURCE: <MVI_2483.AVI_Automatic>
DATA: 
Frame 000000: 5977,40775,174395,305855,265805
Frame 000001: 5432,21333,456789,123456,111111 
```

现在每一行框架......有 256 个数字 5977,40775,174395,305855,265805 在示例中，我在这里只显示 5 个数字，但每行/框架有 256 个数字。

在 Form1 我有一个列表：列出直方图

在这种情况下，我需要做的是读取文本文件，文本文件名是 Histograms.txt 来读取文本文件，并且每行/帧都有 256 个数字，我需要添加回列表。因此，列表直方图最终将在索引 [0] 中，例如，我将在 [0] 5977 in [1](https://i.stack.imgur.com/hcrUp.jpg) 40775 in [2] 174395 in [3] 305955 in [4] 265805 中拥有 256 个索引，依此类推 256 个数字.

然后在索引[1](https://i.stack.imgur.com/hcrUp.jpg)中再次 256 个数字...然后在索引 [2] 中，依此类推...

最后，我应该在 List 3803 索引中拥有每个索引在 256 索引内，每个索引都包含一个数字。

这是当列表带有数字时我如何编写文本文件的代码，然后当我再次运行程序时，我需要它将读取文本文件并将其加载回列表。当我运行程序时，列表为空。

```
private void WriteHistograms() // For automatic mode only for now
{
    HistogramsFile = new StreamWriter(_outputDir + "\\" + averagesListTextFileDirectory + "\\"  + "Histograms.txt", false, Encoding.ASCII);
    HistogramsFile.WriteLine("DANNY VIDEO HISTOGRAM DATA\r\nFORMAT VERSION:1.00\r\nSOURCE: " + "<" + averagesListTextFile + ">" + "\r\nDATA: ");
    for (int i = 0; i < Histograms.Count; i++)
    {
        HistogramsFile.Write("Frame " + i.ToString("D6") + ": ");
        for (int x = 0; x < Histograms[i].Length; x++ )
        {
            HistogramsFile.Write(Histograms[i][x] + ",");
        }
        HistogramsFile.WriteLine("!");
    }
    HistogramsFile.WriteLine("DATA");
    HistogramsFile.Close();
} 
```

现在我有另一个函数：LoadHistograms()，我需要读取文本文件并将数字添加回列表。

我现在添加了一张列表的照片，它在将其写入文本文件时是怎样的，以及在从文本文件中读回列表后应该是什么样子。

![在此处输入图像描述](../Images/c4f74d2ffc031608a252eb924d6154f0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T04:12:55.800

通过使用这段代码，您可以很好地了解如何完成它。

```
string line;
List<long[]> list = new List<long[]>();

using (StreamReader file = new StreamReader(@"..\..\Histograms.txt"))
{
    do { line = file.ReadLine(); } while (!line.Trim().Equals("DATA:"));                               

    while ((line = file.ReadLine()) != null)
    {
        long[] valArray = new long[256];

        var split = line.Split(new char[] { ':' });
        if (split.Length == 2)
        {
            var valArrayStr = split[1].Split(new char[] { ',' });
            for (int i = 0; i < valArrayStr.Length; i++)
            {
                int result;
                if (int.TryParse(valArrayStr[i].Trim(), out result))
                    valArray[i] = result;
            }
        }
        list.Add(valArray);
    }
} 
```

快乐的编码...

# java - 如何使用shell脚本执行java代码？

> ID：12756556
> 
> 赞同：0
> 
> 时间：2012-10-06T03:49:02.727
> 
> 标签：java, shell

> 可能重复“[如何从 Java 代码运行 Unix shell 脚本？](https://stackoverflow.com/questions/525212/how-to-run-unix-shell-script-from-java-code) ”。

我想知道如何使用 shell 脚本执行 java 代码？

我想知道的是：

```
shell script executes java code. 
```

我不想知道是

```
java code executes shell script. 
```

*   我的操作系统版本是`cent0s 5.5 (64-bit)`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T03:52:37.433

比如，你的意思是这样的？

```
#!/bin/sh
java -jar your-java-compiled-into-a.jar 
```

# java - 如何检查是否调用了特定打印机？

> ID：12756560
> 
> 赞同：0
> 
> 时间：2012-10-06T03:50:41.867
> 
> 标签：java, windows, printing

我的问题如下。

一组用户[位于同一网络中并且都使用 windows xp] 正在使用特定的网络打印机来打印他们的文档。

现在，每当有人打印某些内容时，我都需要检查该文件名是否以特定代码开头，如果是，我需要在其中一个审计表中插入一行。

问题是，用户可以打开任何文档并尝试使用此打印机打印它们。当我自己的一段代码根本没有调用它时，我如何跟踪这台打印机正在被使用？

有没有办法捕捉到在特定打印机上打印的这个事件，而不管对触发这个事件的来源有什么了解？是否可以使用 java 代码来跟踪它？

热切地等待java大师的回应。预先感谢您的友好合作。

问候，阿尼马克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T03:59:39.327

使用一些打印服务器，如 CUPSD

# c# - 区分 Var = 新列表 (); 和公共变量 Var{ get; 放; }

> ID：12756564
> 
> 赞同：0
> 
> 时间：2012-10-06T03:51:40.663
> 
> 标签：c#

谁能解释一下有什么区别：

```
Var1 = new List<Variable>(); 
```

和

```
public Variable Var1{ get; set; } 
```

在哪里

```
public class Variable 
{
   public string Value { get; set; }
} 
```

它们在哪些方面不同或相同？

任何帮助都很棒。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T08:43:54.233

1)`List<Variable> Var1 = new List<Variable>();`

那是声明`Var1`为`Variable`对象的集合。所以 Var1 将持有`Variable`

```
Var1.Add(new Variable());
Var1.Add(new Variable());
Var1.Add(new Variable()); 
```

现在我们在 Var1 中有 3 个项目

2)`public Variable Var1{ get; set; }`

那就是将 Var1 声明为类的属性，并且一次只能取一个值

```
public class MyClass
{
  public Variable Var1{ get; set; }
}

MyClass c = new MyClass();
c.Var1 = v; //where v is an instance of Variable class
//or
Variable v = c.Var1; //returns an Instance of Variable which is a property of c 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T03:54:36.040

var 是 .NET 提供的数据类型，Var 是隐式类型。隐式类型的局部变量是强类型的，就像您自己声明了类型一样，但编译器确定类型。它为 C# 编程语言中的任何类型起别名。别名类型由 C# 编译器确定。这没有性能损失。Var 是优秀的语法糖。

例如

```
var str = "Hello World"; 
```

编译为

```
string str = "Hello World"; 
```

而这里的变量是一个自定义类，与 C# .NET 的 var 无关。它们无论如何都没有关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T04:01:57.200

`var = new List<Variable>();`

这将创建一个列表`Variable`，如果你关心的是关键字，`var`那么它只是告诉编译器我知道数据类型，所以你继续。

`Variable Var1{get;set;}`是属性，这允许您设置或获取成员`Variable`

例如

```
Var1 = new Variable{
Var1.Value = "abc" // setter;
} 
```

或者

```
return Var1.Value // getter; 
```

# java - PagerTabStrip 无法解析为类型

> ID：12756567
> 
> 赞同：0
> 
> 时间：2012-10-06T03:52:09.853
> 
> 标签：java, android, eclipse, android-support-library

我正在尝试模拟 android 中的幻灯片菜单，如下所示：[Google 如何做到这一点？在 Android 应用程序中滑动 ActionBar](https://stackoverflow.com/questions/11234375/how-did-google-manage-to-do-this-slide-actionbar-in-android-application)。

但是，即使我在构建中包含了 android-support-v13.jar，Eclipse 似乎也无法识别 PagerTabStrip。我尝试导入 android.support.v4.view.PagerTabStrip 但无济于事。

```
import android.content.Context;
import android.util.AttributeSet;
import android.view.MotionEvent;
import android.support.v4.view.PagerTabStrip;

public class ExtendedPagerTabStrip extends PagerTabStrip {

private boolean enabled;

public ExtendedPagerTabStrip(Context context, AttributeSet attrs) {
    super(context, attrs);
    this.enabled = true;
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    if (this.enabled) {
        return super.onTouchEvent(event);
    }

    return false;
}

@Override
public boolean onInterceptTouchEvent(MotionEvent event) {
    if (this.enabled) {
        return super.onInterceptTouchEvent(event);
    }

    return false;
}

public void setNavEnabled(boolean enabled) {
    this.enabled = enabled;
}
} 
```

我收到以下错误：无法解析导入 android.support.v4.view.PagerTabStrip。

我似乎已经成功构建了支持库，因为 ViewPager 类运行良好。我究竟做错了什么？为什么无法识别 PagerTabStrip？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-06T04:29:08.993

右键单击您的项目..

点击`"Android Tools"`->`"Add Support Library"`

之后它将下载android-support.jar。并将其添加到您的项目中。

之后，您的日食将识别 PagerTabStrip

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T04:10:05.720

你应该`android-support-v4.jar`改用。

# html - 如何针对整个网站运行 HTML5 验证器？

> ID：12756568
> 
> 赞同：0
> 
> 时间：2012-10-06T03:52:14.937
> 
> 标签：html, validation, batch-file

我已经在网站中使用 HTML5 大约一年了，但是 W3C 没有提供检查整个域是否有效的选项。有一些工具可以用 HTML4 做到这一点，但它们在 HTML5 中没有帮助。

是否有可以解决此问题的在线服务或浏览器扩展程序？我已经看过但找不到任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T15:15:23.230

你看到我写的那篇了吗？它使用我们服务器上的 Validator.nu 引擎的一个实例，它被称为[HTML Validator Pro](http://html.validator.pro/)。免费最多50页，但我不知道您的域的大小，所以我不知道这是否符合您的要求，但我希望如此！请让我知道它是否适合您以及您对我的任何反馈。

谢谢你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T04:30:38.040

在网上查了一下，我在这里找到了一个服务：http: [//html5.validator.nu](http://html5.validator.nu)，它为整个域提供了 HTML 5 验证。你也看过 Total Validator 吗？[http://www.totalvalidator.com](http://www.totalvalidator.com)它似乎也在做你想要完成的事情。

# iphone - 在不更改界面生成器中的位置的情况下设置 UIImageView 锚点

> ID：12756570
> 
> 赞同：0
> 
> 时间：2012-10-06T03:52:23.503
> 
> 标签：iphone, interface-builder, layer

为了使图像从左到右显示，我将 anchorPoint 设置如下：

```
myImageView.layer.anchorPoint = CGPointMake(0.0f, 1.0f); 
```

然后对其进行动画处理：

```
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:1.0];
[UIView setAnimationCurve:UIViewAnimationCurveLinear];

myImageView.transform = CGAffineTransformMakeScale(1.0, 1.0);

[UIView commitAnimations]; 
```

动画效果很好，但是通过更改图像的锚点，图像不会出现在 Interface Builder 中设置的位置，当设置锚点时，它会移动很多。

有谁知道是否有一种方法可以设置 anchorPoint 或完成此效果而不更改图像在 Interface Builder 中的位置？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T04:15:24.917

在 ViewDidLoad 中：只需初始化您的 ImageView 框架：

[ImageView setFrame:CGRectMake(900, 0, 69, 39)];

并在下面编写代码：

```
 [UIView animateWithDuration:0.5 
                          delay:0.1 
                        options:UIViewAnimationOptionTransitionCurlDown
                     animations:^{
                         //animation code
                         ImageView.frame = CGRectMake(0, 0, 320, 345);

                     } completion:^(BOOL finished) {
                         //completion code

                     }]; 
```

# android - 如何在 android 中为启动接收器附加调试器？

> ID：12756573
> 
> 赞同：1
> 
> 时间：2012-10-06T03:52:49.633
> 
> 标签：android, eclipse, debugging

我是 android 的新手。我已经在我的项目中的设备启动完成时启动了一项服务，但我不知道如何为它附加调试器。即我想为一些错误调试我的代码，所以我应该如何继续那？请帮帮我。在此先感谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-06T04:09:12.937

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.broadcast.receiver.example"
      android:versionCode="1"
      android:versionName="1.0">
    <application android:icon="@drawable/icon" android:label="@string/app_name" android:debuggable="true">

        <activity android:name=".BR_Example"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

    <!-- Declaring broadcast receiver for wifi status changing event -->
        <receiver android:name=".MyReceiver " android:enabled="true" android:exported="false">
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED"/>
            </intent-filter>
        </receiver>

    </application>

    <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />

</manifest> 
```

* * *

```
public MyReceiver extends BroadcastReceiver {   

    @Override
    public void onReceive(Context context, Intent intent) {

     Intent myIntent = new Intent(context, YourService.class);
     context.startService(myIntent);
    } 
```

* * *

我希望它会帮助你男人............

# c++ - c++ 在参数中移位

> ID：12756577
> 
> 赞同：-1
> 
> 时间：2012-10-06T03:53:50.460
> 
> 标签：c++, bit, shift

嘿伙计们，我的任务基本上是从 char 中获取小数。例如，输入参数是 8751。如何将 51（仅）转换为十进制？我知道如何获得 87，如果它是十六进制（0x8751 和 0xff），我也知道如何获得 51。

所以我的程序的输出是：

```
(0x87 & 0x7f)*128 + (0x51) 
```

或者

```
(135-128)*128 + 81 
```

谢谢

代码：：

```
#include <iostream>
#include <cstdio>

int
main(int argc, char* argv[])
{
char* nums;
// long sum = 0;
 for ( int i = 1; i < argc; ++i )
 {
   nums=argv[i];
 // long a;
 // ::sscanf(argv[i], "%lx", &a); // read hex string and form long value
 // sum += a; // same as 'sum = sum + a'
 }
 int len = strlen(nums);

if(len<=2){
   unsigned long cur; 
   ::sscanf(nums, "%lx", &cur);
   if(cur<=128){
       std::cout<<cur;
   }
 }

  if(len=4){
   unsigned long cur;
   ::sscanf(nums, "%lx", &cur);
   char tr []= "0x";
   //std:: cout << cur<<"\n";
   unsigned long cur1 = nums & 0xff;
   unsigned long cur2 = cur >> 8;
   if(cur1 >128){
       //std :: cout <<cur1<<"\n";
       std::cout<<0;
   }
   else{
       unsigned long result = (cur2 - 128)*128 + cur1;
           std ::cout << result;
     }
   }

    system("pause");
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T04:52:50.293

输入总是4个字符长吗？如果是这样的话 ...

```
#include <stdio.h>

int main(int argc, char *argv[]) {
    char num [] = "8751";
    int hi, lo;
    sscanf(num, "%2x%2x", &hi, &lo);
    printf("%s -> %d, %d\n", num, hi, lo);
} 
```

打印`8751 -> 135, 81`。如果`num`被改变，你得到`81ab -> 129, 171`or `a1b7 -> 161, 183`。

# ruby-on-rails - Mongoid has_one 多态关联的逆

> ID：12756580
> 
> 赞同：0
> 
> 时间：2012-10-06T03:54:10.100
> 
> 标签：ruby-on-rails, activerecord, associations, mongoid3

我有以下模型结构。我有一个包含许多行程节点的行程。每个行程节点都是一个地方、酒店、活动等的包装器。例如。

Itinerary = "巴黎之旅" Itinerary.itinerary_nodes = [Node1, Node2, Node3] 其中 Node1 = "JFK 机场" Node2 = "CDG 机场" Node3 = "埃菲尔铁塔"

所以本质上，节点代表您将在行程中访问的地方。在我的模型结构中；让我们假设我的机场的模型与纪念碑或酒店不同。现在我想创建一个这样的关联；

```
class ItineraryNode
  include Mongoid::Document
  has_one :stopover
end 
```

每次中途停留可以是不同的对象。它的类型和 id 默认存储，稍后会使用它进行膨胀。

那么如何声明多个模型关联到 ItineraryMode？我可以通过确保在初始化程序中手动设置这些属性来专门实现这一点；但很好奇默认情况下是否支持这样的东西。

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T05:46:12.033

这不是“has_one”，而是“belongs_to”（多态）

```
class ItineraryNode
  include Mongoid::Document
  belongs_to :stopover, :polymorphic => true
  belongs_to :itinerary
end

class Airport
  include Mongoid::Document
  has_many :itinerary_nodes, :as => :stopover
end

class Place
  include Mongoid::Document
  has_many :itinerary_nodes, :as => :stopover
end 
```

所以现在你可以得到：

```
@itinerary.itinerary_nodes.each do |node|
  if node.stopover.is_a? Airport
    puts "Welcome to #{note.stopover.name}"
  elsif node.stopover.is_a? Event
    puts "Bienvenue, would you like a drink?"
  elsif node.stepover.is_a? Place
    puts "The ticket line is over there"
  end
end 
```

（我使用`if`构造只是为了更好地显示多态性，您将在这里使用`case`构造......）

你看它`node.stepover`可以有很多类。

**编辑**（在评论之后，我知道该`ItineraryNode`模型是对多对多关联的手工多态性的尝试。

来自 Mongoid 文档：

> 除了 has_and_belongs_to_many 之外，所有关系都允许多态行为。

因此，您需要使用中间模型 ( `ItineraryNode`)。提供的解决方案是我能想到的最简单的解决方案。

# webgl - Three.js - 渲染 WebGLRenderTarget 纹理的最有效方法是什么？

> ID：12756588
> 
> 赞同：7
> 
> 时间：2012-10-06T03:55:57.233
> 
> 标签：webgl, three.js, renderer

## 问题

我已经在我的项目中达到了一个点，我将渲染到 WebGLRenderTargets 并将它们用作我的主场景中的纹理。它有效，但似乎我让它做的工作比它需要的要多得多。我生成的纹理只需要为 64x64，但因为我同时使用我的主渲染器（窗口宽度乘窗口高度），它不必要地以更大的分辨率渲染 WebGLRenderTargets。

我可能是错的，但我相信这会增加绘制到每个 RenderTarget 所需的处理以及然后将大纹理绘制到网格所需的处理。

我尝试使用第二个渲染器，但在从渲染器 B 绘制到渲染器 A 后尝试在渲染器 A 中使用 WebGLRenderTarget 时，我似乎收到此错误：

`WebGL: INVALID_OPERATION: bindTexture: object not from this context`

## 例子

作为参考，您可以[在此处](https://dl.dropbox.com/u/7377788/Stack%20Overflow/WebGLRenderTarget/generateMap3.html)查看我的摘要页面（警告：由于我正在询问的问题，此页面可能会延迟您）。我在辅助场景中的平面上运行单纯形函数，并使用相机放置将其分割成多个部分，然后通过 WebGLRenderTarget 将这些片段应用于平铺片段，以便它们流畅但单独的片段。

## 问题

我的假设是否正确，即使用相同的渲染器大小比渲染到较小的渲染器效率要低得多？如果是这样，您认为最好的解决方案是什么？目前有没有办法实现这种优化？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T15:23:23.707

`renderer.setSize()`仅当渲染到*屏幕*时，渲染器使用其中的尺寸参数来设置视口。

当渲染器渲染到屏幕外渲染目标时，渲染到的纹理大小由参数`renderTarget.width`和给出`renderTarget.height`。

因此，您的问题的答案是两者都使用相同的渲染器是可以的；没有效率低下。

# java - 多行时，PreparedStatement 上的 MySQL 语法错误失败，单行执行

> ID：12756596
> 
> 赞同：1
> 
> 时间：2012-10-06T03:57:03.763
> 
> 标签：java, mysql, syntax-error

我不断收到此错误，我一生都无法理解是什么原因造成的：

`You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '= '111-11-1111'' at line 1`

它被这些陈述抛出：

```
ps = conn.prepareStatement(
         "SELECT * FROM courses WHERE NOT EXISTS"
         + "(SELECT * FROM courses"
         + "NATURAL JOIN register"
         + "WHERE ssn = ?)")
ps.setString(1,ssn);

rs = ps.executeQuery(); 
```

我已经在 MySQl 命令行客户端中输入了这个确切的命令，一个字符一个字符（除了我用 '111-11-1111' 替换了？），它执行顺利。然而，当我尝试使用 Java 执行它时，它会因上述语法错误而失败。我有一个下沉的怀疑，答案是非常明显的，盯着我的脸，但我太累了，看不到它。有什么想法吗？

**编辑** 所以我解决了眼前的问题，但它只是提出了更多问题。如果我将查询构造为单行字符串而不是多行：

```
ps = conn.prepareStatement(
                "SELECT * FROM courses WHERE NOT EXISTS (SELECT * FROM courses NATURAL JOIN register WHERE ssn = ?)"); 
```

它执行得很好。（对不起水平滚动条，但在这种情况下我别无选择。）所以，我重新提出我的问题：为什么在 pony-loving-frack 中这会有所不同？我正在使用 Java 7、Netbeans 7.2 和 MySQL 5.5，如果这有什么不同的话。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T04:26:35.917

您正在使用连接创建一个字符串 - 尝试打印该字符串，您会看到问题......每个子字符串的开头或结尾没有任何空格，因此连接的字符串将是：

```
"SELECT * FROM courses WHERE NOT EXISTS(SELECT * FROM coursesNATURAL JOIN registerWHERE ssn = ?)" 
```

所以`coursesNATURAL`和`registerWHERE`将是糟糕的语法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T04:25:58.963

两者都是单行（第一次查询中也没有 \n / 换行符）

问题是在每行中断之间缺少空间，即在`FROM courses`你需要一个空间之后。

所以你的第一个查询实际上是错误的。因为它转换为：

```
 FROM **coursesNATURAL** 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-06T04:33:01.767

每当您在 JAVA 中创建跨越多行的字符串时，请确保在第一行之后或第二行之前留有空间

```
+ "(SELECT * FROM courses"
     + "NATURAL JOIN register" 
```

这只会解决

```
SELECT * FROM coursesNATURAL JOIN register" 
```

# php - 授予权限后PHP sdk重定向

> ID：12756597
> 
> 赞同：0
> 
> 时间：2012-10-06T03:57:20.177
> 
> 标签：php, facebook, sdk

我在编码方面没有很好的技能我想做的是当我用户访问我的网站并且在他授予对我的应用程序的访问权限后，消息将被发布到他的墙上，我希望他被重定向到墙上的其他 URL帖子工作正常，但在他授予权限后什么都没有发生，只显示白页这是我拥有的代码：

```
 <?php
require_once "./src/facebook.php";

$app_id = "xxxxxx";
$app_secret = "xxxxx";

// Init facebook api.
$facebook = new Facebook(array(
        'appId' => $app_id,
        'secret' => $app_secret,
        'cookie' => true
));

// Get the url to redirect for login to facebook
// and request permission to write on the user's wall.
$login_url = $facebook->getLoginUrl(
    array('scope' => 'publish_stream')
);

$loginUrl = $facebook->getLoginUrl($params);

// If not authenticated, redirect to the facebook login dialog.
// The $login_url will take care of redirecting back to us
// after successful login.
if (! $facebook->getUser()) {
    echo <<< EOT
<script type="text/javascript">
top.location.href = "$login_url";
</script>;
EOT;

    exit;
}

// Do the wall post.
$facebook->api("/me/feed", "post", array(
    message => "test",
    picture => "http://s.ytimg.com/yt/img/doodles/teachers_day_yoodle-vflBKh2mG.png",
    link => "http://www.youtube.com/",
    name => "test",
    caption => "test"
));
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T11:51:22.873

在授予权限后重定向用户使用这个：

```
$user = $facebook->getUser();

if($user){
    // Get logout URL
    $logoutUrl = $facebook->getLogoutUrl();
}else{
    // Get login URL
    $loginUrl = $facebook->getLoginUrl(array(
        'scope'         => 'publish_actions',
        'redirect_uri'  => 'http://mysite.com/success.html', //redirect user to this url
        ));
} 
```

# iphone - Iphone 分配错误

> ID：12756599
> 
> 赞同：5
> 
> 时间：2012-10-06T03:58:17.280
> 
> 标签：iphone, ios, xcode, distribution

我是 iPhone Distribution 的新手。我创建了 Apple ID `U765UXW88D.com.edwincs.*`。配置文件名称是`MobileHealthGuide`. 我在分发选项卡中制作了这些。

我的 xcode 版本是**3.2.4**使用应用程序加载器上传应用程序时，出现此错误

> 应用程序未通过协同设计验证。签名无效，或未使用 Apple 提交证书签名。

我的项目名称`MobileHealthGuide`也是。我已尝试吊销证书和配置文件，但错误仍然存​​在。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T10:40:25.650

我也遇到过同样的问题。它表明我的钥匙串中有重复的证书注册。删除其中一个（我从系统钥匙串中删除了一个）解决了这个问题。

**帮助我解决问题的步骤：**

1.  打开 KeyChain Access 应用程序
2.  选择“登录”钥匙串，然后在底部窗格中选择“证书”
3.  切换到“系统”钥匙串，看看是否在两个链中都注册了证书。
4.  删除其中之一
5.  重建应用程序
6.  您可能需要检查在您的发行版构建属性中选择了哪些代码签名配置文件。

好的，然后确保清理构建并从应用程序中删除构建文件夹。如果这对您不起作用，还有另一种选择：

**验证以下步骤以创建分发证书并在您错过任何人时执行。**

1.  在钥匙串中生成证书签名请求。
2.  使用它在门户中创建或撤销 DISTRIBUTION 证书。之后下载并安装它并验证名称下的密钥。
3.  在配置门户中注册设备。
4.  然后在门户中创建或修改 DISTRIBUTION 配置文件。之后下载并安装它并验证它在 Organizer 中似乎是有效的，因为没有警告。
5.  确保在 xcode 中选择正确的构建设置。

现在这肯定会解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T04:42:16.533

好的，这里是如何分发的详细步骤：

您想在 Keychain Access 中申请开发和分发证书并将其上传到 developer.apple.com（您是开发者会员计划的一员，对吧？）

创建应用 ID（在配置文件中）

创建分发证书 - 确保此和第 2 步遵循您的捆绑 ID

下载配置文件并拖动到 Xcode

转到您的 Xcode 项目，在目标或项目构建设置中将您的代码签名选项设置为分发证书（它必须与您的 Bundle ID 以及您的分发和开发证书匹配） - 可能有推荐或自动配置文件，只需选择与您的身份和应用程序配置文件和捆绑 ID 匹配的那个

现在去编辑方案->然后从调试更改为发布

然后转到项目而不是目标而不是构建设置并输入“代码签名”，将选项更改为您的分发配置文件

设置为 iOS 设备构建（或根本没有）

转到产品 -> 构建 -> 构建存档

在侧面（您的课程选项卡等）向下滚动到应命名的产品（AppName.app）并在查找器中显示它。

在 iTunes Connect 上创建应用程序

压缩 .app 并将其加载到 Application Loader

送出去！

提示：

1.  确保您使用的是正确的 Bundle ID
2.  尝试清洁
3.  确保您的证书未过期

以下是可能发生这种情况的原因[的扩展列表：](https://developer.apple.com/legacy/library/technotes/tn2250/_index.html#//apple_ref/doc/uid/DTS40009933-CH1-TNTAG32)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T04:14:14.480

确保您在项目目标中添加了正确的代码登录。![在此处输入图像描述](../Images/1371b2e769f3a2c5a2647572eaeed394.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T04:14:52.110

失败的签名验证可能由于许多不同的原因而发生。[请参阅 Apple 在TN2250](https://developer.apple.com/legacy/library/technotes/tn2250/_index.html#//apple_ref/doc/uid/DTS40009933-CH1-TNTAG32)中的常见原因列表。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-12T13:35:23.150

分发签名验证失败的最常见原因是应用程序是使用开发人员配置文件而不是分发配置文件进行签名的，或者应用程序是使用错误的构建配置构建的。要考虑此潜在原因，请根据以下建议检查您的设置：

```
The Release build configuration must be assigned to your Archive task. To ensure this, select the "Scheme" pop-up menu in the upper-left corner of the Xcode Toolbar, and choose "Edit Scheme". Select the "Archive" task and make sure the Build Configuration is "Release".

To check that your app is signed with the correct distribution profile, use the steps in section How do I check which certificate was used to sign my app? and ensure the Authority is "iPhone Distribution". If it is not, continue to next bulleted items to correct the responsible configuration.

Ensure that the appropriate distribution provisioning profile that you created for this application on the iOS Portal site is assigned to the Release build configuration. To ensure that use the steps in section Assigning Provisioning Profiles to Build Configurations.

Next, ensure that you are choosing the correct distribution provisioning profile when distributing your app on the Xcode Organizer > Archives tab. To do that, use the sections linked below depending on your distribution method and take special note you're selecting the correct profile on the "Identity" field (Xcode 4-4.2) or "Code Signing Identity" field (Xcode 4.3+) after clicking Submit/Share/Validate or Distribute on the Xcode Organizer > Archives tab. 
```

[https://developer.apple.com/legacy/library/technotes/tn2250/_index.html#//apple_ref/doc/uid/DTS40009933-CH1-TNTAG32](https://developer.apple.com/legacy/library/technotes/tn2250/_index.html#//apple_ref/doc/uid/DTS40009933-CH1-TNTAG32)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-17T22:20:48.193

我也有类似的问题。在一个项目中，使用我的 dist 配置文件，它运行良好，我可以构建到设备上。

在另一个项目中，当使用相同的 dist 配置文件时，应用程序会启动、加载启动屏幕、处理第一页然后退出，而不会在 Xcode 或它自己的日志中引发错误。

当我将代码签名更改为通用开发配置文件时，应用程序在所需设备上启动时不会出现问题。

我重新下载了证书，dist 配置文件，删除了旧的。

这怎么可能？如何解决这个问题？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-14T23:49:16.040

升级您的 xCode！你正在使用一个非常旧的。

可能您尝试过，但转到[https://developer.apple.com/](https://developer.apple.com/)然后 iOS 临时门户网站有很多工具可以帮助您。

如果您不使用应用内购买、推送通知、iCloud 等，您可以跳过应用 ID，只需设置一个通用证书，例如 U765UXW88D.*，这样您就不需要每次都为新应用执行此过程.

确保您创建了分发证书并在 xCode 上使用该证书签名以进行发布/分发。

在 xCode 本身上，确保您定义了与 iTunes 连接上相同的捆绑 ID。

祝你好运。

# c# - RadialGradient 填充 GradientStop 错误（不包含采用 2 个参数的构造函数）

> ID：12756602
> 
> 赞同：0
> 
> 时间：2012-10-06T03:58:44.840
> 
> 标签：c#, .net, wpf, silverlight

我在 VS2012 上测试 WPF/Silverlight。我在 MSDN 上发现以下代码应该使用 RadialGradient 方法填充一个矩形，但得到一个错误“'System.Windows.Media.GradientStop' 不包含采用 2 个参数的构造函数”。没有重载，只有一种不带参数的可用方法，但如果是这样，那么我将如何加载这些值？在我研究的任何地方，它们都与 2 个参数一起使用。

矩形填充在 XAML 中时工作正常......

（部分 XAML 代码）...

```
 <Rectangle.Fill>
                    <RadialGradientBrush>
                        <GradientStop Color="Black" Offset="0.063"/>
                        <GradientStop Color="White" Offset="1"/>
                    </RadialGradientBrush>
                </Rectangle.Fill> 
```

但在 C# 中给出错误...

```
using System;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Ink;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;
using System.Windows.Interactivity;
using Microsoft.Expression.Interactivity;

namespace Test
{
    public partial class MainPage : UserControl
    {
        public MainPage()
        {
        // Required to initialize variables
        InitializeComponent();
        }

        public void drawBars(int numBars)
        {
            Rectangle rectangle;
            double offsetX=0;
            double width=0;
            for (int i = 0; i < numBars; i++)
            {
                RadialGradientBrush myBrush = new RadialGradientBrush();
                myBrush.GradientOrigin = new Point(0.75, 0.25);
                myBrush.GradientStops.Add(new GradientStop(Colors.Yellow, 0.0)); //error
                myBrush.GradientStops.Add(new GradientStop(Colors.Orange, 0.5)); //error
                myBrush.GradientStops.Add(new GradientStop(Colors.Red, 1.0)); //error
                rectangle.Fill = myBrush;
            }
         }

         private void Button_Click_2(object sender, RoutedEventArgs e)
         {
                drawBars(10);
         }
    }
} 
```

我从这里得到了代码...... [http://msdn.microsoft.com/en-us/library/system.windows.media.gradientstop.color.aspx](http://msdn.microsoft.com/en-us/library/system.windows.media.gradientstop.color.aspx)

谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T07:15:15.213

Silverlight 不支持 2 参数构造函数 ( [GradientStop Constructor](http://msdn.microsoft.com/en-us/library/ms602457%28v=vs.95%29.aspx) )。采用

```
GradientStop stop = new GradientStop();
stop.Color = Colors.Yellow;
stop.Offset = 0.0;
myBrush.GradientStops.Add(stop); 
```

反而。

# php - PHP中标头位置的使用

> ID：12756603
> 
> 赞同：-4
> 
> 时间：2012-10-06T03:58:47.970
> 
> 标签：php

我可以在使用中使用相对路径吗

```
header("location: http://something.com/someotherthing"); 
```

在 PHP 中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T04:02:45.533

[***标准***](https://www.rfc-editor.org/rfc/rfc2616#section-14.30)是您应该使用绝对路径。

根据标准，使用相对路径是不正确的，但大多数流行的浏览器都会接受相对 URL。

[http://en.wikipedia.org/wiki/HTTP_location#Relative_URL_example](http://en.wikipedia.org/wiki/HTTP_location#Relative_URL_example)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T04:04:29.927

标准（[http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.30](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.30)）说位置标头必须设置为绝对路径，但大多数客户端仍然可以使用相对路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T04:05:35.647

路径“http://something.com/something”实际上是**绝对**路径而不是**相对**路径。是的，您可以同时使用相对路径或绝对路径。

# codeigniter - CI 不加载库

> ID：12756605
> 
> 赞同：0
> 
> 时间：2012-10-06T03:59:22.890
> 
> 标签：codeigniter

这是我的控制器：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class User extends CI_Controller {

    public function __construct() {
        parent::__construct();
        $this->load->model('user_model');
    }

    public function index() {
        redirect('user/login');
    }

    public function login() {
        $this->load->library('form_validation', '', 'fv');
        var_dump($this);
        $this->fv->set_rules('nick_name', 'Nick Name', 'trim|required|max_length[12]|min_length[4]');
        $this->fv->set_rules('password', 'Password', 'trim|required|md5');
    }
}
?> 
```

我基本上是在写一个登录控制器。在登录功能中，在此之后我加载了视图等。但直到这里，我收到以下错误：

```
A PHP Error was encountered
Severity: Notice
Message: Undefined property: User::$fv
Filename: controllers/user.php
Line Number: 23 
```

我已经将控制器中的所有其他内容有效地注释到我上面粘贴的内容中。我不明白问题出在哪里。谢谢。

[编辑]

在 var 转储 $this 对象时，我发现了更不寻常的事情。对象“fv”没有在 $this 对象中定义，而是在 $this->user_model 对象下定义。所以 isset($this->fv) 返回 false 并且 isset($this->user_model->fv) 返回 true。是的，我尝试了 $this->load->library('form_validation') 而不是将其命名为“fv”，结果保持不变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T09:52:27.237

您的控制器名称应命名为 user.php 并且它应位于控制器文件夹中。

尝试 CI 推荐的编码风格，例如，

$this->load->library('form_validation');

$this->form_validation->set_rules(); ETC..

# java - 设置类路径。javac 无法识别

> ID：12756611
> 
> 赞同：4
> 
> 时间：2012-10-06T04:00:01.177
> 
> 标签：java, javac

我正在尝试从命令行运行我的 java 程序。

我读了一篇关于设置类路径的文章，但我得到一个错误 javac is not Recognized as internal or external command。我该怎么办？（我不想设置永久的 CLASSPATH）这是我在命令行中所做的

```
D:\user> set path=%path%;C:\Program Files\Java\1.7.0_07\bin

D:\user> cd testing

D:\user\testing> javac firstProgram.java
'javac' is not recognized as an internal or external command,
operable program or batch file. 
```

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-06T04:05:12.403

假设 PATH 是正确的¹，最可能的原因是您安装了 JRE ......并且 JRE 不包含 java 编译器。如果要从命令行编译，则需要安装 JDK。

（您可以通过查看`C:\Program Files\Java\1.7.0_07\bin`目录来确认它是否包含`javac.exe`文件。JRE 不会...）

> 在哪里可以找到Java编译器下载..

您需要下载其中一个 JDK 安装程序；请参阅[http://www.oracle.com/technetwork/java/javase/downloads/index.html](http://www.oracle.com/technetwork/java/javase/downloads/index.html)

* * *

^(1 - 我认为 Windows 上的 PATH 变量中不需要引号。至少这就是谷歌为我找到的各种例子所暗示的。但我从来没有真正理解在 Windows 中引用背后的逻辑......)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T05:10:38.753

它是与**Program Files**相关的问题。

首先确保您的 JDK 文件夹安装在**Program Files**或**Program Files(x86)**或任何其他文件夹中。

然后你应该使用“”中的bin文件夹的路径。因为命令提示符确实会在空格处断开字符串。当你将它写在“”中时，它将作为一个完整的字符串。

你试试这些命令

```
set path=%path%;"C:\Program Files\Java\1.7.0_07\bin" 
```

或者

```
set path=%path%;"C:\Program Files(x86)\Java\1.7.0_07\bin" 
```

它可能会帮助您摆脱困境。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T04:07:31.967

最好在环境变量中执行并检查它！

![在此处输入图像描述](../Images/b2ac11fb3fa88d91b00b04e6eb2dadb1.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T05:46:03.323

尝试从命令提示符 C:\Program Files\Java\1.7.0_07\bin\javac ab.java 识别以下命令

这只是为了验证您的 javac

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-04T08:20:30.707

这是临时设置路径的方法，这意味着如果关闭并重新打开“命令提示符”，则必须再次设置路径。

假设路径是`C:\Program Files\Java\jdk1.6.0\bin`

***输入C:\Program Files\Java\jdk1.6.0\bin***并按 ENTER 即可。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-20T13:53:31.127

这些命令`D:\user> set path=%path%;C:\Program Files\Java\1.7.0_07\bin`对我很有效

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-09-08T18:01:31.853

为此添加更多信息：

请检查您计算机上安装的 JDK 和 JRE 的版本。最近，即使设置了 PATH，我也遇到了同样的问题。它给出了错误“javac - 命令未被识别”

解决方案是必须有类似版本的JDK以及JRE

例如：JDK 1.7.75 和 JRE 1.7.75

# image - 如何通过代码定位照片中人脸的位置/坐标？

> ID：12756612
> 
> 赞同：0
> 
> 时间：2012-10-06T04:00:04.240
> 
> 标签：image, pixel, face-detection

我知道 face.com 及其很酷的 API。但它只识别照片中的人。我真的不需要那个。我希望能够检测给定 2d 照片中人脸的位置（如 x、y、宽度和高度）。如果有人知道正在进行的项目、可用的项目，请帮助我提供一些链接、提示和或建议。对此深表感谢。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T18:24:53.087

使用 OpenCV 人脸检测器。它给出 x,y,width,height

# java - when() 是如何工作的？

> ID：12756615
> 
> 赞同：4
> 
> 时间：2012-10-06T04:00:48.753
> 
> 标签：java, mocking, mockito

在下面的例子中

```
when(myMethod("abc", 123)).thenReturn(456); 
```

该方法如何在`when()`不实际调用的情况下捕获方法名称和参数`myMethod()`？

我可以编写一个方法来做同样的事情，`when()`以便我得到一个方法指针和一个`Object`s 数组作为稍后调用的参数吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T04:11:39.340

该方法`myMethod` *被*调用。但它是在模拟对象上调用的——这就是“技巧”。

当然，您可以编写接受“方法指针”（在 Java 中，它将是 class 的对象`Method`）和一些参数的代码，然后使用`invoke`，但这样做实际上并没有比`myMethod`直接调用模拟对象买任何东西。

更常见的`when`调用如下：

```
MyObject myObject = mock(MyObject.class);
when(myObject.myMethod("abc", 123)).thenReturn(456); 
```

尝试打印（或记录）表达式

```
myObject.getClass().getName() 
```

这里。您将看到模拟对象的类实际上不是`MyObject`. 但它属于具有相同接口的类。对该对象的调用会更新一些内部状态。这允许 Mockito 跟踪它的使用方式，并允许您断言各种事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T23:56:08.117

在你上面的例子中，`myMethod`是一个模拟对象的方法。没有任何期望，Mockito 将`null`根据数据类型返回 、 0 或 false ，这`when`将默默地丢弃。

但是，您也可以`when`在不是模拟的对象上使用，而是使用`Mockito.spy()`. 在这种情况下，方法实际上会在`when`方法中被调用，这通常不是您想要做的。Mockito 提供了另一种称为`doReturn`（或可能是`doAnswer`or `doThrow`）的方法，它为您提供了一个替换对象，因此永远不会调用原始对象（[文档](http://docs.mockito.googlecode.com/hg/latest/org/mockito/Mockito.html#do_family_methods_stubs)）：

```
doReturn(1).when(mySpiedObject).getSomeInteger(anyString(), eq("seven")); 
```

请注意，Mockito 文档推荐使用`when`而不是`doReturn`因为后者[不是类型安全的](http://docs.mockito.googlecode.com/hg/latest/org/mockito/Mockito.html#doReturn%28java.lang.Object%29)。

# php - 如何根据PHP中的对象数量打印

> ID：12756617
> 
> 赞同：1
> 
> 时间：2012-10-06T04:01:14.187
> 
> 标签：php, arrays, for-loop

我想根据这种模式打印对象的数量：

```
If there is 1 object, print 0
If there is 2 objects, print 0 1
If there is 3 objects, print 0 1 2 
```

我尝试了以下代码：

```
for($i = count($nodes) ; $i >= 0 ; $i--){
print $i;
} 
```

但结果是：

```
If there is 1 object, print 0 1
If there is 2 objects, print 0 1 2
if there is 3 objects, print 0 1 2 3 
```

我不能使用。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T04:05:03.737

你应该这样使用：

```
 $n = 3; // where n is no. of object
for($i=0; $i<$n; $i++){
    print $i." ";
    }
 //output 0 1 2 
```

# facebook - 帖子上的 Facebook 点赞按钮未显示

> ID：12756619
> 
> 赞同：0
> 
> 时间：2012-10-06T04:01:45.843
> 
> 标签：facebook, facebook-like

我在一个网站上工作，当有人发布帖子时，我遇到了 Facebook 的点赞按钮问题，它应该显示点赞按钮，但我没有看到

我看到一个类似的问题，其中一位用户说如果我们使用 Facebook LINTER -> [https://developers.facebook.com/tools/lint](https://developers.facebook.com/tools/lint)将解决问题......但我仍然有同样的错误。

这是我从链接中得到的

应该修复的开放图警告

*   推断属性：应显式提供“og:url”属性，即使可以从其他标签推断出值。

    推断属性：应显式提供“og:title”属性，即使可以从其他标签推断出值。

    推断属性：应显式提供“og:description”属性，即使可以从其他标签推断出值。

    推断属性：应显式提供“og:image”属性，即使可以从其他标签推断出值。

    小 og:image：所有 og:image 引用的图像在两个维度上都应至少为 200px。

应该修复的按钮警告

*   缺少管理员和应用 ID：缺少 fb:admins 和 fb:app_id 标签。这些标签对于 Facebook 呈现产生高点击率的新闻提要故事是必要的。

    Like Button Tag Missing: og:title 丢失。og:title 元标记对于 Facebook 呈现产生高点击率的新闻提要故事是必要的。

    Like Button Tag Missing: og:type is missing。og:type 元标记对于 Facebook 呈现产生高点击率的新闻提要故事是必要的。

    Like Button Tag Missing: og:image 丢失。og:image 元标记对于 Facebook 呈现产生高点击率的新闻提要故事是必要的。

    请检查给定 url 中所有带有标签 og:image 的图像，并确保其符合推荐的规范。

我怎样才能解决这个问题 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T04:35:37.410

查找 JavaScript 错误。如果 JavaScript 在发布时被破坏，其他元素（如 Facebook 点赞按钮）将不会呈现

# java - 如何在 Java Swing 中使用 Wingdings 字体

> ID：12756623
> 
> 赞同：4
> 
> 时间：2012-10-06T04:02:10.040
> 
> 标签：java, swing, wingdings

当我尝试使用 Wingdings 字体（或其他符号字体）时，文本显示为矩形而不是正确的文本。如何让正确的字符显示？

```
import java.awt.*;
import javax.swing.*;

public class WingdingsFontDisplay extends JFrame
{
    public static void main(String[] args)
    {
        new WingdingsFontDisplay();
    }

    public WingdingsFontDisplay()
    {
        this.setSize(500,150);
        this.setTitle("Fun with Fonts");
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        //This shows that I do have "Wingdings" available
        GraphicsEnvironment g;
        g = GraphicsEnvironment.getLocalGraphicsEnvironment();
        String[] fonts = g.getAvailableFontFamilyNames();
        for(String f : fonts)
        {
            System.out.println(f);
        }

        //Displaying text in the Wingdings font shows rectangles
        JLabel wingdingsText = new JLabel("All work and no play makes Jack a dull boy");
        Font f1 = new Font("Wingdings", Font.PLAIN, 14);
        wingdingsText.setFont(f1);
        this.add(wingdingsText, BorderLayout.NORTH);

        //Displaying text in Arial works correctly
        JLabel arialText = new JLabel("All work and no play makes Jack a dull boy");
        Font f2 = new Font("Arial", Font.PLAIN, 14);
        arialText.setFont(f2);
        this.add(arialText, BorderLayout.SOUTH);

        this.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T05:03:05.460

您需要为您寻找的符号使用适当的 Unicode 范围。在 Java 中，符号不会覆盖在 ASCII 范围内，而是有自己独特的字符代码。

[您可以在http://unicode.org/~asmus/web-wing-ding-ext.pdf](http://unicode.org/~asmus/web-wing-ding-ext.pdf)找到对相应符号代码的引用。最常见的符号在 0x2200 和 0x2700 Unicode 范围内。

您的 Java 安装可能包括**SymbolTest**示例小程序，​​它可以直接预览 Unicode 范围与可用字体的表示。但是请注意，更好的 Java 实现将使用字体替换符号或不采用指定字体的字符，因此您需要确保您确实获得了指定的字体。

# php - 未显示 MySQL 行

> ID：12756625
> 
> 赞同：-2
> 
> 时间：2012-10-06T04:02:18.573
> 
> 标签：php, mysql, database

> **可能重复：**
> [Mysql 数组不工作](https://stackoverflow.com/questions/12756514/mysql-array-not-working)

我试图在表单选项中显示名为 uname 的 mysql 数据库列的每一行，但它只显示一个“”。这是我的代码。

```
<?php
session_start();
require('../../config.php');
$user = $_SESSION['user'];
$qry=("SELECT `rank`,  `uname` FROM users WHERE `uname` = '$user'");
$result=mysql_query($qry);
$row = mysql_fetch_assoc($result);
$rank = $row['rank'];
$logged = $_SESSION['loggedin'];
  if ($logged == true) {
   if ($rank >= 3) {
    echo "Succesful, $user.<br />
      <form method='POST' action='delete.php'>
      <select><option>Please select</option>";
      while ($row = mysql_fetch_assoc($result)) {
            $users = $row['uname'];
            $lol = ucwords($users);
           }
       echo "<option>$lol</option>";
       echo "</select>
    </form>";
   } else {
  echo "Your not an admin. $user";
  }
 } else {
echo "Please login.";
}

?> 
```

# flash - 从数据库中为 amfphp 返回一个 byteArray 对象数组

> ID：12756627
> 
> 赞同：1
> 
> 时间：2012-10-06T04:02:46.577
> 
> 标签：flash, bytearray, remoting, amfphp

使用 amfphp。

我可以返回一行字节数组对象，但每一行都将包含一个我想返回到闪存的新字节数组对象。

多维数组转换为字节数组，然后发送到数据库表“ba”，返回时我只能重新加载第一个或最后一个结果。

示例代码：

```
public function read(){

$result = mysql_query("SELECT * FROM users");

for($i=0;$i<mysql_num_rows( $result );$i++){

$rows[$i] =  new ByteArray($result[$i]['ba']);

};

return $rows; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T00:00:41.733

对于任何偶然发现同样的拔毛器的人。AMF bytearray 函数中有一个错误，可以用它来修补；

[http://piggymemo.blogspot.ca/2010/03/patch-for-amfphp-amf3-bytearray.html](http://piggymemo.blogspot.ca/2010/03/patch-for-amfphp-amf3-bytearray.html)

它的 php 最终看起来像这样；

```
$result = mysql_query("SELECT * FROM users");
$rows = array();

while ($entry = mysql_fetch_object($result)) {

$bar = new ByteArray($entry->ba);
$rows[] = $bar;

}

return $rows; 
```

感谢上帝！是时候回去工作来庆祝了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T16:44:14.500

或者，在 amfPHP v2 及更高版本中，这应该是开箱即用的，但使用 Amfphp_Core_Amf_Types_ByteArray 而不是 ByteArray。

# ms-access - 使用 VBA 在 Access 中创建记录集

> ID：12756628
> 
> 赞同：2
> 
> 时间：2012-10-06T04:02:50.213
> 
> 标签：ms-access, vba

从标题，我知道这似乎已经回答了太多次，但我有一系列难以理解的问题。这也是我第一次通过帖子寻求帮助，所以我可能会忘记提及一些东西。

```
Function update_location_id()

    Dim rs As DAO.Recordset
    Dim db As Database
    Dim strSQL As String

    Set db = CurrentDb
    strSQL = "select id from location"

    Set rs = db.OpenRecordset(strSQL)

    MsgBox (rs.RecordCount)

End Function 
```

我从这个函数中删除了几乎所有的代码，只是为了弄清楚为什么我无法获得记录。此代码生成“参数太少。预期在 ' `set rs =`...' 行。

但是，如果我将选择查询的 id 更改为 *，它工作正常。但是它返回 1。这有点令人困惑，因为现在位置表中总共有 3 条记录。

以防万一它需要位置表看起来像

```
id    description
1     "Location 1"
2     "Location 2"
3     "Location 3" 
```

这让我大发雷霆，如果我不能执行诸如...从中获取信息这样的基本数据库操作，我将无法继续我的项目。

参考：Visual Basic for Applications、Microsoft Access 14.0 对象库、OLE 自动化、Microsoft Office 14.0 Access 数据库引擎对象、Microsoft Internet 控件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T11:36:36.020

通常，当您使用表中不存在的列名时会出现错误“参数太少”，因此将其解释为参数。
所以，尽管你给定了表数据，我还是会再次检查表名（位置）和列名（id）。
至于“1”，是的，您必须
`rs.MoveLast`
`rs.MoveFirst`
在打开记录集后插入才能获得正确的RecordCount。在移动到最后一个之前，记录集不知道它产生了多少记录（这个问题还有更多细节，我现在不记得了，关于记录集类型左右）。

# c# - 在使用 Telerik 程序集的 C# winforms 中，参考了如何将 radGridView 导出为 pdf（我不使用 MCV 或 WPF，在普通 winforms 中实现）

> ID：12756629
> 
> 赞同：0
> 
> 时间：2012-10-06T04:03:30.533
> 
> 标签：c#, winforms, telerik, radgridview, export-to-pdf

```
 using Telerik.WinControls.Data;
    using Telerik.WinControls.UI.Export;

  namespace Directory
  {
  public partial class radForm : Form
  {
    public radForm()
    {
        InitializeComponent();
    }

    private void radForm_Load(object sender, EventArgs e)
    { 
```

// TODO: 这行代码将数据加载到“directoryDataSet.DirDetails”表中。您可以根据需要移动或移除它。

```
 this.dirDetailsTableAdapter.Fill(this.directoryDataSet.DirDetails);

    } 
```

// 按钮点击

```
 private void button1_Click(object sender, EventArgs e)
    {
        ExportToPDF exporter = new ExportToPDF(this.radGridView1); 
```

//FileExtension 属性允许您更改导出文件的默认 (*.pdf) 文件扩展名

```
 exporter.FileExtension = "pdf"; 

        exporter.HiddenColumnOption = Telerik.WinControls.UI.Export.HiddenOption.DoNotExport; 
```

// 这使网格适合 PDF 页面宽度

```
 exporter.FitToPageWidth = true; 
```

// 将数据导出为 PDF 是通过 ExportToPDF 对象的 RunExport 方法完成的

```
 string fileName = "c:\\Directory-information.pdf";
        exporter.RunExport(fileName);

     }

  }
} 
```

有些我在这里遗漏了一些东西，我的 gridview 没有导出为 pdf，也没有创建文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T18:46:20.413

```
private void button1_Click(object sender, EventArgs e)
    {

        ExportToPDF exporter = new ExportToPDF(this.radGridView1);
        exporter.FileExtension = "pdf";
        exporter.HiddenColumnOption = Telerik.WinControls.UI.Export.HiddenOption.DoNotExport;
        exporter.ExportVisualSettings = true;
        exporter.PageTitle = "Directory Details";
        exporter.FitToPageWidth = true;

        string fileName = "c:\\Directory-information.pdf";
        exporter.RunExport(fileName);

        MessageBox.Show("Pdf file created , you can find the file c:\\Directory-informations.pdf");                     
    } 
```

# jsf - 实现返回上一页的commandButton

> ID：12756630
> 
> 赞同：1
> 
> 时间：2012-10-06T04:04:23.487
> 
> 标签：jsf, jsf-2

我想要做的是实现一个 JSF 页面，一旦完成，它将返回到前一页面。这是@RequestScoped bean。

**名为viewDocument.xhtml**的原始页面具有以下内容：

```
<f:metadata>
    <f:viewParam name="ID" value="#{viewDocument.id}" />
</f:metadata>

 (bunch of stuff)

<h:link outcome="editThingy" value="Edit Thingy">
    <f:param name="ID" value="#{viewDocument.doc.id}" />
    <f:param name="Return" value="viewDocument" />
</h:link> 
```

目标页面**editThingy.xhtml**有自己的支持 bean，如下所示：

```
<f:metadata>
    <f:viewParam name="ID" value="#{editThingy.id}" />
    <f:viewParam name="Return" value="#{editThingy.navReturn}" />
</f:metadata>

<h:form>

   (bunch of stuff)

   <p:commandButton value="Save" action="#{editThingy.save}" >
      <f:param name="ID" value="#{editThingy.id}" />
   </p:commandButton>
   <p:commandButton value="Cancel" action="#{editThingy.navReturn}" >
       <f:param name="ID" value="#{editThingy.id}" />
   </p:commandButton>

</h:form> 
```

这个想法是两个按钮（取消或保存）都将返回到**Return请求参数指示的页面，新页面获取 ID 请求参数，因此它会提取****EditThingy**处理的相同记录。

BZZZT！**p:commandButton**执行 POST而不是 GET，因此它不能使用**f:param**。但是，如果我尝试使用**p:button**则没有属性可以调用支持 bean！

有什么方法可以实现我想要的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T13:44:54.327

应该工作得`<f:param>`很好。您只需要`Return`为后续请求保留参数，就像您为`ID`参数所做的那样，否则在处理表单提交期间它会丢失，因为您的 bean 是请求范围而不是视图范围。

就这样，

```
<p:commandButton value="Save" action="#{editThingy.save}" >
    <f:param name="ID" value="#{editThingy.id}" />
    <f:param name="Return" value="#{editThingy.navReturn} " />
</p:commandButton>
<p:commandButton value="Cancel" action="#{editThingy.cancel}" >
    <f:param name="ID" value="#{editThingy.id}" />
    <f:param name="Return" value="#{editThingy.navReturn} " />
</p:commandButton> 
```

和

```
public String save() { 
    // ...
    return navReturn;
}

public String cancel() { 
    return navReturn;
} 
```

* * *

**更新**：根据评论，功能需求现在变得更加清晰。取消按钮也可以按如下方式完成，假设您在取消时根本不需要调用支持 bean 操作方法：

```
<p:button value="Cancel" outcome="#{editThingy.navReturn}" >
    <f:param name="ID" value="#{editThingy.id}" />
</p:button> 
```

保存按钮可以返回以下内容：

```
return navReturn + "?id=" + id + "&faces-redirect=true"; 
```

# javascript - 为什么最后一行代码是必要的？

> ID：12756637
> 
> 赞同：1
> 
> 时间：2012-10-06T04:05:41.610
> 
> 标签：javascript

我从正在阅读的书中的示例中理解了以下所有代码。除了注释行。我在想，没有它，循环永远不会结束？虽然我不明白它背后的逻辑。

```
var drink = "Energy drink";
var lyrics = "";
var cans = "99";

while (cans > 0) {
    lyrics = lyrics + cans + " cans of " + drink + " on the wall <br>";
    lyrics = lyrics + cans + " cans of " + drink + " on the wall <br>";
    lyrics = lyrics + "Take one down, pass it around, <br>";

    if (cans > 1) {
        lyrics = lyrics + (cans-1) + " cans of" + drink + " on the wall  <br>";
    }
    else {
        lyrics = lyrics + "No more cans of" + drink + " on the wall<br>";
    }
    cans = cans - 1;  // <-- This line I don't understand
}

document.write(lyrics); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T04:07:11.423

这是一个从 99 ( `var cans = "99"`) 开始的循环，然后倒数到 0。突出显示的行是表示“减一”的行。如果不是那条线，它会一直循环并`99 cans of Energy drink on the wall`永远添加。

顺便说一句，`document.write`这很*糟糕*，`var cans = "99"`应该是`var cans = 99`。当然，这可能不是你的代码，只是说。我的建议：继续阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T04:09:12.067

就像 D Strout 所说，这是一个循环。基本上你的代码是说“当变量*cans*大于 0 时执行这个动作”。如果罐头的价值永远不会改变，那么它就会失败或无限期地重复。所以基本上你从 99 罐开始。对于每个罐子，它将罐子的数量减去 1，直到它为 0，此时循环终止。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T04:55:16.703

D. 斯特劳特是对的……

`for`但仅供参考 - 因为您正在学习 - 您也可以使用 ' ' 循环而不是' ' 循环来做完全相同的事情`while`。

像这样：

```
// store the div in a variable to use later - at the bottom 
var beer_holder = document.getElementById("beer_holder");

// Non-alcoholic to keep it PG
var drink = "O'Doul's";

var lyrics = "";

var cans = "99";

// Create a variable called 'i' and set it to the cans variable amount. 
// Check if i is greater than 0,
// if it is, than do what is between the curly brackets, then subtract 1 from cans
for(var i=cans; i > 0; i--){

    lyrics = i + " cans of " + drink + " on the wall, " + i + " cans of " + drink +
        " take one down, pour it down the sink, " + (i - 1) + " cans of O'Doul's on the wall."

    // take the paragraph tag and put the lyrics within it
    //  the <br/> tags make sure each lyric goes on a seperate line
    beer_holder.innerHTML += lyrics + "<br/><br/>";

} 
```

如果您想使用它，这是一个工作示例的链接：http: [//jsfiddle.net/phillipkregg/CHyh2/](http://jsfiddle.net/phillipkregg/CHyh2/)

​</p>

# javascript - ExtJS 3.4 GridPanel 不显示在 FormPanel 中

> ID：12756645
> 
> 赞同：0
> 
> 时间：2012-10-06T04:07:35.027
> 
> 标签：javascript, extjs, formpanel

我正在尝试修改示例代码以构建类似的表单，例如 [http://dev.sencha.com/deploy/ext-4.1.0-gpl/examples/form/form-grid.html](http://dev.sencha.com/deploy/ext-4.1.0-gpl/examples/form/form-grid.html)

我的代码如下：

```
 var references = new Ext.form.FormPanel({
    frame: true,
    title: 'References',
    bodyPadding: 5,
    layout: 'column',
    fieldDefaults: {
        labelAlign: 'left',
        msgTarget: 'side'
    },
    items: [{
        columnWidth: 0.60,
        xtype: 'gridpanel',
        store: reference_store,
        height: 400,
        title:'General',
        columns: [
          { id: 'name', header : 'Reference', flex: 1, sortable : true, dataIndex: 'reference' },
          { header: 'Impact', width : 75, sortable : true, dataIndex: 'impact'},
       ]
    }, {
        columnWidth: 0.4,
        margin: '0 0 0 10',
        xtype: 'fieldset',
        title:'Details',
        defaults: {
            width: 240,
            labelWidth: 90
        },
        defaultType: 'textfield',
        items: [{fieldLabel: 'Name', name: 'reference'}]
    }]
}); 
```

但整个 FormPanel 未能显示。当我用 'fieldset' 或其他类型替换 'gridpanel' 时，FormPanel 确实会出现，无论格式如何。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T04:21:20.800

xtype 应该是“grid”而不是“gridpanel”</p>

# asp.net - ASP.NET 网站失败 - DataAccessLayer 引发异常

> ID：12756646
> 
> 赞同：0
> 
> 时间：2012-10-06T04:07:37.103
> 
> 标签：asp.net, connection-string

我有一个托管在 GoDaddy 上的 ASP.NET 4.0 网站，它有一个数据库。我的网站不会出现。我认为这是我的数据库连接 -

我的连接字符串 -

```
 <connectionStrings>
    <add name="Personal" connectionString=" Server=xyz.com; Database=xyzDb; User ID=xyzUser; Password=xyzPass; Trusted_Connection=false" providerName="System.Data.SqlClient" />
    <remove name="LocalSqlServer"/>
    <add name="LocalSqlServer" connectionString=" Server=abc.com; Database=abcDb; User ID=abcUser; Password=abcPass; Trusted_Connection=false" providerName="System.Data.SqlClient" />
  </connectionStrings> 
```

我页面上的错误 -

> 异常详细信息：System.NullReferenceException：对象引用未设置为对象的实例。
> 
> 源错误：
> 
> 在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。
> 
> 堆栈跟踪：
> 
> [NullReferenceException：对象引用未设置为对象的实例。] FonyFacts02.DataAccessLayer..ctor() +74
> FonyFacts02.DataAccessLayer..cctor() +39
> 
> [TypeInitializationException：'FonyFacts02.DataAccessLayer' 的类型初始化程序引发异常。]
> FonyFacts02.DataAccessLayer.GetInstance() +0
> FonyFacts02.FonyFacts..ctor() +34
> FonyFacts02.Default.Page_Load(Object sender, EventArgs e) +99
> System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) +14
> System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e) +35 System.Web.UI.Control。 OnLoad(EventArgs e) +91
> System.Web.UI.Control.LoadRecursive() +74
> System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +2207

谁能告诉我它实际上是我的连接字符串还是其他东西？该网站位于 - [http://www.fonyfacts.com/](http://www.fonyfacts.com/) 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T05:06:54.937

您不应覆盖 LocalSqlServer 连接字符串名称。它在 machine.config 文件中定义，并且由于某种原因具有特殊含义，使其成为您不能使用的仅有的两个名称之一（LocalMySqlServer 是另一个名称，也在 machine.config 中定义）。为您的连接字符串选择任何其他名称。

此外，您在连接字符串中缺少数据源属性，但我确信这是您的屏蔽步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T14:39:27.330

我认为您在连接字符串中传递了一些错误的值...

服务器应该像

服务器=xpode.db.4563273.hostedresource.com

我的网站也在那里......并且使用相同的连接。请验证您的数据库凭据

谢谢，
Rohit
xpode.com

# ios - 框架 iOS ARC

> ID：12756649
> 
> 赞同：0
> 
> 时间：2012-10-06T04:08:03.937
> 
> 标签：ios, frameworks, automatic-ref-counting

我正在创建一个静态框架，并将在多个应用程序中使用它。在框架代码中，我禁用了 ARC 标志并设置为 NO。

我将使用该框架的其他项目可能会将 ARC 设置为 YES 或 NO。因此，如果 Framework 中的 ARC 标志与使用该框架的项目不匹配，应用程序会崩溃，因为它试图释放已经释放的东西。

有没有解决上述问题的方法？

问候，

尼拉夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T04:46:13.850

ARC 是编译时设置，因此它是针对每个文件而不是针对每个应用程序的。您所要做的就是确保每个文件中的代码都与编译器一致，以确定它是否使用 ARC。如果您想在文件不使用 ARC 时抛出错误，请使用以下内容：

```
#if !__has_feature(objc_arc)
    #error This file should be compiled with ARC enabled
#endif 
```

同样用于检测相反的情况。

# java - 根据正则表达式拆分字符串

> ID：12756651
> 
> 赞同：11
> 
> 时间：2012-10-06T04:08:07.850
> 
> 标签：java, regex

我有一个字符串需要根据“，”（逗号）的出现来拆分，但需要忽略在一对括号内出现的任何它。例如，`B2B,(A2C,AMM),(BNC,1NF),(106,A01),AAA,AX3` 应该拆分为

```
B2B,
(A2C,AMM),
(BNC,1NF),
(106,A01),
AAA,
AX3 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-06T04:26:22.473

**对于非嵌套**

```
,(?![^\(]*\)) 
```

**FOR NESTED**（括号内的括号）

```
(?<!\([^\)]*),(?![^\(]*\)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T04:15:43.713

试试下面：

```
var str = 'B2B,(A2C,AMM),(BNC,1NF),(106,A01),AAA,AX3';
console.log(str.match(/\([^)]*\)|[A-Z\d]+/g));
// gives you ["B2B", "(A2C,AMM)", "(BNC,1NF)", "(106,A01)", "AAA", "AX3"] 
```

*Java版：*

```
String str = "B2B,(A2C,AMM),(BNC,1NF),(106,A01),AAA,AX3";
Pattern p = Pattern.compile("\\([^)]*\\)|[A-Z\\d]+");
Matcher m = p.matcher(str);
List<String> matches = new ArrayList<String>();
while(m.find()){
    matches.add(m.group());
}

for (String val : matches) {
    System.out.println(val);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-06T05:14:12.717

**与任何正则表达式相比，一个简单的迭代**可能是更好的选择，特别是如果您的数据可以在括号内包含括号。例如：

```
String data="Some,(data,(that),needs),to (be, splited) by, comma";
StringBuilder buffer=new StringBuilder();
int parenthesesCounter=0;
for (char c:data.toCharArray()){
    if (c=='(') parenthesesCounter++;
    if (c==')') parenthesesCounter--;
    if (c==',' && parenthesesCounter==0){
        //lets do something with this token inside buffer
        System.out.println(buffer);
        //now we need to clear buffer  
        buffer.delete(0, buffer.length());
    }
    else 
        buffer.append(c);
}
//lets not forget about part after last comma
System.out.println(buffer); 
```

输出

```
Some
(data,(that),needs)
to (be, splited) by
 comma 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T05:44:43.503

试试这个

```
\w{3}(?=,)|(?<=,)\(\w{3},\w{3}\)(?=,)|(?<=,)\w{3} 
```

说明：由OR分隔的三个部分`(|)`

*   `\w{3}(?=,)`- 匹配 3 个任意字母数字字符（包括下划线），并积极向前看逗号

*   `(?<=,)\(\w{3},\w{3}\)(?=,)`- 匹配这个模式`(ABC,E4R)`，也做一个积极的前瞻，并在后面寻找逗号

*   `(?<=,)\w{3}` - matches the 3 any alphanumeric character (including underscore) and does the positive look behind for comma

# javascript - jQuery $this 点击元素

> ID：12756653
> 
> 赞同：0
> 
> 时间：2012-10-06T04:09:09.670
> 
> 标签：javascript, jquery

我有以下脚本，可在单击时（从模式窗口）将图像 URL 发送到输入字段。我也将相同的 url 发送`imgurl`到 a`<div class="preview-image>`以在插入时显示它。

```
var BusiPress_Configuration = {
    init : function() {
        this.files();
    },

    files : function() {
        if ( $( '.busipress_upload_image_button' ).length > 0 ) {
            window.formfield = '';

            $('.busipress_upload_image_button').on('click', function(e) {
                e.preventDefault();
                window.formfield = $(this).parent().prev();
                window.tbframe_interval = setInterval(function() {
                    jQuery('#TB_iframeContent').contents().find('.savesend .button').val(busipress_vars.use_this_file).end().find('#insert-gallery, .wp-post-thumbnail').hide();
                }, 2000);
            if (busipress_vars.post_id != null ) {
                var post_id = 'post_id=' + busipress_vars.post_id + '&';
            }
                tb_show(busipress_vars.add_new_file, 'media-upload.php?' + post_id +'TB_iframe=true');
            });

            window.original_send_to_editor = window.send_to_editor;
            window.send_to_editor = function (html) {
                if (window.formfield) {
                    imgurl = $('a', '<div>' + html + '</div>').attr('href');
                    window.formfield.val(imgurl);
                    window.clearInterval(window.tbframe_interval);
                    tb_remove();
                    $('.preview-image img').attr('src',imgurl);
                } else {
                    window.original_send_to_editor(html);
                }
                window.formfield = '';
                window.imagefield = false;
            }
        }
    }
}

BusiPress_Configuration.init(); 
```

将图像 URL 发送到编辑器和 div 工作正常，但它正在为页面上该 div 的每个实例执行此操作。我一直在玩`$(this)`，`closest()`看看是否可以将插入本地化到输入附近的特定 div，但没有任何运气。任何帮助将不胜感激。谢谢！

# 默认标记

```
 <table class="form-table">
    <tbody>
      <tr valign="top">
        <th scope="row">Default Map Icon</th>

        <td>
          <input type="text" class="-text busipress_upload_field" id=
          "busipress_settings_map[default_map_icon]" name=
          "busipress_settings_map[default_map_icon]" value=
          "http://localhost/jhtwp/wp-content/plugins/busipress/img/red-dot.png" /><span>&nbsp;<input type="button"
          class="busipress_upload_image_button button-secondary" value=
          "Upload File" /></span> <label for=
          "busipress_settings_map[default_map_icon]">Choose the default map icon (if
          individual business type icon is not set</label>

          <div class="preview-image" style="padding-top:10px;"><img src=
          "http://localhost/jhtwp/wp-content/plugins/busipress/img/red-dot.png" /></div>
        </td>
      </tr>

      <tr valign="top">
        <th scope="row">Active Map Icon</th>

        <td>
          <input type="text" class="-text busipress_upload_field" id=
          "busipress_settings_map[active_map_icon]" name=
          "busipress_settings_map[active_map_icon]" value=
          "http://localhost/jhtwp/wp-content/plugins/busipress/img/blue-dot.png" /><span>&nbsp;<input type="button"
          class="busipress_upload_image_button button-secondary" value=
          "Upload File" /></span> <label for=
          "busipress_settings_map[active_map_icon]">Choose the active map icon (if
          individual business type icon is not set</label>

          <div class="preview-image" style="padding-top:10px;"><img src=
          "http://localhost/jhtwp/wp-content/plugins/busipress/img/blue-dot.png" /></div>
        </td>
      </tr>
    </tbody>
  </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T04:25:43.803

假设您已经可以选择按钮（同时我将其更改为“按钮选择器”），请使用`parent`获取父级`td`然后找到`div`要更改的子级。这将获得离`div`您的按钮最近的位置。

```
$("button-selector").parent('td').find("div") 
```

# c++ - 为什么我的程序尝试使用 libluajit-5.1.so.2 而不是 libluajit.so？

> ID：12756664
> 
> 赞同：2
> 
> 时间：2012-10-06T04:11:58.193
> 
> 标签：c++, linux, shared-libraries

我正在编写一个使用 LuaJIT 的项目。我正在尝试在有一段时间没有运行它的计算机上运行我的项目。它曾经运行得很好，但现在当我尝试运行它时它会抱怨。

我的源代码树中有 LuaJIT，它构建得很好。我正在使用 CMake 生成我的 make 文件，据我所知，CMake 找到了文件 libluajit.so，但是当我运行我的程序时，出现以下错误：

```
../build/game/game: error while loading shared libraries: libluajit-5.1.so.2: cannot open shared object file: No such file or directory 
```

我不知道它为什么要寻找那个版本的库而不是 libluajit.so。这是值得的 Ubuntu linux。如有必要，我可以添加更多详细信息，如有必要，我可以添加更多详细信息，我不确定哪些信息有助于弄清楚发生了什么。

编辑：

要构建和链接程序，我在文件中有这些行`CMakeLists.txt`（这有点缩写，只显示相关位）

```
find_package(LuaJIT REQUIRED)
set(Extern_LIBS luajit) 
add_executable(proj ${proj_Sources})
target_link_libraries(proj ${Extern_LIBS}) 
```

在我的源目录上运行 cmake 后，我运行`make`. 然后运行它我只是运行`./proj`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T04:34:32.330

当您构建它时，“.so”实际上是库的符号链接。使用经过验证的文件名和[SONAME](http://en.wikipedia.org/wiki/Soname)，以便库的多个版本可以共存，从而防止在...其他操作系统上常见的问题，即旧软件与新库不兼容，而新软件与旧库不兼容。

# css - 图像大小调整如何与 css 一起使用？

> ID：12756667
> 
> 赞同：0
> 
> 时间：2012-10-06T04:12:28.497
> 
> 标签：css, fluid-layout

我已经使用 css 几年了，但从来没有尝试过使用固定宽度的布局。我正在考虑为我的下一个站点使用流畅的布局，或者尽可能多的百分比，但我有一个让我担心的问题。

如果我将一个宽度为 1900 像素的图像设置为背景，我知道当浏览器要求说 1600 像素时它只会缩小。

当分辨率要求 2000px 宽度时会发生什么？我会留下空白，对吗？如何避免这种情况？我觉得我可能应该扔掉它不是可以水平重复的图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T04:17:26.027

通常使用的一个技巧是让图像用一种颜色“内发光”，然后也将背景颜色设置为相同。

假设您的图像没有平铺，并且具有黑色“内发光”或“羽毛”效果，那么您可以将容器的背景颜色设置为：

```
background-color: #000;
background-image: url(your_bgimage.jpg); /* image with black borders due to effect */
background-repeat: no-repeat;
background-position: center center; 
```

# ruby-on-rails - 将 .csv 文件保存到数据库不识别 to_hash 方法

> ID：12756670
> 
> 赞同：1
> 
> 时间：2012-10-06T04:13:06.570
> 
> 标签：ruby-on-rails, ruby, csv, ruby-on-rails-2

根据此[示例](https://stackoverflow.com/questions/4410794/ruby-on-rails-import-data-from-a-csv-file)，以下方法：

```
require "csv"

def import_vault_data(filename)    
    fn = "#{RAILS_ROOT}/public/data/#{filename}"
    CSV.foreach(fn, :headers => true) do |row|
        House.create!(row.to_hash)    
    end
end 
```

正在产生此错误：

```
undefined method `to_hash' for #<Array:0x104cc07b8> 
```

关于缺少什么的任何线索？

我正在使用导轨 2.3.9

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-15T13:46:29.597

答案可能有点晚，但您需要：

```
CSV.foreach(file.path, headers: true) do |row| 
```

因为你不能调用 to_hash 除非你在散列中有标题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T04:56:46.013

试试这个 ruby​​ 1.8.7

```
House.create!(row.hash) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-06T05:04:27.190

你也可以

```
House.create!(Hash[row]) 
```

# c++ - 非虚拟成员的虚拟成本和继承？

> ID：12756672
> 
> 赞同：2
> 
> 时间：2012-10-06T04:13:58.733
> 
> 标签：c++, optimization, inheritance, virtual

虚拟可能有双重开销：

*   内存（因为 vptr 和 vtable）
*   运行速度

由于内存开销，当我需要非常高的内存优化时，我使用一些 CRTP 技术来获得一种静态虚拟性。

但我想知道非虚拟成员运行时速度的虚拟成本：

```
#include <iostream>

class Base
{
    public:
        Base() {;}
        virtual ~Base() {;}

    public:
        virtual void f1() {std::cout<<"f1 : Base"<<std::endl; /* FUNCTION BODY */}
        void f2() {std::cout<<"f2 : Base"<<std::endl; /* FUNCTION BODY */}
        void f3() {f1();}
};

class Derived : public Base
{
    public:
        Derived() {;}
        virtual ~Derived() {;}

    public:
        virtual void f1() {std::cout<<"f1 : Derived"<<std::endl; /* FUNCTION BODY */}
}; 
```

主要的：

```
int main()
{
    Base b;
    Derived d;
    Base* ptr = new Derived();

    std::cout<<std::endl;
    b.f1(); // 1a
    b.f2(); // 1b
    b.f3(); // 1c
    std::cout<<std::endl;
    d.f1(); // 2a
    d.f2(); // 2b
    d.f3(); // 2c
    std::cout<<std::endl;
    ptr->f1(); // 3a
    ptr->f2(); // 3b
    ptr->f3(); // 3c
    std::cout<<std::endl;

    return 0;
} 
```

对于每种情况：1a，1b ... 3c，与 Base 和 Derived 是两个完全独立的类没有继承的情况相比，由于继承+虚拟性，我在哪里有运行时开销（执行时间增加）？

特别是， f2 函数是否有任何运行时开销？

注意：`std::cout`只是一个例子。`/* FUNCTION BODY */`可以是 1k 行代码...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T05:11:19.143

为什么不只是计时呢？这是一个完全微不足道的练习..

一、一些结果

```
100 million instances of b.f1() = 0.774852 secs.
100 million instances of b.f2() = 0.78162 secs.
100 million instances of b.f3() = 1.85278 secs.

100 million instances of d.f1() = 0.773115 secs.
100 million instances of d.f2() = 0.886528 secs.
100 million instances of d.f3() = 1.88562 secs.

100 million instances of ptr->f1() = 1.02043 secs.
100 million instances of ptr->f2() = 0.778072 secs.
100 million instances of ptr->f3() = 1.72503 secs. 
```

假设 win32, (QueryPerformanceXXXXX & LARGE_INTEGER) 您可以使用以下内容：

```
#include <windows.h>
#include <iostream>
using namespace std;

class Base
{
    public:
        Base() {;}
        virtual ~Base() {;}

    public:
        virtual void f1() {};//std::cout<<"f1 : Base"<<std::endl; /* FUNCTION BODY */}
        void f2() {}; //std::cout<<"f2 : Base"<<std::endl; /* FUNCTION BODY */}
        void f3() {f1();}
};

class Derived : public Base
{
    public:
        Derived() {;}
        virtual ~Derived() {;}

    public:
        virtual void f1() {};//std::cout<<"f1 : Derived"<<std::endl; /* FUNCTION BODY */}
};

LARGE_INTEGER clockFreq;

LARGE_INTEGER getTicks()
{
    LARGE_INTEGER result;
    QueryPerformanceCounter(&result);
    return result;
}

double elapsedSecs(LARGE_INTEGER tStart, LARGE_INTEGER tEnd)
{
    long ticksElapsed = tEnd.QuadPart - tStart.QuadPart;
    double timePeriod = (double)ticksElapsed / (double)clockFreq.QuadPart;
    return timePeriod;
}

int main()
{
    LARGE_INTEGER tStart, tEnd;
    Base b;
    Derived d;
    long i, max=100000000;

    Base* ptr = new Derived();

    // find how fast the clock ticks
    QueryPerformanceFrequency(&clockFreq);

/*====================================================================================================
    Test for access using b
    b.f1()
    b.f2()
    b.f3()
====================================================================================================*/
    std::cout<<std::endl;
    tStart = getTicks();
    for (i=0; i<max; i++)
    {
        b.f1(); // 1a
    }
    tEnd = getTicks();
    double elapsed = elapsedSecs(tStart, tEnd);
    cout << "100 million instances of b.f1() = " << elapsed << " secs." << endl;

    std::cout<<std::endl;
    tStart = getTicks();
    for (i=0; i<max; i++)
    {
        b.f2(); // 1a
    }
    tEnd = getTicks();
    elapsed = elapsedSecs(tStart, tEnd);
    cout << "100 million instances of b.f2() = " << elapsed << " secs." << endl;

    std::cout<<std::endl;
    tStart = getTicks();
    for (i=0; i<max; i++)
    {
        b.f3(); // 1a
    }
    tEnd = getTicks();
    elapsed = elapsedSecs(tStart, tEnd);
    cout << "100 million instances of b.f3() = " << elapsed << " secs." << endl;

/*====================================================================================================
    Test for access using d
    d.f1()
    d.f2()
    d.f3()
====================================================================================================*/
    std::cout<<std::endl;
    tStart = getTicks();
    for (i=0; i<max; i++)
    {
        d.f1(); // 1a
    }
    tEnd = getTicks();
    elapsed = elapsedSecs(tStart, tEnd);
    cout << "100 million instances of d.f1() = " << elapsed << " secs." << endl;

    std::cout<<std::endl;
    tStart = getTicks();
    for (i=0; i<max; i++)
    {
        d.f2(); // 1a
    }
    tEnd = getTicks();
    elapsed = elapsedSecs(tStart, tEnd);
    cout << "100 million instances of d.f2() = " << elapsed << " secs." << endl;

    std::cout<<std::endl;
    tStart = getTicks();
    for (i=0; i<max; i++)
    {
        d.f3(); // 1a
    }
    tEnd = getTicks();
    elapsed = elapsedSecs(tStart, tEnd);
    cout << "100 million instances of d.f3() = " << elapsed << " secs." << endl;

/*====================================================================================================
    Test for access using ptr
    ptr->f1()
    ptr->f2()
    ptr->f3()
====================================================================================================*/
    std::cout<<std::endl;
    tStart = getTicks();
    for (i=0; i<max; i++)
    {
        ptr->f1(); // 1a
    }
    tEnd = getTicks();
    elapsed = elapsedSecs(tStart, tEnd);
    cout << "100 million instances of ptr->f1() = " << elapsed << " secs." << endl;

    std::cout<<std::endl;
    tStart = getTicks();
    for (i=0; i<max; i++)
    {
        ptr->f2(); // 1a
    }
    tEnd = getTicks();
    elapsed = elapsedSecs(tStart, tEnd);
    cout << "100 million instances of ptr->f2() = " << elapsed << " secs." << endl;

    std::cout<<std::endl;
    tStart = getTicks();
    for (i=0; i<max; i++)
    {
        ptr->f3(); // 1a
    }
    tEnd = getTicks();
    elapsed = elapsedSecs(tStart, tEnd);
    cout << "100 million instances of ptr->f3() = " << elapsed << " secs." << endl;

    return 0;
} 
```

# asp.net-mvc - 用于连接三个表的 Linq 查询

> ID：12756675
> 
> 赞同：0
> 
> 时间：2012-10-06T04:14:40.337
> 
> 标签：asp.net-mvc, linq, visual-studio

我有三个表table1（主表），table2，table3。

*   table1 包含 table1Id
*   table2 和 table3 包含 table2Id、table2RoleId、table3Id、table3RoleId。

table1Id 的值也一样，table2Id 和 table3Id 中的记录不止一条，但是 table2RoleId 和 table3RoleId 不同。

我想将 table1 与 table2 和 table3 连接起来以显示 Table2RoleId 和 Table3RoleId 必须根据 Table1Id 显示

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T04:22:24.240

我忽略了您问题的内容，并会向您展示 linq 中的左连接示例

```
var result = from x in table1 join y in table2 
             on x.tableId1 equals y.tableId1 
             join z in table3 on x.tableId1 equals z.tableId1 
             Select new {// your return fields} 
```

# android-intent - Android-webservice 集成

> ID：12756679
> 
> 赞同：1
> 
> 时间：2012-10-06T04:15:38.750
> 
> 标签：android-intent

我已经开发了一个 android 应用程序，但现在我想将我的应用程序与 sql server 连接，如何与 sql server 连接是否有任何直接方式，否则只能通过 web 服务，如果方式只是 web 服务，那么如何做到这一点请帮助我一些如何与 Web 服务连接的过程步骤。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T04:31:37.320

也许你可以从中得到[帮助](https://stackoverflow.com/questions/11953342/how-to-list-posts-from-database-in-android-using-listactivity/11954854#11954854)。您可以在任何您喜欢的技术（例如 PHP、Java、.Net 等）中实现基于 JSON 的方法。然后您只需要对服务器进行简单调用，并使用Android 库本身`GET/POST`的包中的类在 Android 中解析返回的 JSON 。`org.json.*`因此，没有其他依赖项。我更喜欢这种 JSON 方法，因为它没有依赖关系，并且比使用基于 SOAP 的 Web 服务更简单的实现。

# c# - 使用 OleDb 调用存储过程和游标参数

> ID：12756683
> 
> 赞同：0
> 
> 时间：2012-10-06T04:16:29.017
> 
> 标签：c#, oracle, oledb, oledbdatareader

我正在用 C# 开发一个连接到 Oracle 10g 数据库的应用程序。

我正在像这样使用 Oledb：

```
OleDbConnection conn = ConnectionUtil.CreateConexion();

OleDbCommand cmd = new OleDbCommand();
cmd.Connection = conn;
cmd.CommandText = SP_AUTENTICAR_USUARIO;
cmd.CommandType = CommandType.StoredProcedure;
cmd.Parameters.Add("p_SED_USUARIO", OleDbType.VarChar).Value = strUsuario;
cmd.Parameters.Add("p_SED_PASS", OleDbType.VarChar).Value = strPass;
cmd.Parameters.Add("p_cursor", OleDbType.Cursor).Direction = ParameterDirection.Output;//I dont know what to put here

conn.Open();
cmd.ExecuteNonQuery();

OleDbDataReader objReader = (OleDbDataReader)cmd.Parameters["p_cursor"].Value;

if (objReader.Read())
{... 
```

我需要调用存储过程并使用`OleDbDataReader`.

知道怎么做吗？

谢谢，

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-06T04:24:00.450

请检查此示例代码。这是使用 OracleDataReader

```
oraConn.Open();

OracleCommand cursCmd = new OracleCommand("CURSPKG.OPEN_TWO_CURSORS", oraConn);
cursCmd.CommandType = CommandType.StoredProcedure;
cursCmd.Parameters.Add("EMPCURSOR", OracleType.Cursor).Direction = ParameterDirection.Output;
cursCmd.Parameters.Add("DEPTCURSOR", OracleType.Cursor).Direction = ParameterDirection.Output;

OracleDataReader rdr = cursCmd.ExecuteReader();

Console.WriteLine("\nEmp ID\tName");

while (rdr.Read())
  Console.WriteLine("{0}\t{1}, {2}", rdr.GetOracleNumber(0), rdr.GetString(1), rdr.GetString(2));

rdr.NextResult();

Console.WriteLine("\nDept ID\tName");

while (rdr.Read())
  Console.WriteLine("{0}\t{1}", rdr.GetOracleNumber(0), rdr.GetString(1));

rdr.Close();
oraConn.Close(); 
```

# google-chrome - 是否可以使用 Postman Chrome 扩展发送数组？

> ID：12756688
> 
> 赞同：316
> 
> 时间：2012-10-06T04:18:09.083
> 
> 标签：google-chrome, rest, post

我一直在使用 Postman Chrome 扩展来测试我的 API，并希望通过 post 发送一组 ID。有没有办法在 Postman 中发送一些列表作为参数？

```
{
  user_ids: ["1234", "5678"]
} 
```

* * *

## 回答 #1

> 赞同：557
> 
> 时间：2014-05-19T10:09:11.923

您需要`[]`像这样为变量名称添加后缀：

![send_array_param_with_postman](../Images/190c25aa62c57dc0a1fcd98688bf39e6.png)

如果这不起作用，请尽量不要将索引放在括号中：

```
my_array[]  value1
my_array[]  value2 
```

* * *

**笔记：**

*   如果您使用的是[邮递员打包的应用程序](https://chrome.google.com/webstore/detail/postman-rest-client-packa/fhbjgbiflinjbdggehcddcbncdddomop?hl=en)`raw`，则可以通过选择/ `json`（而不是）来发送数组`form-data`。另外，请确保设置`Content-Type`为选项卡`application/json`。`Headers`这是原始数据的示例`{"user_ids": ["123" "233"]}`，不要忘记引号！

*   如果您使用的是[邮递员 REST 客户端](https://chrome.google.com/webstore/detail/postman-rest-client/fdmmgilgnpjigdojojpjoooidkmcomcm?hl=en)，则必须使用我上面描述的方法，因为将数据作为原始 (json) 传递将不起作用。邮递员 REST 客户端中有一个错误（至少我在使用时得到了这个错误`0.8.4.6`）。

* * *

## 回答 #2

> 赞同：87
> 
> 时间：2014-09-17T21:03:38.873

对我来说，没有使用 array[0], array [1](https://i.stack.imgur.com/oOnKu.jpg) , .. or array[], array[], ... 。它的工作原理更简单： ![在此处输入图像描述](../Images/714ea7789edf11b65705d8ecc1a5a0ad.png)

* * *

## 回答 #3

> 赞同：52
> 
> 时间：2015-04-03T03:09:50.433

这是我的解决方案：

使用表单数据并编辑如下：

```
Key       Value 
box[]      a
box[n1]    b
box[n2][]  c
box[n2][]  d 
```

你会得到一个这样的数组：

```
{"box":{"0":"a","n1":"b","n2":["c","d"]}} 
```

* * *

## 回答 #4

> 赞同：50
> 
> 时间：2018-09-17T11:04:44.057

如果你想要一个字典数组，试试这个： [![在此处输入图像描述](../Images/4db328b88207f0b67d41b045330431cb.png)](https://i.stack.imgur.com/zlrcu.png)

* * *

## 回答 #5

> 赞同：35
> 
> 时间：2014-11-20T15:29:22.563

我也有这个问题，并通过执行以下操作解决了它：

1 - 转到请求标头配置并添加以下内容：

```
Accept : application/json, text/plain, */*
Content-Type : application/json;charset=UTF-8 
```

2 - 要发送 json 数组，我使用原始 json 格式并将 user_ids 设置为数组：

```
user_ids: ["bbbbbbbbbb","aaaaaaaaaa","987654321","123456789"] 
```

* * *

## 回答 #6

> 赞同：30
> 
> 时间：2018-09-05T06:47:43.350

重要的是要知道，VALUE 框只允许包含一个数字值（没有说明符）。

如果你想用 Postman 发送一个“消息”数组，每个都有一个键/值对列表，在 KEY 框中输入 messages[][reason] ，在 VALUE 框中输入 reason 的值：

[![在此处输入图像描述](../Images/c4019be697b8bcd090a314a512b421ab.png)](https://i.stack.imgur.com/ZFyeo.png)

服务器将收到：

```
{"messages"=>[{"reason"=>"scrolled", "tabid"=>"2"}, {"reason"=>"reload", "tabid"=>"1"}], "endpoint"=>{}} 
```

* * *

## 回答 #7

> 赞同：23
> 
> 时间：2017-12-04T22:54:16.973

将 Body 设置为 raw 并按如下方式形成数组：

[![在此处输入图像描述](../Images/9fb0fc8352439757bc36c1a5ccadf7db.png)](https://i.stack.imgur.com/FpTBx.png)

* * *

## 回答 #8

> 赞同：20
> 
> 时间：2016-07-04T15:46:36.950

正如@pinouchon 提到的，您可以在数组索引的帮助下传递它

```
my_array[0] value
my_array[1] value

In addition to this, to pass list of hashes, you can follow something like:

my_array[0][key1] value1

my_array[0][key2] value2 
```

***例子：***

```
To pass param1=[{name:test_name, value:test_value}, {...}]

param1[0][name] test_name

param1[0][value] test_value 
```

* * *

## 回答 #9

> 赞同：16
> 
> 时间：2018-12-10T15:43:51.163

转到 Header 并选择`Content-Type`=`application/json`然后转到 body 并选择`raw`然后传递一个数组。[![在此处输入图像描述](../Images/db927491203fdc2a3430febee364afbf.png)](https://i.stack.imgur.com/tTAT3.png)

* * *

## 回答 #10

> 赞同：15
> 
> 时间：2017-06-30T14:33:31.447

这对我有用。传递 Item 对象数组 {ItemID,ColorID,SizeID,Quntity}

[![邮递员数据](../Images/0c01dd6cb89444fd381ce207a6a34bf5.png)](https://i.stack.imgur.com/ey2Yl.png)

* * *

## 回答 #11

> 赞同：8
> 
> 时间：2017-05-04T14:37:21.623

在标题集中

```
content-type : application/x-www-form-urlencoded 
```

在正文中选择选项

> x-www-form-urlencoded

并将数据插入为 json 数组

```
user_ids : ["1234", "5678"] 
```

* * *

## 回答 #12

> 赞同：7
> 
> 时间：2017-10-25T12:06:35.940

这也适用于对象内的列表：

```
Id:37
IdParent:26
Name:Poplet
Values[0].Id:1349
Values[0].Name:SomeName
Values[1].Id:1350
Values[1].Name:AnotherName 
```

等效的 JSON 将是：

```
{
    "Id": 37,
    "IdParent": 26,
    "Name": "Poplet",
    "Values": [
        {
            "Id": 1349,
            "Name": "SomeName"
        },
        {
            "Id": 1350,
            "Name": "AnotherName"
        }
    ]
} 
```

* * *

## 回答 #13

> 赞同：6
> 
> 时间：2018-07-13T13:12:27.140

```
{
    "data" : [  
        {
            "key1" : "value1",
            "key2" : "value2"   
        },
        {
            "key01" : "value01",
            "key02" : "value02"             
        },
        {
            "key10" : "value10",
            "key20" : "value20"   
        }
    ]
} 
```

你可以这样通过。

* * *

## 回答 #14

> 赞同：5
> 
> 时间：2012-10-06T20:21:42.383

选择 form-data 或 urlencoded 并使用相同的键“user_ids”。服务器应将其作为数组接收。

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2018-01-16T10:25:43.747

在表单数据中，

```
 key              value

 user_ids[]         1234
 user_ids[]         5678 
```

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2021-08-25T02:51:31.910

我的后端是用 Ruby on Rails 编写的。这就是我使用 Postman 发送数组参数的方式。它对我有用。

**更新**

我正在使用*x-www-form-urlencoded*。我相信它也适用于*form-data*。

[![在此处输入图像描述](../Images/b8bf63c2b593168e05530d993f951a49.png)](https://i.stack.imgur.com/bE8N9.png)

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-01-09T09:16:01.233

我在这里和其他帖子中尝试了所有解决方案，但没有任何帮助。

唯一的答案对我有帮助：
在函数签名中的参数声明之前添加 [FromBody] 属性：

```
[Route("MyFunc")]        
public string MyFunc([FromBody] string[] obj) 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2022-01-15T09:01:30.197

假设您有下面的对象数组，

```
features: [
      {
        title: { type: String },
        type: { type: String },
      },
    ], 
```

要在邮递员的表单数据上添加值，请以这种方式添加

```
features[title]
features[type] 
```

还要检查下面的图片

[![在此处输入图像描述](../Images/5803a3b6045b3491c7d337274a05da02.png)](https://i.stack.imgur.com/txUIx.png)

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2022-01-27T14:58:38.230

这是对我有用的东西

```
{
 "user_ids":["[1234, 5678]"]
} 
```

我相信这取决于大多数时候后端是如何设置的。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2022-02-26T13:21:48.333

**注意**如果上述所有解决方案都没有，现在我们已经到了 2022 年，请不要惊慌。使用不带括号的值传递数组名称并多次添加，只需链接下图的显示方式即可。它应该工作得很好。如果它确实有效，请给我买点咖啡，hhh

[![在此处输入图像描述](../Images/1a523801f2d7a7179ab02264bb939086.png)](https://i.stack.imgur.com/xRzMT.png)

# c# - 在 c# 项目中部署 csproj 文件？

> ID：12756690
> 
> 赞同：0
> 
> 时间：2012-10-06T04:18:41.373
> 
> 标签：c#, html, csproj

我在我的项目中添加了 3 个 html 文件，更改反映在我的 csproj 文件中。

但是要将其部署到 Web 服务器上，如果我将这 3 个文件放在适当的目录中就足够了吗？还是因为 csproj 更改而需要任何构建/装配部署？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T04:29:14.220

Html 文件不需要构建，只需复制文件，如果您有 aspx 文件的代码，那么您需要部署 dll。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T04:38:25.297

1.  将文件添加到您的项目中。

2.  将构建操作设置为“内容”。

3.  将“复制到输出目录”设置为“始终复制”。

4.  该文件应包含在与部署的其余部分相同的文件夹中。`\bin\release`您应该能够通过构建它并在`\bin\debug`文件夹中查看它。如果它不存在，请单击“应用程序文件”按钮并查看它是否显示在那里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T05:28:49.183

将 HTML 文件部署到 Web 服务器只需将 HTML 文件复制到适当的目录。

.csproj 中产生的更改实际上只是为了跟踪 IDE 中的文件，但不，您不需要仅为静态文件重建/重新部署生成的 DLL。

# mysql - mysql邻接列表模型中是否有任何父离线？

> ID：12756692
> 
> 赞同：4
> 
> 时间：2012-10-06T04:19:13.683
> 
> 标签：mysql, join, nested

我有一个如下所示的数据库表：

```
id | parent_id | status
1  | null      | 1
2  | null      | 0
3  | null      | 1
4  | 2         | 1
5  | 4         | 1 
```

所以，正如你所看到的，我们有一些类别是彼此的孩子，而且深度是无限的。

我想知道的是，有没有一种简单的方法可以找出特定树中的任何父母是否为`status`0？

我知道如果有一个固定的深度，那么我可以做那么多连接，然后用它`Min(status)`来找出它们中的任何一个是否设置为 0，但我不知道如何在未定义深度的情况下做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T04:25:15.593

使用您正在使用的*邻接列表模型*是不可能的，因为您需要递归地向上遍历图形，这是 MySQL 无法做到的。您应该考虑将数据切换到[嵌套集模型](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)，您可以在其中轻松获取到根的路径。

# node.js - Mongodb - 使用 Node js 驱动程序检查集合中是否存在数据

> ID：12756695
> 
> 赞同：1
> 
> 时间：2012-10-06T04:20:57.133
> 
> 标签：node.js, mongodb

如何检查集合中的数据是否存在。我需要确保用户名是唯一的。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T04:41:06.873

最简单的方法是在需要唯一的数据上放置唯一索引。如果您尝试插入具有相同值的新数据，Mongo 将返回错误。此时，您可以根据需要处理错误。

[您可以在http://www.mongodb.org/display/DOCS/Indexes#Indexes-unique%3Atrue](http://www.mongodb.org/display/DOCS/Indexes#Indexes-unique%3Atrue)阅读有关唯一索引的更多信息。您可以像使用 Node 驱动程序创建任何其他索引一样创建它们。

```
// everyone's username must be unique:
db.createIndex(userCollection, {username:1}, {unique:true}); 
```

# python - 我在哪里以及如何在服务器上安装 django 框架？

> ID：12756703
> 
> 赞同：1
> 
> 时间：2012-10-06T04:23:23.420
> 
> 标签：python, django, frameworks

我是 Django 新手，仍在学习。

目前我的服务器设置了以下文件夹：'www''db''private'

我在哪里以及如何在服务器上安装 django 框架？它可以通过 ftp 和 ssh 访问。

目前。我只知道 php 在 www 文件夹中工作和加载。我必须安装python吗？

提前谢谢大家。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T05:36:41.740

使用[虚拟环境](http://docs.python-guide.org/en/latest/dev/virtualenvs/)（例如`virtualenv`. 安装`virtualenv`并激活后，您可以安装 django，通过`pip install django`它将 Django 安装到您的`virtualenv`. 组织包需求的一种简单方法是将要使用的包放在一个`requirements.txt`文件中，如下所示：

```
Django==1.4.1
Mako==0.7.0
MarkupSafe==0.15 
```

然后，您可以安装所有必需的软件包`pip install -r /path/to/requirements.txt`

* * *

设置 Django 进行部署：

1.  [Django 最干净和最快的服务器设置](https://stackoverflow.com/questions/26025/cleanest-fastest-server-setup-for-django)
2.  官方 django 文档[1](https://docs.djangoproject.com/en/dev/topics/install/)和[2](https://docs.djangoproject.com/en/dev/howto/deployment/)
3.  [使用 virtualenv、fabric、pip 和 rsync 的基本 Django 部署](http://www.caktusgroup.com/blog/2010/04/22/basic-django-deployment-with-virtualenv-fabric-pip-and-rsync/)

# php - zend resources.frontController.baseUrl 不起作用

> ID：12756704
> 
> 赞同：0
> 
> 时间：2012-10-06T04:23:25.057
> 
> 标签：php, .htaccess, zend-framework, zend-controller-router, zend-config

我需要将一个 zend 项目放在我的根服务器的子目录中。我希望我的项目位于：**"http://blog.com/site"**而不是**"http://blog.com"**。尝试这样做，我在文件中添加了：**/application/configs/application.ini**下面的行：

`resources.frontController.baseUrl = "http://blog.com/site"` 但是当我访问“http://blog.com/site”时，它返回此错误：指定的控制器无效（站点）

如果我在引导程序中放入以下行：

```
$fc = Zend_Controller_Front::getInstance();
echo $fc->getBaseUrl(); 
```

它写**“http://blog.com/site”**

如何不将子目录“/site”视为控制器？因为我希望它作为 url 的一部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T06:30:09.980

将 RewriteBase 添加到您的 .htaccess

```
<IfModule mod_rewrite.c>
RewriteBase /site
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L]
</IfModule> 
```

# c++ - 文件输入未按预期工作

> ID：12756711
> 
> 赞同：1
> 
> 时间：2012-10-06T04:25:02.223
> 
> 标签：c++, ifstream

主要：

```
ifstream file("text.txt");
string line;
while (file) {
    file>>line;
    cout<<line<<endl;
} 
```

在 text.txt 中：

```
hello
goodbye 
```

输出：

```
hello
goodbye
goodbye 
```

为什么最后一行打印两次？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T05:49:48.003

重复：当您第一次阅读“再见”时，您不知道您已到达文件末尾并进入下一次迭代。然后读取失败，`eof`设置位，但打印出 的当前值`line`，这仍然是“再见”。

# c++ - 使用 C++ 卸载 Windows 设备

> ID：12756712
> 
> 赞同：1
> 
> 时间：2012-10-06T04:25:07.230
> 
> 标签：c++, windows, winapi, device

我需要以编程方式卸载所有 Com 端口设备。问题是这些 Com 端口设备不存在，因此完全隐藏。这意味着，即使您想使用设备管理器卸载它们，首先您必须添加`devmgr_show_nonpresent_devices = 1`到您的环境变量，然后在设备管理器中显示隐藏的设备。然后，您可以右键单击每个设备并卸载。我不想卸载相关的驱动程序。我在高级系统设置下添加该变量，创建并保存一个新的用户变量。

我尝试用[devcon](http://support.microsoft.com/kb/311272)做到这一点。可以找到它们，`devcon findall`但我无法删除它们，因为删除它们的[命令](http://www.osronline.com/ddkx/ddtools/devcon_59f7.htm)失败，说明没有卸载任何设备。此外，没有标志让它寻找不存在的设备。如果我执行标准`devcon find`，则找不到任何设备（感兴趣的）。

所以，我又被迫弄清楚如何使用我自己的代码来做到这一点，这就是我卡住的地方。这是我到目前为止所拥有的：

```
// Get all of the devices
PCTSTR enumType = "PORTS";
HDEVINFO devs = NULL;
devs = SetupDiGetClassDevs(NULL,enumType,0,DIGCF_PRESENT | DIGCF_ALLCLASSES);

// Loop through the devices
DWORD devCount = 0;
SP_DEVINFO_DATA devInfo;
int enumeratingDevices = 1;
devInfo.cbSize = sizeof(SP_DEVINFO_DATA);
while(enumeratingDevices){
    enumeratingDevices = SetupDiEnumDeviceInfo (devs,devCount,&devInfo);
    // Uninstall each device
    cout << SetupDiRemoveDevice(devs,&devInfo);
    cout << SetupDiCallClassInstaller(DIF_REMOVE,&devInfo,NULL);
    devCount++;
}
cout << devCount;
SetupDiDestroyDeviceInfoList(devs);
return 0; 
```

现在我得到一个输出`001`。所以，基本上`SetupDiEnumDeviceInfo()`还是`SetupDiRemoveDevice`不能正常运行。我知道枚举是有效的，因为如果我输入`enumType = "USB";`我会得到十个用于 devCount。

任何帮助或建议都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T03:05:34.237

所以，经过大量的修补和阅读，我想通了。

```
// Get all of the devices
   //This enumeration does not work in general, instead passing
   //complete id of the device is probably best. 
   //It is helpful to know the vendor and device ID
PCTSTR enumType = "PORTS"; 
HDEVINFO devs = NULL;
devs = SetupDiGetClassDevs(NULL,enumType,0,DIGCF_ALLCLASSES);

// Loop through the devices
DWORD devCount = 0;
SP_DEVINFO_DATA devInfo;
int enumeratingDevices = 1;
/*This line is essential*/
devInfo.cbSize = sizeof(SP_DEVINFO_DATA);
while(enumeratingDevices){
        enumeratingDevices = SetupDiEnumDeviceInfo (devs,devCount,&devInfo);
        // Uninstall each device
        if(enumeratingDevices){
           SetupDiRemoveDevice(devs,&devInfo);
           devCount++;
        }
}
    //Clean up
SetupDiDestroyDeviceInfoList(devs); 
```

明天当我带着我正在谈论的确切枚举到达实验室时，我会更新这个。但是，使用这种方法，您几乎可以卸载任何设备，即使它不存在并且只是注册表中的“幽灵”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-29T07:11:31.747

我能够使用您的代码成功禁用 USB 设备，但我无法使用 SetupDiunremoveDevice 函数启用 USB 请在此 API 上举例说明重新启用设备 WINSETUPAPI BOOL SetupDiUnremoveDevice(HDEVINFO DeviceInfoSet, PSP_DEVINFO_DATA DeviceInfoData);

# pug - 获取 Jade 模板数组中的第一项

> ID：12756720
> 
> 赞同：0
> 
> 时间：2012-10-06T04:26:01.007
> 
> 标签：pug

我正在将 express.js 与玉一起使用。我的玉模板有问题。

我的 mogodb 数据如下

```
{ _id: 5040465ce0afabce2b000003,
    address: 'Sample',
    fax: [ '22 212', '34 138' ],
    Branch: true,
    pic: [ 'photo1.png' ,'photo2.png'],
    tel: [ '22 980', '22 439' ],
    lat: 29.674292,
    Name: 'Branch 1',
    ATM: false,
    long: 98.210881 },
{ _id: 5040465ce0afabce2b000003,
    address: 'Loikaw.',
    fax: [  ],
    Branch: true,
    pic: [  ],
    tel: [],
    lat: 20.674292,
    Name: 'Loikaw Branch',
    ATM: false,
    long: 98.210881 }, 
```

从我的玉模板

```
- obj.forEach(function(item){
                tr
                    td 
                        img(src="/upload/#{item.pic}",width=200)
                    td #{item.Name}
                    td #{item.address}
                    td #{item.ATM}
                    td #{item.Branch}
                    td #{item.lat}
                    td #{item.long} 
```

如何使用第一个数组`pic array`？

我检查了文档，[https://github.com/visionmedia/jade](https://github.com/visionmedia/jade)，它不包括关于数组。它们只显示迭代和数组。

如果没有图片，我想显示其他图片。

有可能在 Jade 模板中完成还是我需要在 js 端完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T04:45:23.610

```
- obj.forEach(function(item){
                tr
                    td 
                        - if (item.pic[0] == undefined)
                            img(src="/images/nopic.png",width=200)
                        - else
                            img(src="/upload/#{item.pic[0]}",width=200) 
```

感谢@Ray Toal

# asp.net - 为什么 MetadataType 不在数据库优先方法中进行验证？

> ID：12756721
> 
> 赞同：3
> 
> 时间：2012-10-06T04:26:10.247
> 
> 标签：asp.net, asp.net-mvc, entity-framework, database-first, metadatatype

我使用 Database-First 生成模型类（EDMX 文件），并且我想使用“MetadataType”进行验证。我在这里阅读了解决方案，但它们对我不起作用。

这是我的代码：

```
[MetadataType(typeof(MovieEntitiesMetaData))]
public partial class MovieEntities
{        
}

public class MovieEntitiesMetaData
{
    [DisplayFormat(DataFormatString = "{0:c}")]
    public Nullable<global::System.Decimal> PRICE { get; set; }
} 
```

这里有什么遗漏吗，或者为什么我的解决方案不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T04:34:18.520

创建一个名为的新文件`MoviePartial.cs`并将以下代码放入其中：

```
[MetadataType(typeof(MovieMetaData))]
public partial class Movie
{    
    internal sealed class MovieMetaData
    {
        [DisplayFormat(DataFormatString = "{0:F2}", ApplyFormatInEditMode = true)]
        [Required(ErrorMessage = "Price is required")]
        public decimal? PRICE { get; set; }
    }
} 
```

您还需要将`Movie`类型传递给视图，以便可以连接数据注释。如果您有自定义视图模型，则数据注释将不会生效。

在创建/编辑视图中，您必须拥有：

```
@Html.EditorFor(m => m.PRICE) 
```

在详细信息视图中，您必须具有：

```
@Html.DisplayFor(m => m.PRICE) 
```

有关这方面的更多信息，请按照这个不错的分步教程进行操作：

[使用数据注释验证器进行验证 (C#)](http://www.asp.net/mvc/tutorials/older-versions/models-%28data%29/validation-with-the-data-annotation-validators-cs)

# python - matplotlib 中的轴刻度标签填充

> ID：12756729
> 
> 赞同：2
> 
> 时间：2012-10-06T04:27:24.660
> 
> 标签：python, matplotlib

我正在尝试在 Python Matplotlib 中制作伪彩色图像图，但我的布局有一个小问题 - 轴刻度标签是非常小的数字（1e-7 左右），所以 Matplotlib 将指数放在整个轴。这很好，但它与 x 轴标签和标题重叠！

![查看标题如何与](../Images/5eaf6727e28c154d40a4352a48c51b9c.png)

除了向上破解标题和向下破解 xlabel 之外，有没有更好的方法来解决这个问题（如果这是要走的路，那么最好的方法是什么？）我正在尝试绘制很多不同的东西最大程度的代码重用，所以如果 Matplotlib 有办法在不手动更改文本定位的情况下解决这个问题，那将是最好的！

这是我生成此图的方式：

```
fig = Figure(figsize=(5.5, 4.25))
ax = fig.add_subplot(111)
ax.set_title('The title', size=12)
ax.set_xlabel('The xlabel', size=10)
ax.set_ylabel('The Ylabel', size=10)
ax.ticklabel_format(scilimits=(-3,3))

pcm = ax.pcolor(X, Y, Z, cmap=cm.jet) #X,Y is a meshgrid and Z is the function evaluated on it
ax.get_figure().colorbar(pcm, ax=ax, use_gridspec=True)
ax.set_axes([0, 1e-3, -5e-7, 5e-7])

#Some code for the hatching at the top and bottom of the plot

for ticklabel in ax.get_xticklabels():
    ticklabel.set_size(8)
for ticklabel in ax.get_yticklabels():
    ticklabel.set_size(8)
ax.get_xaxis().get_offset_text().set_size(8)
ax.get_yaxis().get_offset_text().set_size(8)
fig.subplots_adjust()
c = FigureCanvas(fig)
c.print_figure('filename.png', dpi=300) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T05:10:41.780

最简单的方法是通过将 X 和 Y 乘以 1e3 和 1e7 来消除对指数的需求：

```
pcm = ax.pcolor(X*1e3, Y*1e7, Z, cmap=cm.jet) 
```

然后将标签更改为：

```
ax.set_xlabel('Longitudinal distance across waveguide ($10^{-3}$ m)', size=10)
ax.set_ylabel('Transverse distance across waveguide ($10^{-7}$ m)', size=10) 
```

您也可以直接更改刻度标签或使用 matplotlib.ticker.Formatter 但前者稍微乏味，而后者则过大。

# python - 在 MS Access 中运行查询

> ID：12756731
> 
> 赞同：1
> 
> 时间：2012-10-06T04:28:19.543
> 
> 标签：python, winapi, ms-access, odbc

我对python还不是很熟悉。我添加了`win32`，导入`odbc`到我的代码中，打开了与数据库的连接。

我想运行存储在数据库中的查询。

当我将更新查询添加到代码并尝试运行它时，我收到以下消息：

> opError: [Microsoft][ODBC Microsoft Access Driver] 无法完成查询。查询结果的大小大于数据库的最大大小（2 GB），或者磁盘上没有足够的临时存储空间来存储查询结果。在执行

我正在处理的数据量非常大，我尝试运行的特定查询效率不高。

在visual basic中是否有类似的东西`doCmd`？

谢谢。

# c++ - 有没有办法减少 GNU make 中的重复先决条件模式？

> ID：12756746
> 
> 赞同：1
> 
> 时间：2012-10-06T04:32:21.300
> 
> 标签：c++, c, makefile, gnu-make

目前的方式是这样的，看起来很笨拙..

```
ex1_test : ex1.o ex1_test.o
    cc -o ex1_test ex1.o ex1_test.o
ex2_test : ex2.o ex2_test.o
    cc -o ex2_test ex2.o ex2_test.o
ex3_test : ex3.o ex3_test.o
    cc -o ex3_test ex3.o ex3_test.o 
```

是否有一个变量可以用来表示当前目标并减少重复项？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-06T04:54:36.677

第一步，引入自动变量：

```
ex1_test : ex1.o ex1_test.o
    cc -o $@ $^
ex2_test : ex2.o ex2_test.o
    cc -o $@ $^
ex3_test : ex3.o ex3_test.o
    cc -o $@ $^ 
```

第 2 步，意识到这些规则看起来都一样，并将它们替换为模式规则：

```
ex%_test: ex%.o ex%_test.o
    cc -o $@ $^ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T04:45:18.627

$@ 和 $^ 是你的朋友。$@ 是目标，$^ 是先决条件列表。

```
ex1_test : ex1.o ex1_test.o
    cc -o $@ $^ 
```

[在自动变量](http://www.gnu.org/software/make/manual/make.html#Automatic-Variables)部分的 GNU Make 文档中有更多有用的 make 变量。

# c++ - NtEnumerateKey() 的 KeyInformation 参数

> ID：12756751
> 
> 赞同：0
> 
> 时间：2012-10-06T04:33:03.997
> 
> 标签：c++, c, windows, delphi, winapi

我很想知道`KeyInformation`应该如何将参数传递给`NtEnumerateKey()`. 当我运行以下代码时，`NtEnumerateKey()`返回`NTSTATUS = 0xC000000D`错误消息*“无效参数已传递给服务或函数”。*

我使用的是 Windows 7。虽然下面的代码使用的是 Delphi 语言，但你也可以用 C 语言回答我的问题。我的问题并非特定于编程语言。

```
type
  KEY_NAME_INFORMATION = record
    NameLength: ULONG;
    Name: array[0..254] of WCHAR;
  end;
  PKEY_NAME_INFORMATION = ^KEY_NAME_INFORMATION;

var
  iNtStatus: LONG;
  hKeyResult: THandle;
  KeyNameInfo: KEY_NAME_INFORMATION;
  iResultLen: ULONG;

iNtStatus := NtOpenKey(@hKeyResult, (KEY_ENUMERATE_SUB_KEYS) and not
    SYNCHRONIZE, @rObjAttrs);
if hKeyResult = 0 then Exit;

iNtStatus := NtEnumerateKey(hKeyResult,
    0,
    KeyNameInformation,
    @KeyNameInfo,                 // I'm asking about this parameter,
    SizeOf(KEY_NAME_INFORMATION), // and also this parameter
    @iResultLen); 
```

## 更新：奇怪的事情

如果我通过`KeyBasicInformation`而不是`KeyNameInformation`，`NtEnumerateKey()`返回`STATUS_SUCCESS`。不`NtEnumerateKey()`支持`KeyNameInformation`？

```
type
  KEY_BASIC_INFORMATION = record
    LastWriteTime: LARGE_INTEGER;
    TitleIndex: ULONG;
    NameLength: ULONG;
    Name: array[0..254] of WCHAR;
  end;
  PKEY_BASIC_INFORMATION = ^KEY_BASIC_INFORMATION;

var
  KeyBasicInfo: KEY_BASIC_INFORMATION;

iNtStatus := NtEnumerateKey(hKeyResult,
    0,
    KeyBasicInformation,           // Note this!
    @KeyBasicInfo,                 // Note this!
    SizeOf(KEY_BASIC_INFORMATION), // Note this!
    @iResultLen); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T07:01:56.100

如果您查看 Zw(Nt for usermode)EnumerateKey 的文档，您会看到

```
NTSTATUS ZwEnumerateKey(
  _In_       HANDLE KeyHandle,
  _In_       ULONG Index,
  _In_       KEY_INFORMATION_CLASS KeyInformationClass,
  _Out_opt_  PVOID KeyInformation,
  _In_       ULONG Length,
  _Out_      PULONG ResultLength
); 
```

然后如果你低头看 KeyInformationClass 你会看到

```
KeyInformationClass [in]
Specifies a KEY_INFORMATION_CLASS enumeration value that determines the type of information to be received by the KeyInformation buffer. Set KeyInformationClass to one of the following values:
KeyBasicInformation
KeyFullInformation
KeyNodeInformation
If any value not in this list is specified, the routine returns error code STATUS_INVALID_PARAMETER. 
```

您需要使用这 3 个中的一个

# php - PHP将图表的最高数字排序到最低

> ID：12756757
> 
> 赞同：4
> 
> 时间：2012-10-06T04:34:37.667
> 
> 标签：php, arrays

我正在创建一个 CSS 图表，它根据数值从最高到最低列出项目。问题是“rsort”似乎只计算前 5 位数字（或者看起来如此）。这导致它显示高于其他数字 100,000 的项目。此问题的示例如下：

```
$ITEM_1 = "95000";
$ITEM_2 = "103000";
.. 

$item_rank[]= "<li>$ITEM_1 Item 1</li>";
$item_rank[]= "<li>$ITEM_2 Item 2</li>";
..

rsort($item_rank); // sort highest numbers to lowest

echo "<ul>";     
echo $item_rank[0];
echo $item_rank[1];
 ..
echo "</ul>"; 
```

在这种情况下，第 1 项实际上是一个较小的数字，但它的排名较高，因为任何超过 100,000 的项目都被视为较低。有没有解决的办法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T04:39:25.207

我相信你应该使用[natsort()](http://www.php.net/natsort)。当您尝试对视为字符串的数字进行排序时，就会发生这种情况。这是一个例子：

```
$a=array('1a','2a','3a','10a','15a');
rsort($a);
echo implode(',',$a); // outputs 3a,2a,1a,15a,10a 
```

但是你期待这样的输出：

```
15a,10a,3a,2a,1a 
```

为此，请使用 natsort 和[array_reverse()](http://php.net/array_reverse)：

```
$a=array('1a','2a','3a','10a','15a');

natsort($a);
$a=array_reverse($a);

echo implode(',',$a); // outputs 15a,10a,3a,2a,1a 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T04:50:08.187

由于 $item_rank 数组具有字符串值，因此 rsort 将按字母顺序对其进行排序。在字母顺序反向排序中，“2”将出现在“10”之前，即使 10 > 2。

您需要为这种类型的排序实现 natsort。检查 - [http://us3.php.net/manual/en/function.natsort.php](http://us3.php.net/manual/en/function.natsort.php)

来自 php.net 的示例：

```
<?php
    $array1 = $array2 = array("img12.png", "img10.png", "img2.png", "img1.png");

    asort($array1);
    echo "Standard sorting\n";
    print_r($array1);

    natsort($array2);
    echo "\nNatural order sorting\n";
    print_r($array2);
?>

Standard sorting
Array
(
[3] => img1.png
[1] => img10.png
[0] => img12.png
[2] => img2.png
)

Natural order sorting
Array
(
[3] => img1.png
[2] => img2.png
[1] => img10.png
[0] => img12.png
) 
```

# python - 如何制作加密任何类型文件的python脚本

> ID：12756761
> 
> 赞同：1
> 
> 时间：2012-10-06T04:35:25.603
> 
> 标签：python, encryption

我正在尝试为公众制作我的程序（免费软件），我只想知道用于加密文件的代码。（Python 语言 2.7.3）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T04:41:54.533

这里有你需要的

```
def encoder(path,pwd,topath):
    """
    @path: file path you wish to encrypt including filename
    @pwd: seek value 'you should remember that if you want to decrypt it'
    @topath: file path for encrypted file included filename
    """
    k = long(pwd) # key   # password in int
    f1 = open( path, "rb") # file path you wish to encrypt
    bytearr = map (ord, f1.read() ) 
    f1.close()
    f2 = open( topath, "wb" ) # path for encrypt file to write
    random.seed(k)
    for i in range(len(bytearr)):
        byt = (bytearr[i] + random.randint(0, 255)) % 256
        f2.write(chr(byt))
    f2.close() 
```

您是否尝试过在 google 上搜索它，甚至是 stackoverflow。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T05:37:24.627

查看[PyCrypto](http://pypi.python.org/pypi/pycrypto)

您还可以搜索本机 python 实现，但它们的效率会降低。

# objective-c - 为什么我的 UITextField 自定义实现没有做任何事情 - MonoTouch

> ID：12756765
> 
> 赞同：0
> 
> 时间：2012-10-06T04:35:49.377
> 
> 标签：objective-c, ios, xamarin.ios

> **可能重复：**
> [在 Monotouch 中继承和覆盖 UITextField](https://stackoverflow.com/questions/12683853/subclassing-and-overriding-uitextfield-in-monotouch)

所以，我正在使用 MonoTouch，基本上是在尝试将大量 Obj-C 代码转换为 MonoTouch。问题是 MonoTouch 没有很好地记录很多事情（或者至少我找不到它）。

在我的表单上（是的，我仍然称它为表单）我有一个带有占位符文本的 UITextField。在我指定 CustomUITextField 的自定义类之前，它工作得很好。（见下文）。

问题是当我加载它所在的屏幕时，我的断点被击中。但是，什么都不做。即使我调用 base.DrawPlaceholder(rect); 也不再显示占位符；从覆盖方法。我希望通过调用 base.DrawPlaceholder(rect); 我至少会获得显示占位符文本的默认功能（这在不使用我的自定义类的情况下有效 - 已测试）。

如果我继续使用这个自定义类，但从我的实现中删除了覆盖 DrawPlaceholder 方法，则标准占位符文本显示正常。这与覆盖 DrawPlaceholder 然后调用 base.DrawPlaceholder(rect); 有何不同。这是同一件事。

有谁知道我在这里做错了什么？我快疯了...

```
using System;
using MonoTouch.UIKit;
using MonoTouch.Foundation;
using System.Drawing;

namespace MyApp
{
    [Register("CustomUITextField")]
    public class CustomUITextField:UITextField
    {
        public CustomUITextField () :base()
        {

        }

        public CustomUITextField (IntPtr handle) :base()
        {
            this.BackgroundColor=UIColor.Black;
        }

        public override void DrawPlaceholder (RectangleF rect)
        {       
            this.BackgroundColor=UIColor.Black;
            base.DrawPlaceholder(rect);

            //UIColor col = new UIColor(0,0,255,0);
            //col.SetFill();
            //this.DrawString ("Title",rect, this.Font);
        }

        public override void DidChange (NSKeyValueChange changeKind, NSIndexSet indexes, NSString forKey)
        {

            base.DidChange (changeKind, indexes, forKey);
        }

        public override void DidChangeValue (string forKey)
        {
            base.DidChangeValue (forKey);
            this.Text="";
        }
    }
} 
```

# entity-framework - 映射 Nullable 类型代码优先

> ID：12756766
> 
> 赞同：2
> 
> 时间：2012-10-06T04:36:00.280
> 
> 标签：entity-framework, datetime, ef-code-first, mapping, nullable

我的项目使用 EF Code First 运行得很好。但是现在我需要在 DB 中再添加 1 个字段（例如 DateTime 类型的 CreateDate），它可以为空。

因此，我编写了脚本以向 DB(CreateDate (datetime) **null** ) 添加另外 1 个字段，然后我修改了我的模型以包含新字段

```
public class Account()
{
...
public DateTime CreateDate { get; set; }
} 
```

下面是使用 FluentApi 制作此字段选项的代码

```
Property(x => x.CreateDate).IsOptional(); 
```

问题是当我尝试获取 Account 的任何实例时，当我按如下方式修改字段时出现错误：

```
public DateTime? CreateDate { get; set; } 
```

然后它工作。

你们能向我解释一下吗？为什么我的流利的 api 不起作用或者我做错了什么？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T04:38:23.637

您已经在问题中给出了解决方案... :) 您必须将新属性声明为：

```
public DateTime? CreateDate { get; set; } 
```

`DateTime?`是一个可以为[空的类型](http://msdn.microsoft.com/en-us/library/2cf62fcy%28v=vs.110%29.aspx)，意味着`CreateDate`可以为空。

这是必要的，因为当从数据库中获取记录并且它`CreateDate`是`NULL`模型上的支持属性时，应该接受 null 作为可能的值。如果您将属性声明为只是`DateTime CreateDate`框架会给您一个错误，通知它无法将`NULL`值分配给不接受的属性`NULL`。

所以你应该有：

```
public class Account()
{
    ...

    public DateTime? CreateDate { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-07T07:15:55.743

尝试基于此示例：

```
public class Student
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string Family { get; set; }
    public string Phone { get; set; }
    public DateTime Birthday { get; set; }
} 
```

DbContext 和流利的 Api：

```
public class dbMvc1:DbContext
{
    public DbSet<Student> Student { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Student>().Property(x => x.Birthday).IsOptional();
    }
} 
```

# sql-server - SQL 转换日期时间并减去小时数

> ID：12756769
> 
> 赞同：25
> 
> 时间：2012-10-06T04:37:42.883
> 
> 标签：sql-server, sql-server-2008, tsql

我正在尝试将 datetime (createTime) 字段从其默认的 2012-10-06 02:29:37.243 格式转换为 am/pm 所以我使用

```
convert(varchar, CreateTime, 100) as CreateTime 
```

并获得**Oct 6 2012 4:29AM**。

到目前为止一切顺利，但在同一个语句中，我想减去 4 小时，然后显示该字段（GMT 问题）。

我在这里浏览了一些帖子，但找不到任何可以在单个语句中执行的操作。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-10-06T04:59:11.900

```
declare @createTime datetime = '2012-10-06 02:29:37.243';

-- original value, default formatting
select @createTime;

-- formatted
select convert(varchar, @createTime, 100);

-- subtract 4 hours, formatted
select convert(varchar, dateadd(hour, -4, @createTime), 100); 
```

上面使用的查询`dateadd`将始终减去 4 小时。如果您的目标是将任意日期时间从 UTC 转换为本地时间，那么它会更复杂，因为您需要添加/减去的偏移量取决于原始日期时间。像 -4 这样的单个值并不总是有效。以下是处理一般情况的一些想法：

[在 SQL 2005 中有效地在 UTC 和本地（即 PST）时间之间转换日期](https://stackoverflow.com/questions/24797/effectively-converting-dates-between-utc-and-local-ie-pst-time-in-sql-2005)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-13T13:16:54.103

对于想要减去天数和小时数的人

```
 declare @createTime datetime = '2012-10-06 02:29:37.243';
select @createtime as originaltime, dateadd(day, -4, dateadd(hour,-1,@createtime))as minus4daysandhour 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T04:55:21.870

对于 SQL 服务器，您可以使用[datetimeoffset](http://msdn.microsoft.com/en-us/library/bb630289.aspx)

对于 mysql 使用[CONVERT_TZ](http://dev.mysql.com/doc/refman/5.0/en/date-and-time-functions.html#function_convert-tz)函数来转换到不同的时区。

# jquery - 根据 span 属性值隐藏 div 类

> ID：12756770
> 
> 赞同：1
> 
> 时间：2012-10-06T04:37:53.377
> 
> 标签：jquery, greasemonkey

所以我正在尝试编写一个greasemonky 脚本，并希望根据同一树中的跨度值切换特定的div 类。这将与按钮操作相关联。

我想出的最好的就是这个...

> $('span[data-doc="true"]').parent().parent().parent().parent().parent().parent().toggle();

为了到达树并隐藏我想要的 div 类，我必须添加所有这些 .parent() 选择器。这种方法似乎也不能很好地处理表格中剩余的项目。

我宁愿做这样的事情，但它不会隐藏 div 类......

> $('div.inline-block.carousel-cell)('span[data-doc="true"]').toggle();

有没有更优雅的方法来隐藏基于 span 值的特定 div 类？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T04:49:04.477

你应该尝试`$('div.inline-block.carousel-cell:has(span[data-doc="true"])').toggle();`这样做。请检查这个[小提琴链接](http://jsfiddle.net/pintu31/Cf7k9/2/)

# image - 图像加载后的jQuery运行事件（通过ajax）

> ID：12756779
> 
> 赞同：1
> 
> 时间：2012-10-06T04:39:28.853
> 
> 标签：image, jquery, load

我正在通过 jQuery 的 ajax 函数加载图像，我必须测量图像的尺寸，然后重新对齐 div 等一旦加载，问题是如果图像没有完全加载，那么它就无法获取图像的尺寸，但事件已经触发，因此图像的对齐非常错误。我已经尝试了几个不同的 jQuery 插件，它们部分工作，但不是完全工作，它们似乎都没有完全等待图像加载，宽度被成功检索，并且它都水平对齐很好，但是垂直它没有不。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T04:55:22.423

我不确定你想要实现什么，但如果垂直对齐图像是你想要的，你检查过[jQuery Masonry](http://masonry.desandro.com/)插件吗？它可以动态对齐 div/图像，并且有一种在我的经验中效果很好的`imagesLoaded` [方法](http://masonry.desandro.com/demos/images.html)

# http-post - 使用 HTTP Post 并使用 Cookie

> ID：12756782
> 
> 赞同：37
> 
> 时间：2012-10-06T04:40:56.117
> 
> 标签：http-post, go, cookiejar

我正在尝试使用 Go 登录网站并存储 cookie 以供以后使用。

您能否提供发布表单、存储 cookie 以及使用 cookie 访问另一个页面的示例代码？

我想我可能需要通过研究[http://gotour.golang.org/src/pkg/net/http/client.go来创建一个客户端来存储 cookie](http://gotour.golang.org/src/pkg/net/http/client.go)

```
package main

import ("net/http"
        "log"
        "net/url"
        )

func Login(user, password string) string {
        postUrl := "http://www.pge.com/eum/login"

        // Set up Login
        values := make(url.Values)
        values.Set("user", user)
        values.Set("password", password)

        // Submit form
        resp, err := http.PostForm(postUrl, values)
        if err != nil {
                log.Fatal(err)
        }
        defer resp.Body.Close()

        // How do I store cookies?
        return "Hello"
}

func ViewBill(url string, cookies) string {

//What do I put here?

} 
```

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-10-15T16:44:16.380

Go [1.1](http://golang.org/doc/go1.1)引入了一个 cookie jar 实现[`net/http/cookiejar`](http://golang.org/pkg/net/http/cookiejar/)。

```
import (
    "net/http"
    "net/http/cookiejar"
)

jar, err := cookiejar.New(nil)
if err != nil { // error handling }

client := &http.Client{
    Jar: jar,
} 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-10-06T05:20:02.440

首先，您需要实现`http.CookieJar`接口。然后，您可以将其传递给您创建的客户端，它将用于客户端发出的请求。作为一个基本示例：

```
package main

import (
    "fmt"
    "net/http"
    "net/url"
    "io/ioutil"
    "sync"
)

type Jar struct {
    lk      sync.Mutex
    cookies map[string][]*http.Cookie
}

func NewJar() *Jar {
    jar := new(Jar)
    jar.cookies = make(map[string][]*http.Cookie)
    return jar
}

// SetCookies handles the receipt of the cookies in a reply for the
// given URL.  It may or may not choose to save the cookies, depending
// on the jar's policy and implementation.
func (jar *Jar) SetCookies(u *url.URL, cookies []*http.Cookie) {
    jar.lk.Lock()
    jar.cookies[u.Host] = cookies
    jar.lk.Unlock()
}

// Cookies returns the cookies to send in a request for the given URL.
// It is up to the implementation to honor the standard cookie use
// restrictions such as in RFC 6265.
func (jar *Jar) Cookies(u *url.URL) []*http.Cookie {
    return jar.cookies[u.Host]
}

func main() {
    jar := NewJar()
    client := http.Client{nil, nil, jar}

    resp, _ := client.PostForm("http://www.somesite.com/login", url.Values{
        "email": {"myemail"},
        "password": {"mypass"},
    })
    resp.Body.Close()

    resp, _ = client.Get("http://www.somesite.com/protected")

    b, _ := ioutil.ReadAll(resp.Body)
    resp.Body.Close()

    fmt.Println(string(b))
} 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2016-03-10T17:45:40.727

在 Go 的 1.5 版本中，我们可以使用 http.NewRequest 使用 cookie 发出 post 请求。

```
package main                                                                                              
import "fmt"
import "net/http"
import "io/ioutil"
import "strings"

func main() {
    // Declare http client
    client := &http.Client{}

    // Declare post data
    PostData := strings.NewReader("useId=5&age=12")

    // Declare HTTP Method and Url
    req, err := http.NewRequest("POST", "http://localhost/", PostData)

    // Set cookie
    req.Header.Set("Cookie", "name=xxxx; count=x")
    resp, err := client.Do(req)
    // Read response
    data, err := ioutil.ReadAll(resp.Body)

    // error handle
    if err != nil {
        fmt.Printf("error = %s \n", err);
    }   

    // Print response
    fmt.Printf("Response = %s", string(data));
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2021-04-07T17:45:04.817

`net/http/cookiejar`是一个不错的选择，但我想知道在提出请求时实际需要哪些 cookie。您可以像这样获取响应 cookie：

```
package main
import "net/http"

func main() {
   res, err := http.Get("https://stackoverflow.com")
   if err != nil {
      panic(err)
   }
   for _, c := range res.Cookies() {
      println(c.Name, c.Value)
   }
} 
```

你可以像这样添加cookie：

```
package main
import "net/http"

func main() {
   req, err := http.NewRequest("GET", "https://stackoverflow.com", nil)
   if err != nil {
      panic(err)
   }
   req.AddCookie(&http.Cookie{Name: "west", Value: "left"})
} 
```

*   [https://golang.org/pkg/net/http#Request.AddCookie](https://golang.org/pkg/net/http#Request.AddCookie)
*   [https://golang.org/pkg/net/http#Response.Cookies](https://golang.org/pkg/net/http#Response.Cookies)

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2017-05-25T14:58:44.723

另一种方法。适用于 Go 1.8。

```
 expiration := time.Now().Add(5 * time.Minute)
    cookie := http.Cookie{Name: "myCookie", Value: "Hello World", Expires: expiration}
    http.SetCookie(w, &cookie) 
```

# c++ - 带有模板的接口 C++

> ID：12756784
> 
> 赞同：0
> 
> 时间：2012-10-06T04:41:30.307
> 
> 标签：c++, generics, interface

我想创建一个接口并将其中一个函数的返回类型设为泛型（如在 java 中）。我写了这个：

```
 template <class T>
    class IUnionFind {
    public:
     IUnionFind();

     ///@param[in] x
     ///@param[in] y
     virtual void unionSet(int x,int y)=0;
     ///@param[in]
     virtual void find (int x)=0;
     virtual T  make_set(int x)=0;
     virtual ~IUnionFind(){};
     }; 
```

并且eclipse编译器并没有指责任何错误。但是，当我制作一个标题来实现这样的接口时：

```
 template <class T>
    class UnionFindLinkedList : public IUnionFind {
     public:
     UnionFindLinkedList();
     virtual ~UnionFindLinkedList();
     void unionSet(int x,int y);
     void find (int x);
     T  make_set(int x);
    }; 
```

IT 指责类声明行上的“{”标记之前的“预期类名”；如果我删除泛型，一切正常

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T04:44:45.010

它应该是

```
template <class T>
class UnionFindLinkedList : public IUnionFind<T>
{
   ..... 
```

# entity-framework - 我可以使用不同的方法来更新 EF 中的数据库吗？（Nuget 数据库生成器）

> ID：12756787
> 
> 赞同：0
> 
> 时间：2012-10-06T04:42:22.440
> 
> 标签：entity-framework, entity-framework-4, entity-framework-4.1, nuget

我正在开发一个 EF - MVC 3 应用程序。我使用了模型优先的方法，所以我首先创建了模型，EF 从该模型生成了数据库。

我使用了一个名为***Nuget - Entity Generator - Database Designer***的工具来生成数据库。当我第一次设计模型时，我使用了`Generate Migration T-SQL and Deploy`该工具的选项。

数据库生成完美，工作正常......

现在我遇到了一种情况，我必须对模型进行更改，并且必须使用`T-SQL Via T4 (TPH)`选项来更新数据库。

所以以前我使用不同的过程来更新数据库，现在我正在改变它。

可以使用这个（TPH）过程来更新数据库吗？如果我用这个有问题吗？

# java - 数组运行时错误

> ID：12756788
> 
> 赞同：1
> 
> 时间：2012-10-06T04:42:27.990
> 
> 标签：java, arrays

我正在为学校开发一个简单的程序，它是一个简单的字符串生成器，我正在正确定义数组大小，但是当我运行程序时，`ArrayIndexOutOfBoundsException: 0`它被抛出了。我在构造函数、名称和类中初始化变量。`name`是学生的名字，`classes`是学生每天上多少节课。我的数组的大小是使用定义的`classes`。这是我的构造函数和变量。

```
protected String name = "";
protected int classes;
private String schedule = "";
private String[] course = new String[classes];
private String[] room = new String[classes];
private int[] Period = new int[classes];

public StringBuilderHandler(String name, int classes) {
    this.name = name;
    this.classes = classes;
} 
```

我正在使用 for 循环来设置字符串计划。

```
private void setClass(int index) {
    Scanner scan = new Scanner(System.in);
    class[index] = scan.nextLine();
}

private void setPeriod(int index) {
    Scanner scan = new Scanner(System.in);
    period[index] = scan.nextInt();
}

public void setRoom(int index) {
    Scanner scan = new Scanner(System.in);
    room[index] = scan.nextLine();    
}

public void buildSchedule() {
    for (int i = 0; i < classes; i++) {
        System.out.println("What is your class?");
        setClass(i);
        System.out.println("What period is this class?");
        setPeriod(i);
        System.out.println("What room is this class?");
        setRoom(i);
        schedule = schedule +"Period "+period[i]+"\t"+course[i]+"\tRoom "+room[i]+"\n";
    }
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T04:49:04.770

您*必须*在构造函数中创建对象（数组）。

```
private String[] course;
private String[] room;
private int[] Period;

public StringBuilderHandler(String name, int classes) {
    this.name = name;
    this.classes = classes;
    this.course = new String[classes];
    this.room = new String[classes];
    this.Period = new int[classes]; 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T04:48:11.197

您的 classes 实例变量的默认值为 0，因为您尚未对其进行初始化。因此，您的所有数组都被初始化为零大小。由于数组大小为零，因此没有索引 0，因此出现异常。您需要将类实例变量初始化为非零正值。

如果您尝试向数组中插入比其大小更多的值，您仍然可能会收到 ArrayIndexOutOfBoundsException。一个快速的解决方案是使用 ArrayList 而不是数组。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-06T05:00:55.803

你只需要将你的类定义为：

```
protected String name = "";
protected int classes;
private String schedule = "";
private String[] course;
private String[] room;
private int[] Period;

public StringBuilderHandler(String name, int classes) {
    this.name = name;
    this.classes = classes;
    this.course = new String[classes];
    this.room = new String[classes];
    this.Period = new int[classes]; 
} 
```

肯定会奏效的。您正在使用 classes 变量而没有对其进行初始化，因为它在运行时进行了初始化。当类有值时，您只需要在构造函数中初始化数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T04:48:22.480

您是否在任何地方初始化了该变量类？

您已经初始化了所有大小类的数组，但类似乎没有被初始化。

# extjs - 如何在 Ext.tree.Panel 中添加复选框？

> ID：12756789
> 
> 赞同：0
> 
> 时间：2012-10-06T04:43:42.313
> 
> 标签：extjs, extjs4, extjs4.1

我有一个以 Ext.data.TreeStore 作为存储的 Ext.tree.Panel。

```
var tree = Ext.create('Ext.tree.Panel', {
            region: 'west', //for border layout
            border: false,
            useArrows: true,
            cls: 'my-cool-tree',
            width: 200,
            store: store,
            rootVisible: false,
            margins: '5 3 5 5'
        }); 
```

我想添加复选框，但我没有得到任何像在文档中选中的属性。请让我知道如何实现这一目标？

**编辑：**

我想为树的根文件夹添加复选框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T04:54:20.523

哦，设置检查属性正在工作.......由于没有图像，我无法看到复选框......现在很好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T17:43:42.460

您可以创建并随后将 xtype: 'checkbox' 节点附加到您的根节点。

# database - 如何更改zencart数据库的默认值

> ID：12756790
> 
> 赞同：0
> 
> 时间：2012-10-06T04:44:01.623
> 
> 标签：database, zen-cart, zen

如何替换 zencart 安装过程中存储的 zencart 的默认值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T11:19:20.137

Zen Cart 配置的大多数默认值实际上可以使用内置的管理面板进行更改。如果您在追踪特定值时遇到问题，请查看 Search Configuration Keys 贡献：

[http://www.zen-cart.com/downloads.php?do=file&id=1107](http://www.zen-cart.com/downloads.php?do=file&id=1107)

它向您展示了如何通过管理界面获取特定值。

也许您想指定要更改的值，我们可以进一步帮助您。

# clojure - 更新值未在 hsqldb 上生成实际更新

> ID：12756793
> 
> 赞同：0
> 
> 时间：2012-10-06T04:44:45.433
> 
> 标签：clojure, hsqldb

我是clojure的新手。一直在用hsqldb玩jdbc。

此功能是否更新表“角色”，其中字段“cedula”是主键

```
(defn update [cedula x]
(sql/with-connection common/database
    (sql/update-values :persona
        ["cedula=?" cedula] x))) 
```

在 REPL 中运行这个

```
(per/update 111 {:cedula 122 :nombre "Raul" :cargo "mm"}) 
```

但在那之后，如果我转到数据库中的 .log 文件，我会看到它先删除然后再插入。

```
/*C15*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
DELETE FROM PERSONA WHERE CEDULA=111
INSERT INTO PERSONA VALUES(122,'Raul','mm')
COMMIT
SET AUTOCOMMIT TRUE
DISCONNECT 
```

这正常吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T05:05:49.210

这是代码`update-values`：

```
(defn update-values
  "Updates values on selected rows in a table. where-params is a vector
  containing a string providing the (optionally parameterized) selection
  criteria followed by values for any parameters. record is a map from
  strings or keywords (identifying columns) to updated values."
  [table where-params record]
  (let [[where & params] where-params
        column-strs (map as-identifier (keys record))
        columns (apply str (concat (interpose "=?, " column-strs) "=?"))]
    (do-prepared
      (format "UPDATE %s SET %s WHERE %s"
              (as-identifier table) columns where)
      (concat (vals record) params)))) 
```

如您所见，它绝对不会生成任何内容，但应该生成 UPDATE。那么究竟发生了什么？

[从 HSQLDB 文档](http://hsqldb.org/doc/guide/deployment-chapt.html#dec_app_dev_testing)：

> 由于 HyperSQL 在 .log 文件中记录 DDL 和 DML 语句，因此该文件可用于检查发送到数据库的内容。**请注意，UPDATE 语句由 DELETE 后跟 INSERT 语句表示。**

所以 HSQLDB 日志只是简单地写一个 DELETE 和 INSERT，即使正在执行的查询实际上是一个 UPDATE。

# facebook - 使用cordova2.0.0的IOS的Phonegap Facebook新插件

> ID：12756794
> 
> 赞同：2
> 
> 时间：2012-10-06T04:45:06.143
> 
> 标签：facebook, cordova, phonegap-plugins

我正在使用 phonegap 在 IOS 上集成 Facebook 共享功能。我找到了链接 [https://github.com/davejohnson/phonegap-plugin-facebook-connect](https://github.com/davejohnson/phonegap-plugin-facebook-connect)。在此提供了更新的 facebook-ios-SDK。我认为这个站点中给出的演示是旧的，所以我无法让 Facebook 使用新的 SDK，因为我在 Facebook SDK 文件中遇到了很多错误。我需要知道如何准确地将 Facebook 与更新的 SDK 集成。

在此先感谢..阿什维尼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T06:05:12.337

嗨，我认为这个子浏览器插件可以用作 FB 分享，

检查这个链接[链接](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/ChildBrowser) ，在这个 git 里面我们可以看到一个 FBConnectExample。检查这个例子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T17:48:52.567

现在正在更新插件以使用最新版本的 PhoneGap 和 Facebook iOS SDK！这周应该完成。

在 github 上查看[https://github.com/davejohnson/phonegap-plugin-facebook-connect/tree/pg2.1-ios3.1](https://github.com/davejohnson/phonegap-plugin-facebook-connect/tree/pg2.1-ios3.1)

# objective-c - 在 iOS 中绘制圆圈触摸移动

> ID：12756796
> 
> 赞同：1
> 
> 时间：2012-10-06T04:45:19.993
> 
> 标签：objective-c, ios, drawing, geometry, touchesmoved

当我使用 UIViews 并更改它们的背景颜色时，我的代码正在工作。现在我用椭圆尝试它，但它们没有出现？这是代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
        overlayView = [[[UIView alloc] initWithFrame:self.view.bounds] autorelease];
        overlayView.backgroundColor = [UIColor colorWithWhite:255.0f alpha:1.0f];
    [self.view addSubview:overlayView];
    reda = 0;
    bluea = 0;
    greena = 255;
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [touches anyObject];
    touchPoint = [touch locationInView:self.view];
    previousPoint = touchPoint;

}

- (void) touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [touches anyObject];
    touchPoint = [touch locationInView:self.view];
    if (abs((previousPoint.x-touchPoint.x)) > 20) {
        UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Warning!" message:@"Too Fast!" delegate:self cancelButtonTitle:@"Okay." otherButtonTitles:nil];
        [alertView show];
        [alertView release];
    }
    CGContextRef contextRef = UIGraphicsGetCurrentContext();
    CGContextSetRGBFillColor(contextRef, reda/255.f, greena/255.f, bluea/255.f, 1.0f);
    CGContextFillEllipseInRect(contextRef, CGRectMake(touchPoint.x, touchPoint.y, 20, 20));
    [overlayView addSubview:contextRef];

    if ((greena != 0) && (bluea == 0)) {
        greena += -5;
        reda += +5;
    }
    if ((reda != 0) && (greena == 0)) {
        bluea += +5;
        reda += -5;
    }
    if ((bluea != 0) && (reda == 0)) {
        bluea += -5;
        greena += +5;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T05:12:01.217

你在`UIGraphicsGetCurrentContext`打电话`touchesMoved:withEvent:`。系统不会在`touchesMoved:withEvent:`. 系统仅在`-[UIView drawRect:]`.

您需要阅读Apple 文档中 有关[视图绘制周期](http://developer.apple.com/library/ios/documentation/windowsviews/conceptual/viewpg_iphoneos/WindowsandViews/WindowsandViews.html#//apple_ref/doc/uid/TP40009503-CH2-SW10)和视图[运行时交互模型的信息。](http://developer.apple.com/library/ios/documentation/windowsviews/conceptual/viewpg_iphoneos/WindowsandViews/WindowsandViews.html#//apple_ref/doc/uid/TP40009503-CH2-SW42)

您可以将绘图代码移动到`drawRect:`，也可以创建自己的图形上下文（例如使用`UIGraphicsBeginImageContextWithOptions`或`CGBitmapContextCreate`），绘制到它，然后从上下文创建图像并将图像分配给`view.layer.contents`。

# javascript - 如何修复屏幕上的文本框位置

> ID：12756798
> 
> 赞同：2
> 
> 时间：2012-10-06T04:45:27.387
> 
> 标签：javascript, textbox, positioning

我正在我的网络应用程序中实现一个聊天系统，我正在显示消息列表（新消息将在下面附加）和一个消息框，用户可以在其中输入他们的消息。

![在此处输入图像描述](../Images/2592babbcddd06764f0f6129b7a173ae.png)

我当前面临的问题是，当我将新消息添加到列表（附加到最后一行的底部）时，消息框被推下屏幕。

如何修复消息框在屏幕上的位置，使其不会被向下推？

为了澄清，消息框将始终位于列表中最后一条消息的下方。这意味着我需要页面自动滚动，以便消息框始终保持在原位，即在屏幕的中心

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T04:49:41.680

由于您没有共享任何标记，因此我制作了一个演示......所以为了阻止您的输入框被按下，您需要`overflow-y: scroll;`在您的消息框上使用并给它一个固定的高度，如下所示：[**我的小提琴**](http://jsfiddle.net/NRuaY/1/)

HTML

```
<div class="container">
blah<br>
blah<br>
blah<br>
blah<br>
blah<br>
blah<br>
blah<br>
blah<br>
blah<br>
blah<br>
blah<br>
blah<br>
blah<br>
blah<br>
blah<br>
blah<br>
</div>
<input type="text" />​ 
```

CSS

```
.container {
height: 200px; 
width: 200px; 
background-color: #ff0000; 
overflow-y: scroll;
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T06:26:49.040

不能完全理解确切的问题。

如果您希望将消息框固定到窗口中的某个位置而不管其他控件的位置，您可以执行以下操作：

```
#msgboxContainer
{
  position:absolute;
  left:10px; 
  bottom:20;
} 
```

# mysql - 删除重复记录需要太多时间

> ID：12756800
> 
> 赞同：4
> 
> 时间：2012-10-06T04:45:47.210
> 
> 标签：mysql, sql, indexing

我正在尝试从 mysql 数据库中删除重复记录。使用以下命令，它将删除所有重复项并保留一行。在我的数据库中有 300,000 条记录，我预计大约有 100,000 行是重复的。

重复项需要通过以下命令删除，但问题是，我在 9 小时后的晚上给出了命令，它仍在运行。

```
 DELETE n1 FROM tableA n1,tableA n2 WHERE n1.title= n2.title AND n1.id > n2.id 
```

怎么了？谁能解释一下？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T05:39:03.360

试：

```
select * from tableA as n1 join tableA as n2 on n1.title = n2.title AND n1.id > n2.id; 
```

并解释一下：`n1.title = n2.title`不使用索引。

这个查询会更好：

```
delete from `t2` where `id` in (
    select cid from (
       select max(id) as cid from t2 group by title having count(*) > 1
    ) as c
); 
```

# c# - C# getter/setter 对

> ID：12756804
> 
> 赞同：3
> 
> 时间：2012-10-06T04:46:54.027
> 
> 标签：c#, getter-setter

我正在尝试使用以下 getter 和 setter 创建属性 i。我试过了：

```
 int i { 
        get{
            return i;   
        }
        set {
            if (value > 60) {
            } else { 
                i = value; 
            } 
        }

    } 
```

但是，当我尝试此操作时，当我尝试运行代码时会出现堆栈溢出错误。我的代码有什么问题吗？任何 Assistane 将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T04:49:14.170

如果您的属性中有任何类型的逻辑（否则自动属性是要走的路），您需要一个支持字段 - 目前您正在分配给属性本身，它再次调用您的 setter 代码（同样适用于 getter） - 这会导致堆栈溢出异常。

例子：

```
private int _i;
public int SomeProperty
{
  get{ return _i;}
  set 
  {
     //your logic here
     _i = value; 
  }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-06T04:49:51.153

做这个：

```
private int i; // backing field

int I
{ 
    get
    {
        return i;   
    }
    set
    {
        if (value > 60) {
        } else
        { 
            i = value; 
        } 
    }
} 
```

如果您不这样做，您的代码将保持循环状态，从而导致`StackOverflow`错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-06T04:51:31.700

它是这样的

```
private int i = 0;
public int I
{
    get
    {
        return i;
    }
    set
    {
        if (value > 60)
        {
        }
        else
        {
            i = value;
        }
    }
} 
```

请遵循一些编码命名约定

1.  属性是类似于 MyProperty 的 PascalCase
2.  私有字段是骆驼案例，如 localVariable

更多请阅读[这里](http://msdn.microsoft.com/en-us/library/ms229002%28v=vs.100%29.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-06T04:54:42.957

只需使用这段代码：

```
int i;

public int I 
{ 
    get { return i; }
    set { if (value <= 60) i = value; } 
} 
```

您的代码中的问题是您在属性中指定了 i，该属性在 getter/setter 的主体内引用自身，变成循环效果，最终导致 StackOverflow 错误。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-06T06:07:52.203

```
int i { 
    get{
        return i;   
    }
    set {
        ...
        i = value; 
        ...
    }
} 
```

在上面的代码中，您在 get 和 set 块中使用相同的属性名称。

编译后，您的代码将被翻译成与此等效的内容：

```
int get_i()
{
 return get_i();
}

void set_i(int value)
{
 set_i(value);
} 
```

如您所见，它们中的每一个都将无限调用自身（递归）而没有任何退出条件，从而导致`StackOverflow`异常。

如果你有一个属性的支持字段，就像这个问题的其他答案所建议的那样，编译器会生成一些与此等效的东西，它没有递归：

```
int get_i()
{
 return _i; //_i is the backing field
}

void set_i(int value)
{
 _i = value;
} 
```

更新：

为了完整起见，我在这里添加了一种解决您问题的方法。

```
int _i;
int i { 
    get{
        return _i;   
    }
    set {
        if (value > 60) {
        } else { 
            _i = value; 
        } 
    }
} 
```

# ios - xcode 复制生成的捆绑资源延迟

> ID：12756805
> 
> 赞同：1
> 
> 时间：2012-10-06T04:46:59.033
> 
> 标签：ios, xcode

我有一个自定义运行脚本阶段，它生成一个需要复制到资源包中的文件。

问题是生成文件大约需要半秒钟，Xcode 总是将旧版本的文件复制到包中，而不是新生成的包中。我检查了运行脚本阶段是否在复制捆绑资源阶段之前。

我可以添加`sleep 1`到脚本的末尾以强制 Xcode 等待但有更好的方法吗？

# .htaccess - 将 .htaccess 指向一个文件

> ID：12756809
> 
> 赞同：2
> 
> 时间：2012-10-06T04:47:30.327
> 
> 标签：.htaccess

我正在开发一个开源项目。我不知道这个项目将安装在最终用户的哪个目录中。我需要向为我的项目创建的 .htaccess 文件添加规则，以便 404 和其他指向我项目根目录中的特定文件。设置脚本在名为“setup”的文件夹中调用，与根文件夹相关，如 root/setup/index.php。

我用来将 404 从根目录中的 .htaccess 引导到 errorcode.php（也在根文件夹中）的路径是：

```
$installURL = "http://" . $_SERVER['HTTP_HOST'] . dirname($_SERVER['SCRIPT_NAME']);
$save= $installURL;
$str = str_replace( '/setup', '', $save ); //remove /setup/
$installURL= $str ; 
```

然后我打开 .htaccess 文件并制定如下规则：

```
$fp = fopen("../.htaccess", "a");
fwrite($fp, "\n\n# ErrorDocuments \n");
fwrite($fp, "ErrorDocument 400 ". $installURL."/errorcode.php?error=400 \n"); 
```

所有 400 个 HTTP 标头都有一个规则列表。

这对我来说已经工作了大约一个月了。今天，我开始收到服务器错误，日志文件显示以下内容：

```
[Thu Oct 04 11:56:59 2012] [notice] cannot use a full URL in a 401 ErrorDocument directive --- ignoring!
[Thu Oct 04 11:56:59 2012] [alert] [client 127.0.0.1] C:/wamp/www/Project-BlackHawk/.htaccess: Unsupported HTTP response code 428, referer: http://localhost/Project-BlackHawk/setup/index.php 
```

我的问题是，我是否应该对 ErrorDocument 的路径使用类似的东西：

```
$installURL = dirname($_SERVER['SCRIPT_NAME']);
$save= $installURL;
$str = str_replace( '/setup', '', $save ); //remove /setup/
$installURL= $str ; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T04:56:15.130

听起来您需要从指令中删除该`http://localhost`部分。`ErrorDocument`所以`$_SERVER['SCRIPT_NAME']`可能会为你做，所以会`$_SERVER['REQUEST_URI']`。

# vbulletin - 显示来自其他数据库的数据时 vBulletin 中的错误字体

> ID：12756820
> 
> 赞同：2
> 
> 时间：2012-10-06T04:49:46.803
> 
> 标签：vbulletin

我有一个使用数据库（charset utf-8）的网站 A 和一个论坛 F（vBulletin 3.84）。我写了一个插件来显示来自数据库网站 A 的一些信息。当我激活插件时，它的错误字体如下：

```
Cao su ??ng Th�p: Chi?n l??c n�o cho t??ng lai? 
```

我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T19:03:36.300

尝试在连接到数据库后指定编码。像这样：

```
mysql_set_charset('utf8'); 
```

# c# - 防止在用户单击刷新时添加新记录

> ID：12756823
> 
> 赞同：2
> 
> 时间：2012-10-06T04:50:06.643
> 
> 标签：c#, asp.net, sql

您好，每当我按下刷新按钮时，我都会遇到问题，它会不断添加：/我该如何防止它？这是我第 2 天想出来的，但我失败了:(

```
protected void Button1_Click(object sender, EventArgs e)
        {
            //Instantiate the connection with the database 
            using (SqlConnection myConnection = new SqlConnection("user id=username;" +
                                                                  "password=password;" +
                                                                  "trusted_connection=yes;" +
                                                                  "database=DataBaseConnection;" +
                                                                  "connection timeout=30;"))
            {
                //Open the Connection object
                myConnection.Open();

                //Instantiate a SQL Command with an INSERT query
                SqlCommand myCommand = new SqlCommand("INSERT INTO BasicInfo (Firstname,Surname) Values(@a,@b);", myConnection);

                if (TextBox1.Text !=null && TextBox2.Text != null)
                {
                    //Texbox 
                    myCommand.Parameters.AddWithValue("@a", TextBox1.Text);
                    myCommand.Parameters.AddWithValue("@b", TextBox2.Text);

                    //Execute the query
                    myCommand.ExecuteNonQuery();
                }
                else
                {
                    //Code HEre?
                } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T04:58:14.160

处理此问题的一种方法是`Response.Redirect`在`Button1_Click`事件结束时返回原始页面。这`Response.Redirect`将使浏览器对页面执行 GET 请求，因此如果用户按 F5，他们将只重做 GET（而不是再次 POST 表单）。

这种方法有时被称为 Post/Redirect/Get 模式。这篇博客文章很好地描述了这种方法： [http ://blog.andreloker.de/post/2008/06/Post-Redirect-Get.aspx](http://blog.andreloker.de/post/2008/06/Post-Redirect-Get.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T05:03:50.357

防止多次处理某些内容的一种策略是为每个表单分配一个标记，作为隐藏字段。

一旦完成响应提交的表单所需的任何处理，您就可以撤销令牌。

或者，将令牌保存为处理的一部分，并在您的处理中添加检查以首先查看该令牌是否已被使用。

这有助于您可能会收到两次请求的任何情况，例如，如果用户双击按钮或链接。

# c++ - 在 C++ 中查找序列的最小/最大值/平均值

> ID：12756825
> 
> 赞同：2
> 
> 时间：2012-10-06T04:50:08.613
> 
> 标签：c++, average, max, minimum

我正在创建一个模拟水库填充的程序。到目前为止，这个过程一切顺利，除了我想做的最后一件事是获取填充水库所需的最大、最小和平均年数。我想在不使用数组的情况下这样做。我想我已经接近了，但我一定错过了一些简单的东西。原谅我，我只是在学习 C++。

```
#include <iostream>
#include <cstdlib>
#include <cmath>
#include <string>
#include <ctime>

using namespace std;

int main ()
{

    string operation;
    do{
    cout << "Using the letters 's', or 'q', please indicate if you would like to run a simulation, or quit the program: " << endl;
    cin >> operation;
    } while (operation != "s" && operation != "q");
    string reservoir_name; // Creating variables for reservoir
    double reservoir_capacity;
    double outflow;
    double inflow_min;
    double inflow_max;

    if (operation == "q")
    {
        cout << endl;
        cout << "This was a triumph . . ." << endl;
        cout << "I'm making a note here: huge success!" << endl;
        system ("pause");
        return 0;
    }

    while (operation == "s") 
        {

                string reservoir_name; // Creating variables
                double reservoir_capacity;

                double inflow_min = 0;
                double inflow_max = 0;
                double inflow_average = inflow_min + inflow_max;
                double inflow_difference = inflow_max - inflow_min;
                double inflow_threshold = .9 * inflow_average/2; // Math for acceptable flow threshold.

                cout << "What is the name of the reservoir?" << endl;
                cin.ignore ();
                getline (cin,reservoir_name); // Grab whole string for reservoir name.
                cout << "What is the capacity of the reservoir in MAF (Millions of Acre Feet)?" << endl;
                cin >> reservoir_capacity;
                cout << "What is the minimum inflow?" << endl;
                cin >> inflow_min;
                cout << "What is the maximum inflow?" << endl;
                cin >> inflow_max;
                cout << "What is the required outflow?" << endl;
                cin >> outflow;
                cout << endl;
                inflow_average = inflow_min + inflow_max;
                inflow_threshold = .9 * inflow_average/2; // Calculate threshold for too much outflow.
                cin.ignore ();

                if (outflow > inflow_threshold) // Check for unacceptable outflow levels.
                {
                    cout << "Warning! The outflow is over 90% of the average inflow. Simulation aborted. Returning to main menu." << endl << endl;
                }
                else
                {
                    const int number_simulations = 10;
                    cout << endl;
                    cout << "Reservoir name: " << reservoir_name << endl;
                    cout << "Capacity of reservoir in MAF: " << reservoir_capacity << endl;
                    cout << "Maximum inflow in MAF: " << inflow_max << endl;
                    cout << "Minimum inflow in MAF: " << inflow_min << endl;
                    cout << "Required outflow in MAF: " << outflow << endl << endl;

                    cout << "Running simulation . . ." << endl << endl;
                    srand (time(0));
                    const int sentinel = -1;
                    int minimum = sentinel;
                    int maximum = sentinel;
                    int years_total;
                    for (int i = 1; i <= number_simulations; i++) // Loop should run the filling simulation 10 times.
                    {

                        int years = 0;
                        double fill_level = 0;
                        for (years; fill_level < reservoir_capacity; years++ ) // Loop should simulate filling reservoir using random inflow values between inflow_min and inflow_max.
                        {

                            double r = rand() * 1.0 / RAND_MAX;
                            double x = inflow_min + (inflow_max - inflow_min) * r;// SHOULD be between minimum inflow and maximum inflow.
                            // cout << "Random Number x :" << x << endl; WAS USED TO CHECK IF RANDOM NUMBER WAS CHANGING
                            fill_level = fill_level + x - outflow;
                            if (fill_level < 0)
                            {
                            fill_level = 0; // Prevent fill level from going negative.
                            }
                            //cout << "Fill level is " << fill_level << endl; TO CHECK THE CHANGE IN FILL LEVEL PER ITERATION
                            if (minimum == sentinel || years < minimum) // Trying to set up the method for retrieving minimum value here. Currently returning as 0.
                            {
                                minimum = years;
                            }
                            if (maximum == sentinel || years > maximum) // Trying to set up the method for retrieving maximum value here. Currently returning as 1 less than the actual maximum.
                            {
                                maximum = years;
                            }
                        }   // Simulate the change of water level.

                        cout << "Simulation " << i << ": The reservoir took " << years << " years to fill." << endl;

                    }

                        cout << "The minimum number of years needed to fill: " << minimum << endl;
                        cout << "The maximum number of years needed to fill: " << maximum << endl;
                        cout << "The average number of years needed to fill: " << years_total / 10 << endl; // Take the running total of years over 10 simulations and divide by 10\. Currently returning as 0.
                }
                    cout << endl;
                    cout << "What would you like to do now?" << endl << endl; // Saving for later. The menu re-prompt message and code.
                    cout << "Using the letters 's', or 'q', please indicate if you would like to run a simulation or quit the program: " << endl;
                    cin >> operation;
                    if (operation == "q")
                    {
                        cout << endl;
                        cout << "This was a triumph . . ." << endl;
                        cout << "I'm making a note here: huge success!" << endl;
                        system ("pause");
                        return 0;
                    }
    }

    system ("pause");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T12:19:30.070

由于我们在谈论 C++，我觉得有必要提及可以（极大地）帮助的标准 C++ 库操作：

*   [`std::minmax_element`](http://en.cppreference.com/w/cpp/algorithm/minmax_element)返回一个包含集合的最小值和最大值的对（也有`std::min_element`和`std::max_element`可用的）。
*   [`std::accumulate`](http://en.cppreference.com/w/cpp/algorithm/accumulate), 当初始化为 0 时，返回集合元素的总和；平均不远。

当然，如果您希望同时拥有 3 个，这有点不太理想，因为这意味着两次遍历集合而不是一次。然而，它仍然是 O(N) 时间和 O(1) 空间，并且大大减少了*您*必须编写的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T05:12:57.070

您需要添加到`years_total`：

```
years_total += years; 
```

您需要将`minimum`和的设置`maximum`移到循环*之外。*`for`您可以取消使用`sentinel`不同的最小值和最大值设置。见下文：

```
#include <iostream>
#include <cstdlib>
#include <cmath>
#include <string>
#include <ctime>

using namespace std;

int main ()
{

    string operation;
    do{
    cout << "Using the letters 's', or 'q', please indicate if you would like to run a simulation, or quit the program: " << endl;
    cin >> operation;
    } while (operation != "s" && operation != "q");
    string reservoir_name; // Creating variables for reservoir
    double reservoir_capacity;
    double outflow;
    double inflow_min;
    double inflow_max;

    if (operation == "q")
    {
        cout << endl;
        cout << "This was a triumph . . ." << endl;
        cout << "I'm making a note here: huge success!" << endl;
        system ("pause");
        return 0;
    }

    while (operation == "s") 
        {

                string reservoir_name; // Creating variables
                double reservoir_capacity;

                double inflow_min = 0;
                double inflow_max = 0;
                double inflow_average = inflow_min + inflow_max;
                double inflow_difference = inflow_max - inflow_min;
                double inflow_threshold = .9 * inflow_average/2; // Math for acceptable flow threshold.

                cout << "What is the name of the reservoir?" << endl;
                cin.ignore ();
                getline (cin,reservoir_name); // Grab whole string for reservoir name.
                cout << "What is the capacity of the reservoir in MAF (Millions of Acre Feet)?" << endl;
                cin >> reservoir_capacity;
                cout << "What is the minimum inflow?" << endl;
                cin >> inflow_min;
                cout << "What is the maximum inflow?" << endl;
                cin >> inflow_max;
                cout << "What is the required outflow?" << endl;
                cin >> outflow;
                cout << endl;
                inflow_average = inflow_min + inflow_max;
                inflow_threshold = .9 * inflow_average/2; // Calculate threshold for too much outflow.
                cin.ignore ();

                if (outflow > inflow_threshold) // Check for unacceptable outflow levels.
                {
                    cout << "Warning! The outflow is over 90% of the average inflow. Simulation aborted. Returning to main menu." << endl << endl;
                }
                else
                {
                    const int number_simulations = 10;
                    cout << endl;
                    cout << "Reservoir name: " << reservoir_name << endl;
                    cout << "Capacity of reservoir in MAF: " << reservoir_capacity << endl;
                    cout << "Maximum inflow in MAF: " << inflow_max << endl;
                    cout << "Minimum inflow in MAF: " << inflow_min << endl;
                    cout << "Required outflow in MAF: " << outflow << endl << endl;

                    cout << "Running simulation . . ." << endl << endl;
                    srand (time(0));
                    int minimum = reservoir_capacity + 10;
                    int maximum = -1;
                    int years_total;
                    for (int i = 1; i <= number_simulations; i++) // Loop should run the filling simulation 10 times.
                    {

                        int years = 0;
                        double fill_level = 0;
                        for (years; fill_level < reservoir_capacity; years++ ) // Loop should simulate filling reservoir using random inflow values between inflow_min and inflow_max.
                        {

                            double r = rand() * 1.0 / RAND_MAX;
                            double x = inflow_min + (inflow_max - inflow_min) * r;// SHOULD be between minimum inflow and maximum inflow.
                            // cout << "Random Number x :" << x << endl; WAS USED TO CHECK IF RANDOM NUMBER WAS CHANGING
                            fill_level = fill_level + x - outflow;
                            if (fill_level < 0)
                            {
                                fill_level = 0; // Prevent fill level from going negative.
                            }
                            //cout << "Fill level is " << fill_level << endl; TO CHECK THE CHANGE IN FILL LEVEL PER ITERATION
                        }   // Simulate the change of water level.

                        if (years < minimum) // Trying to set up the method for retrieving minimum value here. Currently returning as 0.
                        {
                            minimum = years;
                        }
                        if (years > maximum) // Trying to set up the method for retrieving maximum value here. Currently returning as 1 less than the actual maximum.
                        {
                            maximum = years;
                        }
                        years_total += years;
                        cout << "Simulation " << i << ": The reservoir took " << years << " years to fill." << endl;

                    }

                        cout << "The minimum number of years needed to fill: " << minimum << endl;
                        cout << "The maximum number of years needed to fill: " << maximum << endl;
                        cout << "The average number of years needed to fill: " << years_total / 10 << endl; // Take the running total of years over 10 simulations and divide by 10\. Currently returning as 0.
                }
                    cout << endl;
                    cout << "What would you like to do now?" << endl << endl; // Saving for later. The menu re-prompt message and code.
                    cout << "Using the letters 's', or 'q', please indicate if you would like to run a simulation or quit the program: " << endl;
                    cin >> operation;
                    if (operation == "q")
                    {
                        cout << endl;
                        cout << "This was a triumph . . ." << endl;
                        cout << "I'm making a note here: huge success!" << endl;
                        system ("pause");
                        return 0;
                    }
    }

    system ("pause");
    return 0;
} 
```

# c++ - 为什么 Qt Creator 找到 typedef，但没有找到构建过程？

> ID：12756828
> 
> 赞同：2
> 
> 时间：2012-10-06T04:50:12.403
> 
> 标签：c++, qt, visual-c++

我正在尝试在我的 Qt Creator 项目中使用外部库。我在 Windows 上使用 Visual C++ 构建它。

我将此添加到我的 qmake 文件中：

```
# Include libspotify
INCLUDEPATH += C:\\libspotify\\include
LIBS     += -LC:\\libspotify\\lib -llibspotify 
```

然后我去使用库中的一些 typedef 结构：

```
#ifndef MAINWINDOW_H
#define MAINWINDOW_H

#include <libspotify/api.h>

#include <QMainWindow>

namespace Ui {
class MainWindow;
}

class MainWindow : public QMainWindow
{
    Q_OBJECT

public:
    explicit MainWindow(QWidget *parent = 0);
    ~MainWindow();

private:
    Ui::MainWindow *ui;

    sp_session_config spConfig;
    sp_session spSession;
};

#endif // MAINWINDOW_H 
```

现在在 IDE 编辑器中，语法高亮将 sp_session_config 和 sp_session 标记为紫色，表示编辑器可以很好地找到这些 typedef（如果它没有找到定义，它将使文本变为黑色）。

但是当我构建时，我得到了这个：

```
mainwindow.h:32: error: C2079: 'MainWindow::spSession' uses undefined struct 'sp_session' 
```

现在我知道编译器正在查找 api.h 文件，因为如果我将其更改为虚假文件名，它会吐出一个未找到文件的错误。

我究竟做错了什么？

编辑：头文件定义这样的结构：

```
extern "C" {
typedef struct sp_session sp_session; ///< Representation of a session
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T05:22:48.160

您有一个 typedef 的声明，`struct sp_session`但`struct sp_session`它是一个不完整的类型。为了让`QMainWindow`类拥有一个`sp_session`成员，类型必须是完整的（即，您需要一个还定义成员`struct sp_session`拥有什么的声明）。

如果这是不可能的，您也许可以重组事物，以便改为`class QMainWindow`具有`sp_struct*`或`sp_struct&`作为成员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T05:55:01.930

原来我真的是故意的`sp_session * spSession`！

# php - 如何知道哪个网站要求使用 php 提供的外部图像？

> ID：12756835
> 
> 赞同：1
> 
> 时间：2012-10-06T04:51:58.777
> 
> 标签：php, api, authorization, referrer

我有一个提供图像的 PHP 文件。它要求一个“api 密钥”（以限制访问）和一个字符串。然后它生成一个PNG图像并返回它。

要访问图像：

```
<img src="http://www.myserver.com/mypage.php?api=APIKEY&text=some-text-here" alt=""/> 
```

此图像将从第三方网站调用。

我需要知道与 api 密钥相关的网站是否与请求图像的网站相同。

我可以抓住推荐人，但我知道有时它可能是空的。

我如何验证这些信息？有没有更好的方法来做到这一点？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T04:54:01.713

不幸的是，`Referer`标题是您唯一可以使用的东西。是的，它可能不可靠，而且绝对很容易被欺骗。但是，它将为您提供一些保护。

# graphicsmagick - 用于 .bmp 文件的 graphicsmagick 委托

> ID：12756838
> 
> 赞同：1
> 
> 时间：2012-10-06T04:52:54.767
> 
> 标签：graphicsmagick

我正在使用 linux 发行版，根据[http://www.graphicsmagick.org/README.html#add-on-libraries-programs](http://www.graphicsmagick.org/README.html#add-on-libraries-programs)，有一些库支持其他图像格式，如 jpg、png 等。

根据[http://www.graphicsmagick.org/formats.html](http://www.graphicsmagick.org/formats.html)，graphicsmagick 支持 bmp 文件。

但是有谁知道位图（.bmp）文件使用哪个委托库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T03:47:25.630

BMP 支持内置于 GraphicsMagick。不需要附加库。

# android - 安装ADT插件后，欢迎来到Android开发不出现

> ID：12756839
> 
> 赞同：13
> 
> 时间：2012-10-06T04:53:22.980
> 
> 标签：android, eclipse, android-sdk-tools

在使用 ADT 插件安装 Eclipse 后我被卡住了。完成所有步骤后，它应该显示“Welcome to android Development”，但我只看到 Java 开发。

我的设置如下：

Java JDK 6 Eclipse Juno SR1 Android SDK 4.1- 所有默认包和 USB 驱动 ADT 插件

安装 ADT 后，Eclipse 重新启动，然后它应该显示“欢迎来到 Android 开发，但它没有

任何人都知道可能是什么问题？如果有人可以帮助我，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-06T05:06:06.350

试试这个
`Window > Customize Perspective > Menu Visibility > Expand 'File' > Expand 'New' > Tick 'Android Project'`
然后，寻找新的`Android application project`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T10:43:27.143

我在eclipse juno上遇到了同样的问题。

没有出现“欢迎页面”，我无法创建项目，编译不起作用，“图形布局”不起作用。

它已通过以下方式修复：窗口>首选项>常规>启动和关闭：检查“Android开发工具包”

重启日食。

当然你必须这样配置：Window - Preferences - Android - SDK Location and setup SDK path。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-02T17:29:39.823

我有一个类似的问题，并在[这里找到了一个非常好的解决方案](http://www.javasrilankansupport.com/2012/04/how-to-setup-android-application.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T22:04:07.863

我也有这个问题。我在 Windows XP SP3 上运行“面向移动开发人员的 Eclipse”，版本：Juno Service Release 1，内部版本 ID：20120920-0800

我担心的原因是我需要将一个新的 Android SDK 连接到我新下载的 Eclipse IDE。“我[安装 Eclipse 插件](http://developer.android.com/sdk/installing/installing-adt.html)”说明，在“配置 ADT 插件”标题下，说，“......你必须指定你的 Android SDK 目录的位置......”然后这样做

1.  在出现的“Welcome to Android Development”窗口中，选择 Use existing
2.  浏览并选择您最近下载并解压的 Android SDK 目录的位置。

我通过单击 window->preferences->Android & change sdk location 解决了我的连接问题：

*   来自：C:\adt-bundle-windows-x86\sdk [它显然感觉到了旧安装]
*   到：C:\Documents and Settings\joe\Local Settings\Application Data\Android\android-sdk

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-02T07:58:54.670

我遇到了类似的问题，但 ADT Eclipse 包中缺少 Android SDK 管理器图标。以下步骤现在显示了 Android SDK 管理器图标和“窗口”栏中的选项。

这适用于 MAC，但我认为它也应该适用于 Windows 安装。

点击：

窗口 -> 自定义透视图 -> 命令组可用性

检查“Android SDK and AVD Manager”，就是这样

多亏了 zander 的建议，我又摸索了一些，才弄清楚了这一点。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-04T12:19:30.443

就我而言，使用 Linux 我遇到了这个问题，这是因为之前安装了 ADT。删除文件`rm ~/.android -rf`并重新启动 eclipse。

# regex - JavaCC 行首

> ID：12756842
> 
> 赞同：4
> 
> 时间：2012-10-06T04:54:18.493
> 
> 标签：regex, javacc

JavaCC 是否支持像 '^' 这样的行正则表达式的乞求？

我有一个这样的令牌

```
TOKEN: { < ENTRYTK : "DATA"(" ")* > } 
```

希望它只匹配以下正则表达式

```
^"DATA"[ ]* 
```

我尝试了以下两种方法都不起作用

```
TOKEN: { < ENTRYTK : "^DATA"(" ")* > }
TOKEN: { < ENTRYTK : ^"DATA"(" ")* > } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T13:46:23.813

不，它没有。使用词法状态来确保产生式只在换行符的开头起作用。由于每个文件都以换行符开头，因此默认状态将是换行符开始的状态。

# php - 如何将数组转换为php中的变量

> ID：12756853
> 
> 赞同：1
> 
> 时间：2012-10-06T04:56:08.367
> 
> 标签：php

我想创建一个函数，该函数采用表名和具有列名和值的数组，以使用它在 MySQL 中生成 INSERT

检查我的代码。

不幸的是，这种技术不起作用，因为它总是在每个值之后生成一个逗号，这在输入数据时会产生错误。有人知道创建此功能的更好方法吗？

```
<?php
$arrayDados = array('nome' => 'Renato', 'idade' => 24, 'peso' => 36, 'mae' => 'neide');
$colunas = "";
$valores = "";
$tabela = 'cadastro';

    foreach ($arrayDados as $key => $value) {
        $colunas .=  $key . ', ';
        $valores .= $value.', ';
    }
$sql = "INSERT INTO $tabela ($colunas) VALUES ($valores)";

echo $sql;` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T04:59:18.330

看看`implode()`： http: [//php.net/manual/en/function.implode.php](http://php.net/manual/en/function.implode.php)

```
implode(',', $yourArray); 
```

但实际上，尽可能使用准备好的查询而不是这样的东西，以避免未转义数据出现问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T04:59:56.110

```
$sql = "INSERT INTO $tabela (".implode(",",array_keys($arrayDados)).") VALUES (".implode(",",array_values($arrayDados)).")"; 
```

文件：[`array_keys`](http://php.net/array-keys)- [`array_values`](http://php.net/array-values)-[`implode`](http://php.net/implode)

# android - 在 Jellybean 上强制语音输入？

> ID：12756856
> 
> 赞同：4
> 
> 时间：2012-10-06T04:57:12.963
> 
> 标签：android, android-edittext

是否可以在 Android 上强制语音输入？我不是指通过 VoiceRecognizer 意图的语音到文本，而是当您点击键盘麦克风图标时出现的新语音输入功能。

我读了这篇博文，它在 JellyBean 之前发布，但谈到了将语音输入与 IME 集成。我研究了 IME，它们的问题似乎是用户必须在系统范围内设置它们，这不适用于我的用例。

我希望能够强制语音输入；而不是弹出软键盘，我更喜欢语音键盘。

谢谢，约翰

# google-maps - 如果标记在同一位置，则将群集图标与其他群集图标区分开来

> ID：12756860
> 
> 赞同：2
> 
> 时间：2012-10-06T04:58:20.153
> 
> 标签：google-maps, google-maps-markers, markerclusterer

我在集群上做了足够多的工作。目前对我的要求是...

我已经制作了一组带有一些纬度和经度（位置）的标记，如果所有标记都是不同的，那么就不会有问题，但是如果你有任何具有相同位置的点，那么具有相同位置的点将仅以集群形式出现，而与缩放级别。因此，例如，我根据缩放级别使用两个不同的信息窗口对它们进行了区分，即，如果我们实现了我们定义的特定缩放级别，如果在该缩放级别存在集群，则显示一个信息窗口，否则将显示另一个信息窗口。这就是我到目前为止所做的。

但我想要的是“如果任何集群组的点位于相同的位置，那么我将有不同的集群组，同时取消集群，那么该特定集群组的图标必须不同”

这是我的代码：

```
 <script type ="text/javascript">
    $(document).ready(function () {
        function changeMarker(marker) {
            marker.setIcon("images/bluemarker.png");  // this function is useful for div mouseover events
        }
        var map;
        var infowindow;
        var info1;
        // this function is to evaluate the same latitude and longitude
        function sameLatLng(mc) {
            var cluster = mc.clusters_;
            // if more than 1 point shares the same lat/long
            // the size of the cluster array will be 1 AND
            // the number of markers in the cluster will be > 1
            // REMEMBER: maxZoom was already reached and we can't zoom in anymore
            if (cluster.length == 1 && cluster[0].markers_.length > 1) {
                var markers = cluster[0].markers_;
                var html = '';
                html += '<div id="infoWin">';
                html += '<h3>' + markers.length + ' properties at this location of same latitude and longitude:</h3>';
                html += '<div class="tab_content">';
                html += '<ul class="addrlist">';
                for (var i = 0; i < markers.length; i++) {
                    html += '<li><a id="p' + markers[i].title + '" href="javascript:;" rel="' + i + '">' + markers[i].title + '</a></li>';
                }
                html += '</ul>';
                html += '</div>';
                html += '</div>';
                // I'm re-using the same global InfoWindow object here
                infowindow.close(map);
                $(html).appendTo('body');
                infowindow = new google.maps.InfoWindow();
                infowindow.setContent(document.getElementById('infoWin'));
                infowindow.open(map, markers[0]);
                // bind a click event to the list items to popup an InfoWindow
                $('ul.addrlist li').click(function () {
                    alert("you clicked ")
                });
            }
        }
        function InitializeMap() {
            // this function is for basic functionalities of the map
            var myOptions =
            {
                zoom: 5,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            map = new google.maps.Map(document.getElementById("map"), myOptions);
        }

        function markicons() {
            // this function is to create markers 
            InitializeMap();
            var ltlng = [];
            var markers = [];

            var contentString = '<div id="maincontent"  >' +
                                    '<a href="http://www.google.com" target="_blank">'
                                        + '<img src="images/1.jpg" >'
                                        + '<span>'
                                            + 'Description for img01'
                                        + '</span>'
                                    + '</a>'
                                    + '<a href="http://www.edaboard.com" target="_blank">'
                                        + '<img src="images/2.jpg" >'
                                        + '<span>'
                                            + 'Description for img02'
                                        + '</span>'
                                    + '</a>'
                                    + '<a href="http://www.allaboutcircuits.com" target="_blank">'
                                        + '<img src="images/3.jpg" >'
                                        + '<span>'
                                            + 'Description for img03'
                                        + '</span>'
                                    + '</a>'
                                    + '<a href="http://www.hiddenbrains.org" target="_blank">'
                                        + '<img src="images/4.jpg" >'
                                        + '<span>'
                                            + 'Description for img04'
                                        + '</span>'
                                    + '</a>'
                                    + '<a href="http://www.hiddenbrains.com" target="_blank">'
                                        + '<img src="images/5.jpg" >'
                                        + '<span>'
                                            + 'Description for img05'
                                        + '</span>'
                                    + '</a>'
                                    + '<a href="http://www.google.com" target="_blank">'
                                        + '<img src="images/6.jpg" >'
                                        + '<span>'
                                            + 'Description for img06'
                                        + '</span>'
                                    + '</a>'
                                   + '</div>'
            //  fixed positioned markers
            ltlng.push(new google.maps.LatLng(18.76, 83.28));
            ltlng.push(new google.maps.LatLng(17.75, 83.29));
            ltlng.push(new google.maps.LatLng(17.76, 83.30));
            ltlng.push(new google.maps.LatLng(18.76, 83.30));
            ltlng.push(new google.maps.LatLng(19.76, 83.30));
            ltlng.push(new google.maps.LatLng(20.76, 83.30));
            ltlng.push(new google.maps.LatLng(18.76, 83.30));
            ltlng.push(new google.maps.LatLng(22.76, 83.30));
            ltlng.push(new google.maps.LatLng(23.76, 83.30));
            ltlng.push(new google.maps.LatLng(26.76, 83.30));
            ltlng.push(new google.maps.LatLng(26.76, 83.30));
            ltlng.push(new google.maps.LatLng(26.76, 83.30));
            ltlng.push(new google.maps.LatLng(26.76, 83.30));
            map.setCenter(ltlng[0]);
            for (var i = 0; i <= ltlng.length; i++) {

                marker = new google.maps.Marker({
                    map: map,
                    position: ltlng[i],
                    draggable: true,
                    icon: "images/greymarker.png",
                    animation: google.maps.Animation.DROP,
                    title: "this is " + i + "marker"

                });
                (function (i, marker) { // actually this is the call back function after creation of one marker this will be called
                    if (!infowindow) { // initialiazation of window
                        infowindow = new google.maps.InfoWindow();
                    }
                    google.maps.event.addListener(marker, 'click', function () {
                        if (!infowindow) {
                            infowindow = new google.maps.InfoWindow();
                        }
                        infowindow.setContent(contentString);
                        infowindow.open(map, marker);
                        marker.setIcon("images/bluemarker.png");
                    });

                    google.maps.event.addListener(marker, 'mouseout', function () {

                        if (!infowindow) {
                            infowindow = new google.maps.InfoWindow();
                        }
                        // infowindow.close(map, marker);
                        marker.setIcon("images/greymarker.png");
                    });

                })(i, marker);
                markers.push(marker); // to store the present marker  in the markers array
            }
            var markerCluster = new MarkerClusterer(map, markers, { minimumClusterSize: 2, maxZoom: null, zoomOnClick: false, gridSize: 100 });
            // we can use the maximum zoom option for the same location of latitude and longitude conflict where if zoom > maxZoom then the differen popups with the same location points are highlighted
            // this is triggered when the content of the infowindow that is if the content in the infowindow string  is ready it is fired
            markerCluster.onClick = function () { return sameLatLng(markerCluster); }

            google.maps.event.addListener(infowindow, 'domready', function () {
            // this is the jquery plugin to have a slide show in the infowindow according to the content string
                $("#maincontent").coinslider({

                    width: 500, // width of slider panel    
                    height: 290, // height of slider panel  
                    spw: 10, // squares per width   
                    sph: 10, // squares per height
                    delay: 3000, // delay between images in ms
                    sDelay: 30, // delay beetwen squares in ms
                    opacity: 0.7, // opacity of title and navigation
                    titleSpeed: 500, // speed of title appereance in ms
                    effect: 'random', // random, swirl, rain, straight
                    navigation: true, // prev next and buttons
                    links: true, // show images as links
                    hoverPause: true // pause on hover

                });
            });
            google.maps.event.addListener(markerCluster, "mouseover", function (c) {
                alert("mouseover: ");
            });

            google.maps.event.addListener(markerCluster, "click", function (c) {
                alert("hello cluster");
                var info = new google.maps.MVCObject;
                info.set('position', c.center_);
                var markers_res = c.getMarkers();

                var titles = "";
                //Get all the titles
                for (var i = 0; i < markers_res.length; i++) {
                    titles = titles + markers_res[i].getTitle() + "\n" + ",";
                }
                var infowindow = new google.maps.InfoWindow();
                infowindow.close();

                infowindow.setContent(titles);
                infowindow.open(map, info);
            })
        }
        window.onload = markicons;

    });

</script>
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server" >
              <div id="map-container"><div id="map"></div></div> 
</asp:Content> 
```

任何建议都非常感谢.......

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T03:55:45.387

终于得到了答案，我自己解决上述问题的唯一方法是更改​​js文件并使用现有函数使用自己的逻辑............：D

# graph - 图中的匹配

> ID：12756861
> 
> 赞同：3
> 
> 时间：2012-10-06T04:58:23.007
> 
> 标签：graph, matching

如何找到最大基数匹配为 n/4 的图？或者说n/3？这里，n 表示图中的顶点数。连通图可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T18:10:53.153

最简单的例子是[完全二分图 K_m,n](http://en.wikipedia.org/wiki/Complete_bipartite_graph)。要将匹配大小调整为某个比例 ( `|V|/k`)，`n`应该是`(2*k-1)*m`，从那时起`|V| = n + m = 2*k*m`，匹配大小是`2*m`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T13:30:38.110

您可以根据[Tutte Berge 公式](http://en.wikipedia.org/wiki/Tutte%E2%80%93Berge_formula)构建此类图表。使用它，您可以构建一个最大匹配大小为 n/4 的图形，如下所示。令 V 为图中的顶点集，令 U 为顶点的任何子集。找到一个数 k 使得 k-|U| >= |V|/2。从 VU 构造奇数大小的组件 C1、C2、...、Ck（彼此不相交），并将每个 Ci 的任意一组边添加到 U 的顶点。

请注意，C1,...,Ck 应该是我们在删除 U 时得到的奇数大小的组件。 {U, C1, ... ,Ck} 中的其他顶点可以按照上述约束以任何方式连接。

# node.js - Meteor Mongo 插入失败——访问被拒绝

> ID：12756863
> 
> 赞同：12
> 
> 时间：2012-10-06T04:58:55.787
> 
> 标签：node.js, mongodb, meteor, database

第一个插入工作正常，但第二个在控制台中给出“插入失败：403 - 访问被拒绝”。自动订阅已启用，我在 auth 分支上。如何设置我的代码，以便我有一个客户端可以写入的服务器 MongoDB？

```
People = new Meteor.Collection('people'); 

if (Meteor.is_server) {
People.insert({name: 'Bob'});
}
if (Meteor.is_client) {
People.insert({name: 'Bob'});
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-09T00:02:54.407

因为您正在使用 auth，所以您必须允许或拒绝尝试执行插入、更新、删除和提取的客户端。要解决此特定问题，您必须添加 Collection.allow() 以让客户端的插入工作。

```
if(Meteor.is_server) {

  People.allow({
    'insert': function (userId,doc) {
      /* user and doc checks ,
      return true to allow insert */
      return true; 
    }
  });

} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-07-16T12:09:47.833

在 Collection People 中使用方法 allow()。此方法分配访问 CRUD。

```
function adminUser(userId) {
  var adminUser = Meteor.users.findOne({username:"admin"});
  return (userId && adminUser && userId === adminUser._id);
}
Lugares.allow({
  insert: function(userId, lugar){
    return adminUser(userId);
  },
  update: function(userId, lugares, fields, modifier){
    return adminUser(userId);
  },
  remove: function (userId, docs){
    return adminUser(userId);
  }
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-11-18T19:23:34.113

**从项目中删除不安全**的包后，我遇到了这个错误。

```
meteor remove insecure 
```

以下解决了我的问题。

```
Posts = new Meteor.Collection('posts');

Posts.allow({
  insert: function(userId, doc) {
    // only allow posting if you are logged in
    return !! userId;
  }
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-08-20T13:29:40.547

如果你只有 simple-todos 教程之类的测试项目，你可以通过添加不安全的包来解决它

```
meteor add insecure 
```

# python - python - 如何在Python中的2个数字之间生成给定小数点的随机数？

> ID：12756866
> 
> 赞同：7
> 
> 时间：2012-10-06T04:59:01.307
> 
> 标签：python, random

我想在 min_time 和 m_time 之间生成一个小数点后 1 位的随机数，比如 0.3

现在我有一个非常古怪的解决方案

```
m_time = 0.5
min_time = 0.2
float(randint(int(min_time * 10), int(m_time * 10))) / 10 
```

它有效，但我想知道是否有更好的解决方案？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-06T09:20:29.100

我认为首选的方法是在和之间[统一](http://docs.python.org/library/random.html#random.uniform)选择一个浮点数，然后使用内置的[舍](http://docs.python.org/library/functions.html#round)入函数（到小数点后一位）：`min_time``max_time`

```
round(random.uniform(min_time, max_time), 1) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-06T05:29:29.553

```
import decimal
import random 
```

-- i 和 j 像 2 和 3 一样属于你的极限

```
decimal.Decimal('%d.%d' % (random.randint(0,i),random.randint(0,j))) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-06T05:15:48.990

我认为你所拥有的还不错。虽然你也可以这样写

```
0.1*randint(int(min_time * 10), int(m_time * 10)) 
```

另一个明显的选择是

```
round(random.random()*(m_time-min_time)+min_time, 1) 
```

# facebook-apps - 竞争的社交网络如何获得通过 Facebook 应用程序导出数据的许可？

> ID：12756868
> 
> 赞同：2
> 
> 时间：2012-10-06T04:59:14.703
> 
> 标签：facebook-apps

它在应用协议中说，竞争的社交网络必须获得许可才能将用户数据导出到他们的网站。我注意到像 Pinterest 和 Myspace 等网站可以这样做，他们必须获得许可吗？如何做到这一点？

-韦恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T05:03:24.507

[http://www.facebook.com/help/?page=220217228006012](http://www.facebook.com/help/?page=220217228006012)

> 在帮助搜索中输入您的问题，并从我们的常见问题数据库中获得答案。如果您无法按照我们的说明解决您的问题，我们将为您提供自定义表格，以便与我们联系以获得进一步的支持。

我已经通过这种方式联系了他们以解决其他问题，并最终得到了答复。它也可能对你有用。我不知道直接的电子邮件地址。

这里还有一个关于联系 Facebook 的相当模糊的部分：http: [//developers.facebook.com/policy/contact/](http://developers.facebook.com/policy/contact/)

# wordpress - 为什么我使用 wordpress 调用未定义函数 get_header() 时出错？

> ID：12756870
> 
> 赞同：1
> 
> 时间：2012-10-06T04:59:17.560
> 
> 标签：wordpress

我使用 21 作为我的主题，并在 results.php 中创建了一个名为 results.php 的 PHP 页面，这是我的代码：

```
 <?php

get_header(); ?>

<?php get_footer(); ?> 
```

从我的 index.php：

```
 <?php get_header(); ?>
<a href="wp-content/themes/twentyeleven/result.php">Main</a>
<?php get_footer(); ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T05:06:28.167

如果您在 wordpress 上制作自定义页面，

然后您必须将模板名称设置到您的文件中，例如`result.php`：

```
<?php
    /* Template Name: Result */
    get_header();

    // Rest Stuff for result.php

    get_footer();
?> 
```

希望这能解决你的问题..

**更新：**请不要使用您在 index.php 文件中给出的直接链接，例如

`<a href="wp-content/themes/twentyeleven/result.php">Main</a>`

因为您是直接调用，但最好的方法是使用后端`result.php`的名称创建一个页面，并为该特定页面选择主题。`Main``Result`

# php - 如何将 latin1_swedish_ci 数据转换为 utf8_general_ci？

> ID：12756877
> 
> 赞同：18
> 
> 时间：2012-10-06T05:00:28.543
> 
> 标签：php, mysql, character-encoding

我有一个 MySQL 数据库，所有表字段排序为

```
latin1_swedish_ci 
```

它已经存储了近 1000 条记录，现在我想将所有这些数据转换为

```
utf8_general_ci 
```

这样我就可以显示任何语言内容。我已经将字段排序规则更改为**utf8_general_ci**但这不会将所有旧记录转换**为****utf8_general_ci**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-07-15T10:31:29.977

一件有趣的事。

如果表中的字符集采用正确的编码，Anshu 建议的 CONVERT TO CHARSET 和 CONVERT()/CAST() 将可以正常工作。

如果由于某种原因 latin1 列包含 utf8 文本，则 CONVERT() 和 CAST() 将无法提供帮助。我用那个设置“弄乱”了我的数据库，所以花更多的时间来解决这个问题。

要解决这个问题，除了字符集转换之外，还需要一些练习。

1.  “困难的一个”是从转储中重新创建数据库，该数据库将通过控制台进行转换
2.  “简单一”是逐行或逐表转换：

```
INSERT INTO UTF8_TABLE (UTF8_FIELD)
SELECT convert(cast(convert(LATIN1_FIELD using latin1) as binary) using utf8)
  FROM LATIN1_TABLE;
```

基本上，这两种情况都会将字符串处理为原始符号，然后再进行正确的编码，这不会发生在`simple convert(field using encoding) from table;`命令中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-07-24T10:59:04.117

导出您的表。放下桌子。在编辑器中打开导出文件。在创建表结构的位置手动编辑它。

旧查询：

```
CREATE TABLE `message` (
  `message_id` int(11) NOT NULL,
  `message_thread_id` int(11) NOT NULL,
  `message_from` int(11) NOT NULL,
  `message_to` int(11) NOT NULL,
  `message_text` longtext NOT NULL,
  `message_time` varchar(50) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

新查询：（假设您要更改 message_text 字段。）

```
CREATE TABLE `message` (
  `message_id` int(11) NOT NULL,
  `message_thread_id` int(11) NOT NULL,
  `message_from` int(11) NOT NULL,
  `message_to` int(11) NOT NULL,
  `message_text` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `message_time` varchar(50) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

保存文件并导入回数据库。

# c# - formatException 未处理

> ID：12756879
> 
> 赞同：2
> 
> 时间：2012-10-06T05:00:39.353
> 
> 标签：c#

我正在使用 C# windows application 2010 express。在这里，我有 3 个文本框，用于显示总费用、已付金额、应付金额。总费用应从数据库中获取，支付的金额应由用户输入，到期金额应由系统计算。这是我的场景。我完成了第一部分，这意味着我填写了总费用栏。但第 2 和第 3 部分给了我一个名为“formatException 未处理输入字符串的格式不正确”的异常。实际上，当我删除我输入的支付金额时，我遇到了这个错误。这意味着在实际使用中，如果用户输入了错误的值，我将无法删除该值。所以请仔细阅读我的代码并更正它。

这是我的代码：-

```
 private void textBox4_TextChanged(object sender, EventArgs e)
    {
        textBox5.Text = "";
        int due = 0;
        due = Convert.ToInt32(textBox3.Text) - Convert.ToInt32(textBox4.Text);
        if (textBox5.Text == null)
        {
            textBox5.Text = Convert.ToString(0);
        }
        else
        {

            textBox5.Text = Convert.ToString(due);
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T05:10:30.650

我建议使用`SimpleType.TryParse`

```
 decimal amount,fees,due;

 decimal.TryParse(textBox3.Text,out amount);
 decimal.TryParse(textBox4.Text,out fees);

 due = amount - fees;

 textBox5.Text= due.ToString("N"); 
```

如果*字符串*转换成功，方法`SimpleType.TryParse`返回；否则返回。`true`*`false`*

 *例如，

```
if(decimal.TryParse(textBox3.Text,out amount))
  //Valid
else
 //Invalid input 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T05:02:48.737

当您将空字符串或非数字字符串传递给您时，`Convert.ToInt32`您将得到格式异常。字符串应该是数字。我认为 textbox3 或 textbox4 上的文本要么有空字符串，要么不是数字

改用 Int32.TryParse [http://msdn.microsoft.com/en-us/library/f02979c7.aspx](http://msdn.microsoft.com/en-us/library/f02979c7.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T05:11:58.767

你应该只允许数值`textBox3`，`textBox4`因为`Convert.ToInt32`只需要数值。

我建议您使用**`Int32.Parse()`**，因为*它可以让您更细粒度地控制用户输入无效输入时的情况。*

并且**`TryParse`将是最好的，因为它总是自己处理异常。**

```
due = Int32.TryParse(textBox3.Text, out amount) - 
      Int32.TryParse(textBox4.Text, out fees); 
```*

# applescript - Applescript 在 iTunes 中超时

> ID：12756880
> 
> 赞同：1
> 
> 时间：2012-10-06T05:00:40.200
> 
> 标签：applescript, itunes

我写了一个简单的applescript来自动将文件添加到iTunes中并填充元数据。当我直接从编辑器运行它时，它可以工作，但从 iTunes 运行它，我会得到“AppleEvent Timed Out”。

这是代码：

```
set mainFolder to choose folder

tell application "Finder"
    -- Loop through all shows
    set shows to every folder of mainFolder
    repeat with show from 1 to count of shows

        -- Set Show Name
        set showName to name of item show of shows

        -- Set Artist
        display dialog "Who is the artist for " & showName & "?" default answer showName
        set showArtist to the text returned of the result

        -- Set Genre
        display dialog "What is the genre for " & showName & "?" default answer ""
        set showGenre to the text returned of the result

        -- Loop through all season
        set seasons to every folder in item show of shows
        repeat with season from 1 to count of seasons

            set seasonName to name of item season of seasons

            -- Set Season Number
            set seasonNumber to text 1 thru ((offset of "-" in seasonName) - 2) of seasonName as integer

            -- Set Year
            display dialog "What year was Season " & seasonNumber & " of " & showName & " in?" default answer "2012"
            set showYear to the text returned of the result

            -- Set Season Name      
            set seasonName to text ((offset of "-" in seasonName) + 2) thru ((offset of "." in seasonName) - 1) of seasonName as text

            -- Set Total Episodes in Season
            set totalEpisodes to count of every file in item season of seasons

            -- Loop through all episodes
            set episodes to every file in item season of seasons
            repeat with episode from 1 to count of episodes

                set episodeName to name of item episode of episodes

                -- Set Episode Number
                set episodeNumber to text 1 thru ((offset of "-" in episodeName) - 2) of episodeName as integer

                -- Set Episode Name
                set episodeName to text ((offset of "-" in episodeName) + 2) thru ((offset of "." in episodeName) - 1) of episodeName as text

                tell application "iTunes"
                    set newAddition to (add (item episode of episodes as alias))
                    tell newAddition
                        set video kind to TV show
                        set name to episodeName
                        set album to seasonName
                        set track number to episodeNumber
                        set track count to totalEpisodes
                        set disc number to "1"
                        set disc count to "1"
                        set show to showName
                        set season number to seasonNumber
                        set episode number to episodeNumber

                        -- Manual Entries
                        set artist to showArtist
                        set genre to showGenre
                        set year to showYear

                        -- Change episode ID based on season and episode number
                        if (seasonNumber < 10) then
                            if (episodeNumber < 10) then
                                set episode ID to ("S0" & seasonNumber as text) & "E0" & episodeNumber as text
                            else
                                set episode ID to ("S0" & seasonNumber as text) & "E" & episodeNumber as text
                            end if
                        else
                            if (episodeNumber < 10) then
                                set episode ID to ("S" & seasonNumber as text) & "E0" & episodeNumber as text
                            else
                                set episode ID to ("S" & seasonNumber as text) & "E" & episodeNumber as text
                            end if
                        end if

                    end tell -- End newAddition
                end tell -- End iTunes
            end repeat -- End Episode Repeat
        end repeat -- End Season Repeat
    end repeat -- End Show Repeat
end tell -- End Finder Repeat 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T07:12:49.393

假设您在计算文件名的偏移量和不同组成部分时没有任何错误，代码本身似乎是合理的。但是，我可以看到 2 个可能的错误来源，可以解决您的问题。

首先，你的 iTunes 告诉你的 Finder 里面的代码块告诉代码块。本质上，您是在告诉 Finder 告诉 iTunes 做某事。这是可能的错误的来源。您应该将您的告诉块彼此分开。比如你有这个...

```
tell application "Finder"
    -- do something
    tell application "iTunes"
        -- do something
    end tell
end tell 
```

当你应该有这样的...

```
tell application "Finder"
    -- do something
end tell

tell application "iTunes"
    -- do something
end tell 
```

其次，您的“episode id”代码中的括号有误。比如这个...

```
("S0" & seasonNumber as text) 
```

应该是这个...

```
"S0" & (seasonNumber as text) 
```

因此，我已将 iTunes 的内容分离到一个子例程中并修复了括号。请注意，我尚未测试此代码。我想我将所有正确的变量都传递给了子程序，但我不能确定。我希望这有帮助。

```
set mainFolder to choose folder

tell application "Finder"
    -- Loop through all shows
    set shows to every folder of mainFolder
    repeat with show from 1 to count of shows

        -- Set Show Name
        set showName to name of item show of shows

        -- Set Artist
        display dialog "Who is the artist for " & showName & "?" default answer showName
        set showArtist to the text returned of the result

        -- Set Genre
        display dialog "What is the genre for " & showName & "?" default answer ""
        set showGenre to the text returned of the result

        -- Loop through all season
        set seasons to every folder in item show of shows
        repeat with season from 1 to count of seasons

            set seasonName to name of item season of seasons

            -- Set Season Number
            set seasonNumber to text 1 thru ((offset of "-" in seasonName) - 2) of seasonName as integer

            -- Set Year
            display dialog "What year was Season " & seasonNumber & " of " & showName & " in?" default answer "2012"
            set showYear to the text returned of the result

            -- Set Season Name      
            set seasonName to text ((offset of "-" in seasonName) + 2) thru ((offset of "." in seasonName) - 1) of seasonName as text

            -- Set Total Episodes in Season
            set totalEpisodes to count of every file in item season of seasons

            -- Loop through all episodes
            set episodes to every file in item season of seasons
            repeat with episode from 1 to count of episodes

                set episodeName to name of item episode of episodes

                -- Set Episode Number
                set episodeNumber to text 1 thru ((offset of "-" in episodeName) - 2) of episodeName as integer

                -- Set Episode Name
                set episodeName to text ((offset of "-" in episodeName) + 2) thru ((offset of "." in episodeName) - 1) of episodeName as text

                my addEpisodeToItunes((item episode of episodes) as alias, seasonName, seasonNumber, episodeName, episodeNumber, totalEpisodes, showName, showArtist, showGenre, showYear)
            end repeat -- End Episode Repeat
        end repeat -- End Season Repeat
    end repeat -- End Show Repeat
end tell -- End Finder Repeat

on addEpisodeToItunes(theEpisode, seasonName, seasonNumber, episodeName, episodeNumber, totalEpisodes, showName, showArtist, showGenre, showYear)
    tell application "iTunes"
        set newAddition to add theEpisode
        tell newAddition
            set video kind to TV show
            set name to episodeName
            set album to seasonName
            set track number to episodeNumber
            set track count to totalEpisodes
            set disc number to "1"
            set disc count to "1"
            set show to showName
            set season number to seasonNumber
            set episode number to episodeNumber

            -- Manual Entries
            set artist to showArtist
            set genre to showGenre
            set year to showYear

            -- Change episode ID based on season and episode number
            if (seasonNumber < 10) then
                if (episodeNumber < 10) then
                    set episode ID to "S0" & (seasonNumber as text) & "E0" & (episodeNumber as text)
                else
                    set episode ID to "S0" & (seasonNumber as text) & "E" & (episodeNumber as text)
                end if
            else
                if (episodeNumber < 10) then
                    set episode ID to "S" & (seasonNumber as text) & "E0" & (episodeNumber as text)
                else
                    set episode ID to "S" & (seasonNumber as text) & "E" & (episodeNumber as text)
                end if
            end if

        end tell -- End newAddition
    end tell -- End iTunes
end addEpisodeToItunes 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T22:58:11.023

这是我解决它的方法：

另存为应用程序而不是脚本。

我从这里得到了解决方案： [http ://forums.ilounge.com/applescripts-itunes-mac/245120-need-help-add-tracks-files-via-applescript.html](http://forums.ilounge.com/applescripts-itunes-mac/245120-need-help-add-tracks-files-via-applescript.html)

我不知道为什么会这样，我试过使用 try-catch，超时......仍然没有工作。它可以作为一个应用程序工作吗？！

# javascript - 非常敏感的鼠标退出行为

> ID：12756881
> 
> 赞同：3
> 
> 时间：2012-10-06T05:00:40.603
> 
> 标签：javascript, jquery, html, css

我想通过“检查可用性”按钮设计类似于在[http://www.thedana.com/](http://www.thedana.com/)上可以看到的东西- 我使用了 w3school.com 的 jquery.js 文件并得到了以下内容： http: [//quaaoutlodge.com/drupal-7.14/](http://quaaoutlodge.com/drupal-7.14/)（立即预订标签）。现在您意识到，它非常敏感，有时会在不应该的时候淡出（当光标仍在字段中间时）我怎样才能使它更好，更用户友好？

谢谢！罗恩

更新：我试图实现它，但它并不完全有效，因为我想在将鼠标悬停在“书”上时显示我的“淡化”div，并在光标向下移动时保持它，在“淡化”上我该如何完成这个? 网址：http://quaaoutlodge.com/drupal-7.14/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T05:31:10.623

放在`div#fade`里面`div#book`，那将解决你一半的问题。您还必须针对此更改调整 CSS。

对学习者来说另一个非常重要的一点是，jQuery 提供了不显眼的跨浏览器事件侦听器附加。这意味着，html as 中的内联 JS`onmouseenter="handler()"`不仅是不必要的而且在技术上很丑陋——结构与行为的混合——它还用函数名污染了全局范围。

[这就是人们](http://w3fools.com/)为W3School 做广告的原因之一。

但回到主题，这里有一个使用[DOM Ready 处理程序](http://api.jquery.com/ready/)和[悬停](http://api.jquery.com/hover/)处理程序的解决方案：

[**小提琴**](http://jsfiddle.net/bk97b/2/)

**HTML**

```
<div id="book">
    <a href="/drupal-7.14//?q=book">Book Now</a>
    <div id="fade">TEST</div>
</div>​ 
```

**JS**

```
​$(function() {
    var fade = $('#fade');
    $('#book').hover(function() {
        fade.fadeIn();
    }, function() {
        fade.fadeOut();
    });
}); 
```

同样，您将不得不重新设计 CSS `position:absolute`，从`#fade`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T05:11:21.767

您可以尝试使用 jquery 的 .mouseleave 而不是通用的 onmouseout 吗？

[http://api.jquery.com/mouseleave/](http://api.jquery.com/mouseleave/)

“mouseleave 事件与 mouseout 处理事件冒泡的方式不同。如果在此示例中使用 mouseout，则当鼠标指针移出 Inner 元素时，将触发处理程序。这通常是不受欢迎的行为。mouseleave 事件另一方面，只有当鼠标离开它所绑定的元素而不是后代元素时才会触发它的处理程序。所以在这个例子中，当鼠标离开外部元素而不是内部元素时触发处理程序。”

# python - 无法在 mac OSX 山狮上导入 numpy

> ID：12756885
> 
> 赞同：1
> 
> 时间：2012-10-06T05:01:29.230
> 
> 标签：python, macos, numpy, matplotlib

我已经查看了所有其他类似的问题，它们似乎都是这个问题的轻微变化，我无法为我的问题提取答案。

```
>>> import numpy
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named numpy 
```

所以我用自制软件将它安装到 site-packages 目录中。此时，导入 numpy 起作用了。但是当我在下载 matplotlib 时遇到问题时，我下载了原始的 python 2.7，而不是 Mac 上的那个。现在我无法导入模块，除非我在 numpy 目录中，并且当我尝试构建 matplotlib 时它找不到 numpy（这是一个依赖项）。关于什么可能是错误的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T05:20:44.450

Python 的第三方附加组件（“发行版”），例如`numpy`，安装到 Python 的特定实例。在 OS X 10.8 (Mountain Lion) 上，Apple 提供的 Python 2.7 预装了一个版本`numpy`。您可以使用以下命令访问该 python：

```
/usr/bin/python2.7 
```

我不确定您所说的“下载了原始的python2.7”是什么意思，但是如果您安装了另一个版本的python，则需要安装另一个版本的`numpy`使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T05:16:32.827

[如果您的 Numpy 在 python 2.7 安装期间没有安装，那么您可以从这个链接安装链接](http://www.iram.fr/IRAMFR/GILDAS/doc/html/gildas-python-html/node38.html)下载 numpy 并轻松安装

# ios6 - 设置生成系 统的最佳方法？

> ID：12756886
> 
> 赞同：0
> 
> 时间：2012-10-06T05:01:50.617
> 
> 标签：ios6, cocos2d-iphone, xcode4.5

我想知道最好的方法是什么。我想要 2 个在不同时间从屏幕顶部（风景）落下的精灵，一旦它们到达底部，它们会立即在顶部的新随机 x 坐标处重生，并且永远持续下去。可以做到这一点的最好、最干净的方法是什么？

# mysql - 将持久化对象委托给 Redis，使用 MySQL 回退

> ID：12756888
> 
> 赞同：1
> 
> 时间：2012-10-06T05:02:04.377
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3, redis, ruby-on-rails-3.2

我有这个想法，我想由一些了解 Redis 和/或 MySQL 的人来运行它，这样你就可以告诉我，即使考虑到这一点，我也很愚蠢。

我想知道将持久对象存储在 Redis 中以供读取会产生什么影响，如果 Redis 键不存在，则回退到数据库数据。为简洁起见，这里有一个（非常）简单的例子来说明我的想法：

```
class ActiveRecord::Base
  def self.cache_or_query(id)
    Rails.cache.fetch("#{self.name}:#{id}") || begin
      record = self.find(id)
      Rails.cache.write("#{record.class}:#{record.id}", record)
      record
    end
  end
end

person = Person.create(name: "Tom Hanks", email: "thanks@gmail.com")
Person.cache_or_query(person.id) #=> query database, cache gets written, get Person object
Person.cache_or_query(person.id) #=> query Redis, get Person object 
```

然后在 CMS 中，保存记录只会使其缓存过期（或者可能用新数据覆盖它）。

所以，我的问题是：在良好的服务器条件下，Redis 能否胜过 MySQL（或任何数据库）？我的目标是减少在每个页面上执行的 SQL 查询的数量，我希望我可以委托给 Redis，我相信 Redis 可以更快地检索数据。不管反应如何，我都会对此进行基准测试，但无论如何我很想听听其他人的意见，更重要的是，如果这个设置在生产中的高活跃度网站上完全失败，该怎么办。

我承认我不是 MySQL 或 Redis 内部的专家，所以我希望得到一些有见地的答案。

谢谢！

**更新**Benchmark 的结果是它似乎是一个微不足道的性能提升：每 10,000 次查询不到 1 秒：[https ://gist.github.com/3844026](https://gist.github.com/3844026)

这值得么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T05:42:09.617

MySQL 已经在内存中有它的工作集。当您使用过滤器等进行复杂选择时，您不会从 Redis 获得任何东西。您只会将 Redis 用于单个对象。

此外，ActiveRecord 已经缓存了现有对象的关联......

这完全不值得。

# backbone.js - 渲染多个模型的主干视图

> ID：12756894
> 
> 赞同：1
> 
> 时间：2012-10-06T05:03:54.257
> 
> 标签：backbone.js, coffeescript

我正在玩 Backbone，并且在我的列表视图中让一个模型额外渲染了 4 次。

我在调用 history.start 之前创建并获取集合，但我认为这与它无关。

我正在调用一个仅在 json 中返回 2 个模型的 api。渲染的第一个模型只显示一次，下一个连续显示 5 次。每次都会发生这种情况。

这是我的代码。

[https://gist.github.com/3843944](https://gist.github.com/3843944)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T13:41:54.467

在第 66 行，你有这一行：

```
@$("div").append(view.render().el) 
```

每次呈现服务提供者时都会调用它。由于通用选择器, `div`，我认为它选择`div`了元素中存在的每一个。当您添加第一个条目时，唯一`div`存在的是`<div class='providers'>`. 但是，当它呈现第二个条目时，它会选择该条目以及由第一个服务提供商创建并附加到模板的`div`所有 new 。`div`

尝试这样的事情：

```
@$el.append(view.render().el) 
```

# php - mysql UPDATE不更新mysql表行

> ID：12756897
> 
> 赞同：0
> 
> 时间：2012-10-06T05:04:40.493
> 
> 标签：php, mysql

这是我第一次使用 UPDATE (mysql) 此代码不会将更新发送到我的 mysql 数据库/表/行。我在 php.net 上花了几个小时，但从我目前的水平或 php 知识来看，这是正确的，因为我错了，所以我很笨 =}。我在 mysql 上打开了登录 - 没什么用

这是来自 ZEND 服务器：所以它似乎正在传递，但它没有在 mysql 数据库中更新。函数名称：mysql_query 函数参数：'UPDATE ads SET adcode = \'7000sbjhbjhbhjb\' WHERE ads_ID = 8'

非常感谢任何指针/帮助。

```
<?php
require 'config.php';

// Report all Errors
//error_reporting(-1);
//ini_set('display_errors','On');

//connect to DB
mysql_connect("$host", "$db_user", "$db_password");
mysql_select_db("$db_name"); 
    $query = "SELECT * FROM ads";
    $result = mysql_query($query);
    $num = mysql_numrows($result);

echo "<h1><center>AD's Currently Available</center></h1><br /><br />";

$i=0;
while ($i < $num) {
    $ID = mysql_result($result,$i,"ID");
    $adname = mysql_result($result,$i,"adname");
    $currentadcode = mysql_result($result,$i,"adcode");

// Delete AD item by ID number  
$action = (isset($_REQUEST['action']));
if ($_GET['action'] == "deletead") {  // remove AD
    mysql_query("DELETE FROM ads where ID = '$_GET[IDnum]'");
    $i=$i++;
    header("Location: " . $_SERVER['PHP_SELF']);
}

$letknown = "<b>AD removed</b><br />";

**// Edit AD code
if (isset($_POST['editad' . $ID])) {
    $newadcode = mysql_real_escape_string($_POST['adcode' . $ID]);
    $doedit = "UPDATE ads SET adcode = '" . $newadcode . "' WHERE ads_ID = " . $ID;
    $updatead = mysql_query($doedit);
    header("Location: " . $_SERVER['PHP_SELF']);**

}
$letknown = "<b>Ad Edited</b><br />";

    echo "<b>$ID : $adname</b><br /><a href=\"?action=deletead&IDnum=$ID\">Delete Ad</a><br /><br />\n";
    echo "Preview :<br /><div class=\"adcode\">$currentadcode</div><br /> \n";
    echo "<br />\n";
    echo "<form action=\"displayads.php\" name=\"addAD$ID\" method=\"post\">\n";
    echo "AD code (can be any type of script) text link, javascript or banner :<br />\n";
    echo "Code :<br /><textarea name=\"adcode$ID\" wrap=\"physical\" cols=\"60\" rows=\"5\" onKeyDown=\"textCounter(document.addAD$ID.adcode$ID,document.addAD$ID.remLen$ID,5000)\" onKeyUp=\"textCounter(document.addAD$ID.adcode$ID,document.addAD$ID.remLen$ID,5000)\">$currentadcode</textarea>";
    echo "<br /><input readonly type=\"text\" name=\"remLen$ID\" size=\"3\" maxlength=\"3\" value=\"5000\">Characters Left \n";
    echo "**<input type=\"submit\" name=\"editad$ID\" value=\"Edit AD Code\">**</form>\n";
    echo "<br /><hr />";

$i++;
}

?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T05:07:16.247

您缺少右双引号：

```
$doedit = "UPDATE ads SET adcode = '" . $newadcode . "' WHERE ads_ID = '". $ID."'"; 
```

或者干脆这样写你的查询：

```
$doedit = "UPDATE ads SET adcode = '$newadcode' WHERE ads_ID = '$ID'"; 
```

**如果您只想更新单行，请使用 LIMIT 1**

# node.js - 在 Mongoose 3 中节省麻烦

> ID：12756899
> 
> 赞同：5
> 
> 时间：2012-10-06T05:05:13.493
> 
> 标签：node.js, mongodb, mongoose

我正在尝试更新 Mongoose.js 3.1.2 中的一些内容，但我无法让这两个功能正常工作。任何想法为什么？谢谢...

```
function(req, res) {
  Content.findById(req.body.content_id, function(err, content) {
    // add snippet to content.snippets
    content.snippets[req.body.snippet_name] = req.body.snippet_value;
      content.save(function(err) {
        res.json(err || content.snippets);
    });
  }
}

function(req, res) {
  Content.findById(req.body.content_id, function(err, content) {

      // delete snippets
      delete content.snippets[req.body.snippet_name];
      //content.snippets[req.body.snippet_name] = undefined; <-- doesn't work either

      content.save(function(err) {
        res.json(err || "SUCCESS");
      });

  });
} 
```

我的架构看起来像这样：

```
contentSchema = new Schema(
  title: String,
  slug: String,
  body: String,
  snippets: Object
); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-06T05:13:57.143

您可能需要将路径标记为已修改。Mongoose 可能不会检查对象属性，因为您没有为它们创建嵌入式模式。

```
function(req, res) {
  Content.findById(req.body.content_id, function(err, content) {
    // add snippet to content.snippets
    content.snippets[req.body.snippet_name] = req.body.snippet_value;
    content.markModified('snippets');  // make sure that Mongoose saves the field
      content.save(function(err) {
        res.json(err || content.snippets);
    });
  }
} 
```

# java - 当我尝试将整数值发送到 java 函数时，JVM 崩溃

> ID：12756901
> 
> 赞同：1
> 
> 时间：2012-10-06T05:05:58.667
> 
> 标签：java, c, java-native-interface

我正在尝试将整数值从 jni c 代码发送到 java 函数。但是当我尝试这样做时，JVM 崩溃了。我不知道原因。以下代码告诉我如何努力实现这一目标。

*Java 代码：*

```
class Tester {
public native void func();
public native void func_1(Tester T);
public native void func_2(String S);

public static void main(String args[]) {
   Tester tester = new Tester();
   tester.func();
}

public void printInteger(int x) {
    System.out.println(x);
}

static {
  System.loadLibrary("DailyTesters");
}
} 
```

*JNI C 代码：*

```
#include <stdio.h>
#include "Tester.h"

void Java_Tester_func
(JNIEnv *env, jobject obj) {
  jclass cls = (*env)->GetObjectClass(env,obj);
  jmethodID mid = (*env)->GetMethodID(env,cls,"printInteger","(I)V");
  jvalue *a1;
  a1->i = 2;
  (*env)->CallVoidMethodA(env,obj,mid,a1);
 } 
```

我犯了什么错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T05:24:20.217

试试这个 ：

```
void Java_Tester_func
(JNIEnv *env, jobject obj) {
  jclass cls = (*env)->GetObjectClass(env,obj);
  jmethodID mid = (*env)->GetMethodID(env,cls,"printInteger","(I)V");
  jvalue a1,*arr;
  a1.i = 2;
  arr = &a1;
  (*env)->CallVoidMethodA(env,obj,mid,arr);
 } 
```

# python - 为什么 Python 不能从外部访问子函数？

> ID：12756908
> 
> 赞同：7
> 
> 时间：2012-10-06T05:07:12.923
> 
> 标签：python

```
def A():
    def B():
        #do something

a = A()
a.B() 
```

为什么在 Python 中不能实现上述（如此简单的代码）？是否存在不会将 A() 变成类的“pythonic”（清晰、不出所料、非骇客）解决方法？

**编辑1：**上面向我解释了B是A的本地，因此它只存在于A被评估时。因此，如果我们将其设为全局（并确保不要将其覆盖），那么为什么这不起作用？

```
def A():
    def B():
        #do something
    return A()

a = A()
a.B() 
```

它说它正在返回一个“NoneType”对象。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-06T05:10:51.577

因为函数定义只是在本地命名空间中创建一个名称。您正在做的事情与以下内容没有什么不同：

```
def f():
    a = 2 
```

然后问为什么你不能`a`从函数外部访问。绑定在函数内部的名称是函数的本地名称。

此外，您提出的代码很奇怪。当你这样做时`a = f()`，你将 a 设置为函数的*返回值*。您的函数不返回任何内容，因此您不能希望通过返回值访问任何内容。可以直接返回内部函数：

```
def f():
   def g():
      return "blah"
   return g

>>> func = f()
>>> func()
'blah' 
```

这确实很有用。但是除了修改全局变量（这通常是一个坏主意）或返回值之外，没有通用的方法可以从外部访问函数内部的东西。这就是函数的工作方式：它们接受输入并返回输出；他们不会让外界知道他们的内脏。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-06T05:46:39.963

要使用您想要的语法调用 B，请使用：

```
def A():
    def B():
        print("I'm B")
    A.B = B
    return A

a = A()
a.B()
A.B() 
```

# asp.net - IIS 7.5 上的 Asp.net 4.0 中的会话超时

> ID：12756910
> 
> 赞同：2
> 
> 时间：2012-10-06T05:07:16.247
> 
> 标签：asp.net, iis-7.5, session-timeout

我想为我的 Web 应用程序设置 12 小时的超时。

我已在 web.config 文件中设置为：

```
<system.web>
     <sessionState timeout="720" />
</system.web> 
```

正如以下[帖子](https://stackoverflow.com/questions/949426/session-time-out-in-iis-7)中所建议的：

*   我开始知道`Application Pool`每 20 分钟循环一次（如果游泳池是理想的）。
    我还使用关于[应用程序池超时设置的一个问题检查了更改应用程序池超时](http://technet.microsoft.com/en-us/library/cc771956%28v=ws.10%29.aspx)
*   但仍然`session`没有将超时设置为 720 分钟。我是否需要更改`machine.config`文件以更改`session`超时。
    但我认为文件的属性`machine.config`应该被`web.config`文件覆盖。

请给我一些想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T05:24:32.137

你可以试试`WMI(Windows Management Instrumentation)`它可以帮助你的脚本。你需要有足够的权限来实现`Script`.

以下是您可以查看以获取更多信息的链接。

[http://bendera.blogspot.in/2010/12/configuring-ica-rdp-timeout-values.html](http://bendera.blogspot.in/2010/12/configuring-ica-rdp-timeout-values.html)

[http://technet.microsoft.com/en-us/library/cc771956%28v=ws.10%29.aspx](http://technet.microsoft.com/en-us/library/cc771956%28v=ws.10%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-23T10:43:05.680

您应该设置以下所有内容：

**应用程序池**/高级设置。应该以分钟为单位设置空闲超时选项。

然后在 system.web 部分的**web.config文件中，您还应该设置*****Authentication/Forms***、***SessionState***和***RoleManager***超时（如果适用）。

* * *

```
<authentication mode="Forms"><forms loginUrl="~/default.aspx" name=".ASPXFORMSAUTH" timeout="120" /></authentication>

<sessionState cookieless="AutoDetect" cookieName="TYS_ADMIN_SessionId" timeout="120" />

<roleManager ... cookieTimeout="120" defaultProvider="GMRoleProvider" enabled="true">...</roleManager> 
```

# java - Java——跨平台移动开发

> ID：12756913
> 
> 赞同：2
> 
> 时间：2012-10-06T05:08:56.117
> 
> 标签：java, mobile

真的有任何工具或 sdk 真正支持跨平台 java 移动开发，并且在代码中值得他们重视吗？

我想用允许在 IOS（Ipad 和 Iphone）、Android 和 Windows Mobile 5 和 6 上使用的 sdk 重写我们的移动应用程序。

如果我要月亮，请告诉我。

我是传统的 ac# 开发人员，刚刚开始学习 Java。

我看到很多关于跨平台开发的不同帖子，但我想知道我们今天作为一个行业在这方面处于什么位置。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-06T11:40:44.720

您可以查看[mgwt](http://www.m-gwt.com/)或[codenameone](http://www.codenameone.com/)框架。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T05:24:00.143

对于使用纯 Java 构建但通过纯 HTML+CSS+JavaScript 部署的基于服务器的应用程序：[Vaadin](http://www.vaadin.com/)。但这意味着您的应用程序需要 Internet 连接才能运行。

提示：有些人构建了一个简单的最小原生应用程序，它只是将网络浏览器视图直接指向您网站的 URL。这允许您在实际构建跨平台运行的 Web 应用程序的同时，在 App Store 中销售/提供您的“应用程序”。

iOS 上没有 Java。因此，没有基于 Java 的开发工具包可以跨 iOS、Android 和 Windows Mobile 构建本地原生应用程序。

Google 确实宣布了[J2ObjC](https://code.google.com/p/j2objc/)项目，用于将 Java 代码转换为 iOS 的 Objective-C。但这并不能解决你所有的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-16T02:05:09.770

[Eclipse Tabris](http://eclipsesource.com/en/products/tabris/)是另一种选择，但它不是免费的（也不昂贵）。

# mysql - MySQL 查询未正确显示

> ID：12756914
> 
> 赞同：1
> 
> 时间：2012-10-06T05:09:06.307
> 
> 标签：mysql, sql, database

如果没有人对他们发表评论超过 4 周，我必须设置一个查询来检索对客户的最后评论。我可以使用下面的查询使其工作，但由于某种原因，评论列不会显示最新记录。相反，它显示最旧的，但日期显示最新的。可能只是因为我是 SQL 的菜鸟，但我到底做错了什么？

```
SELECT DISTINCT
    customerid, id, customername, user, MAX(date) AS 'maxdate', comment
FROM comments
WHERE customerid IN 
   (SELECT DISTINCT id FROM customers WHERE pastdue='1' AND hubarea='1') 
AND customerid NOT IN 
   (SELECT DISTINCT customerid FROM comments WHERE DATEDIFF(NOW(), date) <= 27)
GROUP BY customerid
ORDER BY maxdate 
```

第一个“WHERE”子句只是确保它只显示来自特定区域的客户，并且他们是“过期启用的”。第二个确保客户在过去 27 天内没有被评论。它按 customerid 分组，因为这是与每个客户相关联的数字。当我得到结果时，一切都是正确的，除了评论栏......有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T05:47:10.417

加入嵌套查询要好得多，因此您使用联接而不是嵌套查询加入可以提高您的速度，此查询可以解决您的问题。

`SELECT DISTINCT customerid,id, customername, user, MAX(date) AS 'maxdate', comment FROM comments inner join customers on comments.customerid = customers.id WHERE comments.pastdue='1' AND comments.hubarea='1' AND DATEDIFF(NOW(), comments.date) <= 27 GROUP BY customerid ORDER BY maxdate`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T05:32:22.257

您需要为每种情况提供子查询。

```
SELECT  a.*
FROM    comments a
        INNER JOIN
        (
            SELECT customerID, max(`date`) maxDate
            FROM    comments
            GROUP BY customerID
        ) b ON a.customerID = b.customerID AND
                a.`date` = b.maxDate
        INNER JOIN
        (
            SELECT DISTINCT ID
            FROM customers
            WHERE pastdue = 1 AND hubarea = 1
        ) c ON c.ID = a.customerID
        LEFT JOIN
        (
            SELECT DISTINCT customerid 
            FROM comments 
            WHERE DATEDIFF(NOW(), date) <= 27
        ) d ON a.customerID = d.customerID
WHERE   d.customerID IS NULL 
```

*   第一个加入获取每个客户的最新记录。
*   第二个加入仅显示来自特定区域的客户，并且他们“已启用过期”。
*   第三个连接使用`LEFT JOIN`，选择过去 27 天内未评论的所有客户。在这种情况下，由于条件，只选择列表中没有的记录`d.customerID IS NULL`。

但是为了让你的查询更短，如果`customers`表已经有`unique`客户的记录，那么你不需要对它进行子查询。直接加入表并将条件放在`WHERE`子句上。

```
SELECT  a.*
FROM    comments a
        INNER JOIN
        (
            SELECT customerID, max(`date`) maxDate
            FROM    comments
            GROUP BY customerID
        ) b ON a.customerID = b.customerID AND
                a.`date` = b.maxDate
        INNER JOIN customers c
            ON c.ID = a.customerID
        LEFT JOIN
        (
            SELECT DISTINCT customerid 
            FROM comments 
            WHERE DATEDIFF(NOW(), date) <= 27
        ) d ON a.customerID = d.customerID
WHERE   d.customerID IS NULL AND
        c.pastdue = 1 AND 
        c.hubarea = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T05:35:56.860

试试这个

```
select  customerid, id, customername, user,date, comment from(
  select customerid, id, customername, user,date, comment, 
      @rank :=  IF(@current_customer = id, @rank+ 1, 1),
      @current_customer := id
    from comments
    where customerid IN 
      (SELECT DISTINCT id FROM customers WHERE pastdue='1' AND hubarea='1') 
      AND customerid NOT IN 
      (SELECT DISTINCT customerid FROM comments WHERE DATEDIFF(NOW(), date) <= 27)
    order by customerid, maxdate desc
) where rank <= 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T05:40:56.497

我认为这可能会做你想要实现的目标。如果您可以执行它并且可能会报告它是否执行，如果需要，我可能会对其进行调整。从逻辑上讲，它“应该”起作用-如果我正确理解了您的问题:)

```
SELECT X.customerid, X.maxdate,  co.id, c.customername, co.user, co.comment
FROM 
    (SELECT customerid, MAX(date) AS 'maxdate'
    FROM comments cm
    INNER JOIN customers cu ON cu.id = cm.customerid
    WHERE cu.pastdue='1' 
    AND cu.hubarea='1' 
    AND DATEDIFF(NOW(), cm.date) <= 27)
    GROUP BY customerid) X
INNER JOIN comments co ON X.customerid = co.customerid and X.maxdate = co.date
INNER JOIN customer c  ON X.customerid = c.id
ORDER BY X.maxdate 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-06T05:45:11.270

您的两个表列不包含在聚合函数或 GROUP BY 子句中。例如，假设您有两个具有相同客户 ID 和相同日期的数据行，但具有不同的评论数据。SQL 应该如何聚合这两行？:(它会产生一个错误......

# glassfish-3 - 无法在 netbeans 中创建战争文件

> ID：12756917
> 
> 赞同：0
> 
> 时间：2012-10-06T05:09:49.860
> 
> 标签：glassfish-3, netbeans-7

您好我正在尝试在 netbeans7.0 中创建一个战争文件，但我无法创建它。它显示以下错误

```
 Deleting directory C:\Documents and Settings\a\My Documents\NetBeansProjects\ABC\build
 C:\Documents and Settings\a\My Documents\NetBeansProjects\ABC\nbproject\build-impl.xml:1109: Unable to delete file C:\Documents and Settings\a\My      Documents\NetBeansProjects\ABC\build\web\WEB-INF\lib\asm-3.1.jar 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T05:15:07.897

这通常发生在尝试在构建之前进行清理时，并且 GlassFish 锁定了需要在清理过程中删除的文件。

尝试只进行构建（无需清理），或关闭 GlassFish，然后清理并构建。

# css - 为什么这个 3D CSS 重叠而不是剪辑？

> ID：12756922
> 
> 赞同：8
> 
> 时间：2012-10-06T05:10:44.273
> 
> 标签：css, 3d

为什么这些 3D CSS 平面在 Firefox 和 Chrome 中重叠，而不在 Safari 中？

[http://jsfiddle.net/yNfQX/6/](http://jsfiddle.net/yNfQX/6/)

..我如何让它表现得像野生动物园？

**Safari 和 Firefox 预览**

![Safari 看起来像这样](../Images/2eb80898a8677a813729cce69bba108a.png) ![火狐看起来像这样](../Images/c89721121a0bdf77ff32f1fcb4f550a7.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-06T05:45:47.433

看起来像一个错误......来自[https://bugzilla.mozilla.org/show_bug.cgi?id=689498](https://bugzilla.mozilla.org/show_bug.cgi?id=689498)：

> 错误 689498 - 相交平面的 z 顺序不正确
> 
> Alistair MacDonald 2012-04-12 12:22:25 PDT Safari & Mobile Safari 不再有这个问题。这个问题在 Chrome 和 Firefox 中仍然存在。
> 
> 损坏：Firefox 14.0a1 (2012-04-12) -Win7 损坏：Chrome 20.0.1096.1 -Win7 已修复：Safari 5.1.5 (75.34.55.3) -Win7 已修复：移动版 Safari（最后一次更新是一个多月前）-iOs
> 
> 链接到测试用例和屏幕抓取： http: [//f1lt3r.com/code/3d-css-transforms-intersecting-planes-not-clipping/](http://f1lt3r.com/code/3d-css-transforms-intersecting-planes-not-clipping/)

# asp.net-mvc - 我可以在一个路线图中有多个操作吗？

> ID：12756924
> 
> 赞同：0
> 
> 时间：2012-10-06T05:11:13.920
> 
> 标签：asp.net-mvc, asp.net-mvc-3, routes

我设置了以下路线：

```
 context.MapRoute(
        "MyAccount_default",
        "MyAccount/{controller}/{action}/{id}",
        new { action = "Index", id = UrlParameter.Optional }
    ); 
```

以及以下链接：

```
/MyAccount/Access/Login
/MyAccount/Access/Logout
/MyAccount/Access/Register 
```

有什么方法可以创建路线图以便输入：

```
/Login
/Logout
/Register 
```

将请求定向到 MyAccount 区域、访问控制器和登录/注销或注册方法？如果我有路线图，那么它可以属于 MyAccount 区域的路线图还是需要在该区域之外？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T05:23:26.980

你真的应该明确你的路线。如果您想要标准路线之外的东西，请将它们添加到您的路线表中。

```
 context.MapRoute(
        "Login",
        "/Login",
        new { controller="Access", action = "Login"}
    ); 
```

在您的默认路线之前添加它。另一种选择是使用我们的默认路由，但另外使用[https://github.com/mccalltd/AttributeRouting](https://github.com/mccalltd/AttributeRouting)上的 AttributeRouting 项目之类的东西， 并在每个控制器中的操作方法上指定您的附加路由。

请注意，您可以在 Login 操作方法上编写如下代码：

```
 [GET("Login")]
public ActionResult Login()
{
} 
```

因此将使用您的默认路线以及此扩展路线。我相信无论如何都应该工作:)

# iphone - CAShapeLayer 具有边框和填充颜色以及舍入

> ID：12756928
> 
> 赞同：13
> 
> 时间：2012-10-06T05:11:38.443
> 
> 标签：iphone, ios, ipad, core-animation

如何使用 CAShapeLayer 绘制同时具有边框颜色、边框宽度和填充颜色的线条？

这是我尝试过的，但它永远是蓝色的......

```
self.lineShape.strokeColor = [UIColor blueColor].CGColor;
self.lineShape.fillColor = [UIColor greenColor].CGColor;
self.lineShape.lineWidth = 100;
self.lineShape.lineCap = kCALineCapRound;
self.lineShape.lineJoin = kCALineJoinRound;
UIBezierPath* path = [UIBezierPath bezierPath];
[path moveToPoint:self.lineStart];
[path addLineToPoint:self.lineEnd];
self.lineShape.path = path.CGPath; 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-06T05:45:18.303

Swift 3+ 扩展方法（结合下面的 AechoLiu 答案）：

```
// Usage:
self.btnGroup.roundCorner([.topRight, .bottomRight], radius: 4.0, borderColor: UIColor.red, borderWidth: 1.0)

// Apply round corner and border. An extension method of UIView.
public func roundCorner(_ corners: UIRectCorner, radius: CGFloat, borderColor: UIColor, borderWidth: CGFloat) {

let path = UIBezierPath.init(roundedRect: self.bounds, byRoundingCorners: corners, cornerRadii: CGSize(width: radius, height: radius))

let mask = CAShapeLayer()
mask.path = path.cgPath
self.layer.mask = mask

let borderPath = UIBezierPath.init(roundedRect: self.bounds, byRoundingCorners: corners, cornerRadii: CGSize(width: radius, height: radius))
let borderLayer = CAShapeLayer()
borderLayer.path = borderPath.cgPath
borderLayer.lineWidth = borderWidth
borderLayer.strokeColor = borderColor.cgColor
borderLayer.fillColor = UIColor.clear.cgColor
borderLayer.frame = self.bounds
self.layer.addSublayer(borderLayer)

} 
```

目标-C：

```
self.lineShapeBorder = [[CAShapeLayer alloc] init];
self.lineShapeBorder.zPosition = 0.0f;
self.lineShapeBorder.strokeColor = [UIColor blueColor].CGColor;
self.lineShapeBorder.lineWidth = 25;
self.lineShapeBorder.lineCap = kCALineCapRound;
self.lineShapeBorder.lineJoin = kCALineJoinRound;

self.lineShapeFill = [[CAShapeLayer alloc] init];
[self.lineShapeBorder addSublayer:self.lineShapeFill];
self.lineShapeFill.zPosition = 0.0f;
self.lineShapeFill.strokeColor = [UIColor greenColor].CGColor;
self.lineShapeFill.lineWidth = 20.0f;
self.lineShapeFill.lineCap = kCALineCapRound;
self.lineShapeFill.lineJoin = kCALineJoinRound;

// ...

UIBezierPath* path = [UIBezierPath bezierPath];
[path moveToPoint:self.lineStart];
[path addLineToPoint:self.lineEnd];
// call addLineToPoint over and over to create the outline for the shape
self.lineShapeBorder.path = self.lineShapeFill.path = path.CGPath; 
```

还喊出@FarrasDoko 评论以尝试更改`borderWidth`为`lineWidth`和。`borderColor``strokeColor`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-06T05:13:55.880

如果您将图层的`fillColor`属性设置为非`nil`透明或透明，则图层将填充其路径。

如果将图层设置为`lineWidth`大于零的数字，并且将其设置`strokeColor`为非`nil`透明或透明，则图层将描边其路径。

如果您设置了所有这些属性，图层将填充*并*描边其路径。它在填充后绘制笔画。

图层的路径实际上必须包围一些区域才能填充任何东西。在您的帖子中，您将路径设置为：

```
UIBezierPath* path = [UIBezierPath bezierPath];
[path moveToPoint:self.lineStart];
[path addLineToPoint:self.lineEnd];
self.lineShape.path = path.CGPath; 
```

该路径包含一条线段。它不包围任何区域，因此该层没有任何东西可以填充。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-11-23T03:06:05.673

在 Swift 3\. 中的扩展方法`UIView`。

```
// Usage:
self.btnGroup.roundCorner([.topRight, .bottomRight], radius: 4.0, borderColor: UIColor.red, borderWidth: 1.0)

// Apply round corner and border. An extension method of UIView.
public func roundCorner(_ corners: UIRectCorner, radius: CGFloat, borderColor: UIColor, borderWidth: CGFloat) {
    let path = UIBezierPath.init(roundedRect: self.bounds, byRoundingCorners: corners, cornerRadii: CGSize(width: radius, height: radius))

    let mask = CAShapeLayer()
    mask.path = path.cgPath
    self.layer.mask = mask

    let borderPath = UIBezierPath.init(roundedRect: self.bounds, byRoundingCorners: corners, cornerRadii: CGSize(width: radius, height: radius))
    let borderLayer = CAShapeLayer()
    borderLayer.path = borderPath.cgPath
    borderLayer.lineWidth = borderWidth
    borderLayer.strokeColor = borderColor.cgColor
    borderLayer.fillColor = UIColor.clear.cgColor
    borderLayer.frame = self.bounds
    self.layer.addSublayer(borderLayer)
} 
```

# javascript - window.location.href 的安全问题

> ID：12756936
> 
> 赞同：2
> 
> 时间：2012-10-06T05:12:48.050
> 
> 标签：javascript, html, security, http-headers

阅读有关 URL 重定向的 Wikipedia 文章后，我想知道是否`window.location.href="page.php"`是网页重定向的最佳选择。维基百科文章建议

> 但是，出于安全原因，可能会首选 HTTP 标头或刷新元标记，因为某些浏览器和许多网络爬虫不会执行 JavaScript。

有什么我需要担心的吗？如果出现问题，使用 javascipt 有哪些替代方案？window.location.href 在用户登录时被激活。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T05:51:51.237

你的目标应该是让你的登录页面在不需要 JavaScript 的情况下工作，使其更容易从任何设备访问；您可以通过进行客户端检查来使 JavaScript 的用户体验更好，但无论如何都必须在服务器上进行。以这种方式进行优雅降级是很常见的，允许最小的公分母。

话虽如此，如果您已经在使用 JavaScript 执行登录，那么它显然已启用，因此重定向根本不成问题。如果没有具体的参考资料，我将无法说出那篇文章所谈论的安全问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T07:24:01.427

如果您从用户输入中获取要重定向到的页面值，则这种重定向方式仅具有安全隐患。如果它是硬编码的，则没有问题。

# python - Python 3.2“TypeError：无法将'type'对象隐式转换为str”

> ID：12756950
> 
> 赞同：0
> 
> 时间：2012-10-06T05:14:43.713
> 
> 标签：python, string, function, printing, echo

我收到一个错误，我不知道如何改进我的代码。

基本上，我想做的是`echo`终端应用程序中的伪命令。

```
while True:
    foo = input("~ ")
    bar = str
    if foo in commands:
        eval(foo)()
    elif foo == ("echo "+ bar):
        print(bar)
    else:
        print("Command not found") 
```

显然，它不起作用。

有人知道我需要用什么来完成这个项目吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T05:18:00.120

您创建一个变量`bar`并将其设置为等于`str`，这是字符串类型。然后，您尝试将其添加到字符串`"echo "`中。这显然行不通。你想做什么`bar`？ `bar`没有连接到用户输入，所以无论用户输入什么，它都不会改变。

如果您想查看输入是否以“echo”开头，然后打印其余部分，您可以这样做：

```
if foo.startswith("echo "):
    print foo[5:] 
```

`str`并不意味着“任何字符串”；它是所有字符串的类型。您应该阅读[Python 教程](http://docs.python.org/tutorial/)以熟悉 Python 的基础知识。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T05:17:48.390

这段代码可能会给你带来问题：

```
"echo "+ bar 
```

`bar`等于`str`，这是一种数据类型。

这是我修复您的代码的方法：

```
while True:
    command = input("~ ")    # Try to use good variable names

    if command in commands:
        commands[command]()  # Avoid `eval()` as much as possible.
    elif command.startswith('echo '):
        print(command[5:])   # Chops off the first five characters of `foo`
    else:
        print("Command not found") 
```

# php - PayPal：IPN 和 PDT 协同工作 - 单项支付系统 - 无需购物车

> ID：12756951
> 
> 赞同：1
> 
> 时间：2012-10-06T05:14:49.763
> 
> 标签：php, paypal, paypal-ipn, payment-processing, eclipse-pdt

我使用我用**PHP 和 MySQL 数据库**制作的自定义在线预订系统。目前，当客户以现金面对面预订时进行付款，我现在正在将**Paypal 的 IPN 和 PDT**付款设置一起实施到系统中，以用作单项付款/“立即付款”选项系统*（因此没有购物车)* . 价格、日期和用户信息仅有所不同。

在对不同的争论和安全问题进行了数月的研究之后，我得出的结论是，**将 IPN 和 PDT 系统一起使用的最佳方式是以**先到**先得的**方式进行，并为每个系统提供一个脚本。无论是 PDT 还是 IPN 脚本处理，先发送确认邮件并将相关信息添加到数据库中。如果 PDT 或 IPN 处理并发现另一个已经处理，**它只**更新缺少的数据库信息，因为电子邮件已经由另一个脚本发送。

从头开始制作的预订系统已经使用了 2 年没有问题，但现在需要在线支付。

在线预订时，客户输入他们的详细信息，选择开始日期、结束日期、预订时间，然后将信息发布（表单方法 POST）到 PHP 脚本。该脚本验证、处理并向确认页面输出预订成功，并向客户和管理员电子邮件地址发送电子邮件。

*MYSQL 数据库当前未用于保存预订详细信息。*

我现在想用相同的结构在线支付。

MySQL 数据库现已修改，并有一个新表，其中包含来自 Paypal 的 IPN 或 PDT 回复（成功或失败）的回调可能返回的所有字段，以及有关预订的基本信息。

我遇到的问题是：

*   PDT 可以伪造。**如何避免这种情况，好像来自 PDT 脚本的电子邮件已发送，他们将已经收到确认，这会导致问题？** *我可以通过仅发送带有 IPN 脚本的电子邮件并告诉 PDT 流程仅向客户显示预订信息来避免这种情况，但声明将发送确认电子邮件，但有时 IPN 可能需要一段时间，客户需要立即放心预订已确认，因为预订可能是在接下来的 30 分钟内预订。*

*   近一个月来，我尝试根据 Web 上的示例创建几个 PDT 和 IPN 脚本，其中包括 Xcommerce Paypal 开发者网站、Paypal 和许多其他网站，但似乎没有一个能正常工作。 **谁能提供一个 PDT 脚本和一个 IPN 脚本，它们都可以处理所有可能的变量并验证订单的关键基本信息，例如姓名、地址、邮政编码和价格？** *这对于任何尝试使用 IPN 和 PDT 为任何人创建支付流程的人都会很有用，因为任何人都需要做的就是删除每个脚本不需要的内容。*

***请注意，***每个脚本通过检查 IPN 或 MySQL 表中的 PDT 字段中是否有“1”来检查另一个脚本是否已运行。“0”是默认值。

我期待人们的回复，因为我相信这将帮助每个遇到任何系统问题的人，无论脚本是如何使用的。

**提前感谢大家。**

如果与下面的不同，请提供经过测试的 MySQL 表，以提供任何答案以帮助其他人阅读答案。

我已经创建并正在使用下表：

```
CREATE TABLE `bookings` (
`id` int( 11 ) NOT NULL AUTO_INCREMENT ,
`date1` char( 2 ) NOT NULL default '',
`month1` char( 2 ) NOT NULL default '',
`year1` char( 2 ) NOT NULL default '',
`date2` char( 2 ) NOT NULL default '',
`month2` char( 2 ) NOT NULL default '',
`year2` char( 2 ) NOT NULL default '',
`name` text NOT NULL ,
`address` text NOT NULL ,
`zippostcode` text NOT NULL ,
`email` text NOT NULL ,
`price` char( 2 ) NOT NULL default '',
`pdt` varchar( 12 ) NOT NULL default '0',
`ipn` varchar( 12 ) NOT NULL default '0',
`paypalstatus` varchar( 12 ) NOT NULL default '',
`datebooked` varchar( 50 ) NOT NULL default '',
`receiver_email` varchar( 127 ) NOT NULL ,
`payment_status` varchar( 25 ) NOT NULL ,
`pending_reason` varchar( 25 ) NOT NULL ,
`payment_date` varchar( 100 ) NOT NULL ,
`mc_gross` double NOT NULL ,
`mc_fee` double NOT NULL ,
`tax` double NOT NULL ,
`mc_currency` varchar( 10 ) NOT NULL ,
`txn_id` varchar( 25 ) NOT NULL ,
`txn_type` varchar( 25 ) NOT NULL ,
`first_name` varchar( 75 ) NOT NULL ,
`last_name` varchar( 75 ) NOT NULL ,
`address_street` varchar( 200 ) NOT NULL ,
`address_city` varchar( 50 ) NOT NULL ,
`address_state` varchar( 40 ) NOT NULL ,
`address_zip` varchar( 20 ) NOT NULL ,
`address_country` varchar( 64 ) NOT NULL ,
`address_status` varchar( 25 ) NOT NULL ,
`payer_email` varchar( 127 ) NOT NULL ,
`payer_status` varchar( 25 ) NOT NULL ,
`payment_type` varchar( 25 ) NOT NULL ,
`notify_version` varchar( 50 ) NOT NULL ,
`verify_sign` varchar( 255 ) NOT NULL ,
`address_name` varchar( 130 ) NOT NULL ,
`protection_eligibility` varchar( 50 ) NOT NULL ,
`ipn_status` varchar( 25 ) NOT NULL ,
`subscr_id` varchar( 25 ) NOT NULL ,
`reason_code` varchar( 25 ) NOT NULL ,
`contact_phone` varchar( 25 ) NOT NULL ,
`invoice` varchar( 127 ) NOT NULL ,
`for_auction` tinyint( 10 ) NOT NULL ,
`auction_buyer_id` varchar( 75 ) NOT NULL ,
`auction_closing_date` varchar( 100 ) NOT NULL ,
`auction_multi_item` double NOT NULL ,
`address_country_code` varchar( 2 ) NOT NULL ,
`order_id` tinyint( 10 ) NOT NULL ,
`item_name` varchar( 130 ) NOT NULL ,
`item_number` varchar( 130 ) NOT NULL ,
`os0` varchar( 200 ) NOT NULL ,
`on0` varchar( 75 ) NOT NULL ,
`os1` varchar( 200 ) NOT NULL ,
`on1` varchar( 75 ) NOT NULL ,
`quantity` double NOT NULL ,
`custom` varchar( 255 ) NOT NULL ,
`mc_handling` double NOT NULL ,
`mc_shipping` double NOT NULL ,
`creation_timestamp` timestamp NOT NULL ,
PRIMARY KEY ( `id` )
) TYPE = MYISAM AUTO_INCREMENT =1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T17:55:29.093

我找到了一个网站。看看这个人的脚本：

[http://ksquared.de/blog/2011/10/paypal-generic-php-payment-pdtipn-script/](http://ksquared.de/blog/2011/10/paypal-generic-php-payment-pdtipn-script/)

# ruby-on-rails-3 - 在 Heroku 上生产之前部署到测试服务器

> ID：12756955
> 
> 赞同：2
> 
> 时间：2012-10-06T05:15:16.790
> 
> 标签：ruby-on-rails-3, deployment, heroku, github, production-environment

因为我是新手，所以我不确定这是否应该是这样 -

我正在制作一个 webapp 并使用 heroku 进行托管

我想让几个开发人员在 github 上处理相同的代码。

我想在 heroku 上有 2 台服务器 - 一台用于生产，一台用于测试（它也称为登台吗？）

问题是我知道通过`git push heroku master`从 webapp 文件夹做什么，它将把它发送到应用程序到首先设置的 heroku 服务器。

1.  如何使用 git 从同一个文件夹部署到 2 个不同的 heroku 实例？有可能/推荐吗？

2.  当我推送到 github 时，它通常是 master，我应该有另一个分支进行测试吗？

3.  有没有办法在 heroku 实例之间传输应用程序？

如果有一个地方有推荐的 heroku 和 github 部署例程，我很乐意阅读它

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-06T06:48:05.730

当您运行`git push heroku master`“heroku”时，会识别您要推送到的远程存储库。在您的情况下，“heroku”似乎是对您的生产服务器的引用。同样，您可能有一个指向 github 的“原点”遥控器。

如果您列出您的 git 遥控器，您可能会看到如下内容：

```
> git remote -v 
heroku  git@heroku.com:heroku_app_name.git (fetch)
heroku  git@heroku.com:heroku_app_name.git (push)
origin  git@github.com:your_github_org/repo_name.git (fetch)
origin  git@github.com:your_github_org/repo_name.git (push) 
```

要推送到不同的 heroku 应用程序，您只需将该应用程序添加为新的 git 远程。

```
git remote add heroku-staging git@heroku.com:heroku_staging_app.git 
```

现在您应该能够根据需要推送到任一远程。

```
git push origin master //push to github
git push heroku-staging //deploy to staging
git push heroku master //deploy to production 
```

一般来说，我建议您不要手动推送到 heroku。希望您可以有一个持续集成服务器监视 github，在您推送更改时运行测试，并仅在您的自动化测试通过时部署到暂存。然后，您可以手动触发 CI 任务，该任务也将当前正在暂存的任何提交推送到生产环境（甚至也可以自动化生产部署）。

您可以使用`heroku`命令行执行相同的配置。这也为您提供了一种在两个 heroku 应用程序上管理环境变量和其他设置的好方法： [https ://devcenter.heroku.com/articles/multiple-environments](https://devcenter.heroku.com/articles/multiple-environments)

# c# - 如何检索用于构造 X509AsymmetricSecurityKey 的 X.509 证书？

> ID：12756957
> 
> 赞同：2
> 
> 时间：2012-10-06T05:16:01.213
> 
> 标签：c#, cryptography, wif, claims-based-identity

您可以使用 X509AsymmetricSecurityKey(X509Certificate2) 构造函数从[X509Certificate2](http://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.x509certificate2%28v=vs.100%29.aspx)实例构造 X509AsymmetricSecurityKey [；](http://msdn.microsoft.com/en-us/library/system.identitymodel.tokens.x509asymmetricsecuritykey%28v=vs.100%29.aspx)但是可以从安全密钥中获取 X509Certificate2 实例吗？

作为一个并行示例，[InMemorySymmetricSecurityKey](http://msdn.microsoft.com/en-us/library/system.identitymodel.tokens.inmemorysymmetricsecuritykey%28v=vs.100%29.aspx)类公开了一个可用于检索对称密钥的[GetSymmetricKey()方法。](http://msdn.microsoft.com/en-us/library/system.identitymodel.tokens.inmemorysymmetricsecuritykey.getsymmetrickey%28v=vs.100%29.aspx)

我曾希望看到 X509AsymmetricSecurityKey 类公开的类似*GetCertificate()*的等效方法，但我看到的最接近的方法是 GetAsymmetricAlgorithm(string algorithm, bool privateKey)。

我真正追求的是能够验证使用证书的私钥签名的消息的数字签名，这意味着使用证书的公钥验证签名。

有没有办法使用安全密钥的非对称算法来验证签名？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-15T13:01:34.640

当您从 X509Certificate2 构造 X509AsymmetricSecurityKey 时，证书实例引用实际上放置在密钥实例上名为**certificate的私有属性中。**

您自己的答案满足您的特定用例但不满足您的问题，您问题的真正答案是：

> 没有直接的方法，但是您可以使用反射来做到这一点。

```
X509AsymmetricSecurityKey x509Key = ...

X509Certificate2 cert = typeof(X509AsymmetricSecurityKey).GetField("certificate", BindingFlags.NonPublic | BindingFlags.Instance).GetValue(x509Key) as X509Certificate2; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T19:15:36.697

虽然 owlstead 是正确的，但您无法从安全密钥中检索 X.509 证书；我应该指出的是，我正在尝试验证 JSON Web 令牌的数字签名，其中安全密钥包含公私密钥对的公共部分。

实际上，您可以使用安全密钥来验证签名。以下是一般如何进行的示例：

```
var data        = {Get data that was signed as an array of bytes}
var signature   = {Get signature as an array of bytes}

// key variable is of type X509AsymmetricSecurityKey

using(var rsa = key.GetAsymmetricAlgorithm(SecurityAlgorithms.RsaSha256Signature, false) as RSACryptoServiceProvider)
{
    if(rsa != null)
    {
        using(var halg = new SHA256CryptoServiceProvider())
        {
            if (!rsa.VerifyData(data, halg, signature))
            {
                throw new SecurityException("Signature is invalid.");
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T11:15:07.287

`X509AsymmetricSecurityKey`是 的一个组成部分`X509Certificate2`。您是在询问是否可以在给定轮胎的情况下取回汽车。X509 证书除了存储在其中的公钥之外还包含大量附加信息（颁发者、序列号、密钥使用情况、生效日期等）。

另一方面，`InMemorySymmetricSecurityKey`确实包含对称密钥的所有信息，因此**可以**使用`GetSymmetricKey()`. 注意`GetSymmetricKey()`只返回一个字节数组，而不是一个语义对象实例。

微软唯一的特别之处`X509Certificate2`在于它与私钥相关联，这不是 X509 数据格式的一部分。证书中的私钥和公钥是同一密钥对的一部分。这就是为什么可以将私钥视为 X509 证书的一部分的原因。它们也经常存储在一起，例如以 PKCS#12 数据格式。我个人认为这只会混淆问题。

如果要将证书与私钥链接，则可以使用密钥对的模数。私钥和公钥是一样的。在某些加密标准中，他们使用模数上的散列来执行此操作。因此，您可以创建一个从模数哈希到证书的映射。如果您有私钥，则检索模数、计算哈希值并找到证书。

# php - 我如何使用 php 或 javascript 获取 pc 名称、ip 和 mac 地址？

> ID：12756966
> 
> 赞同：0
> 
> 时间：2012-10-06T05:17:15.243
> 
> 标签：php, ip-address, mac-address

我在问是否有一种方法可以使用 php 或 javacript 获取 pc 的名称、ip 和 mac？

我需要这个来配置我开发的应用程序中的视图。在这种情况下，用户使用 Windows 访问我使用 PHP 框架、codeignter 构建的应用程序，显然我使用 PHP 连接数据库。

为什么PC的名字？好 ！网络中的电脑名称可以替换为另一台同名电脑。用mac地址不行。但这是我无法获得访问我想知道的应用程序的 PC 的名称、IP 和 MAC 的一种方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T05:18:38.210

如果没有一些浏览器插件客户端，就无法获取 MAC 地址。

此外，您应该知道更改 MAC 地址非常容易。此外，并不是每个人都拥有一个。以太网不是互联网访问的先决条件。

您可以从 PHP 中的数据中获取远程地址`$_SERVER`，但在代理或 NAT 的情况下，它并不总是真正的客户端 IP。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T05:36:05.547

仅使用 PHP、JavaScript 和其他任何东西是不可能的。

不过，您可以使用`$_SERVER['REMOTE_ADDR']`. 请注意，如果用户使用某种 IP 隐藏软件，如隐藏我的 IP 等，这也不起作用。

对于 PC 名称和 Mac 地址，正如 Brad 所提到的，您需要一个客户端插件，使用另一种编程语言，很可能是 Java 或 Flash。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T06:54:54.793

使用 PHP，您无法获得有关计算机的具体信息，除非已将其输入到表单或类似的东西中。

但是，如果你去这个问题，你会发现如何使用 Javascript 学习名称。

[如何从浏览器中读取客户端的机器/计算机名称？](https://stackoverflow.com/questions/922476/how-can-i-read-the-clients-machine-computer-name-from-the-browser)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-27T13:40:04.727

要获取真实 IP 地址，您可以使用此代码

```
<?php
//whether ip is from share internet
if (!empty($_SERVER['HTTP_CLIENT_IP']))   
  {
    $ip_address = $_SERVER['HTTP_CLIENT_IP'];
  }
//whether ip is from proxy
elseif (!empty($_SERVER['HTTP_X_FORWARDED_FOR']))  
  {
    $ip_address = $_SERVER['HTTP_X_FORWARDED_FOR'];
  }
//whether ip is from remote address
else
  {
    $ip_address = $_SERVER['REMOTE_ADDR'];
  }
echo $ip_address;
?> 
```

# java - 如何使用 gson 解析这个嵌套的 json

> ID：12756967
> 
> 赞同：0
> 
> 时间：2012-10-06T05:17:34.557
> 
> 标签：java, json, parsing, gson

我有这个 json 作为字符串（这是来自谷歌自定义搜索）。我已经制作了解析它所必需的等效 Java 类。我使用 gson 并得到一个 NullPointerException。

```
"items": [
{
"kind": "customsearch#result",
"title": "A Florida Road Trip - Articles | Travel + Leisure",
"htmlTitle": "A \u003cb\u003eFlorida\u003c/b\u003e Road Trip -             \u003cb\u003eArticles\u003c/b\u003e | Travel + Leisure",
"link": "http://www.travelandleisure.com/articles/paradise-usa",
"displayLink": "www.travelandleisure.com",
"snippet": "On a road trip across Florida, Karrie Jacobs goes in search of the   authentic amid   New Urbanist experiments in postmodern nostalgia.",
"htmlSnippet": "On a road trip across \u003cb\u003eFlorida\u003c/b\u003e, Karrie Jacobs goes in search of the authentic amid \u003cbr\u003e  New Urbanist experiments in postmodern nostalgia.",
"cacheId": "QrfYt6p-U3gJ",
"formattedUrl": "www.travelandleisure.com/articles/paradise-usa",
"htmlFormattedUrl":  "www.travelandleisure.com/\u003cb\u003earticles\u003c/b\u003e/paradise-usa",
"pagemap": {
"cse_image": [
  {
   "src":  "http://static0.travelandleisure.com/images/amexpub/0000/6261/200702_urban.jpg"
 }
],
"cse_thumbnail": [
 {
  "width": "160",
  "height": "200",
    "src": "https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcR_Jhmej45Lu7L3bQoKz1poITJ5ZeuVvKhH62myfBOj-1VEX9oqwIhvH74"
 }
],
"metatags": [
 {
  "fb:app_id": "145695458805001",
  "og:url": "http://www.travelandleisure.com/articles/paradise-usa",
  "og:site_name": "Travel + Leisure",
  "og:image": "http://static0.travelandleisure.com/images/amexpub/0000/6261/200702_urban.jpg",
  "og:type": "article",
  "og:title": "Driving: Florida’s New Urbanist Experiments",
  "og:description": "On a road trip across Florida, Karrie Jacobs goes in search of the authentic amid New Urbanist exper..."
 }
]
}
} 
```

我等效的java类如下：

```
public Class Mapper
{
       public Items[] items;
}

public Class Items
{
   public String title;
   public String htmlSnippet;
   public String link;
   public Pagemap pagemap;
}

public Class Pagemap
{
  public Cse_image[] image;
}
public Class Cse_image
{
  public String src;
}
public Class Parser
{
  public static void main(String[] args)
  {
    //assume json is the string representation of the above json
     Gson gson = new GsonBuilder().create();
     Mapper mapper= gson.fromJson(json,Mapper.class);
     System.out.println("src here"+mapper.items[0].pagemap.image[0].src);
  }
} 
```

上面的代码抛出了一个`NullPointerException`，但是如果我打印到页面地图，我会得到一个具有有效哈希码的对象。任何指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T05:26:44.150

每当处理 JSON 时，最好使用 LINT 软件来验证 JSON 的内容。我推荐使用[jsonlint.com](http://jsonlint.com)。JSON 列表显示 JSON 字符串中的多个错误。在这里运行一些 REPL 循环是更正后的 JSON。

```
{
    "items": [
        {
            "kind": "customsearch#result",
            "title": "AFloridaRoadTrip-Articles|Travel+Leisure",
            "htmlTitle": "A<b>Florida</b>RoadTrip-<b>Articles</b>|Travel+Leisure",
            "link": "http: //www.travelandleisure.com/articles/paradise-usa",
            "displayLink": "www.travelandleisure.com",
            "snippet": "OnaroadtripacrossFlorida,KarrieJacobsgoesinsearchoftheauthenticamidNewUrbanistexperimentsinpostmodernnostalgia.",
            "htmlSnippet": "Onaroadtripacross<b>Florida</b>,KarrieJacobsgoesinsearchoftheauthenticamid<br>NewUrbanistexperimentsinpostmodernnostalgia.",
            "cacheId": "QrfYt6p-U3gJ",
            "formattedUrl": "www.travelandleisure.com/articles/paradise-usa",
            "htmlFormattedUrl": "www.travelandleisure.com/<b>articles</b>/paradise-usa",
            "pagemap": {
                "cse_image": [
                    {
                        "src": "http: //static0.travelandleisure.com/images/amexpub/0000/6261/200702_urban.jpg"
                    }
                ],
                "cse_thumbnail": [
                    {
                        "width": "160",
                        "height": "200",
                        "src": "https: //encrypted-tbn1.gstatic.com/images?q=tbn: ANd9GcR_Jhmej45Lu7L3bQoKz1poITJ5ZeuVvKhH62myfBOj-1VEX9oqwIhvH74"
                    }
                ],
                "metatags": [
                    {
                        "fb: app_id": "145695458805001",
                        "og: url": "http: //www.travelandleisure.com/articles/paradise-usa",
                        "og: site_name": "Travel+Leisure",
                        "og: image": "http: //static0.travelandleisure.com/images/amexpub/0000/6261/200702_urban.jpg",
                        "og: type": "article",
                        "og: title": "Driving: Florida’sNewUrbanistExperiments",
                        "og: description": "OnaroadtripacrossFlorida,KarrieJacobsgoesinsearchoftheauthenticamidNewUrbanistexper..."
                    }
                ]
            }
        }
    ]
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T10:27:09.993

首先将您的类 Cse_Image 重命名为更传统的 java 名称（可能是 CseImage？），与缩略图类相同。

然后你可以试试 genson 库[http://code.google.com/p/genson/](http://code.google.com/p/genson/)。将 @JsonProperty("cse_image") 注释放在您的图像字段上（或者在您的 setter/getter 上，如果有的话）并且它可以工作：

```
 Genson genson = new Genson();
 Mapper mapper= genson.deserialize(json,Mapper.class);
 System.out.println("src here"+mapper.items[0].pagemap.image[0].src); 
```

# perl - 从 Perl 中的数据库到电子表格

> ID：12756971
> 
> 赞同：-1
> 
> 时间：2012-10-06T05:17:50.290
> 
> 标签：perl

我有一个这样的事务表：

```
TransactionID    Date           AccountNumber   Type    Amount  
657520           02-07-1999     016901581432    Debit   16000  
657524           02-07-1999     016901581432    Debit   13000  
657538           09-07-1999     016901581432    Credit  11000  
657548           18-07-1999     016901581432    Credit  15500  
657519           02-07-1999     016901581433    Debit   12000  
657523           02-07-1999     016901581433    Credit  11000  
657529           03-07-1999     016901581433    Debit   15000  
657539           10-07-1999     016901581433    Credit  10000  
657541           11-07-1999     016901581434    Debit   12000  
657525           03-07-1999     016901581434    Debit   15000  
657533           05-07-1999     016901581434    Credit  12500 
```

我应该使用数据库中的 SQL 查询找到每个帐户的总借方和总贷方金额，并使用 Perl 将结果存储在电子表格中。

这是我的代码：

```
#!/usr/bin/perl
use DBI;
use strict;
use warnings;
use Spreadsheet::WriteExcel;
$dbh = DBI->connect('dbi:database','prithvi','prithvi') or die "Couldn't connect";
my $tran_cur = $dbh->prepare("SELECT AccountNumber, Type, SUM(Amount) FROM transaction GROUP BY AccountNumber, Type");
my $workbook = Spreadsheet::WriteExcel->new('results.xls');
my $worksheet = $workbook->add_worksheet('Result');
my $row = 0;
my $col = 0;
$worksheet->write_row($row++, $col, ['Account Number','Type','Total Amount']);
while( my @data = $tran_cur->fetchrow_array)
{
 $worksheet->write_row($row++, $col, \@data);
} 
```

我在代码中哪里出错了？请帮忙。我只得到 Excelsheet 中的标题作为输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T05:22:54.773

您需要在调用之前执行准备好的语句`$tran_cur->fetchrow_array`：

```
$tran_cur->execute; 
```

# python - Python 在 if 语句中的“=”上引发 SyntaxError

> ID：12756972
> 
> 赞同：-5
> 
> 时间：2012-10-06T05:17:56.007
> 
> 标签：python

我正在编写一个程序，它接受用户输入并将其与不同的命令字符串进行比较。当我尝试运行该程序时，我得到了一条`SyntaxError`关于该行的信息`if method = 'addition':`，IDLE`=`以红色突出显示了该行。

```
num1 = input('Enter your first value: ')
num2 = input('Enter your second value: ')
method = input('Which method will you be using? ')

if method = 'addition':
    solveFor = num1 + num2
elif method = 'subtraction':
    solveFor = num1 - num2
else:
    print("Please enter 'addition' or 'subtraction'") 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-06T05:19:25.080

Python 中的等式比较运算符是`==`. `=`是为变量赋值的语句。

您的代码还有许多其他错误（以未定义的名称开头`num1`, `num2`，一开始什么也不做）。您应该阅读[Python 教程](http://docs.python.org/tutorial/)以复习 Python 语法的基础知识。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-06T05:35:09.327

以下是一些提示：

*   Python 不需要您像其他语言那样声明变量，因为它是动态类型的，因此无需`num1`在脚本的开头编写。
*   单等号用于设置值 ( `a = 2`)，而双等号用于比较值 ( `if a == 2:`)。
*   毕竟`if`，你需要放置冒号`else`和`elif`语句。
*   缩进在 Python 中很重要。

你似乎缺乏基本的 Python 知识，应该认真阅读一个体面的 Python 教程。有人告诉我这本在线书很好： http: [//learnpythonthehardway.org/book/](http://learnpythonthehardway.org/book/)

作为参考，这是您的代码的固定版本：

```
print "Welcome to PyCalcBasic"

num1 = input("Enter your first value")
num2 = input("Enter you second value")
method = raw_input("Which mathematical operator will you be using?")

if method == "addition":
    solveFor = num1 + num2
elif method == "subtraction":
    solveFor = num1 - num2
else:
    print ("Please enter 'addition' or 'subtraction'") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T05:19:38.963

1.  单等号`=`是赋值，双等号`==`是等式测试
2.  `if`在or语句的条件之后`elif`，或在`else`

# excel - 数据透视表 (Excel) 中不同类型的小计

> ID：12756974
> 
> 赞同：1
> 
> 时间：2012-10-06T05:18:15.127
> 
> 标签：excel, pivot-table

感谢您支持解决数据透视表中的小计问题...

我有一个对表格中的值进行求和的字段，但我希望将某个组的平均值作为小计。

让我澄清一下我的意思：

该表如下所示：

```
PROGRAM              PROJECT                VALUE
P1                   Project 1.1            8
P1                   Project 1.2            1,94
P1                   Project 1.3            10,10
P1                   Project 1.4            5 
```

因此，我希望数据透视表显示 P1 = 6,26。我将 Program 字段设置为 AVERAGE 但是，看看我的数据透视表发生了什么：

![问题](../Images/1069ee8513262cd2417f5d4a47815646.png)

任何想法？

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-12T22:28:33.447

有许多与数据透视表相关的平均选项，我只能推测您选择了一个不合适的选项，或者您的 Excel 版本与我的不同（如果仅用于默认设置），因为当我旋转您的示例数据时（已调整`,`为`.`s 并缩写为“项目”到“P”）我看到：

![SO12756974 示例](../Images/20fb7c6d5825ee21341307ce57becfe3.png)

在我右键单击图像中显示的单元格*后*使用我的默认（相当标准）设置`6.26`（即您需要的结果 - 在这样做之前 Σ 值默认为值的总和，此单元格显示 25.04）和值字段设置。 .. 为**汇总值字段**选择“平均值” 。

# python - 为 alembic.ini 使用不同的 .ini 文件

> ID：12756976
> 
> 赞同：13
> 
> 时间：2012-10-06T05:18:25.483
> 
> 标签：python, pyramid, alembic

我正在尝试为我的 Pyramid 项目配置 SQLAlchemy Alembic，并且我想将我的 development.ini（或 production.ini）用于 Alembic 的配置设置。是否可以指定我希望在 Alembic 中的任何位置使用的 .ini 文件？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-06T06:11:08.197

只需`alembic -c /some/path/to/another.ini`在运行 alembic 命令时指定。您甚至可以将该`[alembic]`部分放在您的 development.ini 和 production.ini 文件中，并且只需`alembic -c production.ini upgrade head`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-02T08:28:13.797

`%(VARIABLE)s`在许多情况下，您还可以使用一个共享的 alembic.ini 并在其他地方动态计算一些部分，并通过替换将它们插入到 alembic.ini 中。有关完整说明，请参阅[https://stackoverflow.com/a/55190497/2536029](https://stackoverflow.com/a/55190497/2536029)。

# google-app-engine - 泽西谷歌应用引擎 - 找不到资源

> ID：12756977
> 
> 赞同：1
> 
> 时间：2012-10-06T05:18:30.753
> 
> 标签：google-app-engine, jersey

我正在使用 Jersey 的 Google App Engine 中部署一个示例应用程序。但是，当我尝试对 REST 资源执行 GET 或 POST 时，我收到 - 404 NOT FOUND 错误。看起来我错过了一些东西。

REST 资源代码：

```
 import javax.ws.rs.Consumes;
    import javax.ws.rs.GET;
    import javax.ws.rs.POST;
    import javax.ws.rs.Path;
    import javax.ws.rs.Produces;
    import javax.ws.rs.core.MediaType;

    import org.codehaus.jettison.json.JSONObject;

    @Path("/stream")
    public class StreamingResource {
        private static final Logger log = Logger
        .getLogger(FacebookStreamingResource.class.getName());

        @POST
        @Path("/callback")
        @Consumes(MediaType.APPLICATION_JSON)
        @Produces(MediaType.TEXT_PLAIN)
        public String putStreamData(JSONObject jsonEntity) {
            return jsonEntity.toString();
        }

        @GET
        @Path("/get")
        @Produces(MediaType.TEXT_PLAIN)
        public String getStreamData() {
            return "Get successful";
        }
    } 
```

这是 web.xml 文件

```
 <?xml version="1.0" encoding="utf-8" standalone="no"?>
    <web-app xmlns="http://java.sun.com/xml/ns/javaee"
        xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="2.5"
        xsi:schemaLocation="http://java.sun.com/xml/ns/javaee               http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
        <servlet>
            <servlet-name>SystemServiceServlet</servlet-name>
            <servlet-class>com.google.api.server.spi.SystemServiceServlet</servlet-class>
            <init-param>
                <param-name>services</param-name>
                <param-value />
            </init-param>
        </servlet>
        <servlet-mapping>
            <servlet-name>SystemServiceServlet</servlet-name>
            <url-pattern>/_ah/spi/*</url-pattern>
        </servlet-mapping>

        <servlet>
            <servlet-name>JerseyWebApplication</servlet-name>
            <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
            <init-param>
                <param-name>com.sun.jersey.config.property.packages</param-name>
                <param-value>com.vbv.fb</param-value>
            </init-param>
            <load-on-startup>1</load-on-startup>
        </servlet>
        <servlet-mapping>
            <servlet-name>JerseyWebApplication</servlet-name>
            <url-pattern>/stream/*</url-pattern>
        </servlet-mapping>
        <session-config>
            <session-timeout>30</session-timeout>
        </session-config>
    </web-app> 
```

我已经包括以下罐子：

asm-3.1.jar jersey-client-1.12.jar jersey-core-1.12.jar jersey-json-1.12.jar jersey-server-1.12.jar jersey-servlet-1.12.jar jettison-1.1.jar jackson-core-asl -1.7.1.jar jackson-jaxrs-1.7.1.jar jackson-mapper-asl-1.7.1.jar jackson-xc-1.7.1.jar

App Engine SDK 版本为 1.7.0

任何建议将不胜感激 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T05:23:29.880

当我将 web.xml 中的 /stream/* 更改为 /* 时，它可以工作:)

# google-drive-api - Google Drive 文件夹删除行为

> ID：12756981
> 
> 赞同：7
> 
> 时间：2012-10-06T05:19:22.080
> 
> 标签：google-drive-api

我有一个`FILE-1`包含两个父文件夹（`FOLDER-1`和）的文档（ `FOLDER-2`）。

如果我删除`FOLDER-1`，`FILE-1`也被删除。但是，我预计 only`FOLDER-1`会被删除，并作为 的父级删除`FILE-1`，这将保持不变。

这是预期的行为，还是错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T06:40:28.883

[根据此Google Drive 支持文档](http://support.google.com/drive/bin/answer.py?hl=en&answer=2375091)，它似乎是设计使然。似乎删除文件夹和从文件中删除父级是两件完全不同的事情。

> 3\. 该文件夹将被移至垃圾箱，该文件夹中的所有项目也将被移至垃圾箱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T05:30:07.763

我也发现了同样的事情，但我认为他们只想要这个......当一个文件夹被移动到垃圾箱时，该文件夹中的所有项目也将被移动到垃圾箱。

他们可能已经做了一些事情，例如如果您愿意删除一个文件夹，他们会要求确认消息，**用户是否要删除其中的文件**，**如果不是，他们会要求用户将其移动到另一个文件夹**但又在那里选择和那里的思维方式。

# postgresql - 别名表（读/写视图）

> ID：12756991
> 
> 赞同：0
> 
> 时间：2012-10-06T05:21:03.393
> 
> 标签：postgresql

我想知道是否可以在 postgresql 中为表创建一个附加名称，以便可以通过其新别名或原始名称来引用该表？

就像为表添加视图一样，但是当您在“视图”上更新或插入时，它会写入基础表。

这样做的目的是能够重命名表而不必一次更新所有数据库客户端（没有停机时间）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T05:24:41.950

您可以使用 Postgres RULES 来执行此操作。

看看[这篇](http://legitimatesounding.com/blog/Stupid_PostgreSQL_Tricks%3a_Writable_Views.html)文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T10:00:37.443

@CraigRinger 提到[了这个答案](http://www.depesz.com/2010/10/16/waiting-for-9-1-triggers-on-views/)：

```
CREATE VIEW alias_as_view as SELECT * FROM original_table;

CREATE FUNCTION write_to_underlying_table() RETURNS TRIGGER AS $$
BEGIN
IF TG_OP = 'INSERT' then
    raise notice 'INSERT trigger, NEW = [%]', NEW;
ELSIF TG_OP = 'UPDATE' then
    raise notice 'UPDATE trigger, OLD = [%], NEW = [%]', OLD, NEW;
ELSE
    raise notice 'DELETE trigger, OLD = [%]', OLD;
END IF;
RETURN NULL;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER view_writable_trigger INSTEAD OF INSERT OR UPDATE OR DELETE 
      ON alias_as_view FOR EACH ROW EXECUTE PROCEDURE write_to_underlying_table(); 
```

我暂时拒绝了它，例如失败的查询：

```
INSERT INTO alias_as_view VALUES ('existing_key', 'some_value'); 
```

似乎已成功执行，即使实际的 INSERT 语句`original_table`由于唯一键违规而失败。

# xcode - 程序如何知道它是从 xcode 启动的？

> ID：12756992
> 
> 赞同：0
> 
> 时间：2012-10-06T05:21:15.660
> 
> 标签：xcode, debugging

> **可能重复：**
> [检测 iOS 应用程序是否在调试器中运行](https://stackoverflow.com/questions/4744826/detecting-if-ios-app-is-run-in-debugger)

当我的程序从 Xcode Debugger 启动时（相对于直接从模拟器或设备启动），我想添加一些特殊的处理代码。当 Xcode 启动一个程序进行调试时，它会设置一个环境变量吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T05:34:50.883

最简单的方法是编辑调试方案以传递命令行类型参数，并在 main() 中检测它。

# ubuntu - 您可以使用 gzip 压缩您在终端中键入的文本吗？

> ID：12756999
> 
> 赞同：0
> 
> 时间：2012-10-06T05:23:50.733
> 
> 标签：ubuntu, gzip

您可以使用 gzip 压缩您在终端中键入的文本吗？

如果是，那么如何？

如果不是，那么这条线是什么意思？：

> 当您不指定任何要压缩的文件或指定 - 作为文件名时，gzip 从标准输入读取，压缩读取的内容，并将结果写入标准输出。

我在很多网页上都读过它，包括这个：[http ://www.mkssoftware.com/docs/man1/gzip.1.asp](http://www.mkssoftware.com/docs/man1/gzip.1.asp)

此外，当我`gzip -f`在终端中输入时，光标会转到换行符并开始接受输入，但我只需要按 Ctrl+C 即可，然后什么也没有发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T06:18:37.667

是的，你可以，但这并不常见。

例如，这是完全合法的（我输入了 " `Hello, world.`", then `Enter`, then `Ctrl-D`）。

```
$ gzip > input.gz
Hello, world.
$ ls -l input.gz 
-rw-r--r-- 1 kst kst 34 Oct  5 23:18 input.gz
$ gzip -d < input.gz 
Hello, world. 
```

（压缩文件实际上比输入大；这对于非常小的输入很常见。）

但请记住，标准输入不一定来自键盘。例如，该`du`命令打印磁盘使用情况的摘要，如果在大目录上运行它会生成大量输出。如果您想直接以压缩形式保存输出，您可以键入：

```
du -a / | gzip > du-a.out.gz 
```

命令的标准输入`gzip`来自命令的输出`du -a /`；其标准输出被写入新文件`du-a.out.gz`。

该`tar`命令是另一个常见示例：

```
tar cf - some_dir | gzip > some_dir.tar.gz 
```

（但许多版本`tar`都可以选择执行此操作，而无需显式调用`gzip`命令）。

至于你问题的最后一部分：

> 此外，当我在终端中键入 gzip -f 时，光标会转到换行符并开始接受输入，但我只需 Ctrl+C 将其退出，然后什么也没有发生。

键入会`Ctrl-C`杀死`gzip`进程，并且可能不允许它完成写入输出。您需要键入`Ctrl-D`以触发文件结束条件；这让`gzip -f`命令正常完成。但是您通常不想这样做；它将压缩输出写入您的终端，其中可能包含可能会弄乱您的终端设置的控制字符。