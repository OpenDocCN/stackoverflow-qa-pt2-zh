# StackOverflow 问答 13633000-13633999

# php - 每 30 分钟或 1 小时自动将文件从一个目录复制到另一个目录

> ID：13633001
> 
> 赞同：-1
> 
> 时间：2012-11-29T19:13:53.760
> 
> 标签：php

如何在每隔 30 分钟后自动将文件从源目录复制到目标目录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T19:19:42.593

如果您使用标准的 LAMP 堆栈，您可以只做一个调用 rsync 的 cron 作业。

例如运行 crontab -e

并添加一个条目，例如

```
* * * * * rsync -av /path/to/files/source/ /path/to/copy/files/to/ 
```

将每 1 分钟复制一次文件。

查看：
[http](http://en.wikipedia.org/wiki/Cron)
://en.wikipedia.org/wiki/Cron和
[http://en.wikipedia.org/wiki/Rsync](http://en.wikipedia.org/wiki/Rsync)

# jquery - WebForms (vs MVC) 4.0 版对移动设备和 jQuery 的友好程度如何？

> ID：13633003
> 
> 赞同：3
> 
> 时间：2012-11-29T19:14:04.990
> 
> 标签：jquery, asp.net-mvc, .net-4.0, webforms, mobility

我相信 MVC 支持基于类型和/或分辨率的浏览器嗅探和切换视图。在我们团队在使用 Webforms 或 MVC（4.0 版）开始新项目之间的持续争论中，Webforms 是否有这种支持？如果不是，我们是否只使用 css 媒体标签和 Twitter Bootstrapper 来提供灵活的布局？我们的一些应用程序是针对固定显示器的，但其他部分应该是平板电脑和手机友好的。我想知道如果我们使用 WebForms 以后这是否会更难。

此外，MVC 让您可以完全控制标记，因此对 jQuery 非常友好。鉴于我们无法使用服务器控件来控制标记，WebForms jQuery 是否友好？

像这样的任何其他问题我没有想到可能会有所作为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T16:18:00.173

Newer versions of ASP.NET webforms (especially 4.0 onwards) are much more "friendly" towards serving up content based upon the specific device that's accessing the website, as well as having improvements that allow much "cleaner" output of the rendered mark-up that's generated by server-side controls.

This is also true of MVC of course, but don't forget that [ASP.NET MVC is written on top of the same ASP.NET runtime that ASP.NET Webforms uses](http://www.hanselman.com/blog/OneASPNETSneakPeekElegantWebFormsAndSnowballsInHell.aspx). Because of this, lots of the benefits that are originally exposed via MVC are now available to Webforms, too.

There is a very good whitepaper on Microsoft's [ASP.NET site](http://asp.net), [How To: Add Mobile Pages to Your ASP.NET Web Forms / MVC Application](http://www.asp.net/whitepapers/add-mobile-pages-to-your-aspnet-web-forms-mvc-application), that explains in detail how features such as [`Request.Browser.IsMobileDevice`](http://msdn.microsoft.com/en-us/library/system.web.configuration.httpcapabilitiesbase.ismobiledevice.aspx) & [`Request.Browser.ScreenPixelsWidth`](http://msdn.microsoft.com/en-us/library/system.web.configuration.httpcapabilitiesbase.screenpixelswidth%28v=vs.90%29.aspx) (both fundamental features of the underlying ASP.NET runtime therefore equally applicable to both WebForms & MVC) can be used to detect the capabilities of the device currently accessing the website. If you require very detailed information about the device, then you'll need to integrate something like [WURFL](http://wurfl.sourceforge.net/) into your website irrespective of whether you're using WebForms or MVC. Moreover, if you require very specific layouts on devices with different form-factors and aspect ratios, you'll need to provide pages (either MVC views or ASP.NET webpages) that are specifically designed and targeted to those devices either way.

With regard to the ability to cleanly use jQuery with ASP.NET WebForms, since ASP.NET WebForms 4.0, you have the ability to tightly control the [`ClientID`](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientid.aspx) values that are applied to the DOM elements in the rendered markup. There's a new property called, [`ClientIDMode`](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientidmode.aspx) that [makes it](http://www.west-wind.com/weblog/posts/2009/Nov/07/ClientIDMode-in-ASPNET-40) [very easy](http://blogs.msdn.com/b/mikeormond/archive/2009/05/06/asp-net-4-0-webforms-enhancements.aspx) to ensure you have a known value for an element's ID, thus enabling a much easier use of jQuery. Setting the value of the `ClientIDMode` to either of the `static` or `predictable` values will give you ID values to your elements that are much easier to work with in jQuery. One thing to be aware of here, though, is that since the ASP.NET Runtime is still generating the HTML elements and assigning values to their ID's, [you can still end up with duplicated ID values](https://stackoverflow.com/questions/6057490/is-there-any-drawback-to-set-clientidmode-static-on-every-object-set-on-main), especially when using compound controls (i.e. controls such as the [`GridView`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.aspx) control that has it's own ID value, but is itself made up of many constituent controls/elements - each with their own ID's of course).

Overall, the choice between ASP.NET WebForms and ASP.NET MVC will probably come down to what you're most comfortable and productive with. Personally, I would use MVC as I like the additional benefits of it's testability and better separation of concerns over WebForms, although it must be said that ASP.NET WebForms version 4.0+ is more powerful and much improved over the previous versions - you can even have [MVC-style routing, extensionless URL's and more](http://www.hanselman.com/blog/IntroducingASPNETFriendlyUrlsCleanerURLsEasierRoutingAndMobileViewsForASPNETWebForms.aspx) with ASP.NET WebForms nowadays.

# jquery - 数据表多过滤器选择 - 每列的处理方式不同

> ID：13633005
> 
> 赞同：2
> 
> 时间：2012-11-29T19:14:11.650
> 
> 标签：jquery, datatables

我正在使用 datatables.net 来显示 5 列和大约 2,000 行。我已经将此[API 初始化](http://datatables.net/examples/api/multi_filter_select.html)应用到我的代码中并且它可以工作，但是由于我的表中数据的数量和类型，过滤器下拉菜单没有那么有用。

以下是我正在使用的数据的列标题：

```
<thead>
 <tr>
  <th>Post Date</th>
  <th>Post Title</th>
  <th>Author Name</th>
  <th>Categories</th>
  <th>Page Views</th>
 </tr>
</thead> 
```

**发布日期**：包含 2012 年的几乎每一天，格式为“Thu 11/29/12”“Wed 11/28/12”等。我希望过滤器下拉仅包含一周中 7 天的缩写. 这样我们就可以过滤所有星期一的帖子等。

**帖子标题**：包含大约 2,000 个独特的博客帖子标题，因此这里没有什么可过滤的。根本不显示过滤器下拉菜单。

**作者**：许多不同的作者提交帖子，因此此过滤器下拉列表应基于列中的数据构建。

**类别**：包含逗号分隔的短列表，如“新闻、事件、体育”或“优惠、周末”或可能只有一个类别“夜生活”等。类别数量有限，这些不会改变，所以硬编码列表会工作。我不需要所有类别的组合。只是为了能够过滤归类为“交易”的帖子，而不管“交易”与什么配对。

**Page Views**：包含不同的数值，因此不需要显示过滤器。当视图大于 100、500、1000 等时，这里可能会变得贪婪并要求过滤器，但这不是必需的。

我刚刚学习 jquery，这就是为什么我很高兴看到可以轻松实现 Datatables 以提供大量信息的专业外观和功能视图。但是，我发现我无法真正自定义其他人的工作，所以我希望一种 Stack Overflow 用户能够编辑表初始化代码（见此处：[http](http://datatables.net/examples/api/multi_filter_select.html) ://datatables.net/examples/api/multi_filter_select.html ) 与我上面概述的表格一起工作。

您的回答可能是，这对工作来说太习惯了，并且需要的时间对于免费的 Stack Overflow 解决方案来说并不典型。但是，我认为如果您发布一些代码，其他人可能会发现此示例很有用。谢谢您的考虑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T06:04:55.027

这个插件帮助了我：[https](https://code.google.com/p/jquery-datatables-column-filter/) ://code.google.com/p/jquery-datatables-column-filter/特别是复选框示例：http: [//jquery-datatables-column-filter.googlecode.com/svn/trunk /checkbox.html](http://jquery-datatables-column-filter.googlecode.com/svn/trunk/checkbox.html)

# javascript - 幻灯片中的图像大小调整问题

> ID：13633006
> 
> 赞同：-1
> 
> 时间：2012-11-29T19:14:16.563
> 
> 标签：javascript, css, image, resize, slide

问题是，在我的一个页面中，我有一张幻灯片，其中我的图像为 1920x1080，而幻灯片的宽度仅设置为 1350。我的图像没有居中，您只看到图片左上角的 1/3 左右。幻灯片也没有伸到屏幕的末端（<---->），那里有这个很小的空间。有什么解决办法吗？

图片：[http ://tinypic.com/view.php?pic=29crp7a&s=6](http://tinypic.com/view.php?pic=29crp7a&s=6)

代码

html:

```
<div id="container">

<div id="banner">

<ul class="bjqs">

<li><img src="images/lamborghini/av_lp700-4_roadster_ov3_v2_1920x1080.jpg" title="This is my slideshow!"></li>

<li><img src="images/lamborghini/gal_lp_550-2_home_1920x1080.jpg" title="Apparently it works!"></li>

<li><img src="images/lamborghini/gal_lp_550-2_spyder_home_1920x1080.jpg" title="By Andreas!"></li>

</ul>

</div>

</div>

<script src="js/jquery-1.6.2.min.js"></script>

<script src="js/basic-jquery-slider.min.js"></script>

<script>
  $(document).ready(function() {

    $('#banner').bjqs({
      'animation' : 'slide',
      'width' : 1350,
      });

  });

</script> 
```

CSS：

```
ul.bjqs{position:relative; list-style:none;padding:0;margin:0;overflow:hidden;  display:none;}
li.bjqs-slide{display:none;position:absolute;}

ul.bjqs-controls{list-style:none;margin:0;padding:0;z-index:9999;}

ol.bjqs-markers{list-style:none;margin:0;padding:0;z-index:9999;}
ol.bjqs-markers li{float:left;}

p.bjqs-caption{display:block;width:96%;margin:0;padding:2%;position:absolute;bottom:0;}

/* demo styles */

body{
font-family: 'Carter One', sans-serif;
}

#container{
width:100%;
padding:20px 0;
margin:0 auto;
overflow:hidden;
}

#banner {
height:300px;
width:700px;
margin:0 auto;
position:relative;
background:#fff;
#fff solid;

}

ul.bjqs-controls li a{
display:block;
padding:5px 10px;
position:absolute;
background:#000000;
color:#fd0100;
text-decoration:none;
text-transform:uppercase;
}

a.bjqs-prev{
left:0;
}

a.bjqs-next{
right:0;
}

p.bjqs-caption{
background:rgba(0,0,0,0.7);
color:#fff;
text-align:center;
}

ol.bjqs-markers{
position:absolute;
bottom:-50px;
}

ol.bjqs-markers li{
float:left;
margin:0 3px;
}

ol.bjqs-markers li a{
display:block;
height:10px;
width:10px;
border:4px solid #fff;
overflow:hidden;
text-indent:-9999px;
background:#000;
border-radius:10px;

}

ol.bjqs-markers li.active-marker a{
background:#fd0100;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T19:32:47.240

解决方案实际上非常简单。您需要在 CSS 中将图像的宽度设置为 100%。

```
.bjqs img {
     width:100%;
} 
```

希望有帮助，祝你好运

# php - PHP：网站用户身份验证

> ID：13633010
> 
> 赞同：1
> 
> 时间：2012-11-29T19:14:48.653
> 
> 标签：php, authentication, curl

我目前正在编写一个从网站获取文件的脚本，然后使用我已经编写的其他一些脚本处理该数据，但是我在登录时遇到了一些困难。

我遇到困难的地方是用户身份验证。

网站本身有一个登录名/密码，这很好。有很多关于如何使用 Curl 提交表单数据来登录网站的示例。

但在登录网站之前，它要求您在“需要身份验证”弹出窗口中输入用户名和密码；

> [http://somemadeupwebsite.co.uk](http://somemadeupwebsite.co.uk)正在请求用户名和密码 。该网站说：“私人”

不幸的是，我不知道如何通过 PHP 通过这个特定的身份验证。除此之外，我应该没有任何困难使用 curl 通过用户名/密码表单登录到网站本身，然后获取我的数据，但是我需要知道我是否可以在开始放置之前克服这第一个障碍本末倒置。

是否有能够做到这一点的功能，或者通过 Curl 做到这一点的方法？

如果有办法完全解决这个问题，那就更好了。如果我可以自己登录该站点，并允许我的脚本也共享该身份验证（该脚本将在同一浏览器本地运行），那么这将不是问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T19:19:10.663

该弹出窗口是由于站点使用基本 http 身份验证，cURL 可以通过设置用户名和密码来通过它，如下所示：

```
curl_setopt($curl, CURLOPT_USERPWD, $user_here . ":" . $password_here ); 
```

# php - 如何在wordpress中找到类别ID？

> ID：13633013
> 
> 赞同：0
> 
> 时间：2012-11-29T19:15:06.220
> 
> 标签：php, wordpress, content-management-system

我是 wordpress 新手，我需要知道如何找到类别 id 而不是类别名称？在 wordpress 中。

任何一个 非常感谢

注册，维姬

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T19:25:45.957

```
<?php
     $category_id = get_cat_ID('Category Name');
     $q = 'cat=' . $category_id;
     query_posts($q);
     if (have_posts()) : while (have_posts()) : the_post();

     the_content();

     endwhile; endif;
?> 
```

取自 Wordpress Codex：[http ://codex.wordpress.org/Function_Reference/get_cat_ID](http://codex.wordpress.org/Function_Reference/get_cat_ID)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T19:21:44.760

你试过了吗？

```
global $wp_query;
$cat_ID = get_query_var('cat'); 
```

# android - 禁用强制停止按钮或创建不可停止的 android 服务

> ID：13633023
> 
> 赞同：-1
> 
> 时间：2012-11-29T19:15:55.283
> 
> 标签：android, service

我有以下问题，我如何禁用强制停止按钮，这是为了完成我的项目的一项任务，这不是针对病毒、恶意软件或恶意的东西。我必须禁用它，因为我的服务不会被杀死，因为在他内部它会检查时间并在系统的确定时间创建一个文件，这是因为我的客户想要在创建 Android 操作系统时阻止它。我已经搜索过，如果你开始使用 with`startForeground()`方法，强制停止按钮变为禁用，另一种解决方案，但我没有找到太多关于创建系统服务的材料，如果有人知道我会很高兴。如果想对我的工作和作品提出建议，我将非常感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T19:19:56.340

你不能。用户总是能够停止手机上的服务，因为他应该是他的手机，他可以决定他不希望你的应用程序再运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T19:20:36.727

出现强制关闭按钮是因为您的程序已进入无法正常执行的状态（例如未捕获的异常）。禁用关闭按钮的显示不会解决您的问题，您应该调试您的代码。

# jquery - 需要打印 keydown 事件中收到的字符

> ID：13633028
> 
> 赞同：0
> 
> 时间：2012-11-29T19:16:04.753
> 
> 标签：jquery, keypress, keydown, preventdefault

我有一个按键事件。我可以从中取出keyCode。我希望首先阻止默认使用`event.preventDefault`，然后在进行一些条件检查后，将与键码对应的字符打印回光标实际所在的位置。

我想我可以使用

```
var character = String.fromCharCode(e.charCode); 
```

但是我如何将它打印回 iframe 正文，同时考虑到我可能需要在不干扰光标位置的情况下将此字符插入到已经呈现的文本中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T19:24:57.470

你应该`preventDefault`只在你拥有的那些特殊条件下做。稍后使用`preventDefault`然后插入字符只会使问题复杂化（获取插入符号位置，插入字符然后设置插入符号位置）。

我认为没有一种可靠的方法可以从他们的 keyCode 中获取确切的字符，因为它因不同的浏览器和不同的键盘类型而异。

检查此[https://stackoverflow.com/a/13127566/297641](https://stackoverflow.com/a/13127566/297641)答案以获取解决方法。

# java - 是否可以通过使用不同的类型列表来“重载”泛型类？

> ID：13633030
> 
> 赞同：2
> 
> 时间：2012-11-29T19:16:12.663
> 
> 标签：java, generics, overloading

我想要的实际上是这样的：

```
public class Foo<T> {
    // ...
}

public class Foo<T, S> {
    // ...
} 
```

请注意，类的名称相同，但类型列表的长度不同。上面的代码在 Java 中不起作用，但我希望它表明了我的意图。是否可以在 Java 中做类似的事情？

例子：

```
public class Foo<T> {
    public Integer call(T input) {
        // ...
    }
}

public class Foo<T， S> {
    public S call(T input) {
        // ...
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T19:18:46.823

您不会覆盖类，而是覆盖方法。类可能是子类。

这个有可能：

```
public class Zoo<T, S, U> extends Foo<T>
{
    // ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T19:20:56.170

我想这就是你想要做的：

类 foo1.Foo：

```
package foo1;

public class Foo<T, S> {
    public S call(T input) {
        // ...
    }
} 
```

类 foo2.Foo：

```
package foo2;

public class Foo<T> extends foo1.Foo<T, Integer> {
    public Integer call(T input) {
        // ...
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T19:30:21.563

当您将类定义为

`public class Foo<T> { // ... }`

从技术上讲，我们告诉编译器用 Object 替换 Generic，因为 T 是无界的。

当我们将类定义为

```
public class Foo<T, S> {
// ...} 
```

编译器不知道如何解决这个问题。

# phabricator - 如何在phabricator中重新打开差异审查？

> ID：13633031
> 
> 赞同：13
> 
> 时间：2012-11-29T19:16:13.537
> 
> 标签：phabricator

我在 phabricator 中为开发分支创建了评论，对其进行了多次更新，然后推送分支进行测试。审查未完成，但phabricator 自动关闭它。

我可以创建另一个差异评论，但所有评论和更新都将是旧的......

那么有没有办法重新打开封闭式审查？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-07-09T19:53:21.770

我知道有更好的方法！

编辑：虽然旧答案有效......但这**不是**如何做到这一点。而是这样做：

1.  转到配置部分，然后选择差异组。
2.  找到选项**差异。允许重新打开**
3.  将值设置为“**启用重新打开**”并保存配置条目。
4.  导航至封闭式差异审核。
5.  转到底部，找到**Leap Into Action**部分。
6.  选择操作**重新打开**并添加评论
7.  按 Clowncopterize 和 presto！重新开放！

无需破解数据库。

此外，请查看存储库设置，以按照您想要的方式设置自动关闭。

1.  转到存储库管理部分
2.  按编辑您要管理的存储库
3.  选择跟踪选项卡
4.  在*Application Configuration*部分，您会看到两个设置：**Autoclose**和**Autoclose Branches**。

我已将**Autoclose**设置为*Enabled*，并将**Autoclose Branches**设置为*master*。这样，只有推送到 origin/master 才会自动关闭差异审查。

---------旧答案--------

sberry 的建议是将 SSH 连接到您的服务器，然后打开一个 MySql 提示符：

```
mysql> USE phabricator_differential;
mysql> select status from differential_revision where id=5; (If your revision is D5 for example) 
```

请注意，您的状态不是 0。很可能是 3 表示已关闭。

```
mysql> update differential_revision set status=0 where id=5; 
```

现在您的修订版再次打开。

我觉得这很麻烦，但从来没有达到目标。我希望有人可以提出更好的方法来做到这一点。

# java - 让 Spring 写 Joda DateTime/DateMidnight

> ID：13633033
> 
> 赞同：2
> 
> 时间：2012-11-29T19:16:20.143
> 
> 标签：java, spring, jodatime

我正在尝试使用 Spring 3 JdbcTemplate 编写日期信息。我有以下内容：

```
public void foo(DateMidnight date){
    jdbcTemplate().update(sql,date);
} 
```

如果日期是 java.util.Date，这会很好，但是使用 DateMidnight，这会爆炸。我当然可以这样做：

```
public void foo(DateMidnight date){
    jdbcTemplate().update(sql,date.toDate());
} 
```

但是很容易忘记这样做。有没有办法告诉 Spring (3)，每当 JdbcTemplate 获得 DateMidnight（或 DateTime）时，它应该在存储之前将其转换为 Date？我阅读了有关[转换服务 API](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/validation.html)的信息，但从我看到的代码示例中，它仅适用于 Spring MVC 中的转换。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T19:32:22.717

据我了解，您需要在那里覆盖[`JdbcTemplate.newArgPreparedStatementSetter()`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/jdbc/core/JdbcTemplate.html#newArgPreparedStatementSetter%28java.lang.Object%5B%5D%29)并实施适当的转换，如下所示：

```
protected PreparedStatementSetter newArgPreparedStatementSetter(Object[] args) {
    Object[] converted = new Object[args.length];
    for (int i = 0; i < args.length; i++) {
        Object arg = args[i];
        if (arg instanceof DateTime) {
            converted[i] = ((DateTime) arg).toDate();
        } else {
            converted[i] = arg;
        }
    }
    return super.newArgPreparedStatementSetter(converted);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T19:40:25.850

此类问题的最佳解决方案是创建您自己的数据访问对象 ( `DAO`) 层。永远不要让您的代码`JdbcTemplate`直接与之对话，编写一个知道如何处理 a `DateMidnight`（以及您需要的任何其他内容）的层，然后始终编写您的代码与`DAO`.

这里有一些使用的教程`JdbcTemplate`和 a `DAO`- 它足够长，我在这里写出来很愚蠢，但这些都很好。

*   [第1条](http://www.vogella.com/articles/SpringJDBC/article.html)
*   [第二条](http://velmurugan-pousel.blogspot.com/2010/11/spring-jdbcdao-example.html)

# c - 简单 VBO 示例的问题

> ID：13633038
> 
> 赞同：0
> 
> 时间：2012-11-29T19:16:47.523
> 
> 标签：c, opengl-es, vbo

我正在尝试运行一个超级简单的 GLFW 和 VBO 示例，但我被卡住了。我已经使用`glBegin`和`glEnd`其他项目，但我正在尝试更新我的代码以使用 OpenGL ES 2，但现在我只想尽可能向前兼容。

从网上的一些例子中，我想出了以下代码：

```
#include <stdlib.h>
#include <GL/glfw3.h>
#include <stdio.h>

#define bool int
#define true 1
#define false 0

const int width = 800;
const int height = 600;
bool opened = true;

GLuint glTriangle;
GLfloat triangle[] = {
    -1.0f, -1.0f, 0.0f,
    1.0f, -1.0f, 0.0f,
    0.0f,  1.0f, 0.0f,
};

void init() {
    glClearColor(0.0f, 0.0f, 0.0f, 0.0f);

    glGenBuffers(1, &glTriangle);
    glBindBuffer(GL_ARRAY_BUFFER, glTriangle);
    glBufferData(GL_ARRAY_BUFFER, sizeof(triangle), triangle, GL_STATIC_DRAW);
}

void display() {
    glEnableVertexAttribArray(0);
    glBindBuffer(GL_ARRAY_BUFFER, glTriangle);

    glVertexAttribPointer(0L, 3, GL_FLOAT, GL_FALSE, 0, 0);
    glDrawArrays(GL_TRIANGLES, 0, 3);

    glDisableVertexAttribArray(0);
}

int windowClose(GLFWwindow window) {
    opened = false;
    return GL_TRUE;
}

void main() {
    if (!glfwInit()) {
        printf("glfwInit didn't work\n");
        return;
    }

    GLFWwindow window = glfwCreateWindow(width, height, GLFW_WINDOWED, "Test", 0);
    glfwMakeContextCurrent(window);

    init();

    glfwSetWindowCloseCallback(window, windowClose);

    glfwSwapInterval(1);

    while(opened) {
        display();

        glfwSwapBuffers(window);
        glfwPollEvents();
    }
    glfwTerminate();
} 
```

这段代码运行，但是当我期望看到一个白色三角形时，我得到的只是一个黑屏。我试图避免像着色器/纹理这样的花哨的东西，直到我至少在屏幕上画了一些东西。

如果这很重要，我正在编译：`gcc -o test -lGL -lglfw -lm test.c`在 Linux 上通过 Mesa 驱动程序使用 OpenGL 版本 2.1。

我究竟做错了什么？如果我需要指定颜色信息，有什么简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T19:25:18.817

您不应该使用`glEnableVertexAttribArray / glVertexAttribPointer`固定管道。它*可能*有效（我不肯定，我认为属性 0 可能是顶点属性数组的别名，但不确定）。这样做并不正确。

如果您没有着色器，您应该使用`glEnableClientState`和`glVertexPointer`用于顶点数据。

默认颜色是 (1,1,1,1)，所以我认为你现在应该可以接受颜色了。

# actionscript-3 - ActionScript 中的 Hello World 不工作

> ID：13633042
> 
> 赞同：2
> 
> 时间：2012-11-29T19:17:00.330
> 
> 标签：actionscript-3, flash, adobe, flash-cs4, fla

我正在尝试创建这种非常简单的 hello world 类型的应用程序。而且无论我尝试什么，我都会收到此错误。这是 TheSimplestPlayer.as 文件中类的错误和定义。

```
VerifyError: Error #1079: Native methods are not allowed in loaded code.
ReferenceError: Error #1065: Variable TheSimplestPlayer is not defined.

package
{
    import flash.display.Sprite;
    public class TheSimplestPlayer extends Sprite
    {
        public function TheSimplestPlayer()
        {
        }
    }
} 
```

![在此处输入图像描述](../Images/560d5647e5b835fbc57435de837cf065.png)

![在此处输入图像描述](../Images/74c86c3198b7650a29206171dbf996af.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T02:15:17.847

我正在回答我自己的问题，这很愚蠢。但是我在 lib 下添加了 playerglobal.swc 文件，这就是它停止工作的方式，我删除了所有额外的 swc 文件并解决了这个问题。

感谢你的帮助 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T19:23:01.840

flash文件和AS文件在同一个目录吗？

# c++ - 似乎无法逃避我发送到我的 sqlite3 数据库的查询，不知道为什么

> ID：13633044
> 
> 赞同：4
> 
> 时间：2012-11-29T19:17:13.540
> 
> 标签：c++, sql, sqlite, prepared-statement

我有一个这样的字符串：

```
string query;
query = "insert or replace into TABLEA (a,b,c) values (@a,\"@b\",\"@c\");"; 
```

这样我就可以通过简单的替换将字符串插入到 B 和 C 中：

```
string instring("I have a 3\" gauge");
string instring2("I am looking for 1/8\" thickness");
Replace(&query, "@a", to_string(1));
Replace(&query, "@b", instring);
Replace(&query, "@c", instring2); 
```

所以现在我的查询字符串是：

```
"insert or replace into TABLEA (a,b,c) values (1,\"I have a 3\" gauge\",\"I am looking for 1/8\" thickness\");"; 
```

SQLITE3 得到它，它看起来像：

```
insert or replace into TABLEA (a,b,c) values (1,"I have a 3" gauge","I am looking for 1/8" thickness"); 
```

问题是字符串过早结束。我试图添加额外的转义字符，但这似乎也不起作用。

现在我正在使用 sqlite3_exec() 来执行所有操作。还有什么我应该做的吗？准备好的声明是否处理我正在尝试做的事情？

我应该用prepared_v2试试，这可能会解决问题吗？

我应该如何处理这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T11:07:12.023

在 SQL 中，字符串使用单引号，并使用两个单引号进行转义。（为了与 MySQL 兼容，接受双引号，但不应使用。）

您的查询应如下所示：

```
INSERT OR REPLACE INTO TableA(a, b, c)
VALUES (1, 'I have a 3" gauge', 'I am looking for 3/8" thickness') 
```

或像这样：

```
INSERT OR REPLACE INTO TableA(a, b, c)
VALUES (1, "I have a 3"" gauge", "I am looking for 3/8"" thickness") 
```

但是，为避免字符串格式问题，建议使用参数。这就是它与直接 SQLite 函数调用的工作方式（包装器的工作方式可能不同）：

```
const char *sql = "INSERT OR REPLACE INTO TableA(a, b, c) VALUES (1, ?, ?)";
sqlite3_prepare_v2(db, sql, -1, &stmt, NULL);
sqlite3_bind_text(stmt, 1, "I have a 3\" gauge", -1, SQLITE_TRANSIENT);
sqlite3_bind_text(stmt, 2, "I am looking for 3/8\" thickness", -1, SQLITE_TRANSIENT); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T19:28:05.413

您需要在每个内部字符串周围加上单引号：

```
string query;
query = "insert or replace into TABLEA (a,b,c) values (@a,'\"@b\"','\"@c\"');"; 
```

# forms - 经典 ASP 表单在 Opera、Chrome 或 Firefox 中不起作用（但在 IE 中起作用）

> ID：13633047
> 
> 赞同：1
> 
> 时间：2012-11-29T19:17:17.623
> 
> 标签：forms, firefox, google-chrome, asp-classic, opera

我正在使用一个经典的 ASP 站点并且遇到了一些难题...我的表单在 IE 中完美运行，但在 Chrome、Opera 和 Firefox 中我无法单击表单中的任何内容 - 我无法键入或甚至让光标显示在输入字段中，链接不可点击，按钮也不可点击。鼠标指针甚至不会在任何这些元素的鼠标悬停时改变。

文档类型是 HTML 4.01 Strict，我已经使用 W3 验证器对其进行了验证。页面页眉和页脚中的链接可以正常点击。

```
<form name="esi" method="post" action="employeehome.asp">
<p>
    <label for="empid" class="achtung">Employee ID:</label><br>
    <input type="text" name="empid" size="20" maxlength="30">
</p>
<p>
    <label for="emppw" class="achtung">Password:</label><br>
    <input type="password" name="emppw" size="20" maxlength="20"><br>
    <a href="emppwrecovery.asp" class="txtfsz10">Password Recovery</a>
</p>
<p>
    <input type="hidden" name="empstatus" value="1">
</p>
<p class="submitbuttonspace">
    <input type="submit" value="Sign In">
</p>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T17:08:29.787

这个表单示例没有任何问题。我刚刚在我的服务器上测试了它。没有错误，也没有什么可以禁用任何东西。

您必须有其他东西使您的浏览器崩溃。

# loops - 重置工具提示的困难

> ID：13633050
> 
> 赞同：-3
> 
> 时间：2012-11-29T19:17:34.883
> 
> 标签：loops, tooltip, autohotkey

我希望使用下面的 AHK 代码重置工具提示。在执行 msgbox 时，不会重置工具提示。

```
f9::
Loop
{ 
    MouseGetPos, X, Y 
    PixelGetColor, color, X, Y 
    ToolTip, %color%`n%X%`n%Y%, X+10, Y-150
    sleep 100
}
Exit

Escape::
ToolTip
MsgBox
Exit 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T06:40:26.537

将空值传递给`Tooltip`命令只会删除工具提示。我不确定你所说的重置是什么意思，但如果你想停止循环，你可以设置一个标志并用`While`循环检查它。

```
f9::
on := true
While on
{ 
    MouseGetPos, X, Y 
    PixelGetColor, color, X, Y 
    ToolTip, %color%`n%X%`n%Y%, X+10, Y-150
    sleep 100
}
tooltip
Exit

Escape::
on := false
MsgBox
Exit 
```

# azure - Azure 网站、Cname 重定向、SEO

> ID：13633053
> 
> 赞同：0
> 
> 时间：2012-11-29T19:17:47.073
> 
> 标签：azure, seo

所以我有以下情况：

我有一个域：mydomain.ro。我在罗马尼亚的主机提供商上托管域。我将在我的主机提供商的 DNS 设置中添加 Cname 记录和 A 记录，这将指向一个 azure 托管网站。这会影响我的搜索引擎优化吗？是否仍然认为我的网站托管在我的国家，这样我就不会弄乱 google.ro 的 seo？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T20:39:44.667

有趣的问题。这里的技巧是重定向的方法。

一般来说，有两种主要的重定向方法。

1.  301 重定向（“永久移动”），或者，
2.  302 重定向（“临时移动”）。

您需要确保使用 301 重定向（“永久移动”），以免激怒 Bing、Google 等。

这与各种 DNS 提供商的工作方式不同，但大多数都为您提供 301 和 302 之间的选择。如果您没有，您将想要找到一个可以的。

这里有一些关于整个 301/302/SEO 影响的好信息。[http://www.theinternetdigest.net/archive/301-redirects-seo.html](http://www.theinternetdigest.net/archive/301-redirects-seo.html)

祝你好运，

-亚当

我的 Windows Azure 博客 - [http://www.stratospher.es](http://www.stratospher.es)

我的 Twitter-er-er：http: [//twitter.com/stratospher_es](http://twitter.com/stratospher_es)

# qt - Qt：对 PostgreSQL-Server 的 SELECT-Query 总是以 NULL 响应

> ID：13633055
> 
> 赞同：1
> 
> 时间：2012-11-29T19:17:49.527
> 
> 标签：qt, postgresql, select

我最近开始使用 Qt Creator 和 C++，并希望使用 PostgreSQL 数据库来满足我的需要。所以我想出了如何获取驱动程序，包括所有需要的标签并开始执行一些查询。

我创建了新表，插入了一些数据，然后更新了它们。一切都很好，直到我尝试简单地选择一些行。查询刚刚结束，没有错误消息和 NULL 响应。

该命令是一个简单的命令`SELECT`：

```
query = db.exec("SELECT id FROM users WHERE name = 'Testuser';"); 
```

但是一个基本的`SELECT`也不起作用：

```
query = db.exec("SELECT * FROM users;"); 
```

如果我现在完全复制此查询并将其作为 SQL 语句直接放入 pgAdmin，它就可以正常工作并使用用户 ID 进行响应。

由于谷歌的一些提示，我尝试了表名的引号，我尝试了完整的行名（`SELECT users.id FROM public.users WHERE users.name = 'Testuser';`）和大小写字母 - 没有任何效果。

每个查询都可以正常工作，但如果我尝试 a `SELECT`，它总是以 NULL 响应。尽管每个`SELECT`-Querys 在 pgAdmin 中都可以正常工作。

有人有想法吗？

使用了以下标签：

```
#include <QDebug>
#include <QtCore/QCoreApplication>
#include <QtSql/QPSQLDriver>
#include <QSqlDatabase>
#include <QSqlQuery>
#include <QCryptographicHash>
#include <QSqlError> 
```

完整的代码如下所示：

```
QString response;
QSqlQuery query;
QSqlDatabase db = QSqlDatabase::addDatabase("QPSQL");

db.setHostName("127.0.0.1");
db.setPort(5432);
db.setDatabaseName("postgres");
db.setUserName("postgres");
db.setPassword("password");

if (db.open())
{
    query = db.exec("SELECT id FROM users WHERE name = 'Testuser';");
    response = query.value(0).toString();
}

db.close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T06:16:27.090

Qt 助手[说](http://doc.qt.digia.com/qt/qsqlquery.html#exec)：

> 执行查询后，查询定位在无效记录上，必须先导航到有效记录，然后才能检索数据值（例如，使用 next()）。

所以，你应该这样做以获得它的第一条记录：

```
query.first();
QString result = return query.record().value(0).toString(); 
```

您还可以遍历其记录：

```
QStringList results;
while (query.next())
{
    QString result = return query.record().value(0).toString();
    results.append(result);
} 
```

检查查询执行错误状态总是一个好主意：

```
bool res = query.exec(...);
if (res == false)
{
    qDebug() << "SQL ERROR: " << query->lastError().text();
} 
```

# python - 从 raw_input 中提取 IP 地址

> ID：13633057
> 
> 赞同：1
> 
> 时间：2012-11-29T19:17:57.027
> 
> 标签：python

我在 python 2.6.5 中编译了一个脚本，该脚本只是为了自动化我最常用的 nmap 函数并将输出记录到桌面上的 txt 文件中。我还没有自己写这一切，因为我仍然只学习python。我找到了一个用于更新回溯的更新脚本，并将其用作缩进和命令的模板，并对其进行了修改并添加了一些我自己的东西来满足我的需求。

我遇到的问题是这个块

```
def nmap_target():

    try:    ip = raw_input(" [>] Enter ip to scan:  ")

except KeyboardInterrupt:
    print "\n [>] Exiting!\n"
            sleep(1)
    sys.exit()
    print " [>] Attempting targeted scan.\n"
    #print ip 
if subprocess.Popen("nmap ip >> //root/Desktop/Target.txt && tail /root/Desktop/Target.txt",shell=True).wait() == 0:
    print "\n"
    print " [>] Targeted scan completed successfully!\n"
            menu_main()

else:
    print "\n"
    print " [>] Nmap scan failed.\n" 
```

它背后的想法是它要求用户在 raw_input() 中输入一个 IP 地址并将其称为 ip，然后我尝试使用 subprocess.Popen("nmap ip 将其传递给 nmap，如上所示。问题它只是写nmap ip而不是打印ip地址然后返回错误，它甚至试图扫描我的网络，每次我测试它时，我都会确保互联网电缆从我的路由器上拔下，这会导致我的错误互联网测试，所以如果你尝试运行下面的代码，如果你的互联网从路由器上拔下，你可能需要在 menu_main() 部分中散列 internet_check() 选项

我现在已经花了 4 天时间，这让我发疯，起初我以为我需要将数字转换为浮点数，所以我尝试了，但还是一样，我尝试了各种各样的事情，花了几个小时在互联网上拖网寻找答案无济于事。

我现在确信这不是我正在尝试的命令，我认为这是退出语句，我尝试将“print ip”放在“print” [>] 尝试目标扫描的行之后。 n" 并且确定输入的 ip 地址显示在屏幕上，这向我证明 raw_input() 正在工作。只要我将它移动到它失败的任何地方，这向我表明它必须是退出语句或缩进的问题，我不确定。我也尝试过散列键盘中断以及下面的几行，我尝试移动 try: 和 if 语句，甚至尝试了其他命令但它只是不会工作aaarrrrrgggghhhhhh

我是否认为将 ip 输入 raw_input() 然后在我可以将其传递给 subprocess.Popen("nmap ip.

就像我提到的，我没有从头开始编写这个脚本，这是我的第一个这样的项目，所以我有很多东西要学，我已经浏览了 python 手册页并查看了各种教程，但只是可以不知道这个。任何帮助都感激不尽

如果有人感兴趣，我会发布完整的脚本，只要我能弄清楚如何正确发布代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T19:20:50.043

您需要将变量与字符串分开！试试这个：D

```
if subprocess.Popen('nmap '+ip+' >> //root/Desktop/Target.txt && tail /root/Desktop/Target.txt',shell=True).wait() == 0: 
```

希望能帮助到你！

编辑 - 如果出于某种原因 python 将原始输入作为整数，请将其转换为字符串，如下所示：

```
if subprocess.Popen('nmap '+str(ip)+' >> //root/Desktop/Target.txt && tail /root/Desktop/Target.txt',shell=True).wait() == 0: 
```

Python 不喜欢连接 str 和 int 类型，或者它会告诉我的脚本何时失败：PI 很确定您的 ip 变量将是 str 类型，所以第一个示例应该可以工作。

干杯!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T19:21:31.303

您需要正确格式化字符串，`ip`否则根本不会解释字符串，即它不会被实际 IP 替换。尝试类似：

```
cmd = "nmap ${0} >> [....] root/Desktop/Target.txt".format(ip)
if subprocess.Popen(cmd): 
```

您还可以使用`%`运算符：

```
cmd = "nmap %s >> [....] root/Desktop/Target.txt" % ip 
```

# iphone - UIPageViewController，如何在不打乱数据源指定顺序的情况下正确跳转到特定页面？

> ID：13633059
> 
> 赞同：64
> 
> 时间：2012-11-29T19:18:12.097
> 
> 标签：iphone, objective-c, ios, uipageviewcontroller

我发现了一些关于如何`UIPageViewController`跳转到特定页面的问题，但我注意到跳转的另一个问题，似乎没有一个答案承认。

无需深入了解我的 iOS 应用程序（类似于分页日历）的详细信息，这就是我所经历的。我声明一个`UIPageViewController`，设置当前视图控制器，并实现一个数据源。

```
// end of the init method
        pageViewController = [[UIPageViewController alloc] 
        initWithTransitionStyle:UIPageViewControllerTransitionStyleScroll
          navigationOrientation:UIPageViewControllerNavigationOrientationHorizontal
                        options:nil];
        pageViewController.dataSource = self;
        [self jumpToDay:0];
}

//...

- (void)jumpToDay:(NSInteger)day {
        UIViewController *controller = [self dequeuePreviousDayViewControllerWithDaysBack:day];
        [pageViewController setViewControllers:@[controller]
                                    direction:UIPageViewControllerNavigationDirectionForward
                                     animated:YES
                                   completion:nil];
}

- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerAfterViewController:(UIViewController *)viewController {
        NSInteger days = ((THDayViewController *)viewController).daysAgo;
        return [self dequeuePreviousDayViewControllerWithDaysBack:days + 1];
}

- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerBeforeViewController:(UIViewController *)viewController {
        NSInteger days = ((THDayViewController *)viewController).daysAgo;
        return [self dequeuePreviousDayViewControllerWithDaysBack:days - 1];
}

- (UIViewController *)dequeuePreviousDayViewControllerWithDaysBack:(NSInteger)days {
        return [[THPreviousDayViewController alloc] initWithDaysAgo:days];
} 
```

编辑说明：我为出队方法添加了简化代码。即使使用这种亵渎神明的实现，我的页面顺序也有完全相同的问题。

初始化全部按预期工作。增量分页也可以正常工作。问题是，如果我`jumpToDay`再次打电话，订单就会变得混乱。

如果用户在第 -5 天并跳转到第 1 天，向左滚动将再次显示第 -5 天而不是相应的第 0 天。这似乎与如何`UIPageViewController`保持对附近页面的引用有关，但我可以'找不到任何对强制它刷新缓存的方法的引用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2013-09-03T22:00:03.047

[Programming iOS6](http://www.apeth.com/iOSBook/ch19.html#_page_view_controller)，由 Matt Neuburg 记录了这个确切的问题，我实际上发现他的解决方案感觉比目前接受的答案要好一些。该解决方案效果很好，但具有负面影响，即在之​​前/之后对图像进行动画处理，然后用所需页面替换该页面。我觉得那是一种奇怪的用户体验，而 Matt 的解决方案可以解决这个问题。

```
__weak UIPageViewController* pvcw = pvc;
[pvc setViewControllers:@[page]
              direction:UIPageViewControllerNavigationDirectionForward
               animated:YES completion:^(BOOL finished) {
                   UIPageViewController* pvcs = pvcw;
                   if (!pvcs) return;
                   dispatch_async(dispatch_get_main_queue(), ^{
                       [pvcs setViewControllers:@[page]
                                  direction:UIPageViewControllerNavigationDirectionForward
                                   animated:NO completion:nil];
                   });
               }]; 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-02-13T21:12:38.880

所以我遇到了和你一样的问题，我需要能够“跳转”到一个页面，然后当我返回一个页面时发现“顺序混乱”。据我所知，页面视图控制器肯定会缓存视图控制器，当您“跳转”到页面时，您必须指定方向：正向或反向。然后它假定新的视图控制器是前一个视图控制器的“邻居”，因此当你回击时会自动呈现前一个视图控制器。我发现这只发生在您使用`UIPageViewControllerTransitionStyleScroll`and not时`UIPageViewControllerTransitionStylePageCurl`。页面卷曲样式显然不会执行相同的缓存，因为如果您“跳转”`pageViewController:viewController(Before/After)ViewController:`

解决方案：执行“跳转”到页面时，您可以先跳转到您要跳转到的页面的相邻页面（`animated:NO`），然后在该跳转的完成块中跳转到所需的页面。这将更新缓存，以便当您返回时，将显示正确的邻居页面。缺点是您需要创建两个视图控制器；您要跳转到的那个和回击后应该显示的那个。

这是我编写的类别的代码`UIPageViewController`：

```
@implementation UIPageViewController (Additions)

 - (void)setViewControllers:(NSArray *)viewControllers direction:(UIPageViewControllerNavigationDirection)direction invalidateCache:(BOOL)invalidateCache animated:(BOOL)animated completion:(void (^)(BOOL finished))completion {
    NSArray *vcs = viewControllers;
    __weak UIPageViewController *mySelf = self;

    if (invalidateCache && self.transitionStyle == UIPageViewControllerTransitionStyleScroll) {
        UIViewController *neighborViewController = (direction == UIPageViewControllerNavigationDirectionForward
                                                    ? [self.dataSource pageViewController:self viewControllerBeforeViewController:viewControllers[0]]
                                                    : [self.dataSource pageViewController:self viewControllerAfterViewController:viewControllers[0]]);
        [self setViewControllers:@[neighborViewController] direction:direction animated:NO completion:^(BOOL finished) {
            [mySelf setViewControllers:vcs direction:direction animated:animated completion:completion];
        }];
    }
    else {
        [mySelf setViewControllers:vcs direction:direction animated:animated completion:completion];
    }
}

@end 
```

您可以做的测试是创建一个新的“基于页面的应用程序”并添加一个“跳转”按钮，该按钮将“跳转”到某个日历月，然后返回手势。请务必将过渡样式设置为滚动。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-30T16:19:25.353

我使用这个功能（我总是在横向，2页模式）

```
-(void) flipToPage:(NSString * )index {

int x = [index intValue];
LeafletPageContentViewController *theCurrentViewController = [self.pageViewController.viewControllers   objectAtIndex:0];

NSUInteger retreivedIndex = [self indexOfViewController:theCurrentViewController];

LeafletPageContentViewController *firstViewController = [self viewControllerAtIndex:x];
LeafletPageContentViewController *secondViewController = [self viewControllerAtIndex:x+1 ];

NSArray *viewControllers = nil;

viewControllers = [NSArray arrayWithObjects:firstViewController, secondViewController, nil];

if (retreivedIndex < x){

    [self.pageViewController setViewControllers:viewControllers direction:UIPageViewControllerNavigationDirectionForward animated:YES completion:NULL];

} else {

    if (retreivedIndex > x ){

        [self.pageViewController setViewControllers:viewControllers direction:UIPageViewControllerNavigationDirectionReverse animated:YES completion:NULL];
      } 
    }
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-05-07T22:00:11.007

Here is my Swift solution to be used for subclasses of `UIPageViewController`:

Assume you store an array of viewControllers in `viewControllerArray` and the current page index in `updateCurrentPageIndex`.

```
 private func slideToPage(index: Int, completion: (() -> Void)?) {
    let tempIndex = currentPageIndex
    if currentPageIndex < index {
      for var i = tempIndex+1; i <= index; i++ {
        self.setViewControllers([viewControllerArray[i]], direction: UIPageViewControllerNavigationDirection.Forward, animated: true, completion: {[weak self] (complete: Bool) -> Void in
          if (complete) {
            self?.updateCurrentPageIndex(i-1)
            completion?()
          }
          })
      }
    }
    else if currentPageIndex > index {
      for var i = tempIndex - 1; i >= index; i-- {
        self.setViewControllers([viewControllerArray[i]], direction: UIPageViewControllerNavigationDirection.Reverse, animated: true, completion: {[weak self] (complete: Bool) -> Void in
          if complete {
            self?.updateCurrentPageIndex(i+1)
            completion?()
          }
          })
      }
    }
  } 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-10-19T08:39:44.943

快速版本的 djibouti33 的回答：

```
weak var pvcw = pageViewController
pageViewController!.setViewControllers([page], direction: UIPageViewControllerNavigationDirection.Forward, animated: true) { _ in
        if let pvcs = pvcw {
            dispatch_async(dispatch_get_main_queue(), {
                pvcs.setViewControllers([page], direction: UIPageViewControllerNavigationDirection.Forward, animated: false, completion: nil)
            })
        }
    } 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-10-25T09:27:33.517

需要注意的是，iOS 10 不再是这种情况，您不再需要使用接受的答案解决方案。像往常一样继续。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-02-21T11:19:00.913

我可以确认这个问题，并且它只发生在使用`UIPageViewControllerTransitionStyleScroll`而不是`UIPageViewControllerTransitionStylePageCurl`.

**解决方法：**创建一个循环并`UIPageViewController setViewControllers`在每次翻页时调用，直到您到达所需的页面。

这使 UIPageViewController 中的内部数据源索引保持同步。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-09-04T13:00:21.060

这只是解决方案

```
-(void)buyAction
{
    isFromBuy = YES;
    APPChildViewController *initialViewController = [self viewControllerAtIndex:4];
    viewControllers = [NSArray arrayWithObject:initialViewController];
    [self.pageController setViewControllers:viewControllers direction:UIPageViewControllerNavigationDirectionForward animated:NO completion:nil];
}

-(NSInteger)presentationIndexForPageViewController:(UIPageViewController *)pageViewController 
{
    if (isFromBuy) {
        isFromBuy = NO;
        return 5;
    }
    return 0;
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-07-25T02:26:19.817

I had a different approach, should be possible if your pages are designed to be updated after init:
When a manual page is selected I update a flag

```
- (void)scrollToPage:(NSInteger)page animated:(BOOL)animated
{
    if (page != self.currentPage) {
        [self setViewControllers:@[[self viewControllerForPage:page]]
                       direction:(page > self.currentPage ?
                                  UIPageViewControllerNavigationDirectionForward :
                                  UIPageViewControllerNavigationDirectionReverse)
                        animated:animated
                      completion:nil];
        self.currentPage = page;
        self.forceReloadNextPage = YES; // to override view controller automatic page cache
    }
}

- (ScheduleViewController *)viewControllerForPage:(NSInteger)page
{
    CustomViewController * scheduleViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"CustomViewController"];
    scheduleViewController.view.tag = page; // keep track of pages using view.tag property
    scheduleViewController.data = [self dataForPage:page];

    if (self.currentViewController)
        scheduleViewController.calendarLayoutHourHeight = self.currentViewController.calendarLayoutHourHeight;

    return scheduleViewController;
} 
```

然后强制下一页重新加载正确的数据：

```
- (void)pageViewController:(UIPageViewController *)pageViewController willTransitionToViewControllers:(NSArray *)pendingViewControllers
{
    CustomViewController * nextViewController = [pendingViewControllers lastObject];

    // When manual scrolling occurs, the next page is loaded from UIPageViewController cache
    //  and must be refreshed
    if (self.forceReloadNextPage) {
        // calculate the direction of the scroll to know if to load next or previous page
        NSUInteger page = self.currentPage + 1;
        if (self.currentPage > nextViewController.view.tag) page = self.currentPage - 1;

        nextViewController.data = [self dataForPage:page];
        self.forceReloadNextPage = NO;
    }
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-02-09T16:29:54.687

如果您不需要为新页面设置动画，就像我没有那样，以下代码对我有用，在情节提要中调用“Value Changed”。我没有在视图控制器之间进行更改，而是更改了与当前视图控制器关联的数据。

```
 - (IBAction)pageControlCurrentPageDidChange:(id)sender
{
    self.currentIndex = self.pageControl.currentPage;
    MYViewController *currentPageViewController = (MYViewController *)self.pageViewController.viewControllers.firstObject;
    currentPageViewController.pageData = [self.pageDataSource dataForPage:self.currentIndex];
    [currentPageViewController updateDisplay];
} 
```

currentIndex 在那里，所以当我在页面之间滑动时，我可以更新 pageControl 的 currentPage。

pageDataSource dataForPage：返回页面显示的数据对象数组。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-11-20T14:00:29.237

[这是@djibouti33 的答案](https://stackoverflow.com/a/18602186/3151675)的最新Swift 3+ 版本，其语法经过了清理。

```
weak var weakPageVc = pageVc

pageVc.setViewControllers([page], direction: .forward, animated: true) { finished in
    guard let pageVc = weakPageVc else {
        return
    }

    DispatchQueue.main.async {
        pageVc.setViewControllers([page], direction: .forward, animated: false)
    }
} 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-07-12T14:10:32.877

```
 let orderedViewControllers = [UIViewController(),UIViewController(), UIViewController()]
    let pageViewController = UIPageViewController()
    let pageControl = UIPageControl()

    func jump(to: Int, completion: @escaping (_ vc: UIViewController?) -> Void){

        guard orderedViewControllers.count > to else{
            //index of bounds
            return
        }

        let toVC = orderedViewControllers[to]

        var direction: UIPageViewController.NavigationDirection = .forward

        if pageControl.currentPage < to {
            direction = .forward;
        } else {
            direction = .reverse;
        }

        pageViewController.setViewControllers([toVC], direction: direction, animated: true) { _ in
            DispatchQueue.main.async {
                self.pageViewController.setViewControllers([toVC], direction: direction, animated: false){ _ in
                    self.pageControl.currentPage = to
                        completion(toVC)

                }
            }
        }
    } 
```

**用法：**

```
self.jump(to: 5) { (vc) in
    // you can do anything for new vc.
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-10-24T18:59:32.157

我自己在这个问题上挣扎了很长时间。对我来说，我从情节提要加载了一个 UIPageViewController（我称之为 PageController），并在其上添加了一个 UIViewController 'ContentVC'。

我让 ContentVC 负责将数据加载到内容区域，让 PageController 负责滑动/goto/PageIndicator 更新。ContentVC 有一个 ivar CurrentPageIndex 并将该值发送到 PageController 以便 PageController 知道它在哪个页面上。在具有 PageController 的 .m 文件中，我有这两种方法。

请注意，我使用设置为 0，因此每次 PageVC 重新加载它都会转到我不想要的第一页，[self viewControllerAtIndex:0]。

```
- (void)setPageForward
{  
  ContentVC *FirstVC = [self viewControllerAtIndex:[CurrentPageIndex integerValue]];

  NSArray *viewControllers = @[FirstVC];
  [PageController setViewControllers:viewControllers direction:UIPageViewControllerNavigationDirectionForward animated:NO completion:nil];
} 
```

第二个方法是 PageViewController 的 DataSource 方法。PresentationIndexForPageViewController 将突出显示的点设置到正确的页面（您想要的页面）。请注意，如果我们在此处返回 0，则页面指示器将突出显示表示第一页的第一个点，我们不希望这样。

```
- (NSInteger)presentationIndexForPageViewController:(UIPageViewController *)pageViewController 
{
  return [CurrentPageIndex integerValue];
} 
```

# transactions - 修复旧 ibatis 应用程序中的事务管理

> ID：13633061
> 
> 赞同：1
> 
> 时间：2012-11-29T19:18:17.287
> 
> 标签：transactions, ibatis

我们在 ibatis 2.0 上，看起来事务存在一些问题 - 它们在服务层上打开，并且服务层与服务层对话，由于事务在事务中打开，这些服务层似乎不起作用。

所以我想用 Spring Tx 管理做类似 AOP 的事情，但是我们使用这些 DAOManager，它们似乎不能与 SqlMapClient 连接，并且重写是不可能的。是否有可能获得正确的 tx？

还有其他选择吗？

# r - 使用 cbind 聚合函数

> ID：13633063
> 
> 赞同：1
> 
> 时间：2012-11-29T19:18:25.330
> 
> 标签：r, aggregate

我正在尝试使用该`aggregate`功能`cbind`，但我必须遗漏一些东西。

我在[Using Aggregate for Multiple Aggregations](https://stackoverflow.com/questions/12064202/r-using-aggregate-for-multiple-aggregations)中看到，我可以简单地定义要修复的列以及要添加的列，但是我无法获得预期的结果。

我有：

```
x <- data.frame(alfa = 1:9, beta = rep(1:3, 3))

  alfa beta
1    1    1
2    2    2
3    3    3
4    4    1
5    5    2
6    6    3
7    7    1
8    8    2
9    9    3 
```

我想检索由*beta*列中的条目聚合的条目的平均值。为此，我尝试过：

```
aggregate(cbind(alfa) ~ beta, data = x, FUN = function(x) c(gama = mean(x)) ) 
```

这给了我：

```
 beta alfa
1    1    4
2    2    5
3    3    6 
```

结果不应该是这样的：

```
 alfa beta gama
1    1    1    4
2    2    2    5
3    3    3    6 
```

如何强制添加 column *gama*？另外，有人会澄清该`cbind()`功能的基础吗？我一直在努力理解它。问候！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T19:32:59.770

聚合获取左侧的所有元素并对`~`这些值使用给定的函数，同时它们按右侧的值分组。因此，您的命令

```
aggregate(alfa ~ beta, data=x, mean) 
```

`alfa`将返回按 分组的平均值`beta`。（正如您提到的 SQL - 这与 SQL-clause 发生的情况相同`SELECT beta, avg(alfa) FROM x GROUP BY beta`）

如果你想输出遇到的第一个值，这基本上是你想做的另一个聚合，因此你的聚合函数必须返回两个值：

```
aggregate(alfa ~ beta, data=x, function(x) c(alfa=x[1], gamma=mean(x))) 
```

（再次在 SQL 中`SELECT beta, min(alfa), avg(alfa) FROM x GROUP BY beta`：）

你问了关于`cbind`. 只要你在左边只有一个论点，这根本不重要。但是假设你有以下情况：

```
x <- data.frame(alfa = 1:9, beta = rep(1:3, 3), gamma = rnorm(9)) 
```

并想计算两列的平均值`alfa`和`gamma`，你可以这样做：

```
aggregate(cbind(alfa, gamma) ~ beta, data=x, function(x) mean(x)) 
```

这样，您只需告诉聚合函数在给定函数上使用 throw`alfa`和`gamma`两者。

有关更多和详尽的示例，请参阅`?aggregate`。

* * *

## 编辑

你必须小心不要混合不同的含义`cbind`。使用单独的函数，它将两个相同长度的向量（或 data.frame）连接到一个矩阵（或 data.frame），两个输入作为不同的列：

```
> cbind(1:3, 7:9)
     [,1] [,2]
[1,]    1    7
[2,]    2    8
[3,]    3    9 
```

用于聚合的公式表示法`cbind`做一些相关但又不同的事情。`cbind(column1, column2)`只是告诉聚合在两行上分别使用给定的*函数*。因此，像

```
aggregate(cbind(alfa, gamma) ~ beta, data=x, function(x) mean(x[,1]*x[,2])) 
```

不会*工作*。相反，该函数将被调用两次 - 一次使用 的值`alfa`，然后使用 的值`beta`。

希望能澄清你的理解。

# android - 使用 Android 和字节数组进行 SoapUI 测试

> ID：13633069
> 
> 赞同：2
> 
> 时间：2012-11-29T19:18:43.860
> 
> 标签：android, testing, soap, wsdl, soapui

我正在尝试做一些 SOAP 测试，但我不知道如何传递一个字节 []。

我使用 SoapUI 进行测试。我粘贴了 WSDL，并且能够在列表中看到可用的请求。

```
The WSDL link is: http://54.243.147.122:8080/ASEServer/services/Android?wsdl 
```

已开发的 android 应用程序执行需要连接到 Soap 服务器的各种任务。其中之一是登录程序。正在创建一个对象，然后将其转换为发送到服务器的字节数组 (byte[])。

我无法真正理解如何在“信封”中传递字节数组以获得响应。

我迫切需要帮助，所以欢迎任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T13:59:15.310

为了发送字节数组 SOAP U，您必须首先将字节数组解码为 BASE64。而不是简单地将您的 base64 编码字符串粘贴到肥皂信封中。有一些在线转换器可以将十六进制字符串转换为 base64 字符串。但是，如果您想自己动手，这里就是一个例子。

```
public class App {

private static final String TR_MESSAGE = "Hello!, öÖ çÇ ğĞ üÜ ıİ şŞ";

public static void main(String[] args) {
    byte[] trUTF16 = TR_MESSAGE.getBytes(Charset.forName("UTF-16"));
    String result = new BigInteger(1, trUTF16).toString(16).toUpperCase();
    System.out.println("Result: " + result);

    String rebuild = new String(trUTF16, Charset.forName("UTF-16"));
    System.out.println("Rebuild: " + rebuild);

    System.out.println("BASE64: " + new String(org.apache.commons.codec.binary.Base64.encodeBase64(trUTF16)));
}} 
```

# servlets - 带有 RestEasy 的 OAuth ServletException

> ID：13633071
> 
> 赞同：1
> 
> 时间：2012-11-29T19:18:47.400
> 
> 标签：servlets, oauth, oauth-2.0, jboss7.x, resteasy

代码：JBoss 7.1.1.Final，JEE6，JSF2，使用 resteasy oauth：

在 web.xml 上：

```
 <context-param>
        <param-name>oauth.provider.provider-class</param-name>
        <param-value>com.ostudio.dbo.rest.OAuthMyProvider</param-value>
    </context-param>

    <servlet>
      <servlet-name>OAuth</servlet-name>
      <servlet-class>org.jboss.resteasy.auth.oauth.OAuthServlet</servlet-class>
    </servlet>

    <servlet-mapping>
      <servlet-name>OAuth</servlet-name>
      <url-pattern>/oauth/*</url-pattern>
    </servlet-mapping> 
```

在我的 project.war 上：WEB-INF/classes/com/ostudio/dbo/rest/OAuthMyProvider.class

当我调用 localhost:8080/dbo/oauth 服务器显示：

```
javax.servlet.ServletException: oauth.provider.provider-class class com.ostudio.dbo.rest.OAuthMyProvider not found
    org.jboss.resteasy.auth.oauth.OAuthUtils.getOAuthProvider(OAuthUtils.java:176)
    org.jboss.resteasy.auth.oauth.OAuthServlet.init(OAuthServlet.java:105)
    org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50)
    org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368)
    org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877)
    org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671)
    org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930)
    java.lang.Thread.run(Thread.java:619) 
```

请帮我解决这个问题而不把类放在 jboss/lib 上

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T15:08:21.813

```
<context-param>
    <param-name>oauth.provider.provider-class</param-name>
    <param-value>org.jboss.resteasy.auth.oauth.OAuthMemoryProvider</param-value>
</context-param> 
```

# c# - MonoTouch.Dialog：将另一个 UIViewController 的视图嵌入到 ViewElement 中？

> ID：13633075
> 
> 赞同：0
> 
> 时间：2012-11-29T19:19:07.853
> 
> 标签：c#, uiviewcontroller, xamarin.ios, monotouch.dialog

我有一个管理四位数密码键盘的视图控制器。此控制器用于访问我的应用程序。

但是，我想在更改 PIN 时使用相同的 PIN 键盘。更改 PIN 的控制器是一个 MT.DialogViewController，它有一个部分和一个行，即一个`ViewElement`. 这`ViewElement`包含 PIN 键盘控制器的视图。这种工作，但`ViewWillAppear`等不被可靠地调用。我还尝试通过调用（在 MT.Dialog c'tor 中）来使用 UIViewController 包含`addChildViewController`，然后添加 ViewElement 然后调用`didMoveToParentViewController`. 尽管如此，我在旋转时遇到了问题，并且没有调用 VieWill/Did*() 方法。有没有解决方案（干净或肮脏，我不在乎）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:35:04.683

您能否将 PIN 键盘从 ViewController 重构为 UIView（然后将包含 PIN 键盘的 UIView 重新插入 UIViewController）？

这样做应该可以让您将 PIN 键盘 UIView 放在 ViewElement 中，我怀疑这会改善方向更改的渲染和一致的 ViewDid/Will 方法调用。

# javascript - javascript中是否有php echo/print等价物

> ID：13633085
> 
> 赞同：71
> 
> 时间：2012-11-29T19:19:47.303
> 
> 标签：javascript, echo

假设我想从脚本标签内打印 html。

像这样的来源

```
<div>foo</div>
<script>
print('<div>Print this after the script tag</div>');
</script>
<div>bar</div> 
```

脚本运行后在浏览器中应该看起来像这样

```
<div>foo</div>
<script>
print('<div>Print this after the script tag</div>');
</script>
<div>Print this after the script tag</div>
<div>bar</div> 
```

我可以为此编写自己的代码，但由于这在我看来是一个非常简单的问题，我猜要么我错过了某些东西，要么我的想法在某些方面存在缺陷，并且故意忽略了打印。

另外，有点相关：我想知道一个脚本是否（或可以制作）知道它周围的脚本标签。有了这些信息，就可以更容易地找到要注入的打印 html 代码的位置，假设它不是非常不鼓励的话。

澄清一下：我不需要您为我编写打印功能。我只需要知道是否存在实现此目的的本机方法并且我错过了它，或者不应该这样做的原因。

**编辑** 我意识到我没有仔细考虑这个问题。

我明白了我的事实，现在几乎一切似乎都在工作。我最初应该提到模板中需要打印功能——我正在做一个模板引擎实验。我设法通过将脚本与纯 html 分离并将拆分的 html sans 脚本与脚本输出连接起来来解决这个问题。

在编写代码时，我注意到由于 js 的异步特性，一切都不会那么顺利。我想我希望能够在模板中做任何类型的 js 魔术，就像我在 php 中一样。似乎实际上在模板中以一种万无一失的方式支持异步代码需要更多的思考。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-11-29T19:21:26.317

你需要使用`document.write()`

```
<div>foo</div>
<script>
document.write('<div>Print this after the script tag</div>');
</script>
<div>bar</div> 
```

请注意，这仅在您正在编写文档时才有效。文档渲染完成后，调用`document.write()`将清除文档并开始编写新文档。如果这是您的用例，请参阅为此问题提供的其他答案。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-11-29T19:32:10.500

您可以使用**document.write**，但这不是一个好习惯，它可能会清除整个页面，具体取决于它的执行时间。

你应该`Element.innerHtml`这样使用：

```
<div>foo</div>
<span id="insertHere"></span>
<div>bar</div>

<script>
document.getElementById('insertHere').innerHTML = '<div>Print this after the script tag</div>';
</script> 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-03-17T23:59:31.017

您可以使用

```
function echo(content) {  
    var e = document.createElement("p");
    e.innerHTML = content;
    document.currentScript.parentElement.replaceChild(document.currentScript, e);
} 
```

它将用内容参数中的文本替换调用 echo 函数的当前正在执行的脚本。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-11-29T19:26:45.603

```
// usage: log('inside coolFunc',this,arguments);
// http://paulirish.com/2009/log-a-lightweight-wrapper-for-consolelog/
window.log = function(){
  log.history = log.history || [];   // store logs to an array for reference
  log.history.push(arguments);
  if(this.console){
    console.log( Array.prototype.slice.call(arguments) );
  }
}; 
```

使用[window.log](http://paulirish.com/2009/log-a-lightweight-wrapper-for-consolelog/)将允许您执行与 console.log 相同的操作，但它会检查您正在使用的浏览器是否能够首先使用 console.log，以免出于兼容性原因（IE 6 等）而出错.)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-22T14:43:33.980

这是另一种方式：

```
<html>
<head>
    <title>Echo</title>
    <style type="text/css">
    #result{
        border: 1px solid #000000;
        min-height: 250px;
        max-height: 100%;
        padding: 5px;
        font-family: sans-serif;
        font-size: 12px;
    }
    </style>
    <script type="text/javascript" lang="ja">
    function start(){
        function echo(text){
            lastResultAreaText = document.getElementById('result').innerHTML;
            resultArea = document.getElementById('result');
            if(lastResultAreaText==""){
                resultArea.innerHTML=text;
            }
            else{
                resultArea.innerHTML=lastResultAreaText+"</br>"+text;
            }
        }

        echo("Hello World!");
        }
    </script>
</head>
<body onload="start()">
<pre id="result"></pre> 
</body> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-09-30T01:04:06.997

从 [w3school 的 JavaScript 输出页面](http://www.w3schools.com/js/js_output.asp)，

> JavaScript 可以以不同的方式“显示”数据：
> 
> 使用 window.alert() 写入警报框。
> 
> 使用 document.write() 写入 HTML 输出。
> 
> 使用 innerHTML 写入 HTML 元素。
> 
> 使用 console.log() 写入浏览器控制台。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-29T19:43:06.157

您`document.write`甚至可以使用`console.write`（这对调试很有用）。

但是你最好的选择是使用 DOM 来更新页面，它给你更多的控制权。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-29T19:43:20.783

```
$('element').html('<h1>TEXT TO INSERT</h1>'); 
```

或者

```
$('element').text('TEXT TO INSERT'); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-01-08T13:46:27.810

我们将在 js 中创建自己的函数，例如 echo "Hello world"。

```
function echo( ...s ) // rest operator
 { 
   for(var i = 0; i < s.length; i++ ) {

    document.write(s[i] + ' '); // quotes for space

   }

 } 

  // Now call to this function like echo

 echo('Hellow', "World"); 
```

**注意：** ( `...`) rest 运算符用于在一个对象/数组中访问更多参数，要从对象/数组中获取值，我们应该使用 for 循环迭代整个对象/数组，就像上面一样，`s`我只是保留的名称，你可以写任何东西你要。

# core-data - CoreData：基于关系的 NSPredicate

> ID：13633086
> 
> 赞同：1
> 
> 时间：2012-11-29T19:19:51.550
> 
> 标签：core-data, nspredicate

我现在正在使用 Core Data 编写食谱书。这是我第一次使用 CoreData，到目前为止它一直在工作，但我在 iPad 的拆分视图中使用它时遇到了一些麻烦。

这是我的对象模型：http: [//i621.photobucket.com/albums/tt295/Naosu_FFXI/ObjectModel.png](http://i621.photobucket.com/albums/tt295/Naosu_FFXI/ObjectModel.png)

在我的应用程序中，步骤和成分显示在详细视图的两个表中。当我有一个食谱时，它按预期工作。但是，无论您选择什么配方，这两个表的 NSFetchedResultsControllers 都会提取所有信息。所以使用 NSPredicate 似乎是最明显的选择。

这是我的 NSPredicate 代码片段：

```
filteredIngredientsArray = [[NSMutableArray alloc] init];
.... snip ....

//---------- Filtering the ingredients by name ----------
NSError *error = nil;
NSPredicate *ingredientsPredicate = [NSPredicate predicateWithFormat:@"recipe.recipeName == '%@'", selectedName];
[fetchRequest setPredicate:ingredientsPredicate];
NSLog(@"Filtering the INGREDIENTS with this: %@", selectedName);

NSArray *loadedIngredients = [_managedObjectContext executeFetchRequest:fetchRequest error:&error];
filteredIngredientsArray = [[NSMutableArray alloc] initWithArray:loadedIngredients];

[self.ingredientTable reloadData]; 
```

当我使用它时，我的桌子不会被填满......所以它确实有效，但没有按我想要的方式工作。我的 NSLog 显示 selectedName 变量的值是用户点击的配方的名称。

这一直把我逼到墙上，真的很困扰我，所以任何反馈/帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T20:06:00.860

`%@`删除谓词格式中的单引号：

```
[NSPredicate predicateWithFormat:@"recipe.recipeName == %@", selectedName] 
```

# playframework - 在路由中传递参数值？

> ID：13633089
> 
> 赞同：8
> 
> 时间：2012-11-29T19:19:54.703
> 
> 标签：playframework, playframework-2.0

在我的控制器中，我有一个删除方法：

```
delete(String id, boolean confirmed) 
```

现在在路线中，我想相应地映射两个 URI：

```
GET /item/:id/delete           controllers.Application.delete(id:String, false)
GET /item/:id/delete/confirmed controllers.Application.delete(id:String, true) 
```

（有趣的部分是根据 URI 传递给 delete 方法的第二个参数）

然而，这给了我以下错误：

```
 identifier expected but 'false' found. 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-29T19:46:28.093

正确的语法是：

```
GET /item/:id/delete           controllers.Application.delete(id:String, confirmed:Boolean ?= false)
GET /item/:id/delete/confirmed controllers.Application.delete(id:String, confirmed:Boolean ?= true) 
```

# android - 在 Android 活动之间有效传递自定义对象数据 [Mono Android]

> ID：13633092
> 
> 赞同：7
> 
> 时间：2012-11-29T19:20:03.160
> 
> 标签：android, android-intent, android-activity, xamarin.android, xamarin

我已经被这个困扰了一段时间了。我正在开发一个 android 应用程序，该应用程序存储一个人的渔获量、最喜欢的钓鱼地点、钓具箱库存和其他数据。我所有的类都是可序列化的，并且可以在迄今为止似乎工作的活动之间保存和加载。但我预测随着越来越多的数据被存储，应用程序将开始运行缓慢。

我基本上要问的是有什么方法可以在整个应用程序中保留这些数据，所以我不必在每次弹出新屏幕时都加载它。我已经找到了以下信息来提供帮助，但我需要更清楚一些才能理解：

另一个论坛说你可以把它塞进 Application 对象中：

```
[Application]
public class MyApp : Android.App.Application {
    public MyApp(IntPtr handle)
        : base (handle)
    {
    }

    public FishingData Data {get; set;}
} 
```

然后在您的活动中：

```
((MyApp) this.ApplicationContext).Data = value; 
```

所以我以前从未真正听说过使用这种方法，我不确定这是否会贯穿整个应用程序过程（我觉得无论哪种方式都必须通过序列化加载数据。这就是我想要应用程序做的事情：

第一个活动是主菜单，在屏幕加载时必须完成以下操作：

1.  如果找到设置文件，使用序列化加载以前的 FishingData 对象（我知道怎么做）
2.  如果没有，则创建一个新的干净的 FishingData 对象以稍后保存（我也知道这一点）
3.  所以现在我们有了一个 FishingData 对象，我如何确保我不必在每个活动中重复步骤 1-2。我怎样才能以某种方式将 FishingData 对象传递给下一个活动，并确保它在应用程序仍然存在时全局存在。**我只想加载一次（通过序列化）**（<--不知道如何执行此操作），并且仅在用户向该对象添加数据时才保存它（我知道该怎么做）。

任何帮助将不胜感激。这让我很烦恼，我似乎无法弄清楚。这似乎是一件很常见的事情，但我没有找到任何详细信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T19:51:48.723

以下是我如何通过 parcelable 在应用程序中传递我的数据。假设您有一个名为 Fisherman 的类（基本上是针对用户）

```
public class Fisherman implements Parcelable {
 private String name;
 private Tacklebox box;
 public int describeContents() {
     return 0;
 }

 public void writeToParcel(Parcel out, int flags) {
     out.writeString(name);
     out.writeParcelable(box, 0);
 }

 public static final Parcelable.Creator<Fisherman> CREATOR
         = new Parcelable.Creator<Fisherman>() {
     public Fisherman createFromParcel(Parcel in) {
         return new Fisherman(in);
     }

     public Fisherman[] newArray(int size) {
         return new Fisherman[size];
     }
 };

 private Fisherman(Parcel in) {
     name = in.readString();
     box = in.readParcelable(com.fisher.Tacklebox);
 }
} 
```

在此示例中，您为拥有的每个数据模型定义 parcelable。假设您有一个渔夫对象，其中包含另一个称为钓具箱的对象。如果您继续嵌套模型，您还将为解决箱定义它，依此类推。这样，您在活动之间传递数据所需要做的就是

```
Intent intent = new Intent(this, Activity.class);
intent.putParcelableExtra("com.fisher.Fisherman", fisherman); 
```

并阅读

```
Bundle b = getIntent().getExtras();
Fisherman fisher = b.getParcelable("com.fisher.Fisherman"); 
```

不幸的是，这仅回答了您问题的第 3 步，但我建议将您的 3 个步骤中的每一步都分解为自己的问题，因为您尝试做的事情比一个问题稍长

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T19:35:00.410

您可以使用这种方法，只要您的`Application`对象还活着，它就会一直存在（这意味着它将**存在**于您的整个应用程序和活动中）。[您可以在此处](https://stackoverflow.com/questions/708012/android-how-to-declare-global-variables)阅读有关使用存储在`Application`对象中的全局变量的更多信息。我不认为单声道会有所作为，这会阻止您使用这种方法。

# asp.net-mvc - 直接 nuget 将文件放在哪里

> ID：13633094
> 
> 赞同：5
> 
> 时间：2012-11-29T19:20:13.533
> 
> 标签：asp.net-mvc, asp.net-mvc-4, nuget, nuget-package

我正在使用 nuget，发现它在我的 MVC4 项目中非常出色。我将它用于我所有的外部依赖项。

我遇到了一个小问题。例如，安装 jQuery 包时，它会将 jQuery 文件放入 Scripts 文件夹中。我的偏好是将 javascript 文件放入脚本中的库文件夹中。所以而不是

```
Scripts/jquery-1.8.3.js 
```

我想把它放在

```
Scripts/libraries/jquery-1.8.3.js 
```

是的，我可以手动移动它，但是我失去了 nuget 的功能。有什么方法可以指示包将文件放在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T08:43:45.833

这还不支持将 [NuGet 脚本复制到不同的目录](https://stackoverflow.com/questions/9989981/nuget-scripts-to-different-directory) ，这里是 nuget codeplex 问题[http://nuget.codeplex.com/workitem/1914](http://nuget.codeplex.com/workitem/1914)

# objective-c - NSTextField 自动完成

> ID：13633104
> 
> 赞同：8
> 
> 时间：2012-11-29T19:20:48.670
> 
> 标签：objective-c, cocoa, autocomplete, nstextfield

有谁知道可以对 NSTextField 实现自动完成的任何类或库？

我试图让标准自动完成工作，但它是作为同步 api 制作的。我通过互联网上的 api 调用获得我的自动完成词。

到目前为止我所做的是：

```
- (void)controlTextDidChange:(NSNotification *)obj
{
    if([obj object] == self.searchField)
    {
        [self.spinner startAnimation:nil];
        [self.wordcompletionStore completeString:self.searchField.stringValue];

        if(self.doingAutocomplete)
            return;
        else
        {
            self.doingAutocomplete = YES;
            [[[obj userInfo] objectForKey:@"NSFieldEditor"] complete:nil];
        }
    }
} 
```

当我的商店完成后，我有一个被调用的代表：

```
- (void) completionStore:(WordcompletionStore *)store didFinishWithWords:(NSArray *)arrayOfWords
{
    [self.spinner stopAnimation:nil];
    self.completions = arrayOfWords;
    self.doingAutocomplete = NO;
} 
```

将完成列表返回到 nstextfield 的代码是：

```
- (NSArray *)control:(NSControl *)control textView:(NSTextView *)textView completions:(NSArray *)words forPartialWordRange:(NSRange)charRange indexOfSelectedItem:(NSInteger *)index
{
    *index = -1;
    return self.completions;
} 
```

我的问题是，这将始终落后 1 个请求，并且完成列表仅显示在用户输入的每个第二个字符上。

我试过像疯子一样搜索谷歌，但我似乎找不到任何解决方案..

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-06T17:02:27.870

不要让布尔属性doingAutocomplete，而是让属性成为发出请求的控件。我们称它为 autoCompleteRequestor：

```
@property (strong) NSControl* autoCompleteRequestor; 
```

因此，您将当前属性doingAutocomplete 设置为YES，而是存储对您的控件的引用。

```
- (void)controlTextDidChange:(NSNotification *)obj
{
    if([obj object] == self.searchField)
    {
        [self.spinner startAnimation:nil];
        [self.wordcompletionStore completeString:self.searchField.stringValue];

        if(self.autoCompleteRequestor)
            return;
        else
        {
            self.autoCompleteRequestor = [[obj userInfo] objectForKey:@"NSFieldEditor"];
        }
    }
} 
```

现在，当您的 Web 请求完成后，您可以在存储的对象上调用 complete:。

```
- (void) completionStore:(WordcompletionStore *)store didFinishWithWords:(NSArray *)arrayOfWords
{
    [self.spinner stopAnimation:nil];
    self.completions = arrayOfWords;
    if (self.autoCompleteRequestor)
    {
       [self.autoCompleteRequestor complete:nil];
       self.autoCompleteRequestor = nil;
    }
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-02T03:08:39.767

NSTextView 具有补全部分单词的功能。

查看此组件的[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSTextView_Class/Reference/Reference.html)。也许你可以在你的应用程序中切换到这个组件。

# c# - 应用程序在 VS 中工作，但一旦发布就会失败

> ID：13633108
> 
> 赞同：2
> 
> 时间：2012-11-29T19:21:05.360
> 
> 标签：c#, .net, clickonce

当我从 Visual Studio 运行它时，我有一个运行完美的应用程序。但是一旦我点击“发布”并尝试启动“setup.exe”，我就会收到一条错误消息：

`This application could not be started. Do you want to view information about this issue?`

单击是将我带到[这里](http://support.microsoft.com/kb/2715633?version=%28null%29&processName=myApp.exe&platform=0009&osver=5&isServer=0)。我不知道“SHIM”是什么，它绝对不是代码的一部分。

如果我发布到网络共享或本地驱动器，错误是相同的。安装后，应用程序会显示在“程序和功能”中，可以卸载，但不会添加开始菜单条目。就好像安装过程中发生错误一样。

我尝试在 3.5 和 4 以及 Windows Installer 3.1 和 4.5 之间调整先决条件（和目标框架） - 没有骰子。

虽然它目前的目标是 3.5，但它最初是作为 4.03 应用程序创建的。我确实更改了几次目标框架，但回到 4.03 并没有解决它。我很确定这个问题是由于重新定位而出现的。

谁能提供线索在哪里看？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T19:25:24.850

如果您有任何配置文件，请查看配置文件`app.config`或`web.config`.

如果您没有找到有关目标框架的任何标签，请在您的解决方案文件夹上进行文件搜索，如果您在`.csproj`或`.sln`文件中找到某些内容，请将其更改为正确的。

# oauth - 谷歌联系人 API

> ID：13633110
> 
> 赞同：2
> 
> 时间：2012-11-29T19:21:17.673
> 
> 标签：oauth

我正在尝试使用 Google Contact API 检索我的所有联系人。为此，我使用了 Oauth 身份验证和 Google Contact API。

我从 Google OAuth 2.0 获得了“访问令牌”。但在这里我的问题是如何使用此“访问令牌”检索我的联系人。如何在我的代码中使用此访问令牌。任何人都可以帮我解决这个问题。如果可能，请提供任何示例代码片段。

我卡在这里。请帮我解决这个...

谢谢和问候， 阿马尔通达普

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T19:49:22.290

此示例应该有所帮助：[https](https://github.com/jcleblanc/oauth/blob/master/oauth2-php-google/complete.php) ://github.com/jcleblanc/oauth/blob/master/oauth2-php-google/complete.php 。具体来说，看第 21 行：

```
$contact_url = "https://www.google.com/m8/feeds/contacts/default/full?oauth_token=" . $token->access_token; 
```

该 URI（带有访问令牌）应该是您可以向其发出 HTTP GET 请求以获取联系人的位置。希望自该示例创建以来的 2 年内他们没有更改 URI。

乔恩

# c# - 为什么这不起作用？

> ID：13633121
> 
> 赞同：3
> 
> 时间：2012-11-29T19:21:49.153
> 
> 标签：c#, .net, file-io, streamwriter

我正在尝试将字符串数组写入文件，这通常应该是一件容易的事情。然而，下面的简单代码抛出了一个 IOException ，表明该文件正在被另一个进程使用。问题是，在运行此代码之前，该文件甚至都不存在。我可以向您保证，没有其他进程在使用该文件。那么如何让愚蠢的 .NET 框架相信该文件没有被另一个进程使用并且可以继续呢？因为这真的不应该那么难。

```
StreamWriter writer = new StreamWriter(ListFileName);

foreach (string s in InfoLineList) 
{
    writer.WriteLine(s);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T21:04:28.633

这可能是因为您在完成后没有关闭流，因此某些句柄在某处卡住了。也许代码是 Web 应用程序的一部分，并且 Web 服务器进程保持该锁定，或者代码正在运行多次。我建议在一个`using`块中使用流：

```
using(StreamWriter writer = new StreamWriter(ListFileName))
{
   foreach (string s in InfoLineList) 
   {
       writer.WriteLine(s);
   }
} 
```

这将确保`StreamWriter`正确处理。

如果你*真的*想知道打开了什么文件，可以使用[SysInternal 的 Handle 工具](http://technet.microsoft.com/en-us/sysinternals/bb896655)来检查。我愿意打赌这是你自己的程序。

最后，正如我在评论中所说，该`File.WriteAllLines()`方法可以一次将可枚举的字符串列表写入文件：

```
File.WriteAllLines(ListFileName, InfoListList); 
```

# objective-c - 将 UI 选择器添加到 UITextView

> ID：13633122
> 
> 赞同：2
> 
> 时间：2012-11-29T19:21:50.793
> 
> 标签：objective-c, ios, uitextview, uipickerview

I'm trying to add a `UIPicker`to a `UITextView`when it is selected to choose an age. 我找到了一个以前的[线程](https://stackoverflow.com/questions/9064367/adding-uipicker-to-textfield)并实现了代码，但我无法让它正常工作。当我构建程序时，选择器会出现，但其中没有值。关于我做错了什么的任何想法？另外，我在这里收到两个黄色错误，说“从不兼容的类型'ViewController *const __strong'分配给'id'”：

```
pickerView.delegate = self;
pickerView.dataSource = self; 
```

谢谢你。

```
@interface ViewController ()

@property (weak, nonatomic) IBOutlet UITextField *ageTextField;

@end

@implementation ViewController
@synthesize ageTextField;

- (void)viewDidLoad
{
    [super viewDidLoad];
        // Do any additional setup after loading the view, typically from a nib.

    UIPickerView *pickerView =[[UIPickerView alloc]init];
    pickerView.delegate = self;
    pickerView.dataSource = self;
    pickerView.showsSelectionIndicator=YES;
    ageTextField.inputView=pickerView;
}

- (void)pickerView:(UIPickerView *)PickerView
      didSelectRow:(NSInteger)row
       inComponent:(NSInteger)component {

    NSMutableArray *ageArray = [[NSMutableArray alloc]init];

    [ageArray addObject:@"1"];
    [ageArray addObject:@"2"];
    [ageArray addObject:@"3"];
    [ageArray addObject:@"4"];

    ageTextField.text=[ageArray objectAtIndex:row];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T19:25:44.027

```
@interface ViewController () <UIPickerViewDataSource, UIPickerViewDelegate>

@property (strong, nonatomic) UIPickerView *pickerView;
@property (strong, nonatomic) NSArray *pickerElements;

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    self.pickerView = [[UIPickerView alloc] init];
    self.pickerView.delegate = self;
    self.pickerView.dataSource = self;
    self.pickerView.showsSelectionIndicator = YES;
    self.ageTextField.inputView = self.pickerView;

    self.pickerElements = @[@"text1", @"text2", @"text3", @"text4"];
    [self pickerView:self.pickerView
        didSelectRow:0
         inComponent:0];
}

- (int)numberOfComponentsInPickerView:(UIPickerView *)pickerView
{
    return 1;
}

- (int)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component
{
     return [self.pickerElements count];
}

- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component
{
    return [self.pickerElements objectAtIndex:row];
}

- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{
    self.ageTextField.text = [self.pickerElements objectAtIndex:row];
}

@end 
```

# asp.net-mvc-3 - IIS 8 服务器错误 500 日志

> ID：13633123
> 
> 赞同：1
> 
> 时间：2012-11-29T19:21:57.720
> 
> 标签：asp.net-mvc-3, windows-server-2008, log4net, iis-8

所以我们决定尝试新的 Windows Server 8 / IIS 8。在 VS-Dev 服务器上运行我只需在 Global.asx 的 Application_Error() 中捕获所有服务器错误，并使用 log4net 记录这些错误。

现在我有两个问题，首先是我们的开发服务器上的 Application_Error() 似乎没有捕获异常（因为服务器向浏览器返回状态码 500）。其次是我的 log4net 没有从 Web 应用程序中记录任何内容。

它是一个使用 razor 视图的 mvc 3.0 asp.net 应用程序。我的本地机器正在运行 Windows 7 / VSUltimate 2012。

信任级别设置为 Full 并且 IIS_IUSRS 用户组对我尝试写入日志文件的文件夹具有完全访问权限。

我真正想要的只是在某处记录异常，所以如果在 IIS 8 中有内置的方法，请告诉我。（也许重定向到一些将异常作为参数的错误控制器？）

干杯托马斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T18:24:39.427

升级到 Windows Server 2012 / IIS 8 后，我遇到了非常相似的问题。

例外情况正在添加到 Windows 事件日志中。从开始菜单打开事件查看器，展开左侧的 Windows > 应用程序，然后在“Web 事件”类别中查找事件。

在我们的服务器上，以下更改解决了问题：

> 在 IIS 管理器中，转到“.NET 错误页面”，然后在右侧选择“编辑功能设置...”并将模式更改为开启或仅远程。

![在此处输入图像描述](../Images/6f84fc7c76724cc3d9d7f673f4832458.png)

# emacs - 实时可视化 s 表达式

> ID：13633124
> 
> 赞同：5
> 
> 时间：2012-11-29T19:22:07.667
> 
> 标签：emacs, clojure, lisp, s-expression, code-visualization

我想写这样的 Lisp/Scheme/Clojure 代码

```
(map inc (range 0 5)) 
```

让它看起来有点像这样

```
map -- inc
   \\
       range -- 0
           \  
             -- 5 
```

我想在我操纵我的表情时实时看到树的变化。随着树木变大，布局将变得重要。

有没有任何工具可以做到这一点？我怀疑 Emacs 世界中可能存在某些东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T19:30:27.853

[Light Table](http://www.lighttable.com/)项目旨在创建一个具有这种可见性的 IDE，并将其作为其更重要的功能之一。这个想法是它在它自己的代码旁边显示评估结果。虽然它是一个类似的概念，但不像你问的那样完全是树视图。

对于较少侵入性的更改，[tools.trace](https://github.com/clojure/tools.trace)包可以帮助使事情更加明显

# sql - Oracle SQL：仅在满足两个条件时才从查询结果中排除一条记录

> ID：13633125
> 
> 赞同：-1
> 
> 时间：2012-11-29T19:22:18.973
> 
> 标签：sql, oracle

所以我有一个相当大的 Oracle SQL 查询。我想将以下逻辑添加到我的 where 子句中，如下面的伪代码所述。可能吗？当且仅当 columnA 和 columnB 都为空时，我想排除一条记录。如果其中一个为空，那没关系。

```
 IF (pfr.columnA && pfr.columnB != NULL)
        exclude record
    ELSE
        do nothing 
```

我尝试了以下内容，除了我的 where 子句，但显然它没有完成我所需要的。

```
AND (pfr.columnA IS NOT NULL AND pfr.columnB IS NOT NULL) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T19:26:32.713

```
where NOT (pfr.columnA is NULL and pfr.columnB is NULL); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T19:33:07.680

```
WHERE 
case when pfr.ColumnA is null then 0 else 1 end + 
case when pfr.columnB is null then 0 else 1 end > 0 
```

或者

```
where (pfr.columnA is not null or pfr.columnb is not null) 
```

# java - 多个 JTree 未出现在 JScrollPanel 中

> ID：13633128
> 
> 赞同：0
> 
> 时间：2012-11-29T19:22:41.673
> 
> 标签：java, swing, jscrollpane, jtree

我使用[这里](http://www.apl.jhu.edu/~hall/java/Swing-Tutorial/Swing-Tutorial-JTree.html)提到的第一个示例来创建我的 JTree，但我想在 JscrollPanel 中放置多个树作为根。我只是更改了框的布局并使用相同的代码再创建一棵树，但是当我运行程序时，树并没有出现在我面前。

这是我的代码

```
import java.awt.*;
import javax.swing.*;
import javax.swing.tree.*;

public class SimpleTree extends JFrame {
  public static void main(String[] args) {
    new SimpleTree();
  }

  public SimpleTree() {
    super("Creating a Simple JTree");
    Container content = getContentPane();
    Object[] hierarchy =
      { "javax.swing",
        "javax.swing.border",
        "javax.swing.colorchooser",
        "javax.swing.event",
        "javax.swing.filechooser",
        new Object[] { "javax.swing.plaf",
                       "javax.swing.plaf.basic",
                       "javax.swing.plaf.metal",
                       "javax.swing.plaf.multi" },
        "javax.swing.table",
        new Object[] { "javax.swing.text",
                       new Object[] { "javax.swing.text.html",
                                      "javax.swing.text.html.parser" },
                       "javax.swing.text.rtf" },
        "javax.swing.tree",
        "javax.swing.undo" };
    DefaultMutableTreeNode root = processHierarchy(hierarchy);
    DefaultMutableTreeNode root2 = processHierarchy(hierarchy);
    JTree tree = new JTree(root);
    JTree tree2 = new JTree(root2);
    content.setLayout(new BoxLayout(this,BoxLayout.Y_AXIS));
    content.add(new JScrollPane(tree));
    content.add(new JScrollPane(tree2));
    setSize(getPreferredSize());
    setVisible(true);
  }

  /** Small routine that will make node out of the first entry
   *  in the array, then make nodes out of subsequent entries
   *  and make them child nodes of the first one. The process is
   *  repeated recursively for entries that are arrays.
   */

  private DefaultMutableTreeNode processHierarchy(Object[] hierarchy) {
    DefaultMutableTreeNode node =
      new DefaultMutableTreeNode(hierarchy[0]);
    DefaultMutableTreeNode child;
    for(int i=1; i<hierarchy.length; i++) {
      Object nodeSpecifier = hierarchy[i];
      if (nodeSpecifier instanceof Object[])  // Ie node with children
        child = processHierarchy((Object[])nodeSpecifier);
      else
        child = new DefaultMutableTreeNode(nodeSpecifier); // Ie Leaf
      node.add(child);
    }
    return(node);
  }
} 
```

有人可以帮我解决这个问题。所有帮助将不胜感激。

谢谢 Ashish Tyagi

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T19:24:44.247

A`JScrollPane`可以查看其 中的*单个*子组件`ViewPort`。

但是，您可以将 2 个`JScrollPane`组件放在一个面板上，例如均匀拆分`GridLayout(2, 1)`并将视图设置为`JScrollPane`新面板。

*旁白*：您应该将`ContentPane`用作容器`BoxLayout`：

```
content.setLayout(new BoxLayout(content, BoxLayout.Y_AXIS)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T19:31:24.200

*   必须接受`JScrollPane`未指定持有多个`JComponents`

*   您可以放入`JPanel`，`JScrollPane`将所需数量的`JTree`s 放入 (in `JScrollPane`)`JPanel`中，也许`GridLayout`用于`JPanel`

*   [`JScrollPane`注意在父级和每个`JScrollPane`带有`JTree`s 的 s之间可滚动的可能并发](https://stackoverflow.com/questions/8729629/jscrollpane-in-jscrollpane)

# java - 如何定制 JSF 2 中的风格？

> ID：13633130
> 
> 赞同：1
> 
> 时间：2012-11-29T19:22:53.910
> 
> 标签：java, jsf, jsf-2, richfaces

我有一个前端开发人员已经完成的 HTML 消息错误，所以我需要严格使用他的设计。

我是否需要编写继承的组件`<h:message/>`并实现渲染？或者当我使用`FacesMessage`机制在 JSF 上下文中添加错误时，还有其他简单的方法可以在其中自动显示一些 html？

完美的解决方案是，当我`FacesMessage`在上下文中添加我`<div>`的自定义 HTML 时，将显示。可能吗？

我怎样才能进行这种定制？简单的方法如何？

我不想`OutputMessage`使用，因为我不会使用该`FacesMessage`机制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T22:24:19.547

HTML 应该添加到 XHTML 页面中。无论如何，您可以使用它`FacesContext.getMessages(String)`来检查组件是否有一些消息（并基于此呈现适当的 HTML）。

例如

```
 <h:outputText value="Here is the message!:" rendered="#{myBean.messageForComponentX}"/>
 <h:message for="componentX"/> 
```

在你的豆子里

```
public isMessageForComponentX() {
  return (FacesContext.getMessages("componentX") != null) && (FacesContext.getMessage("componentX") > 0);
} 
```

您还可以检查`<rich:notify>`和`<p:growl>`组件（来自 RichFaces 和 PrimeFaces），用于消息的自定义管理。

# xml - XML -> XSLT -> Word for-each 不循环

> ID：13633133
> 
> 赞同：0
> 
> 时间：2012-11-29T19:23:15.800
> 
> 标签：xml, xslt

我已将我的 SQL 客户端从 MySQL Query Browser 更新到 MySQL Workbench。随着那次升级，我的 XML 格式发生了变化，我的 XSLT 不再工作了。它只会显示第一项。

这是 XML 和 XSLT 的简化版本，它的 Nessus 输出发送到 MySQL 数据库。

XML

```
<?xml version="1.0" encoding="UTF-8"?>
<DATA>

    <ROW>
        <Niveau>Haute</Niveau>
        <Nom>Some vulnerability</Nom>
        <Solution>Some Solution</Solution>
        <cve>CVE-2006-1234, CVE-2006-5615</cve>
        <bid>11263, 11291</bid>
        <Number>5</Number>
    </ROW>

    <ROW>
        <Niveau>Haute</Niveau>
        <Nom>Some Other Vulnerability</Nom>
        <Solution>Apply the security patch.</Solution>
        <cve>CVE-2006-1742, CVE-2006-1743</cve>
        <bid>20584, 20585</bid>
        <Number>23</Number>
    </ROW>

    <ROW>
        <Niveau>Moyenne</Niveau>
        <Nom>Yet another vulnerability</Nom>
        <Solution>Do this and that</Solution>
        <cve></cve>
        <bid></bid>                
        <Number>2</Number>
    </ROW>

</DATA> 
```

XSLT

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet
  version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:output method="xml" indent="yes"/>
  <xsl:template match="/">

    <xsl:processing-instruction name="mso-application">
      <xsl:text>progid="Word.Document"</xsl:text>
    </xsl:processing-instruction>
    <w:wordDocument
      xmlns:w="http://schemas.microsoft.com/office/word/2003/wordml">

      <w:body>
        <xsl:for-each select="DATA/ROW">
          <w:p>
            <w:r>
              <w:t><xsl:value-of select="Nom"/></w:t>
            </w:r>
          </w:p>
        </xsl:for-each>
      </w:body>
    </w:wordDocument>

  </xsl:template>
</xsl:stylesheet> 
```

然后我在一个将两者合并到 Word 文档中的脚本中对其进行解析。它用于创建与我的条目一样多的表。但现在我只得到第一行。我很确定它与任何一个有关`<xsl:template match="/">`，`<xsl:for-each select="DATA/ROW">`但我似乎找不到正确的组合。

如果有人也可以告诉我如何在`Nom`喜欢之前添加一个序列号，那么`1- Nom`我会是一个非常开心的露营者。

电流输出

```
<w:wordDocument xmlns:w="http://schemas.microsoft.com/office/word/2003/wordml">
  <w:body>
    <w:p>
      <w:r>
        <w:t>Some vulnerability</w:t>
      </w:r>
    </w:p>
  </w:body>
</w:wordDocument> 
```

期望的输出

```
<w:wordDocument xmlns:w="http://schemas.microsoft.com/office/word/2003/wordml">
  <w:body>
    <w:p>
      <w:r>
        <w:t>1- Some vulnerability</w:t>
      </w:r>
    </w:p>
    <w:p>
      <w:r>
        <w:t>2- Some Other Vulnerability</w:t>
      </w:r>
    </w:p>
    <w:p>
      <w:r>
        <w:t>3- Yet another vulnerability</w:t>
      </w:r>
    </w:p>
  </w:body>
</w:wordDocument> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T19:40:54.010

这应该做你想要的：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>
  <xsl:template match="/DATA">

    <xsl:processing-instruction name="mso-application">
      <xsl:text>progid="Word.Document"</xsl:text>
    </xsl:processing-instruction>
    <w:wordDocument xmlns:w="http://schemas.microsoft.com/office/word/2003/wordml">
      <w:body>
        <xsl:for-each select="ROW">
          <w:p>
            <w:r>
              <w:t>
                <xsl:value-of select="concat(count(preceding-sibling::ROW)+1,'- ',Nom)"/>
              </w:t>
            </w:r>
          </w:p>
        </xsl:for-each>
      </w:body>
    </w:wordDocument>
  </xsl:template>
</xsl:stylesheet> 
```

“更多 XSLT”的解决方案是：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" 
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
    xmlns:w="http://schemas.microsoft.com/office/word/2003/wordml">
  <xsl:output method="xml" indent="yes"/>
  <xsl:template match="/DATA">

    <xsl:processing-instruction name="mso-application">
      <xsl:text>progid="Word.Document"</xsl:text>
    </xsl:processing-instruction>
    <w:wordDocument>
      <w:body>
        <xsl:apply-templates select="ROW"/>
      </w:body>
    </w:wordDocument>
  </xsl:template>

  <xsl:template match="ROW">
    <w:p>
      <w:r>
        <w:t>
          <xsl:value-of select="concat(count(preceding-sibling::ROW)+1,'- ',Nom)"/>
        </w:t>
      </w:r>
    </w:p>
  </xsl:template>
</xsl:stylesheet> 
```

两者的输出是：

```
<?xml version="1.0" encoding="utf-8"?><?mso-application progid="Word.Document"?>
<w:wordDocument xmlns:w="http://schemas.microsoft.com/office/word/2003/wordml">
  <w:body>
    <w:p>
      <w:r>
        <w:t>1- Some vulnerability</w:t>
      </w:r>
    </w:p>
    <w:p>
      <w:r>
        <w:t>2- Some Other Vulnerability</w:t>
      </w:r>
    </w:p>
    <w:p>
      <w:r>
        <w:t>3- Yet another vulnerability</w:t>
      </w:r>
    </w:p>
  </w:body>
</w:wordDocument> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T12:47:44.080

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
     <xsl:output method="xml" indent="yes"/>
  <xsl:template match="/DATA">

    <xsl:processing-instruction name="mso-application">
      <xsl:text>progid="Word.Document"</xsl:text>
    </xsl:processing-instruction>
    <w:wordDocument
      xmlns:w="http://schemas.microsoft.com/office/word/2003/wordml">

      <w:body>
        <xsl:for-each select="//ROW">
          <xsl:variable name="pos" select="position()"/>
          <w:p>
            <w:r>
              <w:t>
              <xsl:value-of select="concat($pos,'-')"/>
              <xsl:value-of select="Nom"/>
              </w:t>
            </w:r>
          </w:p>
        </xsl:for-each>
      </w:body>
    </w:wordDocument>

  </xsl:template>
</xsl:stylesheet> 
```

# c++ - 使用 g++ 与 ACE lib 链接时遇到一些问题

> ID：13633136
> 
> 赞同：2
> 
> 时间：2012-11-29T19:23:26.553
> 
> 标签：c++, linux, g++, visibility

我在 Suse 11 x86 机器上使用 ACE6.0.2。gcc 的版本是 4.3，ACE-TAO lib 编译没有问题。

我想做的测试很简单，但就是不能通过。

我有三个文件。a1.h 定义了一个类 A。

```
class A 
{ 
    public: 
        A(); 
        void print(); 
}; 
```

a1.cpp 有一个函数调用来自 ACE 库的方法。

```
#include "a1.h" 
#include <ace/Thread.h> 
#include <iostream> 

A::A(){} 

void A::print() 
{ 
    long t=ACE_Thread::self(); 
    std::cout<<t<<std::endl; 
} 
```

main.cpp 从 A 类调用 print()

```
#include "a1.h" 

int main() 
{ 
    A a; 
    a.print(); 
    return 0; 
} 
```

我使用的编译命令是：

1.用ACE_thread生成a1.o

g++ -c -fPIC -fno-strict-aliasing -fvisibility=hidden -fvisibility-inlines-hidden -O3 -ggdb -pthread -Wall -W -Wpointer-arith -pipe -D_GNU_SOURCE -I/opt/ACE_wrappers -DACE_HAS_VALGRIND -D__ACE_INLINE__ - I.. -Wl,-E -L/opt/ACE_wrappers/lib -L。-o a1.o a1.cpp

2.生成共享libT.so

g++ -pthread -Wl,-O3 -shared -o libT.so a1.o -Wl,-E -L/opt/ACE_wrappers -L。-L/opt/ACE_wrappers/lib -lACE -ldl -lrt

3.生成main.o

g++ -c -fno-strict-aliasing -fvisibility=hidden -fvisibility-inlines-hidden -O3 -ggdb -pthread -Wall -W -Wpointer-arith -pipe -D_GNU_SOURCE -I/opt/ACE_wrappers -DACE_HAS_VALGRIND -D__ACE_INLINE__ -I。 .-Wl,-E -L/opt/ACE_wrappers/lib -L. -o main.o main.cpp -lACE -ldl -lrt

4.链接并生成可执行文件

g++ -fno-strict-aliasing -fvisibility=hidden -fvisibility-inlines-hidden -O3 -ggdb -pthread -Wall -W -Wpointer-arith -pipe -D_GNU_SOURCE -I/opt/ACE_wrappers -DACE_HAS_VALGRIND -D__ACE_INLINE__ -I.. - Wl,-E -L/opt/ACE_wrappers/lib -L. -o main main.o -lT -lACE -ldl -lrt

问题出现在第 4 步：

```
main.o: In function `main': 

/main.cpp:5: undefined reference to `A::A()' 
/main.cpp:6: undefined reference to `A::print()' 
```

我是 linux 下的 C++ 新手，不明白为什么会发生这种情况。我的编译命令一定有问题。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-24T17:26:31.030

感谢用户1349058！经过大量小时的研究，幸运的是我找到了您的评论，并且效果很好。

例如，我在 Linux 上构建 32 位 ACE 库时使用的命令是：

```
$ make static_libs=1 buildbits=32 no_hidden_visibility=1
$ make install 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T19:28:04.090

好吧，您刚刚启用`-fvisibility=hidden`了默认隐藏所有符号的标志。结果，您的类`A`对您编译的共享库之外的任何内容都不可见。

有两种解决方案：

1.  不要使用`-fvisibility=hidden`标志。这将使所有符号默认可见。
2.  `A`将课程（以及您想从“外部世界”访问共享库中的几乎所有其他内容）标记为公开。这是特定于编译器的，通常使用宏来完成。有关 gcc 的更多信息，请参阅[GCC Visibility Wiki](http://gcc.gnu.org/wiki/Visibility)。

只是说清楚，这个问题是你的，只有你的。它与 Ace 或任何其他库完全无关。

希望能帮助到你。祝你好运！

# javascript - Javascript $.getJSON 回调和参数传递

> ID：13633139
> 
> 赞同：0
> 
> 时间：2012-11-29T19:23:49.470
> 
> 标签：javascript, json, getjson

我目前有一个 $.getJSON 调用，它工作正常，如下所示。

```
var jsonUrl = "http://www.somesite.co.uk/jsonusv.php?callback=?";                   
$.getJSON(jsonUrl,function(zippy){
...some code
} 
```

但是，我希望传递一个变量，以便 PHP 脚本可以使用它的 $_GET[''] 值并定制数据。

我厌倦了愚弄但无法得到任何想法的工作？

```
var jsonUrl = "http://www.somesite.co.uk/jsonusv.php?callback=?&value=65"; 
```

php 页面看起来像这样，这已被剥离。我确实尝试检测 $_GET['value'] 但它没有用。

```
<?PHP
header("content-type: application/json");  
$theSqlquery = "SELECT * FROM table ORDER BY timestamp DESC LIMIT 20";   
$result131 = mysql_query($theSqlquery);

     if ($result131)
     {

        //make up Json string in $temp

    echo $_GET['callback'] . '(' . $temp . ');';
     }                 
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T19:30:33.907

我建议`callback=?`从您的 jsonUrl 中删除

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T19:30:42.697

尝试将参数传递给`data`函数调用的参数而不是查询字符串：

```
var jsonUrl = "http://www.somesite.co.uk/jsonusv.php";
$.getJSON(jsonUrl, {
    callback: "your callback val",
    value: "65",
  },
function(zippy){
...some code
}); 
```

[http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

然后你可以访问它们`$_POST`

请注意，`echo`将假定的 json 结果发送回您的`$.getJSON()`方法调用，例如，`success()`如果它成功。如果你知道方法中的js方法名`success()`，并且只需要传递它`$temp`，试试这个

```
var jsonUrl = "http://www.somesite.co.uk/jsonusv.php";
$.getJSON(jsonUrl, {
    value: "65"
  },
function(zippy){
    callbackMethod(zippy[0]);
}); 
```

并在你的 php

```
$output = array();
$output[0] = $temp;
echo json_encode($output); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T17:38:45.027

```
var jsonUrl = "http://www.somesite.co.uk/jsonusv.php?callback=?";                   
$.getJSON(jsonUrl,{lastdatetime: "",},function(zippy){.... 
```

似乎工作...

# c++ - 类方法中对全局重载运算符的未定义引用

> ID：13633140
> 
> 赞同：0
> 
> 时间：2012-11-29T19:23:57.003
> 
> 标签：c++, oop, global-variables, overloading, linker-errors

我的编译器发出以下错误：

```
matrix.o: In function `Matrix::modify_cell(unsigned int, unsigned int, int)':
Matrix.cpp:(.text+0x5f): undefined reference to `operator!(Dim)'
Matrix.cpp:(.text+0xa3): undefined reference to `operator!(Dim)'
Matrix.cpp:(.text+0x178): undefined reference to `operator!(Dim)'
Matrix.cpp:(.text+0x1a0): undefined reference to `operator!(Dim)'
matrix.o: In function `List::nula(Dim) const':
Matrix.cpp:(.text._ZNK4List4nulaE3Dim[List::nula(Dim) const]+0x11): undefined reference to `operator!(Dim)'
list1.o:List - auxiliary methods.cpp:(.text+0x3b): more undefined references to `operator!(Dim)' follow
collect2: ld returned 1 exit status
make: *** [app] Error 1 
```

Matrix 是放置在文件 Matrix.h 和 Matrix.cpp 中的类，它继承自类 List，而后者又放置在 List.h 和其他两个 .cpp 文件中。键入 Dim (typedef) 和运算符！因为它在包含到 List.h 和操作员的 aux.h 中全局声明（在任何类之外）！在 aux.cpp 中定义。在 Matrix.h 我包括 List.h 所以我不明白是什么问题。aux.cpp 确实在我的 makefile 中编译为 .o，然后加入到单个应用程序中。

我知道最好将我的 typedef Dim 及其重载运算符放入一个类中，但它在类 List 和类 Matrix 中都使用，而 typedef 没有被继承，我不知道任何其他解决方法。

编辑：

```
// aux.cpp
#include "aux.h"
Dim operator!(Dim dim) { return dim == COL ? ROW : COL; }

// aux.h
#ifndef AUX_H
#define AUX_H

/* (...) */

typedef enum { ROW, COL } Dim;
inline Dim operator!(Dim dim);

#endif 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T19:34:12.127

您已声明`operator!(Dim)`为内联，因此除非您还在 .h 中包含定义，否则它不可用。要么移动定义，要么取出`inline`.

# jquery - 尽管选择器返回正确的项目，但删除事件侦听器正在删除所有项目

> ID：13633143
> 
> 赞同：2
> 
> 时间：2012-11-29T19:24:06.930
> 
> 标签：jquery, event-handling, event-listener

```
jQuery(document).on('click', 'a[id^="MenuFilterVar_"]', onClickHandler);
jQuery(document).off('click', 'a[title="Special Case Element"]'); 
```

上面的代码将一个事件附加到满足选择器中的元素`on()`。但是，当我`off()`在后续行中删除事件时（这些原始元素中的特殊情况元素），它会从第一行中删除元素的所有事件。

据我了解，`off()`应该只从满足选择器的项目中删除事件。我对 的理解是否遗漏了什么`on/off`，或者我的代码有什么问题？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T19:46:19.657

我认为如果你改变你的选择器，它应该可以工作。

```
jQuery('a[id^="MenuFilterVar_"]').on('click', onClickHandler);
jQuery('a[title="Special Case Element"]').off('click'); 
```

[http://jsfiddle.net/dboots/4rDgP/1/](http://jsfiddle.net/dboots/4rDgP/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T20:06:36.030

看起来对于`.off`委托事件，您需要使用与`.on`. 以下是来自 jQuery 文档...

> 要删除特定的委托事件处理程序，请提供选择器参数。选择器字符串必须与附加事件处理程序时传递给 .on() 的字符串完全匹配。要从元素中删除所有委托事件而不删除非委托事件，请使用特殊值“**”。

[http://api.jquery.com/off/](http://api.jquery.com/off/)

如果它只是 1 个元素，您可以简单地添加该条件。见下文，

**演示：http:** [//jsfiddle.net/4rDgP/4/](http://jsfiddle.net/4rDgP/4/)

```
function onClickHandler() {
    alert($(this).text());
}

jQuery(document).on('click', 'a[id^="MenuFilterVar_"]', function() {
    if (this.title == 'Special Case Element') return;   
    onClickHandler.call(this);
}); 
```

或者如果它是多个元素，那么您可以为要忽略的那些元素绑定另一个处理程序并执行`e.stopImmediatePropagation()`. 见下文，

**演示：http:** [//jsfiddle.net/4rDgP/3/](http://jsfiddle.net/4rDgP/3/)

```
jQuery(document).on('click', 'a[title="Special Case Element"]', function (e) {
     e.stopImmediatePropagation();
}); 
jQuery(document).on('click', 'a[id^="MenuFilterVar_"]', onClickHandler); 
```

请注意，`e.stopImmediatePropagation();`应该在实际处理程序绑定之上。

# iphone - UITableView - 获取单元格的宽度以适合文本？

> ID：13633144
> 
> 赞同：0
> 
> 时间：2012-11-29T19:24:06.453
> 
> 标签：iphone, objective-c, ios, ipad, uitableview

我正在编写一个自定义 UITableViewCell 对象，并且我已经实现`layoutSubviews`了在其内容更新时调整单元格的大小。

为了实现`heightForRowAtIndexPath`，我正在计算自定义 UITableViewCell 对象中单元格的高度。我`NSString sizeWithFont`用来根据 UILabel 中的文本和 UITableView 中单元格的宽度来计算单元格的大小。

但是如何获得 UITableView 中单元格的宽度？

现在，我将表格视图传递给对象并使用框架。但宽度是整个表格而不是单个单元格。我在这里缺少什么吗？

提前致谢。

编辑3

我在想，如果真的不可能，只需测试纵向或横向方向，然后手动设置宽度（ipad 只有 2 个不同的方向）..

编辑2

有一些关于“你为什么要这样做xxxx”的问题。我知道也许有更好的方法来实现我正在做的事情，创建一个自定义单元格，它可以计算自己的高度和不同的文本长度。如果有更好的方法，我会全神贯注:)

编辑

[http://img845.imageshack.us/img845/7792/screenshot20121129at193.png](http://img845.imageshack.us/img845/7792/screenshot20121129at193.png)

```
+ (CGFloat)getHeightForCellWithText:(NSString *)text isExpanded:(BOOL)expanded tableView:(UITableViewController *)tv {

ProposalViewCell *cell = [[ProposalViewCell alloc] initWithStyle:UITableViewCellSelectionStyleNone reuseIdentifier:@"NormalCell" tableView:tv];

[cell setLabelText:text];

[cell setExpanded:expanded];

[cell layoutSubviews];

return cell.primaryLabel.frame.size.height + cell.readmoreButton.frame.size.height + cell.sendmessageButton.frame.size.height +30;

}

- (void)layoutSubviews {

[super layoutSubviews];

_primaryLabel.numberOfLines = 0; // multiple lines

// size of expanded text label
// sizeWithFont: if text doesn't fit, it is truncated
CGSize expandedSize = [_primaryLabel.text sizeWithFont:myFont constrainedToSize:CGSizeMake(tableView.view.frame.size.width, CGFLOAT_MAX) lineBreakMode:NSLineBreakByWordWrapping];

// size as expanded by default
_primaryLabel.frame = CGRectMake(10, 10, expandedSize.width, expandedSize.height);

if (expanded==NO) {

    // size of summary text label
    _primaryLabel.numberOfLines = 10;
    CGSize summarySize = [_primaryLabel sizeThatFits:_primaryLabel.frame.size];

    _primaryLabel.frame = CGRectMake(10, 10, summarySize.width, summarySize.height);

}

_readmoreButton.frame = CGRectMake(10, _primaryLabel.frame.size.height+10, 225, 25);

_sendmessageButton.frame = CGRectMake(10, _primaryLabel.frame.size.height+10+_readmoreButton.frame.size.height+10, 225, 25);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T12:02:50.303

要获得单元格的宽度，只需执行此操作...

```
cell.contentview.frame.size.width 
```

# facebook - 使用 FQL 未收到一些 status_type 为“shared_story”的消息

> ID：13633153
> 
> 赞同：2
> 
> 时间：2012-11-29T19:24:53.793
> 
> 标签：facebook, facebook-fql, facebook-opengraph, shared, facebook-stream-story

自从我发现我的应用程序中没有收到一些朋友的帖子以来，我一直在搜索这么多小时。我查看了[FQL 文档](https://developers.facebook.com/docs/reference/fql/)，在 Internet 上进行了搜索，但一无所获。

我现在可以使用 Graph API 获取它们，请求“提要”，但我收到了很多我不需要的帖子类型，因为我开始使用 FQL 请求[“流”](https://developers.facebook.com/docs/reference/fql/stream/)，我可以在其中指定一些类型（46 - 状态更新，80 - 链接发布等）。

这种类型的帖子是在一个人的墙上发布的，当他/她分享他/她在他的墙上发布的状态、照片或链接另一个人时，这是“status_type”：“shared_story”。

有人知道是否可以通过 FQL 获得它们？

谢谢你。

PS：好的，这太疯狂了，我看到了一篇使用 FQL 获得的此类帖子，我使用 Graph API 请求提要，类型是相同的“shared_story”。但由于某种原因，我不明白我没有得到所有这些。是否有另一个参数可以在它们之间产生差异？因为我看不到。

我没有收到这个：

```
{
     "id": "",
     "from": {
        "name": "",
        "id": ""
     },
     "story": "",
     "story_tags": {
        "0": [
           {
              "id": "",
              "name": "",
              "offset": 0,
              "length": 24,
              "type": "user"
           }
        ],
        "32": [
           {
              "id": "",
              "name": "",
              "offset": 32,
              "length": 18,
              "type": "page"
           }
        ]
     },
     "picture": "",
     "link": "",
     "name": "s",
     "caption": "",
     "properties": [
        {
           "name": "",
           "text": "",
           "href": ""
        }
     ],
     "icon": "",
     "actions": [
        {
           "name": "Comment",
           "link": ""
        },
        {
           "name": "Like",
           "link": "4"
        }
     ],
     "privacy": {
        "value": ""
     },
     "type": "photo",
     "status_type": "shared_story",
     "object_id": "",
     "application": {
        "name": "Links",
        "id": "2309869772"
     },
     "created_time": "",
     "updated_time": "",
     "likes": {
        "data": [
           {
              "name": "",
              "id": ""
           }
        ],
        "count": 1
     },
     "comments": {
        "count": 0
     }
  } 
```

但是，我收到了这个：

```
{
     "id": "",
     "from": {
        "name": "",
        "id": ""
     },
     "message": "",
     "picture": "",
     "link": "",
     "source": "",
     "name": "",
     "caption": "",
     "description": "",
     "icon": "",
     "actions": [
        {
           "name": "Comment",
           "link": ""
        },
        {
           "name": "Like",
           "link": ""
        }
     ],
     "privacy": {
        "value": ""
     },
     "type": "video",
     "status_type": "shared_story",
     "application": {
        "name": "Links",
        "id": "2309869772"
     },
     "created_time": "",
     "updated_time": "",
     "comments": {
        "count": 0
     }
  } 
```

# ios - 有没有办法编译一个 NSRegularExpression 来匹配多个字符串？

> ID：13633154
> 
> 赞同：3
> 
> 时间：2012-11-29T19:24:54.430
> 
> 标签：ios

ICU 和 Java 的正则表达式支持（可能还有其他平台）将正则表达式的编译与将其与特定字符串匹配分开。当一个常见的正则表达式模式与多个字符串匹配时，这会提高性能，因为它只需要编译一次。

有没有办法用 NSRegularExpression 做到这一点？如果我正确阅读文档，它的设计似乎结合了这两个步骤。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T21:22:20.070

它们是两个步骤。首先，您创建一个正则表达式：

```
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"<h1>(.*?)</h1>"
                                                                       options:NSRegularExpressionCaseInsensitive
                                                                         error:&error]; 
```

然后，第二，你使用它（显然使用你想要的任何方法）：

```
[regex enumerateMatchesInString:htmlString
                        options:0
                          range:NSMakeRange(0, [htmlString length])
                     usingBlock:^(NSTextCheckingResult *result, NSMatchingFlags flags, BOOL *stop) {
                         // do whatever you want
                 }]; 
```

我误解了这个问题吗？

# android - 在 Android 2.2 中打开首选项屏幕时出错 (android.view.InflateException)

> ID：13633156
> 
> 赞同：0
> 
> 时间：2012-11-29T19:24:57.267
> 
> 标签：android, android-layout, android-preferences, start-activity, inflate-exception

我在使用 android 2.2 的应用程序中遇到错误。错误如下：

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{dev.luizmoratelli.cowpea.three.m.ui/dev.luizmoratelli.cowpea.three.m.ui.Preferences}: android.view.InflateException: Binary XML file line #20: Error inflating class android.widget.ListView 
```

最奇怪的是，在我的 4.0.4 android 设备中它运行良好。

我的xml如下：

```
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">
    <EditTextPreference
        android:key="pref_ip"
        android:title="IP do Servidor"
        android:defaultValue="0.0.0.0" />
</PreferenceScreen> 
```

我的页面的 onCreate 如下：

```
@SuppressWarnings("deprecation")
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.preferences);

        Preference prefIP = getPreferenceScreen().findPreference(KEY_PREF_IP);
        prefIP.setOnPreferenceChangeListener(validaIPListener);

        SharedPreferences sharedPreferences = PreferenceManager.getDefaultSharedPreferences(this);
        prefIP.setSummary(sharedPreferences.getString(KEY_PREF_IP, "0.0.0.0"));
    } 
```

- 编辑 -

我发布了完整的 LogCat 日志，并在我的 styles.xml 下方：

```
11-29 22:18:26.940: E/ResourceType(343): Style contains key with bad entry: 0x010102f0
11-29 22:18:29.210: D/dalvikvm(343): GC_FOR_MALLOC freed 2953 objects / 267104 bytes in 69ms
11-29 22:18:29.770: E/ResourceType(343): Style contains key with bad entry: 0x010102f0
11-29 22:18:29.890: D/AndroidRuntime(343): Shutting down VM
11-29 22:18:29.890: W/dalvikvm(343): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
11-29 22:18:29.930: E/AndroidRuntime(343): FATAL EXCEPTION: main
11-29 22:18:29.930: E/AndroidRuntime(343): java.lang.RuntimeException: Unable to start activity ComponentInfo{dev.luizmoratelli.cowpea.three.m.ui/dev.luizmoratelli.cowpea.three.m.ui.Preferences}: android.view.InflateException: Binary XML file line #20: Error inflating class android.widget.ListView
11-29 22:18:29.930: E/AndroidRuntime(343):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
11-29 22:18:29.930: E/AndroidRuntime(343):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
11-29 22:18:29.930: E/AndroidRuntime(343):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
11-29 22:18:29.930: E/AndroidRuntime(343):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
11-29 22:18:29.930: E/AndroidRuntime(343):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-29 22:18:29.930: E/AndroidRuntime(343):  at android.os.Looper.loop(Looper.java:123)
11-29 22:18:29.930: E/AndroidRuntime(343):  at android.app.ActivityThread.main(ActivityThread.java:4627)
11-29 22:18:29.930: E/AndroidRuntime(343):  at java.lang.reflect.Method.invokeNative(Native Method)
11-29 22:18:29.930: E/AndroidRuntime(343):  at java.lang.reflect.Method.invoke(Method.java:521)
11-29 22:18:29.930: E/AndroidRuntime(343):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
11-29 22:18:29.930: E/AndroidRuntime(343):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
11-29 22:18:29.930: E/AndroidRuntime(343):  at dalvik.system.NativeStart.main(Native Method)
11-29 22:18:29.930: E/AndroidRuntime(343): Caused by: android.view.InflateException: Binary XML file line #20: Error inflating class android.widget.ListView
11-29 22:18:29.930: E/AndroidRuntime(343):  at android.view.LayoutInflater.createView(LayoutInflater.java:513)
11-29 22:18:29.930: E/AndroidRuntime(343):  at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
11-29 22:18:29.930: E/AndroidRuntime(343):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:563)
11-29 22:18:29.930: E/AndroidRuntime(343):  at android.view.LayoutInflater.inflate(LayoutInflater.java:385)
11-29 22:18:29.930: E/AndroidRuntime(343):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
11-29 22:18:29.930: E/AndroidRuntime(343):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
11-29 22:18:29.930: E/AndroidRuntime(343):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:198)
11-29 22:18:29.930: E/AndroidRuntime(343):  at android.app.Activity.setContentView(Activity.java:1647)
11-29 22:18:29.930: E/AndroidRuntime(343):  at android.preference.PreferenceActivity.onCreate(PreferenceActivity.java:107)
11-29 22:18:29.930: E/AndroidRuntime(343):  at dev.luizmoratelli.cowpea.three.m.ui.Preferences.onCreate(Preferences.java:52)
11-29 22:18:29.930: E/AndroidRuntime(343):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
11-29 22:18:29.930: E/AndroidRuntime(343):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
11-29 22:18:29.930: E/AndroidRuntime(343):  ... 11 more
11-29 22:18:29.930: E/AndroidRuntime(343): Caused by: java.lang.reflect.InvocationTargetException
11-29 22:18:29.930: E/AndroidRuntime(343):  at android.widget.ListView.<init>(ListView.java:153)
11-29 22:18:29.930: E/AndroidRuntime(343):  at java.lang.reflect.Constructor.constructNative(Native Method)
11-29 22:18:29.930: E/AndroidRuntime(343):  at java.lang.reflect.Constructor.newInstance(Constructor.java:446)
11-29 22:18:29.930: E/AndroidRuntime(343):  at android.view.LayoutInflater.createView(LayoutInflater.java:500)
11-29 22:18:29.930: E/AndroidRuntime(343):  ... 22 more
11-29 22:18:29.930: E/AndroidRuntime(343): Caused by: android.content.res.Resources$NotFoundException: File res/drawable-mdpi/darkbluegradientc3m.xml from color state list resource ID #0x7f020007
11-29 22:18:29.930: E/AndroidRuntime(343):  at android.content.res.Resources.loadColorStateList(Resources.java:1817)
11-29 22:18:29.930: E/AndroidRuntime(343):  at android.content.res.TypedArray.getColor(TypedArray.java:319)
11-29 22:18:29.930: E/AndroidRuntime(343):  at android.widget.AbsListView.<init>(AbsListView.java:554)
11-29 22:18:29.930: E/AndroidRuntime(343):  at android.widget.ListView.<init>(ListView.java:157)
11-29 22:18:29.930: E/AndroidRuntime(343):  ... 26 more
11-29 22:18:29.930: E/AndroidRuntime(343): Caused by: org.xmlpull.v1.XmlPullParserException: Binary XML file line #1: invalid drawable tag shape
11-29 22:18:29.930: E/AndroidRuntime(343):  at android.content.res.ColorStateList.createFromXmlInner(ColorStateList.java:144)
11-29 22:18:29.930: E/AndroidRuntime(343):  at android.content.res.ColorStateList.createFromXml(ColorStateList.java:127)
11-29 22:18:29.930: E/AndroidRuntime(343):  at android.content.res.Resources.loadColorStateList(Resources.java:1814)
11-29 22:18:29.930: E/AndroidRuntime(343):  ... 29 more

<resources xmlns:android="http://schemas.android.com/apk/res/android">

    <style name="BlueTheme" parent="@android:style/Theme">
        <item name="android:windowBackground">@drawable/darkbluegradientc3m</item>
        <item name="android:colorBackground">@drawable/darkbluegradientc3m</item>
        <item name="android:dropDownListViewStyle">@style/spinner_list_view</item>
        <item name="android:listChoiceBackgroundIndicator">@drawable/list_selector_c3m</item>
    </style>

    <style name="text_title" parent="@android:style/Widget.TextView">
        <item name="android:textColor">#E5E6FF</item>
        <item name="android:layout_width">wrap_content</item>
        <item name="android:layout_height">wrap_content</item>
        <item name="android:textSize">30sp</item>
        <item name="android:layout_gravity">center</item>
    </style>

    <style name="text_regular" parent="@android:style/Widget.TextView">
        <item name="android:textColor">#AADDFF</item>
        <item name="android:layout_width">wrap_content</item>
        <item name="android:layout_height">wrap_content</item>
        <item name="android:layout_marginTop">10dp</item>
        <item name="android:textSize">20sp</item>
        <item name="android:layout_marginLeft">10dp</item>
    </style>

    <style name="text_dropdownitem" parent="@android:style/Widget.DropDownItem">
        <item name="android:textColor">#AADDFF</item>
        <item name="android:textSize">20sp</item>
    </style>

    <style name="button" parent="@android:style/Widget.Button">
        <item name="android:layout_width">fill_parent</item>
        <item name="android:layout_marginLeft">40dp</item>
        <item name="android:layout_marginRight">40dp</item>
        <item name="android:layout_marginTop">20dp</item>
        <item name="android:textColor">@android:color/white</item>
        <item name="android:background">@drawable/roundedbutton</item>
        <item name="android:textSize">20sp</item>
    </style>

    <style name="buttonLogin" parent="@style/button">
        <item name="android:layout_height">80dp</item>
    </style>

    <style name="buttonMenu" parent="@style/button">
        <item name="android:layout_height">70dp</item>
    </style>

    <style name="editText" parent="@android:style/Widget.EditText">
        <item name="android:layout_width">match_parent</item>
        <item name="android:layout_height">wrap_content</item>
        <item name="android:ems">10</item>
    </style>

    <style name="spinner" parent="@android:style/Widget.Spinner">
        <item name="android:layout_width">match_parent</item>
        <item name="android:layout_height">wrap_content</item>
        <item name="android:spinnerMode">dropdown</item>
        <item name="android:popupBackground">@drawable/darkbluegradientroundedc3m</item>
    </style>

        <style name="spinner_list_view" parent="@android:style/Widget.DropDownItem.Spinner">
        <item name="android:divider">#696969</item>
        <item name="android:dividerHeight">1dp</item>
    </style>

</resources> 
```

--EDIT2-- 来自 darkbluegradientec3m.xml 的 xml

```
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <gradient
        android:angle="90"
        android:startColor="#FF16163D"
        android:endColor="#FF010105"
        android:type="linear"
        />
</shape> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T23:28:05.153

**BlueTheme**中的标签*[colorBackground](http://developer.android.com/reference/android/R.attr.html#colorBackground)*似乎有问题，因为文档需要颜色值，如*#abc*或指向它们的链接。可能不同版本的 Android 对这个标签的解析不同。尝试使用简单的颜色值，而不是可绘制对象。

 ***此外，您的标签*[listChoiceBackgroundIndicator](http://developer.android.com/reference/android/R.attr.html#listChoiceBackgroundIndicator)*将无法在具有 API 11< 的 android 上运行。***

# ruby-on-rails - 关于黄瓜页面对象的困惑

> ID：13633158
> 
> 赞同：1
> 
> 时间：2012-11-29T19:25:13.017
> 
> 标签：ruby-on-rails, cucumber, capybara

我刚刚开始使用 cucumber 来测试我的 Rails 应用程序。盲目追随许多好的例子，我一直非常成功。

```
Given /^I visit (.*) web page$/ do |page|
  visit page
  page.should have_text("some text")
end 
```

显然，调用`visit`填充`page`对象。而且我推测多次调用`visit`, 或`click_link`, 将重新填充`page`对象。但我想更好地了解`page`对象实例化的地点和时间及其范围。它是全球性的还是我必须`@page= page`在打电话后设置`visit`？

我也看过水豚的来源，对这个`page`物体真的没有很好的感觉。我在哪里可以找到好的文档？

编辑：更混乱

看来我应该使用`have_content`而不是`have_text`. 我今天的困惑是：

```
page.should have_content("this text does not exist on the page") 
```

总是通过。我不明白为什么这不会失败？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:51:23.667

我的问题已经解决了。如果您使用的是 ruby​​ 1.8.7（这是我在我的 mac 上使用的），Capybara 会静默失败

[https://groups.google.com/forum/?fromgroups#!topic/cukes/B3UbbyG5k6s](https://groups.google.com/forum/?fromgroups#!topic/cukes/B3UbbyG5k6s)

# windows - 来自 glFramebufferTexture2DEXT 的 GL_INVALID_VALUE 仅在删除/重新分配纹理之后

> ID：13633164
> 
> 赞同：0
> 
> 时间：2012-11-29T19:25:31.063
> 
> 标签：windows, opengl, textures, framebuffer, fbo

我有一些 C#（SharpGL-esque）代码将 OpenGL 帧缓冲区处理抽象为简单的“将此纹理设置为'渲染目标'”调用。当纹理第一次设置为渲染目标时，我为该纹理大小创建了一个具有匹配深度缓冲区的 FBO；然后，FBO/深度缓冲区组合将被重新用于所有相同大小的纹理。

我有一个奇怪的错误如下。

最初，该应用程序运行并呈现良好。但是如果我增加我的窗口大小，这可能会导致一些代码需要调整其“渲染目标”纹理的大小，它通过 glDeleteTextures() 和 glGenTextures() （然后绑定、glTexImage2D 和 texparams 所以 MIN_FILTER 和 MAG_FILTER 都是 GL_NEAREST ）。我观察到这样做时我倾向于返回相同的名称（ID）（因为 GL 重用了刚刚释放的名称）。

然后我们点击下面的代码（对稍微有点混蛋的 GL 式语法表示歉意）：

```
 void SetRenderTarget(Texture texture)
    {
        if (texture != null)
        {
            var size = (texture.Width << 16) | texture.Height;
            FrameBufferInfo info;
            if (!_mapSizeToFrameBufferInfo.TryGetValue(size, out info))
            {
                info = new FrameBufferInfo();
                info.Width = texture.Width;
                info.Height = texture.Height;

                GL.GenFramebuffersEXT(1, _buffer);
                info.FrameBuffer = _buffer[0];

                GL.BindFramebufferEXT(GL.FRAMEBUFFER_EXT, info.FrameBuffer);
                GL.FramebufferTexture2DEXT(GL.FRAMEBUFFER_EXT, GL.COLOR_ATTACHMENT0_EXT, GL.TEXTURE_2D, texture.InternalID, 0);

                GL.GenRenderbuffersEXT(1, _buffer);
                info.DepthBuffer = _buffer[0];
                GL.BindRenderBufferEXT(GL.RENDERBUFFER_EXT, info.DepthBuffer);
                GL.RenderbufferStorageEXT(GL.RENDERBUFFER_EXT, GL.DEPTH_COMPONENT16, texture.Width, texture.Height);
                GL.BindRenderBufferEXT(GL.RENDERBUFFER_EXT, 0);
                GL.FramebufferRenderbufferEXT(GL.FRAMEBUFFER_EXT, GL.DEPTH_ATTACHMENT_EXT, GL.RENDERBUFFER_EXT, info.DepthBuffer);
                _mapSizeToFrameBufferInfo.Add(size, info);
            }
            else
            {
                GL.BindFramebufferEXT(GL.FRAMEBUFFER_EXT, info.FrameBuffer);
                GL.FramebufferTexture2DEXT(GL.FRAMEBUFFER_EXT, GL.COLOR_ATTACHMENT0_EXT, GL.TEXTURE_2D, texture.InternalID, 0);
            }
            GL.CheckFrameBufferStatus(GL.FRAMEBUFFER_EXT);
        }
        else
        {
            GL.FramebufferTexture2DEXT(GL.FRAMEBUFFER_EXT, GL.COLOR_ATTACHMENT0_EXT, GL.TEXTURE_2D, 0, 0);
            GL.BindFramebufferEXT(GL.FRAMEBUFFER_EXT, 0);
        }

        ProjectStandardOrthographic();
    } 
```

在所述窗口调整大小之后，GL 从 glFramebufferTexture2DEXT() 调用返回一个 GL_INVALID_VALUE 错误（用 glGetError() 和 gDEBugger 标识）。如果我忽略这一点，glCheckFrameBufferStatus() 稍后会失败并显示 GL_FRAMEBUFFER_INCOMPLETE_ATTACHMENT。如果我也忽略这一点，如果我检查它们，我会看到预期的“帧缓冲区可疑做任何事情”错误，如果我不检查它们，则会看到黑屏。

我在 NVidia GeForce GTX 550 Ti、Vista 64（32 位应用程序）、306.97 驱动程序上运行。我将 GL 3.3 与 Core 配置文件一起使用。

**解决方法和好奇心：**如果在重新分配纹理时我 glGenTextures() 在 glDeleteTextures() 之前 - 为了避免取回相同的 ID - 问题就消失了。我不想这样做，因为它是一个愚蠢的 kluge 并增加了我的内存不足错误的机会。我推测这是因为 GL 在最近的 FBO 中曾经/正在使用纹理，现在已经确定纹理 ID 正在使用或以某种方式不再有效，因此不可接受？也许？

问题后 gDEBugger 显示两个 FBO（原始的具有较小的深度缓冲区和先前的纹理，以及具有较大组合的新的）都附加了相同的纹理 ID。

我尝试在释放之前将纹理从帧缓冲区中分离（再次通过 glFramebufferTexture2DEXT），但无济于事（gDEBuffer 反映了更改，但问题仍然存在）。我已经尝试完全取出深度缓冲区。在使用之前，我尝试通过 glGetTexLevelParameter() 检查纹理大小；它确实存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:06:30.563

这听起来像是 NVIDIA 的 OpenGL 实现中的一个错误。删除对象名称后，该对象名称将变为无效，因此应该是`glGen*`返回的合法候选对象。

您应该提交一份错误报告，其中包含重现问题的最小案例。

> 我不想这样做，因为它是一个愚蠢的 kluge 并增加了我的内存不足错误的机会。

不，它没有。`glGenTextures`不为纹理分配*存储空间*（这可能是任何真正的 OOM 错误的来源）。它只创建纹理名称。不幸的是，您必须使用一种解决方法，但这并不是真正的问题。

# iphone - 在 IOS 中输入时启用单词建议

> ID：13633165
> 
> 赞同：1
> 
> 时间：2012-11-29T19:25:41.230
> 
> 标签：iphone, ios, cocoa-touch, uitextview

在我的文本字段/文本视图上，我想启用单词的自动建议，以便当用户开始输入时，建议可能的字典单词并且用户不需要输入更多。

我在下面尝试过，但它们不是我要找的：

```
[myTextView setAutocorrectionType:UITextAutocorrectionTypeYes];
[myTextView setSpellCheckingType:UITextSpellCheckingTypeYes] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T19:34:07.680

我不认为 iOS 带有自动完成功能，但你可以很容易地推出自己的功能；只需按照[本教程](http://www.raywenderlich.com/336/how-to-auto-complete-with-custom-values)。

# java - 服务器/客户端 java.net.SocketException

> ID：13633175
> 
> 赞同：0
> 
> 时间：2012-11-29T19:26:39.007
> 
> 标签：java

我正在尝试构建一个发送文件的客户端/服务器应用程序，但我遇到了较大文件的问题。我正在使用 BufferedInputStream 从文件中读取信息，并使用 OutputStream 来写入套接字。我有一个从文件中读取 1 KB 然后发送它的循环，它在前 25 个循环中运行良好，然后由于套接字写入错误而崩溃。有任何想法吗？这是代码。

客户

```
import java.io.*;
import java.net.Socket;
import java.util.logging.Level;
import java.util.logging.Logger;

public class TCPClient
{
public static void main(String[] args)
{
    /*Variables*/
    int serverPort = 8899;
    String ip = "localhost";
    File myFile = new File("GeneratedFile.txt"); //fileToBeSent.txt

    System.out.println(myFile.length());

    try
    {
        /*Connect to Server*/
        Socket sock = new Socket(ip, serverPort);
        System.out.println("Connection Made");

        /*Create Streams*/
        FileInputStream fis = new FileInputStream(myFile);
        BufferedInputStream bis = new BufferedInputStream(fis);
        OutputStream clientOutput = sock.getOutputStream();

        /*This is the old code for transfer*/
        /*Create Byte Array
        byte[] myByteArray = new byte[(int) myFile.length()];  //was 1024

        /*Send File
        bis.read(myByteArray, 0, 1024);
        clientOutput.write(myByteArray, 0, 1024);
        clientOutput.flush();
        */

        for(long i = 0; i <= myFile.length(); i += 1024)
        {
            byte[] myByteArray = new byte[1024];
            bis.read(myByteArray, 0, 1024);
            clientOutput.write(myByteArray, 0, 1024);
            clientOutput.flush();
            System.out.println("i is: " + i);
        }
        System.out.println("File Written");
        sock.close();
    } catch (IOException ex)
    {
        Logger.getLogger(TCPClient.class.getName()).log(Level.SEVERE, null, ex);
        System.out.println("You can't do that!");
    }
    System.out.println("Finished");
}
} 
```

服务器

```
import java.io.*;
import java.net.*;

public class RequestHandler
{   
public void handleRequest()
{
    try
    {
        ServerSocket welcomeSocket = new ServerSocket(8899);

        while(true)
        {
            Socket socket = welcomeSocket.accept();
            System.out.println("Socket Open");

            /* Create byte array */
            byte[] mybytearray = new byte[1024 * 512];

            /* Create streams */
            InputStream is = socket.getInputStream();
            FileOutputStream fos = new FileOutputStream("newFile.txt",true);
            BufferedOutputStream bos = new BufferedOutputStream(fos);

            /*Write to file*/ 
            int bytesRead = is.read(mybytearray, 0, mybytearray.length);
            bos.write(mybytearray, 0, bytesRead);

            /*Close Stream and Socket*/
            bos.close();
            socket.close();
        }
    } catch (Exception e)
    {
        e.printStackTrace();
    }
}
public static void main(String args[])
{
    RequestHandler rq = new RequestHandler();
    rq.handleRequest();
    System.out.println("Here");
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T00:24:46.837

您的复制技术不正确。这是在 Java 中复制流的方法：

```
byte[] buffer = new byte[8192]; // or whatever you like, but declare it outside the loop
int count;
while ((count = in.read(buffer)) > 0)
{
  out.write(buffer, 0, count);
}
out.flush();
// then in a finally block ...
out.close();
in.close(); 
```

你在两端都需要这个。您不能假设任何给定的读取都会填满缓冲区，因此您必须循环直到 EOS。请注意，您*不会*在循环内冲洗。

# .htaccess - 你能通过 .htaccess 重写一个已经写好的 Joomla SEF url 吗？

> ID：13633177
> 
> 赞同：2
> 
> 时间：2012-11-29T19:26:44.617
> 
> 标签：.htaccess, mod-rewrite, joomla, rewrite

我有一个打开 SEF 的 Joomla 网站。

我网站的登录页面是*www.example.com/login*

第三方要求我的页面 URL 为：*www.example.com/memberlogin.cfm*

我尝试使用：

`RewriteRule ^(/golferlogin.cfm)?$ login [L]`

它不起作用，使页面出现*错误 500* ...

任何人有任何想法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:23:10.977

尝试将其放在根文件夹中`.htaccess`：

```
 RewriteEngine On
 RewriteRUle ^golferlogin\.cfm$ /login [L] 
```

以上将以与`/golferlogin.cfm`对 的请求相同的方式处理请求`/login`。基本上`/`，您的正则表达式中有额外的斜线。

# mongodb - 将数字插入到 mongodb 子文档中的列表中

> ID：13633179
> 
> 赞同：0
> 
> 时间：2012-11-29T19:26:47.367
> 
> 标签：mongodb

我在 MongoDB 中有一个文档，格式如下：

```
{"_id" : 1, "value" : { "listOfNumbers" : [2,3,4]}} 
```

我似乎不知道如何在“listOfNumbers”中插入一个新号码。我发现：

```
db.collection.update({_id:1}, {listOfNumbers : 8}) 
```

这仅适用于上述文档的形式（没有子文档的文档）：

```
{"_id" : 1, "listOfNumbers" : [2,3,4]} 
```

我尝试了各种组合，但没有一个按预期工作。有人知道这个问题的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T19:34:59.470

您应该使用以下语法：

```
db.collection.update({_id:1}, {$push:{'value.listOfNumbers' : 8}}) 
```

它将在您的数组**listOfNumbers中推送值 8**

# windows-8 - 关于 Windows 8 应用程序的隐私政策

> ID：13633180
> 
> 赞同：1
> 
> 时间：2012-11-29T19:26:56.270
> 
> 标签：windows-8, windows-runtime, winrt-xaml, winrt-async

我没有任何个人网站或网址可在我的应用程序中指定隐私政策。有什么替代品让我指定相同的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T20:35:30.520

Tim Heuer 有一篇关于使用 Azure 网站创建带有隐私政策的免费营销网站的好文章。查看[使用 Azure 网站推销您的 Windows 应用程序](http://timheuer.com/blog/archive/2012/09/26/use-azure-free-web-site-for-windows-store-app-content.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T03:59:55.857

博客文章[常见的 Windows 应用商店认证错误：4.1 您的应用必须符合隐私要求](http://blogs.msdn.com/b/jennifer/archive/2012/11/15/common-windows-store-certification-errors-4-1-your-app-must-comply-with-privacy-requirements.aspx)讨论了隐私政策要求。它提供了有关如何在不使用网络功能时关闭 Internet 功能的提示，这样您就不需要隐私政策、隐私政策中包含的内容、一些免费网站，您可以在其中创建博客来托管您的隐私政策（[WordPress](http://wordpress.com/signup/?ref=bigassbutton)或[Blogger](http://www.blogger.com)），以及您需要在应用程序中提供隐私政策的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T19:38:27.580

不是真的，也许你可以创建一个博客页面或其他东西，但你确实需要一个网页来定义你的隐私政策。

# c - C 程序制作链表的第二个副本

> ID：13633182
> 
> 赞同：5
> 
> 时间：2012-11-29T19:27:02.987
> 
> 标签：c, algorithm, linked-list

我正在编写一个 C 代码来将链接列表的内容复制到另一个列表中。我想知道是否有更有效的方法来做到这一点。

哪个更好？

```
struct node *copy(struct node *start1)
{
struct node *start2=NULL,*previous=NULL;

while(start1!=NULL)
{
    struct node * temp = (struct node *) malloc (sizeof(struct node));
    temp->info=start1->info;
    temp->link=NULL;

    if(start2==NULL)
    {
        start2=temp;
        previous=temp;
    }
    else
    {
        previous->link=temp;
        previous=temp;          
    }
    start1=start1->link;
}
return start2;
} 
```

或者

```
struct node *copy(struct node *start1)
{
    if(start1==NULL) return;
    struct node *temp=(struct node *) malloc(sizeof(struct node));
    temp->info=start1->info;
    temp->link=copy(start1->link);
    return temp;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T19:31:38.743

为了将一个链表复制到另一个链表，您**别无选择**，只能遍历一个链表并将值复制到第二个链表，总共需要`O(n)`一段时间。你**已经**在做。除非存储的元素之间存在某种关系，否则**没有办法**做得更好。

递归解决方案可能更好看，但实际上**效率较低**。

**编辑：对于改变的问题**

迭代版本[更好](http://www.cs.cornell.edu/info/courses/spring-98/cs211/lecturenotes/07-recursion.pdf)。

*注：LOC 与效率没有直接关系。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T19:40:15.427

在不递归的情况下，这大约是您可以获得的最紧凑的：

```
struct node *copy(struct node *org)
{
struct node *new=NULL,**tail = &new;

for( ;org; org = org->link) {
    *tail = malloc (sizeof **tail );
    (*tail)->info = org->info;
    (*tail)->link = NULL;
    tail = &(*tail)->link;
    }
return new;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T19:53:59.520

对于*速度*，实际上可能有更好的方法。与往常一样，唯一真正的判断方法是对其进行基准测试。

*   取决于*迭代的相对成本*
    *   （这本身可能取决于您分配节点的方式和顺序，以及缓存和内存架构）
*   与*免费商店分配相比*
    *   （这可能取决于您的堆处于什么状态，有多少其他线程可能正在访问它，主机操作系统中的物理内存状态等）
*   可能*会*更快：

    *   花一次迭代计算源列表的长度

        ```
        int len = 0;
        for (start2 = start1; start2 != NULL; start2 = start2->link)
            ++len; 
        ```

    *   为单个块中的所有必需节点分配空间

        ```
        struct node *temp = malloc(len * sizeof(*temp)); 
        ```

    *   然后花费第二次迭代链接你的节点数组

        ```
        int i = 0;
        for (start2 = start1; start2 != NULL; start2 = start2->link) {
            temp[i].info = start2->info;
            temp[i].link = &temp[i+1];
        }
        temp[len-1].link = NULL; 
        ```

正如我所说，我不保证它*会*更快（而且它肯定更丑），但它*可能*在某些系统上，在某些条件下使用一些编译器。当然，如果您的代码的其余部分假设您可以随意`free`单个节点，则它是一个非首发。

* * *

对于*优雅*，递归自然获胜。

不过，简单的迭代方法通常会是一个很好的折衷方案，虽然*优雅但可能会爆炸，除非你有一个花哨的 TCO-ing 编译器*和上面的编译器，坦率地说，这有点难看，可以从解释性评论中受益。

# android - tab 键只给出空白，如何使用 Tab 转到下一个 EditText？

> ID：13633183
> 
> 赞同：0
> 
> 时间：2012-11-29T19:27:09.210
> 
> 标签：android

我希望当你按下 TAB 键时移动到下一个 EditText。目前只添加空白，我正在使用 Android 2.3

任何人都知道任何方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T20:55:15.637

这就是我解决的方法：

```
private class GenericTextWatcher implements TextWatcher{

    private View view;
    private GenericTextWatcher(View view) {
        this.view = view;
    }

    public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {
        switch(view.getId()){

        case R.id.txt_checklocation_location:
            if (txt_checklocation_location.getText().toString().endsWith("\t"))     
            txt_checklocation_location.focusSearch(View.FOCUS_DOWN).requestFocus();
            break;

    }
    }

    public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {}
    public void afterTextChanged(Editable editable) {}

} 
```

# java - 如何在所有 Domino 支持的操作系统中将文件添加到文件系统

> ID：13633192
> 
> 赞同：0
> 
> 时间：2012-11-29T19:27:39.563
> 
> 标签：java, xpages, xpages-ssjs

我正在尝试使用 ssjs 在 domino 数据目录中创建一个目录，该目录适用于所有 Domino 支持的操作系统，如 windows 和 linux 等。我已经完成了以下操作（未经测试）

```
function getPath(){
  var d = session.getEnvironmentString("directory",true)
  var s = java.io.File.separator
  var path = d + s + "temp"
  var dir:java.io.File = new java.io.File(path);  
  dir.mkdir();
  return path; 
```

}

返回的路径稍后用于使用 java 将文件存储在该目录中。目前我需要在 Windows 上添加两个反斜杠来存储文件，并且不确定它在其他操作系统中是如何工作的，以及如何使我的函数返回我需要的路径，具体取决于所使用的操作系统。

```
var filename = getPath() + "file.txt" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T22:57:49.800

java.io.File.separator 返回平台相关的分隔符。

```
var filename = getPath() + java.io.File.separator + "file.txt" 
```

[http://docs.oracle.com/javase/1.5.0/docs/api/java/io/File.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/File.html)

# ruby-on-rails - Rails 3.2.8 引擎中 simple_form 的加载错误

> ID：13633195
> 
> 赞同：2
> 
> 时间：2012-11-29T19:27:47.077
> 
> 标签：ruby-on-rails, ruby-on-rails-3, simple-form, rails-engines

在我们的 Rails 3.2.8 引擎中加载 simple_form 时，simple_form 初始化文件 simple_form.rb 会导致错误：

```
/config/initializers/simple_form.rb:2:in `<top (required)>': uninitialized constant SimpleForm (NameError)
        from c:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:588:in `block (2 levels) in <class:Engine>'
        from c:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:587:in `each' 
```

在引擎的 config/initializers 下，simple_form.rb 是：

```
# Use this setup block to configure all options available in SimpleForm.
SimpleForm.setup do |config|
  # Wrappers are used by the form builder to generate a
  # complete input. You can remove any component from the 
```

`SimpleForm.setup do |config|`导致错误。试图添加引擎名称规范，`RfqxEmc::SimpleForm.setup do |config|`错误是一样的。

在 Rails 引擎中安装/加载 simple_form 的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T02:08:17.633

这是关于 rails 引擎的 simple_form的[帖子。](http://blog.jamesalmond.com/using-simple-form-in-an-engine/)只需在 simple_form.rb 中添加 require 'simple_form'。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-31T20:57:23.287

如果接受的答案不起作用并且您正在创建引擎，那么我也必须在我的应用程序中安装 gem。我太不懂事了，不知道是否有办法以更简单的方式从引擎继承宝石。在 config/application.rb 中要求 'simple_form' 不起作用，我也不需要在我的初始化程序中要求 simple_form。

# ios - iOS socket编程——接收nsstream事件4

> ID：13633196
> 
> 赞同：1
> 
> 时间：2012-11-29T19:27:54.767
> 
> 标签：ios, sockets, arduino, nsstream

我正在使用一个名为 WiFly 的设备，其 IP 地址为：169.254.1.1 和端口 2000。我正在尝试通过 iOS 应用程序连接到该设备。我使用以下代码进行连接：

```
CFReadStreamRef readStream;
CFWriteStreamRef writeStream;

UInt32 port = 2000;
CFStringRef host = CFSTR("169.254.1.1");

CFStreamCreatePairWithSocketToHost(kCFAllocatorDefault, host, port, &readStream, &writeStream);

inputStream = (__bridge NSInputStream *)readStream;
outputStream = (__bridge NSOutputStream *)writeStream;

// set the delegates to this view controller
[inputStream setDelegate:self];
[outputStream setDelegate:self];

// Set run loops to continuous receive information
[inputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
[outputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];

// Finally, open the connection
[inputStream open];
[outputStream open]; 
```

然后我使用以下内容来处理流事件：

```
- (void)stream:(NSStream *)theStream handleEvent:(NSStreamEvent)streamEvent {
    NSLog(@"stream event %i", streamEvent);

    switch (streamEvent) {

        case NSStreamEventOpenCompleted:
            NSLog(@"Stream opened");
            break;

        case NSStreamEventHasBytesAvailable:
            if (theStream == inputStream) {

                uint8_t buffer[1024];
                int len;

                while ([inputStream hasBytesAvailable]) {
                    len = [inputStream read:buffer maxLength:sizeof(buffer)];
                    if (len > 0) {

                        NSString *output = [[NSString alloc] initWithBytes:buffer length:len encoding:NSASCIIStringEncoding];

                        if (nil != output) {
                            NSLog(@"server said: %@", output);
                            [self messageReceived:output];
                        }
                    }
                }
            }
            break;

        case NSStreamEventErrorOccurred:
            NSLog(@"Can't connect to server");
            break;

        case NSStreamEventEndEncountered:
            [theStream close];
            [theStream removeFromRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
            break;

        default:
            NSLog(@"Unknown event");
    } 
```

因此，我可以看到前两个流已正确打开。然后紧随其后的是流事件 4，据我了解，这是可以预料的。但是，然后我尝试调用一个函数：

```
- (IBAction)moveForward
{
    NSLog(@"move forward called");
    NSString *response  = [NSString stringWithFormat:@"2"];
    NSData *data = [[NSData alloc] initWithData:[response dataUsingEncoding:NSASCIIStringEncoding]];
    [outputStream write:[data bytes] maxLength:[data length]];
} 
```

哪个应该通过wifly从arduino uno返回“前进”。但是，当我单击时，由于某种原因，我得到了另一个 NSStreamEvent 4。我还通过终端远程登录到设备：

> 远程登录 169.254.1.1 2000

然后键入“2”...这立即返回了所需的“转发”。从 iPad 的角度来看，我做错了什么？

非常感谢您的帮助！

**编辑**由于某种原因，每次访问处理程序时，传递的流都是输出流，这是完全错误的......为什么永远不会传递输入流？

这是arduino代码：

```
void loop() 
{ while (Serial.available() > 0) {
    int next = Serial.parseInt();if(Serial.available() > 0)
    {
        if(next == 20) {
            Serial.println("leftMove");
 }}}} 
```

# caching - 如何使用 CAS 在 memcached / spymemcached 之间交换两个缓存键

> ID：13633198
> 
> 赞同：0
> 
> 时间：2012-11-29T19:28:00.597
> 
> 标签：caching, memcached, spymemcached

我有一个与键关联的缓存对象（大型 json 对象）。我想在此缓存对象/键实例和另一个之间切换，而不会在两者之一中的可用性停机时间。

我一直在阅读有关 memcached / spymemcached 的 CAS（比较和设置）的信息，我觉得这将允许我在两个缓存实例密钥对之间进行交换，而无需任何停机时间。

如果是这样，我该如何实现比较和设置？是否有使用 spymemcached api 来完成此操作的代码示例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-21T17:50:41.190

我创建了我想要临时存储的值。完成填充后，我删除旧缓存并交换。

# c# - 服务层和存储库的关系

> ID：13633201
> 
> 赞同：3
> 
> 时间：2012-11-29T19:28:04.300
> 
> 标签：c#, service, repository, domain-driven-design, repository-pattern

什么更有意义。让服务层引用多个存储库（充当外观），或者让存储库将多个相关实体组合在一起。例如，我有以下实体，但我不确定如何构建事物。

**实体（POCO）**

1.  民意调查
2.  调查组
3.  调查问题
4.  调查答案

**Q1。** 这些实体中的每一个都应该有自己的存储库吗？SurveyQuestion 不存在于调查组中，而调查组不存在于调查中。

**Q2。** 我应该为 Survey、SurveyGroup 和 SurveyQuestion 创建一个存储库，并为 SurveyAnswers 创建一个附加存储库吗？

**Q3。**我应该为每一个创建一个单独的存储库并创建一个引用它们的服务类（SurveyService）吗？

我不确定什么被认为是这样的“最佳实践”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T19:32:08.973

DDD 中的一般经验法则是为每个[Aggregate Root](http://devlicio.us/blogs/casey/archive/2009/02/16/ddd-aggregates-and-aggregate-roots.aspx)创建一个存储库。

在您的示例中，它看起来像是`Survey`聚合根，因此创建一个`SurveyRepository`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T20:21:16.670

*经验法则*（即标准）是为具有身份（例如主键）的实体提供存储库。换句话说，这些实体可以在**他们自己的**存储库中[至少]定义 CRUD 操作。

*对于不是“一流”*实体且不能自行定义 CRUD的实体，存储库不是必需的。因此，它们必须使用依赖映射来处理（其他“第一类”实体映射会处理它们）。

但是，您可能希望减少项目中的存储库数量，这就是您开始寻找对实体进行分组的替代（非标准）方法的时候。

结论：如果您想成为标准，请拥有与您拥有的自包含实体一样多的存储库。具体答案取决于您的问题中列出的实体，我认为您将能够自行判断手头有这些信息。

以前的答案可能 [理论上] 导致存储库不必要地处理多个实体，并且在将来查找/定位实体处理/映射代码时会很头疼。

[我使用了 Fowler, M. 定义的术语-*身份*，*依赖映射*]

# qt - 从样式表设置内容边距

> ID：13633203
> 
> 赞同：8
> 
> 时间：2012-11-29T19:28:14.077
> 
> 标签：qt, stylesheet, margins, qlayout

我正在努力`QLayout`使用样式表将 Qt 中的对象的内容边距设置为零。我可以删除它们，`QLayout::setContentsMargins(0, 0, 0, 0)`但我更愿意从样式表中删除它们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-07-21T16:20:07.220

到目前为止，这还不能实现。利用

```
QLayout::setContentsMargins(0, 0, 0, 0) 
```

和

```
QLayout::setSpacing(0) 
```

如果您还想消除小部件之间的空间。

另请参阅此错误报告[Stylesheet controls for QLayout objects](https://bugreports.qt.io/browse/QTBUG-22862) ，目前尚未解决。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T22:06:48.217

无法为 QLayout 设置样式表，请改用 QWidget，您将在其中设置布局。然后，您可以使用样式表设置小部件的边距和/或填充以满足您的需要。

# amazon-s3 - S3 列表对象中的 CommonPrefixes 和 MaxKeys 的最大数量

> ID：13633212
> 
> 赞同：2
> 
> 时间：2012-11-29T19:28:42.740
> 
> 标签：amazon-s3

所以问题很简单，列出 s3 对象时显示的 CommongPrefixes 的最大数量是多少，最大的 MaxKeys 是多少。默认为 1000。Amazon [s3 api/bucket get](http://docs.amazonwebservices.com/AmazonS3/latest/API/RESTBucketGET.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T14:30:59.503

要回答我自己的问题，CommonPrefixes 和 MaxKeys 的最大数量是 1000。

注意，TOGETHER 1000。这意味着您可以显示 0 个 Keys，最多显示 1000 个 CommonPrefixes 或 990 个 Keys，以及最多 10 个 CommonPrefixes

# html - 如何在全屏 Flash 视频上放置 HTML 覆盖？

> ID：13633215
> 
> 赞同：1
> 
> 时间：2012-11-29T19:28:54.400
> 
> 标签：html, flash

我有一个全屏播放的 Flash 视频，我希望能够在其上放置一个 HTML 覆盖（带有图像、链接、背景等）。

我有点想做这样的事情：http: [//i.imgur.com/LP2cD.jpg](http://i.imgur.com/LP2cD.jpg)

我将如何继续这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T19:35:56.377

我认为不可能将图像覆盖全屏。[http://bit.ly/UuD21S](http://bit.ly/UuD21S)

你可以做文字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T19:40:42.270

您不能将 HTML div 放在**第三方**flash 元素上，因为全屏 flash**不是**拉伸到全屏的 swf 容器，而是全新的窗口。如果您设置了多显示器并切换到全屏 Flash 电影，那么在 Windows 上，您将在任务栏上出现带有 Flash 图标的新窗口。因此，通过 Flash 播放器获得某些东西的唯一方法是更改​​ Flash 播放器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T15:04:20.067

当 Flash 播放器在浏览器之外全屏显示时，您无法执行此操作：请查看此链接“ [http://www.htmlgoodies.com/beyond/dhtml/article.php/3470521/So-You-Want-A-全屏-浏览器-Huh.htm#click](http://www.htmlgoodies.com/beyond/dhtml/article.php/3470521/So-You-Want-A-FullScreen-Browser-Huh.htm#click) "

这将是最接近的方法，但它仍然会在一个窗口中：所以使用 CSS 和 HTML 将 Flash SWF 设置为背景：在放置 Flash div 时尝试在 CSS 中使用 z-indexValue

让我们知道你的情况

# php - 从 Analytics 隐藏 Javascript 文件

> ID：13633218
> 
> 赞同：0
> 
> 时间：2012-11-29T19:29:09.607
> 
> 标签：php, javascript, wordpress, optimization, google-analytics

我提前为非描述性标题道歉，因为我真的不知道如何措辞。

我目前已将一些具有响应式设计的 Wordpress 网站切换到[WooSlider](http://www.woothemes.com/products/wooslider/)。效果超级好，我喜欢它。但是，有些东西阻止我切换我的所有网站。而且我知道这不是 WooSlider 唯一的错误，但这是我无法通过谷歌搜索找到的。

这发生在每个页面视图上，即使是那些没有滑块的页面。

在 Google Analytics 中，它显示`domain.com/?wooslider-javascript=load&t=1352743207&ver=1.0.0`为页面视图。对于每一页。我显然不想要这个，但我不知道如何摆脱它。

发生这种情况的另一个例子是使用 Gravity Forms 和一个显示页面视图、搜索查询、浏览器等的推荐人信息插件。

发送表格后，将通过电子邮件发送以下内容。

```
Page visited 1: domain.com/?wooslider-javascript=load&t=1352743207&ver=1.0.0 (http://domain.com/?wooslider-javascript=load&t=1352743207&ver=1.0.0)
Page visited 2: domain.com/about (http://domain.com/contact/about/
Page visited 3: domain.com/?wooslider-javascript=load&t=1352751787&ver=1.0.0 (http://domain.com/?wooslider-javascript=load&t=1352751787&ver=1.0.0) 
Page visited 4: domain.com/contact/ (http://domain.com/contact/) 
```

所以很明显我不希望那个js文件显示为页面视图。我该如何补救？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T20:38:39.543

[Google Analytics 配置错误 #2：查询字符串变量](http://cutroni.com/blog/2006/09/21/google-analytics-configuration-mistake-2-query-string-variables/)

`wooslider-javascript,t,ver`

# css - 如何使我的元素淡出计数越高？

> ID：13633221
> 
> 赞同：5
> 
> 时间：2012-11-29T19:29:14.467
> 
> 标签：css

我的 HTML 看起来像这样..

```
<div class=chocolateSandwich>
  <div>1</div>
  <div>2</div>
  <div>3</div>
  <div>4</div>
  <div>5</div>
</div> 
```

所以我希望项目 5 是最不可见的 IE 不透明度 .1 和项目 1 说不透明度 1 或 .9 .. 我显然可以根据每个硬编码的子编号的值来做到这一点，但我觉得CSS有一种方法可以说给定对象的计数，然后应用较低的不透明度值。

一个非优雅的解决方案是拥有 css 规则..

```
.chocolateSandwich:nth-child(4) { opacity:.1 }
.chocolateSandwich:nth-child(3) { opacity:.3 }
.chocolateSandwich:nth-child(2) { opacity:.5 }
.chocolateSandwich:nth-child(1) { opacity:.7 }
.chocolateSandwich:nth-child(0) { opacity:.9 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T19:36:19.500

这不能单独使用 CSS 来实现，您可以使用 LESS CSS，这将变得非常容易。如果你不想使用 LESS CSS，你可以使用 JavaScript 或 jQuery。

这是一个链接： http: [//lesscss.org/](http://lesscss.org/)

如果你不明白，请告诉我，我会用 LESS 编写代码。

祝你好运：D

# c# - 注册一个引用多个dll的dll

> ID：13633222
> 
> 赞同：1
> 
> 时间：2012-11-29T19:29:17.770
> 
> 标签：c#, com, reference, regasm

好的，我有 2 个问题，我在这里很忙，已经有一个星期了。

**重要**- 没有应用程序会构建或运行它。它将是单个客户端 dll（引用其他几个 dll），将放置在特定文件夹中，我需要使用 regasm 或其他方式注册此 dll。

**概述：**

所以我写了ac# COM ScannerController.dll。ScannerController 引用了五个 3rd 方 dll，这些 dll 已经安装并注册在 c:\Program Features\etc...的文件夹中。（位置将根据它们所在的软件版本而变化，但 dll 将是相同的。）

这个 dll（integration.ActiveX（它是一个程序集））有一个名为 InstalledPath 的方法。InstalledPath 返回执行程序集的实际位置。当我完成 dll 时，我通过 IExplorer 运行它，它返回了正确的“../program features/....”。

然后，为了在另一台计算机上设置它，我取消了注册，然后运行了一些 regasms 并在“Scanner/bin/debug/integration.ActiveX”注册了 dll（其中 oleview 说它找不到它的依赖项）所以我取消注册它是在 vs2012 中构建的，现在当我从 IExplorer 运行它时，InstalledPath 是“../bin/debug/”。我创建了一个新项目，构建了它并自动注册它，然后从 iexplorer 运行它，InstalledPath 是“..Scanner-fake/bin/debug/”。我已经在 cmd 中注销了它一百万次，无论我做什么，它现在总是指向已注册的 ScannerController 的调试文件夹。

**问题一：**

我到底如何使用 regasm 之类的东西注册我的 COM ScannerController.dll，并将其指向 ScannerController 引用的五个第 3 方 dll？

**问题2：**

我尝试将其修复到我计算机上本地路径中不存在 Integration.dll 的位置（因为我正在构建它）所以我将本地副本设置为 false。当我构建它时，在 oleview 中查看它，它说无法加载或找到它的依赖项。如何设置项目，以便在复制 local = false 的情况下，引用可以找到其他 3rd 方 dll？

很抱歉这个冗长的问题，但非常感谢您阅读并尝试帮助我。我为此寻找了高低，我现在只是精神疲惫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T20:54:48.217

**1) ScannerController.dll**

COM注册使用`regasm ScannerController.dll`

**2) 第 3 方 ActiveX dll**

假设它已经注册：不需要任何操作。（否则注册`regsvr32`）

**3) 第 3 方托管库**（无 com 类型/libsexposed）

使用以下 2 个选项之一来保证您的 ScannerController Libraray 可以访问这些托管库：

*   将它们复制到您的 ScannerController.dll 或可能（我不是 100% 确定，您必须对其进行测试）到 ScannerController.dll 主机（exe /调用 ScannerController.dll 的进程）所在的文件夹
*   [在全局程序集缓存](http://en.wikipedia.org/wiki/Global_Assembly_Cache)（托管库的注册表挂件）中注册这些库，以使它们对其他应用程序全局可用

# c++ - QT - 从 .ui 文件创建布局

> ID：13633225
> 
> 赞同：0
> 
> 时间：2012-11-29T19:29:23.603
> 
> 标签：c++, qt, user-interface

我有如下代码。我在数据库中有一些数据，我需要创建视图结构来显示它。我在 Qt 编程方面没有丰富的经验，我在 PHP、HTML 和 CSS 方面做了更多的事情。我需要在 HTML 中做一些类似的事情——当你有一个没有额外样式的框（例如 div）并且你把一些数据放入这个 div 标签将显示里面的所有数据。但是使用以下代码，我只得到了从文件加载的小部件的一部分数据。MainWindow 中 GridLayout 的行为类似于`div style="max-width: 200px; max-height: 200px; overflow:hidden`“。子文件中的 Layout 元素也具有相同的行为......

```
#include "mainwindow.h"
#include "ui_mainwindow.h"
#include "databasemanager.h"
#include "ycexception.h"
#include <QDebug>
#include <QSqlQuery>

#include <QtUiTools>

#include <QLabel>

MainWindow::MainWindow(QWidget *parent) :
QMainWindow(parent),
ui(new Ui::MainWindow)
{
    ui->setupUi(this);

    createStructureFromDb();
}

MainWindow::~MainWindow()
{
    delete ui;
}

void MainWindow::createStructureFromDb() {
    try {
        dbManager = new DatabaseManager();
    }
    catch(YCException e) {
        //TODO: show dialog with message
        qDebug() << e.what();
        exit(-1);
    }

    QSqlQuery groupsQuery = dbManager->getGroups();
    while(groupsQuery.next()) {
        Group group;
        group.setIdGroup(groupsQuery.value(0).toInt());
        group.setName(groupsQuery.value(1).toString());

        QUiLoader loader;
        QFile file(":/forms/group.ui");
        file.open(QFile::ReadOnly);
        QWidget *formWidget = loader.load(&file);
        file.close();
        (formWidget->findChild<QLabel*>("groupName"))->setText(group.getName());
        ui->gridLayout->addWidget(formWidget);

        QVBoxLayout* groupItems = formWidget->findChild<QVBoxLayout*>("groupItems");

        QSqlQuery cardsQuery = dbManager->getGroupCards(group.getIdGroup());
        while(cardsQuery.next()) {
            Card card;
            card.setIdCard(cardsQuery.value(0).toInt());
            card.setContent(cardsQuery.value(1).toString());
            card.setDueDate(cardsQuery.value(2).toString());
            card.setIdGroup(cardsQuery.value(3).toInt());

            group.addCard(card);

            QFile file(":/forms/card.ui");
            QWidget *cardWidget = loader.load(&file);
            file.close();

            (cardWidget->findChild<QLabel*>("contentLabel"))->setText(card.getContent());
            (cardWidget->findChild<QLabel*>("dueDateLabel"))->setText(card.getDueDate());

            groupItems->addWidget(cardWidget);
        }
        groups.insert(group.getIdGroup(), group);
    }

    ui->label->setText("really long textreally long textreally long textreally long textreally long textreally long textreally long textreally long textreally long textreally long textreally long text");
    this->layout()->activate();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T21:35:08.660

`overflow:hidden`对于像我这样对网络技术知之甚少的人来说几乎是明确的（但我可以用谷歌搜索）。但是，说你想要滚动条更有表现力......我用[这个页面](http://www.w3schools.com/cssref/pr_pos_overflow.asp)来理解你想要什么。

所以，对于你想要的：`GridLayout`不像*html*的 div。如果要滚动小部件的内容，则必须将小部件放在[QScrollArea](http://doc.qt.digia.com/qt/qscrollarea.html)中，然后将该滚动区域放在首先包含小部件的 GridLayout 的单元格中。

进一步来说：

*   `overflow:visible`:[不可能](https://stackoverflow.com/questions/5793903/qt-what-is-meant-by-this-sentence)
*   `overflow:hidden`: 默认行为
*   `overflow:scroll`: 使用 QScrollArea
*   `overflow:auto`: 使用 QScrollArea
*   `overflow:inherit`: 可能，但你需要编写相当多的代码来做到这一点。此外，在精心设计的界面中毫无用处

# jquery - 如何在当前对象中添加新元素？

> ID：13633227
> 
> 赞同：0
> 
> 时间：2012-11-29T19:29:28.943
> 
> 标签：jquery

有以下JQuery代码：

```
 $(document).ready(function(){
        $(".translated").mouseenter(function(){
            $(this).html("<input type='text'/>");
        });
    }); 
```

还有一张桌子，里面有很多`<div class="translated">`带有文字的项目。我需要通过 mouseenter 事件替换 div 块中的文本以输入项目。有用。但是我在替换的过程中还需要为输入元素设置属性，我不知道该怎么做，因为我是JS/JQuery的新手。请给我一些信息。先感谢您。

更新：对不起，我的属性也是用 JS 计算的，它不是恒定的。

更新 2：算法：1）在 div 项中插入输入项 2）更改新插入项的高度

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T19:31:46.320

只需设置其余的输入属性，`type="text"`如下所示，

```
$(this).html("<input type='text' /* other attributes */ />"); 
```

或像下面这样使用，

```
$('<input />').attr({type: 'text'/*, more attributes*/}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T19:33:10.337

```
 var someVariable = 1 + 2;
 $(this).html("<input type='text' anotherAttribute='something' attrFromValue='" 
     + someVariable + "' />"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T19:43:06.073

作为记录，元素创建有一个特殊的 jQuery 语法。

```
$("<input/>", {
    type: "text",
    height: 100
}).appendTo(this); 
```

上面插入了一个属性设置为且(CSS) 设置为的`input`元素。`type``text``height``100px`

附加到目标元素的生成标记是：

```
<input type="text" style="height: 100px;"> 
```

# facebook - 我无法作为开发者或管理员添加到应用页面

> ID：13633230
> 
> 赞同：-1
> 
> 时间：2012-11-29T19:29:34.897
> 
> 标签：facebook, administrator, developer-tools

Facebook 应用程序的当前管理员正在尝试将我添加为该应用程序的开发人员和/或管理员。在 Facebook 上输入我的电子邮件时，Facebook 声称我不是 Facebook 用户，即使我的帐户已通过手机号码被 Facebook 成功验证。有什么想法吗？帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T19:36:29.560

将管理员添加为好友。

我有管理员作为朋友，它运行良好，即使是喜欢该页面的人也不会提出建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T19:36:15.033

很可能您的电子邮件没有添加到您的时间线，或者您没有设置“谁可以使用您提供的电子邮件地址或电话号码查找您？”设置。到“每个人”或“朋友的朋友”。

有关更多详细信息，请阅读[`"Finding Friends & the Suggestions Feature"`](https://www.facebook.com/help/433894009984645/)Facebook 帮助中心的部分。

请注意，添加为开发人员或管理员不需要电子邮件，而是需要 Facebook 用户名（在帐户中输入）。因此，当前管理员可以尝试输入`@Your Name`，并且应该会找到您（当然，取决于我上面提到的隐私设置）。

# jaxb - JAXB - 覆盖元素的数据类型

> ID：13633231
> 
> 赞同：3
> 
> 时间：2012-11-29T19:29:42.713
> 
> 标签：jaxb

我将 JAXB 与以下自定义绑定一起使用：

```
<jaxb:bindings xmlns:jaxb="http://java.sun.com/xml/ns/jaxb" version="2.0" xmlns:xjc="http://java.sun.com/xml/ns/jaxb/xjc" jaxb:extensionBindingPrefixes="xjc" xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <jaxb:globalBindings typesafeEnumMaxMembers="2000">
        <jaxb:serializable />
    </jaxb:globalBindings>
        <jaxb:bindings schemaLocation="test.xsd" node="/xs:schema//xs:complexType[@name='EN']//xs:element[@name='family']">
            <jaxb:property>
                <jaxb:baseType name="java.lang.String" />
            </jaxb:property>
        </jaxb:bindings>
</jaxb:bindings> 
```

处理这个模式（test.xsd）：

```
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified">
   <xsd:complexType name="EN" mixed="true">
      <xsd:complexContent>
         <xsd:extension base="ANY">
            <xsd:sequence>
               <xsd:choice minOccurs="0" maxOccurs="unbounded">
                  <xsd:element name="family" type="en.family"/>
               </xsd:choice>
            </xsd:sequence>
         </xsd:extension>
      </xsd:complexContent>
   </xsd:complexType>
   <xsd:complexType name="en.family" mixed="true">
      <xsd:complexContent>
         <xsd:restriction base="ENXP">
         </xsd:restriction>
      </xsd:complexContent>
   </xsd:complexType>
   <xsd:complexType name="ENXP" mixed="true">
      <xsd:complexContent>
         <xsd:extension base="ST">
         </xsd:extension>
      </xsd:complexContent>
   </xsd:complexType>
   <xsd:complexType name="ST" mixed="true">
      <xsd:complexContent>
         <xsd:restriction base="ED">
         </xsd:restriction>
      </xsd:complexContent>
   </xsd:complexType>
   <xsd:complexType name="ED" mixed="true">
      <xsd:complexContent>
         <xsd:extension base="BIN">
         </xsd:extension>
      </xsd:complexContent>
   </xsd:complexType>
   <xsd:complexType name="BIN" abstract="true" mixed="true">
      <xsd:complexContent>
         <xsd:extension base="ANY">
         </xsd:extension>
      </xsd:complexContent>
   </xsd:complexType>
   <xsd:complexType name="ANY" abstract="true">
      <xsd:attribute name="nullFlavor" type="xsd:string" use="optional">
      </xsd:attribute>
   </xsd:complexType>
</xsd:schema> 
```

我遇到了这个问题：

```
[ERROR] compiler was unable to honor this property customization. It is attached to a wrong place, or its inconsistent with other bindings.
  line 6 of file://home/user/test/jaxbelem_binding.xml

[ERROR] (the above customization is attached to the following location in the schema)
  line 7 of file://home/user/test/test.xsd

Failed to parse a schema. 
```

我的绑定文件有什么问题？它是 yaling about `jaxb:property`，但是当后者被删除时，不会发生覆盖！

任何帮助将不胜感激，在此先感谢各位！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T18:16:20.260

我很幸运地将标签嵌套在`jxb:bindings node`标签内，`jxb:bindings schemaLocation`如下所示：

```
<?xml version="1.0" encoding="US-ASCII" ?>
<jxb:bindings version="2.0" 
    xmlns:xjc="http://java.sun.com/xml/ns/jaxb/xjc"
    xmlns:jxb="http://java.sun.com/xml/ns/jaxb" 
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/jaxb http://java.sun.com/xml/ns/jaxb/bindingschema_2_0.xsd"
>

    <jxb:bindings schemaLocation="test.xsd"> 
        <jxb:bindings node="//xs:element[@name='family']">
            <jxb:property >
                <jxb:baseType name="java.lang.String"></jxb:baseType>
            </jxb:property>
        </jxb:bindings>
    </jxb:bindings>
</jxb:bindings> 
```

还：

*   虽然您对“家庭”的注释 xpath 有效，但它似乎过于复杂。根据您的示例 xsd，我将其更新为可以工作的一个（只要只有一个 name='family' 的元素就可以工作）

# java - Java：为什么我的对象实例有两个 serialVersionUID？

> ID：13633232
> 
> 赞同：0
> 
> 时间：2012-11-29T19:29:45.130
> 
> 标签：java, serialization, jpa, glassfish-3, serialversionuid

我正在使用 Glassfish 3.1.2.2、eclipse-link 作为 JPA 提供程序和 Java JDK-6u31。我的应用程序是 3 层的，有一个独立的 Swing 客户端，在客户端机器上运行在自己的 JVM 上。通过 JNDI 查找和 @Remote 接口与 EJB 通信。

我有以下对象继承结构：

我的超类“文档”：

```
@Entity
@Table(name = "Document")
@Inheritance(strategy=InheritanceType.TABLE_PER_CLASS)
public class Document implements IUpdateableEntity {

    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(strategy = GenerationType.SEQUENCE)
    private Long id;

    @Basic(optional=false, fetch=FetchType.LAZY)
    @Lob
    private byte[] content;

    @Transient
    private transient File file;

    public Document() { }

    // getters and setters ...

} 
```

...和一个子类“发票”：

```
@Entity
@Table(name = "Dokument")
public class Invoice extends Document implements IUpdateableEntity {

    private static final long serialVersionUID = 1L;

    // some additional relations and attributes ...

    public Invoice () { }

    // getters and setters ...

} 
```

现在我在调用我的 ejb 外观以保留发票对象时遇到此异常（调用 persist()、flush()、refresh() 并将对象返回给客户端以便为客户端提供自动生成的 ID）：

```
29.11.2012 20:21:25 com.sun.corba.ee.spi.orbutil.logex.WrapperGenerator handleFullLogging
WARNUNG: IOP00810011: Exception from readValue on ValueHandler in CDRInputStream
org.omg.CORBA.MARSHAL: WARNUNG: IOP00810011: Exception from readValue on ValueHandler in CDRInputStream  vmcid: OMG  minor code: 11 completed: Maybe 
```

我已经通过互联网进行了梳理，发现了指向 serialVersionUID 问题的提示，因为 CORBA 编组在此示例中显然失败了。

然后我在 Netbeans IDE 中打开了我的调试器，并在对象被发送到服务器端 ejb bean 之前自省了它的状态。

我意识到在调试器窗口中打开静态字段节点时存在重复的serialVersionUID（与下图比较）：

![在此处输入图像描述](../Images/1b5da6215aea653ade367f77d48f2b0c.png)

**- 有人知道如何解决这个问题吗？**

我的项目中有其他类似这样的继承结构，它们的构造非常相似（没有@Lob），我在那里没有这个问题...... @Lob 字段可能会以某种方式引发这种行为吗？

任何帮助都非常感谢并提前感谢您！

编辑：这是完整的堆栈跟踪：

```
29.11.2012 20:21:25 com.sun.corba.ee.spi.orbutil.logex.WrapperGenerator handleFullLogging
WARNUNG: IOP00810011: Exception from readValue on ValueHandler in CDRInputStream
org.omg.CORBA.MARSHAL: WARNUNG: IOP00810011: Exception from readValue on ValueHandler in CDRInputStream  vmcid: OMG  minor code: 11 completed: Maybe
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at com.sun.corba.ee.spi.orbutil.logex.corba.CorbaExtension.makeException(CorbaExtension.java:248)
    at com.sun.corba.ee.spi.orbutil.logex.corba.CorbaExtension.makeException(CorbaExtension.java:95)
    at com.sun.corba.ee.spi.orbutil.logex.WrapperGenerator.handleFullLogging(WrapperGenerator.java:387)
    at com.sun.corba.ee.spi.orbutil.logex.WrapperGenerator.access$400(WrapperGenerator.java:107)
    at com.sun.corba.ee.spi.orbutil.logex.WrapperGenerator$2.invoke(WrapperGenerator.java:511)
    at com.sun.corba.ee.spi.orbutil.proxy.CompositeInvocationHandlerImpl.invoke(CompositeInvocationHandlerImpl.java:99)
    at $Proxy24.valuehandlerReadException(Unknown Source)
    at com.sun.corba.ee.impl.encoding.CDRInputStream_1_0.readRMIIIOPValueType(CDRInputStream_1_0.java:1022)
    at com.sun.corba.ee.impl.encoding.CDRInputStream_1_0.read_value(CDRInputStream_1_0.java:1123)
    at com.sun.corba.ee.impl.encoding.CDRInputObject.read_value(CDRInputObject.java:531)
    at com.sun.corba.ee.impl.io.IIOPInputStream.inputObjectField(IIOPInputStream.java:2162)
    at com.sun.corba.ee.impl.io.IIOPInputStream.inputClassFields(IIOPInputStream.java:2404)
    at com.sun.corba.ee.impl.io.IIOPInputStream.inputObject(IIOPInputStream.java:1224)
    at com.sun.corba.ee.impl.io.IIOPInputStream.simpleReadObject(IIOPInputStream.java:425)
    at com.sun.corba.ee.impl.io.ValueHandlerImpl.readValueInternal(ValueHandlerImpl.java:308)
    at com.sun.corba.ee.impl.io.ValueHandlerImpl.readValue(ValueHandlerImpl.java:274)
    at com.sun.corba.ee.impl.encoding.CDRInputStream_1_0.readRMIIIOPValueType(CDRInputStream_1_0.java:1015)
    at com.sun.corba.ee.impl.encoding.CDRInputStream_1_0.read_value(CDRInputStream_1_0.java:1123)
    at com.sun.corba.ee.impl.encoding.CDRInputObject.read_value(CDRInputObject.java:531)
    at com.sun.corba.ee.impl.io.IIOPInputStream.inputObjectField(IIOPInputStream.java:2162)
    at com.sun.corba.ee.impl.io.IIOPInputStream.inputClassFields(IIOPInputStream.java:2404)
    at com.sun.corba.ee.impl.io.IIOPInputStream.inputObject(IIOPInputStream.java:1224)
    at com.sun.corba.ee.impl.io.IIOPInputStream.simpleReadObject(IIOPInputStream.java:425)
    at com.sun.corba.ee.impl.io.ValueHandlerImpl.readValueInternal(ValueHandlerImpl.java:308)
    at com.sun.corba.ee.impl.io.ValueHandlerImpl.readValue(ValueHandlerImpl.java:274)
    at com.sun.corba.ee.impl.encoding.CDRInputStream_1_0.readRMIIIOPValueType(CDRInputStream_1_0.java:1015)
    at com.sun.corba.ee.impl.encoding.CDRInputStream_1_0.read_value(CDRInputStream_1_0.java:1123)
    at com.sun.corba.ee.impl.encoding.CDRInputObject.read_value(CDRInputObject.java:531)
    at com.sun.corba.ee.impl.io.IIOPInputStream.inputObjectField(IIOPInputStream.java:2162)
    at com.sun.corba.ee.impl.io.IIOPInputStream.inputClassFields(IIOPInputStream.java:2404)
    at com.sun.corba.ee.impl.io.IIOPInputStream.inputObject(IIOPInputStream.java:1224)
    at com.sun.corba.ee.impl.io.IIOPInputStream.simpleReadObject(IIOPInputStream.java:425)
    at com.sun.corba.ee.impl.io.ValueHandlerImpl.readValueInternal(ValueHandlerImpl.java:308)
    at com.sun.corba.ee.impl.io.ValueHandlerImpl.readValue(ValueHandlerImpl.java:274)
    at com.sun.corba.ee.impl.encoding.CDRInputStream_1_0.readRMIIIOPValueType(CDRInputStream_1_0.java:1015)
    at com.sun.corba.ee.impl.encoding.CDRInputStream_1_0.read_value(CDRInputStream_1_0.java:1123)
    at com.sun.corba.ee.impl.encoding.CDRInputObject.read_value(CDRInputObject.java:531)
    at com.sun.corba.ee.impl.presentation.rmi.ExceptionHandlerImpl$ExceptionRWRMIImpl.read(ExceptionHandlerImpl.java:180)
    at com.sun.corba.ee.impl.presentation.rmi.ExceptionHandlerImpl.readException(ExceptionHandlerImpl.java:290)
    at com.sun.corba.ee.impl.presentation.rmi.DynamicMethodMarshallerImpl.readException(DynamicMethodMarshallerImpl.java:502)
    at com.sun.corba.ee.impl.presentation.rmi.StubInvocationHandlerImpl.privateInvoke(StubInvocationHandlerImpl.java:205)
    at com.sun.corba.ee.impl.presentation.rmi.StubInvocationHandlerImpl.invoke(StubInvocationHandlerImpl.java:152)
    at com.sun.corba.ee.impl.presentation.rmi.codegen.CodegenStubBase.invoke(CodegenStubBase.java:227)
    at ch.lawsuite.control.__DokumentFacadeRemote_Remote_DynamicStub.create(ch/lawsuite/control/__DokumentFacadeRemote_Remote_DynamicStub.java)
    at ch.lawsuite.control._DokumentFacadeRemote_Wrapper.create(ch/lawsuite/control/_DokumentFacadeRemote_Wrapper.java)
    at ch.lawsuite.gui.misc.unterlagen.ModDocumentUI.btnSpeichernActionPerformed(ModDocumentUI.java:631)
    at ch.lawsuite.gui.misc.unterlagen.ModDocumentUI.access$300(ModDocumentUI.java:52)
    at ch.lawsuite.gui.misc.unterlagen.ModDocumentUI$6.actionPerformed(ModDocumentUI.java:384)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1995)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2318)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:387)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:242)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:236)
    at java.awt.Component.processMouseEvent(Component.java:6290)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3267)
    at java.awt.Component.processEvent(Component.java:6055)
    at java.awt.Container.processEvent(Container.java:2039)
    at java.awt.Component.dispatchEventImpl(Component.java:4653)
    at java.awt.Container.dispatchEventImpl(Container.java:2097)
    at java.awt.Component.dispatchEvent(Component.java:4481)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4575)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4236)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4166)
    at java.awt.Container.dispatchEventImpl(Container.java:2083)
    at java.awt.Window.dispatchEventImpl(Window.java:2482)
    at java.awt.Component.dispatchEvent(Component.java:4481)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:648)
    at java.awt.EventQueue.access$000(EventQueue.java:84)
    at java.awt.EventQueue$1.run(EventQueue.java:607)
    at java.awt.EventQueue$1.run(EventQueue.java:605)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:98)
    at java.awt.EventQueue$2.run(EventQueue.java:621)
    at java.awt.EventQueue$2.run(EventQueue.java:619)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:618)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:178)
    at java.awt.Dialog$1.run(Dialog.java:1044)
    at java.awt.Dialog$3.run(Dialog.java:1096)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.awt.Dialog.show(Dialog.java:1094)
    at java.awt.Component.show(Component.java:1584)
    at java.awt.Component.setVisible(Component.java:1536)
    at java.awt.Window.setVisible(Window.java:841)
    at java.awt.Dialog.setVisible(Dialog.java:984)
    at ch.lawsuite.gui.misc.unterlagen.ModDocumentUI.showFrame(ModDocumentUI.java:118)
    at ch.lawsuite.gui.dateneinheit.akte.AkteUI.btnImportFestplatteActionPerformed(AkteUI.java:5877)
    at ch.lawsuite.gui.dateneinheit.akte.AkteUI.access$3300(AkteUI.java:75)
    at ch.lawsuite.gui.dateneinheit.akte.AkteUI$126.actionPerformed(AkteUI.java:4170)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1995)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2318)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:387)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:242)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:236)
    at java.awt.Component.processMouseEvent(Component.java:6290)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3267)
    at java.awt.Component.processEvent(Component.java:6055)
    at java.awt.Container.processEvent(Container.java:2039)
    at java.awt.Component.dispatchEventImpl(Component.java:4653)
    at java.awt.Container.dispatchEventImpl(Container.java:2097)
    at java.awt.Component.dispatchEvent(Component.java:4481)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4575)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4236)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4166)
    at java.awt.Container.dispatchEventImpl(Container.java:2083)
    at java.awt.Window.dispatchEventImpl(Window.java:2482)
    at java.awt.Component.dispatchEvent(Component.java:4481)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:648)
    at java.awt.EventQueue.access$000(EventQueue.java:84)
    at java.awt.EventQueue$1.run(EventQueue.java:607)
    at java.awt.EventQueue$1.run(EventQueue.java:605)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:98)
    at java.awt.EventQueue$2.run(EventQueue.java:621)
    at java.awt.EventQueue$2.run(EventQueue.java:619)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:618)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:122)
Caused by: java.lang.NullPointerException
    at com.sun.corba.ee.impl.orbutil.ClassInfoCache$ClassInfo.<init>(ClassInfoCache.java:156)
    at com.sun.corba.ee.impl.orbutil.ClassInfoCache.get(ClassInfoCache.java:281)
    at com.sun.corba.ee.impl.encoding.CDRInputStream_1_0.read_value(CDRInputStream_1_0.java:1097)
    at com.sun.corba.ee.impl.encoding.CDRInputObject.read_value(CDRInputObject.java:531)
    at com.sun.corba.ee.impl.io.IIOPInputStream.inputObjectField(IIOPInputStream.java:2162)
    at com.sun.corba.ee.impl.io.IIOPInputStream.inputClassFields(IIOPInputStream.java:2404)
    at com.sun.corba.ee.impl.io.IIOPInputStream.inputObject(IIOPInputStream.java:1224)
    at com.sun.corba.ee.impl.io.IIOPInputStream.simpleReadObject(IIOPInputStream.java:425)
    at com.sun.corba.ee.impl.io.ValueHandlerImpl.readValueInternal(ValueHandlerImpl.java:308)
    at com.sun.corba.ee.impl.io.ValueHandlerImpl.readValue(ValueHandlerImpl.java:274)
    at com.sun.corba.ee.impl.encoding.CDRInputStream_1_0.readRMIIIOPValueType(CDRInputStream_1_0.java:1015)
    ... 121 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T23:03:14.007

`static`字段属于该类。您有一个 Invoice 实例，它既是 Invoice 又是 Document。因此，有两个名为的静态字段`serialVersionUID`是相关的，`Document.serialVersionUID`并且`Invoice.serialVersionUID`. 在正常使用中，您只会看到最上面的那个，因为超类被屏蔽了。加倍如此，因为它们是`private`，所以禁止子类访问。调试器不受可见性规则的约束，并且显然向您展示了两者。

这似乎是正常的，并且没有任何其他证据，可能不是您的问题的原因。

您可以通过将其中一个值更改为不同的值（例如 2）来仔细检查，然后您应该更清楚地看到调试器中的不同值。

# spring - Java - spring - quatrz cron 表达式

> ID：13633235
> 
> 赞同：1
> 
> 时间：2012-11-29T19:29:55.730
> 
> 标签：spring, quartz-scheduler, cronexpression

Java - spring - quatz shedular。我正在尝试编写以下 2 个 cron 表达式

```
1- cron expression to execute every day once in early morning by 3AM.
2 -cron expression to execute every after 3 hours 
```

帮助

以下是我认为可以使用但必须等待查看的表达式。

```
1- "0 0 0/1 * * ?"
2- "0 3 * * * ?" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T19:42:19.807

*   1）对我来说没有任何意义。
*   2) 在每小时的第 3 分钟运行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T19:44:27.373

你的表达是错误的。第一个每小时运行一次，而第二个每小时每 3 分钟运行一次。

每天凌晨 3 点运行：

```
0 0 3 * * ? 
```

我不明白你的第二个要求。

# android - Phonegap/Pushwoosh Android 检索设备 ID/令牌

> ID：13633236
> 
> 赞同：1
> 
> 时间：2012-11-29T19:29:57.257
> 
> 标签：android, cordova, push-notification, token

如何在设备注册时检索设备 ID/令牌？我正在使用 Phonegap Pushwoosh 示例，它工作正常。但我不知道如何在设备注册 initPushwoosh 中检索令牌。

我不是专业的程序员。任何帮助将不胜感激。

我有一个初始化的 index.html `<body onload="init();">`

在 main.js

```
function init() { 
  document.addEventListener("deviceready", deviceInfo, true);
  document.addEventListener("deviceready", initPushwoosh, true);
} 
```

在 PushNotification.js 中

```
function initPushwoosh()
{
    var pushNotification = window.plugins.pushNotification;
// CHANGE projectid & appid
pushNotification.registerDevice({ projectid: "xxxxxxx", appid : "xxxxxxxx" },
        function(status) {
          var pushToken = status;
          console.warn('push token: ' + pushToken);
        },
        function(status) {
          console.warn(JSON.stringify(['failed to register ', status]));
        });

document.addEventListener('push-notification', function(event) {
                var title = event.notification.title;
                var userData = event.notification.userdata;

                if(typeof(userData) != "undefined") {
           console.warn('user data: ' + JSON.stringify(userData));
        }

        navigator.notification.alert(title);
      });

 } 
```

第一部分是 .registerDevice，令牌可能是 pushToken，但我就是不知道如何从这个函数中检索它！最好的方法是将其发送到 MySQL 数据库，我们称之为 smartmandb.tokentable

我修改了 initPushwoosh() 以使用 Ajax 将令牌发送给 MySQL（见下文）我在 MySQL 上什么也没收到。我是否发送了正确的令牌参数（pushToken）？

```
 function initPushwoosh()
{
var pushNotification = window.plugins.pushNotification;
// CHANGE projectid & appid
pushNotification.registerDevice({ projectid: "xxxxxx", appid : "xxxxxxx"      },
                                function(status) {
                                    var     pushToken = status;
                                      console.warn('push token: ' + pushToken);
// start my ajax to insert token to mysql
 var param ={Token: pushToken};                                 
  $.ajax({                                      
url: 'http://luxurylebanon.com/offeratlive/apitoken.php', data: param, dataType: 'json',  success: function(result)  
{
if(result.success == false) 
{  
    alert(failed)
} 
else { 
     alert(success)
    }  
  }
  });
// end ajax                                         
                                },
                                function(status) {
                                    console.warn(JSON.stringify(['failed to register ', status]));
                                });

document.addEventListener('push-notification', function(event) {
                            var title = event.notification.title;
                            var userData = event.notification.userdata;

                            if(typeof(userData) != "undefined") {
                                console.warn('user  data: ' + JSON.stringify(userData));
                            }

                             navigator.notification.alert(title);
                          });

}

The PHP apitoken.php

<?php
$username="xxxxxxx";
$password="xxxxxxxxxxxx";
$database="offeratdb";
$server="offeratdb.db.xxxxxxxxx.com";
$connect = mysql_connect($server,$username,$password)or die('Could not connect: ' . mysql_error());

@mysql_select_db($database) or die('Could not select database ('.$database.') because of : '.mysql_error());

$vtoken= $_POST['Token'];

// Performing SQL query
    $query = "INSERT INTO `tokentable` (`thetoken`) VALUES ('$vtoken')";
    $result = mysql_query($query)or die('Query failed: ' . mysql_error());

echo $vtoken;

// We will free the resultset...
mysql_free_result($result);

// Now we close the connection...
mysql_close($connect);
?> 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T07:02:27.607

查看您的代码后，我认为它包含一些错误。因此，让我们尝试修复它们：

1.  首先。在 PushNotification.js 之前是否包含 jquery js 脚本？如果没有，“$.ajax”将不会被执行。

2.  另一件事。ajax 默认类型是 GET，您在 php 代码中使用 POST。而且您根本不使用json。所以你的代码应该变成这样的东西

    ```
    $.ajax({
        type: "POST",
        async: true,
        url: url,
        data: params,
        success: function (result) {
            // todo
        },
        error: function (result) {
            // todo
        }
    }); 
    ```

3.  最后一件事。参数 var 应该这样初始化： var param = "Token="+pushToken;

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T17:45:48.217

我遇到了同样的问题，我更新了 Pushwoosh.jar，它对我有用。:)

# c++ - 将类对象本身声明为字段

> ID：13633243
> 
> 赞同：-5
> 
> 时间：2012-11-29T19:30:31.623
> 
> 标签：c++, class

所以我试图创建一个基本上是一个房间的链接列表，它存储指向每个房间的上一个和下一个房间的指针。

```
#ifndef Hospital_Room_h
#define Hospital_Room_h

class Room
{

public:

    Room( Room  const &);
    Room createRooms();

    Room next;
    Room prev;
};

#endif 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T19:33:31.250

声明指针需要`*`字符，如下所示：

```
Room* next;
Room* prev; 
```

随后使用指针需要`*`运算符或`->`运算符，如下所示：

```
myFavoriteRoom = *(myRoom.next);

myFavoriteWindow = myRoom.next -> window; 
```

如果您正在尝试使用指针，但还不了解它们是如何工作的，我建议您阅读一[本关于 C++ 编程的好书](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)。

# uiwebview - iOS：当已经选择了 tabBar 项目时，有没有办法从 tabBar 重新加载 UIWebView？

> ID：13633250
> 
> 赞同：1
> 
> 时间：2012-11-29T19:30:46.493
> 
> 标签：uiwebview, ios6, uitabbarcontroller, uitabbar

这可能听起来很傻，但我的应用程序委托中有一个标签栏，当用户点击一个标签时，我的视图控制器正在加载。在我的视图控制器中，我有一个加载一个简单网站的 UIwebview。而不是必须创建一个主页按钮来重新加载网络视图，我想看看我是否可以使用已经选择的标签栏项目来重新加载网站。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T09:02:32.740

因为你有标签栏委托，所以将重新加载功能设置为

```
- (void)tabBar:(UITabBar *)tabBar didSelectItem:(UITabBarItem *)item {
    //reload webview
} 
```

# php - 为什么好友发来的消息不会从我的主页中删除？

> ID：13633251
> 
> 赞同：0
> 
> 时间：2012-11-29T19:30:46.817
> 
> 标签：php, codeigniter

我正在向我的应用程序添加一项功能，用户可以在其中一一删除从朋友那里收到的消息。我在我的消息模型中添加了一个 deleteMessage 函数。然后我在我的家庭控制器的删除函数中调用它。在我的主页视图上，我应该能够通过按“删除”来删除消息。目前没有任何反应。然后，这也会在消息数据库中为他们删除这个特定的内容。db 表包含字段 from、to 和 message。再次感谢您的帮助

我的家庭控制器：

```
class Home extends CI_Controller 
{
function Home()
{   
     parent::__construct();
     $this->load->model('messages');
     $this->load->model('friends');
     $this->load->model("profiles");
}

  function delete($message)
 {
$username = $this->session->userdata('username');
$this->messages->deleteMessage($from, $to, $message);
redirect('home');
 }

function index()
{

 $username = $this->session->userdata('username');
 $membername = $this->session->userdata('membername');
 $viewData['membername'] = $membername;
 $viewData['username'] = $username;
 $viewData['following'] = $this->friends->getFollowing($username);
 $viewData['followers'] = $this->friends->getFollowers($username);
 $viewData['messages'] = $this->messages->getMessages($membername);
 $viewData['friends'] = $this->friends->getFriends($username);

 $this->load->view('shared/header');
 $this->load->view('home/hometitle', $viewData);
 $this->load->view('shared/nav');
 $this->load->view('home/homeview', $viewData);
 $this->load->view('shared/footer');
}
 } 
```

消息模型：

```
class Messages extends CI_Model
{

function Messages()
{
parent::__construct();
}

function deleteMessage($from, $to, $message)
{
   $this->db->select('*')->from('messages')->where('from', $from)->where('to', $to)->where('message', $message);
   $this->db->delete();
  }

} 
```

主页视图：

```
 <h2> Messages</h2> 
    <ul> 
      <?php foreach($messages as $message):?>
          <li><?=$message['from']?> says...: "<?=$message['message']?>"(<?=anchor("home/delete/$message", 'delete')?>)</li>      
         <?php endforeach?>    
    </ul>      
  </div> 
```

# c# - 为什么当我创建一个新模型并尝试检索它的 ID 时，它总是返回 0？

> ID：13633253
> 
> 赞同：0
> 
> 时间：2012-11-29T19:30:52.177
> 
> 标签：c#, visual-studio, entity-framework, model

当我创建一个新模型并尝试检索它的**ID**时，它总是返回 0。

这是为什么？将其添加到相应的集合和上下文后，我正在尝试。据我所知，每次创建新模型时，它都会调用数据库并分配一个唯一 ID。

**StoreGeneratedPattern**值在 Model.edmx 文件中设置为**识别**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T19:35:36.690

之后会得到数字`context.SaveChanges()`。在此之前，数据库中没有新模型对象的记录，并且不知道插入时将生成的 id。

**更新**：

例如，您有两个表：书籍和书架。任何一本书都可以放在一个书架上，一个书架可以包含许多书。典型的一对多关系。EF 在模型中为您生成两个类： **Class Book**：

```
public class Book
{
    public int Id{get;set;}
    public string Title{get;set;}
    ....//some other properites
    public virtual Shelve Shelve{get;set;} //navigation property to Shelve where this book is placed
} 
```

**类搁置**：

```
public class Shelve
{
    public int Id{get;set;}
    public string Name{get;set}
    ....//some other properties, as example address in library
    public virtual ICollection<Book> Books{get;set;}
} 
```

如果您想创建一本书并将其放在现有的书架中，您应该：

```
var book = new Book();
//initialize properties of book
var shelve = context.GetShelveById(shelveId); //get existing shelve from database by id
shelve.Books.Add(book);
context.SaveChanges(); 
```

如果你想创建新的书架并添加新书，那么你可以使用下一个示例：

```
var book = new Book();
//initialize properties of book
var shelve = new Shelve(); 
//initialize properties of Shelve
shelve.Books = new List<Book>();
shelve.Books.Add(book);
context.Add(shelve); //add shelve to context
context.SaveChanges(); 
```

# asp.net - ASPxComboBox - 如何设置所选项目？

> ID：13633256
> 
> 赞同：9
> 
> 时间：2012-11-29T19:31:03.890
> 
> 标签：asp.net, devexpress

我正在使用：[ASPxComboBox](http://documentation.devexpress.com/#AspNet/clsDevExpressWebASPxEditorsASPxComboBoxtopic)

问题是**如何从后面的代码中设置 selectedValue**？如果我的html是这样的：

```
<dxe:ASPxComboBox ID="cbxJobType" runat="server" width="200px" MaxLength="50">
    <Items>
        <dxe:ListEditItem Text="Contract" Value="0" />
        <dxe:ListEditItem Text="Full Time" Value="1" />
        <dxe:ListEditItem Text="Part Time" Value="2" />
    </Items>
    <ValidationSettings ErrorDisplayMode="ImageWithTooltip">
        <RequiredField ErrorText="Required Value" IsRequired="True" />
    </ValidationSettings>
</dxe:ASPxComboBox> 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-03T21:17:34.697

客户端脚本

将 ClientInstanceName 属性赋予 ComboBox 以在客户端访问它，并将 ID 属性作为 cbxJobType 以访问控制服务器端。

```
 // by text
    comboBox.SetText('Text #2');
    // by value
    comboBox.SetValue('Value #2');
    // by index
    comboBox.SetSelectedIndex(1); 
```

服务器端代码

```
// by text
cbxJobType.Text = "Text #2";
// by value
cbxJobType.Value = "Value #2";
// by index
cbxJobType.SelectedIndex = 1; 
```

此代码也可以正常工作：

```
cbxJobType.SelectedItem = cbxJobType.Items.FindByValue("Value #2"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-29T20:51:41.340

您可以：

*   设置**ASPxComboBox.SelectedIndex**属性；

*   通过**ASPxComboBox.Value**属性按其值选择所需的项：

代码背后：

```
cbxJobType.SelectedIndex = 0;
//or
cbxJobType.Value = "0"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-18T18:22:08.560

在客户端，我发现有相当于 Ruchi 的建议：

> cbxJobType.SelectedItem = cbxJobType.Items.FindByValue("Value #2");

这是：

```
cbxJobType.SetSelectedItem(cbxJobType.FindItemByValue("Value #2"));
// or
cbxJobType.SetSelectedItem(cbxJobType.FindItemByText("Text #2")); 
```

转到[此处](https://documentation.devexpress.com/#AspNet/clsDevExpressWebScriptsASPxClientComboBoxtopic)以了解有关客户端 (ASPxClientComboBox) 的 ASPxComboBox 的更多信息。

转到[此处](https://documentation.devexpress.com/#AspNet/clsDevExpressWebASPxComboBoxtopic)以了解有关服务器端 ASPxComboBox 的更多信息。

在那里，您可以浏览它们的所有成员、构造函数、事件和方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-01T09:14:36.310

你也可以看看以下

```
cbxJobType.SelectedIndex = cbxJobType.Items.IndexOf(cbxJobType.Items.FindByValue("Value")); 
```

希望虽然发布较晚，但可能对其他人有所帮助

# architecture - 驱动复杂用例的架构

> ID：13633260
> 
> 赞同：1
> 
> 时间：2012-11-29T19:31:22.177
> 
> 标签：architecture, use-case, presentation-model, dci

我即将设计一个由多个开发人员实施的软件。

该软件有许多复杂的用例，涉及来自 UI 的几个步骤和命令。我希望与 UI 和业务逻辑有一个明确的分离，因此，每个用例的不同状态不应由 UI 驱动/控制，而是在较低层中，使 UI 本质上是“愚蠢的”。

我考虑过混合 DCI 和状态模式来解决这个问题。

我想知道您对类似应用程序的体验，如果可能，请接受您的建议。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-28T11:59:22.913

尽管这个概念很简单，但向一大群开发人员引入 DCI（或任何其他新概念）可能代价高昂。如果这是一个长期项目，它可能是有意义的。

另一方面，如果你想要实现的是

> 与 UI 和业务逻辑明确分离

那么模型-视图-控制器 (MVC) 是一种更成熟的模式，以及用于 JavaScript 和 Windows Presentation Foundation 应用程序的模型-视图-视图模型 (MVVM)。

# c# - ListView：更改子项文本某些部分的颜色？

> ID：13633265
> 
> 赞同：1
> 
> 时间：2012-11-29T19:31:42.473
> 
> 标签：c#, listview

例如，我怎样才能使 ListView 子项文本的前三个字符的颜色与其余字符不同？那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T19:56:42.697

似乎不可能使用[ListViewItem.SubItem](http://msdn.microsoft.com/en-us/library/system.windows.forms.listviewitem.listviewsubitem.aspx)。它只允许您为整个项目设置 ForeColor。

# c# - 使用 AutoMapper 将 DTO 映射回模型

> ID：13633268
> 
> 赞同：1
> 
> 时间：2012-11-29T19:31:47.210
> 
> 标签：c#, asp.net-mvc, entity-framework, automapper, dto

我有一个夹具模型：

```
public partial class Fixture
{
    public int FixtureId { get; set; }
    public string Season { get; set; }
    public byte Week { get; set; }

    //foreign key
    public int AwayTeamId { get; set; }
    //navigation properties
    public virtual Team AwayTeam { get; set; }

    //foreign key
    public int HomeTeamId { get; set; }
    //navigation properties
    public virtual Team HomeTeam { get; set; }

    public byte? AwayTeamScore { get; set; }
    public byte? HomeTeamScore { get; set; }
} 
```

和夹具 DTO ：

```
public class FixtureDTO
{
    public int Id { get; set; }
    public string Season { get; set; }
    public byte Week { get; set; }
    public string AwayTeamName { get; set; }
    public string HomeTeamName { get; set; }
    public byte? AwayTeamScore { get; set; }
    public byte? HomeTeamScore { get; set; }
} 
```

我正在使用 AutoMapper 进行映射，这是我第一次尝试使用它。这是我的映射：

```
CreateMap<Fixture, FixtureDTO>()
            .ForMember(dest => dest.Id, opt => opt.MapFrom(src => src.FixtureId))
            .ForMember(dest => dest.AwayTeamName, opt => opt.MapFrom(src => src.AwayTeam.TeamName))
            .ForMember(dest => dest.HomeTeamName, opt => opt.MapFrom(src => src.HomeTeam.TeamName));
        CreateMap<FixtureDTO, Fixture>(); 
```

它可以很好地获取 Fixture 并将其映射到我用来显示数据的 FixtureDTO。但是，当我想更新数据并将 FixtureDTO 传回以将其映射回 Fixture 时，我得到了一个错误。

```
public HttpResponseMessage PutFixture(int id, FixtureDTO fixture)
    {
        if (ModelState.IsValid && id == fixture.Id)
        {
            //do mapping manually here?

            var updated = _repository.UpdateFixture(Mapper.Map<Fixture>(fixture));
            return Request.CreateResponse(updated ? HttpStatusCode.OK : HttpStatusCode.NotFound);
        }
        return Request.CreateResponse(HttpStatusCode.BadRequest);
    } 
```

这是我得到的错误：

```
Store update, insert, or delete statement affected an unexpected number of rows (0). Entities may have been modified or deleted since entities were loaded. Refresh ObjectStateManager entries. 
```

有人可以帮忙吗？

编辑：反向映射：

```
CreateMap<Fixture, FixtureDTO>()
            .ForMember(dest => dest.Id, opt => opt.MapFrom(src => src.FixtureId))
            .ForMember(dest => dest.AwayTeamName, opt => opt.MapFrom(src => src.AwayTeam.TeamName))
            .ForMember(dest => dest.HomeTeamName, opt => opt.MapFrom(src => src.HomeTeam.TeamName));
        CreateMap<FixtureDTO, Fixture>()
            .ForMember(dest => dest.FixtureId, opt => opt.MapFrom(src => src.Id))
            .ForMember(dest => dest.AwayTeam.TeamName, opt => opt.MapFrom(src => src.AwayTeamName))
            .ForMember(dest => dest.HomeTeam.TeamName, opt => opt.MapFrom(src => src.HomeTeamName)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T19:45:50.587

通常，当 EF 检测到以下情况之一时，会引发该异常：

*乐观并发违规*：这通常发生在您尝试编辑的实体在您加载、编辑和保存期间的其他地方被修改时。（请参阅：[实体框架：“存储更新、插入或删除语句影响了意外数量的行 (0)。”](https://stackoverflow.com/questions/1836173/entity-framework-store-update-insert-or-delete-statement-affected-an-unexpec)）

*错误设置的 ID*：没有为 Pks 或 FK 设置 ID。当我错误地将实体的 FK 设置为一个值并将关联的对象设置为具有不同 ID 的对象时，我也看到过这样的异常。

由于存储库中的某些代码，很可能会引发此异常。如果您将代码发布到您的存储库中，我们可能会更好地了解导致异常的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T19:47:02.927

首先，您需要创建从 DTO 到实体的反向映射（如果需要，提供自定义成员映射）：

```
Mapper.CreateMap<FixtureDTO, Fixture>(); 
```

第二 - 检索、映射和更新现有实体

```
if (ModelState.IsValid && id == fixture.Id)
{
    Fixture entity = _repository.FindById(fixture.Id);
    Mapper.Map(fixture, entity); // Use this mapping method!
    var updated = _repository.UpdateFixture(entity);
    // etc
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T00:48:58.610

@lazyberezovsky 答案的扩展：

这是您可能需要的反向映射的（未经测试的）示例：

```
CreateMap<FixtureDTO, Fixture>()
        .ForMember(dest => dest.FixtureId,
                   opt => opt.MapFrom(src => src.Id))
        .ForMember(dest => dest.AwayTeam,
                   opt => opt.MapFrom(src => new Team
                                                 {
                                                     TeamName = src.AwayTeamName
                                                 }))
        .ForMember(dest => dest.HomeTeam,
                   opt => opt.MapFrom(src => new Team
                                                 {
                                                     TeamName = src.HomeTeamName
                                                 })); 
```

我过去使用过这种格式并且效果很好，但是您也可以为团队创建特定的映射。例如：

```
CreateMap<string, Team>().... 
```

另外，我假设您正在这样做，但断言您的配置是有效的。例如：

```
[Test]
public void AutoMapper_Configuration_IsValid()
{
    Mapper.Initialize(m => m.AddProfile<MyProfile>());
    Mapper.AssertConfigurationIsValid();
} 
```

# sencha-touch - 如何在 sencha touch 2 中管理自定义布局

> ID：13633271
> 
> 赞同：1
> 
> 时间：2012-11-29T19:31:50.693
> 
> 标签：sencha-touch

嗨，我正在处理以下面板：

```
Ext.define("GS.view.BoxesPanel", {
extend : 'Ext.dataview.component.DataItem',
xtype : 'boxesPanel',
alias : "widget.boxespanel",

config : {
    xtype : 'panel',
    layout : 'vbox',
    width : '60%',
    align : 'center',

    items : [{
        xtype : 'panel',
        flex : 2,
        layout : 'hbox',
        height : '70%',
        margin: '10 10 10 10',
        items : [{
            xtype : 'panel',
            flex : 1,
            items : []
        }, {
            xtype : 'panel',
            flex : 1,
            layout : 'vbox',
            items : []
        }, {
            xtype : 'panel',
            flex : 1,
            layout : 'vbox',
            items : []
        }]
    }, {
        xtype : 'panel',
        layout : 'hbox',
        flex : 1,
        height : '30%',
        margin: '10 10 10 10',
        items : [{
            xtype : 'panel',
            flex : 2,
            items : []
        }, {
            xtype : 'panel',
            flex : 1,
            items : []
        }]
    }]
}
}); 
```

这是我当前访问面板的方式（在我的控制器中）...：

```
 launch : function(app) {
    var store = Ext.data.StoreManager.lookup('boxStore');
    var boxesPanelList = Ext.ComponentQuery.query('BoxesPanelList')[0];
    var boxesPanel = Ext.create("GS.view.BoxesPanel");

    store.onAfter('load', function() {// Boxes are loaded when the store finishes  loading it's data, if not, the boxes appear empty
        Ext.each(store.getData().items, function(item, index) {// Iterates through BoxStore data objects (JSON)
            var box = Ext.create("GS.view.Box");
            box.setData({
                type : item.data.type,
                description : item.data.description,
                product : item.data.product
            });
            switch(item.data.position) {
                case "1":
                    box.setCls("product_vert");
                    boxesPanel.getItems().get(0).getItems().get(0).add(box);
                    break;
                case "2":
                    box.setCls("product_small");
                    boxesPanel.getItems().get(0).getItems().get(1).add(box);
                    break;
                case "3":
                    box.setCls("product_small");
                    boxesPanel.getItems().get(0).getItems().get(1).add(box);
                    break;
                case "4":
                    box.setCls("product_small");
                    boxesPanel.getItems().get(0).getItems().get(2).add(box);
                    break;
                case "5":
                    box.setCls("product_small");
                    boxesPanel.getItems().get(0).getItems().get(2).add(box);
                    break;
                case "6":
                    box.setCls("product_horiz");
                    boxesPanel.getItems().get(1).getItems().get(0).add(box);
                    break;
                case "7":
                    box.setCls("product_small");
                    boxesPanel.getItems().get(1).getItems().get(1).add(box);
                    boxesPanelList.add(boxesPanel);
                    boxesPanel = Ext.create("GS.view.BoxesPanel");
                    break;
            }
        });
    }, this);
}
}); 
```

非常感谢您提供的任何信息。

# java - 列类型的奇怪休眠异常

> ID：13633273
> 
> 赞同：5
> 
> 时间：2012-11-29T19:31:55.900
> 
> 标签：java, hibernate, hibernate-mapping, hibernate-annotations

我得到休眠异常：

> 列类型错误。找到：位，预期：BOOLEAN DEFAULT TRUE

我有班级用户：

```
package mypackage;

import javax.persistence.*;
import java.util.ArrayList;
import java.util.List;

@Entity
@Table(name = "USER")
public class User {

   @Id
   @GeneratedValue
   @Column(name = "ID", unique = true, nullable = false)
   private Long id;

   @Column(name = "STATUS", columnDefinition = "BOOLEAN DEFAULT TRUE", 
                               nullable = false)
   private Boolean status = Boolean.TRUE;

   // getters and setters
} 
```

如果 Hibernate 在数据库中创建表本身，这将正常工作。什么时候

```
<property name="hibernate.hbm2ddl.auto">create</property> 
```

或者

```
<property name="hibernate.hbm2ddl.auto">create-drop</property> 
```

**但如果**

1.  我运行我的程序并允许 Hibernate 创建这个表
2.  然后我将值更改`hibernate.hbm2ddl.auto`为**验证**
3.  然后我用 Hibernate 生成的表再次运行我的程序

    ```
    <property name="hibernate.hbm2ddl.auto">validate</property> 
    ```

所以我得到了例外：

> **org.hibernate.HibernateException：dbtest.user 中列 STATUS 的列类型错误。找到：位，预期：BOOLEAN DEFAULT TRUE**

知道 Hibernate 出现这种行为的原因是什么，我该如何解决？

我使用`MySQL server 5.1`和`Hibernate 4.0.1`。

我的`Run`课只有两行：

```
 public class Run {

   public static void main(String[] main) {

     SessionFactory sessionFactory = 
                new AnnotationConfiguration().configure().buildSessionFactory();

     Session session = sessionFactory.getCurrentSession();
   }
 } 
```

表结构：

```
CREATE TABLE USER (
    ID BIGINT(20) NOT NULL AUTO_INCREMENT,
    STATUS TINYINT(1) NOT NULL DEFAULT 1,
    PRIMARY KEY (ID),
    UNIQUE INDEX ID (ID)
)
COLLATE='utf8_general_ci'
ENGINE=MyISAM
ROW_FORMAT=DEFAULT
AUTO_INCREMENT=2 
```

我的`hibernate.cfg`：

```
<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE hibernate-configuration PUBLIC
    "-//Hibernate/Hibernate Configuration DTD//EN"
    "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
  <session-factory>
    <property name="connection.driver_class">com.mysql.jdbc.Driver</property>
    <property name="connection.url">jdbc:mysql://127.0.0.1:3306/dbtest</property>
    <property name="connection.username">root</property>
    <property name="connection.password">root</property>

    <property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>
    <property name="current_session_context_class">thread</property>
    <property name="connection.pool_size">5</property>
    <property name="hibernate.transaction.flush_before_completion">true</property>
    <property name="hibernate.transaction.auto_close_session">true</property>
    <property name="hibernate.hbm2ddl.auto">validate</property>
    <property name="hibernate.show_sql">false</property>
    <property name="hibernate.format_sql">true</property>
    <property name="hibernate.use_sql_comments">false</property>
    <property name="hibernate.connection.charSet">true</property>

    <mapping class="mypackage.User"/>
  </session-factory>
</hibernate-configuration> 
```

Hibernate 使用类型创建表，`TINYINT`我不会干预数据库，也不会手动对表进行任何更改！我只是将其更改`hibernate.hbm2ddl.auto`为 the `validate`，仅此而已。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-30T18:41:31.187

正如其他人已经说过的那样：MySql 中没有布尔列类型。我遇到了类似的问题并“创建”了自己的方言。它扩展了默认的 MySQL5Dialect 并将标准 sql-type BOOLEAN 注册到 MySql 列类型位。

```
public class Mysql5BitBooleanDialect extends MySQL5Dialect{     
    public Mysql5BitBooleanDialect() {
        super();
        registerColumnType( java.sql.Types.BOOLEAN, "bit" );        
    }       
} 
```

然后，您可以通过在休眠属性中设置方言来使用它： hibernate.dialect=your.package.Mysql5BitBooleanDialect

希望这可以帮助..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T18:08:08.723

**疯狂的猜测**，因为我没有使用注释表单映射，但这里是：

columnDefinition 看起来像是明确告诉休眠使用布尔列类型，默认值为 true，但 MySql 没有布尔类型，所以也许

```
columnDefinition = "BOOLEAN DEFAULT TRUE" 
```

应该是这样的

```
columnDefinition = "tinyint DEFAULT 1" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T13:23:29.530

```
private Boolean status = Boolean.TRUE; 
```

应该已经导致默认值 true 。

解决此问题的另一种方法是使用：

```
@PrePersist
public void prePersist()
{
    if ( status == null )
    {
         status = Boolean.TRUE;
    }
} 
```

# php - php mysql替代在循环中再次使用相同的查询

> ID：13633275
> 
> 赞同：1
> 
> 时间：2012-11-29T19:31:55.883
> 
> 标签：php, mysql, hierarchical-data, nested-sets

> **可能重复：**
> [是否可以在单个查询中查询 MySQL 中的树结构表到任何深度？](https://stackoverflow.com/questions/169817/is-it-possible-to-query-a-tree-structure-table-in-mysql-in-a-single-query-to-an)

我创建了一个管理区域，它使用 php 从 mysql 数据库中提取数据并将结果显示在表格中。基本上它显示一个父类别，然后是它下面的第一个子类别，然后是第三级子类别/主题。

它工作得很好，但由于我是 mysql 和 php 的新手，我确信代码需要改进以节省数据库资源，因为在构建表时我使用 3 个 while 循环，并且在每个循环中进行一个 mysql 查询，我是肯定是错误的方法。

有人可以为我提供一些帮助，以最好的方式做到这一点吗？

这是代码：

```
 $query = mysql_query("SELECT * FROM categories WHERE
parent_id is null
order by cat_id asc;", $hd)
or die ("Unable to run query");       

while ($row = mysql_fetch_assoc($query)) {
echo '<tr style="font-weight:bold;color:green;"><td>'. $row    ['cat_id'].'</td><td>'.$row['cat_name'].'</td><td>'.$row    ['parent_id'].'</td><td>'.$row['active'].'</td><td>'.$row    ['url'].'</td><td>'.$row['date_updated'].'</td></tr>' ;

$query2 = mysql_query("SELECT * FROM categories WHERE
                (active = 'true' AND parent_id = ".$row    ['cat_id'].")
                order by cat_id asc;", $hd)
      or die ("Unable to run query");
while ($row2 = mysql_fetch_assoc($query2)) {
echo '<tr style="font-weight:bold;"><td>'. $row2['cat_id'].'</td><td>'.$row2    ['cat_name'].'</td><td>'.$row2['parent_id'].'</td><td>'.$row2    ['active'].'</td><td>'.$row2['url'].'</td><td>'.$row2    ['date_updated'].'</td></tr>' ;
    $query3 = mysql_query("SELECT * FROM categories WHERE
                (active = 'true' AND parent_id = ".$row2    ['cat_id'].")
                order by cat_id asc;", $hd)
      or die ("Unable to run query");
      while ($row3 = mysql_fetch_assoc($query3)) {
echo '<tr><td>'. $row3['cat_id'].'</td><td>'.$row3['cat_name'].'</td><td>'.$row3    ['parent_id'].'</td><td>'.$row3['active'].'</td><td>'.$row3    ['url'].'</td><td>'.$row3['date_updated'].'</td></tr>' ;

}
}
} 
```

编辑

好的，所以我做了一些研究，这就是我所在的位置：

可能对于一个小型数据库，我的方法很好。

对于使用数组存储数据的更大数据库可能意味着我需要使用可能会占用太多内存的递归方法。很想听听人们的想法，它是否仍然比在嵌套的 while 循环中循环 db 查询更好？

我找到了以下线程，其中没有递归且只有一个查询的答案。不确定是否需要在当前设计中添加位置列： [如何通过 PHP 和 mysql 构建无限级别的菜单](https://stackoverflow.com/questions/2871861/how-to-build-unlimited-level-of-menu-through-php-and-mysql/)

如果我使用嵌套集模型而不是邻接模型重建设计，那么 mysql 查询将以所需的顺序返回结果，但是维护嵌套集设计超出了我的考虑范围，我认为这太过分了。

而已。如果有人对此有任何意见，请添加到对话中。必须有一种成功的方法，因为大量的 Web 应用程序必须需要这种要求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T19:43:31.520

我认为你可以做这样的事情：

```
SELECT * FROM categories
WHERE active = 'true'
ORDER BY parent_id, cat_id 
```

这将为您提供按 parent_id 排序的所有类别，然后按 cat_id。然后，您将获取结果集并从中构建一个多维数组。然后，您可以像当前一样循环遍历该数组以输出类别。

虽然从数据库访问的角度来看这更好，但它也会消耗更多内存，因为您需要将这个更大的数组保留在内存中。所以这确实是一个你需要考虑的权衡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T20:21:34.083

那里有很多要解决的问题，但我只会解决您关于减少查询的问题。我建议一起摆脱 WHERE 子句，并在 while 循环中使用 if 语句。使用外部变量来保存与特定条件匹配的所有结果，然后在循环后立即将它们全部回显。像这样的东西（为了简洁起见，我把你的一堆东西放在变量中）

```
//before loop
$firstInfoSet = '';
$secondInfoSet = '';
$thirdInfoSet = '';

//in while loop

if($parentID == NULL)
{
  $firstInfoSet.= $yourFirstLineOfHtml;
}

if($active && $parentID == $catID) // good for query 2 and 3 as they are identical
{
  $secondInfoSet.= $yourSecondLineOfHtml;
  $thirdInfoSet.= $yourThirdLineOfHtml;
}

//after loop
echo $firstInfoSet . $secondInfoSet . $thirdInfoSet; 
```

您现在可以进行任何类型的分组，如果需要，可以轻松修改它们，并将结果放在您想要的任何位置。

--EDIT-- 在更好地理解了这个问题之后......

```
$query = mysql_query("SELECT * FROM categories order by cat_id asc;", $hd);
$while ($row = mysql_fetch_assoc($query)){
   if($row['parent_id'] == NULL){
      //echo out your desired html from your first query 
   }
   if($row['active'] && $row['parent_id']== $row['cat_id']){
      //echo out your desired html from your 2nd and 3rd queries
   }
} 
```

# javascript - html 5 中历史对象的 event.state 为 null

> ID：13633278
> 
> 赞同：4
> 
> 时间：2012-11-29T19:32:08.200
> 
> 标签：javascript, html, history

我第一次玩历史对象。我有以下代码，我一直在 chrome 中测试：

```
<!DOCTYPE html>
<html>
        <head>
                <script type="text/javascript">

window.addEventListener('popstate', function(event) {
  console.log('popstate fired!');
   console.log(event.state);

});

function showbox()
{
   document.getElementById('box').style.display = 'block';
   history.pushState({somethinggoeshere:'but what?'}, 'I put text here, but how do i verify the browser has received it?', '?showbox=true');
}
                </script>
        </head>
        <body>
                <a onclick="showbox();">Show box</a>
                <div id="box" style="background:red; height:100px; display:none;"></div>
        </body>
</html> 
```

当我单击链接显示框时，会出现一个红色框。当我单击 chrome 浏览器窗口中的后退按钮时，然后查看 console.log，event.state 为空。为什么它是空的？我不是用 history.pushState 填充这个吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T19:36:32.143

当您使用 时`pushState`，您将页面的“*当前*状态”（浏览器实际上并没有保存页面的状态。它只是将作为第一个参数传递的对象`pushState`与历史记录中的页面关联）到浏览器的历史记录堆。当您浏览到历史堆栈中的该页面时，您推送的对象将出现（在 中`onpopstate`）。

（注意：你可以传递任何可以`JSON.stringify`编辑的东西`pushState`。）

您回到历史中的一个页面，但该页面没有添加`pushState`，因此它没有“状态”。

单击“返回”后，尝试在浏览器中按下“前进”按钮。你会发现那`event.state`不是`null`。

因此，您传递的对象链接到被推入历史堆栈的页面，并且您只有在访问历史记录中的该页面时才能看到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-05T18:47:39.743

这是一个思考的想法。

我在使用[Dart](https://dart.dev/)编程语言时遇到了同样的问题。`PopStateEvent`监听器`null`在事件状态参数中提供。我已经通过使用`HashChangeEvent`监听器解决了这个问题。在浏览器中按下“返回”按钮后，`HashChangeEvent`监听器被触发，提供有用的信息。

```
window.onHashChange.listen((event) {
    var e = event as HashChangeEvent;
    var newUrl = e.newUrl;
    var oldUrl = e.oldUrl;
      // please, navigate to the "state" (old history location)

  }); 
```

# c++ - GLEW 初始化失败

> ID：13633282
> 
> 赞同：0
> 
> 时间：2012-11-29T19:32:12.420
> 
> 标签：c++, opengl, initialization, sdl, glew

我只是想使用 SDL 2.0 和 glew 1.9 制作一个 openGL 上下文

构建项目时没有问题，但在调试时，GLEW 初始化失败，我该怎么做才能解决这个问题？

我正在使用视觉工作室 2012

这是输出：

```
The program '[936] gravitation.exe' has exited with code -1 (0xffffffff). 
```

这是代码：

```
#include <GL/glew.h>
#include <SDL.h>
#include <iostream>

int main(int argc, char **argv)
{
    SDL_Window* window = 0;
    SDL_GLContext contextOpenGL = 0;

    SDL_Event event;
    bool terminate = false;

    GLenum initGLEW = glewInit();

    if( GLEW_OK != initGLEW )
    {
        std::cout << "initialisation error of GLEW : " << glewGetErrorString(initialisationGLEW) << std::endl;

        SDL_GL_DeleteContext(contextOpenGL);
        SDL_DestroyWindow(window);
        SDL_Quit();

        return -1;
    }

    while(!terminate)
    {
    SDL_WaitEvent(&event);

    if(event.window.event == SDL_WINDOWEVENT_CLOSE)
        terminer = true;

        glClear(GL_COLOR_BUFFER_BIT);

        SDL_GL_SwapWindow(window);
    }

    SDL_GL_DeleteContext(contextOpenGL);
    SDL_DestroyWindow(window);
    SDL_Quit();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T19:43:24.497

我没有看到 OpenGL 窗口，也没有在您的代码中创建 OpenGL 上下文。初始化 GLEW 时，您需要激活 OpenGL 上下文。

# python - rest.py :: httplib.HTTPException 中的 py2neo 错误作为错误：

> ID：13633284
> 
> 赞同：0
> 
> 时间：2012-11-29T19:32:19.160
> 
> 标签：python, neo4j, py2neo

我一直在本地机器上使用 py2neo，它运行良好。但是，当我在我的服务器上安装它时，在它说安装成功之前收到一个错误。

这是错误：

```
 File "/usr/lib/python2.5/site-packages/py2neo/cypher.py", line 112
    except rest.BadRequest as err:
                            ^
SyntaxError: invalid syntax

  File "/usr/lib/python2.5/site-packages/py2neo/rest.py", line 345
    except httplib.HTTPException as err:
                                  ^
SyntaxError: invalid syntax 
```

果然，当我尝试在我的服务器上使用 py2neo 时出现错误：无效语法（rest.py，第 345 行）

在本地我正在运行 python 2.7.2，而在服务器上我正在运行 2.5.2 这是 python 版本的已知问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T21:23:53.400

如网站所述，py2neo 仅兼容 Python 2.6 及更高版本。对不起！

# asp.net - IE 10 登录问题

> ID：13633286
> 
> 赞同：1
> 
> 时间：2012-11-29T19:32:34.510
> 
> 标签：asp.net, authentication, asp.net-mvc-2, internet-explorer-10

在 win 7 和 win 8 上，我的登录仅在 IE 10 中停止工作。其余浏览器表现正常。win 7 上的 IE 9 也可以正常工作。

这就是我们在网站的 mvc 部分所拥有的。ajax 确认返回到页面，然后重定向到仪表板页面。由于仪表板页面落后于登录，因此用户被重定向回登录页面。

```
public void SignInUser(UserInfo user)
        {
            FormsAuthentication.SignOut();
            SessionService.AbandonSession();
            FormsAuthentication.SetAuthCookie(user.UserId, false);
            //here we put the user in session
            //here we log hit
        } 
```

这就是我们在 Kentico CMS 方面所拥有的，经典的 asp.net。这是一个网络服务请求，登录代码执行，然后确认返回到页面，该页面又重定向到仪表板页面。同样的事情也发生在这里。用户被重定向回登录页面。

```
FormsAuthentication.SignOut();
                    FormsAuthentication.SetAuthCookie(user.UserId, false); 
```

有没有其他人在他们的网站上看到过这种行为？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T19:36:17.150

此问题有一个[修补程序](http://support.microsoft.com/kb/2600088?wa=wsignin1.0)，其中使用 IE 10 时[不发回 Set-Cookie 标头。](https://stackoverflow.com/questions/6983732/ie10-user-agent-causes-asp-net-to-not-send-back-set-cookie-ie10-not-setting-coo)

这也在[Connect](http://connect.microsoft.com/VisualStudio/feedback/details/662275/asp-net-user-agent-sniffing-and-ie10-internet-explorer-10)上，如果您无法应用此修补程序，则在连接线程中提到了一种解决方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-07T15:18:11.933

只需安装`.net framework 4.5`，它将解决您面临的大部分问题`IE10 & IE11`。`.net framework 4.5`高度兼容`framework 4.0`并解决`IE9, IE10 and IE11`. 您不需要将应用程序框架定位到 4.5，将其保留为 4.0 构建配置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-25T05:51:34.430

此问题通常是由于 Internet Explorer 版本的缓存问题引起的。您只需`Application_BeginRequest()`在`global.asax`文件中写入以下代码。

```
protected void Application_BeginRequest()
{
    Response.Cache.SetCacheability(HttpCacheability.NoCache);
    Response.Cache.SetExpires(DateTime.Now.AddSeconds(-1));
    Response.Cache.SetNoStore();
} 
```

# mysql - MySQL 导入文本文件，每行一个单词

> ID：13633300
> 
> 赞同：1
> 
> 时间：2012-11-29T19:33:58.823
> 
> 标签：mysql, csv, import

我有一个每行一个单词的文本文件。我无法将它导入到带有名为 name 的字段的 mysql 表中。

我需要使用哪些选项进行导入？

我的文本文件是这样的：

```
random
name
one
two
three 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T19:45:28.420

你应该使用[`LOAD DATA INFILE`](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)

```
LOAD DATA INFILE 'data.txt' INTO TABLE my_table(name) 
```

**编辑**：

似乎您不能同时指定两个列列表（`(name)`在这种情况下）和`FIELDS`/`LINES`子句 - 真的很奇怪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T19:42:02.997

最直接的方法是使用[mysqlimport](http://dev.mysql.com/doc/refman/5.0/en/mysqlimport.html)

带参数`--lines-terminated-by="\n"`

# windows - (AUTOIT) Au3Recoder 无法在 Win7 64 位中启动

> ID：13633302
> 
> 赞同：0
> 
> 时间：2012-11-29T19:34:03.497
> 
> 标签：windows, user-interface, windows-7-x64, ui-automation, autoit

我正在尝试自动化一些软件安装。我开始了解 AutoIt Au3Recoder，但它无法在 Win7 64 位中启动。启动时它通过我一条错误消息

```
"MSVCR100.dll Not Found" 
```

我尝试下载相同的 .dll 文件并添加到 system32 和 C:\Windows\SysWOW64 文件夹，但我仍然面临同样的问题。

（要么我应该解决这个问题，要么我应该使用其他软件，如果您知道任何其他软件，请建议我）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T11:55:57.623

只需安装以下软件包，此错误就会消失： [http ://www.microsoft.com/en-us/download/details.aspx?id=14632](http://www.microsoft.com/en-us/download/details.aspx?id=14632)

# .net - 如何创建 DateTime 的动态数组？

> ID：13633307
> 
> 赞同：3
> 
> 时间：2012-11-29T19:34:18.010
> 
> 标签：.net, arrays, delphi-prism, oxygene

我需要创建一个 DateTime 的动态数组，但我事先不知道我必须添加多少个日期。我确实对 ArrayList 进行了实验，但它没有帮助。

那么，如何在 Delphi Prism 中创建 DateTime 的动态数组呢？

你是这样做的吗？

```
mydates: array of DateTime; 
```

**更新 1**

我做了以下操作，编译器说这些参数没有重载 set_BoldedDates。”

```
 mydates:ArrayList;
  mydates := new ArrayList;
  mydates.Add(new DateTime(2012,11,23));

  DataCalendar.BoldedDates := mydates; //also I did mydates.ToArray caused error. 
```

上面的代码仅在我将 mydates 设置如下时才有效：

```
const
mydates : Array[0..1] of DateTime = [new DateTime(2012,11,23), new Datetime(2012,11,13)]; 
```

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T00:01:40.583

这对我来说很好，并且可以正确显示日期。（**注意：**对于解析错误或超出范围的日期没有错误处理！这严格设计用于显示在 Delphi Prism 中使用`array of DateTime`with 。）`MonthCalendar.BoldedDates`

```
method MainForm.button2_Click(sender: System.Object; e: System.EventArgs);
var
  Dt: array of System.DateTime;
  TheSize: Int32;
begin
  TheSize := Int32.Parse(textBox1.Text);

  Dt := new System.DateTime[TheSize];
  for i: Int32 := 0 to TheSize - 1 do
    Dt[i] := new DateTime(2012, 11, i + 4);

  monthCalendar1.BoldedDates := Dt;  
end; 
```

在文本框中输入的测试`5`显示此结果：

![粗体日期的示例显示](../Images/03f90fa48ac2dc865fc8cc7f6026775d.png)

# android - Android ContentResolver.insert 因“无法创建新文件”而崩溃

> ID：13633308
> 
> 赞同：2
> 
> 时间：2012-11-29T19:34:23.693
> 
> 标签：android, android-sdcard, android-contentresolver

我的活动的某些功能中有一个代码：

```
ContentValues cv = new ContentValues();
cv.put(MediaStore.Images.Media.TITLE, "1354213408296.jpg");
ContentResolver contentResolver = getContentResolver();
Uri imageUri = contentResolver.insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, cv);

Intent cameraIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, imageUri);
cameraIntent.putExtra(MediaStore.EXTRA_VIDEO_QUALITY, 1);

startActivityForResult(cameraIntent, 712984419/*Some request code*/); 
```

它崩溃了：

```
java.lang.IllegalStateException: Unable to create new file:
/mnt/sdcard/DCIM/Camera/1354213408296.jpg at
android.os.Parcel.readException(Parcel.java:1335) at
android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:182) at
android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:136) at
android.content.ContentProviderProxy.insert(ContentProviderNative.java:415) at
android.content.ContentResolver.insert(ContentResolver.java:730) 
```

崩溃：

```
contentResolver.insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, cv); 
```

`"1354213408296.jpg"`只是`System.currentTimeInMillis() + ".jpg"`，所以它总是唯一的

在`android.permission.WRITE_EXTERNAL_STORAGE`清单中提供

这是一些手机的环境规格（我正在使用 ACRA 来获取它）：

```
getDataDirectory=/data
getDownloadCacheDirectory=/cache
getExternalStorageAndroidDataDir=/mnt/sdcard/Android/data
getExternalStorageDirectory=/mnt/sdcard 
getExternalStorageState=removed
getRootDirectory=/system 
getSecureDataDirectory=/data 
getSystemSecureDirectory=/data/system 
is4GConfig=true 
is8GConfig=false 
isEncryptedFilesystemEnabled=false 
isExternalStorageEmulated=false 
isExternalStorageRemovable=true 
```

我能做些什么来防止这种崩溃？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T21:01:06.770

我不确定你想做什么。您*似乎*正在做的只是尝试在 MediaStore.Images.Media 中创建一个新行，其中只有一个 TITLE 列。在没有数据的情况下放入标题没有多大意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-11T07:54:16.793

这似乎只是不存在 sdcard 时会遇到的另一个例外（我只能在非常奇怪的模拟器上重现它，但谁知道呢？）。一定要处理丢失 sdcard 的情况。我目前的解决方案如下：

```
public static Uri getImageFileUri(Context context) throws IOException{
    String fullFileName = generateImageFileName(imageName); // a method i have defined
    if (Environment.MEDIA_MOUNTED.equals(Environment.getExternalStorageState())) {
        ContentValues values = new ContentValues();
        values.put(MediaStore.Images.Media.TITLE, fullFileName);
        return context.getContentResolver().insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values);
    } else {
        return Uri.fromFile(new File(fullFileName));
    }
} 
```

这是我用来生成`Uri`相机意图的方法。之后我就像你一样使用它。问题是我在没有 sdcard 的情况下返回的值将无法正常工作，但另一方面，如果没有 sdcard，Android 设备不允许拍照。使用此解决方案，如果有 sdcard，您将成功拍照，并在其他情况下启动将显示消息“插入 sdcard 以拍照”的本机相机。

# scala - 默认 AkkaSupport Servlet 示例不起作用

> ID：13633309
> 
> 赞同：2
> 
> 时间：2012-11-29T19:34:29.477
> 
> 标签：scala, akka, scalatra

如果我有一个 servlet 直接取自 Scalatra 文档页面上的示例：

```
package me.myself.andi

import _root_.akka.dispatch._
import org.scalatra.akka.AkkaSupport
import org.scalatra.ScalatraServlet

class MyAppServlet extends ScalatraServlet with AkkaSupport {
  get("/"){
    Future {
      // Add other logic here

      <html><body>Hello Akka</body></html>
    }
  }
} 
```

我得到一个错误`class MyAppServlet needs to be abstract, since method system in trait AkkaSupport of type => akka.actor.ActorSystem is not defined`。

然后，我尝试了：

```
package me.myself.andi

import _root_.akka.dispatch._
import org.scalatra.akka.AkkaSupport
import org.scalatra.ScalatraServlet

class MyAppServlet extends ScalatraServlet with AkkaSupport {
  val system = ActorSystem("MySystem")
  get("/"){
    Future(system) { // and also Future {
      // Add other logic here

      <html><body>Hello Akka</body></html>
    }
  }
} 
```

但收到另一个错误`type mismatch; found : org.scalatra.ActionResult required: akka.dispatch.ExecutionContext`。对阿卡不熟悉，这是怎么回事？

```
libraryDependencies ++= Seq(
  "org.scalatra" % "scalatra" % "2.2.0-SNAPSHOT",
  "org.scalatra" % "scalatra-scalate" % "2.2.0-SNAPSHOT",
  "org.scalatra" % "scalatra-specs2" % "2.2.0-SNAPSHOT" % "test",
  "org.scalatra" % "scalatra-akka" % "2.2.0-SNAPSHOT",
  "com.typesafe.akka" % "akka" % "2.0.4",
  "ch.qos.logback" % "logback-classic" % "1.0.6" % "runtime",
  "eu.infomas" % "annotation-detector" % "3.0.0",
  "org.atmosphere" % "atmosphere-runtime" % "1.1.0-SNAPSHOT",
  "org.eclipse.jetty" % "jetty-websocket" % "8.1.4.v20120524",
  "org.eclipse.jetty" % "jetty-webapp" % "8.1.7.v20120910" % "container",
  "org.eclipse.jetty" % "test-jetty-servlet" % "8.1.5.v20120716" % "test",
  "org.eclipse.jetty" % "jetty-websocket" % "8.1.7.v20120910" % "container",
  "org.eclipse.jetty.orbit" % "javax.servlet" % "3.0.0.v201112011016" % "container;provided;test" artifacts (Artifact("javax.servlet", "jar", "jar"))
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T19:55:52.893

编译器错误非常清楚。导入`akka.actor.ActorSystem`并添加`val system = ActorSystem("MySystem")`到类中，它应该可以工作。

编辑：

`system`应该是一个隐式值，所以它必须是然后`implicit val system = ActorSystem("MySystem")`不要手动传入系统。所以总的来说

```
class MyAppServlet extends ScalatraServlet with AkkaSupport {
  implicit val system = ActorSystem("MySystem")
  get("/"){
    Future { // and also Future {
      // Add other logic here

      <html><body>Hello Akka</body></html>
    }
  }
} 
```

# sql - SQL 中每个类别的计数

> ID：13633310
> 
> 赞同：1
> 
> 时间：2012-11-29T19:34:29.783
> 
> 标签：sql, aggregate

我有一个看似简单的问题，但当然从来都不是。

我有看起来像这样的数据（我正在显示管道分隔）：

```
Identifier | Roll Up | Sequence

1234       | 4567    | 1

1234       | 4567    | 2

1235       | 4567    | 1

1235       | 4567    | 2

1236       | 6789    | 1

1237       | 6789    | 1 
```

因此，标识符是汇总字段的“版本”，每个汇总字段都有序列。

我需要做的是有一个额外的列来计算汇总的“版本”，例如：

```
Version |Identifier | Roll Up | Sequence

1       |1234       | 4567    | 1

1       |1234       | 4567    | 2

2       |1235       | 4567    | 1

2       |1235       | 4567    | 2

1       |1236       | 6789    | 1

2       |1237       | 6789    | 1 
```

我认为这将是***每个汇总的每个标识符的简单计数，***但我无法让它正确地做到这一点`COUNT()`或`ROW_NUMBER().`

有人会为该派生列提供解决方案吗？

非常感谢，特纳。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T19:40:38.370

在您的简单查询中添加一列，如下所示：

```
row_number() over (partition by Identifier, Roll_Up order by Identifier, Roll_Up) 
```

我认为将是产生最终结果的脚本：

```
SELECT  t0.*, count1
FROM  Test AS t0 INNER JOIN
  (SELECT Identifier1, ROLLUP1,
     Row_Number() Over
   (Partition BY Identifier1, Rollup1
    ORDER BY Identifier1, RollUp1) AS count1
   FROM Test
   ) AS t1
  ON t0.Identifier1 = t1.Identifier1
  AND t0.ROLLUP1 = t1.ROLLUP1 
```

# asp.net - 如何从独立页面进行 Server.Transfer？

> ID：13633316
> 
> 赞同：0
> 
> 时间：2012-11-29T19:35:28.860
> 
> 标签：asp.net, asp.net-4.0

我在站点的文件夹中有一个页面，我想`Server.Transfer`从域根目录访问它。我尝试向根目录添加一个页面，其中包含：

```
Server.Transfer("~/folder1/default.aspx"); 
```

但我收到 500 错误。我也试过

```
Server.Transfer("/folder1/default.aspx"); 
```

结果相同。但是当我尝试`Server.Transfer("default2.aspx");`- 根目录中的另一个页面时，它起作用了。

那么如何转移到我想转移到的页面呢？

编辑：folder1 是一个 Web 应用程序 (Asp.net) - 这有关系吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T19:47:57.987

是的 - 重要的是，folder1 本身就是一个单独的应用程序。

Server.Transfer 仅用于在您自己的 ASP.NET 应用程序中传输，因为它直接实例化目标页面并从调用它的位置发回响应。它无法跨应用程序执行此操作。

最好对`Response.Redirect`/folder1/default.aspx 页面执行简单的操作，而不是在那里传输。

编辑：在您的 Default.aspx （根）的 Page_Load 中，添加

```
Response.Redirect("/folder1/Default.aspx"); 
```

# ios - 为什么要在 iOS 应用程序中使用 NSFileWrapper 样式包的原因是什么？

> ID：13633320
> 
> 赞同：2
> 
> 时间：2012-11-29T19:35:39.893
> 
> 标签：ios, cocoa-touch, nsfilewrapper

如果不使用 iCloud，`NSFileWrapper`在 iOS 应用程序中使用样式包有什么好处吗？

似乎唯一的好处`NSFileWrapper`是您可以在Finder中双击该包以将其打开。但是，在 iOS 上，Finder 不存在。所以`NSFileWrapper`看起来有点矫枉过正，并且给代码增加了不必要的复杂性。我错过了什么吗？

# javascript - Javascript 仅显示最后一个标记

> ID：13633322
> 
> 赞同：0
> 
> 时间：2012-11-29T19:35:47.520
> 
> 标签：javascript, function, variables, closures, anonymous

以下代码从 /home.json URL 中获取一些 JSON 数据，其中包含 6 个用户的 5 个微博。但是，只显示最后 4 个标记（甚至没有显示第 5 个！！）。我花了 2 天时间来找到这个错误，但不幸的是我真的不明白为什么这不起作用。如果有人可以帮助我，我将不胜感激！

我已经通过警报测试了所有 lon/Lat 变量！他们都有适当的数据。地图应该没问题，因为显示了最后 4 个！很可能问题出在我的闭包定义上，但我真的无法理解我做错了什么..

```
var GMAPS = window.GMAPS || {};
GMAPS.mainMap = function() {
  var map;
  var infowindow = new google.maps.InfoWindow();
  var jsonObject = {};

  function addMarkers() {
    var xhr = new XMLHttpRequest();
    xhr.open( "GET", "/home.json", true );
    xhr.onreadystatechange = function () {
      if ( xhr.readyState == 4 && xhr.status == 200 ) {
        jsonObject = JSON.parse( xhr.responseText );
        for (var i=0; i<jsonObject.length; i++) {
          for (var j=0; j<jsonObject[i].microposts.length; j++) {
            (function(Name, Title, Content, Latitude, Longitude) {
              return function() {
                //alert(Name + "\n" + Title + "\n" + Content + "\n" + Latitude + "\n" + Longitude + "\n");  //<-- this works!
                var position = new google.maps.LatLng(Latitude, Longitude);
                var contentString = "<h4>" + Name.bold() + "</h4>" + "<br />" + Title.bold()
                                + "<br />" + Content;

                var marker = new google.maps.Marker({
                  position: position,
                  title: Title,
                  map: map
                });
                google.maps.event.addListener(marker, 'click', (function(marker, contentString) { 
                    return function() { 
                      infowindow.setContent(contentString); 
                      infowindow.open(map, marker); 
                    } 
                })(marker, contentString));
              };
            })(jsonObject[i].name, jsonObject[i].microposts[j].title,
               jsonObject[i].microposts[j].content,
               jsonObject[i].microposts[j].lat,
               jsonObject[i].microposts[j].lon)();
          }
        }
      }
    };
    xhr.send(null);
  }

  function createMap() {
    map = new google.maps.Map(document.getElementById('main_map'), {
      zoom: 10,
      panControl: true,
      zoomControl: true,
      zoomControlOptions: {
        style: google.maps.ZoomControlStyle.SMALL
      },
      mapTypeControl: true,
      scaleControl: true,
      streetViewControl: true,
      overviewMapControl: true,
      scrollwheel: false,
      center: new google.maps.LatLng(37.975327,23.728701),
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });
  }

  function initAddress() {
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(showPosition);
    }
    else {
      var position = new google.maps.LatLng(0, 0);
      map.setCenter(position);
    }
  }

  function showPosition(position) {
    var position = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
    map.setCenter(position);
  }

  return {

    initMap : function() {
      createMap();
      initAddress();
      addMarkers();
    }
  };
}();

document.addEventListener("DOMContentLoaded", GMAPS.mainMap.initMap, false); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T19:59:00.800

** 注意：您的 IIFE 末尾有一组不必要的额外括号。

在您的 IIFE 之前（在最里面的 for 循环内），尝试添加：

```
var jObj = jsonObject[i], mPost = jObj.microposts[j]; 
```

然后将 IIFE 的参数替换为：

```
(function(Name, Title, Content, Latitude, Longitude) {
              return function() {
                //alert(Name + "\n" + Title + "\n" + Content + "\n" + Latitude + "\n" + Longitude + "\n");  //<-- this works!
                var position = new google.maps.LatLng(Latitude, Longitude);
                var contentString = "<h4>" + Name.bold() + "</h4>" + "<br />" + Title.bold()
                                + "<br />" + Content;

                var marker = new google.maps.Marker({
                  position: position,
                  title: Title,
                  map: map
                });
                google.maps.event.addListener(marker, 'click', (function(marker, contentString) { 
                    return function() { 
                      infowindow.setContent(contentString); 
                      infowindow.open(map, marker); 
                    } 
                })(marker, contentString));
              };
            })(jObj.name, mPost.title, mPost.content, mPost.lat, mPost.lon); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T21:20:00.143

以下代码应该可以工作。我仍然不明白为什么你有额外的括号。

```
xhr.onreadystatechange = function() {
  var i = 0, j = 0;
  if ( xhr.readyState == 4 && xhr.status == 200 ) {
    jsonObject = JSON.parse( xhr.responseText );
    for (var ilen = jsonObject.length; i < ilen;) {
      for (var jObj = jsonObject[i++], jlen = jObj.microposts.length; j < jlen;) {
        var mPost = jObj.microposts[j++];
        (function(Name, Title, Content, Latitude, Longitude) {
          return function() {
            //alert(Name + "\n" + Title + "\n" + Content + "\n" + Latitude + "\n" + Longitude + "\n");  //<-- this works!
            var position = new google.maps.LatLng(Latitude, Longitude);
            var contentString = "<h4>" + Name.bold() + "</h4>" + "<br />" + Title.bold()
                            + "<br />" + Content;

            var marker = new google.maps.Marker({
              position: position,
              title: Title,
              map: map
            });
            google.maps.event.addListener(marker, 'click', (function(marker, contentString) { 
                return function() { 
                  infowindow.setContent(contentString); 
                  infowindow.open(map, marker); 
                } 
            })(marker, contentString));
          };
        })(
          jObj.name, mPost.title, mPost.content, mPost.lat, mPost.lon
        );
      }
    }
  }
}; 
```

# java - 如何从列表中获取元素 ?

> ID：13633323
> 
> 赞同：2
> 
> 时间：2012-11-29T19:35:52.447
> 
> 标签：java

在 Java 中，我有以下声明：

```
public List<File> getAllFiles(){
        return Collections.unmodifiableList(createdFiles);
    } 
```

我想访问该列表中第一个的对象（文件）。我怎样才能最好地做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T19:36:33.593

```
getAllFiles().iterator().next(); 
```

或者

```
getAllFiles().get(0); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T19:36:59.333

`File file = getAllFiles().get(0);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T19:45:15.200

记得检查列表是否为空。

```
 List<File> allFiles = getAllFiles();

 if (allFiles.size() == 0) {
   // handle this situation as you like.
 } else {
    File file = allFiles.get(0);
    // ...
 } 
```

由于您想要第一个元素，我认为您应该避免使用迭代器方法，因为根据实现，您将创建一个不必要的对象：迭代器。

# javascript - 使用 Canvas 绘制 spritesheet 时遇到错误

> ID：13633326
> 
> 赞同：1
> 
> 时间：2012-11-29T19:36:15.413
> 
> 标签：javascript, canvas

我正在通过构建一个步行人物来练习 Canvas，该人物由精灵表上的 30 个精灵组成。在[以下网站](http://sem.serialshop.nl/jelle/sprite2/index.html)上检查。

但正如你所看到的，它看起来并不流畅。我得到了 2 不能为`clearRect`和调用未定义错误的方法`drawImage`。

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:19:40.540

我检查了您网站上的代码，这是问题所在：首次运行时，您的 init function() 中的值未填充 ctx。

您的 draw() 函数在图像加载到标头时启动，该标头在加载正文之前加载。

关于某些区域的图像偏向一侧，请检查数学。很可能是您裁剪了错误的部分

编辑：这是您的脚本中应该包含的内容，它保留在 Head 标记中

```
var ctx;
var count = 0;
var x;
var y;

var img = new Image();

function draw()
{
    requestAnimationFrame(draw);

    ctx.clearRect(0, 0, 171, 192);

    x = (count % 6 ) * (934/6);
    y = Math.floor(count / 6) * 192;
    ctx.drawImage(img, x, y, 934/6, 192, 0, 0, 171, 192);
    if(count == 29)
        count = 0;
    else
        count++;
}

function init()
{
    ctx = document.getElementById('canvas01').getContext("2d");
    img.src="img/sprites.jpg";
    img.onload = draw;
} 
```

# jquery - 在方法参数中引用 jquery 对象

> ID：13633328
> 
> 赞同：0
> 
> 时间：2012-11-29T19:36:17.570
> 
> 标签：jquery

是否可以在方法参数中以某种方式引用当前的 jquery 对象/集合...

例如

```
$('#sub > :last-child').height($('#sub > :last-child').height() + (gap * -1)); 
```

我可以以某种方式更改第二个引用，还是我坚持存储在变量中。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T19:39:29.437

如果您传递一个函数，您可以获得当前值。

```
$('#sub > :last-child').height(function(i, value) {
    return value + (gap * -1);
}); 
```

[**演示**](http://jsfiddle.net/3UetA/)

# entity-framework - 在 Entity Framework 4 查询中使用存储函数

> ID：13633342
> 
> 赞同：0
> 
> 时间：2012-11-29T19:37:03.527
> 
> 标签：entity-framework, entity-framework-4, stored-functions

我的程序中有一个 Entity Framework 4 实体模型。我在 SQL Anywhere 12.0.1 数据库中定义了一个存储函数，名为`GuidToPrefix`：

```
CREATE OR REPLACE FUNCTION GuidToPrefix( ID UNIQUEIDENTIFIER ) RETURNS INT AS
BEGIN
    RETURN CAST( CAST( ID AS BINARY(4) ) AS INT )
END; 
```

按照这篇[MSDN 文章](http://msdn.microsoft.com/en-us/library/dd456847%28v=vs.100%29.aspx)中的说明，我将函数添加到我的 EDMX：

```
<Function Name="GuidToPrefix" ReturnType="int" Aggregate="false" BuiltIn="false" NiladicFunction="false" IsComposable="true" ParameterTypeSemantics="AllowImplicitConversion" Schema="DBA">
  <Parameter Name="ID" Type="uniqueidentifier" Mode="In" />
</Function> 
```

老实说，我从数据库中更新了模型，并在向导的第一个选项卡上的列表中检查了函数。我不知道这是否会有所不同，但我不明白为什么会这样。

根据文章，我需要在 C# 类中添加函数的定义。我的问题是它没有告诉我该放在哪个类中。我要添加一个全新的类吗？我是否创建一个新的 .CS 文件并执行以下操作：

```
public static DbFunctions {

    [EdmFunction( "CarSystemModel.Store", "GuidToPrefix" )]
    public static int GuidToPrefix( Guid id ) {
        throw new NotSupportedException( "Direct calls to GuidToPrefix are not supported." );
    }
} 
```

还是我把它放在实体类的一部分中？

```
partial MyEntities {

    [EdmFunction( "CarSystemModel.Store", "GuidToPrefix" )]
    public static int GuidToPrefix( Guid id ) {
        throw new NotSupportedException( "Direct calls to GuidToPrefix are not supported." );
    }
} 
```

我有两个使用此实体模型的项目。一个是类库，模型在其中定义。另一个是另一个解决方案中的另一个类库，它只是使用它。我已经尝试了上面的两个示例，并且第二个类库中的查询在两种情况下都会从编译器生成此错误：

```
The name 'GuidToPrefix' does not exist in the current context 
```

显然我做的不对。有没有人试过这个并让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T20:19:41.727

我找到了这个问题的答案。

回想一下，我在我的项目中创建了一个包含部分 MyEntities 类的文件，其中定义了实体模型：

```
partial MyEntities {

    [EdmFunction( "CarSystemModel.Store", "GuidToPrefix" )]
    public static int GuidToPrefix( Guid id ) {
        throw new NotSupportedException( "Direct calls to GuidToPrefix are not supported." );
    }
} 
```

这很好，一切都编译好了。我的问题不在这里，而是在我必须使用该功能的项目中。

在那个项目中，在一个名为 的类中`DataInterface`，我有一个方法，代码如下：

```
var query = from read in context.Reads
            from entry in context.Entries
                                 .Where( e => GuidToPrefix( read.ID ) == e.PrefixID && read.ID == e.ID )
                 ..... 
```

问题是我需要在`Where`子句中添加包含 GuidToPrefix 函数的 C# 声明的类的名称。也就是说，我需要将上面的表达式写成：

```
var query = from read in context.Reads
            from entry in context.Entries
                                 .Where( e => MyEntities.GuidToPrefix( read.ID ) == e.PrefixID && read.ID == e.ID )
                 ..... 
```

这会编译，当它运行时，它会使用`LEFT OUTER JOIN`我想要的数据库中的函数。

# android - 我的服务在一段时间后停止或暂停

> ID：13633345
> 
> 赞同：0
> 
> 时间：2012-11-29T19:37:10.677
> 
> 标签：android, service, background

我正在使用 startService() 运行服务，并且运行良好，继续运行但只运行一段时间，然后停止工作或暂停。

当我关闭我的应用程序时，调用 unbindservice 来不关闭该服务并且它运行良好。但随着时间的推移，大约 30 分钟的服务停止工作，但仍保留在正在运行的服务列表中.. 会发生什么？我不知道我是否解释得很好：s

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T19:42:20.553

如果您将服务作为后台服务启动，通常会发生这种情况。操作系统可以随时决定终止它。

[您可以通过将其设置为前台服务](http://developer.android.com/reference/android/app/Service.html#startForeground%28int,%20android.app.Notification%29)来赋予您的服务更多的“重要性” 。[您还可以选择在onStartCommand](http://developer.android.com/reference/android/app/Service.html#onStartCommand%28android.content.Intent,%20int,%20int%29)中指定所谓的重新投递标志。这是操作系统在需要时用来重新启动服务的方法，您可以让它重新传递您最初用来启动它的任何意图。

# php - 如何在 php-class 中使用特性？

> ID：13633346
> 
> 赞同：24
> 
> 时间：2012-11-29T19:37:17.567
> 
> 标签：php, oop, traits

PHP（5.4）中是否有任何函数可以将使用的特征作为数组或类似的：

```
class myClass extends movingThings {
  use bikes, tanks;

  __construct() {
    echo 'I\'m using the two traits:' . ????; // bikes, tanks
  }
} 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2014-03-07T12:37:25.613

要轻松获取使用的特征，您可以调用[class_uses()](http://php.net/class_uses)

```
$usedTraits = class_uses(MyClass);
// or
$usedTraits = class_uses($myObject); 
```

# 一般建议

在检查可用功能时，我通常建议使用`interfaces`. 要将默认功能添加到您将使用的界面`traits`。这样你也可以从类型提示中受益。

通过实现接口强制对象具有功能，然后使用特征来实现该接口的默认代码。

```
class MyClass 
    implements SomeInterface 
{
    use SomeTrait;
} 
```

然后您可以通过以下方式检查界面；

```
$myObject = new MyClass();
if ($myObject instanceof SomeInterface) {
    //...
} 
```

并且仍然使用类型提示；

```
function someFunction( SomeInterface $object )
{ 
    //...
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-29T19:43:52.347

[您可以使用ReflectionClass](http://php.net/manual/en/class.reflectionclass.php)自己编写

```
$rc = new ReflectionClass('myClass');
$count = count($rc->getTraits()); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-11-17T13:19:13.950

只是我的 2 美分 =)

```
in_array( "CLASS_NAME", class_uses($model) ) 
```

或 PHP > 5.6

```
in_array( CLASS_NAME::class, class_uses($model) ) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-10-18T09:58:40.747

`class_uses``ReflectionClass->getTraits`如果您想从子类中获取特征，则将无法使用。

例子。

```
trait A {}

class Mother {
    use A;
}

class Child extends Mother {}

var_dump(class_uses('Child'));  // empty array
var_dump(class_uses('Mother')); // has A 
```

我有这个问题，所以我编写了简单的代码来从类中获取所有特征。

```
function all_class_uses($model)
{
    $class = new ReflectionClass($model);
    $traits = $class->getTraits();
    while($parent = $class->getParentClass()) {
        $traits += $class->getTraits();
        $class = $parent;
    }
    return array_combine(array_keys($traits), array_keys($traits));
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-10-29T23:58:23.120

`class-uses(<class>)`将获得直接的特征，`<class>`但是它不会通过父类或特征的特征等方式获得所有继承的特征......

如果您需要获得一个类的所有继承特征，我建议您阅读官方文档中的评论：

[http://php.net/manual/en/function.class-uses.php](http://php.net/manual/en/function.class-uses.php)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-09-17T20:56:37.813

我希望这会有用（感谢 Maurice 的界面使用）：

```
 interface IHaveHasTrait
    {
        public function has_trait($name);
    };

    trait THaveHasTrait
    {
        public function has_trait($name)
        {
            $classes = class_parents( $this );
            $classes[] = get_class( $this );
            foreach( $classes as $class ) {
                foreach( class_uses( $class ) as $t ) {
                    if( $t === $name ) {
                        return true;
                    }
                }
            }
            return false;
        }
    };

    trait TLinkedListItem
    {
        use THaveHasTrait;
        public $next;
        public $prev;
    };

    class A implements IHaveHasTrait
    {
        use TLinkedListItem;
        public $text;

        public function __construct( $_text )
        {
            $this->text = $_text;
        }
    };

    class B extends A{};

    class C extends B{};

    class LinkedList
    {
        public function insertItem( &$item, $position=0, $relative=false )
        {
            if( is_a( $item, 'IHaveHasTrait' ) ) {
                echo $item->has_trait( 'TLinkedListItem' ) ? 'has' : 'not';
            }
        }
    };

    $a = new C('a');
    $l = new LinkedList;
    $l->insertItem($a);
    ?> 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-11-29T19:44:34.423

简短的回答：你不应该。特征几乎完全是复制和粘贴代码。您不需要知道使用了哪些特征，只需要知道特征生成的内容。

答案我不想给出：使用[ReflectionClass::getTraits](http://www.php.net/manual/en/reflectionclass.gettraits.php)。我不打算详细说明这一点。

# c# - 计算我的服务使用的内存

> ID：13633348
> 
> 赞同：0
> 
> 时间：2012-11-29T19:37:35.143
> 
> 标签：c#, web-services, web-applications, memory-management

我有一个 Web 应用程序，它使用 C# 中的下一个代码从文件中读取数据：

```
string [] split_line;
System.IO.StreamReader sr = new System.IO.StreamReader(data_file);
line = sr.ReadLine();
while (line != null)
{
    dimenc[nn] = new double[dimentions+1];
    for (int m2 = 0; m2 < dimentions; m2++)
    {
        split_line = line.Split(new Char[] { ' ', ',', '\t' });
        dimenc[nn][m2] = Convert.ToDouble(split_line[m2]);
    }
    nn = nn + 1;
    line = sr.ReadLine();
} 
```

我的本地主机有 8 gb 的内存，但是当它开始读取大数据文件时，开始使用空洞内存，达到内存不足异常。

假设一个例子，我的文件有 10 个元素和 2 个维度，这将使锯齿状数组像这样：`dimen[10][2]`通过这个定位的物理内存将是 160 字节，在较大的文件中，我可以达到 1.5 Gb 的定位物理内存但是当我从任务管理员那里查看了物理内存，它说它已使用 7.5 Gb 或更多，这怎么可能？我是否缺少一些东西来计算它已使用的内存总量？

# java - 关于Java泛型的一些问题

> ID：13633352
> 
> 赞同：2
> 
> 时间：2012-11-29T19:37:48.763
> 
> 标签：java, generics, type-mismatch

假设我有以下接口和实现类：

```
interface Foo<FooType extends Foo<FooType>> {
    FooType copy();
}

class Bar implements Foo<Bar> {
    public Bar copy() {
        return new Bar();
    }       
} 
```

如果我尝试这样做：

```
public <FooType extends Foo<FooType>> FooType getFoo() {
    return new Bar();
} 
```

我收到编译错误“类型不匹配：无法从 Bar 转换为 FooType”。**为什么？**

我可以通过重写这样的函数来“修复”这个问题：

```
@SuppressWarnings("unchecked")
public <FooType extends Foo<FooType>> FooType getFoo() {
    return (FooType) new Bar();
} 
```

但是假设我有这样的功能：

```
public <FooType extends Foo<FooType>> void printFoo(FooType foo) {
    System.out.println(foo.toString());
} 
```

如果我尝试这样做：

```
printFoo(getFoo()); 
```

我收到以下编译错误：

```
Bound mismatch: The generic method printFoo(FooType) is not applicable 
for the arguments (Foo<Foo<FooType>>). The inferred type Foo<Foo<FooType>> 
is not a valid substitute for the bounded parameter <FooType extends Foo<FooType>> 
```

**笏？**getFoo() 的返回类型实际上与 printFoo() 的参数类型相同！

这些错误还是我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T19:45:01.383

问题是，这`FooType`可能不仅仅是`Bar`. 您可以返回`FooType`.

`class NotBar implements Foo<NotBar> {`例如，如果你有

```
 obj.<NotBar>getFoo(); 
```

现在真正的论点`FooType`是`NotBar`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T00:45:46.117

知道了！感谢 Meriton 回答了这个版本的问题：

[如何用编译时泛型验证替换运行时 instanceof 检查](https://stackoverflow.com/questions/13636312/how-to-replace-run-time-instanceof-check-with-compile-time-generics-validation)

我需要通过执行以下操作来逐步通过`printFoo(getFoo())`-part 编译器：

```
public <FooType extends Foo<FooType>> void doPrint() {
    FooType foo = getFoo();
    printFoo(foo);
} 
```

然后打电话`doPrint()`。

然后一切正常。

所以，我猜即使“为什么？” 中间可能是我缺乏理解（感谢 Bhesh 清理了那部分），“WAT？” 最后是合理的，因为这确实应该可以工作...例如，由于某种原因，在上面的代码中内联“foo”的变量定义是不行的...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T19:50:02.323

问题是，使用您声明的方法：

```
public <FooType extends Foo<FooType>> FooType doGetFoo() 
```

这是一个泛型方法，表明我应该取回我指定的泛型类型。例如，如果我有一个`Bat`扩展的调用，`Foo<Bat>`我调用`instance.<Bat>doGetFoo()`它应该返回一个实例，`Bat`而不是硬编码返回一个实例，`Bar`其中不一定是泛型中指定的类的实例。如果您删除下面的泛型，您应该没问题：

```
public Foo<?> doGetFoo(){
    return new Bar();
} 
```

# c++ - 默认构造函数错误 (C++)

> ID：13633359
> 
> 赞同：2
> 
> 时间：2012-11-29T19:38:17.270
> 
> 标签：c++, constructor, compiler-errors

我已经编写了一个模板链接列表，但是当我尝试向其中添加一个对象时，我从节点构造函数中得到错误“C2512 '客户'：没有可用的适当的默认构造函数”。

代码：

```
#pragma once
#include <iostream>
using namespace std;

template <class T>
class node;

template <class T>
class l_list
{

public:
    l_list() { head = tail = NULL; }
    ~l_list();
    void add(T &obj);
    T remove(int ID);
    void print(ostream &out);

private:
    node<T> *head, *tail;
};

template <class T>
class node
{
public:
    template<class> friend class l_list;
    node() {next = NULL;}
private:
    T data;
    node *next;
};

template <class T>
l_list<T>::~l_list()
{
}

template <class T>
void l_list<T>::add(T &obj)
{
    node<T> *ptr = new node<T>;
    ptr -> data = obj;
    ptr -> next = head;
    head = ptr;

    if (tail == NULL) {tail = ptr;}
}

template <class T>
T l_list<T>::remove(int ID)
{
    int i = 0;
    node<T> * ptr = head;

    while (ptr -> data -> id != ID)
    {
        ptr = ptr -> next;
    }
}

template <class T>
void l_list<T>::print(ostream &out)
{
    int i = 0;
    node<T> *ptr = head;
    while ( ptr != NULL )
    {
        out << ptr -> data << endl;
        ptr = ptr -> next;
        i++;
    }
} 
```

以及我尝试放入列表中的对象

```
l_list<Customer> customers;
Customer bob("Bob", "25 Bob Lane", "01bob82", "M", "bob/bob/bob");
customers.add(bob); 
```

编辑以添加客户：

```
#pragma once
#include "l_list.h"
#include "Account.h"
#include <string>

using namespace std;

class Customer
{
private:
    l_list<Account> accounts;
    string name;
    string address;
    string telNo;
    string sex;
    string dob;

public:
    Customer(string name, string address, string telNo, string sex, string dob)
    {
        Customer::name = name;
        Customer::address = address;
        Customer::telNo = telNo;
        Customer::sex = sex;
        Customer::dob = dob;
    }

    void createAccount()
    {
        cout << "What type of account?";

    }

    ~Customer()
    {
    }
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T19:48:18.867

这一行：

```
node<T> *ptr = new node<T> 
```

正在尝试`T`在`node`. 由于没有默认构造函数，所以没有 compiley =P

您可以通过使用复制构造函数（您定义或使用默认构造函数，只要`T`正确遵守[三规则](http://en.wikipedia.org/wiki/Rule_of_three_%28C++_programming%29)）或定义默认构造函数来解决此问题`T`。如果我想加强构造访问，我更喜欢前者`T`

```
node<T> *ptr = new node<T>(obj); 
```

当然，您需要为`node<T>::node(const T&)`

```
class node
{
public:
    template<class> friend class l_list;

    // T-copy-ctor-based constructor
    node(const T& obj) : data(obj), next(NULL) {};

private:
    T data;
    node *next;
}; 
```

这是一个缓慢的早晨，如果我把那里搞砸了，很抱歉。=P

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T19:48:11.813

问题出在 void l_list::add(T &obj) 的函数体中，因为如果你使用 node 的默认构造函数，它也会使用成员的默认构造函数，即 T 数据，这显然是没有定义的。不要使用 node 的默认构造函数，而是定义一个 node 构造函数，它接受一个参数 T& obj 并使用引用 obj 初始化成员数据。如果您只使用指向链表中节点的指针，它应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T19:49:30.887

投诉的原因`T data;`在您的`node`班级。当您调用时`add`，它会尝试构造 a `T`，即 a `Customer`。`Customer`没有没有参数的构造函数，所以它不起作用。

你可以：

1.  添加默认构造函数（无参数）
2.  添加赋值运算符，以便您可以正确分配给`data`

或者

*   `obj`将from传递给`add`构造`node`函数并正确初始化它。

或者

*   必须`data`是一个指针并分配`Customer`要添加的新对象。

# ruby-on-rails - 如何将属性添加到现有的通知有效负载？

> ID：13633361
> 
> 赞同：8
> 
> 时间：2012-11-29T19:38:19.430
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在 Rails 通知中，我订阅了“process_action.action_controller”，并希望为有效负载添加更多属性。我怎样才能做到这一点？

我曾尝试使用 append_info_to_payload，但这似乎无济于事。

```
module AppendExceptionPayload
  module ControllerRuntime
    extend ActiveSupport::Concern

    protected 

    def append_info_to_payload(payload)
      super
      payload[:happy] = "HAPPY"
    end
  end
end 
```

订阅和上面的代码在 Rails 引擎中，所以这是我调用添加它的地方：

```
require 'append_exception_payload'

module Instrument
  class Engine < ::Rails::Engine

    ActiveSupport.on_load :action_controller do
      include AppendExceptionPayload::ControllerRuntime
    end

  end
end 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-17T07:47:07.300

提出赏金后，我自己找到了解决方案。Rails 处理得非常干净。

基本上，该`append_info_to_payload`方法正是为此而生的。

因此，为了包含会话信息和登录用户信息，我将其添加到我的`application_controller.rb`：

```
def append_info_to_payload(payload)
    super
    payload[:session] = request.session_options[:id] rescue ""
    payload[:user_id] = session[:user_id] rescue "unknown"
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T00:52:40.967

所以我跳进去查看了[process_action 方法（私有）](http://apidock.com/rails/ActionController/Instrumentation/process_action)和[append_info_to_payload 实例方法（公共）](http://apidock.com/rails/v3.2.8/ActionController/Instrumentation/append_info_to_payload)的 api，并且 proccess 操作方法似乎在其代码中调用 append_info_to_payload，如下所示：

```
ActiveSupport::Notifications.instrument("process_action.action_controller", raw_payload) do |payload|
    result = super
    payload[:status] = response.status
    append_info_to_payload(payload)
    result
  end 
```

和 append_info_to_payload 像这样工作

```
def append_info_to_payload(payload) #:nodoc:
  payload[:view_runtime] = view_runtime
end 
```

我可以建议尝试`payload[:view_runtime]`代替`payload[:happy]`或尝试使用`payload[:status]`

让我知道您的进展情况，我会尝试提供更多帮助，不幸的是，实际上没有关于这些东西的文档。

# java - Java Stack，它保留推送元素的副本而不是对它们的引用

> ID：13633362
> 
> 赞同：1
> 
> 时间：2012-11-29T19:38:22.113
> 
> 标签：java, stack

```
Stack<Animal> myStack = new Stack<Animal>();
Animal a = new Animal();
a.setValueOfAnimal(5);
myStack.push(a);
a.setValueOfAnimal(15);
System.out.println(myStack.pop().getValueOfAnimal()); 
```

在上面你会看到一个示例 main 方法。

输出将是：15。

无论如何要使堆栈中的对象安全吗？我不希望在修改“Animal a”的值时修改堆栈中的对象。

任何内置 Java 类都支持这一点吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T19:40:54.717

> 我不希望在修改“Animal a”的值时修改堆栈中的对象。

然后你必须创建`Animal`.

当您在 中添加`Animal`引用时`Stack`，您只是存储了引用的副本，它指向相同的`Animal`. 因此，如果您`Animal`使用原始引用修改您的实例，它也会被修改为`Stack`.

所以，你需要像这样修改你的代码： -

```
myStack.push(a);
a = new Animal(); // Make the reference `a` point to a new instance.
a.setValueOfAnimal(15); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T19:39:51.933

你不能，除非你添加`a = new Animal()`after `myStack.push(a);`。

您还可以做的是提供一个复制构造函数：

```
public Animal(Animal someAnimal) {
    this.value = someAnimal.value;
} 
```

然后你可以写：

```
myStack.push(new Animal(a)); //put a copy in the stack 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T19:41:54.843

*推送后的空*引用将使堆栈上的对象安全：

```
Animal a = new Animal();
a.setValueOfAnimal(5);
myStack.push(a);
a = null;  // remark here. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-20T04:32:31.630

# ssrs-2008 - 使用 URL 参数请求报告

> ID：13633365
> 
> 赞同：1
> 
> 时间：2012-11-29T19:38:25.193
> 
> 标签：ssrs-2008, reporting-services, url-parameters

我的问题与 John Ortega 先生[在这里](https://stackoverflow.com/questions/11235302/ssrs-datetime-parameter-in-url)描述的完全一样。

但是，两种建议的解决方案都对我不起作用。

如果我在报告管理器 URL 中将“Report.aspx”替换为“ReportViewer.aspx”（例如：“ [http://servername/Reports/Pages/Report.aspx?ItemPath=%2fFolder+1+Name%2fFolder+2+ Name%2fReport+Name](http://servername/Reports/Pages/Report.aspx?ItemPath=%2fFolder+1+Name%2fFolder+2+Name%2fReport+Name) ")，我得到了 404。

如果我改用 Web 服务 URL 结构（例如：“ [http://servername/Reports?/Folder](http://servername/Reports?/Folder) 1 Name/Folder 2 Name/Report Name”），我只会被重定向回我的报表服务器的主页（其中是“ [http://servername/Reports/Pages/Folder.aspx](http://servername/Reports/Pages/Folder.aspx) ”）。

所以我真的没有机会通过 URL 参数传递报告参数，因为报告本身不会出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T09:54:43.837

如果您需要跳转到同一报表服务器和目录中的任何其他报表，您可以使用“转到报表”选项而不是使用“转到 URL”。

# android - phonegap android中两个HTML页面之间的哈希导航

> ID：13633366
> 
> 赞同：0
> 
> 时间：2012-11-29T19:38:25.887
> 
> 标签：android, cordova, jquery-mobile

嗨，我为此头疼了两天。我正在学习 jQuery 和 phonegap，并在开发应用程序时面临以下问题。

我在 phonegap 应用程序中有一个简单的场景。

我有两个 HTML 页面，分别是 index.html 和 page2.html。

**index.html 有两个或多个带有 data-role="page"**的 div，例如。

```
<div data-role="page" id="login" data-theme="d" "> 
```

和

```
<div data-role="page" id="main" data-theme="d" "> 
```

page2.html 是 ex 的列表。

```
<ul id="test" data-role="listview" data-inset="true">
<li data-icon="false"><a href="index.html#main" rel="external" id="othertest">
go to main
<span class="listdetails">
</a>
</span>
</li> 
```

所以这里的问题是，当我单击它时，它会因对话框应用程序错误而崩溃。

> 发生网络错误。（文件：///android_asset/www/index.html#main）

这是我的日志猫输出。

**

> 11-30 01:01:33.296: D/DroidGap(25758): onMessage(onPageStarted,file:///android_asset/www/index.html#main) 11-30 01:01:33.296: D/Cordova(25758) ：CordovaWebViewClient.onReceivedError：错误代码=-1 描述=发生网络错误。URL=file:///android_asset/www/index.html#main 11-30 01:01:33.296: D/DroidGap(25758): onMessage(onReceivedError,{"errorCode":-1,"url":"file :///android_asset/www/index.html#main","description":"发生网络错误。"})

**

我已经尝试过 jquery 的 window.location 、 window.location.href、onPageChange() 等...

但没有任何效果。

任何解决方案来实现这一目标？

# html - Position absolute right - No scrollbar visible

> ID：13633369
> 
> 赞同：6
> 
> 时间：2012-11-29T19:38:47.143
> 
> 标签：html, css, scrollbar, css-position

When I positioning my wrapper absolute and right there is no horizontal scrollbar triggered when I shrink the window.

Example: [http://jsfiddle.net/Ue6aN/](http://jsfiddle.net/Ue6aN/)

Code:

```
<div id="wrapper"></div>

#wrapper {
 width: 400px;
 height: 400px;
 position: absolute;
 right: 20px;
 top: 0px;
 border: 1px solid red;
} 
```

If I switch right: 20px; to left: 20px; it's working, but not otherwise. Any idea how to fix that without javascript?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T19:50:03.003

Using float right would be more logical to me but you need to absolute position you could set the width or min-width of the containing element.

```
body {
    position: relative;
    height: 400px; //needs to be at least 1px
    width: 100%;
    min-width: 422px; // the width you'd like to horizontal scrollbar to appear
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T15:21:51.070

The problem is that there is no content following `#wrapper`. To get a horizontal scroll there has to be content anchored on the left edge of the document that becomes hidden when the viewport is narrowed, or said content exceeds the viewport width. Since `#wrapper` is floating right, that's impossible because it has no left-side anchor point. `:after` makes it work though.

```
#wrapper { float:right ... }

body:after {
    clear:right;
    content:' ';
    display:block;
    height:1px;
    min-width:420px
} 
```

The CSS above adds a space after the content of `body`, which is `#wrapper`. That space is at least the width of `#wrapper`'s box model, but has no float, and is anchored to the left edge of the viewport. So... as soon as its far right edge is hidden, the horizontal scrolling is triggered; thus giving the illusion that `#wrapper` is causing the scroll event.

The fiddle: [http://jsfiddle.net/jg3nH/](http://jsfiddle.net/jg3nH/)

# javascript - 另一个 div 中的 Google Maps API div

> ID：13633370
> 
> 赞同：0
> 
> 时间：2012-11-29T19:38:47.200
> 
> 标签：javascript, google-maps, html

今天我开始在我的网站中实现谷歌地图，但是我遇到了一个问题，因为为我提供的带有地图的div不能放入另一个div？！

我使用[本网站](https://developers.google.com/maps/documentation/javascript/tutorial?hl=de)上所述的代码，当我做类似的事情时

```
<div><div id="map_canvas" style="width:100%; height:100%"></div></div> 
```

它停止工作。为什么？我不希望我的地图显示在整个页面上，我希望它显示在一个普通的 div 中，我可以随时重新设置样式......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T19:41:25.350

像这样更改样式表：

```
<style type="text/css">
  #map_canvas { width : 500px; height : 500px; }
</style> 
```

并且从 div 标签中去掉内联样式表。

```
<div id="map_canvas"></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T20:00:58.830

现在你有

```
<div><div id="map_canvas" style="width:100%; height:100%"></div></div> 
```

这应该不起作用，因为您的父 div 没有`width`and `height`。当您使用`width/height`in 时`%`，该元素根据其父元素测量尺寸。如果你对你的父母应用一些宽度和高度`element/div`，即

```
<div style="width:300px;height:300px"><div id="map_canvas" style="width:100%; height:100%"></div></div> 
```

然后内部 div (map_canvas )会将宽度和高度应用于`100%`. `300px`或者，您可以删除外部 div。希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T19:42:49.817

您可以为`div` `map_canvas`. 它不需要放入另一个内部`div`来做到这一点。

因此，例如，将您的代码更改为：

```
 <div id="map_canvas"></div> 
```

和 CSS：

```
#map_canvas{
    width:400px; /* your own height here */
    height:300px;  /* your own height here */
     border:solid 1px green;  /* your own border if you like */

    /* maybe you want to position it somewhere? you can do for example */
   position:absolute; top:50px; left:50px; 

 } 
```

**更新**

显然，您还需要在父 DIVS 上设置宽度和高度。我尚未对此进行测试，但请尝试以下操作：

```
<div id="mapHolder"><div id="map_canvas" style="width:100%; height:100%"></div></div>

#mapHolder {width:100%; height:100%;} 
```

如果做不到这一点，您是否尝试过绝对大小，而不是像我在这个答案顶部的 CSS 中的 % ？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T19:46:01.527

您可以通过更改宽度和高度值来重新调整地图的大小。所以

```
<div id="map_canvas" style="width:50%; height:50%"></div> 
```

# amazon-s3 - S3 和半公共存储桶

> ID：13633375
> 
> 赞同：0
> 
> 时间：2012-11-29T19:39:20.590
> 
> 标签：amazon-s3

我正在做一些运行 Debian 的小型设备。他们需要将 S3 存储桶同步到本地文件夹。我已经安装了 S3Tools 并且 s3cmd sync 似乎是完美的工具。但是我必须提供访问凭据，这似乎非常不安全。一旦它们发货，我将不会控制这些设备，因此我需要在不提供凭据的情况下以某种方式使用该工具 - 而且我需要确保无法在存储桶中删除凭据。

有没有人知道我该怎么做？

问候，雅各布

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-10T01:21:52.767

使用 IAM。它允许创建具有预定义权限的 AWS 凭证，这些权限在您的控制之下。

因此，您将为每台设备创建一个身份。您可以自由地限制对某些存储桶、密钥的访问。

您将无法在您的设备上更新“设备”凭证（这只是您的限制），但如果您的某些凭证被泄露，您仍然可以选择通过 IAM 阻止它。

对于您的主要“根”身份，我强烈建议使用两因素身份验证（当然永远不要将其放入设备，您无法控制）。

# php - 在 Python 字典中模拟 PHP 数组

> ID：13633377
> 
> 赞同：-1
> 
> 时间：2012-11-29T19:39:36.483
> 
> 标签：php, python

将 PHP-GTK 应用程序转换为 Python，我需要一个尽可能接近 PHP 数组的字典。经过搜索和尝试，我将 dict 子类化为 myDict() 类，并实现了第一个重要功能，即能够进行这项工作：

```
dict1 = myDict()
dict1[foo1][foo2][foo3] = 1 
```

这是在 myDict() 类中实现的。

```
class myDict(dict) :

    def __missing__(self, arg) :

        self.__setitem__(arg, myDict())
        return self.__getitem__(arg) 
```

现在有一个问题。在 PHP 中，如果我尝试获取未定义的键，它会返回 Null（相当于 Python 中的 None）。在标准的 Python 字典中，它会返回一个错误。在我的 myDict 字典中，不幸的是它返回一个空的 myDict

```
toto2 = myDict()
x = toto2["a"]["b"]
print x 
```

打印显示：{} 此代码的 PHP 等效项将返回 Null，我需要上面的 Python 代码返回 None 作为 x 的值。

我还没有找到让它返回 None 的想法。因为如果`__missing__`返回 None，那么第二行会引发一个错误：NoneType 是不可订阅的。

如果有人有解决这个问题的想法，我将不胜感激，有几个月我正在寻找一种解决方案来模拟 PHP 的这种“魔力”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T19:49:36.207

假设我们可以在键不在时 `myDict`返回。然后考虑。`None``myDict``toto2["a"]["b"]`

Python 首先评估`toto2["a"]`. 如果`"a"`不在`toto2`则`toto2["a"]`返回无。接下来 Python 将评估`None["b"]`并引发一个`TypeError`.

所以你想要的行为在 Python 中是不可能的。

# ios - 链接到开发人员页面在 iPad 上不起作用

> ID：13633378
> 
> 赞同：1
> 
> 时间：2012-11-29T19:39:36.690
> 
> 标签：ios, ipad, url, hyperlink, app-store

我想要一个链接来从我的应用程序中显示我的应用程序，我目前正在使用以下 url 格式：

```
itms-apps://itunes.com/apps/developername 
```

我从这个线程得到的：

[如何链接到应用商店中的应用](https://stackoverflow.com/questions/433907/how-to-link-to-apps-on-the-app-store)

它在 iPhone 上运行良好，但在 iPad 上它不会在 App Store 应用程序中加载任何内容，它是一个空白页面。

我发现另一个问题问同样的事情，但还没有找到答案

[链接到应用商店进行更新 - iPhone 不能在 iPad 上工作？](https://stackoverflow.com/questions/8159792/link-to-app-store-for-update-works-iphone-not-on-ipad)

有人也有这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-14T17:09:15.083

Apple 刚刚公布了 appstore.com 网址，刚刚在 iOS 7 上对其进行了测试，并且它正在使用附属链接在 ipad 上运行。

[https://developer.apple.com/library/ios/qa/qa1633/_index.html](https://developer.apple.com/library/ios/qa/qa1633/_index.html)

> App Store Short Links 共有三种类型，有两种形式，一种用于 iOS 应用程序，另一种用于 Mac 应用程序：
> 
> ## 公司名称
> 
> iOS：[http](http://appstore.com/) ://appstore.com/例如[http://appstore.com/apple](http://appstore.com/apple)
> 
> Mac：[http](http://appstore.com/mac/) ://appstore.com/mac/例如[http://appstore.com/mac/apple](http://appstore.com/mac/apple)
> 
> ## 应用名称
> 
> iOS：[http](http://appstore.com/) ://appstore.com/例如[http://appstore.com/keynote](http://appstore.com/keynote)
> 
> Mac：[http](http://appstore.com/mac/) ://appstore.com/mac/例如[http://appstore.com/mac/keynote](http://appstore.com/mac/keynote)
> 
> ## 公司应用
> 
> iOS：[http](http://appstore.com/) ://appstore.com//例如[http://appstore.com/apple/keynote](http://appstore.com/apple/keynote)
> 
> Mac：[http](http://appstore.com/mac/) ://appstore.com/mac/ / 例如[http://appstore.com/mac/apple/keynote](http://appstore.com/mac/apple/keynote)
> 
> 大多数公司和应用程序都有规范的 App Store 短链接。此规范 URL 是通过更改或删除某些字符（其中许多是非法字符或在 URL 中具有特殊含义（例如，“&”））而创建的。
> 
> ## 要创建 App Store 短链接，请将以下规则应用于您的公司或应用名称：
> 
> 删除所有空格
> 
> 将所有字符转换为小写
> 
> 删除所有版权 (©)、商标 (™) 和注册商标 (®) 符号
> 
> 用“and”替换和号（“&”）
> 
> 删除大部分标点符号（参见清单 2 的集合）
> 
> 用它们的基本字符（u、a 等）替换重音字符和其他“装饰”字符（ü、å 等）
> 
> 保持所有其他字符不变。
> 
> 清单 2 必须删除的标点符号。
> 
> !¡"#$%'()*+,-./:;<=>¿?@[]^_`{|}~
> 
> 下面是一些示例来演示发生的转换。
> 
> ## 应用商店
> 
> ## 公司名称示例
> 
> Gameloft => [http://appstore.com/gameloft](http://appstore.com/gameloft)
> 
> Activision Publishing, Inc. => [http://appstore.com/activisionpublishinginc](http://appstore.com/activisionpublishinginc)
> 
> 陈氏摄影软件 => [http://appstore.com/chensphotographyandsoftware](http://appstore.com/chensphotographyandsoftware)
> 
> ## 应用名称示例
> 
> 陶笛 => [http://appstore.com/ocarina](http://appstore.com/ocarina)
> 
> 我的佩里呢？=> [http://appstore.com/wheresmyperry](http://appstore.com/wheresmyperry)
> 
> 大脑挑战™ => [http://appstore.com/brainchallenge](http://appstore.com/brainchallenge)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T20:16:15.440

好的，我设法通过从 URL 中删除应用程序部分来使其正常工作。IE

```
itms-apps://itunes.com/developername 
```

我希望这可以帮助别人。

# netbeans - 如何向现有的 netbeans 项目套件添加新语言？

> ID：13633382
> 
> 赞同：3
> 
> 时间：2012-11-29T19:40:00.273
> 
> 标签：netbeans, internationalization, resourcebundle, netbeans-platform

我在 netbeans 中有一个用于桌面应用程序的项目套件。

它支持英语和西班牙语，并且全部通过每个包中的 bundle.properties 文件。

现在我们必须添加一种新语言，我正在寻找一种快速的方法来提取所有包，将它们翻译成新语言，然后将它们放回适当的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T08:54:03.363

单击您的模块，工具-> 国际化，仅此而已。

吉尔卡

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T17:36:38.363

谢谢，但这不是很快的解决方案。我发现提取捆绑包并使用不同的工具（在本例中我使用了 crowdin.com）要快得多

# android - Android 读取/写入多条记录 NDEF NFC

> ID：13633383
> 
> 赞同：1
> 
> 时间：2012-11-29T19:40:03.853
> 
> 标签：android, nfc, ndef

我正在尝试在 NDEFMessage 中写入和读取多个记录。我的代码在这里正确吗？此外，当我阅读标签时，我的进程会自行终止。我不确定我哪里出错了..

写作部分：

```
private NdefMessage getTagAsNdef() {  
           String text123="Hello";
            //boolean addAAR = true;  
            String uniqueId = "starbucks.com";      
         byte[] uriField = uniqueId.getBytes(Charset.forName("US-ASCII"));  
         byte[] payload = new byte[uriField.length + 1];       //add 1 for the URI Prefix  
         payload[0] = 0x01;                        //prefixes http://www. to the URI  
         System.arraycopy(uriField, 0, payload, 1, uriField.length); //appends URI to payload  
         NdefRecord rtdUriRecord = new NdefRecord(  
           NdefRecord.TNF_WELL_KNOWN, NdefRecord.RTD_URI, new byte[0], payload);  
         //Wi-FI test writing code
         byte[] textbytes = text123.getBytes();
         NdefRecord textRecord = new NdefRecord(NdefRecord.TNF_WELL_KNOWN, 
                 text123.getBytes(), new byte[]{}, textbytes);

         if (android.os.Build.VERSION.SDK_INT >= android.os.Build.VERSION_CODES.ICE_CREAM_SANDWICH) {  
              // note: returns AAR for different app (couponmanager)  
              return new NdefMessage(new NdefRecord[] {  
           rtdUriRecord, textRecord, NdefRecord.createApplicationRecord("com.example.ponpon")  
         });   
         } else {  
              return new NdefMessage(new NdefRecord[] {  
                   rtdUriRecord,textRecord});  
         }  
       } 
```

阅读部分：

```
@Override
        protected void onNewIntent(Intent intent) {
            super.onNewIntent(intent);      
            SharedPreferences preferences = getSharedPreferences(PREF_FILE_NAME, MODE_PRIVATE);
            int storedPreference = preferences.getInt("storedInt", 0);

            if (NfcAdapter.ACTION_NDEF_DISCOVERED.equals(intent.getAction())) {
                NdefMessage[] messages = null;
                Parcelable[] rawMsgs = intent.getParcelableArrayExtra(NfcAdapter.EXTRA_NDEF_MESSAGES);
                if (rawMsgs != null) {
                    messages = new NdefMessage[rawMsgs.length];
                    for (int i = 0; i < rawMsgs.length; i++) {
                        messages[i] = (NdefMessage) rawMsgs[i];
                    }
                }
                if(messages[0] != null) {
                    String result="";
                    byte[] payload = messages[0].getRecords()[0].getPayload();

                    // this assumes that we get back am SOH followed by host/code
                    for (int b = 1; b<payload.length; b++) { // skip SOH
                        result += (char) payload[b];
                    }

                    //grabbing 2nd payload
                    String result2="";
                    byte[] payload2 = messages[0].getRecords()[1].getPayload();
                    for (int test = 1; test<payload2.length; test++) { // skip SOH
                        result2 += (char) payload2[test];
                        Toast.makeText(this,result2,Toast.LENGTH_SHORT).show();  

                    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T21:13:37.890

您正在跳过第一个字节，即 H。在第一条记录中，您预先添加了一个字节，您在阅读时正确跳过了该字节。

至于速度，我只是缓冲敬酒的操作系统

# facebook - 将 facebook javascript sdk 与网络工作者一起使用

> ID：13633385
> 
> 赞同：2
> 
> 时间：2012-11-29T19:40:04.093
> 
> 标签：facebook, facebook-javascript-sdk, web-worker

我有一个需要从 Graph API 查询大量数据的 Facebook 应用程序。我目前可以使用 Facebook javascript-sdk 提取所有数据，但是用户必须等待 facebook 每次返回查询（0.5-1.0 秒）。我想把这个功能放在一个javascript web worker中，这样它就可以在后台持续运行，拉取数据并将其存储在一个javascript数组中，以供用户需要时使用。

我是 javascript 网络工作者的新手，但我知道他们有限制，阻止他们访问以下内容：

*   DOM（它不是线程安全的）
*   窗口对象
*   文档对象
*   父对象

这些限制是否会阻止我在我的网络工作者中加载 Facebook Javascript-SDK 并使用它来拨打电话？

另外，我尝试使用：`importScripts("http://connect.facebook.net/en_US/all.js");`作为加载脚本的另一种方法，它给了我一个“未捕获的未定义”错误。

目前我的网络工作者在我的页面（包括用户访问令牌）之间传递数据，但我不知道如何在没有 SDK 的情况下进行 api 调用。

注意：我的应用程序仅使用 javascript，没有数据库，也没有后端服务器代码（php、ruby 等）。我需要保持这种方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-31T01:09:03.827

当您连接到 Facebook SDK 时，您应该在响应中收到一个 accessToken。

```
FB.Event.subscribe('auth.authResponseChange', function(response) {
  if (response.status === 'connected') {
    var accessToken = response.authResponse.accessToken;
  }
}); 
```

将此 accessToken 发送给您的 Web Worker：

```
var myWorker = new Worker(url);
myWorker.sendMessage({accessToken:accessToken}); 
```

现在您可以使用 XMLHttpRequest 和 Facebook graph api（在 web worker 内部）：

```
//inside your worker
onmessage = function (oEvent) {
var accessToken = oEvent.data.accessToken;
if(accessToken){
    function loaded(){
      var fbResponse = this.responseText;
      postMessage({fbData: fbResponse});
    }

    var xhr = new XMLHttpRequest();
    xhr.onload = loaded;
    if (xhr != null) {
        xhr.open('get', 'https://graph.facebook.com/me?type=normal&method=GET&access_token='+accessToken, true);
        xhr.send();
    }else {
        postMessage({error: 'XHR not supported'});
    }
}else{
    postMessage({error: 'No access token'});
}
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-12T06:48:22.860

```
curl http://connect.facebook.net/en_US/all.js -s | grep "document" -q && echo "Nope." 
```

这样您就不必实际执行此操作：它将打印“Nope”。

对不起。

也就是说：你应该`async`检查`XMLHttpRequest.open`.

# ios - 如何在我的应用程序中使用 ios 键盘上的 @ 和 .com

> ID：13633389
> 
> 赞同：0
> 
> 时间：2012-11-29T19:40:19.187
> 
> 标签：ios

如何在我的应用程序中使用 ios 键盘上的 @ 和 .com。

它似乎只有一个或另一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T19:45:18.670

如果您使用的是电子邮件键盘，您只需按住“。”即可。按钮，它将为您显示选项列表。因此，如果您希望用户输入电子邮件地址，则应使用仅限 @ 符号的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T19:44:59.200

您可以随时自定义键盘。要么完全，要么通过向现有视图添加附件视图。这里有一些很好的信息：http: [//blog.carbonfive.com/2012/03/12/customizing-the-ios-keyboard/](http://blog.carbonfive.com/2012/03/12/customizing-the-ios-keyboard/)

# glsl - 您如何访问 glsl mat4 的各个元素？

> ID：13633395
> 
> 赞同：63
> 
> 时间：2012-11-29T19:40:46.530
> 
> 标签：glsl

是否可以访问 glsl mat4 类型矩阵的各个元素？如何？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-11-29T22:11:20.323

GLSL 参考手册的第 5.6 节说您可以通过以下方式`mat4`使用样式语法访问数组元素：`operator[][]`

```
mat4 m;
m[1] = vec4(2.0); // sets the second column to all 2.0
m[0][0] = 1.0; // sets the upper left element to 1.0
m[2][3] = 2.0; // sets the 4th element of the third column to 2.0 
```

请记住，OpenGL 默认使用**列主矩阵**，这意味着访问是格式`mat[col][row]`。在示例中，`m[2][3]`将第 3 列（索引 2）的第 4 行（索引 3）设置为 2.0。在示例`m[1]=vec4(2.0)`中，它一次设置一整列（因为`m[1]`指的是第 2 列，当仅使用 ONE 索引时，这意味着 COLUMN.`m[1]`指的是 SECOND COLUMN VECTOR）。

# java - Quartz Scheduler - RAM 和 JDBC 作业存储之间的区别是什么

> ID：13633404
> 
> 赞同：8
> 
> 时间：2012-11-29T19:41:07.840
> 
> 标签：java, cron, scheduled-tasks, quartz-scheduler

我想在我的应用程序中使用 Quartz Scheduler 框架。我遇到了两种类型的 JobStore：

1) RAM 作业存储

2) JDBC 作业存储。

我想知道在哪种情况下我必须使用哪个工作商店。以及它们之间的优缺点是什么。

对此的任何想法都对我很有帮助，我很感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-29T19:47:28.703

JDBC 作业存储将有关触发的触发器和作业的信息保存在数据库中，因此：

*   如果应用程序在触发器被触发时关闭，它不会丢失触发（这取决于选择的失火指令）

*   您可以集群您的调度程序，其中每个节点使用相同的数据库

*   JDBC 作业存储相当慢

RAM 作业存储仅适用于丢失触发无关紧要的非集群应用程序。它也快得多。如果你想使用带有 RAM 作业存储的 Quartz，很可能你根本不需要 Quartz。Spring 和 EJB 都提供了运行基于时间和 CRON 的周期性作业的机制。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T19:48:48.260

RAM 作业存储非常快，但非常不稳定 - 作业无法在服务器重新启动后继续存在。

JDBC 作业存储有点慢，但由于作业位于持久存储（数据库）中，因此它们将在重新启动后继续存在。

因此，如果您只有短暂的作业计划，并且在服务器重新启动或重新部署应用程序时丢失它们是可以的，那么您可以使用 RAM 作业存储。

如果您需要确保您的作业在关闭/重新启动后仍然存在，那么您应该使用 JDBC 作业存储。

# mysql - 使用索引，使用临时，使用文件排序 - 如何解决这个问题？

> ID：13633406
> 
> 赞同：69
> 
> 时间：2012-11-29T19:41:34.043
> 
> 标签：mysql, optimization, select, temporary, filesort

我正在开发一个事件跟踪系统，它使用一些查找表以及主日志记录表。在我正在编写的报告中，可以选择一个对象来查看统计数据。该界面按重要性递减的顺序显示所有对象（即命中）。

两个表的架构（略微精简，但你明白了要点）：

```
CREATE TABLE IF NOT EXISTS `event_log` (
  `event_id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(5) DEFAULT NULL,
  `object_id` int(5) DEFAULT NULL,
  `event_date` datetime DEFAULT NULL,
  PRIMARY KEY (`event_id`),
  KEY `user_id` (`user_id`),
  KEY `object_id` (`object_id`)
);

CREATE TABLE IF NOT EXISTS `lookup_event_objects` (
  `object_id` int(11) NOT NULL AUTO_INCREMENT,
  `object_desc` varchar(255) NOT NULL,
  PRIMARY KEY (`object_id`)
); 
```

我遇到问题的查询如下。它适用于我的约 100 个条目的表，但 EXPLAIN 让我有点担心。

```
 explain SELECT 
            el.object_id, 
            leo.object_desc, 
            COUNT(el.object_id) as count_rows
        FROM 
            event_log el 
            LEFT JOIN lookup_event_objects leo ON leo.object_id = el.object_id
        GROUP BY 
            el.object_id
        ORDER BY 
            count_rows DESC,
            leo.object_desc ASC 
```

回报： `Using index; Using temporary; Using filesort`

`temporary`那么——我的架构和/或查询 MySQL 有什么问题`filesort`？还是使用 ORDER BY 可以得到优化？

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2012-11-30T05:22:28.697

好吧，[文档](http://dev.mysql.com/doc/refman/5.1/en/internal-temporary-tables.html)给出了出现“使用临时”的确切原因：

> 可以在以下条件下创建临时表：
> 
> 如果存在 ORDER BY 子句和不同的 GROUP BY 子句，或者如果 ORDER BY 或 GROUP BY 包含来自连接队列中第一个表以外的表的列，则会创建一个临时表。
> 
> DISTINCT 与 ORDER BY 结合可能需要一个临时表。
> 
> 如果使用 SQL_SMALL_RESULT 选项，MySQL 将使用内存中的临时表，除非查询还包含需要磁盘存储的元素（稍后描述）。

快速扫描显示您患有#1。

[这个 2009 年的博客](https://www.percona.com/blog/2009/03/05/what-does-using-filesort-mean-in-mysql/)说“使用文件排序”意味着无法使用索引执行排序。由于您是按计算字段排序的，所以这也是正确的。

所以，这就是“错误”。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2018-03-02T08:46:47.563

针对 MySQL 5.7 ( [src](https://dev.mysql.com/doc/refman/5.7/en/internal-temporary-tables.html) ) 更新：

> 服务器在以下条件下创建临时表：
> 
> *   对 UNION 语句的评估，稍后将描述一些例外情况。
>     
>     
> *   评估某些视图，例如使用 TEMPTABLE 算法、UNION 或聚合的视图。
>     
>     
> *   派生表的评估（FROM 子句中的子查询）。
>     
>     
> *   为子查询或半连接物化创建的表（请参阅第 8.2.2 节，“优化子查询、派生表和视图引用”）。
>     
>     
> *   评估包含 ORDER BY 子句和不同 GROUP BY 子句的语句，或者 ORDER BY 或 GROUP BY 包含来自连接队列中第一个表以外的表的列。
>     
>     
> *   结合 ORDER BY 评估 DISTINCT 可能需要一个临时表。
>     
>     
> *   对于使用 SQL_SMALL_RESULT 修饰符的查询，MySQL 使用内存临时表，除非查询还包含需要磁盘存储的元素（稍后描述）。
>     
>     
> *   为了评估从同一个表中选择和插入的 INSERT ... SELECT 语句，MySQL 创建一个内部临时表来保存来自 SELECT 的行，然后将这些行插入到目标表中。请参见第 13.2.5.1 节，“INSERT ... SELECT 语法”。
>     
>     
> *   评估多表 UPDATE 语句。
>     
>     
> *   评估 GROUP_CONCAT() 或 COUNT(DISTINCT) 表达式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-14T09:41:33.697

这些是创建临时表的以下条件。UNION 查询使用临时表。

某些视图需要临时表，例如使用 TEMPTABLE 算法评估的表，或者使用 UNION 或聚合的表。

如果存在 ORDER BY 子句和不同的 GROUP BY 子句，或者如果 ORDER BY 或 GROUP BY 包含来自连接队列中第一个表以外的表的列，则会创建一个临时表。

DISTINCT 与 ORDER BY 结合可能需要一个临时表。

如果使用 SQL_SMALL_RESULT 选项，MySQL 将使用内存中的临时表，除非查询还包含需要磁盘存储的元素（稍后描述）。

通过 mysql 访问此链接：http: [//dev.mysql.com/doc/refman/5.1/en/internal-temporary-tables.html](http://dev.mysql.com/doc/refman/5.1/en/internal-temporary-tables.html)

# cocos2d-iphone - coco2d游戏更新

> ID：13633407
> 
> 赞同：0
> 
> 时间：2012-11-29T19:41:45.793
> 
> 标签：cocos2d-iphone

在 coco2d 游戏中，每 1/60 秒调用一次更新函数。

```
 this.scheduleUpdate();

update: function (dt) { } 
```

分数标签是

```
 var scoreLabel = cc.LabelTTF.create("0", "fantasy", 20, cc.size(0, 0), cc.TEXT_ALIGNMENT_LEFT);
    scoreLabel.setPosition(cc.p(winSize.width - 80, winSize.height));
    scoreLabel.schedule(function () {
        var showingScore = parseInt(scoreLabel.getString());
        if (showingScore < b2.getUserScore()) {
            scoreLabel.setString((showingScore + 5)
                .toString());
        }
    });
    this.addChild(scoreLabel, 5); 
```

scoreLabel 多久更新一次？你如何设置一个计时器来为 scoreLabel 每 2 秒更新一次？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T21:33:29.517

您可以为此设置时间表：

```
-(void) schedule:  @SEL(selector)  interval:  ccTime  ; 
```

选择器：您要更新的函数。间隔：每次更新之间的时间间隔。

您可以先初始化 Label，然后在函数（例如“更新标签”）中更改它的属性。

# lucene - 在术语提取期间跳过 MUST_NOT 子句的术语

> ID：13633409
> 
> 赞同：0
> 
> 时间：2012-11-29T19:41:59.630
> 
> 标签：lucene

我正在使用 Lucene 3.6.1。我有`BooleanQuery`一些子句标记为`Occur.MUST_NOT`. 当我从这个查询中提取术语时，它也很高兴地提取了不能出现的术语。这是因为下面的代码`BooleanQuery.java`

```
 @Override
  public void extractTerms(Set<Term> terms) {
      for (BooleanClause clause : clauses) {
          clause.getQuery().extractTerms(terms);
      }
  } 
```

我正在使用这些术语向用户展示一组可以从查询中添加或删除的术语。如果用户已明确指定不需要某些术语或短语（例如，通过添加`-"foo bar"`到查询中），我不想向他显示这些术语。可能更有意义的是这样的代码：

```
 @Override
  public void extractTerms(Set<Term> terms) {
      for (BooleanClause clause : clauses) {
          if (!clause.isProhibited())
              clause.getQuery().extractTerms(terms);
      }
  } 
```

现有实施的设计原理是什么？什么时候有意义？假设我不想要否定项，但不知道它们出现在查询树的哪个位置，那么解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T04:51:53.980

Gene：也许你可以为此开一张 LUCENE Jira 票？

我实际上认为 extractTerms 应该按照您的建议进行。例如，如果我制作了一个使用这种方法的简单荧光笔（我以前做过），我也不想要负面部分。我猜一般这是这种方法的大多数用途的预期行为。

至少它目前的不一致，例如 SpanNotQuery 是在同一条船上，并从 extractTerms 中排除了它的“负面”部分。

# c# - Windows 8 多语言应用工具包

> ID：13633411
> 
> 赞同：0
> 
> 时间：2012-11-29T19:42:08.600
> 
> 标签：c#, .net, localization, microsoft-metro

所以我正在尝试本地化我的应用程序，但工具包似乎没有做任何事情。我一直在关注本指南：

[http://msdn.microsoft.com/en-us/library/windows/apps/xaml/jj572370.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/jj572370.aspx)

我遵循了指南，当我构建时，我在输出中得到了这个：

```
1>  Multilingual App Toolkit build started.
1>  Multilingual App Toolkit build completed successfully. 
```

但是 .xlf 文件是空的。我有“English.xlf”、“English (United Kingdom).xlf”和“Pseudo Language (Pseudo).xlf”，但其中没有任何内容。我的应用程序中有文字，用英文写的。

我不知道我做错了什么，因为没有错误消息。我还找到了这个指南：

[http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh965329.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh965329.aspx)

它甚至不使用工具包。

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T03:50:50.500

Multilingual App Toolkit 需要一个资源文件才能使用。[您是否如链接翻译 UI 资源](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh965329.aspx)中所述为您的应用文化创建了正确的资源文件？

如果您创建了该文件，则需要在此处输入字符串。在编译时，翻译器会将这些字符串复制到您选择的每个语言文件中。

之后，您将必须：

*   在每个文件中手动翻译字符串
*   使用翻译工具的自动翻译功能（很好但不完美！）
*   将文件发送给翻译人员

# java - ConvertApi提供的excel to pdf REST api如何使用？

> ID：13633414
> 
> 赞同：1
> 
> 时间：2012-11-29T19:42:14.943
> 
> 标签：java, convertapi

我打算在 ConvertApi 提供的 java 代码中使用 excel to pdf api (REST)。请分享要用于相同的代码段。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T12:31:11.040

请尝试以下代码

图书馆

```
package com.excel2pdfconvert.example;
import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.UnsupportedEncodingException;

import org.apache.http.Header;
import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.entity.mime.HttpMultipartMode;
import org.apache.http.entity.mime.MultipartEntity;
import org.apache.http.entity.mime.content.FileBody;
import org.apache.http.impl.client.DefaultHttpClient;

public class Xls2PDFConvertBean {

    private File file;
    private String outputDir;

    private String filesize;
    private String filename;

    public void setOutputDir(String outputDir) {
        this.outputDir = outputDir;
    }
    public void setExcelFile(File file) {
        this.file = file;
    }

    public String getFilesize() {
        return filesize;
    }
    public String getFilename() {
        return filename;
    }

    /**
     * Run request for page conversion
     * @return resultcode "0" in error, "1" in success
     * @throws UnsupportedEncodingException 
     */
    public String doRequest() throws UnsupportedEncodingException{

        String resultcode = "0"; 

        HttpPost httppost = new HttpPost("https://v2.convertapi.com/convert/xlsx/to/pdf");

        MultipartEntity entity = new MultipartEntity( HttpMultipartMode.BROWSER_COMPATIBLE );

        // For File parameters
        entity.addPart("file", new FileBody(file, "binary/octet-stream"));

        httppost.setEntity( entity );

        HttpClient httpclient = new DefaultHttpClient();
        try {
            HttpResponse response = httpclient.execute(httppost);
            Header rcHeader = response.getFirstHeader("result");
            if(rcHeader != null){

                resultcode = rcHeader.getValue();

                if("True".equals(resultcode)){

                    filesize = response.getFirstHeader("filesize").getValue();
                    filename = response.getFirstHeader("OutputFileName").getValue();

                    HttpEntity hentity = response.getEntity();
                    if(hentity != null){

                        InputStream istream = hentity.getContent();
                        File file = new File(outputDir+File.separator+filename);
                        FileOutputStream ostream = new FileOutputStream(file);

                        byte[] b = new byte[1024];
                        int num = 0;
                        while( (num = istream.read(b, 0, b.length)) > 0)
                            ostream.write(b, 0, num);
                        istream.close();
                        ostream.flush();
                        ostream.close();

                    }
                }
            }

        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        return resultcode;
    }

} 
```

网页

```
<%@ page contentType="text/html; charset=UTF-8" pageEncoding="UTF-8" %>
<%@ page import="com.excel2pdfconvert.example.Xls2PDFConvertBean" %>
<%@ page import="org.apache.commons.fileupload.servlet.ServletFileUpload" %>
<%@ page import="org.apache.commons.fileupload.disk.DiskFileItemFactory" %>
<%@ page import="java.util.*" %>
<%@ page import="java.io.File" %>
<%@ page import="org.apache.commons.fileupload.FileItem" %>
<%@ taglib prefix="c" uri="http://java.sun.com/jstl/core" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head><title>
    Excel2Pdf Api Demo
</title>
    <script type="text/javascript">
        function BeforeConvert() {
            document.getElementById('LabelMessage').innerHTML = 'Please wait...';
            document.getElementById('HyperLinkFile').innerHTML = '';
            document.getElementById('LabelFileSize').innerHTML = '';
            document.getElementById('LabelFileName').innerHTML = '';
        }
    </script> 
</head>
<body>

<form method="post" enctype="multipart/form-data">

    <div>
        <h1>Excel2Pdf Api Demo</h1>
        Upload Excel file:&nbsp;
        <input type="file" name="excel" />&nbsp;
        <input type="submit" name="btnConvert" value="Convert" onclick="BeforeConvert();" id="btnConvert" />
        <br />
        <br />

<% if(ServletFileUpload.isMultipartContent(request)){

    DiskFileItemFactory factory = new DiskFileItemFactory();
    ServletFileUpload upload = new ServletFileUpload(factory);
    List items = upload.parseRequest(request);

    File uploadedFile = null;
    String[] allowedExt = {"csv", "xls", "xlsx", "xlsb", "xlt", "xltx"};

    // Process the uploaded items
    Iterator iter = items.iterator();
    while (iter.hasNext()) {
        FileItem item = (FileItem) iter.next();

        if (! item.isFormField()) {

            //Check for valid excel extensions
            String fileName = item.getName();
            boolean isValid = false;
             for(String ext : allowedExt){
                 if(fileName.contains(ext)){
                    isValid = true;
                    break;
                 }
             }

             if(isValid){
                 uploadedFile = new File(application.getRealPath("/") + "/" + fileName);
                 item.write(uploadedFile);
             }
        }
    }

    if(uploadedFile == null){
        out.println("<div>Please upload file in following format: csv, xls, xlsx, xlsb, xlt, xltx");
    }else{

        Xls2PDFConvertBean xls2pdf = new Xls2PDFConvertBean();
        xls2pdf.setOutputDir(application.getRealPath("/"));
        xls2pdf.setExcelFile(uploadedFile);
        String resultcode = xls2pdf.doRequest();

        //Remove uploaded file after conversion
        uploadedFile.delete();

        if(resultcode == null || "False".equals(resultcode)){
            out.println("<div>Can not convert file</div>");
        }else{
%>
        <span id="LabelMessage">Conversion successful  </span>
        <br />
        <a id="HyperLinkFile" href="<%= xls2pdf.getFilename() %>" >Click here to open file  </a>

        <br />
        <span id="LabelFileSize">File size: <%= xls2pdf.getFilesize() %></span>
        <br />
        <span id="LabelFileName">File name: <%= xls2pdf.getFilename() %></span>
 <%
            }
        }
    }else{
%>
    <span id="LabelMessage"></span>
<%      
    }
%>

    </div>
</form>

</body>

</html> 
```

# java - SWT RowLayout：最小尺寸是多少？

> ID：13633420
> 
> 赞同：0
> 
> 时间：2012-11-29T19:42:25.843
> 
> 标签：java, layout, swt

我一定错过了一些愚蠢的东西。[文档](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/layout/RowData.html)明确指出，RowLayout 布局的RowData 对象允许您指定最小尺寸（宽度和高度），这是有道理的。但是，当底层小部件超过此大小时，大小不会增加并且小部件会被裁剪。真的是最低限度吗？

例子

```
public static void main(String[] args) {

    Display display = new Display();
    Shell shell = new Shell(display);
    shell.setText("Example");
    shell.setBounds(100, 100, 325, 200);
    shell.setLayout(new FillLayout());

    Composite comp = new Composite(shell, SWT.BORDER);
    comp.setLayout(new RowLayout(SWT.VERTICAL));

    Label label1 = new Label(comp, SWT.CENTER);
    label1.setLayoutData(new RowData(20,20));
    label1.setText("Trying with bounded rowdata...");

    Label label2 = new Label(comp, SWT.CENTER);
    label2.setText("Trying with no rowdata...");

    comp.layout(true,true); // no difference
    shell.pack();
    shell.open();

    while (!shell.isDisposed()) {
        if (!display.readAndDispatch())
            display.sleep();
    }
    display.dispose();
} 
```

结果：

![在此处输入图像描述](../Images/705e0db82a941880fe527877efcf0c2e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:12:34.257

尝试在布局上关闭包装：

```
Composite comp = new Composite(shell, SWT.BORDER);
RowLayout layout = new RowLayout(SWT.VERTICAL);
layout.pack = false;
comp.setLayout(layout); 
```

另一方面，[`GridLayout`](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&sqi=2&ved=0CC0QFjAA&url=http%3A%2F%2Fhelp.eclipse.org%2Fhelp32%2Ftopic%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fswt%2Flayout%2FGridLayout.html&ei=bZW8UKscjoiFB_SfgYAE&usg=AFQjCNFErftm2BOjct-5Gmmj_jx9KQI3mg&sig2=86n-2ax610HEVuLU5kHpuw)如果您希望控件相对于其父级调整大小但不小于最小宽度，您也可以考虑使用。最小宽度适用于`GridData`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T08:06:57.673

构造函数的javadoc`RowData(int, int)`一定是错的！如果您仔细阅读 javadoc 的标题，`RowData`据说它`RowData`用于设置的初始大小`Controls`，而不是最小值。这就是为什么你`Label`被裁剪为 20x20 像素的正方形！

# android - Activity 底部带有按钮的 ListView，带有固定的页眉和页脚

> ID：13633421
> 
> 赞同：0
> 
> 时间：2012-11-29T19:42:28.917
> 
> 标签：android, android-layout, android-listview, android-activity, android-button

我正在开发一个 Android 应用程序，我有一个看起来像[这样](http://img10.imageshack.us/img10/6118/layoutut.png)的 Activity 。我有一个具有固定位置的页眉和一个页脚，以及一个中间有可点击项目的 ListView。在 ListView 下方，我有一个按钮。

当我有一些项目时它正在工作，但是当我添加更多项目时，按钮开始消失，就像[这样](http://img43.imageshack.us/img43/726/errorhf.png)。

当我在该列表中有更多可以显示在页面中的项目时，我在列表中有一个滚动条。[如果我像这样](http://img231.imageshack.us/img231/9058/scrollm.png)向下滚动，我可以看到列表中的所有项目，但按钮是隐藏的。

在尝试在 ScrollView 中添加 ListView 之前，我遇到了很多问题，所以我知道它不起作用。由于我是 Android 开发新手，也许我的 XML 布局文件有点混乱，但我有一个父 LinearLayout，里面有两个 RelativeLayout，一个用于页眉，一个用于中间和页脚。XML 是这样的：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="match_parent" 
    android:orientation="vertical"
    android:background="#FFFFFF">

    <RelativeLayout 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" 
        android:orientation="horizontal"
        android:background="@drawable/background"
        android:gravity="center_vertical">

        <TextView
            android:id="@+id/title"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginBottom="5dp"
            android:layout_marginLeft="10dp"
            android:layout_marginTop="5dp"
            android:text="@string/baseTitle"
            android:textColor="#FFFFFF"
            android:layout_centerVertical="true"
            android:textSize="18dp"
            android:textStyle="bold"/>

        <Button 
            android:id="@+id/buttonHelp"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:background="@drawable/button_help"
            android:layout_centerVertical="true"
            android:layout_alignParentRight="true"/>

    </RelativeLayout>

    <RelativeLayout 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:layout_gravity="fill_vertical">

        <LinearLayout   
            android:id="@+id/buttonBar"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:gravity="center"
            android:background="#bdbdbd"
            android:layout_alignParentBottom="true">

            <RelativeLayout   
                android:id="@+id/bottomButtomBar"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_marginTop="5dp"
                android:layout_marginBottom="5dp"
                android:orientation="horizontal">
                <Button 
                    android:id="@+id/myGroups"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="15dp"
                    android:layout_alignParentLeft="true"
                    android:layout_centerVertical="true"
                    android:text="@string/myGroups"
                    android:gravity="center"
                    android:textSize="13dp"
                    android:textColor="#000000"
                    android:background="@layout/button_meus_grupos"/>
                <Button 
                    android:id="@+id/createGroups"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center"
                    android:layout_centerInParent="true"
                    android:text="@string/createGroups"
                    android:gravity="center"
                    android:textSize="13dp"
                    android:textColor="#000000"
                    android:background="@layout/button_criar_grupos"/>
                <Button 
                    android:id="@+id/configurations"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginRight="15dp"
                    android:layout_alignParentRight="true"
                    android:layout_centerVertical="true"
                    android:text="@string/configurations"
                    android:gravity="center"
                    android:textSize="13dp"
                    android:textColor="#000000"
                    android:background="@layout/button_configuracoes"/>
            </RelativeLayout>
        </LinearLayout>
        <LinearLayout 
            android:layout_above="@id/buttonBar"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="vertical" >
            <LinearLayout 
                    android:id="@+id/listContent"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical" >
                    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:background="#ffffff" 
                        android:orientation="vertical"
                    >
                        <RelativeLayout
                            android:id="@+id/searchBarLayout"
                            android:layout_width="fill_parent" 
                            android:layout_height="48dp"
                            android:orientation="horizontal"
                            android:background="#ffffff"
                            android:gravity="center_vertical"
                            android:clickable="true"
                        >
                            <TextView
                                android:id="@+id/myGroupsLabel"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="@string/myGroups"
                                android:layout_centerInParent="true"
                                android:textColor="#bdbdbd"
                                android:textSize="16dp"
                                android:textStyle="bold"
                            />
                            <ImageView
                                android:layout_alignParentRight="true"
                                android:layout_centerVertical="true"
                                android:layout_marginRight="15dp"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:background="@drawable/ic_search" />
                        </RelativeLayout>
                        <View android:layout_height="2dip" 
                            android:layout_width="wrap_content" 
                            android:background="#cccccc"  
                        />        
                        <ListView android:id="@+id/listview"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:textColor="#000000"
                            android:cacheColorHint="#000000"
                        />
                        <Button
                            android:id="@+id/buttonCreateGroup"
                            android:layout_width="200dp"
                            android:layout_height="wrap_content"
                            android:layout_marginBottom="20dp"
                            android:background="@layout/button_confirm"
                            android:layout_gravity="center_horizontal"
                            android:text="@string/createOneGroup"
                            android:textColor="#FFFFFF"
                            android:textSize="22dp"
                            android:layout_marginTop="15dp"
                        />
                    </LinearLayout>
            </LinearLayout>
        </LinearLayout>
    </RelativeLayout>
</LinearLayout> 
```

有没有人有关于如何保持页脚固定、向下滚动到列表末尾然后显示按钮的任何提示？我希望它看起来像按钮是列表中的最后一项。

编辑：整个 XML 已发布

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T19:53:17.210

和应该在`ListView`你应该设置的按钮中 `Button``RelativeLayout``android:layout_below="@id/listview"`

```
<RelativeLayout 
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent">

<ListView
    android:id="@+id/listview"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:cacheColorHint="#000000"
    android:textColor="#000000" />

<Button
    android:layout_below="@id/listview"
    android:id="@+id/buttonCreateGroup"
    android:layout_width="200dp"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal"
    android:layout_marginBottom="20dp"
    android:layout_marginTop="15dp"
    android:background="@layout/button_confirm"
    android:text="@string/createOneGroup"
    android:textColor="#FFFFFF"
    android:textSize="22dp" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T12:35:15.283

请按以下方式尝试：

```
<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <RelativeLayout                               //Header
       android:layout_alignParentTop="true">     
    </RelativeLayout> 

      <ListView 
         android:layout_below="@+id/header" />

    <RelativeLayout                               //Button(footer)
       android:layout_alignParentBottom="true"
       android:layout_below="@+id/listView" >      
    </RelativeLayout>  

</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T20:37:04.433

我可以达到我上面解释的确切要求的唯一方法是执行以下操作：

- 在带有列表项布局的 XML 文件中，我添加了一个带有`android:visibility="gone"`.

- 在我的自定义 ListView 适配器中，我总是在最后一个位置添加一个空对象。我只是添加一个带有标志的对象，表明它是列表中的最后一个。

- 在我在自定义适配器中重写的方法`getView()`中，我检查当前位置的对象是否具有指示它是列表中最后一个的标志。如果是这样，我将按钮可见性设置为 VISIBLE，否则我填充其他组件。

如果有人面临同样的问题并且需要我的解决方案中的一些示例代码，请在此处询问。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T05:48:09.300

试试这个：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center_vertical"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/title"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:layout_marginBottom="5dp"
            android:layout_marginLeft="10dp"
            android:layout_marginTop="5dp"
            android:text="baseTitle"
            android:textColor="#FFFFFF"
            android:textSize="18dp"
            android:textStyle="bold" />

        <Button
            android:id="@+id/buttonHelp"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_centerVertical="true"
            android:layout_gravity="center_vertical" />
    </RelativeLayout>

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="fill_vertical"
        android:orientation="vertical" >

        <LinearLayout
            android:id="@+id/buttonBar"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:gravity="center"
            android:orientation="vertical" >

            <RelativeLayout
                android:id="@+id/bottomButtomBar"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_marginBottom="5dp"
                android:layout_marginTop="5dp"
                android:orientation="horizontal" >

                <Button
                    android:id="@+id/myGroups"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:layout_centerVertical="true"
                    android:layout_marginLeft="15dp"
                    android:gravity="center"
                    android:text="myGroups"
                    android:textColor="#000000"
                    android:textSize="13dp" />

                <Button
                    android:id="@+id/createGroups"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_centerInParent="true"
                    android:layout_gravity="center"
                    android:gravity="center"
                    android:text="createGroups"
                    android:textColor="#000000"
                    android:textSize="13dp" />

                <Button
                    android:id="@+id/configurations"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentRight="true"
                    android:layout_centerVertical="true"
                    android:layout_marginRight="15dp"
                    android:gravity="center"
                    android:text="configurations"
                    android:textColor="#000000"
                    android:textSize="13dp" >
                </Button>
            </RelativeLayout>
        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_above="@id/buttonBar"
            android:orientation="vertical" >

            <LinearLayout
                android:id="@+id/listContent"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical" >

                <LinearLayout
                    xmlns:android="http://schemas.android.com/apk/res/android"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical" >

                    <RelativeLayout
                        android:id="@+id/searchBarLayout"
                        android:layout_width="fill_parent"
                        android:layout_height="48dp"
                        android:clickable="true"
                        android:gravity="center_vertical"
                        android:orientation="horizontal" >

                        <TextView
                            android:id="@+id/myGroupsLabel"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_centerInParent="true"
                            android:text="myGroups"
                            android:textColor="#bdbdbd"
                            android:textSize="16dp"
                            android:textStyle="bold" />

                        <ImageView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_alignParentRight="true"
                            android:layout_centerVertical="true"
                            android:layout_marginRight="15dp" >
                        </ImageView>
                    </RelativeLayout>

                    <ScrollView
                        android:id="@+id/scroll"
                        android:layout_width="fill_parent"
                        android:layout_height="280dip"
                        android:layout_margin="7dip"
                        android:scrollbars="none" >

                        <LinearLayout
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:orientation="vertical" >

                            <ListView
                                android:id="@+id/listview"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:cacheColorHint="#000000"
                                android:textColor="#000000" />

                            <Button
                                android:id="@+id/buttonCreateGroup"
                                android:layout_width="200dp"
                                android:layout_height="wrap_content"
                                android:layout_gravity="center_horizontal"
                                android:layout_marginBottom="20dp"
                                android:layout_marginTop="15dp"
                                android:text="createOneGroup"
                                android:textColor="#FFFFFF"
                                android:textSize="22dp" />
                        </LinearLayout>
                    </ScrollView>
                </LinearLayout>
            </LinearLayout>
        </LinearLayout>
    </RelativeLayout>

</LinearLayout> 
```

# c# - 加密字符串时重用 AES 对象是否安全？

> ID：13633423
> 
> 赞同：5
> 
> 时间：2012-11-29T19:42:38.150
> 
> 标签：c#, .net, security, aes

我在加密大量字符串的应用程序中遇到了一些性能问题。大多数 CPU 使用发生在我从名为 Encrypt() 的公共方法调用私有方法 getAes() 时：

```
public static class CryptKeeper
{
    const int HASH_SIZE = 32; //SHA256

    /// <summary>
    /// Encrypts a string message. Includes integrity checking.
    /// </summary>
    public static string Encrypt(string messageToEncrypt, string sharedSecret, string salt)
    {
        // Prepare message with hash
        var messageBytes = Encoding.UTF8.GetBytes(messageToEncrypt);
        var hashedMessageBytes = new byte[HASH_SIZE + messageBytes.Length];
        var hash = Utilities.GenerateSha256Hash(messageBytes, 0, messageBytes.Length);
        Buffer.BlockCopy(hash, 0, hashedMessageBytes, 0, HASH_SIZE);
        Buffer.BlockCopy(messageBytes, 0, hashedMessageBytes, HASH_SIZE, messageBytes.Length);

        // Encrypt message
        using (var aes = getAes(sharedSecret, Encoding.UTF8.GetBytes(salt)))
        {
            aes.GenerateIV();
            using (var encryptor = aes.CreateEncryptor())
            {
                var encryptedBytes = encryptor.TransformFinalBlock(hashedMessageBytes, 0, hashedMessageBytes.Length);
                // Add the initialization vector
                var result = new byte[aes.IV.Length + encryptedBytes.Length];
                Buffer.BlockCopy(aes.IV, 0, result, 0, aes.IV.Length);
                Buffer.BlockCopy(encryptedBytes, 0, result, aes.IV.Length, encryptedBytes.Length);
                return Convert.ToBase64String(result);
            }
        }
    }

    public static string Decrypt(string encryptedMessage, string sharedSecret, string salt)
    {
        if (encryptedMessage == null) return null;

        using (var aes = getAes(sharedSecret, Encoding.UTF8.GetBytes(salt)))
        {
            var iv = new byte[aes.IV.Length];
            Buffer.BlockCopy(Convert.FromBase64String(encryptedMessage), 0, iv, 0, iv.Length);
            aes.IV = iv;

            using (var decryptor = aes.CreateDecryptor())
            {
                var decryptedBytes = decryptor.TransformFinalBlock(Convert.FromBase64String(encryptedMessage), iv.Length, Convert.FromBase64String(encryptedMessage).Length - iv.Length);

                // Check hash
                var hash = Utilities.GenerateSha256Hash(decryptedBytes, HASH_SIZE, decryptedBytes.Length - HASH_SIZE);
                var existingHash = new byte[HASH_SIZE];
                Buffer.BlockCopy(decryptedBytes, 0, existingHash, 0, HASH_SIZE);
                if (!existingHash.compareBytesTo(hash))
                {
                    throw new CryptographicException("Message hash invalid.");
                }

                // Hash is valid, we're done
                var res = new byte[decryptedBytes.Length - HASH_SIZE];
                Buffer.BlockCopy(decryptedBytes, HASH_SIZE, res, 0, res.Length);
                return Encoding.UTF8.GetString(res);
            }
        }
    }

    private static Aes getAes(string sharedSecret, byte[] salt)
    {
        var aes = Aes.Create();
        aes.Mode = CipherMode.CBC;
        aes.Key = new Rfc2898DeriveBytes(sharedSecret, salt, 129).GetBytes(aes.KeySize / 8);
        return aes;
    }
} 
```

我试图通过缓存 AES 对象来提高性能，但我进入了不熟悉的领域：

```
public static class CryptKeeper
{
    const int HASH_SIZE = 32; //SHA256

    private static Aes aes;

    /// <summary>
    /// Encrypts a string message. Includes integrity checking.
    /// </summary>
    public static string Encrypt(string messageToEncrypt, string sharedSecret, string salt)
    {
        // unchanged
    }

    public static string Decrypt(string encryptedMessage, string sharedSecret, string salt)
    {
        // unchanged
    }

    private static Aes getAes(string sharedSecret, byte[] salt)
    {
        if (aes != null) return aes;

        var aesNew = Aes.Create();
        aesNew.Mode = CipherMode.CBC;
        aesNew.Key = new Rfc2898DeriveBytes(sharedSecret, salt, 129).GetBytes(aesNew.KeySize / 8);
        return aes = aesNew;
    }
} 
```

我收到此错误：

> 安全句柄已在 System.Runtime.InteropServices.SafeHandle.DangerousAddRef(Boolean&success) 在 System.StubHelpers.StubHelpers.SafeHandleAddRef(SafeHandle pHandle, Boolean&success) 在 System.Security.Cryptography.CapiNative.UnsafeNativeMethods.CryptGenRandom(SafeCspHandle hProv, Int32 dwLen, Byte[] pbBuffer) at System.Security.Cryptography.AesCryptoServiceProvider.GenerateIV() at Obr.Lib.CryptKeeper.Encrypt(String messageToEncrypt, String sharedSecret, String salt) in ...CryptKeeper.cs:line 28 at Obr .Lib.HtmlRenderer.renderLawCitation(RenderContext renderContext, XElement xElement) 在 ...HtmlRenderer.cs:line 1472

我知道 Encrypt() 中的 using() 语句将处理 AES 并导致它中断。除非我知道重复使用是安全的，否则我不想进一步排除故障。如果重复使用是安全的，那么最好的方法是什么？

更新：我通过保持 AES 对象更长的时间解决了性能问题。我删除了静态关键字，并使该类一次性使用。这是它现在的样子：

```
public class CryptKeeper : IDisposable
{
    const int HASH_SIZE = 32; //SHA256
    private readonly Aes aes;

    public CryptKeeper(string sharedSecret, string salt)
    {
        aes = Aes.Create();
        aes.Mode = CipherMode.CBC;
        aes.Key = new Rfc2898DeriveBytes(sharedSecret, Encoding.UTF8.GetBytes(salt), 129).GetBytes(aes.KeySize / 8);
    }

    /// <summary>
    /// Encrypts a string message. Includes integrity checking.
    /// </summary>
    public string Encrypt(string messageToEncrypt)
    {
        // Prepare message with hash
        var messageBytes = Encoding.UTF8.GetBytes(messageToEncrypt);
        var hashedMessageBytes = new byte[HASH_SIZE + messageBytes.Length];
        var hash = Utilities.GenerateSha256Hash(messageBytes, 0, messageBytes.Length);
        Buffer.BlockCopy(hash, 0, hashedMessageBytes, 0, HASH_SIZE);
        Buffer.BlockCopy(messageBytes, 0, hashedMessageBytes, HASH_SIZE, messageBytes.Length);

        // Encrypt message
        aes.GenerateIV();
        using (var encryptor = aes.CreateEncryptor())
        {
            var encryptedBytes = encryptor.TransformFinalBlock(hashedMessageBytes, 0, hashedMessageBytes.Length);
            // Add the initialization vector
            var result = new byte[aes.IV.Length + encryptedBytes.Length];
            Buffer.BlockCopy(aes.IV, 0, result, 0, aes.IV.Length);
            Buffer.BlockCopy(encryptedBytes, 0, result, aes.IV.Length, encryptedBytes.Length);
            return Convert.ToBase64String(result);
        }
    }

    public string Decrypt(string encryptedMessage)
    {
        if (encryptedMessage == null) return null;

        var iv = new byte[aes.IV.Length];
        Buffer.BlockCopy(Convert.FromBase64String(encryptedMessage), 0, iv, 0, iv.Length);
        aes.IV = iv;

        using (var decryptor = aes.CreateDecryptor())
        {
            var decryptedBytes = decryptor.TransformFinalBlock(Convert.FromBase64String(encryptedMessage), iv.Length, Convert.FromBase64String(encryptedMessage).Length - iv.Length);

            // Check hash
            var hash = Utilities.GenerateSha256Hash(decryptedBytes, HASH_SIZE, decryptedBytes.Length - HASH_SIZE);
            var existingHash = new byte[HASH_SIZE];
            Buffer.BlockCopy(decryptedBytes, 0, existingHash, 0, HASH_SIZE);
            if (!existingHash.compareBytesTo(hash))
            {
                throw new CryptographicException("Message hash invalid.");
            }

            // Hash is valid, we're done
            var res = new byte[decryptedBytes.Length - HASH_SIZE];
            Buffer.BlockCopy(decryptedBytes, HASH_SIZE, res, 0, res.Length);
            return Encoding.UTF8.GetString(res);
        }
    }

    bool disposed;

    protected virtual void Dispose(bool disposing)
    {
        if (!disposed)
        {
            if (disposing)
            {
                aes.Dispose();
            }
        }
        disposed = true;
    }

    public void Dispose()
    {
        Dispose(true);
        GC.SuppressFinalize(this);
    }
} 
```

我这样调用它：

```
using (cryptKeeper = new CryptKeeper(Repository.AppSettings["SharedSecret"], Repository.AppSettings["Salt"]))
{
    renderingReport.Rendering = renderSegmentNav(currentUser.UserOwnsProduct(productId), book, renderingReport, currentSegment);
} 
```

这极大地提高了性能。之前调用需要在其结果中构建许多加密链接的 MVC 控制器总共需要 2.7 秒。使用重用 AES 的新代码，总共需要 0.3 秒。

我可以确认代码有效并且速度快得多。我只是想确认，出于安全原因，以这种方式重用 AES 并不是一个坏主意。根据一些谷歌搜索，我每次都调用 GenerateIV() 的事实很好，而且我找不到任何说我不应该重复使用 AES 只要我喜欢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T17:56:44.063

通常，您可以重用在 Java 和 C# 中实现加密算法的对象。但是，您应该确保*始终*将加密器和解密器保持在正确的状态。除非特别指定，否则不应将这些类用于多线程目的。

请注意，您遇到速度变慢的原因是由于`Rfc2898DeriveBytes`. 这种方法是*故意慢*的。您可以重复使用从中获得的密钥，`Rfc2898DeriveBytes`但您应该确保不重复使用任何 IV，IV 应该是随机的。`Rfc2898DeriveBytes`多次调用派生字节当然没有意义。

最后，在本地缓存持有 AES 密钥的对象可能会有所帮助。首先，如果您不需要，您不需要任何额外的密钥对象，其次，AES 首先从给定的密钥计算子密钥，这需要少量时间（尽管远不及它花费的时间执行`Rfc2898DeriveBytes`）。

再说一次，如果它不必要地使您的设计复杂化，请不要这样做。优势还不够大。

# javascript - 根据字段值更改行的背景颜色

> ID：13633424
> 
> 赞同：0
> 
> 时间：2012-11-29T19:42:40.070
> 
> 标签：javascript, html, forms

我有一个 HTML 表单。我需要能够根据另一行中字段的值更改表中行的背景。

例子：

A行。字段#1值=YES

基于 YES 值

B 行。背景变为黄色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T20:01:59.063

有很多方法可以做你想做的事。看看这个[小提琴](http://jsfiddle.net/vramdhanie/SKUG2/)一个简单的例子。在文本框中键入 Yes 以查看突出显示的变化。在您的问题中提供更多信息，我可以修改示例以使其更有用。

假设您有以下 HTML：

```
<form>
<table>
    <tr>
        <td><input type="text" id="field1"/></td>
        <td>Something else</td>
    </tr>
    <tr class="rowb">
        <td>Some value</td>
        <td>Some other value</td>
    </tr>
</table>
</form> 
```

以及以下 jQuery JavaScript：

```
$(document).ready(function(){
      $("#field1").change(function(){
          $(".rowb").addClass($("#field1").val() == "Yes"?"highlight":"lowlight");
      });
 }); 
```

以及以下 CSS：

```
 .highlight{
    background-color:yellow;
}

.lowlight{
    background-color:blue;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T20:44:49.640

首先使用 id 属性给第 1 行和第 2 行一个 id

加载html时该值是否已设置为true？

如果是，则将 onLoad="changeBG" 添加到表中 如果没有，则在 feild1 上添加 onChange="changeBG" 然后添加此代码

```
<script type="text/javascript" >
    function  changeBG () {
    if(document.getElementById("feild1").getAttribute(value) == true)
       document.getElementById("rowB").setAttribute(background-color,yellow) ;
       }
</script> 
```

# jakarta-ee - Java EE CDI 基于类的注入

> ID：13633426
> 
> 赞同：5
> 
> 时间：2012-11-29T19:42:47.983
> 
> 标签：jakarta-ee, cdi

我正在阅读 Java EE CDI，但我对基于类的资源注入的工作方式感到困惑

Java EE 6 教程给出了以下示例用法：

```
@Resource(name="myMessageQueue",
                type="javax.jms.ConnectionFactory")
public class SomeMessageBean {
...
} 
```

我知道它是如何声明的，但是声明的资源应该如何在`SomeMessageBeanClass`? `myMessageQueue`注入的资源是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T20:25:22.660

`@Resource`在源自 EJB 的注释中。

它的血统可以追溯到可以注入田间的日子。在那些日子里，“注入”意味着将一些东西放入一种与每个 EJB bean 相关联的映射中。所谓的ENC（企业命名上下文）。

`InitialContext`您可以通过从EJB 内部的 when 或直接从 EJB 上下文（您也必须注入）请求“java:/comp”命名空间来访问此“映射” 。

这些天使用 ENC 似乎很少见。现场注入要方便得多。

# xml - 如何删除下面这段 xml 中的子元素？

> ID：13633428
> 
> 赞同：0
> 
> 时间：2012-11-29T19:42:48.573
> 
> 标签：xml, xslt

我想得到这个 xml 转换

```
<root> <c.head ampexmnem="dl1"><h.info><text>CALENDAR YEAR: 2012</text></h .info></c .head> </root>

<root> <dl1>CALENDAR YEAR: 2012</dl1> </root> 
```

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T19:56:39.697

那这个呢：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:template match="node()">
    <xsl:copy>
      <xsl:apply-templates/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="c.head">
    <xsl:element name="{@ampexmnem}">
      <xsl:value-of select="."/>
    </xsl:element>
  </xsl:template>

</xsl:stylesheet> 
```

当然，实际模式取决于文档的实际结构。我怀疑其中不止一个分支。

# android - 如何在android中使用包含应用内计费的自己的应用程序？

> ID：13633432
> 
> 赞同：0
> 
> 时间：2012-11-29T19:43:06.900
> 
> 标签：android, in-app

我创建了一个包含应用内计费的免费应用程序，以解锁某些功能，我需要使用它。我需要买吗？我有另一个应用程序，它不是免费软件，我在开发者控制台中介绍了我的电子邮件地址以便免费使用它，但它不适用于应用内计费。为什么？我需要购买自己的应用程序吗？:crazy: 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T19:47:52.287

你不必自己买东西:)

请参阅[测试应用内结算](http://developer.android.com/guide/google/play/billing/billing_testing.html)

# php - 基于 PHP Memcache(d) 的会话：是否应该禁用垃圾收集？

> ID：13633433
> 
> 赞同：4
> 
> 时间：2012-11-29T19:43:08.140
> 
> 标签：php, session, garbage-collection, memcached

当使用 pecl memcached（或者我猜是 memcache..）扩展时，是否应该通过将概率设置为 0 来禁用 php 的会话垃圾收集（例如：session.gc_probability / session.gc_divisor）？

由于以下原因，这可能是合乎逻辑的：

A）会话到期时间很可能通过在存储的密钥上设置到期时间来简单地存储。EG：每个会话都有其到期 ttl，并在到期时由 memcached 简单地清除。

B) 要清除 memcached 本身未清除的现有会话，memcached 扩展必须对存储在 memcache 守护程序中的所有数据进行完全转储，检查每个键以查看该键是否与定义的模式匹配，然后检查何时添加密钥，最后根据需要删除。这不太可能，原因如下： 1) 据我所知，无法确定何时将密钥添加到 memcache。只有当它到期时。2) 转储 + 解析对 memcache 实例来说会非常繁重。

再说一遍，memcache(d) pecl 扩展很可能只是禁用了 php 的会话垃圾收集？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-16T20:03:33.253

PHP ini 设置`session.gc_maxlifetime`定义会话条目的到期时间。如果您禁用此选项，您的会话将永远处于活动状态。

如果您查看 Memcached 源，很容易发现行为（即使您不懂 C）：[https://github.com/php-memcached-dev/php-memcached/blob/e781e169871fd4f14f844ce3e01860e84ec28831/php_memcached_session。 c#L325-L327](https://github.com/php-memcached-dev/php-memcached/blob/e781e169871fd4f14f844ce3e01860e84ec28831/php_memcached_session.c#L325-L327)

过期默认设置为 0，并且仅在 PHP ini 设置`session.gc_maxlifetime`设置为大于 0 的情况下设置。仅仅因为设置包含 a`gc`并不表示这与 PHP 会话垃圾收集有关。Memcached 扩展只是解释这个选项，因为它可以使用它。如果您使用 Memcached，则不需要 PHP 垃圾收集，因为它会自行清理，并且扩展本身会禁用垃圾收集。

**但是您仍然必须设置设置！**

# windows - 无法连接到 WCF 服务器端口

> ID：13633437
> 
> 赞同：0
> 
> 时间：2012-11-29T19:43:21.427
> 
> 标签：windows, wcf, tcp, port, block

我创建了一个 WCF 服务并将其部署到我的生产环境 (Windows 2008)。客户端（也是 Windows 2008）无法连接到服务器端口。我已经停止了服务器上的 Windows 防火墙服务，当我从服务器上的命令行使用 netstat 时，我可以看到端口正在侦听。我很确定这是与端口有关的问题，因为我可以 ping 服务器，但是当我尝试执行 telnet serverIP 端口时，我得到了一个错误。客户端机器可以连接到网络上的其他机器（例如数据库服务器），因此在客户端似乎不是问题。关于还有什么可能导致端口被阻塞的任何想法？

谢谢

# php - Symfony 自动加载器组件

> ID：13633441
> 
> 赞同：0
> 
> 时间：2012-11-29T19:43:34.347
> 
> 标签：php, symfony, twig, autoloader

我越来越：

> 致命错误：类“Twig_Loader_Filesystem”

```
<?php

require_once "library/Symfony/Component/ClassLoader/UniversalClassLoader.php";

use Symfony\Component\ClassLoader\UniversalClassLoader;

$loader = new UniversalClassLoader();
$loader->registerNamespace("Symfony\Component", "library/Symfony/Component");
$loader->registerPrefix("Twig_", "library/Twig");
$loader->register();

$loader = new Twig_Loader_Filesystem('templates');
$twig = new Twig_Environment($loader, array(
    'cache' => '',
));

?> 
```

Twig 文件夹位于 library 文件夹中。我是否误解了如何使用该组件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:02:41.840

1.  你确定你的路径是正确的吗？
2.  尝试使用`__DIR__ . '/library'`
3.  尝试使用[`DebugUniversalClassLoader`](https://github.com/symfony/ClassLoader/blob/master/DebugUniversalClassLoader.php)来确定问题 - 您可以捕获`RuntimeException`并查看它实际尝试加载的文件。

**编辑**：

正确的解决方案：如果你尝试加载带有前缀`Twig_`from的 PEAR 风格的类`'/library/Twig'`，你应该将它指向`'/library'`，因为`Twig_`前缀本身将被用作里面的目录名`/library`

# amazon-ec2 - amazon webservices ec2 处理器和内存使用的微定价

> ID：13633444
> 
> 赞同：2
> 
> 时间：2012-11-29T19:43:43.147
> 
> 标签：amazon-ec2

如果我有 AmazonWS EC2 微型实例，我是否也应该为内存/处理器使用付费？

我的意思是有价格：[http ://aws.amazon.com/ec2/pricing/](http://aws.amazon.com/ec2/pricing/)

微型实例的成本：每小时 0.020 美元 = 每月 14.4 美元。也就是说，如果这个实例刚刚启动。但是，如果假设处理器和内存一直加载为 100%，我会支付额外费用吗？

这还不清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T19:52:14.953

[http://calculator.s3.amazonaws.com/calc5.html](http://calculator.s3.amazonaws.com/calc5.html)

1 台 Linux 微型服务器，一个月利用率为 100% = 14.64 美元

# visual-studio-2012 - Visual Studio 2012 错误列表错误

> ID：13633445
> 
> 赞同：3
> 
> 时间：2012-11-29T19:43:47.807
> 
> 标签：visual-studio-2012

所以我有一个编译和运行良好的解决方案。

但是错误列表窗口总是被最大化（窗口中的最后一行：“已超过最大错误数。”）

它们是完全疯狂的错误消息，例如：

*   'End Function' 前面必须有一个匹配的 'Function'
*   'Try' 必须以匹配的 'End Try' 结尾
*   'If' 必须以匹配的 'End If' 结尾
*   “Catch”不能出现在“Try”语句之外。
*   语句不能出现在方法主体中。假定方法结束

当我双击任何错误时，它只会将我带到我的类文件的第一行。

我可能不是世界上最好的开发人员，但我不会像错误列表窗口所说的那样犯错误！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T16:14:26.567

我将整个类文件复制/粘贴到记事本，保存文本文件，关闭文本文件，打开文本文件并复制/粘贴回类文件中......不再有疯狂的错误列表。

经过这个过程，我发现你可以从VS中选择“另存为”，并且在“保存”按钮旁边有一个小箭头可以让你设置编码。

所以我猜这是一个编码的东西......自Visual Studio 2003以来，原始类文件一直在项目中......直到VS2012没有问题......去图！

感谢大家！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-01T14:26:47.873

重新安装系统后，这开始发生在我身上。

我认为 GoDogGo 更改文件编码的解决方案可能是有效的（我发现我在工作时混合了不同的编码）。Intellisense 显示的错误与我的源文件中的正确字符位置不匹配。

我也遇到了无法识别类型的问题，例如“Data.DataTable”。我发现我在 web.config appSetting 条目的值中包含了一个未编码的 & 符号（它是文件夹路径的一部分）。我认为编译器可能知道它，但没有将其包含在 IDE 错误列表中的可见错误列表中。

一旦我纠正了与号编码并重建，所有其他错误都消失了。

# python - 带间隙的 Python 列表遍历

> ID：13633453
> 
> 赞同：2
> 
> 时间：2012-11-29T19:44:15.393
> 
> 标签：python

嗨，我有一个多维列表，例如：

```
my_list = [[1,2,3,1,2],[1,0,3,1,2],[1,0,0,0,2],[1,0,3,0,2]] 
```

其中 0 表示两条数据之间的间隙。

我需要做的是遍历列表并跟踪每个子列表中有多少间隙并丢弃零。我认为最好的方法是将每个子列表分成有零的块，这样我最终会得到更小的整数列表和一些间隙。理想情况下，形成一个新列表，告诉我每个块的长度和间隙数（即块-1），例如：

```
new_list = [[5, 0], [[1, 3], 1], [[1, 1], 1], [[1, 1, 1], 2]] 
```

或者可能更好：

```
new_list = [[5], [1, 3], [1, 1], [1, 1, 1]] 
```

我会知道间隙等于 len(chunk)。

**编辑：** 但是，前导零和尾随零不代表间隙。即 [0,0,1,2] 表示一个连续的块。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T19:48:19.797

[`itertools.groupby()`](http://docs.python.org/2/library/itertools.html#itertools.groupby)非常适合：

```
from itertools import groupby
my_list = [[1,2,3,1,2],[1,0,3,1,2],[1,0,0,0,2],[1,0,3,0,2]]
new_list = [[len(list(g)) for k, g in groupby(inner, bool) if k] for inner in my_list] 
```

结果：

```
>>> new_list
[[5], [1, 3], [1, 1], [1, 1, 1]] 
```

结果包含每个子列表的每个非零块的长度，例如`[1,0,3,1,2]`给`[1,3]`，所以有两个块（一个间隙）。这与您的第二种输出格式相匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T23:28:25.887

这是我没有任何导入的简陋代码：

算法略长：

```
def toggle(n):
    return n != 0

def chunk_counter(L):
    """
    list -> list
    """

    chunk_list = []
    pivots = []
    for j in range(len(L)):
        if j == 0 and toggle(L[0]):
            pivots.append(j)
        elif toggle(L[j]) and toggle(L[j]) != toggle(L[j-1]):
            pivots.append(j)

    for m in range(len(pivots)):
        k = 0
        if m == len(pivots)-1:
            bound = len(L)
        else:
            bound = pivots[m+1]

        p = 0
        while p in range(bound - pivots[m]):
            if toggle(L[pivots[m] + p]):
                    k += 1
                    p += 1
            else:
                p += 1
        chunk_list.append(k)

    return chunk_list        

    def chunks(L):
    """
    (list of lists) -> list of lists
    """

    new_list = []
    for i in range(len(L)):
        new_list.append(chunk_counter(L[i]))

    return new_list 
```

因此，您可以尝试`chunks()`列表中的功能：

```
>>> L = [[1,2,3,1,2],[1,0,3,1,2],[1,0,0,0,2],[1,0,3,0,2], [0,0,1,2]]
>>> chunks(L)
[[5], [1, 3], [1, 1], [1, 1, 1], [2]] 
```

这是一个递归定义（替代块计数器）：

```
 counter_list = []
def counter(L):
    k = 0
    while(k < len(L) and L[k] != 0):
        k +=1
    counter_list.append(k)
    if k == len(L):
        print counter_list
    else:
    counter(L[k+1:]) 
```

# android - 是否可以将小部件附加到 Android 背景？

> ID：13633455
> 
> 赞同：0
> 
> 时间：2012-11-29T19:44:28.717
> 
> 标签：android, widget

我想知道是否可以将小部件附加到主要的 Android 背景/壁纸/桌面？

我想开发类似时钟的东西，实际上它是一个非常简单的小部件，有三个按钮。这与另一个桌面小部件完全不同，我所看到的所有小部件都像 Android 壁纸的定制，或者 Android 解锁器的定制，但这是相当不同的。

如果可能的话，你知道一些示例代码源吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T19:52:48.693

不确定“背景/壁纸/桌面”的真正含义，因为“背景”的术语过于宽泛，“壁纸”可能是静态位图或动态**壁纸**，“桌面”在 Android 上没有任何意义（您是不是指的是 Launcher） ？）。如果您的意思是动态壁纸，那么您无法在启动器上拥有动态壁纸的全部功能，但如果“三个按钮”意味着您希望允许用户点击某个区域并对此做出反应，那么这应该不是一个大问题 -您可以`onTouchEvent()`用来接收用户的点击并采取相应的行动。如果您的意思是 Launcher，那么，“是的”。对于任何其他选项“否”或“很可能否”

# jquery - 的 jQuery click() 事件未触发

> ID：13633457
> 
> 赞同：2
> 
> 时间：2012-11-29T19:44:34.110
> 
> 标签：jquery, asp.net, onclick

我有一个 ASP.NET 呈现的复选框。单击时，我希望 jQuery 捕获事件，但由于某种原因它不起作用。

到目前为止，这就是我正在做的事情：

**ASP.NET**

```
<table>
 <tr>
  <td>
   <asp:CheckBox runat="server" ClientIDMode="Static" 
                 id="testcb" name="testcb" />
  </td>
 </tr>
</table> 
```

**jQuery**

```
$("#testcb").click(function () {
    if ($(this).is(':checked')) alert("checked");
}); 
```

以下是来自浏览器的源代码：

```
<tr>
 <td>
  <span name="testcb">
   <input id="testcb" type="checkbox" 
          name="ctl00$ctl00$bodyContent$phMainContent$testcb">
  </span>
 </td>
</tr> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T21:43:08.697

我相信这个问题很可能是在渲染相关元素之前触发了您的 jQuery 脚本。

尝试以下操作：

```
<script type="text/javascript">
  $(document).on('ready', function () {
      $("#testcb").on('click', function () {
          var $cb = $(this);
          if ($cb.is(':checked')) {
              alert("checked");
          }
      });
  });
</script> 
```

如果没有该`$(document).on('ready' ...`部分，则无法保证文档在`.click()`绑定之前在浏览器中完全呈现。此外，`.on()`即使在被调用之前不存在的元素上也应该工作（类似于`.live()`以前版本的 jQuery 中的旧函数）。

请以[这个 jsFiddle](http://jsfiddle.net/TroyAlford/9za2p/2/)为例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T20:12:56.147

你可以试试这个：

```
$(document).ready(function() {
  $("#testcb").click(function(){
    if ($(this).attr("checked") == "checked"){
      alert("checked");
    } else {
      alert("unchecked");
    }
  });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T19:46:23.340

由于 ASP 复选框实际上解析为跨度和输入，您可能想要检查复选框的第一个子项：

```
$("#testcb").click(function () {
        if ($(this).children(':first').is(':checked')) alert("checked");
 }); 
```

编辑：

我通常在复选框的声明中设置一个 onclick，所以我不确定这是否可行，但试试这个：

```
$("#testcb").children(':first').click(function () {
        alert('fire!');
        if ($(this).is(':checked')) alert("checked");
 }); 
```

# mysql - MySQL - 如果 id 存在于另一个表中，则插入字段

> ID：13633461
> 
> 赞同：1
> 
> 时间：2012-11-29T19:44:39.040
> 
> 标签：mysql, phpmyadmin

我有两张表，一张`product_text`带有产品名称、描述和类别。另一个叫`product_price`与产品`selling_price`和`cost_price`。

我想`product_price`用通用值更新表，例如`cost_price`as`0.01`和`selling_price`as`0.01`

`product_price`对于表中存在的每一行，我需要以某种方式将此信息插入到表`product_text`中。

例如，如果我有：

```
id name     description category
1  example  example     hats
2  example2 example2    socks 
```

在`product_text`表中，我想插入：

```
id selling_price cost_price
1  0.01          0.01
2  0.01          0.01 
```

到`product_price`表中。

我想为一百万个项目执行此操作，因此需要一种有效的方法。

请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T19:47:43.557

```
insert into product_price (id, selling_price, cost_price)
select id, 0.01, 0.01 from product_text 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T19:51:15.913

您可以像这样在连接中更新：

```
UPDATE product_price AS pp
INNER JOIN product_text AS pt ON pp.id = pt.id
SET pp.cost_price = 0.01, pp.selling_price = 0.01 
```

请注意，查看您的表架构，这些不仅仅是一个表似乎没有意义。

# asp.net-mvc-3 - MVC3 telerik gird jquery检查网格是否有行

> ID：13633463
> 
> 赞同：0
> 
> 时间：2012-11-29T19:44:40.423
> 
> 标签：asp.net-mvc-3, telerik-grid

单击时我的页面上有一个按钮 我想检查我的网格是否有行

```
 function CheckBusinessLicense() {
            var data = $('#License').data('tGrid');            
            var tr = JSON.stringify(data);
            alert(tr);
        } 
```

但这些返回一串信息。如何查找我的网格是否有数据或行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T19:53:39.613

几天前我遇到了同样的问题。这就是我想出的。

```
var grid = $("#License").data("tGrid");
if (grid.data.length != 0)
    alert(grid.data.length); 
```

享受。

# ios - NSURL 响应阻止特殊字符

> ID：13633465
> 
> 赞同：-1
> 
> 时间：2012-11-29T19:44:54.550
> 
> 标签：ios, objective-c, nsurlconnection

我设置了一个 NSURLConnection，但是当它返回的数据是 ÆØÅ fx。响应数据变为（空）？

```
id String = [[NSString alloc] initWithData:connectionData encoding:NSUTF8StringEncoding]; 
```

这是保存响应的行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:00:01.113

当您返回 NSData 响应时，您需要使用适当的编码将其转换为 NSString（UTF8 应该适用于大多数情况）。如果 UTF8 不起作用，您可以尝试 ISO Latin1 编码。

# ios - 文本字段的 Pickerview

> ID：13633476
> 
> 赞同：1
> 
> 时间：2012-11-29T19:45:48.933
> 
> 标签：ios, datepicker, tabbar

我有这段代码，它在用户选择文本字段以显示日期选择器时触发的操作中：

```
 pickerViewPopup = [[UIActionSheet alloc] initWithTitle:nil delegate:nil cancelButtonTitle:nil destructiveButtonTitle:nil otherButtonTitles:nil];

    pickerView = [[UIDatePicker alloc] initWithFrame:CGRectMake(0, 44, 0, 0)];
    pickerView.datePickerMode = UIDatePickerModeDateAndTime;
    pickerView.hidden = NO;
    pickerView.date = [NSDate date];

    UIToolbar *pickerToolbar = [[UIToolbar alloc]initWithFrame:CGRectMake(0, 0, 320, 44)];
    pickerToolbar.barStyle = UIBarStyleBlackTranslucent;
    [pickerToolbar sizeToFit];

    NSMutableArray *barItems = [[NSMutableArray alloc] init];

    UIBarButtonItem *flexSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:self action:nil];
    [barItems addObject:flexSpace];

    UIBarButtonItem *doneBtn = [[UIBarButtonItem alloc] initWithTitle:@"Done" style:UIBarButtonItemStyleDone target:self action:@selector(doneButtonPressed:)];
    [barItems addObject:doneBtn];

    [pickerToolbar setItems:barItems animated:YES];

    [pickerViewPopup addSubview:pickerToolbar];
    [pickerViewPopup addSubview:pickerView];
    [pickerViewPopup showFromTabBar:self.tabBarController.tabBar];
    [pickerViewPopup setBounds:CGRectMake(0,0,320, 500)]; 
```

我在带有用于导航的标签栏的应用程序中使用此代码。现在我想在没有它的应用程序中使用它，但是当进程到达时`[pickerViewPopup showFromTabBar:self.tabBarController.tabBar];`它会崩溃。

关于如何修复它的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T19:50:09.010

使用以下之一，

```
– showFromToolbar:
– showInView:
– showFromBarButtonItem:animated:
– showFromRect:inView:animated: 
```

例如：-

```
[pickerViewPopup showFromToolbar:pickerToolbar]; 
```

问题是您没有标签栏，并且您正在尝试访问标签栏对象以从中显示选择器。由于 tabbar 对你来说是 nil ，所以它会崩溃。

有关更多详细信息[，请查看苹果文档。](http://developer.apple.com/library/ios/documentation/uikit/reference/UIActionSheet_Class/Reference/Reference.html#//apple_ref/occ/instm/UIActionSheet/showFromToolbar%3a)

# c# - 计算最接近给定数字的数字之和

> ID：13633478
> 
> 赞同：2
> 
> 时间：2012-11-29T19:45:50.590
> 
> 标签：c#, arrays, algorithm, sum

我想找出在 C# 中执行此操作的最佳方法是什么：我有一组让我们说 20 个数字，然后是一个额外的变量。我想得到最接近给定变量的数字的总和。可以说，我有 1.1、1.5、1.7、1.9、2.2、3.1、3.2、1,5、4.5、4.1。然后附加变量的值为5。我想得到数组中最接近给定数字的一些数字的总和，一旦我得到那个数字，就从列表中删除这些数字并将它们添加到一个新的数组。欢迎每条评论。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T20:31:36.657

您正在描述**[Subset Sum Problem](http://en.wikipedia.org/wiki/Subset_sum_problem)**的优化问题。

问题是[NP-Complete](http://en.wikipedia.org/wiki/NP-complete)，因此没有已知的多项式解决方案。

但是，由于输入规模相当小 -**检查所有子集**的指数解决方案是可行的，因为只有 2^20 ~= 1000000（实际上多一点，但足够接近估计运行时间）

伪代码应该是这样的：

```
getClosestSum(list,sum,number):
  if (list is empty):
      return sum
  candidate1 <- getClosest(list[1:],sum,number)
  candidate2 <- getClosest(list[1:],sum+list[0],number)
  if (abs(number-candidate1) < abs(number-candidate2)):
      return candidate1
  else:
      return candidate2 
```

# mysql - MySQL：在时间戳行之间转移数据

> ID：13633479
> 
> 赞同：0
> 
> 时间：2012-11-29T19:45:50.183
> 
> 标签：mysql

我有一张看起来像这样的桌子：

```
mysql> explain test_table;
+---------------------+-------------+------+-----+---------+-------+
| Field               | Type        | Null | Key | Default | Extra |
+---------------------+-------------+------+-----+---------+-------+
| timestamp           | datetime    | NO   | PRI | NULL    |       |
| id                  | varchar(64) | NO   | PRI | NULL    |       |
| px_last             | float       | NO   |     | NULL    |       |
| twap                | float       | YES  |     | NULL    |       |
+---------------------+-------------+------+-----+---------+-------+ 
```

对于给定的符号和时间戳，我想将字段的值`twap`向后移动一个时间步。

这张表：

```
mysql> select * from test_table;
+---------------------+-------+---------+-------+
| timestamp           | id    | px_last | twap  |
+---------------------+-------+---------+-------+
| 2011-01-01 00:00:00 | apple |     101 | 101.1 |
| 2011-01-01 00:00:00 | pear  |      50 |  50.1 |
| 2011-01-02 00:00:00 | apple |     102 | 112.8 |
| 2011-01-02 00:00:00 | pear  |      51 |  57.3 |
| 2011-01-03 00:00:00 | pear  |      52 |  59.1 |
| 2011-01-03 00:00:00 | apple |     103 | 104.1 |
+---------------------+-------+---------+-------+ 
```

最终应该是这样的：

```
mysql> select * from test_table;
+---------------------+-------+---------+-------+
| timestamp           | id    | px_last | twap  |
+---------------------+-------+---------+-------+
| 2011-01-01 00:00:00 | apple |     101 | 112.8 |
| 2011-01-01 00:00:00 | pear  |      50 |  57.3 |
| 2011-01-02 00:00:00 | apple |     102 | 104.1 |
| 2011-01-02 00:00:00 | pear  |      51 |  59.1 |
| 2011-01-03 00:00:00 | pear  |      52 | NULL  |
| 2011-01-03 00:00:00 | apple |     103 | NULL  |
+---------------------+-------+---------+-------+ 
```

我的第一种方法（使用这个例子：[How to number rows...](http://www.xaprb.com/blog/2006/12/02/how-to-number-rows-in-mysql/)）是在每个符号中创建一个行号 (1, 2....n)，然后将行号、符号和 twap 复制到一个临时表中，将临时表中每一行的行号减少1，然后将数据复制回原始表。

有没有办法在不创建临时表的情况下做到这一点？该表很大，超过 5000 万行并且还在增长，因此找到小于给定时间戳的最大时间戳效率不够高。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:22:23.317

你可以写：

```
UPDATE test_table tt1
   SET tt1.twap =
        ( SELECT tt2.twap
            FROM ( SELECT timestamp,
                          id,
                          twap
                     FROM test_table
                 ) tt2
           WHERE tt2.timestamp = DATE_ADD(tt1.timestamp, INTERVAL 1 DAY)
             AND tt2.id = tt1.id
        )
; 
```

从技术上讲，这*确实*创建了一个临时表（作为 dreaded 的一种解决方法[`ERROR 1093 (HY000): You can't specify target table 'tt1' for update in FROM clause`](https://www.google.com/search?q=%22ERROR+1093+%28HY000%29%3A+You+can%27t+specify+target+table+%27%2a%27+for+update+in+FROM+clause%22)），但至少它都由该内部子查询隐式处理，而不是要求您创建一个作为单独的步骤。

对于一张大表，我不希望它表现得很好，但是您可以通过一次仅处理一个时间范围将其分解为较小的更新（前提是您从最早的时间范围开始并向前移动，这样您永远不要覆盖您将要使用的数据）。您的个人陈述将如下所示：

```
UPDATE test_table tt1
   SET tt1.twap =
        ( SELECT tt2.twap
            FROM ( SELECT timestamp,
                          id,
                          twap
                     FROM test_table
                    WHERE timestamp BETWEEN TIMESTAMP '2011-01-02 00:00:00'
                                        AND TIMESTAMP '2011-02-01 23:59:59'
                 ) tt2
           WHERE tt2.timestamp = DATE_ADD(tt1.timestamp, INTERVAL 1 DAY)
             AND tt2.id = tt1.id
        )
  WHERE tt1.timestamp BETWEEN TIMESTAMP '2011-01-01 00:00:00'
                          AND TIMESTAMP '2011-01-31 23:59:59'
; 
```

# php - 试图让 PHP 复选框保存 MySQL 表中的数据

> ID：13633481
> 
> 赞同：2
> 
> 时间：2012-11-29T19:45:53.737
> 
> 标签：php, mysql, database, checkbox

我必须为作业进行基于 Web 的结帐并遇到问题，我导入了一个数据库并在表格中设置了数据，并在其旁边添加了复选框。我需要使用会话将参考号（首先存储在数组中）带到另一个页面上。通过使用 var_dump 我似乎无法从表中选择任何内容。代码：

按钮代码

```
<p><tr>
<input type="submit" name="Select" id="Select" value="Add Selected To Cart"/>  
</tr></p> 
```

访问数据库代码（安全值已更改）

```
<?php
Accesses database
$con=pg_connect("host=hostname port=portnumbers
    dbname=name user=user password=password");
    if (!$con)
    {
        die('Could not connect to database');
    }
?> 
```

数据库展示

```
//Creates table
echo "<table border='1'>\n<thead>\n<tr>\n";
echo "<th>Title</th>
<th>Platform</th>
<th>Description</th>
<th>Price</th>
<th>Buy</th>\n";

while($row = pg_fetch_array($res)){
echo"<tr>";
echo "<td>" . $row['1'] . "</td>";
echo "<td>" . $row['2'] . "</td>";
echo "<td>" . $row['3'] . "</td>";
echo "<td>" . $row['4'] . "</td>";
echo '<td><input type="checkbox" name="selected[]" value="' . $row['0'] .  '" /></td>';      
  echo"</tr>";    
  }

echo"</table>";
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:06:23.857

好吧，我认为您可以按照以下方式进行操作，因为您正在尝试改进购物车：

```
//Use the `$_SESSION` var to hold the values
foreach ($_POST['selected'] as $item)
    $_SESSION['cart'][$item] = $item; 
```

由于项目的 id 将被索引，因此每次执行提交时：

*   如果该项目存在，将被替换
*   如果该项目不存在，将被添加

为了删除项目，您应该使用“查看购物车”页面，然后显示项目：

```
foreach ($_SESSION['cart'] as $item)
    echo '<a href="delete-item?id=' . $item . '">' . $item . '</a>'; 
```

# django - 分组外键相关的表单字段

> ID：13633484
> 
> 赞同：0
> 
> 时间：2012-11-29T19:46:04.893
> 
> 标签：django, django-forms, field

我有这两个模型

```
class Event(models.Model):
event_name=models.CharField("Event Name",max_length=255)
category = models.ManyToManyField(SubCategory)
def __unicode__(self):
    return self.event_name

class Category(models.Model):
   category_name= models.CharField(max_length=255)
   def __unicode__(self):
       return self.category_name

class SubCategory(models.Model):
    parent_category=models.ForeignKey(Category)
    category_name=models.CharField(max_length=255)
    def __unicode__(self):
        return self.category_name 
```

在我的 form.py

```
class EventForm(forms.ModelForm):
class Meta:
    model=Event

def __init__(self, *args, **kwargs):

    super(EventForm, self).__init__(*args, **kwargs)

    self.fields["category"].widget = CheckboxSelectMultiple()

    self.fields["category"].queryset = SubCategory.objects.all() 
```

我创建了我的模型的一种形式，`EventForm`并且子类别显示为复选框，就像我想要的那样。唯一的问题是，我想根据各自的父类别列出子类别复选框，但不知道该怎么做。任何人都可以帮助我如何做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T20:06:50.453

我建议使用 ManyToMany 字段而不是 ForeignKey in `class SubCategory`。

# ssis - 在 SQL Server 上的包存储中移动 BAM SSIS 包

> ID：13633486
> 
> 赞同：1
> 
> 时间：2012-11-29T19:46:06.830
> 
> 标签：ssis, biztalk, biztalk-bam

这会破坏 BAM，是否可以再次修复它，可能通过更新任何可以指向新位置的配置文件？

这样的配置文件会在哪里假设这是它可能的结构？

# google-api - 获取当前的 Google 用户电子邮件并从 Google 注销

> ID：13633487
> 
> 赞同：0
> 
> 时间：2012-11-29T19:46:07.250
> 
> 标签：google-api, oauth-2.0, google-oauth

我有一个使用 Google Drive 的 Web 应用程序。为了让用户更容易集成他的帐户（在这个 Web 应用程序中，这样对客户端来说会更容易），我想有两个链接进行身份验证：

将用户发送到授权页面的当前用户电子邮件的链接。自动从 Google 注销当前用户（如果有）并将用户发送到授权页面（在本例中为登录页面）的链接。

为了实现这一点，我需要： - 当前的 Google 用户电子邮件 - 注销当前的 Google 用户

我真的认为这是不可能的，但是在我的应用程序获得用户授权之前，我可以执行此操作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T23:28:37.557

只有在用户授权您之后，您才能提取用户的电子邮件地址，因此这是不可能的。

您可以使用 OpenID 检索用户的电子邮件地址，或者如果他们未登录，则将他们重定向到 Google 登录页面。不过，他们必须授权您的应用程序，因此您无法将他们引导到不同的地方，直到之后他们已经登录。在[https://developers.google.com/accounts/docs/OpenID#Interaction](https://developers.google.com/accounts/docs/OpenID#Interaction)上有登录流程的详细信息。

# java - 我可以将 unix 权限存储在 zip 文件中（使用 apache ant 构建）吗？

> ID：13633488
> 
> 赞同：13
> 
> 时间：2012-11-29T19:46:10.387
> 
> 标签：java, linux, zip

我正在为 Java 应用程序构建一个 linux 安装程序，最后我使用 ant 将 install.jar 和 setup.sh 放入一个 zip 文件中。

这个想法是用户解压缩 zip 文件，然后运行 ​​setup.sh 但问题是他们总是需要先 chmod setup.sh 给自己执行权限。

我想删除这一步，我不确定问题部分是否是：

1.  我在 Windows 上构建
2.  我用 ant zip 任务构建
3.  或者 zips 不能 presreve 权限，并且总是在没有 x 权限的情况下解压缩。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2014-01-16T17:50:09.347

您不必切换到 tar 文件。我不知道为什么不了解 Ant 的人会在这个话题上提供建议。

使用 zipfileset 的 filemode 参数。记录在[http://ant.apache.org/manual/Types/zipfileset.html](http://ant.apache.org/manual/Types/zipfileset.html)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-29T20:03:44.710

~~您不能将 Linux/Unix 文件权限存储在 ZIP 文件中。~~

**使用 ZIP 标头内的“外部属性”字段进行编辑（在注释后）**，这些属性可以存储在 ZIP 文件中。GNU`unzip`显然能够读取该附加字段并恢复文件权限。^(我不确定这是什么时候添加到 ZIP 格式的，因为早期版本 - 来自 MS-DOS 世界 - 不支持这个。)

TAR 格式——作为“原生”Unix/Linux 格式——被设计为包含文件属性，Ant 可以创建 TAR 文件，在所有 Linux/Unix 操作系统中保留属性。

```
<tar 压缩="gzip" destfile="my-archive.tgz">
  <tarfileset mode="544" dir="dir_with_shell_scripts">
     <include name="*.sh"/>
  </tarfileset>
</tar>

```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T20:04:54.993

我认为您可以使用[Apache Commons Compress](http://commons.apache.org/compress/zip.html)做到这一点。

第一段：

> 访问内部和外部属性（某些 zip 实现用于存储 Unix 权限）。

看看[API](http://commons.apache.org/compress/apidocs/org/apache/commons/compress/archivers/zip/ZipArchiveEntry.html)并寻找`setUnixMode()`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-12-21T00:53:32.437

要扩展 Blaine 的答案，您可以使用[<zipfileset>](http://ant.apache.org/manual/Types/zipfileset.html)子元素来指定权限：

```
<zip destfile="build/MyApplication.zip" encoding="UTF-8">

    <zipfileset dir="${content-dir}" encoding="UTF-8"
        includes="**/setup.sh" filemode="755"/>

    <zipfileset dir="${content-dir}" encoding="UTF-8"
        excludes="**/setup.sh"/>

</zip> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-09-19T23:44:38.070

现代 Linux 发行版中的 zip/unzip 将保留文件权限。但是您需要确保 Windows 中的 zip 支持这一点。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-29T20:01:19.683

如果您使用 tar 文件而不是 zip 文件，它应该为您保留权限。文件的所有者和组可能不匹配，但权限位会匹配。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-01-08T08:30:17.380

```
<shellscript shell="sh" dir="abc" failonerror="true">
            zip -ry abc.zip *
</shellscript> 
```

上面的 ant 脚本调用 shell 脚本来创建 zip 存档，其中的权限保存得非常好。它适用于 Ant 1.7 及更高版本。但是我没有尝试在 Windows 上验证运行这个 ant 脚本。这在mac上效果很好。

# jsf-2 - 如何根据另一个 bean 属性的值验证 Primefaces inputText？

> ID：13633491
> 
> 赞同：3
> 
> 时间：2012-11-29T19:46:21.013
> 
> 标签：jsf-2, primefaces

我有一个`<p:inputText>`我想根据另一个 bean 属性（不包含 的值`<p:inputText>`）的值来验证的值。就像该 bean 属性是否`true`验证通过，如果`false`验证失败。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T19:53:38.380

如果您在谈论`required="true"`，只需让它绑定到该属性即可。

```
<p:inputText ... required="#{not bean.property}" /> 
```

或者，如果您正在谈论`<f:validator>`or `<f:validateXxx>`，只需让它的`disabled`属性绑定到该属性即可。

```
<p:inputText ...>
    <f:validator ... disabled="#{bean.property}" />
</p:inputText> 
```

请注意，这些属性实际上是在表单提交请求期间评估的（因此不在表单显示请求期间）。因此，如果您的 bean 是请求范围的，您需要确保在（后）构造期间正确预初始化该属性。

# http - 进行重定向时，Akamai 正在重定向到原始服务器，为什么？

> ID：13633493
> 
> 赞同：0
> 
> 时间：2012-11-29T19:46:24.633
> 
> 标签：http, redirect, cdn, akamai

请多多包涵，因为我不是很熟悉 akamai 的工作原理。

我遇到了重定向问题。我们正在将链接重定向`domain.com/a/b`到`domain.com/c/d`. 但是，akamai 不尊重 domain.com 并且 301 转到原始服务器。为了显示：

`http://akamai.ex.example.com/a/b`

重定向到

`http://original.ex.example.com/b/c`

当它应该重定向到

`http://akamai.ex.example.com/a/b`

发生了什么，如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:18:36.593

我不知道为什么，但我可以告诉你如何解决它：路径绝对（或主机相对？）重定向 URL 形式“/b/c”完全绕过问题，并使浏览器运行到同一主机（和端口，和协议。）

（RFC 中有一个错字，Location 标头中允许使用相对 URI，所有浏览器都支持它：http: [//trac.tools.ietf.org/wg/httpbis/trac/ticket/185](http://trac.tools.ietf.org/wg/httpbis/trac/ticket/185)）

# html - 访问链接模型的属性以在表中输出

> ID：13633496
> 
> 赞同：0
> 
> 时间：2012-11-29T19:46:34.630
> 
> 标签：html, ruby-on-rails, model

这有助于在单个“项目”显示页面上显示 [访问 Rails 中链接模型的属性](https://stackoverflow.com/questions/4839480/accessing-an-attribute-of-a-linked-model-in-rails)

但是我在为“所有项目表”做同样的事情时遇到了麻烦

```
...
<% @items.each do |item| %>
...
<td><%= item.room.name %></td>
... 
```

很明显，一个房间有很多物品。

只有这个有效：

```
<td><%= item.room_id %></td> 
```

我似乎无法在那里使用它，给出：

```
undefined method `name' for nil:NilClass 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T19:55:16.907

看看 Rails 的[Delegate](http://apidock.com/rails/Module/delegate)模块：

```
class Item < ActiveRecord::Base
  # ...
  delegate :name, :to => :room, :allow_nil => true, :prefix => :room
end 
```

这会将实例方法添加`room_name`到`Item`，这将更优雅地失败（`nil`如果没有空间则返回，而不是`NilClass`错误）。

# c# - 限制文本框中的长度和输入掩码

> ID：13633497
> 
> 赞同：1
> 
> 时间：2012-11-29T19:46:37.420
> 
> 标签：c#, winforms, validation

我需要限制 C# 中 TextBox 中允许的位数。

我还需要创建验证，使其类似于手机号码，这意味着它必须以 07 开头并且总共有 11 位数字。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:51:51.033

您可以使用[MaskedTextBox](http://msdn.microsoft.com/en-us/library/system.windows.forms.maskedtextbox.aspx)来提供受控输入值。“07”后跟 11 位掩码将是`\0\700000000000`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-24T09:11:28.750

你没有任何代码作为例子，所以，我会输入我的。

要限制字符数，您应该键入以下代码：

```
private bool Validation()
{
    if (textBox.Text.Length != 11)
    {
        MessageBox.Show("Text in textBox must have 11 characters", "Error", MessageBoxButtons.OK, MessageBoxIcon.Warning);
        textBox.Focus();
        return false;
    }
    return true;
} 
```

如果您希望文本框中的文本以“07”开头，则应键入以下代码：

```
private bool Validation()
{
    string s = textBox.Text;
    string s1 = s.Substring(0, 1); // First number in brackets is from wich position you want to cut string, the second number is how many characters you want to cut
    string s2 = s.Substring(1, 1);
    if (s1 != "0" || s2 != "7")
    {
        MessageBox.Show("Number must begin with 07", "Error", MessageBoxButtons.OK, MessageBoxIcon.Warning);
        textBox.Focus();
        return false;
    }
    return true;
} 
```

您可以将其合并到一种方法中，并且可以在任何需要的地方调用它。如果您想调用某种方法（例如，当您单击接受按钮时）只需输入以下代码：

```
private void buttonAccept_Click(object sender, EventArgs e)
{
    if (Validation() == false) return;
} 
```

# wordpress - 使用特定子域访问特定 URL 时显示 404 错误

> ID：13633500
> 
> 赞同：0
> 
> 时间：2012-11-29T19:46:40.773
> 
> 标签：wordpress, apache, .htaccess, mod-rewrite, http-status-code-404

我有两个指向完全相同文件的子域。我使用服务器端代码来控制样式/图像。我希望只有一个子域可以访问特定页面。如何使用 RewriteRules 完成此任务？

我有不同的域设置测试目的，但它们都以`http://MICROSOFT`或开头`http://APPLE`。[如果通过http://MICROSOFT.somethingelse.com/](http://MICROSOFT.somethingelse.com/) http://MICROSOFT.another.sub.sub.domain/访问该站点，我只希望显示该页面，而不是[http://APPLE.com](http://APPLE.com)或其他任何内容与 APPLE 在主机名中。

转到[http://microsoft.anythinghere/special-sub-directory/](http://microsoft.anythinghere/special-sub-directory/)将按预期显示页面，但转到[http://apple.anythinghere/special-sub-directory/](http://apple.anythinghere/special-sub-directory/)将显示 404 错误。

如何修改此代码以按我的需要工作？

```
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteRule ^http://apple\.[A-z0-9]+/special-sub-directory/?$ - [R=404]
</IfModule> 
```

请注意，它是一个 WordPress 网站，因此它必须遵守以下规则：

```
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:14:10.097

`RewriteRule`没有得到协议和主机名。你需要的是一个额外的[`RewriteCond`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritecond)：

```
RewriteCond %{HTTP_HOST} ^apple\. [NC]
RewriteRule ^special-sub-directory/?$ - [R=404] 
```

* * *

这些是在我的开发机器上工作的规则：

```
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} ^localhost [NC]
RewriteRule ^special-sub-directory/?$ - [R=404]

RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L] 
```

*   它们被放置在里面`/.htaccess`
*   访问`http://localhost/special-sub-directory/`产生的 404 错误
*   访问`http://127.0.0.1/special-sub-directory/`显示的正确页面
*   其他规则有效

# java - 我应该将序列化对象放在 Java 程序中的什么位置？

> ID：13633501
> 
> 赞同：0
> 
> 时间：2012-11-29T19:46:45.923
> 
> 标签：java, json, serialization, project-organization

你好，你们这些了不起的人，

世界上一切都不对劲！我正在尝试使用 JSON 在 java 程序中持久化对象。我不经常使用 java，我使用 JSON 来序列化我的对象，因为我希望用其他语言编写的其他程序也能够采用这些序列化对象。我的问题是我无法确定放置 JSON 文件的正确位置。最初我认为我应该将它们放在资源文件夹中，但似乎不可能即时将文件写入资源文件夹。我当然可以将文件放在我的项目外部的文件夹中，但这会让我很烦恼……很多。

正是这些愚蠢的细微差别一直让我对 java 产生兴趣。欢迎任何评论/建议/冷酷无情的批评。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T19:54:59.943

我将您的问题解释如下：您想在运行时生成 JSON 文件并将它们写入您的`resources`文件夹。

这不是它应该如何工作的 - 该`resources`文件夹用于包含程序使用但包含在分发中的非源代码文件，如 Spring 应用程序上下文 XML 文件。

如果您想与其他程序（可能用其他语言编写）交换数据，您可能应该使用程序源代码树之外的公共交换目录。

# mysql - 我无法让 ORDER BY 工作（日期类型）

> ID：13633502
> 
> 赞同：1
> 
> 时间：2012-11-29T19:46:48.373
> 
> 标签：mysql

我正在尝试 ORDER BY 日期类型字段名称为 dDate （格式示例为`2008-12-26`），但它不起作用，请有人告诉我我做错了什么。

```
 $listsql = "SELECT contact.id, CONCAT(lastname,', ',firstname) AS fullname, lastname, firstname,
                dDate, line1, line2, city, state, zip, phone1, phone2, country, whoAdded
                FROM ". TABLE_CONTACT ." AS contact
                LEFT JOIN ". TABLE_ADDRESS. " AS address ON contact.id=address.id AND contact.primaryAddType=address.type
                LEFT JOIN ". TABLE_EMAIL ." AS email ON contact.id=email.id AND contact.primaryAddType=email.type
                WHERE contact.hidden != 1
                ORDER BY email.dDate DESC"; 
```

它没有给出任何错误或任何它只是没有排列日期我希望它有日期排列 DESC 或 ASC 无关紧要，例如：

```
2008-12-26
2008-12-27
2008-12-28 
```

或者

```
2008-12-28
2008-12-27
2008-12-26 
```

我得到这样的东西

```
2012-11-16
2012-11-30
2012-11-26
2012-11-30 
```

SQL 输出是：

```
mysql> show create table address_email;
+---------------+---------------------------------------------------------------
--------------------------------------------------------------------------------
-------------------------+
| Table         | Create Table

                         |
+---------------+---------------------------------------------------------------
--------------------------------------------------------------------------------
-------------------------+
| address_email | CREATE TABLE `address_email` (
  `id` int(11) NOT NULL DEFAULT '0',
  `dDate` date DEFAULT NULL,
  `type` varchar(100) NOT NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1 |
+---------------+---------------------------------------------------------------
--------------------------------------------------------------------------------
-------------------------+
1 row in set (0.00 sec) 
```

非常感谢你的帮助。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T22:22:15.150

我变了：

```
LEFT JOIN ". TABLE_EMAIL ." AS email ON contact.id=email.id AND contact.primaryAddType=email.type 
```

到：

```
LEFT JOIN ". TABLE_EMAIL ." AS email ON contact.id=email.id 
```

我想在使用两个 LEFT JOIN 时永远不会有两个 primaryAddType

所以现在一切都很好！！！！谢谢大家！！:)

# java - Java setBounds 不适用于 JPanel

> ID：13633503
> 
> 赞同：5
> 
> 时间：2012-11-29T19:46:52.697
> 
> 标签：java, swing, jpanel, layout-manager

我正在用 java 做一个小 Gui。我正在使用 setBounds 方法在我的 JFrame 上设置按钮等的位置，但问题是当我将它与 JPanel 一起使用时，按钮在 JFrame 上不可见，并且没有 JPanel 它很好，请查看两个代码并请帮助我我是初学者，面临这些愚蠢的问题。

这个工作正常

```
 JFrame jframe = new JFrame("Working Fine");  
  jframe.setLayout(null);  
  JButton jbutton = new JButton("Position Test");  
  jbutton.setBounds(0, 0, 100, 100);  
  jframe.add(jbutton);  
  jframe.setSize(300,300);
  jframe.setVisible(true); 
```

当我将 Button 添加到 Jpanel 时相同的代码然后它不起作用所以有什么问题，请指导我

```
 JFrame jframe = new JFrame("causing problem ");
  jframe.setSize(300,300);
  JPanel p = new JPanel();
  jframe.setLayout(null);  
  JButton jbutton = new JButton("Position Test");  
  jbutton.setBounds(0, 0, 100, 100);
  jframe.add(p);
  p.add(jbutton);
  p.setVisible(true);
 //jframe.add(jbutton);  
  jframe.setVisible(true); 
```

请帮我解决这个小问题

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-06-13T00:16:02.433

您必须摆脱 JPanel 的布局，才能设置绝对位置：

> p.setLayout(null);

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-29T19:51:20.963

问题是当你使用绝对定位时，`JPanel`组件没有默认大小所以不会出现。为了让它出现，你可以做

```
JFrame frame = new JFrame("No Problem");
JPanel panel = new JPanel() {
    @Override
    public Dimension getPreferredSize() {
        return new Dimension(300, 300);
    };
};
panel.setLayout(new FlowLayout(FlowLayout.CENTER));
JButton button = new JButton("Position Test");
panel.add(button);
frame.add(panel);
frame.pack();
frame.setVisible(true); 
```

从[没有布局管理器的情况下](http://docs.oracle.com/javase/tutorial/uiswing/layout/none.html)

> 尽管可以不使用布局管理器，但您应该尽可能使用布局管理器。布局管理器可以更轻松地适应依赖外观的组件外观、不同的字体大小、容器的不断变化的大小以及不同的语言环境。

布局管理器的选择将取决于您希望如何布局组件。

请参阅[布局管理器的视觉指南](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)。

# c - C中的冲突类型错误与某些文件io

> ID：13633507
> 
> 赞同：2
> 
> 时间：2012-11-29T19:46:59.750
> 
> 标签：c, compiler-warnings

所以这是我的代码

```
int main(int argc, char *argv[] )
{
    double mass1, mass2, tof, pixcm;
    char pofVfilename[50];
    double pix[50];
    double pofV[50];
    if(argc != 2)
    {
        printf("usage: %s filename", argv[0]); 
   }
else
    {
        FILE *file = fopen(argv[1], "r");
        if(file == 0){
            printf("could not open file\n");
        }
        else{
            fscanf(file, "%lf %lf", &mass1, &mass2);
            fscanf(file, "%lf", &tof);
            fscanf(file, "%s", pofVfilename);
            fscanf(file, "%lf", &pixcm);
            fclose(file);
            printf("%lf%lf%lf%lf", mass1, mass2, tof, pixcm);  
            readinputpofV(pix, pofV, pofVfilename);
            printf("%f %f", pix[10], pofV[10]);
        }

    }
    return 0;
}

void readinputpofV(double pix[], double pofV[], char filname[]){
    FILE *file = fopen(filname, "r");
    if(file == 0){
        printf("could not open pofV file\n");
    }
    else{
        int result = 2;
        int i = 0;
        while(result == 2){
            result = fscanf(file, "%lf %lf", &pix[i], &pofV[i]);
            i++;
        }
    }
    fclose(file);
} 
```

我得到的错误是

> 警告：“readinputpofV”的类型冲突</p>
> 
> 警告：“readinputpofV”的先前隐式声明在这里

有人可以帮忙吗。另外，我是文件输入的新手，希望能得到一些关于我如何做的指导。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T19:49:57.193

这与文件 I/O **无关。**

尝试放在`void readinputpofV(double pix[], double pofV[], char filname[]);` **上面** `main()`。

对函数的调用被视为它的声明，并且返回类型被假定为`int`. 因此混乱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T19:49:00.247

> 'readinputpofV' 的先前**隐式声明在这里**

*隐式*声明使返回类型假定为`int`（在 C89/C90 中，隐式声明已在 C99 中删除）。所以假定的类型和定义的类型是不兼容的。

因此，编译器会警告冲突的类型。

不过，这只是一个警告，而不是错误，并且由于实现的类型具有`void`返回类型，因此您不会使用返回值，因此代码的工作概率为非零。但是你当然应该在使用它之前用正确的类型声明这个函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T19:49:20.497

您必须`readinputpofV()`在使用它之前声明该函数，否则编译器将假定它返回`int`，而它稍后会遇到它确实返回`void`。

你应该做的是添加

```
void readinputpofV(double pix[], double pofV[], char filname[]); 
```

在定义之前`main()`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-15T19:27:43.927

除了在 main 上面声明函数原型之外，您还可以在 main 上面编写 readinputpofV 的整个定义。因此，您无需声明函数原型即可避免错误。

* * *

当我发现它在视觉上很有帮助时，我经常使用该策略，但它有它的缺点：当您使用多个相互交互的函数时，如果您没有按正确的顺序放置函数，该策略可能会导致编译器错误。C程序是串行编译的；调用的函数应该是已知的。

因此，在 C 语言中，为避免隐式声明编译器错误，任何被调用函数的定义或其原型都应该放在任何可能调用它的函数之上。您可以从下到上编写它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-29T19:51:27.473

由于编译器在编译 main 函数时无法读取inputpofV，因此假设该函数返回一个 int 如果您将函数的定义移到 main 之前。警告将消失。

# python - Django handler500 作为基于类的视图

> ID：13633508
> 
> 赞同：11
> 
> 时间：2012-11-29T19:47:01.600
> 
> 标签：python, django, error-handling, custom-error-pages

为什么这不起作用

```
handler500 = TemplateView.as_view(template_name="500.html") 
```

我得到以下异常：

```
Traceback (most recent call last):
  File "/usr/lib/python2.6/wsgiref/handlers.py", line 94, in run    
    self.finish_response()
  File "/usr/lib/python2.6/wsgiref/handlers.py", line 134, in finish_response
    for data in self.result:
  File "/home/hatem/projects/leadsift_app/.virtualenv/lib/python2.6/site-packages/django/template/response.py", line 117, in __iter__
    raise ContentNotRenderedError('The response content must be 'ContentNotRenderedError: The response content must be rendered before it can be iterated over. 
```

我发现这[组笔记](https://github.com/pydanny/pydanny-event-notes/blob/master/DjangoConEurope2012/class-based-generic-views-patterns-and-anti-patterns.rst#shooting-yourself-in-the-foot)描述了你正在用脚射击自己以在那里使用基于类的视图，这是为什么呢？

编辑：我最终使用了这个......但我仍然希望有人会告诉我如何让原来的 oneliner 或类似的工作

```
class Handler500(TemplateView):
    template_name = "500.html"  
    @classmethod
    def as_error_view(cls):
        v = cls.as_view()
        def view(request):
            r = v(request)
            r.render()
            return r
        return view
handler500 = Handler500.as_error_view() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-27T10:20:48.893

我认为它实际上很简单（在 Django 1.7 和 Python 3.4 中）：

## 视图.py

```
from django.http import HttpResponse
from django.views.generic.base import View

class Custom500View(View):
    def dispatch(self, request, *args, **kwargs):
        return HttpResponse('My custom django 500 page') 
```

## 网址.py

```
from .views import Custom500View

handler500 = Custom500View.as_view() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T05:59:42.707

我宁愿在 vanilla Django 中使用带有静态 HTML 的 500 个库存模板，然后用代码做任何事情。这是我认为不应触及的一种切换方式。

# java - 输出在 Mac 上正确，但在 Windows 上不正确

> ID：13633509
> 
> 赞同：2
> 
> 时间：2012-11-29T19:47:01.640
> 
> 标签：java, eclipse

我们有一个 Java 程序，它从 .xml 文件中提取信息，将其转换为字符串，然后将字符串写入 .txt 文件。然后将该文件附加到第二个 .txt 文件，该文件将保存来自多个 .xml 文件的所有输入。在 Mac 上的 Eclipse 中，程序正确地将所有 .xml 代码附加到最终的 .txt 文件中。

但是，当在 Eclipse 中的 Windows 计算机上运行相同的 Java 程序时，最终的 .txt 文件不会像在 Mac 上那样收集所有输入。在 Windows 和 Mac 上读取/写入文件是否存在已知差异？特别是当最初在 Mac 上编写的代码被转移到 Windows 机器上时？

这是我们的代码：

```
package edu.uci.ics.jung.samples;

import java.io.FileWriter;
import java.io.BufferedWriter;
import java.io.IOException;

import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.DocumentBuilder;
import org.w3c.dom.Document;
import org.w3c.dom.NodeList;
import org.w3c.dom.Node;
import org.w3c.dom.Element;
import java.io.File;
import java.util.Scanner;

public class ReadXMLFile1 {

    public static void main(String argv[]) throws IOException { //throws ioexception allows the filewriter code below (specifically writing the "t# b" title)
          //while loop to grab all xml files in the form of name0, name1, name2, etc and perform txt file conversion
         int numberofgraphs=10; //indicate number of graphs importing/reading/appending
         int x=0;
         int b = 0;
          while (x < numberofgraphs){
                FileWriter pagetowrite = new FileWriter("graphtotal1.txt", true); //true says to append string "scannedstuff" to graphtotal.txt (graphtotal.txt can be replaced by any file in visualization folder, you name it!)
                BufferedWriter now = new BufferedWriter(pagetowrite); //more advanced file writer, included in order to use newLine() method below
                now.write("t# "+b); //writes the title t# "b" at top of each graph set
                now.newLine(); //returns to next line of file (helps keep format of original .txt)
                now.close(); //ends file writing for that line of text file

              try {

                  String xmlname = ("Untitled"+b+".xml");

                  File fXmlFile = new File(xmlname);
                  DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
                  DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
                  Document doc = dBuilder.parse(fXmlFile);
                  doc.getDocumentElement().normalize();

                  NodeList oList = doc.getElementsByTagName("node"); //writing to txt file the node info
                  for (int temp = 0; temp < oList.getLength(); temp++) {

                       Node oNode = oList.item(temp);
                       if (oNode.getNodeType() == Node.ELEMENT_NODE) {

                          Element fElement = (Element) oNode;

                          String nodename = getTagValue("name", fElement);
                          char nodenumber = nodename.charAt( 1 );
                          String nodelabel = getTagValue("string", fElement);

                          FileWriter pagetowriteon = new FileWriter("newinput1.txt", true); //true says to append string "scannedstuff" to newinput1.txt (newinput1.txt can be replaced by any file in visualization folder, you name it!)
                        BufferedWriter out = new BufferedWriter(pagetowriteon); //more advanced file writer, included in order to use newLine() method below
                        out.write("v"+ " "); //writes the letter v to indicate a node
                        out.write(nodenumber+" "); //writes number of node created
                        out.write(nodelabel); // writes the name of node..its label
                        out.newLine(); //returns to next line of file (helps keep format of original .txt)
                        out.close(); //ends file writing for that line of text file

                       }
                    }
                  NodeList nList = doc.getElementsByTagName("arc");//writing to txt file the arc info

                  for (int temp = 0; temp < nList.getLength(); temp++) {

                   Node nNode = nList.item(temp);
                   if (nNode.getNodeType() == Node.ELEMENT_NODE) {

                      Element eElement = (Element) nNode;

                      //String arcname = getTagValue("name", eElement);
                      String arcnode1 = getTagValue("From", eElement);
                      char node1 = arcnode1.charAt( 1 );
                      String arcnode2 = getTagValue("To", eElement);
                      char node2 = arcnode2.charAt( 1 );
                      String arclabel = getTagValue("string", eElement);

                      FileWriter pagetowriteon = new FileWriter("newinput1.txt", true); //true says to append string "scannedstuff" to newinput1.txt (newinput1.txt can be replaced by any file in visualization folder, you name it!)
                    BufferedWriter out = new BufferedWriter(pagetowriteon); //more advanced file writer, included in order to use newLine() method below
                    out.write("u"+ " "); //writes the letter u to indicate an edge
                    out.write(node1+" ");
                    out.write(node2+ " ");
                    out.write(arclabel);
                    out.newLine(); //returns to next line of file (helps keep format of original .txt)
                    out.close(); //ends file writing for that line of text file

                   }
                }
                //an option (mostly for individual graph use with simplegraphview...probably unecessary since simplegraph not used until after Data mining) to write to a newly named textfile so can run simplegraph view without having to change file name
                  File file = new File("newinput1.txt");

                //File (or directory) with new name (makes it easy to change one file name here instead of two in code above)
                  File file2 = new File("newinput.txt");
                  file.renameTo(file2);

                //this strategy of appending-> keep-> allows you to change one file name for giant append file..Filewriter line below ("graphtotal.txt")

                //start of appending text file
                 // boolean graphready;
              //assign if(boolean){ = to true when ready to append
                  if (true){
                    File file3 = new File ("newinput.txt"); //indicate which file
                    Scanner scan = new Scanner (file3); //read the text file indicated above
                            while (scan.hasNextLine()){ //will loop until no more lines of code detected; this loop reads and appends text to desired file
                                String scannedstuff3 = scan.nextLine(); //converts next line of code to a string
                                FileWriter pagetowriteon = new FileWriter("graphtotal.txt", true); //true says to append string "scannedstuff" to graphtotal.txt (graphtotal.txt can be replaced by any file in visualization folder, you name it!)
                                BufferedWriter out = new BufferedWriter(pagetowriteon); //more advanced file writer, included in order to use newLine() method below
                                //out.write("t# "+b); //writes the title t3 0 at top of each graph set
                                //out.newLine(); //returns to next line of file (helps keep format of original .txt)
                                out.write(scannedstuff3); //writes scanned line of code to new file indicated in FileWriter("desiredfile.txt", true)
                                out.newLine(); //returns to next line of file (helps keep format of original .txt)
                                out.close(); //ends file writing for that line of text file

                            }
                            scan.close(); //ends scanning of txt file indicated
                }

              } catch (Exception e) {
                e.printStackTrace();
              }
              x=x+1;
              b=b+1;

          }
    }

  private static String getTagValue(String sTag, Element eElement) {
    NodeList nlList = eElement.getElementsByTagName(sTag).item(0).getChildNodes();

        Node nValue = (Node) nlList.item(0);

    return nValue.getNodeValue();
  }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T19:49:47.233

查看刷新 BufferedWriter。缓冲，因为它由底层操作系统控制，因平台而异。

# .net - 如何防止 MVC4 和 WebAPI 项目的同源访问策略？

> ID：13633511
> 
> 赞同：1
> 
> 时间：2012-11-29T19:47:10.350
> 
> 标签：.net, asp.net-mvc, asp.net-web-api, cors

我以前也问过类似的问题，但我终于找到了问题的根源。我在 VS 2010 中有两个项目的解决方案。一个项目是一个 mvc 4 应用程序，它对第二个 WebAPI 项目进行休息调用，现在即使这些项目在同一个解决方案中，我在使用 IE 以外的任何东西时都会遇到同源策略错误，我相信这与事实上，每个项目都是在单独的开发服务器实例上启动的，但我不确定。

有人可以向我解释一个解决方案，我可以让这两个项目都运行而不会遇到相同的来源错误吗？（相关的问题，如果我想公开我的 api 以供公众使用，怎么会有人使用它而不会出现同样的错误？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T19:54:03.420

您将需要在您的主 MVC4 应用程序中创建一个瘦代理层，用于创建`HttpRequest`或`WebClient`调用您的 WebAPI 项目。

所以你的Javascript会调用类似的东西

```
http://samedomain/proxy/getproduct/29 
```

然后，您的 ProxyController 的 GetProduct 操作应该对实际的 WebAPI URL 进行 HttpRequest 调用

```
http://otherdomain/api/Product/29 
```

并将其`JsonResult`返回给调用 Javascript，然后您可以在其中使用它。因为您的 Javascript 和代理层在同一个域中，所以您不会面临源访问策略问题。

编辑：即使您在 localhost 上同时拥有它们但具有不同的端口，就浏览器而言，这也算作一个单独的域。从 localhost:41928 到 localhost:58128 的调用将受此安全策略的约束。如果你想解决这个问题，那么你需要将你的 MVC WebAPI 放在你的主项目中。要结合这两个项目，请创建一个新的 MVC WebAPI 项目 - 它带有服务路由以及常规 MVC 路由。

* * *

如果您想要一个真正“开放”的 WebAPI 服务，您可以按照[本指南启用 CORS](http://enable-cors.org/)。在 IIS7 中，您可以将其添加到您的 web.config 文件中

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
 <system.webServer>
   <httpProtocol>
     <customHeaders>
       <add name="Access-Control-Allow-Origin" value="*" />
     </customHeaders>
   </httpProtocol>
 </system.webServer>
</configuration> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T14:42:03.423

我最终做的和对我有用的，现在是使用 IIS Express 并将项目指向同一个虚拟目录

# python - Python Numpy字典地图导入？

> ID：13633513
> 
> 赞同：0
> 
> 时间：2012-11-29T19:47:14.517
> 
> 标签：python, map, numpy, 2d, tile

所以我想尝试使用 numpy 数组导入 2D 地图文件以在网格上显示图形图块。所以说我有一个需要 5x10 瓷砖的窗口。我能够让'1'代表字典中的某个PNG图块，但是我将如何在字典中导入带有其他数字甚至符号（如$或%或@等）的地图文件，而不仅仅是所有的1？

```
>>> numpy.ones((10,5))
array([[ 1.,  1.,  1.,  1.,  1.],
       [ 1.,  1.,  1.,  1.,  1.],
       [ 1.,  1.,  1.,  1.,  1.],
       [ 1.,  1.,  1.,  1.,  1.],
       [ 1.,  1.,  1.,  1.,  1.],
       [ 1.,  1.,  1.,  1.,  1.],
       [ 1.,  1.,  1.,  1.,  1.],
       [ 1.,  1.,  1.,  1.,  1.],
       [ 1.,  1.,  1.,  1.,  1.],
       [ 1.,  1.,  1.,  1.,  1.]])
>>> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T20:01:01.893

如果您想要通过平铺一组较小的图像来创建一个大图像，那么您应该使用 Python 图像库 (PIL)。

此外，假设您想将文件名放入数组中，从而创建一个字符串数组而不是字符串数组，您可以像这样循环：

```
for row in xrange(a.shape[0]):
    for column in xrange(a.shape[1]):
        final_image.paste(tiledict[a[row, column]], row*tilesize, column*tilesize) 
```

在上面的代码中，`final_image`将是一个大`pil.Image`对象，您可以在其中粘贴每个图块，并且`tiledict`是您从中获取这些图像的字典。

希望这可以帮助！

# c# - ContinueWhenAll 是否观察到异常并因此防止出现 UnobservedTaskException？

> ID：13633514
> 
> 赞同：3
> 
> 时间：2012-11-29T19:47:23.463
> 
> 标签：c#, task-parallel-library, unobserved-exception

假设我有一组任务说`taskArray`，并且我创建了一个任务延续[`ContinueWhenAll`](http://msdn.microsoft.com/en-us/library/dd321258.aspx)，其中一个或多个任务`taskArray`抛出了一些异常。我的问题是，是否有任何情况可能导致[`UnobservedTaskException`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.unobservedtaskexceptioneventargs.aspx)？

所以基本上问题归结为，是否观察到单个任务的`ContinueWhenAll`异常？如果不是，那么如果我不想明确查看每个任务的异常，那么应该为一组任务使用什么。我不想使用它，因为它不适用于一般任务。`taskArray`[`Wait`](http://msdn.microsoft.com/en-us/library/dd235635.aspx)[`WaitAll`](http://msdn.microsoft.com/en-us/library/dd270695.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T14:35:29.230

如果从任务应用程序范围内捕获异常是可以接受的，那么 davenewza 的回答就足够了。

如果不是，那么您必须做您不想做的事情（以某种方式观察异常）。你有两个选择：

1.  为在其唯一工作是通过查看任务的属性`OnlyOnFaulted`来观察异常的情况下运行的每个任务创建一个延续。`Exception`
2.  在 ContinueWhenAll 的延续中，您可以将任务分为有异常和没有异常的任务：

    ```
     Task.Factory.ContinueWhenAll(tasks, ts =>
        {
            var lookup = ts.ToLookup(t => t.Exception != null);
            var faultedTasks = lookup[true];
            var nonFaultedTasks = lookup[false];
        }); 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T07:20:13.650

不，`ContinueWhenAll`不会观察到您的任务中抛出的任何异常。

您可以使用该事件“捕获”并观察可能在您的任何任务中发生的任何异常`TaskScheduler.UnobservedTaskException`。`UnobservedTaskException`这会在终结器线程抛出an 之前触发。在这里您可以观察到异常。

```
TaskScheduler.UnobservedTaskException += (sender, e) =>
{
    e.SetObserved();
}; 
```

# c# - 尝试用前导空格填充十进制数

> ID：13633516
> 
> 赞同：3
> 
> 时间：2012-11-29T19:47:36.773
> 
> 标签：c#, decimal, string-formatting, format-string, padleft

```
for (int iCount = 0; iCount < oForm.LineItems.Count; iCount++)
           { 
```

// cartDetails 在这里是一个字符串生成器。

```
 cartDetails.Append(String.Format("{0:0}", oForm.LineItems[iCount].Quantity));
     cartDetails.Append(String.Format("{0:0.00}", oForm.LineItems[iCount].Price));
     cartDetails.Append(String.Format("{0:0.00}", oForm.LineItems[iCount].ExtendedPrice));

     //cartDetails.Append(string.Format("{0,10:#,##0.00}", oForm.LineItems[iCount].Price) + "</TD><TD>");
     //cartDetails.Append(string.Format("{0,10:#,##0.00}", oForm.LineItems[iCount].ExtendedPrice) + "</TD><TD>");
     //cartDetails.Append(String.Format("{0}", oForm.LineItems[iCount].Quantity).PadLeft(4)+ "</TD><TD>");
     //cartDetails.Append(String.Format("{0:0.00}", oForm.LineItems[iCount].Price).PadLeft(8) + "</TD><TD>"); 
```

我已经粘贴了我正在使用的源代码。我添加了数量、价格、扩展价格，都是十进制列。我要做的就是用前导空格填充左边。小数四舍五入到 2 位似乎正在发生。

上面那些注释的行是我尝试过的其他一些选项。目前，如果 qty 具有 4 和 40 等值，当我在表格中打印它们时它们不会对齐。与价格相同。

有人可以建议我在这里做什么吗？

**更新1：**尝试了卢卡斯的建议，但它不起作用。这就是我得到的。

cartDetails.Append(String.Format("{0:0,10}", oForm.LineItems[iCount].Quantity));

当我尝试上述方法时，无论 oForm.LineItems[iCount].Quantity 中的值如何，它都会为每一行显示 10。

如果我更改 String.Format("{0:0,4}"，它会为所有记录显示 04

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T20:12:58.360

您可以使用`AppendFormat`方法而不是附加格式化字符串。正确的格式也是`{index,padding:format}`. 并考虑使用`foreach`而不是`for`：

```
foreach (var lineItem in oForm.LineItems)
{ 
    cartDetails.AppendFormat("{0,4:0}", lineItem.Quantity);
    cartDetails.AppendFormat("{0,10:0.00}", lineItem.Price);
    // etc
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T19:53:08.713

**备注：**这是用于基于字符的表示（例如文本文件）中的对齐

查看[复合格式 (MSDN)](http://msdn.microsoft.com/en-us/library/txafckwd.aspx)中的最后一部分。

首先根据需要格式化数字并填充结果

```
cartDetails.AppendFormat("{0,4}", // padding with spaces
    String.Format("{0:0}", oForm.LineItems[iCount].Quantity));  // format number 
```

**补充：**如果您想将数据放置在 html 表格中，您应该使用 css（或内联样式）

```
<td class="right">This is right aligned</td> 
```

用CSS

```
.right { text-align: right; } 
```

或内联：

```
<td style="text-align: right">This is right aligned</td> 
```

# python - Python 正则表达式 findall

> ID：13633521
> 
> 赞同：2
> 
> 时间：2012-11-29T19:48:01.683
> 
> 标签：python, regex

我想在 python 中找到所有 2 个单词的字符串。我创建了这个：

```
#!/usr/bin/python
import re

string='a1 a2 a3 a5 a6'
search=re.findall('.. ..',string)
print len(search)
for nk in search:
        print nk 
```

我得到：a1 a2 a3 a5 虽然我想要：a1 a2,a2 a3,a3 a5,... 等等 findall 应该搜索所有可能的模式？为什么返回 a1 a2,a3 a5？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T19:52:14.667

它返回`['a1 a2', 'a3 a5']`，因为这些是唯一可以找到的模式：在应用第一个模式后，该`'a1 a2'`部分消失并`' a3 a5 a6'`留下。下一个可能的模式是`'a3 a5'`, 并且`' a6'`被留下并且不能进一步匹配。

`'a1 a3'`等`'a1 a5'`无法找到，因为这种组合不会发生。请记住，您搜索两个任意字符，然后是一个空格字符，然后是 2 个任意字符。

和

```
r=re.compile(r"(\S{2})(?:\s|$)")
pairs =r.findall("a1 a2 a3 a5 a6") 
```

或者

```
pairs = re.findall(r"(\S{2})(?:\s|$)", "a1 a2 a3 a5 a6") 
```

您会发现所有 2 字符组合，它们后跟空格或字符串末尾：`['a1', 'a2', 'a3', 'a5', 'a6']`. 如果你结合这些，你会发现所有可能的组合：

```
for ifirst in range(len(pairs) - 1):
    for second in pairs[ifirst + 1:]:
        print " ".join((pairs[ifirst], second)) 
```

# java - 缓冲区下溢？

> ID：13633522
> 
> 赞同：1
> 
> 时间：2012-11-29T19:48:05.730
> 
> 标签：java, android, bufferunderflowexception

我有以下代码片段。标记的行导致 BufferUnderflowException。我阅读了有关异常的文档，但仍然不明白它到底*是*什么意思。我使用`.rewind()`我印象中的方法缓解了这个问题。

任何人都可以就我的错误的主题或原因告诉我吗？

```
 Bitmap cameraBaseSized = BitmapFactory.decodeFile(cameraPath, opts);
            Bitmap canvasBlendSized = BitmapFactory.decodeFile(canvasPath, options);
            Bitmap result = cameraBaseSized.copy(Config.ARGB_8888, true);
            IntBuffer buffBase = IntBuffer.allocate(cameraBaseSized.getWidth()
                    * cameraBaseSized.getHeight());
            cameraBaseSized.copyPixelsToBuffer(buffBase);
            buffBase.rewind();
            IntBuffer buffBlend = IntBuffer.allocate(canvasBlendSized.getWidth()
                    * canvasBlendSized.getHeight());
            canvasBlendSized.copyPixelsToBuffer(buffBlend);
            buffBlend.rewind();
            IntBuffer buffOut = IntBuffer.allocate(cameraBaseSized.getWidth()
                    * cameraBaseSized.getHeight());
            buffOut.rewind();
            while (buffOut.position() < buffOut.limit()) {
                int filterInt = buffBlend.get(); //BUFFERUNDERFLOW EXCEPTION
                int srcInt = buffBase.get();
                int redValueFilter = Color.red(filterInt);
                int greenValueFilter = Color.green(filterInt);
                int blueValueFilter = Color.blue(filterInt);
                int redValueSrc = Color.red(srcInt);
                int greenValueSrc = Color.green(srcInt);
                int blueValueSrc = Color.blue(srcInt);
                int redValueFinal = multiply(redValueFilter, redValueSrc);
                int greenValueFinal = multiply(greenValueFilter, greenValueSrc);
                int blueValueFinal = multiply(blueValueFilter, blueValueSrc);
                int pixel = Color.argb(255, redValueFinal, greenValueFinal, blueValueFinal);
                buffOut.put(pixel);
            }
            buffOut.rewind();
            result.copyPixelsFromBuffer(buffOut); 
```

和异常片段

```
11-29 14:41:57.347: E/AndroidRuntime(2166): Caused by: java.nio.BufferUnderflowException
11-29 14:41:57.347: E/AndroidRuntime(2166):     at java.nio.IntArrayBuffer.get(IntArrayBuffer.java:55) 
```

我还想补充一点，这只发生在特定设备上，尤其是三星口味。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T20:03:50.773

也许这个测试会有所帮助：

```
 ByteBuffer b = ByteBuffer.allocate(1);
    b.get();
    b.get(); 
```

分配后缓冲区中有 1 个字节，第一个 get() 读取该字节并且缓冲区达到其限制，第二个 get() 是非法的，没有可读取的内容，因此您会得到 BufferUnderflowException。

此代码不会失败：

```
 ByteBuffer b = ByteBuffer.allocate(1);
    b.get();
               b.rewind();
    b.get(); 
```

您读取了字节，但它仍在缓冲区中，因此您可以倒带并再次读取字节

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T20:04:29.203

由于它发生在某些设备上，因此您可能没有获得您期望的像素格式。

此外，如果`buffBlend`由于任何原因短于`buffOut`（这可能是由于位图的格式不同造成的），当您尝试并`get()`超过它的结尾时，您将收到此异常。

**编辑：**

你可以`int filterInt = buffBlend.get();`改为

```
int filterInt = 0;
if (buffBlend.position() < buffBlend.limit())
    filterInt = buffBlend.get(); 
```

如果您对两个缓冲区都这样做，那应该可以保护您免受异常影响，并在一个图像大于另一个图像时与黑色混合。

# sql - 将两行相互比较 SQL Server

> ID：13633531
> 
> 赞同：1
> 
> 时间：2012-11-29T19:48:29.790
> 
> 标签：sql, sql-server, sql-server-2008

我正在尝试构建一个查询，该查询需要一堆数据并查找单个列 ( `PHONE`) 的重复项，然后输出整行。我已经成功地将我的数据池缩小到 4 个结果（这是正确的）。现在我也在尝试显示重复的行，所以例如我想看到如下内容：

```
+--------+-------+--------------+
|  Name  |  Age  |  Phone       |
|  Abby  |  20   | 123-456-7890 |
|  Mike  |  42   | 123-456-7890 |
|  Abel  |  32   | 123-555-0000 |
|  John  |  24   | 123-555-0000 |
+--------+-------+--------------+ 
```

但我的查询只输出以下内容：

```
+--------+-------+--------------+
|  Name  |  Age  |  Phone       |
|  Abby  |  20   | 123-456-7890 |
|  Abel  |  32   | 123-555-0000 |
+--------+-------+--------------+ 
```

如何显示 Mike 和 John 以及 Abby 和 Abel？

我目前的查询是：

```
SELECT DISTINCT C.ACCOUNT,
                C.ADATE,
                C.ATIME,
                C.PHONE,
                C.PATIENTID,
                C.RN
FROM   (SELECT A.ACCOUNT,
               A.ADATE,
               A.ATIME,
               M.HPHONE,
               Row_number()
                 OVER (
                   PARTITION BY M.HPHONE
                   ORDER BY M.HPHONE) AS RN
        FROM   MWAPPTS A
               JOIN CLMASTER M
                 ON A.ACCOUNT = M.ACCOUNT
        WHERE  ( ADATE >= '2012-11-30 00:00:00.000'
                 AND ADATE <= '2012-12-03 00:00:00.000' )
               AND DEPARTMENT LIKE '%bowie%'
               AND A.USERFLAG IN ( 'U' )) RESULTS(ACCOUNT, ADATE, ATIME, PHONE, RN)
       JOIN (SELECT A.ACCOUNT,
                    A.ADATE,
                    A.ATIME,
                    M.HPHONE,
                    A.PATIENTID,
                    Row_number()
                      OVER (
                        PARTITION BY M.HPHONE
                        ORDER BY M.HPHONE) AS RN
             FROM   MWAPPTS A
                    JOIN CLMASTER M
                      ON A.ACCOUNT = M.ACCOUNT
             WHERE  ( ADATE >= '2012-11-30 00:00:00.000'
                      AND ADATE <= '2012-12-03 00:00:00.000' )
                    AND DEPARTMENT LIKE '%bowie%'
                    AND A.USERFLAG IN ( 'U' )) C(ACCOUNT, ADATE, ATIME, PHONE, PATIENTID, RN)
         ON RESULTS.ACCOUNT = C.ACCOUNT
WHERE C.RN <> 1
ORDER  BY C.PHONE,
          C.RN 
```

提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T19:57:59.610

您的示例代码中有很多字段未在示例输出中引用，因此我将从头开始，仅使用示例中的字段：

```
select
    Name, Age, Phone
from
    _yourtable_
where
    Phone in

        (select
            Phone
        from
            _yourtable_
        group by
            Phone
        having
            count(*) > 1
        ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T20:05:22.073

像这样的东西应该工作：

```
With r as (
  Select
    a.Account,
    a.ADate,
    a.Atime,
    m.HPhone,
    a.PatientID
  From
    MwAppts a
      Inner Join
    ClMaster m
      On a.Account = m.Account
  Where
    ADate >= '2012-11-30' And
    ADate <= '2012-12-03' And -- it's generally considered better to do < endday + 1, as this works if you have datetime fields too
    Department Like '%bowie%' And
    a.UserFlag In ( 'U' )
)

Select Distinct -- Might not need distinct
  r.Account,
  r.ADate,
  r.ATime,
  r.HPhone,
  r.PatientID
From (
    Select
      HPhone
    From
      r
    Group By
      HPhone
    Having
      Count(*) > 1
    ) dupPhones
    Inner Join
  r 
    On dupPhones.HPhone = r.HPhone
Order By
  r.HPhone 
```

# entity-framework - 如何检查实体框架 5 是否与 .net 框架 4.5 一起运行

> ID：13633534
> 
> 赞同：0
> 
> 时间：2012-11-29T19:48:50.603
> 
> 标签：entity-framework, .net-4.5

如果实体框架 5 在我的项目中基于 .net 框架 4.5 或 .net 框架 4.0，我会感到困惑，因为当我从 nuget 将 ef5 添加到我的项目时，它显示运行时版本为 v4.0.30319，如附图所示。（我认为它应该是 v4.5.50709？）

在项目设置中，目标框架正确设置为 .Net Framework 4.5，我使用的是 Visual Studio 2012。

如果它不使用 .net framework 4.5。我该如何确保它使用的是 .net framework 4.5？谢谢你的帮助。

![这里](../Images/6f261eac0bef80ee28b976b0ce877c96.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T19:50:48.720

没有 4.5 运行时。4.5 框架构建在 4.0 运行时和 CLR 之上。你所[看到的是预期的](http://www.hanselman.com/blog/NETVersioningAndMultiTargetingNET45IsAnInplaceUpgradeToNET40.aspx)。

# android - OnSharedPreferenceChangeListener 未调用 #2

> ID：13633536
> 
> 赞同：3
> 
> 时间：2012-11-29T19:49:02.257
> 
> 标签：android, sharedpreferences

好的，我开始从 Google 的 android 实现这个可怕的代码。未调用 OnSharedPreferenceChangeListener。这是我的代码，你能建议吗？

类定义：

```
private SharedPreferences sPrefs;
private PreferenceChangedListener prefsChangedListener; 
```

我有一个私人内部课程：

```
private class PreferenceChangedListener implements
        OnSharedPreferenceChangeListener {

    public void onSharedPreferenceChanged(
            SharedPreferences sharedPreferences, String key) {
        if (key == "highThreshold") {
            try {
                highThreshold = Float.parseFloat(sharedPreferences
                        .getString(key, "0"));
            } catch (Exception e) {
            }
        }
    }
} 
```

在 OnResume 中尝试了以下代码，并在“Voorkeuren”首选项活动启动后注册了侦听器。两者都失败了。

```
sPrefs = getPreferences(MODE_PRIVATE);
prefsChangedListener = new PreferenceChangedListener(); 
sPrefs.registerOnSharedPreferenceChangeListener(prefsChangedListener ); 
```

我定义了一个扩展 PreferenceActivity 的类 Voorkeuren

```
public class Voorkeuren extends PreferenceActivity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.preferences);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_voorkeuren, menu);
        return true;
    }
} 
```

我打开如下：

```
Intent intent = new Intent(getBaseContext(),Voorkeuren.class);
startActivity(intent); 
```

该类显示良好，并存储会话之间的值。但是如果设置改变，我的应用程序不应该轮询。有任何想法吗？我对 SharedPreferences.Editor 有一些疑问，但我不确定它是如何相关的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T13:25:18.077

不确定您的问题是什么以及想要什么。

但是，您需要进行一项更改。在 onResume 中替换它

```
sPrefs = getPreferences(MODE_PRIVATE);
prefsChangedListener = new PreferenceChangedListener(); 
sPrefs.registerOnSharedPreferenceChangeListener(prefsChangedListener ); 
```

到

```
sPrefs = PreferenceManager.getDefaultSharedPreferences(this);;
prefsChangedListener = new PreferenceChangedListener(); 
sPrefs.registerOnSharedPreferenceChangeListener(prefsChangedListener); 
```

在 onCreate()

# bash - 作业完成后批量提交作业

> ID：13633539
> 
> 赞同：-1
> 
> 时间：2012-11-29T19:49:18.377
> 
> 标签：bash, batch-file

我想编写一个脚本来执行下面概述的步骤。如果有人可以提供有关如何使用脚本修改文件和搜索文件夹的简单示例（不一定能解决我下面的问题），我将不胜感激。

1.  将使用`MyJob`中的作业提交到队列`currentDirectory``myJobShellFile.sh`

2.  完成后`MyJob`，转到`currentDirectory/myJobDataFolder`。中`myJobDataFolder`，有文件夹

    `myJobData.0000` `myJobData.0001` `myJobData.0002` `myJobData.0003`

    我想找到`maxIteration`所有列出的文件夹的最大数量。就在这里`maxIteration=0003`。\

3.  在文件`myJobShellFile.sh`中，最后一行说

    `mpiexec ./main input`我的工作数据文件夹

    我想将此行附加到

    'mpiexec ./main 输入 myJobDataFolder 0003'

4.  我想提交`MyJob`给 que`while maxIteration < 10`

5.  完成后`MyJob`，找到新的`maxIteration`并更改此编号，`myJobShellFile.sh`然后转到第 4 步。

我认为人们编写 python 脚本通常是为了做这些事情，但很难找出如何去做。我可能不知道这个过程的正确术语。我也知道脚本会根据排队系统的不同而略有不同，但我们将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T22:38:52.020

您的问题的很多方面都不清楚，例如“使用 myJobShellFile.sh 在 currentDirectory 中将作业 MyJob 提交到 que”、“将此行附加到 'mpiexec ./main input myJobDataFolder 0003'”的含义，您如何检测何时工作完成，相关部分`myJobShellFile.sh`，以及其他一些细节。如果您可以列出您在作业提交的每次迭代中使用的特定 shell 命令，那么您可以发布一个更好的问题，使用`bash`标签而不是 python。

在下面的脚本中，我`###`在任何行的末尾加上我猜你在说什么的地方。以 结尾的行`###`可能与您实际执行的操作无关，或者可能是伪代码。无论如何，一般的想法是脚本应该执行您在项目 1 到 5 中列出的事情。此脚本假定您已修改`myJobShellFile.sh`为 say
`mpiexec ./main input $1 $2`
而不是
`mpiexec ./main input`
因为使用参数来修改您告诉的内容`mpiexec`比它更简单继续修改 shell 脚本。此外，在我看来，您希望在提交下一个作业之前而不是之后增加 maxIter。如果是这样，请从该`t=$((1$maxIter+1)); maxIter=${t#1}`行中删除 #。注意，请参见表单的 man bash re 扩展的“参数扩展”部分`${var#txt}`，以及“算术扩展”部分重新`$((expression))`形式。和类似的`1$maxIter`形式用于将文本`0018`（不是有效的 bash 数字，因为 8 不是八进制数字）更改为`10018`.

```
#!/bin/sh
./myJobShellFile.sh MyJob    ###
maxIter=0
while true; do 
   waitforjobcompletion      ###
   cd ./myJobDataFolder
   maxFile= $(ls myJobData* | tail -1)
   maxIter= ${maxFile#myJobData.}  #Get max extension
   # If you want to increment maxIter, uncomment next line
   # t=$((1$maxIter+1)); maxIter=${t#1} 
   cd ..
   if [[ 1$maxIter -lt 11000 ]] ; then
      ./myJobShellFile.sh MyJobDataFolder $maxIter
   else
      break
   fi
done 
```

*注意：*（1）要测试小于 1000 个提交的运行，请将 11000 替换为 10000+n；例如，要运行 123 次，请将其替换为 10123。 (2) 在编写上述脚本时，我假设输出目录中不时出现未知数量的输出文件。如果每次运行只出现一个输出文件，并且您只想为值 0000、0001、0002、0999、1000 的每个值运行一次，则使用如下脚本。（对于小于 1000 的数字进行测试，请将 1000 替换为（例如）0020。这些数字中的前导零告诉 bash 用前导零填充生成的数字。）

```
#!/bin/sh
for iter in {0000..1000}; do
   ./myJobShellFile.sh MyJobDataFolder $iter
   waitforjobcompletion      ###
done 
```

(3) 如果系统有一个命令在等待超级计算资源上的作业完成时休眠，则使用该命令代替`waitforjobcompletion`上述脚本是合理的。否则，如果系统有一个命令`jobisrunning`在作业仍在运行时返回 true，请替换`waitforjobcompletion`为以下内容：

```
while jobisrunning ; do sleep 15; done 
```

这将运行 jobisrunning 命令；如果返回 true，shell 将休眠 15 秒，然后重新测试。这是一个示例，说明等待文件出现然后消失：

```
while [ ! -f abc ]; do sleep 3; echo no abc; done
while ls abc >/dev/null 2>&1; do sleep 3; echo an abc; done 
```

第二行的测试可以`[ -f abc ]`代替；我展示了一个更长的示例来说明如何通过将输出和错误消息路由到 /dev/null 来抑制它们。(4) 要反转`while`语句测试的含义，请将单词替换`while`为`until`。例如，`while [ ! -f abc ]; ...`等价于`until [ -f abc ]; ...`。

# custom-error-pages - 未显示错误页面 - 当给出错误的上下文根时

> ID：13633544
> 
> 赞同：1
> 
> 时间：2012-11-29T19:49:30.170
> 
> 标签：custom-error-pages

我在 JBoss 7.x 的上下文根“helloworld”下部署了一个应用程序，该应用程序具有：

Welcome.jsp 和 error.jsp。

web.xml DD 中指定的自定义错误页面为：

```
<error-page>
<error-code>404</error-code>
<location>/error.jsp</location>
</error-page> 
```

当我访问页面时：

```
http://localhost:8080/helloworld/welcome.jsp 
```

我得到了预期的页面。

```
http://localhost:8080/helloworld/welcome_does_not_exist.jsp 
```

带我去：

```
http://localhost:8080/helloworld/error.jsp 
```

然而

```
http://localhost:8080/helloworld_DOES_NOT_EXIST/welcome.jsp 
```

不会将我带到自定义错误页面，但会显示：

> ======== HTTP 状态 404 - /helloworld_DOES_NOT_EXIST/welcome.jsp
> 
> 类型状态报告
> 
> 消息 /helloworld_DOES_NOT_EXIST/welcome.jsp
> 
> 描述 请求的资源 (/helloworld_DOES_NOT_EXIST/welcome.jsp) 不可用。
> 
> JBoss Web/7.0.13.Final
> 
> =========

您能否让我知道如何设置错误页面，以便即使我们指定了错误的上下文根，我们也会得到自定义错误页面？

谢谢。

# python - NameError：名称“大小”未定义-PYTHON

> ID：13633545
> 
> 赞同：3
> 
> 时间：2012-11-29T19:49:33.010
> 
> 标签：python, error-handling, biopython

有人可以建议我解决以下错误的方法吗？

```
>>> from Bio import SeqIO
>>> sizes=[len(rec) for rec in SeqIO.parse("CE2Kb_2Kb_F01_2124_5.fasta", "fasta")
 len(seq), min(seq), max(seq)

>>> sizes

**Traceback (most recent call last):
  File "<pyshell#32>", line 1, in <module>
    sizes
NameError: name 'sizes' is not defined** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T19:50:32.107

看起来你没有关闭你的列表理解......

# java - 使用杰克逊解析geojson

> ID：13633547
> 
> 赞同：1
> 
> 时间：2012-11-29T19:49:37.563
> 
> 标签：java, jackson, geojson

我有一些对应于 PostGIS Point 对象的 GeoJSON。

这是一个例子：

```
{"type":"Point","coordinates":[-397408.355686851020437,7575590.819041009992361]} 
```

我尝试通过执行以下操作将其解析为 Java 中的 postgis 点对象：

```
 ObjectMapper mapper = new ObjectMapper();
                Point coors = null;
                 try {
                     coors = mapper.readValue(str, Point.class);
                } catch (JsonParseException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (JsonMappingException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } 
```

我得到以下 JsonMappingException：

```
org.codehaus.jackson.map.JsonMappingException: Conflicting setter definitions for property "x": org.postgis.Point#setX(1 params) vs org.postgis.Point#setX(1 params)
    at org.codehaus.jackson.map.deser.StdDeserializerProvider._createAndCache2(StdDeserializerProvider.java:346)
    at org.codehaus.jackson.map.deser.StdDeserializerProvider._createAndCacheValueDeserializer(StdDeserializerProvider.java:321)
    at org.codehaus.jackson.map.deser.StdDeserializerProvider.findValueDeserializer(StdDeserializerProvider.java:167)
    at org.codehaus.jackson.map.deser.StdDeserializerProvider.findTypedValueDeserializer(StdDeserializerProvider.java:188)
    at org.codehaus.jackson.map.ObjectMapper._findRootDeserializer(ObjectMapper.java:2820)
    at org.codehaus.jackson.map.ObjectMapper._readMapAndClose(ObjectMapper.java:2719)
    at org.codehaus.jackson.map.ObjectMapper.readValue(ObjectMapper.java:1854)
    at dao.impl.PostGisDaoImpl.getOsmPoiNodes(PostGisDaoImpl.java:53)
    at service.OsmDBService.main(OsmDBService.java:24)
Caused by: java.lang.IllegalArgumentException: Conflicting setter definitions for property "x": org.postgis.Point#setX(1 params) vs org.postgis.Point#setX(1 params)
    at org.codehaus.jackson.map.introspect.POJOPropertyBuilder.getSetter(POJOPropertyBuilder.java:194)
    at org.codehaus.jackson.map.deser.BeanDeserializerFactory.addBeanProps(BeanDeserializerFactory.java:1065)
    at org.codehaus.jackson.map.deser.BeanDeserializerFactory.buildBeanDeserializer(BeanDeserializerFactory.java:654)
    at org.codehaus.jackson.map.deser.BeanDeserializerFactory.createBeanDeserializer(BeanDeserializerFactory.java:583)
    at org.codehaus.jackson.map.deser.StdDeserializerProvider._createDeserializer(StdDeserializerProvider.java:432)
    at org.codehaus.jackson.map.deser.StdDeserializerProvider._createAndCache2(StdDeserializerProvider.java:341)
    ... 8 more 
```

有谁知道这里有什么问题？谢谢

编辑：

新例外：

```
org.codehaus.jackson.map.JsonMappingException: Conflicting setter definitions for property "x": org.postgis.Point#setX(1 params) vs org.postgis.Point#setX(1 params)
    at org.codehaus.jackson.map.deser.StdDeserializerProvider._createAndCache2(StdDeserializerProvider.java:346)
    at org.codehaus.jackson.map.deser.StdDeserializerProvider._createAndCacheValueDeserializer(StdDeserializerProvider.java:321)
    at org.codehaus.jackson.map.deser.StdDeserializerProvider.findValueDeserializer(StdDeserializerProvider.java:167)
    at org.codehaus.jackson.map.deser.std.StdDeserializer.findDeserializer(StdDeserializer.java:596)
    at org.codehaus.jackson.map.deser.BeanDeserializer.resolve(BeanDeserializer.java:379)
    at org.codehaus.jackson.map.deser.StdDeserializerProvider._resolveDeserializer(StdDeserializerProvider.java:438)
    at org.codehaus.jackson.map.deser.StdDeserializerProvider._createAndCache2(StdDeserializerProvider.java:383)
    at org.codehaus.jackson.map.deser.StdDeserializerProvider._createAndCacheValueDeserializer(StdDeserializerProvider.java:321)
    at org.codehaus.jackson.map.deser.StdDeserializerProvider.findValueDeserializer(StdDeserializerProvider.java:167)
    at org.codehaus.jackson.map.deser.StdDeserializerProvider.findTypedValueDeserializer(StdDeserializerProvider.java:188)
    at org.codehaus.jackson.map.ObjectMapper._findRootDeserializer(ObjectMapper.java:2820)
    at org.codehaus.jackson.map.ObjectMapper._readMapAndClose(ObjectMapper.java:2719)
    at org.codehaus.jackson.map.ObjectMapper.readValue(ObjectMapper.java:1854)
    at dao.impl.PostGisDaoImpl.getOsmPoiNodes(PostGisDaoImpl.java:53)
    at service.OsmDBService.main(OsmDBService.java:24)
Caused by: java.lang.IllegalArgumentException: Conflicting setter definitions for property "x": org.postgis.Point#setX(1 params) vs org.postgis.Point#setX(1 params)
    at org.codehaus.jackson.map.introspect.POJOPropertyBuilder.getSetter(POJOPropertyBuilder.java:194)
    at org.codehaus.jackson.map.deser.BeanDeserializerFactory.addBeanProps(BeanDeserializerFactory.java:1065)
    at org.codehaus.jackson.map.deser.BeanDeserializerFactory.buildBeanDeserializer(BeanDeserializerFactory.java:654)
    at org.codehaus.jackson.map.deser.BeanDeserializerFactory.createBeanDeserializer(BeanDeserializerFactory.java:583)
    at org.codehaus.jackson.map.deser.StdDeserializerProvider._createDeserializer(StdDeserializerProvider.java:432)
    at org.codehaus.jackson.map.deser.StdDeserializerProvider._createAndCache2(StdDeserializerProvider.java:341)
    ... 14 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:04:04.790

问题的原因是它既看到了变量的定义，也看到了变量的 setter 方法，`double x;`并且`setX(double x)`因为它被定义了两次。您需要告诉它选择一个或另一个，方法是[`@XmlAccessorType`](http://docs.oracle.com/javaee/5/api/javax/xml/bind/annotation/XmlAccessorType.html)在类的顶部添加 并将其设置为[`XmlAccessType.FIELD`](http://docs.oracle.com/javaee/5/api/javax/xml/bind/annotation/XmlAccessType.html)或您喜欢使用的任何一个。例如：

```
@XmlAccessorType(XmlAccessType.FIELD)
public class Point {
  ...
} 
```

* * *

如果您[`Point`](http://postgis.refractions.net/documentation/javadoc/org/postgis/Point.html)从这里使用它与我的预期不同。这是因为它实际上有两个 set 方法：[`void setX(double x)`](http://postgis.refractions.net/documentation/javadoc/org/postgis/Point.html#setX%28double%29)和[`void setX(int x)`](http://postgis.refractions.net/documentation/javadoc/org/postgis/Point.html#setX%28int%29)

因此，在这种情况下，您需要字段访问。仍在寻找如何以编程方式而不是注释来设置它。

**更新：**我认为在这种情况下，您最好的选择是为[`Point`](http://postgis.refractions.net/documentation/javadoc/org/postgis/Point.html)该类创建一个包装器，然后您可以将其拉回。所以像：

```
public class MyPoint {

    private String type;

    @JsonIgnore
    public Point point;

    public MyPoint(){
        this.point = new Point();
    }

    public double[] getCoordinates(){
        return new double[] {this.point.getX(), this.point.getY()};
    }

    public void setCoordinates(double[] x){
        if (x.length == 2){
            this.point.setX(x[0]);
            this.point.setY(x[1]);
        }
    }

    public String getType() {
        return type;
    }

    public void setType(String type) {
        this.type = type;
    }

} 
```

然后将您的代码更改为：

```
ObjectMapper mapper = new ObjectMapper();
Point coors = null;
 try {
     MyPoint mine = mapper.readValue(str, MyPoint.class);
     coors = mine.point;
} catch (JsonParseException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (JsonMappingException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

也许有更好的方法，但这应该有效。

**编辑：**

这是我运行的测试，看看这是否有效：

```
public static void main(String[] args) {
    String str = "{\"type\":\"Point\",\"coordinates\":[-397408.355686851020437,7575590.819041009992361]}";

    ObjectMapper mapper = new ObjectMapper();
    Point coors = null;
     try {
         MyPoint mine = mapper.readValue(str, MyPoint.class);
         coors = mine.point;
    } catch (JsonParseException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (JsonMappingException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
     System.out.println(coors);
} 
```

我得到的输出：

```
POINT(-397408.355686851 7575590.81904101) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T04:15:48.757

异常指出了问题，您可以从链接到的 Javadoc 中看到。有两个备用二传手：

```
void setX(double x)
void setX(int x) 
```

杰克逊不想猜测它应该尝试使用哪一个。拥有一个字段和设置器是没有问题的；方法（setter）优先于字段。

由于您无法修改`Point`，您可能需要使用[混合注释](http://www.cowtowncoder.com/blog/archives/2009/08/entry_305.html)。或者如果您愿意，可以自定义解串器。

# http - 使用“UrlFetchApp”的 PUT 请求返回“错误请求”，但 Google Apps 脚本之外的相同请求有效

> ID：13633549
> 
> 赞同：1
> 
> 时间：2012-11-29T19:49:44.257
> 
> 标签：http, curl, https, google-apps-script

这是发出请求的 Google Apps 脚本：

```
UrlFetchApp.fetch('https://user:password@sitename.com/api', {
  method: 'put',
  headers: { 'Accept': '*/*' },
  payload: 'foo=bar&baz=qux'
}); 
```

可以成功发布到[http://requestb.in/](http://requestb.in/)，供查看：

```
PUT /1bfk94g1 HTTP/1.1
User-Agent: Mozilla/5.0 (compatible; GoogleDocs; script; +http://docs.google.com)
Host: requestb.in
Content-Type: application/x-www-form-urlencoded
Content-Length: 43
Connection: keep-alive
Accept-Encoding: gzip
Accept: */*

foo=bar&baz=qux 
```

但是当请求 URL 是时失败`https://user:password@sitename.com/api`。显示的唯一错误信息是`Bad request: https://user:password@sitename.com/api`。

我构建了一个`curl`产生完全相同的 HTTP 请求的命令：

```
curl -XPUT \
     -H 'Accept-Encoding: gzip' \
     --user-agent 'Mozilla/5.0 (compatible; GoogleDocs; script; +http://docs.google.com)' \
     -d foo='bar' \
     -d baz='qux'\
     https://user:password@sitename.com/api 
```

哪个成功发布到`https://user:password@sitename.com/api`. 两个相同的请求怎么会有不同的结果？关于我的 Google Apps 脚本，我是否遗漏了什么？我试过使用调试器，但没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T20:11:46.120

似乎`UrlFetchApp`还不支持在 URL 中使用凭据的请求。HTTP标`Authorization`头需要手动构建。以下作品：

```
var response = UrlFetchApp.fetch('https://sitename.com/api', {
  headers: {
    'Authorization': 'Basic ' + Utilities.base64Encode(user + ':' + password)
  }
}); 
```

# vba - Word VBA 和多个单词实例

> ID：13633551
> 
> 赞同：2
> 
> 时间：2012-11-29T19:49:46.877
> 
> 标签：vba, ms-office, ms-word

早上好。

我在让我的代码找到其他单词实例时遇到问题，并且在经过大量谷歌搜索后遇到了障碍。

下面的我的代码将找到所有打开的 word 文档并将它们填充到组合框中。

我的问题是我们的应用程序（我无法控制这些）将在新实例中打开 word 文档，因此我的代码将无法找到/控制这些文档。

有任何想法吗？

```
Dim objWordDocument As Word.Document
Dim objWordApplication As Word.Application

'//find all open word documents
Set objWordApplication = GetObject(, "Word.Application")

'//clear combobox
    OpenDocs.Clear

'//add all open documents to combo box

        For Each objWordDocument In objWordApplication.Documents

            OpenDocs.AddItem objWordDocument.Name

        Next objWordDocument 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T20:57:19.467

根据我所见并理解，唯一可靠的方法是遍历 word 的运行实例，然后依次杀死每个实例，以确保您获得下一个实例。

由于单词在运行对象表中的每个实例都以完全相同的方式注册，因此如果不先关闭您正在查看的对象，就无法通过它们。

这种方法的一个选项（可能是不可取的）是在您终止应用程序实例时获取所有文件名，然后将它们全部加载回您创建的一个实例中。

或者，如果您知道打开文件的名称，您可以通过打开文件名“getObject”，因为 Word 会将其文档名称推送到正在运行的对象表中，遗憾的是这听起来不像您的情况。

如果不编写活动的 x MFC 服务，您将无法做您想做的事情。

我希望这会有所帮助。

编辑：

关于子类化和 Windows API 以获得句柄以改变焦点进行了广泛的讨论。[http://www.xtremevbtalk.com/showthread.php?t=314637](http://www.xtremevbtalk.com/showthread.php?t=314637)

如果您首先深入到该头部并能够通过 hwnd 枚举单词实例，那么您可能会依次关注每个实例，然后列出文件名。不过我确实警告过你；那是一些令人讨厌的子类化，这是只有一些真正想不小心破坏东西的人才会玩的黑魔法。

无论如何，如果您想查看一个实例，请杀死，重复，重新打开试试这个：

改编自此线程：[http ://www.xtremevbtalk.com/showthread.php?t=316776](http://www.xtremevbtalk.com/showthread.php?t=316776)

```
Set objWordApplication = GetObject(, "Word.Application")

'//clear combobox
    OpenDocs.Clear

'//add all open documents to combo box

   Do While Not objWordDocument is nothing 

        For Each objWordDocument In objWordApplication.Documents

            OpenDocs.AddItem objWordDocument.Name

        Next objWordDocument
        objWordApplication.Quit False
        Set objWordApplication = Nothing
        Set objWordApplication = GetObject(, "Word.Application")
   loop

   ** use create object to open a new instance of word here and then go though
   ** your list of files until you have opened them all as documents in the new
   ** instance. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-28T19:13:41.843

这是一个旧线程，但我也需要遍历 Word 实例并在这里碰到。

按照@Pow-Ian 的建议，我尝试做

> 如果您首先深入到该头部并能够通过 hwnd 枚举单词实例，那么您可能会依次关注每个实例，然后列出文件名。

虽然我已经设法获得了所有的句柄，但我通过[AccessibleObjectFromWindow](https://stackoverflow.com/questions/54374826/how-to-iterate-over-multiple-word-instances-with-accessibleobjectfromwindow/54406684#54406684)找到了一个更简单的关于办公应用程序的策略，我们的问题现在已经解决了。

另外，我相信代码显示@Pow-lan's 在

```
Do While Not objWordDocument is nothing 
```

应该是：

```
Do While Not objWordApplication is nothing 
```

# git - 在 Gitolite 存储库中搜索源的方法？

> ID：13633558
> 
> 赞同：2
> 
> 时间：2012-11-29T19:50:07.997
> 
> 标签：git, gitolite

在几个 Gitolite 存储库中有一堆 git 项目。有没有办法在 Gitolite 存储库中搜索关键字的来源？

我希望能够在所有 git 项目中搜索关键字，而不必先在本地手动克隆每个项目。对于那些由 Jenkins 构建的项目，源代码暴露在可以搜索的目录中。但目前并非所有这些都是以这种方式构建的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T20:32:43.117

我通过电子邮件发送的一位前同事知道这样做的方法。在存储 repo 的机器上，cd 进入包含项目的存储库目录。在单个项目的 .git 目录中，您可以在 HEAD 或分支上使用“git grep”。要搜索所有目录，请使用项目目录的目录中的循环：

```
for x in *; do
  cd $x
  git grep "MyString" HEAD
  cd ..
done 
```

具有更多选项的示例，包括包含每个匹配项的项目名称：

```
for x in *; do
  cd $x
  git grep -i "mystring" HEAD -- '*.java' | sed "s|\(.*\)|$x-->\1|"
  cd ..
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T20:07:31.810

Gitolite 只是一个[授权层](http://sitaramc.github.com/gitolite/auth.html)，它拦截：

*   git 命令
*   用户身份

, 并决定是否允许 git 命令继续。

它与搜索功能本身无关。

您需要另一个应用程序来在您的 git 存储库中实现搜索本身，例如**[Elasticsearch](http://www.elasticsearch.org/)**。
请参阅“[使用 ElasticSearch 搜索 git 存储库](http://dev.af83.com/2011/11/15/searching-a-git-repository-with-elasticsearch.html)”。

然后，您可以将它与 gitolite 结合（以允许搜索或过滤搜索结果，具体取决于 gitolite 访问规则）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T14:50:52.877

好吧，你总是可以创建一个“grep”命令。毕竟，如果你可以运行 'symbolic-ref'，那么 grep 是什么？

一个问题是 gitolite 对允许字符的限制会限制提供的任意正则表达式。（如果有人真的，*真的*想要这个——我的意思是他们在邮件列表中询问，并且至少有更多的人说“是的，我们想要它！”），我可以创建一种方法来允许一些程序有不受限制的论点。该代码只是等待从'git-annex'分支中提取，但到目前为止还没有对测试的热爱）。

你甚至可以让它搜索多个项目。例如，要使其搜索用户具有读取权限的*所有项目，您可以从以下开始：*

```
gitolite list-phy-repos | gitolite access % $GL_USER W any | grep -v DENIED | cut -f1 
```

然后对于提出的每个 repo，你 cd 进入它并运行 'git grep'

复杂性的下一个阶段将是您想要搜索/不搜索的存储库列表（因为您恰好是可以访问*所有*存储库的人，而这并不是您真正想要的！）。这变得更难有效地设计。使用某种组名在 conf 文件本身中标记可搜索的存储库可能更容易。grep 命令可以很容易地检查该特殊组中的成员身份作为附加约束。

西塔拉姆

# javascript - Chrome 23 中的 Vibration API 隐藏在哪里？

> ID：13633561
> 
> 赞同：7
> 
> 时间：2012-11-29T19:50:11.430
> 
> 标签：javascript, html, google-chrome, chromium, vibration

根据Peter Beverloo 博客上的一篇[文章](http://peter.sh/2012/08/key-bindings-for-extensions-and-media-streams-for-the-web-audio-api/)，“Webkit 前缀已从 Vibration API 实现中删除，因为它达到了候选推荐。”

在[Firefox](https://developer.mozilla.org/en-US/docs/DOM/window.navigator.vibrate)中，Vibration API 可以在 navigator.vibrate 中找到（根据[规范](http://www.w3.org/TR/2012/CR-vibration-20120508/)），而在 Chrome 23 中则不然——有或没有 webkit 前缀。我尝试在 chrome://flags 中启用*实验性 JavaScript ，但没有效果。*

尽管在 devtools 中玩耍并在网上进行了大量搜索，但我仍然无法找到此 API。它藏在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:51:19.667

该博客只是表明该 API 在 WebKit 中没有前缀。我们在桌面版 Chrome 中没有它，从版本 25 开始，我们在 Android 版 Chrome 中也没有它

# spring - 选择了 jstl 下拉菜单

> ID：13633563
> 
> 赞同：0
> 
> 时间：2012-11-29T19:50:25.737
> 
> 标签：spring, jsp, jstl

所以我有一个类似于下图的弹簧绑定下拉菜单。我的问题是，只要 getAllID 值为 true，我就想将 ALL ID 显示为所选选项。我知道所选值是基于弹簧绑定元素提供的值，在这种情况下`studentID`，但无论如何我可以在我的布尔条件为真时覆盖它？

```
<spring:bind path="student.studentID">      
   <select name="${status.expression}" value="${status.value}">
       <option />
    <option value="001">1</option>
    <option value="002">2</option>
    <option value="003">3</option>
    <option value="ALLID"
        <c:if test='${student.getAllID eq true}'> Selected </c:if>>ALL ID
    </option>

     </select>
</spring:bind> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T20:11:08.773

我想我得到了修复。添加 c:if 到 Select 标签：

```
<c:if test='${student.getAllID ne true}'>
            value="${status.value}" 
</c:if> 
```

# javascript - jqMobi UPS 条码插件

> ID：13633569
> 
> 赞同：1
> 
> 时间：2012-11-29T19:50:45.087
> 
> 标签：javascript, ios, html, jqmobi

我需要一个使用 appMobi 和 jqMobi 作为框架的基于 Web 的应用程序的插件。我需要能够在进行条形码扫描时读取 UPC 代码。我可以让它在 Android 上完美运行，但无法使用我当前的代码与 IOS 一起使用。有谁知道 appMobi、jqMobi 的插件或 java-script 中的一种方法来完成这项工作？

我进行了大量研究，并遇到了一些建议，可以从 App Store 中实现另一个条形码应用程序，如 pic2shop，但似乎无法使其正常工作。只是想知道是否有人连续为 jqMobi 创建了一个插件会很棒？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-29T20:10:55.293

appMobi 有一个 API，参见： http: [//www.appmobi.com/documentation/jsAPI/device/scanBarcode/index.html](http://www.appmobi.com/documentation/jsAPI/device/scanBarcode/index.html)

# php - 如何仅追加新数据而不是全部？

> ID：13633574
> 
> 赞同：-2
> 
> 时间：2012-11-29T19:51:07.970
> 
> 标签：php, jquery, ajax

如果在数据库中找到新数据，我正在使用 ajax 时间函数来不断检查新数据并附加它。但是每半秒，整个数据都会被附加，而不是仅附加新数据。请帮助。

php函数(load.php)

```
 $tocom=$_POST['tocom'];
    $sql=mysqli_query($db3->connection,"SELECT * FROM chat_com where to='$tocom'  ORDER by time DESC");
    while($row=mysqli_fetch_array($sql)){

        $tocomr=$row['tocom'];
        $text=$row['text'];
        echo $text;

    } 
```

Ajax 功能就在这里。

```
function chat_com_one(id, name) {
$('#chatcom').show('fast');
(function chatcom_load_one(id, name) {
    $.post('load.php', {tocom:id}, function(data) {
        $('#chat_win').append(data);
        setTimeout(chatcom_load_one(id, name), 500);
    });
}(id, name)); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T08:31:30.370

更改`setTimeout`并`setInterval` 查看更改：

```
function chat_com_one(id, name) {
 $('#chatcom').show('fast');
 (function chatcom_load_one(id, name) {
  $.post('load.php', {tocom:id}, function(data) {
     $('#chat_win').append(data);
     setInterval(chatcom_load_one(id, name), 500);
  });
}(id, name)); 
```

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T19:54:08.147

如果没有看到任何`if()`检查元素是否尚未添加，则使用 now`WHERE`子句来限制查询的结果。或者只是删除旧内容并将新内容作为一个整体而不是附加（但这无效）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T19:54:17.090

好吧，要么你需要改变你的 SQL 语句，要么不做追加，只重写整个 div。

# c++ - 如何使用 SOCI 从数据库中获取整行？

> ID：13633580
> 
> 赞同：0
> 
> 时间：2012-11-29T19:51:25.430
> 
> 标签：c++, postgresql, postgresql-9.1, soci

...并将其保存为自定义对象类型？我正在使用 PostgreSQL。当我将所有内容都放在一个文件中时，它就可以工作。但我想把它分成类文件，就像你在用 cpp 编写时所做的那样。当我将代码分成 *.h 和 *.cpp 文件时，我遇到了错误。

这是我的文件：

**测试.h**

```
class MyInt
{
public:
    MyInt();
    MyInt(int i);

    void set(int i);
    int get() const;

private:
    int i_;
}; 
```

**测试.cpp**

```
#include "test.h"
#include <soci.h>
#include <postgresql/soci-postgresql.h>

MyInt::MyInt()
{

}

MyInt::MyInt(int i)
{
    this->i_ = i;
}

int MyInt::get() const
{
    return this->i_;
}

void MyInt::set(int i)
{
    this->i_ - i;
}

namespace soci
{
    template <>
    struct type_conversion<MyInt>
    {
        typedef int base_type;

        static void from_base(int i,  soci::indicator ind, MyInt & mi)
        {
            if (ind ==  soci::i_null)
            {
                throw soci_error("Null value not allowed for this type");
            }

            mi.set(i);
        }

        static void to_base(const MyInt & mi, int & i,  soci::indicator & ind)
        {
            i = mi.get();
            ind = soci::i_ok;
        }
    };
} 
```

**主文件**

```
#include <iostream>
#include "test.h"

int main(int argc, char **argv)
{

    MyInt i;
    sql.open(soci::postgresql, "dbname=mydb user=postgres password=postgrespass");
    sql << "SELECT count(*) FROM person;", soci::into(i);
    std::cout << "We have " << i.get() << " persons in the database.\n";
    sql.close();

    return 0;
} 
```

我这样编译它：

> g++ main_test.cpp test.h test.cpp -o App -lsoci_core -lsoci_postgresql -ldl -lpq -I /usr/local/include/soci -I /usr/include/postgresql

并得到了这些错误：

```
In file included from /usr/local/include/soci/into-type.h:13:0,
                 from /usr/local/include/soci/blob-exchange.h:12,
                 from /usr/local/include/soci/soci.h:18,
                 from main_test.cpp:3:
/usr/local/include/soci/exchange-traits.h: In instantiation of â€soci::details::exchange_traits<MyInt>â€™:
/usr/local/include/soci/into.h:29:60:   instantiated from â€soci::details::into_type_ptr soci::into(T&) [with T = MyInt, soci::details::into_type_ptr = soci::details::type_ptr<soci::details::into_type_base>]â€™
main_test.cpp:29:59:   instantiated from here
/usr/local/include/soci/exchange-traits.h:35:5: error: incomplete type â€soci::details::exchange_traits<MyInt>â€™ used in nested name specifier 
```

**上述问题已解决，请查看@JohnBandela ANSWER。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T20:34:12.563

您专门从事 type_conversion 的代码

```
template<>
struct type_conversion<MyInt> 
```

需要在 test.h 而不是 test.cpp 中。问题是如果你像现在一样在 test.cpp 中拥有它，它在你使用 SOCI 的 main.cpp 中不可见

# google-apps-script - 添加提醒时的“CalendarApp：不匹配：etags” - Google Apps 脚本

> ID：13633582
> 
> 赞同：1
> 
> 时间：2012-11-29T19:51:28.870
> 
> 标签：google-apps-script, etag

我有一个小的 Google Apps 脚本，它处理电子表格中的日期列并在日历（生日）中生成条目。

工作正常，但是在向（最近创建的）CalendarEvent 添加提醒时，会引发错误：

> 服务错误：CalendarApp：不匹配：etags = ["GUQKRgBAfip7JGA6WhJb"]，版本 = [63489901413]

我试图在创建事件后执行 1 秒睡眠（等待在日历中完成更改），但没有运气......

BTW，事件创建成功，只能添加提醒。

PD：日历是我拥有的，但不是我的主日历。

以下是部分代码：

```
 try
  {                
    birthday = new Date(Data[i][BirthColumn]);        
    birthday.setFullYear(today.getFullYear());                                  
    birthday.setUTCHours(12);

    birthlist += Data[i][NameColumn] + " --> " + birthday + "\n";

    calendarevent = cal.createAllDayEventSeries("¡Cumpleaños " + Data[i][NameColumn] + "!", birthday, CalendarApp.newRecurrence().addYearlyRule().times(YearsInAdvance));

    if (calendarevent == null)          
      success = false;
    else
    {
      //This sentence fails every single time.
      calendarevent.addEmailReminder(0);
      calendarevent.addPopupReminder(0);
      calendarevent.addSmsReminder(0);
    }    
  }  
  catch (ee)
  {         
     var row = i + 1;
     success = false;

    errlist += "Error on row " + row + ": check name and birth date. Exception Error: " + ee.message + "\n";                
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T14:02:12.723

这是我最终更改以使其工作的代码部分，正如 Serge insas 之前建议我的那样：

```
 if (calendarevent == null)          
      success = false;
    else
    {
      cal.getEventSeriesById(calendarevent.getId()).addEmailReminder(0);          
      cal.getEventSeriesById(calendarevent.getId()).addPopupReminder(0);
      cal.getEventSeriesById(calendarevent.getId()).addSmsReminder(0);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T20:01:04.857

这是一个[已知问题](http://code.google.com/p/google-apps-script-issues/issues/detail?id=264)`cal.getEventSeriesById(eventID)`，请参阅评论 nr 67 以了解有效的解决方法：诀窍是在您获得 Id 后`.getId()` 使用它 重新调用您要添加的每个项目（提醒、弹出...）的事件一些脚本，它为我解决了这个问题。

# c - 为什么这个程序不报错？

> ID：13633585
> 
> 赞同：0
> 
> 时间：2012-11-29T19:51:40.290
> 
> 标签：c, kernighan-and-ritchie

> **可能重复：**
> [int c = getchar()？](https://stackoverflow.com/questions/7119470/int-c-getchar)

```
#include <stdio.h>

   main()
   {
       int c;
       c = getchar();
       while (c != EOF) {
           putchar(c);
           c = getchar();
       }
   } 
```

我没有使用 C 的经验，但我知道 C++。我想问**这里的“c”被声明为整数类型，但令人惊讶的是，当我运行这个程序时，它甚至接受字符**。谁能解释一下。

参考：C 编程 Ritchie/kernighan

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T19:53:26.573

> 它接受偶数字符

实际上，`getchar()`返回`int`，所以这里没有问题。

即使它返回`char`，因为`char`和`int`都是相同符号的整数类型并且`int`比 更宽`char`，所以 an`int`总是可以`char`使用隐式转换来存储 a （有时它被称为“向上转换”，但它并不是真正的转换，因为它是隐式的）。基本上这意味着

```
int n = 'a'; 
```

完全有效 C.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T19:53:54.407

首先，`getchar`返回一个`int`，而不是`char`。

其次，`char`扩大到一个`int`at任务。

# glsl - 您可以在 GLSL 着色器中通过引用传递矩阵吗？

> ID：13633586
> 
> 赞同：13
> 
> 时间：2012-11-29T19:51:43.077
> 
> 标签：glsl

如何在 GLSL 着色器中通过引用传递？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-29T19:57:55.407

您可以将属性标记为`inout`函数签名中，这将使属性有效地“通过引用传递”

例如，

```
void doSomething( vec3 trans, inout mat4 mat ) 
```

这里`mat`是“按引用传递”，`trans`是按值传递。

`mat`必须是可写的（即不是统一的属性）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-11-20T04:50:40.407

默认情况下，所有参数都是“按值传递”。您可以使用这些“参数限定符”更改此行为：

在：“按值传递”；如果函数中参数的值发生变化，则调用语句中的实际参数不变。

out：“通过引用”；调用函数时参数未初始化；参数值的任何更改都会更改调用语句中的实际参数。

inout：参数的值由调用语句初始化，函数所做的任何更改都会更改调用语句的实际参数。

所以如果你不想复制，你应该使用`out`

# c - strtok()，没有令牌匹配

> ID：13633593
> 
> 赞同：6
> 
> 时间：2012-11-29T19:52:16.740
> 
> 标签：c, string, strtok

我试图使用`strtok()`;解析字符串 我正在尝试解析由分号 ( ; ) 分隔的字符串。但是当我输入一个不带分号的字符串 to 时`strtok()`，它会返回整个字符串。`NULL`如果没有令牌匹配，它不应该返回吗？

这是我的代码：

```
int main(int argc, char** argv) 
{
    char cmd[] = "INSERT A->B B->C INSERT C->D";
    char delim[] = ";";
    char *result = NULL;

    result = strtok(cmd,delim);

    if(result == NULL)
    {
        printf("\n NO TOKENS\n");
    }
    else
    {

        printf("\nWe got something !! %s ",result);

    }

    return (EXIT_SUCCESS);
} 
```

输出是：我们得到了一些东西！插入 A->B B->C 插入 C->D

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-29T20:00:21.897

不，分隔符意味着它是分隔标记的东西，所以如果没有分隔符，那么整个字符串被认为是第一个标记

考虑是否有两个令牌，然后拿走其中一个令牌。如果你有

`a;b`

那么你有标记 a 和 b

现在如果你`b`带走...

`a`

你还有令牌`a`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-25T19:41:29.090

如果你仔细阅读手册页（[http://man7.org/linux/man-pages/man3/strtok.3.html](http://man7.org/linux/man-pages/man3/strtok.3.html)），你会看到它说：

> strtok() 函数将字符串分成**零**个或多个非空标记的序列。

所以，基本上它要么将你的输入字符串分解成多个标记（当它在给定的字符串中找不到给定的分隔符时就会发生这种情况）。

例子：

输入字符串 || 分隔符 || 代币

"abc:def" || ":" || “abc”和“def”

"abcdef" || ":" || “abcdef”

# .net - 使用“CreateSqlStringAccessor”方法时如何设置“超时”？

> ID：13633594
> 
> 赞同：0
> 
> 时间：2012-11-29T19:52:31.907
> 
> 标签：.net, enterprise-library, command-timeout

我有这样的代码，我该如何设置“CommnadTimeout”？

```
var database = EnterpriseLibraryContainer.Current.GetInstance<Database>();
var sqlGetAllPersons = @"select * from Person.Person";
var personMapper = MapBuilder<Person>.MapAllProperties().Build();

// create an accessor (DataAccessor)
var personAccessor = database.CreateSqlStringAccessor<Person>(sqlGetAllPersons, personMapper);

// execute the accessor (IEnumerable<Person>)
var profiles = personAccessor.Execute(); 
```

（[EntLib 5.0 DAAB MapBuilder 的代码将 DBNull 映射到 null](http://www.shirmanov.com/2010/05/entlib-50-daab-mapbuilder-maps-dbnull.html)）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T21:21:10.937

虽然我不喜欢这个解决方案，但我能够通过这种方式修复它：

```
public class ParameterMapperWithCommandTimeout : IParameterMapper
{
    public int CommandTimeout { get; set; }

    public void AssignParameters(DbCommand command, object[] parameterValues)
    {
        command.CommandTimeout = this.CommandTimeout;
    }
} 
```

应用于前面的例子：

```
var database = EnterpriseLibraryContainer.Current.GetInstance<Database>();
var sqlGetAllPersons = @"select * from Person.Person";
var personMapper = MapBuilder<Person>.MapAllProperties().Build();
var parameterMapper = new ParameterMapperWithCommandTimeout { CommandTimeout = MyTimeOut };

// create an accessor (DataAccessor)
var personAccessor = database.CreateSqlStringAccessor<Person>(sqlGetAllPersons, parameterMapper, personMapper);

// execute the accessor (IEnumerable<Person>)
var profiles = personAccessor.Execute(); 
```

# c# - c#变量声明中“单个空格”的含义？

> ID：13633596
> 
> 赞同：-2
> 
> 时间：2012-11-29T19:52:38.637
> 
> 标签：c#

关于 C# 的完全菜鸟问题 - 在下面的代码中，该行是什么

```
UIWindow window; 
```

准确的意思，它与线的关系是什么

```
window = new UIWindow (UIScreen.MainScreen.Bounds); 
```

“UIWindow 窗口”是某种变量声明吗？

```
public partial class AppDelegate : UIApplicationDelegate
{
    UIWindow window;
    HelloWorld_iPhoneViewController viewController;

    /// <summary>
    /// This method is invoked when the application has loaded and is ready to run. In this 
    /// method you should instantiate the window, load the UI into it and then make the window
    /// visible.
    /// </summary>
    /// <remarks>
    /// You have 5 seconds to return from this method, or iOS will terminate your application.
    /// </remarks>
    public override bool FinishedLaunching (UIApplication app, NSDictionary options)
    {
        // create a new window instance based on the screen size
        window = new UIWindow (UIScreen.MainScreen.Bounds);

        viewController = new HelloWorld_iPhoneViewController ("HelloWorld_iPhoneViewController", null);
        window.RootViewController = viewController;
        window.MakeKeyAndVisible ();

        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T19:54:34.093

这行代码声明了一个以`window`类型命名的变量`UIWindow`（其值最初为空）：

```
UWindow window; 
```

这一行为`window`变量赋值：

```
window = new UIWindow (UIScreen.MainScreen.Bounds); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T19:55:36.870

```
UIWindow window; 
```

这将创建一个 UIWindow 类型的新变量

```
window = new UIWindow (UIScreen.MainScreen.Bounds); 
```

这将初始化窗口变量，在调用此行之前它为空。

# linux - 编辑文件而不解压缩存档

> ID：13633597
> 
> 赞同：4
> 
> 时间：2012-11-29T19:52:40.020
> 
> 标签：linux, bash, ziparchive

我如何在不解压缩存档的情况下编辑文件，原因是我正在编写自动化任务，我可以解压缩，编辑文件并压缩它，但如果我可以在运行时执行它会很好，这样可以节省解压缩/压缩的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T21:55:34.060

[`zip`手册页](http://linux.die.net/man/1/zip)提供了`-u`更新 zip 存档的选项。你可以像这样使用它：

```
zip -u bigzip.zip file/to/update1 file/to/update2 ... 
```

* * *

它不会是即时的，但会快得多。如果我创建一个 200MB 的示例 zip 文件：

```
mkdir source
for (( f = 0; f < 200; f++ )); do
    head -c 1000000 /dev/random > source/${f}
done
zip -0r bigzip.zip source 
```

然后在我的机器上解压缩、编辑一个文件并重新压缩大约需要 9 秒：

```
unzip bigzip.zip
head -c 1000000 /dev/random > source/3
zip -0r bigzip.zip source 
```

但是调用只需要3s左右`zip -u`。

```
mkdir source
head -c1000000 /dev/random > source/3
zip -u bigzip.zip source/3 
```

# windows-8 - 从 SwapChainBackgroundPanel 导航到最后一帧

> ID：13633603
> 
> 赞同：0
> 
> 时间：2012-11-29T19:52:57.337
> 
> 标签：windows-8, winrt-xaml, windows-store-apps, directx-11

我正在使用 C++/XAML 和 DirectX 互操作 - SwapChainBackgroundPanel 编写 Windows 应用商店应用程序。

该应用程序基于模板“Split Page”。从每个列表视图项中，可以使用以下代码启动 DirectX 页面。

```
Window::Current->Content = ref new MyD3Components::DirectXPage();
Window::Current->Activate(); 
```

这工作正常，DirectX 页面打开并且播放得很好。

我想在应用程序栏中有一个按钮，它可以帮助用户返回并显示“拆分页面”以允许选择另一个 DirectX 页面。这是我还没有能够完成的。

在我尝试过的几件事中，以下是我认为最合乎逻辑的一件。当用户想要返回最后一页时，它会给出“Platform::DisconnectedException”。

```
Windows::UI::Xaml::Controls::Frame^ rootFrame = SDL::App::GetRootFrame();

Window::Current->Content = rootFrame;
Window::Current->Activate(); 
```

请查看您是否有建议或更好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T18:16:27.017

这是您问题的示例：

我正在创建的内容：2 页...您将在第 1 页上获得（转到第 2 页）链接...如果您单击该链接，则应出现第二页，顶部显示“第 2 页”。请注意，页面标题左侧有一个后退按钮。点击按钮返回第一页...

1.) 找到名为 pageTitle 的 TextBlock 元素并将 Text 属性更改为 Page 1。XAML 应如下所示：

```
<TextBlock x:Name="pageTitle" Grid.Column="1" Text="Page 1" 
       Style="{StaticResource PageHeaderTextStyle}"/> 
```

2.) 将以下 XAML 作为第二个子元素添加到根网格。StackPanel 元素应该是包含后退按钮和页面标题的 Grid 的同级元素。

```
<StackPanel Grid.Row="1"
        Margin="120,0,120,60">
 <HyperlinkButton Content="Click to go to page 2" Click="HyperlinkButton_Click_1"/>
</StackPanel> 
```

3.) 对 BasicPage2.xaml 进行以下更改。找到名为 pageTitle 的 TextBlock 元素并将 Text 属性更改为 Page 2。XAML 应如下所示：

```
<TextBlock x:Name="pageTitle" Grid.Column="1" Text="Page 2" 
       Style="{StaticResource PageHeaderTextStyle}"/> 
```

4.) 将以下 XAML 作为第二个子元素添加到根网格。StackPanel 元素应该是包含后退按钮和页面标题的 Grid 的同级元素。

```
<StackPanel Grid.Row="1"
    Margin="120,0,120,60">
  <TextBlock HorizontalAlignment="Left" Name="tb1" Text="Hello World!"/>
</StackPanel> 
```

5.)将以下代码添加到BasicPage1.Xaml.cs中的BasicPage1类中

```
private void HyperlinkButton_Click_1(object sender, RoutedEventArgs e)
{
this.Frame.Navigate(typeof(BasicPage2));
} 
```

6.) 现在我们已经准备好新页面，我们需要让 BasicPage1 成为应用程序启动时出现的第一件事。打开 app.xaml.cs 并将 OnLaunched 方法更改为使用 BasicPage1 而不是 BlankPage 来调用 Frame.Navigate。整个 OnLaunched 方法应如下所示：

```
protected override void OnLaunched(LaunchActivatedEventArgs args)
{
// Create a Frame to act navigation context and navigate to the first page
var rootFrame = new Frame();
rootFrame.Navigate(typeof(BasicPage1));

// Place the frame in the current window and ensure that it is active
Window.Current.Content = rootFrame;
Window.Current.Activate();
} 
```

现在您已准备好测试应用程序。启动应用程序，然后单击显示“单击以转到第 2 页”的链接。应该会出现第二个页面，顶部显示“第 2 页”。请注意，页面标题左侧有一个后退按钮。单击按钮返回第一页。就是这样！希望它可以帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T20:52:20.990

经过一番反复试验，我可以回答我自己的问题。看来我需要做的就是从 CompositionTarget 中删除我的渲染回调。

它被添加如下。

```
m_eventToken = CompositionTarget::Rendering::add(ref new Windows::Foundation::EventHandler<Object^>(this, &DirectXPage::OnRendering)); 
```

在替换当前窗口并激活它之前，我在下面调用了。

```
CompositionTarget::Rendering::remove(m_eventToken); 
```

我猜这有助于 DirectX 在目标不存在时不输出到渲染管道并抱怨（断开异常）。

# javascript - 为什么事件 DOMContentReady 没有发生？

> ID：13633607
> 
> 赞同：11
> 
> 时间：2012-11-29T19:53:14.717
> 
> 标签：javascript, dom, dom-events

当页面中的所有 DOM 元素都被加载时，我尝试调用一个函数，如下所示：

```
document.addEventListener('DOMContentReady', function() {alert("good")}); 
```

它是一个 HTML 文件，除了这个 JavaScript 之外，它的主体和头部都是空的，即使浏览器完成加载也不会发生任何事情。这里有什么问题？还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-29T19:54:58.977

没有`DOMContentReady`事件。

你想要[`DOMContentLoaded`](https://developer.mozilla.org/en-US/docs/Mozilla_event_reference/DOMContentLoaded_%28event%29?redirectlocale=en-US&redirectslug=DOM%2FDOM_event_reference%2FDOMContentLoaded)。

* * *

```
document.addEventListener('DOMContentLoaded', function() {alert("good")}); 
```

***演示：http:*** [//jsfiddle.net/JQhjj/](http://jsfiddle.net/JQhjj/)

# ravendb - 使用授权时 RavenDB 运行更慢

> ID：13633608
> 
> 赞同：1
> 
> 时间：2012-11-29T19:53:15.827
> 
> 标签：ravendb

我最近将 RavenDB 从 build 573 升级到 960。保存文档时速度明显变慢。我在升级时所做的唯一更改是将这一行添加到 Raven.Server.exe.config：

```
<add key="Raven/Authorization/Windows/RequiredUsers" value="d1\PrestoDatabaseUser;d2\userName"/> 
```

好吧，我还将 AnonymousAccess 从 All 更改为 Get。

```
<add key="Raven/AnonymousAccess" value="Get"/> 
```

1.  构建 960 是否存在运行缓慢的问题？
2.  升级到 build 960 时，除了替换二进制文件之外，还有什么新的事情要做吗？
3.  授权（如上所示）是否会导致 RavenDB 运行更慢？
4.  还有其他想法吗？

**编辑 - 这工作**

我刚试过这个（只有第三行是新的）：

```
documentStore.ConnectionStringName = "RavenDb";
documentStore.Initialize();
documentStore.JsonRequestFactory.ConfigureRequest += (sender, e) => ((HttpWebRequest)e.Request).PreAuthenticate = true; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T12:41:49.813

This shouldn't matter, no. What is likely to have happened is that you are now actually doing authentication when saving. Use:

```
docStore.JsonRequestFactory.ConfigureRequest += (sender, e) => ((HttpWebRequest)e.Request).PreAuthenticate = true; 
```

And see if that helps

# java - JPA - 为什么我在 DB 中的每一行看到两个实体实例？

> ID：13633610
> 
> 赞同：2
> 
> 时间：2012-11-29T19:53:21.267
> 
> 标签：java, performance, hibernate, jpa, jprofiler

当我使用 JProfiler 分析应用程序时，我看到 Db 中的每条记录都有两个实体实例。

比如说 Global_message 是我的表名，它有 20 条记录，映射的 JPA 实体在 Jprofiler 中显示 40 个实例 [2 类]。

有人可以帮忙吗？这是预期的行为吗？

我在服务器启动时将所有表加载到缓存中，并且在服务器启动时看到了这种行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T19:57:38.017

这是完全正常的。Hibernate 需要其他实例来检查应用程序操作的实体实例是否脏（是否被修改）。在刷新会话的那一刻，Hibernate 会针对其他实例检查可能的更改。有关脏检查的更多详细信息，[这个问题](https://stackoverflow.com/questions/82429/when-hibernate-flushes-a-session-how-does-it-decide-which-objects-in-the-sessio)确实有很好的答案。

# objective-c - UTextView 自动完成与实时建议 iOS

> ID：13633612
> 
> 赞同：0
> 
> 时间：2012-11-29T19:53:27.120
> 
> 标签：objective-c, autocomplete

如果我打开自动更正，单词会自动完成，就像我写“wor”一样，我在写完之前得到“word”。我不希望这种情况发生，因为我可能正在写“世界”或任何不同于自动完成的单词。

我在 Interface Builder 中设置了 Correction，这个问题就解决了。

现在的问题是我仍然需要出现在不完整单词下方的小弹出框中的建议。

这两个功能可能不同，但我不知道如何激活建议。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T23:23:44.180

这可以通过使用 tableview 来解决。创建一个表格视图，其宽度与文本字段的宽度相同，高度为您喜欢的。将它放在文本字段的正下方。最初将其隐藏。当用户开始输入时，获取类似于输入文本的数据数组，如果存在则取消隐藏表格视图。在随后的键入中，请继续使用动画重新加载 tableview 部分。您应该准确地隐藏、取消隐藏然后重新加载 tableview 上的数据。我以前实施过这样的事情。这真的很容易，一旦你开始使用它，你就会发现它很容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T23:36:36.327

在 UITextView TextViewDidChange 中，我创建了一个更改光标位置的线程。这当然发生在文本视图更改之后。光标位置的变化触发了自动完成，甚至没有让我看到有建议。

# unix - Cookie 和缓存，如何在 Linux 和 Mac 上从命令行清除它们？

> ID：13633613
> 
> 赞同：2
> 
> 时间：2012-11-29T19:53:26.790
> 
> 标签：unix, caching, cookies, browser, command-line

对于 Chrome 和 Mozilla，主要是，

有没有办法从 Mac 和 Linux 上的命令行清除 cookie 和缓存？

当我在开发时，经常需要清除缓存和 cookie，我想要一种简单或自动的方法来执行此操作。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T19:56:55.380

我会编写一个简单的 perl 脚本，它会从不脏的 x 和 y 中删除所有文件，这将指示 cookie 的位置。

```
use strict;
my $deletedir = '/tmp/test1';
my $result = system("rm -rf $deletedir");
print "Result: $result\n"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T20:12:26.277

您需要在浏览器中执行此操作（除非浏览器未运行，否则文件更改不可靠）。无需特殊软件，只需一个单独的浏览器配置文件和标准的“清除我的数据”菜单项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-08T20:08:15.727

**这是从Mac**上的**Firefox**命令行清除 cookie 和缓存数据的方法：

 **```
#!/bin/bash
# A script to clear out Firefox data from the command line.
# MIT License <http://opensource.org/licenses/MIT>

src="$HOME/Library/Application Support/Firefox/Profiles"

declare -a files_to_delete=(places.sqlite places.sqlite-shm places.sqlite-wal downloads.sqlite formhistory.sqlite search-metadata.json search.json search.sqlite cookies.sqlite cookies.sqlite-shm cookies.sqlite-wal signons.sqlite sessionstore.bak sessionstore.js)

declare -a directories_to_delete=(Cache OfflineCache)

# enable for loops over items with spaces
IFS=$'\n'

# loop through browser profiles and delete certain files
for dir in `ls "$src/"`
do
    if [ -d "$src/$dir" ]; then
        for item in "${files_to_delete[@]}"
        do
            if [ -f "$src/$dir/$item" ]; then
                rm "$src/$dir/$item"
                echo "deleting: $src/$dir/$item"
            fi
        done
        for item in "${directories_to_delete[@]}"
        do
            if [ -d "$src/$dir/$item" ]; then
                rm -r "$src/$dir/$item"
                echo "deleting: $src/$dir/$item"
            fi
        done
    fi
done 
```

*注意：由于此脚本使用Firefox Profiles 目录所在`$HOME`的源 ( ) 目录的变量，`src`请确保以拥有 Firefox Profiles 目录的用户身份运行此脚本... **（即不要以 root 身份运行此脚本...)***

***另请注意：在运行此脚本之前备份**现有的 Firefox 配置文件可能是个好主意！***

# c# - 为什么 ReSharper 告诉我“隐式捕获的闭包”？

> ID：13633617
> 
> 赞同：302
> 
> 时间：2012-11-29T19:53:37.430
> 
> 标签：c#, linq, resharper

我有以下代码：

```
public double CalculateDailyProjectPullForceMax(DateTime date, string start = null, string end = null)
{
    Log("Calculating Daily Pull Force Max...");

    var pullForceList = start == null
                             ? _pullForce.Where((t, i) => _date[i] == date).ToList() // implicitly captured closure: end, start
                             : _pullForce.Where(
                                 (t, i) => _date[i] == date && DateTime.Compare(_time[i], DateTime.Parse(start)) > 0 && 
                                           DateTime.Compare(_time[i], DateTime.Parse(end)) < 0).ToList();

    _pullForceDailyMax = Math.Round(pullForceList.Max(), 2, MidpointRounding.AwayFromZero);

    return _pullForceDailyMax;
} 
```

现在，我在[ReSharper](http://en.wikipedia.org/wiki/ReSharper)建议更改的行上添加了一条评论。这是什么意思，或者为什么需要改变？`implicitly captured closure: end, start`

* * *

## 回答 #1

> 赞同：392
> 
> 时间：2013-04-05T20:49:17.167

警告告诉您变量`end`和`start`保持活动状态，因为此方法中的任何 lambda 都保持活动状态。

看一下简短的例子

```
protected override void OnLoad(EventArgs e)
{
    base.OnLoad(e);

    int i = 0;
    Random g = new Random();
    this.button1.Click += (sender, args) => this.label1.Text = i++.ToString();
    this.button2.Click += (sender, args) => this.label1.Text = (g.Next() + i).ToString();
} 
```

我在第一个 lambda 时收到“隐式捕获的闭包：g”警告。它告诉我，只要第一个 lambda 正在使用中，`g`就不能进行[垃圾收集。](http://en.wikipedia.org/wiki/Garbage_collection_%28computer_science%29)

编译器为两个 lambda 表达式生成一个类，并将用于 lambda 表达式的所有变量放入该类中。

因此，在我的示例中`g`，并`i`在同一个班级中执行我的代表。如果`g`是一个带有大量资源的沉重对象，垃圾收集器无法回收它，因为只要任何 lambda 表达式正在使用，此类中的引用仍然存在。所以这是一个潜在的内存泄漏，这就是 R# 警告的原因。

@splintor 与 C# 一样，匿名方法始终存储在每个方法的一个类中，有两种方法可以避免这种情况：

1.  使用实例方法而不是匿名方法。

2.  将 lambda 表达式的创建拆分为两种方法。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2014-10-31T10:58:47.763

同意彼得莫滕森的观点。

C# 编译器只生成一种类型，该类型将所有 lambda 表达式的所有变量封装在一个方法中。

例如，给定源代码：

```
public class ValueStore
{
    public Object GetValue()
    {
        return 1;
    }

    public void SetValue(Object obj)
    {
    }
}

public class ImplicitCaptureClosure
{
    public void Captured()
    {
        var x = new object();

        ValueStore store = new ValueStore();
        Action action = () => store.SetValue(x);
        Func<Object> f = () => store.GetValue();    //Implicitly capture closure: x
    }
} 
```

编译器生成的类型如下所示：

```
[CompilerGenerated]
private sealed class c__DisplayClass2
{
  public object x;
  public ValueStore store;

  public c__DisplayClass2()
  {
    base.ctor();
  }

  //Represents the first lambda expression: () => store.SetValue(x)
  public void Capturedb__0()
  {
    this.store.SetValue(this.x);
  }

  //Represents the second lambda expression: () => store.GetValue()
  public object Capturedb__1()
  {
    return this.store.GetValue();
  }
} 
```

`Capture`方法编译为：

```
public void Captured()
{
  ImplicitCaptureClosure.c__DisplayClass2 cDisplayClass2 = new ImplicitCaptureClosure.c__DisplayClass2();
  cDisplayClass2.x = new object();
  cDisplayClass2.store = new ValueStore();
  Action action = new Action((object) cDisplayClass2, __methodptr(Capturedb__0));
  Func<object> func = new Func<object>((object) cDisplayClass2, __methodptr(Capturedb__1));
} 
```

尽管第二个 lambda 不使用`x`，但它不能被垃圾收集，因为它`x`被编译为 lambda 中使用的生成类的属性。

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2015-06-24T10:12:18.647

警告有效并显示在具有*多个 lambda*的方法中，并且它们*捕获不同的值*。

当调用包含 lambdas 的方法时，编译器生成的对象被实例化为：

*   表示 lambda 的实例方法
*   *表示由任何*这些 lambda捕获的所有值的字段

举个例子：

```
class DecompileMe
{
    DecompileMe(Action<Action> callable1, Action<Action> callable2)
    {
        var p1 = 1;
        var p2 = "hello";

        callable1(() => p1++);    // WARNING: Implicitly captured closure: p2

        callable2(() => { p2.ToString(); p1++; });
    }
} 
```

检查这个类的生成代码（稍微整理一下）：

```
class DecompileMe
{
    DecompileMe(Action<Action> callable1, Action<Action> callable2)
    {
        var helper = new LambdaHelper();

        helper.p1 = 1;
        helper.p2 = "hello";

        callable1(helper.Lambda1);
        callable2(helper.Lambda2);
    }

    [CompilerGenerated]
    private sealed class LambdaHelper
    {
        public int p1;
        public string p2;

        public void Lambda1() { ++p1; }

        public void Lambda2() { p2.ToString(); ++p1; }
    }
} 
```

`LambdaHelper`请注意已创建商店的实例`p1`和`p2`。

想象一下：

*   `callable1`长期引用其论点，`helper.Lambda1`
*   `callable2`不保留对其论点的引用，`helper.Lambda2`

在这种情况下，对的引用`helper.Lambda1`也间接引用了字符串`p2`，这意味着垃圾收集器将无法释放它。最坏的情况是内存/资源泄漏。或者，它可以使对象保持比其他需要更长的存活时间，如果它们从 gen0 提升到 gen1，这可能会对 GC 产生影响。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-05-22T00:39:05.487

对于 Linq to Sql 查询，您可能会收到此警告。由于查询通常在方法超出范围后实现，因此 lambda 的范围可能比方法寿命更长。根据您的情况，您可能希望在方法中实现结果（即通过 .ToList()），以允许对 L2S lambda 中捕获的方法的实例变量进行 GC。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-08-29T14:44:43.010

## 您总是可以通过单击如下所示的提示来找出 R# 建议的原因：

[![在此处输入图像描述](../Images/2c09d806fc5cd7617e53ba0db94216ef.png)](https://i.stack.imgur.com/ajwGZ.png)

这个提示将引导你[到这里](https://www.jetbrains.com/help/resharper/2018.2/ImplicitlyCapturedClosure.html)。

* * *

> 此检查会引起您的注意，即捕获的闭包值比明显可见的要多，这会影响这些值的生命周期。
> 
> 考虑以下代码：
> 
> ```
> using System; 
> public class Class1 {
>     private Action _someAction;
> 
>     public void Method() {
>         var obj1 = new object();
>         var obj2 = new object();
> 
>         _someAction += () => {
>             Console.WriteLine(obj1);
>             Console.WriteLine(obj2);
>         };
> 
>         // "Implicitly captured closure: obj2"
>         _someAction += () => {
>             Console.WriteLine(obj1);
>         };
>     }
> } 
> ```
> 
> 在第一个闭包中，我们看到 obj1 和 obj2 都被显式捕获；我们可以通过查看代码看到这一点。对于第二个闭包，我们可以看到 obj1 被显式捕获，但 ReSharper 警告我们 obj2 被隐式捕获。
> 
> 这是由于 C# 编译器中的实现细节造成的。在编译期间，闭包被重写为具有保存捕获值的字段和表示闭包本身的方法的类。C# 编译器只会为每个方法创建一个这样的私有类，如果在一个方法中定义了多个闭包，那么这个类将包含多个方法，每个闭包一个，并且它还将包含来自所有闭包的所有捕获值。
> 
> 如果我们看一下编译器生成的代码，它看起来有点像这样（一些名称已被清理以方便阅读）：
> 
> ```
> public class Class1 {
>     [CompilerGenerated]
>     private sealed class <>c__DisplayClass1_0
>     {
>         public object obj1;
>         public object obj2;
> 
>         internal void <Method>b__0()
>         {
>             Console.WriteLine(obj1);
>             Console.WriteLine(obj2);
>         }
> 
>         internal void <Method>b__1()
>         {
>             Console.WriteLine(obj1);
>         }
>     }
> 
>     private Action _someAction;
> 
>     public void Method()
>     {
>         // Create the display class - just one class for both closures
>         var dc = new Class1.<>c__DisplayClass1_0();
> 
>         // Capture the closure values as fields on the display class
>         dc.obj1 = new object();
>         dc.obj2 = new object();
> 
>         // Add the display class methods as closure values
>         _someAction += new Action(dc.<Method>b__0);
>         _someAction += new Action(dc.<Method>b__1);
>     }
> } 
> ```
> 
> 当该方法运行时，它会为所有闭包创建捕获所有值的显示类。因此，即使某个值没有在其中一个闭包中使用，它仍然会被捕获。这是 ReSharper 强调的“隐式”捕获。
> 
> 此检查的含义是隐式捕获的闭包值将不会被垃圾收集，直到闭包本身被垃圾收集。该值的生命周期现在与未显式使用该值的闭包的生命周期相关联。如果闭包长期存在，这可能会对您的代码产生负面影响，尤其是在捕获的值非常大的情况下。
> 
> 请注意，虽然这是编译器的实现细节，但它在不同版本和实现之间是一致的，例如 Microsoft（Roslyn 前后）或 Mono 的编译器。为了正确处理捕获值类型的多个闭包，实现必须按描述工作。例如，如果多个闭包捕获一个 int，那么它们必须捕获同一个实例，这只能发生在单个共享私有嵌套类中。这样做的副作用是所有捕获值的生命周期现在是捕获任何值的任何闭包的最大生命周期。

# opengl - OpenGL 选择和着色器（用于照明）在某些 GPU 上崩溃（主要是 ati）

> ID：13633619
> 
> 赞同：0
> 
> 时间：2012-11-29T19:53:38.460
> 
> 标签：opengl, 3d, glsl

我在这里遇到了opengl选择和着色器的小问题。

我们使用着色器进行 phong 照明。着色器工作得很好。但是，如果我们将我们的 opengl 选择与我们的着色器结合使用，应用程序就会崩溃。该组合适用于超过 5 台计算机（Geforce gtx 460 SE、Ati Mobility Radeon HD 5850、Intel Graphic 4000 等）。但是由于一些模糊的原因，我们会因以下错误而崩溃：

```
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x000000000cde9cc3, pid=2888, tid=3940
#
# JRE version: 7.0_07-b10
# Java VM: Java HotSpot(TM) 64-Bit Server VM (23.3-b01 mixed mode windows-amd64 compressed oops)
# Problematic frame:
# C  [ig4icd64.dll+0x6d9cc3]  ShCompile+0x17b3b3
#
# Failed to write core dump. Minidumps are not enabled by default on client versions of Windows
#
# An error report file with more information is saved as:
# C:\Projet2\Exe\hs_err_pid2888.log
#
# If you would like to submit a bug report, please visit:
#   http://bugreport.sun.com/bugreport/crash.jsp
# The crash happened outside the Java Virtual Machine in native code.
# See problematic frame for where to report the bug.
# 
```

看起来编译不起作用。在一台正常工作的计算机上，我们没有编译错误（使用 glGetShaderInfoLog）。

同样的事情发生在 AMD Radeon HD 6970M 上，但错误与 atixxxx.dll 有关。

这是我们的opengl选择：

```
GLint viewport[4];
glSelectBuffer(BUFSIZE,selectBuf);
glRenderMode(GL_SELECT);

glMatrixMode(GL_PROJECTION);
glPushMatrix();
glLoadIdentity();

glGetIntegerv(GL_VIEWPORT,viewport);
gluPickMatrix(x,viewport[3]-y, 5,5,viewport);

FacadeModele::obtenirInstance()->obtenirVue()->obtenirProjection()->appliquer();

glMatrixMode(GL_MODELVIEW);
glInitNames();

glLoadIdentity();
FacadeModele::obtenirInstance()->obtenirVue()->obtenirCamera().positionner();

arbre->afficher();
int hits;

// restorer la matrice originale
glMatrixMode(GL_PROJECTION);
glPopMatrix();
glMatrixMode(GL_MODELVIEW);
glFlush();

// retourner au mode de rendering normal
hits = glRenderMode(GL_RENDER);

if (hits > 0)
    processHits(hits,selectBuf); 
```

我们的顶点着色器：

```
varying vec3 normal, lightDir1, lightDir2, lightDir3, eyeVec;
void main()
{
// calculer la normale qui sera interpolée pour le nuanceur de fragment
normal = gl_NormalMatrix * gl_Normal;

// calculer la position du sommet dans l'espace de la caméra ("eye-coordinate position")
vec3 ecPosition = vec3( gl_ModelViewMatrix * gl_Vertex );

// vecteur de la direction de la lumière
lightDir1 = vec3( gl_LightSource[0].position.xyz - ecPosition );
lightDir2 = vec3( gl_LightSource[1].position.xyz - ecPosition );
lightDir3 = vec3( gl_LightSource[2].position.xyz - ecPosition );

eyeVec = -ecPosition; // vecteur qui pointe vers le (0,0,0), c'est-à-dire vers l'oeil
gl_FrontColor = gl_Color;
// transformation standard du sommet (ModelView et Projection)
gl_Position = ftransform();
} 
```

我们的片段着色器：

```
varying vec3 normal, lightDir1, lightDir2, lightDir3, eyeVec;
float maxCutoff = 0.9;

void main(void)
{
    vec4 couleur = ( ( gl_FrontLightModelProduct.sceneColor * gl_FrontMaterial.ambient ) +
                    ( gl_LightSource[0].ambient * gl_FrontMaterial.ambient ) +
                    ( gl_LightSource[1].ambient * gl_FrontMaterial.ambient ) 
                );
    // vecteur normal
    vec3 N = normalize( normal );
    // direction de la lumière
    vec3 L = normalize( lightDir1 );
    // produit scalaire pour le calcul de la réflexion diffuse
    float NdotL = dot( N, L );

    vec3 D = normalize(gl_LightSource[0].spotDirection);
    float LdotD = dot(-L,D);
    float attenuation = (LdotD - maxCutoff)/(gl_LightSource[0].spotCosCutoff-maxCutoff)  ;

    // calcul de l'éclairage seulement si le produit scalaire est positif
    if ( NdotL > 0.0 )
    {
        // calcul de la composante diffuse
        if(attenuation > 0.0)
            couleur += gl_LightSource[0].diffuse * gl_FrontMaterial.diffuse * NdotL*attenuation;

        // calcul de la composante spéculaire
        vec3 E = normalize( eyeVec );
        vec3 R = -reflect( L, N ); // réflexion de L par rapport à N
        // produit scalaire pour la réflexion spéculaire
        float NdotHV = max( dot( R, E ), 0.0 );
        couleur += gl_LightSource[0].specular * gl_FrontMaterial.specular * pow( NdotHV, gl_FrontMaterial.shininess )*attenuation;
    }

    // vecteur normal
    vec3 N2 = normalize( normal );
    // direction de la lumière
    vec3 L2 = normalize( lightDir2 );
    // produit scalaire pour le calcul de la réflexion diffuse
    float NdotL2 = dot( N2, L2 );

    vec3 D2 = normalize(gl_LightSource[1].spotDirection);
    float LdotD2 = dot(-L2,D2);
    float attenuation2 = (LdotD2 - maxCutoff)/(gl_LightSource[1].spotCosCutoff-maxCutoff)  ;

    // calcul de l'éclairage seulement si le produit scalaire est positif
    if ( NdotL2 > 0.0 )
    {
        // calcul de la composante diffuse
        if(attenuation2 > 0.0)
            couleur += gl_LightSource[1].diffuse * gl_FrontMaterial.diffuse * NdotL2*attenuation2;

        // calcul de la composante spéculaire
        vec3 E2 = normalize( eyeVec );
        vec3 R2 = -reflect( L2, N2 ); // réflexion de L par rapport à N
        // produit scalaire pour la réflexion spéculaire
        float NdotHV2 = max( dot( R2, E2 ), 0.0 );
    }

    // vecteur normal
    vec3 N3 = normalize( normal );
    // direction de la lumière
    vec3 L3 = normalize( lightDir3 );
    // produit scalaire pour le calcul de la réflexion diffuse
    float NdotL3 = dot( N3, L3 );

    vec3 D3 = normalize(gl_LightSource[2].spotDirection);
    float LdotD3 = dot(-L3,D3);
    float attenuation3 = (LdotD3 - maxCutoff)/(gl_LightSource[2].spotCosCutoff-maxCutoff)  ;

    // calcul de l'éclairage seulement si le produit scalaire est positif
    if ( NdotL3 > 0.0 )
    {
        // calcul de la composante diffuse
        if(attenuation3 > 0.0)
            couleur += gl_LightSource[2].diffuse * gl_FrontMaterial.diffuse * NdotL3*attenuation3;

        // calcul de la composante spéculaire
        vec3 E3 = normalize( eyeVec );
        vec3 R3 = -reflect( L3, N3 ); // réflexion de L par rapport à N
        // produit scalaire pour la réflexion spéculaire
        float NdotHV3 = max( dot( R3, E3 ), 0.0 );
    }

    couleur *= gl_Color;
    gl_FragColor = couleur;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T20:53:36.767

您是否将 OpenGL 选择模式与着色器一起使用？如果是这样，这可能是您的问题：选择模式可能会触发回退到软件实现；我知道没有在 GPU 上执行选择模式的 OpenGL 实现。由于此代码路径很少使用，因此很可能存在错误。尤其是与着色器一起使用时，必须在 GPU 上进行仿真。如果着色器 JIT 编译器发出错误代码，您将崩溃。

最重要的是，选择模式已从较新的 OpenGL 版本中完全删除。而不是选择模式（容易出错且速度慢），您应该渲染到带有单通道整数颜色缓冲区附件的帧缓冲区对象。每个对象都以不同的“索引”颜色呈现。通过读回索引图像，您可以根据像素值进行选择。这实际上可以与选择投影矩阵相结合，以将片段生成限制在视图体积的一小部分。

# applescript - applescript 中的延迟不会在循环中延迟

> ID：13633620
> 
> 赞同：1
> 
> 时间：2012-11-29T19:53:38.697
> 
> 标签：applescript, delay

我有以下applescript，出于某种原因，它不会延迟指定的时间。我理解它的方式，它应该在每次显示之间延迟 10 秒，但我在对话后得到对话，没有任何延迟

我已经尝试了几种不同的变体，但结果都是一样的

```
set models to {"tom", "dick", "harry", "mark", "ringo", "john"}
set users to {"359597388", "338954297", "339380024", "1254012084", "265934082", "105804369"}
repeat
    repeat with model in models
        repeat with user in users
            delay (6000)
            display dialog "Sending user:" & user & "With model:" & model & "."

        end repeat

    end repeat
end repeat 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T19:58:21.937

尝试：

```
set models to {"tom", "dick", "harry", "mark", "ringo", "john"}
set users to {"359597388", "338954297", "339380024", "1254012084", "265934082", "105804369"}
repeat
    repeat with model in models
        repeat with user in users
            delay 10
            display dialog "Sending user:" & user & " With model: " & model & "."
        end repeat

    end repeat
end repeat 
```

# arrays - 将文件的内容传递给数组并打印

> ID：13633624
> 
> 赞同：0
> 
> 时间：2012-11-29T19:54:00.677
> 
> 标签：arrays, file, readfile

大家好，我一直在做一个练习，我必须创建一个 txt 文件，用随机整数填充它，然后将文件读取到一个数组中，对其进行排序，然后在另一个文件中打印出来。到目前为止，这是我的代码：

```
 #include <iostream>
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include <fstream>
using namespace std;

int main()
{
int *A;
int numbers,lines=0;
srand(time(0));

ofstream myfile;

myfile.open("integers.txt");

if (myfile.fail())
   {
      cout << "Error";
      return 1;
   }

cout<<"\nHow many numbers the file contain : ";
cin>>numbers;
cout<<"\n";

if(myfile.is_open()){

for (int i = 0; i < (numbers-1); ++i) {

myfile << rand()%100 <<"\n";
}
}
A=new int[lines];

ifstream myfile1;
myfile1.open("integers.txt");
 if(myfile1.fail())
    {
      cout << "Error" << endl;
      return 1;
    }

while (!myfile1.eof())
    {
        myfile1 >> A[lines];
        lines++;
    }
    for(int k=0;k<lines;k++)
        cout<<A[k]<<endl;

myfile.close();

return 0;

} 
```

所以问题是如何将文件的内容读取到数组中。每当我在读取文件后打印数组时，输出都是废话。我用谷歌搜索并找到了各种解决方案，但这些似乎都不能正常工作。有人能告诉我我的错误是什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T20:05:59.220

看起来你在这里创建了一个长度为零的数组，因为`lines`它被初始化为零。

这一行：

```
A=new int[lines]; 
```

应该是：

```
A=new int[numbers] 
```

# jquery - JQuery Themeroller css Wrapping Accordion header

> ID：13633628
> 
> 赞同：5
> 
> 时间：2012-11-29T19:54:12.583
> 
> 标签：jquery, css, themeroller

我正在使用来自 Jquery UI 1.8.10 的 JQuery Themeroller 主题。我想使用 themeroller 更改我的主题。当前的 themeroller 版本适用于 jquery UI 1.9。当我下载新主题并实现 CSS/图像时，手风琴菜单上的标题大小增加了一倍。箭头图标位于一行上，并且标题文本向下换行到下一行。

有没有办法访问以前版本的 jquery UI Themeroller？或者，是否有其他人发现的小修复？我最大的担心是我错过了一个没有被回归测试捕获的 CSS 行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T19:59:27.943

**访问 JQueryUI 和 Themeroller 的旧版本**

您可以在其网站底部重建快速访问链接以使用您正在寻找的版本。

[http://code.jquery.com/ui/1.8.10/themes/base/jquery-ui.css](http://code.jquery.com/ui/1.8.10/themes/base/jquery-ui.css)

[http://code.jquery.com/ui/1.8.10/jquery-ui.js](http://code.jquery.com/ui/1.8.10/jquery-ui.js)

[您可以在wikipedia](http://en.wikipedia.org/wiki/JQuery_UI#Release_history)上查看发布历史，以了解哪个版本的 JQuery 与该发布配对。

[您可以在此处](http://blog.jqueryui.com/2010/02/jquery-ui-download-builderthemeroller-status/)访问旧版本的预构建支持的主题滚轮主题

*[旧版 JQueryUI 的 Google CDN 链接](https://developers.google.com/speed/libraries/devguide#jquery-ui)*

**关于自定义 JQueryUI 和 Themeroller 包生成器。**

旧版本目前不支持该功能。他们正在努力寻找解决方案，但目前尚不存在。[参考](http://blog.jqueryui.com/2010/02/jquery-ui-download-builderthemeroller-status/)

# python - 这段代码是什么： %(var)s ？也许是 Python？

> ID：13633636
> 
> 赞同：2
> 
> 时间：2012-11-29T19:54:36.633
> 
> 标签：python

我使用的网站后端有一个选项，允许我在为产品下订单时自定义以 CSV 文件发送的数据。有两列，左列是分配标题的位置，右列是输入变量的位置。现有变量的语法类似于`%(order.random_variable)s`or`%(item.random_variable)s`这看起来类似于`%s`Python 中的字符串占位符，我相当有信心它是相关的，如果不一样的话，但我不太了解语法。有人可以详细说明这段代码的目的吗？

哦，为了记录，我不打算马上进入并改变变量。只是为我的研究寻找一个好的起点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T19:57:44.897

这类似于`%s`. 括号内的部分是可选的。

> 唯一的区别是，对于第一个，您的值必须是一个与格式字符串指定的项目数完全相同的元组，而对于第二个，它必须是单个映射对象（例如，字典）

它清楚地列在[字符串格式文档](http://docs.python.org/2/library/stdtypes.html#string-formatting-operations)中：-

> 转换说明符包含两个或多个字符并具有以下组件，这些组件必须按此顺序出现：
> 
> 1.  '%' 字符，标记说明符的开始。
> 2.  映射键（可选），由带括号的字符序列组成（例如，（somename））。
>     .. 还有更多

还： -

> 当正确的参数是字典（或其他映射类型）时，字符串中的格式必须包含一个插入到该字典中的带括号的映射键，该键紧跟在 '%' 字符之后。映射键从映射中选择要格式化的值

文档中的一个示例：-

```
>>> print '%(language)s has %(number)03d quote types.' % \
...       {"language": "Python", "number": 2}
Python has 002 quote types. 
```

`()`因此， after`%`和 before中的文本`s`是`key`字典中的 a。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-29T19:58:55.827

是的，这类似于 %s。() 里面的部分是引用一个 python 字典的键。例如：

```
mydict = {'yay':'boo'}
print '%(yay)s'%mydict

# boo 
```

# c# - Windows Server 2008 中的模拟

> ID：13633637
> 
> 赞同：0
> 
> 时间：2012-11-29T19:54:40.753
> 
> 标签：c#, windows-server-2008-r2, impersonation

我正在尝试模拟特定用户在我们的服务器中执行一些 sql 操作。这不是 ASP.Net 应用程序。我之前使用了提供的代码并且它有效。但是，最近我们已经将我们的环境从 windows server 2000 升级到 windows server 2008 R2。升级后，此代码对我不起作用。我需要一些帮助来理解这个问题并帮助解决它。任何帮助将不胜感激。谢谢。

提供的代码是伪代码，试图写入文件并执行 sql 操作。

```
using System;
using System.Collections;
using System.ComponentModel;
using System.Data;
using System.Runtime.InteropServices;
using System.Text;
using System.IO;
using System.Security.Principal;
using System.Security.Permissions;

[assembly: SecurityPermissionAttribute(SecurityAction.RequestMinimum, UnmanagedCode = true)]
[assembly: PermissionSetAttribute(SecurityAction.RequestMinimum, Name = "FullTrust")]
public class Test
{
    const int LOGON32_LOGON_INTERACTIVE = 2;
    const int LOGON32_LOGON_NETWORK = 3;
    const int LOGON32_LOGON_BATCH = 4;
    const int LOGON32_LOGON_SERVICE = 5;
    const int LOGON32_LOGON_UNLOCK = 7;
    const int LOGON32_LOGON_NETWORK_CLEARTEXT = 8;
    const int LOGON32_LOGON_NEW_CREDENTIALS = 9;
    const int LOGON32_PROVIDER_DEFAULT = 0;
    const int SecurityImpersonation = 2;

    [DllImport("advapi32.dll", SetLastError = true)]
    public static extern int LogonUser(
        string lpszUsername,
        string lpszDomain,
        string lpszPassword,
        int dwLogonType,
        int dwLogonProvider,
        out IntPtr phToken
        );

    [DllImport("advapi32.dll", SetLastError = true)]
    public static extern int ImpersonateLoggedOnUser(
        IntPtr hToken
    );

    [DllImport("advapi32.dll", CharSet = CharSet.Auto, SetLastError = true)]
    public extern static bool DuplicateToken(IntPtr ExistingTokenHandle,
      int SECURITY_IMPERSONATION_LEVEL, ref IntPtr DuplicateTokenHandle);

    [DllImport("advapi32.dll", SetLastError = true)]
    static extern int RevertToSelf();

    [DllImport("kernel32.dll", SetLastError = true)]
    static extern int CloseHandle(IntPtr hObject);

    public void TestImpersonation()
    {            
        IntPtr lnToken = new IntPtr(0);
        IntPtr dupeTokenHandle = new IntPtr(0);
        StringBuilder sb = new StringBuilder();

        int TResult = LogonUser("itservices", "DFC", "St4hls345t", LOGON32_LOGON_NETWORK,
                LOGON32_PROVIDER_DEFAULT, out lnToken);
        if (TResult > 0)
        {
            bool retVal = DuplicateToken(lnToken, SecurityImpersonation, ref dupeTokenHandle);
            if (false == retVal)
            {
                CloseHandle(lnToken);
                Console.WriteLine("Exception thrown in trying to duplicate token.");
                return;
            }

            WindowsIdentity newId = new WindowsIdentity(dupeTokenHandle);
            WindowsImpersonationContext impersonatedUser = newId.Impersonate();

            writeLog(DateTime.Now.ToString(@"MM-dd-yyyy HH:mm:ss") + " - Impersonation Applied" + Environment.NewLine);
            runQuery();
            impersonatedUser.Undo();
            writeLog(DateTime.Now.ToString(@"MM-dd-yyyy HH:mm:ss") + " - Impersonation Reverted" + Environment.NewLine);
            runQuery();
            CloseHandle(lnToken);
        }
        else
        {
            writeLog(DateTime.Now.ToString(@"MM-dd-yyyy HH:mm:ss") + " - Impersonation not Applied" + Environment.NewLine);
        }

        return;
    }

    void writeLog(string message)
    {
        try
        {
            string filePath = @"E:\Impersonate\Testlog.txt";
            File.AppendAllText(filePath, message);
        }
        catch
        {
            Console.WriteLine();
        }
    }

    void runQuery()
    {
        SQLOperations sqlUtill = new SQLOperations();
        string cmdTxt = "SELECT * FROM [tblChildOrder] where [StahlsWorkOrderID] = 'DREAMFUL0015799'";
        DataTable dt = sqlUtill.executeQuery(cmdTxt);
        if (dt != null)
        {
            Console.WriteLine();
        }
        else
        {
            Console.WriteLine();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T05:52:15.083

大多数破坏我的代码的升级通常是由升级更改用户权限引起的。仔细检查用户，他们拥有的权限，您应该会发现问题。

# bash - 使用 shell 脚本的内容创建文件

> ID：13633638
> 
> 赞同：81
> 
> 时间：2012-11-29T19:54:42.563
> 
> 标签：bash, shell

我如何在 shell 脚本中创建一个名为 foo.conf 的文件并使其包含：

```
NameVirtualHost 127.0.0.1

# Default
<VirtualHost 127.0.0.1>
ServerName localhost
DocumentRoot "C:/wamp/www"
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2012-11-29T19:57:43.253

使用“此处文档”：

```
cat > foo.conf << EOF
NameVirtualHost 127.0.0.1

# Default
<VirtualHost 127.0.0.1>
ServerName localhost
DocumentRoot "C:/wamp/www"
</VirtualHost>
EOF 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-11-29T19:57:44.133

你可以这样做`echo`：

```
echo 'NameVirtualHost 127.0.0.1

# Default
<VirtualHost 127.0.0.1>
ServerName localhost
DocumentRoot "C:/wamp/www"
</VirtualHost>' > foo.conf 
```

用单引号括起来的所有内容都被解释为文字，因此您只需将该块写入一个名为`foo.conf`. 如果它不存在，它将被创建。如果它确实存在，它将被覆盖。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-11-29T19:59:47.900

heredoc 可能是最简单的方法：

```
cat <<END >foo.conf
NameVirtualHost 127.0.0.1

# Default
<VirtualHost 127.0.0.1>
ServerName localhost
DocumentRoot "C:/wamp/www"
</VirtualHost>
END 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-02-05T17:56:44.243

这段代码最适合我：

```
sudo dd of=foo.conf << EOF
<VirtualHost *:80>
  ServerName localhost
  DocumentRoot /var/www/localhost
</VirtualHost>
EOF 
```

这是我唯一可以`sudo`开箱即用的！

# ios - 对象未保存到 SQL Lite 中，即使它说已保存 [RestKit ManagedObjectContext]

> ID：13633640
> 
> 赞同：3
> 
> 时间：2012-11-29T19:54:54.653
> 
> 标签：ios, core-data, restkit, nsmanagedobjectcontext

所以我遇到了一个非常令人沮丧的问题......我正在使用 Restkit 从我的 Django 服务器获取对象，并且映射成功完成。那也行！现在，我正在尝试从我的 SQLLite DB 中获取该对象并更改该对象并将其保存回来。例如：

```
 _managedObjectContext = [RKManagedObjectStore defaultStore].mainQueueManagedObjectContext;

    NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"User"];
    fetchRequest.predicate = [NSPredicate predicateWithFormat: @"identifier == 3"];
    NSSortDescriptor *descriptor = [NSSortDescriptor sortDescriptorWithKey:@"identifier" ascending:NO];
    fetchRequest.sortDescriptors = @[descriptor];
    NSError *error = nil;

    NSFetchedResultsController *fetchedResultsController2 = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest
                                                                        managedObjectContext:_managedObjectContext
                                                                          sectionNameKeyPath:nil
                                                                                   cacheName:nil];
    BOOL fetchSuccessful = [fetchedResultsController2 performFetch:&error];
    if (! fetchSuccessful) {
        NSLog(@"%@", error.description);
    }

    PokaUser* user = [[fetchedResultsController2 fetchedObjects]objectAtIndex:0];
    user.firstName = @"NewFirstName";
    BOOL hasSaved = [user.managedObjectContext save:&error];
    NSLog(@"INFO:{%s} CoreData has Saved: %@ (%d)\nerror:%@ | %@ | %@", __FUNCTION__, (hasSaved) ? @"YES" : @"NO", hasSaved, error, [error userInfo],[error localizedDescription]); 
```

我得到以下日志：

**CoreData 已保存：YES (1) 错误：(null) | (空) | （无效的）**

现在，如果我关闭我的应用程序并重新打开它，（或者甚至自己去检查 Sqllite.db），这些更改不会被保存。我不断得到第一个名字。

以下是我创建 ManagedObjectContext 的方式：

```
[managedObjectStore createPersistentStoreCoordinator];
NSString *storePath = [RKApplicationDataDirectory() stringByAppendingPathComponent:@"Maindb.sqlite"];

NSString *seedPath = [[NSBundle mainBundle] pathForResource:@"Maindb" ofType:@"sqlite"];
NSError *error;
NSPersistentStore *persistentStore = [managedObjectStore addSQLitePersistentStoreAtPath:storePath fromSeedDatabaseAtPath:seedPath withConfiguration:nil options:nil error:&error];
NSAssert(persistentStore, @"Failed to add persistent store with error: %@", error); 
```

有任何想法吗？！

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T01:11:56.747

需要调用托管ObjectStore的savePersistentStore方法：[managedObjectStore.mainQueueManagedObjectContext save:&error]; [managedObjectStore.mainQueueManagedObjectContext saveToPersistentStore:&error];

# javascript - firebug iframe 打破气氛 iframe

> ID：13633643
> 
> 赞同：0
> 
> 时间：2012-11-29T19:55:06.320
> 
> 标签：javascript, iframe, firebug, comet, atmosphere

我有一个隐形 iframe，它正在与大气彗星广播公司交谈。它在办公室的大多数计算机上都能正常工作。

在整栋大楼的一台计算机上，它坏了。问题似乎是有一个 iframe 以某种方式插入到该机器上：

```
<iframe style="position: absolute; width: 5em; height: 10em; top: -10000px;" src="javascript:'
<html>
<head>
<script>if("loadFirebugConsole" in window){window.loadFirebugConsole();}
</script>
</head>
<body>
</body>
</html>'">
</iframe> 
```

（请注意，这个 html 的大部分内容实际上都在 src 中，用于打开 iframe 标记）。

那个 iframe 闪烁不定，当它出现时，它会破坏我正在处理彗星服务的 iframe。

我认为这与安装了 firebug 工具有关，但它发生在 chrome 和 firefox 上。

有没有其他人遇到过这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T22:35:16.017

该站点使用 Dojo，事实证明，至少在某些情况下，如果您创建 iframe 并在计算机上安装了 firebug，dojo 会插入该 iframe。

# jquery - 在 IE7/8 中使用 jQuery 淡入透明 PNG

> ID：13633644
> 
> 赞同：0
> 
> 时间：2012-11-29T19:55:05.940
> 
> 标签：jquery, internet-explorer-8, internet-explorer-7, png, opacity

我一直在观察，在具有透明度的 PNG 上使用 jQuery 的 fadeIn() 函数时，在动画期间，IE7/8 中的透明度被禁用。我的研究表明，这是因为只有一个“过滤器”可以在给定元素上处于活动状态，并且透明度和不透明度都被视为过滤器。

我已经在 SO 和其他地方看到了一些假设的解决方案，但我没有在其中任何一个上取得任何成功。我已经尝试过将图像包装在另一个元素中并淡化该元素。我尝试将图像设为背景图像。是否有任何经过测试/确认的解决方案或最佳实践来解决此问题？我想我可以做一些浏览器嗅探并使用 show() 代替 IE，但如果可能的话，我想让淡入淡出工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T20:13:33.030

我经常听到的一个修复方法（虽然我自己从未尝试过）是淡化包含 png 图像的父容器。只需在图像周围添加一个带有 id（或类）的包装器 div 并淡化它。

```
<div id="wrapper">
  <img src="image.png" />
</div> 
```

如果这不起作用，您可以尝试将图像设置为透明背景图像并淡化包装器：

```
<div id="wrapper">
  <div id="image">
  </div>
</div>

#image
{
  width:100%;
  height:100%;
  background:transparent url('image.png') no-repeat;

  /* css For IE background image*/
  background:none\9;
  filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src="image.png", sizingMethod="crop");
} 
```

注意：IE 后面的"\9" 仅适用于 IE8 或以下

试一试，如果它仍然不起作用，请尝试将 png 渲染为 png8（而不是 png24）

# jquery - Jquery show hide 不适用于 jquery waterwheel 插件

> ID：13633645
> 
> 赞同：3
> 
> 时间：2012-11-29T19:55:11.410
> 
> 标签：jquery

我正在使用 7 图像 jquery 水车。

```
<div class="carousel-images">

            <img src="img/large_girl.jpg" title="Danielle M., 23Yrs., Model." id="oneimg" />
            <img src="img/large_girl.jpg" title="Selena Gomez., 20Yrs., Student." id="twoimg"  />
            <img src="img/large_girl.jpg" title="Alicia, 19Yrs., Model."  id="threeimg" />
            <img src="img/large_girl.jpg" title="Alicia, 19Yrs., Model."  id="fourimg" />
            <img src="img/large_girl.jpg" title="Alicia, 19Yrs., Model."  id="fiveimg" />
            <img src="img/large_girl.jpg" title="Alicia, 19Yrs., Model."  id="siximg" />
            <img src="img/large_girl.jpg" title="Alicia, 19Yrs., Model."  id="sevenimg" />
      </div> 
```

我想显示单击的特定图像的文本，即当单击图像 ID“oneimg”时，在 UL li 下方，带有“one”的 li 应该可见。

```
<ul>          

<li id="one">
<img src="img/left_quote.png">You Wish You Could Dance With Me.  <span>I AM GAME</span> <img src="img/right_quote.png">
</li>

<li id="two">
<img src="img/left_quote.png">You Wish You Could Go To Beach With Me.  <span>I AM GAME</span> <img src="img/right_quote.png">
</li>

<li id="three">
<img src="img/left_quote.png">You Wish You Were Younger.  <span>GIVE ME A CHANCE</span> <img src="img/right_quote.png">
</li>
 <li id="four"><img src="img/left_quote.png">You Wish You Could Learn Portuguese.  <span>I AM GAME</span> <img src="img/right_quote.png">
</li>
<li id="five">
<img src="img/left_quote.png">You Wish You Could Get Closer.  <span>I AM GAME</span> <img src="img/right_quote.png">
</li>
<li id="six">
<img src="img/left_quote.png">You Want Me At Business Luncheon.     <span>I AM GAME</span> <img src="img/right_quote.png">
</li>
<li id="seven"><img src="img/left_quote.png">You Wish To Meet My Friends.  <span>I AM GAME</span> <img src="img/right_quote.png">
</li>
  </ul> 
```

我在 jquery 中使用它

```
$('.sevensins ul li').hide();

                    $('#oneimg').click(function(e) {
                        $('.sevensins ul li#one').show();
                        !$('.sevensins ul li#one').hide();
                        });                     

                    $('#twoimg').click(function(e) {
                        $('.sevensins ul li#two').show();
                        !$('.sevensins ul li#two').hide();
                        }); 

                        $('#threeimg').click(function(e) {
                        $('.sevensins ul li#three').show();
                        !$('.sevensins ul li#three').hide();
                        }); 

                        $('#fourimg').click(function(e) {
                        $('.sevensins ul li#four').show();
                        !$('.sevensins ul li#four').hide();
                        }); 

                        $('#fiveimg').click(function(e) {
                        $('.sevensins ul li#five').show();
                        !$('.sevensins ul li#five').hide();
                        }); 

                        $('#siximg').click(function(e) {
                        $('.sevensins ul li#six').show();
                        !$('.sevensins ul li#six').hide();
                        }); 

                        $('#sevenimg').click(function(e) {
                        $('.sevensins ul li#seven').show();
                        !$('.sevensins ul li#seven').hide();
                        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T20:07:27.553

将所有 javascript 更改为以下内容。

```
$('.carousel-images img').click(function() {
    var id = this.id;
    id = id.substr(0, id.indexOf('img'));
    $('ul li:not(#' + id + ')').hide();
    $('#' + id).show();
}); 
```

# html - 面包屑在更改屏幕方向时未对齐中心

> ID：13633646
> 
> 赞同：0
> 
> 时间：2012-11-29T19:55:15.370
> 
> 标签：html, css, jquery-mobile, mobile

我在页面顶部有一组图标。我希望他们始终对齐中心。但是当我改变手机的方向时，图标会向左对齐。 [链接到我的页面](http://haripriyaa.zymichost.com/ot/purchase_01.html)

```
<div id="breadcrumb"  data-theme="w">
            <div id="icon_01" class="icon" data-role="button"  data-theme="w" data-icon="smiley" data-iconpos="top">Personalize</div>
            <div class="arrow-icon" data-role="button"data-iconpos="top"  data-theme="w">»</div>
            <div id="icon_02" class="icon" data-role="button"  data-theme="w" data-icon="gift" data-iconpos="top">Gift Preview</div>
            <div class="arrow-icon" data-role="button"data-iconpos="top"  data-theme="w">»</div>
            <div id="icon_03" class="icon" data-role="button"  data-theme="w" data-icon="card" data-iconpos="top">Pay & Send</div>
</div> 
```

CSS

```
#breadcrumb{
    float: none;
    clear: both;
    margin: 10px auto 0;
    height: 35px;
    min-width: 320px;
    width: 100%;
    max-width: 480px;
}

#breadcrumb .ui-icon {
    width: 24px;
    height: 21px;
}

#breadcrumb .ui-shadow{
    box-shadow: none;
}

.icon, .arrow-icon{float: left;}

.icon{
    min-width: 50px;
    width: 100%;
    max-width: 75px;
    height: 35px;
    font-size: 13px;
    font-weight: bold;
    line-height: 12px;
}

#breadcrumb #icon_01.ui-btn-icon-top .ui-btn-inner{color: #666;}

#breadcrumb .ui-btn-icon-top .ui-icon {
    top: 0!important;
    margin-top: -1px;
    margin-left: -12px!important;
}

#breadcrumb .ui-btn-icon-top .ui-btn-inner {
    padding: 0;
    padding-top: 23px!important;
    margin-left: -10px;
    font-size: 13px;
    font-weight: bold;
    line-height: 12px;
    color: #ccc;
    display: inline-block!important;
}

#breadcrumb .arrow-icon.ui-btn-icon-top .ui-btn-inner {
    padding: 19px 0 0!important;
    font-size: 20px;
    font-weight: bold;
    width: 36px;
    line-height: 20px;
    color: #ccc;
    float:left;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T21:26:11.893

我已经在我的 iPad 上测试了你的页面。

#breadcrumb 宽度有问题。你已经使用了这个 css：

```
margin: 10px auto 0; 
```

您有水平居中的#breadcrumb div，这很好，但您的 div 大小比内部图像宽度的总和大 50%。这就是页面方向事件后 div 未完全居中的原因。

将您的#breadcrumb css 更改为：

# 面包屑{

```
float: none;
clear: both;
margin: 10px auto 0;
height: 35px;
min-width: 280px;
width: 100%;
max-width: 280px; 
```

}

编辑：

您将需要使用宽度，我在 iPad 上的结果略有不同。

# android - Android GestureListener 未检测到事件

> ID：13633649
> 
> 赞同：5
> 
> 时间：2012-11-29T19:55:21.530
> 
> 标签：android

我在网上查看了许多示例，它们都以这种方式实现了手势监听器。我无法让 android 接收手势事件，myText 的值没有改变，并且我在 logcat 中没有得到任何输出。我究竟做错了什么？

```
public class MainActivity extends Activity {
private GestureDetector gDetector;
private TextView myText;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    gDetector = new GestureDetector(this, new MyOnGestureListener());
    myText = (TextView) findViewById(R.id.mytext);
    myText.setText("Test");

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);

    return true;
}

class MyOnGestureListener extends SimpleOnGestureListener implements
        OnGestureListener {
    @Override
    public boolean onDown(MotionEvent e) {
        Log.d("Main", "did");
        myText.setText("hi");
        // TODO Auto-generated method stub
        return true;
    }

    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
            float velocityY) {
        myText.setText("hi");
        Log.d("Main", "did");
        // TODO Auto-generated method stub
        return true;
    }

    @Override
    public void onLongPress(MotionEvent e) {
        Log.d("Main", "did");
        myText.setText("hi");
        // TODO Auto-generated method stub

    }

    @Override
    public boolean onScroll(MotionEvent e1, MotionEvent e2,
            float distanceX, float distanceY) {
        Log.d("Main", "did");
        myText.setText("hi");
        // TODO Auto-generated method stub
        return true;
    }

    @Override
    public void onShowPress(MotionEvent e) {
        Log.d("Main", "did");
        myText.setText("hi");
        // TODO Auto-generated method stub

    }

    @Override
    public boolean onSingleTapUp(MotionEvent e) {
        Log.d("Main", "did");
        myText.setText("hi");
        // TODO Auto-generated method stub
        return true;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T20:09:25.560

缺少的部分是您没有将 GestureListener 链接到触摸事件。

所以你可以像这样覆盖 OnTouchListener：

```
@Override
public boolean onTouchEvent(MotionEvent me) {
    return gDetector.onTouchEvent(me);
} 
```

或者，如果您想在特定视图上启用 GestureDetector：

```
view.setOnTouchListener(new OnTouchListener{
    @Override
    public boolean onTouchEvent(MotionEvent me) {
       return gDetector.onTouchEvent(me);
    }
}) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-29T20:10:14.437

您需要使用您的现场 gDetector。到目前为止，您只创建了一个实例，但现在您必须使用它，才能从中获得成果。

例如像这样：

```
 this.setOnTouchListener(new OnTouchListener() {
    @Override
    public boolean onTouch(final View view, final MotionEvent event) {
       return gDetector.onTouchEvent(event);
    }
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T20:03:04.160

[在此处](http://www.androidsnippets.com/gesturedetector-and-gesturedetectorongesturelistener)尝试此代码

这应该有效。

也换行

```
 gestureScanner = new GestureDetector(this); 
```

至

```
 gestureScanner = new GestureDetector(ScrollTest.this, this); 
```

# iphone - 如何在 xcode 中为通用应用程序居中对象

> ID：13633651
> 
> 赞同：2
> 
> 时间：2012-11-29T19:55:30.193
> 
> 标签：iphone, ipad, cocoa-touch, object, center

我创建了一个运行良好的 iPhone 应用程序，它也可以在 iPad 上启动，但是当 iPad 上的所有内容都调整大小时，它会停留在左上角。这是我如何排列对象的一个​​例子；

```
-(void)addComponents
{
    message = [[UILabel alloc] initWithFrame:CGRectMake(20, 362, 500, 21)];
    message.backgroundColor = [UIColor clearColor]; 
```

我的目标是能够使这个对象居中，而不是告诉它与任何边的距离，所以无论设备的屏幕尺寸是什么，它都会从边缘居中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T22:09:40.777

如果您单击视图控制器，然后单击右侧窗格上的文件检查器并勾选自动布局，则可以执行此操作。这将使您有约束自动使其与边缘保持一定距离。

# asp.net - 如何确定相对路径是否在虚拟路径之外

> ID：13633652
> 
> 赞同：0
> 
> 时间：2012-11-29T19:55:35.373
> 
> 标签：asp.net

我正在使用以下函数将路径转换为有效的虚拟路径：

```
public string GetFullPath(string path)
{
    Ensure.Argument.NotNullOrEmpty(path, "path");

    if (path[0] == '~') // a virtual path e.g. ~/assets/style.less
    {
        return path;
    }

    if (VirtualPathUtility.IsAbsolute(path)) // an absolute path e.g. /assets/style.less
    {
        return VirtualPathUtility.ToAppRelative(path,
            HostingEnvironment.IsHosted ? HostingEnvironment.ApplicationVirtualPath : "/");
    }

    // otherwise, assume relative e.g. style.less or ../../variables.less
    return VirtualPathUtility.Combine(VirtualPathUtility.AppendTrailingSlash(currentFileDirectory), path);
} 
```

除了输入是网站目录**上方**`path`的相对路径时，这通过了我的所有测试。

 **例如，给定一个`currentFileDirectory`of`~/foo/bar`和一个相对路径，`../../../`我想检测到这个并尝试修复路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:59:46.687

Server.MapPath 是一种验证虚拟或 dos 样式路径的简单方法。出于安全原因，验证被限制验证网站外部的任何物理路径。请参阅我上面的评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T21:27:23.683

为了详细说明 Mike 的回答，我们可以通过以下方式验证相对路径是否尝试超出物理网站目录：

1.  使用获取当前路径和相对路径的组合路径`Path.GetFullPath`
2.  使用获取尝试路径的文件系统路径`Server.MapPath`
3.  获取应用程序根目录的文件系统路径
4.  验证尝试的路径是否存在于根路径中

例子：

```
var currentFileDirectory = "~/foo/bar";
var relativePath = "../../../";
var attemptedPath = Path.GetFullPath(Path.Combine(Server.MapPath(currentFileDirectory), relativePath)); // 1 + 2
var rootPath = Server.MapPath("~/"); // 3

if (attemptedPath.IndexOf(rootPath, StringComparison.InvariantCultureIgnoreCase) == -1) // 4
{
    throw new Exception(string.Format("Path {0} is outside path {1}", 
        rootPath, HostingEnvironment.ApplicationPhysicalPath));
} 
```**

# c++ - 3D 世界中 C/C++ 的好伙伴？

> ID：13633657
> 
> 赞同：-2
> 
> 时间：2012-11-29T19:55:54.860
> 
> 标签：c++, c, 3d, programming-languages, mathematical-optimization

我不太相信 C/C++ 在某些情况下的表现，尤其是在保持数学世界的方法简单有效时，我不知道如何解释这一点，因为我只在其他方面熟练掌握了自己2 种语言：Python 和 Java（以及用于 www 世界的其他语言，如 html、js、php 等……），它们都与 C++ 完全不同，因为它们的设计方式。

我不喜欢它可能是语法和性能之间的混合，例如 C++ 本身不提供对矩阵或向量的支持，所有这些都归结为双精度和浮点数，您需要始终关注您的假设您之所以这样做是因为二进制算术有时会给您带来意想不到的结果，并且由于您的矩阵不是原始类型，因此它像任何其他自定义类一样被视为没有任何特定的数学优化，即使它是“数学”，有时它可以进行优化。

我可能会重复自己，但由于 C++ 它是我所知道的唯一编译语言，它适用于某种性能，我无法真正将它提供的东西与其他东西进行比较，但 C++ 世界的某些方面很麻烦，而不是真的以一种可以满足我需求的方式进行塑造，它可能是构建引擎的最佳语言，也是我的应用程序的最大部分，但我希望得到一些关于哪种语言可以成为 3D 应用程序的完美伴侣的建议，基本上，一个包含大量数学的应用程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T20:24:56.333

我不相信你的思路。

关于数学部分：我相信用原生 C++ 来做这件事很麻烦。但是，有许多可用的库可以帮助您以在开发和运行时性能方面都高效的方式进行数学运算。

例如，看看[Eigen 库](http://eigen.tuxfamily.org)。Eigen 大量使用模板和编译器优化来充分利用您的数学。我还没有找到很大的优化潜力（嗯，你总是可以通过使用特定于处理器的优化，如 BLAS 来获得一点，但这也可以使用 Eigen 来完成）。

不过，我不是 3D 部分的专家。

没有一种语言可以单独提供您可能需要的所有功能。这就是图书馆的用途。您应该能够为您在 C++ 中遇到的大多数问题找到合适的库。

关于语法上的困难：我不知道您对 C++ 的研究程度。我每天都在学习新的东西——过去我开始学习时需要 10 行代码的事情现在可以一次性完成——而不会失去性能或可读性，相反，通常会获得更清晰的代码。因此：一切都与经验有关。

# javascript - 使用谷歌地球在 NPObject 异常上调用方法时出错

> ID：13633659
> 
> 赞同：0
> 
> 时间：2012-11-29T19:55:59.600
> 
> 标签：javascript, websocket, google-earth

我正在尝试通过 Websockets 实现 Google 地球控制器。

我在 c# 中有一个简单的 echo websockets 服务器，当我在文本框中键入一个值时，它只会将其发送回页面（我计划稍后能够直接从服务器发送数据）。

我初始化谷歌地球的脚本非常标准并且有效：

```
 <script type="text/javascript">

google.load("earth", "1");

function init() {
  google.earth.createInstance('map3d', initCallback, failureCallback);
  StartServer();
}

function initCallback(instance) {
  ge = instance;
  ge.getWindow().setVisibility(true);

  // add a navigation control
  ge.getNavigationControl().setVisibility(ge.VISIBILITY_AUTO);

  // add some layers
  ge.getLayerRoot().enableLayerById(ge.LAYER_BORDERS, true);
  ge.getLayerRoot().enableLayerById(ge.LAYER_ROADS, true);
}

function failureCallback(errorCode) 
{

}
</script> 
```

（ge 变量）只是谷歌地球实例。

现在在我的服务器代码中，如果我这样做：

```
 ws.onmessage = function (evt) 
        {
            inc.innerHTML += evt.data + '<br/>';
            var lookAt =              ge.getView().copyAsLookAt(ge.ALTITUDE_RELATIVE_TO_GROUND);
            lookAt.setLatitude(lookAt.getLatitude() + 10);
            lookAt.setLongitude(lookAt.getLongitude() + 20);
            ge.getView().setAbstractView(lookAt);
        }; 
```

一切正常（地球旋转一点点）。

现在，如果我这样做：

```
 ws.onmessage = function (evt) 
        {
            inc.innerHTML += evt.data + '<br/>';
            var lookAt = ge.getView().copyAsLookAt(ge.ALTITUDE_RELATIVE_TO_GROUND);
            lookAt.setLatitude(lookAt.getLatitude() + evt.data); //Here i try to use the data received
            lookAt.setLongitude(lookAt.getLongitude() + 20);
            ge.getView().setAbstractView(lookAt);
        }; 
```

我得到异常：在 NPObject 上调用方法时出错

我试图拆分字符串，转换为数字，但总是得到同样的错误。

```
inc.innerHTML += evt.data + '<br/>'; 
```

总是有效。

编辑：

我也试过： var i = parseInt(d); //有效，但是当我调用 l lookAt.setLatitude(i); //例外

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T21:17:54.783

尝试用 替换`evt.data`，`(+evt.data)`一元加号运算符将值强制为数字。

我不知道 Google 地球 API，但如果 getLongitude 出于某种奇怪的原因返回了一个字符串，那么这可能会产生您在那里看到的行为（字符串 + 数字是一个数字，但字符串 + 字符串是一个字符串）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T17:53:19.487

好的排序，非常愚蠢的事情，服务器正在发送额外的字符。

在解析时出现这种通用错误感觉有点糟糕，像“字符串格式无效”这样的东西会更有意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-16T10:50:16.030

我遇到了完全相同的问题，结果证明纬度/经度值太精确了，所以我这样做是为了将其转换为最大 6 位十进制精度等效值：

```
function Blah(lat, lon) {
    //because the GPS is ridiculously accurate and 
    //google earth is not, we need to round to six decimals at most
    lat = Math.round(lat * 1000000) / 1000000;
    lon = Math.round(lon * 1000000) / 1000000; 
```

# ajax - IE 在 POST 后未读取 GET 成功

> ID：13633661
> 
> 赞同：0
> 
> 时间：2012-11-29T19:56:11.640
> 
> 标签：ajax, internet-explorer

我似乎无法找出为什么 IE 在发布后没有阅读我的成功。我试过`cache: false`了，没有运气。这适用于所有其他浏览器，但不适用于 IE。

```
 $.ajaxSetup({ cache: false });
        num = $('#num').val();
        phone = $('#phone').val();

        $.post("post.php?"+$("#MYFORM").serialize(), {

        }, function(response){

            if(response==1 && codeVal == 1 && telVal == 1)
            {
                $("#after_submit").html('');
                $("#Send").after('<label class="success" id="after_submit">Η αποστολή πραγματοποιήθηκε</label>');
                change_captcha();
                clear_form();
                $.ajax({
                        type:'get',
                        cache: false,
                        url: "http://web.somesite/submit_code.php",
                        dataType: 'html',
                        data:{ user: "one", pass: "mtwo", source: "WEB", receipt: num, msisdn: phone},
                        success: function(data) { 
                            var qsFull = "http://web.somesite.gr/submit_code.php?" + data;
                            var qs = URI(qsFull).query(true);
                            TINY.box.show({html:qs.message,animate:false,boxid:'error',top:5});
                        }
                    });
            }
            else
            {
                $("#after_submit").html('');
                $("#Send").after('<label class="error" id="after_submit">Error! in CAPTCHA .</label>');
            }
        }); 
```

好的，我尝试在成功后添加一个错误，我看到我的弹出窗口应该是这样，但是 qs.message 的值是 0。为什么我会得到错误而不是成功，当它在其他浏览器中成功时.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T00:06:53.153

不幸的是，我不得不参加有关遗留 IE 行为的速成课程，这篇文章非常有帮助。以下是一些其他链接，可帮助那些不得不处理这些问题的人：

*   [Microsoft 的 XDomainRequest 对象文档](http://msdn.microsoft.com/en-us/library/cc288060%28VS.85%29.aspx)
*   [一篇涵盖 XDomainRequest 的一些特性的内部博客文章](http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx)

这是我在必要时用作后备的函数：

```
// This is necessary due to IE<10 having no support for CORS.
function fallbackXDR(callObj) {
    if (window.XDomainRequest) { 
        var xdrObj = new XDomainRequest();
        xdrObj.timeout = callObj.timeout;
        xdrObj.onload = function() {
            handleSuccess(xdrObj.responseText);
        };
        xdrObj.onerror = function() {
            handleError(xdrObj);
        };
        xdrObj.ontimeout = function() {
            callObj.xdrAttempts = callObj.xdrAttempts++ || 1;
            if (callObj.xdrAttempts < callObj.maxAttempts) {
                fallbackXDR(callObj);
            }
        };
        xdrObj.onprogress = function() {
            // Unfortunately this has to be included or it will not work in some cases.
        };

        // Use something other than $.param() to format the url if not using jQuery.
        var callStr = callObj ? '?'+$.param(callObj.urlVars) : '';
        xdrObj.open("get", callObj.url+callStr);
        xdrObj.send();
    } else {
        handleError("No XDomainRequest available.", callObj);
    }
}//fallbackXDR() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T09:19:03.383

我找到了答案，这与 IE 对跨域等不灵活有关，所以我像这样添加了 XDomainRequest

```
 if (jQuery.browser.msie && window.XDomainRequest) {
                           var xdr = new XDomainRequest();
                           var my_request_data = { user: "M1web", pass: "m!", source: "WEB", receipt: num, msisdn: phone};
                           my_request_data = $.param(my_request_data);

                                if (xdr) {
                                    xdr.onerror = function () {
                                       alert('xdr onerror');
                                    };
                                    xdr.ontimeout = function () {
                                       alert('xdr ontimeout');
                                    };
                                    xdr.onprogress = function () {
                                       alert("XDR onprogress");
                                    alert("Got: " + xdr.responseText);
                                    };
                                    xdr.onload = function() {
                                        //alert('onload  ' + xdr.responseText);
                                        var qsFull = "http://web.web.gr/submit_code.php?" + xdr.responseText;
                                        var qs = URI(qsFull).query(true);
                                        TINY.box.show({html:qs.message,animate:false,boxid:'error',top:5});
                                        callback(xdr.responseText);
                                    };
                                    xdr.timeout = 5000;
                                    xdr.open("get", "http://web.web.gr/submit_code.php?" + my_request_data);
                                    xdr.send();
                                } else {

                                }
                 } 
```

# shell - 删除回车的批处理文件（新行）

> ID：13633662
> 
> 赞同：4
> 
> 时间：2012-11-29T19:56:35.383
> 
> 标签：shell, return, linefeed

我需要帮助才能从我的文本文件中换行。

示例数据：

```
mango apple grapes peanut
mango apple grapes peanut
mango apple grapes peanut
mango apple grapes peanut 
```

所需的输出：

```
mango apple grapes peanut mango apple grapes peanut mango apple grapes peanut mango apple grapes peanut 
```

它只有在一条线上才有效。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T20:26:48.580

```
@Echo OFF

:: By Elektro H@cker

FOR /F "Usebackq Tokens=*" %%@ IN ("File.txt") DO (
    <NUL Set /P "=%%@"
)

Pause&Exit 
```

# visual-studio-2012 - Visual Studio Express 2012 for Web 无法启动。“找不到一个或多个组件”

> ID：13633671
> 
> 赞同：3
> 
> 时间：2012-11-29T19:57:04.147
> 
> 标签：visual-studio-2012, windows-7-x64, visual-studio-express

我从 Web 平台安装程序安装了 VS Express 2012 for Web，但它不会启动。我单击快捷方式（或 EXE）并收到以下错误消息：

> 适用于 Web 的 Microsoft Visual Studio Express 2012
> 
> 找不到一个或多个组件。请重新安装应用程序。

我试过卸载，重新安装，运行修复工具。下载独立安装等。我从 Windows Update 完全更新了 Windows 7 x64 SP1。我不确定从哪里开始进行故障排除。我运行了 collect.exe，但不知道去哪里寻找或寻找什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-30T12:43:35.613

我在 VS 2012 Express for Desktop 上遇到了同样的问题，也在 Windows 7 x64 SP1 上。这两个链接具有对我有用的相同解决方案：

[http://social.msdn.microsoft.com/Forums/en-US/4f24be62-7a19-4f95-bc33-1f57cc3d3fcd/visual-studio-express-2012-for-desktop-cannot-find-one-or-more-组件？论坛=vssetup](http://social.msdn.microsoft.com/Forums/en-US/4f24be62-7a19-4f95-bc33-1f57cc3d3fcd/visual-studio-express-2012-for-desktop-cannot-find-one-or-more-components?forum=vssetup)

[http://maditguy72.blogspot.com/2013/06/cannot-find-one-or-more-components.html](http://maditguy72.blogspot.com/2013/06/cannot-find-one-or-more-components.html)

对我有用的解决方案是删除此注册表项：`[HKEY_CURRENT_USER\Software\Microsoft\Windows NT\CurrentVersion\AppCompatFlags\Layers]`

# ios - 通过单击按钮重置 iOS 手势

> ID：13633674
> 
> 赞同：2
> 
> 时间：2012-11-29T19:57:12.620
> 
> 标签：ios, gestures

我有一个允许用户平移和放大图像的应用程序。我认为，没有太多麻烦，用户可以让自己进入放大到图像的一部分的状态，并希望将所有内容重置为“基本状态”（即，将所有的翻译和分别重新缩放回 0 和 1）。

我正在通过以下方式进行翻译：

```
- (void)panGestureRecognized:(UIPanGestureRecognizer *)recognizer
{
  CGPoint translation = [recognizer translationInView:self.view];
  recognizer.view.center = CGPointMake(recognizer.view.center.x + translation.x,
                                   recognizer.view.center.y + translation.y);
  [recognizer setTranslation:CGPointMake(0, 0) inView:self.view];
} 
```

这很好用，我可以翻译图像。

如果我按下按钮，我希望能够将翻译改回 0,0。一种方法似乎是存储手势识别器并将其设置回零，如下所示：

```
mPanRecognizer.view.center = CGPointMake(mPanRecognizer.view.center.x,
                                   mPanRecognizer.view.center.y);
[mPanRecognizer setTranslation:CGPointMake(0,0) inView:self.view]; 
```

其中 mPanRecognizer 是存储识别器的成员变量。但是，这样做会产生以下日志信息，而没有实际的行为变化：

```
Ignoring call to [UIPanGestureRecognizer setTranslation:inView:] since gesture recognizer is not active. 
```

那么如何通过按下按钮将手势重置为 0,0？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T20:25:32.153

这可以在不使用手势识别器的情况下完成。要设置缩放，请使用

```
[self.view setBound:CGRectMake(0,0,width,height)]; 
```

where`width`和`height`是您设备的尺寸。

要设置翻译，请使用

```
[self.view setCenter:CGPointMake(width/2.0,height/2.0)]; 
```

要轻松设置宽度和高度，请将视图包含在单独的 UIView 中。让 UIView 以正确的 z 顺序正确锚定，然后您可以将上述行修改为

```
[imageView setBounds:CGRectMake(0,0,imageView.superview.bounds.size.width,imageView.superview.bounds.size.height)];
[imageView setCenter:CGPointMake(imageView.superview.center.x, imageView.superview.center.y)]; 
```

从而避免了对特定设备特定的任何点或幻数的故事。

# sql - Oracle Apex SQL 创建视图

> ID：13633678
> 
> 赞同：0
> 
> 时间：2012-11-29T19:57:23.293
> 
> 标签：sql, oracle, view, oracle-apex

如何阻止多表视图更新基础表？

具体来说，这里的问题是：

创建一个视图以列出假期 ID、假期描述和国家/地区。该视图还应包括一列，将美国列为“美国”，将印度列为“亚洲”，将中国列为“亚洲”，将西班牙列为“欧洲”；**但您的解决方案不得更新或添加到表中的数据**。确保提供显示视图创建的完整 SQL 语句。编写一个 SELECT 语句来测试视图。

```
Create or replace view v_holiday as
select "DETAILS_OF_HOLIDAY"."HOLIDAYCODE" as "HOLIDAYCODE",
       "DETAILS_OF_HOLIDAY"."COUNTRYVISITED" as "COUNTRYVISITED",
       "DETAILS_OF_HOLIDAY"."HOLIDAYDESCRIPTION" as "HOLIDAYDESCRIPTION" 
from "DETAILS_OF_HOLIDAY" "DETAILS_OF_HOLIDAY" 
```

# php - mysql vs mysqli 配置文件和查询

> ID：13633680
> 
> 赞同：0
> 
> 时间：2012-11-29T19:57:29.213
> 
> 标签：php, mysql, mysqli, database-connection

我需要开始使用 mysqli 扩展，但我发现各种冲突的信息取决于我尝试使用的所有信息的方式。

例如，我的标头连接到当前如下所示的“config.php”文件：

```
<?php
$hostname_em = "localhost";
$database_em = "test";
$username_em = "user";
$password_em = "pass";
$em = mysql_pconnect($hostname_em, $username_em, $password_em) or trigger_error(mysql_error(),E_USER_ERROR); 
?> 
```

但是当我去 php.net 时，我发现我应该使用它，但是在更新了所有内容之后，我没有得到任何数据库。

```
<?php
$mysqli = new mysqli("localhost", "user", "password", "database");
if ($mysqli->connect_errno) {
echo "Failed to connect to MySQL: (" . $mysqli->connect_errno . ") " . $mysqli->connect_error;
}
echo $mysqli->host_info . "\n";

$mysqli = new mysqli("127.0.0.1", "user", "password", "database", 3306);
if ($mysqli->connect_errno) {
echo "Failed to connect to MySQL: (" . $mysqli->connect_errno . ") " . $mysqli->connect_error;
}

echo $mysqli->host_info . "\n";
?> 
```

我还经历了并在我的网站的以下代码中添加了一个“i”，但还是没有运气：

```
mysql_select_db($database_em, $em);
$query_getReview =
"SELECT 
reviews.title,
reviews.cover_art,
reviews.blog_entry,
reviews.rating,
reviews.published,
reviews.updated,
artists.artists_name,
contributors.contributors_name,
contributors.contributors_photo,
contributors.contributors_popup,
categories_name
FROM
reviews
JOIN artists ON artists.id = reviews.artistid
JOIN contributors ON contributors.id = reviews.contributorid
JOIN categories ON categories.id = reviews.categoryid
ORDER BY reviews.updated DESC LIMIT 3";
$getReview = mysql_query($query_getReview, $em) or die(mysql_error());
$row_getReview = mysql_fetch_assoc($getReview);
$totalRows_getReview = mysql_num_rows($getReview); 
```

到目前为止，这是我的显示页面上唯一提到 mysql 的地方：

```
<?php } while ($row_getReview = mysql_fetch_assoc($getReview)); ?> 
```

我确实在 oracle 看到了另一个 stackoverflow 答案指向某人自动更新这些东西的东西，但此时我的代码太少了，看起来有点矫枉过正。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T20:16:26.960

将 i 添加到任何 mysql 函数不会使其成为有效的 mysqli 函数。即使存在这样的功能，也可能参数不同。看看这里[http://php.net/manual/en/book.mysqli.php](http://php.net/manual/en/book.mysqli.php)并花一些时间检查 mysqli 函数。也许尝试一些例子来熟悉事情的工作方式。我还建议您选择面向对象的代码或程序代码。不要混合它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T20:30:36.303

我最近刚切换到 mysqli，花了我几个小时来解决它。对我来说效果很好，希望对你有所帮助。

这里是连接BD的函数：

```
function sql_conn(){
    $sql_host = "localhost";
    $sql_user = "test";
    $sql_pass = "pass";
    $sql_name = "test";
    $sql_conn = new mysqli($sql_host, $sql_user, $sql_pass, $sql_name);
    if ($sql_conn->connect_errno) error_log ("Failed to connect to MySQL: (" . $sql_conn->connect_errno . ") " . $sql_conn->connect_error);
    return $sql_conn;
} 
```

这将返回一个 Mysqli 对象，您可以使用该对象在之后发出请求。您可以将它放在您的 config.php 中并包含它或将其添加到您的文件顶部，只要最适合您。

拥有此对象后，您可以使用它对对象进行查询，如下所示：（在这种情况下，如果出现错误，它将在 error_log 中输出。我喜欢在那里，您可以回显它。

```
 //Use the above function to create the mysqli object.
    var $mysqli = sql_conn();

    //Create the query string (truncated for the example)
    var $query = "SELECT reviews.titl ... ... ted DESC LIMIT 3";

    //Launch the query on the mysqli object using the query() method
    if(!($results = $mysqli->query($query))){
        //It it fails, log the error

        error_log(mysqli_error($mysqli));
    }else{
        //Manipulate your data.
        //here it depends on what you retunr, a single value, row or a list of rows.
        //Example for a set of rows

        while ($record = $results->fetch_object()){ 
          array_push($array, $record); 
        }
    }
   //Just to show, this will output the array:
   print_r($array);

  //Close the connection:
  $mysqli->close(); 
```

所以基本上，在 mysqli 中，您创建一个对象并使用该方法来解决问题。希望这可以帮助。一旦你弄清楚了，你很可能会比 mysql 更喜欢 mysqli。反正我做到了。

PS：请注意，这是从现有的工作代码中复制/粘贴的。可能有一些拼写错误，并且可能忘记在某处更改 var，但这是为了让您了解 mysqli 的工作原理。希望这可以帮助。

# hibernate - Coldfusion 10 ORM“解决关系时出错”

> ID：13633686
> 
> 赞同：4
> 
> 时间：2012-11-29T19:57:47.753
> 
> 标签：hibernate, orm, coldfusion, hibernate-mapping, coldfusion-10

我已经有一个 ORM 应用程序在我的笔记本电脑上本地运行了两年，用于开发目的，并且 ORM 映射运行良好。该应用程序最初是在 CF9 中创建的，但我的本地 CF 在 CF10 发布后不久就升级到了 10。从那时起，我有很多时间在这个应用程序上进行额外的开发。前几天，基于迁移，我不得不更改应用程序的一些目录路径。在更改了我在 CF 和应用程序中的所有映射后，我再次启动应用程序，我得到了这个 gem：

> 解决 cfc com.client.model.sessions 中的关系 SpeakerEvalQuestions 时出错。检查此属性的列映射。

*请忽略我在命名我的一个 orm 对象“会话”时的错误判断。

路径从`\web\sites\thesite\`变为`\web\sites\thesite\www\`

/com 是到`\web\sites\thesite\www\com`现在的 CF 映射

以下是来自 CFC 的花絮：

```
<cfcomponent output="false" persistent="true" table="tblSessions">

<cfproperty
    name="sessionID"
    fieldtype="id"
    type="numeric"
    sqltype="int"
    generator="identity" />

<cfproperty
    name="ses_key"
    type="string"
    sqltype="varchar(40)" />

<cfproperty
    name="sessionTitle"
    type="string"
    sqltype="varchar(250)" />

<cfproperty
    name="day1Start"
    ormtype="timestamp"
    sqltype="datetime" />

<cfproperty
    name="day1End"
    ormtype="timestamp"
    sqltype="datetime" />

<cfproperty
    name="day2Start"
    ormtype="timestamp"
    sqltype="datetime" />

<cfproperty
    name="day2End"
    ormtype="timestamp"
    sqltype="datetime" />

<cfproperty
    name="defaultCreditValue"
    type="numeric"
    sqltype="decimal(10,5)" />

<cfproperty
    name="sessionCode"
    type="string"
    sqltype="varchar(max)" />

<cfproperty 
    name="dateAdded" 
    fieldtype="column" 
    ormtype="timestamp"
    sqltype="datetime" 
    dbDefault="GETDATE()"
    insert="true" 
    update="false"  />

<cfproperty
    name="SpeakerEvalQuestions"
    singularname="SpeakerEvalQuestion"
    fieldtype="many-to-many" 
    cfc="SpeakerEvalQuestions"
    inversejoincolum="speakerEvalQuestionID"
    fkcolumn="sessionID"
    lazy="extra"
    orderby="sortOrder asc"
    linktable="tblSpeakerEvalQs_Sessions"
    type="array" />

</cfcomponent> 
```

和

```
<cfcomponent output="false" persistent="true" table="tblSpeakerEvalQuestions">

<cfproperty
    name="speakerEvalQuestionID"
    fieldtype="id"
    type="numeric"
    generator="identity" />

<cfproperty
    name="question"
    type="string"
    sqltype="varchar(200)" />

<cfproperty
    name="scaleStartValue"
    type="numeric"
    sqltype="smallInt" />

<cfproperty
    name="scaleEndValue"
    type="numeric"
    sqltype="smallInt" />

<cfproperty
    name="sortOrder"
    type="numeric"
    sqltype="smallInt" />

<cfproperty
    name="display"
    type="numeric"
    sqltype="smallInt" />

<cfproperty 
    name="dateAdded" 
    fieldtype="column" 
    type="date"
    sqltype="datetime" 
    dbDefault="GETDATE()"
    insert="true" 
    update="false"  />

<cfproperty
    name="sessions"
    singularname="session"
    fieldtype="many-to-many" 
    CFC="sessions"
    fkcolumn="speakerEvalQuestionID"
    inversejoincolumn="sessionID"
    lazy="extra"
    orderby="day1start asc"
    linktable="tblSpeakerEvalQs_Sessions" />

</cfcomponent> 
```

如果我从 session.cfc 中注释掉该`SpeakerEvalQuestions`属性，那么应用程序将启动，当然其中一部分不起作用。但这至少证实了它的这一属性，而不仅仅是长期无法正常工作的属性中的第一个。

同样，在我不得不改变路径之前，这很好用。有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T04:17:30.497

您是否打开了 CF Administrator 中的任何缓存选项？如果是这样，请关闭它们，或清除缓存。

# c# - 如何加载和存储图像文件夹

> ID：13633687
> 
> 赞同：0
> 
> 时间：2012-11-29T19:57:47.427
> 
> 标签：c#, image, list, directory

我有一个团队计划正在进行中，我的职责是添加加载单个图像或（更有可能）图像文件夹的功能，并将它们保存起来，以便程序的其他方面能够访问它们。

以下是我的实际问题：

1.  我需要一个关于如何显示`Open File`或`Open Folder`对话框的示例。
2.  将所有图像存储在文件夹中的最佳方式的示例。

*注意：*我最终需要显示这些图像，但这将是在程序的另一部分根据颜色重新排序它们之后。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:16:25.410

可能是这样的：

```
 Dictionary<string, Bitmap> images = new Dictionary<string, Bitmap>();

        string[] extensions = new string[]{".BMP",".JPG",".GIF",".PNG"};
        var fd = new System.Windows.Forms.FolderBrowserDialog();
        if (fd.ShowDialog() == System.Windows.Forms.DialogResult.OK)
        {
            foreach (var file in Directory.GetFiles(fd.SelectedPath).Where(f => extensions.Contains(Path.GetExtension(f).ToUpper())))
            {
                images.Add(Path.GetFileNameWithoutExtension(file), new Bitmap(file));
            }
        } 
```

或打开文件：

```
 var fd = new System.Windows.Forms.OpenFileDialog();
     fd.Filter = "Image Files(*.BMP;*.JPG;*.GIF;*.PNG)|*.BMP;*.JPG;*.GIF;*.PNG";
     if (fd.ShowDialog() == System.Windows.Forms.DialogResult.OK)
     {
         images.Add(Path.GetFileNameWithoutExtension(fd.FileName,new Bitmap(fd.FileName));
     } 
```

# javascript - html 5 历史恢复了一些更改而不是其他更改？

> ID：13633691
> 
> 赞同：3
> 
> 时间：2012-11-29T19:58:00.653
> 
> 标签：javascript, html, history

我是使用 html 5 历史对象的新手。我尝试了以下代码：

```
<!DOCTYPE html>
<html>
        <head>
                <script type="text/javascript">

   history.pushState({somethinggoeshere:'but what?'}, 'Does a title go here?', '?begin=true');
window.addEventListener('popstate', function(event) {
  console.log('popstate fired!');
   console.log(event.state);

});

function dosomething()
{
   document.getElementById('box').style.display = 'block';
   document.getElementById('iframe').src = 't2.html';
   history.pushState({somethinggoeshere:'but what?'}, 'Does a title go here?', '?complete=true');
}

                </script>
        </head>
        <body>
                <a onclick="dosomething();">Show box</a>
                <div id="box" style="background:red; height:100px; display:none;"></div>
               <iframe id="iframe" src="t1.html"></iframe>
        </body>
</html> 
```

当我按下 Show box 时，下面会出现一个红色框，并且 iframe 的内容从 t1.html 变为 t2.html。当我在 chrome 浏览器中按下后退按钮时，iframe 的内容会回到 t1.html ，但红色框并没有消失。

**为什么后退按钮恢复的是iframe的内容**而不是redbox的css样式（返回显示：无）；

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T20:02:15.907

浏览器的历史只是一个 URL 列表。 `pushState`允许您将对象与历史记录中的 URL 相关联，如果您愿意，可以将其与“状态”相关联。该对象是传递给的第一个参数`pushState`。

就像“正常”浏览历史记录一样，页面的*实际*状态不会被保存。随你（由你决定。在您的对象中，您应该保存应该显示红色框，然后`onpopstate`再次显示它。

如：

```
history.pushState({
    redBox: document.getElementById('box').style.display
}, 'Most browsers ignore this parameter.', '?complete=true'); 
```

然后在 中`onpopstate`，设置`document.getElementById('box').style.display`为`event.state.redBox`。

**编辑**：iFrame 就像一个新的浏览器窗口，所以它有自己的历史对象。当您单击“返回”时，iFrame 会看到并返回历史记录。您也需要`window.addEventListener('popstate', function()`在 iFrame 中的页面内。

# wpf - 使用 WPF 打印视觉对象

> ID：13633693
> 
> 赞同：0
> 
> 时间：2012-11-29T19:58:20.397
> 
> 标签：wpf, printing

我有一个视觉分页器。问题是，当我从代码创建视觉效果时，我必须调用 Measure 和 Arrange。但我想给他们无限的价值。

```
 stackpanel.Measure(new Size(double.PositiveInfinity, double.PositiveInfinity));
  stackpanel.Arrange(new Rect(new Size(double.PositiveInfinity, double.PositiveInfinity))); 
```

这引起

> 无法在具有无限大小或 NaN 的 UIElement 上调用 Arrange。“System.Windows.Controls.StackPanel”类型的父级调用 UIElement。安排调用类型为“System.Windows.Controls.StackPanel”的元素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T07:39:20.160

在该`Measure`步骤中，父母询问其孩子在给定一定空间的情况下他们想要多少空间。这个空间也可以是**无限**的，这意味着问孩子“你想要多大的空间？没有限制。

在该`Arrange`步骤中，元素在布局上物理排列。父母告诉孩子他们被安排在哪里以及他们有多少空间。然而，Arrange 函数的 size 参数**不能是无穷大**，因为这是元素的实际大小。

您是否使用 Infinity 是因为您希望视觉效果占据打印页面上的所有可用空间？如果是的话，我通常做的是

```
Size sz = new Size(printCapabilities.PageImageableArea.ExtentWidth, 
             printCapabilities.PageImageableArea.ExtentHeight);
//update the layout of the visual to the printer page size.  
yourElement.Measure(sz);
yourElement.Arrange(new Rect(new Point(printCapabilities.PageImageableArea.OriginWidth, printCapabilities.PageImageableArea.OriginHeight), sz)); 
```

# python - 使用 .conf 文件配置 celery

> ID：13633702
> 
> 赞同：2
> 
> 时间：2012-11-29T19:58:49.597
> 
> 标签：python, yaml, config, celery, loader

再会。

我从名为 myproject-celery 的主要项目中建立了一个单独的项目。这是一个基于构建的项目，其中包含我项目的异步部分。为方便起见，我想要一个文件，该文件将包含这台机器的配置。我知道 celery 提供了 python 配置文件，但我*不*喜欢这种配置风格。

假设我在名为**myproject.yaml的 Yaml 配置文件中有一个配置**

我想要达到的目标：

```
./bin/celery worker --config /absolute/path/to/project/myproject.yaml --app myproject.celery 
```

问题真的是我想指定文件的位置，因为它可以改变。我尝试编写自定义加载器类，但失败了，因为我什至不知道为什么以及何时调用此类的许多自定义方法（我发现的唯一文档是[http://docs.celeryproject.org/en/ latest/reference/celery.loaders.base.html?highlight=loader#id1](http://docs.celeryproject.org/en/latest/reference/celery.loaders.base.html?highlight=loader#id1)对我没有帮助）。我试图在应用程序模块的导入阶段做一些事情，但我无法将文件路径传递给该模块的代码......我想出的唯一解决方案是使用包含路径的自定义 ENV 参数，但我这样做了不明白为什么它不能像我使用的大多数应用程序一样成为启动参数（指的是带有它的粘贴服务 myproject.ini 的金字塔）

所以问题是： *我必须做什么才能从我可以通过绝对路径指定的文件中设置配置？*

编辑：这个问题没有得到回答，所以我在 celery 的 github 上发布了一个问题。将等待回复。 [https://github.com/celery/celery/issues/1100](https://github.com/celery/celery/issues/1100)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:15:10.213

看起来[`celery.loaders.base`](https://github.com/celery/celery/blob/df875598555847c7cbd18be26f70568bb8f1ab94/celery/loaders/base.py#L241)你想要覆盖的方法是[`read_configuration`](https://github.com/celery/celery/blob/df875598555847c7cbd18be26f70568bb8f1ab94/celery/loaders/base.py#L241)：

```
from celery.datastructures import DictAttr
from celery.loaders.base import BaseLoader

class YAMLLoader(BaseLoader):
    def read_configuration():
        # Load YAML file here and return a DictAttr instance 
```

# google-apps-script - 在函数中复制并返回修改后的范围

> ID：13633706
> 
> 赞同：0
> 
> 时间：2012-11-29T19:59:03.523
> 
> 标签：google-apps-script, google-spreadsheet-api

我的场景是这样的：我想编写一个函数，它可以从一个范围中删除 3 个最低元素，并返回要在 Google 电子表格中处理的修改后的范围。我对 Google App 脚本完全陌生，所以我非常糟糕的代码在这里：

```
function removeWorse(range, n) {

  var data = [];

  for(var i = 1; i <= range.getNumColumns(); i++) {
    data.push(range.getCell(1, i).getValue());
  }
  data.sort();

  var range2;
  range.copyTo(range2);

  for(var i = data.length - 1; i >=n; i--) {
    range2.getCell(1, i).setValue(data[i]);
    Logger.log(2);
  }

  return range2;

} 
```

它卡在第 11 行：`copyTo`不存在。

如何修改此代码以实际完成我的任务？:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T22:29:03.977

我建议将范围作为值数组传递给函数（因此在电子表格单元格中输入 eg `=removeWorse(A1:K1;3)`），使用 Javascript 修改该范围，然后返回修改后的范围。这避免了在自定义函数中使用时出现问题的任何 get 或 set 调用。好像您正在使用水平范围，所以这样的事情应该可以工作：

```
function removeWorse(values, n) {
  values[0].sort();
  values[0].splice(0, n);
  return values[0].reverse();
} 
```

但请注意，`sort()`不带参数使用将返回[字典排序](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort)（例如，9 将被视为比 81“大”）。您可以使用一个简单的函数作为参数`sort()`来解决这个问题：

```
function removeWorse(values, n) {
  values[0].sort(function(a, b) {return a - b});
  values[0].splice(0, n);
  return values[0].reverse();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T20:16:25.707

您的代码的问题是该`range.copyTo`函数需要另一个 Range 作为参数。当您`range2`在上面定义时，它不是 Range 对象。

# batch-file - XCopy 排除列表。按文件夹中的扩展名排除

> ID：13633707
> 
> 赞同：1
> 
> 时间：2012-11-29T19:59:03.647
> 
> 标签：batch-file, xcopy

我使用 XCopy 和排除列表，看起来像

.cs\
\日志\

和 XCopy 命令

SET exludedPaths=%cd%\Settings\excluded_pa
​​ths.txt SET projectDir=%cd%\MyFolder
SET outputDir=%cd%\Drops\
XCOPY /S %projectDir% %outputDir%\ /EXCLUDE:%exludedPaths%

一切正常，但我想忽略另一个目录中的 xml 文件（只有 xml 文件），像这样

.cs\
\Log\
\anotherdirectory\*.xml <-它不起作用。

我如何指定排除列表中的最后一行，或者这是不可能的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T21:30:51.393

Yep.Exclude does not support wildcards.

```
pushd cs\log\anotherdirectory
for /f %%f in (dir /b *.xml) do (
   echo %%~ff >> %exludedPaths%
)
popd 
```

this should list all files in `anotherdirectory` into the excluded list

# ios - 动画运行时在 iOS 应用程序的主线程上暂停执行

> ID：13633710
> 
> 赞同：3
> 
> 时间：2012-11-29T19:59:19.900
> 
> 标签：ios, multithreading, animation

我正在使用导航控制器，并且试图在新的视图控制器推送之前运行动画。为此，我从 UINavigationController 委托中捕获事件，并运行动画。也就是说，显然 iOS 动画是异步运行的，所以方法返回，我的动画与标准推送动画同时运行。关于如何解决这个问题的任何想法？

情况如下所示：

```
- (void)navigationController:(UINavigationController *)navigationController willShowViewController:(UIViewController *)viewController animated:(BOOL)animated
{
    if (animated)
    {
        [UIView animateWithDuration:kGFDefaultAnimationDuration
                                      delay:0.0
                                    options:UIViewAnimationCurveEaseOut | UIViewAnimationOptionAllowUserInteraction
                                 animations:^{
                                     // Set up animations here...
                                 }
                                 completion:^(BOOL finished) {

                                 }];
    }
} 
```

所以换句话说，我想`navigationController:(UINavigationController *)navigationController willShowViewController:(UIViewController *)viewController animated:(BOOL)animated`从完成块中返回。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T05:24:57.407

算你描述的“事件”是什么？如果它是一种方法，那么您可以将其称为 [self method()]; 你在哪里写过'//在这里设置动画......'然后将你的视图控制器推到完成块中。或者，您可以简单地编写您的 UIView 动画代码并使用`setAnimationDidStopSelector`and 设置您的方法来推送视图控制器作为选择器。确保您还通过`[UIView setAnimationDelegate:self];`这种方式将视图设置为委托，推送视图仅在动画完成后发生。您还可以查看`-(void)performSelector:(SEL)aSelector withObject:(id)anArgument afterDelay:(NSTimeInterval)delay`是否知道动画持续时间并设置延迟以在动画完成前几分之一秒执行推送视图控制器。调整它以获得最佳结果。

# css - Photogallery中的CSS z-index全屏

> ID：13633711
> 
> 赞同：0
> 
> 时间：2012-11-29T19:59:27.087
> 
> 标签：css, html

我正在使用位于此处的 html5gallery 插件：http:
[//html5box.com/html5gallery/index.php](http://html5box.com/html5gallery/index.php)

照片库工作正常，直到我单击图像以在 Chrome 中全屏显示我只是黑屏？

您会注意到在 CSS 中我将 z-index 设置为 999 无济于事。有任何想法吗？

[http://tinyurl.com/btwwgfm](http://tinyurl.com/btwwgfm)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T20:11:17.043

问题是我在脚本中不止一次被称为 jQuery。我删除了对 jQuery 的第二次调用，效果很好。

# mysql - Mysql查询匹配和OR WHERE

> ID：13633716
> 
> 赞同：1
> 
> 时间：2012-11-29T19:59:56.587
> 
> 标签：mysql, sql

嗨，如果有这个查询：

```
 SELECT *,
      MATCH(tags) AGAINST ('book library' IN BOOLEAN MODE) AS resources_score 
      FROM books  HAVING resources_score > 0 
      ORDER BY resources_score DESC, id DESC ; 
```

是否可以添加一个`OR WHERE title LIKE ;`

另外，由于我的查询是 returnig resource_score as `1`or `0`，是否有可能获得更高的查询/搜索/结果准确性？

最后，提示一个问题，查询匹配准确度取决于记录数？

感谢谁会帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:13:28.380

当所有其他方法都失败时，您可以使用算术组合 SQL 函数。

```
 SELECT *,
 (title LIKE '%pattern%') + (MATCH(tags) AGAINST ('book library' IN BOOLEAN MODE))
   AS resources_score 
 FROM books HAVING resources_score > 0 
 ORDER BY resources_score DESC, id DESC ; 
```

当标题包含“模式”时，这将为 MATCH() 返回的分数加 1。

# css - Firefox 样式形式完全不同

> ID：13633720
> 
> 赞同：2
> 
> 时间：2012-11-29T20:00:27.480
> 
> 标签：css, forms, firefox

我在使用 FireFox 时遇到了一些麻烦（在 Mac 上，我假设 Windows 是一样的）。基本上，我正在制作一个待办事项列表 Web 应用程序，您填写的待办事项表格在我迄今为止测试过的所有浏览器上都可以正常工作，除了 FireFox。

我的文本框的高度更高，我的提交按钮出于某种原因显示“提交查询”，我的紧急按钮（样式相同）与提交按钮的高度和宽度不同。而且，当单击任一按钮时，它会跳回到页面的“登陆”部分。

该页面的链接是：[to-do-today.com](http://to-do-today.com)

这是表单的 HTML：

```
<form id="to-do-form" method="post" onsubmit="return validateForm()">
<div class="form-text-fields">
    <input type="text" name="title" id="td-title" class="text-input" required="required" 
    title="Enter your to-do" value="What do you need to do?" onClick="selectAll('td-title');" />

    <input type="text" name="description" id="td-description" class="text-input" 
    title="Enter your description" onClick="selectAll('td-description');" value="Need a description?" />
</div>

<div class="form-buttons">
    <input type="checkbox" name="urgent" id="urgent" title="Urgent?" class="check-box"/>
    <div class="button check-box-button" style="margin-bottom: 5px;">   
    <label class="check-box-label" for="urgent">Urgent?</label>
    </div>

    <input type="submit" id="submit" class="button button-margin" />
</div>  
</form> 
```

这是控制它的CSS：

```
form {
overflow: hidden;
margin: 0 auto 10px;
}
.form-text-fields {
float: left;
width: 84%;
}
.form-buttons {
float: right;
width: 14%;
margin-right: 1%
}
.text-input {
width: 100%;
height: 25px;
float: left;
padding: 5px;
border: 1px solid rgba(0,0,0,.23);
border-radius: 3px;
margin-bottom: 5px;
color: #a6a6a6;
background-color: #fff;
font-family: "HelveticaNeue-Light", "Helvetica Neue Light", "Helvetica Neue", 
             Helvetica, Arial, "Lucida Grande", sans-serif; 
    font-weight: 300;
font-size: .9em;
}
.button {
width: 100%;
height: 25px;
margin-right: 1%;
padding: 5px;
float: right;
font-family: "adelle"; 
font-weight: bold;
font-size: .9em;
text-transform: uppercase;
line-height: .9em;
text-shadow: 1px 1px 2px #945000;
color: #fffefc;
background-color: #ffb258;
border: 1px solid #9f5908;
border-radius: 3px;
-webkit-appearance: none; /*stops default styling of buttons on iOS and Andriod.*/
-moz-appearance: none;
}
.button:hover {
background-color: #e19033;
border: 1px solid #804b0a;
-moz-transition: .1s ease-in; -webkit-transition: .1s ease-in; -o-transition: .1s ease-in;
}
.button:focus {
background-color: #1ccc13;
border: 1px solid #10800a;
-moz-transition: .1s ease-in; -webkit-transition: .1s ease-in; -o-transition: .1s ease-in;
}
.check-box {
position: absolute;
top: -9999px;
left: -9999px;
}
.check-box-label {
height: 25px;
min-width: 100%;
color: #797879;
display: block;
text-align: center;
color: #fffefc;
}
.check-box:checked ~ .check-box-button {
background-color: #9d1878;
/*background-color: #c67110 !important;*/
box-shadow: inset 0px 0px 10px #750055;
} 
```

任何想法为什么 FireFox 不喜欢这种形式？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T20:33:20.813

首先，标签不是按钮。按钮（和一些输入元素）是按钮。除了语义和网络标准，标签和输入如何应用你的填充（在类按钮上）是完全不同的。输入将填充放在指定的高度 25px 内。标签将其置于高度之上。（因此高度远大于 25 像素。）此外，如果添加 25 像素的行高，您的文本将在标签中垂直居中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T20:55:32.163

Firefox 不喜欢这种形式，因为它不解析`box-sizing`. 现在，您需要在您的`global.css`:

```
* {
  -moz-box-sizing: border-box;
} 
```

# javascript - 有没有办法使用Spotify API在播放30秒后跳到下一首歌曲

> ID：13633724
> 
> 赞同：1
> 
> 时间：2012-11-29T20:00:33.263
> 
> 标签：javascript, spotify

有没有办法使用[Spotify API](https://developer.spotify.com/technologies/apps/docs/)在歌曲播放一段时间后跳到下一首歌曲？

我似乎找不到任何可以拉出歌曲播放时间的文档。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T21:18:57.473

播放器具有`position`以毫秒为单位提供当前播放位置的属性（文档已损坏）。

观察播放器对象`EVENT.CHANGE`可以看到曲目何时开始/停止播放，并且可以适当地计时。

# javascript - javascript/JQuery 中的 HitTesting

> ID：13633728
> 
> 赞同：0
> 
> 时间：2012-11-29T20:01:02.893
> 
> 标签：javascript, jquery, hittest

我正在寻找 javascript 或 JQuery 中的函数/插件来测试两个图像是否相互碰撞。一个图像移动，另一个没有。困难的是，它应该考虑图像的透明度。

到目前为止，我已经尝试将[这个插件](https://github.com/e-smartdev/smartJQueryHitTest)用于 JQuery，但它一直返回一个错误（插件本身有一个函数）。我也可以编写自己的 hitTest 函数，但问题是我不知道如何使用 javascript 查找透明度。

# sql-server - 使用 xp_cmdshell 执行包的版本号错误

> ID：13633732
> 
> 赞同：-1
> 
> 时间：2012-11-29T20:01:19.090
> 
> 标签：sql-server, ssis

我在 Server2（2008，64 位）上有一个 SSIS 包，我正在尝试使用 xp_cmdshell 命令从 server1（2005，32 位）调用它，

```
exec xp_cmdshell 'dtexec /FILE "\\Wdvwd99a0234\PWOSSIS\RTS_SSIS\RTS_ETL.BE_2_DUNSMasterPackage.dtsx"' 
```

它不断给出错误：

> Microsoft (R) SQL Server 执行包实用程序版本 9.00.5000.00，适用于 32 位版权所有 (C) Microsoft Corp 1984-2005。版权所有。NULL 开始：下午 1:00:42 错误：2012-11-29 13:00:42.83
> 代码：0xC001700A 来源：描述：包中的版本号无效。版本号不能大于当前版本号。结束错误错误：2012-11-29 13:00:42.83
> 代码：0xC0016020 来源：说明：包从版本 3 迁移到版本 2 失败，错误为 0xC001700A“包中的版本号无效。版本号不能大于当前版本号。”。结束错误错误：2012-11-29 13:00:42.83 代码：0xC0010018 来源：描述：从节点“DTS:Property”加载值“3”时出错。结束错误 由于错误 0xC0010014，无法加载包“\Wdvwd99a0234\PWOSSIS\RTS_SSIS\RTS_ETL.BE_2_DUNSMasterPackage.dtsx”。描述：由于错误 0xC0010014 “发生了一个或多个错误。在此错误之前应该有更具体的错误来解释错误的详细信息。此消息用作遇到错误的函数的返回值。 ”。当 CPackage::LoadFromXML 失败时会发生这种情况。来源：开始：下午 1:00:42 结束：下午 1:00:42 经过：0.078 秒 NULL

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T21:16:11.827

正如其他人评论的那样， dtexec.exe 的版本需要与目标包的版本匹配。你的选择是

*   在 Server1 上安装 2008 Integration Services 组件。您需要提供 dtexec 的显式路径以确保 xp_cmdshell 运行 2008 版本。
*   在远程（Server2）机器上运行包。最低的进入门槛是在 Server2 上创建一个 SQL 代理作业（未计划），它只是运行包`RTS_ETL.BE_2_DUNSMasterPackage.dtsx`然后您将启动该作业以代替当前的 xp_cmdshell。`EXECUTE msdb.dbo.sp_start_job 'RTS_ETL.BE_2_DUNSMasterPackage'`这种方法的两个注意事项
    1.  您的机器可以支持尽可能多的并发 dtexec 调用。一个特定的 SQL 代理作业不能多次运行。
    2.  如果您提供动态运行时选项，那也不适用于代理作业。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T20:07:53.110

无法使用 2005 包实用程序运行 2008 包。

# java - gwt 混淆编译重命名

> ID：13633733
> 
> 赞同：1
> 
> 时间：2012-11-29T20:01:23.113
> 
> 标签：java, javascript, gwt

我们在 GWT 上有一个项目，出于安全原因，我们的生产版本已在混淆模式下编译。该应用程序工作正常，除非浏览器插件在页面上插入 javascript，因为某些插件具有名称混淆的功能，如 aa、ab、xv、zf 等...

我们想知道是否有一种方法可以告诉 GWT 编译器为所有 javascript 混淆函数添加前缀，以便函数获得 cccab、ccczf、cccaa 等名称。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T14:42:14.267

有一个简单的方法：重写GWT编译器的名字混淆器类，重新编译。我只是这样做并且它有效。

# r - model.matrix 使用多列

> ID：13633734
> 
> 赞同：4
> 
> 时间：2012-11-29T20:01:27.977
> 
> 标签：r, formula, model.matrix

我正在尝试在 model.matrix 中使用 data.frame 中的多个列。

数据框如下所示：

```
 df1 <- data.frame(id=seq(1,10,1), zip1=(round(runif(10)*100000,0)), zip2=(round(runif(10)*100000,0))
    ,var1=round(runif(10)*100,1),Sales=round(runif(10)* 10000,2))
df1$zip1 <- ifelse(nchar(as.character(df1$zip1)) < 5,paste("0",as.character(df1$zip1),sep=""),df1$zip1)
df1$zip2 <- ifelse(nchar(as.character(df1$zip2)) < 5,paste("0",as.character(df1$zip2),sep=""),df1$zip2)

df1$zip1 <- factor(df1$zip1)
df1$zip2 <- factor(df1$zip2)
dput(df1)

> dput(df1)
structure(list(id = c(1, 2, 3, 4, 5, 6, 7, 8, 9, 10), zip1 = structure(c(5L, 
1L, 8L, 3L, 7L, 9L, 2L, 6L, 10L, 4L), .Label = c("16667", "21922", 
"29100", "54398", "55447", "72607", "84667", "96562", "97012", 
"99125"), class = "factor"), zip2 = structure(c(7L, 4L, 2L, 6L, 
3L, 8L, 5L, 9L, 1L, 10L), .Label = c("0451", "0644", "14040", 
"17184", "18838", "42308", "48507", "50496", "64851", "89748"
), class = "factor"), var1 = c(94.4, 39.6, 47.1, 74, 67.3, 53.4, 
28.7, 91.6, 47.1, 44.8), Sales = c(6394.03, 5575.65, 773.58, 
3181.43, 4992.56, 6627.01, 3313.13, 1585.1, 5080.98, 499.86)), .Names = c("id", 
"zip1", "zip2", "var1", "Sales"), row.names = c(NA, -10L), class = "data.frame") 
```

看起来像这样：

```
 > df1
   id  zip1  zip2 var1   Sales
1   1 55447 48507 94.4 6394.03
2   2 16667 17184 39.6 5575.65
3   3 96562  0644 47.1  773.58
4   4 29100 42308 74.0 3181.43
5   5 84667 14040 67.3 4992.56
6   6 97012 50496 53.4 6627.01
7   7 21922 18838 28.7 3313.13
8   8 72607 64851 91.6 1585.10
9   9 99125  0451 47.1 5080.98
10 10 54398 89748 44.8  499.86 
```

我想做类似的事情：

```
df2 <- model.matrix(~df1[,-c(1,5)])
glmnet1 <- cv.glmnet(df2, df1[,"Sales"]
    , family="gaussian", alpha=.95, nfolds=10, standardize = FALSE, type.measure="deviance") 
```

但是我不能让 model.matrix 接受多个变量：

```
> f1 <- formula(df1$Sales ~ df1[,c("zip1","zip2")])
> df2 <- model.matrix(f1)
  Error in model.frame.default(object, data, xlev = xlev) : 
  invalid type (list) for variable 'df1[, c("zip1", "zip2")]' 
```

有什么建议么？

编辑：

```
> f1 <- formula(Sales ~., data= df1[,-c(1,5)])
> df2 <- model.matrix(f1)
Error in terms.formula(object) : '.' in formula and no 'data' argument 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-29T20:25:02.630

您可以为公式指定多个变量，例如：

```
model.matrix(Sales ~ zip1 + zip2, data=df1) 
```

如果您想节省输入内容，请尝试：

```
formdf1 <- as.formula(paste("Sales ~ ", paste(names(df1)[2:3],collapse="+")))
formdf1
#Sales ~ zip1 + zip2 
```

然后运行：

```
model.matrix(formdf1,data=df1) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T20:33:37.123

```
require(glmnet)
df2 <- df1[,-c(1)]  # need the "Sales" column, drop it later
# Could use df2 <- df1[ !names(df1) %in% exclude_vec ]
glmnet1 <- cv.glmnet( model.matrix( Sales ~ . , df2)[, -1], df1[,"Sales"] ,
      family="gaussian", alpha=.95, nfolds=10, standardize = FALSE,
      type.measure="deviance") 
```

# c++ - 写入数组末尾的影响

> ID：13633735
> 
> 赞同：0
> 
> 时间：2012-11-29T20:01:30.137
> 
> 标签：c++, buffer-overflow

我发现一些 C++ 代码可以执行以下操作：

```
struct Test
{
    int a[128];
    char b[768];
};

int main()
{
    Test test;
    for( int i = 0; i < 200; ++i)
        test.a[i] = 1;
    return 0;
} 
```

我意识到这是错误的。但是，我想知道效果如何？在 GCC 4.3.4 上，Test::b 数组保持不变。这有保证吗？这里发生了什么？

阅读效果一样吗？例如

```
int main()
{
    Test test;
    for( int i = 0; i < 200; ++i)
        int z = test.a[i];
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T20:02:58.600

这是未定义的行为，**任何事情都**可能发生。

除了编译器之外，还有更多的变量需要考虑——版本、操作系统、硬件、天气、星期几等。

该标准说未定义的行为可能意味着任何事情，因此您实际上不能有任何期望，即使使用相同的编译器也不行。

例如，如果您在 之后有一个不同的变量`test.a`，您可能会遇到访问冲突。或者您可以简单地覆盖该变量。什么都行。

基本上，在这种情况下，未定义的不是写作部分，而是对

```
test.a[i] 
```

与`i>=128`. 只是不允许。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T20:03:03.163

如果`undefined behaviour`你写在数组的边界之外，你无法预测会发生什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T20:04:25.493

未定义的行为。绝对没有保证，实际上任何事情都可能发生。一个常见的反复无常的评论是，它可以通过电子邮件将 goatse 发送给您的祖母。

[http://en.wikipedia.org/wiki/Undefined_behavior](http://en.wikipedia.org/wiki/Undefined_behavior)

在实践中，它可能会继续进一步写入`Test`对象，尽管由于对齐目的的填充，开始`b`可能不会在结束后立即跟随。`a`

[http://en.wikipedia.org/wiki/Data_structure_alignment](http://en.wikipedia.org/wiki/Data_structure_alignment)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T20:13:01.073

在 C++ 标准定义的抽象语言 C++ 中，任何事情都可能发生。

在此编译器定义的具体语言 G++ 4.3.4 中，*将*发生的具体情况是您将覆盖`test.b`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-29T21:13:15.720

Aside from the "undefined behavior", what really happens depends on whether the part you're overwriting is actually used or not. If that piece of memory isn't being used, it might cause an error or crash (depending if you're running anything to monitor the issue). However, if there is some data there and it does not crash, it might cause a cascade effect in your software where another piece of code that depends on the overwritten part fails to execute. This is what makes tracking these issues so hard, since when a cascade failure happens it's hard to find the root cause as opposed to the visible symptoms ("Why does this variable have a value x when I never ever assign that kind of value to it")

# actionscript-3 - 将 as2 转换为 as3

> ID：13633736
> 
> 赞同：2
> 
> 时间：2012-11-29T20:01:34.690
> 
> 标签：actionscript-3, flash, actionscript-2, flash-cs5.5

我找到了一个用于从动态文本框中搜索和选择特定文本的脚本

但问题是它是 AS2

我通过只学习 AS3 开始 Flash，所以我不知道如何将 AS2 转换为 AS3 请有人帮助我:)

```
finder.onRelease = function() {
       Selection.setFocus("_root.textInstance");
       var inputterString:String = _root.inputter
       var inputLength:Number = inputterString.length;
       textStart = textVar.indexOf(inputter, 0);
       if (inputLength>0) {
             textEnd = textStart+inputLength;
       } else {
             textEnd = 0;
       }
       if (textStart>=0) {
             Selection.setSelection(textStart, textEnd);
       } else {
             Selection.setSelection(0, 0);
       }
       _root.textEnd = textEnd;
};

findNext.onRelease = function() {
       Selection.setFocus("_root.textInstance");
       var inputterString:String = _root.inputter;
       var inputLength:Number = inputterString.length;
       textStart = textVar.indexOf(inputter, _root.textEnd);
       if (inputLength>0) {
             textEnd = textStart+inputLength;
       } else {
             textEnd = 0;
       }
       if (textStart>=0) {
             Selection.setSelection(textStart, textEnd);
       } else {
             Selection.setSelection(0, 0);
       }
       _root.textEnd = textEnd;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T21:29:53.980

它并没有你想象的那么糟糕，但是 finder 和 findNext 按钮是什么？这些是可以创建的回调

```
finder.addEventListener(MouseEvent.MOUSE_UP, finderCallback);

// somewhere else in the code

private function finderCallback(e:MouseEvent):void {
   // code here

   // anything like _root.<varName> references something on the main file, 
   // so this just has to be something you can access in the funciton
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T22:14:25.977

好的，应该是这样的。我对 root.textInstance 和按钮做了一些假设。

```
import flash.events.MouseEvent;

function onFinderClicked(event:MouseEvent):void{
    stage.focus = root.textInstance;
    root.textInstance.selectable = true;
     var inputterString:String = root.inputter
     var inputLength:Number = inputterString.length;
     textStart = textVar.indexOf(inputter, 0);
     if (inputLength>0) {
         textEnd = textStart+inputLength;
     } else {
         textEnd = 0;
     }
     if (textStart>=0) {
         root.textInstance.setSelection(textStart, textEnd);
     } else {
         root.textInstance.setSelection(0, 0);
     }
     root.textEnd = textEnd;
};

function onFindNextClicked(event:MouseEvent):void{
    stage.focus = root.textInstance;
    root.textInstance.selectable = true;
    var inputterString:String = root.inputter;
    var inputLength:Number = inputterString.length;
    textStart = textVar.indexOf(inputter, root.textEnd);
    if (inputLength>0) {
         textEnd = textStart+inputLength;
    } else {
         textEnd = 0;
    }
    if (textStart>=0) {
         root.textInstance.setSelection(textStart, textEnd);
    } else {
         root.textInstance.setSelection(0, 0);
    }
    root.textEnd = textEnd;
}

finder.addEventListener(MouseEvent.CLICK, onFinderClicked);
findNext.addEventListener(MouseEvent.CLICK, onFindNextClicked); 
```

# c++ - 在 direct3d11 对象上为 std::shared_ptr 使用自定义删除器

> ID：13633737
> 
> 赞同：6
> 
> 时间：2012-11-29T20:01:35.393
> 
> 标签：c++, c++11, directx-11

当我使用 std::shared_ptr 并需要自定义删除器时，我通常会创建对象的成员函数以促进它的破坏，如下所示：

```
class Example
{
public:
    Destroy();
}; 
```

然后当我使用共享 ptr 时，我只是这样：

```
std::shared_ptr<Example> ptr(new Example, std::mem_fun(&Example::Destroy)); 
```

问题是，现在我正在使用 d3d11，我想使用 com 发布函数作为 std::shared_ptr 自定义删除器，就像这样

```
std::shared_ptr<ID3D11Device> ptr(nullptr, std::mem_fun(&ID3D11Device::Release)); 
```

但我收到此错误：

```
error C2784: 'std::const_mem_fun1_t<_Result,_Ty,_Arg> std::mem_fun(_Result (__thiscall _Ty::* )(_Arg) const)' : could not deduce template argument for '_Result (__thiscall _Ty::* )(_Arg) const' from 'ULONG (__stdcall IUnknown::* )(void)' 
```

然后当我像这样明确指定模板参数时：

```
std::shared_ptr<ID3D11Device> ptr(nullptr, std::mem_fun<ULONG, ID3D11Device>(&ID3D11Device::Release)); 
```

我得到这个错误，

```
error C2665: 'std::mem_fun' : none of the 2 overloads could convert all the argument types 
```

有人可以解释为什么我不能将此功能用作删除器吗？

注意：不建议我使用 CComPtr，我使用的是 msvc++ express edition :\

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-29T20:35:52.693

这个怎么样？

```
std::shared_ptr<ID3D11Device> ptr(nullptr, [](ID3D11Device* ptr){ptr->Release();} ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T20:18:18.967

尝试这个

```
struct Releaser{
    void operator()(ID3D11Device* p){
        p->Release();

    };

};

std::shared_ptr<ID3D11Device> ptr(nullptr, Releaser()); 
```

# c# - 值太小或太大错误

> ID：13633741
> 
> 赞同：2
> 
> 时间：2012-11-29T20:01:38.807
> 
> 标签：c#, xml, xpath

str1 和 str2 是字符串变量，它们保存要访问的节点的值，在这种情况下 str1 = "abc" 和 str2 = "efg"。变量 x 是一个整数，当我运行我的程序时，我得到一个“值对于 int32 来说太大或太小”错误：

```
XPathDocument xmlDoc = new XPathDocument(path);
XPathNavigator course= xmlDoc.CreateNavigator();                 
XPathNodeIterator value = course.Select("/root/x[@atr =" + str1 + "]/y[@atr =" + str2 + "]/value1");
x = Convert.ToInt32(value.Current.Value); 
```

我的xml是：

```
 <root>
                <x atr = "abc">
                    <y atr ="efg">  
                        <value1>12</value1>
                        <value2>25</value2>
                        <value3>16</value3>
                    </y>
                </x>
            </root> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T20:58:50.890

**编辑：**这是一个简单的例子：`"/root/x[@atr ='" + str1 + "']/y[@atr ='" + str2 + "']/value1"`您需要在路径中的属性字符串周围加上引号。

你会构建`/root/x[@atr=abc]/y[@atr=efg]/value1`这个构建的 xpath`/root/x[@atr='abc']/y[@atr='efg']/value1` 与大多数语言一样，字符串也需要在 xpath 中用引号引起来。

* * *

您的原始代码的问题是`XPathNodeIterator`您需要在调用`value.MoveNext();`之前调用`value.Current`

```
XPathNodeIterator value = course.Select("/root/x/y/value1");
value.MoveNext();
x = Convert.ToInt32(value.Current.Value); 
```

* * *

我正在使用的完整示例代码：

```
var doc = XDocument.Parse(@"<root>
    <x>
        <y> 
            <value1>12</value1>
            <value2>25</value2>
            <value3>16</value3>
        </y>
    </x>
</root>");

////Also works for XmlDocument
//XmlDocument doc = new XmlDocument();
//doc.LoadXml(@"<root>
//  <x>
//      <y> 
//          <value1>12</value1>
//          <value2>25</value2>
//          <value3>16</value3>
//      </y>
//  </x>
//</root>");

XPathNavigator course = doc.CreateNavigator();

XPathNodeIterator value = course.Select("/root/x/y/value1");
Console.WriteLine(value.Current.Value);  //Outputs 122516, which is the same as doc.Root.Value or XmlDocument.InnerText
value.MoveNext();
Console.WriteLine(value.Current.Value);  //Outputs 12, correctly
int x = Convert.ToInt32(value.Current.Value);  //Parses fine 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T20:48:22.743

我将只使用 XDocument 的扩展方法[XPathSelectElement](http://msdn.microsoft.com/en-us/library/bb156083.aspx)，如下例所示：

```
var doc = XDocument.Parse(@"<root>
    <x atr = 'abc'>
        <y atr = 'efg'> 
            <value1>12</value1>
            <value2>25</value2>
            <value3>16</value3>
        </y>
    </x>
</root>");

var x = int.Parse(doc.XPathSelectElement("/root/x[@atr =\"abc\"]/y[@atr = \"efg\"]/value1").Value);
Console.WriteLine(x); 
```

# c# - 非静态类的实例之间共享的非静态类的内部静态类的静态属性？

> ID：13633742
> 
> 赞同：1
> 
> 时间：2012-11-29T20:01:45.580
> 
> 标签：c#, .net, inner-classes, static-members

一个例子值得一千个愚蠢的问题，所以：

```
public class OuterClass
{
    public static class InnerClassEventArgs : EventArgs
    {
        public static int SomeInt;
    }
} 
```

在遥远的星系中：

```
public void SomeFunkyFunc()
{
    OuterClass Instance1;
    OuterClass Instance2;

    Instance1.InnerClassEventArgs.SomeInt = 1;
    Instance2.InnerClassEventArgs.SomeInt = 2;

    //WHAT WOULD Instance1.InnerClassEventArgs.Someint == ?
} 
```

是的，我现在意识到我已经输入了几乎所有我需要回答我自己的问题的代码。如果比我聪明的人知道他们的头脑，我宁愿不创建一个新项目并经历麻烦。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T20:04:34.777

`Instance1.InnerClassEventArgs.SomeInt`将等于 2。静态字段在类的所有实例之间共享——或者[如 MSDN 所说](http://msdn.microsoft.com/en-us/library/79b3xss3.aspx)：

> 静态成员总是由类名访问，而不是实例名。无论创建了多少个类实例，都只存在一个静态成员的副本。

请注意，您的特定示例无法编译 - 您将收到一条错误消息，显示“无法在非静态上下文中访问静态类 'InnerClassEventArgs'”。

您必须改用以下代码，这有望使行为更易于理解：

```
OuterClass.InnerClassEventArgs.SomeInt = 1;
OuterClass.InnerClassEventArgs.SomeInt = 2; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T20:06:35.613

静态类只有一个实例，由其所有用法“共享”（在您的情况下，是 OuterClass 的所有实例）。因此，该对象的状态将是任何使用所做的所有更改的总和。在这个简单的示例中，SomeInt 将为 2，无论您使用哪个 OuterClass 实例再次访问它（Instance1 或 Instance2）。

我很方便地忽略了以下所有内容：

*   静态类不能从任何其他类继承。因此，InnerClassEventArgs 不能从 EventArgs 继承。
*   Instance1 和 Instance2 未初始化；如果您使用 ReSharper，这将导致其自身的编译时错误（“X 在访问之前可能未初始化”）。
*   不能基于任何一个实例访问静态成员（包括嵌套的静态类）；您将在静态上下文中访问 InnerClassEventArgs。

# sql - 在一组重叠的、版本编号的区间中，找到每个时间点的最新版本

> ID：13633745
> 
> 赞同：5
> 
> 时间：2012-11-29T20:01:56.397
> 
> 标签：sql, sql-server, intervals, mathematical-optimization

我正在使用一组日期间隔，其中每个间隔都有一个版本号，新间隔将经常与旧间隔重叠，甚至是它们的子集。根据这些数据，我需要计算一组新的间隔，以显示每个时间点的最新版本号。这个问题有基于集合的解决方案吗？

这是一个插图：

```
Interval 1: 11111111111111111111111      
Interval 2:     2222222222               
Interval 3:   33333333333333             
Interval 4:                     444444444
Interval 5:                   555555555  
Result    : 11333333333333331155555555544 
```

这是我正在使用的数据示例：

```
groupId   startDate  endDate     version
--------  ---------  ----------  ------
1         1/1/2010   1/1/2011    1
1         10/1/2010  7/5/2011    2
1         7/5/2011   8/13/2012   3
1         8/13/2012  12/31/2012  6
1         10/1/2012  11/1/2012   8 
```

...以及所需的输出：

```
groupId   startDate  endDate     version
--------  ---------  ----------  ------
1         1/1/2010   10/1/2010   1
1         10/1/2010  7/5/2011    2
1         7/5/2011   8/13/2012   3
1         8/13/2011  10/1/2012   6
1         10/1/2012  11/1/2012   8 << note how version 8 supersedes version 6
1         11/1/2012  12/31/2012  6 << version 6 is split into two records 
```

我还没有找到任何其他关于这个问题的例子，我的谷歌搜索只找到了识别[间隙和岛屿](http://msdn.microsoft.com/en-us/library/aa175780(v=sql.80).aspx)或[覆盖集](https://stackoverflow.com/questions/293168/finding-the-minimal-coverage-of-an-interval-with-subintervals)的查询。

我想我有一个迭代解决方案（SQL Server 2008）。它从结果集中间隔的临时表开始，并通过插入具有特殊版本号的记录来定义我们想要覆盖的范围的起点和终点。然后，它反复识别结果集间隔之间的间隙，并尝试用原始数据集中的最新记录填充它们，直到没有更多的间隙或没有更多的记录要添加：

```
GO
-- Create data set and results table
CREATE TABLE #Data (
     groupId    INT
    ,startDate  DATE
    ,endDate    DATE
    ,versionId  INT
)

INSERT INTO #Data (groupId, startDate, endDate, versionId) VALUES (1, '2007-12-22', '2008-12-22', 8)
INSERT INTO #Data (groupId, startDate, endDate, versionId) VALUES (1, '2008-12-22', '2009-12-22', 9)
INSERT INTO #Data (groupId, startDate, endDate, versionId) VALUES (1, '2009-12-22', '2010-12-22', 10)
INSERT INTO #Data (groupId, startDate, endDate, versionId) VALUES (1, '2010-12-22', '2011-12-22', 11)
INSERT INTO #Data (groupId, startDate, endDate, versionId) VALUES (1, '2011-01-01', '2011-11-30', 500)
INSERT INTO #Data (groupId, startDate, endDate, versionId) VALUES (1, '2011-12-22', '2012-12-22', 12)
INSERT INTO #Data (groupId, startDate, endDate, versionId) VALUES (1, '2012-01-22', '2012-12-22', 13)
INSERT INTO #Data (groupId, startDate, endDate, versionId) VALUES (1, '2012-01-22', '2012-12-22', 14)
INSERT INTO #Data (groupId, startDate, endDate, versionId) VALUES (1, '2012-04-22', '2012-12-22', 17)
INSERT INTO #Data (groupId, startDate, endDate, versionId) VALUES (1, '2012-04-22', '2012-12-22', 19)
INSERT INTO #Data (groupId, startDate, endDate, versionId) VALUES (2, '2010-01-01', '2011-01-01', 1)
INSERT INTO #Data (groupId, startDate, endDate, versionId) VALUES (2, '2010-10-01', '2011-07-05', 2)
INSERT INTO #Data (groupId, startDate, endDate, versionId) VALUES (2, '2011-07-05', '2012-08-13', 3)
INSERT INTO #Data (groupId, startDate, endDate, versionId) VALUES (2, '2012-08-13', '2012-12-31', 6)
INSERT INTO #Data (groupId, startDate, endDate, versionId) VALUES (2, '2012-10-01', '2012-11-01', 8)

CREATE TABLE #Results (
     groupId        VARCHAR(10)
    ,startDate  DATE
    ,endDate    DATE
    ,versionId      BIGINT
)

DECLARE @startDate      DATE
DECLARE @endDate        DATE
DECLARE @placeholderId  BIGINT

SET @startDate = '20030101'
SET @endDate = '20121231'
SET @placeholderId = 999999999999999

INSERT #Results
SELECT DISTINCT
     groupId
    ,CASE WHEN MIN(startDate) < @startDate THEN MIN(startDate) ELSE @startDate END
    ,CASE WHEN MIN(startDate) < @startDate THEN @startDate ELSE MIN(startDate) END
    ,@placeholderId
FROM #data
GROUP BY groupId
UNION ALL
SELECT DISTINCT
     groupId
    ,CASE WHEN MAX(endDate) < @endDate THEN MAX(endDate) ELSE @endDate END
    ,CASE WHEN MAX(endDate) < @endDate THEN @endDate ELSE MAX(endDate) END
    ,@placeholderId
FROM #data
GROUP BY groupId
GO

-- Fill gaps in results table
DECLARE @startDate      DATE
DECLARE @endDate        DATE
DECLARE @placeholderId  BIGINT

SET @startDate = '20030101'
SET @endDate = '20111231'
SET @placeholderId = 999999999999999

DECLARE @counter INT
SET @counter = 0

WHILE @counter < 10
BEGIN
    SET @counter = @counter + 1;
    WITH Gaps AS (
        SELECT
             gs.groupId
            ,gs.startDate
            ,MIN(ge.endDate) as endDate
            ,ROW_NUMBER() OVER (ORDER BY gs.groupId, gs.startDate) as gapId
        FROM (
            SELECT groupId, endDate as startDate
            FROM #Results r1 
            WHERE NOT EXISTS (
                    SELECT * 
                    FROM #Results r2 
                    WHERE r2.groupId = r1.groupId
                        AND r2.versionId <> r1.versionId
                        AND r2.startDate <= r1.endDate
                        AND r2.endDate > r1.endDate
                )
                AND NOT (endDate >= @endDate AND versionId = @placeholderId)
        ) gs
        INNER JOIN (
            SELECT groupId, startDate as endDate
            FROM #Results r1 
            WHERE NOT EXISTS (
                    SELECT * 
                    FROM #Results r2 
                    WHERE r2.groupId = r1.groupId
                        AND r2.versionId <> r1.versionId
                        AND r2.endDate >= r1.startDate
                        AND r2.startDate < r1.startDate
                )
                AND NOT (startDate <= @startDate AND versionId = @placeholderId)
        ) ge
            ON ge.groupId = gs.groupId
            AND ge.endDate >= gs.startDate
        GROUP BY gs.groupId, gs.startDate
    )
    INSERT #Results (
         groupId
        ,startDate
        ,endDate
        ,versionId
    )
    SELECT
         d.groupId
        ,CASE WHEN d.startDate < g.startDate THEN g.startDate ELSE d.startDate END
        ,CASE WHEN d.endDate > g.endDate THEN g.endDate ELSE d.endDate END
        ,d.versionId
    FROM #Data d
    INNER JOIN Gaps g
        ON g.groupId = d.groupId
        AND g.startDate <= d.endDate
        AND g.endDate >= d.startDate
    INNER JOIN (
        SELECT 
             d.groupId
            ,gapId
            ,MAX(d.versionId) as versionId
        FROM #Data d
        INNER JOIN Gaps g
            ON g.groupId = d.groupId
            AND g.startDate <= d.endDate
            AND g.endDate >= d.startDate
        WHERE d.versionId < (
                SELECT MIN(versionId)
                FROM #Results r
                WHERE r.groupId = d.groupId
                    AND (r.startDate = g.endDate OR r.endDate = g.startDate)
            )
            AND NOT EXISTS (
                SELECT *
                FROM #Data dsup
                WHERE dsup.groupId = d.groupId
                    AND dsup.versionId > d.versionId
                    AND dsup.startDate <= d.startDate
                    AND dsup.endDate >= d.endDate
            )
        GROUP BY
             d.groupId
            ,g.gapId
    ) mg
        ON mg.groupId = g.groupId
        AND mg.gapId = g.gapId
        AND mg.versionId = d.versionId
END

SELECT *
FROM #Results
WHERE versionId <> @placeholderId
order by groupId, startDate 
```

基于集合的解决方案会更有用，但我一直在努力寻找。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T21:03:06.293

```
-- create a dates table
create table dates (thedate date primary key clustered);
;with dates(thedate) as (
  select dateadd(yy,years.number,0)+days.number
    from master..spt_values years
    join master..spt_values days
      on days.type='p' and days.number < datepart(dy,dateadd(yy,years.number+1,0)-1)
   where years.type='p' and years.number between 100 and 150
      -- note: 100-150 creates dates in the year range 2000-2050
      --       adjust as required
)
insert dbo.dates select * from dates;

-- for each date, determine the prevailing version
  select t.groupId, d.thedate, max(t.versionId) versionId
    into #tmp1
    from dates d
    join #Data t on t.startDate <= d.thedate and d.thedate <= t.endDate
group by t.groupId, d.thedate;

-- create index to help
create clustered index cix_tmp1 on #tmp1(groupId, thedate, versionId);

-- find the start dates
;with t as (
   select a.*, rn=row_number() over (partition by a.groupId order by a.thedate)
     from #tmp1 a
left join #tmp1 b on b.thedate = dateadd(d,-1,a.thedate) and a.groupId = b.groupId and a.versionId = b.versionId
    where b.versionId is null
)
   select c.groupId, c.thedate startdate, dateadd(d,-1,d.thedate) enddate, c.versionId
     from t c
left join t d on d.rn=c.rn+1 and c.groupId = d.groupId
 order by groupId, startdate; 
```

当然，您可以在**“一个查询”**中完成所有操作，但这样做会带来风险，因为性能会大打折扣。

**不要使用 - 仅用于学术兴趣 -**

```
;with dates(thedate) as (
  select dateadd(yy,years.number,0)+days.number
    from master..spt_values years
    join master..spt_values days
      on days.type='p' and days.number < datepart(dy,dateadd(yy,years.number+1,0)-1)
   where years.type='p' and years.number between 100 and 150
      -- note: 100-150 creates dates in the year range 2000-2050
      --       adjust as required
), tmp1 as (
  select t.groupId, d.thedate, max(t.versionId) versionId
    from dates d
    join #Data t on t.startDate <= d.thedate and d.thedate <= t.endDate
group by t.groupId, d.thedate
), t as (
   select a.*, rn=row_number() over (partition by a.groupId order by a.thedate)
     from tmp1 a
left join tmp1 b on b.thedate = dateadd(d,-1,a.thedate) and a.groupId = b.groupId and a.versionId = b.versionId
    where b.versionId is null
)
   select c.groupId, c.thedate startdate, dateadd(d,-1,d.thedate) enddate, c.versionId
     from t c
left join t d on d.rn=c.rn+1 and c.groupId = d.groupId
 order by groupId, startdate; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T21:30:30.023

Updated due to some feedback from the comments. I'm not going to worry about the end cases that a few people have pointed out since they've been proven trivial to solve in other Answers, but I wanted to go ahead and get a working version out that didn't require DDL... I figure it's just good to have options. :-)

This code should work:

```
select nesty.groupId, nesty.startDate, nesty.segment_end_date, Max(bob.versionId)
from(
select starter.groupId, starter.startDate,
coalesce(DATEADD(DAY,-1,ender.startDate),('2012-12-31')) AS segment_end_date
from
(select groupId, startDate, ROW_NUMBER() over (partition by groupID order by startDate) as rownumber from
    (select groupID, startDate from #Data union select groupID, DATEADD(DAY, 1,endDate) as startDate from #Data) xx) starter
left outer join
(select groupId, startDate, ROW_NUMBER() over (partition by groupID order by startDate) as rownumber from
    (select groupID, startDate from #Data union select groupID, DATEADD(DAY, 1,endDate)    as startDate from #Data) xy) ender on
    starter.groupId = ender.groupId and
    starter.rownumber = ender.rownumber - 1
where
starter.startDate<= coalesce(DATEADD(DAY,-1,ender.startDate),('2012-12-31'))
) nesty
left outer join #Data bob on
bob.groupId = nesty.groupId and
nesty.segment_end_date between bob.startDate and bob.endDate
group by nesty.groupId, nesty.startDate, nesty.segment_end_date
order by nesty.groupId, nesty.startDate 
```

There are a couple of tiny caveats I had to do to get it into a single SQL statement. First, the max end date is not dynamic; I hard coded '2012-12-31'. You can replace it with a MAX(endDate), but you can't put that in the GROUP BY statement. If you can do this in a procedure, you can do:

```
select into @max_end_date MAX(endDate) from #Data 
```

and replace '2012-12-31' with @max_end_date.

Second, I do not guarantee that two adjacent segments won't have the same value! This may or may not be important to you... that is, if you had the following:

```
Interval 1:       111111      
Interval 2:   22222222222222 
```

Your output would be:

```
Interval 1:   2222
Interval 2:       2222222222 
```

Still, I think it's worth hitting it in a simple and efficient SQL query. It may not be hard to fix those caveats, but it didn't matter to what I was working on, so I haven't bothered yet.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T01:11:15.920

如果结束日期很重要，也很重要，这里有一种方法可以做到。`datetimes`如果您的版本不仅仅是日期，此解决方案也可以适应工作。

首先是一堆函数

一个在给定日期获取版本

```
Create Function dbo.VersionAtDate(@GroupID int, @Date datetime) Returns int as
Begin
  Declare @Ret int = Null
  Select
    @Ret = Max(VersionID)
  From
    VersionedIntervals iv
  Where
    iv.GroupID = @GroupID And
    iv.StartDate <= @Date And
    iv.EndDate + 1 > @Date -- if dates were half open intervals this would just be iv.EndDate > @Date
  Return @Ret
End 
```

接下来获取两个日期时间的中点（分钟分辨率）：

```
Create Function dbo.Midpoint(@Start datetime, @End datetime) Returns datetime as
Begin
  Return DateAdd(Minute, DateDiff(Minute, @Start, @End) / 2, @Start)
End 
```

中间版本：

```
Create Function dbo.VersionAtMidpoint(@GroupID int, @Start datetime, @End datetime) returns int as
Begin
  Return dbo.VersionAtDate(@GroupID, dbo.Midpoint(@Start, @End))
End; 
```

最后是一个表值函数来帮助解决一些点是一个范围的开始和另一个范围的结束这一事实，它有助于从一个输入中获取两行：

```
-- returns two rows if a point is the end of one interval and the
-- start of another
Create Function dbo.EndPoints(@GroupID int, @RN bigint, @Start datetime, @End datetime, @Next datetime, @Version int)
Returns @EndPoints Table (
    GroupID int,
    RN bigint,
    Version int,
    StartDate datetime,
    EndDate datetime
) As
Begin
  Declare @NextVersion int, @VersionAtMidpoint int
  Set @NextVersion = dbo.VersionAtDate(@GroupID, @Next)
  If @NextVersion = @Version
    -- interval carries on
    Insert Into @EndPoints Select @GroupID, @RN, @Version, @Start, @Next
  Else
  Begin
    -- interval has ended
    Set @VersionAtMidpoint = dbo.VersionAtMidPoint(@GroupID, @End, @Next)
    If @VersionAtMidpoint != @Version
        -- we have something like this, start a run of 3s (run of 4s is already ended by previous call)
        -- 3333333
        -- 44     
        Insert Into @EndPoints Select @GroupID, @RN, @VersionAtMidpoint, @End, @Next 
    Else
    Begin
        -- We have something like this, end the run of 3s and start the run of fours
        -- 33333
        --   444
        Insert Into @EndPoints Select @GroupID, -1, @Version, @Start, @Next
        Insert Into @EndPoints Select @GroupID, @RN, @NextVersion, @Next, @Next
    End
  End
  Return
End 
```

有了所有这些机制，最后是递归 CTE plust 表变量，您需要适当地设置 maxrecursion ：

```
Declare @Bounds Table (GroupID int, RN bigint, BoundDate datetime, Primary Key (GroupID, RN))

Insert Into
    @Bounds
Select
    GroupID,
    Row_Number() Over (Partition By GroupID Order By BoundDate),
    BoundDate
From (
    Select
        GroupID,
        StartDate As BoundDate
    From
        dbo.VersionedIntervals
    Union
    Select
        GroupID,
        EndDate
    From
        dbo.VersionedIntervals
    ) a

;With VersionedBounds (GroupID, RN, StartDate, EndDate, Version) as (
    Select
        GroupID,
        RN,
        BoundDate,
        BoundDate,
        dbo.VersionAtDate(GroupID, BoundDate)
    From
        @Bounds
    Where
        RN = 1
    Union All
    Select
        e.GroupID,
        e.RN,
        e.StartDate,
        e.EndDate,
        e.Version
    From
        @Bounds b
            Inner Join
        VersionedBounds v
            On v.GroupID = b.GroupID And b.RN = v.RN + 1
            Cross Apply 
        dbo.EndPoints(v.GroupID, b.RN, v.StartDate, v.EndDate, b.BoundDate, v.Version) e
)
Select 
    GroupID,
    StartDate,
    Max(EndDate) As EndDate,
    Max(Version) As Version
From
    VersionedBounds
Group By
    GroupID,
    StartDate
Order By
    GroupID,
    StartDate 
```

[http://sqlfiddle.com/#!6/b95bd/2](http://sqlfiddle.com/#!6/b95bd/2)

# java - 如何在 jdbc MySQL 查询中处理 0000-00-00 日期

> ID：13633747
> 
> 赞同：3
> 
> 时间：2012-11-29T20:02:04.473
> 
> 标签：java, mysql, sql, date, jdbc

我得到了这个例外：

```
java.sql.SQLException: Value '0000-00-00' can not be represented as java.sql.Date 
```

源自此代码：

```
Date internalDate = rs.getDate(idx++); 
```

`rs`一个在哪里`ResultSet`。

所以这对我来说很好 - 我知道数据库中有零日期，我需要能够读取这些日期并将它们转换为下游数据结构中的适当（可能为空）数据。问题是我不知道如何检索它并得到一个“软”错误。我曾考虑将这一行包装在 SQLException 的 try/catch 中，但我知道这会破坏 ResultSet 的有效性。

是否可以在不抛出 SQLException 的情况下以另一种方式读取此值？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-29T20:08:50.297

我喜欢[@a_horse_with_no_name](https://stackoverflow.com/users/330315/a-horse-with-no-name)的答案，但是如果您无法控制连接，则可以更改查询以返回 a `null`：

```
select
    ...
    case when my_date_col = '0000-00-00' then null else my_date_col end as my_date_col,
    ... 
```

或者更简洁但仅限 mysql 的选项：

```
 if(my_date_col = '0000-00-00', null, my_date_col) as my_date_col 
```

此外，建议谨慎更改整个应用程序的 JDBC 行为，因为您可能会破坏依赖于返回的此类日期的代码 - 也许它们会改用它们`rs.getString(i)`。您必须对所有其他查询进行回归测试才能确定。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-29T20:06:11.500

您需要告诉 JDBC 驱动程序将它们转换为 NULL。这是通过传递`zeroDateTimeBehavior`带有值的连接属性名称来完成的`convertToNull`

有关更多详细信息，请参阅手册：[http ://dev.mysql.com/doc/refman/4.1/en/connector-j-installing-upgrading.html](http://dev.mysql.com/doc/refman/4.1/en/connector-j-installing-upgrading.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T20:10:17.760

我建议使用`rs.getString()`和解析`String`自己。如果全为 0，则使用空`Date`引用。如果没有，请创建一个适当的`Date`对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-18T07:13:14.477

设置列允许空，并在列设置默认值：1900-01-01 是我最好的解决方案...

[![日期设置](../Images/158e59883061a689f4f2f7f14d460437.png)](https://i.stack.imgur.com/deyLF.jpg)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-18T07:21:20.190

1.  使用“simpleDateFormat.parse(yourValue)”将此字符串结果转换为日期
2.  从该日期获取日或年或月值（无论您想要什么）
3.  这将返回 int 值
4.  检查是否为0
5.  如果它是零设置日期等于空。

# unit-testing - 验证错误消息中的内容

> ID：13633748
> 
> 赞同：1
> 
> 时间：2012-11-29T20:02:15.253
> 
> 标签：unit-testing, junit

我正在使用 org.jnuit.Assert 类对我的业务逻辑进行单元测试。

如果在运行时发生特定情况，例如特定变量应该具有非零值，我的业务逻辑会引发异常。

在我的 catch 块中，我想验证这个字符串消息：“变量 var1 应该具有非零值”。

我认为下面的代码片段会起作用，

```
try{
   //business logic
}catch(Exception e) {
   CharSequence charseq = "Variable var1 should have a non-zero value";
   Assert.assertEquals("Variable var1 should have a non-zero value",true,e.getMessage().contains(charseq));
} 
```

但它不起作用。任何建议，我怎样才能做到这一点？

谢谢，维杰博尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T00:08:44.930

通常断言抛出异常就足够了，为什么断言消息包含一个你知道它会的字符串呢？你可以在 Junit 中这样做：

```
@Test(expected=MyException.class)
public void test() {} 
```

您的代码应该按原样工作。如果您使用 Matchers，您将更好地了解为什么您的异常不包含您的消息：

```
Assert.assertThat(e.getMessage, contains("Variable var1..."); 
```

# python - 从Python中的字符串中提取特定值

> ID：13633751
> 
> 赞同：0
> 
> 时间：2012-11-29T20:02:22.503
> 
> 标签：python, string, parsing, extract

我正在尝试从 .nmap 文件中取出 IP 地址的总数和主机数量。在下面的示例中，我想取出值“512”和值“17”。

```
# Nmap done at Tue Nov 27 10:09:18 2012 -- 512 IP addresses (17 hosts up) scanned in 143.58 seconds 
```

然后，我想将这些值存储在两个单独的数组（总计，在线）中，以便计算运行总计。我很难想出一种方法来从该行中取出这些特定值。它并不总是 512 或 17；它可能更小/更大。

我需要在 python 中完成这个。我已经有了逐行解析文件的代码。我只需要一种方法来取出这些数据。

任何帮助都感激不尽。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:10:06.137

像这样的东西：

```
In [53]: strs="# Nmap done at Tue Nov 27 10:09:18 2012 -- 512 IP addresses (17 hosts up) scanned in 143.58 seconds"

In [55]: re.findall("(\d+)\s+IP address",strs)
Out[55]: ['512']

In [56]: re.findall("(\d+)\s+hosts up",strs)
Out[56]: ['17'] 
```

# ios - 如何从 Adob e Air 播放 iOS 系统声音

> ID：13633752
> 
> 赞同：0
> 
> 时间：2012-11-29T20:02:22.537
> 
> 标签：ios, air, audio

是否可以从 Adob​​e Air 应用程序播放 iOS 默认声音？

当然，我总能找到声音文件（不知何故）并将它们导入 Air 应用程序，但这不是我要问的。

我一直在调查本机扩展，但找不到任何这样做的。

# python - 右对齐包含泰语字符的字符串

> ID：13633753
> 
> 赞同：1
> 
> 时间：2012-11-29T20:02:25.590
> 
> 标签：python, justify, thai, southeast-asian-languages

我想右对齐包含泰语字符的字符串（泰语渲染不能从左到右工作，但也可以上下移动）。

例如，对于字符串 ไป（两个字符，长度为 2）和 ซื้อ（四个字符，长度为 2）我希望得到以下输出（长度为 5）：

```
...ไป

...ซื้อ 
```

天真的

```
print 'ไป'.decode('utf-8').rjust(5)

print 'ซื้อ'.decode('utf-8').rjust(5) 
```

但是，分别产生

```
...ไป

.ซื้อ 
```

任何想法如何获得所需的格式？

编辑：给定一串泰语字符 tc，我想确定该字符串使用了多少 [地点/字段/位置/您想称呼它的任何内容]。这与 len(tc); 不同。len(tc) 通常大于使用的位置数。第二个词给出 len(tc) = 4，但长度为 2 / 使用 2 个位置 / 使用 2 个位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-13T00:52:04.893

**原因**

泰语脚本包含普通字符（*正向宽度*）和非间距标记（*零高级宽度*）。

例如，在单词中`ซื้อ`：

1.  第一个字符是*声母* `"SO SO"`，
2.  然后它有*元音标记* `SARA UUE`，
3.  然后音标`MAI THO`，
4.  然后是*最后的伪辅音* `O ANG`

问题是上面列表中的字符 ##2 和 3 是**零宽度的**。
换句话说，它们不会使字符串“更宽”。
换句话说，`ซื้อ`("to buy") 和`ซอ`("fiddle") 将具有相等的两个字符位置的宽度（但相应的字符串长度为 4 和 2）。

**解决方案**

为了计算“真正的”字符串长度，必须跳过零宽度字符。

**特定于 Python 的**

[unicodedata](https://docs.python.org/2/library/unicodedata.html)模块提供对 Unicode 字符数据库 (UCD) 的访问，该数据库定义了所有 Unicode 字符的字符属性。该数据库中包含的数据是从 UCD 版本 8.0.0 编译而来的。

该`unicodedata.category(unichr)`方法[返回](https://docs.python.org/2/library/unicodedata.html#unicodedata.category)以下[常规类别值](http://www.unicode.org/reports/tr44/tr44-6.html#General_Category_Values)之一：

*   `"Lo"`对于正常字符；
*   `"Mn"`用于零宽度非间距标记；

其余的很明显，只需过滤掉后者。

* * *

更多信息：

*   [泰文的 Unicode 数据](http://www.unicode.org/Public/8.0.0/ucd/Scripts.txt)（滚动到第一次出现“THAI CHARACTER”）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T22:25:48.577

我想您要问的是，如何确定 เรือ、ไป、ซื้อ 等中字符的“真实”#（分别为 3,2 和 2）

不幸的是，以下是 Python 解释这些字符的方式：

ไป

```
>>> 'ไป'
'\xe0\xb9\x84\xe0\xb8\x9b'
>>> len('ไป')
6
>>> len('ไป'.decode('utf-8'))
2 
```

ซื้อ

```
>>> 'ซื้อ'
'\xe0\xb8\x8b\xe0\xb8\xb7\xe0\xb9\x89\xe0\xb8\xad'
>>> len('ซื้อ')
12
>>> len('ซื้อ'.decode('utf-8'))
4 
```

เรือ</p>

```
>>> 'เรือ'
'\xe0\xb9\x80\xe0\xb8\xa3\xe0\xb8\xb7\xe0\xb8\xad'

>>> len('เรือ')
12
>>> len('เรือ'.decode('utf-8'))
4 
```

显示的字符数与构成字符串的实际（从 Python 的角度）字符数之间没有真正的相关性。

我想不出一个明显的方法来做到这一点。但是，我发现[这个库](http://packages.python.org/pytextseg/index.html)可能对你有帮助。（您还需要安装一些[先决条件](http://packages.python.org/pytextseg/install.html#prerequisites)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-12T22:38:09.393

看起来 rjust() 函数对您不起作用，您需要自己计算字符串中的单元格数。然后，您可以在字符串之前插入所需的空格数以实现对齐

你好像懂泰语。将辅音、前元音、后元音和泰语标点的数量相加。不要计算变音符号和元音上下。

类似的东西（原谅我的伪 Python 代码），

```
cells = 0

for i in range (0, len(string))
  if (string[i] == \xe31) or ((string[i] >= \xe34) and (string[i] <= \xe3a)) or ((string[i] >= \xe47) and (string[i] <= \xe4e))
     # do nothing
  else
     # consonant, preceding or following vowel or punctuation
     cells++ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-17T13:54:23.170

这是一个根据 bytebuster 的回答计算泰语字符串长度（水平排列的字符数）的函数

```
import unicodedata

def get_thai_string_length(string):
    length = 0
    for c in string:
        if unicodedata.category(c) != 'Mn':
            length += 1
    return length

print(len('บอินทัช'))
print(get_thai_string_length('บอินทัช')) 
```

# javascript - HTML图像有条件下载

> ID：13633754
> 
> 赞同：2
> 
> 时间：2012-11-29T20:02:28.403
> 
> 标签：javascript, jquery, html, image

我有这样的事情：

```
<div>
    <img src="bigimage_1.jpg" />
    <img src="bigimage_2.jpg" />
    <img src="bigimage_3.jpg" />
    ...
    <img src="bigimage_n.jpg" />
</div> 
```

仅当视口的宽度大于 300 像素时才应显示 div。

由于图像非常大，我不希望在宽度低于 300 像素时下载它们。但是当宽度大于 300 像素时，我需要尽快开始下载它们。

此外，这应该适用于很多设备上的很多浏览器，所以我想让它尽可能健壮。

我正在考虑使用[https://github.com/sebarmeli/JAIL](https://github.com/sebarmeli/JAIL)并在 $(document).ready 上调用 jail 函数，但我不知道是否有更好的解决方案。
有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T20:37:11.783

我建议看看[Scott Jehl 的图片填充](https://github.com/scottjehl/picturefill)解决方案。在使用 noscript 标签提供后备图像来实现 no-js 解决方案方面，它采用了与 JAIL 有点相似的方法，但它避免了为占位符 .gif 发出的初始 http 请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T20:14:19.347

放置一个`$(document).ready`函数，使用条件语句测试视口（或可用于图像的渲染区域，考虑主体和其他元素的边距、填充等）宽度，如果通过，则调用 jail 函数。

您可以在应该加载图像的位置放置一个宽度贪心零高度（使用 css）的空元素，并通过 jquery 选择他来测试它可以获得多少宽度。如果其宽度大于 300，请致电 JAIL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T20:05:45.527

您可以尝试使用 CSS @media (min-width: 300px) { ... }

# android - android录制视频，初始化相机

> ID：13633758
> 
> 赞同：1
> 
> 时间：2012-11-29T20:02:48.247
> 
> 标签：android

```
public class FulfillVideoTaskActivity extends Activity implements SurfaceHolder.Callback, OnInfoListener, OnErrorListener{

private Button initBtn = null;
private Button startBtn = null;
private Button stopBtn = null;
private Button playBtn = null;
private Button stopPlayBtn = null;
// save Button should be implemented
private TextView recordingMsg = null;
private VideoView videoView = null;
private SurfaceHolder holder = null;
private Camera camera = null;
private static final String TAG ="RecordVideo";
private MediaRecorder recorder = null;
private String outputFileName;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_fulfill_video_task);

    // get references to UI elements
    initBtn = (Button) findViewById(R.id.initBtn);
    startBtn = (Button) findViewById(R.id.startBtn);
    stopBtn = (Button) findViewById(R.id.stopBtn);
    playBtn = (Button) findViewById(R.id.playBtn);
    stopPlayBtn = (Button) findViewById(R.id.stopPlayBtn);
    recordingMsg = (TextView) findViewById(R.id.recording);
    videoView = (VideoView)this.findViewById(R.id.videoView);

}

public void buttonTapped(View view) {
    switch(view.getId()) {
    case R.id.initBtn:
        initRecorder();
        break;
    case R.id.startBtn:
        beginRecording();
        break;
    case R.id.stopBtn:
        stopRecording();
        break;
    case R.id.playBtn:
        playRecording();
        break;
    case R.id.stopPlayBtn:
        stopPlayback();
        break;
    }
}
private void stopPlayback() {
    videoView.stopPlayback();

}

private void playRecording() {
    MediaController mc = new MediaController(this);
    videoView.setMediaController(mc);
    videoView.setVideoPath(outputFileName);
    videoView.start();
    stopPlayBtn.setEnabled(true);

}

private void stopRecording() {
    if(recorder != null) {
        recorder.setOnErrorListener(null);
        recorder.setOnInfoListener(null);
        try {
            recorder.stop();

        }
        catch(IllegalStateException e) {
            //this can happen if the recorder has already stopped.
            Log.e(TAG, "Got IllegalStateException in stopRecording");

        }
        releaseRecorder();
        recordingMsg.setText("");
        releaseCamera();
        startBtn.setEnabled(false);
        stopBtn.setEnabled(false);
        playBtn.setEnabled(true);

    }

}

private void releaseCamera() {
    if(camera != null) {
        try {
            camera.reconnect();

        } catch (IOException e) {
            e.printStackTrace();
        }
        camera.release();
        camera = null;

    }

}

private void releaseRecorder() {
    if(recorder != null) {
        recorder.release();
        recorder = null;
    }

}

private void beginRecording() {
    recorder.setOnInfoListener(this);
    recorder.setOnErrorListener(this);
    recorder.start();
    recordingMsg.setText("RECORDING");
    startBtn.setEnabled(false);
    stopBtn.setEnabled(true);

}

// Initialize the recorder
private void initRecorder() {
    if(recorder != null) return;

    // The place where the video will be saved.
    outputFileName = Environment.getExternalStorageDirectory() + "/videooutput.mp4";

    File outFile = new File(outputFileName);
    //if File already exists, we delete it 
    if(outFile.exists())
        outFile.delete();

    try{
        camera.stopPreview();
        camera.unlock();
        recorder = new MediaRecorder();
        recorder.setCamera(camera);

        recorder.setAudioSource(MediaRecorder.AudioSource.CAMCORDER);
        recorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);
        recorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
        recorder.setVideoSize(280, 200);
        recorder.setVideoFrameRate(15);
        recorder.setVideoEncoder(MediaRecorder.VideoEncoder.MPEG_4_SP);
        recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
        recorder.setMaxDuration(10000); // limit to 10 seconds
        recorder.setPreviewDisplay(holder.getSurface());
        recorder.setOutputFile(outputFileName); // setting our output file to our FileName

        recorder.prepare();
        Log.v(TAG, "MediaRecorder initialized");
        initBtn.setEnabled(false);
        startBtn.setEnabled(true);

    }
    //error checking 
    catch(Exception e) {
        Log.v(TAG, "MediaRecorder failed to initialize");
        e.printStackTrace();

    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_fulfill_video_task, menu);
    return true;
}

public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {
    // TODO Auto-generated method stub

}

public void surfaceCreated(SurfaceHolder holder) {
    Log.v(TAG, "in sufaceCreated");

    try {
        camera.setPreviewDisplay(holder);
        camera.startPreview();

    }catch (IOException e) {
        Log.v(TAG, "Could not start the preview");
        e.printStackTrace();

    }
    initBtn.setEnabled(true);

}

public void surfaceDestroyed(SurfaceHolder holder) {
    // TODO Auto-generated method stub

}

public void onError(MediaRecorder mr, int what, int extra) {
    Log.e(TAG, "got a recording error");
    stopRecording();
    Toast.makeText(this, "Recording error has occurred. Stopping the recording", Toast.LENGTH_SHORT).show();

}

public void onInfo(MediaRecorder mr, int what, int extra) {
    Log.i(TAG, "got a recording event");
    if(what == MediaRecorder.MEDIA_RECORDER_INFO_MAX_DURATION_REACHED) {
        Log.i(TAG, "...max duration reached");
        stopRecording();
        Toast.makeText(this, "Recording limit has been reached. Stopping the recording", Toast.LENGTH_SHORT).show();

    }

}

// disable the buttons until the camera is initialized
protected void onResume() {
    Log.v(TAG, "in onResume");
    super.onResume();
    initBtn.setEnabled(false);
    startBtn.setEnabled(false);
    stopBtn.setEnabled(false);
    playBtn.setEnabled(false);
    stopPlayBtn.setEnabled(false);
    if(!initCamera())
        finish();

}

// initializes the camera 

private boolean initCamera() {
    try {
        camera = Camera.open();
        Camera.Parameters camParams = camera.getParameters();
        camera.lock();
        holder = videoView.getHolder();
        holder.addCallback(this);
        holder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

    }
    catch(RuntimeException re) {
        Log.v(TAG, "Could not initialize the Camera");
        re.printStackTrace();
        return false;
    }
    return true;
} 
```

}

嗨，我现在正在尝试在 android 上录制视频，当我运行我的代码（上面的整个代码）时，相机无法初始化。我想我在以下部分有错误。

```
private boolean initCamera() {
    try {
        camera = Camera.open();
        Camera.Parameters camParams = camera.getParameters();
        camera.lock();
        holder = videoView.getHolder();
        holder.addCallback(this);
        holder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

    }
    catch(RuntimeException re) {
        Log.v(TAG, "Could not initialize the Camera");
        re.printStackTrace();
        return false;
    }
    return true;
} 
```

`holder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);`此代码中的这一行有多个标记，说

*   SurfaceHolder 类型的方法`setType(int)`已弃用
*   该字段`SURFACE_TYPE_PUSH_BUFFERS`已弃用

有谁知道我得到这个的原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T20:20:55.737

试试这个代码

第一的

```
 setRecorder() ;
   SurfaceView  videoShootSurfaceView = (SurfaceView) findViewById(R.id.shootVideosurfaceView_VSD);

    SurfaceHolder videoSurfaceHolder = videoShootSurfaceView.getHolder();
    videoSurfaceHolder.addCallback(this);
    videoSurfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS); 
```

设置录音机类型

```
 public void setRecorder() {
    recorder = new MediaRecorder();
    recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
    recorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);
    recorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
    recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
    recorder.setVideoEncoder(MediaRecorder.VideoEncoder.MPEG_4_SP);
    // recorder.setVideoSize(640, 480);
    recorder.setVideoSize(320, 240);
    // recorder.setVideoSize(480, 320);
    // recorder.setVideoSize(176, 144);
    recorder.setVideoFrameRate(15);
    // recorder.setMaxDuration(3600000);
    recorder.setMaxDuration(300000);
    recorder.setOutputFile("/sdcard/videocapture_example.mp4");
} 
```

覆盖此方法。

```
 @Override
public void surfaceCreated(SurfaceHolder holder) {
    camera = Camera.open();
    recorder.setPreviewDisplay(holder.getSurface());
    if (recorder != null) {
        try {
            recorder.prepare();
        } catch (IllegalStateException e) {
            Log.e("IllegalStateException", e.toString());
        } catch (IOException e) {
            Log.e("IOException", e.toString());
        }
    }
} 
```

开始录制

```
 public void startRecording() {
    setRecorder();
    recorder.setPreviewDisplay(recoderTempHolder.getSurface());
    if (recorder != null) {
        try {
            recorder.prepare();
            recorder.start();
        } catch (IllegalStateException e) {
            Log.e("IllegalStateException", e.toString());
        } catch (IOException e) {
            Log.e("IOException", e.toString());
        }
    }

} 
```

停止录制

```
 public void stopRecording() {

    recorder.stop();
    // recorder.reset();
    recorder.release();

} 
```

# jquery - 用作弹出窗口时，Ipad div 内容不滚动

> ID：13633769
> 
> 赞同：6
> 
> 时间：2012-11-29T20:03:27.730
> 
> 标签：jquery, ipad

我无法解决这个问题：我有一个 div，我用 jquery 将其显示和隐藏为弹出窗口。内容是facebook的评论插件。这是代码：

```
<div id="popup">
    <div class="mask">
        <div class="fb-comments" data-href="http://www.example.com" data-num-posts="30" data-width="470" data-colorscheme="light"></div>
    </div>
</div> 
```

这是我到目前为止的CSS：

```
#popup {
position:absolute;
left:0px;
top:0px;
width:512px;
height:530px;
background:url(../img/bg_popup.gif) repeat-x 0px 0px;
display:none;
overflow:hidden;
z-index:110;
}

#popup .mask {
margin:5px 0px 0px 10px;
width:498px;
height:475px;
overflow-y: scroll;
overflow-x: hidden;
} 
```

我使用 jquery 将弹出窗口定位在屏幕中央，并且在所有浏览器上一切正常。弹出窗口出现，我可以滚动内容。

问题出在 Ipad Safari 上。div 不滚动，并且已经尝试使用 webkit-overflow-scrolling: touch，但没有任何反应。

还有一件事：如果我从弹出 div 显示设置为“块”开始，滚动工作，但内容显示为碎片。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T00:35:19.413

将 .mask css 更改为自动高度，并使用可在 y 轴上拖动的 jQueryUI 使其可拖动。#popup div 是溢出隐藏的，在这种情况下是“真正的”掩码。因此，您可以向上/向下移动当前的 .mask div，但不能向左/向右移动。如果用户在#popup div 之外滚动，您只需要一些数学来进行校正。那你需要监听停止事件。这仅适用于触摸屏。在桌面客户端上，您必须先通过单击来拖动 div（但您可以使用一些代码来处理此问题）。

为了更好地支持 jQueryUI 添加[jQuery UI Touch Punch](http://touchpunch.furf.com/)

例子：

```
$('#popup .mask').draggable(
    axis:"y",
    stop:function(event, ui){
      // If there's any correction required you can do here
      // e.g. the overscroll like on iOS
    }
); 
```

# wikipedia - 自定义 Wikipedia 搜索以仅检索摘要（JavaScript？）

> ID：13633770
> 
> 赞同：1
> 
> 时间：2012-11-29T20:03:34.090
> 
> 标签：wikipedia, wikipedia-api

我想在我的网站上实现两件事，我知道这可能是单独的，但结合起来。首先，一个自定义搜索框可在站点内检索结果而无需访问维基百科。其次，仅检索文章的摘要，以便我获得合理数量的数据以适应较短的空间。我是说。我想要一个搜索框，它不会在我网站的一个小元素中返回整篇文章，而只是摘要或摘要。

这两件事的演示可以在这篇文章中找到： [http ://www.golygon.com/2011/01/addingcustomizing-wikipedia-search-in-your-website/](http://www.golygon.com/2011/01/addingcustomizing-wikipedia-search-in-your-website/)

当然，我想随心所欲地设计一切......

我还没有找到一个结合这两个任务的例子。而且由于我根本不了解维基百科 API 的工作原理，我希望您能帮助我。

我只有一个非常基本的使用 javascript 的技能......所以如果有一种方法可以只使用 javascript，那就太好了。

我感谢任何帮助。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-10T20:53:28.193

您要使用的 API 调用是`query&prop=extracts`. 然后您可以选择格式、长度等。`titles`是他们寻找的东西。示例（限制为三个句子和一个搜索结果）： [https ://en.wikipedia.org/w/api.php?action=query&prop=extracts&format=json&exsentences=3&exlimit=1&titles=Stack%20Exchange](https://en.wikipedia.org/w/api.php?action=query&prop=extracts&format=json&exsentences=3&exlimit=1&titles=Stack%20Exchange)

# mysql - 在 MySQL 中部分更新 blob 或二进制类型

> ID：13633773
> 
> 赞同：0
> 
> 时间：2012-11-29T20:03:47.190
> 
> 标签：mysql, sql, binary, blob, bit-manipulation

我目前正在参与一个项目，该项目需要在 MySQL 的表的列中存储大量位。最初，该列的类型是 MySQL BIT，例如，我可以执行以下操作：

```
UPDATE table SET column = column | b'0001' 
```

为了在特定位置的列中设置位 1。

但是，由于大小（最大 64 位）的限制，以及项目的适当要求，我试图找到另一种列类型，如 BLOB 或 BINARY，它允许我们实现类似于我在示例中公开的内容.

那么，问题来了：如何在 MySQL 中的某列的值中设置某个位？

提前致谢，

# c# - 如何将字节数组从 C# COM DLL 返回到 VB6/VBA 客户端

> ID：13633777
> 
> 赞同：3
> 
> 时间：2012-11-29T20:04:01.470
> 
> 标签：c#, vba, com, vb6, com-interop

我有一个 C# 库，我通过 COM 向 VBA/VB6 公开。在大多数情况下，我可以很好地调用函数并传递参数，但是当调用具有**字节数组**作为输出参数的函数时，我收到错误“运行时错误 -2146233079，对象的方法 'yyy' xxx'失败了”。最初，我遇到了崩溃，然后我意识到我没有在 VB 中分配我的字节数组。一旦我这样做了，该功能就会起作用，但前提是我没有设置输出值。

如果我删除我的 out 参数（或将其切换为 ref，但不要在 C# 中设置它），该函数调用并正常工作。我有几个具有这种签名的函数（几个整数，一个字节数组输入，一个**或多个**字节数组输出），所以我试图不使用某种 setter/getter 解决方法。

此功能有效-

```
public int NoOuts(int x, int y, ref byte[] msgId){} 
```

如果我尝试设置/更改 sn out/ref 值（我尝试过 In、Out、ref、MarshalAs 等的多种组合），这些变化会出错 -

```
public int OneOut(int x, int y, ref byte[] msgId, [Out] out byte[] sn){}
public int OneOut(int x, int y, ref byte[] msgId, ref byte[] sn){}
public int OneOut(int x, int y, ref byte[] msgId, [Out] ref byte[] sn){}
public int OneOut(int x, int y, ref byte[] msgId, [[Out, MarshalAs(UnmanagedType.SafeArray, SafeArraySubType = VarEnum.VT_UI1)] out byte[] sn){}
'// Even tried it with an object
public int OneOut(int x, int y, ref byte[] msgId, [Out] out object nonce){} 
```

这是我的 VB6 测试代码（我也需要它在 VBA 中工作）-

```
 Dim i as Long
    Dim msg(7) as Byte
Dim sn(7) as Byte

For i = 0 To UBound(mesa)
    msg(i) = i * 2
Next

i = api.OneOut(5, 4, 3, 2, msg(), sn()) 
```

我能够验证 msg 的值在我的 C# 函数中是否可用。我还可以来回传递和更改字符串。

我按照相同的思路发布了一个先前的问题，但主要是关于将值传递到 C#，而不是返回它们。 [如何将字节数组作为 UDT 属性从 VB6/VBA 传递到 C# COM DLL？](https://stackoverflow.com/questions/13185159/)

这两个帖子是关于类似的东西，但我无法让任何一种方法起作用-

[接受字节数组，vb6 到 C# 互操作](https://stackoverflow.com/questions/8356418/)

[通过 COM 互操作将字节数组从 C# 返回到 VBScript](https://stackoverflow.com/questions/978861/)

# sql - SQL Server 先分组然后取消分组？

> ID：13633779
> 
> 赞同：1
> 
> 时间：2012-11-29T20:04:10.743
> 
> 标签：sql, sql-server, group-by

我有一个需要分组的数据列表，但我们只想对计数大于 3 的数据进行分组。

```
AA
AA
BB
CCC
CCC
CCC 
```

返回

```
AA  1
AA  1
BB  1
CCC 3 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T20:25:36.250

```
select data, case when total < 3 then 1 else total end total
from
    (
        select data, Count(Data) Total
        from tbl
        group by data
    ) g
join (select 1 union all select 2) a(b)
  on a.b <= case when total < 3 then Total else 1 end
order by data 
```

大多数情况下，这应该比 LittleBobbyTables 的答案执行得更快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T20:15:54.693

在我的脑海中，您可以使用获取计数大于 2 的所有内容的计数，然后用于`UNION ALL`获取不在第一个查询中的任何记录：

```
SELECT 'AA' AS Data
INTO #Temp
UNION ALL SELECT 'AA'
UNION ALL SELECT 'BB'
UNION ALL SELECT 'CCC'
UNION ALL SELECT 'CCC'
UNION ALL SELECT 'CCC'

SELECT Data, COUNT(Data) AS MyCount
FROM #Temp
GROUP BY Data
HAVING COUNT(Data) > 2

UNION ALL

SELECT Data, 1
FROM #Temp
WHERE Data NOT IN (
    SELECT Data
    FROM #Temp
    GROUP BY Data
    HAVING COUNT(Data) > 2
)
ORDER BY Data

DROP TABLE #Temp 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T21:36:36.893

为此使用窗口函数：

```
select col, count(*) as cnt
from (select col, count(*) over (partition by col) as colcnt,
             row_number() over (order by (select NULL)) as seqnum
      from t
     ) t
 group by col, (case when colcnt < 3 then seqnum else NULL end) 
```

这将计算列的总计数和每行的唯一标识符。然后 group by 子句测试条件。如果小于 3，则它使用标识符来获取每一行。如果更大，则在这种情况下使用常量值 (NULL)。

# backbone.js - Backbone.Marionette - CompositeView 中的集合，它本身嵌套在 CollectionView 中

> ID：13633780
> 
> 赞同：3
> 
> 时间：2012-11-29T20:04:13.777
> 
> 标签：backbone.js, marionette

**更新：问题可能涉及游览模板，因为我发现它认为“名称”属性未定义。这使我认为它不是传递给 ToursView 的数组，而是由于某种原因是一个字符串。**

在研究了 StackOverflow 上的类似问题后：

[如何使用 Backbone.Marionette 处理嵌套的 CompositeView？](https://stackoverflow.com/questions/13575101/how-to-handle-nested-compositeview-using-backbone-marionette)

[如何根据模型 javascript 数组属性正确显示 Backbone Marionette 集合视图？](https://stackoverflow.com/questions/11838390/how-do-you-properly-display-a-backbone-marionette-collection-view-based-on-a-mod)

[使用 Backbone.Marionette 嵌套集合](https://stackoverflow.com/questions/12163118/nested-collections-with-backbone-marionette)

... 以及 Derick Bailey 关于这个主题的优秀博客：

[http://lostechies.com/derickbailey/2012/04/05/composite-views-tree-structures-tables-and-more/](http://lostechies.com/derickbailey/2012/04/05/composite-views-tree-structures-tables-and-more/)

...包括 JSFiddle 的：

[http://jsfiddle.net/derickbailey/AdWjU/](http://jsfiddle.net/derickbailey/AdWjU/)

我**仍然**无法显示 CompositeViews 的嵌套 CollectionView 的最后一个节点。这是导致问题的每个 CompositeView 中的最终 CollectionView。

```
CollectionView {
    CompositeView{
        CollectionView {} //**<-- This is the troublemaker!**
        }
    } 
```

**注意：考虑到传递给最终的子 CollectionView 的集合只是一个简单的数组，我已经提出了创建一个有效的 Backbone.Collection 的要点。**

从 api 返回到 ToursList 的数据：

```
[
{   "id": "1", 
    "name": "Venice", 
    "theTours": "[
        {'name': u'test venice'}, 
        {'name': u'test venice 2'}
    ]"
}, 

{   "id": "2", 
    "name": "Rome",
    "theTours": "[
        {'name': u'Test rome'}
    ]"
}, 
{   "id": "3", 
    "name": "Dublin", 
    "theTours": "[
        {'name': u'test dublin'}, 
        {'name': u'test dublin 2'}
    ]"
}
] 
```

我试图将这些嵌套在下拉列表中，其中导航标题是“名称”（即都柏林），随后的 li 是各个旅游名称（即“测试都柏林”、“测试都柏林 2”等）

**旅游模型和收藏品**

```
Tour = TastypieModel.extend({});

ToursGroup = TastypieCollection.extend({
  model: Tour
});

ToursByLoc = TastypieModel.extend({});

ToursList = TastypieCollection.extend({
  model: ToursByLoc,
  url:'/api/v1/location/',
}); 
```

**旅游景观**

```
TourView = Backbone.Marionette.ItemView.extend({
  model: Tour,
  template: '#tour-template',
  tagName: 'li',    
});

ToursByLocView = Backbone.Marionette.CompositeView.extend({
  collection: ToursByLoc,

  template: '#toursByLoc-template',
  itemView: TourView,
  itemViewContainer: '#ind',

  initialize: function(){
    //As per Derick Bailey's comments regarding the need to pass on a
    //valid Backbone.Collection to the child CollectionView
    //REFERENCE: https://stackoverflow.com/questions/12163118/nested-collections-with-backbone-marionette

    var theTours = this.model.get('theTours');
    this.collection = new ToursGroup(theTours);
    console.log(this.model.get('name'));
    console.log(theTours);
    //To test the output --> I get:

    //Venice
    //[{'subtitle': u'ex. These prices include... but not...', 'description': u'Please enter the tour description here', 'start_time': datetime.time(2, 34, 24), 'adult_price': Decimal('123'), 'important': u'ex. Please contact us to negotiate a price if you want to book the Fiat for 1 person only.', 'teenager_student_price': Decimal('123'), 'child_price': Decimal('123'), 'under_6_price': Decimal('123'), 'location_id': 1, 'id': 1, 'name': u'test venice'}, {'subtitle': u'ex. These prices include... but not...', 'description': u'Please enter the tour description here', 'start_time': datetime.time(20, 4, 57), 'adult_price': Decimal('222'), 'important': u'ex. Please contact us to negotiate a price if you want to book the Fiat for 1 person only.', 'teenager_student_price': Decimal('222'), 'child_price': Decimal('222'), 'under_6_price': Decimal('222'), 'location_id': 1, 'id': 2, 'name': u'test 2'}] main.js:64

    //Rome
    //[{'subtitle': u'ex. These prices include... but not...', 'description': u'Please enter the tour description here', 'start_time': datetime.time(1, 28, 25), 'adult_price': Decimal('123'), 'important': u'ex. Please contact us to negotiate a price if you want to book the Fiat for 1 person only.', 'teenager_student_price': Decimal('333'), 'child_price': Decimal('333'), 'under_6_price': Decimal('333'), 'location_id': 2, 'id': 3, 'name': u'test rom1'}] main.js:64

    //Dublin
    //[] 

    this.collection = new ToursGroup(theTours);
  }
});

ToursListView = Backbone.Marionette.CollectionView.extend({
  itemView: ToursByLocView,
}); 
```

**模板**

```
 <script id="tour-template" type="text/template">
    <%= name %> //<-- THIS IS GIVING ME ISSUES
  </script>

  <script id="toursByLoc-template" type="text/template">
    <li class="nav-header"><%= name %></li>
    <div id="ind" class="indTours"></div>
    <li class="divider"></li>
  </script>

  <script id="tours-template" type="text/template">
    <%= name %>
  </script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T04:28:16.290

我不认为这是问题，但这应该改变：

`itemViewContainer: '#ind'`

在您的 CompositeView 定义中。这是坏的/无效的/可能会产生无法解释的结果。DOM 应该只包含一个带有任何给定的 HTML 元素的实例`id`。在这种情况下，`<div id="ind"></div>`每个 CompositeView 实例都有一个。

您应该将其更改为 css 类，并使用类选择器`itemViewContainer`代替。

...

我用你的代码构建了一个 JSFiddle，它似乎可以工作：http: [//jsfiddle.net/derickbailey/QPg4D](http://jsfiddle.net/derickbailey/QPg4D)

您在应用中看到了什么结果？你希望看到什么？

...

查看您的数据返回的方式：

```
 "theTours": "[
        {'name': u'test venice'}, 
        {'name': u'test venice 2'}
    ]" 
```

这在技术上是有效的 JSON，但它会返回一个看起来像数组的字符串，而不是实际的数组。

在我的 JSFiddle 中，我不得不纠正这个：

```
 "theTours": [
        {'name': 'test venice'}, 
        {'name': 'test venice 2'}
    ] 
```

请注意，我删除了 [] 周围的“和”，并且还删除了字符串值前面的“u”。

可能是您的服务器不正确地将数据序列化为 JSON 文档，并将此格式错误的文档发回。

# c++ - 如何在 C++ 中将浮点指针转换为 int 指针？

> ID：13633783
> 
> 赞同：0
> 
> 时间：2012-11-29T20:04:22.590
> 
> 标签：c++

我知道 reinterpret_cast 可能会这样做，但我认为它没有进行数据转换。我不想循环并一个一个地做它们，想知道是否有一种优雅的方法可以同时进行指针类型和数据类型的转换。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T20:16:25.743

如果，正如我假设的那样，你有一些`float*`指向 s 数组中的第一个元素`float`并且你想将它们用作`int`s 那么我建议几个选项：

1.  如果你不想要`float`，不要得到`float`s。只需首先存储一个 s 数组`int`。

2.  同样，如果您不想要`int`s，则将代码更改为`float`始终使用 s。

3.  如果您确实想要一个`float`s 数组并且在某个时候想要将它们转换为`int`s，请在需要时进行。用于`static_cast<int>`以安全的方式对每个元素进行转换。

4.  如果您想一次转换整个数组，那么我建议您执行以下操作：

    ```
    float float_array[N] = /* ... */;
    std::vector<int> ints(float_array, float_array + N); 
    ```

5.  或者，如果您真的想坚持使用数组，请使用`std::copy`：

    ```
    float float_array[N] = /* ... */;
    int int_array[N];
    std::copy(float_array, float_array + N, int_array); 
    ```

    然而`std::vector`，以上是更优选的。

# google-analytics - 使用 GA 目标跟踪的 Wordpress 注册

> ID：13633786
> 
> 赞同：0
> 
> 时间：2012-11-29T20:04:28.083
> 
> 标签：google-analytics, google-analytics-api, goal-tracking

我正在尝试使用 GA 跟踪来跟踪我网站上的 Wordpress 注册。我假设我需要为此使用目标跟踪而不是事件跟踪。我尝试设置目标跟踪，但它不起作用。我没有使用任何 GA 插件，例如 Yoast 等。

我不能让它与 Wordpress 一起工作：

1.  我将我的目标 URL 设置为：（`/wp-login.php?checkemail=registered`用于注册的 URL 登录页面）

2.  匹配类型：“完全匹配”

3.  没有设置目标漏斗。

GA 没有跟踪我的任何注册。我在这里做错了什么？如果您想测试，我的网站是[www.StreetofWalls.com 。](http://www.streetofwalls.com)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:34:48.013

加载 google-analytics 的脚本不在登录页面上，因此您不会将任何综合`/wp-login.php?checkemail=registered`浏览量发送回 google。

把它放在你的 wp-login.php 页面上

```
<script type='text/javascript' src='http://www.streetofwalls.com/wp-content/themes/sow3/js/google-analytics.js'></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-17T16:37:46.923

虽然 TomFuertes 的回答会奏效，但修改核心 WordPress 文件（如`wp-login.php`. 对 WordPress 的更新将覆盖您所做的任何更改，避免 WordPress 更新是一个非常糟糕的主意。

我建议使用文件中的`login_head`钩子添加代码`functions.php`：

```
function add_ga_to_login_page(){
  echo '<script>';
  echo 'GA TRACKING CODE HERE';
  echo '</script>';
}

add_action('login_head', 'add_ga_to_login_page'); 
```

# jquery - 带有双击事件的 Jquery .on

> ID：13633789
> 
> 赞同：69
> 
> 时间：2012-11-29T20:04:31.983
> 
> 标签：jquery

为什么会这样：

```
$(document).on("dblclick", "#areaA tr:has(td)", function(e) {
     //code here
 }); 
```

而这并不

```
$("#areaA tr:has(td)").on('dblclick', function(e) {
    //Code here
}); 
```

我完全按照 jquery 文档页面上的示例进行操作，但是我的双击没有触发。当我以第一种方式执行此操作时，它可以工作，但似乎会触发两次事件。

这是在 Kendo UI 网格的上下文中。

这两段代码之间真的有区别吗？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-11-29T20:06:08.203

主要区别在于每次单击时都会检查第一个条件。`areaA`所以如果动态添加 id或者`tr`or里面的元素`td`，只有第一个可以工作。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-07-31T13:39:32.363

您描述的第一种方法有效，因为您选择的是静态父项，然后是动态子项，它遵循将事件绑定到使用 .on 方法动态创建的元素的规则。

这是该`.on`方法的语法，听起来您已经对其进行了一些研究。

```
$(selector).on(event,childSelector,data,function,map) 
```

因此，如果我想用 绑定到动态元素`.on`，我必须先用美元符号选择一个静态父元素，然后在`.on`方法内部选择动态子元素。在您的情况下，正确的用例将像这样工作：

```
$("body").on('dblclick', '#areaA tr:has(td)', function(e) {
    //Code here
}); 
```

既然您提到它不起作用，我假设`#areaA`它不是静态元素。您可以将 body 替换为更相关的静态元素，或者只是保留它的 body，这并不重要。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-04-20T15:29:13.017

> 这两段代码之间真的有区别吗？

是的。第一段代码是委托事件处理的一种形式，其中处理程序由由后代元素触发的冒泡文档的事件触发。第二个是将事件处理程序绑定到 jQuery 为指定选择器返回的实际元素（在本例中 `#areaA tr:has(td)`）。

以下是 jQuery 文档中的相关信息：

第一段代码：

> **委托事件**的优点是它们可以处理来自以后添加到文档的*后代元素的事件。*通过选择在附加委托事件处理程序时保证存在的元素，您可以使用委托事件来避免频繁附加和删除事件处理程序的需要。

第二段代码：

> **事件处理程序仅绑定到当前选定的元素；它们必须在您的代码调用 .on() 时存在**

# asp.net-mvc - ASP.net MVC 路由配置

> ID：13633791
> 
> 赞同：3
> 
> 时间：2012-11-29T20:04:38.270
> 
> 标签：asp.net-mvc

我是 MVC 的新手，所以在弄清楚如何为以下场景设置路由时遇到了一些问题。

假设我有一个网站可以查找航班数据并显示每个航班的三个主要视图。

我希望 URL 结构如下：

```
www.domain.com/<flightnumber>/   <-- Main page for the flight
www.domain.com/<flightnumber>/crew  <-- A page with details of the crew for that flight
www.domain.com/<flightnumber>/destination  <-- details of the destination for the flight 
```

因此，基本上查找键是域之后的第一项。URL 的任何后续部分都映射到该航班的特定视图。

看起来很简单，但我似乎无法弄清楚如何构造控制器和路由......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T22:44:57.557

尝试这个

```
 routes.MapRoute(
         "YourRouteName", // Route name
         "{flightNumber}/{action}", // URL with parameters
         new { controller = "YourController", action = "YourDefaultAction", flightNumber = 0    } // Parameter defaults
        ); 
```

您应该将其放在 RouteConfig.cs (MVC4) 或 Global.asax (MVC3) 的 RegisterRoutes 方法的顶部

[您可以在 asp.net 站点http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/asp-net-mvc-routing-overview-cs](http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/asp-net-mvc-routing-overview-cs)上阅读更多关于路由的信息

# twain - 如何获取和运行 TWAIN DSM 文件？

> ID：13633792
> 
> 赞同：1
> 
> 时间：2012-11-29T20:04:41.753
> 
> 标签：twain, image-scanner, merge-module

当我运行 Twain 实现的框架时，我收到此错误：`NO TWAIN DATASOURE IS NOT INSTALLED`. 我正在使用 Window7 64 位。我从 Sourceforge [TWAIN DSM FILES](http://sourceforge.net/projects/twain-dsm/files/TWAIN%20DSM%202%20Win/)下载了一些驱动程序。

下载目录包含：

*   TWAINDSM.dll
*   TWAINDSM64.msm

`TWAINDSM.dll`我将文件复制到`C:\Windows\SysWOW64`. 我的疑问是如何获取 twain 相关`.ds`文件。我不知道 dotnet 相关的东西。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T05:44:28.623

[您可以在此处](http://sourceforge.net/projects/twain-samples/files/TWAIN%202%20Sample%20Data%20Source/)下载 TWAIN 示例数据源。

DSM 和 DS 是不同的。DSM 寻找数据源。

# javascript - 用 knockoutjs 组织单页网站 html 代码

> ID：13633793
> 
> 赞同：3
> 
> 时间：2012-11-29T20:04:46.483
> 
> 标签：javascript, knockout.js, angularjs

我一直在为我的前端开发寻找一个 MVC 框架。淘汰赛似乎提供了我正在寻找的一切。但是现在页面变得越来越大，模块或菜单越来越多，这个包含所有 HTML 内容的单个文件并不是一个真正的好方法。

通过查看 angularjs 主页（更具体地说是 Wire up a Backend 示例），这似乎解决了问题，这要归功于 $routeProvider。

现在知道我现在已经完成了一些使用淘汰赛的代码，我更愿意将此解决方案集成到我现有的网站中，而不是用 angularjs 重写它，而且我已经读过，由于自定义绑定与淘汰赛，更容易实现 3rd 方 UI 小部件.

有没有办法通过淘汰赛做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T21:41:07.250

我会采取不同的路线。

您可以将您的模块分成单独的文件，并使用 RequireJS 加载它们。[该文档](http://knockoutjs.com/documentation/amd-loading.html)对此进行了解释。

您可以开始将模板分离为外部文件，并使用[Knockout-External-Templates](https://github.com/ifandelse/Knockout.js-External-Template-Engine)加载它们。

这应该为您提供足够的分离和模块化来创建 SPA，而无需迁移到不同的结构/框架，如 Angular。

# c++ - 如何使用 Qt (C++) 检查程序是否按其名称运行

> ID：13633797
> 
> 赞同：10
> 
> 时间：2012-11-29T20:05:17.677
> 
> 标签：c++, qt, process, qt-creator, qprocess

如何使用 Qt (C++) 通过名称检查程序是否正在运行。

会`QProcess::pid`做这份工作吗？我不知道如何使用它。请建议。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-29T21:32:57.910

据我所知，QProcess 不允许您这样做（除非您自己生成了该进程），实际上 Qt 中没有任何内容。但是 Win32 API 提供了一种通过函数实现您想要的方法`EnumProcesses`，Microsoft 网站上提供了如何使用它的完整示例：

[http://msdn.microsoft.com/en-us/library/ms682623.aspx](http://msdn.microsoft.com/en-us/library/ms682623.aspx)

要让您需要将 PrintProcessNameAndID 替换为以下函数：

```
bool matchProcessName( DWORD processID, std::string processName)
{
    TCHAR szProcessName[MAX_PATH] = TEXT("<unknown>");

    // Get a handle to the process.

    HANDLE hProcess = OpenProcess( PROCESS_QUERY_INFORMATION |
                                   PROCESS_VM_READ,
                                   FALSE, processID );

    // Get the process name.

    if (NULL != hProcess )
    {
        HMODULE hMod;
        DWORD cbNeeded;

        if ( EnumProcessModules( hProcess, &hMod, sizeof(hMod), 
             &cbNeeded) )
        {
            GetModuleBaseName( hProcess, hMod, szProcessName, 
                               sizeof(szProcessName)/sizeof(TCHAR) );
        }
    }

    // Compare process name with your string        
    bool matchFound = !_tcscmp(szProcessName, processName.c_str() );

    // Release the handle to the process.    
    CloseHandle( hProcess );

    return matchFound;
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-29T21:49:44.853

一种快速而肮脏的方法是只检查 的输出`tasklist`，例如：

```
bool isRunning(const QString &process) {
  QProcess tasklist;
  tasklist.start(
        "tasklist",
        QStringList() << "/NH" 
                      << "/FO" << "CSV" 
                      << "/FI" << QString("IMAGENAME eq %1").arg(process));
  tasklist.waitForFinished();
  QString output = tasklist.readAllStandardOutput();
  return output.startsWith(QString("\"%1").arg(process));
} 
```

使用`EnumProcesses`可能是一种更好的方法（即更“纯粹”；当然更高效），但这可能是“足够好”，只要它不是在大循环或其他东西中被调用。同样的想法也可以移植到其他平台，尽管命令工具和解析逻辑显然会有所不同。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2018-01-06T07:39:05.693

```
 //How to Run App
 bool ok = QProcess::startDetached("C:\\TTEC\\CozxyLogger\\CozxyLogger.exe");
 qDebug() <<  "Run = " << ok;

 //How to Kill App
 system("taskkill /im CozxyLogger.exe /f");
 qDebug() << "Close"; 
```

[在此处输入图像描述](https://i.stack.imgur.com/I2f5W.png)

# php - 在 PHP 中使用所需的表单字段将 HTML 转换为 PDF

> ID：13633801
> 
> 赞同：0
> 
> 时间：2012-11-29T20:05:41.483
> 
> 标签：php, symfony, wkhtmltopdf

我一直在 Symfony 中使用 KnpSnappyBundle 成功地将 wkhtmltopdf 与 PHP 一起使用，但似乎无法将生成的 PDF 中的表单字段设置为必填字段，这对我们的需求来说是一个交易破坏者。如果 wkhtmltopdf 识别出 html 必需属性但它没有识别出来，那就太好了。

我还没有找到任何支持根据需要设置表单字段的库。有什么建议么？任何帮助，将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-27T21:29:22.480

[wkhtmtopdf](https://code.google.com/p/wkhtmltopdf/) is not yet capable of setting pdf form fields as required fields when converting html to pdf. Due to that limitation, [KnpLabs Snappy](https://github.com/KnpLabs/snappy) and therefore [KnpSnappyBundle](https://github.com/KnpLabs/KnpSnappyBundle) cannot be used to set form fields as required because those libraries use wkhtmltopdf.

I still use KnpSnappy with wkhtmltopdf but am now using the [DocuSign Tabs API](http://www.docusign.com/developer-center/explore/features/stick-etabs) to create required fields and force users to fill out the forms through DocuSign as well.

# c# - 修复 C# 中的代码

> ID：13633802
> 
> 赞同：-12
> 
> 时间：2012-11-29T20:05:43.340
> 
> 标签：c#, variables, local-variables

我有以下 C# 代码：

```
double eps=0.1, low=1, y0=0, x, y, high, muchlat, answer, ribua;
Console.WriteLine("Enter x");
x = double.Parse(Console.ReadLine());
high = y = x;
muchlat = Math.Abs(y - y0) ;
if (x < 0)
{
    Console.WriteLine("X can't be less than zero, press any key to exit");

}
else if (muchlat > eps)
{

    while  (muchlat > eps)
    {
        Console.WriteLine(y);
        y0 = y;
        y = (high + low) /2;
        ribua = Math.Pow(y,2);
        if (ribua == x)
        {
            answer = x;
        }
        else if (ribua > x)
        {
            high =y;
        }
        else if (ribua < x)
        {
            low =y;
        }
        else if (muchlat < eps)
        {
            answer = y;
            break;
        }
    }
}
Console.WriteLine(answer);
Console.ReadLine(); 
```

当我尝试调试程序时，我收到此消息“使用未分配的局部变量'答案'（CS0165）”，我的问题是如何修复它，问题出在哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T20:07:11.710

答案永远不会被初始化。

```
double eps=0.1, low=1, y0=0, x=0, y=0, high=0, muchlat=0, answer=0, ribua=0; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T20:07:01.570

声明时只需定义答案为 0 的值。那应该解决它。

# android - Listview 项目上的箭头动画

> ID：13633804
> 
> 赞同：1
> 
> 时间：2012-11-29T20:05:55.767
> 
> 标签：android, android-layout, animation

我想将`animate`箭头指向某个点的方向`ListView`。类似于您在 GPS 中看到的内容（箭头随着车辆改变方向而移动）。

```
 @Override
public View getView(int position, View convertView, ViewGroup parent) {
    View row = convertView;

    if(row == null)
    {
        LayoutInflater inflater = ((Activity)context).getLayoutInflater();
        row = inflater.inflate(layoutResourceId, parent, false);

        holder = new DataHolder();
        holder.imgIcon = (ImageView)row.findViewById(R.id.imgIcon);
        holder.locationName = (TextView)row.findViewById(R.id.locationName);
        holder.locationElevation = (TextView)row.findViewById(R.id.locationElevation);
        heading = getHeading(); 

        row.setTag(holder);
    }
    else
    {
        holder = (MountainHolder)row.getTag();
    }

    Loc loc = data[position];
    holder.locationName.setText(loc.locationName);
    holder.locationElevation.setText(loc.locationElevation);
    holder.imgIcon.setImageResource(loc.icon);

    return row;
} 
```

最初我添加了一个动画，`holder.image`但它会为所有动画（不是单独）制作动画。PS，图片是箭头。我有标题值，我只需要知道如何根据该信息为这些箭头设置动画。有任何想法吗？

# c# - 从 C# 到 MySQL CakePhp 用户的身份验证

> ID：13633806
> 
> 赞同：1
> 
> 时间：2012-11-29T20:05:56.913
> 
> 标签：c#, cakephp

我目前正在将 CakePhp 应用程序迁移到 ASP.NET。在这一点上阻止我的一件事是我无法获得正确的哈希方法来获得正确的密码，因此用户能够从 ASP.NET 应用程序登录。

我有在 config/core.php 文件中设置的盐值。

我用谷歌搜索试图确定在哪里可以找到使用哪种散列算法，但无法找到正确的查询或没有结果。

到目前为止，这是我对密码进行哈希处理的 C# 方法。

```
public static string ToHash(this string password, string salt)
{
  if (string.IsNullOrEmpty(password))
    return "";

  var provider = new SHA1CryptoServiceProvider();
  var encoding = new UnicodeEncoding();
  var bytes = provider.ComputeHash(encoding.GetBytes(salt + password));
  return Encoding.UTF8.GetString(bytes);
} 
```

我尝试在密码之前或之后放置盐，目前根本不匹配，这是 cakephp mysql 数据库中的哈希密码：

c7fb60ef77dbe3d1681a68e6741ee3a23cc1f41d

这是我从我的方法中得到的

��3[v"����1�:�ѐ��</p>

不太确定在哪里/如何解决这个问题。任何帮助或提示将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-19T11:26:10.880

我有！

至少它适用于我的配置：

从（在文件中`Core.php`搜索）查找盐。`Security.salt`然后，使用此代码（与问题非常相似）：

```
string input = textBox1.Text;
input = "your salt should be here" + input;
var provider = new SHA1CryptoServiceProvider();
var encoding = new UTF8Encoding();
var bytes = provider.ComputeHash(encoding.GetBytes(input));
sha1result.Text = Bin2Hex(bytes); 
```

Bin2Hex 的助手也在这里：

```
public static string Bin2Hex(byte[] ba)
{
    string hex = BitConverter.ToString(ba);
    return hex.Replace("-", "");
} 
```

找到它并不容易，我搜索了一些互联网（没有结果！），最后求助于源挖掘。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T22:42:08.353

我现在没有 Cake 的源代码，但你应该可以很容易地在源代码中查找 Cake 的散列和加盐方法。

上面的数据差异看起来就像 Cake 将哈希字节转换为一个字符串，其中哈希字节以十六进制为基数。无论散列方法有什么不同，在比较它们之前，您都必须将 C# 散列的结果转换为这样的字符串（或者以其他方式解析 Cake 的十六进制字符串并从中构建一个字节数组）。

# javascript - 从 HTML 表单指定 iFrame src

> ID：13633809
> 
> 赞同：1
> 
> 时间：2012-11-29T20:06:00.683
> 
> 标签：javascript

新手到 iFrames，我很好奇如何从基本的 html 表单中指定 iFrame“src”？类似于 Optimizely 的工作方式 - 用户指定自己的 URL，URL 加载到下一页的 iFrame 中。

如果可能的话，希望完全使用 Javascript 来做到这一点。任何帮助或方向感将不胜感激！

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T20:09:54.667

可以通过设置`src`属性直接设置：

```
document.getElementById('IDOfYourIframe').src = userValue; 
```

可以来自`userValue`任何来源。例如，它可以来自文本框。

```
userValue = document.getElementById('TextBox1').value 
```

# jquery - iPad 上的 jQuery 动画（向左滑动）...如何提高性能？

> ID：13633811
> 
> 赞同：0
> 
> 时间：2012-11-29T20:06:08.387
> 
> 标签：jquery, ios, ipad, safari, jquery-animate

我在用：

```
$('selector').animate({marginLeft:'-500px'},600); 
```

... 将 div 向左滑动。根据我当前的 HTML/CSS，应用负边距是可行的，我希望避免重建我的 HTML/CSS 以另一种方式。我的代码在所有浏览器上都运行良好，但在全新的 iPad mini 上却非常不稳定。有没有更好的方法在 iOS 上实现特定于 Safari 的这种效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:12:55.367

尝试使用 css 过渡。 [http://www.w3schools.com/css3/css3_transitions.asp](http://www.w3schools.com/css3/css3_transitions.asp)

应该可以进行细微的更改:)

# c# - GridView 重叠效果

> ID：13633812
> 
> 赞同：4
> 
> 时间：2012-11-29T20:06:09.907
> 
> 标签：c#, gridview, microsoft-metro, windows-runtime, winrt-xaml

我有一个包含分组数据的 GridView。

一切都像 VS2012 中的 Grouped Items Page 模板一样，除了我设置的数据比他们在那里做的更多（大约 15 个组，总共大约 200 个项目）。

除了页面中间奇怪的重叠效果外，一切都很好。它并不总是在同一个地方。滚动时，此重叠区域可以移动到其他组。

![这是[屏幕截图][1]。](../Images/e75a15063306b407cb9830ff5b213ebf.png)

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T13:12:11.367

我试图在我刚刚在 VS2012 中使用 Grid App 项目模板创建的项目中重现相同的问题。我在那里复制了我的 DataSource 对象并且一切正常，直到我做了一件小事 - 为 GridView 的 GroupStyle 设置 HidesIfEmpty="True"。

令人难以置信，但这个小选项应该可以帮助我们隐藏空组，这会产生这种奇怪的重叠效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T00:17:45.470

我敢打赌，这是因为您嵌套了 ScrollViewers - 可能将多个 GridViews 放在 ScrollViewer 或“主 GridView”中。

# c# - 排列....或类似的

> ID：13633818
> 
> 赞同：2
> 
> 时间：2012-11-29T20:06:31.870
> 
> 标签：c#, loops, permutation, combinations, nested

我有这个char数组：`private char[] posibilities = { 'a', 'b', 'c' };`

我想要它们的所有可能组合，然后我做了三个嵌套：

```
for (int cont = 0; cont < posibilities.Length; cont++)
{
    for (int i = 0; i < posibilities.Length; i++)
    {
        for (int j = 0; j < posibilities.Length; j++)
        {
            listBox1.Items.Add(posibilities[cont].ToString() + posibilities[i].ToString() + posibilities[j].ToString());
        }
    }
} 
```

我的问题是：如果我想在我的数组中添加更多字符而不向我的嵌套 for 添加更多 fors，我该怎么做？想象一下，如果我在数组上有 20 个字符，我不能为 20 个字符做......或者这是唯一的方法？

（顺便说一句，我从 3 个月前就一直在尝试解决这个问题，但我仍然不能）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:19:39.900

试试这种递归方法：

```
void RecursiveApproach(char[] possibilities, string cur)
{
    if (cur.Length == c.Length)
    {
        listBox1.Items.Add(cur);
        return;
    }
    for (int i = 0; i < possibilities.Length; i++)
    {
        RecursiveApproach(possibilities, cur + possibilities[i]);
    }
}

// Usage
RecursiveApproach(possibilities, ""); 
```

如果无法使其全局可见，listBox1 可以作为第三个参数传递给此函数。

但是要小心大量的数字，这个列表会增长得非常快））

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T20:27:36.740

```
public static IEnumerable<IEnumerable<T>> PermutationsWithRepitition<T>(IList<T> source)
{
    return PermutationsWithRepitition(source, source.Count);
}

//private recursive method that does all of the work.
private static IEnumerable<IEnumerable<T>> PermutationsWithRepitition<T>(IList<T> source, int resultSize)
{
    if (resultSize == 1)
        return source.Select(item => new[] { item });
    else
    {
        return PermutationsWithRepitition(source, resultSize - 1)
            .SelectMany(permutation => source.Select(item => new[]{item}.Concat(permutation)));
    }
} 
```

示例用法：

```
char[] posibilities = new[] { 'a', 'b', 'c' };

foreach (var permutation in PermutationsWithRepitition(posibilities))
{
    Console.WriteLine(new string(permutation.ToArray()));
} 
```

# jasmine - 有没有办法在 Jasmine Headless webkit 上使用调试？

> ID：13633819
> 
> 赞同：2
> 
> 时间：2012-11-29T20:06:34.073
> 
> 标签：jasmine

有没有办法在 Jasmine Headless webkit 上使用调试？

也许像

```
describe "Some Test", ->
  it "should break on debugger", ->
    console.log("before debugger")
    debugger
    console.log("after debugger") 
```

并具有与 Ruby 上的调试器类似的效果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T21:10:06.197

[如此处](https://stackoverflow.com/a/12203381/1920122)所述，您可以使用 runner-out 标志生成一个不错的报告，其中包含任何失败的回溯。它不像调试器那样具有交互性，但它非常好。

`jasmine-headless-webkit --runner-out tmp/jhw-out.html`

**注意：**您也可以在项目或主目录的 .jasmine-headless-webkit 文件中设置此标志，如果您使用 Guard，则特别有用。

# c++ - 如果在没有 new 运算符的情况下初始化，C++ 是否将类对象视为值类型？

> ID：13633824
> 
> 赞同：4
> 
> 时间：2012-11-29T20:06:42.677
> 
> 标签：c++, value-type, reference-type

示例代码：

```
MyItemType a;
MyItemType b;
a.someNumber = 5;
b = a;

cout << a.someNumber << endl;
cout << b.someNumber << endl;

b.someNumber = 10;

cout << a.someNumber << endl;
cout << b.someNumber << endl; 
```

输出：

```
5
5
5
10 
```

如果 a 和 b 是引用类型，我猜最后两行应该是 10 和 10 而不是 5 和 10。

这是否意味着当您执行这样的声明时：

```
AClassType anInstance; 
```

它被视为值类型？

------这里是MyItemType.h------------

```
#ifndef MYITEMTYPE_H
#define MYITEMTYPE_H

class MyItemType{

public:
    int someNumber;
    MyItemType();
};

MyItemType::MyItemType(){
}

#endif  /* MYITEMTYPE_H */ 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-29T20:09:29.337

基本上，是的（如果您认为 C++ 等效于 Java 中的含义）。

`AClassType anInstance;`是一个对象，而不是一个引用。`MyItemType a`并且 `MyItemType b`是不同的对象，它们驻留在不同的内存空间中，因此显然对一个对象进行更改不会影响另一个对象。

当你这样做时`a=b`，你不会用另一个对象来引用一个对象，但是，在这种情况下，做一个成员分配。基本上就像说

```
a.someNumber = b.someNumber; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-29T20:12:40.053

它不被视为值类型，事实上它是。

虽然在 Java 对象变量中存储对对象的引用，但在 C++ 中，对象与其引用之间存在重要区别。默认情况下，赋值实际上是按值分配的。

如果您希望变量只是一个引用，您可以使用引用或指针类型，这取决于您想要使用它。这些类型被声明`T*`和`T&`.

为了进一步说明这一点：

在 Java 中，当您说 时`MyClass obj`，创建了一个对象，但在变量中存储了一个引用/指针`obj`。

在 C++ 中，`MyClass obj`创建对象并将其存储在`obj`. 如果要使用引用/指针，则需要将变量显式声明为`MyClass* objPointer` 或`MyClass& objReference`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-29T20:23:33.737

虽然 C++ 不调用对象值或引用类型，但值和引用类型的行为在 C++ 中是等价的。

给定两个对象`a`和`b`, `a = b`:

1.  值类型将 的内容复制`b`到`a`保持它们单独的对象中；
2.  引用类型复制`b`into的位置`a`，使它们引用同一个对象。

对于 C++：

```
MyClass  a;      // value type
MyClass  b;      // value type
MyClass &c =  a; // reference type (a reference in C++), fixed to a
MyClass *d = &b; // reference type (a pointer in C++)

 a =  b; // copy content of b into a
 c =  b; // copy content of b into a
 d = &a; // set d to refer to a
*d =  b; // copy content of b into a 
```

指针/引用可以指向值对象、由分配的对象`new`或一些其他内存管理方案（例如`malloc`，或 Win32 `CoTaskMalloc`）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-29T20:14:09.723

在 C++ 中，对象在没有指针引用的情况下创建时被称为静态（堆栈）变量。动态（堆）变量是需要手动内存管理的指针引用。

相比之下，在 Java 或 C# 中，几乎所有对象都是引用类型，其行为类似于指针，只是它们被垃圾收集，而值类型是所有通常不可变的对象的特殊子集。（C++ 堆栈变量当然不是不可变的）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-29T20:14:58.877

简短的解释在这个关键部分

```
b = a; 
```

您正在使用复制赋值运算符，即此处的符号`=`。

此运算符的默认行为是应用逐个副本，因此如果您不定义/重载自己的运算符，此行将复制存储`a`在`b`.

运算符`new`是完全不同的故事，它通常用于在堆上分配对象并使用指针管理它们，避免堆栈和不必要的副本。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-03T17:49:44.820

默认情况下，C++ 将其类视为值类型并进行深度（元素方式）副本。

但是您可以将成员变量存储在类中的免费存储空间（在堆上）并自定义（覆盖）赋值运算符（代码中的 b = a）的行为以显示引用类型的行为。

这（以及其他一些“技巧”）是用于示例 shared_ptr 智能指针的设计方式。它是一个 C++ 类，其中每个实例都引用相同的原始数据，无论复制的频率如何。

# c# - 如何使用 ConvertTo-SecureString

> ID：13633826
> 
> 赞同：7
> 
> 时间：2012-11-29T20:06:53.163
> 
> 标签：c#, .net, powershell, encryption, aes

假设我需要在 Powershell 中执行此操作：

```
 $SecurePass = Get-Content $CredPath | ConvertTo-SecureString -Key (1..16)
    [String]$CleartextPass = [Runtime.InteropServices.Marshal]::PtrToStringAuto([Runtime.InteropServices.Marshal]::SecureStringToBSTR($CredPass)); 
```

$CredPath 的内容是一个包含 ConvertFrom-SecureString -Key (1..16) 输出的文件。

如何`ConvertTo-SecureString -key (1..16)`在 C#/.NET 中完成该部分？

我知道如何创建一个`SecureString`，但我不确定应该如何处理加密。

我是使用 AES 加密每个字符，还是解密字符串然后为每个字符创建一个安全字符串？

我对密码学几乎一无所知，但根据我收集到的信息，我可能只想使用 C# 调用 Powershell 命令。

作为参考，我在这里找到了关于 AES 加密/解密的类似帖子： [在 C# 中使用 AES 加密](https://stackoverflow.com/questions/273452/using-aes-encryption-in-c-sharp)

更新

[我已经查看了 Keith 发布的链接](http://msdn.microsoft.com/en-us/library/system.security.cryptography.aes.aes.aspx)，但我面临着更多的未知数。DecryptStringFromBytes_Aes 采用三个参数：

```
static string DecryptStringFromBytes_Aes(byte[] cipherText, byte[] Key, byte[] IV) 
```

第一个参数是一个字节数组，表示加密文本。这里的问题是，字符串在字节数组中应该如何表示？它应该用编码还是不用编码来表示？

```
byte[] ciphertext = Encoding.ASCII.GetBytes(encrypted_text);
byte[] ciphertext = Encoding.UTF8.GetBytes(encrypted_text);
byte[] ciphertext = Encoding.Unicode.GetBytes(encrypted_text);    

byte[] ciphertext = new byte[encrypted_password.Length * sizeof(char)];
System.Buffer.BlockCopy(encrypted_password.ToCharArray(), 0, text, 0, text.Length); 
```

第二个字节数组是键，应该只是一个整数数组：

```
byte[] key = { 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16 }; 
```

第三个字节数组是一个“初始化向量”——看起来 Aes.Create() 调用会随机为 IV 生成一个 byte[]。环顾四周，我发现我可能需要使用相同的 IV。由于 ConvertFrom-SecureString 和 ConvertTo-SecureString 能够简单地使用密钥进行加密/解密，因此我假设 IV[] 可以是随机的 - 或者 - 具有静态定义。

我还没有找到一个成功的组合，但我会继续努力。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-06-10T13:39:30.913

我知道这是一个旧帖子。我发布这个是为了完整性和后代，因为我在 MSDN 或 stackoverflow 上找不到完整的答案。它会在这里，以防我需要再次这样做。

它是具有 AES 加密的 powershell 的 ConvertTo-SecureString 的 C# 实现（通过使用 -key 选项打开）。我将把它留给练习来编写 ConvertFrom-SecureString 的 C# 实现。

```
# forward direction
[securestring] $someSecureString = read-host -assecurestring
[string] $psProtectedString = ConvertFrom-SecureString -key (1..16) -SecureString $someSecureString
# reverse direction
$back = ConvertTo-SecureString -string $psProtectedString -key (1..16) 
```

我的工作是结合答案并重新排列 user2748365 的答案，使其更具可读性并添加教育评论！我还解决了获取子字符串的问题——在这篇文章的时候，他的代码在 strArray 中只有两个元素。

```
using System.IO;
using System.Text;
using System.Runtime.InteropServices;
using System.Security;
using System.Security.Cryptography;
using System.Globalization;

// psProtectedString - this is the output from
//   powershell> $psProtectedString = ConvertFrom-SecureString -SecureString $aSecureString -key (1..16)
// key - make sure you add size checking 
// notes: this will throw an cryptographic invalid padding exception if it cannot decrypt correctly (wrong key)
public static SecureString ConvertToSecureString(string psProtectedString, byte[] key)
{
    // '|' is indeed the separater
    byte[] asBytes = Convert.FromBase64String( psProtectedString );
    string[] strArray = Encoding.Unicode.GetString(asBytes).Split(new[] { '|' });

    if (strArray.Length != 3) throw new InvalidDataException("input had incorrect format");

    // strArray[0] is a static/magic header or signature (different passwords produce
    //    the same header)  It unused in our case, looks like 16 bytes as hex-string
    // you know strArray[1] is a base64 string by the '=' at the end
    //    the IV is shorter than the body, and you can verify that it is the IV, 
    //    because it is exactly 16bytes=128bits and it decrypts the password correctly
    // you know strArray[2] is a hex-string because it is [0-9a-f]
    byte[] magicHeader = HexStringToByteArray(encrypted.Substring(0, 32));
    byte[] rgbIV = Convert.FromBase64String(strArray[1]);
    byte[] cipherBytes = HexStringToByteArray(strArray[2]);

    // setup the decrypter
    SecureString str = new SecureString();
    SymmetricAlgorithm algorithm = SymmetricAlgorithm.Create();
    ICryptoTransform transform = algorithm.CreateDecryptor(key, rgbIV);
    using (var stream = new CryptoStream(new MemoryStream(cipherBytes), transform, CryptoStreamMode.Read))
    {
        // using this silly loop format to loop one char at a time
        // so we never store the entire password naked in memory
        int numRed = 0;
        byte[] buffer = new byte[2]; // two bytes per unicode char
        while( (numRed = stream.Read(buffer, 0, buffer.Length)) > 0 )
        {
            str.AppendChar(Encoding.Unicode.GetString(buffer).ToCharArray()[0]);
        }
    }

    //
    // non-production code
    // recover the SecureString; just to check
    // from http://stackoverflow.com/questions/818704/how-to-convert-securestring-to-system-string
    //
    IntPtr valuePtr = IntPtr.Zero;
    string secureStringValue = "";
    try
    {
        // get the string back
        valuePtr = Marshal.SecureStringToGlobalAllocUnicode(str);
        secureStringValue = Marshal.PtrToStringUni(valuePtr);
    }
    finally
    {
        Marshal.ZeroFreeGlobalAllocUnicode(valuePtr);
    }

    return str;
}
// from http://stackoverflow.com/questions/311165/how-do-you-convert-byte-array-to-hexadecimal-string-and-vice-versa
public static byte[] HexStringToByteArray(String hex)
{
    int NumberChars = hex.Length;
    byte[] bytes = new byte[NumberChars / 2];
    for (int i = 0; i < NumberChars; i += 2) bytes[i / 2] = Convert.ToByte(hex.Substring(i, 2), 16);

    return bytes;
}
public static SecureString DecryptPassword( string psPasswordFile, byte[] key )
{
    if( ! File.Exists(psPasswordFile)) throw new ArgumentException("file does not exist: " + psPasswordFile);

    string formattedCipherText = File.ReadAllText( psPasswordFile );

    return ConvertToSecureString(formattedCipherText, key);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T22:32:04.873

根据 ConvertFrom-SecureString 上的文档，使用了 AES 加密算法：

> 如果使用 Key 或 SecureKey 参数指定加密密钥，则使用高级加密标准 (AES) 加密算法。指定密钥的长度必须为 128、192 或 256 位，因为这些是 AES 加密算法支持的密钥长度。如果未指定密钥，则使用 Windows 数据保护 API (DPAPI) 对标准字符串表示进行加密。

查看[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.security.cryptography.aes.aes.aspx)中的 DecryptStringFromBytes_Aes 示例。

顺便说一句，一个简单的选择是使用 C# 中的 PowerShell 引擎来执行`ConvertTo-SecureString`cmdlet 来完成这项工作。否则，初始化向量似乎嵌入在 ConvertFrom-SecureString 输出中的某个位置，可能不容易提取，也可能不容易提取。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-04T20:43:26.733

> 如何在 C#/.NET 中完成 ConvertTo-SecureString -key (1..16) 部分？

请看以下代码：

```
 private static SecureString ConvertToSecureString(string encrypted, string header, byte[] key)
    {
        string[] strArray = Encoding.Unicode.GetString(Convert.FromBase64String(encrypted.Substring(header.Length, encrypted.Length - header.Length))).Split(new[] {'|'});
        SymmetricAlgorithm algorithm = SymmetricAlgorithm.Create();
        int num2 = strArray[2].Length/2;
        var bytes = new byte[num2];
        for (int i = 0; i < num2; i++)
            bytes[i] = byte.Parse(strArray[2].Substring(2*i, 2), NumberStyles.AllowHexSpecifier, CultureInfo.InvariantCulture);
        ICryptoTransform transform = algorithm.CreateDecryptor(key, Convert.FromBase64String(strArray[1]));
        using (var stream = new CryptoStream(new MemoryStream(bytes), transform, CryptoStreamMode.Read))
        {
            var buffer = new byte[bytes.Length];
            int num = stream.Read(buffer, 0, buffer.Length);
            var data = new byte[num];
            for (int i = 0; i < num; i++) data[i] = buffer[i];
            var str = new SecureString();
            for (int j = 0; j < data.Length/2; j++) str.AppendChar((char) ((data[(2*j) + 1]*0x100) + data[2*j]));
            return str;
        }
    } 
```

例子：

```
 encrypted = "76492d1116743f0423413b16050a5345MgB8ADcAbgBiAGoAVQBCAFIANABNADgAYwBSAEoAQQA1AGQAZgAvAHYAYwAvAHcAPQA9AHwAZAAzADQAYwBhADYAOQAxAGIAZgA2ADgAZgA0AGMANwBjADQAYwBiADkAZgA1ADgAZgBiAGQAMwA3AGQAZgAzAA==";
    header = "76492d1116743f0423413b16050a5345"; 
```

如果要获取解密字符，请查看方法中的**数据**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-07T17:12:45.647

我发现最简单最简单的方法是直接从 C# 调用`ConvertTo-SecureString`PowerShell 命令。这样，实现没有区别，并且输出与直接从 PowerShell 调用时的输出完全相同。

```
 string encryptedPassword = RunPowerShellCommand("\"" 
            + password 
            + "\" | ConvertTo-SecureString -AsPlainText -Force | ConvertFrom-SecureString", null);

    public static string RunPowerShellCommand(string command, 
        Dictionary<string, object> parameters)
    {
        using (PowerShell powerShellInstance = PowerShell.Create())
        {
            // Set up the running of the script
            powerShellInstance.AddScript(command);

            // Add the parameters
            if (parameters != null)
            {
                foreach (var parameter in parameters)
                {
                    powerShellInstance.AddParameter(parameter.Key, parameter.Value);
                }
            }

            // Run the command
            Collection<PSObject> psOutput = powerShellInstance.Invoke();

            StringBuilder stringBuilder = new StringBuilder();

            if (powerShellInstance.Streams.Error.Count > 0)
            {
                foreach (var errorMessage in powerShellInstance.Streams.Error)
                {
                    if (errorMessage != null)
                    {
                        throw new InvalidOperationException(errorMessage.ToString());
                    }
                }
            }

            foreach (var outputLine in psOutput)
            {
                if (outputLine != null)
                {
                    stringBuilder.Append(outputLine);
                }
            }

            return stringBuilder.ToString();
        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-22T17:57:08.477

加上程的回答 - 我发现我必须改变：

```
byte[] magicHeader = HexStringToByteArray(encrypted.Substring(0, 32)); 
```

到

```
byte[] magicHeader = HexStringToByteArray(psProtectedString.Substring(0, 32)); 
```

和

```
SymmetricAlgorithm algorithm = SymmetricAlgorithm.Create(); 
```

到

```
SymmetricAlgorithm algorithm = Aes.Create(); 
```

但它在其他方面工作得很好。

# jquery - 当 jquery 在客户端更改下拉值时，SelectedIndexChanged 不会触发

> ID：13633828
> 
> 赞同：1
> 
> 时间：2012-11-29T20:06:59.357
> 
> 标签：jquery, asp.net, drop-down-menu, selectedindexchanged

我在 jQuery Modal 弹出窗口中有一个下拉菜单。When a row in a repeater is selected I show the modal and use jQuery to set the appropriate item in the drop down. 当下拉菜单中的项目更改时，我会进行回发并保存新值。

我的问题是，有时 DropDown 的 SelectedIndexChanged 事件不会触发。如果我的 jQuery 更改了值并且用户将其更改回默认值，则会发生这种情况。服务器不知道发生了变化。

假设我在下拉列表中有这些颜色值：文本 - 值

未知 - 0 红色 - 1 蓝色 - 2

下拉列表默认值为 0 - 未知颜色。用户选择具有红色的中继器行，jQuery 将 dropDown 设置为值 1（红色）。用户将选择更改为未知 - 值为零。

回发发生，但 SelectedIndexChanged 事件不会触发。原因是serverSide认为值没有改变——原来的值为0，新的值为0。它不知道jQuery把它改成了1。

有谁知道一个很好的解决方法？当模态显示只是为了同步服务器端时，我讨厌做回发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T20:13:07.777

在您的表单中有一个隐藏的输入，在适当的时候使用 javascript 将其值设置为某个值，并在回发期间在服务器端检查它。

# iphone - CGRectIntersectsRect 并不总是检测碰撞

> ID：13633834
> 
> 赞同：0
> 
> 时间：2012-11-29T20:07:16.833
> 
> 标签：iphone, objective-c

我创建了一个应用程序，其中图像从天而降，我必须用一个用户可移动的篮子在底部“捕捉”它们。我将掉落的图像和篮子图像放在 CGRectMake 帧中，并使用 CGRectIntersectsRect 来检测碰撞。但是，它并没有检测到每一次碰撞。例如，我将在视觉上“捕捉”10 个对象，这两个框架肯定相交，但它只会说我捕捉到 2 个。我做错了什么？

这是桶的代码：

*   (void)viewDidLoad { [超级 viewDidLoad];

    ```
    basketView = [[UIImageView alloc]
                  initWithImage:[UIImage imageNamed:@"bucket.png"]];
    basketView.frame = CGRectMake(130.0, 412.0, 30.0, 30.0);
    [self.view addSubview:basketView]; 
    ```

    }

这是坠落的物体和碰撞代码：

```
- (void)onTimer
{
    UIImageView* appleView = [[UIImageView alloc] initWithImage:appleImage];

    int applePosition = round(random() % 320); //random starting x coord
    double scale = 1 / round(random() % 100) + 1.0; //random apple size
    double speed = 1 / round(random() % 100) + 1.0; //random apple speed

    appleView.frame = CGRectMake(applePosition, -100.0, 25.0 * scale, 25.0 * scale);

    [self.view addSubview:appleView];

    [UIView beginAnimations:nil context:(__bridge void *)(appleView)];
    [UIView setAnimationDuration:3 * speed];

    appleView.frame = CGRectMake(applePosition, 500.0, 25.0 * scale, 25.0 * scale); 

    // Test for landing in bucket
    if (CGRectIntersectsRect(basketView.frame, appleView.frame)) {
        collision++;
        printf("%i\n", collision);
        [appleView removeFromSuperview];
    }
} 
```

**编辑：**我把篮子做得很大，现在我收到垃圾邮件，没有苹果出现。所以我假设它只是在起点检查与苹果的交集，而不是在实际动画期间。如何让它在动画期间检查交叉点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T21:37:18.957

显然，如果您的计时器函数产生新对象，则测试将在对象创建后恰好完成，因此如果该对象实际上并未在篮子中创建，您的命中测试将始终为负。

Now, you need another timer which will test for collisions every 10th of a sec or so (depending on how fast you move your objects, this could be more or less). An even better option (form the performance point of view) is to use `CADisplayLink` which works pretty much like a timer only it allows you to synchronise your tests to the refresh rate of the display.

# c# - 安排在特定时间运行方法。

> ID：13633842
> 
> 赞同：6
> 
> 时间：2012-11-29T20:08:05.230
> 
> 标签：c#, multithreading, datetime, timer

这是一个相当简单的问题，但每次我试图找到答案时，它都会不断显示有关 Windows 计划任务的信息，而这不是这个问题。

说我的程序基本上是这样的：

```
void StartDoingThings()
{
   //At Specific System.DateTime
   DoSomething()

   //At another specific System.Datetime
   DoSomethingElse()
} 
```

我应该放什么而不是那些评论来导致这些方法在不同的日期时间运行。

我可以使用 Thread.Sleep() 甚至 System.Threading.Timers 并根据 (DateTimeOfEvent - DateTime.Now) 计算间隔，但是有什么话要说（假设程序仍在运行）：9:30： 2012 年 11 月 30 日上午 00 点，执行 DoAnotherThing() 方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T20:15:19.000

如果你想“安排”一个方法在预定的时间做某事，有很多方法可以做到这一点。我不会使用`Thread.Sleep()`，因为这会占用一个什么都不做的线程，这是一种资源浪费。

一种常见的做法是使用一种定期唤醒的轮询方法（假设每分钟一次）并查看要执行的任务的共享列表。 `System.Timer`可用于轮询方法：

```
aTimer = new System.Timers.Timer(10000);
aTimer.Elapsed += new ElapsedEventHandler(OnTimedEvent); 
```

OnTimedEvent 方法可以包含维护要执行的“任务”集合的代码。当一个任务的时间到了，定时器的下一次运行将导致它执行。

# android - 如何从android中的谷歌位置服务获取纬度和经度

> ID：13633844
> 
> 赞同：0
> 
> 时间：2012-11-29T20:08:09.407
> 
> 标签：android, gps, locationmanager, android-location, locationlistener

我已经成功实现了 LocationListener 并且可以从 GPS 获取地理坐标。现在我正在寻求实现相同的功能并从 Google 位置服务中获取纬度、经度。这与从 GPS 获取位置有什么不同？找不到足够的信息。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T20:12:47.433

读取坐标的代码将相同。要从 Google 位置服务读取它，您需要为网络而不是 GPS 提供商设置一个监听器。

而不是`LocationManager.GPS_PROVIDER`，你会使用`LocationManager.NETWORK_PROVIDER`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T20:20:21.133

您也可以编写一个代码来选择最佳提供商以获得最正确的位置。

这是一个很好的关于如何使用谷歌定位服务 API 的教程： [http ://www.vogella.com/articles/AndroidLocationAPI/article.html](http://www.vogella.com/articles/AndroidLocationAPI/article.html)

另一个不错的信息提供者是 Android 的开发者网页： [Location and Sensors](http://developer.android.com/guide/topics/sensors/index.html)

# pdf - 将 PDF 读入 blob，然后作为附件发送

> ID：13633846
> 
> 赞同：2
> 
> 时间：2012-11-29T20:08:26.470
> 
> 标签：pdf, powerbuilder, email-attachments

我正在尝试将 PDF 读入 blob 对象，然后插入到我的对象`oracle database`中，以便可以将其作为附件发送出去。现在电子邮件部分正在工作，它添加了一个附件，但附件总是损坏，我无法打开它。下面是我创建 blob pdf 的代码，有人可以帮我弄清楚为什么这没有创建正确的附件吗？

```
ls_pdf_name = ls_pdf_path + "\" + "invnum_" + ls_invoice + ".pdf"  
ls_pdf_filename = "invoice_" + ls_invoice +  ".pdf"
ls_rc = wf_check_pdf_status(ll_invoice_number, ls_sub_type, ll_user_supp_id)
If ls_rc = "Y" Then
    li_fnum = FileOpen(ls_pdf_name, StreamMode!)
    li_bytes = FileRead(li_fnum, bPDF)
    FileClose(li_fnum)
    ll_rc = wf_update_pdf_tables(bPDF, ls_pdf_filename, ls_sub_type, ll_user_supp_id, ll_invoice_number, ls_month, ls_year) 
```

**编辑**

因此，我接受了 Calvin 的建议，并将插入内容更改为以下内容：

这是`INSERT`将 blob 放入表中的语句

```
INSERT INTO ATTACH_DOCUMENT
(id, filename, mime_type, date_time_created)
VALUES
(ATTACH_DOCUMENT_SEQ.NEXTVAL, :pdf_filename, 'application/pdf', CURRENT_TIMESTAMP);

UPDATEblob ATTACH_DOCUMENT
SET data = :pdf
WHERE id = ATTACH_DOCUMENT_SEQ.CURRENTVAL; 
```

但是，当我从我的电子邮件中打开 PDF 电子邮件附件时，Adobe 会打开并显示此错误 - 无法打开，因为它不是受支持的文件类型或已损坏（例如，它是作为电子邮件附件发送的，并且未正确解码）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T20:27:12.297

PDF文件有多大？

您可能无法通过简单的方式获得所有内容`FileRead()`- 尝试使用`FileReadEx()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T14:00:41.050

首先要做的是检查 pdf 是否正确保存在数据库中：

*   插入数据库后不要删除pdf文件。
*   使用 sql 解释器计算插入文件的 blob 列的大小，并验证它是否与文件大小匹配。您没有提及您正在使用的数据库，例如在 ms sql server 中，您可以使用 datalength() 函数来执行此操作。根据数据库，您可以通过计算其 md5 哈希来检查 pdf 是否已损坏。
*   如果您使用功能强大的查询工具（例如 TOAD for Oracle），您可以将 blob 保存为 pdf 文件并验证其可读性。

# java - 运行多个测试的常见条件？

> ID：13633853
> 
> 赞同：0
> 
> 时间：2012-11-29T20:09:10.010
> 
> 标签：java, junit, conditional-statements

我有几个测试只有在满足一个条件时才能运行（媒体服务器已启动并运行）。我应该如何编码这种情况，以便 jUnit 在服务器关闭时不会运行 rests 并通知我不满足原因？

**更新**

可能我可以描述一些测试依赖吗？

目标是看到不是测试失败，而是条件不满足。如果我编码`setUp`或其他东西，我只会看到多个测试失败，没有任何解释。如果我有一个测试条件本身的测试，而所有其他测试只有在这个成功时才执行，那么问题就会很明显......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:12:34.577

您可以将其添加为`setUp()`代码的一部分。如果`setUp()`抛出异常，则不会运行测试。当然，TestRunner 通常会遍历每个开始`test`并为每个方法运行的方法`setUp()`，因此这不是一个非常有效的解决方案。

# sql - 从 Paradox 到 Borland C++ 5 中的 SQL Server

> ID：13633854
> 
> 赞同：0
> 
> 时间：2012-11-29T20:09:18.327
> 
> 标签：sql, sql-server, odbc, c++builder, paradox

我正在将旧应用程序转换为使用 SQL Server 而不是数百个 Paradox DB 文件。

我正在使用 ODBC，大多数东西都在工作。

不过我确实有问题。

在某些形式中，是要求输入密码。我已经仔细检查了`TDatabase`and`TTable`组件，添加了`USER NAME=sa`and`PASSWORD=******`到参数并关闭了`LoginPrompt`

少了什么东西？

有没有其他方法可以只初始化一次所有 5 个数据库并且不再要求输入密码？！

我在 StackOverflow 上检查了其他问题，但没有找到合适的 :(

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T23:21:45.740

您可以使用 SQL Server“Windows 身份验证”模式。您可以将数据库权限分配给 Windows 域组或单个 Windows 用户。在这种情况下，用户将在没有提示的情况下自动对数据库进行身份验证。

# java - 有什么理由在 Objects.hash 上使用 Apache HashCodeBuilder？

> ID：13633856
> 
> 赞同：6
> 
> 时间：2012-11-29T20:09:25.290
> 
> 标签：java, hashcode

我正在覆盖对象的 hashCode 和 equals 方法。我正在使用Apache Commons 库中的[EqualsBuilder来覆盖 equals。](http://commons.apache.org/lang/api-2.3/org/apache/commons/lang/builder/EqualsBuilder.html)[由于我使用的是 Java 7，因此我计划使用Objects 类中](http://docs.oracle.com/javase/7/docs/api/java/util/Objects.html#hash%28java.lang.Object...%29)的内置哈希方法而不是 Apache Commons [HashCodeBuilder](http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/builder/HashCodeBuilder.html)。这种方法有什么问题吗？有什么理由更喜欢其中一个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T20:12:26.590

`HashCodeBuilder`有时髦的反射哈希码实现，但除此之外，不——你可能应该使用`Objects`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T20:14:15.530

一个区别是`HashCodeBuilder`可以反射地计算哈希码：

```
public int hashCode() {
  return HashCodeBuilder.reflectionHashCode(this);
} 
```

也就是说，使用`HashCodeBuilder`，您不必列出各个字段，尽管您可以。

# java - 尝试使用一个 JSONArray 解析 JSONObject 时出现空 JSON 响应

> ID：13633862
> 
> 赞同：0
> 
> 时间：2012-11-29T20:10:12.357
> 
> 标签：java, android, json, android-asynctask

我得到了得到的代码，`JSONArrays`但是当我尝试得到`JSONObject`只包含一个的代码时，`JSONArray`它给了我空白`JSONArray`。

例如，如果我需要从中获取数据`JSONObject`：

```
{"events":[{"start":1357714800,"end":1357736400,"name":"Example1","description":""}]} 
```

我得到`{"events":[]}`as `JSONObject`，`[]`这意味着它不包含任何 JSONArrays。在这种情况下，长度`JSONObject`也是 0。但它不会抛出任何类型的`Exceptions`.

但如果`JSONObject`包含多个`JSONArrays`这样的：

```
{"events":[{"start":1357714800,"end":1357736400,"name":"Example1","description":""},{"start":1357714600,"end":1357736500,"name":"Example2","description":""},{"start":1357514800,"end":1357536400,"name":"Example3","description":""}]} 
```

然后我的代码完美运行。

这是我用来解析 JSON 的代码：

```
private void getObjects(String url) throws JSONException, Exception {
        JSONObject jsonObject = new JSONObject(new NetTask().execute(url).get());
        JSONArray job1 = jsonObject.getJSONArray("events");
        System.out.println(jsonObject.toString());
        System.out.println("JOB1 LENGTH: "+job1.length());
        for (int i = 0; i < job1.length(); i++) {
            JSONObject jsonEvent = job1.getJSONObject(i);
            int start = jsonEvent.getInt("start");
            int end = jsonEvent.getInt("end");
            String name = jsonEvent.getString("name");
            String description = jsonEvent.getString("description");
        }
    }

    public class NetTask extends AsyncTask<String, Integer, String>
    {
        @Override
        protected String doInBackground(String... params)
        {
            String jsonText = "";
            BufferedReader reader = null;
            try {
                URL url = new URL(params[0]);
                reader = new BufferedReader(new InputStreamReader(url.openStream()));
                StringBuffer buffer = new StringBuffer();
                int read;
                char[] chars = new char[1024];
                while ((read = reader.read(chars)) != -1) {
                    buffer.append(chars, 0, read);
                }

                jsonText = buffer.toString();
            } catch (MalformedURLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } finally {
                if (reader != null) {
                    try {
                        reader.close();
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                }
            }
            return jsonText;
        }
    } 
```

我错过了什么或者这是正常的行为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T21:34:40.233

我尝试了你给定的代码（虽然我只是让 AsyncTask 只返回单数组字符串，并且不得不用 jsonEvent.getString() 替换 opptunti.getString() 的东西）。它工作得很好，除了您可能阻止 UI 线程等待服务器响应之外。

我的猜测是问题在于您点击了错误的 URL，参数错误或类似的东西。

# c# - Restful、代理和 webapi

> ID：13633865
> 
> 赞同：1
> 
> 时间：2012-11-29T20:10:25.570
> 
> 标签：c#, rest, asp.net-web-api

我正在为公开可用的休息网络服务开发消费者应用程序。
我有 2 个问题：我的代理和服务身份验证。
我似乎无法通过我的代理，实际上我确实有一个有效的凭证可以通过它，但我不知道在哪里或如何提供它！
其次，我也不知道如何响应网络服务发出的基本身份验证挑战......
我确实可以通过浏览器使用它，但我无法让它在我的 c# 应用程序上运行。到目前为止的代码如下：

```
HttpClient cli = new HttpClient();
cli.BaseAddress = new Uri("http://myserver.com/");            
HttpResponseMessage response = cli.GetAsync("api/service1").Result;

textBox1.Text = response.Content.ReadAsStringAsync().Result; 
```

到目前为止，textBox1 中的结果始终是 407 错误...有人可以帮忙吗？

Edit1：网络服务上的身份验证属于 BASIC 类型！
Edit2: clientHandler.Credentials = new NetworkCredential("user", "P@ssw0rd"); 不起作用...服务器返回“此请求需要 HTTP 身份验证”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T21:41:54.587

需要在 HttpClientHandler 对象上配置代理信息，该对象可以传递给 HttpClient 构造函数。

```
var clientHandler = new HttpClientHandler();
clientHandler.Proxy = new WebProxy("http://proxyserver:80/",true);
var httpClient = new HttpClient(clientHandler); 
```

对于凭证，我会做这样的事情......

```
 var clientHandler = new HttpClientHandler() {PreAuthenticate = true};

    var credentialCache = new CredentialCache();
    credentialCache.Add(new Uri(Host), "Basic", new NetworkCredential(userName, password));
    clientHandler.Credentials = credentialCache; 
```

通过这种方式进行设置，每当您向任何低于“主机”URI 的 URI 发出请求时，HttpClientHandler 都会自动设置正确的授权标头。

另外，请注意，还有一个称为 WebRequestHandler 的替代处理程序可以用来代替 HttpClientHandler，它添加了仅在 Windows 操作系统上可用的额外内容，如 WinINet 代理和流水线。

# ruby-on-rails-3 - Rails 中的多对多关系

> ID：13633867
> 
> 赞同：1
> 
> 时间：2012-11-29T20:10:30.113
> 
> 标签：ruby-on-rails-3, has-many-through, has-many

我看了这 2 篇博文，对 RoR 中的 has_many 关系感到有些晦涩：

在这个： http: [//kconrails.com/2010/01/16/many-to-many-relationships-in-ruby-on-rails/](http://kconrails.com/2010/01/16/many-to-many-relationships-in-ruby-on-rails/)，在“has_many :through”部分，作者说迁移文件连接表**贡献**是这样的：

```
class CreateContributions &lt; ActiveRecord::Migration
  def self.up
    create_table :contributions do |t|
      t.references :artist
      t.references :song
      t.string :instrument
      t.timestamps
    end
........... 
```

因此连接表的迁移将使用**t.references :artist**和**t.references :song**引用 2 个表**Artist**和**Song**。如果我们想要访问一个属性，比如该歌曲的乐器艺术家演奏，我们可以使用连接表**Contributions**访问它。

 ******在第二篇文章中：http: [//kconrails.com/2010/01/29/has_and_belongs_to_many-associations-in-ruby-on-rails/](http://kconrails.com/2010/01/29/has_and_belongs_to_many-associations-in-ruby-on-rails/)。**部分：“has_many :through”，作者介绍了名为Categorizations**的“成熟表” 。迁移如下：

```
class CreateCategorizations < ActiveRecord::Migration
  def self.up
    create_table :categorizations do |t|
      t.integer :category_id
      t.integer :item_id
      t.timestamps
    end
........... 
```

**因此，成熟表**的迁移将通过**t.integer :category_id**和**t.integer :item_id**引用 2 个表 Category 和 Item 。而且我们只能访问与该表的 2 个属性（例如时间戳）相关的特定属性，我们可以像上面那样向模型添加更多属性（例如**t.string :instrument**）吗？

**例如，如果我有制造商**和**产品**等多对多关系模型，我想跟踪**价格**，我应该把它放到完整的表中，对吗？但是如果我只想添加一个属性而不是像**Original_From**那样跟踪它（显示产品的生产地），我只需要放入连接表吗？

我可以这样概括它：当属性数量有限且不重要时，请使用连接表。当属性的数量很多并且我们想要跟踪时，我们将使用完整的表。这是正确的吗？

当我们访问数据时有什么区别？就像我想访问上面示例中的价格或位置一样？

我仍然不清楚完整表和连接表之间的区别。请给我一些想法。非常感谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T20:51:34.083

我认为你基本上是对的。 `has_and_belongs_to_many`（HABTM）在多对多关系的两个模型上都假设一个简单的连接表（没有 id，没有时间戳，只有每个表主键的外键。）

如果关系本身（连接表）是“有用的”——你想在你的类中引用的东西，特别是因为它有自己的字段，你可以将它定义为它自己的模型并`has_many :through =>`用来定义关系两侧，`belongs_to`在新模型中。这是“完全成熟”的选择。

大多数情况下，您将获得与任一选项相同的方法（例如，您将获得一个`locations`关于价格的`prices`方法和一个关于位置的方法）。但可以肯定的是，HABTM 选项更加有限。

例如，我最近发现该`accepts_nested_attributes_for`方法不适用于简单的 HABTM，但适用于`has_many :through`.

我认为这个 [Rails 指南很好地描述了何时使用一个与另一个](http://guides.rubyonrails.org/association_basics.html#choosing-between-has_many-through-and-has_and_belongs_to_many)。

（而且看起来即将到来的 Rails 4.0 对 HABTM 有更好的支持，以及一些处理一对多和多对多关系的新特性 :-)******

# php - WHERE之后可以在Mysql查询中使用变量吗

> ID：13633868
> 
> 赞同：1
> 
> 时间：2012-11-29T20:10:29.473
> 
> 标签：php, mysql

以下查询有效并返回结果

```
$query = "SELECT * FROM table WHERE District = '" . $var . "' ORDER BY Form_Date DESC"; 
```

好像我用变量替换单词“District”，它不起作用

```
$query = "SELECT * FROM table WHERE '" . $distvar . "' = '" . $var . "' ORDER BY Form_Date DESC"; 
```

这个有什么问题，我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T20:11:37.733

删除您正在测试的字段周围的引号，或用反引号替换它们，以免 mysql 解析器误认为它是一个潜在的保留字：

```
$query = "SELECT * FROM `table` WHERE `" . $distvar . "` = '" . $var . "' ORDER BY Form_Date DESC"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T20:16:19.950

试试这个 ：

```
$query = "SELECT * FROM table WHERE `" . $distvar . "` = '" . $var . "' ORDER BY Form_Date DESC"; 
```

或者

```
$query = "SELECT * FROM table WHERE " . $distvar . " = '" . $var . "' ORDER BY Form_Date DESC"; 
```

# r - 在启动时加载 .Rprofile

> ID：13633876
> 
> 赞同：11
> 
> 时间：2012-11-29T20:10:59.693
> 
> 标签：r, rstudio, pandoc, rprofile

我有一个全局`~/.Rprofile`文件和另一个`.Rprofile`文件位于我项目的当前工作目录中，并且两者都具有以下内容：

```
.First() <- function() {
options(rstudio.markdownToHTML = 
  function(inputFile, outputFile) {      
    system(paste("pandoc", shQuote(inputFile), "-s --webtex -o", shQuote(outputFile)))
  }
)  
} 
```

不幸的是，当我打开 RStudio 应用程序时，它们似乎都没有工作。我正在尝试做的目的是让“Knit HTML”按钮呈现具有内联 LaTeX 的 Markdown 文件，使用 webtex 作为 LaTeX 渲染器通过 Pandoc 处理。

有谁知道我如何检查我的`.Rprofile`文件是否在启动时加载？

谢谢你的帮助！

**发布答案编辑（在乔希的回答之后）：** 为清楚起见，我的工作项目的`.Rprofile`文件（有效）现在如下所示：

```
options(rstudio.markdownHTML =
  function(inputFile, outputFile) {
    system(paste("pandoc", shQuote(inputFie), "-s --webtex -o", shQuote(outputFile)))
  }
)
 \\ you will need to end with a blank carriage return underneath 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-29T21:16:15.900

R 文档应该有助于了解如何处理 .Rprofiles。在控制台执行以下命令：

```
> ?Startup 
```

相关部分表明您需要将项目 .Rprofile 放在启动项目时将加载的初始工作目录中。因此，如果您的项目是`~/foo/foobar.Rproj`，那么您应该拥有您的配置文件`~/foo/.Rprofile`，并确保在启动时，初始工作目录是`~/foo/`. 您可以在 RStudio 控制台窗格顶部的标题栏中看到这一点。

另外，为了确认正确的 .Rprofile 实际正在加载，我会亲自进行测试以查看正在拾取哪个（如果有）配置文件。例如，包括：

```
print("This is the Rprofile inside the foo project!") 
```

这是另一个有关使其工作的示例：

[http://support.rstudio.org/help/discussions/suggestions/1095-different-rprofile-for-a-project#comment_15690293](http://support.rstudio.org/help/discussions/suggestions/1095-different-rprofile-for-a-project#comment_15690293)

最后，如果在项目中加载了正确的 .Rprofile，那么您的代码一定有问题。不过，看起来您是从我们的[文档](http://www.rstudio.com/ide/docs/authoring/markdown_custom_rendering)中获得的，所以如果您加载了配置文件，并且仍然遇到问题，请告诉我们。[您可以在我们的支持线程](http://support.rstudio.org/)上发布新的讨论。

乔什

产品经理 - RStudio

# ios - 条码 iOS 插件：无法识别的选择器

> ID：13633882
> 
> 赞同：0
> 
> 时间：2012-11-29T20:11:18.073
> 
> 标签：ios, cordova, phonegap-plugins, barcode-scanner

在 iOS 上安装 phonegap 插件[条形码阅读器](https://github.com/phonegap/phonegap-plugins/tree/master/iPhone/BarcodeScanner)后，我收到以下错误：

```
-[CDVbcsViewController setOrientationDelegate:]: 
            unrecognized selector sent to instance 0x2fb6a0 
```

* * *

值得一提的是，在我成功编译项目之前，由于我`CDVBarcodeScanner.mm`在网上遇到的编译错误，我不得不做一些更改`837`：

```
Use of undeclared identified 'UIInterfaceOrientationMaskPortrait'; 
            did you mean 'UIInterfaceOrientationPortrait' ? 
```

所以我按照建议删除`Mask`了。`UIInterfaceOrientationMaskPortrait`

* * *

我还有其他 3 个警告：

*   语义问题：`Property 'orientationDelegate' requires method 'setOrientationDelegate' to be defined`
*   语义问题：`Property 'orientationDelegate' requires method 'orientationDelegate' to be defined`
*   语义问题：（`No previous prototype for function 'compareModuleSize'`在文件中`zxing-all-in-one.cpp`）

知道我做错了什么吗？

谢谢

XCode 版本 4.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T20:40:50.620

好吧，我通过恢复到旧版本（截至 2012 年 7 月 23 日）“修复”了这个问题。

[https://github.com/phonegap/phonegap-plugins/tree/9f68ff99876711a2b261594b8b5ebf244983e6a9/iOS/BarcodeScanner](https://github.com/phonegap/phonegap-plugins/tree/9f68ff99876711a2b261594b8b5ebf244983e6a9/iOS/BarcodeScanner)

较新的版本似乎与我的 XCode 版本存在兼容性问题。

# c# - 带有按钮和按钮事件的用户控件

> ID：13633883
> 
> 赞同：0
> 
> 时间：2012-11-29T20:11:19.567
> 
> 标签：c#, user-controls

我目前正在开发我的第一个用户控件，现在遇到了一些小问题。

该控件是一个自定义`PictureBox`的，`Button`用于清除图片。我正在重写该`OnPaint(PaintEventArgs e)`方法并使控件无效`MouseEnter`并`MouseLeave`根据鼠标状态为控件绘制新边框。

这一切都应该正常工作。当我想在右上角（相对于图片框）添加一个按钮时，就会出现问题。

**1.** 按钮相对于 PictureBox 的位置不正确。它被放置在第 0 个 Y 坐标处，这很好，但 X 坐标仅位于位置 100，它应该是 160。我`User Controls Width property`在放置按钮时使用的是，但它似乎得到了`default value`100分配在窗体上创建 PictureBox 的 160 个。

```
CustomPictureBox cpic = new CustomPictureBox();
cpic.Location = new Point(20, 20);
cpic.Height = 80;
cpic.Width = 160;
this.Controls.Add(cpic); 
```

按钮是这样添加的：

```
btnClear = new Button();
btnClear.Width = 20;
btnClear.Height = 20;
btnClear.Location = new Point(this.Width - btnClear.Width, 0);
btnClear.Text = "X";
this.Controls.Add(btnClear); 
```

这个 DefaultValue 来自哪里，它如何阻止控件使用它，而是遵循在初始化控件的新实例时指定的宽度？

**2.** 另一件事是我无法让按钮工作的事件。我一直在谷歌上搜索并尝试了我能想到的一切，但事件仍然没有触发:(

必须可以直接从用户控件连接到按钮 MouseClick、MouseEnter 和 MouseLeave 事件吗？

如果你想看完整的代码，你可以在这里找到：http: [//pastebin.com/vL14Q5CX](http://pastebin.com/vL14Q5CX)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T20:40:15.037

该按钮未按预期对齐，因为：

1.  按钮的位置在用户控件的构造函数中设置
2.  然后在表单中设置用户控件的宽度
3.  未处理用户控件的 Resize 事件

在您的用户控件中连接 Resize 事件并更新按钮的位置，即：

```
private void CustomPictureBox1_Resize(object sender, EventArgs e)
{
    btnClear.Location = new Point(this.Width - btnClear.Width, 0);
} 
```

按钮单击事件不起作用的原因是它们只会冒泡到父用户控件；托管控件的表单不会收到它们。您需要在您的用户控件上创建一个新的自定义事件处理程序，该处理程序是从用户控件的按钮单击事件中触发的。然后，您在表单上处理该自定义事件处理程序。

高温高压

# ios6 - IOS 6.0 + supportedInterfaceOrientations 在使用 popViewControllerAnimated 弹回控制器时未应用

> ID：13633885
> 
> 赞同：2
> 
> 时间：2012-11-29T20:11:27.807
> 
> 标签：ios6, orientation, popviewcontrolleranimated

解决了：

解决这个问题的唯一方法（据我所知）是将您的自由旋转视图控制器置于层次结构之外。一种方法是临时将您的自由旋转控制器分配给应用程序委托根控制器。这样，当它旋转时，层次结构的其余部分不会受到影响。

* * *

我有一个我推送的控制器，supportedInterfaceOrientations 被正确调用并且值被正确返回 - 我正在强制纵向。我已经对我的导航器和选项卡控制器进行了子类化，所以我得到了相关的方法。事实上，一切都很完美，除了这个问题：

从仅支持纵向的特定控制器，我推动另一个支持所有方向的控制器。

在第二个控制器中，如果我将设备更改为横向，然后在横向模式下弹出此控制器，则会发生以下情况：

在我原来的控制器中，supportedInterfaceOrientations 被调用得很好（shouldAutorotate 返回 YES），并返回与以前相同的方向值（仅限纵向）。但是，即使我只通过肖像，控制器的内容仍然是风景。

通过断点，我验证了每次都调用了supportedInterfaceOrientations。但是，当弹出子控制器景观控制器时，不会应用返回值。

我尝试添加 [[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationPortrait]; 在 viewWillAppear 中，但是：1）它不起作用，2）这不会让我的应用程序被拒绝吗？

我怎么解决这个问题？

编辑，这里是一些代码，虽然我的问题是非常基本的。

在控制器 1 中，这些总是被调用：

```
-(BOOL)shouldAutorotate{
    return NO;
    ///return YES; // does not matter
}

-(NSUInteger)supportedInterfaceOrientations{

    return UIInterfaceOrientationMaskPortrait;

} 
```

然后，在某个时候，我推动我的第二个控制器（它；一个视频播放器）：

```
[self presentModalViewController:playerController animated:YES]; 
```

在控制器 2 中：

```
-(BOOL)shouldAutorotate{
    return YES;
}

-(NSUInteger)supportedInterfaceOrientations{

    return UIInterfaceOrientationMaskAll;

} 
```

重复步骤：

1）启动应用程序，它将以纵向模式显示控制器1，因为这是返回的掩码。而且它不会旋转。

2）推动（或什至呈现模式）控制器2。

3）这个会旋转。旋转到横向模式。

4）弹出控制器2。

5) 控制器 1 将处于横向模式，即使调用了 shouldAutorotate 和 supportedInterfaceOrientations 并且它们返回的值如控制器 1 的代码所示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T04:48:47.113

```
//add code in your controller 1

-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskPortrait;
} 
```

# android - 我可以在应用程序范围的主题中设置 ListView 和 ListFragment 选定的颜色吗？

> ID：13633887
> 
> 赞同：2
> 
> 时间：2012-11-29T20:11:39.367
> 
> 标签：android, android-listview, android-theme, android-listfragment

我有一个包含两个活动的应用程序。第一个 Activity 是 ListActivity。第二个Activity是一个FragmentActivity，里面有两个Fragment。第一个 Fragment 是 ListFragment。我想使用扩展 Theme.Light 的自定义主题来格式化应用程序。我已经成功更改了 windowBackground，但是当我尝试更改 listSelector 时，什么也没有发生。是否可以通过主题来做到这一点，还是我必须在每个列表上单独做？这是我的代码：

我的自定义主题：

```
<?xml version="1.0" encoding="utf-8"?>
<resources xmlns:android="http://schemas.android.com/apk/res/android">
 <style name="StitchTheme" parent="android:Theme.Light">
<item name="android:listSelector">#ffffff</item>
</style>
</resources> 
```

然后，在我的清单中，我输入：

```
 <application
android:theme="@style/StitchTheme" > 
```

我也尝试通过设置 selector.xml 并在我的主题中设置 android:listSelector 来做到这一点，但它没有效果。想法？

# c# - 从第二个 USB HID 读取输入而不干扰主窗体

> ID：13633890
> 
> 赞同：1
> 
> 时间：2012-11-29T20:11:46.463
> 
> 标签：c#, input, usb, hid

在这里找到了很多问题的答案，我决定问，因为我发现了一些非常接近我想要在我的应用程序中实现的东西。
[如何从 USB HID 设备读取输入](https://stackoverflow.com/questions/3655023/how-do-i-read-input-from-a-usb-hid-device)

但是这个解决方案与我需要的有点不同。所以我有一个简单的表格来计算 USB HID 上按下了多少个“d”；这实际上是一个连接到 iPAC 的电子传感器，它模拟 PC 的键盘输入，我用它来计算风扇正在进行的循环次数，每次风扇经过它都会激活传感器，传感器会激活 iPAC 中的输入，并且 iPAC 向主窗体发送各种“d”，我使用一个简单的布尔变量以及按键向上和向下事件来评估它是否是一个新循环，另外我还有几个按钮和选择框用于报告和注册问题的表单，此表单连接到 Access DB，但是，由于风扇每秒循环大约 3 次，它发送的输入过多，导致表单完全无法使用，并且它没有

您对 API 有什么建议可以让我只听输入吗？我只需要知道风扇正在循环多少次。

# javascript - 如何从同一对象的方法中引用属性？

> ID：13633891
> 
> 赞同：0
> 
> 时间：2012-11-29T20:11:52.823
> 
> 标签：javascript, jquery, class, object, reference

你能告诉我为什么这行不通吗？（注意**this**关键字）

```
var post = {
    url: 'http://myurl.com',
    add: function() {
        window.location = this.url + '/add';
    },
    edit: function() {
        window.location = this.url + '/edit';
    }
}; 
```

代码中的其他地方：

```
post.url = '<?php echo BASE_ADMIN . $postType ?>';

$(document).ready(function() {

    $("#listing").aJqueryPlugin({
    ...
    // Buttons and their callbacks
    buttons : [
        {name: 'Add', bclass: 'add', onpress : post.add},
        {name: 'Edit', bclass: 'edit', onpress : post.edit},
    ],
   ...
}); 
```

线

post.url = ....

表现如预期。**post**中的**url**属性已更新。

 **但是，当我单击**Add**或**Edit**按钮并输入它们的功能时，**this.url**是**未定义**的，因为**this**引用的是按钮而不是**post**对象。为什么？那么我应该怎么做才能从回调中引用**url属性？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T20:13:17.160

由于您使用的是 jQuery，因此您可以使用[`$.proxy`](http://api.jquery.com/jquery.proxy/).

```
 {name: 'Add', bclass: 'add', onpress : $.proxy(post, "add")},
    {name: 'Edit', bclass: 'edit', onpress : $.proxy(post, "edit")}, 
```

这将返回一个新函数，该函数将调用由字符串命名的对象的方法。

* * *

它有效地做到了这一点：

```
{name: 'Add', bclass: 'add', onpress : function() {
                                           return post["add"].apply(post, arguments);
                                       },
{name: 'Edit', bclass: 'edit', onpress : function() {
                                           return post["edit"].apply(post, arguments);
                                         }, 
```

* * *

因为函数中的值`this`取决于函数的调用方式，所以有时需要其他方法来确保获得正确的值。

* * *

你也可以在你的原始对象中设置这些，只要你知道你总是想`this`引用那个对象。

```
var post = {
    url: 'http://myurl.com'
};
post.add = $.proxy(function() {
    window.location = this.url + '/add';
}, post);
post.edit = $.proxy(function() {
    window.location = this.url + '/edit';
}, post); 
```

这使用 的另一个签名`$.proxy`，它允许您直接传递函数，后跟所需的`this`值。**

# c++ - 继承自 C++ 标准库 List 类以添加更多方法

> ID：13633900
> 
> 赞同：0
> 
> 时间：2012-11-29T20:12:35.357
> 
> 标签：c++, list, class, inheritance, methods

我需要在 c++ 的类中添加一些方法。我正在使用名为“Super_list”的继承创建一个新类，它将继承列表的所有方法并允许我添加自己的方法。

```
#ifndef SUPER_LIST_H
#define SUPER_LIST_H

#include "my_containter.h"
#include <list>
using namespace std;

class My_Container;

class Super_list: public list<My_Container>
{
 public:
  void new_func1();
  void new_func2();
  void new_func_3();
};
#endif 
```

这是我正在使用我新制作的课程的地方：

```
#ifndef my_container_H
#define my_container_H

#include <list> 
#include "super_list.h"
using namespace std;

class Super_list;

class My_container
{
 private:
  Super_list buddy;
};
#endif 
```

我收到一堆与未正确完成继承有关的错误。我将不胜感激完成此任务的任何帮助或其他想法。

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T20:17:12.367

你有一个循环依赖：`MyContainer`需要知道`Super_list`，反之亦然。您需要找到一种方法来打破这种依赖关系。请注意，在您的代码中，前向声明是完全多余的。

另请注意，标准库容器[并非旨在从 public 继承](https://stackoverflow.com/questions/6806173/why-should-not-i-subclass-inherit-standard-containers)。

关于依赖关系，您需要修改至少一个类，使其不需要另一个类的完整定义。假装公开继承`std::list`是可以的，那么唯一的选择是`My_Container`不需要完整的定义，`SuperList`让它持有一个（最好是智能的）指针：

```
class My_container
{
 private:
  Super_list* buddy;
}; 
```

这将允许您删除`super_list.h`包含。

一个不相关的警告：放入头文件是不好的`using namespace std`，因为它会将 using 指令强加于所有直接或间接包含您的头文件的代码。这可能会导致各种麻烦。我通常会走得更远，说你不应该在任何地方使用它。不是每个人都同意我的观点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T20:18:51.790

没有错误消息，不能说太多。

1）您可能想在 Super_list 中定义一些构造函数，将它们的参数转发给 std::list 构造函数。

2）每次我尝试做这样的事情（或使用这样的事情）时，结果都是一个坏主意。为了保持封装，您可能需要一些全局函数：

```
template<class T>
new_func1(std::list<T> &l)

template<class T>
new_func2(std::list<T> &l) 
```

等等

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T20:22:53.297

我会问你是否真的需要继承来获得额外的功能。尝试使用列表作为班级成员。它不仅会让你的类更容易改变，而且意味着使用你的类的代码不会关心它是否是一个列表。

[这里有更多信息](https://stackoverflow.com/questions/49002/prefer-composition-over-inheritance)

# python - 从 Python 中的多维列表中删除前导零和尾随零

> ID：13633901
> 
> 赞同：5
> 
> 时间：2012-11-29T20:12:37.643
> 
> 标签：python, numpy

我有一个清单，例如：

```
my_list = [[1,2,2,1], [0,0,1,2], [1,2,0,0], [1,0,0,1]] 
```

我只需要从内部列表中删除前导零和尾随零，以便最终得到：

```
new_list = [[1,2,2,1], [1,2], [1,2], [1,0,0,1]] 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-29T20:17:00.043

```
for sub_list in my_list:
    for dx in (0, -1):
        while sub_list and sub_list[dx] == 0:
            sub_list.pop(dx) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-29T20:17:19.530

```
my_list = [[1,2,2,1], [0,0,1,2], [1,2,0,0], [1,0,0,1]]
my_list =[np.trim_zeros(np.array(a)) for a in my_list]
>>> my_list
[array([1, 2, 2, 1]), array([1, 2]), array([1, 2]), array([1, 0, 0, 1])] 
```

如果你想要 numpy.

也可以这样做：

```
>>> my_list =[np.trim_zeros(a) for a in my_list]
>>> my_list
[[1, 2, 2, 1], [1, 2], [1, 2], [1, 0, 0, 1]] 
```

一些时间安排：

```
Numpy
>>> timeit.timeit('my_list =[np.trim_zeros(a) for a in my_list]',setup='import numpy as np; my_list = [[1,2,2,1], [0,0,1,2], [1,2,0,0], [1,0,0,1]]', number=10000)
0.08429217338562012

Numpy w/convert array
>>> timeit.timeit('my_list =[np.trim_zeros(np.array(a)) for a in my_list]',setup='import numpy as np; my_list = [[1,2,2,1], [0,0,1,2], [1,2,0,0], [1,0,0,1]]', number=10000)
0.6929900646209717 
```

所以最好不要在 np.array 进行转换，除非你以后要使用那种类型。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-29T20:15:14.150

```
new_list = [map(int,"".join(map(str,x)).strip("0")) for x in my_list] 
```

可能有用

```
>>> new_list = [map(int,"".join(map(str,x)).strip("0")) for x in my_list]
>>> new_list
[[1, 2, 2, 1], [1, 2], [1, 2], [1, 0, 0, 1]] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-29T22:08:22.627

使用单个列表推导，并通过过滤生成器推导进行切片：

```
new_list = [l[next((i for i, n in enumerate(l) if n != 0), 0):
              next((len(l) - i for i, n in enumerate(reversed(l)) if n != 0), 0)]
            for l in my_list] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-29T20:28:29.163

使用`regex`和`itertools.chain()`：

```
In [91]: my_lis=[[1,2,2,1], [0,0,1,2], [1,2,0,0], [1,0,0,10]]

In [92]: my_lis1=[[y.split() for y in filter(None,re.split(r"\b\s?0\s?\b",
                                     " ".join(map(str,x))))] for x in my_lis]

In [93]: [map(int,chain(*x)) for x in my_lis1]
Out[93]: [[1, 2, 2, 1], [1, 2], [1, 2], [1, 10]] 
```

# winjs - 对于 WinJS 承诺，它的“进度”回调函数多久被调用一次？

> ID：13633902
> 
> 赞同：1
> 
> 时间：2012-11-29T20:12:38.210
> 
> 标签：winjs

在进行返回 Promise 的异步 WinJS 调用时，Promise 的进度回调函数多久被调用一次？考虑以下代码：

```
WinJS.xhr({ url: "http://localhost:51299/api/values" }).done(

    function complete() {
        console.log("complete: " + new Date().getTime());
    },

    function error() {
    },

    function progress() {
        console.log("progress: " + new Date().getTime());
    }

); 
```

当我运行此代码时，我会看到**progress:** message 每毫秒多次，总体而言，我可能会看到**progress:** message 在从 xhr 调用中获取所有数据所需的 1-2 秒内 100-200 次。

1.  进度函数是否在设定的时间间隔内被调用，如果是，那么该时间间隔是多少？
2.  让它频繁运行是性能问题吗？
3.  使用某种计时器功能将其限制为较少运行是更好的做法，还是影响微不足道？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T20:15:30.170

进度回调由 Promise 的来源决定——在本例中是 XHR 系统。当他们出来时，你无法控制。在这种情况下，XmlHttpRequest 正在更新进度。没有整体控制，这完全取决于异步操作何时以及是否发生进度更新。

如果您发现性能影响，您应该考虑限制您对进度更新的响应，但通常很难说该怎么做，这取决于您的应用程序。

# solr - 如何将 apache solr(4.0) 集成到 Websphere 中现有的 spring mvc web 应用程序

> ID：13633904
> 
> 赞同：1
> 
> 时间：2012-11-29T20:12:42.330
> 
> 标签：solr

我可以通过将 solr 分发中的文件夹手动复制到我的网络应用程序中来做到这一点。但我觉得应该有一个巧妙的方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T19:19:42.840

我可以按照以下步骤进行。

Step-1：在 pom.xml 中添加所需的 jars 依赖项，如下所示。

```
 <solr.version>4.0.0</solr.version>
    <dependency>
        <groupId>org.apache.solr</groupId>
        <artifactId>solr-core</artifactId>
        <version>${solr.version}</version>
        <exclusions>
            <exclusion>
                <artifactId>slf4j-jdk14</artifactId>
                <groupId>org.slf4j</groupId>
            </exclusion>
            <exclusion>
                <artifactId>jcl-over-slf4j</artifactId>
                <groupId>org.slf4j</groupId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>org.apache.solr</groupId>
        <artifactId>solr-solrj</artifactId>
        <version>${solr.version}</version>
    </dependency>
    <dependency>
        <groupId>org.apache.solr</groupId>
        <artifactId>solr-velocity</artifactId>
        <version>${solr.version}</version>
    </dependency>
    <dependency>
        <groupId>org.apache.solr</groupId>
        <artifactId>solr-dataimporthandler</artifactId>
        <version>${solr.version}</version>
    </dependency>
    <dependency>
        <groupId>org.apache.maven.indexer</groupId>
        <artifactId>indexer-core</artifactId>
        <version>${solr.version}</version>
    </dependency> 
```

步骤 2：在 web.xml 中添加以下映射

```
 <env-entry>
        <env-entry-name>solr/home</env-entry-name>
        <env-entry-value>C:\Sadhana\apache-solr-4.0.0\example\example-DIH\solr</env-entry-value>
        <env-entry-type>java.lang.String</env-entry-type>
    </env-entry>
    <filter>
        <filter-name>SolrRequestFilter</filter-name>
        <filter-class>org.apache.solr.servlet.SolrDispatchFilter</filter-class>
        <init-param>
            <param-name>Context of my webapp</param-name>
            <param-value>2</param-value>
        </init-param>
    </filter>

    <filter-mapping>
        <filter-name>SolrRequestFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <servlet>
        <servlet-name>Zookeeper</servlet-name>
        <servlet-class>org.apache.solr.servlet.ZookeeperInfoServlet</servlet-class>
    </servlet>

    <servlet>
        <servlet-name>LoadAdminUI</servlet-name>
        <servlet-class>org.apache.solr.servlet.LoadAdminUiServlet</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>RedirectOldAdminUI</servlet-name>
        <servlet-class>org.apache.solr.servlet.RedirectServlet</servlet-class>
        <init-param>
            <param-name>destination</param-name>
            <param-value>${context}/</param-value>
        </init-param>
    </servlet>

    <servlet>
        <servlet-name>RedirectOldZookeeper</servlet-name>
        <servlet-class>org.apache.solr.servlet.RedirectServlet</servlet-class>
        <init-param>
            <param-name>destination</param-name>
            <param-value>${context}/zookeeper</param-value>
        </init-param>
    </servlet>

    <servlet>
        <servlet-name>RedirectLogging</servlet-name>
        <servlet-class>org.apache.solr.servlet.RedirectServlet</servlet-class>
        <init-param>
            <param-name>destination</param-name>
            <param-value>${context}/~logging</param-value>
        </init-param>
    </servlet>

    <servlet-mapping>
        <servlet-name>RedirectOldAdminUI</servlet-name>
        <url-pattern>/admin</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>RedirectOldZookeeper</servlet-name>
        <url-pattern>/zookeeper.jsp</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>RedirectLogging</servlet-name>
        <url-pattern>/logging</url-pattern>
    </servlet-mapping>

    <servlet-mapping>
        <servlet-name>Zookeeper</servlet-name>
        <url-pattern>/zookeeper</url-pattern>
    </servlet-mapping>

    <servlet-mapping>
        <servlet-name>LoadAdminUI</servlet-name>
        <url-pattern>/admin.html</url-pattern>
    </servlet-mapping>

    <mime-mapping>
        <extension>.xsl</extension>
        <mime-type>application/xslt+xml</mime-type>
    </mime-mapping> 
```

第 3 步：将 solr 发行版的 solr-webapp 中的以下目录添加到我的 webapp 中。1.css 2.img 3.js 4.tpl 5.admin.html、favicon.ico、Thumbs.db

Step-4：从目录修改以下solr配置 - apache-solr-4.0.0\example\example-DIH\solr 1.solr.xml 2.solrconfig.xml 3.schema.xml 4.db-data-config .xml 步骤 5：重新启动 websphere 并添加 webapp 并使用您的服务器 ipaddress:9080/contextwebapp 访问 solr url 这将打开 solr 的管理页面

# apache - RewriteCond 动态到静态 url 不起作用

> ID：13633914
> 
> 赞同：1
> 
> 时间：2012-11-29T20:13:09.697
> 
> 标签：apache, .htaccess, mod-rewrite

我尝试更改我当前的 URL：

www.mypage.de/?section=messages&sub=received

到这个网址：

www.mypage.de/messages/received

我试过这个：

```
DirectoryIndex index.php
<IfModule mod_rewrite.c>
Options +FollowSymLinks
RewriteEngine On
RewriteRule $1/(.*)/ /?section=$1
</IfModule> 
```

但没有效果。

谢谢费边

# .net - PadRight(Int32, char) 问题

> ID：13633919
> 
> 赞同：0
> 
> 时间：2012-11-29T20:13:39.903
> 
> 标签：.net, winforms, visual-c++, c++-cli

我正在尝试创建一个 46 长的 ascii 字符串/数据包，通过串行发送出去。

标头是“###”，后跟两个 16 字符的 ascii 字符串，然后是表示二进制字节的 8 字符 acii 字符串。
然后用一个 3 字节的校验和来完成。

总长度为 46 字节。

我的问题是两个方面。

首先，如果两个 16 字节字符串已满，则在它们后面添加一个空格。

其次，如果 16 字节文本窗口未满，我想用空格字符填充剩余的空间。这样，数据包将始终是固定长度。

我正在尝试使用 PadRight(Int32,char) 但它不会向字符串添加任何内容。最终发生的是，当代码尝试添加校验和时，它超出了范围，因为数据包太小而没有额外的填充。

当我构建它时，它不会抛出任何错误，但显然我做错了什么。

这是不起作用的代码片段。

```
TxPacket="###";
         TxText1=txtSerialTx1->Text;
         TxText2=txtSerialTx2->Text;

         TxText1=TxText1->Replace("\r\n","");  // stripping out CR and LF
         TxText2=TxText2->Replace("\r\n","");

         if((TxText1->Length) < 16)           // Checking for valid length
            {
                TxText1->PadRight((16-(TxText1->Length)),'S');
            }
         if((TxText2->Length) < 16)
            {
                TxText2->PadRight((16-(TxText2->Length)),'S');
            }

         TxPacket="###"+ TxText1 + TxText2 + TxLed;

    for(int i=3;i<40;i++)
        {
            iChecksum+= TxPacket[i];
        }

    TxPacket+=(iChecksum%1000);

         serialPort1->Write(TxPacket); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T20:38:39.527

在玩了更多之后发现了我的问题。我没有意识到填充的长度是一个固定值，C++ 会为我计算要插入的空格数，所以我正在手动计算偏移量。
还注意到我没有将最终结果分配回字符串。MSDN 有一个示例，该示例与代码内联完成，因此他们没有重新分配值。

# mfc - 更改 MDI 状态栏中的字体大小？

> ID：13633922
> 
> 赞同：1
> 
> 时间：2012-11-29T20:13:43.950
> 
> 标签：mfc, statusbar, font-size

我创建了一个带有状态栏的简单 MFC MDI 文档/视图应用程序。状态栏的字体太小了，不适合我的口味，所以我想让状态栏更高，并在状态栏中使用更大的字体。我无法弄清楚如何做这些。

有一个虚函数 CMFCStatusBar::CalcFixedLayout(BOOL, BOOL bHorz) （我认为）它使用状态栏的当前字体来设置栏的高度，所以可能需要做的就是更改字体。我怎样才能做到这一点？

64 位 Windows 7、Visual Studio 2010、本机 C++

# nfc - 默认 NFC 命令

> ID：13633923
> 
> 赞同：1
> 
> 时间：2012-11-29T20:13:51.617
> 
> 标签：nfc

我试图弄清楚如何对 NFC 标签进行编码，以便它在启用 NFC 的设备上引发默认行为，类似于此 youtube 视频中描述的内容： [http ://www.youtube.com/watch?v=HQFrQLpxhno](http://www.youtube.com/watch?v=HQFrQLpxhno)

我的假设是 NFC 标签必须包含监听设备的指令，以使用它可以跟踪链接的任何方式（？）......我当然在猜测，但这是有道理的。我更大的问题是我在哪里可以找到通过 NFC 可以使用哪些默认命令的完整规范。

TIA

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T20:58:47.833

[您可以在http://www.nfc-forum.org/specs/spec_list/#tagtypes](http://www.nfc-forum.org/specs/spec_list/#tagtypes)找到各种类型 NFC 标签的命令规范

支持 NFC 的设备可能响应的消息类型在[http://www.nfc-forum.org/specs/spec_list/#rtds中有详细说明](http://www.nfc-forum.org/specs/spec_list/#rtds)

# c++ - 有没有一种好方法可以在 C++ 中生成代码以通过网络发送函数参数？

> ID：13633926
> 
> 赞同：1
> 
> 时间：2012-11-29T20:14:05.047
> 
> 标签：c++, annotations, auto-generate

我需要一些可以添加到任意函数或函数调用的东西（如注释、反射、定义或完全不同的东西）。

对于添加了这个东西的每个函数`f`，都`t`应该使用 的参数调用一个特定的函数`f`。

该函数`t`现在应该通过网络将其参数发送到其他程序。

有没有办法做这样的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T20:25:28.423

这背后的一般原则称为`marshalling`，其中函数的参数以您可以将它们发送到其他计算机的方式包装。发送方编组参数，接收方解组。两者都需要了解类型，并且必须以与不同计算机体系结构一致的方式进行。

远程过程调用 (RPC) 是将函数调用从一台计算机发送到另一台计算机的一种方式，并且需要在它们后面进行一些编组。

正如 Victor 所指出的，XMLRPC 是一种实现方式，其中编组通过 XML 进行。还有很多其他的包，谷歌搜索 RPC 和编组应该提供更多可能性，但 XMLRPC 可能正是您想要的。

CORBA 和 DCOM 是相关的机制。在计算机之间发送函数调用的想法是分布式系统中的一个主要概念，所以也许再看一看，可能有非常简单的解决方案来解决您的具体问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T20:17:41.197

如果您只想调用远程机器上的函数，[XMLRPC库可能是您正在寻找的库。](http://xmlrpc-c.sourceforge.net/)它使用 XML RPC 规范生成用于编组参数的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T20:30:13.397

您可以为此使用 Google 协议缓冲区：[https ://developers.google.com/protocol-buffers/docs/overview](https://developers.google.com/protocol-buffers/docs/overview)

它是一个易于使用且可移植的序列化库。此外，您将能够编写能够以不同语言（如 Python、Java 等）与您的 C++ 代码“对话”（反序列化由您的 C++ 代码序列化的对象）的程序，这非常有用，例如便于测试.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T21:02:17.070

如果您在 Linux/BSD 环境中，请执行“man rpcgen”。我发现使用 DCE/CORBA 构建分布式应用程序更容易。

让我们为您尝试做的事情命名，“进程间函数调用”或 IFC。

我一直在研究 IFC 编译器 (ifcc)，用于生成可扩展的云应用程序，并在应用程序中内置基于浏览器的实时可见性。

原型编译器正在工作。框架的可见性部分也在工作，但尚未集成到编译器中以生成检测代码。

Ifcc 将 C 包含文件作为其输入，并基于 .h 文件中的函数原型声明，生成用于编组的 C 源代码，以及适用于异构（负责字节顺序）的客户端和服务器代理/存根/big endian/little endian) 环境。

而且，哦，顺便说一句，ifcc 是一个智能编译器。它不仅处理数组、typedef、嵌套结构等，而且还进行任意指针追踪。例如，如果您使用指向双向链表的指针调用函数，它将打包、发送并在接收端重新创建双向链表。

如果人们有兴趣使用它，请添加一条注释，其中包含您系统的“uname -a”输出以及您正在使用的编译器。如果有很多兴趣，我可以让开发人员学习/玩/实验。

# jquery - 使用 jQuery 和 AJAX 的 Rails 表单的路由错误

> ID：13633929
> 
> 赞同：0
> 
> 时间：2012-11-29T20:14:09.463
> 
> 标签：jquery, ruby-on-rails, ajax

我正在尝试使用 jQuery 和 AJAX 将表单发布到 Rails 控制器，但是出现此错误：

```
Started GET "/subscription_mails/14/create_recipients?utf8=%E2%9C%93&_method=put&authenticity_token=8HtssDY3kxnRlplQbBGlpUspL5ZLq4PqdgiiL5d73yQ%3D&group_ids%5B%5D=3&subscription_mail%5Btarget_users%5D=0&subscription_mail%5Btarget_owners%5D=0&subscription_mail%5Btarget_teachers%5D=0&subscription_mail%5Btarget_teachers%5D=1&subscription_mail%5Btarget_subscribers%5D=0" for 127.0.0.1 at 2012-11-29 19:59:47 +0000

ActionController::RoutingError (No route matches [GET] "/subscription_mails/14/create_recipients"):
  actionpack (3.2.3) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.3) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.3) lib/rails/rack/logger.rb:16:in `call'
  quiet_assets (1.0.1) lib/quiet_assets.rb:20:in `call_with_quiet_assets'
  actionpack (3.2.3) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.1) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.3) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.1) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/static.rb:62:in `call'
  airbrake (3.0.9) lib/airbrake/user_informer.rb:12:in `call'
  railties (3.2.3) lib/rails/engine.rb:479:in `call'
  railties (3.2.3) lib/rails/application.rb:220:in `call'
  railties (3.2.3) lib/rails/railtie/configurable.rb:30:in `method_missing'
  rack-block (0.1.1) lib/rack/block.rb:47:in `call'
  rack (1.4.1) lib/rack/content_length.rb:14:in `call'
  railties (3.2.3) lib/rails/rack/log_tailer.rb:14:in `call'
  thin (1.3.1) lib/thin/connection.rb:80:in `block in pre_process'
  thin (1.3.1) lib/thin/connection.rb:78:in `catch'
  thin (1.3.1) lib/thin/connection.rb:78:in `pre_process'
  thin (1.3.1) lib/thin/connection.rb:53:in `process'
  thin (1.3.1) lib/thin/connection.rb:38:in `receive_data'
  eventmachine (0.12.10) lib/eventmachine.rb:256:in `run_machine'
  eventmachine (0.12.10) lib/eventmachine.rb:256:in `run'
  thin (1.3.1) lib/thin/backends/base.rb:61:in `start'
  thin (1.3.1) lib/thin/server.rb:159:in `start'
  rack (1.4.1) lib/rack/handler/thin.rb:13:in `run'
  rack (1.4.1) lib/rack/server.rb:265:in `start'
  railties (3.2.3) lib/rails/commands/server.rb:70:in `start'
  railties (3.2.3) lib/rails/commands.rb:55:in `block in <top (required)>'
  railties (3.2.3) lib/rails/commands.rb:50:in `tap'
  railties (3.2.3) lib/rails/commands.rb:50:in `<top (required)>'
  script/rails:6:in `require'
  script/rails:6:in `<main>' 
```

我不确定为什么会收到此错误，因为我在路由中定义了路径。这是我的表格：

{ :id => "邮件格式", :method => :put } 做 |f| %>

这是我的路线文件中的代码：

```
 resources :subscription_mails do
    put 'create_recipients' => "subscription_mails#create_recipients"
  end 
```

这是我的 jQuery：

```
$('#save-config').click(function(){
  $.ajax({
    url: $('form#mail-form').attr('action'), //sumbits it to the given url of the form
    data: $('form#mail-form').serialize(),
    dataType: "JSON" // you want a difference between normal and ajax-calls, and json is standard
  }).success(function(json){
  //act on result.
  });
  return false; // prevents normal behaviour
}); 
```

我正在努力解决这个问题，非常感谢一些帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T20:28:28.790

看起来您的 AJAX 请求使用的是 GET 动词（默认），而不是 PUT，这是您在路由中定义的。运行`rake -T`以确认所需的方法和路径，然后在您的 AJAX 中，`type: 'PUT',`在某处添加。

# git - 如何从我的 github 存储库中删除子模块？

> ID：13633930
> 
> 赞同：2
> 
> 时间：2012-11-29T20:14:10.480
> 
> 标签：git, github, git-submodules

我碰巧更改了本地存储库中的目录名称，然后继续将此更改推送到我的 github 存储库。实际上，它导致这个存储库变成了一个 git 子模块，它在 github 上显示为一个绿色图标，并且无法深入到目录中查看单个文件。

如何从 github 中删除子模块？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T21:00:45.323

将目录作为文件删除。

```
git rm --cached path/to/directory 
```

请注意，您不要使用尾部斜杠。这将删除指向子存储库中提交的特殊文件。

在将目录重新添加到索引之前，请删除 /path/to/directory 中的 .git 文件夹。

# android - 从 C 到 Java 返回一个 long 数组

> ID：13633937
> 
> 赞同：1
> 
> 时间：2012-11-29T20:14:32.367
> 
> 标签：android, c, android-ndk

如何将 C 中的一个数组（表示为`long *val`）返回给 Java 代码？

如果无法以这种方式执行此操作，我还能如何将数组返回给 Java？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:40:00.750

您需要的不仅仅是 log *val，还需要 C 数组中的项目数。然后，您只需将其转换为该大小的数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T20:42:53.997

首先，在 C 中不能返回数组类型。在您的问题中，您指的是“C 中的一个数组，表示为 long *val”。那不是数组。你应该知道，`long *`是一个*指向 long*的指针。那么，为什么这很重要？因为你要返回一个指针。不是数组。这意味着您需要确保在用户尝试引用它时分配指针指向的内存。C 中的一个常见错误是返回指向在自动存储中分配的内存（即在函数本身的堆栈帧中）的指针。这是错误的。如果您从函数返回一个指针，则该指针应指向以下任一内存： 在该函数上方的堆栈帧上，因此我们知道它仍在分配，例如在`main()`，分配的静态内存（例如全局数组），或在堆上分配的内存（例如返回的内存`malloc()`）。

免责声明：上面使用的堆、堆栈和其他术语与标准 C 完全*无关*。出于实际目的，我假设它们存在，但出于您的目的，请尝试理解您不应该指向的内存't 那里然后取消引用你的指针。

现在，由于这与 JNI 和 Java 有关，因此存在一些问题。首先，Java 数组在内存中的布局方式与 C 中的数组不同。在 Java 中，不能保证数组的元素会连续存储。我认为还有无数其他问题，但我并不完全是该领域的专家。

那么，解决方案是什么？

选择一种方法。您要么必须按照[本文所述将 long 数组复制到 Java jLongArray 中](https://stackoverflow.com/questions/2354058/copying-c-array-into-java-array-using-jni)，要么设计一个 API 来访问您在 C 中从 Java 分配的内存。

但是，没有选择将指向数组的指针返回到 Java 中并仅以 C 风格访问它。Java 没有指针，Java 也不是 C。

# c# - 数据包可靠性多线程错误

> ID：13633938
> 
> 赞同：0
> 
> 时间：2012-11-29T20:14:34.127
> 
> 标签：c#, multithreading, sockets, udp, reliability

好的，我需要一些帮助。当一个需要可靠性的数据包被发送出去时，它会被传递到 ReliabilityLayer。ReliabilityLayer 从那里将该数据包添加到列表中，然后将其一次写入 SocketLayer。ReliabilityLayer 然后产生一个有 2 个定时器的线程。当数据包仍在列表中时，第一个计时器每 250 毫秒连续将数据包发送到 SocketLayer。第二个定时器是超时时间。它在 2 秒后抛出异常。ReliabilityLayer 挂钩到数据包接收事件，当返回的 ACK 数据包包含 ReliabilityLayer 数据包列表中数据包的校验和时，它应该将其删除以允许线程退出。问题是多线程......跨线程访问列表会给我随机空指针和其他问题。所以我要么以某种方式使其线程安全，要么重新考虑整个事情。我想知道是否有人可以帮助我？谢谢

```
public void Write(NetworkPacket packet, ClientInfo client, Action<byte[], EndPoint> action)
        {
            if (CSL)
                throw new Exception("ReliabilityLayer loaded for client use.");

            if (!packet.Command.RequiresReliability())
                throw new ArgumentException("Packet does not require reliability.");

            //Add the packet to the reliability list
            packetList.Add(packet);

            //Send the packet to the socket layer.
            action.Invoke(packet.RawData, client.EndPoint);

            new Thread(() =>
            {
                Stopwatch timeout = new Stopwatch();
                Stopwatch timer = new Stopwatch();
                timer.Start();
                timeout.Start();
                while (packetList.Contains(packet))
                {
                    //Still no response from the remote connection -> send another packet
                    if (timer.ElapsedMilliseconds > 256)
                    {
                        action.Invoke(packet.RawData, client.EndPoint);
                        timer.Restart();
                    }

                    //No response after 2 seconds -> throw exception
                    if (timeout.ElapsedMilliseconds > 2048)
                    {
                        throw new Exception("Client has not responded to the request.");
                    }
                }
            }).Start();
        }

        private void ssl_OnPacketReceived(object sender, ServerPacketEventArgs e)
        {
            if (e.Packet.Command != Command.Ack)
                return;

            //Find matching packet in the packetList
            NetworkPacket packet = packetList.Find(pkt => pkt.Checksum == e.Packet.Data[0]); //e.Packet.Data[0] is the checksum of the packet that was send out.
            if (packet != null)
            {
                //Remove it to allow thread to exit
                packetList.Remove(packet);
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T20:39:25.923

解决问题的最简单方法是使用 lock() 来“保护”任何对 List 的调用。你可以[在这里查看](http://msdn.microsoft.com/en-us/library/c5kehkcz%28v=vs.71%29.aspx)如何操作。
简而言之，解释如下：
您应该按照以下方式“保护”非线程安全操作

```
private object private_obj_to_be_used = new object();

lock(private_obj_to_be_used)
{
   /// not thread safe operation goes here<br/>
} 
```

请注意，您不仅要“保护”插入或删除，还要“保护”读取。或者您可以检查是否有适合您的“并发”课程。

# javascript - 在 AJAX 中获取 URL 变量

> ID：13633943
> 
> 赞同：1
> 
> 时间：2012-11-29T20:14:55.830
> 
> 标签：javascript, ajax, get

> **可能重复：**
> [如何获取查询字符串值？](https://stackoverflow.com/questions/901115/how-can-i-get-query-string-values)

您好，我有一个带有类似 url 的页面

mypage.com?iid=11&pid=1

在那里我运行了一些 ajax 并且需要将 idd 从我的查询字符串传递到这个代码块

```
$.ajax({
dataType : "html" ,
url: "stream.php?iid=[GET iid]&lastComment="+ $(".postedComment:last").attr('id') , 
```

但是我对 JS 的经验不够丰富，无法让我的语法正确。我会用什么代替 [GET iid] 来传递该变量？

```
<?php $_GET['iid'];?> 
```

因为它是一个 JS 文件，所以不能工作。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T20:16:43.463

没有标准的解决方案。每个人都有自己的解决方案。

我个人有时会使用此功能：

```
getUrlParameter = function(name, defaultValue) {
    name = name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");
    var results = new RegExp( "[\\?&]"+name+"=([^&#]*)" )
         .exec( document.location.href );
    if( results == null ) return defaultValue;
    else return decodeURIComponent(results[1]);
}; 
```

像这样 ：

```
$.ajax({
dataType : "html" ,
url: "stream.php?iid="+getUrlParameter('iid')+"&lastComment="+ $(".postedComment:last").attr('id') , 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T20:16:50.860

这是答案

[如何在 JavaScript 中获取查询字符串值？](https://stackoverflow.com/questions/901115/how-can-i-get-query-string-values)

```
function getParameterByName(name)
{
  name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
  var regexS = "[\\?&]" + name + "=([^&#]*)";
  var regex = new RegExp(regexS);
  var results = regex.exec(window.location.search);
  if(results == null)
    return "";
  else
    return decodeURIComponent(results[1].replace(/\+/g, " "));
} 
```

# html - ASP.net 在 html 中分配变量 - 这是正确的使用方式吗

> ID：13633944
> 
> 赞同：0
> 
> 时间：2012-11-29T20:14:57.753
> 
> 标签：html, asp.net, variables, c#-4.0

示例用法

定义背后的代码

```
public string srTitle = "";
public string srDescription = "";
public string srKeywords = ""; 
```

aspx 页面使用情况

```
 <title><%=srTitle %></title>  
  <meta name="keywords" content="<%=srKeywords %>" />
  <meta name="description" content="<%=srDescription %>" /> 
```

这种用法正确吗？还有其他更好，有效或等方式吗？

谢谢

ASP.NET 4，C#

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:17:25.457

没关系。

另一种方法是通过代码隐藏：

[http://www.high-flying.co.uk/c-sharp/Dynamic-META-Tags.html](http://www.high-flying.co.uk/c-sharp/Dynamic-META-Tags.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T20:19:04.427

该方法确实有效，但如果可以，最好在代码隐藏中设置这些值；这将有助于保持您的 ASPX 清洁。

您可以添加元数据，例如：

```
HtmlMeta meta = new HtmlMeta();
meta.Name = "keywords";
meta.Content = srKeywords;
this.Header.Controls.Add(meta);

meta = new HtmlMeta();
meta.Name = "Description";
meta.Content = srDescription;
this.Header.Controls.Add(meta); 
```

和页面标题：

```
Page.Title = stTitle; 
```

# java - 使用 XStream 进行 XML 序列化

> ID：13633949
> 
> 赞同：0
> 
> 时间：2012-11-29T20:15:12.400
> 
> 标签：java, xml, serialization, xstream

我有以下课程：

```
class MMS {
   @XStreamAlias("mouse")
   Mouse mMouse;
   @XStreamAlias("less")
   String  mLess;
   @XStreamAlias("ress")
   int mRess;
}
class Mouse {

   String name;
   int size;
   int rest;    
} 
```

使用 XStream 后，我有以下内容：

```
<MMS>
  <mouse>
    <name>Name</name>
    <size>255</size>
    <rest>1</rest>
  </mouse>
  <less>fine</less>
  <ress>1</less>
<MMS> 
```

请帮我解决问题。我需要有

```
<MMS>
  <name>
  <size>
  <rest>
  <less>fine</less>
  <ress>1</less>
<MMS> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T11:52:03.627

如果您的 java 类如下所示，则可以获得指定的 xml：

```
class MMS {
   String name;
   int size;
   int rest;  
   @XStreamAlias("less")
   String  mLess;
   @XStreamAlias("ress")
   int mRess;
} 
```

您会更新类还是创建一个扩展属性的新类？

# php - 如何计算数组中重复项的出现次数

> ID：13633954
> 
> 赞同：59
> 
> 时间：2012-11-29T20:15:27.173
> 
> 标签：php, arrays, count

我想计算数组中每个重复项的出现次数，并最终得到一个只有唯一/非重复项及其各自出现的数组。

这是我的代码；但我不知道哪里出错了！

```
<?php
$array = array(12,43,66,21,56,43,43,78,78,100,43,43,43,21);

//$previous[value][Occurrence]

for($arr = 0; $arr < count($array); $arr++){

    $current = $array[$arr];
    for($n = 0; $n < count($previous); $n++){
        if($current != $previous[$n][0]){// 12 is not 43 -----> TRUE
            if($current != $previous[count($previous)][0]){
                $previous[$n++][0] = $current;
                $previous[$n++][1] = $counter++;
            }
        }else{  
            $previous[$n][1] = $counter++;
            unset($previous[count($previous)-1][0]);
            unset($previous[count($previous)-1][1]);
        }   
    }
}
//EXPECTED VALUES
echo 'No. of NON Duplicate Items: '.count($previous).'<br><br>';// 7
print_r($previous);// array( {12,1} , {21,2} , {43,6} , {66,1} , {56,1} , {78,2} , {100,1})
?> 
```

* * *

## 回答 #1

> 赞同：172
> 
> 时间：2012-11-29T20:17:37.407

[`array_count_values`](http://php.net/manual/en/function.array-count-values.php)， 请享用 ：-）

```
$array = array(12,43,66,21,56,43,43,78,78,100,43,43,43,21);
$vals = array_count_values($array);
echo 'No. of NON Duplicate Items: '.count($vals).'<br><br>';
print_r($vals); 
```

结果：

```
No. of NON Duplicate Items: 7
Array
(
    [12] => 1
    [43] => 6
    [66] => 1
    [21] => 2
    [56] => 1
    [78] => 2
    [100] => 1
) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-03-14T07:05:24.957

如果你想在没有的情况下尝试，`'array_count_values'` 你可以在这里用一种聪明的方式来做

```
<?php
$input= array(12,43,66,21,56,43,43,78,78,100,43,43,43,21);

$count_values = array();
foreach ($input as $a) {

     @$count_values[$a]++;

}
echo 'Duplicates count: '.count($count_values);
print_r($count_values);
?> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-05-27T21:05:09.823

如果你有一个多维数组，你可以在 PHP 5.5+ 上使用：

```
array_count_values(array_column($array, 'key')) 
```

返回例如

```
 [
   'keyA' => 4,
   'keyB' => 2,
 ] 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-29T20:22:46.000

实际上，我最近编写了一个函数来检查数组中的子字符串，在这种情况下会派上用场。

```
function strInArray($haystack, $needle) {
    $i = 0;
    foreach ($haystack as $value) {
        $result = stripos($value,$needle);
        if ($result !== FALSE) return TRUE;
        $i++;
    }
    return FALSE;
}

$array = array(12,43,66,21,56,43,43,78,78,100,43,43,43,21);

for ($i = 0; $i < count($array); $i++) {
    if (strInArray($array,$array[$i])) {
        unset($array[$i]);
    }
}
var_dump($array); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-07-09T09:46:07.540

您可以使用 foreach 循环来完成。

```
 $arrayVal = array(1,2,3,1,2,3,1,2,3,4,4,5,6,4,5,6,88);
          $set_array = array();
          foreach ($array as $value) {
            $set_array[$value]++;
          }
           print_r($set_array); 
```

输出 ：-

```
 Array( [1] => 3
             [2] => 3
             [3] => 3
             [4] => 3
             [5] => 2
             [6] => 2
             [88] => 1
            ) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-03-20T13:50:20.147

> > 在不使用内置函数的情况下计算 PHP 中数组的重复元素

```
$arraychars=array("or","red","yellow","green","red","yellow","yellow");
$arrCount=array();
        for($i=0;$i<$arrlength-1;$i++)
        {
          $key=$arraychars[$i];
          if($arrCount[$key]>=1)
            {
              $arrCount[$key]++;
            } else{
              $arrCount[$key]=1;
        }
        echo $arraychars[$i]."<br>";
     }
        echo "<pre>";
        print_r($arrCount); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-29T20:29:04.973

PHP 为您提供了一个名为[in_array()](http://php.net/manual/en/function.in-array.php)的神奇函数。

使用您的部分代码，我们将修改循环如下：

```
<?php
$array = array(12,43,66,21,56,43,43,78,78,100,43,43,43,21);
$arr2 = array();
$counter = 0;
for($arr = 0; $arr < count($array); $arr++){
    if (in_array($array[$arr], $arr2)) {
        ++$counter;
        continue;
    }
    else{
        $arr2[] = $array[$arr];
    }
}
echo 'number of duplicates: '.$counter;
print_r($arr2);
?> 
```

上面的代码片段将返回重复项的总数，即*从样本数组*中，43 重复 5 次，78 重复 1 次，21 重复 1 次，然后返回一个不重复的数组。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-08-14T20:20:58.030

您也可以将它与文本项数组一起使用，您将正确获得重复的数量，但 PHP 显示

> 警告：array_count_values()：只能计算 STRING 和 INTEGER 值！

```
$domains = 
array (
  0 => 'i1.wp.com',
  1 => 'i1.wp.com',
  2 => 'i2.wp.com',
  3 => 'i0.wp.com',
  4 => 'i2.wp.com',
  5 => 'i2.wp.com',
  6 => 'i0.wp.com',
  7 => 'i2.wp.com',
  8 => 'i0.wp.com',
  9 => 'i0.wp.com' );

$tmp = array_count_values($domains);
print_r ($tmp);

    array (
      'i1.wp.com' => 2730,
      'i2.wp.com' => 2861,
      'i0.wp.com' => 2807
    ) 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-11-04T13:30:09.720

最简单的解决方案（这就是 PHP 摇滚的地方） -**仅重复**：

```
$r = array_filter(array_count_values($array), function($v) { return $v > 1; }); 
```

并检查：

```
print_r($r); 
```

结果`$r`：

```
[43] => 6
[21] => 2
[78] => 2 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-01-31T08:37:06.827

**此代码将在同一数组中返回重复值**

```
$array = array(12,43,66,21,56,43,43,78,78,100,43,43,43,21);
foreach($arr as $key=>$item){
  if(array_count_values($arr)[$item] > 1){
     echo "Found Matched value : ".$item." <br />";
  }
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-03-08T07:13:05.463

我从谷歌来到这里，寻找一种方法来计算数组中重复项的出现。这是简单的方法：

```
$colors = array("red", "green", "blue", "red", "yellow", "blue");
$unique_colors = array_unique($colors);
// $unique colors : array("red", "green", "blue", "yellow")
$duplicates = count($colors) - count($unique_colors);
// $duplicates = 6 - 4 = 2
if( $duplicates == 0 ){
 echo "There are no duplicates";
}
echo "No. of Duplicates are :" . $duplicates;

// Output: No. of Duplicates are: 2 
```

**array_unique() 如何工作？**

它包含所有重复项。 **例如：** 假设我们有一个数组如下 -

`$cars = array( [0]=>"lambo", [1]=>"ferrari", [2]=>"Lotus", [3]=>"ferrari", [4]=>"Bugatti");`

当您这样做时，`$cars = array_unique($cars);` 汽车将只有以下元素。 `$cars = array( [0]=>"lambo", [1]=>"ferrari", [2]=>"Lotus", [4]=>"Bugatti");`

阅读更多：[https ://www.w3schools.com/php/func_array_unique.asp](https://www.w3schools.com/php/func_array_unique.asp)

希望它对那些从谷歌来到这里寻找一种计算数组中重复值的方法的人有所帮助。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2020-01-29T14:20:36.137

```
$search_string = 4;
$original_array = [1,2,1,3,2,4,4,4,4,4,10];
$step1 = implode(",", $original_array); // convert original_array to string
$step2 = explode($search_string, $step1); // break step1 string into a new array using the search string as delimiter
$result = count($step2)-1; // count the number of elements in the resulting array, minus the first empty element
print_r($result); // result is 5 
```

* * *

## 回答 #13

> 赞同：-2
> 
> 时间：2019-08-13T19:07:52.540

```
 $input = [1,2,1,3,2,4,10];
    //if give string
    //$input = "hello hello how are you how hello";
    //$array = explode(' ',$input);
    $count_val = [];
    foreach($array as $val){
      $count_val[$val]++;
    }
    print_r($count_val);
//output ( [1] => 2 [2] => 2 [3] => 1 [4] => 1 [10] => 1 ) 
```

# dom - 在 HTML DOM 中重新加载 JavaScript

> ID：13633957
> 
> 赞同：0
> 
> 时间：2012-11-29T20:15:43.383
> 
> 标签：dom, reload, innerhtml, getelementbyid

有没有办法在不刷新页面的情况下在 DIV 块中重新加载 JavaScript？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:17:46.923

您可以评估 javascript，例如在字符串中

```
 var script = "..."; 
```

通过调用 eval 函数

```
 eval(script); 
```

# mysql - SQL 查询打破了我们的游戏！（后端服务器满负荷）

> ID：13633959
> 
> 赞同：2
> 
> 时间：2012-11-29T20:15:50.527
> 
> 标签：mysql, sql, amazon-web-services, mysql-workbench, amazon-rds

我们有一个 Facebook 游戏，它将所有持久数据存储在一个大型 Amazon RDS 实例上运行的 MySQL 数据库中。我们的一张桌子大小为 2GB。如果我在该表上运行超过几秒钟的任何查询，我们的游戏执行的任何 SQL 操作都将失败并出现以下错误：

HTTP/1.1 503 服务不可用：后端服务器已满

这显然降低了我们的游戏！

在这些期间，我监控了 RDS 实例上的 CPU 使用率，虽然它确实达到峰值，但它并没有超过 50%。以前我们使用的是较小的实例大小，它确实达到了 100%，所以我希望只在问题上投入更多的 CPU 容量就可以解决它。我现在认为这是打开连接数量的问题。但是，我使用 SQL 才 8 个月左右，所以我不是 MySQL 配置方面的专家。

是否有一些配置设置我可以更改以防止这些查询使服务器超载，或者我应该在我们的游戏启动时不运行它们？

我正在使用 MySQL Workbench 来运行查询。

任何帮助将不胜感激 - 谢谢！

编辑：

这是一个例子....

```
SELECT * 
FROM BlueBoxEngineDB.Transfer 
WHERE Amount = 1000 
AND FromUserId = 4 
AND Status='Complete'; 
```

该表如下所示：

```
TransferId  Started  Status  Expires  FromUserId  ToUserId  CurrencyId  Amount  SessionId

1177    2012-06-04 21:43:18 Added       150001      2           4           1   12156
1179    2012-06-04 21:48:50 ISF         150001      2           4           1   12156
1181    2012-06-04 22:08:33 Added       150001      2           4           25  12156
1183    2012-06-04 22:08:41 Complete    150001      2           4           50  12156
1185    2012-06-04 22:08:46 Added       150001      2           4           200 12156 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:09:39.693

您可能需要调整架构（[添加索引](http://dev.mysql.com/doc/refman/5.0/en/create-index.html)是直接步骤）。

要分析您的情况，您可以访问数据库的 MySQL 慢查询日志，以确定是否存在运行缓慢的 SQL 查询，如果有，每个查询的性能特征。您可以设置“slow_query_log”数据库参数并查询 mysql.slow_log 表以查看运行缓慢的 SQL 查询。请参阅[Amazon RDS 用户指南](http://docs.amazonwebservices.com/AmazonRDS/latest/UserGuide/Appendix.MySQL.CommonDBATasks.html)以了解更多信息。

您可能应该考虑将一些表卸载到[DynamoDB](http://aws.amazon.com/dynamodb/)或[Redis](http://redis.io/)。它们都将给出个位数毫秒的延迟，因此在游戏开发人员中非常受欢迎。你只需要考虑你的[数据结构](http://aws.amazon.com/dynamodb/faqs/#What_is_the_Data_Model)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T11:33:53.217

上的索引`(FromUserId, Amount, Status)`可能会对这个查询有很大帮助。

您可能有更多的查询变体命中此表。为它们中的每一个添加一个索引，最终会使您在表中拥有数十个索引，这可能会带来其他问题。

尝试分析慢查询日志，然后优化最慢的查询（以及使用更多 CPU 百分比的查询）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T01:59:04.257

你真的应该考虑运行一个高可用性 RDS 并设置一个只读副本。这样，您就可以在副本上运行复杂的查询来满足您的需求，而不会干扰生产数据库。

2GB（大小）的数据库实际上并没有那么大。如果您在尝试查询的表上有正确的索引，则不应锁定数据库。

最重要的是 - 如果您不知道它会做什么，请不要在高容量生产数据库上运行查询。从上面的评论中可以清楚地看出您不是一个非常有经验的数据库管理员。没关系。在大容量服务器上工作对您来说绝对是一种学习体验，只是尽量不要让您的课程成为您崩溃服务的地方。同样，这就是为什么在尝试对大型表进行查询之前拥有副本或创建数据库快照并设置测试数据库是一个非常好的主意的原因。

# php - 删除 Drupal CSS

> ID：13633961
> 
> 赞同：0
> 
> 时间：2012-11-29T20:16:02.073
> 
> 标签：php, css, drupal

我希望从我的 drupal 节点中删除系统生成的 css。

这是我的模板中的代码：

```
<?php if (isset($content['field_portrait_image'])) { echo '<div class="portrait-image">'; print render($content['field_portrait_image']); echo '</div>';} ?> 
```

这是正在生成的内容：

```
<div class="landscape-image"><div class="field field-name-field-landscape-image field-type-image field-label-hidden"><div class="field-items"><div class="field-item even"><img typeof="foaf:Image" src="http://logan-net.com/sites/default/files/ktgigpic-mini.png" width="300" height="225" alt="" /></div></div></div></div> 
```

如您所见，那里有 3 个额外的 div 和大量的额外类。我怎样才能让它输出我的模板中的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:35:27.990

我会推荐几种方法。

*   寻找覆盖默认 Drupal 模板的 Drupal 框架主题，并制作好的入门准系统主题。[禅](http://drupal.org/project/zen)对我有好处，但我读过其他的，甚至更简单的，有些允许从头开始。如果您专门寻找 Drupal 7 + HTML5，请查看[此概述](http://www.digett.com/blog/06/29/2011/html5-base-starter-themes-drupal-7)。

*   学习 Drupal 主题的基础知识，以准确了解这些东西是如何工作和相互交互的，官方网站上有很多教程。同时，Nathan Smith（960 网格系统的作者）有一篇很好的文章：[HTML5 in Drupal 7](http://sonspring.com/journal/html5-in-drupal-7)。它解释了模板如何相互覆盖以及如何消除膨胀。

*   检查[主题开发者](http://drupal.org/project/devel_themer)模块。这是它如何工作的[截屏视频。](http://drupal.org/node/209561)（感谢特里的评论。）

*   最后，这个问题确实属于[drupal.stackexchange.com](http://drupal.stackexchange.com)。了解您的网络。实际上，它甚至在[drupal](/questions/tagged/drupal "显示标记为“drupal”的问题")标签描述上也是这么说的。

# c - 将节点添加到二叉搜索树

> ID：13633962
> 
> 赞同：1
> 
> 时间：2012-11-29T20:16:04.990
> 
> 标签：c, nodes, binary-search-tree

**免责声明：这是一个任务。我不是要求明确的代码答案，只是帮助理解我的代码为什么不起作用。**

我正在尝试实现一个基本的二叉搜索树，但我的`_addNode(...)`功能有问题。

这就是问题所在。当我使用调试器浏览我的代码时，我注意到叶节点在两侧（左侧和右侧）无限创建，因此除了创建根之外，叶节点永远不会是`NULL`. 问题是我要求我的程序在找到`NULL`叶子所在的值时创建一个新节点。因此，如果没有任何`NULL`值，就永远不会产生新的叶子，对吧？

我遇到的另一个问题是我的`compare(...)`功能。在调试器中单步执行会显示它会多次迭代函数，但实际上从未返回值。当它返回到调用函数时，它又回到`compare(...)`函数中并无限循环。同样，考虑到我在每个语句中都有有效的返回语句，我不知道为什么会发生这种情况`if`。

这是您可能需要的所有代码。如果我遗漏了什么，请告诉我，我会发布它。

```
struct Node {
    TYPE         val;
    struct Node *left;
    struct Node *right;
};

struct BSTree {
    struct Node *root;
    int          cnt;
};

struct data {
    int number;
    char *name;
};

int compare(TYPE left, TYPE right)
{
    assert(left != 0);
    assert(right != 0);

    struct data *leftData = (struct data *) left;
    struct data *rightData = (struct data *) right;

    if (leftData->number < rightData->number) {
        return -1;
    }
    if (leftData->number > rightData->number) {
        return 1;
    } else return 0;
}

void addBSTree(struct BSTree *tree, TYPE val)
{
    tree->root = _addNode(tree->root, val);
    tree->cnt++;
}

struct Node *_addNode(struct Node *cur, TYPE val)
{
    assert(val != 0);

    if(cur == NULL) {
        struct Node * newNode = malloc(sizeof(struct Node));
        newNode->val = val;
        return newNode;
    }
    if (compare(val, cur->val) == -1) {
        //(val < cur->val)
        cur->left = _addNode(cur->left, val);
    } else cur->right = _addNode(cur->right, val);

    return cur;
} 
```

编辑：添加以下功能

```
int main(int argc, char *argv[])
{
    struct BSTree *tree = newBSTree();

    /*Create value of the type of data that you want to store*/
    struct data myData1;
    struct data myData2;
    struct data myData3;
    struct data myData4;

    myData1.number = 5;
    myData1.name = "rooty";
    myData2.number = 1;
    myData2.name = "lefty";
    myData3.number = 10;
    myData3.name = "righty";
    myData4.number = 3;
    myData4.name = "righty";

    /*add the values to BST*/
    addBSTree(tree, &myData1);
    addBSTree(tree, &myData2);
    addBSTree(tree, &myData3);
    addBSTree(tree, &myData4);

    /*Print the entire tree*/
    printTree(tree);
    /*(( 1 ( 3 ) ) 5 ( 10 ))*/
    return 1;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T20:18:46.333

也许你可以尝试`NULL`在以下设置右和左到右`malloc`：

```
struct Node * newNode = malloc(sizeof(struct Node));
newNode->left = NULL;
newNode->right = NULL; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T20:26:50.170

~~在此处检查此行（或左侧的相应行）：~~

cur->right = _addNode(cur->right, val);

~~如果 cur->right == 0，没关系。但是如果 cur->right != 0，原来坐在那里的节点会被 _addNode 的返回值代替，最终不是一个完整的分支，而只是一个节点。~~

我喜欢使用 memset(newNode, 0, sizeof(struct Node)) 在 malloc 之后显式地将结构中的值设为 0。其他人可能不同意。

# c# - 这是在 C# 中正确使用 GOTO

> ID：13633963
> 
> 赞同：1
> 
> 时间：2012-11-29T20:16:18.517
> 
> 标签：c#, goto

我正在跟踪一些代码，并将一个列表发送到下面，以从列表中删除某些项目。

这是使用 goto 的正确方法吗？甚至有必要吗？难道您不只是将第二个 if 编辑为 else if，然后继续处理列表而不需要 goto 吗？（这是我第一次在 BASIC 之外看到 goto。）

```
public static IList<ClientEntity> FilterNoNeedSendBackToClients(IList<ClientEntity> src)
    {
        if (src == null)
            return null;
    checkAB01:
        for (int i = 0; i < src.Count; i++)
        {
            ClientEntity info = src[i];
            if (info.ProductNumber != null && info.ProductNumber.ToLower().Trim().Length > 0
                    &&
                    info.CancelledByReliantSyncAB01 != null && info.CancelledByReliantSyncAB01.Value == true
                )
            {
                src.Remove(info);
                goto checkAB01;
            }

            if ((info.PartnerContract == null || info.PartnerContract.Trim().Length == 0)
                &&
                (info.ProductNumber == null || info.ProductNumber.Trim().Length == 0))
            {
                src.Remove(info);
                goto checkAB01;
            }
        }
        return src;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T20:26:02.187

LINQ怎么样？

```
public static IList<ClientEntity> FilterNoNeedSendBackToClients(IList<ClientEntity> src)
{
    if (src == null)
        return null;

    return (from info in src.AsEnumerable<ClientEntity>()
            where !(!String.IsNullOrWhiteSpace(info.ProductNumber) &&
                    info.CancelledByReliantSyncAB01 == (bool?)true)
            where !(String.IsNullOrWhitespace(info.PartnerContract) &&
                    String.IsNullOrWhiteSpace(info.ProductNumber))
            select info).ToList();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T20:20:40.040

不，这不是使用 goto 的正确方法，它只是替代不知道如何从列表中正确删除项目的人。（向后迭代以防止跳过元素）

```
public static IList<ClientEntity> FilterNoNeedSendBackToClients(IList<ClientEntity> src)
{
    if (src == null)
        return null;

    for (int i = src.Count - 1; i >= 0; i--)
    {
        ClientEntity info = src[i];
        if (info.ProductNumber != null && info.ProductNumber.ToLower().Trim().Length > 0
                &&
                info.CancelledByReliantSyncAB01 != null && info.CancelledByReliantSyncAB01.Value == true
            )
        {
            src.RemoveAt(i);
        }

        if ((info.PartnerContract == null || info.PartnerContract.Trim().Length == 0)
            &&
            (info.ProductNumber == null || info.ProductNumber.Trim().Length == 0))
        {
            src.RemoveAt(i);
        }
    }
    return src;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T20:20:49.417

我认为编写此代码的人不知道如何从迭代集合中删除项目。这些 goto 的原因是，一旦删除了一个项目，集合就会变小，这可能会导致迭代错误。

更好的做法是执行反向 for 循环。这样您就不必在删除后重复整个列表。下面的代码可以正常工作。

```
for (int i = src.Count - 1; i >= 0; i--) {
    src.Remove(src[i]);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-29T20:21:24.393

正如其他人所说，这是一个不好的用法`goto`（如果有的话，应该*很少*使用）

但总体而言，实施效率非常低。看起来它从 0..N 循环，直到它删除一些东西，然后从 0..N （现在少 1 个）重新开始，直到它删除一些东西，依此类推。更糟糕的是，`Remove`呼叫*再次*从 0..N 开始，寻找要删除的项目。

如果它没有找到要删除的内容，它会返回。最好只做一个反向循环删除条目`RemoveAt`然后返回。

```
public static IList<ClientEntity> FilterNoNeedSendBackToClients(IList<ClientEntity> src)
{
    if (src == null)
        return null;

    for (int i = src.Count - 1; i >= 0; i--)
    {
        ClientEntity info = src[i];
        if (info.ProductNumber != null && info.ProductNumber.ToLower().Trim().Length > 0
            &&
            info.CancelledByReliantSyncAB01 != null && info.CancelledByReliantSyncAB01.Value == true)
        {
            src.RemoveAt(i);
        }
        else if ((info.PartnerContract == null || info.PartnerContract.Trim().Length == 0)
            &&
            (info.ProductNumber == null || info.ProductNumber.Trim().Length == 0))
        {
            src.RemoveAt(i);
        }
    }

    return src;
} 
```

此外，我添加了一个`elseif`there: 似乎很危险，进行*另一项* `if`可能是真的检查并尝试重新删除相同的项目（尤其是在更改索引之后）。

编辑：如果我们谈论的是可读的可用代码，无论如何我都会将检查移到一个单独的方法：

```
public static IList<ClientEntity> FilterNoNeedSendBackToClients(IList<ClientEntity> src)
{
    if (src == null)
        return null;

    for (int i = src.Count - 1; i >= 0; i--)
    {
        if (ShouldClientNotSendBack(src[i]))
            src.RemoveAt(i);
    }

    return src;
}

private static bool ShouldClientNotSendBack(ClientEntity info)
{
    if (!String.IsNullOrWhiteSpace(info.ProductNumber) && info.CancelledByReliantSyncAB01 == true)
    {
        return true;
    }

    if (!String.IsNullOrWhiteSpace(info.PartnerContract))
    {
        return true;
    }

    return false;
} 
```

甚至可能考虑调整该`ShouldClientNotSendBack`方法和/或名称（甚至可能将两组`if`检查移至具有明确名称的单个方法），但我认为这是一个重大的改进。

EDITx2：事实上，我会强烈考虑使用该方法。该方法显然`IList<ClientEntity>`在接收输入集合时返回了一段时间，这通常会向开发人员传达这是在*创建一个新列表*，而实际上它实际上是在**改变**现有列表并返回相同的列表实例。要么让它返回一个新列表（因此您应该更改循环代码以添加到新列表而不是从现有列表中删除）或删除返回类型，以便更明显的是它正在改变传递的列表参数。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-29T20:22:15.890

正如我在评论中所说，`goto`在 C# 中没有“正确”的使用方式。根据其定义，关键字是杂牌。它是对 C/C++ 的回归，其中包含它作为“以防万一”，如果开发人员想要逐行翻译 ASM 或 BASIC 或其他语言中的程序而没有定义的代码块，隐藏“跳转”习惯于进入他们之间。任何使用它的算法都可以重构为不必这样做，并且生成的算法将更具可读性。

在这种情况下：

```
public static IList<ClientEntity> FilterNoNeedSendBackToClients(IList<ClientEntity> src)
{
    if (src == null)
        return null;

    for (int i = src.Count-1; i>=0; i--)
    {
        ClientEntity info = src[i];
        if (info.ProductNumber != null && info.ProductNumber.ToLower().Trim().Length > 0
                &&
                info.CancelledByReliantSyncAB01 != null && info.CancelledByReliantSyncAB01.Value == true
            )
        {
            src.Remove(info);
            continue;
        }

        if ((info.PartnerContract == null || info.PartnerContract.Trim().Length == 0)
            &&
            (info.ProductNumber == null || info.ProductNumber.Trim().Length == 0))
        {
            src.Remove(info);
            continue;
        }
    }
    return src;
} 
```

正如 Chris Sinclair 的回答所示，由于循环中条件的“非此即彼”隐式结构，这些`continue`语句不是必需的，但我喜欢它们，因为它们向编码人员展示了从那一点到循环结束的任何内容将运行，无需他们阅读其余部分即可确定。

如果您愿意，您可以从前到后遍历列表，如果删除了某个项目，则`i`在继续之前递减，以便循环将保持其在列表中的当前位置。有人可能会说不要这样做，因为对计数器的操作会使算法更难理解（并且因为在每次迭代中确定列表的计数稍慢），但在性能和可读性方面仍然比它好得多`goto`. _

# mysql - 我可以将一列从一个 mysql 表移动到另一个，并用新表的新 id 替换原始列吗？

> ID：13633965
> 
> 赞同：6
> 
> 时间：2012-11-29T20:16:18.683
> 
> 标签：mysql

我的项目正在增长，需要从一个表扩展到两个。

我有帖子，每个帖子都有一个作者。目前作者只是帖子中的一列，但我创建了一个名为作者的新表。我想用作者的所有唯一实例填充新表，**并**用新的作者 ID 替换 posts 表中的作者值。

是否有一些 sql 魔法可以帮助我做到这一点？我的帖子表有 30k 个条目，所以我想避免手动操作；）

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-01T21:37:38.857

1.  创建新表`Authors`。

    ```
    CREATE TABLE Authors (
      author_id INT AUTO_INCREMENT PRIMARY KEY,
      author_name VARCHAR(20)
    ); 
    ```

2.  填充`Authors`来自 的不同作者集`Posts`。

    ```
    INSERT INTO Authors (author_name) 
    SELECT DISTINCT author_name FROM Posts; 
    ```

3.  在 Posts 中添加 author_id 列，该列引用作者。

    ```
    ALTER TABLE Posts ADD COLUMN author_id INT, 
        ADD FOREIGN KEY (author_id) REFERENCES Authors(author_id); 
    ```

4.  `Posts`根据基于每个表中的 author_name 的（低效）连接，使用相应的 author_id 值进行更新。MySQL 支持多表 UPDATE 语法，这不是标准的 SQL，但对于这些情况非常方便。

    ```
    UPDATE Posts JOIN Authors USING (author_name)
    SET Posts.author_id = Authors.author_id; 
    ```

5.  从 Posts 中删除现在冗余的 author_name，并可选择使 author_id 不可为空。

    ```
    ALTER TABLE Posts DROP COLUMN author_name, MODIFY author_id INT NOT NULL; 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T20:21:21.040

我会遵循类似的过程：

1.  创建新表，`table2`
2.  将列添加`table2_id`到`table1`
3.  `table2`通过从中选择填充（更新）`table1`，包括两者`table1.id`（但调用它，`table1_id`以便您仍然拥有自己的单独 id）和`table1.column`您想要的
4.  `table1.table2_id`使用来自的 ids（主键）更新`table2`
5.  `table1_id`删除列`table2`

# c# - NavigationService.navigate 不工作

> ID：13633972
> 
> 赞同：0
> 
> 时间：2012-11-29T20:16:26.860
> 
> 标签：c#, windows-phone-7, nullpointerexception, navigationservice

在登录页面，我检查了有效性并做了一个简单的条件：

```
if (everything is good)
{
    this.NavigationService.Navigate(new Uri("/implementationPage.xaml", UriKind.Relative)); 
} 
```

然后出现指向此方法的错误：

```
private void RootFrame_NavigationFailed(object sender, NavigationFailedEventArgs e)
{
    if (System.Diagnostics.Debugger.IsAttached)
    {
        MessageBox.Show(string.Format("page {0} failed, error: {1}", e.Uri.ToString(), e.Exception.StackTrace));
        e.Handled = true; 
        // A navigation has failed; break into the debugger
        System.Diagnostics.Debugger.Break();
     }
} 
```

有谁知道我为什么会出错？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T11:55:35.533

谢谢卡洛斯，

在网上查了很多资料

[http://dotnetslackers.com/articles/silverlight/Windows-Phone-7-Silverlight-Programming-Navigation-between-Pages.aspx](http://dotnetslackers.com/articles/silverlight/Windows-Phone-7-Silverlight-Programming-Navigation-between-Pages.aspx)

这非常方便。我显然没有完全利用 onNavigatedTo 功能

# objective-c - 我可以在 NSView 子类中实现自定义目标操作吗？

> ID：13633973
> 
> 赞同：1
> 
> 时间：2012-11-29T20:16:36.227
> 
> 标签：objective-c, oop, model-view-controller, ibaction, target-action

我目前有一个自定义视图类，它在窗口上绘制 2d 游戏板表示。

当用户单击板上时，我使用 mouseDown: 事件从鼠标位置计算单元格坐标（我在自定义视图类中执行此操作）。

```
- (void)mouseDown:(NSEvent*)theEvent {

    // Get position of mouse click:
    NSPoint point = [theEvent locationInWindow];
    NSPoint mousePos = [self convertPoint:point fromView:nil];

    // Calculate which cell has been clicked:
    int cellX = mousePos.x / gridSize.width;
    int cellY = mousePos.y / gridSize.height;

} 
```

*（在上面的片段中，'gridSize' 是一个 NSPoint 实例变量，我用它来存储游戏板中每个单元格的高度和宽度）*

我是否可以在我的控制器类中创建可用于发送此信息的 IBAction 样式消息？

我想象这可以工作的方式是：

*   在自定义视图中为单击的坐标声明实例变量。
*   在控制器类中实现一个（IBAction）：
*   使用 (id)sender 指针访问保存坐标的实例变量
*   将 IBAction 链接到界面生成器中的自定义视图

为了尝试这个，我在自定义视图中将“cellX”和“cellY”声明为实例变量。然后我在我的控制器类中实现了以下内容：

```
-(IBAction)cellClicked:(id)sender { 

    [self setCellAtPosX:[sender cellX] PosY:[sender cellY];
} 
```

*（cellX 和 cellY 是实例变量的访问器方法）*

正如我所期望的那样，它并不是那么简单，它不会让我将 IBAction 链接到自定义视图。我的实现方法有什么遗漏吗？

我可以想象，所有这一切都需要某种通知器，它告诉接口构建器在哪里发送目标操作消息——在我的例子中，在 mouseDown: 实现的末尾，但我找不到从哪里开始！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T20:25:39.730

使用委托模式实现这一点可能会更轻松，即在您的板视图上设置一个 IBOutlet 委托属性并让控制器实现此协议。在 Interface Builder 中，您将通过插座链接您的视图和控制器，并且视图将在 mouseDown 实现中调用它的委托方法，例如：

```
- (void)mouseDown:(NSEvent*)theEvent {
   ...
   [self.delegate boardView:self didSelectCellAtX:x Y:y];
} 
```

# asp.net-mvc - Web API 可为空的必需属性需要 DataMember 属性

> ID：13633974
> 
> 赞同：21
> 
> 时间：2012-11-29T20:16:37.880
> 
> 标签：asp.net-mvc, asp.net-web-api, data-annotations

我在 Web API Post 操作上收到以下 VM

```
public class ViewModel
{
    public string Name { get; set; }

    [Required]
    public int? Street { get; set; }
} 
```

当我发帖时，我收到以下错误：

> “ViewModel”类型的属性“Street”无效。标记为 [Required] 的值类型属性也必须标记为 [DataMember(IsRequired=true)] 才能被识别为必需。考虑使用 [DataContract] 来赋予声明类型，使用 [DataMember(IsRequired=true)] 来赋予属性。

似乎错误很明显，所以我只想完全确定当您有一个具有必需可为空属性的类时，需要使用 [DataContract] 和 [DataMember] 属性。

有没有办法避免在 Web API 中使用这些属性？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-01T20:31:53.013

我和你面临同样的问题，我认为这完全是胡说八道。对于值类型，我可以看到这`[Required]`是行不通的，因为值类型的属性不能为空，但是当你有一个可以为空的值类型时，*不应该*有任何问题。但是，Web API 模型验证逻辑似乎以相同的方式处理不可空值和可空值类型，因此您必须解决它。[我在Web API 论坛](http://forums.asp.net/t/1841917.aspx/1)中找到了一种解决方法，并且可以确认它有效：创建一个`ValidationAttribute`子类并应用它而不是`RequiredAttribute`可空值类型的属性：

```
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations;
using System.Web.Mvc;

public class NullableRequiredAttribute : ValidationAttribute, IClientValidatable
{
    public bool AllowEmptyStrings { get; set; }

    public NullableRequiredAttribute()
        : base("The {0} field is required.")
    {
        AllowEmptyStrings = false;
    }

    public override bool IsValid(object value)
    {
        if (value == null)
            return false;

        if (value is string && !this.AllowEmptyStrings)
        {
            return !string.IsNullOrWhiteSpace(value as string);
        }

        return true;
    }

    public IEnumerable<ModelClientValidationRule> GetClientValidationRules(ModelMetadata metadata, ControllerContext context)
    {
        var modelClientValidationRule = new ModelClientValidationRequiredRule(FormatErrorMessage(metadata.DisplayName));
        yield return modelClientValidationRule;
    }
} 
```

NullableRequiredAttribute 正在使用：

```
public class Model
{
    [NullableRequired]
    public int? Id { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T22:41:46.537

我认为您遇到了与此处讨论的相同的问题：

[必需属性的 DataAnnotation](https://stackoverflow.com/questions/12305784/dataannotation-for-required-property)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-19T02:35:11.070

这在 Web Api 2 中已修复。但是，只有当字段是带有 get/set 的属性时，才有意义。

# php - 需要一个简单的 if (empty) php 代码

> ID：13633977
> 
> 赞同：1
> 
> 时间：2012-11-29T20:16:45.163
> 
> 标签：php, wordpress

我正在使用一些 php 来获取特定页面上的标题标签，具体取决于他们当前所在的用户主页。我远非专业的 php 编码器。我想出的是这个。

```
<title>
    <?php $member = get_user(); ?>
    <? wp_title(' | ', 'echo', 'right'); echo $member->member_title; ?>
</title> 
```

这目前正在工作，但我想有一个故障保险，以防它留空。任何人都可以帮助我快速如果（空）这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T20:23:23.060

```
echo (!empty($member->member_title)) ? $member->member_title : "member title was empty"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T20:20:02.613

```
<?php $member = getUser();?>
<?php if(!empty($member->member_title)): ?>
    <title><? wp_title(' | ', 'echo', 'right'); echo $member->member_title; ?></title>
<?php endif;?> 
```

# sql - Access DB 上的 SQL ISNULL() 参数数量错误

> ID：13633980
> 
> 赞同：5
> 
> 时间：2012-11-29T20:17:00.993
> 
> 标签：sql, vb.net, ms-access

我在 Access DB 的 VB 应用程序中有这个查询：

```
 SELECT DISTINCT Specialization, MAX(a.faultZone) AS faultZone, ISNULL(a.faultCount, 0) AS NoOfFaults  FROM Technicians AS t 
    LEFT JOIN 
             ( 
            SELECT DISTINCT Faults.[Type] AS faultType, MAX(Faults.[Zone]) AS faultZone, COUNT(Faults.[Type]) AS faultCount 
            FROM Faults "
            WHERE Faults.[Zone] = 8 " ' this value will be from variable
            GROUP BY Faults.[Type] "
            ) AS a 
    ON (t.Specialization = a.faultType) 
    WHERE t.specialization <> 'None' "
    GROUP BY a.faultCount, t.Specialization 
```

它给出了以下我无法解决的问题......

> “查询表达式'ISNULL（a.faultCount，0'中的函数使用的参数数量错误。”

我想要实现的只是将值设置`NoOFFaults`为零，这意味着特定区域没有故障。

谢谢你

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T20:43:04.333

Just to add my two cents, and while I like the simple syntax of Nz(), if you seek trouble free performance, both IsNull() and NZ() should be avoided in favor of Is Null:
`IIF(a.faultCount Is Null, 0, a.faultCount)`.

See the excellent explanation here: [http://allenbrowne.com/QueryPerfIssue.html](http://allenbrowne.com/QueryPerfIssue.html)

Also, if your tables are in SQL Server or Oracle, using Nz() will force more of the query to be executed locally, with a HUGE performance impact.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-29T20:20:49.073

Microsoft Access 的版本与`IsNull`大多数 SQL 版本不同；[如果值为 NULL，](http://office.microsoft.com/en-us/access-help/isnull-function-HA001228867.aspx)它只返回 TRUE，如果不是，则返回 FALSE 。

您基本上需要使用以下方法构建自己的[`IIF()`](http://office.microsoft.com/en-us/access-help/iif-function-HA001228853.aspx?CTT=1)：

```
IIF(ISNULL(a.faultCount), 0, a.faultCount) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-29T20:27:04.667

我认为您正在寻找 nz 功能

```
Nz(a.faultCount, 0) 
```

如果值为空，将返回 0

# javascript - 使用 googleVis & R 的基于订阅的网站的 Web 开发建议

> ID：13633982
> 
> 赞同：2
> 
> 时间：2012-11-29T20:17:13.527
> 
> 标签：javascript, web-services, r, google-visualization, subscription

我正在开发一个基于订阅的网站，该网站将提供自定义金融交易指标，我需要建议。使用 R 上的 googleVis 包，我每 30 分钟以 .html 格式导出新图表，该格式使用一些有限的 Javascript 来实现交互性。由于易于使用和易于访问的订阅管理插件，我最初考虑使用 Wordpress 作为我的 CMS，但它对 Javascript 的限制使我无法自动完成更新。（我必须每 30 分钟手动更新一次网站）

因此，我现在正在考虑我的其他选择。我在我的 VPS 上短暂尝试过 Joomla，但它似乎也有一些关于 Javascript 的怪癖。我在开发网站方面只有中等经验，因此我将不得不依赖现有产品进行网站建设，尤其是客户订阅管理。

我意识到这是一个非常开放的请求，但我只是从那些比我更有经验的人那里寻找一些方向。任何投入将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T04:30:41.247

这是我的过程的玩具示例供您使用：

请注意，这已更新以适应 wpautop。如果您不从上传的片段中删除所有间距，则 googleVis javascript 会损坏。下面实现了这一点。

## 测试.Rmd

```
# Title

```{r}
suppressPackageStartupMessages(library(googleVis))
# From example(gvisBarchart)
df=data.frame(country=c("US", "GB", "BR"), val1=c(1,3,4), val2=c(23,12,32))
Bar1 <- gvisBarChart(df, xvar="country", yvar=c("val1", "val2"))

```

## GoogleVis Plot

```{r results='asis'}
print(Bar1, "chart")
``` 
```

现在您需要一个将它们组合在一起的脚本，该脚本可以在您的服务器上运行，例如`R /path/to/your/file.r`不要忘记在您的 wordpress 设置中打开 xmlrpc。您还必须记住在您的 wordpress 主题的头部添加对 javascript 库的调用。

## file.r // 计时这个文件！

```
library(RWordPress)
library(knitr)
library(markdown)

# Setup your Wordpress information    

options(WordpressLogin = c('USERNAME'= "YOURPASS"),
WordpressURL = "http://web.address/xmlrpc.php")

knit("/path/to/test.Rmd","/path/to/test.md")
markdownToHTML("/path/to/test.md","/path/to/test.html",fragment.only=TRUE)

tmp <- getRecentPostTitles(100) # Hackish
id <- tmp$postid[which(tmp$title == title)] # Get id of same title post

post <- readLines("path/to/test.html")

# Trim Function Courtesy of 
# http://stackoverflow.com/questions/2261079/whitespace-in-r
trim <- function (x) gsub("^\\s+|\\s+$", "", x)

post <- trim(post) # Dump whitespace
post <- post[-which(post == "")] # remove line breaks to avoid wpautop()  

if(length(id) > 0) {
deletePost(postid)
}

newPost(
    list(
      description=paste(post,collapse="\n"),
      title="Post Title",
    ),
    publish=TRUE) 
```

# java - 使用 OOP 和设计模式创建标准图形构建器

> ID：13633986
> 
> 赞同：4
> 
> 时间：2012-11-29T20:17:26.347
> 
> 标签：java, oop, design-patterns, polymorphism

**这是我公司制作的带有连接表的图表的示例。**

![这是一个带有连接表的折线图示例。](../Images/a16544d5258887e8ae3973937c389370.png)

***更新我的完整想法*** ![在此处输入图像描述](../Images/2add8056c545e27316c47e5ff880d6e0.png)

自从我开始这篇文章以来，我已经有了很多思考，我终于想出了一个我认为使用 Builder 模式是可靠的想法，我想告诉你们你们的想法以及你们认为我可能遇到的问题。首先让我解释一下完整的想法：

我的公司需要某种带有连接表的标准图表，他们可以将其用于所有程序（这将使程序感觉它们都是相似的（它们是））因为这些图表中的大多数都是相似的，所以我想我每次您必须制作新程序或必须将图表放在其他地方时，都可以减轻创建新图表的痛苦。

我的公司主要使用三种不同的图表：

*   条形图
*   折线图
*   饼形图

创建这些图表时，有一些未知变量。

*   图表系列的名称：这是将要显示的名称，这与每个线/条/饼图不同

*   期间：图表数据取自一段时间，一天或一周（每天周一、周二、周三等）一个月（一月、二月、三月、四月等）甚至一天中的某个时间。（晚上 8 点、晚上 9 点） ETC）。

*   图表类型：当然区别在于用户想要查看的图表类型。

最后但并非最不重要的一点是，图表创建之间的唯一区别在于 Piechart 中，pieChart 是 Javafx 中唯一不是从系列创建而是从 Observable 列表创建的图表，因此 pieChartBuilder 必须使用并将数据插入到与其他方式不同。

上图不是 UML 图，它展示了我如何计划我的新程序来表现和调整设计模式，这里是我的想法的演练：

*   GUI：首先，Gui 总是与实际逻辑分离，我没有计划对 GUI 要求任何东西，除了它必须在 JavaFx 中创建并且它必须有一个 Director 类的实例。

*   Director：Director 类是所有动作发生的地方。首先，客户打电话给主管，告诉他他想得到什么类型的图表，他想从什么时间段得到数据，也许他想看到什么样的数据。客户还设置他希望查看数据的时间段（日、周、月、年等）。

然后，Director 获取所有这些数据并将他的统计类实例分类，向该类请求数据，然后 Director 可以将这些数据传递给 Chart builder。

*   统计：然后统计类检查它是否已经包含数据，如果没有，它会为数据库的对象列表分类：

*   数据库：数据库非常简单，它为客户端发送的时间段内的数据（以一天、一周、一个月、一年为基础）创建对象，将它们添加到列表中并将其返回给统计类。

*   （回到）统计类然后计算对象数据并返回给主管。

*   （回到director中）director现在调用chartBuilder来构建一个由客户端指定的类型的图表，带有时间帧（它是一个数组或时间的arraylist，这是客户端可以在director中设置的选项`Director.setStandardTime(time)`）然后，构建器使用从 Director 获得的数据创建图表和表格。然后客户端可以调用 ChartBuilder.getChart() 并将其添加到他的布局中。

这是我的想法。我希望你能对此发表评论。感谢您阅读，我将期待阅读您的所有回复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T07:38:34.207

图形任务最常见的设计模式是装饰器（通常带有[“流利”界面](http://en.wikipedia.org/wiki/Fluent_interface)）、原型/克隆和访问器。这些可能会派上用场。

[Decorator](http://en.wikipedia.org/wiki/Decorator_pattern)：当您想逐步向对象添加属性时。如：

```
final int radius = 100;
// With fluent interface
final Graphic boxedShadedCircle = new Circle(radius, 100, 100).shaded().boxed();
// Without fluent interface
final Graphic nonFLuentBoxedShadedCircle = new Boxed(new Shaded(new Circle(radius, 100, 100))); 
```

[原型/克隆](http://en.wikipedia.org/wiki/Prototype_pattern)：当您希望能够复制某些对象时（复制/粘贴功能）。它基本上是 Clonable 接口。

[访问者](https://stackoverflow.com/questions/11241761/visitor-pattern-adding-new-concreteelement-classes-is-hard/11243391#11243391)：当您想向对象添加功能而不添加到实际对象中的代码时。比如说，如果您的应用程序是可编写脚本的。有关示例，请参见此帖子：[访客模式](http://en.wikipedia.org/wiki/Visitor_pattern)

现在与您的具体解决方案相关：

看起来装饰器将是实施您的第一个解决方案提案的好方法。或者[模板方法](http://en.wikipedia.org/wiki/Template_method_pattern)或某种组合（“将通用图形抽屉与数据对象相结合”）。

对于您的第二个解决方案，[Factory](http://en.wikipedia.org/wiki/Factory_design_pattern)似乎合适。

我不能说哪个最好。这取决于您当地的情况。所有的实现都有优点和缺点，诀窍是选择一个利大于弊的合适的。

更新问题的更新：

ChartBuilder：这应该是设计模式[“Builder”。](http://en.wikipedia.org/wiki/Builder_pattern)这个 dp 是关于以不同方式表示或呈现抽象描述/产品，例如文档描述或数据集。

导演：我是Design pattern [Mediator](http://en.wikipedia.org/wiki/Mediator_pattern)。或[Facade](http://en.wikipedia.org/wiki/Facade_pattern)，取决于意图。如果你正在“隐藏”一堆糟糕的遗留代码，则为 Facade，如果你正在协调几个更现代的类的交互，则为 Mediator。这里有很多灰色地带。如果 Director 还处理与 GUI 的交互（调整大小、隐藏等），那么它肯定是 Mediator。

总体而言，您的结构是模型/查看器/控制器。Director 充当控制器，Statistics 充当模型，chartBuilder 充当查看器。

几种设计模式重叠的情况并不少见，例如让控制器充当中介。

[如果您使用设计模式观察者](http://en.wikipedia.org/wiki/Observer_pattern)将整个事情实现为请求/响应作为响应，而不是作为带有返回值的直接调用，您可能会更快乐。这样更灵活，您可以更好地在线程中隐藏延迟/计算/数据库查找。

您可能希望将[Composite](http://en.wikipedia.org/wiki/Composite_pattern)用于 chartBuilder。如果您想同时拥有多个活动数据视图，而不仅仅是一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T22:05:44.787

看看[EyeSee](http://scg.unibe.ch/archive/projects/Junk07aJunkerHofstetterEyeSee.pdf)，做一个java实现

# c# - 加载对新版本的引用会引发异常，说它正在寻找旧版本

> ID：13633993
> 
> 赞同：1
> 
> 时间：2012-11-29T20:17:45.813
> 
> 标签：c#, assemblies, prism, nuget

我有几个程序集引用了我将 Prism 提取到的目录中的 Prism（版本 4）程序集。我想切换到 NuGet，因此我删除了所有这些引用，并通过 NuGet 安装了包，并选择将包安装到与以前相同的所有程序集中。现在正在引用 Prism 4.1。该解决方案构建良好（清除并重建）。

然后，当我运行应用程序时，一旦它尝试创建使用 Prism 引用的对象，我就会收到“FileLoadException：无法加载文件或程序集‘Microsoft.Practices.Prism.Interactivity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' 或其依赖项之一。定位的程序集的清单定义与程序集引用不匹配”

我验证了 4.1 dll 在我的“bin”文件夹中，所以我知道这些文件存在。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:21:47.387

弄清楚了。从 NuGet 安装包时，我不小心错过了一个程序集。我试图创建的对象所在的程序集正在引用这个程序集。我将 4.1 包安装到另一个程序集，一切都按预期工作。

# java - 迭代Java中的成员变量

> ID：13633996
> 
> 赞同：5
> 
> 时间：2012-11-29T20:17:49.183
> 
> 标签：java, oop, variables, iterator, hashmap

我有几种情况，其中一个类由任意（但固定）数量的不同类型的变量组成，并希望迭代这些变量并在代码中使用它们的名称。有没有比在每个函数中重新键入每个变量名更聪明的方法呢？

我最初的想法是使用 HashMap 来存储局部变量，但这似乎效率低下并且不能处理多种类型。

模拟下面的代码以缩短所需的读数，但通常它的变量超过 3 个：

```
class Widget implements Parcelable {
    String name, code;
    Long price;

    public void writeToParcel(Parcel dest, int flags) {
        dest.writeString(name);
        dest.writeString(code);
        dest.writeLong(price);
    }

    public Widget(Parcel o) {
        name = o.name;
        code = o.code;
        price = o.price;
    }

    public String getXML() {
        return "<Widget><name>"+name+"</name><code>"+code
              +"</code><price>"+price+"</price></Widget>";
    }
} 
```

相反，我更喜欢做类似（伪代码）的事情：

```
public Widget(Parcel o) {
    for (Map<Name,Data> item: o.getMap()) {
        this.setValue(Name, Data);
    }
}
public String getXML() {
    StringBuilder XML = new StringBuilder();
    XML.append("<Widget>");
    for (Map<Name,Data> item: o.getMap()) {
        XML.append("<"+Name+">" + Data + "</"+Name+">");
    }
    XML.append("</Widget>");
    return XML.toString();
} 
```

我一直认为必须有一种模式来做这种事情，但也许这只是我的 Python 历史对我的 Java 经验的影响。

更新：这不仅仅是从成员变量中获取 XML，而是在多个成员函数中循环访问成员变量。看来我的曲目中缺少 Java 的反射功能。

我新的较小的构造函数让我很高兴学到了一些有用的东西，看起来像：

```
public Widget(Widget other) {
    for (Field f : getClass().getDeclaredFields()) {
        if (f.getName() == "TAG") {
            continue;
        }
        f.set(this, f.get(other));
    }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-29T20:21:48.077

这通常通过反射解决：

```
for (Field f : getClass().getDeclaredFields()) {
    String name = f.getName();
    String value = f.get(this);
} 
```

但是，对于写入/读取 XML，您可能希望使用[JAXB](http://jaxb.java.net/)而不是重新发明轮子。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T20:24:34.660

使用杰克逊：

[https://github.com/FasterXML/jackson-dataformat-xml](https://github.com/FasterXML/jackson-dataformat-xml)

序列化的完成与 JSON 序列化非常相似：所有需要更改的只是要使用的 ObjectMapper 实例：

```
// Important: create XmlMapper; it will use proper factories, workarounds
ObjectMapper xmlMapper = new XmlMapper();
String xml = xmlMapper.writeValue(new Simple()); 
```

和 POJO 一样：

```
public class Simple {
    public int x = 1;
    public int y = 2;
} 
```

你会得到类似的东西：

```
<Simple>
  <x>1</x>
  <y>2</y>
</Simple> 
```

（除了默认输出不缩进：您可以使用标准杰克逊机制启用缩进）

从 XML 反序列化 POJO 与序列化类似，反序列化与 JSON 反序列化没有太大区别：

```
ObjectMapper xmlMapper = new XmlMapper();
Simple value = xmlMapper
   .readValue("<Simple><x>1</x><y>2</y></Simple>", Simple.class); 
```

PS您也可以为此使用反射并使用`Class.getDeclaredFields()`. 但根据我的经验，很少有人需要这样做。有很多用于不同目的的 3rd 方开源库，通常仅使用它们是更好的解决方案（例如，在这种特殊情况下为 Jackson）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T20:20:49.527

如果有许多类的代码遵循相同的模式，我会编写一个代码生成器来从某种定义文件生成 Java 源代码。然后你可以让你的生成器像你的第一个例子一样创建简单的代码，这更容易阅读和理解（比使用通用映射或反射或其他东西）。定义文件成为每种对象字段的“官方”来源。

由于您已经熟悉 Python，您的定义文件可以直接构建到 Python 脚本中以创建源代码。例如：

```
Objects = {
    "Widget": [
        (TYPE_STRING, "name"),
        (TYPE_STRING, "code"),
        (TYPE_LONG, "price"),
    ],
    # ...
} 
```

通过适当的定义`TYPE_STRING`等，编写一些代码来生成 Java 源代码应该很简单。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T20:25:26.973

我相信[**XStream**](http://xstream.codehaus.org/)是最简单的框架。参考[**两分钟教程**](http://xstream.codehaus.org/tutorial.html)，你会明白的。

它就像创建一个映射类一样简单，例如`Widget`具有所有成员属性和可能的​​对象嵌套，然后调用：

```
 XStream xstream = new XStream(new DomDriver());
   String xml = xstream.toXML(widgetObject);  // <-- Get XML String from object

   Widget widget = (Widget)xstream.fromXML(xml); //<-- Get object from XML 
```

# jquery - jquery ui切换类功能

> ID：13633999
> 
> 赞同：1
> 
> 时间：2012-11-29T20:18:33.977
> 
> 标签：jquery, jquery-ui, class

我有一堆带有一个类的缩略图容器，然后是其中的两个容器，如下所示：

```
<div id="color_dance" class="thumb">
    <img class="thumb_img" src="http://www.klossal.com/portfolio/tile_dance_color.jpg">
    <div class="thumb_info info_color_2"><p class="tile_info_1"> Space Series</p><p class="tile_info_2">Photoshop, Wacom Tablet</p></div>
</div> 
```

当您单击它时，我想将所有`.thumb_info`元素上的类从 切换`info_color_3`到`info_color_2`除了单击的那个相反，将类从 切换`info_color_2`到`info_color_3`。

这是我想出的 JS，但它不起作用，我不知道为什么。

```
$(".thumb").click(function() {
    $(".thumb_info").not(this).switchClass("info_color_3", "info_color_2", 300);
    $(this).find('.thumb_info').
    function() {
        $(this).switchClass("info_color_2", "info_color_3", 300);
    });
});​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T20:24:51.997

你不能打电话`find('.thumb_info').function()`。你可以调用虽然`.switchClass()`返回的元素`.find()`。

尝试使用这样的代码：

```
$(".thumb").click(function() {
    $(".thumb_info").not(this).switchClass("info_color_3", "info_color_2", 300);

    $(this).find('.thumb_info').switchClass("info_color_2", "info_color_3", 300);
});​ 
```

### [演示](http://jsfiddle.net/sX4Wp/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T20:24:43.103

这个函数我还没用过，但是你忘了“$(this).find('.thumb_info')”之间的“each”吗？和“功能”？

尝试这个：

```
$(".thumb").click(function() {
   $(".thumb_info").not(this).switchClass( "info_color_3", "info_color_2", 300 );
   $(this).find('.thumb_info').each(function() {
     $(this).switchClass( "info_color_2", "info_color_3", 300 );
   });
}); 
```