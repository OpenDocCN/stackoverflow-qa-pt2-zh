# StackOverflow 问答 15865000-15865999

# c - 从 C 中的 fscanf 字符串中删除特殊字符

> ID：15865002
> 
> 赞同：3
> 
> 时间：2013-04-07T16:50:38.750
> 
> 标签：c, scanf

我目前正在使用以下代码扫描文本文件中的每个单词，将其放入变量中，然后对其进行一些操作，然后再转到下一个单词。这很好用，但我正在尝试删除所有不属于的字符，`A-Z / a-z.`例如，如果`"he5llo"`输入了我希望输出为`"hello"`. 如果我无法修改`fscanf`，是否有办法在扫描后对变量进行修改？谢谢。

```
while (fscanf(inputFile, "%s", x) == 1) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T16:55:57.540

你可以给`x`这样的功能。为了便于理解，第一个简单版本：

```
// header needed for isalpha()
#include <ctype.h>

void condense_alpha_str(char *str) {
  int source = 0; // index of copy source
  int dest = 0; // index of copy destination

  // loop until original end of str reached
  while (str[source] != '\0') {
    if (isalpha(str[source])) {
      // keep only chars matching isalpha()
      str[dest] = str[source];
      ++dest;
    }
    ++source; // advance source always, wether char was copied or not
  }
  str[dest] = '\0'; // add new terminating 0 byte, in case string got shorter
} 
```

它将就地遍历字符串，复制匹配[`isalpha()`](http://www.cplusplus.com/reference/cctype/isalpha/)测试的字符，跳过并删除不匹配的字符。要理解代码，重要的是要意识到 C 字符串只是`char`数组，字节值 0 标记字符串的结尾。另一个重要的细节是，在 C 中，数组和指针在许多（不是全部！）方面都是相同的，所以指针可以像数组一样被索引。此外，这个简单的版本将重写字符串中的每个字节，即使字符串实际上没有改变。

* * *

然后是一个功能更全面的版本，它使用作为参数传递的过滤器函数，并且只会在 str 更改时执行内存写入，并`str`像大多数库字符串函数一样返回指向指针：

```
char *condense_str(char *str, int (*filter)(int)) {

  int source = 0; // index of character to copy

  // optimization: skip initial matching chars
  while (filter(str[source])) {
    ++source; 
  }
  // source is now index if first non-matching char or end-of-string

  // optimization: only do condense loop if not at end of str yet
  if (str[source]) { // '\0' is same as false in C

    // start condensing the string from first non-matching char
    int dest = source; // index of copy destination
    do {
      if (filter(str[source])) {
        // keep only chars matching given filter function
        str[dest] = str[source];
        ++dest;
      }
      ++source; // advance source always, wether char was copied or not
    } while (str[source]);
    str[dest] = '\0'; // add terminating 0 byte to match condenced string

  }

  // follow convention of strcpy, strcat etc, and return the string
  return str;
} 
```

示例过滤器功能：

```
int isNotAlpha(char ch) {
    return !isalpha(ch);
} 
```

示例调用：

```
char sample[] = "1234abc";
condense_str(sample, isalpha); // use a library function from ctype.h
// note: return value ignored, it's just convenience not needed here
// sample is now "abc"
condense_str(sample, isNotAlpha); // use custom function
// sample is now "", empty

// fscanf code from question, with buffer overrun prevention
char x[100];
while (fscanf(inputFile, "%99s", x) == 1) {
  condense_str(x, isalpha); // x modified in-place
  ...
} 
```

* * *

参考：

读取[int isalpha ( int c );](http://www.cplusplus.com/reference/cctype/isalpha/) 手动的：

> 检查 c 是否是字母。
> **返回值**：
> 如果 c 确实是字母，则该值不同于零（即 true）。否则为零（即假）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T19:15:50.517

luser droog 回答会起作用，但在我看来，它比必要的复杂。

你的简单例子你可以试试这个：

```
while (fscanf(inputFile, "%[A-Za-z]", x) == 1) {   // read until find a non alpha character
   fscanf(inputFile, "%*[^A-Za-z]"))  // discard non alpha character and continue
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T16:55:09.160

您可以使用该`isalpha()`函数检查字符串中包含的所有字符

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T16:56:18.773

~~`scanf`家庭功能不会这样做。您必须遍历字符串并使用它`isalpha`来检查每个字符。并`memmove`通过向前复制字符串的结尾来“删除”字符。~~

也许`scanf`毕竟可以做到。在大多数情况下，`scanf`如果匹配失败，朋友会将任何非空白字符推回输入流。

此示例`scanf`用作流上的正则表达式过滤器。使用`*`转换修饰符意味着否定模式没有存储目标；它只是被吃掉了。

```
#include <stdio.h>
#include <string.h>

int main(){
    enum { BUF_SZ = 80 };   // buffer size in one place
    char buf[BUF_SZ] = "";
    char fmtfmt[] = "%%%d[A-Za-z]";  // format string for the format string
    char fmt[sizeof(fmtfmt + 3)];    // storage for the real format string
    char nfmt[] = "%*[^A-Za-z]";     // negated pattern

    char *p = buf;                               // initialize the pointer
    sprintf(fmt, fmtfmt, BUF_SZ - strlen(buf));  // initialize the format string
    //printf("%s",fmt);
    while( scanf(fmt,p) != EOF                   // scan for format into buffer via pointer
        && scanf(nfmt) != EOF){                  // scan for negated format
        p += strlen(p);                          // adjust pointer
        sprintf(fmt, fmtfmt, BUF_SZ - strlen(buf));   // adjust format string (re-init)
    }
    printf("%s\n",buf);
    return 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-07T17:03:28.737

我正在做一个类似的项目，所以你得心应手！把这个词分成不同的部分。

空格不是每个单词 cin 的问题 您可以使用

```
 if( !isPunct(x) ) 
```

将索引增加 1，并将该新字符串添加到临时字符串持有者。您可以像数组一样选择字符串中的字符，因此查找那些非字母字符并存储新字符串很容易。

```
 string x = "hell5o"     // loop through until you find a non-alpha & mark that pos
 for( i = 0; i <= pos-1; i++ )
                                    // store the different parts of the string
 string tempLeft = ...    // make loops up to and after the position of non-alpha character
 string tempRight = ... 
```

# .net - 单击一次应用程序的共享 .Net 程序集部署

> ID：15865003
> 
> 赞同：0
> 
> 时间：2013-04-07T16:50:39.410
> 
> 标签：.net, assemblies

我有一组应用程序（总共 8 个）全部部署为单击一次应用程序。当最初的团队开始构建这些应用程序时，架构是他们有一个公共项目，其中包含所有公共 API 和共享控件（它是一个 VB.Net 应用程序），不同的应用程序将使用这个公共项目来构建他们自己的应用程序/gui 等很棒。应用程序部署为单击一次应用程序，部署的文件夹包含应用程序本身和公共项目 dll。因此，每个应用程序的文件夹都包含应用程序和公用程序。部署时未共享公共资源。然而随着时间的推移，当 App1 需要一些修复并且修复是公用的时，它通过修复公用项目并将新修复的公用 dll 与它捆绑在一起来发布。因此，当我继承这套产品时，现在的场景是每个应用程序在其解决方案中都有两个项目，一个是特定应用程序项目，另一个是通用项目。如果我们在公共代码中发现一个错误，我们会进行 8 次更改，尽管 95% 的公共代码是相同的。我想回到我想要的方式。所有应用程序都将在其解决方案中包含/链接的一个通用项目。当我们还部署时，我们将公共 dll 部署在共享位置，所有应用程序都将链接到这个公共 dll。如果我必须对 App1 进行更改并仅发布 App1 并且修复是通用的，那么我应该能够对通用 dll 执行此操作而不会破坏其他 7 个应用程序。这可能吗？我一直在读这本精彩的书 如果我们在公共代码中发现一个错误，我们会进行 8 次更改，尽管 95% 的公共代码是相同的。我想回到我想要的方式。所有应用程序都将在其解决方案中包含/链接的一个通用项目。当我们还部署时，我们将公共 dll 部署在共享位置，所有应用程序都将链接到这个公共 dll。如果我必须对 App1 进行更改并仅发布 App1 并且修复是通用的，那么我应该能够对通用 dll 执行此操作而不会破坏其他 7 个应用程序。这可能吗？我一直在读这本精彩的书 如果我们在公共代码中发现一个错误，我们会进行 8 次更改，尽管 95% 的公共代码是相同的。我想回到我想要的方式。所有应用程序都将在其解决方案中包含/链接的一个通用项目。当我们还部署时，我们将公共 dll 部署在共享位置，所有应用程序都将链接到这个公共 dll。如果我必须对 App1 进行更改并仅发布 App1 并且修复是通用的，那么我应该能够对通用 dll 执行此操作而不会破坏其他 7 个应用程序。这可能吗？我一直在读这本精彩的书 当我们还部署时，我们将公共 dll 部署在共享位置，所有应用程序都将链接到这个公共 dll。如果我必须对 App1 进行更改并仅发布 App1 并且修复是通用的，那么我应该能够对通用 dll 执行此操作而不会破坏其他 7 个应用程序。这可能吗？我一直在读这本精彩的书 当我们还部署时，我们将公共 dll 部署在共享位置，所有应用程序都将链接到这个公共 dll。如果我必须对 App1 进行更改并仅发布 App1 并且修复是通用的，那么我应该能够对通用 dll 执行此操作而不会破坏其他 7 个应用程序。这可能吗？我一直在读这本精彩的书[http://shop.oreilly.com/product/9780735627048.do](http://shop.oreilly.com/product/9780735627048.do)但我仍然不了解整个部署方案。这本书的第 2 章和第 3 章处理了一个类似的问题，我明白了，但仍然不够清楚，无法应用于我的场景以及它是如何在 click once 空间中工作的。任何指针将不胜感激。我将继续阅读这本书并在这里发布我的发现。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T17:07:07.330

您不能使用 ClickOnce 部署共享组件。您实际上必须为每个应用程序重复安装“共享”组件。在部署更新方面，是的，这意味着进行 8 次部署。

# javascript - 对数据执行一系列查询，允许失败

> ID：15865005
> 
> 赞同：2
> 
> 时间：2013-04-07T16:50:46.077
> 
> 标签：javascript, error-handling

我有一些数据需要查询以找到最佳匹配。所以我在一个函数内部有这个，它被传递`el`（数据）。

```
function match(el) {
  return el.find('link:regex(type,application\\/(atom|rss)\\+xml)').attr('href')
    || el.find('meta[name="msapplication-task"]').attr('content').match(/action-uri=(.*?);/)[1]
    || [another query]
    || [another query]
    || [last resort query]
} 
```

使用`||`操作符的问题是，如果任何一个查询导致错误，操作将退出，之后的查询将不匹配。例如，如果没有找到值，第二个查询可能会失败，因为不会有`match`on 方法。`undefined`

我目前已将此函数调用包装在一个`try`语句中以捕获这些错误，但这并不能解决我的问题。我需要捕获每个查询的错误，或者其他允许运行其余查询的错误。

我正在寻找一种优雅的解决方案来针对这些数据运行一组查询。第一个要匹配的查询应该是返回值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T17:02:20.327

这样的事情会好吗？必须检查返回值和所有...

参见 jsFiddle：http: [//jsfiddle.net/vGd46/2/](http://jsfiddle.net/vGd46/2/)

**编辑**：让它大约与 jQuery 一起工作

```
var queries = [
    function(el){return el.find('link:regex(type,application\\/(atom|rss)\\+xml)').attr('href')},
    function(el){return el.find('meta[name="msapplication-task"]').attr('content').match(/action-uri=(.*?);/)[1]}
];
function match(el) {
    var l = queries.length,
        m = false; // match
    while(-1 < --l && !m){
        try{
            m = queries[i](el);
        } catch(err) {
            alert(err);
            // handle
        }
    }
    return m;
}

var el = document.createElement("meta");
el.setAttribute('name','msapplication-task');
el.setAttribute('content','action-uri="one";action-uri="two";');

alert(match($('<div/>').append(el))); 
```

编辑：循环转发（小提琴：http: [//jsfiddle.net/vGd46/3/](http://jsfiddle.net/vGd46/3/)）

```
function match(el) {
    var l = queries.length,
        i = -1,
        m = false; // match
    while(++i < l && !m){
        try{
            m = queries[l](el);
        } catch(err) {
            alert(err);
            // handle
        }
    }
    return m;
} 
```

# c# - 如何检查鼠标指针是否可见？

> ID：15865007
> 
> 赞同：2
> 
> 时间：2013-04-07T16:51:12.500
> 
> 标签：c#, .net

C#.Net 中有没有办法检查鼠标指针是否可见？（例如在触摸设备上）

还是符号类型呢？（指针，加载圈，隐藏）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T16:59:12.850

看看使用[Cursor.Current](http://msdn.microsoft.com/en-us/library/system.windows.forms.cursor.current%28v=vs.110%29.aspx)

> 表示鼠标光标的 Cursor。**如果鼠标光标不可见，则默认值为 null。**

所以像

```
Cursor current = Cursor.Current;

if(current == null)
    //the cursor is not visible
else
    //the cursor is visible 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T16:59:26.167

[根据 MSDN ：](http://msdn.microsoft.com/en-us/library/system.windows.forms.cursor.current%28v=vs.110%29.aspx)

> 属性值 类型：System.Windows.Forms.Cursor 表示鼠标光标的 Cursor。如果鼠标光标不可见，则默认值为 null。

所以这段代码应该可以完成这项工作：

```
If (Cursor.Current == null)
{
    // cursor is invisible
}
else
{
    // cursor is visible
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-04-07T15:16:11.427

我凭经验发现**Cursor.Current == null**并不**表示**光标隐藏状态（Windows 10 Pro、.Net 4.7、Windows.Forms、2020.04.07）。

为了澄清问题，我想检查（未设置）光标隐藏状态，因为这似乎是可靠检测鼠标事件是否由鼠标/触摸板（光标可见）或手指触摸（光标不可见的）。

深入 Win32 调用可以成功检查此状态：

```
#region Cursor info

public static class CursorExtensions {

  [StructLayout(LayoutKind.Sequential)]
  struct PointStruct {
    public Int32 x;
    public Int32 y;
  }

  [StructLayout(LayoutKind.Sequential)]
  struct CursorInfoStruct {
    /// <summary> The structure size in bytes that must be set via calling Marshal.SizeOf(typeof(CursorInfoStruct)).</summary>
    public Int32 cbSize;
    /// <summary> The cursor state: 0 == hidden, 1 == showing, 2 == suppressed (is supposed to be when finger touch is used, but in practice finger touch results in 0, not 2)</summary>
    public Int32 flags;
    /// <summary> A handle to the cursor. </summary>
    public IntPtr hCursor; 
    /// <summary> The cursor screen coordinates.</summary>
    public PointStruct pt; 
  }

  /// <summary> Must initialize cbSize</summary>
  [DllImport("user32.dll")]
  static extern bool GetCursorInfo(ref CursorInfoStruct pci);

  public static bool IsVisible(this Cursor cursor) {
    CursorInfoStruct pci = new CursorInfoStruct();
    pci.cbSize = Marshal.SizeOf(typeof(CursorInfoStruct));
    GetCursorInfo(ref pci);
    // const Int32 hidden = 0x00;
    const Int32 showing = 0x01;
    // const Int32 suppressed = 0x02;
    bool isVisible = ((pci.flags & showing) != 0);
    return isVisible;
  }

}

#endregion Cursor info 
```

客户端代码现在非常方便：

```
bool isTouch = !Cursor.Current.IsVisible(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-07T16:59:44.260

您可以使用`System.Windows.Forms.Cursor`类来获取信息；

使用`Cursor.Current`属性！

```
if (Cursor.Current == null)
{
    //
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-07T17:04:32.503

如果您谈论的是 WPF 变体，那么框架元素的 Cursor 属性应该是`None`如果它不可见。

# gnuplot - 我不知道如何使用 gnuplot 数据文件

> ID：15865011
> 
> 赞同：0
> 
> 时间：2013-04-07T16:51:21.693
> 
> 标签：gnuplot

我有一个任务，我必须从库中执行一个函数，我的版本在 3 个架构上，nehalem、opteron 和 quad。我已经为每个架构获得了我的运行时间，以及实际功能的运行时间。现在我必须用 gnuplot 创建一些图来比较它们，但我不知道如何使用它。我需要一些帮助来设置数据文件以及 plot 命令的外观。假设我有这个数据文件（不知道如何写它工作）：

N=10000（这是矩阵的顺序）

对于 nehalem ： my_time cblas_tyme optimize_time

对于 opteron：my_time cblas_time optimize_time

对于四边形：my_time cblas_timeoptimized_time。

这应该会导致显示在具有不同功能的所有架构上计算 10000x10000 矩阵所需的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T17:22:39.453

似乎您想绘制条形图。

数据文件示例：

```
"my_time nehalem" 100 
"cblas_tyme nehalem" 120
"optimized_time nehalem" 100 
"my_time opteron" 200
"cblas_tyme opteron" 222
"optimized_time opteron" 202
"my_time quad" 103
"cblas_tyme quad" 100
"optimized_time quad" 99 
```

您可以使用以下方法绘制此图：

```
plot "data.dat" using 2:xtic(1) with histogram 
```

有关更多直方图示例，[请](http://gnuplot.sourceforge.net/docs_4.2/node249.html)参阅[此处](http://gnuplot.sourceforge.net/demo/histograms.html)，了解更多信息。

**编辑：**

针对您的评论，您可能希望使用类似于以下的数据文件（例如 data.dat）：

```
N simple-quad simple-nehalem simple-opteron alt-quad alt-nehalem alt-opteron
10000 2  3  3  2  7  7  
15000 5  4  4  7  14 14 
20000 10 12 12 15 17 20 
```

您可以使用以下脚本进行绘制：

```
set autoscale y
set autoscale x
set grid
set xtic auto
set ytic auto
set xlabel "N"
set ylabel "Time"
plot "data.dat" every ::1 using 1:2 title "simple-quad" with linespoints, \
"data.dat" every ::1 using 1:3 title "simple-nehalem" with linespoints \
"data.dat" every ::1 using 1:4 title "simple-opteron" with linespoints \
"data.dat" every ::1 using 1:5 title "alt-quad" with linespoints \
"data.dat" every ::1 using 1:6 title "alt-nehalem" with linespoints \
"data.dat" every ::1 using 1:7 title "alt-opteron" with linespoints 
```

# java - 使用哪种数据类型来操纵货币

> ID：15865012
> 
> 赞同：6
> 
> 时间：2013-04-07T16:51:24.747
> 
> 标签：java, currency

我正在尝试决定将哪种数据类型用于金融应用程序。

我已经阅读`Double`或`BigDecimal`应该使用。我在他们之间感到困惑。在这方面的任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-07T16:53:20.933

您几乎肯定不想使用浮点类型 ( `double`, `float`, `Double`, `Float`) 来处理货币金额，尤其是当您要对它们执行计算时。造成这种情况的主要原因是有许多看起来很简单的数字不能完全表示为 a `double`et al。一个这样的数字是`0.1`。

`BigDecimal`因此对于这个用例来说是一个更好的选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T16:52:48.153

使用 BigDecimal，它在金融方面比 Double 好得多。请参阅此处接受的类似问题的答案： [Double vs. BigDecimal？](https://stackoverflow.com/questions/3413448/double-vs-bigdecimal)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-07T16:56:21.967

BigDecimal 不仅是最佳选择，BigDecimal 就是为这种情况而设计的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-07T17:29:38.783

对于大多数应用程序，一个简单的方法`long`就可以了：当代表美分时，这将处理高达 10^17 {美元、欧元等}的金额。

# python - 来自 Scikit Learn Svm Fit 的神秘错误消息

> ID：15865016
> 
> 赞同：0
> 
> 时间：2013-04-07T16:51:42.103
> 
> 标签：python, image-recognition, scikit-learn, handwriting, svm

我正在尝试使用[这些文档](http://scikit-learn.org/stable/modules/svm.html)使用 scikit learn 训练支持向量机，但我收到一条我不理解的错误消息。难道我做错了什么？

这是我的脚本。这个想法是我有一个文件，其中每一行都是“标签数据”的形式。数据是一串零和一。

svm-learn.py

```
import os
import re
from sklearn import svm

classifier = svm.SVC()

data = open("sd19-train-binary.txt", "r")

labels = []
training_data = [] 
i = 0

for line in data:
    match = re.search("^(\S+) (\d+)", line)
    label = match.group(1)
    vector = list(match.group(2))
    vector = [int(x) for x in vector]
    labels.append(label)
    training_data.append([vector])
    i += 1
    if i > 100:
        break

classifier.fit(training_data, labels) 
```

当我运行它时，会发生这种情况：

```
$ python svm-learn.py
  Traceback (most recent call last):
    File "svm-learn.py", line 26, in <module>
      classifier.fit(training_data, labels)
    File "/Library/Python/2.7/site-packages/scikit_learn-0.14_git-py2.7-macosx-10.8-intel.egg/sklearn/svm/base.py", line 184, in fit
      fit(X, y, sample_weight, solver_type, kernel)
    File "/Library/Python/2.7/site-packages/scikit_learn-0.14_git-py2.7-macosx-10.8-intel.egg/sklearn/svm/base.py", line 228, in _dense_fit
      max_iter=self.max_iter)
    File "libsvm.pyx", line 53, in sklearn.svm.libsvm.fit (sklearn/svm/libsvm.c:1660)
  ValueError: Buffer has wrong number of dimensions (expected 2, got 3) 
```

我的输入文件中的一行如下所示：

```
W 1111111111111100001111111100011111111111100011111110011111000111111111110111111111 
```

这是用于 nist 特殊数据库 19 上的字形识别

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T18:19:05.060

已修复，问题在附件中。应该

```
training_data.append(vector) 
```

代替

```
training_data.append([vector]) 
```

# java - 环回地址不接收数据报包

> ID：15865020
> 
> 赞同：0
> 
> 时间：2013-04-07T16:52:04.333
> 
> 标签：java

我要直截了当，这是与作业相关的，但作业是关于使用 UDP 实现 TCP 样式的数据可靠性保证，而不是 UDP 套接字 tom-foolery，这是我的问题所在。

所以我已经为一个Java程序辛勤工作了几个小时，我开始认为我不会找到答案。我在eclipse中使用两个类，一个发送一个UDP数据报包，我已经用socketsniff验证了它被绑定并发送到环回地址并具有正确格式的有效负载。

第二个是课堂是我有问题的地方。在接收类中，我试图接收数据，但它永远不会到达那里。使用 packetniff，我发现该套接字上什至没有接收调用运行代码时，它会在 socket.receive() 调用之前到达 println 语句，但它只是不运行它。奇怪的是，它会超时！**为什么收不到？**

这是我的接收类代码。

```
package us.wsu.compnet.reliabletransfer;

import java.io.*;
import java.net.*;

/**
 * This class implements a receiver of the Stop-And-Wait reliable transfer protocol
 */
public class MyServerSocket implements Runnable {

    private PipedOutputStream internalOutputStream; // Stream to which we write data for the upper layer
    private PipedInputStream upperLayerStream; // Stream given to upper layer, connected to internalOutputStream

    private DatagramSocket sock;
    private DatagramPacket pack;
    private byte[] buf;
    private int seqNum;

    /**
     * Creates a receiver socket on a given port. 
     */
    public MyServerSocket(int port) throws SocketException {
        // Open the UDP socket.
        sock = new DatagramSocket(port);
        System.out.println("" + sock.getInetAddress()  + " " + sock.getPort() + "\n");
        buf = new byte[1000];
        pack = new DatagramPacket(buf,buf.length);
        seqNum = 0;

        // Create stream to the upper layer.
        internalOutputStream = new PipedOutputStream();
        try {upperLayerStream = new PipedInputStream(internalOutputStream);}
            catch (IOException e) {/* This should not happen. */}

        // Start thread that will receive the data packets and reply with acks.
        (new Thread(this)).start();
        }

    /**
     * Returns the InputStream associated with the socket. 
     */
    public InputStream getInputStream() {
        return upperLayerStream;
    }

    /**
     * Implementation of the receiver protocol.
     */
    public void run() {
        try{
        // Receive datagram.
        int x = 0;
        sock.setSoTimeout(10000);
        while (x < 10000)
        {
            try{                
                System.out.println("Waiting to recieve packet");
                sock.receive(pack);
                System.out.println("Packet Recieved");
            }
            catch(Exception e){
                System.out.println("Swingandamiss!");
            }
        x++;
        }
        // Extract sequence number and data payload.
        MyDataPacket p;
        pack.setData(buf,0,pack.getLength()-1);
        p = new MyDataPacket(buf,buf.length-1);

        // If packet is received for the first time, deliver to upper layer.
        if ( p.getSeqNum() == seqNum)
        {
            internalOutputStream.write(p.getData(), 0, p.getData().length);
            seqNum = (byte) (1-seqNum);
        }       

        // Send ack.
        MyAckPacket ack;
        ack = new MyAckPacket(seqNum);
        DatagramPacket pout;
        pout = new DatagramPacket(ack.toByteArray(),ack.toByteArray().length);
        DatagramSocket outSock;
        outSock = new DatagramSocket(pack.getPort(),pack.getAddress());
        outSock.send(pout);
        }
        catch (IOException e){/*Do Nothing*/}
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T03:27:47.820

你的代码是错误的。

1.  您应该使用相同的 DatagramSocket 进行发送和接收。您尝试使用源地址构建新代码的代码完全不正确，甚至不适用于非本地源。它还会泄漏套接字。

2.  您必须创建一个 DatagramPacket 以使用目标地址和端口进行发送。在响应的情况下，简单的方法是使用请求数据报并仅更改其数据，保持地址：端口不变。

3.  您绝不能忽略异常。不要自欺欺人说它们不会发生，或者如果发生了它们可以被忽略。它们会发生，它们不能被忽视。在这种情况下，如果您没有忙于忽略它，那么您在发送时会遇到异常，该异常会告诉您有关 (2) 的信息。

# ssh - 在远程服务器上访问 CouchDB Futon

> ID：15865024
> 
> 赞同：17
> 
> 时间：2013-04-07T16:52:20.133
> 
> 标签：ssh, couchdb, telnet

我已经在可以通过终端 telnet/ssh 客户端访问的远程服务器上安装了 CouchDB。

服务器在 CentOS6 上运行。

我真的很想能够使用 Futon，但我现在不能，因为我只能在 ssh 客户端中打开 localhost:5984。

关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-07T17:19:44.343

只需为您的远程 CouchDB 实例创建 ssh 隧道：

```
ssh -f -L localhost:15984:127.0.0.1:5984 user@remote_host -N 
```

之后，您仍然可以在 localhost 地址上服务的远程 CouchDB Futon 将通过地址为您提供：`http://localhost:15984/_utils`. 根据您的选择替换本地端口 15984。

PS 还有来自 Linode wiki 的[很棒的指南](http://library.linode.com/databases/couchdb/ssh-tunnel)，其中包含示例 couchdb-tunnel 脚本。希望能帮助到你。

# javascript - 当我使用 best_in_place 进行更改时，我希望更新页面上的另一个文本值

> ID：15865026
> 
> 赞同：2
> 
> 时间：2013-04-07T16:52:24.367
> 
> 标签：javascript, ruby-on-rails, best-in-place

## 编辑#2

在我看来，我应该能够使用 javascript 来 JSON 解析`respond_with_bip(@buildingTour)`返回的任何内容，因为那是我需要的更新对象（我需要访问 的更新值`@buildingTour.monthly`）。但是，当我尝试解析它时，我没有运气。我读过一些关于respond_with_bip 破坏JSONParse 的内容，所以也许这就是正在发生的事情。

如果有人可以帮助我解析@buildingTour 以获取每月属性（即，向我展示javascript），将不胜感激。

## 编辑

@MikeKijewski - 澄清一下，我的视图是一个显示视图，即我们只处理一行。我知道您所指的 SO 文章是处理具有多行的表，这有点棘手。我不明白为什么我的控制器中的“respond_with_bip”还没有返回我需要的东西。这是我的控制器：

```
 def update
    @buildingTour = BuildingTour.find(params[:id])

    respond_to do |format|
      if @buildingTour.update_attributes(params[:building_tour])
        format.json { respond_with_bip(@buildingTour) }
      else
        format.json { respond_with_bip(@buildingTour) }
      end
    end
  end 
```

那么为什么我不能使用“respond_with_bip”返回的数据来更新页面上的字段呢？

现在我只是在使用`location.reload();`best_in_place 更新两个相关字段（sqft 和 rentrate）时使用，然后显示第三个字段（每月）的适当值。

* * *

我`best_in_place`在我的 rails 应用程序中使用（用于就地编辑值 sqft 和 rate），它工作得很好，但有一个例外：

我的模型中有一个计算属性，称为`monthly`. 当我用 a 更改值时`best_in_place`，我需要`monthly`在页面上重新计算和更新该值。

这是`monthly`我模型中的代码：

```
 def monthly
    if sqft && rate
        monthly = (sqft * rate) / 12
    end
  end 
```

这是我认为的代码片段（这是我要更新的文本 - 它位于 ID 为“rental-details”的跨度内）：

```
<strong><%= number_to_currency(@buildingTour.monthly, :precision => 0) %></strong> 
```

这是我在进行`best_in_place`更改时识别出的javascript，然后理论上更新上面的值：

```
$('.best_in_place').change(function() {
    $.ajax({
      success: function() {
        $("#rental-details strong").text('<%= number_to_currency(@buildingTour.monthly, :precision => 0) %>');
      }
    });
  }); 
```

所以代码都“工作”没有错误。. . 除了它正在拉动每月的旧值。我通过从 JavaScript 中删除来测试这一点`number_to_currency`，果然当我更改其他值之一时，它会从页面上的值中删除货币格式（所以我知道 JavaScript 正在被触发并更新文本）。

我想可能是 JavaScript 启动得太快了（数据库还没有更新为 sqft 和 rate 的新值），但我尝试了几次更改 sqft 和 rate 的值，但每月的值从未更新。

那么无论如何`<%= number_to_currency(@buildingTour.monthly, :precision => 0) %>`，JavaScript 的一部分是否只在页面加载时被调用一次？如果是这样，你如何强制它`monthly`每次查询？

需要指出的一件事......`monthly`不是表格中的一列`building_tours`，我只是动态计算它。

感谢您对此问题的任何见解。我已经用谷歌搜索和stackoverflow了，他们都让我觉得我当前的代码应该可以工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:07:00.657

我最终创建了一个 javascript 函数，用于监视要更新的具有某个类（.best_in_place 或类似内容）的元素，然后从控制器操作（在您的情况下为 BuildingTour？）获取 json 响应并用替换表行包含更新的 .monthly 值的新表行。查看这篇 SO 文章：

[best_in_place 更新后更新各种 DOM 元素](https://stackoverflow.com/questions/14636946/updating-various-dom-elements-after-best-in-place-update)

# python - 为二进制矩阵 matplotlib 着色

> ID：15865029
> 
> 赞同：1
> 
> 时间：2013-04-07T16:52:41.543
> 
> 标签：python, matrix, matplotlib, wxpython

```
highlightc = np.zeros([N, N])
print highlightc
c = len(highlightc)
colour = [0.21]*c
colour = np.array(colour)
print colour
for x, y in hl:
    highlightc[x, y] = 1##set so binary matrix knows where to plot
h=ax.imshow((highlightc*colour), interpolation='nearest',cmap=plt.cm.spectral_r)
fig.canvas.draw() 
```

我已经创建了一个像这样的二进制矩阵，我想做的是通过将二进制矩阵乘以一个低于零的数字来使这些图具有某种颜色。但是我上面的代码并没有这样做，而且这些图仍然是黑色的。我很确定它与我的颜色数组有关，但我不知道如何编辑它，所以它是正确的。 `highlightc`是一个列表，其中包含`[(1,109),(1,102),(67,102),etc]`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T17:37:56.340

`ax.imshow(X)`调整色阶，使 X 中的最低值映射到最低颜色，X 中的最高值映射到`cmap`.

当您乘以`highlight`一个常数`colour`时，最高值`X`会从 1 下降到 0.21，但这没有影响，`ax.imshow`因为色阶也得到了调整，从而阻碍了您的意图。

但是，如果您提供`vmin=0`,`vmax=1`参数，则`ax.imshow`不会调整颜色范围——它将 0 与最低颜色相关联，将 1 与最高颜色相关联：

```
import numpy as np
import matplotlib.pyplot as plt

N = 150
highlightc = np.zeros([N, N])

M = 1000
hl = np.random.randint(N, size=(M, 2))
highlightc[zip(*hl)] = 1

colour = 0.21
fig, ax = plt.subplots()
h = ax.imshow(
    (highlightc * colour), interpolation='nearest', cmap=plt.cm.spectral_r,
    vmin=0, vmax=1)
plt.show() 
```

![在此处输入图像描述](https://i.stack.imgur.com/MDi1r.png)

# c# - 分组时如何从 Linq 查询返回 IGrouping

> ID：15865030
> 
> 赞同：4
> 
> 时间：2013-04-07T16:52:45.197
> 
> 标签：c#, .net, windows, linq, group-by

我正在向 a 添加一堆不同的零件，`List<>`其中一些零件可能具有相同的零件编号和相同的长度。如果它们确实具有相同的零件编号和相同的长度，我需要将这些零件分组以进行显示。

当它们被分组时，我需要显示该零件号以及该零件号中有多少具有特定长度。

我需要知道如何使用两个不同的属性进行分组，并返回一个带有该属性的类型对象`List<ICutPart>`以及总数

以下是我所能得到的，我试图返回`(IGrouping<int,ICutPart>)sGroup;`，但在函数体的返回部分出现错误。

如何返回一个类型化的对象`Group{List<ICutPart> Parts, Int Total}`？

```
 public class CutPart : ICutPart
{
    public CutPart() { }
    public CutPart(string name, int compID, int partID, string partNum, decimal length)
    {
        this.Name = name;
        this.PartID = partID;
        this.PartNumber = partNum;
        this.CompID = compID;
        this.Length = length;
    }
    public CutPart(string name, int compID, int partID, string partNum, decimal width, decimal height)
    {
        this.Name = name;
        this.CompID = compID;
        this.PartNumber = partNum;
        this.PartID = partID;
        this.Width = width;
        this.Height = height;
        this.SF = decimal.Parse(((width / 12) * (height / 12)).ToString(".0000")); //2dp Number;
    }

    public string Name { get; set; }
    public int PartID { get; set; }
    public string PartNumber { get; set; }
    public int CompID { get; set; }
    public decimal Length { get; set; }
    public decimal Width { get; set; }
    public decimal Height { get; set; }
    public decimal SF { get; set; }
}

public class CutParts : List<ICutPart>
{

    public IGrouping<int, ICutPart> GroupParts()
    {

        var sGroup = from cp in this
                     group cp by cp.Length into g
                     select new
                     {
                         CutParts = g,
                         total = g.Count() 
                     };

        return (IGrouping<int, ICutPart>)sGroup;

    }

    public new void Add(ICutPart item)
    {
        base.Add(item);
    }

} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-07T17:06:41.637

我猜你想创建一堆组对象，其中每个组对象都有共同的和具有该长度`Length`的一堆s。`ICutPart`

在代码中，它看起来像这样：

```
public IEnumerable<IGrouping<int, ICutPart>> GroupParts()
{
  return this.GroupBy( o => o.Length );
} 
```

这可能需要解释！

* * *

该`IEnumerable`位是组对象的集合 - 每个不同的对象一个`Length`

该集合中的每个“组对象”都是一个`IGrouping<int, ICutPart>`.

这个对象有一个`Key`属性，这是你分组的东西——`Length`在这种情况下。

它也是一个`IGrouping<T>`派生自`IEnumerable<T>`的集合 - 它是`ICutPart`具有该长度的 s 的集合。

如果你调用`ToList()`其中一个组对象，你会得到一个`List<ICutPart>`

* * *

为了使调用者更容易，您可以创建一个类来保存这些值。

如果你声明了一个这样的类：

```
public class GroupedByLength
{
  public int Length { get; set; }
  public List<ICutPart> CutParts { get; set; }
} 
```

那么你可以返回这些对象的集合：

```
public List<GroupedByLength> GroupParts()
{
  return this
    .GroupBy( o => o.Length )
    .Select( g => new GroupedByLength
      {
        Length = g.Key,
        CutParts = g.ToList(),
      }
    )
    .ToList()
  ;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T17:06:32.210

您正在尝试转换`IEnumerable<IGrouping<int ICutPart>>`为`<IGrouping<int ICutPart>>``; 这永远不会奏效。您必须从 IEnumerable<> 中选择一个实例，可能像这样：

```
return sGroup.FirstOrDefault(); 
```

# paypal - 在贝宝沙盒中注册网站支付专业版会重定向到实时贝宝网站

> ID：15865032
> 
> 赞同：0
> 
> 时间：2013-04-07T16:52:54.597
> 
> 标签：paypal, sandbox

我创建了一个英国商业沙盒帐户来测试网站支付专业托管解决方案的集成。按照 paypal 的指示，我转到沙盒站点（按照 developer.paypal.com 中“沙盒测试帐户”页面的链接）并使用我的沙盒用户名和密码登录。然后我转到“产品和服务”并单击“网站支付专业版”，但此时我被重定向到实时贝宝网站上的登录页面。有没有其他人遇到过这个问题并找到解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T17:29:00.160

您是否考虑过您创建的沙盒帐户可能已经是 Pro 了？我相信现在所有新的商业帐户默认都是 Pro。

也就是说，如果您被带到 www.paypal.com/some/path，请尝试将其更改为 www.sandbox.paypal.com/some/path

# jquery - 如何使用 jQuery 持续迭代 div 并延迟？

> ID：15865033
> 
> 赞同：0
> 
> 时间：2013-04-07T16:52:54.993
> 
> 标签：jquery

我有不同的 div 列，并希望执行以下步骤：

1.  每 5 秒遍历第一列中的每个元素。一个类在元素被选中时被添加到元素中，在下一个元素被选中时被移除。
2.  当它完成通过第一列时，然后移动到第二列并迭代该列中的每个元素，就像在步骤 1 中一样。
3.  当第二列完成后，在第一列中继续迭代，依此类推......

HTML 标记：

```
<div class="first-column">
  <div class="selected">...</div>
  <div>...</div>
  <div>...</div>
</div>
<div class="second-column">
  <div>...</div>
  <div>...</div>
  <div>...</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T18:34:48.953

您可以使用如下语句获取所有内部 div：

```
var divs = $('div > div'); 
```

*使用setInterval()*重复调用您的函数

 *示例：http: [//jsfiddle.net/DFqBZ/](http://jsfiddle.net/DFqBZ/)*

# jquery - jquery click() 在 ie7 和 ie8 中不起作用

> ID：15865034
> 
> 赞同：0
> 
> 时间：2013-04-07T16:52:58.417
> 
> 标签：jquery, internet-explorer-8, internet-explorer-7

有人可以帮助解决这个问题：

```
$('#cont2, #cont3').hide();
$('li a').click(function(){
    var idx= $(this).attr('id').substr(-1);
    $('#cont1, #cont2, #cont3').hide();
    $('#cont'+idx).show();
    return false;
}); 
```

这在 IE7 和 IE8 中不起作用。为什么？

HTML

```
<ul>
       <li class="linktab"><a href="#" id="link1">Link1</a></li>
       <li class="linktab"><a href="#" id="link2">Link2</a></li>
       <li class="linktab"><a href="#" id="link3">Link3</a></li>
</ul>

<div id="cont1">content 1</div>
<div id="cont2">content 2</div>
<div id="cont3">content 3</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T16:54:52.020

因为旧 IE 的`substr`实现[不支持负索引作为参数](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/substr)。该 MDN 页面中有一个插入式替换，或者您可以简单地执行

```
var id = $(this).attr('id');
var idx= id.substr(id.length - 2); 
```

# css - 我是否需要为节标签设置样式以实现向后兼容性？

> ID：15865035
> 
> 赞同：0
> 
> 时间：2013-04-07T16:53:05.417
> 
> 标签：css, html

我正试图加入 HTML5 的潮流，因为它得到了更多的覆盖并且是一个成熟的规范。

* * *

而不是为此使用 div 标签：

```
<div class="page-item">
    <h2>Google rumored to purchase WhatsApp for $1 Billion dollars.</h2>

    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi 
        in felis nisi, quis vulputate odio. Proin eu est dolor, non 
        feugiat dui. Cras tristique, arcu nec adipiscing varius, nibh 
        dolor fermentum nibh, in elementum justo dolor et enim. Nullam 
        libero dui, tristique ut pulvinar at, consequat malesuada nisl. 
        Vestibulum sed elit purus, id posuere neque. Pellentesque luctus 
        libero quis risus ullamcorper sollicitudin. Pellentesque dictum, 
        est et blandit placerat, mi erat tempus diam, et aliquet ipsum felis 
        sit amet risus. Proin pretium accumsan tincidunt. Pellentesque vel 
        tortor lacus, sit amet aliquam mi. Donec tincidunt ullamcorper 
        molestie.</p>
</div> 
```

我想使用一个`section`标签：

```
<section>
    <h2>Google rumored to purchase WhatsApp for $1 Billion dollars.</h2>

    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi 
        in felis nisi, quis vulputate odio. Proin eu est dolor, non 
        feugiat dui. Cras tristique, arcu nec adipiscing varius, nibh 
        dolor fermentum nibh, in elementum justo dolor et enim. Nullam 
        libero dui, tristique ut pulvinar at, consequat malesuada nisl. 
        Vestibulum sed elit purus, id posuere neque. Pellentesque luctus 
        libero quis risus ullamcorper sollicitudin. Pellentesque dictum, 
        est et blandit placerat, mi erat tempus diam, et aliquet ipsum felis 
        sit amet risus. Proin pretium accumsan tincidunt. Pellentesque vel 
        tortor lacus, sit amet aliquam mi. Donec tincidunt ullamcorper 
        molestie.</p>
</section> 
```

我需要应用什么样的样式才能使这个`section`标签尽可能地适用于老式浏览器？（*IE7以上*）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T17:00:34.630

首先，我认为您应该将其`<h1>`用作 的第一个标题`<section>`，尽管有人可以纠正我。

IE8- 根本不支持这些标签，并且会忽略与它们相关的任何样式。有两个相当简单的解决方案。一是添加

```
document.createElement('section'); 
```

在`<section>`元素出现之前。然后，IE 出于某种原因应用了这些样式。有很多 HTML5 shims/shivs 可以为所有新元素执行此操作。

如果您不能依赖 JS 或者由于某种原因不想这样做，您可以始终保留`<div>`for 样式并只保留`<section>`for 语义。拥有 there 并没有什么坏处，`<div>`因为它除了对元素进行分组之外没有任何语义意义，the`<section>`也有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T17:01:48.770

就样式（即 CSS）而言，您只需对特定的 HTML5 元素进行基本重置，如下所示：`section{display: block;}`

但是，为了让旧版浏览器（例如 IE7）真正将新元素识别为确实是元素，您需要将它们注册为这样。做这件事的简短、简单且明确的方法是通过 Javascript，通过`document.createElement("section");`在页面的`<head>`.

您可以在[HTML5 Starter Pack](http://sickdesigner.com/resources/HTML5-starter-pack/index.html)中找到以上所有内容，该包旨在帮助开发人员启动他们的 HTML5 项目。

干杯!

# mysql - 如何在 MySQL 的 GROUP BY 语句中选择 MAX(value)

> ID：15865036
> 
> 赞同：3
> 
> 时间：2013-04-07T16:53:17.010
> 
> 标签：mysql, group-by, pivot, aggregate-functions

## 背景

我正在使用`CASE`2010 年、2011 年和 2012 年的表达式对这些数据进行透视，并按公司分组。正在旋转/返回的“度量”是`max(state)`针对每个案例/每年的，并且效果很好。

## 问题

我正在尝试`max(invoice_date)`从每个 的所有记录中获取最新记录`company_name`，但查询仅返回满足表达式的`date`位置`CASE`而不是`max(invoice_date)`.

## 以下是表格数据的示例：

```
company_name  |  invoice_date | year      |  state
--------------------------------------------------------
CompanyA      |  20130101     | 2012      |   1
CompanyA      |  20130101     | 2012      |   3
CompanyB      |  20130102     | 2012      |   2
CompanyA      |  20120103     | 2011      |   3
CompanyB      |  20120104     | 2011      |   1
CompanyB      |  20120104     | 2011      |   3
CompanyA      |  20110101     | 2010      |   4
CompanyB      |  20110105     | 2010      |   2 
```

## 这是所需视图的示例：

```
company_name  |  invoice_date |  2010   |   2011   |  2012
--------------------------------------------------------------
CompanyA      |  20130101     |   4     |    3     |   3 
CompanyB      |  20130102     |   2     |    3     |   2 
```

## 这是我得到的结果示例：

```
company_name  |  invoice_date |  2010   |   2011   |  2012
--------------------------------------------------------------
CompanyA      |  20110101     |   4     |    3     |   3 
CompanyB      |  20110105     |   2     |    3     |   2 
```

请注意，`date`A 公司和 B 公司的日期均为 2011 年，这不是这两家公司表中的最新日期。我正在尝试获取`max(invoice_date)`.

## 解决了：

```
select
company_name AS company_name,
max(invoice_date) AS invoice_date,
max((case when (year = 2010) then state else 0 end)) AS `2010`,
max((case when (year = 2011) then state else 0 end)) AS `2011`,
max((case when (year = 2012) then state else 0 end)) AS `2012`,
from tbl
group by company_name 
order by invoice_date desc 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:50:17.960

我会像这样重写您的查询：

```
select company_name AS company_name,
  max(invoice_date) AS invoice_date,
  sum(year = 2010) AS `2010`,
  sum(year = 2011) AS `2011`,
  sum(year = 2012) AS `2012`
from tbl
group by company_name 
order by invoice_date desc 
```

特别是有趣的案例陈述可以做得更短。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:37:06.623

如果我是你，我会使用这样的准备好的语句，以便它动态地获取所有年份。这样，当 2013 年数据显示时，您不必更改查询：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT CONCAT(
    'MAX((CASE WHEN (year = \'',
    year,
    '\') THEN state ELSE 0 END)) AS \''
    year,
    '\''
  )
) INTO @sql
FROM tbl;

SET @sql = CONCAT('SELECT
  company_name AS company_name,
  MAX(invoice_date) AS invoice_date,', @sql, '
  FROM tbl
  GROUP BY company_name 
  ORDER BY invoice_date desc');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

# java - 如何使 imageButtons 在 XML 中固定而不移动？

> ID：15865039
> 
> 赞同：0
> 
> 时间：2013-04-07T16:53:25.323
> 
> 标签：java, android, xml

我有这个布局，如下图所示，有 36 张图片。我将 src 设置为那些 imageButtons 并且效果很好。现在我设置 imageButton.setVisibility(View.GONE); 这也很好用。但是当我单击“消失”其中一个按钮时，所有其他按钮都会移动到一个位置，这很糟糕。如何让所有其他人留在原地？

![在此处输入图像描述](https://i.stack.imgur.com/aRb1O.jpg)

我的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:background="@drawable/background" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="365dp" >

        <ImageView
            android:id="@+id/ivSlika"
            android:layout_width="fill_parent"
            android:layout_height="match_parent" />

    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="365dp"
        android:orientation="vertical" >

        <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <ImageButton
            android:id="@+id/ib1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/bricks_01"
            android:padding="0dp" />

        <ImageButton
            android:id="@+id/ib2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/bricks_02"
            android:padding="0dp" />

        <ImageButton
            android:id="@+id/ib3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/bricks_03"
            android:padding="0dp" />

        <ImageButton
            android:id="@+id/ib4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/bricks_04"
            android:padding="0dp" />

        <ImageButton
            android:id="@+id/ib5"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/bricks_05"
            android:padding="0dp" />

        <ImageButton
            android:id="@+id/ib6"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/bricks_06"
            android:padding="0dp" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <ImageButton
            android:id="@+id/ib7"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/bricks_07"
            android:padding="0dp" />

        <ImageButton
            android:id="@+id/ib8"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/bricks_08"
            android:padding="0dp" />

        <ImageButton
            android:id="@+id/ib9"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/bricks_09"
            android:padding="0dp" />

        <ImageButton
            android:id="@+id/ib10"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/bricks_10"
            android:padding="0dp" />

        <ImageButton
            android:id="@+id/ib11"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/bricks_11"
            android:padding="0dp" />

        <ImageButton
            android:id="@+id/ib12"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/bricks_12"
            android:padding="0dp" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <ImageButton
            android:id="@+id/ib13"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/bricks_13"
            android:padding="0dp" />

        <ImageButton
            android:id="@+id/ib14"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/bricks_14"
            android:padding="0dp" />

        <ImageButton
            android:id="@+id/ib15"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/bricks_15"
            android:padding="0dp" />

        <ImageButton
            android:id="@+id/ib16"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/bricks_16"
            android:padding="0dp" />

        <ImageButton
            android:id="@+id/ib17"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/bricks_17"
            android:padding="0dp" />

        <ImageButton
            android:id="@+id/ib18"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/bricks_18"
            android:padding="0dp" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <ImageButton
            android:id="@+id/ib19"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/bricks_19"
            android:padding="0dp" />

        <ImageButton
            android:id="@+id/ib20"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/bricks_20"
            android:padding="0dp" />

        <ImageButton
            android:id="@+id/ib21"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/bricks_21"
            android:padding="0dp" />

        <ImageButton
            android:id="@+id/ib22"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/bricks_22"
            android:padding="0dp" />

        <ImageButton
            android:id="@+id/ib23"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/bricks_23"
            android:padding="0dp" />

        <ImageButton
            android:id="@+id/ib24"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/bricks_24"
            android:padding="0dp" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <ImageButton
            android:id="@+id/ib25"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/bricks_25"
            android:padding="0dp" />

        <ImageButton
            android:id="@+id/ib26"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/bricks_26"
            android:padding="0dp" />

        <ImageButton
            android:id="@+id/ib27"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/bricks_27"
            android:padding="0dp" />

        <ImageButton
            android:id="@+id/ib28"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/bricks_28"
            android:padding="0dp" />

        <ImageButton
            android:id="@+id/ib29"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/bricks_29"
            android:padding="0dp" />

        <ImageButton
            android:id="@+id/ib30"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/bricks_30"
            android:padding="0dp" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <ImageButton
            android:id="@+id/ib31"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/bricks_31"
            android:padding="0dp" />

        <ImageButton
            android:id="@+id/ib32"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/bricks_32"
            android:padding="0dp" />

        <ImageButton
            android:id="@+id/ib33"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/bricks_33"
            android:padding="0dp" />

        <ImageButton
            android:id="@+id/ib34"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/bricks_34"
            android:padding="0dp" />

        <ImageButton
            android:id="@+id/ib35"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/bricks_35"
            android:padding="0dp" />

        <ImageButton
            android:id="@+id/ib36"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/bricks_36"
            android:padding="0dp" />
    </LinearLayout>

    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/bIzlazCigle"
            android:layout_width="60dp"
            android:layout_height="40dp"
            android:layout_marginLeft="10dp"
            android:layout_marginTop="390dp"
            android:background="@drawable/buttons_final"
            android:padding="0dp"
            android:text="Izlaz"
            android:textColor="#ffffff"
            android:textSize="19sp" />

        <Button
            android:id="@+id/bKonacnoCigle"
            android:layout_width="180dp"
            android:layout_height="40dp"
            android:layout_marginLeft="15dp"
            android:layout_marginTop="390dp"
            android:background="@drawable/buttons_final"
            android:padding="0dp"
            android:text="Konačno rešenje!"
            android:textColor="#ffffff"
            android:textSize="19sp" />

    </LinearLayout>

</FrameLayout> 
```

我像这样将它们设置为不可见：

```
public void onClick(View v) {
        switch(v.getId()){

        case R.id.ib1:
            b1.setVisibility(View.GONE);
            break;
        case R.id.ib2:
            b2.setVisibility(View.GONE);
            break;
        case R.id.ib3:
            b3.setVisibility(View.GONE);
            break;
        case R.id.ib4:
            b4.setVisibility(View.GONE);
            break;
        case R.id.ib5:
            b5.setVisibility(View.GONE);
            break;
        case R.id.ib6:
            b6.setVisibility(View.GONE);
.
.
.
.
.
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T17:02:47.493

您可以使用 View.INVISIBLE 而不是 View.GONE

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T17:02:57.700

为此，您可以使用**View.INVISIBLE**而不是**View.GONE**。实际上，当您使用 View.GONE 时，它不会占用任何布局空间。但是当您使用**View.INVISIBLE**时，它在屏幕上将不可见，但实际上仍保留在布局中。您正在使用**Padding** 0(zero) 。因此，当一个图像消失时，由于零填充，其他图像将向前移动。

# sql - 不能引用其他列 Oracle SQL

> ID：15865040
> 
> 赞同：1
> 
> 时间：2013-04-07T16:53:29.060
> 
> 标签：sql, database, oracle, constraints, syntax-error

这是我的 Oracle SQL 表声明。

```
create table students (
    sid char(4) primary key check (sid like 'B%'),
    firstname varchar2(15) not null,
    lastname varchar2(15) not null,
    status varchar2(10) check (status in (‘freshman’, ‘sophomore’, ‘junior’, ‘senior’, ‘graduate’)),
    gpa number(3,2) check (gpa between 0 and 4.0),
    email varchar2(20) unique
    ); 
```

为什么会出现以下错误

> ORA-02438: 列检查约束不能引用其他列

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T16:58:10.997

使用单引号：`'freshman',...`

# html - bootstrap - 按钮未正确对齐

> ID：15865043
> 
> 赞同：0
> 
> 时间：2013-04-07T16:53:55.247
> 
> 标签：html, css, twitter-bootstrap

我有一个带有这个类的ul，里面`"nav nav-tabs nav-stacked"`有一个li和a `"<a>"`，里面`"<a>"`有两个带有类的按钮`"pull-right btn btn-primary"`。发生的事情是按钮粘在列表项的底部，我希望它们位于列表项的中间。

如需更多许可，请参阅：

**HTML 代码：**

```
<div class="container-fluid">
    <div class="row-fluid">
        <ul class="nav nav-tabs nav-stacked" style="margin-top: 60px;">
            <?php
            $all_connections = get_user_connection_requests($_SESSION["uid"]);
            while($connection = mysql_fetch_assoc($all_connections)) {
                echo "<li><a>{$connection["fName"]} {$connection['lName']}"
            ?>
            <button class="pull-right btn btn-primary ">Accept</button>
            <button class="pull-right btn btn-danger ">Deny</button>
            <?php echo "</a></li>"; }   ?>
        </ul>
    </div>
    <!--/row-->
</div> 
```

**输出：** ![在此处输入图像描述](https://i.stack.imgur.com/dxsiP.png)

[全尺寸图片在这里！](https://i.stack.imgur.com/dxsiP.png)

我希望按钮也像文本一样位于中间。

我怎样才能做到这一点？

**任何帮助将不胜感激！:)**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T17:51:49.057

试试这个：

```
<style>
    .button-group{margin-top:-5px}
</style>
<div class="container-fluid">
    <div class="row-fluid">
        <ul class="nav nav-tabs nav-stacked" style="margin-top: 60px;">

            <li>
                <a>
                    Mohammad Danish
                    <div class="pull-right button-group">
                        <button class="btn btn-primary ">Accept</button>
                        <button class="btn btn-danger ">Deny</button>
                    </div>
                </a>
            </li>
        </ul>
    </div>
    <!--/row-->
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T17:40:05.890

我对您的代码进行了一些更改，因为浮动元素会带来一些麻烦。

首先，我将 id 添加`#something`到`ul`列表中只是为了解决浮动问题。然后我添加`<span class="centered">`了在您的锚标记内换行的文本。

这是CSS

```
#something li a {
    overflow: hidden;
}

.centered {
    display: inline-block;
    margin-top: 5px;
} 
```

这里是编辑过的 HTML

```
<div class="container-fluid">
    <div class="row-fluid">
        <ul id="something" class="nav nav-tabs nav-stacked" style="margin-top: 60px;">
            <li>
               <a href="">
                  <span class="centered">sssss</span>
                  <button class="pull-right btn btn-primary ">Accept</button>
                  <button class="pull-right btn btn-danger ">Deny</button>
               </a>
            </li>
        </ul>
    </div>
    <!--/row-->
</div> 
```

**[演示](http://jsfiddle.net/A9Qau/)**

# mysql - 在网站中创建评论/帖子表的最佳方法是什么

> ID：15865044
> 
> 赞同：0
> 
> 时间：2013-04-07T16:54:00.627
> 
> 标签：mysql

我正在创建一个网站，用户可以在其中发布一些文本，并且最多可以附上一张照片，用户可以评论/喜欢

在我的数据库中创建代表这些实体/动作的表的最佳方法是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T16:56:42.030

我将首先查看执行您正在谈论的各种事情的现有软件包。如果由于某种原因无法修改现有包以适合您的目的，请查看代码和数据库设置以了解它们是如何做到的。

不要从一张白纸开始项目，然后进来说“嘿，我该怎么做这个复杂的大任务？”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T16:59:22.000

对我来说，解决方案将涉及表之间的一些关系。

首先，我希望我的代码尽可能可扩展，所以我会有一个线程表。

```
ThreadID   ThreadData
-------------------------------
1          Favourite languages
2          Favourite Programmers 
```

其次，我有某种帖子表，与线程表有外键关系：

```
PostID    PostData    TimeStamp    User    ThreadID
--------------------------------------------------------------
1         C# ftw!!    07/04/2013   Chris   1
2         Adi Shamir  07/04/2013   Chris   2 
```

了解如何以这种方式将所有帖子链接到主题。现在您无法确定用户是否会发布照片，因此我不会`photo`在您的帖子表中包含字段，因为您希望避免 NULL 值，因此您的表已完全规范化。这意味着一个`Photo`表，与该表具有外键关系`Post`。

```
PhotoID    PhotoLocation       PostID
------------------------------------------------
1          img/adishamir.jpg   2 
```

然后，您只需在加载帖子时加载照片。

最后点赞，跟照片桌很像。一个 LikeID 和一个喜欢的帖子。

然后由您来编写以有意义的方式显示此数据的代码！:)

# javascript - 使用选择标签显示和隐藏 div

> ID：15865045
> 
> 赞同：1
> 
> 时间：2013-04-07T16:54:05.530
> 
> 标签：javascript, jquery

我试图在选择选择标签时显示内容。我正在使用 change() 函数来做到这一点，但它并没有真正获取正确的更改内容。这是小提琴

[http://jsfiddle.net/sghoush1/NhL2V/](http://jsfiddle.net/sghoush1/NhL2V/)

html看起来像这样

```
<table id="formTable">
                <tr>
                    <td align="right">Investment cycle:</td>
                    <td>
                    <select class="selectOption">
                        <option>Jan12</option>
                        <option>Feb12</option>
                        <option>Mar12</option>
                    </select>
                    </td>
                </tr>   
                <tr>
                    <td align="right">Subsequent investments will occur on:</td>
                    <td>
                        <div id="changingArea">
                            <div class="descContent">Content A</div>
                            <div class="descContent">Content B</div>
                            <div class="descContent">Content C</div>
                        </div>
                    </td>   
                </tr>
            </table> 
```

jquery 看起来像这样

```
$(function() {

    $('.selectOption').change(function(){
        $('.descContent').hide();
        $('.descContent').eq($(this).index('.selectOption')).show();
    });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T16:59:22.133

如果要获取所选选项元素的索引，可以使用`selectedIndex`DOM[`HTMLSelectElement`](https://developer.mozilla.org/en-US/docs/DOM/HTMLSelectElement)对象的属性。

```
//  You can chain the methods
$('.descContent').hide().eq(this.selectedIndex).show(); 
```

[http://jsfiddle.net/NhL2V/2/](http://jsfiddle.net/NhL2V/2/)

# python - 你如何断言 Django 的 QuerySet.count() 方法是在 Mock 上调用的？

> ID：15865049
> 
> 赞同：1
> 
> 时间：2013-04-07T16:54:26.093
> 
> 标签：python, django, mocking

我正在使用Mock来替换一个Django Model，它的配置如下：

```
>>> config = {'objects.filter.return_value.count.return_value': 1}
>>> MockModel = Mock(**config) 
```

我可以查询一些值，然后调用`.count()`结果：

```
>>> # This works as expected
>>> MockModel.objects.filter(foo='bar').count()
1 
```

但是，当我断言调用了这些方法时，Mock 会引发一个`TypeError`因为 `count`是 Mock 的方法`call`：

```
>>> MockModel.assert_has_calls([
        call.objects.filter(foo='bar'),
        call.objects.filter().count(),
    ])
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-78-bf4e954d856f> in <module>()
      1 MockModel.assert_has_calls([
      2         call.objects.filter(foo='bar'),
----> 3         call.objects.filter().count()
      4 ])

TypeError: count() takes exactly one argument (0 given) 
```

不过，您可以看到此调用确实存在于`mock_calls`：

```
>>> MockModel.mock_calls
[
    call.trait_names(),
    call._getAttributeNames(),
    call.objects.filter(foo='bar'),
    call.objects.filter().count(),    # How do you test for this?

    ...
] 
```

所以我的问题是：你如何断言`count()`在 Mock Django QuerySet 上被调用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T22:01:13.233

A`call`也是 a `tuple`，因此可以与 a 进行比较`tuple`：

```
>>> MockModel.assert_has_calls([
        call.objects.filter(foo='bar'),
        ('objects.filter().count',),
    ]) 
```

您可以确认这一点：

```
>>> map(tuple, MockModel.mock_calls)
  > [('objects.filter', (), {'foo': 'bar'}), ('objects.filter().count', (), {})] 
```

来源：[https ://code.google.com/p/mock/source/browse/mock.py#1988](https://code.google.com/p/mock/source/browse/mock.py#1988)

# objective-c - 设计概率表

> ID：15865052
> 
> 赞同：0
> 
> 时间：2013-04-07T16:54:29.317
> 
> 标签：objective-c, probability

我正在制作一个游戏原型，其中用户点击一个按钮并随机出现一个项目。

```
 Object A = 10% chance of discovery
    Object B = 15% chance of discovery
    Object C = 12% chance of discovery etc... totalling 100% 
```

随着游戏的进行，用户可以增加找到某些对象的几率，例如增加`Object A's probability from 10% to 15%`.

我想知道是否有人可以建议一种有效的设计或函数来运行概率并返回一个对象。

起初我考虑只是随机生成一个从 1 到 100 的数字，然后使用一系列`if/else if`语句，但这似乎很乏味，并且对于更新项目概率不是很有可塑性。另外，我应该将概率存储在 NSDictionary 中吗？

任何建议表示赞赏。我正在用Objective-C编写。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T16:58:38.660

最简单的设计`NSMutableDictionary`是以这种方式拥有一个（可变的，因为你需要更新它）

```
NSMutableDictionary * probabilityTable = @{
    @"objectA" : @0.10, // the @ converts the number to a `NSNumber` (NSDictionary accepts only objects)
    @"objectB" : @0.15,
    @"objectC" : @0.12
}; 
```

等等。

然后为了检索概率

```
probabilityTable[@"objectA"]; 
```

并更新它

```
probabilityTable[@"objectA"] = @0.16; 
```

**编辑**

为了额外的乐趣，您可以将对象本身用作字典键。为此，请使这些对象成为类的子类`MyObject`（我假设您将为不同的对象类别提供不同的类）。此类必须符合`NSCopying`协议并实现`isEqual`and`hash`方法。

有关如何遵守的更多信息`NSCopying`：[实施 NSCopying](https://stackoverflow.com/questions/4089238/implementing-nscopying)

有关如何实施`isEqual`和的更多信息`hash`：[覆盖 isEqual: 和哈希的最佳实践](https://stackoverflow.com/questions/254281/best-practices-for-overriding-isequal-and-hash)

完成后，您使用对象本身来检索其概率并更新它，将上述代码转换为类似

```
// initializing 
NSMutableDictionary * probabilityTable = @{
    objectA : @0.10,
    objectB : @0.15,
    objectC : @0.12
};

// retrieving
probabilityTable[objectA];

// updating
probabilityTable[objectA] = @0.16; 
```

**编辑 2**

如果你想变得花哨，你也可以写一个断言来检查概率总和是否总是 1。检查看起来像

```
float sum = 0;
for (NSNumber * n in probabilityTable.allValues) {
    sum += n.floatValue;
}
NSAssert(sum == 1.0, @"Sum of probabilities must be 1.0"); 
```

你可以很容易地想到将这个检查捆绑在一个方法中，并在每次修改概率表时调用它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T17:08:32.310

对象是唯一的吗？如果是这样，请创建一个包含所有对象的袋子

```
NSArray *legendarySwords=.... 
```

并从该数组中删除任意元素。

如果对象不是唯一的——你有一台自动售货机，可以根据玩家的承受能力分发尽可能多的每个对象——带上你的阵列

```
@[ 0.10, 0.15, 0.12 ...] 
```

并构造累积概率

```
@[ 0.10, 0.25, 0.37 .... 1] 
```

现在，生成一个随机数 [0,1]；数组中的第一个元素 <= 随机数为您提供选择。

但这将是维护的痛苦。一个更好的解决方案将填充一堆具有相对概率的对象：

```
NSThing *canteen=[[NSThing alloc] initWithCost: 10 abundance: kCommon];

NSThing *magicArrow=[[NSThing alloc] initWithCost: 100 abundance: kRare];

NSInventory *inventory=[NSInventory inventoryFor: @[canteen, magicArrow, ...]; 
```

然后从库存中构建您的概率数组。需要制作箭头 kVeryRare 以保持游戏平衡？您只需要更改magicArrow，您的概率数组就会自动更新。否则，你最终肯定会遇到问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-12T07:10:19.060

我和你有同样的问题，偶然发现了这个非常有用的[链接](http://uihacker.blogspot.com/2009/09/actionscript-3-choose-random-item-from.html)。

链接中的代码是用 ActionScript 3 编写的，所以这是我的 Objective-c 转换代码。一世

```
- (MyObject *)getWeightedRandomObject
{
    int weightsCounter =  0; // sum of the current weights added

    // get the total weight of all the obstacles
    for (MyObject* object in objectsArray)
    {
        weightsCounter += object.spawnWeight;
    }

    int random = arc4random_uniform(weightsCounter) + 1; // random int from 1 to total weight inclusive.
    weightsCounter = 0;

    // pick the weighted object
    for (MyObject* object in objectsArray)
    {
        weightsCounter += object.spawnWeight;

        if (random < weightsCounter)
        {
            return object;
        }
    }

    return [objectsArray lastObject]; // only the last object will be remaining at this point
} 
```

为了确定这个算法有效，我创建了三个 spawnWeight 分别为 60、30 和 10 的对象，并调用了这个方法 1000 次。我进行了大约六次测试，每次生成百分比几乎都是正确的。您可能希望稍微自定义上述代码以满足您的需求，但算法的逻辑已经过测试并且可以正常工作。

享受！

# ruby-on-rails - Rails 模拟应用实例/请求

> ID：15865053
> 
> 赞同：0
> 
> 时间：2013-04-07T16:54:32.220
> 
> 标签：ruby-on-rails, rack

我正在关注以下内容：

[http://railscasts.com/episodes/151-rack-middleware](http://railscasts.com/episodes/151-rack-middleware)

我正在尝试使用 rspec 测试中间件。

我不确定最好的方法。

我正在尝试获取请求标头以查看请求是否来自移动设备。

似乎我需要以某种方式传入应用程序实例，但还需要模拟请求标头？

请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T17:28:40.560

为了使用 Rspec 测试中间件，您需要定义一个方法来创建中间件的实例，方法是

```
let(:inner_app) { lambda { |env| [200, {'Content-Type' => 'text/plain'}, ['All good!'] } }

let(:app) { SomeMiddleware.new } 
```

或者

```
def app
  SomeMiddleware.new
end 
```

您还必须在您的或您的测试文件中包含该`Rack::Test::Methods`模块`spec_helper.rb`。

然后，您在 Rspec 中所做的任何请求都将通过该中间件。

检查此资源[http://blog.kesor.net/2012/06/05/rack-middleware/](http://blog.kesor.net/2012/06/05/rack-middleware/)

# php - 为什么数组可以用作回调

> ID：15865061
> 
> 赞同：-1
> 
> 时间：2013-04-07T16:55:14.287
> 
> 标签：php

在 PHP 手册[http://www.php.net/manual/en/function.session-set-save-handler.php](http://www.php.net/manual/en/function.session-set-save-handler.php)的这个页面上，我找到了这个函数规范：`bool session_set_save_handler ( callable $open , callable $close , callable $read , callable $write , callable $destroy , callable $gc )`它表示所有参数都应该是回调。但我也在那个页面上找到了这个例子：

```
 class FileSessionHandler
    {
        private $savePath;

        function open($savePath, $sessionName)
        {
            $this->savePath = $savePath;
            if (!is_dir($this->savePath)) {
                mkdir($this->savePath, 0777);
            }

            return true;
        }

        function close()
        {
           ...
        }
        ...
    }
$handler = new FileSessionHandler();
session_set_save_handler(
    array($handler, 'open'),
    array($handler, 'close'),
    array($handler, 'read'),
    array($handler, 'write'),
    array($handler, 'destroy'),
    array($handler, 'gc')
    ); 
```

中的每个参数`session_set_save_handler`都是一个数组，其中第一个元素是处理程序对象，第二个元素是字符串。

为什么这些数组可以用作回调？我参考了 Array，回调手册，但没有找到任何关于这如何可能的线索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T16:59:53.067

```
array($handler, 'open') 
```

> 为什么这些数组可以用作回调？

[http://php.net/manual/en/language.types.callable.php](http://php.net/manual/en/language.types.callable.php)

因为它是一个有效的回调定义：

```
array($instance,'method') 
```

或者

```
array($class,'staticMethod') 
```

检查提供的链接中的 example#1 type 2 和 type 3。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T16:58:37.017

您可能会觉得很有启发性：

[http://php.net/manual/en/language.types.callable.php](http://php.net/manual/en/language.types.callable.php)

相当广泛的数据可以作为 PHP 中的可调用对象传递，包括包含全局作用域或内置函数名称的字符串、闭包（自 PHP 5.3 起）或包含类名称的数组以及该类或对象实例中的静态方法的名称以及该对象的类上的实例方法的名称。

# c++ - C++11：为什么这个范围循环将 FPS 降低 35？

> ID：15865071
> 
> 赞同：25
> 
> 时间：2013-04-07T16:55:30.847
> 
> 标签：c++, performance, c++11

我正在使用 SFML 和 C++11 功能（例如范围循环）编写游戏。在处理瓦片地图时，我基本上为每个地图瓦片创建了一个类，一个简单地包含其精灵、位置等的轻量级类，然后构建了一些嵌套向量来表示游戏地图层。

为了优化一次在屏幕上绘制数千个对象的过程，我只是简单地绘制玩家所看到的。这进展顺利。

我有以下渲染游戏地图的方法，如果平铺位置在相机边界内，则条件基本上返回 true

```
void gameMap::render(sf::RenderWindow &winMain, sf::Vector2f offset) {
      for(vector<int> vec1 : backgroundData)
           for(int i : vec1)
              if(collides(i.pos, offset)
                 myWindow.draw(i.sprite);

     } 
```

它工作得很好，但是在游戏中我得到了大约 30 FPS，并且有很多粗糙的动作。但令我惊讶的是，下面的代码做了同样的事情，渲染了相同数量的瓷砖精灵，但**运行速度为 65 fps**，并且运动非常流畅

```
void gameMap::render(sf::RenderWindow &winMain, sf::Vector2f offset) {
          for(int i = 0; i < backgroundTiles.size(); i++)
               for(int j = 0; j < backgroundTiles[i].size(); j++)
                  if(collides(backgroundTiles[i][j].pos, offset)
                     myWindow.draw(backgroundTiles[i][j].sprite);

         } 
```

为什么会这样？C++11 基于范围的循环比老派慢得多吗？我真的很想听听这个问题的答案，因为老实说，我的眼睛更喜欢基于范围的循环，而且我不想发现基于范围的循环慢两倍。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-04-07T16:58:22.317

外部循环正在复制包含在中的每个向量`backgroundData`：

```
 for(vector<int> vec1 : backgroundData) 
```

将其更改为以下任一项：

```
 for(vector<int>& vec1 : backgroundData)
  for(const vector<int>& vec1 : backgroundData) 
```

这将成为对 vector`vec1`的*引用*，而不是*copy*。由于向量的复制成本很高，而引用的使用成本很低，这将显着提高性能。

`const`至于非参考和参考之间的选择`const`，我会尽可能使用后者。

一个更一般的选择是写

```
 for(auto&& vec1 : backgroundData) 
```

`vec1`这会创建一个对包含的任何类型的自动类型引用`backgroundData`。`&&`在这种情况下，最终会`vec1`绑定到以下任何一个：右值引用、引用或`const`引用，具体取决于`backgroundData`返回的类型。[@Yakk 提供此建议的提示]

# android - 使用 Arraylist 传递数据 I am having a problem displaying data from my DB in a list view. the below is the code from for my display method. Display public ArrayList<Object> display(String r 问问题 问问题 2013-04-07T16:56:06.633 601 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I am having a problem displaying data from my DB in a list view. the below is the code from for my display method. Display public ArrayList<Object> display(String rows) { ArrayList<Object> rowArray = new ArrayList<Object>(); String[] columns = new String[] { KEY_ROWID, KEY_PACKNAME, KEY_PACKRENT, KEY_SIMRATE, KEY_NATMINSBUN, KEY_INTMINSBUN, KEY_INTMINSRATE, KEY_NATSMSBUN, KEY_NATSMSRATE, KEY_INTSMSBUN, KEY_INTSMSRATE, KEY_MMSBUN, KEY_MMSRATE, KEY_DATALBUN, KEY_DATALRATE }; Cursor cursor = ourDatabase.query(DATABASE_TABLE, columns, null, null, null, null, null); cursor.moveToFirst(); if (!cursor.isAfterLast()) { do { rowArray.add(cursor.getLong(0)); rowArray.add(cursor.getString(1)); rowArray.add(cursor.getString(2)); rowArray.add(cursor.getString(3)); rowArray.add(cursor.getString(4)); rowArray.add(cursor.getString(5)); rowArray.add(cursor.getString(6)); rowArray.add(cursor.getString(7)); rowArray.add(cursor.getString(8)); rowArray.add(cursor.getString(9)); rowArray.add(cursor.getString(10)); rowArray.add(cursor.getString(11)); rowArray.add(cursor.getString(12)); rowArray.add(cursor.getString(13)); rowArray.add(cursor.getString(14)); } while (cursor.moveToNext()); cursor.close(); } return rowArray; } This is the Arraylist EtiTariffDatabase test = new EtiTariffDatabase(this); TextView TV = (TextView) findViewById(R.id.s_etipackname); TextView TV1 = (TextView) findViewById(R.id.s_etipackrent); TextView TV2 = (TextView) findViewById(R.id.srentalrate); TextView TV3 = (TextView) findViewById(R.id.snationalbun); TextView TV4 = (TextView) findViewById(R.id.seintbun); TextView TV5 = (TextView) findViewById(R.id.senatsmsbun); TextView TV6 = (TextView) findViewById(R.id.seintsmsbun); TextView TV7 = (TextView) findViewById(R.id.sedatalocalbun); test.open(); try { ArrayList<Object> row = test.display(null); TV.setText((String)row.get(1)); TV1.setText((String)row.get(2)); TV2.setText((String)row.get(3)); TV3.setText((String)row.get(4)); TV4.setText((String)row.get(6)); TV5.setText((String)row.get(8)); TV6.setText((String)row.get(10)); TV7.setText((String)row.get(12)); } catch (Exception e) { Log.e("Retrieve Error", e.toString()); e.printStackTrace(); } test.close(); } the exception I catch is: 04-07 16:48:23.759: E/Retrieve Error(4134): java.lang.IndexOutOfBoundsException: Invalid index 1, size is 0 04-07 16:48:23.829: W/System.err(4134): java.lang.IndexOutOfBoundsException: Invalid index 1, size is 0 04-07 16:48:23.829: W/System.err(4134): at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:251) I have been trying to play around for a long time. It worked initially but I deleted the DB and recreated it. From then no data gets displayed with me having the above error. Any assistance would be greatly appreciated. Do you have any data-rows inside your database? From what the Exception says you try to access a field in the array but the array itself is empty. Everything looks like it should work, but when there are no data in the database the function display will return an ArrayList that is empty (row.size should be 0 then). So test for emptyness: try { ArrayList<Object> row = test.display(null); if(row.size != 0) { TV.setText((String)row.get(1)); TV1.setText((String)row.get(2)); TV2.setText((String)row.get(3)); TV3.setText((String)row.get(4)); TV4.setText((String)row.get(6)); TV5.setText((String)row.get(8)); TV6.setText((String)row.get(10)); TV7.setText((String)row.get(12)); } } catch (Exception e) { Log.e("Retrieve Error", e.toString()); e.printStackTrace(); } test.close(); androidsqlitearraylist 4 2 回答 2 This answer is useful 0 04-07 16:48:23.759: E/Retrieve Error(4134): java.lang.IndexOutOfBoundsException: Invalid index 1, size is 0 That clearly indicates that your method returns an empty ArrayList. Indexes start from 0 and not 1 (which is not related to your error, but you should correct that too). If there is no data in your table the ArrayList will not contain any elements. You are better off returning a value object instead of individually adding each column to an ArrayList (again, not related to your error but this is a good practice). 于 2013-04-07T17:21:02.200 回答 This answer is useful 0 您的数据库中有任何数据行吗？根据异常所说，您尝试访问数组中的字段，但数组本身为空。 一切看起来应该可以工作，但是当数据库中没有数据时，该函数display将返回一个空的 ArrayList（row.size那么应该为 0）。 所以测试空性： try { ArrayList<Object> row = test.display(null); if(row.size != 0) { TV.setText((String)row.get(1)); TV1.setText((String)row.get(2)); TV2.setText((String)row.get(3)); TV3.setText((String)row.get(4)); TV4.setText((String)row.get(6)); TV5.setText((String)row.get(8)); TV6.setText((String)row.get(10)); TV7.setText((String)row.get(12)); } } catch (Exception e) { Log.e("Retrieve Error", e.toString()); e.printStackTrace(); } test.close(); 于 2013-04-07T17:19:12.463 回答 Related 0 ruby-on-rails - 远程预编译资产失败 1 angularjs - 将 FireBaseAuthClient 与 AngularJS 一起使用时出现“错误：$apply 已在进行中” 4 python - Python - 试图创建一个“徒手”计算器 1 vb.net - VB.NET 按键？ 2 java - 在非原始静态数据上使用 final 修饰符是否有任何性能提升？ 2 php - 创建文件时的文件权限 1 php - 如何基于 PHP Array 更新表 2 r - 在不调用 plot.new 的情况下计算 strwidth 2 backbone.js - 用于字母过滤器的纯 JavaScript 或 BackboneJS 方法 1 php - PHP 使用 password_hash 登录 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：15865075
> 
> 赞同：0
> 
> 时间：
> 
> 标签：android, sqlite, arraylist

I am having a problem displaying data from my DB in a list view. the below is the code from for my display method.

**Display**

```
public ArrayList<Object> display(String rows) {

    ArrayList<Object> rowArray = new ArrayList<Object>();

    String[] columns = new String[] { KEY_ROWID, KEY_PACKNAME,
            KEY_PACKRENT, KEY_SIMRATE, KEY_NATMINSBUN, KEY_INTMINSBUN,
            KEY_INTMINSRATE, KEY_NATSMSBUN,
                            KEY_NATSMSRATE, KEY_INTSMSBUN, KEY_INTSMSRATE, 
                            KEY_MMSBUN, KEY_MMSRATE, KEY_DATALBUN,
            KEY_DATALRATE };
    Cursor cursor = ourDatabase.query(DATABASE_TABLE, columns, null, null,
            null, null, null);

    cursor.moveToFirst();

    if (!cursor.isAfterLast())
    {
        do
        {   
            rowArray.add(cursor.getLong(0));
            rowArray.add(cursor.getString(1));
            rowArray.add(cursor.getString(2));
            rowArray.add(cursor.getString(3));
            rowArray.add(cursor.getString(4));
            rowArray.add(cursor.getString(5));
            rowArray.add(cursor.getString(6));
            rowArray.add(cursor.getString(7));
            rowArray.add(cursor.getString(8));
            rowArray.add(cursor.getString(9));
            rowArray.add(cursor.getString(10));
            rowArray.add(cursor.getString(11));
            rowArray.add(cursor.getString(12));
            rowArray.add(cursor.getString(13));
            rowArray.add(cursor.getString(14));

    }         while (cursor.moveToNext());

    cursor.close();
    }

    return rowArray;

} 
```

**This is the Arraylist**

```
 EtiTariffDatabase test = new EtiTariffDatabase(this);

    TextView TV = (TextView) findViewById(R.id.s_etipackname);
    TextView TV1 = (TextView) findViewById(R.id.s_etipackrent);
    TextView TV2 = (TextView) findViewById(R.id.srentalrate);
    TextView TV3 = (TextView) findViewById(R.id.snationalbun);
    TextView TV4 = (TextView) findViewById(R.id.seintbun);
    TextView TV5 = (TextView) findViewById(R.id.senatsmsbun);
    TextView TV6 = (TextView) findViewById(R.id.seintsmsbun);
    TextView TV7 = (TextView) findViewById(R.id.sedatalocalbun);

    test.open();

    try
    {
    ArrayList<Object> row = test.display(null);

    TV.setText((String)row.get(1));
    TV1.setText((String)row.get(2));
    TV2.setText((String)row.get(3));
    TV3.setText((String)row.get(4));
    TV4.setText((String)row.get(6));
    TV5.setText((String)row.get(8));
    TV6.setText((String)row.get(10));
    TV7.setText((String)row.get(12));

    }
    catch (Exception e)
    {
        Log.e("Retrieve Error", e.toString());
        e.printStackTrace();
    }
    test.close();

} 
```

the exception I catch is:

**04-07 16:48:23.759: E/Retrieve Error(4134): java.lang.IndexOutOfBoundsException: Invalid index 1, size is 0** 04-07 16:48:23.829: W/System.err(4134): java.lang.IndexOutOfBoundsException: Invalid index 1, size is 0 04-07 16:48:23.829: W/System.err(4134): at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:251)

I have been trying to play around for a long time. It worked initially but I deleted the DB and recreated it. From then no data gets displayed with me having the above error. Any assistance would be greatly appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T17:21:02.200

> 04-07 16:48:23.759: E/Retrieve Error(4134): java.lang.IndexOutOfBoundsException: Invalid index 1, size is 0

That clearly indicates that your method returns an empty `ArrayList`. Indexes start from 0 and not 1 (which is not related to your error, but you should correct that too). If there is no data in your table the ArrayList will not contain any elements.

You are better off returning a [value object](http://en.wikipedia.org/wiki/Value_object) instead of individually adding each column to an `ArrayList` (again, not related to your error but this is a good practice).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T17:19:12.463

您的数据库中有任何数据行吗？根据异常所说，您尝试访问数组中的字段，但数组本身为空。

一切看起来应该可以工作，但是当数据库中没有数据时，该函数`display`将返回一个空的 ArrayList（`row.size`那么应该为 0）。

所以测试空性：

```
try
{
    ArrayList<Object> row = test.display(null);

    if(row.size != 0) {
        TV.setText((String)row.get(1));
        TV1.setText((String)row.get(2));
        TV2.setText((String)row.get(3));
        TV3.setText((String)row.get(4));
        TV4.setText((String)row.get(6));
        TV5.setText((String)row.get(8));
        TV6.setText((String)row.get(10));
        TV7.setText((String)row.get(12));
    }   
} catch (Exception e) {
    Log.e("Retrieve Error", e.toString());
    e.printStackTrace();
}
test.close(); 
```

# prolog - 如何在 Prolog 中设置 arg 的值？

> ID：15865076
> 
> 赞同：0
> 
> 时间：2013-04-07T16:56:07.417
> 
> 标签：prolog

我有一个这样的作业问题：

```
Write a program to find the last element of a list. e.g.
?- last(X, [how, are, you]).
X = you
Yes 
```

我目前正在寻找这样的最后一个元素：

```
last([Y]) :-
    write('Last element ==> '),write(Y).
last([Y|Tail]):-
    last(Tail). 
```

它有效。我的问题是，如何将其更改为接受并设置附加 X 参数并正确设置？

我试过这个，但它不工作......

```
last(X, [Y]) :-
    X is Y.

last(X, [Y|Tail]):-
    last(X, Tail). 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T17:28:59.983

最明显的问题：`(is)/2`仅适用于数字。（[链接](http://www.swi-prolog.org/pldoc/doc_for?object=%28is%29/2)）

> - 当 Number 是 Expr 计算的值时，Number 为 +Expr True

您想使用统一运算符`(=)/2`（[链接](http://www.swi-prolog.org/pldoc/doc_for?object=%28=%29/2)）：

```
last(X, [Y]) :-
    X = Y,
    !.

last(X, [_|Tail]):-
    last(X, Tail). 
```

咱们试试吧：

```
?- last(X, [1, 2, 3]).
X = 3.

?- last(X, [a, b, c]).
X = c. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T01:30:53.663

在这种情况下，使用统一运算符不是统一的首选方式。您可以以更强大的方式使用统一。请参阅以下代码：

```
last(Y, [Y]).  %this uses pattern matching to Unify the last part of a list with the "place holder"
               %writing this way is far more concise.
               %the underscore represents the "anonymous" element, but basically means "Don't care"

last(X, [_|Tail]):-
last(X, Tail). 
```

# haskell - 在 Haskell 中替换字符串

> ID：15865080
> 
> 赞同：1
> 
> 时间：2013-04-07T16:56:24.010
> 
> 标签：haskell, replace

我正在寻找一种方法来替换 Haskell 中出现的字符串。我有这个适用于单对。我当前的功能是这样实现的：

```
replaceList :: (Eq a) => [a] -> ([a],[a]) -> [a]
replaceList z@(x:xs) (a,b)
| take (length a) z == a = b ++ strt z (length a)
| otherwise = x : replaceList xs (a,b) 
```

在这种情况下，strt 只是一个返回从某个索引开始的列表的函数。此功能有效。replaceList "Dragon" ("ragon","odo") 将返回 "I am a dodo"。但是，我正在寻找一种方法让这个函数接受这些元组的列表。例如：

replaceList "I am a dragon" [("I","You"),("am","are"),("a dragon","awesome")] 返回“你真棒”。

到目前为止，我尝试过的方法是将部分应用的 replaceList 映射到元组列表上，但这会返回每个更改的单个元素的列表。我也尝试使用此代码：

```
replaceInfinity :: (Eq a) => [a] -> [([a],[a])] -> [a]
replaceInfinity x [] = x
replaceInfinity x ((a,b):ys) = (flip replaceList (a,b)) . (replaceInfinity x ys) 
```

但这无法编译。我对 Haskell 比较陌生，并且正在使用它来重写旧的语言预处理器。我无法理解如何实现此类功能的逻辑。

有人可以告诉我获得答案的策略，或者甚至为我实现该功能，以便我可以了解它是如何完成的吗？如果有帮助，我有整个源文件，我一直在这里玩这个：http: [//hpaste.org/85363](http://hpaste.org/85363)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T17:35:46.597

我能想到的对代码的最小更改是：

```
replaceInfinity :: Eq a => [a] -> [([a], [a])] -> [a]
replaceInfinity x []     = x
replaceInfinity x (y:ys) = replaceInfinity (replaceList x y) ys

OUTPUT:
*Main> replaceInfinity "I am a dragon" [("I","You"),("am","are"),("a dragon","awesome")]
"You are awesome" 
```

转念一想：

```
replaceInfinity x ((a,b):ys) = (flip replaceInfinity ys) . (replaceList x) $ (a,b) 
```

或者更简洁地说：

```
replaceInfinity x (y:ys) = flip replaceInfinity ys . replaceList x $ y 
```

# c++ - C++ 链接器错误未定义对 Linux 上的类定义及其成员函数的引用

> ID：15865083
> 
> 赞同：0
> 
> 时间：2013-04-07T16:56:35.280
> 
> 标签：c++, linux, linker, linker-errors, qscintilla

我正在尝试在 Linux 2.6.32-279 上安装 QScintilla-gpl-2.7.1。#1 SMP 2012 x86_64 x86_64 x86_64 GNU/Linux

我在上一篇文章中已经解决了这个问题。但是，我遇到了链接器错误的新问题：

我花了一个星期，但仍然找不到原因。

即使我已经尝试过旧帖子也无法帮助我。任何帮助将不胜感激。

链接命令：

```
$(TARGET):  $(OBJECTS)
  $(LINK) $(LFLAGS) -o $(TARGET) $(LIBS) $(OBJECTS)  $(LIBS_SUFFIX) $(OBJCOMP)

OBJECTS       = ListBoxQt.o \
    PlatQt.o \
    qsciabstractapis.o \
    qsciapis.o \
    ..........

 LIBS          = -L/home/user/myPath/qt483/qt-everywhere-opensource-src-4.8.3/lib
 LFLAGS        = -Wl,-O1
 LINK          = g++
 LIBS_SUFFIX   = -lQtCore -lQtGui -lQt3Support -lQtCLucene -lQtDeclarative -lQtDesigner  -lQtDesignerComponents -    lQtHelp -lQtMultimedia -lQtNetwork -lQtOpenGL -lQtScript - lQtScriptTools -lQtSql -lQtSvg -lQtTest -lQtWebKit -lQtXml -lQtXmlPatterns -lpthread
 OBJCOMP is not defined. 
```

## 谢谢

错误：

```
qscintilla2/QScintilla-gpl-2.7.1/src/Indicator.o: In function `Indicator::Draw(Surface*, PRectangle const&, PRectangle const&)':
Indicator.cpp:(.text+0x409): undefined reference to `RGBAImage::RGBAImage(int, int,    float, unsigned char const*)'
Indicator.cpp:(.text+0x43d): undefined reference to `RGBAImage::SetPixel(int, int, ColourDesired, int)'
Indicator.cpp:(.text+0x456): undefined reference to `RGBAImage::SetPixel(int, int, ColourDesired, int)'
Indicator.cpp:(.text+0x47a): undefined reference to `RGBAImage::SetPixel(int, int, ColourDesired, int)'
Indicator.cpp:(.text+0x493): undefined reference to `RGBAImage::SetPixel(int, int, ColourDesired, int)'
Indicator.cpp:(.text+0x4ac): undefined reference to `RGBAImage::SetPixel(int, int, ColourDesired, int)'
Indicator.cpp:(.text+0x4c7): undefined reference to `RGBAImage::Pixels() const'
Indicator.cpp:(.text+0x50f): undefined reference to `RGBAImage::~RGBAImage()'
Indicator.cpp:(.text+0x900): undefined reference to `RGBAImage::RGBAImage(int, int, float, unsigned char const*)'
Indicator.cpp:(.text+0x94e): undefined reference to `RGBAImage::SetPixel(int, int, ColourDesired, int)'
Indicator.cpp:(.text+0x9f9): undefined reference to `RGBAImage::SetPixel(int, int, ColourDesired, int)'
Indicator.cpp:(.text+0xa4b): undefined reference to `RGBAImage::Pixels() const'
Indicator.cpp:(.text+0xac7): undefined reference to `RGBAImage::~RGBAImage()'
/qscintilla2/QScintilla-gpl-2.7.1/src/LineMarker.o: In function  `LineMarker::Draw(Surface*, PRectangle&, Font&, LineMarker::typeOfFold, int)':
LineMarker.cpp:(.text+0x2fd): undefined reference to `RGBAImage::Pixels() const'
LineMarker.cpp:(.text+0x3e3): undefined reference to `XPM::Draw(Surface*, PRectangle&)'
qscintilla2/QScintilla-gpl-2.7.1/src/LineMarker.o: In function  `LineMarker::SetRGBAImage(Point, float, unsigned char const*)':
LineMarker.cpp:(.text+0x1648): undefined reference to `RGBAImage::RGBAImage(int, int,  float, unsigned char const*)'
qscintilla2/QScintilla-gpl-2.7.1/src/LineMarker.o: In function `LineMarker::SetXPM(char const* const*)':
LineMarker.cpp:(.text+0x16c6): undefined reference to `XPM::XPM(char const* const*)'
qscintilla2/QScintilla-gpl-2.7.1/src/LineMarker.o: In function `LineMarker::SetXPM(char const*)':
LineMarker.cpp:(.text+0x1746): undefined reference to `XPM::XPM(char const*)'
collect2: ld returned 1 exit status 
```

## make: *** [Qt4Qt5] 错误 1

src/XPM.h 中类 RGBAImage 的定义。

没有编译错误，但链接器找不到 XPM.h 中定义的 RGBAImage，它已包含在 Indicator.cpp 和 Indicator.cpp 中。

在 Makefile 中，Indicator.o 和 Indicator.o 可以生成没有问题，并且它们已被放入链接器输入参数列表中，但链接器错误仍然存​​在。没有 XPM.cpp 文件。但是即使我创建了一个包含 XPM.h 的 XPM.cpp 文件并获得了 XPM.o ，我也遇到了同样的错误。

```
#include <vector>
#include <map>

#include "Platform.h"

#include "Scintilla.h"
#include "XPM.h" // RGBAImage is defined here
#include "Indicator.h"

#ifdef SCI_NAMESPACE
using namespace Scintilla;
#endif

static PRectangle PixelGridAlign(const PRectangle &rc) {
// Move left and right side to nearest pixel to avoid blurry visuals
return PRectangle(int(rc.left + 0.5), rc.top, int(rc.right + 0.5), rc.bottom);
}

void Indicator::Draw(Surface *surface, const PRectangle &rc, const PRectangle &rcLine)     
{
surface->PenColour(fore);
int ymid = (rc.bottom + rc.top) / 2;
if (style == INDIC_SQUIGGLE) {
    int x = int(rc.left+0.5);
    int xLast = int(rc.right+0.5);
    int y = 0;
    surface->MoveTo(x, rc.top + y);
    while (x < xLast) {
        if ((x + 2) > xLast) {
            if (xLast > x)
                y = 1;
            x = xLast;
        } else {
            x += 2;
            y = 2 - y;
        }
        surface->LineTo(x, rc.top + y);
    }
} else if (style == INDIC_SQUIGGLEPIXMAP) {
    PRectangle rcSquiggle = PixelGridAlign(rc);

    int width = Platform::Minimum(4000, rcSquiggle.Width());
    RGBAImage image(width, 3, 1.0, 0);
    enum { alphaFull = 0xff, alphaSide = 0x2f, alphaSide2=0x5f };
    for (int x = 0; x < width; x++) {
        if (x%2) {
            // Two halfway columns have a full pixel in middle flanked by light pixels
            image.SetPixel(x, 0, fore, alphaSide);
            image.SetPixel(x, 1, fore, alphaFull);
            image.SetPixel(x, 2, fore, alphaSide);
        } else {
            // Extreme columns have a full pixel at bottom or top and a mid-tone pixel in centre
            image.SetPixel(x, (x%4) ? 0 : 2, fore, alphaFull);
            image.SetPixel(x, 1, fore, alphaSide2);
        }
    }
    surface->DrawRGBAImage(rcSquiggle, image.GetWidth(), image.GetHeight(), image.Pixels());
} else if (style == INDIC_SQUIGGLELOW) {
    surface->MoveTo(rc.left, rc.top);
    int x = rc.left + 3;
    int y = 0;
    while (x < rc.right) {
        surface->LineTo(x-1, rc.top + y);
        y = 1 - y;
        surface->LineTo(x, rc.top + y);
        x += 3;
    }
    surface->LineTo(rc.right, rc.top + y);  // Finish the line
} else if (style == INDIC_TT) {
    surface->MoveTo(rc.left, ymid);
    int x = rc.left + 5;
    while (x < rc.right) {
        surface->LineTo(x, ymid);
        surface->MoveTo(x-3, ymid);
        surface->LineTo(x-3, ymid+2);
        x++;
        surface->MoveTo(x, ymid);
        x += 5;
    }
    surface->LineTo(rc.right, ymid);    // Finish the line
    if (x - 3 <= rc.right) {
        surface->MoveTo(x-3, ymid);
        surface->LineTo(x-3, ymid+2);
    }
} else if (style == INDIC_DIAGONAL) {
    int x = rc.left;
    while (x < rc.right) {
        surface->MoveTo(x, rc.top+2);
        int endX = x+3;
        int endY = rc.top - 1;
        if (endX > rc.right) {
            endY += endX - rc.right;
            endX = rc.right;
        } 
                    surface->LineTo(endX, endY);
                    x += 4;
           }
    } else if (style == INDIC_STRIKE) {
            surface->MoveTo(rc.left, rc.top - 4);
            surface->LineTo(rc.right, rc.top - 4);
    } else if (style == INDIC_HIDDEN) {
            // Draw nothing
    } else if (style == INDIC_BOX) {
            surface->MoveTo(rc.left, ymid+1);
            surface->LineTo(rc.right, ymid+1);
            surface->LineTo(rc.right, rcLine.top+1);
            surface->LineTo(rc.left, rcLine.top+1);
            surface->LineTo(rc.left, ymid+1);
    } else if (style == INDIC_ROUNDBOX || style == INDIC_STRAIGHTBOX) {
            PRectangle rcBox = rcLine;
            rcBox.top = rcLine.top + 1;
            rcBox.left = rc.left;
            rcBox.right = rc.right;
            surface->AlphaRectangle(rcBox, (style == INDIC_ROUNDBOX) ? 1 : 0, fore, fillAlpha, fore, outlineAlpha, 0);
        } else if (style == INDIC_DOTBOX) {
            PRectangle rcBox = PixelGridAlign(rc);
            rcBox.top = rcLine.top + 1;
            rcBox.bottom = rcLine.bottom;
            // Cap width at 4000 to avoid large allocations when mistakes made
            int width = Platform::Minimum(rcBox.Width(), 4000);
            RGBAImage image(width, rcBox.Height(), 1.0, 0);
            // Draw horizontal lines top and bottom
            for (int x=0; x<width; x++) {
               for (int y=0; y<rcBox.Height(); y += rcBox.Height()-1) {
                    image.SetPixel(x, y, fore, ((x + y) % 2) ? outlineAlpha : fillAlpha);
                }
            }
            // Draw vertical lines left and right
            for (int y=1; y<rcBox.Height(); y++) {
                  for (int x=0; x<width; x += width-1) {
                       image.SetPixel(x, y, fore, ((x + y) % 2) ? outlineAlpha : fillAlpha);
                  }
             }
            surface->DrawRGBAImage(rcBox, image.GetWidth(), image.GetHeight(), image.Pixels());
           } else if (style == INDIC_DASH) {
           int x = rc.left;
           while (x < rc.right) {
                    surface->MoveTo(x, ymid);
                    surface->LineTo(Platform::Minimum(x + 4, rc.right), ymid);
                    x += 7; 
           }
       } else if (style == INDIC_DOTS) {
           int x = rc.left;
           while (x < rc.right) 
           {
                    PRectangle rcDot(x, ymid, x+1, ymid+1);
                    surface->FillRectangle(rcDot, fore);
                    x += 2;
             }
    } 
    else 
    {   // Either INDIC_PLAIN or unknown
    surface->MoveTo(rc.left, ymid);
    surface->LineTo(rc.right, ymid);
    }
 }

 ----------------------------------
 XPM.h

 # pragma once
 #include "Platform.h"
 #if defined(PLAT_QT)
 #include <qimage.h>
 #include <qpixmap.h>
 #endif

 #ifdef SCI_NAMESPACE
 namespace Scintilla {
 #endif

 /**
 * Hold a pixmap in XPM format.
 */
class XPM {
#if defined(PLAT_QT)
QPixmap qpm;

public:

XPM(const char *textForm);
XPM(const char *const *linesForm);
~XPM() {}

void Draw(Surface *surface, PRectangle &rc);
int GetHeight() const {return qpm.height();}

const QPixmap &Pixmap() const {return qpm;}
#else
int pid;        // Assigned by container
int height;
int width;
int nColours;
char *data;
char codeTransparent;
char *codes;
ColourDesired *colours;
ColourDesired ColourDesiredFromCode(int ch) const;
ColourDesired ColourFromCode(int ch) const;
void FillRun(Surface *surface, int code, int startX, int y, int x);
char **lines;
ColourDesired *colourCodeTable[256];

 public:
XPM(const char *textForm);
XPM(const char *const *linesForm);
~XPM();
void Init(const char *textForm);
void Init(const char *const *linesForm);
void Clear();
/// Decompose image into runs and use FillRectangle for each run
void Draw(Surface *surface, PRectangle &rc);
char **InLinesForm() { return lines; }
void SetId(int pid_) { pid = pid_; }
int GetId() const { return pid; }
int GetHeight() const { return height; }
int GetWidth() const { return width; }
void PixelAt(int x, int y, ColourDesired &colour, bool &transparent) const;
static const char **LinesFormFromTextForm(const char *textForm);
#endif
};

#if !defined(PLAT_QT)

/**
 * A collection of pixmaps indexed by integer id.
 */
class XPMSet {
XPM **set;  ///< The stored XPMs.
int len;    ///< Current number of XPMs.
int maximum;    ///< Current maximum number of XPMs, increased by steps if reached.
int height; ///< Memorize largest height of the set.
int width;  ///< Memorize largest width of the set.
 public:
XPMSet();
~XPMSet();
/// Remove all XPMs.
void Clear();
/// Add a XPM.
void Add(int ident, const char *textForm);
/// Get XPM by id.
XPM *Get(int ident);
/// Give the largest height of the set.
int GetHeight();
/// Give the largest width of the set.
int GetWidth();
 };

 #endif

 /**
  * An translucent image stoed as a sequence of RGBA bytes.
 */
class RGBAImage {
    // Private so RGBAImage objects can not be copied
    RGBAImage(const RGBAImage &);
    RGBAImage &operator=(const RGBAImage &);
    int height;
    int width;
    float scale;
   #if defined(PLAT_QT)
      QImage *qim;
    #else
    std::vector<unsigned char> pixelBytes;
   #endif
 public:
    //   RGBAImage has been defined here, why still linker error ??? 
    RGBAImage(int width_, int height_, float scale_, unsigned char const *pixels_);
    RGBAImage(const XPM &xpm);
    virtual ~RGBAImage();
    int GetHeight() const { return height; }
    int GetWidth() const { return width; }
    float GetScale() const { return scale; }
    float GetScaledHeight() const { return height / scale; }
    float GetScaledWidth() const { return width / scale; }
#if !defined(PLAT_QT)
    int CountBytes() const;
#endif
    const unsigned char *Pixels() const;
    //  SetPixel has been defined here, why still linker error ??? 
   void SetPixel(int x, int y, ColourDesired colour, int alpha=0xff); 
};

#if !defined(PLAT_QT)

 /**
 * A collection of RGBAImage pixmaps indexed by integer id.
 */
class RGBAImageSet {
    typedef std::map<int, RGBAImage*> ImageMap;
    ImageMap images;
    mutable int height; ///< Memorize largest height of the set.
    mutable int width;  ///< Memorize largest width of the set.
public:
     RGBAImageSet();
    ~RGBAImageSet();
   /// Remove all images.
   void Clear();
   /// Add an image.
   void Add(int ident, RGBAImage *image);
   /// Get image by id.
  RGBAImage *Get(int ident);
   /// Give the largest height of the set.
   int GetHeight() const;
   /// Give the largest width of the set.
   int GetWidth() const;
  };
 #endif    
 #ifdef SCI_NAMESPACE
 } 
```

## ＃万一

我再次提取了 tar 球并找到了 XMP.cpp 并运行 qmake (4.8.3) qscintilla.proa 并获得了 Makefile。但是我得到了很多编译错误。例如
Qsci/qsciscintilla.h:34:21: 错误: qobject.h: 没有这样的文件或目录。我已经更新了我的帖子。

```
 [~/qscintilla2/QScintilla-gpl-2.7.1_new/QScintilla-gpl-2.7.1/Qt4Qt5] $ make
   g++ -c -pipe -O2 -D_REENTRANT -w -fPIC -DQSCINTILLA_MAKE_DLL -DQT -DSCI_LEXER -  DQT_NO_DEBUG -DQT_GUI_LIB -DQT_CORE_LIB -I../../../../qt483/qt-everywhere-opensource-src- 4.8.3/mkspecs/linux-g++ -I. -I/home/user//qt483/include/QtCore - I/home/user/qt483/include/QtGui -I/home/user/qt483/include -I. -I../include - I../lexlib -I../src -I. -o qsciscintilla.o qsciscintilla.cpp
   In file included from qsciscintilla.cpp:28:
  Qsci/qsciscintilla.h:34:21: error: qobject.h: No such file or directory
  Qsci/qsciscintilla.h:35:25: error: qstringlist.h: No such file or directory
  Qsci/qsciscintilla.h:37:22: error: QByteArray: No such file or directory
  Qsci/qsciscintilla.h:38:17: error: QList: No such file or directory
  Qsci/qsciscintilla.h:39:20: error: QPointer: No such file or directory
  In file included from Qsci/qsciscintilla.h:41,
              from qsciscintilla.cpp:28:
  ./Qsci/qsciglobal.h:33:21: error: qglobal.h: No such file or directory
  In file included from Qsci/qsciscintilla.h:42,
              from qsciscintilla.cpp:28:
  ./Qsci/qscicommand.h:33:21: error: qstring.h: No such file or directory
  In file included from ./Qsci/qscicommand.h:36,
               from Qsci/qsciscintilla.h:42,
             from qsciscintilla.cpp:28:
  ./Qsci/qsciscintillabase.h:35:31: error: QAbstractScrollArea: No such file or directory
  ./Qsci/qsciscintillabase.h:37:20: error: qpoint.h: No such file or directory
  ./Qsci/qsciscintillabase.h:38:20: error: qtimer.h: No such file or directory
    qsciscintilla.cpp:31:21: error: qaction.h: No such file or directory
    qsciscintilla.cpp:32:26: error: qapplication.h: No such file or directory
   qsciscintilla.cpp:33:20: error: qcolor.h: No such file or directory
   qsciscintilla.cpp:34:20: error: qevent.h: No such file or directory
   qsciscintilla.cpp:35:20: error: qimage.h: No such file or directory
   qsciscintilla.cpp:36:23: error: qiodevice.h: No such file or directory
   qsciscintilla.cpp:37:26: error: qkeysequence.h: No such file or directory
   qsciscintilla.cpp:40:19: error: qmenu.h: No such file or directory

  In file included from qsciscintilla.cpp:44:
   Qsci/qscilexer.h:34:19: error: qfont.h: No such file or directory
   Qsci/qscilexer.h:35:18: error: qmap.h: No such file or directory
  In file included from ./Qsci/qscicommand.h:36,
             from Qsci/qsciscintilla.h:42,
             from qsciscintilla.cpp:28:
  ./Qsci/qsciscintillabase.h:69: error: expected class-name before '{' token
  ./Qsci/qsciscintillabase.h:70: error: ISO C++ forbids declaration of 'Q_OBJECT' with  no type
  ./Qsci/qsciscintillabase.h:72: error: expected ';' before 'public'
  ./Qsci/qsciscintillabase.h:3011: error: expected ')' before '*' token 
```

* * *

在更新 Makefile 的 lib 路径并遵循 QScintilla-gpl-2.7.1/doc/html-Qt4Qt5/index.html 上的安装说明后，我已经编译并安装了 QScintilla-gpl-2.7.1，没有错误。

但是，当我运行 example-Qt4Qt5/application 时出现新错误：

```
 ~/qscintilla2/QScintilla-gpl-2.7.1_new/QScintilla-gpl-2.7.1/example-Qt4Qt5] $   ./application

 Unable to load library icui18n "Cannot load library icui18n: (icui18n: cannot open shared object file: No such file or directory)" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T18:10:01.283

> src/XPM.h 中类 RGBAImage 的定义。

链接器不是在抱怨类的定义，而是在抱怨在 XPM.cpp 中定义的类成员函数的定义

那应该在 tarball 中，因此您在提取代码时一定做错了什么。

# java - Java 2D 游戏开发：多键输入

> ID：15865087
> 
> 赞同：1
> 
> 时间：2013-04-07T16:57:06.467
> 
> 标签：java, swing, jpanel, java-2d, keylistener

我正在尝试使控件适用于用 Java 编写的 2D 游戏。但是，我在运动中遇到了一个奇怪的错误。每当我在射击时尝试使用向上和向左控件（空格键）或在射击时使用向下和向右控件时，游戏都无法检测到空格键的按下。以下是相关代码摘录：

```
import java.awt.Image;
import java.awt.event.KeyEvent;
import java.util.ArrayList;
import javax.swing.ImageIcon;

public class Player {
    private String playerPath = "images/craft.png";
    private int x, y, dx, dy;
    private Image image;
    private ArrayList missiles;
    private final int CRAFT_SIZE = 20;

    public Player() {
        ImageIcon ii = new ImageIcon(playerPath);
        image = ii.getImage();
        missiles = new ArrayList();
        x = 20;
        y = 20;
    }
    public void keyPressed(KeyEvent e) {
        int key = e.getKeyCode();
        if (key == KeyEvent.VK_SPACE) {
            fire();
        }
        if (key == KeyEvent.VK_LEFT) {
            dx = -1;
        }
        if (key == KeyEvent.VK_RIGHT) {
            dx = 1;
        }
        if (key == KeyEvent.VK_UP) {
            dy = -1;
        }
        if (key == KeyEvent.VK_DOWN) {
            dy = 1;
        }
    }
    public void keyReleased(KeyEvent e) {
        int key = e.getKeyCode();
        if (key == KeyEvent.VK_LEFT) {
            dx = 0;
        }
        if (key == KeyEvent.VK_RIGHT) {
            dx = 0;
        }
        if (key == KeyEvent.VK_UP) {
            dy = 0;
        }
        if (key == KeyEvent.VK_DOWN) {
            dy = 0;
        }
    }
    public void fire() {
        missiles.add(new Projectile(x + CRAFT_SIZE, y + CRAFT_SIZE/2));
    }
}//end class Player 
```

和

```
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Toolkit;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;
import java.util.ArrayList;
import javax.swing.JPanel;
import javax.swing.Timer;

public class Game extends JPanel implements ActionListener {
    private Player player;
    private Timer timer;

    private int winHeight;
    private int winWidth;
    private final int UP = KeyEvent.VK_UP;
    private final int DOWN = KeyEvent.VK_DOWN;
    private final int LEFT = KeyEvent.VK_LEFT;
    private final int RIGHT = KeyEvent.VK_RIGHT;
    private final int SPACE = KeyEvent.VK_SPACE;

    public Game(int w, int h) {
        addKeyListener(new TAdapter());
        setBackground(Color.BLACK);
        addKeyListener(new TAdapter());
        setFocusable(true);
        setDoubleBuffered(true);

        player = new Player();

        winHeight = h;
        winWidth = w;

        timer = new Timer(5, this);
        timer.start();
    }

    @Override
    public void paint(Graphics g) {
        super.paint(g);

        Graphics2D g2d = (Graphics2D) g;
        g2d.drawImage(player.getImage(), player.getX(), player.getY(), this);

        ArrayList proj = player.getMissiles();

        for (Object p : proj) {
            Projectile b = (Projectile) p;
            g2d.drawImage(b.getImage(), b.getX(), b.getY(), this);
        }

        Toolkit.getDefaultToolkit().sync();
        g.dispose();
    }

    @Override
    public void actionPerformed(ActionEvent e) {

        // Update projectile locations
        ArrayList ms = player.getMissiles();

        for (int i = 0; i < ms.size(); i++) {
            Projectile p = (Projectile) ms.get(i);
            if (p.getX() <= winWidth) {
                p.move();
            } else {
                ms.remove(p);
            }
        }
        player.move();
        repaint();
    }

    private class TAdapter extends KeyAdapter {
        @Override
        public void keyReleased(KeyEvent e) {
            player.keyReleased(e);
        }

        @Override
        public void keyPressed(KeyEvent e) {
            player.keyPressed(e);
        }
    }// end class TAdapter
}// end class Game 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T17:28:01.240

> 每当我在射击时尝试使用向上和向左控件（空格键）或在射击时使用向下和向右控件时，游戏都无法检测到空格键的按下。

仅针对最后按下的键生成 KeyEvents。如果要处理同时按下的多个键，则需要：

1.  跟踪已按下/释放的键
2.  使用 Swing Timer 来安排动画。

然后，每当计时器触发时，您检查当前按下了哪些键并为该键执行操作。

# vb.net - 定位动态创建的按钮

> ID：15865089
> 
> 赞同：0
> 
> 时间：2013-04-07T16:57:28.043
> 
> 标签：vb.net, button, dynamic, position

我正在创建一个程序，该程序根据访问数据库中的条目数创建许多不同的按钮，这些按钮创建得很好，但是它们没有被正确定位，是否有一种简单的方法来控制它们的定位？

这些按钮将用于向 COM 端口发送一串信息，该字符串将根据按下的按钮而有所不同，因为每个按钮上都有一个从数据库中获取的名称。

它们需要像 7 x 4 的表格一样排列，但是我遇到的问题是，当上一行已满时，我无法让按钮进入下一行

# google-apps-script - Google 电子表格 - 如何修改已分配脚本的图像？

> ID：15865103
> 
> 赞同：1
> 
> 时间：2013-04-07T16:58:27.047
> 
> 标签：google-apps-script, google-sheets, google-drive-api

在我读过的所有地方，它都说要在 Google 电子表格中创建一个“按钮”，您需要插入一个图像并为其分配一个脚本。很容易。完毕。

现在如何修改该图像？单击图像运行脚本。我无法右键单击任何上下文菜单的图像。我无法以任何其他方式选择图像。我现在永远无法删除图像。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-12-19T10:06:21.777

也许斯拉夫第一次尝试时使用的是 Mac。奇怪的是，在这种特定情况下，Mac 的右键单击（即 CTRL+单击）确实*不起作用*。有效的是 CMD + 点击。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-31T02:31:47.740

虽然您可以为图像“分配脚本”，但您也可以对绘图执行此操作 - 这更容易自定义。无论哪种方式，您最终都会在电子表格中得到一张图片，并且当您单击它时会触发一个脚本。

要编辑此行为，只需右键单击图像或绘图。（我知道您说过您这样做了，但它确实有效。只需单击 - 然后松开。）图像或绘图上将出现一个锚点，您可以从那里访问菜单以编辑或删除图像或更改附件脚本。

![截屏](https://i.stack.imgur.com/W5mQ8.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-23T16:08:18.477

所以这对我来说很棘手，因为锚在我的图像中是不可见的；它有黑色背景。如果您看不到图像上的锚点，请按照以下步骤操作：

*   右键单击图像，您应该会发现它现在具有调整大小的句柄
*   将光标移动到图像的右上角，直到它变为用食指指向的手（例如当您将鼠标悬停在链接上时）
*   点击
*   做任何你想做的事（编辑，删除......等）

# c# - 格式化动态下拉列表文本（金钱）

> ID：15865106
> 
> 赞同：0
> 
> 时间：2013-04-07T16:58:36.430
> 
> 标签：c#, asp.net, drop-down-menu

我正在尝试格式化下拉列表的文本，但似乎没有任何效果。下面是我的代码：

下拉列表：

```
<asp:DropDownList runat="server" ID="ddlSalary" CssClass="ddlBox" 
    CausesValidation="true" AutoPostBack="true" 
    onselectedindexchanged="ddlSalary_SelectedIndexChanged" /> 
```

后面的代码：

```
if (!IsPostBack)
    {
        ddlSalary.DataSource = Placements.DropDownPopulating("Placement_Salary_From");
        ddlSalary.DataBind();

        ddlSalary.Items.Insert(0, new ListItem("-- Salary --", "0")); 
```

结果：

```
6.0000
200.0000
1000.0000 
```

但我想：

```
£6
£200
£1000 
```

我试过使用：

```
ddlSalary.DataTextFormatString = "{0:C}"; 
```

**编辑**

填充下拉列表：

```
public static List<string> DropDownPopulating(string selectedFilter)
    {
        List<string> returnVal = new List<string> { };
        using (SqlConnection sqlCon = new SqlConnection(ConfigurationManager.ConnectionStrings["websiteContent"].ConnectionString))
        {
            sqlCon.Open();
            string SQL = "SELECT DISTINCT " + selectedFilter + " FROM Placements";
            using (var CMD = new SqlCommand(SQL, sqlCon))
            {
                using (var DR = CMD.ExecuteReader())
                {
                    while (DR.Read())
                    {
                        returnVal.Add(DR[selectedFilter].ToString());
                    }
                }
            }
            sqlCon.Close();
        }
        return returnVal;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T17:39:28.400

`numeric`如果您希望格式化工作，您应该使用数据类型：

```
public static List<T> DropDownPopulating<T>(string selectedFilter)
{
    var returnVal = new List<T>();
    var connectionString = ConfigurationManager.ConnectionStrings["websiteContent"].ConnectionString;
    using (var con = new SqlConnection(connectionString))
    using (var cmd = con.CreateCommand())
    {
        con.Open();
        cmd.CommandText = "SELECT DISTINCT " + selectedFilter + " FROM Placements";
        using (var reader = cmd.ExecuteReader())
        {
            while (reader.Read())
            {
                // if you are using .NET 4.5
                returnVal.Add(reader.GetFieldValue<T>(reader.GetOrdinal(selectedFilter)));

                // if you are using .NET 4.0 or older:
                // returnVal.Add((T)reader.GetValue(reader.GetOrdinal(selectedFilter)));
            }
        }
    }
    return returnVal;
} 
```

进而：

```
ddlSalary.DataSource = Placements.DropDownPopulating<decimal>("Placement_Salary_From");
ddlSalary.DataTextFormatString = "{0:C}";
ddlSalary.DataBind(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T17:12:42.453

使用此查询获取数据.....

```
 select '$'+Cast((Cast(Price as int))as varchar) from TableName 
```

# r - R-在两个数据框中查找匹配列以进行 t 检验统计（R 初学者）

> ID：15865112
> 
> 赞同：3
> 
> 时间：2013-04-07T16:58:57.817
> 
> 标签：r

我想在 R 中对我的数据执行两个样本 t 检验。给定两个高维数据帧，我需要以某种方式遍历所有行的匹配列（标题中的字符串 colnames()）并执行测试每列对 - 分别来自 df1 和 df2。问题是数据帧中的列顺序不正确，即 df1 中的 col1 与 df2 中的 col1 不匹配，并且 df2 具有 df1 中不存在的其他列。我从未将 R 用于此类任务，我想知道是否有一种快速方便的解决方案可以在 t 检验的数据框中找到匹配的列对。

我考虑过 for 循环，但我认为这对于大型数据帧来说效率很低。

预先感谢您的任何帮助。

***EDITED--------两个小的示例数据框，df1 和 df2--------------------------------**

****df1****

```
"Row\Column"    "A2"    "A1"    "A4"    "A3"
"id_1"           10      20      0       40
"id_2"           5       15      25      35
"id_3"           8       0       12      16
"id_4"           17      25      0       40 
```

****df2****

```
"Row\Column"    "A3"    "A8"    "A5"    "A6"    "A1"    "A7"    "A4"    "A2"
"id_1"           0       2       0       4       0       1       2       3
"id_2"           1       5       8       3       4       5       6       7
"id_3"           2       10      6       9       8       9       10      11
"id_4"           7       2       10      2       55      0       0       0
"id_5"           0       1       0       0       9       1       3       4
"id_6"           8       0       1       2       7       2       3       0 
```

匹配列只不过是 df1 中的列名与 df2 中的列名匹配。例如 df1 和 df2 中的两个匹配列是例如“A1”和“A1”，“A2”和“A2”......你明白了......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T17:13:13.207

**`mapply`是您正在寻找的功能。**
如果您`data.frame`的 s 的列匹配，您可以简单地使用

```
mapply(t.test, df1, df2) 
```

* * *

但是，由于它们不这样做，因此您需要以某种方式确定哪一列`df1`与`df2`. 幸运的是，其中的索引选项`R`很聪明，如果您输入列名的向量（*集合*），您将按给定顺序取回这些列。这让生活变得轻松。

```
# find the matching names
## this will give you those names in df1 that are also in df2
## and *only* such names (ie, strict intersect)
matchingNames <- names(df1)[names(df1) %in% names(df2)] 
```

注意它`matchingNames`有一些顺序现在看看当你使用`matchingNames`向量作为 df1 和 df2 的每个列的索引时会发生什么（还要注意列顺序）

```
df1[, matchingNames]
df2[, matchingNames]
matchingNames 
```

因此，我们现在有两个具有正确匹配列的 data.frames，我们可以使用它们来`mapply`覆盖。

```
## mapply will apply a function to each data.frame, one pair of columns at a time

## The first argument to `mapply` is your function, in this example, `t.test`
## The second and third arguments are the data.frames (or lists) to simultaneously iterate over
mapply(t.test, df1[, matchingNames], df2[, matchingNames]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T17:20:31.397

如果没有可重复的例子，很难给你一个好的答案。您还需要定义列是什么意思`matching`。

这是 2 个 data.frames 的示例，它们有一些共同的列名。

```
df1 <- matrix(sample(1:100,5*5,rep=TRUE),ncol=5,nrow=5)
df2 <- matrix(sample(1:100,5*8,rep=TRUE),ncol=8,nrow=5)
colnames(df1) <- letters[6:10]
colnames(df2) <- rev(letters[1:8]) 
```

然后我定义一个 , 的包装器`t.test`，例如将输出限制为 p 值和自由度。

```
f <- function(x,y){
  test <- t.test(x,y)
  data.frame(df   = test$parameter,
                    pval = test$p.value)
} 
```

然后使用`sapply`我迭代我使用的常见列`intersect`

```
sapply(intersect(colnames(df1),colnames(df2)), 
                 function(x) f(df1[,x], df2[,x]))

     f         g         h        
df   7.85416   6.800044  7.508915 
pval 0.5792354 0.2225824 0.4392895 
```

# mysql - MYSQL 秒列时间

> ID：15865115
> 
> 赞同：0
> 
> 时间：2013-04-07T16:59:10.083
> 
> 标签：mysql, sql, sqldatetime

我有一个秒列，我需要以某种可读的格式显示。

```
Table A
Time
259200

select Time from Table A 
```

我需要得到：3 天，`00:00:00`我需要没有几天的`if > 24`时间。

我尝试了很多方法，但我无法得到正确的答案。

我尝试过的几件事是：

```
select  floor(hour( sec_to_time
Select sec_to_time
SELECT TIME_FORMAT( MAKETIME( 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T17:42:46.733

这个怎么样：

```
SELECT 
    CONCAT_WS(' ', 
              `time` DIV 86400, 'day(s) and', 
              SEC_TO_TIME(MOD(`time`, 86400)), 'hours'
             ) 
FROM TableName; 
```

`time DIV 86400`给你天数，`SEC_TO_TIME(MOD(``time``, 86400))`给你`h:m:s`剩余的天数。然后将它们连接起来。

输出：

```
0 day(s) and 01:50:00 hours
1 day(s) and 10:17:36 hours
101 day(s) and 10:50:32 hours 
```

请看[sql fiddle](http://sqlfiddle.com/#!2/31a87/4/0)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T17:07:18.847

查看[MySQL 手册](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)了解时间和日期函数。例如，`SEC_TO_TIME`和`TO_DAYS`。

更新：

没错，我看错了。以下是一个可怕的黑客，但应该给你你想要的答案。对于一个真实的系统，我会为此编写一个适当的函数。

```
concat(floor(hour(sec_to_time(x))/24), " days, ", subtime(sec_to_time(x),concat(floor(hour(sec_to_time(x))/24)*24,":00:00"))) 
```

# canvas - setTransform 阶段方法，Easeljs

> ID：15865133
> 
> 赞同：0
> 
> 时间：2013-04-07T17:00:31.100
> 
> 标签：canvas, easeljs

每次单击链接时，我都会尝试使用 EaselJS 调整画布的大小。我正在这样做：

```
function resizeCanvas(){
    console.log("Resizing...")
    stage.setTransform(0,0,1.5,1.5,1,1,1,1,1);

    stage.update();
} 
```

但似乎它只调整了一次大小。文档说 setTransform 返回一个 DisplayObject：[http ://www.createjs.com/Docs/EaselJS/classes/Stage.html#method_setTransform](http://www.createjs.com/Docs/EaselJS/classes/Stage.html#method_setTransform)

这是否意味着它返回一个我应该分配给我的旧阶段变量的阶段对象？我怎样才能正确调整它的大小？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T17:57:19.250

`setTransform()` `SETs`给定值的转换属性，它不是`add`，进一步缩放的一种方法是将转换值保存在单独的变量/对象中，并在`setTransform()`使用它调用之前增加这些值。

但是，如果您只想缩放舞台并且不想单独保存值，您可以执行以下操作：

```
function resizeCanvas() {
    stage.scaleX *= 1.5;
    stage.scaleY *= 1.5;
    // but beware this is exponetial, maybe you want to use this linear method:
    // stage.scaleX/Y += 0.5;

    stage.update();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T19:50:19.613

许多显示对象方法返回“this”，因此可以链接这些方法，例如：

`container.addChild(new Bitmap(src).set({alpha:0.5}).setTransform(100,200));`

# javascript - 主干中绑定和开启之间的区别

> ID：15865134
> 
> 赞同：7
> 
> 时间：2013-04-07T17:00:32.613
> 
> 标签：javascript, backbone.js, bind, underscore.js, event-binding

Backbone.js 中的 bind() 和 on() 方法有什么区别

on() 的[文档：backbone.js 中的方法文档](http://backbonejs.org/#Events-on)

bind() 的[文档：underscore.js 中的绑定方法文档](http://underscorejs.org/#bind)

两者中的哪一个应该用于绑定对象的自定义事件？

使用示例：

```
this.bind('myEvent', this.render, this);
this.on('myEvent', this.render, this); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-07T17:07:45.753

```
this.bind('myEvent', this.render, this);
this.on('myEvent', this.render, this); 
```

`bind`这些是完全等价的，并且与下划线函数无关。

这是来自[Backbone 源](http://backbonejs.org/backbone.js)代码的一些代码：

```
// Aliases for backwards compatibility.
Events.bind   = Events.on;
Events.unbind = Events.off; 
```

因此，在代码的两行中，您都调用了相同的函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T17:08:14.207

下划线中的 _.bind 与 Backbone 事件对象中的绑定无关。（或下划线）

下划线中的 _.bind 用于将函数绑定到上下文（将其包装在闭包中）。因此，当调用该函数时，上下文 (this) 不会改变。

Backbone 文档明确指出事件中的 bind 方法是 on 方法的别名。那么为什么要链接到下划线中的绑定定义呢？

[http://backbonejs.org/#Events-on](http://backbonejs.org/#Events-on)

# opengl-es-2.0 - 在片段着色器中对浮点数组进行排序，而无需在 OpenGL ES（iPad）中进行动态分支

> ID：15865138
> 
> 赞同：1
> 
> 时间：2013-04-07T17:00:36.263
> 
> 标签：opengl-es-2.0, glsl, gpu

我们有一个有点复杂的片段着色器，我们不能将它拆分成更小的着色器。

着色器所做的一件事是计算片段/像素到其他 7 个点的距离，并找到两个最近的点。

在 iPad 上，这部分代码存在巨大的性能问题，**Instruments**告诉我们瓶颈是着色器代码，它会导致GPU 中的**动态分支**。

我们牺牲了可读性并尝试了几处代码更改以避免这些动态分支：

*   改变了循环，使它不是真正的循环，而是一系列重复的指令。
*   简化代码，使其仅包含非常简单**的类似 if 的**指令。

这是我们提出的代码的“最简单”版本：

```
bool isLowest;
float currentDistance, lowestDistance, newLowest;
lowestDistance = distances[1];
int indexOfLowest = 1, newIndexOfLowest;

// 'loop' for index 2
currentDistance = distances[2];
isLowest = currentDistance < lowestDistance;
newLowest = isLowest ? currentDistance : lowestDistance;
lowestDistance = newLowest;
newIndexOfLowest = isLowest ? 2 : indexOfLowest;    // BAD LINE
indexOfLowest = newIndexOfLowest;

// 'loop' for index 3
currentDistance = distances[3];
isLowest = currentDistance < lowestDistance;
newLowest = isLowest ? currentDistance : lowestDistance;
lowestDistance = newLowest;
newIndexOfLowest = isLowest ? 3 : indexOfLowest;    // BAD LINE
indexOfLowest = newIndexOfLowest;

// etc. until index 8 
```

如您所见，代码找到了最低距离的索引。在我们看来，这段代码可以在没有动态分支的情况下执行。一个“循环”的最后四行只是简单的计算，它们不是真正的分支。

问题是'循环中的倒数第二行，其中`indexOfLowest`获得了一个新值：

```
newIndexOfLowest = isLowest ? 2 : indexOfLowest; 
```

如果我们注释掉该行，那么在 60 FPS 上一切正常，并且 Instruments 不会报告动态分支。但是有了这条线，它不会超过 8 FPS。

**我们如何重写这段代码，使其不会在 GPU 中引起动态分支？**

**编辑：**刚刚将代码更新为更简单的版本，它有同样的问题。旧代码有一个具有固定限制的**for循环。**但问题仍然存在。

**编辑 2：**我们刚刚使用 PowerVR 的 PVRShaderEditor（以前的 PVRUniSCoEditor）分析了代码，它显示了每个着色器源代码行的预期 GPU 周期。有问题的行（上面代码中的 BAD LINE）仅显示 1-2 个 GPU 周期。没有提到这条线导致动态分支导致巨大的性能问题的事实。**我们有什么其他想法可以调试此代码，以便我们了解它为什么会导致这些分支？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T09:29:13.960

我们做到了。在这里投射`bool`to `float`( `1.0`for `true`, `0.0`for `false`) 很有帮助：

```
bool isLowest;
float currentDistance, lowestDistance, newLowest;
lowestDistance = distances[1];
int indexOfLowest = 1, newIndexOfLowest;

// 'loop' for index 2
currentDistance = distances[2];
isLowest = currentDistance < lowestDistance;
indexOfLowest = float(isLowest) * float(2 - indexOfLowest);
lowestDistance = isLowest ? currentDistance : lowestDistance;

// 'loop' for index 3
currentDistance = distances[3];
isLowest = currentDistance < lowestDistance;
indexOfLowest = float(isLowest) * float(3 - indexOfLowest);
lowestDistance = isLowest ? currentDistance : lowestDistance;

// etc. until index 8 
```

这将计算最低距离的索引，而不使用动态分支。

# ruby - 你可以在 Ruby 中的单行中创建/写入/附加一个字符串到文件中吗

> ID：15865140
> 
> 赞同：16
> 
> 时间：2013-04-07T17:00:44.767
> 
> 标签：ruby

是否有可能做到这一点？

```
v='some text'
w='my' + Time.new.strftime("%m-%d-%Y").to_s + '.txt'
File.write(w,v) # will create file if it doesn't exist and recreates everytime 
```

无需在实例上执行 File.open？即只是一个将追加或创建和写入的类方法？理想情况下是红宝石 1.9.3 溶液。

谢谢

**编辑 1**

这是我根据文档尝试过的。我没有看过 rdoc，但看过其他一些例子。我再次询问是否可以通过 File.write 以附加模式打开文件？谢谢

```
irb(main):014:0> File.write('some-file.txt','here is some text',"a")
TypeError: can't convert String into Integer
    from (irb):14:in `write'
    from (irb):14
    from /usr/local/rvm/rubies/ruby-1.9.3-p392/bin/irb:13:in `<main>'
irb(main):015:0>

irb(main):015:0> File.write('some-file.txt','here is some text',O_APPEND)
NameError: uninitialized constant O_APPEND
    from (irb):15
    from /usr/local/rvm/rubies/ruby-1.9.3-p392/bin/irb:13:in `<main>'
irb(main):016:0> 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-04-07T18:04:47.997

Ruby[`IO::write`](http://www.ruby-doc.org/core-1.9.3/IO.html#method-c-write)从 1.9.3 开始就有了。您的编辑显示您传递了错误的参数。第一个 arg 是文件名，第二个是要写入的字符串，第三个是可选的偏移量，第四个是一个散列，可以包含传递给 open 的选项。由于要追加，因此需要将偏移量作为文件的当前大小传递以使用此方法：

```
File.write('some-file.txt', 'here is some text', File.size('some-file.txt'), mode: 'a') 
```

来自讨论线程的提升： **此方法对于 append 存在并发问题，因为偏移量的计算本质上是 racy**。此代码将首先找到大小为 X，打开文件，寻找 X 并写入。`File.size`如果另一个进程或线程在和 seek/write inside之间写到末尾`File::write`，我们将不再追加并覆盖数据。

如果使用 'a' 模式打开文件并且不查找，则可以保证从为[fopen(3) 定义的 POSIX 语义写入到末尾，其中`O_APPEND`](http://linux.die.net/man/3/fopen); 所以我推荐这个：

```
File.open('some-file.txt', 'a') { |f| f.write('here is some text') } 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-10-30T09:48:45.290

为了清楚起见，一些评论表明我测试了这个工作： `IO.write("/tmp/testfile", "gagaga\n", mode: 'a')`

那个附加到文件而不需要计算偏移量。Rubydoc 几乎没有误导性。这是一个关于此的错误： [https ://bugs.ruby-lang.org/issues/11638](https://bugs.ruby-lang.org/issues/11638)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-07T17:02:35.257

```
File.open('my' + Time.new.strftime("%m-%d-%Y").to_s + '.txt', 'w') { |file| file.write("some text") } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-07T17:11:32.997

MRI 已经有这种方法（我实际上是复制并粘贴了您的代码并且它有效），但上次我检查时，JRuby 和 Rubinius 没有。他们可能现在，我不想安装最新版本来查看。

[http://rdoc.info/stdlib/core/IO.write](http://rdoc.info/stdlib/core/IO.write)

# mysql - SELECT * FROM events WHERE repeat IS NOT NULL 中的错误

> ID：15865141
> 
> 赞同：1
> 
> 时间：2013-04-07T17:00:54.377
> 
> 标签：mysql, sql, select

```
 SELECT * FROM events WHERE repeat IS NOT NULL 
```

你好！执行此选择时出现错误：

您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 2 行的“IS NOT NULL”附近使用正确的语法

但是，如果我使用 user_id 进行相同的选择，例如：

```
SELECT * FROM events WHERE user_id IS NOT NULL 
```

我想知道，因为列的名称是正确的

我的表结构：

```
 create_table "events", :force => true do |t|
    t.string   "title"
    t.date     "shedule"
    t.integer  "user_id"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
    t.string   "repeat"
  end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T17:01:54.363

因为`REPEAT`是保留关键字。有两种方法可以摆脱它，

一种是用反引号包裹，

```
SELECT * FROM events WHERE `repeat` IS NOT NULL 
```

第二种是使用表上定义的别名

```
SELECT * FROM events e WHERE e.repeat IS NOT NULL 
```

*   [MySQL 保留关键字列表](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

# sql - 在 SQL Server 2008 R2 的二进制字段中写入数据

> ID：15865142
> 
> 赞同：2
> 
> 时间：2013-04-07T17:00:55.763
> 
> 标签：sql, vb.net, sql-server-2008-r2

我已经用这个代码转换了“密码”输入

```
Dim password As String = (MyPass + MyUName)
    Dim mhash As HashAlgorithm = New SHA1CryptoServiceProvider
    Dim bytValue() As Byte = System.Text.Encoding.UTF8.GetBytes(password)
    Dim bytHash() As Byte = mhash.ComputeHash(bytValue)
    mhash.Clear()
    ENPass = Convert.ToBase64String(bytHash) 
```

使用此代码，我将取回一个与 bytHash 相同的字节数组

```
Dim Text As String = Convert.ToString(OfficeCommsRecs(5))
    Dim oReturn As New StringBuilder
    Dim Separator As String = ("")
    For Each Character As Byte In ASCIIEncoding.ASCII.GetBytes(Text)
        oReturn.Append(Convert.ToString(Character, 2).PadLeft(8, "1"))
        oReturn.Append(Separator)
    Next
    Dim myPass As Object = oReturn 
```

我该怎么做才能取回密码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T19:22:06.053

`ASCIIEncoding.ASCII.GetBytes(Text)`给你一个字节数组。直接在您的数据访问代码中使用它，作为`SqlParameter`.

您不需要您在问题中发布的其余代码：它只创建字节数组的人类可读表示，但数据库不理解这一点。它需要 a `Byte()`，而不是 a `String`。

### 更新

我刚刚意识到我是个傻瓜——我一直在思考技术问题（保存/加载二进制数据）并错过了大局：**你不应该读回密码**。因此，散列是正确的方法，但请在阅读这篇文章时查看这篇精彩的文章：http: [//codahale.com/how-to-safely-store-a-password/](http://codahale.com/how-to-safely-store-a-password/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T19:07:35.880

如果您使用的是存储过程，则在存储数据之前传递字符串并使用 sql 的转换函数，如 Convert(binary,)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T17:38:16.380

查找以下以二进制格式插入字符串的示例：

---创建表

创建表测试（密码二进制（1000））

---为插入值创建过程

创建 Proc InsertValue @password nvarchar(200) 作为插入测试（密码）值（转换（二进制，@密码））

--插入值

执行插入值“新密码”

-----获取二进制数据和转换后的数据

从测试中选择密码，转换（nvarchar（200），密码）密码

# html - 通过 CSS 调整图像大小在 IE8 中不起作用

> ID：15865145
> 
> 赞同：-1
> 
> 时间：2013-04-07T17:01:09.190
> 
> 标签：html, css, internet-explorer

我有这样的风格：

```
input.date_picker, input.datetime_picker {
    background-image: url("/images/calendar.png");
    background-size: 16px 16px;
    background-position: right center;
    background-repeat: no-repeat;
} 
```

我的日期选择器输入将这个小日历定位在右侧，大小为 16x16。在 IE8 中它不起作用，图像占据整个背景。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T17:02:25.607

Background Size 属性是 CSS3 属性，Internet Explorer 8 不支持。您可以尝试将图像作为图像精灵，而不是带定位的背景精灵，然后尝试。或者您可以使 IE 8 背景大小以这种方式工作：

```
filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(
src='images/logo.gif',
sizingMethod='scale');

-ms-filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader(
src='images/logo.gif',
sizingMethod='scale')"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T17:04:09.070

IE 的背景大小仅在 IE9+ 中受支持。最好的办法是首先在图像编辑器中将图像重新调整为正确的大小，然后重新上传。这样你就不会依赖 CSS3 背景大小的浏览器支持。

# sql - ORA-00979: 不是 GROUP BY 表达式

> ID：15865146
> 
> 赞同：2
> 
> 时间：2013-04-07T17:01:13.697
> 
> 标签：sql, count, group-by

我正在尝试展示学生工作的所有不同公司。但是，仅应显示雇用超过四名学生的公司。

这是我到目前为止所拥有的：

```
SELECT EMPLOYER, COUNT (STUDENT_ID)
FROM STUDENT
GROUP BY STUDENT_ID
HAVING COUNT (STUDENT_ID) >4; 
```

我不断收到此消息：

```
ERROR at line 1: 
ORA-00979: not a GROUP BY expression 
```

我不明白。我之前也试过这个：

```
SELECT STUDENT.EMPLOYER, COUNT (STUDENT.STUDENT_ID)
FROM STUDENT
GROUP BY STUDENT.STUDENT_ID
HAVING COUNT (STUDENT.STUDENT_ID) >4; 
```

但似乎没有任何效果。任何帮助表示赞赏。如果有帮助，我正在使用 SQL*Plus。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T17:04:36.650

尝试：

```
SELECT EMPLOYER, COUNT (STUDENT_ID)
FROM STUDENT
GROUP BY EMPLOYER
HAVING COUNT (STUDENT_ID) >4; 
```

- 这将返回一个包含 4 名以上学生的所有雇主的列表。

在对聚合字段进行分组或包含时，您的 select 语句应**仅**包含已聚合或包含在`group by`子句中的字段 - 在您现有的选择中，您将包含`EMPLOYER`在您的 select 子句中，但不按它分组或聚合它。

# mysql - MySQL SELECT 字段小于和大于值

> ID：15865151
> 
> 赞同：5
> 
> 时间：2013-04-07T17:01:41.700
> 
> 标签：mysql, phpmyadmin

我正在尝试使用 phpMyAdmin 或使用 PDO 的 PHP 对 MySQL 进行选择查询。

```
SELECT 'uid' FROM 'clusters' WHERE 'lat'<='47.21125' AND 'lat'>='39.21125' AND 'lng'<='32.90243' AND 'lng'>='22.90243' 
```

但是，phpMyAdmin 说：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''clusters' WHERE 'lat'<='47.21125' AND 'lat'>='39.21125' AND 'lng'<='32.90243' A' at line 1 
```

它有什么问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-07T17:03:43.580

`''`在 MySQL 中创建一个字符串文字，因此您的查询是从文字“clusters”中选择文字“uid”，这是无效的。使用 backtics（或不使用）

```
SELECT Uid FROM clusters WHERE lat <= 47.21125 AND lat >= 39.21125
AND lng >= 22.90243 
```

# php - 使用 mod_rewrite 时，最后用斜杠调用我的网页会导致 ajax 调用出现问题

> ID：15865161
> 
> 赞同：0
> 
> 时间：2013-04-07T17:02:44.367
> 
> 标签：php, ajax, mod-rewrite

使用 PHP、重写规则和 javascript(ajax)。在最后添加斜杠时，我的页面无法正常工作，我遇到了重大问题。

当我调用我的网页时，`www.website.com/example`一切正常。当我称我的网页为`www.website.com/example/`或`www.website.com/example/param`一切都很慢时，最终我的网络浏览器会崩溃。

我已将其缩小到我的 javascript 的特定部分，我使用 ajax 调用另一个 php 文件来替换 div 的内部 html。我用警报替换它以查看它返回的内容，它正在返回我的整个网页，包括一次又一次调用我的 js 的网页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T17:02:44.367

我发现如果你在你的网址中添加一个前导斜杠，它就可以正常工作。

`url: 'somefile.php',`

到

`url: '/somefile.php',`

# mysql - 创建一个不是主键的自动增量列

> ID：15865165
> 
> 赞同：1
> 
> 时间：2013-04-07T17:02:55.400
> 
> 标签：mysql, create-table

我读了很多关于为什么这是一个坏主意的文章，但这就是我想要这样做的原因。我希望我的桌子看起来像这样：

```
id   |   article   |   link   |   text_cont
 1   |   //text    |   www... |  parsed text content
 2   |   //text2   |   www..2 |  parsed text content2 
```

等等。我不希望我的 id 成为主键的原因是因为我希望我的 LINK 成为主键......这样当我运行 Cron 作业以获取更多数据时，我的字段中不会有重复的字段桌子。我可以使用 INSERT IGNORE 并且它不会包含两次相同的链接。但我仍然希望 id 自动递增，这样我就可以使用 id 的“无限滚动”。

这可能吗？我真的希望如此，因为我认为这是拥有这个的一个很好的理由......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T17:05:35.553

您不能自动增加文本字段。

另外，如果您不希望 Id 作为您的密钥，您为什么要 id？似乎您需要更改运行 cron 作业的方式，而不是您的架构

--

如果您还想知道如何创建 AI 字段：

```
link_id int NOT NULL AUTO_INCREMENT 
```

对于现有数据：

```
ALTER TABLE articles MODIFY COLUMN link_id int(4) auto_increment 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T17:14:51.727

您不需要主键就可以让它自动递增。这工作正常。

```
create table dude (
  id int auto_increment,
  link varchar(255),
  primary key (link),
  unique key (id)
);

insert into dude values (null, "www.google.com");
insert into dude values (null, "www.stackoverflow.com");
insert into dude values (null, "www.google.com"); 
```

它可能不是最好的桌子设计，但它回答了你的问题。

# android - 使用 AlarmManager 设置警报不触发

> ID：15865168
> 
> 赞同：0
> 
> 时间：2013-04-07T17:03:01.860
> 
> 标签：android, alarmmanager

所以我一直在关注使用 AlarmManager 设置警报的教程，我试图找出我做错了什么。我需要重写 onReceive 方法吗？

我正在使用 DatePicker 和 TimePicker 小部件，并从它们和用户的输入中获取我的数据。我设置闹钟的主要课程在这里：

```
public void initControls() {
        timePicker = (TimePicker)findViewById(R.id.timePicker);
        datePicker = (DatePicker)findViewById(R.id.datePicker);
        setAlarm = (Button)findViewById(R.id.setAlarm);
        myCal = Calendar.getInstance();

        setAlarm.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View arg0) {
                AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE); 

                myCal.set(Calendar.YEAR, datePicker.getYear());
                myCal.set(Calendar.MONTH, datePicker.getMonth());
                myCal.set(Calendar.DAY_OF_MONTH, datePicker.getDayOfMonth());
                myCal.set(Calendar.HOUR, timePicker.getCurrentHour());
                myCal.set(Calendar.MINUTE, timePicker.getCurrentMinute());
                myCal.set(Calendar.SECOND, 0);

                Intent triggered = new Intent("alarms.DisplayNotification");
                triggered.putExtra("NotificationId", 1);

                PendingIntent displayIntent = PendingIntent.getActivity(
                        getBaseContext(), 0, triggered, 0);

                alarmManager.set(AlarmManager.RTC_WAKEUP, 
                        myCal.getTimeInMillis(), displayIntent);
            }
        });

    } 
```

我正在使用的另一个类是用于使用通知栏并显示警报已触发。

```
@Override
public void onCreate(Bundle SavedInstanceState) {
    super.onCreate(SavedInstanceState);

    int notifID = getIntent().getExtras().getInt("NotificationId");

    Intent i = new Intent("com.example.mt_study.Main_screen");
    i.putExtra("NotificationId", notifID);

    PendingIntent displayAlarm = PendingIntent.getActivity(this, 0, i, 0);

    NotificationManager nm = (NotificationManager)
            getSystemService(NOTIFICATION_SERVICE);
        Notification notif = new Notification(
            R.drawable.book, 
            "Time's up!",
            System.currentTimeMillis());

        CharSequence from = "AlarmManager - Thats all";
        CharSequence message = "Alarm DONE";        
        notif.setLatestEventInfo(this, from, message, displayAlarm);

        //---100ms delay, vibrate for 250ms, pause for 100 ms and
        // then vibrate for 500ms---
        notif.vibrate = new long[] { 100, 250, 100, 500};        
        nm.notify(notifID, notif);
        //---destroy the activity---
        finish();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T17:09:33.133

警报将尝试创建一个活动“alarms.DisplayNotification”。我怀疑这不会触发你的课程。您可能需要不同的警报意图：

```
Intent triggered = new Intent(this, MainActivity.class); 
```

您可能需要替换`this`为`this.getApplicationContent()`.

# javascript - JS 查询 - 全局窗口对象

> ID：15865175
> 
> 赞同：0
> 
> 时间：2013-04-07T17:04:01.270
> 
> 标签：javascript

[此代码生成 x 未定义](http://jsfiddle.net/yjcXe/)

```
var myobj1 = 
{  
    x:9, 
    myfunction:function()
    {
        if(this === window) 
            alert("x is not Defined");
        else if (this === myobj1)
            alert(this.x);
        else
            alert("Error!");
    }
}

function test()
{
    setTimeout(myobj1.myfunction, 1000);
}

test(); 
```

[而此代码生成 x=9 作为输出](http://jsfiddle.net/ptZjD/)

```
var myobj1 = 
{  
    x:9, 
    myfunction:function()
    {
        if(this === window) 
            alert("x is not Defined");
        else if (this === myobj1)
            alert(this.x);
        else
            alert("Error!");
    }
}

function test()
{
    setTimeout(function()
    {
        myobj1.myfunction()
    },  1000); 
} 
```

有人可以解释一下为什么“如果在测试方法中没有使用回调方法，那么就会调用全局窗口对象”和“在这种情况下回调方法的意义是什么”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T17:12:26.687

当你传递`myobj1.myfunction`给`setTimeout()`时，它只传递了函数引用。与该对象的任何连接都将丢失。 `setTimeout()`没有能力在任何特定对象的上下文中调用它的函数引用。因此，您必须通过传递您自己的函数来自己完成，该函数将在对象的上下文中调用该方法，或者您可以`.bind()`在现代浏览器中使用它来做同样的事情。

当你这样做时：

```
setTimeout(myobj1.myfunction, 1000); 
```

javascript 解释器获取函数引用`myobj1.myfunction`并将其传递给`setTimeout()`. 它生成与此相同的结果：

```
var fn = myobj1.myfunction;
setTimeout(fn, 1000); 
```

当它被传递给 时`setTimeout()`，它只是一个函数引用，并且不像`fn()`在任何对象的上下文中那样被调用。请记住，对象上的方法“只是”对象的一个​​属性，它恰好是一个函数。函数内部的`this`指针取决于它的调用方式。如果没有像 in 那样使用对象上下文调用它或使用or`myobj1.myfunction()`显式调用它，那么指针将不是您的对象。`.apply()``.call()``this`

正如您所发现的，您可以创建自己的小存根函数，该函数将在适当对象的上下文中调用它。在现代浏览器中，你也可以`.bind()`这样使用：

```
setTimeout(myobj1.myfunction.bind(myobj1), 1000); 
```

它与第二个代码示例中的存根函数基本上做同样的事情。

# vba - 标题 2 文本与 excel 中的完全相同的文本不匹配：VBA

> ID：15865178
> 
> 赞同：1
> 
> 时间：2013-04-07T17:04:09.283
> 
> 标签：vba, excel, compiler-errors, ms-word

我正在创建一个项目，允许用户在 excel 中创建任务列表，然后将用户创建的任务文本与预制 Word 文档中的第二个标题文本（标题 2）进行比较。我能够获取第二个标题文本并将其保存到数组中，然后获取用户任务列表并将其保存在数组中。然后我尝试使用该函数查看程序中的任务文本（第二个标题）是否在用户任务列表中

```
 If IsError(Application.Match(ProgArray(x), TaskArray, 0)) Then
        'Find within word document and highlight red
    End if 
```

我遇到的问题是，这总是返回错误，因为出于某种原因，即使内置的监视屏幕调试器另有说明，word 文档中的文本也不等于 excel 表中的完全相同的文本。

起初，我使用比较文本软件来确定 word 中的标题文本实际上可能复制了额外的一行。图片说明：![这里的例子](https://i.stack.imgur.com/826QE.png)

但后来我尝试修剪，并检查标题文本是否有 vbNewLine

```
 If Right$(StrFound, 2) = vbCrLf Or Right$(StrFound, 2) = vbNewLine Then 
```

也无济于事，因为这个 if 语句从未被触发。

我的问题是，从 word 文档中获取文本是否还会提取一些我刚刚丢失的隐藏值，如果是这样，有什么办法解决这个问题吗？谢谢你，对不起文字墙。

最后这是我的完整代码：（它不漂亮，因为我现在只是为了功能）

```
'Sub CheckHeader()
Dim blnFound As Boolean
Dim StrFound As String
Dim x As Integer, y As Integer, z As Integer
Dim TaskTotal As Integer
Dim ProgArray(149) As String
Dim TaskArray() As String
Dim NotInArray() As String
Dim NotInProg() As String
Dim appWd As Object
Dim TaskSheet As Worksheet

Set appWd = GetObject(, "Word.Application")
Set wdFind = appWd.Selection.Find
Set TaskSheet = Sheets("Task List")

'Get Task List from Excel
TaskTotal = TaskSheet.Cells(TaskSheet.Rows.Count, 1).End(xlUp).Row - 1
ReDim TaskArray(TaskTotal) As String
ReDim NotInProg(TaskTotal) As String
ReDim NotInArray(TaskTotal) As String

'Get User task list into an array to compare - 0 to 0 is for testing
For x = 0 To 0 'TaskTotal - 1
    TaskArray(x) = TaskSheet.Cells(2 + x, 5).Value '+ " (" & TaskSheet.Cells(2 + x, 1).Value + " " _
        & TaskSheet.Cells(2 + x, 3).Value + ": " & TaskSheet.Cells(2 + x, 4).Value + ")"
Next x

x = 0
y = 0
'Find all instances of Headings
With ActiveDocument.Range.Find
    '.Text = "Test"
    .Style = "Heading 2"

    Do
        blnFound = .Execute
        If blnFound Then
            'MsgBox .Parent.Text
            StrFound = .Parent.Text
            'StrFound = Right(StrFound, InStr(StrFound, ")") + 1)
            StrFound = CStr(StrFound)
            TaskSheet.Cells(2 + x, 120).Value = StrFound
            'At first I thought it was also saving a new line but I couldn't get rid of it
            If Right$(StrFound, 2) = vbCrLf Or Right$(StrFound, 2) = vbNewLine Then
            z = 1
            End If
            ProgArray(x) = TaskSheet.Cells(2 + x, 120)
            'StrFound
            x = x + 1
        Else
            Exit Do
        End If
    Loop
    End With

       'Compare if List is in Program
     For x = 0 To 149
    If x < TaskTotal - 1 Then
        If IsError(Application.Match(TaskArray(x), ProgArray, 0)) Then
            NotInProg(y) = TaskArray(x)
            y = y + 1
        End If
    End If

    'If the header is not within the user created task list then run this case
    If IsError(Application.Match(ProgArray(x), TaskArray, 0)) Then
        'used for debugging, for some reason the header text is larger than the user text
        MsgBox StrComp(ProgArray(x), TaskArray(x))

        NotInArray(z) = ProgArray(x)
        SearchName = NotInArray(z)
        'Increase element
        z = z + 1
        'Check Program and highlight to show that what is in the program is not in the user task list
        With wdFind
            .Text = SearchName
            .Replacement.Text = ""
            .Forward = True
            .Wrap = wdFindContinue
            .Execute
        End With
        If wdFind.Found Then
            'MsgBox " Found it"
            appWd.Selection.Range.HighlightColorIndex = wdRed
        Else
            MsgBox ProgArray(x) + " is not in TaskList"
        End If
    Else
        'Otherwise it is in the program and if it was red, unhighlight the text
        SearchName = TaskArray(x)
        With wdFind
            .Text = SearchName
            .Replacement.Text = ""
            .Forward = True
            .Wrap = wdFindContinue
            .Execute
        End With
        If wdFind.Found Then
            'MsgBox " Found it"
            appWd.Selection.Range.HighlightColorIndex = wdNoHighlight

            ' For not in task Selection.Range.HighlightColorIndex = wdRed

            ' For not in prog Selection.Range.HighlightColorIndex = wdYellow
        Else
            MsgBox TaskArray(x) + " is not here"
        End If
    End If

     'Lastly Check for Ordering

     Next x

     End Sub' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T05:25:19.977

您的代码中有两个问题，解决方案如下：

1.  要剪切新的段落标记，我们需要以这种方式剪切它：

    ```
    .Parent.SetRange .Parent.Start, .Parent.End - 1 
    ```

    您需要在之前放置：

    ```
    StrFound = .Parent.Text 
    ```

2.  此外，`.Parent.MoveEnd`在`x=x+1`您的`do...loop`.

# e-commerce - 税收计算不正确 - WooCommerce

> ID：15865184
> 
> 赞同：0
> 
> 时间：2013-04-07T17:04:54.923
> 
> 标签：e-commerce, woocommerce

在撰写本文时，我正在使用 WooCommerce **1.5.8运行 WordPress** **3.4.1 。**

 **我只是对**税额**更加困惑， 我需要帮助解决 Woocommerce 问题。
Woocommerce 对运输具有“应税”状态。此选项应包括运费税计算（必须由荷兰法律显示）。
但是我选择了这个选项，但是系统只**计算商品的税金**，而**不是运费**。
所以税收计算应该是：（产品价格+运费）的 21%，而现在是产品价格的 21%。

**所以问题是，**
现在的税额是产品的 21%：99.95 - (99.95/1.21) = 17.35。在 woocommerce 的运输设置中，您可以将您的运输设置为添加到税收计算中（税收状态：应税）。

如果选择此选项，则税金计算实际上应该是：
产品成本 + 运输成本 /（（产品成本 + 运输成本）/1.21）。
所以产品总和 + 运费 = 105.90。
这意味着税收计算应为 105.90 - (105.90/1.21) = 18.38

现在
它计算 99.95 - (99.95/1.21) =17.35
我希望它计算 105.90 -(105.90/1.22) = 18.38。

**有人帮忙吗？？？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-21T05:50:50.157

经过太多的研究，我得到了解决方案，它是如此简单......

请按照以下步骤..

1）转到 woocommerce > 设置。

2）在税收选项卡下，有可用的税收选项和税率链接。在税收选项下，选择运费税类..！

3）在税率中，单击您之前选择的税级，然后选中运输栏下的复选框。

因此，现在您的税款计算为：（购物车小计 + 运费）的 21%..

有关屏幕截图的详细信息，请访问： http: [//maishidh.blogspot.in/](http://maishidh.blogspot.in/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T02:42:01.690

我正在查看文档，在我看来，您可能需要完成一些硬编码。以下是关于 Woo commerce Tax Api 的 API 文档。查看第 503 行和第 508 行。也许改变这些变量，看看你会得到什么。

[http://docs.woothemes.com/wc-apidocs/source-class-WC_Tax.html#_calc_shipping_tax](http://docs.woothemes.com/wc-apidocs/source-class-WC_Tax.html#_calc_shipping_tax)**

# prolog - 实现一个 Prolog 谓词来判断一个元素是否属于一个列表。非数字列表的问题

> ID：15865189
> 
> 赞同：5
> 
> 时间：2013-04-07T17:05:18.260
> 
> 标签：prolog, prolog-dif

我正在为大学考试学习 Prolog，但我在这个练习中遇到了问题：

> `not_member(X,L)`如果元素`X`不属于列表，则实现为 TRUE 的谓词`L`。

如果我的推理是正确的，我已经找到了解决方案：

```
% FACT (BASE CASE): It is TRUE that X is not in the list if the list is empty.
not_member(_,[]).

% RULE (GENERAL CASE): If the list is non-empty, I can divide it in its Head
%   element and the sublist Tail. X does not belong to the list if it is different 
%   from the current Head element and if it does not belong to the sublist Tail.
not_member(X,[Head|Tail]) :-
   X =\= Head,
   not_member(X,Tail). 
```

此代码适用于数字列表，如以下查询所示：

```
2 ?- not_member(4, [1,2,3]).
true.

3 ?- not_member(1, [1,2,3]).
false. 
```

但是，对于包含一些非数字元素的列表，它不起作用并报告错误：

```
4 ?- not_member(a, [a,b,c]).
ERROR: =\=/2: Arithmetic: `a/0' is not a function 
```

为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-07T17:15:11.640

让我们检查文档！

[(=\=)/2](http://www.swi-prolog.org/pldoc/doc_for?object=%28=%5C=%29/2)是算术运算符。

> +Expr1 =\= +Expr2 如果表达式 Expr1 的计算结果不等于 Expr2，则为真。

您必须使用[(\=)/2](http://www.swi-prolog.org/pldoc/doc_for?object=%28%5C=%29/2)来比较两个通用术语：

```
not_member(_, []) :- !.

not_member(X, [Head|Tail]) :-
     X \= Head,
    not_member(X, Tail). 
```

和：

```
?- not_member(d, [a,b,c]).
true. 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-07-09T01:54:58.517

使用[prolog-dif](/questions/tagged/prolog-dif "显示标记为“prolog-dif”的问题")获得**逻辑上合理的答案**——适用*于*地面*和*非地面情况！

就像[在这个答案](https://stackoverflow.com/a/10322639/4609915)中一样，我们定义`non_member(E,Xs)`为`maplist(dif(E),Xs)`。

让我们 [通过@Haile](https://stackoverflow.com/a/15865303/4609915)`maplist(dif(E),Xs)`进行测试！[`*not_member*(E,Xs)`](https://stackoverflow.com/a/15865303/4609915)

```
?- *not_member* (E,[1,2,3])。
假的。%错了！`E=4` 呢？

?- maplist(dif(E),[1,2,3])。
差（E，1），差（E，2），差（E，3）。未决目标的成功百分比

```

是坚定的吗？（有关此重要问题的更多信息，请阅读 [此](https://stackoverflow.com/a/14556019/4609915)、[此](https://stackoverflow.com/a/30827427/4609915)、[此](https://stackoverflow.com/a/15710541/4609915)和[此](https://stackoverflow.com/a/29888591/4609915)答案。）

```
?- E=d, *not_member* (E,[a,b,c])。
E = d。
?-       *not_member* (E,[a,b,c]), E=d。
假的。%不坚定

?- E=d, maplist(dif(E),[a,b,c])。
E = d。
?- maplist(dif(E),[a,b,c]), E=d。% 坚定不移
E = d。

```

让我们不要忘记最一般的用途！

```
?- *not_member* (E,Xs)。               
Xs = []。%缺少*很多*解决方案！

?- maplist(dif(E),Xs)。
  Xs = []
; Xs = [_A] , 差异 (E,_A)
; Xs = [_A,_B] ，差异（E，_A），差异（E，_B）
; Xs = [_A,_B,_C]，差异（E，_A），差异（E，_B），差异（E，_C）
...

```

# llvm - 如何调用未知类型的 JITed LLVM 函数？

> ID：15865191
> 
> 赞同：3
> 
> 时间：2013-04-07T17:05:19.753
> 
> 标签：llvm, jit, llvm-c++-api

我正在使用 LLVM 实现 JIT 编译器的前端。我从 LLVM 教程中的 Kaleidoscope 示例开始。我知道如何使用 LLVM C++ API 生成和 JIT LLVM IR。我也知道如何调用 JITed 函数，使用 llvm::ExecutionEngine 的“getPointerToFunction”方法。

getPointerToFunction 返回一个 void* ，然后我必须将其转换为正确的函数类型。例如，在我的编译器中，我有如下所示的单元测试：

```
void* compiled_func = compiler.get_function("f");   
auto f = reinterpret_cast<int32_t(*)(int32_t)>(compiled_func);
int32_t result = f(10); 
```

问题是我必须事先知道函数签名。在上面的示例中，我有一个函数“f”，它接受一个 32 位整数并返回一个 32 位整数。因为我自己创建了“f”，所以我知道函数类型是什么，所以我可以调用 JIT 函数。但是，一般来说，我不知道用户输入的函数签名是什么（或结构类型是什么）。用户可以创建具有任意参数和返回类型的任意函数，所以我不知道从 LLVM 的 getPointerToFunction 转换 void* 的函数指针类型。我的运行时需要能够调用这些函数（例如，对于 Read-Evaluate-Print 循环）。如何从我的 JIT 运行时处理这些任意函数？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T06:41:51.837

您可以从中获得的信息不多`compiled_func`- 正如您所写，它只是一个`void*`. 但是当你写“一般来说，我不知道函数签名是什么”时，这是不准确的——你刚刚编译了那个函数，所以你应该可以访问 LLVM`Function`对象，可以查询它的类型。的确，它是 LLVM IR 类型而不是 C++ 类型，但您通常可以知道哪个转换为哪个。

例如，如果我们从[教程的 JITting Kaleidoscope 部分](http://llvm.org/docs/tutorial/LangImpl4.html#adding-a-jit-compiler)借用代码：

```
if (Function *LF = F->Codegen()) {
  LF->dump();  // Dump the function for exposition purposes.

  // JIT the function, returning a function pointer.
  void *FPtr = TheExecutionEngine->getPointerToFunction(LF);

  // Cast it to the right type (takes no arguments, returns a double) so we
  // can call it as a native function.
  double (*FP)() = (double (*)())(intptr_t)FPtr;
  fprintf(stderr, "Evaluated to %f\n", FP());
} 
```

那么是的，`FPtr`被“假定”为 type `double ()`，但这里也`LF`有 type `Function*`，所以你*可以*做类似的事情：

```
Type* RetTy = LF->getReturnType();
if (RetTy->isDoubleTy()) {
  double (*FP)() = (double (*)())(intptr_t)FPtr;
  fprintf(stderr, "Evaluated to %f\n", FP());
} else if (RetTy->isIntegerTy(32)) {
  int (*FP)() = (int (*)())(intptr_t)FPtr;
  fprintf(stderr, "Evaluated to %d\n", FP());
} else ... 
```

以同样的方式，您可以查询函数的参数类型。

有点麻烦？您可以使用执行引擎通过其方便的[`runFunction`](http://llvm.org/docs/doxygen/html/classllvm_1_1ExecutionEngine.html#a83ac805ce571233b79802b8210332039)方法调用该函数，该方法接收 s 的向量[`GenericValue`](http://llvm.org/docs/doxygen/html/structllvm_1_1GenericValue.html)并返回 a `GenericValue`。您仍然应该查询`Function`类型以查找每个类型下的基础类型`GenericValue`应该是什么。

# delphi - 如何通过本地网络连接到delphi 7中的firebird数据库？

> ID：15865193
> 
> 赞同：0
> 
> 时间：2013-04-07T17:05:23.833
> 
> 标签：delphi, firebird, zeos

如何将我的 delphi 7 应用程序连接到本地网络？我正在使用 zeos 并已在对象检查器中将 ZConnection1 主机名设置设置为我的服务器的 ip，我可以连接到我现在正在编码的计算机上，但无法使用网络中的另一台计算机连接到 dabatase。我已将数据库路径设置为 C:\Documents and Settings\Administrator\My Documents\test.FDB。我需要将其更改为IP地址吗？谢谢

我使用的组件是

*   1个zconnection
*   1个ztable
*   1 个数据源
*   1分贝网格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T17:22:14.220

尝试

```
ipserver:C:\Documents and Settings\Administrator\My Documents\test.FDB 
```

其中 ipserver 是您计算机的名称或 ip。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T18:08:10.070

据我从`TZConnection`类[文档](http://sourceforge.net/projects/zeoslib/files/Zeos%20Database%20Objects/zeosdbo-7.0.3-stable/ZEOSDBO-7.0.3-stable_doxygen.zip/download)中可以看出，您需要设置属性`HostName`，`Port`（可能是可选`Database`的）和（只有数据库别名或完整路径，没有主机名）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T18:44:06.263

@airoch 的

谢谢你的提示。两天前让我的应用程序正常工作只是遇到了一些我为什么没有发布的互联网问题。

我刚刚更改了 aliases.conf 中的别名，它起作用了！感谢所有为我的帖子抽出时间的专家！

# c++ - 了解初始化过程

> ID：15865194
> 
> 赞同：2
> 
> 时间：2013-04-07T17:05:24.987
> 
> 标签：c++

这是我试图了解类初始化如何工作的尝试。我不确定一切，这就是我问这个问题的原因。这就是我认为当我们执行以下操作时会发生的情况：

```
T t = u; 
```

1.  从构造一个类型的`T`对象`u`。然后变成：

    ```
    T t = T(u); 
    ```

2.  调用复制构造函数：

    ```
    T t( T(u) ); 
    ```

好的，第二个是我不理解的部分。我在某个地方读到`T t = u`了`T t(T(u))`. 但如果这是真的，为什么不打印“复制构造函数”：

```
struct T
{
  template <class U>
  T(U) {
     std::cout << "constructs an object of type T...\n";
  }

  T(T const &)
  {
     std::cout << "copy-constructor";
  }

  T& operator=(T const &)
  {
     std::cout << "assignment operator"; return *this;
  }

  T() = default;
};

int main()
{
   T t(T(5));
} 
```

实际上，这一切都是打印“构造一个 T 类型的对象”。为什么这里不调用复制构造函数？`T(5)`可以制成一个类型的对象，该对象`T const &`被传递给构造函数，`T`因此不应该调用适当的构造函数。

我真的很想对此有所了解。我一直试图理解这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T17:14:09.037

这种情况有一个特殊的规则。允许编译器跳过复制构造函数，即使它有副作用，只要带有复制构造函数的表达式是合法的。所以

```
T t = u; 
```

正如你所说，相当于

```
T t(T(u)); 
```

编译器跳过复制构造函数并将其视为

```
T t(u); 
```

不允许这样做的一种情况是具有私有复制构造函数的类。在这种情况下，`T t(T(u));`将不合法，并且不允许编译器通过跳过复制构造函数使其合法。

# c - C pthread_join 分段错误

> ID：15865197
> 
> 赞同：0
> 
> 时间：2013-04-07T17:05:39.087
> 
> 标签：c, pthreads, posix

我正在尝试编写一个 C 程序，该程序使用线程为我的分配计算目录树的大小。

**当只有一个子目录时，我的代码可以正常工作，但是每当我有 2 个或更多子目录时，我就会收到分段错误错误。**我阅读了很多关于它的内容，但无法找到我的代码失败的原因。

在我的**全球**范围内：

```
pthread_mutex_t mutex;
int total_size = 0; // Global, to accumulate the size 
```

**主要的（）：**

```
int main(int argc, char *argv[])
{
    pthread_t thread;

    ...

    if (pthread_mutex_init(&mutex, NULL) < 0) 
    {
        perror("pthread_mutex_init");
        exit(1);
    }

    pthread_create(&thread, NULL, dirsize, (void*)dirpath);
    pthread_join(thread, NULL);

    printf("\nTotal size: %d\n\n", total_size);

...
} 
```

我的**dirsize()**函数：

```
void* dirsize(void* dir)
{
    ...

    pthread_t tid[100];
    int threads_created = 0;

    dp=opendir(dir);
    chdir(dir);

    // Loop over files in directory
    while ((entry = readdir(dp)) != NULL)
    {
        ...

        // Check if directory
        if (S_ISDIR(statbuf.st_mode))
        {
            // Create new thread & call itself recursively
            pthread_create(&tid[threads_created], NULL, dirsize, (void*)entry->d_name);
            threads_created++;
        }
        else
        {
            // Add filesize
            pthread_mutex_lock(&mutex);
            total_size += statbuf.st_size;
            pthread_mutex_unlock(&mutex);
        }
    }

    for (i = 0; i < threads_created; i++)
    {
        pthread_join(tid[i], NULL);
    }
} 
```

我在这里做错了什么？如果您能指出正确的方向，将不胜感激。

这是我通过 gdb 得到的：http: [//pastebin.com/TUkHspHH](http://pastebin.com/TUkHspHH)

先感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T17:16:41.347

**NUM_THREADS**的值是多少？

```
 // Check if directory
    if (S_ISDIR(statbuf.st_mode))
    {
        // Create new thread & call itself recursively
        pthread_create(&tid[threads_created], NULL, dirsize, (void*)entry->d_name);
        threads_created++;
    } 
```

在这里，您应该检查**threads_created**是否等于**NUM_THREADS**，如果是，则增加**tid**数组的大小（我将在函数开始时**malloc并在最后****释放**，顺便说一句）。

此外，您应该在将目录名称（malloc + strcpy）作为参数传递给线程之前分配目录名称的副本，并在函数结束时释放此类副本而不是`entry->d_name`.

# android - 不允许第三方输入法 - android

> ID：15865198
> 
> 赞同：0
> 
> 时间：2013-04-07T17:05:44.843
> 
> 标签：android, android-edittext, ime

我正在开发一个应用程序，我不希望文本字段中的键盘被用户安装的第三方替换。我希望始终使用系统一。或者，我的应用程序中包含一个自定义的，以便始终使用。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T17:13:08.193

抱歉，您无法控制用户在您的 Android 应用中使用的键盘。

充其量，您总是可以让用户使用您的键盘，但是您必须扩展和自定义每个接受输入的 UI 组件，以便在单击时显示您的键盘。

# facebook-android-sdk - Trigger.io Android 移动应用程序使用过时的 Facebook SDK？从 Facebook 升级到 3.0.1 的警告

> ID：15865201
> 
> 赞同：1
> 
> 时间：2013-04-07T17:06:18.867
> 
> 标签：facebook-android-sdk, trigger.io, android-facebook

我最近在 developer.facebook.com 上收到了关于我使用 Trigger.io Forge 构建的 Android 应用程序的警报：

> 请升级到适用于 Android 的 Facebook SDK 3.0.1 注意星期四 此应用使用适用于 Android 的 Facebook SDK 的过时版本。请下载最新版本：Android SDK 3.0.1。您还可以了解最新的 SDK 如何让构建出色的移动应用程序变得更轻松、更快捷。
> 
> 我们还提供了升级指南，以使此过程尽可能简单。
> 
> Facebook 将于 2013 年 6 月停止支持 v2.0 SDK，建议您尽快升级到新的 SDK。

我正在使用最新的 Forge 平台版本 1.4.38。

Trigger.io 使用的是什么版本的 FB SDK，更新到 3.0.1 的时间表是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T19:24:11.807

我们在 v1.4.41 平台版本中更新了与最新 Facebook Android SDK（此时为 3.0.1）的集成：http: [//docs.trigger.io/en/v1.4/release-notes.html#v1- 4-41](http://docs.trigger.io/en/v1.4/release-notes.html#v1-4-41)

# css - CSS文本装饰问题

> ID：15865207
> 
> 赞同：0
> 
> 时间：2013-04-07T17:06:41.433
> 
> 标签：css

我有一个已超链接的文本框，问题是我试图从超链接文本中删除下划线。

该`text-decoration:none;`设置应该删除它，但它似乎不起作用。

如何从超链接文本中删除此下划线？

![在此处输入图像描述](https://i.stack.imgur.com/x3Ic2.jpg)

**HTML：**

```
<a href=""><div class = "i6">Test Page</div></a> 
```

**CSS：**

```
.i6 {
  height:30px; 
  width:80px;
  position:absolute;
  left:1150px;
  top:10px;
  font-family: Lucida Sans;font-size:15px; 
  color: #FFFFFF;
  background-color:#C1DAD4; 
  margin:10px;
  list-style:none;
  text-align:center;
  padding-top:0px;
  padding-bottom:10px;
  padding-right:2px;
  padding-left:0px;
  text-decoration:none;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T17:08:00.133

您需要应用`text-decoration:none;` 到链接本身，而不是内部`div.`

例如，您可以给链接本身一个类，例如：

```
<a href="" class="theLink"><div class = "i6">Test Page</div></a> 
```

然后在您的 CSS 中，您可以定位链接本身：

```
.theLink {
  text-decoration:none;
} 
```

**这是一个有效的[jsFiddle](http://jsfiddle.net/2RjXM/)。**

# php - Joomla 是否支持 DELETE http 请求

> ID：15865209
> 
> 赞同：2
> 
> 时间：2013-04-07T17:06:44.250
> 
> 标签：php, joomla, joomla3.0, joomla3.1

Joomla 是否有可以用来从中获取 DELETE 请求参数的方法或对象？我在任何地方都没有看到它。这适用于 Joomla 3.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T19:21:09.980

我不确定这种请求类型是否有效。看一下这个：

```
$jinput = JFactory::getApplication()->input;
echo "Method is: " . $jinput->getMethod();
$x = $jinput->get('x');
var_dump($x); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T07:27:34.993

我不确定 DELETE，但对于 PUT，请查看：PHP: [PUT method support](http://php.net/manual/en/features.file-upload.put-method.php)。

最近发布了[Joomla CMS Web 服务 API 实现](http://docs.joomla.org/Web_Services_Working_Group)的 Joomla [Web 服务工作组](http://docs.joomla.org/Web_Services_Working_Group)。

虽然 Web 服务 API 还不是当前 Joomla 发行版的一部分，但这是设计 REST API 的推荐方式。

# uml - 如何形式化 Uml

> ID：15865219
> 
> 赞同：2
> 
> 时间：2013-04-07T17:07:30.143
> 
> 标签：uml, z-notation, formalize

有没有办法将 UML 转换（形式化）为 Z 表示法？我的意思是有什么方法可以将 UML 需求重写为像 z 这样的正式语言？

对不起我的英语不好，我的母语不是英语。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T08:43:31.923

有一种方法：您可以从 UML 生成代码 - 因此没有人阻止您从中生成 Z。使用基于模板的代码生成器轻松更改模型生成的文本。但我怀疑你不会找到开箱即用的解决方案。尽管如此，一个简短的搜索发现[人们已经这样做了](http://irit.fr/~Emmanuel.Dubois/Research/Projects/Previous/AS/Dupuy_UMLZLustre.pdf)。

# xcode - 应用程序在模拟器和设备上崩溃，但在分析时没有

> ID：15865221
> 
> 赞同：0
> 
> 时间：2013-04-07T17:07:32.663
> 
> 标签：xcode, cocos2d-iphone, xcode4.5, instruments

应用程序在模拟器和设备上因信号`SIGABRT`（调试器输出为）而崩溃。`child already added. It can't be added again`当我在 Xcode 中分析应用程序并在模拟器或设备上运行它时运行良好。为什么是这样？

更新：我发现这行代码导致了问题：

```
Mover *moverObject = [[[Mover alloc] init] autorelease];
NSMutableArray * array = [moverObject moveToward:startPoint :finalPoint]//<-- This is the problem 
```

`moveToward`是返回 a 的方法，其中`NSMutableArray`包含从`startPoint`到 的点`finalPoint`。这在今天早些时候工作得很好，但是在我开始测试新的东西之后，我想我把它弄坏了。`Mover.h/.m`我只是在`GameLayer.m`（我添加代码的地方）中没有对实际进行任何更改。我不确定我添加了什么导致问题。

更新 2：我使用断点进行了更多挖掘，我发现

```
GameLayer *gameLayerObject = [[GameLayer alloc] init];<-- This causes the crash 
```

在`mover.m`方法所在的内部`moveToward::`，这是它不会崩溃的最远距离。再次错误是`child already added. It can't be added again.`为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T18:53:23.383

这可能只是巧合。很难说，因为你没有发布任何代码。

但是错误消息很清楚：您`addChild`多次尝试同一个节点，无论是同一个父节点还是不同的父节点。检查您的代码以了解可能发生这种情况的情况。

# r - 使用 survreg/tobit 预测超出界限

> ID：15865222
> 
> 赞同：2
> 
> 时间：2013-04-07T17:07:43.113
> 
> 标签：r, prediction, predict, survival-analysis

所以我正在使用 survreg，我希望我的预测结果遵循 0 的下限，但它们经常表示负面结果。我认为它以某种方式估计了线性结果，而不是我试图创建的生存模型。这是我所做的：

```
linear.first.stage<-lm(y ~ x, data=clip) 
```

首先，我估计了一些点来加快我的估计过程。如果没有这个第一阶段，它就无法收敛。我按照 ?survreg 中的代码创建了一个生存对象，该代码提供了一个明确的 tobit 回归示例。我在下面为 x 和 y 复制了这个。在我的数据集中，y 只能观察到非负值，但如果它是正值，它往往会在 200 左右正态分布，sd 约为 20。X 可以取任何值，理论上不受约束通过立即想到的任何特定数字。

```
surv_y<-Surv(clip$y, clip$y>0,type="left")
first.stage<-survreg(surv_y ~ x,init=(linear.first.stage), dist="gaussian", data=clip) 
```

我运行生存回归，它应该相当于一个 Tobit。为了确认我对事件的解释是相同的，我运行了以下命令：

```
test<-tobit(y~x, left=0, right=Inf, dist="gaussian", data=clip)
p_test<-predict(test)
p<-predict(first.stage)
plot(p_test-p) 
```

该图在零处显示一条平线，因此在目视检查时，这些命令应该是相同的。但是，在这两种情况下，都会预测到低于 0 的结果。这是有问题的，因为我已经说过可观察信息的左边界是 0。我的期望是所有预测值都必须 > 0。

我尝试使用“链接”、“响应”、“线性”类型进行预测，但无济于事。我假设 predict 命令正在产生结果*，就好像审查没有发生一样*。如何生成服从下限 0 的预测？

参考：

1.  [在包 AER 中的 tobit() 之后运行 predict()](https://stackoverflow.com/questions/10777088/running-predict-after-tobit-in-package-aer)
2.  [https://stats.stackexchange.com/questions/11440/standardized-residuals-of-a-tobit-model-in-r](https://stats.stackexchange.com/questions/11440/standardized-residuals-of-a-tobit-model-in-r)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-19T14:07:46.177

答：Tobit 不是正确的回归类型。Tobit 预测在没有截断的情况下结果应该是什么。

澄清：我重组了我的估计过程以反映零膨胀或障碍模型。Tobit 用于审查数据，它表示存在非零结果，但我们只观察到 0，因为信息以某种方式隐藏。例如，女性的工资应该与 Tobit 相匹配，因为选择不工作的已婚女性仍然有保留工资，并且仍然有一些（无形的）回报努力从事任何类型的无偿劳动。零膨胀或障碍模型表明结果确实为零。如在，没有发生犯罪。或者没有生成小部件。它们更准确地反映了我的模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-04T14:35:41.743

您可能需要按照包的一位作者在[此处描述的意义上扩大预测。](https://stats.stackexchange.com/questions/149091/censored-regression-in-r)

# android - 一个意图可以匹配同一应用程序的多个意图过滤器吗？

> ID：15865227
> 
> 赞同：0
> 
> 时间：2013-04-07T17:08:14.790
> 
> 标签：android, android-intent, intentfilter

由于应用程序可以为应用程序的不同组件定义相同的意图过滤器，因此意图很可能会匹配同一应用程序的多个组件。如果是这样，会发生什么？会不会有错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T17:19:20.160

> 如果是这样，会发生什么？

假设您指的是`startActivity()`，那么我希望您的应用程序中的所有匹配活动以及设备上匹配的任何其他活动都出现在选择器中。

> 会不会有错误？

可能不是。但是请注意，您所描述的内容非常不寻常。通常，应用程序只需要一个活动来响应任何给定的`Intent`结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T17:13:35.857

最合适的意图过滤器将捕获意图。从[文档](http://developer.android.com/guide/components/intents-filters.html)：

> 隐式意图需要不同的策略。在没有指定目标的情况下，Android 系统必须找到处理意图的最佳组件（或多个组件）——单个活动或服务来执行请求的操作或一组广播接收器来响应广播公告。它通过将 Intent 对象的内容与意图过滤器（与可能接收意图的组件关联的结构）进行比较来实现这一点。过滤器宣传组件的功能并划定它可以处理的意图。它们使组件有可能接收广告类型的隐式意图。如果组件没有任何意图过滤器，则它只能接收显式意图。带有过滤器的组件可以接收显式和隐式意图。

...

> 过滤器具有与 Intent 对象的操作、数据和类别字段平行的字段。在所有三个区域中针对过滤器测试隐式意图。要交付给拥有过滤器的组件，它必须通过所有三个测试。即使其中一个失败，Android 系统也不会将其传递给组件——至少不会基于该过滤器。但是，由于一个组件可以有多个意图过滤器，因此未通过组件过滤器之一的意图可能会通过另一个过滤器。

简而言之：不会有错误。系统试图找到与意图的最佳匹配，这可能偶尔会涉及到用户（想想你安装新浏览器的时候）。

# c++ - c++类模板返回值错误

> ID：15865228
> 
> 赞同：0
> 
> 时间：2013-04-07T17:08:18.267
> 
> 标签：c++, eclipse, templates, pointers, queue

我正在使用 eclipse 编写一个队列，一个名为 getFirst 的函数定义为：

```
template<class T>
T getFirst(){
    return head->data;
} 
```

主要是在声明队列 Q 并输入一些有效数据后，例如：

```
Queue<int> Q; 
Q.add(2);
cout << Q.getFirst() << endl; 
```

输出是 2，这正是我想要的；

但！！！如果我将代码更改为：

```
Queue<int> Q; 
Q.add(2);
cout << Q.getFirst() << endl;
cout << Q.getFirst() << endl; 
```

输出不是：

```
2
2 
```

但类似：

```
2
2657382 
```

经过一番思考，我将代码修改为：

```
Queue<int> Q; 
Q.add(2);
cout << Q.getFirst();
cout << Q.getFirst() << endl; 
```

这次成功了！！正好！！输出是 22，这是有道理的。

有人可以在这里向我解释这个问题吗？

Node 和 Queue 的定义是通用的和通用的：

```
template<typename T>
class Node{
public:
Node(T data, Node* left = 0, Node* right = 0): _data(data), _left(left), _right(right){
    if(left)
        left->_right = this;
    if(right)
        right->_left = this;
}
Node(): _right(0){}
private:
T _data;
Node<T>* _left;
Node<T>* _right;

friend class Queque<T>;
};

template<typename T>
class Queque{
public:
Queque(): _first(new Node<T>), _size(0){
    _first->_right = _first;
    _first->_left = _first;
}

void addFirst(T item){
    Node<T>(item, _first, _first->_right);
    _size++;
}

T examineFirst(){
    return _first->_right->_data;
}

private:
Node<T>* const _first;
int _size;
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T17:34:20.810

```
void addFirst(T item){
    Node<T>(item, _first, _first->_right);
    _size++;
} 
```

Node 是一个堆栈变量，它的构造函数将更改 _first 和 first->_right 指向某个堆栈地址，这将导致无法预测的结果，在您的示例用法中 << endl; 修改堆栈，导致一些垃圾输出。要解决此问题，您需要将 new 用于新节点分配，当然稍后使用 delete 释放它们。

# c++ - FindFirstChangeNotification 两次通知更改

> ID：15865232
> 
> 赞同：5
> 
> 时间：2013-04-07T17:08:36.440
> 
> 标签：c++, windows, winapi

我想监视我的文件系统中的一个文件夹。假设我要监视文件夹： C:\MyNewFolder

我有这个代码来做到这一点：

```
HANDLE  ChangeHandle=FindFirstChangeNotification(_T("C:\\\MyNewFolder"),FALSE,FILE_NOTIFY_CHANGE_LAST_WRITE);
for(;;)
{
    DWORD Wait=WaitForSingleObject(ChangeHandle,INFINITE);
    if (Wait == WAIT_OBJECT_0)
    {
        MessageBox(NULL,_T("Change"),_T("Change"),MB_OK);
        FindNextChangeNotification(ChangeHandle);
    }
    else
    {
        break;
    }
} 
```

我想要一个消息框来通知我文件夹中的任何文件更改。该代码工作正常，但我有一个问题。问题是每次更改我都会收到 2 个通知。我的代码有什么问题？谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-07T20:29:36.240

这是完全正常的。对文件的更改通常涉及对文件数据的更改以及对目录条目的更改。文件长度和上次写入日期等元数据属性存储在那里。因此，您将收到两者的通知。ReadDirectoryChangesW() 不会以其他方式区分两者。

这与对同一文件进行多次更改的过程没有什么不同。确保能够处理这两种情况。这通常涉及一个计时器，因此您不会过度使用您在通知上执行的操作数量。这样的计时器也经常需要，因为更改文件的进程仍然有一个锁定，阻止您对文件执行任何操作。直到该进程关闭文件，一段时间后才能确定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T20:15:48.930

您可能看到的是对一个文件的多次更改（例如，一个文件被创建，然后被写入，或者一个文件被多次写入，等等）。不幸的是`FindFirstChangeNotification`，并没有告诉你实际发生了什么。

你最好使用`ReadDirectoryChangesW`文件通知，因为它实际上会告诉你**发生了什么**变化。

# java - 在退出时保存图像和字符串

> ID：15865233
> 
> 赞同：0
> 
> 时间：2013-04-07T17:08:37.830
> 
> 标签：java, android

当我退出我的应用程序时，我想保存图像列表和字符串列表（当我再次打开我的应用程序时，我可以操作它们）

我没有找到如何实现它。

我只发现我可以用这个保存我的详细信息：

```
SharedPreferences myPrefs = getSharedPreferences("myPrefs", MODE_PRIVATE);

    SharedPreferences.Editor e = myPrefs.edit();
    e.putString("pathreturned", path);
    e.commit(); 
```

但是我没有找到如何保存列表（位图或字符串）或照片？

多谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T17:24:46.513

[如何在 Android 中保存图像？](https://stackoverflow.com/questions/9830483/how-to-save-images-in-android)这不讨论 SD 卡，并建议您将文件作为 BLOB 保存到 SQLite 数据库。

或者，[将图像从 Android 上的 drawble 资源保存到 sdcard](https://stackoverflow.com/questions/10558053/save-image-to-sdcard-from-drawble-resource-on-android)突出显示了如何将其保存到 SD 卡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T18:07:36.903

你可以这样做，但你必须将图像保存在 sd 卡上，你可以按如下方式使用它......

```
SharedPreferences mypref = PreferenceManager.getDefaultSharedPreferences(this);
Editor edit=mypref.edit();
edit.putString("imagepath","/sdcard/imagename.jpeg");
edit.commit(); 
```

# java - 反序列化时 Gson 无法“理解”泛型类型

> ID：15865234
> 
> 赞同：1
> 
> 时间：2013-04-07T17:08:45.203
> 
> 标签：java, generics, deserialization, gson

我创建了这个内存类：

```
public class Memory {
    private final Hashtable<String, String> data;
    private final Gson gson;

    public Memory() {
        this.data = new Hashtable<String, String>();
        this.gson = new Gson();
    }

    public <T> void set(String key, List<T> value) {
        this.data.put(key, this.gson.toJson(value));
    }

    public <T> List<T> get(String key, Class<T> cls) {
        Type type = new TypeToken<List<T>>() {}.getType();
        return this.gson.fromJson(this.data.get(key), type);
    }
} 
```

我可以在 json 中存储泛型类型列表然后反序列化它们。
但是当我尝试使用它时，例如这样：

```
public class User {
    private int id;
    private String username;

    public User() { }

    public User(int id, String username) {
        this.id = id;
        this.username = username;
    }
}

Memory memory = new Memory();
List<User> users = new ArrayList<User>();
// add users
memory.set("users", users);

// now get the users back
List<User> copy = memory.get("users", User.class); 
```

Gson 返回 StringMap 的 ArrayList 而不是 Users。
这显然与我正在使用的泛型有关，但是有没有办法绕过它？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T17:48:16.370

Java 泛型允许的明显不一致突出了这里真正的失败，其中 a`List<User>`最终被`com.google.gson.internal.StringMap`!的实例填充。但这完全是另一个话题。

直接的问题是您没有正确使用类型令牌类。令牌的重点是您必须使用具体类型扩展类 - 但是您正在使用方法级别的泛型参数实例化该类，该参数在编译时验证然后***被删除***（随后在运行时不可用）。但是类型标记的全部意义在于***保留***通用信息，因此模型被炸毁了。

老实说，这是令牌实现的失败——如果您将构造函数代码与例如[`TypeReference`Jackson 的实现进行比较](http://grepcode.com/file/repo1.maven.org/maven2/org.codehaus.jackson/jackson-core-asl/1.9.2/org/codehaus/jackson/type/TypeReference.java#TypeReference)，您会看到 Jackson 实际上验证了具体参数是否可用。

```
31    protected TypeReference()
32    {
33        Type superClass = getClass().getGenericSuperclass();
34        if (superClass instanceof Class<?>) { // sanity check, should never happen
35            throw new IllegalArgumentException("Internal error: TypeReference constructed without actual type information");
36        }
45    } 
```

最简单的解决方案是简单地将构造类型（令牌）作为调用者的责任，并将其与您希望存储和/或检索的数据一起传递。

```
public <T> List<T> get(String key, Type type) {
    return this.gson.fromJson(this.data.get(key), type);
}

public <T> void set(String key, List<T> value, Type type) {
    this.data.put(key, this.gson.toJson(value, type));
} 
```

# .net - 为什么在 IL 中将 const long 转换为 short？

> ID：15865236
> 
> 赞同：2
> 
> 时间：2013-04-07T17:08:52.987
> 
> 标签：.net, il

简单的好奇，这段代码

```
 private const long constLong = 16;
    private static long instanceLong = 16;

    static long constTest()
    { 
        long i = 4;
        return i + constLong;
    }

    static long instanceTest()
    {
        long i = 4;
        return i + instanceLong;
    } 
```

产生这个 IL：

```
.field private static literal int64 constLong = int64(16)
.field private static int64 instanceLong

.method private hidebysig static int64 constTest () cil managed 
{
    // Method begins at RVA 0x2068
    // Code size 9 (0x9)
    .maxstack 2
    .locals init (
        [0] int64 i
    )

    IL_0000: ldc.i4.4
    IL_0001: conv.i8
    IL_0002: stloc.0
    IL_0003: ldloc.0
    IL_0004: ldc.i4.s 16
    IL_0006: conv.i8
    IL_0007: add
    IL_0008: ret
} // end of method Program::constTest

.method private hidebysig static int64 instanceTest () cil managed 
{
    // Method begins at RVA 0x2080
    // Code size 11 (0xb)
    .maxstack 2
    .locals init (
        [0] int64 i
    )

    IL_0000: ldc.i4.4
    IL_0001: conv.i8
    IL_0002: stloc.0
    IL_0003: ldloc.0
    IL_0004: ldsfld int64 ConsoleApplication1.Program::instanceLong
    IL_0009: add
    IL_000a: ret
} // end of method Program::instanceTest 
```

为什么 constTest() 有[ldc.i4.s](http://msdn.microsoft.com/library/system.reflection.emit.opcodes.ldc_i4_s.aspx)？

```
 IL_0004: ldc.i4.s 16
    IL_0006: conv.i8 
```

而不是[ldc.i8](http://msdn.microsoft.com/library/system.reflection.emit.opcodes.ldc_i8.aspx)：

```
 IL_0004: ldc.i8 16 
```

因为现在 constTest() 需要做一个[conv.i8](http://msdn.microsoft.com/library/system.reflection.emit.opcodes.conv_i8.aspx)。

就像我说的，这纯粹是好奇。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T17:16:17.033

这种方式更紧凑，请参阅标签以获取提示。

```
IL_0000: ldc.i4.4
IL_0001: conv.i8
IL_0002: stloc.0 
```

这需要一个字节`ldc.i4.4`和一个字节`conv.i8`：总共两个字节。

```
IL_0004: ldc.i4.s 16
IL_0006: conv.i8
IL_0007: add 
```

这需要两个字节`ldc.i4.s`和`16`一个字节`conv.i8`：总共三个字节。

`ldc.i8 16`指令占用 1 个字节，操作数（16）占用 4 个字节：总共 5 个字节。

但请记住，更短的 IL 并不意味着一旦它被 JIT'ed（或 AOT'ed）更快（或更慢）原生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T17:12:33.233

请记住，您查看的是 IL，而不是最终的机器代码。IL 的目标是尽可能接近地捕获代码/程序员意图，以便 JITTER 可以执行最佳优化。

如果 JITTER 正在执行此操作，则会出现问题，但编译器执行此操作时无需担心。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T17:15:27.510

简单的答案是“这就是编译器生成代码的方式”。您必须记住，实际生成的本机代码可以在 32 位或 64 位 CPU 上运行。IL 被编译为目标指令集，因此：

```
 ldc.i4 4
  conv.i8 
```

很可能成为 64 位 CPU 上的单一负载。

# mysql - VB.NET：使用变量生成 MySQL 查询

> ID：15865249
> 
> 赞同：0
> 
> 时间：2013-04-07T17:10:48.740
> 
> 标签：mysql, .net, vb.net, variables

我已经编写了下面的代码来更新我的表格，但它不起作用。

```
sqlstr = "UPDATE Student SET " & S & " = @field1, " & L & " = @field2, " & R & " =@field3, " & W & "=@field4 WHERE Code='" & StdID & "'"
DBCmd = New MySql.Data.MySqlClient.MySqlCommand(sqlstr, DBConn)
With DBCmd
        .Parameters.AddWithValue("@field1", CB_S.SelectedItem)
        .Parameters.AddWithValue("@field2", CB_L.SelectedItem)
        .Parameters.AddWithValue("@field3", CB_R.SelectedItem)
        .Parameters.AddWithValue("@field4", CB_W.SelectedItem)
    End With
    DBCmd.Dispose() 
```

其中 S、L、R 和 W 是字符串：S1、L1、R1、W1。StdID 是一个整数。CB_S、CB_L、CB_R 和 CB_W 是组合框。

谁能告诉我出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T17:14:27.410

你没有打开`connection`和调用`ExecuteNonQUery()`。还参数化了值`Code`

```
sqlstr = "UPDATE Student SET " & S & " = @field1, " & L & " = @field2, " & R & " =@field3, " & W & "=@field4 WHERE Code=@code"
DBCmd = New MySql.Data.MySqlClient.MySqlCommand(sqlstr, DBConn)
With DBCmd
        .Parameters.AddWithValue("@field1", CB_S.SelectedItem)
        .Parameters.AddWithValue("@field2", CB_L.SelectedItem)
        .Parameters.AddWithValue("@field3", CB_R.SelectedItem)
        .Parameters.AddWithValue("@field4", CB_W.SelectedItem)
        .Parameters.AddWithValue("@code", StdID)
End With
DBConn.Open()
DBCmd.ExecuteNonQuery() 
```

# html - 如何在 html 中包含 jsp 页面？

> ID：15865250
> 
> 赞同：5
> 
> 时间：2013-04-07T17:10:50.093
> 
> 标签：html, jsp, netbeans

我正在使用 Netbeans 和 MySql 服务器。我想将 JSP 内容添加到 HTML 文件中。我怎样才能包括它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T17:16:47.453

使 HTML 文件成为 JSP 页面，并使用 JSP 包含（静态或动态，取决于您想要什么，但您可能需要在此处使用静态包含）：

```
<%@include file="theJspToInclude.jsp" %> 
```

HTML 文件是静态资源，由 Web 容器按原样提供，无需任何解释。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-07T17:18:48.330

JSP 是一个动态的。它需要一个 Web 容器来执行。为什么需要将它包含在静态 html 页面中。据我所知，如果您想在 html 页面中包含 jsp 页面，那么您的页面应该是动态的。因此，您必须将其更改为 JSP 页面。现在你可以使用

```
<%@include file="includeable.jsp" %> 
```

这将包括你的jsp。

您不能将 JSP 包含到 HTML 页面中。

# iis-7 - WebMatrix 而不是 IIS

> ID：15865251
> 
> 赞同：0
> 
> 时间：2013-04-07T17:11:12.430
> 
> 标签：iis-7, webmatrix

**如何在Web Matrix**中配置我的 wcf 服务？因为我使用的是**Windows 7 家庭版**

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-14T12:33:00.060

[http://blogs.msdn.com/b/james_osbornes_blog/archive/2010/07/30/webmatrix-iisexpress-beta-hosting-wcf-services.aspx](http://blogs.msdn.com/b/james_osbornes_blog/archive/2010/07/30/webmatrix-iisexpress-beta-hosting-wcf-services.aspx)

检查上面的链接，希望它有帮助

# java - 如何在 spock 的 setup 方法中获取方法？

> ID：15865258
> 
> 赞同：0
> 
> 时间：2013-04-07T17:11:42.853
> 
> 标签：java, groovy, junit4, spock

我怎样才能获得运行功能的方法？我想用不同的数据集准备数据库。此数据集应使用如下注释定义：

```
@PrepareDB("dataset1")
def "feature 1"() {

} 
```

并且应该在这样的设置方法中使用：

```
def setup() {
    def dataset = currentTestMethod.getAnnotation().value //pseudo method
    prepareDB(dataset)
} 
```

我对 JUnit4 做了同样的事情。我使用@Rule 获取当前方法名称并获取每个反射的注释值。我怎么能在 spock 中做到这一点？

更新：我自己找到了解决方案。使用 JUnit4 中的 TestWatcher 可以从当前运行的测试方法中获取注释：

```
@Rule
public TestRule watcher = new TestWatcher() {
    protected void starting(Description description) {
        println description.getAnnotation(PrepareDB.class).value()
    };
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T06:22:51.323

I recommend to implement the database logic as an annotation-driven Spock extension or a JUnit rule, both of which provide easy access to the annotations of the executed feature method.

To answer your question, to get at the annotation from the setup method, you'd use (as of Spock 0.7) `specificationContext.iterationInfo.parent.featureMethod.reflection.getAnnotation(PrepareDB)`. In Spock 1.0-SNAPSHOT and beyond, this has changed to `specificationContext.currentFeature.featureMethod.getAnnotation(PrepareDB)`.

# css - 带有垂直子页面行的 CSS 下拉菜单

> ID：15865259
> 
> 赞同：0
> 
> 时间：2013-04-07T17:12:06.293
> 
> 标签：css, menu

您好，我需要一些有关 CSS 下拉菜单的帮助。

通常，您将顶层水平显示，然后将子页面（ul li ul li）垂直显示在彼此下方。但是（ul li ul）被锁定在其父级下方，我需要子页面级别来跨越父菜单的宽度，就像在[http://www.peverel.co.uk/](http://www.peverel.co.uk/)中一样，但只使用 CSS。

这是一些基本代码....

```
nav#navigation, nav#navigation ul{ padding:0; margin:0}
/*set up a tags*/ 
nav#navigation a{display:block;}
/*position level 1 links horizontally*/ 
nav#navigation li{display:block; float:left;}
/*undo previous style for level 2 links*/
nav#navigation li ul li{float:none;}
/*position level 2 links vertically and hide*/ 
nav#navigation li ul{display:none; position:absolute; z-index:1}
/*unhide level 2 links on li:hover from level 1*/ 
nav#navigation li:hover ul{
display:inline-block;
clear:both;
float:left;
position:absolute; 
z-index:1
}

nav#navigation ul li ul li{
display:inline-block;
clear:both;
float:left;
position:absolute; 
z-index:1;

}

/*DROPDOWN STYLING:*/
nav#navigation{height:25px}
nav#navigation a{color:#09F; padding:5px 10px 5px 10px;}
nav#navigation a:hover{color:#0CF;}
nav#navigation li{background-color:#FFF; border:solid 1px #CCC;  margin-left:-1px}
nav#navigation li:hover{background-color:#F0F0F0}

 <nav id="navigation" class="clearfix" role="navigation">
<ul>
<li class="page_item">
<a href=#">
    <ul class='children'>
    <li class="page_item"><a href="#">Cookie Policy</a></li>
    <li class="page_item"><a href="#">example sub page</a></li>
    </ul>
</li>
<li class="page_item"><a href="#">Blocks of Flats Insurance</a>
    <ul class='children'>
    <li class="page_item"><a href="#">Becoming An Appointed Representative</a></li>
    <li class="page_item"><a href="#">CHU Policy Launched</a></li>
    <li class="page_item"><a href="#">FAQs</a></li>
    <li class="page_item"><a href="#">Get a Quote</a></li>
    </ul>
</li>
<li class="page_item"><a href="#">Products</a></li>
</ul>
</nav> 
```

这也将进入 WordPress 网站

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T18:25:08.027

要获得 100% 的宽度均匀分布，请使用表格和表格单元格。例如，导航应为`table`，一级链接为`table-cell`。

这同样适用于较低级别。

[http://jsfiddle.net/4T5yW/](http://jsfiddle.net/4T5yW/)

# mongodb - mongodb中涉及数组字段和普通字段总和的聚合

> ID：15865261
> 
> 赞同：2
> 
> 时间：2013-04-07T17:12:15.283
> 
> 标签：mongodb, pymongo, aggregation-framework

这是样本集合：

```
{'f1': 10, '_id': 1, 'key': 'g', 'items': [{'i1': 10}, {'i1': 10}, {'i1': 10}]}
{'f1': 10, '_id': 2, 'key': 'g', 'items': [{'i1': 10}, {'i1': 10}, {'i1': 10}]}
{'f1': 77, '_id': 3, 'key': 'g', 'items': [{'i1': 10}, {'i1': 10}, {'i1': 10}]} 
```

我想要一个公式，比如：`$sum(f1 + Σ[items.i1])`在上面的集合上计算。以下是我能想到的（在 pymongo 中）：

```
db.collec.aggregate([    
        { "$unwind" : "$items"},
    { "$group" : {    
             "_id" : {"key": "$key", "id": "$_id"},    
     "matches" : { "$sum" : "$items.i1" },    
     "extra" : { "$sum" : "$f1" },    
     "count" : {"$sum": 1}    
                    }},
    { "$group": {    
             "_id" : "$_id.key",     
             "finalSum":{ "$sum":    
                        { "$add": ["$matches", {"$divide":["$extra", "$count"]}]}}}}      
    ]); 
```

**输出：**

```
{'finalSum': 187.0, '_id': 'g'} 
```

虽然这给出了正确的输出，但我希望有一个更好、更简单的解决方案：非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T05:54:56.277

在对文档进行分组时，可以将“f1”保存到_id字段中，这样就不需要为每个文档汇总和划分。

聚合操作是这样的：

```
db.collec.aggregate([    
    { "$unwind" : "$items"},
    { "$group" : {    
          _id : {key: "$key", id: "$_id", f1 : "$f1" },    
          matches : { "$sum" : "$items.i1" },    
    }},
    { "$group": {    
          _id : "$_id.key",     
          finalSum : { "$sum":    
                        { "$add": ["$matches", "$_id.f1"]}}}}      
    ]); 
```

# cakephp - CakePHP 布局一个 Web 应用程序

> ID：15865262
> 
> 赞同：0
> 
> 时间：2013-04-07T17:12:18.823
> 
> 标签：cakephp

我正在使用 CakePHP 开发一个发票系统，它从一开始就相当基本。我使用博客教程 ( [http://book.cakephp.org/2.0/en/getting-started.html](http://book.cakephp.org/2.0/en/getting-started.html) ) 作为我项目的基础。我还安装了 Twitter 的 Bootstrap 框架。

我正在使用标签进行导航。因此，目前用户将拥有以下选项卡选项：

摘要 - 发票 - 费用 - 银行业务 - 联系人 - 更多

在 Apps->View 文件夹中，我有一个 Contacts 文件夹和一个 Invoices 文件夹，这些文件夹包含以下文件：

index.ctp - 这是页面的一般布局，即发票和联系人，它只是一个列出数据库中所有条目的表格。

view.ctp - 当用户单击表条目时显示详细视图。

add.ctp - 每个视图都有一个添加按钮，这个脚本是添加页面的布局。

在 Apps->View->Elements 文件夹中，我有标签式导航 (tabs.ctp) 的代码。我在 Apps->View->Contacts->index.ctp & Apps->View->Invoices->index.ctp 中有以下代码行：

```
<? echo $this->element('tabs'); ?> 
```

这将在每个视图中显示选项卡式导航。

在我的 App->Config->routes.php 我有以下代码：

```
Router::connect('/', array('controller' => 'invoices', 'action' => 'index')); 
```

显然，这使得 Apps->View->Invoices->index.ctp 成为用户查看的初始页面。

但是当应用程序加载时，我可以看到没有问题的发票页面，但是当我尝试点击联系人选项卡时没有任何反应。当我查看源代码时，没有加载联系人视图代码。

我可能错误地布置了项目，所以任何帮助表示赞赏。

**更新：** 来自 ContactsController.php 的代码：

```
<?php
class ContactsController extends AppController {
    public $helpers = array('Html', 'Form', 'Session');
    public $components = array('Session');

    public function index() {
        $this->set('contacts', $this->Contact->find('all'));
    }

    public function view($id) {
        if (!$id) {
            throw new NotFoundException(__('Invalid contact'));
        }

        $contact = $this->Contact->findById($id);
        if (!$contact) {
            throw new NotFoundException(__('Invalid contact'));
        }
        $this->set('contact', $contact);
    }

    public function add() {
        if ($this->request->is('contact')) {
            $this->Contact->create();
            if ($this->Contact->save($this->request->data)) {
                $this->Session->setFlash('Your contact has been saved.');
                $this->redirect(array('action' => 'index'));
            } else {
                $this->Session->setFlash('Unable to add your contact.');
            }
        }
    }
} 
```

**更新** 来自 routes.php 的示例代码：

```
/**
 * Here, we are connecting '/' (base path) to controller called 'Pages',
 * its action called 'display', and we pass a param to select the view file
 * to use (in this case, /app/View/Pages/home.ctp)...
 */
    //Router::connect('/', array('controller' => 'pages', 'action' => 'display', 'home'));
    Router::connect('/', array('controller' => 'invoices', 'action' => 'index'));   
/**
 * ...and connect the rest of 'Pages' controller's urls.
 */
    Router::connect('/pages/*', array('controller' => 'pages', 'action' => 'display')); 

/**
 * Load all plugin routes.  See the CakePlugin documentation on
 * how to customize the loading of plugin routes.
 */
    CakePlugin::routes();

/**
 * Load the CakePHP default routes. Only remove this if you do not want to use
 * the built-in default routes.
 */
    require CAKE . 'Config' . DS . 'routes.php'; 
```

问候，斯蒂芬

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T18:21:06.003

您可能还想清除您的蛋糕核心缓存，例如

```
app/tmp/cache/*/* 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:37:19.297

确保您创建的“联系人”选项卡的链接格式正确。例如;

```
<?php echo $this->Html->link('Contacts',array('controller'=>'contacts','action'=>'index'); ?> 
```

如果您正确配置了重写规则，那么该链接现在应该可以工作了。

# xcode - 使用标签作为按钮 - 当标签被触摸时，为字符串赋值

> ID：15865277
> 
> 赞同：3
> 
> 时间：2013-04-07T17:13:33.847
> 
> 标签：xcode, button, uibutton, uilabel

我在使用标签作为按钮时遇到了一些挑战。我有一个定义为 UILabel 的标签，并在我的 .h 文件中声明了字符串变量：

```
IBOutlet UILabel *l1;

@property(strong)NSString *myvariable; 
```

在 xib 中，选择标签后，在 Identity Inspector 视图中的 Document 下，设置具有所需标签名称的 Label 字段 - 例如：l1。标签中还有一些静态文本。

在 File's Owner Connection Inspector 中，我将 l1 Outlet 连接到 l1 标签。

我的目标：当标签被触摸时，我想简单地分配一个带有文本值的字符串变量，例如可能在 .m 文件中执行的操作：

```
self.myvariable = l1.text; 
```

我尝试失败的事情： - 在我的 .h 中设置 UIButton， - 尝试在 .m 中设置 UIButton - 在 XIB Identity Inspector 视图中，在 Accessibility 下，尝试检查按钮 Traits 复选框以启用标签为一个按钮

我还没弄明白。这可能是一个简单的标签问题，我在标签方面的大部分经验包括静态文本显示，或使用纪元时间显示基于当前日期的倒计时。任何指导将不胜感激！

提前致谢！抢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T17:33:22.993

环顾四周，大多数人建议使用实际按钮并将背景设置为透明或背景颜色。

也就是说，您可以执行以下操作：

在 viewWillLoad 中：

```
 UILabel * label = [[UILabel alloc] init]; // change/delete to use your obj

UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(pushAction)];
[label addGestureRecognizer:tap];
label.userInteractionEnabled = YES; 
```

然后设置选择器：

```
- (void) pushAction
{
    self.myvariable = l1.text;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T17:25:44.957

您可以创建一个自定义类扩展`UILabel`，它覆盖

`- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event;`

您可以在 xib 的身份检查器中分配新的自定义 UILabel。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-22T07:35:38.860

```
UILabel *lblname        = [[ UILabel alloc]initWithFrame: CGRectMake(10, 120, 200, 35)];
lblname.text            = @"sunil";
lblname.textColor       = [UIColor blueColor];
lblname.textColor       = [UIColor blueColor];
lblname.backgroundColor = [UIColor orangeColor];
[self.view addSubview:lblname];

UIButton *btnpress      = [UIButton buttonWithType:UIButtonTypeRoundedRect];
btnpress.frame          = CGRectMake(10, 180, 300, 20);
[btnpress setTitle:@"click" forState:UIControlStateNormal];
[btnpress addTarget:self action:@selector(btnpress1) forControlEvents:UIControlEventTouchUpInside];
btnpress.backgroundColor = [UIColor redColor];
[self.view addSubview:btnpress]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-17T21:50:58.953

我想让我的整个屏幕作为一个按钮，当按下它时，会更改按钮上出现的标签上的文本。这就是我在 xcode 上的做法：

在情节提要中，我将一个按钮拖到界面上。在您编辑按钮的右上角，我将按钮内容设置为“组”而不是文本。不要在按钮上将 alpha 设置为 0。然后我在按钮/组的顶部拖动了一个标签。当 ctrl 拖动必要的动作和出口时，一定要通过暴露情节提要的左侧面板来做到这一点。更改按钮内容类型后，您可能只能通过鼠标访问该组。

# java - Java 通用设计有效性

> ID：15865287
> 
> 赞同：0
> 
> 时间：2013-04-07T17:14:24.123
> 
> 标签：java, generics

我有以下层次结构：

```
abstract class customType<E extends Number>
class customInteger extends customType<Integer>
class customFloat extends customType<Float> 
```

声明一个同时接受 customInteger 和 customFloat 的 LinkedList

```
List<customType<Number>> items = new LinkedList<customType<Number>>(); 
```

这种方法有效吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T17:16:52.333

`customType<Number>`与因此无关，`customType<Integer>`
因此如果您打算添加`Integer`或加入`Float`，`items`那么这是无效的。
您可以尝试以下方法：

`List<CustomType<?>> items = new LinkedList<CustomType<?>>();`

将此用作您的项目的集合。要添加项目，您应该使用如下辅助方法：

```
public static void addItemToList(List<? super CustomType<?>> l, CustomType<? extends Number> o){  
        l.add(o);  
} 
```

然后您可以添加到列表中：

```
CustomFloat f = new CustomFloat();  
CustomInteger i = new CustomInteger();  
process(items, i);    
process(items, f); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T19:47:36.180

正如 Cratylus 所说，`customType<Number>`、`customType<Float>`和`customType<Integer>`是三种不相关的类型，所以这是行不通的。但是，您可以将`List<customType<?>>`其用作`items`. 两者`customType<Float>`和`customType<Integer>`都是`customType<?>`（这意味着“任何`customType`，无论它具有什么通用参数值）的子类型，因此可以插入到集合中。

请注意，Java 约定是以大写字母开头的类型名称，因此您应该使用名称`CustomType`、`CustomInteger`和`CustomFloat`。

# wpf - 绑定到多个索引器

> ID：15865289
> 
> 赞同：3
> 
> 时间：2013-04-07T17:14:25.887
> 
> 标签：wpf, binding, windows-phone, indexed-properties

我正在尝试将索引属性与两个索引器绑定。该物业看起来像这样

```
public Item this[int x, int y]
{
  get { return _items[x, y]; }
  set { _items[x, y] = value; }
} 
```

根据[http://msdn.microsoft.com/en-us/library/ms742451.aspx](http://msdn.microsoft.com/en-us/library/ms742451.aspx)，可以绑定这样的索引属性

```
<object Path="propertyName[index,index2...]" .../> 
```

甚至还有一个例子：

```
<Rectangle Fill="{Binding ColorGrid[20,30].SolidColorBrushResult}" .../> 
```

但是，当我尝试像这样在 XAML 中访问该属性时：

```
<Image Source="{Binding Items[0,0].Image}" /> 
```

我在设计器中遇到错误：

> 未命名参数“0].Image”必须出现在命名参数之前。

它似乎将 0].Image 解释为下一个参数。我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T19:43:36.963

问题是`{Binding}`标记扩展 - 它有一个`delimiter`which is `,`。

要解决这个问题，您可以使用以下符号...

```
<TextBox Width="100" Height="100">
    <TextBox.Text>
        <Binding Path="MyIndexer[1,1]" />
    </TextBox.Text>
</TextBox> 
```

或者使用“转义”`,`与`\`- 也在该链接中（但不知何故，他们正在克服他们原来的符号不起作用的事实）。

```
<TextBox Text="{Binding MyIndexer[2\,2]}" Width="100" Height="100" /> 
```

请注意，索引器，多维数组语法是这样的:)...

```
public string this[int x, int y]
{
    get { return _items[x][y]; }
    set { _items[x][y] = value; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T17:26:17.953

Windows Phone 不是 WPF，它主要是 Silverlight，Silverlight 不支持[Indexer](http://msdn.microsoft.com/en-us/library/cc645024%28v=vs.95%29.aspx/html#indexdata)：

> *   仅支持一维数组索引。

您可以尝试通过以下方式解决此问题：

a）尝试实现类似的东西`Items[0][0]`，所以`Items[0]`会给你一个数组，你可以再次应用索引器。

b) 尝试用 实现这个逻辑`IValueConverter`。

# java - 随机编码器/解码器

> ID：15865293
> 
> 赞同：1
> 
> 时间：2013-04-07T17:14:36.523
> 
> 标签：java

我制作了这个程序，它是一个随机密码。

```
public class SaadAbdullahCipher {
      private char[] alphabet = {'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l',   
                               'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x',   
                               'y', 'z'};  
    private String alphabetString = "abcdefghijklmnopqrstuvwxyz";  
    private int[] alphabetASCII = new int[alphabet.length];  
    private int[] cipherOne;  
    private int[] cipherTwo;  
    private String userMessage;  
    private int randomShiftKey;  
    private Formatter x;  

    public SaadAbdullahCipher(String uM, int rSK) {  
        userMessage = uM;  
        randomShiftKey = rSK;  
        cipherOne = new int[userMessage.length()];  
    }  

    public void genNewAlphabet() {  
        for(int i = 0; i < alphabet.length; i++) {  
            alphabetASCII[i] = alphabet[i] + randomShiftKey;  
            if(alphabetASCII[i] >= 122) {  
                alphabetASCII[i] = alphabetASCII[i] - 26;  
            }  
        }  
    }  

    public void cipher() {    
        String[] userMessageString = new String[userMessage.length()];  
        for(int i = 0; i < userMessage.length(); i++) {  
            userMessageString[i] = userMessage.substring(i, i+1);  
        }  

        for(int counterOne = 0; counterOne < userMessageString.length; counterOne++) {  
            cipherOne[counterOne] = alphabetString.indexOf(userMessageString[counterOne]);    
        }  
        cipherTwo = new int[alphabetASCII.length];  
        System.out.print("Your encoded message is: ");  
        for(int counterTwo = 0; counterTwo < cipherOne.length; counterTwo++) {  
            cipherTwo[counterTwo] = alphabetASCII[cipherOne[counterTwo]];  
            System.out.print((char)cipherTwo[counterTwo]);  
        }  
    }  

    public void printTextFile() {  
        try {  
            x = new Formatter("Cipher.txt");  
        }  
        catch(Exception bad) {  
            System.out.println("Your have an air er!");  
        }  
        for(int i = 0; i < cipherTwo.length; i++) {  
            x.format("%s", (char)cipherTwo[i]);  
        }  
        x.close();  
    }  

    public  int[] getAlphabetASCII() {  
        return alphabetASCII;  
    }  
} 
```

主要的（）：

```
public class SaadAbdullahCipherTester {
     public static void main(String [] args) {  
        Random ranNum = new Random();  
        Scanner input = new Scanner(System.in);  

        int randomShiftKey = 1 + ranNum.nextInt(24);  

        System.out.print("Please enter your message: ");  
        String userMessage = input.next();    
        System.out.println();  

        SaadAbdullahCipher test = new SaadAbdullahCipher(userMessage, randomShiftKey);  
        test.genNewAlphabet();  
        test.cipher();  
        test.printTextFile();  

        int[] randomABC = test.getAlphabetASCII();  

        SaadAbdullahCipherD testTwo = new SaadAbdullahCipherD(randomShiftKey, randomABC);  
        testTwo.openFile();  
        testTwo.readFile();  
        testTwo.closeFile();  
        testTwo.reverseAlphabet();  
        testTwo.decipher(); 
    }  
} 
```

一切正常，但是当我打印结果时，我希望它全部以大写形式显示（例如，你好）我将在哪里添加 .toUpperCase

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T17:19:34.970

而不是这个代码块：

```
 System.out.print("Your encoded message is: ");  
    for(int counterTwo = 0; counterTwo < cipherOne.length; counterTwo++) {  
        cipherTwo[counterTwo] = alphabetASCII[cipherOne[counterTwo]];  
        System.out.print((char)cipherTwo[counterTwo]); 
```

这确实非常有限，您应该将字符数组转换为`String`对象：

```
String ciphertext = new String(cipherTwo);
// Get all the characters into a String object.
System.out.println("your encoded message is: " + ciphertext.toUpperCase());
// Print the output and use the method to make it upper case. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T17:25:12.607

toUpperCase() 方法只能应用于字符串对象，为了使用它，您必须将字符数组转换为字符串。这可以通过从 char 数组构造 String 来完成：

```
String cipherAsStringUpperCase = new String(cipherTwo).toUpperCase(); 
```

# html - 如何更改此 HTML 以使其可以从浏览器中很好地打印？

> ID：15865294
> 
> 赞同：1
> 
> 时间：2013-04-07T17:14:38.700
> 
> 标签：html, printing

我有一个想要从浏览器打印的 html 页面。

不幸的是，我似乎无法实现这个目标。以下是 Chrome 中打印预览的样子：

![在此处输入图像描述](https://i.stack.imgur.com/CI5Z4.png)

我需要在表格中间有一个分页符，但我所做的无济于事！

我试图将其转换为 pdf，但无济于事 -[如何使用 wkhtmltopdf 将简单的 html 转换为 pdf？](https://stackoverflow.com/questions/15693520/how-to-convert-a-simple-html-to-pdf-using-wkhtmltopdf)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T11:16:39.200

如果您想打印网页的特定部分，可以使用以下代码。它还有助于在*新窗口*中预览您的打印页面。

```
<html>
<head>
<script>
function printPage(id)
{
   var html="<html>";
   html+= document.getElementById(id).innerHTML;
   alert(html);
   html+="</html>";

   var printWin = window.open('','','left=0,top=0,width=1,height=1,toolbar=0,scrollbars=0,status  =0');
   printWin.document.write(html);
   printWin.document.close();
   printWin.focus();
   printWin.print();
   printWin.close();
}
</script>
</head>
<body>
<div id="block1">
<table border="1" >
</tr>
<th colspan="3">Block 1</th>
</tr>
<tr>
<th>1</th><th>XYZ</th><th>athock</th>
</tr>
</table>

</div>

<div id="block2">
    This is Block 2 content
</div>

<input type="button" value="Print Block 1" onclick="printPage('block1');"></input>
<input type="button" value="Print Block 2" onclick="printPage('block2');"></input>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T17:17:08.077

取出`height:100%;`你的身体和html。

简单的 ：）

# wcf - 尽管 ServiceContract 定义了 CallbackContract，但 SvcUtil 没有生成从 DuplexClientBase 派生的类

> ID：15865296
> 
> 赞同：0
> 
> 时间：2013-04-07T17:14:46.883
> 
> 标签：wcf, svcutil.exe, duplex

当我使用 SvcUtil.exe 生成我的服务的代理时，即使我声明了一个 CallbackContract，我也会得到一个派生自 ClientBase 的类。这是服务合同：

```
[ServiceContract(CallbackContract = typeof(IMechClient))]
interface IMechService
{
    [OperationContract(IsOneWay = true)]
    void Increment();

    [OperationContract]
    bool RegisterPlayer();
} 
```

这是生成的代理标头：

```
public partial class MechServiceClient : System.ServiceModel.ClientBase<IMechService>, IMechService 
```

显然我可以手动编辑代理，但由于该项目仍在进行中，我将不得不多次重新生成代理并且宁愿现在学习正确的方法，而不是每次重新编译时都手动调整代理文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T05:45:58.150

通过尝试使用 DuplexChannelFactory 创建代理，我收到了一个不同的错误，并发现您需要首先在 Callback 接口中实现 OperationContract，否则 CallbackContract 将被忽略，因此不是从 DuplexClientBase 派生的。

# scala - 检查表达式树的可满足性

> ID：15865297
> 
> 赞同：4
> 
> 时间：2013-04-07T17:14:51.340
> 
> 标签：scala, artificial-intelligence, satisfiability, conjunctive-normal-form

我正在尝试寻找解决问题的实用方法（例如，在工程方面），其中我有一堆未知值：

```
val a: Int32 = ???
val c: Int32 = ???
val d: Bool = ??? 
```

和一个表达式二叉树（在内存中），最终返回一个布尔值，例如

```
((a > 4) || (b == (c+2))) && (a < b) && ((2*d)) || e 
```

我拥有的布尔运算符`and` `or` `xor` `not`和 32 位整数有比较之类的东西，以及加法、乘法、除法（注意：这些必须尊重 32 位溢出！）以及一些按位的东西（移位、按位 &、| ^)。但是，我不一定需要支持所有这些操作 [参见：LOL_NO_IDEA]

我想得到三个答案之一：

*   ES_POSSIBLE [我不需要知道如何，只是被告知存在一种可能]
*   不可能 [无论我的变量持有什么值，这个等式永远不会是真的]
*   LOL_NO_IDEA [这是可以接受的，如果问题太复杂或耗时]

我要解决的问题都不是太大或太复杂，术语太多（最多是数百个）。并且拥有大量的 LOL_NO_IDEA 很好。然而，我正在解决数以百万计的此类问题，因此持续的成本会让人感到痛苦（例如，转换为文本格式，并调用外部求解器）

由于我是从 scala 执行此操作的，因此使用 SAT4J 看起来非常吸引人。虽然，文档很糟糕（特别是像我这样的人，他只研究了这个 SAT 世界几天）

但我目前的想法是首先将所有 Int32 转换为 32 个布尔值。这样，我可以通过将其作为嵌套布尔表达式来表达（a < b）之类的关系（比较 msb，如果它们是 eq，则为下一个，等等）

然后当我有一个布尔变量和布尔表达式的大表达式树时——然后遍历它，同时逐步建立一个： [http ://en.wikipedia.org/wiki/Conjunctive_normal_form](http://en.wikipedia.org/wiki/Conjunctive_normal_form)

然后将其输入SAT4J。

然而，所有这些看起来都非常具有挑战性——甚至构建 CNF 似乎也非常低效（以天真的方式进行，我会实现它）并且容易出错。更不用说尝试将所有整数数学编码为布尔表达式。而且我还没有找到为像我这样的人设计的好资源

我会很感激任何反馈，即使它就像“大声笑，你是个白痴——看看 X”或“是的，你的想法是正确的。享受吧！”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T17:41:41.780

您可能想看看 Z3 ( [http://z3.codeplex.com/](http://z3.codeplex.com/) ) 或其他一些可满足性模理论 (SMT) 求解器。据我所知，您所说的问题涉及线性整数算术或可能的位向量。我想我更喜欢有一个对这些理论有一定了解的求解器，而不是只用布尔值来编码问题。

Z3 具有 Java 绑定（请参阅[http://research.microsoft.com/en-us/um/people/leonardo/blog/2012/12/10/z3-for-java.html](http://research.microsoft.com/en-us/um/people/leonardo/blog/2012/12/10/z3-for-java.html)）。不过，我自己并没有使用过它们，并且不确定有多少开销。

使用 SAT 求解器时，您通常不必自己将问题放入 CNF。求解器应预处理您的公式（通常通过 Tseitin 转换[http://en.wikipedia.org/wiki/Tseitin-Transformation](http://en.wikipedia.org/wiki/Tseitin-Transformation)）。

您可以研究的另一个选项是约束满足。我知道 Choco ( [http://www.emn.fr/z-info/choco-solver/](http://www.emn.fr/z-info/choco-solver/) )。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T13:44:10.643

由于您是 scala 程序员，您可能想直接使用 scala 库，例如 Scarab [http://kix.istc.kobe-u.ac.jp/~soh/scarab/](http://kix.istc.kobe-u.ac.jp/~soh/scarab/) 这样的工具为您提供了问题的建模Scala 用 SAT 求解器解决了这个问题。

# parsing - Java Scanner hasNext(String) 方法有时不匹配

> ID：15865299
> 
> 赞同：0
> 
> 时间：2013-04-07T17:14:53.547
> 
> 标签：parsing, java.util.scanner

我试图使用 Java Scanner`hasNext`方法，但得到了奇怪的结果。也许我的问题很明显，但是为什么这个简单的简单表达式`"[a-zA-Z']+"`不适用于这样的词：“points.anything, supervisor,”。我也试过这个`"[\\w']+"`。

```
public HashMap<String, Integer> getDocumentWordStructureFromPath(File file) {
    HashMap<String, Integer> dictionary = new HashMap<>();
    try {
        Scanner lineScanner = new Scanner(file);
        while (lineScanner.hasNextLine()) {
            Scanner scanner = new Scanner(lineScanner.nextLine());
            while (scanner.hasNext("[\\w']+")) {
                String word = scanner.next().toLowerCase();
                if (word.length() > 2) {
                    int count = dictionary.containsKey(word) ? dictionary.get(word).intValue() + 1 : 1;
                    dictionary.put(word, new Integer(count));
                }
            }
            scanner.close();
        }
        //scanner.useDelimiter(DELIMITER);
        lineScanner.close();

        return dictionary;

    } catch (FileNotFoundException e) { 
        e.printStackTrace();
        return null;
    }   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T17:48:24.397

您的正则表达式应该是这样`[^a-zA-z]+`的，因为您需要将所有不是字母的东西分开：

```
// previous code...
Scanner scanner = new Scanner(lineScanner.nextLine()).useDelimiter("[^a-zA-z]+");
    while (scanner.hasNext()) {
        String word = scanner.next().toLowerCase();
        // ...your other code
    }
}
// ... after code 
```

**编辑——为什么不使用 hasNext(String) 方法？**

这一行：

```
Scanner scanner = new Scanner(lineScanner.nextLine()); 
```

它真正做的是为你编译一个 whitespce 模式，所以如果你有这个测试行`"Hello World. A test, ok."`，它会为你提供这个令牌：

*   你好
*   世界。
*   一种
*   测试，
*   行。

然后，如果您使用`scanner.hasNext("[a-ZA-Z]+")`您正在询问扫描仪`if there is a token that match your pattern`，对于此示例，它将说明`true`第一个令牌：

*   您好（因为这是与您指定的模式匹配的第一个标记）

对于下一个标记（**World.**）`it doesn't match the pattern`，它将简单地`fail`返回`scanner.hasNext("[a-ZA-Z]+")`，`false`因此它永远不会对任何不是字母的字符开头的单词起作用。你懂了？

现在......希望这会有所帮助。

# c++ - 覆盖类成员变量

> ID：15865302
> 
> 赞同：3
> 
> 时间：2013-04-07T17:15:07.580
> 
> 标签：c++, oop

我遇到了继承问题，我不知道我的解决方案是否优雅。我有这样的课

```
class Var
{
public:
    virtual void doSomething();
}
class DerivedVar : public Var
{
public:
    virtual void doSomething();
    void doSomethingElse();
} 
```

我也有继承自 MyBase 的 MyDerived。MyBase 有一个 Var 类型的成员，而 MyDerived 需要有一个 DerivedVar 的成员，以便它可以调用 doSomething()。目前，我正在使用模板来解决这个问题

```
template<typename VarType>
class MyBase
{
protected:
    VarType var;
public:
    MyBase() { var.doSomething(); }
}

class MyDerived : public MyBase<DerivedVar>
{
public:
    MyDerived() : MyBase() { var.doSomethingElse(); }

} 
```

我想知道是否有更好的方法来做到这一点（例如，不需要使用模板）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T17:31:20.650

如果您想要或需要避免模板化，那么您需要动态分配协变类型数据成员。

一个好的方法是在构造函数链上传递一个工厂（它可以是默认的构造函数参数），并在基类中调用它。

一种不好的方法，但在 1990 年代初期非常流行，是使用两阶段初始化。

好的，我预计您尚未遇到的问题。

但是你将。;-)

也就是说，如果您可以使模板方法起作用，那可能是最好的。

最直接的解决方案，最少的变通方法以及代码和设计调整。

# php - 我怎样才能从这个准备好的语句中得到一个循环数组

> ID：15865308
> 
> 赞同：-1
> 
> 时间：2013-04-07T17:15:46.740
> 
> 标签：php, mysqli, prepared-statement

我仍在尝试使用准备好的语句重建应用程序。在以下情况下，我需要一个循环遍历结果的返回数组。我该怎么做？！？

```
$page       =   'home';

require($reqcon);

$stmt = $connect->prepare("
SELECT page.alias, page.id, pagel10n.text AS sitetitle, pagel10n.languageCode AS langCode, IF ( lang.translationID IS NULL, lang.`Name`, langl10n.text ) AS langName FROM pages AS page LEFT JOIN `l10n-strings` AS pagel10n ON ( page.translationID = pagel10n.translationID ) LEFT JOIN languages AS lang ON ( pagel10n.languageCode = lang.ID ) LEFT JOIN `l10n-strings` AS langl10n ON ( lang.translationID = langl10n.translationID AND langl10n.languageCode = ? ) WHERE page.`status` = '1' AND page.alias = ?");

$stmt->bind_param('ss', $querylang, $page);
$stmt->bind_result($id, $alias, $sitetitle, $langCode, $langName);
$stmt->execute();
$stmt->store_result(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T17:24:42.873

[来自关于bind_result](http://www.php.net/manual/en/mysqli-stmt.bind-result.php)的 MySQLi 文档

> ## 笔记：
> 
> 所有列必须在`mysqli_stmt_execute()`调用之后和之前绑定`mysqli_stmt_fetch()`。根据列类型，绑定变量可以静默更改为相应的 PHP 类型。

因此，您的代码应该是：

```
$stmt->bind_param('ss', $querylang, $page);
$stmt->execute();
$stmt->bind_result($id, $alias, $sitetitle, $langCode, $langName);
while( $stmt->fetch() ) {
    // your job
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-07T17:20:23.543

不要使用 mysqli 重建它。你会浪费你的生命来对抗它无法使用的界面。[使用PDO](https://stackoverflow.com/tags/pdo/info)
重建它：

```
$stm = $pdo->prepare("your query goes here");
$stm->execute(array($querylang, $page));
$data = $stm->fetchAll(); 
```

现在你有一个包含所有请求数据的常规数组，你可以使用任何你想要的方式（假设在模板中循环）

# mysql - 按总和（值）sql排序

> ID：15865311
> 
> 赞同：0
> 
> 时间：2013-04-07T17:15:57.317
> 
> 标签：mysql, sum, sql-order-by

我正在尝试从名为捐赠的表中获取 blog_id 列表和该博客 ID 上的捐赠总和。我想按捐款的总和来订购它。基本上我想制作一个按捐赠排名的博客列表。博客保存在 blog_id 引用的不同表中。

这是我一直在尝试的，但它所做的只是总结所有捐款并产生 1 行。我不明白我在这里做错了什么！

```
$donations_result = mysql_query("SELECT blog_id, sum(amount) FROM donations ORDER BY sum(amount)"); 
```

捐赠表是一系列 blog_ids 和个人捐赠。所以是这样的：

blog_id--捐赠
1 ----------26
1 ----------1
2 ----------24
2 --------- -12

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T17:17:41.627

您没有对列进行分组。您需要按非聚合列对它进行分组，在这种情况下按`blog_id`

```
SELECT blog_id, sum(amount) TotalSum
FROM   donations 
GROUP  BY blog_id
ORDER  BY TotalSum 
```

您的查询执行良好而没有引发异常的原因是因为 mysql 允许使用*聚合函数*`GROUP BY`而不在子句中指定非聚合列。

*   [参见 MySQL 对 GROUP BY 的扩展](http://dev.mysql.com/doc/refman/5.6/en/group-by-extensions.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T17:17:55.730

您缺少`GROUP BY`操作员：

```
SELECT   blog_id, sum(amount) 
FROM     donations
GROUP BY blog_id
ORDER BY sum(amount) 
```

# html - 如何在 dart 中为网页制作预加载器

> ID：15865312
> 
> 赞同：2
> 
> 时间：2013-04-07T17:15:58.203
> 
> 标签：html, css, dart, dart-webui

我有一个使用 HTML、CSS3 和 Dart 构建的网站。现在，我将如何制作一个预加载器，它会在页面的所有内容加载之前运行？

我什至在考虑使用这样的东西：[http](http://cssload.net/) ://cssload.net/ 所以我愿意接受任何建议......

更新：类似这样的东西，但在 Dart 中：http: [//gayadesign.com/scripts/queryLoader2/](http://gayadesign.com/scripts/queryLoader2/) [http://www.gayadesign.com/diy/queryloader2-preload-your-images-with-ease/](http://www.gayadesign.com/diy/queryloader2-preload-your-images-with-ease/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T09:34:35.920

在你的 html 页面的 body 标签之后添加一个这样的 html 代码。选择你喜欢的任何图像。

```
<div id="preloader">
   <img id="spinner" src="http://cssload.net/preloaders/circular.gif" alt="" />
</div> 
```

使用这个 jquery 代码...

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>
/* the preloader division is visible until the whole page loades and then fades out using this code */
$(window).load(function() {
   $('#preloader').fadeOut(300, function() {
      $(this).remove();
   });
}); 
</script> 
```

然后添加这个css代码

```
#preloader,#spinner {  
     position:fixed;  
     top:0; left:0; right:0; bottom:0; margin:auto; 
     background:#fff;  
     z-index:9999;  
     overflow:hidden;
} 
```

它会工作......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-01T05:10:20.103

这是一个纯 svg 解决方案，也可定制

```
body {
  font-family: "Courier New", Courier, monospace;
  background-color: #333333;
  margin: 0px;
  padding: 0px;
  color: #e8e8e8;
}
a{
   color: #e8e8e8;
}
.path {
  stroke-dasharray: 310;
  stroke-dashoffset: 280;
  animation: dash 2s linear  infinite;
}

@keyframes dash {
  0% {
    stroke-dashoffset: 280;
  }

  25% {
    stroke-dashoffset: 15;
  }
  100% {
    stroke-dashoffset: 280;
  }
}

.loader {
  animation: spin 1s linear infinite;
}

@keyframes spin {
  from{ transform: rotate(0deg); }
  to{ transform: rotate(360deg); }
}
```

```
<div style=" display: flex;
  flex-direction: column;
  justify-content: space-around;
  align-items: center;
  height: 100vh;">
<svg class='loader'
   width="120"
   height="120">
   <circle
    class="progress-ring__circle"
    stroke="#D9DDE4"
    stroke-width="10"
    stroke-linecap="round"
    fill="transparent"
    r="52"
    cx="60"
    cy="60"/>
  <circle
    class="path" 
    stroke="#1a73e8"
    stroke-width="10"
    stroke-linecap="round"
    fill="transparent"
    r="52"
    cx="60"
    cy="60"/>

</svg>

  <a href="https://codesandbox.io/s/ring-preloader-ui-opeso" target="_blank">[Customize your own ring preloader]</a>
  </div>
```

# javascript - 在 iframe 中获取子对象的实例

> ID：15865323
> 
> 赞同：9
> 
> 时间：2013-04-07T17:17:04.270
> 
> 标签：javascript, iframe

我需要自动化一个使用 iframe 嵌入子“表单”的 web 表单，这些表单可以被视为单独的 html 页面。

因此，您会得到一个父文档，其中包含他们称为 iframe 的视图字段。iframe 内是“子”嵌入网页。

一个简单的例子：

我已经从 html 中删除了很多内容以将其缩小到合理的大小

```
<html>
<body>
  <div id="123" arid=123 artype="View" ardbn="vfMyChild" 
  class="arfid123 ardbnvfMyChild" 
STYLE="top:49 left:75 width:1038 height:322" arvfframe="&lt;iframe style=&quot;top:0 left:0 width:1038; height:322&quot name=&quot;VF123&quot;  title=&quot;View Field&quot; src=&quot;javascript:&amp;quot&#59;&amp;lt&#59;HTML&amp;gt&#59;&amp;lt&#59;/HTML&amp;gt&#59;&amp;quot&#59;&quot; &gt;
&lt;/iframe&gt;">
</div>

</body>
</html> 
```

然后嵌入的子 html 可以像这样简单：

```
<html>
<body>
<div id="321" arid=321 artype="Char" ardbn="txtRegister">
   <label id="label321" class="label f6">Register:</label>
   <textarea id="arid_321" cols="20" maxlen=255 rows=1></textarea>
</div>
</body>
</html> 
```

STYLE= 中包含的 html 看起来有点奇怪 - 不知道为什么会这样。但我可以看到它有点像 iframe。

我有一个顶级文档对象的实例，我有一个 id=123 的 div 实例。我需要自动化孩子中的 textarea 对象。我尝试了以下方法，但没有成功。

```
var viewfields;  //is a ref to the div with id=123

if(viewfields) {
     window.alert("viewfields.length=" + viewfields.length);  //prints len=1 as expected
     // line below get Caught exception: Unable to get value of the 
     // property 'document': object is null or undefined
     var innerDoc = viewfields[0].contentDocument || viewfields[0].contentWindow.document;
     if(innerDoc) {
           window.alert("Wohoo we have an innerDoc");
     }
} else
      window.alert("no view fields found"); 
```

我正在使用 IE9 进行测试。

我能用这个 html 获取内部网页的实例吗？如果是这样，怎么做？

编辑

如果有帮助，这里是有问题的 div 的实际未经编辑的 html。

```
<div id="WIN_0_536870915" arid=536870915 artype="View" ardbn="vfCubaChildren"  class="arfid536870915 ardbnvfCubaChildren" STYLE="top:49&#59; left:75&#59; width:1038&#59;  height:322&#59;z-index:1001&#59;background-color:transparent&#59;" arvfframe="&lt;iframe  style=&quot;top:0&amp;#59&#59; left:0&amp;#59&#59; width:1038&amp;#59&#59;  height:322&amp;#59&#59;background-color: transparent&amp;#59&#59;&quot;  name=&quot;VF536870915&quot; frameborder=1 scrolling=&quot;auto&quot;  allowtransparency=&quot;true&quot; title=&quot;View Field&quot;  src=&quot;javascript:&amp;quot&#59;&amp;lt&#59;HTML&amp;gt&#59;&amp;lt&#59;/HTML&amp;gt&#59    ;&amp;quot&#59;&quot; onload=&quot;DVFol&amp;#40&#59;&amp;#41&#59;&quot;&gt;
&lt;/iframe&gt;">
</div> 
```

该 div 包含子窗体。子窗体就像另一个 html 网页。它具有标准的 html 输入字段和 textarea。我需要将文本发布到孩子（来自父母）的文本区域。但问题是我还不能从父级访问子 html 对象。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T23:08:26.423

如果您试图从父级获取数据，`iframe`那么这就是您要寻找的。请记住，这仅在`iframe`源是来自同一域的页面时才有效，否则您将无权访问其内容。

[http://jsfiddle.net/wao20/Ja54y/19/](http://jsfiddle.net/wao20/Ja54y/19/)

首先确保您的`iframe`已加载，然后您可以调用它来访问您的`iframe`dom。

```
$('#iframe_id_123').contents().find('#element_inside_your_iframe'); 
```

**更新：**

如果你想要一个纯 js 解决方案，你可以试试这个：

```
var f = document.getElementById('f123');
if (f != undefined){
    var doc = f.contentDocument || f.contentWindow.document;
    var txt = doc.getElementById('secret');
    alert(txt.value);
}
else {
    alert('No iframe, no secret!');
} 
```

[http://jsfiddle.net/wao20/Ja54y/34/](http://jsfiddle.net/wao20/Ja54y/34/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T04:51:59.250

iframe 的内容可能未加载。您可以尝试检查 iframe 是否已加载，如果已加载，则尝试访问其文档元素。

例如，访问 iframe 的文档元素的代码被拆分为在`AfterFrameLoads()`iframe 的 onload 事件期间调用的函数。

```
var viewfields;  //is a ref to the div with id=123`

if(viewfields) {
    window.alert("viewfields.length=" +  viewfields.length);  //prints len=1 as expected

    // Check if iframe loading is complete, attach rest of code to onload event 
    if (viewfields[0].addEventListener){ // for Mozilla, FF, Chrome, etc...
        viewfields[0].addEventListener("onload",AfterFrameLoads());
    }
    else if (viewfields[0].attachEvent){ // for IE and Opera
        viewfields[0].attachEvent("onload",AfterFrameLoads());
    }
 }

// Attempt to access document after iframe loads.

function AfterFrameLoads(){   
     var innerDoc = viewfields[0].contentDocument || viewfields[0].contentWindow.document;       

     if(innerDoc) {
           window.alert("Wohoo we have an innerDoc");
     }
    else {
      window.alert("no view fields found");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-04T10:06:11.413

var 视场；//是对 id=123 的 div 的引用`

if(viewfields) { window.alert("viewfields.length=" + viewfields.length); //按预期打印 len=1

```
// Check if iframe loading is complete, attach rest of code to onload event 
if (viewfields[0].addEventListener){ // for Mozilla, FF, Chrome, etc...
    viewfields[0].addEventListener("onload",AfterFrameLoads());
}
else if (viewfields[0].attachEvent){ // for IE and Opera
    viewfields[0].attachEvent("onload",AfterFrameLoads());
} 
```

}

// 尝试在 iframe 加载后访问文档。

函数 AfterFrameLoads(){
var innerDoc = viewfields[0].contentDocument || viewfields[0].contentWindow.document;

```
 if(innerDoc) {
       window.alert("Wohoo we have an innerDoc");
 }
else {
  window.alert("no view fields found");
} 
```

}

# java - 带有 JMS 的 GUI 中的 Java 线程

> ID：15865331
> 
> 赞同：0
> 
> 时间：2013-04-07T17:18:02.040
> 
> 标签：java, swing, concurrency, jms, event-dispatch-thread

我正在尝试在 GUI Swing 中使用 JMS 发送消息。当我为 JMS 制作线程时，Swing 冻结，但消息发送正确（通过 JBOSS 日志记录），但它无法使用。我需要从 Swing 为 Chat 对象设置一些参数。如何使 Swing 中的 Chat 类实例（使用 JMS 方法）在 Swing 上独立运行并协同运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T17:30:41.470

您正在阻止事件调度线程，因此 Swing 冻结。阅读 Swing 教程中有关[Swing 中的并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)的部分以获取更多信息。

正如已经推荐的那样，您可能应该使用`SwingWorker`教程中讨论的 a 。

# yii - 森托斯 | Yii框架 | 没有权限

> ID：15865332
> 
> 赞同：1
> 
> 时间：2013-04-07T17:18:03.167
> 
> 标签：yii, centos

我在尝试在 Apache Httpd 服务器上部署基于 Yii 的应用程序时遇到权限被拒绝错误，以下是相同的日志。

> require_once(): 在 / 中打开所需的 '/home/tarun/scripts/yii-1.1.13/framework/yii.php' (include_path='.:/usr/share/pear:/usr/share/php') 失败var/www/hellouttarakhand.com/index.php 第 12 行 [2013 年 4 月 6 日星期六 14:49:03] [错误] [客户端 ::1] PHP 警告：require_once(/home/tarun/scripts/yii-1.1\. 13/framework/yii.php）：无法打开流：第 12 行 /var/www/hellouttarakhand.com/index.php 中的权限被拒绝

由于上述错误，应用程序页面总是显示为空白，因为脚本无法执行。

我已将 chmod 777 赋予 yii 根文件夹并执行以下命令

> chcon -Rv --type=httpd_user_content_rw_t /home/tarun/scripts/yii-1.1.13/

但这个错误仍然没有运气。

任何指针将不胜感激。

# java - 无法在 Pentaho 数据集成 (Kettle) 中运行spoon.bat 或任何其他批处理文件

> ID：15865335
> 
> 赞同：4
> 
> 时间：2013-04-07T17:18:30.810
> 
> 标签：java, pentaho, etl, kettle

尝试过 pdi-ce-4.1.0-stable 和 pdi-ce-4.2.0-stable

我的机器 - Windows 7 64 位

当我运行 Spoon.bat 时，命令行窗口出现又消失，然后什么也没有发生。

当我尝试从命令行运行它时，我得到

> 调试：使用 JAVA_HOME 调试：_PENTAHO_JAVA_HOME=C:\Program Files\Java\jdk1.5.0_22 调试：_PENTAHO_JAVA=C:\Program Files\Java\jdk1.5.0_22\bin\javaw
> 
> C:\pentaho\data-integration>start "Spoon" "C:\Program Files\Java\jdk1.5.0_22\bin \javaw" "-Xmx512m" "-XX:MaxPermSize=256m" "-Djava.library.path =libswt\win64" "-D KETTLE_HOME=" "-DKETTLE_REPOSITORY=" "-DKETTLE_USER=" "-DKETTLE_PASSWORD=" "-DKETTLE_PLUGIN_PACKAGES=" "-DKETTLE_LOG_SIZE_LIMIT=" -jar launcher\launcher.jar -lib ..\ libswt\win64

但话又说回来，PDI GUI 没有打开。我在另一台 32 位机器上运行了同样的程序，它运行得很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T07:28:28.347

它们是 jdk 不支持的少数东西，它们是 1.6 或更低版本，尝试下载 jsk 1.7 并配置它可能会解决您的问题，因为我过去遇到的错误很少是因为 jdk 版本较低。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-04T19:33:03.917

我知道这是一个古老的推荐，但也许这可以帮助某人。您只需要将 .bat 文件中的所有“JAVAW”替换为“JAVA”。它对我有用。tks。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-28T22:54:53.213

下载社区版与安装 EE 时似乎缺少一些文件夹。尝试安装两者，然后从 EE 中获取“ui”文件夹并将其复制到 CE 文件夹中。运行spoon.bat 现在应该可以工作了。这对我有用，希望它有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-22T11:30:40.733

昨天更新 Java 7 Update 55 后，我遇到了同样的问题，同样的消息。水壶：pdi-ce-5.0.1.A-stable Windows 7 32 位

已解决：我将 PENTAHO_JAVA_HOME 变量设置为 jr6，现在spoon.bat 打开。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-12T22:42:49.207

感谢您发布问题以及上述所有提示。我正在使用最新版本的勺子和旧版本的 Java。当我在没有开始的情况下在命令行中运行spoon.bat 时，它告诉我不支持类文件major.minor 版本。我安装了最新版本的 Java (X64) 并将我的 JAVA_HOME 文件夹指向新文件夹，然后就可以了……在我的例子中，文件夹路径是“C:\Program Files\Java\jre1.8.0_111”。我也将 UI 文件夹从 EE 复制到了 CE。如果您使用的是最新版本的勺子，请使用最新版本的 Java。我需要在我的系统上添加指向 java 的最新版本文件夹的 JAVA_HOME 或 JAVA_JRE 变量。

# java - 如何在 Java 中迭代整数数组列表的元素

> ID：15865338
> 
> 赞同：2
> 
> 时间：2013-04-07T17:18:57.503
> 
> 标签：java, arrays, arraylist

我了解当您迭代常规数组元素时，它是这样的：

```
int[] counter = new int[10];

for loop{
   counter[i] = 0;
}

when button clicked{
  counter[0]++; //For example
  counter[6]++;
} 
```

但是我不明白如何遍历数组列表的元素。如果有人可以帮助我理解，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T17:20:04.850

最简单的方法是[使用 for each 循环](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)

```
for(int elem : yourArrayList){
   elem;//do whatever with the element
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T17:20:49.397

```
for (int i = 0; i < arrayList.size(); i++) {

} 
```

或者

```
Iterator<Object> it = arrayList.iterator();
while(it.hasNext())
{
    Object obj = it.next();
    //Do something with obj
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-07T17:25:46.057

遍历数组列表非常简单。

您可以使用旧的`for loop`，也可以使用`enhanced for loop`

**好旧的 for 循环**

```
int len=arrayList.size();
for(int i = o ; i < len ; i++){
int a =arrayList.get(i);
} 
```

**增强的 for 循环**

```
for(int a : arrayList){
//you can use the variable a as you wish.
} 
```

# sql - 我们可以在 oracle 中指定序列中的循环数吗？

> ID：15865339
> 
> 赞同：-1
> 
> 时间：2013-04-07T17:19:08.180
> 
> 标签：sql, oracle, sequence

我开始在 Oracle 中创建一个序列。在浏览 oracle 文档时，我得到了这个原型

```
Create Sequence SeqTest5
Start With 0
Increment by 1
Min value 0
Maxvalue 8
NoCycle    --I got to know we can give this as 'Cycle' which will again
           -- Repeat the loop. But my doubt is why cannot we specify  number of 
           -- Loops. Such as Cycle 20             
NoCache    --I got to know we can give certain buffer lenght via cache 
```

你能解释一下为什么我们不能声明它，因为我已经尝试过并得到了这个错误

```
1  create sequence seqtest4
2  cache 30,
3* cycle 20,
SQL> /
cache 30,
    *
ERROR at line 2:
ORA-00933: SQL command not properly ended 
```

例如：-

```
TNUM
     0
     1
     4
     2
     3
     5
     6
     7
     8 
```

这个0-8应该写10次就停止。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T17:39:55.383

您不能指定循环次数；只是你是否想骑自行车。`CREATE SEQUENCE`语法在[这里](http://docs.oracle.com/cd/B13789_01/server.101/b10759/statements_6014.htm)。

你的上面有几个问题`CREATE SEQUENCE`：

*   逗号——它们不属于；只是摆脱他们。
*   指定`CYCLE 20`- 您可以指定`CYCLE`或`NOCYCLE`仅指定。默认值为`NOCYCLE`.
*   如果您指定`CYCLE`，您还必须指定一个`MAXVALUE`.

* * *

**附录**：根据实际要求更新的问题，即数1-8十次。这是没有序列的方法；它基于用于生成数字序列的常用 Oracle 技巧：

```
SELECT LEVEL FROM DUAL CONNECT BY LEVEL <= 8 
```

上面的语句将按顺序输出数字 1 到 8。要重复十次，您需要再做一个“1 到 10”计数器，然后将其交叉连接到“1 到 8”，然后确保它的顺序正确。这使事情变得有点复杂，这可以在最终答案中看到：

```
SELECT SeqCounter FROM (
  SELECT SeqCounter, CycleCounter FROM (
    SELECT LEVEL AS SeqCounter FROM DUAL CONNECT BY LEVEL <= 8)
  CROSS JOIN (
    SELECT LEVEL AS CycleCounter FROM DUAL CONNECT BY LEVEL <= 10)
) ORDER BY CycleCounter, SeqCounter 
```

上面的语句将给出问题中要求的输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-14T16:06:29.507

这不是最好用模函数处理吗？

```
CREATE SEQUENCE seqtest5 START WITH 0 INCREMENT BY 1 MINVALUE 0 MAXVALUE 80 NOCYCLE;

SELECT mod(seqtest5.nextval, 9) from dual;

0, 1, 2, 3, 4, 5, 6, 7, 8, 0, 1, 2, 3, 4, 5, 6, ...

ORA-08004: sequence SEQTEST5.NEXTVAL exceeds MAXVALUE and cannot be instantiated 
```

# matlab - 如何选择 pca 之后最相关的前 100 个特征（一个子集）？

> ID：15865340
> 
> 赞同：3
> 
> 时间：2013-04-07T17:19:11.357
> 
> 标签：matlab, data-mining

我在一个 63*2308 的矩阵上进行了 PCA，得到了一个分数和一个系数矩阵。得分矩阵为 63*2308，系数矩阵为 2308*2308 维度。

如何提取最重要的前 100 个特征的列名，以便我可以对它们执行回归？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T19:12:55.987

PCA 应该为您提供一组特征向量（您的系数矩阵）和一个特征值向量 (1*2308)，通常称为 lambda）。您可能在 matlab 中使用不同的 PCA 函数来获取它们。

特征值表示每个特征向量解释了多少数据。选择特征的一种简单方法是选择具有最高特征值的 100 个特征。这为您提供了一组特征，可以解释数据中的大部分差异。

如果你需要证明你的写作方法是合理的，你实际上可以计算每个特征向量解释的方差量，并在例如解释 95% 的方差时进行切割。

请记住，仅基于特征值进行选择可能与对回归最重要的特征集不对应，因此如果您没有获得预期的性能，您可能需要尝试不同的特征选择方法，例如递归特征选择. 我建议使用谷歌学者找到几篇做类似事情的论文，看看他们使用了什么方法。

* * *

使用 PCA 获取前 100 个主要组件的快速 matlab 示例。

```
[eigenvectors, projected_data, eigenvalues] = princomp(X);
[foo, feature_idx] = sort(eigenvalues, 'descend');
selected_projected_data = projected(:, feature_idx(1:100)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T12:54:05.370

当心！

只有 63 个观察值和 2308 个变量，您的 PCA 结果将毫无意义，因为数据未**指定**。您应该至少有（经验法则）维度*3 的观察结果。

使用 63 个观测值，您最多可以定义一个 62 维的超空间！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T18:49:36.250

Have you tried with

```
B = sort(your_matrix,2,'descend');
C = B(:,1:100); 
```

# javascript - 强制编号

> ID：15865346
> 
> 赞同：25
> 
> 时间：2013-04-07T17:19:42.257
> 
> 标签：javascript

我经常看到这个把戏

```
after = +after; 
```

将变量强制`after`为一个数字。通过阅读[Node.JS 源代码](https://github.com/joyent/node/blob/master/lib/timers.js#L188)，我发现了另一种方法：

```
after *= 1; // coalesce to number or NaN 
```

这两种方法的行为是否严格相同？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-04-07T17:30:33.033

是的。[一元运算符`+`](http://es5.github.io/#x11.4.6)和[乘法运算符](http://es5.github.io/#x11.5)（例如`*`（从[复合赋值](http://es5.github.io/#x11.13.2) 中调用））都`op=`调用内部[`ToNumber`](http://es5.github.io/#x9.3)算法。

您甚至可以通过静态调用[`Number`构造函数](http://es5.github.io/#x15.7.1.1)来使用第三个选项：

```
after = Number(after); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-07T17:25:45.733

在快速[谷歌以确保我的怀疑是真的](http://jibbering.com/faq/notes/type-conversion/)之后，我得出了这个结论。使用`+`运算符转换为数字更快，因为在类型转换之后不会发生数学运算，而使用该`*=`方法意味着在`after`转换之后，它将乘以`1`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-23T08:52:21.230

注意：在某些情况下`after = after-0`调用不同于`after = after+0`. 我注意到它的日期。

这仅在 Chrome v39 中进行了测试：

```
var date = new Date(2000,0,1);
date += date; //"Sat Jan 01 2000 00:00:00 GMT+0000 (GMT Standard Time)Sat Jan 01 2000 00:00:00 GMT+0000 (GMT Standard Time)"
var date2 = new Date(2000,0,1);
date2 + 0; //"Sat Jan 01 2000 00:00:00 GMT+0000 (GMT Standard Time)0"
date2 - 0; //946684800000
date2 * 1; //946684800000 
```

我不知道 JS 规范中定义了什么，但是使用日期，因为日期和数字都可以转换为字符串，并且 + 运算符适用于字符串，然后 Chrome 使用字符串连接。因为 - 运算符没有等效的字符串，所以它回退到数字比较。

在将日期强制转换为数字进行比较时，我发现这很有用

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-10T09:30:34.200

是的，但是请注意，只有*一元*+ 运算符可以执行此操作。即`10 + "10"`会给你`"1010"`。

一个可能不太容易出错的选项是使用 asm.js 所做的：

```
10 + ("10"|0) 
```

尽管不利的是，它确实需要括号。在任何情况下它都应该是最快的选择（可能等于一元+）。

# ruby-on-rails - 我需要一个真正的 UNIX RoR 开发环境

> ID：15865351
> 
> 赞同：5
> 
> 时间：2013-04-07T17:19:52.113
> 
> 标签：ruby-on-rails, ruby, unix, ubuntu

从一开始，我就是一个 Windows 大师。我从 MS-DOS 开始。我安装了 Windows 2.1 和此后的所有 Windows。我家现在有 10 个不同的 Windows 机器在运行，从 Windows 7 Ultimate 到各种风格的 Windows Server。我还没有完成 Windows 8，也不想去那里。

我在服务器和各种软件方面都有 UNIX 经验，但它并不是我的首选环境。但是，我想我正在转换。我试图假装使用 Cygwin 和 MSYS 在 Windows 下运行 UNIX。我的目的是搭建一个开发环境。两者都让我失望了。我花在解决一系列技术问题上的时间比我开发的时间还要多。这是不可接受的。

到目前为止，我的 Ruby on Rails 开发环境是我目前的最高优先级。我现在有网站要建。

在这一点上，我有两个选择。一种是在云中找到一个 UNIX 开发环境。另一种是将我的许多机器中的一台转换为真正的 UNIX 系统。所以，我需要建议。我真的不想建立和照看一个系统。基于云的开发环境的想法非常有趣，但需要注意的是，我不会像 Cygwin 和 MSYS 那样把它追到另一个老鼠洞。

以下是问题。是否有可靠的基于云的 Ruby on Rails 友好开发环境？如果做不到这一点，我应该建立一个基于 Ubuntu 的系统。如果我去那里，我是转换工作站还是服务器？

谢谢...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T17:37:44.447

我强烈推荐[Vagrant](http://www.vagrantup.com/ "流浪汉")。我用它在我的 Windows 系统上进行开发。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T17:23:57.867

正如您所发现的，Windows 不适合 RoR 开发。您最好的选择是使用像 VirtualBox 这样的 VM 来运行 Linux/Unix 实例。还有其他 VM 选项，但 VirtualBox 是免费的。

如果做不到这一点，只需将你的一个盒子转换为 Linux/Unix。对于开发来说，它是工作站还是服务器都没有关系。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-07T17:35:04.423

### Mac OSX

RoR 生产的非官方标准是 Linux，但对于开发来说，它是 Mac OSX。开发人员向 Apple 平台的大规模迁移已经持续多年。

它为您提供了两全其美：它是底层的 Unix，但它也是一个商业平台、一个精致的 UI 和一个可用的软件生态系统。

是的，它很贵，但人们应该问自己，*为什么人们愿意支付这么多钱？*如果你能买得起 10 个 Windows 盒子，那么为一台 Mac 买 1 美元怎么样？然后，您将不仅拥有一个可行的 RoR 环境，而且是最好的。

### 或者去虚拟机

但是如果你不接受这个建议，你可能想免费安装一个像[Xen](http://www.xen.org/)或[XenServer](http://www.citrix.com/products/xenserver.html)这样的 Hypervisor ，然后你就可以在同一台机器上运行 Windows*和Linux。**这与在*Windows下运行 VM 略有不同。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-15T16:01:21.053

在外部，我收到了对 EngineYard.com 的推荐，认为它是一个出色的 RoR 环境，并将最终将其视为我的主要开发/迁移/生产环境。

我现在有一个可用的 Debian 系统，并且正在将其构建为本地 RoR 环境。对于一个严肃的 RoR 开发环境来说，这似乎是正确的。我会在它完全建成后立即去那里，因为 RoR 仅适用于 UNIX。

但是，至少暂时，我发现 RubyStack 是一个非常实用的 Windows RoR 开发环境。它可以 100% 用作独立系统，不需要将 UNIX 风格的环境硬塞到 Windows 上。尝试在 Windows 上运行 UNIX 总是令人沮丧，所以这满足了我的迫切需要。

# c# - SQL Server CE 连接字符串不允许数据插入

> ID：15865364
> 
> 赞同：0
> 
> 时间：2013-04-07T17:20:46.417
> 
> 标签：c#, wpf, sql-server-ce

好的，从昨晚深夜到今天凌晨，我一直在做这件事。我正在尝试将一些数据插入 SQL Server CE 数据库。我已经走到了尽头。

这是我要实现的代码：

```
public static void InsertData(string sqlStatement)
{
        try
        {
            //string strConn = AppDomain.CurrentDomain.GetData("DataDirectory").ToString();
            //string StartupPath = Path.GetDirectoryName(Assembly.GetExecutingAssembly().GetName().CodeBase).Remove(0, 6); // remove file:\\
            //string connectionString = @"Data Source=Database1.sdf";
            //string connectionString = @"Data Source = |DataDirectory|\Database1.sdf";
            //string connectionString = @"Data Source = C:\Users\My\Documents\Visual Studio 2012\Projects\VIN_Decoder\VIN Decoder\VIN Decoder\Database1.sdf"
            //string connectionString = string.Format("Data Source={0}; Persist Security Info=False;", Path.Combine(Application.StartupPath, "Database1.sdf"));

            //THIS ONE ACTUALLY WORKS!!!!!!!!!!!! :
            //string connectionString = @"Data Source = C:\Users\My\Documents\Visual Studio 2012\Projects\VIN_Decoder\VIN Decoder\VIN Decoder\Database1.sdf"

            string connectionString = Properties.Settings.Default.Database1ConnectionString;
            SqlCeConnection sqlceCon = new SqlCeConnection(connectionString);
            sqlceCon.Open();

            SqlCeCommand sqlCeCom = new SqlCeCommand(sqlStatement, sqlceCon);
            sqlCeCom.ExecuteNonQuery();
            sqlCeCom.Dispose();
            sqlceCon.Close();
        }
        catch (Exception e)
        {
        }
    } 
```

您可以查看所有已注释的连接字符串以了解我尝试过的内容。奇怪的是，我可以简单地在另一种方法（SELECT 语句，而不是 INSERT INTO 语句）中使用以下连接字符串，该方法从数据中获取单个值并且工作正常。

```
string connectionString = @"Data Source = |DataDirectory|\Database1.sdf"; 
```

我已经直接测试了查询，就像评论说的那样，静态路径确实有效，因此告诉我我的查询很好。但是，我当然需要一些相对于发布和多开发人员开发的东西。

我尝试过的大多数连接字符串都允许 try 块在没有错误的情况下完成，但不会插入数据。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T18:25:01.973

在发布这个问题之前，我搜索了我的内心，但西蒙关于相似性是正确的。但是，我们将在这里得到更好的答案。科拉克是正确的。我将属性设置为不复制，删除 bin\debug 文件夹中的副本，并且应用程序不会在调试模式下运行，因为即使路径都指向其他文件位置，它也找不到 db。应用程序正在寻找 bin\debug 中的副本。最终，它一直在工作。我建议有人连接到 bin\debug 中的副本，以便他们可以在服务器资源管理器中测试值。感谢您的帮助 Corak 和其他所有人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T18:27:50.097

```
/*If your solution is web application, make sure Database1.sdf location path is under the 
     * App_Data folder 
     * Web.Config <add name="LocalDB" connectionString="Data Source=|DataDirectory|\Database1.sdf"/>
     */
    protected string ConnString
    {
        get
        {
            return ConfigurationManager.ConnectionStrings["LocalDB"].ToString();
        }
    }

    /*
     * or you can use try absolute path as connectionstring
     * modify your directory path as PhysicalApplicationPath result
     */
    public string BaseDirConnString
    {
        get
        {
            if ((HttpContext.Current == null) || (HttpContext.Current.Request == null))
            {
                throw new ApplicationException("...");
            }

            return @"Data Source=" + HttpContext.Current.Request.PhysicalApplicationPath + "VIN Decoder\\Database1.sdf";
        }
    }

    protected SqlCeConnection SqlCeConnection
    {
        get
        {
            var connection = new SqlCeConnection(BaseDirConnString);
            connection.Open();
            return connection;
        }
    } 
```

# android - Android插入新的日历同步

> ID：15865365
> 
> 赞同：3
> 
> 时间：2013-04-07T17:20:48.263
> 
> 标签：android, google-calendar-api, android-calendar, android-syncadapter

我将使用我的自定义 Android 应用程序在现有的 Google 帐户中创建一个新日历。按照堆栈溢出中的一些教程，我创建了由以下组件组成的应用程序：主要活动（我在其中读取和管理事件）、一个服务文件（称为 CalendarService）和一个 SyncAdapter。在主要活动中，我使用 Intent 初始化了服务：

```
private Intent calendarServiceIntent;
...
calendarServiceIntent = new Intent(getApplicationContext(), CalendarService.class);
startService(calendarServiceIntent); 
```

然后我以这种方式实现了服务：

```
public class CalendarService extends Service{

//private static final Object sSyncAdapterLock = new Object();

private static CalendarSyncAdapter sSyncAdapter = null;

@Override
public void onCreate() {
    super.onCreate();
    //synchronized (sSyncAdapterLock) {
        if (sSyncAdapter == null) {
            System.out.println("SERVICE STARTED ON CREATE");
            sSyncAdapter = new CalendarSyncAdapter(getApplicationContext(), true); 
        }
   // }
}

@Override
public IBinder onBind(Intent intent) {
    System.out.println("SERVICE STARTED BINDER");
    return sSyncAdapter.getSyncAdapterBinder();
} 
```

}

然后我实现类 CalendarSyncAdapter 扩展 AbstractThreadedSyncAdapter 为：

```
 public CalendarSyncAdapter(Context context, boolean autoInitialize) {
    super(context, autoInitialize);
}

@Override
public void onPerformSync(Account account, Bundle extras, String authority,
        ContentProviderClient provider, SyncResult syncResult) {
    Uri calUri = CalendarContract.Calendars.CONTENT_URI;
      ContentValues cv = new ContentValues();
      cv.put(CalendarContract.Calendars.ACCOUNT_NAME, "mygoogleaccount@gmail.com");
      cv.put(CalendarContract.Calendars.ACCOUNT_TYPE, CalendarContract.ACCOUNT_TYPE_LOCAL);
      cv.put(CalendarContract.Calendars.NAME, "MyCalendar");
      cv.put(CalendarContract.Calendars.CALENDAR_DISPLAY_NAME, "MyCalendar");
      cv.put(CalendarContract.Calendars.CALENDAR_COLOR, Color.RED);
      cv.put(CalendarContract.Calendars.CALENDAR_ACCESS_LEVEL, CalendarContract.Calendars.CAL_ACCESS_OWNER);
      cv.put(CalendarContract.Calendars.OWNER_ACCOUNT, "mygoogleaccount@gmail.com");
      cv.put(CalendarContract.Calendars.VISIBLE, 1);
      cv.put(CalendarContract.Calendars.SYNC_EVENTS, 1);

      ContentResolver cr = getContext().getContentResolver();

      Uri creationUri = asSyncAdapter(Calendars.CONTENT_URI, "mygoogleaccount@gmail.com", CalendarContract.ACCOUNT_TYPE_LOCAL );
      Uri created = cr.insert( creationUri, cv );

}

private Uri asSyncAdapter( Uri uri, String account, String accountType )
{
    return uri.buildUpon()
    .appendQueryParameter(CalendarContract.CALLER_IS_SYNCADAPTER,"true")
    .appendQueryParameter(Calendars.ACCOUNT_NAME, "mygoogleaccount@gmail.com")
    .appendQueryParameter(Calendars.ACCOUNT_TYPE, CalendarContract.ACCOUNT_TYPE_LOCAL).build();
} 
```

这是 xml 文件的一部分

```
<service android:name=".CalendarService"
android:exported="true">
<intent-filter>
<action android:name="android.content.CalendarSyncAdapter" />
</intent-filter>
<meta-data
android:name="android.content.CalendarSyncAdapter"
android:resource="@xml/calendar_sync_adapter" />
</service> 
```

这是关联的 xml 源

```
<?xml version="1.0" encoding="utf-8"?>
<sync-adapter xmlns:android="http://schemas.android.com/apk/res/android"
   android:contentAuthority="com.android.calendar"
   android:accountType="com.google"
   android:userVisible="true"
/> 
```

显然，这一切都不起作用，只有当我在主要活动中移动代码（在方法“onPeformSync”中）时才会创建新日历。哪个是使用 syncAdapter 创建新日历的正确解决方案？最后一个疑问：有没有可能将新日历与谷歌日历同步？提前致谢

# ios - 如何使用全屏图像 ios 创建自定义 UIImagePickerController

> ID：15865368
> 
> 赞同：6
> 
> 时间：2013-04-07T17:21:21.197
> 
> 标签：ios, uiimageview, uiimagepickercontroller

我有一个简单的 UIImagePickerController 将使用相机拍照，但有几件事我希望它做：

*   有一个自定义的相机 UI
*   采用全屏而不是 480x640（如果在 4 英寸手机上）

这是我显示 UIImagePickerController 的代码：

```
- (IBAction)pick:(id)sender {
    NSLog(@"abc");
    picker = [[UIImagePickerController alloc] init];
    if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera]) {
        [picker setSourceType:UIImagePickerControllerSourceTypeCamera];
    } else {
        [picker setSourceType:UIImagePickerControllerSourceTypePhotoLibrary];
    }
    [picker setDelegate:self];
    [self presentViewController:picker animated:YES completion:nil];

} 
```

这是拍摄图像的时间：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
    [self dismissViewControllerAnimated:YES completion:nil];
    UIImage *image = [info objectForKey:UIImagePickerControllerOriginalImage];
    [imageView setImage:image];
} 
```

我该怎么做呢？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-07T17:34:58.097

对于第一个要点，我想您可以使用对象的`cameraOverlayView`属性`UIImagePickerController`在选择器默认界面上添加自定义 UI：

```
- (IBAction)pick:(id)sender {
    NSLog(@"abc");
    picker = [[UIImagePickerController alloc] init];
    if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera]) {
        [picker setSourceType:UIImagePickerControllerSourceTypeCamera];
    } else {
        [picker setSourceType:UIImagePickerControllerSourceTypePhotoLibrary];
    }

    // Add here your custom UI here
    [picker setCameraOverlayView:self.customCameraOverlayView];

    [picker setDelegate:self];
    [self presentViewController:picker animated:YES completion:nil];

} 
```

**编辑**

我已经测试过`UIImagePickerController`它并返回具有完整尺寸（PixelXDimension 和 PixelYDimension）的图像：

```
 UIImagePickerControllerMediaMetadata =     {
        DPIHeight = 72;
        DPIWidth = 72;
        Orientation = 6;
        "{Exif}" =         {
            ApertureValue = "2.526068811667588";
            BrightnessValue = "-0.5779073354035674";
            ColorSpace = 1;
            DateTimeDigitized = "2013:04:07 22:30:03";
            DateTimeOriginal = "2013:04:07 22:30:03";
            ExposureMode = 0;
            ExposureProgram = 2;
            ExposureTime = "0.05882352941176471";
            FNumber = "2.4";
            Flash = 24;
            FocalLenIn35mmFilm = 35;
            FocalLength = "4.28";
            ISOSpeedRatings =             (
                800
            );
            MeteringMode = 3;
            PixelXDimension = 3264;
            PixelYDimension = 2448;
            SceneType = 1;
            SensingMethod = 2;
            ShutterSpeedValue = "4.058893689053568";
            SubjectArea =             (
                1874,
                1478,
                610,
                612
            );
            WhiteBalance = 0;
        };
        "{TIFF}" =         {
            DateTime = "2013:04:07 22:30:03";
            Make = Apple;
            Model = "iPhone 4S";
            Software = "6.1.3";
            XResolution = 72;
            YResolution = 72;
        };
    }; 
```

**编辑**

您还可以将内容模式设置为图像视图以调整大小并适合容器视图：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
    [self dismissViewControllerAnimated:YES completion:nil];
    UIImage *image = [info objectForKey:UIImagePickerControllerOriginalImage];
    [imageView setContentMode:UIViewContentModeScaleAspectFill];
    [imageView setImage:image];
} 
```

之后，`imageView`考虑到设备屏幕（4英寸与否），使用`auto layout`或来满足您在视图控制器中的需要`auto sizing`。

# c - 每周后如何自动更改unix系统密码？

> ID：15865369
> 
> 赞同：-1
> 
> 时间：2013-04-07T17:22:00.810
> 
> 标签：c, linux, shell, unix, passwd

谁能告诉我是否可以使用 shell 脚本或任何其他编程技术在给定的时间间隔（例如每 7 天一次）更改 linux 系统密码而不显式更改它？该脚本应该持续运行以检查时间间隔是否已过，如果已过，则将 passwd 更改为脚本本身中提到的某个默认密码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T17:27:40.310

执行 cron 工作可能会奏效

```
passwd --expire username 
```

这将立即使给定帐户的密码过期，并在第二次登录时强制更改密码。您可以将作业设置为在您需要的任何时间运行策略，并且（如果以 root 身份运行）此命令将对任何指定用户产生影响。

设置一些您以后需要以某种方式告诉用户的显式密码是不安全的。让用户思考密码可能会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T17:26:56.177

使用 cron 来安排你的脚本。

我同意这似乎是一个坏主意，但我不知道你为什么要这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T20:16:15.610

这是一个**非常糟糕的主意**。没有root，你就永远被搞砸了。通过脚本弄乱相关文件本身就是一个糟糕的主意。

如果你想完全禁止 root 登录，给它一个不可能的密码（就像`*`在密码字段中一样`/etc/shadow`。只要确保手头有救援磁盘......

或者使用“密码老化”，查看`passwd(5)`和`shadow(5)`。

# javascript - 为什么会出现水平条？

> ID：15865374
> 
> 赞同：0
> 
> 时间：2013-04-07T17:22:38.660
> 
> 标签：javascript, d3.js

在[使 div 用 d3 填充整个屏幕时，](https://stackoverflow.com/questions/15859896/making-a-div-fill-the-entire-screen-with-d3)我想出了如何使水平滚动条消失，但同样的技术不适用于此：

[http://www.frostjedi.com/terra/dev/d3test.php](http://www.frostjedi.com/terra/dev/d3test.php)

关于为什么的任何想法？

这基本上是对[http://bl.ocks.org/mbostock/4062045的改编](http://bl.ocks.org/mbostock/4062045)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T01:44:37.790

这是因为 SVG 默认是一个内联元素。

请参阅此处的上一个答案：[为什么我的 svg 上有一个 100% 的垂直滚动条？](https://stackoverflow.com/questions/4758638/why-is-there-a-vertical-scrollbar-on-my-svg-at-100)

放

```
svg{display: block;} 
```

# ruby-on-rails - Rails has_many through 似乎不起作用

> ID：15865376
> 
> 赞同：0
> 
> 时间：2013-04-07T17:22:41.280
> 
> 标签：ruby-on-rails, has-many-through

我需要对这个进行第二次观察。当我在两个玩家之间创建匹配时，Tournament.players 返回一个空数组。

**代码**

```
class Tournament < ActiveRecord::Base
  has_many :player_matches
  has_many :matches
  has_many :players, :through => :player_matches  
end

class PlayerMatch < ActiveRecord::Base
  belongs_to :player
  belongs_to :match
  belongs_to :tournament
end

class Player < ActiveRecord::Base
  has_many :player_matches
  has_many :matches, :through => :player_matches
  has_many :tournaments, :through => :player_matches
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T19:42:29.303

您需要有双重`:through`关系：

`player_matches`通过`matches`和`players`通过`player_matches`。

```
class Tournament < ActiveRecord::Base
  has_many :matches
  has_many :player_matches, :through => :matches
  has_many :players, :through => :player_matches  
end

class PlayerMatch < ActiveRecord::Base
  belongs_to :player
  belongs_to :match
end

class Player < ActiveRecord::Base
  has_many :player_matches
  has_many :matches, :through => :player_matches
  has_many :tournaments, :through => :player_matches
end

class Match < ActiveRecord::Base
  belongs_to :tournament  
  has_many :player_matches
  has_many :players, :through => :player_matches
end 
```

# c++ - 关闭窗口线程的句柄

> ID：15865379
> 
> 赞同：0
> 
> 时间：2013-04-07T17:22:51.443
> 
> 标签：c++, multithreading, winapi, threadpool

这是一个基本问题。我正在研究 win32 线程和 C++。Closehandle 在下面的代码中是如何工作的？在每次迭代中，是否创建了 5 个线程？还是只为整个程序创建 5 个线程并在每次迭代中重新使用？如果没有，如何调用线程池？这里的任务只是从队列中为每个线程获取一个元素并对这些元素进行操作。

```
thread_fun(..) {
//synchronize to get one element for each thread
}
main() {
    for(int i=0; i<100; i++) {
    //Fill queue with 10000 elements and pass this to thread function
         for(int j=0;j<5;j++)
             _beginthreadex(..);
         WaitForMultipleObjects(..);
     }
    for(int j=0;j<5;j++)
         CloseHandle(..);
} 
```

请赐教。

# javascript - 无法在脚本标签中加载 Twitter JSON 提要

> ID：15865381
> 
> 赞同：0
> 
> 时间：2013-04-07T17:23:03.037
> 
> 标签：javascript, json, twitter

我有一个我显然无法克服的奇怪问题，我正在尝试使用页面底部的脚本标签来撤销 Twitter JSON 提要：

```
<script src="http://api.twitter.com/1/statuses/user_timeline/haunted85.json?count=15&callback=listTweets" type="text/javascript"></script> 
```

我希望将数据交给我命名的回调函数`listTweets`。问题是，如果我加载页面并尝试通过 javascript 函数在 Chrome 控制台选项卡中获取输出，则会出现`Failed to load resource`错误，但如果我手动复制并在地址栏中输入 URI，则会返回所有 Twitter 数据在浏览器中。我在这里想念什么？

# mongodb - 更改 Objectid 的大小

> ID：15865382
> 
> 赞同：2
> 
> 时间：2013-04-07T17:23:07.210
> 
> 标签：mongodb, mongodb-.net-driver

在 MongoDb 中，ObjectId 是一个 12 字节的 BSON 类型。

有什么办法可以减小objectID的大小吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T17:33:37.557

不，它是 BSON 数据类型。这就像要求一个 32 位整数收缩自身。每个对象都必须具有**_id**属性，但您不限于`ObjectId`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T02:21:45.637

MongoDB 集合中的每个文档都需要具有唯一性`_id`，但值不必是`ObjectId`. 因此，如果您希望减少集合中文档的大小，您有两种选择：

1.  选择文档的独特属性之一并将其用作`_id`字段。例如，如果您有一个帐户集合，其中帐户 ID（外部提供）是您的数据模型的一部分，您可以将帐户 ID 存储在`_id`字段中。

2.  自己管理集合的主键。许多驱动程序支持自定义[主键工厂](https://www.google.com/search?q=MongoDB+driver+primary+key+factory&aq=f&oq=MongoDB+driver+primary+key+factory)。正如@assylias 所建议的那样，使用 int 可以节省大量空间，但是，与将模型中的某个字段用作`_id`.

顺便说一句，`_id`字段的值可以是复合的：您可以使用 Object/hash/map/dictionary。例如，参见[这个 SO question](https://stackoverflow.com/questions/7222062/mongodb-composite-key)。

如果您在 Mongo 之上使用某种类型的对象/模型框架，我会小心 (1)。有些框架很难让开发人员覆盖 id 生成。例如，我在 Ruby 中使用 Mongoid 的体验很糟糕。在这种情况下，(2) 可能是更安全的方法，因为生成发生在驱动程序层。

# android - 切换按钮在离开和返回活动后显示服务状态

> ID：15865383
> 
> 赞同：0
> 
> 时间：2013-04-07T17:23:12.147
> 
> 标签：android, togglebutton

我有一个媒体播放器，可以在服务中流式传输音乐

在我的主要活动中，我单击一个切换按钮，音乐开始播放，当我离开我的应用程序时，切换按钮的图像从播放变为停止，音乐继续播放，但是当我返回应用程序时，切换按钮又开始播放了尝试了 if 语句，但它在这里不起作用是我尝试过的示例我在我的服务中尝试了此代码

```
if (mediaPlayer.isPlaying()){
MainActivity.playStop.setBackgroundResource(R.drawable.stopbtn);    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T18:28:53.967

在您的 Playbackservice 中创建静态变量 isPlaying。然后在你的活动 onResume() 使用类似

```
onResume(){
if(Playbackservice.isPlaying){
   set toggle on
}else{
set toggle off
}
} 
```

# jquery - Jquery Mobile 将标签添加到单选按钮控件组

> ID：15865387
> 
> 赞同：0
> 
> 时间：2013-04-07T17:23:35.667
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, jquery-mobile, haml

我有一个带有四个单选按钮的表单，我不知道如何为该单选按钮添加标签，就像这样

标签 ........ Radio1Radio2Radio3Radio4

单选按钮代码：

```
%div{"data-role" => "fieldcontain"}
  //I think here i need to add something
  %div{"data-role" => "controlgroup", "data-type" => "horizontal"}
    - @models.each do |rep| 
      %label{for: "#{rep.text}_#{c.id}"}= rep.text
      = radio_button_tag "answers[#{c.id}]", id: "#{rep.text}_#{c.id}" 
```

我尝试了几种方法，但我能得到的最好的方法是这样的标签

标签

收音机 1 收音机 2 收音机 3 收音机 4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T17:28:49.173

我只是想通了。我需要的是第二行的 %fieldset 而不是 %div

上面代码的前三行，需要看起来像这样

```
%div{"data-role" => "fieldcontain"}
  %fieldset{"data-role" => "controlgroup", "data-type" => "horizontal"}
    %legend= Label 
```

# java - Jgrapht边缘颜色

> ID：15865388
> 
> 赞同：0
> 
> 时间：2013-04-07T17:23:35.777
> 
> 标签：java, graph-visualization, jgrapht, jgraph

我想使用 Jgrapht 更改边缘的颜色，以便可以在整个图表中显示对应关系。让我们假设节点 1 和 2 之间有一条边。我将用（比如说）红色突出显示这些节点。我将在整个图中找到节点 1 和 2，并以红色显示它们，其余节点以其他颜色显示。我看到创建可视化的文件是**SimpleTouchgraphApplet.java**在这个文件中，我添加了如下语句，

```
setBackground(Color.green);
setForeground(Color.cyan); 
```

我在 init 部分添加了上述两个语句。我还在我的主要功能中添加了以下语句。

```
Color defaultBackColor = new Color(0x01, 0x11, 0x44);
JFrame frame = new JFrame();
frame.setBackground(defaultBackColor);
frame.setForeground(Color.CYAN); 
```

但是，我没有看到前景色或背景色有任何变化。请让我知道哪里出错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T21:14:23.310

我发现可以在 TouchGraphConverter.java 文件中添加边缘着色。

以下函数构造节点。

```
public Node convertToTouchGraph(
    Graph<V, E> graph,
    TGPanel tgPanel,
    boolean selfReferencesAllowed)
    throws TGException
{
    List<V> jgtNodes = new ArrayList<V>(graph.vertexSet());
    Node [] tgNodes = new Node[jgtNodes.size()];

    // add all the nodes...
    for (int i = 0; i < jgtNodes.size(); i++) {
        Node n;
        if (jgtNodes.get(i) instanceof Node) {
            // if our JGraphT object was a touchGraph node, add it unaltered
            n = (Node) jgtNodes.get(i);
        } else {
            // create a TG Node with a "label" and "id" equals to the
            // objects toString() value
            n = new Node(jgtNodes.get(i).toString());

        }

        // store this for edge-related creation below
        tgNodes[i] = n;
        tgPanel.addNode(n);
        tgNodes[i].setBackColor(Color.RED); 
```

最后一行**tgNodes[i].setBackColor(Color.RED)**将使生成图中的节点颜色变为红色。

# ant - 可以访问 ant 宏定义中封闭目标的“名称”吗？

> ID：15865389
> 
> 赞同：0
> 
> 时间：2013-04-07T17:23:40.943
> 
> 标签：ant, macrodef

如果我能做这样的事情那就太棒了：

```
<macrodef name="process-target">
    <attribute name="target" default="?enclosing.target.name?" />
    ...
</macrodef>

<target name="myTarget>
    <process-target/>
</target> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T20:25:27.480

需要使用脚本来访问目标名称如下：

```
<project name="demo" default="run1">

    <macrodef name="process-target">
        <sequential>
            <script language="javascript">
            project.setProperty("enclosing.target.name", self.getOwningTarget());
            </script>
            <echo message="${enclosing.target.name}"/>
        </sequential>
    </macrodef>

    <target name="run1">
        <process-target/>
    </target>

    <target name="run2">
        <process-target/>
    </target>

</project> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T23:16:59.550

我把它放在这里是因为我想在核心蚂蚁中有一个可选属性。

```
<macrodef name="process-target">
    <attribute name="target" default="_not_set_" />
    <sequential>
        <property name="_target_" value="@{target}" />
        <script language="javascript">
            if(project.getProperty("_target_") == "_not_set_") {
                project.setProperty("_target_", self.getOwningTarget());
            }
        </script>
        <echo message="${_target_}"/>
    </sequential>
</macrodef> 
```

# mysql - 从表中删除所有重复行的最有效方法？

> ID：15865390
> 
> 赞同：8
> 
> 时间：2013-04-07T17:23:57.777
> 
> 标签：mysql, duplicate-removal, delete-row

我有一张桌子：

```
| foo | bar |
+-----+-----+
| a   | abc |
| b   | def |
| c   | ghi |
| d   | jkl |
| a   | mno |
| e   | pqr |
| c   | stu |
| f   | vwx | 
```

我想按列删除**所有**包含重复项的行，`foo`以便表格如下所示：

```
| foo | bar |
+-----+-----+
| b   | def |
| d   | jkl |
| e   | pqr |
| f   | vwx | 
```

*最有效*的方法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-07T17:25:52.190

`foo`您可以使用仅返回唯一的子查询连接表`LEFT JOIN`。子查询中没有匹配的行将根据需要删除，例如

```
DELETE  a
FROM    TableName a
        LEFT JOIN
        (
            SELECT  foo
            FROM    TableName
            GROUP   BY Foo
            HAVING  COUNT(*) = 1
        ) b ON a.Foo = b.Foo
WHERE   b.Foo IS NULL 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/dff10/1)

为了获得更快的性能，请在 column 上添加索引`Foo`。

```
ALTER TABLE tableName ADD INDEX(foo) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-08T03:40:10.517

使用`EXISTS`：

```
DELETE a
  FROM TableName a
 WHERE EXISTS (SELECT NULL
                 FROM TableName b
                WHERE b.foo = a.foo
             GROUP BY b.foo
               HAVING COUNT(*) > 1) 
```

使用`IN`：

```
DELETE a
  FROM TableName a
 WHERE a.foo IN (SELECT b.foo
                   FROM TableName b
               GROUP BY b.foo
                 HAVING COUNT(*) > 1) 
```

# visual-studio-2010 - 按键然后在文本框中输入消息？

> ID：15865392
> 
> 赞同：0
> 
> 时间：2013-04-07T17:24:01.147
> 
> 标签：visual-studio-2010

我想知道 Visual Basic 是否可以模拟按键。我正在考虑一个这样做的程序：

当我按下一个按钮 (Button1) 时，它会启动一个计时器 (Timer1)，然后按下`V`键盘上的键，然后键入在文本框 (Textbox1) 中输入的内容，然后按下该`Enter`键。之后，一两秒后重复该动作，但说出（Textbox2）中的内容。

这可能吗？如果是，请回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T17:32:36.260

这将告诉您如何：

[http://msdn.microsoft.com/en-us/library/ms171548(v=vs.80).aspx?cs-save-lang=1&cs-lang=vb](http://msdn.microsoft.com/en-us/library/ms171548(v=vs.80).aspx?cs-save-lang=1&cs-lang=vb)

并使用：

[http://msdn.microsoft.com/en-us/library/system.windows.forms.sendkeys.send.aspx?cs-save-lang=1&cs-lang=vb](http://msdn.microsoft.com/en-us/library/system.windows.forms.sendkeys.send.aspx?cs-save-lang=1&cs-lang=vb)

对于特殊键。

# web - 使用 IPSec 阻止除 Web 浏览之外的所有流量

> ID：15865394
> 
> 赞同：-1
> 
> 时间：2013-04-07T17:24:12.747
> 
> 标签：web, tcp, udp, ipsec

我正在使用 IPsec 来阻止所有协议流量，并允许一些端口。我想在阻止所有其他流量的同时允许 Web 浏览。我尝试添加规则以允许通过 UDP 和 TCP 协议将 80 端口、53 端口作为源端口和目标端口，但仍然在浏览器中出现 DNS 错误。请问你能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T17:35:56.850

我不知道 IPsec，但通常你不能限制源端口。源端口是随机的，不太可能是 53 或 80。您应该只限制目标端口（80、53）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-06T09:39:55.043

IPSec 的工作方式是所有“阻止”规则优先于“允许”规则。如果我们忽略了您没有使用推荐的方法来做您想做的事情这一事实，那么您就没有正确配置 IPSec。

不幸的是，使用这种方法会很糟糕，因为您必须配置过滤器来阻止除 HTTP 之外的所有内容，并且无法指定“除某些内容之外的所有内容”。几周前我曾短暂地走这条路，犯了同样的错误，并中止了整个计划！

我知道这是一个老问题，但最好用你找到的解决方案来跟进它。

# powershell - WQL 使用 group by 在 WinRM 上查询 Win32_NtLogEvent

> ID：15865395
> 
> 赞同：0
> 
> 时间：2013-04-07T17:24:18.677
> 
> 标签：powershell, wmi-query, wql, winrm

我需要一个从 Win32_NTLogEvent 返回 SourceName、Logfile、EventIdentifier、Type、NumberOfEvents 的查询，其中 NumberOfEvents 是共享公共 SourceName、LogFile 和 EventIdentifier 的事件数（我不确定 Type）。我想使用 Get-CimInstance 在 PowerShell 脚本中使用查询。

可以在 PowerShell 中使用的相同问题的其他解决方案也非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T17:39:41.487

尝试以下操作：

```
$Logs = Get-WmiObject -class Win32_NTLogEvent -filter "(logfile='Application')"
Write-Host $logs 
```

当然，过滤器可以改变。如果您更喜欢结果的其他“格式”，您可以例如：

```
$Logs | Format-Table EventCode, EventType, Message -auto 
```

**更新：** 我刚刚再次阅读了您的问题 :) 要进行分组只需调用：

```
$logs | Group-Object Type,LogFile,EventCode 
```

# css - Google Chrome 与 GIMP 中的图像插值

> ID：15865396
> 
> 赞同：0
> 
> 时间：2013-04-07T17:24:21.403
> 
> 标签：css, image, google-chrome, image-resizing

我有一个大的 png 图像（950x500px），我已经使用 CSS 将其缩小到 500px 宽（和 263 高）。在将此网页上线之前，我决定使用 GIMP 缩放图像，因为使用 CSS 缩放图像是不好的做法。但是，当我在 Google Chrome 中使用 GIMP 而不是 CSS 缩放图像时，即使两个图像都是 png 并且具有相同的尺寸，图像质量也会显着降低。我尝试使用 GIMP 提供的所有四种压缩方法（`None`、和） `Linear`，但没有一种与 Google Chrome 提供的图像质量相匹配。`Cubic``Sinc (Lanczos3)`

谷歌浏览器使用什么压缩方法来提供如此高质量的图像缩放，我如何离线实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T17:34:04.040

您可能会在这里得到问题的答案：[Web 浏览器如何调整图像大小](http://entropymine.com/resamplescope/notes/browsers/)

Chrome 似乎使用了几种算法，具体取决于缩放因子：

> 通过非常轻微的缩小（557 到 555 像素），Chrome 使用与放大时相同的线性插值。（此图断开连接的事实是 ResampleScope 工作方式的产物，与 Chrome 无关。）
> 
> 但是看看如果我们再缩小一点，到 543 像素会发生什么：[…] 我们得到一个完全不同的结果：显然是一个 3 瓣 Lanczos 过滤器。Chrome 的策略可能是在将图像缩小 2.5% 以上时使用 Lanczos。

如果您必须自己做（以更好地控制结果），`Cubic`通常是扩大规模和`Sinc (Lanczos3)`缩小规模的最佳选择。
如果您自己缩放图像，您就会知道它在所有浏览器上的外观。

**注意：** *越来越多的计算机配备了高分辨率显示器（大约是经典显示器像素密度的 4 倍）。您可能想检查图像在这些计算机上的外观。它们很有可能被浏览器放大。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-01T09:19:00.813

这是一个非常古老的问题，但我昨天在 Gimp 中为图像调整大小而苦苦挣扎。当我将在 Gimp 中调整大小的图像与在 Chrome（和 Safari）中自动调整大小的图像进行比较时，存在明显的差异。

我正在将 PNG 徽标的大小从 89x127 调整为 69x101，无论我选择哪种插值，在 Gimp 中调整大小后文本都变得模糊。

感谢上面的评论说 ImageMagick 在调整图像大小时给出了更好的结果，我发现了这篇文章：[Efficient Image Resizing With ImageMagick](https://www.smashingmagazine.com/2015/06/efficient-image-resizing-with-imagemagick/)

文章中的命令尽管声称与 Photoshop 无法区分，但并未产生与 Chrome 匹配的结果，但是其中一位评论者添加了一个命令，该命令确实创建了产生最接近结果的图像（除非我的朋友在Photoshop）：

```
convert SOURCE_IMAGE -resize OUTPUT_WIDTH -quality 90 -unsharp 0x0.55+0.55+0.008 OUTPUT_IMAGE 
```

我认为诀窍主要在于锐化。我尝试了不同的设置，但无法完全匹配 Chrome，但这非常接近。

为了完整起见，这里是文章中的命令。请阅读文章以获取有关其工作原理的完整说明：

```
mogrify -path OUTPUT_PATH -filter Triangle -define filter:support=2 -thumbnail OUTPUT_WIDTH -unsharp 0.25x0.25+8+0.065 -dither None -posterize 136 -quality 82 -define jpeg:fancy-upsampling=off -define png:compression-filter=5 -define png:compression-level=9 -define png:compression-strategy=1 -define png:exclude-chunk=all -interlace none -colorspace sRGB -strip INPUT_PATH 
```

# py2neo - 在 py2neo 中水合大量实体的正确方法

> ID：15865397
> 
> 赞同：3
> 
> 时间：2013-04-07T17:24:28.620
> 
> 标签：py2neo

这更像是一个最佳实践问题。我正在为高度结构化的数据实现搜索后端，这些数据本质上由本体、术语和它们之间的一组复杂映射组成。Neo4j 看起来很自然，经过一些原型设计后，我决定使用 py2neo 作为与 neo4j 通信的一种方式，主要是因为对批处理操作的良好支持。这更像是一个最佳实践问题。

我感到沮丧的是，我无法在代码中引入我想在代码中引入的高级抽象类型——我被困在要么直接将对象用作迷你 ORM，但随后我正在进行大量的原子休息调用，这会降低性能（我有一个相当大的数据集）。

我一直在做的是获取我的查询结果，在它们上使用 get_properties 来批处理我的对象，这很好，这就是我首先走这条路的原因，但这让我传递了 (node, properties) 在我的代码中，它完成了工作，但并不漂亮。一点也不。

所以我想我要问的是是否有一个最佳实践可以在 py2neo 中使用相当丰富的对象图，稍后在保持性能的同时获得类似 ORM 的细节（在我的情况下，这意味着尽可能多地做批量查询）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-08T17:02:40.373

我不确定我是否明白你想要什么，但我有一个类似的问题。我想进行大量调用并创建大量节点、索引和关系……（大约 120 万）。下面是一个使用py2neo批量添加节点、关系、索引和标签的例子

```
from py2neo import neo4j, node, rel
gdb = neo4j.GraphDatabaseService("<url_of_db>")
batch = neo4j.WriteBatch(gdb)

a = batch.create(node(name='Alice'))
b = batch.create(node(name='Bob'))

batch.set_labels(a,"Female")
batch.set_labels(b,"Male")

batch.add_indexed_node("Name","first_name","alice",a) #this will create an index 'Name' if it does not exist
batch.add_indexed_node("Name","first_name","bob",b) 

batch.create(rel(a,"KNOWS",b)) #adding a relationship in batch

batch.submit() #this will now listen to the db and submit the batch records. Ideally around 2k-5k records should be sent 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-12T09:46:25.143

由于您要求最佳实践，这是我遇到的一个问题：

当使用 py2neo 批量添加大量节点（~1M）时，当 neo4j 服务器内存不足时，我的程序通常会变慢或崩溃。作为一种解决方法，我将提交拆分为多个批次：

```
from py2neo import neo4j

def chunker(seq, size):
    """
    Chunker gets a list and returns slices 
    of the input list with the given size.
    """
    for pos in xrange(0, len(seq), size):
        yield seq[pos:pos + size]

def submit(graph_db, list_of_elements, size):
    """
    Batch submit lots of nodes.
    """

    # chunk data
    for chunk in chunker(list_of_elements, size):

        batch = neo4j.WriteBatch(graph_db)

        for element in chunk:
            n = batch.create(element)
            batch.add_labels(n, 'Label')

        # submit batch for chunk
        batch.submit()
        batch.clear() 
```

我尝试了不同的块大小。对我来说，每批约 1000 个节点是最快的。但我想这取决于你的 neo4j 服务器的 RAM/CPU。

# c# - .NET 中的接口和通用表示法

> ID：15865399
> 
> 赞同：0
> 
> 时间：2013-04-07T17:24:42.860
> 
> 标签：c#, .net

我从 .net 开始，并阅读了一些关于泛型和接口的章节。我在代码中看到了这一点，但不确定我应该如何阅读它：

```
IEnumerable<IEnumerable<IndexSequenceModel>> model 
```

以上是方法的参数。有人可以向我解释这意味着什么吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T17:26:09.160

这是一个序列序列。因此，例如，如果您有一组客户并且每个客户都有许多订单，那么您可以获得`IEnumerable<IEnumerable<Order>>`- 每个客户的一个订单序列。

或者作为另一个示例，假设您有一个`Batch`方法 - 它可以采用“平面”序列并将其分解为固定大小的批次，其中每个批次是一个项目序列，返回值是一个批次序列。

# android - 防止软键盘将内容向上推送到屏幕之外

> ID：15865402
> 
> 赞同：1
> 
> 时间：2013-04-07T17:24:49.480
> 
> 标签：android, android-layout

我有这个布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/RelativeLayout1"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:focusable="true"
android:focusableInTouchMode="true"
android:orientation="vertical"
android:weightSum="10" >

<TextView
    android:id="@+id/textViewTitle"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginTop="10dp"
    android:gravity="center_horizontal"
    android:text="@string/fraga"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textSize="40sp" />

<ScrollView
    android:id="@+id/scrollView1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_above="@+id/layout_input"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/textViewTitle"
    android:layout_margin="10dp"
    android:background="#DDD"
    android:isScrollContainer="false"
    android:padding="10dp" >

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/textViewQuestion"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:textAppearance="?android:attr/textAppearanceLarge" />

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_weight="18"
            android:adjustViewBounds="true"
            android:scaleType="fitCenter" android:contentDescription="@string/image"/>
    </LinearLayout>
</ScrollView>

<Button
    android:id="@+id/buttonPrev"
    style="@style/white_button"
    android:layout_width="80dp"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_marginBottom="10dp"
    android:layout_marginLeft="10dp"
    android:layout_marginRight="10dp"
    android:text="@string/tillbaka" />

<Button
    android:id="@+id/buttonNext"
    style="@style/white_button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentRight="true"
    android:layout_marginBottom="10dp"
    android:layout_marginRight="10dp"
    android:layout_toRightOf="@+id/buttonPrev"
    android:text="@string/nasta" />

<LinearLayout
    android:id="@id/layout_input"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_above="@id/buttonPrev"
    android:orientation="vertical" >

    <EditText
        android:id="@+id/editText1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="10dp"
        android:digits="0123456789(),.*-+/=:"
        android:ems="10"
        android:focusable="true"
        android:focusableInTouchMode="true"
        android:hint="@string/svar"
        android:inputType="number|numberSigned|numberDecimal"
        android:singleLine="true"
        android:textSize="28sp"
         >

        <requestFocus />
    </EditText>

    <Spinner
        android:id="@+id/spinner"
        style="@android:style/Widget.Spinner"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="10dp"
        android:visibility="gone" />
</LinearLayout>

</RelativeLayout> 
```

当我单击编辑文本时，软键盘弹出并按预期将编辑文本推到键盘上方。唯一的问题是它还将edittext上方的内容向上推。有什么办法可以防止这种情况发生吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T17:36:47.707

`manifest.xml`在你的, 标签内使用这段`activity`代码。

```
android:windowSoftInputMode="adjustPan" 
```

像这样：

```
<activity
   android:label="activity_name"
   android:name=".MainActivity" android:windowSoftInputMode="adjustPan">
</activity> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T17:30:43.833

有关的解释，请参见[此处](http://android-developers.blogspot.com/2009/04/updating-applications-for-on-screen.html)`android:imeOptions`。

# c - Kernighan 和 Ritchie 练习 2-2 调试？

> ID：15865404
> 
> 赞同：0
> 
> 时间：2013-04-07T17:24:53.477
> 
> 标签：c

我正在通过 K&R（第 2 版）进行自己的启发，并遇到了以下练习（练习 2-2 p42）：

```
Write a loop equivalent to the following without using && or ||:

   for (i=0; i<lim-1 && (c=getchar()) != '\n' && c != EOF; ++i)
           s[i] = c; 
```

这是我的解决方案：

```
#include <stdio.h>

/* write a loop equivalent to the following without using && or ||

   for (i=0; i<lim-1 && (c=getchar()) != '\n' && c != EOF; ++i)
           s[i] = c;
*/

int main()
{
    int counter = 0, lim = 1000;
    int s[lim], c;

    while(counter < lim-1)
    {
        while((c = getchar()) != '\n')
        {
            while(c != EOF)
            {
                s[counter] = c;
            }
        }
        counter++;
    }   
    return 0;
} 
```

我期待缩进循环，因此整个程序在遇到换行符 ( `'\n'`) 或 EOF 字符（`Ctrl-d`在我的 Linux 机器上）时会正常退出，但令我惊讶的是，它很高兴地坚持下去。我尝试使用 gdb 对其进行调试，但仍然无法弄清楚。

我没看到什么？

附录：我试图颠倒 while 循环执行的测试序列，并添加了一个 if 语句来打破外部循环 if`c == '\n'`但仍然没有看到它！`c`即使我尝试将 gdb 链接到可执行文件的运行副本的 pid，我也难以尝试运行 GDB，在命令行中输入文本并同时打印 的值。我意识到可能有其他方法可以解决这个练习，例如设置一个`OK_TO_EXECUTE`标志或变量，只有在所有三个条件都满足时才为真，但我对我似乎无法在看似简单的程序中找到错误的事实感到困扰. 这就是为什么我要回到K&R更彻底地阅读这本书并正确解决练习的原因。

重做代码（仍然错误！！！）：

```
#include <stdio.h>

/* write a loop equivalent to the following without using && or ||

   for (i=0; i<lim-1 && (c=getchar()) != '\n' && c != EOF; ++i)
           s[i] = c;
*/

int main()
{
    int counter = 0, lim = 1000;
    int s[lim], c;

    while((c = getchar()) != EOF)
    { 
        if ( c == '\n')
            break;

        while(c != '\n')
        {
            while(counter < lim-1)
            {
                s[counter] = c;
                counter++;
            }
        }
    }   
    return 0;
} 
```

解决了！- 我认为！我想我终于想通了。在我的重做解决方案中编写的内部循环仍将无限循环或至少循环直到`lim`达到。我添加了中断语句，并认为我正在寻求解决方案。

不过，我仍在努力解决如何在这个问题上运行 gdb；输入命令行条目`print`和`c`. 将 gdb 链接到可执行文件的 pid 仍然没有按预期工作。我什至发布了一个关于 gdb的[单独问题。](https://stackoverflow.com/questions/15865614/how-do-i-run-gdb-enter-text-into-the-command-line-and-see-how-the-executable-tr)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T17:27:53.420

> 但令我惊讶的是，它高兴地士兵

您有三个嵌套循环。换行符将终止其中一个内部循环，而最外面的循环将愉快地继续（直到您到达`Enter` `lim`时间）。

我可以给你一个提示：你可能不应该为此使用嵌套循环。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T19:03:27.273

您添加了原始文件中不存在的循环......这在概念上和逻辑上都是错误的。最明显的解决方案使用`break`：

```
for (i = 0; i < lim-1; ++i)
{
    c = getchar();
    if (c == '\n')
        break;
    if (c == EOF)
        break;

    s[i] = c;
} 
```

或者，如果您假装 C 没有`break`，您可以执行以下操作（这不完全等效，因为如果遇到or`i`则不具有相同的值）：`'\n'``EOF`

```
for (i = 0; i < lim-1;)
{
    c = getchar();
    if (c == '\n')
        i = lim-1;
    else if (c == EOF)
        i = lim-1;
    else
        s[i++] = c;
} 
```

或者您可以使用 Pascal 方法：

```
#include <stdbool.h>
...
i = 0;
bool more = i < lim-1;

while (more)
{
    c = getchar();
    if (c == '\n')
        more = false;
    else if (c == EOF)
        more = false;
    else
    {
        s[i++] = c;
        more = i < lim-1;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-14T11:51:06.143

和`goto`

```
i=0;
loop:
if( i >= lim - 1) goto end;
c = getchar();
if(c == '\n') goto end;
if(c == EOF) goto end;
s[i++] = c;
goto loop;
end: 
```

没有`break`，`goto`只有一个`for`，仍然没有`&&`和`||`。

```
for (i=0; i < lim - 1 ? ((c=getchar()) == '\n' | c == EOF) == 0 : 0; ++i)
  s[i] = c; 
```

**更新**

正如@Jim 所指出的，最好使用 internal 明确设置执行顺序`?:`

```
for (i=0; i >= lim - 1 ? 0 : (c=getchar()) == '\n' ? 0 : c != EOF; ++i)
  s[i] = c; 
```

# web-services - 移动应用程序通常如何与服务器交换少量信息？

> ID：15865406
> 
> 赞同：0
> 
> 时间：2013-04-07T17:24:58.873
> 
> 标签：web-services, mobile, blackberry, heroku, blackberry-10

由于几乎没有设计移动或基于 Web 的系统的经验，我真的不知道通常使用哪种方法从手机上的应用程序与服务器上的 Web 服务交换信息。在我的场景中，应用程序在 Blackberry 10 上，我认为 Web 服务将在 Heroku 上运行。

我想定期在客户端应用程序和服务器的 Web 服务之间交换少量信息。我曾尝试寻找如何做到这一点，但我没有成功找到任何有用的东西。任何关于我可以或应该如何做到这一点的信息将不胜感激。

澄清一点：我特别感兴趣的是通常如何存储少量数据以进行传输，然后通常使用什么机制来实际发送和接收信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T17:42:55.220

通常，这是通过移动设备 SDK 的 HTTP 调用来处理的。我不知道黑莓上的对象是什么，但典型的工作流程如下所示：

*   编写一个做某事（例如计算、检索数据、存储数据）的网络服务。
*   将 Web 服务发布到 Web 服务器。此 Web 服务有一个 URL。如果您遵循 RESTful 方法来获取 Web 服务，则可以通过 Web 获得资源的唯一 URL。Web 服务执行的每个功能都使用一种常见的 HTTP 动词，例如 GET 和 POST。您使用“GET”通过 URL 从 Web 检索数据。当您还想将数据发送到网络时，您可以使用“POST”。
*   从客户端 SDK（例如 iOS、Android、Windows Mobile、Blackberry），通过作为 SDK 组件的标准对象构建 HTTP 请求。有时有一些开源库提供包装类，使这个过程更容易。此 HTTP 请求应仅使用 URL（如果您想发出 GET 请求），或者您应该通过请求的“正文”使用您要发送到服务器的数据构建请求，在POST 请求的事件。
*   这两种类型的请求通常都会从服务器产生响应，然后您使用通常是 SDK 组件的对象和事件来处理和解析该响应。
*   然后，您可以在客户端上下文中对已解析的响应做任何您想做的事情。

尽管此模式的实现细节可能会有所不同，但该模式在所有主要平台上都非常一致；这真的是唯一的方法。

# java - 我应该在运行多个正则表达式之前拆分一个大文件吗？

> ID：15865407
> 
> 赞同：1
> 
> 时间：2013-04-07T17:25:03.967
> 
> 标签：java, regex

我有一个大约 35KB 的文本输入，我需要从中提取一堆小数据。我使用多个正则表达式来查找数据，这部分工作正常。

我的问题：我应该将大文本拆分为多个较小的字符串并在每个字符串上运行适当的正则表达式，还是将其保留在一个大字符串中并为每个正则表达式重置匹配器？哪种方式最有效率？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T01:32:25.180

如果它运行得不是太慢，那么请使用您当前拥有的运行速度足够快的任何东西。

否则，无论如何，您都不应该为此任务使用原始正则表达式。一旦您提到从中提取“少量数据”的“多个正则表达式”，您就是在谈论编写解析器并且应该使用体面的解析工具。

当您使用 java 时，我建议您从[jFlex](http://jflex.de/)开始，它是一个非常成熟且稳定的 C 工具的成熟 java 实现。

对于大多数任务，jFlex 将是您所需要的，但如果问题被证明更复杂，它还可以与许多 java 解析器生成器顺利集成。我个人的偏好是略显晦涩的[Beaver](http://beaver.sourceforge.net/)。

当然，如果您可以将它实现为一组正则表达式，它不会更复杂，jFlex 将为您完成这项工作。

# wordpress - mediaelement.js Wordpress 播放/暂停按钮未显示

> ID：15865409
> 
> 赞同：2
> 
> 时间：2013-04-07T17:25:13.000
> 
> 标签：wordpress, mediaelement.js

[http://mylifeisamess.com/audio-test/](http://mylifeisamess.com/audio-test/)

我正在使用音频播放器，播放/暂停按钮未出现在我的任何浏览器中。知道为什么吗？

Wordpress 3.5.1 Genesis 1.9.1 Studiopress 主题：Lifestyle Mac OSx 10.7.5 Firefox 19.0.2 Safari 6.0.x Google Chrome 26.0.1410.43

我能做些什么来解决它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-05T17:15:03.707

您可能需要将 mime 类型与 svg 文件的扩展名相关联。

将这些行添加到您的 .htaccess 文件中，浏览器应该开始正确显示图像：

```
AddType image/svg+xml svg svgz
AddEncoding gzip svgz 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-24T13:47:50.653

我在 wordpress 4.7.1 版和 Internet Explorer 11 上遇到了同样的问题。服务器/文件服务不是问题，它不是 apache 服务器。不知道问题是什么，但是放置 z-index 为我解决了这个问题：

在我写的主题 css 中

```
.mejs-controls .mejs-button button {
    z-index: 10;
} 
```

使用的主题是由我编写的，我没有改变原来的 wordpress mediaelement 播放器的任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-27T00:19:59.833

只是想为后代添加到这个线程中。这个插件被引入了 WordPress 核心，但这并没有解决一些无法识别 svg 文件类型的服务器/主机的问题/冲突。在我写这个 wp 3.7.1 时，这个插件在 2.10.3 上（虽然这个编号约定也改变了一段时间，例如我刚刚从 2.9.1 升级了插件 - > 2.10.3 不直观。）

只需添加代码

```
AddType image/svg+xml svg svgz
AddEncoding gzip svgz 
```

到 htaccess 文件不起作用，但是在将插件添加到 htacess 文件并清除缓存后再次重新安装（实际上是 4 次）插件确实得到了它。

这是一个非常烦人的问题，直到您可以将导致播放暂停按钮隐藏的原因归零。

# css - 使用 CSS3 创建属性

> ID：15865410
> 
> 赞同：1
> 
> 时间：2013-04-07T17:25:15.780
> 
> 标签：css

对于“新”类的每个元素，我想在悬停时显示一个标题。所以使用 jquery 我这样做：

```
$(".new").attr("title", "import the new item"); 
```

是否可以通过 CSS 创建此属性？既然我们可以创建内容，我想也许这也是可能的。所以我正在寻找类似的东西

```
.new
{
    attr(title): "import new item"; // create property via css
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T17:27:48.383

有一个启用这种功能的提议，称为[Cascasing Attribute Sheets](http://www.webmonkey.com/2012/09/like-css-wrap-your-head-around-cascading-attribute-sheets/)。

# asp.net - 尝试在 ASP 中更新参数

> ID：15865411
> 
> 赞同：0
> 
> 时间：2013-04-07T17:25:25.263
> 
> 标签：asp.net, parameters, html-select

我收到此错误：'DropDownList2' 有一个无效的 SelectedValue，因为它不存在于项目列表中。参数名称：值

这是什么意思？我已将 DropDownList2 绑定到正确的值，但我不断收到此错误。

```
 <asp:TemplateField HeaderText="Doctor" SortExpression="Doctor">
                            <EditItemTemplate>
                                <asp:DropDownList ID="DropDownList2" runat="server" DataSourceID="sdDoctorList" DataTextField="Doctor" DataValueField="ID" SelectedValue='<%# Bind("Doctor") %>'>
                                </asp:DropDownList>
                            </EditItemTemplate>
                            <ItemTemplate>
                                <asp:Label ID="Label6" runat="server" Text='<%# Bind("Doctor") %>'></asp:Label>
                            </ItemTemplate>
                        </asp:TemplateField>

 <UpdateParameters>
            <asp:Parameter Name="ID" Type="Int32" />
            <asp:Parameter Name="OHIP" Type="String" />
            <asp:Parameter Name="FirstName" Type="String" />
            <asp:Parameter Name="LastName" Type="String" />
            <asp:Parameter DbType="Date" Name="DOB" />
            <asp:Parameter Name="VisitsPerYear" Type="Int32" />
            <asp:Parameter Name="DoctorID" Type="Int32" />
            <asp:Parameter Name="Timestamp" Type="Byte"></asp:Parameter>
        </UpdateParameters> 
```

有什么建议么？

# c++ - untitled2main.cpp：没有这样的文件或目录

> ID：15865413
> 
> 赞同：0
> 
> 时间：2013-04-07T17:25:33.747
> 
> 标签：c++, windows, qt5

我已经`QT5.0.1 with mingw32`在 windows 上安装了。当我创建一个项目并运行它时，一切都很完美。下次当我打开`QT Qreator`并想运行我的程序时，它会出现以下错误：

```
:-1: error: error: ..untitled2main.cpp: No such file or directory 
```

从构建菜单中我点击了`qmake` 它，它没有错误。这是 .pro 文件

```
QT       += core gui

greaterThan(QT_MAJOR_VERSION, 4): QT += widgets

TARGET = untitled1
TEMPLATE = app

SOURCES += main.cpp\
        mainwindow.cpp \
    contentcontrol.cpp

HEADERS  += mainwindow.h \
    contentcontrol.h

FORMS    += mainwindow.ui \
    contentcontrol.ui 
```

这是编译输出：

```
22:17:17: Running steps for project untitled1...
22:17:17: Configuration unchanged, skipping qmake step.
22:17:17: Starting: "C:\Qt\Qt5.0.1\Tools\MinGW\bin\mingw32-make.exe" 
C:/Qt/Qt5.0.1/Tools/MinGW/bin/mingw32-make -f Makefile.Debug
mingw32-make[1]: Entering directory 'C:/Users/(Mahdi)/Documents/QT/untitled1-build-Desktop_Qt_5_0_1_MinGW_32bit-Debug'
g++ -c -pipe -fno-keep-inline-dllexport -g -frtti -Wall -Wextra -fexceptions -mthreads -DUNICODE -DQT_QML_DEBUG -DQT_DECLARATIVE_DEBUG -DQT_WIDGETS_LIB -DQT_GUI_LIB -DQT_CORE_LIB -DQT_OPENGL_ES_2 -DQT_OPENGL_ES_2_ANGLE -DQT_NEEDS_QMAIN -I..\untitled1 -I"..\..\..\..\..\Qt\Qt5.0.1\5.0.1\mingw47_32\include" -I"..\..\..\..\..\Qt\Qt5.0.1\5.0.1\mingw47_32\include\QtWidgets" -I"..\..\..\..\..\Qt\Qt5.0.1\5.0.1\mingw47_32\include\QtGui" -I"..\..\..\..\..\Qt\Qt5.0.1\5.0.1\mingw47_32\include\QtCore" -I"debug" -I"." -I"." -I"..\..\..\..\..\Qt\Qt5.0.1\5.0.1\mingw47_32\mkspecs\win32-g++" -o debug\main.o ..\untitled1\main.cpp
g++.exe: error: ..untitled1main.cpp: No such file or directory
g++.exe: fatal error: no input files
compilation terminated.
Makefile.Debug:477: recipe for target 'debug/main.o' failed
mingw32-make[1]: *** [debug/main.o] Error 1
mingw32-make[1]: Leaving directory 'C:/Users/(Mahdi)/Documents/QT/untitled1-build-Desktop_Qt_5_0_1_MinGW_32bit-Debug'
makefile:34: recipe for target 'debug' failed
mingw32-make: *** [debug] Error 2
22:17:18: The process "C:\Qt\Qt5.0.1\Tools\MinGW\bin\mingw32-make.exe" exited with code 2.
Error while building/deploying project untitled1 (kit: Desktop Qt 5.0.1 MinGW 32bit)
When executing step 'Make' 
```

什么是问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T20:03:48.730

对于未来的观点：我通过向环境变量添加值来解决这个问题

```
path:
C:\Qt\Qt5.0.1\5.0.1\mingw47_32\bin;C:\Qt\Qt5.0.1\Tools\MinGW\bin
QTDIR:
C:\Qt\Qt5.0.1\5.0.1\mingw47_32 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-05T13:06:02.127

我也有同样的问题。**通过在Projects/Buils Environment/Clear system environment**中设置为 true 复选框来修复它。可能对未来的观点有用。

# jquery - jQuery 照片滑块中 setInterval() 的替代方法

> ID：15865426
> 
> 赞同：1
> 
> 时间：2013-04-07T17:26:45.770
> 
> 标签：jquery, setinterval

我正在从头开始在 JQuery 中创建一个照片滑块，并且我正在使用 setInterval() 以使图像每 3 秒运行一次。但是，我正在使用播放/停止按钮，但它没有按我的意愿响应，因为它必须等待间隔完成才能检测到按钮。我可以使用其他选项以便播放/停止按钮立即响应吗？谢谢！

```
var test = parseInt($interval.val(),10)+1000;
var test2 = test; 
function runInterval() {
    $(".slider #" + count_image).show("slide", {
        direction: "right"
    }, 500);
    test2 = test;
    if ($("#parrafo").text() == "Play") {
        $(".slider #" + count_image).delay($interval.val()).hide("slide", {
            direction: "left"
        }, 500);
        if (count_image == max_images) count_image = 1;
        else count_image = count_image + 1;
    }
    $interval = $("select#mySelect option:selected");
    test = parseInt($interval.val(), 10) + 1000;
    clearInterval(s);
    s = setInterval(runInterval, test2);
}
s = setInterval(runInterval, test2); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T22:22:32.937

[这是一个演示](http://jsfiddle.net/yMXep/8/)。我*认为*它像你想要的那样工作。我使用的是`div`s 而不是`img`s，这应该没什么区别。

HTML：

```
<div class="slider">
    <div id="0" class="img">0</div>
    <div id="1" class="img hidden">1</div>
    <div id="2" class="img hidden">2</div>
    <div id="3" class="img hidden">3</div>
    <div id="4" class="img hidden">4</div>
</div>
<select id="mySelect">
    <option>200</option>
    <option>1000</option>
    <option>2000</option>
    <option>3000</option>
</select>
<button id="parrafo">Start/Stop</button>
<span id="status"></span> 
```

CSS：

```
.hidden {
    display: none;
}
.slider, .img {
    width: 32px;
    height: 32px;
}
.img {
    background: blue;
    color: white;
    text-align: center;
    font-size: 24px;
} 
```

JS：

```
var slideshowActive = false;
var slideshowTimeoutDuration = 5000;
var slideshowTimeout = -1;
var currentImg = 0;
var numImgs = 5;
var slideDuration = 500;

function showImg(img) {
    $(".slider #" + img).show("slide", {
        direction: "right"
    }, slideDuration);
}

function hideImg(img) {
    $(".slider #" + img).hide("slide", {
        direction: "left"
    }, slideDuration);
}

function swapImgs(currentImg) {
    hideImg(currentImg);

    var nextImg = currentImg + 1;
    if (nextImg >= numImgs) {
        nextImg = 0;
    }

    // Show the next image after the currentImg has been hidden (after slideDuration).
    setTimeout(function () {
        showImg(nextImg);
    }, slideDuration);

    return nextImg;
}

function onSlideshowTimeout() {
    console.log("onSlideshowTimeout", new Date());

    if (!slideshowActive) {
        $("#status").html("Slideshow aborted");
        return;
    }

    currentImg = swapImgs(currentImg);

    if (slideshowActive) {
        // Continue the slideshow if active, by setting a new timeout.
        slideshowTimeout = setTimeout(onSlideshowTimeout, slideshowTimeoutDuration);
    }
}

$("#parrafo").click(function () {
    // Toggle the slideshow active.
    slideshowActive = !slideshowActive;

    // If the slideshow is now active, start it.
    if (slideshowActive) {
        // Only calculate the duration when the Start button is clicked.
        var $interval = $("select#mySelect option:selected");
        slideshowTimeoutDuration = parseInt($interval.val(), 10) + 1000;
        // Start the slideshow.
        $("#status").html("Slideshow started with duration=" + slideshowTimeoutDuration + "ms");
        slideshowTimeout = setTimeout(onSlideshowTimeout, slideshowTimeoutDuration);
    } else {
        $("#status").html("Slideshow stopped");
    }
}); 
```

截屏：

![在此处输入图像描述](https://i.stack.imgur.com/grmiI.png)

# node.js - 在节点 js 中发送电子邮件

> ID：15865428
> 
> 赞同：1
> 
> 时间：2013-04-07T17:26:47.457
> 
> 标签：node.js

在 vimeo 上观看了关于 kue 工作原理的视频[http://vimeo.com/26963384后，我不得不询问代码是如何工作的，而无需安装任何软件包来帮助发送像节点邮件这样的电子邮件。](http://vimeo.com/26963384)

最新版本的 node js 是否带有发送电子邮件的功能？

使用的代码看起来像

```
jobs.create('email', {
    title: 'welcome email for tj'
  , to: 'tj@learnboost.com'
  , template: 'welcome-email'
}).save(); 
```

在演示文稿中，没有添加发送电子邮件的包。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-09T07:56:12.680

```
var nodemailer = require('nodemailer');

// create SMTP transport
var transporter = nodemailer.createTransport({
    service: 'Gmail',
    auth: {
        user: 'xxx@gmail.com',
        pass: '******'
    }
});

// transporter object for all e-mails

var mail = {
    from: 'XXX XXXX <XXX@gmail.com>', // sender address
    to: 'XXX@hotmail.com, XXX@gmail.com', // list of receivers
    subject: 'Hello ', // Subject line
    text: 'Hello world ', // plaintext body
    html: '<b>Hello world </b>' // html body
};

// send mail with defined transport object
transporter.sendMail(mail, function (error, info) {
    if (error) {
        return console.log('Error : ' + error);
    }
    console.log('Mail sent: ' + info.response);

}); 
```

# events - CDI 事件发起者的事务等待 Observer(AFTER_SUCCESS) 事务？

> ID：15865430
> 
> 赞同：1
> 
> 时间：2013-04-07T17:26:51.210
> 
> 标签：events, jakarta-ee, transactions, ejb, cdi

我有以下情况：（伪代码）

```
 CallerObject.method() {
      SessionBean1.method1(); // through remote bean interface
      // [1]
    }

    @TransactionAttribute(REQUIRED)
    SessionBean1.method1() {
      // do something...
      Event<myClass>.fire();
      // do something...
    }

    ObserverObject.method2(@Observes(during=AFTER_SUCCESS) myClass) {
      sessionBean2.method2(); // through local bean interface
    }

    @Asynchronous
    @TransactionAttribute(REQUIRED)
    SessionBean2.method2() {
      // do something...
    } 
```

==> 会发生以下情况：

[1] 只有在 SessionBean2.method2() 中的事务完成后才能达到！（尽管 SessionBean1.method1() 中的最后一条语句是在此之前到达的。）

就好像 SessionBean1.method1() 的事务以某种方式没有“释放”（因为需要一个更好的词 - 它确实在事件处理程序 ObserverObject.method2() 被调用之前立即提交！）直到*异步调用*Session2.method2() 的事务也完成了。

有谁知道我怎么能避免这种情况？

（整个设置的重点是`SessionBean2.method2()`在 T1 完成后在后台进行长时间运行并`SessionBean1.method1()`尽快返回。）

PS：我已经验证过了

a) T1 立即提交（记录进入数据库）

b) SessionBean2.method2() 被异步调用（控制立即跳转到调用代码中的下一条语句）

c) SessionBean1.method1() 在 T2 完成之前不会将控制权返回给调用者代码

# maven - mvn -e 完整的堆栈跟踪？

> ID：15865435
> 
> 赞同：11
> 
> 时间：2013-04-07T17:27:34.080
> 
> 标签：maven

我对 maven 有点陌生，我假设这是 maven 的事情，与我的 shell 无关，但是当我使用 -e 开关运行以尝试识别错误时，我得到一些不完整的东西，如下所示：

```
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] Deployment failed and was rolled back.
[INFO] ------------------------------------------------------------------------
[INFO] Trace
org.apache.maven.lifecycle.LifecycleExecutionException: Deployment failed and was rolled back.
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:719)
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeStandaloneGoal(DefaultLifecycleExecutor.java:569)
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:539)
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:387)
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:348)
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:180)
at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:328)
at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:138)
at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)
at org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:60)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)
at org.codehaus.classworlds.Launcher.main(Launcher.java:375)
Caused by: org.jboss.as.plugin.common.DeploymentExecutionException: Deployment failed and was rolled back.
at org.jboss.as.plugin.deployment.standalone.StandaloneDeployment.execute(StandaloneDeployment.java:140)
at org.jboss.as.plugin.deployment.AbstractDeployment.executeDeployment(AbstractDeployment.java:119)
at org.jboss.as.plugin.deployment.AbstractDeployment.doExecute(AbstractDeployment.java:141)
at org.jboss.as.plugin.deployment.AbstractAppDeployment.doExecute(AbstractAppDeployment.java:70)
at org.jboss.as.plugin.deployment.AbstractDeployment.execute(AbstractDeployment.java:111)
at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:490)
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:694)
... 17 more
[INFO] ------------------------------------------------------------------------ 
```

我怎样才能看到“... 17 more”的东西？我相信它会帮助我准确找出哪个 maven 任务失败了？感谢您提供任何帮助或文档链接！

PS如果你很好奇并且有帮助我找出实际问题的冲动，我只是运行“mvn clean package jboss-as：deploy”来部署，如果我可以在另一个特定于问题的问题中提供更多信息自己想不通。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T17:47:32.370

这不是严格的答案，但它可能有助于您的调查。

StandaloneDeployment的源代码[（第 140 行）](https://github.com/jbossas/jboss-as-maven-plugin/blob/master/src/main/java/org/jboss/as/plugin/deployment/standalone/StandaloneDeployment.java#L140)（警告，这可能不是您使用的版本）显示了[`DeploymentExecutionException`](https://github.com/jbossas/jboss-as-maven-plugin/blob/master/src/main/java/org/jboss/as/plugin/common/DeploymentExecutionException.java)抛出的位置：

```
case ROLLED_BACK:
    throw new DeploymentExecutionException("Deployment failed and was rolled back.", actionResult.getDeploymentException()); 
```

并将根异常 ( `actionResult.getDeploymentException()`) 传递给 this `DeploymentExecutionException`。

我原以为您会在 Maven 堆栈跟踪中看到此根异常，但您的情况似乎并非如此。

您总是可以尝试[调试插件本身](http://netsuke.wordpress.com/2008/03/09/see-how-maven-works-inside-remote-debugging-plugins/)，并在上面显示的行上放置一个断点。

# paypal - 在他/她捐赠后检索捐赠者信息

> ID：15865439
> 
> 赞同：0
> 
> 时间：2013-04-07T17:27:48.147
> 
> 标签：paypal

有人点击我网站上的捐赠按钮后，我的网站有什么方法可以检索信息，例如：

1.  捐赠成功
2.  捐款金额
3.  捐赠完成时间

然后，信息将自动存储在我的站点数据库之一中

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T18:11:30.213

您可以`notify_url`使用您网站上脚本的 URL 将变量添加到您的捐赠按钮（或链接）。该脚本接收包含所有付款数据的 POST。

例子：

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
<input type="hidden" name="cmd" value="_donations"/>
....
<input type="hidden" name="notify_url" value="https://www.example.com/paypal.php"/>
....
<input type="hidden" name="amount" value="9"/>
<input type="image" src="..." border="0" name="submit"/>
</form> 
```

POST 包括您可能感兴趣的其他字段：

```
payment_status = Completed  
payment_gross = 9.00  
payment_fee = 0.65  
residence_country = NL  
payer_email = donor@example.com  
first_name = Jon  
last_name = de Miranda 
```

另请参阅[Paypal 的问题 Notify url](https://stackoverflow.com/q/2865970/850848)。

# java - 在多个 JFrame 和类中传递变量

> ID：15865444
> 
> 赞同：0
> 
> 时间：2013-04-07T17:28:08.167
> 
> 标签：java, swing, jframe

对不起，伙计们，但是在编写代码几个小时后我感到困惑。

**情况：**

我有两个 JFrame。这些是不同的 Java 类 - 其中一个是 FirstGUI，我们可以从中调用另一个名为 SecondGUI 的 JFrame。好的——这很清楚。我还有一个名为 Processor 的类，其中我有特定的方法，如“connectToPort”或“disconnectFromPort”。

此外，在 FirstGUI（具有 main 方法）中，我正在创建 SecondGUI 对象（并将 setVisible 设置为 false）和 Processor 对象，其中 FirstGUI 和 SecondGUI 作为参数。

**问题：**

我想从 FirstGUI 中调出 SecondGUI（通过 setVisible 为 true）——好的，完成。但是如何从 SecondGUI JFrame 中调出开头创建的 Processor 对象呢？调用 SAME 对象很重要，因为处理器方法可以例如在 FirstGUI JFrame.JTextPane 组件中设置文本，并将项目添加到 SecondGUI 的 JComboBox。

我不知道如何解决这个问题，我总是得到 NullPointerException。

编辑：我想补充一点，在创建 SecondGUI 时我不能将处理器对象作为参数传递，因为第二个 GUI 是较早创建的，并且它是创建处理器时的参数......这就是问题所在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T17:32:48.020

构造第二个GUI（子）时，初始化类（FirstGUI）可以传入`self`构造函数，同时保留对构造对象的引用。现在两个 GUI 都相互引用：

```
class F1 extends JFrame {
   F2 child;

   void createF2() {
     child = new F2(this);
     child.setVisible(true);
   }
}

class F2 extends JFrame {
   final F1 parent;    
   F2(F1 parent) { this.parent = parent; };
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T17:31:21.193

如果您在此站点上搜索过您的问题或类似问题，您就会知道最常见的建议是不要使用多个 JFrame，因为这暗示了一个糟糕的设计。最好使用 CardLayout 交换视图或使用适当模式的 JDialogs。

至于您的问题，让一个类动态地将信息传递给另一个类，根据程序结构有两个主要选项。

*   如果一个类在模态 JDialog 中，则在第二个窗口不再可见后，第一个类可以通过调用适当的 getter 方法从第二个模态类中提取信息。
*   如果一个类以非模态方式显示，那么您将需要使用某种类型的侦听器，例如 PropertyChangeListener，以便在发生状态更改时让被观察类通知侦听类。

**编辑**
关于：

> 我想从 FirstGUI 中调出 SecondGUI（通过 setVisible 为 true）——好的，完成。但是如何从 SecondGUI JFrame 中调出开头创建的 Processor 对象呢？调用 SAME 对象很重要，因为处理器方法可以例如在 FirstGUI JFrame.JTextPane 组件中设置文本，并将项目添加到 SecondGUI 的 JComboBox。

Audrius 给了你一个答案。1+ 对他的回答投了赞成票。

> 我不知道如何解决这个问题，我总是得到 NullPointerException。

如果你得到一个 NPE，应该仔细检查抛出 NPE 的行以查看哪个变量为空，然后在你的代码中回溯以查看原因。如果您仍然停留在 NPE 上并需要我们的帮助，那么您将希望显示相关代码并向我们提供有关该问题的更多详细信息，包括注意哪个变量为空以及为什么您认为它不应该为空。

> 编辑：我想补充一点，在创建 SecondGUI 时我不能将处理器对象作为参数传递，因为第二个 GUI 是较早创建的，并且它是创建处理器时的参数......这就是问题所在。

这是一个非问题。由于依赖窗口是动态显示的，因此您始终可以在使用 setter 方法显示它之前传递一个引用。

# php - 在php中处理并发请求

> ID：15865445
> 
> 赞同：0
> 
> 时间：2013-04-07T17:28:14.397
> 
> 标签：php, apache

当有 2 个用户 A 和 B 并且他们同时向对方发送好友请求以添加为好友时，我遇到了这种情况。支持这种关系的数据模型具有invitation_id 和friend_id 列以及一个状态。

由于他们两个一起向对方发送请求，我在决定谁应该作为请求的发起者存储时面临问题，因为数据可能会在数据库中变脏，因为它们都是相同关系的发起者，因为它们是绝对并发的。

在其他语言中，有锁的构造可以通过让一个等待而另一个被服务来处理这个问题。我不知道如何在 PHP 和 Apache 中实现这一点。请对此提出建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T17:31:06.367

你应该这样做：

A -
如果 B 正在尝试将 A 添加为朋友（而 A 已被邀请 B）则发送邀请 然后 B 自动接受 A 的邀请

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T17:30:48.637

从技术上讲，您不会“同时”收到这些请求，这意味着如果您以合理的分辨率（如秒或什至毫秒）检查请求的时间戳，您将能够简单地分辨出哪个是第一个这样做的。

# python - 在 Python 中将项目添加到字典中

> ID：15865454
> 
> 赞同：0
> 
> 时间：2013-04-07T17:29:18.067
> 
> 标签：python

我有一个字典，将值存储为每个键的列表。例如：

```
dict1={}
dict1["A"]=[] 
```

我现在想将数字附加到此列表中，但我该如何正确执行此操作？我试过`dict1["A"]=dict1["A"].append(1)`

这只是附加`"None"`的。我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T17:30:15.357

你只需要打电话`append()`

```
dict1["A"].append(1) 
```

由于自身的返回值为None，因此您的版本只是在成功将项目添加到列表*后*`append()`替换了旧值（列表） 。`None`

 *快速演示：

```
>>> dict1 = {'A': []}
>>> dict1['A'].append(1)
>>> dict1
{'A': [1]} 
```

在 Python 中，就地操作，例如追加到列表，返回`None`：

```
>>> alist = []
>>> alist.append(1) is None
True
>>> alist
[1] 
```

但如您所见，列表本身已更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T17:30:41.907

无需重新分配。做吧`dict1["A"].append(1)`。

您所做的错误是`dict1["A"].append(1)`返回`None`，并且您将其分配回`dict1`. 这解释了`None`你得到...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T17:30:58.530

那是因为`append()`就地更改列表并返回`None`。在您的代码中，您将返回的值分配给`dict1["A"]`

```
In [25]: dict1={}

In [26]: dict1["A"]=[]

In [27]: dict1["A"].append(1)  #try print dict1["A"].append(1) here

In [28]: dict1
Out[28]: {'A': [1]} 
```*

# ios - 为什么我的 EAGLView 无法创建帧缓冲区？

> ID：15865455
> 
> 赞同：1
> 
> 时间：2013-04-07T17:29:34.360
> 
> 标签：ios, opengl-es

我过去使用过这个 EAGLView（在 iOS 4.3 左右）

```
#import <UIKit/UIKit.h>

#import <QuartzCore/QuartzCore.h>
#import <OpenGLES/EAGLDrawable.h>

#import "EAGLView.h"
#import "DrawingUtil.h"

#define USE_DEPTH_BUFFER 0

@interface EAGLView (EAGLViewPrivate)

- (BOOL)createFramebuffer;
- (void)destroyFramebuffer;

@end

@interface EAGLView (EAGLViewSprite)

- (void)setupView;

@end

@implementation EAGLView

@synthesize animationInterval, applicationResignedActive;

// You must implement this
+ (Class) layerClass
{
    return [CAEAGLLayer class];
}

- (id)initWithFrame:(CGRect)frame
{
NSLog(@"[INFO] initWithFrame %f %f %f %f", frame.origin.x, frame.origin.y, frame.size.width, frame.size.height);

    frame.size.width = 256;
    frame.size.width = 256;

    if((self = [super initWithFrame:frame])) {
        // Get the layer
        CAEAGLLayer *eaglLayer = (CAEAGLLayer*) self.layer;

        eaglLayer.opaque = NO;

        eaglLayer.drawableProperties = [NSDictionary dictionaryWithObjectsAndKeys:
                                        [NSNumber numberWithBool:FALSE], kEAGLDrawablePropertyRetainedBacking, kEAGLColorFormatRGBA8, kEAGLDrawablePropertyColorFormat, nil];

        context = [[EAGLContext alloc] initWithAPI:kEAGLRenderingAPIOpenGLES1];
NSLog(@"[INFO] Ready to create framebuffer");
        if(!context || ![EAGLContext setCurrentContext:context] || ![self createFramebuffer]) {
            [self release];
            return nil;
        }

        animationInterval = 1.0 / 30.0;

        [self setupView];
        [self drawView];
    }

    self.opaque = NO;

    return self;
}

- (void)layoutSubviews
{
    [EAGLContext setCurrentContext:context];
    [self destroyFramebuffer];
    [self createFramebuffer];
    [self drawView];
}

- (BOOL)createFramebuffer
{
    glGenFramebuffersOES(1, &viewFramebuffer);
    glGenRenderbuffersOES(1, &viewRenderbuffer);

    glBindFramebufferOES(GL_FRAMEBUFFER_OES, viewFramebuffer);
    glBindRenderbufferOES(GL_RENDERBUFFER_OES, viewRenderbuffer);
    [context renderbufferStorage:GL_RENDERBUFFER_OES fromDrawable:(id<EAGLDrawable>)self.layer];
    glFramebufferRenderbufferOES(GL_FRAMEBUFFER_OES, GL_COLOR_ATTACHMENT0_OES, GL_RENDERBUFFER_OES, viewRenderbuffer);

    glGetRenderbufferParameterivOES(GL_RENDERBUFFER_OES, GL_RENDERBUFFER_WIDTH_OES, &backingWidth);
    glGetRenderbufferParameterivOES(GL_RENDERBUFFER_OES, GL_RENDERBUFFER_HEIGHT_OES, &backingHeight);

    if(USE_DEPTH_BUFFER) {
        glGenRenderbuffersOES(1, &depthRenderbuffer);
        glBindRenderbufferOES(GL_RENDERBUFFER_OES, depthRenderbuffer);
        glRenderbufferStorageOES(GL_RENDERBUFFER_OES, GL_DEPTH_COMPONENT16_OES, backingWidth, backingHeight);
        glFramebufferRenderbufferOES(GL_FRAMEBUFFER_OES, GL_DEPTH_ATTACHMENT_OES, GL_RENDERBUFFER_OES, depthRenderbuffer);
    }

    if(glCheckFramebufferStatusOES(GL_FRAMEBUFFER_OES) != GL_FRAMEBUFFER_COMPLETE_OES) {
        NSLog(@"failed to make complete framebuffer object %x", glCheckFramebufferStatusOES(GL_FRAMEBUFFER_OES));
        return NO;
    }

    return YES;
}

- (void)destroyFramebuffer
{
    glDeleteFramebuffersOES(1, &viewFramebuffer);
    viewFramebuffer = 0;
    glDeleteRenderbuffersOES(1, &viewRenderbuffer);
    viewRenderbuffer = 0;

    if(depthRenderbuffer) {
        glDeleteRenderbuffersOES(1, &depthRenderbuffer);
        depthRenderbuffer = 0;
    }
}

- (void)startAnimation
{
    animationTimer = [NSTimer scheduledTimerWithTimeInterval:animationInterval target:self selector:@selector(drawView) userInfo:nil repeats:YES];
    animationStarted = [NSDate timeIntervalSinceReferenceDate];
}

- (void)stopAnimation
{
    [animationTimer invalidate];
    animationTimer = nil;
}

- (void)setAnimationInterval:(NSTimeInterval)interval
{
    animationInterval = interval;

    if(animationTimer) {
        [self stopAnimation];
        [self startAnimation];
    }
}

- (void)setupView
{
    self.opaque = NO;

    // Sets up matrices and transforms for OpenGL ES
    glViewport(0, 0, backingWidth, backingHeight);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glOrthof(0, backingWidth, 0, backingHeight, -1.0f, 1.0f);
    glMatrixMode(GL_MODELVIEW);

    // Clears the view with (transparent) black
    glClearColor(0.0f, 0.0f, 0.0f, 0.0f);

//  glEnableClientState(GL_VERTEX_ARRAY);

}

// Updates the OpenGL view when the timer fires
- (void)drawView
{
    // the NSTimer seems to fire one final time even though it's been invalidated
    // so just make sure and not draw if we're resigning active
    if (self.applicationResignedActive) return;

    // Make sure that you are drawing to the current context
    [EAGLContext setCurrentContext:context];

    glBindFramebufferOES(GL_FRAMEBUFFER_OES, viewFramebuffer);

    [delegate drawView:self forTime:([NSDate timeIntervalSinceReferenceDate] - animationStarted)];

    glBindRenderbufferOES(GL_RENDERBUFFER_OES, viewRenderbuffer);
    [context presentRenderbuffer:GL_RENDERBUFFER_OES];

}

// Stop animating and release resources when they are no longer needed.
- (void)dealloc
{
    [self stopAnimation];

    if([EAGLContext currentContext] == context) {
        [EAGLContext setCurrentContext:nil];
    }

    [context release];
    context = nil;

    [super dealloc];
}

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    if ([(id)delegate respondsToSelector:@selector(touchesBegan:withEvent:)])
        [delegate touchesBegan:touches withEvent:event];
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    if ([(id)delegate respondsToSelector:@selector(touchesMoved:withEvent:)])
        [delegate touchesMoved:touches withEvent:event];
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    if ([(id)delegate respondsToSelector:@selector(touchesEnded:withEvent:)])
        [delegate touchesEnded:touches withEvent:event];
}

- (id <EAGLViewDelegate>)delegate { return delegate; }
- (void)setDelegate:(id <EAGLViewDelegate>)v
{
    delegate = v;
}

@end 
```

这是我的主要视图创建 EAGLView 的位置：

```
 glView = [[EAGLView alloc] initWithFrame:[self frame]];
    [self addSubview:glView];
    NSLog(@"[INFO] create glView %o", [self frame]);
    glView.delegate = self;

    glView.userInteractionEnabled = FALSE;

    [glView setAnimationInterval:1./30.];
    [glView startAnimation]; 
```

当我初始化这个 EAGLView 时，我得到了 GL_FRAMEBUFFER_INCOMPLETE_ATTACHMENT_OES。我的主要视图是与 Titanium 模块一起使用的 TiUIView。这可能是线程问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T20:48:35.167

我转而使用 GLKit。我推荐任何可以这样做的人，因为它更方便。这是一个很棒的教程：[http ://www.raywenderlich.com/5223/beginning-opengl-es-2-0-with-glkit-part-1](http://www.raywenderlich.com/5223/beginning-opengl-es-2-0-with-glkit-part-1)

# javascript - 使用 javascript 更改链接 url

> ID：15865458
> 
> 赞同：0
> 
> 时间：2013-04-07T17:29:55.907
> 
> 标签：javascript

这是我正在更新的网站的 javascript 菜单。我想添加一个动态链接 (id=IT-LINK) 以链接到该网站的意大利语版本。但是 URL 需要根据查看者所在的页面而改变。有人可以告诉我该怎么做！？我对javascript很陌生，正在自学。谢谢， 卡塔尔多

```
window.onload = uline;

var pagename = document.getElementById("TAG").getAttribute("data-name");

function uline()
{
if (pagename == 'HOME' )
document.getElementById(pagename).style.color="#ffffff";
else
document.getElementById(pagename).style.textDecoration="underline";
}

document.write('<DIV CLASS=RIGHT><B>');

document.write('<a href=\"+link+'\"     id=IT-LINK      >ITALIANO</a>    &nbsp;&nbsp;&nbsp;');
document.write('<br><br>');
document.write('<a href="news.html"     id=NEWSLETTER   >NEWSLETTER</a> &nbsp;&nbsp;&nbsp;');
document.write('<a href="prodotti.html" id=PRODUCTS     >PRODUCTS</a> &nbsp;&nbsp;&nbsp;');
document.write('<a href="bio.html"      id=BIO          >PHILOSOPHY/BIOG</a> &nbsp;&nbsp;&nbsp;');
document.write('<a href="contatti.html" id=CONTACTS     >CONTACTS</a> &nbsp;&nbsp;&nbsp;');
document.write('<a href="home.html"     id=HOME         >HOME</a>');

document.write('</B></DIV>'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T18:04:19.677

我真的不明白您将如何找到该页面，但我会将这个逻辑留给您。要替换 url，您可以使用下面的 javascript 代码。

```
//your logic to find page and corresponding url
    document.getElementById(linkId).setAttribute('href',yourLink); 
```

如果需要更多信息，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T17:54:22.170

您应该将链接放在 HTML 中，并带有指向意大利主页的 href。如果您的访问者没有启用 javascript，这将是最低要求。然后对于那些使用 javascript 的人，你可以这样做：

```
document.getElementById("IT-LINK").href = getItalianVersionOf(window.location.href); 
```

getItalianVersionOf 获取您的页面网址并提供此网址的意大利语版本。

请注意，在服务器端（例如使用 PHP）这样做会更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T13:58:03.400

谢谢大家的帮助，但我找到了一种更简单的方法。通过在 URL 中添加“/it”，我得到一个链接，该链接将我带到当前网页的意大利语版本。

```
document.write('<font size=2.5><a href="it/home.html"   id=IT-LINK      >ITALIANO</a></font> &nbsp;&nbsp;&nbsp;');

var newURL = window.location.protocol + "//" + window.location.host + "/it" + window.location.pathname;
document.getElementById("IT-LINK").href = newURL; 
```

但！现在我必须请你帮忙做相反的事情：我怎样才能从意大利语 URL 中取出“/it”来让我回到英文版本？

# objective-c - 将块与 NSManagedObjectContext 一起使用

> ID：15865462
> 
> 赞同：0
> 
> 时间：2013-04-07T17:30:20.653
> 
> 标签：objective-c, core-data, asynchronous, block, nsmanagedobjectcontext

我希望将块与 NSManagedObjectContext 一起使用。我正在尝试为一个实体异步下载多个图像。我拥有的数据结构或多或少类似于以下内容（这是伪代码，并不完全遵循 NSManagedObject 语法）。

```
@interface SAImageDoc : NSObject

@property(nonatomic, strong) NSString* imageUrl1;
@property(readwrite) BOOL imageUrl1Downloaded; 
@property(nonatomic, strong) NSString* imageUrl2;
@property(readwrite) BOOL imageUrl2Downloaded; 

@end 
```

我正在尝试使用块（AFNetworking）异步下载图像。图像下载后，我想将下载的布尔值更新为 YES 并将其保存到 CoreData。

我的问题是：

1.  可以将 NSManagedObjectContext 传递给每个块吗？由于该块在不同的线程中执行，并且 NSManagedObjectContext 不是线程安全的，因此这样做似乎是错误的。
2.  任何建议如何处理这个？如果 1 不起作用。有什么已知的例子吗？

## 更新

鉴于 Gabriele，Mario 的回答和参考[What is NSManagedObjectContext's performBlock: used for？](https://stackoverflow.com/questions/9922145/what-is-nsmanagedobjectcontexts-performblock-used-for)，我相信这就是我要做的：

1.  使用 NSPrivateQueueConcurrencyType 或 NSMainQueueConcurrencyType 实例化上下文；
2.  在每个块中，调用上下文 performBlock。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T18:04:31.510

为了简单地回答您的问题，您可以将上下文传递给您的下载块，并在其中使用上下文的 -performBlock: 方法来访问上下文。

# typescript - 无法获得使用打字稿的参考

> ID：15865465
> 
> 赞同：0
> 
> 时间：2013-04-07T17:30:38.907
> 
> 标签：typescript

AppViewModel.ts

```
interface IAppViewModel
{
    status: any;
}
export class AppViewModel{
....
} 
```

IdentityViewModel.ts

```
///<reference path="AppViewModel.ts" />

export class IdentityViewModel {

    constructor(parent : IAppViewModel) {
    }
} 
```

我是否应该无法判断父级在 identityViewModel 中实现了 IAppViewModel？它告诉我它在当前范围内不存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T18:50:47.233

如果您有顶级`export`指令，则不应使用`<reference...`将文件链接在一起。IdentityViewModel.ts 应该改为`import appvm = module('./AppViewModel');`。您还需要`export`任何您希望在原始文件之外可见的界面。

# java - actionPerformed(ActionEvent e) {

> ID：15865471
> 
> 赞同：0
> 
> 时间：2013-04-07T17:31:00.080
> 
> 标签：java, awt, action, actionevent

我正在构建一个带有不同按钮的 grpahic 界面，当用户单击一个按钮时，我使用：

```
actionPerformed(ActionEvent e) {
Object source = e.getSource();
if
else if
else if
...
} 
```

问题是当用户点击一个按钮时，`actionPerformed(ActionEvent e)`被调用，并且在对应的 if 中输入`e.getSource();`。它执行相应的if中的所有指令。但我想让用户点击不同的按钮成为可能，以便`actionPerformed(ActionEvent e)`调用 {，即使前一个`actionPerformed(ActionEvent e)`{ 的说明尚未完成。

不知道你懂不懂，如果能帮到我，谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T17:32:47.510

如果您希望 GUI 在长时间运行的进程发生时做出响应，则需要使用后台线程。SwingWorker 在 Swing GUI 中很好地解决了这个问题。请查看[Swing 中的并发以](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)了解有关此的所有血腥细节。

例子：

*   [mvc-progress-bar-threading](https://stackoverflow.com/a/5533581)
*   [为什么摇摆工人意外停止](https://stackoverflow.com/questions/14900697/why-does-swingworker-stop-unexpectedly/14900792#14900792)
*   [谷歌搜索](https://www.google.com/#hl=en&sclient=psy-ab&q=site:stackoverflow.com+hovercraftfullofeels+swingworker+doinbackground)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T17:35:42.320

你需要使用`SwingWorker`. 它在后台完成工作而不会冻结 UI。

[这](https://stackoverflow.com/questions/11255925/use-of-swingworker-to-do-complex-tasks-in-background)是您可以查看如何使用它们的问题。或者，您可以使用官方 oracle[文档](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html).`SwingWorker`

# java - 如何使用反射从 Java Bean 中检索自定义对象？

> ID：15865472
> 
> 赞同：0
> 
> 时间：2013-04-07T17:31:00.850
> 
> 标签：java, jpa, reflection

我使用反射检索了 Java Bean 属性。但我无法从原始 Bean 获取集合、自定义对象。例如，

```
@Entity
@Table(name = "ucms_user_tbl")
public class Employee {

@Id
@Column(name="employee_no")
private int employeeno;
@Column(name="Employee_name")
private String employeeName,
//one-to-Many
@OneToMany(mappedBy="EmpDtl")
private List<EmpDtl> dtlList=new ArrayList<EmpDtl>();
@ManyToOne
@JoinColumn(name="status_id")
//Many-to-One
private EMPStatus empStatus;

} 
```

我使用反射检索了employeeno，employeename。但我无法找出dtlList，empStatus 属性。

```
for(Method metd:method){
    Annotation[] annotations = m.getAnnotations();
         for(Annotation annotation : annotations){          
                  if(annotation instanceof Column){
                Column myAnnotation = (Column) annotation;
                name=myAnnotation.name();

                   }
         }
} 
```

# jquery - 使用 JQuery 和更改 DOM 将表单替换为另一个表单

> ID：15865476
> 
> 赞同：0
> 
> 时间：2013-04-07T17:31:13.817
> 
> 标签：jquery, ajax

假设有两个名为`profileChange`and的表单`passChange`（在单独的文件中），并且还有另一个名为`update`. 默认情况下`profileChange`显示在`update`浏览器的页面上。我使用以下代码替换表单：

```
$('document').ready(function(){
   $('#pass-change-link').click(function(){
       var link = $(this).attr('href');
       $('#container').load(link);
       return false;
    })
} 
```

这样`passChange`表单真正出现在浏览器中，但我希望更改表单也发生在**DOM**上。怎么做？

# javascript - 正则表达式在javascript中带有特殊字符的名称

> ID：15865481
> 
> 赞同：1
> 
> 时间：2013-04-07T17:31:22.420
> 
> 标签：javascript, regex

我对 RegEx 比较陌生，但遇到了问题。我想正则表达式一个名字。我希望它最多 100 个字符，至少包含 2 个字母字符，并且允许使用字符“-”。

我只检查字母字符或字母字符和连字符没有问题，但我不想要一个可能是'---------'的名称。

我没有检查连字符的代码是

```
var nameRegExp = /^([a-z]){2,100}$/; 
```

对代码的解释也很受欢迎。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T17:33:22.727

我猜

```
/^(?=.*[a-z].*[a-z])[a-z-]{1,100}$/ 
```

前瞻部分 ( `^(?=.*[a-z].*[a-z])`) 检查是否至少有两个字母。这种模式（“字符串开头，后跟...”）是在正则表达式中表达附加条件的常用方法。

`-`正如@Mike[指出的那样](https://stackoverflow.com/a/15865800/989121)，您可以通过添加否定断言来限制数量：

```
/^(?=.*[a-z].*[a-z])(?!(?:.*-){11,})[a-z-]{1,100}$/  // max 10 dashes 
```

然而，编写一个匹配“好”字符串而不是试图禁止“坏”字符串的表达式可能更容易。例如，这个

```
/^[a-z]+(-[a-z]+)*$/ 
```

看起来像是“名称”的一个很好的近似值。它允许`foo`and ，但不允许or`foo-bar-baz`之类的东西。`----``foo----bar----`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T17:58:53.153

要限制您的数量，`-`可以添加一个负前瞻，其中数量`3`比您要允许的最大数量多一

```
/^(?!(?:[a-z]*-){3,})(?=-*[a-z]-*[a-z])[a-z-]{2,100}$/ 
```

# ios - iOS AVAudioSession 应用高通滤波器

> ID：15865483
> 
> 赞同：3
> 
> 时间：2013-04-07T17:31:58.343
> 
> 标签：ios, avaudiosession

`AVAudioSession`我有一个`AVAudioSessionCategoryPlayAndRecord`用于捕获麦克风输入的应用程序。我正在寻找对捕获的音频数据应用高通（可能还有其他）过滤器，但找不到关于这个主题的任何好的文档，特别是使用 AVAudioSession 进行数据捕获的东西。任何指针表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-10T12:49:06.203

我很确定这个问题在 4 年后对你来说不是实际的，但对于未来的问题......

[AudioSession](https://developer.apple.com/library/content/documentation/Audio/Conceptual/AudioSessionProgrammingGuide/Introduction/Introduction.html)是您的应用程序和 iOS 系统媒体守护程序之间的中间体，它本身不录制或播放音频，它只是设置一些音频首选项。出于您的目的，请查看[AudioUnit](https://developer.apple.com/library/content/documentation/MusicAudio/Conceptual/AudioUnitHostingGuide_iOS/Introduction/Introduction.html)或[AudioQueue](https://developer.apple.com/library/content/documentation/MusicAudio/Conceptual/CoreAudioOverview/CoreAudioEssentials/CoreAudioEssentials.html#//apple_ref/doc/uid/TP40003577-CH10-SW32)。如果您只需要音频捕获，请尝试高级 API，例如[AVAudioRecord](https://developer.apple.com/reference/avfoundation/avaudiorecorder)。

希望它对某人有所帮助。

# ios - .xib 文件不在编译源构建阶段，但仍然可以正确构建；怎么会这样？

> ID：15865484
> 
> 赞同：1
> 
> 时间：2013-04-07T17:32:32.160
> 
> 标签：ios, xcode, build-process, xib, nib

当您从具有 .xib 文件的 Xcode 模板开始时，该 .xib 文件会列在 Compile Sources 构建阶段。这对我来说很有意义，因为在构建过程中，需要将 .xib 文件转换为 .nib 文件（带有`ibtool`），而且确实如此。

但是在重命名我的 .xib 文件并添加一些新文件时，我最终遇到了我的 .xib 文件都*没有*在编译源构建阶段列出的情况。相反，它们都列在 Copy Files 构建阶段。我无法解决这个问题。（不要让我开始*。*）

但事实证明我不必修复它！当我构建时，我可以查看构建应用程序的包，我看到它有 .nib 文件，而不是 .xib 文件。.xib 文件*不会*被复制到资源文件夹中，即使它们处于复制文件构建阶段；它们正在被编译，即使它们不在编译源构建阶段。

我可以通过查看构建日志来确认这一点：

```
CompileXIB "MyApp/en.lproj/ViewController~iphone.xib"
CompileXIB "MyApp/en.lproj/ViewController~ipad.xib" 
```

怎么会这样？

编辑：现在我无法重现我最初的前提！正如一位受访者所说，模板*没有*将 .xib 文件置于编译源构建阶段。然而，我确实最终遇到了一些 .xib 文件处于编译源构建阶段而一些处于复制构建阶段的情况，这让我感到困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T17:51:20.657

当我使用“Cocoa Application”模板为 OS X 创建一个全新的 Xcode 项目时，该项目的唯一`.xib`文件未在“Compile Sources”下列出，它在“Copy Bundle Resources”下列出。所以我不确定你`.xib`的 's 是如何/为什么首先被列在 Compile Sources 下的。

至于它们是如何使用命令自动编译的`CompileXIB`，我怀疑这是由于 Xcode 的[构建规则](http://www.cocoanetics.com/2012/02/xcode-build-rules/)称为“Interface Builder XIB Compiler”，它适用于所有 Interface Builder 文件。

# windows-phone-7 - InputScope设置为数字时如何本地化键盘？

> ID：15865491
> 
> 赞同：1
> 
> 时间：2013-04-07T17:33:08.887
> 
> 标签：windows-phone-7, windows-phone-8, windows-phone-7.1

我有一个为 Windows Phone 8 编写的应用程序，我将它向下移植到 Windows Phone 7。该应用程序处理输入货币值，因此我的 TextBox 有一个数字的 InputScope 以使输入更容易。我尝试尊重语言环境设置，以便在某些国家/地区，货币值的小数点由“。”表示。在其他情况下，它由“，”表示。

我的问题是键盘似乎没有本地化，所以用户必须按住“。” 按钮选择“，”。我相信这可能只是一个 WP7 问题。不幸的是，一些用户不知道他们可以做到这一点，因此认为他们无法输入包含小数的货币值。对于以这种方式表示数字的任何人来说，这也使该应用程序变得乏味。

有什么我没有正确设置或解决方法吗？

谢谢，

米龙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T17:46:26.953

不幸的是，它不依赖于文化，但您可以设置另一个`InputScope`，即`CurrencyAmountAndSymbol`包含两个 '.' 和 '，'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T06:17:51.570

您可以`PostalCode`为您的事物使用输入范围

# emacs - 在 emacs 中打开文件：不安全的值

> ID：15865495
> 
> 赞同：2
> 
> 时间：2013-04-07T17:33:21.810
> 
> 标签：emacs

当我在 Emacs 24.3 中打开文件`zenburn-theme.el`时`github.com/bbatsov/zenburn-emacs.git`，我在缓冲区中收到以下警告：

          ![在此处输入图像描述](https://i.stack.imgur.com/9HUjv.png)

为什么？另外，为什么**打开**（不加载或运行）文件不安全？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T17:37:47.167

一个文件，即使打开但未加载，也可能包含一些要应用的配置值。其中一些被认为是不安全的，除非另有说明，否则 Emacs 会询问您有关它们的信息。有关详细信息，请参阅[文件中的局部变量](http://www.gnu.org/software/emacs/manual/html_node/emacs/File-Variables.html)。

# php - htaccess 从页面 ID 重写为名称不起作用

> ID：15865499
> 
> 赞同：1
> 
> 时间：2013-04-07T17:33:29.010
> 
> 标签：php, forms, .htaccess, mod-rewrite, get

我`?page=about`在 index.php 的表单中使用 GET 方法调用（即“关于”是一个选择选项）。单击提交后，URL 将如下所示：

`http://example.com/?page=about`

但是我希望它看起来像这样：

`http://example.com/about`

但保持脚本（PHP）在 index.php 上工作（不要也不想有一个“关于”文件），即。发送表单后，我想在同一页面上使用 GET 值。我可以使 php 脚本工作，它反应很好，但 URL 重写根本不起作用。

我已经尝试了以下 htaccess 重写，但它没有做任何事情，URL 仍然如上。

我的 htaccess：

```
Options +FollowSymLinks
RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ ?page=$1 [L,QSA] 
```

非常感谢您的帮助，因为我不知道为什么这不起作用。我在网上搜索过，每个人都指向这个规则，但它对我没有任何作用。

提前非常感谢！

**编辑：**

让我发布我使用的 php 代码，对不起，我错过了。我现在已经删除了该`action`属性，因为我在浏览器中使用它，我知道在提交表单时会将我发送到相同的浏览器：

```
<?php

$page = $_GET['page'];

switch($page){
 case 'about': echo 'I am me'; break;
 case 'galery': echo 'Nice pictures here'; break;
}

?>

<body>

<form action="/" method="get">
<select name="page">
    <option value="about">about</option>
    <option value="galery">galery</option>
</select>
<input type="submit" value="Submit" />
</form>
</body> 
```

**编辑＃2：**

我必须添加`action="/"`到表单标签才能使 anubhava 的解决方案起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T17:46:03.363

这应该是您完整的 .htaccess：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

#external redirect from /?page=about OR /index.php?page=about to /about
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+(?:index\.php|)\?page=([^\s]+) [NC]
RewriteRule ^ /%1? [R=301,L]

#internal forward from /about to /?page=about
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule ^(.+?)/?$ /?page=$1 [L,QSA] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T17:36:02.217

尝试

```
 ...
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule ^(.*)$ index.php?page=$1 [L,QSA] 
```

和

> 我正在调用 ?page=about 在 index.php 上的表单中使用 GET 方法

尝试调用正确的链接？' `/about`' 而不是 ' `?page=about`'

# ios - CALayer, subLayer alpha 覆盖

> ID：15865500
> 
> 赞同：1
> 
> 时间：2013-04-07T17:33:34.723
> 
> 标签：ios, calayer, opacity, alpha, quartz-2d

我有一个具有 0.3 opacity 属性的 CALayer ( superlayer )。超层包含另一个 CALayer（子层）。虽然 sublayer 没有 opacity 属性 superLayer 的 opacity 会影响 sublayer 的外观。有没有一种方法可以覆盖 superLayer'a 不透明度属性。

**超层**

```
@implementation SuperView

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        [self setOpaque:NO];
        [self.layer setOpaque:NO];
    }
    return self;
}

-(void)drawRect:(CGRect)rect
{
    CALayer* superLaer=self.layer;

    superLaer.backgroundColor = [UIColor blackColor].CGColor;
    superLaer.shadowOffset = CGSizeMake(0, 3);
    superLaer.shadowRadius = 5.0;
    superLaer.shadowColor = [UIColor blackColor].CGColor;
    superLaer.shadowOpacity = 0.6;
    superLaer.frame = CGRectMake(10, 10, 300,300);
    superLaer.borderColor = [UIColor blackColor].CGColor;
    superLaer.borderWidth = 2.0;
    superLaer.cornerRadius = 10.0;
    superLaer.cornerRadius = 10.0;
    superLaer.masksToBounds=YES;
    superLaer.opacity = 0.1;
}

@end 
```

**子层**

```
@implementation SubView

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        [self setOpaque:NO];
        [self.layer setOpaque:NO];
    }
    return self;

}

-(void)drawRect:(CGRect)rect
{
    CALayer* superLaer=self.layer;

    superLaer.backgroundColor = [UIColor redColor].CGColor;
    superLaer.shadowOffset = CGSizeMake(0, 3);
    superLaer.shadowRadius = 5.0;
    superLaer.shadowColor = [UIColor blackColor].CGColor;
    superLaer.shadowOpacity = 0.6;
    superLaer.frame = CGRectMake(100, 100, 100,100);
    superLaer.borderColor = [UIColor blackColor].CGColor;
    superLaer.borderWidth = 2.0;
    superLaer.cornerRadius = 10.0;
    superLaer.cornerRadius = 10.0;
    superLaer.masksToBounds=YES;
}

@end 
```

我已将 subView 添加到 Viewcontroller 中的 superView 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-28T09:55:25.787

根据您的问题，超级图层的不透明度控制子图层的不透明度，您可以将 CALayer 子类化并在 init 方法中覆盖它的一些属性，例如

```
@implementation SomeSuperCALayer

-(id)init
{
    self = [super init];
    if (self) {
        [self setup];
    }
    return  self;
}

#define  W_H 100.0
#define X_Y 50.0f

-(void)setup
{
    self.frame = CGRectMake(X_Y, X_Y, W_H, W_H);
    self.backgroundColor = [UIColor blueColor].CGColor;
    self.opacity = 1.0f; // big opacity 
}

@implementation SomeSubCALayer

-(id)init
{
    self = [super init];
    if (self) {
        [self setup];
    }
    return  self;
}

#define  W_H 100.0
#define X_Y 150.0f

-(void)setup
{
    self.frame = CGRectMake(X_Y, X_Y, W_H, W_H);
    self.backgroundColor = [UIColor blueColor].CGColor;
    self.opacity = .5f; // small opacity 
}

@ implementation MyViewController

// 
-(void)viewDidLoad
{
SomeSuperCALayer *superLayer = [[SomeSuperCALayer alloc] init];        SomeSubCALayer *subLayer = [[SomeSubCALayer alloc] init];
//add sub layer to super layer 
[superLayer addSubLayer:subLayer]; 
// add super layer to main View
[self.view.layer addSubLayer:superLayer]; 
// 
//... 

} 
```

也不要使用 drawRect 来调用图层的属性，drawRect 并不像 Apple 的文档所规定的那样用于绘图：/仅覆盖 drawRect：如果您执行自定义绘图。// 空实现会对动画期间的性能产生不利影响。

# jquery - ui-icon-circle-close 的“ui-state-hover”上显示不正确的背景图像

> ID：15865503
> 
> 赞同：0
> 
> 时间：2013-04-07T17:33:39.670
> 
> 标签：jquery, jquery-ui, jquery-ui-tabs

我正在尝试扩展 jQuery-UI 选项卡元素以显示“关闭”按钮。我希望关闭按钮更改悬停事件的外观并删除单击时的选项卡。下面的代码几乎可以工作，但悬停时显示的图像即使不正确。（我正在使用默认正确显示的“ui-icon-circle-close”，但是在悬停事件时它会变为一个正方形，其中包含一些部分图像）。不幸的是 - 我不能发布屏幕短片 - 看起来缺乏信用:-(。

我正在使用 jQuery v1.8.2 和 jQuery UI - v1.10.0

这是我的整个 javascript 函数

（我使用来自 repo [http://github.com/andrewwatts/ui.tabs.closable](http://github.com/andrewwatts/ui.tabs.closable)的 jQuery 1.8 的 Andrew Watts 原始版本，并将其扩展为适用于具有额外功能的 jQuery 1.9。）

```
(function() {
$.widget( "ui.tabs", $.ui.tabs, {
options: {
    spinner: "<em>Loading&#8230;</em>",
    closable: false
},
_create: function() {
    this._super( "_create" );
    this._on({
    tabsbeforeload: function( event, ui ){
        if( !this.options.spinner ) {
        return;
        }
        var span = ui.tab.find( "span" ),
        html = span.html();
        span.html( this.options.spinner );
        ui.jqXHR.complete(function() {
        span.html( html );
        });
    }
    });
},

_removeTab: function( index ) {
    index = this._getIndex( index );
    var options = this.options;
    tab = this.tabs.eq( index ).remove(),
    panel = this._getPanelForTab( tab ).remove();

    if( tab.hasClass( "ui-tabs-active" ) && this.anchors.length > 2 ) {
    this._activate( index + ( index + 1 < this.anchors.length ? 1 : -1 ));
    }
},

_processTabs: function() {
    this._super( "_processTabs" );
    var self = this;
    var lis = this.tablist.children( ":has(a[href])" );

    if (this.options.closable === true) {
    var unclosable_lis = lis.filter(function() {
                return $('.ui-closable-tab', this).length === 0;
    });

    // append the close button and associated events
    unclosable_lis.each(function() {
                $(this)
        .append('<a href="#"><span class="ui-icon ui-icon-circle-close ui-closable-tab"></span></a>')
        .find('a:last .ui-closable-tab')
                    .hover(
                        function() {
            $(this).addClass('ui-state-hover');
                            $(this).css('cursor', 'pointer');
                        },
                        function() {
                            $(this).css('cursor', 'default');
            $(this).removeClass('ui-state-hover');
                        }
                    )
                    .click(function() {
                        var index = lis.index($(this).parent().parent());
                        if (index > -1) {
                            // remove this tab
                            self._removeTab(index);
                        }
                        // don't follow the link
                        return false;
                    })
        .end();
    });
    }
}
});

})(jQuery); 
```

任何想法如何使此代码显示正确的悬停图标？

# php - 从网站中提取 IP 地址

> ID：15865504
> 
> 赞同：0
> 
> 时间：2013-04-07T17:33:47.387
> 
> 标签：php

我正在尝试使用两种不同的方法从一个网站 (www.website.com) 获取 IP 地址。

在 www.website.com 上，我使用 www.website.com`$_SERVER['REMOTE_ADDR']`的 IP 地址并将其发送到 www.website2.com。然后我`gethostbyname("www.website.com")`在 www.website2.com 上使用搜索 www.website.com 的 IP 地址来比较它们，但由于某种原因它们并不相同。

为什么IP地址彼此不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T17:36:10.740

`$_SERVER['REMOTE_ADDR']`给出发出 HTTP 请求的客户端的 IP 地址，而不是托管脚本的服务器（保存在 中`$_SERVER['SERVER_ADDR']`）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-07T17:42:13.090

这也说明了来自`HTTP_CLIENT_IP`和`HTTP_X_FORWARDED_FOR`

```
/**
 * getVisitorIP
 *
 * Gets visitor IP address
 *
 * @return string Visitor IP address
 */
public function getVisitorIP() {
    $ip = $_SERVER['REMOTE_ADDR'];      
    if (!empty($_SERVER['HTTP_CLIENT_IP'])) {
        $ip = $_SERVER['HTTP_CLIENT_IP'];
    } elseif (!empty($_SERVER['HTTP_X_FORWARDED_FOR'])) {
        $ip = $_SERVER['HTTP_X_FORWARDED_FOR'];
    }
    return $ip;
} 
```

# android - Android：从自己的构建更新系统映像，以便模拟器反映核心 java 文件中的更改

> ID：15865505
> 
> 赞同：0
> 
> 时间：2013-04-07T17:33:52.350
> 
> 标签：android, jar, android-emulator

我从源代码构建了自己的 android 图像，这些图像可以正常工作。现在我对核心 java 文件（在框架/基础/服务中）进行了一些更改（主要是日志消息）。我现在可以运行“mmm framework/base/services/java”来编译和更新 services.jar。这似乎没有错误。当我现在启动模拟器（由初始构建过程创建）时，更改不会反映在 logcat 中。

因此我认为修改后的 services.jar 不包含在模拟器使用的系统映像中。

是否可以使用某些命令更新这些图像？我是否必须完全重建所有内容或手动更改图像？

为了手动更改图像，我在这里找到了一些教程： [修改 .IMG 文件](http://omappedia.org/wiki/Android_eMMC_Booting#Modifying_.IMG_Files)

只需更改一两行代码，这确实是很多工作......

我还尝试使用以下内容：

```
$ adb remount
$ ./adb push ~/android/out/target/product/generic/system/framework/services.jar /system/framework/services.jar
failed to copy 
'/home/devusr/android/out/target/product/generic/system/framework/services.jar' to '/system/framework/services.jar': No space left on device 
```

我认为没有空间了，因为它是一个固定的模拟器图像......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T21:00:10.893

如果我正确地回答了您的问题，我曾经遇到过同样的问题。尝试使用

```
mmm framework/base/services/java
make 
```

使用顶部 android 源文件夹上的 make 重新创建系统映像并安装所有相关文件。正常情况下不要担心，它不会重建一切。

# android - Sqlite 数据库创建问题

> ID：15865509
> 
> 赞同：0
> 
> 时间：2013-04-07T17:34:08.683
> 
> 标签：android, sqlite

我试图在 sqlite 中创建一个数据库..但它没有被创建。

文件资源管理器中没有显示数据库文件夹。

任何人都可以在下面给定的代码中发现任何错误

```
public DatabaseHelper(Context context) {

    super(context, databasename, null, databaseversion);
    Log.d("DatabaseHelper", "Reached Database helper");
    mContext = context;
}

@Override
public void onCreate(SQLiteDatabase db) {
    String CREATE_MASTER_TABLE = "CREATE TABLE " + table_reminder_master
            + "(" + MASTER_ID + " INTEGER PRIMARY KEY ," + MASTER_TITLE
            + " TEXT," + MASTER_CONTACT_ID + " INTEGER," + MASTER_EMAIL_ID
            + " INTEGER," + MASTER_TYPE_ID + " INTEGER," + ")";
    db.execSQL(CREATE_MASTER_TABLE);
    Log.d("Table Create", "The table is created");
    Toast.makeText(mContext, "Created", Toast.LENGTH_LONG).show();

    String CREATE_CONTACT_TABLE = "CREATE TABLE " + table_contactDetails
            + "(" + CONTACT_ID + " INTEGER PRIMARY KEY ," + CONTACT_NAME
            + " TEXT," + ")";
    db.execSQL(CREATE_CONTACT_TABLE);
} 
```

调用类

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    db = new DatabaseHelper(this); // instantiation of database helper
    initializerMethod();
    reminder=new Reminder_Master();
    contact=new Contact_Details();
    Log.d("Main Acitivity", "Message");
    btnSave.setOnClickListener(saveHandler);
    } 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T17:38:24.577

您在两个创建查询中都遇到了语法错误：

```
+ " INTEGER," + MASTER_TYPE_ID + " INTEGER," + ")"; 
```

和

```
+ " TEXT," + ")"; 
```

这`,`之前`)`不应该存在。

您应该检查过 logcat，因为此类错误以抛出和记录异常结束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T17:51:18.853

仅仅创建`DatabaseHelper`是不够的。你必须打电话`getReadableDatabase()`或`getWriteableDatabase()`。确保在后台线程上执行此操作，因为您不想在主应用程序线程上执行磁盘 I/O。

# c# - 如果客户端和服务器在不同的机器上，则无法在 NamedPipes 中模拟权限

> ID：15865513
> 
> 赞同：1
> 
> 时间：2013-04-07T17:34:44.093
> 
> 标签：c#, .net, impersonation, named-pipes

我得到了 UnknownErrorException，命名管道的错误代码为 1346，代码如下（注意：客户端和服务器在不同的机器上）

服务器代码：

```
public static void ReadFile()
{
    string contents = File.ReadAllText(@"d:\123.txt");   <-- exception
}

public static void Main()
{    
    var pipe = new NamedPipeServerStream("testpipe", PipeDirection.InOut);
    while (true)
    {
        pipe.WaitForConnection();
        pipe.RunAsClient(ReadFile);
    }
} 
```

客户代码

```
 NamedPipeClientStream pipeClient =
                new NamedPipeClientStream("\\jachang-w1", "testpipe",
                    PipeDirection.InOut, PipeOptions.None,
                    TokenImpersonationLevel.Impersonation);
 pipeClient.Connect(); 
```

我从谷歌搜索了信息，发现错误是“ERROR_BAD_IMPERSONATION_LEVEL，没有提供所需的模拟级别，或者提供的模拟级别无效”

但我已经在客户端设置了 TokenImpersonationLevel.Impersonation，所以服务器应该可以访问它。有人能告诉我这是怎么回事吗？我该怎么办？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T20:34:02.807

为了让服务器进程以令牌模拟级别模拟客户端`Impersonate`，它自己的进程标识必须具有安全权限`SeImpersonatePrivilege`，并且必须启用此权限。

即使客户端和服务器帐户身份是相同的域帐户也是如此。

我猜您正在测试的域帐户没有此权限，或者没有启用它。当您调用时`RunAsClient`，将创建一个线程令牌，但这不会被授予请求的模拟级别，因为该进程缺乏所需的特权：该级别将“降级”到`Identification`。然后，当进行调用时`ReadAllText`，在此方法的实现中的某处，Windows 安全 API 将用于根据文件的访问控制列表检查线程令牌。会发现令牌没有成功读取文件所需的模拟级别，并且会引发您看到的错误。

为了解决这个问题，您必须找到某种方法来确保您的服务器进程以具有所需权限的身份运行。

# assembly - MIPS 中的平方数

> ID：15865516
> 
> 赞同：-2
> 
> 时间：2013-04-07T17:35:02.833
> 
> 标签：assembly, mips, mars-simulator

我想在 .asm 中创建一个子例程，可以查看终端中给出的数字是否是 2 的平方。

即：我选择数字 5，是 2^x = 5？我的子程序将进行几个除法来检查除法的其余部分是 0 还是 1，这将告诉我 5 是否是 2 的平方。

例如，在 CI 中写了这段代码：

```
 int square(int val){

        while (((val % 2) == 0) && val > 1)
            val = val/2;

        if(val == 1)
            return 1;

        else
            return 0;
    } 
```

组装中的等价物是什么？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-04-08T01:09:30.063

鉴于您没有为 asm 指定特定的编译器，我将向您发布一个 asm51 编译器的示例，用于 intel uC 8051：

```
 org 00H            ;start directive
       VAL equ R2         ;assuming that value of interest is in R2 register      
       COUNTER equ R3   

       mov COUNTER,#8D    ;initialise the counter
       mov A,VAL          ;store in the accumulator 
                          ;the value you want to check if is power of two 
LOOPi: jb Acc,7,NEXT      ;if bit 7 of value is 1 jump to NEXT tag
LOOPj: rl A               ;rotate bit 7 of acumulator to left
       djnz COUNTER,LOOPi ;decrease COUNTER and check another bit if counter != 0
       jmp FINISH         ;jump to finish if counter == 0

NEXT:  inc COUNTER        
       jmp LOOPj

FINISH:cjne COUNTER,#1D,SOME      ;if counter == 1 then value is power of 2     
       ;;;;;;here you do whatever you have to do if is power of two
SOME:
       ;;;;;;here you do whatever you have to do if it is not power of two 
```

基本上我在这里做的是检查我的 8 位中只有一个 1 的情况，如果是这样的话，我有两个的幂：

**记住：**

```
0000 0001 = 1 = power(2,0)
0000 0010 = 2 = power(2,1)
0000 0100 = 4 = power(2,2)
0000 1000 = 8 = power(2,3)
0001 0000 = 16 = power(2,4)
0010 0010 = 32 = power(2,5)
0100 0010 = 64 = power(2,6)
1000 0000 = 128 = power(2,7) 
```

您可能已经注意到，此示例仅限于 2 的 7 次方，但对于其他体系结构而言，由于寄存器的大小不同，在这种特殊情况下，8051 寄存器只有 1 个字节。希望能帮助到你。干杯

# html - CSS背景配置

> ID：15865518
> 
> 赞同：0
> 
> 时间：2013-04-07T17:35:06.840
> 
> 标签：html, css

这是图像：

![图片](https://i.stack.imgur.com/ZNAZm.png)

我的代码：

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <title>FLoung</title>
        <meta charset="utf-8">      
        <style>
            body {
                background-color: #cfcfcf;
                font-family:"Trebuchet MS", Arial, Helvetica, sans-serif;
                font-size:12px;
                color:#666666;
                text-decoration: none; 
            }

            #wrapper {
                width: 700px;
                margin: auto;
                padding: 5px;
                margin-top: 75px;               
            }

        </style>    

    </head>

    <body>
        <div id="wrapper">

            Test

        </div>      
    </body>
</html> 
```

我将如何做第二个深色分层背景？上半部分是浅灰色的，下半部分是黑色的怎么办？

我会创建一个带有 z-index 的新 div 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T17:42:23.137

您可以将包装器拆分`div`为具有不同背景颜色的两个 div

[这里的](http://jsfiddle.net/wdjfH/)例子

# php - MySQL JSON 编码数据

> ID：15865519
> 
> 赞同：0
> 
> 时间：2013-04-07T17:35:13.637
> 
> 标签：php, javascript, mysql, json, mysqli

所以，我有这个 PHP 文件，它将数据作为 JSON 回显：

这是这里的PHP：

```
// Recieved the user id:
$userId = $_POST['userId'];

// Create connection
$con = mysqli_connect("123.com", "123", "123", "123", "1234");

// Check connection
if (mysqli_connect_errno($con)) {
    echo "Failed to connect to database " . mysqli_connect_error();
}

// Work with the database to grab user statistics..
$getQuizMode      = "SELECT `QuizModeScore` FROM `userstats` WHERE UserId = $userId";
$getChallengeMode = "SELECT `ChallengeModeScore` FROM `userstats` WHERE UserId = $userId";

$quizModeData      = mysqli_query($con, $getQuizMode);
$challengeModeData = mysqli_query($con, $getChallengeMode);

// Build the response
$arr = array('Quiz' => $quizModeData, 'Challenge' => $challengeModeData);

// echo the json back:
echo json_encode($arr); 
```

现在这是我的客户端 javascript：

```
var variableToSend = "109607962907537440488";

$.post('manageUserStats.php', {userId: variableToSend}, function(data){
    console.log("Got these user stats: ", data);
}); 
```

当我看到控制台时，我看到它已记录：

```
Got these user stats:  {"Quiz":{"current_field":null,"field_count":null,"lengths":null,"num_rows":null,"type":null},"Challenge":{"current_field":null,"field_count":null,"lengths":null,"num_rows":null,"type":null}} 
```

但是，我想获取此处显示的数据：

![东西](https://i.stack.imgur.com/zFxtP.png)

我究竟做错了什么？为什么我不能只得到这两个数字？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T17:56:01.163

要获得您的工作，请使用：

```
$getQuiz = "SELECT QuizModeScore, ChallengeModeScore FROM userstats WHERE UserId = $userId";

$res = mysqli_query($con, $getQuiz);
$row = mysqli_fetch_assoc($res);
$quizModeData = $row['QuizModeScore'];
$challengeModeData = $row['ChallengeModeScore']; 
```

代替：

```
$getQuizMode      = "SELECT `QuizModeScore` FROM `userstats` WHERE UserId = $userId";
$getChallengeMode = "SELECT `ChallengeModeScore` FROM `userstats` WHERE UserId = $userId";

$quizModeData      = mysqli_query($con, $getQuizMode);
$challengeModeData = mysqli_query($con, $getChallengeMode); 
```

此外，您应该`$_POST['userId']`在查询中使用它之前进行验证。我建议使用 PDO，因为当你参数化 thogh 时，mysqli 很难工作。

**编辑**

要用作 PDO，请查看如何[创建 PDO 对象](http://www.php.net/manual/en/pdo.construct.php)，然后使用以下假设这`$pdo`是您用于构造的变量的名称`PDO`。

```
$query = "SELECT QuizModeScore, ChallengeModeScore FROM userstats WHERE UserId = ?";
$st = $pdo->prepare($query);
$st->execute(array($userId));
$row = $st->fetch(PDO::FETCH_ASSOC);
$quizModeData = $row['QuizModeScore'];
$challengeModeData = $row['ChallengeModeScore']; 
```

# java - 使用来自文本文件的输入在 java 中构建树

> ID：15865522
> 
> 赞同：2
> 
> 时间：2013-04-07T17:35:29.783
> 
> 标签：java, file-io, tree

我正在尝试使用文件中的数据构建任意大小的树。在文件中，每个节点都是它自己的行，分支由某些关键字分隔。目前，我正在将文件读入列表，逐项读取，并寻找关键字来构建分支。在我开始第一个分支后，我很难弄清楚如何继续前进。以下是我的树类和测试输入文件。我意识到测试输入可能被认为对于测试来说太大了，但实际的输入会有很多很多模型。最终目标是让这棵树代表哈雷戴维森自行车系列，并在每辆自行车完全建成后提供所有可用选项。例如，分支的一个部分如下所示：

`Harley(root) -> Model Line -> Model 1 -> color -> c1`

对于每个分支的所有其他关键字，依此类推。我的问题是我是否朝着正确的方向前进`populate()`。我能想到的唯一方法是有一个大型`if...else if...`结构来连续检查每个关键字，每个关键字都有一个循环`if...else`来填充该关键字节点的子节点。即使我这样做了，我也不知道如何跳起来做下一个分支，而且我知道这是一种非常低效的制作树的方法。有什么建议吗？谢谢你。

树.java

```
import java.io.BufferedReader;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.List;

public class Tree
{
    private Node root;

    public Tree(String rootData) 
    {
        root = new Node();
        root.data = rootData;
        root.children = new ArrayList<Node>();
    }

    public static class Node
    {
        private String data;
        private Node parent;
        private List<Node> children;

        public Node(){}

        public Node(String newNodeData, Node newNodeParent)
        {
            data = newNodeData;
            parent = newNodeParent;
        }
    }

    public void populate() throws IOException
    {
        //keep track of nodes for jumping up branches quickly
        Node curNode = this.root;
        Node curModelLine;
        Node curModel;

        //get the data
        List<String> fileData = getData();
        int nextDataLine = 0;
        while (!fileData.isEmpty())
        {
            String curLine = fileData.get(nextDataLine);
            if (curLine == "model line")
            {
                curModelLine = new Node(fileData.get(nextDataLine+1), this.root);
                this.root.children.add(curModelLine);    
            }

            /*Not sure where to go from here*/

            nextDataLine++;
        }
    }

    public static List<String> getData() throws IOException
    {
        List<String> filedata = new ArrayList<String>();
        try
        {
            FileInputStream in = new FileInputStream("data.txt");
            BufferedReader br = new BufferedReader(new InputStreamReader(in));
            String line;
            while((line = br.readLine())!= null)
            {
                filedata.add(line);
            }
            br.close();
        }catch(Exception e)
        {
            System.out.println(e);
        }
        return filedata;
    }
} 
```

数据.txt：

```
harley
model line
linename1
modelname1
color
c1
c2
engine size
es1
es2
windsheild
w1
w2
lights
l1
l2
tire size
t1
t2
radio
r1
r2
abs
a1
a2
alarm
a1
a2
seat
s1
s2
bags
b1
b2
modelname2
color
c1
c2
engine size
es1
es2
windsheild
w1
w2
lights
l1
l2
tire size
t1
t2
radio
r1
r2
abs
a1
a2
alarm
a1
a2
seat
s1
s2
bags
b1
b2
linename2
modelname1
color
c1
c2
engine size
es1
es2
windsheild
w1
w2
lights
l1
l2
tire size
t1
t2
radio
r1
r2
abs
a1
a2
alarm
a1
a2
seat
s1
s2
bags
b1
b2
modelname2
color
c1
c2
engine size
es1
es2
windsheild
w1
w2
lights
l1
l2
tire size
t1
t2
radio
r1
r2
abs
a1
a2
alarm
a1
a2
seat
s1
s2
bags
b1
b2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T17:45:00.073

我不确定这是否会像您期望的那样：

```
 if (curLine == "model line")
      {
          curModelLine = new Node(fileData.get(nextDataLine+1), this.root);
          this.root.children.add(curModelLine);    
      } 
```

使用此`if`语句，您正在检查参考值；不是字符串值。要比较字符串，您应该使用`equals()`运算符。它应该看起来更像这样：

```
 if (curLine.equals("model line"))
    {
        curModelLine = new Node(fileData.get(nextDataLine+1), this.root);
        this.root.children.add(curModelLine);    
    } 
```

**你的方法**

对我来说，我会有一个嵌套循环。结构将是这样的：

```
while(not at the end of the file) {
    aLine := the next line.
    while(!aLine.equals(the end of a branch delimiter) {
        print out the next item.
        print out a "->"
    }
    print out a new line character.
} 
```

注意这是伪代码。我们不是一个代码编写服务，但很明显你付出了努力，所以我想我只是对你的代码发表意见。

# asp.net-mvc-4 - 如何使用 Oauth 在 asp.net mvc 4 中检索 Twitter、linkedIn 个人资料数据

> ID：15865523
> 
> 赞同：1
> 
> 时间：2013-04-07T17:35:31.207
> 
> 标签：asp.net-mvc-4, oauth-2.0, linkedin, twitter-oauth

我是 OAuth 的新手。我想检索 Twitter、LinkedIn 个人资料数据，尤其是电子邮件，但我找不到任何有用的帖子。

```
AuthenticationResult result = OAuthWebSecurity.VerifyAuthentication(Url.Action("ExternalLoginCallback", new { ReturnUrl = returnUrl })); 
```

**ExtraData**字段包含：

**Facebook：**用户名（电子邮件地址）、姓名、链接（指向其 Facebook 页面的 URL）、性别、生日

**Twitter：**名称、位置、描述、网址（Twitter 页面的 URL）

**LinkedIn：**名称、标题、摘要、行业

提到只有 Facebook 提供电子邮件，但 Twitter 和 LinkedIn 都没有，如何检索电子邮件 ID。

# java - 为什么这个程序会导致内存泄漏？

> ID：15865524
> 
> 赞同：0
> 
> 时间：2013-04-07T17:35:33.830
> 
> 标签：java

好吧，我正在经历 Java 中的内存泄漏。

我在下面看到了这个简单的程序，作者说使用下面的程序可能会发生内存泄漏

但是请告诉我这个程序有什么问题以及为什么它会产生内存泄漏？

```
package com.code.revisited.memoryleaks;

public class StackTest {

    public static void main(String[] args) {
        Stack<Integer> s = new Stack<>(10000);
        for (int i = 0; i < 10000; i++) {
            s.push(i);
        }

        while (!s.isEmpty()) {
            s.pop();
        }

        while(true){
            //do something
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T17:37:21.077

`pop`方法是`Integer`从`Stack`. 但是 Integer 对象没有被取消引用；这意味着它们会占用内存。

**更新**：

这一点在`Item 6 of Effective Java`：**消除过时的对象引用中进行了解释**

`If a stack grows and then shrinks, the objects that were popped off the stack will not be garbage collected, even if the program using the stack has no more references to them. This is because the stack maintains obsolete references to these objects. An obsolete reference is simply a reference that will never be dereferenced again.`

这类问题的解决方法很简单：在引用过时后将引用清空或从 Stack 中删除对象。在给定的情况下，pop 方法将减少顶部引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T17:52:50.277

这实际上取决于堆栈的实现方式。

如果这是 Java 的堆栈 (java.util.Stack)，那么它不应该发生。底层数组是动态的，可能有未使用的插槽，但在弹出项目时它们被显式设置为 null。

我猜您示例中的堆栈不是标准堆栈；它可能是示例的一部分，它说明了这种内存泄漏。例如，如果 pop() 方法减少了底层数组索引，但没有将数组项设置为 null，那么上面的代码应该在堆中留下 1000 个活动对象，尽管程序可能不再需要它们。

- 编辑 -

您是否从[http://coderevisited.com/memory-leaks-in-java/](http://coderevisited.com/memory-leaks-in-java/)中获取了示例？如果是这样，请注意它还包括一个堆栈实现，正如我所怀疑的那样。

# c# - 如何在 C# 中创建带有插入语句的过程？

> ID：15865525
> 
> 赞同：-1
> 
> 时间：2013-04-07T17:35:36.470
> 
> 标签：c#, stored-procedures, sql-server-2008-r2

我已经构建了一个 C# 应用程序，并且正在使用 SQL Server 2008 R2。

如何创建一个名为`AddCustomer`? 的过程，我的插入语句和数据类型应包含`Nvarchar(50)`, `Varchar(10)`, `int`, `Datetime`.

我只想要 C# 代码。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T18:20:02.717

我会尝试使用这样的东西 - 传入正确的值和数据类型，使用 ADO.NET 和参数化查询，明确指定参数类型等。

```
public void AddCustomer(string companyName, string telephone, DateTime firstOrderDate)
{
   // get your connection string
   string connectionString = ConfigurationManager.ConnectionStrings["YourConnString"].ConnectionString;

   // define your query - using parameters!
   string insertStmt = "INSERT INTO dbo.Customer(CompanyName, Telephone, DateOfFirstOrder) VALUES (@Company, @Phone, @OrderDate)";

   // establish SQL connection and command
   using(SqlConnection conn = new SqlConnection(connectionString))
   using (SqlCommand cmd = new SqlCommand(insertStmt, conn))
   {
      // define parameters and set values
      cmd.Parameters.Add("@Company", SqlDbType.NVarChar, 50).Value = companyName;
      cmd.Parameters.Add("@Phone", SqlDbType.VarChar, 10).Value = telephone;
      cmd.Parameters.Add("@OrderDate", SqlDbType.DateTime).Value = firstOrderDate;

      // open connection, insert data, close connection
      conn.Open();
      cmd.ExecuteNonQuery();
      conn.Close();
   }
} 
```

# ruby-on-rails - 无法使用 find_for_facebook_oauth 复制 NilClass - oauth 有什么问题？

> ID：15865532
> 
> 赞同：1
> 
> 时间：2013-04-07T17:36:15.633
> 
> 标签：ruby-on-rails, devise, facebook-oauth

我稍微重写了该`find_for_facebook_oauth`方法，以允许我的用户将他们的 facebook 帐户合并到他们当前的帐户。我还修改了创建新参与者（链接到用户）的方法。

`can't dup NilClass`但是，当有人使用该方法时，我很少（并非总是！）收到错误。这是方法：

```
def self.find_for_facebook_oauth(auth, token, signed_in_resource=nil, facebook_referal_id)

user = User.where(:provider => auth.provider, :uid => auth.uid.to_s).first

#new user
if !user and !userbymail
logger.info "User not found. Creating new user in user.rb"
user = User.new(
       provider:auth.provider,
       uid:auth.uid,
       email:auth.info.email,
       password:Devise.friendly_token[0,20]
       )
logger.info "Received FB information"
user.skip_confirmation!   #to skip the email
logger.info "Skipped the mail"
user.accepted_tos = true

#Only add participant if new user is saved
logger.info "Now saving user"
if user.save
  logger.info "User saved"
#name:auth.extra.raw_info.name,
  @participant = Participant.new
  @participant.user_id = user.id
  @participant.lastname = "Pan"
  @participant.dob = Time.now - 18.years
  @participant.firstname = auth.extra.raw_info.first_name || "Secret"
  @participant.lastname = auth.extra.raw_info.last_name || "Secret"
  if auth.extra.raw_info.gender == "male"
    @participant.gender = 2
  elsif auth.extra.raw_info.gender == "female"
    @participant.gender = 1
  else
    @participant.gender = 4
  end
  @participant.dob = Date.strptime(auth["extra"]["raw_info"]["birthday"],'%m/%d/%Y') || Time.now - 18.years
  @participant.nationality = "AQ" 
```

我不明白问题可能发生在哪里。从 facebook 传递过来的东西可能是空的吗？我查看了错误，但我无法找出问题所在。

```
app web.1     - - (facebook) Callback phase initiated.
app web.1     - - Processing by Users::OmniauthCallbacksController#facebook as HTML
app web.1     - -   Parameters: {"state"=>"f357f10d5f136b28732465968ee29451af9406391ecd1144", "code"=>"AQAUePnXS7qggpjUE0gNPuPHODFOcfd6vo2zJvl4KCCrH8Mp2j4_6PS5t71R_PeHCJaFpM_ERjb9QWHqUkP6OB7WPI22Q16y1YwfwKy7IHxlz5q56DoCINMzh3MuYgKTJRFjs3XAKOo-Ncf7jigmlp1GADlBW1aB-F-5oUGpNQw1GcFVyPAnOwXD3B3wr82FO0om_z7uhXDtEDf2_RP14Vo5"}
app web.1     - - Geocoder call
app web.1     - - Italy
app web.1     - -   User Load (3.3ms)  SELECT "users".* FROM "users" WHERE "users"."provider" = 'facebook' AND "users"."uid" = '1503444170' LIMIT 1
app web.1     - -   User Load (28.5ms)  SELECT "users".* FROM "users" WHERE "users"."email" = 'app+4ss3t1sal5.1cppf6a.d25032a0cdac6d19ac26ad2c44e14cb@proxymail.facebook.com' LIMIT 1
app web.1     - - User not found. Creating new user in    user.rb
app web.1     - -    (44.0ms)  BEGIN
app web.1     - -   User Exists (2.0ms)  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'app+4ss3t1sal5.1cppf6a.d25089e10cdac6d19ac26ad2c44e14cb@proxymail.facebook.com' LIMIT 1
heroku nginx  - - 2.230.67.191 - - [06/Apr/2013:11:16:42 +0000] "GET /users/auth/facebook/callback?state=f357f10d5f136b28732465968ee29451af9406391ecd1144&code=AQAUePnXS7qggpjUE0gNPuPHODFOcfd6vo2zJvl4KCCrH8Mp2j4_6PS5t71R_PeHCJaFpM_ERjb9QWHqUkP6OB7WPI22Q16y1YwfwKy7IHxlz5q56DoCINMzh3MuYgKTJRFjs3XAKOo-Ncf7jigmlp1GADlBW1aB-F-5oUGpNQw1GcFVyPAnOwXD3B3wr82FO0om_z7uhXDtEDf2_RP14Vo5 HTTP/1.1" 500 763 "-" "Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.43 Safari/537.31" www.thestudentranking.com
heroku router - - at=info method=GET path=/users/auth/facebook/callback?state=f357f10d5f136b28732465968ee29451af9406391ecd1144&code=AQAUePnXS7qggpjUE0gNPuPHODFOcfd6vo2zJvl4KCCrH8Mp2j4_6PS5t71R_PeHCJaFpM_ERjb9QWHqUkP6OB7WPI22Q16y1YwfwKy7IHxlz5q56DoCINMzh3MuYgKTJRFjs3XAKOo-Ncf7jigmlp1GADlBW1aB-F-5oUGpNQw1GcFVyPAnOwXD3B3wr82FO0om_z7uhXDtEDf2_RP14Vo5 host=www.thestudentranking.com fwd="2.230.67.191" dyno=web.1 connect=3ms service=705ms status=500 bytes=763
app web.1     - -   SQL (41.7ms)  INSERT INTO "users" ("accepted_tos", "confirmation_sent_at", "confirmation_token", "confirmed_at", "created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "faked", "last_sign_in_at", "last_sign_in_ip", "provider", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "uid", "unconfirmed_email", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20) RETURNING "id"  [["accepted_tos", true], ["confirmation_sent_at", nil], ["confirmation_token", nil], ["confirmed_at", Sat, 06 Apr     2013 13:16:42 CEST +02:00], ["created_at", Sat, 06 Apr 2013 13:16:42 CEST +02:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "app+4ss3t1sal5.1cppf6a.d25089e10cdac6d19ac26ad2c44e14cb@proxymail.facebook.com"], ["encrypted_password", "$2a$10$xjK8Y0zpkdE/PZnT4cSQ5uuJQ/KaPfkhbxFtvYXJSyAAZWV5emy4K"], ["faked", nil], ["last_sign_in_at", nil], ["last_sign_in_ip", ni
app web.1     - - l], ["provider", "facebook"], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["uid", "1503444170"], ["unconfirmed_email", nil], ["updated_at", Sat, 06 Apr 2013 13:16:42 CEST +02:00]]
app web.1     - -    (12.1ms)  COMMIT
app web.1     - - Completed 500 Internal Server Error in 329ms
app web.1     - -
app web.1     - - TypeError (can't dup NilClass):  app/models/user.rb:91:in `find_for_facebook_oauth'
    app/controllers/users/omniauth_callbacks_controller.rb:12:in `facebook' EXCEPT
app web.1     - -
app web.1     - -
app web.2     - - Started GET "/" for 2.230.67.191 at 2013-04-06 11:16:45 +0000 
```

关于错误的线索以及如何避免/捕捉它会很棒。谢谢你。

# iphone - 在 Modal 中滚动使 Safari 上的背景滚动

> ID：15865534
> 
> 赞同：5
> 
> 时间：2013-04-07T17:36:29.520
> 
> 标签：iphone, ios, scroll, modal-dialog, vertical-scrolling

我需要一些帮助来解决一件烦人的事情。我有一个模态弹出窗口，里面有垂直滚动条。在模态框内滚动时，有时背景会滚动。我试图添加

```
body{
position:relative;
overflow: hidden;
} 
```

这在大多数浏览器上都可以正常工作，但我 iPhone 的 Safari 仍然可以滚动！

请帮我找到解决方法！

问候克里斯蒂安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T17:59:40.947

```
$('body').css('overflow','hidden');
$('body').css('position','fixed'); 
```

为我做了。

# java - 如何屏蔽数据库？

> ID：15865539
> 
> 赞同：1
> 
> 时间：2013-04-07T17:36:49.887
> 
> 标签：java, database, api, architecture, data-access-layer

我必须提供对我的语义的访问。目前，它是一个 RDBMS，但稍后我可能会使用其他非 RDBMS 数据源（图形、hadoop 等）。

我的语义消费者位于公司域/内部网内，但在远程服务器上运行。此外，由于我们处于设计阶段，尚不清楚他们将使用什么技术来实现其业务逻辑（Java/C 或其他）。我认为向我们的 SW 的外部模块提供通过 JDBC/ODBC 对我的数据模型的直接访问是一个坏主意（因为我不想只致力于 RDBMS）。

计划是创建一个 API 来访问我的语义。API 基本上是 CRUD。当前候选者是使用 Spring 的 REST API。

我担心通过 REST 的访问可能会很慢。该技术最好是基于Java的。但是，也欢迎 C-base 和其他。

我想知道：我应该考虑哪些 REST 替代方案？除了访问速度之外，唯一的要求是它必须易于实施和维护。

我会很感激你的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T17:45:20.000

对于公司防火墙后面的内部调用，RMI 将允许创建具有多种接受和返回复杂数据结构的方法的任意复杂 API。CORBA 也可以。这些技术是 JavaSE 的一部分。

从较新的技术来看，[Google 协议缓冲区](http://code.google.com/p/protobuf/)可能不适合这项任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T18:01:24.867

如果你想从你的数据模型中屏蔽你的领域模型，你可以在两者之间放置一个抽象层，即接口。为什么你认为你需要一个远程边界？通过 REST 提供可远程访问的 API 与您消除域和数据模型之间耦合的担忧完全正交。

无论如何，您的 API 的使用者将始终不受您的私有域模型的影响。如果您正在构建一个 java API，您将公开接口，并且使用远程和正交 REST 接口，您将公开 HTTP 资源。

# c++ - C++ 在调整大小的动态数组中填充新元素

> ID：15865542
> 
> 赞同：0
> 
> 时间：2013-04-07T17:37:24.607
> 
> 标签：c++, arrays, pointers, dynamic, resize

在翻阅我的作业时，我遇到了一个我无法弄清楚的错误。我已经阅读并玩过它，但我无法弄清楚我做错了什么。

用户输入一个`int`指针数组，然后代码应该是数组大小的两倍，并用`0`. 问题是新元素不是`0`. 我做错了什么，这些数字是什么，地址是什么？

输出：

```
Enter array size: 3
Enter Element 0: 10
Enter Element 1: 11
Enter Element 2: 12

Entered Array:
Element 0/3 is 10
Element 1/3 is 11
Element 2/3 is 12

Resized Array:
Element 0/6 is 10
Element 1/6 is 11
Element 2/6 is 12
Element 3/6 is -33686019
Element 4/6 is 1196933248
Element 5/6 is 201354124

Press any key to continue . . . 
```

代码：

```
#include <iostream>
#include <string>

using namespace std;

int *createArray(int size)
{
    int *newArray;

    newArray = new int[size];

    for( int i = 0; i < size; i++){
        cout << "Enter Element " << i << ": ";
        cin >> newArray[i];
    }
    return newArray;
}

int *dblArraySize ( int *myArray, int& size)
{
    int *newArray;

    newArray = new int[size*2];

    for (int i = 0; i < size; i++)
        newArray[i] = myArray[i];

    for (int i = size; i < size*2; i++){
        newArray[i] = 0;
    }

    size = size*2;
    return newArray;         
}

void displayArray(int *anArray, int size, string msg)
{   
    cout <<endl << endl << msg;
    for (int i = 0; i<size;i++){
        cout << endl << "Element " << i << "/" << size << " is " << anArray[i];
    }
}

int main ()
{
    int size,
        *mainArray;

    cout << "Enter array size: ";
    cin >> size;
    mainArray = createArray(size);

    displayArray(mainArray,size, "Entered Array:");

    dblArraySize(mainArray,size);

    displayArray(mainArray,size, "Resized Array:");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T17:40:23.827

问题是您从 dblArraySize 返回 newArray，但从不使用它。你永远不会修改 mainArray

```
 dblArraySize(mainArray,size); 
```

应该：

```
 mainArray = dblArraySize(mainArray,size); 
```

另请注意：您忘记释放原始数组的内存。

# r - R：处理有时会导致 R 会话崩溃的函数？

> ID：15865552
> 
> 赞同：2
> 
> 时间：2013-04-07T17:38:23.150
> 
> 标签：r, exception, crash

有一个 R 函数（我们称之为 MyFunction ）有时会导致 R 会话崩溃，但大多数时候它不会。必须以顺序方式将此功能应用于大量对象。

```
for(i in 1:nrow(objects))
{
     result[i] <- MyFunction(objects[i]);
} 
```

我来自 C# 背景——其中函数很少会导致“会话”崩溃，程序员通常会在 try-catch 块中包围这样的函数调用。但是，在 R 中，我看到**一些**函数只会使会话崩溃，而使用 tryCatch 并没有帮助，因为该函数不会导致异常，而是会导致完整的会话崩溃；-)

只是想知道“捕捉”崩溃的最佳方法是什么。我正在考虑编写一个 Python 脚本，该脚本从 Python 调用 R 函数（通过其中一个 R-Python 连接器）并在 Python 中捕获 R 崩溃。那行得通吗？
有什么建议吗？

干杯！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T17:43:04.440

使用`mcparallel`并行包中的函数在分叉进程中运行该函数。这样，如果 R 崩溃了，只有子进程崩溃，并且向主进程返回错误。如果您想将此函数应用于大量对象并将结果收集到列表中，请使用`mclapply`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T17:49:53.077

您好，根据我的经验，这种行为非常罕见。您可能不知道有一个调试器可以帮助您逐步完成功能。

```
install.packages('debug') #install the debug package
library(debug)
mtrace(myFunctionToBeDebuged) #this function will start the debuger
mtrace(myFunctionToBeDebuged, FALSE) #to stop the function to be traced 
```

注意：当您在调试器中时，您是否想退出它`qqq()`

# mysql - 创建查询以使用外键将数据插入 MySQL

> ID：15865554
> 
> 赞同：2
> 
> 时间：2013-04-07T17:38:26.840
> 
> 标签：mysql, sql, sql-insert

我是数据库的新手，我正在尝试将数据插入下表：

> 表开始

表 = 用户

列 = id ，用户名，密码

表 = users_info

列 = id , e-mail , address , logged , portrait , user_id

> 表端

users_info.user_id 是链接到 users.id 的外键。

我想构建一个查询，该查询将根据来自（users 表）的信息将数据插入（users_info 表）......文字即：

```
Insert portrait into users_info where user_id = users.id and username = JohnDoe 
```

实现这一点的语法是什么？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T18:03:38.150

如果您要做的是更新`users_info`表中的数据，那么您必须使用 UPDATE 命令。

```
UPDATE users_info a SET a.portrait = 'value1', a.logged = 'value2', a.address = 'value3', a.email = 'value4' where a.user_id = (SELECT DISTINCT(id) FROM users b WHERE b.username = 'JohnDoe') 
```

[http://www.w3schools.com/sql/](http://www.w3schools.com/sql/)上的 SQL 命令基础知识

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T17:50:01.123

试试这个：

```
Insert portrait into users_info 
(id, email) VALUES ( select user.id, 'johndoe@domain.com' )
where user_id = users.id and username = 'JohnDoe'
) 
```

# html - 我如何为 Magento 上的主页编辑 CSS？

> ID：15865555
> 
> 赞同：0
> 
> 时间：2013-04-07T17:38:27.807
> 
> 标签：html, css, magento

当使用从另一个站点购买的模板时，默认情况下主页看起来不错，而其他页面的标题稍微“关闭”。当我询问修复页面时，我得到了一些修复其他页面的 .css 代码，但现在主页已关闭（似乎很明显）。

这是网站： http: [//nyctodesign.com/gulfsales/index.php/](http://nyctodesign.com/gulfsales/index.php/)

如您所见，除主页外，每个页面的标题都是正确的。我查找了如何仅编辑一页的 .css，并获得了一个教程，该教程建议了一个新文件，例如“home-page.css”以及我的正确代码，以及自定义设计 xml 中的以下代码片段：

```
<reference name="head"><action method="addCss">
<stylesheet>../theme300/css/home-page.css</stylesheet>
<params>media="screen"</params></action></reference> 
```

我试过这段代码，网页没有变化。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T19:37:12.113

好的，我最终通过将相反的 CSS 编码为另一个文件来修复它 - 它在标题上提供了 31 像素的边距，所以当我包含新的 home-page.css 文件时，我将这一行改为 0 像素。

上面使用的代码有效，我只是在那里错误地输入了相对 URL - 现在它使用了我仅在主页上提供的代码，并覆盖了常规的 31 像素边距。

# java - 立即获得命令提示符输出？

> ID：15865556
> 
> 赞同：3
> 
> 时间：2013-04-07T17:38:30.230
> 
> 标签：java, cmd, command-prompt, output

可能是一个误导性的标题，但感谢其他问题的人，我的程序有些工作，但现在不知道该怎么做。

这是我运行命令提示符命令并返回输出的方法

```
public static String cmdExec(String cmdLine) {
    String line;
    String output = "";
    try {
        Process p = Runtime.getRuntime().exec(cmdLine);
        BufferedReader input = new BufferedReader(new InputStreamReader(p.getInputStream()));
        while ((line = input.readLine()) != null) {
            output += (line + '\n');
        }            
        input.close();           
        }
    catch (Exception ex) {
        ex.printStackTrace();
    }

    return output;
} 
```

它按照我希望的方式工作，但现在当我运行此方法时，它将等到一切都完成，然后返回输出，这不是我想要的。

我制作了一个使用 cmdExec 方法的 ping 泛洪方法。这是我如何调用 cmdExec()

```
String[] input = ipTextField.getText().split(":");

    if(input.length == 2) {
        System.out.println(cmdExec("cmd /c ping " + input[0] + " -t -n " + Integer.parseInt(input[1]))); 
```

因此，例如，如果我在程序中输入“127.0.0.1:3”，它将向 localhost 发送 3 个数据包。现在的问题是，不是将我从命令提示符 1 逐个打印出来的行作为输出，而是等到所有 3 个数据包都发送完毕，然后打印输出的完整输出。

如果我在命令提示符下键入“ping 127.0.0.1 -t -n 3”，它将逐个打印回复，而不是一次打印，那么我将如何在我的程序中做同样的事情呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T17:44:52.147

代替

```
while ((line = input.readLine()) != null) {
            output += (line + '\n');
        } 
```

要立即将结果输出到命令行，只需在 while 循环内打印

```
 while ((line = input.readLine()) != null) {
         System.out.println(line);               
         output += (line + '\n');
      } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T17:43:31.037

您可以通过以下方式连续打印：

```
while ((line = input.readLine()) != null) {
    System.out.println(line);
    output += (line + '\n');
} 
```

（以下内容对未来的观众仍然有用，但不是该问题的适用答案。） 只需~~在从输出流中读取之前~~~~插入 a 。`process.waitFor()`此命令会等到进程终止后再继续。然后，您也不必逐行阅读。您可以一次简单地转储缓冲区。~~

要么这样，要么你可以找到一个只出现在最后一行的字符串（例如`Minimum`在 Windows 中）并将 while 条件更改为：

```
while((line == input.readline()).indexOf("Minimum") == -1) 
```

# sql - 计算同一个表中的列

> ID：15865559
> 
> 赞同：0
> 
> 时间：2013-04-07T17:38:36.077
> 
> 标签：sql, database, vba, aggregate-functions, column-count

我一直在尝试在 2007 年访问时开发现金流量表。这在 excel 中使用公式很容易完成，例如

```
= SUM (B6:M6) / CountIF(B6:M6)>0 
```

但是在访问时，我似乎无法解决这个问题。对于我们输入数据的每家公司，我都需要这个。现金流量表应该是这样的（因为我还不能发布图片）：

```
-------------------------------------------------- -------------------------------------------------- ------------
详情 | 一月 | 二月 | 三月 | 四月 | 君 | 七月 | 八月 | 九月 | 十月 | 十一月 | 十二月 | 平均 |
销售---------------------->
薪水-------->
交通----->

```

以及该行中大约 10 个其他项目，所有项目都包含 1 月到 12 月的条目，但是，有时我们需要 6 个月的数据，有时需要全部 12 个月的数据。（想象一个基本的 Excel 表，第一列有项目，接下来的 12-13 列有标题）。

在访问中，我为每个项目制作了以月份为列的表格，例如。tblRcpt--> |rcpt_ID|Jan|Feb|... 以此类推，直到 12 月所有项目。然后它们将被安排并呈现在一个条目表格中，该表格的设计看起来类似于上表，而稍后我将查询并将它们链接在一起以呈现完整的现金流量表。

现在问题来了，我需要对列进行平均（如您在最右边的列中所见），但我只想对已填充的月份进行平均（有时在会计人员输入“0”的地方没有数据），所以我不能只对列求和并除以十二。它必须是动态的，所有功能似乎都以计算和平均 ROW 为中心，而不是 COLUMN。

感谢您对我的包容并阅读本文，我们将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T17:54:46.203

试试这个

```
(Jan + Feb + ... + Dec) /
  ( case when Jan = 0 then 0 else 1 end
  + case when Feb = 0 then 0 else 1 end

  + case when Dec = 0 then 0 else 1 end )
as Avg 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T17:57:03.333

你的表结构应该是：

```
Particulars | Month | Amount
Sales         1       500
Sales         2       1000
Salary        1       80000 
```

...等等。当您没有该月的值时，您可以*不输入行，也可以在 SQL 语句中处理它们（如下所示）：*

```
SELECT Particulars, AVG(Amount) AverageAmount
FROM MyTable
WHERE NULLIF(Amount, 0) IS NOT NULL
GROUP BY Particulars; 
```

# javascript - 将 jquery 与 OO Javascript 一起使用

> ID：15865560
> 
> 赞同：0
> 
> 时间：2013-04-07T17:38:37.097
> 
> 标签：javascript, jquery, oop

我正在尝试创建一个 jquery 弹出脚本 OO 样式。我这样做是因为我想用更多的 jquery/javascript 扩展这段代码，而不会失去监督。我收到的错误是`Object #<HTMLDivElement> has no method 'centerPopup'`，`Resource interpreted as Script but transferred with MIME type text/x-c:` 我是 OO javascript 的新手，但在 OO PHP 方面有相当的经验

```
function popup(){

    var popupStatus = 0;

    $(document).ready(function () {
        $("#button").click(function()
        {
            this.centerPopup();
            this.loadPopup();
        });

        $("#backgroundPopup").click(function()
        {
            this.disablePopup();
        });

        $(document).keypress(function(e)
        {
            if(e.keyCode==27 && popupStatus==1)
            {
                this.disablePopup();
            }
        });

    });

      this.loadPopup = function (){
        if(this.popupStatus==0)
        {
            $("#backgroundPopup").css(
            {
                "opacity": "0.7"
            });
            $("#backgroundPopup").fadeIn("slow");
            $("#popupContact").fadeIn("slow");

        this.popupStatus = 1;
        }
    }

    this.disablePopup = function (){
        if(this.popupStatus==1)
        {
            $("#backgroundPopup").fadeOut("slow");
            $("#popupContact").fadeOut("slow");
            this.popupStatus = 0;
        }
    }

    this.centerPopup = function (){
        var windowWidth = document.documentElement.clientWidth;
        var windowHeight = document.documentElement.clientHeight;
        var popupHeight = $("#popupContact").height();
        var popupWidth = $("#popupContact").width();

        $("#popupContact").css(
        {
            "position": "absolute",
            "top": windowHeight/2-popupHeight/2,
            "left": windowWidth/2-popupWidth/2
        });

        $("#backgroundPopup").css(
        {
            "height": windowHeight
        });
    }
}

var popup = new popup() 
```

```
<!DOCTYPE HTML>

<html>
<head>
<link rel="stylesheet" href="css/popup.css" type="text/css" media="screen" />
<script src="http://jqueryjs.googlecode.com/files/jquery-1.2.6.min.js" type="text/javascript"></script>
<script src="js/popup2.js" type="text/javascript"></script>
</head>
<body>

    <center>
        <div id="button"><input type="submit" value="Popup!" /></div>
    </center>

    <div id="popupContact">
        <a id="popupContactClose">x</a>
    </div>

    <div id="backgroundPopup"></div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T19:30:58.947

```
 $("#button").click(function()
        {
            this.centerPopup();
            this.loadPopup();
        }); 
```

`this`不是你真正想的那样。它不是 的实例`popup`，而是 DOM 元素 ( `#button`)。您可以通过在课程开始时在您的实例上保存引用来解决此问题：

```
function popup(){
    var self = this;
    this.popupStatus = 0; // you should use `this` here

    $(document).ready(function () {
        $("#button").click(function()
        {
            self.centerPopup();
            self.loadPopup();
        });
/* ... snip ... */ 
```

# java - 通过 HttpURLConnection 发送 UTF-8 字符失败

> ID：15865561
> 
> 赞同：6
> 
> 时间：2013-04-07T17:38:40.623
> 
> 标签：java, utf-8, httpurlconnection

我已经在这个星期天度过了半个星期，现在我需要帮助：

我想使用 Java HttpURLConnection 将包含特殊字符 UTF-8 编码的字符串发送到服务器。字符的正确编码失败。

例子：

```
strToSend: ä ù €
strUrlEncoded: %C3%A4+%C3%B9+%E2%82%AC
strReceived:Ã¤ Ã¹ â¬

```

我的代码：

```
 urlConnection = (HttpURLConnection) new URL("http://localhost:8080/NetworkingServer/ServerServlet").openConnection();
        urlConnection.setUseCaches(false);
        urlConnection.setDoOutput(true); // Triggers POST.
        urlConnection.setRequestProperty("accept-charset", "UTF-8");
        urlConnection.setRequestProperty("content-type", "application/x-www-form-urlencoded");

        String strToSend = "ä ù €";
        System.out.println("strToSend: " + strToSend);
        String strUrlEncoded = URLEncoder.encode(strToSend, "UTF-8");
        System.out.println("strUrlEncoded: " + strUrlEncoded);

        OutputStreamWriter writer = new OutputStreamWriter(urlConnection.getOutputStream(), "UTF-8");
        writer.write(String.format("content=%s", strUrlEncoded));
        writer.close(); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-07T17:50:33.290

您需要在`Content-Type`标头中设置编码。

将其设置为“ `application/x-www-form-urlencoded; charset=utf-8`”。目前你只设置`accept-charset`- 这告诉服务器要发回什么。

# jquery - Soundmanger2中的onfinish功能后声音不播放

> ID：15865564
> 
> 赞同：0
> 
> 时间：2013-04-07T17:38:53.860
> 
> 标签：jquery, soundmanager2

我有一个使用 soundmanager 2 播放音乐的功能，当我按下按钮加载下一个声音时，该功能有效，但是当我尝试通过该`onfinish`功能执行此操作时，它不起作用，这意味着当音乐播放完毕时它不起作用t 加载下一个声音我怎样才能让它工作，请参阅下面的代码。

```
function playSong(id) {
//Stop the sound from playing
soundManager.destroySound(mySound);

//If we're under, just go to the end!
if (id < 0)
    id = songs.length - 1;

//If we're over, choose what to do via the repeat flag
if (id >= songs.length)
        id = 0;

//Save some variables
playingSongId = id;
playingSong = songs[playingSongId];
track = playingSong.artist_name + " " + "-" + " " + playingSong.track_name;

//Create the sound and begin playing whenever!
soundManager.createSound({
    id: mySound,
    url: playingSong.track_url,
    multiShotEvents: true,
    autoPlay: true,
    stream: true,
    onplay: function () {
        setPlayingInfo(track);
        setPauseState(false);
        setPlayTime();

    },
    onfinish: function() {
        playNextSong();
        /*//We'll only continue if we're shuffling or repeating if we past the end...
        if (shuffle == false && (playingSongId + 1 >= songs.length) && repeat == false) {
            //No more songs...
            setPlayingInfo();
            setPauseState(false);
            setPlayTime();
            playingSong = null;
            playingSongId = null;
            return;
        }
        else {
            playNextSong();
        }*/
    }, 
```

当下一个声音的标题出现在标题中时，该功能起作用，但歌曲从不播放。最后，当我在声音加载和播放时单击第一个声音链接时，不会加载标题，但是如果我单击按钮加载下一个声音，则会出现标题。请注意，我通过 ajax 加载这些声音，因为这些声音位于远程服务器上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T20:20:08.393

[来自 SoundManager2 的修订历史](http://www.schillmania.com/projects/soundmanager2/doc/download/#revision-history)：

> Adobe 于 2013 年 2 月 26 日发布的 Flash Player 11.6.602.171 引入了 SM2 的默认 Flash 8 (flashVersion: 8) 基于 API 的 JS/Flash 交互的问题，其中从回调等调用的 SM2 方法`onfinish()`不起作用。这主要破坏了用于顺序播放声音、串行加载一系列声音等的方法。（有关更多信息，请参阅[讨论](https://getsatisfaction.com/schillmania/topics/recent_chrome_update_seems_to_have_broken_my_sm2_audio_player)。）
> 
> 请注意，这不会影响`soundManager.setup({ flashVersion: 9})`正在使用的情况；但是，SM2`flashVersion: 8`默认使用。
> 
> 具体来说，Flash 启动的事件（例如声音结束）使 Flash -> JS 调用 SM2 API，随后调用用户指定的事件处理程序。如果用户指定的 SM2`onfinish()`处理程序立即调用类似 play() 的 SM2 方法，该方法进行 JS -> Flash 调用，则此调用要么静默失败，要么被阻塞。其他使用类似回调模式的 JS + Flash 库也可能会受到影响，如果它们的 SWF 是针对 Flash 8 API 构建的。
> 
> 怀疑是时序或递归/堆栈问题，发现`setTimeout(callback, 0)`向用户指定的 SM2 回调引入了一个类似`onfinish()`恢复的顺序/播放列表功能。
> 
> Adobe 于 2013 年 3 月 12 日发布的 Flash Player 11.6.602.180 表现出相同的行为。为避免额外的黑客攻击，SM2 将此应用于所有基于 Flash 8 的 API 回调，无论安装的是什么版本的 Flash Player。由于这一变化，预计不会出现倒退。
> 
> 或者，这个问题可以通过使用来避免，`soundManager.setup({ flashVersion: 9 })`因为基于 Flash 9 的 API 似乎没有这个问题。

# c# - 绘图（即使是连续值）

> ID：15865568
> 
> 赞同：0
> 
> 时间：2013-04-07T17:39:20.383
> 
> 标签：c#, graph

我有这个代码：

```
 var temp = allsuminterestarray.OrderBy(i => int.Parse(i)).GroupBy(i => i);
       int[] forvaluescount = new int[] { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 
                                    11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 
                                    21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 
                                    31, 32, 33, 34, 35, 36, 37, 38, 39, 40,
                                    41, 42, 43, 44, 45, 46, 47, 48, 49, 50};

        int j = 0;
        foreach (var val in temp)
        {
            Console.WriteLine(val.Key + " " + val.Count());

            while ((forvaluescount[j] < Convert.ToInt32(val.Key)) && (forvaluescount[j] != Convert.ToInt32(val.Key)))
            {
                probabilities.Series["Series1"].Points.AddXY(forvaluescount[j], 0/trials);
                j++;
            }

            j++;
            probabilities.Series["Series1"].Points.AddXY(val.Key, val.Count()/trials);

        } 
```

注意：`temp`具有对值。例如：(11, 1), (14, 1), (18, 1), (19, 3), (20, 1), (21, 3), (22, 1), (24, 3) , (27, 1), (29, 2), (30, 1), (31, 2) 作为 C# 中图表的 X 和 Y 值。

基本上这里发生的是说我的值为 11 `val.Key`。该代码应该可以工作，以便将 1-10 作为 X 和 0 作为 Y 分配给 CHART 值。然后将 11 作为 X 及其相应的 Y 值。

循环将继续，这样在 的值之间不会有缺失值`temp`。

我相信代码没有问题，因为它输出连续的值。

这里的问题是，即使我按顺序绘制 X 和 Y，我也会得到这样的图表：

![在此处输入图像描述](https://i.stack.imgur.com/Tp8Bg.png)

我期待与此类似的图像（仅使用以下值生成`temp`：

![在此处输入图像描述](https://i.stack.imgur.com/esTYJ.png)

然而，不应该有 (X,0) 的缺失图。

请帮忙，谢谢！

# c# - WP7 中滑块控件的移动到位置行为

> ID：15865577
> 
> 赞同：2
> 
> 时间：2013-04-07T17:39:52.973
> 
> 标签：c#, windows-phone-7, slider, position

我想知道如何使滑块拇指跳到我单击滑块的位置。换句话说，我如何检索用户单击滑块的值（然后我可以设置滑块的值）。

这个问题就像：

[具有移动到位置行为的滑块控件](https://stackoverflow.com/questions/10621997/slider-control-with-move-to-position-behavior)

但是没有可用的解决方案。

因为 wp7 中的滑块控件没有**IsMoveToPointEnabled**属性，所以自定义是获得功能 IMO 的唯一方法。我使用[以下代码](http://social.msdn.microsoft.com/Forums/en-US/silverlightnet/thread/47a7d247-1e94-4699-a036-c10feba568d3/)：

```
public class CustomSlider: Slider {
  public CustomSlider() {
    DefaultStyleKey = typeof (Slider);
  }
  public override void OnApplyTemplate() {
    base.OnApplyTemplate();
    RepeatButton rb;
    rb = base.GetTemplateChild("HorizontalTrackLargeChangeIncreaseRepeatButton") as RepeatButton;
    rb.MouseMove += new MouseEventHandler(rb_MouseMove);
    rb.Click += new RoutedEventHandler(rb_Click);
    rb = base.GetTemplateChild("HorizontalTrackLargeChangeDecreaseRepeatButton") as RepeatButton;
    rb.MouseMove += new MouseEventHandler(rb_MouseMove);
    rb.Click += new RoutedEventHandler(rb_Click);
    rb = base.GetTemplateChild("VerticalTrackLargeChangeIncreaseRepeatButton") as RepeatButton;
    rb.Click += new RoutedEventHandler(rb_Click);
    rb.MouseMove += new MouseEventHandler(rb_MouseMove);
    rb = base.GetTemplateChild("VerticalTrackLargeChangeDecreaseRepeatButton") as RepeatButton;
    rb.Click += new RoutedEventHandler(rb_Click);
    rb.MouseMove += new MouseEventHandler(rb_MouseMove);
    //rb.
  }
  Point ps;
  void rb_MouseMove(object sender, MouseEventArgs e) {
    ps = e.GetPosition(this);
  }
  public event EventHandler MyClickEvent;
  void rb_Click(object sender, RoutedEventArgs e) {
    if (MyClickEvent != null) MyClickEvent(this, new PositionEventArgs(ps));
  }
}
public class PositionEventArgs: EventArgs {
  public Point Position {
    set;
    get;
  }
  public PositionEventArgs() {}
  public PositionEventArgs(Point p) {
    Position = p;
  }
} 
```

我尽了最大的努力，但直到现在，我都无法让它发挥作用。**嵌入在滑块中的RepeatButton**上的**MOUSEOVER**事件永远不会触发，即使**RepeatButton**在 xaml 中单独存在。事实上，在我的实验中只触发了**CLICK事件。**

 ******我看到大多数视频播放器都有这个功能，所以我真的很想知道如何在我的播放器中制作它。******

# python - 在 django 中创建正则表达式

> ID：15865580
> 
> 赞同：2
> 
> 时间：2013-04-07T17:40:02.817
> 
> 标签：python, django

Django的新手，所以我不确定如何实现以下...

我有这个正则表达式

```
"@£$¥èéùìòÇ\fØø\nÅåΔ_ΦΓΛΩΠΨΣΘΞÆæßÉ !\"#¤%&'()*+,-./[0-9]:;<=>\?¡[A-Z]ÄÖÑÜ§¿[a-z]äöñüà\^\{\}\[~\]\|€" 
```

我有这个功能：

```
def validate_GSM_characters(value):
    """ Raise a ValidationError if the value contains any values not within
        the GSM character set.
    """
    msg = u"Invalid characters."

    raise ValidationError(msg) 
```

目前它什么都不做，但我需要知道如何在 Django/Python 中创建一个允许我检查值的正则表达式函数。我做了谷歌搜索，只能找到与模型验证相关的文章。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T17:41:53.490

只需将表达式与`re`模块一起使用：

```
import re

yourrule = re.compile(r"@£$¥èéùìòÇ\fØø\nÅåΔ_ΦΓΛΩΠΨΣΘΞÆæßÉ !\"#¤%&'()*+,-./[0-9]:;<=>\?¡[A-Z]ÄÖÑÜ§¿[a-z]äöñüà\^\{\}\[~\]\|€")

def validate_GSM_characters(value):
    """ Raise a ValidationError if the value contains any values not within
        the GSM character set.
    """
    if not yourrule.search(value):
        msg = u"Invalid characters."

        raise ValidationError(msg) 
```

您也可以只使用[`RegexValidator`](https://docs.djangoproject.com/en/stable/ref/validators/#regexvalidator); 只需将您的表达式和消息传递给它，然后使用它而不是上面的函数。

# android - 在 Android 中隐藏/显示片段

> ID：15865584
> 
> 赞同：1
> 
> 时间：2013-04-07T17:40:22.010
> 
> 标签：android, android-fragments, android-button, android-fragmentactivity

我有一个`FragmentActivity`在`Buttons`它和三个`Fragment`类。如果单击按钮 1，我想显示`FragmentOne`和隐藏`FragmentTwo`, `FragmentThree`。如果`Button2`被点击，我想显示`FragmentTwo`和隐藏`FragmentOne`，`FragmentThree`反之亦然。我的代码不起作用。

```
 private void fManager() {

    FragmentManager manager = getSupportFragmentManager();

    f1 = manager.findFragmentById(R.id.first);
    f2 = manager.findFragmentById(R.id.second);
    f2 = manager.findFragmentById(R.id.third);
}

@Override
public void onClick(View v) {
    switch (v.getId()) {
    case R.id.button1:
        if (b1.isPressed()) {
            FragmentTransaction transaction = getSupportFragmentManager()
                    .beginTransaction();
            transaction.hide(f2);
            transaction.hide(f3);
            transaction.show(f1);
                            transaction.commit();
        }
        break;
    case R.id.button2:
        if (b2.isPressed()) {
            FragmentTransaction transaction = getSupportFragmentManager()
                    .beginTransaction();
            transaction.hide(f1);
            transaction.hide(f3);
            transaction.show(f2);
                            transaction.commit();
        }
        break;
    case R.id.button3:
        if (b3.isPressed()) {
            FragmentTransaction transaction = getSupportFragmentManager()
                    .beginTransaction();
            transaction.hide(f1);
            transaction.hide(f2);
            transaction.show(f3);
                         transaction.commit();
        }
        break;
    }

} 
```

![在此处输入图像描述](https://i.stack.imgur.com/BdHkw.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T17:42:12.110

您需要进行`commit`交易：

```
transaction.commit(); 
```

另请注意，`show()`and`hide()`仅适用于添加到容器中的片段（例如 ie `FrameLayout`），因此如果您直接在 XML 中定义了片段，那么您可能无法按照您尝试的方式执行此操作。此外，如果您使用容器，只需`setVisibility()`对它们进行常规操作，而不是在那里处理片段 - 效果将完全相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T14:36:05.717

这只是一个拼写错误，或者您使用相同的 var 名称来引用两个对象？

```
f2 = manager.findFragmentById(R.id.second);
f2 = manager.findFragmentById(R.id.third); 
```

如果您想了解更多有关交易的信息，请查看我的博客，[这里](http://www.survivingwithandroid.com/2013/04/android-fragment-transaction.html)。

# ios - 无法在objective-c ios中释放变量

> ID：15865587
> 
> 赞同：0
> 
> 时间：2013-04-07T17:40:33.980
> 
> 标签：ios, objective-c, memory-management

我有这个功能，我不使用ARC：

```
-(NSString *)getDataFileDestinationPath      
{
    NSMutableString *destPath = [[NSMutableString alloc] init];
    [destPath appendString:[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject]];
    [destPath appendFormat:@"/%@.%@", dataFileName, dataFileExtension];
    return destPath;
    [destPath release];
} 
```

因此，如果没有发布消息，我在泄漏分析中会有很大的内存泄漏。所以我添加了`[destPath release];`消息，但是当我尝试使用这个方法时——正如我在调试过程中看到的那样——这行代码根本没有被调用。因此，在返回消息后，控件转到下一个方法。我应该在哪里实现释放功能来释放内存？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T17:43:34.203

在这种情况下，您需要使用自动释放。

```
 -(NSString *)getDataFileDestinationPath      
{
    NSMutableString *destPath = [[NSMutableString alloc] init];
    [destPath appendString:[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject]];
    [destPath appendFormat:@"/%@.%@", dataFileName, dataFileExtension];
    [destPath autorelease];
    return destPath;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T17:43:45.020

这就是`autorelease`发明的目的。

```
return [destPath autorelease]; 
```

或者最初不分配初始化字符串对象，只需创建一个最初自动释放的实例：

```
NSMutableString *destPath = [NSMutableString string]; 
```

# actionscript-3 - 精灵图上的 Flashpunk 像素完美碰撞

> ID：15865589
> 
> 赞同：1
> 
> 时间：2013-04-07T17:40:50.333
> 
> 标签：actionscript-3, collision

我正在 Flashpunk 中开发一种 2d 平台 ARPG，并且遇到了一些难题。

远程武器没什么大不了的。它们是一个平面图像，我通过移动和旋转来模拟投掷或射击远程武器的感觉。近战武器有点痛苦，因为我想为不同的武器动画使用精灵贴图。

我遇到的问题是我必须为近战武器的每一帧手动调整碰撞箱。我想使用 Flashpunk 附带的 Pixelmask 功能，但它似乎不适用于 Spritemap。有没有办法强制它工作，或者有办法将 Spritemap 的当前帧转换为 Image 以便我可以应用 Pixelmask？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-16T16:18:36.260

这有点 hacky，但是您可以做的是创建一个与动画本身分开的图像向量，其索引等于相应动画的索引，然后从那里创建像素掩码。如果最终太慢（动态分配的内存比重用预分配的内存要慢），您可以加载图像，从它们创建像素掩码，然后将像素掩码推送到向量。从那里，您需要做的就是在攻击动画期间切换到正确的像素掩码。

# java - 将图像添加到 JFrame 的问题

> ID：15865591
> 
> 赞同：0
> 
> 时间：2013-04-07T17:40:59.337
> 
> 标签：java, image, swing, embedded-resource, imageicon

我一直在尝试将 imageicons 加载到 jframe 中。我不知道为什么这段代码不起作用。我尝试过使用 jpanels 和 jlabels，以及其他加载图像的方法，但这些也不起作用。我认为正因为如此，它与我设置的 JFrame 有关。我想远离 jpanels 和 jlabels，因为至少据我所知，它们无法缩放。如果有人有添加图像的解决方案，请告诉我。这是代码：

```
import java.awt.Canvas;
import javax.swing.JFrame;
import java.awt.*;
import javax.swing.ImageIcon;
import java.awt.event.KeyEvent;
import java.awt.Graphics;

public class Base extends Canvas implements Runnable {

    private static final long serialVersionUID = 001;
    private Image rock1;
    private Image rock2;
    private Image wood1;

    private Thread thread;
    private boolean running = (false);
    private boolean paused = (false);

    int x = 0;
    int y = 0;
    int z = 512;

    private void start() {
        if (running)
            return;
        running = true;
        thread = new Thread(this);
    }

    public void run(){}

    public Base(){}

    public static void main(String[] Args) {
        Base game = new Base();
        JFrame frame = new JFrame();
        frame.add(game);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(800, 600);
        frame.setLocationRelativeTo(null);
        frame.setResizable(false);
        frame.setVisible(true);
        frame.setTitle("Game");

        System.out.println("Running...");

        game.start();
        game.loadPics();

    }

    public void keyPressed(KeyEvent e) {
        if (e.getKeyCode() == KeyEvent.VK_A) {
            x = x - 5;
        }
        if (e.getKeyCode() == KeyEvent.VK_D) {
            x = x + 5;
        }
        if (e.getKeyCode() == KeyEvent.VK_SPACE) {
            y = y - 5;
        }
        if (e.getKeyCode() == KeyEvent.VK_SHIFT) {
            y = y + 5;
        }
        if (e.getKeyCode() == KeyEvent.VK_W) {
            z = z + 5;
        }
        if (e.getKeyCode() == KeyEvent.VK_S) {
            z = z - 5;
        }
        if (e.getKeyCode() == KeyEvent.VK_ESCAPE) {
            paused = (true);
        }
    }

    public void loadPics(){

        rock1 = new ImageIcon("C\\...\\rock1.png").getImage();
        rock2 = new ImageIcon("C\\...\\rock2.png").getImage();
        wood1 = new ImageIcon("C\\....\\wood1.png").getImage();

        repaint();
    }

    public void paint(Graphics g){
        while(paused = false){
        g.drawImage(rock1, x, y, z, z, this);
        g.drawImage(rock2, x + 512, y, z, z, this);
        g.drawImage(wood1, x, y + 512, z, z, this);

        try{
            Thread.sleep(16);
        }catch(Exception e){}
        g.dispose();
        }

    }
} 
```

同样，我认为问题出在我的 JFrame 上，但我不能确定，因为我不是最有经验的 Java 程序员。无论如何，如果您知道解决方案或要更改的内容，请提供帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T17:44:20.450

这个说法

```
while (paused = false){ 
```

`false`当您使用赋值表达式时，将始终评估为，因此`drawImage`不会发生后续调用。您可能打算使用`==`运算符来比较原始`boolean`值：

```
while (paused == false){ 
```

*   不要使用`paint`，`paintComponent`从子类中使用`JComponent`
*   不要调用*任何*方法`Thread.sleep`。Swing 有自己的[并发机制](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/)。您可以使用[Swing Timer](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)定期执行图形更新，而不是在这里调用。 *`paint``Thread.sleep`*

 *除此之外，AWT 是重量级组件，不能很好地与轻量级 Swing 组件一起渲染。使用[键绑定](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)而不是`Key Listeners`Swing 应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-21T00:23:41.543

我遇到过很多这样的反复出现的问题，并且已经开发出一种方法来解决这个问题。首先，您`public class Base`需要进行双重缓冲。将方法更改`paint(Graphics g)`为`paintComponent(Graphics g)`. 添加一个新`paint(Graphics g)`方法并添加以下代码：

```
 public void paint(Graphics g) {
    // TODO Auto-generated method stub (IGNORE!!!)

    dbi = createImage (getWidth(),getHeight());
    dbg = dbi.getGraphics();
    paintComponent(dbg);
    g.drawImage(dbi , 0 , 0 , this);

 } 
```

并在顶部`public class Base`添加这些变量：

```
 private Image dbi;
 private Graphics dbg; 
```

这会自动调用`paintComponent(Graphics g)`并完成第一步。

接下来，删除try语句`paintComponent()`并将其写入`run()`

```
@Override
public void run() {

    try {

        while (true) {

            Thread.sleep(5); // we want this so the computer doesn't go too fast

        }

    } catch (Exception e) { // Never have an empty catch statement

        System.out.println ("Error! stacktrace: ");
        e.printStackTrace();

    }

} 
```

`@Override`注释*必须*存在，否则**不会**重新绘制。

下一部分很关键：首先，放在`super.paint(g);`顶部`paintComponent(Graphics g)` 和`repaint();`底部。

这应该已经解决了，但是我发现了一些潜在的问题；

*   JFrame 初始化

    ```
    public Base(){

        add(game);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setSize(800, 600);
        setLocationRelativeTo(null);
        setResizable(false);
        setVisible(true);
        setTitle("Game");

        start();
        loadPics();

    }

    public static void main(String[] Args) { // Makes game smoother

        Base base = new Base ();
        Thread t = new Thread (base);
        t.start();

    } 
    ```

*   删除`private void start()`，因为这不会影响游戏。

*   检查文件目录，因为它们可能不正确。**提示：C\ 没有删减它。这是 C:\**

希望它成功并快乐编码！*

# hadoop - 在 reducer 的配置方法中调用进度或增加计数器

> ID：15865592
> 
> 赞同：1
> 
> 时间：2013-04-07T17:41:26.450
> 
> 标签：hadoop

有可能这样做吗？

**上下文：**我的 reducer 配置方法需要从 DistributedCache 读取一组文件（总大小约为 150MB）。但是，我不知道为什么 hadoop 需要这么长时间才能杀死一些减速器，尽管事实上有一些减速器已经成功完成。

我使用旧 API，我只能在 configure 方法中访问 JobConf conf 变量。

我的想法是让记者变量成为一个字段，然后我可以在配置方法中调用它。但似乎在调用reduce之前调用了configure。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T07:42:24.530

转换您的代码以使用新的 API！

然后在 中`setup()`，可以访问`context`变量并调用`progress()`如下：

```
@Override
        protected void setup(Context context) throws IOException, InterruptedException {
context.progress();
} 
```

# typescript - 有没有更好的方法然后在打字稿中为淘汰视图模型定义许多类

> ID：15865593
> 
> 赞同：-1
> 
> 时间：2013-04-07T17:41:35.157
> 
> 标签：typescript

我已经使用打字稿将我的视图模型分离到类中。

现在在我的引导程序中，我正在像这样导入它们：

```
import dl = module("DataLayer");
import vm1 = module("AppBarViewModel");
import vm2 = module("Nav2ViewModelCommander");
import vm3 = module("IdentityViewModel"); 
```

有没有办法将它们收集到一个命名空间？我正在使用 requirejs，当编译为 js 时，我的视图模型看起来像这样。

```
define(["require", "exports"], function(require, exports) {
    var AppBarViewModel = (function () {
        function AppBarViewModel() {
            this.visible = ko.observable(true);
            this.buttons = ko.observableArray([]);
            this.enableContext = ko.observable(true);
            this.canClose = ko.computed(function () {
                var k = ko.utils.arrayFirst(this.buttons(), function (b) {
                    return b.blockHide && b.blockHide == true;
                });
                return k == null;
            });
        }
        AppBarViewModel.prototype.addButton = function (data) {
            this.buttons.push(data);
            this.visible(data.blockHide && data.blockHide == true);
        };
        AppBarViewModel.prototype.removeButton = function (data) {
            this.buttons.remove(data);
            this.visible(!this.canClose());
        };
        return AppBarViewModel;
    })();
    exports.AppBarViewModel = AppBarViewModel;    
}) 
```

从

```
///<reference path="../knockout.d.ts" />
///<reference path="../require.d.ts" />

declare var ko: any;

    export class AppBarViewModel {

        visible = ko.observable(true);
        buttons = ko.observableArray([]);

        enableContext = ko.observable(true);
        addButton(data) {
            this.buttons.push(data);
            this.visible(data.blockHide && data.blockHide == true);
        }
        removeButton(data) {
            this.buttons.remove(data);
            this.visible(!this.canClose());
        }
        canClose = ko.computed(function () {
            //var buttons = self.buttons();
            //ko.utils.arrayForEach(self.buttons(), function () { return });

            var k = ko.utils.arrayFirst(this.buttons(), function (b) { return b.blockHide && b.blockHide == true });
            return k == null;
        });
        constructor() {

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T00:52:34.373

是的。将视图模型放在同一个模块中并导入该模块。

您当前正在为每个视图模型/类创建一个新模块。

**更新** ***不起作用，请参阅更新 2***如果您还想为模块保留多个文件，您可以使用 typescript 编译器将它们合并为一个：

```
tsc AppBarViewModel.ts IdentityViewModel.ts 
```

然后假设文件内部具有相同的模块“ViewModels”，您可以使用以下命令导入它们：

```
import vms = module("ViewModels"); 
```

**更新 2**当前不支持合并外部模块：[https ://typescript.codeplex.com/discussions/430782](https://typescript.codeplex.com/discussions/430782)

> 另外，关于您关于单个文件中的外部模块的问题。外部模块假定您正在使用模块加载器。在这种情况下，您希望将模块构建到单独的源文件中，以便可以通过模块加载器加载它们。将所有模块构建到一个 .js 文件中与这些工具的工作方式背道而驰。
> 
> 我可以看到想要从多个源文件构建外部模块，尽管我们目前不支持这个并且可能是问题跟踪器的一个很好的功能请求，如果它还没有的话

在这里投票支持此功能：[https ://typescript.codeplex.com/workitem/759](https://typescript.codeplex.com/workitem/759)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-12T23:04:30.397

我所做的是关闭 typescript 中的 AMD 支持，而是利用 WebEssentials JS 包为 requireJS 创建单个导出。为此，我有一个“_prebundle.fragment.js”和一个“_postbundle.fragment.js”以及介于两者之间的所有 TS 编译代码：

```
 <file>/js/_prebundle.fragment.js</file>

    <file>/js/file1.js</file>
    <file>/js/file2.js</file>
    <file>/js/file3.js</file>

    <file>/js/_postbundle.fragment.js</file> 
```

这将创建以下内容：

```
///#source 1 1 /js/_prebundle.fragment.js
// START _PREBUNDLE.FRAGMENT >>

(function(factory){
    // Support module loading scenarios
    if (typeof define === 'function' && define.amd){
        // AMD Anonymous Module
        define(['jquery', 'ga', 'knockout', 'sammy'], factory);
    } else {
        // No module loader (plain <script> tag) - put directly in global namespace
        var global = (window || this);

        global.ma = factory(bootstrap, jQuery, qa, ko, sammy);
    }
})(function($, ga, ko, sammy){
    if (!$) throw new Error('JQuery is a pre-requisite and must be loaded for this component.');
    if (!ga) throw new Error('Google Analytics is a pre-requisite and must be loaded for this component.');
    if (!ko) throw new Error('KnockoutJS is a pre-requisite and must be loaded for this component.');
    if (!sammy) throw new Error('SammyJS is a pre-requisite and must be loaded for this component.');

// END _PREBUNDLE.FRAGMENT
///#source 1 1 /js/File1.js
var ma;
(function (ma) {
    var File1 = (function() {
        function File1() {
            // blah
        }

        return File1;
    })();

    ma.File1 = File1;
})(ma || (ma = {}));
//# sourceMappingURL=file1.js.map

///#source 1 1 /js/_postbundle.fragment.js
// START _POSTBUNDLE.FRAGMENT >>

    return ma;
});

// END _POSTBUNDLE.FRAGMENT 
```

这会产生一个单独的 require 元素，并且还支持在没有 RequireJS 的情况下使用，这对于我想要公开它时非常有用。此外，我可以捆绑多种不同风格的代码以在其他页面上使用。不确定是否有更好的方法来做到这一点，但这对我有用......

# javascript - 将值从 json 数组写入 javascript 变量

> ID：15865595
> 
> 赞同：1
> 
> 时间：2013-04-07T17:41:51.543
> 
> 标签：javascript, ajax, arrays, json

我如何在 javascript 中创建一个变量并从 json 数组中给它一个值？

该数组是从 php 脚本发送的，如下所示：

```
php

$stat = array("v1" => "$v1", "v2" => "$v2", "v3" => "$v3",
"v4" => "$v4", "v5" => "$v5", "pump" => "$pump", "flow" => "$flow");
echo json_encode(($stat));

html/javascript

$.ajaxSetup({ cache: false });
setInterval(function(){
$.getJSON('statusdata.php',function(data) {
$.each(data, function(key, val) {

// I try to do something like this..
var v1 = key[1];
var v2 = key[2];
and so on.. 
```

然后我想使用一个变量来提醒一个带有某种警告的弹出窗口。

有点像：

```
if (v1 == 1){
run the popup function!
} 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T17:48:29.073

您使用 $.each 错误。如果您要将数据分配给设置的常规变量，则需要单独完成它们，而不是在循环内。

```
$.getJSON('statusdata.php',function(data) {
  v1 = data["v1"];
  v2 = data["v2"];
} 
```

# joomla - Joomla 字段：动态更改只读属性

> ID：15865597
> 
> 赞同：2
> 
> 时间：2013-04-07T17:41:59.317
> 
> 标签：joomla, joomla2.5

在 Joomla 组件形式中：

有没有办法动态更改表单字段属性：“只读”？

例子 ：

```
if( _condition_ )
   $this->form->getInput('Name')->readonly = true; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T18:26:07.053

根据我在 API 中看到的，您基本上可以更改它。

我是这样看的：

当您调用时，`$this->form->getInput('Name')`您在 JFormField 对象内部（实际上在一个与 JFormField 交互的类内部，该类是抽象的 - 例如由 JFormFieldText 继承），调用方法`getInput()`。

这个方法，从我可以直接从您定义的 XML 中看到的`getInput()`获取它的参数（描述表单字段的 XML 元素的 SimpleXMLElement 对象。）它只返回一个字符串（实际的 HTML），因此显然设置和不存在的属性`$element`不会工作。

但是 JForm 有一个很好的方法叫做 setFieldAttribute()，见下面的签名：

```
 /**
 * Method to set an attribute value for a field XML element.
 *
 * @param   string  $name       The name of the form field for which to set the attribute value.
 * @param   string  $attribute  The name of the attribute for which to set a value.
 * @param   mixed   $value      The value to set for the attribute.
 * @param   string  $group      The optional dot-separated form group path on which to find the field.
 *
 * @return  boolean  True on success.
 *
 * @since   11.1
 */
public function setFieldAttribute($name, $attribute, $value, $group = null) 
```

所以你的代码看起来像：

```
if( _condition_ ) 
{
    $this->form->setFieldAttribute('Name', 'readonly', 'true', $group = null);
    echo $this->form->getInput('name');
} 
```

希望这可以帮助。

# java - 解开二叉树的线程

> ID：15865598
> 
> 赞同：2
> 
> 时间：2013-04-07T17:42:10.237
> 
> 标签：java, binary-tree

我必须解开二叉树。我的意思是我有以下方法

```
 public static <T> BinaryNode<T> unthread(BinaryNode<T> root) 
```

它接收一个双线程二叉树，它应该返回一个非线程树 - 这意味着它必须删除曾经为空的附加节点，使它们再次为空。

我认为我应该这样做的方式是为每个节点创建一个链表，然后调用一个辅助方法，该方法将线程树和链表作为参数。然后，遍历树，如果一个节点已经被访问过，这意味着我必须删除它。

我不知道这是否会奏效。你有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T18:12:12.647

有效 ：）。我使用了前序遍历和链表。正如我所说，如果节点在链接列表中并且没有添加它，就是这样。

# c - 在c中扫描直到EOF

> ID：15865601
> 
> 赞同：3
> 
> 时间：2013-04-07T17:42:15.603
> 
> 标签：c

我正在编写一个解密程序，我需要扫描未知数量的字符串并在输入每个字符串时对其进行解码。程序必须在到达 EOF 时结束。

我很难让程序结束。当我在while循环条件语句中扫描字符串中的第一个字符时，它正在执行此操作，但是当我在条件语句下方的实际字符串中扫描时，字符串缺少第一个字符。我应该扫描第一个字符，然后以某种方式将该字符放在字符串的开头吗？

**在我的情况下如何正确测试 EOF？**

```
#include <stdio.h>
#include<string.h>

int main(void)
{
    int i;
    char code[300];

    while(scanf("%c", &code[0])!=EOF)
    {
        scanf("%s", code);

        for(i=0; i<strlen(code); i++)
        {
            decrypt message one char at a time
        }
        printf("\n");
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T18:41:33.597

```
while (scanf("%s", code) == 1)
{
    // no need for second scanf call
    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T18:31:41.823

```
while (scanf("%c", &code[0]) == 1)
{   scanf("%s", &code[1]);
    ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T18:46:53.463

对于这个特定问题，使用`scanf`根本不是一个好主意。

```
while(scanf("%c", &code[0])!=EOF) 
```

此`scanf`调用读取单个字符。只需使用`getchar()`.

```
scanf("%s", code);

for(i=0; i<strlen(code); i++)
{
    decrypt message one char at a time
} 
```

该`scanf`调用可以读取任意多个字符（在跳过空格之后；您确定要跳过空格吗？）。这意味着如果要读取的字符太多`stdin`，就会出现缓冲区溢出，除非您完全控制`stdin`.

然后你循环遍历`code`数组，调用`strlen()`你处理的每个字符。由于`strlen()`通常必须从数组的开头扫描到终止`'\0'`，这是低效的。*如果*需要遍历字符串的字符，要么调用`strlen()`一次并保存值，要么查找终止`'\0'`字符。

但是您一次只处理一个字符，所以一次只*读取*一个字符：

```
while ((c = getchar()) != EOF) {
    /* process a character */
} 
```

不用担心一次读一个字符效率低；缓冲会解决这个问题。

# c++ - QML textInput 元素中的自动完成和建议

> ID：15865603
> 
> 赞同：12
> 
> 时间：2013-04-07T17:42:29.420
> 
> 标签：c++, qt, autocomplete, qml, pyside

我有一个像这样的 QML textInput 元素：

文本框.qml

```
FocusScope {
    id: focusScope
    property int fontSize: focusScope.height -30
    property int textBoxWidth: parent.width * 0.8
    property int textBoxHeight: 45
    property string placeHolder: 'Type something...'
    property bool isUserInTheMiddleOfEntringText: false
    width: textBoxWidth
    height: textBoxHeight

    Rectangle {
        width: parent.width
        height: parent.height
        border.color:'blue'
        border.width: 3
        radius: 0
        MouseArea {
            anchors.fill: parent
            onClicked: {
                focusScope.focus = true
                textInput.openSoftwareInputPanel()
            }
        }
    }
    Text {
        id: typeSomething
        anchors.fill: parent; anchors.rightMargin: 8
        verticalAlignment: Text.AlignVCenter
        text: placeHolder
        color: 'red'
        font.italic: true
        font.pointSize: fontSize
        MouseArea {
            anchors.fill: parent
            onClicked: {
                focusScope.focus = true
                textInput.openSoftwareInputPanel()
            }
        }

    }

    MouseArea {
        anchors.fill: parent
        onClicked: {
            focusScope.focus = true
            textInput.openSoftwareInputPanel()
        }
    }

    TextInput {
        id: textInput
        anchors {
            right: parent.right
            rightMargin: 8
            left: clear.right
            leftMargin: 8
            verticalCenter: parent.verticalCenter
        }
        focus: true
        selectByMouse: true
        font.pointSize: fontSize
    }

    Text {
        id: clear
        text: '\u2717'
        color: 'yellow'
        font.pointSize: 25
        opacity: 0
        visible: readOnlyTextBox ? false : true
        anchors {
            left: parent.left
            leftMargin: 8
            verticalCenter: parent.verticalCenter
        }
        MouseArea {
            anchors.fill: parent
            onClicked: {
                textInput.text = ''
                focusScope.focus = true;
                textInput.openSoftwareInputPanel()
            }
        }
    }

    states: State {
        name: 'hasText'; when: textInput.text != ''
        PropertyChanges {
            target: typeSomething
            opacity: 0
        }
        PropertyChanges {
            target: clear
            opacity: 0.5
        }
    }

    transitions: [
        Transition {
            from: ''; to: 'hasText'
            NumberAnimation {
                exclude: typeSomething
                properties: 'opacity'
            }
        },
        Transition {
            from: 'hasText'; to: ''
            NumberAnimation {
                properties: 'opacity'
            }
        }
    ]
} 
```

我想在这个文本框中添加自动完成和谷歌搜索等建议。自动完成从数据库中获取数据，并且数据库通过 pyside SLOT（或 c++ 插槽）返回字典列表

我怎么能做这项工作？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-11T22:07:01.810

看看这段代码：[https ://github.com/jturcotte/liquid/blob/master/qml/content/SuggestionBox.qml](https://github.com/jturcotte/liquid/blob/master/qml/content/SuggestionBox.qml)

我敢打赌它会完成这项工作。

**编辑：**

上面链接的代码有些复杂，需要 C++ 后端，所以我对其进行了简化并制作了纯 Qml 示例应用程序，您可以使用它，稍微编辑一下并应用到您的需要。来源可以在[这里](https://github.com/dant3/qmlcompletionbox)找到。最重要的事情有：

1.  [这个 SuggestionBox](https://github.com/dant3/qmlcompletionbox/blob/master/SuggestionBox.qml)的实现使用某种*模型*作为完成/建议某事的来源
2.  每次用户点击 item 时都会发出它的信号*itemSelected(item)*
3.  [将 LineEdit 组件绑定到 SuggestionBox](https://github.com/dant3/qmlcompletionbox/blob/master/Main.qml#L29)[的应用程序](https://github.com/dant3/qmlcompletionbox/blob/master/Main.qml)的主要组件

请注意，代码非常粗糙，只是为了示例而编写的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-07-16T21:04:42.430

我一直在寻找非常相似的东西：一个围绕[QML TextField](https://doc.qt.io/qt-5/qml-qtquick-controls-textfield.html)构建的 QML 自动完成组件，而不是问题中的较低级别、更灵活但工作量更大的 TextInput 。

由于我找不到，我实现了它。如果有人想使用它：它已获得 MIT 许可，可作为我正在开发[的应用程序的一部分使用。](https://github.com/fairdirect/foodrescue-app)您在 中找到该组件[`src/qml/AutoComplete.qml`](https://github.com/fairdirect/foodrescue-app/blob/master/src/qml/AutoComplete.qml)，该应用程序可以作为使用示例。特征：

*   以粗体突出显示自动完成的字符，如在 Google 搜索中
*   键绑定（使用箭头键导航、Return / Enter、Esc 关闭完成框、Esc Esc 取消焦点）
*   现在使用一个简单`QStringList`的模型，应用程序展示了如何在按下下一个键时使用实时 SQL 数据库查询更新模型
*   有大量文档的代码，所以应该很容易适应

![自动完成组件截图](https://i.stack.imgur.com/zTm1k.png)

让我知道这是否有用，然后我可能会将其打包为 Qt [QPM 包](https://www.qpm.io/packages/index.html)，甚至尝试使其足够成熟以添加到 QML UI 库[KDE Kirigami](https://kde.org/products/kirigami/)中。

# c++ - 如何使用 Qt/C++ 创建/读取/写入文件并使用程序在本地存储设置

> ID：15865605
> 
> 赞同：0
> 
> 时间：2013-04-07T17:42:50.780
> 
> 标签：c++, database, qt, user-interface, settings

我是一个不幸的 C++ 初学者，使用 Qt GUI 设计器程序似乎非常适合我的需求，但我在尝试编写为此所需的代码时遇到了问题。我可以使用 QSettings 字符串将本地设置存储在硬盘驱动器上，但是当程序执行某些程序执行的 %HOME_LOCAL%\APPS_SETTINGS 公牛时，我个人讨厌它。我需要在程序目录中为设置和本地主机数据库保存一个文本文件，以记住以后要读取的字符串。

我需要使用本地主机文本数据库的代码行是什么，还是有更好的选择？以及如何将其与本地程序一起存储在其目录中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T19:31:00.393

您可以使用`QSettings`任何文件，使用[构造函数`QSettings::QSettings ( const QString & fileName, Format format, QObject * parent = 0 )`](http://qt-project.org/doc/qt-4.8/qsettings.html#QSettings-4)。

要获取程序目录，您可以使用[`QCoreApplication::applicationDirPath()`](http://qt-project.org/doc/qt-4.8/qcoreapplication.html#applicationDirPath).

所以，回答你的问题，在创建 QApplication 实例后声明：

```
QSettings *settings = new QSettings(
     QCoreApplication::applicationDirPath() + "/settings.ini",
     QSettings::IniFormat,
     qApp); 
```

但是，正如问题评论中所指出的，如果您正在制作用于一般分发的程序，您应该使用操作系统默认值。检查所有的构造函数，[`QSettings`](http://qt-project.org/doc/qt-4.8/qsettings.html#QSettings)看看它能做什么。用户通常在应用程序目录中没有写权限。请注意，您还可以使用[QSettings::NativeFormat](http://qt-project.org/doc/qt-4.8/qsettings.html#Format-enum)将设置存储到 Windows 注册表。

# javascript - KnockoutJS 自定义绑定在绑定期间调用单击事件，而不是在单击时

> ID：15865606
> 
> 赞同：1
> 
> 时间：2013-04-07T17:42:53.243
> 
> 标签：javascript, knockout.js

我正在尝试使用 knockoutjs 将一个可观察的人员数组绑定到两个具有点击事件的两列响应式布局。

我创建了一个名为 TwoCol 的自定义绑定，它循环遍历数组，并将节点附加到 DOM 以创建我建议的布局，但是当我尝试在嵌套在循环中的自定义绑定中应用它们时，单击事件给我带来了麻烦。

我已经玩了很多，并且遇到了所有类型的结果，但是我现在在绑定期间调用我的 ~click~ 事件，而不是在点击时。

[http://jsfiddle.net/5SPVm/6/](http://jsfiddle.net/5SPVm/6/)

HTML：

```
<div data-bind="TwoCol: Friends" id="" style="padding: 20px"> 
```

JAVASCRIPT：

```
function FriendsModel() {
    var self = this;
    this.Friends = ko.observableArray();
    this.SelectedFriend = "";
    this.SetSelected = function (person) {
        alert(person);
        self.SelectedFriend = person;
    }
}
function isOdd(num) {
    return num % 2;
}
ko.bindingHandlers.TwoCol = {
    update: function (elem, valueAccessor) {
        var i = 0;
        var rowDiv;
        var vFriends = ko.utils.unwrapObservable(valueAccessor());
        $(elem).html('');
        while (i < vFriends.length) {
            //create row container every other iteration
            if (!isOdd(i)) {
                rowDiv = document.createElement("div");
                $(rowDiv).addClass("row-fluid");
                elem.appendChild(rowDiv);
            }
            //add column for every iteration
            var colDiv = document.createElement("div");
            $(colDiv).addClass("span6");
            rowDiv.appendChild(colDiv);
            //actual code has fairly complex button html here
            var htmlDiv = document.createElement("div");
            var htmlButton = vFriends[i]
            htmlDiv.innerHTML = htmlButton;
            colDiv.appendChild(htmlDiv);
            //i think i need to add the event to the template too?
            //$(htmlDiv).attr("data-bind", "click: { alert: $data }")
            //it seems that the SetSelected Method is called while looping
            ko.applyBindingsToDescendants(htmlDiv, { click: friends.SetSelected(vFriends[i]) });
            i++;
        }
        return { controlsDescendantBindings: true };
    }
}

var friends = new FriendsModel();
friends.Friends.push('bob');
friends.Friends.push('rob');
friends.Friends.push('mob');
friends.Friends.push('lob');
ko.applyBindings(friends); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T18:25:54.040

我不认为你使用`ko.applyBindingsToDescendants`正确。我承认我对代码中某些值的含义有些困惑，因此我可能对某些内容进行了错误的解释。

这是一个小提琴，我认为它按照您的预期工作： ~~[http://jsfiddle.net/5SPVm/7/](http://jsfiddle.net/5SPVm/7/)~~ [http://jsfiddle.net/5SPVm/8/](http://jsfiddle.net/5SPVm/8/)

请注意，如果手动控制后代绑定 ( `return { controlsDescendantBindings: true };`)，则需要在 init 回调中进行设置，而不是更新。更新回调为时已晚。

更改的简要说明**（已编辑）**：

1.  将`controlsDescendantBindings`移到`init`绑定回调中
2.  将必要的参数名称添加到绑定参数列表以访问其他值。
3.  我重新启用了 html.attr 调用。请注意，现在由于绑定上下文设置为实际项目，因此该级别不再存在 SetSelected 方法，因此有必要使用`$parent.SetSelected`.

    ```
     $(htmlDiv).attr("data-bind", "click: $parent.SetSelected") 
    ```

4.  修复了`ko.applyBindingsToDescendants`通话。此方法采用从当前绑定上下文创建的绑定上下文，并且还采用要应用绑定的元素。您不想重新应用绑定，这就是为什么整个事情需要在 init 处理程序中。

    ```
     var childBindingContext = bindingContext.createChildContext(vFriends[i]);
        ko.applyBindingsToDescendants(childBindingContext, colDiv); 
    ```

# c#-4.0 - 使用 for 循环视图模型填充列表

> ID：15865608
> 
> 赞同：0
> 
> 时间：2013-04-07T17:43:03.047
> 
> 标签：c#-4.0, asp.net-mvc-4

只是想知道是否有人可以帮助解决这个问题。我有一个填充下拉列表的视图模型。我只是想知道是否可以更改下面的代码，以便我可以使用 for 循环来填充列表。

视图模型

```
public IEnumerable<SelectListItem> numberOfAdults { get; set; } 
```

控制器

```
numberOfAdults = new[]
                {  
                    new SelectListItem {Value = "1", Text = "1"},
                    new SelectListItem {Value = "2", Text = "2"},
                    new SelectListItem {Value = "3", Text = "3"},
                    new SelectListItem {Value = "4", Text = "4"},
                    new SelectListItem {Value = "5", Text = "5"},
                    new SelectListItem {Value = "6", Text = "6"},
                    new SelectListItem {Value = "7", Text = "7"},
                    new SelectListItem {Value = "8", Text = "8"},
                    new SelectListItem {Value = "9", Text = "9"},
                    new SelectListItem {Value = "10", Text = "10"}
                } 
```

看法

```
@Html.DropDownListFor(x => x.selectedAdultValue, new SelectList(Model.numberOfAdults, "Value", "Text"), null, new {@id="NumerOfAdults" }) 
```

像下面这样的东西是我想要的，但不知道把它放在模型或控制器的哪里。

```
for(int i = 0; i < 10; i++)
{
    i;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T17:45:08.803

它可能很简单：

```
numberOfAdults = Enumerable.Range(1, 10).Select(x => new SelectListItem
{
    Value = x.ToString(),
    Text = x.ToString()
}); 
```

或者如果你真的想使用一个`for`循环（我不明白你为什么想要那个，但无论如何）：

```
var result = new List<SelectListItem>();
for(int i = 1; i <= 10; i++)
{
    result.Add(new SelectListItem { 
        Value = x.ToString(),
        Text = x.ToString() 
    });
}
numberOfAdults = result.ToArray(); 
```

# wordpress - Symfony2 自定义密码编码器和密码哈希更新

> ID：15865609
> 
> 赞同：2
> 
> 时间：2013-04-07T17:43:03.610
> 
> 标签：wordpress, symfony, passwords, bcrypt, encoder

我正在通过将一些 wordpress 博客移至 Symfony 来学习 Symfony2。我被登录程序卡住了。Wordpress 使用非标准密码散列`$P$....`，我想在用户登录时检查旧密码散列，当密码正确时，将其重新散列到 bcrypt。到目前为止，我创建了自定义编码器类以与 symfony 安全机制一起使用。

```
<?php
namespace Pkr\BlogUserBundle\Service\Encoder;

use PHPassLib\Application\Context;
use Symfony\Component\Security\Core\Encoder\BCryptPasswordEncoder;
use Symfony\Component\Security\Core\Encoder\PasswordEncoderInterface;
use Symfony\Component\Security\Core\Util\SecureRandom;

class WpTransitionalEncoder implements PasswordEncoderInterface
{

    public function __construct($cost = 13)
    {
        $secure = new SecureRandom();
        $this->_bcryptEncoder = new BCryptPasswordEncoder($secure, $cost);
    }

    public function isPasswordValid($encoded, $raw, $salt)
    {
        if (preg_match('^\$P\$', $encoded)) {
            $context = new Context();
            $context->addConfig('portable');
            return $context->verify($raw, $encoded);
        }
        return $this->_bcryptEncoder->isPasswordValid($encoded, $raw, $salt);
    }

    public function encodePassword($raw, $salt)
    {
        return $this->_bcryptEncoder->encodePassword($raw, $salt);
    }
} 
```

我将其用作服务：

```
#/src/Pkr/BlogUserBundle/Resources/config/services.yml
services:
    pkr_blog_user.wp_transitional_encoder:
        class: Pkr\BlogUserBundle\Service\Encoder\WpTransitionalEncoder 
```

在 security.yml 中：

```
#/app/config/security.yml
security:
encoders:
    Pkr\BlogUserBoundle\Entity\User:
        id:   pkr_blog_user.wp_transitional_encoder
        cost: 15 
```

我的问题是：

**如何将参数传递给我的编码器服务表单`security.yml`？**

我问是因为`cost: 15`不起作用。

**我应该把密码哈希更新逻辑放在哪里？我在想可能只是在密码验证之后是这样的：**

```
public function isPasswordValid($encoded, $raw, $salt)
{
    if (preg_match('^\$P\$', $encoded)) {
        $context = new Context();
        $context->addConfig('portable');
        $isValid = $context->verify($raw, $encoded);
        if ($isValid) {
            // put logic here...
        }
        return $isValid;
    }
    return $this->_bcryptEncoder->isPasswordValid($encoded, $raw, $salt);
} 
```

但它似乎在某种程度上是错误的地方。那么正确的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T13:51:45.463

我会回答我自己的问题。

我将编码器服务的参数放在里面`config.yml`

```
pkr_blog_user:
    password_encoder:
        cost: 17 
```

它们将被传递给我的捆绑扩展类：

```
# /src/Pkr/BlogUserBundle/DependencyInjection/PkrBlogUserExtension.php
namespace Pkr\BlogUserBundle\DependencyInjection;

use Symfony\Component\DependencyInjection\ContainerBuilder;
use Symfony\Component\Config\FileLocator;
use Symfony\Component\HttpKernel\DependencyInjection\Extension;
use Symfony\Component\DependencyInjection\Loader;

/**
* This is the class that loads and manages your bundle configuration
*
* To learn more see {@link http://symfony.com/doc/current/cookbook/bundles/extension.html}
*/
class PkrBlogUserExtension extends Extension
{
    /**
    * {@inheritDoc}
    */
    public function load(array $configs, ContainerBuilder $container)
    {
        $configuration = new Configuration();
        $config = $this->processConfiguration($configuration, $configs);

        $loader = new Loader\YamlFileLoader($container, new FileLocator(__DIR__.'/../Resources/config'));
        $loader->load('services.yml');

        if ($config['password_encoder']['cost'] < 10) {
            $config['password_encoder']['cost'] = sprintf('%02d', $config['password_encoder']['cost']);
        }
        $container->setParameter('pkr_blog_user.wp_transitional_encoder.cost', $config['password_encoder']['cost']);

    }
} 
```

我发现我可以使用自己的身份验证成功处理程序，因此有一个放置密码重新哈希逻辑的好地方。不幸的是，当使用自定义处理程序时，symfony2 不会将配置传递给类构造函数，但我找到了一种让它工作的方法。我在这里描述了它：

[https://stackoverflow.com/a/15988399/1089412](https://stackoverflow.com/a/15988399/1089412)

# python - 检查 404 错误的 url

> ID：15865611
> 
> 赞同：2
> 
> 时间：2013-04-07T17:43:06.183
> 
> 标签：python, web-scraping, http-status-code-404, scrapy

我正在浏览一组页面，但不确定有多少，但当前页面由 url 中的一个简单数字表示（例如“ [http://www.website.com/page/1](http://www.website.com/page/1) ")

我想在scrapy中使用for循环来增加页面的当前猜测并在达到404时停止。我知道从请求返回的响应包含此信息，但我不确定如何自动获取来自请求的响应。

关于如何做到这一点的任何想法？

目前我的代码是这样的：

```
def start_requests(self):
    baseUrl = "http://website.com/page/"
    currentPage = 0
    stillExists = True
    while(stillExists):
        currentUrl = baseUrl + str(currentPage)
        test = Request(currentUrl)
        if test.response.status != 404: #This is what I'm not sure of
            yield test
            currentPage += 1
        else:
            stillExists = False 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T00:17:27.503

你可以这样做：

```
from __future__ import print_function
import urllib2

baseURL = "http://www.website.com/page/"

for n in xrange(100):
    fullURL = baseURL + str(n)
    #print fullURL
    try:
        req = urllib2.Request(fullURL)
        resp = urllib2.urlopen(req)
        if resp.getcode() == 404:
            #Do whatever you want if 404 is found
            print ("404 Found!")
        else:
            #Do your normal stuff here if page is found.
            print ("URL: {0} Response: {1}".format(fullURL, resp.getcode()))
    except:
        print ("Could not connect to URL: {0} ".format(fullURL)) 
```

这将遍历范围并尝试通过 连接到每个 URL `urllib2`。我不知道`scapy`或您的示例函数如何打开 URL，但这是一个如何通过`urllib2`.

请注意，大多数使用这种 URL 格式的网站通常都运行 CMS，该 CMS 可以自动将不存在的页面重定向到自定义`404 - Not Found`页面，该页面仍将显示为 HTTP 状态代码 200。在这种情况下，查看的最佳方式对于可能显示但实际上只是自定义 404 页面的页面，您应该进行一些屏幕抓取并查找在“正常”页面返回期间可能不会出现的任何内容，例如“找不到页面”或类似内容的文本并且是自定义 404 页面独有的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T02:13:22.617

您需要让出*/返回*请求以检查状态，创建`Request`对象实际上并不发送它。

```
class MySpider(BaseSpider):
    name = 'website.com'
    baseUrl = "http://website.com/page/"

    def start_requests(self):
        yield Request(self.baseUrl + '0')

    def parse(self, response):
        if response.status != 404:
            page = response.meta.get('page', 0) + 1
            return Request('%s%s' % (self.baseUrl, page), meta=dict(page=page)) 
```

# windows - 画布未在 Windows Chrome 中显示/绘制任何内容

> ID：15865613
> 
> 赞同：2
> 
> 时间：2013-04-07T17:43:12.533
> 
> 标签：windows, canvas

我有一个问题，以下代码适用于：*IE 10*、*Firefox*、*Safari*、*Mac Chrome*，但不适用于*Windows Chrome*。

```
$(function () {
    var video_dom = document.querySelector('#v');
    var canvas_draw = document.querySelector('#c');

    var draw_interval = null;

    video_dom.addEventListener('play', function () {
        video_dom.width = canvas_draw.width = video_dom.offsetWidth;
        video_dom.height = canvas_draw.height = video_dom.offsetHeight;
        var ctx_draw = canvas_draw.getContext('2d');
        draw_interval = setInterval(function () {
            ctx_draw.drawImage(video_dom, 0, 0, video_dom.width, video_dom.height);
            var dataURL = canvas_draw.toDataURL();
            document.getElementById('canvasImg').src = dataURL;
        }, 3500)

    }, false);
})(); 
```

我也在控制台中收到此错误，例如：`Uncaught TypeError: object is not a function`。
为什么画布在*Mac*版本中可以工作，而在*Windows*版本的*Chrome*中不行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T18:01:53.623

当您不使用 jQuery 时，我不明白为什么您在函数前面使用美元符号 ($)。

```
window.onload = function () {
    var video_dom = document.querySelector('#v');
    var canvas_draw = document.querySelector('#c');

    ...

}; 
```

应该清除错误。

# c++ - 如何运行 GDB，在命令行中输入文本并查看可执行文件如何处理这些条目？

> ID：15865614
> 
> 赞同：2
> 
> 时间：2013-04-07T17:43:14.297
> 
> 标签：c++, c, linux, emacs, gdb

您如何运行`GDB`，同时允许从命令行交互式输入字符，同时“打印”从这些条目中解析的字符产生的变量值？

换句话说，我如何运行 gdb，在命令行中输入文本并查看可执行文件如何处理这些条目？

如果我在 Emacs 中使用 gdb 运行它，它的行为也有什么不同`M-x gdb`吗？暂停可执行文件`C-c C-c`然后尝试打印变量值的行为不像我预期的那样。它似乎没有从正在调试的挂起的可执行文件中识别出有效的变量值。`Clang`我确实生成了一个带有`-ggdb -O0`标志的“可调试”可执行文件。

我还尝试将 gdb 链接到在单独终端中运行的程序可执行文件的 pid，但仍然遇到困难。程序需要交互解析命令行条目；我不能将它们作为初始命令行参数传递。

我希望我把我的问题说清楚了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T12:02:30.440

启动 Mx gdb 后，输入 Mx gdb-many-windows 。这会在您的框架中打开新窗口，其中显示堆栈、断点、本地变量、您的代码和程序的 I/O，这意味着如果您在此处键入，输入将被提供给您的可执行文件。

# haskell - cabal install cabal-install 由于“缺少”安装包而失败

> ID：15865617
> 
> 赞同：3
> 
> 时间：2013-04-07T17:43:26.520
> 
> 标签：haskell, cabal, cabal-install

我刚刚更新了 haskel-platform 进行了 cabal 更新，并被告知有一个新版本的 cabal-install 我应该更新到。所以我做了一个 cabal install cabal-install 并得到：

```
cabal: The following installed packages are broken because other packages they
depend on are missing. These broken packages must be rebuilt before they can
be used.
package random-1.0.1.1 is broken due to missing package
base-4.5.1.0-47f48c3ae7f8256a66a23e9dfe22eefc
cabal: Error: some packages failed to install:
cabal-install-1.16.0.2 failed during the configure step. The exception was:
ExitFailure 1 
```

问题是，如果我执行 cabal install random，我会看到该版本的 random 已经安装：

```
 => cabal install random
Resolving dependencies...
All the requested packages are already installed:
random-1.0.1.1 
```

我不知道是什么问题或如何解决它

# android - Android 图像识别 API/库（不在云端）

> ID：15865623
> 
> 赞同：6
> 
> 时间：2013-04-07T17:43:37.450
> 
> 标签：android, image-processing, image-recognition

我已经搜索了一个好的 Android Image Recognition API/库。我找到了一些，但它们不适合我，因为我们必须将图像放在他们的服务器上。我想要一个允许您在自己的服务器上搜索的。

我的数据库中有一个产品列表（名称+图像）。我想让用户用他的手机拍照并获取相关产品图像。

**编辑**

经过搜索，我还没有找到一个完全适合我需要的库（在你自己的服务器上搜索）。但是我发现了一个与其他相比更完美的（将元数据附加到带有 json 的图像，为一个项目上传多个图像）：**Kooaba**。不幸的是，没有适用于 Kooaba 的 Android 库。如果您能推荐类似 Kooaba for Android 之类的东西，那就太棒了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-06T20:35:30.273

Opencv 是 intel 用 C++ 编写的计算机视觉库集。它有一个我用过的 android 版本，但你需要尽可能最新的 android 手机。因为使用 2.2 和 2.3 版本，你只能运行CV Camera App.So 我会说 API 级别 11 或更高级别的设备更好。如果你在linux中使用它是最合适的

1.  安装Linux（Ubuntu）
2.  下载适用于 Linux 的 Android SDK
3.  下载适用于 Linux 的 Android NDK
4.  下载[适用于 Android 的 OpenCV](http://opencv.org/platforms/android/)
5.  这是斯坦福大学的[For-API8](http://www.stanford.edu/class/ee368/Android/Tutorial-2-OpenCV-for-Android-Setup-Linux-API8.pdf)和[For-API11](http://www.stanford.edu/class/ee368/Android/Tutorial-2-OpenCV-for-Android-Setup-Linux-API11.pdf)教程，可帮助您开始使用 opencv 和 android
6.  斯坦福的另一个页面以获得一些帮助

希望它有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-03T15:09:04.823

moodstocks.com 怎么样？这是一个不错的图书馆，就像一个魅力

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-02T12:56:25.240

您可以使用 OpenCV sdk 进行图像检测。如果您只是想识别人脸，请使用 androids 自己的类，请参阅此链接[http://www.developer.com/ws/android/programming/face-detection-with-android-apis.html](http://www.developer.com/ws/android/programming/face-detection-with-android-apis.html)

# c++ - 是索引一个新的地图元素并将读取它的东西分配给它未定义的行为，还是只是未指定？

> ID：15865627
> 
> 赞同：4
> 
> 时间：2013-04-07T17:43:51.800
> 
> 标签：c++, undefined-behavior, operator-precedence, sequence-points, unspecified-behavior

在回答[了这个问题](https://stackoverflow.com/questions/15856027/c-conditionally-inserting-a-key-and-value-into-a-stdmap)之后，关于有问题的代码是否是未定义的行为进行了长时间的讨论。这是代码：

```
std::map<string, size_t> word_count;
word_count["a"] = word_count.count("a") == 0 ? 1 : 2; 
```

首先，这是公认的，这至少是未指定的。结果根据首先评估作业的哪一侧而有所不同。在我的回答中，我跟踪了四个结果案例中的每一个，其中首先评估了哪一方的因素以及该元素在此之前是否存在。

还出现了一个简短的表格：

```
(x = 0) = (x == 0) ? 1 : 2; //started as
(x = 0) = (y == "a") ? 1 : 2; //changed to 
```

我声称它更像这样：

```
(x = 0, x) = (x == 0) ? 1 : 2; //comma sequences x, like [] should 
```

最终，我找到了一个似乎对我有用的例子：

```
i = (++i,i++,i); //well-defined per SO:Undefined Behaviour and Sequence Points 
```

回到原来的，我把它分解成相关的函数调用，以便更容易理解：

```
operator=(word_count.operator[]("a"), word_count.count("a") == 0 ? 1 : 2);
   ^       inserts element^                        ^reads same element
   |
assigns to element 
```

如果`word_count["a"]`不存在，则有人认为它将被分配两次，而两者之间没有排序。如果我认为是真的两件事实际上是：

1.  When a side is picked to be evaluated, the whole side has to be evaluated before the other side can start.

2.  诸如 word_count["a"] = 1 之类的结构表现出明确定义的行为，即使在插入元素然后分配给它的情况下也是如此。

这两个说法是真的吗？最终，这实际上是未定义的行为吗？如果是，为什么第二个语句起作用（假设它起作用）？如果第二个是假的，我相信`myMap[i]++;`世界上所有的 s 都是不正确的。

有用的链接：[未定义的行为和序列点](https://stackoverflow.com/questions/4176328/undefined-behavior-and-sequence-points)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T18:38:34.803

**行为是未指定的，但不是 undefined**。

请注意，在表达式中：

```
word_count["a"] = word_count.count("a") == 0 ? 1 : 2;
//              ^ 
```

用 标记的赋值运算符`^`是**内置的**赋值运算符，因为`std::map`'`operator []`返回 a `size_t&`。

根据 C++11 标准关于内置赋值运算符的第 5.17/1 段：

> 赋值运算符 (=) 和复合赋值运算符都从右到左分组。[..]**在所有情况下，赋值都是在左右操作数的值计算之后和赋值表达式的值计算之前进行排序的**。对于不确定顺序的函数调用，复合赋值的操作是单次求值。

这意味着在内置分配中，例如：

```
a = b 
```

首先计算操作数（按未指定的顺序），然​​后执行赋值，最后执行整个赋值表达式的值计算。

考虑原始表达式：

```
word_count["a"] = word_count.count("a") == 0 ? 1 : 2;
//              ^ 
```

由于上面引用的段落，在任何情况下都不会对同一个对象进行两个未排序**的赋值：标记为的赋值`^`将始终在由*`operator []`****（作为左侧表达式评估的一部分）执行的赋值***之后***`"a"`排序，以防键地图中不存在。*

 *但是，根据首先评估分配的哪一侧，表达式将具有不同的结果。因此，行为是未指定的，但不是未定义的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T18:30:51.583

它是未指定的，但不是未定义的。

`word_count.operator[]("a")`并且`word_count.count("a")`是函数调用。标准保证函数执行不会交错 - 第一个在第二个之前完全排序，或者相反。

具体定义可能因标准而异，在 C++11 中的相关条款在 1.9/15 中：

> 调用函数（包括其他函数调用）中的每个求值，如果在被调用函数的主体执行之前或之后没有特别排序，则相对于被调用函数的执行是*不确定*的。⁹
> 
> 9) 换句话说，函数执行不会相互交错。

*不确定排序*在 1.9/13 中定义：

> 当 A 在 B 之前排序或 B 在 A 之前排序时，评估 A 和 B 的排序不确定，但未指定哪个。

例如，评估：

```
word_count["a"] = word_count.count("a"); 
```

由三部分组成：

1.  执行`word_count.operator[]("a")`
2.  执行`word_count.count("a")`
3.  任务

让`<`意思是“之前排序”。引用的部分标准保证要么`1 < 2`要么`2 < 1`. @Andy Prowl 回答中引用的部分也表明`1 < 3`和`2 < 3`。所以，只有两种选择：

*   `1 < 2 < 3`
*   `2 < 1 < 3`

在这两种情况下，一切都已完全排序，UB 没有机会。*

# multithreading - 德克尔算法

> ID：15865629
> 
> 赞同：2
> 
> 时间：2013-04-07T17:44:00.800
> 
> 标签：multithreading, mutual-exclusion

我知道dekker算法看起来如何，但为什么这样的东西不起作用？

```
static void Enter(int i)
    {
        int j = 1 - i;
        flags[i] = true;
        if(flags[j])
        {
            while (turn!=i)
            {                    
            }
        }
    }
    static void Exit(int i)
    {
        flags[i] = false;
        turn = 1 - i;
    } 
```

我的解决方案有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-18T10:32:58.937

有一些方法可以简化[Dekker 算法](http://en.wikipedia.org/wiki/Dekker_algorithm)，例如[Peterson 算法](http://en.wikipedia.org/wiki/Peterson%27s_algorithm)，您的代码与它们非常相似。根据 wiki，Dekker 是该问题的第一个正确解决方案，所以难怪他在第一次尝试时没有得到最简单的代码。

短暂查看后，您的代码似乎可以正常工作，但如果没有正式的证明，则无法保证。

# haskell - A型不等于Haskell（ghci解释器）中的A型？

> ID：15865631
> 
> 赞同：1
> 
> 时间：2013-04-07T17:44:04.623
> 
> 标签：haskell, types, shadowing

GHCi 告诉我 type`A`不是 type `A`。为什么？

```
>>> data A = A
>>> let x = A
>>> let id A = A
>>> 
>>> data A = A
>>> let x' = A
>>> let id' A = A
>>> 
>>> data A = A
>>>
>>> let y = id' x

<interactive>:18:13:
    Couldn't match expected type `main::Interactive.A'
                with actual type `main::Interactive.A'
    In the first argument of id', namely `x'
    In the expression: id' x
    In an equation for `y': y = id' x 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-07T17:50:12.917

GHCi 在处理范围时有一些奇怪的行为，这里有一个较短的会话清楚地证明了这一点：

```
Prelude> data A = A
Prelude> let meh A = A
Prelude> data A = A
Prelude> meh A

<interactive>:5:5:
    Couldn't match expected type `main::Interactive.A'
            with actual type `A'
    In the first argument of `meh', namely `A'
    In the expression: meh A
    In an equation for `it': it = meh A 
```

就 GHCi 而言，您不妨这样做：

```
Prelude> data A = A
Prelude> let meh A = A
Prelude> data A' = A'
Prelude> meh A'

<interactive>:5:5:
    Couldn't match expected type `A' with actual type A'
    In the first argument of `meh', namely A'
    In the expression: meh A'
    In an equation for `it': it = meh A' 
```

它将其视为完全不同的数据类型，只是它们具有相同的名称。

您可以[在此处](http://www.haskell.org/ghc/docs/7.6.2/html/users_guide/interactive-evaluation.html)阅读所有相关信息。相关部分为 2.4.4。

# javascript - 动画步骤函数中的 jQuery 对象在每个函数调用上返回“未定义”

> ID：15865632
> 
> 赞同：1
> 
> 时间：2013-04-07T17:44:07.313
> 
> 标签：javascript, jquery, animation

我正在尝试使用以下代码稍微修改 jQuery 动画：

```
web_links.mouseenter(function() {
    var site = $(this).closest('.site');
    var image = site.find('.image').first();
    var offset = '-' + image.height();
    var caption = site.closest('.caption').first();                    
    site.find('.image').first().stop().animate({top: offset}, {
        duration: 400,
        step: function(curTop) {
            console.log(caption);
            console.log(caption.css("top");
            if (curTop < -191) {
                caption.css({top: curTop + "px"});
            }
        }
    });
}); 
```

奇怪的是，标题似乎是一个有效的 jQuery 对象`css()`，但是当我尝试调用它的`css()`方法时，它返回`undefined`. 当我尝试时也会发生同样的情况`offset()`。

有谁知道为什么会发生这种情况？一夜之间我一直在绞尽脑汁，但这似乎没有任何意义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T17:51:15.027

我猜这行不匹配任何元素：

```
var caption = site.closest('.caption').first(); 
```

测试`.length`以确定。如果是`0`，那就是问题所在。

```
console.log(caption.length); 
```

* * *

FWIW，你不需要`.first()`after `.closest()`，因为返回元素`.closest()`的最大值......因此是函数名的一部分。;-)`1``"est"`

# c++ - 内联函数和类和头文件

> ID：15865634
> 
> 赞同：4
> 
> 时间：2013-04-07T17:44:30.993
> 
> 标签：c++, class, inline, one-definition-rule

1.  头文件中定义的任何函数都会自动内联吗？
2.  如果我在一个类中声明一个函数并在外部使用关键字 inline 给出定义，这个函数会是内联的吗？如果是的话，为什么这不违反内联函数在声明时应该被赋予主体的法律？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-07T17:53:41.017

在类定义中定义的任何函数都是内联的。任何标记`inline`的函数也是内联的。

```
class C {
    int f() { return 3; } // inline
    int g();
    int h();
}

inline int C::g() { return 4; } // inline
int C::h() { return 5; } // not inline 
```

如果所有这些代码都在一个标题中，并且该标题用于多个翻译单元，您将收到`C::h`包含多个定义的投诉。`C::f`并且`C::g`没关系，因为它们是内联的。这就是当今的主要作用`inline`：允许在多个地方定义相同的函数（只要定义是“相同的”）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-07T17:52:09.230

> 头文件中定义的任何函数都会自动内联吗？

不，您应该手动将在类主体之外定义的任何函数内联。否则，您很可能会违反[ODR （如果在多个翻译单元中包含标题）。](http://en.wikipedia.org/wiki/One_Definition_Rule)

ISO C++11

> 3.2 一定义规则
> 
> 1：任何翻译单元不得包含一个以上的任何变量、函数、类类型、枚举类型或模板的定义。
> 
> [...]
> 
> 4：**每个程序都应包含该程序中odr使用的每个非内联函数**或变量的准确定义；无需诊断。定义可以显式出现在程序中，可以在标准或用户定义库中找到，或者（在适当时）隐式定义（参见 12.1、12.4 和 12.8）。内联函数应在使用它的每个翻译单元中定义。

* * *

> 如果我在一个类中声明一个函数并使用关键字 inline 在外部给出定义，这个函数会是内联的吗？如果是的话，为什么这不违反内联函数在声明时应该被赋予主体的法律？

有几种方法可以内联成员函数：

一、根据7.1.2/3：

> **在类定义中定义的函数是内联函数**。inline 说明符不应出现在块作用域函数声明中。90 如果在友元声明中使用了 inline 说明符，则该声明应为定义，或者该函数应先前已被声明为内联。

```
struct First
{
    void first(){}
}; 
```

二、三、四，根据9.3/3：

> 内**联**成员函数（无论是静态的还是非静态的）也可以在其类定义之外定义**，只要它在类定义中的声明或其在类定义之外的定义将该函数声明为 inline**。[注意：命名空间范围内的类的成员函数具有外部链接。本地类 (9.8) 的成员函数没有链接。见 3.5。——尾注]

```
struct STF
{
    void second();
    inline void third();
    inline void fourth();
};

inline void STF::second(){}
void STF::third(){}
inline void STF::fourth(){} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T17:45:59.880

`inline`是一个“提示”，只要编译器不必遵守它。它可以使您未标记为内联的内容内联，并且不必内联您标记为内联的内容。

我的意思是你不应该依赖它。许多人建议您甚至不要使用它，因为它具有误导性。大多数现代编译器完全忽略它。

唯一的实际用途是允许您将静态实现放入标题中。这是否是一件好事是有争议的。

# jquery - jQuery：使用视口固定段落位置的每个标题

> ID：15865636
> 
> 赞同：0
> 
> 时间：2013-04-07T17:44:47.930
> 
> 标签：jquery, css, scroll, viewport

我有一组带有段落的文章。当用户滚动到那篇文章时，我试图让每篇文章的每个标题/标题都有一个固定的位置，而不使用视口插件。

这就是我正在使用的：

```
$(window).scroll(function() {

    var winTop = $(this).scrollTop();
    var $divs = $('div');

    var top = $.grep($divs, function(item) {
        return $(item).position().top <= winTop;
    });

    $divs.removeClass('active');
    $(top).addClass('active');

}); 
```

在我的示例中，每个标题在通过它时都会得到固定的位置，并且我最终会得到所有位置固定的标题。

## **小提琴：http: [//jsfiddle.net/C2SWa/](http://jsfiddle.net/C2SWa/)**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T18:03:39.393

这是我很久以前学习jQuery时发现的代码。

**HTML：**

```
<div id="header1" class="header fixed">
    <h2>Header1</h2>
</div>
<div id="header1_content">
    <p>Lorem ipsum dolor sit amet...</p>
</div>

<div id="header2" class="header relative">
    <h2>Header2</h2>
</div>
<div id="header2_content">
    <p>Lorem ipsum dolor sit amet...</p>
</div>

<div id="header3" class="header relative">
    <h2>Header3</h2>
</div>
<div id="header3_content">
    <p>Lorem ipsum dolor sit amet...</p>
</div> 
```

**CSS：**

```
p {
    background-color:#F0F0F0;
}

.header {
    background-color:#CCC;
    width:100%;
    top:0;
    left:0;
}

.header h2 {
    margin:20px;
}

.fixed {
    position:fixed;
}

.relative {
    position:static;
}

#header1_content {
    margin-top:80px;
} 
```

**jQuery：**

```
$(function(){
    var lastScrollTop = 0;
    $(window).scroll(function(event){
       var currentScrollTop = $(this).scrollTop();
       if (currentScrollTop > lastScrollTop){

            // Scrolling down
            $('.header').each(function(){
                if($(this).hasClass('fixed'))
                { 
                    var _next_header = $(this).nextUntil('.header').next('.header');
                    if($(_next_header).length > 0)
                    {
                        if(($(this).offset().top + $(this).height()) >= $(_next_header).offset().top)
                        {
                            // Bottom of header hit top of next header
                            $(this).removeClass('fixed').addClass('relative');
                            $(_next_header).removeClass('relative').addClass('fixed');
                        }
                    }
                }
            }); 
        } 
        else 
        {
            // Scrolling up
            $('.header').each(function(){
                if($(this).hasClass('fixed'))
                { 
                    var _prev_header = $(this).prevUntil('.header').prev('.header');
                    if($(_prev_header ).length > 0)
                    {
                        if($(this).offset().top <= ($('#' + $(_prev_header).attr('id') + '_content').offset().top + $(this).height()))
                        {
                            // Top of header hit bottom of previous content box
                            $(this).removeClass('fixed').addClass('relative');
                            $(_prev_header).removeClass('relative').addClass('fixed');
                        }
                    }
                }
            }); 
        }
        lastScrollTop = currentScrollTop;
    });
}); 
```

`**[Working Demo](http://jsfiddle.net/Aj4nN/)**`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T18:03:41.330

使用这个 jQuery 插件会更容易： [jQuery.stickysectionheaders](http://polarblau.github.io/stickySectionHeaders/)

# javascript - Grunt 模板任务

> ID：15865641
> 
> 赞同：1
> 
> 时间：2013-04-07T17:45:13.630
> 
> 标签：javascript, gruntjs

在我的 index.html 文件中，我想在生产中包含一个与我在开发中使用不同的 javascript 源文件。我在开发中使用 requirejs 并希望在生产中使用单个缩小文件。

该项目
[https://github.com/CaryLandholt/AngularFun](https://github.com/CaryLandholt/AngularFun)
正是我想要的。

在我的项目中，我试图让 grunt 运行模板任务，但我遇到了知道如何完成任务的问题：“找不到任务'模板'”。

**我在 AngularFun 项目的依赖项中没有看到任何明显的东西可以让 grunt 正确处理模板任务，但项目可以正确构建。我错过了什么？**

我在这里问是因为我已经看到了几个处理 prod/dev 中不同文件的问题，而 AngularFun 项目看起来是一个不错的方法。

我在 initConfig 中有一个包含以下内容的 Gruntfile：

```
template: {
  dev: {
    files: {
      "index.html": "index.template"
    },
    environment: "dev"
  },
  prod: {
    files: "<% template.dev.files %>",
    environment: "prod"
  }
} 
```

我还将以下内容作为我的 grunt 默认值：

```
grunt.registerTask("default", ["template:dev"]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T01:03:56.150

模板任务位于[grunt-hustler中，这是一个 npm 包，必须在](https://github.com/CaryLandholt/grunt-hustler)[package.json](https://github.com/CaryLandholt/AngularFun/blob/master/package.json)文件中将其列为依赖项，以便`npm install`找到它并使其可用于您的项目。

我的 grunt-hustler 文档严重缺乏。

# ruby - Ruby修改一段字符串

> ID：15865642
> 
> 赞同：3
> 
> 时间：2013-04-07T17:45:15.650
> 
> 标签：ruby, string

对 Ruby 来说是全新的。这是一个简单的家庭作业。secret_code 函数需要接受输入字符串并执行以下操作：

1.  在空格前的第一个字母块中，除第一个字符之外的所有字母都大写
2.  反转字符串

因此，如果输入是“超级骗子”，则输出应该是“repud REPUs”。

我将函数编码如下：

```
def secret_code(input) 
  input.split(" ").first[1..-1].each_char do |i|
    input[i] = i.upcase
  end
  return input.reverse
end 
```

它通过了单元测试，但我想知道是否有更好的编码方法。是否可以避免使用循环？我试过

```
return input.split(" ").first[1..-1].upcase.reverse 
```

但这并不完全奏效。任何关于如何清理它的想法都值得赞赏！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-07T17:58:37.760

```
"super duper".sub(/(?<=.)\S+/, &:upcase).reverse 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T17:57:48.493

这个怎么样：

```
def secret_code(input)
  first_space = input.index(' ')
  (input[0] + input[1...first_space].upcase + input[first_space..-1]).reverse
end 
```

请注意，在 Ruby 中，始终返回方法中的最后一个表达式评估，因此您可以省略 final `return`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T18:00:34.410

```
s = "super duper"

words = s.split(' ')
words.first[1..-1] = words.first[1..-1].upcase
words.each { |word| word.reverse! }
s = words.reverse.join(' ')
puts s # => repud REPUs 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-07T18:16:53.563

不一定更好，但可以肯定的是，它可以在没有循环的情况下完成......

```
def f x
  (b = [(a = x.split)[0].upcase, *a.drop(1)].join(' ').reverse)[-1] = x[0, 1]
  return b
end 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-08T07:34:01.893

*您可以尝试以下方法：*

```
a = "super duper"
p a.gsub(a.split[0...1].join(' '),a.split[0...1].join(' ').capitalize.swapcase).reverse 
```

***输出：***

```
"repud REPUs" 
```

# java - java Graphics2D的drawString质量

> ID：15865648
> 
> 赞同：2
> 
> 时间：2013-04-07T17:45:34.903
> 
> 标签：java, swing, fonts, awt, drawstring

我对 drawString 函数的质量有疑问，目前我有这张图片： [![例子](https://i.stack.imgur.com/dGEbc.jpg)](https://i.stack.imgur.com/dGEbc.jpg)

基本上你在底部中间看到的是一张按其大小的 125% 绘制的卡片。背景中的卡片相对大小为 50% 和 25%。

然而，我注意到描述框中的文字质量不如应有的好。我同意字体大小不是那么大，但为了适应所有文本，我需要想出一些解决方案，这似乎是目前最好的。

卡片类：

```
package gui;

import java.awt.AlphaComposite;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Font;
import java.awt.FontMetrics;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Polygon;
import java.awt.RenderingHints;
import java.awt.font.GlyphVector;
import java.awt.font.LineMetrics;
import java.awt.image.BufferedImage;
import javax.swing.JPanel;
import model.cards.Card;

/**
 *
 * @author Frank
 */
public class CardPanel extends JPanel {    
    private static final Dimension CARD_DIMENSION = new Dimension(250, 350);

    private final Card card;
    private final double scale;
    private final boolean defaultOrientation;

    private BufferedImage bufferedImage;
    private BufferedImage scaledImage;

    private BufferedImage backBufferedImage;
    private BufferedImage backScaledImage;

    public CardPanel(final Card card, final double scale) {
        this(card, scale, true);
    }

    public CardPanel(final Card card, final double scale, final boolean defaultOrientation) {
        this.card = card;
        this.scale = scale;
        this.defaultOrientation = defaultOrientation;
        createImage();
        scaleImage();
        createBackImage();
        scaleBackImage();
        this.setPreferredSize(new Dimension(scaledImage.getWidth(), scaledImage.getHeight()));
    }

    public Card getCard() {
        return card;
    }

    public double getScale() {
        return scale;
    }

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        Graphics2D g2d = (Graphics2D)g.create();

        //Graphics quality
        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
        g2d.setRenderingHint(RenderingHints.KEY_ALPHA_INTERPOLATION, RenderingHints.VALUE_ALPHA_INTERPOLATION_QUALITY);
        g2d.setRenderingHint(RenderingHints.KEY_COLOR_RENDERING, RenderingHints.VALUE_COLOR_RENDER_QUALITY);
        g2d.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);
        g2d.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);

        g2d.setComposite(AlphaComposite.Clear);
        g2d.clearRect(0, 0, scaledImage.getWidth(), scaledImage.getHeight());

        g2d.setComposite(AlphaComposite.SrcOver);

        if (card.getFlipped()) {
            g2d.drawImage(scaledImage, 0, 0, null);
        }
        else {
            g2d.drawImage(backScaledImage, 0, 0, null);
        }

        g2d.dispose();
    }

    public BufferedImage getImage() {
        if (card.getFlipped()) {
            return scaledImage;
        }
        else {
            return backScaledImage;
        }
    }

    private void scaleImage() {
        scaledImage = new BufferedImage((int)Math.floor(scale * CARD_DIMENSION.width), (int)Math.floor(scale * CARD_DIMENSION.height), BufferedImage.TYPE_INT_ARGB);
        Graphics2D g2d = (Graphics2D)scaledImage.getGraphics();

        //Graphics quality
        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
        g2d.setRenderingHint(RenderingHints.KEY_ALPHA_INTERPOLATION, RenderingHints.VALUE_ALPHA_INTERPOLATION_QUALITY);
        g2d.setRenderingHint(RenderingHints.KEY_COLOR_RENDERING, RenderingHints.VALUE_COLOR_RENDER_QUALITY);
        g2d.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);
        g2d.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);

        g2d.scale(scale, scale);

        g2d.drawImage(bufferedImage, 0, 0, null);

        g2d.dispose();
    }

    private void scaleBackImage() {
        backScaledImage = new BufferedImage((int)Math.floor(scale * CARD_DIMENSION.width), (int)Math.floor(scale * CARD_DIMENSION.height), BufferedImage.TYPE_INT_ARGB);
        Graphics2D g2d = (Graphics2D)backScaledImage.getGraphics();

        //Graphics quality
        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
        g2d.setRenderingHint(RenderingHints.KEY_ALPHA_INTERPOLATION, RenderingHints.VALUE_ALPHA_INTERPOLATION_QUALITY);
        g2d.setRenderingHint(RenderingHints.KEY_COLOR_RENDERING, RenderingHints.VALUE_COLOR_RENDER_QUALITY);
        g2d.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);
        g2d.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);

        g2d.scale(scale, scale);

        g2d.drawImage(backBufferedImage, 0, 0, null);

        g2d.dispose();
    }

    private void createImage() {
        bufferedImage = new BufferedImage(CARD_DIMENSION.width, CARD_DIMENSION.height, BufferedImage.TYPE_INT_ARGB);
        final Graphics2D g2d = (Graphics2D)bufferedImage.createGraphics();

        //Graphics quality
        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
        g2d.setRenderingHint(RenderingHints.KEY_ALPHA_INTERPOLATION, RenderingHints.VALUE_ALPHA_INTERPOLATION_QUALITY);
        g2d.setRenderingHint(RenderingHints.KEY_COLOR_RENDERING, RenderingHints.VALUE_COLOR_RENDER_QUALITY);
        g2d.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);
        g2d.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);

        if (!defaultOrientation) {
            g2d.rotate(Math.toRadians(180), bufferedImage.getWidth() / 2, bufferedImage.getHeight() / 2);
        }

        final int red = card.getColor().getRed();
        final int green = card.getColor().getGreen();
        final int blue = card.getColor().getBlue();
        final Color color = new Color(red, green, blue);

        new CustomRectangle(bufferedImage, CARD_DIMENSION.width, CARD_DIMENSION.height, 0, 0, 5, defaultOrientation) {
            @Override
            public void inBorder(final int dx, final int dy) {
                setColor(new Color(red, green, blue, 255 - Math.min(dx, dy)));
            }

            @Override
            public void outBorder(final int dx, final int dy) {
                setColor(new Color(red, green, blue, 192 - Math.min(dx, dy)));
            }
        }.draw();

        //Element
        g2d.setColor(color);
        g2d.fillPolygon(createPolygon(30, 30, 20, 20, 6));

        g2d.setColor(Color.GRAY);
        g2d.fillPolygon(createPolygon(30, 30, 15, 15, 6));

        //Name
        new CustomRectangle(bufferedImage, 140, 40, 55, 10, 5, defaultOrientation) {
            @Override
            public void inBorder(final int dx, final int dy) {
                setColor(new Color(red, green, blue, 255 - Math.min(dx, dy)));
            }

            @Override
            public void outBorder(final int dx, final int dy) {
                setColor(new Color(red, green, blue, 128 - Math.min(dx, dy)));
            }
        }.draw();

        //Display name
        double nameStringX = 55 + (140 / 2);
        double nameStringY = 10 + (40 / 2);
        drawString(g2d, card.getName(), nameStringX, nameStringY, 40, Font.PLAIN, false, 0, 0);

        //HP
        g2d.setColor(color);
        g2d.fillPolygon(createPolygon(220, 30, 20, 20, 6));

        g2d.setColor(Color.GRAY);
        g2d.fillPolygon(createPolygon(220, 30, 15, 15, 6)); 

        //Display hp
        double hpStringX = 220;
        double hpStringY = 30;
        drawString(g2d, card.getHitpoints() + "", hpStringX, hpStringY, 30, Font.PLAIN, false, 0, 0);

        //Image
        new CustomRectangle(bufferedImage, 220, 185, 15, 55, 5, defaultOrientation) {
            @Override
            public void inBorder(final int dx, final int dy) {
                setColor(new Color(red, green, blue, 255 - Math.min(dx, dy)));
            }

            @Override
            public void outBorder(final int dx, final int dy) {
                setColor(Color.GRAY);
            }
        }.draw();     

        //Description
        new CustomRectangle(bufferedImage, 220, 90, 15, 245, 5, defaultOrientation) {
            @Override
            public void inBorder(final int dx, final int dy) {
                setColor(new Color(red, green, blue, 255 - Math.min(dx, dy)));
            }

            @Override
            public void outBorder(final int dx, final int dy) {
                setColor(new Color(red, green, blue, 128 - Math.min(dx, dy)));
            }
        }.draw();  

        //Display description
        double descriptionStringX = 15 + 5 + 5;
        double descriptionStringY = 245 + 5;
        drawString(g2d, card.getDescription(), descriptionStringX, descriptionStringY, 18, Font.PLAIN, true, 220 - (2 * (5 + 5)), 30);

        //Atk
        g2d.setColor(color);
        g2d.fillPolygon(createPolygon(30, 320, 20, 20, 6));

        g2d.setColor(Color.GRAY);
        g2d.fillPolygon(createPolygon(30, 320, 15, 15, 6));

        //Display atk
        double atkStringX = 30;
        double atkStringY = 320;
        drawString(g2d, card.getAttack() + "", atkStringX, atkStringY, 30, Font.PLAIN, false, 0, 0);

        //Def
        g2d.setColor(color);
        g2d.fillPolygon(createPolygon(220, 320, 20, 20, 6));

        g2d.setColor(Color.GRAY);
        g2d.fillPolygon(createPolygon(220, 320, 15, 15, 6));

        //Display def
        double defStringX = 220;
        double defStringY = 320;
        drawString(g2d, card.getDefence() + "", defStringX, defStringY, 30, Font.PLAIN, false, 0, 0);

        g2d.dispose();
    }

    private void createBackImage() {
        backBufferedImage = new BufferedImage(CARD_DIMENSION.width, CARD_DIMENSION.height, BufferedImage.TYPE_INT_ARGB);
        final Graphics2D g2d = (Graphics2D)backBufferedImage.createGraphics();

        //Graphics quality
        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
        g2d.setRenderingHint(RenderingHints.KEY_ALPHA_INTERPOLATION, RenderingHints.VALUE_ALPHA_INTERPOLATION_QUALITY);
        g2d.setRenderingHint(RenderingHints.KEY_COLOR_RENDERING, RenderingHints.VALUE_COLOR_RENDER_QUALITY);
        g2d.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);
        g2d.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR); 

        if (!defaultOrientation) {
            g2d.rotate(Math.toRadians(180), backBufferedImage.getWidth() / 2, backBufferedImage.getHeight() / 2);
        }

        final int red = 150;
        final int green = 75;
        final int blue = 0;

        new CustomRectangle(backBufferedImage, CARD_DIMENSION.width, CARD_DIMENSION.height, 0, 0, 5, defaultOrientation) {
            @Override
            public void inBorder(final int dx, final int dy) {
                setColor(new Color(red, green, blue, 255 - Math.min(dx, dy)));
            }

            @Override
            public void outBorder(final int dx, final int dy) {
                setColor(new Color(red, green, blue, 192 - Math.min(dx, dy)));
            }
        }.draw();

        g2d.dispose();
    }

    private Polygon createPolygon(final int xOffset, final int yOffset, final int xDiameter, final int yDiameter, final int sides) {
        Polygon polygon = new Polygon();
        for (int i = 0; i < sides; i++) {
            int px = (int)Math.round(xOffset + (xDiameter * Math.cos(i * 2 * Math.PI / sides)));
            int py = (int)Math.round(yOffset + (yDiameter * Math.sin(i * 2 * Math.PI / sides)));
            polygon.addPoint(px, py);
        }
        return polygon;
    }

    private void drawString(final Graphics2D g2d, final String string, final double xOffset, final double yOffset, final double size, final int style, final boolean description, double descriptionWidth, final double usedWidth) {
        double stringX = xOffset;
        double stringY = yOffset; 
        g2d.setFont(new Font("SansSerif"/*g2d.getFont().getFamily()*/, style, (int)Math.round(size * 0.9 * 0.5)));
        FontMetrics fontMetrics = g2d.getFontMetrics();
        LineMetrics lineMetrics = g2d.getFont().getLineMetrics(string, g2d.getFontRenderContext());
        if (!description) {
            stringX -= (fontMetrics.stringWidth(string) / 2);
            stringY += ((lineMetrics.getAscent() + lineMetrics.getDescent()) / 2) - lineMetrics.getDescent();
            g2d.setColor(Color.BLACK);
            g2d.drawString(string, (int)Math.round(stringX), (int)Math.round(stringY));
        }
        else {
            stringY += lineMetrics.getAscent();
            double wordXOffset = 0;;
            double wordYOffset = 0;
            int yCount = 0;
            for (String word : string.split(" ")) {
                int width = fontMetrics.stringWidth(word + " ");
                if (wordXOffset + width > descriptionWidth) {
                    wordXOffset = 0;
                    wordYOffset = wordYOffset + fontMetrics.getHeight();
                    yCount++;
                    if (yCount == 3) {
                        descriptionWidth -= usedWidth;
                    }
                    if (yCount >= 3) {
                        wordXOffset += usedWidth;
                    }
                }
                g2d.drawString(word, (int)Math.round(stringX + wordXOffset), (int)Math.round(stringY + wordYOffset));
                wordXOffset += width;
            }
        }
    }
} 
```

我希望问题不会太长，但是有什么方法可以提高屏幕上绘制的文本的质量？

我可能会在某个时候将中间卡片的大小从 125% 更改为 200%，并将其显示在屏幕的中心位置，因此文本的质量必须尽可能高。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T17:54:01.870

Graphics2D 允许设置[渲染提示](http://docs.oracle.com/javase/6/docs/api/java/awt/Graphics2D.html#addRenderingHints%28java.util.Map%29)。尝试尝试，有[各种可能的选项](http://docs.oracle.com/javase/6/docs/api/java/awt/RenderingHints.html)，最佳值可能取决于所选字体和其他细节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T06:28:09.247

一个问题是如何扩展卡。看来您以 100% 创建了卡片的 BufferedImage 并将其缩放到 125%。此时，文本不再是文本，而是图像的一部分。从最大分辨率开始，一直到缩略图，您会更安全。如果允许字体以每种分辨率呈现，则外观将是最好的。

# java - 递归地将目录读入 Java 中的 ArrayList/Array

> ID：15865651
> 
> 赞同：0
> 
> 时间：2013-04-07T17:45:48.380
> 
> 标签：java, swing, recursion

我目前正忙于将目录读入 ArrayList 或者更好的是 Java 中的 Array。我想在 JTree 中使用数据。

这是我目前使用的代码：

```
//After the definiton of the Class
private ArrayList<File> files = new ArrayList<File>();

// In the main method
this.parse(new File("."));
DefaultMutableTreeNode root = processHierarchy(files.toArray());
this.tree = new JTree(root);

private void parse(File parent)
{
files.add(parent);
    if(parent.isDirectory())
    {
        System.out.println("DIR: "+parent.getName());

        String[] child = parent.list();

        if(child != null)
        {
            for(int i = 0; i < child.length; i++)
            {
                File f = new File(parent, child[i]);

                this.parse(f);
            }
        }
    }
    else
    {
        System.out.println("FILE: "+parent.getName());
    }
} 
```

有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T18:13:10.660

我在网上找到了这段代码，它搜索了一个路径，然后将其显示在`JTree`.

```
import javax.swing.*;
import javax.swing.tree.*;
import java.awt.event.*;
import java.awt.*;
import java.util.*;
import java.io.*;

public class SimpleTree extends JPanel {

JTree tree;
  DefaultMutableTreeNode root;
  public SimpleTree() {
    root = new DefaultMutableTreeNode("root", true);
    getList(root, new File("C:\\Program Files")); // change path here
    setLayout(new BorderLayout());
    tree = new JTree(root);
    tree.setRootVisible(false);
    add(new JScrollPane((JTree)tree),"Center");
    }

  public Dimension getPreferredSize(){
    return new Dimension(200, 120);
    }

  public void getList(DefaultMutableTreeNode node, File f) {
     if(!f.isDirectory()) {
         // We keep only JAVA source file for display in this HowTo
         if (f.getName().endsWith("java")) {
            System.out.println("FILE  -  " + f.getName());
            DefaultMutableTreeNode child = new DefaultMutableTreeNode(f);
            node.add(child);
            }
         }
     else {
         System.out.println("DIRECTORY  -  " + f.getName());
         DefaultMutableTreeNode child = new DefaultMutableTreeNode(f);
         node.add(child);
         File fList[] = f.listFiles();
         for(int i = 0; i  < fList.length; i++)
             getList(child, fList[i]);
         }
    }

  public static void main(String s[]){
    MyJFrame frame = new MyJFrame("Directory explorer");
    }
  }

class WindowCloser extends WindowAdapter {
  public void windowClosing(WindowEvent e) {
    Window win = e.getWindow();
    win.setVisible(false);
    System.exit(0);
    }
  }

class MyJFrame extends JFrame {
  JButton b1, b2, b3;
  SimpleTree panel;
  MyJFrame(String s) {
    super(s);
    panel = new SimpleTree();
    getContentPane().add(panel,"Center");
    setSize(300,300);
    setVisible(true);
    setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);
    addWindowListener(new WindowCloser());
    }

} 
```

来源：[http ://www.rgagnon.com/javadetails/java-0324.html](http://www.rgagnon.com/javadetails/java-0324.html)

# php - 使用带变量的 php 和 mysql 时插入 INTO

> ID：15865662
> 
> 赞同：-3
> 
> 时间：2013-04-07T17:46:36.283
> 
> 标签：php, mysql

这是代码。出现的错误是“'字段列表'中的未知列 $idUsager”。但是那个专栏是真实存在的。

php代码：

```
$idUsager = $_POST['idUsager'];
$secMoment = $_POST['secMoment'];
$aire = $_POST['aire'];
$longueur = $_POST['longueur']; 
$idMateriau = $_POST['idMateriau']; 

//I connect to db and everything works properly here. Also, all variables contain numeric values only. No strings.

$query='INSERT INTO lesPoutres(idPoutre,idUsager,secMoment,aire,longueur,idMateriau)        
        VALUES(null,$idUsager,$secMoment,$aire,$longueur,$idMateriau)';

$result=mysql_query($query, $lien_bd);
  if (!$result) {
    print("<strong>Erreur lors du traitement de la requ&ecirc;te : </strong>" . mysql_error());

  exit();
  } 
```

这是mysql表：

```
+------------+------------------+------+-----+---------+----------------+
| Field      | Type             | Null | Key | Default | Extra          |
+------------+------------------+------+-----+---------+----------------+
| idPoutre   | int(10) unsigned | NO   | PRI | NULL    | auto_increment |
| idUsager   | int(10) unsigned | NO   |     | NULL    |                |
| secMoment  | float unsigned   | NO   |     | NULL    |                |
| aire       | float unsigned   | NO   |     | NULL    |                |
| longueur   | float unsigned   | NO   |     | NULL    |                |
| idMateriau | int(5) unsigned  | NO   |     | NULL    |                |
+------------+------------------+------+-----+---------+----------------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T17:50:32.850

您需要将输入数据括在引号中：

替换这个

```
$query='INSERT INTO lesPoutres(idPoutre,idUsager,secMoment,aire,longueur,idMateriau)        
        VALUES(null,$idUsager,$secMoment,$aire,$longueur,$idMateriau)'; 
```

有了这个

```
$query="INSERT INTO lesPoutres(idPoutre,idUsager,secMoment,aire,longueur,idMateriau)        
        VALUES(null,'$idUsager','$secMoment','$aire','$longueur','$idMateriau')"; 
```

也使用 mysqli 或 PDO。mysql_* 函数已折旧。

还要在插入前转义变量以防止 SQL 注入

```
$idUsager = mysql_real_escape_string($_POST['idUsager']);
$secMoment = mysql_real_escape_string$_POST['secMoment']);
$aire = mysql_real_escape_string$_POST['aire']);
$longueur = mysql_real_escape_string$_POST['longueur']); 
$idMateriau = mysql_real_escape_string$_POST['idMateriau']); 
```

更多关于 mysqli 和 PDO 的信息可以在这里找到：http: [//php.net/manual/en/book.mysqli.php](http://php.net/manual/en/book.mysqli.php)和[http://php.net/manual/en/book.pdo.php](http://php.net/manual/en/book.pdo.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T17:47:38.807

**解决方案**

`"`将变量嵌入字符串时需要使用。

代替

```
$query='INSERT INTO lesPoutres(idPoutre,idUsager,secMoment,aire,longueur,idMateriau)        
    VALUES(null,$idUsager,$secMoment,$aire,$longueur,$idMateriau)'; 
```

和

```
$query="INSERT INTO lesPoutres(idPoutre,idUsager,secMoment,aire,longueur,idMateriau)        
    VALUES(null,$idUsager,$secMoment,$aire,$longueur,$idMateriau)"; 
```

**笔记**

`mysql_*`功能已弃用并将被删除。我建议您改用[mysqli](http://php.net/manual/en/book.mysqli.php)或[PDO](http://php.net/manual/en/book.pdo.php)。

**Sql 注入**

您的脚本容易受到 sql 注入的影响。你应该使用`mysql_real_escape_string`：

```
$idUsager = mysql_real_escape_string($_POST['idUsager']);
$secMoment = mysql_real_escape_string($_POST['secMoment']);
$aire = mysql_real_escape_string($_POST['aire']);
$longueur = mysql_real_escape_string($_POST['longueur']); 
$idMateriau = mysql_real_escape_string($_POST['idMateriau']); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-07T17:49:34.627

**试试这个**

```
$idUsager = $_POST['idUsager'];
$secMoment = $_POST['secMoment'];
$aire = $_POST['aire'];
$longueur = $_POST['longueur']; 
$idMateriau = $_POST['idMateriau']; 

//I connect to db and everything works properly here. Also, all variables contain numeric values only. No strings.

$query="INSERT INTO lesPoutres VALUES (null,'$idUsager','$secMoment','$aire','$longueur','$idMateriau')";

$result=mysql_query($query, $lien_bd);
  if (!$result) {
    print("<strong>Erreur lors du traitement de la requ&ecirc;te : </strong>" . mysql_error());

  exit();
  } 
```

# emacs - 运行 --no-init-file 选项时使用自定义保存设置

> ID：15865664
> 
> 赞同：1
> 
> 时间：2013-04-07T17:46:52.513
> 
> 标签：emacs

我正在运行我自己的位于非默认位置的 emacs 配置。所以我使用`-Q -l`启动选项。我已经定义了保存自定义的位置并相应地设置了自定义文件变量。

不幸的是，emacs 拒绝保存我的自定义选项，这可能会损害原始选项。但是我知道我在做什么，并且我知道要使用当前会话变量填充单独的自定义文件吗？

如何克服 emacs 的限制？

emacs 手册 说：

> 如果使用 -q 或 --no-init-file 选项调用 Emacs（请参阅初始选项），它将不允许您将自定义保存在初始化文件中。这是因为从此类会话中保存自定义项会清除您在初始化文件中可能拥有的所有其他自定义项。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-07T22:25:23.857

不要使用`-Q`. 这意味着`-q`，并且我相信如果您的配置位于其他位置，那么您也*没有*任何默认的 init 文件名供 Emacs 查找和使用。

相反，请使用您实际需要的选项组合。参考：

`C-h``i``g` `(emacs) Initial Options` `RET`

```
`-Q'
`--quick'
     Start emacs with minimum customizations.  This is similar to using
     `-q', `--no-site-file', `--no-site-lisp', and `--no-splash'
     together.  This also stops Emacs from processing X resources by
     setting `inhibit-x-resources' to `t' (*note Resources::). 
```

**编辑：**

我真的不确定我是否理解为什么当您声称不想使用默认初始化文件时需要保留它们。如果您澄清为什么`--no-init-file`很重要，这将有所帮助？您是否尝试提供与人们通常运行它的方式不冲突的 Emacs 辅助配置？

`HOME`您可以通过在启动脚本中设置环境变量来解决它。
看`C-h``i``g` `(emacs) Find Init` `RET`

另请参阅`init-file-user`变量，以及有关血腥细节的`command-line`函数。

（也许设置`init-file-user`, `user-init-file`, & `custom-file`with之类的`--eval`可能会起作用。）

# php - 使用 PDO() 设置 MySQL 会话变量

> ID：15865665
> 
> 赞同：0
> 
> 时间：2013-04-07T17:47:11.760
> 
> 标签：php, mysql, session, pdo

我正在使用 PHP 的 PDO 来访问我的 MySQL 数据库。我通常为我的连接创建一个单例类。我想在启动连接时设置一个 MySQL 会话变量，稍后也是如此。有关我设置 MySession1 和 MySession2 的失败尝试，请参见下文。我怎样才能做到这一点？谢谢

编辑。刚刚发现如果你只使用一个它就可以工作`@`。我最初使用两个 at-signs @@，我认为[http://dev.mysql.com/doc/refman/5.0/en/using-system-variables.html](http://dev.mysql.com/doc/refman/5.0/en/using-system-variables.html)上的文档是必需的。我如何误解文档？

```
class db {
    private static $instance = NULL;
    private function __construct() {}   //Make private
    private function __clone(){}   //Make private
    public static function db() //Get instance of DB
    {
        if (!self::$instance)
        {
            self::$instance = new PDO("mysql:host=localhost;dbname=myDB", 'myUsername', 'myPassword');
            self::$instance->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
            self::$instance->exec('SET @MySession1=123');
        }
        return self::$instance;
    }
}

db::db()->exec('SET @MySession2=321');

$stmt=db::db()->query('SELECT @MySession1 AS MySession1, @MySession2 AS MySession2');
$rs=$stmt->fetch(PDO::FETCH_ASSOC);
echo("MySession1={$rs['MySession1']} MySession2={$rs['MySession2']}"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T19:59:36.197

服务器变量和用户定义变量之间存在差异。有关用户定义变量的描述，请参见[http://dev.mysql.com/doc/refman/5.0/en/user-variables.html](http://dev.mysql.com/doc/refman/5.0/en/user-variables.html)。

# java - 为什么我总是得到 ArrayIndexOutOfBoundsException？

> ID：15865666
> 
> 赞同：-1
> 
> 时间：2013-04-07T17:47:14.497
> 
> 标签：java, algorithm, matrix-multiplication, chain, mmc

此代码取自一本通用算法书籍。这本书使用了一个从 1 开始的数组，而不是 0 for`m`但从 0 开始 for `p`。我该如何解决？

这些是错误：

```
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 6
at MMC_Test.MemoizedMatrixChain(MMC_Test.java:8)
at MMC_Test.main(MMC_Test.java:36) 
```

和代码在这里

```
public class MMC_Test {

public static int MemoizedMatrixChain(int[] p) {
    int n = p.length - 1;
    int[][] m = new int[n][n];
    for (int i = 1; i <= n; i++) {
        for (int j = i; j <= n; j++) {
            m[i][j] = Integer.MAX_VALUE;
        }
    }
    return lookUpChain(m, p, 1, n);
}// MemoizedMatrixChain

public static int lookUpChain(int[][] m, int[] p, int i, int j) {
    if (m[i][j] > Integer.MAX_VALUE) {
        return m[i][j];
    }
    if (i == j) {
        m[i][j] = 0;
    } else {
        for (int k = i; k <= j - 1; k++) {
            int q = lookUpChain(m, p, i, k) 
                    + lookUpChain(m, p, k + 1, j)
                    + p[i - 1] * p[k] * p[j];
            if (q < m[i][j]) {
                m[i][j] = q;
            }
        }
    }
    return m[i][j];
}

public static void main(String[] args) {
    // TODO Auto-generated method stub
    int[] arr = { 30, 35, 15, 5, 10, 20, 25 };
    int result = MemoizedMatrixChain(arr);
    System.out.println(result);

}// main 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T17:49:13.207

改变

```
for (int i = 1; i <= n; i++) {
    for (int j = i; j <= n; j++) { 
```

到

```
for (int i = 0; i < n; i++) {
    for (int j = i; j < n; j++) { 
```

而且我还没有正确分析您的代码，但猜测是

```
return lookUpChain(m, p, 1, n); 
```

应该

```
return lookUpChain(m, p, 1, n - 1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T17:49:27.530

通过创建此数组：

```
 int[][] m = new int[n][n]; 
```

您创建了一个多维数组，其范围为：

```
m[0][0] => m[n-1][n-1] 
```

数组中还有`n`空格，但是我们从0开始。

您的代码的问题是您`<=`在 for 循环中使用了一个运算符，而它应该是一个`<`运算符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T17:50:53.117

索引应该一直到 n-1。

```
public static int MemoizedMatrixChain(int[] p) {
    int n = p.length - 1;
    int[][] m = new int[n][n];
    for (int i = 1; i < n; i++) { //change here
        for (int j = i; j < n; j++) { //change here
            m[i][j] = Integer.MAX_VALUE;
        }
    }
    return lookUpChain(m, p, 1, n);
}// MemoizedMatrixChain 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T17:58:13.533

您有一个从 0 到 (n - 1) 的数组，但您使用从 1 到 n 的索引来访问它。因此，您不使用第一个元素，而是尝试在最后一个元素之后访问不存在的元素。

您可以在错误消息（第 8 行）中看到它首先发生的位置。后面的代码可能会出现更多错误。

根据经验，始终使用从 0 到 (n - 1) 的索引，其中 n 是数组的长度。然后你的循环从 i = 0 开始并在 i < n 时运行。一旦您开始从任一边界添加或减去某些内容，就会感觉不对（除非您不想访问整个数组）。

# animation - 设置精灵显示持续时间

> ID：15865669
> 
> 赞同：1
> 
> 时间：2013-04-07T17:47:32.870
> 
> 标签：animation, cocos2d-iphone, ccaction

下面我的代码中的 delayperunit 属性在精灵改变之前保持屏幕上的 2.5 秒。我真正想做的是将精灵显示 0.5 秒，以便在下一个出现 0.5 秒之前有 2.0 秒的中断（不显示动画），依此类推。我怎样才能做到这一点？

```
 // Create the intro image
CGSize screenSize = [CCDirector sharedDirector].winSize;
CCSprite *introImage = [CCSprite spriteWithFile:@"intro1.png"];
[introImage setPosition:ccp(screenSize.width/2, screenSize.height/2)];
[self addChild:introImage];

// Create the intro animation, and load it from intro1 to intro7.png
CCAnimation *introAnimation = [CCAnimation animation];
[introAnimation delayPerUnit:2.5f];
for (int frameNumber=0; frameNumber < 8; frameNumber++) {
    CCLOG(@"Adding image intro%d.png to the introAnimation.",frameNumber);
    [introAnimation addSpriteFrameWithFilename:
     [NSString stringWithFormat:@"intro%d.png",frameNumber]];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T16:12:50.280

我不认为你可以用 CCAnimation 做到这一点。您可以将其嵌入到一个类中（如果这将是一个反复出现的主题），或者在显示这些框架的模块中执行此操作：

在 .h 中，一些 ivars；

```
 NSUInteger _currentFrame;
  NSUInteger _maxFrames; 
```

在 .m 中，您已准备好开始：

```
 _currentFrame=1;
 _maxFrames = 8;
 [self scheduleOnce:@selector(flashFrame) delay:0.]; 
```

和

```
-(void) flashFrame: {

    NSString *spriteName = [NSString stringWithFormat:@"intro%d.png",_currentFrame];
    CCSprite *sprite = [CCSprite spriteWithFile:spriteName];
    CGSize screenSize = [CCDirector sharedDirector].winSize;
    sprite.position=ccp(screenSize.width/2, screenSize.height/2);
    id wait  = [CCDelayTime actionWithDuration:.5];
    id clean = [CCCallBlock actionWithBlock:^{
       [sprite removeFromParentAndCleanup:YES];

       }];
    id seq   = [CCSequence actions:wait,clean,nil];
    [self addChild sprite];
    [sprite runAction:seq];
    if(_currentFrame < maxFrame) {
       _currentFrame++;
       [self scheduleOnce:@selector(flashFrame) delay:2.0];
    } else {
       // do whatever you wanted to do after this sequence.
    }

} 
```

标准免责声明：未经测试，根据内存编码，里程会有所不同:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T17:50:59.783

考虑让一个动作由 CCAnimation 的 CCSequence（每单位延迟 0.2 的那个）组成，并在动画之间添加 0.5 秒的 CCDelayTime。然后永远重复这个动作。此外，如果您使用 Cocos2d 2.x 及更高版本，请使用 CCAnimationCache 来存储您的动画。

# unix - 合并 vim 系统缓冲区

> ID：15865672
> 
> 赞同：1
> 
> 时间：2013-04-07T17:47:43.173
> 
> 标签：unix, vim, buffer, copy-paste

是否可以执行以下操作：

```
Terminal1: vim f1.txt
su someuser
Terminal2: vim f2.txt 
```

我想将文本从 Termial1 中的 f1 作为用户 A 复制到 Terminal2 中的 f2 作为用户 someuser。我正在使用“+y”+p 命令使用系统缓冲区，如果我使用的是同一个用户，它会很好用。

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T17:55:32.510

我刚试过这个没有问题。唯一的区别是我使用了“+gP”而不是“+p”。
此外，使用指向/单击编辑 > 复制和编辑 > 粘贴在 gvim 中试一试没有问题。

所以，也许试试“+gP 或 gvim？

# android - 布局文件不会在 IntelliJ 设计器中呈现

> ID：15865676
> 
> 赞同：1
> 
> 时间：2013-04-07T17:48:14.060
> 
> 标签：android

我正在使用 IntelliJ Idea 12.1 开发的 Android 应用程序中有两个屏幕。数据库的列表屏幕和输入/编辑屏幕。编辑屏幕的布局文件在 IntelliJ 设计器中呈现，但列表屏幕没有。

列表 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<com.tjdroid.taskreminder.views.ReminderListView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical"
        >
    <LinearLayout
            android:orientation="vertical"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content">

        <ListView android:id="@+id/reminder_list"
                  android:layout_width="fill_parent"
                  android:layout_height="fill_parent"/>
        <TextView android:id="@+id/reminder_empty"
                  android:layout_width="wrap_content"
                  android:layout_height="wrap_content"
                  android:text="@string/no_reminders"/>
    </LinearLayout>
</com.tjdroid.taskreminder.views.ReminderListView> 
```

编辑 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<com.tjdroid.taskreminder.views.ReminderEditView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical"
        >
    <LinearLayout
            android:orientation="vertical"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent">
        <TextView android:layout_width="wrap_content"
                  android:layout_height="wrap_content"
                  android:text="@string/title"/>
        <EditText android:id="@+id/title"
                  android:layout_width="fill_parent"
                  android:layout_height="wrap_content"
                />
        <Button android:id="@+id/confirm"
                android:text="@string/confirm"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"/>
    </LinearLayout>
</com.tjdroid.taskreminder.views.ReminderEditView> 
```

渲染错误：

```
java.lang.Exception: Cannot perform rendering
    at com.intellij.android.designer.designSurface.AndroidDesignerEditorPanel.configureError(AndroidDesignerEditorPanel.java:543)
    at com.intellij.designer.designSurface.DesignerEditorPanel.showError(DesignerEditorPanel.java:404)
    at com.intellij.android.designer.designSurface.AndroidDesignerEditorPanel$8$3.run(AndroidDesignerEditorPanel.java:417)
    at com.intellij.openapi.application.impl.LaterInvocator$FlushQueue.run(LaterInvocator.java:343)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:721)
    at java.awt.EventQueue.access$200(EventQueue.java:103)
    at java.awt.EventQueue$3.run(EventQueue.java:682)
    at java.awt.EventQueue$3.run(EventQueue.java:680)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:691)
    at com.intellij.ide.IdeEventQueue.defaultDispatchEvent(IdeEventQueue.java:686)
    at com.intellij.ide.IdeEventQueue._dispatchEvent(IdeEventQueue.java:511)
    at com.intellij.ide.IdeEventQueue.dispatchEvent(IdeEventQueue.java:334)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:242)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:161)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:150)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:146)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:138)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:91)
Caused by: org.jetbrains.android.uipreview.RenderingException
    at org.jetbrains.android.uipreview.RenderUtil.renderLayout(RenderUtil.java:195)
    at com.intellij.android.designer.designSurface.AndroidDesignerEditorPanel$8.run(AndroidDesignerEditorPanel.java:346)
    at com.intellij.util.ui.update.MergingUpdateQueue.execute(MergingUpdateQueue.java:320)
    at com.intellij.util.ui.update.MergingUpdateQueue.execute(MergingUpdateQueue.java:310)
    at com.intellij.util.ui.update.MergingUpdateQueue$2.run(MergingUpdateQueue.java:254)
    at com.intellij.util.ui.update.MergingUpdateQueue.flush(MergingUpdateQueue.java:269)
    at com.intellij.util.ui.update.MergingUpdateQueue.flush(MergingUpdateQueue.java:227)
    at com.intellij.util.ui.update.MergingUpdateQueue.run(MergingUpdateQueue.java:217)
    at com.intellij.util.Alarm$Request$1.run(Alarm.java:289)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

任何想法我在列表屏幕中做错了什么？

谢谢

# initialization - 初始化 CustomView 时出现 ClassCastException

> ID：15865688
> 
> 赞同：1
> 
> 时间：2013-04-07T17:49:20.933
> 
> 标签：initialization, android-custom-view, classcastexception

我有一个看起来像这样的自定义 TextView：

```
public class ClickTextView extends TextView {

    public ClickTextView(Context context, AttributeSet attrs) {
        super(context, attrs);      

    }
    // and so on...
} 
```

为什么下面的代码给了我一个 ClassCastException？

```
 @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        // CLASS CAST EXCEPTION HERE, this is line 69
        ClickTextView tvClicks = (ClickTextView) findViewById(R.id.tvClicks);
    } 
```

下面是我的 main.xml，我在其中声明带有包名的 ClickTextView。主要的.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/rlMain"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

   <com.xxmassdeveloper.click.gui.ClickTextView
    android:id="@+id/tvClicks"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="4dp"
    android:gravity="center"
    android:text="1,000,000,000"
    android:textSize="45dp" />

</RelativeLayout> 
```

这里是错误日志：

```
04-07 19:52:44.536: E/AndroidRuntime(15589): FATAL EXCEPTION: main
04-07 19:52:44.536: E/AndroidRuntime(15589): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.xxmassdeveloper.click/com.xxmassdeveloper.click.ClickMain}: java.lang.ClassCastException: android.widget.TextView cannot be cast to com.xxmassdeveloper.click.gui.ClickTextView
04-07 19:52:44.536: E/AndroidRuntime(15589):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2185)
04-07 19:52:44.536: E/AndroidRuntime(15589):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2210)
04-07 19:52:44.536: E/AndroidRuntime(15589):    at android.app.ActivityThread.access$600(ActivityThread.java:142)
04-07 19:52:44.536: E/AndroidRuntime(15589):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1208)
04-07 19:52:44.536: E/AndroidRuntime(15589):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-07 19:52:44.536: E/AndroidRuntime(15589):    at android.os.Looper.loop(Looper.java:137)
04-07 19:52:44.536: E/AndroidRuntime(15589):    at android.app.ActivityThread.main(ActivityThread.java:4931)
04-07 19:52:44.536: E/AndroidRuntime(15589):    at java.lang.reflect.Method.invokeNative(Native Method)
04-07 19:52:44.536: E/AndroidRuntime(15589):    at java.lang.reflect.Method.invoke(Method.java:511)
04-07 19:52:44.536: E/AndroidRuntime(15589):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
04-07 19:52:44.536: E/AndroidRuntime(15589):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
04-07 19:52:44.536: E/AndroidRuntime(15589):    at dalvik.system.NativeStart.main(Native Method)
04-07 19:52:44.536: E/AndroidRuntime(15589): Caused by: java.lang.ClassCastException: android.widget.TextView cannot be cast to com.xxmassdeveloper.click.gui.ClickTextView
04-07 19:52:44.536: E/AndroidRuntime(15589):    at com.xxmassdeveloper.click.ClickMain.onCreate(ClickMain.java:69)
04-07 19:52:44.536: E/AndroidRuntime(15589):    at android.app.Activity.performCreate(Activity.java:5008)
04-07 19:52:44.536: E/AndroidRuntime(15589):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
04-07 19:52:44.536: E/AndroidRuntime(15589):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2139)
04-07 19:52:44.536: E/AndroidRuntime(15589):    ... 11 more 
```

我已经重新启动了 eclipse，以及诸如 project-clean 之类的东西。我还完全删除了设备上的应用程序并重新安装。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-27T13:54:25.787

解决了，我在 .xml 文件中犯了一个愚蠢的错误，导致异常。

# ios - 带有 UIWebView 或自定义视图控制器的 iPad 应用程序

> ID：15865701
> 
> 赞同：2
> 
> 时间：2013-04-07T17:50:20.860
> 
> 标签：ios, xcode, ipad, uiwebview, tableview

这不是帮助纠正代码的呐喊。我有一个简单的应用程序，它解析 rss 提要并在 UITableview 中显示数据（图像、标题、发布者等）。用户点击 tableview 中的任何条目，它会转到 UIWebView。

对于 iPhone，UIWebView 显示移动网站，我对移动网站做了一些小的自定义，所以它在我的应用程序内的 UIWebView 中看起来好多了。

但是对于 iPad，它不显示移动网站，而是显示普通网站，这使得它看起来很糟糕，它有自己的控件，如导航等。允许用户浏览它的网站功能，而不是我通过应用程序提供的功能。

我的问题是我可以将这个应用程序提交到 App Store 吗？由于这种行为，我的应用程序是否有可能被拒绝？

还请建议是否有任何替代解决方案使用 UIWebView 而无需为此目的制作自定义视图控制器。

提前致谢。

**更新：**

强迫移动网站向 iPad 用户显示是不正确的做法。只需阅读一份来自 Apple 的文件，上面写着““如果您的网站版本针对具有小屏幕的移动设备进行了优化，请不要将此移动版本提供给 iPad 用户。” [http://developer.apple.com/library /ios/#technotes/tn2010/tn2262/](http://developer.apple.com/library/ios/#technotes/tn2010/tn2262/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T01:14:39.457

苹果很可能会拒绝一个看起来不太好的应用程序，这真的是他们的选择，这取决于谁评论了这个应用程序。

我可能会尝试在 iOS 之外找到解决方案，您始终可以强制网站加载 iPad 的移动版本（不是有些人喜欢这样）。

如果您使用 Apache，您始终可以在 .htaccess 中使用类似于以下内容的内容：

```
RewriteEngine On

#if request_uri is _not_ followed by mobile
RewriteCond %{REQUEST_URI} !^/mobile/.*$

#if the user agent is ipad
RewriteCond %{HTTP_USER_AGENT} ^.*iPad.*$

#Redirect to /mobile/index.php
RewriteRule ^(.*)$ /mobile/ [L,R=301] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T21:25:19.237

如果您的移动版本不适合 iPad，只需制作新版本或修复原始站点中的问题，将站点发送到嵌入 web 视图的 App Store 只会在您需要真正快速更新时更加努力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T21:34:22.870

您可以尝试使用[UIWebViewDelegate](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebViewDelegate_Protocol/Reference/Reference.html)的`–webView:shouldStartLoadWithRequest:navigationType:`方法，并修改 User-Agent（和/或任何其他标头）以显示移动站点，而不是桌面版本。

# ios - 超过 1000 万位时总和计算不正确

> ID：15865703
> 
> 赞同：1
> 
> 时间：2013-04-07T17:50:29.600
> 
> 标签：ios, objective-c, xcode

我有一个文本字段（仅限数字）和一个 UILabel，我使用按钮将它们添加在一起。UILabel 显示答案，文本字段在计算时变为空白。提到的计算和功能都可以正常工作，直到我开始想要添加超过 1000 万的数字。UILabel 显示的答案为 -2147483648。我为得到这个结果所做的计算是 0 + 1000000000。

我没有对任何一个字段的字符长度设置任何限制，所以不确定为什么会发生这种情况。

这是我的计算代码：

```
-(IBAction)addtotal2;{

float x = ([numberTextField.text floatValue]);
float y = ([dtotal.text floatValue]);
dtotaler = x + y;
dtotal.text = [NSString stringWithFormat:@"%d",dtotaler];
numberTextField.text = @"";
NSUserDefaults *userDefaults=[NSUserDefaults standardUserDefaults];
[userDefaults setObject:[NSString stringWithFormat:@"%i",dtotaler] forKey:@"saveDtotal"];
[userDefaults synchronize]; 
```

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T17:54:45.227

您正在经历溢出。

使用`double`代替，`float`你应该解决问题。

```
double x = ([numberTextField.text doubleValue]);
double y = ([dtotal.text doubleValue]); 
```

**编辑**

如评论中所述，问题可能是`dtotaler`变量上的整数溢出，即它可能`int`太小而无法保存结果。

如果是这种情况，请将类型更改`dtotaler`为`NSInteger`，这在 iOS 上是类型同义词`long`

```
#if __LP64__ || TARGET_OS_EMBEDDED || TARGET_OS_IPHONE || TARGET_OS_WIN32 || NS_BUILD_32_LIKE_64
typedef long NSInteger;
typedef unsigned long NSUInteger;
#else
typedef int NSInteger;
typedef unsigned int NSUInteger;
#endif 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T17:56:25.040

您应该按原样使用大`double`值，而双精度值可以包含大值。`float``32-bit``64-bit`

# ios - 从导航/标签栏删除光泽/渐变效果

> ID：15865707
> 
> 赞同：1
> 
> 时间：2013-04-07T17:50:44.123
> 
> 标签：ios, uinavigationbar, uicolor

我想删除在`UINavigationBar`and中出现的渐变效果`UITabBar`。下图显示了一个使用自定义 UIColor 的 7/29/88 (RGB) 的示例标签栏，使用设置`setTintColor:color`，如您所见，标签栏的上半部分有光泽。

![在此处输入图像描述](https://i.stack.imgur.com/eSTnQ.png)

我该如何删除这个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-19T20:46:15.423

取决于您对“删除”的定义。在 iOS 6.x（未测试 iOS 4/5）中，以下工作。

```
// this will show a tab bar with a solid background color
tabBar.backgroundImage = [UIImage new];
tabBar.backroundColor = [UIColor blueColor];

// this will show a navigation bar with a solid background color
[navBar setBakgroundImage:[UIImage new]
            forBarMetrics:UIBarMetricsDefault]];
navBar.shadowImage = [UIImage new];
navBar.backgroundColor = [UIColor blueColor];
navBar.tintColor = [UIColor blueColor]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T17:55:58.247

这是不可能的。但是，您可以使用自定义背景图像。检查`UIAppearance`文档

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-08T22:31:57.817

我从导航栏中删除了渐变效果，你可以试试这段代码，看看它是否也适合你。

```
//First, create your own Navigation Bar Class, and add this to your init method.

self.tintColor = [UIColor clearColor];
self.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"yourImage"]];

//Add this to your DrawRect method
- (void)drawRect:(CGRect)rect {
    UIColor *color = [UIColor colorWithPatternImage:[UIImage imageNamed:@"yourImage"]]; 
   //If you want a plain color change this

    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSetFillColor(context, CGColorGetComponents([color CGColor]));
    CGContextFillRect(context, rect);
} 
```

# cassandra - Cassandra RandomPartitioner 版本 1.2.3

> ID：15865710
> 
> 赞同：3
> 
> 时间：2013-04-07T17:50:58.180
> 
> 标签：cassandra

我使用 apt 在 debian 上安装 Cassandra 1.2.3，我之前使用的是 tarball 1.1.7 安装。安装后，我将 cassandra.yaml 中的分区器从 Murmur3Partitioner 更改为 RandomPartitioner，如下所示：

分区器：org.apache.cassandra.dht.RandomPartitioner

然后在开始我看到不兼容的系统键空间错误如下：

错误 18:22:11,465 无法打开 /var/lib/cassandra/data/system/schema_keyspaces/system-schema_keyspaces-ib-1；分区器 org.apache.cassandra.dht.Murmur3Partitioner 与系统分区器 org.apache.cassandra.dht.RandomPartitioner 不匹配。请注意，从 Cassandra 1.2 开始的默认分区程序是 Murmur3Partitioner，因此如果升级，您需要对其进行编辑以匹配您的旧分区程序。返回值为 1 的服务退出

如何将系统密钥空间设置为 RandomPartitioner？我尝试清除数据文件夹，apt-get remove，也 apt-get purge 然后重新安装，更改为 RandomPartitioner 然后启动 cassandra，但它仍然失败。我也在我的 ubuntu 桌面上复制了这个，所以我想我在这里做错了什么。

任何帮助表示赞赏！

干杯

山姆

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-08T09:15:44.890

一旦 Cassandra 首次启动，就无法更改分区程序。此错误显示数据目录已使用 Murmur3Partitioner 初始化，但您使用 RandomPartitioner 启动它。

如果您尝试从 1.1 安装升级您的数据，Cassandra 没有从正确的位置读取数据。调整你的数据目录以使用你的 1.1 目录，它应该从 partitioner 设置为 RandomPartitioner 开始。

如果您尝试从无数据开始，请停止 Cassandra，删除 /var/lib/cassandra/* 并重新启动它。请注意，您需要删除 commitlog 目录以及数据目录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-03T13:51:02.713

当我执行一次操作时，我遇到了 Sam 报告的类似错误

[root@fedora 用户]# dse cassandra. 为了纠正我所做的问题：

1.  [root@fedora 用户]# vi /etc/dse/cassandra/cassandra.yaml
2.  在 cassandra.yaml 文件中进行了以下更改

注释掉“#partitioner: org.apache.cassandra.dht.Murmur3Partitioner”并替换为“partitioner: org.apache.cassandra.dht.RandomPartitioner” 3\. 保存 cassandra.yaml 中的更改

希望这可以帮助。

马尤赫。

# javascript - 如果滚动特定区域（移动设备），则显示 div 的最佳方式

> ID：15865711
> 
> 赞同：-1
> 
> 时间：2013-04-07T17:50:58.430
> 
> 标签：javascript, jquery

有一个号召性用语按钮（“立即下载”背景 div），onMouseOver 会打开一个 toptip（这是一个带有实时文本和背景图像的简单 div）。在移动设备\平板电脑上，当鼠标悬停不是选项时，如果特定区域已滚动（页面很长），则在 2-3 秒后需要相同的工具提示 fadeIn()。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T18:05:57.390

您可以在发生滚动事件时查询当前滚动位置。像这样的东西：

[例子](http://jsfiddle.net/MBXsz/4/)

```
$(function(){
    var elemOffset = $('#myButton').offset().top;

    $(window).on('scroll', function(e) {
        var scrollPos = $(window).scrollTop();
        var windowHeight = $(window).height();

        console.log((scrollPos + windowHeight));
        $('span.pos').text('scrollpos: ' + (scrollPos + windowHeight));

        if(scrollPos + windowHeight >= elemOffset) {
            $('#myButton').css('opacity', 1);
        }
    }); 
}); 
```

不幸的是，我不确定滚动事件在移动页面上的行为方式。也许你也可以绑定到`touchstart`.

# many-to-many - SSAS 多对多维度层次结构

> ID：15865719
> 
> 赞同：1
> 
> 时间：2013-04-07T17:51:33.740
> 
> 标签：many-to-many, ssas, data-warehouse

首先，这是一个非常非常简单的数据仓库，我只是为了提出以下具体问题而制作的。

设想：

我有一个事实表 FactSales，以及 2 个维度：DimShop 和 DimProduct，它们都相互分离并直接连接到事实表。有些商店可以销售选定的产品，反之亦然，有些产品可以在特定商店销售。这给了我们多对多的关系。问题是当我尝试切片我的立方体时，我得到了商店和产品之间的所有组合。

问题：

如何在具有多对多关系的 SSAS 中的两个分离维度之间创建层次结构？我尝试使用 brigde 表，但无法在 SSAS 中配置层次结构。甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:15:46.103

如果您试图报告“可能发生的事情”而不是“发生的事情”，则需要一个单独的事实表和多维数据集来表示产品与可以销售产品的商店之间的关系。它不是真正的层次结构，因为它是多对多的。

一个简单的交叉引用事实应该没问题：

```
FACT_PRODUCT_SHOP
ProductID
ShopID 
```

那么在做报表时，想知道哪些产品允许在哪些商店销售，就可以使用这个事实表。销售事实仅显示“实际发生的情况”。

您甚至可以将此事实修改为您的库存事实表，只需添加日期和“库存量”和“订单量”等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T11:11:58.160

可以实现这样的设计，但它可能表现不佳。基本上，您需要一个替代键，而不是事实表中的产品和商店键。这把钥匙将是产品和商店的独特组合。这需要在 ETL 中准备好。在名为“Shops and Products”的新维度中，在此键之上，您可以在同一维度中创建 2 个层次结构 Product 和 Shop。

此外，您还可以根据要求创建不自然的层次结构。但由于它是一个不自然的层次结构，它可能表现不佳。因此，除了产品和商店层次结构之外，您还可以提供以下非自然层次结构：商店 -> 产品、产品 -> 商店。

# perl - printf 与 Perl 在同一行

> ID：15865721
> 
> 赞同：0
> 
> 时间：2013-04-07T17:51:40.123
> 
> 标签：perl, formatting, printf

我希望我的 printf 函数将输出写入这样的文件：

```
name      age      gpa 
```

相反，它是这样写的：

```
name
age
gpa 
```

这是我的代码，非常感谢所有帮助。

```
printf FILE "%-0.25s %3s %4s\n", @get_name, @get_age, @get_gpa; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T17:58:33.077

您的值可能包含换行符。用于`chomp`删除它们。此外，使用标量值而不是数组作为参数更安全`printf`- 否则，如果 @get_name 中有多个值，@get_gpa 将不会被打印：

```
chomp for $get_name[0], $get_age[0], $get_gpa[0];
printf FILE "%-0.25s %3s %4s\n", $get_name[0], $get_age[0], $get_gpa[0]; 
```

# ios - 带有 uiscrollview 的子类中的 UIElement 没有响应

> ID：15865726
> 
> 赞同：1
> 
> 时间：2013-04-07T17:51:59.120
> 
> 标签：ios, uiviewcontroller, uiscrollview, uielement

我有一个为其所有子类提供自定义菜单的类，但是由于我开始使用文本字段已经遇到键盘问题，所以我使用普通方法并将子类嵌入到调整大小的 uiscrollview 中。问题是滚动视图没有覆盖属于其超类的菜单。

想到的想法是在超类中创建一个滚动视图，并在滚动视图中放置菜单。我运行它，一切似乎都很好，直到我无法与屏幕上除了导航栏和菜单之外的任何东西进行交互，这让我相信子类 uielements 可能不是滚动视图的子视图。

问题甚至扩大了，因为在子类中我在情节提要和代码中创建了 uielements。我的问题是如何使在子类中创建并添加到 self.view 中的所有 uielements 成为超类滚动视图的子视图。

超一流

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    //_scrollViewMain = [[UIScrollView alloc] initWithFrame:self.view.bounds];
    //[self.view addSubview:_scrollViewMain];

    _slideButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemPlay target:self action:@selector(slide)];
    [self.navigationItem setRightBarButtonItem:_slideButton];

    _menuView = [[UIView alloc] initWithFrame:CGRectMake(0, self.view.frame.size.height - self.navigationController.navigationBar.frame.size.height - 44, self.view.bounds.size.width, 44)];
    _menuView.backgroundColor = [UIColor colorWithRed:63.0/255.0 green:63.0/255.0 blue:63.0/255.0 alpha:1.0];
    [self.view addSubview:_menuView];
    //[_scrollViewMain addSubview:_menuView];

    UIView *redFrameView = [[UIView alloc] initWithFrame:CGRectMake(0, _menuView.frame.size.height / 2, _menuView.frame.size.width, _menuView.frame.size.height / 2)];
    [redFrameView setBackgroundColor:[UIColor colorWithRed:170.0/255.0 green:0.0 blue:0.0 alpha:0.5]];
    [_menuView addSubview:redFrameView];

    _menuButton = [UIButton buttonWithType:UIButtonTypeCustom];
    [_menuButton setImage:[UIImage imageNamed:@"19-gear.png"] forState:UIControlStateNormal];
    [_menuButton addTarget:self action:@selector(menu) forControlEvents:UIControlEventTouchUpInside];
    _menuButton.frame = CGRectMake(16.0, 9.0, 26.0, 26.0);

    _addButton = [UIButton buttonWithType:UIButtonTypeCustom];
    [_addButton setImage:[UIImage imageNamed:@"13-plus.png"] forState:UIControlStateNormal];
    [_addButton addTarget:self action:@selector(add) forControlEvents:UIControlEventTouchUpInside];
    _addButton.frame = CGRectMake(16.0, 15.0, 14.0, 14.0);
    _addButton.userInteractionEnabled = NO;
    _addButton.alpha = 0.0;

    _editButton = [UIButton buttonWithType:UIButtonTypeCustom];
    [_editButton setImage:[UIImage imageNamed:@"187-pencil.png"] forState:UIControlStateNormal];
    [_editButton addTarget:self action:@selector(edit) forControlEvents:UIControlEventTouchUpInside];
    _editButton.frame = CGRectMake(16.0, 15.0, 14.0, 14.0);
    _editButton.userInteractionEnabled = NO;
    _editButton.alpha = 0.0;

    _deleteButton = [UIButton buttonWithType:UIButtonTypeCustom];
    [_deleteButton setImage:[UIImage imageNamed:@"11-x.png"] forState:UIControlStateNormal];
    [_deleteButton addTarget:self action:@selector(delete) forControlEvents:UIControlEventTouchUpInside];
    _deleteButton.frame = CGRectMake(16.0, 15.0, 14.0, 14.0);
    _deleteButton.userInteractionEnabled = NO;
    _deleteButton.alpha = 0.0;

    _downloadButton = [UIButton buttonWithType:UIButtonTypeCustom];
    [_downloadButton setImage:[UIImage imageNamed:@"57-download.png"] forState:UIControlStateNormal];
    [_downloadButton addTarget:self action:@selector(download) forControlEvents:UIControlEventTouchUpInside];
    _downloadButton.frame = CGRectMake(16.0, 15.0, 11.0, 14.0);
    _downloadButton.userInteractionEnabled = NO;
    _downloadButton.alpha = 0.0;

    _uploadButton = [UIButton buttonWithType:UIButtonTypeCustom];
    [_uploadButton setImage:[UIImage imageNamed:@"56-cloud.png"] forState:UIControlStateNormal];
    [_uploadButton addTarget:self action:@selector(upload) forControlEvents:UIControlEventTouchUpInside];
    _uploadButton.frame = CGRectMake(16.0, 15.0, 21.0, 14.0);
    _uploadButton.userInteractionEnabled = NO;
    _uploadButton.alpha = 0.0;

    _shareButton = [UIButton buttonWithType:UIButtonTypeCustom];
    [_shareButton setImage:[UIImage imageNamed:@"124-bullhorn.png"] forState:UIControlStateNormal];
    [_shareButton addTarget:self action:@selector(share) forControlEvents:UIControlEventTouchUpInside];
    _shareButton.frame = CGRectMake(16.0, 15.0, 21.0, 14.0);
    _shareButton.userInteractionEnabled = NO;
    _shareButton.alpha = 0.0;

    [_menuView addSubview:_addButton];
    [_menuView addSubview:_editButton];
    [_menuView addSubview:_deleteButton];
    [_menuView addSubview:_downloadButton];
    [_menuView addSubview:_uploadButton];
    [_menuView addSubview:_shareButton];
    [_menuView addSubview:_menuButton];

    _isMenuVisible = NO;
} 
```

第一次尝试，但滚动没有在超类中包含菜单视图

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    [self registerForKeyboardNotifications];

    self.title = [_exercise valueForKey:kExerciseName];

    [super ableAdd];
    [super ableDownload];
    [super ableShare];
    if ([[_exercise valueForKey:kExerciseIsDefault] boolValue]) {
        [super ableUpload];
        [super ableDelete];
    }

    _doneButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(done)];

    _nameLabel.text = [_exercise valueForKey:kExerciseName];
    _nameLabel.textColor = [UIColor colorWithRed:128.0/255.0 green:128.0/255.0 blue:128.0/255.0 alpha:1.0];
    _categoryLabel.text = [[_exercise valueForKey:kExerciseEType] valueForKey:kExerciseTypeName];
    _categoryLabel.textColor = [UIColor colorWithRed:128.0/255.0 green:128.0/255.0 blue:128.0/255.0 alpha:1.0];
    _gearLabel.text = [[_exercise valueForKey:kGear] valueForKey:kGearName];
    _gearLabel.textColor = [UIColor colorWithRed:128.0/255.0 green:128.0/255.0 blue:128.0/255.0 alpha:1.0];

    _addRecordButton = [[UIButton alloc] initWithFrame:CGRectMake((self.view.frame.size.width - 30) / 2, 7, 30, 30)];
    [_addRecordButton setImage:[UIImage imageNamed:@"85-trophy.png"] forState:UIControlStateNormal];
    [_addRecordButton addTarget:self action:@selector(addRecord) forControlEvents:UIControlEventTouchUpInside];
    [_toolView addSubview:_addRecordButton];

    _showChartButton = [[UIButton alloc] initWithFrame:CGRectMake(self.view.frame.size.width - 50, 7, 30, 30)];
    [_showChartButton setImage:[UIImage imageNamed:@"16-line-chart.png.png"] forState:UIControlStateNormal];
    [_showChartButton addTarget:self action:@selector(showChart) forControlEvents:UIControlEventTouchUpInside];
    [_toolView addSubview:_showChartButton];

    _numberOfPages = 3;
    _currentPage = 1;

    _scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 174, 320, self.view.bounds.size.height - 262)];
    _scrollView.pagingEnabled = YES;
    _scrollView.contentSize = CGSizeMake(_scrollView.bounds.size.width * _numberOfPages, _scrollView.bounds.size.height);
    _scrollView.delegate = self;
    _scrollView.showsHorizontalScrollIndicator = NO;

    _textView = [[UITextView alloc] initWithFrame:CGRectMake(0, 0, _scrollView.bounds.size.width, _scrollView.bounds.size.height)];
    _textView.contentSize = CGSizeMake(_scrollView.bounds.size.width, _scrollView.bounds.size.height);
    _textView.text = [_exercise valueForKey:kExerciseOverview];
    _textView.editable = NO;

    _tableView = [[UITableView alloc] initWithFrame:CGRectMake(_scrollView.bounds.size.width * 1, 0, _scrollView.bounds.size.width, _scrollView.bounds.size.height)];
    _tableView.contentSize = CGSizeMake(_scrollView.bounds.size.width, _scrollView.bounds.size.height);
    _tableView.dataSource = self;
    _tableView.delegate = self;

    UILongPressGestureRecognizer *longPress = [[UILongPressGestureRecognizer alloc]
                                               initWithTarget:self action:@selector(handleLongPress:)];
    longPress.minimumPressDuration = 2.0;
    longPress.delegate = (id<UIGestureRecognizerDelegate>)self;
    [_tableView addGestureRecognizer:longPress];

    _movieView = [[UIWebView alloc] initWithFrame:CGRectMake(_scrollView.bounds.size.width * 2, 0, _scrollView.bounds.size.width, _scrollView.bounds.size.height)];
    _movieView.opaque = YES;
    _movieView.backgroundColor = [UIColor whiteColor];
    _movieView.autoresizesSubviews = YES;
    [_movieView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:[_exercise valueForKey:kExerciseUrlAddress]]]];

    [_scrollView addSubview:_textView];
    [_scrollView addSubview:_tableView];
    [_scrollView addSubview:_movieView];
    [_scrollView scrollRectToVisible:CGRectMake(_scrollView.bounds.size.width * 1, 0, _scrollView.bounds.size.width, _scrollView.bounds.size.height) animated:NO];

    [_scrollViewMain addSubview:_scrollView];
    //[self.view addSubview:_scrollView];

    _pageControl.numberOfPages = _numberOfPages;
    _pageControl.currentPage = _currentPage;

    _records = [[NSMutableArray alloc] init];
    _records = [[NSArray arrayWithArray:[[_exercise valueForKey:kExerciseERecords] allObjects]] mutableCopy];

    NSSortDescriptor *sort = [[NSSortDescriptor alloc] initWithKey:kExerciseRecordRecordDate ascending:NO];
    [_records sortUsingDescriptors:[NSArray arrayWithObject:sort]];
}

- (void)viewDidDisappear:(BOOL)animated
{
    if (self.editing) {
        [super setPan];
    }
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
}

- (void)setEditing:(BOOL)editing animated:(BOOL)animated
{
    [super setEditing:editing animated:animated];
    [_tableView setEditing:editing animated:animated];

    [super setPan];

    if (self.navigationItem.rightBarButtonItem == nil) {
        self.navigationItem.rightBarButtonItem = _doneButton;
    }

    _addRecordButton.enabled = !editing;
    _showChartButton.enabled = !editing;

    if (![[_exercise valueForKey:kExerciseIsDefault] boolValue]) {
        [super ableUpload];
        [super ableDelete];
        _textView.editable = editing;
    }

}

- (void)registerForKeyboardNotifications
{
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(keyboardWasShown:)
                                                 name:UIKeyboardDidShowNotification object:nil];

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(keyboardWillBeHidden:)
                                                 name:UIKeyboardWillHideNotification object:nil];

}

// Called when the UIKeyboardDidShowNotification is sent.
- (void)keyboardWasShown:(NSNotification*)aNotification
{
    NSDictionary* info = [aNotification userInfo];
    CGSize kbSize = [[info objectForKey:UIKeyboardFrameBeginUserInfoKey] CGRectValue].size;

    UIEdgeInsets contentInsets = UIEdgeInsetsMake(0.0, 0.0, kbSize.height, 0.0);
    _scrollViewMain.contentInset = contentInsets;
    _scrollViewMain.scrollIndicatorInsets = contentInsets;

    // If active text field is hidden by keyboard, scroll it so it's visible
    // Your application might not need or want this behavior.
    CGRect aRect = self.view.frame;
    aRect.size.height -= kbSize.height;
    if (!CGRectContainsPoint(aRect, _activeField.frame.origin) ) {
        CGPoint scrollPoint = CGPointMake(0.0, _activeField.frame.origin.y-kbSize.height);
        [_scrollViewMain setContentOffset:scrollPoint animated:YES];
    }
}

// Called when the UIKeyboardWillHideNotification is sent
- (void)keyboardWillBeHidden:(NSNotification*)aNotification
{
    UIEdgeInsets contentInsets = UIEdgeInsetsZero;
    _scrollViewMain.contentInset = contentInsets;
    _scrollViewMain.scrollIndicatorInsets = contentInsets;
}

- (void)textFieldDidBeginEditing:(UITextField *)textField
{
    _activeField = textField;
}

- (void)textFieldDidEndEditing:(UITextField *)textField
{
    _activeField = nil;
} 
```

# c++ - 确定 C++ 中的 getline() 起点

> ID：15865727
> 
> 赞同：1
> 
> 时间：2013-04-07T17:52:00.357
> 
> 标签：c++, string, file, text, line

这是我的代码的一部分

```
string line;
ifstream file ("Names.txt");

int i;
for (i = 0; i < line.length(); ++i) {
    if ('A' <= line[i] && line[i] <= 'Z') break;
}

string start = line.substr(i);
getline(file, start, '.');
cout << start; 
```

我需要从第一个大写字母开始读取一行，直到文本文件中的第一个句点。目前它成功地从文件的开头读取到第一个句点。所以我在确定起点 i（第一个大写字母）时遇到了问题。

我感谢您的帮助！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T17:55:22.607

```
string line;                           // line is empty
ifstream file ("Names.txt");           // line is still empty

int i;                                 // still empty
for (i = 0; i < line.length(); ++i) {  // still empty, line.length() == 0 
```

这有帮助吗？您需要从文件中读取到行（使用 getline），然后解析行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T18:09:11.227

像这样的东西应该工作：

```
#include <iostream>
#include <fstream>
#include <string>

using namespace std;

int main()
{
    string line;
    ifstream file ("file.txt");
    char temp;
    while(file>>temp)
    {
        if(isupper(temp)) break;//First capital letter
    }
    file.seekg(-1,file.cur);//rewind one char so you can read it in the string
    getline(file,line,'.');//read until the first .
    cout << line << endl;
    system("pause");
    return 0;
} 
```

# .htaccess - 覆盖根 .htaccess 以允许子目录中的查询字符串访问

> ID：15865728
> 
> 赞同：1
> 
> 时间：2013-04-07T17:52:08.733
> 
> 标签：.htaccess, mod-rewrite

我在 public_html 根文件夹的 .htaccess 中有下面的重写块，以防止奇怪的查询字符串和其他“坏”访问。

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    RewriteCond %{QUERY_STRING} (base64_encode|localhost|mosconfig) [NC,OR]
    RewriteCond %{QUERY_STRING} (GLOBALS|REQUEST)(=|\[|%) [NC]
    RewriteRule .* - [F]
</IfModule> 
```

但这打破了我在子文件夹中运行 phpmyadmin 的问题。具体来说，phpmyadmin（不是在独立文件夹中，而是在 WordPress 插件中；但这不应该有所作为）是来自 localhost（我认为）的“访问被拒绝” `base64_encode|localhost|mosconfig`。我删除该行，然后 phpmyadmin 将在子文件夹中运行。

我可以在子文件夹中的 .htaccess 文件中放入什么来“清除”或覆盖该规则？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T18:47:37.873

在您的 phpmyadmin 子文件夹中创建一个 htaccess 文件并将其放入其中：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{QUERY_STRING} (GLOBALS|REQUEST)(=|\[|%) [NC]
    RewriteRule .* - [F]
</IfModule> 
```

该规则将优先于任何父文件夹中的任何规则。

# ios - 创建“始终登录”的 IOS 应用程序最安全的方法是什么？

> ID：15865730
> 
> 赞同：1
> 
> 时间：2013-04-07T17:52:17.923
> 
> 标签：ios, security, authentication

我正在编写用户使用电子邮件+密码注册帐户的代码。我想将登录凭据存储在 IOS 应用程序中，然后用于用户进行的所有远程操作（创建订单、更新帐户信息等）。

使用 PDKeychainBindings 将密码存储在 IOS 钥匙串中然后将用户/通过 HTTPS 发送到服务器的每个请求是否安全？

有没有更好/更安全的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T18:01:03.100

有两种方法：

1）您可以使用KeyChain：http: [//developer.apple.com/library/ios/#documentation/Security/Conceptual/keychainServConcepts/iPhoneTasks/iPhoneTasks.html](http://developer.apple.com/library/ios/#documentation/Security/Conceptual/keychainServConcepts/iPhoneTasks/iPhoneTasks.html)

例子：

```
//Initializing
KeychainItemWrapper *keychainItem = [[KeychainItemWrapper alloc] initWithIdentifier:@"YourAppLogin" accessGroup:nil];
//Saving
[keychainItem setObject:@"password you are saving" forKey:kSecValueData];
[keychainItem setObject:@"username you are saving" forKey:kSecAttrAccount];
//Getting
NSString *password = [keychainItem objectForKey:kSecValueData];
NSString *username = [keychainItem objectForKey:kSecAttrAccount];
//deleting
[keychainItem resetKeychainItem]; 
```

2）您可以使用 NSUserDefaults

```
NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
NSString *pword = [prefs setObject:@"yourpassword" ForKey:@"password"];
NSString *username = [prefs setObject:@"username" ForKey:@"username"];
[prefs synchronize];
//getting 
NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
NSString *pword = [prefs objectForKey:@"password"];
NSString *username = [prefs objectForKey:@"username"]; 
```

方法 1 比方法 2 更安全。您可以通过加密您的密码和用户名使方法 2 更安全。

希望这可以帮助..

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-07T18:26:16.540

最安全的方法是不保存密码。通常，在第一次连接时，您将用户名和密码交换为永久授权令牌。

然后将此令牌保存到钥匙串中，所有其他服务器请求仅由该令牌授权。仅当令牌无效时才要求用户再次输入密码。（它是永久性的，所以它不应该过期，但它可以被服务器失效）。

# php - pg_dump 在 php 中不起作用，但在 .bat 文件中起作用

> ID：15865731
> 
> 赞同：0
> 
> 时间：2013-04-07T17:52:18.407
> 
> 标签：php, batch-file, exec

我制作了一些 .bat 程序来备份我的数据库。当我打开 cmd 并通过命令行运行 bat 文件时，一切正常。但我还需要 php 文件来执行那个 .bat 文件。我有一个非常简单的程序，只有一行代码

```
system("cmd /C backup.bat"); 
```

现在我有一个问题，因为当我执行这个 .php 文件备份时总是 0 kb。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:29:04.977

好的，我找到了解决方案：

1.  在寡妇中打开 Postgresql
2.  打开 pg_hba.conf
3.  添加线路主机所有所有 127.0.0.1/32 信任

当然你可以修改你的IP地址，掩码等
。最重要的是`trust`在行尾

# javascript - 触发键盘退格事件

> ID：15865732
> 
> 赞同：0
> 
> 时间：2013-04-07T17:52:18.887
> 
> 标签：javascript, jquery, real-time, keypress

我需要通过代码实时触发实际退格。我无法获取内容并删除最后输入的字符，然后再次填充它。

也创建一个事件，然后使用 jquery 触发器触发它不起作用。

有什么建议或任何已知的工作吗？

# c# - 如何使 WPF Slider Thumb 从任意点跟随光标

> ID：15865734
> 
> 赞同：3
> 
> 时间：2013-04-07T17:52:29.503
> 
> 标签：c#, .net, wpf, xaml, slider

我有这样的滑块：

```
<Slider Minimum="0" Maximum="100" 
TickFrequency="1"
IsMoveToPointEnabled="True"
IsSnapToTickEnabled="False"/> 
```

我想做下一个行为：当 MouseDown 发生在滑块的任何点时，Thumb 不仅会移动一次到该点，而且还会跟随光标直到 MouseUp 发生。

抱歉，如果已经问过了，我找不到那个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T01:43:04.713

**仅**当您拖动滑块拇指本身时才会发生此行为，这是设计使然。

*但是*，这里有一些代码可以做到这一点;-)

挂钩到 XAML 中的 MouseMove 事件：

```
<Slider MouseMove="Slider_OnMouseMove" IsMoveToPointEnabled="True"/> 
```

然后插入这段代码：

```
private void Slider_OnMouseMove(object sender, MouseEventArgs e)
{
    if (e.LeftButton == MouseButtonState.Pressed)
    {
        var slider = (Slider)sender;
        Point position = e.GetPosition(slider);
        double d = 1.0d / slider.ActualWidth * position.X;
        var p = slider.Maximum * d;
        slider.Value = p;
    }
} 
```

笔记 ：

*   如果它们不同，您可能必须考虑滑块的边距和填充，我没有。
*   这是在水平滑块上完成的。
*   我的滑块的最小值为 0，如果您的最小值为负数，请务必调整计算。
*   最后，它似乎只有在设置 IsMoveToPointEnabled 时才有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-01T06:18:21.847

Aybe 的解决方案在 thumb_MouseMove 事件中效果更好。

```
void timelineThumb_MouseMove(object sender, MouseEventArgs e)
{

     if (e.LeftButton == MouseButtonState.Pressed)
     {
         var thumb = sender as Thumb;

         Point pos = e.GetPosition(uiVideoPlayerTimelineSlider);
         double d = 1.0d / uiVideoPlayerTimelineSlider.ActualWidth * pos.X;
         uiVideoPlayerTimelineSlider.Value = uiVideoPlayerTimelineSlider.Maximum * d;

     }
} 
```

# django - Django - 内存缓存问题

> ID：15865739
> 
> 赞同：1
> 
> 时间：2013-04-07T17:53:23.223
> 
> 标签：django, memcached

我在我管理的服务器上启用了 memcached。我们有几页显示超过 1,000 条记录（这是必要的）。使用 memcached，它几乎可以立即加载——这很棒。但是，有时该页面应该包含零条记录，尽管当我们导航到该页面时，它仍然显示所有 1,000 条记录。相反，有时它应该显示 1,000 条记录，但由于该页面用于显示零记录，因此该页面从内存加载，因此显示零记录。

我只是想知道如何处理这个问题。基本上，如何让 memcache 系统知道何时请求实际上是针对一组不同的数据，而不仅仅是加载缓存的页面。

这是我的 settings.py 文件（相关行）：

```
 CACHES = {
      'default': {
          'BACKEND': 'django.core.cache.backends.memcached.MemcachedCache',
          'LOCATION': '127.0.0.1:11211',
      }
  } 
```

然后在中间件中进一步向下：

```
MIDDLEWARE_CLASSES = (
     'django.middleware.cache.UpdateCacheMiddleware',
     'django.middleware.common.CommonMiddleware',
     'django.contrib.sessions.middleware.SessionMiddleware',
     'django.middleware.csrf.CsrfViewMiddleware',
     'django.contrib.auth.middleware.AuthenticationMiddleware',
     'django.contrib.messages.middleware.MessageMiddleware',
     'django.middleware.cache.FetchFromCacheMiddleware',
 ) 
```

有什么想法吗？我做错了吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:09:19.807

只是看@ Django Docs 的开发版本。

根据您的[缓存中间件](https://docs.djangoproject.com/en/dev/ref/middleware/#django.middleware.cache.UpdateCacheMiddleware)......这两个中间件类是缓存的“惰性”方式 - 它缓存每个页面[CACHE_MIDDLEWARE_SECONDS](https://docs.djangoproject.com/en/dev/ref/settings/#cache-middleware-seconds)秒（如果未设置默认值为 600 秒）。

您可以进行[低级缓存](https://docs.djangoproject.com/en/dev/topics/cache/#the-low-level-cache-api)并让它在该视图/方法中确定数据是否已更改并相应地显示它。不确定您如何确定数据更改/应该更改，尽管我相信您想要这种类型的缓存而不是那种缓存中间件。

我最近才了解如何使用 django 进行缓存，他们的[缓存文档](https://docs.djangoproject.com/en/dev/topics/cache/)很有帮助。

# sql - 确定每个部分的期中考试最高成绩

> ID：15865741
> 
> 赞同：0
> 
> 时间：2013-04-07T17:53:25.633
> 
> 标签：sql, counter

我是一个初学者，我在使用以下查询时遇到了一些麻烦：

我正在尝试确定每个部分的期中考试最高成绩。

这是我到目前为止所拥有的：

```
SELECT TOP 1 GRADE.NUMERIC_GRADE, GRADE.SECTION_ID, GRADE.GRADE_TYPE_CODE 
FROM GRADE
WHERE GRADE_TYPE_CODE = 'MT' AND
COUNT SECTION_ID = 1
ORDER BY NUMERIC_GRADE, GRADE_TYPE_CODE, SECTION_ID 
```

我不断收到这个：第 1 行的错误：ORA-00923：在预期的地方找不到 FROM 关键字

我做的太多了吗（我应该先创建一个视图）吗？任何帮助将不胜感激。

如果有帮助，请看下表：

```
GRADE
GRADE_CODE_OCCURRENCE (PK) NUMBER(38,0) NOT NULL
STUDENT_ID (PK)(FK) NUMBER(8,0) NOT NULL
SECTION_ID (PK)(FK) NUMBER(8,0) NOT NULL
GRADE_TYPE_CODE (PK)(FK) CHAR(2) NOT NULL
NUMERIC_GRADE NUMBER(3,0) NOT NULL
COMMENTS VARCHAR2(2000) NULL
CREATED_BY VARCHAR2(30) NOT NULL
CREATED_DATE DATE NOT NULL
MODIFIED_BY VARCHAR2(30) NOT NULL
MODIFIED_DATE DATE NOT NULL 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T18:01:30.293

试试这个，使用 GROUP BY：

```
select GRADE.SECTION_ID,  max(GRADE.NUMERIC_GRADE)
from GRADE
group by GRADE.SECTION_ID 
```

# opengl - glutInitContextVersion

> ID：15865745
> 
> 赞同：0
> 
> 时间：2013-04-07T17:53:36.750
> 
> 标签：opengl, glut, freeglut

我在使用 freeglut 的“glutInitContextVersion”函数时遇到了一些问题。当我使用 3, 1 作为参数时，我的几何图形被绘制出来。但是，当我使用 3,3（这是我的显卡支持的 OpenGL 的最高版本）时，不会绘制任何几何图形。这意味着什么？我是否使用了在较低版本的 OpenGL 中已弃用的函数？我还将它与对“glutInitContextProfile(GLUT_CORE_PROFILE);”的调用结合起来，但由于这根本不需要设置上下文版本，我怀疑这是问题所在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-16T17:46:32.467

我的代码碰巧遇到了同样的问题。我发现可能是因为以后版本的OpenGL不再支持glPerspective()函数。您可能需要检查[此答案](https://stackoverflow.com/questions/2417697/gluperspective-was-removed-in-opengl-3-1-any-replacements)以了解如何计算透视矩阵。

# python - OpenCV 安装在 Mac OSX 10.6.8 上不起作用

> ID：15865746
> 
> 赞同：4
> 
> 时间：2013-04-07T17:53:39.343
> 
> 标签：python, opencv, installation

我已经在我的 Mac OSX 10.6.8 上安装了两次 OpenCV。首先使用：

```
sudo port -v install opencv +python27 
```

这似乎安装得很好（没有错误），所以我启动了 Python 并尝试导入它。不幸的是，这似乎不起作用：

```
>>> import cv
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named cv
>>> import cv2
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named cv2 
```

然后我尝试使用[这个 Stackoverflow 答案](https://stackoverflow.com/a/6087778/1650012)安装它（评论中的每个人都称赞它是“最终的好答案！”）。这还指示将以下行添加到 ~/.bash_profile：

```
export PYTHONPATH=/opt/local/var/macports/software/opencv/2.2.0_0+python27/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages:$PYTHONPATH 
```

所以我只是查看了这个文件夹：`/opt/local/var/macports/software/opencv/` 但是，在那里，我只看到两个文件（并且没有名为 的文件夹`2.2.0_0+python27`）：

```
opencv-2.4.4_3+python27.darwin_10.x86_64.tbz2
opencv-2.4.4_3.darwin_10.x86_64.tbz2 
```

从那里我被困住了。

有谁知道为什么没有这样的文件夹，或者更重要的是；有人知道如何在 Mac OSX 10.6.8 上安装 OpenCV 吗？欢迎所有提示！

# javascript - 在Javascript中获取查询字符串数组值

> ID：15865747
> 
> 赞同：13
> 
> 时间：2013-04-07T17:53:39.670
> 
> 标签：javascript, arrays, forms, parameters, query-string

我有一个使用 get 方法并包含一个数组的表单：

`http://www.example.com?name[]=hello&name[]=world`

我正在尝试使用 JavaScript 或 jQuery 检索数组值“hello”和“world”。

我在 Stack Overflow 上看过类似的解决方案（例如[，我如何在 JavaScript 中获取查询字符串值？](https://stackoverflow.com/questions/901115/how-can-i-get-query-string-values)），但它们似乎只处理参数而不是数组。

是否可以获取数组值？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-07T18:17:04.427

你去：http: [//jsfiddle.net/mm6Bt/1/](http://jsfiddle.net/mm6Bt/1/)

```
function getURLParam(key,target){
    var values = [];
    if (!target) target = location.href;

    key = key.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");

    var pattern = key + '=([^&#]+)';
    var o_reg = new RegExp(pattern,'ig');
    while (true){
        var matches = o_reg.exec(target);
        if (matches && matches[1]){
            values.push(matches[1]);
        } else {
            break;
        }
    }

    if (!values.length){
        return null;   
    } else {
        return values.length == 1 ? values[0] : values;
    }
}

var str = 'http://www.example.com?name[]=hello&name[]=world&var1=stam';

console.log(getURLParam('name[]',str));
console.log(getURLParam('var1',str)); 
```

# java - 'void' 方法何时影响参数，何时影响原始对象？

> ID：15865748
> 
> 赞同：8
> 
> 时间：2013-04-07T17:53:40.203
> 
> 标签：java, methods, parameters, return-value, void

我对编程以及这个网站都是全新的，所以如果我搞砸了，请原谅我。我花了很长时间弄清楚如何在此处正确发布我的代码。

```
package tester;
import java.util.*;
public class Mainclass2 {
    public static void main(String[] args) {

        int y = 3; 
        int[] x = {1, 2, 3, 4};

        editnumbersArray(x);
        editnumbersNotArray(y);

        System.out.println(x[2]); **//now this was changed from 3 to 9...**
        System.out.println(y);    //but this one went unchanged.

    }

    //this accepts 'x[]' into the 'a[]' parameter.
    public static void editnumbersArray(int[] a){
        a[2] = 9;  **//<---why does this one CHANGE the actual x[2] instead of just a[2]?**
    }

    //this accepts 'y' into the 'a' parameter.
    public static void editnumbersNotArray(int a){
        a = 9;  **//<--while this one only changes 'a' instead of 'y'?**
    }

} 
```

所以我的问题基本上是作为评论输入的。为什么传入方法的数组会改变原始数组（x[]）的值，而传入另一个方法的int没有改变？我确定这是一个简单的答案，但是当我进行研究时，我无法弄清楚要搜索什么。我不知道这叫什么，所以我搜索的所有内容都让我走错了路。谢谢你的帮助！！

**编辑**：感谢与地址的类比！这是迄今为止你可以向我解释的最好方式。所以基本上当你将一个数组传递给一个参数时，它传递一个引用，而不是实际值？所以当我在我的方法中进行调整时，它会改变数组引用的任何内容？我注意到这也发生在列表中。那么列表实际上不是按值传递的吗？似乎数组/列表本身基本上是为了编辑而传入的，无论我在我的方法中将其命名为什么（在本例中为 a[]。）

**编辑** [http://javadude.com/articles/passbyvalue.htm](http://javadude.com/articles/passbyvalue.htm) 这个页面真的清除了它。很抱歉发布重复的问题。问题是我不知道我想问什么。我什至从未听说过这些术语“按值传递/引用”，所以现在我知道了

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-07T17:57:59.087

更改参数本身的值永远不会影响 Java 中的参数，因为所有参数都是按值传递的。但是，看看这个方法：

```
public static void editnumbersArray(int[] a){
    a[2] = 9;
} 
```

该赋值*不会*更改参数的值。的值`a`仍然是同一个引用，指向同一个数组——它只是改变了数组的*内容*。

想象一下，如果我在一张纸上为你写下我的家庭住址。你对那张纸做了什么并不重要——那不会改变我住的地方。但是，如果您访问该地址并将前门涂成绿色，而根本不改变那张纸，我*会*看到这种变化。

区分不同的概念非常重要：

*   *变量*是一个命名的存储位置；它保存一个值，该值*始终*是原始值（例如 an `int`）或引用。在我上面的例子中，这张纸就像变量。
*   *引用*只是一个允许您导航到对象的值。这不是对象本身。就像纸上的地址。
*   一个*对象*包含其他变量。可能有几个变量都具有引用同一对象的值。就像我的例子中的房子：我可以在几张纸上写下我的地址，但只有一所房子。

数组是一个对象，它充当其他变量的容器。所以值`a`只是对数组的引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T18:00:45.473

Java 对所有内容都使用按值传递（您要搜索的内容）。本质上，这意味着它会复制参数，然后将其传递给方法。这意味着您无法通过使用 = 运算符来更改某些内容。

这就是`(int a)`版本不变的原因。

但是，对于对象或数组，它不会复制对象或数组，而是复制对对象或数组的引用。这意味着您有两个变量，原始的 on 和在您的示例中，两个变量`(int[] a)`都指向内存中的同一位置。对任一变量的更改都会影响另一个变量。

按值传递、按引用传递和按值传递引用是您想要搜索更多信息的事物类型。

# python - DictReader 将键更改为上

> ID：15865750
> 
> 赞同：0
> 
> 时间：2013-04-07T17:53:45.833
> 
> 标签：python, python-2.7, csv

当字段未按预期格式化时，我正在尝试解决 dictreader 中的导入问题，强制所有字段名为大写（或小写）将解决该问题。

这是我正在使用的基本代码，但我似乎无法更新 dict 中的行。

```
f = open(sourceFile,'rb')
reader = csv.DictReader(f, dialect='excel')
for r in reader:
    r.update(dict((k.upper(), v) for k, v in r.iteritems())) 
```

所需的输出是相同的字典列表，但所有键都设置为大写。

我错过了“更新”，我可以写一个新列表。只是有点沮丧。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-08-23T21:02:34.857

为避免遍历整个文件，请修改`fieldnames`DictReader 上的属性，如下所示：

```
f = open(sourceFile,'rb')
reader = csv.DictReader(f, dialect='excel')
reader.fieldnames = [name.upper() for name in reader.fieldnames] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T18:02:02.280

您可以使用生成器为每一行返回一个大写的键字典：

```
def uppercased(reader):
    for r in reader:
        yield {k.upper(): v for k, v in r.iteritems()} 
```

然后将其用作：

```
with open(sourceFile,'rb') as f:
    reader = csv.DictReader(f, dialect='excel')
    for r in uppercased(reader):
        # use `r` like you normally would 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T17:59:28.297

如果你想要一个新列表：

```
new = [{k.upper(): v for k, v in r.iteritems()} for r in reader] 
```

或者，如果您想一次制作一个 dict：

```
for r in reader:
    r = {{k.upper(): v for k, v in r.iteritems()}
    # use r 
```

# json - JSON.NET 反序列化派生类无法按预期工作

> ID：15865756
> 
> 赞同：1
> 
> 时间：2013-04-07T17:54:19.367
> 
> 标签：json, windows-phone-8, json.net

我一直在搜索有关此问题的论坛和 JSON.NET 网站，据我所知，我正确地遵循了指南，但它无法正常工作。

我正在尝试从派生类中反序列化对象。序列化工作正常，但是在反序列化时它会尝试反序列化为错误的类型。

我正在尝试使用 Windows Phone 8 和 JSON.NET 4.5.11

我有以下要序列化的类：

```
public class MyClass : ModelBase
{
    public string Title { get; set; }

    [JsonProperty(TypeNameHandling = TypeNameHandling.All)]
    public MyAction Action {get; set; }
}

public abstract class MyAction : ModelBase
{
    [JsonIgnore()]
    public abstract ActionType ActionType { get; }
    public abstract void Execute();
}

public class SettingsAction : MyAction 
{
    public override ActionType ActionType
    {
        get { return ActionType.Settings; }
    }

    public SettingsType SettingsType {get; set; }

    public override void Execute()
    {

    }
}

public class NoneAction : MyAction 
{
    public override ActionType ActionType
    {
        get { return ActionType.None; }
    }

    public override void Execute()
    {
        return;
    }
} 
```

我像这样序列化它：

```
MyClass obj = new MyClass 
{
    Action = new SettingsAction()
};

string json = JsonConvert.SerializeObject(
                obj, 
                Formatting.Indented, 
                new JsonSerializerSettings() { TypeNameHandling = TypeNameHandling.All });

using (StreamWriter writer = new StreamWriter(stream))
{
    writer.Write(json);
} 
```

它给了我以下 JSON：

```
{
  "$type": "Model.MyClass, Model",
  "Title": null,
  "Action": {
    "$type": "Model.SettingsAction, Model",
    "SettingsType": 0
  }
} 
```

据我所知，这是正确的，我告诉它包含类型信息并且它被正确包含。

我像这样反序列化它：

```
using (StreamReader r = new StreamReader(stream))
{
    string json = r.ReadToEnd();
    MyClass obj = JsonConvert.DeserializeObject<MyClass>(json);
} 
```

我收到以下错误：

**JsonSerializationException：在“Model.NoneAction”上将值设置为“SettingsType”时出错**

因此，尽管该类型包含在 JSON 中，但在序列化它时会忽略它，当然将其反序列化为不同的类型会失败。

有谁知道为什么它没有考虑到信息并反序列化为正确的类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T20:02:53.413

我找到了罪魁祸首：

在我的一个属性中，我正在这样做：

```
public MyAction Action
{
    get 
    {
        if (_Action == null) {
            Action = new NoneAction();
        }
        return _Action; 
    }
    set
    {
        if (value != _Action)
        {
            _Action = value;
            NotifyPropertyChanged("Action");
        }
    }
} 
```

问题出在 getter 中，如果对象为空，我会在其中创建一个 NoneAction。显然，Json.NET 在创建 MyClass 对象和设置 MyAction 对象的值之间的某个时间点调用了 getter。当它看到 Action-property 不为 null 时，它会尝试分配值而不是覆盖整个对象。

# macos - 从网络查询用户 iTunes 库

> ID：15865759
> 
> 赞同：1
> 
> 时间：2013-04-07T17:54:26.837
> 
> 标签：macos, web

有没有办法从服务器查询用户 iTunes 库？就像在不需要在操作系统上安装应用程序的情况下请求许可一样。

访问用户音乐库也可以。

# android - Android - 在内部存储之间复制文件

> ID：15865761
> 
> 赞同：0
> 
> 时间：2013-04-07T17:54:36.960
> 
> 标签：android, file-permissions, chmod

我想将内部存储之间的文件（从相机应用程序捕获的图像文件）从 /data/data/[my app]/photo 复制到内部存储中的另一个文件夹。

正如您在下面的屏幕截图中看到的，我已通过以下代码成功地将两个目录的权限更改为“777”：

```
Runtime.getRuntime().exec("su");  
Runtime.getRuntime().exec("chmod 777 /data/data/[my app]/photo", null, new File("/data/data/[my app]/photo")); 
```

因此，我使用类似的代码来更改“照片”文件夹中文件的权限，但没有任何反应。

```
Runtime.getRuntime().exec("su");  
Runtime.getRuntime().exec("chmod 777 /data/data/[my app]/photo/2_20130406_143344"); 
```

如果有人给我一些指导，我将不胜感激，因为它困扰了我整个周末。

提前非常感谢！

![在此处输入图像描述](https://i.stack.imgur.com/VzBnL.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T19:32:49.173

如果您从一个内部位置复制到另一个内部位置并由您的应用创建，则不需要额外的权限。尝试关注

```
ContextWrapper wrapper = new ContextWrapper(context);
File sourceDirectory = wrapper.getDir(SOURCE_FOLDER_NAME, Context.MODE_PRIVATE);
File destinationDirectory = wrapper.getDir(DESTINATION_FOLDER_NAME, Context.MODE_PRIVATE); 
```

现在使用递归函数从源复制到目标

```
private boolean copyFiles(sourceDirectory, desitnationDirectory); 
```

对于，如何递归复制文件[this](https://stackoverflow.com/questions/5368724/how-to-copy-a-folder-and-all-its-subfolders-and-files-into-another-folder) .

相机图像存储在 SD 卡上，您可以随时直接访问这些图像。

# entity-framework - EF5 Code First 迁移中的程序化数据转换

> ID：15865767
> 
> 赞同：3
> 
> 时间：2013-04-07T17:55:17.370
> 
> 标签：entity-framework, entity-framework-5, database-migration, entity-framework-migrations

是否可以在 Entity Framework 5 Code First 迁移中进行任何类型的编程数据转换？

有一个*Sql* () 方法来执行查询，但它的返回类型为 void，我看不到任何方法可以获取我执行的查询的结果。

**例子**

我有与*成分*一对多关系的表*配方*。由于各种原因，我想将其转换为成分 JSON 字符串属性。我能想到的唯一方法是这样的：

 **   创建新列*成分Json*
*   对于每个配方，查询其成分，以编程方式构造一个 JSON 字符串并插入到新列中。
*   删除旧表*成分*。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T00:59:18.033

您应该使用 db 'initializer' 来满足您的需求 - 和/或某种“种子”（关于注入 EF 流的位置）。

您可以> 使用自定义的 < -[查看这篇文章，](https://stackoverflow.com/questions/15796115/how-to-create-initializer-to-create-and-migrate-mysql-database/15796416#15796416) **它同时执行 Db Create... 和 Migrate**。它不是剪切和粘贴解决方案，但大多数情况下都有效（这只是解决问题的快速方法，您需要进行一些调整，它在下面有几个修复）。 `initializer`

 **`MigrateDatabaseToLatestVersion`仅对迁移部分进行剂量-您需要`seed`暴露-或手动包装该部分（重点是针对不同情况进行的“检查”-即何时“参与”迁移-或播种）。

**迁移应该首先进行**，并且 db 'creation' 类型没有多大意义，除了播种。

您覆盖`Seed`（您创建）以将任何数据库处理放在那里 - 您已经暴露了-如果需要 `DbContext`，您也可以调用。`SqlQuery`

* * *

[如何创建初始化程序来创建和迁移 mysql 数据库？](https://stackoverflow.com/questions/15796115/how-to-create-initializer-to-create-and-migrate-mysql-database/15796416#15796416)***

# c# - Flickr API 响应和 RestSharp 的 POCO 类

> ID：15865771
> 
> 赞同：1
> 
> 时间：2013-04-07T17:55:42.000
> 
> 标签：c#, poco, restsharp, flickr

在使用 Google Elevations API 成功试用 RestSharp 后，我想在 Flickr API 上试用它。对于 Elevations API，我创建了一组 POCO 类，这些类是从对 Elevation 查询的 XML 响应中派生的。我想对 Flickr API 做同样的事情。（我知道有很棒的 FlickrNet，但我想尝试使用 RestSharp）。

我有一个正在运行的 POCO 类版本，但我错过了一些信息。

这是 XML 中的响应：

```
<?xml version="1.0" encoding="utf-8" ?>
<rsp stat="ok">
  <photos page="1" pages="2" perpage="100" total="117">
    <photo id="8626881695" owner="62679167@N05" secret="e82b58b22f" server="8519" farm="9" title="IMG_3149.JPG" ispublic="1" isfriend="0" isfamily="0" latitude="51.507431" longitude="-0.122815" accuracy="16" context="0" place_id="I.7fkAxTUrq7FstgaA" woeid="20094318" geo_is_family="0" geo_is_friend="0" geo_is_contact="0" geo_is_public="1" url_sq="http://farm9.staticflickr.com/8519/8626881695_e82b58b22f_s.jpg" height_sq="75" width_sq="75" url_t="http://farm9.staticflickr.com/8519/8626881695_e82b58b22f_t.jpg" height_t="100" width_t="100" url_s="http://farm9.staticflickr.com/8519/8626881695_e82b58b22f_m.jpg" height_s="240" width_s="240" url_q="http://farm9.staticflickr.com/8519/8626881695_e82b58b22f_q.jpg" height_q="150" width_q="150" url_m="http://farm9.staticflickr.com/8519/8626881695_e82b58b22f.jpg" height_m="500" width_m="500" url_n="http://farm9.staticflickr.com/8519/8626881695_e82b58b22f_n.jpg" height_n="320" width_n="320" url_z="http://farm9.staticflickr.com/8519/8626881695_e82b58b22f_z.jpg" height_z="640" width_z="640" url_c="http://farm9.staticflickr.com/8519/8626881695_e82b58b22f_c.jpg" height_c="800" width_c="800" url_l="http://farm9.staticflickr.com/8519/8626881695_e82b58b22f_b.jpg" height_l="1024" width_l="1024" url_o="http://farm9.staticflickr.com/8519/8626881695_a923d82fe6_o.jpg" height_o="2112" width_o="2112" />
    <photo id="8626886683" owner="62679167@N05" secret="f308e6462c" server="8240" farm="9" title="" ispublic="1" isfriend="0" isfamily="0" latitude="51.507236" longitude="-0.122338" accuracy="16" context="0" place_id="I.7fkAxTUrq7FstgaA" woeid="20094318" geo_is_family="0" geo_is_friend="0" geo_is_contact="0" geo_is_public="1" url_sq="http://farm9.staticflickr.com/8240/8626886683_f308e6462c_s.jpg" height_sq="75" width_sq="75" url_t="http://farm9.staticflickr.com/8240/8626886683_f308e6462c_t.jpg" height_t="100" width_t="100" url_s="http://farm9.staticflickr.com/8240/8626886683_f308e6462c_m.jpg" height_s="240" width_s="240" url_q="http://farm9.staticflickr.com/8240/8626886683_f308e6462c_q.jpg" height_q="150" width_q="150" url_m="http://farm9.staticflickr.com/8240/8626886683_f308e6462c.jpg" height_m="500" width_m="500" url_n="http://farm9.staticflickr.com/8240/8626886683_f308e6462c_n.jpg" height_n="320" width_n="320" url_z="http://farm9.staticflickr.com/8240/8626886683_f308e6462c_z.jpg" height_z="612" width_z="612" url_o="http://farm9.staticflickr.com/8240/8626886683_c98a1a9f02_o.jpg" height_o="612" width_o="612" />
    <photo id="8626885149" owner="62679167@N05" secret="4dde1595e4" server="8387" farm="9" title="IMG_3147.JPG" ispublic="1" isfriend="0" isfamily="0" latitude="51.509048" longitude="-0.124458" accuracy="16" context="0" place_id="aOppNH9QV7zH7w" woeid="15652" geo_is_family="0" geo_is_friend="0" geo_is_contact="0" geo_is_public="1" url_sq="http://farm9.staticflickr.com/8387/8626885149_4dde1595e4_s.jpg" height_sq="75" width_sq="75" url_t="http://farm9.staticflickr.com/8387/8626885149_4dde1595e4_t.jpg" height_t="100" width_t="100" url_s="http://farm9.staticflickr.com/8387/8626885149_4dde1595e4_m.jpg" height_s="240" width_s="240" url_q="http://farm9.staticflickr.com/8387/8626885149_4dde1595e4_q.jpg" height_q="150" width_q="150" url_m="http://farm9.staticflickr.com/8387/8626885149_4dde1595e4.jpg" height_m="500" width_m="500" url_n="http://farm9.staticflickr.com/8387/8626885149_4dde1595e4_n.jpg" height_n="320" width_n="320" url_z="http://farm9.staticflickr.com/8387/8626885149_4dde1595e4_z.jpg" height_z="640" width_z="640" url_c="http://farm9.staticflickr.com/8387/8626885149_4dde1595e4_c.jpg" height_c="800" width_c="800" url_l="http://farm9.staticflickr.com/8387/8626885149_4dde1595e4_b.jpg" height_l="1024" width_l="1024" url_o="http://farm9.staticflickr.com/8387/8626885149_8f928ce11a_o.jpg" height_o="2112" width_o="2112" />
    <photo id="8626825995" owner="24343055@N03" secret="0ba9a79f43" server="8262" farm="9" title="Heroes Salute" ispublic="1" isfriend="0" isfamily="0" latitude="51.503119" longitude="-0.149366" accuracy="16" context="0" place_id="yy7TEQtVUbhVOw" woeid="43246" geo_is_family="0" geo_is_friend="0" geo_is_contact="0" geo_is_public="1" url_sq="http://farm9.staticflickr.com/8262/8626825995_0ba9a79f43_s.jpg" height_sq="75" width_sq="75" url_t="http://farm9.staticflickr.com/8262/8626825995_0ba9a79f43_t.jpg" height_t="75" width_t="100" url_s="http://farm9.staticflickr.com/8262/8626825995_0ba9a79f43_m.jpg" height_s="180" width_s="240" url_q="http://farm9.staticflickr.com/8262/8626825995_0ba9a79f43_q.jpg" height_q="150" width_q="150" url_m="http://farm9.staticflickr.com/8262/8626825995_0ba9a79f43.jpg" height_m="375" width_m="500" url_n="http://farm9.staticflickr.com/8262/8626825995_0ba9a79f43_n.jpg" height_n="240" width_n="320" url_z="http://farm9.staticflickr.com/8262/8626825995_0ba9a79f43_z.jpg" height_z="480" width_z="640" url_c="http://farm9.staticflickr.com/8262/8626825995_0ba9a79f43_c.jpg" height_c="600" width_c="800" url_l="http://farm9.staticflickr.com/8262/8626825995_0ba9a79f43_b.jpg" height_l="768" width_l="1024" url_o="http://farm9.staticflickr.com/8262/8626825995_309be230ce_o.jpg" height_o="2313" width_o="3085" />
    <photo id="8626826765" owner="24343055@N03" secret="a14c1a395c" server="8526" farm="9" title="Long Overdue" ispublic="1" isfriend="0" isfamily="0" latitude="51.503173" longitude="-0.149318" accuracy="16" context="0" place_id="yy7TEQtVUbhVOw" woeid="43246" geo_is_family="0" geo_is_friend="0" geo_is_contact="0" geo_is_public="1" url_sq="http://farm9.staticflickr.com/8526/8626826765_a14c1a395c_s.jpg" height_sq="75" width_sq="75" url_t="http://farm9.staticflickr.com/8526/8626826765_a14c1a395c_t.jpg" height_t="100" width_t="75" url_s="http://farm9.staticflickr.com/8526/8626826765_a14c1a395c_m.jpg" height_s="240" width_s="180" url_q="http://farm9.staticflickr.com/8526/8626826765_a14c1a395c_q.jpg" height_q="150" width_q="150" url_m="http://farm9.staticflickr.com/8526/8626826765_a14c1a395c.jpg" height_m="500" width_m="375" url_n="http://farm9.staticflickr.com/8526/8626826765_a14c1a395c_n.jpg" height_n="320" width_n="240" url_z="http://farm9.staticflickr.com/8526/8626826765_a14c1a395c_z.jpg" height_z="640" width_z="480" url_c="http://farm9.staticflickr.com/8526/8626826765_a14c1a395c_c.jpg" height_c="800" width_c="600" url_l="http://farm9.staticflickr.com/8526/8626826765_a14c1a395c_b.jpg" height_l="1024" width_l="768" url_o="http://farm9.staticflickr.com/8526/8626826765_7db667a6ed_o.jpg" height_o="3121" width_o="2340" />
    <photo id="8626843195" owner="24343055@N03" secret="bf3c7309a5" server="8104" farm="9" title="Bus Bonus" ispublic="1" isfriend="0" isfamily="0" latitude="51.503319" longitude="-0.149323" accuracy="16" context="0" place_id="yy7TEQtVUbhVOw" woeid="43246" geo_is_family="0" geo_is_friend="0" geo_is_contact="0" geo_is_public="1" url_sq="http://farm9.staticflickr.com/8104/8626843195_bf3c7309a5_s.jpg" height_sq="75" width_sq="75" url_t="http://farm9.staticflickr.com/8104/8626843195_bf3c7309a5_t.jpg" height_t="100" width_t="75" url_s="http://farm9.staticflickr.com/8104/8626843195_bf3c7309a5_m.jpg" height_s="240" width_s="180" url_q="http://farm9.staticflickr.com/8104/8626843195_bf3c7309a5_q.jpg" height_q="150" width_q="150" url_m="http://farm9.staticflickr.com/8104/8626843195_bf3c7309a5.jpg" height_m="500" width_m="375" url_n="http://farm9.staticflickr.com/8104/8626843195_bf3c7309a5_n.jpg" height_n="320" width_n="240" url_z="http://farm9.staticflickr.com/8104/8626843195_bf3c7309a5_z.jpg" height_z="640" width_z="480" url_c="http://farm9.staticflickr.com/8104/8626843195_bf3c7309a5_c.jpg" height_c="800" width_c="600" url_l="http://farm9.staticflickr.com/8104/8626843195_bf3c7309a5_b.jpg" height_l="1024" width_l="768" url_o="http://farm9.staticflickr.com/8104/8626843195_601d42bdd2_o.jpg" height_o="3067" width_o="2300" />
    <photo id="8626786831" owner="24664325@N06" secret="c30d6881bf" server="8261" farm="9" title="Breaking the girl" ispublic="1" isfriend="0" isfamily="0" latitude="51.508234" longitude="-0.128188" accuracy="16" context="0" place_id="1EPGyGtTUrrDXJmGCA" woeid="20094364" geo_is_family="0" geo_is_friend="0" geo_is_contact="0" geo_is_public="1" url_sq="http://farm9.staticflickr.com/8261/8626786831_c30d6881bf_s.jpg" height_sq="75" width_sq="75" url_t="http://farm9.staticflickr.com/8261/8626786831_c30d6881bf_t.jpg" height_t="64" width_t="100" url_s="http://farm9.staticflickr.com/8261/8626786831_c30d6881bf_m.jpg" height_s="155" width_s="240" url_q="http://farm9.staticflickr.com/8261/8626786831_c30d6881bf_q.jpg" height_q="150" width_q="150" url_m="http://farm9.staticflickr.com/8261/8626786831_c30d6881bf.jpg" height_m="322" width_m="500" url_n="http://farm9.staticflickr.com/8261/8626786831_c30d6881bf_n.jpg" height_n="206" width_n="320" url_z="http://farm9.staticflickr.com/8261/8626786831_c30d6881bf_z.jpg" height_z="412" width_z="640" url_c="http://farm9.staticflickr.com/8261/8626786831_c30d6881bf_c.jpg" height_c="515" width_c="800" url_l="http://farm9.staticflickr.com/8261/8626786831_c30d6881bf_b.jpg" height_l="644" width_l="1000" />
...cut for brevity
  </photos>
</rsp> 
```

以下是有效的 POCO 类，但缺少信息：

```
public class Reply
  {
    public string stat {get;set;}
    public List<Photo> photos {get;set;}
  }

  public class Photo
  {
    public string id {get;set;}
    public string owner {get;set;}
    public string secret {get;set;}
    public string server {get;set;}
    public string farm {get;set;}
    public string title {get;set;}
    public string ispublic {get;set;}
    public string isfriend {get;set;}
    public string isfamily {get;set;}
    public string latitude {get;set;}
    public string longitude {get;set;}
    public string accuracy {get;set;}
    public string context {get;set;}
    public string place_id {get;set;}
    public string woeid {get;set;}
    public string geo_is_family {get;set;}
    public string geo_is_contact {get;set;}
    public string geo_is_public {get;set;}
    public string url_sq {get;set;}
    public string height_sq {get;set;}
    public string width_sq {get;set;}
    public string url_t {get;set;}
    public string height_t {get;set;}
    public string width_t {get;set;}
    public string url_s {get;set;}
    public string height_s {get;set;}
    public string width_s {get;set;}
    public string url_q {get;set;}
    public string height_q {get;set;}
    public string width_q {get;set;}
    public string url_m {get;set;}
    public string height_m {get;set;}
    public string width_m {get;set;}
    public string url_n {get;set;}
    public string height_n {get;set;}
    public string width_n {get;set;}
    public string url_z {get;set;}
    public string height_z {get;set;}
    public string width_z {get;set;}
    public string url_c {get;set;}
    public string height_c {get;set;}
    public string width_c {get;set;}
    public string url_l {get;set;}
    public string height_l {get;set;}
    public string width_l {get;set;}
    public string url_o {get;set;}
    public string height_o {get;set;}
    public string width_o {get;set;}

  } 
```

我还想检索照片元素中的属性：

```
<photos page="1" pages="2" perpage="100" total="117"> 
```

对于上述类，我看不到获取这些属性的合乎逻辑的方法，因为我从未定义它们。我尝试了以下类（照片类与上面相同）：

```
 public class Reply
  {
    public string stat {get;set;}
    public Photos photos {get;set;}

  }
  public class Photos
  {
    public string page {get;set;}
    public string pages {get;set;}
    public string perpage {get;set;}
    public string total {get;set;}
    public List<Photo> photoList {get;set;}
  } 
```

当我尝试访问时`response.Data.photos.page`出现`Object reference not set to an instance of an object`错误。

任何人都可以阐明如何设计能够访问照片元素中的属性以及能够检索照片列表的类吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:47:48.613

RestSharp 默认不反序列化属性。github.com/restsharp/RestSharp/wiki/Deserialization 似乎区别在于，如果属性是一个没有其他内联内容的元素（即照片），则可以对属性进行反序列化。具有属性的元素和其中包含的其他元素似乎需要自定义反序列化器。相反，我使用 Xml.Linq 来访问照片元素属性：

```
System.Xml.Linq.XDocument xDoc = System.Xml.Linq.XDocument.Parse(response.Content); 
IEnumerable<int> page = 
   from item in xDoc.Descendants("photos") 
   select (int) item.Attribute("page"); etc... 
```

# ruby-on-rails - 覆盖 active_for_authentication？为设计

> ID：15865772
> 
> 赞同：10
> 
> 时间：2013-04-07T17:55:46.040
> 
> 标签：ruby-on-rails, devise

我在哪里可以覆盖active_for_authentication？

```
def active_for_authentication?
  super && account_active?
end 
```

1) 文件位置和文件名。

2) 完整文件的样子.. 等等... class something < < devise:something

原来的active_for_authentication？方法可以在 devise/lib/devise/models/authenticable.rb 中找到。

谢谢你

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-07T18:12:44.673

> 覆盖`active_for_authentication?`模型中的方法 [...] —[来源](https://github.com/plataformatec/devise/wiki/How-To:-Customize-user-account-status-validation-when-logging-in)

因此，如果你有一个用户模型，你只需要做

```
class User

  def active_for_authentication?
    super && account_active?
  end

end 
```

# android - android通知未触发

> ID：15865776
> 
> 赞同：0
> 
> 时间：2013-04-07T17:56:41.220
> 
> 标签：android, notifications

我一直在寻找为什么我的通知没有显示在通知栏中并且似乎无法理解为什么不显示的原因.. 有没有人看到需要在这段代码中做些什么？

```
NotificationManager nm = (NotificationManager)
                getSystemService(NOTIFICATION_SERVICE);
            NotificationCompat.Builder notif = new NotificationCompat.Builder(DisplayNotification.this)
                                                .setContentTitle("Due")
                                                .setContentText("Do it fast!")
                                                .setSmallIcon(R.drawable.book);

            //---100ms delay, vibrate for 250ms, pause for 100 ms and
            // then vibrate for 500ms---
            notif.setVibrate(new long[] { 100, 250, 100, 500});        
            nm.notify(notifID, notif.build());

    } 
```

# ios - 使用加速度计和陀螺仪来独立于方向跟踪手机运动

> ID：15865777
> 
> 赞同：3
> 
> 时间：2013-04-07T17:56:42.063
> 
> 标签：ios, accelerometer, gyroscope, core-motion

我一直在尝试使用 Coremotion APIS，目的是将坐标从手机参考系统转换为“地球”参考系统，作为存储在 CMAttitude 对象中的参考系统。到目前为止，我尝试的是获取 CMRotationMatrix

```
CMRotationMatrix r = motionManager.deviceMotion.attitude.rotationMatrix; 
```

并进行矩阵乘法

```
CMAcceleration a = motionManager.deviceMotion.gravity; 
```

以下列方式（typedef float vec3f[3]）

```
vec3f accelerationInReferenceSystem;
accelerationInReferenceSystem[0] = a.x * r.m11 + a.y * r.m12 + a.z * r.m13;
accelerationInReferenceSystem[1] = a.x * r.m21 + a.y * r.m22 + a.z * r.m23;
accelerationInReferenceSystem[2] = a.x * r.m31 + a.y * r.m32 + a.z * r.m33; 
```

但是，没有运气。我对 3D 图形不太感兴趣，也没有太多关于如何使用各种 CMRotationMatrix、四元数等的文档。在此之前，我尝试记录 d.attitude.pitch、d.attitude.roll 的值和d.attitude.yaw。对于我所读到的内容，这不是要走的路，但除此之外，我发现 d.attitude.pitch 返回的值仅跨越 PI 弧度，因此我需要在计算俯仰角时包括偏航0 到 2PI，以便了解手机头部的方向。在我看来，使用旋转矩阵将是一个好方法。另外，我想知道是否需要使用与当前旋转矩阵相反的矩阵才能将坐标带入由 r.attitude 标识的系统中，如果您能提供帮助，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T23:36:24.620

我不确定我是否理解您想要做什么。*但是如果“地球”参考系是指固定参考系，而“坐标”是指 x, y, z 坐标*，那么就不可能做什么您正在尝试做（或至少不可能准确地做）。因为您可以使用这些来计算设备的位移，这是不可能做到令人满意的 - 例如：[如何找到陀螺仪和加速度计行进的距离？](https://stackoverflow.com/questions/6647314/need-to-find-distance-using-gyroaccelerometer)

# c# - 在数据库中加载 CSV 文件

> ID：15865778
> 
> 赞同：1
> 
> 时间：2013-04-07T17:56:45.473
> 
> 标签：c#, database, csv

我刚开始学习 C#，并制作了一些简单的应用程序。我现在正在处理的应用程序是一个读取数据并将数据输入（Access）数据库的应用程序。我成功连接到数据库，我可以向它输入数据。现在的问题。

我有一个包含数据（订单）的 csv 文件。我想将这些订单加载到数据库中。csv 文件如下所示：

```
Order 1: 2 cakes,01-01-2013,chocolate,Jan|Order 2: 5 cakes,01-08-2013,vanilla,Piet| 
```

如您所见，它是按（与我的数据库表中的相同）排序的：[Order #]、[Amount]、[Date]、[KindOfCake]、[Buyer]，新订单紧跟在半管 (|) 之后。

这就是我所拥有的：

```
String[] orders1= File.ReadAllText(@"c:\\orders.csv").Split('|');
for (int i = 0; i < orders1.Length; i++)
{
    textBox1.AppendText(orders[i] + Environment.NewLine);
} 
```

但这会将所有文本加载到一个文本框中。我正在考虑将 csv 中的数据（用“，”分隔）加载到不同的文本框，然后将文本框的值加载到数据库中。但这不是我猜测的最佳方式。

将 CSV 中的所有数据加载到数据库中的最佳方式是什么？

非常感谢您的提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T18:12:20.640

就像您在管道字符上拆分一样，您可以在逗号上拆分每个字符串。

```
String[] orders = File.ReadAllText(@"c:\\orders.csv").Split('|');
foreach (string order in orders) {
    String[] orderFields = order.Split(',');
    // Now you have your fields, put them in the DB. No need to put them
    // into text boxes
} 
```

但是，如果逗号出现在字段中会怎样？这不适用于这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T18:12:31.913

`DataTable`我会从您的 CSV 中加载信息。然后创建与数据库的连接并将其插入`DataTable`数据库。此链接似乎可以执行您正在尝试的操作，并带有一些很好的代码示例： http: [//www.codeproject.com/Articles/11435/Importing-CSV-Data-and-saving-it-in-database](http://www.codeproject.com/Articles/11435/Importing-CSV-Data-and-saving-it-in-database)或[http:// www.codeproject.com/Articles/9258/A-Fast-CSV-Reader](http://www.codeproject.com/Articles/9258/A-Fast-CSV-Reader)。

# python - 为什么我的模型在 django admin 中显示为禁用？

> ID：15865779
> 
> 赞同：0
> 
> 时间：2013-04-07T17:56:49.300
> 
> 标签：python, django, admin

我在我的应用程序从 yaml 描述文件启动期间动态生成 django 模型。我在 django admin 中注册了它们，但它们在管理界面中显示为禁用。看起来像[这样](http://oi45.tinypic.com/sne70w.jpg)。

我创建了 manage.py 命令来从 yaml 格式的描述文件中动态创建模型。

```
from django.core.management.base import BaseCommand
from django.core.management import call_command

import yaml

from generation.generate import generate_fields, generate_model

class Command(BaseCommand):
    help = 'Generates or updates django models from specified file'

    def handle(self, *args, **options):
        try:
            f = open(args[0], 'r')
            models = yaml.safe_load(f)
            f.close()
            for name, definition in models.items():
                fields = generate_fields(definition['fields'])
                generate_model(name, definition['title'], fields, "generation", "generation.models")
            call_command('syncdb', interactive=True)
        except IOError:
            self.stderr.write('Cannot open file: {0}'.format(args[0]))
        except yaml.YAMLError as e:
            self.stderr.write('Cannot parse file {0}: {1}'.format(args[0], e)) 
```

我从根 urls.py 启动这个命令，如下所示：

```
from django.conf.urls import patterns, include, url
from django.contrib import admin
from generation import views
from generation.management.commands.updatemodels import Command

admin.autodiscover()

urlpatterns = patterns('',
    url(r'^$', views.main, name='main'),
    # url(r'^modgen/', include('modgen.foo.urls')),

    url(r'^admin/', include(admin.site.urls)),
)

Command().handle('models.yaml') 
```

我以这种方式生成模型并在管理员中注册：

```
from sys import stderr
from django.contrib import admin
from django.db import models

class Types():
    INT = 'int'
    CHAR = 'char'
    DATE = 'date'

def generate_model(model_name, model_title, fields, app_label, module):
    class Meta:
        pass
    if app_label:
        setattr(Meta, 'app_label', app_label)
    if model_title:
        setattr(Meta, 'verbose_name_plural', model_title)
    attrs = {'__module__': module, 'Meta': Meta}
    if fields is not None:
        attrs = dict(attrs.items() + fields.items())
    model = type(model_name, (models.Model,), attrs)
    admin.site.register(model)

def generate_fields(definition):
    fields = {}
    for field in definition:
        fields[field['id']] = generate_field(field['title'], field['type'])
    return fields

def generate_field(title, field_type):
    if field_type == Types.CHAR:
        return models.CharField(title, max_length=255)
    elif field_type == Types.INT:
        return models.IntegerField(title)
    elif field_type == Types.DATE:
        return models.DateField(title)
    else:
        stderr.write('Unknown field type specified: {0}'.format(field_type)) 
```

为什么模型在管理界面中显示为禁用？Django 成功注册了它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T02:00:43.597

可能，首先您需要编辑（或创建）文件`generation/admin.py`，然后在 django-admin 部分添加此代码以注册应用程序模型。

```
from django.contrib import admin
from myproject.generation.models import Rooms, Users

class RoomsAdmin(admin.ModelAdmin):
    pass

class UsersAdmin(admin.ModelAdmin):
    pass

admin.site.register(Rooms, RoomsAdmin)
admin.site.register(Users, UsersAdmin) 
```

# jquery - 将对象的Json数组解析为MVC3中的c#类数组

> ID：15865785
> 
> 赞同：1
> 
> 时间：2013-04-07T17:57:22.440
> 
> 标签：jquery, ajax, json, asp.net-mvc-3

我正在尝试将一组对象从我的视图传递给我的控制器。然而，每个对象只包含空值。我被困住了。

我的 C# 类：

```
 public class CalendarColor
    {
        public string BackgroundColor { get; set; }
        public string BorderColor { get; set; }
        public string ItemType { get; set; }
        public string LocationId { get; set; }
        public string TextColor { get; set; }
    } 
```

我在控制器中的方法：

```
 [HttpPost]
    public ActionResult SaveColors(IEnumerable<CalendarColor> calendarColors)
    {
        do the stuff
    } 
```

这是javascript：

```
 //The Array that will hold the CalendarColorObjects 
        var calendarColors = [];

        //Loop through the table with the settings 
        $('#tblColorSettings > tbody  > tr').each(function () {
            var calendarColor = {};
            calendarColor.ItemType = $(this).find('td:first').text().trim();
            calendarColor.LocationId = $(this).attr('data-location');
            calendarColor.BackgroundColor = $(this).find('td:nth(1)').find('input').val();
            calendarColor.BorderColor = $(this).find('td:nth(2)').find('input').val();
            calendarColor.TextColor = $(this).find('td:nth(3)').find('input').val();

            //Add to the Array
            calendarColors.push({ CalendarColor : calendarColor });
        });

        var urlSaveSettings = '/settings/savecolors';
        var calendarColorsToBeSaved = { calendarColors: calendarColors };

        $.ajax({
            type: 'POST',
            url: urlSaveSettings,
            contentType: 'application/json; charset=utf-8',
            traditional: true,
            data: JSON.stringify(calendarColorsToBeSaved),
            success: function (serverMessage) {
                if (serverMessage == "OK") {
                    alert('OK');
                }
            },

            error: function (msg) {
                alert(msg);
            }
        }); 
```

我在控制器方法中得到一组空对象。我似乎无法找出问题所在。

JSON看起来像这样：

{"calendarColors":[{"CalendarColor":{"ItemType":"Booking","LocationId":"1","BackgroundColor":"#464646","BorderColor":"#FFFFFF","TextColor": "#7c541b"}},{"CalendarColor":{"ItemType":"Booking","LocationId":"3","BackgroundColor":"#464646","BorderColor":"#FFFFFF"

...

","BackgroundColor":"#ff9b99","BorderColor":"#000000","TextColor":"#ff5a56"}}]}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T18:01:59.150

问题可能是您将对象封装在数组中：

```
//Loop through the table with the settings 
        $('#tblColorSettings > tbody  > tr').each(function () {
            var calendarColor = {};
            calendarColor.ItemType = $(this).find('td:first').text().trim();
            calendarColor.LocationId = $(this).attr('data-location');
            calendarColor.BackgroundColor = $(this).find('td:nth(1)').find('input').val();
            calendarColor.BorderColor = $(this).find('td:nth(2)').find('input').val();
            calendarColor.TextColor = $(this).find('td:nth(3)').find('input').val();

            //just add the objects to the array
            calendarColors.push(calendarColor);
        }); 
```

我只发布了需要更改的代码。

# php - 未序列化的 COOKIE 返回空

> ID：15865786
> 
> 赞同：0
> 
> 时间：2013-04-07T17:57:33.113
> 
> 标签：php, session, serialization, cookies

我正在尝试以序列化的方式将数组保存到 cookie 中。所以我要做的是：

```
 $serial_auth = serialize($_SESSION['auth']);
 setcookie("auth_cookie", $serial_auth , 2592000 + time()); 
```

在下一页中，我尝试像这样使用这些数据：

```
if(isset($_COOKIE['auth_cookie']))
{
$_SESSION['auth'] = unserialize($_COOKIE['auth_cookie']); //but it returns an empty array.
} 
```

现在奇怪的是整个事情都在我的本地主机上工作，但它在 000webhost 网站上不起作用。

和一个注释：当我尝试回应这些时，我得到了这个：

```
$_SESSION['auth'] = 
Array ( [status] => ok [userid] => 1 [username] => user11 [visiblename] => user11 ) 
SERIALIZED =
a:4:{s:6:"status";s:2:"ok";s:6:"userid";s:1:"1";s:8:"username";s:6:"user11";s:11:"visiblename";s:6:"user11";} 
```

这可能是 PHP 配置问题，但我想了解是否有办法解决此问题，而无需更改任何 PHP 配置。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T20:22:35.357

这具有严重的安全缺陷，不应该这样做。

攻击者可以将 cookie 值设置为任何值，包括序列化对象。这些对象可以在重新创建时执行代码。因此，攻击者可能会通过向您发送正确制作的序列化字符串来在您的机器上执行代码！不能希望攻击者能够做到这一点。

请参阅此页面底部的警告：[http ://www.php.net/manual/en/function.unserialize.php](http://www.php.net/manual/en/function.unserialize.php)

第二件事是：为什么您需要在单独的 cookie 中提供身份验证信息，以及与它有什么联系？如果攻击者更改任何值，尤其是用户 ID 或状态，他将能够做什么？我想他可能会接触到他不应该接触到的东西。

# codeigniter - CSV 插入数据库

> ID：15865793
> 
> 赞同：0
> 
> 时间：2013-04-07T17:58:26.790
> 
> 标签：codeigniter

这不像我们之前讨论的那样工作，由于某种原因，我所做的是`$vars`为上传的文件创建一些。

[此处提供代码（Pastebin）。](http://pastebin.com/hY6CKVk6)

但从来没有真正插入任何东西

*   做时`var_dump($csv_row)`我得到：`bool(false)`
*   `var_dump($fh)`显示：`resource(89) of type (stream)`
*   `var_dump($insert_str)`显示 csv 文件中的所有 1700 条记录（显然太大，无法在此处发布）

所以我猜这个`while`陈述或整个 from`if`陈述在某个地方是错误的。真的真的很感激这方面的帮助，我需要在明天（星期一）之前让它工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T08:04:09.203

将此代码放在控制器顶部或读取 csv 文件之前

`ini_set('auto_detect_line_endings', true);`

检查这是否适合您

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T20:59:21.217

您似乎错误地使用了 codeigniter 数据库库。我可以看到一个

```
$this->db->set($insert_str); 
```

但`$this->db->insert()`找不到。该`set()`方法仅适用于`update()`或`insert()`跟随它，[请参阅文档](http://ellislab.com/codeigniter/user-guide/database/active_record.html)，搜索`$this->db->set()`.

您要么想要使用`$this->db->insert_batch()`（在同一个文档页面上，遗憾的是没有直接链接的部分）表单并使用您的记录构建一个数组数组（因此您也不必创建一个长的 sql 字符串）。或者您可以使用`$this->db->query()`并`$insert_str`在您现在调用的地方将其提供给它`$this->db->set()`。

* * *

根据你的问题：

> var_dump($insert_str) 显示 csv 文件中的所有 1700 条记录

所以我会排除`while`循环或`if`不工作的可能性。

# java - 实现深度优先搜索：不兼容的对象

> ID：15865794
> 
> 赞同：1
> 
> 时间：2013-04-07T17:58:27.980
> 
> 标签：java, nodes, depth-first-search, breadth-first-search

我正在尝试实现一个呼吸优先搜索，用于搜索罗马尼亚城市的人工智能程序。

但是，我遇到了很多麻烦，最新的错误是

```
searches.java:153: error: incompatible types
                            current = q.poll();
                                            ^
  required: city
  found:    Object
Note: searches.java uses unchecked or unsafe operations.
Note: Recompile with -Xlint:unchecked for details. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T18:00:32.857

您需要声明您的类型`Queue`：

```
Queue<City> q = new LinkedList<City>(); 
```

我已将您更改`city`为`City`，因为您的类名应始终以大写字母开头[，如本文档所示](http://www.oracle.com/technetwork/java/javase/documentation/codeconvtoc-136057.html)。

# django - 在 Django 中处理多个表单

> ID：15865795
> 
> 赞同：0
> 
> 时间：2013-04-07T17:58:28.713
> 
> 标签：django, django-models, django-forms

我有几个模型 - `Node`、`Link`和`Map`。地图有`link_id`、`node_a_id`和`node_b_id`字段。我为 显示一个表单，为`Link`2个表单显示`Node`。如何将输入的信息保存在`Map`将存储关系的模型中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T21:47:52.590

我假设您使用的是 ModelForms，并且地图需要保存链接和节点。

所以首先你需要保存这个模型，然后保存地图模型。我还将假设，link_id、node_a_id 和 node_b_id 被定义为 models.ForeignKey(Link)...

所以它看起来像这样：

```
# somehwere on your views.py ...

def my_display_forms_view(request):
    if request.method == 'POST':
        na = Node()
        nb = Node()
        link = Link()
        na_form = NodeForm(request.POST, instance=na)
        nb_form = NodeForm(request.POST, instance=nb)
        link_form = LinkForm(request.POST, instance=link)

        if na_form.is_valid() and nb_form.is_valid() and link_form.is_valid():
            na = na_form.save()
            nb = nb_form.save()
            link = link_form.save()
            map = Map(link_id=link, node_a_id=na, node_b_id=nb)
            # maybe here fill more fields for map
            map.save()
            # eventually do some more stuff
    else:
       ... generate new unbound forms here
    return render_to_response(...) 
```

# c# - C#通过用户输入向数组添加值

> ID：15865797
> 
> 赞同：-2
> 
> 时间：2013-04-07T17:58:34.720
> 
> 标签：c#

我想通过用户输入将元素添加到我的数组中。我知道使用列表可以很容易地做到这一点，但我必须使用数组。

代码的问题是array.lenght 将始终为1。我希望数组的大小与其中元素的总数相同，因此在声明数组时不应设置数组的大小。

我认为如果您将元素添加到数组中，它将复制先前的值 + 添加的值并创建一个新数组。

已更新答案

```
 public static void Add(int x){

     if (Item == null)  // First time need to initialize your variable
     {
         Item = new int[1];
     }
     else
     {
         Array.Resize<int>(ref Item, Item.Length + 1);
     }
     Item[Item.Length-1] = x; //fixed Item.Length -> Item.Length-1
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T18:03:04.807

使用`List<int>`而不是显式数组，它将为您动态调整大小，并使用 Add() 方法在最后添加元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T18:03:59.973

列表会随着您向其中添加元素而增长。数组具有恒定的大小。如果必须使用数组，最简单的方法是创建一个足够大的数组来容纳输入的元素。

```
private int[] _items = new int[100];
private int _count;

public void Add(int x)
{
    _items[_count++] = x;
} 
```

您还需要跟踪已插入的元素数量（我在`_count`这里使用了该字段）；

* * *

例如，您可以像这样枚举所有项目：

```
for (int i = 0; i < _count; i++) {
    Console.WriteLine(_items[i]);
} 
```

* * *

您可以像这样公开访问这些项目：

```
public int[] Items { get { return _items; } }

public int Count  { get { return _count; } } 
```

* * *

**更新**

如果要自动增加数组大小，最好在数组变得太小时时将实际大小加倍。这是速度和内存效率之间的一个很好的折衷（这就是列表内部的工作方式）。

```
private int[] _items = new int[8];
private int _count;

public void Add(int x)
{
   if (_count == _items.Lengh) {
       Array.Resize(ref _items, 2 * _items.Length);
   }
    _items[_count++] = x;
} 
```

但是，请记住，这会更改数组引用。因此，不应将此数组引用的永久副本存储在其他任何地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T18:12:50.000

我没有在VS中测试。干得好：

```
namespace ConsoleApplication1
{
    class Program
    {
        static int[] Item; //Fixed int Item[] to int[] Item
        static void Main(string[] args)
        {
            Add(3);
            Add(4);
            Add(6);
        }

     public static void Add(int x){

         if (Item == null)  // First time need to initialize your variable
         {
             Item = new int[1];
         }
         else
         {
             Array.Resize<int>(ref Item, Item.Length + 1);
         }
         Item[Item.Length-1] = x; //fixed Item.Length -> Item.Length-1
     }

    }
} 
```

这应该每次将您的数组大小调整一个，然后将最后一项设置为您要添加的内容。请注意，这是非常低效的。

# c# - 进度条上的透明图片框

> ID：15865808
> 
> 赞同：0
> 
> 时间：2013-04-07T17:59:30.060
> 
> 标签：c#, progress-bar, transparent, picturebox

我想问你为什么我在 C# 中的图片框不透明。

我用 Photoshop（透明背景）创建了一个 png 文件，但是如果我将图片框放在 PROGRESSBAR 上，图片框会覆盖进度条，我看不到进度条的加载。（图片框中的“透明”背景是彩色控件（如 WindowsForm）。

如何将图片实现到进度条？

问候

# iphone - 从 Web 加载 UIImage 的最常用方法

> ID：15865809
> 
> 赞同：3
> 
> 时间：2013-04-07T17:59:53.963
> 
> 标签：iphone, ios, objective-c, xcode, cocoa

亲爱的stackoverflowers，

我误入歧途了。

在我的应用程序中，我从网上加载 2 张图片，如下所示：

```
-(void)loadImages
{
  ...

  image1 = [UIImage imageWithData:[NSData dataWithContentsOfURL:imgUrl1]];
  image2 = [UIImage imageWithData:[NSData dataWithContentsOfURL:imgUrl2]];
} 
```

为了不阻塞主线程，我使用**GCD**：

```
dispatch_async( dispatch_get_global_queue(0,0), ^{
            [self loadImages]; 
```

之后，我在我的`UITableView`：

```
if (indexPath.row == 0)
    {
        cell.imageView.image = image1;
    }
    else
    {
        cell.imageView.image = image2;
    } 
```

然后我决定添加`UIActivityIndicator`，但遇到了一些问题。我了解我的代码不正确。我看到人们使用`NSURLRequest`and`NSURLConnection`来加载图像并添加`UIActivityIndicator`.

你能告诉我，加载这样的图像最标准的方法是什么？我应该重写什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T18:12:08.333

我建议您使用 AsyncImageView 一个漂亮的实现，它由 iCarousel 之父 Nicklockwood 提供。

[https://github.com/nicklockwood/AsyncImageView](https://github.com/nicklockwood/AsyncImageView)

使用起来非常简单。

```
 #import "AsyncImageView.h" 
```

并且在所有 imageViews 中都这样做。

```
 [imageView setImage:@"default.png"];
    [imageView setImageURL:@"whateverurl/whateverimage.png"]; 
```

在您的情况下，它将是： [cell.imageView setImageURL:@"yourURL"];

它就像一个魅力，我的代码正在生产中。但是，如果您仍然希望您的代码正常工作，请尝试以下操作：

```
 UIActivityIndicator *activity =[[UIActivityIndicator alloc] initWithStyle:UIActivityIndicatorWhite];
 [activity setFrame:CGRectMake(100,100,30,30)];
 [self.view addSubview:activity];

 dispatch_queue_t dispatchQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0);
 dispatch_async(dispatchQueue, ^(void)
 { 
  [activity startAnimating];
 [self loadImages];
 dispatch_sync(dispatch_get_main_queue(), ^{ 
 [yourTableView reloadData];
 [activity stopAnimating];
 [activty setHidden:YES];
 });
 }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T18:06:32.000

如果我想使用自己的自定义代码，我可以告诉你我通常会做什么

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0), ^{
    NSData * imageData = [NSData dataWithContentsOfURL:_pictureURL];
    dispatch_async(dispatch_get_main_queue(), ^{
        imageView.image = [UIImage imageWithData:imageData];
    });
}); 
```

否则可以考虑[`UIImageView+AFNetworking`](https://github.com/AFNetworking/AFNetworking/blob/master/AFNetworking/UIImageView+AFNetworking.m)添加方法的类别

```
setImageWithURLRequest:placeholderImage:success:failure: 
```

到`UIImageView`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T18:08:08.623

您的代码没有任何问题（假设您已确认它有效）。仅仅因为其他人使用 NSURLConnection 和相关并不会让你错。

要使用活动指示器，请执行以下操作：

```
-(void)loadImages
{
  UIActivityIndicator *indicator = ...

  ...
  [indicator startAnimating];
  image1 = [UIImage imageWithData:[NSData dataWithContentsOfURL:imgUrl1]];
  image2 = [UIImage imageWithData:[NSData dataWithContentsOfURL:imgUrl2]];
  [indicator stopAnimating];
} 
```

小笨蛋-我个人会使用：

```
 cell.imageView.image = (0 == indexPath.row ? image1 : image2) 
```

因为似乎没有人欣赏 C '条件表达式'。结束小尼特。

# android - aSmack 因 NetworkOnMainThreadException 而崩溃

> ID：15865810
> 
> 赞同：2
> 
> 时间：2013-04-07T18:00:01.837
> 
> 标签：android, asmack

我提前为格式道歉。我是 android 开发的新手，我正在开发一个 XMPP 客户端，与家里的服务器交谈，通过谷歌谈话机器人执行命令....

1.  我确实查看了stackoverflow的一些答案并搜索了一些答案
2.  我通过 github 更新到最新的 ASMACK 库
3.  我确实添加了使用权限
4.  我让 ASMACK 在我的 android 上开发一个测试应用程序。

我将工作代码复制到我正在尝试制作的应用程序中并给了我错误......就像我说我是新手，10 年来没有做过 java 编程......我不知道如何听到错误堆栈

我有一个名为“设置对话框”的设置对话框。当我单击按钮时，我运行：

 ````
 protected void onStart() {
    super.onStart();
    setContentView(R.layout.settings);
    getWindow().setFlags(4, 4);
    setTitle("XMPP Settings");
    Button ok = (Button) findViewById(R.id.ok);
    ok.setOnClickListener( new View.OnClickListener()
    {
            @Override
            public void onClick(View v)
            {
                String host = HOST_ADDRESS;
                int port = HOST_PORT_NUM;
                String service = HOST_SERVICE;
                String username = "me@gmail.com";//getText(R.id.userid);
                String password = "abc123";//getText(R.id.password);

                // Create a connection
                ConnectionConfiguration connConfig = new ConnectionConfiguration("talk.google.com", 5222, "gmail.com");
                XMPPConnection XMPPCon = new XMPPConnection(connConfig);
                try 
                {
                    XMPPCon.connect();
                    XMPPCon.login(username,password);

                } 
                catch (XMPPException ex) 
                {
                    ex.printStackTrace();
                    HomeBotClient.setConnection(null);
                }
                HomeBotClient.setConnection(XMPPCon);
                dismiss();
            }

    }
    );
} 
````  `这在主要活动中称为“setConnection”函数

`public void setConnection (XMPPConnection XMPPCon) {`

 ````
 this.XMPPCon = XMPPCon;
    if (XMPPCon != null) 
    {
        ChatManager chatmanager = XMPPCon.getChatManager();
        Chat newChat = chatmanager.createChat("psun03@gmail.com",new MessageListener()
        {
            public void processMessage(Chat chat, Message message) {
                try 
                {
                  Log.v(TAG, "Got:" + message.getBody());
                  chat.sendMessage(message.getBody());
                } 
                catch (XMPPException e) 
                {
                    e.printStackTrace();
                    Log.v(TAG, "Couldn't respond:" + e);
                }
                Log.v(TAG, message.toString());
              }
        });
        try 
        {
            newChat.sendMessage("OMNOMNOM");
        } 
        catch (XMPPException e) 
        {
            e.printStackTrace();
            Log.v(TAG, "couldn't send:" + e.toString());
        }

          // Accept only messages from friend@gmail.com
          PacketFilter filter 
              = new AndFilter(new PacketTypeFilter(Message.class), 
                              new FromContainsFilter("psun03@gmail.com"));

          // Collect these messages
          PacketCollector collector = XMPPCon.createPacketCollector(filter);

          while(true) {
            Packet packet = collector.nextResult();

            if (packet instanceof Message) 
            {
              Message msg = (Message) packet;
              // Process message
              Log.v(TAG, "Got message:" + msg.getBody());
            }
          }
    }
} 
````  `按下按钮时出现此错误

`04-07 17:21:15.011: E/AndroidRuntime(1099): FATAL EXCEPTION: main 04-07 17:21:15.011: E/AndroidRuntime(1099): android.os.NetworkOnMainThreadException 04-07 17:21:15.011: E/AndroidRuntime(1099): at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117) 04-07 17:21:15.011: E/AndroidRuntime(1099): at java.net.InetAddress.lookupHostByName(InetAddress.java:385) 04-07 17:21:15.011: E/AndroidRuntime(1099): at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236) 04-07 17:21:15.011: E/AndroidRuntime(1099): at java.net.InetAddress.getAllByName(InetAddress.java:214) 04-07 17:21:15.011: E/AndroidRuntime(1099): at org.jivesoftware.smack.proxy.DirectSocketFactory.createSocket(DirectSocketFactory.java:49) 04-07 17:21:15.011: E/AndroidRuntime(1099): at org.jivesoftware.smack.XMPPConnection.connectUsingConfiguration(XMPPConnection.java:576) 04-07 17:21:15.011: E/AndroidRuntime(1099): at org.jivesoftware.smack.XMPPConnection.connect(XMPPConnection.java:1034) 04-07 17:21:15.011: E/AndroidRuntime(1099): at com.ps.homebotclient.SettingsDialog$1.onClick(SettingsDialog.java:53) 04-07 17:21:15.011: E/AndroidRuntime(1099): at android.view.View.performClick(View.java:4204) 04-07 17:21:15.011: E/AndroidRuntime(1099): at android.view.View$PerformClick.run(View.java:17355) 04-07 17:21:15.011: E/AndroidRuntime(1099): at android.os.Handler.handleCallback(Handler.java:725) 04-07 17:21:15.011: E/AndroidRuntime(1099): at android.os.Handler.dispatchMessage(Handler.java:92) 04-07 17:21:15.011: E/AndroidRuntime(1099): at android.os.Looper.loop(Looper.java:137) 04-07 17:21:15.011: E/AndroidRuntime(1099): at android.app.ActivityThread.main(ActivityThread.java:5041) 04-07 17:21:15.011: E/AndroidRuntime(1099): at java.lang.reflect.Method.invokeNative(Native Method) 04-07 17:21:15.011: E/AndroidRuntime(1099): at java.lang.reflect.Method.invoke(Method.java:511) 04-07 17:21:15.011: E/AndroidRuntime(1099): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793) 04-07 17:21:15.011: E/AndroidRuntime(1099): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560) 04-07 17:21:15.011: E/AndroidRuntime(1099): at dalvik.system.NativeStart.main(Native Method)`

 `* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T07:11:25.517

Android 4.0 或更高版本不允许在 GUI 线程中进行网络 I/O 操作，`NetworkOnMainThread`如果这样做会抛出异常。为了防止这种情况，aSmack 带有[AndroidConnectionConfiguration](https://github.com/Flowdalic/asmack/blob/master/static-src/custom/org/jivesoftware/smack/AndroidConnectionConfiguration.java)，它提供

*   `AndroidConnectionConfiguration(String serviceName)`
*   `AndroidConnectionConfiguration(String serviceName, int timeout)`
*   `AndroidConnectionConfiguration(String host, int port, String name)`

它在使用时会产生一个新线程，从而防止异常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T07:13:12.063

仅供参考`android.os.NetworkOnMainThreadException`，仅当您尝试在主 UI 线程上调用 Web 服务调用等长时间运行的进程时才会发生。它在 <2.3 的设备中效果最好，但如果您没有将它包含在 Threading 中并尝试在 >3.0 的设备上运行它，它会给您 NetworkOnMainThreadException。

要解决它，您可以实现 AsyncTask （标准方式）或包含以下代码（惰性方式）：

```
StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
StrictMode.setThreadPolicy(policy); 
```

在以下位置查看并阅读有关 NetworkOnMainThreadException 的更多信息：[Android StrictMode – NetworkOnMainThreadException](http://www.vogella.com/blog/2012/02/22/android-strictmode-networkonmainthreadexception/)```

# java - 将逗号分隔的文件读入Java中的多维数组

> ID：15865813
> 
> 赞同：0
> 
> 时间：2013-04-07T18:00:23.037
> 
> 标签：java, csv, multidimensional-array

我想将多项选择题列表读入 Java 中的多维数组，文件格式为：**Question,answer1,answer2,answer3,answer4,correctanswer**。

> 一公里有多少米？,1,10,100,1000,4,彩虹童谣中没有哪个颜色？,蓝色,粉色,黑色,橙色,3 一个足球队有多少球员在球场上？ ,10,11,12,13,2

所以我希望数组采用 Question[][] 格式，如果 n 为 1，那么 Question[n][1] 将是 CSV 文件中的第一个问题，然后选择一个问题，我可以将 n 更改为无论我想要什么。

我不知道会有多少问题，它们会不断地从 CSV 文件中添加或删除，因此不会有静态数量。所以问题是如何以简单的方式从 CSV 文件中加载所有问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T18:06:55.333

最简单的方法是创建一个`ArrayList`或数组。这看起来很复杂，但使用这些`ArrayList`方法您不必担心问题的数量。

```
ArrayList<String[]> questions = new ArrayList<String[]>();
// Create the object to contain the questions.

Scanner s = new Scanner(new File("path to file"));
// Create a scanner object to go through each line in the file.

while(s.hasNextLine()) {
   // While lines still exist inside the file that haven't been loaded..
   questions.add(s.nextLine().split(","));
   // Load the array of values, splitting at the comma.
} 
```

最后，您会得到一个`ArrayList`对象，其中每个条目都是 a `String[]`，其长度与每行上的标记数相同。

**编辑**

如对此答案的评论中所述，您可以简单地调用类中的`toArray`方法`ArrayList`，以获取多维数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T18:22:35.577

您将需要设置一个嵌套的 for 循环来处理此问题：

```
for(i = 0; i < number_of_questions; i++)
{
    line_array = current_input_line.split(",")
    Questions[i] = line_array[0]
    for(j = 1; j < line_array.length; j++)
    {
        Questions[i][j] = line_array[j];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T18:24:36.133

当您必须为数据层次结构创建一个二维数组时，您可能应该为它创建一个合理的模型。

这是适合您的快速（且肮脏）模型（因打字速度而丢弃的设置器）：

问卷类：

```
/**
 * Facilitates an entire questionnaire
 */
public class Questionnaire extends ArrayList<Question> {

    /**
     * This questionnaire's name
     */
    private String name;

    /**
     * Creates a new questionnaire using the specified name
     * @param name  The name of this questionnaire
     */
    public Questionnaire(String name) {
        this.name = name;
    }

    /**
     * Returns the name of this questionnaire
     */
    public String getName() {
        return name;
    }
} 
```

问题类：

```
/**
 * Facilitates a question and its answers
 */
public class Question extends ArrayList<Answer> {

    /**
     * The question's text
     */
    private String text;

    /**
     * Constructs a new question using the specified text
     * @param text  The question's text
     */
    public Question(String text) {
        this.text = test;
    }

    /**
     * Returns this question's text
     */
    public String getText() {
        return text;
    }
} 
```

答题类：

```
/**
 * Facilitates an answer
 */
public class Answer {

    /**
     * The answer's text
     */
    private String text;

    /**
     * Whether or not this answer is correct
     */
    private boolean correct;

    /**
     * Constructs a new answer using the specified settings
     * @param text          The text of this answer
     * @param correct       Whether or not this answer is correct
     */
    public Answer(String text, boolean correct) {
        this.text = text;
        this.correct = correct;
    }

    /**
     * Returns this answer's text
     */
    public String getText() {
        return text;
    }

    /**
     * Whether or not this answer is correct
     */
    public boolean isCorrect() {
        return correct;
    }
} 
```

它的用法如下：

```
// Create a new questionnaire
Questionnaire questionnaire = new Questionnaire("The awesome questionnaire");

// Create a question and add answers to it
Question question = new Question("How awesome is this questionnaire?");
question.add(new Answer("It's pretty awesome", false));
question.add(new Answer("It's really awesome", false));
question.add(new Answer("It's so awesome my mind blows off!", true));

// Add the question to the questionnaire
questionnaire.add(question); 
```

迭代它非常容易：

```
// Iterate over the questions within the questionnaire
for(Question question : questionnaire) {
    // Print the question's text
    System.out.println(question.getText());

    // Go over each answer in this question
    for(Answer answer : question) {
        // Print the question's text
        System.out.println(answer.getText());
    }
} 
```

您也可以只迭代其中的一部分：

```
// Iterate over the third to fifth question
for (int questionIndex = 2; questionIndex < 5; questionIndex ++) {
    // Get the current question
    Question question = questionnaire.get(questionIndex);

    // Iterate over all of the answers
    for (int answerIndex = 0; answerIndex < question.size(); answerIndex++) {
        // Get the current answer
        Answer answer = question.get(answerIndex);
    }
} 
```

使用您描述的格式将文件读入模型可以通过以下方式完成：

```
// Create a new questionnaire
Questionnaire questionnaire = new Questionnaire("My awesome questionnaire");

// Lets scan the file and load it up to the questionnaire
Scanner scanner = new Scanner(new File("myfile.txt"));

// Read lines from that file and split it into tokens
String line, tokens[];
int tokenIndex;
while (scanner.hasNextLine() && (line = scanner.nextLine()) != null) {
    tokens = line.split(",");

    // Create the question taking the first token as its text
    Question question = new Question(tokens[0]);

    // Go over the tokens, from the first index to the one before last
    for (tokenIndex = 1; tokenIndex < tokens.length-1; tokenIndex++) {
        // Add the incorrect answer to the question
        question.add(new Answer(tokens[tokenIndex], false));
    }

    // Add the last question (correct one)
    question.add(new Answer(tokens[tokenIndex],true));
}

// Tada! questionnaire is now a complete questionnaire. 
```

# c++ - 将一个矩阵复制到另一个矩阵的列中

> ID：15865820
> 
> 赞同：2
> 
> 时间：2013-04-07T18:00:47.770
> 
> 标签：c++, opencv

我正在尝试创建一个矩阵，其列包含其他矩阵行的数据。但是，我的编译器告诉我，没有这样的功能，`Mat::copyTo(Mat)`即使它[在文档中](http://docs.opencv.org/modules/core/doc/basic_structures.html#mat-copyto)并且我的 IDE 自动完成它（意味着它在标题中并且包含标题）。

```
binary.row(selectedRow).reshape(1).copyTo(data.col(0));
reduced.row(selectedRow).reshape(1).copyTo(data.col(1)); 
```

有什么想法为什么会失败？我受够了 OpenCV 的`InputArray`/`OutputArray`风格，我希望他们只是将方法签名与实际预期的内容相匹配，而不是依赖于编译时/运行时错误。

**编辑：**我知道我可以运行一个`for`循环并复制数据并完成它，但应该有一种使用 OpenCV 方法的简单方法来做到这一点。

**Edit2：**这是实际错误：

```
/usr/include/opencv2/core/core.hpp:1651:10: note: void cv::Mat::copyTo(cv::OutputArray) const
/usr/include/opencv2/core/core.hpp:1651:10: note:   no known conversion for argument 1 from 'cv::Mat' to 'cv::OutputArray {aka const cv::_OutputArray&}'
/usr/include/opencv2/core/core.hpp:1653:10: note: void cv::Mat::copyTo(cv::OutputArray, cv::InputArray) const
/usr/include/opencv2/core/core.hpp:1653:10: note:   candidate expects 2 arguments, 1 provided 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:56:49.677

检查返回的错误消息，可能的允许覆盖都不是`copyTo()`很好的匹配。

两个参数覆盖显然是行不通的。单个参数覆盖似乎需要一个非常量引用作为复制目标（这在考虑它时当然是有意义的）。也就是说，`data.col(0)`并且`data.col(1)`似乎正在返回 const 引用，这些引用不可写，因此也不是很好的匹配。

您可能必须使用中间对象，然后是数据列的设置器，除非`data`可以返回对您希望成为复制目标的对象的可写引用。

祝你好运。

# c++ - 将 XCode 项目动态链接到 lib4cxx 库时，如何解决单符号链接错误？

> ID：15865826
> 
> 赞同：1
> 
> 时间：2013-04-07T18:01:36.153
> 
> 标签：c++, xcode, linker-errors, undefined-symbol, log4cxx

我在 Mountain Lion 上的 XCode 4.6 下用 C++ 编写。我正在尝试添加和使用 Apache log4cxx 库。我今天早上通过 Brew 安装了库。我正在链接 liblog4cxx.dylib。我收到一个链接错误，找不到一个符号：

> 架构 x86_64 的未定义符号：
> “log4cxx::Logger::forcedLog(log4cxx::helpers::ObjectPtrT const&, std::__1::basic_string, std::__1::allocator > const&, log4cxx::spi::LocationInfo const& ) const"，引用自：

我知道它正在查找库文件，因为如果我删除它，我会得到更多与 log4cxx 相关的未定义符号错误。

相关代码基本上是：

```
#include <log4cxx/logger.h>

static LoggerPtr  logger(log4cxx::Logger::getLogger("foo.bar.Baz"));

void foo(int p1, int p2)
{
    LOG4CXX_WARN(logger, "blah blah blah");
} 
```

在函数内部创建记录器对象，无论是静态的还是非静态的，都不会改变行为。此外，与静态库链接，无论是否在我的项目中定义 LOG4CXX_STATIC，都不会改变行为。

查看我正在调用的宏，我看到这个符号是执行日志操作的实际方法。如果取出日志记录调用但保留定义记录器对象的代码，则代码链接正常，如您所料。

我需要做什么才能解析最后一个符号？

蒂亚！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-12T04:13:04.267

I traced my issue down to compiling the library in a non C++11 compiler, but then my target project was a C++11 compiler.

I was able to compile log4cxx in a C+11 compiler by viewing the changes to log4cxx in the development git repo, which mainly consisted of inserting static_casts, as in this update:

[http://apache-logging.6191.n7.nabble.com/C-11-does-not-allow-char-literals-with-highest-bit-set-unless-cast-td34908.html](http://apache-logging.6191.n7.nabble.com/C-11-does-not-allow-char-literals-with-highest-bit-set-unless-cast-td34908.html)

I suppose the few incompatible routines came up undefined, which is why we were getting confused with only a few seemingly random undefines. (Or I was anyway)

# php - 测试 PUT/POST/DELETE 方法

> ID：15865827
> 
> 赞同：2
> 
> 时间：2013-04-07T18:01:37.257
> 
> 标签：php, phpspec, tonic

我在运行测试`PUT`和使用单元测试框架[phpspec2](http://phpspec.net/)`POST`时遇到了一些问题。`DELETE`

这是我在单元测试中的代码：

```
$this->beConstructedWith(new \Tonic\Application(), new \Tonic\Request(array(
    'uri' => '/',
    'method' => 'PUT',
    'Content-Type' => 'application/json',
    'data' => '{"name":"testing", "email":"testing@@test.com", "password":"Passw0rd"}'
)), array());

$expectedResult = new \stdClass();
$expectedResult->message = "An error was encountered.";
$expectedResult->error[] = "The email must be valid.";

$response = $this->exec();
$response->shouldReturnAnInstanceOf("Tonic\Response");
$response->contentType->shouldBe("application/json");
$response->body->shouldBe(json_encode($expectedResult)); 
```

通过查看[Tonic代码和](http://peej.github.io/tonic/)[git 存储库](https://github.com/peej/tonic)中的示例，我认为我已经正确设置了它。

以下是`bin/phpspec -v run`本次单元测试的运行结果：

![phpspec2 错误](https://i.stack.imgur.com/udjLv.png)

当我对 Tonic 服务运行实际请求时，它工作正常。我知道我在单元测试的设置中一定做错了什么，但我不知道是什么。

**编辑**：PUT 方法

```
/**
 * Add a new user to the table.
 *
 * @method PUT
 * @accepts application/json
 * @provides application/json
 * @json
 * @return \Tonic\Response
 */
public function add()
{
    // Validate the data before we go any futher.
    $error = $this->validate();

    // If the data is invalid then we want to let the requester know.
    if (true === $error) {
        $this->output->message = "An error was encountered.";
        $this->responseCode = \Tonic\Response::NOTFOUND;
    } else { // Else we want to PUT the data into our table.
        $query = $this->db->prepare("INSERT INTO `user` (`name`, `email`, `password`, `dateOfBirth`) VALUES (:name, :email, :password, :dateOfBirth)");
        $query->bindValue(":name", $this->request->data->name);
        $query->bindValue(":email", $this->request->data->email);
        $query->bindValue(":password", hash('sha256', $this->request->data->password));
        $query->bindValue(":dateOfBirth", $this->request->data->dateOfBirth);
        $query->execute();

        // Check that the new user was successfully inserted into the database. If not let the requester know what happened.
        if (0 === $query->rowCount()) {
            if ("00000" === $query->errorCode()) {
                $this->output->message = "No rows affected by query.";
            } else {
                $this->output->message = "There was an error running the query.";
                $this->output->error[] = $query->errorInfo();
            }

            $this->responseCode = \Tonic\Response::CONFLICT;
        } else { // Inserted successfully.
            $this->output->message = "User successfully created.";
            $this->responseCode = \Tonic\Response::CREATED;
            $this->headers["Location"] = "/" . $this->request->data->email;
        }
    }

    return new \Tonic\Response($this->responseCode, $this->output, $this->headers);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T20:54:20.603

好的，所以我想通了。问题与`Content-Type`以下代码中的集合有关：

```
$this->beConstructedWith(new \Tonic\Application(), new \Tonic\Request(array(
    'uri' => '/',
    'method' => 'PUT',
    'Content-Type' => 'application/json',
    'data' => '{"name":"testing", "email":"testing@@test.com", "password":"Passw0rd"}'
)), array()); 
```

它应该是`contentType`：

```
$this->beConstructedWith(new \Tonic\Application(), new \Tonic\Request(array(
    'uri' => '/',
    'method' => 'PUT',
    'contentType' => 'application/json',
    'data' => '{"name":"testing", "email":"testing@@test.com", "password":"Passw0rd"}'
)), array()); 
```

# twitter-bootstrap - AngularJS - 即使值改变了 $watch 也不会触发

> ID：15865828
> 
> 赞同：0
> 
> 时间：2013-04-07T18:01:46.587
> 
> 标签：twitter-bootstrap, angularjs

我正在使用 AngularJS 和 twitter 引导程序。

我有一张桌子，这张桌子属于父控制器。
我有一个弹出窗口，它属于子控制器。

当用户单击表中的一行时，将显示弹出窗口，其中包含有关所选行的更多信息。

这就是我当前的代码的样子：

```
function ParentCtrl($scope) {
    //called when a row is clicked
    $scope.showMoreInfo = function() {
        $scope.showModal = true;
    }
}

function ChildCtrl($scope) {
    $scope.$watch('showModal', function() {
        if($scope.$parent.showModal !== true) {
            return;
        }

        //Show the popup - #myModal is the ID of the popup div 
        jQuery("#myModal").modal("show");
    });

    //When the popup is closed, change the value
    jQuery("#myModal).on("hide", function() {
        $scope.$parent.showModal = false;
    });
} 
```

现在，此机制完美运行 - 当用户单击该行时，将显示包含该行详细信息的弹出窗口（我使用此处未包含的服务将详细信息从 ParentCtrl 传输到 ChildCtrl 以关注问题手）。
当用户单击弹出窗口中的“X”或关闭按钮时，模式会按预期关闭。进一步单击该行也可以顺利进行，并且弹出窗口按预期显示。

**我的问题在于**通过单击弹出窗口外部的区域关闭弹出窗口。基本上，如果您使用过引导模式 ( [http://twitter.github.io/bootstrap/javascript.html#modals](http://twitter.github.io/bootstrap/javascript.html#modals) )，您就会知道在弹出窗口之外有一个区域在后台隐约显示网页并且可以通过单击弹出窗口外部的区域来关闭弹出窗口 - 这不是通过弹出窗口中的“X”或关闭按钮，而是只需单击弹出容器外部。

尽管`jQuery("#myModal").on('hide', function() {..});`调用了将 的值设置`$scope.$parent.showModal`为 false 的`$scope.$watch(..)`方法，但永远不会触发 。
当用户以这种方式关闭弹出窗口后点击另一行时，虽然`$scope.showModal`设置为true，但`$scope.$watch(..)`仍然不会触发。

知道当用户以异常方式关闭弹出窗口时出了什么问题，这里有什么解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T20:41:21.963

每次范围属性在 Angular 监督之外发生变化时（例如 DOM 事件），您都需要引起一个`$digest`循环。

为此，请在更改属性后添加一个 $scope.$apply() 。

```
//When the popup is closed, change the value
jQuery("#myModal).on("hide", function() {
    $scope.$parent.showModal = false;
    $scope.$apply();
}); 
```

无论如何，正如@ganaraj 所说，请阅读[Common Pitfall -> Dom Manipulation section](http://docs.angularjs.org/misc/faq)。您**必须将****所有 dom 操作**包含在指令中，而**不是**在控制器中。

# c# - 将项目添加到 WPF ListView 中的列

> ID：15865829
> 
> 赞同：40
> 
> 时间：2013-04-07T18:01:49.403
> 
> 标签：c#, wpf, visual-studio, xaml, listview

我一直在努力将项目添加到`ListView`. 在我的 Windows 窗体应用程序中，我有这样的事情：

```
// In my class library:
public void AddItems(ListView listView)
{
    var item = new ListViewItem {Text = "Some Text for Column 1"};
    item.SubItems.Add("Some Text for Column 2");

    listView.Items.Add(item);
} 
```

然后我会从我的`Form.cs`.

如何在 WPF 中做到这一点？最好，我不想使用很多 XAML。

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2013-04-07T18:27:48.960

## 使用更少 XAML 和更多 C# 的解决方案

如果`ListView`在 XAML 中定义：

```
<ListView x:Name="listView"/> 
```

然后您可以添加列并在 C# 中填充它：

```
public Window()
{
    // Initialize
    this.InitializeComponent();

    // Add columns
    var gridView = new GridView();
    this.listView.View = gridView;
    gridView.Columns.Add(new GridViewColumn { 
        Header = "Id", DisplayMemberBinding = new Binding("Id") });
    gridView.Columns.Add(new GridViewColumn { 
        Header = "Name", DisplayMemberBinding = new Binding("Name") });

    // Populate list
    this.listView.Items.Add(new MyItem { Id = 1, Name = "David" });
} 
```

*见`MyItem`下文定义。*

## 使用更多 XAML 和更少 C# 的解决方案

但是，在 XAML 中定义列更容易（在`ListView`定义中）：

```
<ListView x:Name="listView">
    <ListView.View>
        <GridView>
            <GridViewColumn Header="Id" DisplayMemberBinding="{Binding Id}"/>
            <GridViewColumn Header="Name" DisplayMemberBinding="{Binding Name}"/>
        </GridView>
    </ListView.View>
</ListView> 
```

然后只需在 C# 中填充列表：

```
public Window()
{
    // Initialize
    this.InitializeComponent();

    // Populate list
    this.listView.Items.Add(new MyItem { Id = 1, Name = "David" });
} 
```

*见`MyItem`下文定义。*

## `MyItem`定义

`MyItem`定义如下：

```
public class MyItem
{
    public int Id { get; set; }

    public string Name { get; set; }
} 
```

# android - 如何在底部和中心设置按钮？- 安卓

> ID：15865838
> 
> 赞同：0
> 
> 时间：2013-04-07T18:02:39.447
> 
> 标签：android

如何在线性布局底部以及底部中心的 android XML 上设置 Button？提前致谢 ！

```
<Button
  android:layout_gravity="center"
       /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:38:42.833

如果您使用的是相对布局...

你可以做这样的事情

如果您有一个填充整个屏幕的相对布局，您应该能够`android:layout_alignParentBottom`将视图移动到屏幕底部。

然后设置`layout_marginleft`为您想要的值以将其设置为中心

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T16:31:34.147

看看它是否是正在寻找的东西：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:gravity="center"
        android:orientation="vertical" >

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Button" />
    </LinearLayout>

</RelativeLayout> 
```

# asp.net-mvc - 在 Windows 身份验证模式下获取有关当前用户的更多信息

> ID：15865839
> 
> 赞同：0
> 
> 时间：2013-04-07T18:02:46.170
> 
> 标签：asp.net-mvc, windows-authentication

在 Asp.Net MVC 4 windows 身份验证模式下，是否可以获得有关当前用户的更多信息（如姓名和家庭）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T20:29:45.183

获取用户名后，您可以使用 Active Directory API 获取用户的其他属性。例如，您可以使用以下代码：

```
Using System.DirectoryServices; 
```

...

```
DirectoryEntry entry = new DirectoryEntry("LDAP://DomainName");
DirectorySearcher dSearch = new DirectorySearcher(entry);
dSearch.PropertiesToLoad.Add("displayName");
dSearch.PropertiesToLoad.Add("cn");
dSearch.PropertiesToLoad.Add("department");
dSearch.Filter = "(&(objectClass=user)(l=" + username + "))";
foreach (SearchResult result in searcher.FindAll())
        {
            // Login Name
            Console.WriteLine(GetProperty(result, "cn"));
            // Display Name
            Console.WriteLine(GetProperty(result, "displayName"));
            // Department
            Console.WriteLine(GetProperty(result, "department"));
        } 
```

这可以是 GetProperty 方法：

```
private string GetProperty(SearchResult searchResult, string PropertyName)
    {
        if (searchResult.Properties.Contains(PropertyName))
        {
            return searchResult.Properties[PropertyName][0].ToString();
        }
        else
        {
            return string.Empty;
        }
    } 
```

和 propertyName 可以是如下值：

*   登录名：“cn”
*   名字：“givenName”
*   中间首字母：“首字母”
*   姓氏：“sn”
*   地址：“homePostalAddress”
*   ...

# windows - 为什么我不能终止这个while循环？

> ID：15865844
> 
> 赞同：2
> 
> 时间：2013-04-07T18:03:15.263
> 
> 标签：windows, perl, while-loop

我制作了以下脚本：

```
print "Will accept input until EOF";  

while(defined($line = <STDIN>)){  
    print "Input was $line \n";  
    if(chomp(@line) eq "end"){  
        print "aha\n";  
        last;  
    }  
} 
```

我有两个问题：

1.  为什么当我`end`在控制台中输入时，我看不到循环中的`aha`and `break`（`last`是否等于`break`正确）？
2.  停止循环`EOF`的组合键是什么？`while`我以为它`ctrl+D`在`Windows`但它不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T18:06:19.867

你的脚本错过了`use strict; use warnings;`。否则，您会注意到`$line`is not `@line`。

此外，`chomp`不会返回更改后的字符串，而是将其更改到位并返回删除的字符数。

在 MSwin 中，`Ctrl+Z``Enter`用作 EOF。

**更新**：修复了 EOF。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T18:08:41.870

我修改了你的代码：

```
use strict;
use warnings;

print "Will accept input until EOF";  

while( my $line = <STDIN> ){  
   chomp $line;
   print "Input was $line\n";  
   if( $line eq 'end'){  
      print "aha\n";  
      last;  
   }  
} 
```

# yii - 将数组作为属性从表单传递

> ID：15865845
> 
> 赞同：1
> 
> 时间：2013-04-07T18:03:15.410
> 
> 标签：yii

在我的模型中，我有属性 - 规格：

```
 class Category extends CActiveRecord
    {
        private $_specifications = array();

        public function getSpecifications()
        {
                    return $this->_specifications;
        }

        public function setSpecifications($specifications)
        {
                    $this->_specifications = implode(', ', $specifications);
        } 
```

所以我希望规范是一个数组。

我的视图文件：

```
<div id="specifications" class="row">
    <?php echo $form->labelEx($model,'specifications'); ?>
    <?php echo $form->textField($model,'specifications',array('rows'=>6, 'cols'=>50, 'name'=>'Category[specifications][0]', 'class' => 'clonedInput')); ?>
    <?php echo $form->textField($model,'specifications',array('rows'=>6, 'cols'=>50, 'name'=>'Category[specifications][1]', 'class' => 'clonedInput')); ?>
    <?php echo $form->error($model,'specifications'); ?>
</div> 
```

当我发送表单时，我收到一个错误：

```
htmlspecialchars() expects parameter 1 to be string, array given
...
public static function encode($text)
84     {
85         return htmlspecialchars($text,ENT_QUOTES,Yii::app()->charset);
86     } 
```

我试图禁用编码：

```
<?php echo $form->textField($model,'specifications',array('encode'=>false, 'rows'=>6, 'cols'=>50, 'name'=>'Category[specifications][0]', 'class' => 'clonedInput')); ?>
<?php echo $form->textField($model,'specifications',array('encode'=>false, 'rows'=>6, 'cols'=>50, 'name'=>'Category[specifications][1]', 'class' => 'clonedInput')); ?> 
```

但在这种情况下，这是另一个错误：

```
Array to string conversion
...
2216                 $html .= ' ' . $name . '="' . ($raw ? $value : self::encode($value)) . '"'; 
```

任何人都可以提供建议，我应该怎么做才能从表单中传递一个数组？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T18:28:18.213

如何将数组传递给单个文本字段？它应该显示什么？

您可以为此创建一个虚拟属性。

在模型中：

```
private $_specifications = array();

public function getSpecifications()
{
    return implode(', ', $this->_specifications);
} 
```

视图可以保持不变。

**编辑：**

当然，如果您希望能够写入属性，您也需要一个 setter。

```
public function setSpecifications($specifications)
{
    $this->_specifications = explode(', ', $specifications);
} 
```

请参考[http://www.yiiframework.com/wiki/167/understanding-virtual-attributes-and-get-set-methods/](http://www.yiiframework.com/wiki/167/understanding-virtual-attributes-and-get-set-methods/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T06:59:52.913

由于您的`specifications`属性是一个数组，您应该简单地创建一个循环来显示相应的输入，例如：

```
foreach ($model->specifications as $s)
{
  echo Chtml::textField('Category[specifications][]', $s, array('rows'=>6, 'cols'=>50, 'class' => 'clonedInput'));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-24T08:50:44.043

```
<?php echo $form->textField($model,'specifications',array('encode'=>false, 'rows'=>6, 'cols'=>50, 'name'=>'Category[specifications][0]', 'class' => 'clonedInput')); ?>
<?php echo $form->textField($model,'specifications',array('encode'=>false, 'rows'=>6, 'cols'=>50, 'name'=>'Category[specifications][1]', 'class' => 'clonedInput')); ?> 
```

我认为规格将显示两次。

# qt - 在 QML/QT 中设置绝对图像路径时出错（在 Windows 下）

> ID：15865846
> 
> 赞同：6
> 
> 时间：2013-04-07T18:03:19.797
> 
> 标签：qt, qml, absolute-path

在 Windows 下，我无法在 QML 中加载具有绝对文件路径的图像。每次我收到以下错误：

`QML Image: Cannot open: "file//d/folder/image1.jpg"`

在 Ubuntu 下它运行完美。

该图像由以下代码设置为动态：

```
Image {
      id: img
      x: 0
      y: 25
      width: 227
      height: 230
      anchors.horizontalCenter: parent.horizontalCenter
      source: "file://"+path
      fillMode: Image.PreserveAspectFit
  } 
```

如果我单击图像，我及时测试了以下命令：

```
onClicked:{

                console.log(path)
    } 
```

比我得到当前路径：`D:/folder/image1.jpg` Windows 有解决方法吗？

问候

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-12-20T19:37:38.693

“file//d/folder/image1.jpg”不是有效的 URL。它应该是“file:///d:/folder/image1.jpg”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-07T20:05:12.270

好的，我找到了解决方案。我`QDeclarativeImageProvider`在 C++ 中实现了一个处理图像路径并返回一个 PixelMap 的方法。如果你感兴趣：

# 图像提供程序.h

```
 #ifndef IMAGEPROVIDER_H
 #define IMAGEPROVIDER_H
 #include <QDeclarativeImageProvider>
class ImageProvider : public QObject, public QDeclarativeImageProvider
{
    Q_OBJECT
   public:

    ImageProvider(QDeclarativeImageProvider::ImageType type);
    ~ImageProvider();
    QImage requestImage(const QString& id, QSize* size, const QSize& requestedSize);
    QPixmap requestPixmap(const QString& id, QSize* size, const QSize& requestedSize);   
 };
#endif // IMAGEPROVIDER_H 
```

# 图像提供程序.cpp

```
#include "imageprovider.h"
#include <QFile>
#include <QImage>
#include <QPixmap>
#include <QDebug>

ImageProvider::ImageProvider(QDeclarativeImageProvider::ImageType type) :
QDeclarativeImageProvider(type){}

ImageProvider::~ImageProvider(){}

QImage ImageProvider::requestImage(const QString& id, QSize* size, const QSize&    requestedSize)
{
    QImage image(id);
    QImage result;

    if (requestedSize.isValid()) {
        result = image.scaled(requestedSize, Qt::KeepAspectRatio);
    } else {
         result = image;
    }
    *size = result.size();
    return result;
}

 QPixmap ImageProvider::requestPixmap(const QString& id, QSize* size, const QSize& requestedSize)
 {
    QPixmap image(id);
    QPixmap result;

    if (requestedSize.isValid()) {
        result = image.scaled(requestedSize, Qt::KeepAspectRatio);
    } else {
    result = image;
    }
    *size = result.size();
    return result;
} 
```

# 在 mainwindow.cpp 中注册

```
 view->engine()->addImageProvider(QString("extern"), imageProvider); 
```

# qml 文件的片段

```
 Image {
      id: img
      x: 0
      y: 25
      width: 227
      height: 230
      anchors.horizontalCenter: parent.horizontalCenter
       source: "image://extern/"+path
      //doesn't find absolute path in windows source: "file://"+path
      fillMode: Image.PreserveAspectFit
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-09T06:31:48.233

请使用以下路径`"qrc:///your_imagepath"`

# php - SQL 结果到 PHP 数组

> ID：15865848
> 
> 赞同：0
> 
> 时间：2013-04-07T18:03:29.033
> 
> 标签：php, sql

我有以下 sql 查询：

```
$sql = "SELECT lat, lang
        FROM users"; 
```

然后我使用以下代码将数组的结果放入两个数组中，一个用于 lat，一个用于 lang。

```
$i = 0;

foreach($results as $row) {
    $latArray = array();
    $langArray = array();
    $latArray[$i] = $row['lat'];
    $langArray[$i] = $row['lang'];          
    $i = ($i + 1);
} 
```

但是，似乎只存储了传递给数组的最后一个值。当我回显数组的每个值时，我得到以下错误：未定义的偏移量：0 我相信这意味着在 latArray[0] 处没有任何内容。

我确定我在这里遗漏了一些明显的东西，但为什么没有将所有值都复制到新数组中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T18:05:10.977

```
$i = 0;
$latArray = array(); //Declare once, do not redeclare in the loop
$langArray = array();
foreach($results as $row) {
    $latArray[$i] = $row['lat'];
    $langArray[$i] = $row['lang'];          
    $i = ($i + 1);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T18:05:36.337

在循环之前声明你的数组

```
$latArray = array();
$langArray = array();

foreach($results as $row) {
    $latArray[$i] = $row['lat'];
    $langArray[$i] = $row['lang'];          
    $i = ($i + 1);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T18:08:07.963

你应该把

```
$latArray = array();
$langArray = array(); 
```

在 foreach 循环之前（就像您使用计数器 $i 一样），因为 $result 中的每个新值都会重置 thous 值..

所以你的代码看起来像：

```
$i = 0;
$latArray = array();
$langArray = array();
foreach($results as $row) {
    $latArray[$i] = $row['lat'];
    $langArray[$i] = $row['lang'];          
    $i = ($i + 1);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T18:08:16.247

使用 fetch_assoc 代替：

```
$latArray = array();
        $langArray = array();
    while($row = mysql_fetch_assoc($your_query)){

    $latArray[$i] = $row['lat'];
    $langArray[$i] = $row['lang'];          
    $i++;
} 
```

如果你使用 msqli 我们 mysqli_fetch_assoc

# c# - 将xml与数据库中的数据进行比较

> ID：15865852
> 
> 赞同：0
> 
> 时间：2013-04-07T18:03:46.267
> 
> 标签：c#, xml, database, compare

我需要有关如何将 xml 文件与数据库中存储的数据进行比较的建议。我有以下代码...

```
命名空间 NacitanieXML
{
    公共部分类Form1：表格
    {
        公共表格1（）
        {
            初始化组件（）；
        }

 `List<string[]> konecneHodnoty = new List<string[]>();

    private void button1_Click(object sender, EventArgs e)
    {
        XmlNodeType type;
        string[] pieces;
        string[] riadky;

        using(XmlTextReader reader = new XmlTextReader("gps.kml"))
        {
            foreach (string[] pom in konecneHodnoty)
            {
                string prvaHodnota = pom[0];
            }
            while (reader.Read())
            {
                type = reader.NodeType;
                if (type == XmlNodeType.Element)
                {
                    if (reader.Name == "coordinates")
                    {
                        reader.Read();
                        string pozicie = reader.Value;
                        riadky = pozicie.Split(new string[] { "\r\n" }, StringSplitOptions.None);

                        foreach (string riadok in riadky)
                        {
                            if (riadok != String.Empty)
                            {
                                pieces = riadok.Split(new string[] { "," }, StringSplitOptions.None);
                                konecneHodnoty.Add(pieces);
                            }
                        }
                    }
                }
            }
            reader.Close();
            }

        }
}` 

}

XML 文档的每一行现在都有三个部分，我需要比较数据库中数据的第一个和第二个值。

我在数据库中有一个表 - Tab_Position - 以及她的列 lat 和 lon。我想我需要一个循环来导航数据库数据，或者以某种方式通过选择？

MessageBox 对身份数据开放。

谢谢 ：）

```

# io - NFS 挂载共享读/写太慢

> ID：15865856
> 
> 赞同：2
> 
> 时间：2013-04-07T18:04:01.257
> 
> 标签：io, debian, nfs

我有几个 NFS 共享作为源文件夹和几个作为目标文件夹。文件取自源，并在目的地进行了一些更改。进行更改本身需要很短的时间，但是从/到 NFS 共享的读/写操作需要很长时间，例如，大约 6 分钟传输 10MB。任何想法如何加快这个过程？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-26T01:22:42.320

在客户端调整 NFS 挂载选项可能会显着提高性能。
我发现默认值太大了，减少它们的值会有所帮助`rsize`。`wsize`然而，测试将是为您的环境确定最佳值`rsize`的最佳方式。`wsize`目前我正在使用千兆网络，`rsie=262144,wsize=262144`但这可能不适合您。也`noatime,nodiratime`可能有点帮助。

# heroku - Heroku twitter bootstrap 和 sass 编译在生产中失败

> ID：15865858
> 
> 赞同：2
> 
> 时间：2013-04-07T18:04:06.443
> 
> 标签：heroku, ruby-on-rails-3.2, sass, compass-sass

我运行 Rails 3.2 应用程序

我想让“twitter-bootstrap”只对后端用户可用。

在这个特定的后端布局中，我称之为后端样式表：

```
 <%= stylesheet_link_tag "backends" %> 
```

我的资产结构如下所示：

```
stylesheets
   application.css.scss
   backends.css.scss
   partials
      _colors.css.scss 
```

应用程序.css.scss

```
@import "compass/reset";
@import "compass/layout";
@import "compass/css3";
@import "compass/utilities";

// Font Settings

@import "partials/fonts";
@import "partials/colors";
@import "partials/pagination"; 
```

后端.css.scss

```
@import "bootstrap";
@import "partials/_colors.css.scss";

#fullscreen-green {
  background: $green;
  height: 100%;
  margin: 0;
} 
```

我的 GEMFILE 资产包含以下内容：

```
group :assets do
  gem 'therubyracer', :platform => :ruby
  gem 'coffee-rails'
  gem 'sass-rails'
  gem "compass-rails"
  gem 'bootstrap-sass'
  gem 'uglifier'
end 
```

一切都在 localhost 的开发中完美运行。但是当我推送到 heroku cedar 堆栈并调用后端（生产）时，应用程序崩溃了：

```
2013-04-07T17:56:26+00:00 app[web.1]: ActionView::Template::Error (File to import not found or unreadable: bootstrap.
2013-04-07T17:56:26+00:00 app[web.1]: Load path: /app
2013-04-07T17:56:26+00:00 app[web.1]:   (in /app/app/assets/stylesheets/backends.css.scss)):
2013-04-07T17:56:26+00:00 app[web.1]:     4:
2013-04-07T17:56:26+00:00 app[web.1]:     5: <head>
2013-04-07T17:56:26+00:00 app[web.1]:     6:   <title><%= content_for?(:title) ? yield(:title) : "title" %></title>
2013-04-07T17:56:26+00:00 app[web.1]:     7:   <%= stylesheet_link_tag "backends" %>
2013-04-07T17:56:26+00:00 app[web.1]:     8:   <%= stylesheet_link_tag "application" %>
2013-04-07T17:56:26+00:00 app[web.1]:     9:   <%= csrf_meta_tag %>
2013-04-07T17:56:26+00:00 app[web.1]:     10:   <%= javascript_include_tag "application" %>
2013-04-07T17:56:26+00:00 app[web.1]:   app/assets/stylesheets/backends.css.scss:2
2013-04-07T17:56:26+00:00 app[web.1]:   app/views/layouts/backend.html.erb:7:in `_app_views_layouts_backend_html_erb__3568065575647724370_33921820'
2013-04-07T17:56:26+00:00 app[web.1]:   app/controllers/dashboards_controller.rb:8:in `index' 
```

配置/生产.rb

```
config.assets.compile = true
config.assets.compress = true
config.assets.precompile += Ckeditor.assets 
```

请记住，我只想在特定布局中使用引导程序，而不是在应用程序范围内。

heroku也*运行 rake assets:precompile*

有人可以帮我吗！？从整个星期天开始尝试解决这个 *$/%&§

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T11:08:32.083

我通过在资产块之外放置三个宝石解决了这个问题：

```
group :assets do
  gem 'therubyracer', :platform => :ruby
  gem 'coffee-rails'
  gem 'uglifier'
end

gem 'sass-rails'
gem "compass-rails"
gem 'bootstrap-sass' 
```

# android - 尝试在复合布局中对齐 RadioGroups 中的单选按钮

> ID：15865865
> 
> 赞同：3
> 
> 时间：2013-04-07T18:04:39.760
> 
> 标签：android, android-layout

我有这个布局片段。为什么两个无线电组不对齐？我已经尝试过在`RadioGroup`.

我假设它`marginLeft`是从单选按钮本身的左边缘测量的，并且`marginRight`是从最长的单选按钮标题的右侧测量的。文件在这方面并不清楚。

请注意，我已经删除了所有与布局无关的行（例如文本）。所有文本大小均为`15sp`.

```
 <RelativeLayout
            android:orientation="horizontal"
            android:layout_width="match_parent"
            android:layout_height="wrap_content">

        <ImageView
                android:id="@+id/lengthImage"
                android:layout_centerVertical="true"
                android:paddingLeft="10dp"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"/>

        <TextView
                android:text="@string/length"
                android:layout_centerVertical="true"
                android:layout_toRightOf="@id/lengthImage"
                android:paddingLeft="15dp"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"/>

        <RadioGroup
                android:orientation="vertical"
                android:layout_alignParentRight="true"
                android:layout_centerVertical="true"
                android:layout_marginLeft="200dp"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content">

            <RadioButton
                    android:id="@+id/lengthMetres"
                    android:paddingRight="20dp"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"/>

            <RadioButton
                    android:id="@+id/lengthFeet"
                    android:paddingRight="20dp"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"/>
        </RadioGroup>

    </RelativeLayout>

    <RelativeLayout
            android:orientation="horizontal"
            android:layout_width="match_parent"
            android:layout_height="wrap_content">

        <ImageView android:id="@+id/distanceImage"
                android:layout_centerVertical="true"
                android:paddingLeft="10dp"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"/>

        <TextView
                android:text="@string/distance"
                android:layout_centerVertical="true"
                android:layout_toRightOf="@id/distanceImage"
                android:paddingLeft="15dp"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"/>

        <RadioGroup
                android:orientation="vertical"
                android:layout_marginLeft="200dp"
                android:layout_alignParentRight="true"
                android:layout_centerVertical="true"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content">

            <RadioButton
                    android:id="@+id/distanceMile"
                    android:paddingRight="20dp"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"/>

            <RadioButton
                    android:id="@+id/distanceKM"
                    android:paddingRight="20dp"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"/>

            <RadioButton
                    android:id="@+id/distanceNM"
                    android:paddingRight="20dp"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"/>

        </RadioGroup>

    </RelativeLayout> 
```

![在此处输入图像描述](https://i.stack.imgur.com/zgQi7.png)

[编辑]

解决方案。

将 RadioGroup 宽度硬编码为 100dp 效果很好。我讨厌这样做。我敢打赌，分辨率、密度和方向的组合会打破这一点！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-07T21:46:35.773

您可以完全构建您的布局，而无需对`100dp`.

通过使用`android:layout_alignLeft`，您可以解决您`android:layout_alignBottom`的`android:layout_alignTop`问题`RadioGroups`。

但是，您将不得不稍微更改 XML，因为它只有在两者`RadioGroups`都在同一个`RelativeLayout`.

这是您的所有调整代码：

```
<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <RadioGroup
        android:id="@+id/radio_group_1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_marginLeft="200dp"
        android:orientation="vertical" >

        <RadioButton
            android:id="@+id/lengthMetres"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:paddingRight="20dp"
            android:text="metres" />

        <RadioButton
            android:id="@+id/lengthFeet"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:paddingRight="20dp"
            android:text="feet" />
    </RadioGroup>

    <ImageView
        android:id="@+id/lengthImage"
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:layout_alignBottom="@id/radio_group_1"
        android:layout_alignTop="@id/radio_group_1"
        android:layout_centerVertical="true"
        android:paddingLeft="10dp"
        android:src="@drawable/ic_launcher" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@id/radio_group_1"
        android:layout_alignTop="@id/radio_group_1"
        android:layout_centerVertical="true"
        android:layout_toRightOf="@id/lengthImage"
        android:gravity="center"
        android:paddingLeft="15dp"
        android:text="@string/length" />

    <RadioGroup
        android:id="@+id/radio_group_2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@id/radio_group_1"
        android:layout_below="@id/radio_group_1"
        android:orientation="vertical" >

        <RadioButton
            android:id="@+id/distanceMile"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:paddingRight="20dp"
            android:text="mile" />

        <RadioButton
            android:id="@+id/distanceKM"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:paddingRight="20dp"
            android:text="km" />

        <RadioButton
            android:id="@+id/distanceNM"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:paddingRight="20dp"
            android:text="NM" />
    </RadioGroup>

    <ImageView
        android:id="@+id/lengthImage"
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:layout_alignBottom="@id/radio_group_2"
        android:layout_alignTop="@id/radio_group_2"
        android:layout_centerVertical="true"
        android:paddingLeft="10dp"
        android:src="@drawable/ic_launcher" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@id/radio_group_2"
        android:layout_alignTop="@id/radio_group_2"
        android:layout_centerVertical="true"
        android:layout_toRightOf="@id/lengthImage"
        android:gravity="center"
        android:paddingLeft="15dp"
        android:text="@string/length" />
</RelativeLayout> 
```

这就是它的外观：

![对齐的无线电组](https://i.stack.imgur.com/KIZrF.png)

我认为，这个解决方案在你的具体情况下是适用的，但是对于某种通用的解决方案，当你有两个以上的 RadioGroup 时，这个解决方案必须得到改进。

希望这种方法对您有用:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T19:14:34.667

看起来您应该为 RadioGroups 使用`android:layout_width="match_parent"`and `android:layout_marginLeft="200dp"`（不是 android:marginLeft）。

```
<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/lengthImage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:paddingLeft="10dp" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_toRightOf="@id/lengthImage"
        android:paddingLeft="15dp"
        android:text="length" />

    <RadioGroup
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:layout_marginLeft="200dp"
        android:orientation="vertical" >

        <RadioButton
            android:id="@+id/lengthMetres"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:paddingRight="20dp"
            android:text="meters" />

        <RadioButton
            android:id="@+id/lengthFeet"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:paddingRight="20dp"
            android:text="feets" />
    </RadioGroup>
</RelativeLayout>

<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/distanceImage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:paddingLeft="10dp" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_toRightOf="@id/distanceImage"
        android:paddingLeft="15dp"
        android:text="distance" />

    <RadioGroup
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:layout_marginLeft="200dp"
        android:orientation="vertical" >

        <RadioButton
            android:id="@+id/distanceMile"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="left"
            android:paddingRight="20dp"
            android:text="foo" />

        <RadioButton
            android:id="@+id/distanceKM"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:paddingRight="20dp"
            android:text="boo" />

        <RadioButton
            android:id="@+id/distanceNM"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:paddingRight="20dp"
            android:text="moo" />
    </RadioGroup>
</RelativeLayout> 
```

# objective-c - 如何使用 ARC 正确初始化目标 c 中的对象

> ID：15865870
> 
> 赞同：1
> 
> 时间：2013-04-07T18:05:02.810
> 
> 标签：objective-c, constructor, initialization, automatic-ref-counting

对于许多类，有 initXXX 方法和 typeXXX 方法，例如：

```
NSNumber *n1 = [[NSNumber alloc] initWithInt:1];
NSNumber *n2 = [NSNumber numberWithInt:1]; 
```

我已经阅读了有关手动内存管理的内容，并且我认为我了解这些行与手动内存管理有何不同（第二个只是自动释放对象的快捷方式）。

但是对于 ARC，我不明白我应该使用哪个 API？我是否应该只使用 alloc-init 模式，因为 ARC 足够聪明，可以在必要时自动释放 value，并在 value 仅在本地使用时避免自动释放开销？或者，即使我使用 numberWithInt 之类的东西，ARC 也可以优化自动释放和相应的开销？

我想在可用时使用第二种变体，因为它更短且更易于阅读。但我不想仅仅因为这个原因而引入性能开销。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T18:07:23.317

> 或者，即使我使用 numberWithInt 之类的东西，ARC 也可以优化自动释放和相应的开销？

即使使用这些便利工厂（它们被称为）方法，它也可以。[这里](http://www.galloway.me.uk/2012/02/how-does-objc_retainautoreleasedreturnvalue-work/)都解释得很好。

所以你可以使用任何一个。

# java - 默认命名空间和复杂的包/数据结构

> ID：15865876
> 
> 赞同：3
> 
> 时间：2013-04-07T18:05:28.373
> 
> 标签：java, inheritance, jaxb, marshalling, xml-namespaces

我需要使用默认命名空间创建/读取 xml 文件：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<xmlBoo xmlns="http://www.example2.org/boo">
    <customer>
        <address>
            <street>Wall Street</street>
        </address>
        <id>1</id>
        <name>John</name>
    </customer>
    <someSpecificField>Specific data in Boo</ns2:someSpecificField>
</xmlBoo> 
```

但我得到：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<ns2:xmlBoo xmlns:ns2="http://www.example2.org/boo">
    <ns2:customer>
        <address>
            <street>Wall Street</street>
        </address>
        <id>1</id>
        <name>John</name>
    </ns2:customer>
    <ns2:someSpecificField>Specific data in Boo</ns2:someSpecificField>
</ns2:xmlBoo> 
```

我知道[包级元数据](http://blog.bdoughan.com/2010/08/jaxb-namespaces.html)，但这不适用于复杂的包结构：

![项目结构](https://i.stack.imgur.com/RkVGa.png)

我已经定义了像地址这样的模型类：

```
package example.model;

public class Address {
    private String street; 
```

顾客：

```
package example.model;

public class Customer {
    private long id;
    private String name;
    private Address address; 
```

公共字段的父类：

```
package example.xml;

@XmlTransient
public class Xml {
    private Customer customer; 
```

然后是包含具体 xml XmlBoo 的数据/结构的特定类：

```
package example.xml.boo;

@XmlRootElement
public class XmlBoo extends Xml {
    private String someSpecificField; 
```

XmlFoo:

```
package example.xml.foo;

@XmlRootElement
public class XmlFoo extends Xml {} 
```

package-info.java 包含在两个提到的包 example.xml.boo 中：

```
@XmlSchema(
        namespace = "http://www.example2.org/boo",
        elementFormDefault = XmlNsForm.QUALIFIED)
package example.xml.boo; 
```

和 example.xml.foo：

```
@XmlSchema(
    namespace = "http://www.example2.org/foo",
    elementFormDefault = XmlNsForm.QUALIFIED)

package example.xml.foo; 
```

最后是主要方法：

```
package example;

public class Demo {

    public static void main(String... args) {
        generateBoo();
        generateFoo();
    }

    public static void generateBoo() {
        try {
            JAXBContext jc = JAXBContext.newInstance(XmlBoo.class);
            Marshaller m = jc.createMarshaller();
            m.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);

            XmlBoo xmlBoo = new XmlBoo();

            Customer customer = new Customer();
            customer.setId(1);
            customer.setName("John");
            Address address = new Address();
            address.setStreet("Wall Street");
            customer.setAddress(address);
            xmlBoo.setCustomer(customer);
            xmlBoo.setSomeSpecificField("Specific data in Boo");

            m.marshal(xmlBoo, System.out);

        } catch (JAXBException e) {
            e.printStackTrace();
        }
    }

    public static void generateFoo() {
        try {
            JAXBContext jc = JAXBContext.newInstance(XmlFoo.class);
            Marshaller m = jc.createMarshaller();
            m.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);

            XmlFoo xmlFoo = new XmlFoo();
            Customer customer = new Customer();
            customer.setId(1);
            customer.setName("John");
            Address address = new Address();
            address.setStreet("Wall Street");
            customer.setAddress(address);
            xmlFoo.setCustomer(customer);

            m.marshal(xmlFoo, System.out);

        } catch (JAXBException e) {
            e.printStackTrace();
        }
    }
} 
```

我已经尝试过像[这里](https://stackoverflow.com/questions/14601877/using-jdks-jaxb-without-ns2-prefix?rq=1)这样的两种解决方案，但也没有成功。

*   如果我在一个包中包含所有类（和一个包信息文件），则可以删除和重命名前缀
*   如果我有复杂的包结构，可以重命名但不能删除前缀

有没有解决方案如何删除 ns2 前缀？我正在使用JDK7。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T22:04:39.447

解决方案如何获取（写入和读取 xml）所需的结果：

```
<?xml version="1.0" encoding="UTF-8"?>
<xmlBoo xmlns="http://www.example.org/boo" xmlns:c="http://www.example.org/customer" xmlns:a="http://www.example.org/address" xmlns:h="http://www.example.org/header">
   <h:header>
      <h:id>101</h:id>
   </h:header>
   <c:customer>
      <c:id>1</c:id>
      <c:name>Yen</c:name>
      <a:address>
         <a:street>Long street</a:street>
      </a:address>
   </c:customer>
   <someBooSpecificField>Specific data in Boo</someBooSpecificField>
</xmlBoo> 
```

*   对于根元素及其“简单”子元素，使用默认命名空间（不带前缀）
*   对于复杂的（Java 中的对象），子级使用不同的命名空间（映射到不同的前缀）
*   模型类在不同的包中

所以这里是解决方案：

![在此处输入图像描述](https://i.stack.imgur.com/v3sRb.png)

定义JAXB的MOXy实现，文件：jaxb.properties

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

为公共字段创建抽象类，为对象定义命名空间，文件 Xml.java

```
package example.xml;

@XmlTransient
public abstract class Xml {

    private Header header;
    private Customer customer;

    @XmlElement(namespace="http://www.example.org/header")
    public Header getHeader() {
        return header;
    }

    public void setHeader(Header header) {
        this.header = header;
    }

    @XmlElement(namespace="http://www.example.org/customer")
    public Customer getCustomer() {
        return customer;
    }

    public void setCustomer(Customer customer) {
        this.customer = customer;
    }
} 
```

创建“根”类，XmlBoo.java

```
package example.xml.boo;

@XmlRootElement
@XmlType(propOrder = {"header", "customer", "someBooSpecificField"})
public class XmlBoo extends Xml {

    private String someBooSpecificField;

    // getter & setter
} 
```

为“根”类设置命名空间和 QUALIFIED，文件：example.xml.boo.package-info.java

```
@XmlSchema(
        namespace = "http://www.example.org/boo",
        elementFormDefault = XmlNsForm.QUALIFIED)

package example.xml.boo; 
```

设置 QUALIFIED 为子级生成前缀（**命名空间将被类上定义的命名空间覆盖，但必须定义**），文件：example.model.package-info.java

```
@XmlSchema(
        namespace = "http://www.example.org",
        elementFormDefault = XmlNsForm.QUALIFIED)

package example.model; 
```

创建 Header.java

```
package example.model;

@XmlType(namespace = "http://www.example.org/header")
public class Header {

    private long id;

    // getter & setter
} 
```

创建客户.java

```
package example.model;

@XmlType(namespace = "http://www.example.org/customer", propOrder = {"id", "name", "address"})
public class Customer {

    private long id;
    private String name;
    private Address address;

    public long getId() {
        return id;
    }

    public void setId(long id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    @XmlElement(namespace="http://www.example.org/address")
    public Address getAddress() {
        return address;
    }

    public void setAddress(Address address) {
        this.address = address;
    }
} 
```

创建地址.java

```
package example.model;

@XmlType(namespace = "http://www.example.org/address")
public class Address {

    private String street;

    // getter & setter
} 
```

通过扩展 org.eclipse.persistence.oxm.NamespacePrefixMapper 创建 MyNamespacePrefixMapper.java

```
package example;
import org.eclipse.persistence.oxm.NamespacePrefixMapper;

public class MyNamespacePrefixMapper extends NamespacePrefixMapper {

    private static final String BOO_PREFIX = ""; // DEFAULT NAMESPACE
    private static final String BOO_URI = "http://www.example.org/boo";
    private static final String FOO_PREFIX = ""; // DEFAULT NAMESPACE
    private static final String FOO_URI = "http://www.example.org/foo";
    private static final String HEADER_PREFIX = "h";
    private static final String HEADER_URI = "http://www.example.org/header";
    private static final String CUSTOMER_PREFIX = "c";
    private static final String CUSTOMER_URI = "http://www.example.org/customer";
    private static final String ADDRESS_PREFIX = "a";
    private static final String ADDRESS_URI = "http://www.example.org/address";

    @Override
    public String getPreferredPrefix(String namespaceUri, String suggestion, boolean requirePrefix) {

        switch (namespaceUri) {
            case BOO_URI:
                return BOO_PREFIX;
            case FOO_URI:
                return FOO_PREFIX;
            case HEADER_URI:
                return HEADER_PREFIX;
            case CUSTOMER_URI:
                return CUSTOMER_PREFIX;
            case ADDRESS_URI:
                return ADDRESS_PREFIX;
            default:
                return null;
        }
    }
} 
```

创建 XML

```
public static void generateBoo() {
    try {
        JAXBContext jc = JAXBContext.newInstance(XmlBoo.class);
        Marshaller m = jc.createMarshaller();
        m.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        m.setProperty(MarshallerProperties.NAMESPACE_PREFIX_MAPPER, new MyNamespacePrefixMapper());

        XmlBoo xmlBoo = new XmlBoo();
        Header header = new Header();
        header.setId(101);
        xmlBoo.setHeader(header);

        Customer customer = new Customer();
        customer.setId(1);
        customer.setName("Yen");
        Address address = new Address();
        address.setStreet("Long street");
        customer.setAddress(address);
        xmlBoo.setCustomer(customer);

        xmlBoo.setSomeBooSpecificField("Specific data in Boo");

        m.marshal(xmlBoo, System.out);
        m.marshal(xmlBoo, new File("xml_boo.xml"));

    } catch (JAXBException e) {
        e.printStackTrace();
    }
} 
```

读取 XML

```
public static void readBoo() {

    Object element = null;

    try {
        JAXBContext jc = JAXBContext.newInstance(XmlBoo.class);
        Unmarshaller u = jc.createUnmarshaller();
        element = u.unmarshal(new File("xml_boo.xml"));

    } catch (JAXBException e) {
        e.printStackTrace();
    }

    if (element instanceof XmlBoo) {
        XmlBoo xmlBoo = (XmlBoo) element;
        Customer customer = xmlBoo.getCustomer();

        System.out.println("INFO | xmlBoo field:  [" + xmlBoo.getSomeBooSpecificField() + "]");
        System.out.println("INFO | customer name: [" + customer.getName() + "]");
        System.out.println("INFO | address street: [" + customer.getAddress().getStreet() + "]");

    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T16:56:46.717

我使用 EclipseLink MOXy JAXB 实现而不是 RI Metro JAXB，现在它可以工作了。所以它看起来在 Metro 是错误的。

Blaise Doughan 的完美教程：[JAXB 和命名空间前缀](http://blog.bdoughan.com/2011/11/jaxb-and-namespace-prefixes.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T19:21:49.943

您需要为域模型中的每个包`package-info`提供一个`@XmlSchema`注释，每个包都指定相同的命名空间限定，以获得所需的 XML。

# django - 基于 ManyToManyField 的 Django 查询

> ID：15865881
> 
> 赞同：0
> 
> 时间：2013-04-07T18:05:46.213
> 
> 标签：django, django-models, django-queryset

我是 Python 和 Django 的新手。

我正在尝试构建自己非常简单的博客应用程序。
所以我有这两个模型：

```
class Tag(models.Model):
    name = models.CharField(max_length=250)
    slug = models.SlugField(unique=True)

    def __unicode__(self):
        return self.name

class Blogpost(models.Model):
    title = models.CharField(max_length=300)
    content = tinymce_models.HTMLField()
    date_created = models.DateTimeField(auto_now_add=True)
    date_updated = models.DateTimeField(auto_now=True)
    tags = models.ManyToManyField(Tag)

    def __unicode__(self):
        return self.title 
```

如您所见，博客帖子可以包含许多标签，
我的问题是如何查询`Blogpost.objects.all()`以通过特定标签获取博客帖子列表？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T18:16:17.253

我认为[相关经理](https://docs.djangoproject.com/en/1.2/ref/models/relations/#django.db.models.fields.related.RelatedManager)是你的答案

```
t = Tag.objects.get(name="Some tag")
t.blogpost_set.all() 
```

# windows - 为什么在 git bash 中创建的文件在 Windows 资源管理器中不可见？

> ID：15865883
> 
> 赞同：9
> 
> 时间：2013-04-07T18:05:52.907
> 
> 标签：windows, git, git-bash

所以我刚刚从 Ubuntu 迁移到 Windows（由于兼容性问题，读取被迫迁移）并且正在使用 Git Bash 来拉入我的文件。我注意到一些非常奇怪的事情。

Git Bash 安装在 中`C:\Program Files (x86)\Git\`，当我第一次运行 Git Bash 程序时，默认位置是这个。正常吧？对。

但这是奇怪的部分..

当我`mkdir srv`在 Git Bash 命令行中运行命令时，我可以在 Bash 窗口中看到它——但我在 Windows 资源管理器中看不到它？**！**有没有搞错。`vi`使用CLI创建的文件也会发生同样的情况。在 Windows 资源管理器中不可见。（是的，我`Show hidden files`在资源管理器中启用了该选项，所以不是这样）。

这里有一些快照（不，我不是盲人——我也不是疯子）。帮助？ ![现在你看到了](https://i.stack.imgur.com/gZPrX.png) ![现在你不](https://i.stack.imgur.com/ngpqT.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T18:45:21.583

由于缺少权限，您可能无法看到该文件夹​​。尝试以管理员身份运行您的资源管理器并再次查看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-22T21:44:39.427

上面提出的解决方案对我没有帮助。但是，我通过`git bash`. 然后我再次通过 Windows 资源管理器将它们复制到原始位置。现在它们已经变得可见了。我之前通过with命令创建了那些**不可见的文件夹。**`git bash``git clone`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-18T05:41:25.477

我有类似的问题，但文件属性，而不是缺少权限。在cmd下 `C:\Program Files (x86)\Git\`运行命令 [attrib](https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/attrib)

> 属性 *

您将知道`srv`文件夹是否具有系统或隐藏文件属性。

如果您想在 cmd 中查看它，请使用`dir /a:s`

# python - 在西雅图测试床中读取文件

> ID：15865887
> 
> 赞同：0
> 
> 时间：2013-04-07T18:06:04.720
> 
> 标签：python, file

嗨，我一直在尝试在**西雅图测试床中读取文件时遇到这个问题。**该代码在正常的命令提示符下看起来不错，但是当我在西雅图远程运行相同的代码时，它给了我一个找不到文件的错误：

```
 try:
     #myip=getmyip()
     myfileobject = open("output.txt","r")
     myfile=myfileobject.read()
     print myfile
   except IOError:
     print "not found" 
```

不要担心缩进很好。只是西雅图异常中的错误（类型为'exceptions.IOError'）：[Errno 2]没有这样的文件或目录：'output.txt'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T22:13:04.447

无论如何我得到了解决方案，我忘记将文件上传到我在西雅图的节点。因此必须先上传文件然后运行命令。

# amazon-web-services - 确定性地创建和标记 EC2 实例

> ID：15865894
> 
> 赞同：3
> 
> 时间：2013-04-07T18:06:38.377
> 
> 标签：amazon-web-services, amazon-ec2

我正在创建 3 个 EC2 实例，然后对每个实例进行迭代和标记。有时标签请求会失败，尽管实例稍后似乎正在运行。

这可能是时间问题吗？我应该在创建实例后等待几秒钟再标记它吗？是否有确定的方法来等待它开始？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-08T08:23:53.370

## 更新 20140512

[AWS 同时添加了关于Troubleshooting API Request Errors](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/query-api-troubleshooting.html)的更详细的文档，包括解决[最终一致性](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/query-api-troubleshooting.html#eventual-consistency)的部分，这基本上证实了我在下面的初始答案中的分析：

> 由于支持 API 的系统的分布式特性，Amazon EC2 API 遵循最终一致性模型。**这意味着您运行的影响 Amazon EC2 资源的 API 命令的结果可能不会立即对您运行的所有后续命令可见**。[...]
> 
> [...] 例如，[...]**如果您运行命令来修改或描述您刚刚创建的资源，它的 ID 可能没有在整个系统中传播，并且您将收到一个错误响应资源确实不存在**。
> 
> 要管理最终一致性，您可以执行以下操作：
> 
> *   在运行命令修改资源之前确认资源的状态。**使用指数退避算法运行适当的 Describe 命令，**以确保您有足够的时间让前一个命令在系统中传播。[...]
>     
>     
> *   **在后续命令之间添加等待时间，即使 Describe 命令返回准确的响应**。从几秒钟的等待时间开始应用指数退避算法，然后逐渐增加到大约五分钟的等待时间。
>     
>     
> 
> *[强调我的]*

**请注意**：大多数[AWS 开发工具包](https://aws.amazon.com/tools/)同时自动应用这些建议，包括调整默认重试策略或添加自定义实施的选项 - 如果需要，请参阅[AWS 中的错误重试和指数退避以](http://docs.aws.amazon.com/general/latest/gr/api-retries.html)获取有关如何自行实施的指导。

* * *

## 更新 20130719

AWS API 的最终一致性设计越来越多地被各种大规模 AWS 用户所遇到，他们自然需要深入研究并相应地解决它，例如，请参阅以下文章：

*   [处理 AWS EC2 API 中的最终一致性](http://blog.cloudfoundry.com/2013/06/18/dealing-with-eventual-consistency-in-the-aws-ec2-api/)（Martin Englund，Cloud Foundry）
*   [处理不一致的 EC2 API](http://blog.picloud.com/2013/02/17/dealing-with-the-inconsistent-ec2-api/)（作者：Aaron Staley，PiCloud）

* * *

## 初步答案

正如@datasage 已经[评论](https://stackoverflow.com/questions/15865894/deterministically-creating-and-tagging-ec2-instances#comment22583637_15865894)的那样，AWS API 显然只需要被视为[最终一致](http://en.wikipedia.org/wiki/Eventual_consistency)的——这在第一次遇到时肯定是出乎意料的，但对于事后看来的大规模服务（即工程响应）来说实际上并不太令人惊讶。操作权衡来解决[CAP 定理](http://en.wikipedia.org/wiki/CAP_theorem)。

另请参阅我对 Alex Ciminian 的问题[Implementing idempotency for AWS Spot Instance Requests](https://stackoverflow.com/questions/14734882/implementing-idempotency-for-aws-spot-instance-requests#comment20644231_14734882)的评论，其中他讨论了他关于类似一致性问题的测试结果：

> 有趣的问题 - [...] 我在[Bamboo AWS 插件](https://plugins.atlassian.com/plugin/details/774227)的上下文中遇到了各种类似的 API 延迟，并得出结论认为 AWS API 需要被视为[最终完全一致](http://en.wikipedia.org/wiki/Eventual_consistency)；例如，我什至遇到过从 create 调用收到资源 id 的情况，可以根据其 id 标记资源，但此后仍不对其进行描述，因为它应该不存在（尚不存在）。

*   我在这里所描述的似乎表明，实际上每个 API 操作都是由 AWS 完全独立操作的（不仅跨外部可见的服务，甚至在像 EC2 这样的单个服务中），因此可能会受到最终一致性的影响，并且必须得到相应的对待。

有关上述案例的详细信息，您可能需要查看[AWS API 的频繁轮询导致限制限制](https://bitbucket.org/utoolity/bamboo-aws-plugin/issue/2/frequent-polling-of-aws-api-causes)，我在其中总结了我们的分析和方法，以通过适用[于 Java 的 AWS 开发工具包中](http://aws.amazon.com/sdkforjava/)可用但有限的重试/退避功能改进处理- 解决方案几乎是理想的，但它似乎暂时大大改善了事情。

同样，[针对 PHP 2 重新设计的 AWS 开发工具包](http://aws.amazon.com/sdkforphp/)引入了专用的*“Waiter”对象，允许您轮询资源，直到它处于*解决问题所需的状态，有关详细信息，请参阅[快速入门](http://docs.aws.amazon.com/aws-sdk-php-2/guide/latest/quick-start.html#waiters)中的*Waiters*部分：

> SDK 提供的高级抽象之一是“服务员”的概念。服务员通过轮询资源提供了一种简单的方法来等待资源进入特定状态，从而帮助更轻松地使用最终一致的系统。[...] 任何以“waitUntil”开头的@method 标签都会使用一个服务员。
> 
> ```
> $client->waitUntil('BucketExists', array('Bucket' => 'my-bucket')); 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T19:14:09.573

在启动实例之前无法创建标签名称。您可以尝试在创建实例时提供 key_name。如果您使用的是 boto，则可以通过

```
reservation = conn.run_instances(1, 1, instance_type='m1.small', key_name='samplename') 
```

然后可以通过传递 key_name 来检索实例，一旦它们处于运行状态，您还可以为它们提供标签名称。

# maven - 在泽西岛从 1.9 升级到 Jackson 2.0 不起作用

> ID：15865896
> 
> 赞同：7
> 
> 时间：2013-04-07T18:07:09.463
> 
> 标签：maven, jersey, jackson, upgrade

我正在使用 Jackson（在泽西岛）来序列化实体，并且我正在从 Jackson 1.9 迁移到 2.0。我按照[本指南](http://www.cowtowncoder.com/blog/archives/2012/04/entry_469.html)进行操作，起初似乎一切都很顺利。

但仔细观察会发现 Jackson 1.9 仍在用于序列化我的回复，因此忽略了我的（迁移的）Jackson 2.0 注释。您可以在以下代码片段中看到我使用了哪些注释：

```
@JsonInclude(JsonInclude.Include.NON_EMPTY)
public abstract class IdEntity {

@Id
@JsonDeserialize(using = ObjectIdJsonDeserializer.class)
protected ObjectId id;

@JsonInclude(JsonInclude.Include.NON_NULL)
@JsonSerialize(using = ObjectIdJsonSerializer.class)
public ObjectId getId() {
    return id;
}

public void setId(ObjectId id) {
    this.id = id;
}

@JsonIgnore
public String getIdAsString() {
    return id == null ? "" : id.toString();
} 
```

我的@JsonIgnore getter 正在序列化，而我的 ObjectIdJsonSerializer 没有用于 ObjectId 字段。

在调试中，我可以看到正在使用的 ObjectMapper 来自 1.9。

我已经删除了对 Jackson 1.9 的所有直接 maven 依赖项，并尝试向 jersey-json 添加排除项，以防止它引入 Jackson 1.9。但是我不能完全摆脱它（通过在我的依赖管理中排除所有 codehaus.jackson 的东西），因为我也在使用 Spring AMQP，它需要 Jackson 1.9。

关于如何管理这个的任何想法？有没有人遇到/解决过类似的问题？如何强制 Jersey 使用 Jackson 2.0？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T12:15:43.087

我正在根据 StaxMan 和 pgelinas 的（有用的）答案回答我自己的问题。

我必须做两件事才能让它发挥作用。

首先是从我的 web.xml中删除**com.sun.jersey.api.json.POJOMappingFeature 。**

第二个是将我的**jackson-jaxrs-json-provider**（实际上是我所有的 Jackson 工件）更新为**2.1**。

对于 2.1 或 2.0 以及 POJOMappingFeature，Jackson 1.9 仍用于序列化。

使用 2.0 并删除 POJOMappingFeature 后，我收到了缺少消息正文编写器的错误。

删除 2.1 和 POJOMappingFeature 后，一切都按预期工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-10T21:27:19.133

仅仅升级 Jackson core 和 mapper 版本是不够的；Jersey（或任何 JAX-RS 实现）和 Jackson 之间的集成使用特定的 JAX-RS 提供程序进行。对于杰克逊，这将是[https://github.com/FasterXML/jackson-jaxrs-json-provider](https://github.com/FasterXML/jackson-jaxrs-json-provider)。

因此，您还需要添加 2.x Jackson JAX-RS JSON 提供程序，这将使 Jersey 使用 Jackson 2.x 进行操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-08T14:01:54.380

如果您的类路径中没有两个版本的 Jackson，我会仔细检查。Jackson 2.x 中的软件包名称已更改为`com.fasterxml`from `org.codehaus`。这样您就没有一些神秘的类路径问题（例如 a `NoClassDefFound`），但是如果您不使用正确的包，这就是您将看到的那种行为。

此外，注释被提取到他们自己的项目[jackson-annotations](https://github.com/FasterXML/jackson-annotations)中。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-08-29T00:40:41.527

即使您升级到杰克逊 2，您也会在使用旧杰克逊时出现 NoClassfound 错误。

在此链接上检查 spring 实现：http: [//git.springsource.org/sandbox/cbeams/blobs/4731d671cbeb82b87dd0f10e16cd09d8f267b433/org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/view/json /MappingJacksonJsonView.java](http://git.springsource.org/sandbox/cbeams/blobs/4731d671cbeb82b87dd0f10e16cd09d8f267b433/org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/view/json/MappingJacksonJsonView.java)

# php - 我如何在 PHP 中每周随机切换一些东西？

> ID：15865898
> 
> 赞同：1
> 
> 时间：2013-04-07T18:07:14.520
> 
> 标签：php

我有三个 div，希望它们每周切换一次。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-07T18:09:41.223

如果你看一下 php's [`date()`](http://php.net/manual/en/function.date.php)，你会发现你可以让它返回一年的周数。

```
date('W'); 
```

从那里，使用模运算符 ( `date('W') % 3`) 来确定`div`要显示的内容。如果是0，显示第一个div，如果是1，显示第二个，如果是2，显示第三个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T18:12:44.547

这是完成下面 Julian 所说的代码：

```
 $woy = date('W', time());

switch($woy % 3)
{
    case 0: echo 'div 1';
    case 1: echo 'div 2';
    case 2: echo 'div 3';
} 
```

或类似的东西..

```
$w = ceil(date('d', time())/7);

    if ($w == 1 || $w == 4)
    {
     //echo div 1...
    }
    elseif ($w == 2)
    {
     //echo div 2....
    }
    elseif ($w == 3)
    {
     //echo div 3....
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T18:09:54.670

1）当你把它们关掉时存储并将该日期与当前日期进行比较，如果差异为 7，则更改为不同的 div 以显示

或者

2）选择一天，例如星期一，如果日期是星期一，则将 div 更改为显示

您可能必须存储/选择如何更改 div 的顺序，除非您正在随机化顺序

# c++ - 如何在 Visual Studio 2010 Express Edition 上启用 C++11 编译器？

> ID：15865902
> 
> 赞同：6
> 
> 时间：2013-04-07T18:07:30.927
> 
> 标签：c++, visual-studio-2010, visual-c++, c++11, tbb

我正在使用 tbb::parallel_for 函数，它利用了 lambdas。我收到以下代码的语法错误：

```
void parallel_relax( Class object, std::vector<Vertex *> verList ) {
    tbb::parallel_for (blocked_range<int>(0, verList.size()), [=](const blocked_range<Vertex *>& r) {
        for(Vertex *vit = r.begin(); vit != r.end(); ++vit) {
            Vertex *v = vit;
            object.function(v);
        }
    });
} 
```

语法错误：

```
syntax error : '['
1>main.cpp(16): error C2143: syntax error : missing ')' before '{'
1>main.cpp(16): error C2143: syntax error : missing ';' before '{'
1>main.cpp(17): error C2065: 'r' : undeclared identifier
1>main.cpp(17): error C2228: left of '.begin' must have class/struct/union
1>          type is ''unknown-type''
1>main.cpp(17): error C2065: 'r' : undeclared identifier
1>main.cpp(17): error C2228: left of '.end' must have class/struct/union
1>          type is ''unknown-type''
1>main.cpp(20): error C2059: syntax error : ')'
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

我认为这是编译器的问题。我如何获得 Visual Studio 2010 Express Edition 的 c++11 编译器。请建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T19:03:11.510

Visual C++ 2010 Express 确实包含 C++11 功能，但不是全部。以下是它支持的功能列表（以及 VC++ 2012）：http: [//msdn.microsoft.com/en-ca/library/vstudio/hh567368.aspx](http://msdn.microsoft.com/en-ca/library/vstudio/hh567368.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T18:12:03.473

要获得 C++11 功能，您应该使用最新版本[Visual Studio 2012](http://www.microsoft.com/visualstudio/eng/downloads#d-2012-express)。

来自[C++11 特性（现代 C++）](http://msdn.microsoft.com/en-us/library/vstudio/hh567368.aspx)：

> Visual C++ 2010 在 C++0x 核心语言规范（C++11 的前身）中实现了许多功能，Visual Studio 2012 中的 Visual C++ 在此基础上进行了扩展以包含许多 C++11 功能。

# java - 使用回溯递归算法生成迷宫时出错

> ID：15865904
> 
> 赞同：-1
> 
> 时间：2013-04-07T18:07:42.253
> 
> 标签：java, recursion, generator, backtracking, maze

我正在使用递归回溯算法创建一个迷宫生成器。但是，我的问题是每次运行程序时都会给出以下结果：

```
1 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 1 1
0 0 0 0 0 0 0 1 1 1
0 0 0 0 0 0 1 1 1 1
0 0 0 0 0 1 1 1 1 1
0 0 0 0 1 1 1 1 1 1
0 0 0 1 1 1 1 1 1 1
0 0 1 1 1 1 1 1 1 1
0 1 1 1 1 1 1 1 1 1
0 1 1 1 1 1 1 1 1 1 
```

我的代码的一点背景知识：构造函数用 0 填充迷宫 int 数组，并在结束位置 (0, 0) 处放置一个 1，然后调用 backtrackGenerateMaze() 方法随机生成迷宫。我认为问题可能是我没有墙，这可能会导致奇怪的事情发生。此外，对于方向：0 = 上，1 = 右，2 = 下，& 3 = 左。希望有帮助。

这是我的代码（抱歉这么久，我一直在尝试使用注释来调试它）：

```
public class Maze {

    private int width, length;
    private int[][] maze;

    public Maze(int rows, int columns) {
        width = columns;
        length = rows;

        maze = new int[rows][columns];
        for (int i = 0; i < rows; i++) {
            for (int j = 0; j < columns; j++) {
                maze[i][j] = 0;
            }
        }
        maze[0][0] = 1;

        backtrackGenerateMaze(rows - 1, columns - 1, 1);
    }

    /*
    * THE PROBLEM MUST BE HERE IN THE backtrackGenerateMaze() METHOD
    */
    private void backtrackGenerateMaze(int rows, int columns, int moveLength) {
        if (rows == 0 && columns == 0) {
            System.out.println("rows = " + rows);
            System.out.println("length = " + length);
            System.out.println("columns = " + columns);
            System.out.println("width = " + width);
            return;
        }

        int[] randDirs = generateRandomDirections();

        for (int dir : randDirs) {
            System.out.println("dir == " + dir);
            System.out.println("rows == " + rows);
            System.out.println("columns == " + columns + "\n");
            if (dir == 0) {
                System.out.println("rows - moveLength == " + (rows - moveLength));
                 System.out.println("valid(rows - moveLength, columns) == " + (valid(rows - moveLength, columns)));
                 System.out.println("isInRange(0, length, rows - moveLength, false) == " + (isInRange(0, length, rows - moveLength, false)));

                if (valid(rows - moveLength, columns)
                    && isInRange(0, length, rows - moveLength, false)
                    && maze[rows - moveLength][columns] != 1) {
                    System.out.println("IF 0 is TRUE");
                    for (int i = 1; i <= moveLength; i++) {
                        maze[rows - moveLength][columns] = 1;
                    }
                    maze[rows][columns] = 1;
                    System.out.println("HERE 0");
                    backtrackGenerateMaze(rows - moveLength, columns, moveLength);
                }

                // System.out.println("RETURN DIR 0");
                // return;
            } else if (dir == 1) {
                System.out.println("columns + moveLength = " + (columns + moveLength));
                System.out.println("valid(rows, columns + moveLength) = " + (valid(rows, columns + moveLength)));
                System.out.println();

                if (valid(rows, columns + moveLength)) {
                    System.out.println("VALID 1 is TRUE");
                    if (isInRange(0, width, columns + moveLength, false)) {
                        System.out.println("isInRange() 1 is TRUE");
                        if (maze[rows][columns + moveLength] != 1) {
                            System.out.println("square != 1 is TRUE");
                            System.out.println("IF 1 is TRUE");
                            for (int i = 1; i <= moveLength; i++) {
                                maze[rows][columns + moveLength] = 1;
                            }
                            maze[rows][columns] = 1;
                            System.out.println("HERE 1");
                            backtrackGenerateMaze(rows, columns + moveLength, moveLength);
                        }
                    }
                }

                System.out.println("RETURN DIR 1");
                return;
            } else if (dir == 2) {
                if (valid(rows + moveLength, columns)
                    && isInRange(0, length, rows + moveLength, false)
                    && maze[rows + moveLength][columns] != 1) {
                    System.out.println("IF 2 is TRUE");
                    for (int i = 1; i <= moveLength; i++) {
                        maze[rows + moveLength][columns] = 1;
                    }
                    maze[rows][columns] = 1;
                    System.out.println("HERE 2");
                    backtrackGenerateMaze(rows + moveLength, columns, moveLength);
                }

                System.out.println("RETURN DIR 2");
                return;
            } else if (dir == 3) {
                if (valid(rows, columns - moveLength)
                    && isInRange(0, width, columns - moveLength, false)
                    && maze[rows][columns - moveLength] != 1) {
                    System.out.println("IF 3 is TRUE");
                    for (int i = 1; i <= moveLength; i++) {
                        maze[rows][columns - moveLength] = 1;
                    }
                    maze[rows][columns] = 1;
                    System.out.println("HERE 3");
                    backtrackGenerateMaze(rows + moveLength, columns - moveLength, moveLength);
                }

                System.out.println("RETURN DIR 3");
                return;
            }
        }
        System.out.println("--------------------");
    }

    public int[] generateRandomDirections() {
        ArrayList<Integer> rands = new ArrayList<>();
        for (int i = 0; i < 4; i++) {
            rands.add(i);
        }
        Collections.shuffle(rands);

        int[] ret = new int[4];
        for (int i = 0; i < rands.size(); i++) {
            ret[i] = rands.get(i);
        }
        return ret;
    }

    private boolean valid(int row, int column) {
        return isInRange(0, maze.length - 1, row, true)
                && isInRange(0, maze[0].length - 1, column, true);
    }

    private boolean isInRange(int start, int end, int toCheck,
            boolean inclusive) {
        if (inclusive) {
            return (toCheck >= start && toCheck <= end);
        }
        return (toCheck > start && toCheck < end);
    }

    @Override
    public String toString() {
        String ret = "";
        for (int i = 0; i < maze.length; i++) {
            for (int j = 0; j < maze[0].length; j++) {
                ret += maze[i][j] + " ";
            }
            ret += "\n";
        }
        return ret;
    }
} 
```

...这是我用来运行它的主要方法：

```
public class MazeGame {

    private static ArrayList<Maze> mazes = new ArrayList<>();
    private static final int MAZE_SIZE = 10, NUM_MAZES = 1;

    public static void main(String[] args) {
        Maze temp;
        for (int i = 0; i < NUM_MAZES; i++) {
            temp = new Maze(MAZE_SIZE, MAZE_SIZE);
            System.out.println(temp);
            mazes.add(temp);
        }
    }
} 
```

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T18:21:52.983

这段代码在这里运行，输出：

```
dir == 2
rows == 9
columns == 9

RETURN DIR 2
1 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 
```

绝对不是你说的...

# curl - Facebook 在 heroku 和 Curl Options 上运行

> ID：15865907
> 
> 赞同：1
> 
> 时间：2013-04-07T18:08:08.397
> 
> 标签：curl, heroku, facebook-apps

我正在开发一个在 heroku 上运行的 facebook 应用程序，我需要更改文件`CURLOPT_CONNECTTIMEOUT`中的`base_facebook.php`内容。我无法更改该`CURLOPT_CONNECTTIMEOUT`值（默认设置为 10），因为 heroku 从 git 获取 facebook sdk。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T21:39:06.377

您可以只分叉 Facebook git 并在 .gitmodules 的子模块中指向它

```
[submodule "sdk"]
    path = sdk
    url = https://github.com/YOUR_USER_NAME/facebook-php-sdk.git 
```

# node.js - Redis pub/sub vs 节点事件发射器

> ID：15865912
> 
> 赞同：3
> 
> 时间：2013-04-07T18:08:18.960
> 
> 标签：node.js, events, redis, publish-subscribe

我不确定我是否真正理解使用 redis pub/sub 和使用 node/express 事件发射器之间的区别。发布/订阅是否以任何方式与我的数据库交互？在什么情况下我会使用其中一种？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-07T18:33:21.713

Redis 允许您构建快速而强大的进程间通信。Redis pub/sub 使用您的 Redis 进程来传递您的消息，但它不会影响存储在 Redis DB 中的数据。

事件发射器仅在单节点进程中工作。因此，即使您有一个单节点集群，一个工作人员发出的事件也不会对另一个工作人员可见。

因此，事件发射器是进程内通信的完美选择。但是如果你需要进程间通信，你应该使用Redis。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T18:37:14.720

如果 Redis 是您的数据库，那么是的 pub/sub 与数据库交互（但不是存储的数据），因为它是 Redis 正在处理发布到订阅频道的执行。而且我不一定会说您会使用其中一个。redis 客户端将使用事件发射器向您的节点应用程序发出 Redis 已发布消息的信号。

要真正回答您的问题，这取决于您使用它们的目的。如果您只有一个节点实例在一台服务器上运行，那么也许事件发射器可以充当您的消息传递传输。

但是，如果您有多个节点实例，或者在多个服务器上运行多个实例，您可以扩展事件发射器以将其消息发布到 Redis，从而允许在其他服务器上运行的其他节点实例响应事件。

另一个很好的用例是 socket.io。如果您说聊天室使用套接字在房间之间进行广播，那么如果您的聊天应用程序分布在多个服务器上，则需要利用 Redis 发布/订阅。

# android - 如何更改操作栏的颜色（actionbarsherlock）

> ID：15865914
> 
> 赞同：2
> 
> 时间：2013-04-07T18:08:52.837
> 
> 标签：android, android-layout, android-actionbar, actionbarsherlock, android-xml

如何更改操作栏（actionbarsherlock）的颜色？

我已经尝试过以下代码，但没有运气。

```
<style name="MyTheme.ActionBarStyle" parent="Widget.Sherlock.ActionBar">
    <item name="background">#ffffffff</item>
</style>

<style name="Theme.SherlockCustom" parent="@style/Theme.Sherlock.Light">
    <item name="actionBarStyle">@style/MyTheme.ActionBarStyle</item>
</style> 
```

+还有一件事，我要添加如下子菜单。这个按钮的背景颜色也是白色的（因为 Sherlock Theme）。我可以改变那些颜色吗？

```
 SubMenu sub = menu.add("abcd");
    sub.add(0, 1, 0, "Default");
    sub.add(0, 2, 0, "Light");
    sub.add(0, 3, 0, "Light (Dark Action Bar)");
    sub.getItem().setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS | MenuItem.SHOW_AS_ACTION_WITH_TEXT); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T18:54:18.490

在设置 actionBar 的样式时，最好的办法是使用非常流行的[Action Bar Style Generator](http://jgilfelt.github.io/android-actionbarstylegenerator/)，它是一个 Web 应用程序，可让您预览 ActionBar 的外观，并让您下载所有必要的资源以简单将其添加到您的产品中：9patches、state-drawables 和 .xmls。

如果您不确定如何使用它，这里有一个快速[指南](http://java.dzone.com/articles/creating-custom-android-styles)。

使用它是确保操作栏看起来很棒的最佳方法，而不会浪费您本可以花在有价值的 Java 代码上的大量时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T18:46:36.107

我认为您应该使用`@style/Widget.Sherlock.Light.ActionBar.Solid`or`@style/Widget.Sherlock.Light.ActionBar.Solid.Inverse`作为 ActionBarStyle 的父级以及属性`background`和`android:background`. 例如：

```
<style name="MyTheme.ActionBarStyle" parent="@style/Widget.Sherlock.Light.ActionBar.Solid">
    <item name="background">#ffffff</item>
    <item name="android:background">#ffffff</item>
</style>

<style name="Theme.SherlockCustom" parent="@style/Theme.Sherlock.Light">
    <item name="actionBarStyle">@style/MyTheme.ActionBarStyle</item>
    <item name="android:actionBarStyle">@style/MyTheme.ActionBarStyle</item>
</style> 
```

[ActionBar 样式生成器](http://jgilfelt.github.io/android-actionbarstylegenerator/)可以帮助您设置子菜单的样式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-14T14:14:50.570

```
 I just used below Code 

 getSupportActionBar().setBackgroundDrawable(new 
   ColorDrawable(Color.parseColor("#00853c"))); 

 it changed the bg color. Hope, it helps. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-07T18:45:41.227

您第一次发布的内容看起来几乎完全正确，这是您需要添加以更改 ActionBar 颜色的主题。您还应该使用您的颜色添加 android:background 属性：

```
<style name="MyTheme.ActionBarStyle" parent="Widget.Sherlock.ActionBar">
    <item name="background">#ffffffff</item>
    <item name="android:background">#ffffffff</item>
 </style>

<style name="Theme.SherlockCustom" parent="@style/Theme.Sherlock.Light">
    <item name="actionBarStyle">@style/MyTheme.ActionBarStyle</item>
</style> 
```

但是，您需要确保将其应用于整个应用程序，或者仅应用于要在其中显示它的活动。您可以在 AndroidManifest.xml 中的应用程序标记或活动标记中使用 android：主题属性。

```
<application
    android:name="com.your.package.name"
    android:icon="@drawable/icon"
    android:label="@string/app_name"
    android:theme="@style/Theme.SherlockCustom" > 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-07T18:44:46.883

使用这种风格：

```
<style name="MyTheme.ActionBarStyle" parent="Widget.Sherlock.ActionBar">
      <item name="background">#ffffffff</item>
      <item name="android:background">#ffffffff</item>
</style> 
```

我假设您在具有 HC 或更高版本的设备上测试了您的应用程序，并且由于您没有为本机 ActionBar 指定背景，因此它不起作用。将其更改为上面的样式，它应该可以工作。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-07-17T13:17:13.400

创建自定义操作栏，然后您将更改操作栏 Sherlock 的颜色.....

# jquery - 选项卡式 div 中的 jQuery bxslider

> ID：15865916
> 
> 赞同：0
> 
> 时间：2013-04-07T18:09:00.563
> 
> 标签：jquery, bxslider

如果有人遇到这个问题并解决了它，那么帮助会很棒。

我在一个页面上有 3 个滑块，这不是问题并且工作正常，直到我将每个滑块都放入一个 jQuery 选项卡式内容容器中。然后第一个运行正常，但是当我更改选项卡以隐藏第一个 div 与工作滑块时，我只得到上一个/下一个箭头和幻灯片编号，但幻灯片 li 是隐藏的。

任何帮助都会很棒。

谢谢杰夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-29T18:41:35.937

高度`bx-viewport`需要重新设置。`jquery.bxslider.css`或者正如 Korhan 所说，您可以通过在文件中手动设置此参数来修复它。设置这个参数解决了我的问题，似乎是一样的。

这个问题很难理解，不仅因为它（可能）是一个错误，还因为您还需要验证您正在执行的其他 DOM 操作，并且到目前为止，还没有官方对此问题的回应。长时间查看 div 的名称和他们的 Class 或 Id，检查您是否有 bx-viewport 的问题，并且一切都应该正常工作。

> **更新 1**
> 
> > 解决此问题的其他方法是在您的**导航中附加一个****onclick 事件**，然后在用户单击时**触发****bxslider 。**
> > 
> >  ******您可以使用这种方法一个接一个地附加一个 id，或者创建类似于正则表达式的东西来适应它。之后，当事件触发时，您将需要获取一些内容选项卡的 id。有了这个特定的 id，您可以在其中搜索正确的 'bxslider' id。您可以通过使用 Jquery**查找**功能来做到这一点。此时您可以**调用 bxslider 构造函数**。******

 ****这应该可以在现代浏览器中使用，所以再一次看一下 IE 问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T08:19:37.603

我有类似的问题。当我查看萤火虫时，我意识到 *bx-viewport" 选项卡中每个滑块的高度为 0px。只需在 css 中给它静态高度并解决这个问题，所有滑块在选项卡中都是可见的。****

# php - php会话和rand

> ID：15865919
> 
> 赞同：-4
> 
> 时间：2013-04-07T18:09:14.407
> 
> 标签：php

1.  假设有 10 个用户登录到一个社交网站，每个人都有 session，如何销毁一个特定用户的 session？
2.  如何使用php随机显示图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T18:13:27.020

请在提问之前搜索网站或只是谷歌搜索。提出问题时会警告您，甚至提供搜索字段。我们在这里帮助您不要为您做这件事。
您的问题已经被问及并回答过。这与您要查找的内容非常接近-[如果用户被禁止，则终止活动会话](https://stackoverflow.com/questions/3662755/kill-active-session-if-user-is-banned)

这正是您要寻找的（只需用图片链接替换短语）-[获取随机短语 php](https://stackoverflow.com/questions/14116035/get-random-phrases-php/14116065#14116065)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T18:15:45.503

Q1）我不明白这一点。

Q2)只需使用 rand( *,* ) 随机数字，并以不同的数字显示不同的图像。例如：

```
<?php
$num = rand(1,3);
if($num == 1){
    ?>
    <---PIC--->
    <?php
}else if($num == 2){
    ?>
    <---PIC--->
    <?php
}else if($num == 3){
    ?>
    <---PIC--->
    <?php
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T18:21:22.957

Q1：我不太确定......但是如果您没有要销毁的会话的会话 ID，那么就没有一种理智、干净、可移植的方式来做到这一点。但是，如果您有要销毁的会话的会话 ID，则可以将其传递给 session_start() 以恢复该会话，将其销毁，然后在需要时再次调用 session_start() 以创建新会话。

Q2：用数字调用您的图像源...例如 img_1.jpg ， img_n.jpg 然后使用 PHP 使用 rand 函数来调用您的图像，如 $img = ran(1,n); 在您的 img 标签中打印 'img_'.$img.'.jpg'。这不是一个更清洁的解决方案，但您需要更深入地了解；）

# emscripten - 与 Emscripten 中的 C++ 类交互

> ID：15865923
> 
> 赞同：18
> 
> 时间：2013-04-07T18:09:36.283
> 
> 标签：emscripten

Emscripten 教程很好地解释了如何与 C 函数交互：[https ://github.com/kripken/emscripten/wiki/Interacting-with-code](https://github.com/kripken/emscripten/wiki/Interacting-with-code)

但是你如何与 C++ 类交互：

*   调用构造函数创建对象
*   删除一个对象
*   防止类及其方法的死代码消除

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-12-14T08:14:59.130

检查这个： http: [//kripken.github.io/emscripten-site/docs/porting/connecting_cpp_and_javascript/embind.html](http://kripken.github.io/emscripten-site/docs/porting/connecting_cpp_and_javascript/embind.html)

例子 ：

C++ 代码：

```
#include <emscripten/bind.h>

using namespace emscripten;

class MyClass {
public:
    MyClass(int x, std::string y)
        : x(x)
        , y(y)
    {}

    void incrementX() {
        ++x;
    }

    int getX() const { return x; }
    void setX(int x_) { x = x_; }

    static std::string getStringFromInstance(const MyClass& instance) {
        return instance.y;
    }

private:
    int x;
    std::string y;
};

EMSCRIPTEN_BINDINGS(my_class_example) {
    class_<MyClass>("MyClass")
        .constructor<int, std::string>()
        .function("incrementX", &MyClass::incrementX)
        .property("x", &MyClass::getX, &MyClass::setX)
        .class_function("getStringFromInstance", &MyClass::getStringFromInstance)
        ;
} 
```

JS代码：

```
var instance = new Module.MyClass(10, "hello");
instance.incrementX();
instance.x; // 12
instance.x = 20; // 20
Module.MyClass.getStringFromInstance(instance); // "hello"
instance.delete(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-23T22:47:57.173

我这样做的方法是创建执行必要操作的“代理”函数。例如：

```
class HelloWorld
{
    int x;
  public:
    HelloWorld() { x = 0; }
    ~HelloWorld() {}
    void setX(int v) { x = v; }
    int getX() { return x; }
    // ...
};

//compile using "C" linkage to avoid name obfuscation
extern "C" {
  //constructor, returns a pointer to the HelloWorld object
  void *HW_constructor() {
    return new HelloWorld();
  }

  void HW_setX(HelloWorld *hw, int x) {
    hw->setX(x);
  }

  int HW_getX(HelloWorld *hw) {
    return hw->getX();
  }

  void HW_destructor(HelloWorld *hw) {
    delete hw;
  }
}; 
```

然后在 JS 中，您必须构建一个调用代理函数的对象的克隆（我知道这很烦人，但目前我不知道有更好的解决方案）：

```
// get references to the exposed proxy functions
var HW_constructor = Module.cwrap('HW_constructor', 'number', []);
var HW_destructor = Module.cwrap('HW_destructor', null, ['number']);
var HW_setX = Module.cwrap('HW_setX', null, ['number', 'number']);
var HW_getX = Module.cwrap('HW_getX', 'number', ['number']);

function HelloWorld() {
  this.ptr = HW_constructor();
}

HelloWorld.prototype.destroy = function () {
  HW_destructor(this.ptr);
};

HelloWorld.prototype.setX = function (x) {
  HW_setX(this.ptr, x);
};

HelloWorld.prototype.getX = function () {
  return HW_getX(this.ptr);
}; 
```

**重要**请记住，为了使其工作，您需要将以下标志添加到您的 emcc 命令中，以告诉它不要将代理方法作为死代码剥离（注意：这里的下划线是有意且重要的！）：

```
emcc helloworld.cpp -o helloworld.js \
  -s EXPORTED_FUNCTIONS="['_HW_constructor','_HW_destructor','_HW_setX','_HW_getX']" 
```

**编辑：**我为人们尝试代码创建了一个[要点。](https://gist.github.com/camupod/5640386)

# python - 如何从 Python shell 执行 manage.py

> ID：15865925
> 
> 赞同：11
> 
> 时间：2013-04-07T18:09:45.357
> 
> 标签：python, django

我正在尝试在我的 Django 项目中使用 Werkzeug，它本质上是一个网页 Python shell 接口。我想运行诸如`python manage.py syncdb`and之类的命令，`python manage.py migrate`但在 Python shell 中它不是很简单。

我`import manage`从那里尝试并尝试了命令，但从 manage.py 的源代码来看，没有什么可调用的，因为它将参数传递给`django.core.management.execute_from_command_line()`.

我还尝试定义一个函数，如图所示“[从 Python 运行 shell 命令并捕获输出](https://stackoverflow.com/questions/4760215/running-shell-command-from-python-and-capturing-the-output)”，但使用

```
runProcess('Python manage.py syncdb') 
```

仅返回：

```
<generator object runProcess at 0x000000000520D4C8> 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-07T18:16:14.093

你可以从命令行启动一个 Django shell：

```
python manage.py shell 
```

然后导入`execute_from_command_line`：

```
from django.core.management import execute_from_command_line 
```

最后，您可以执行所需的命令：

```
execute_from_command_line(["manage.py", "syncdb"]) 
```

它应该可以解决您的问题。

作为替代方案，您还可以查看[subprocess 模块文档](http://docs.python.org/2.7/library/subprocess.html)。您可以执行一个进程，然后检查其输出：

```
import subprocess
output = subprocess.check_output(["python", "manage.py", "syncdb"])
for line in output.split('\n'):
    # do something with line 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T18:46:11.953

注意：这是用于交互式使用，而不是您可以放入生产代码中的东西。

如果您使用的是[ipython](http://ipython.org/)，您可以这样做

```
!python manage.py syncdb 
```

这 '！' 说：

> 我想像执行 shell 命令一样执行它

如果你安装了 pip，你可以通过以下方式获取 ipython：

```
pip install ipython 
```

您希望在命令行（而不是在 Python 解释器中）运行它。您可能需要`sudo`在前面加上一个，这取决于您的环境是如何设置的。

# javascript - 当用户向下滚动页面时淡入div？

> ID：15865927
> 
> 赞同：0
> 
> 时间：2013-04-07T18:09:58.077
> 
> 标签：javascript

当用户向下浏览页面时，我试图让 div 使用 javascript 淡入，我遇到的问题是，虽然它淡入淡出，但它会像脉动一样快速淡入和淡出多次。

我只想要它，以便当用户向下滚动页面时，div 会慢慢淡入。有人可以帮忙吗？

```
<script>
   $(window).scroll(function(){
       var leftToBottom = $(document).height() - $(window).height() - $(window).scrollTop();
       var distanceFromTop = $(window).scrollTop();
       if( distanceFromTop > 600 && !$("profile_intro_case5").is(":visible") 
          && leftToBottom > 600) {
            $(".profile_intro_case5").fadeIn();
       }else if($(".profile_intro_case5").is(":visible") && (distanceFromTop < 600 || leftToBottom < 600)){
            $(".profile_intro_case5").fadeOut();
      }
   });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T18:12:04.787

检查元素当前没有被动画化：`!$(".profile_intro_case5").is(":animated")`

```
 $(window).scroll(function(){
       var leftToBottom = $(document).height() - $(window).height() - $(window).scrollTop();
       var distanceFromTop = $(window).scrollTop();
       if( distanceFromTop > 600 && !$("profile_intro_case5").is(":visible") 
          && leftToBottom > 600 && !$(".profile_intro_case5").is(":animated")) {
                $(".profile_intro_case5").fadeIn();
       }else if($(".profile_intro_case5").is(":visible") && (distanceFromTop < 600 || leftToBottom < 600) && !$(".profile_intro_case5").is(":animated")){
                $(".profile_intro_case5").fadeOut();
      }
   }); 
```

# powershell - 使用 Powershell 获取远程用户 HKLM

> ID：15865929
> 
> 赞同：4
> 
> 时间：2013-04-07T18:10:02.317
> 
> 标签：powershell

有没有办法在您的网络 HKLM 上获得另一台机器？我想你会为此使用 pdrive，但我无法让命令成功运行

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-07T18:57:08.240

有几种方法可以做到这一点，但你如何做到这一点取决于你所拥有的环境。

1）可能最简单的方法是使用invoke-command

```
Ex.
Invoke-command -computer RemoteComputerName {Get-ItemProperty HKLM:\SOFTWARE\Microsoft\Windows\CurrentVersion\run} 
```

如果您在远程计算机上有足够的权限，这将起作用，WinRM 已配置为您连接到它。

2）您可以使用 .net 注册表类查看此链接：http: [//msdn.microsoft.com/en-us/library/microsoft.win32.registrykey.aspx](http://msdn.microsoft.com/en-us/library/microsoft.win32.registrykey.aspx)

```
$registry = [Microsoft.Win32.RegistryKey]::OpenRemoteBaseKey('LocalMachine', 'RemoteComputerName')
$registryKey= $registry.OpenSubKey("Software") 
```

3) 您使用 PSDrive，如 Scripting Guy 博客 [http://blogs.technet.com/b/heyscriptingguy/archive/2012/05/07/use-the-powershell-registry-provider-to-simplify-registry-访问.aspx](http://blogs.technet.com/b/heyscriptingguy/archive/2012/05/07/use-the-powershell-registry-provider-to-simplify-registry-access.aspx)

4) 您可以使用 WMI Registry [http://itknowledgeexchange.techtarget.com/powershell/wmi-and-the-registry/](http://itknowledgeexchange.techtarget.com/powershell/wmi-and-the-registry/)

# objective-c - 无法获取 UITableView 内的 UIView 内元素的框架或中心

> ID：15865930
> 
> 赞同：0
> 
> 时间：2013-04-07T18:10:04.723
> 
> 标签：objective-c, uitableview, frame

我有一个 UITableView，首先是表视图部分，然后是 UIView（绑定到 IBOutlet _myView），里面有一些控件（例如 UITextField，绑定到 IBOutlet _durationField）。所有这些都在情节提要中完成。我想动态移动那个 _durationField，所以我需要修改中心或框架属性。但是，viewDidLoad 中的这段代码返回零值：

```
CGRect durationRect = _durationField.frame; 
```

而 TableCell 和 _myView 框架属性中的标签返回实际值，例如这不返回零：

```
CGRect viewRect = _myView.frame; 
```

更改 _durationField 的 frame 属性也不会反映在 UI 中。实际上，我为 _myView 中的所有控件获得了零值，尽管它们在代码中正确绑定到 IBOutlet。此外，我可以在 viewDidLoad 中设置 _durationField.text 并且效果很好。

有任何想法吗？看起来我错过了一些简单的东西。

**使用viewWillLayoutSubviews**的第一个建议解决方案确实允许移动元素，但只能在呈现视图之后。所以用户可以看到它是如何移动的。这不是一个理想的行为。我想在呈现视图之前动态移动元素。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-07T21:01:00.497

在viewDidLoad中，UI还没有布局，你应该将调整框架的代码移动到**viewWillLayoutSubviews**（确保你先调用超类实现）

# python - Python：从键和值是字符串的列表中理解字典？

> ID：15865932
> 
> 赞同：1
> 
> 时间：2013-04-07T18:10:07.583
> 
> 标签：python, dictionary, dictionary-comprehension

我想把一个列表`('a','b','c')`变成`{'1':'a','2':'b','3':'c'}`

```
 d = {key: value for key, value in targets} 
```

将键作为整数返回，我需要将其存储为字符串，以便可以将字符串附加到每个键，以便最终得到

```
{'column1','a','column2','b','column3'} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T18:11:22.733

只需将密钥投射到`str()`and `enumerate()`：

```
d = {str(i): value for i, value in enumerate(targets)} 
```

或者如果您需要在键前加上字符串，请使用格式：

```
d = {'column{}'.format(i): value for i, value in enumerate(targets)} 
```

dict理解中的键和值表达式就是python表达式。

# ios - 无法在 iOS Facebook SDK 中验证 PassportJS 的 access_token

> ID：15865933
> 
> 赞同：1
> 
> 时间：2013-04-07T18:10:10.890
> 
> 标签：ios, facebook, node.js

我正在尝试将 Facebook iOS sdk 与 PassportJS（服务器是 NodeJS）一起使用，我成功地在我的 iOS 应用程序上使用 Facebook 登录。我要做的下一件事是将访问令牌交给服务器并从那里进行验证。不幸的是，它根本不起作用。

奇怪的是，对于我的网站来说，它运行良好。我只是使用回调 url 将令牌发布到服务器。

所以在代码中facebook登录后会发生什么（有效）

```
/*
 * Callback for session changes.
 */
- (void)sessionStateChanged:(FBSession *)session
                      state:(FBSessionState) state
                      error:(NSError *)error
{
    switch (state) {
        case FBSessionStateOpen:
            if (!error) {
                // We have a valid session
                NSString *token = session.accessTokenData.accessToken;
                NSLog(@"User session found: %@", token);
                [[NSNotificationCenter defaultCenter] postNotificationName:nGotFacebookSession object:nil userInfo:@{
                    @"token": token
                }];
            }
            break;
        case FBSessionStateClosed:
        case FBSessionStateClosedLoginFailed:
            [FBSession.activeSession closeAndClearTokenInformation];
            break;
        default:
            break;
    }

    [[NSNotificationCenter defaultCenter]
     postNotificationName:FBSessionStateChangedNotification
     object:session];

    if (error) {
        UIAlertView *alertView = [[UIAlertView alloc]
                                  initWithTitle:@"Error"
                                  message:error.localizedDescription
                                  delegate:nil
                                  cancelButtonTitle:@"OK"
                                  otherButtonTitles:nil];
        [alertView show];
    }
} 
```

然后，在登录控制器中收到通知：

```
- (void) facebookLogin: (NSNotification*) notification
{
    [MBProgressHUD showHUDAddedTo:self.view animated:YES];
    NSString *token = [notification.userInfo objectForKey:@"token"];
    [[CBApi sharedAPI] get:@"api/auth/facebook/callback" andParams:@{
        @"code": token
    } andCallback:^(NSDictionary *json) {
        [MBProgressHUD hideHUDForView:self.view animated:YES];
        if ([json objectForKey:kError]) {
            Alert(@"Error", @"Login details failed");
        } else {
            User *u = [User createEntity];
            u.email = self.emailField.text;
            [self dismissViewControllerAnimated:YES completion:nil];
        }
    }];
} 
```

然后我从服务器返回这个错误（从控制台复制粘贴）：

```
failed to obtain access token (status: 400 data: {
    "error": {
        "message": "Invalid verification code format.",
        "type": "OAuthException",
        "code": 100
    }
}) 
```

就像我说的，它在使用网站登录时完全有效，没问题，只是它不接受 iOS 原生生成的访问令牌。我以前从未像这样进行过FB登录。如果你能帮助我，那就太好了，无论如何，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T09:05:23.703

我想到了！对于任何有同样问题的人，这就是我所做的：不要使用passportjs的普通Facebook策略，而是使用这个：[https ://github.com/drudge/passport-facebook-token](https://github.com/drudge/passport-facebook-token)

它允许您使用主动访问令牌，几乎可以替代我。服务器为网站使用旧的 facebook 策略（带有 passpostjs 的策略）和用于 iOS 登录的 facebookstrategy-token。

# jquery - 带有编辑操作子菜单的导航菜单

> ID：15865934
> 
> 赞同：0
> 
> 时间：2013-04-07T18:10:18.343
> 
> 标签：jquery, html, css

在 Web 应用程序中，我有一个使用`<ul>`. 没有什么特别花哨的。每个`<li>`都有一些填充和颜色。

我正在尝试弄清楚如何创建一个操作菜单，以便当您将鼠标悬停在其中一个`<li>`“小菜单”上时，它会显示在它的右下方，`<ul>`部分可见的边距右侧，然后当您将鼠标悬停在操作本身上时完全可见. 有点像它在 Word 2007+ 中的工作方式，当您突出显示一大块文本时：

![](https://www.syfuhs.net/image.axd?picture=%2f2013%2f04%2fmenu.png)

在这种情况下，操作将是诸如编辑、删除、上移、下移之类的操作。

这是我的基本布局：

```
<div id="nav-menu">
    <div class="tab-control-menu">some action items</div>
    <ul id="tab-list">
        <li class="nav-item tab">
            <a tab="tab1" tab-id="1" class="selected tab">Tab 1</a>
        </li>
        <li class="nav-item tab">
            <a tab="tab2" tab-id="2" class="tab">Tab 2</a>
        </li>
        <li class="nav-item tab">
            <a tab="tab3" tab-id="3" class="tab">Tab 3</a>
        </li>
        <li class="nav-item tab">
            <a tab="tab4" tab-id="4" class="tab">Tab 4</a>
        </li>
        <li class="nav-item">
            <a href="#" class="new-tab">Add New...</a>
        </li>
    </ul>
</div> 
```

构建这样一个操作菜单的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T18:33:02.487

如果列表很短，我会在每个项目之后添加弹出元素，例如：

```
<li class="box">Box</li> 
```

使用 隐藏它`display: none`，然后在列表项悬停时显示它：

```
li.nav-item:hover + .box, .box:hover {
    display: block;
}
.box {
    display: none;
    list-style: none;
    opacity: 0.3;
}
.box:hover {
    opacity: 1;
} 
```

你将不得不调整行为，如果列表很长，也许使用 JS 来附加元素。

[http://jsfiddle.net/4unLH/](http://jsfiddle.net/4unLH/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T18:49:28.647

如果您使用的是 jquery，那么这对您有用

**JS**

```
 $(function () {
        var controls = $('#controls');

        controls.hover(function(){
           $('a', $(this)).css('opacity', 1);
        },function(){
           $('a', $(this)).css('opacity', 0.3);
        });

        function hideControls(){
           controls.fadeOut('fast');
        }

        $('.close', controls).click(function(){
           hideControls();
        })

        $('.nav-item').hover(function(){
           var off = $(this).offset()
           controls.css({
              opacity: 1,
              display: 'block',
              left: off.left + 20,
              top: off.top + 20
           });
        }, function(){

        })
     }) 
```

**CSS**

```
 #controls{display: none; position: absolute; top: 0; left: 0; background: #fff; border: 1px solid #eee; padding: 20px 5px;}
     #controls a{opacity: 0.3}
     #controls a:hover{background:#eee}
     #controls .close{font-size: small; background: #000; padding: 3px; color:#fff}
     #nav-menu .tab{width: 100px; background:#ffc} 
```

***除了*标记**

```
 <span id="controls">
     <a href="#" id="c1">control 1</a>
     <a href="#" id="c2">control 2</a>
     <a href="#" id="c3">control 3</a>
     <a href="#" class="close">close</a>
  </span> 
```

[http://jsfiddle.net/gybUj/](http://jsfiddle.net/gybUj/)。

我认为也可以使用纯 CSS 来实现。

# matlab - 在Matlab中为线图的一部分分配特定颜色？

> ID：15865939
> 
> 赞同：0
> 
> 时间：2013-04-07T18:10:42.087
> 
> 标签：matlab, plot, visualization, appearance

我有以下图表

![在此处输入图像描述](https://i.stack.imgur.com/KH7hL.png)

如果一个值，它们会波动`v=1`。`PB1`->`PB4`如果`v1`->`v4`也等于 1，则可以同时波动。我想可视化任何变量`PB1`->`PB4`波动的过程，因为`v`通过将它们着色为红色。

这在 Matlab 中可能吗？

# java - JPanels 不会在 cardLayout 中切换

> ID：15865942
> 
> 赞同：0
> 
> 时间：2013-04-07T18:10:53.813
> 
> 标签：java, swing, jpanel, actionlistener, cardlayout

我创建了一个包含多个 JPanel 的类，我想使用 cardLayout 在这些 JPanel 之间切换。每个 Jpanel 和 cardLayout 都是它们自己的方法。当我单击任何按钮时，它应该显示下一个 Jpanel 但不显示。我在这里没有得到什么

```
import javax.swing.*;
import java.awt.*;
import java.awt.CardLayout;
import java.awt.Component;
import java.awt.event.*;

public class guiFrames extends JFrame implements ActionListener{

    String name = "login";
    JButton loginSubmit, list;
    JPanel cardGUI;
    CardLayout cards;

  public guiFrames(){
  }

  public Component inputFrame(){

    JPanel inputPnl = new JPanel();
    inputPnl.setLayout(new GridLayout(3,2));

    JLabel loginLbl = new JLabel("Login");
    inputPnl.add(loginLbl);
    JTextField loginTxt = new JTextField();
    inputPnl.add(loginTxt);
    JLabel pwLbl = new JLabel("Password");
    inputPnl.add(pwLbl);
    JTextField pwTxt = new JTextField();
    inputPnl.add(pwTxt);

    JPanel buttonPnl = new JPanel();
    buttonPnl.setLayout(new FlowLayout(FlowLayout.LEFT, 1,5));

    loginSubmit = new JButton("Submit");
    buttonPnl.add(loginSubmit);
    JButton loginCancel = new JButton("Cancel");
    buttonPnl.add(loginCancel);

    JPanel container = new JPanel();
    container.setLayout(new BorderLayout());
    container.add(inputPnl, BorderLayout.CENTER);
      container.add(buttonPnl, BorderLayout.SOUTH);

      container.setVisible(true);

    return container;
  }

  public Component issueList(){

  JPanel listPnl = new JPanel();

  JPanel listFlow = new JPanel();
  listFlow.setLayout(new FlowLayout(FlowLayout.LEFT, 1,5));

  JButton newIssue = new JButton("New");
  listFlow.add(newIssue);
  list = new JButton("Issues");
  listFlow.add(list);
  JButton newUser = new JButton("Add User");
  listFlow.add(newUser);

  JPanel container = new JPanel();
  container.setLayout(new BorderLayout());
  container.add(listFlow, BorderLayout.SOUTH);

  listPnl.add(container);
//  listPnl.pack();
  listPnl.setVisible(true);
//  listPnl.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

  return listPnl;
 }

  public Component issueDetails(){
  JList list = new JList();

  JPanel detailsFlow = new JPanel();
  detailsFlow.setLayout(new FlowLayout(FlowLayout.LEFT, 1,5));

  JButton detailsCancel = new JButton("Cancel");
  detailsFlow.add(detailsCancel);
  JButton detailsSubmit = new JButton("Submit");
  detailsFlow.add(detailsSubmit);
  JButton detailsAssign = new JButton("Assign");
  detailsFlow.add(detailsAssign);
  JButton detailsClose = new JButton("Close");
  detailsFlow.add(detailsClose);
  JButton detailsValidate = new JButton("Validate");
  detailsFlow.add(detailsValidate);
  JButton detailsFail = new JButton("Fail");
  detailsFlow.add(detailsFail);
      detailsFail.setVisible(false);

  JPanel container = new JPanel();
  container.setLayout(new BorderLayout());
  container.add(detailsFlow, BorderLayout.SOUTH);
  container.add(list, BorderLayout.CENTER);

  container.setVisible(true);

  return container;

  } 

  public Component addUser(){

  JPanel addUserGrid = new JPanel();
  addUserGrid.setLayout(new GridLayout(3,2));

  JLabel loginLbl = new JLabel("Login");
  addUserGrid.add(loginLbl);
  JTextField loginTxt = new JTextField();
  addUserGrid.add(loginTxt);
  JLabel pwLbl = new JLabel("Password");
  addUserGrid.add(pwLbl);
  JTextField pwTxt = new JTextField();
  addUserGrid.add(pwTxt);

  JLabel userLbl = new JLabel("User Type");
  addUserGrid.add(userLbl);
  JComboBox userCmb = new JComboBox();
  userCmb.addItem("User");
  userCmb.addItem("Manager");
  userCmb.addItem("Developer");
  addUserGrid.add(userCmb);

  JPanel addUserFlow = new JPanel();
  addUserFlow.setLayout(new FlowLayout(FlowLayout.LEFT, 1,5));

  JButton addUserCancel = new JButton("Cancel");
  addUserFlow.add(addUserCancel);
  JButton addUserSubmit = new JButton("Submit");
  addUserFlow.add(addUserSubmit);

  JPanel container = new JPanel();
  container.setLayout(new BorderLayout());
  container.add(addUserFlow, BorderLayout.SOUTH);
  container.add(addUserGrid, BorderLayout.CENTER);

  container.setVisible(true);

  return container;
  }

  public void cardView(){
        JFrame cardFrame = new JFrame(name);
        cardGUI = new JPanel();
        cards = new CardLayout();
        cardGUI.setLayout(cards);
        cardGUI.add(inputFrame(), "login");
    cardGUI.add(issueList(), "issueList");
    cardGUI.add(issueDetails(), "issueDetails");
    cardGUI.add(addUser(), "addUser");

        cardFrame.add(cardGUI, BorderLayout.CENTER);
        cardFrame.pack();
        cardFrame.setVisible(true);
        cardFrame.setDefaultCloseOperation(cardFrame.EXIT_ON_CLOSE);

     cards.show(cardGUI, name);
  }

  public void actionPerformed(ActionEvent e){
    if(e.getSource() == loginSubmit){
      cards.show(cardGUI, "IssueList");
    }else if(e.getSource() == list){
      name = "issueDetails";
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T18:17:40.687

> 当我单击任何按钮时，它应该显示下一个 Jpanel 但不显示。

我没有看到任何`button.addActionListener(...)`声明。

阅读 Swing 教程中有关[如何编写动作侦听器](http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html)的部分以获取更多信息。

编辑：

您尝试显示的卡片似乎不存在。卡名有误。这就是为什么很多人使用静态最终常量，这样你就不会出现打字错误：

```
cardGUI.add(issueList(), "issueList");
...
cards.show(cardGUI, "IssueList"); 
```

# java - 如何修复不正确的删除？

> ID：15865943
> 
> 赞同：0
> 
> 时间：2013-04-07T18:11:08.517
> 
> 标签：java, conditional-statements

所以这里有一个代码，可以从不是字母字符的符号中清除文本。然后它将文本拆分为单词。然后删除不是从元音开始的单词和没有第二个字符的单词。但是，当您输入大文本字符串时，此功能无法正常工作

```
input = new StringBuffer("some text will be here");
System.out.println("Начальная строка - " + input.toString());
input = new StringBuffer(input.toString().replaceAll("[^a-z A-Z А-Я а-я]", ""));
out = new StringTokenizer(input.toString());
System.out.println("Форматированная строка - " + input.toString());
n = (out.countTokens());
for (i = 0; i <= n - 1; i++) {
 tokenStr = new StringBuffer(out.nextToken());
 aChar = (tokenStr.charAt(0));
   if (tokenStr.length() > 1) {
     if (Here is check for vowels) {
       input.delete(input.indexOf(tokenStr.toString()),input.indexOf(tokenStr.toString())+ tokenStr.length() + 1);
     }
   } else {
     input.delete(input.indexOf(tokenStr.toString()),input.indexOf(tokenStr.toString())+ tokenStr.length() + 1);
   }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T18:14:07.613

我建议使用番石榴库字符串实用程序[http://code.google.com/p/guava-libraries/wiki/StringsExplained](http://code.google.com/p/guava-libraries/wiki/StringsExplained)

# java - 响应时间统计

> ID：15865948
> 
> 赞同：0
> 
> 时间：2013-04-07T18:11:27.257
> 
> 标签：java, performance, profiling, monitoring

我正在寻找像[https://github.com/alvins82/java-mini-profiler-core](https://github.com/alvins82/java-mini-profiler-core)这样的生产就绪监控工具，但具有持久的统计信息。比 AppDynamics 更轻巧但比 mini-profiler 更轻的东西。

# background - 在 Cocos2d 中使用视差滚动背景的问题？

> ID：15865959
> 
> 赞同：0
> 
> 时间：2013-04-07T18:12:16.843
> 
> 标签：background, cocos2d-iphone, sprite, parallax

我在我的 cocos2d 应用程序中使用视差滚动效果。我希望我的背景不断**滚动**；但是，我可能执行不正确，因为我的背景确实向左滚动，但在那之后，它再也不会回来了。

这是代码：

```
- (void) setUpBackground
{

    CGSize winSize = [CCDirector sharedDirector].winSize;

    // Create the CCParallaxNode
    _backgroundNode = [CCParallaxNode node];
    [self addChild:_backgroundNode z:-2];

    // Create ths prites
    para1 = [CCSprite spriteWithFile:@"bg.png"];
    para2= [CCSprite spriteWithFile:@"shipp.png"];

    // Determine relative movement speeds for trees and background
    CGPoint treeSpeed = ccp(0.1, 0.1);
    CGPoint bgSpeed = ccp(0.5, 0.5);

    // Add children to the CCParallexNode
    [_backgroundNode addChild:para1 z:0
                parallaxRatio:treeSpeed
               positionOffset:ccp(160,winSize.height/2)];

    [_backgroundNode addChild:para2 z:1
                parallaxRatio:bgSpeed
               positionOffset:ccp(para1.contentSize.width* para1.scale, winSize.height/2)];

}

- (void)updateBackground:(ccTime)dt
{
    CGPoint backgroundScrollVel = ccp(-1000, 0);
    _backgroundNode.position = ccpAdd(_backgroundNode.position, ccpMult(backgroundScrollVel, dt));

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:14:05.307

您没有显示完整的代码，但我想您可能会安排`updateBackground()`在其他地方。

在`updateBackground()`中，您设置背景的位置，并且它的 positionX 正在减少超时。这就是为什么它再也不会回来了。

您必须计算整个场景的宽度，背景的宽度，以及`updateBackground()`背景到达场景边缘时的取消调度。

# opengl-es - 不确定如何在opengl es 2中旋转对象

> ID：15865963
> 
> 赞同：0
> 
> 时间：2013-04-07T18:12:30.860
> 
> 标签：opengl-es, opengl-es-2.0

我不确定如何旋转我的对象。目前我有一个四边形，我希望能够以 45 度角查看它，我已经设置了我的模型视图投影矩阵。我知道我应该在着色器中而不是在实际代码中执行此操作，稍后我会更改它，但这里有一些代码。

```
 bool bRotate = PVRShellGet(prefIsRotated) && PVRShellGet(prefFullScreen);
p_Matrix = PVRTMat4::PerspectiveFovRH(PVRT_PI / 6, (float) PVRShellGet(prefWidth) / (float) PVRShellGet(prefHeight), 4.0f, 1000.0f, PVRTMat4::OGL, bRotate);
PVRTVec3 view_From(2, 2, 0);
v_Matrix = PVRTMat4::LookAtRH(view_From, view_At, view_Up) * PVRTMat4::RotationX(45);
cam_Pos = view_From;

PVRTMat4 modelView, world, mMVP;
world = PVRTMat4::Identity();
modelView = v_Matrix * world;
mMVP = p_Matrix * modelView;

if(PVRShellGet(prefIsRotated) && PVRShellGet(prefFullScreen)) // If the screen is rotated
    mMVP = PVRTMat4::RotationZ(-1.57f);

/*
    Pass this matrix to the shader.
    The .m field of a PVRTMat4 contains the array of float used to
    communicate with OpenGL ES.
*/
glUniformMatrix4fv(m_ShaderProgram.auiLoc[eMVPMatrix], 1, GL_FALSE, mMVP.ptr()); 
```

我试过旋转 mMVP 矩阵，但它没有效果。并且还尝试旋转模型视图和 v_matrix（视图矩阵）。我使用了 SDK 提供的一个名为 PVRTMat4::RotationX(45); 的函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-13T09:35:05.397

您可以使用 PVRTMat4::scale(fx,fy,fz) 函数来获得您需要的 44 旋转矩阵。设置 fx=45 和 fy=0 和 fz=0。然后将返回的矩阵乘以 mMVP 矩阵。

# ios - OpenGL ES 2.0 iOS 聚光灯随着距离的增加不正确

> ID：15865972
> 
> 赞同：0
> 
> 时间：2013-04-07T18:13:14.370
> 
> 标签：ios, opengl-es, opengl-es-2.0, lighting

我目前正在 iOS 上的 Open GL ES 2.0 中实现聚光灯。我所有的照明计算都是在世界空间中完成的（即我将世界空间坐标传递给着色器）。

我在场景中水平放置了一个地板网格（非常好的镶嵌），并在 (0,250,0) 处放置了一个光源，即直接向上。在我的着色器中，我将灯光硬编码为直接指向下方 (0,-1,0)。在这种情况下，聚光灯锥不起作用。但是，当我将地板位置向上提升（在 y 轴上，靠近灯光）时，聚光灯会在某个点“出现”。此外，就在它出现之前，地板上出现了一个奇怪的锥形“镜像”轮廓，并且在一定的阈值下，存在一些明显的渲染错误（下图第四张）

请参阅以下相册中的屏幕截图，每张图片都以地板越来越接近光线的方式排列。最终图像显示它工作正常

[http://imgur.com/a/cKOll](http://imgur.com/a/cKOll)

此外 - 这些屏幕是在 ipad mini 上拍摄的，但在 xCode iOS 模拟器上它可以完美运行！！

同样在“近距离”范围内，所有基本的 phong 计算都按预期工作。

关于可能导致问题的任何想法？

这是我的片段着色器：

```
// Fragment shader
precision highp float;

uniform mediump vec4 u_mat_diffuse;
uniform mediump vec4 u_mat_ambient;
uniform mediump float u_mat_specular;
uniform mediump float u_mat_shininess;
uniform mediump vec3 u_light_color;
uniform mediump float u_light_intensity;
uniform mediump vec3 u_light_spot_dir;
uniform mediump float u_light_spot_cutoff;
uniform mediump vec3 u_light_pos;
uniform mediump vec3 u_camera_eye;

varying mediump vec3 v_light_dir; 
varying mediump vec3 v_normal;
varying mediump vec3 v_pos;

void main(void)
{
    //normalize all first - v-pos is the vertex world position
    //all uniforms are in world position
    mediump vec3 E = normalize(u_camera_eye - v_pos);
    mediump vec3 L = normalize(u_light_pos - v_pos);

    mediump vec3 N = normalize(v_normal);

    mediump vec3 light_direction = vec3(0.0, -1.0, 0.0); //light direction
    mediump vec3 D = normalize(light_direction); 

    highp vec4 finalColor = vec4(0.0, 0.0, 0.0, 1.0);  

    //simple lambert
    highp float ndotl = max(dot(N, L), 0.0);
    highp vec3 DiffuseColor = vec3(1.0, 1.0, 1.0) * ndotl;

    if (dot(-L, D) > 0.9)
    {
        finalColor += vec4(DiffuseColor, 1.0) * vec4(1.0, 0.0, 0.0, 1.0);        
    }

    gl_FragColor = finalColor ;

} 
```

编辑：如果我将 finalColor 设置为固定值（即不使用漫反射项），那么它可以工作！所以计算扩散项的方式有问题

解决了：

答案是在着色器中使相关向量和矩阵都具有高精度（highp）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T21:25:52.707

答案是在着色器中使相关向量和矩阵都具有高精度（highp）。

# coldfusion - 带有 ColdSpring 的子应用程序无法访问包方法

> ID：15865973
> 
> 赞同：1
> 
> 时间：2013-04-07T18:13:18.213
> 
> 标签：coldfusion, cfc, subapplication, coldspring

我无法使用 ColdSpring 创建子应用程序来实例化我的对象。

在我的父应用程序中，我有一个 ColdSpring 配置文件，它可以毫无问题地实例化一堆组件。其中一个是“类别”(CategoryGateway) 组件，其中注入了另一个用于表的组件 (NestedSetTreeTable)。注入的组件包含一个由 CategoryGateway 组件调用的封装方法“GetDatasource”。

这在我的父应用程序中没有问题，但是当我尝试在我的子应用程序中实例化组件时，CategoryGateway 组件似乎无法访问包方法。

现在，我对 ColdSpring 很陌生——而且对从父应用程序创建子应用程序的概念也很陌生——所以我不确定我是否正确地做事。

这是我的设置：

父应用程序包含 ColdSpring 的映射版本及其自己的 coldspring.xml。Coldspring.xml 包含以下内容以实例化类别组件：

```
<!-- Categories CFC -->
<bean id="categories" parent="config" class="com.categories.categoryGateway">
    <constructor-arg name="sCategoriesTable">
        <value>${sCategoriesTable}</value>
    </constructor-arg>
    <constructor-arg name="sNSTTable">
        <value>${sNSTTable}</value>
    </constructor-arg>      
    <constructor-arg name="NST">
        <ref bean="categoriesNST" />
    </constructor-arg>      
</bean>

<!-- Categories NST Table CFC -->
<bean id="categoriesNST" parent="config" class="com.categories.NestedSetTreeTable">
    <constructor-arg name="datasourceName">
        <value>${sDSN}</value>
    </constructor-arg>
    <constructor-arg name="table">
        <value>${sNSTTable}</value>
    </constructor-arg>
</bean> 
```

在我父母的 Application.cfc 中，我这样实例化组件：

```
Application.com.categories = beanFactory.getBean('categories'); 
```

一切正常。现在，在我的子应用程序中，我有另一个 ColdSpring 映射版本和一个单独的 Coldspring.xml，以便我可以使用它来实例化特定于子应用程序的组件。我检查了正确的coldspring.xml 正在运行。

我没有在我的子应用的 Application.cfc 中实例化基本组件，而是调用 Super.onApplicationStart 来让父级的方法运行。父级包含实例化代码，但是它使用子级的 Coldspring.xml 来查找组件 - 因此我创建了到父级应用程序的映射，并相应地调整了子级的 Coldspring.xml - 所以它是：

```
<!-- Categories CFC -->
<bean id="categories" parent="config" class="core.com.categories.categoryGateway">
    <constructor-arg name="sCategoriesTable">
        <value>${sCategoriesTable}</value>
    </constructor-arg>
    <constructor-arg name="sNSTTable">
        <value>${sNSTTable}</value>
    </constructor-arg>      
    <constructor-arg name="NST">
        <ref bean="categoriesNST" />
    </constructor-arg>      
</bean>

<!-- Categories NST Table CFC -->
<bean id="categoriesNST" parent="config" class="core.com.categories.NestedSetTreeTable">
    <constructor-arg name="datasourceName">
        <value>${sDSN}</value>
    </constructor-arg>
    <constructor-arg name="table">
        <value>${sNSTTable}</value>
    </constructor-arg>
</bean> 
```

在类别引发错误之前，还有其他几个以这种方式加载的核心组件 - 因此该技术似乎正在工作，我可以访问我的核心组件，而无需在子应用程序的 Application.cfc 中显式实例化它们。但是，当它到达类别组件时，我收到以下错误：

> core.com.categories.categoryGateway 的 init() 期间的 Bean 创建异常
> 
> 组件 [core.com.categories.NestedSetTreeTable] 没有名称为 [getDatasource] 的函数：

如果我公开 getDatasource 方法，它似乎可以工作 - 但这似乎不正确，因为它在父应用程序中工作。

添加到我不熟悉的事物列表中，OOP 和继承......所以如果我完全错误地处理这个问题，请告诉我。我正在尝试将核心功能（用户管理、错误处理、验证和我倾向于在每个应用程序中重用的一堆东西）与特定应用程序功能（电子商务网站可能有一个购物车组件不需要例如 CMS），这样当我开发新功能时，我可以决定将其放入核心并使其可用于我的所有应用程序或特定应用程序。所以在这个例子中，我试图在父母的 Application.cfc 中加载核心功能，并让孩子自动能够使用它。理想情况下，孩子不必在 Coldspring.xml 中指定核心功能，但我'

任何帮助，非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T21:10:31.193

> 注入的组件包含一个私有方法“GetDatasource”，由 CategoryGateway 组件调用。

你在这里弄错了。如果`GetDatasource`是私有的`NestedSetTreeTable`，则`CategoryGateway`无权访问它。句号。

只能从组件本身调用私有方法，或者在`ComponentChild`扩展的情况下`ComponentParent`，`ComponentChild`可以从`ComponentParent`.

`CategoryGateway`将 a作为参数是无关紧要`NestedSetTreeTable`的：它不授予`CateoryGateway`对`NestedSetTreeTable's`方法的任何特殊访问权限。

Coldspring 在这里也无关紧要：它只是一种编组对象实例化的机制，它不赋予任何特殊权力，也不破坏方法访问规则。

所以在这种情况下 - 我不怀疑你看到你的环境之间的不同情况 - 你从你的问题中省略了一些关键信息。

# php - 在注册页面上提交带有 ajax 的表单

> ID：15865975
> 
> 赞同：2
> 
> 时间：2013-04-07T18:13:34.013
> 
> 标签：php, javascript, ajax

我是 AJAX 的新手。

我正在尝试使用以下逻辑提交带有 ajax 的表单：

```
//validate form

//if invalid never submit
//if valid, ajax request to get msg
   //get success html if no server side errors exist. Replace sign up page with success html
   //get fail message if server side errors exist, so the user can correct them (ex. invalid credit card no) 
```

我的 AJAX：

```
$("form").submit(function(e){
   if($(this).valid()) {

      $.ajax({
        url: 'formAction.php',
        type: 'POST',
        success: function(data){
           /*convert php variables to JavaScript ones*/
            if(success==true){
                 //relpace current page with confirmation
            }
            if(success==false){
                 //print out errors and allow user to re-submit
            }
        }                        
    });         

    }
    e.preventDefault;
}); 
```

我想知道我是否在这个实现的正确轨道上？或者如果这个实现是可能的？

我非常感谢任何有关使此实施工作的建议。

提前谢谢了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T18:15:48.533

```
$("form").submit(function(e){
   if($(this).valid()) {

      $.ajax({
        url: 'formAction.php',
        data: $(this).serialize(), //You need to provide this, serialize may work here
        type: 'POST', //Added single quote to prevent unterminated string literal
        success: function(data){
           //call was successful since success message was called
        },//Don't forget closing curly brace on function
        error: function(data){
           //Specify a call back for errors
        }                        
    });         

    }
    e.preventDefault;
}); 
```

# java - 如何实现 ContentProvider 为 Gmail、Facebook、Evernote 等提供图片

> ID：15865979
> 
> 赞同：7
> 
> 时间：2013-04-07T18:14:17.400
> 
> 标签：java, android, android-intent, android-contentprovider

我之前的问题（[Is it possible to share an image on Android via a data URL?](https://stackoverflow.com/questions/15851681/is-it-possible-to-share-an-image-on-android-via-a-data-url#comment22567773_15851681)）与这个问题有关。我已经想出了如何在没有权限将文件写入外部存储的情况下将图像从我的应用程序共享到另一个应用程序。但是，我仍然会遇到一些问题行为：

1.  当我尝试从我的手机（Android 2.2.2）共享图像时，接收应用程序中出现致命错误，并且它们根本没有提供图像。（这可能是由于我的应用程序中的某些操作在 Android 2.2.2 上不受支持？或者这会导致我的应用程序而不是目标应用程序出现错误？）
2.  当我尝试将图像共享到 Evernote 时，一切正常，但**有时**在保存笔记几秒钟后，我在应用程序屏幕底部（来自 Evernote 应用程序）收到一条消息：“java.lang.SecurityException：权限拒绝：从 ProcessRecord{413db6d0 1872:com.evernote/u0a10105}（pid=1872，uid=10105）打开提供程序 com.enigmadream.picturecode.PictureContentProvider 不是从 uid 10104 导出的“
3.  当我尝试将图片分享到 Facebook 时，图片有一个矩形，但里面没有图片。

下面是我的 ContentProvider 代码。必须有一种更简单和/或更合适的方式来实现基于文件的 ContentProvider（尤其是查询功能）。我预计很多问题都来自查询实现。有趣的是，这在我的 Nexus 7 上运行 GMail 时效果很好*。*它也会为附件选择正确的显示名称和大小。

```
public class PictureContentProvider extends ContentProvider implements AutoAnimate {
    public static final Uri CONTENT_URI = Uri.parse("content://com.enigmadream.picturecode.snapshot/picture.png");
    private static String[] mimeTypes = {"image/png"};
    private Uri generatedUri;

    @Override
    public int delete(Uri uri, String selection, String[] selectionArgs) {
       throw new RuntimeException("PictureContentProvider.delete not supported");
    }

    @Override
    public String getType(Uri uri) {
       return "image/png";
    }

    @Override
    public Uri insert(Uri uri, ContentValues values) {
       throw new RuntimeException("PictureContentProvider.insert not supported");
    }

    @Override
    public boolean onCreate() {
       generatedUri = Uri.EMPTY;
       return true;
    }

    @Override
    public Cursor query(Uri uri, String[] projection, String selection,
          String[] selectionArgs, String sortOrder) {
       long fileSize = 0;
       MatrixCursor result = new MatrixCursor(projection);
       File tempFile;
       try {
          tempFile = generatePictureFile(uri);
          fileSize = tempFile.length();
       } catch (FileNotFoundException ex) {
          return result;
       }
       Object[] row = new Object[projection.length];
       for (int i = 0; i < projection.length; i++) {

          if (projection[i].compareToIgnoreCase(MediaStore.MediaColumns.DISPLAY_NAME) == 0) {
             row[i] = getContext().getString(R.string.snapshot_displaystring);
          } else if (projection[i].compareToIgnoreCase(MediaStore.MediaColumns.SIZE) == 0) {
             row[i] = fileSize;
          } else if (projection[i].compareToIgnoreCase(MediaStore.MediaColumns.DATA) == 0) {
             row[i] = tempFile;
          } else if (projection[i].compareToIgnoreCase(MediaStore.MediaColumns.MIME_TYPE)==0) {
             row[i] = "image/png";
          }
       }

       result.addRow(row);
       return result;
    }

    @Override
    public int update(Uri uri, ContentValues values, String selection,
          String[] selectionArgs) {
       throw new RuntimeException("PictureContentProvider.update not supported");
    }

    @Override
    public String[] getStreamTypes(Uri uri, String mimeTypeFilter) {
       return mimeTypes;
    }

    private File generatePictureFile(Uri uri) throws FileNotFoundException {
       if (generatedUri.compareTo(uri)==0)
          return new File(getContext().getFilesDir(), "picture.png");;
          Context context = getContext();
          String query = uri.getQuery();
          String[] queryParts = query.split("&");
          String pictureCode = "016OA";
          int resolution = 36;
          int frame = 0;
          int padding = 0;
          for (String param : queryParts) {
             if (param.length() < 2)
                continue;
             if (param.substring(0,2).compareToIgnoreCase("p=") == 0) {             
                pictureCode = param.substring(2);
             } else if (param.substring(0,2).compareToIgnoreCase("r=") == 0) {
                resolution = Integer.parseInt(param.substring(2));              
             } else if (param.substring(0, 2).compareToIgnoreCase("f=") == 0) {
                frame = Integer.parseInt(param.substring(2));
             } else if (param.substring(0, 2).compareToIgnoreCase("a=") == 0) {
                padding = Integer.parseInt(param.substring(2));
             }
          }
          Bitmap picture = RenderPictureCode(pictureCode, resolution, frame, padding);
          File tempFile = new File(context.getFilesDir(), "picture.png");       
          FileOutputStream stream;
          stream = new FileOutputStream(tempFile);
          picture.compress(CompressFormat.PNG, 90, stream);
          try {
             stream.flush();
             stream.close();
          } catch (IOException e) {
             e.printStackTrace();
             throw new Error(e);
          }
          picture.recycle();
          generatedUri = uri;
          return tempFile;
    }

    @Override
    public ParcelFileDescriptor openFile(Uri uri, String mode) throws FileNotFoundException {
       File tempFile = generatePictureFile(uri);
       return ParcelFileDescriptor.open(tempFile, ParcelFileDescriptor.MODE_READ_ONLY);
    }
...
} 
```

我在 AndroidManifest.xml 文件中也有这个作为`<activity>`元素的兄弟：

```
 <provider 
        android:name="PictureContentProvider"
        android:authorities="com.enigmadream.picturecode.snapshot"
        android:grantUriPermissions="true"
        android:readPermission="com.enigmadream.picturecode.snapshot"
        tools:ignore="ExportedContentProvider">
        <grant-uri-permission android:path="/picture.png" />
    </provider> 
```

创建意图的代码如下所示：

```
 resolution = mPicView.getWidth();
        if (mPicView.getHeight() > resolution)
            resolution = mPicView.getHeight();
        String paddingText = mPadding.getEditableText().toString();
        int padding;
        try {
            padding = Integer.parseInt(paddingText);
        } catch (NumberFormatException ex) {
            padding = 0;
        }
        Uri uri = Uri.parse(PictureContentProvider.CONTENT_URI 
            + "?p=" + Uri.encode(mPicView.getPictureCode()) + "&r=" + Integer.toString(resolution) 
            + "&f=" + Integer.toString(mPicView.getFrame()) + "&a=" + Integer.toString(padding));
        Intent share = new Intent(Intent.ACTION_SEND);
        share.setType("image/png");
        share.putExtra(Intent.EXTRA_STREAM, uri);
        share.putExtra(Intent.EXTRA_SUBJECT, getString(R.string.share_subject_made));
        share.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);
        startActivity(Intent.createChooser(share, getString(R.id.menu_share))); 
```

**编辑** 当我的手机发生错误时，这是​​堆栈跟踪的前两行：

> 04-07 13:56:24.423: E/DatabaseUtils(19431): java.lang.SecurityException: Permission Denial: reading com.enigmadream.picturecode.PictureContentProvider uri content://com.enigmadream.picturecode.snapshot/picture.png? p=01v131&r=36&f=0&a=0 from pid=19025, uid=10062 需要 com.enigmadream.picturecode.snapshot
> 
> 04-07 13:56:24.423: E/DatabaseUtils(19431): 在 android.content.ContentProvider$Transport.enforceReadPermission(ContentProvider.java:271)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-10T20:55:49.730

由于该`query`方法，我在与某些电子邮件和消息传递客户端共享时遇到了问题。一些收件人应用程序发送`null`参数`projection`。发生这种情况时，您的代码会抛出一个`NullPointerException`. NPE 很容易解决。但是，发送的应用程序`null`仍然需要返回一些信息。我仍然无法分享到 Facebook，但我可以分享到我测试过的所有其他应用：

**编辑**我也不能让它与谷歌环聊一起工作。至少，我得到了一个祝酒词`You can't send this file on Hangouts. Try using a picture`。另请参阅此问题：[图片在通过 Google 环聊发送后被删除](https://stackoverflow.com/questions/21717591/picture-got-deleted-after-send-via-google-hangout)。我认为这是因为我正在使用私人内容，而环聊由于某种原因不能/不会接受它。

```
@Override
public Cursor query(Uri uri, String[] projection, String selection, String[] selectionArgs,
        String sortOrder) {
    if (projection == null) {
        projection = new String[] {
                MediaStore.MediaColumns.DISPLAY_NAME,
                MediaStore.MediaColumns.SIZE,
                MediaStore.MediaColumns._ID,
                MediaStore.MediaColumns.MIME_TYPE
        };
    }

    final long time = System.currentTimeMillis();
    MatrixCursor result = new MatrixCursor(projection);
    final File tempFile = generatePictureFile(uri);

    Object[] row = new Object[projection.length];
    for (int i = 0; i < projection.length; i++) {

       if (projection[i].compareToIgnoreCase(MediaStore.MediaColumns.DISPLAY_NAME) == 0) {
          row[i] = uri.getLastPathSegment();
       } else if (projection[i].compareToIgnoreCase(MediaStore.MediaColumns.SIZE) == 0) {
          row[i] = tempFile.length();
       } else if (projection[i].compareToIgnoreCase(MediaStore.MediaColumns.DATA) == 0) {
          row[i] = tempFile;
       } else if (projection[i].compareToIgnoreCase(MediaStore.MediaColumns.MIME_TYPE)==0) {
          row[i] = _mimeType;
       } else if (projection[i].compareToIgnoreCase(MediaStore.MediaColumns.DATE_ADDED)==0 ||
               projection[i].compareToIgnoreCase(MediaStore.MediaColumns.DATE_MODIFIED)==0 ||
               projection[i].compareToIgnoreCase("datetaken")==0) {
           row[i] = time;
       } else if (projection[i].compareToIgnoreCase(MediaStore.MediaColumns._ID)==0) {
           row[i] = 0;
       } else if (projection[i].compareToIgnoreCase("orientation")==0) {
           row[i] = "vertical";
       }
    }

    result.addRow(row);
    return result;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T19:19:27.957

> 我不熟悉我需要或不需要的权限或如何禁用它们

尝试更换：

```
<provider 
    android:name="PictureContentProvider"
    android:authorities="com.enigmadream.picturecode.snapshot"
    android:grantUriPermissions="true"
    android:readPermission="com.enigmadream.picturecode.snapshot"
    tools:ignore="ExportedContentProvider">
    <grant-uri-permission android:path="/picture.png" />
</provider> 
```

和：

```
<provider 
    android:name="PictureContentProvider"
    android:authorities="com.enigmadream.picturecode.snapshot"
    android:exported="true"
    tools:ignore="ExportedContentProvider">
</provider> 
```

你真的应该`android:exported="true"`在第一个中也有，但我所指的权限更改代表删除`android:readPermission`和`<grant-uri-permissions`>。

然后，摆脱`addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);`你的 Java 代码。

这使您`ContentProvider`成为世界可读的。从长远来看，这可能不是正确的答案。短期来看，这将有助于确定您的 Android 2.2.2 问题是否是因为`FLAG_GRANT_READ_URI_PERMISSION`没有被兑现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-02T01:11:27.310

有同样的问题，经过大量的研究和调试，这里是我的 5 美分：（在我的 android 2.3.3 和 4.2 设备上）

1.  Facebook 应用程序不会使用`openFile(Uri uri, String mode)`，因此我们必须为其提供具有**读取权限**的真实 URI（在 projection[i] == MediaStore.MediaColumns.DATA 中） 。
2.  你必须给 Facebook 它要求你的每一个投影，否则 FB-app 只会重复`query(Uri uri, String[] projection, String selection, String[] selectionArgs, String sortOrder)`

*这可能是一种黑客攻击，并且不适用于某些敏感数据，但您可以`file.setReadable(true, false);`在代码中的某处制作内部文件，facebook 将能够查看和发送 img。无需安卓外部存储权限。*如果 img 可读，则可能不需要内容提供程序。可以在 Intent 中发送链接。但是我在没有提供者的情况下有奇怪的 google+ 预览行为，所以决定保留它。没有很多设备可以测试，只使用 Twitter、FB、Google+、Skype、Gmail。目前工作正常

这是[**GitHub 演示**](https://github.com/varren/Screenshoter/tree/master/app/src/main/java/com/varren/screenshoter)：

# html - 是否可以仅使用 CSS 扩展文本区域？

> ID：15865982
> 
> 赞同：60
> 
> 时间：2013-04-07T18:14:32.297
> 
> 标签：html, css

我有一个高度为 200px 的 textarea，但是当我通过文本传递 200px 时，我希望扩展 textarea 而不是用滚动条保持 200px 的高度。

仅使用 CSS 可以做到这一点吗？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-04-07T18:24:33.093

而不是`textarea`，您可以使用`div`contentEditable[属性](https://developer.mozilla.org/en-US/docs/HTML/Content_Editable)：

```
div {
  display: inline-block;
  border: solid 1px #000;
  min-height: 200px;
  width: 300px;
}
```

```
<div contentEditable="true"></div>
```

[*演示*](http://jsfiddle.net/ARuce/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-07T19:39:29.030

用户可以只使用 CSS 来扩展 textarea。事实上，在一些现代浏览器中，这种可扩展性甚至是浏览器的默认设置。您可以明确要求它：

```
textarea { resize: both; } 
```

浏览器支持正在增长，但仍然有限。

通常只有一个关于可调整性的小提示：右下角的调整大小手柄。而且恐怕大多数用户不会理解这个提示。

您不能仅使用 CSS 通过内容*自动扩展文本区域。*

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-07T18:20:40.363

不，不可能只使用 css，但您可以使用 jquery：

```
$('#your_textarea').on('keydown', function(e){
    var that = $(this);
    if (that.scrollTop()) {
        $(this).height(function(i,h){
            return h + 20;
        });
    }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-01-27T17:53:41.817

不幸的是，没有，但是使用 JS 很容易：

```
let el = document.getElementById(`myTextarea`);
el.addEventListener("input", function() {
  if (el.scrollTop != 0)
    el.style.height = el.scrollHeight + "px";
}); 
```

就我而言，我有一个玩家姓名列表，我正在为每个玩家循环执行此操作。

```
 humansContainer.innerHTML = humans
                .map(
                  (h, i) =>
                    `<div><textarea id="human_${i}" type="text" value="${h}">${h}</textarea></div>`
                )
                .join("");
              humans.forEach((h, i) => {
                let el = document.getElementById(`human_${i}`);
                el.addEventListener("input", function(e) {
                  let name = el.value;
                  if (el.scrollTop != 0)
                    el.style.height = el.scrollHeight + "px";
                  humans[i] = name;
                });
              }); 
```

* * *

## 回答 #5

> 赞同：-12
> 
> 时间：2016-08-05T09:46:33.770

这是一个简单的、纯 php 和 html 的解决方案，不需要 js，使 textarea 适合大小。HTML： `<textarea rows="<?php echo linecount($sometext, 100, 3);?>" cols="100" name="sometext"><?php echo $sometext;?></textarea>`

```
 <?php
   /* (c)MyWeb.cool, 2014
   * -------------------------------------------------------------------------
   *Calculate number of rows in a textarea.
   *  Parms :   $text:      The contents of a textarea,
   *            $cols:      Number of columns in the textarea,
   *            $minrows:   Minimum number of rows in the textarea,
   *  Return:   $row:       The number of in textarea.
   * ---------------------------------------------------------------------- */
   function linecount($text, $cols, $minrows=1) {
   // Return minimum, if empty`
   if ($text <= '') {
    return $minrows;
   }
   // Calculate the amount of characters
   $rows = floor(strlen($text) / $cols)+1; 
   // Calculate the number of line-breaks
   $breaks = substr_count( $text, PHP_EOL );
   $rows = $rows + $breaks;
   if ($minrows >= $rows)   {
    $rows = $minrows;
   }
   // Return the number of rows
   return $rows;
   }
   ?> 
```

`而这个更短更好：

```
function linecount($text, $cols, $minrows=1) {
    if ($text <= '') {return $minrows;}
    $text = wordwrap($text, $cols, PHP_EOL);
    $rows = substr_count( $text, PHP_EOL )+1;
    if ($minrows >= $rows) {$rows = $minrows;}
    return $rows;
}
?> 
```

# java - 我的应用程序中的内存泄漏？代码中的垃圾收集是一种好习惯吗？

> ID：15865983
> 
> 赞同：2
> 
> 时间：2013-04-07T18:14:41.260
> 
> 标签：java, spring-mvc, garbage-collection

我正在使用 Spring 3.1 + Jetty 8.1.2 + Eclipse (Juno) 开发一个 Spring Web 应用程序。

我注意到当应用程序运行时，每次运行都会迅速消耗内存并且不会下降，即使在我停止运行它之后也是如此。

所以，根据我的研究，我插入

jlibs.core.lang.RuntimeUtil.gc();

在我处理用户请求的代码结束时。这行代码阻止内存使用率上升，内存使用率始终很低。

我的问题：

1.  你觉得我的应用程序有内存泄漏吗？

2.  在代码中运行垃圾收集是一种好习惯吗？垃圾收集的最佳实践（整体设计或 Spring 的情况）是什么？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T18:46:27.530

如果您的应用程序可以收回内存，那么它肯定不是内存泄漏。没有理由担心内存使用情况。

调用没有什么意义，`System.gc()`因为垃圾收集会在需要时这样做。如果内存使用没有达到限制，`Xmx`那么垃圾收集器就没有理由担心自己。

除非您`OutOfMemoryError`不关心 RAM 的使用。如果您想使用更少的 RAM，请减少分配给 JVM-reduce 的数量`Xmx`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T19:00:08.037

关于你的问题：

1.  您的应用程序可能仍会消耗不相关的资源，并且它们的内存消耗未释放（可能在 HEAP 上）。在这种情况下，运行 GC 是浪费时间，因为您的应用程序仍在引用这些资源/对象。

2.  众所周知，虚拟机会根据需要自动调用GC进行回收，所以答案是否定的，调用GC并不能解决你的问题。

我确实建议使用 Java Profiler 来查看未释放内存的高消耗情况并从那里继续。

此外，您可以使用一些 -X JVM 参数来增加内存，但如果您怀疑自己有“内存泄漏”，这只是临时解决方案。

# python - 在 Openerp 7 字段中隐藏字段 - XML

> ID：15865986
> 
> 赞同：-1
> 
> 时间：2013-04-07T18:15:25.340
> 
> 标签：python, openerp

我想为一家公司调整模块采购申请。

为了实现这一点，我需要隐藏这个模块的一些元素。

在 OpenErp 6 上，我知道您可以添加“position="replace"。

```
<field name="name" class="oe_inline" position="replace"/> 
```

在 OpenErp 7 上，这不能再完成。

在 OpenErp 7 上执行此操作的实际方法是什么？

任何帮助将不胜感激，在此先感谢！

* * *

Arya，谢谢，但它不会隐藏字段

看这个：

```
 <group>
       <field name="date_start" position="attributes"/>
       <attribute name="invisible">True</attribute>
       <field name="date_end" position="replace"/>
       <field name="warehouse_id" widget="selection" groups="stock.group_locations"/>
       <field name="company_id" groups="base.group_multi_company" widget="selection"/>
 </group> 
```

例如，我需要在这里只隐藏一个字段来进行测试，但它实际上并没有隐藏它，它会在“date_end”之前显示一个“True”字样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T18:42:57.907

`position="replace"`仍在使用 v7。

如果不想**替换**字段，可以`invisible="True"`在字段中添加属性。

像这样：

```
<field name="name"  position="attributes">
    <attribute name="invisible">True</attribute>
</field> 
```

确保您继承了正确的 xml。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T05:21:16.277

你的代码应该像

```
<group>
       <field name="date_start" position="attributes"><!--removed / from the end-->
       <attribute name="invisible">True</attribute>
       </field>
       <field name="date_end" position="replace"/>
       <field name="warehouse_id" widget="selection" groups="stock.group_locations"/>
       <field name="company_id" groups="base.group_multi_company" widget="selection"/>
 </group> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-09T15:48:21.020

在更改属性之前关闭字段的标签

```
<group>
       <field name="date_start" position="attributes">
           <attribute name="invisible">True</attribute>
       </field>
       <field name="date_end" position="replace"/>
       <field name="warehouse_id" widget="selection" groups="stock.group_locations"/>
       <field name="company_id" groups="base.group_multi_company" widget="selection"/>
 </group> 
```

# ios - Safari 中的 iOS 虚拟键盘：将“Go”更改为“Enter”

> ID：15865987
> 
> 赞同：4
> 
> 时间：2013-04-07T18:15:29.657
> 
> 标签：ios, web-applications, safari

我知道如果你有关键字“搜索”

```
<input type="search"> 
```

iOS 上的 Safari 可以识别这一点，并在虚拟键盘中显示“搜索”而不是“开始”。是否还有其他被识别的关键字？我想将其命名为“Enter”，因为在标签输入中，“Search”和“Go”都不是很有意义。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-07T18:25:24.930

至于今天，没有自定义返回键文本的空间。

Safari 移动版可以识别一个[固定](http://developer.apple.com/library/safari/#documentation/AppleApplications/Reference/SafariHTMLRef/Articles/InputTypes.html)的输入类型列表，但您只能设置其中一个并让 Safari 选择正确的键盘外观。

# android - 在更改/滑动选项卡时更新第二个选项卡的列表视图

> ID：15865996
> 
> 赞同：1
> 
> 时间：2013-04-07T18:16:17.250
> 
> 标签：android

我有两个`Fragments`连接到一个`FragmentActivity`.

第二个片段包含一个`ListView`. 我需要在更改选项卡/滑动时更新列表视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T19:12:14.197

您可以定义您`TabsViewPagerFragmentActivity`的实现：

```
public class TabsViewPagerFragmentActivity extends FragmentActivity implements ViewPager.OnPageChangeListener, TabHost.OnTabChangeListener 
```

然后在您的`FragmentActivity`类中定义以下方法：

```
/** (non-Javadoc)
 * @see android.widget.TabHost.OnTabChangeListener#onTabChanged(java.lang.String)
 */
public void onTabChanged(String tag) {
    //TabInfo newTab = this.mapTabInfo.get(tag);
    int pos = this.mTabHost.getCurrentTab();
    this.mViewPager.setCurrentItem(pos);
}

/* (non-Javadoc)
 * @see android.support.v4.view.ViewPager.OnPageChangeListener#onPageScrolled(int, float, int)
 */
@Override
public void onPageScrolled(int position, float positionOffset,
        int positionOffsetPixels) {
    // TODO Auto-generated method stub

}

/* (non-Javadoc)
 * @see android.support.v4.view.ViewPager.OnPageChangeListener#onPageSelected(int)
 */
@Override
public void onPageSelected(int position) {
    // TODO Auto-generated method stub
    this.mTabHost.setCurrentTab(position);
}

/* (non-Javadoc)
 * @see android.support.v4.view.ViewPager.OnPageChangeListener#onPageScrollStateChanged(int)
 */
@Override
public void onPageScrollStateChanged(int state) {
    // TODO Auto-generated method stub

} 
```

在那里你可以检查正在显示的片段并相应地更新它。

# asp.net - 通过单击菜单中的项目调用模态窗口

> ID：15865998
> 
> 赞同：1
> 
> 时间：2013-04-07T18:16:35.440
> 
> 标签：asp.net, twitter-bootstrap

我在**ASP.NET WebForms**上编写网络应用程序。在客户端我使用**Twitter Bootstrap**。

我知道如何通过单击按钮等来调用模态窗口，但是当我单击菜单中的项目时，我不知道如何调用模态窗口。

菜单

*   项目1

*   项目2

点击 item1 --> 调用模态窗口 A

点击 item2 --> 调用模态窗口 B

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T21:19:16.323

您可以使用 jquery 调用模式。因此，您可以将单击事件连接到列表项，并在单击列表项`.modal()`时调用该函数。这是一个例子：

```
$(document).ready(function() {
    $('#first').on('click', function() {    //<-- this would be your list item.
        $('#myModal').modal();              //<-- this would be your modal.
    });
 }); 
```

您还可以为第二个列表项重复上面的点击事件。

还有一个 jsFiddle 来看看：

[http://jsfiddle.net/Hvyty/](http://jsfiddle.net/Hvyty/)

或者，您可以简单地在菜单中使用锚标记：

```
<li>
    <a href="#myModal" role="button" class="btn" data-toggle="modal">Menu item 1</a>
</li> 
```

# prolog - 为什么这个 prolog 函数不返回所有有效值？（参数没有充分实例化）

> ID：15865999
> 
> 赞同：1
> 
> 时间：2013-04-07T18:16:48.243
> 
> 标签：prolog

我正在研究我在网上找到的一个示例，试图了解 Prolog 返回的内容。对于这里的代码...

```
element_at(X,[X|_],1).
element_at(X,[_|L],K) :- 
    K > 1, 
    K1 is K - 1, 
    element_at(X,L,K1). 
```

这有效...

```
?- element_at(x, [a,b,c,x,x,d,e], Pos). 
```

但这不是......我希望这段代码返回一个有效值列表，例如......

```
?- element_at(x, [a,b,c,x,x,d,e], Pos).
Pos = 4;
Pos = 5; 
```

但相反我得到`ERROR: >/2: Arguments are not sufficiently instantiated`

我要更改什么以使其返回有效值`Pos`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T20:56:05.070

借助SWI-Prolog 中可用的[声明性算术：](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%27A.7%27,swi%28%27/doc/Manual/clpfd.html%27%29%29)

```
:- [library(clpfd)].

element_at(X,[X|_],1).
element_at(X,[_|L],K) :-
    K #> 1,
    K1 #= K - 1,
    element_at(X,L,K1). 
```

我们得到了预期的声明性行为：

```
?- element_at(x, [a,b,c,x,x,d,e], Pos).
Pos = 4 ;
Pos = 5 ;
false. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T19:00:10.463

它不是那样工作的，因为为了使 Prolog 中的算术可行，您没有将正整数定义为 0 的后继。因此，对于算术比较，您需要两边都是有效的算术表达式，并且对于`succ(N,N1)`谓词在 SWI 中可用（例如 N1 为 N+1），您至少需要实例化两个参数中的一个。

SWI 有谓词`nth0/3`，`nth1/3`它们完全符合您的要求（参数顺序有点不同）。它是在 Prolog 中实现的，它的作用是查看 N 是变量还是正整数，然后调用`nth`返回所有索引的生成函数，或者`nth`选择第 N 个元素的确定性函数。

**这是从 SWI-Prolog 源代码中的 lists.pl 复制的！**

```
nth0(Index, List, Elem) :-
    (   integer(Index)
    ->  nth0_det(Index, List, Elem)     % take nth deterministically
    ;   var(Index)
    ->  List = [H|T],
        nth_gen(T, Elem, H, 0, Index)   % match
    ;   must_be(integer, Index)
    ). 
```

注意如何`nth_gen`需要以 0 为种子，以便它可以计算当前正在比较的元素的索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T18:46:11.593

如果您查看您的代码，您会看到 K 在 x 是列表的第一个元素时被初始化。如果不是这种情况，则增加 K。如果调用谓词时 x 不是列表的第一个元素，则 K 没有值！