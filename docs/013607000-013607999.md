# StackOverflow 问答 13607000-13607999

# php - Wordpress XML 生成需要帮助

> ID：13607003
> 
> 赞同：-2
> 
> 时间：2012-11-28T14:09:31.090
> 
> 标签：php, xml, wordpress

您好，谁能帮助我，我需要从 wordpress 最近的帖子生成自定义 xml 文件，我该怎么做？我需要在 Windows 8 的瓷砖中使用。请问如何使用 wordpress 生成 xml 文件？我希望生成的格式是

```
<tile>
  <visual>
    <binding template="TileWideText09">
       <text id="1">wordpress auto title here</text>
       <text id="2">wordpress auto description here</text>
    </binding>
  </visual>
</tile> 
```

我不知道该怎么做，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:17:00.457

您需要在 Wordpress 中查询您想要使用的帖子，例如使用[`wp_query()`.](http://codex.wordpress.org/Class_Reference/WP_Query#Usage) （如果您习惯使用 The Loop）或使用[`get_posts()`](http://codex.wordpress.org/Template_Tags/get_posts) （更“编程”的方式）。

使用生成的数据，然后构建 XML 输出，如 [如何使用 PHP 动态生成 XML 文件？](https://stackoverflow.com/q/486757)

# ios - 从孩子展开后，如何强制我的父 ViewController 重新加载？

> ID：13607006
> 
> 赞同：2
> 
> 时间：2012-11-28T14:09:32.557
> 
> 标签：ios, ios6, segue

我有一个父 VC，我想拜访一个孩子，在拜访了孩子之后，我希望用户按下导航栏中的后退按钮。当显示父 VC 时，我希望它刷新，以便显示子项中所做的更改。

在展开期间，我想传回一个数组，因此想显示该数组中的信息。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T14:14:35.370

如果您将刷新代码放在 ViewController 中的 viewDidAppear 中，则应在显示 ViewController 的任何时候调用它。因此，它将在最初显示，并在按下后退按钮后显示。

这与将它放在 viewDidLoad 中不同，viewDidLoad 只会在第一次加载 ViewController 时调用。

# objective-c - Objective-C 中的 @[] 和 @{} 是什么？

> ID：13607007
> 
> 赞同：5
> 
> 时间：2012-11-28T14:09:34.583
> 
> 标签：objective-c, nsmutablearray, equals, nsmutabledictionary

> **可能重复：**
> [Xcode 4.4 发行说明中提到的“Objective-C Literals”的细节是什么？](https://stackoverflow.com/questions/9347722/what-are-the-details-of-objective-c-literals-mentioned-in-the-xcode-4-4-releas)

我对`@[]`和有疑问`@{}`。

部分代码取自互联网：

```
self.searches = [@[] mutableCopy]; 
self.searchResults = [@{} mutableCopy]; 
```

1.  `@[]`等于`[NSMutableDictionary dictionary]`? _
2.  `@{}`等于`[NSMutableArray array]`? _

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-28T14:12:25.827

1.  编号`@[]`等于`[NSArray array]`或`[[NSArray alloc] init]`。
2.  编号`@{}`等于`[NSDictionary dictionary]`或`[[NSDictionary alloc] init]`。

（取决于上下文以及您是否使用[自动引用计数（ARC）](http://developer.apple.com/library/ios/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)）

这就是为什么你`[@[] mutableCopy]`有时会看到这样的事情。这将创建一个空的不可变数组并创建它的可变副本。

结果与使用`[NSMutableDictionary dictionary]`or相同`[[NSMutableDictionary alloc] init]`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T14:12:10.507

`@{}`等于`[NSDictionary dictionary]`

`@[]`等于`[NSArray array]`

所以`[@[] mutableCopy]`创建一个空的不可变对象，然后创建它的可变副本。我认为你不能降低效率。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T14:15:33.917

第一个**@[]**是创建 Array 的简写，例如以下两个元素的数组：

```
NSArray *array = @[ @"First", @"Second"]; 
```

第二个**@{}**创建一个字典，例如：

```
NSDictionary *dictionary = @{
    @"first" : someValue,
    @"second" : someValue,
}; 
```

# wso2esb - 在代理中介中 get-property('To') 返回意外值

> ID：13607008
> 
> 赞同：2
> 
> 时间：2012-11-28T14:09:41.243
> 
> 标签：wso2esb, ws-addressing

我对 WSO2 ESB 中介有一个奇怪的问题。产品版本：WSO2 ESB 4.5.1

中介代码如下所示：

```
<proxy xmlns="http://ws.apache.org/ns/synapse" name="CacheWSAPrx" transports="https,http" statistics="disable" trace="enable" startOnLoad="true">
   <target>
  <inSequence>
     <log level="full">
        <property xmlns:wsa="http://schemas.xmlsoap.org/ws/2004/08/addressing" name="WSA_To" expression="get-property('To')"/>
     </log>
     <send>
        <endpoint>
           <address uri="http://localhost:9083/TestCacheWeb/sca/MaketWSSoapExport1"/>
        </endpoint>
     </send>
  </inSequence>
  <outSequence>
     <send>
        <endpoint>
           <default/>
        </endpoint>
     </send>
  </outSequence>
 </target>
 <publishWSDL key="conf:/repository/wsdl/service.wsdl"/>
 <description></description>
 </proxy> 
```

当我尝试使用soapUI 4.0.1 调用此服务时，日志调解器打印出 WSA_To 属性值（由 get-property('To') 函数填充）是**/services/CacheWSAPrx**。这对我来说很奇怪和意外，因为通过 soapUI 发送的 SOAP 请求在**To**标头中包含另一个值：

```
<soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing"><wsa:Action>http://eisgkh.ru/maket/ws/Maket.WS2.Service.Action</wsa:Action><wsa:To>http://www.exampleaddr.com</wsa:To></soapenv:Header> 
```

所以，我的问题是：为什么 get-property('To') 返回**/services/CacheWSAPrx**值，我认为它必须返回**http://www.exampleaddr.com**？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T08:06:15.477

不，如果您想获取**http://www.exampleaddr.com**，**get-property**不是必需的表达式。关注[http://rajikak.blogspot.com/2010/04/xpath-functions-and-properties-avilable.html](http://rajikak.blogspot.com/2010/04/xpath-functions-and-properties-avilable.html)。你可能需要像**$header/wsa:To**这样的东西来得到你想要的东西。当使用**get-property**时，它会像我想的那样从*MessageContext获取一个属性。*

# mysql - MySQL 使用 sum 和 left join 将结果翻倍

> ID：13607009
> 
> 赞同：0
> 
> 时间：2012-11-28T14:09:42.567
> 
> 标签：mysql, sum, left-join

我有一个三表设置：孩子、玩具和游戏，每个都有唯一的主键：id_kid、id_toy 和 id_game。每个孩子可以拥有多个玩具和游戏，但每个玩具或游戏只有一个孩子拥有。

玩具和游戏有一个带有 3 个状态的购买列：-1,0,1 表结构是这样的：

```
kids

id_kid
kid_name
etc

games

id_game
id_kid_games --> links with id_kid in kids_table (maybe not the best name, I know)
game_name
bought --> can be -1,0,1

toys

id_toy
id_kid_toys --> links with id_kid in kids_table
toy_name
bought --> can be -1,0,1 
```

对于每个孩子，我尝试使用下面的查询获得购买和未购买的玩具和游戏的总数，但是结果翻了一番：

```
SELECT kids.*, 

COUNT(DISTINCT toys.id_toy) AS total_toys, 
SUM(CASE toys.bought WHEN 1 THEN 1 ELSE 0 END) AS toys_bought, 
SUM(CASE toys.bought WHEN -1 THEN 1 ELSE 0 END) AS toys_not_bought, 

COUNT(DISTINCT games.id_game) AS total_games, 
SUM(CASE games.bought WHEN 1 THEN 1 ELSE 0 END) AS games_bought, 
SUM(CASE games.bought WHEN -1 THEN 1 ELSE 0 END) AS games_not_bought 

FROM kids as k 
LEFT JOIN toys t ON k.id_kid = t.id_kid_toys
LEFT JOIN games g ON k.id_kid = g.id_kid_games
GROUP BY k.id_kid
ORDER BY k.name ASC 
```

一个孩子有 2 个玩具和 4 个游戏，都买了，结果是总共 2 个玩具（正确），总共 4 个游戏（正确），买了 8 个玩具，买了 8 个游戏。（都错了）

请帮助回答 - 如果可能的话 - 不使用子选择。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T17:45:37.303

当您从两个不相关的关系（孩子加入玩具，孩子加入游戏）中选择数据时，子查询是执行此操作的自然方式。由于可能会使用不相关的子查询，因此这应该不会特别慢。

试试这个查询是否足够有效：

与您的原始查询相比，它基本上只是颠倒了加入和分组的顺序。

```
SELECT kids.*, t.total_toys, t.toys_bought, t.toys_not_bought,
               g.total_games, g.games_bought, g.games_not_bought
FROM kids
LEFT JOIN (SELECT id_kids_toys,
                  COUNT(*) AS total_toys,
                  SUM(CASE bought WHEN 1 THEN 1 ELSE 0 END) as toys_bought,
                  SUM(CASE bought WHEN -1 THEN 1 ELSE 0 END) as toys_not_bought
           FROM toys
           GROUP BY id_kids_toys) AS t
ON t.id_kids_toys = kids.id_kid
LEFT JOIN (SELECT id_kids_games,
                  COUNT(*) AS total_games,
                  SUM(CASE bought WHEN 1 THEN 1 ELSE 0 END) as games_bought,
                  SUM(CASE bought WHEN -1 THEN 1 ELSE 0 END) as games_not_bought
           FROM games
           GROUP BY id_kids_games) AS g
ON g.id_kids_games = kids.id_kid
ORDER by kids.name; 
```

如果您坚持避免使用子查询，那么这个查询可能会效率低得多：

```
SELECT kids.*, 
COUNT(DISTINCT toys.id_toy) AS total_toys, 

-- sum only toys joined to first game
SUM(IF(g2.id_game IS NULL AND bought = 1, 1, 0)) AS toys_bought, 
SUM(IF(g2.id_game IS NULL AND bought = -1, 1, 0)) AS toys_not_bought, 

-- sum only games joined to first toy
COUNT(DISTINCT games.id_game) AS total_games, 
SUM(IF(t2.id_toy IS NULL AND bought = 1, 1, 0)) AS games_bought, 
SUM(IF(t2.id_toy IS NULL AND bought = -1, 1, 0)) AS games_not_bought 

FROM kids as k 
LEFT JOIN toys t ON k.id_kid = t.id_kid_toys
LEFT JOIN games g ON k.id_kid = g.id_kid_games

-- select only rows where either game or toy is the first one for this kid
LEFT JOIN toys t2 on k.id_kid = t.id_kid_toys AND t2.id_toy < t.id_toy
LEFT JOIN games g2 ON k.id_kid = g.id_kid_games AND g2.id_game < g.id_game 
WHERE t2.id_toy IS NULL OR g2.id_game IS NULL

GROUP BY k.id_kid
ORDER BY k.name ASC 
```

它的工作原理是确保对于每个孩子，只计算加入第一个玩具的游戏，并且只计算加入第一个游戏的玩具。

# hp-quality-center - HPQC - 使用脚本编辑器在 TestPlan 中添加功能

> ID：13607011
> 
> 赞同：0
> 
> 时间：2012-11-28T14:09:48.040
> 
> 标签：hp-quality-center

我想在 HPQC 的“TestPlan”工具栏中新添加的按钮中添加一些功能。我浏览了 HPQC 中的脚本编辑器，但我不确定代码交付是如何完成的（过程）。请与我分享任何可能有帮助的链接/指针。

# html - Titanium Empty 应用程序立即退出模拟器

> ID：13607012
> 
> 赞同：3
> 
> 时间：2012-11-28T14:09:48.373
> 
> 标签：html, ios, titanium, accelerator

我正在使用基于 HTML(5) 的（web）移动应用程序进行一些测试，我想检查不同软件包（如 Titanium）和例如 Phonegap 的性能。

我用 phonegap 进行了一些测试，这些测试在性能方面非常令人失望，所以现在我想试试 Titanium。

作为一名网络开发人员，基于 HTML 的应用程序对我来说是最合乎逻辑的选择，我真正想要的是看看我编写的应用程序在编译后将如何运行。

所以.. 安装 en 注册 Titanium 后，我选择“基于 HTML 的应用程序”并想运行 iPhone 模拟器。但是模拟器退出时没有显示任何内容。

日志：

```
[INFO] One moment, building ...
[INFO] Titanium SDK version: 2.1.4 (11/09/12 12:46 51f2c64)
[INFO] iPhone Device family: universal
[INFO] iPhone SDK version: 6.0
[INFO] iPhone simulated device: iphone
[INFO] Performing full rebuild. This will take a little bit. Hold tight...
[INFO] Minimum iOS version: 4.3 Linked iOS Version 6.0
[INFO] Compiling localization files
[INFO] Launching application in Simulator
[INFO] Launched application in Simulator (22.53 seconds)
[INFO] Application has exited from Simulator` 
```

也没有真正的帮助，模拟器在 22.53 秒后基本关闭。

我在这里做错了吗？我认为 Titanium 提供的模板应该几乎可以在不更改任何内容的情况下运行..

提前致谢！

**编辑：** 我创建了一个新的、干净的项目，也有这个问题。相同的日志如上所示，运行一个干净的项目会启动模拟器并立即关闭它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:32:44.210

花了一段时间，很多很多的挫折。我在 Titanium 自己的问答板上问了同样的问题，但没有回应。

最后修复它的是删除 iPhone Simulator 文件夹的内容

`/Users/<USER>/Library/Application Support/iPhone Simulator`删除此**内容**并在模拟器中运行项目对我有用。

希望它可以帮助某人！

# php - 将外部安全主体翻译/解码为可读名称

> ID：13607021
> 
> 赞同：2
> 
> 时间：2012-11-28T14:10:08.890
> 
> 标签：php, mysql, active-directory

我创建了一个 PHP 脚本，它将查询 LDAP 服务器，查看组列表，然后获取每个组的成员数组并将结果转储到 MySQL 数据库中。这一切都很好，但有时我得到一个外国安全主体而不是一个用户。这个练习的重点是将此成员列表转换为非 IT 人员可读的列表，因此理想情况下，我需要名字、姓氏，如果可能，还需要用户名。然而，外国安全负责人只是一串数字。

我们有大约 80 多个不同的受信任域，它可能来自，那么我怎样才能计算出这个外国帐户属于哪个域，以及我可以用来搜索其他域的用户的属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:24:28.243

数字串应该是用户的 SID（例如 S-1-5-...）。这是您将用于搜索的属性。

SID 的第一部分是域的 SID，例如 S-1-5-21-1234567890-1234567890-1234567890。您应该枚举域的信任，并找到具有该 SID 的域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-17T22:29:34.880

在 AD-LDS/ADAM 目录中，foreignSecurityPrincipal 上名为“msDS-PrincipalName”的属性包含“domain\samAccountName”。示例：“CONTOSO\jdoe”

不幸的是，这似乎不适用于 Active Directory FSP。

请参阅：msDS-BindProxy [https://msdn.microsoft.com/en-us/library/cc221582.aspx](https://msdn.microsoft.com/en-us/library/cc221582.aspx)

# python - 在加权网络中找到“渗透”阈值的算法

> ID：13607022
> 
> 赞同：6
> 
> 时间：2012-11-28T14:10:09.320
> 
> 标签：python, analysis, networkx

我有一些由转移概率链接的状态（嵌入在转移矩阵中，如马尔可夫链中）。我想通过只考虑足够高的概率来总结这个转换矩阵，它们允许从一个状态（~节点）到另一个状态（我的转换矩阵中的第一个和最后一个）。一个阈值，如果我只考虑更高的概率，我的转换矩阵永远不允许从第一个状态（或节点）移动到最后一个状态。

***两个问题***：

是否有一些众所周知的库（最好是 python 语言）实现了这种方法？我的天真/经验/原型方法将是一个降低阈值值的循环，然后检查我是否可以从第一个状态流过转换矩阵到最后一个状态（距离矩阵中的最佳路径算法？）。但这可能需要非常高的计算时间？

```
Example 1: 
DistMatrix = [[       'a',   'b',     'c',    'd'], 
             ['a',  0,      0.3,    0.4,    0.1],
             ['b',   0.3,    0,      0.9,    0.2],
             ['c',   0.4,    0.9,    0,      0.7],
             ['d',   0.1,    0.2,    0.7,   0]]  
    states are a,b,c,d. I want to find the value (threshold) that allow to go from a to d (no matter if other states are walked)  
    Naive approach:
    - first loop: threshold 0.9, I get rid of lesser probabilities: I can only connect c and b 
    - second loop: threshold 0.7, I get rid of lesser probabilities: I can only connect c, b, d
    - third loop: threshold 0.4, I get rid of lesser probabilities: I can connect a,c, b, d: here is my threshold: 0.4 
```

--> 一旦我的转换矩阵有数千个状态，应该会非常复杂？--> 算法建议？

```
Example 2:
DistMatrix =
[       'a',   'b',     'c',    'd'],
['a',   0,      0.3,    0.4,    0.7],
['b',   0.3,    0,      0.9,    0.2],
['c',   0.4,    0.9,    0,      0.1],
['d',   0.7,    0.2,    0.1,    0] ] 
states are a,b,c,d. I want to find the value (threshold) that allow to go from a to d (no matter if other states are walked) 
Naive approach:
-first loop: threshold 0.9, I get rid of all others: I can only connect c and b
-second loop: threshold 0.7, I get rid of lesser connexion: I connect b and c, and a and d but because a and d are connected, I have my threshold! 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-04T01:02:22.520

为了扩展 E 先生的建议，这里有两个版本的算法，可以在具有几千个节点的图上正常工作。两个版本都使用[Numpy](http://numpy.scipy.org/)，第二个版本也使用[NetworkX](http://networkx.lanl.gov/index.html)。

您需要去掉“a”、“b”、“c”和“d”标识符才能使用 Numpy 数组。这很容易通过将节点名称转换为 0 和`len(nodes)`. 您的数组应如下所示

```
DistMatrix1 = np.array([[0,      0.3,    0.4,    0.1],
                        [0.3,    0,      0.9,    0.2],
                        [0.4,    0.9,    0,      0.7],
                        [0.1,    0.2,    0.7,   0]])

DistMatrix2 = np.array([[0,      0.3,    0.4,    0.7],
                        [0.3,    0,      0.9,    0.2],
                        [0.4,    0.9,    0,      0.1],
                        [0.7,    0.2,    0.1,    0]]) 
```

用于`numpy.unique`获取距离矩阵中所有概率的排序数组。然后，按照 E 先生的建议，执行标准的二分搜索。在二分搜索的每一步，如果矩阵中的条目低于当前概率，则将它们替换为 0。在图上运行广度优先搜索，从第一个节点开始，看看是否到达最后一个节点。如果这样做，则阈值较高，否则，阈值较低。bfs 代码实际上是改编自 NetworkX 版本。

```
import numpy as np

def find_threshold_bfs(array):
    first_node = 0
    last_node = len(array) - 1
    probabilities = np.unique(array.ravel())
    low = 0
    high = len(probabilities)

    while high - low > 1:
        i = (high + low) // 2
        prob = probabilities[i]
        copied_array = np.array(array)
        copied_array[copied_array < prob] = 0.0
        if bfs(copied_array, first_node, last_node):
            low = i
        else:
            high = i

    return probabilities[low]

def bfs(graph, source, dest):
    """Perform breadth-first search starting at source. If dest is reached,
    return True, otherwise, return False."""
    # Based on http://www.ics.uci.edu/~eppstein/PADS/BFS.py
    # by D. Eppstein, July 2004.
    visited = set([source])
    nodes = np.arange(0, len(graph))
    stack = [(source, nodes[graph[source] > 0])]
    while stack:
        parent, children = stack[0]
        for child in children:
            if child == dest:
                return True
            if child not in visited:
                visited.add(child)
                stack.append((child, nodes[graph[child] > 0]))
        stack.pop(0)
    return False 
```

较慢但较短的版本使用 NetworkX。在二分查找中，不是运行 bfs，而是将矩阵转换为 NetworkX 图，并检查是否存在从第一个节点到最后一个节点的路径。如果有路径，则阈值较高，如果没有路径，则阈值较低。这很慢，因为 NetworkX 中的所有图形数据结构都比 Numpy 数组效率低得多。但是，它的优点是可以访问许多其他有用的算法。

```
import networkx as nx
import numpy as np

def find_threshold_nx(array):
    """Return the threshold value for adjacency matrix in array."""
    first_node = 0
    last_node = len(array) - 1
    probabilities = np.unique(array.ravel())
    low = 0
    high = len(probabilities)

    while high - low > 1:
        i = (high + low) // 2
        prob = probabilities[i]
        copied_array = np.array(array)
        copied_array[copied_array < prob] = 0.0
        graph = nx.from_numpy_matrix(copied_array)
        if nx.has_path(graph, first_node, last_node):
            low = i
        else:
            high = i

    return probabilities[low] 
```

NetworkX 版本在超过一千个节点左右的图上崩溃（在我的笔记本电脑上）。bfs 版本很容易找到数千个节点的图的阈值。

代码的示例运行如下。

```
In [5]: from percolation import *

In [6]: print('Threshold is {}'.format(find_threshold_bfs(DistMatrix1)))
Threshold is 0.4

In [7]: print('Threshold is {}'.format(find_threshold_bfs(DistMatrix2)))
Threshold is 0.7

In [10]: big = np.random.random((6000, 6000))

In [11]: print('Threshold is {}'.format(find_threshold_bfs(big)))
Threshold is 0.999766933071 
```

对于时间安排，我得到（在半新的 Macbook Pro 上）：

```
In [5]: smaller = np.random.random((100, 100))

In [6]: larger = np.random.random((800, 800))

In [7]: %timeit find_threshold_bfs(smaller)
100 loops, best of 3: 11.3 ms per loop

In [8]: %timeit find_threshold_nx(smaller)
10 loops, best of 3: 94.9 ms per loop

In [9]: %timeit find_threshold_bfs(larger)
1 loops, best of 3: 207 ms per loop

In [10]: %timeit find_threshold_nx(larger)
1 loops, best of 3: 6 s per loop 
```

希望这可以帮助。

## 更新

我修改了 bfs 代码，使其在到达目标节点时停止。上面的代码和时间已经更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T14:24:12.530

不确定我是否正确解释了您的问题，但是：

`a`假设您有一个候选阈值，并且您想确定和之间是否存在路径`d`。`a`您可以通过在阈值图上执行简单的深度优先搜索并查看是否`d`已访问所需的端节点来检查哪些节点是可访问的。

要真正找到阈值，您知道它必须介于零和图表中的最大转换概率（此处为 0.9）之间。因此，您可以对阈值执行二进制搜索，在每个阶段使用深度优先搜索来检查您是否有 和 之间的`a`路径`d`。

# c# - SignalR 演示不工作

> ID：13607028
> 
> 赞同：7
> 
> 时间：2012-11-28T14:10:31.070
> 
> 标签：c#, asp.net-mvc, nuget, signalr

我正在关注这个关于开始 SignalR 项目的快速教程，在我的 Hub 课程中，我有以下内容

```
using Microsoft.AspNet.SignalR.Hubs;

namespace MvcApplication8.Hubs
{
    public class ChatHub : Hub
    {
        public void BroadcastMessage(string message)
        {
            Clients.writeMessage(message);
        }
    }
} 
```

客户端代码：

```
 $(document).ready(function () {
        var chat = $.connection.chatHub;
        chat.writeMessage = function(msg) {
            $("#messages").append("<li>" + msg + "</li>");
        };
        $("#buttonSubmit").click(function () {
            chat.broadcastMessage($("#txtInput").val());
        });
        $.connection.hub.start();
    }); 
```

但是我收到一个编译时错误说：

> “Microsoft.AspNet.SignalR.Hubs.HubConnectionContext”不包含“writeMessage”的定义，并且没有扩展方法“writeMessage”接受“Microsoft.AspNet.SignalR.Hubs.HubConnectionContext”类型的第一个参数（你是缺少 using 指令或程序集引用？）

哪里出错了？

我使用包管理器控制台“Install-Package Microsoft.AspNet.SignalR -Pre”从[http://nuget.org/packages/microsoft.aspnet.signalr](http://nuget.org/packages/microsoft.aspnet.signalr)将SignalR 安装到我的项目中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:45:34.280

您是否创建了相应的客户端功能？

```
<script type="text/javascript">
    $(function () {
        var chat = $.connection.chat;
        chat.writeMessage = function (message) {
            $('#messages').append('<li>' + message + '</li>');
        };
        $.connection.hub.start();
    });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T17:59:01.513

检查您是否安装了以下软件包：

*   Microsoft.AspNet.SignalR
*   Microsoft.AspNet.SignalR.Core
*   Microsoft.AspNet.SignalR.Hosting.AspNet
*   Microsoft.AspNet.SignalR.Hosting.Common

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-06T18:11:43.760

尝试更新 NuGet 包。工具 > NuGet 包管理器 > 管理解决方案的 NuGet 包，在窗口的左侧单击“更新”，在窗口的中央部分，您将获得要更新的包列表，然后单击包上的“安装”你喜欢获取最新版本。我更新了所有：JQuery、Json.NET、Microsoft ASP.NET SignalR、Microsoft.Owin

将包更新到最新版本（SignalR 目前为 2.2.0）后，您可以编译。不要忘记“StockTicker.html”中的更新引用，在我的情况下，更新后看起来像：

```
<script src="/Scripts/jquery-2.1.4.min.js"></script>
<script src="/Scripts/jquery.signalR-2.2.0.js"></script> 
```

# html - 从 html 页面创建 wordpress 主题

> ID：13607029
> 
> 赞同：1
> 
> 时间：2012-11-28T14:10:33.613
> 
> 标签：html, wordpress, dreamweaver

我在 Dreamweaver 中创建了一个 HTML 网站，它有一个索引页面、导航菜单和大约 10 个其他链接页面。我没有从我刚刚复制和粘贴的模板构建网站。

我想使用 Wordpress 上传这个网站，而我以前从未这样做过。我仍在学习，但需要帮助解决问题；我看到为了将页面上传到 Wordpress，我需要创建一个所谓的主题，为此我需要创建不同的文件，如 index.php、header.php、footer.php 等我的问题是我有对我的所有页面执行该过程？

我的意思是 about.html contact.html jobs.html？

理想的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T14:26:11.773

WordPress 模板本质上是一组 PHP 页面和 CSS，用于定义 WordPress 网站的外观。[模板开发链接](http://codex.wordpress.org/Theme_Development)

手动转换您的网站需要时间。WordPress 网站的优势在于您的网站将更容易更新。

* * *

构建模板和页面的难度实际上取决于构建原始 CSS 和页面的干净程度。

***首先***，构建您的模板。您将尝试提取 CSS 并将其应用到模板页面。

***接下来***，您将需要使用 WordPress GUI 界面来添加页面并包含原始站点中的内容。

同样，这将归结为您的格式有多少是内联完成的，以及您在演示文稿中利用了多少 CSS。例如，很多表格格式会更难翻译。

# objective-c - 两个目标 一个通用应用程序

> ID：13607037
> 
> 赞同：2
> 
> 时间：2012-11-28T14:11:10.497
> 
> 标签：objective-c, ios, xcode

我有一个 iPhone Xcode 项目，我复制了我的应用程序目标，现在我有两个目标：1\. 用于 iPhone 2\. 用于 iPad

如何从这两个目标构建一个应用程序？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:34:56.363

您不需要两个目标，只需两个具有不同名称的 nib 文件，并且在 init 方法中执行此操作：-

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    NSString *nibName=nil;
  (isiPad?)nibName=@"Course_iPad":nibName=@"Course";
    self = [super initWithNibName:nibName bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
} 
```

或者

```
HelpPeiceSetting *objHelpPieceSetting=[[HelpPeiceSetting alloc] initWithNibName:isiPad?@"HelpPeiceSetting_iPhone5":@"HelpPeiceSetting" bundle:nil];
            [self.navigationController pushViewController:objHelpPieceSetting animated:YES];
            [objHelpPieceSetting release]; 
```

在推动 obj 时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T14:16:00.967

您不能，您需要将目标更改为通用应用程序。

通用应用程序只是一个应用程序，而不是两个应用程序。在项目文件中，您可以`iOS Application Target`将`Universal`. 这将使应用程序在 iPhone 和 iPad 上运行。

如果您`~ipad`在 nib 名称中使用 ，系统可以自动加载正确的 nib 文件，例如`AboutViewConntroller.xib`iPhone 和`AboutViewConntroller~ipad.xib`ipad。

当您仍然可以像这样加载视图控制器时：

```
AboutViewConntroller *viewController = [[AboutViewConntroller alloc] initWithNibName:@"AboutViewConntroller" bundle:nil]; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-28T14:18:16.980

您可以从左上角靠近 RUN、STOP 按钮的 Scheme 下拉菜单中选择不同的目标。如果您没有这些选项可用，您可以从方案下拉菜单中选择“编辑方案”，并为不同的目标复制方案。

# windows - Windows RT IE10 与 Windows 8 IE10

> ID：13607040
> 
> 赞同：0
> 
> 时间：2012-11-28T14:11:29.267
> 
> 标签：windows, windows-8, internet-explorer-10, windows-rt

Windows RT 上的 IE10 和 Windows 8 上的 IE10 有什么区别？两个平台上的 IE10 是否具有相同的 HTML、CSS 和脚本引擎？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T17:17:27.377

是同一个浏览器。主要区别在于用户代理字符串。在 Windows RT 上，体系结构标记是“Arm”，而在 Windows 上它不存在，“WOW64”或“Win64；x64”：http: [//blogs.msdn.com/b/ie/archive/2012/07/12 /ie10-user-agent-string-update.aspx](http://blogs.msdn.com/b/ie/archive/2012/07/12/ie10-user-agent-string-update.aspx)

您可以在 HTML5test 之类的网站上看到，Windows RT 和 Windows 8 浏览器的得分相同。

# c# - Lambda检查列表是否包含所有属性的某些属性值

> ID：13607042
> 
> 赞同：2
> 
> 时间：2012-11-28T14:11:35.157
> 
> 标签：c#, asp.net, linq, lambda

在该主题中很难解释，但我如何知道所有列表是否`x.someprop`与值匹配`7`？换句话说，如果下面的过滤器返回整个列表：

```
myList.Where( x => x.someprop == 7).ToList(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T14:12:41.027

采用[`Enumerable.All`](http://msdn.microsoft.com/en-us/library/bb548541.aspx)

```
bool result = myList.All( x => x.someprop == 7); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T14:21:01.307

您可以反转条件并使用[Any](http://msdn.microsoft.com/en-us/library/bb534972.aspx)

```
bool areAllSeven = myList.Any(x => x.someprop != 7); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T14:12:47.080

你有多努力寻找答案？

```
bool areAllEqualToSeven = myList.All( x => x.someprop == 7); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T14:13:07.017

该方法的名称很容易记住[**`All`**](http://msdn.microsoft.com/en-us/library/bb548541.aspx)：

```
bool allSeven = myList.All(x => x.someprop == 7); 
```

> 此方法不会返回集合的所有元素。相反，它确定集合的所有元素是否满足条件。

# hibernate - 有多个实体管理器时如何只导入一次 import.sql？

> ID：13607043
> 
> 赞同：1
> 
> 时间：2012-11-28T14:11:44.520
> 
> 标签：hibernate, import, hsqldb

有谁知道我如何只导入文件 import.sql 一次？

基本上我有多个实体经理。每次创建 entitymanager 时，它都会尝试从 import.sql 导入 sql（所以说休眠文档）。但是，这会在第二次创建 EM 时导致异常。

是否有办法在运行时找出导入文件是否已被使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T08:38:32.573

好的，我不确定这是最好的方法，但它是一个简单的解决方案。如果您像这样（如下）创建 Entitymanager，则只需在创建第一个 EntityManager 后删除属性“hibernate.hbm2ddl.auto”：

```
EntityManagerFactory emf = Persistence.createEntityManagerFactory(
            "bla", props);
EntityManager em = emf.createEntityManager();

props.remove("hibernate.hbm2ddl.auto"); // <-- important

EntityManagerFactory emf2 = Persistence.createEntityManagerFactory(
            "bla2", props);
EntityManager em2 = emf2.createEntityManager(); 
```

此外，我已经看到 import.sql 允许使用“DROP TABLE IF EXISTS”之类的术语。我最初错过了这一点，因为我习惯于使用 Oracle，这也导致了诸如“用户缺少特权或找不到对象：SOME_TABLE”之类的错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T10:23:37.313

我没有尝试过，但是您可以`org.hibernate.tool.hbm2ddl.SchemaExport`在应用程序启动时使用手动将架构导出到数据库。

来自文档：*用于将表模式导出到数据库的命令行工具。这个类也可以从应用程序内部调用。*

```
SchemaExport export = new SchemaExport(config);
export.setInputFile("import.sql");
export.create(false, true); 
```

# extjs - ExtJS 3.4 :: 网格中的组合框-打开时错误地选择了第一个值

> ID：13607050
> 
> 赞同：0
> 
> 时间：2012-11-28T14:12:21.090
> 
> 标签：extjs, combobox, grid

使用 ExtJS 3.4

我有一个 EditorGridPanel 和带有组合框的列。

刚刚注意到，如果我选择三个选项，说...

*   狗
*   猫
*   鼠

...并且鼠标是保存的值，然后当我单击下拉菜单时，我的字段将填充为 Dog - 无需我选择它。无论选项如何，我的字段都会填充第一个值。

这只发生在初始页面加载后以及我第一次单击组合框时。随后的组合单击不会引发此行为。

有没有人经历过这样的事情？有什么线索吗？

谢谢

保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:27:47.560

```
autoSelect : false 
```

for combobox component will solve this. Read ExtJS Documentation for more details.

# mysql - MySql备份和恢复

> ID：13607056
> 
> 赞同：2
> 
> 时间：2012-11-28T14:12:31.493
> 
> 标签：mysql, backup, restore

试图了解人们如何进行完整的备份/恢复过程：用户定义的数据库模式和数据可以通过 mysqldump 轻松备份，但是主表和数据呢？即如果服务器完全瘫痪，我如何重建数据库，即包括Mysql 中的所有设置？只是转储/导入 information_schema 和 mysql 数据库+恢复 my.cnf 的问题吗？（innodb 或 MyISAM，不是 ISAM）

--

编辑：谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T14:17:19.673

您不备份 information_schema，但除此之外，是的，保留 my.cnf 的副本以及 mysql 数据库表和日志设置的转储。为此，请执行以下操作：

```
mysqldump -u$user -p$pass --all-databases > db_backup.sql 
```

如果您要恢复到 100% 相同版本的 MySQL，您还可以通过关闭服务器并复制 /var/lib/mysql （或您的数据文件所在的任何位置）的内容以及你的 my.cnf 文件。然后，当您想上线并打开服务器时，只需将副本放回原处即可。

# oracle - 为 A 中的相等条目选择 B 的最大值

> ID：13607057
> 
> 赞同：0
> 
> 时间：2012-11-28T14:12:33.097
> 
> 标签：oracle, plsql

考虑下表：

```
 A  |  B
-----|------
 123 |  1
 456 |  2
 123 |  5
 456 |  0
 789 |  3
 789 |  9
 123 |  6 
```

我想得到以下输出：

```
 A  |  B
-----|------
 123 |  6
 456 |  2
 789 |  9 
```

换句话说：对于 A 中每个相等的值，B 的最大值。

上面的初始表已经来自另一个只选择重复项的查询`A`：

```
select A, B from tbl where A in (
  select A from tbl
  group by A
  having count(A) > 1
); 
```

`group`我尝试将另一个ing 函数包装/集成`max(B)`到这个查询中，但没有成功。

如何获得所需的输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:15:04.477

也许我在这里很天真，但是：

```
SELECT tbl2.A, MAX(tbl2.B) FROM
(select A, B from tbl where A in (
     select A from tbl
     group by A
     having count(A) > 1
)) as tbl2
GROUP BY tbl2.A 
```

似乎它应该工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T14:15:05.413

只需使用最大值：

```
 select A, max(B) 
  from tbl
  group by A
  having count(A) > 1 
```

# c++ - 在 OpenCV 中实现复值矩阵方程

> ID：13607062
> 
> 赞同：2
> 
> 时间：2012-11-28T14:12:56.137
> 
> 标签：c++, opencv, matrix

我正在尝试在 OpenCV 中实现一个复值矩阵方程。我已经在 MATLAB 中进行了原型设计，效果很好。从方程开始（精确的 MATLAB 实现）：

```
kernel = exp(1i .* k .* Circ3D) .* z ./ (1i .* lambda .* Circ3D .* Circ3D) 
```

其中

```
1i = complex number
k = constant (float)
Circ3D = real-valued matrix of known size
lambda = constant (float)
.* = element-wise multiplication
./ = element-wise division 
```

结果是一个复值矩阵。我成功地将必要的 Circ3D 矩阵生成为 CV_32F，但是乘以复数 i 给我带来了麻烦。从 OpenCV 文档中，我了解到复杂矩阵只是一个两通道矩阵（CV_32FC2）。

真正的麻烦在于如何定义 i。我尝试了几个选项，其中将 i 定义为

```
cv::Vec2d complex = cv::Vec2d(0,1); 
```

然后乘以矩阵

```
kernel = complex * Circ3D 
```

但这不起作用（尽管我没想到会这样）。我怀疑我需要对 std::complex 做一些事情，但我不知道是什么（[http://docs.opencv.org/modules/core/doc/basic_structures.html](http://docs.opencv.org/modules/core/doc/basic_structures.html)）。

提前感谢您的帮助。

编辑：就在写完这篇文章之后，我确实取得了一些进展，将 i 定义如下：

```
std::complex<float> complex(0,1) 
```

然后我可以按如下方式分配复杂的值：

```
kernel.at<std::complex<float>>(i,j) = cv::exp(complex * k * Circ3D.at<float>(i,j)) * ...
z / (complex * lambda * pow(Circ3D.at<float>(i,j),2)); 
```

然而，这在一个循环中工作，这使得该过程非常慢。有什么办法一口气搞定吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-16T11:19:18.887

还有函数[mulSpectrums](http://docs.opencv.org/modules/core/doc/operations_on_arrays.html#void%20mulSpectrums(InputArray%20a,%20InputArray%20b,%20OutputArray%20c,%20int%20flags,%20bool%20conjB))，它可以让您对复杂矩阵进行元素乘法。因此，如果 K 是您的内核矩阵，而 I 是一些复杂的矩阵，即 CV_32FC2（浮点两通道），您可以执行以下操作来计算元素乘法，

```
// Make K a complex matrix
cv::Mat Ktmp[] = {cv::Mat_<float>(K), cv::Mat::zeros(K.size(), CV_32FC1)};
cv::Mat Kc;
cv::merge(Ktmp,2,Kc);
// Do matrix multiplication
cv::mulSpectrums(Kc,I,I,0); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T11:10:09.260

OpenCV`std::complex`就像简单的一对数字一样对待（参见[文档中的示例](http://docs.opencv.org/modules/core/doc/basic_structures.html?highlight=complex)）。没有应用关于算术运算的特殊规则。你可以通过直接乘法来克服这个问题`std::complex`。所以基本上，这很简单：您要么选择自动复数算术（就像你现在所做的那样），要么选择自动矢量化（在矩阵上使用 OpenCV 函数时）。

我认为，在您的情况下，您应该自己进行所有复杂的算术运算。将复数值矩阵存储`C{ai + b}`为两个矩阵`A{a}`和`B{b}`。[自己](http://en.wikipedia.org/wiki/Euler%27s_formula)实现求幂。标量和加法的乘法应该不是问题。

# javascript - 通过javascript将用户选择的页面控制值写入xml文件并存储在客户端机器中

> ID：13607064
> 
> 赞同：1
> 
> 时间：2012-11-28T14:12:59.000
> 
> 标签：javascript, asp.net, xml

我的问题是---------我的表单上有很多输入控件，在我的 asp.net 多用户 Web 应用程序中，当用户在一半的控件中输入值并且电源关闭时，用户失去了所有输入数据，他必须从头开始填写表格。所以我想通过 javascript 将所有用户输入存储在 xml 文件中，因为每个控件失去焦点（每次重新生成新文件并删除旧文件）并将其存储在客户端的文件中。我已经尝试将它存储在 cookie 中，但 xml 字符串大小超过 cookie 大小限制。我还想最后从服务器端将 xml 文件数据存储到数据库中。

那么我的方法有什么问题吗？或任何其他方式来解决我的目的？任何建议将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:25:43.970

您可以使用这种方式作为基础。这仅使用js。在客户端本地存储上保存为 json 比保存为 xml 更好。没有 JQuery：

```
<form>
    <input id="txt1" onchange="saveDraft()" type="text" />
    <input id="txt2" onchange="saveDraft()" type="text" />
    <input id="txt3" onchange="saveDraft()" type="text" />
    <input id="btnSubmit" type="submit" value="submit" />
</form>

<script type="text/javascript">
var elements = ["txt1","txt2","txt3"];

function saveDraft(){
    var values= new Object;
    for(var i=0;i<elements.length;i++){
        values[elements[i]] = document.getElementById(elements[i]).value;
    }
    localStorage["draft"] = JSON.stringify(values);
}

window.onload = function (){
    restoreDraft();
}

function restoreDraft(){
    var values;
    if(localStorage["draft"] ){
        values = JSON.parse(localStorage["draft"]);
    }
    else
        return;
    if(confirm('Do you want to restore saved draft?')){
        for(var i=0;i<elements.length;i++){
            document.getElementById(elements[i]).value = values[elements[i]];
        }
        localStorage["draft"] ='';
    }           
}
</script> 
```

# jsp - jsp页面中的表单身份验证未重定向

> ID：13607069
> 
> 赞同：0
> 
> 时间：2012-11-28T14:13:07.517
> 
> 标签：jsp

以下代码验证员工是否已申请职位。如果已经应用，它会重定向到“打印”页面，否则它将定向到“入口页面”。此应用程序还有一个方面。即..员工也可以申请比他的干部低的另一个员工。这由“LOGIN_AS”变量检查。我面临的问题是.. 如果我将“LOGIN_AS”的条件放在 if-else 条件中.. 即使他/她已经填写了相同的内容，它也允许员工自己填写。如果我删除它，它会重定向到打印页面，但不允许员工申请低级干部员工。

“LOGIN_AS”取自入口页面

```
<%
String appln= request.getParameter("appln");
int empid = Integer.parseInt(request.getParameter("empsrno"));
String login_as = request.getParameter("login_as");
session.putValue("Login_as",login_as);

java.sql.Statement stmt = conn.createStatement ();
String sql = "SELECT E.SRNO,RTRIM(P.EMAIL_ID),E.NAME,TO_CHAR(SYSDATE,'DD/MM/YYYY'),DECODE(E.SRNO,I.SRNO,1,0),"+
             "(to_date('01-DEC-2012','dd/mm/yyyy')-trunc(sysdate)) ,"+
             "DECODE(I.SRNO,'',0,I.SRNO),E.CADRE,I.ITSG_TYP "+
             "FROM EMPFILE E,PFORM_EXCHANGE_USERS P,ONLINE_PFORM_ADMIN A,APPLN I "+
             "WHERE E.SRNO = P.EMPLOYEE_ID AND E.SRNO = A.EMPLOYEE_ID(+) AND E.SRNO=I.SRNO(+)  "+
             "AND E.SRNO=" + request.getParameter("empsrno") +" AND I.APPLN_TYP(+)='APPLN3N12' ";

ResultSet rset = stmt.executeQuery(sql);
int x = 0;
int lastDt;
int itsg_eid = 0;
String applnTyp = "X";

 if (rset.next()) 
 {
   if ( request.getParameter("empemail").trim().toLowerCase().concat("@licindia.com").equals(rset.getString(2).toLowerCase()))
       {
        session.putValue("USER",request.getParameter("empsrno"));
        session.putValue("LOGIN","true");
        session.putValue("ENAME",rset.getString(3));
        session.putValue("EMAIL",rset.getString(2));
        session.putValue("SYSDT",rset.getString(4));
        session.putValue("APPLNTYP",appln);
        x = rset.getInt(5);
        lastDt = rset.getInt(6);
        appln_eid = rset.getInt(7);        
        applnTyp = rset.getString(9);
         rset.close();
         stmt.close();
         conn.close();
         if (lastDt == 0)
         {
         %>

         <jsp:forward page="appln_login.jsp"><jsp:param name="message" value="LAST DATE (16/11/2012) FOR SUBMISSION OF APPLICATION IS OVER !!!"/></jsp:forward>

         <%
         }

            if (empid == appln_eid && (applnTyp.equals(itsg)) && login_as=="S")
            {
           session.putValue("PUSER",request.getParameter("empsrno"));   
            %>
           <jsp:forward page="appln_print.jsp"></jsp:forward>
           <% } else {
           %> 
            <jsp:forward page="appln_entry.jsp"></jsp:forward>
            <% }

%> 
```

任何人都可以指导我更正上面的代码....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T10:37:09.000

嘿，我的一个朋友纠正了

替换 if (empid == appln_eid && (applnTyp.equals(appln) && login_as == "S")

经过

if (empid == appln_eid && (applnTyp.equals(appln)) && login_as.equals("S"))

# h.264 - AR Drone 2.0、Gstreamer、C++ RTMP 服务器（无需 SDK 的流式传输）

> ID：13607070
> 
> 赞同：4
> 
> 时间：2012-11-28T14:13:08.103
> 
> 标签：h.264, gstreamer, ar.drone

这个问题是这个线程的后续问题：[AR Drone 2 and ffserver + ffmpeg streaming](https://stackoverflow.com/questions/12674048/ar-drone-2-and-ffserver-ffmpeg-streaming)

我们正在尝试通过 Debian 服务器从我们的 AR Drone 获取流并进入 Flash 应用程序。

大图是这样的：

AR Drone --> Gstreamer --> CRTMPServer --> Flash 应用程序

我们正在使用此线程中的 Gstreamer 的 PaveParse 插件：[https ://projects.ardrone.org/boards/1/topics/show/4282](https://projects.ardrone.org/boards/1/topics/show/4282)

从线程中可以看出，AR Drone 正在使用 PaVE，Parrot Video Ecapsulation，大多数播放器（如 VLC）都无法识别它。PaVeParse 插件删除了这些。

我们使用了不同的管道，它们都产生相同的错误。

样品管道：

```
GST_DEBUG=3 gst-launch-0.10 tcpclientsrc host=192.168.1.1 port=5555 ! paveparse ! queue ! ffdec_h264 ! queue ! x264enc ! queue ! flvmux ! queue ! rtmpsink localtion='rtmp://0.0.0.0/live/drone --gst-plugin-path=. 
```

PaVEParse 插件需要位于 gst-plugin-path 才能工作。

位于 ffdec_h264 元素中的 Gstreamer 的示例错误输出可在以下位置找到：[http ://pastebin.com/atK55QTn](http://pastebin.com/atK55QTn)

如果解码发生在播放器/转储器中，例如 VLC、FFplay、RTMPDUMP，也会发生同样的事情。

问题归结为缺少标题：PPS 参考不存在。我们知道 PaVEParse 插件会删除 PaVE 标头，但我们怀疑当这些标头被删除时，解码器/播放器没有 H264 标头来识别帧。

是否可以从头开始或通过转换 PaVE 标头来“恢复”这些 H264 标头？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T00:52:00.623

您能否分享一下 gstreamer 和 crtmpserver 之间的流量示例？

您始终可以使用内置于 crtmpserver 的 LiveFLV 支持。以下是更多详细信息：

[使用 crtmpserver 重新流式传输 MPEG2 TS PAL 流](https://stackoverflow.com/questions/7628060/re-stream-a-mpeg2-ts-pal-stream-with-crtmpserver)

# jquery - 使用 datepicker 小部件并且需要在新的 div 中显示结果

> ID：13607073
> 
> 赞同：0
> 
> 时间：2012-11-28T14:13:29.483
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

我确信有一个简单的解决方案，但由于我只是在学习，我似乎无法让它工作或找到答案。

我正在使用 datepicker 小部件，我希望结果显示在页面其他位置的另一个 div 中。

我的html代码是：

```
<div class="ui-widget">
<p><label for="tags">Depart From:</label>
<input type="text" class="departCity" id="tags" size="30" /></p>
</div>

<div class="ui-widget">
<p><label for="tags2">To:</label>
<input type="text" class="destination" id="tags2" size="30" /></p>
</div>

<div>
<p>
<label for="datepicker">Depart Date:</label>
<input type="text" class="ui-widget" id="datepicker" size="30"/></p>
</div>

<div id="trip">
<h2>Your Trip</h2>
<p><span id="tags_display"></span></p>
<p><span id="tags2_display"></span></p>
<p><span id="datepicker_display"></span></p>
</div> 
```

我正在使用这个 jquery 来显示结果（在这个网站的帮助下 - 非常感谢！）但是选择的日期没有显示。

```
$(function(){ 
$('input[type="text"]').blur(function() {
    $("#"+$(this).attr('id')+"_display").html($(this).val());
    }); 
    }); 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:16:22.543

设置时，`datepicker`您可以为`onSelect`参数提供一个函数，该函数将在选择日期时运行。试试这个：

```
$("#myInput").datpicker({
    onSelect: function(date, picker) {
        $("#otherDiv").html(date);
    },
    // other settings...
}); 
```

API 中的更多信息：[onSelect](http://api.jqueryui.com/datepicker/#option-onSelect)

# c# - 告诉 Web 引用使用 web.config 或如何使 settings.settings 可编辑

> ID：13607074
> 
> 赞同：2
> 
> 时间：2012-11-28T14:13:32.167
> 
> 标签：c#, asp.net, web-config, ssrs-2008, settings.settings

我正在将 ASP.NET 2.0 (3.5 SP1) 应用程序迁移到 .NET 4.0。它利用 SQL Server Reporting Services 2008R2 Web 服务。这个网络服务是一个老式的 asmx 肥皂网络服务。

那时我添加了一个我设置为动态的网络参考，并在我`<applicationSettings>`的`web.config`.

迁移到 Visual Studio 2010 和 .Net 4.0 后，我不得不重新添加 Web 参考。.Net 2.0 Web 引用对话框按原样添加代理类。但现在它在文件夹中包含了`settings.settings`我项目的一个`Properties`文件。我可以忍受，但`settings.settings`编译后文件不可用。看起来它已经编译到dll中了。

即使将配置粘贴到`settings.settings`我`web.config`的文件中并删除`settings.settings`文件也无济于事。我收到一个命名空间编译错误，因为 vs 生成的代理类期望`settings.settings`...

那么如何包含我的 Web 参考并使其在配置文件中可调整？

要么告诉网络参考编辑器使用`web.config`，也许？或者将`settings.settings`文件作为 xml 提供，以便在部署时更改它？

或者任何其他帮助也会很棒......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T17:37:42.067

这可能对您有帮助，也可能无济于事，但这是我们解决此问题的 Web 服务方法。我们为给定的 Web 服务创建一个包装类，并且每次实例化代理类时，我们都会在引用该`<appSettings />`节点的代码中设置 URL。

例如

```
public class MyWebService
{
  private static readonly string _serviceUrl = ConfigurationManager.AppSettings["serviceUrl"] ?? "http://someserviceurl.com/service.asmx";

  public MyWebService()
  {
  }

  private WebServiceClient GetClient()
  {
    WebServiceClient client = new WebServiceClient();
    client.Url = _serviceUrl;
    return client;
  }

  private void Method1()
  {
    var client = GetClient();
    // do stuff
  }
} 
```

# sql-server-2008 - 将 varchar 值“SELECT”转换为数据类型 int 时转换失败

> ID：13607076
> 
> 赞同：4
> 
> 时间：2012-11-28T14:13:39.740
> 
> 标签：sql-server-2008

我有这个查询：

```
DECLARE @selectsql nvarchar(4000),
DECLARE @cnt int

select @selectsql = ' SELECT ' + @cnt + '= COUNT(*) FROM Vwbckup' 

print @selectsql
print @cnt

EXEC sp_executesql @selectsql 
```

当我执行查询时，我收到此错误：

> *将 varchar 值“SELECT”转换为数据类型 int 时转换失败。*

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T14:16:22.093

您的 @cnt 变量是 INT 类型 - 您需要将其转换为 NVARCHAR 以连接在一起：

```
DECLARE @selectsql nvarchar(4000),
DECLARE @cnt int

SELECT @selectsql = N' SELECT ' + CAST(@cnt AS NVARCHAR(10)) + N'= COUNT(*) FROM Vwbckup' 
```

另外：您应该在**字符串**文字前加上`N`表示 Unicode ( `NVARCHAR`) 字符串

**更新：**之前的命令真的没有任何意义....你的意思是创建这个命令字符串吗？

```
SELECT @selectsql = N' SELECT @cnt = COUNT(*) FROM Vwbckup' 
```

然后执行它？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T14:20:52.413

您显然不需要动态 SQL，但如果您出于某种原因未显示您根本不需要连接该部分。您可以使用`OUTPUT`参数。

```
DECLARE @selectsql NVARCHAR(4000),
        @cnt       INT

SELECT @selectsql = N'SELECT @cnt = COUNT(*) FROM Vwbckup'

PRINT @selectsql

PRINT @cnt

EXEC sp_executesql
  @selectsql,
  N'@cnt int output',
  @cnt OUTPUT

SELECT @cnt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T14:16:33.010

## 将 an 连接`int`成字符串 =>强制转换

问题不在于 SQL 何时执行，而是在它生成之前，因为您正在连接字符串和整数变量。

你应该转换你的整数变量：

```
select @selectsql = 'SELECT ' + cast(@cnt as nvarchar) + ' = COUNT(*) FROM Vwbckup' 
```

但是您确实意识到变量的值将被连接到您的结果字符串中。我不确定你想要那个...

# client - 客户端渲染时间

> ID：13607077
> 
> 赞同：3
> 
> 时间：2012-11-28T14:13:43.883
> 
> 标签：client

我知道，为了测量任何应用场景的端到端响应时间，我们需要计算：服务器时间 + 网络时间 + 客户端时间

虽然我确定服务器和网络时间会受到负载的影响，但我想知道客户端时间是否也会受到负载的影响？

如果客户端渲染时间不受负载影响，那么如果我们对 100 个用户进行测试并在任何性能测试工具（如 HP LoadRunner、JMeter 等）的帮助下测量服务器时间，这是否合适；然后用单个用户测量客户端渲染时间，最后通过将客户端时间添加到服务器时间来呈现端到端时间？

对此的任何意见将不胜感激。

请注意，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T20:06:22.757

您所描述的是一个非常古老的概念，称为 GUI 虚拟用户。LoadRunner 以及 SilkPerfomer、QALoad 和 Rational Performance tester 等其他经典工具始终能够运行使用相关供应商的功能自动化测试工具创建的一两个图形虚拟用户，以解决用户“体重”问题的图形用户界面。

随着瘦客户端 Web 的出现，这种功能已经过时了一段时间，但现在 Web 客户端的厚度随着客户端代码的复杂性而增长，这个问题被问得更频繁了。

不要担心实际的“渲染时间”，即绘制屏幕元素所花费的时间，因为无论如何您都无法控制它。它会因主机上运行的内容而异，并且大多数开发商店没有与 Microsoft、Mozilla、Opera、Google 或 Apple 的协调路径，以要求他们在有人发现时调整浏览器上的渲染浏览器实际渲染引擎的问题。

# internet-explorer - 在 Internet Explorer 上使用 Windows 身份验证通过 SSL 进行跨域 ajax 调用失败

> ID：13607087
> 
> 赞同：3
> 
> 时间：2012-11-28T14:14:21.560
> 
> 标签：internet-explorer, jquery, ssl, windows-authentication, cors

我有一个使用 Windows 身份验证的 Web 应用程序，它使用我们 Intranet 上不同服务器上的 Windows 身份验证来调用 Web 服务。具体来说，我正在使用带有 SSL 的 jQuery 跨域对 WCF 休息服务 ( `WebHttpBinding`) 进行 ajax 调用。

我通过在 Web 服务中设置 Access-Control-Allow-Origin 标头解决了跨域问题。并在 jquery 中调用 ie 通过设置`$.support.cors = true;`.

我通过设置标头解决了发送凭据的问题`("Access-Control-Allow-Credentials", "true")`；在 Web 服务和 jQuery 调用中通过设置

```
$.ajaxSetup({ xhrFields: { withCredentials: true, crossDomain: true

        }
    }); 
```

我让这适用于 IE 和 Chrome，使用在不同服务器上运行的 Windows 身份验证从 Web 应用程序使用 Windows 身份验证对 Web 服务进行跨域。但是，当我将 SSL 添加到双方（https 到 https）时，该调用在 IE 中不再有效。它继续在 Chrome 中工作。

查看 Fiddler 中的 http 流量，浏览器似乎甚至没有发出请求，也就是说，Fiddler 根本没有显示请求已发出的条目。通过调试 javascript，我可以捕获从 jquery 调用返回的错误，并且状态文本是“访问被拒绝”。但正如我所说，在我看来，浏览器甚至没有将请求发送到 Web 服务。

我尝试了一个 jquery cors 插件`jQuery.XDomainRequest.js`。那时我开始在 fiddler 中看到 http 调用。这是一个单一的 401“拒绝访问”。就是这样。客户端调用似乎没有发送任何凭据。

在此之前，在我添加 SSL 之前，我会看到一个 401，其中包含身份验证凭据的响应标头。随后是 200，其中请求标头包含 Windows 身份验证凭据。所以它奏效了。

但是现在（在 IE 中）我只得到了单个 401。所以我被卡住了，我需要打电话

1.  跨域，
2.  使用 Windows 身份验证，
3.  使用 SSL 和
4.  与 IE。

我可以把所有四个要求结合在一起。我很困惑为什么我可以使用 windows auth 跨域来使用 IE，但是当我添加 SSL 时我无法让它工作。

它在 Chrome 中运行良好，因此它必须与 XDomainRequest 对象有关。有什么方法可以调整 jQuery 调用以使这一切正常工作。有没有人听说过这个特定的问题？这是可以克服的吗？还是我只是把头撞在墙上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-04T23:30:34.560

也许 OP 的问题只是一个 IE9 问题，但我在现代浏览器中也遇到了一些麻烦。我发现如果您需要 Windows 身份验证才能工作，则不能`*`用于标头。`Access-Control-Allow-Origin`

跨域服务器（ajax请求的目标）需要在`Access-Control-Allow-Origin`header中完整指定宿主服务器（ajax调用来自的域）。

也许 OP 正在这样做，但对我来说，这是缺失的部分。我现在有 jQuery ajax，带有`xhrFields: { withCredentials: true }`和通常的 CORS 标头，它适用于 IE11、https、windows auth、跨域。它也适用于其他浏览器。它适用于获取和发布。

我遇到的另一个问题......我只在“OPTIONS”请求上设置了我的 CORS 标头，但这有时不起作用，所以我现在只是将这些标头添加到每个请求中。我只是在我的 ASP.NET MVC`Application_BeginRequest`方法中添加这些，如下所示。

```
HttpContext.Current.Response.AddHeader("Access-Control-Allow-Origin", "https://portal");
HttpContext.Current.Response.AddHeader("Access-Control-Allow-Methods", "GET, POST, PUT");
HttpContext.Current.Response.AddHeader("Access-Control-Allow-Headers", "Content-Type, Accept");
HttpContext.Current.Response.AddHeader("Access-Control-Allow-Credentials", "true"); 
```

这是 JavaScript 端的一个片段

```
$.ajax({
    url: "<a url in here>"
    type: "POST",
    xhrFields: {
      withCredentials: true
    },
    contentType: "application/json",
    data: payload,
    success: success,
    error: function (data) {
        logFailure(data);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:18:55.460

XDomainRequest 明确禁止使用身份验证；在这里看到#5：http: [//blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx](http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx)

不清楚JQuery跨域调用在IE9及以下是如何工作的，*除了*通过XDomainRequest对象外不支持CORS。在 IE10 中，这应该可以正常工作。

# android - 如何在我们自己的安卓应用中做广告？

> ID：13607088
> 
> 赞同：-1
> 
> 时间：2012-11-28T14:14:23.650
> 
> 标签：android, ads

我有一个应用程序，在应用程序结束时，我想显示广告......就像其他显示 olx 和其他网站或产品广告的应用程序一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T14:16:21.970

看看官方的 android 教程：http: [//developer.android.com/training/monetization/ads-and-ux.html](http://developer.android.com/training/monetization/ads-and-ux.html)

# geospatial - 查找纬度/经度坐标多边形的中心线

> ID：13607089
> 
> 赞同：2
> 
> 时间：2012-11-28T14:14:26.553
> 
> 标签：geospatial

我有一组数据（纬度/经度坐标）描述了跟踪道路的多边形。数据可以以多种形式呈现，包括 GeoSJON、KML、WKT、WKB、简单的双精度二维向量或大多数其他格式。

我的目标是在返回的坐标向量中找到该多边形的中心线，我想尽可能直接地这样做，即调用“函数”传递数据并接收返回结果。

我想在 C# 中执行此操作，但是 C/C++ 中的库或类似的库就可以了。

我已经通过 MAT、“骨架化”和其他几个，但对这些资源中讨论的内容了解有限，我正在寻找一个简化的解决方案，如果你愿意的话，我正在寻找一本“食谱”。

问候，吉姆

# java - 修改 JDBC 代码以针对 Inesrt/Update/Deletions 的多个数据库服务器

> ID：13607090
> 
> 赞同：0
> 
> 时间：2012-11-28T14:14:32.090
> 
> 标签：java, database, jdbc

当我执行语句（基本插入、更新、删除）时，有没有一种方法可以使用 JDBC 来定位多个数据库。

例如，假设服务器 [200.200.200.1] 和 [200.200.200.2] 都有一个名为 的数据库`MyDatabase`，并且数据库完全相同。我想同时`"INSERT INTO TestTable VALUES(1, 2)"`在两个数据库上运行。

**关于 JTA/XA 的注意事项：**

我们正在开发一个 JTA/XA 架构，以在同一个事务中针对多个数据库，但它还需要一段时间才能准备好。如果可能的话，我想使用标准的 JDBC 批处理命令并让它们现在访问多个服务器。我意识到这不是交易安全的，我只是不想让命令同时访问两台服务器进行基本测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T14:18:13.377

每个数据库需要一个连接。一旦你有了这些，标准的自动提交/回滚调用就会起作用。

你可以试试春天；它已经设置了事务管理器。

即使您不使用 Spring，您只需在 CLASSPATH 中获取 JDBC 驱动程序 JAR 的 XA 版本即可。如果没有它们，两阶段提交将不起作用。

我想知道使用数据库进行复制是否不是一个更好的主意。为什么中间层应该关心数据库集群？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T14:22:38.690

最好的快速和肮脏的开发方式是使用多个数据库连接。它们不会在同一个事务中，因为它们处于不同的连接中。如果这只是为了测试，我认为这不是什么大问题。

当您的 JTA/XA 架构准备就绪时，只需将其插入已经工作的代码中。

# c# - LINQ to SQL，以外国实体为条件

> ID：13607093
> 
> 赞同：0
> 
> 时间：2012-11-28T14:14:43.747
> 
> 标签：c#, sql, linq, entity-framework, linq-to-sql

在 SQL 中，它会这样完成：

```
SELECT * FROM Student
WHERE SchoolId IN
    (SELECT id FROM School WHERE Name LIKE '%elementary%') 
```

如何使用 LINQ 实现这一点？我尝试了以下方法：

```
var list = context.Students.Where(x => context.Schools.Where(r => r.Name.Contains("elementary").Select(r => r.Id).Contains(x.SchoolId)) 
```

但不幸的是，它并没有给我想要的东西......

我知道可以`Id`先从表中检索所有 s `School`，但我认为这会对性能造成严重影响。最好我希望 LINQ to SQL 来处理所有事情；我不能使用 vanilla SQL 来做到这一点，因为我需要动态的东西，而目前 LINQ 对我来说是最好的解决方案。

上面的代码都是为了说明目的；我正在做的是有点不同（但或多或少相同）。我确实需要一些帮助；如果您需要更多信息，请随时询问。

**编辑：**我的错，我错过了一个领域。它有效，但结果没有出现，因为我错过了那个领域......很抱歉......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T14:19:13.450

试试这个：

```
var result = from st in context.Student
             from sc in context.Schools
             where sc.Name.Contains("elementary") && sc.SchoolId == st.SchoolId
             select st; 
```

我对语法有点模糊，请原谅我。但这应该为您指明正确的方向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T14:26:50.257

像这样的东西应该工作。Contains 的第一个用途是在字符串对象上查看字符串是否包含子字符串“elementary”。Contains 的第二个用途是在一个列表上并检查第一个结果列表是否包含 SchoolId。

```
var sublist = from s in context.Schools
              where s.Name.Contains("elementary")
              select id;

var list = from s in context.Students
           where sublist.Contains(s.SchoolId)
           select s; 
```

# wpf - 为什么 TextBox 控件上没有 IsReadOnlyChanged 事件？

> ID：13607096
> 
> 赞同：1
> 
> 时间：2012-11-28T14:14:44.350
> 
> 标签：wpf, textbox, event-handling, spell-checking, readonly

我正在添加一些解决方法代码来修复 [这是 DotNet 4 WPF 拼写检查中的错误吗？](https://stackoverflow.com/questions/13001118/is-this-a-bug-in-dotnet-4-wpf-spell-checking), （当 WPF 文本框更改`Enabled,` `Visible`或`ReadOnly`状态时，任何 SpellCheck 自定义词典都会被丢弃，直到您禁用并重新启用 SpellCheck），最简单的修复似乎是处理`IsVisibleChanged`、`IsEnabledChanged`和`IsReadOnlyChanged`事件。

很简单，对吧？除了**没有**事件`IsReadOnlyChanged`。`IsReadOnly`任何人都知道为什么以及在 WPF TextBox 中 捕获更改的最佳方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T14:16:50.360

您始终可以使用[DependencyPropertyDescriptor.AddValueChanged跟踪依赖项属性更改](http://msdn.microsoft.com/en-us/library/system.componentmodel.dependencypropertydescriptor.addvaluechanged.aspx)

```
DependencyPropertyDescriptor.FromProperty(TextBoxBase.IsReadOnlyProperty)
                            .AddValueChanged(ctrl, OnReadOnlyChanged) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:33:26.367

创建一个自定义类并处理 OnPropertyChanged 事件。像这样：

```
public class MyTextBox: TextBox
{
    public MyTextBox() { }
    protected override void OnPropertyChanged(DependencyPropertyChangedEventArgs e)
    {
        base.OnPropertyChanged(e);
        if (e.Property.ToString() == "IsReadOnly")
        {
            // here you are sure that ContentPropertyhas changed
        }
    }
} 
```

# javascript - 如何创建单个 JavaScript 正则表达式来匹配长度和多个约束？

> ID：13607100
> 
> 赞同：3
> 
> 时间：2012-11-28T14:14:55.867
> 
> 标签：javascript, regex

我需要构建一个具有以下约束的 JavaScript 正则表达式：

*   输入字符串至少需要 6 个字符长
*   输入字符串需要至少包含 1 个字母字符
*   输入字符串需要至少包含 1 个非字母字符

我严重缺乏 JavaScript 中的回溯功能。我想出的东西：

```
((([a-zA-Z][^a-zA-Z])|([^a-zA-Z][a-zA-Z]))....)|
(.(([a-zA-Z][^a-zA-Z])|([^a-zA-Z][a-zA-Z]))...)|
(..(([a-zA-Z][^a-zA-Z])|([^a-zA-Z][a-zA-Z]))..)|
(...(([a-zA-Z][^a-zA-Z])|([^a-zA-Z][a-zA-Z])).)|
(....(([a-zA-Z][^a-zA-Z])|([^a-zA-Z][a-zA-Z]))) 
```

**这看起来很长。有没有更好的办法？**

我是怎么得出这个结论的：

1.  字母字符的正则表达式是`[a-zA-Z]`
2.  非字母字符的正则表达式是`[^a-zA-Z]`
3.  所以我需要找一个`[a-zA-Z][^a-zA-Z]`左右。`[^a-zA-Z][a-zA-Z]`
    `(([a-zA-Z][^a-zA-Z])|([^a-zA-Z][a-zA-Z]))`
4.  我需要检查*n 个*前面的字符和 6- *n 个*后面的字符。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T14:17:17.603

```
/^(?=.{6})(?=.*[a-zA-Z])(?=.*[^a-zA-Z])/ 
```

这表示：

`^`- 字符串开头
`(?= ... )`- 后跟（即一个独立的子匹配；它不会移动当前匹配位置）
`.{6}`- 六个字符（“字符串开头后跟六个字符”实现“必须至少为六个字符长”规则）
`.*`- 0 个或多个任何字符（换行符除外 - 可能需要解决这个问题？）
`[a-zA-Z]`- 一个字母（`.*[a-zA-Z]`因此可以找到任何包含字母的字符串（从技术上讲，它会找到其中的最后一个字母））
`[^a-zA-Z]`- 一个非字母字符

总结：从字符串的开头开始，我们尝试依次匹配以下每一项：

*   6 个字符（如果我们找到了，字符串必须是 6 个字符长（或更多））
*   一个任意字符串，后跟一个字母
*   一个任意字符串，后跟一个非字母

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T14:17:26.630

使用这个正则表达式...

```
/^(?=.{6,})(?=.*[a-zA-Z])(?=.*[^a-zA-Z]).*$/
  -------- ------------- --------------
    ^          ^              ^
    |          |              |->checks for a single non-alphabet
    |          |->checks for a single alphabet
    |->checks for 6 to many characters 
```

`(?=)`是**检查**匹配的前瞻。`zero width`它**不**消耗字符。这就是我们可以背靠背使用多个前瞻的原因

 ***** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T14:41:37.410

与其他人类似的答案，因此不需要太多解释，我认为最好的方法是

```
/^(?=.*[a-zA-Z])(?=.*[^a-zA-Z]).{6,}$/ 
```

这从字符串的开头开始，向前看一个字母字符，向前看一个非字母字符，最后**找到**一个 6+ 字符的字符串，我认为不需要先看长度****

# ubuntu - 监控和降低高 CPU 使用率

> ID：13607101
> 
> 赞同：0
> 
> 时间：2012-11-28T14:15:00.810
> 
> 标签：ubuntu, webserver, production-environment, webmin

早上好。目前我正在 Ubuntu 服务器 11.10 中运行 Java Web 应用程序。对于我的 Java 应用程序，我使用的是 apache、tomcat 和 mysql。

在过去的几周里，我的生产服务器的 CPU 使用率非常高。它几乎达到了100％的最高水平。

我通过我的 Amazon Web 控制台确认，我的 CPU 百分比一直在增加和减少。我还检查了 webmin（安装在我的 Ubuntu 服务器中）并确认**CPU 使用率有 100% user**。

我安装了 Java melody 来监控我的 Java 应用程序，发现 Java 或 tomcat 内存没有问题。

谁能告诉我如此高的 CPU 使用率的原因以及监控和最小化它们（或保持控制）的解决方案。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T06:01:22.983

我以前用它来尝试追踪资源使用情况：

[http://webminstats.sourceforge.net/](http://webminstats.sourceforge.net/) http://sourceforge.net/projects/webminstats/

它可以让您更好地了解您的麻烦

# opencv - 使用 Kinect 进行物体识别

> ID：13607109
> 
> 赞同：2
> 
> 时间：2012-11-28T14:15:12.900
> 
> 标签：opencv, kinect, point-cloud-library, object-recognition

我正在尝试使用 Kinect 识别矩形框，我知道我可以使用 OpenCV 或 PCL 来做到这一点，但我的 C++ 有点生疏，我是 3D 计算机视觉的新手，我想尽快做到这一点，这只是一个更大项目的演示。

反正有没有用 C# 或至少 Python 来做，我不在乎我是否必须学习 3D。

如果没有，我应该使用哪个库，OpenCV 还是 PCL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T14:19:16.960

我推荐 OpenCV。

如果您想使用 OpenCV 在 C# 或 python 中工作，那么您对它们都有包装器：

[http://www.emgu.com/wiki/index.php/Main_Page](http://www.emgu.com/wiki/index.php/Main_Page)

[http://www.neuroforge.co.uk/index.php/getting-started-with-python-a-opencv](http://www.neuroforge.co.uk/index.php/getting-started-with-python-a-opencv)

# struts2 - 下载struts2生成的HTML

> ID：13607116
> 
> 赞同：1
> 
> 时间：2012-11-28T14:15:41.497
> 
> 标签：struts2, download, return-type

我想知道是否有一种方法可以使用正常的结果类型从 Struts2 操作（处理 jsp 后的最终 HTML）下载生成的 HTML。我不想显示页面，而是下载它。

我试过的：

```
<result name="success" type="stream">
   <param name="location">/jsp/dummy.jsp</param>
   <param name="contentType">application/text</param>
   <param name="contentDisposition">attachment; filename="page.html"</param>
</result> 
```

我不想使用类似的东西：

```
UrlReader.read("generateHTMLAction") 
```

并将其放入输入流中，因为我遇到了一些编码问题。任何想法都会受到赞赏。谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T20:30:37.650

返回响应的处理主要取决于 HTTP 标头以及浏览器如何解释它们。因此，据我所知，您可以使用标准调度程序结果类型和 JSP。您可以使用 JSP 指令设置适当的 HTTP 标头，以使浏览器以您喜欢的任何方式处理响应负载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T15:35:33.437

我不知道是否或如何做到这一点；

我可以对你说的是：

*   它在这里不存在任何`location`参数：它来自其他结果类型（DispatchResult、FreeMarker 等），而不是来自[Stream 类型](http://struts.apache.org/2.3.4/docs/stream-result.html)。不错的尝试，但我很确定 Struts2 结果类型中没有任何开箱即用的东西可以满足您的需求；

*   您不能使用`Interceptor's PreResultListener`功能，因为它适用于最终结果但在渲染之前，然后完全跳出拦截器；

    我的 2 美分：

    如果您想出于调试目的而不是以编程方式执行此操作，那么真正的问题是您不能使用`View Source`浏览器的功能，因为结果已经被浏览器解析“污染”，那么您可以尝试使用[`PlainText`结果类型](http://struts.apache.org/2.3.4/docs/plaintext-result.html)（未经测试，这只是一个想法，我从未使用过它），获取最终设置您的 JSP 的原始内容`charSet`，然后使用适当的编辑器（Eclipse、Notepad++ 等）读取原始 JSP。

# css - CSS - CSS3 像素化点背景

> ID：13607117
> 
> 赞同：27
> 
> 时间：2012-11-28T14:15:43.930
> 
> 标签：css, background, pixelate

是否有可能或者是否有一种技巧可以使背景像素化，就像所附图像中的那样？

我使用背景图像，但正如您所见，它不会缩放，并且会在页面滚动时闪烁。

![在此处输入图像描述](../Images/4d0dfc5d76ff5a0d2e99ef22668564ac.png)

感谢 vlcekmi3，现在我有了 CSS：

```
background-color: white;
background-image: linear-gradient(45deg, black 25%, transparent 25%, transparent 75%, black 75%, black),
    linear-gradient(45deg, black 25%, transparent 25%, transparent 75%, black 75%, black);
background-size:100px 100px;
background-position: 0 0, 50px 50px; 
```

但我无法让它完全像图像。有人可以检查吗？

感谢任何代码、资源、教程和建议。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-07-27T01:26:41.570

来自三十点在第一篇文章中的评论。应该将其发布为答案 - 太棒了。我差点错过了。**请评价他的评论 :)**我只是将其发布为答案，因此它可能会帮助其他人，因为它帮助了我。

使用 base64 编码的消息：

```
background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAACCAYAAABytg0kAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABZJREFUeNpi2r9//38gYGAEESAAEGAAasgJOgzOKCoAAAAASUVORK5CYII=); 
```

[http://jsfiddle.net/thirtydot/v7T98/3/](http://jsfiddle.net/thirtydot/v7T98/3/)

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-11-28T16:14:33.477

这是我能想到的与您的图像相匹配的最佳方法。它改编自[Lea Verou](http://lea.verou.me/2011/02/checkerboard-pattern-with-css3/)此处的示例非 css3 浏览器的后备方案是什么？

```
body {
    background-image: -moz-linear-gradient(45deg, #666 25%, transparent 25%), 
        -moz-linear-gradient(-45deg, #666 25%, transparent 25%), 
        -moz-linear-gradient(45deg, transparent 75%, #666 75%), 
        -moz-linear-gradient(-45deg, transparent 75%, #666 75%);
    background-image: -webkit-gradient(linear, 0 100%, 100% 0, color-stop(.25, #666), color-stop(.25, transparent)), 
        -webkit-gradient(linear, 0 0, 100% 100%, color-stop(.25, #666), color-stop(.25, transparent)), 
        -webkit-gradient(linear, 0 100%, 100% 0, color-stop(.75, transparent), color-stop(.75, #666)), 
        -webkit-gradient(linear, 0 0, 100% 100%, color-stop(.75, transparent), color-stop(.75, #666));
    background-image: -webkit-linear-gradient(45deg, #666 25%, transparent 25%), 
        -webkit-linear-gradient(-45deg, #666 25%, transparent 25%), 
        -webkit-linear-gradient(45deg, transparent 75%, #666 75%), 
        -webkit-linear-gradient(-45deg, transparent 75%, #666 75%);
    background-image: -o-linear-gradient(45deg, #666 25%, transparent 25%), 
        -o-linear-gradient(-45deg, #666 25%, transparent 25%), 
        -o-linear-gradient(45deg, transparent 75%, #666 75%), 
        -o-linear-gradient(-45deg, transparent 75%, #666 75%);
    background-image: linear-gradient(45deg, #666 25%, transparent 25%), 
        linear-gradient(-45deg, #666 25%, transparent 25%), 
        linear-gradient(45deg, transparent 75%, #666 75%), 
        linear-gradient(-45deg, transparent 75%, #666 75%);
    -moz-background-size: 2px 2px;
    background-size: 2px 2px;
    -webkit-background-size: 2px 2.1px; /* override value for webkit */
    background-position: 0 0, 1px 0, 1px -1px, 0px 1px;
} 
```

[jsfiddle 示例](http://jsfiddle.net/jamessouth/v7T98/)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-08-17T22:24:55.240

您观察到的“闪烁”不是软件问题，而是硬件问题。基本上，这是因为屏幕上的像素不能立即改变颜色。由于您的虚线背景由交替的像素行组成，因此每当您向下滚动*奇数个像素*时，您的屏幕都会有一个短暂的时刻在图案的两个移动副本之间切换，这将显示为闪烁。

[Graphic Design Stack Exchange 上的这个线程以](https://graphicdesign.stackexchange.com/questions/48402/what-causes-the-effect-in-the-sonos-logo)一个更加戏剧性的相同效果示例为特色，并更详细地解释了它发生的原因。只是为了快速演示，让我借用[Volker Siegel 的回答](https://graphicdesign.stackexchange.com/a/48435)中的一张图片：

[![西门子之星](../Images/c4a0c4341f01bb764bc75d3911e1a10f.png)](https://graphicdesign.stackexchange.com/a/48435)

请注意，在大多数屏幕上，此图像在滚动时会显示出明显的“脉动”效果。（即使只是看着它，它也可能会出现一点闪烁，这仅仅是因为你眼睛中的光感受器也有一些反应延迟和适应效应。）

无论如何，在滚动时阻止虚线背景闪烁的唯一方法是**让它不滚动。** 幸运[的是，有一个 CSS 属性可以做到这一点](https://developer.mozilla.org/en-US/docs/Web/CSS/background-attachment)：

```
background-attachment: fixed; 
```

除此之外，没有什么其他的了。实际渲染背景的最佳方式几乎可以肯定是使用简单的双色 PNG 图像。您甚至可以使图像半透明，以便您可以将其叠加在不同颜色的背景之上。请参阅下面的代码片段进行演示：

```
body {
  background-color: white;
  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGUlEQVQ4y2NgoBJwoJAedcGoC0ZdMOAuAABF0hABJ/8lyQAAAABJRU5ErkJggg==);
  background-attachment: fixed;
}
```

```
<p>blah</p><p>blah</p><p>blah</p><p>blah</p><p>blah</p><p>blah</p>
<p>blah</p><p>blah</p><p>blah</p><p>blah</p><p>blah</p><p>blah</p>
<p>blah</p><p>blah</p><p>blah</p><p>blah</p><p>blah</p><p>blah</p>
<p>blah</p><p>blah</p><p>blah</p><p>blah</p><p>blah</p><p>blah</p>
```

请注意，当您使用内部滚动条滚动图案时，图案不会闪烁。（当您滚动整个 SO 页面时，它*会*`<iframe>`闪烁，因为该模式附加到它所显示的页面上，并且会随之滚动。）

^(（顺便说一句，我在上面的代码片段中使用的内联图像是 16 × 16 像素，尽管实际的图案只有 2 × 2 像素。但是，在文件大小方面重复几次并不会花费太多，并且可能会稍微安全一些，因为我似乎记得一些较旧的浏览器存在非常小的背景图像问题。）)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2018-04-03T17:35:13.423

这个怎么样？

```
.card {
  background: linear-gradient(90deg, #fff 2px, transparent 1%) center, linear-gradient(#fff 2px, transparent 1%) center, #ccc;
  background-size: 5px 5px;

  height: 10em;
  width: 30em;
  position: relative;
}

.text {
  font-size: 2em;  
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
}
```

```
<div class="card">
  <div class="text">
    Hello world!
  </div>
</div>
```

一般来说，公式是

```
// color
$bg-color: #fff;
$dot-color: $gray-darker;

// Dimensions
$dot-size: 3px;
$dot-space: 5px;

background: linear-gradient(90deg, $bg-color ($dot-space - $dot-size), transparent 1%) center,
linear-gradient($bg-color ($dot-space - $dot-size), transparent 1%) center, $dot-color;
background-size: $dot-space $dot-space; 
```

如所见@ [https://codepen.io/edmundojr/pen/xOYJGw](https://codepen.io/edmundojr/pen/xOYJGw)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-06T12:08:45.110

这是因为背景大小，所以试试这个：

```
background-size:2px 2px; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-15T19:35:37.920

没有所有浏览器前缀：

```
background: linear-gradient(
    45deg,
    #fff,
    #fff 50%,
    #000 50%,
    #000
);
background-size: 2px 2px; 
```

# c# - 在 ASP.NET MVC4 中，如何重定向到 {controller}/{id}？

> ID：13607118
> 
> 赞同：2
> 
> 时间：2012-11-28T14:15:49.983
> 
> 标签：c#, asp.net-mvc-4, url-routing, authorize-attribute

我在 ASP.NET MVC4 项目中有以下路由配置：

```
routes.MapRoute(
  name:        "HttpError",
  url:         "{controller}/{id}",
  defaults:    new { controller = "Error", action = "Index" },
  constraints: new { id = @"\d+" }
); 
```

现在，我想知道如何创建一个`RedirectResult`or`RedirectToRouteResult`来生成一个指向`/Error/403`而不是`/Error/Index/403`.

**额外的信息**

我正在尝试从其覆盖方法内部的自定义实现重定向*未经授权*的用户： .`System.Web.Mvc.AuthorizeAttribute``HandleUnauthorizedRequest(AuthorizationContext)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:45:42.877

在您的情况下使用它：

```
protected override void HandleUnauthorizedRequest(AuthorizationContext filterContext)
{
    filterContext.Result = new RedirectToRouteResult(new RouteValueDictionary
                                                         {
                                                             {"action", "Index"},
                                                             {"controller", "Error"},
                                                             {"id", "403"},  
                                                         });
} 
```

您必须考虑到您的路线必须放置在适当的位置 - 在更一般的路线之前，例如：

```
routes.MapRoute(
           name: "HttpError",
routes.MapRoute(
           name: "Default", 
```

如果您颠倒顺序，MVC 将获取第一个适合的路由，并将您重定向到例如 `/Error/Index/403`而不是`/Error/403`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T14:28:49.980

Redirect to Route 允许您执行类似于以下的操作：

```
return RedirectToRoute("HttpError", new { controller = "Error", id = "401" } 
```

它应该生成一个没有动作的链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T14:37:47.943

您需要像这样更改 filterContext.Result （对于失败的授权）

```
 filterContext.Result = new RedirectToRouteResult(new RouteValueDictionary(new  {  Controller = "SomeController", area = "MayBeSomeArea" })); 
```

您应该在覆盖 HandleUnauthorizedRequest 方法的地方执行此操作`AuthorizeAttribute`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T20:19:54.317

我不认为这正是你想要的，但对我来说，只返回这样的东西就足够了

```
return RedirectToRoute( new {controller = "controller_name", 
                             action = "action_name"}); 
```

# codeigniter - Codeigniter 不能使用 this->uri->segment(3) 作为函数中的值

> ID：13607119
> 
> 赞同：0
> 
> 时间：2012-11-28T14:15:53.560
> 
> 标签：codeigniter, url-routing, codeigniter-2, codeigniter-routing

为什么这段代码没问题

```
$this->sch_teacher_id = $this->ion_auth->user_by_username("vika")->row()->id; 
```

但这不起作用？

```
$this->sch_teacher_id = $this->ion_auth->user_by_username($this->uri->segment(3))->row()->id; 
```

我的网址是 domain:8888/admin_schedule/teacher/vika

route.php 包含

```
$route['admin_schedule/teacher/(:any)'] = "admin_schedule/index/$1"; 
```

**我在函数 __construct()**中使用代码行，它的结果在另一个控制器函数中使用，因为 3 个函数使用这个结果。如果我将此代码移动到其中一个函数中并使用**$this->uri->segment(3)**那么我得到的不是'vika的课程，而是*我自己的课程*，所以

```
public function user_by_username($username = FALSE)
    {
        $this->trigger_events('user');

        //if no id was passed use the current users id
        $username || $username = $this->session->userdata('username');

        $this->limit(1);
        $this->where($this->tables['users'].'.username', $username);

        $this->users();

        return $this;
    } 
```

效果很好。但是 $this->uri->segment(3) 如果将它用作 user_by_username 函数中的参数，则不起作用！

页面生成的下一个方式：控制器 admin_schedule 具有渲染视图 index.php 的函数 index。在那个视图中，我使用 javascript，从 admin_schedule controller = get_schedule_db_recurring_events_on_daysweek 调用另一个函数：

```
...
{
                url: '/admin_schedule/get_schedule_db_recurring_events_on_daysweek/',//"<?echo $data_path?>",
                backgroundColor: 'red',
            } 
```

并在控制器中

```
function get_schedule_db_recurring_events_on_daysweek()
    {   
        $start = date('Y-m-d H:i', $this->input->get('start')); 
        $end = date('Y-m-d H:i', $this->input->get('end')); 
        $sch_teacher_id = $this->uri->segment(3); // <--- this doesn't work, but $sch_teacher_id = 111 works perfectly
        $result=$this->Schedule_model->get_schedule_recurring_events_on_daysweek($start, $end, $sch_teacher_id);
        $count=count($result);      
        if($count>0){
                echo json_encode($result);
        }
    } 
```

请帮助理解这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:41:06.400

I can't remember the reason - it's just CI quirk you have learn to accept - you can't use $this->uri->segment(3) etc as an argument directly, you will need to assign it and then pass that as @almix suggested for his sanity test.

At-least I have also always had trouble using it directly as an argument - tho I will be happy for anyone to correct me!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T18:42:49.273

我解决了我的问题！

认为由于 ajax 调用而出现问题。所以当我在控制器中编码时

```
function __construct()
 {
        parent::__construct();
        ...

        $this->sch_teacher_row = $this->ion_auth->user_by_username($this->uri->segment(3))->row();
        $this->data['sch_teacher_id'] = $this->sch_teacher_row->id;
        $this->data['subtitle'] = $this->sch_teacher_row->username;          
 } 
```

**接下来我在视图文件**中有正确的值（'vika'），或者更准确地说是 vika 的 id（'911'），但在我的控制器的其他功能中没有。**但是我现在可以使用 jQuery $.ajax 选项数据**将这个值（sch_teacher_id）从视图传递到这个控制器：

```
eventSources: [
...         
{
                url: '/admin_schedule/get_schedule_db_recurring_events_on_daysweek/',//"<?echo $data_path?>",
                type: 'GET',
                data: {sch_teacher_id: sch_teacher_id},
                backgroundColor: 'red',
            }  
        ], 
```

接下来（在山的另一边）捕获这个 GET 参数并将其踢到模型函数中：

```
function get_schedule_db_recurring_events_on_daysweek()
    {   
        ...
        $sch_teacher_id_from_view = $this->input->get('sch_teacher_id');
        $result=$this->Schedule_model->get_schedule_recurring_events_on_daysweek($start, $end, $sch_teacher_id_from_view);
        ...
    } 
```

这就是霹雳舞。

# janrain - 如何更改 janrain 参与 facebook sigin 的文本颜色

> ID：13607120
> 
> 赞同：0
> 
> 时间：2012-11-28T14:15:52.733
> 
> 标签：janrain

我正在为我的网站使用 janrain 参与 facebook 登录，我已经自定义了按钮。无法更改 facebook 登录文本颜色。我试过`janrain.settings.fontColor = '#fff';`了，但它不起作用。

请帮助我更改 janrain engege facebook 参与的文本颜色。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T23:45:05.080

janrain.settings.fontColor 的该设置仅更改小部件顶部的操作文本的颜色。

如果您有自定义按钮并且拥有 Engage Pro 或更高版本，您应该可以使用**janrain.settings.custom = true;** 并使用**janrain.engage.signin.triggerFlow( *provider* )**为每个社交提供者创建您自己的自定义按钮（如果您还没有使用它）。这里有文档：http: [//developers.janrain.com/documentation/widgets/social-sign-in-widget/users-guide/coding-the-widget-appearance/](http://developers.janrain.com/documentation/widgets/social-sign-in-widget/users-guide/coding-the-widget-appearance/)

# php - 使用 SELECT NOT IN 查找不存在的 ID？

> ID：13607128
> 
> 赞同：3
> 
> 时间：2012-11-28T14:16:27.003
> 
> 标签：php, mysql

我有一个 ID 列表，逗号分隔存储为字符串。

123,456,789

我以前使用这样的东西来提取数据库中存在每个 ID 的每一行的数据：

```
SELECT id, name FROM line_item WHERE id IN (123,456,789) 
```

但是，我只想确定它们在数据库中不存在的 ID。例如，检查表以返回数据库中不存在的所有 ID。

我试着`NOT IN`假设它会起作用，但当然，我得到的只是每个与我的样本不匹配的 ID，这是巨大的（数千行，我们通常需要检查的少量 ID）。

```
SELECT id FROM line_item WHERE id NOT IN (123,456,789) 
```

例如：

表：ID

```
111
222
333
444
555
777
999 
```

细绳：

```
111,222,666,888,999 
```

查询应返回：

```
666,888 
```

使用 MySQL，我可以在不使用 PHP 的情况下找到那些不存在的值吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T14:24:26.997

您可以创建填充有所需`id`值的附加表，并使用带有 LEFT JOIN 和 WHERE 子句的查询 -

```
CREATE TABLE temp_table(id INT);
INSERT INTO temp_table VALUES(123),(456),(789);

SELECT t1.id FROM temp_table t1
  LEFT JOIN line_item t2
    ON t1.id = t2.id
WHERE t2.id IS NULL; 
```

另一种变体：

```
SELECT t1.id FROM (SELECT 123 id UNION SELECT 456 UNION SELECT 789) t1
  LEFT JOIN line_item t2
    ON t1.id = t2.id
WHERE t2.id IS NULL; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T14:24:28.163

`NOT IN`如您所说，将采用括号中的值并导致查询为您提供所有其他ID。

我不知道是否有办法同时处理多个数字 - 但这就是你可以用一个数字做到这一点的方法：

```
SELECT id, name, description
FROM line_item
WHERE 1 NOT IN (SELECT id FROM line_item) // Replace 1 with your numbers in a loop 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-07T07:39:55.783

在 Postgresql 上，您可以使用该`generate_series(i,j)`功能。例如，要在`id`列中查找不存在的整数，您可以编写：

```
select i from generate_series(
    (select min(id) from line_item),(select max(id) from line_item)
) as i 
where i not in (select id from line_item); 
```

如果您想使用此查询来查找第一个用作 id 的可用整数，您可以使用此查询：

```
select min(i) from generate_series(
    (select min(id) from line_item),(select max(id) from line_item)+1
) as i 
where i not in (select id from line_item); 
```

# c++ - C++ 在全局命名空间中找不到非标准 C 函数

> ID：13607129
> 
> 赞同：6
> 
> 时间：2012-11-28T14:16:31.497
> 
> 标签：c++, c, ace

我们有一个相当大的 C++ 项目，我现在正在迁移到 VS2010 并在此过程中更新一些库。到目前为止，一切都构建得很好，除了我得到（对我来说）非常奇怪的错误，其中显然没有定义许多（**编辑：**非）标准 C 函数和符号：

```
error C2039: 'strdup' : is not a member of '`global namespace''    ...\ACE_wrappers\ace\OS_NS_string.inl    222
...
error C2065: 'O_WRONLY' : undeclared identifier                    ...\ACE_wrappers\ace\OS_NS_unistd.inl    1057
... 
```

这对我来说会影响以下功能和符号：

```
strdup      getcwd      O_WRONLY
putenv      swab        O_TRUNC
access      unlink      S_IFDIR
chdir       mkdir       S_IFREG
rmdir       tempnam     O_RDONLY
isascii 
```

我尝试过的 ACE 包含文件中的`strdup`一部分是如下所示的部分：

```
ACE_INLINE char *
ACE_OS::strdup (const char *s)
{
#  if (defined (ACE_LACKS_STRDUP) && !defined(ACE_STRDUP_EQUIVALENT)) \
  || defined (ACE_HAS_STRDUP_EMULATION)
  return ACE_OS::strdup_emulation (s);
#  elif defined (ACE_STRDUP_EQUIVALENT)
  return ACE_STRDUP_EQUIVALENT (s);
#  elif defined (ACE_HAS_NONCONST_STRDUP)
  return ::strdup (const_cast<char *> (s));
#else
  return ::strdup (s);
#  endif /* (ACE_LACKS_STRDUP && !ACE_STRDUP_EQUIVALENT) || ... */
} 
```

上面和下面的其他函数有很多类似的部分，所有这些都编译得很好。

在我的情况下采取的路径是最后一条，即`return ::strdup (s);`. `::strdup`如果我在VS上按 F12，我会`string.h`进入 C 标准库的声明。

如果我删除它构建的命名空间限定符，尽管 IntelliSense 告诉我它现在是一个递归调用，所以它可能无法工作。如果我将命名空间更改为`std::`我会收到大约 270*个*错误，这一次来自其他几个项目。如果我将功能更改为`::_strdup`它构建。包括`string.h`作为第一件事没有改变。

*（注意事项：“它构建”是指“这个特定的编译器错误在那个位置消失了，但显然它仍然留下关于其他函数的错误。）*

我在这里有点不知所措。我注意到许多大型库要么在标准库上构建自己的抽象，要么提供默认情况下不存在的东西，这就是 ACE 和 ImageMagick 已经发生冲突的地方（在两者中，但`typedef`定义`ssize_t`不兼容）。由于我们引入了很多库（我现在也没有确切的概述），这很可能是另一个冲突，由错误的包含顺序和类似的事情引起。*来自 ACE 的相同包含在同一解决方案中的其他*项目中显然可以正常工作，这一事实也暗示了这一点。

任何人都知道我至少可以在这里寻找什么？构建日志`/showIncludes`只有 24k 行，所以我在那里看不到很多模式，除了`string.h`在有问题的 ACE 标头之前包含的模式。

而且我不想修改库源代码，因为如果我们更新到新版本，那只会再次咬我们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T14:45:43.010

> > “*许多标准 C 函数和符号未定义*”

`strdup`不是标准的 C 函数。它是在 POSIX 中定义的，但不是在 C 或 C++ 中定义的。引用[MSDN](http://msdn.microsoft.com/en-us/library/ms235454%28v=vs.80%29.aspx)：

> > 从 Visual C++ 2005 开始不推荐使用这些 POSIX 函数。请改用符合 ISO C++ 标准的 _strdup、_wcsdup、_mbsdup。

在我看来，您列出的符号都不是标准的 C 函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T15:13:38.210

Mark B 的评论促使我查看 12 MiB 的预处理器输出，我能够解决它。在定义`string.h`的代码片段中，`strdup`如下所示：

```
#if     !__STDC__

...

_Check_return_ _CRT_NONSTDC_DEPRECATE(_strdup) _CRTIMP char * __cdecl strdup(_In_opt_z_ const char * _Src); 
```

碰巧这个单个项目定义了`__STDC__`导致许多非标准C但仍然在C标准库中的符号（感谢Rob [φ]挑剔但没有解决问题）功能消失完全地。

我知道它们已被弃用，我收到很多警告告诉我。但如前所述，我不会为我们使用的第 3 方库维护项目特定的补丁，只是为了在更新它们时再次获得同样的乐趣。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T14:45:23.773

如果我正确理解 VS，那么`strdup`现在不推荐使用 等函数名称（我认为不符合 POSIX 标准）。您应该使用带下划线的版本。

当这发生在我身上时，我进行了全局搜索和替换，因为这似乎是一件明智的事情，并且可以使源代码保持良好状态以备将来使用（VS 2012 已经发布！:)）。

# wpf - 我将如何在 ComboBox 数据上下文中分配不同的属性值？

> ID：13607132
> 
> 赞同：0
> 
> 时间：2012-11-28T14:16:41.683
> 
> 标签：wpf, linq, linq-to-sql, wpf-controls, dynamic-linq

我想在名为 categoryList 的 ComboBox 中显示所有不同的类别

```
<DataTemplate x:Key="CategoryTemplate">
        <StackPanel Orientation="Horizontal">
            <TextBlock Text="{Binding Path=Category}"/>
        </StackPanel>
    </DataTemplate>
...
 <ComboBox Name="catagoryList" VerticalAlignment="Top" SelectionChanged="categoryList_SelectionChanged" IsSynchronizedWithCurrentItem="True" ItemsSource="{Binding}" ItemTemplate="{StaticResource CategoryTemplate}"/>
... 
```

后面的代码：

```
this.categoryList.DataContext = ldc.Books.Select(b => b.Category).Distinct(); 
```

但是，它不起作用。我怎样才能做到这一点？或者有没有其他方法可以做到这一点？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:27:53.437

将[ToList()](http://msdn.microsoft.com/en-us/library/bb342261.aspx)添加到[Distinct()](http://msdn.microsoft.com/en-us/library/bb348436.aspx)并将其分配给`ItemsSource`.

```
this.categoryList.ItemSource = ldc.Books.Select(b => b.Category).Distinct().ToList(); 
```

# node.js - 如何在节点/快递应用程序中使用虾pdf

> ID：13607134
> 
> 赞同：2
> 
> 时间：2012-11-28T14:16:51.670
> 
> 标签：node.js, pdf, prawn, child-process

在 node.js 应用程序中，我想生成 pdf 文档并将其发送回用户。我想使用 Prawn PDF，因为我以前使用过它并且使用它很舒服。

我想我应该使用节点的 child_process.spawn 来调用一个 ruby​​ 脚本（返回一个 pdf）来实现这一点，但我不知道如何实际实现它！

我正在这样做： spawn = require('child_process').spawn; pdf = spawn('my_ruby_script');

现在我如何获取返回的 pdf 文档？

谢谢，马诺

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T06:03:09.627

我最终得到了这个：

```
var spawn = require('child_process').spawn;
var child = spawn('ruby', ['print_pdf.rb', doc_id]);
var pdf = '';
child.on('data', function(data){
    pdf += data;
});
child.on('exit', function(code){
    if(code == 0){
        res.setHeader('Content-Type', 'application/pdf');
        res.send(pdf);
    }
}); 
```

ruby prawn 脚本会生成 pdf，最后只是将渲染的 pdf 作为“数据”提供给孩子。

# scala - 嵌套选项的惯用 Scala

> ID：13607136
> 
> 赞同：10
> 
> 时间：2012-11-28T14:16:54.993
> 
> 标签：scala

假设我有一个 Element 对象（实际上来自 JDom）。它可能有一个名为“Group”的子元素，也可能没有。如果是这样，那么它可能有一个名为“ID”的属性，或者它可能没有。我想要 ID 值（如果存在）。

如果是 Java，我会写。

```
private String getId(Element e) {
  for (Element child : e.getChildren()) 
    if (child.getName().equals("Group")) 
      for (Attribute a : child.getAttributes()) 
        if (a.getName().equals("ID"))
          return a.getValue();
  return null;
} 
```

在斯卡拉我有

```
 val id = children.find(_.getName == "Group") match {
        case None => None
        case Some(child) => {
            child.getAttributes.asScala.find(_.getName == "ID") match {
                case None => None
                case Some(a) => Some(a.getValue)
            }
        }
    } 
```

或者

```
val id = children.find(_.getName == "Group").
             map(_.getAttributes.asScala.find(_.getName == "ID").
             map(_.getValue).getOrElse("")).getOrElse("") 
```

他们的哪个或第三个更惯用

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-28T14:21:32.983

这个怎么样？

```
val idOption = children
   .find(_.getName == "Group")
   .flatMap(_.getAttributes.asScala.find(_.getName == "ID")) 
```

或者，使用 for 理解：

```
val idOption =
  for {
    child <- children.find(_.getName == "Group")
    id <- child.getAttributes.asScala.find(_.getName == "ID")
  } yield id 
```

# javascript - 如何获取具有相同类的链接的href属性

> ID：13607139
> 
> 赞同：1
> 
> 时间：2012-11-28T14:17:07.223
> 
> 标签：javascript, jquery

我是 jquery 的新手。我有这样的链接..

```
<div>title 1<a href="/delete/1" class="del">Delete</a></div>
<div>title 2<a href="/delete/2" class="del">Delete</a></div> 
```

jQuery

```
 $(".del").click(function () {
     alert($(this).attr('href'));
     event.preventDefault();
  }); 
```

我正在尝试获取 href 属性。但它说对象对象。我试图弄清楚我做错了什么。我该如何解决这个问题。

我很感激任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T14:21:34.863

也许试试这个：

```
alert($(this).prop('href')); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T14:23:28.490

采用

```
alert($(this).prop('href')); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T14:24:08.293

您的代码段中唯一错误的是您引用了一个`event`未声明的变量。

这对我有用：

```
$(".del").click(function (event) {
	alert($(this).attr('href'));
	event.preventDefault();
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<div>title 1<a href="/delete/1" class="del">Delete</a></div>
<div>title 2<a href="/delete/2" class="del">Delete</a></div>
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T14:37:41.983

看到评论和建议的答案，我尝试使用这样的单个 HTML 页面来隔离您的问题：

```
<html>
<head>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
<script type="text/javascript">
$(function(){
    $('.del').click(function (event) {
        event.preventDefault();
        alert($(this).attr('href'));
    });
});
</script>
</head>
<body>
<div>title 1<a href="/delete/1" class="del">Delete</a></div>
<div>title 2<a href="/delete/2" class="del">Delete</a></div>
</body>
</html> 
```

对此进行测试时，代码可以正常工作。我还比较了[.prop()](http://api.jquery.com/prop/)与[.attr()](http://api.jquery.com/attr/)以了解人们为什么建议这个答案。请仔细注意这 2 个文档，因为将一个与另一个交换出来并不是真正解决这种情况的问题。问题作者需要提供发生错误的更具体的测试用例，以便我们提供结论性的答案。

# wolfram-mathematica - Mathematica 中曲线下的面积

> ID：13607141
> 
> 赞同：-1
> 
> 时间：2012-11-28T14:17:09.283
> 
> 标签：wolfram-mathematica, area

问题：

我有两个单独的值列表，X={x1,x2....x2059} 和 Y={Y1,Y2....Y2059}。使用 Mathematica 函数“转置”我可以获得一个新列表 Z = {{x1,y1},{x2,y2},...{x2059,y2059}}。使用 ListLinePlot[Z] 我制作了情节。现在，问题是：我如何计算绘制曲线下的面积。我不能使用 NIntegrate 或 Integrate。我可以使用插值功能吗？如何？即使使用梯形规则（由我实施），我也没有获得好的结果。

数据来自载荷变形图。这意味着对于前半部分数据，曲线增长。从数据的第二部分，曲线回到零（接近零）。特别是，X = 变形，Y = 载荷。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T14:51:47.407

```
(*create a simulation for your points*)
npts = 2058;
x = Sort@RandomReal[100, npts];
y = Join[Sort@RandomReal[100, npts/2], Reverse@Sort@RandomReal[100, npts/2]];
f = Interpolation[Transpose@{x, y}, InterpolationOrder -> 1];

(*Plot and Integrate*)
Plot[f[t], {t, Min@x, Max@x}, Filling -> Axis]
NIntegrate[f[t], {t, Min@x, Max@x}, Method -> "LocalAdaptive"] 
```

![数学图形](../Images/bf8fe664fd89dd045f380934a1863a7d.png)

回答：

```
(* 5006.01 *) 
```

# android - Android操作栏溢出

> ID：13607142
> 
> 赞同：-1
> 
> 时间：2012-11-28T14:17:13.483
> 
> 标签：android

我正在阅读[这篇文章](http://www.intertech.com/Blog/Post/Android-Action-Bar-from-the-Options-Menu.aspx)，并且很惊讶地看到：

> 您可能会注意到 3 个原始菜单项中只有 2 个显示在新的操作栏中 [...]。要获取其他菜单项，您必须转到“溢出菜单”。

我感到惊讶的原因是，当我使用在 Android 4.1.2 上运行的模拟 Nexus（即：没有菜单按钮）做同样的事情时，溢出按钮不会出现[在菜单](http://www.intertech.com/PostingImages/Android-Action-Bar-from-the-Options-Menu_E1C5/image_thumb_7.png)中，而是直接[出现在操作栏中](http://developer.android.com/images/ui/actionbar-stacked.png).

知道为什么行为不同吗？

**注意**：在我的 AndroidManifest.xml 中，我使用的是 minSdkVersion="11"

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T14:21:13.373

缺少物理按钮的设备的导航栏中显示的按钮不是溢出按钮；这是传统的菜单按钮。您看到的行为是正确的、预期的行为。

# php - 令人沮丧的 MySQL/PHP 问题，我似乎无法理解

> ID：13607151
> 
> 赞同：-1
> 
> 时间：2012-11-28T14:17:35.653
> 
> 标签：php, html, mysql

请有人帮助我，为什么我的代码不与 mySQL 表对话？我真的不知道为什么它不起作用，我花了几天时间寻找解决方案，非常感谢您的帮助......

我的html...

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<script type="text/javascript" src="Locus.js"></script> <!-- LINKS TO THE EXTERNAL JAVASCRIPT -->

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Locus of control test</title>
<link href="Locus.css" rel="stylesheet" type="text/css" /> <!-- LINKS TO THE EXTERNAL CS SHEET -->

</head>

<body>

<form action="Locus.php" id="Locus" method="post" name="Locus" onsubmit="validateForm()"> <!-- GIVES A LINK TO THE PHP FORM AND THE METHOD -->

<h4>Surname: <input type="text" name="surname"/> <br/>Prison: <input type="text" name="prison"/><br/>National Insurance: <input type="text" name="NI"/></h4>
<h3> Please carefully read all the instructions given on the left hand panel.</h3>
<h1 class="Header"> LOCUS OF CONTROL</h1>
<h2>Please click submit ONLY when all questions have been completed <br/> <input name="submit" id="submit" type="submit" value="Check & Submit" /></h2>

<p>1\. I can anticipate difficulties and take action to avoid them. <br />
<input type="radio" name="Q1" value="4" /> Always Agree <input type="radio" name="Q1" value="3" /> Agree <input type="radio" name="Q1" value="2" /> Unsure <input type="radio" name="Q1" value="1" /> Disgree <input type="radio" name="Q1" value="0" /> Always Disagree
</p>

<p>2\. A great deal of what happens to me is just a matter of chance.  <br />
<input type="radio" name="Q2" value="0" /> Always Agree <input type="radio" name="Q2" value="1" /> Agree <input type="radio" name="Q2" value="2" /> Unsure <input type="radio" name="Q2" value="3" /> Disgree <input type="radio" name="Q2" value="4" /> Always Disagree
</p>

<p>3\. Everyone knows that luck or chance determines the future.  <br />
<input type="radio" name="Q3" value="0" /> Always Agree <input type="radio" name="Q3" value="1" /> Agree <input type="radio" name="Q3" value="2" /> Unsure <input type="radio" name="Q3" value="3" /> Disgree <input type="radio" name="Q3" value="4" /> Always Disagree
</p>

<p>4\. I can control my problems only if I have outside support.  <br />
<input type="radio" name="Q4" value="0" /> Always Agree <input type="radio" name="Q4" value="1" /> Agree <input type="radio" name="Q4" value="2" /> Unsure <input type="radio" name="Q4" value="3" /> Disgree <input type="radio" name="Q4" value="4" /> Always Disagree
</p>

<p>5\. When I make plans I am almost certain I can make them work. <br />
<input type="radio" name="Q5" value="4" /> Always Agree <input type="radio" name="Q5" value="3" /> Agree <input type="radio" name="Q5" value="2" /> Unsure <input type="radio" name="Q5" value="1" /> Disgree <input type="radio" name="Q5" value="0" /> Always Disagree
</p>

<p>6\. My problems will dominate all my life. <br />
<input type="radio" name="Q6" value="0" /> Always Agree <input type="radio" name="Q6" value="1" /> Agree <input type="radio" name="Q6" value="2" /> Unsure <input type="radio" name="Q6" value="3" /> Disgree <input type="radio" name="Q6" value="4" /> Always Disagree
</p>

<p>7\. My mistakes and problems are my responsibility to deal with. <br />
<input type="radio" name="Q7" value="4" /> Always Agree <input type="radio" name="Q7" value="3" /> Agree <input type="radio" name="Q7" value="2" /> Unsure <input type="radio" name="Q7" value="1" /> Disgree <input type="radio" name="Q7" value="0" /> Always Disagree
</p>

<p>8\. Becoming a success is a matter of hard work, luck has little or nothing to do with it. <br />
<input type="radio" name="Q8" value="4" /> Always Agree <input type="radio" name="Q8" value="3" /> Agree <input type="radio" name="Q8" value="2" /> Unsure <input type="radio" name="Q8" value="1" /> Disgree <input type="radio" name="Q8" value="0" /> Always Disagree
</p>

<p>9\. My life is controlled by outside actions and events.  <br />
<input type="radio" name="Q9" value="0" /> Always Agree <input type="radio" name="Q9" value="1" /> Agree <input type="radio" name="Q9" value="2" /> Unsure <input type="radio" name="Q9" value="3" /> Disgree <input type="radio" name="Q9" value="4" /> Always Disagree
</p>

<p>10\. I believe people are victims of circumstances beyond their control.   <br />
<input type="radio" name="Q10" value="0" /> Always Agree <input type="radio" name="Q10" value="1" /> Agree <input type="radio" name="Q10" value="2" /> Unsure <input type="radio" name="Q10" value="3" /> Disgree <input type="radio" name="Q10" value="4" /> Always Disagree
</p>

<p>11\. To continually manage my problems I need professional help. <br />
<input type="radio" name="Q11" value="0" /> Always Agree <input type="radio" name="Q11" value="1" /> Agree <input type="radio" name="Q11" value="2" /> Unsure <input type="radio" name="Q11" value="3" /> Disgree <input type="radio" name="Q11" value="4" /> Always Disagree
</p>

<p>12\. When I am under stress the tightness in my muscles is due to things outside my control.<br />
<input type="radio" name="Q12" value="0" /> Always Agree <input type="radio" name="Q12" value="1" /> Agree <input type="radio" name="Q12" value="2" /> Unsure <input type="radio" name="Q12" value="3" /> Disgree <input type="radio" name="Q12" value="4" /> Always Disagree
</p>

<p>13\. 1 believe a person really can be master of his own fate.<br />
<input type="radio" name="Q13" value="4" /> Always Agree <input type="radio" name="Q13" value="3" /> Agree <input type="radio" name="Q13" value="2" /> Unsure <input type="radio" name="Q13" value="1" /> Disgree <input type="radio" name="Q13" value="0" /> Always Disagree
</p>

<p>14\. It is impossible to control irregular fast breathing when I am having difficulties.<br />
<input type="radio" name="Q14" value="0" /> Always Agree <input type="radio" name="Q14" value="1" /> Agree <input type="radio" name="Q14" value="2" /> Unsure <input type="radio" name="Q14" value="3" /> Disgree <input type="radio" name="Q14" value="4" /> Always Disagree
</p>

<p>15\. I understand why my problems vary so much from one occasion to another. <br />
<input type="radio" name="Q15" value="4" /> Always Agree <input type="radio" name="Q15" value="3" /> Agree <input type="radio" name="Q15" value="2" /> Unsure <input type="radio" name="Q15" value="1" /> Disgree <input type="radio" name="Q15" value="0" /> Always Disagree
</p>

<p>16\. I am confident of being able to deal successfully with future problems.<br />
<input type="radio" name="Q16" value="4" /> Always Agree <input type="radio" name="Q16" value="3" /> Agree <input type="radio" name="Q16" value="2" /> Unsure <input type="radio" name="Q16" value="1" /> Disgree <input type="radio" name="Q16" value="0" /> Always Disagree
</p>

<p>17\. In my case maintaining control over my problems is mainly due to luck. <br />
<input type="radio" name="Q17" value="0" /> Always Agree <input type="radio" name="Q17" value="1" /> Agree <input type="radio" name="Q17" value="2" /> Unsure <input type="radio" name="Q17" value="3" /> Disgree <input type="radio" name="Q17" value="4" /> Always Disagree
</p>

<p>18\. I have often been blamed for events beyond my control. <br />
<input type="radio" name="Q18" value="0" /> Always Agree <input type="radio" name="Q18" value="1" /> Agree <input type="radio" name="Q18" value="2" /> Unsure <input type="radio" name="Q18" value="3" /> Disgree <input type="radio" name="Q18" value="4" /> Always Disagree
</p>
<h5>Please click 'submit' at the start of this test</h5>
</form>
</body>
</html> 
```

这是我的php....

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="Locus.css" rel="stylesheet" type="text/css" /> <!-- LINKED ATTACHED STYLE SHEET-->
<title>Locus Test Complete</title>
</head>
<h4>THANK YOU FOR SUBMITTING THIS TEST, PLEASE CHOOSE ANOTHER FROM THE MENU BAR.</h4>

<body>
<?php
/*DECLARING THE VARIABLES FOR ACCESS*/
$username="root";
$password="";
$database_server="localhost";

/*CONNECTING TO THE SERVER*/
$database="locus";
mysql_connect($database_server,$username,$password) or die("cannot connect");

/*CONNECTING TO THE DATABASE*/
@mysql_select_db($database) or die( "Unable to select database");

/*CHECK THE STATUS AND DECLARE THE VARIABLES*/
$_POST = array( );

if( isset( $_POST['surname'])) { 
    $Surname = $_POST['surname'];
} else { 
    $Surname = "";
} 

if( isset( $_POST['prison'])) { 
    $Prison = $_POST['prison'];
} else { 
    $Prison = "";
}
/*SHORTHAND WAY TO CHECK THE STATUS AND DECLARE THE VARIABLES*/
$NI = isset( $_POST['NI']) ? $_POST['NI'] : "";
$Q1 = isset( $_POST['Q1']) ? $_POST['Q1'] : "";
$Q2 = isset( $_POST['Q2']) ? $_POST['Q2'] : "";
$Q3 = isset( $_POST['Q3']) ? $_POST['Q3'] : "";
$Q4 = isset( $_POST['Q4']) ? $_POST['Q4'] : "";
$Q5 = isset( $_POST['Q5']) ? $_POST['Q5'] : "";
$Q6 = isset( $_POST['Q6']) ? $_POST['Q6'] : "";
$Q7 = isset( $_POST['Q7']) ? $_POST['Q7'] : "";
$Q8 = isset( $_POST['Q8']) ? $_POST['Q8'] : "";
$Q9 = isset( $_POST['Q9']) ? $_POST['Q9'] : "";
$Q10 = isset( $_POST['Q10']) ? $_POST['Q10'] : "";
$Q11 = isset( $_POST['Q11']) ? $_POST['Q11'] : "";
$Q12 = isset( $_POST['Q12']) ? $_POST['Q12'] : "";
$Q13 = isset( $_POST['Q13']) ? $_POST['Q13'] : "";
$Q14 = isset( $_POST['Q14']) ? $_POST['Q14'] : "";
$Q15 = isset( $_POST['Q15']) ? $_POST['Q15'] : "";
$Q16 = isset( $_POST['Q16']) ? $_POST['Q16'] : "";
$Q17 = isset( $_POST['Q17']) ? $_POST['Q17'] : "";
$Q18 = isset( $_POST['Q18']) ? $_POST['Q18'] : "";

/*PLAVE THE VALUES OF THE VARIABLES WITHIN THE DATABASE TABLE*/
$query = "INSERT INTO locus.locusofcontrolscores VALUES 
('','$Surname','$Prison','$NI','$Q1','$Q2','$Q3','$Q4','$Q5','$Q6','$Q7','$Q8','$Q9','$Q10','$Q11','$Q12','$Q13','$Q14','$Q15','$Q16','$Q17','$Q18')";

/*CREATE A QUERY FROM THE VARIABLE*/
mysql_query($query);

/*CLOSE THE SERVER CONNECTION*/
mysql_close();

?>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T14:20:16.787

```
$_POST = array( ); 
```

错了，去掉这一行。

`$_POST`是一个`array()`你不必声明这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T14:28:41.270

可以解决您的问题的事情：

*   mysql_query($query) 或 die(mysql_error() . ' ' . $query);
*   不要清除帖子数组
*   不要抑制数据库连接或至少将错误放入模具中

您可能应该解决的问题，但可能不是您的问题：

*   $sql注入通过将变量放入sql而不转义
*   他们使用 mysql 而不是 mysqli 验证数据，做
*   html 开始使用单选按钮后的控制器内容，例如
*   复选框没有为您的 url 使用绝对路径
*   不要使用 root 作为你的用户名 db 并且没有密码
*   头部和身体之间不应有 html。

另外我不确定您是否可以将“”作为自动增量ID。我会把 Null 放在那里。更好的是，我会明确地将要添加的列放入表中。如果你不这样做，你以后会很头疼……说你有相同的插入到 1000 个位置……好吧，你添加一个列，现在你必须更新 1000 个位置。

此外，我会回显您所做的 sql 语句，并尝试通过命令提示符或 phpmyadmin 运行它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T14:28:08.763

according the screed shot in comment you are checking the structure ... click on the **Browse** tab than you will see the content

also try

```
mysql_query($query) or die(mysql_error()); 
```

to see the error in query

## Warning : your code is vulnerable to SQL Injunction

also `MySql_*` function are deprecated use `pdo` or `mysqli`

# php - 系统 MySQL 中的出牙错误

> ID：13607152
> 
> 赞同：0
> 
> 时间：2012-11-28T14:17:40.530
> 
> 标签：php, mysql, mysqli

在旧的基于遗留系统的系统中，我们对用户库存进行更新。库存包含许多不同的项目，用户每个项目 id 将有一行，每行是他们拥有的该项目的数量。

现在，在这个相当古老和庞然大物的代码中的某个地方是一个问题，用户最终可能会得到一个负数量的项目。这不应该发生。

我们认为我们可以尝试创建一些报告来帮助我们找到问题，而不是从顶部处理问题并遍历与库存表交互的每段代码。

在我开始实施一些我认为可以解决这个问题的东西之前，我想我会把它发布给社区，看看他们如何解决这个问题。

也许可以从创建更新 MySQL 规则开始，将活动插入另一个表以进行更仔细的检查等。要有创意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:33:18.827

如果您添加时间戳字段，那么您将知道最后一次操作的执行时间 - 从中​​，您可以在 mysql 日志中找到更新条目，并可能与应用程序日志进行协调。

或者，您可以在桌子上设置触发器...

```
CREATE TRIGGER no_negatives_in_yourtable
BEFORE UPDATE ON yourtable
FOR EACH ROW
BEGIN
  IF (NEW.value<0) THEN
     /* log it (NB will be rolled back if subsequent statement enabled */
     INSERT INTO badthings (....) VALUES (...);
     /* this forces the operation to fail */
     DROP TABLE `less than zero value in yourtable`;
  END IF;
END 
```

# logging - 运行 Lotus 脚本代理未登录 Lotus Notes 用户日志

> ID：13607153
> 
> 赞同：0
> 
> 时间：2012-11-28T14:17:40.667
> 
> 标签：logging, lotus-domino, lotus, lotusscript, agents

我编写了一个基本的 Lotus 脚本代理，它在消息框中显示“Hello World”。当我手动运行此代理时，它会成功执行，但运行事件未在我的本地日志文件中创建日志条目。代理从我的本地邮件文件运行。我想要这些日志以运行其他复杂的代理并跟踪自动计划和触发新邮件等事件。

当我从其他系统执行时，代理正在被记录。这可能是与设置相关的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T21:03:44.113

当您使用操作菜单或从设计器中的代理列表手动运行代理时，它不会记录到客户端或服务器上的 Notes 日志，除非您明确告诉它使用 NotesLog 类 OpenNotesLog 和相关调用。

当您发出消息框时，计划代理、后台代理和从 Web 调用的代理会写入服务器控制台和 Notes 日志。还会记录计划或后台代理中的打印语句。从 Web 运行的代理中的打印语句被发送回浏览器。

我不建议使用代理记录到 Notes 日志。它很快变得非常混乱，很难找到您的消息。使用 NotesLog 类中的 AgentLog 或 EmailLog 或获取 OpenNTF OpenLog 工具。[OpenLog 主页](http://www.openntf.org/Projects/pmt.nsf/ProjectLookup/OpenLog)Julian 使用该工具做得很好。

快乐编码。

/新人

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T04:11:08.740

如果您只想进行一些“调试”，请尝试使用“打印”，因为这会在您的笔记客户端状态栏中打印一些内容。

另一个提示是使用“messagebox”命令，这将在服务器控制台（如果在服务器上运行）或本地日志（如果在本地运行）打印文本。

# c - char* 和 char[] 不是同一类型？

> ID：13607155
> 
> 赞同：4
> 
> 时间：2012-11-28T14:17:45.927
> 
> 标签：c

> **可能重复：**
> [为什么在写入字符串时会出现分段错误？](https://stackoverflow.com/questions/164194/why-do-i-get-a-segmentation-fault-when-writing-to-a-string)

我的 C 代码遇到了一个奇怪的问题。我正在尝试使用 strtok 函数拆分字符串，但出现访问冲突异常。这是我的代码：

```
char *token;
char *line = "LINE TO BE SEPARATED";
char *search = " ";
token = strtok(line, search); <-- this code causes crash 
```

但是，如果我更改`char *line`为`char line[]`，一切都会按预期进行，并且不会出现任何错误。

任何人都可以解释为什么我会用 strtok 得到这种（对我来说很奇怪）行为？我认为 char* 和 char[] 是相同且精确的类型。

**更新**

我正在使用 MSVC 2012 编译器。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T14:19:51.267

[`strtok()`](http://en.cppreference.com/w/c/string/byte/strtok)修改它解析的字符串。如果您使用：

```
char* line = "..."; 
```

然后正在修改字符串文字，这是未定义的行为。当您使用：

```
char[] line = "..."; 
```

然后正在修改字符串文字的*副本。*

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-28T14:20:06.133

分配`"LINE TO BE SEPARATED"`给 时`char *line`，您`line`指向写入程序可执行文件中的常量字符串。您无权对其进行修改。您应该将这类变量声明为`const char *`.

当声明为 时`char[]`，您的字符串将在函数的堆栈上声明。因此，您可以对其进行修改。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-28T14:20:17.610

```
char *s = "any string" 
```

是指向字符串或字符数组的指针的定义。在上面的例子`s`中是指向一个常量字符串

```
char s[] = "any string" 
```

是 char(s) 数组的定义。在上面的例子`s`中是一个包含字符的字符数组`{'a','n','y',' ','s','t','r,'i','n','g','\0'}`

`strtock`更改输入字符串的内容。`'\0'`它用（null）替换字符串中的分隔符。

所以，你不能`strtok`像这样使用常量字符串：

```
char *s="any string" 
```

您可以将 strtok 与动态内存或静态内存一起使用，例如：

```
char *s = malloc(20 * sizeof(char)); //dynamic allocation for string
strcpy(s,"any string");

char s[20] = "any string"; //static allocation for string
char s[] = "any string"; //static allocation for string 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T14:25:30.523

要回答您的问题：`char* and char[] are not same type?`

这个：

```
char *line = "LINE TO BE SEPARATED"; 
```

是在只读内存中定义的字符串文字。您无法更改此字符串。

然而，这：

```
char line[] = "LINE TO BE SEPARATED"; 
```

现在是放置在堆栈上的字符数组（引用的文本被复制到数组中）。您可以修改此数组中的字符。

所以它们都是字符数组，但是放在内存的不同部分。

# emacs - 在 Emacs 中从 Bibtex 文件中自动完成 Pandoc 样式的引用

> ID：13607156
> 
> 赞同：15
> 
> 时间：2012-11-28T14:17:45.320
> 
> 标签：emacs, autocomplete, markdown, bibtex, pandoc

## Pandoc 风格的引用

[Pandoc](http://www.johnmacfarlane.net/pandoc/)使用 Markdown 格式，支持使用 BibTeX 文件中的键自动引用。格式的一些示例是：

`Blah blah [@doe99]`

`Blah blah [@doe99, p.33]`

`Blah blah [see @doe99, pp. 33-35; also @smith04, ch. 1].`

## Emacs 和 Pandoc/Markdown

有一个[Pandoc-Mode](http://wwwuser.gwdg.de/~jkremer/pandoc-mode.html)可以通过 Emacs 与 Pandoc 交互，它可以与[Markdown-Mode](http://jblevins.org/projects/markdown-mode/)结合使用。Pandoc-Mode 和 Markdown-Mode 不支持自动完成来自 bibtex 文件的引用。对 TeX 文件具有这种支持的模式是[Reftex](https://www.gnu.org/software/auctex/reftex.html)。我正在寻找一种在编辑 Markdown 文件时获得 Reftex 样式的自动完成功能的方法。

## 在其他编辑器中自动完成

Textmate 有一个解决方案：[从 textmate 中的 bibtex 文件中自动完成 pandoc 样式的引用](http://snipplr.com/view/19519/)。

该功能也在[Vim-Pandoc](https://github.com/vim-pandoc/vim-pandoc)中：

> 自动补全是通过破解[LaTeX Box 的](http://www.vim.org/scripts/script.php?script_id=3109) bibtex 引用补全实现来实现的，即使结果看起来与原来的不太一样。

# 如何从 Emacs 中的 bibtex 文件中自动完成 pandoc 风格的引用？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-28T17:05:20.477

为此，您可以使用`reftex-citation`.

## 设置

### 启用 RefTeX

您必须为正在编辑的文件启用 RefTeX，这可以通过`M-x reftex-mode`或设置[文件变量](http://www.gnu.org/software/emacs/manual/html_node/emacs/Specifying-File-Variables.html)来完成，例如添加`-*- mode: reftex; -*-`到文件的第一行。

### 告诉 RefTeX 你的参考书目在哪里

你需要告诉 RefTeX[你的参考书目文件在哪里](https://tex.stackexchange.com/a/54825/5701)。这可以通过将以下内容添加到您的 .emacs 来完成（并根据您的设置编辑路径）：

```
;; So that RefTeX finds my bibliography
(setq reftex-default-bibliography '("path/to/bibfile.bib")) 
```

请注意，这`reftex-default-bibliography`是一个列表，因此您可以向其添加多个路径。

如果您对不同的文件使用不同的参考书目，最好将每个文件的参考书目告诉 RefTeX。恐怕我只知道一种丑陋的方法来做到这一点。这个想法是，由于 RefTeX 可以从 LaTeX 宏中提取正确的参考书目，因此您可以在评论中嵌入 LaTeX 宏。因此，您可以将这样的注释与参考书目规范一起添加到 Pandoc：

```
bibliography::bibliography_name.bib
<!-- \bibliography{bibliography_name} So that RefTeX knows about the bibliography --> 
```

### 告诉 RefTeX 如何格式化引文

要`reftex-citation`以 Pandoc 使用的格式插入，您必须进行自定义[`reftex-cite-format`](http://www.gnu.org/software/auctex/manual/reftex/reftex_60.html)，例如将以下内容插入到您的 .emacs 中：

```
(eval-after-load 'reftex-vars
  '(progn 
     (setq reftex-cite-format '((?\C-m . "[@%l]"))))) 
```

您也可能希望包含其他格式。有关如何执行此操作的说明，请参阅[https://tex.stackexchange.com/a/31992/5701](https://tex.stackexchange.com/a/31992/5701)。请注意，此设置是全局设置，因此如果您还将 RefTeX 用于 LaTeX，它也会受到影响。

## 利用

要插入引文，请执行`M-x reftex-citation`或`C-c [`然后按`Enter`，您可以在参考书目中插入搜索词以进行搜索。然后 RefTeX 将插入您以 Pandoc 格式选择的参考书目项目的键。

# php - 带有标题文本链接的wordpress画廊

> ID：13607157
> 
> 赞同：0
> 
> 时间：2012-11-28T14:17:48.377
> 
> 标签：php, html, css, wordpress

我遇到了问题，我正在尝试在 wordpress 中创建一个图库，单击标题文本会将我重定向到附件页面，而单击缩略图将打开图片/图库本身。这是类似的东西[http://themes.themolitor.com/wphud/category/portfolio/](http://themes.themolitor.com/wphud/category/portfolio/)

# r - 使用“While”功能计算循环次数

> ID：13607159
> 
> 赞同：0
> 
> 时间：2012-11-28T14:17:48.127
> 
> 标签：r, while-loop

我想计算函数在超出条件之前重复的次数。例如;

```
y=0
while(y<10) {
  y=y+2
  print(y)
}

[1] 2
[1] 4
[1] 6
[1] 8
[1] 10 
```

显然，函数重复了 5 次，但是我如何在 R 中显示呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T14:21:24.620

你几乎拥有它。

```
y <- i <- 0
while(y < 10) {
  i <- i + 1
  y <- y + 2
  print(y)
}
print(sprintf("The loop repeated %s times.", i)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T14:32:43.743

尝试使用递归。例如，您要将限制设置为执行五次。

```
       功能测试（int y，int 当前，int 限制）{
      如果（电流>限制）返回；
      打印（y）；
      测试（y+2，电流+1，限制）；

}

```

在主代码中调用该函数：

```
    诠释开始=0；
     测试（开始，1,5）；

```

# ios - 调整搜索结果表视图的大小

> ID：13607160
> 
> 赞同：2
> 
> 时间：2012-11-28T14:17:53.330
> 
> 标签：ios, uitableview, searchdisplaycontroller

我在 ViewController 中实现 SearchDisplayController。它工作正常，除了一件事：我正在控制 searchResultTableView 属性以调整显示结果的 tableView 的大小，此控件是在 saarchBar 的 textDidChange 方法中完成的。

但是当我输入第一个字符时，tableView 不会调整大小，只有在我输入第二个字符时才会调整大小。这是我的代码：

```
- (void) searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText
{
    CGRect tableFrame= self.searchDisplayController.searchResultsTableView.frame;
    tableFrame.size.height=400;
    tableFrame.size.width=300;
    [self.searchDisplayController.searchResultsTableView setFrame:tableFrame];
    [self.searchDisplayController.searchResultsTableView reloadData];
} 
```

我还尝试在 searchDisplayControllerDidBeginSearch、didLoadSearchResultTableView 或 viewDidLoad 方法中调整 tableView 的大小，但它没有用。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T11:44:45.480

```
- (void)searchDisplayController:(UISearchDisplayController *)controller didShowSearchResultsTableView:(UITableView *)tableView 
```

为我工作

# c++ - gpsd客户端数据缓冲区

> ID：13607163
> 
> 赞同：2
> 
> 时间：2012-11-28T14:18:10.640
> 
> 标签：c++, gps, buffer, nmea, gpsd

我正在开发一个 C++ 应用程序，它应该使用 gpsd 检索收到的 $GPGGA 类型的 NMEA 语句。这个想法是大约每秒从 gpsd 读取一次并解析最后收到的 $GPGGA 句子，提取我感兴趣的两个字段：质量指标和参考站 ID。我使用了 C++ libgpsmm 库，定期调用 to`gpsmm::read()`和 to `gpsmm::data()`，直接访问客户端数据缓冲区。

起初，我使用 gpsfake 和伪造的 GPS 日志进行了几次测试（指定 gpsfake 选项“-c 0.5”，以便每秒有两个句子）。当两次请求 gpsd 之间的时间小于或等于 400ms 时，结果正常。如果我尝试更长的时间，结果是出乎意料的，每次阅读一段 NMEA 句子，其中包含大量重复数据以及一些截断的句子。当我尝试使用每秒写入约 40 个句子的真正 GPS 时，情况变得更糟：在这种情况下，读取之间的时间应该是 10 毫秒或更短，以便获得正确的结果。

以下是打印接收到的 NMEA 语句的更简单程序。它运行良好，与模拟甚至与真正的 GPS 一起使用。但是如果我取消注释 usleep() 调用，这使得程序每秒检查一次缓冲区，客户端数据缓冲区不会给出合理的结果。

```
#include <iostream>

#include "libgpsmm.h"

using namespace std;

#define WAITING_TIME 5000000
#define RETRY_TIME 5
#define ONE_SECOND 1000000

int main(void)
{
    for(;;){
        //For version 3.7
        gpsmm gps_rec("localhost", DEFAULT_GPSD_PORT);

        if (gps_rec.stream(WATCH_ENABLE|WATCH_NMEA) == NULL) {
            cout << "No GPSD running. Retry to connect in " << RETRY_TIME << " seconds." << endl;
            usleep(RETRY_TIME * ONE_SECOND);
            continue;    // It will try to connect to gpsd again
        }

        const char* buffer = NULL;

        for (;;) {
            struct gps_data_t* newdata;

            if (!gps_rec.waiting(WAITING_TIME))
                continue;

            if ((newdata = gps_rec.read()) == NULL) {
                cerr << "Read error.\n";
                break;
            } else {
                buffer = gps_rec.data();

                // We print the NMEA sentences!
                cout << "***********" << endl;
                cout << buffer << endl;            

                //usleep(1000000);
            }
        }
    }
} 
```

这是注释了 usleep() 调用的输出（即不断读取数据）：

```
$      ./GPSTest1
***********
{"class":"VERSION","release":"3.7","rev":"3.7","proto_major":3,"proto_minor":7}
***********
{"class":"WATCH","enable":true,"json":false,"nmea":true,"raw":0,"scaled":false,"timing":false}
***********
$GPGGA,202010.00,3313.9555651,S,06019.3785868,W,4,09,1.0,39.384,M,16.110,M,10.0,*46<CR><LF>
***********
$GPGGA,202011.00,3313.9555664,S,06019.3785876,W,4,09,1.0,39.386,M,16.110,M,11.0,*4D<CR><LF>
***********
$GPGGA,202012.00,3313.9555668,S,06019.3785882,W,4,09,1.0,39.394,M,16.110,M,12.0,*49<CR><LF>
***********
$GPGGA,202013.00,3313.9555673,S,06019.3785911,W,4,09,1.0,39.395,M,16.110,M,13.0,*49<CR><LF>
***********
$GPGGA,202014.00,3313.9555670,S,06019.3785907,W,4,09,1.0,39.409,M,16.110,M,14.0,*4F<CR><LF>
***********
$GPGGA,202015.00,3313.9555657,S,06019.3785905,W,4,09,1.0,39.395,M,16.110,M,15.0,*4A<CR><LF> 
```

这是注释行时的输出（即每秒检查一次缓冲区）：

```
$    ./GPSTest2
***********
{"class":"VERSION","release":"3.7","rev":"3.7","proto_major":3,"proto_minor":7}
***********
{"class":"DEVICE","path":"/dev/pts/0","activated":"2012-11-05T23:48:38.110Z","driver":"Generic NMEA","native":0,"bps":4800,"parity":"N","stopbits":1,"cycle":1.00}
$GPGGA,202013.00,3313.9555673,S,06019.3785911,W,1,09,1.0,39.395,M,16.110,M,13.0,*49<CR><LF>
0}
$GPGGA,202013.00,3313.9555673,S,06019.3785911,W,1,09,1.0,39.395,M,16.110,M,13.0,*49<CR><LF>
":"Generic NMEA","native":0,"bps":4800,"parity":"N","stopbits":1,"cycle":1.00}
$GPGGA,202013.00,3313.9555673,S,06019.3785911,W,1,09,1.0,39.395,M,16.110,M,13.0,*49<CR><LF>

***********
$GPGGA,202013.00,3313.9555673,S,06019.3785911,W,1,09,1.0,39.395,M,16.110,M,13.0,*49<CR><LF>
***********
$GPGGA,202016.00,3313.9555642,S,06019.3785894,W,1,09,1.0,39.402,M,16.110,M,16.0,*4E<CR><LF>
$GPGGA,202017.00,3313.9555643,S,06019.3785925,W,1,09,1.0,39.404,M,16.110,M,17.0,*42<CR><LF>
$GPGGA,202017.00,3313.9555643,S,06019.3785925,W,1,09,1.0,39.404,M,16.110,M,17.0,*42<CR><LF>
$GPGGA,202017.00,3313.9555643,S,06019.3785925,W,1,09,1.0,39.404,M,16.110,M,17.0,*42<CR><LF>
*********** 
```

有什么建议吗？起初，我试图直接分析`gps_data_t`结构，但与在 NMEA 语句中的搜索相比，在结构的所有字段中，这样识别质量指标和参考站 ID 似乎更难。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T01:26:49.060

我不熟悉 gpsd 服务，但是您所描述的看起来很像接收缓冲区被损坏（覆盖）。GPS 接收器不断输出 NMEA 信息，当您的应用程序处于休眠状态时，这些字符将累积在缓冲区中，如果接收到的字符过多，则缓冲区将被覆盖。

要么增加串行端口接收缓冲区大小（如果可能），要么在唤醒后清除缓冲区，然后等待下一个 GGA 消息（在最坏的情况下可能长达一秒钟）。

The GPS receiver should be configured to output information at a 1Hz (once per second), in this case the the device should only output about 8 sentances per second. If you're seeing 40 sentances then your receiver would seem to be outputting information at around 5Hz which sounds like overkill for your particular interest.

# r - 如何转换时间和日期

> ID：13607168
> 
> 赞同：3
> 
> 时间：2012-11-28T14:18:15.477
> 
> 标签：r, datetime, time

我有一个问题。如何将该`20110711201023`日期和时间格式转换为小时数。这是我用于图像分析的软件的输出，我无法更改它。定义开始日期和时间非常重要。格式：2011 年 07 月 11 日 20 小时 10 分钟 23 秒。例子：

```
Starting Data and Time - 20110709201023,
First Data and Time - 20110711214020
Result = 49,5h. 
```

我有 10000 个这种格式的数据，所以我不想手动执行此操作。我将非常感激任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T14:25:05.187

最好的方法是首先使用以下方法使其成为真正的 R 时间对象`strptime`：

```
time_obj = strptime("20110711201023", format = "%Y%m%d%H%M%S") 
```

如果你对开始日期和结束日期都这样做，你可以简单地说：

```
end_time - start_time 
```

以秒为单位获得差异，可以轻松转换为小时数。要转换这些时间字符串的整个列表，只需执行以下操作：

```
time_vector = strptime(dat$time_string, format = "%Y%m%d%H%M%S") 
```

`dat`包含数据的 data.frame 和`time_string`包含时间字符串的列在哪里。请注意， strptime 也适用于向量（它是向量化的）。您还可以使新时间向量成为 dat 的一部分：

```
dat$time = strptime(dat$time_string, format = "%Y%m%d%H%M%S") 
```

或者更优雅（至少如果你`$`和我一样讨厌:)）：

```
dat = within(dat, { time = strptime(dat$time_string, format = "%Y%m%d%H%M%S") }) 
```

# asp.net - 在 Windows Azure 中使用本地化资源时出现异常

> ID：13607170
> 
> 赞同：3
> 
> 时间：2012-11-28T14:18:19.170
> 
> 标签：asp.net, azure, resources, multilingual, localized

我一直在用经典的 ASP.NET 开发一个应用程序并将其部署到 azure。到现在为止，一点问题都没有。现在我想添加本地化资源以支持多语言。

App_GlobalResources/*.resources 文件在本地运行时工作正常，无论是在 Azure 模拟器的外部还是内部。但是当我尝试在 Azure 中使用它们时，我收到以下错误：

> 在磁盘上找不到适合指定区域性（或中性区域性）的任何资源。基本名称：SistemaRRHH.Signup.SignupLabels 位置信息：文件名：SistemaRRHH.Signup.SignupLabels.resources。

异常非常不言自明，买了我无论如何也解决不了。

这里抛出异常：

```
var requestCultureInfo =  new CultureInfo(Utils.GetRequestFirstLanguageAccepted(Request.Headers["Accept-Language"]));

ResourceManager rm = ResourceManager.CreateFileBasedResourceManager(Constants.RESOURCE_FILE_LABELS_NAME, HttpContext.Current.Server.MapPath(Constants.RESOURCE_FILE_DIRECTORY), null);

letsGetItStartedLabel.Text = rm.GetString(Constants.LETS_GET_IT_STARTED_LABEL, requestCultureInfo); 
```

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:54:34.917

我注意到 Azure 中的一些本地化问题，特别是 DateTimes（通常的罪魁祸首）——你是在美国以外的地方吗？我们位于英国并使用欧洲数据中心，但仍在 Azure 中获取美国格式的日期。如果是这种情况，您也可以尝试创建 en-US 资源文件，看看是否能解决问题。我们现在在 web.Config 中添加了一个全球化标签 - 一个短期修复，但在我可以重新访问之前解决了这个问题。

# python - 缩短/干燥这个 python if 语句？

> ID：13607174
> 
> 赞同：-3
> 
> 时间：2012-11-28T14:18:33.727
> 
> 标签：python, logic

```
if a == arg:
    if arg not in a_list:
        do_something(arg)
elif b == arg:
    if arg not in b_list:
        do_something(arg)
else:
    do_something_else(arg) 
```

提出一种惯用的方法来缩短和特别干燥上述语句 - 而不将其部分提取到单独的函数中。

编辑：有趣 ;-) 这不是家庭作业，也不是审查我的代码的请求，也许如果我将上面的框架重新定义如下，我的意图会变得更加清晰：

在 if 语句之上编写的 Python 方式是什么，这样它既是 DRY 又是该语言的惯用语？我觉得我遗漏了一些东西，也许可以利用 python 中的 and/or 运算符？不将它的任何部分提取到单独的函数的原因是，这个问题更多地是关于重构而不是关于惯用的 pythonian if-logic。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T15:08:41.710

这是一个简单的答案：

```
for i, i_list  in [(a, a_list), (b, b_list)]:
    if i == arg:
        if arg not in i_list:
            do_something(arg)
        break
else:
    do_something_else(arg) 
```

将`a`、`a_list`和`b`、 和组合`b_list`成元组，我们可以更容易地迭代它们。然后是迭代本身的简单问题，匹配条件并运行所需的功能..

Python 支持`for....else`语句。

如果 for 循环中没有返回或中断，则 else 语句将运行。

在这里，如果我们得到了我们想要的匹配，循环就会中断，我们就完成了。如果我们从不中断，那么我们将进入我们的 else 循环。在我看来，这是最*Pythonic*的方式来做到这一点。

**编辑**

为了使它更好，你应该`a, b, a_list, b_list`在某种字典里面，在哪里`d[a] = a_list`

然后你可以像这样迭代dict：

```
for k, v  in d.items():
    if k == arg:
        if arg not in v:
            do_something(arg)
        break
else:
    do_something_else(arg) 
```

这几乎是一样的，但看起来更好，你可以事先整理好所有的`a`'s 和's 和列表。`b`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T14:33:33.740

```
def run_for_match(candidate, patterns, search_lists, handlers, default_handler):
    for pattern, search_list, handler in zip(patterns, search_lists, handlers):
        if match(pattern, candidate):
            if candidate not in search_list:
                handler(candidate)
            break
    else:
        default_handler(candidate)

run_for_match(string, [a, b], [a_list, b_list], [do_something, do_something], do_something_else) 
```

尽管将其放入封装`patterns`, `search_lists`,`handlers`和的对象中，但`default_handler`意义重大。就像是：

```
class StringHandlerManager(object):

    def __init__(self, default_handler):
        self.handler_registry = []
        self.default_handler = default_handler

    def add_handler(self, pattern, search_list, handler):
        self.handler_registry.append((pattern, search_list, handler))

    def __call__(self, candidate):
        for pattern, search_list, handler in self.handler_registry:
            if match(pattern, candidate):
                if candidate not in search_list:
                    handler(candidate)
                break
        else:
            default_handler(candidate)

handle_string = StringHandlerManager(do_something_else)
handle_string.add_handler(a, a_list, do_something)
handle_string.add_handler(b, b_list, do_something)
handle_string(string) 
```

# java - 从表中选择所有字段中的字段

> ID：13607176
> 
> 赞同：0
> 
> 时间：2012-11-28T14:18:36.037
> 
> 标签：java, sql, oracle, oracle11g

我必须从表中的所有行中选择值，如下所示：

```
select distinct SCHM_CODE, 
       sum(DEP_AMT) as AMOUNT 
  from DLY_DEP_VIEW  
 where Schm_code in (select SCHM_CODE 
                       from DLY_DEP_VIEW )
 group by schm_code 
```

我将从用户输入中获取输入，我不希望括号中的 select 语句，我需要为其中的所有内容返回一个值，例如：

```
select distinct SCHM_CODE, 
       sum(DEP_AMT) as AMOUNT 
  from DLY_DEP_VIEW  
 where Schm_code in (ALL_SCHM_CODES)
 group by schm_code 
```

这是给我无效的标识符：（编辑）

```
select distinct SCHM_CODE, 
       sum(DEP_AMT) as AMOUNT 
  from DLY_DEP_VIEW  
 where Schm_code in (select regexp_substr('" + c + "', '[^,]+',1,level) p
          from dual t
       connect by level <= regexp_count('" + c + "', ',') + 1
)
 group by schm_code; 
```

由于括号中的值在我的应用程序中不断变化。实现这一目标的最佳方法是什么？查询在 Java 代码中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:25:45.220

你可以尝试这样的事情：

```
select distinct SCHM_CODE, 
       sum(DEP_AMT) as AMOUNT 
  from DLY_DEP_VIEW  
 where Schm_code in (select regexp_substr(:your_string, '[^,]+',1,level) p
          from dual t
       connect by level <= regexp_count(:your_string, ',') + 1
)
 group by schm_code 
```

`:your_string`是您作为用户输入的字符串，可以包含一个或多个值（逗号分隔）

[这是一个 sqlfiddle 演示](http://www.sqlfiddle.com/#!4/252fe/5)

顺便说一句，使用带有绑定变量的准备好的语句，不要只是连接输入字符串。[在这里](http://en.wikipedia.org/wiki/SQL_injection)
阅读更多

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T14:47:40.570

您可以使用嵌套表作为方法之一：

*   创建嵌套表类型。假设是`Schm_code`数字数据类型。

    ```
    SQL> create or replace type t_list as table of number
      2  /

    Type created 
    ```

*   重写查询如下。如果列表是字符串列表，则列表的每个元素都必须用单引号引起来：

    ```
    select distinct SCHM_CODE, 
           sum(DEP_AMT) as AMOUNT 
      from DLY_DEP_VIEW  
      where Schm_code in (Select column_value
                            from table(t_list(<<your list of codes>>)))
      group by schm_code 
    ```

在此示例中，为了演示，使用 Sql*plus 执行查询并手动输入元素：

```
SQL> select first_name
  2       , last_name
  3    from employees t
  4   where t.employee_id in (select column_value
  5                             from table(t_list(&list))
  6                           );
Enter value for list: 100,200
old   5:                            from table(t_list(&list))
new   5:                            from table(t_list(100,200))

FIRST_NAME           LAST_NAME                                                  
-------------------- -------------------------                                  
111                  King                                                       
Jennifer             Whalen                                                     

SQL> select first_name
  2       , last_name
  3    from employees t
  4   where t.employee_id in (select column_value
  5                             from table(t_list(&list))
  6                           );
Enter value for list: 110,300,220
old   5:                            from table(t_list(&list))
new   5:                            from table(t_list(110,300,220))

FIRST_NAME           LAST_NAME                                                  
-------------------- -------------------------                                  
John                 Chen 
```

# jquery - jQuery 在 div 内的 div 类中更改 html

> ID：13607177
> 
> 赞同：4
> 
> 时间：2012-11-28T14:18:39.413
> 
> 标签：jquery, html

我将如何仅更改此 HTML：

```
<div class="name">President Speech</div> 
```

那是在这个div里面：

```
<div class="videobox fl showsearchvideo" id="videoBox7">
  <div class="videothumb">
     <img src="http://brightcove04.o.brightcove.com/xxxxx/xxxx_xxxxx_xx-xxxxxx.jpg?pubId=xxxxxxx">
  </div>
  <div class="name">President Speech</div>
</div> 
```

我试过了：

```
$('#videoBox7 .name').html('President Speech TEST!'); 
```

但这似乎不起作用？

**更新**

在视频 div 运行 JS 以填充它正在寻找的 HTML 之后，它似乎没有触发。

```
<script type="text/javascript">
   $(document).ready(function() {
      $('#videoBox7 .name').html('President Speech TEST!');
   });
</script> 
```

我已将填充视频的 JS 上传到[http://pastebin.com/DNBPNQUQ](http://pastebin.com/DNBPNQUQ)

**更新 2**

通过将brightstar js`$('#videoBox7 .name').html('President Speech TEST!');`的函数放在里面找到了一种方法来实现这一点。`onPlaylistLoad`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T14:20:54.473

确保仅在`HTMLDivElement`将 DOM 添加到 DOM 后运行此代码：

```
$(function(){
    $('#videoBox7 .name').html('President Speech TEST!');
}); 
```

在与作者[交谈](https://chat.stackoverflow.com/rooms/20253/discussion-between-jonathan-sampson-and-stealthrt)后，很明显问题出在 Brightcove 视频播放器加载新元素以反映视频播放列表。明确的解决方案是绑定到 Brightcove 的玩家的事件系统，以便在添加他们的元素*后做出响应。*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-28T14:20:53.007

你应该有什么工作见[http://jsfiddle.net/wRgDE/](http://jsfiddle.net/wRgDE/)

确保您在准备好的文档上运行它，即

```
$(document).ready(function(){
  $('#videoBox7 .name').html('President Speech TEST!');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T14:30:51.410

你可以简单地给这个

```
 <div class="name">President Speech</div> 
```

一个 id , 例子

```
 <div id = "myid" class="name">President Speech</div> 
```

并像这样通过jquery到达它

```
 $('#myid').html('President Speech TEST!'); 
```

或查看这里[获取第二个子元素](https://stackoverflow.com/questions/5440792/getting-the-2nd-child-element) 并查看如何获取第 n 个子元素，以及您的情况下的第二个子元素。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-11-28T14:22:52.380

你需要使用[`.text()`](http://api.jquery.com/text/)

该`.text()`功能实际上非常智能。您可以将文本从对象中提取出来，jQuery 就会知道您想要什么。你的 jQuery 应该是：

```
$("#videoBox7 .name").text("President Speech TEST!"); 
```

您还需要确保在整个文档~~加载~~完成后触发 jQuery 运行。如果元素尚未准备好，您不想尝试定位此选择器。用这个：

```
$(function () {
    $("#videoBox7 .name").text("President Speech TEST!");
}); 
```

# javascript - 为什么以下 JS 布尔逻辑对于除有效日期选择=真和通过日期选择=假以外的所有内容都失败

> ID：13607178
> 
> 赞同：0
> 
> 时间：2012-11-28T14:18:38.407
> 
> 标签：javascript

我是 Javascript 的完全新手，并且尝试了布尔表达式的所有可能组合，我留下了以下代码。为什么以下 JS 布尔逻辑对于除有效日期选择=真和通过日期选择=假以外的所有内容都失败

```
 // initialisation  
            var effectiveDateSelected = new Boolean(false);
        var throughDateSelected = new Boolean(false);  

            // values read in from web page
            effectiveDateSelected = ...          
            throughDateSelected = ...

            // the logical expression 
        if ((effectiveDateSelected) && !(throughDateSelected)) {
            reportNum = 1;
            alert("1 reportNum=" + reportNum);
        }

        if (!(effectedDateSelected)  && (throughDateSelected)) { 
                            reportNum = 2;
            alert("2 reportNum=" + reportNum);
        }

        if (((effectedDateSelected)  && (throughDateSelected)) || 
            (!(effectedDateSelected)  && !(throughDateSelected))) {
            reportNum = 3;
            alert("3 reportNum=" + reportNum);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:21:11.703

`new Boolean()``false`总是真实的，因为它是一个对象，你想直接使用布尔原语`true`。

```
var condition = false; 
```

您可以在将布尔对象转换为原始对象时看到这一点：

```
Boolean( new Boolean( false ) ) //true 
```

# c# - 对应于地图缩放/移动动作的变换路径/折线

> ID：13607184
> 
> 赞同：3
> 
> 时间：2012-11-28T14:19:00.890
> 
> 标签：c#, wcf, xaml, windows-phone-8, here-api

我正在使用 MapLayer 和 MapOverlay 在地图中创建自己的路径/折线，GPS 捕获的所有点都存储在一个结构中，以便我可以访问它们。任何时候。

现在，我希望在用户操作地图的同时变换路径（缩放和地图重新定位），因此路径仍然连接相同的点。到目前为止，我的方法非常消耗 CPU，而且看起来很糟糕

```
GeocoordinateList _coordinates;
MapLayer pointsLayer;

private void MyMap_ZoomLevelChanged(object sender, MapZoomLevelChangedEventArgs e)
{
        repositionPoints(); // This is done other way but for the sake of brevity
}

private void repositionPathPoints()
{
        try
        {
        Polyline path = (Polyline)pointsLayer.First(TrackPath).Content; // retrieves MapOverlay corresponding to line
        path.Points.Clear();
        path.Points = new PointCollection();
        foreach (Geocoordinate coord in _coordinates)
        {
            path.Points.Add(MyMap.ConvertGeoCoordinateToViewportPoint(coord));
        }

        }
        catch (Exception exc)
        {
            Debug.WriteLine(exc.Message);
        }
} 
```

有没有更有效的方法使用 XAML 方法来做到这一点？我发现[了这个关于如何缩放地图的旧线程](https://stackoverflow.com/questions/5109058/wpf-the-right-way-to-scale-a-path)，但在我的情况下，地图存储的缩放级别只是一个从 1 到 20 的数值，没有指示每次缩放跳跃的比例百分比。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T08:48:50.333

我通过阅读文档解决了这个问题。我真正需要的是 SDK 已经提供的 MapPolyline，其方法接受地理坐标而不是点。您只需要将它们添加为 MapElements 或 MapLayer 的子项。

# android - 使用来自数据库 Android 的数据填充 EditText

> ID：13607186
> 
> 赞同：-6
> 
> 时间：2012-11-28T14:19:09.247
> 
> 标签：android, database, sqlite, android-edittext

我想从 SQLite 数据库中检索数据，并将该值放入 EditText（在 Activity 的布局中）并显示它......

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T15:32:48.040

[这](http://www.edumobile.org/android/android-development/use-of-sqlite/)是我在向 SQLite 数据库写入和读取数据时遇到问题时经历的教程。[这](http://android-er.blogspot.com/2011/06/simple-example-using-androids-sqlite_02.html)是第二个教程，但我建议您遵循第一个教程，因为它更具描述性。

# css - CSS：如何将文本链接移动到 li 内的右侧

> ID：13607191
> 
> 赞同：1
> 
> 时间：2012-11-28T14:19:20.580
> 
> 标签：css, html-lists, positioning, text-align

我想稍微向右移动一个在 li 内与左侧对齐的文本链接。

类似于 left:2px; 但仅适用于文本。

**页面链接：** [http ://npmaudiovisual.com/esde/?page_id=36](http://npmaudiovisual.com/esde/?page_id=36)

![在此处输入图像描述](../Images/45d75056816cff5bedfeef936644c5b1.png)

**CSS：**

```
#secondnav li a {
    border: medium none;
    display: block;
    padding: 3px 8px;
}
#secondnav li a {
    display: block !important;
    line-height: 42px !important;
    padding-left: 15px;
    text-align: left;
    text-decoration: none;
    width: 230px;
}
#secondnav li a {
    background-color: #FFC477;
    border: 1px solid white !important;
    color: #FFFFFF;
    font-size: 18px !important;
    position: relative;
    right: 30px;
    z-index: 1; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T14:22:06.260

您可以`text-indent`单独使用或`padding-left`减少`width`相同的量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T15:42:58.507

你可以给 a{ 元素一个你想要的 px 的左边距。例如：

` #secondnav li a { margin-left: 3px; }

`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T14:23:26.267

将填充更改为“3px 0px 3px 18px”。顺序是：“右上左下”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T14:30:53.910

尝试将此添加到您的CSS

```
#secondnav li a {
    text-indent: 4px;
} 
```

# mysql - 检查Mysql查询中3个不同日期范围的值是否

> ID：13607192
> 
> 赞同：3
> 
> 时间：2012-11-28T14:19:30.890
> 
> 标签：mysql, sql, date, subquery

我有一个`wp_posts`包含`post_date`和`author_id`列的表

我需要找到（所有）3个时间范围内的`author_id`帖子`wp_posts`：

```
wp_posts.post_date BETWEEN '2012-11-05 00:00:00' AND '2012-11-10 23:59:59'
wp_posts.post_date BETWEEN '2012-11-12 00:00:00' AND '2012-11-17 23:59:59'
wp_posts.post_date BETWEEN '2012-11-19 00:00:00' AND '2012-11-25 23:59:59' 
```

看起来很简单，但我想不通。如果我在每个日期范围之间放置 AND，将始终返回 0。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:22:35.413

你为什么不放 OR：

```
(wp_posts.post_date BETWEEN '2012-11-05 00:00:00' AND '2012-11-10 23:59:59') OR 
(wp_posts.post_date BETWEEN '2012-11-12 00:00:00' AND '2012-11-17 23:59:59') OR
(wp_posts.post_date BETWEEN '2012-11-19 00:00:00' AND '2012-11-25 23:59:59') 
```

编辑：

```
SELECT author_id FROM wp_posts
WHERE author_id IN (
    SELECT author_id FROM wp_posts WHERE post_date BETWEEN '2012-11-05 00:00:00' AND '2012-11-10 23:59:59'
) AND author_id IN (
    SELECT author_id FROM wp_posts WHERE post_date BETWEEN '2012-11-12 00:00:00' AND '2012-11-17 23:59:59'
) AND author_id IN (
    SELECT author_id FROM wp_posts WHERE post_date BETWEEN '2012-11-19 00:00:00' AND '2012-11-25 23:59:59'
) 
```

这是你需要的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T14:21:31.683

```
SELECT author_ID
FROM posts
WHERE   (wp_posts.post_date BETWEEN '2012-11-05 00:00:00' AND '2012-11-10 23:59:59') OR
        (wp_posts.post_date BETWEEN '2012-11-12 00:00:00' AND '2012-11-17 23:59:59') OR
        (wp_posts.post_date BETWEEN '2012-11-19 00:00:00' AND '2012-11-25 23:59:59')
GROUP BY author_ID
HAVING COUNT(*) = 3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T14:22:10.900

尝试这个 ：：

```
(wp_posts.post_date BETWEEN '2012-11-05 00:00:00' AND '2012-11-10 23:59:59') or
(wp_posts.post_date BETWEEN '2012-11-12 00:00:00' AND '2012-11-17 23:59:59') or
(wp_posts.post_date BETWEEN '2012-11-19 00:00:00' AND '2012-11-25 23:59:59') 
```

# delphi - 如何从某个 IMAP 邮箱中获取所有电子邮件的正文？

> ID：13607194
> 
> 赞同：6
> 
> 时间：2012-11-28T14:19:42.773
> 
> 标签：delphi, delphi-xe2, imap

如何从 Delphi 中的某个 IMAP 邮箱获取所有电子邮件的正文？例如，来自`INBOX`邮箱？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-28T16:36:52.063

有多种方法可以从所选邮箱中检索所有邮件的所有正文。我使用了一个，您可以在其中逐一迭代邮箱和邮箱中的[`Retrieve`](http://www.indyproject.org/docsite/html/TIdIMAP4_Retrieve@Integer@TIdMessage.html)每条消息。这种方式允许您修改代码，以便您能够在需要时中断循环，或者例如替换[`Retrieve`](http://www.indyproject.org/docsite/html/TIdIMAP4_Retrieve@Integer@TIdMessage.html)不会[`RetrievePeek`](http://www.indyproject.org/docsite/html/TIdIMAP4_RetrievePeek@Integer@TIdMessage.html)像第一次提到的那样在服务器上将消息标记为已读。当从服务器检索消息时，它的所有部分都被迭代，当它是文本部分时，它的正文被附加到一个局部`S`变量中。在迭代之后，`S`变量被添加到输出`BodyTexts`字符串列表中。所以，结果你会得到字符串列表集合，其中每个项目都来自连接的消息'

```
uses
  IdIMAP4, IdSSLOpenSSL, IdText, IdMessage, IdExplicitTLSClientServerBase;

procedure GetGmailBodyTextParts(const UserName, Password: string;
  BodyTexts: TStrings);
var
  S: string;
  MsgIndex: Integer;
  MsgObject: TIdMessage;
  PartIndex: Integer;
  IMAPClient: TIdIMAP4;
  OpenSSLHandler: TIdSSLIOHandlerSocketOpenSSL;
begin
  BodyTexts.Clear;
  IMAPClient := TIdIMAP4.Create(nil);
  try
    OpenSSLHandler := TIdSSLIOHandlerSocketOpenSSL.Create(nil);
    try
      OpenSSLHandler.SSLOptions.Method := sslvSSLv3;
      IMAPClient.IOHandler := OpenSSLHandler;
      IMAPClient.Host := 'imap.gmail.com';
      IMAPClient.Port := 993;
      IMAPClient.UseTLS := utUseImplicitTLS;
      IMAPClient.Username := UserName;
      IMAPClient.Password := Password;
      IMAPClient.Connect;
      try
        if IMAPClient.SelectMailBox('INBOX') then
        begin
          BodyTexts.BeginUpdate;
          try
            for MsgIndex := 1 to IMAPClient.MailBox.TotalMsgs do
            begin
              MsgObject := TIdMessage.Create(nil);
              try
                S := '';
                IMAPClient.Retrieve(MsgIndex, MsgObject);
                MsgObject.MessageParts.CountParts;
                if MsgObject.MessageParts.TextPartCount > 0 then
                begin
                  for PartIndex := 0 to MsgObject.MessageParts.Count - 1 do
                    if MsgObject.MessageParts[PartIndex] is TIdText then
                      S := S + TIdText(MsgObject.MessageParts[PartIndex]).Body.Text;
                  BodyTexts.Add(S);
                end
                else
                  BodyTexts.Add(MsgObject.Body.Text);
              finally
                MsgObject.Free;
              end;
            end;
          finally
            BodyTexts.EndUpdate;
          end;
        end;
      finally
        IMAPClient.Disconnect;
      end;
    finally
      OpenSSLHandler.Free;
    end;
  finally
    IMAPClient.Free;
  end;
end; 
```

此代码需要 OpenSSL，因此不要忘记将`libeay32.dll`和`ssleay32.dll`库放在项目可见的路径中；您可以为 Indy 下载不同版本和平台的 OpenSSL 库[`from here`](http://indy.fulgan.com/SSL/)。

# javascript - 为什么这个链接指向谷歌而不是雅虎？

> ID：13607200
> 
> 赞同：1
> 
> 时间：2012-11-28T14:19:55.947
> 
> 标签：javascript, html, events

```
<a onclick="dataBounce('http://yahoo.com');" href="http://google.com">Yahoo? :-/</a>

<script>
function dataBounce(dest) 
{
  // Note: dest is assumed to be encodeURI()ed. 
  var ie = !-[1,];

  var bouncer = 'data:text/html;charset=utf-8,%3C%21doctype%20html%3E%3Cscript%3Ewindow.location%20%3D%20%27'+ dest +'%27%3B%3C/script%3E';
  console.log('bouncer: ' + bouncer);
  window.location = !ie ? bouncer : dest;
  return false;
}
</script> 
```

是的，这`href`是谷歌，但我有一个`onclick`处理程序劫持了链接上的点击，导航到一个数据 URI，它将`window`'s反弹`location`到雅虎。**但是，当我点击链接时，我仍然被带到谷歌。*为什么？***

我为什么要这样做？这部分只是一个实验，部分是我想在实践中用来保护用户隐私的东西：通过创建一个中间保镖页面，引用者与目标服务器屏蔽。

这是链接：

[http://jsbin.com/efaful/1](http://jsbin.com/efaful/1)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-28T14:21:59.167

因为你需要在做任何事情后返回 false`onclick`以防止链接的默认行为。

```
<a href="http://google.com" onclick="dataBounce('http://yahoo.com'); return false;" />link</a> 
```

或者让你的`dataBounce`函数返回`false`并且：

```
<a href="http://google.com" onclick="return dataBounce('http://yahoo.com');" />link</a> 
```

# java - 在Java中将日期字符串转换为特定的日期格式“dd-MM-yyyy”

> ID：13607201
> 
> 赞同：3
> 
> 时间：2012-11-28T14:19:55.690
> 
> 标签：java, android, datetime, date-format

我有多个联系人的出生日期，并且都与移动设备同步。现在的问题是所有联系人都有不同的生日格式，我想以特定格式显示所有生日日期，例如“dd-MM-yyyy”。

因此，例如，一个同步联系人的生日如“1990-02-07”或“1988-06-15T22:00:00.000Z”或“12-02-1990”等......那么所有这些日期都应该显示以特定格式“dd-MM-yyyy”。

那么我该如何解决这个问题呢？

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-28T14:30:05.517

只需使用 SimpleDateFormat 类。就像是：

```
Date d = Calendar.getInstance().getTime(); // Current time
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm"); // Set your date format
String currentData = sdf.format(d); // Get Date String according to date format 
```

在这里您可以查看详细信息和所有支持的格式：

[http://developer.android.com/reference/java/text/SimpleDateFormat.html](http://developer.android.com/reference/java/text/SimpleDateFormat.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T15:31:39.010

我不知何故明白你的问题就在这里。您可以尝试用“-”分割字符串并将其存储在数组中，然后检查数组中的每个字符串，将其解析为 int 然后执行条件语句。

假设您提供的格式如下： "1990-02-07" year-month-day "1988-06-15T22:00:00.000Z" year-month-dayTtimeZ "12-02-1990" month-day-年

你可以尝试这样的事情。

```
 public String convert(String s){
        SimpleDateFormat newformat = new SimpleDateFormat("dd-MM-yyyy");
        try{
            if(s.contains("T")){
                String datestring = s.split("T")[0];
                SimpleDateFormat oldformat = new SimpleDateFormat("yyyy-MM-dd");
                String reformattedStr = newformat.format(oldformat.parse(datestring));
                return reformattedStr;
            }
            else{
                if(Integer.parseInt(s.split("-")[0])>13){
                    SimpleDateFormat oldformat = new SimpleDateFormat("yyyy-MM-dd");
                    String reformattedStr = newformat.format(oldformat.parse(s));
                    return reformattedStr;
                }
                else{
                    SimpleDateFormat oldformat = new SimpleDateFormat("MM-dd-yyyy");
                    String reformattedStr = newformat.format(oldformat.parse(s));
                    return reformattedStr;
                }

            }
        }
        catch (Exception e){
            return null;
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-26T19:19:50.337

# android - 从 ListFragment 中删除 Indefinite ProgressDialog

> ID：13607206
> 
> 赞同：0
> 
> 时间：2012-11-28T14:20:08.750
> 
> 标签：android, android-activity, fragment, progressdialog, android-fragmentactivity

我有一个从 SQLite 数据库加载内容的 ListFragment，并且有一个不想消失的循环加载对话框。尝试使用`setListShown(true);`但`setListShownNoAnimation(true);`无济于事。我不希望任何加载栏/屏幕/对话框留在屏幕上。

![在此处输入图像描述](../Images/64cf240f67485b7f22ae5efb75bee9b2.png)

我的片段活动：

```
public class ListOverviewActivity extends FragmentActivity {

    DatabaseManager db;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_list_overview);
    }

    @Override
    public void onStart() {
        super.onStart();
        //db = new DatabaseManager(getApplicationContext());

        FragmentTransaction fragmentTransaction = getSupportFragmentManager().beginTransaction();
        Fragment payListFragment = new PayListFragment();
        fragmentTransaction.replace(R.id.paylist_fragment, new PayListFragment());
        fragmentTransaction.show(payListFragment);

        fragmentTransaction.commit();

    } 
```

我的列表片段：

```
public class PayListFragment extends ListFragment {

    DatabaseManager db;
    ArrayList<PayList> lists;
    PayListAdapter pAdapter;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    }

    public PayListFragment() {

    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        db = new DatabaseManager(getActivity());
        lists = db.getAllLists();
        pAdapter = new PayListAdapter(getActivity(), lists);
        setListAdapter(pAdapter);

        registerForContextMenu(getListView());
        setListShown(true);
        setListShownNoAnimation(true);

    }

    @Override
    public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo) {
        super.onCreateContextMenu(menu, v, menuInfo);
        AdapterView.AdapterContextMenuInfo info = (AdapterView.AdapterContextMenuInfo) menuInfo;
//      int group = (int) ExpandableListView.getPackedPositionForGroup((int) info.position);
//      int type = ExpandableListView.getPackedPositionType((int) info.position);
//      int child = ExpandableListView.getPackedPositionChild((int) info.position);

        menu.setHeaderTitle(lists.get(info.position).getTitle());

        menu.add(0, 0, 0, "Delete");
    }

    public boolean onContextItemSelected(MenuItem item) {

        AdapterView.AdapterContextMenuInfo info = (AdapterView.AdapterContextMenuInfo) item.getMenuInfo();

        switch (item.getItemId()) {
        case 0:
            Toast.makeText(getActivity(), "DEBUG: Deleting", Toast.LENGTH_SHORT).show();
            db.deleteList(lists.get(info.position));
            pAdapter.notifyDataSetChanged();
            setListAdapter(pAdapter);
            return true;
        }
        return false;
    }
} 
```

和我的一段xml：

```
<fragment
    android:id="@+id/paylist_fragment"
    android:name="android.support.v4.app.ListFragment"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/relativeLayout2"
    android:visibility="gone"
    tools:layout="@layout/listview_list" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:41:15.560

在您的布局中使用它：

```
<fragment
    android:id="@+id/paylist_fragment"
    android:name="com.your.app.PayListFragment"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/relativeLayout2"
    tools:layout="@layout/listview_list" /> 
```

我认为`android:visibility="gone"`是罪魁祸首。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T09:06:14.960

我解决了。我不得不手动将 XML 中 Fragment 的 Class 设置为 PayListFragment 类，然后微调器消失了！

我现在的 XML 布局：

```
 <fragment
    android:id="@+id/paylist_fragment"
    android:name="android.support.v4.app.ListFragment"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/relativeLayout2"
    class="com.name.billsplitter.PayListFragment"
    tools:layout="@layout/listview_list"/> 
```

# c# - 检查两个字符串是否包含相同的模式

> ID：13607207
> 
> 赞同：1
> 
> 时间：2012-11-28T14:20:11.173
> 
> 标签：c#, regex, string-matching

我的应用程序将需要输入字符串和存储在我的数据库中的字符串之间的字符串匹配函数。这些字符串涉及产品尺寸（如长度、高度等）。我的目标是检查输入的字符串是否已存在于我的数据库中，但可能使用另一种模式，例如：

输入：如果我的数据库中有“vis 4X40”或“vis 4 x 40”或“vis 4*40”之类的内容，“vis 4*40”应该返回 true。

我发现的唯一方法是使用正则表达式来规范我的数据库以替换模式，例如：

```
 \d+ *[xX*] *\d+ 
```

使用标准化的（例如 NumberXNumber），对输入中的字符串执行相同操作，然后尝试找到它。但是我想知道是否有任何工具已经存在并且允许我这样做。（我正在使用 C# .NET V4）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:47:29.120

更好的方法是连接两个数据然后匹配它们

```
string target=inputString+"#"+storedString;

if(Regex.IsMatch(target,"(\d+) *[xX*] *(\d+)#\1 *([xX*]) *\2"))
        //the string is in the database
else
       //it is not 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T14:36:58.813

只需使用用户提供的通配符，替换为`*`并`%`查询您的表：`SELECT col FROM table WHERE col LIKE 'vis 4%40'`

*请*确保您使用参数执行查询。

# android - 如何将 Facebook api 中的日期转换为 android 应用程序日期格式

> ID：13607209
> 
> 赞同：2
> 
> 时间：2012-11-28T14:20:14.100
> 
> 标签：android

我正在开发一个类似于 android facebook 应用程序的应用程序。

我从 facebook 应用程序获得了一个创建的时间字段

```
 "created_time": "2012-11-28T12:53:40+0000", 
```

那么，如何将其转换为 android facebook 应用程序的日期格式，例如

```
2hours ago,
yesterday at 5:30pm etc 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T14:29:33.523

试试这个：

```
String getCreatedTime = JOConversations.getString("created_time");
long finalTimeStamp = Long.valueOf(getCreatedTime);
SimpleDateFormat dateFormatter = new SimpleDateFormat("yyyy-MM-dd'T'hh:mm:ssZ");

SimpleDateFormat formatter = getDateFormat();
ParsePosition pos = new ParsePosition(0);
long then = formatter.parse(timestamp, pos).getTime();
long now = new Date().getTime();

long seconds = (now - then)/1000;
long minutes = seconds/60;
long hours = minutes/60;
long days = hours/24;

String friendly = null;
long num = 0;
if (days > 0) {
    num = days;
    friendly = days + " day";
} else if (hours > 0) {
    num = hours;
    friendly = hours + " hour";
} else if (minutes > 0) {
    num = minutes;
    friendly = minutes + " minute";
} else {
    num = seconds;
    friendly = seconds + " second";
}
if (num > 1) {
    friendly += "s";
}
String postTimeStamp = friendly.toUpperCase() + " AGO"; 
```

这里有一个帮助方法：`SimpleDateFormat dateFormatter = new SimpleDateFormat("yyyy-MM-dd'T'hh:mm:ssZ");`是

```
private static SimpleDateFormat getDateFormat() {
    return new SimpleDateFormat("yyyy-MM-dd'T'hh:mm:ssZ");
} 
```

`StreamRenderer.java`我从GitHub 上的 Facebook SDK 示例中派生了这个代码块： [https://github.com/facebook/facebook-android-sdk/blob/master/examples/stream/src/com/facebook/stream/StreamRenderer。 java](https://github.com/facebook/facebook-android-sdk/blob/master/examples/stream/src/com/facebook/stream/StreamRenderer.java)（检查第 380 行以后）

它没有处理*昨天下午 5:30*的场景。但这应该让你开始。

# javascript - 如何在 RequireJS 中使用 jQuery 1.6.2

> ID：13607214
> 
> 赞同：0
> 
> 时间：2012-11-28T14:20:38.467
> 
> 标签：javascript, jquery, requirejs

我试图要求 jQuery 作为依赖项，但是当我尝试这样做时我只会得到一个错误。我知道 1.6.2 很旧，但我需要它来不破坏其他代码。当我使用 1.8.2 时它可以工作，但我不得不切换回旧版本。

> Uncaught TypeError: undefined is not a function app.js:46
> 
> (匿名函数) main.js:46 context.execCb require.min.js:1603 Module.check require.min.js:845 (匿名函数) require.min.js:1087 (匿名函数) require.min.js: 130 (匿名函数)
> require.min.js:1130 每个 require.min.js:58 Module.emit require.min.js:1129 Module.check require.min.js:899 (匿名函数) require.min.js: 1087 (匿名函数)
> require.min.js:130 (匿名函数) require.min.js:1130 每个 require.min.js:58 Module.emit require.min.js:1129 Module.check require.min.js: 899 Module.enable require.min.js:1117 Module.init require.min.js:758 callGetModule require.min.js:1144 context.completeLoad require.min.js:1517 context.onScriptLoad require.min.js:1624

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:42:10.380

没有任何示例代码，您将如何启动您的东西以及所有这些都很难提供帮助。我会给你一个一般性的答案，希望它对你有所帮助，或者让你在等待其他答案时保持忙碌。:) 祝你好运。

来自[http://www.bennadel.com/blog/2287-Using-jQuery-As-A-Named-Module-In-RequireJS.htm](http://www.bennadel.com/blog/2287-Using-jQuery-As-A-Named-Module-In-RequireJS.htm)

```
<!DOCTYPE html>
<html>
<head>
<title>Loading jQuery As A Named Module In RequireJS</title>

<!-- Include the require JS library. -->
<script type="text/javascript" src="./require.js"></script>
<script type="text/javascript">

// Configure the RequireJS paths to use an alias for the
// jQuery library.
require.config({
paths: {
"jquery": "./jquery-1.6.4"
}
});

// Now that we have configured a named alias for the jQuery
// library, let's try to load it using the named module.
require(
[
"jquery"
],
function( $164 ){

// Log the callback parameter.
console.log( "$164.fn.jquery:", $164.fn.jquery );

}
);

</script>
</head>
<body>
<!-- Left intentionally blank. -->
</body>
</html> 
```

# mysql - 使用单个查询确定用户的组织层次结构

> ID：13607221
> 
> 赞同：1
> 
> 时间：2012-11-28T14:20:59.907
> 
> 标签：mysql, sql, inner-join

这是我最近在一次采访中被问到的一个问题：

您在组织中有各种类型的用户：（`Junior`被老板）`Supervisor`（被老板）`Manager`（被老板）`CEO`。

我们同意这个单一的简化表模式。用户：`{userId, userName, UserType(J, S, M, C), bossUserId}`

**问：**编写一个查询来确定`Junior`userId = 11 的员工的完整组织层次结构。

样本数据 ：

![在此处输入图像描述](../Images/3fbd22e3bc485fc7d4062e8a6d25c97e.png)

答案是 =>`PQR2 --> GHI2 --> DEF1 --> ABC1`

这是我的解决方案：

```
select e1.userName, e2.userName, e3.userName, e4.userName from 
abc e1 inner join users e2 on e1.bossUserId = e2.userId
inner join users e3 on e2.bossUserId = e3.userId
inner join users e4 on e3.bossUserId = e4.userId
where e1.userId = 11; 
```

我确实意识到自我加入 4 次是可怕的，但我无法想到其他任何事情。面试官告诉我有更好的方法，数据会出现 `columnwise`。（使用最大值`of 2 self joins`，如果有的话）

另一种可能性是编写一个存储过程，但它又不是一个单一的查询。

谁能帮我这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:41:44.123

根据您的评论，在 MS SQL（和其他类似的）中，您可以执行此操作

```
;with cte as (
    select *, 0 as level from yourtable
    union all 
    select cte.id, t2.name, t2.ut, t2.bossid, level+1
    from cte
        inner join yourtable t2 on cte.bossid = t2.id
)
    select name, ut from cte
    where id=11
    order by level 
```

这给了你

```
pqr2    j
ghi2    s
def1    m
abc1    c 
```

但是 MySQL 不支持这种结构。

# sql - SQL 查询在部署到报表服务器后出现转换错误

> ID：13607224
> 
> 赞同：0
> 
> 时间：2012-11-28T14:21:04.933
> 
> 标签：sql, visual-studio-2010, reporting-services, ssms

这是我的查询：

```
SELECT [Entry No_], [Currency Code], [Posting Date],
       SUM([Credit]), 
       SUM([Debit])
FROM   Db
WHERE  [Posting Date] >= (@DateFrom) 
       AND [Posting Date] <= (@DateTo)
GROUP BY [Entry No_], [Currency Code], [Posting Date] 
```

（`[Posting Date]`给出错误）是日期时间。我的报告在 Visual Studio 中工作，但是当部署在报告服务器上时：

> 将 nvarchar 数据类型转换为 datetime 数据类型导致值超出范围。

我已经尝试像建议的那样设置日期格式：

```
set dateformat ymd 
```

没有成功。我也尝试将启用远程错误设置为真。

关于下一步尝试什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T10:15:03.960

![在此处输入图像描述](../Images/4e438509c07bba28d755532e03ca73a5.png)
发现错误。在 MS BIDS 中，参数“数据类型”自动设置为“文本”。将其更改为“日期/时间”确实很有魅力。

我认为参数数据类型不会自动更改为数据库中列设置的内容有点奇怪。

# r - 查找列中具有不同值的对象的平均值

> ID：13607225
> 
> 赞同：2
> 
> 时间：2012-11-28T14:21:05.643
> 
> 标签：r

我是 R 新手（以前使用过 MATLAB）并且已经尝试了很长时间来寻找解决方案，但我找不到这个（看似）非常简单的问题的解决方案。这是问题所在；

在第一列中，我有几天的时间值（在此示例中进行了简化），在第二列中，我有我想要平均的值。我想要做的是取所有属于同一时间的值并取平均值。我在相当大的数据集上执行此操作，因此自动执行此操作将有很大帮助。

让我们设置：

```
time = rep( c("00:00", "00:10", "00:20", "00:30", "00:40", "00:50", "01:00", "01:10"), 5)
values = c(sample(1:100, 40))
data = cbind(time, values) 
```

所以现在我有我的矩阵，其中包含时间和值，我想将所有具有（例如）“00:00”的值分组并计算它的平均值。经过一番搜索，我发现该`aggregate()`功能可以提供很好的帮助，所以我做了以下事情；

```
aggregate(as.numeric(data[,-1]), by = list(sort(data[,1])), mean) 
```

有输出

```
 Group.1    x
1   00:00 77.2
2   00:10 59.2
3   00:20 51.0
4   00:30 49.4
5   00:40 51.4
6   00:50 33.4
7   01:00 33.8
8   01:10 51.6 
```

所以它似乎工作得很好，但是当我手动计算它时，值的平均值都是不同的。（例如；对于 00:00：(56+3+91+71+8)/5 = 45.8 而不是 77.2），谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T15:55:29.317

@joran 的建议（不要`by`通过排序来打乱变量）似乎有效：

```
set.seed(101) ## for reproducibility
time = rep( c("00:00", "00:10", "00:20", "00:30", 
      "00:40", "00:50", "01:00", "01:10"), 5)
values = c(sample(1:100, 40))
data = cbind(time, values)
aggregate(as.numeric(data[,2]),by=list(factor(data[,1])), mean)
##   Group.1    x
## 1   00:00 50.0
## 2   00:10 29.0
## 3   00:20 45.0
## 4   00:30 60.2
## 5   00:40 48.8
## 6   00:50 57.2
## 7   01:00 37.2
## 8   01:10 56.2
## 
```

检查第一组：

```
mean(as.numeric(data[data[,1]=="00:00","values"]))
## [1] 50 
```

As a further recommendation, I would *strongly* suggest using `data.frame` rather than `cbind()`ing your columns -- this allows you to put times and numeric values together without getting them all coerced to the same type.

(It would be nice to use a built-in times object too: I tried `times` from the `chron` package but didn't quite get the hang of it)

```
dat <- data.frame(time,values)  ## avoid using "data" as a variable name
aggregate(values~time, data=dat, mean) 
```

is much easier to read.

By the way, there are a lot of posts on Stack Overflow comparing various solutions for aggregation (`by`, `aggregate`, `ddply` and friends from the `plyr` package, and the `data.table` package): e.g. [Elegant way to solve ddply task with aggregate (hoping for better performance)](https://stackoverflow.com/questions/8488023/elegant-way-to-solve-ddply-task-with-aggregate-hoping-for-better-performance) , [R: speeding up "group by" operations](https://stackoverflow.com/questions/3685492/r-speeding-up-group-by-operations) , [How to speed up summarise and ddply?](https://stackoverflow.com/questions/5250750/how-to-speed-up-summarise-and-ddply) ...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T15:31:49.787

`by`是你的朋友：

```
by(as.numeric(data[,"values"]),data[,"time"],mean) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T14:36:40.577

我建议将索引变量（时间）设置为使用`as.factor()`.

然后将其用作索引，即：`aggregate(data$values,by=list(data$time.factor),FUN=mean)`

# .net - 使用 IBM.Data.DB2.ISeries 提供程序在数据库中插入特殊字符

> ID：13607230
> 
> 赞同：2
> 
> 时间：2012-11-28T14:21:12.023
> 
> 标签：.net, ado.net, character-encoding, ibm-midrange

我在使用 VB.Net 编写的依赖于 iSeries 数据库的应用程序时遇到了问题。用户可以保存笔记，这些笔记（非常）通常是从他们的邮箱中复制/粘贴的。

但是许多邮件包含在数据保存到数据库时触发 iDb2ConversionException 的无效字符。

目前，我清理数据，用匹配的 html 实体替换无效字符，但我真的不喜欢这种方法：

*   我必须维护一个转换列表，即使我设法覆盖了大多数无效字符，新的字符总是会出现。
*   如果我在客户端访问中使用 STRSQL 运行相同的命令，我实际上可以插入那些无效字符。
*   我们有许多固定长度的字段，并且用 HTML 实体替换字符使得在 UI 级别强制执行最大字符串长度变得更加困难

如果我不使用参数，则相同的命令适用于 ADO.NET（但是我必须再次清理用户输入，所以总而言之......它只是将问题转移到其他地方）

```
Dim command = connection.CreateCommand()
command.CommandText = "UPDATE table SET field = '€€€€€]]]]]]]]]]]°°°°°°§§§§§' where ...."
command.ExecuteNonQuery() ' Executes successfully '

Dim command = connection.CreateCommand()
command.CommandText = "UPDATE table SET field = @value where ...."
command.DeriveParameters()
command.Parameters("@value").Value = "'€€€€€]]]]]]]]]]]°°°°°°§§§§§'"
command.ExecuteNonQuery() ' Throws iDb2ConversionException ' 
```

我的连接字符串如下：

```
Datasource=server;DataBase=DBNAME;DefaultCollection=DBCOLLECTION;HexParserOption=Binary;LibraryList=LIBRARIES;Naming=SQL;DataCompression=True;AllowUnsupportedChar=true; 
```

是否有任何选项可以成功地将这些字符写入数据库而不会出现异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:59:55.140

嗯，终于明白了。只需更改物理文件的 CCSSID（它已经使用 CCSID 297 编译了一段时间）。

```
CHGPF FILE(MYLIB/MYFILE) CCSID(xxxx) 
```

就我而言，我使用的是 CCSID 65535。但是，使用这个，存储字符串并不那么简单，我必须提取字符串的字节数组：

```
Dim command = connection.CreateCommand()
command.CommandText = "UPDATE table SET field = @value where ...."
command.DeriveParameters()
command.Parameters("@value").Value = Encoding.Unicode.GetBytes("'€€€€€]]]]]]]]]]]°°°°°°§§§§§'")
command.ExecuteNonQuery() ' Works... ' 
```

但好消息是我现在几乎可以存储任何角色 :)

# mdx - 使用 ActivePivot 后处理器是否有一个简单的替代 DistinctCount 的方法

> ID：13607232
> 
> 赞同：1
> 
> 时间：2012-11-28T14:21:22.123
> 
> 标签：mdx, activepivot

我有一个缓慢的 MDX 查询，它执行以下操作：

```
WITH MEMBER Measures.DistinctCode as 'DistinctCount({[CODE].Children})'
SELECT 
NON EMPTY Hierarchize({DrilldownLevel({[DATE].[ALL].[AllMember]})}) ON ROWS,
NON EMPTY Hierarchize({DrilldownLevel({[SYSTEM].[ALL].[AllMember]})}) ON COLUMNS
FROM [CUBE]
WHERE ([Measures].[DistinctCode]) 
```

如何在 ActivePivot 中编写一个后处理度量，它返回与我的不同计数计算成员相同的值？我想这会快很多吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T15:33:56.050

您是否查看过开源 activepivot-ext 工件中开箱即用的 LeafCountPostProcessor？

```
com.quartetfs.biz.pivot.postprocessing.impl.LeafCountPostProcessor 
```

# java - Android 禁用任何 onTouch

> ID：13607233
> 
> 赞同：0
> 
> 时间：2012-11-28T14:21:22.633
> 
> 标签：java, android, events

我开发了一个通过 HTTP-Request 与服务器通信的 Android 应用程序。有时请求需要更多时间，因此应用程序仅显示黑屏并在几秒钟后通过。有时黑屏会在几秒钟后出现，您可以一次又一次地发送请求。

是否有可能在屏幕加载时禁用 onTouch-Events 或显示图层？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:16:01.907

在方法中使用`asyncTask`并启动您的 httprequest `doInBackground()`，并阻止用户，只需显示`ProgressDialog`：

```
class YourRequestTask extends AsyncTask<Void, Void, JSONObject> {

        ProgressDialog progress;
        Context context;

        public YourRequestTask(Context context) {
             this.context = context;
        }

        @Override
        protected void onPreExecute() {
            progress = ProgressDialog.show(context, null,"Please wait...");
        }

        @Override
        protected JSONObject doInBackground(Void... params) {
            //do your work here for your http request
        }

        @Override
        protected void onPostExecute(JSONObject result) {
            progress.dismiss();
                        Log.i(TAG, "result is "+result.toString());
        }

    } 
```

# css - facebook 消息图标出现在菜单后面 - 无法确定将 z-index 提供给哪个 id 或类

> ID：13607235
> 
> 赞同：0
> 
> 时间：2012-11-28T14:21:25.603
> 
> 标签：css, facebook, z-index

我刚刚注意到，在我的网站上，当您单击 Facebook 上的点赞按钮并打开小窗口供您发表评论时，该窗口会出现在我的下拉菜单后面。

我在 dropmenu 上有一个 1000 的 z-index，所以这就是它出现在前面的原因，但是如果我能弄清楚哪个 div id 或 class 放置一个更高的 z-index 会使其工作，我会感到很烦恼。我已经尝试了所有类型的组合，但还没有偶然发现正确的答案。我对 css 没那么强

有大神知道答案吗？

网站：[https ://www.traditionalirishgifts.c​​om](https://www.traditionalirishgifts.com)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:40:21.157

id 的菜单元素`dropMenu`宽度`z-index`为`3000`. 你需要一个更高`z-index`的 facebook 按钮。

在`fb:like`元素上，添加`z-index`of`3001`或更高。

```
<fb:like style="z-index: 3100;" href="http://www.traditionalirishgifts.com" send="false" layout="button_count" width="450" show_faces="false" fb-xfbml-state="rendered" class="fb_edge_widget_with_comment fb_iframe_widget"></fb:like> 
```

或在您的 css 文件中

```
.fb_edge_widget_with_comment {
    z-index: 3100;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-20T18:52:51.347

对于 facebook 发送弹出窗口，我需要调整以下内容

> .fb_edge_widget_with_comment span.fb_send_button_form_widget{ z-index: 1001000 !important; }

对于我需要的 Like 弹出窗口 `.fb_iframe_widget { z-index:1001000; }`

# libssh2 - 使用 libssh2 读取大量小文件的性能问题

> ID：13607236
> 
> 赞同：1
> 
> 时间：2012-11-28T14:21:25.853
> 
> 标签：libssh2

我正在尝试使用 libssh2 读取大量小文件。我目前正在使用 libssh2_scp_recv/libssh2_channel_read，我也尝试过 libssh2_sftp_open/libssh2_sftp_read。

对于大文件，我可以获得类似于 scp 的速度。但是对于小文件，我大部分时间都是通过打开远程文件（libssh2_scp_recv）的句柄而不是下载文件（libssh2_channel_read）。

scp是怎么做的？有没有一种简单的方法可以批量下载多个文件，这样我就可以使我的连接饱和？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T23:03:29.807

除非您在能够使用流水线的 libssh 之上编写自己的 SFTP 层，否则不会。

也许更简单的解决方案是使用多个线程，每个线程都建立一个独立的 SSH 连接，以便并行检索多个文件。

# java - java 强制转换 ClassCastException

> ID：13607238
> 
> 赞同：-3
> 
> 时间：2012-11-28T14:21:29.263
> 
> 标签：java, casting

我有以下课程：

```
public abstract class A implements C {
    ...
}

public abstract class B extends A {
    method();
} 
```

但是当我尝试执行以下操作时

```
A a = null;
A a = new A();
((B) a).method(); 
```

我收到 ClassCastException，有人有解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T14:24:33.730

B 扩展 A，但 A 不扩展 B。

A 拥有 B 拥有的一切，但 A 不能做 B 中声明的东西

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T14:24:45.580

的实例`B`是 的实例`A`，但 的实例`A`不一定是`B`。类似于说“所有的圆都是形状，但不是所有的形状都是圆”。

你不能做你想做的事。这就是你得到例外的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T14:27:06.357

我认为您在这里想要的是一个构造函数来获取 A 对象并从中制作一个更大的 B 对象，该对象具有包含的方法（A 没有）。但这没有多大意义。想不出我为什么要在实践中这样做，而不是从构建 B 对象开始。

```
public abstract class A implements C {
    ...
}

public abstract class B extends A {

    public B(A child){
        //Construct a B out of A here
    }

    public void method();
} 
```

然后

```
 A a = null;
 A a = new A();
 new B(a).method(); 
```

# php - 在 Twig 中，检查数组的特定键是否存在

> ID：13607241
> 
> 赞同：93
> 
> 时间：2012-11-28T14:21:33.333
> 
> 标签：php, arrays, twig, conditional, short-circuiting

在 PHP 中，我们可以使用函数来检查数组中是否存在键`array_key_exists()`。

在 Twig 模板语言中，我们可以简单地通过使用`if`语句来检查变量或对象的属性是否存在，如下所示：

```
{% if app.user %}
do something here
{% else %}
do something else
{% endif %} 
```

但是我们如何使用 Twig检查*数组的键是否存在？*我试过`{% if array.key %}`了，但它给了我一个错误：

```
Key "key" for array with keys "0, 1, 2, 3...648" does not exist 
```

由于将数据传递到模板的主要方法之一是使用数组，因此似乎应该有某种方法可以做到这一点。有什么想法吗？

* * *

## 回答 #1

> 赞同：214
> 
> 时间：2012-11-28T14:29:20.090

树枝示例：

```
{% if array.key is defined %}
  // do something
{% else %}
  // do something else
{% endif %} 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2017-01-23T21:23:06.670

您可以使用`keys`树枝功能

`{% if myVar in someOtherArray|keys %}`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-03-08T18:12:40.047

## 快速回答 (TL;DR)

*   DeveloperTLindel 想要测试 Twig 中是否存在数组键。
*   DeveloperTLindel 希望捕获与未定义键相关的任何错误。
*   这可以使用`default`过滤器来处理。

## 详细解答

### 语境

*   Twig 2.x（截至 2017 年 3 月 8 日星期三的最新版本）
*   `default`过滤器的通用用途。

### 问题

*   **设想：**
*   DeveloperTLindel 想要测试 Twig 中是否存在数组键。
*   DeveloperTLindel 希望避免由可能未定义的键引起的任何错误或异常。

### 解决方案

*   DeveloperTLindel 可以使用`default`过滤器。
*   由于`default`未定义的变量，过滤器捕获任何异常，并允许替代值的短路替换。
*   `default`过滤器是可链接的。

### Example01

```
{#- ****************************************
  测试关联数组中的单个键
  -#}
  {%- set mystring = myarray['key-no-existo'] |default('__BLANK__') -%}

{#- ****************************************
  测试关联数组中的多个键
  -#}
  {%- 设置 mystring = myarray['alpha']
        |default(myarray['bravo'])
        |默认(myarray['charlie'])
        |default('__BLANK__')
        -%}

```

### 也可以看看

*   [SO：与不存在或空变量相关的类似问题](https://stackoverflow.com/questions/3264889/how-to-check-for-null-in-twig)
*   [SO：默认过滤器的通用用途](https://stackoverflow.com/a/7896143/42223)

# android - 如何将我的 Android 应用程序连接到笔记本电脑、PC 或服务器上的 MySQL 数据库？

> ID：13607243
> 
> 赞同：0
> 
> 时间：2012-11-28T14:21:35.010
> 
> 标签：android, mysql

如何将 Android 设备连接到 PC、笔记本电脑或服务器？

我已经使用 Eclipse 完成了我的 Android 程序。我还使用客户端 - 服务器系统（我使用 MySQL，而不是 SQLite，来存储我的数据库）

当我在模拟器中运行我的程序时，它运行良好（使用带有地址的 CustomHTTPClient 连接 MySQL 是`http://10.0.2.2/android/blablabla.php`）

但是，当我将应用程序部署到真实设备上时，连接到 MySQL 数据库的代码是否相同？如果没有，我应该怎么做才能将设备连接到我的 PC/笔记本电脑/服务器中的数据库（MySQL）？我应该如何更改代码？

我不使用蓝牙，因为距离太短。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:26:29.090

您可以使用您的计算机 IP 地址。通过在命令提示符中输入“ipconfig”来找到它。查找并使用您的 IPv4 地址，它应该类似于：

```
192.168.0.XX/android/blablabla.php 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T14:27:33.990

You just have to make sure that the Android phone is connected to the same network the PC/Server is in and replace `10.0.2.2` with the ip address of the Server. I assume that you don't have a domain.

# android - Android中后台服务的位置跟踪问题

> ID：13607244
> 
> 赞同：1
> 
> 时间：2012-11-28T14:21:37.390
> 
> 标签：android, service, gps, location, locationmanager

**细节：**

我有一项服务需要执行以下操作： - 不断监听 GPS 位置，以 50 米作为参数（工作正常）并将其发送到服务器 - 每 60 秒，如果没有读取 GPS 位置，开始监听网络位置并将其发送到服务器

这听起来可能很奇怪，但这是项目要求。因此，用户一直在使用 GPS 进行跟踪。当他停下来，或 GPS 未锁定，或在建筑物内时，每 60 秒开始一次快速的网络位置读取，并将此位置发送到服务器。由于该服务使用与主应用程序相同的线程，因此每个服务器更新都在其自己的线程中完成。另一个重要的事情是：每个位置读取应该一个接一个地发送，例如，如果用户正在开车，并且完成了多次读取，则每个位置都应该在前一个发送之后发送到服务器。这就是我决定使用 ScheduledExecutorService 的原因，因为我可以提交线程并且它们将一个接一个地执行。

**这是代码：**

```
private ScheduledExecutorService scheduleTaskExecutor;
Handler locationHandler = new Handler();
private Location lastNetworkLocation;

@Override
    public void onStartCommand() {
        scheduleTaskExecutor = Executors.newSingleThreadScheduledExecutor();

        //prepare to execute Network reading every 60 seconds
        scheduleTaskExecutor.scheduleAtFixedRate(new Runnable() {
            @Override
            public void run() {
                    initNetworkReadings();

                    //usually a network location read is done almost instantly
                    //however after 5 seconds I check if a location has been read by the Network listener inside the locationRunnable
                    locationHandler.postDelayed(locationRunnable, 5000);
                } 

            }
        }, 60, 60, TimeUnit.SECONDS);

        locationRunnable = new Runnable() {
            @Override
            public void run() {
                    if (lastNetworkLocation !=null){
                         //send location to the server if valid
                    }
            lastNetworkLocation = null;
            }
        }
    }

    private void initNetworkReadings() {
        locationManager.removeUpdates(locationListenerNetwork);
        try {
            isNetworkEnabled = locationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER);
        } catch (Exception ex) {
        }

        if (isGpsEnabled) {
        locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locationListenerNetwork);
        }
    }

    LocationListener locationListenerNetwork = new LocationListener() {
    @Override
    public void onLocationChanged(Location location) {
        lastNetworkLocation = location;
        // stop listening for Network locations
        locationManager.removeUpdates(locationListenerNetwork);
    }
    ...
    } 
```

每次我读取 GPS 位置时，我都会将其添加到线程队列中：

```
scheduleTaskExecutor.submit(new Runnable() {
        @Override
        public void run() {
            updateLocationOnServer(readLocation);
        }
    }); 
```

我遇到的问题是网络位置侦听器永远不会被`onLocationChanged()`调用，当我像上面的代码一样在 Runnable 中使用它时。但是，如果我添加服务启动，`initNetworkReadings()`我会`onLocationChanged()`立即被解雇。所以我相信它与在 scheduleAtFixedRate 中使用有关。你认为这可能是什么问题？我对工作流程的看法有什么不好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:31:04.727

如果您尝试使用 Handler 和 Runnable 而不是 scheduleAtFixedRate() 来设置 repitition 会怎样？

```
Handler h = new Handler();
Runnable run = new Runnable(){
    //Do your repeititive work here!
    h.postDelayed(run, 60 * 1000);
};
h.post(run); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T11:34:01.770

同样的问题，我有一个检测位置的后台服务。如果网络可用，则使用网络，否则使用 gps。

它适用于许多智能手机（nexus s 4.1、galaxy nexus 4.2、galaxy note），但使用 Galaxy s3 jb (4.1) 网络位置永远不会上升任何位置。

与 gps 位置相同的代码，工作得很好。

# android - 尝试读取解码的 Base64 jpeg 时，Android 位图工厂返回 null

> ID：13607247
> 
> 赞同：3
> 
> 时间：2012-11-28T14:21:43.883
> 
> 标签：android, bitmap, base64, jpeg

我使用 HTTP GET 调用从 Web 服务中检索了 jpeg 图像，我需要在 ImageView 中显示它，但它是用 Base64 编码的。因此，我使用以下代码对其进行转换：

```
byte[] bytes = Base64.decode(imageStringInBase64, Base64.DEFAULT);
Bitmap bmp = BitmapFactory.decodeByteArray(bytes, 0, bytes.length); 
```

但是，我收到错误：`--- SkImageDecoder::Factory returned null`

登录到控制台时，*imageStringInBase64*如下所示：

```
data:image/jpeg;base64,/9j/4AAQ ... a bunch of stuff ... /B6TTbssco 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T15:01:01.080

如果`data:image...`是其中的值，`imageStringInBase64`那将不起作用。您只需要 base64 编码的数据（最后一个逗号之后的所有内容）。

# solr - Solr 3.6.1 - PatternReplaceFilterFactory 不适用于通配符搜索

> ID：13607248
> 
> 赞同：1
> 
> 时间：2012-11-28T14:21:44.113
> 
> 标签：solr, pattern-matching, solr-schema

PatternReplaceFilterFactory 不适用于通配符搜索。

**例子：**

```
<filter class="solr.PatternReplaceFilterFactory" pattern="([^a-z])" replacement="" replace="all"/> 
```

使用**q=defaultsearch:*ab12cd***进行搜索，预计会给出单词***abcd***的结果，但它不起作用。

你能建议我吗，有没有办法实现这个功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T18:00:10.647

[http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#Analyzers](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#Analyzers)提到 -

> 在通配符和模糊搜索中，不对搜索词执行文本分析。

因此，搜索查询在查询期间不会进行任何分析。
因此，模式替换过滤器将不适用。

# jquery - 在jQuery中获取边框宽度

> ID：13607252
> 
> 赞同：14
> 
> 时间：2012-11-28T14:21:53.490
> 
> 标签：jquery, css, dom

我必须在容器内动态定位弹出元素。我正在尝试获取容器的边框宽度。我发现了几个像这样的问题：

[如何在 jQuery/javascript 中获取边框宽度](https://stackoverflow.com/questions/3787502/how-to-get-border-width-in-jquery-javascript)

我的问题已经讨论过了，但我还没有找到任何答案。当属性为粗、细或中时，如何获取边框宽度？

街上流传着这样的说法，您通常可以期望薄、中和厚分别为 2px、4px 和 6px，但 CSS 规范并不要求这样做。

有没有人遇到过一种简单（或者如果不容易，至少是一致的）方法来获取 DOM 元素一个边缘的边框宽度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:28:31.493

通常，如果您有：

```
<div id="container">myContainer</div> 
```

您可以通过 jQuery 获取 Border-Width 属性：

```
var borderWidth = $('#container').css('borderWidth');
alert(borderWidth); 
```

或为每一方：

```
var left = $('#container').css('borderLeftWidth');
var right = $('#container').css('borderRightWidth');
var top = $('#container').css('borderTopWidth');
var bottom = $('#container').css('borderBottomWidth');

alert(left+" "+right+" "+top+" "+bottom); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T14:26:32.257

您可以使用`.innerWidth()`and`.outerWidth()`来获取带和不带边框的宽度，并从第一个中减去第二个。

```
var someElement = $("#someId");
var outer = someElement.outerWidth();
var inner = someElement.innerWidth();

alert(outer - inner); // alerts the border width in pixels 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T00:03:58.290

我玩了一会儿这个问题，我能想出的唯一解决方案可以解决这个问题：

```
var thinBorder = 1;
var mediumBorder = 3;
var thickBorder = 5;

function getLeftBorderWidth($element) {
    var leftBorderWidth = $element.css("borderLeftWidth");
    var borderWidth = 0;

    switch (leftBorderWidth) {
    case "thin":
        borderWidth = thinBorder;
        break;
    case "medium":
        borderWidth = mediumBorder;
        break;
    case "thick":
        borderWidth = thickBorder;
        break;
    default:
        borderWidth = Math.round(parseFloat(leftBorderWidth));
        break;
    }

    return borderWidth;
}

function getRightBorderWidth($element) {
    var rightBorderWidth = $element.css("borderRightWidth");
    var borderWidth = 0;

    switch (rightBorderWidth) {
    case "thin":
        borderWidth = thinBorder;
        break;
    case "medium":
        borderWidth = mediumBorder;
        break;
    case "thick":
        borderWidth = thickBorder;
        break;
    default:
        borderWidth = Math.round(parseFloat(rightBorderWidth));
        break;
    }

    return borderWidth;
}​ 
```

### [演示](http://jsfiddle.net/FranWahl/3PvmW/)

注意`Math.round()`和`parseFloat()`。这些是因为 IE9 返回`0.99px`for`thin`而不是`1px`和`4.99px`for`thick`而不是`5px`.

**编辑**

您在评论中提到，IE7 有不同的尺寸，分为薄型、中型和厚型。
它们似乎只有 0.5 像素，这很难处理，因为你很可能需要完整的数字。

我的建议是要么简单地忽略差异的 0.5px 并承认使用 IE7 及更低版本时最可能不明显的缺陷，或者如果你非常想处理它来调整常量，类似于：

```
var thinBorder = 1;
var mediumBorder = 3;
var thickBorder = 5;

// Will be -1 if MSIE is not detected in the version string
var IEVersion = navigator.appVersion.indexOf("MSIE");

// Check if it was found then parse the version number. Version 7 will be 17 but you can trim that off with the below.
If(IEVersion > -1){
    IEVersion = parseInt(navigator.appVersion.split("MSIE")[1]);
}

// Now you can simply check if you are in an ancient version of IE and adjsut any default values accordingly.
If(IEVersion < 7){
    thinBorder = 0.5;
    mediumBorder = 3.5;
    thickBorder = 4.5;
}

/// rest as normal 
```

以上任何一个都不是复制粘贴的解决方案，而只是对可以处理此问题的几种方法的演示。您自然会将所有这些帮助程序包装到单独的函数、插件或扩展中。

在您的最终解决方案中，您甚至可能仍需要处理浮点偏移和舍入问题。

这应该能够让你开始，虽然足够好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T07:22:24.647

获取边框宽度：

```
<script type="text/javascript">
$(document).ready(function(){
   var widthBorder = $("div").css("border");
   alert(widthBorder);
   //you can split between sintax 'px'
});
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-02T11:26:10.470

我有一个解决方案，使用额外的内部容器来规避问题并计算容器所有侧面的真实边界。因此，如果在您的情况下可以使用这个额外的内部容器，那么[这个小提琴](http://jsfiddle.net/XxZ37/1/)在 Chrome/FF/Safari/IE7/IE8 和像素边框定义以及薄/中/厚中适用于我：

```
var BorderWrapper = {
    getBorderWidth: function(elem) {
        elem = jQuery(elem);
        var elemInner = jQuery(elem).find('.borderElemInner');

        var posOuter = elem.position();
        var posInner = elemInner.position();

        var result = {
            top:    posInner.top - posOuter.top - parseInt(elem.css('marginTop')),
            right:  0,
            bottom: 0,
            left:   posInner.left - posOuter.left - parseInt(elem.css('marginLeft'))
        };

        result.right = jQuery(elem).outerWidth() 
                     - jQuery(elemInner).outerWidth() 
                     - result.left;

        result.bottom = jQuery(elem).outerHeight() 
                      - jQuery(elemInner).outerHeight() 
                      - result.top;

        return result;
    }
}; 
```

它使用 jQuery 的 ''.position()''、''.outerWidth()'' 和 ''.outerHeight()'' 并且还考虑了外部容器的边距。

也许有人可以在 IE9 中验证这一点？我没有它:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-03T06:54:27.277

```
<script type="text/javascript">
$(document).ready(function(){
   var widthBorder = $("div").css("border","5px");
  // you can increase your pixel size according to your requirement.
});
</script> 
```

# ruby-on-rails - RSpec 测试 link_to 在 p 标签内

> ID：13607253
> 
> 赞同：0
> 
> 时间：2012-11-28T14:21:56.057
> 
> 标签：ruby-on-rails, tdd, rspec2

是否可以对以下 html 结构进行测试？

```
<p class="all-jobs"><%= link_to "<< Back to all jobs", jobs_path %></p> 
```

我试过这样做：

```
it { should have_selector('p.all-jobs', link: "<< Back to all jobs")} 
```

错误是：

```
 1) JobPages visit a job page 
 Failure/Error: it { should have_selector('p.all-jobs', link: "<< Back to all jobs")}
   expected css "p.all-jobs" to return something
 # ./spec/requests/job_pages_spec.rb:78:in `block (3 levels) in <top (required)>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T05:09:48.100

好的，我让它与以下内容一起工作：

```
describe "should have a link to index page" do
  it { should have_selector('a', title: "<< Back to all jobs", href: jobs_path) }
end 
```

# c# - 为什么要分块写入 Stream？

> ID：13607254
> 
> 赞同：6
> 
> 时间：2012-11-28T14:21:57.647
> 
> 标签：c#, stream, meta, point-of-interest

我想知道为什么这么多示例将字节数组读入卡盘中的流中，而不是一次全部读入......我知道这是一个软问题，但我很感兴趣。

我了解一些关于硬件和填充缓冲区的信息可能非常依赖于大小，并且您不想再次写入缓冲区，直到它被刷新到它需要去的任何地方等等......但是使用.Net平台（和其他现代语言）我看到了两者的例子。那么什么时候使用哪个，什么时候使用，或者第二个是绝对不不？

这是我的意思的事情（代码）：

```
var buffer = new byte[4096];

while (true)
{
    var read = this.InputStream.Read(buffer, 0, buffer.Length);

    if (read == 0)
        break;

    OutputStream.Write(buffer, 0, read);
} 
```

而不是：

```
var buffer = new byte[InputStream.Length];

var read = this.InputStream.Read(buffer, 0, buffer.Length);

OutputStream.Write(buffer, 0, read); 
```

我相信两者都是合法的？那么，为什么要经历 while 循环的所有大惊小怪（无论您决定如何构建它）？

我在这里扮演魔鬼倡导者，因为我想尽可能多地学习:)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-28T14:24:33.487

在第一种情况下，您只需要 4kB 的内存。在第二种情况下，您需要与输入流数据一样多的内存。如果输入流是 4GB，则需要 4GB。

您认为如果文件复制操作需要 4GB 内存会更好吗？如果您要准备一个 20GB 的磁盘映像怎么办？

管道也有这个东西。您不经常在 Windows 上使用它们，但在其他操作系统上经常会看到类似的情况。第二种情况等待所有数据被读取，然后才将它们写入输出。但是，有时建议尽快写入数据——第一种情况将在读取前 4kB 输入后立即开始写入输出流。考虑为网页提供服务：建议网络服务器尽快发送数据，以便客户端的网络浏览器开始呈现标题和内容的第一部分，而不是等待整个正文。

但是，如果您知道输入流不会大于 4kB，那么这两种情况是等价的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-28T14:25:26.697

有时，InputStream.Length 对某些源无效，例如来自网络传输，或者缓冲区可能很大，例如从一个巨大的文件中读取。国际海事组织。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T14:24:04.497

它可以保护您免受输入流为数 GB 长的情况。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-28T14:24:25.947

`Read`您不知道可能返回多少数据。如果您正在读取一个非常大的文件，这可能会造成严重的性能问题。

如果您可以控制输入，并且确定大小是合理的，那么您当然可以一次读取整个数组。但如果用户可以提供任意输入，则要特别小心。

# extjs - ExtJs - 如何删除所有浮动组件

> ID：13607256
> 
> 赞同：1
> 
> 时间：2012-11-28T14:21:59.700
> 
> 标签：extjs, extjs4.1

使用 ExtJs 4.1

有没有办法查询所有**浮动**组件（窗口、消息框等）？

我的目标是移除（摧毁）所有漂浮的物体。第一手“获得”它们就足够了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T14:29:33.020

好吧，只需使用默认情况下负责所有浮动组件的**[Ext.WindowManager 即可。](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.WindowManager)**

以下应该工作：

```
Ext.WindowManager.each(function(cmp) { cmp.destroy(); }); 
```

这是一个示例**[JSFiddle](http://jsfiddle.net/8aZy9/)**：

```
Ext.create('Ext.window.Window', {
    title: 'Hello',
    height: 200,
    width: 400,
    layout: 'fit',
    items: {  // Let's put an empty grid in just to illustrate fit layout
        xtype: 'grid',
        border: false,
        columns: [{header: 'World'}],                 // One header just for show. There's no data,
        store: Ext.create('Ext.data.ArrayStore', {}) // A dummy empty data store
    }
}).show();

Ext.Function.defer(function(){Ext.WindowManager.each(function(cmp) { cmp.destroy(); })}, 5000); 
```

进一步阅读**[DOM-Query](http://www.w3.org/TR/2005/WD-css3-selectors-20051215/#selectors)**

**编辑** *仅销毁定义的类型*

对于这种情况，请使用组件的 xtype 并检查它。

```
Ext.WindowManager.each(function(cmp) { if (cmp.xtype === 'window') cmp.destroy(); }); 
```

# c# - 如何确定通用数字参数是否无符号？

> ID：13607258
> 
> 赞同：5
> 
> 时间：2012-11-28T14:22:08.777
> 
> 标签：c#, generics, random

我有一个通用的方法来生成最小值和最大值内的随机数。我也有一个类似的函数来生成具有相同限制的越界值。

但问题是，我需要填写不同类型的变量。一些变量是无符号的，并且最小-最大范围与它们的无符号类型相同。

当我尝试为这些变量创建越界值时，我超出了变量的限制（准确地说是 ushort）。

这是我的通用方法：

```
 private static U GenerateOutOfBounds<U>(U minimum, U maximum) where U : IComparable, IFormattable, IConvertible
    {
        bool b       = g.NextBoolean();
        long signCheckForMinimum = Convert.ToInt64(minimum);
        double maxpp = g.NextDouble(Convert.ToDouble(maximum), Convert.ToDouble(maximum) + g.Next());
        double minpp = g.NextDouble(Convert.ToDouble(maximum), Convert.ToDouble(maximum) + g.Next());
        if (signCheckForMinimum >= 0)
        {
            b = true;
        }

        if (b)
        {
            return (U)Convert.ChangeType(maxpp, Type.GetTypeCode(typeof(U)));
        }
        else
        {
            return (U)Convert.ChangeType(minpp, Type.GetTypeCode(typeof(U)));
        }
    } 
```

我试图通过将其转换为 long 来确定该数字是否未签名，但我现在可以看到这种方法是*非常*错误的。

那么如何确定我得到的变量是否是无符号的，或者有没有办法在不与所有无符号类型进行比较的情况下检查该类型是否是无符号的？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-28T16:08:06.517

```
bool signed = Convert.ToBoolean(typeof(U).GetField("MinValue").GetValue(null)); 
```

有符号类型具有非零`MinValue`常量，它将`true`在布尔转换期间转换为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T15:05:00.987

我会通过比较 param == abs(param) 来回答这个问题，以便您可以确定它是否为负数并分别处理。您可以尝试上转换为双精度（或最大可能的有符号数字类型，以免丢失任何精度）。

# sitecore - Sitecore - 事件冒泡

> ID：13607260
> 
> 赞同：0
> 
> 时间：2012-11-28T14:22:15.237
> 
> 标签：sitecore

我有两个渲染用户控件 - 布局中的 UserControl1.ascx 和 UserControl2.ascx，通过站点核心演示详细信息动态分配。

如何使用事件冒泡从 UserControl2.ascx 调用方法（UserControl1.ascx 中的 GetLabelText()）？

这是我的示例代码 - 当我单击按钮（UserControl1.ascx 中的 UserControl2Button1）时 - 我想从 UserControl2.ascx 调用 GetLabelText() 方法 - 使用事件冒泡。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T21:40:19.267

你有一点设计问题。您需要一些明确定义的父/子关系。这并不是一个真正的 Sitecore 问题......如果您考虑如何在 Sitecore 之外解决这个问题，那么正确的解决方案可能会很明显。

首先，我将创建一个明确引用 UserControl1 和 UserControl2 的新子布局。我们将其称为 ParentControl。然后将自定义事件添加到 UserControl2。我们称之为CustomButtonClick。ParentControl 然后订阅该事件，就像它订阅任何控件事件一样：

```
UserControl2.CustomButtonClick += new EventHandler(UserControl2_CustomClick); 
```

然后在事件处理程序中：

```
void UserControl2_CustomClick(object sender, EventArgs e)
{
    UserControl1.GetLabelText();
} 
```

在您的演示详细信息中使用 ParentControl 而不是 Control1 和 Control2，您就完成了。您现在已经创建了这些控件之间的显式关系（通过 ParentControl），而不是您试图实现的隐含关系。你不能一边吃蛋糕一边吃……至少，在不违反良好设计原则的情况下是这样。

# iphone - 弹出视图控制器时的 EXC_BAD_ACCESS

> ID：13607275
> 
> 赞同：2
> 
> 时间：2012-11-28T14:23:04.873
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

我正在正确地从 A 推送 BViewController。B 包含一个 webview，当 viewDidLoad 时开始加载页面。将 B 弹出到 A 时出现奇怪的行为，

1.  如果 webview 完成加载，然后我执行 popViewController（在工具栏按钮上的 touchUpInside 时执行 IBAction），弹出到 A，所以一切正常。
2.  但是，如果我在 webview 结束加载之前立即弹出视图控制器，应用程序会由于 exc_bad_access 而崩溃。为什么？视图已加载！

我检查了导航堆栈上的两种情况视图控制器。两种情况都具有相同的结果，2个相同的对象，没有区别！

```
-(IBAction)goBackOrg:(id)sender{

    NSArray *viewControllers = self.navigationController.viewControllers;

    [[self navigationController]  popViewControllerAnimated:NO];

} 
```

对于以前推动它，我正在使用

```
if(!self.BController){

            self.BController = [[BViewController alloc] initWithNibName:@"BViewController" bundle:nil anUrlDest:urlSocial];
        }

    [[self navigationController] pushViewController:self.BController animated:NO]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:26:28.993

当您尝试访问已被释放的对象时，会发生 EXC_BAD_ACCESS。

所以以下可能是您的问题：当您弹出 ViewController B 时，它正在被卸载。如果在 ViewController B 卸载后 web 视图加载完成，则正在执行一些回调代码，它试图对您的 ViewController 或其视图（或类似）执行某些操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T14:38:18.613

可能是您正在加载您的 webView，`Thread`并且当您使用线程时，您无法在 UI 中进行更改，否则您的应用程序将崩溃。

所以只需在 mainThread 上执行此任务。

# asp-classic - 如何将文件夹转换为 zip。asp经典中的文件

> ID：13607276
> 
> 赞同：0
> 
> 时间：2012-11-28T14:23:07.630
> 
> 标签：asp-classic, vbscript

任何人都可以帮助我如何将文件夹转换为经典 asp 中的 zip 文件。

```
<% 
Dim objZip 
Response.write("new") 
Set objZip = Server.CreateObject("Scripting.FileSystemObject") 
Response.write("yahoo") 
objZip.Pack "C:\inetpub\wwwroot\NewZIp\Images\SMM.JPEG", "C:\inetpub\wwwroot\NewZIp\Images.zip" 
objZip.Pack "C:\inetpub\wwwroot\NewZIp\Images\IMS.JPEG", "C:\inetpub\wwwroot\NewZIp\Images.zip" 
Set objZip = Nothing 
%> 
```

我正在使用这个代码将文件夹转换为 zip

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-11-28T16:55:07.007

这可以使用 C# 在 asp.net 中轻松完成。以下代码将帮助您压缩文件夹。

```
using System;
using System.IO;
using System.IO.Packaging;

namespace ZipSample
{
    class Program
    {
        static void Main(string[] args)
        {
            AddFileToZip("Output.zip", @"C:\Windows\ABC.exe");
            AddFileToZip("Output.zip", @"C:\Windows\System32\DEF.exe");
        }

        private const long BUFFER_SIZE = 4096;

        private static void AddFileToZip(string zipFilename, string fileToAdd)
        {
            using (Package zip = System.IO.Packaging.Package.Open(zipFilename, FileMode.OpenOrCreate))
            {
                string destFilename = ".\\" + Path.GetFileName(fileToAdd);
                Uri uri = PackUriHelper.CreatePartUri(new Uri(destFilename, UriKind.Relative));
                if (zip.PartExists(uri))
                {
                    zip.DeletePart(uri);
                }
                PackagePart part = zip.CreatePart(uri, "",CompressionOption.Normal);
                using (FileStream fileStream = new FileStream(fileToAdd, FileMode.Open, FileAccess.Read))
                {
                    using (Stream dest = part.GetStream())
                    {
                        CopyStream(fileStream, dest);
                    }
                }
            }
        }

        private static void CopyStream(System.IO.FileStream inputStream, System.IO.Stream outputStream)
        {
            long bufferSize = inputStream.Length < BUFFER_SIZE ? inputStream.Length : BUFFER_SIZE;
            byte[] buffer = new byte[bufferSize];
            int bytesRead = 0;
            long bytesWritten = 0;
            while ((bytesRead = inputStream.Read(buffer, 0, buffer.Length)) != 0)
            {
                outputStream.Write(buffer, 0, bytesRead);
                bytesWritten += bufferSize;
            }
        }
    }
} 
```

# c# - 如何将浮点数组转换为字节数组并通过 UDP 以字节顺序发送它们？

> ID：13607277
> 
> 赞同：-1
> 
> 时间：2012-11-28T14:23:10.947
> 
> 标签：c#, arrays, networking, network-programming

我有一个浮点数组：`public static List<float> myData = new List<float>();`我需要将它们转换为大字节序字节数组并通过 UDP 连接发送它们。我不知道该怎么做，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T14:32:27.437

```
int width = sizeof(float);
byte[] data = new byte[myData.Count * width];

for (int i = 0; i < myData.Count; ++i)
{
    byte[] converted = BitConverter.GetBytes(myData[i]);

    if (BitConverter.IsLittleEndian)
    {
        Array.Reverse(converted);
    }

    for (int j = 0; j < width; ++j)
    {
        data[i * width + j] = converted[j];
    }

} 
```

`data`将是字节数组，其中包含大端字节序中浮点数的位表示

要使用 UDP 发送，请尝试以下操作：

```
Socket sock = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);
IPAddress serverAddr = IPAddress.Parse("127.0.0.1");
IPEndPoint endPoint = new IPEndPoint(serverAddr, 13);
sock.SendTo(data, endPoint); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T14:38:45.957

尝试以下操作：

```
 byte[] array=null;
    List<float> myData = new List<float>();
    myData.Add(43.1f);
    myData.Add(42.1f);
    myData.Add(41.1f);
    myData.Add(40.1f);
    foreach (float a in myData)
       array = BitConverter.GetBytes(a);
    //printing
    for (int i = 0; i < array.Length; i++)
    {
        Console.WriteLine(array[i]);
    } 
```

**输出：**

![输出](../Images/91078f998fdc3345c967c2700060deb2.png)

希望这可以帮助。

# javascript - HTML5 限制输入字符

> ID：13607278
> 
> 赞同：28
> 
> 时间：2012-11-28T14:23:12.970
> 
> 标签：javascript, html, input

是否可以限制 HTML5/JavaScript 中某些字符的输入？例如，我是否可以在屏幕上有一个输入文本框，如果用户尝试在其中输入一个字母，它不会出现在框中，因为我将其限制为仅数字？

我知道您可以使用将在提交时检查的模式，但我希望永远不要输入“坏”字符。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-28T14:31:17.143

使用 html5 模式属性进行输入：

```
<input type="text" pattern="\d*" title="Only digits" /> 
```

或者

使用 html5 数字类型进行输入：

```
<input type="number" /> 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-28T14:32:53.273

输入文本框

```
<input type="text" onKeyDown="myFunction()" value="" /> 
```

JavaScript

```
function myFunction() {
    var e = event || window.event;  // get event object
    var key = e.keyCode || e.which; // get key cross-browser

    if (key < 48 || key > 57) { //if it is not a number ascii code
        //Prevent default action, which is inserting character
        if (e.preventDefault) e.preventDefault(); //normal browsers
        e.returnValue = false; //IE
    }
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-06-27T13:29:01.557

为了稍微改进 jonhopkins 的出色答案，我添加了退格键并删除了键接受，如下所示：

```
 function inputValidate(){
   var e = event || window.event;  
   var key = e.keyCode || e.which;                              
   if (((key>=48)&&(key<=57))||(key==8)||(key == 46)) { //allow backspace //and delete
           if (e.preventDefault) e.preventDefault(); 
           e.returnValue = false; 
   }
 } 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-05-19T09:51:45.140

对于限制字符符号，例如“-”和“，”

```
<input type="text" pattern="[^-,]+"> 
```

用于限制数字

```
<input type="text" pattern="[^0-9]+"> 
```

用于限制字母

```
<input type="text" pattern="[^a-zA-Z]+"> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-04-30T19:08:37.753

```
//improved wbt11a function

function numberFieldStrictInput(allowcomma, allownegative) {
    var e = event || window.event;  // get event object
    var key = e.keyCode ||`enter code here` e.which; // get key cross-browser

    if(key==8 || key==46 || key == 9 || key==17 || key==91 || key==18 || 
            key==116 || key==89 || key==67 || key==88 || key==35 || key==36) //back, delete tab, ctrl, win, alt, f5, paste, copy, cut, home, end
        return true;

    if(key == 109 && allownegative)
        return true;

    if(key == 190 && allowcomma)
        return true;

    if(key>=37 && key<=40) //arrows
        return true;

    if(key>=48 && key<=57) // top key
        return true;

    if(key>=96 && key<=105) //num key
        return true;
    console.log('Not allowed key pressed '+key);

    if (e.preventDefault) e.preventDefault(); //normal browsers
        e.returnValue = false; //IE

}   

//on input put onKeyDown="numberFieldStrictInput(1,0)" 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-02-12T15:42:13.420

这个怎么样（它支持特殊键，如自动复制、粘贴、F5）？

```
function filterNumericInput() {
    var e = event || window.event;  // get event object
    if (e.defaultPrevented) {
      return;
    }
    const key = e.key || e.code;
    if ((e.key.length <= 1) && (!(e.metaKey || e.ctrlKey || e.altKey))) {
      if (!((key >= '0' && key <= '9') || (key === '.') || (key === ',') || (key === '-') || (key === ' '))) {
        if (e.preventDefault) {
          e.preventDefault();
        } else {
          e.returnValue = false;
        }
      }
    }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-06-23T17:33:09.597

`KeyboardEvent.keyCode`已弃用，因此这是使用该`HMLElement.input`事件的解决方案。这个解决方案使用一个简单的正则表达式，并且通过从任何输入中删除有问题的元素来很好地处理复制粘贴。

我的正则表达式：`/[^\w\d]/gi`

*   匹配非 ( `^`) 单词字符 ( `\w`: az) 或数字 ( `\d`: 0-9) 的任何内容。
*   `g`修饰符使正则表达式全局化（第一次匹配后不返回）
*   `i`修饰符使正则表达式不区分大小写

使用此正则表达式，将不允许使用特殊字符和空格。如果您想添加更多，您只需将允许的字符添加到正则表达式列表中。

```
function filterField(e) {
  let t = e.target;
  let badValues = /[^\w\d]/gi;
  t.value = t.value.replace(badValues, '');
}

let inputElement = document.getElementById('myInput');
inputElement.addEventListener('input', filterField);
```

```
<input id="myInput" type="text" style="width: 90%; padding: .5rem;" placeholder="Type or paste (almost) anything...">
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-04-01T10:40:17.517

```
var keybNumberAndAlpha = new keybEdit(' 0123456789abcdefghijklmnopqrstuvwxyz');

function keybEdit(strValid, strMsg) {
    var reWork = new RegExp('[a-z]','gi');		//	Regular expression\
    //	Properties
    if(reWork.test(strValid))
            this.valid = strValid.toLowerCase() + strValid.toUpperCase();
    else
            this.valid = strValid;
    if((strMsg == null) || (typeof(strMsg) == 'undefined'))
            this.message = '';
    else
            this.message = strMsg;
    //	Methods
    this.getValid = keybEditGetValid;
    this.getMessage = keybEditGetMessage;
    function keybEditGetValid() {
            return this.valid.toString();
    }
    function keybEditGetMessage() {
            return this.message;
    }
}

function editKeyBoard(ev, objForm, objKeyb) {
    strWork = objKeyb.getValid();    
    strMsg = '';							// Error message
    blnValidChar = false;					// Valid character flag
    var BACKSPACE = 8;
    var DELETE = 46;
    var TAB = 9;
    var LEFT = 37 ;
    var UP = 38 ;
    var RIGHT = 39 ;
    var DOWN = 40 ;
    var END = 35 ;
    var HOME = 35 ;

    // Checking backspace and delete  
    if(ev.keyCode == BACKSPACE || ev.keyCode == DELETE || ev.keyCode == TAB 
        || ev.keyCode == LEFT || ev.keyCode == UP || ev.keyCode == RIGHT || ev.keyCode == DOWN)  {

        blnValidChar = true;

    }

    if(!blnValidChar) // Part 1: Validate input
            for(i=0;i < strWork.length;i++)
                    if(ev.which == strWork.charCodeAt(i) ) {
                            blnValidChar = true;
                            break;
                    }
                            // Part 2: Build error message
    if(!blnValidChar) 
    {
                //if(objKeyb.getMessage().toString().length != 0)
                    //		alert('Error: ' + objKeyb.getMessage());
            ev.returnValue = false;		// Clear invalid character

                ev.preventDefault();

            objForm.focus();						// Set focus
    }
}
```

```
<input type="text"name="worklistFrmDateFltr" onkeypress="editKeyBoard(event, this, keybNumberAndAlpha)" value="">
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-06-20T04:22:08.173

**将输入限制为字母、数字和“。”** **（仅适用于 React 用户）**

这是我的简单解决方案，我找不到更好的 React 解决方案并自己制作。3个步骤。

首先，创建一个状态。

```
const [tagInputVal, setTagInputVal] = useState(""); 
```

然后，使用状态作为输入值 ( `value={tagInputVal}`) 并将事件传递给`onChange`处理程序。

```
<input id="tag-input" type="text" placeholder="Add a tag" value={tagInputVal} onChange={(e) => onChangeTagInput(e)}></input> 
```

然后，在`onChange`处理程序中设置事件的值。

```
function onChangeTagInput(e) {
    setTagInputVal(e.target.value.replace(/[^a-zA-Z\d.]/ig, ""));
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-11-30T22:06:00.303

我发现 onKeyDown 捕获 Shift 键、箭头等。为了避免考虑到这一点，我可以通过订阅**onKeyPress**轻松过滤掉字符输入。

# java - 如何从多个参数生成自定义键以在 Spring 3.1 中缓存抽象？

> ID：13607279
> 
> 赞同：0
> 
> 时间：2012-11-28T14:23:18.713
> 
> 标签：java, spring, caching, key

[Spring 文档](http://static.springsource.org/spring/docs/3.1.0.M1/spring-framework-reference/html/cache.html)提供了一个示例，如何根据其中一个参数计算自定义键：

```
@Cacheable(value="book", key="isbn")
public Book findBook(ISBN isbn, boolean checkWarehouse, boolean includeUsed) 
```

但是，如果我需要从多个参数计算密钥怎么办？例如在

```
@Cacheable(value="book", key="???")
public Book findBook(String author, String title,
                     boolean checkWarehouse, boolean includeUsed) 
```

**`author`我将如何从和计算密钥`title`？**到目前为止，我想出了丑陋的解决方案，例如

```
author.hashCode() + 31 * title.hashCode() 
```

或者我可以创建一个外部辅助函数，例如

```
public static int hashes(Object... args) {
    return java.util.Arrays(args).asList().hashCode();
} 
```

并称它为`key="T(mypackage.MyHelperClass).hashes(author, title)"`. 仍然远非优雅。

（在我看来，如果`@Cacheable`有`String[] key`而不是会更容易`String key`。对于默认键，Spring 无论如何都必须将多个散列组合成一个。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:56:55.387

如果您使用的是 JDK 1.7，您可能可以执行以下操作：

```
@Cacheable(value="book", key="T(java.util.Objects).hash(#p0,#p1)")
public Book findBook(String author, String title,
                     boolean checkWarehouse, boolean includeUsed) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-01T18:49:36.350

密钥不是哈希！不要使用 Objects.hash 或类似内容创建密钥。在 javadoc 中查找。

对于您的情况，使用您的字段、多参数构造函数创建类 ComplexKey，并为此字段生成 hashCode 和 equals。

# java - Spring Integration：仅遍历目录内容一次

> ID：13607283
> 
> 赞同：1
> 
> 时间：2012-11-28T14:23:29.910
> 
> 标签：java, spring, spring-integration

我正在使用一个 Spring Integration 应用程序，它应该遍历目录的内容，处理其中的文件，然后退出。

我已经在下面设置了 XML 以每秒轮询目录，但这并不是我所追求的。如何更改它以读取目录中的所有文件，然后在消息完成流过系统后让我的程序退出？

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:int-file="http://www.springframework.org/schema/integration/file"
    xmlns:int="http://www.springframework.org/schema/integration"
    xsi:schemaLocation="http://www.springframework.org/schema/integration/xml http://www.springframework.org/schema/integration/xml/spring-integration-xml-2.1.xsd
        http://www.springframework.org/schema/integration http://www.springframework.org/schema/integration/spring-integration-2.1.xsd
        http://www.springframework.org/schema/integration/file http://www.springframework.org/schema/integration/file/spring-integration-file-2.1.xsd
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd >

    <int-file:inbound-channel-adapter
        directory="inputDir" 
        channel="inputChannel">
        <int:poller fixed-rate="1000"></int:poller>
    </int-file:inbound-channel-adapter>

  <!-- more components to read from inputChannel, write to output adapter -->
</beans> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:05:46.070

有点hacky，我过去曾使用过这种方法，并且效果很好。

方法是定义一个`shutdown`队列通道，从你的主线程等待消息到达这个通道，一旦可用就关闭应用程序上下文。

```
<int:channel id="shutdownChannel"><int:queue/></int:channel> 
```

在你的主线程 - ：

```
 PollableChannel pollableChannel = applicationContext.getBean("shutdownChannel",PollableChannel.class);
    pollableChannel.receive();
    applicationContext.close(); 
```

`receive`只有当消息进入关闭通道时，主代码才会通过调用。现在的问题是如何将消息发送到关闭通道。

您可以在文件消息的最终处理器中保留一些状态，例如自上次处理任何文件以来的时间，以下可能是稻草人：

```
public class FileContentProcessor {
    private long lastProcessedTime = System.currentTimeMillis();

    public void processContent(String content){
        this.lastProcessedTime = System.currentTimeMillis();
        System.out.println("Processed content: " + content);
    }

    public long msSinceLastProcessed(){
        return System.currentTimeMillis() - this.lastProcessedTime;
    }
} 
```

根据这个状态定义一个入站通道适配器：

```
<int:inbound-channel-adapter ref="fileProcessor" method="msSinceLastProcessed" channel="shutdownFilterChannel">
    <int:poller fixed-rate="3000"/> 
</int:inbound-channel-adapter>

<int:filter input-channel="shutdownFilterChannel" output-channel="shutdownChannel" expression="payload>20000"></int:filter> 
```

在这里，我基本上得到了自上次处理以来的时间，将其传递给一个过滤器，该过滤器检查自上次处理时间以来是否超过 20 秒，并将该消息传递给关闭通道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T14:39:18.633

假设您使用的是独立的 java 程序，那么当您在某个时间间隔内未收到消息时，您可能可以将消息发送到输出通道和 System.exit。

```
 final AbstractApplicationContext context =
                new ClassPathXmlApplicationContext("classpath:META-INF/spring/integration/*-context.xml");

// initiates poller to poll files
// do your processing and then send to a channel say output ..

PollableChannel output = (PollableChannel) context.getBean("output");
Object msg = null;
while((msg = output.receive(1000)) != null)
   {
        msg = output.receive().getPayload();        
        System.out.println("payload - " + msg);
    }
System.exit(0); 
```

另一种选择是向服务激活器发送消息，然后启动 jvm 关闭。

> 请注意：EAI 模式是实际处理文件，然后移动到已处理的目录。

# qt - Qt 父小部件无法更新

> ID：13607284
> 
> 赞同：2
> 
> 时间：2012-11-28T14:23:36.163
> 
> 标签：qt, opengl

我正在用 qt/opengl 编写俄罗斯方块游戏。

游戏部分是事件驱动的（Game类，它是一个QGLWidget），另一部分是在一个QThread（GameLogic类）中。当我尝试将此小部件放在带有“菜单”小部件的父小部件中时，出现了我的问题。即使我从游戏小部件paintGL() 方法向父小部件发送信号以刷新自身（父小部件），也没有任何反应，并且我的应用程序看起来像是被冻结了。

虽然当我尝试 resize() 而不是 repaint() 时，父小部件会自行调整大小（我猜也会刷新），我们可以看到游戏已经走了多远。

所以基本上我的游戏小部件和线程工作正常，但我没有设法要求父小部件简单地更新自身（如果是问题的话）。我已经尝试过 update()、repaint()，它们都`QCoreApplication::processEvents()`使用 QueuedConnection 和 DirectConnection 进行连接。我收到了一堆“递归重绘”错误消息，尽管父级似乎没有更新。

# rest - 服务器上的 ServiceStack 和 .NET Compact Framework 客户端

> ID：13607287
> 
> 赞同：2
> 
> 时间：2012-11-28T14:23:44.267
> 
> 标签：rest, compact-framework, servicestack

我使用 ServiceStack 创建了服务器和客户端（MonoDroid 和 Windows），一切运行良好，但现在我需要使用带有 Compact Framework F3.5 的移动客户端来使用来自服务器的数据。

我可以将它作为 SOAP webservice 访问，但我更喜欢通过 REST，并使用框架来简化事情，就像 ServiceStack 客户端（因为 RestSharp 与 Compact Framework 不兼容）。

你知道与 CF3.5 兼容的东西，它可以让我以简单的方式连接到 ServiceStack 服务器

```
var client = new JsonServiceClient("http://192.168.0.87:82");
HelloResponse response = client.Get(new Hello { Name = "World!" }); 
```

更新：

我设法使用 HTTPWebRequest 获得响应，并使用支持 .NET Compact Framework 的旧 JSON.Net 版本反序列化我的 HelloResponse 对象。我唯一缺少的是如何序列化我假设的 HelloReq 对象并将其传递给 HttpWebRequest，有什么提示吗？（无需手动创建如下路线）

```
HttpWebRequest req = (HttpWebRequest)WebRequest.Create("http://192.168.0.87:82/Hello/test?format=json");
req.Method = "GET";           
HttpWebResponse resp = (HttpWebResponse)req.GetResponse();
Stream respStream = resp.GetResponseStream();
string resps;

using (var reader = new StreamReader(respStream, Encoding.UTF8))
{
      resps = reader.ReadToEnd();
}
respStream.Close();

JsonTextReader jreader = new JsonTextReader(new StringReader(resps));

JsonSerializer serializer = new JsonSerializer();
HelloResponse p = serializer.Deserialize<HelloResponse>(jreader); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T15:05:17.007

请求创建：

```
HttpWebRequest req = (HttpWebRequest)WebRequest.Create("http://192.168.0.87:82/json/syncreply/Hello");
            req.ContentType = "text/json";
            req.Method = "POST";
            req.ContentLength = json.Length;

            using (var streamWriter = new StreamWriter(req.GetRequestStream()))
            {
                streamWriter.Write(json);
                streamWriter.Flush();
                streamWriter.Close();
            } 
```

# ruby-on-rails - Rails Mongoid - 存储会话

> ID：13607290
> 
> 赞同：0
> 
> 时间：2012-11-28T14:24:00.273
> 
> 标签：ruby-on-rails, mongodb, session, mongoid

有没有办法使用 Mongoid（MongoDB）在数据库中存储 Rails 会话？我见过几颗宝石，但它们大约 1 到 2 岁。

我不确定这些 gem 是否对于使用 mongo 会话是必要的（例如非常复杂的任务），或者我可以做一些“破解”来使其工作。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T13:17:19.590

试试这个[mongo_sessions](https://github.com/biilmann/mongo_sessions)。根据提交，仍在积极使用/开发中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T08:00:09.923

对于[mongo_sessions](https://github.com/biilmann/mongo_sessions)，您可能需要将 Gemfile 指向 git 存储库，如此处[所述](https://stackoverflow.com/questions/13670747/session-store-does-not-work#answer-13671773)。如果这仍然不起作用，您可以尝试[mongo_session_store-rails3](https://github.com/brianhempel/mongo_session_store)。

# c# - 设置滚动范围时 Devexpress 图表不响应

> ID：13607293
> 
> 赞同：0
> 
> 时间：2012-11-28T14:24:05.047
> 
> 标签：c#, winforms, devexpress

关于winforms的Devexpress xtra图表的问题在某些情况下，当我调用函数时应用程序没有响应

```
myChart.diagram.AxisX.Range.ScrollingRange.SetMinMaxValues(startRange, finishRange); 
```

图表的类型是 XYdiagram x 轴的 ScaleType 是 dateTime 并且所有系列都有这个 scaleType startRange 和 finishRange 是正确的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:50:50.883

确保将 Range 设置为 auto （我的 DevX 有点旧，所以类名/方法可能已经改变了一些）

```
myChart.diagram.AxisX.Range.Auto = false; 
```

# apache - 将（几乎）所有请求重定向到顶级 url

> ID：13607299
> 
> 赞同：0
> 
> 时间：2012-11-28T14:24:16.547
> 
> 标签：apache, .htaccess, mod-rewrite

我在这里查看了很多其他 mod_rewrite 问题并尝试了其中的大部分，但似乎没有一个对我有用。这就是我想做的。

*   将所有请求重定向`http://abc.com/foobar`到`http://abc.com/`

*   除了`images`and , 所以像or`js`这样的请求`http://abc.com/images/foo/bar``http://abc.com/js/foo/bar`

*   URL 栏应该保持不变。因此，在`http://abc.com/foobar`加载`http://abc.com/`时，URL 应该像以前一样读取

*   端口应该保持不变，所以`http://abc.com:8080/foobar`应该重定向到`http://abc.com:8080`

这就是我`.htaccess`文件中的内容

```
Options -Indexes
RewriteEngine On
RewriteCond %{REQUEST_URI} !^/(images/.*|js/.*)$
RewriteRule ^(.*)$ - [L] 
```

条件运行良好，`images`文件`js`加载正常。我认为最后一行会将其他所有内容都重定向到基本域，但是当我测试它时我仍然收到 404 错误。

我不想使用这样的规则

```
RewriteRule ^(.*)$ http://abc.com/ [L] 
```

因为域在不同的部署中可能不同。

我想我只是对它的工作原理知之甚少，但我只是缺少一些小东西。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T19:18:41.250

这就是我最终使用的

```
RewriteEngine On
RewriteCond %{REQUEST_URI} !^(/*|/index.html)$
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^[^\.]+$ index.html [L] 
```

这并不完美，因为最后一条规则只查找其中没有点 (.) 的文件。所以它不适用于`http://abc.com/images/image.jpg`但将适用于`http://abc.com/images`.

我真的不明白为什么我必须这样做，但它确实有效。

# android - 如何使用 Linearlayout onClick 更改活动

> ID：13607301
> 
> 赞同：0
> 
> 时间：2012-11-28T14:24:22.030
> 
> 标签：android, onclick, android-linearlayout

我已将 Linearlayout 设置为可点击。当我运行程序并单击屏幕时，它显示错误并且无法进入活动 2。

有经验的人可以处理吗？

```
public class MainActivity extends Activity {

    @Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // code here
       LinearLayout linearlayout = (LinearLayout) findViewById(R.id.LinearLayout1);
       linearlayout.setOnClickListener(new LinearLayout.OnClickListener(){

        public void onClick (View v) {
            Intent intent = new Intent(v.getContext(), Activity2.class);
            startActivityForResult(intent, 0);          
        }
    });
 }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:40:06.527

您正在尝试使用视图上下文触发意图，您需要一个活动上下文。

尝试这个：

```
 Intent intent = new Intent(MainActivity.this, Activity2.class); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-28T14:41:22.657

为什么使用 startActivityForResult()？

如果您只想转到活动 2，请使用 startActivity()。

检查[https://developer.android.com/reference/android/app/Activity.html](https://developer.android.com/reference/android/app/Activity.html)了解更多信息。

# string - 构建包含用单引号括起来的变量值的bash字符串

> ID：13607308
> 
> 赞同：4
> 
> 时间：2012-11-28T14:24:31.443
> 
> 标签：string, bash, variables, quote

我正在做一个噩梦，应该是最微不足道的任务。

我的最终目标是从 bash 脚本发出以下命令：
`sqlite3 my_db.db '.read my_file.sql'`

这里有两个问题：
1\. 单引号是强制性的，不能用双引号代替
2.`my_file.sql`是一个仅在运行时才知道的变量。

所以我需要一种让 bash 构建一个字符串的方法，该字符串一方面包含一个变量值，另一方面该值应该用单引号括起来。

我也更喜欢不依赖其他工具（如 AWK、Perl 等）的解决方案。如果真的有必要，也许可以使用 sed。

谢谢。

* * *

感谢乔纳森和尼尔森。

我尝试了所有三个建议，但都失败了。
为简单起见，我将问题简化为以下内容：

1.  我编写了以下脚本（tst.sh）：
    `#!/bin/bash`
    `file=/tmp/1`
    `ls "'"$file"'"`
    `ls \'$file\'`
    `ls "'$file'"`

2.  然后我发出以下命令：
    `$ touch /tmp/1`
    `$ ls '/tmp/1'`
    `/tmp/1`
    `$ ./tst.sh`
    `'/tmp/1': No such file or directory`
    `'/tmp/1': No such file or directory`
    `'/tmp/1': No such file or directory`

似乎确实添加了引号，但生成的命令与手动输入的命令不同。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:13:21.867

单引号*不是*强制性的。以下所有命令都使用完全相同的参数运行 sqlite3：

```
sqlite3 my_db.db '.read my_file.sql'
sqlite3 my_db.db ".read my_file.sql"
sqlite3 my_db.db .read\ my_file.sql
sqlfile="my_file.sql"
sqlite3 my_db.db ".read $sqlfile" 
```

在所有情况下，引号 (/escape)在参数传递给 sqlite3 之前都会被解析*和删除。*这就是你想要的。您希望 sqlite3 获得两个参数：`my_db.db`和`.read my_file.sql`. 您*不*希望 sqlite3 看到命令周围的引号 - 这相当于：

```
$ sqlite3 my_db.db
SQLite version 3.7.7 2011-06-25 16:35:41
Enter ".help" for instructions
Enter SQL statements terminated with a ";"
sqlite> '.read my_file.sql'
   ...> 
```

...正如您所看到的，这只会让 sqlite3 感到困惑。

顺便说一句，这与您的 ls 示例中的问题相同：您将单引号作为参数的一部分传递给 ls，因此它正在查找名称中包含单引号的文件而没有找到它。您*希望*shell 删除引号，而不是将它们作为参数的一部分传递给命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T14:33:00.793

这将做你说你想做的事（为程序获取单引号），但它使用双引号：

```
sqlite3 my_db.db "'".read" "my_file.sql"'" 
```

避免双引号，你可以写：

```
sqlite3 my_db.db \'.read\ my_file.sql\' 
```

对于这两者，第二个参数将被视为`sqlite3`一个包含以下内容的字符串：

```
'.read my_file.sql' 
```

如果文件名在变量 ( `file=my_file.sql`) 中，则：

```
sqlite3 my_db.db "'".read" "$file"'"
sqlite3 my_db.db \'.read\ $file\' 
```

如果文件名包含空格，这些符号很容易混淆。

但是，我认为这可能不是您真正想要的。双引号的禁止令人费解，单引号的要求同样令人费解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T16:21:33.443

user1860085，如果您查看**sqlite3**命令的文档并且您会知道 shell 如何处理引号和空格，您可能会得出结论，您需要双引号。

但如果你真的想要单引号，这里是解决方案：

```
eval sqlite3 my_db.db \'.read $VARIABLE\' 
```

在飞行中将更改为：

```
sqlite3 my_db.db '.read my_file.sql' 
```

但我不明白你为什么想要它...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T14:28:28.833

您可以执行以下操作：

```
VAR=my_file.sql
VAR2="'.read $VAR'"
sqlite3 my_db.db $VAR2 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-11-28T16:17:06.430

好的，问题解决了！！

所缺少的只是在该行之前添加一个小“eval”命令。
因此，在我给出的简单示例脚本中，将：更改
`ls "'$file'"`为：
`eval ls "'$file'"`
完成了这项工作。

感谢所有回复者:-)

# dom - DOM4J Xpath 截断结果

> ID：13607311
> 
> 赞同：2
> 
> 时间：2012-11-28T14:24:36.040
> 
> 标签：dom, xpath, dom4j

我们正在维护一个严重依赖 DOM4J 和 Xpath 的应用程序。有时我们会看到通过 DOM4J 执行 XPath 的结果出现奇怪的行为：文本结果将被截断。

我们尝试应用此处提供的建议：http: [//www.mail-archive.com/dom4j-user@lists.sourceforge.net/msg02688.html](http://www.mail-archive.com/dom4j-user@lists.sourceforge.net/msg02688.html)

似乎问题发生的频率较低，但它仍然表现出来。上次我们得到它时，是在将 Xpath 应用到如上一个链接所示解析的文档的克隆上之后。

这似乎也类似于这里提到的问题：[Use of text() function when using xPath in dom4j](https://stackoverflow.com/questions/9914486/use-of-text-function-when-using-xpath-in-dom4j)

# java - 如何使工厂类可扩展？

> ID：13607312
> 
> 赞同：0
> 
> 时间：2012-11-28T14:24:38.010
> 
> 标签：java, design-patterns, factory-pattern

我正在设计一个使用工厂设计模式的简单应用程序。我正在关注->[这个](http://www.javabeat.net/2007/08/factory-pattern-design-patterns-in-javaj2ee/)<-示例。我想知道如何使工厂类可扩展？在给出的示例中，如果他想添加一个 Mac 按钮，则必须修改工厂类代码。我怎样才能做到这一点，这样就没有必要了？

有没有办法扩展工厂类的功能而不会覆盖其原始方法从而失去该功能？或者也许有一种方法可以使对象创建完全动态（使用重载方法？）以便工厂类不需要依赖条件语句？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:53:49.363

答案取决于工厂在做什么，但在提供的示例中，您可以这样做：

```
package tips.pattern.factory;
public class ButtonFactory {

    private final Map<String, Button> osToButton;

    public ButtonFactory(Map<String, Button> osToButton) {
        this.osToButton = osToButton;
    } 

    public Button createButton(String os){
        return this.osToButton.get(os);
    }
} 
```

# android - Android：使用新的 Facebook SDK v3.0.2.b 示例登录 Facebook 时出错

> ID：13607316
> 
> 赞同：1
> 
> 时间：2012-11-28T14:24:45.290
> 
> 标签：android, facebook, facebook-graph-api

当我使用新的 Facebook SDK v3.0.2.b 示例 HelloFacebookSample 时，我登录到 Facebook 但出现错误：

> 对于 Facebook 登录，HelloFBSample 配置错误。

但是我已经生成了哈希键并将其添加到 Facebook 开发者网站上的示例应用程序设置中。

有人有同样的缺陷吗？还是新SDK的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:01:14.047

有时，使用 Facebook Doc 给出的方法生成的 Key Hash 并不总是像宣传的那样工作。我遇到了这个问题，其他一些问题也是如此。

你可以做几件事来解决它。

**第一种方法**

按照本网站上的教程进行操作：[http ://www.helloandroid.com/tutorials/using-facebook-sdk-android-development-part-1](http://www.helloandroid.com/tutorials/using-facebook-sdk-android-development-part-1)

这有点耗时（我预计大约需要 5 分钟），但在我尝试时有效。

**第二种方法**（我个人喜欢这个）

1.  在 Facebook SDK 中找到`Util.java`并打开它。
2.  在前几行代码中，您应该看到以下代码：`private static boolean ENABLE_LOG = false;`.
3.  更改`false`为`true`并在您的 logcat (DDMD) 打开的情况下运行您的应用程序。
4.  您应该会看到如下所示的错误：

> 登录失败：invalid_key:Android 密钥不匹配。您的密钥“ ***** *real*key* ***** *** ”与您的应用程序设置中指定的允许密钥不匹配。

如果这是用于测试 APK，使用**debug.keystore**就足够了。但是，如果这是针对使用您的发布密钥签名的应用程序，请按照步骤进行直到第 3 步，但不要从 eclipse 推送应用程序，而是创建一个签名的 APK 并将其安装在您的设备上。不要忘记将其与运行的 DDMS 保持连接。

这部分在这里：“ ***** *real*key* ***** *** ”是您的**实际**密钥。

# ruby-on-rails - 设计：通过两种方式让用户登录

> ID：13607317
> 
> 赞同：2
> 
> 时间：2012-11-28T14:24:47.887
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, devise

我正在设计一个奇怪的东西。在这里，我有两种登录方式。

1) 默认设计使用**用户名和密码登录**。

2) 使用**用户名和密码登录**。

第二步的密码（password2）与第一步的密码（password1）不同。我想通过 **相同的界面****登录**，即会有一个登录页面，您需要输入电子邮件或用户名和相应的密码（分别为密码1或密码2）。

 **是否可以在设计中做同样的事情？

谢谢帕里托什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:23:16.140

[我在此处链接的 Devise wiki 讨论了](https://github.com/plataformatec/devise/wiki/How-To%3a-Allow-users-to-sign-in-using-their-username-or-email-address)允许多个用户标识符。

更新：但是，据我所知，出于某种原因，您需要两组单独的凭据（用户 ID/pw1 和电子邮件/pw2）。

我认为您的问题的答案是“虽然可以使用 Devise 来完成，但改变 Devise 比编写自己要付出更多的努力”。如果您查看链接，实际上需要做大量工作才能更简单地更改接受用户 ID*或*电子邮件以获取相同的密码。在实现您的要求时，它变得更加复杂。

除非您真的从头开始创建自己的系统，否则 Devise 或 Rails 的内置系统`has_secure_password`都会对保存密码的属性名称（即，它被称为 ）做出几个假设`password`。虽然假设有一个（单个）模型包含身份验证信息和此属性，但我认为您没有理由不能拥有*两个*模型，可能都属于`User`模型，每个模型都为用户使用的方法提供加密、存储和验证属性的基本功能，但所有其他功能都由父用户记录及其控制器和视图提供。用户模型中的一些简单逻辑确定正在使用哪种方法，并将该功能分配给适当的子模型。

所以是的，它可以完成，我建议`has_secure_password`在你不寻常的情况下会更简单。

但也许值得一问：如果我是第一个遇到这种情况的人，也许有一个替代方案可以满足我的要求，遵循一些现有的惯例或方法。例如，这是一个为几个不相关的服务提供身份验证的“单点登录”界面吗？如果是这样，那可能就是要搜索的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T15:55:04.347

[这](https://github.com/plataformatec/devise/wiki/How-To%3a-Allow-users-to-sign-in-using-their-username-or-email-address)是使用用户名和电子邮件登录的完整教程。您可以将用户名替换为 user_id 或您需要的任何内容。**

# javascript - kendoSplitter 中的窗格不尊重“box-sizing:border-box”属性

> ID：13607320
> 
> 赞同：0
> 
> 时间：2012-11-28T14:24:58.090
> 
> 标签：javascript, jquery, css, kendo-ui

我正在使用 kendoSplitter 创建带有 2 个窗格的页面布局。将第一个窗格大小设置为“100px”，将剩余空间设置为第二个窗格。

将窗格的填充设置为“5px”，并将框大小设置为“边框框”。
所以，预计pane1的宽度（包括填充）是“100px”
但是在页面加载时，它在100px的顶部应用了填充，使宽度为110px并导致滚动条。

```
$('#splitter').kendoSplitter({
    panes:[
    {collapsible:true,size:'100px'},
    {collapsible:true,resizable:true}
    ]
}); 
```

这种情况下的 jsFiddler：http:
[//jsfiddle.net/nagakiran/xmTJF/](http://jsfiddle.net/nagakiran/xmTJF/)

但是如果我在初始化 kendoSplitter 之后应用填充，它就像在这个提琴手中一样工作。 [http://jsfiddle.net/nagakiran/hpVWf/1/](http://jsfiddle.net/nagakiran/hPVWf/1/)

看起来这是 kendoUI 中的错误，还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:34:02.703

我不认为这是一个错误。也许是*未记录的功能*或*副作用*。这似乎是一个关于如何执行事物的顺序的问题。请记住，您的 HTML 是由 KendoUI 小部件“装饰”的，因此您定义`splitter1`的不仅仅是您的`div`东西，而是更多的东西（装饰）。

当您在调用后对其进行样式设置时，`kendoSplitter`您实际上是在重新装饰 KendoUI 装饰的结果。由于`kendoSplitter`将`width`窗格的 设置为固定宽度，因此填充不会增加额外空间。

但是当你使用 CSS 时，它会同时*运行*`kendoSplitter`，当它要求大小时，它会得到*错误*的大小。

KendoUI 应该更智能吗？也许吧，但实际上很难猜测 CSS 将要做什么并在 CSS 之前应用一个反动作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T09:42:26.683

通过在 kendoSplitter 中添加一个标志来修复它，该标志修改了将宽度分配给拆分器窗格的方式。如果设置了此标志，它将通过为该窗格指定的“padding-left+padding-right”减少分配给每个窗格的宽度。

之后找到了一个简单的解决方案，即在每个拆分器窗格中创建包装 div 并设置“box-sizing:border-box”和“padding:10px”，这没有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T14:53:20.907

剑道有问题`box-sizing: borderbox`。[这篇文章](http://feedback.kendoui.com/forums/127393-kendo-ui-feedback/suggestions/3694827-fix-box-sizing-for-kendo-controls-if-set-in-base-c)可能会有所帮助。

# google-app-engine - 谷歌应用引擎、谷歌应用和自定义域

> ID：13607321
> 
> 赞同：0
> 
> 时间：2012-11-28T14:24:59.150
> 
> 标签：google-app-engine, dns

如果您有一个谷歌应用程序引擎应用程序，您希望在某个域上拥有此应用程序，您可以控制该域，但如果该域已用于电子邮件（不在 Google 企业应用程序上），这是否意味着您必须将您的电子邮件切换到 Google Business Apps 以便为您的 Google App Engine 应用程序提供此域？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:26:45.340

据我所知，您必须将域添加到谷歌应用程序，但您不必使用谷歌邮件。

# c - 添加printf改变sendTo结果从失败到成功

> ID：13607332
> 
> 赞同：5
> 
> 时间：2012-11-28T14:25:33.937
> 
> 标签：c, sockets, network-programming

我知道这听起来很奇怪。printf 不应该改变任何东西，但没有它 sendTo 失败。 **该程序是从 c 代码中复制出来的，并由 cpp 编译器在 ubuntux86 上编译。** 我有一个发送 arp 请求的程序。没有这个 printf，sendTo 就失败了。奇怪的是，我做了一个根本不在 printf 变量中使用的最小程序（仅在 printf 中）并且使用 printf 它可以工作，而没有 printf 它不起作用（在 sendTo 上出现无效参数错误）。

附件是仅用于显示问题的最小版本：

此发送失败：

```
int retVal = sendto(arp_fd, &pkt, sizeof(pkt), 0, (struct sockaddr *) &sa,sizeof(sa));
if (retVal < 0) {
    perror("sendto");
    close(arp_fd);
    exit(1);
} 
```

添加时它起作用：

```
struct ifreq ifr;//There is no use except in the printf
printf("MAC address: is %02x:%02x:%02x:%02x:%02x:%02x \n",
        ifr.ifr_hwaddr.sa_data[0]&0xFF,
        ifr.ifr_hwaddr.sa_data[1]&0xFF,
        ifr.ifr_hwaddr.sa_data[2]&0xFF,
        ifr.ifr_hwaddr.sa_data[3]&0xFF,
        ifr.ifr_hwaddr.sa_data[5]&0xFF,
        ifr.ifr_hwaddr.sa_data[4]&0xFF); 
```

完整的程序：

```
#include "sys/socket.h"
#include "sys/types.h"
#include "stdio.h"
#include "unistd.h"
#include "string.h"
#include "net/if.h"
#include "stdlib.h"
#include "arpa/inet.h"
#include "netinet/in.h"
#include "sys/ioctl.h"
#include "netpacket/packet.h"
#include "net/ethernet.h"

#define ETHER_TYPE_FOR_ARP 0x0806
#define HW_TYPE_FOR_ETHER 0x0001
#define OP_CODE_FOR_ARP_REQ 0x0001
#define HW_LEN_FOR_ETHER 0x06
#define HW_LEN_FOR_IP 0x04
#define PROTO_TYPE_FOR_IP 0x0800

typedef unsigned char byte1;
typedef unsigned short int byte2;
typedef unsigned long int byte4;

// For Proper memory allocation in the structure
#pragma pack(1)
typedef struct arp_packet {
// ETH Header
    byte1 dest_mac[6];
    byte1 src_mac[6];
    byte2 ether_type;
// ARP Header
    byte2 hw_type;
    byte2 proto_type;
    byte1 hw_size;
    byte1 proto_size;
    byte2 arp_opcode;
    byte1 sender_mac[6];
    byte4 sender_ip;
    byte1 target_mac[6];
    byte4 target_ip;
// Paddign
    char padding[18];
} ARP_PKT;

int main() {
    struct sockaddr_ll sa;

// Ethernet Header
    ARP_PKT pkt;
    memset(pkt.dest_mac, 0xFF, (6 * sizeof(byte1)));
    memset(pkt.src_mac, 0x1, (6 * sizeof(byte1)));
    pkt.ether_type = htons(ETHER_TYPE_FOR_ARP);
// ARP Header
    pkt.hw_type = htons(HW_TYPE_FOR_ETHER);
    pkt.proto_type = htons(PROTO_TYPE_FOR_IP);
    pkt.hw_size = HW_LEN_FOR_ETHER;
    pkt.proto_size = HW_LEN_FOR_IP;
    pkt.arp_opcode = htons(OP_CODE_FOR_ARP_REQ);
    memcpy(pkt.sender_mac, pkt.src_mac, (6 * sizeof(byte1)));
    pkt.sender_ip = 2449647808;
    memset(pkt.target_mac, 0, (6 * sizeof(byte1)));
    pkt.target_ip = inet_addr("10.0.0.10");
// Padding
    memset(pkt.padding, 0, 18 * sizeof(byte1));

    sa.sll_family = AF_PACKET;
    sa.sll_ifindex = 3;
    sa.sll_protocol = htons(ETH_P_ARP);

    /* Send it! */
    int arp_fd = socket(PF_PACKET, SOCK_RAW, htons(ETH_P_ARP));
    struct ifreq ifr;
    printf("MAC address: is %02x:%02x:%02x:%02x:%02x:%02x \n",
            ifr.ifr_hwaddr.sa_data[0]&0xFF,
            ifr.ifr_hwaddr.sa_data[1]&0xFF,
            ifr.ifr_hwaddr.sa_data[2]&0xFF,
            ifr.ifr_hwaddr.sa_data[3]&0xFF,
            ifr.ifr_hwaddr.sa_data[5]&0xFF,
            ifr.ifr_hwaddr.sa_data[4]&0xFF);
    int retVal = sendto(arp_fd, &pkt, sizeof(pkt), 0, (struct sockaddr *) &sa,sizeof(sa));
    if (retVal < 0) {
        perror("sendto");
        close(arp_fd);
        exit(1);
    }

    printf("\n=========PACKET=========\n");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T15:35:34.360

这是因为您在`struct sockaddr_ll sa`. 更具体地说，您对 printf 的调用会强制编译器在堆栈上保存三个寄存器，从而移动`sa`位置及其值。你可以`printf("halen %p %d\n", &sa.sll_halen, sa.sll_halen);` *在*你之前`printf`看到它的变化，这取决于你是否添加你的`printf`。

只需添加`sa.sll_halen = 0;`即可查看差异……并为您的实际程序初始化整个结构。

# .net - 在 App.config 中存储 MySQL 连接字符串时，providerName 属性应该设置为什么值？

> ID：13607334
> 
> 赞同：10
> 
> 时间：2012-11-28T14:25:37.683
> 
> 标签：.net, mysql, app-config

在 App.config 中存储 MySQL 连接字符串时，providerName 属性应该设置为什么值？

例如，在下面的 App.config 文件中，providerName 应该使用什么值？有关系吗？

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <connectionStrings>
    <add name="MySQL" connectionString="SERVER=8.8.8.8; DATABASE=foo; UID=bar; PASSWORD=foobar" providerName="WhatGoesHere?" />
  </connectionStrings>
</configuration> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-28T14:29:49.930

试试这个：

```
<connectionStrings>
<add name="MySQL" connectionString="SERVER=8.8.8.8; DATABASE=foo; UID=bar; PASSWORD=foobar" providerName="MySql.Data.MySqlClient" />
</connectionStrings> 
```

# asp.net - 使用 DbCommand 是在 ASP.NET 3.5 中查询数据库的最现代方式吗？

> ID：13607335
> 
> 赞同：1
> 
> 时间：2012-11-28T14:25:42.063
> 
> 标签：asp.net, oracle, ado.net

最近我开始关注一个基于 ASP.NET 3.5 的预先存在的项目。

现在，我不得不说，到目前为止，我有点避免使用旧的 ASP.NET（我爱上了 MVC 的简洁风格），这也是我第一次在没有 EF 和 SQL Server 的情况下工作。

我必须对 OracleDB 进行查询，并且在项目的其他部分执行此操作的方式与此类似：

```
private DbDataReader InjectQuery(string query)
{
    DbCommand command = connection.CreateCommand();
    command.CommandText = query;
    command.CommandTimeout = 0;
    return command.ExecuteReader();
} 
```

这是执行查询的最佳方式吗？我应该使用不同的方法吗？

PS 我很不确定这个问题是否更适合[Code Review](https://codereview.stackexchange.com/)。在我看来，这似乎是关于技术而不是修订的直接问题，所以我选择了 Stack Overflow。如果我错了，请为我指出。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:33:59.303

这是一种非常古老的方式，但仍然很摇滚。如果您使用的是 EF，则无需像这样查询，EF 具有查询数据的新方法，而且它肯定是现代的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T14:29:18.113

是的，如果您不想使用 EF、NHibernate 等数据访问框架，这仍然是最佳实践。

# java - 什么是 Web 应用程序中的 ContextLoaderListener 和 Servlet 上下文？

> ID：13607336
> 
> 赞同：1
> 
> 时间：2012-11-28T14:25:41.663
> 
> 标签：java, spring, model-view-controller, web

任何人都可以参考下面提到的来自 spring-reference 的声明来解释这一点。

> 如果您不想使用 Spring 的 Web MVC，但打算利用 Spring 提供的其他解决方案，您可以轻松地将您选择的 Web MVC 框架与 Spring 集成。只需通过其 ContextLoaderListener 启动 Spring 根应用程序上下文，并通过 Struts 或 WebWork 操作中的 ServletContext 属性（或 Spring 各自的辅助方法）访问它。不涉及“插件”，因此不需要专门的集成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:20:39.200

这意味着如果您不想使用 Spring MVC，请使用[ContextLoaderListener](http://static.springsource.org/spring/docs/3.1.3.RELEASE/javadoc-api/org/springframework/web/context/ContextLoaderListener.html)在 ServletContext 中引导 WebApplicationContext。像这样的东西：

```
<!-- Bootstrap the root application context as usual using ContextLoaderListener -->
  <listener>
      <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
  </listener> 
```

然后使用[WebApplicationContextUtils](http://static.springsource.org/spring/docs/3.1.3.RELEASE/javadoc-api/org/springframework/web/context/support/WebApplicationContextUtils.html)方法[getRequiredWebApplicationContext(ServletContext sc)](http://static.springsource.org/spring/docs/3.1.3.RELEASE/javadoc-api/org/springframework/web/context/support/WebApplicationContextUtils.html#getRequiredWebApplicationContext%28javax.servlet.ServletContext%29)（或其他许多方法）来获取 WebApplicationContext 并访问您的 Spring Bean。

您可以在应用程序的任何部分执行此操作（只要您可以获得 ServletContext）。这意味着您不必将 Spring 集成到其他技术。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-05T10:27:18.577

servlet 上下文是 Web 应用程序目录的根目录。其他一切都相对于它给出参考。上下文加载侦听器是加载spring上下文的第二种方式，首先是使用调度程序servlet。

**Application Context是由 web.xml 中定义的****ContextLoaderListener**或**ContextLoaderServlet** (dispatcher-servlet)初始化的容器

# java - 用于选择多个值的休眠查询

> ID：13607337
> 
> 赞同：24
> 
> 时间：2012-11-28T14:25:42.830
> 
> 标签：java, hibernate, hql

在休眠状态下，我可以执行以下操作

```
Query q = session.createQuery("from Employee as e);
List<Employee> emps = q.list(); 
```

现在，如果我想获取 int 和 String 我该怎么做？

```
Query q = session.createQuery(""SELECT E.firstName,E.ID FROM Employee E";
List ans = q.list(); 
```

现在列表的结构是什么？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-11-28T14:32:12.823

这可以。您唯一需要了解的是，它将返回`Object []`如下列表：

```
 Query q = session.createQuery("select e.id, e.firstName from Employee e");
     List<Object[]> employees= (List<Object[]>)q.list();
     for(Object[] employee: employees){
         Integer id = (Integer)employee[0];
         String firstName = (String)employee[1];
         .....
     } 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-28T14:31:00.607

您将获得`Object`s 数组的列表（每个数组有两个元素）

```
List< Object[] > employees = q.list();

for ( Object[] employee : employees ) {
    // employee[0] will contain the first name
    // employee[1] will contail the ID
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-26T07:28:26.163

```
Query qry=session.createQuery("select e.employeeId,e.employeeName from Employee e where e.deptNumber=:p1");
qry.setParameter("p1",30);
List l2=qry.list();
Iterator itr=l2.iterator();
while(itr.hasNext()){
Object a[]=(Object[])itr.next();
System.out.println(a[0]+"/t"a[1]);
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-28T14:30:53.817

您应该使用一个新对象来保存这些值，就像这样：

```
"SELECT NEW EmpMenu(e.name, e.department.name) "
                + "FROM Project p JOIN p.students e " + "WHERE p.name = :project "
                + "ORDER BY e.name").setParameter("project", projectName).getResultList() 
```

我从[http://www.java2s.com/Tutorial/Java/0355__JPA/EJBQLCreatenewObjectInSelectStatement.htm得到了这个例子](http://www.java2s.com/Tutorial/Java/0355__JPA/EJBQLCreatenewObjectInSelectStatement.htm)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-28T14:30:58.797

```
List<Object[]> is the structure. 
```

所以你得到这样的每个元素：

```
List ans = q.list();
for(Object[] array : ans) {
    String firstName = (String) array[0];
    Integer id = (Integer) array[1];
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-08-25T09:42:00.347

没有迭代器：

```
@SuppressWarnings( "unchecked" ) 
public List<Employee> findByDepartment(long departmentId){ 

    SQLQuery query = session.createSQLQuery("SELECT {emp.*} " +
                                             " FROM employee emp " + 
                                            +"WHERE emp.department_id = :departement_id");
    query.setLong("department_id",  departmentId);
    query.addEntity("emp",  Employee.class);                        
    return (List<Employee>) = query.list();
} 
```

# javascript - 如果用户使用后退按钮访问它，我可以防止触发 javascript 重定向吗？

> ID：13607339
> 
> 赞同：1
> 
> 时间：2012-11-28T14:25:53.097
> 
> 标签：javascript, back-button

我有一个脚本可以在 X 秒后将用户重定向到新页面。被重定向后，如果用户点击后退按钮并使用此脚本返回页面，我希望脚本不再触发。

```
setTimeout(function() {
  window.location.href = "/mypage.html";
}, 3000); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:29:33.533

您可以像这样在 JavaScript 中获取 referrer 属性：

```
var referrer_url = document.referrer;
document.write("You come from this url: " +referrer_url); 
```

然后，只需使用条件检查来包装您`setTimeout()`的内容，以查看该人来自哪个 URL，并根据他们的来源进行（或不）进行重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T14:27:47.257

我使用 Cerbrus 提供的链接并通过 cookie 路由解决了这个问题。比我希望的要复杂，但它完成了工作。

此脚本将在 3 秒后将用户重定向到新页面。它将首先检查 cookie 是否存在，如果存在则不会重定向。如果没有 cookie，它将创建一个 cookie，然后重定向用户。如果用户点击后退按钮，脚本将找到创建的 cookie，并阻止脚本再次重定向用户。

```
// Function to create a new cookie
function createCookie(name,value,days) {
    if (days) {
        var date = new Date();
        date.setTime(date.getTime()+(days*24*60*60*1000));
        var expires = "; expires="+date.toGMTString();
    }
    else var expires = "";
    document.cookie = name+"="+value+expires+"; path=/";
}

// Function to read a cookie
function readCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
}

// Use the readCookie function to assign the cookie to a variable (if it's available)
var currentcookie = readCookie('mycookie');

// If/else statement to fire javascript if the cookie is not present
if (currentcookie) {
    // do nothing since the cookie exists
}
else {
    // Cookie doesn't exist, so lets do our redirect and create the cookie to prevent future redirects

    // Create a cookie
    createCookie('mycookie','true');

            // Perform the redirect after 3 seconds
    setTimeout(function() {
      window.location.href = "/mypage.html";
    }, 3000);
} 
```

# java - 如何填充jsp下拉？

> ID：13607341
> 
> 赞同：0
> 
> 时间：2012-11-28T14:26:09.900
> 
> 标签：java, jsp

我正在尝试填充一个下拉列表。我有一个哈希图，从中我得到了键和值。我有一个 bean，我从中得到一个字符串值。现在我想像这样填充下拉列表：

如果 bean 值等于 hashmap 键，那么我必须在下拉列表中将键和值设为“已选择”，否则，字符串“plz select a value”必须成为默认下拉选择元素，其他键值对必须追上它。如果 bean 值等于 hashmap 键，那么它们不能再重复。

这是我到目前为止所拥有的：

```
<%
String defaultText = "Please select a value";
while (iterator.hasNext()) {
Map.Entry mapEntry = (Map.Entry) i.next();
// getKey Method of HashMap access a key of map
String keyValue = (String) mapEntry.getKey();
//getValue method returns corresponding key's value
String value = (String) mapEntry.getValue();

%>

<option  selected="selected" value="none">
<%
if( beanNo!=null && beanNo.equals(keyValue))
{
%>
<%= beanNo %> , <%= value %>
<%
}
else
{
%>
<%= defaultText %>
<%
}
%>
</option>
<option  value="">
<%= value %> , <%= keyValue %>
</option>
<%
}
%> 
```

但是，这并没有给我想要的结果。如果 bean 值等于 hashMap keyValue，那么相同的值会出现两次，而 defaultText 根本不会出现。

我哪里错了？请帮忙？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T15:00:29.023

这应该会更好：

```
<%
    String defaultText = "Please select a value";
%>
<option value="none"><%= defaultText %></option>
<%
    while (iterator.hasNext())
    {
        Map.Entry mapEntry = (Map.Entry) i.next();
        // getKey Method of HashMap access a key of map
        String keyValue = (String) mapEntry.getKey();
        //getValue method returns corresponding key's value
        String value = (String) mapEntry.getValue();
%>
<option <%= (beanNo!=null && beanNo.equals(keyValue)) ? "selected=\"selected\"" : "" %> value="<%= value %>">
<%= keyValue %>
</option>
<%
    }
%> 
```

注意：它尚未经过语法测试或验证，可能存在一些小错误。

# objective-c - NSDictionary 不区分大小写的 objectForKey：

> ID：13607343
> 
> 赞同：9
> 
> 时间：2012-11-28T14:26:15.170
> 
> 标签：objective-c, ios, nsdictionary, key-value, case-insensitive

NSDictionary 有 objectForKey 但它对键是区分大小写的。没有***可用***的功能，如

```
- (id)objectForKey:(id)aKey options:(id) options; 
```

在选项中您可以传递“NSCaseInsensitiveSearch”的位置

要从不区分大小写的 NSDictionary 获取密钥，可以使用下面编写的以下代码。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-28T14:39:15.803

您需要使用此功能添加 NSDictionary 类的类别

```
- (id)objectForCaseInsensitiveKey:(NSString *)key {
    NSArray *allKeys = [self allKeys];
    for (NSString *str in allKeys) {
        if ([key caseInsensitiveCompare:str] == NSOrderedSame) {
            return [self objectForKey:str];
        }
    }
    return nil;
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-28T18:18:54.177

这不包括在内有几个原因：

1.  NSDictionary 使用哈希相等，并且对于几乎任何好的哈希算法，源字符串的任何变化都会导致不同的哈希。

2.  更重要的是，**NSDictionary 键不是字符串**。任何符合 NSCopying 的对象都可以是一个字典键，它包含的内容远不止字符串。NSNumber 与 NSBezierPath 的不区分大小写比较会是什么样子？

这里的许多答案都提供了相当于将字典转换为数组并对其进行迭代的解决方案。那行得通，如果您只需要一次性使用它，那很好。但是该解决方案有点丑陋并且具有不良的性能特征。如果这是我非常需要的东西（例如，足以创建一个 NSDictionary 类别），我想在数据结构级别正确解决它。

您想要的是一个包装 NSDictionary 的类，只允许字符串作为键并在给定键时自动小写键（如果您需要双向映射，还可能记住原始键）。这将是相当简单的实现，并且是一个更清洁的设计。对于一次性来说它太重了，但如果这是你经常做的事情，我认为值得干净地做。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-09-22T12:35:54.917

正确的答案是您应该使用大小写折叠键作为字典键。 **这与将它们转换为大写或小写不同**，它不会破坏 O(1) 平均大小写搜索/插入复杂度。

不幸的是，Cocoa 似乎没有合适的`NSString`方法来对字符串进行大小写折叠，但 Core Foundation 提供`CFStringFold()`了可以用于此目的的方法。让我们编写一个简短的函数来完成必要的工作：

```
NSString *foldedString(NSString *s, NSLocale *locale)
{
  CFMutableStringRef ret = CFStringCreateMutableCopy(kCFAllocatorDefault, 0,
                                                     (__bridge CFStringRef)s);
  CFStringNormalize(ret, kCFStringNormalizationFormD);
  CFStringFold(ret, kCFCompareCaseInsensitive, (__bridge CFLocaleRef)locale);
  return (__bridge_transfer NSString *)ret;
} 
```

**请注意**，*语言环境*参数很重要。如果您指定`NULL`，您将获得当前系统区域设置。在大多数情况下这会很好，但土耳其用户可能会对“I”匹配“i”而不是“ı”感到惊讶。因此，您*可能*想要传递`[NSLocale currentLocale]`，并且如果您要保存结果，您*可能*还希望保存语言环境标识符并从中创建语言环境。

所以，当添加到字典时，你现在需要做

```
[dict setObject:obj forKey:foldedString(myKey, locale)]; 
```

并再次抬头

```
[dict objectForKey:foldedString(myKey, locale)]; 
```

最后一个观察结果是，您可能希望将大小写折叠的键与原始值一起存储，然后您不必在每次访问字典时都折叠它们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T14:26:15.170

在下面编写的代码中，我搜索输入键的实际键。所以，如果输入 key=@"naMe" 那么实际的 key=@"name"。

```
NSDictionary *dic=[NSDictionary dictionaryWithObjectsAndKeys:@"John",@"Name",@"123456",@"empId", nil];

NSString *key=@"naMe";
NSString *name=[dic objectForKey:key];

if(name==nil){
    NSPredicate *searchPred=[NSPredicate predicateWithFormat:@"self LIKE[cd] %@",key];
    NSArray *searchedKeys=[[dic allKeys] filteredArrayUsingPredicate:searchPred];

    if(searchedKeys.count>0){
        name=[dic objectForKey:[searchedKeys objectAtIndex:0]];

    }
}

NSLog(@"Name = %@",name); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T14:47:04.393

许多答案是正确的，但这里有一个更多的例子：

```
 NSDictionary* dict= @{ @"hello" : @"Hey" };
    NSArray* keys= [dict allKeys];
    NSUInteger index=[keys indexOfObjectPassingTest:  ^BOOL (id obj, NSUInteger index, BOOL* stop)
     {
         if( [obj caseInsensitiveCompare: @"Hello"]==NSOrderedSame)
         {
             *stop= YES;
             return YES;
         }
         else
         {
             return NO;
         }
     }]; 
```

我个人觉得这种方法更简单，但每个人都有自己的编程风格。

**编辑**

一个可读性较差但较短的解决方案：

```
 NSDictionary* dict= @{ @"hello" : @"Hey" };
    NSArray* keys= [dict allKeys];
    NSUInteger index=[keys indexOfObjectPassingTest:  ^BOOL (id obj, NSUInteger index, BOOL* stop)
     {
         return *stop= [obj caseInsensitiveCompare: @"Hello"]==NSOrderedSame ;

     }]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-05T16:26:02.090

如果您只在一个地方（可能是两个或三个）存储和检索 NSDictionary，您可以使用

> [myString 小写字符串]

同时。如果在整个代码中都使用字典对象，则更严格的答案会很有用。

# android - 如何使 Web 应用程序在所有移动设备上正常打开？

> ID：13607346
> 
> 赞同：2
> 
> 时间：2012-11-28T14:26:21.617
> 
> 标签：android, jquery, ios, web-applications, orientation

我正在开发一个移动网络应用程序。纵向模式下的应用程序必须具有与横向模式不同的外观。这就是我编写以下代码的原因：

```
function orientation(){
    if (window.innerHeight > window.innerWidth) {
        $('.ui-page').removeClass("pageL").addClass("pageP");
        $(window).resize();
        $('meta[name="viewport"]').attr('content', 'height=device-height,width=400,user-scalable=no')
        $(window).resize();
        alert('portrait');
    } else {
        $('.ui-page').removeClass("pageP").addClass("pageL");
        $('meta[name="viewport"]').attr('content', 'initial-scale=1, maximum-scale=1');
        $(window).resize();         
        $('meta[name="viewport"]').attr('content', 'height=device-height,width=960,user-scalable=no');
        $(window).resize();
        alert('landscape');
    };
};  

var supportsOrientationChange = "onorientationchange" in window,
orientationEvent = supportsOrientationChange ? "orientationchange" : "resize";

window.addEventListener(orientationEvent, function() {
    orientation();
}, false); 
```

在我的 Android 平板电脑上，一切都在 chrome 中运行，但在 iPad 和我的 Android 上的默认浏览器上却没有。在默认的 Android 浏览器中，问题是当我以纵向加载页面并将平板电脑旋转 90 度时，它再次执行该功能，但仍然说他是纵向的。在 iPad 上一切正常，但当我将其变为横向时不会再次缩小。iPad上的问题可能与iPad上禁用的调整大小功能有关，但我无法解决。

我使用 innerHeight & Width 因为一些 Android 设备将横向视为 0 度，而将纵向视为 0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T09:24:34.673

在stackoverflow上浏览了很多之后，我设法制作了这段代码：

```
function orientation() {
  var content_width, screen_dimension;

  if (window.innerHeight > window.innerWidth) {
    // portrait
    $('.ui-page').removeClass("pageL").addClass("pageP");
    content_width = 400;        
    if(screen.width < screen.height){screen_dimension = screen.width * 0.9}
    else{screen_dimension = screen.height * 0.9}
  } else{
    // landscape
    $('.ui-page').removeClass("pageP").addClass("pageL");
    content_width = 960;
    if(screen.width > screen.height){screen_dimension = screen.width}
    else{screen_dimension = screen.height}
  }

  var viewport_scale = screen_dimension / content_width;

  // resize viewport
  $('meta[name=viewport]').attr('content',
    'height=device-height, width=' + content_width + ',' +
    'minimum-scale=' + viewport_scale + ', maximum-scale=' + viewport_scale);
}

var supportsOrientationChange = "orientationchange" in window,
orientationEvent = supportsOrientationChange ? "orientationchange" : "resize";

window.addEventListener(orientationEvent, function() {
    orientation()
}, false);

$(document).bind("pageinit",function(){
    orientation()
}).trigger('pageinit'); 
```

这次几乎所有东西都可以在我测试过的每个浏览器（Android 和 iOS）上运行。剩下的唯一问题是在 iOS 上。当您单击输入字段时，方向会神奇地改变。

# java - 如何将纽约时区转换为亚洲时区

> ID：13607347
> 
> 赞同：0
> 
> 时间：2012-11-28T14:26:22.600
> 
> 标签：java, android, date

如何将纽约时区时间转换为“亚洲/加尔各答”日期和时间？

我的输入字符串：

```
11/28/2012 8:59am 
```

我的代码：

```
String dtStart = "11/28/2012 8:59am";  
        SimpleDateFormat  format = new SimpleDateFormat("mm/dd/yyyy hh:mma");  
        format.setTimeZone(TimeZone.getTimeZone("America/New_York"));
        try {  
            Date date = format.parse(dtStart); 
            Log.i("clock", date.toString());
            System.out.println(date);

            Calendar cal = Calendar.getInstance();
            cal.setTimeInMillis(date.getTime());
            cal.setTimeZone(TimeZone.getTimeZone("Asia/Kolkata"));
            int chour = cal.get(Calendar.HOUR_OF_DAY);
            int cminute = cal.get(Calendar.MINUTE);
            int dd = cal.get(Calendar.DAY_OF_MONTH);
            int mm =cal.get(Calendar.MONTH);
            int yy =cal.get(Calendar.YEAR);

            String mode="AM";

            if(chour>12)
            {
                chour=chour-12;
                mode="PM";
            }

            String mytime=Integer.toString(chour)+":"+Integer.toString(cminute)+" "+mode;
            String mydate=Integer.toString(dd)+"/"+Integer.toString(mm)+"/"+Integer.toString(yy);

            Log.i("clock", mytime);
            Log.i("clock", mydate);

        } catch (ParseException e) {  
            e.printStackTrace();  
        } catch (java.text.ParseException e) {
            e.printStackTrace();
        } 
```

**我的输出日志：**

```
Sat Jan 28 19:29:00 GMT+05:30 2012
7:29 PM
28/0/2012 
```

这里我的时间是正确的，但日期是错误的。我预计 2012 年 11 月 28 日。我无法追踪我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T15:09:49.190

问题在于您输入的格式：`"mm/dd/yyyy hh:mma"`. 我相信你想这样做：`"MM/dd/yyyy hh:mma"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-08T17:44:43.043

```
SimpleDateFormat formatter = new SimpleDateFormat("MM/DD/YYYY hh:mm:ss a");
String dtStart = "11/28/2012 08:59 am";
Date dateObj = formatter.parse(dtStart); 
cal.setTime(dateObj);
fromTZObj = TimeZone.getTimeZone("America/New_York");
toTZObj = TimeZone.getTimeZone("Asia/Kolkata");
Calendar fromCal = new GregorianCalendar(fromTZObj);
fromCal.set(cal.get(1), cal.get(2), cal.get(5), cal.get(11), cal.get(12), 
cal.get(13));
Calendar toCal = new GregorianCalendar(toTZObj);
toCal.setTimeInMillis(fromCal.getTimeInMillis());
Date dd = toCal.getTime();
formatter.setTimeZone(toTZObj);
String formattedDate = format.format(dd);
System.out.println(formattedDate); 
```

# ios - UIInterfaceOrientation info.plist

> ID：13607354
> 
> 赞同：1
> 
> 时间：2012-11-28T14:26:33.313
> 
> 标签：ios, air

我正在开发一个使用 Adob​​e Air 打包的 iOS 应用程序。我正在尝试将 InterfaceOrientation 设置为 info.plist。

因此将 UIInterfaceOrienation 添加到我的 app.xml 中，但是当我尝试创建 iOS 包时，它给了我“application.iPhone.InfoAdditions 包含无效值”错误。

这就是 app.xml 的样子

```
<iPhone>
    <InfoAdditions>
        <![CDATA[
                          ...... other values

                           <key>UIInterfaceOrientation</key>
                           <string>UIInterfaceOrientationLandscapeRight</string>

                ]]>
         </InfoAdditions> 
```

不太确定我在这里缺少什么。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:32:22.887

我认为您无法通过航空包装机做到这一点。

最接近你能得到恕我直言的是这个

肖像假

您建议的解决方案将适用于本机开发，但（尚未）使用空气包装器。

我认为您将能够通过以下代码对其进行更改： stage.setOrientation( StageOrientation.ROTATED_LEFT );

来源： http: [//polygeek.com/4301_air-mobile_playing-with-stage-orientation-in-mobile-air-apps](http://polygeek.com/4301_air-mobile_playing-with-stage-orientation-in-mobile-air-apps)

# c# - Box API 返回错误: : 远程服务器返回错误: (401) Unauthorized

> ID：13607356
> 
> 赞同：0
> 
> 时间：2012-11-28T14:26:34.983
> 
> 标签：c#, box-api

我在尝试访问用户内容时使用我的 api 密钥 den 获得了身份验证令牌我收到此错误

```
The remote server returned an error: (401) Unauthorized. 
```

这是我的 C# 代码

```
string url = "https://www.box.com/api/2.0/folders/0 \\ -H "Authorization: BoxAuth api_key=API_KEY&auth_token=AUTH_TOKEN";

            HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);

            HttpWebResponse response = (HttpWebResponse)request.GetResponse(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:29:59.670

这`-H "Authorization: BoxAuth api_key=API_KEY&auth_token=AUTH_TOKEN"`是示例 cURL 命令的参数，而不是 API URL 的一部分。它表示一个 HTTP 标头。您需要将该标题添加到您的`request`对象中。

尝试这个：

```
string url = "https://www.box.com/api/2.0/folders/0";
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
request.Headers.Add("Authorization", "BoxAuth api_key=API_KEY&auth_token=AUTH_TOKEN"); 
```

或者，您可以尝试使用[Box C# SDK](https://github.com/jhoerr/box-csharp-sdk-v2)，它会为您解决所有这些问题。

# php - PHP对多维数组进行排序，其值形成不同的数组

> ID：13607357
> 
> 赞同：1
> 
> 时间：2012-11-28T14:26:39.553
> 
> 标签：php, arrays, multidimensional-array

我有如下数据，

```
Bale # | Factory # | Design | Color    | Price   |
----------------------------------------------------------------
1      | PDX-1     | D1     | RED      | 10      |
1      | PDX-10    | D2     | BLUE     | 200     |
1      | PDX-2     | D3     | PINK     | Some int|
1      | PDX-3     | D1     | WHITE    | Some int|
2      | PDX-4     | D3     | APPLE    | Some int|
2      | PXX-56    | D3     | PINE     | Some int|
2      | XXX-1     | D1     | SILVER   | Some int|
1      | XXX-4     | D5     | BROWN    | Some int|
1      | DFX-1     | D5     | COFFEE   | Some int|
3      | ABC-1     | D6     | PURPLE   | Some int|
1      | ABC-2     | D6     | GOLD     | Some int| 
```

这是在多维数组中。我将 Bale# 放在键中，并将其他值放在子数组中的位置。

```
forloop (...)
      (.....)
    $sorted_by_bale[$BALE_NO][] = array(
        'jnb' => $factory_number,
        'design_name' => $order_design,
        'colorway' => $order_colorway,
        'usd_rate' => $price,
    );
} 
```

我需要按捆对值进行排序，然后告诉一捆的总价格和一捆中的物品数量。

```
ksort($sorted_by_bale); 
```

Ksort 达到了目的。

现在我需要按设计（第一个）排序，然后是颜色（第二个）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:32:52.477

您应该使用`usort`（参见[文档](http://ca2.php.net/manual/en/function.usort.php)）。这允许您使用自己的排序功能。

一个缺点是数组键被重置。但这对您的辅助阵列似乎无关紧要。

```
function sortBale($first, $second)
{
  if($first['design_name'] > $second['design_name']) {
    return 1;
  } elseif( $first['design_name'] < $second['design_name'] ) {
    return -1;
  } else {
    //they have the same design
    if($first['colorway'] > $second['colorway']) {
      return 1;
    } elseif( $first['colorway'] < $second['colorway'] ) {
      return -1;
    } else {
      return 0;
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T14:33:03.507

您需要我们使用自定义排序功能进行排序：

```
 //once your bale array is setup

 usort($sorted_by_bale, "compare_in_bale");

 function compare_in_bale($a, $b)
  {
    if ($a['design_name'] == $b['design_name']) {
      if ($a['colorway'] == $b['colorway']) {
            //identical
           return 0;
      }
      return ($a['colorway']  < $b['colorway'])) ? -1 : 1;
  }
  return ($a['design_name']  < $b['design_name'])) ? -1 : 1;
 } 
```

请注意，您可能需要一个更好的比较运算符，`==`但这应该让您足够接近。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T14:45:32.673

我可能会错过你的观点，但试试这个：

```
<?php
$data = array(
    array(
        'bale' => 2,
        'design' => 'D1',
        'color' => 'RED'
    ),
    array(
        'bale' => 2,
        'design' => 'D1',
        'color' => 'BLUE'
    ),
    array(
        'bale' => 1,
        'design' => 'D2',
        'color' => 'BLUE'
    ),
    array(
        'bale' => 2,
        'design' => 'D3',
        'color' => 'PINK'
    ),
    array(
        'bale' => 1,
        'design' => 'D1',
        'color' => 'WHITE'
    ),
);

$bale = array();
$design = array();
$color = array();
// Obtain a list of columns
foreach ($data as $key => $row) {
    $bale[$key]  = $row['bale'];
    $design[$key] = $row['design'];
    $color[$key] = $row['color'];
}
array_multisort($bale, SORT_ASC, $design, SORT_ASC, $color, SORT_ASC, $data);
var_dump($data);
?> 
```

结果是：

```
array(5) {
  [0]=>
  array(3) {
    ["bale"]=>
    int(1)
    ["design"]=>
    string(2) "D1"
    ["color"]=>
    string(5) "WHITE"
  }
  [1]=>
  array(3) {
    ["bale"]=>
    int(1)
    ["design"]=>
    string(2) "D2"
    ["color"]=>
    string(4) "BLUE"
  }
  [2]=>
  array(3) {
    ["bale"]=>
    int(2)
    ["design"]=>
    string(2) "D1"
    ["color"]=>
    string(4) "BLUE"
  }
  [3]=>
  array(3) {
    ["bale"]=>
    int(2)
    ["design"]=>
    string(2) "D1"
    ["color"]=>
    string(3) "RED"
  }
  [4]=>
  array(3) {
    ["bale"]=>
    int(2)
    ["design"]=>
    string(2) "D3"
    ["color"]=>
    string(4) "PINK"
  }
} 
```

另请查看[http://php.net/manual/en/function.array-multisort.php](http://php.net/manual/en/function.array-multisort.php)

# eclipse - Tomcat 在 Eclipse 中运行时的 crossdomain.xml 位置

> ID：13607359
> 
> 赞同：1
> 
> 时间：2012-11-28T14:26:45.200
> 
> 标签：eclipse, apache-flex, tomcat, crossdomain.xml

我需要使用 crossdomain.xml 文件从开发沙箱访问我的 WebApp。
我从其他 SO 帖子中收集到它应该可以在 上访问`http://localhost:8080/crossdomain.xml`，因此在 tomcat ROOT webapp 中。

**在 Eclipse 中运行 Tomcat 时，ROOT 目录到底在哪里？**

**编辑**：Tomcat 正在使用名为“Apache Tomcat v6.0”的运行时环境，该环境使用“Tomcat 安装目录”设置为“D:\dev\apache-tomcat-6.0.33”
我试图将 crossdomain.xml 放入“ D:\dev\apache-tomcat-6.0.33\webapps\ROOT" 但我仍然得到一个 404 试图`http://localhost:8080/crossdomain.xml`从浏览器访问。事实上，该 ROOT 目录中的任何内容都可以访问。

**编辑 2**：在服务器启动配置中，有一个“参数”选项卡列出以下内容`-Dcatalina.base="D:\dev\workspaces\project\.metadata\.plugins\org.eclipse.wst.server.core\tmp1" -Dcatalina.home="D:\dev\apache-tomcat-6.0.33" -Dwtp.deploy="D:\dev\workspaces\project\.metadata\.plugins\org.eclipse.wst.server.core\tmp1\wtpwebapps" -Djava.endorsed.dirs="D:\dev\apache-tomcat-6.0.33\endorsed"`
因此，我将 crossdomain.xml 粘贴到`D:\dev\workspaces\project\.metadata\.plugins\org.eclipse.wst.server.core\tmp1\wtpwebapps\ROOT`并且......它起作用了。严重地。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T18:42:25.473

根据编辑 #2
在服务器启动配置中，有一个“参数”选项卡列出了以下 VM 参数
`-Dcatalina.base="D:\dev\workspaces\project\.metadata\.plugins\org.eclipse.wst.server.core\tmp1" -Dcatalina.home="D:\dev\apache-tomcat-6.0.33" -Dwtp.deploy="D:\dev\workspaces\project\.metadata\.plugins\org.eclipse.wst.server.core\tmp1\wtpwebapps" -Djava.endorsed.dirs="D:\dev\apache-tomcat-6.0.33\endorsed"`

因此，我将 crossdomain.xml 粘贴到`D:\dev\workspaces\project\.metadata\.plugins\org.eclipse.wst.server.core\tmp1\wtpwebapps\ROOT`

# javascript - 即时更新 Google 路线

> ID：13607361
> 
> 赞同：1
> 
> 时间：2012-11-28T14:26:47.103
> 
> 标签：javascript, jquery, cordova, jquery-mobile, google-maps-api-3

我正在使用 Phonegap、JQuery Mobile 和 Google Maps API V3 创建一个移动应用程序。该移动应用程序将允许用户输入目的地地址，然后使用 Google Directions API，我将向他们展示到达目的地的导航路线。

但是，该应用程序还将在地图上标记因施工或维护工程而关闭的任何道路。有没有办法，如果 Google Directions 显示司机要经过有维修工作的特定道路，我会更改路线让他经过另一条街道？将关闭的道路将由地图标记标记，因此我需要做的就是检查是否有标记，如果有，请更新从附近道路/小街出发的路线。

我对此很陌生，如果有人能指点我一些教程或告诉我如何做到这一点，我会非常高兴。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:24:22.337

虽然没有指定特定道路的选项，但您可能能够从 Google Direction API 获得替代路线。

当代码调用 DirectionsService.route() 方法时，您应该指定“provideRouteAlternatives”属性。然后谷歌将尝试计算另一条路线。这是我所知道的唯一可用选项。

*   provideRouteAlternatives 属性 [https://developers.google.com/maps/documentation/javascript/reference#DirectionsRequest](https://developers.google.com/maps/documentation/javascript/reference#DirectionsRequest)

# reporting-services - How to create an SSRS report with dynamically populated columns?

> ID：13607363
> 
> 赞同：1
> 
> 时间：2012-11-28T14:26:50.053
> 
> 标签：reporting-services, reportbuilder3.0

I am using SSRS Report Builder.

My query returns permits for each user:

```
user1   permit1
user1   permit2
user1   permit3
user2   permit2
user2   permit4
... 
```

How can I create a report like this?

```
USER    PERMITS
------------------------------------
user1   permit1   permit2   permit3
user2   permit2   permit4
... 
```

Or even better:

```
USER   PERMIT1   PERMIT2   PERMIT3   PERMIT4
-----------------------------------------------
user1     x         x         x
user2               x                   x
... 
```

The difficulty is that the column "Permit" is not a group of set values. We will add new permits and remove frequently.

Thanks for any assistance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:30:11.730

您正在寻找[Matrix Control](http://msdn.microsoft.com/en-us/library/ms157334%28v=sql.100%29.aspx)。在此控件中，您将在第一（用户）列上对行进行分组，并在第二（许可）列上对列进行分组。在单元格中，您可以检查许可证的值，如果已设置，则绘制一个“x”。示意性地，该控件将如下所示：

```
 ---------+-----------------------------------------------
|         | [Permit]                                      |
|---------+-----------------------------------------------
| [User]  | =Iif(Fields!Permit.Value Is Nothing, "", "x") |
 ---------+----------------------------------------------- 
```

# c# - adding images to an HTML Canvas Generated by C#

> ID：13607369
> 
> 赞同：1
> 
> 时间：2012-11-28T14:27:14.810
> 
> 标签：c#, html, wpf

Hello so I have an interesting question for everyone. I have a WPF application that generates an html preview of a report based on Database data and user input. My currently dilemma is that I have a HTML canvas that is created by C# as follows:

```
Canvas myCanvas = new Canvas();
myCanvas.Name = "cvsMyCanvas";
myCanvas.width = userDefinedByTtextBox;
myCanvas.height = userDefinedByTtextBox;
myCanvas.Visibility = Visibility.Collapsed //Don't show the canvas just yet 
```

My question is how do I get an image that I have saved locally to the computer on the canvas in a specific position. (i.e. A HTML Image tag object that is generated by C# and use the move to functionality)

(This is a rough example of how I think it should work but this is what I need the help on) Example:

```
string htmlImage = "<img id=\"myImage\" src=\"C:\\Temp\\img.png\">";
htmlImage.moveTo(x,y); 
```

...again the above code is an example of what it is I am trying to do. If anyone could help me out that would be great! Also if I did not provide enough information please let me know and I will let provide it.

There seems to be some confusion on what it is I am trying to do, it is most likely my fault do to lack of explanation so allow me to elaborate more. I have images saved in a folder in my temp directory I. I am running a WPF application that has a WebBrowser control that I am using to display HTML. The HTML that is used in that WebBrowser is created in the C# code behind. I am trying to create a canvas that is displayed in the WebBrowser with the images that I have saved in my temp folder. The code I have provided above apparently will not work for what I am trying to accomplish because there is no way to create a canvas in C# and use it in HTML. Let me know if this helps shed some light on this predicament or if even more explanation is required.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:39:19.640

如果要从 C# 生成 HTML5 代码，生成的 HTML 代码应如下所示：

```
context = canvas.getContext('2d');

    var image = new Image();
    image.src = <your path>;
    image.onload = function() {
            context.drawImage(image, x, y, w, y);
        } 
```

然后，只需将其存储在 String 或 StringBuilder

# c++ - Initialized const in a class

> ID：13607370
> 
> 赞同：0
> 
> 时间：2012-11-28T14:27:16.573
> 
> 标签：c++, class, constants

Is it possible to initialize in a `class` a `global const` in a `class method`? I would like to use a method in my `class` to set the `const`.

My idea was:

```
/* a.h */
class A {
private:
    const string cs;

public:
    A();
    ~A();

    bool cs(const string &host, ...)
};

/* a.cpp */
A::A(){
}

A::~A(){
}

bool cs(const string &host, ...) {
    /* check some values */
    cs = "Set Vaule";   //Doesnt work, get an compiler error
} 
```

Is It possible to set a `global const` in a `method`?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T14:29:18.677

不，您可以在构造函数初始化程序中对其进行初始化，但一旦初始化，`const`成员就无法更改。否则，它就不会是`const`蚂蚁了，不是吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T14:28:55.467

这仅在您的类的构造函数中是可能的，并且仅在初始化列表中：

```
A() : cs("Set Value") {
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T14:28:39.387

不，您只能在构造函数中设置它。施工后，它是一成不变的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T14:48:44.173

如前所述，您需要使用其[初始化列表](http://www.cprogramming.com/tutorial/initialization-lists-c++.html)来初始化对象的 const 成员：

```
/* a.h */
class A {
private:
    const string cs;

public:
    A(const string &value) :
        cs(value) // <---- initialize here!.
    {};
}; 
```

类的每个 const 成员都是一样的：

```
class A {
private:
    const string cs;
    const float numberofthebeast;
    const char z;

public:
    A(const string &value, const float number, const char character) :
        cs(value),
        numberofthebeast(number),
        z(character)
        {};
}; 
```

如果不想提供构造函数来初始化每个值，可以在默认构造函数中提供默认值，但请记住，构造后不能更改值：

```
class A {
private:
    const string cs;
    const float numberofthebeast;
    const char z;

public:
    A(const string &value, const float number, const char character) :
        cs(value),
        numberofthebeast(number),
        z(character)
        {};

    // Default values!!!
    A() :
        cs("default ctor"),
        numberofthebeast(666.666f),
        z('Z')
        {};
}; 
```

构造函数初始化器列表对于初始化其他成员也很有用，例如引用或不提供默认构造函数的复杂数据：

```
const unsigned float PI = 3.14f;

class Weird
{
    Weird (int w);
    // no default ctor!
    int W;
};

class Foo
{
    // Error: weird doesn't provide default ctor, 
    Weird w;
    // Error: reference uninitialized.
    float &pi;
};

class Bar
{
    Bar() :
        // Ok, Weird is constructed correctly.
        w(1),
        // Ok, pi is initialized.
        pi(PI)
    {};
    Weird w;
    float &pi;
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T15:51:42.380

正如所有其他答案所断言的那样，您无法`const`在初始化后更改类成员的值。但是，有些人认为他们非常聪明，并使用`const_cast<>`

```
class A {
  const int x;
public:
  A(int _x) : x(_x) {}
  void change_x(int _x)        // change x ?!
  { const_cast<int&>(x) = _x; }
}; 
```

使用 gnu 和 intel 编译器，这实际上可以在没有警告 AFAIK 的情况下编译，甚至可以工作。但这违反了语言规则并构成了可怕的 UB（未定义行为）。换句话说，它可能并不总是按预期工作，因为允许编译器假设`x`自初始化以来它没有改变。

# objective-c - How do I destroy this UIDatePicker? It won't die

> ID：13607372
> 
> 赞同：1
> 
> 时间：2012-11-28T14:27:19.850
> 
> 标签：objective-c

I don't understand! I'm a novice, so this may be my fundamental misunderstanding of Objective-C, life, the universe and/or everything; please be gentle.

1.  I set the inputView for a text field to be self.datePicker - a standard UIDatePicker, which has been initialised in viewDidLoad.
2.  I add some subviews to the datePicker. Sounds crazy, I know, but bear with me.
3.  I now have that field resign first responder, and call self.datePicker = nil. Even more crazy, yes.
4.  I tap the textField again, and expect one of two things. Either one, no datePicker. I destroyed it, right? Needs to be re-allocated and initialised. Or two, a fresh datePicker, without the extra subviews. Not sure why I expect this (again, I destroyed it!), but hey, it's possible.
5.  What I get is the same picker, complete with the added subviews, plus any date that was previously set in it! What the what?!? says I.

I know you're wondering why I want to do this. Why add views to datePicker at all, and why not just remove them from their superview when needed. But let's assume I have a good reason for doing this, and doing it this way. Can anyone correct my obviously wonky understanding of object behaviour?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:31:54.783

不，您没有破坏，只是取消了 viewController 上的属性。我认为您的设计可能有点偏离，但如果您创建了某种自定义日期选择器，您应该添加一个重置方法，该方法应该将自定义日期选择器返回到基本状态。

要将其从属性中删除`UITextField`到`inputView`日期选择器的新实例中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T14:36:22.723

听起来有两个对 datePicker 的引用，但您只是将其中一个设置为 nil。如果我跟着你，两个引用是 self.datePicker 和 textField.inputView。但是您只是将第一个设置为零。所以对象被 textField.inputView “保留”。

一般来说，依靠 ARC 来销毁对象似乎很不稳定。此外，一旦 datePicker 被销毁，textField.inputView 就不会是 nil 而不是新的 datePicker 吗？

# html - Input text without previously entered value

> ID：13607378
> 
> 赞同：0
> 
> 时间：2012-11-28T14:27:51.757
> 
> 标签：html, input, xhtml, textinput

> **Possible Duplicate:**
> [How do you disable browser Autocomplete on web form field / input tag?](https://stackoverflow.com/questions/2530/how-do-you-disable-browser-autocomplete-on-web-form-field-input-tag)

I entered a value in input text for example: email@email.com, after when I entering another value same area, seems the previously entered data (email@email.com).But I don't want to appear it. How can I do this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:33:26.273

你可以使用“占位符”

```
<input type="text" placeholder="email@email.com"> 
```

# c# - Is there any way to write a Disposable (UnlockBits) Bitmap in C#?

> ID：13607381
> 
> 赞同：1
> 
> 时间：2012-11-28T14:27:51.380
> 
> 标签：c#, bitmap, idisposable, aforge

**Context:**

Me and my colleagues work alot handling bitmap images via C#.

At the moment, we are also working with the [AForge Framework](http://www.aforgenet.com/) for managing images, and since the methods of the AForge dll work with [UnmanagedImage](http://www.aforgenet.com/framework/docs/html/44eeefe9-edc4-ff89-38e5-1a057bed78e4.htm) classes, we always need to convert a Bitmap to a UnmanagedImage before starting to use the library.

**Simple Piece of Code:**

This is how we usually convert the Bitmap to the UnmanagedImage Class

```
 BitmapData bmpData;
        Bitmap bmp =  AForgeImaging.SetTo24BitsPerPixel(bmp);
        bmpData    = bmp.LockBits(new Rectangle(0, 0, bmp.Width, bmp.Height), ImageLockMode.ReadWrite, bmp.PixelFormat);

        UnmanagedImage unmanaged = new UnmanagedImage(bmpData); 
```

The problem is that we always have to do something like this in order to avoid exceptions:

```
 try
        {
            // Create Unmanaged Image
            // Process the Image And Stuff
        }
        finally
        {
           // Unlock BitmapBits
        } 
```

**Our Goal:**

Avoid having to surround every piece of code with this `try/finally`statement.

Is there any way we can aproach this in order to make it work ?

We've tried to `Extend` the bitmap, but since it's Sealed, it's not possible.

Also,writing extension methods such as [this example](https://stackoverflow.com/questions/766923/how-can-you-extend-the-bitmap-class) would not work because it needs a static class to `Be an Extension Handler` and this would not help us in any ways.

**Question:**

That said, is there any way we can manage to Write a "Disposable" Bitmap when it comes to the "UnlockBits()" method, without having to write a "Wrapper" ?

By Wrapper i mean a class with a `private bitmap attribute` that would replicate calls to to the bitmap attribute. This would lead us to write every bitmap method again and just call the method with the same name on the private attribute, which is sort of Meh.

Thanks in advance

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T14:44:12.520

您可以执行以下操作，在旁边添加缺少的属性`Scan0`等 - 然后您无需更改任何使用它们的现有代码。

```
using System;
using System.Drawing;
using System.Drawing.Imaging;
static class Program
{

    static void Main()
    {

        Bitmap bmp = new Bitmap(100, 100);

        using (var bmpData = bmp.SmartLock(new Rectangle(0, 0, bmp.Width, bmp.Height), ImageLockMode.ReadWrite, bmp.PixelFormat))
        {
            // use Scan0 etc as normal
        }
    }
}
static class BitmapUtils
{
    public static WrappedBitmapData SmartLock(this Bitmap bitmap, Rectangle rect, ImageLockMode flags, PixelFormat format)
    {
        return new WrappedBitmapData(bitmap, bitmap.LockBits(rect, flags, format));
    }
    public class WrappedBitmapData : IDisposable
    {
        public int Height { get { return data.Height; } }
        public int Width { get { return data.Width; } }
        public IntPtr Scan0 { get { return data.Scan0; } }
        public PixelFormat PixelFormat { get { return data.PixelFormat; } }
        // etc here ^^^ TODO
        internal WrappedBitmapData(Bitmap bmp, BitmapData data)
        {
            this.bmp = bmp;
            this.data = data;
        }
        private Bitmap bmp;
        private BitmapData data;
        public void Dispose()
        {
            if (data != null && bmp != null)
            {
                bmp.UnlockBits(data);
            }
            data = null;
            bmp = null;
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T14:31:50.323

不，Bitmap 和 BitmapData 都是密封的。你不能扩展它们，所以包装器是你处理它的唯一（也是最好的）方法。

# visual-c++ - VC++ iostream/savefiledialog error

> ID：13607383
> 
> 赞同：0
> 
> 时间：2012-11-28T14:27:59.540
> 
> 标签：visual-c++, c++-cli, iostream, savefiledialog

I'm using the [`SaveFileDialog` class example](http://msdn.microsoft.com/en-us/library/system.windows.forms.savefiledialog%28v=vs.90%29.aspx) to combine use create a text file in a user defined directory.

Here's the conflicting part of my code:

```
private: System::Void button1_Click(System::Object^  sender, System::EventArgs^  e) {
             array<Image^> ^imageArray ;
             int CurrentImage=0;
             imageArray = gcnew array<Image^>(9);
             array<String^>^ names = {L"adc1.bmp" ,"adc2.bmp","adc3.bmp","adc4.bmp","adc5.bmp","adc6.bmp","adc7.bmp","adc8.bmp"};
             for(int i=0; i<8; i++)
             {
                 System::ComponentModel::ComponentResourceManager^ resources = (gcnew System::ComponentModel::ComponentResourceManager(Form1::typeid));
                 imageArray[i] =(cli::safe_cast<System::Drawing::Bitmap^>(resources->GetObject(names[i])));
             }

             if((this->comboBox4->Text == String::Empty)||(this->textBox2->Text == String::Empty)){
                 this->textBox1->Text="please select port and save file directory";

             }

             else{ // start assigning
                 try{ // first make sure port isn't busy/open
                     if(!this->serialPort1->IsOpen){
                         // select the port whose name is in comboBox4 (select port)
                         this->serialPort1->PortName=this->comboBox4->Text;
                         //open the port
                         this->serialPort1->Open();
                         // sending
                         String^ name_ = this->serialPort1->PortName;
                         String^ START; 
                         int m=0;
                         //send data to setup timer on the microcontroller
                         this->serialPort1->WriteLine(START);
                         Stream^ myStream;
                         SaveFileDialog^ saveFileDialog1 = gcnew SaveFileDialog;
                         saveFileDialog1->Filter = "txt files (*.txt)|*.txt|All files (*.*)|*.*";
                         saveFileDialog1->FilterIndex = 2;
                         saveFileDialog1->RestoreDirectory = true;
                         if ( saveFileDialog1->ShowDialog() == System::Windows::Forms::DialogResult::OK  )
                         {
                             if ( (myStream = saveFileDialog1->OpenFile()) != nullptr )
                             {
                                 // receiving
                                 myStream<<"ADC1;ADC2;ADC3;ADC4;ADC5;ADC6;ADC7;ADC8"<<endl;
                                 while(START){
                                     myStream<<this->serialPort1->ReadLine()<<";";
                                     pictureBox1->image=imagearray[m];
                                     m++;
                                     if(m==7){
                                         myStream<<endl;
                                         m=0;
                                     }
                                 }
                             }}}
                     else{
                         this->textBox1->Text="Warning: port is busy or isn't open";
                     }
                 }
                 catch(UnauthorizedAccessException^){
                     this->textBox1->Text="Unauthorized access";
                 }
             }

         } 
```

However, I'm getting the following errors:

```
 1>------ Build started: Project: Data_Logger, Configuration: Debug Win32 ------
1>  Data_Logger.cpp
1>c:\documents and settings\310098394\desktop\programming\visual c++\data_logger\data_logger\Form1.h(301): error C2784: 'std::basic_ostream<_Elem,_Traits> &std::operator <<(std::basic_ostream<_Elem,_Traits> &,const std::error_code &)' : could not deduce template argument for 'std::basic_ostream<_Elem,_Traits> &' from 'System::IO::Stream ^'
1>          C:\Program Files\Microsoft Visual Studio 10.0\VC\include\ostream(1085) : see declaration of 'std::operator <<'
1>c:\documents and settings\310098394\desktop\programming\visual c++\data_logger\data_logger\Form1.h(301): error C2784: 'std::basic_ostream<_Elem,_Traits> &std::operator <<(std::basic_ostream<_Elem,_Traits> &&,_Ty)' : could not deduce template argument for 'std::basic_ostream<_Elem,_Traits> &&' from 'System::IO::Stream ^'
1>          C:\Program Files\Microsoft Visual Studio 10.0\VC\include\ostream(968) : see declaration of 'std::operator <<'
1>c:\documents and settings\310098394\desktop\programming\visual c++\data_logger\data_logger\Form1.h(301): error C2784: 'std::basic_ostream<char,_Traits> &std::operator <<(std::basic_ostream<char,_Traits> &,unsigned char)' : could not deduce template argument for 'std::basic_ostream<char,_Traits> &' from 'System::IO::Stream ^'
1>          C:\Program Files\Microsoft Visual Studio 10.0\VC\include\ostream(958) : see declaration of 'std::operator <<'
1>c:\documents and settings\310098394\desktop\programming\visual c++\data_logger\data_logger\Form1.h(301): error C2784: 'std::basic_ostream<char,_Traits> &std::operator <<(std::basic_ostream<char,_Traits> &,const unsigned char *)' : could not deduce template argument for 'std::basic_ostream<char,_Traits> &' from 'System::IO::Stream ^'
1>          C:\Program Files\Microsoft Visual Studio 10.0\VC\include\ostream(951) : see declaration of 'std::operator <<'
1>c:\documents and settings\310098394\desktop\programming\visual c++\data_logger\data_logger\Form1.h(301): error C2784: 'std::basic_ostream<char,_Traits> &std::operator <<(std::basic_ostream<char,_Traits> &,signed char)' : could not deduce template argument for 'std::basic_ostream<char,_Traits> &' from 'System::IO::Stream ^'
1>          C:\Program Files\Microsoft Visual Studio 10.0\VC\include\ostream(944) : see declaration of 'std::operator <<'
1>c:\documents and settings\310098394\desktop\programming\visual c++\data_logger\data_logger\Form1.h(301): error C2784: 'std::basic_ostream<char,_Traits> &std::operator <<(std::basic_ostream<char,_Traits> &,const signed char *)' : could not deduce template argument for 'std::basic_ostream<char,_Traits> &' from 'System::IO::Stream ^'
1>          C:\Program Files\Microsoft Visual Studio 10.0\VC\include\ostream(937) : see declaration of 'std::operator <<'
1>c:\documents and settings\310098394\desktop\programming\visual c++\data_logger\data_logger\Form1.h(301): error C2784: 'std::basic_ostream<_Elem,_Traits> &std::operator <<(std::basic_ostream<_Elem,_Traits> &,_Elem)' : could not deduce template argument for 'std::basic_ostream<_Elem,_Traits> &' from 'System::IO::Stream ^'
1>          C:\Program Files\Microsoft Visual Studio 10.0\VC\include\ostream(898) : see declaration of 'std::operator <<'
1>c:\documents and settings\310098394\desktop\programming\visual c++\data_logger\data_logger\Form1.h(301): error C2784: 'std::basic_ostream<_Elem,_Traits> &std::operator <<(std::basic_ostream<_Elem,_Traits> &,const _Elem *)' : could not deduce template argument for 'std::basic_ostream<_Elem,_Traits> &' from 'System::IO::Stream ^'
1>          C:\Program Files\Microsoft Visual Studio 10.0\VC\include\ostream(851) : see declaration of 'std::operator <<'
1>c:\documents and settings\310098394\desktop\programming\visual c++\data_logger\data_logger\Form1.h(301): error C2784: 'std::basic_ostream<char,_Traits> &std::operator <<(std::basic_ostream<char,_Traits> &,char)' : could not deduce template argument for 'std::basic_ostream<char,_Traits> &' from 'System::IO::Stream ^'
1>          C:\Program Files\Microsoft Visual Studio 10.0\VC\include\ostream(811) : see declaration of 'std::operator <<'
1>c:\documents and settings\310098394\desktop\programming\visual c++\data_logger\data_logger\Form1.h(301): error C2784: 'std::basic_ostream<char,_Traits> &std::operator <<(std::basic_ostream<char,_Traits> &,const char *)' : could not deduce template argument for 'std::basic_ostream<char,_Traits> &' from 'System::IO::Stream ^'
1>          C:\Program Files\Microsoft Visual Studio 10.0\VC\include\ostream(764) : see declaration of 'std::operator <<'
1>c:\documents and settings\310098394\desktop\programming\visual c++\data_logger\data_logger\Form1.h(301): error C2784: 'std::basic_ostream<_Elem,_Traits> &std::operator <<(std::basic_ostream<_Elem,_Traits> &,char)' : could not deduce template argument for 'std::basic_ostream<_Elem,_Traits> &' from 'System::IO::Stream ^'
1>          C:\Program Files\Microsoft Visual Studio 10.0\VC\include\ostream(726) : see declaration of 'std::operator <<'
1>c:\documents and settings\310098394\desktop\programming\visual c++\data_logger\data_logger\Form1.h(301): error C2784: 'std::basic_ostream<_Elem,_Traits> &std::operator <<(std::basic_ostream<_Elem,_Traits> &,const char *)' : could not deduce template argument for 'std::basic_ostream<_Elem,_Traits> &' from 'System::IO::Stream ^'
1>          C:\Program Files\Microsoft Visual Studio 10.0\VC\include\ostream(679) : see declaration of 'std::operator <<'
1>c:\documents and settings\310098394\desktop\programming\visual c++\data_logger\data_logger\Form1.h(301): error C2676: binary '<<' : 'System::IO::Stream ^' does not define this operator or a conversion to a type acceptable to the predefined operator
1>c:\documents and settings\310098394\desktop\programming\visual c++\data_logger\data_logger\Form1.h(304): error C2784: 'std::basic_ostream<_Elem,_Traits> &std::operator <<(std::basic_ostream<_Elem,_Traits> &,const std::error_code &)' : could not deduce template argument for 'std::basic_ostream<_Elem,_Traits> &' from 'System::IO::Stream ^'
1>          C:\Program Files\Microsoft Visual Studio 10.0\VC\include\ostream(1085) : see declaration of 'std::operator <<'
1>c:\documents and settings\310098394\desktop\programming\visual c++\data_logger\data_logger\Form1.h(304): error C2784: 'std::basic_ostream<_Elem,_Traits> &std::operator <<(std::basic_ostream<_Elem,_Traits> &&,_Ty)' : could not deduce template argument for 'std::basic_ostream<_Elem,_Traits> &&' from 'System::IO::Stream ^'
1>          C:\Program Files\Microsoft Visual Studio 10.0\VC\include\ostream(968) : see declaration of 'std::operator <<'
1>c:\documents and settings\310098394\desktop\programming\visual c++\data_logger\data_logger\Form1.h(304): error C2784: 'std::basic_ostream<char,_Traits> &std::operator <<(std::basic_ostream<char,_Traits> &,unsigned char)' : could not deduce template argument for 'std::basic_ostream<char,_Traits> &' from 'System::IO::Stream ^'
1>          C:\Program Files\Microsoft Visual Studio 10.0\VC\include\ostream(958) : see declaration of 'std::operator <<'
1>c:\documents and settings\310098394\desktop\programming\visual c++\data_logger\data_logger\Form1.h(304): error C2784: 'std::basic_ostream<char,_Traits> &std::operator <<(std::basic_ostream<char,_Traits> &,const unsigned char *)' : could not deduce template argument for 'std::basic_ostream<char,_Traits> &' from 'System::IO::Stream ^'
1>          C:\Program Files\Microsoft Visual Studio 10.0\VC\include\ostream(951) : see declaration of 'std::operator <<'
1>c:\documents and settings\310098394\desktop\programming\visual c++\data_logger\data_logger\Form1.h(304): error C2784: 'std::basic_ostream<char,_Traits> &std::operator <<(std::basic_ostream<char,_Traits> &,signed char)' : could not deduce template argument for 'std::basic_ostream<char,_Traits> &' from 'System::IO::Stream ^'
1>          C:\Program Files\Microsoft Visual Studio 10.0\VC\include\ostream(944) : see declaration of 'std::operator <<'
1>c:\documents and settings\310098394\desktop\programming\visual c++\data_logger\data_logger\Form1.h(304): error C2784: 'std::basic_ostream<char,_Traits> &std::operator <<(std::basic_ostream<char,_Traits> &,const signed char *)' : could not deduce template argument for 'std::basic_ostream<char,_Traits> &' from 'System::IO::Stream ^'
1>          C:\Program Files\Microsoft Visual Studio 10.0\VC\include\ostream(937) : see declaration of 'std::operator <<'
1>c:\documents and settings\310098394\desktop\programming\visual c++\data_logger\data_logger\Form1.h(304): error C2784: 'std::basic_ostream<_Elem,_Traits> &std::operator <<(std::basic_ostream<_Elem,_Traits> &,_Elem)' : could not deduce template argument for 'std::basic_ostream<_Elem,_Traits> &' from 'System::IO::Stream ^'
1>          C:\Program Files\Microsoft Visual Studio 10.0\VC\include\ostream(898) : see declaration of 'std::operator <<'
1>c:\documents and settings\310098394\desktop\programming\visual c++\data_logger\data_logger\Form1.h(304): error C2784: 'std::basic_ostream<_Elem,_Traits> &std::operator <<(std::basic_ostream<_Elem,_Traits> &,const _Elem *)' : could not deduce template argument for 'std::basic_ostream<_Elem,_Traits> &' from 'System::IO::Stream ^'
1>          C:\Program Files\Microsoft Visual Studio 10.0\VC\include\ostream(851) : see declaration of 'std::operator <<'
1>c:\documents and settings\310098394\desktop\programming\visual c++\data_logger\data_logger\Form1.h(304): error C2784: 'std::basic_ostream<char,_Traits> &std::operator <<(std::basic_ostream<char,_Traits> &,char)' : could not deduce template argument for 'std::basic_ostream<char,_Traits> &' from 'System::IO::Stream ^'
1>          C:\Program Files\Microsoft Visual Studio 10.0\VC\include\ostream(811) : see declaration of 'std::operator <<'
1>c:\documents and settings\310098394\desktop\programming\visual c++\data_logger\data_logger\Form1.h(304): error C2784: 'std::basic_ostream<char,_Traits> &std::operator <<(std::basic_ostream<char,_Traits> &,const char *)' : could not deduce template argument for 'std::basic_ostream<char,_Traits> &' from 'System::IO::Stream ^'
1>          C:\Program Files\Microsoft Visual Studio 10.0\VC\include\ostream(764) : see declaration of 'std::operator <<'
1>c:\documents and settings\310098394\desktop\programming\visual c++\data_logger\data_logger\Form1.h(304): error C2784: 'std::basic_ostream<_Elem,_Traits> &std::operator <<(std::basic_ostream<_Elem,_Traits> &,char)' : could not deduce template argument for 'std::basic_ostream<_Elem,_Traits> &' from 'System::IO::Stream ^'
1>          C:\Program Files\Microsoft Visual Studio 10.0\VC\include\ostream(726) : see declaration of 'std::operator <<'
1>c:\documents and settings\310098394\desktop\programming\visual c++\data_logger\data_logger\Form1.h(304): error C2784: 'std::basic_ostream<_Elem,_Traits> &std::operator <<(std::basic_ostream<_Elem,_Traits> &,const char *)' : could not deduce template argument for 'std::basic_ostream<_Elem,_Traits> &' from 'System::IO::Stream ^'
1>          C:\Program Files\Microsoft Visual Studio 10.0\VC\include\ostream(679) : see declaration of 'std::operator <<'
1>c:\documents and settings\310098394\desktop\programming\visual c++\data_logger\data_logger\Form1.h(304): error C2676: binary '<<' : 'System::IO::Stream ^' does not define this operator or a conversion to a type acceptable to the predefined operator
1>c:\documents and settings\310098394\desktop\programming\visual c++\data_logger\data_logger\Form1.h(305): error C2039: 'image' : is not a member of 'System::Windows::Forms::PictureBox'
1>          c:\program files\reference assemblies\microsoft\framework\.netframework\v4.0\system.windows.forms.dll : see declaration of 'System::Windows::Forms::PictureBox'
1>c:\documents and settings\310098394\desktop\programming\visual c++\data_logger\data_logger\Form1.h(305): error C2065: 'imagearray' : undeclared identifier
1>c:\documents and settings\310098394\desktop\programming\visual c++\data_logger\data_logger\Form1.h(308): error C2784: 'std::basic_ostream<_Elem,_Traits> &std::operator <<(std::basic_ostream<_Elem,_Traits> &,const std::error_code &)' : could not deduce template argument for 'std::basic_ostream<_Elem,_Traits> &' from 'System::IO::Stream ^'
1>          C:\Program Files\Microsoft Visual Studio 10.0\VC\include\ostream(1085) : see declaration of 'std::operator <<'
1>c:\documents and settings\310098394\desktop\programming\visual c++\data_logger\data_logger\Form1.h(308): error C2784: 'std::basic_ostream<_Elem,_Traits> &std::operator <<(std::basic_ostream<_Elem,_Traits> &&,_Ty)' : could not deduce template argument for 'std::basic_ostream<_Elem,_Traits> &&' from 'System::IO::Stream ^'
1>          C:\Program Files\Microsoft Visual Studio 10.0\VC\include\ostream(968) : see declaration of 'std::operator <<'
1>c:\documents and settings\310098394\desktop\programming\visual c++\data_logger\data_logger\Form1.h(308): error C2784: 'std::basic_ostream<char,_Traits> &std::operator <<(std::basic_ostream<char,_Traits> &,unsigned char)' : could not deduce template argument for 'std::basic_ostream<char,_Traits> &' from 'System::IO::Stream ^'
1>          C:\Program Files\Microsoft Visual Studio 10.0\VC\include\ostream(958) : see declaration of 'std::operator <<'
1>c:\documents and settings\310098394\desktop\programming\visual c++\data_logger\data_logger\Form1.h(308): error C2784: 'std::basic_ostream<char,_Traits> &std::operator <<(std::basic_ostream<char,_Traits> &,const unsigned char *)' : could not deduce template argument for 'std::basic_ostream<char,_Traits> &' from 'System::IO::Stream ^'
1>          C:\Program Files\Microsoft Visual Studio 10.0\VC\include\ostream(951) : see declaration of 'std::operator <<'
1>c:\documents and settings\310098394\desktop\programming\visual c++\data_logger\data_logger\Form1.h(308): error C2784: 'std::basic_ostream<char,_Traits> &std::operator <<(std::basic_ostream<char,_Traits> &,signed char)' : could not deduce template argument for 'std::basic_ostream<char,_Traits> &' from 'System::IO::Stream ^'
1>          C:\Program Files\Microsoft Visual Studio 10.0\VC\include\ostream(944) : see declaration of 'std::operator <<'
1>c:\documents and settings\310098394\desktop\programming\visual c++\data_logger\data_logger\Form1.h(308): error C2784: 'std::basic_ostream<char,_Traits> &std::operator <<(std::basic_ostream<char,_Traits> &,const signed char *)' : could not deduce template argument for 'std::basic_ostream<char,_Traits> &' from 'System::IO::Stream ^'
1>          C:\Program Files\Microsoft Visual Studio 10.0\VC\include\ostream(937) : see declaration of 'std::operator <<'
1>c:\documents and settings\310098394\desktop\programming\visual c++\data_logger\data_logger\Form1.h(308): error C2784: 'std::basic_ostream<_Elem,_Traits> &std::operator <<(std::basic_ostream<_Elem,_Traits> &,_Elem)' : could not deduce template argument for 'std::basic_ostream<_Elem,_Traits> &' from 'System::IO::Stream ^'
1>          C:\Program Files\Microsoft Visual Studio 10.0\VC\include\ostream(898) : see declaration of 'std::operator <<'
1>c:\documents and settings\310098394\desktop\programming\visual c++\data_logger\data_logger\Form1.h(308): error C2784: 'std::basic_ostream<_Elem,_Traits> &std::operator <<(std::basic_ostream<_Elem,_Traits> &,const _Elem *)' : could not deduce template argument for 'std::basic_ostream<_Elem,_Traits> &' from 'System::IO::Stream ^'
1>          C:\Program Files\Microsoft Visual Studio 10.0\VC\include\ostream(851) : see declaration of 'std::operator <<'
1>c:\documents and settings\310098394\desktop\programming\visual c++\data_logger\data_logger\Form1.h(308): error C2784: 'std::basic_ostream<char,_Traits> &std::operator <<(std::basic_ostream<char,_Traits> &,char)' : could not deduce template argument for 'std::basic_ostream<char,_Traits> &' from 'System::IO::Stream ^'
1>          C:\Program Files\Microsoft Visual Studio 10.0\VC\include\ostream(811) : see declaration of 'std::operator <<'
1>c:\documents and settings\310098394\desktop\programming\visual c++\data_logger\data_logger\Form1.h(308): error C2784: 'std::basic_ostream<char,_Traits> &std::operator <<(std::basic_ostream<char,_Traits> &,const char *)' : could not deduce template argument for 'std::basic_ostream<char,_Traits> &' from 'System::IO::Stream ^'
1>          C:\Program Files\Microsoft Visual Studio 10.0\VC\include\ostream(764) : see declaration of 'std::operator <<'
1>c:\documents and settings\310098394\desktop\programming\visual c++\data_logger\data_logger\Form1.h(308): error C2784: 'std::basic_ostream<_Elem,_Traits> &std::operator <<(std::basic_ostream<_Elem,_Traits> &,char)' : could not deduce template argument for 'std::basic_ostream<_Elem,_Traits> &' from 'System::IO::Stream ^'
1>          C:\Program Files\Microsoft Visual Studio 10.0\VC\include\ostream(726) : see declaration of 'std::operator <<'
1>c:\documents and settings\310098394\desktop\programming\visual c++\data_logger\data_logger\Form1.h(308): error C2784: 'std::basic_ostream<_Elem,_Traits> &std::operator <<(std::basic_ostream<_Elem,_Traits> &,const char *)' : could not deduce template argument for 'std::basic_ostream<_Elem,_Traits> &' from 'System::IO::Stream ^'
1>          C:\Program Files\Microsoft Visual Studio 10.0\VC\include\ostream(679) : see declaration of 'std::operator <<'
1>c:\documents and settings\310098394\desktop\programming\visual c++\data_logger\data_logger\Form1.h(308): error C2676: binary '<<' : 'System::IO::Stream ^' does not define this operator or a conversion to a type acceptable to the predefined operator
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

The error starts at line: `myStream<<"ADC1;ADC2;ADC3;ADC4;ADC5;ADC6;ADC7;ADC8"<<endl;`

I used `ofstream` before and it worked. However, I would like the user to select the directory and name the output file and I'm not sure if that would be possible using `ofstream`. I would really appreciate it, if someone could help me solve at the least the error related to `myStream`.

Thanks in advance

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:48:07.003

System::IO::Stream 不支持 operator<< 和 operator>> 像 std::[i|o|io]stream。要写入 System::IO::Stream，请使用 Stream::Write 方法。

查看 System::IO::Stream 的文档：

[http://msdn.microsoft.com/en-us/library/system.io.stream.aspx](http://msdn.microsoft.com/en-us/library/system.io.stream.aspx)

# html - The XML page cannot be displayed Cannot view XML input using style sheet. Using ASP

> ID：13607384
> 
> 赞同：1
> 
> 时间：2012-11-28T14:28:04.300
> 
> 标签：html, xml, asp-classic, xls

I'm new here, hope this is the right area to post my problem, I'm trying to create an XLS file trough an ASP page, but when I try to download the Excel File the ASP page generate I'm getting the next error

The XML page cannot be displayed

## Cannot view XML input using style sheet. Please correct the error and then click the Refresh button, or try again later.

Invalid at the top level of the document. Error processing resource '_http:../victoria/FW91/BarrilesRandom/Escan...

Mov NumeroParte Planta Sloc1 Sloc2 Descuento UoM ^

Thing is this problem does not happen on all the computers of my local network, I mean, I download the file without problem on some computers, but getting the error on others, I though it might be the Excel version is installed on the computers(Using 2007 and 2010), but I I'm not sure, here's the code, hope you can help me. Greetings

```
%@LANGUAGE="VBSCRIPT" CODEPAGE="65001"%>

!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 

"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"

html xmlns="http://www.w3.org/1999/xhtml"

head

meta http-equiv="Content-Type" content="text/html; charset=utf-8"

titleDocumento sin título/title

/head

body

Dim Conexion,SQL

set Conexion = Server.CreateObject("ADODB.Connection")

Conexion.Open "Provider=Microsoft.Jet.OLEDB.4.0; Data Source=" & 

Server.MapPath("/database/Transferencias.mdb")

set rs = Conexion.execute("SELECT Mov,NumeroParte,Planta,Sloc1,Sloc2,Descuento,UoM FROM Transferencia")

    if rs.EOF then
        Response.Write("<SCRIPT ID=clientEventHandlersJS LANGUAGE=javascript>")
        Response.Write("alert(""NO se ha escanneado ningun NP."");")
        Response.Write("</SCRIPT>")
        Response.Write("Ingrese datos al sistema")
    else
        Archivo = "Escanner.xls"
        PathXLS = Server.MapPath(Archivo)
        Set fso = Server.CreateObject("Scripting.FileSystemObject")
        Set Arch_Excel = fso.CreateTextFile(PathXLS, True)
        Fila = "Mov NumeroParte Planta  Sloc1   Sloc2   Descuento   UoM"
        Arch_Excel.writeline Fila

        'Inserta los datos del RecordSet en el Archivo de Excel
        Do while Not rs.EOF
            Fila = ""
            For each x in rs.fields
                Fila = Fila & x.value & chr(9)
            Next
            Arch_Excel.writeline Fila
            rs.MoveNext
        Loop

        Arch_Excel.Close
        Set Arch_Excel = Nothing
        Set fso = Nothing
        Response.Write("<table><a href="&Archivo&"><img border=0 width=""70"" height=""70"" src=""img\excel.jpg""></a>")
    end if
    SQL= "DELETE * FROM Transferencia"
    Conexion.Execute(SQL)
    SQL = "UPDATE Contador SET Contador = 0"
    Conexion.Execute(SQL)
    rs.Close
    Set rs = Nothing
    Conexion.Close
    Set Conexion = Nothing
%>

/body

/html 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T06:51:20.820

尝试以表格格式写入文件，而不是制表符分隔。

```
Archivo = "Escanner.xls"
    PathXLS = Server.MapPath(Archivo)
    Set fso = Server.CreateObject("Scripting.FileSystemObject")
    Set Arch_Excel = fso.CreateTextFile(PathXLS, True)
    Fila = "<table><tr><td>Mov</td><td>NumeroParte</td><td>Planta</td><td>Sloc1</td><td>Sloc2</td><td>Descuento</td><td>UoM</td></tr>"
    Arch_Excel.writeline Fila

'Inserta los datos del RecordSet en el Archivo de Excel
Do while Not rs.EOF
    Fila = "<tr>"
    For each x in rs.fields
        Fila = Fila &"<td>" & x.value & "</td>"
    Next
    Fila = Fila &"</tr>"
    Arch_Excel.writeline Fila
    rs.MoveNext
Loop
Arch_Excel.writeline "</table>"
Arch_Excel.Close
Set Arch_Excel = Nothing
Set fso = Nothing
Response.Write("<table><a href="&Archivo&"><img border=0 width=""70"" height=""70"" src=""img\excel.jpg""></a>") 
```

# java - Issues with code in overriden abstract method in Java enum

> ID：13607385
> 
> 赞同：1
> 
> 时间：2012-11-28T14:28:04.657
> 
> 标签：java, enums, abstract

I'm trying to implement an abstract method in an enum as in code below, but Eclipse is underlining the .getUrls method and displaying the tooltip "this method requires a body instead of a semicolon, two quick fixes: (add body, add 'abstract' modifier)", none of which make sense to me.

The method itself is just a normal method that works in other classes.

What I'm doing wrong?

```
public enum Site {
    PORTAL1 ("http://www.somedomain.net") {
        @Override
        public void method() {
            ArrayList<String> urlList = urlManager.getUrls(int number);
        }
    };
    // more values

    public abstract void method();
    private final String baseUrl;
    private UrlManager urlManager;

    private Site(final String baseUrl) {
        this.baseUrl = baseUrl;
        urlManager = new UrlManager();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T14:36:12.217

一个问题是以下行在语法上无效：

```
ArrayList<String> urlList = urlManager.getUrls(int number);
                                               ^^^^^^^^^^ HERE 
```

另一个问题是您无法访问from的非`static`成员。您要么需要 make ，要么让每个子类都有自己的.`Site``PORTAL1``UrlManager` `static``Site``UrlManager`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T14:34:54.387

除了明显的问题之外`int number`，您不能`urlManager`从枚举实例中引用。您可以对其进行保护，以便可以从每个实例访问它：

```
public enum Site {

    PORTAL1("http://www.somedomain.net") {
        @Override
        public void method() {
            ArrayList<String> urlList = urlManager.getUrls(5);
        }
    };
    // more values

    public abstract void method();
    private final String baseUrl;
    protected UrlManager urlManager;

    private Site(final String baseUrl) {
        this.baseUrl = baseUrl;
        urlManager = new UrlManager();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T14:32:57.350

由于枚举类未声明为抽象类，甚至可能不想被称为抽象类，请执行以下操作：

```
public void method() {
    } 
```

非抽象类不能有抽象方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T14:37:53.287

你有一些不正确的语法：

```
urlManager.getUrls(int number); 
```

你是在声明一个变量，你应该在其中传递一个参数。另外，在哪里`urlManager`声明？

# javascript - jQuery : get the name of a specific folder

> ID：13607389
> 
> 赞同：1
> 
> 时间：2012-11-28T14:28:07.590
> 
> 标签：javascript, jquery

> **Possible Duplicate:**
> [Javascript: Listing File and Folder Structure](https://stackoverflow.com/questions/10774377/javascript-listing-file-and-folder-structure)

I have a folder who contains two other folders. I know the name of one of them, but not the second. Is it possible to get this name with jQuery or Javascript ? My script file is on the root (on the main/parent folder).

example:

```
main_folder (name = theme)
-> children_folder_1 (name = origin)
-> children_folder_2 (name = ?) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T14:29:24.967

如果您的意思是在 Web 浏览器中运行的 JavaScript 代码并找出服务器上其他文件夹的名称，不，没有（合理的）方法可以做到这一点。

（不合理的*方法*是做一堆 ajax 请求，猜测另一个文件夹的名称是什么，通过各种字母数字组合等工作，处理 404 直到它幸运。就像我说的那样，不合理。你d 必须具有该文件夹中资源的名称，除非它支持默认文档。）

# python - Subprocess memory usage in python

> ID：13607391
> 
> 赞同：4
> 
> 时间：2012-11-28T14:28:24.767
> 
> 标签：python, memory, subprocess, benchmarking

How can one measure/benchmark maximum memory usage of a subprocess executed within python?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T14:28:24.767

I made a little utility class that demonstrates how to do this with the [psutil library](http://code.google.com/p/psutil/):

```
import psutil
import subprocess

class ProcessTimer:
  def __init__(self,command):
    self.command = command
    self.execution_state = False

  def execute(self):
    self.max_vms_memory = 0
    self.max_rss_memory = 0

    self.t1 = None
    self.t0 = time.time()
    self.p = subprocess.Popen(self.command,shell=False)
    self.execution_state = True

  def poll(self):
    if not self.check_execution_state():
      return False

    self.t1 = time.time()

    try:
      pp = psutil.Process(self.p.pid)

      #obtain a list of the subprocess and all its descendants
      descendants = list(pp.get_children(recursive=True))
      descendants = descendants + [pp]

      rss_memory = 0
      vms_memory = 0

      #calculate and sum up the memory of the subprocess and all its descendants 
      for descendant in descendants:
        try:
          mem_info = descendant.get_memory_info()

          rss_memory += mem_info[0]
          vms_memory += mem_info[1]
        except psutil.error.NoSuchProcess:
          #sometimes a subprocess descendant will have terminated between the time
          # we obtain a list of descendants, and the time we actually poll this
          # descendant's memory usage.
          pass
      self.max_vms_memory = max(self.max_vms_memory,vms_memory)
      self.max_rss_memory = max(self.max_rss_memory,rss_memory)

    except psutil.error.NoSuchProcess:
      return self.check_execution_state()

    return self.check_execution_state()

  def is_running(self):
    return psutil.pid_exists(self.p.pid) and self.p.poll() == None
  def check_execution_state(self):
    if not self.execution_state:
      return False
    if self.is_running():
      return True
    self.executation_state = False
    self.t1 = time.time()
    return False

  def close(self,kill=False):

    try:
      pp = psutil.Process(self.p.pid)
      if kill:
        pp.kill()
      else:
        pp.terminate()
    except psutil.error.NoSuchProcess:
      pass 
```

You then use it like so:

```
import time

#I am executing "make target" here
ptimer = ProcessTimer(['make','target'])

try:
  ptimer.execute()
  #poll as often as possible; otherwise the subprocess might 
  # "sneak" in some extra memory usage while you aren't looking
  while ptimer.poll():

    time.sleep(.5)
finally:
  #make sure that we don't leave the process dangling?
  ptimer.close()

print 'return code:',ptimer.p.returncode
print 'time:',ptimer.t1 - ptimer.t0
print 'max_vms_memory:',ptimer.max_vms_memory
print 'max_rss_memory:',ptimer.max_rss_memory 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-10-06T15:44:52.537

我找到了一个解决方案，你必须先安装win32api。

进程结束后，您将拥有峰值内存。下面是一个例子：

```
"""Functions for getting memory usage of Windows processes."""

__all__ = ['get_current_process', 'get_memory_info', 'get_memory_usage']

import os
import sys
import ctypes
import json
from ctypes import wintypes
import subprocess
import win32api
from subprocess import Popen, PIPE
from win32process import GetProcessMemoryInfo
from win32con import PROCESS_QUERY_INFORMATION, PROCESS_VM_READ

GetCurrentProcess = ctypes.windll.kernel32.GetCurrentProcess
GetCurrentProcess.argtypes = []
GetCurrentProcess.restype = wintypes.HANDLE

SIZE_T = ctypes.c_size_t

class PROCESS_MEMORY_COUNTERS_EX(ctypes.Structure):
    _fields_ = [
        ('cb', wintypes.DWORD),
        ('PageFaultCount', wintypes.DWORD),
        ('PeakWorkingSetSize', SIZE_T),
        ('WorkingSetSize', SIZE_T),
        ('QuotaPeakPagedPoolUsage', SIZE_T),
        ('QuotaPagedPoolUsage', SIZE_T),
        ('QuotaPeakNonPagedPoolUsage', SIZE_T),
        ('QuotaNonPagedPoolUsage', SIZE_T),
        ('PagefileUsage', SIZE_T),
        ('PeakPagefileUsage', SIZE_T),
        ('PrivateUsage', SIZE_T),
    ]

GetProcessMemoryInfo = ctypes.windll.psapi.GetProcessMemoryInfo
GetProcessMemoryInfo.argtypes = [
    wintypes.HANDLE,
    ctypes.POINTER(PROCESS_MEMORY_COUNTERS_EX),
    wintypes.DWORD,
]
GetProcessMemoryInfo.restype = wintypes.BOOL

def get_memory_info():
    """Return Win32 process memory counters structure as a dict."""
    counters = PROCESS_MEMORY_COUNTERS_EX()
    ret = GetProcessMemoryInfo(process, ctypes.byref(counters),ctypes.sizeof(counters))

    if not ret:
        raise ctypes.WinError()
    info = dict((name, getattr(counters, name))
                for name, _ in counters._fields_)
    return info

if __name__ == '__main__':
    import pprint

    cmd = "‪C://Program Files//Mozilla Firefox//firefox.exe"
    proc = subprocess.Popen(cmd)
    pid = proc.pid # <--- access `pid` attribute to get the pid of the child process.    
    PROCESS_TERMINATE = 1
    handle = win32api.OpenProcess(PROCESS_QUERY_INFORMATION | PROCESS_VM_READ, False, pid)

    result = get_memory_info(handle.handle)
    result_object = json.dumps(result, indent = 4) # convert dict to json
    print result_object 
```

# cordova - kineticjs 和 phonegap - 图像不会加载

> ID：13607393
> 
> 赞同：2
> 
> 时间：2012-11-28T14:28:27.510
> 
> 标签：cordova, kineticjs

我正在尝试将相机中的图像加载到新图像中并传递给 kineticjs 对象，但图像不会加载。谁能建议我哪里出错了。

```
function onPhotoDataSuccess(imageData) {
    var returnedImg = new Image();
    returnedImg.src = "data:image/jpeg;base64," + imageData;
    layer.clear();
    returnedImg.onload = function() {
        console.log('img loaded');
        mainImage = new Kinetic.Image({
            image: returnedImg,
            x: stage.getWidth() / 2 - 200 / 2,
            y: stage.getHeight() / 2 - 137 / 2,
            draggable: true,
            startScale: 1
        }); 
        layer.add(mainImage);
        stage.add(layer);
    };      
} 
```

非常感谢任何帮助。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T10:19:16.573

移动这条线

返回Img.src =“数据：图像/ jpeg；base64，”+ imageData；

在负载之下

# xml - xs:unique 匹配多个唯一的值

> ID：13607396
> 
> 赞同：0
> 
> 时间：2012-11-28T14:28:30.100
> 
> 标签：xml, xsd

据我所见，以下 XML 应该通过针对其下方的 XSD 的验证，因为所有“symbolName”值都是唯一的。但是，当我尝试验证它时，我收到以下错误

***身份约束“xxxxxxsdfsdfsdfsdf”的字段“symbolName”在元素“symbols”范围内匹配 9 次***

```
<levelSymbolCollection>
    <levelName>Simple</levelName>
    <symbols>
        <symbolName>Letter-A</symbolName>
        <symbolName>Letter-B</symbolName>
        <symbolName>Letter-C</symbolName>
        <symbolName>Letter-D</symbolName>
        <symbolName>Letter-E</symbolName>
        <symbolName>Letter-F</symbolName>
        <symbolName>Letter-I</symbolName>
        <symbolName>Letter-O</symbolName>
        <symbolName>Letter-U</symbolName>
    </symbols>
</levelSymbolCollection>

<xs:element name="levelSymbolCollection" maxOccurs="unbounded">
    <xs:complexType>
        <xs:sequence>
            <xs:element name="levelName" type="requiredString"/>
            <xs:element name="symbols">
                <xs:complexType>
                    <xs:sequence>
                        <xs:element name="symbolName" type="requiredString" maxOccurs="unbounded"/>
                    </xs:sequence>
                </xs:complexType>
            </xs:element>
        </xs:sequence>
    </xs:complexType>
    <xs:unique name="xxxxxxxxsdfsdfsdfsdf">
        <xs:selector xpath="symbols"></xs:selector>
        <xs:field xpath="symbolName"></xs:field>
    </xs:unique>
</xs:element> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T17:12:26.610

将“symbolName”添加到选择器，设置字段 xpath="."

```
<xs:element name="levelSymbolCollection" maxOccurs="unbounded">
    <xs:complexType>
        <xs:sequence>
            <xs:element name="levelName" type="requiredString"/>
            <xs:element name="symbols">
                <xs:complexType>
                    <xs:sequence>
                        <xs:element name="symbolName" type="requiredString" maxOccurs="unbounded"/>
                    </xs:sequence>
                </xs:complexType>
                <xs:unique name="xxxxxxxxsdfsdfsdfsdf">
                  <xs:selector xpath="symbolName"></xs:selector>
                  <xs:field xpath="."></xs:field>
                </xs:unique>
            </xs:element>
        </xs:sequence>
    </xs:complexType>
</xs:element> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:15:22.397

您显然对 xs:unique 的含义有些误​​解。您的声明说每个 symbolName 都必须有一个唯一的值，实际上，每个 symbolName 确实有一个唯一的值。

# python - python 乘法{如何用 dic 做？}

> ID：13607402
> 
> 赞同：-1
> 
> 时间：2012-11-28T14:28:44.363
> 
> 标签：python

**这就是我想要做的事情**：

小吃名称然后价格，打印名称，数量和总价......是否可以将名称与价格联系起来，然后我只能乘以价格？我试图做功能，但我最终错过了代码

** 问题 **：

如果我打印订单，它会显示 food_price 中的所有项目并更改所选项目的值......所以它实际上并没有乘以价格

**例如**：输入要添加的订单以添加：热狗您想要多少：2

然后当我打印订单时，它会显示整个列表：

奶油爆米花 L : 8

奶油爆米花 M : 7

花生 M&M's : 3.1

热狗：2（2成为热狗的价值“价格”）

```
 Please choose your order  :

 |#| **Food**         |Size       |Calories  |     Price |
 =========================================================
   Buttered Popcorn L    Large         1200     8$
   Buttered Popcorn M    Medium         910     7$
   Buttered Popcorn S    Small          650     5$
   Hot dog               Medium             305     5$

""" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:07:16.137

如果您希望您的食物可以通过代码访问，您应该将其组织为以代码为键，其余数据为值，例如

```
foods = { 1 : ("Snickers", "One size", 1200, 100) } 
```

然后你可以这样做：

```
for code, (name, size, calories, cents) in foods.iteritems():
    print "%s \t %s \t %s \t %s \t %s " % (code, name, size, calories, cents) 
```

这将打印出所有选项。

更好的是，您可以通过多种方式存储订单：

```
orders = []
orders.append((code, number)) 
```

或者

```
orders = {}
orders[code] = number 
```

然后就可以访问原始的数据了`food` `dict`。

# java - TreeViewer 对话框 java eclipse 不给树项子项

> ID：13607403
> 
> 赞同：2
> 
> 时间：2012-11-28T14:28:46.480
> 
> 标签：java, eclipse, treeview, treeviewer

我创建了一个自定义内容提供程序，它实现`ITreeContentProvider`了我的自定义模型，类似于：[Vogella Tutorial JFace](http://www.vogella.com/articles/EclipseJFaceTree/article.html#tutorialjfacetree)，它有类别和待办事项，待办事项作为类别的子项存储为类别中的列表。我正在使用 Eclipse 对话框`CheckedTreeSelectionDialog`，它应该与任何树对话框相同，我对其进行了扩展，以便能够在地图中获取选中的元素，但由于某种原因，我可以获取 level1 的树项，但不能获取它们的子项，我不明白为什么.

```
 public void createMapOfCheckedItems() {
    mapOfCheckedElements = new HashMap<Object, List<Object>>();
    for (TreeItem level1 : getTreeViewer().getTree().getItems()) {
     if (level1.getChecked()) {
      List<Object> checkedChildren = new ArrayList<Object>();
      for (TreeItem level2 : level1.getItems()) {
                if (level2.getChecked()) {
                    checkedChildren.add(level2.getData());
                }
            }
            mapOfCheckedElements.put(level1.getData(), checkedChildren);
        }
    }
} 
```

代码在上面，但`level1.getItems()`返回一个空树项，但选择对话框正确显示了父母和孩子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T13:55:04.327

阅读[TreeItem#getItems()](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/widgets/TreeItem.html#getItems%28%29) API Javadoc 我发现了这个：

> 返回一个（可能为空的）TreeItems 数组，它们是接收者的直接项子项。注意：这不是接收器用来维护其项目列表的实际结构，因此修改数组不会影响接收器。

我对 SWT API 的了解不是太广，但我的猜测是使用[TreeViewer#getItems(org.eclipse.swt.widgets.Item)](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/jface/viewers/TreeViewer.html#getItems%28org.eclipse.swt.widgets.Item%29)方法可以解决问题，因为查看器应该维护所有节点。

因此，您的代码应类似于：

```
if (level1.getChecked()) {
      List<Object> checkedChildren = new ArrayList<Object>();
      for (Item level2 : getTreeViewer().getItems(level1)) {
            if (((TreeItem)level2).getChecked()) {
                 checkedChildren.add(level2.getData());
            }
      }
      mapOfCheckedElements.put(level1.getData(), checkedChildren);
 } 
```

# php - Wordpress 特色图片仅在概览中

> ID：13607404
> 
> 赞同：0
> 
> 时间：2012-11-28T14:28:46.850
> 
> 标签：php, wordpress

我正在为 Wordpress 使用一个名为“表达式”的模板，效果很好。我只是想稍微调整一下。我有一个显示我所有博客文章的页面，当然，如果您单击它，每个博客文章都有自己的概述。

在您发表的每篇博文中，您都可以设置特色图片。此图像显示在概述页面上，以及 1 篇博文的每个详细视图上。我正在尝试找到一种仅在所有博客的概述页面上显示此特色图像的方法，而不是在博客文章的详细视图上显示此特色图像。

有没有办法做到这一点？

我尝试通过添加以下内容来编辑 post-template.php 中的代码：

```
ispage('blog') 
```

完整代码：

```
if(has_post_thumbnail() && !$hide_thumbnail && !is_page('blog')){ ?>
    <div class="blog-post-img">
        <?php if(!is_single()){?>
    <a href="<?php the_permalink(); ?>"> 
    <?php }
    $img_id=$pex_page->layout=='full'?'post_box_img_full':'post_box_img';
    the_post_thumbnail($img_id);

     if(!is_single()){
     ?>
    </a>
    <?php } ?>
    </div>
    <?php 
} 
```

这行得通，但两个特色图像都将消失。这不是我想要的。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:48:13.847

终于明白了

你必须使用：

```
is_single(); 
```

代替 ：

```
is_page(); 
```

不管怎么说，还是要谢谢你。

# objective-c - 按下按钮时播放随机声音

> ID：13607405
> 
> 赞同：-6
> 
> 时间：2012-11-28T14:28:47.090
> 
> 标签：objective-c, ios, xcode

> **可能重复：**
> [在音板应用程序上播放随机声音](https://stackoverflow.com/questions/13513525/playing-random-sounds-on-a-soundboard-app)

我正在尝试制作一个应用程序，当我按下按钮时，它每次都会播放随机声音。我总共有 20 种声音，但问题是我不是最好的编码器，我真的可以在这方面提供一些帮助。

第一个问题：这可能吗？

第二个问题：您有任何适用于此的代码吗？

我的问题已编辑请注意，当我输入此内容时，我并没有这么粗鲁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:46:44.180

在情节提要中创建视图。向它添加一个按钮，它调用一个例程。让这个例程得到一个随机数（arc4random）并使用一个开关来播放歌曲。

# c# - 为什么VB6.0窗体显示为C#窗体？

> ID：13607406
> 
> 赞同：37
> 
> 时间：2012-11-28T14:28:49.683
> 
> 标签：c#, winforms, vb6

我有一个具有表单的 COM DLL。此 DLL 由 C# 应用程序使用。我为我的 C# 应用程序启用了视觉样式。我不希望将视觉样式应用于 COM DLL 的表单。但是当我运行我的应用程序并启动 COM DLL 的表单时，它应用了视觉样式。我将如何预防？

许多人建议使用清单。但是，无论我在互联网上看到什么清单，它们都使用通用控件 6\. 如何创建使用通用控件 5.0 的清单？有些人还建议使用 ActivationContext。但是，这也需要使用通用控件 5.0 的正确清单，对吗？

请提出一些建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T16:22:11.403

如果您有窗体的窗口句柄（来自 COM DLL），那么您可以使用 Win32 API 禁用该窗体上的视觉样式：

```
SetWindowTheme( hwnd, "", "" ); 
```

我相信你必须 P/Invoke API。这是定义：

```
[DllImport("uxtheme.dll", ExactSpelling=true, CharSet=CharSet.Unicode)]
public static extern int SetWindowTheme(
   IntPtr hWnd,
   String pszSubAppName,
   String pszSubIdList); 
```

# c# - 删除字符串中的所有文本，直到达到多个字符匹配

> ID：13607411
> 
> 赞同：-2
> 
> 时间：2012-11-28T14:29:06.190
> 
> 标签：c#

我想在匹配后删除所有内容：

```
/** 
```

我的字符串是：

> /r/_ylt=A0oG7lyFHLZQjSEAWltXNyoA;_ylu=X3oDMTE0NGYxbHRnBHNlYwNzcgRwb3MDOQRjb2xvA2FjMgR2dGlkA1ZJUDA0OV83Nw--/SIG=11pqblim6/EXP=1354140933/**http%3a//www.hellomagazine.com/royalty/" target="_blank" data-bk="5254.1" dirtyhref ="/r/_ylt=A0oG7lyFHLZQjSEAWltXNyoA;_ylu=X3oDMTE0NGYxbHRnBHNlYwNzcgRwb3MDOQRjb2xvA2FjMgR2dGlkA1ZJUDA0OV83Nw--/SIG=11pqblim6/EXP=1354140933/**http%3a//www.hellomagazine.

我想删除之前的所有内容`/**`

我可以让它匹配 1 个字符，但是我怎样才能匹配多个字符呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T14:31:34.150

你试过什么？您如何匹配一个字符，为什么不能将其更改为多个字符？字符串操作被完美记录。

你需要这样的东西：

```
string input = "your string/**result";
string separator = "/**";
int startPos = input.IndexOf(separator);

if (startPos == -1)
{
    return input;
}

return input.Substring(startPos + separator.Length); 
```

`+ separator.Length`如果您也想返回分隔符，请省略。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T14:37:38.843

一个简单`Substring`的`IndexOf`作品：

```
string output = input.Substring(input.IndexOf(@"/**") + @"/**".Length); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T14:31:49.140

```
var inputstr = "your input string";
int index = inputstr.IndexOf(@"/**");
if (index > 0)
{
  var result = inputstr.Substring(index);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T14:34:25.357

假设您的字符串被称为`myString`

```
myString = myString.Substring(myString.IndexOf("/**") + 1) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T14:35:06.863

```
class Program
{
    static void Main(string[] args)
    {
        string test="/r/_ylt=A0oG7lyFHLZQjSEAWltXNyoA;_ylu=X3oDMTE0NGYxbHRnBHNlYwNzcgRwb3MDOQRjb2xvA2FjMgR2dGlkA1ZJUDA0OV83Nw--/SIG=11pqblim6/EXP=1354140933/**http%3a//www.hellomagazine.com/royalty/\" target=\"_blank\" data-bk=\"5254.1\" dirtyhref=\"/r/_ylt=A0oG7lyFHLZQjSEAWltXNyoA;_ylu=X3oDMTE0NGYxbHRnBHNlYwNzcgRwb3MDOQRjb2xvA2FjMgR2dGlkA1ZJUDA0OV83Nw--/SIG=11pqblim6/EXP=1354140933/**http%3a//www.hellomagazine.com/royalty/";
        var value=test.Split(new string[]{"/**"},StringSplitOptions.None);
        //continue working with value[0], value[0] etc
    }
} 
```

# tridion - Tridion 工作流插件在 Microsoft Visio 2010 中不活动

> ID：13607412
> 
> 赞同：4
> 
> 时间：2012-11-28T14:29:15.567
> 
> 标签：tridion, tridion-2011

我们在 Tridion 2011 SP1 CMS 服务器上安装了 Microsoft Visio 2010 Premium。我们还安装了 Tridion 2011 SP1 安装程序中提供的 Tridion Workflow 设计器插件。当我们尝试在 Visio 2010 中访问此加载项时，它显示在“非活动加载项列表”下 如何激活此加载项以便我们将工作流上传到 CMS 服务器并使用它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T14:44:23.197

第一步，确保它已正确启用：

1.- 转到**工具**菜单，单击**信任中心**，然后单击**加载项。**

2.- 在加载项框中，在底部选择**COM 加载项**，然后单击**执行**

**3.- 选中TCM 工作流**插件的复选框

如果这不起作用，请使用信任中心的其他选项，因为其中有一些设置，阻止它被加载

# github - 使用 GitHub 监听远程服务器上文件的更改

> ID：13607420
> 
> 赞同：0
> 
> 时间：2012-11-28T14:29:31.493
> 
> 标签：github, remote-server

我知道有很多关于在远程服务器上运行 GitHub 的帖子，但我找不到任何我理解或可以关注的帖子。命令行的东西和所有这些关于 SSH 的讨论完全让我感到困惑，所以我希望有一个分步的答案，它实际上是为一个假人编写的，并希望提供一个简单的解决方案（我的手指和脚趾交叉了）。

我的场景：

我使用 Statamic 作为 CMS 构建了一个站点，它使用文本文件来管理站点的内容。我还有一个 GitHub 存储库，其中包含该站点的大部分文件： [https ://github.com/katrinkerber/katrinkerber](https://github.com/katrinkerber/katrinkerber)

我正在使用 OSX 上的 GitHub 应用程序将我对本地 CSS 或 HTML 文件所做的任何更改推送到远程 Github 存储库。这就是我对 Git 的基本理解。

每当通过 CMS 的控制面板编辑现有内容或发布新页面/条目时，都会在托管站点的服务器上的 *_content* 文件夹中更新或创建文件。

我想要的是让 Github 监听并跟踪服务器上所做的任何更改，尤其是 *_content* 文件夹。

我的尝试之一是将本地文件中的*.git*文件夹上传到我的服务器并更改*主远程存储库*路径，但这不起作用。

我需要做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T03:41:54.480

真正运行 Git（版本控制系统，而不是 Web 应用程序/网络的 GitHub）的唯一方法是通过 SSH。

这是一篇好文章： http: [//git-scm.com/book/en/Getting-Started-Installing-Git#Installing-on-Linux](http://git-scm.com/book/en/Getting-Started-Installing-Git#Installing-on-Linux)

如果您启动并运行它，这是设置部署的好方法：[http ://blog.ekynoxe.com/2011/10/22/automated-deployment-on-remote-server-with-git/](http://blog.ekynoxe.com/2011/10/22/automated-deployment-on-remote-server-with-git/)

# c# - .NET checkbox.Checked 总是返回 false

> ID：13607422
> 
> 赞同：2
> 
> 时间：2012-11-28T14:29:33.387
> 
> 标签：c#, .net, checkbox, checked

我是 .NET 的新手，我的复选框有问题。即使它们被选中，它们都返回 false。这是我的asp代码

```
 <asp:GridView ID="gvGeneros1" runat="server" class="divTable" 
        AutoGenerateColumns="False" DataKeyNames="idgenero" CssClass="table">
        <Columns>
            <asp:BoundField DataField="nome" HeaderText="Gênero" SortExpression="nome" >
            <ControlStyle Width="200px" />
            <ItemStyle Width="200px" />
            </asp:BoundField>
            <asp:TemplateField AccessibleHeaderText="Check">
                <ItemTemplate>
                    <asp:CheckBox ID="checkGenero" runat="server" />
                </ItemTemplate>
            </asp:TemplateField>
        </Columns>
    </asp:GridView> 
```

这是我的 C# 代码

```
DataSet dsDivided;

protected void Page_Load(object sender, EventArgs e)
{
    Music musicbll = new Music();
    DataSet dsGeneros = musicbll.getGenders();

    int size = dsGeneros.Tables[0].Rows.Count;
     dsDivided = null;

        // Divide in two DataTable
        dsDivided = Tools.SplitDataTableInTwo((DataTable)dsGeneros.Tables[0], size / 2);

    gvGeneros1.DataSource = dsDivided.Tables["FirstSet"];
    gvGeneros1.DataBind();

    for (int i = 0; i < gvGeneros1.Rows.Count; i++)
    {
        ((CheckBox)gvGeneros1.Rows[i].Cells[1].Controls[1]).Checked=false;
    }

}

protected void btGravarPrefs_Click(object sender, EventArgs e)
{
    DataTable dt = new DataTable("generos");
    dt.Columns.Add("idgenero", typeof(int));
    dt.Columns.Add("active", typeof(bool));

    for (int i = 0; i < gvGeneros1.Rows.Count; i++)
    {
        int idCliente = (int)dsDivided.Tables[0].Rows[i][0];
         bool check = ((CheckBox)gvGeneros1.Rows[i].Cells[1].Controls[1]).Checked; //always false
        dt.Rows.Add(new object[] { idCliente, check});
    }
} 
```

}

我不知道该尝试更多，我到处搜索，似乎是正确的。谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-28T14:33:16.820

我认为你应该`Data binding` 用`if (!Page.IsPostBack)`

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
    { 
       //Bind your datasource here
    }
} 
```

# linux - 在 Clearcase 中查找最近的签出并将文件路径提供给 xlsvtree 以查看文件历史记录

> ID：13607423
> 
> 赞同：1
> 
> 时间：2012-11-28T14:29:33.393
> 
> 标签：linux, sed, awk, grep, clearcase

我的目标是查询某个VOB和开发人员，找到他/她从X日期修改的文件，并将它们一一传递给版本树程序。

在这里，我可以列出自 11 月 20 日以来我的所有工作： `cleartool find /vobs/wran_cm/wran_cm_bsim -version "{created_by(egronei) && created_since(20-Nov-12)}" -print`

其输出为：

```
/vobs/wran_cm/wran_cm_bsim/common-src/client/plugins/com.bsim.ui/src/main/java/com/bsim/ui/tabs/addnode/common/AddBatchTreeComponent.java@@/main/dev/o13 .2_ld/1
/vobs/wran_cm/wran_cm_bsim/common-src/client/plugins/com.oss.bsim.ui/src/main/java/com/bsim/ui/tabs/addnode/common/AddBatchTreeComponent.java@@/main/dev /o13.2_ld/0
/vobs/wran_cm/wran_cm_bsim/common-src/client/plugins/com.oss.bsim.ui/src/main/java/com/bsim/ui/tabs/addnode/common/AddNodeTabBase.java@@/main/at_ossrc_dev /dev/o13.2_ld/1
/vobs/wran_cm/wran_cm_bsim/common-src/client/plugins/com.oss.bsim.ui/src/main/java/com/bsim/ui/tabs/addnode/common/AddNodeTabBase.java@@/main/at_ossrc_dev /dev/o13.2_ld/0
/vobs/wran_cm/wran_cm_bsim/common-src/client/plugins/com.bsim.ui/src/main/java/com/bsim/ui/tabs/addnode/common/AddNodeTreeComponent.java@@/main/at_ossrc_dev/dev /o13.2_ld/1
/vobs/wran_cm/wran_cm_bsim/common-src/client/plugins/com.bsim.ui/src/main/java/com/bsim/ui/tabs/addnode/common/AddNodeTreeComponent.java@@/main/at_ossrc_dev/dev /o13.2_ld/0
/vobs/wran_cm/wran_cm_bsim/common-src/client/plugins/com.bsim.ui/src/main/java/com/bsim/ui/tabs/addnode/common/ResultsTab.java@@/main/at_ossrc_dev/dev /o13.2_ld/1
/vobs/wran_cm/wran_cm_bsim/common-src/client/plugins/com.bsim.ui/src/main/java/com/bsim/ui/tabs/addnode/common/ResultsTab.java@@/main/at_ossrc_dev/dev /o13.2_ld/0

```

我可以使用 grep 过滤一行并仅将该文件路径传递给版本树，但理想情况下，我希望它以某种方式成为啤酒并将文件名逐个传递（用于代码审查）。这是我的 grep 尝试： `cleartool find /vobs/wran_cm/wran_cm_bsim -version "{created_by(egronei) && created_since(20-Nov-12)}" -print | grep -i "language.properties" | xlsvtree`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:46:57.490

传递用 a 找到的文件的常用方法`cleartool find`是使用`$CLEARCASE_PN`变量：

```
ct find ... -exec 'cleartool lsvtree "$CLEARCASE_PN"' 
```

[您可以在此IBM 页面](http://www-01.ibm.com/support/docview.wss?uid=swg21124425)中找到示例：

> 查找带有任何标签的所有元素：
> UNIX/Linux：

```
cleartool find . -type f -exec 'cleartool lsvtree -a $CLEARCASE_PN' | grep "("

./hello.c@@/main/1 (LABEL100, LABEL99, LABEL98, LABEL97)
./foo.xml@@/main/BR1/1 (REL2)
./bar.o@@/main/1 (REL1) 
```

使用相同的机制 ( `$CLEARCASE_PN`)，您可以改为将该列表放入文件中并处理该文件（比直接从 find 命令处理它更容易）。

# ios - 发现在网络上安装了我的应用程序的计算机

> ID：13607424
> 
> 赞同：2
> 
> 时间：2012-11-28T14:29:37.577
> 
> 标签：ios, windows, networking, multicast, bonjour

我正在尝试为 iOS 构建一个应用程序，它可以连接到运行 macOS 或 Windows 的计算机，并控制这些计算机上的一些东西。另一个应用程序将安装在这些计算机上，以便 iOS 上的应用程序可以连接到它们。但首先我需要发现网络中安装并运行我的应用程序的那些计算机。这样做的好方法是什么？我考虑过使用广播、多播或 bonjour。还有其他选择吗？哪一个最适合我的情况？

我正计划为 macOS 和 windows 做两个不同的应用程序，一个使用objective c，另一个使用c#，所以网络的东西应该对这两者都可用。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T00:20:27.930

到目前为止，最简单的选择是使用 IP/UDP 广播数据包。计算机上的应用程序（运行任何操作系统）都可以坐在那里侦听预定义的 UDP 端口（例如 9999），当 iOS 设备想要“扫描”网络时，它将发送一个 IP/UDP 广播数据包，其中包含目标端口为 9999。收到广播数据包后，计算机上的应用程序可以响应，因为它现在知道 iOS 设备的 IP 地址，您可以从那里获取内容。

处理计算机离开网络的最简洁方法是让计算机上运行的应用程序将此事实传达给 iOS 设备，因为它已经知道 iOS 设备的 IP 地址。但是，如果保留当前的计算机列表至关重要，那么某种轮询机制是不可避免的，因为计算机可能因任何原因而崩溃，而没有机会发送再见消息。

多播可以按如下方式使用：计算机定期为预定义的多播组（例如 224.1.1.1）发送 IGMP 连接，当 iOS 设备想要“扫描”网络时，它会发送发往 224.1.1.1 的多播 UDP 数据包。由于计算机已经加入了 224.1.1.1 的多播组，因此计算机将收到多播 UDP 数据包，然后计算机可以开始与 iOS 设备通信，因为 IP 地址是已知的。然而，这似乎过于复杂，并没有真正提供任何优势。使用多播的全部意义在于节省带宽，但节省的带宽量将是微不足道的。除非您打算从 iOS 设备向所有计算机发送大量相同的数据，否则根本没有理由走这条路。

至于 Bonjour，不幸的是我无法发表评论，因为我没有经验，但我仍然会投票支持简单的广播以保持平台独立......嗯，至少在计算机方面。:)

# postgresql - 使用 postgres 服务器端游标进行缓存

> ID：13607425
> 
> 赞同：8
> 
> 时间：2012-11-28T14:29:42.683
> 
> 标签：postgresql

为了加快基于大型 postgres 集合的页面的页面生成，我们将查询结果缓存在 memcache 中。但是，对于非常大或很少访问的不可变集合，我想知道在 postgres 中保存服务器端游标是否是一种可行的替代缓存策略。

这个想法是，在集合中间提供页面后，“下一个”和“上一个”链接比集合中其他地方的随机查询更有可能被使用。我可以在附近有一个光标“WITH HOLD”以避免查询的（看似不可避免的）大量启动成本吗？

我想知道服务器上的资源消耗。如果集合是不可变的，那么保存游标应该不需要很多资源，但我想知道 postgres 在这方面的优化程度如何。任何指向进一步文档的链接将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T16:04:39.990

之前已经对此做出了一个很好的回答[Best way to fetch the continuous list with PostgreSQL in web](https://stackoverflow.com/questions/7746920/best-way-to-fetch-the-continuous-list-with-postgresql-in-web)

问题是相似的，本质上你在服务器上存储了一个带有分页令牌和过期时间的 PK 列表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T20:00:32.650

你会遇到很多问题。

*   您必须确保同一用户获得相同的 sql 连接
*   您必须制定清理策略
*   光标将暂停真空操作。
*   您必须说服连接池不清除游标
*   可能还有其他我没有提到的问题。

简而言之：不要这样做。如何在后台预先计算下一页/上一页，并将其存储在 memcached 中？

# ios - 此捆绑包无效。UIRequiredDeviceCapabilities 中提供了未知的设备能力值

> ID：13607428
> 
> 赞同：0
> 
> 时间：2012-11-28T14:29:57.497
> 
> 标签：ios, xcode

当我尝试将我的应用程序发布到 App Store 时，我收到一条错误消息：

> 此捆绑包无效。Info.plist 的 UIRequiredDeviceCapabilities 键中提供了一个未知的设备能力值。确保 UIRequiredDeviceCapabilities 的值是一个数组或字典，包含信息属性列表键参考中描述的有效值。

有人可以帮我解决这个问题吗？

Plist 看起来像这样：

[http://j.mp/V2B8lk](http://j.mp/V2B8lk)

列表：

```
 <?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>CFBundleDevelopmentRegion</key>
    <string>en</string>
    <key>CFBundleDisplayName</key>
    <string>AppName</string>
    <key>CFBundleExecutable</key>
    <string>${EXECUTABLE_NAME}</string>
    <key>CFBundleIconFiles</key>
    <array>
        <string>114.png</string>
        <string>icon.png</string>
    </array>
    <key>CFBundleIcons</key>
    <dict>
        <key>CFBundlePrimaryIcon</key>
        <dict>
            <key>CFBundleIconFiles</key>
            <array>
                <string>114.png</string>
                <string>icon.png</string>
            </array>
            <key>UIPrerenderedIcon</key>
            <true/>
        </dict>
    </dict>
    <key>CFBundleIdentifier</key>
    <string>company.appname</string>
    <key>CFBundleInfoDictionaryVersion</key>
    <string>6.0</string>
    <key>CFBundleName</key>
    <string>${PRODUCT_NAME}</string>
    <key>CFBundlePackageType</key>
    <string>APPL</string>
    <key>CFBundleShortVersionString</key>
    <string>1.0</string>
    <key>CFBundleSignature</key>
    <string>????</string>
    <key>CFBundleVersion</key>
    <string>1.0</string>
    <key>LSRequiresIPhoneOS</key>
    <true/>
    <key>UIPrerenderedIcon</key>
    <true/>
    <key>UIRequiredDeviceCapabilities</key>
    <false/>
    <key>UIStatusBarTintParameters</key>
    <dict>
        <key>UINavigationBar</key>
        <dict>
            <key>Style</key>
            <string>UIBarStyleDefault</string>
            <key>Translucent</key>
            <false/>
        </dict>
    </dict>
    <key>UISupportedInterfaceOrientations</key>
    <array>
        <string>UIInterfaceOrientationPortrait</string>
    </array>
</dict>
</plist> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:50:32.690

所需的*设备功能*不应该是*Boolean*。它应该是一个数组或字典。

我不知道你是否可以在 plist 编辑器中修复它。如果没有，您可以在文本编辑器中打开文件并像这样进行更改：

```
<key>UIRequiredDeviceCapabilities</key>
<array></array> 
```

**更新**

如果您不使用它，最好删除*所需的设备功能条目。*

# jquery - Fancybox 2 - iframe 中的图像拉伸

> ID：13607429
> 
> 赞同：0
> 
> 时间：2012-11-28T14:30:00.197
> 
> 标签：jquery, fancybox-2

我在 iframe 中使用 fancybox。当我尝试用fancybox 打开图像时，fancybox 给出了错误的尺寸——它给出了窗口宽度而不是图像宽度——并且fancybox 内的图像正在拉伸这个尺寸。

例如：图片尺寸：2592x3872。Fancybox 可扩展到 853x395。

我怎样才能解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T18:55:07.633

**您能澄清一下iframe 中的 fancybox 是**什么意思吗？

...这是否意味着您`type: "iframe"`在 API 选项中使用？

...或者这是否意味着您正在从页面内的 iframe 中触发 fancybox？（或两者？）。

无论如何，请尝试将`autoSize: false`和添加`fitToView: false`到您的 API 选项中，例如：

```
$(".fancybox").fancybox({
    autoSize: false,
    fitToView: false
}); 
```

# php - 在 PHP 中加入三个 MS SQL 表以显示随机产品

> ID：13607430
> 
> 赞同：0
> 
> 时间：2012-11-28T14:29:59.900
> 
> 标签：php, sql, sql-server, join

我试图在我正在创建的商店中有一个部分来显示来自该类别 ID 的 5 个随机产品。

首先，每个类别都有一个ID，还有一组Sub Catrgories，每个Sub Cat都有一个ID，每个Sub Cat里面都有一些产品。每个产品也有一个 ID。

Products 表包含 ProductID 和 SubCatID。SubCat 表包含 SubCatID 和 CatID Cat 表仅包含 CatID。

所以我需要通过 CatID 显示 5 个随机产品。我可以使用类似于以下的查询来获取随机产品：

```
$randomprod = mssql_query("SELECT TOP 5* FROM Products WHERE SubCatID = '1' ORDER BY NEWID()");
while ($echorand = mssql_fetch_array($randomprod)) { 
```

我需要一种方法来加入表格，以便我可以显示某个 CatID 下的所有产品，但我发现这很困难，因为我的 Products 表不包含 CatID。我知道有很多连接，但对 PHP 来说相当新，对 MS SQL 来说甚至更新。谁能告诉我什么加入是最好的，或者请指出正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:34:50.717

将产品连接到子类别，将子类别连接到类别，如下所示：

```
SELECT TOP 5 Products.Name, SubCatergory.Name, Category.Name
FROM Products
INNER JOIN SubCatergory ON Products.SubCatID = SubCatergory.SubCatID
INNER JOIN Catergory ON SubCatergory.CatID = Category.CatID
WHERE Category.CatID = 1
ORDER BY NEWID() 
```

我`INNER JOIN`在上面的例子中使用过。

# box2d - 在 box2d 中，如何在保持所有动量、角度、位置等的同时扩展/收缩与末端相连的身体的关节？

> ID：13607431
> 
> 赞同：0
> 
> 时间：2012-11-28T14:30:00.633
> 
> 标签：box2d, physics, 2d-games

请看示意图：

[摆动图](http://i46.tinypic.com/2zhmsgo.png)

在 box2D 中，我试图想出一种方法可以将旋转臂连接到蓝色盒子并让旋转臂伸展或收缩。

蓝色框设置为使用棱柱接头向左和向右移动以充当轨道/轨道。当蓝色框左右移动时，动量将导致摆臂摆动。我有这个工作正常。

我的问题是我无法可靠地想出一种方法来将底部的绿色盒子上下摆动臂。如果玩家向上按压，我希望底部的绿色框会向上移动摆臂。如果玩家停止向上按压，则底部的绿色框将停止并保持在摇臂上的任何位置。我想这样做，但要保持摆臂的动力。

我只会在蓝色框和底部绿色框之间绘制一条线，因此看起来它正在扩展或收缩。

我尝试过棱柱关节和距离关节，但是当我为关节设置新的限制或距离时，它没有流体运动。关节的动作不够刚性。例如，当缩短棱柱关节时，我不知道如何在新关节长度的末端重新定位底部绿色框，但仍保持其先前的动量和旋转。

有任何想法吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-21T03:32:50.257

我很难在没有看到您已经完成的工作的情况下给您代码。但是解决您的问题的方法是使用...数学。

计算钟摆摆动的速度实际上是一个[众所周知的问题](http://en.wikipedia.org/wiki/Pendulum#Period_of_oscillation)。“周期”是钟摆完成一次上下摆动所需的时间，控制钟摆速度的方程为：

```
T = 2*PI*sqrt(L/g)    where "L" is the length of the pendulum 
```

因此，如果您可以通过这种方式对您的问题进行参数化，当用户将绿色框“向上”移动时，该绿色框将减少`L`，振荡周期 ( `T`) 将下降，因此钟摆将加速。

作为旁注，如果您希望蓝色框能够四处移动，那么您所拥有的就是[复摆](http://en.wikipedia.org/wiki/Pendulum#Compound_pendulum)，您的摆振荡周期方程将修改为：

```
T = 2*PI*sqrt(I/mgR)    where "R" is the adjusted length of the pendulum 
```

其中 I 是盒子的转动惯量，等于：

```
I = (m/6) * h^2         where h is the length of one side of the blue box 
```

# java - 透明地记录 java.lang.Throwable 的实例化

> ID：13607433
> 
> 赞同：4
> 
> 时间：2012-11-28T14:30:12.200
> 
> 标签：java, exception-handling, instrumentation

我想实现一个自动异常日志记录服务，它收集整个应用程序中抛出的所有异常/错误。最优雅的方式是利用“投掷”或 Throwable 的实际实例化。

经过几个小时的研究，我得出以下结论：

1.  不知何故“进入”“投掷”是不可能的
2.  使用 Instrumentation（或 cglib）注入代码可以解决问题
3.  扩展类加载器并覆盖 newInstance 方法可以解决问题

到目前为止，我认为选项 2 将是最佳选择，但我担心我可能会错过一个更简单的解决方案。

# excel - 两个数字相同时的下一个最大值

> ID：13607434
> 
> 赞同：1
> 
> 时间：2012-11-28T14:30:13.173
> 
> 标签：excel

我正在尝试根据以下公式查找单元格：

=vlookup(large($A$2:$A$10,1),$A$2:$C$10,3,false)*最大值* =vlookup(large($A$2:$A$10,2),$A $2:$C$10,3,false)*为第二高值*

*等等*

我的问题是当公式的这一部分中有两个值相同时“（大（$A$2:$A$10,2）但查找值不同。例如，当系列看起来像这样时 -

最多 10 个（汽车）、2 个（卡车）、2 个（厢式货车）、4 个（摩托车）

我返回 (Car), (Motorcycle), (Truck), (Truck) ... 而不是 (Car), (Motorcycle), (Truck), (Van)。

有谁知道使用公式或 vba 的解决方案？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:58:15.403

...我能想到的唯一方法（但我很想看看其他人的解决方案）是创建一个额外的“帮助列”。

因此，假设您的数据如下所示：

```
ColA          ColB             ColC           ColD     
10            [whatever]       Car            [Formula]
2             [whatever]       Truck          [Formula]
2             [whatever]       Van            [Formula]
4             [whatever]       Motorcycle     [Formula] 
```

我会在 A 列和 B 列之间添加一个新列，并输入如下公式

## 在（新）B2 中：

```
=A2 + COUNTIF($A$2:A2,A2)/100 
```

现在，当您向下拖动它时，它会将每个重复值增加 0.01，如下所示：

```
ColA        ColB         ColC             ColD           ColE     
10          10.01        [whatever]       Car            [Formula]
2           2.01         [whatever]       Truck          [Formula]
2           2.02         [whatever]       Van            [Formula]
4           4.01         [whatever]       Motorcycle     [Formula] 
```

然后只需更新您的 Vlookup 公式以开始在 B 列而不是 A 列中查找。

希望这是有道理的...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T15:36:16.560

您不能在 A 列上对表格进行降序排序吗？那么您的 Excel 公式可能是：

```
=vlookup($A2,$A2:$C$10,3,false) 
=vlookup($A3,$A3:$C$10,3,false)
=vlookup($A4,$A4:$C$10,3,false) 
```

实际上，比这更容易，您的公式可能只是：

```
=$C2
=$C3 
```

# mongodb - MapReduce 以随机顺序将项目插入新集合

> ID：13607440
> 
> 赞同：0
> 
> 时间：2012-11-28T14:30:38.033
> 
> 标签：mongodb, mapreduce

我有一些文件看起来像：

```
{
  _id: 3, 
  key: 3, 
  stuff: "Some data"
} 
```

有些文件也有`signUpDate`

我们可以为演示目的填充一个集合，如下所示：

```
for(i=1; i<=100000; i++){
if(i%3===0)
     db.numbers.insert({_id:i, key:i, stuff:"Some data", signUpDate: new Date()});
else
     db.numbers.insert({_id:i, key:i, stuff:"Some data"});
} 
```

...所以三分之一的文件有一个 signUpDate

我要做的是创建一个map reduce函数，该函数获取所有文档，其中signUpDate不为null，并将它们插入一个单独的集合中，**随机排序**

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:07:07.877

好的，这是一个有效的解决方案：

使用 mongoshell：

首先，我们填充数据：

```
for(i=1; i<=100000; i++){
if(i%3===0)
     db.numbers.insert({_id:i, key:i, stuff:"Some data", signUpDate: new Date()});
else
     db.numbers.insert({_id:i, key:i, stuff:"Some data"});
} 
```

所以现在，我们有三分之一的数据带有 signUpDate。

现在，一个超级简单的 mapreduce：

```
m = function() {emit(this._id, Math.random());}
r = function(key, values){}

db.numbers.mapReduce(m,r, {out: "randomlyOrdered", query: { signUpDate: { $ne : null } }}); 
```

接下来，使用 ensureIndex 来加速排序：

```
db.randomlyOrdered.ensureIndex({"value":1}); 
```

现在，找到数字（随机排序）

```
db.randomlyOrdered.find({}, {"_id":1}).sort({"value":1}); 
```

# asp.net - ASP.NET - 将应用程序部署到本地 IIS

> ID：13607451
> 
> 赞同：0
> 
> 时间：2012-11-28T14:31:08.750
> 
> 标签：asp.net, iis-6

有一个基于 Intranet 的 ASP.NET 应用程序部署到服务器 (IIS) 和一组客户端（大约十个）。然后，最终用户可以决定连接到本地应用程序（部署到他们的本地计算机）或服务器版本。我不明白这样做的原因。我的问题是：这是常见的做法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T14:40:33.583

是的，验证应用程序的性能是一种常见的做法。每个客户端都有自己的设置，并且根据流程，应用程序不应在任何类型的环境中中断。放置服务器版本和本地版本总是有益的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T14:39:58.630

如果客户端是笔记本电脑，并且应用程序支持断开连接的数据集和同步，那将是有意义的。通常，当客户端计算机脱离网络以在远程工作站点使用时，您会看到类似的情况。

# git - Git 工作流：这应该怎么做？

> ID：13607455
> 
> 赞同：1
> 
> 时间：2012-11-28T14:31:28.773
> 
> 标签：git

对于我的大多数场景，git flow 都做得很好。但是，鉴于以下情况（按时间顺序），我不确定前进的最佳方式是什么：

1.  版本 1.0 被推送到生产环境（使用“git flow release”完成）
2.  新功能和错误修复的发布后开发在开发分支中完成
3.  1.0 版中出现了一些主要错误和一些缺失的需求，客户决定他们不能等待下一个主要版本，但是除了**一些**应该做的工作之外，其中一些错误/功能已经在开发分支中得到解决等待下一个版本。

如果我们有一个水晶球，我相信我们应该将更新应用为热修复而不是在开发分支中，但现在为时已晚。如果我们启动一个修补程序（关闭主分支），我们可以从字面上复制并粘贴分支之间的适当更新（粗略），但是当我们合并分支时（在某些时候），我们最终会遇到一些令人讨厌的冲突。

在这种特殊情况下，将头痛控制在最低限度的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T14:44:09.323

创建一个修补程序分支，然后使用“git cherry-pick”从您的开发分支中提取特定更改。

```
git cherry-pick [commitid] 
```

如果您将来进行一般合并，那么精心挑选的提交将不会重复或发生冲突，git 足够聪明，可以解决它。

# joomla - 在 Joomla 中扩展 JModel

> ID：13607456
> 
> 赞同：1
> 
> 时间：2012-11-28T14:31:31.853
> 
> 标签：joomla, joomla2.5

`JModel / JModelLegacy`是否可以在不更改源代码的情况下以某种方式添加一些我自己的方法？例如来自控制器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:12:42.743

如果你想直接添加它，`JModel / JModelLegacy`那么没有。

如果您构建一个组件，那么`JControllerLegacy / JController`当您在 controller.php 文件中构建您的组件时进行扩展。但这当然是特定于您的组件的。它不能被其他组件使用

# c# - 立面设计模式

> ID：13607458
> 
> 赞同：0
> 
> 时间：2012-11-28T14:31:37.983
> 
> 标签：c#, unit-testing, design-patterns, tdd, facade

最近我一直在尝试遵循 TDD 方法，这会产生很多子类，以便可以轻松地模拟依赖项等。

例如，我可以说 a`RecurringProfile`它又具有可以应用于它的方法/操作，例如`MarkAsCancel`、`RenewProfile`、`MarkAsExpired`等。由于 TDD，这些被实现为“小”类，例如`MarkAsCancelService`等。

为可以在 a 上执行的各种方法/操作创建一个“外观”（单例）是否有意义`RecurringProfile`，例如具有一个 class `RecurringProfileFacade`。这将包含方法，这些方法将代码委托给实际的子类，例如：

```
public class RecurringProfileFacade
{
    public void MarkAsCancelled(IRecurringProfile profile)
    {
        MarkAsCancelledService service = new MarkAsCancelledService();
        service.MarkAsCancelled(profile);
    }
    public void RenewProfile(IRecurringProfile profile)
    {
        RenewProfileService service = new RenewProfileService();
        service.Renew(profile);
    }
    ...
} 
```

请注意，上面的代码不是实际代码，实际代码将使用构造函数注入的依赖项。这背后的想法是，此类代码的使用者不需要知道他们需要调用哪些类/子类的内部细节，而只需访问相应的“外观”。

首先，这是“外观”模式，还是其他形式的设计模式？

如果上述内容有意义，那么接下来的另一个问题是——考虑到它们没有任何特定的业务逻辑功能，你会对这些方法进行单元测试吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T11:16:26.257

如果您打算将代码作为库公开给其他人，我只会创建这样的外观。您可以创建一个外观，它是其他人使用的界面。

这将为您提供一些稍后更改实现的能力。

如果不是这样，那么这个门面提供了什么目的？如果一段代码想要调用外观上的一个方法，它将依赖于整个外观。最好保持较小的依赖关系，因此调用代码会更好地依赖`MarkAsCancelledService`tha one on `RecurringProfileFacade`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T15:53:38.200

如果您的设计“告诉”您可以使用 a`Singleton`为您做一些工作，那么它可能是糟糕的设计。TDD 应该使您远离考虑使用单例。

[可以在维基百科](http://en.wikipedia.org/wiki/Singleton_pattern#Drawbacks)上找到为什么这是一个坏主意（或者可以是一个好主意）的原因

我对你的问题的回答是：看看其他模式！例如`UnitOfWork`和`Strategy`，`Mediator`并尝试使用这些模式实现相同的功能，您将能够比较每种模式的好处。你可能最终会得到一个`UnitOfStrategicMediationFacade`或其他东西;-)

考虑在[Code Review](https://codereview.stackexchange.com/)上发布这些问题以进行更深入的分析。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T14:49:43.830

在我看来，这是一种外观模式，因为您在简单的方法后面抽象您的服务，尽管外观模式通常在他们的方法背后有更多的逻辑。原因是外观模式的目的是在更大的代码体上提供简化的接口。

至于您的第二个问题，我总是对所有内容进行单元测试。但是，就您而言，这取决于您取消或更新配置文件时它是否会改变项目的状态？因为您可以断言状态确实按照您的预期发生了变化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T16:06:41.890

面对这类问题时，我通常会尝试从 YAGNI/KISS 的角度进行推理：

*   你首先需要`MarkAsCancelService`，`MarkAsExpiredService`之类的吗？这些行动本身不会有更好的`RecurringProfile`归宿吗？

您说这些服务是您的 TDD 流程的副产品，但 TDD **1.**并不意味着剥离所有逻辑的业务实体，并且**2.**如果您*确实将*某些逻辑外部化，则不必进入服务。如果您无法为提取的类提供比 [BehaviorName]Service 更好的名称，这通常表明您应该停止并重新考虑是否应该真正提取行为。

简而言之，你的对象应该保持凝聚力，这意味着它们不应该封装太多的责任，但*也不应该变得乏力*。

*   假设这些服务是合理的，你真的需要他们的 Facade 吗？如果它只是开发人员的便捷捷径，是否值得额外维护（其中一项服务的更改会导致外观发生更改）？如果其中一项服务的每个消费者都知道如何直接利用该服务，这不是更简单吗？

> 如果上述内容有意义，那么接下来的另一个问题是——考虑到它们没有任何特定的业务逻辑功能，你会对这些方法进行单元测试吗？

单元测试样板代码确实很痛苦。有些人会承受这种痛苦，而另一些人则认为这不值得。由于此类代码的重复性和可预测性，一个很好的折衷方案是自动生成测试，甚至更好的是自动生成所有样板代码。

# ios - 带有 iOS 附件的 Phonegap EmailComposer 无法正常工作

> ID：13607459
> 
> 赞同：5
> 
> 时间：2012-11-28T14:31:39.950
> 
> 标签：ios, cordova, phonegap-plugins, email-attachments

我正在使用适用于 iOS 的 Cordova 2.2.0。我正在尝试实现[Phonegap EmailComposerWithAttachments](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/EmailComposerWithAttachments)插件，但我似乎无法让图片附件正常工作。

我打电话：

```
window.plugins.emailComposer.showEmailComposerWithCallback(function(result){console.log(result);},"Look at this photo","Take a look at this:",[],[],[],true,[testPath]); 
```

其中 testPath 包含我的 PNG 或 JPG 文件的路径。例如 ../myImage.jpg

**好处：**电子邮件编写器出现了。我看到我的主题、电子邮件的正文等。

**坏人：**我没有看到我的图片作为附件包含在内。相反，我看到一个小问号（在模拟器中）和一个小方块（在我的 iPad 上），好像附件丢失了。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T01:07:29.043

问题是我为插件提供的路径。

当你得到一个文件的路径时，它看起来像这样：

```
file:///localhost/var/mobile/Applications/2BED9D97-043A-402A-B914-83F4459E8A74/myApp.app/myPicture.jpg 
```

但是，EmailComposerWithAttachments 插件不希望路径以

```
"file:///localhost/" 
```

为了使插件工作，您需要通过取出 var (file:///localhost/) 之前的所有内容来更改其路径。所以，正确的路径应该是这样的：

```
var/mobile/Applications/2BED9D97-043A-402A-B914-83F4459E8A74/myApp.app/myPicture.jpg 
```

然后它起作用了。我可以使用这个插件发送带有图片附件的电子邮件。

# jquery - 在多个图像上淡出/淡入图像到文本到图像

> ID：13607461
> 
> 赞同：1
> 
> 时间：2012-11-28T14:31:48.190
> 
> 标签：jquery, image, webpage, fadein, fadeout

我试图让我的索引页面有 10 个图像，每个图像在鼠标悬停时都会淡入一段文本，然后在鼠标移出时会淡入原始图像。

每张图片都与 10 张不同（它是一个作品集），具有不同的文本内容。

我是一个完全的 jQuery n00b，下面是我当前的 html 页面。

到目前为止，我已经弄清楚如何让单个图像淡入另一个图像，但还没有找到一种简单的方法让索引页面上的 10 个图像在不同时间执行此操作（例如，当一个图像被鼠标悬停时）也我有没有想出如何让图像变成文本而不是另一个图像......请帮助。

任何建议或代码都非常感谢..

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">

<style>
img {
    display:block;
    position:absolute;
    top: 0;
    left: 0;
 }
</style>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script TYPE="text/javascript">

$(function() {
    $('#imgs')
    .mouseenter(function() {
        $('#i2').fadeOut('slow');
    })
    .mouseleave(function() {
        $('#i2').fadeIn('slow');
    });  
});

</script>

</head>
<body>

<div id="imgs">
    <img src="/images/unlimited.jpg" id="i1">  <!-- this is the mouseover image -->
    <img src="/images/optimize.jpg" id="i2">  <!-- this is the default image -->
</div>

</body>
</html> 
```

# excel - 将不同工作簿的范围分配给变量

> ID：13607471
> 
> 赞同：2
> 
> 时间：2012-11-28T14:32:15.003
> 
> 标签：excel, vba, range

我想使用 WorksheetFunction.Match 函数，并且需要用一个区域加载它。

```
Row = WorksheetFunction.Match(country, Countries, 0) 
```

你能帮我构建国家变量吗？我尝试了很多方法（包括以下方法），但似乎没有一个有效......

```
Countries = Workbooks("PERSONAL.XLSB").sheets("Sheet1").Range("B:B") 
Countries = Worksheets("PERSONAL.XLSB!Sheet1").Range("B:B") 
Countries = Worksheets.Range("PERSONAL.XLSB.Sheet1!B:B")  ... 
```

我还尝试了上述一些在前面加上“Set”的方法，但这也无济于事......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T09:27:27.010

好的问题解决了，谢谢戴夫！

我实际上将它用作返回国家所属“区域”的函数：

```
Function AreaEMEA(Country As String)
 Dim Countries As Range
 Dim Areas As Range
 Set Countries = Workbooks("PERSONAL.XLSB").Worksheets("Sheet1").Range("B:B")
 Set Areas = Workbooks("PERSONAL.XLSB").Worksheets("Sheet1").Range("A:A")
 Row = WorksheetFunction.Match(Country, Countries, 0)
 AreaEMEA = WorksheetFunction.Index(Areas, Row)
End Function 
```

我称之为使用

```
"=PERSONAL.XLSB!Module1.areaemea(A1)" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:51:56.957

好吧，我使用了下面的代码，它工作正常。您是否有一个 PERSONAL.XLSB 文件在您启动 Excel 时正在加载和隐藏？错误消息是什么 - 下标是否超出范围？

```
Public Sub test()

 Dim r As Integer
 Dim Countries As Range
 Dim Country As Range

 Set Countries = Workbooks("PERSONAL.XLSB").Worksheets("Sheet1").Range("C1:C8")
 Set Country = Workbooks("PERSONAL.XLSB").Worksheets("Sheet1").Range("A1")

 r = WorksheetFunction.Match(Country, Countries, 0)

 MsgBox (r)

End Sub 
```

# c++ - 将函数模板定义为类模板的回调

> ID：13607474
> 
> 赞同：1
> 
> 时间：2012-11-28T14:32:27.863
> 
> 标签：c++, callback, template-classes

我想定义一个类模板，它采用相同类型的回调函数。就像是：

```
 typedef template<class T> bool CallbackFn( T x );

    template<class T> class MyClass
    {
    public:
        MyClass() {}
        ~MyClass() {}
        void addCallbackFn( CallbackFn* fn ) { callbackFn = fn; }
    private:
        CallbackFn* callbackFn;
    }; 
```

它会像这样使用：

```
 bool testFunctionInt(int x) { return true; }
    bool testFunctionString(std::string x) { return true; }

    MyClass<int> a;
    a.addCallbackFn( testFunctionInt );

    MyClass<std::string> b;
    b.addCallbackFn( testFunctionString ); 
```

不幸的是，回调函数不能通过`typedef`.

还有另一种方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T14:43:20.953

```
#include <string>

template <typename T>
class MyClass {
  public:
    typedef bool CallbackFn(T x);

    MyClass() : cb_(NULL) {}
    ~MyClass() {}

    void addCallbackFn(CallbackFn *fn) { cb_ = fn; }

  private:
    CallbackFn *cb_;
};

static bool testFunctionInt(int x) { return true; }
static bool testFunctionString(std::string x) { return true; }

int main()
{
    MyClass<int> a;
    a.addCallbackFn( testFunctionInt );

    MyClass<std::string> b;
    b.addCallbackFn( testFunctionString );
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T14:43:12.973

像这样在类中移动 typedef：

```
template<class T> class MyClass
{
public:
    MyClass() {}
    ~MyClass() {}
    typedef bool CallbackFn( typename T x );
    void addCallbackFn( CallbackFn* fn ) { callbackFn = fn; }

    //you could also do this
    typedef bool (*CallbackFnPtr)(typename T x);
    void addCallbackFnPtr(CallbackFnPtr fn ) { callbackFn = fn; }

private:
    CallbackFn* callbackFn;  //or CallbackFnPtr callbackFn;
}; 
```

我假设你的意思是`MyClass<std::string> b;`在你的例子中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T14:46:52.893

我做了一些改变。

```
template<class T>
class MyClass
{

public:
    typedef bool (*CallbackFn)( T x );

    MyClass() {}
    ~MyClass() {}
    void addCallbackFn( CallbackFn fn ) { callbackFn = fn; }
private:
    CallbackFn callbackFn;
};

bool testFunctionInt(int x) 
{
    return true; 
}

int main(int argc, char * argv[])
{

    MyClass<int> c;
    c.addCallbackFn(testFunctionInt);
    return 0;
} 
```

# xaml - TFS 2010 build template xaml 如何从项目的sharepoint文件中下载文件？

> ID：13607476
> 
> 赞同：0
> 
> 时间：2012-11-28T14:32:37.197
> 
> 标签：xaml, build, tfs

我做了一个 TFS 自定义构建定义，其中项目源被压缩在交付目录中。

我还想从 TFS 项目共享点文档集合中下载最新版本的文档。

由于 DownloadFile 似乎以版本控制为中心，因此我尝试使用 InvokeProcess 活动以及 wget 调用，但我遇到了身份验证问题。

我是否错过了可以解决此问题的专门活动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:05:18.103

我最终授予运行构建服务的帐户访问 Sharepoint 网站的权限，并将此帐户凭据放入 wget 脚本中。

不是一个很好的解决方案，但仍然是一个可行的解决方案。

# jqmodal - jqmodal 并将数据传递给它？

> ID：13607479
> 
> 赞同：0
> 
> 时间：2012-11-28T14:32:45.027
> 
> 标签：jqmodal

我需要将一个 id 传递给我的 jqmodal 弹出窗口，但我不确定执行此操作的最佳方法。

在我的触发器上，我设置了一个 data-id，所以它是这样的：

```
data-id="projects" 
```

然后是我调用弹出窗口的代码

```
$('.jqmWindow').jqm({
   ajax:projects,
   onShow:myFadeIn,
   onHide:myFadeOut
}); 
```

我的弹出窗口工作正常，我只是想知道如何附加我的 id 以将其传递给弹出窗口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:43:47.680

您的问题缺少一些细节，但我假设您有一个触发器（假设带有 data-id="projects" 的标签应该触发您的 jqModal？

看看[jQuery 选择器](http://api.jquery.com/category/selectors/)

大概是这样的。

```
<a href="#" data-id="projects">Click </a>

<script>

$(function () {
  $('a[data-id="projects"]').click(function () {
   $('.jqmWindow').jqm({
       ajax:projects,
       onShow:myFadeIn,
       onHide:myFadeOut
    }); 
  })
});

</script> 
```

# entity-framework - 实体框架4中具有多对多关系的Lambda查询

> ID：13607481
> 
> 赞同：0
> 
> 时间：2012-11-28T14:32:48.360
> 
> 标签：entity-framework, lambda, many-to-many

我有 5 张桌子：

*   游戏
*   类别
*   游戏类别
*   电影
*   电影类别

GameCategory 只是 Game 和 Category 之间的关系。（多对多）MovieCategory 与电影相同。

现在我只想知道如何获取与游戏相关的所有类别。

目前我使用这个查询：

```
Query(c => c.Game.Count > 0).Distinct().ToList(); 
```

但是这个查询的性能很差（大约 500 毫秒），而如果我在带有 sql 管理的 sql server 中使用查询直接

```
SELECT category_id
FROM  [GameCategory]
Group by category_id 
```

它需要不到 0.008 毫秒。

获得相同结果的最佳 lambda 表达式查询是什么？

（使用实体框架我无法直接访问 GameCategory，因为它被框架隐藏了）

需要你的帮助

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:45:07.437

我找到了解决方案：

考虑使用 Query(c => c.Game.Any()).Distinct().ToList(); 而不是 Query(c => c.Game.Count > 0).Di​​stinct().ToList();

# javascript - 如何使用 html5 pushstate 方法将动态页面索引到谷歌？

> ID：13607482
> 
> 赞同：0
> 
> 时间：2012-11-28T14:32:48.953
> 
> 标签：javascript, ajax, pushstate, google-index

我正在构建一个完全支持 jquery 的网站，因此我使用 ajax 动态加载所有页面，以实现页面之间的精美转换并最大化用户体验。这是我的javascript代码：

```
$(function() {

    var path = _.compact(location.pathname.split("/"));
    if(path.length<2){
        path = 'home' 
    }else{
        path = path[path.length-1];
    }
    activepage = path;

    $('.nav a').click(function(e) {
        href = $(this).attr("href");            
        loadContent(href);      
        // HISTORY.PUSHSTATE
        window.history.pushState('', 'New URL: '+href, href);   
        e.preventDefault();                     
    });

    // THIS EVENT MAKES SURE THAT THE BACK/FORWARD BUTTONS WORK AS WELL
    window.onpopstate = function(event) {
        var path = _.compact(location.pathname.split("/"));
        if(path.length<2){
            path = 'home' 
        }else{
            path = path[path.length-1];
        }           
        loadContent(path);
    };

});

function loadContent(url){  
        // USES JQUERY TO LOAD THE CONTENT
        var adresa = absurl + "ajax/get_content";       
        $.ajax({
          url: adresa,
          contentType: 'application/json',
          data: { url: url },
          success: function(data) {
            switch(url)
            {
                case "projects": $.projects({ data : data }); $.projects.init();
                break;
                case "home": $.homePage({ data : data }); $.homePage.init();
                break;
                default: console.log("nista");
            }
          }
        }); 
} 
```

Ajax 函数以 json 格式返回构建页面所需的所有数据，然后我初始化我的自定义插件，该插件使用该 json 数据构建页面。

正如您在此[现场示例](http://www.wheniamplaying.com/mmrApp/)中看到的那样，所有这些工作都非常好，包括浏览器历史记录（前后）。但这是我的问题......当页面完全加载时，当我查看页面的源时，主容器仍然是空的。当我尝试将页面作为谷歌机器人获取时，它也是空的，我很确定这两者是相关的。

正如您在[此示例](http://html5.gingerhost.com/)中所看到的，使用与我几乎相同的代码，当您单击链接时源正在更改，并且它也更改了页面内容，但没有重新加载页面。我的问题是，我在这里缺少什么以及如何达到相同的效果？我错过了一些 php 代码还是什么？在过去的几天里，我一直在为此苦苦挣扎，我已经尝试了所有方法，但无法使其正常工作。

注意：目前只有主页和项目链接有效...

非常感谢所有回复！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:12:00.183

`pushState`允许您在使用 Ajax 更新页面内容时更改 URI 的本地部分。

对于您以这种方式创建的每个 URI，允许服务器在不依赖 JavaScript 的情况下构建相同的页面。

这会：

*   当访问者通过深层链接进入网站时提供更好的性能
*   允许网站在没有 JavaScript 的情况下工作（包括搜索引擎机器人）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:11:05.840

作为@Quentin 的回答的补充，您需要在 PHP 中确定内容是否通过 ajax 加载。如果不是，您必须显示被请求页面的全部内容，包括页眉、页脚和页面内容。

# c# - 在asp中动态添加控件时更改母版页中的布局高度

> ID：13607484
> 
> 赞同：0
> 
> 时间：2012-11-28T14:32:52.273
> 
> 标签：c#, asp.net, css, user-controls, dynamic-data

![在此处输入图像描述][1]当用户添加新控制器时，如何更改页面布局的高度。当用户添加新控件时，我想提高页面的高度。

我在母版页中使用

```
<div class="main">
     <asp:ContentPlaceHolder ID="MainContent" runat="server"/>
</div> 
```

在我的 CSS 中

```
.main
{
    padding: 0px 12px;
    margin: 12px 8px 8px 8px;
    height: auto; 
} 
```

还有一个问题，我可以在 aspx.cs 文件中以编程方式实现吗？

任何意见，将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:53:16.597

只要您的 asp:Content 中有包含内容或设置高度的元素，它就应该添加到页面的高度

例子

> `<asp:Content ContentPlaceHolderID="MainContent" runat="server">`
> `<div>`
> 
> `</div>`
> `</asp:Content>`

还需要检查改变 div 高度的 CSS 样式，因为这会影响您放置在其中的任何内容

# php - 使用 $_SESSSION 变量的动态 document.title

> ID：13607491
> 
> 赞同：1
> 
> 时间：2012-11-28T14:33:07.463
> 
> 标签：php, ajax, title

我有一个使用 ajax 向用户显示他们当前分配的页面。我不必刷新页面以查看是否有任何更新，而是使用 ajax 每 4 秒更新一次数据。有人要求我更改文档标题以显示类似“任务数：4”的内容，并在用户完成新任务或被分配另一个任务时进行更新。我尝试使用一个简单的“setInterval” javascript 函数，但由于 PHP 是服务器端，变量片不会更新......

我也尝试在 ajax 代码中设置“document.title”，但这根本不起作用。

是否有一种简单的方法来更新文档标题以显示分配给查看页面的用户的任务数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:36:16.007

从通过 AJAX 响应发送到客户端 Javascript 代码的数据中的 $_SESSION 中返回值。一旦你在客户端设置了你需要的任何东西，就可以使用 javascript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T14:38:06.890

您必须使用 ajax 调用一个专门为您返回任务数量（以及您可能想要的其他信息）的 php。

要更改标题，您只需调用 document.title = "在 ajax 中返回的数据";。

并将所有这些代码（ajax 调用和标题集）放在一个带有 setinterval 的函数中，如您所提到的。

# bash - 使用 sed 减少命令

> ID：13607494
> 
> 赞同：0
> 
> 时间：2012-11-28T14:33:16.127
> 
> 标签：bash, sed

我只是感兴趣是否可以将此命令减少到一行而没有`&&`？

```
find /backup/daily.1/var/www/ -iname "*.jpg" -type f >> ~/backuppath.txt
sed 's|/backup/daily.1||g' ~/backuppath.txt > ~/wwwpath.txt
paste -d " " ~/backuppath.txt ~/wwwpath.txt > ~/files.txt
while read line; do cp $line; done < ~/files.txt 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:39:51.423

这不处理带有空格的文件名。（这并不重要，我只是为了抢占不可避免的评论。）

```
find /backup/daily.1/var/www/ -iname "*.jpg" -type f |
while read name; do cp $name ${name#/backup/daily.1}; done 
```

你也可以这样做：

```
find /backup/daily.1/var/www/ -iname "*.jpg" \
    -type f -exec sh -c 'cp "$0" "${0#/backup/daily.1}"' {} \; 
```

它可以很好地处理不寻常的文件名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T14:44:09.630

我不会把它写在一行上，但你可以不用中间文件：

```
find /backup/daily.1/var/www/ -iname "*.jpg" -type f |
sed 's%/backup/daily.1\(.*\)%cp & \1%' |
sh -x 
```

该`sed`命令将文件名分成两部分，`/backup/daily.1`前缀和“其余部分”，并将其替换为完整的复制命令，将原始名称复制到没有前缀的名称。的输出`sed`作为脚本馈送到 shell。

这应该可以正常工作，除非文件名包含 shell 元字符、空格或换行符。如果文件名中没有换行符或单引号，则可以提高弹性：

```
find /backup/daily.1/var/www/ -iname "*.jpg" -type f |
sed "s%/backup/daily.1\(.*\)%cp '&' '\1'%" |
sh -x 
```

这会将每个文件名包含在单引号中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T14:40:29.147

```
find /backup/daily.1/var/www/ -iname "*.jpg" -type f \
 | sed 's|^/backup/daily\.1\(.*\)$|\0 \1|' \
 | ( while read origin dest; do cp "$origin" "$dest"; done) 
```

在`sed`表达式中：

*   `\0`被匹配的字符串替换，在这种情况下是整行
*   `\1`替换为子模式匹配`\(.*\)`，即从之后`/backup/daily.1`到行尾的所有内容

# javascript - 无法检测到 jQuery 点击 vimeo iframe

> ID：13607504
> 
> 赞同：1
> 
> 时间：2012-11-28T14:34:09.767
> 
> 标签：javascript, jquery, video, click, vimeo

简单的 Vimeo iframe 点击不起作用：

```
$('iframe').click(function(){
    alert('ok');
}); 
```

我也试过：

```
$('body').click(..
$(document).on('click','iframe',.. 
```

但是，当用户在悬停视频时单击视频时，没有任何效果，它只是播放视频。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-04T01:44:44.653

如果您`api=1`在嵌入代码中包含查询参数，则可以访问事件，包括当用户单击 iframe 中的视频（播放、暂停）时触发的那些事件。您可能还希望包含他们的`froogaloop.js`文件以更轻松地访问这些事件。

```
<iframe id="player1" src="http://player.vimeo.com/video/27855315?api=1&player_id=player1" width="400" height="225"></iframe> 
```

*   [http://developer.vimeo.com/player/js-api](http://developer.vimeo.com/player/js-api)
*   [http://jsfiddle.net/bdougherty/HfwWY/light](http://jsfiddle.net/bdougherty/HfwWY/light)
*   [https://github.com/vimeo/player-api/tree/master/javascript](https://github.com/vimeo/player-api/tree/master/javascript)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T14:35:15.907

它是 iframe 中的第三方域，由于[同源策略](https://developer.mozilla.org/en-US/docs/Same_origin_policy_for_JavaScript)，您不能这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T14:53:23.673

尝试这个：

```
$('iframe').contents()
           .find('[src*="vimeo.com"]')
           .click(
               function(){
                  alert('foo');
               }
            ); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-28T19:58:22.033

我发现在找到 iframe 中的任何内容之前，我需要确定 iframe 是否已加载。然后，如果 iframe 在页面加载后加载或在此过程中稍后重新加载，您的点击功能将起作用。

```
jQuery('#iframe').load(function() {
   jQuery('#iframe').contents().find('#play-button').click(function () {
        // do your stuff
    });
} 
```

** 这可能会或可能不会跨域工作，但确定加载的 iframe 是否可以用作确定 iframe 中是否发生某些事情的骇人听闻的方法。如果您在 iframe 顶部的域上创建了一个“播放”按钮，则它可用于在页面加载后通过单击功能加载 iframe，然后您的加载功能可以包含幻灯片暂停。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-07-03T23:00:57.003

不幸的是，正如 epascarello 之前所说，由于同源策略，您无法跟踪跨域 iframe 中的点击。

您可以设置用户单击的“缩略图”，这将拉出该弹出窗口，然后随后将缩略图替换为实际视频。只需嵌入您想要的视频，但将其保留为隐藏的 div，然后`.show()`在您希望它开始播放时使用。

[资源](https://stackoverflow.com/questions/8975987/swap-image-with-embedded-vimeo-video-when-image-is-clicked)

# mysql - 优化mysql视图将多条记录合并为一条记录

> ID：13607510
> 
> 赞同：0
> 
> 时间：2012-11-28T14:34:29.500
> 
> 标签：mysql, sql, optimization, view

我正在尝试优化 MySql 中的视图。该视图从表中获取 0-5 条记录并将它们转换为 1 条记录。该视图有效，但随着 property_log 表中记录数的增加而变慢。

例如，如下所示的数据：

```
mysql> select * from property_log where event_id = 1144882;
+----------+--------------+------------------------------+
| event_id | log_key      | log_value                    |
+----------+--------------+------------------------------+
|  1144882 | userId       | 1000                         |
|  1144882 | licenseId    | 3                            |
|  1144882 | messageTypeId| 7                            |
|  1144882 | message      | Sample message               |
|  1144882 | op           | tracking                     |
+----------+--------------+------------------------------+ 
```

变成 1 条记录：

```
mysql> select * from view_logged_property where id = 1144882
+---------+--------+-----------+---------------+-------------------+
| ID      | UserID | LicenseID | MessageTypeID | Message           |
+---------+--------+-----------+---------------+-------------------+
| 1144882 | 1000   | 3         | 7             | Sample message    |
+---------+--------+-----------+---------------+-------------------+ 
```

编辑：重要提示 - 并非所有 5 条记录都会一直存在。例如，数据也可能如下所示：

```
mysql> select * from property_log where event_id = 1144882;
+----------+--------------+------------------------------+
| event_id | log_key      | log_value                    |
+----------+--------------+------------------------------+
|  1144882 | userId       | 1000                         |
|  1144882 | messageTypeId| 7                            |
|  1144882 | message      | Sample message               |
|  1144882 | op           | tracking                     |
+----------+--------------+------------------------------+ 
```

我目前用来执行此操作的视图如下：

```
DROP VIEW IF EXISTS view_logged_property;
CREATE VIEW view_logged_property as (
  SELECT
    p.event_id as ID,
    (select log_value from property_log where log_key = "userId" and event_id = p.event_id) as UserID,
    (select log_value from property_log where log_key = "licenseId" and event_id = p.event_id) as LicenseID,
    (select log_value from property_log where log_key = "messageTypeId" and event_id = p.event_id) as MessageTypeID,
    (select log_value from property_log where log_key = "message" and event_id = p.event_id) as Message
  FROM
    logging_event p
  WHERE
    p.event_id in (select event_id from property_log where log_key = "op" and log_value = "tracking")
); 
```

编写此视图的最佳方法是什么，即使“property_log”表中的记录数增加，它也会表现良好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:37:39.543

试试这个，

```
SELECT  Event_ID,
        MAX(CASE WHEN log_key = 'userID' THEN log_value ELSE NULL END) userID,
        MAX(CASE WHEN log_key = 'licenseId ' THEN log_value ELSE NULL END) licenseId ,
        MAX(CASE WHEN log_key = 'messageTypeId' THEN log_value ELSE NULL END) messageTypeId,
        MAX(CASE WHEN log_key = 'message' THEN log_value ELSE NULL END) message,
        MAX(CASE WHEN log_key = 'op' THEN log_value ELSE NULL END) op
FROM     property_log
GROUP BY    Event_ID 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/335dd/1)
*   [SQLFiddle 演示（*转换为 VIEW*）](http://sqlfiddle.com/#!2/4b3f5/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T14:53:35.143

在这种情况下，我会使用`join`s 。

在评论后更改`left join`应该可以解决问题。

```
DROP VIEW IF EXISTS view_logged_property;
CREATE VIEW view_logged_property as (
    select 
        p1.event_id as ID, 
        p5.log_value as UserID, 
        p2.log_value as LicenseID, 
        p3.log_value as MessageTypeID, 
        p4.log_value as Message
    from property_log p1  
    left join property_log p5 on p1.event_id = p5.event_id and p5.log_key = 'userId'
    left join property_log p2 on p1.event_id = p2.event_id and p2.log_key = 'licenseId'
    left join property_log p3 on p1.event_id = p3.event_id and p3.log_key = 'messageTypeId'
    left join property_log p4 on p1.event_id = p4.event_id and p4.log_key = 'message'
    where p1.log_key = 'op' and p1.log_value = 'tracking'
); 
```

你能在你的数据上测试它吗？

`event_id, log_key`可能需要对上的索引，如下所示：

```
 create index event_key_idx on property_log(event_id, log_key); 
```

[SQL 小提琴示例](http://sqlfiddle.com/#!2/93b65/2)

# c# - 如何在 EF-Code-First 中指定主键名称

> ID：13607512
> 
> 赞同：33
> 
> 时间：2012-11-28T14:34:31.670
> 
> 标签：c#, .net, sql-server, entity-framework, ef-code-first

我正在使用 Entity Framework Codefirst 来创建我的数据库。当我通过 ODBC 连接到 2007 时，具有模式名称 dbo.pk_Jobs 的默认主键似乎扰乱了 access 2007。如果我手动编辑名称并删除架构名称并将此主键重命名为 pk_jobs，Access 现在可以读取该表。

我可以使用 Fluent Api、数据属性或任何其他方法指定主键名称以不包含架构名称吗？

```
public class ReportsContext : DbContext
{
    public DbSet<Job> Jobs { get; set; }
    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Job>().ToTable("Jobs");
        modelBuilder.Entity<Job>().HasKey(j => j.uuid);

        base.OnModelCreating(modelBuilder);
    }
}
public class Job
{
    public Guid uuid{ get; set; }
    public int active{ get; set; }
} 
```

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-11-28T18:52:46.493

如果要指定列名并覆盖属性名，可以尝试以下操作：

使用注解

```
public class Job
{
    [Key, DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    [Column("CustomIdName")]
    public Guid uuid { get; set; }
    public int active { get; set; }
} 
```

使用代码优先

```
 protected override void OnModelCreating(DbModelBuilder mb)
    {
        base.OnModelCreating(mb);

        mb.Entity<Job>()
            .HasKey(i => i.uuid);
        mb.Entity<Job>()
          .Property(i => i.uuid)
          .HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity)
          .HasColumnName("CustomIdName");
    } 
```

内部迁移配置

```
public partial class ChangePrimaryKey : DbMigration
{
    public override void Up()
    {
        Sql(@"exec sp_rename 'SchemaName.TableName.IndexName', 'New_IndexName', 'INDEX'");
    }

    public override void Down()
    {
        Sql(@"exec sp_rename 'SchemaName.TableName.New_IndexName', 'Old_IndexName', 'INDEX'");
    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-28T16:31:55.597

您可以使用**Key**属性来指定主键的各个部分。所以你的工作类可能是

```
public class Job
{
    [Key]
    public Guid uuid{ get; set; }
    public int active{ get; set; }
} 
```

数据注释属性在[System.ComponentModel.DataAnnotations 命名空间中定义](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T16:39:03.223

如果我理解，您是在问如何更改实体框架使用的主键列的名称。您的 HasKey 语句中的以下添加应解决此问题：

```
modelBuilder.Entity<Job>().Property(j => j.uuid).HasColumnName("pk_Jobs") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-17T07:43:28.483

（这是对@Jeff Sivers 和@cubski 的回答/评论的补充。）

据我所知，您无法使用数据属性指定 PK 名称。有时我需要去掉`dbo.`名称的一部分，然后使用手动编辑的代码先迁移来更改名称，如下所示：

```
public partial class ChangeNameOnPKInCustomers : DbMigration
{
    private static string fromName = "PK_dbo.Customers";    // Name to change

    private static string toName = fromName.Replace("dbo.", "");

    public override void Up()
    {
        Sql($"exec sp_rename @objname=N'[dbo].[{fromName}]', @newname=N'{toName}'");
        // Now the PK name is "PK_Customers".
    }

    public override void Down()
    {
        Sql($"exec sp_rename @objname=N'[dbo].[{toName}]', @newname=N'{fromName}'");
        // Back to "PK_dbo.Customers".
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-26T16:03:19.547

当您使用 Code First 添加显式迁移时，您将获得一个带有迁移名称的 .cs 文件，该文件是具有基类 DbMigration 的部分类。

对于您的主键约束，您可以使用 DropPrimaryKey 或 AddPrimaryKey 函数，具体取决于您要执行的操作。我的问题是 DropPrimaryKey 因为我的 Db 的主键名称不同。

这两个函数都有重载来获取 PK 的名称，以便您可以显式指定 PK 的名称。对于具有显式 PK 名称的 DropPrimaryKey 对我来说效果很好。参数是对象 anonymousArguments，默认为 null。

# ruby - 这个 XPath 表达式应该工作吗？//测试/祖先::测试

> ID：13607516
> 
> 赞同：0
> 
> 时间：2012-11-28T14:34:58.767
> 
> 标签：ruby, xpath, nokogiri

我正在尝试查找`tbody`包含后代元素的所有元素`<font color="red">`。

我正在使用这个 XPath 表达式：

```
//font[@color="red"]/ancestor::tbody 
```

但它不起作用。它应该工作还是我正在使用（或其他地方）的库有问题？我正在使用一个名为[Nokogiri](http://nokogiri.org/)的 Ruby 库。

我也试过

```
//tbody[descendant::font[@color="red"]] 
```

但仍然没有运气。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T15:05:09.113

此 XPATH 表达式将选择所有`tbody`包含`<font color="red">`:

```
//tbody[.//font[@color="red"]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T15:12:59.983

`tbody`我发现了问题：我正在使用的文档的源代码中实际上没有任何元素！

我认为是因为我正在使用 Chrome 开发人员工具中的元素选项卡浏览源代码，而这个工具`<tbody>`出于某种原因在其中添加了元素！

因此，下面的 XPath 表达式*应该可以*工作，并且如果源代码中确实存在适当的元素，*它也可以工作。*`tbody`

```
//font[@color="red"]/ancestor::tbody 
```

# extjs - extjs 的缓冲滚动是否适合图像？

> ID：13607524
> 
> 赞同：0
> 
> 时间：2012-11-28T14:35:18.593
> 
> 标签：extjs

我正在寻找一个 extjs 解决方案来加载很多记录。我有超过 3000 条记录。在示例中这个示例说明了预先加载所有记录并缓冲渲染。

在演示[http://dev.sencha.com/deploy/ext-4.0.0/examples/grid/buffer-grid.html](http://dev.sencha.com/deploy/ext-4.0.0/examples/grid/buffer-grid.html)它写

> 此示例说明了预先加载所有记录并缓冲渲染

这种加载所有记录的方法是否适合图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T07:08:34.730

是的，ExtJS 的缓冲滚动适用于图像。

将渲染器添加到您的列，生成此 html 作为列内容：

```
<img src="....."> 
```

您的浏览器将完成其余的请求所有图像的工作。[这个 stackoverflow 答案](https://stackoverflow.com/a/744363/1385429)告诉您如何添加图像列。

# c# - 如何将 PictureBox 从一个面板移动到另一个面板？

> ID：13607525
> 
> 赞同：0
> 
> 时间：2012-11-28T14:35:20.130
> 
> 标签：c#, winforms, graphics, panel, move

我在面板中有一个图片框，我需要在用户单击时看到它从这个面板移动到另一个面板。为了给你一个更好的画面，我有一个四连接游戏，我有一个芯片或任何你称之为的东西，鼠标在四连接网格顶部移动，我需要它进入网格并显然留在它的位置。这是我现在拥有的代码。筹码似乎下降但从未停留在那里

```
Graphics g = grid.CreateGraphics();  

grid.Controls.Add(picBox);

for (int i = 0; i < newYloc; i++)
{
     picBox.Location = new Point(newXloc, picBox.Top + 1);
     // moves the chip by 1 down each iteration
     picBox.Show();
}

if (playerNo == 1) g.DrawImage(red, newXloc, newYloc, 65, 65);
else g.DrawImage(gold, newXloc, newYloc, 65, 65); 
```

其中 grid 是我连接四个网格的面板， picBox 是在这段代码之前位于另一个面板中的图片框。

# javascript - Chrome 扩展：获取当前页面 cookie 并与插件本地存储相同

> ID：13607528
> 
> 赞同：3
> 
> 时间：2012-11-28T14:35:28.753
> 
> 标签：javascript, cookies, google-chrome-extension, local-storage

我尝试了以下但不知道如何操作它。

清单.json

```
 "permissions": [
    "tabs",
    "http://*/*",
    "https://*/*"
  ],
  "content_scripts": [
    {
      "matches": ["http://*/*", "https://*/*"],
      "js": ["cookie.js"]
    }
  ] 
```

cookie.js

```
console.log(document.cookie); 
```

只是在当前页面 console.log 中显示，而不是在扩展的实际控制台中。

是否可以获取您当前所在站点的 cookie 并将其设置在扩展程序的本地存储中？所以到那时，我可以在任何页面上，并且扩展仍然具有价值。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-28T15:04:33.887

以下骨架有助于实现它；我将所有`cookie`信息存储在 chrome 扩展本地存储中，如下所示；

**示例代码**

![在此处输入图像描述](../Images/12be84fa70ad5fb6ddea22b77e6bb0e8.png)

***清单.json***

```
{
  "name" : "Cookie API Demo",
  "version" : "1",
  "description" : "This is demonstration of Cookie API",
  "permissions": [ "cookies","<all_urls>"],
  "browser_action": {
    "default_icon": "screen.png",
    "default_popup":"popup.html"
  },
  "manifest_version": 2
} 
```

***popup.html***

```
<html>
<head>
<script src="popup.js"></script>
</head>
<body>
</body>
</html> 
```

***popup.js***

```
function cookieinfo(){
    chrome.cookies.getAll({},function (cookie){
        console.log(cookie.length);
        allCookieInfo = "";
        for(i=0;i<cookie.length;i++){
            console.log(JSON.stringify(cookie[i]));

            allCookieInfo = allCookieInfo + JSON.stringify(cookie[i]);
        }
        localStorage.allCookieInfo = allCookieInfo;
    });
}
window.onload=cookieinfo; 
```

更多API的检查[这个](https://developer.chrome.com/extensions/cookies.html)

**骨架仅适用于当前页面中的 Cookie**

如此处所示，您将在当前页面中只有 cookie 信息

![在此处输入图像描述](../Images/a7b107e35c02c7190f93f878d3db4fc8.png)

***清单.json***

```
{
  "name" : "Cookie API Demo",
  "version" : "1",
  "description" : "This is demonstration of Cookie API",
  "permissions": [ "cookies","<all_urls>","tabs"],
  "browser_action": {
    "default_icon": "screen.png",
    "default_popup":"popup.html"
  },
  "manifest_version": 2
} 
```

***popup.html***

```
<html>
<head>
<script src="popup.js"></script>
</head>
<body>
</body>
</html> 
```

***popup.js***

```
function cookieinfo(){

     chrome.tabs.query({"status":"complete","windowId":chrome.windows.WINDOW_ID_CURRENT,"active":true}, function(tab){
            console.log(JSON.stringify(tab));
            chrome.cookies.getAll({"url":tab[0].url},function (cookie){
                console.log(cookie.length);
                allCookieInfo = "";
                for(i=0;i<cookie.length;i++){
                    console.log(JSON.stringify(cookie[i]));

                    allCookieInfo = allCookieInfo + JSON.stringify(cookie[i]);
                }
                localStorage.currentCookieInfo = allCookieInfo;
            });
    });

}
window.onload=cookieinfo; 
```

# shell - msysgit：防止 Git bash 锁定正在运行的 shell 脚本的文件

> ID：13607530
> 
> 赞同：1
> 
> 时间：2012-11-28T14:35:35.700
> 
> 标签：shell, windows-7, file-io, msysgit, git-bash

我有一些在开发过程中（总是）运行的脚本。尝试在 Windows 7 中写入这些文件失败（`git pull`失败并`Permission denied`出现错误）。在 Linux 中一切正常。

1.  我可以在不更改全局[UAC](http://en.wikipedia.org/wiki/User_Account_Control)设置的情况下阻止 Git bash 锁定文件吗？
2.  我还有什么其他选择（除了修复/破解 Git bash 或 Windows）？

这是一个示例脚本作为讨论的基础：

```
#!/bin/bash    
echo "command + args: $0 $1 $2 $3"    
while sleep 2; do date +%s; done 
```

我找到了一个相关的[话题](https://stackoverflow.com/a/2967519/8986)。但不幸的是，它没有提供合适的解决方案，例如，`Run as Administrator`没有帮助。

`:w!`另一个有趣的观察是，在 vim 中使用（强制覆盖）编辑文件时，我仍然可以编写文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T19:41:49.157

您可以简单地运行该文件的副本。

```
cp foo.sh /usr/local/bin
foo.sh 
```

这将允许您在另一个运行时编辑存储库中的文件。您也可以尝试硬链接。

```
ln foo.sh /usr/local/bin
foo.sh 
```

# java - 如何在同一台计算机上同时安装 32 位和 64 位版本的 Java

> ID：13607531
> 
> 赞同：0
> 
> 时间：2012-11-28T14:35:35.563
> 
> 标签：java

我的工作站上需要 Java 32 和 64 位版本，但是当我尝试安装 32 位版本时，它说我已经安装了另一个 Java 版本。这适用于 Java 版本 7 更新 9。我无法通过配置页面删除现有版本，我尝试了其他一些方法，但我对计算机不是很好，到目前为止没有任何效果。有人可以帮忙吗？我有 Windows 7

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:54:35.013

对我来说效果很好。但我不使用 java.com，我只是从 oracle.com 下载运行时安装程序。

# asp.net - 从 ASP.Net 发送电子邮件时必须指定收件人错误

> ID：13607533
> 
> 赞同：2
> 
> 时间：2012-11-28T14:35:42.687
> 
> 标签：asp.net, vb.net, email

我们正在尝试将 html 字符串的输出发送到特定的测试电子邮件地址，并在运行时发现此错误：

```
A recipient must be specified. 
```

这是来自代码隐藏文件的编码。

```
Protected Sub EmailTheList()

    ' Get the rendered HTML.
    '-----------------------
    Dim SB As New StringBuilder()
    Dim SW As New StringWriter(SB)
    Dim htmlTW As New HtmlTextWriter(SW)

    GridViewSummary.RenderControl(htmlTW)

    ' Get the HTML into a string.
    ' This will be used in the body of the email report.
    '---------------------------------------------------
    Dim dataGridHTML As String = SB.ToString()

    Dim SmtpServer As New SmtpClient()
    SmtpServer.Credentials = New Net.NetworkCredential("myEmailAddress@gmail.com", "myPassword")
    SmtpServer.Port = 587
    SmtpServer.Host = "smtp.gmail.com"
    SmtpServer.EnableSsl = True

    ObjMailMessage = New MailMessage()

    Try
        ObjMailMessage.From = New MailAddress("myEmailAddress@gmail.com", "Some text is here.", System.Text.Encoding.UTF8)

        ObjMailMessage.Subject = "Test message from Emad"
        ObjMailMessage.ReplyToList.Add("john.doe@example.com")
        ObjMailMessage.Body = dataGridHTML

        ObjMailMessage.DeliveryNotificationOptions = DeliveryNotificationOptions.OnFailure

        SmtpServer.Send(ObjMailMessage)

    Catch ex As Exception
        MsgBox(ex.ToString())
    End Try
End Sub 
```

我们怀疑我们没有为这一行使用正确的语法：

```
ObjMailMessage.From = ObjMailMessage.ReplyToList.Add("john.doe@example.com") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T14:39:16.587

您缺少收件人：地址，这导致有关收件人的错误。

```
ObjMailMessage.To.Add(New MailAddress("mail@somemail.com", "An error happened", System.Text.Encoding.UTF8)) 
```

参考：http: [//msdn.microsoft.com/en-us/library/system.net.mail.mailmessage.aspx](http://msdn.microsoft.com/en-us/library/system.net.mail.mailmessage.aspx)

# java - 摇摆调整大小缓慢/跳跃

> ID：13607535
> 
> 赞同：2
> 
> 时间：2012-11-28T14:35:51.423
> 
> 标签：java, swing, resize

我用一个简单的渐变扩展 JComponent 并调整了 paintComponent() 方法制作了自己的 BottomBar。

然后我将它添加到使用 BorderLayout 的 JFrame 的 SOUTH 中。

一开始一切看起来都是正确的。当我调整框架的大小时，BottomBar 被重新绘制并正确设置到新位置。想法是，它会延迟几毫秒，因此人们可以看到 JFrame 的背景一秒钟。

有趣的是，当我将执行环境设置为 Java-SE 1.6 时，它可以工作......（而不是 1.7）另外，我在 mac 上运行它，如果这有什么不同的话。

![调整大小和未调整大小时比较窗口的屏幕截图](../Images/04d6d572e4a0cdb4352d69c481a810cf.png)

* * *

## 代码 - JButton 示例

```
import java.awt.BorderLayout;
import java.awt.EventQueue;
import javax.swing.JButton;
import javax.swing.JFrame;

public class Main {

    public static void main(String args[]){
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                JFrame frame = new JFrame("Resize Example");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.add(new JButton(), BorderLayout.SOUTH);
                frame.pack();
                frame.setLocationByPlatform(true);
                frame.setVisible(true);
            }
        });
    }
} 
```

* * *

## 代码 - BottomBar 示例

主要的：

```
public class Main {
    public static void main(String args[]){
        Frame window = new Frame();
        window.setSize(500, 400);
        window.setVisible(true);
    }
} 
```

框架：

```
import java.awt.BorderLayout;

import javax.swing.JFrame;

public class Frame extends JFrame{
    private static final long serialVersionUID = 1L;

    public Frame() {
        setLayout( new BorderLayout() );
        getContentPane().add( BorderLayout.SOUTH, new BottomBar() );
    }
} 
```

底栏

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.GradientPaint;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.RenderingHints;

import javax.swing.JComponent;

public class BottomBar extends JComponent {
    private static final long serialVersionUID = 1L;

    public BottomBar() {
        setSize(200, 30);
        setPreferredSize( new Dimension(200, 30) );
    }

    protected void paintComponent(Graphics g) {
        Graphics2D g2 = (Graphics2D)g;

        g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING,RenderingHints.VALUE_ANTIALIAS_ON);

        GradientPaint gradient = new GradientPaint(0, 0, new Color(185, 185, 185), 0, getHeight() , new Color(151, 151, 151) );
        g2.setPaint(gradient);
        g2.fillRect(0, 0, getWidth(), getHeight());

        g2.setColor( new Color(64, 64, 64) );
        g2.drawLine(0, 0, getWidth(), 0);
        g2.setColor( new Color(215, 215, 215) );
        g2.drawLine(0, 1, getWidth(), 1);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T16:56:48.057

我无法重现您在 1.6 上描述的效果；您可以在 1.7 上尝试下面的[sscce](http://sscce.org/)。请注意，您的示例有几个建议：

*   避免，正如[这里](https://stackoverflow.com/q/7229226/230513)`setXxxxSize()`所讨论的。如果您只想要一个 30 像素高的条形图，请按如下所示进行覆盖。如果您稍后决定添加组件，则需要添加布局管理器。`SOUTH``getPreferredSize()`

    ```
    @Override
    public Dimension getPreferredSize() {
        return new Dimension(0, 30);
    } 
    ```

*   用于`pack()`让`Window`采用封闭组件的首选尺寸。我在 ; 中添加了`JPanel`任意`CENTER`大小 调整框架的大小以查看条在`SOUTH`.

*   Swing GUI 对象应该*只*在[事件分派线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)上构建和操作。

![底栏](../Images/8f72f542e0ddfa766d7a1acfe81eb167.png)

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.GradientPaint;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.RenderingHints;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JPanel;

/** @see https://stackoverflow.com/a/13610367/230513 */
public class Main {

    public static void main(String args[]) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                JFrame frame = new JFrame("BottomBar");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.add(new JPanel() {

                    @Override
                    public Dimension getPreferredSize() {
                        return new Dimension(320, 240);
                    }
                }, BorderLayout.CENTER);
                frame.add(new BottomBar(), BorderLayout.SOUTH);
                frame.pack();
                frame.setLocationByPlatform(true);
                frame.setVisible(true);
            }
        });
    }

    private static class BottomBar extends JComponent {

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(0, 30);
        }

        @Override
        protected void paintComponent(Graphics g) {
            Graphics2D g2 = (Graphics2D) g;
            g2.setRenderingHint(
                RenderingHints.KEY_ANTIALIASING,
                RenderingHints.VALUE_ANTIALIAS_ON);
            GradientPaint gradient = new GradientPaint(
                0, 0, new Color(185, 185, 185),
                0, getHeight(), new Color(151, 151, 151));
            g2.setPaint(gradient);
            g2.fillRect(0, 0, getWidth(), getHeight());
            g2.setColor(new Color(64, 64, 64));
            g2.drawLine(0, 0, getWidth(), 0);
            g2.setColor(new Color(215, 215, 215));
            g2.drawLine(0, 1, getWidth(), 1);
        }
    }
} 
```

# java - 对象数组有帮助！（数组类型被解析为类类型）

> ID：13607538
> 
> 赞同：-1
> 
> 时间：2012-11-28T14:36:01.537
> 
> 标签：java, arrays, types

好的，所以我有一个 A 类和一个 B 类，A 类包含一个 B 数组，这是我在数组中添加一个新 B 的代码。

```
public void addNewB(B b){
  course[noOfBs]= b;
  noOfBs++;
} 
```

Java说'表达式的类型必须是数组类型但它解析为B'

我添加到数组的理论是因为 noOfB 是数组中的下一个空索引（假设没有被删除），所以这段代码只会将 B 放在下一个空槽中。

为什么这不起作用？！:(（抱歉布局不佳，我无法开发这个网站！）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T14:38:56.617

该错误表明您的变量的类型`course`实际上是`B`，而不是`B[]`。看看声明 - 我很确定你会发现它看起来像这样：

```
B course; 
```

如果不是这种情况，请编辑您的问题以包含声明。

另外，考虑使用 a `List<B>`，因此您可以使用：

```
public void addNewB(B b) {
    course.add(b);
} 
```

...并完全删除您的`noOfBs`变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T14:55:32.740

我认为你做错了什么。因为你没有给出完整的信息。我会假设你的声明或你调用函数的方式可能是错误的。这应该有效。

```
B course[]=new B[MAX_COURSES]; /* This declares an array of refereneces */

public void addNewB(B b){
  course[noOfBs]= b;
  noOfBs++;
} 
```

调用函数：

```
B course1=new B(); b.setCourseName("....") /* Make the object of B */
addNew(course1); 
```

# bash - 使用带有 awk 或 sed 的列拆分日志文件

> ID：13607539
> 
> 赞同：2
> 
> 时间：2012-11-28T14:36:09.170
> 
> 标签：bash, logging, awk, sed

我有一个看起来像这样的日志文件：

```
www.domainone.com FIX 3.3 12.12.123.1
www.domainone.com FIX 3.4 12.12.123.1
www.domainone.com FIX 2.4 12.12.123.1
www.domaintwo.com MAX 1.4 44.15.153.5
www.domaintwo.com MAX 3.2 44.15.153.5
www.domaintwo.com MAX 3.9 44.15.153.5
www.domaintwo.com MAX 12.4 44.15.153.5
www.domainthree.com NAN 3.4 34.45.144.7
www.domainthree.com NAN 2.4 34.45.144.7
www.domainthree.com NAN 3.2 34.45.144.7
www.domainthree.com NAN 3.3 34.45.144.7
www.domainthree.com NAN 1.4 34.45.144.7 
```

我想运行一个 grep、awk、sed 或其他 bash 命令/脚本，该命令/脚本将按最后一列拆分该日志文件，因此结果是 3 个使用 IP 命名的日志文件，不带点。所以，其中之一是 34.45.144.7.log 并且有

```
www.domainthree.com NAN 3.4 34.45.144.7
www.domainthree.com NAN 2.4 34.45.144.7
www.domainthree.com NAN 3.2 34.45.144.7
www.domainthree.com NAN 3.3 34.45.144.7
www.domainthree.com NAN 1.4 34.45.144.7 
```

我能够使用 awk 对它们进行排序并从原始日志中删除一些列，但不知道如何使用一列拆分为文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T14:41:26.847

如果 IP 始终是第四列，则可以使用

```
awk '{ filename=$4".log"; if (prev && (filename != prev)) close(prev); print >>filename; prev=filename }' ips.log 
```

或者根据@Ed Morton 的说法，甚至更好

```
awk '{ print >>($4".log"); close($4".log") }' ips.log 
```

这会将整行打印到由第四列（IP）+“.log”组成的文件中

这是 Ubuntu 12.04 和 GNU awk 3.1.8。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T22:06:59.167

应@OlafDietsche 的要求：

```
awk '{ filename=$4".log"; if (filename != prev) close(prev); print >filename; prev=filename }' ips.log 
```

没想到评论会拖这么久，否则我会立即这样做！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T14:46:43.060

> 所以结果是 3 个使用 IP 命名的日志文件，**不带点**。

```
awk '{f=$4; gsub(/\./,"",f);print > f".log"}' ips.log 
```

# asp.net - 404、401 和其他异常的 ASP.NET MVC4 错误处理

> ID：13607543
> 
> 赞同：5
> 
> 时间：2012-11-28T14:36:19.613
> 
> 标签：asp.net, asp.net-mvc

我正在努力了解如何正确处理 ASP.NET MVC4 中的错误。例如，我使用“Internet 应用程序”模板创建了一个新的 MVC4 项目，并更新了我的家庭控制器以测试一些错误情况：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        ViewBag.Message = "Hello";
        return View();
    }

    public ActionResult About()
    {
        throw new HttpException(401, "Not Authorized");
    }

    public ActionResult Contact()
    {
        throw new Exception("Oh no, some error occurred...");
    }
} 
```

我在 web.config 文件中启用了 customErrors：

```
<customErrors mode="On"></customErrors> 
```

当我运行应用程序并单击“联系”时，我看到了预期的*~/Views/Shared/Error.cshtml*视图，因为我已`HandleErrorAttribute`注册为全局过滤器。

但是，当我单击“关于”时，我会看到标准的 ASP.NET 黄色错误页面，上面写着“运行时错误”。**为什么这两个异常的处理方式不同，如何使用该属性`HttpException`获取要捕获的实例？`HandleError`**

* * *

**自定义错误配置**

理想情况下，我想要以下自定义错误页面：

*   一个很好的用户友好的自定义 404（未找到）页面
*   自定义 401（未授权）页面，通知用户他们无权访问（例如，在检查模型中特定项目的权限后抛出）
*   在所有其他情况下使用的通用错误页面（代替标准的黄色 ASP.NET 页面）。

我创建了一个新的“错误”控制器，其中包含上述每个场景的视图。然后我在 web.config 中更新了 customErrors，如下所示：

```
<customErrors mode="On" defaultRedirect="~/Error/Trouble">
    <error statusCode="404" redirect="~/Error/NotFound"></error>
    <error statusCode="401" redirect="~/Error/NotAuthorized"></error>
</customErrors> 
```

404 页面工作正常，但**我根本没有得到 401 页面**。相反，当我尝试访问控制器上的操作时，我得到了*~/Error/Trouble*视图（指定为 的视图）。`defaultRedirect``About``Home`

**为什么我的自定义 401 重定向页面不起作用？**

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-28T14:52:49.620

ASP.NET 在内部使用 401 将用户重定向到登录页面。无论您打算在哪里抛出未经授权的 401，而不是抛出 403 禁止。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-22T05:42:48.077

如果您确实需要返回 401 而不是 403，则可以使用：

```
HttpContext.Current.Response.SuppressFormsAuthenticationRedirect = true 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-02-10T16:50:59.017

我遇到了类似的问题，尽管更改了 web.config，但我无法获得 401 错误来访问我的页面。

对于 401，您可能会看到标准的 401 Unauthorized 页面，即使您已将 401 添加到 web.config 中的 customerrors 部分。我读到，当使用 IIS 和 Windows 身份验证时，检查发生在 ASP.NET 甚至看到请求之前，因此您看到它是自己的 401。

对于我的项目，我编辑了 Global.asax 文件以重定向到我为 401 错误创建的路由，将用户发送到“未经授权查看此内容”视图。

在 Global.asax 中：

```
 void Application_EndRequest(object sender, System.EventArgs e)
    {
        // If the user is not authorised to see this page or access this function, send them to the error page.
        if (Response.StatusCode == 401)
        {
            Response.ClearContent();
            Response.RedirectToRoute("ErrorHandler", (RouteTable.Routes["ErrorHandler"] as Route).Defaults);
        }
    } 
```

在 Route.config 中：

```
 routes.MapRoute(
        "ErrorHandler",
        "Error/{action}/{errMsg}",
        new { controller = "Error", action = "Unauthorised", errMsg = UrlParameter.Optional }
        ); 
```

在控制器中：

```
 public ViewResult Unauthorised()
    {
        //Response.StatusCode = 401; // Do not set this or else you get a redirect loop
        return View();
    } 
```

# python - 描绘没有重复的传奇

> ID：13607545
> 
> 赞同：4
> 
> 时间：2012-11-28T14:36:21.730
> 
> 标签：python, matplotlib

我想在 Matplotlib 散点图中添加一个彩色图例。这是我的代码：

```
xs = [1, 2, 1, 4, 3, 2]
ys = [1, 3, 2, 2, 3, 1]
labels = [1, 1, 0, 2, 1, 3]

label_dict = {0: 'r', 1: 'k', 2: 'b', 3: 'g'}
legend_dict = {0: 'foo', 1: 'bar', 2: 'baz', 3: 'biff'}

for x, y, label in zip(xs, ys, labels):
    plt.scatter(x, y, c=label_dict.get(label), label=legend_dict.get(label))

plt.legend()
plt.show() 
```

![在此处输入图像描述](../Images/9af8daca00c9c45dac26ad796cedd515.png)

如何让图例只为每种颜色显示一个标签，而不是为每个点显示一个标签？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T14:41:19.570

您可以跟踪查看过的标签：

```
import pylab as plt

xs = [1, 2, 1, 4, 3, 2]
ys = [1, 3, 2, 2, 3, 1]
labels = [1, 1, 0, 2, 1, 3]

label_dict = {0: 'r', 1: 'k', 2: 'b', 3: 'g'}
legend_dict = {0: 'foo', 1: 'bar', 2: 'baz', 3: 'biff'}

seen = set()
for x, y, label in zip(xs, ys, labels):
    if label not in seen:
        plt.scatter(x, y, c=label_dict.get(label), label=legend_dict.get(label))
    else:
        plt.scatter(x, y, c=label_dict.get(label))
    seen.add(label)

plt.legend()
plt.show() 
```

如果您愿意，可以将 if/else 子句压缩为 1 行：

```
seen = set()
for x, y, label in zip(xs, ys, labels):
    plt.scatter(x, y, c=label_dict.get(label), label=legend_dict.get(label) if label not in seen else None)
    seen.add(label) 
```

* * *

我认为我个人更愿意将数据分组。换句话说，我可能会将具有相同标签的所有数据存储在一起，然后您只需为`plot`每种标签类型发出一个命令：

```
import numpy as np
import pylab as plt

xs = [1, 2, 1, 4, 3, 2]
ys = [1, 3, 2, 2, 3, 1]
labels = [1, 1, 0, 2, 1, 3]

xs = np.array(xs)
ys = np.array(ys)
labels = np.array(labels)

labels_masks =( (x,(labels == x)) for x in set(labels))
data_dict = dict( (lbl,(xs[mask],ys[mask])) for lbl,mask in labels_masks )

label_dict = {0: 'r', 1: 'k', 2: 'b', 3: 'g'}
legend_dict = {0: 'foo', 1: 'bar', 2: 'baz', 3: 'biff'}

for label,data in data_dict.items():
    x,y = data
    plt.scatter(x,y,c=label_dict.get(label),label=legend_dict.get(label))

plt.legend()
plt.show() 
```

# java - JMock 期望 IllegalArgumentException

> ID：13607551
> 
> 赞同：3
> 
> 时间：2012-11-28T14:36:40.283
> 
> 标签：java, jmock

我正在尝试使用该`allowing`方法来修复我的一个模拟对象上的方法的返回值。`jdbc`我在要允许的模拟对象上有以下方法：

```
List<T> query(String sql, RowMapper<T> rowMapper) 
```

我正在使用`with(any(RowMapper.class))`，因为我真的不在乎`RowMapper`使用哪个 - 我只想确保当它`query`使用该 SQL 调用时它返回一个`List`with `"bob"`。

```
import java.util.Arrays;

import org.jmock.Expectations;
import org.jmock.Mockery;
import org.jmock.auto.Mock;
import org.jmock.integration.junit4.JUnitRuleMockery;
import org.junit.Before;
import org.junit.Rule;
import org.junit.Test;
import org.springframework.jdbc.core.RowMapper;
import org.springframework.jdbc.core.simple.SimpleJdbcOperations;

public class GetCustomersPhaseTest
{
    @Rule
    public final JUnitRuleMockery mockery = new JUnitRuleMockery();

    @Mock
    private SimpleJdbcOperations jdbc;

    @Mock
    private EventPublisher events;

    @Mock
    private Context context;

    private GetCustomersPhase phase;

    @Before
    public void setup()
    {
        phase = new GetCustomersPhase(jdbc, events);
    }

    @Test
    public void testGetCustomers()
    {
        mockery.checking(new Expectations() {
            {
                allowing(jdbc).query(with(equal("SELECT Name FROM Customers")), with(any(RowMapper.class)));
                will(returnValue(Arrays.asList("Bob")));
            }
        });

        phase.execute(context);
    }
} 
```

然而，这给了我，

```
java.lang.IllegalArgumentException: not all parameters were given explicit matchers: either all parameters must be specified by matchers or all must be specified by values, you cannot mix matchers and values
    at org.jmock.internal.InvocationExpectationBuilder.checkParameterMatcherCount(InvocationExpectationBuilder.java:98)
    at org.jmock.internal.InvocationExpectationBuilder.createExpectationFrom(InvocationExpectationBuilder.java:91)
    at org.jmock.internal.InvocationToExpectationTranslator.invoke(InvocationToExpectationTranslator.java:19)
    at org.jmock.internal.FakeObjectMethods.invoke(FakeObjectMethods.java:38)
    at org.jmock.lib.JavaReflectionImposteriser$1.invoke(JavaReflectionImposteriser.java:33)
    at $Proxy10.query(Unknown Source)
    at com.thecat.test.GetCustomersPhaseTest$1.<init>(GetCustomersPhaseTest.java:45)
    at com.thecat.test.GetCustomersPhaseTest.testGetCustomers(GetCustomersPhaseTest.java:43)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.jmock.integration.junit4.JUnitRuleMockery$1.evaluate(JUnitRuleMockery.java:49)
    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

我查看了这个[问题](https://stackoverflow.com/questions/5761529/about-withanyclass-class-with-jmock)并试图解决这个问题，但我仍然无法让它工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T14:39:33.857

`SimpleJdbcOperations#query`将 an`Object...`作为最终参数。发生错误是因为这不是由一个`with`方法来解释的，我认为这是因为这编译为将一个空数组传递给这个没有考虑到的方法。

如果你使用它会起作用，

```
allowing(jdbc).query(with(equal("SELECT Name FROM Customers")), with(any(RowMapper.class)), with(equal(new Object[0])));
will(returnValue(Arrays.asList("Bob"))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T16:15:22.377

快速检查一下，你能确保你导入了正确的 with()、equalTo() 和 any() 方法吗？有时其他包也有类似的方法。

# ruby-on-rails-3 - 从 Cell 渲染共享组件

> ID：13607554
> 
> 赞同：0
> 
> 时间：2012-11-28T14:36:47.173
> 
> 标签：ruby-on-rails-3, partial-views, rails-cells

我正在使用 Cell，它们很棒，但是我`app/views/shared/`想在 Cell 中使用一些组件。

那可能吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T14:41:52.407

它在文档中有所描述:)

> 有时您需要从单元格中的应用程序/视图呈现全局部分。例如， gmaps4rails 帮助器依赖于全局部分。虽然这打破了封装，但在单元格中仍然可能 - 只需添加全局视图路径。

```
class MapCell < Cell::Rails
  append_view_path "app/views" 
```

（取自：[https](https://github.com/apotonick/cells) ://github.com/apotonick/cells ）

# java - 时间格式的毫秒和纳秒

> ID：13607555
> 
> 赞同：4
> 
> 时间：2012-11-28T14:36:50.673
> 
> 标签：java

这是我的代码：

```
long currentTime = System.currentTimeMillis();
Date date = new Date(currentTime); // if you really have long
String result = new SimpleDateFormat("HH:mm:ss").format(date.getTime()); 
```

是否可以在日期格式中添加毫秒和纳秒？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-28T14:39:28.940

您可以通过在末尾添加来添加毫秒`SSS`，例如格式将为`HH:mm:ss.SSS`.

`SimpleDateFormat`到纳秒没有参考。通常`System.nanoTime()`用于性能调试而不是用于显示目的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-28T14:38:40.200

```
String result = new SimpleDateFormat("HH:mm:ss:SSS").format(date);

"HH:mm:ss:SSS" //SSS stands for milliseconds 
```

检查[SimpleDateFormat API](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)了解更多信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-24T12:56:22.933

```
String timeStamp = new SimpleDateFormat("dd:MM:yyyy_HH:mm:ss:SSS").format(Calendar.getInstance().getTime());
timeStamp = timeStamp + ":" + System.nanoTime(); 
```

这给了我输出，

```
24:03:2014_18:24:09:890:2018826751601473 
```

# matlab - Matlab GPU arrayfun 共享变量

> ID：13607558
> 
> 赞同：0
> 
> 时间：2012-11-28T14:37:03.763
> 
> 标签：matlab, matlab, parallel-processing, shared-memory, gpgpu

我正在使用带有函数和对象的[matlab](/questions/tagged/matlab "显示标记为“matlab”的问题") *GPU 计算*对函数中变量的元素执行逐元素函数：`arrayfun``gpuArray``gpuArray`

```
[ output ] = MyFunc( element, SharedMatrix )
//
// Process element with Shared Matrix
//
end 
```

我的代码是这样的：

```
SharedMatrix = magic(5000); %Large Memory Object
SharedMatrix = gpuArray(SharedMatrix);
elements = magic(5);
gpuElements = gpuArray(elements );
//Error on next line, SharedMatrix object must be a scaler.
result = arrayfun(@MyFunc,gpuElements,SharedMatrix); 
```

我听说全局变量不能用于*GPU 计算*。

有没有办法这样做`arrayfun`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-27T14:25:05.943

使用最新版本的 Parallel Computing Toolbox，这可以通过结合使用嵌套函数来完成，例如`arrayfun`：

```
function result = gpueg()

largeArray = gpuArray.rand(5000);

smallArray = magic(5);

    function out = myNestedFcn(in)
    % nested function accesses 'smallArray'    
        element = ceil(in * 25);
        out = smallArray(element);
    end

result = arrayfun(@myNestedFcn, largeArray);

end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T09:53:54.560

`arrayfun`当前要求所有输入的大小（或标量）兼容，并且处理以元素方式完成。

另外，`Parallel Computing Toolbox`在 Matlab 中不支持`Global Variables`，所以不能使用`Parallel Computing Toolbox`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-27T13:04:40.853

可能您可以使用[句柄类](http://www.mathworks.com/help/matlab/ref/handle.html)：

```
classdef VarByRefContainer < handle
    properties
        val = [];
    end
end

handle = VarByRefContainer;
handle.val = SharedMatrix;
cellfun(@myfun, {handle, handle, handle}); 
```

另请参阅[此问题](https://stackoverflow.com/questions/17343209/can-i-share-memory-between-cellfun-threads-on-gpu)。

# javascript - jquery：选择的一个选项具有空值

> ID：13607559
> 
> 赞同：0
> 
> 时间：2012-11-28T14:37:08.987
> 
> 标签：javascript, jquery

这是我的 HTML：

```
<select name="category" class="tri_cat">
<option value="">classer par catégories</option>
<option value="1">label 1</option>
<option value="2">label 2</option>
<option value="9">label 3</option>
<option value="3">label 4</option>
<option value="4">label 5</option>
<option value="5">label 6</option>
<option value="6">label 7</option>
<option value="7">label 8</option>
<option value="8">label 9</option>
</select> 
```

当我尝试使用 jquery 获取选择的值时，一切正常：

```
console.log($('.tri_cat').val()); 
```

除了标签 5（又名值 4），日志返回一个空字符串。

在其他情况下，日志会返回正确的值。

在记录值之前，我会检查 url 中的哈希值，如果存在则更改值。这是我弄乱输入值的唯一时刻：

```
$('.tri_cat').val(hash); 
```

这对我来说完全是个谜：s

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:46:16.077

我尝试使用这个小提琴，添加一个按钮来控制何时记录值：

```
$("#btn").click(function(){
  console.log($('.tri_cat').val());
}); 
```

在我的小提琴上试试：http: [//jsfiddle.net/CPLK2/](http://jsfiddle.net/CPLK2/)

就我而言，一切正常，标签 5 到

# php - 处理从旧网站到新网站的永久链接用户的最佳方式？

> ID：13607563
> 
> 赞同：1
> 
> 时间：2012-11-28T14:37:18.410
> 
> 标签：php, apache, .htaccess

我有一个网站，其中包含如下链接：

```
http://www.example.com/about
http://www.example.com/about-computing
http://www.example.com/about-web 
```

我正在设计我的网站的新版本，最终将取代旧版本。

我如何处理将这些书签添加到我的新网站格式的用户？：

```
http://www.example.com/about
http://www.example.com/about/computing
http://www.example.com/about/web 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:41:48.057

您可以保留旧结构并在每个页面上进行手动重定向......但这可能会很快变得混乱。

或者更清洁和更易于维护，您可以通过 .htaccess 文件来完成

例如：

```
redirect old-URL URL-to-go-to 
```

所以你可以做类似的事情

```
redirect /about-computing http://www.example.com/about/computing
redirect /about-web http://www.example.com/about/web
etc... 
```

更多信息在[这里](http://www.htaccessredirect.co.uk/)

# iphone - 使用 CIDetector iPhone 进行图像识别

> ID：13607565
> 
> 赞同：0
> 
> 时间：2012-11-28T14:37:19.300
> 
> 标签：iphone, ios

我正在尝试识别已存储在我的 iphone 应用程序中的图像。我正在从相机捕获图像并尝试将其与存储的图像匹配。我的问题是可以使用 CIDetector 库识别图像。如果有人知道请帮忙:)

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:49:13.397

从`CIDetector.h`

```
// Types to be used for +[CIDetector detectorOfType:context:options:]

/* Specifies a detector type for face recognition. */
CORE_IMAGE_EXPORT NSString* const CIDetectorTypeFace __OSX_AVAILABLE_STARTING(__MAC_10_7, __IPHONE_5_0); 
```

答案：没有。

# c# - 投射到字典

> ID：13607567
> 
> 赞同：1
> 
> 时间：2012-11-28T14:37:23.093
> 
> 标签：c#, idictionary

下面的函数返回一种动态类型，将其转换为 IDictionary 的最有效方法是什么

```
 public dynamic GetEntities(string entityName, string entityField) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T14:39:35.730

我可能会和`as`运营商一起去。

```
var result = GetEntities("blah", "blahblah") as IDictionary<string,string>; 
```

然后做一个`null`检查。

**更新**

关于您问题的“高效”部分，我认为`as`与您可以采取的其他一些途径相比可能非常有效：

1.  您可以盲目地将其强制转换为`IDictionary<string,string>`然后捕获异常，但是将异常用于控制流并不是一个好主意，而且成本很高。
2.  您可以使用类似 的约定`expression is type ? (type)expression : (type)null`，但在这种情况下，您会计算 `expression`两次（但如果预期类型不是表达式返回的类型，则会得到 null）。所以你在做双重评估。
3.  `as`仅适用于参考或装箱转换，不适用于执行用户定义的转换，因此如果您需要，那么`as` 不适合您。

请参阅MSDN 上的[这篇文章](http://msdn.microsoft.com/en-us/library/cscsdfbt%28v=vs.110%29.aspx)。

**更新 2**

我对`IDictionary`. 您可以只使用`IDictionary`after`as`而不是指定泛型类型参数。我想这取决于你的期望。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T14:39:51.047

```
var dict = GetEntities(entityName, entityField) as IDictionary 
```

或者

```
var dict = GetEntities(entityName, entityField) as IDictionary<string,string> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T14:40:12.190

这边走：

```
IDictionary dictionary = GetEntities("", "") as IDictionary; 
```

然后要么`dictionary`是你的对象，要么是 null - 取决于`GetEntities`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T14:40:19.300

```
IDictionary dict = GetEntities(name, field) as IDictionary; 
```

然后检查`null`，一切都很好。如果您不希望它`dict`为空，但它会引发异常，请使用

```
IDictionary dict = (IDictionary) GetEntities(name, field); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T14:40:25.403

试试这个：-

```
 var dict = GetEntities(entityName, entityField) as IDictionary<string,string> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-28T14:42:09.913

这真的取决于什么是动态的底层类型

如果它是从 IDictionary 转换为动态的，你可以简单地转换它

```
var dict = GetEntities(entityName, entityField) as IDictionary 
```

如果没有，事情就会变得复杂，而且并不总是可以做到

在这种情况下首先需要通过调用`GetType`方法检查底层类型，如果是托管类型而不是DynamicObject，你很幸运，使用反射，如果是DynamicObject，我认为没有办法将其转换为字典，因为它可能有自定义实现，甚至反射在这种情况下也不起作用

# css - Twitter引导程序覆盖“导航栏”中的“a”

> ID：13607568
> 
> 赞同：2
> 
> 时间：2012-11-28T14:37:23.857
> 
> 标签：css, twitter-bootstrap

如何`padding`在`a`_`navbar`

我得到以下作为css规则

```
.navbar .nav > li > a {
  浮动：无；
  填充：10px 15px 10px；
  颜色：#555555；
  文字装饰：无；
  文字阴影：0 1px 0 #ffffff;
}
```

我想拥有`padding: 5px, 5px, 5px`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-25T13:10:38.003

要“覆盖”一种样式，我们需要一个更具体的规则。接受的答案使用`!important`规则，这[应该是最后的手段](https://stackoverflow.com/questions/13743671/is-important-bad-for-performance)。与 CSS 的情况一样，我们有很多可用的选项。

**选项 1：**创建一个附加类

```
.primary.navbar .nav > li > a {
    padding: 5px 5px 5px;
} 
```

**选项 2：**重复上课

```
.navbar.navbar .nav > li > a {
    padding: 5px 5px 5px;
} 
```

[W3C：](http://www.w3.org/TR/css3-selectors/#specificity)

> 允许重复出现相同的简单选择器并且确实增加了特异性。

**选项 3：**使用相同的类，但在引导后定义此类

```
 <link rel="stylesheet" href="bootstrap.css">
 <link rel="stylesheet" href="modify_bootstrap.css"> 
```

如果您还不知道这一点，`type="text/css"` [则在 HTML5 中不需要](https://stackoverflow.com/questions/5409114/is-type-text-css-necessary-in-a-link-tag)

```
.navbar .nav > li > a {
    padding: 5px 5px 5px;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T14:49:31.227

使用引导程序存在问题，在您必须修改它之前它很好。

我通过进入`bootstrap.css`并搜索“.navbar .nav”（我也在 ruby​​ on rails 项目中使用引导程序）找到了您的特定规则，它位于第 4380 行附近。（这是未缩小的版本）

所以你有几个选择：

*   您可以在那里找到它并修改规则。

*   如果你只需要它，你可以内联覆盖它。

*   您可以将其放入您知道的 css 文件中（我假设您使用 rails）rails 将预编译它，使其晚于 twitters 规则（在 css 中读取的最后一条规则是应用的规则）。

*   或者您可以编写自己的规则并`!important`在规则末尾使用。看起来像这样：

    ```
    .navbar .nav > li > a {
        padding: 5px 5px 5px !important;
    } 
    ```

这是危险的，（从长远来看，它可能会使您的 css 更难维护。）但如果所有其他方法都失败了，这仍然是一个有效的选择。

注意：您实际上应该使用未缩小版本的引导程序进行开发。当 rails 编译你的资产进行部署时，它会为你缩小它。使修改第 3 方文件 100 倍更容易使用。

（这也假设您不使用引导 gem 来导入您的 css，在这种情况下，请参阅上面的选项之一）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-10T10:12:05.957

您可以在您的元素中添加一个类，并在您链接到您之后`my-padding`的内容中使用以下内容`app.css``html``bootstrap.css`

```
.navbar-nav > li > .my-padding {
    padding: 5px 5px 5px;
}
```

# angularjs - 复杂的角度js ng-class

> ID：13607569
> 
> 赞同：38
> 
> 时间：2012-11-28T14:37:24.617
> 
> 标签：angularjs, ng-class

我有该组件，但在为其设置 css 类时遇到问题。我希望它始终具有一类“盒子”，然后具有由指令“类”参数和一个条件类“迷你”指定的附加类。

从概念上讲，我想要实现的是这样的：

```
<div class="box {{class}}" data-ng-class="{mini: !isMaximized}">
...
</div> 
```

问题是当我设置class html属性时，省略了ng-class属性。如何在不更改控制器的情况下使我的示例工作？是否有可能，或者我应该在控制器中设置类（我希望避免）？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-11-28T15:05:44.387

一个快速的解决方案是在 ng-class 属性中定义 box 类：

```
<div data-ng-class="{mini: !isMaximized, box: true}"></div> 
```

如果你想包含一个作用域变量作为一个类，你不能使用 ng-class：

```
<div class="{{class}} box {{!isMaximized && 'mini' || ''}}"> 
```

Angular 表达式不支持三元运算符，但可以这样模拟：

条件 && (如果为真则回答) || （如果为假，请回答）

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-02-25T23:40:50.447

我需要多个类，其中一个是 $scope 派生的，其他是文字类。感谢安德烈的提示，下面对我有用。

```
<h2 class="{{workStream.LatestBuildStatus}}" 
    ng-class="{'expandedIcon':workStream.isVisible,  'collapsedIcon':!workstream.isvisible}">{{workStream.Name}}</h2> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-04-08T08:45:10.637

*编辑：对于较新版本的 Angular，请参阅[Nitins 答案](https://stackoverflow.com/a/28731898/413785)，因为它是最好的 atm*

对我来说，这很有效（我目前正在使用 AngularJS v1.2.14，所以我猜 1.2.X+ 应该支持这个，不确定早期版本）：

```
<div class="box" data-ng-class="{ {{myScopedObj.classesToAdd}}: true, mini: !isMaximized }"></div> 
```

我用这种方式替换了你的`{{class}}`，`{{myScopedObj.classesToAdd}}`以表明任何范围变量甚至更复杂的对象都可以使用。

因此，以这种方式创建的每个 DIV 元素都将具有“box”类和包含在其中的任何类`myScopedObj.classesToAdd`（在使用 ng-repeat 并且数组中的每个元素都需要应用不同的类时很有用），并且它将具有“mini”类如果`!isMaximized`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-05-09T04:03:47.033

另一种无需双花括号并包含范围变量的方法，使用 angular v1.2+ 进行测试。

```
<div ng-class="['box', 
                aClass, 
               {true:'large': false: 'mini'}[isMaximized]]"></div> 
```

这也相当不错，因为变量可以使用不同的类型作为索引，而不会增加使用三元组的复杂性。它还可以消除对否定的任何需要；） **[这是一个小提琴链接](http://jsfiddle.net/HB7LU/13598/)**

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-06-02T05:16:26.133

您可以使用下面给出的简单表达式

```
ng-class="{'active' : itemCount, 'activemenu' : showCart}" 
```

# c# - 在 NHibernate Merge 中更新 Bag 项目

> ID：13607586
> 
> 赞同：0
> 
> 时间：2012-11-28T14:38:24.547
> 
> 标签：c#, nhibernate, cascade

有点好奇。我有一个 User 对象，其中包含一个包，每个 UserPhoto、UserMatchInterest、UserPreference 对象。我已经为包中的每个项目提供了对父用户的引用，并且使用 nhibernate 我已经对两种方式的映射进行了排序，因此当您第一次创建用户对象时，它会自动创建 UserPhoto、UserMatchInterest 和 UserPreference 对象收集袋，将 UserId 设置为父 User 对象，效果很好。

例如，UserPhoto 表有一个 PhotoId PK 列和一个 UserId FK 列。UserPhoto 对象具有 PhotoId 属性和 User 属性（不是 UserId），因此它不持有 UserId，而是持有对父级的引用并根据用户 PK 填充 DB 列。

我遇到的问题是当我想一次性更新用户对象时。User 对象的其余部分更新正常，但是当涉及到照片时，它会在数据库中创建新照片。我可以理解为什么，因为它们根本没有链接到作为 ASP.NET 网站可以接受的以前的照片会话对象，所以我将处理分离的对象。但它留下了旧的。因此，如果您有照片 ID 1 和 2，且 UserId=1。更新后，您将拥有 UserId=1 的照片 1、2、3 和 4。我想要的是删除照片 1 和 2，然后插入 3 和 4。

我试图将它们作为一个集合独立检索并首先在事务中删除它们，但我收到了消息

```
Message = "deleted object would be re-saved by cascade (remove deleted object from associations) 
```

要删除的代码如下

```
// First delete existing photos, interests and preferences

       var photos = from row in repository.GetItemsAsQuery<UserPhoto>()
                     where row.User.UserId == user.UserId
                     select row;
        repository.DeleteItems(photos.ToList());

        var interests = from row in repository.GetItemsAsQuery<UserMatchInterest>()
                        where row.User.UserId == user.UserId
                        select row;
        repository.DeleteItems(interests.ToList());

        var preferences = from row in repository.GetItemsAsQuery<UserPreference>()
                          where row.User.UserId == user.UserId
                          select row;
        repository.DeleteItems(preferences.ToList());

        // Now update the user object and re-add the above linked items
        repository.UpdateItem(user); 
```

在存储库上引发错误。DeleteItems(interests.ToList()); 行，第一个删除通过正常 - 尽管它都在事务中。

我的问题是我是否以正确的方式更新数据库中的对象，该对象还包含需要更新的其他对象包？如果不手动设置 ID，我看不到任何更新现有照片对象的方法 - 并且用户可能已经替换了所有照片或添加/删除了所有照片，因此删除现有照片并重新添加新照片可能更干净，但是如何删除现有照片那些没有得到这个级联错误的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T13:23:17.100

根据您的描述，我设想以下课程

```
public class User
{
    public virtual int Id { get; set; }

    public virtual ICollection<Photo> Photos { get; private set; }
}

public class Photo
{
    public User Parent { get; set; }
    public virtual string Name { get; set; }
    public virtual byte[] Data { get; set; }
} 
```

那么映射看起来像

```
public class UserMap : ClassMap<User>
{
    public UserMap()
    {
        Id(x => x.Id);

        HasMany(x => x.Photos)
            .AsSet()   // no duplicate entries, allows NH to optimise some things
            .Cascade.AllDeleteOrphan()
            .Component(c =>
            {
                c.ParentReference(x => x.Parent);
                c.Map(x => x.Name);
                c.Map(x => x.Data);
            });
    }
} 
```

注意： Cascade.AllDeleteOrphan 将自动删除不再属于集合的所有子项

# xslt-1.0 - XSLT 按索引获取节点

> ID：13607588
> 
> 赞同：4
> 
> 时间：2012-11-28T14:38:28.160
> 
> 标签：xslt-1.0, transformation, xslt

我是 XSLT 的初学者，我正在使用它将 XML 转换为 XML

这是我收到的源 XML

**源 XML：**

```
<Response>
    <Pax>
        <Id>1</Id>
    </Pax>
    <Pax>
        <Id>2</Id>
    </Pax>
    <Travelers>
        <Traveler>
            <Name>ABC</Name>
        </Traveler>
        <Traveler>
            <Name>XYZ</Name>
        </Traveler>
    </Travelers>
</Response> 
```

我在 XSLT 下面写了

**XSLT：**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
version="1.0">

    <xsl:output method="xml" indent="yes" />

    <xsl:template match="Response">
        <xsl:element name="Root">
                <xsl:apply-templates select="Travelers/Traveler"/>
        </xsl:element>
    </xsl:template>

    <xsl:template match="Traveler">
          <xsl:element name="Person">
             <xsl:element name="PId">
                   <xsl:value-of select="//Pax/Id[position()]" />
             </xsl:element>
             <xsl:element name="Name">
                   <xsl:value-of select="Name" />
             </xsl:element>
          </xsl:element>
    </xsl:template>
</xsl:stylesheet> 
```

**输出：**

```
<Root>
  <Person>
    <PId>1</PId>
    <Name>ABC</Name>
  </Person>
  <Person>
    <PId>1</PId>
    <Name>XYZ</Name>
  </Person>
</Root> 
```

我想在下面生成 XML 输出

**预期输出：**

```
<Root>
  <Person>
    <PId>1</PId>
    <Name>ABC</Name>
  </Person>
  <Person>
    <PId>2</PId>
    <Name>XYZ</Name>
  </Person>
</Root> 
```

如上图所示，XML 唯一的问题在于`PId`，它应该具有价值`2`。

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T14:56:04.270

这是一个相对简单的解决方案。

**当这个 XSLT：**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output omit-xml-declaration="yes" indent="yes" />
  <xsl:strip-space elements="*" />

  <xsl:template match="/*">
    <Root>
      <xsl:apply-templates select="Pax" />
    </Root>
  </xsl:template>

  <xsl:template match="Pax">
    <xsl:variable name="vPosition" select="position()" />
    <Person>
      <PId>
        <xsl:value-of select="Id" />
      </PId>
      <Name>
        <xsl:value-of select="/*/Travelers/*[$vPosition]/Name" />
      </Name>
    </Person>
  </xsl:template>
</xsl:stylesheet> 
```

**...应用于原始 XML：**

```
<Response>
  <Pax>
    <Id>1</Id>
  </Pax>
  <Pax>
    <Id>2</Id>
  </Pax>
  <Travelers>
    <Traveler>
      <Name>ABC</Name>
    </Traveler>
    <Traveler>
      <Name>XYZ</Name>
    </Traveler>
  </Travelers>
</Response> 
```

**...产生了想要的结果：**

```
<Root>
  <Person>
    <PId>1</PId>
    <Name>ABC</Name>
  </Person>
  <Person>
    <PId>2</PId>
    <Name>XYZ</Name>
  </Person>
</Root> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T14:53:48.577

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output method="xml" indent="yes" />
  <xsl:template match="Response">
    <Root>
      <xsl:for-each select="Travelers/Traveler">
        <Person>
          <xsl:variable name="index" select="position()" />
          <Pid><xsl:value-of select="//Pax[$index]/Id"/></Pid>
          <Name><xsl:value-of select="Name"/></Name>
        </Person>
      </xsl:for-each>
    </Root>
  </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T13:40:51.187

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:output method="xml"/>
    <xsl:template match="/Response">
        <Root>
            <xsl:for-each select="Pax">
                <xsl:variable name="pos" select="position()"/>
                <Person>
                    <PId>
                        <xsl:value-of select="Id"/>
                    </PId>
                    <xsl:apply-templates select="//Travelers">
                        <xsl:with-param name="pos" select="$pos"/>
                    </xsl:apply-templates>
                </Person>
            </xsl:for-each>
        </Root>
    </xsl:template>
    <xsl:template match="Travelers">
        <xsl:param name="pos"/>
        <xsl:for-each select="//Name">
            <xsl:if test="position()=$pos">
                <xsl:copy-of select="."/>
            </xsl:if>
        </xsl:for-each>
    </xsl:template>
</xsl:stylesheet> 
```

# entity-framework - 如何在实体框架中禁用属性的自动映射

> ID：13607591
> 
> 赞同：3
> 
> 时间：2012-11-28T14:38:36.110
> 
> 标签：entity-framework, entity-framework-5, entity-framework-mapping

我决定在实体框架中使用流畅的映射。我的意图是通过没有任何属性和自动映射功能的代码映射所有内容。我发现的最好方法是类 EntityTypeConfiguration，我为项目中的每个实体实现了它。

后来我将属性添加到我的一个实体。这个属性不需要被持久化。我已经预料到，在我为这个属性添加映射之前，它会被数据库和持久层忽略。不幸的是，它不是那样工作的，并且属性是映射的。唯一的方法是使用 Ignore 方法或 NotMapped 属性，但我不想明确地这样做。

有什么办法可以阻止实体框架自动映射？我试图从 DbModelBuilder 中删除所有约定，但它没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T15:17:07.547

据我所知，没有其他方法可以解决它。您需要使用`Ignore()`或`[NotMapped]`。我倾向于更喜欢前者，因为它不会弄乱模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-07T16:49:56.947

实际上我已经尝试了很多方法： - 删除映射属性的自定义约定 - 删除所有约定

**但最简单（也是最干净）的方法是在映射类中使用反射并禁用所有未配置的属性映射。**

该代码（也是一个使用示例）在我的公共要点中。 [https://gist.github.com/hidegh/36d92380c720804dee043fde8a863ecb](https://gist.github.com/hidegh/36d92380c720804dee043fde8a863ecb)

# jquery - 带有 Wordpress 菜单的 jQuery - 如何在页面加载时隐藏子菜单

> ID：13607594
> 
> 赞同：1
> 
> 时间：2012-11-28T14:38:42.637
> 
> 标签：jquery, wordpress, menu

我有一个简单的 Wordpress 主题，带有一个包含主菜单项和子菜单项的侧边栏菜单。菜单出现在所有页面上。这是菜单的呈现方式：

```
<li id="menu-item-55" class="menu-item "><a href="?page_id=22">Main Menu Item 1</a></li>
<li id="menu-item-120" class="menu-item "><a href="#">Main Menu Item 2</a>
<ul class="sub-menu">
    <li id="menu-item-119" class="menu-item"><a href="?page_id=101">Sub Menu Item 1</a></li>
    <li id="menu-item-118" class="menu-item"><a href="?page_id=104">Sub Menu Item 2</a></li>
    <li id="menu-item-117" class="menu-item"><a href="?page_id=109">Sub Menu Item 3</a></li>
</ul>
</li>
<li id="menu-item-53" class="menu-item "><a href="?page_id=26">Main Menu Item 3/a></li> 
```

我正在使用一些简单的 jQuery 来切换子菜单项：

```
 $(document).ready(function() {
        $("#menu-item-120").click(function() {
            $('.sub-menu').slideToggle('medium');
        });
    }); 
```

这对于我的一个小问题的要求基本上没问题 - 我需要在页面加载时最初隐藏子菜单。在页面加载后使用 jQuery 隐藏菜单项会导致菜单短暂显示，这是不可接受的。

为了增加问题，理想情况下，如果正在显示子页面之一，则应始终显示子菜单。我很高兴在 ids 等中硬编码只是为了让事情正常工作，并且会感谢任何提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T15:40:27.240

您应该按照 Dejo Dekic 的建议使用 CSS 来执行此操作。或者你可以在这里添加 hide() ：

```
$(document).ready(function() {
    $(".sub-menu").hide();
    $("#menu-item-120").click(function() {
        $('.sub-menu').slideToggle('medium');
    });
}); 
```

CSS方式

```
.sub-menu { display: none; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:26:08.543

这是我可以为第二部分提出的建议：

在 header.php 中（通常应该定义/加载菜单），

```
 0.v) Set a css (as above) to hide all the sub-menus by default.
    i) Check if the page is a sub-page (http://mattvarone.com/wordpress/wordpress-check-page-parent/)
    ii) If Yes, set a class in the submenu for this page to show it.
        For this, you may have to change the naming convention of ids of the sub-menu items.
       They may be named as menu-item-<PageId>. In that case you may just add this to show (only) this submenu already : $('menu-item' + currentPageId).parent().show(); <-- Submenus will be enabled via javascript. 
```

# php - MySQL 插入 :: MAX(FIELD)+1 - 如果为空

> ID：13607596
> 
> 赞同：0
> 
> 时间：2012-11-28T14:38:46.960
> 
> 标签：php, mysql

> **可能重复：**
> [将行从一个表移动到另一个表（插入值列表与列列表不匹配）](https://stackoverflow.com/questions/12624511/moving-a-row-from-one-table-to-another-insert-value-list-does-not-match-column)

对于我的插入之一，我有以下内容：（PDO / MySQL）

```
 $this->sql = "INSERT INTO tblfixedfares NULL, SELECT NULL, IFNULL(MAX(FixedFareId), 0) + 1, '$fieldFrompc', '$fieldTopc', '$fieldDay', '1', 'Car') FROM tblfixedfares;
                    INSERT INTO tblfixedfares NULL, SELECT NULL, IFNULL(MAX(FixedFareId), 0) + 1, '$fieldFrompc', '$fieldTopc', '$fieldNight', '2', 'Car') FROM tblfixedfares;"; 
```

基本上，这不起作用，因为它没有插入`FixedFareId`.

我想要做的是将 FixedFareId 设置为大于最高固定票价 id 值的 1，如果为 null 则将 FixedFareId 设置为 1。

不确定代码到底有什么问题，但我可以看到它没有为 FixedFareId 拾取任何东西，因为我得到了以下响应：

```
Error: SQLSTATE[21S01]: Insert value list does not match column list: 1136 Column count doesn't match value count at row 1SQL

INSERT INTO tblfixedfares VALUES (NULL, 'le675', 'le115', '11', '1', 'Car');
INSERT INTO tblfixedfares VALUES (NULL, 'le675', 'le115', '22', '2', 'Car'); 
```

基本上两个插入发生在一个查询中，如果数据库中没有任何内容 FixedFareId 需要为 1：

所以第一个插入需要是：

```
INSERT INTO tblfixedfares VALUES (NULL, **1**, 'le675', 'le115', '11', '1', 'Car');
INSERT INTO tblfixedfares VALUES (NULL, **1**, 'le675', 'le115', '22', '2', 'Car'); 
```

下一个插入将是：

```
INSERT INTO tblfixedfares VALUES (NULL, **2**, 'le675', 'le115', '11', '1', 'Car');
INSERT INTO tblfixedfares VALUES (NULL, **2**, 'le675', 'le115', '22', '2', 'Car'); 
```

数据库如下：

id, **FixedFareId** , ShortPostcodeA, ShortPostcodeB, Fare, DayHalf, VehicleSystemId

id 为自增，fixedfareid 为 1 为空，fixedfareid 的最大值为+1 不为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:47:15.093

像这样更改您的查询：

```
 INSERT INTO tblfixedfares (SELECT NULL, IFNULL(MAX(FixedFareId), 0) + 1, '$fieldFrompc', '$fieldTopc', '$fieldDay', '1', 'Car' FROM tblfixedfares); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T15:10:03.390

也许您正在寻找：

```
INSERT INTO tblfixedfares SELECT NULL, COALESCE(MAX(FixedFareId),0) + 1, etc.. 
```

因此，如果 FixedFareId 的 MAX 为 NULL，则将其视为零，随后将“1”添加到其中，如果该字段为空，则结果为“1”。（因为 MAX(NULL) 产生“NULL”）。

# java - assertEquals(Object o1, Object o2) 是否使用 equals 方法

> ID：13607597
> 
> 赞同：57
> 
> 时间：2012-11-28T14:38:48.137
> 
> 标签：java, junit

换句话说， assertEquals 是否与覆盖的类一起使用`equals`

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-11-28T14:42:43.447

您可以在[Junit GitHub Repo](https://github.com/junit-team/junit)上找到 assertEquals 方法的[源代码](https://github.com/junit-team/junit/blob/master/src/main/java/junit/framework/Assert.java)：

```
/**
 * Asserts that two objects are equal. If they are not
 * an AssertionFailedError is thrown with the given message.
 */
static public void assertEquals(String message, Object expected, Object actual) {
    if (expected == null && actual == null) {
        return;
    }
    if (expected != null && expected.equals(actual)) {
        return;
    }
    failNotEquals(message, expected, actual);
} 
```

可以看到 Junit 正在使用该`.equals()`方法。

**编辑：**

代码片段来自已弃用的 Junit 版本。

[您可以在此处](https://github.com/junit-team/junit/blob/master/src/main/java/org/junit/Assert.java)阅读有关“新”Junit 的来源。思路大同小异，`.equals()`也使用了方法。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-28T14:41:34.637

> assertEquals 是否适用于覆盖等于的类？

是的，如果类有一个，则`assertEquals()`调用重写。`equals()`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-28T14:42:23.200

是的，它调用`equals`并且有一个单独的方法，`assertSame`它使用`==`. 只是为了澄清问题，因为所有对象都声明了，所以`assertEquals`可以与*任何*`equals`对象一起使用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-28T14:41:49.303

是的，它确实。

```
Object m = new Object() {

    @Override
    public boolean equals(Object obj) {
        System.out.println("proof!");
        return super.equals(obj);
    }
};
Assert.assertEquals(m, m); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-28T14:44:59.433

JUnit 是开源的，因此您可以自己在源代码中查找：[https ://github.com/junit-team/junit4/blob/master/src/main/java/org/junit/Assert.java](https://github.com/junit-team/junit4/blob/master/src/main/java/org/junit/Assert.java)

```
static public void assertEquals(String message, Object expected,
        Object actual) {
    if (equalsRegardingNull(expected, actual)) {
        return;
    } else if (expected instanceof String && actual instanceof String) {
        String cleanMessage = message == null ? "" : message;
        throw new ComparisonFailure(cleanMessage, (String) expected,
                (String) actual);
    } else {
        failNotEquals(message, expected, actual);
    }
}

private static boolean equalsRegardingNull(Object expected, Object actual) {
    if (expected == null) {
        return actual == null;
    }

    return isEquals(expected, actual);
}

private static boolean isEquals(Object expected, Object actual) {
    return expected.equals(actual);
} 
```

所以你可以看到它使用`equals`. 如果要比较身份，请使用`assertSame`.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-11-10T09:55:41.580

是 - TestNG 覆盖等于 -

```
static public void assertEquals(Object actual, Object expected, String message) {
    if((expected == null) && (actual == null)) {
      return;
    }
    if(expected != null) {
      if (expected.getClass().isArray()) {
        assertArrayEquals(actual, expected, message);
        return;
      } else if (expected.equals(actual)) {
        return;
      }
    }
    failNotEquals(actual, expected, message);
  } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-10-25T17:12:00.843

一般来说，答案是“是”，但是除非文档明确指定断言方法的行为，否则不应假设`equals`在所有情况下都会调用该断言方法。例如，何时`expected == actual`或`actual == null`断言方法可能在根本不调用的情况下快速返回`equals`。

JUnit 5's [`Assertions` class](https://junit.org/junit5/docs/current/api/org.junit.jupiter.api/org/junit/jupiter/api/Assertions.html) mentions this explicitly:

> Assertion methods comparing two objects for *equality*, such as the `assertEquals(expected, actual)` and `assertNotEquals(unexpected, actual)` variants, are *only* intended to test equality for an (un-)expected value and an actual value. They are not designed for testing whether a class correctly implements `Object.equals(Object)`. For example, `assertEquals()` might immediately return `true` when provided the same object for the expected and actual values, without calling `equals(Object)` at all. Tests that aim to verify the `equals(Object)` implementation should instead be written to explicitly verify the `Object.equals(Object)` contract by using `assertTrue()` or `assertFalse()` — for example, `assertTrue(expected.equals(actual))`, `assertTrue(actual.equals(expected))`, `assertFalse(expected.equals(null))`, etc.

# c# - 使用正则表达式从文件中提取数据 - 一次匹配行还是整个文件？

> ID：13607598
> 
> 赞同：1
> 
> 时间：2012-11-28T14:38:49.153
> 
> 标签：c#, .net, regex, file-io

我有一个程序，它读取文件的每一行，根据由正则表达式定义的特定格式提取数据。我可以调用文件的全部内容，而不是对文件中的每一行调用`Match()`多次。`Match()`哪个是更有效的解决方案？

后一种选择将需要该`RegexOptions.Multiline`选项。

**更新：**

该文件由最终用户指定，因此它可能很大（~37000 行，~2MB）。不必每行都包含有效条目。

我使用的正则表达式是`^\s*(OPTL_\w*)\s*=>\s*(\d+)\s*$`. 例如，这将匹配由 text 组成的行`OPTL_Example => 123`，但不会匹配由 text 组成的行`FooBar => 999`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T15:27:34.593

所以取决于你是在优化速度还是稳定性。

如果这是一个最终用户应用程序并且无法控制文件大小或内存，那么我会采取安全路线并逐行读取以保护内存。清楚地在循环外构建正则表达式，因此您只需在循环中调用 .Match 。ReadLine 非常快。

可以设置一些并行处理，以便在执行解析时读取下一行。但是那个简单的正则表达式会很快，不确定它会更快。一次一行或整个文件的磁盘 IO 读取文件很可能是最慢的操作。

如果这是一个分布有限且速度很关键的服务器应用程序，那么请全部阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T14:43:42.090

这取决于您需要的内存限制。如果您有多个正则表达式，您可以在整个文件上运行，将整个文件保存在内存中同样有效。但是，如果您的正则表达式修改行（然后重复此过程，级联正则表达式相互依赖），我会逐行解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T14:53:46.370

选择逐行解决方案可以让您并行运行正则表达式。问题是并行处理的所有开销是否值得。如果您的正则表达式很复杂和/或您对行进行了一些其他处理，那么可以并行运行，我至少会尝试一下。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T15:07:13.623

它没有通用和/或正确的答案，因为它取决于许多因素。I/O 的主要速度。你为什么不测试这两种解决方案？我希望使用 2MB 的大小来更快、更高效地处理整个内容。

# language-agnostic - 两个类之间的关系应该是什么？

> ID：13607600
> 
> 赞同：1
> 
> 时间：2012-11-28T14:38:58.287
> 
> 标签：language-agnostic, uml

我有两个课程；

```
 --------------              -------------------
     class  A                     class B
  --------------              -------------------
                                  int c
  --------------              -------------------

  --------------              ------------------- 
```

`class A`负责从用户那里获取输入，并`class B`负责存储输入令牌`class A`。

他们之间应该是什么关系？

它们之间有直接的关系：

*   `class A`函数接受输入，然后此输入直接存储在`class B`.
*   `class A`的功能之一是的*朋友*。`class B`

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-28T15:08:46.967

有三种可能：

*   A 可以访问 B（可能通过接口）来存储它产生的数据；
*   B 可以访问 A（可能通过接口）以获取它存储的数据；
*   它们可能是不相关的，更高级别的业务逻辑从 A 获取数据并将其存储在 B 中。

第三个是我的偏好，因为它使对象自包含并且更容易单独测试，并且更灵活，因为它们不受限制以特定方式一起行动。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-10-21T06:07:58.123

由于提供的信息有限，我在这里假设一个场景：

由于您希望 A 类存储/设置位于 B 类对象内部的一些数据，因此 A 类可能需要使用 B 类的 setter 方法。这是一种“使用”关系，可以归类为**关联**关系。

如果 A 类也负责创建 B 类的实例，那么关系就是**聚合**。

# autohotkey - 自动热键里面的自动热键

> ID：13607603
> 
> 赞同：3
> 
> 时间：2012-11-28T14:39:15.243
> 
> 标签：autohotkey

有没有办法在自动热键中编写自动热键？例如，我有一个自动热键，可以在我工作的选项卡中打开一些网站，并且我有一个自动热键，当我输入其中一些网站的用户名和密码时。有没有办法将密码自动热键 (actd(at symbol)) 放入 IE 选项卡自动热键中？我进行了一些搜索，但似乎无法发送 {@}，所以我不确定是否有其他方法可以发送。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-16T06:00:14.330

您的 AutoHotKey 脚本可以[#Include](http://www.autohotkey.com/docs/commands/_Include.htm)其他脚本，假设它们不是#Persistent。您可以循环浏览您的选项卡列表，然后调用一个或多个其他脚本。

至于发送@ 符号，您应该能够毫无问题地使用[发送命令。](http://www.autohotkey.com/docs/commands/Send.htm)如果您确实遇到了奇怪的问题，那么您可以尝试使用 SendRaw 命令或使用以下语法：`Send {raw}@`

如果这不能回答您的问题，请粘贴一些您正在尝试工作的代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-12-22T15:06:27.660

您可以做的是编写两个单独的脚本。一个没有分配自动热键，但被初始脚本调用。在您的情况下，您已经说过您已经有一个 tabopening 热键，所以我将使用两个脚本的一个非常基本的示例，但演示如何发送 @ 符号并从热键中调用另一个脚本。

我将使用的两个脚本是： `tabOpener.ahk`和 `passwordEntry.ahk`

它们将如下所示：

## *tabOpener.ahk*

```
#NoEnv  ; Recommended for performance and compatibility with future AutoHotkey releases.
SendMode Input  ; Recommended for new scripts due to its superior speed and reliability.
SetWorkingDir %A_ScriptDir%  ; Ensures a consistent starting directory.

; hotkey is set as WinowsKey+t and checks if FireFox exists, if so, it makes it active, if not, it starts FireFox
~#t::
IfWinExist, ahk_class MozillaWindowClass
{   WinActivate
    Send ^t
} else run firefox

;Upon opening a new tab in FireFox, the address bar has already got focus, 
;so send the web address (You can use COM functions for this, and are highly 
;recommended, but out of the scope of this example)
Send, hotmail.com{Enter}

;Waits until page is loaded.  Again COM functions are available as they can tell 
;when a page is finished loading, but that is a more involved example.
Sleep 5000

;Calls the password entry script.
Run passwordEntry.ahk
return 
```

## *密码输入.ahk*

```
#NoEnv  ; Recommended for performance and compatibility with future AutoHotkey releases.
SendMode Input  ; Recommended for new scripts due to its superior speed and reliability.
SetWorkingDir %A_ScriptDir%  ; Ensures a consistent starting directory.

;When using send, adding the {Raw} tag will literally interpret every 
;character in the remainder of a string.  For instance ^ will send ^ 
;instead of a Control keypress.
Send {Raw}Username@domain.tld
Send {Tab} {Raw}Password 
```

希望这会有所帮助。这个例子展示了使用 {Raw} 标记来发送特殊字符 ( [http://www.autohotkey.com/docs/commands/Send.htm](http://www.autohotkey.com/docs/commands/Send.htm) )，此外还使用 Run / 从现有热键中调用单独的脚本运行等待（[http://www.autohotkey.com/docs/commands/Run.htm](http://www.autohotkey.com/docs/commands/Run.htm)）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-07T15:39:52.700

```
;~ Alt+1 to send username (email format) and password
!1::Send, myUsername@mydomain.com{tab}myPassword{enter} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-15T17:47:34.160

根据您的网络浏览器，您可以使用 COM 对象非常轻松地处理此问题。您会找到用户 ID 密码字段，然后例如：

```
url := "http://yourwebsite.com"
wb := ComObjCreate("InternetExplorer.Application") ; create broswer object
wb.navigate(url)
wb.visible := true ; sets the browser as visible, defaults as not
While (wb.busy || wb.readyState <> 4)
    Sleep 100<br>
wb.document.all.username.value := "yourname@wherever.com"
wb.document.all.password.value := "Pa$$word15"
wb.document.all.btnLogin.click() 
```

然而，这取决于您是否使用 IE 访问您的网站。稍微看一下文档中的 COM 对象以了解它，您将了解一些关于 DOM 的非常基本的东西，这里是：[Basic DOM MSDN](https://msdn.microsoft.com/library/hh771916(v=vs.85).aspx)。我在 javascript 中设置“用户名”、“密码”和“btnLogin”控件 ID 的位置需要通过查看您的页面来发现。您还应该查看本教程：[AHK Basic COM/JavaScript Tutorial](http://www.autohotkey.com/board/topic/47052-basic-webpage-controls-with-javascript-com-tutorial/page-1)

# spring - Spring 3.2 JUnit4 测试用例回滚时通过，但不回滚时失败？

> ID：13607612
> 
> 赞同：0
> 
> 时间：2012-11-28T14:39:30.813
> 
> 标签：spring, hibernate, junit4

我有一个 Spring 3.2 应用程序，使用 Hibernate 和一些 JUnit 4 测试用例。我使用 MySQL 5 作为数据库。

为回滚的 DAO 类编写测试用例时，测试用例通过。但是，如果我告诉测试用例不要回滚 (@Rollback(false))，则测试用例会失败。因此，我不相信 defaultRollback=true 时通过的测试用例的有效性。

有问题的测试用例是在删除对象 [Company] 时，该对象具有许多 [Team] 对象。一个 [Team] 对象也可以有许多子 [Team] 对象。

删除 [Company] 时，它将删除级联到对象。当它删除 [Team] 对象时，我没有指定将删除级联到子 [Team] 对象，因此 MySQL 抛出了外键约束违规异常。测试用例（当它被设置回滚时），通过！但是，它肯定不应该吗？如果在测试用例上将回滚设置为 false，那么它会失败并抱怨 MySQL 约束冲突异常。

请问有什么建议吗？如果 @Rollback 设置为 true 然后为 false，为什么测试用例的响应不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:20:27.970

我认为这是冲洗或不冲洗的问题。我认为您在回滚模式下隐藏了一些问题，因为更改不会发送到数据库。

`em.flush()`要在回滚模式下测试结束时添加此内容。如果出现问题，您可以修复它。

# twitter - 如何在 OAuthWebSecurity 中为 consumerKey 和 consumerSecret 访问 TwitterClient

> ID：13607615
> 
> 赞同：1
> 
> 时间：2012-11-28T14:39:37.490
> 
> 标签：twitter, asp.net-mvc-4, oauth-2.0, twitter-oauth

我成功地使用 ASP.Net MVC 的 OAuthWebSecurity 来验证 Twitter 用户。我正在使用 LINQ to Twitter 与 Twitter 的 API 进行交互，以检索有关用户的数据并发布推文。LINQ to Twitter 需要 ConsumerKey 和 ConsumerSecret 才能与 Twitter API 交互。使用 OAuthWebSecurity 注册 TwitterClient 时，您必须提供 ConsumerKey 和 ConsumerSecret。如何从 OAuthWebSecurity 检索 ConsumerKey 和 ConsumerSecret？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T11:49:07.103

你需要在[https://dev.twitter.com/apps](https://dev.twitter.com/apps)上创建你的 Twitter 应用程序。然后他们会给你消费者密钥和消费者秘密。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T15:52:10.620

OAuthWebSecurity 仅用于身份验证。您需要授权才能阅读时间线和发布推文。您应该编写自己的授权代码来检索 consumerkey + secret。

# ruby-on-rails - 为什么在 rails(erb) 中 form_tag 和 form_for 的使用会发生变化？

> ID：13607620
> 
> 赞同：1
> 
> 时间：2012-11-28T14:39:54.077
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, erb

旧用法：

```
<% form_tag %>
...
<% end %>

<% form_for %>
....
<% end %> 
```

新用法：

```
<%= form_tag %>
...
<% end %>

<%= form_for %>
....
<% end %> 
```

（我正在学习 Head First Rails 并知道[此列表](https://docs.google.com/spreadsheet/ccc?key=0Ai2l7E_yOdPMdDN6cHkwZ1hFdjZUYWY1bE9vWnlvN0E#gid=0)中的差异）

我知道 scriptlet 中不需要`=`，`<>`但如果`<%= form_tag %>`不是 scriptlet，为什么它需要一个`<% end %>`？

有人对此有想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T14:45:04.680

首先，我不知道什么是'scriplet'。无论如何，这是 rails 3.0 的变化 - 请参阅发行说明： http: [//guides.rubyonrails.org/3_0_release_notes.html#helpers-with-blocks](http://guides.rubyonrails.org/3_0_release_notes.html#helpers-with-blocks)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T14:44:14.407

Rails 3 带来了 API 的整体一致性，在本例中是视图 API。

规则是：

```
(want_to_display?) ? (use =) : (don't use =) 
```

# javascript - 谁能解释这行javascript？

> ID：13607624
> 
> 赞同：3
> 
> 时间：2012-11-28T14:39:59.207
> 
> 标签：javascript, jquery, ajax

我正在使用 DynaTree JavaScript 树并且一直在修改它。具体来说，我正在尝试根据节点的类型添加多个上下文菜单。

基本上我的想法是让上下文菜单向我的 MVC (2) 控制器发出 ajax 请求，并将此信息作为 JSON 传递，用于创建可以在 c# 中访问的类。

在这里浏览了大约 500 个帖子后，我已经正常工作了！现在我需要再次修改 JS 以便根据类型选择适当的上下文菜单。

我的清单看起来像

```
<div id="tree">
    <ul>

      <li id="'ID':1,'TYPE':1" title="Look: a tool tip!">item1 with key and tooltip</li>
      <li id="'ID':2,'TYPE':2" class="activate">item2: activated on init</li>
      <li id="'ID':3,'TYPE':3" class="folder">Folder with some children
        <ul>
          <li id="'ID':4,'TYPE':1">Sub-item 3.1</li>
          <li id="'ID':5,'TYPE':1">Sub-item 3.2</li>
        </ul>
      </li>
      <li id="'ID':6,'TYPE':1" class="expanded">Document with some children (expanded on init)
        <ul>
          <li id="'ID':7,'TYPE':1'">Sub-item 4.1</li>
          <li id="'ID':8,'TYPE':1'">Sub-item 4.2</li>
        </ul>
        </li>
      <li id="'ID':9,'TYPE':1" class="lazy folder">Lazy folder</li>
    </ul>
  </div> 
```

我返回 ID 并使用 jQuery.parseJSON 发送到 MVC。

我不明白的JS在这里：

```
function bindContextMenu(span) {
    // Add context menu to this node:
    debugger;

    $(span).contextMenu({ menu: "myMenu1" }, function (action, el, pos) {
      var node = $.ui.dynatree.getNode(el).toString();
      node = node.replace(/'/g, '\"');
      node = jQuery.parseJSON('{' + node + '}');

      $.ajax({
        type: "POST",
        url: "/TreeView/Click/",
        data: { ID: node.ID, TYPE: node.TYPE },
        error: function (request) { $("#message").html("error"); },
        success: function (result) { $("#message").html("Success - " + result); }
      })
    });
  }; 
```

这一行 - $(span).contextMenu({ menu: "myMenu1" }, function (action, el, pos) {

似乎既设置了上下文菜单，又在单击上下文菜单时触发。如果有人可以为 Google 提供一些关键字，我会很高兴，因为我不知道。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T14:45:05.843

`.contextMenu`看起来像一个插件，但是在不确切知道它是哪个插件的情况下很难给出明确的答案。但是，初始化该插件似乎需要 2 个参数：

1.  包含任何设置参数 -这`object`对于插件来说是非常标准的
2.  激活菜单时调用的函数（可能）。

# mobile - 移动漫游的 GeoIP 服务的可靠性如何？

> ID：13607630
> 
> 赞同：3
> 
> 时间：2012-11-28T14:40:17.133
> 
> 标签：mobile, geoip, quova

目前，我正在使用 Quova，但当用户在移动网络（不是 WiFi）上并在本国以外漫游时，我很难找到/理解 GeoIP 的准确性（对国家/地区的分辨率）。

1.  如果设备的 IP 地址是从家庭网络分配的，那么很明显 GeoIP 将不准确（事实上，这将是明显的旧错误）。
2.  如果IP地址是从当前国家网络分配的，那么我相信它会正常工作。

有没有人有关于家庭移动网络分配 IP 地址（以及从哪里）的任何信息/数据？一般是（1.）还是（2.）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-31T16:42:16.630

在 S. Triukose 等人的“蜂窝数据网络中的地理定位 IP 地址”中，未发布（？）[http://people.cse.iitd.ernet.in/~aseth/ipaddresses_geolocating_cellular.pdf](http://people.cse.iitd.ernet.in/~aseth/ipaddresses_geolocating_cellular.pdf)，第 4.3 节指出：

```
We also observed an outlier at 17,000km (not shown on the plot) 
which correspond to an Australian user roaming in the Netherlands. 
```

如果我正确理解您的问题，在这种情况下，它似乎是第 1 位。

# c# - 将分隔文件读入 DataTable 的好方法

> ID：13607632
> 
> 赞同：1
> 
> 时间：2012-11-28T14:40:19.560
> 
> 标签：c#

我正在寻找将分隔文件读入 DataTable 的好方法，并找到了这段代码。

```
 private void txtRead_Click(object sender, EventArgs e)
    {
        var filename = @"d:\shiptest.txt";
        var reader = ReadAsLines(filename);

        var data = new DataTable();

        //this assume the first record is filled with the column names
        var headers = reader.First().Split('\t');
        foreach (var header in headers)
        {
            data.Columns.Add(header);
        }

        var records = reader.Skip(1);
        foreach (var record in records)
        {
            data.Rows.Add(record.Split('\t'));
        }

        dgList.DataSource=data;
    }

    static IEnumerable<string> ReadAsLines(string filename)
    {
        using (var reader = new StreamReader(filename))
            while (!reader.EndOfStream)
                yield return reader.ReadLine();
    } 
```

这段代码工作得很好而且很快，但我很好奇当文本文件中有大量数据时上述代码的效率是什么。寻找建议。谢谢

# sql - 表值参数的生产用途

> ID：13607634
> 
> 赞同：1
> 
> 时间：2012-11-28T14:40:20.657
> 
> 标签：sql, sql-server, stored-procedures

我刚刚开始学习如何在基本的 DML 内容之外编写存储过程和 SQL 代码。我最近遇到的是表值参数。我找到了一个制作 TVP 的脚本，它工作得很好，但有两件事我不明白。一，何时使用它们。当 TVP 有益时，典型的现实世界场景是什么？二，当我从以下脚本中删除`begin`and时`end`，它的工作原理是一样的吗？有这些关键字和没有这些关键字有什么区别？SQL Server 2008 R2

```
use [tempdb]
--this is the database table that will be populated
create table SampleTable
(
id int not null identity (1,1)
,SampleString varchar(50)
,SampleInt int null
)
go
--create the table data type
create type dbo.SampleDataType as table
(
SampleString varchar(50)
,SampleInt int
)
go
--the stored procedure takes the SampleDataType as an input parameter
create proc SampleProc
(
--accepts the TVP as the lone parameter
--make sure that the TVP is readonly
@Sample as dbo.SampleDataType readonly
)
as
begin
--we simply insert the values into the db table from the parameter
insert into SampleTable(SampleString,SampleInt)
select SampleString,SampleInt from @Sample
end
go
--this is the sample script to test that the sproc worked 
declare @SampleData as dbo.SampleDataType
insert into @SampleData(SampleString,SampleInt) values ('one',1);
insert into @SampleData(SampleString,SampleInt) values ('two',2);
select * from @SampleData 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T14:44:42.387

一个现实世界的用途是[参数化一个`in`子句](http://www.sommarskog.se/arrays-in-sql-2008.html)。

如果查询对您有过滤器，则`(x, y, z, ...)`不再需要[使用此处的一种方法，](http://www.sommarskog.se/arrays-in-sql-2005.html)例如将其作为逗号分隔列表传递，然后将其拆分。

`BEGIN ... END`那里没有区别。它定义了一个块。例如，您可以在语句之后使用它`IF`来将多个语句组合成一个逻辑块。

# linux - 从文件中取出某些数据

> ID：13607635
> 
> 赞同：-1
> 
> 时间：2012-11-28T14:40:20.970
> 
> 标签：linux, unix, batch-file

如何从文件中取出某些信息。

例如：

> 从文件 .txt 有很多数据

```
1)a=123    
2)b=234     
3)c=345  
4)e=456 
```

我想取出信息' *a* '；
我需要指定列、行还是单词？

我不知道我应该怎么做或应该使用什么命令。
我可以使用批处理文件中的命令来执行此操作，还是应该使用其他程序软件？

希望能帮到我。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:40:23.487

The easy way:

```
@Echo OFF
Type "Text.txt" | Find "a=" 
```

The mid way:

```
@Echo OFF
For /F "Tokens=1,* Delims==" %%a in ('Type "Text.txt" ^| Find "a="') Do (Echo %%a, %%b) 
```

The usefull way:

```
@Echo OFF

:: TEXT MANIPULATOR ROUTINE v0.1
:: by Elektro H@cker

REM USE:
::TEXTMAN [ACTION] [IN LINE (Optional)] [FILE] [TEXT (Optional)]

REM ACTIONS:
REM 
REM  AL  = ADD_LEFT           * Add text to the beginning of a line
REM  AR  = ADD_RIGHT          * Add text to the end of a line
REM  E   = ERASE              * Delete a line
REM  I   = INSERT             * Add a empty line (Or a line with text)
REM  RL  = REPLACE_LINE       * Replace a line
REM  RS  = REPLACE_STRING     * Replace words of a line
REM  RSA = REPLACE_STRING_ALL * Replace words of all line
REM  C+  = CHARACTER_PLUS     * Delete the first "X" characters in all lines
REM  C-  = CHARACTER_LESS     * Delete the last  "X" characters in all lines
REM  L+  = LINE_PLUS          * Cut the first "X" lines
REM  L-  = LINE_LESS          * Cut the last  "X" lines

REM EXAMPLES:

:: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: ::
::
:: Deletes the line 3
:: Call :TEXTMAN E 3 "Test.txt"
::
:: Add a phrase to the beginning of line 3
:: Call :TEXTMAN AL 3 "Test.txt" "Elektro H@cker"
::
:: Add a phrase to the end of line 3
:: Call :TEXTMAN AR 3 "Test.txt" "Elektro H@cker"
::
:: Add a empty line at line 3
:: Call :TEXTMAN I 3 "Test.txt"
:: 
:: Add a line with a word at line 3
:: Call :TEXTMAN I 3 "Test.txt" "Elektro H@cker"
::
:: Replaces the line 3 with "Elektro H@cker"
:: Call :TEXTMAN RL 3 "Test.txt" "Elektro H@cker"
::
:: Replaces the words "Elektro" to "H@cker" in line 3
:: Call :TEXTMAN RS 3 "Test.txt" "Elektro" "H@cker"
::
:: Replaces the words "Elektro" to "H@cker" in all lines
:: Call :TEXTMAN RSA "Test.txt" "Elektro" "H@cker"
::
:: Deletes the first 3 characters in all lines
:: Call :TEXTMAN C+ 3 "Test.txt"
::
:: Deletes the last 3 characters in all lines
:: Call :TEXTMAN C- 3 "Test.txt"
::
:: Deletes the first 3 lines
:: Call :TEXTMAN L+ 3 "Test.txt"
::
:: Deletes the last 3 lines
:: Call :TEXTMAN L- 3 "Test.txt"
::
:: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: ::

:TEXTMAN
(SET /A "A=0", "LINE=0", "TOTAL_LINES=0")  &  (CALL :%~1 %* || (ECHO Parametro incorrecto & Exit /B 1)) & (GOTO:EOF)
:AL
(For /F "usebackq tokens=*" %%@ in ("%~3") DO (Call Set /A "LINE+=1" && (CMD /C "IF NOT "%%LINE%%" EQU "%~2" (Echo %%@ >> "%~nx3.NEW") ELSE (Echo %~4%%@ >> "%~nx3.NEW")"))) && (CALL :RENAMER "%~3") & (GOTO:EOF)
:AR
(For /F "usebackq tokens=*" %%@ in ("%~3") DO (Call Set /A "LINE+=1" && (CMD /C "IF NOT "%%LINE%%" EQU "%~2" (Echo %%@ >> "%~nx3.NEW") ELSE (Echo %%@%~4 >> "%~nx3.NEW")"))) && (CALL :RENAMER "%~3") & (GOTO:EOF)
:E
(For /F "usebackq tokens=*" %%@ in ("%~3") DO (Call Set /A "LINE+=1" && (CMD /C "IF NOT "%%LINE%%" EQU "%~2" (Echo %%@ >> "%~nx3.NEW")"))) && (CALL :RENAMER "%~3") & (GOTO:EOF)
:I
(For /F "usebackq tokens=*" %%@ in ("%~3") DO (Call Set /A "LINE+=1" && (CMD /C "IF     "%%LINE%%" EQU "%~2" (IF NOT "%~4" EQU "" (Echo %~4 >> "%~nx3.NEW") ELSE (Echo. >> "%~nx3.NEW"))" & Echo %%@ >> "%~nx3.NEW"))) && (CALL :RENAMER "%~3") & (GOTO:EOF)
:RL
(For /F "usebackq tokens=*" %%@ in ("%~3") DO (Call Set /A "LINE+=1" && (CMD /C "IF NOT "%%LINE%%" EQU "%~2" (Echo %%@ >> "%~nx3.NEW") ELSE (Echo %~4 >> "%~nx3.NEW")"))) && (CALL :RENAMER "%~3") & (GOTO:EOF)
:RS
(For /F "usebackq tokens=*" %%@ in ("%~3") DO (Call Set /A "LINE+=1" && (CMD /C "IF NOT "%%LINE%%" EQU "%~2" (Echo %%@ >> "%~nx3.NEW") ELSE (CALL SET "STRING=%%@" && CALL ECHO %%STRING:%~4=%~5%% >> "%~nx3.NEW")"))) && (CALL :RENAMER "%~3") & (GOTO:EOF)
:RSA
(For /F "usebackq tokens=*" %%@ in ("%~2") DO (CALL SET "STRING=%%@" && (CALL ECHO %%STRING:%~3=%~4%% >> "%~2.NEW"))) && (CALL :RENAMER "%~2") & (GOTO:EOF)
:C+
(For /F "usebackq tokens=*" %%@ in ("%~3") DO (Call Set   "LINE=%%@" && (CALL ECHO %%LINE:~%~2%% >>    "%~nx3.NEW"))) && (CALL :RENAMER "%~3") & (GOTO:EOF)
:C-
(For /F "usebackq tokens=*" %%@ in ("%~3") DO (Call Set   "LINE=%%@" && (CALL ECHO %%LINE:~0,-%~2%% >> "%~nx3.NEW"))) && (CALL :RENAMER "%~3") & (GOTO:EOF)
:L+
(Call SET /A "A=%~2-1") && (Call TYPE "%~3" | @MORE +%%A%% > "%~nx3.NEW") && (CALL :RENAMER "%~3") & (GOTO:EOF)
:L-
(FOR /F %%X IN ('TYPE "%~3"') DO (CALL SET /A "TOTAL_LINES+=1")) & (CALL SET /A "TOTAL_LINES-=%~2-1") & (For /F "usebackq tokens=*" %%@ in ("%~3") DO (Call Set /A "LINE+=1" & Call echo " %%LINE%%!!| FINDSTR " %%TOTAL_LINES%% " && CALL :RENAMER "%~3" && GOTO:EOF || (Echo %%@ >> "%~nx3.NEW")))
:RENAMER
(REN "%~1" "%~nx1.BAK") & (MOVE /Y "%~nx1.BAK" "%TEMP%\" >NUL) & (REN "%~nx1.NEW" "%~nx1") & (GOTO:EOF) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T14:49:41.927

所以你想把等号（=）当作列分隔符？如果是这样，并且你有 awk，你可以这样做：

```
cat file.txt 
a=123    
b=234     
c=345  
e=456

awk -F = '{print $2}' file.txt 
123    
234     
345  
456 
```

如果您希望以编程方式执行此操作，您可以使用库来拆分等号上的文本。大多数编程语言都有库来执行此操作。

# android - 自定义纹理和 3d 对象

> ID：13607641
> 
> 赞同：0
> 
> 时间：2012-11-28T14:40:35.357
> 
> 标签：android, augmented-reality, blender, qcar-sdk

`Vuforia`提供了`ImageTargets`示例，但如果我想自己创建纹理和图像并将其导入 Vuforia 和 Android 怎么办？基本上可以创建我自己的石头，或者筹码目标并渲染我自己的自定义 3d 茶壶吗？在这个论坛中有很多问题都在问同样的问题，但我还没有看到一个合理的解决方案。用例是：

1.  创建自定义纹理 *Blender
2.  创建自定义 3d 图像（对象）*Blender
3.  使用 Vuforia 让自定义纹理显示/查看自定义 3d 图像
4.  使用 android 将应用程序点运行到打印机纹理并查看 3d 图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:58:49.913

Vuforia 有一个应用程序，您可以登录并创建自己的图像目标。

# php - 如何使用 php 和 mySQL 制作动态选择框

> ID：13607645
> 
> 赞同：0
> 
> 时间：2012-11-28T14:40:48.300
> 
> 标签：php, mysql, drop-down-menu

我有一张表格，可以打印出我表格中的所有用户。每个用户旁边是一个选择框和一个更新按钮。我遇到的问题是脚本只从最后一个选择框读取。如何使选择框动态化，以便脚本知道选择框来自哪一行？

选择框代码：

```
<select name="level" >
<option value="basic" SELECTED>Basic</option>
<option value="premium">Premium</option>
<option value="platinum">Platinum</option>
</select>

<button type="submit" name="update" value="<?php echo $row['id'] ?>">Update</button> 
```

按下提交按钮时生效的另一个脚本中的代码：

```
if ( isset( $_POST['update'] ) ) {
 //Get the ID of the account that will be updated
 $userID = $_POST['update'];
 //Get the level that the admin wishes to change to
 $level= $_POST['level'];

//Connect to the DB
mysql_connect("localhost", "xxxx", "xxxx")or die("Cannot connect to database");
mysql_select_db("xxxx")or die("Database cannot be selected or it doesnt exist");

//Updates the users access level
mysql_query("UPDATE users SET level='$level' WHERE id='$userID' "); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:44:52.317

只需查看 html，您就会覆盖您的选择框值，因为它们都具有相同的名称。

最简单的解决方案是将选择框的名称转换为数组：

```
<select name="level[<?php echo $row['id']; ?>]" > 
```

不，您可以在服务器端访问它们：

```
$_POST['level'][$userID] 
```

您还需要切换到 PDO / mysqli 并使用绑定变量准备语句以避免您的 sql 注入问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T14:46:40.290

您可以为此使用 jquery。试试这个，

```
 $(document).ready(function(){
  var values = [];
  $('select[name=level]').each(function() {
    values[] = $(this).val(); 
  });

  $('button[name=update]').val(values);

 }); 
```

它只读取最后一行的原因是它只`$row['id']`包含迭代结果集中的最后一行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T14:47:02.503

用这个：

```
<input type="hidden" name="userid[]" value="#THEUSERID"/>
<select name="level[]" >
<option value="basic" SELECTED>Basic</option>
<option value="premium">Premium</option>
<option value="platinum">Platinum</option>
</select>

if ( isset( $_POST['update'] ) ) {
    foreach($_POST['userid'] as $k=>$userID){

 //Get the level that the admin wishes to change to
        $level= $_POST['level'][$k];

//Connect to the DB
        mysql_connect("localhost", "xxxx", "xxxx")or die("Cannot connect to database");
        mysql_select_db("xxxx")or die("Database cannot be selected or it doesnt exist");

//Updates the users access level
        mysql_query("UPDATE users SET level='$level' WHERE id='$userID' ");
    }
} 
```

# deployment - MSI卸载后留下的控制面板图标

> ID：13607651
> 
> 赞同：0
> 
> 时间：2012-11-28T14:41:08.227
> 
> 标签：deployment, windows-installer

我为无人值守部署构建了一个 MSI，它安装了一个应用程序（通常使用客户部署软件不支持的 install shield 安装）。

此 MSI 还在控制面板中安装了一个图标。

卸载后，除控制面板中的图标外，所有内容均已删除。

有趣的是：我找不到与此图标有关的 .cpl 或注册表项。

我在哪里搜索注册表项：

*   HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Explorer\ControlPanel\NameSpace
*   HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\Explorer\ControlPanel\NameSpace

# c# - 如何让我的精灵跳跃？(XNA, C#)

> ID：13607661
> 
> 赞同：1
> 
> 时间：2012-11-28T14:41:30.160
> 
> 标签：c#, xna, sprite

我一直在使用 XNA 开发一个简单的平台游戏。我在制定一个好的跳跃算法时遇到了一些麻烦。在摆脱了杂乱无章的跳跃算法之后，我剩下的就是。

```
if (keystate.IsKeyDown(Keys.W))
{
    spritePosition.Y = spritePosition.Y - 10;
} 
```

我意识到这是一个非常简单的开始，但任何提示都会很棒。我是一名自学成才的程序员，所以我可能会忘记一些术语，我倾向于发现查看实际代码是最好的学习方式。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T14:45:01.043

当您跳跃（物理上）时，您是在向 Y 速度矢量添加一个量，而不是向您的位置矢量添加量。将您的位置移动 10 意味着您只是向上传送 10 个刻度。

尝试调整速度，然后让你的主循环改变位置。记住重力向下的加速度！

编辑：从下面的评论添加链接到物理教程。 [rodedev.com/tutorials/gamephysics](http://rodedev.com/tutorials/gamephysics)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-20T04:22:54.123

尝试以下操作：

```
if(Input.GetKeyDown(KeyCode.W))
{
    // your code here
} 
```

它将使玩家每次按下`W`时，他们只会去，直到他们可以`W`再次按下。您始终可以设置**跳跃率**并使其每秒钟只能跳跃一次。

# php - Jquery Tinyscrollbar 插件错误。内容区域超出边界

> ID：13607664
> 
> 赞同：0
> 
> 时间：2012-11-28T14:41:39.523
> 
> 标签：php, jquery, html, scrollbar

如果您转到“游戏规则”部分并单击“步步高、Narde、Nackgammon、Tavla、古英语”部分，您将看到某些部分正常加载并且滚动条工作正常。像双陆棋和纳尔德这样较大的部分没有完全加载。西洋双陆棋部分的内容超出了边距，而 Narde 部分根本无法完全加载。

这里可能是什么问题？所有带有滚动条的部分都具有相同的设置。唯一的区别是步步高和纳尔德部分有更多的文本和更多的图像。这可能是故障的原因吗？也许插件以某种方式无法加载所有内容并且已经将自己锁定到位？可能的解决方案是什么？

编辑：我很确定它与 tinyscrollbar 插件加载有点过快（在内部内容加载之前）有关。我可以使用什么方法在插件上放置一个计时器，这样它就不会快速加载或刷新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:06:41.283

首先，您的“p”元素样式似乎没有设置宽度，并且在渲染时它们隐藏在滚动条后面，使某些文本不可见。

这可能不会直接回答您的问题，但它可能与用于滚动条的溢出：隐藏/溢出：滚动隐藏的部分文本有关。

您也可以尝试使用 jScrollPage 插件，因为它简化了滚动条编码。

# sql - Oracle 从目录中读取文件异常

> ID：13607666
> 
> 赞同：0
> 
> 时间：2012-11-28T14:41:43.060
> 
> 标签：sql, oracle, function, exception

我正在从具有以下功能的目录中读取文件：

```
CREATE OR REPLACE FUNCTION loadBlobFromFile(p_file_name VARCHAR2) RETURN BLOB AS
  dest_loc  BLOB := empty_blob();
  src_loc   BFILE := BFILENAME('TMT', p_file_name);
BEGIN
  -- Open source binary file from OS
  DBMS_LOB.OPEN(src_loc, DBMS_LOB.LOB_READONLY);

  -- Create temporary LOB object
  DBMS_LOB.CREATETEMPORARY(
        lob_loc => dest_loc
      , cache   => true
      , dur     => dbms_lob.session
  );

  -- Open temporary lob
  DBMS_LOB.OPEN(dest_loc, DBMS_LOB.LOB_READWRITE);

    -- Load binary file into temporary LOB
    DBMS_LOB.LOADFROMFILE(
        dest_lob => dest_loc
      , src_lob  => src_loc
      , amount   => DBMS_LOB.getLength(src_loc));

  exception 
    when DBMS_LOB.operation_failed
    then
     return empty_blob();

 -- Close lob objects
  DBMS_LOB.CLOSE(dest_loc);
  DBMS_LOB.CLOSE(src_loc);

   -- Return temporary LOB object
  RETURN dest_loc;

END loadBlobFromFile;
/ 
```

我用

```
select loadBlobFromFile('TESTl.doc') from dual; 
```

当文件存在于目录中时，我得到文件。当文件不存在时，我得到空的 Blob。

现在还有最后一个问题。当文件的大小为 0 字节时，我得到一个错误。

当 dbms_lob.open 失败时，有人可以帮助我改进函数并返回一个 empty_blob() 吗？

非常感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T08:00:59.477

我找到了解决方案。[这是我在http://www.toadworld.com/KNOWLEDGE/KnowledgeXpertforOracle/tabid/648/TopicID/DLP1/Default.aspx](http://www.toadworld.com/KNOWLEDGE/KnowledgeXpertforOracle/tabid/648/TopicID/DLP1/Default.aspx)帮助下的最终代码

函数代码：

```
 CREATE OR REPLACE FUNCTION loadBlobFromFile(p_file_name VARCHAR2) RETURN BLOB AS
  dest_loc  BLOB := empty_blob();
  src_loc   BFILE := BFILENAME('Directoryname', p_file_name);
BEGIN
  BEGIN

    -- Open source binary file from OS
    DBMS_LOB.OPEN(src_loc, DBMS_LOB.LOB_READONLY);

    -- Create temporary LOB object
    DBMS_LOB.CREATETEMPORARY(
          lob_loc => dest_loc
        , cache   => true
        , dur     => dbms_lob.session
    );

    -- Open temporary lob
    DBMS_LOB.OPEN(dest_loc, DBMS_LOB.LOB_READWRITE);

    -- Load binary file into temporary LOB
    DBMS_LOB.LOADFROMFILE(
        dest_lob => dest_loc
      , src_lob  => src_loc
      , amount   => DBMS_LOB.getLength(src_loc));

   exception 
    when DBMS_LOB.operation_failed --Wenn die Datei nicht vorhanden ist
    then
      DBMS_LOB.CLOSE(src_loc);
       return empty_blob();
    when DBMS_LOB.INVALID_ARGVAL  --Wenn die Datei 0 KB gross ist.
    then
      DBMS_LOB.CLOSE(dest_loc);
  DBMS_LOB.CLOSE(src_loc);
       return empty_blob();
  END;

 -- Close lob objects
  DBMS_LOB.CLOSE(dest_loc);
  DBMS_LOB.CLOSE(src_loc);

     -- Return temporary LOB object
  RETURN dest_loc;

END loadBlobFromFile;
/ 
```

调用函数：

```
select loadBlobFromFile('test.doc') from dual; 
```

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T15:13:40.360

添加这样的异常。

```
 -- Open temporary lob
  DBMS_LOB.OPEN(dest_loc, DBMS_LOB.LOB_READWRITE);

  begin
    -- Load binary file into temporary LOB
    DBMS_LOB.LOADFROMFILE(
        dest_lob => dest_loc
      , src_lob  => src_loc
      , amount   => DBMS_LOB.getLength(src_loc));

  exception 
    when dbms_lob.operation_failed
    then
      return empty_blob();
  end;
..rest of your code. 
```

# ios - iOS - NavigationBar Title 与之前的 viewController 重叠

> ID：13607674
> 
> 赞同：2
> 
> 时间：2012-11-28T14:41:55.960
> 
> 标签：ios, uinavigationcontroller, ios6, uinavigationbar

我们有一个问题，如果我们从 VC 中弹出，当前 ViewController 的 navigationBar 标题与刚刚弹出的 VC navBar 标题重叠。

但它只是偶尔发生，所以我认为它可能只是一个 UI 刷新错误。以前有人遇到过这个问题吗，如果是..，如何解决？

问候 ..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:25:23.870

我在我维护的应用程序中遇到过几次。在每种情况下，问题都是由人们使用导航控制器做一些愚蠢的事情引起的。

例如，当希望导航到新视图时，已经是导航控制器视图堆栈一部分的视图控制器将实例化一个新导航控制器并将其根视图控制器推送到第一个导航控制器的视图堆栈上。

然后，在新的视图控制器（包含在第二个导航控制器的视图堆栈中）中，他们会尝试弹出到前一个视图。这会导致有趣的动画错误和随机标题显示在导航栏上。

解决方案是从流程中删除第二个导航控制器（它没有任何特定目的）。

# android - 如何确定 ProGuard 是否成功混淆了 Android APK？

> ID：13607675
> 
> 赞同：2
> 
> 时间：2012-11-28T14:41:55.260
> 
> 标签：android, google-play

我已输入并重`proguard.config=proguard.cfg`命名`keepclasseswithmembernames`为`keepclasseswithmembers`，它已成功导出已签名`.apk`的 .
如何确定 proguard 是否成功混淆了代码？

我错过了什么还是去市场好？

该线程不应仅限于源代码建议。任何和所有关于将应用程序发布到 android 市场的建议不仅会受到我的赞赏，而且任何其他可能会将他们的第一个应用程序发布到市场并在 SO 上研究这个主题的新手都会很感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T14:49:47.997

查看`proguard`文件夹：您将看到文件，如`mapping.txt`，等。此外，如果您查看文件夹`dump.txt`，您将看到名称和名称。`usage.txt``logcat``Class``Method``obfuscated`

![在此处输入图像描述](../Images/b134f89d036b4c640e0fd45e99065151.png)

有关更多详细信息，请访问[此处](http://developer.android.com/tools/help/proguard.html)。

另一种核心方法是使用[`dex2jar`](http://code.google.com/p/dex2jar/)和[`java decompiler`](http://java.decompiler.free.fr/)反编译你的应用程序，看看你会成功多少。如果`obfuscation`进展顺利，你会发现这是不可能的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T14:46:20.067

当您在发布模式下构建应用程序时，ProGuard 将运行。如果生成以下文件，您可以告诉它成功混淆了代码

*   转储文件
*   映射.txt
*   种子.txt
*   用法.txt

这些文件的位置是：

```
<project_root>/bin/proguard if you are using Ant.
<project_root>/proguard if you are using Eclipse. 
```

有关更多详细信息并了解这些文件的内容，请查看[http://developer.android.com/tools/help/proguard.html](http://developer.android.com/tools/help/proguard.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T14:45:34.453

将 apk 转换为 jar 并解压。如果您看到文件名未更改，则 proguard 不会影响代码

祝你好运

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-05T23:14:27.123

使用这个 gradle 任务。这个 gradle 任务将允许您自动检测 Binoy Babu 和monkybonk05 提到的文件。这不需要目视检查。如果文件不存在，您的构建将失败。通常在应用程序的发布版本上完成

```
tasks.whenTaskAdded { task ->
    if (task.name == 'assembleFlavorRelease') {
        task.finalizedBy checkProguardFlavor
    }
}
task checkProguardFlavor << {
    assert file("./build/outputs/mapping/Flavor/release/dump.txt").exists()
    assert file("./build/outputs/mapping/Flavor/release/mapping.txt").exists()
} 
```

# php - Magento 扩展显示错误并从模型而非控制器内部重定向

> ID：13607681
> 
> 赞同：0
> 
> 时间：2012-11-28T14:42:24.353
> 
> 标签：php, magento, notice

如果我的扩展模型中发生错误，我想向站点用户显示有用的错误消息，但允许他们继续使用商店。

我编写了一个使用第三方远程 API 的自定义组件。有时 API 中会出现错误，我希望能够优雅地处理它们。[我已在http://www.deepcodeonline.com/blog/magento/how-to-display-error-success-and-notice-messages-in-magento](http://www.deepcodeonline.com/blog/magento/how-to-display-error-success-and-notice-messages-in-magento)阅读了以下有关生成错误警告和通知的文章。

当从控制器代码调用 addError 或 addNotice 方法时，我可以让它工作，但我想从模型中调用它们，因为它只有在我知道发生错误的模型中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:18:42.830

您可以毫无问题地从模型中调用这些函数。它们保存在会话中，因此下次显示消息块时，它们将显示给用户（基本上在显示的下一页上）。

# bounds - 当逻辑地址大于界限时，物理地址是多少？

> ID：13607682
> 
> 赞同：0
> 
> 时间：2012-11-28T14:42:31.910
> 
> 标签：bounds

我很难在我的记忆中找到一些东西。通常，我不会在这里问这样的问题，但谷歌搜索却一无所获。我正在尝试为程序查找物理地址，但逻辑地址大于我得到的范围。如果逻辑地址大于界限，如何找到物理地址？

# class - Scala：比较泛型类的类型

> ID：13607686
> 
> 赞同：1
> 
> 时间：2012-11-28T14:42:40.753
> 
> 标签：class, scala, generics, types, comparison

关于这个问题有很多问题，但遗憾的是似乎没有一个可以解决我的问题。

我写了一个通用的 scala 类，我们称之为

```
class MyClass[A]() { ... } 
```

以及相应的对象：

```
object MyClass() { ... } 
```

在 MyClass 中，我想定义一个行为取决于给定类型 A 的函数。例如，假设我想定义一个 (A, A) => Boolean 类型的“较小”函数，默认情况下返回“true”无论元素是什么，但旨在为某些类型（例如 Int、Float 等）返回正确的结果。

我的想法是通过以下方式将“更小”定义为类的成员：

```
class MyClass[A]() {

    val someArray = new Array[A](1) // will be referred to later on

    var smaller:(A,A) => Boolean = MyClass.getSmallerFunction(this)

    ...some Stuff...

}

object MyClass {

    def getSmallerFunction[A](m:MyClass[A]):(A,A) => Boolean = { 

        var func = (a:Boolean, b:Boolean) => true

        // This doesn't compile, since the compiler doesn't know what 'A' is
        if(A == Int) func = ((a:Int, b:Int) => (a<b)).asInstanceOf[(A,A) => Boolean)]

        // This compiles, but always returns true (due to type erasure I guess?)
        if(m.isInstanceOf[MyClass[Float]]) func = ((a:Float, b:Float) => (a<b)).asInstanceOf[(A,A) => Boolean)]

        // This compiles but always returns true as well due to the newly created array only containing null-elements
        if(m.someArray(0).isInstanceOf[Long]) func = ((a:Long, b:Long) => (a<b)).asInstanceOf[(A,A) => Boolean)]

    }

    ...some more stuff...

} 
```

getSmallerFunction 方法包含一些我尝试过的实现，但它们都不起作用。

在研究了一段时间后，起初似乎清单似乎是要走的路，但不幸的是，由于对象 MyClass 还包含该类的一些构造函数调用，因此它们似乎在这里不起作用-无论如何我如何更改代码 - 总是导致编译器对缺少使用清单所需的信息感到愤怒。也许有一个基于清单的解决方案，但我当然还没有找到它。

注意：“较小”函数的使用只是一个示例，我想实现几个此类函数。我知道对于这种特定情况，我可以只允许那些可比较的类型 A，但这真的不是我想要实现的目标。

对不起文字墙 - 我希望有可能理解我的问题。

提前感谢您的回答。

**编辑：**

也许我应该更详细一点：我想做的是实现一个用于图像编程的库（主要供我个人使用）。'MyClass' 实际上是一个类 'Pixelmap'，它包含一个类型为 A 的“像素”数组以及某些用于像素操作的方法。这些 Pixelmaps 可以是任何类型，尽管我主要使用 Float 和 Color 数据类型，有时还使用 Boolean 作为掩码。我需要的依赖于数据类型的函数之一是“混合”（尽管也使用了“较小”），它在 A 类型的两个值之间进行插值，例如可用于平滑调整此类 Pixelmap 的大小。默认情况下，此混合函数（类型为 (A,A,Float) => A）仅返回第一个给定值，但对于 Float、Color 等类型的 Pixelmap，需要定义适当的插值。

**编辑2：**

似乎我找到了解决问题的合适方法，至少对于我的具体情况。不过，这实际上更像是一种解决方法。

我只是在 MyClass 中添加了一个 A 类型的隐式参数：

```
class MyClass[A]()(implicit dummy:A) { ... } 
```

例如，当我想找出实例 m:MyClass 的类型 A 是否为“Float”时，我可以使用“m.dummy.isInstanceOf[Float]”。为了使它真正起作用，我为 MyClass 对象所需的所有数据类型添加了一堆预定义的隐式值：

```
object MyClass {

    implicit val floatDummy:Float = 0.0f
    implicit val intDummy:Int = 0
    ...

} 
```

虽然这真的不是一个合适的解决方案，但它似乎让我很好地解决了这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T15:13:54.453

我省略了一大堆东西，因为老实说，我仍然不完全确定您要做什么。但这里有一个可能对您有所帮助的解决方案。

```
trait MyClass[A] {
  def smaller: (A,A) => Boolean
}

object MyClass {
  implicit object intMyClass extends MyClass[Int] {
    def smaller = (a:Int, b:Int) => (a < b)
  }
  implicit object floatMyClass extends MyClass[Float] {
    def smaller = (a:Float, b:Float) => (a < b)
  }
  implicit object longMyClass extends MyClass[Long] {
    def smaller = (a:Long, b:Long) => (a < b)
  }

  def getSmallerFunction[T : MyClass](a: T, b: T) = implicitly[MyClass[T]].smaller(a, b)
} 
```

这个想法是您将较小的方法定义为`MyClass`具有`getSmallerFunction`方法的 , 对象下的隐式对象。此方法的特殊之处在于它查找满足其类型界限的类型[类实例。](http://en.wikipedia.org/wiki/Type_class)然后我们可以去：

```
println(MyClass.getSmallerFunction(1, 2)) 
```

它会自动知道要使用的正确方法。您可以扩展此技术来处理您的 Array 示例。[这是一个关于什么是类型类的很棒的教程/演示。](http://www.youtube.com/watch?v=IMGCDph1fNY)

**编辑**：我刚刚意识到您想要返回一个实际的函数。在我的情况下，和你一样，类型参数丢失了。但是，如果在一天结束时您只想能够根据类型有选择地调用方法，那么我详细介绍的方法应该对您有所帮助。

# asp.net-mvc - 使用 GroupPrincipal 你可以从 UserPrincipal 获得更多信息吗

> ID：13607688
> 
> 赞同：0
> 
> 时间：2012-11-28T14:42:41.647
> 
> 标签：asp.net-mvc, active-directory

我正在使用 GroupPrincipal 查找属于 AD 组成员的用户。

```
GroupPrincipal group = GroupPrincipal.FindByIdentity(pc, "Advisors"); 
```

我需要从此查找中获取 EmployeeID 字段，但我相信这只有使用 UserPrincipal 才有可能。

```
var members = group.Members.Select(x => new DomainContext() { EmployeeID = x.EmployeeId, FullName = x.DisplayName }).ToList(); 
```

有谁知道解决这个问题的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:12:54.700

您必须使用 UserPrincipal ，除非您使用底层的 DirectoryEntry/DirectorySearcher 类。

您应该使用 .GetMembers() 而不是 .Members 然后您可以执行以下操作：

```
var userMembers = group.GetMembers().OfType<UserPrincipal>();
foreach( var member in userMembers) {
    string empid = member.EmployeeId; //do something with the EmployeeId
} 
```

# mysql - VPS 上的 MySQL 性能

> ID：13607693
> 
> 赞同：3
> 
> 时间：2012-11-28T14:42:57.300
> 
> 标签：mysql, performance, linode

我正在构建一个使用后端服务器存储数据的移动应用程序。如果我用关系数据库来描述它，那么它是大约 10K 记录（2 或 3 个表）。计划使用 Linode VPS 来托管它 (512 MB)。我知道这个问题非常广泛，但想了解负载下的性能。

另一种选择是使用像 Redis 这样的 NoSQL，但为此需要花一些时间来学习。

我已经在 SO 上进行了搜索，但还没有令人满意的答案。

PS：这是一个附带项目，我希望在此过程中学习这些东西。但一些好的建议将有助于加快这一进程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T04:58:20.293

看来您将不得不努力优化查询，而不是寻找一些快速修复。如果您以正确的方式编写查询，我一直在处理在虚拟服务器上运行的大量项目，没有性能问题。阅读： http: [//owaisahussain.blogspot.com/2012/06/yet-another-blog-on-query-optimization.html](http://owaisahussain.blogspot.com/2012/06/yet-another-blog-on-query-optimization.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-08T04:47:34.130

禁用 InnoDB，这将为您节省大量 RAM。为此，请在 my.cnf 文件中添加 skip-innodb。

# css - css min-width 拥有像 facebook 这样的页面

> ID：13607694
> 
> 赞同：-2
> 
> 时间：2012-11-28T14:43:04.623
> 
> 标签：css

例如，我必须在我的 css 中放入什么才能让我的网站像 facebook 一样工作。当您在 facebbok 中并调整浏览器窗口的大小时，内容的大小保持不变，并且底部有滚动条。我使用百分比来设置宽度，但我不太喜欢输出。

我的CSS是这样的。

```
#html {

height:100%;
overflow: scroll;
}

#body {
min-width: 1024px;
height: 100%;
}

#container {
margin-top: 0px;
width: 100%;
height: 100%;
}
#bloccoCentrale {
margin-top: 0px;
margin-left: 5%;
margin-right: 5%;
min-width: 80%;
height: 100%;
}

#centro {
margin-bottom: 10px;
min-height:930px;
} 
```

页面是这样组成的。 [http://img846.imageshack.us/img846/109/immaginejjr.png](http://img846.imageshack.us/img846/109/immaginejjr.png) 谢谢。我知道这很混乱！！！

***用我的 css编辑*** 这是我调整窗口大小时发生的事情！ [http://img850.imageshack.us/img850/2197/cattura2wq.png](http://img850.imageshack.us/img850/2197/cattura2wq.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:50:56.727

如果您正在尝试制作`100% width`容器并尝试流畅的布局，请使用@media 查询来获取特定的屏幕分辨率。这称为响应式设计

比如说

```
@media all and (max-width: 1000px) and (min-width: 600px) {
  /*Style goes here*/
} 
```

您可以通过在相关分辨率媒体查询中定义样式来定位特定的屏幕分辨率，[这是](http://css-tricks.com/css-media-queries/)一个很好的参考文章开始使用`CSS @media queries`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T14:47:42.847

如果您的内容比您的窗口宽，您将获得一个水平滚动条。

试试这个：

```
#body {
    width: 150%;
} 
```

或者

```
#body { 
    width: 4000px;
} 
```

# sql - 现有sql查询的更好解决方案

> ID：13607698
> 
> 赞同：-2
> 
> 时间：2012-11-28T14:43:16.757
> 
> 标签：sql

我有这样的表：

```
type       | date       | id
-----------------------------
1          | 2012-01-01 | 1
2          | 2012-01-01 | 2
1          | 2012-02-02 | 3
2          | 2012-02-02 | 4 
```

我需要构建查询来选择所有“最新”的不同类型值（在本例中，它将是 id 为 3 和 4 的记录）。现在我有这个解决方案：

```
select * from test t1 where date = 
(select max(date) from test t2 where t2.type = t1.type ) order by type, date desc 
```

我对嵌套选择的存在感到尴尬，也许有更优雅的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T14:46:19.430

因为你没有提到你正在使用的 RDBMS，所以试试这个。将适用于大多数 RDBMS。

```
SELECT  a.*
FROM    tableName a
        INNER JOIN
        (
            SELECT  type, MAX(DATE) maxDAte
            FROM tableName
            GROUP BY type
        ) b ON a.type = b.type AND
                a.DATE = b.maxDate 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/97cdc/2)

或者如果您的 RDBMS 支持`Window Function`

```
SELECT type, date, id
FROM
(
    SELECT type, date, id,
            ROW_NUMBER() OVER (PARTITION BY type
                                ORDER BY date DESC) rn
    FROM tableNAme
) s
WHERE rn = 1 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!3/cf52b/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T14:58:34.577

在您的特定示例中，这也可以工作：

```
select type, max(date), max(id)
from your_table
group by type 
```

但请注意，只有当您绝对确定日期和 ID 总是在增加时，它才会起作用。如果不是这种情况，则`max(date)`可能`max(id)`位于两个不同的行上。仅当您知道自己在做什么时才使用它！如果没有，嵌套查询没有任何问题。

# batch-file - 如何编写批处理文件以检查文件完整性

> ID：13607701
> 
> 赞同：-1
> 
> 时间：2012-11-28T14:43:33.640
> 
> 标签：batch-file

我想在更改之前编写批处理文件以检查文件完整性。但是我不知道怎么写。请给我一些建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:33:10.927

要首先检查文件的完整性，您需要有一个验证文件来比较是否有更改（例如 SFV 文件）或将哈希保存在任何其他类型的文件中，但您需要它。

您可以使用外部命令检查文件的任何类型的哈希值，然后进行比较，例如，您可以使用“crc32.exe”命令行应用程序检查文件的 crc 哈希值。

您想使用本机 Batch 命令执行此操作吗？是不可能的。

# c# - Enterprise Library 如何加载外部配置文件的层次结构

> ID：13607702
> 
> 赞同：2
> 
> 时间：2012-11-28T14:43:34.297
> 
> 标签：c#, app-config, enterprise-library, configuration-files

请问，有人可以向我解释加载过程吗？说，你有`app.config`你的 UI 可执行文件。您在该文件中添加企业库配置源。每个配置源引用另一个配置文件，例如，一个用于日志记录 dll，一个用于数据存储 dll，一个用于服务 dll。在每个辅助配置中，您编写与企业库应用程序块相关的部分和 .NET`System.Configuration`命名空间中的一些核心部分（例如，`connectionStrings`）。

现在，在 UI 启动过程中初始化配置系统时，如何加载这个分层配置？

据我了解，Enterprise Library 将加载它自己的配置部分，并将遵循文件名链接并为每个`FileConfigurationSource`. 之后将从每个外部文件加载它自己的配置部分，将它们混合在一起。

核心 .NET 部分呢？它是否也会通过企业库分层加载，或者我应该`configSource`为此目的使用属性？

# java - 用于保持远程数据的同步/复制内存副本的 Java 库

> ID：13607703
> 
> 赞同：3
> 
> 时间：2012-11-28T14:43:35.763
> 
> 标签：java

我已经提出了很多这个要求，我想知道是否有一个封装了这个功能的库。本质上是这样的：

我有一些远程数据存储（通常是数据库，但可以是任何东西），我想将整个数据缓存在内存中，并定期检查更新以及完全刷新。理想情况下，更新检查应该只跟踪增量（因此远程存储向存储提供更新流，或者库通过“修改后”和“存档”字段的组合来计算它）。

通常我会使用一个缓存来查找不在缓存中的值，但在某些情况下缓存未命中的延迟是不可接受的。

# asp.net-mvc - 如何使用 MapRoute 获取 TLD？

> ID：13607706
> 
> 赞同：0
> 
> 时间：2012-11-28T14:43:41.537
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-routing, tld, maproute

我在 IIS 上有许多指向同一个 ASP.NET MVC 应用程序的主机名。

```
www.domain.com
www.domain.co.uk
www.domain.net
... 
```

当我设置如下地图路线时，如何获得顶级域（例如“.com”）？

```
Shared Sub RegisterRoutes(ByVal routes As RouteCollection)
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}")

    ' MapRoute takes the following parameters, in order:
    ' (1) Route name
    ' (2) URL with parameters
    ' (3) Parameter defaults
    routes.MapRoute( _
        "Default", _
        "{controller}/{action}/{id}", _
        New With {.controller = "Home", .action = "Index", .id = UrlParameter.Optional} _
    )

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T14:52:35.400

您需要创建自定义路由。只需继承`Route`、覆盖`GetRouteData`和包含用于 TLD 的路由信息​​。

[http://msdn.microsoft.com/en-us/library/system.web.routing.route.getroutedata.aspx](http://msdn.microsoft.com/en-us/library/system.web.routing.route.getroutedata.aspx)

**例子**

路线：

```
public class RouteWithTld : Route
{
    public RouteWithTld(string url, IRouteHandler routeHandler) : base(url, routeHandler)
    {
    }

    public RouteWithTld(string url, RouteValueDictionary defaults, IRouteHandler routeHandler) : base(url, defaults, routeHandler)
    {
    }

    public RouteWithTld(string url, RouteValueDictionary defaults, RouteValueDictionary constraints, IRouteHandler routeHandler) : base(url, defaults, constraints, routeHandler)
    {
    }

    public RouteWithTld(string url, RouteValueDictionary defaults, RouteValueDictionary constraints, RouteValueDictionary dataTokens, IRouteHandler routeHandler) : base(url, defaults, constraints, dataTokens, routeHandler)
    {
    }

    public override RouteData GetRouteData(HttpContextBase httpContext)
    {
        var baseData = base.GetRouteData(httpContext);

        int pos = httpContext.Request.Url.Host.LastIndexOf('.');
        string tld;
        if (pos == -1)
        {
            if (httpContext.Request.Url.Host == "localhost")
                tld = "com";
            else
            {
                throw new InvalidOperationException("You need to handle this case.");
            }
        }
        else
            tld = httpContext.Request.Url.Host.Substring(pos + 1);

        baseData.Values.Add("tld", tld);

        return baseData;
    }
} 
```

在 global.asax 中映射它：

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    /*routes.MapRoute(
        "Default", // Route name
        "{controller}/{action}/{id}", // URL with parameters
        new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
    );
     * */

    var defaults =
        new RouteValueDictionary(new {controller = "Home", action = "Index", id = UrlParameter.Optional});
    routes.Add(new RouteWithTld("{controller}/{action}/{id}", defaults, new MvcRouteHandler()));

} 
```

并访问控制器中的参数：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        ViewBag.Message = "Welcome to ASP.NET MVC. TLD: " + RouteData.Values["tld"];

        return View();
    }

    public ActionResult About()
    {
        return View();
    }
} 
```

# c++ - BREW 3.1.5 是否支持 STL？

> ID：13607708
> 
> 赞同：1
> 
> 时间：2012-11-28T14:43:43.410
> 
> 标签：c++, brew-framework, brewmp

我正在使用 C++ 在 BREW 中创建一个应用程序。3.1.5 sdk版本支持STL吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T15:36:12.217

BREW 平台不支持异常，也没有基于流的 I/O。这可以解释为什么[有些](https://developer.brewmp.com/forum/brew-c)人报告说使用 STL 取得了成功，而另一些人则回避它。只要您远离在 BREW 上存在问题的 STL 部分，它可能会起作用，但远非万无一失。就个人而言，我会避免它。

如果您要使用它，一个强制性要求是使用 BREW 的 MALLOC() 和 FREE() 重载 new/delete。

相关阅读：

*   [东方](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2007/n2271.html)

*   [是否使用 STL](https://stackoverflow.com/questions/2226252/embedded-c-to-use-stl-or-not)

# javascript - jQuery / Javascript 代码检查，如果不是未定义

> ID：13607712
> 
> 赞同：41
> 
> 时间：2012-11-28T14:43:57.340
> 
> 标签：javascript, jquery, undefined

这段代码好吗？

```
var wlocation = $(this).closest('.myclass').find('li a').attr('href');
if (wlocation.prop !== undefined) { window.location = wlocation; } 
```

还是我应该做

```
var wlocation = $(this).closest('.myclass').find('li a').attr('href');
if (wlocation.prop !== "undefined") { window.location = wlocation; } 
```

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2012-11-28T14:47:25.280

我喜欢这个：

```
if (wlocation !== undefined) 
```

但是，如果您更喜欢第二种方式，则不会像您发布的那样。这将是：

```
if (typeof wlocation  !== "undefined") 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-28T14:48:41.540

我通常喜欢速记版本：

```
if (!!wlocation) { window.location = wlocation; } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-28T14:45:05.023

[$.fn.attr(attributeName)](http://api.jquery.com/attr/#attr1)将属性值作为字符串返回，或者`undefined`在属性不存在时返回。

由于`""`, 和在 JavaScript`undefined`中都是*虚假*的（当强制为布尔值时计算为 false），在这种情况下，我将编写如下检查：

```
if (wlocation) { ... } 
```

# breeze - 微风服务器端元数据是强制性的还是可以在客户端定义？

> ID：13607714
> 
> 赞同：6
> 
> 时间：2012-11-28T14:44:05.047
> 
> 标签：breeze

我正在寻找使用breathjs，并对其功能和附带的最佳实践有一些疑问。

1.  服务器端元数据是否必须存在？如果我有一个非 EF WebApi 控制器，我还需要用 ProviderContext 包装它并实现元数据吗？如果是这样，元数据的格式是什么？
2.  如果我能够在服务器端省略元数据而只实现可查询的操作过滤器，我还能编写客户端代码来定义元数据吗？我在哪里可以找到有关如何执行此操作的信息？
3.  我有一个名为 Job 的服务器模型类，它有一个 ID 和名称，它们是简单的属性和一个名为 Company 的对象属性，它指向一个名为 Company 的服务器端模型类，它有一个 ID 和名称。Job(s) 可以是机密的（通过 Job 上的布尔 IsConfidential 属性），在这种情况下，即使他们仍然有 companyId，该属性也不应该发送给客户端。相反，应该有一个名为 CompanyName 的服务器端计算属性（基本上是 Company.Name 用于非机密作业，“Confidential”用于机密作业）发送到客户端。管理员角色用户应该能够查看和编辑 CompanyId，但普通用户不应该能够查看或发布/放置该值。你如何在微风中做到这一点？微风是否可以很好地处理发送和接收非模型视图模型（更少的属性和一些计算的属性）？
4.  ODataActionFilter 的源代码的来源是我可以出于任何我想要的目的使用和更改的吗？
5.  为 EF 以外的东西创建 WebApi 控制器会有多困难——比如 Telerik OpenAccess？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T16:55:56.377

Pawel 的帖子是正确的，您应该先致电

微风.config.initializeAdapterInstances

要实际创建客户端元数据，您将编写类似这样的内容。（一个简单的例子）。

```
initializeMetadataStore(myEntityManager.metadataStore);

function initializeMetadataStore(metadataStore) {
    var et = new EntityType({
        shortName: "Person",
        namespace: "Sample_WebApi.Models"
    });
    et.addProperty( new DataProperty({
        name: "personId",
        dataType: DataType.Int32,
        isNullable: false,
        isPartOfKey: true,
    }));
    et.addProperty(new DataProperty({
        name: "firstName",
        dataType: DataType.String,
        isNullable: false,
    }));
    et.addProperty(new DataProperty({
        name: "lastName",
        dataType: DataType.String,
        isNullable: false,
    }));
    et.addProperty(new DataProperty({
        name: "birthDate",
        dataType: DataType.DateTime,
        isNullable: true
    }));
    et.addProperty(new NavigationProperty({
        name: "meals",
        entityTypeName: "Meal",
        isScalar: false,
        associationName: "personMeals"
    }));
    metadataStore.addEntityType(et);

    et = new EntityType({
        shortName: "Meal",
        namespace: "Sample_WebApi.Models"
    });
    et.addProperty(new DataProperty({
        name: "mealId",
        dataType: DataType.Int32,
        isNullable: false,
        isPartOfKey: true,
    }));
    et.addProperty(new DataProperty({
        name: "personId",
        dataType: DataType.Int32,
        isNullable: false,
    }));
    et.addProperty(new DataProperty({
        name: "dateConsumed",
        dataType: DataType.DateTime,
        isNullable: false,
    }));
    et.addProperty(new NavigationProperty({
        name: "person",
        entityTypeName: "Person",
        isScalar: true,
        associationName: "personMeals",
        foreignKeyNames: ["personId"]
    }));
    et.addProperty(new NavigationProperty({
        name: "dishes",
        entityTypeName: "Dish",
        isScalar: false,
        associationName: "mealDishes",
    }));
    metadataStore.addEntityType(et);

    et = new EntityType({
        shortName: "Dish",
        namespace: "Sample_WebApi.Models"
    });
    et.addProperty(new DataProperty({
        name: "dishId",
        dataType: DataType.Int32,
        isNullable: false,
        isPartOfKey: true,
    }));
    et.addProperty(new DataProperty({
        name: "foodName",
        dataType: DataType.String,
        isNullable: false,
    }));
    et.addProperty(new DataProperty({
        name: "servingSize",
        dataType: DataType.Double,
        isNullable: false,
    }));
    et.addProperty(new NavigationProperty({
        name: "food",
        entityTypeName: "Food",
        isScalar: true,
        associationName: "DishFood",
        foreignKeyNames: ["foodName"]
    }));
    metadataStore.addEntityType(et);

    et = new EntityType({
        shortName: "Food",
        namespace: "Sample_WebApi.Models"
    });
    et.addProperty(new DataProperty({
        name: "foodName",
        dataType: DataType.String,
        isNullable: false,
        isPartOfKey: true,
    }));
    et.addProperty(new DataProperty({
        name: "calories",
        dataType: DataType.Int32,
        isNullable: false,
    }));
    metadataStore.addEntityType(et);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T15:36:25.257

1 您可以在客户端上配置元数据。要关闭服务器元数据，请尝试以下操作：

```
config.initializeAdapterInstances(
    new DataService({ 
        serviceName: "yourServiceNameHere",
        hasServerMetadata: false }));
```

2 请查看 Breeze 文档和 API。从这里开始[EntityType](http://www.breezejs.com/sites/all/apidocs/classes/EntityType.html)和这里[​​扩展实体](http://www.breezejs.com/documentation/extending-entities)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T23:34:25.343

根据问题 3：有几种可能的方法。

第一个是您可以将不是“实体”的对象返回给客户端，这些对象几乎可以是任何形状。因此，您可以确定要包含或排除哪些属性。基本上，从服务器返回的任何无法找到匹配客户端元数据的对象都将作为匿名 json 对象返回。请注意，这些匿名对象不会被任何绑定库（即 ko、backbone、angular 等）包装，并且这些对象不会被添加到 entityManager 缓存中。

第二种选择是使用 json.net 序列化拦截点。（请参阅[json.net 帮助](http://james.newtonking.com/projects/json/help/)）。这将允许您有条件地抑制选定属性的序列化。请注意这一点，因为如果您尝试重新保存在“清理”后返回给客户端的任何实体，您将需要在完成保存之前将这些属性恢复为其原始值（在服务器上）。

根据问题 4：微风是开源的，可在 github 上找到。您可以自由使用源代码。

根据问题 5：在最新版本的微风.webApi.dll 中，我们已经从我们的基本 webApi 功能重构了我们的 EF 特定代码，正是为了这个目的。我们尚未完成对此的记录，但您可以查看 Breeze.webApi 项目中的“ContextProvider”和“EFContextProvider”类，以了解其他提供程序的外观。我们计划在不久的将来某个时候为 mongodb 之类的东西展示一个 NoSQL 提供程序。[请为微风用户的声音](https://breezejs.uservoice.com/forums/173093-breeze-feature-suggestions)投票，以获得该领域的任何具体建议。

# javascript - 将大量数据从 Web 服务器传输到客户端

> ID：13607715
> 
> 赞同：6
> 
> 时间：2012-11-28T14:44:05.047
> 
> 标签：javascript, asp.net-mvc, architecture, html5-canvas

我正在开始一个新项目，它将使用 HTML5 画布呈现复杂的图形。

目前，我们有一个 Windows 窗体实现，我们希望将其迁移到 Web。因此，布局、绘图对象和所有绘图元数据都是在 C# 中生成的。我们只需要实现绘图，我们将使用 HTML5 画布。

服务器端将是 ASP MVC。它将计算绘图模型，并将其发送给客户端。然后客户端将使用画布来表示数据。

问题是绘图模型有时可能很大。也许 10Mb-50Mb 的元数据。将所有绘图数据从服务器发送到客户端的最佳方式是什么？

## 将模型用于在 JavaScript 中创建绘图对象的页面中的脚本

这将是标准方式。我将使用 C# 中的绘图对象生成一个模型，然后将这些对象转换为 JavaScript。

*   *优点*：易于实施
*   *缺点*：页面会很重。

## 从返回绘图数据的控制器返回 JsonResult

例如，我可以使用 jQuery 来获取它。此选项失败，因为我达到了 maxJsonLength 属性。我知道它可以在 web.config 中更改，但这似乎不是一个好主意。3.

*   *优点*：易于实现，可以使用 ajax 从服务器加载绘图对象并向用户报告进度。
*   *缺点*：更改 Web.config 中的 maxJsonLength 属性似乎不是一个好主意。

## 使用服务器中的绘图数据生成临时脚本文件并将其包含在客户端页面中

服务器会生成一个JS脚本文件中的绘图数据。然后服务器会将这个页面作为 JavaScript 包含在客户端页面中，因此绘图数据将被加载到客户端中。这种加载也可以使用 ajax 来完成。

*   *优点*：就像下载一个文件，如果它很大，那不会有问题。
*   *缺点*：更难实施。需要管理临时文件，我们需要知道文件何时传输，然后将其删除。

## 其他选择

任何**其他选项都将受到欢迎**，因为我不是 HTML 编程专家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T09:26:18.123

我认为我会采取一些不同的方法。我将使用[servicestack](http://servicestack.net)，在这里我假设您已将业务轮胎分开。现在，我将使用[骨干 js](http://backbonejs.org/)或[angular js](http://angularjs.org/)而不是 canvas 。还有很多其他的 UI 生成框架。现在，使用 require js 之类的库，我只推送 UI 生成所需的详细信息，或者使用 UI 所需的 UI 推送 HTML。所以，这里的速度会更快，页面会更轻。一旦缩小的 Javascript 到达客户端，它将不会加载，而仅用于计算和呈现页面上的 html 部分。单页应用程序将与桌面一样快。差不多就这么多了。我希望这对你有用。我已经添加了链接，如果您需要更多详细信息，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T15:31:05.240

将繁重的部分（子页面上的脚本和数据）放在轻量级页面**的 iframe**中，以便可以异步加载繁重的内容。这具有第一个 script-on-page 选项易于实现的优点，同时获得了第三个 load-as-separate-script-file 选项的优点（并且没有临时文件管理缺点）。

在 iframe 加载时，您可以[显示加载图像](https://stackoverflow.com/questions/10979541/javascript-show-loading-gif-while-iframe-loads)，以便用户知道发生了什么。

# python - 使用 windows 在 apache 上部署多个 Django 项目

> ID：13607724
> 
> 赞同：7
> 
> 时间：2012-11-28T14:44:12.073
> 
> 标签：python, django, windows, apache, mod-wsgi

我正在尝试提供一个域名并在我的 apache 上运行多个 django 项目，目前我设法托管一个应用程序并在***127.0.0.1:8888***上运行它，设置看起来像这样。

```
WSGIScriptAlias / C:/Users/ShabeerSheffa/workspace/ApacheDemo/ApacheDemo/wsgi.py
WSGIPythonPath C:/Users/ShabeerSheffa/workspace/ApacheDemo

<Directory C:/Users/ShabeerSheffa/workspace/ApacheDemo>
    <Files wsgi.py>
        Order deny,allow
        Allow from all
    </Files>
</Directory> 
```

我尝试将上面的代码更改为看起来像下面的代码，并带有一个域名，这样我就可以使用**apachedemo.com**访问它，但是失败了。

```
NameVirtualHost apachedemo.com   

<VirtualHost apachedemo.com>    
    ServerName apachedemo.com  
    ServerAlias www.apachedemo.com

    WSGIScriptAlias / C:/Users/ShabeerSheffa/workspace/ApacheDemo/ApacheDemo/wsgi.py
    WSGIPythonPath C:/Users/ShabeerSheffa/workspace/ApacheDemo

    DocumentRoot C:/Users/ShabeerSheffa/workspace/ApacheDemo

    <Directory C:/Users/ShabeerSheffa/workspace/ApacheDemo>
        <Files wsgi.py>
            Order deny,allow
            Allow from all
        </Files>
    </Directory>    

</VirtualHost> 
```

我目前在 Windows 7 机器上为我的 apache 使用端口 8888，127.0.0.1:8888 适用于代码的第一个版本，但在编辑代码后，apache 在重新启动 apache 时出错。

这就是我的主机文件的样子，我只添加了最后一行。（*不太清楚为什么第二行和第三行有 #*）

```
# localhost name resolution is handled within DNS itself.
#   127.0.0.1       localhost
#   ::1             localhost
    127.0.0.1:8888       apachedemo.com       www.apachedemo.com 
```

我试图找到两个问题的答案-

1.  我如何使**apachedemo.com**工作
2.  如何在同一服务器上添加另一个项目，例如**apachedemo2.com**

编辑：我正在使用 eclipse 开发我的项目

非常感谢你们的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T15:38:51.640

试试下面的配置。您可能还会发现这个[问题](https://stackoverflow.com/q/1553165/1699750)很有用，并且在 mod wsgi 文档中有一个关于虚拟主机的部分[也](http://code.google.com/p/modwsgi/wiki/ConfigurationGuidelines)可能对您有所帮助。

```
WSGIPythonPath C:/Users/ShabeerSheffa/workspace/ApacheDemo

<VirtualHost apachedemo.com:8888>
    ServerName apachedemo.com
    WSGIScriptAlias / C:/Users/ShabeerSheffa/workspace/ApacheDemo/ApacheDemo/wsgi.py

    <Directory C:/Users/ShabeerSheffa/workspace/ApacheDemo>
        <Files wsgi.py>
            Order deny,allow
            Allow from all
        </Files>
    </Directory>
</VirtualHost>

<VirtualHost apachedemo2.com:8888>
    ServerName apachedemo2.com
    WSGIScriptAlias / C:/Users/ShabeerSheffa/workspace/ApacheDemo/apachedemo2/wsgi.py

    <Directory C:/Users/ShabeerSheffa/workspace/ApacheDemo>
        <Files wsgi.py>
            Order deny,allow
            Allow from all
        </Files>
    </Directory>
</VirtualHost> 
```

**更新**

下面询问的评论之一是否可以在每个虚拟主机中有不同的 WSGIPythonPath。查看[配置文档](http://code.google.com/p/modwsgi/wiki/ConfigurationDirectives#WSGIPythonPath)WSGIPythonPath 只能在上下文服务器配置中而不是虚拟主机中。但是，您可以添加到您的 wsgi 文件本身的路径中，[如本答案所示](https://stackoverflow.com/a/13532538/1699750)。您也可以尝试使用 python-path 查看 WSGIDaemonProcess，如[本问题](https://stackoverflow.com/q/13532182/1699750)所示。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-28T22:19:53.953

确保您阅读：

*   [http://blog.dscpl.com.au/2012/10/requests-running-in-wrong-django.html](http://blog.dscpl.com.au/2012/10/requests-running-in-wrong-django.html)

Django 1.4 中自动生成的 wsgi.py 文件的执行方式是，您无法在不同的子解释器下在同一进程中托管两个 Django 实例。您将需要更改 wsgi.py 文件。

如果您仍然有任何问题，这是您在 Apache 配置中可能遇到的任何问题的补充。由于尽管您通过提供任何错误消息而对错误的确切含义含糊不清，但很难猜测您遇到的问题是什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-11T08:22:29.937

最好的解决方案是在它自己的 Django 实例中在它自己的 WSGI 进程上运行每个 Django 项目。

```
WSGIPythonPath /var/www/path/web:/var/www/path/api

WSGIDaemonProcess api_wsgi user=user group=group
WSGIScriptAlias /api /var/www/path/api/wsgi.py
<Location /api>
WSGIProcessGroup api_wsgi
</Location>

WSGIDaemonProcess web_wsgi user=user group=group
WSGIScriptAlias /web /var/www/path/web/wsgi.py
<Location /web>
#SetEnv DJANGO_SETTINGS_MODULE project.settigs
WSGIProcessGroup web_wsgi
</Location> 
```

关于该主题的帖子： [http ://www.area0x33.com/blog/?p=155](http://www.area0x33.com/blog/?p=155)

# linux - 从内核模块写入 eventfd

> ID：13607730
> 
> 赞同：22
> 
> 时间：2012-11-28T14:44:27.963
> 
> 标签：linux, linux-kernel

我使用 eventfd() 在用户空间程序中创建了一个 eventfd 实例。有没有一种方法可以将一些引用（指向其结构或 pid+fd 对的指针）传递给这个创建的 eventfd 实例到内核模块，以便它可以更新计数器值？

这就是我想做的事情：我正在开发一个用户空间程序，它需要与我编写的内核空间模块交换数据和信号。为了传输数据，我已经在使用 ioctl。但是我希望内核模块能够在新数据准备好通过 ioctl 使用时向用户空间程序发出信号。

为此，我的用户空间程序将在各种线程中创建一些 eventfd。这些线程将使用 select() 等待这些 eventfds，并且每当内核模块更新这些 eventfds 的计数时，它们将继续通过 ioctl 请求数据来使用数据。

问题是，如何解决内核空间中指向这些 eventfds 的“struct file *”指针？我可以将关于 eventfds 的哪些信息发送到内核模块，以便它可以获得指向 eventfds 的指针？我将在内核模块中使用哪些函数来获取这些指针？

有没有更好的方法从内核空间向用户空间发送事件信号？我不能放弃使用 select()。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-29T14:36:02.587

我终于想出了如何做到这一点。我意识到系统上每个打开的文件都可以通过打开它的进程之一的 pid 和对应于该文件的 fd 来识别（在该进程的上下文中）。因此，如果我的内核模块知道 pid 和 fd，它可以查找进程的**struct * task_struct并从中查找****struct * 文件**，最后使用 fd，它可以获得指向 eventfd 的**struct * file**的指针。然后，使用最后一个指针，它可以写入 eventfd 的计数器。

以下是我为演示该概念而编写的用户空间程序和内核模块的代码（现在可以使用）：

**用户空间 C 代码 (efd_us.c)：**

```
#include <unistd.h>
#include <stdlib.h>
#include <stdio.h>
#include <stdint.h>     //Definition of uint64_t
#include <sys/eventfd.h>

int efd; //Eventfd file descriptor
uint64_t eftd_ctr;

int retval;     //for select()
fd_set rfds;        //for select()

int s;

int main() {

    //Create eventfd
    efd = eventfd(0,0);
    if (efd == -1){
        printf("\nUnable to create eventfd! Exiting...\n");
        exit(EXIT_FAILURE);
    }

    printf("\nefd=%d pid=%d",efd,getpid());

    //Watch efd
    FD_ZERO(&rfds);
    FD_SET(efd, &rfds);

    printf("\nNow waiting on select()...");
    fflush(stdout);

    retval = select(efd+1, &rfds, NULL, NULL, NULL);

    if (retval == -1){
        printf("\nselect() error. Exiting...");
        exit(EXIT_FAILURE);
    } else if (retval > 0) {
        printf("\nselect() says data is available now. Exiting...");
        printf("\nreturned from select(), now executing read()...");
        s = read(efd, &eftd_ctr, sizeof(uint64_t));
        if (s != sizeof(uint64_t)){
            printf("\neventfd read error. Exiting...");
        } else {
            printf("\nReturned from read(), value read = %lld",eftd_ctr);
        }
    } else if (retval == 0) {
        printf("\nselect() says that no data was available");
    }

    printf("\nClosing eventfd. Exiting...");
    close(efd);
    printf("\n");
    exit(EXIT_SUCCESS);
} 
```

**内核模块 C 代码 (efd_lkm.c)：**

```
#include <linux/module.h>
#include <linux/kernel.h>
#include <linux/pid.h>
#include <linux/sched.h>
#include <linux/fdtable.h>
#include <linux/rcupdate.h>
#include <linux/eventfd.h>

//Received from userspace. Process ID and eventfd's File descriptor are enough to uniquely identify an eventfd object.
int pid;
int efd;

//Resolved references...
struct task_struct * userspace_task = NULL; //...to userspace program's task struct
struct file * efd_file = NULL;          //...to eventfd's file struct
struct eventfd_ctx * efd_ctx = NULL;        //...and finally to eventfd context

//Increment Counter by 1
static uint64_t plus_one = 1;

int init_module(void) {
    printk(KERN_ALERT "~~~Received from userspace: pid=%d efd=%d\n",pid,efd);

    userspace_task = pid_task(find_vpid(pid), PIDTYPE_PID);
    printk(KERN_ALERT "~~~Resolved pointer to the userspace program's task struct: %p\n",userspace_task);

    printk(KERN_ALERT "~~~Resolved pointer to the userspace program's files struct: %p\n",userspace_task->files);

    rcu_read_lock();
    efd_file = fcheck_files(userspace_task->files, efd);
    rcu_read_unlock();
    printk(KERN_ALERT "~~~Resolved pointer to the userspace program's eventfd's file struct: %p\n",efd_file);

    efd_ctx = eventfd_ctx_fileget(efd_file);
    if (!efd_ctx) {
        printk(KERN_ALERT "~~~eventfd_ctx_fileget() Jhol, Bye.\n");
        return -1;
    }
    printk(KERN_ALERT "~~~Resolved pointer to the userspace program's eventfd's context: %p\n",efd_ctx);

    eventfd_signal(efd_ctx, plus_one);

    printk(KERN_ALERT "~~~Incremented userspace program's eventfd's counter by 1\n");

    eventfd_ctx_put(efd_ctx);

    return 0;
}

void cleanup_module(void) {
    printk(KERN_ALERT "~~~Module Exiting...\n");
}  

MODULE_LICENSE("GPL");
module_param(pid, int, 0);
module_param(efd, int, 0); 
```

要运行它，请执行以下步骤：

1.  编译用户空间程序 (efd_us.out) 和内核模块 (efd_lkm.ko)
2.  运行用户空间程序 (./efd_us.out) 并记下它打印的 pid 和 efd 值。（例如“pid=2803 efd=3”。用户空间程序将无休止地等待 select()
3.  打开一个新的终端窗口并插入传递 pid 和 efd 作为参数的内核模块：**sudo insmod efd_lkm.ko pid=2803 efd=3**
4.  切换回用户空间程序窗口，您将看到用户空间程序已脱离选择并退出。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-28T22:31:53.920

在此处查阅内核源代码：

[http://lxr.free-electrons.com/source/fs/eventfd.c](http://lxr.free-electrons.com/source/fs/eventfd.c)

基本上，通过或其他路径将您的用户空间文件描述符（由 生成`eventfd()`）发送到您的模块。`ioctl()`从内核调用`eventfd_ctx_fdget()`以获取 eventfd 上下文，然后`eventfd_signal()`在结果上下文中调用。`eventfd_ctx_put()`当你完成上下文时不要忘记。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T15:19:17.270

> 如何从内核空间解析指向这些 eventfds 的“struct file *”指针

您必须将这些指针解析为您创建的此接口已发布的数据结构（创建新类型并从中读取您想要的字段`struct file`）。

> 有没有更好的方法从内核空间向用户空间发送事件信号？

[Netlink 套接字](http://qos.ittc.ku.edu/netlink/html/)是内核与用户空间通信的另一种便捷方式。“更好”在旁观者的眼中。

# node.js - 用于测试的内存 MongoDB？

> ID：13607732
> 
> 赞同：23
> 
> 时间：2012-11-28T14:44:32.817
> 
> 标签：node.js, mongodb, integration-testing, mocha.js

我正在使用 MongoDB 数据库为我的 NodeJS 应用程序编写一些集成和系统测试。我使用的测试框架是 Mocha 和 Supertest。是否可以将 MongoDB 设置为内存数据库，我只能使用它进行测试，然后在测试完成后擦除我的所有集合和文档？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2018-08-03T17:51:43.257

您可以使用[mongodb-memory-server](https://www.npmjs.com/package/mongodb-memory-server)完成此操作。该软件包将 mongod 二进制文件下载到您的主目录，并根据需要实例化一个新的内存支持 MondoDB 实例。对于每个测试文件，您都可以启动一个新服务器，这意味着您可以并行运行它们。

* * *

对于使用[jest](https://jestjs.io)和本[机 mongodb 驱动程序](https://www.npmjs.com/package/mongodb)的读者，您可能会发现这个类很有用：

```
const { MongoClient } = require('mongodb');
const { MongoMemoryServer } = require('mongodb-memory-server');

// Extend the default timeout so MongoDB binaries can download
jest.setTimeout(60000);

// List your collection names here
const COLLECTIONS = [];

class DBManager {
  constructor() {
    this.db = null;
    this.server = new MongoMemoryServer();
    this.connection = null;
  }

  async start() {
    const url = await this.server.getUri();
    this.connection = await MongoClient.connect(url, { useNewUrlParser: true });
    this.db = this.connection.db(await this.server.getDbName());
  }

  stop() {
    this.connection.close();
    return this.server.stop();
  }

  cleanup() {
    return Promise.all(COLLECTIONS.map(c => this.db.collection(c).remove({})));
  }
}

module.exports = DBManager; 
```

然后在每个测试文件中，您可以执行以下操作：

```
const dbman = new DBManager();

afterAll(() => dbman.stop());
beforeAll(() => dbman.start());
afterEach(() => dbman.cleanup()); 
```

我怀疑这种方法可能与其他测试框架类似。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-04-17T18:15:55.487

我推荐使用 mongodb-memory-server。

我有一个在整个项目中共享的数据库文件，所以我也必须让它可测试。

```
//db.js

import mongoose from 'mongoose';
import bluebird from 'bluebird';

module.exports = {
  mongoose,
  init: () => {
      mongoose.Promise = bluebird;
  },
  connect: async database => {
      try {
          const conn =  await mongoose.connect(
              database,
              { useNewUrlParser: true }
          );

          //eslint-disable-next-line
          console.log(`MongoDb Connected on: ${database}`);

          return conn;
      } catch (err) {
          //eslint-disable-next-line
          console.log('Error to connect on mongo', err);
      }
  },
  disconnect: async () => await mongoose.connection.close()
}; 
```

为了在我的测试中使用（db.js），我创建了一个 test-helper.js 文件。

```
'use strict';
import MongodbMemoryServer from 'mongodb-memory-server';
import db from '../src/db';

const server = new MongodbMemoryServer();

const createDB = async () => {
    try {
       const url = await server.getConnectionString();
       db.connect(url);
    } catch (err) {
      throw err;
    }
 };

 const destroyDB = () => {
   db.disconnect();

 };

 module.exports = {
    createDB,
    destroyDB
 }; 
} 
```

所以，我的测试总是在（创建和销毁 de DB）之前和之后，比如：

```
import { createDB, destroyDB } from '../test-helper';
before(() => {
  createDB();
});
after(() => {
  destroyDB();
}); 
```

希望它是有帮助的。

我正在使用的项目：[https ://github.com/abdalla/node-auth](https://github.com/abdalla/node-auth)

# git - git pull 自动通过 crontab

> ID：13607734
> 
> 赞同：3
> 
> 时间：2012-11-28T14:44:38.143
> 
> 标签：git, cron, crontab

我想将我服务器上的 git 存储库同步到我的本地网络服务器。我阅读的所有指南都导致了不同的错误，现在我真的很绝望。对不起，如果您已经阅读了这个问题一百遍，但我仍然不明白 -.-

*   使用 Linux SuSE 并通过 SSH 使用 PuTTY 连接它
*   我需要同步的 webprojekt 位于文件夹中：/srv/www/htdocs/my_project
*   git 存储库在这里：/srv/git/repository/my_project
*   我有用户：“root”和“cron”

cron 应该使用用户“cron”每分钟或更短时间执行一次此命令：

```
cd /srv/www/htdocs/my_project
git pull origin
(git fetch) <-- not mandatory 
```

当我手动输入这些命令时，它们可以正常工作。（除了我每次都要输入用户密码）

[在这个问题中我得到了一些信息，但是当我自己尝试它们时总是会出错](https://stackoverflow.com/questions/4414140/git-auto-pull-using-cronjob/4415927#4415927)。

我的 cron 应该是这样的：

```
* * * * * su -s /bin/sh cron -c 'cd /srv/www/htdocs/my_project && /usr/local/bin/git pull origin master' 
```

我在我的 PuTTY 上执行了这个，它回答了我：**-bash: bin: command not found**

我的下一次尝试是：

```
crontab * * * * * su -s /bin/sh cron -c 'cd /srv/www/htdocs/my_project && /usr/local/bin/git pull origin master' 
```

**错误：crontab：无效选项 - 's'**

**错误：crontab：使用错误：无法识别的选项**

我尝试了更多组合（删除 su -s 或删除 -c 等），但它从来没有像我想要的那样工作 -.- 我不应该在 PuTTY 上执行这个命令吗？

很高兴知道：我是 linux 和 GIT 初学者，昨天开始使用它，直到现在实际上已经做了很多。( *^.^* ) 所以我很乐意有一个可以理解的解释，我做错了什么，我必须做什么。这很令人困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T10:44:39.063

实现您想要的最简单的方法（让 git 存储库自动部署在您的服务器上）是将 git 存储库放在您的网络服务器中并使用钩子在推送时进行检查。这个答案中描述了如何做到这一点：[Deploy a project using Git push](https://stackoverflow.com/questions/279169/deploy-a-project-using-git-push)

# jquery - 将来自 rss 提要的图像设置为 wallaper

> ID：13607736
> 
> 赞同：0
> 
> 时间：2012-11-28T14:44:45.227
> 
> 标签：jquery, parsing, rss, bing

> **可能重复：**
> [将 Bing 背景图像 rss 设置为我的页面 jquery 的背景](https://stackoverflow.com/questions/13593622/set-bing-background-image-rss-as-background-of-my-page-jquery)

我是一个 jquery 新手。我需要解析来自这个 RSS 提要的第一张图片，并将其用作我页面的背景图片。我正在开发一个 phonegap 应用程序，因此跨域限制不是问题。

这是 rss 提要： http: [//feeds.feedburner.com/bingimages](http://feeds.feedburner.com/bingimages)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T15:45:21.160

看一下这个

[**例子**](http://jsfiddle.net/videsignz/gqTnX/5/)

您需要在页面顶部添加此 rss 插件 (zrssfeed) 以获取提要

```
<script type="text/javascript" src="http://www.komfrisk.dk/test/atom/jquery.zrssfeed.js"></script> 
```

接下来在你的 html 中，放置这个隐藏的 div。

```
<div id="RSSview" style='display:none;'></div> 
```

最后，这是加载第一个提要并找到图像，然后将其设置为背景的脚本

```
 function firstFeed(){
    $('#RSSview').rssfeed( 'http://feeds.feedburner.com/bingimages' , { limit: 1, offset: 0 });
    setTimeout(function(){
    var image = $('.rssMedia').find('a').attr('href');
    $('body').css({'background-image' : 'url("' + image + '")' });
    }, 2000);
}

firstFeed(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T14:59:56.943

将要显示的提要值存储在变量中（解析此小提琴并找到所需的图像）

例如 var imageUrl = "http://../../myImg.jpg"

然后使用这个：

```
$('myOjbect').css('background-image', 'url("' + imageUrl + '")'); 
```

试试我的小提琴：http: [//jsfiddle.net/m8GBL/](http://jsfiddle.net/m8GBL/)

# python - 我正在寻找某种树（类别）机制，或实现自己的提示

> ID：13607740
> 
> 赞同：-2
> 
> 时间：2012-11-28T14:44:49.203
> 
> 标签：python, tree, categories

我正在寻找某种“树类别”机制。我可以这样形容。让我们有一个模式（可以用项目扩展，比如将大蒜添加到蔬菜中）

*   事物
    *   蔬菜
        *   萝卜
        *   黄瓜
        *   其他
    *   水果
        *   苹果
        *   香蕉
        *   其他
*   其他

它的主要功能应该是：

*   像上面的大蒜例子一样扩展
*   轻松访问儿童（子类别），例如*水果*获得*苹果*、*香蕉*等..
*   漂亮的可视化，不比这个怪异的花哨网站更糟糕： [http](http://whatdoyousuggest.net/#|default|default) : //whatdoyousuggest.net/#|default|default（如果我的 reasearch 正确，则通过 js raphealas 插件）

我将成为基于 python 的 Web 服务（django、flask、pyramid）的一部分，因此需要使用 python 或其他易于理解的语言来执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:05:59.877

如果您不熟悉树，您可以查看基本原理，包括嵌套集： [http](http://en.wikipedia.org/wiki/Nested_set_model) ://en.wikipedia.org/wiki/Nested_set_model Python/django 的嵌套集上的就绪源代码： [http://pypi.python。 org/pypi/django-treebeard](http://pypi.python.org/pypi/django-treebeard)

# unit-testing - 如何对 Xtext 进行单元测试

> ID：13607742
> 
> 赞同：8
> 
> 时间：2012-11-28T14:44:51.863
> 
> 标签：unit-testing, dsl, xtext, xtend

我必须测试我的语法（用 Xtext 编写）。我已经看到使用单元测试是可能的，但我找不到关于它的好教程。

你能帮助我吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T19:40:52.713

有几个关于这个的链接。

*   官方教程有关于特殊 Xtext/Junit 支持的章节：[单元测试语言](http://www.eclipse.org/Xtext/documentation.html#TutorialUnitTests)

*   [Xtext-Utils](http://code.google.com/a/eclipselabs.org/p/xtext-utils/wiki/Unit_Testing)有一些工具

*   Xpect 提供了一个用于对 DSL 进行单元测试的 DSL。[幻灯片在这里](http://www.slideshare.net/meysholdt/testdriven-development-of-xtext-dsls#btnNext)（看起来很有趣）

*   Markus Voelter 的幻灯片“ [Testing DSLs](http://www.voelter.de/data/presentations/oop2012-dslTesting-slides.pdf) ”解释了一些东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-03T06:46:31.553

Xpect 似乎是 xtext 测试的最新发展。 [http://www.xpect-tests.org/](http://www.xpect-tests.org/)

# javascript - 如何使用从 jsonp 对象中返回的 google fusion 表查询的 kml 数据？

> ID：13607747
> 
> 赞同：0
> 
> 时间：2012-11-28T14:45:02.330
> 
> 标签：javascript, google-maps, google-api, jsonp, google-fusion-tables

我正在查询 google 融合表以获取多边形列表，这些多边形在表中以 kml 多边形的形式出现。该查询返回一个包含坐标数据的 jsonp 对象。我需要做的是从 jsonp 对象中检索这些坐标并将它们放入一个 google api 多边形数组中，这样我就可以在谷歌地图上用自己的颜色绘制它们。我正在使用 jquery $.ajax() 函数执行此查询。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T18:25:29.560

我一直在为查询返回的 JSONP 对象开发通用解析器，希望它能为您指明正确的方向：

Fusion Tables v1.0 API 示例的通用 GeoJSON 解析：

*   [折线](http://www.geocodezip.com/v3_GoogleEx_FusionTables_generic_JSON_linkto.html?lat=39.923549&lng=-86.306907&zoom=10&type=m&tableid=1im8RszWUjZZhZdBnO8C0rfWGvT059O2EKk6TvZs&tablequery=SELECT%20%20geometry,%20GRID_CODE%20FROM)

*   [多边形](http://www.geocodezip.com/v3_GoogleEx_FusionTables_generic_JSON_linkto.html?lat=37.174668&lng=-38.845970&zoom=2&type=m&tableid=1foc3xO9DyfSIF6ofvN0kp2bxSfSeKog5FbdWdQ&tablequery=SELECT%20%20kml_4326%,%name%20FROM&where=name%20does%20not%20contain%20%27Antarctica%27)

*   [标记](http://www.geocodezip.com/v3_GoogleEx_FusionTables_generic_JSON_linkto.html?lat=14.620282&lng=-90.504716&zoom=12&type=m&tablequery=SELECT%20%20geometry,%20name,%20description%20FROM&tableid=1npi-QWwoZ6LP_9wwHiwiG2omzMm6R9Qoj5aMjkM)

# c++ - 关机调用后如何在 UDP recvfrom() 调用中获得 0 的返回值。？

> ID：13607751
> 
> 赞同：1
> 
> 时间：2012-11-28T14:45:05.277
> 
> 标签：c++, networking, udp

[当发送方按照此处](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740120%28v=vs.85%29.aspx)指定的方式正常关闭套接字连接时，我尝试通过网络获取 0 的值。当我使用无阻塞呼叫时，在数据从发送方发送到接收方之前，我在 UDP 流中得到了 -1。发送原始数据后，当我关闭连接（尝试关闭套接字并关闭发送方的套接字）时，我仍然得到 -1 而不是 0 表示套接字已关闭。任何人都可以请帮助是否有任何方法可以得到相同的。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T15:21:04.160

当 UDP 套接字被[`close(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/close.2.html)-ed 时，即使套接字被[`connect(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/connect.2.html)-ed，也不会发送任何内容。另一方面，TCP 启动[四向连接拆除](http://en.wikipedia.org/wiki/Transmission_Control_Protocol#Connection_termination)。看起来你混淆了这两种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T15:05:07.540

用于关闭的 UNIX 手册页[说明](http://linux.die.net/man/2/shutdown)以下内容：

> 返回值：
> 
> 成功时，返回零。出错时，返回 -1，并适当设置 errno。
> 
> 错误：
> 
> EBADF - sockfd 不是有效的描述符。
> ENOTCONN - 指定的套接字未连接。
> ENOTSOCK - sockfd 是一个文件，而不是一个套接字。

和windows平台[有](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740481%28v=vs.85%29.aspx)大同小异：

> 返回值
> 
> 如果没有发生错误，shutdown 将返回零。否则，返回 SOCKET_ERROR 的值，并且可以通过调用 WSAGetLastError 来检索特定的错误代码。

事情是：UDP 不是面向连接的协议，并且 connect() 调用它并不意味着建立任何关联。

所以我猜，你实际上得到了 ENOTCONN 错误（或 WSAENOTCONN，如果你在 Windows 上）检查你的 errno（或 Windows 上的 WSAGetLastError()）

# windows-8 - Windows 8 固定站点图像-mstileimage 不起作用

> ID：13607755
> 
> 赞同：5
> 
> 时间：2012-11-28T14:45:19.090
> 
> 标签：windows-8, internet-explorer-10

我看到颜色正常，应用程序名称正常，但不是图像。如果我将图像放在 html 元素上，我会看到它。所以图像路径或渲染没有问题。

```
<meta name="application-name" content="fice.com"/>
<meta name="msapplication-TileColor" content="#515254"/>
<meta name="msapplication-TileImage" content="original.png"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:57:46.187

您的标记是正确的，因此问题一定出在“original.png”图像的路径上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T07:29:58.247

平铺图像必须是`144x144 png`图像。你的图像尺寸是多少？

资源 ; [查看社区添加部分](http://msdn.microsoft.com/en-us/library/ie/gg491740%28v=vs.85%29.aspx)

# java - 类的对象作为类内的实例变量

> ID：13607757
> 
> 赞同：12
> 
> 时间：2012-11-28T14:45:26.940
> 
> 标签：java, c++, oop, reference, instance-variables

> **可能重复：**
> [一个类如何拥有自己类型的成员，这不是无限递归吗？](https://stackoverflow.com/questions/9780742/how-can-a-class-have-a-member-of-its-own-type-isnt-this-infinite-recursion)

编码：

```
public class Test2{
    private Test2 subject = new Test2(); //Create Test2 object in Test2
    private int num;
} 
```

问题：

1.  为什么 Java 允许执行上述代码，而 C++ 不允许？

2.  上面的代码是否创建了无限数量的对象？因为`Test2`它本身包含一个`Test2`对象，该对象又包含一个`Test2`对象，该对象本身具有一个`Test2`对象，依此类推。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-28T15:08:28.667

关于您的问题，两种语言之间的主要区别在于 Java 是一种具有引用语义的语言（原始类型除外），而 C++ 是一种具有值语义的语言，允许通过引用和指针进行引用语义。

在两种语言中看起来*相似*的语法具有完全不同的含义，在 Java 中创建*引用*( `Test2 x = new Test2();`) 时，C++ 中的等效构造将使用指针 ( `Test2 *x = new Test2();`)。

一个关键的区别是，通过使用指针在值语义之上提供引用语义很简单，但在（纯）引用语义之上提供值语义是不可能的。该语句的一些含义包括无法控制 Java 中对象在内存中的布局或数据的局部性（对于原始类型和原始类型数组以外的任何内容），而在另一个方向上可以更好地控制对象在 C++ 中允许您模仿 Java 对象。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-28T14:48:06.003

关于问题 2 - 如果您运行此代码，您会得到一个 StackOverflowException => 是的，它会创建无限数量的对象（它会尝试...）

```
public class Test2 {

    private Test2 subject = new Test2(); //Create Test2 object in Test2

    public static void main(String[] args) throws Exception {
        Test2 t = new Test2();
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-28T14:47:01.617

`subject`这是*对*`Test2`. 如果您尝试运行它，代码将很快耗尽一些资源（可能是堆栈空间，也可能是堆空间）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-28T14:57:40.537

> 为什么 Java 允许执行上述代码而 C++ 不允许？

自 2011 年以来，C++ 还允许在其声明中初始化类成员。

但是，它不允许这种情况：您只能实例化完整类型，并且类类型在类定义中是不完整的，因此必须在构造函数中初始化它，或者通过调用函数：

```
class Test;
Test * make_test();

class Test {
    // Test is incomplete, so "new Test" is not possible here
    Test * test = make_test();
};

// Test is complete, so we can instantiate it here
Test * make_test() {return new Test;} 
```

Java 没有不完整类型的概念，因此可以在允许实例化任何类的任何地方实例化该类。

> 上面的代码是否创建了无限对象？

是的，尝试实例化这样的类会使您的程序陷入递归死亡螺旋。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T14:49:12.210

如果您声明`subject`为 being `static`，您将获得单例模式的急切初始化版本，这不会让您耗尽资源。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-28T14:49:24.740

因为您可以有多个构造函数，所以它是允许的。如果您只有一个构造函数，这确实会导致无限循环。

```
public class Test{
    private Test a;

    public Test(String s){
        this.a=new Test();
    }

    public Test(){

    }

} 
```

# .net - 基于消息区分异常的替代方法？

> ID：13607758
> 
> 赞同：0
> 
> 时间：2012-11-28T14:45:30.710
> 
> 标签：.net, wpf, exception, xsd

我在 VB.NET 中工作 - C# 答案很好。

我正在构建一个系统来处理针对特定 XmlSchema 的 XML 验证。我的 XML 文档中的每个错误都有一个 SchemaException 实例，我可以从中获取错误的行号和位置，以及消息。据我所知，确定特定错误（无效属性、缺少元素等）的唯一方法是读取不可靠的消息字符串，因为 MS 将来可能会更改它并且消息被本地化。

我需要能够在**不依赖 .Message 属性**的情况下区分这些错误，以便显示我自己的自定义错误并在我的文本编辑器中突出显示错误。

区分这些的正确方法是什么？这一定是可能的，对吧？

**更多信息：**

异常的 LinePosition 属性并不总是报告我想开始突出显示的位置 - 例如，所有与属性相关的异常都报告属性的开始，我希望能够仅突出显示属性值，如果那是问题。

SchemaException 提供了一个 SourceSchemaObject 属性，我可以用它来确定问题是来自元素还是属性，如果运气好的话，我可以通过提取导致错误并以某种方式将其与 SourceSchemaObject 进行比较，但这感觉像是一个非常复杂和 hacky 的解决方案 - 如果我可以解决特定错误，我可以通过一些正则表达式工作来解决它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T20:38:09.213

好的，我最终解决了这个问题。我认为异常必须具有指示特定错误的内部值才能生成消息，因此我使用 ILSpy 深入观察它的灵魂。事实证明它确实有一个名为“res”的内部字段，它包含一个映射到我们可以使用反射访问的错误的字符串。

我写了一个小扩展方法，为我检索这个错误作为一个字符串。

```
<Extension()>
Public Function getErrorType(ByRef ref As XmlSchemaException) As XmlSchemaExceptionErrorType
        Return GetType(XmlSchemaException).GetField("res", Reflection.BindingFlags.NonPublic Or Reflection.BindingFlags.Instance).GetValue(ref)
End Function 
```

这很棒，但我不想记住选择案例场景的所有这些字符串，所以我编写了一个脚本，将使用 ILSpy 提取的源代码转换为 Enum 并重新编写扩展方法，如下所示：

```
<Extension()>
Public Function getErrorType(ByRef ref As XmlSchemaException) As XmlSchemaExceptionErrorType
    Dim res As String = GetType(XmlSchemaException).GetField("res", Reflection.BindingFlags.NonPublic Or Reflection.BindingFlags.Instance).GetValue(ref)
    Return CType(System.Enum.Parse(GetType(XmlSchemaExceptionErrorType), res), XmlSchemaExceptionErrorType)
End Function

Public Enum XmlSchemaExceptionErrorType As Integer
        Sch_ParEntityRefNesting = 0
        Sch_NotTokenString = 1
        Sch_XsdDateTimeCompare = 2
        Sch_InvalidNullCast = 3
        Sch_InvalidDateTimeOption = 4
        Sch_StandAloneNormalization = 5
        Sch_UnSpecifiedDefaultAttributeInExternalStandalone = 6
        Sch_DefaultException = 7
        Sch_DupElementDecl = 8
        Sch_IdAttrDeclared = 9
        Sch_RootMatchDocType = 10
        Sch_DupId = 11
        Sch_UndeclaredElement = 12
        Sch_UndeclaredAttribute = 13
        Sch_UndeclaredNotation = 14
        Sch_UndeclaredId = 15
        Sch_SchemaRootExpected = 16
        Sch_XSDSchemaRootExpected = 17
        Sch_UnsupportedAttribute = 18
        Sch_UnsupportedElement = 19
        Sch_MissAttribute = 20
        Sch_AnnotationLocation = 21
        Sch_DataTypeTextOnly = 22
        Sch_UnknownModel = 23
        Sch_UnknownOrder = 24
        Sch_UnknownContent = 25
        Sch_UnknownRequired = 26
        Sch_UnknownDtType = 27
        Sch_MixedMany = 28
        Sch_GroupDisabled = 29
        Sch_MissDtvalue = 30
        Sch_MissDtvaluesAttribute = 31
        Sch_DupDtType = 32
        Sch_DupAttribute = 33
        Sch_RequireEnumeration = 34
        Sch_DefaultIdValue = 35
        Sch_ElementNotAllowed = 36
        Sch_ElementMissing = 37
        Sch_ManyMaxOccurs = 38
        Sch_MaxOccursInvalid = 39
        Sch_MinOccursInvalid = 40
        Sch_DtMaxLengthInvalid = 41
        Sch_DtMinLengthInvalid = 42
        Sch_DupDtMaxLength = 43
        Sch_DupDtMinLength = 44
        Sch_DtMinMaxLength = 45
        Sch_DupElement = 46
        Sch_DupGroupParticle = 47
        Sch_InvalidValue = 48
        Sch_InvalidValueDetailed = 49
        Sch_InvalidValueDetailedAttribute = 50
        Sch_MissRequiredAttribute = 51
        Sch_FixedAttributeValue = 52
        Sch_FixedElementValue = 53
        Sch_AttributeValueDataTypeDetailed = 54
        Sch_AttributeDefaultDataType = 55
        Sch_IncludeLocation = 56
        Sch_ImportLocation = 57
        Sch_RedefineLocation = 58
        Sch_InvalidBlockDefaultValue = 59
        Sch_InvalidFinalDefaultValue = 60
        Sch_InvalidElementBlockValue = 61
        Sch_InvalidElementFinalValue = 62
        Sch_InvalidSimpleTypeFinalValue = 63
        Sch_InvalidComplexTypeBlockValue = 64
        Sch_InvalidComplexTypeFinalValue = 65
        Sch_DupIdentityConstraint = 66
        Sch_DupGlobalElement = 67
        Sch_DupGlobalAttribute = 68
        Sch_DupSimpleType = 69
        Sch_DupComplexType = 70
        Sch_DupGroup = 71
        Sch_DupAttributeGroup = 72
        Sch_DupNotation = 73
        Sch_DefaultFixedAttributes = 74
        Sch_FixedInRef = 75
        Sch_FixedDefaultInRef = 76
        Sch_DupXsdElement = 77
        Sch_ForbiddenAttribute = 78
        Sch_AttributeIgnored = 79
        Sch_ElementRef = 80
        Sch_TypeMutualExclusive = 81
        Sch_ElementNameRef = 82
        Sch_AttributeNameRef = 83
        Sch_TextNotAllowed = 84
        Sch_UndeclaredType = 85
        Sch_UndeclaredSimpleType = 86
        Sch_UndeclaredEquivClass = 87
        Sch_AttListPresence = 88
        Sch_NotationValue = 89
        Sch_EnumerationValue = 90
        Sch_EmptyAttributeValue = 91
        Sch_InvalidLanguageId = 92
        Sch_XmlSpace = 93
        Sch_InvalidXsdAttributeValue = 94
        Sch_InvalidXsdAttributeDatatypeValue = 95
        Sch_ElementValueDataTypeDetailed = 96
        Sch_InvalidElementDefaultValue = 97
        Sch_NonDeterministic = 98
        Sch_NonDeterministicAnyEx = 99
        Sch_NonDeterministicAnyAny = 100
        Sch_StandAlone = 101
        Sch_XmlNsAttribute = 102
        Sch_AllElement = 103
        Sch_MismatchTargetNamespaceInclude = 104
        Sch_MismatchTargetNamespaceImport = 105
        Sch_MismatchTargetNamespaceEx = 106
        Sch_XsiTypeNotFound = 107
        Sch_XsiTypeAbstract = 108
        Sch_ListFromNonatomic = 109
        Sch_UnionFromUnion = 110
        Sch_DupLengthFacet = 111
        Sch_DupMinLengthFacet = 112
        Sch_DupMaxLengthFacet = 113
        Sch_DupWhiteSpaceFacet = 114
        Sch_DupMaxInclusiveFacet = 115
        Sch_DupMaxExclusiveFacet = 116
        Sch_DupMinInclusiveFacet = 117
        Sch_DupMinExclusiveFacet = 118
        Sch_DupTotalDigitsFacet = 119
        Sch_DupFractionDigitsFacet = 120
        Sch_LengthFacetProhibited = 121
        Sch_MinLengthFacetProhibited = 122
        Sch_MaxLengthFacetProhibited = 123
        Sch_PatternFacetProhibited = 124
        Sch_EnumerationFacetProhibited = 125
        Sch_WhiteSpaceFacetProhibited = 126
        Sch_MaxInclusiveFacetProhibited = 127
        Sch_MaxExclusiveFacetProhibited = 128
        Sch_MinInclusiveFacetProhibited = 129
        Sch_MinExclusiveFacetProhibited = 130
        Sch_TotalDigitsFacetProhibited = 131
        Sch_FractionDigitsFacetProhibited = 132
        Sch_LengthFacetInvalid = 133
        Sch_MinLengthFacetInvalid = 134
        Sch_MaxLengthFacetInvalid = 135
        Sch_MaxInclusiveFacetInvalid = 136
        Sch_MaxExclusiveFacetInvalid = 137
        Sch_MinInclusiveFacetInvalid = 138
        Sch_MinExclusiveFacetInvalid = 139
        Sch_TotalDigitsFacetInvalid = 140
        Sch_FractionDigitsFacetInvalid = 141
        Sch_PatternFacetInvalid = 142
        Sch_EnumerationFacetInvalid = 143
        Sch_InvalidWhiteSpace = 144
        Sch_UnknownFacet = 145
        Sch_LengthAndMinMax = 146
        Sch_MinLengthGtMaxLength = 147
        Sch_FractionDigitsGtTotalDigits = 148
        Sch_LengthConstraintFailed = 149
        Sch_MinLengthConstraintFailed = 150
        Sch_MaxLengthConstraintFailed = 151
        Sch_PatternConstraintFailed = 152
        Sch_EnumerationConstraintFailed = 153
        Sch_MaxInclusiveConstraintFailed = 154
        Sch_MaxExclusiveConstraintFailed = 155
        Sch_MinInclusiveConstraintFailed = 156
        Sch_MinExclusiveConstraintFailed = 157
        Sch_TotalDigitsConstraintFailed = 158
        Sch_FractionDigitsConstraintFailed = 159
        Sch_UnionFailedEx = 160
        Sch_NotationRequired = 161
        Sch_DupNotationAttribute = 162
        Sch_MissingPublicSystemAttribute = 163
        Sch_NotationAttributeOnEmptyElement = 164
        Sch_RefNotInScope = 165
        Sch_UndeclaredIdentityConstraint = 166
        Sch_RefInvalidIdentityConstraint = 167
        Sch_RefInvalidCardin = 168
        Sch_ReftoKeyref = 169
        Sch_EmptyXPath = 170
        Sch_UnresolvedPrefix = 171
        Sch_UnresolvedKeyref = 172
        Sch_ICXpathError = 173
        Sch_SelectorAttr = 174
        Sch_FieldSimpleTypeExpected = 175
        Sch_FieldSingleValueExpected = 176
        Sch_MissingKey = 177
        Sch_DuplicateKey = 178
        Sch_TargetNamespaceXsi = 179
        Sch_UndeclaredEntity = 180
        Sch_UnparsedEntityRef = 181
        Sch_MaxOccursInvalidXsd = 182
        Sch_MinOccursInvalidXsd = 183
        Sch_MaxInclusiveExclusive = 184
        Sch_MinInclusiveExclusive = 185
        Sch_MinInclusiveGtMaxInclusive = 186
        Sch_MinExclusiveGtMaxExclusive = 187
        Sch_MinInclusiveGtMaxExclusive = 188
        Sch_MinExclusiveGtMaxInclusive = 189
        Sch_SimpleTypeRestriction = 190
        Sch_InvalidFacetPosition = 191
        Sch_AttributeMutuallyExclusive = 192
        Sch_AnyAttributeLastChild = 193
        Sch_ComplexTypeContentModel = 194
        Sch_ComplexContentContentModel = 195
        Sch_NotNormalizedString = 196
        Sch_FractionDigitsNotOnDecimal = 197
        Sch_ContentInNill = 198
        Sch_NoElementSchemaFound = 199
        Sch_NoAttributeSchemaFound = 200
        Sch_InvalidNamespace = 201
        Sch_InvalidTargetNamespaceAttribute = 202
        Sch_InvalidNamespaceAttribute = 203
        Sch_InvalidSchemaLocation = 204
        Sch_ImportTargetNamespace = 205
        Sch_ImportTargetNamespaceNull = 206
        Sch_GroupDoubleRedefine = 207
        Sch_ComponentRedefineNotFound = 208
        Sch_GroupRedefineNotFound = 209
        Sch_AttrGroupDoubleRedefine = 210
        Sch_AttrGroupRedefineNotFound = 211
        Sch_ComplexTypeDoubleRedefine = 212
        Sch_ComplexTypeRedefineNotFound = 213
        Sch_SimpleToComplexTypeRedefine = 214
        Sch_SimpleTypeDoubleRedefine = 215
        Sch_ComplexToSimpleTypeRedefine = 216
        Sch_SimpleTypeRedefineNotFound = 217
        Sch_MinMaxGroupRedefine = 218
        Sch_MultipleGroupSelfRef = 219
        Sch_MultipleAttrGroupSelfRef = 220
        Sch_InvalidTypeRedefine = 221
        Sch_InvalidElementRef = 222
        Sch_MinGtMax = 223
        Sch_DupSelector = 224
        Sch_IdConstraintNoSelector = 225
        Sch_IdConstraintNoFields = 226
        Sch_IdConstraintNoRefer = 227
        Sch_SelectorBeforeFields = 228
        Sch_NoSimpleTypeContent = 229
        Sch_SimpleTypeRestRefBase = 230
        Sch_SimpleTypeRestRefBaseNone = 231
        Sch_SimpleTypeListRefBase = 232
        Sch_SimpleTypeListRefBaseNone = 233
        Sch_SimpleTypeUnionNoBase = 234
        Sch_NoRestOrExtQName = 235
        Sch_NoRestOrExt = 236
        Sch_NoGroupParticle = 237
        Sch_InvalidAllMin = 238
        Sch_InvalidAllMax = 239
        Sch_InvalidFacet = 240
        Sch_AbstractElement = 241
        Sch_XsiTypeBlockedEx = 242
        Sch_InvalidXsiNill = 243
        Sch_SubstitutionNotAllowed = 244
        Sch_SubstitutionBlocked = 245
        Sch_InvalidElementInEmptyEx = 246
        Sch_InvalidElementInTextOnlyEx = 247
        Sch_InvalidTextInElement = 248
        Sch_InvalidElementContent = 249
        Sch_InvalidElementContentComplex = 250
        Sch_IncompleteContent = 251
        Sch_IncompleteContentComplex = 252
        Sch_InvalidTextInElementExpecting = 253
        Sch_InvalidElementContentExpecting = 254
        Sch_InvalidElementContentExpectingComplex = 255
        Sch_IncompleteContentExpecting = 256
        Sch_IncompleteContentExpectingComplex = 257
        Sch_InvalidElementSubstitution = 258
        Sch_ElementNameAndNamespace = 259
        Sch_ElementName = 260
        Sch_ContinuationString = 261
        Sch_AnyElementNS = 262
        Sch_AnyElement = 263
        Sch_InvalidTextInEmpty = 264
        Sch_InvalidWhitespaceInEmpty = 265
        Sch_InvalidPIComment = 266
        Sch_InvalidAttributeRef = 267
        Sch_OptionalDefaultAttribute = 268
        Sch_AttributeCircularRef = 269
        Sch_IdentityConstraintCircularRef = 270
        Sch_SubstitutionCircularRef = 271
        Sch_InvalidAnyAttribute = 272
        Sch_DupIdAttribute = 273
        Sch_InvalidAllElementMax = 274
        Sch_InvalidAny = 275
        Sch_InvalidAnyDetailed = 276
        Sch_InvalidExamplar = 277
        Sch_NoExamplar = 278
        Sch_InvalidSubstitutionMember = 279
        Sch_RedefineNoSchema = 280
        Sch_ProhibitedAttribute = 281
        Sch_TypeCircularRef = 282
        Sch_TwoIdAttrUses = 283
        Sch_AttrUseAndWildId = 284
        Sch_MoreThanOneWildId = 285
        Sch_BaseFinalExtension = 286
        Sch_NotSimpleContent = 287
        Sch_NotComplexContent = 288
        Sch_BaseFinalRestriction = 289
        Sch_BaseFinalList = 290
        Sch_BaseFinalUnion = 291
        Sch_UndefBaseRestriction = 292
        Sch_UndefBaseExtension = 293
        Sch_DifContentType = 294
        Sch_InvalidContentRestriction = 295
        Sch_InvalidContentRestrictionDetailed = 296
        Sch_InvalidBaseToEmpty = 297
        Sch_InvalidBaseToMixed = 298
        Sch_DupAttributeUse = 299
        Sch_InvalidParticleRestriction = 300
        Sch_InvalidParticleRestrictionDetailed = 301
        Sch_ForbiddenDerivedParticleForAll = 302
        Sch_ForbiddenDerivedParticleForElem = 303
        Sch_ForbiddenDerivedParticleForChoice = 304
        Sch_ForbiddenDerivedParticleForSeq = 305
        Sch_ElementFromElement = 306
        Sch_ElementFromAnyRule1 = 307
        Sch_ElementFromAnyRule2 = 308
        Sch_AnyFromAnyRule1 = 309
        Sch_AnyFromAnyRule2 = 310
        Sch_AnyFromAnyRule3 = 311
        Sch_GroupBaseFromAny1 = 312
        Sch_GroupBaseFromAny2 = 313
        Sch_ElementFromGroupBase1 = 314
        Sch_ElementFromGroupBase2 = 315
        Sch_ElementFromGroupBase3 = 316
        Sch_GroupBaseRestRangeInvalid = 317
        Sch_GroupBaseRestNoMap = 318
        Sch_GroupBaseRestNotEmptiable = 319
        Sch_SeqFromAll = 320
        Sch_SeqFromChoice = 321
        Sch_UndefGroupRef = 322
        Sch_GroupCircularRef = 323
        Sch_AllRefNotRoot = 324
        Sch_AllRefMinMax = 325
        Sch_NotAllAlone = 326
        Sch_AttributeGroupCircularRef = 327
        Sch_UndefAttributeGroupRef = 328
        Sch_InvalidAttributeExtension = 329
        Sch_InvalidAnyAttributeRestriction = 330
        Sch_AttributeRestrictionProhibited = 331
        Sch_AttributeRestrictionInvalid = 332
        Sch_AttributeFixedInvalid = 333
        Sch_AttributeUseInvalid = 334
        Sch_AttributeRestrictionInvalidFromWildcard = 335
        Sch_NoDerivedAttribute = 336
        Sch_UnexpressibleAnyAttribute = 337
        Sch_RefInvalidAttribute = 338
        Sch_ElementCircularRef = 339
        Sch_RefInvalidElement = 340
        Sch_ElementCannotHaveValue = 341
        Sch_ElementInMixedWithFixed = 342
        Sch_ElementTypeCollision = 343
        Sch_InvalidIncludeLocation = 344
        Sch_CannotLoadSchema = 345
        Sch_CannotLoadSchemaLocation = 346
        Sch_LengthGtBaseLength = 347
        Sch_MinLengthGtBaseMinLength = 348
        Sch_MaxLengthGtBaseMaxLength = 349
        Sch_MaxMinLengthBaseLength = 350
        Sch_MaxInclusiveMismatch = 351
        Sch_MaxExclusiveMismatch = 352
        Sch_MinInclusiveMismatch = 353
        Sch_MinExclusiveMismatch = 354
        Sch_MinExlIncMismatch = 355
        Sch_MinExlMaxExlMismatch = 356
        Sch_MinIncMaxExlMismatch = 357
        Sch_MinIncExlMismatch = 358
        Sch_MaxIncExlMismatch = 359
        Sch_MaxExlIncMismatch = 360
        Sch_TotalDigitsMismatch = 361
        Sch_FacetBaseFixed = 362
        Sch_WhiteSpaceRestriction1 = 363
        Sch_WhiteSpaceRestriction2 = 364
        Sch_XsiNilAndFixed = 365
        Sch_MixSchemaTypes = 366
        Sch_XSDSchemaOnly = 367
        Sch_InvalidPublicAttribute = 368
        Sch_InvalidSystemAttribute = 369
        Sch_TypeAfterConstraints = 370
        Sch_XsiNilAndType = 371
        Sch_DupSimpleTypeChild = 372
        Sch_InvalidIdAttribute = 373
        Sch_InvalidNameAttributeEx = 374
        Sch_InvalidAttribute = 375
        Sch_EmptyChoice = 376
        Sch_DerivedNotFromBase = 377
        Sch_NeedSimpleTypeChild = 378
        Sch_InvalidCollection = 379
        Sch_UnrefNS = 380
        Sch_InvalidSimpleTypeRestriction = 381
        Sch_MultipleRedefine = 382
        Sch_NullValue = 383
        Sch_ComplexContentModel = 384
        Sch_SchemaNotPreprocessed = 385
        Sch_SchemaNotRemoved = 386
        Sch_ComponentAlreadySeenForNS = 387
        Sch_DefaultAttributeNotApplied = 388
        Sch_NotXsiAttribute = 389
        Sch_SchemaDoesNotExist = 390
        Sch_InvalidStartTransition = 391
        Sch_InvalidStateTransition = 392
        Sch_InvalidEndValidation = 393
        Sch_InvalidEndElementCall = 394
        Sch_InvalidEndElementCallTyped = 395
        Sch_InvalidEndElementMultiple = 396
        Sch_DuplicateAttribute = 397
        Sch_InvalidPartialValidationType = 398
        Sch_SchemaElementNameMismatch = 399
        Sch_SchemaAttributeNameMismatch = 400
        Sch_ValidateAttributeInvalidCall = 401
        Sch_ValidateElementInvalidCall = 402
        Sch_EnumNotStarted = 403
        Sch_EnumFinished = 404
        Sch_ErrorPosition = 405
        Sch_ReservedNsDecl = 406
        Sch_NotInSchemaCollection = 407
        Sch_NotationNotAttr = 408
        Sch_InvalidContent = 409
        Sch_InvalidContentExpecting = 410
        Sch_InvalidTextWhiteSpace = 411
        Sch_XSCHEMA = 412
        Sch_DubSchema = 413
        Sch_AttributeValueDataType = 414
        Sch_ElementValueDataType = 415
        Sch_NonDeterministicAny = 416
        Sch_MismatchTargetNamespace = 417
        Sch_UnionFailed = 418
        Sch_XsiTypeBlocked = 419
        Sch_InvalidElementInEmpty = 420
        Sch_InvalidElementInTextOnly = 421
        Sch_InvalidNameAttribute = 422
    End Enum 
```

呸呸！

现在我可以像这样进行错误处理：

```
Select Case e.Exception.getErrorType
    Case XmlSchemaExceptionErrorType.Sch_UndeclaredAttribute
        ' Error specific code
    Case XmlSchemaExceptionErrorType.Sch_UndeclaredElement
        ' Error specific code
    Case Else
        ' General code for handling any other errors we don't specifically care about
End Select 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T14:53:06.637

您可以`xml`根据架构进行验证。

验证错误在[XmlReaderSettings.ValidationEventHandler](http://msdn.microsoft.com/en-us/library/system.xml.xmlreadersettings.validationeventhandler.aspx)事件中处理。[这里的例子](http://msdn.microsoft.com/en-us/library/system.xml.schema.xmlschemaset.validationeventhandler.aspx)。

如果您有 xml 模式的分类（如验证规则），则可以将输入消息解析/转换为用户友好的消息。

对于其他非 xml 错误，将通用 try/catch 处理程序添加到您正在读取/验证 xml 文件的代码中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-09T06:18:01.713

SeriousSamP 的答案很棒。我将代码移植到 C#。也许它对其他人有用。

只需将代码添加到新类；根据需要调整命名空间；在需要异常类型的文件中添加命名空间 using。

像这样称呼它：`XmlSchemaExceptionErrorType myType = myException.GetSchemaErrorType();`

这是移植的代码：

```
using System.Xml.Schema;

namespace MyNamespace.ClassExtensions
{
    public static class XmlSchemaExceptionExtensions
    {

        /// <summary>
        /// Get schema error type as enum. (This is only possible by reflection.)
        /// </summary>
        public static XmlSchemaExceptionErrorType GetSchemaErrorType(this XmlSchemaException exception)
        {
            string res = typeof(XmlSchemaException).GetField("res", System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.Instance).GetValue(exception) as string;
            return (XmlSchemaExceptionErrorType)System.Enum.Parse(typeof(XmlSchemaExceptionErrorType), res);
        }

        /// <summary>
        /// Error type enums of XmlSchemaException.
        /// </summary>
        public enum XmlSchemaExceptionErrorType
        {
            #region long list of definitions
            Sch_ParEntityRefNesting = 0,
            Sch_NotTokenString = 1,
            Sch_XsdDateTimeCompare = 2,
            Sch_InvalidNullCast = 3,
            Sch_InvalidDateTimeOption = 4,
            Sch_StandAloneNormalization = 5,
            Sch_UnSpecifiedDefaultAttributeInExternalStandalone = 6,
            Sch_DefaultException = 7,
            Sch_DupElementDecl = 8,
            Sch_IdAttrDeclared = 9,
            Sch_RootMatchDocType = 10,
            Sch_DupId = 11,
            Sch_UndeclaredElement = 12,
            Sch_UndeclaredAttribute = 13,
            Sch_UndeclaredNotation = 14,
            Sch_UndeclaredId = 15,
            Sch_SchemaRootExpected = 16,
            Sch_XSDSchemaRootExpected = 17,
            Sch_UnsupportedAttribute = 18,
            Sch_UnsupportedElement = 19,
            Sch_MissAttribute = 20,
            Sch_AnnotationLocation = 21,
            Sch_DataTypeTextOnly = 22,
            Sch_UnknownModel = 23,
            Sch_UnknownOrder = 24,
            Sch_UnknownContent = 25,
            Sch_UnknownRequired = 26,
            Sch_UnknownDtType = 27,
            Sch_MixedMany = 28,
            Sch_GroupDisabled = 29,
            Sch_MissDtvalue = 30,
            Sch_MissDtvaluesAttribute = 31,
            Sch_DupDtType = 32,
            Sch_DupAttribute = 33,
            Sch_RequireEnumeration = 34,
            Sch_DefaultIdValue = 35,
            Sch_ElementNotAllowed = 36,
            Sch_ElementMissing = 37,
            Sch_ManyMaxOccurs = 38,
            Sch_MaxOccursInvalid = 39,
            Sch_MinOccursInvalid = 40,
            Sch_DtMaxLengthInvalid = 41,
            Sch_DtMinLengthInvalid = 42,
            Sch_DupDtMaxLength = 43,
            Sch_DupDtMinLength = 44,
            Sch_DtMinMaxLength = 45,
            Sch_DupElement = 46,
            Sch_DupGroupParticle = 47,
            Sch_InvalidValue = 48,
            Sch_InvalidValueDetailed = 49,
            Sch_InvalidValueDetailedAttribute = 50,
            Sch_MissRequiredAttribute = 51,
            Sch_FixedAttributeValue = 52,
            Sch_FixedElementValue = 53,
            Sch_AttributeValueDataTypeDetailed = 54,
            Sch_AttributeDefaultDataType = 55,
            Sch_IncludeLocation = 56,
            Sch_ImportLocation = 57,
            Sch_RedefineLocation = 58,
            Sch_InvalidBlockDefaultValue = 59,
            Sch_InvalidFinalDefaultValue = 60,
            Sch_InvalidElementBlockValue = 61,
            Sch_InvalidElementFinalValue = 62,
            Sch_InvalidSimpleTypeFinalValue = 63,
            Sch_InvalidComplexTypeBlockValue = 64,
            Sch_InvalidComplexTypeFinalValue = 65,
            Sch_DupIdentityConstraint = 66,
            Sch_DupGlobalElement = 67,
            Sch_DupGlobalAttribute = 68,
            Sch_DupSimpleType = 69,
            Sch_DupComplexType = 70,
            Sch_DupGroup = 71,
            Sch_DupAttributeGroup = 72,
            Sch_DupNotation = 73,
            Sch_DefaultFixedAttributes = 74,
            Sch_FixedInRef = 75,
            Sch_FixedDefaultInRef = 76,
            Sch_DupXsdElement = 77,
            Sch_ForbiddenAttribute = 78,
            Sch_AttributeIgnored = 79,
            Sch_ElementRef = 80,
            Sch_TypeMutualExclusive = 81,
            Sch_ElementNameRef = 82,
            Sch_AttributeNameRef = 83,
            Sch_TextNotAllowed = 84,
            Sch_UndeclaredType = 85,
            Sch_UndeclaredSimpleType = 86,
            Sch_UndeclaredEquivClass = 87,
            Sch_AttListPresence = 88,
            Sch_NotationValue = 89,
            Sch_EnumerationValue = 90,
            Sch_EmptyAttributeValue = 91,
            Sch_InvalidLanguageId = 92,
            Sch_XmlSpace = 93,
            Sch_InvalidXsdAttributeValue = 94,
            Sch_InvalidXsdAttributeDatatypeValue = 95,
            Sch_ElementValueDataTypeDetailed = 96,
            Sch_InvalidElementDefaultValue = 97,
            Sch_NonDeterministic = 98,
            Sch_NonDeterministicAnyEx = 99,
            Sch_NonDeterministicAnyAny = 100,
            Sch_StandAlone = 101,
            Sch_XmlNsAttribute = 102,
            Sch_AllElement = 103,
            Sch_MismatchTargetNamespaceInclude = 104,
            Sch_MismatchTargetNamespaceImport = 105,
            Sch_MismatchTargetNamespaceEx = 106,
            Sch_XsiTypeNotFound = 107,
            Sch_XsiTypeAbstract = 108,
            Sch_ListFromNonatomic = 109,
            Sch_UnionFromUnion = 110,
            Sch_DupLengthFacet = 111,
            Sch_DupMinLengthFacet = 112,
            Sch_DupMaxLengthFacet = 113,
            Sch_DupWhiteSpaceFacet = 114,
            Sch_DupMaxInclusiveFacet = 115,
            Sch_DupMaxExclusiveFacet = 116,
            Sch_DupMinInclusiveFacet = 117,
            Sch_DupMinExclusiveFacet = 118,
            Sch_DupTotalDigitsFacet = 119,
            Sch_DupFractionDigitsFacet = 120,
            Sch_LengthFacetProhibited = 121,
            Sch_MinLengthFacetProhibited = 122,
            Sch_MaxLengthFacetProhibited = 123,
            Sch_PatternFacetProhibited = 124,
            Sch_EnumerationFacetProhibited = 125,
            Sch_WhiteSpaceFacetProhibited = 126,
            Sch_MaxInclusiveFacetProhibited = 127,
            Sch_MaxExclusiveFacetProhibited = 128,
            Sch_MinInclusiveFacetProhibited = 129,
            Sch_MinExclusiveFacetProhibited = 130,
            Sch_TotalDigitsFacetProhibited = 131,
            Sch_FractionDigitsFacetProhibited = 132,
            Sch_LengthFacetInvalid = 133,
            Sch_MinLengthFacetInvalid = 134,
            Sch_MaxLengthFacetInvalid = 135,
            Sch_MaxInclusiveFacetInvalid = 136,
            Sch_MaxExclusiveFacetInvalid = 137,
            Sch_MinInclusiveFacetInvalid = 138,
            Sch_MinExclusiveFacetInvalid = 139,
            Sch_TotalDigitsFacetInvalid = 140,
            Sch_FractionDigitsFacetInvalid = 141,
            Sch_PatternFacetInvalid = 142,
            Sch_EnumerationFacetInvalid = 143,
            Sch_InvalidWhiteSpace = 144,
            Sch_UnknownFacet = 145,
            Sch_LengthAndMinMax = 146,
            Sch_MinLengthGtMaxLength = 147,
            Sch_FractionDigitsGtTotalDigits = 148,
            Sch_LengthConstraintFailed = 149,
            Sch_MinLengthConstraintFailed = 150,
            Sch_MaxLengthConstraintFailed = 151,
            Sch_PatternConstraintFailed = 152,
            Sch_EnumerationConstraintFailed = 153,
            Sch_MaxInclusiveConstraintFailed = 154,
            Sch_MaxExclusiveConstraintFailed = 155,
            Sch_MinInclusiveConstraintFailed = 156,
            Sch_MinExclusiveConstraintFailed = 157,
            Sch_TotalDigitsConstraintFailed = 158,
            Sch_FractionDigitsConstraintFailed = 159,
            Sch_UnionFailedEx = 160,
            Sch_NotationRequired = 161,
            Sch_DupNotationAttribute = 162,
            Sch_MissingPublicSystemAttribute = 163,
            Sch_NotationAttributeOnEmptyElement = 164,
            Sch_RefNotInScope = 165,
            Sch_UndeclaredIdentityConstraint = 166,
            Sch_RefInvalidIdentityConstraint = 167,
            Sch_RefInvalidCardin = 168,
            Sch_ReftoKeyref = 169,
            Sch_EmptyXPath = 170,
            Sch_UnresolvedPrefix = 171,
            Sch_UnresolvedKeyref = 172,
            Sch_ICXpathError = 173,
            Sch_SelectorAttr = 174,
            Sch_FieldSimpleTypeExpected = 175,
            Sch_FieldSingleValueExpected = 176,
            Sch_MissingKey = 177,
            Sch_DuplicateKey = 178,
            Sch_TargetNamespaceXsi = 179,
            Sch_UndeclaredEntity = 180,
            Sch_UnparsedEntityRef = 181,
            Sch_MaxOccursInvalidXsd = 182,
            Sch_MinOccursInvalidXsd = 183,
            Sch_MaxInclusiveExclusive = 184,
            Sch_MinInclusiveExclusive = 185,
            Sch_MinInclusiveGtMaxInclusive = 186,
            Sch_MinExclusiveGtMaxExclusive = 187,
            Sch_MinInclusiveGtMaxExclusive = 188,
            Sch_MinExclusiveGtMaxInclusive = 189,
            Sch_SimpleTypeRestriction = 190,
            Sch_InvalidFacetPosition = 191,
            Sch_AttributeMutuallyExclusive = 192,
            Sch_AnyAttributeLastChild = 193,
            Sch_ComplexTypeContentModel = 194,
            Sch_ComplexContentContentModel = 195,
            Sch_NotNormalizedString = 196,
            Sch_FractionDigitsNotOnDecimal = 197,
            Sch_ContentInNill = 198,
            Sch_NoElementSchemaFound = 199,
            Sch_NoAttributeSchemaFound = 200,
            Sch_InvalidNamespace = 201,
            Sch_InvalidTargetNamespaceAttribute = 202,
            Sch_InvalidNamespaceAttribute = 203,
            Sch_InvalidSchemaLocation = 204,
            Sch_ImportTargetNamespace = 205,
            Sch_ImportTargetNamespaceNull = 206,
            Sch_GroupDoubleRedefine = 207,
            Sch_ComponentRedefineNotFound = 208,
            Sch_GroupRedefineNotFound = 209,
            Sch_AttrGroupDoubleRedefine = 210,
            Sch_AttrGroupRedefineNotFound = 211,
            Sch_ComplexTypeDoubleRedefine = 212,
            Sch_ComplexTypeRedefineNotFound = 213,
            Sch_SimpleToComplexTypeRedefine = 214,
            Sch_SimpleTypeDoubleRedefine = 215,
            Sch_ComplexToSimpleTypeRedefine = 216,
            Sch_SimpleTypeRedefineNotFound = 217,
            Sch_MinMaxGroupRedefine = 218,
            Sch_MultipleGroupSelfRef = 219,
            Sch_MultipleAttrGroupSelfRef = 220,
            Sch_InvalidTypeRedefine = 221,
            Sch_InvalidElementRef = 222,
            Sch_MinGtMax = 223,
            Sch_DupSelector = 224,
            Sch_IdConstraintNoSelector = 225,
            Sch_IdConstraintNoFields = 226,
            Sch_IdConstraintNoRefer = 227,
            Sch_SelectorBeforeFields = 228,
            Sch_NoSimpleTypeContent = 229,
            Sch_SimpleTypeRestRefBase = 230,
            Sch_SimpleTypeRestRefBaseNone = 231,
            Sch_SimpleTypeListRefBase = 232,
            Sch_SimpleTypeListRefBaseNone = 233,
            Sch_SimpleTypeUnionNoBase = 234,
            Sch_NoRestOrExtQName = 235,
            Sch_NoRestOrExt = 236,
            Sch_NoGroupParticle = 237,
            Sch_InvalidAllMin = 238,
            Sch_InvalidAllMax = 239,
            Sch_InvalidFacet = 240,
            Sch_AbstractElement = 241,
            Sch_XsiTypeBlockedEx = 242,
            Sch_InvalidXsiNill = 243,
            Sch_SubstitutionNotAllowed = 244,
            Sch_SubstitutionBlocked = 245,
            Sch_InvalidElementInEmptyEx = 246,
            Sch_InvalidElementInTextOnlyEx = 247,
            Sch_InvalidTextInElement = 248,
            Sch_InvalidElementContent = 249,
            Sch_InvalidElementContentComplex = 250,
            Sch_IncompleteContent = 251,
            Sch_IncompleteContentComplex = 252,
            Sch_InvalidTextInElementExpecting = 253,
            Sch_InvalidElementContentExpecting = 254,
            Sch_InvalidElementContentExpectingComplex = 255,
            Sch_IncompleteContentExpecting = 256,
            Sch_IncompleteContentExpectingComplex = 257,
            Sch_InvalidElementSubstitution = 258,
            Sch_ElementNameAndNamespace = 259,
            Sch_ElementName = 260,
            Sch_ContinuationString = 261,
            Sch_AnyElementNS = 262,
            Sch_AnyElement = 263,
            Sch_InvalidTextInEmpty = 264,
            Sch_InvalidWhitespaceInEmpty = 265,
            Sch_InvalidPIComment = 266,
            Sch_InvalidAttributeRef = 267,
            Sch_OptionalDefaultAttribute = 268,
            Sch_AttributeCircularRef = 269,
            Sch_IdentityConstraintCircularRef = 270,
            Sch_SubstitutionCircularRef = 271,
            Sch_InvalidAnyAttribute = 272,
            Sch_DupIdAttribute = 273,
            Sch_InvalidAllElementMax = 274,
            Sch_InvalidAny = 275,
            Sch_InvalidAnyDetailed = 276,
            Sch_InvalidExamplar = 277,
            Sch_NoExamplar = 278,
            Sch_InvalidSubstitutionMember = 279,
            Sch_RedefineNoSchema = 280,
            Sch_ProhibitedAttribute = 281,
            Sch_TypeCircularRef = 282,
            Sch_TwoIdAttrUses = 283,
            Sch_AttrUseAndWildId = 284,
            Sch_MoreThanOneWildId = 285,
            Sch_BaseFinalExtension = 286,
            Sch_NotSimpleContent = 287,
            Sch_NotComplexContent = 288,
            Sch_BaseFinalRestriction = 289,
            Sch_BaseFinalList = 290,
            Sch_BaseFinalUnion = 291,
            Sch_UndefBaseRestriction = 292,
            Sch_UndefBaseExtension = 293,
            Sch_DifContentType = 294,
            Sch_InvalidContentRestriction = 295,
            Sch_InvalidContentRestrictionDetailed = 296,
            Sch_InvalidBaseToEmpty = 297,
            Sch_InvalidBaseToMixed = 298,
            Sch_DupAttributeUse = 299,
            Sch_InvalidParticleRestriction = 300,
            Sch_InvalidParticleRestrictionDetailed = 301,
            Sch_ForbiddenDerivedParticleForAll = 302,
            Sch_ForbiddenDerivedParticleForElem = 303,
            Sch_ForbiddenDerivedParticleForChoice = 304,
            Sch_ForbiddenDerivedParticleForSeq = 305,
            Sch_ElementFromElement = 306,
            Sch_ElementFromAnyRule1 = 307,
            Sch_ElementFromAnyRule2 = 308,
            Sch_AnyFromAnyRule1 = 309,
            Sch_AnyFromAnyRule2 = 310,
            Sch_AnyFromAnyRule3 = 311,
            Sch_GroupBaseFromAny1 = 312,
            Sch_GroupBaseFromAny2 = 313,
            Sch_ElementFromGroupBase1 = 314,
            Sch_ElementFromGroupBase2 = 315,
            Sch_ElementFromGroupBase3 = 316,
            Sch_GroupBaseRestRangeInvalid = 317,
            Sch_GroupBaseRestNoMap = 318,
            Sch_GroupBaseRestNotEmptiable = 319,
            Sch_SeqFromAll = 320,
            Sch_SeqFromChoice = 321,
            Sch_UndefGroupRef = 322,
            Sch_GroupCircularRef = 323,
            Sch_AllRefNotRoot = 324,
            Sch_AllRefMinMax = 325,
            Sch_NotAllAlone = 326,
            Sch_AttributeGroupCircularRef = 327,
            Sch_UndefAttributeGroupRef = 328,
            Sch_InvalidAttributeExtension = 329,
            Sch_InvalidAnyAttributeRestriction = 330,
            Sch_AttributeRestrictionProhibited = 331,
            Sch_AttributeRestrictionInvalid = 332,
            Sch_AttributeFixedInvalid = 333,
            Sch_AttributeUseInvalid = 334,
            Sch_AttributeRestrictionInvalidFromWildcard = 335,
            Sch_NoDerivedAttribute = 336,
            Sch_UnexpressibleAnyAttribute = 337,
            Sch_RefInvalidAttribute = 338,
            Sch_ElementCircularRef = 339,
            Sch_RefInvalidElement = 340,
            Sch_ElementCannotHaveValue = 341,
            Sch_ElementInMixedWithFixed = 342,
            Sch_ElementTypeCollision = 343,
            Sch_InvalidIncludeLocation = 344,
            Sch_CannotLoadSchema = 345,
            Sch_CannotLoadSchemaLocation = 346,
            Sch_LengthGtBaseLength = 347,
            Sch_MinLengthGtBaseMinLength = 348,
            Sch_MaxLengthGtBaseMaxLength = 349,
            Sch_MaxMinLengthBaseLength = 350,
            Sch_MaxInclusiveMismatch = 351,
            Sch_MaxExclusiveMismatch = 352,
            Sch_MinInclusiveMismatch = 353,
            Sch_MinExclusiveMismatch = 354,
            Sch_MinExlIncMismatch = 355,
            Sch_MinExlMaxExlMismatch = 356,
            Sch_MinIncMaxExlMismatch = 357,
            Sch_MinIncExlMismatch = 358,
            Sch_MaxIncExlMismatch = 359,
            Sch_MaxExlIncMismatch = 360,
            Sch_TotalDigitsMismatch = 361,
            Sch_FacetBaseFixed = 362,
            Sch_WhiteSpaceRestriction1 = 363,
            Sch_WhiteSpaceRestriction2 = 364,
            Sch_XsiNilAndFixed = 365,
            Sch_MixSchemaTypes = 366,
            Sch_XSDSchemaOnly = 367,
            Sch_InvalidPublicAttribute = 368,
            Sch_InvalidSystemAttribute = 369,
            Sch_TypeAfterConstraints = 370,
            Sch_XsiNilAndType = 371,
            Sch_DupSimpleTypeChild = 372,
            Sch_InvalidIdAttribute = 373,
            Sch_InvalidNameAttributeEx = 374,
            Sch_InvalidAttribute = 375,
            Sch_EmptyChoice = 376,
            Sch_DerivedNotFromBase = 377,
            Sch_NeedSimpleTypeChild = 378,
            Sch_InvalidCollection = 379,
            Sch_UnrefNS = 380,
            Sch_InvalidSimpleTypeRestriction = 381,
            Sch_MultipleRedefine = 382,
            Sch_NullValue = 383,
            Sch_ComplexContentModel = 384,
            Sch_SchemaNotPreprocessed = 385,
            Sch_SchemaNotRemoved = 386,
            Sch_ComponentAlreadySeenForNS = 387,
            Sch_DefaultAttributeNotApplied = 388,
            Sch_NotXsiAttribute = 389,
            Sch_SchemaDoesNotExist = 390,
            Sch_InvalidStartTransition = 391,
            Sch_InvalidStateTransition = 392,
            Sch_InvalidEndValidation = 393,
            Sch_InvalidEndElementCall = 394,
            Sch_InvalidEndElementCallTyped = 395,
            Sch_InvalidEndElementMultiple = 396,
            Sch_DuplicateAttribute = 397,
            Sch_InvalidPartialValidationType = 398,
            Sch_SchemaElementNameMismatch = 399,
            Sch_SchemaAttributeNameMismatch = 400,
            Sch_ValidateAttributeInvalidCall = 401,
            Sch_ValidateElementInvalidCall = 402,
            Sch_EnumNotStarted = 403,
            Sch_EnumFinished = 404,
            Sch_ErrorPosition = 405,
            Sch_ReservedNsDecl = 406,
            Sch_NotInSchemaCollection = 407,
            Sch_NotationNotAttr = 408,
            Sch_InvalidContent = 409,
            Sch_InvalidContentExpecting = 410,
            Sch_InvalidTextWhiteSpace = 411,
            Sch_XSCHEMA = 412,
            Sch_DubSchema = 413,
            Sch_AttributeValueDataType = 414,
            Sch_ElementValueDataType = 415,
            Sch_NonDeterministicAny = 416,
            Sch_MismatchTargetNamespace = 417,
            Sch_UnionFailed = 418,
            Sch_XsiTypeBlocked = 419,
            Sch_InvalidElementInEmpty = 420,
            Sch_InvalidElementInTextOnly = 421,
            Sch_InvalidNameAttribute = 422
            #endregion
        }

    }
} 
```

# javascript - .checked 和 .disable 在 javascript 中不能一起工作

> ID：13607764
> 
> 赞同：0
> 
> 时间：2012-11-28T14:45:43.297
> 
> 标签：javascript, jquery, html, ruby-on-rails

我有 5 个复选框，如果选中第一个复选框，则还应选中其他四个复选框。此外，如果我取消选中第一个复选框，则应禁用这些复选框。当我这样做时，所有其他复选框都已启用且未选中，因此我实现了以下代码：

```
<div class="total_line">
    <label for="name">Beheerder </label>
    <%= f.check_box:is_admin, {:onchange => "showHideDiv()"} %>
</div>
<div class="total_line">
    <label for="onderwerp">Documenten beheren</label>
    <%= f.check_box:document_management %>
</div>
<div class="total_line">
    <label for="onderwerp">Nieuws beheren</label>
    <%= f.check_box:news_management %>
</div>
<div class="total_line">
    <label for="onderwerp">Agenda beheren</label>
    <%= f.check_box:agenda_management %>
</div>
<div class="total_line">
    <% if photo_book == true %>
        <label for="onderwerp">Fotoboek beheren </label>
        <%= f.check_box:photobok_admin %>
    <% end %>
</div>
<div class="total_line">
    <label for="onderwerp">Actief</label>
    <%= f.check_box:is_actived %>
</div> 
```

以下是javascript

```
function showHideDiv() {
    var mycheck = document.getElementById('membership_is_admin');
    if (mycheck.checked) {
        document.getElementById('membership_is_admin').setAttribute("readonly", 1)
        document.getElementById('membership_photobok_admin').setAttribute("readonly", 1)
        document.getElementById('membership_news_management').setAttribute("readonly", 1)
        document.getElementById('membership_document_management').setAttribute("readonly", 1)
        document.getElementById('membership_agenda_management').setAttribute("readonly", 1)
        document.getElementById('membership_document_management').checked = true;
        document.getElementById('membership_news_management').checked = true;
        document.getElementById('membership_agenda_management').checked = true;
        document.getElementById('membership_photobok_admin').checked = true;
        jQuery('#membership_document_management').attr('disabled','true');
        jQuery('#membership_news_management').attr('disabled','true');
        jQuery('#membership_agenda_management').attr('disabled','true');
        jQuery('#membership_photobok_admin').attr('disabled','true');
    } else {
        document.getElementById('membership_is_admin').setAttribute("readonly", 0)
        document.getElementById('membership_photobok_admin').setAttribute("readonly", 0)
        document.getElementById('membership_news_management').setAttribute("readonly", 0)
        document.getElementById('membership_document_management').setAttribute("readonly", 0)
        document.getElementById('membership_agenda_management').setAttribute("readonly", 0)
        document.getElementById('membership_document_management').checked = false;
        document.getElementById('membership_news_management').checked = false;
        document.getElementById('membership_agenda_management').checked = false;
        document.getElementById('membership_photobok_admin').checked = false;
        document.getElementById('membership_document_management').disabled = false;
        document.getElementById('membership_news_management').disabled = false;
        document.getElementById('membership_agenda_management').disabled = false;
        document.getElementById('membership_photobok_admin').disabled = false;
    }
} 
```

问题是其他四个复选框的值没有被选中。如果我取出禁用复选框的代码，那么它正在工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T14:47:30.820

根据定义，禁用的控件不能成为成功的控件。如果一个控件被禁用，那么它就不能被修改，也不会被提交。

如果您希望控件是只读的但仍提交，则将其设为只读，而不是禁用。

# python - 将python输出格式化为json

> ID：13607765
> 
> 赞同：3
> 
> 时间：2012-11-28T14:45:47.420
> 
> 标签：python, json, dictionary

我编写了一个 Python 脚本，它以 Json 格式输出一个长数据结构（我称为“celldict”的字典）。这是其中的一小部分：

```
{
    "1224": {
        "OUT3FA_5": 12,
        "IN1": 37,
        "Total_IN1": 37
    },
    "1225": {
        "OUT3FA_5": 24,
        "IN1": 59,
        "Total_IN1": 22
    }
} 
```

但我想做的是有这样的事情：

```
{
    "success": true,
    "data": [
        {
            "Week":"1224",
            "OUT3FA_5": 65,
            "IN1": 85,
            "Total_IN1": 100
        },
        {
            "Week":"1225",
            "OUT3FA_5": 30,
            "IN1": 40,
            "Total_IN1": 120
        }
    ]
} 
```

有没有办法用 Python 格式化 json 输出以获得我想要的？我愿意：

```
print json.dumps(celldict) 
```

得到我的输出。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-28T14:48:11.167

只需放入`celldict` *另一个*字典：

```
json.dumps({'success': True, 'data': celldict.values()}) 
```

您必须首先将`Week`密钥添加到`celldict`字典中：

```
for d in celldict.itervalues():
    celldict['Week'] = '1238' 
```

或使用动态创建每个字典的副本：

```
json.dumps({'success': True, 'data': [dict(d, Week='1238') for d in celldict.values()]}) 
```

后一种方法带有一些缩进，产生：

```
>>> print json.dumps({'success': True, 'data': [dict(d, Week='1238') for d in celldict.values()]}, indent=4)
{
    "data": [
        {
            "OUT3FA_5": 24, 
            "Week": "1238", 
            "Total_IN1": 22, 
            "IN1": 59
        }, 
        {
            "OUT3FA_5": 12, 
            "Week": "1238", 
            "Total_IN1": 37, 
            "IN1": 37
        }
    ], 
    "success": true
} 
```

从字里行间看，您的输入示例中的`1224`和`1225`键似乎实际上是您所指的周数。如果是这样，它们很容易合并：

```
json.dumps({'success': True, 'data': [dict(d, Week=k) for k, d in celldict.iteritems()]}) 
```

会产生：

```
{
    "data": [
        {
            "OUT3FA_5": 24, 
            "Week": "1225", 
            "Total_IN1": 22, 
            "IN1": 59
        }, 
        {
            "OUT3FA_5": 12, 
            "Week": "1224", 
            "Total_IN1": 37, 
            "IN1": 37
        }
    ], 
    "success": true
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T14:56:10.573

json 模块遵循数据的结构，因此要获得所需的输出，您必须重新排列数据。你可以像这样构造一个新字典：

```
data = []
for week, values in celldict.iteritems():
  v2 = copy.copy(values)
  v2['week'] = week
  data.push(v2)
newdict = { 'success' : true,
            'data' : data }
json.dumps(newdict) 
```

（免责声明：我没有测试这段代码，但它至少应该给你基本的想法）

# php - Mysql Count查询返回“查询为空”

> ID：13607766
> 
> 赞同：1
> 
> 时间：2012-11-28T14:45:53.993
> 
> 标签：php, mysql, count

我正在使用以下脚本来尝试计算表中的行数，我一直遇到的问题是错误：

查询为空 测验名称

和一个空白页。我是 COUNT 的新手，所以我想我可能会把它弄得一团糟：-S。我的数据库布局如下：

```
itsnb_chronoforms_data_createquestions cf_id ,cf_uid,cf_created ,cf_modified, cf_ipaddress,    cf_user_id, quizID, questionID, quizquestion, quizanswer1, quizanswer2, quizanswer3, quizanswer4,     questionformat ,correctanswer 
```

我正在处理的脚本是：

```
 // Define Quiz Variables
    $quiz = $row['quizID'];
    $quizcfid = $row['cf_id'];
    $quizname = $row['quizname'];
    // Finish Define Quiz Variables  

    ///////////////////////////////////////////////////////////////////////////////////////////////
    // Make a MySQL Connection

    $query8 = "SELECT COUNT(*) as 'numberofquestions' FROM employees WHERE quizID='$quiz'"; 

    $result8 = mysql_query($query) or die(mysql_error());

    // Print out result
    while($row8 = mysql_fetch_array($result8)){
        echo 'There are '. $row8['COUNT(quizID)'] . ' questions';
    } 
    /////////////////////////////////////////////////////////////////////////////////////////////// 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T14:48:38.527

您的问题是您正在运行错误的查询，您正在运行`$query`而不是`$query8`

更改为：

```
$result8 = mysql_query($query8) or die(mysql_error()); 
```

再看一眼，您还应该更改为：

```
echo 'There are '. $row8['numberofquestions'] . ' questions'; 
```

当您设置`numberofquestion`为计数别名时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T14:49:39.870

替换您的以下行：

```
echo 'There are '. $row8['COUNT(quizID)'] . ' questions'; 
```

对于这个：

```
echo 'There are '. $row8['numberofquestions'] . ' questions'; 
```

与查询结果`numberofquestions`集中唯一字段的名称一样。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T14:49:51.850

要获取结果中的行数，请使用 mysql_num_rows：

```
$numberOfRows = mysql_num_rows($result8) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-28T14:49:00.663

```
$result8 = mysql_query($query) or die(mysql_error()); 
```

应该

```
$result8 = mysql_query($query8) or die(mysql_error()); 
```

因为我猜你之前传递的变量 $query 是空的。

至于 COUNT() 远离 COUNT(*)，而是使用 COUNT(field_name) 并且为了更快的结果，请确保 field_name 在正在使用的索引中。

Count 只计算为指定字段返回的总行数。

此外，在 innodb 中使用 COUNT(*) 时要小心，因为如果不与索引上的 WHERE 子句一起使用，它将强制执行 TABLE SCAN。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-28T14:51:20.543

你打错了这个

```
$result8 = mysql_query($query8) or die(mysql_error()); 
```

并且

```
echo 'There are '. $row8['numberofquestions'] . ' questions'; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-28T15:00:48.930

我看到的句子 sql 是正确的。但我用这个

```
$result8 = mysql_query($query) or die(mysql_error());
$count = mysql_fetch_row($result8);

echo 'There are '.$count[0].' '. questions'; 
```

**其他选项：**

```
 while($row8 = mysql_fetch_array($result8,MYSQL_ASSOC)){
        echo 'There are '. $row8['numberofquestions'] . ' questions';
    } 
```

# paypal - PAYPAL：在 set_expresscheckout 中设置 SELLERPAYPALACCOUNTID 无法创建定期付款资料

> ID：13607768
> 
> 赞同：1
> 
> 时间：2012-11-28T14:46:16.450
> 
> 标签：paypal, paypal-sandbox, recurring, express-checkout

我做的顺序：

*   SetExpressCheckout
*   GetExpresscheckoutDetails
*   创建RecurringPaymentsProfile

最后一步失败并出现错误：11502 '令牌无效'。每当我删除 SellerPaypalAccountId 时，定期付款就可以毫无问题地开始工作。我已在 b.cwik_1354106610_biz@xxx 沙盒 API 设置中授予了 Seller_1341842378_biz_api1.xxx 的所有权限...

进行额外的步骤 DoExpressCheckout 没有帮助。我在生产环境中遇到了同样的问题

```
'CANCELURL': 'xxx',
'L_BILLINGAGREEMENTDESCRIPTION0': u'Donation to xxx',
'L_BILLINGTYPE0': 'RecurringPayments',
'MAXAMT': '3',
'METHOD': 'SetExpressCheckout',
'PAYMENTREQUEST_0_AMT': 0,
'PAYMENTREQUEST_0_CURRENCYCODE': 'GBP',
'PAYMENTREQUEST_0_INVNUM': u'Donation via xxx',
'PAYMENTREQUEST_0_SELLERPAYPALACCOUNTID': 'b.cwik_1354106610_biz@xxx',
'PWD': 'xxx',
'RETURNURL': 'xxx',
'SIGNATURE': 'xxx',
'USER': 'seller_1341842378_biz_api1.xxx',
'VERSION': '72.0'}

DEBUG 2012-11-28 12:51:00,001 response 5196 PayPal NVP API Response:
{u'ACK': [u'Success'],
u'BUILD': [u'4181146'],
u'CORRELATIONID': [u'6195a72b374'],
u'TIMESTAMP': [u'2012-11-28T12:50:59Z'],
u'TOKEN': [u'EC-87T24113GH453193G'],
u'VERSION': [u'72.0']}

{'METHOD': 'GetExpressCheckoutDetails',
'PWD': 'xxx',
'SIGNATURE': 'xxx',
'TOKEN': u'EC-87T24113GH453193G',
'USER': 'seller_1341842378_biz_api1.xxx',
'VERSION': '72.0'}

DEBUG 2012-11-28 12:51:32,763 response 5196 PayPal NVP API Response:
{u'ACK': [u'Success'],
u'ADDRESSSTATUS': [u'Confirmed'],
u'AMT': [u'0.00'],
u'BILLINGAGREEMENTACCEPTEDSTATUS': [u'1'],
u'BUILD': [u'4181146'],
u'CHECKOUTSTATUS': [u'PaymentActionNotInitiated'],
u'CORRELATIONID': [u'3d9bfd2b3027b'],
u'COUNTRYCODE': [u'GB'],
u'CURRENCYCODE': [u'GBP'],
u'EMAIL': [u'buyer_1341841276_per@xxx'],
u'FIRSTNAME': [u'Bartosz'],
u'HANDLINGAMT': [u'0.00'],
u'INSURANCEAMT': [u'0.00'],
u'INVNUM': [u'Donation via xxx'],
u'LASTNAME': [u'\xc4\x86wik\xc5\x82owski'],
u'PAYERID': [u'ZXHBVW7PNHZDL'],
u'PAYERSTATUS': [u'verified'],
u'PAYMENTREQUESTINFO_0_ERRORCODE': [u'0'],
u'PAYMENTREQUEST_0_ADDRESSSTATUS': [u'Confirmed'],
u'PAYMENTREQUEST_0_AMT': [u'0.00'],
u'PAYMENTREQUEST_0_CURRENCYCODE': [u'GBP'],
u'PAYMENTREQUEST_0_HANDLINGAMT': [u'0.00'],
u'PAYMENTREQUEST_0_INSURANCEAMT': [u'0.00'],
u'PAYMENTREQUEST_0_INSURANCEOPTIONOFFERED': [u'false'],
u'PAYMENTREQUEST_0_INVNUM': [u'Donation via xxx'],
u'PAYMENTREQUEST_0_SELLERPAYPALACCOUNTID': [u'b.cwik_1354106610_biz@xxx'],
u'PAYMENTREQUEST_0_SHIPDISCAMT': [u'0.00'],
u'PAYMENTREQUEST_0_SHIPPINGAMT': [u'0.00'],
u'PAYMENTREQUEST_0_SHIPTOCITY': [u'Wolverhampton'],
u'PAYMENTREQUEST_0_SHIPTOCOUNTRYCODE': [u'GB'],
u'PAYMENTREQUEST_0_SHIPTOCOUNTRYNAME': [u'United Kingdom'],
u'PAYMENTREQUEST_0_SHIPTONAME': [u'Bartosz \xc4\x86wik\xc5\x82owski'],
u'PAYMENTREQUEST_0_SHIPTOSTATE': [u'West Midlands'],
u'PAYMENTREQUEST_0_SHIPTOSTREET': [u'1 Main Terrace'],
u'PAYMENTREQUEST_0_SHIPTOZIP': [u'W12 4LQ'],
u'PAYMENTREQUEST_0_TAXAMT': [u'0.00'],
u'SHIPDISCAMT': [u'0.00'],
u'SHIPPINGAMT': [u'0.00'],
u'SHIPTOCITY': [u'Wolverhampton'],
u'SHIPTOCOUNTRYCODE': [u'GB'],
u'SHIPTOCOUNTRYNAME': [u'United Kingdom'],
u'SHIPTONAME': [u'Bartosz \xc4\x86wik\xc5\x82owski'],
u'SHIPTOSTATE': [u'West Midlands'],
u'SHIPTOSTREET': [u'1 Main Terrace'],
u'SHIPTOZIP': [u'W12 4LQ'],
u'TAXAMT': [u'0.00'],
u'TIMESTAMP': [u'2012-11-28T12:51:32Z'],
u'TOKEN': [u'EC-87T24113GH453193G'],
u'VERSION': [u'72.0']}

{'AMT': u'3',
'BILLINGFREQUENCY': '1',
'BILLINGPERIOD': 'Month',
'CURRENCYCODE': u'GBP',
'DESC': u'Donation via xxx',
'METHOD': 'CreateRecurringPaymentsProfile',
'PAYERID': u'ZXHBVW7PNHZDL',
'PROFILESTARTDATE': '2012-11-28T14:51:32Z',
'PWD': 'xxx',
'SIGNATURE': 'xxx',
'TOKEN': u'EC-87T24113GH453193G',
'USER': 'seller_1341842378_biz_api1.xxx',
'VERSION': '72.0'}

ERROR 2012-11-28 12:51:33,892 interface 5196 PayPal NVP Query Response
ERROR 2012-11-28 12:51:33,892 interface 5196 {u'ACK': [u'Failure'],
u'BUILD': [u'4181146'],
u'CORRELATIONID': [u'540ba10f7a295'],
u'L_ERRORCODE0': [u'11502'],
u'L_LONGMESSAGE0': [u'The token is invalid'],
u'L_SEVERITYCODE0': [u'Error'],
u'L_SHORTMESSAGE0': [u'Invalid Token'],
u'TIMESTAMP': [u'2012-11-28T12:51:33Z'],
u'VERSION': [u'72.0']} 
```

# coffeescript - 咖啡脚本重构

> ID：13607777
> 
> 赞同：3
> 
> 时间：2012-11-28T14:46:46.040
> 
> 标签：coffeescript

是否有任何特定于咖啡脚本的技巧可以使这看起来更整洁：

```
index = (->
          if segment == 'index'
            return 0
          else if segment == 'inbox'
            return 2

          1
        )() 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T15:19:24.237

是的，一个`switch`表达式：

```
index = switch segment
  when 'index' then 0
  when 'inbox' then 2
  else 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T15:51:11.513

您可以使用字符将内联`if ... then ... else`语句分成多行（为了便于阅读） 。`\`

```
index = if segment == 'index' then 0 \
        else if segment == 'inbox' then 2 \
        else 1 
```

`switch`如果你的条件逻辑对于一个简单的块来说太复杂了，这很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T08:12:14.603

是的，特定于 CoffeeScript 的存在运算符：

```
index = {'index': 0, 'inbox': 2}[segment] ? 1 
```

您还可以使用内联 if 语句来摆脱函数调用：

```
index = if segment == 'index' then 0 else if segment == 'inbox' then 2 else 1 
```

但是在直接的 Javascript 中，内联 if 不会更难：

```
index = segment == 'index' ? 0 : segment == 'inbox' ? 2 : 1 
```

# google-api - 通过 PHP 授权应用程序访问 BigQuery 而无需用户交互

> ID：13607786
> 
> 赞同：0
> 
> 时间：2012-11-28T14:47:07.520
> 
> 标签：google-api, google-bigquery, google-api-php-client

我有一个网站，它完成了从云端的 Google BigQuery 获取 USN 的简单工作。现在，每次访问时，我都需要有一个 Google 帐户和那个特定的电子邮件 ID，应该在“团队标签”中分配“权限”。我基本上希望每个人都可以使用该网站。我正在使用 PHP，所以我需要有关此处有用的功能的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-22T07:40:51.880

您必须通过 google 控制台创建一个“服务帐户”并在您的服务器上下载私钥文件 (.p12)。并使用以下代码

```
/**
   * setup service client using key file
   * @param String $keyFileLoc location of .p12 file provided in google console
   * @param String $clientEmail client location provided in google console
   */
   function setupServiceClient($keyFileLoc,$clientEmail){
       $client = new Google_Client();
       $service = new Google_Service_Bigquery($client);
       $client->setApplicationName("My Application Name");
       $key = file_get_contents($keyFileLoc);
       $cred = new Google_Auth_AssertionCredentials(
           $clientEmail,
           array('https://www.googleapis.com/auth/bigquery'),
           $key
       ); 
       $this->client->setAssertionCredentials($cred);
       return $service;
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T18:49:29.900

构建有权访问 BigQuery API 的应用程序（而不是要求用户授权步骤）的最佳方法是使用 OAuth2 服务帐户。本质上，服务帐户授权为“服务器到服务器”交互（例如与 BigQuery API 交互的服务器端 PHP 脚本）提供基于证书的授权。

[这里](http://code.google.com/p/google-api-php-client/wiki/OAuth2#Service_Accounts)有使用具有服务帐户授权的 Google PHP 客户端库的文档。

# iphone - NSURLConnection 错误

> ID：13607787
> 
> 赞同：0
> 
> 时间：2012-11-28T14:47:11.520
> 
> 标签：iphone, ios, nsurlconnection

我的 iPhone 应用程序有问题，我正在尝试连接到我的 PHP 脚本以获取有关某些内容的信息。

我有这段代码从 PHP 链接（总表）获取响应并将其放入 responseRandomID。

但是当我尝试在 Random 函数中使用它时，当我尝试运行它时会出现错误？

connectionDidReciveData：

```
if(connection == connectionRandomID) {
        NSString *temp = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
        responseRandomID = [temp intValue];
    } 
```

连接完成加载：

```
if(connection == connectionRandomID) {
        randomid = (int)1 + arc4random() % (1-responseRandomID+1);
    } 
```

编辑：仅当我的数据库中只有 1 行时才会发生这种情况？但是当我有 2 时它崩溃了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:05:24.180

```
randomid = (int)1 + arc4random() % (1-responseRandomID+1); 
```

如果 responseRandomId == 2 可以导致 / 为 0

如果硬编码，例如 2 % 0 - 编译器会捕获它

如果通过变量给出（如您的情况）：

```
Exception Type:  EXC_ARITHMETIC (SIGFPE)
Exception Codes: EXC_I386_DIV (divide by zero) 
```

# facebook - 有没有办法更实时地查看用户的新闻提要？

> ID：13607790
> 
> 赞同：0
> 
> 时间：2012-11-28T14:47:15.843
> 
> 标签：facebook, api, facebook-graph-api

我可以搜索单个用户的新闻提要，仅限于该用户的朋友使用

```
https://graph.facebook.com/me/home?q=youtube.com 
```

[文档](http://developers.connect.facebook.com/docs/reference/api/)说它将检索新闻提要的过时视图。有没有办法更实时地查看用户的新闻提要？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:36:41.573

考虑到 Facebook 的人才，这个 api 调用的过时方面不太可能是一个错误。如果我不得不猜测，他们这样做是为了让他们的应用程序/网站保持使用中心（非常明智的商业决策，真的，尤其是当你看到 Twitter 所处的情况时）。如此简短的回答：不。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:40:18.463

我不知道有一种方法可以更实时地查看用户的新闻源。我相信 Facebook 保留了此功能，因此开发人员不会构建自己的 FB 客户端。

# sql - 如何使用 object_id 函数从临时表中获取对象 ID

> ID：13607796
> 
> 赞同：3
> 
> 时间：2012-11-28T14:47:35.453
> 
> 标签：sql, temp-tables, sap-iq

我创建了一个如下表：

```
create table #tab
(
  id int
) 
```

现在，我想获取表的对象 ID。

我在同一个会话上试过：

```
select object_id( "#tab" ) 
```

和

```
select object_id( "tempdb..#tab" ) 
```

但两者都返回`null`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T23:47:49.720

简短的回答......在智商上这是不可能的。长答案...您有一些相当不错的选择和一些不太好的选择。

1.  用旧的 watcom SQL 重写整个过程，如果删除表的操作失败，则捕获错误...

2.  使用永久表（据我所知，IQ 中的 2 之间没有有效区别）

3.  变得时髦......并使用奇怪的智商行为！如果您在事务之外创建临时表，请检查@@trancount...您将得到 0 如您所愿。如果您随后打开一个事务...并检查@@trancount，您将得到 2。所以...考虑成功创建临时表 :)

4.  假设它在您的连接中不存在:)

Sybase ASA SQL 代码列表： [http ://manuals.sybase.com/onlinebooks/group-sas/awg0800e/dberen8/@Generic__BookTextView/334;pt=334#X](http://manuals.sybase.com/onlinebooks/group-sas/awg0800e/dberen8/@Generic__BookTextView/334;pt=334#X)

#1 的示例：

```
DROP PROCEDURE foo;
go
create procedure foo()
begin
  DECLARE DROP_TABLE_FAILED EXCEPTION FOR SQLSTATE '42W33';

  BEGIN
    DROP TABLE T1;
    EXCEPTION 
      WHEN DROP_TABLE_FAILED 
      THEN 
      WHEN OTHERS THEN RESIGNAL;

  END;

    CREATE LOCAL TEMPORARY TABLE t1 (c1 int) 
    on commit preserve rows;

    insert into t1 select 1;

    select * from t1;

END;
go
exec foo
go
exec foo
go
drop table t1;
go 
```

# jquery - Jquery延迟和动画持续时间

> ID：13607799
> 
> 赞同：1
> 
> 时间：2012-11-28T14:47:43.690
> 
> 标签：jquery, performance, jquery-animate, delay

我正在尝试编写分层滑块我使用此代码为图层设置动画：

```
$.each(data, function(key, val) {
   $.each(val, function(lkey, lval) {
    $("#"+lval['layer-id']).stop(false, true).delay(lval['in-delay']).animate(
      {left: '+='+(lval['left']-lval['start-left'])+'px'}, 
      {queue: true, duration: lval['in-duration']} , 
      'easeOutBack');
    });
 }); 
```

延迟工作正常，但动画持续时间不起作用，所有图层似乎都具有相同的动画速度，但在我的 html 代码中，每个图层都有自己的持续时间值：

```
...
<div class="f-layer" 
data-start-top="120" 
data-start-left="-300" 
data-end-top="" 
data-end-left="" 
data-top="120" 
data-left="300" 
data-in-delay="1000"
data-out-delay="1300" 
data-in-duration="8000"
data-out-duration="500" 
data-in-easing="easeOutExpo"
data-out-easing="easeOutExpo"
data-in-effect="easeOutExpo"
data-out-effect="easeOutExpo"> 
<div class="f-img"><img src="images/4.jpeg"/></div> 
</div>
... 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:27:34.783

[animate()](http://api.jquery.com/animate/)的`duration`选项可以是字符串或以毫秒表示的数字。有效字符串是和，分别代表 200 和 600 毫秒。`"fast"``"slow"`

在您的情况下，`lval["in-duration"]`是一个字符串，因为它来自一个`data-`属性，但既不是`"fast"`也不是`"slow"`，所以它是无效的，因此被忽略。

您必须使用[parseInt()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt)将其转换为数字：

```
duration: parseInt(lval["in-duration"], 10) 
```

或[一元 + 运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Arithmetic_Operators)：

```
duration: +lval["in-duration"] 
```

# c# - 使用 C# 保存 Excel 工作表

> ID：13607800
> 
> 赞同：1
> 
> 时间：2012-11-28T14:47:48.840
> 
> 标签：c#, excel

我使用插件和功能区创建了应用程序。这是我的代码。我只想使用用户输入的文件名将数据保存在 Excel 工作表中。

```
 SaveFileDialog saveFileDialog1 = new SaveFileDialog();              
 saveFileDialog1.ShowDialog();
 Globals.Sheet1.SaveAs(saveFileDialog1.FileName, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing);
 Globals.Sheet1.Application.Quit(); 
```

该文件将使用此代码保存。但是当我打开文件时，数据也保存在文件中。但是当我打开文件时出现错误 - .vsto 文件没有成功。有人可以帮我这里有什么问题吗？怎么做才能避免这个错误信息？谢谢您的帮助。

# c - 递归二叉树插入

> ID：13607807
> 
> 赞同：1
> 
> 时间：2012-11-28T14:48:05.453
> 
> 标签：c, recursion, tree, binary-tree, insertion

所以我试图使用这个递归函数将一个值插入二叉树：

```
void add(node* *hd, int v){
node* curr = *hd;
if(curr == NULL){
    curr = (node*)malloc(sizeof(node));
    curr->value = v;
}else{
    if(v < curr->value){
        add(&curr->left, v);
    }else{
        add(&curr->right, v);
    }
}
} 
```

它似乎不起作用，我只是不明白为什么我不能做这样的事情。我将如何解决它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T14:54:21.883

您需要初始化指针，因为它们可能会被设置为分配空间时获得的任何值。现在当你通过时`add(&curr->left, v);` `curr->left`可能不是某个地方的指针，但它仍然不是`NULL`；

```
void add(node* *hd, int v){
    node* curr = *hd;
    if(curr == NULL){
        curr = malloc(sizeof(node));
        curr->left = curr->right = NULL;
        curr->value = v;
        *hd = curr; // from Mohamed KALLEL
    }else{
        if(v < curr->value){
            add(&curr->left, v);
        }else{
            add(&curr->right, v);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-28T14:50:31.257

您的新节点没有正确“连接”，因为您只是将指针存储在局部变量`curr`中，而不是写入它`*hd`来更改调用者的指针。

另外，[不要强制转换`malloc()`in C](https://stackoverflow.com/a/605858/28169)的返回值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T14:51:00.150

```
if(curr == NULL){
    curr = malloc(sizeof(node));
    curr->right = NULL;
    curr->left = NULL;  // From ks6g10 in order to initialize right and left to NULL
    curr->value = v;
    *hd = curr; // add this
} 
```

顺便说一句，使用`calloc`而不是`malloc`. 它将您的节点内存初始化为`0`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T15:03:33.063

另一种递归添加二叉树的方法可以这样完成：

```
node *add(node *hd, int v) {
   node* curr = NULL;

   if(!hd){
      curr = malloc(sizeof(node));
      curr->value = v;
      curr->left = NULL;
      curr->right = NULL;
      return curr;
   }
   else {
     if(v < curr->value)
        curr->left = add(curr->left,v);
     else 
        curr->right = add(curr->right,v);  
  }
  return hd;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T15:04:06.807

您需要使用 NULL 初始化新形成的节点的左右指针，并让 hd 指向该节点。

```
void add(node* *hd, int v){
node* curr = *hd;
if(curr == NULL){
    curr = malloc(sizeof(node));
    curr->value = v;
    curr->left=curr->right=NULL;
    *hd = curr;

}else{
    if(v < curr->value){
        add(&curr->left, v);
    }else{
        add(&curr->right, v);
    }
}
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-28T08:34:52.920

我是这样做的：

```
void insert(int data, node *&cur)
{
    if (cur == NULL)
    {
        cur = (struct node*) malloc(sizeof(struct node));
        cur->data = data;
        cur->left = NULL;
        cur->right = NULL;              
    }
    else
    {
        if (data > cur->data)
        {
            insert(data, cur->right);
        }
        else
        {
            insert(data, cur->left);
        }
    }
} 
```

# jquery - 带有facebox模式的knockoutjs

> ID：13607813
> 
> 赞同：1
> 
> 时间：2012-11-28T14:48:23.380
> 
> 标签：jquery, knockout.js, facebox

我正在尝试创建一个带有 knockoutjs 模型的网页，该模型允许用户使用模式弹出窗口更新项目。对于模态，我想使用 jQuery facebox 插件 - [http://defunkt.io/facebox/](http://defunkt.io/facebox/)

我有一个正在进行的演示，直到您第二次尝试更新项目。您更新的第一个项目保存得很好，但是绑定似乎丢失了。我试图从其他问题中调整示例以适应 facebox 插件，但似乎无法正确处理。

我正在使用这样定义的自定义绑定处理程序：-

```
ko.bindingHandlers.modal = {
    init: function(element, valueAccessor, allBindingsAccessor) {
        var allBindings = allBindingsAccessor();
        var $element = $(element);
        $element.addClass('hide modal');

        if (allBindings.modalOptions) {
            if (allBindings.modalOptions.beforeClose) {
                $element.on('hide', function() {
                    return allBindings.modalOptions.beforeClose();
                });
            }
        }

        return ko.bindingHandlers['with'].init.apply(this, arguments);
    },
    update: function(element, valueAccessor) {
        var value = ko.utils.unwrapObservable(valueAccessor());

        var returnValue = ko.bindingHandlers['with'].update.apply(this, arguments);

        if (value) {
            $.facebox(element);
        } else {
            $(document).trigger('close.facebox');
        }

        return returnValue;
    }
}; 
```

在我的淘汰模型中，我有一个变量来存储由我的模态编辑的选定项目，以及更新/保存/取消它的功能

```
self.editingMapmarker = ko.observable();
    self.editMapmarker = function(mapmarker) {
        self.editingMapmarker(mapmarker);
        self.editingMapmarker().reset();
    };

    self.saveMapmarker = function() {
        self.editingMapmarker().accept();
        self.editingMapmarker(undefined);
    }

    self.cancelSaveMapmarker = function() {
        self.editingMapmarker(undefined);
    } 
```

到目前为止，我的工作有一个 Jsfiddle - [http://jsfiddle.net/juBxs/](http://jsfiddle.net/juBxs/)

任何人都可以帮助我在第一次保存后保持绑定吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:45:55.383

两种选择：

看起来您的自定义绑定已经在 KO 2.2 中正常工作：http: [//jsfiddle.net/rniemeyer/Cpvtd/](http://jsfiddle.net/rniemeyer/Cpvtd/)

如果您无法升级到 2.2，那么您应该可以在更新功能中切换`with`更新的顺序和`facebox`打开/关闭。

```
update: function(element, valueAccessor) {
    var value = ko.utils.unwrapObservable(valueAccessor());

    if (value) {
        $.facebox(element);
    } else {
        $(document).trigger('close.facebox');
    }

    return ko.bindingHandlers['with'].update.apply(this, arguments);
} 
```

示例：http: [//jsfiddle.net/rniemeyer/wsNZa/](http://jsfiddle.net/rniemeyer/wsNZa/)

# ios - Cocos2d 2.0 - 左下角的3个数字？

> ID：13607814
> 
> 赞同：2
> 
> 时间：2012-11-28T14:48:24.920
> 
> 标签：ios, cocos2d-iphone

我遇到了一个不知道如何解决的问题。

在 cocos2d 2.0 中，左下角的第二个数字下降到像 0.002 这样的低数字并导致我的游戏滞后！！

第二个数字是“每秒帧数毫秒”，即进入下一帧所需的时间。我从一个与我类似的问题中得到了这个信息，这里是那个问题的链接： [Cocos2d 2.0 - 3 numbers on the bottom left](https://stackoverflow.com/questions/10889743/cocos2d-2-0-3-numbers-on-the-bottom-left)

游戏 FPS 的毫秒通常在 0.016 或 0.021 左右运行，并且没有延迟。

它不应该在低至 0.002 的数字上运行得更顺畅吗？

我怎样才能停止这种滞后？

有没有足够了解 cocos2d 的人来帮助我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T17:03:04.367

当您的应用程序运行非常非常慢（大约 10 fps 或更少）时，毫秒显示不再准确，并且会显示一个非常低的数字。

您需要找出导致帧率下降的原因。如果绘制调用的数量很高（100+），那么您的问题是您渲染太多和/或效率低下（使用精灵批处理）。

如果绘图调用的数量相当低（不超过 50），那么您的问题不是渲染而是您自己的代码。可能是一些耗时（效率低下？）的算法或频繁加载/卸载对象和/或数据（文件），这些是最常见的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T15:35:46.117

您如何观察/测量这种“滞后”？

如果您基于在模拟器上运行报告此问题，请在设备上进行检查。模拟器编号毫无意义。顺便说一句，数字不会导致滞后，数字是应用程序消耗资源的结果（衡量），即低 FPS 是由软件滞后引起的，而不是相反。

# three.js - Computing Bounding Sphere after static .OBJ loading with Three.js

> ID：13607822
> 
> 赞同：0
> 
> 时间：2012-11-28T14:48:43.833
> 
> 标签：three.js, .obj

I got the following code for loading a simple, non-animated .OBJ with a .MTL into Three.js. It's very simple indeed and works well, but when I add the line with computeBoundingSphere(), it fails with a "TypeError: object.computeBoundingSphere is not a function" :

```
var callbackIrali1 = function ( event ) {

    var object = event.content;
    object.computeBoundingSphere();
    scene.add( object );

};
var loaderIrali1 = new THREE.OBJMTLLoader();
loaderIrali1.addEventListener( 'load', callbackIrali1);
loaderIrali1.load( 'models/obj/irali/irali.obj', 'models/obj/irali/irali.mtl' ); 
```

The issue is, I can't find what type of object might be this event.content returned by the callback, and so I can't find how to apply the computeBoundingSphere() function to it.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T21:56:12.447

Finally found it out by myself :
- The object returned by the Loader is an Object3D,
- Thus, it has 2 children : mesh and materials,
- So you have to find the first child, then extract its geometry, and then compute the bounding sphere.

Which gives the following line :

```
object.children[0].geometry.computeBoundingSphere(); 
```

# android - android：我怎么能退出应用程序？

> ID：13607823
> 
> 赞同：0
> 
> 时间：2012-11-28T14:48:46.057
> 
> 标签：android

在我的 android 应用程序中，我更改了后退按钮功能，以便它进入我的游戏的主屏幕，现在它在主屏幕上，我应该如何使用后退按钮退出整个应用程序？

```
public boolean onKeyDown(int keyCode, KeyEvent event)  {
    if (keyCode == KeyEvent.KEYCODE_BACK ) {
          Assets.getInstance().getClick().play(1);
          this.clearScreenStack();
          this.setScreen(new MainMenuScreen(this));
        return true;
    }

    return super.onKeyDown(keyCode, event);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:50:24.457

Android 的设计不支持选择退出应用程序，而是由操作系统管理它。您可以通过其相应的 Intent 调出 Home 应用程序：

```
Intent intent = new Intent(Intent.ACTION_MAIN);
intent.addCategory(Intent.CATEGORY_HOME);
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(intent); 
```

检查[如何退出应用程序并显示主屏幕？](https://stackoverflow.com/questions/3226495/android-exit-application-code)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T15:03:34.777

如果您有一种机制可以用来查看正在显示的屏幕，您可以执行以下操作：

```
public boolean onKeyDown(int keyCode, KeyEvent event)  {
    if (keyCode == KeyEvent.KEYCODE_BACK ) {
        if(mainScreenIsShowing == true){
            //If the main screen is showing let the back button
            //have its default behavior.
            return super.onKeyDown(keyCode, event);
        }else{
            Assets.getInstance().getClick().play(1);
            this.clearScreenStack();
            this.setScreen(new MainMenuScreen(this));
            return true;
        }

    }
    return super.onKeyDown(keyCode, event);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T14:51:01.900

谷歌不鼓励退出按钮，你应该让操作系统处理它。

读一读： [退出应用程序是否令人不悦？](https://stackoverflow.com/questions/2033914/quitting-an-application-is-that-frowned-upon)

如果您真的想退出，我无能为力，但我想我会提到这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T14:58:58.447

您还可以检查用户是否两次输入后退按钮。

```
boolean backPressed = false;
    public boolean onKeyDown(int keyCode, KeyEvent event)  {
    if (keyCode == KeyEvent.KEYCODE_BACK && !backPressed) {
          Assets.getInstance().getClick().play(1);
          this.clearScreenStack();
          this.setScreen(new MainMenuScreen(this));
          backPressed = true;
        return true;
    }

    backPressed = false;
    return super.onKeyDown(keyCode, event);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T15:07:07.863

这是一个值得商榷的话题，但我没有发现任何问题，或者按下后退按钮时应用程序退出。毕竟，对 finish() 的调用是后退按钮的默认行为。如果处理主屏幕的 Activity 位于 Activity 堆栈的底部，则调用 finish() 将退出您的应用程序。

我提出以下建议：让您的 MainMenuScreen 在一个单独的活动 MainMenuActivity 中处理，它是主要活动。回到MainMenuActivity时完成（）其他活动，并在MainMenuActivity中像这样处理onKeyDown：

```
public boolean onKeyDown(int keyCode, KeyEvent event)  {
    if (keyCode == KeyEvent.KEYCODE_BACK ) {
        this.finish()
    }
} 
```

# javascript - 如何使用 jQuery 手风琴创建一个 div

> ID：13607826
> 
> 赞同：2
> 
> 时间：2012-11-28T14:48:56.523
> 
> 标签：javascript, jquery

我用这个：

```
<script>
    $(function() {
        $( "#accordion" ).accordion();
    });
</script> 
```

获得展开/折叠的效果。（如果您知道更好的插件或方法，请注意我）

我有这个 div：`<div id ="accordion"></div>`

这段代码用于在该 div 中创建一个按钮。（不要担心按钮的内容）

```
$('#button_submit').click(function() 
{
$("#accordion").append(
$("<button id=saved"+j+">").click(function() {
drawChart.apply(null, myArray);
}).html("<b>Start date:</b>"+""+myArray[0]+"\n<b>End date:</b>"+myArray[1]+"\n<b>Chart type:</b>"+myArray[2]+"")
); 
```

我的问题是，如何创建/格式化 div 手风琴以产生这种效果[手风琴效果 jquery](http://jqueryui.com/accordion/)。

因为`<button id=saved"+j+">`应该出现在`sections`.

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:53:49.787

这是一个非常简单的手风琴插件..

[http://viralpatel.net/blogs/create-accordion-menu-jquery/](http://viralpatel.net/blogs/create-accordion-menu-jquery/)

```
$("#accordion > li > div").click(function(){

    if(false == $(this).next().is(':visible')) {
        $('#accordion ul').slideUp(300);
    }
$(this).next().slideToggle(300);
});

$('#accordion ul:eq(0)').show(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T14:56:36.443

> ***用示例* **更新**[换句话说，测试和工作]**

 **这是您需要的代码。正如我之前提到的，问题是您将按钮添加到主 div 而不是部分。

# [**jsFiddle（工作示例）**](http://jsfiddle.net/SpYk3/8Y67K/)

 [# **Alt 示例（可能更简洁）**](http://jsfiddle.net/SpYk3/8Y67K/6/)  [# **这个允许添加新的手风琴件（里面有按钮）**](http://jsfiddle.net/SpYk3/8Y67K/13/) 

*   *注意*：最后一个棘手的部分是您必须销毁手风琴并重新创建它，因此如果您有创建手风琴的特定选项，您可能希望将它们包装在一个单独的函数中并在销毁后立即调用它

> 脚本

```
$(function() {
    $("#accordion").accordion();

    $("#accordion .ui-accordion-content").each(function(i) {
        $(this).append(
            $("<button />")
                .prop("id", "saved"+j+">")
                .html("<b>Start date:</b>"+""+myArray[0]+"\n<b>End date:</b>"+myArray[1]+"\n<b>Chart type:</b>"+myArray[2])
                .on("click", function(e) {
                    drawChart.apply(null, myArray);
                })
        );
    });
}) 
```

确保您的 HTML 布局正确。

> 示例 HTML

```
<div id="accordion">
    <h3>Section 1</h3>
    <div>
        <p>
        Mauris mauris ante, blandit et, ultrices a, suscipit eget, quam. Integer
        ut neque. Vivamus nisi metus, molestie vel, gravida in, condimentum sit
        amet, nunc. Nam a nibh. Donec suscipit eros. Nam mi. Proin viverra leo ut
        odio. Curabitur malesuada. Vestibulum a velit eu ante scelerisque vulputate.
        </p>
    </div>
    <h3>Section 2</h3>
    <div>
        <p>
        Sed non urna. Donec et ante. Phasellus eu ligula. Vestibulum sit amet
        purus. Vivamus hendrerit, dolor at aliquet laoreet, mauris turpis porttitor
        velit, faucibus interdum tellus libero ac justo. Vivamus non quam. In
        suscipit faucibus urna.
        </p>
    </div>
    <h3>Section 3</h3>
    <div>
        <p>
        Nam enim risus, molestie et, porta ac, aliquam ac, risus. Quisque lobortis.
        Phasellus pellentesque purus in massa. Aenean in pede. Phasellus ac libero
        ac tellus pellentesque semper. Sed ac felis. Sed commodo, magna quis
        lacinia ornare, quam ante aliquam nisi, eu iaculis leo purus venenatis dui.
        </p>
        <ul>
            <li>List item one</li>
            <li>List item two</li>
            <li>List item three</li>
        </ul>
    </div>
    <h3>Section 4</h3>
    <div>
        <p>
        Cras dictum. Pellentesque habitant morbi tristique senectus et netus
        et malesuada fames ac turpis egestas. Vestibulum ante ipsum primis in
        faucibus orci luctus et ultrices posuere cubilia Curae; Aenean lacinia
        mauris vel est.
        </p>
        <p>
        Suspendisse eu nisl. Nullam ut libero. Integer dignissim consequat lectus.
        Class aptent taciti sociosqu ad litora torquent per conubia nostra, per
        inceptos himenaeos.
        </p>
    </div>
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T14:59:30.303

jQuery UI Accordion 需要一个特定的 HTML 结构。

> 底层 HTML 标记是一系列标题（H3 标记）和内容 div，因此内容无需 JavaScript 即可使用。

[http://jqueryui.com/accordion/](http://jqueryui.com/accordion/)

```
<div id="accordion">
    <h3>Section 1</h3>
    <div>
        <p>
        Mauris mauris ante, blandit et, ultrices a, suscipit eget, quam. Integer
        ut neque. Vivamus nisi metus, molestie vel, gravida in, condimentum sit
        amet, nunc. Nam a nibh. Donec suscipit eros. Nam mi. Proin viverra leo ut
        odio. Curabitur malesuada. Vestibulum a velit eu ante scelerisque vulputate.
        </p>
    </div>
    <h3>Section 2</h3>
    <div>
        <p>
        Sed non urna. Donec et ante. Phasellus eu ligula. Vestibulum sit amet
        purus. Vivamus hendrerit, dolor at aliquet laoreet, mauris turpis porttitor
        velit, faucibus interdum tellus libero ac justo. Vivamus non quam. In
        suscipit faucibus urna.
        </p>
    </div>
</div> 
```

你不能只是按一下按钮就期望它起作用。您可以在部分中放置一个按钮。**

# javascript - 将数据加载到 slickgrid

> ID：13607831
> 
> 赞同：2
> 
> 时间：2012-11-28T14:49:09.717
> 
> 标签：javascript, jquery, slickgrid

我正在尝试使用我在 SO 中找到的这种加载模式： [Load slickgrid](https://stackoverflow.com/questions/9362253/best-way-to-load-data-into-slickgrid)

话虽如此，我在实际显示网格时遇到了一些麻烦。我不断收到“未捕获的 ReferenceError：loadGrid 未定义”。我不确定选项 var，我怀疑我的初始化不正确。

任何帮助，将不胜感激。

```
 function loadGrid () {
    var data =  [
        ['3m Co',                               71.72, 0.02,  0.03,  '9/1 12:00am'],
        ['Alcoa Inc',                           29.01, 0.42,  1.47,  '9/1 12:00am'],
        ['Altria Group Inc',                    83.81, 0.28,  0.34,  '9/1 12:00am'],
        ['American Express Company',            52.55, 0.01,  0.02,  '9/1 12:00am'],
        ['American International Group, Inc.',  64.13, 0.31,  0.49,  '9/1 12:00am'],
        ['AT&T Inc.',                           31.61, -0.48, -1.54, '9/1 12:00am'],
        ['Boeing Co.',                          75.43, 0.53,  0.71,  '9/1 12:00am'],
        ['Caterpillar Inc.',                    67.27, 0.92,  1.39,  '9/1 12:00am'],
        ['Citigroup, Inc.',                     49.37, 0.02,  0.04,  '9/1 12:00am'],
        ['E.I. du Pont de Nemours and Company', 40.48, 0.51,  1.28,  '9/1 12:00am'],
        ['Exxon Mobil Corp',                    68.1,  -0.43, -0.64, '9/1 12:00am'],
        ['General Electric Company',            34.14, -0.08, -0.23, '9/1 12:00am'],
        ['General Motors Corporation',          30.27, 1.09,  3.74,  '9/1 12:00am'],
        ['Hewlett-Packard Co.',                 36.53, -0.03, -0.08, '9/1 12:00am'],
        ['Honeywell Intl Inc',                  38.77, 0.05,  0.13,  '9/1 12:00am'],
        ['Intel Corporation',                   19.88, 0.31,  1.58,  '9/1 12:00am'],
        ['International Business Machines',     81.41, 0.44,  0.54,  '9/1 12:00am'],
        ['Johnson & Johnson',                   64.72, 0.06,  0.09,  '9/1 12:00am'],
        ['JP Morgan & Chase & Co',              45.73, 0.07,  0.15,  '9/1 12:00am'],

    ];

    var options = {'autoHeight:true'};
    var columns = ['company','price','change','pctChange','lastChange'];
    var grid;
    // ... code to get data

    // ... code to get column data/settings

    // ... code to get option data

    $(function () {
    if (grid) {
    grid.setOptions(options);
    grid.setColumns(columns);
    grid.setData(data);
    grid.render();
        } else {
        grid = new Slick.Grid('#trade-reg-trade-info-table', data, columns,options);

                }

     $('#trade-reg-trade-info-table').show();   
    });
    } 
```

谢谢你，现在我已经纠正了它，我仍然得到同样的错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:09:13.630

```
new Slick.Grid('#trade-reg-trade-info-table" 
```

您用单引号打开并尝试用双引号关闭。

```
{
  'company':    'JP Morgan & Chase & Co',
  'price':      45.73,
  'change':     0.07,
  'pctChange':  0.15,
  'lastChange': '9/1 12:00am'
} 
```

# spring-batch - 为什么我不应该在 tasklet 中使用块？

> ID：13607836
> 
> 赞同：2
> 
> 时间：2012-11-28T14:49:17.860
> 
> 标签：spring-batch

[Spring Batch 文档](http://static.springsource.org/spring-batch/reference/html/configureStep.html#taskletStep)说：

> `<chunk/>`内不应使用任何元素`<tasklet/>`

没有进一步的解释，我无法想象。有人可以向我解释这个限制吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T08:19:45.413

我想你错过了一些东西。

这篇文档说，`no <chunk/> element should be used within the <tasklet/>`如果您正在为 Tasklet 步骤进行配置。

如果您环顾四周，您会发现，为了配置面向块的步骤，您实际上是在`<chunk/>`使用`<tasklet/>`

# jquery - 自动增长 textarea 容器不根据 textarea 大小调整大小

> ID：13607849
> 
> 赞同：2
> 
> 时间：2012-11-28T14:49:44.443
> 
> 标签：jquery, autogrow

我有 textarea 和一个包含该 textarea 的 DIV 容器。

```
<div class="holder">
    <div style="float:left;">
        <img src="https://fbcdn-profile-a.akamaihd.net/hprofile-ak-snc6/211204_417552211638405_1828134258_q.jpg">
    </div>
    <div style="float:left;">
        <textarea class="grow" row="5" cols="20"></textarea>
    </div>
</div> 
```

我正在使用自动增长插件。

```
$(document).ready(function(){
  $(".grow").autogrow();  
}); 
```

当 textarea 根据内容调整大小时，容器 div 不会相应扩展。我试图添加

```
Height: 100%; 
```

但这不起作用，我看到它是导致问题的浮动属性，但我不知道如何使它与浮动属性一起使用。

### [在这里演示](http://www.jsfiddle.net/8e9TG/10/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T14:56:13.087

这是因为其中的元素`div`都是浮动的，因此它们不是浏览器计算父级高度的文档流的一部分。快速的解决方法是`overflow: hidden`在父容器上设置。

[**示例小提琴**](http://jsfiddle.net/8e9TG/12/)

# sql - SQL Server 2008 的连接表问题

> ID：13607853
> 
> 赞同：1
> 
> 时间：2012-11-28T14:50:07.923
> 
> 标签：sql, sql-server-2008

我正在使用以下查询来获取一些销售数据。问题是它返回了错误的数据。

我将三张桌子连接在一起`tbl_orders` `tbl_orderitems` `tbl_payment`。该`tbl_orders`表保存摘要信息，`tbl_orderitems`保存订购的项目，该`tbl_payment`表保存有关订单的付款信息。可以针对每个订单进行多次付款。

我正在尝试获取物品的总和`sum(mon_orditems_pprice)`，以及所售物品的数量`count(uid_orderitems)`。

当我针对特定订单号运行以下查询时，我知道该订单号有 1 个订单项。它返回计数 2 和两项之和。

```
Item                       ProdTotal    ProdCount
Westvale Climbing Frame    1198         2 
```

此订单在`tbl_payment`表中保存了两条付款记录，导致重复计数。如果我删除付款表加入，它会报告正确的数字，或者如果我选择一个具有单笔付款的订单，它也可以工作。我是不是错过了什么，我累了！？？

```
SELECT 
  txt_orditems_pname,
  SUM(mon_orditems_pprice) AS prodTotal,
  COUNT(uid_orderitems) AS prodCount
FROM dbo.tbl_orders
  INNER JOIN dbo.tbl_orderitems ON (dbo.tbl_orders.uid_orders = dbo.tbl_orderitems.uid_orditems_orderid)
  INNER JOIN dbo.tbl_payment ON (dbo.tbl_orders.uid_orders = dbo.tbl_payment.uid_pay_orderid)
WHERE
  uid_orditems_orderid = 61571
GROUP BY
  dbo.tbl_orderitems.txt_orditems_pname
ORDER BY
  dbo.tbl_orderitems.txt_orditems_pname 
```

有什么建议么？

谢谢你。

向下钻取表列

```
dbo.tbl_payment.bit_pay_paid (1/0) Has this payment been paid, yes no
dbo.tbl_orders.bit_order_archive (1/0) Is this order archived, yes no
dbo.tbl_orders.uid_order_webid (integer) Web Shop's ID
dbo.tbl_orders.bit_order_preorder (1/0) Is this a pre-order, yes no
YEAR(dbo.tbl_orders.dte_order_stamp) (2012) Sales year
dbo.tbl_orders.txt_order_status (varchar) Is the order dispatched, awaiting delivery
dbo.tbl_orderitems.uid_orditems_pcatid (integer) Product category ID 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:04:32.830

这是正常行为，如果您删除分组子句，您会看到加入后确实有 2 行，并且它们都有 599 作为 a`mon_orditems_pprice`因此`SUM`是正确的。当任何连接表中存在多重匹配时，整个输出行将变为多重，并且正在求和（或以任何其他方式计算或聚合）的数据也将多次求和。试试这个：

```
SELECT      txt_orditems_pname,
            SUM(mon_orditems_pprice) AS prodTotal,
            COUNT(uid_orderitems) AS prodCount
FROM        dbo.tbl_orders
INNER JOIN  dbo.tbl_orderitems ON (dbo.tbl_orders.uid_orders = dbo.tbl_orderitems.uid_orditems_orderid)
INNER JOIN  
(
    SELECT  x.uid_pay_orderid
    FROM    dbo.tbl_payment x
    GROUP   BY x.uid_pay_orderid
) AS payments ON (dbo.tbl_orders.uid_orders = payments.uid_pay_orderid)

WHERE
  uid_orditems_orderid = 61571
GROUP BY
  dbo.tbl_orderitems.txt_orditems_pname
ORDER BY
  dbo.tbl_orderitems.txt_orditems_pname 
```

我不知道`tbl_payment`您使用的是什么数据，SELECT 列表中的任何列实际上来自`tbl_payment`吗？为什么`tbl_payment`被加入？

# oracle - ORACLE 11G UTL_FILE + UTL_FILE_DIR - 无效目录

> ID：13607854
> 
> 赞同：2
> 
> 时间：2012-11-28T14:50:14.503
> 
> 标签：oracle, oracle11g, utl-file

嗨，我正在运行 Oracle 11，我正在尝试使用 UTL_FILE.FOPEN 写入服务器框上的目录。

为了测试这一点，我使用以下脚本（包括输出）：

```
SQL> @D:\test.sql

declare

l_file_handle              UTL_FILE.FILE_TYPE;

begin
  l_file_handle := UTL_FILE.FOPEN('/appl/mydir',
                                  '/appl/mydir/filename',
                                  'W');

  UTL_FILE.FCLOSE(l_file_handle);

  DBMS_OUTPUT.PUT_LINE('FINISHED');

end;

ORA-29280: invalid directory path
ORA-06512: at "SYS.UTL_FILE", line 41
ORA-06512: at "SYS.UTL_FILE", line 478
ORA-06512: at line 7

SQL> 
```

我将 /appl/mydir 添加到 UTL_FILE 参数中：

```
SELECT value
FROM V$PARAMETER
WHERE NAME = 'utl_file_dir';

/appl/mydir, /appl/mydir2, /appl/mydir3 
```

UNIX 目录对 UNIX 上的所有人都是可写的：

```
$ ls -l /appl/mydir
total 0
drwxrwsrwx    2 user userc 363968 Nov 27 13:46 mydir 
```

使用 oracle Directory 对象不是一个选项，我知道使用 UTL_FILE_DIR 实现的缺点。

任何想法为什么上述脚本失败？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T15:49:37.483

首先，在 11g 中，首选的方式是创建目录而不使用 utl_file。

其次，请验证您用于设置目录列表的确切命令：

```
SELECT value
FROM V$PARAMETER
WHERE NAME = 'utl_file_dir';

/appl/mydir, /appl/mydir2, /appl/mydir3 
```

是吗

```
alter system set utl_file_dir='/appl/mydir, /appl/mydir2, /appl/mydir3' scope = spfile; 
```

或者

```
alter system set utl_file_dir='/appl/mydir','/appl/mydir2','/appl/mydir3' scope = spfile; 
```

如果它是第一种方式，则再次重做第二种方式，因为第一种方式是错误的（它在 v$table 输出中看起来相同，但它是错误的）。

例如：

```
declare
  2  
l_file_handle              UTL_FILE.FILE_TYPE;
  4  
begin
  l_file_handle := UTL_FILE.FOPEN('/tmp/foo/a',
                                  '/tmp/foo/a/filename.txt',
                                  'w');
  9  
  UTL_FILE.FCLOSE(l_file_handle);
 11  
  DBMS_OUTPUT.PUT_LINE('FINISHED');
 13  
end;
 15  /
declare
*
ERROR at line 1:
ORA-29280: invalid directory path
ORA-06512: at "SYS.UTL_FILE", line 41
ORA-06512: at "SYS.UTL_FILE", line 478
ORA-06512: at line 6

SQL> show parameter utl_fil

NAME                     TYPE    VALUE
------------------------------------ ----------- ------------------------------
utl_file_dir                 string  /tmp/foo, /tmp/foo/a 
```

嗯。现在让我们修复该数据。

```
SQL> alter system set utl_file_dir='/tmp/foo','/tmp/foo/a' scope = spfile;

System altered.

SQL> shutdown immediate
Database closed.
Database dismounted.
ORACLE instance shut down.
SQL> startup open
ORACLE instance started.

Total System Global Area  263049216 bytes
Fixed Size          2225584 bytes
Variable Size         176163408 bytes
Database Buffers       79691776 bytes
Redo Buffers            4968448 bytes
Database mounted.
Database opened.
declare
  2  
l_file_handle              UTL_FILE.FILE_TYPE;
  4  
begin
  l_file_handle := UTL_FILE.FOPEN('/tmp/foo/a',
                                  '/tmp/foo/a/filename.txt',
                                  'w');
  9  
  UTL_FILE.FCLOSE(l_file_handle);
 11  
  DBMS_OUTPUT.PUT_LINE('FINISHED');
 13  
end;
 15  /

PL/SQL procedure successfully completed.

SQL> show parameter utl_file

NAME                     TYPE    VALUE
------------------------------------ ----------- ------------------------------
utl_file_dir                 string  /tmp/foo, /tmp/foo/a
SQL> 
```

还要验证 oracle 用户在 /appl 上有 r+x，在 /appl/mydir 上有 rwx

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T14:55:09.843

克服此错误的 2 个解决步骤::

1.确保操作系统级别的用户有写入文件夹的权限

2.尝试使用大写字母作为目录名称，即使用 OUT_DIR 代替 out_dir

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-12T13:24:17.233

空间不足也可能导致此问题。

如果挂载点上没有空间，Oracle 会抛出同样的错误。

> ORA-29280: 无效的目录路径 ORA-06512: 在“SYS.UTL_FILE”，第 41 行

请检查 utl_file_dir 挂载点是否有可用空间。

对于 Linux 和 Solaris，请使用：

```
df -k ${UTIL_FILE_PATH} 
```

我遇到了同样的问题，后来才知道这是挂载点的空间问题。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-11-10T07:39:40.213

对于文件名，只需输入名称而不是路径。所以你应该把

```
declare

l_file_handle              UTL_FILE.FILE_TYPE;

begin
  l_file_handle := UTL_FILE.FOPEN('/appl/mydir',
                                  ',filename',
                                  'W');

  UTL_FILE.FCLOSE(l_file_handle);

  DBMS_OUTPUT.PUT_LINE('FINISHED');

end; 
```

# vb.net - gridview vb.net中的多个Web服务数据

> ID：13607859
> 
> 赞同：0
> 
> 时间：2012-11-28T14:50:23.940
> 
> 标签：vb.net, vb.net-2010

我正在连接两个不同的 Web 服务，它们产生相同的数据结构。下面的示例代码将为我提供总计结果。

例子：

```
ItemSKU1  ItemName1  TotalQuantity1
ItemSKU2  ItemName2  TotalQuantity2
... 
```

我希望能够将 Web 服务的结果分离为以下内容：

```
ItemSKU1  ItemName1  QuantityIP1  QuantityIP2
... 
```

示例代码：

```
Dim returnds As New DataSet
Dim myreport As New RE.RE
Dim tmpURL = {"IP1", "IP2"}
Dim i As Integer
    For i = 0 To 1

        Try

            myreport.Url = "http://" & tmpURL(i) & "/RE.asmx"
            returnds = myreport.GetDeptDetails(date1, date2, dept)
            Me.gvReorder.DataSource = returnds
            Me.gvReorder.DataBind()
            returnds.Clear()
        Catch ex As Exception
            label.visible = true
            label.text = "Error: " & ex.Message
        End Try

    Next 
```

当 IP1 结果是 SKU 和 IP2 结果 SKU 而不尝试合并多个数据集时，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T16:12:25.993

我可以通过编辑数据表来做到这一点：

```
Dim tmpEditRow As DataRow = tmpReturnRows(0)

                    tmpEditRow.BeginEdit()

                    Select Case a

                        Case 0

                            tmpEditRow("Qsold / QoH1") = QtySold & " / " & QtyOH

                        Case 1

                            tmpEditRow("Qsold / QoH3") = QtySold & " / " & QtyOH

                        Case 2

                            tmpEditRow("Qsold / QoH4") = QtySold & " / " & QtyOH

                        Case 3

                            tmpEditRow("Qsold / QoH7") = QtySold & " / " & QtyOH

                        Case 4

                            tmpEditRow("Qsold / QoH8") = QtySold & " / " & QtyOH

                        Case 5

                            tmpEditRow("Qsold / QoH10") = QtySold & " / " & QtyOH

                        Case 6

                            tmpEditRow("Qsold / QoH12") = QtySold & " / " & QtyOH

                        Case 7

                            tmpEditRow("Qsold / QoH14") = QtySold & " / " & QtyOH

                    End Select

                    tmpEditRow.EndEdit() 
```

# asp.net-mvc - 在 ASP.Net MVC4 中的一页上的多个下拉列表中填充多个表数据

> ID：13607861
> 
> 赞同：0
> 
> 时间：2012-11-28T14:50:24.990
> 
> 标签：asp.net-mvc, controller, asp.net-mvc-4, html.dropdownlistfor

作为新手，请原谅我的琐碎问题。(ASP.Net MVC4)

在阅读了很多帖子/教程后，我仍然不确定如何处理。我想做的是在我的**索引**页面上有三个**下拉列表。**例如，**国家、公司、分公司**。我有相同的数据模型，它们使用 EF 链接到我的数据库。我设法仅列出索引页面上的所有数据。但是我需要它们在下拉列表中。

 ****问题是如何为此创建控制器？目前控制器看起来像：

```
public class HomeController : Controller
{
    private CorpCostEntities db = new CorpCostEntities();

    public ActionResult Index()
    {
        return View();
    }

    ...
    ...

} 
```

我是否需要为每个表创建单独的**ActionResult**方法来填充数据？或者我是否对 Index() 使用方法重载，例如 Index(Country country)、Index(Company comp)、Index(Branch branch)？

下一个问题是，由于会有不同的 ActionResult 方法，我是否需要为此创建单独的视图？我正在使用简单的 MVC 结构。我没有 ViewModel 或 MVC 以外的其他东西。

首先为多个下拉列表创建控制器然后在现有视图页面中显示它们的方法到底是什么？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:42:13.190

不，您不需要为每种类型单独操作，我只需将这些值扔到 ViewBag 中并在视图中读取（[这是将其加载到下拉元素中](https://stackoverflow.com/questions/9642821/mvc3-dropdownlist-viewbag-issue)的方法）：

公共类 HomeController ：控制器 { 私有 CorpCostEntities 数据库；

```
public HomeController(){
db = new CorpCostEntities();
ViewBag.CountryList = db.GetCountryList();
ViewBag.CompanyList = db.GetCompanyList();
ViewBag.BranchList = db.GetBranchList();
}
public ActionResult Index()
{
    return View();
} 
```

}

关于“下一个问题是因为会有不同的 ActionResult 方法，我是否需要为此创建单独的视图？”，我有点不清楚你在问什么，但我会假设一下......将您的 (GET)ActionResults 视为页面（您的操作方法不仅被锁定为返回“页面”，还请耐心等待）。假设您有一个显示客户列表的操作“索引”，您将拥有索引操作和索引视图。现在，添加一个 Edit 屏幕，这将是另一个 Action、Edit 和 View、Edit.cshtml。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T13:28:00.723

您可能还需要考虑创建一个 ViewModel (CorpCastViewModel)，其中包含呈现视图所需的所有对象。

然后，您将拥有实际 CorpCostModel 的属性，以及您的查找集合的属性和您在视图中需要的其他内容。

您可以按如下方式创建一个编辑器：@Html.EditorFor(model => model.CorpCostModel.SomeField) 和一个列表框为@Html.DropDownListFor(model => model.CorpCostModel.CorpCountryId, new SelectList(Model.CountryList, "CountryId “， “国家的名字”）， ””）****

# ruby - Ruby 的非线性或二次规划求解器

> ID：13607864
> 
> 赞同：1
> 
> 时间：2012-11-28T14:50:32.100
> 
> 标签：ruby, algorithm, optimization, solver

有谁知道 Ruby 的非线性或二次规划求解器？或将红宝石连接到非线性求解器的方法？

我很感激任何帮助，

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:40:13.720

Ruby/GSL gem ( [rb-gsl)](http://rb-gsl.rubyforge.org/)有一个[非线性求解器](http://rb-gsl.rubyforge.org/files/rdoc/nonlinearfit_rdoc.html)。

尝试安装该 gem 并遵循其文档中的代码示例。

# html - 锚点内的图像和跨度之间显示空间

> ID：13607865
> 
> 赞同：2
> 
> 时间：2012-11-28T14:50:36.030
> 
> 标签：html, css

[http://jsfiddle.net/mblase75/CdX2b/](http://jsfiddle.net/mblase75/CdX2b/)

HTML：

```
<figure class="onecolumn buttoncaption">
    <a href="ss.html"><img src="http://i.imgur.com/NEMwO.jpg" width="230" height="140" alt="photo">
    <span class="caption">Oswego<br>Panda Express</span></a>
</figure>​ 
```

小提琴中有很多 CSS，但给我带来麻烦的部分是`<a>`标签上的渐变：

```
background: #BB233C;
background: -moz-linear-gradient(top, #7F1527 0%, #BB233C 100%);
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#7F1527), color-stop(100%,#BB233C)); 
```

...等等。我无法让渐变在图像下方停止显示——如果它是纯红色，那将不是问题，但它是深红色和浅色之间的可见变化。

如果我从 中删除渐变`<a>`并将其仅应用于`<span>`，则图像和跨度之间仍然存在不需要的空间。这是我真正想要摆脱的空间。

关于是什么原因的任何想法？我尝试将边距、填充和行高设置为零，没有任何变化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T15:00:40.190

终于找到了解决方案——我需要添加`display:block;`到图像中（它已经应用于跨度）。这样做完全消除了空间。

[http://jsfiddle.net/mblase75/CdX2b/3/](http://jsfiddle.net/mblase75/CdX2b/3/)

# blackberry-10 - Blackberry10 级联 onClick

> ID：13607871
> 
> 赞同：1
> 
> 时间：2012-11-28T14:50:57.843
> 
> 标签：blackberry-10

我在 BB-10 中尝试了 onClick 功能，而单击时我无法通过单击功能推送另一个 qml 文件

```
Button {
                text: "LOG IN"
                onClicked: {
                    var test = screen.createObject();
                     navigationPane.push(test);
                }
                attachedObjects: ComponentDefinition {
                    id: screen
                    source: "y.qml"
                }
            } 
```

代码y.qml如下

```
 TabbedPane {
showTabsOnActionBar: true
Tab {
    title: "Home"
    Page {
        id: page1
        actions: [
            ActionItem {
                title: "New"
            },
            ActionItem {
                title: "Delete"
            }
        ]
    }
}
Tab {
    title: "Options"
    Page {
        id: page2
        actions: [
            ActionItem {
                title: "Edit"
            },
            ActionItem {
                title: "Save"
            }
        ]
    }
} 
```

单击（文本：“登录”）按钮时我无法查看“y.qml”，任何人都可以发送一些解决方案来解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:13:46.180

您不能从导航页面推送选项卡式窗格，您只能推送一个页面；但在 TabbedPane 中，您可以拥有导航窗格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T09:24:53.280

您无法将导航窗格推送到选项卡式窗格，您可以在选项卡内添加导航窗格，如下所示

```
 Tab {
    id: loginregisterTab
    NavigationPane {
             peekEnabled: false
         id: test
        y{//here u can go to y.qml
        }
    }
} 
```

在 y.qml 中，你已经包含了类似的 id

```
NavigationPane{
 id: navigationPane
   Page {
    Container {
        id: test
  }
  }
 } 
```

# python - 如何在 Windows 7 的 virtualenv 中安装 web2py？

> ID：13607873
> 
> 赞同：4
> 
> 时间：2012-11-28T14:50:58.453
> 
> 标签：python, windows-7, virtualenv, web2py, pywin32

我是 Python 新手，我正在尝试在 virtualenv 中安装 web2py。我在 64 位 Windows 7 上运行 32 位 python 2.7.3 安装。

根据我的阅读，这应该是过程：

*   安装 virtualenv（完成）
*   创建 virtualenv（完成）
*   在那个环境中安装 pywin32（我已经读过它需要在 web2py 安装之前安装）
*   在该环境中安装 web2py

首先也是最重要的：对吗？如果是这样，那么...

我尝试通过安装 pywin32

'''easy_install pywin32-218.win32-py2.7.exe'''

一切顺利。然后，我检查了虚拟环境的站点包中的 pywin32 文件夹，它在那里，但我无法将它导入 python（'''ther's no module pywin32'''）。环境绝对是活跃的（我仔细检查过）。

作为测试，在不使用 virtualenv 的情况下，我双击安装了 pywin32 二进制文件（下载了 python 2.7 的 32 位版本——pywin32-218.win32-py2.7.exe），但最后出现错误：

'''在文件对象析构函数中关闭失败：

sys.excepthook 丢失

丢失 sys.stderr'''

我再次下载了文件（可能已损坏），尝试再次安装但得到相同的结果。

任何人都可以指导我或指向我逐步安装 pywin32（如有必要），然后为 windows 7 安装 web2py 吗？我真的很感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T09:29:18.990

这是一个错误： http: [//sourceforge.net/tracker/](http://sourceforge.net/tracker/?func=detail&aid=3402824&group_id=78018&atid=551954) ?func=detail&aid=3402824&group_id=78018&atid=551954 ，解决方法在这里： http: [//pywin32.hg.sourceforge.net/hgweb/pywin32/pywin32/rev/a64d8ac23e61](http://pywin32.hg.sourceforge.net/hgweb/pywin32/pywin32/rev/a64d8ac23e61) 类似对此：[安装和运行 pywin32 2.7 时出错](https://stackoverflow.com/questions/11106281/error-installing-and-running-pywin32-2-7)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-02T14:38:39.877

根据我的经验，`easy_install pywin32-218.win32-py2.7.exe`活动 virtualenv 下的命令可以正常工作。

要测试 pywin32 的安装，您可以从 python 尝试：

```
from win32api import GetVersionEx
print GetVersionEx() 
```

获取类似于（Windows 主要版本、次要版本、内部版本号、平台 ID、附加信息）的内容：

```
(6, 1, 7601, 2, 'Service Pack 1') 
```

您无法导入模块`pywin32`，因为它不存在。

安装完pywin32之后，就可以在active virtualenv下安装web2py了（我测试到打开admin界面，之后就不保证了:-)：

*   [从http://www.web2py.com/init/default/download](http://www.web2py.com/init/default/download)下载源代码
*   将其解压缩到（获得：）`...\`*`virtualenvdir`*`\Lib\site-packages\``...\`*`virtualenvdir`*`\Lib\site-packages\web2py\...`
*   光盘到`...\`*`virtualenvdir`*`\Lib\site-packages\web2py`
*   启动 web2py 服务器：`python web2py.py`

当时，我无法使用`pip`. 首先，它从 PyPy 中获取旧版本的 web2py。当我尝试使用这个版本的 web2py 时，我得到了一个错误`ImportError: No module named ...`。在 web2py 源文件的副本上使用 pip 也是如此。

# objective-c - 为什么我的 NSTimer 不工作？

> ID：13607875
> 
> 赞同：1
> 
> 时间：2012-11-28T14:51:04.603
> 
> 标签：objective-c, nstimer

我想反复调用函数 foo 但 nstimer 不工作。你能帮帮我吗？

```
@implementation abc
-(id)init
{
   [NSTimer scheduledTimerWithTimeInterval:(1/16) target:self selector:@selector(foo) userInfo:nil repeats:YES];
} 
```

这是我的主要

```
int main(int argc, char *argv[])
{
    abc *ab=[[abc alloc]init];

    [NSThread sleepForTimeInterval:100];

    [ab release];

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T15:07:34.390

它不起作用，因为`[NSTimer scheduledTimerWithTimeInterval:...]`（[参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html)）指出：

> 创建并返回一个新的 NSTimer 对象，并以默认模式将其安排在当前运行循环中。

...而且您**没有运行循环**。

例如，您可以创建一个实例`NSApplication`（即一个适当的 Cocoa 应用程序）以使其工作（您可以创建自己的运行循环而不创建 Cocoa 应用程序，但这将是相当多的工作）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-28T14:54:19.317

试试这行代码（1.0/16 而不是 1/16）：

```
[NSTimer scheduledTimerWithTimeInterval:(1.0/16) target:self selector:@selector(foo) userInfo:nil repeats:YES]; 
```

# javascript - 在功能上寻找具有上下功能的圆形进度条

> ID：13607881
> 
> 赞同：0
> 
> 时间：2012-11-28T14:51:30.133
> 
> 标签：javascript, jquery, progress-bar, jquery-knob

我正在为我的网站寻找圆形进度条，

当用户靠近和远离路由器时，我需要进度条来显示路由器的输出功率，所以我需要一个进度条来在功能上上下移动。

我找到了这两个，但是我在实现它们以供我使用时遇到了问题，

[http://widgets.better2web.com/loader/](http://widgets.better2web.com/loader/)

[http://anthonyterrien.com/knob/](http://anthonyterrien.com/knob/)

有人知道更多好的进度条插件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:53:43.367

[http://jqueryui.com/progressbar/](http://jqueryui.com/progressbar/) - 从源头开始；）。如果您遇到实施困难，您应该将您遇到的具体问题作为问题发布。

# macos - OSX - 禁用系统范围的触摸手势

> ID：13607882
> 
> 赞同：11
> 
> 时间：2012-11-28T14:51:33.520
> 
> 标签：macos, cocoa, osx-lion, osx-mountain-lion, iokit

我需要在 Mac OS 上以编程方式禁用/抑制系统范围的触摸手势。我指的是手势，例如空格之间的四指滑动等。

我已经查看了 EventTap 但这似乎不是一个选项（尽管之前的报告在这里 - 也许它在 10.8 下更改了）

我还尝试了多种以编程方式更改系统首选项的方法。例如，我尝试在使用 IORegistryEntryCreateCFProperties 定位的服务上使用 IOConnectSetCFProperties。

我还深入研究了触控板首选项窗格，看看他们是如何做到的，并尝试重现它（忽略任何创建/发布的不一致，这只是测试代码）：

```
 NSInteger zero = 0;
    CFNumberRef numberWith0 = CFNumberCreate(kCFAllocatorDefault, kCFNumberNSIntegerType, &zero);

    CFMutableDictionaryRef propertyDict = CFDictionaryCreateMutable(kCFAllocatorDefault, 0,
                                                                    &kCFTypeDictionaryKeyCallBacks,
                                                                    &kCFTypeDictionaryValueCallBacks);

    CFDictionarySetValue(propertyDict, @"TrackpadFourFingerHorizSwipeGesture", numberWith0);

    io_connect_t connect = getEVSHandle(); // Found in the MachineSettings framework

    if (!connect)
    {
        NSLog(@"Unable to get EVS handle");
    }

    kern_return_t status = IOConnectSetCFProperties(connect, propertyDict);

    if (status != KERN_SUCCESS)
    {
        NSLog(@"Unable to get set IO properties");
    }

    CFRelease(propertyDict);
    CFPreferencesSetValue(CFSTR("com.apple.trackpad.fourFingerHorizSwipeGesture"), _numberWith0, kCFPreferencesAnyApplication, kCFPreferencesCurrentUser, kCFPreferencesCurrentHost);

    CFPreferencesSetValue(CFSTR("TrackpadFourFingerHorizSwipeGesture"), _numberWith0, CFSTR("com.apple.driver.AppleBluetoothMultitouch.trackpad"), kCFPreferencesCurrentUser, kCFPreferencesCurrentHost);

    CFPreferencesSynchronize(kCFPreferencesAnyApplication, kCFPreferencesCurrentUser, kCFPreferencesCurrentHost);

    status = BSKernelPreferenceChanged(CFSTR("com.apple.driver.AppleBluetoothMultitouch.trackpad")); 
```

在这种情况下，它似乎可以工作，没有错误，并且该选项在系统偏好设置窗格中被禁用，但是四指手势继续工作。我怀疑注销然后登录会产生影响，但我没有尝试过，因为无论如何这还不够好。

值得注意的是，Pref Pane 本身也调用了 BSKernelPreferenceChanged，但我不知道可能是哪个框架才能链接到它。也许这就是问题的关键……

更新：实际上我现在已经找到它并将其链接到。添加该调用没有任何区别，尽管它返回 1 可能表示错误。我已将调用添加到上面的代码中。

最后我从终端尝试了这个：

```
defaults write -globalDomain com.apple.trackpad.fourFingerHorizSwipeGesture 0
defaults write  com.apple.driver.AppleBluetoothMultitouch.trackpad TrackpadFourFingerHorizSwipeGesture 0 
```

这也没有立竿见影的效果。

我不相信这是不可能的，一定有办法......

不需要 MAS 兼容性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T15:30:15.833

我也在尝试这样做。

事件点击不起作用，具有作为第一响应者的视图也不起作用。

来自苹果文档：

> 但是，有某些系统范围的手势，例如四指滑动。系统实现优先于应用程序执行的任何手势处理。

我能够停止系统范围手势的唯一方法是使用`CGDisplayCapture`. 这使我的应用程序可以独占访问所有事件……而且还提供全屏绘图上下文。

进入此模式时，也许可以看到对石英事件服务的调用

[https://developer.apple.com/library/mac/#documentation/graphicsimaging/Conceptual/QuartzDisplayServicesConceptual/Articles/DisplayCapture.html](https://developer.apple.com/library/mac/#documentation/graphicsimaging/Conceptual/QuartzDisplayServicesConceptual/Articles/DisplayCapture.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T16:51:14.527

我认为您正在寻找禁用触摸事件的错误位置。OSX（和许多其他系统）的方式是视图链中处理事件的第一个响应者将阻止事件传播。您需要在视图中为要处理的每个触摸事件编写事件处理程序，如果它们存在，操作系统将停止发送事件，一直到 finder 或下一个处理触摸的任何其他应用程序事件。

请参阅：http: [//developer.apple.com/library/mac/#documentation/cocoa/conceptual/EventOverview/HandlingTouchEvents/HandlingTouchEvents.html](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/EventOverview/HandlingTouchEvents/HandlingTouchEvents.html)

具体来说：处理多点触控事件（调用 setAcceptsTouchEvents，然后实现 touches...WithEvent...）

希望有帮助！

# .htaccess - RedirectMatch：删除问号

> ID：13607887
> 
> 赞同：2
> 
> 时间：2012-11-28T14:51:46.197
> 
> 标签：.htaccess, redirect

我正在使用 将旧网站重定向到新 URL `RedirectMatch`。（我不需要保留原始查询字符串，因此最后是“？”）。

`RedirectMatch 301 ^/cms/index.php$ http://www.mysite.com?`

重定向有效，但是在重定向后，我在结束 URL 处留下了一个难看的问号：

`www.mysite.com?`

有什么办法可以去掉吗？

编辑：我正在输入我正在使用的 .htacces 文件：

```
RedirectMatch 301 ^/cms/index.php$ http://www.mysite.com?

# BEGIN WPSuperCache
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
AddDefaultCharset UTF-8
RewriteCond %{REQUEST_METHOD} !POST
RewriteCond %{QUERY_STRING} !.*=.*
RewriteCond %{HTTP:Cookie} !^.*(comment_author_|wordpress_logged_in|wp-postpass_).*$
RewriteCond %{HTTP:X-Wap-Profile} !^[a-z0-9\"]+ [NC]
RewriteCond %{HTTP:Profile} !^[a-z0-9\"]+ [NC]
RewriteCond %{HTTP:Accept-Encoding} gzip
RewriteCond %{DOCUMENT_ROOT}/wp-content/cache/supercache/%{HTTP_HOST}/$1/index.html.gz -f
RewriteRule ^(.*) "/wp-content/cache/supercache/%{HTTP_HOST}/$1/index.html.gz" [L]

RewriteCond %{REQUEST_METHOD} !POST
RewriteCond %{QUERY_STRING} !.*=.*
RewriteCond %{HTTP:Cookie} !^.*(comment_author_|wordpress_logged_in|wp-postpass_).*$
RewriteCond %{HTTP:X-Wap-Profile} !^[a-z0-9\"]+ [NC]
RewriteCond %{HTTP:Profile} !^[a-z0-9\"]+ [NC]
RewriteCond %{DOCUMENT_ROOT}/wp-content/cache/supercache/%{HTTP_HOST}/$1/index.html -f
RewriteRule ^(.*) "/wp-content/cache/supercache/%{HTTP_HOST}/$1/index.html" [L]
</IfModule>

# END WPSuperCache

RewriteCond %{HTTP_HOST} ^mysite.com$
RewriteRule ^(.*)$ "http\:\/\/www\.mysite\.com\/$1" [R=301,L]

# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

**编辑**：最后我使用 anubhava 建议让它工作。但我必须在文件夹中创建一个单独`.htaccess`的`/cms`文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:56:17.873

使用如下代码更好地使用 mod_rewrite：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^cms/index\.php$ http://www.mysite.com/? [L,R=301,NC] 
```

# xml - XPATH：如何选择不同级别的节点？

> ID：13607892
> 
> 赞同：1
> 
> 时间：2012-11-28T14:52:07.727
> 
> 标签：xml, xpath, selection

我想通过 XPATH 做的是检索名称为 Poly 1 的地标的坐标。这可能是一个非常简单的问题，但我对 XPATH 的了解是有限的，而且我对名称和坐标之间存在额外标签的事实感到困惑（“多边形”）

如您所见，可以有一个或多个元素，我想全部检索它们。

```
<?xml version="1.0" encoding="UTF-8"?>
<kml>
<Document>
       <Placemark>
            <name>Poly 1</name>
            <Polygon>
                        <coordinates>
                            -58.40844625779582,-34.60295278618136,0
                        </coordinates>
                        <coordinates>
                            -68.40844625779582,-77.60295278618136,0
                        </coordinates>

            </Polygon>
        </Placemark>
        <Placemark>
            <name>Poly 2</name>
            <Polygon>
                        <coordinates>
                            -58.40414334150432,-34.59992445476809,0
                        </coordinates>
            </Polygon>
        </Placemark>
</Document>
</kml> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:57:11.857

此 XPATH 表达式将获取您的坐标节点

```
//Placemark[./name[text()='Poly 1']]//coordinates 
```

这是它的工作原理：

*   `//Placemark`选择所有地标标签
*   `//Placemark[./name]`选择具有名称子标签的所有地标标签
*   `//Placemark[./name[text()='Poly 1']]`选择所有带有名称子标签的地标标签，其中名称标签包含文本`Poly 1`。

# javascript - javascript中for循环中的碰撞/重叠

> ID：13607893
> 
> 赞同：1
> 
> 时间：2012-11-28T14:52:12.610
> 
> 标签：javascript, collision-detection

我正在可汗学院为一个学校项目编写太空入侵者游戏，但我不知道如何在子弹和外星人之间进行碰撞，然后摆脱子弹与之相撞的外星人。这是非常基本的 JS，尽管我已经尝试过，但我真的不明白如何将关于这个主题的其他答案放入我的代码中。如果有人能在这方面帮助我，我将不胜感激。

这是游戏的链接：[http ://www.khanacademy.org/cs/space-invaders/1087897437](http://www.khanacademy.org/cs/space-invaders/1087897437)

我在这里有另一个有同样问题的游戏：[http ://www.khanacademy.org/cs/brick/1176464164](http://www.khanacademy.org/cs/brick/1176464164)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:11:38.223

在这两种情况下，游戏都需要在 while 循环中运行。基本上，每次迭代都会将游戏向前推进一个“帧”。从一帧到下一帧要计算的事情之一是子弹是否触及外星人。

子弹和外星人都占据了物理空间。因此，您可以有效地循环遍历所有子弹，并拥有一个检查子弹是否击中外星人的功能。

```
function has_hit_alien(bullet) {
  for(var i = aliens.size; i > 0; i--){
    if(same_space(bullet, aliens[i]) {
      return aliens[i]
    }
  }
} 
```

现在您需要实现 same_space 函数来检查参数 1 的任何外部像素是否在参数 2 内部。

# php - 如何按页面返回结果集zend框架2

> ID：13607894
> 
> 赞同：0
> 
> 时间：2012-11-28T14:52:13.170
> 
> 标签：php, frameworks, zend-framework2

我是 Zend 框架 2 的新手

[大家好，我正在学习使用 Skeleton App http://framework.zend.com/manual/2.0/en/user-guide/skeleton-application.html](http://framework.zend.com/manual/2.0/en/user-guide/skeleton-application.html)的本 zend 框架教程

我完成了，但现在我有一个问题如果我在相册表中有成千上万行如何按页面检索它们？

我看到一个叫做分页器的东西我不知道这是否是正确的方法....

如果您发布使用它的方式或一些代码，我将不胜感激....

提前谢谢你对不起我的英语不好......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:11:22.327

查看[Zend_Paginator](http://framework.zend.com/manual/1.12/en/zend.paginator.usage.html) 它几乎完全符合您的要求。

从手册：

```
$adapter = new Zend_Paginator_Adapter_DbSelect($db->select()->from('posts'));
$adapter->setRowCount(
    $db->select()
       ->from(
            'item_counts',
            array(
               Zend_Paginator_Adapter_DbSelect::ROW_COUNT_COLUMN => 'post_count'
            )
         )
);

$paginator = new Zend_Paginator($adapter); 
```

我建议查看有关此的[教程](http://tv.xoofoo.org/modules/mytube/singlevideo.php?cid=47&lid=348)

# vb.net - VB.net 按对象名称排序 Arraylist

> ID：13607897
> 
> 赞同：2
> 
> 时间：2012-11-28T14:52:30.917
> 
> 标签：vb.net, sorting, arraylist

尝试按对象名称对数组列表进行排序

```
Dim ObjList as new arraylist
Dim TextBox1 as new textbox
Textbox1.name = "CCC"
Dim TextBox2 as new textbox
Textbox1.name = "AAA"
Dim TextBox3 as new textbox
Textbox1.name = "BBB"
ObjList.add(TextBox1)
ObjList.add(TextBox2)
ObjList.add(TextBox3)
ObjList.sort() 
```

排序会产生错误。我将如何按名称对文本框进行排序，使其看起来像 AAA BBB CCC

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T15:05:45.887

您必须创建一个[`IComparer`](http://msdn.microsoft.com/en-us/library/system.collections.icomparer.aspx)并将其传递给该[`Sort`](http://msdn.microsoft.com/en-us/library/0e743hdt.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-2)方法：

```
Class TextBoxComparer 
    Implements IComparer

    Public Function Compare(x As Object, y As Object) As Integer Implements IComparer.Compare
        Return String.Compare(x.Name, y.Name)
    End Function

End Class

...

ObjList.Sort(New TextBoxComparer()) 
```

* * *

或者，如果您可以切换到[`List(Of TextBox)`](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)，一个匿名函数（匹配[Comparison(Of T)](http://msdn.microsoft.com/en-us/library/tfakywbh.aspx)委托）也可以：

```
Dim ObjList As New List(Of TextBox)

...

ObjList.Sort(Function(x, y) String.Compare(x.Name, y.Name)) 
```

# objective-c - 如何设置弹出框的大小？

> ID：13607898
> 
> 赞同：1
> 
> 时间：2012-11-28T14:52:30.603
> 
> 标签：objective-c, ios, ipad, popover

我在呈现弹出框时遇到了奇怪的问题，我想设置弹出框的大小并在键盘出现后手动调整它的大小。我在第一步中遇到了问题，我在其中展示了弹出框：

```
- (void) showPopover:(id)sender {
    if (!self.detailPopoverController) {
        TableViewController* tvc = [[TableViewController alloc] init];
        tvc.contentSizeForViewInPopover = CGSizeMake(500, 500);
        self.detailPopoverController = [[[UIPopoverController alloc] initWithContentViewController:tvc] autorelease];
        self.detailPopoverController.popoverContentSize = CGSizeMake(500, 500);
        [tvc release];
    }
    [self.detailPopoverController presentPopoverFromBarButtonItem:sender permittedArrowDirections:UIPopoverArrowDirectionLeft animated:YES];
} 
```

我以两种方式将大小设置为 500*500，但弹出框的宽度为 500，但高度仅为 247。

```
<UITableView: 0x7969e00; frame = (0 0; 500 247); clipsToBounds = YES; autoresize = W+H; gestureRecognizers = <NSArray: 0x7192660>; layer = <CALayer: 0x7197340>; contentOffset: {0, 0}> 
```

如何设置弹出框的大小以及如何在不再次显示的情况下调整它的大小？

谢谢你的帮助！

# javascript - 单击链接时如何停止 youtube 视频？

> ID：13607903
> 
> 赞同：1
> 
> 时间：2012-11-28T14:52:51.517
> 
> 标签：javascript, jquery, youtube-api

我已经用谷歌搜索了一段时间，但我的问题没有得到任何好的结果。我还多次准备了来自 gdocs 的 youtube api 参考。

我试图通过单击链接来停止 youtube 视频。

html:

```
<div class="box_filme rel_trailer">
    <iframe id="iframe_player" width="420" height="315" src="http://www.youtube.com/embed/8Af372EQLck?enablejsapi=1&version=3&playerapiid=ytplayer" frameborder="0" allowfullscreen></iframe>
</div> 
```

脚本源：

```
<script type="text/javascript" src="http://www.youtube.com/iframe_api"></script> 
```

我正在尝试的 js 代码：

```
$(function(){
   $('.info_filme .filme').click(function(){
        $('iframe_player').stopVideo();
   });
}); 
```

放置点击的 html 的一部分

```
<ul class="info_filme">
    <li><a class="filme sinopse active" data-info="rel_sinopse">Sinopse</a></li>
    <li><a class="filme trailer" data-info="rel_trailer">Trailer</a></li>
    <li><a class="site" href="">Site</a></li>
</ul> 
```

事实上，我成功地从 js 调用了 url 链接，但我必须使用 iframe，我不知道我做错了什么。如果有人可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T03:22:05.070

问题是您调用`.stopVideo()`的是 jQuery 对象，而不是 YouTube 播放器对象。YouTube API 不会将其控制功能导出到 iframe 元素，当然也不会导出到 jQuery。

与其自己创建 iframe，不如让 YouTube API 为您完成，就像YouTube iframe API 文档中的[基本示例一样。](https://developers.google.com/youtube/iframe_api_reference#Getting_Started)

```
 var player = new YT.Player($('.rel_trailer')[0], {
      height: '315',
      width: '420',
      videoId: '8Af372EQLck',
      events: {
        'onReady': function() {
            $('.info_filme .filme').click(function(){
                player.stopVideo();
            });
        },
        'onStateChange': onPlayerStateChange
      }
    }); 
```

传递给的第一个参数`YT.Player`是您希望 YouTube 在其中放置视频的 DOM 元素。

YouTube API 有点棘手，因为它所做的很多事情都是异步的。如果您想要更简单的东西，Popcorn.js 可以将 YouTube 播放器包装在一个模仿 HTML 视频元素的 API 中（正如我在[这个答案](https://stackoverflow.com/questions/13516345/howto-play-youtube-videos-via-html5-video-tag/13544295#13544295)中描述的那样）。

您需要加载这些脚本：

```
<script type="text/javascript" src="popcorn.js"></script>
<script type="text/javascript" src="popcorn._MediaElementProto.js"></script>
<script type="text/javascript" src="popcorn.HTMLYouTubeVideoElement.js"></script> 
```

你可以[在这里](https://github.com/hapyak/popcorn-js/blob/feature/youtube/popcorn.js)、[这里](https://github.com/hapyak/popcorn-js/blob/feature/youtube/wrappers/common/popcorn._MediaElementProto.js)和[这里](https://github.com/hapyak/popcorn-js/blob/feature/youtube/wrappers/youtube/popcorn.HTMLYouTubeVideoElement.js)得到它们。（这个 repo 是 YouTube 官方 Popcorn repo 之前的一些错误修复。）

接下来，只需为视频提供一个空元素。

```
<div class="box_filme rel_trailer"></div> 
```

现在，创建包装器并附加点击处理程序。

```
var video = Popcorn.HTMLYouTubeVideoElement($('.rel_trailer')[0]);
video.src = 'http://www.youtube.com/watch?v=8Af372EQLck';

$('.info_filme .filme').click(function(){
    video.pause();
}); 
```

Popcorn 将处理加载 YouTube 的 API 以及随后的所有异步事件。如果您不打算使用 Popcorn 的主要注释功能，则需要加载大量不必要的 javascript，但如果您不想被 YouTube 的 API 困扰，它会为您节省大量时间。如果您想获得来自多个来源（例如 HTML5、Vimeo）的视频，您将能够轻松地调整代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T15:02:55.197

为什么不将视频嵌入到您的页面中，如下所示？

```
<embed id="playerid" width="100%" height="100%" allowfullscreen="true" allowscriptaccess="always" quality="high" bgcolor="#000000" name="playerid" style="" src="http://www.youtube.com/apiplayerbeta?enablejsapi=1&playerapiid=normalplayer" type="application/x-shockwave-flash"> 
```

然后，您可以使用以下方法停止视频：

```
var myPlayer = document.getElementById('playerid');

<a href="#" onclick="myPlayer.stopVideo();">Stop Video</a> 
```

# c# - 在详细信息页面上记录导航

> ID：13607904
> 
> 赞同：0
> 
> 时间：2012-11-28T14:52:53.350
> 
> 标签：c#, asp.net-mvc-3

我很确定我在这段代码片段上是正确的，但我想要做的是在页面上显示一个特定的记录，它有一个导航控件，允许你转到下一个和上一个记录（修改版本在 MVC3 中生成的详细信息视图页面）。

当我导航到页面时，代码通过 ViewBag 变量初始化 ActionLink 按钮，并在相应控制器内的此方法中设置。

我的问题是，是否有更好的方法来执行以下操作，同时防止超出数据库记录范围的问题？

```
public ViewResult Details(int id)
{
    //Conditional Statements to manage navigation controls
    if (db.tblQuoteLog.OrderByDescending(x => x.LogDate).Any(x => x.nID < id))
    {
        //Set value next button
        ViewBag.NextID = id;

        ViewBag.PreviousID = db.tblQuoteLog.OrderByDescending(x => x.LogDate).FirstOrDefault(x => x.nID > id).nID; //Inverted logic due to orderby
    }
    else if (db.tblQuoteLog.OrderByDescending(x => x.LogDate).Any(x => x.nID > id))
    {
        ViewBag.NextID = db.tblQuoteLog.OrderByDescending(x => x.LogDate).FirstOrDefault(x => x.nID < id).nID; //Inverted logic due to orderby

        //Set value previous button
        ViewBag.PreviousID = id;
    }
    else
    {
        //Set value next button
        ViewBag.NextID = db.tblQuoteLog.OrderByDescending(x => x.LogDate).FirstOrDefault(x => x.nID < id).nID;

        //Set value previous button
        ViewBag.PreviousID = db.tblQuoteLog.OrderByDescending(x => x.LogDate).FirstOrDefault(x => x.nID > id).nID;
    }

    tblQuoteLog tblquotelog = db.tblQuoteLog.Find(id);

    return View(db.tblQuoteLog.Where(x => x.nID == id).FirstOrDefault());
} 
```

**编辑** 我对我的逻辑进行了更改，这似乎从迈克给出的想法中可以正常工作（可能不整洁，但它更小）。

```
 //EOF is set to true if no records are found.
        var nextRecord = (from r in db.tblQuoteLog
                          orderby r.Quote_ID descending
                          where r.Quote_ID < id
                          select new
                          {
                              Quote_ID = r.Quote_ID,
                              EOF = false
                          }).Take(1).
                          FirstOrDefault() ?? new { Quote_ID = id, EOF = true };

        var previousRecord = (from r in db.tblQuoteLog
                              orderby r.Quote_ID ascending
                              where r.Quote_ID > id
                              select new
                              {
                                  Quote_ID = r.Quote_ID,
                                  EOF = false
                              }).Take(1).
                              FirstOrDefault() ?? new { Quote_ID = id, EOF = true };

        //Conditional Statements to manage navigation controls
        if ((nextRecord.EOF == true))
        {
            //Set value next button
            ViewBag.NextID = id;

            ViewBag.PreviousID = previousRecord.Quote_ID;
        }
        else if ((previousRecord.EOF == true))
        {
            ViewBag.NextID = nextRecord.Quote_ID;

            //Set value previous button
            ViewBag.PreviousID = id;
        }
        else
        {
            //Set value next button
            ViewBag.NextID = nextRecord.Quote_ID;

            //Set value previous button
            ViewBag.PreviousID = previousRecord.Quote_ID;
        } 
```

现在使用匿名类型在 Linq 查询中进行错误检查。我使用 EOF（文件结尾）标志，以便在未找到记录时将 ID 设置为当前记录，并将 EOF 设置为 true。

感谢您的建议：）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:39:38.720

从 id -1 中选择前 3 名怎么样？

```
 public ViewResult Details(int id)
{
    var items = db.tblQuoteLog.OrderByDescending(x => x.LogDate).Where(x => x.Id >= (id - 1)).Take(3);
} 
```

*   如果结果中有 3 个项目，您将拥有上一个、下一个和当前
*   如果结果中有 2 项，则您的 id 是最后一页
*   如果有 1 或 0 项，则您的 id 无效

可能需要更多思考（例如，如果您的 id < 2 怎么办），但这是一条潜在的路径

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T20:51:34.927

我认为这是一个很好的挑战，所以我打开笔记本电脑试了一下。

我沿着我的第一个答案的路线走，但实际上为了有 2 个查询而不是 3 个查询，它产生了很多糟糕的代码。所以我把它简化了。如果您在**Created**和**Id**列上都放置一个索引，这应该会很快工作。

**PageService**是您要查看的类。

```
class Program
{
    static void Main(string[] args)
    {
        Database.SetInitializer<MyDbContext>(null);

        var context = new MyDbContext(@"Data Source=.;Initial Catalog=Play;Integrated Security=True;");

        PageService service = new PageService(context);
        while (true)
        {
            Console.WriteLine("Please enter a page id: ");
            var pageId = Console.ReadLine();

            var detail = service.GetNavigationFor(Int32.Parse(pageId));

            if (detail.HasPreviousPage())
            {
                Console.WriteLine(@"Previous page ({0}) {1} {2}", detail.PreviousPage.Id, detail.PreviousPage.Name, detail.PreviousPage.Created);
            }
            else
            {
                Console.WriteLine(@"No previous page");
            }

            Console.WriteLine(@"Current page ({0}) {1} {2}", detail.CurrentPage.Id, detail.CurrentPage.Name, detail.CurrentPage.Created);

            if (detail.HasNextPage())
            {
                Console.WriteLine(@"Next page ({0}) {1} {2}", detail.NextPage.Id, detail.NextPage.Name, detail.NextPage.Created);
            }
            else
            {
                Console.WriteLine(@"No next page");
            }

            Console.WriteLine("");
        }

    }
}

public class PageService
{
    public MyDbContext _context;

    public PageService(MyDbContext context)
    {
        _context = context;
    }

    public NavigationDetails GetNavigationFor(int pageId)
    {
        var previousPage = _context.Pages.OrderByDescending(p => p.Created).Where(p => p.Id < pageId).FirstOrDefault();
        var nextPage = _context.Pages.OrderBy(p => p.Created).Where(p => p.Id > pageId).FirstOrDefault();
        var currentPage = _context.Pages.FirstOrDefault(p => p.Id == pageId);

        return new NavigationDetails()
        {
            PreviousPage = previousPage,
            NextPage = nextPage,
            CurrentPage = currentPage
        };
    }
}

public class NavigationDetails
{
    public Page PreviousPage { get; set; }
    public Page CurrentPage { get; set; }
    public Page NextPage { get; set; }

    public bool HasPreviousPage()
    {
        return (PreviousPage != null);
    }

    public bool HasNextPage()
    {
        return (NextPage != null);
    }
}

public class MyDbContext : DbContext
{
    public MyDbContext(string nameOrConnectionString)
        : base(nameOrConnectionString)
    {
    }

    public DbSet<Page> Pages { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Configurations.Add(new PageMap());
    }

}

public class PageMap : EntityTypeConfiguration<Page>
{

    public PageMap()
    {
        ToTable("t_Pages");

        Property(m => m.Id).HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);
        Property(m => m.Name);
        Property(m => m.Created);
    }

}

public class Page
{
    public int Id { get; set; }
    public string Name { get; set; }
    public DateTime Created { get; set; }
} 
```

}

**SQL 代码**

```
USE [Play]
GO

/****** Object:  Table [dbo].[t_Pages]    Script Date: 11/28/2012 20:49:34 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [dbo].[t_Pages](
    [Id] [int] IDENTITY(1,1) NOT NULL,
    [Name] [nvarchar](50) NOT NULL,
    [Created] [datetime] NULL,
 CONSTRAINT [PK_t_Page] PRIMARY KEY CLUSTERED 
(
    [Id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

GO 
```

# jquery - jQuery Fade In Fade Out 在 IE8 中使图像变黑

> ID：13607906
> 
> 赞同：1
> 
> 时间：2012-11-28T14:52:56.157
> 
> 标签：jquery, internet-explorer, windows-7, internet-explorer-8

我正在使用 jQuery 淡入和淡出图像，它可以在除 Windows 7 中的 IE8 之外的所有浏览器中找到。它会通过渐变将图像变为黑色，然后切换到正确的颜色。我该如何解决这个问题？

[http://webapps.easy2.com/ce/ext1108/iris_alarm.html](http://webapps.easy2.com/ce/ext1108/iris_alarm.html)

# c# - 性能通过 TCP 套接字客户端-服务器应用程序发送/接收数据

> ID：13607908
> 
> 赞同：3
> 
> 时间：2012-11-28T14:53:02.540
> 
> 标签：c#, performance, sockets, tcp, client-server

我正在开发一个系统，用于通过 TCP 使用套接字在客户端和服务器应用程序之间交换数据。

服务器是很久以前`C++`（由第三方）编写的，客户端是我仍在开发的应用程序`C#`。基地已经建成。两个应用程序都可以正常通信。问题是数据交换（在我看来）太慢了。

我强调*我的观点*是因为我不知道通过 TCP 使用套接字实际上可以期待什么。目前，目测，经过多次测试，接收和发送的通信速度平均为每秒 200/250 KB。

是否有应用程序可以让您评估特定端口上两个端点之间的数据交换速度？**我应该期待什么速度？**

更具体地说，客户端和服务器是为文件共享而开发的。目前，客户端一次只能接收和发送一个文件。该协议会以其他方式执行（一次接收/发送多个文件），但出于安全原因，我更喜欢其他方式（如果您接收到多个文件并且失去连接，您将丢失所有接收到的文件）。

**更改此功能会显着影响数据交换的速度吗？以什么方式？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:21:35.973

首先，您必须知道主机为您提供的链接的带宽，才能知道会发生什么。如果您自己托管，[您的上传速度可能比下载速度链接慢](https://superuser.com/questions/56795/upload-download-speed-difference)。您可以登录到您的服务器并运行[速度测试](http://www.speedtest.net/)。

我的情况与您类似（开发了一个服务器和一个客户端来向其发送二进制数据），到那时（2-3 年前）我使用了[这个工具](http://www.paessler.com/free_network_monitor)的一个版本来测量数据交换的速度。您可以将它安装在您的服务器上，设置监视器（您要监视的端口等），配置图表并让它运行一段时间。它工作得非常好。您可以寻找其他类似的工具搜索“带宽流量监视器”。

如果您允许您的应用程序同时交换多个文件，请记住您的链接速度将在连接之间进行划分，并且取决于有多少客户端正在使用您的应用程序，您的服务器将执行多个连接和文件写入除了带宽之外，它还可能受到其处理能力的限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T15:38:52.757

> 我应该期待什么速度？

两个节点之间的网络最慢部分可以传输的全速，减去该最慢部分上现有流量的带宽。在 100 Mbit LAN 上，我预计单向传输速度为 10 MB/s。

> 更改此功能会显着影响数据交换的速度吗？以什么方式？

这完全取决于所使用的协议以及客户端和服务器的实现。您必须对正在完成艰苦工作的地方进行基准测试，您的瓶颈在哪里。

# python - 在mongodb中保存python列表

> ID：13607913
> 
> 赞同：2
> 
> 时间：2012-11-28T14:53:17.487
> 
> 标签：python, mongodb

我正在尝试使用 pymongo 将 python 列表保存到 mongodb，但保存的文档有一个空值而不是列表。

```
db.testcoll.save({"test" : [12345]}) 
```

结果是

```
{ "_id" : ObjectId("50b53e7b71340f4ad774897a"), "test" : null } 
```

建议使用字典代替其他几个问题，但 dict 值也会导致 null。直接在 mongo 客户端中输入时，array 和 dict 值都可以正常工作。这是 pymongo 客户端中的已知差距吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:00:54.937

在我的*pymongo 2.2.1*上运行良好。这一定是早期*pymongo*版本中的一个问题。尝试升级它。

# json - 当某些返回值可能是对象或对象集合时，如何使用 GWT AutoBeans 解析 JSON 消息？

> ID：13607916
> 
> 赞同：0
> 
> 时间：2012-11-28T14:53:27.517
> 
> 标签：json, parsing, gwt, autobean

当返回的对象之一可能是集合但并非总是如此时，是否可以使用 GWT AutoBeans 解析 JSON 消息？

例如，如果我有一条返回作者及其相关著作的 JSON 消息，则可能返回零或多本书。

```
{ "name" : "William Gibson", "books" : { bookname : "Neuromancer" } } 
```

可能是一种回应，但也可能是这样：

```
{ "name" : "William Gibson", "books" : [ { bookname: "Neuromancer"}, { bookname : "Pattern Recognition" } ] } 
```

当我尝试使用用于编组 AutoBean 的接口对此进行建模时，如果只返回一本书，我会收到“预期索引数据”错误。

AutoBean 的接口：

```
public interface Author {
  @PropertyName(value="name")
  String getAuthorName();
  @PropertyName(value="book")
  List<String> getBooks();
} 
```

错误片段：

```
java.lang.AssertionError: Expecting indexed data
at com.google.web.bindery.autobean.shared.impl.SplittableList.<init>(SplittableList.java:64) 
```

这对 AutoBeans 来说是不可能的吗？

（注：使用 GWT 2.5.0 GA）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:11:13.377

如果您有`List`，AutoBeans 需要一个 JSON 数组。该数组可以包含零个、一个或多个元素，但它必须是一个数组（或不存在）。

我认为你可以让你的`getBooks`方法返回一个`Splittable`。然后您就可以知道它是否是一个数组 ( `isIndexed()`)。如果您需要数组包含对象，那么您必须迭代数组 ( `size()`and `get(int)`) 并将每个元素`AutoBeanCodex.decode()`传递给以对其进行解码（或者如果它不是数组，则直接传递可拆分表）。

# javascript - 从字符串中删除非拉丁字符

> ID：13607921
> 
> 赞同：7
> 
> 时间：2012-11-28T14:53:46.713
> 
> 标签：javascript, unicode

我正在尝试使用 Javascript 从字符串中删除非拉丁字符。我正在使用以下代码：

```
text.replace(/[\u0250-\ue007f]/g, '') 
```

我最初认为它工作正常，直到我发现它还从字符串中删除了 'f' 字符。有什么建议么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-28T14:56:11.683

试试这个：-

```
 text.replace(/[\u0250-\ue007]/g, ''); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-28T14:56:10.543

哎呀，我一定累了。发帖看了之后，我发现表达式末尾的'f'......

所以应该是

```
text.replace(/[\u0250-\ue007]/g, '') 
```

# jodatime - 日期到 LocalDateTime 到 DateTime 使用 jodatime 但如何添加时区

> ID：13607927
> 
> 赞同：4
> 
> 时间：2012-11-28T14:53:57.127
> 
> 标签：jodatime

我不在乎它是 MST 还是 MDT，但我有一个带有时间的 LocalDateTime 对象（即没有时区）。我想添加 MST 或 MDT 并创建一个 DateTime 对象，这样我就可以得到毫秒，因为存储的纪元和纪元的毫秒数当然是 UTC，就像 System.currentTimeMillis 是 UTC 一样。

那么有没有办法说 MountainTime 独立于储蓄或日光时间，因为它应该知道从它自己的日期开始，对吗？怎么做？

谢谢，院长

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-28T17:20:33.457

LocalDateTime 只是一堆数字（日、月、年、小时、分钟......），它们代表了一个民用（不是物理）概念。相反，日期时间是一个物理概念（时间的瞬间），它还具有时区，因此可以用日/月/年表示。

要将 LocalDateTime 转换为 Datetime，您需要指定一个时区。但是，这种转换并没有完全明确定义；因为在[DST](https://en.wikipedia.org/wiki/Daylight_saving_time)转换时，两个不同的 DateTimes 可以对应同一个 LocalDateTime。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-07T06:58:47.120

# php - PHP 将变量和数组发布到 Jquery

> ID：13607932
> 
> 赞同：1
> 
> 时间：2012-11-28T14:54:21.533
> 
> 标签：php, jquery, ajax, arrays, post

我有这两个领域：

```
<input type="text" name="smsText" value="text sms to send to all">
<input type="text" name="recipients[]" value="3471234567">
<input type="text" name="recipients[]" value="3359876543">
<input type="text" name="recipients[]" value="3201472583"> 
```

我需要通过 ajax 调用发送到一个 php 页面。

我有我在许多脚本中使用的这个功能

```
$("#sendSms").click(function(){
    var text = $("input[name=smsText]").val();
    var recipients = $("input[name=recipients]").val();
     var datastr ='text=' + text +'&recipients=' + recipients;
    $(over).appendTo('#box');
    $.ajax({
        type: "POST",
        url: "send-result.php",
        data: datastr,
        cache: false,
        success: function(data){
            $('#box').html(data);
        }
    });
    return false;
}); 
```

请，我需要帮助来修改我的函数以通过 Ajax 将“smsText”和数组接收者 [] 发送到其他 php 页面......

非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:57:36.827

看看 jQuerys 函数 .serializeArray() 和 .serialize()

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T14:59:27.297

替换您的以下代码：

```
var recipients = $("input[name=recipients]").val();
var datastr ='text=' + text +'&recipients=' + recipients; 
```

对于这个：

```
var datastr = '';
$("input[name='recipients[]']").each(function() {
    datastr += '&recipients[]=' + $(this).val();
});
datastr ='text=' + text + datastr; 
```

那应该做你想做的事，并导致 PHP 创建`$_POST['recipients']`包含所有值的数组变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T15:04:49.270

尝试：

```
var datastr = '&recipients[]=';
var arr = [];
$("input[name='recipients[]']").each(function() {
  arr[] = $(this).val();
});

datastr ='text=' + text + datastr + arr; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T15:05:51.813

如果字段包含在表单中，您可以使用 jQuery 的 serialize() 方法将字段转换为字符串以通过 Ajax 发送

```
<form id="sms-form">
    <input type="text" name="smsText" value="text sms to send to all">
    <input type="text" name="recipients[]" value="3471234567">
    <input type="text" name="recipients[]" value="3359876543">
    <input type="text" name="recipients[]" value="3201472583">
</form>

$("#sendSms").click(function(){
    var datastr = $("form#sms-form").serialize();
    $(over).appendTo('#box');
    $.ajax({
        type: "POST",
        url: "send-result.php",
        data: datastr,
        cache: false,
        success: function(data){
            $('#box').html(data);
        }
    });
    return false;
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T15:07:23.027

尝试

**html**

```
 <form name='ohForm' action="#">

     <input type="text" name="smsText" value="text sms to send to all">
     <input type="text" name="recipients[]" value="3471234567">
     <input type="text" name="recipients[]" value="3359876543">
     <input type="text" name="recipients[]" value="3201472583">
     // and others components

 </form> 
```

**javascript**

```
 $("#sendSms").click(function(){
                var form = $("form[name='ohForm']");
                var datastr = form.serialize();
                $(over).appendTo('#box');
                $.ajax({
                    type: "POST",
                    url: "send-result.php",
                    data: datastr,
                    cache: false,
                    success: function(data){
                     $('#box').html(data);
                    }
               });
        return false;
    }); 
```

**php**

```
 print_r($_POST['data']); 
```

# c++ - c++ regex::match_type_flag aka syntax_option_type

> ID：13607933
> 
> 赞同：-1
> 
> 时间：2012-11-28T14:54:26.223
> 
> 标签：c++, regex, flags

有谁知道 boost::???::syntax_option_type 的类型？在源代码和互联网上都找不到。但我需要它！如果没有人知道，`unsigned int`在这两种类型之间进行转换是否有效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:03:19.320

使用[Agent Ransack](http://www.mythicsoft.com/agentransack)查看源代码，您可以在以下位置看到`regbase.hpp`：

```
typedef ::boost::regbase::flag_type syntax_option_type; 
```

和

```
typedef unsigned int flag_type; 
```

所以它是一个 UINT。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T15:04:59.377

`match_flag_type`并且`syntax_option_type`是两个不同的类型名称，用于不同的上下文并表示不同的含义。我想不出任何理由在它们之间进行转换。你想解决什么问题？

# javascript - 使用 LinkedIn 分享按钮添加标题和描述

> ID：13607935
> 
> 赞同：7
> 
> 时间：2012-11-28T14:54:30.987
> 
> 标签：javascript, share, linkedin

我正在使用一个简单的 JavaScript 弹出窗口来显示与 LinkedIn 共享对话框，基于此线程中的解决方案：[如何制作自定义 LinkedIn 共享按钮](https://stackoverflow.com/questions/10713542/how-to-make-custom-linkedin-share-button)。

```
https://www.linkedin.com/cws/share?url=http%3A%2F%2Fgoogle.com 
```

我想知道是否有任何方法可以向查询字符串添加标题和描述？我注意到，当您使用 google 示例执行此操作时，它会自动提取此信息。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-05T08:48:50.870

> [http://www.linkedin.com/shareArticle?mini=true&url=http://example.com/adaptxt-beta-android&title=http://example.com/adaptxt-beta-android&summary=http://example. com/adaptxt-beta-android&source=http://example.com/adaptxt-beta-android](http://www.linkedin.com/shareArticle?mini=true&url=http://example.com/adaptxt-beta-android&title=http://example.com/adaptxt-beta-android&summary=http://example.com/adaptxt-beta-android&source=http://example.com/adaptxt-beta-android)

你是这个意思？LinkedIn 分享文章脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-05-16T20:07:20.797

LinkedIn 共享 url 支持的唯一参数是`url`，所以，试试这样的......

```
https://www.linkedin.com/sharing/share-offsite/?url={url} 
```

**[官方 Microsoft LinkedIn 共享 API 文档](https://docs.microsoft.com/en-us/linkedin/consumer/integrations/self-serve/plugins/share-plugin)**。看这里，你会看到 LinkedIn 不再支持 a`summary`、`title`或其他参数。只有`url`.

不过，它们*曾经*支持其他参数。但随着微软收购LinkedIn，他们似乎发生了变化。希望有人更新你吗？如果您对定期维护的 GitHub 项目感兴趣，该项目会跟踪这一点，因此您不必这样做，请查看！ [社交分享网址](https://github.com/bradvin/social-share-urls)

[![社交分享 URL 图片](../Images/80f76ec3827227f0c745b62a5b15dff5.png)](https://i.stack.imgur.com/8rEut.jpg)

# sql - 通过 SSMS :OUT 命令创建的 .csv 文件中的空行

> ID：13607939
> 
> 赞同：5
> 
> 时间：2012-11-28T14:54:48.830
> 
> 标签：sql, sql-server, sql-server-2008

我在 MSSQL 2008 R2 management Studio 中使用这样的代码将 SELECT 语句的结果写入网络共享上的 csv 文件：

```
SET NOCOUNT ON;   
GO    
:OUT \\163.123.45.678\SomeFolder\mydata.csv    
SELECT id, name, surname FROM sometable;    
GO 
```

这会`mydata.csv`在正确的位置创建文件，但 csv 文件末尾有一个额外的空白行。如何防止在 csv 文件中创建该空行？

以上是将sql查询的输出写入文本文件的最佳方法吗？我无法使用 BCP。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T10:45:06.903

我认为您可以使用 SSIS 包来获取 .CSV 格式的查询结果。有时您可能会在两个 lisne 之间获得空白行或空格，在这种情况下，“派生列”转换任务并删除或修剪不需要的空格和行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T19:00:01.830

最后，使用 SSIS 包是一个更好的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T17:01:30.720

您可以从命令提示符尝试以下操作吗？

```
C:\>sqlcmd -S SQLServerHost -W -Q "SET NOCOUNT ON; SELECT TOP 5 date_id, previous_date, next_date FROM dates WHERE month_key = 201212" > testNoLine.txt 
```

结果：

![在此处输入图像描述](../Images/6942a12f8535d0b90f1f507a1af74faa.png)

生成的文件底部没有多余的行（与 SSMS 执行不同）。

# c# - 将文件添加到资源并通过 C# 中的代码创建资源 DLL

> ID：13607941
> 
> 赞同：1
> 
> 时间：2012-11-28T14:54:56.840
> 
> 标签：c#, dll, resources

目前，我使用 C# 类项目通过以下步骤生成资源 DLL：

1 - 将图像/文件添加到资源中（通过从 Windows 资源管理器拖放到 Visual Studio 中的解决方案资源管理器）。

2 - 将每个文件的编译操作设置为“资源”（手动）。

3 - 开始项目编译。

4 - 获取调试/发布文件夹中的 dll 文件。

我想以编程方式做同样的事情（通过向程序提供包含文件的文件夹的 URL）。如何创建此 DLL？我怎样才能通过代码完成每个步骤？

编辑：我试过：

```
IResourceWriter writer = new ResourceWriter("Library.resources");

DirectoryInfo DirectoryInfo = new DirectoryInfo(DirectoryUrl);

foreach (FileInfo File in DirectoryInfo.GetFiles())
{ 
    System.Windows.Media.Imaging.BitmapImage img = new System.Windows.Media.Imaging.BitmapImage(new Uri(File.FullName));
    MemoryStream ms = new MemoryStream(getBytesFromBitmapImage(img));
    writer.AddResource(File.FullName, ms.ToArray());
}
writer.Close(); 
```

但我不知道这是否是正确的方法，我不知道之后如何创建 DLL。

# git - 如何在所有分支上运行 git svn rebase

> ID：13607946
> 
> 赞同：9
> 
> 时间：2012-11-28T14:55:24.813
> 
> 标签：git, svn, git-svn

我正在使用 git-svn 来使用 git 管理 Subversion 存储库。我通常在任何时候都有大量的 git 分支。

我经常需要更新它们以匹配存储库中的最新代码，但发现`git checkout <branch>; git svn rebase`每个分支都运行起来很痛苦。

有没有比编写脚本（需要处理冲突）更简单的方法？

**编辑**：由于该过程中最慢的部分是联系颠覆服务器并下载更新，因此`git svn rebase`在一个分支上运行然后`git svn rebase --local`在其余分支上运行会更快。

有没有更好的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T15:25:34.093

我认为您的编辑有解决方案：

> 由于该过程中最慢的部分是联系 subversion 服务器并下载更新，因此在一个分支上运行 git svn rebase 然后在其余分支上运行 git rebase git-svn 会更快。

我还为我的 git-svn 存储库使用了许多本地 git 分支，并且发现自己每天都在对它们进行 rebase，以使它们尽可能靠近远程分支。使用单个跟踪分支来跟踪远程分支，然后从中重新定位/合并每个分支，从我自己有限的经验来看，这似乎是管理这种特殊情况的最有效方法。

# magento - Magento，按日期过滤集合并包含空值

> ID：13607952
> 
> 赞同：4
> 
> 时间：2012-11-28T14:55:45.813
> 
> 标签：magento, magento-1.7

我很难在带有自定义表的集合上设置日期过滤器。已经[在这里](http://www.magentocommerce.com/wiki/1_-_installation_and_configuration/using_collections_in_magento)和[这里](http://dbhoopendra.blogspot.com.es/2012/04/addattributetofilter-conditionals-in.html#.ULYideR_nX9)以及其他一些地方搜索过，但仍然无法得到我需要的东西。问题是我无法将`NULL`值添加到结果集中。

到目前为止，经过多次反复试验，我当前的代码：

```
$myBannersCollection = Mage::getModel('banners/bannersadmin')->getCollection()
                   ->addfieldtofilter('banner_prod_id',$currentProdID)
                   ->addfieldtofilter('banner_start_date', 
                       array(
                         array('from' => Mage::getModel('core/date')->gmtDate()),
                                 'banner_start_date' => null))
                   ->addfieldtofilter('banner_end_date',
                       array(
                         array('gteq' => Mage::getModel('core/date')->gmtDate()),
                                 'null' => true)
                                  );
var_dump((string) $myBannersCollection->getselect()); 
```

此代码输出以下 sql 片段：

```
SELECT `main_table`.* 
  FROM `dts_banners_admin` AS `main_table` 
 WHERE (banner_prod_id = '16')
  AND (((banner_start_date >= '2012-11-28 14:39:13') OR (banner_start_date='')))
   AND (banner_end_date IS NULL) 
```

尝试了几种不同的选项来添加`NULL`条件，但我无法得到类似的东西：

```
SELECT `main_table`.* 
  FROM `dts_banners_admin` AS `main_table` 
 WHERE (banner_prod_id = '16')
  AND (((banner_start_date>='2012-11-28 14:39:13') OR (banner_start_date IS NULL)))
   AND ((banner_end_date >= '2012-11-28 14:39:13') OR (banner_end_date IS NULL)) 
```

PS：Magento 上有`BETWEEN`运营商`addfieldtofilter`吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-28T15:15:00.973

知道了！感谢这个[SO answer](https://stackoverflow.com/a/7323079/1297603)。需要为`IS NULL`子句添加另一个数组。现在代码是：

```
$myBannersCollection = Mage::getModel('banners/bannersadmin')->getCollection()
                   ->addfieldtofilter('banner_prod_id',$currentProdID)
                   ->addfieldtofilter('banner_start_date', 
                        array(
                         array('to' => Mage::getModel('core/date')->gmtDate()),
                                 array('banner_start_date', 'null'=>'')))
                   ->addfieldtofilter('banner_end_date',
                        array(
                         array('gteq' => Mage::getModel('core/date')->gmtDate()),
                             array('banner_end_date', 'null'=>''))
                                  ); 
```

并输出：

```
SELECT `main_table`.*
  FROM `dts_banners_admin` AS `main_table`
 WHERE (banner_prod_id = '16')
 AND (((banner_start_date>='2012-11-28 15:12:03') OR (banner_start_date IS NULL)))
   AND (((banner_end_date >= '2012-11-28 15:12:03') OR (banner_end_date IS NULL))) 
```

**编辑**

修改了`banner_start_date`我使用*from*而不是*to*的时间，因此错误地确定了期间并且没有返回任何数据。

# html - 为字段集的标题提供背景颜色

> ID：13607953
> 
> 赞同：0
> 
> 时间：2012-11-28T14:55:51.560
> 
> 标签：html, css

我不知道如何使字段集的标题具有纯色背景色。当我尝试在 CSS 中更改颜色时，它会为整个字段集框着色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:59:02.783

html

```
 <fieldset>
    <legend >Personalia:</legend>
    Name: <input type="text"><br>
    Email: <input type="text"><br>
    Date of birth: <input type="text">
  </fieldset> 
```

css

```
fieldset legend {background:red} 
```

工作样本[http://codepen.io/yardenst/pen/taBqH](http://codepen.io/yardenst/pen/taBqH)

# python-3.x - 从文本文件返回列表列表

> ID：13607954
> 
> 赞同：0
> 
> 时间：2012-11-28T14:55:55.890
> 
> 标签：python-3.x

```
results = open(filename, 'r')

   line = results.readline()
   while line != '':
    # results for a single draw
    star = line[line.rfind('\t') :]
    stars.append(star)
    line =results.readline()
'''

while line != '':

   main = [line[:line.rfind('\t')]]
   mains.append(main)
   line =results.readline()
return (mains) 
```

我正在使用上面的脚本从格式为 1,2,3,4,5 选项卡 9,10new line 6,7,8,9,10 tab 11,12 的文本文件中读取并试图返回 [[ 1,2,3,4,5],[6,7,8,9,10]]上面的脚本给了我 [['1,2,3,4,5'],['6,7,8 ,9,10']] -括号阻止我使用数据。请原谅我再次愚蠢，但是如何从文本文件中获取列表格式？我确实尝试阅读其他帖子，但无法应用这些建议-对此太陌生了非常感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T15:26:43.830

试试这个：

```
results = open(filename, 'r')
line = results.readline()
mains = []
while line != '':
  stars = line[:line.rfind('\t')].split(',')
  nums = [int(n) for n in stars]
  mains.append(nums)
  line =results.readline() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T18:38:23.613

尝试：

```
# say your data is in file named 'testfile'
$ cat testfile 
1,2,3,4,5   9,10
6,7,8,9,10  11,12

# the actual code
datafile = [line.strip().split('\t')[0].split(',') for line in open('testfile')]   
result = []
for l in datafile:
    result.append([int(string) for string in l])
# test the results
print(result)
[[1, 2, 3, 4, 5], [6, 7, 8, 9, 10]] 
```

**编辑**：要获取每行的两个部分，请尝试：

```
datafile = [line.strip() for line in open('testfile')]
datafile = [line.split('\t') for line in datafile if line]
datalist = list(zip(*datafile))
result = []
for index in datalist:
    for i in index:
        result.append([int(string) for string in i.split(',')])
# you can access the result list by indexing:
print(result[:2], result[2:])
# or assign to new lists:
firstlist, secondlist = result[:2], result[2:]
print(firstlist, secondlist) 
```

# java - EJB Bean 钝化

> ID：13607956
> 
> 赞同：4
> 
> 时间：2012-11-28T14:56:03.637
> 
> 标签：java, ejb, ejb-passivation

我已经读过，当`ejbPassivate()`被称为*有状态会话 Bean*时通常会被驱逐，但*实体 Bean*和*无状态 Bean*是池化的，这意味着它们不适用于钝化。

在另一篇文章中，我读到激活和钝化仅适用于*有状态会话 Bean*和*实体 Bean ，这与**实体 Bean*和*无状态 Bean*被池化的说法形成对比。

钝化适用于哪些 bean，当它们使用时会发生什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-28T16:25:25.760

钝化和激活仅适用于具有状态的 EJB，即有状态会话 bean 和实体 bean。

钝化是将给定 bean 的任何状态移入存储的过程。

激活是从存储中加载给定 bean 先前具有的任何状态的过程。

之所以需要这种机制，是因为 EJB 包含为每种 bean 类型创建一个池，但给人一种错觉，即每种 bean 的数量是无限的，根据需要分别使用 ejbActive 和 ejbPassivate 方法加载和存储它们。

此处描述了每种 bean 类型的完整生命周期：

[无状态会话 Bean](http://docstore.mik.ua/orelly/java-ent/ebeans/ch07_02.htm)

[有状态会话 Bean](http://docstore.mik.ua/orelly/java-ent/ebeans/ch07_04.htm)

[实体 Bean](http://docstore.mik.ua/orelly/java-ent/ebeans/ch06_03.htm)

# javascript - Javascript - 在运行时访问嵌入标签并附加文本

> ID：13607968
> 
> 赞同：0
> 
> 时间：2012-11-28T14:56:18.143
> 
> 标签：javascript, jquery, text, append, embed

在 html 源代码中，我有以下内容：

```
<embed width="100%" id="video-player-flash"... 
```

**嵌入在 iframe 中**

如何在运行时访问要附加的嵌入

```
<embed width="100%" id="video-player-flash" allownetworking="internal"... 
```

谢谢

我试过了：

```
<script type="text/javascript">
jQuery(document).ready( function() {
    document.video-player-flash.innerHTML += 'allownetworking=&quot;internal&quot;';
});
</script> 
```

或者

```
<script type="text/javascript">
jQuery(document).ready( function() {
    document.getElementById("video-player-flash").innerHTML += 'allownetworking=&quot;internal&quot;';
});
</script> 
```

或者

```
<script type="text/javascript">
jQuery(document).ready( function() {
    var playerep = document.getElementById('video-player-flash');
    playerep.setAttribute("allownetworking", "internal");    
});
</script> 
```

怎么了？

**我认为问题在于 youtube 视频位于另一个域（youtube.com）上......所以如何在加载后获取 iframe 的所有内容，然后将其完全替换为“allownetworking =“internal”。可能吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:05:49.207

您可以使用：

```
<script type="text/javascript">
    $(document).ready(function(){
        $("#video-player-flash").attr("allownetworking", "internal");
    });
</script> 
```

您可以在此处阅读 jQuery`attr`函数：http: [//api.jquery.com/attr/](http://api.jquery.com/attr/)

由于您使用 jQuery，因此无需使用`document.getElementById`- 当您想要在页面中选择元素时，最好使用 jQuery 选择器。

# web-scraping - 如何打开浏览器并连接到网站，然后在 java 中使用 jsoup 解析该网站？

> ID：13607969
> 
> 赞同：1
> 
> 时间：2012-11-28T14:56:18.607
> 
> 标签：web-scraping, jsoup

我有一个需要一点网络抓取的项目。主要要求是让用户在 java 应用程序中输入他的数据。然后应用程序将连接到数据输入网站，然后它会自动将用户输入的数据输入到该网站。我还没有开始编写代码，因为我不知道从哪里开始。我已经对此进行了一些研究，它指向了 jsoup 和桌面 api（用于网页抓取的 jsoup 和用于打开浏览器的桌面 api）。希望能在这里收到Java专家的回复。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:01:33.420

JSoup 肯定会为您进行抓取。但是，您需要处理 HTTP（GET/POST 等），为此我推荐[Apache Http Components](http://hc.apache.org/)。

我不确定您是否要打开浏览器。相反，我希望您询问用户输入（可能通过 Swing UI 或基于浏览器的 UI），然后使用 HTTP 直接与网站对话。我认为您无需打开浏览器即可访问目标网站。如果您这样做，请查看[Watij](http://watij.com/)，它允许您直接从 Java 驱动浏览器。

# c# - 右对齐 PdfPCell 中的文本

> ID：13607970
> 
> 赞同：20
> 
> 时间：2012-11-28T14:56:27.173
> 
> 标签：c#, itextsharp

我有一个生成 PDF 发票的 C# 应用程序。在这张发票中是一个项目和价格表。这是使用 a`PdfPTable`和`PdfPCell`s 生成的。

我希望能够右对齐价格列，但我似乎无法做到 - 文本在单元格中总是左对齐。

这是我创建表的代码：

```
PdfPTable table = new PdfPTable(2);
table.TotalWidth = invoice.PageSize.Width;
float[] widths = { invoice.PageSize.Width - 70f, 70f };
table.SetWidths(widths);
table.AddCell(new Phrase("Item Name", tableHeadFont));
table.AddCell(new Phrase("Price", tableHeadFont));

SqlCommand cmdItems = new SqlCommand("SELECT...", con);

using (SqlDataReader rdrItems = cmdItems.ExecuteReader())
{
    while (rdrItems.Read())
    {
        table.AddCell(new Phrase(rdrItems["itemName"].ToString(), tableFont));
        double price = Convert.ToDouble(rdrItems["price"]);
        PdfPCell pcell = new PdfPCell();
        pcell.HorizontalAlignment = PdfPCell.ALIGN_RIGHT;
        pcell.AddElement(new Phrase(price.ToString("0.00"), tableFont));
        table.AddCell(pcell);
    }
} 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-09-12T10:30:53.513

我是 iText 的原始开发者，您遇到的问题在我的[书中](http://itextpdf.com/book)进行了解释。

您正在混合**text mode**和**composition mode**。

在**文本模式**中，您`PdfPCell`使用 a`Phrase`作为构造函数的参数创建 ，并在单元格级别定义对齐方式。但是，您正在**合成模式下**工作。只要您使用该`addElement()`方法，就会触发此模式。在**复合模式下**，在单元格级别定义的对齐将被忽略（这解释了您的问题）。相反，使用了单独元素的对齐方式。

如何解决您的问题？

通过以不同的方式将您添加到单元格中，可以在**文本模式下工作。**`Phrase`或者在**复合模式下**工作并使用`Paragraph`您为其定义对齐方式的 a。

**复合模式**相对于**文本模式**的优势在于，同一单元格中的不同段落可以有不同的对齐方式，而在**文本模式下**只能有一种对齐方式。另一个优点是您可以添加的不仅仅是文本：您还可以添加图像、列表、表格……**文本模式**的一个优点是速度：处理单元格内容所需的处理时间更少。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-09-12T10:18:10.887

```
private static PdfPCell PhraseCell(Phrase phrase, int align)
{
    PdfPCell cell = new PdfPCell(phrase);
    cell.BorderColor = BaseColor.WHITE;
    // cell.VerticalAlignment = PdfCell.ALIGN_TOP;
    //cell.VerticalAlignment = align;
    cell.HorizontalAlignment = align;
    cell.PaddingBottom = 2f;
    cell.PaddingTop = 0f;
    return cell;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-17T17:49:52.683

这是我对 user2660112 答案的推导 - 一种返回单元格以插入带边框和背景色的表格的方法，以及类似但无边框/无色的品种：

```
private static PdfPCell GetCellForBorderedTable(Phrase phrase, int align, BaseColor color)
{
    PdfPCell cell = new PdfPCell(phrase);
    cell.HorizontalAlignment = align;
    cell.PaddingBottom = 2f;
    cell.PaddingTop = 0f;
    cell.BackgroundColor = color;
    cell.VerticalAlignment = PdfPCell.ALIGN_CENTER;
    return cell;
}

private static PdfPCell GetCellForBorderlessTable(Phrase phrase, int align)
{
    PdfPCell cell = new PdfPCell(phrase);
    cell.HorizontalAlignment = align;            
    cell.PaddingBottom = 2f;
    cell.PaddingTop = 0f;
    cell.BorderWidth = PdfPCell.NO_BORDER;
    cell.VerticalAlignment = PdfPCell.ALIGN_CENTER;
    return cell;
} 
```

然后可以像这样调用它们：

```
Font timesRoman9Font = FontFactory.GetFont(FontFactory.TIMES_ROMAN, 9, BaseColor.BLACK);
Font timesRoman9BoldFont = FontFactory.GetFont(FontFactory.TIMES_BOLD, 9, BaseColor.BLACK);

Phrase phrasesec1Heading = new Phrase("Duckbills Unlimited", timesRoman9BoldFont);
PdfPCell cellSec1Heading = GetCellForBorderedTable(phrasesec1Heading, Element.ALIGN_LEFT, BaseColor.YELLOW);
tblHeadings.AddCell(cellSec1Heading);

Phrase phrasePoisonToe = new Phrase("Poison Toe Toxicity Level (Metric Richter Scale, adjusted for follicle hue)", timesRoman9Font);
PdfPCell cellPoisonToe = GetCellForBorderlessTable(phrasePoisonToe, Element.ALIGN_LEFT);
tblFirstRow.AddCell(cellPoisonToe); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-07T19:10:19.350

我最终在这里搜索了 PdfPCell 中的 java 右对齐文本。因此，如果您使用的是 java，请使用给定的代码段来实现正确的对齐。

```
private PdfPCell getParagraphWithRightAlignCell(Paragraph paragraph) {

 PdfPCell cell = new PdfPCell(paragraph);
 cell.setBorderColor( BaseColor.WHITE);
 cell.setHorizontalAlignment(Element.ALIGN_RIGHT);
 return cell;

} 
```

`getParagraphWithRightAlignCell` 通过`paragraph`
谢谢_

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-06-18T19:22:12.417

也许是因为你混合了不同的方式来添加细胞？您是否尝试过显式创建一个单元格对象，根据需要对其进行按摩，然后为每个单元格添加它？

您可以尝试的另一件事是设置垂直对齐和水平对齐。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2020-03-05T23:08:17.857

```
cell.HorizontalAlignment = Element.ALIGN_RIGHT; 
```

# c#-4.0 - CRM EarlyBoundEntities 日期时间

> ID：13607978
> 
> 赞同：2
> 
> 时间：2012-11-28T14:56:53.140
> 
> 标签：c#-4.0, dynamics-crm-2011, early-binding

我有一个可以跨多个时区工作的 Dynamics CRM 系统。用户在他们当地的时区工作，我有一些与他们创建的实体交互的服务。

所有代码都是通过 SDK 生成的早期绑定实体类完成的。

例如：

1.  用户在 GMT-4 时区创建具有关联任务开始和结束日期的记录
    *   通过 UI 的开始日期 = 2012/11/23 00:00:00
    *   DB 中的开始日期 = 2012/11/22 20:00:00
    *   通过 UI 的结束日期 = 2012/11/25 00:00:00
    *   DB 中的结束日期 = 2012/11/24 20:00:00
2.  记录和创建具有开始和结束日期的任务的服务进程 - 这次服务帐户位于 GMT+1 (BST)
    *   通过代码的开始日期 = 2012/11/22 20:00:00
    *   DB 中的开始日期 = 2012/11/22 19:00:00
    *   通过 UI 的结束日期 = 2012/11/24 20:00:00
    *   DB 中的结束日期 = 2012/11/24 19:00:00
3.  用户查看创建的记录并看到任务开始和结束日期提前 4 小时 - 当 UI 呈现时，它显示为 2012/11/22 23:00:00，而用户期望 2012/11/23 00:00： 00.

我看到当用户创建由服务使用的记录时，日期不匹配导致问题的问题。

所以我想我有很多问题：

1.  SDK EarlyBoundEntities 返回的日期时间是本地还是 UTC（我怀疑是 UTC）？
2.  如果它在UTC中，我更新/创建记录的代码是否应该在设置之前将我工作的日期时间转换为UTC（即在获取时使用datetime.ToLocal()，在设置时使用ToUTC()）？
3.  我的服务器应该调整夏令时还是应该保持在设定的时间，即UTC？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T15:08:10.057

1.  是的，在 CRM 中本地化的唯一时间`DateTime`是您在代码中创建新`DateTime`代码，而不是指定它是 UTC，或者当它显示给用户时。任何时候 CRM 都会存储一个 `DateTime，如果它没有指定为 UTC，它会根据用户的 TimeZone 将其转换为 UTC。
2.  由于 SDK 将其作为 UTC 返回，因此请保持该格式。请注意，如果您创建一个新的`DateTime`，则必须指定它是 UTC（[DateTime 到 UTC](https://stackoverflow.com/questions/6208676/c-sharp-datetime-to-utc-time-without-changing-the-time)），否则 SDK 会在您保存或更新它时将其转换为 UDC。
3.  如果您总是在 UTC 中工作，这是没有意义的。

# python - Python解析目录，删除子目录树

> ID：13607981
> 
> 赞同：1
> 
> 时间：2012-11-28T14:57:03.683
> 
> 标签：python, parsing, directory

我有一长串目录，有这样的东西

```
C:\Users\vanstrie\Desktop\ntnu\SCHEMA\2012\07_paper\results\026\onsets 
```

我想解析文件夹 001-040（如上所示的 026）并删除包含所有文件和子文件夹的 onsets 子目录。我不确定如何使用 python 3 实现这一点。如果您有解决方案，请告知。提前谢谢了。

尼尔斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T15:03:59.227

我认为这样的事情应该可以工作......

```
import glob
import os.path
import shutil
files_dirs = glob.glob(r'C:\Users\vanstrie\Desktop\ntnu\SCHEMA\2012\07_paper\results\*')
for d in files_dirs:
    head,tail = os.path.split(d)
    try:
        if (0 < int(tail) < 41) and (len(tail) == 3):  #don't want to delete `\results\3\onsets` I guess...
           print("about to delete:",d)
           shutil.rmtree(os.path.join(d,'onsets'),ignore_errors=True)
    except ValueError:  #apparently we got a non-integer.  Leave that directory.
        pass 
```

与删除文件时的任何内容一样，我肯定会打印第一次通过时将删除的内容——只是为了确保脚本实际上按预期工作（并确保您不会删除要保留的内容） .

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T15:05:32.563

```
import shutil, os.path

root_folder = "C:\\Users\\vanstrie\\Desktop\\ntnu\\SCHEMA\\2012\\07_paper\\results"
suffix = "onsets"

for i in range(1,41):
  folder = os.path.join( root_folder, "%03d" % i, suffix )
  shutil.rmtree( folder, ignore_errors=True, onerror=None ) 
```

# asp.net - 在 formview 中使用验证器时，输入参数“controlId”不能为空字符串

> ID：13607982
> 
> 赞同：5
> 
> 时间：2012-11-28T14:57:04.453
> 
> 标签：asp.net, validation

我有一个 FormView，其中有几个字段。这些字段应该由 asp.net 验证器进行验证，如下所示：

```
<asp:FormView ID="OrderDetails" runat="server" DataKeyNames="ID" DataSourceID="DS_Order" DefaultMode="Edit" AutoGenerateRows="false" ClientIDMode="Static" RenderOuterTable="false">
    <EditItemTemplate>
        <asp:TextBox ID="EinkaufsauftragsNr" runat="server" ClientIDMode="Static" Text='<%# Bind("EinkaufsauftragsNr") %>'/>
        <asp:CompareValidator runat="server" Operator="DataTypeCheck" Type="Integer" ValidationGroup="EditValidation" Display="Dynamic"
                                    ControlToValidate="EinkaufsauftragsNr" ErrorMessage="Nur Ganzzahlen erlaubt." CssClass="validator" />
        .....
    </EditItemTemplate>
</FormView> 
```

但是当我执行这个时，我得到：“输入参数'controlId'不能是空字符串。” 当我删除验证器时，错误消息也会消失。

在网上搜索了这个问题后，我认为问题是在formview中找不到控件，所以我将clientidmode =“static”放在那里->但这并没有解决我的问题。你对我如何解决这个问题还有其他建议吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-28T14:58:34.157

您没有将 id 分配给 CompareValidator 控件，您`have to assign ID to asp:CompareValidator`

**改变**

```
<asp:CompareValidator runat="server" Operator="DataTypeCheck"
    Type="Integer" ValidationGroup="EditValidation" Display="Dynamic"
    ControlToValidate="EinkaufsauftragsNr" ErrorMessage="Nur Ganzzahlen erlaubt."
    CssClass="validator" /> 
```

**到**

```
<asp:CompareValidator ID="SomeID" runat="server" Operator="DataTypeCheck"
    Type="Integer" ValidationGroup="EditValidation" Display="Dynamic"
    ControlToValidate="EinkaufsauftragsNr" ErrorMessage="Nur Ganzzahlen erlaubt."
    CssClass="validator" /> 
```

# visual-studio - 如何在两个 Visual C++ 项目之间共享相同的产品版本？

> ID：13607986
> 
> 赞同：9
> 
> 时间：2012-11-28T14:57:19.003
> 
> 标签：visual-studio

我有 2 个 Visual C++ 项目，它们都有一个定义了现场产品版本的 RC 文件。我怎样才能让这两个项目从全球获得这个版本？全球 RC 文件或有什么解决方案？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-28T15:22:59.137

对我有用的是添加两个“解决方案项目”。一个是包含`#defines`一些版本字符串的 .h 文件，另一个是包含 .h 并`BLOCK "StringFileInfo"`使用定义的 .rc 文件。

每个项目的单独资源文件使用 a[`TEXTINCLUDE`](http://msdn.microsoft.com/en-us/library/6t3612sk%28v=vs.71%29.aspx)来引入解决方案的 .rc 的内容。

这是很多东西。让我告诉你我的意思......

**1）**两个解决方案项目是这样添加的：

![解决方案项目](../Images/720e44ed25db75c1415fdeaf1976d449.png)

**2)** `version.h`有一些将在 VersionInfo.rc2 中使用的#defines

```
#define SOLUTIONFILEVERSION 1,00,0000,00000
#define SOLUTIONFILEVERSIONSTRING "1,00,0000,00000"
#define COPYRIGHT "Copyright 2012"
#define PRODUCTNAME "Your product name"
#define COMPANYNAME "Your company name" 
```

**3)** VersionInfo.rc2 使用定义

```
#include "version.h"
VS_VERSION_INFO VERSIONINFO
 FILEVERSION SOLUTIONFILEVERSION
 PRODUCTVERSION SOLUTIONFILEVERSION
 FILEFLAGSMASK 0x3fL
#ifdef _DEBUG
 FILEFLAGS 0x1L
#else
 FILEFLAGS 0x0L
#endif
 FILEOS 0x4L
 FILETYPE 0x2L
 FILESUBTYPE 0x0L
BEGIN
    BLOCK "StringFileInfo"
    BEGIN
        BLOCK "040904b0"
        BEGIN
            VALUE "CompanyName", COMPANYNAME
            VALUE "FileVersion", SOLUTIONFILEVERSIONSTRING
            VALUE "LegalCopyright", COPYRIGHT
            VALUE "ProductName", PRODUCTNAME
            VALUE "ProductVersion", SOLUTIONFILEVERSIONSTRING
        END
    END
    BLOCK "VarFileInfo"
    BEGIN
        VALUE "Translation", 0x409, 1200
    END
END 
```

您将希望在此文件的末尾有一个新行，以使资源编译器在下一步包含它时感到满意。

您可能想要设置的另一个字段是“FileDescription”，但这通常是基于每个项目的。请记住，这可以包含您希望在项目之间共享的任何内容。

**4)**在每个进程中包含 VersionInfo.rc2。*这是通过在资源视图*中右键单击每个项目的 .rc并选择*Resource Includes*来完成的。

添加到*编译时指令*：`#include "../VersionInfo.rc2"`

![编译时指令](../Images/a8581351649644101f7b598b820146a8.png)

这可以通过将以下内容添加到项目的 .rc 文件中手动完成，但最好让 Visual Studio 为您管理它可以为您管理的所有内容。

```
3 TEXTINCLUDE 
BEGIN
    "#include ""../VersionInfo.rc2""\r\n"
    "\0"
END

/////////////////////////////////////////////////////////////////////////////
//
// Generated from the TEXTINCLUDE 3 resource.
//
#include "../VersionInfo.rc2"
///////////////////////////////////////////////////////////////////////////// 
```

呼……那是一口。但是现在您应该能够从一处更改您的产品版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T14:22:50.550

好的，我已经解决了。

我还必须在项目资源文件的底部添加以下内容

```
/////////////////////////////////////////////////////////////////////////////
//
// Generated from the TEXTINCLUDE 3 resource.
//

#include "VersionInfo.rc2"

///////////////////////////////////////////////////////////////////////////// 
```

现在一切都很好。谢谢

# google-analytics - 如何将 Google Analytics 添加到 Plone 模板

> ID：13607995
> 
> 赞同：0
> 
> 时间：2012-11-28T14:57:41.620
> 
> 标签：google-analytics, plone

我想将事件跟踪添加到将用户连接到我们的知识库的出站 URL。知识库工具分配给 viewlet 并包含简单的 .js 和 .pt 文件。除了我们目前没有使用的collective.googleanalytics之外，我还没有找到太多关于向Plone添加事件跟踪的信息。所以我想知道如何添加跟踪代码。

.pt 文件中包含 url 的部分是：

```
 <div id="askthelion"
       tal:define="intelliresponse string:${here/portal_url}/intelliresponseProcess;">

        <form id="asklion" action="http://psu.intelliresponse.com/studentaid/index.jsp" 
```

这行得通吗？

```
 <form id="asklion" action="http://psu.intelliresponse.com/studentaid/index.jsp" onClick="_gaq.push(['_trackEvent','IR','onClick','AsktheLion']);" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:13:07.347

onClick 必须在表单按钮中，例如：

```
<input type="submit" onClick="_gaq.push(['_trackEvent','IR','onClick','AsktheLion']);" > 
```

然后，您可以使用 Firebug 的“Net”选项卡查看单击按钮时浏览器是否正在向 GA 发送请求。按下按钮后，您应该会看到类似“GET __utm.gif”的新请求。

# jquery - jQuery中的搜索和滚动

> ID：13607998
> 
> 赞同：2
> 
> 时间：2012-11-28T14:57:56.333
> 
> 标签：jquery

我想在文本中搜索并在查找行上滚动。我无法开发此代码以滚动到找到的`<h3>`标记行。

jQuery：

```
$('#searchfor').keyup(function(){
         var page = $('#all_text');
         var pageText = page.text().replace("<span>","").replace("</span>");
         var searchedText = $.trim($('#searchfor').val());
         var theRegEx = new RegExp("("+searchedText+")", "igm");    
         var newHtml = pageText.replace(theRegEx ,"<span>$1</span>");
         page.html(newHtml);
    }); 
```

HTML：

```
<input type="text" id="searchfor"/>
<p id="all_text">
<h3>LINE 1</h3>
Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euism modo typi, qui nunc nobis videntur parum clari, fiant sollemnes in futurum.
        Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tinci futurum.<b>EX1</b><br/>
<h3>LINE 2</h3>        
Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euism modo typi, qui nunc nobis videntur parum clari, fiant sollemnes in futurum.
    Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tinci futurum.<b>EX2</b><br/>
.
.
.
<h3>LINE 100</h3>        
Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euism modo typi, qui nunc nobis videntur parum clari, fiant sollemnes in futurum.
    Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tinci futurum.<b>EX100</b><br/>
</p> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-31T20:51:54.533

是否要滚动到刚刚添加的跨度`<span>$1</span>`

```
 $("span").scrollintoview(); 
```

请注意，如果跨度已经在可见区域中，它将不会滚动。

**更新之前** 错过了提及插件。这是[插件页面的链接](http://erraticdev.blogspot.in/2011/02/jquery-scroll-into-view-plugin-with.html)